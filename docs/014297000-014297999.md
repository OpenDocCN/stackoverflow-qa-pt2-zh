# StackOverflow 问答 14297000-14297999

# android - 为 Animation-list 中的所有项目设置动画

> ID：14297003
> 
> 赞同：2
> 
> 时间：2013-01-12T19:18:36.543
> 
> 标签：android, android-layout, android-animation, android-imageview, android-image

我在用“item”指定的“animation-list”下的“image_list.xml”中有一个图像列表（大约 10 个）。我已经制作了一个“fade_in.xml”文件来淡入imgaes的效果。该代码工作正常，没有错误。

我唯一的问题是淡入效果出现在第一张图像中，但没有出现在 image_list 的其他项目中。请告诉我一种使这成为可能的方法，以便所有图像在出现时都会淡入淡出。我的代码是：

image_list.xml

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" 
        android:oneshot="false">
<item android:drawable="@drawable/sample1"
    android:duration="2000"/>
<item android:drawable="@drawable/sample2"
    android:duration="2000"/>
<item android:drawable="@drawable/sample3"
    android:duration="2000"/>
<item android:drawable="@drawable/sample4"
    android:duration="2000"/>
. . .
</animation-list> 
```

图片活动.java

```
 public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);
    ImageView img_change = (ImageView) findViewById(R.id.images);
    Animation animationFadeIn = AnimationUtils.loadAnimation(this, R.anim.fade_in);
    img_change.setBackgroundResource(R.drawable.image_list);
    AnimationDrawable splashAnimation = (AnimationDrawable) img_change.getBackground();
    if(hasFocus) {
        img_change.setAnimation(animationFadeIn);
        splashAnimation.start();
}} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-23T14:07:31.120

在启动 AnimationDrawable 之前添加进入和退出淡入淡出持续时间

```
AnimationDrawable splashAnimation = ((AnimationDrawable) iv.getBackground());

splashAnimation .setEnterFadeDuration(500);
splashAnimation .setExitFadeDuration(500);

animDrawable.start(); 
```

这个对我有用。

快乐编码

# php - 我可以使用 Dwolla 的访客结帐同时为用户创建一个 Dwolla 帐户吗？

> ID：14297009
> 
> 赞同：0
> 
> 时间：2013-01-12T19:19:03.533
> 
> 标签：php, checkout, dwolla

理想情况下，如果用户决定再次使用 Dwolla，他们不必第二次输入所有信息。

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:26:03.697

用户可以在访客结账会话结束时选择密码，这会根据他们已经提供的信息触发完整的帐户创建。所以，这应该可以解决问题！

# php - 表单加载时设置默认值

> ID：14297010
> 
> 赞同：0
> 
> 时间：2013-01-12T19:19:04.090
> 
> 标签：php, javascript, html, forms, codeigniter

```
 <?php echo form_dropdown('item_id', $records2, '#', 'id="items"'); ?> 
```

我想在表单加载时在选择框中设置某些内容的默认值。如果不可能，那么我想将其转换为常规选择框。这样的事情会起作用吗？

```
<select name="select1" id="items" class='cho'>
<option>--Select--  </option>
    <?php foreach($records2 as $r) { ?>
    <option value="<?=$r->item_id?>">
<?=$r->item_name?>
</option>
<?php } ?>
</select> 
```

我试过这个，但我得到一个错误并且值没有出现在选择框中。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:27:59.190

第一个参数将包含字段的名称，第二个参数将包含一个关联的选项数组，第三个参数将包含您希望选择的值。您还可以通过第三个参数传递多个项目的数组

```
<?php echo form_dropdown('select1', $records2, $selected_value);  ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T19:26:58.577

下面是这个辅助函数的工作原理：

```
form_dropdown('item_id',    $records3,    '#',           'id="items"')
//             field name   options       default value   HTML attributes 
```

选项*必须*是键/值格式*的数组，例如：

```
$options = array(
    'value1' => 'Text 1',
    'value2' => 'Text 2',
    'value3' => 'Text 3'
); 
```

默认值应该是 中的键之一`$options`，否则什么也不会发生。

看起来您需要先创建此数组，而不仅仅是传入`$records2`：

```
$options = array();
foreach ($records2 as $r) {
    $options[$r->item_id] = $r->item_name;
}
echo form_dropdown('item_id', $options, '{default value}', 'id="items"'); 
```

[* 如果作为 $options 传递的数组是多维数组，form_dropdown() 将生成一个`<optgroup>`以数组键为标签的数组。]

# python - 用scrapy一一抓取网站列表

> ID：14297011
> 
> 赞同：2
> 
> 时间：2013-01-12T19:19:08.950
> 
> 标签：python, screen-scraping, web-crawler, scrapy

我正在尝试使用`scrapy`. 我试图将网站 url 列表作为`start_urls`，但后来我发现我买不起这么多内存。有没有办法一次设置`scrapy`爬取一两个站点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:37:13.447

您可以尝试使用`concurrent_requests = 1`，以免数据过载

[http://doc.scrapy.org/en/latest/topics/settings.html#concurrent-requests](http://doc.scrapy.org/en/latest/topics/settings.html#concurrent-requests)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:56:39.520

您可以定义一个[start_requests](https://scrapy.readthedocs.org/en/latest/topics/spiders.html#scrapy.spider.BaseSpider.start_requests)方法，该方法遍历对您的 URL 的请求。这应该避免一次将所有起始 URL 保存在内存中的开销，并且是解决您描述的问题的最简单方法。

如果在爬取过程中仍然有很多 URL 供scrapy 保存在内存中，则可以[启用持久性支持](https://scrapy.readthedocs.org/en/latest/topics/jobs.html#job-directory)。

如果你真的想一次只喂几个 URL，这可以通过注册[spider_idle](http://doc.scrapy.org/en/latest/topics/signals.html#spider-idle)信号并在你的回调函数中添加接下来的几个 URL 并引发 DontCloseSpider 来实现。

# python - 使用 Python 估计自相关

> ID：14297012
> 
> 赞同：35
> 
> 时间：2013-01-12T19:19:24.870
> 
> 标签：python, numpy, signal-processing

我想对下面显示的信号执行自相关。两个连续点之间的时间为 2.5ms（或重复率为 400Hz）。

![在此处输入图像描述](../Images/4e6507d85383dfc525fe1ff11d075d44.png)

这是我想使用的估计自相关的等式（取自[http://en.wikipedia.org/wiki/Autocorrelation](http://en.wikipedia.org/wiki/Autocorrelation)，估计部分）：

![在此处输入图像描述](../Images/3f26487bdf86059cf74766dffdbf986d.png)

在 python 中查找我的数据的估计自相关的最简单方法是什么？有没有类似于`numpy.correlate`我可以使用的东西？

还是我应该只计算均值和方差？

* * *

编辑：

在[unutbu](https://stackoverflow.com/users/190597/unutbu)的帮助下，我写了：

```
from numpy import *
import numpy as N
import pylab as P

fn = 'data.txt'
x = loadtxt(fn,unpack=True,usecols=[1])
time = loadtxt(fn,unpack=True,usecols=[0]) 

def estimated_autocorrelation(x):
    n = len(x)
    variance = x.var()
    x = x-x.mean()
    r = N.correlate(x, x, mode = 'full')[-n:]
    #assert N.allclose(r, N.array([(x[:n-k]*x[-(n-k):]).sum() for k in range(n)]))
    result = r/(variance*(N.arange(n, 0, -1)))
    return result

P.plot(time,estimated_autocorrelation(x))
P.xlabel('time (s)')
P.ylabel('autocorrelation')
P.show() 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-12T22:33:20.617

我认为这个特定的计算没有 NumPy 函数。这是我的写法：

```
def estimated_autocorrelation(x):
    """
    http://stackoverflow.com/q/14297012/190597
    http://en.wikipedia.org/wiki/Autocorrelation#Estimation
    """
    n = len(x)
    variance = x.var()
    x = x-x.mean()
    r = np.correlate(x, x, mode = 'full')[-n:]
    assert np.allclose(r, np.array([(x[:n-k]*x[-(n-k):]).sum() for k in range(n)]))
    result = r/(variance*(np.arange(n, 0, -1)))
    return result 
```

断言语句用于检查计算并记录其意图。

当您确信此函数按预期运行时，您可以注释掉该`assert`语句，或使用`python -O`. （该`-O`标志告诉 Python 忽略断言语句。）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-12-09T04:58:33.517

我从 pandas autocorrelation_plot() 函数中获取了一部分代码。我用 R 检查了答案，并且值完全匹配。

```
import numpy
def acf(series):
    n = len(series)
    data = numpy.asarray(series)
    mean = numpy.mean(data)
    c0 = numpy.sum((data - mean) ** 2) / float(n)

    def r(h):
        acf_lag = ((data[:n - h] - mean) * (data[h:] - mean)).sum() / float(n) / c0
        return round(acf_lag, 3)
    x = numpy.arange(n) # Avoiding lag 0 calculation
    acf_coeffs = map(r, x)
    return acf_coeffs 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-05-01T18:28:32.547

statsmodels 包添加了一个内部使用的自相关函数`np.correlate`（根据`statsmodels`文档）。

见： [http ://statsmodels.sourceforge.net/stable/generated/statsmodels.tsa.stattools.acf.html#statsmodels.tsa.stattools.acf](http://statsmodels.sourceforge.net/stable/generated/statsmodels.tsa.stattools.acf.html#statsmodels.tsa.stattools.acf)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-07-17T02:00:28.303

我在最近一次编辑时编写的方法现在比`scipy.statstools.acf`在`fft=True`样本量变得非常大之前更快。

**错误分析**如果您想调整偏差并获得高度准确的错误估计：请查看我的代码[，](https://github.com/flipdazed/Hybrid-Monte-Carlo/blob/master/correlations/errors.py)它实现了 Ulli Wolff 的[这篇论文](http://arxiv.org/pdf/hep-lat/0306017.pdf)*（[或 UW 的原创`Matlab`](https://www.physik.hu-berlin.de/de/com/ALPHAsoft)）*

## 测试功能

*   `a = correlatedData(n=10000)`[来自此处](https://github.com/flipdazed/Hybrid-Monte-Carlo/blob/master/correlations/acorr.py)找到的例程
*   `gamma()`来自同一个地方`correlated_data()`
*   `acorr()`下面是我的功能
*   `estimated_autocorrelation`在另一个答案中找到
*   `acf()`来自`from statsmodels.tsa.stattools import acf`

## 计时

```
%timeit a0, junk, junk = gamma(a, f=0)                            # puwr.py
%timeit a1 = [acorr(a, m, i) for i in range(l)]                   # my own
%timeit a2 = acf(a)                                               # statstools
%timeit a3 = estimated_autocorrelation(a)                         # numpy
%timeit a4 = acf(a, fft=True)                                     # stats FFT

## -- End pasted text --
100 loops, best of 3: 7.18 ms per loop
100 loops, best of 3: 2.15 ms per loop
10 loops, best of 3: 88.3 ms per loop
10 loops, best of 3: 87.6 ms per loop
100 loops, best of 3: 3.33 ms per loop 
```

编辑...我再次检查了保持`l=40`和更改`n=10000`样本`n=200000`FFT 方法开始获得一些牵引力，而`statsmodels`fft 实现只是边缘它...（顺序相同）

```
## -- End pasted text --
10 loops, best of 3: 86.2 ms per loop
10 loops, best of 3: 69.5 ms per loop
1 loops, best of 3: 16.2 s per loop
1 loops, best of 3: 16.3 s per loop
10 loops, best of 3: 52.3 ms per loop 
```

编辑 2：我改变了我的例程并重新测试了 FFT`n=10000`和`n=20000`

```
a = correlatedData(n=200000); b=correlatedData(n=10000)
m = a.mean(); rng = np.arange(40); mb = b.mean()
%timeit a1 = map(lambda t:acorr(a, m, t), rng)
%timeit a1 = map(lambda t:acorr.acorr(b, mb, t), rng)
%timeit a4 = acf(a, fft=True)
%timeit a4 = acf(b, fft=True)

10 loops, best of 3: 73.3 ms per loop   # acorr below
100 loops, best of 3: 2.37 ms per loop  # acorr below
10 loops, best of 3: 79.2 ms per loop   # statstools with FFT
100 loops, best of 3: 2.69 ms per loop # statstools with FFT 
```

## 执行

```
def acorr(op_samples, mean, separation, norm = 1):
    """autocorrelation of a measured operator with optional normalisation
    the autocorrelation is measured over the 0th axis

    Required Inputs
        op_samples  :: np.ndarray :: the operator samples
        mean        :: float :: the mean of the operator
        separation  :: int :: the separation between HMC steps
        norm        :: float :: the autocorrelation with separation=0
    """
    return ((op_samples[:op_samples.size-separation] - mean)*(op_samples[separation:]- mean)).ravel().mean() / norm 
```

**`4x`加速**可以在下面实现。您必须小心只通过，`op_samples=a.copy()`否则它将修改数组：`a``a-=mean`

```
op_samples -= mean
return (op_samples[:op_samples.size-separation]*op_samples[separation:]).ravel().mean() / norm 
```

## 完整性检查

[![在此处输入图像描述](../Images/347d14ce0cf9b03445e06a2f6341390b.png)](https://i.stack.imgur.com/3lmNf.png)

## 示例错误分析

这有点超出范围，但如果没有集成自相关时间或集成窗口计算，我不会费心重做这个数字。与错误的自相关在底部图中很清楚 [![在此处输入图像描述](../Images/98c659c2e7cc129c8e560c42466be3f1.png)](https://i.stack.imgur.com/3xFQm.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-17T23:46:26.423

我发现这得到了预期的结果，只需稍作改动：

```
def estimated_autocorrelation(x):
    n = len(x)
    variance = x.var()
    x = x-x.mean()
    r = N.correlate(x, x, mode = 'full')
    result = r/(variance*n)
    return result 
```

针对 Excel 的自相关结果进行测试。

# asp.net-mvc-3 - ASP.NET MVC 动态数字类型

> ID：14297013
> 
> 赞同：0
> 
> 时间：2013-01-12T19:19:25.933
> 
> 标签：asp.net-mvc-3, dynamic

我在我的 ASP.NET MVC3 应用程序中运行查询以从数据库中获取一些数字：

```
var idQuery = "SELECT " + dynamicColumnName + " FROM " + dynamicTableName;
long[] idItems = db.Database.SqlQuery<long>(idQuery).ToArray(); 
```

但是，动态列有时是 int 类型`int`，有时是`long`. 我试过`long`了，因为它涵盖了 int，但程序抛出了异常：

> 从具体化的“System.Int32”类型到“System.Int64”类型的指定转换无效。

我尝试了该类型`dynamic`，但无法正确输入数字：

```
dynamic[] idItems = db.Database.SqlQuery<dynamic>(idQuery).ToArray();
long[] idItemsLong = new long[idItems.Length];
for (int i = 0; i < idItemsLong.Length; i++)
{
    idItemsLong[i] = Convert.ToInt64(idItemsLong[i]);
} 
```

抛出异常：

> 无法将“System.Object”类型的对象转换为“System.IConvertible”类型。

我可以做些什么来为`int`s 和`long`s 运行我的查询？获取动态类型并将它们转换为对我来说很长的工作的方法，我可以在下面的代码行中使用 idItems。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:45:21.493

Try plain old `object`:

```
object[] idItems = db.Database.SqlQuery<object>(idQuery).ToArray();
long[] idItemsLong = new long[idItems.Length];
for (int i = 0; i < idItemsLong.Length; i++)
{
    idItemsLong[i] = Convert.ToInt64(idItems[i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:38:41.390

我得到了一个没有动态类型的解决方案：

```
long[] idItems = new long[1];
long[] valueItems = new long[1];

try
{
    idItems = db.Database.SqlQuery<long>(idQuery).ToArray();
    valueItems = db.Database.SqlQuery<long>(valueQuery).ToArray();
}
catch (Exception e)
{
    int[] idItemsInt = db.Database.SqlQuery<int>(idQuery).ToArray();
    int[] valueItemsInt = db.Database.SqlQuery<int>(valueQuery).ToArray();
    idItems = new long[idItemsInt.Length];
    valueItems = new long[idItemsInt.Length];
    for (int i = 0; i < idItems.Length; i++)
    {
        idItems[i] = Convert.ToInt64(idItemsInt[i]);
        valueItems[i] = Convert.ToInt64(valueItemsInt[i]);
    }
} 
```

这样，如果类型是 int，我首先得到 long，然后我得到 int 并将它们转换为 long。如果我有一个动态类型，我总是会进行转换。所以如果我的类型很长（通常是），我没有不必要的转换，我认为这更快。

# rdlc - 一个组的两个实例后 .RDLC 文件中的分页符

> ID：14297019
> 
> 赞同：1
> 
> 时间：2013-01-12T19:20:34.203
> 
> 标签：rdlc

如何将一个组的两个实例放在 .RDLC 文件的一个页面上？我想在一个组的两个实例之后打破页面。

一个实例后很容易中断，但我的要求是放置一个组的两个实例，然后中断页面。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:40:08.837

这个想法是`Parent Group`为您的初始组创建一个，在其中您指定（父）组由两行子组组成：之后，您可以轻松地从 group 属性中放置分页符。

[我在 SO 中找到了这个答案](https://stackoverflow.com/a/10562516/1498857)，它很好地解释了你对大量图像的处理。当然，您必须根据您的要求对其进行调整

# iphone - 从标签栏返回到第一个视图

> ID：14297021
> 
> 赞同：2
> 
> 时间：2013-01-12T19:20:53.783
> 
> 标签：iphone, cocoa-touch, uitabbarcontroller, uistoryboard

这是我的故事板
![故事板](../Images/8ddea689d2f57a92dec3214b8469bab1.png) 正如所指出的，我添加了一个注销按钮，以到达第一个视图。

当应用程序启动时，它看起来像这样：
![开始](../Images/cd584d5bcc6b29869b224202b679e510.png)
登录后，它转到一个选项卡栏，如下所示：
![登出](../Images/18e12786bf4933e31dcb8e220d01c968.png)
我已将“注销”按钮与第一个视图连接并选择了推送。但是当我按下“注销”时，会发生这种情况：
![错误](../Images/cbd78449b23e71eb0942fd63fd8786d2.png)
我希望登录视图按原样显示，但标签栏出现，还有一个“后退”按钮，我不希望它出现。
*前 3 个选项卡项有自己的导航控制器，注销按钮位于第一个选项卡项上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T19:41:16.713

**更新**
我现在明白 TabBarController 是从 loginController*呈现的。*

那么正确的返回方式是：

```
[[self presentingViewController] dismissViewControllerAnimated:YES completion:nil]; 
```

我将留在下面的注释中，他们假设我们正在处理 UINavigationController 层次结构。还是值得一读！

* * *

这是一个部分答案......在我写完之后我意识到你的标签栏控制器不是你的登录 NavController 堆栈的一部分（我不这么认为），所以它不会工作 - 但你还是应该阅读它了解为什么 Segue/PUSHing 不是要走的路。

稍后我会为您的案例提供更准确的答案...

您不想使用 segue 或 PUSH ... 将其想象成一堆卡片，推送是将更多卡片添加到堆栈中，因此您将登录屏幕的一个版本添加到您的 NavController 堆栈中包含在您的标签栏控制器中。这*与*您已经创建的登录屏幕实例不同，它是一个新实例（*推送*创建一个新实例）。

您想从堆叠中移除卡片并返回您的第一张卡片。那是一个POP操作。

其中之一将起作用。

```
- (NSArray *)popToViewController:(UIViewController *)viewController animated:(BOOL)animated

- (NSArray *)popToRootViewControllerAnimated:(BOOL)animated 
```

它们是`UINavigationController`方法。您可以`UIViewController`像这样从最顶层访问它们：

```
[self navigationController] popToRootViewControllerAnimated:NO;

[self navigationController] popToViewController:myLogInViewController animated:YES; 
```

您可以通过在 viewController 中放置 IBAction 从注销按钮触发它们。

看起来你想要返回的 viewController 确实是你的根视图控制器，所以试试看它是否有效。如果没有，您将需要对要返回的 viewController 的引用。你可以通过计算堆栈来做到这一点。堆栈作为`viewControllers`导航控制器的数组属性访问。例如，如果它是从 rootViewController 向上的第二个 viewController，

```
UIViewController* logInViewController = 
        [[self navigationController] viewControllers] objectAtIndex:1]; 
```

会得到你所追求的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T19:44:56.570

我您对所有视图控制器使用相同的导航，然后首先从导航堆栈中找出第一个 viewController 对象并弹出到该视图。

例如：

```
-(void)popToSelectedViewController
{
    NSArray *viewC=[self.navigationController viewControllers];

    FirstViewC *firstVC=nil;

    for (int i=0; i<[viewC count]; i++)
    {
        UIViewController *tempVC=[viewC objectAtIndex:i];
        if([tempVC isKindOfClass:[FirstViewC class]])
        {
            firstVC=[viewC objectAtIndex:i];
            break;
        }
    }

    if(firstVC)
        [self.navigationController popToViewController:firstVCanimated:YES];
    else
        [self.navigationController popToRootViewControllerAnimated:YES];

} 
```

该方法将在导航堆栈中找到您的第一个 VC 并弹出到该视图。

我希望这会帮助你。

编辑后的另一个答案：

![你的形象](../Images/5cb52b69152cf950fe8dd6a4dd397e3b.png)

请在您的故事板中将编辑后的图像称为 N1 和 N2 类。我不知道这个类的名字，所以我把它写成 N1 和 N2。

在 N2 类中添加通知：将其写入 N2 类的 View DidLoad

```
-(void)viewDidLoad
{
  [super viewDidLoad];

 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(popToRooToview) name:@"PopView" object:nil];

   //other stuffs
} 
```

并将通知选择器定义为：

```
-(void)popToRooToview
{

  [self.navigationController popViewControllerAnimated:YES];

} 
```

在 viewDidUnLoad 中删除通知观察者

```
-(void)viewDidUnload
{
     [[NSNotificationCenter defaultCenter] removeObserver:self name:@"PopView" object:nil];
} 
```

现在在您的 N1 类中单击 Logout Btn 调用此方法：

```
 -(void)logoutButtonClicked
{
   [[NSNotificationCenter defaultCenter] postNotificationName:@"PopView" object:nil];

} 
```

//记住通知名称“PopView”对于N1类的通知和N2类的发布通知是相同的

# android - 开始 Activity 之前的预动画

> ID：14297027
> 
> 赞同：0
> 
> 时间：2013-01-12T19:21:43.870
> 
> 标签：android, android-layout, android-activity, android-animation

在启动我的 android 应用程序之前，我想有一些预动画。让我告诉你我现在是怎么做的。

我有另一个具有 ImageView 的活动，我在背景透明模式下打开该活动并延迟 2 秒，然后打开我的主屏幕。现在在这个概念中，问题是当我在主屏幕上按下后退按钮时，我会跳到那个动画，所以我必须再次按下。

现在我想添加我们在 facebook 应用程序中看到的动画。我希望首先出现一个图像视图，然后它会向上移动，然后应该出现 2 个带有溶解效果的文本视图。谁能告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:04:04.020

像这样为你的活动做一个框架布局

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     >
<ImageView
android:id="@+id/image"
    android:src="@drawable/andro"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    />
<LinearLayout>
//Other Component Activity
</LinearLayout>
</FrameLayout> 
```

然后在 Activity onCreate 方法中使用方法 setVisibility(View.INVISIBLE) 使其他组件不可见，并在 2 秒后使用方法 setVisibility(View.VISIBLE) 使您的代码组件可见并使您的 ImageView 不可见。这样，当您在没有动画的情况下按下后退按钮时，您将看到并且您将获得所需的内容。

# android - Android - 使用 NFC 打开设置活动

> ID：14297028
> 
> 赞同：0
> 
> 时间：2013-01-12T19:21:48.703
> 
> 标签：android, android-activity, nfc

我正在尝试构建一个会自动下载应用程序的应用程序。为此，我已经创建了一个 NFC 标签来打开一个 certail uel [http://example.com/myapp.apk](http://example.com/myapp.apk)。我现在的目标是打开应用程序设置（用户可以在其中检查未知来源的安装）。

到目前为止，我发现这样做的唯一方法是使用应用程序读取标签（例如 NFC 任务启动器），但我想在不需要任何其他应用程序的情况下执行此操作。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:00:07.840

> 这可能吗？

只需下载 Android 源代码，在 Setting 的应用程序清单中添加一些条目以允许外人通过 NFC 侵入应用程序，并将结果编译成 ROM 模块。

只有选择响应 NFC 标签的应用程序才能被 NFC 标签直接打开。

# php - 立即在浏览器上显示结果，无需等待 PHP 代码完全执行

> ID：14297032
> 
> 赞同：1
> 
> 时间：2013-01-12T19:22:22.063
> 
> 标签：php

我编写了一个连接到我的 sqlite3 数据库（使用 PDO）并检索一些数据的 php 代码。输出结果很大，因此我的 php 代码需要 5 或 6 分钟才能完成执行并查看结果。

php代码运行时是否可以在浏览器上显示一些结果。我不想等待整个 php 脚本完全执行。我是网络编程新手，我正在使用 XAMPP。

# mongodb - 在 MongoDB 中查询两个索引（非复合）字段时会发生什么

> ID：14297033
> 
> 赞同：0
> 
> 时间：2013-01-12T19:22:26.360
> 
> 标签：mongodb, mongodb-query

当您查询两个字段时会发生什么，因为它们不是复合索引的一部分，例如：

```
db.collection.ensureIndex( { a: 1 } )
db.collection.ensureIndex( { b: 1 } )

db.collection.find( { a: 2, b: 2 } ) 
```

我想知道是否可能会扫描许多文档，或者 Mongo DB 是否不会扫描任何内容并且`explain()`会返回：

```
indexOnly: YES 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:42:52.760

`indexOnly`只有当您要查找的所有值都在索引中（包括排序）时，解释才会返回。基本上它表示一个覆盖索引：[http ://docs.mongodb.org/manual/applications/indexes/#create-indexes-that-support-covered-queries](http://docs.mongodb.org/manual/applications/indexes/#create-indexes-that-support-covered-queries)

在这种情况下，您通过两个字段进行查询，但其中只有一个在一个单独的索引中。

考虑到 MongoDB 不能对单个子句使用多个索引（`$or`这是一个例外，因为它是多子句，它也与普通查询不同）它不会执行`indexOnly`查询，而是会通过索引搜索集合`a`然后执行对包含`b`在该范围内的文档进行完整文档扫描，以了解其值并返回结果。

还要注意，要`indexOnly`正确使用游标，您应该使查询的以下部分适合单个索引：

*   健康）状况
*   投影
*   种类

IE：

```
db.ensureIndex({a:1,b:1});
db.col.find({a:1}, {_id:0,a:1,b:1}).sort({b:1}); 
```

会使用`indexOnly`游标。

# ruby-on-rails - 使用 Ransack 搜索 - 尽管位于实例变量中，但记录未呈现

> ID：14297035
> 
> 赞同：0
> 
> 时间：2013-01-12T19:22:45.497
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, railstutorial.org, ransack

我正在尝试在 Rails 应用程序的用户索引页面上放置一个搜索工具（类似于 Michael Hartl 的 Rails 教程中的那个），并且正在使用 Ransack gem 进行搜索。这只是对用户名的简单搜索，我已实现如下：

用户控制器：

```
def index
  @title = "All Users"
  @search = User.search(params[:q])
  @users = @search.result.paginate(page: params[:page])
end 
```

索引视图：

```
<%= search_form_for @search do |f| %>
    <%= f.text_field :name_cont, id: :search_box %>
    <%= f.submit "Search" %>
<% end %> 
```

问题是这样的：当我进入索引页面并搜索实际出现在那里的用户时，他们可能不会出现。例如，Linnie Bahringer 夫人出现在原始列表中，但在我搜索“lin”时没有出现在搜索结果中。

[我想在这里显示图片，但我需要五个声望点。]

自然地，我认为 Ransack 不知何故搞砸了查询。但是，当我将 @users 变量输出到页面时，通过放置

```
<%= @users.each do %>
<% end %> 
```

在视图中，“失踪”用户在名称列表中，你瞧，出现在结果列表中！

有谁知道为什么会发生这种情况，以及如何在不将@users 变量的内容打印到屏幕上的情况下获得“正确”的结果集？我曾尝试将 '=' 符号从`@users.each do`行中删除，但行为又回到了上述问题中提到的行为。

非常感谢您提供的任何帮助！

PS我可能应该显示我的整个视图文件以防万一它可能有用：

```
<% provide :title, 'All Users' %>
<h1>All Users</h1>

<div class="span3 offset9   btn-group">
<%= search_form_for @search do |f| %>
    <%= f.text_field :name_cont, id: :search_box %>
    <%= f.submit "Search" %>
<% end %>
</div>

<%= will_paginate %>

<!-- This bit is only in to show the value of @users -->
<%= @users.each do %>
<% end %>
<!-- Extra bit ends. -->

<ul class="users">
<%= render @users %>
</ul>

<%= will_paginate %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:28:50.550

嗯，我觉得有点笨拙。在解决另一个问题一段时间后，我突然想到可能只是显示的信息有误。果然，当我检查 HTML 源代码（我很惊讶我在发布问题之前忘记做这件事）时，“失踪”的用户就在其中。

我通过在列表上方的 div 中放置一个不间断空格（几乎是该`@users.each do`位所在的位置）然后设置该 div 的 CSS 以`clear: both;`在其中包含一个来解决这个问题。

这是我的更新视图：

```
<% provide :title, 'All Users' %>
<h1>All Users</h1>

<div class="span3 offset9   btn-group">
<%= search_form_for @search do |f| %>
    <%= f.text_field :name_cont, id: :search_box %>
    <%= f.submit "Search" %>
<% end %>
</div>

<div id="clear-space">
&nbsp;
</div>

<div id="all_users_list">
<%= will_paginate %>
<ul class="users">
    <%= render @users %>
</ul>
<%= will_paginate %>
</div> 
```

正如我所说，这是一个愚蠢的错误，但我们每天至少一次都是笨蛋！

# c#-4.0 - 在 Bing 地图 (WinRT) 上显示位置

> ID：14297037
> 
> 赞同：0
> 
> 时间：2013-01-12T19:22:51.127
> 
> 标签：c#-4.0, winrt-xaml, bing-maps

我想在 WinRT 应用程序的 bing 地图上显示一个位置。但我只有名称作为有关位置的信息。例如，我想显示“纽约”的地图。是否可以仅使用名称信息显示地图？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:19:06.007

您是否尝试过使用[Bing 位置 API](http://msdn.microsoft.com/en-us/library/ff701715.aspx)？

# c# - 使用实体框架复制对象数据和更新数据库

> ID：14297039
> 
> 赞同：1
> 
> 时间：2013-01-12T19:23:30.517
> 
> 标签：c#, asp.net, entity-framework-4

我有两个相同的“监视器”类型的对象，它们代表将写入数据库的数据。第一个对象 X 有我想在数据库中更新的数据。对象 Y 是使用实体框架从数据库中读取的对象。

我想将对象 X 的所有数据（ID 除外）复制到对象 Y。我想这样做的原因是我已经填充了对象 X，但我不想开始复制每个属性值一。所以简而言之，我想将对象 X 中的数据（ID 除外）合并到对象 Y，其中对象 Y 是附加到上下文的对象。然后当我运行 Savechanged() 时，对象 Y 将使用新数据进行更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T19:41:02.983

你需要的是这样的：

首先`Attach`，分离对象 X 将`DataContext`其状态更改为`EntityState.Modified`，运行`SaveChanges`，它将根据您的更改更新数据库。

只需记住设置主键 AFAIU的`ID`of `Y`to即可。`ID``X`

有关更多信息，请查看[http://msdn.microsoft.com/en-US/data/jj592676](http://msdn.microsoft.com/en-US/data/jj592676)

# ruby-on-rails - Omniauth facebook弹出回调哈希为空？

> ID：14297041
> 
> 赞同：1
> 
> 时间：2013-01-12T19:23:45.260
> 
> 标签：ruby-on-rails, facebook, devise, ruby-on-rails-3.2, omniauth

我用设计实现了omniauth-facebook，一切都很完美。但是，当我实现一些咖啡脚本（来自 Railscasts #360）时，我无法让回调工作。正如我所看到的，它回调控制器。但是那个哈希验证。是空的。

任何想法我做错了什么？那你很。

应用程序.html.haml

```
....
-if user_signed_in?
          Logged in as
          = current_user.email
          =link_to 'Edit profile', edit_user_registration_path
          |
          =link_to "Logout", destroy_user_session_path, method: :delete
        -else
          =link_to "Sign up", new_user_registration_path
          |
          =link_to 'Log in', new_user_session_path
          |
          = link_to "Log in with Facebook", user_omniauth_authorize_path(:facebook), id: "sign_in" 
.... 
```

facebook.js.coffee.erb

```
jQuery ->
  $('body').prepend('<div id="fb-root"></div>')

  $.ajax
    url: "#{window.location.protocol}//connect.facebook.net/en_US/all.js"
    dataType: 'script'
    cache: true

window.fbAsyncInit = ->
  FB.init(appId: '<%= ENV["FACEBOOK_APP_ID"] %>', cookie: true)

  $('#sign_in').click (e) ->
    e.preventDefault()
    FB.login (response) ->
      window.location = '/auth/facebook/callback' if response.authResponse

  $('#sign_out').click (e) ->
    FB.getLoginStatus (response) ->
      FB.logout() if response.authResponse
    true 
```

路线.rb

```
Hikultura::Application.routes.draw do
  devise_for :users, path_names: {sign_in: "login", sign_out: "logout"},
    :controllers => { :omniauth_callbacks => "users/omniauth_callbacks", :registrations => "registrations" }

  resources :events

  devise_scope :user do match 'auth/facebook/callback', to: 'users/omniauth_callbacks#facebook'
  end

  root :to => 'events#index' 
```

用户/omniauth_callbacks_controller.rb

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def facebook
    # You need to implement the method below in your model (e.g. app/models/user.rb)

    @user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user)

    if @user.persisted?
      sign_in_and_redirect @user, :event => :authentication #this will throw if @user is not activated
      set_flash_message(:notice, :success, :kind => "Facebook") if is_navigational_format?
    else
      session["devise.facebook_data"] = request.env["omniauth.auth"]
      redirect_to new_user_registration_url
    end
  end
end 
```

用户.rb

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable,
  # , :timeoutable and 
  devise :database_authenticatable, :registerable, :lockable,
         :recoverable, :rememberable, :validatable, :confirmable, :omniauthable

  attr_accessor :current_password

  # Setup accessible (or protected) attributes for your model
  attr_accessible :current_password, :email, :password, :password_confirmation, :remember_me, :provider, 
    :uid, :name, :gender, :town

  def self.find_for_facebook_oauth(auth, signed_in_resource=nil)
    user = User.where(:provider => auth.provider, :uid => auth.uid).first || User.where(:email => auth.info.email).first

    unless user
      user = User.create(name:auth.extra.raw_info.name,
                           provider:auth.provider,
                           uid:auth.uid,
                           email:auth.info.email,
                           gender:auth.extra.raw_info.gender,
                           town:auth.extra.raw_info.location,
                           password:Devise.friendly_token[0,20]
                           )
      user.skip_confirmation!
    end
    user
  end

  def self.new_with_session(params, session)
    super.tap do |user|
      if data = session["devise.facebook_data"] && session["devise.facebook_data"]["extra"]["raw_info"]
        user.email = data["email"] if user.email.blank?
      end
    end
  end

end 
```

控制台服务器日志

> NoMethodError（未定义的方法find_for_facebook_oauth' app/controllers/users/omniauth_callbacks_controller.rb:5:in `facebook'`provider' for nil:NilClass):
> app/models/user.rb:32:in`

# excel - VBA Excel：复制具有起始位置和目标位置的列

> ID：14297048
> 
> 赞同：2
> 
> 时间：2013-01-12T19:24:11.723
> 
> 标签：excel, vba, copy, range

我想将列的值从一个工作表复制到另一个已经有行的工作表。

我想将工作表“源”中的 A 列中的值添加到工作表“dest”中的 X 列。但是我想跳过源列的前 2 行，并且应该在第 2000 行之后插入值。

例如像这样：

```
Workbook.Sheets("source").Columns("A3:A").Copy Destination:=nDestSheet.Range("X2001") 
```

但是 VBA 告诉我类型不匹配。我想我只是在语法方面做错了。

有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T19:59:56.617

`.Columns`接受列号或字母，而不是范围。这并不重要，因为“A3:A”无论如何都不是有效范围。

你可能想要

```
With Workbook.Sheets("source")
  .Range(.Range("A3"), .Columns("A").Cells(.UsedRange.Rows(.UsedRange.Rows.Count).Row)).Copy Destination:=nDestSheet.Range("X2001")
End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:25:29.717

一个简单的怎么样：

```
Workbook.Sheets("source").Columns("A").Copy Destination:=nDestSheet.Range("X2001") 
```

# multiple-columns - 从数据库中提取信息并将其显示在列中的正确方法是什么？

> ID：14297049
> 
> 赞同：0
> 
> 时间：2013-01-12T19:24:18.397
> 
> 标签：multiple-columns

我在 WordPress 环境中，需要从数据库中提取帖子并根据所需的布局显示它。如果数据是静态的，这将非常简单，但不是，所以我不确定与浏览器兼容的最佳方式是什么。

所以数据被拉取，需要从左到右，从上到下显示3列，并且知道何时需要增加高度。

这是我要实现的目标的图像。[http://postimage.org/image/nsyq7rsgh/](http://postimage.org/image/nsyq7rsgh/)

如您所见，数据从第一列开始，从上到下，当空间用完时，它转到下一列，依此类推。但这里的转折是，当最后一列的空间用完时，它需要知道跳回第一列并重复。那么动态内容怎么可能呢？

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:51:28.273

在搜索了一段时间的答案后，我在这里遇到了这个插件-> [http://welcome.totheinter.net/columnizer-jquery-plugin/](http://welcome.totheinter.net/columnizer-jquery-plugin/)

它解决了我对与浏览器兼容的页面进行分栏的问题。

# javascript - 创建了多个侦听器，但只有最后一个响应

> ID：14297051
> 
> 赞同：0
> 
> 时间：2013-01-12T19:24:29.647
> 
> 标签：javascript, javascript-events

我在一堆动态生成的 LI 元素上创建多个点击事件。但是当我点击其中任何一个时，只会发送最后一个 li 的事件。

这有点难以解释，但这里有一个小提琴可以让事情更清楚：

[http://jsfiddle.net/5uecp/2/](http://jsfiddle.net/5uecp/2/)

...和代码：

```
// Parent Class
function Parent(id, children) {
  this.id = id;
  this.children = children;
  this.init();
}

Parent.prototype = {

  init: function () {
    this.addEventHanlders()
  },

  addEventHanlders: function () {

    addEventListener('childEvent', function (e) {
      e.stopPropagation()
      // console.log('childEvent', e.title)
    });

  },

  render: function () {

    var ul = document.createElement('ul');
    ul.setAttribute('id', this.id)

    for (var i = this.children.length - 1; i >= 0; i--) {
      ul.appendChild(this.children[i].render());
    };

    document.body.appendChild(ul);
  }
}

// Child Class
function Child(title) {
  this.title = title;
  this.li = null
  this.event = document.createEvent("Event");

};

Child.prototype = {

  render: function () {
    _this = this;
    this.li = document.createElement('li');
    text = document.createTextNode(this.title);
    a = document.createElement('a');
    a.setAttribute('href', '#');
    a.appendChild(text);
    this.li.appendChild(a);
    this.li.setAttribute('class', 'child');

    this.li.addEventListener('click', this.clickEventHandler, true);

    return this.li;
  },

  clickEventHandler: function (e) {
    e.preventDefault();
    _this.changeColor();
    _this.fireEvent();
    e.target.removeEventListener('click', this.clickEventHandler)
  },

  changeColor: function (color) {
    color = color || 'red';
    this.li.style.backgroundColor = color;

  },

  fireEvent: function () {
    console.log('fireEvent', this.title);
    this.event.initEvent("childEvent", true, true);
    this.event.title = this.title;
    document.dispatchEvent(this.event);
  }
};

// Initialize
children = [new Child("Child 1"), new Child("Child 2"), new Child("Child 3"), new Child("Child 4"), new Child("Child 5")]
parent = new Parent("parent", children)

$(function () {
  parent.render();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:53:26.377

问题是您正在保存`this`到全局变量`_this`中，该变量可以从任何地方访问。结果，您获得了指向最后一个`Child`实例的链接`_this`。

看我的例子：http: [//jsfiddle.net/5uecp/4/](http://jsfiddle.net/5uecp/4/)

# android - 三个 Android 应用程序需要使用公共库。如何仅使用内部存储在它们之间共享？

> ID：14297052
> 
> 赞同：0
> 
> 时间：2013-01-12T19:24:35.310
> 
> 标签：android

例如，假设 Google Play 中有三个应用程序，分别名为 A、B 和 C。

如果我安装 C，并且 C 需要一个名为 的文件`lib.so`，那么 C 会将文件从给定位置下载到内部存储并使用它。

现在，我安装了 A 和 B，它们还需要`lib.so`.

A 和 B 如何仅使用内部存储共享 C 已有的文件？

另外，如果我先安装 B，那么如果我接下来安装 A 和 C，我希望它是相同的。

我知道可以在外部存储上执行此操作，但它可以由用户删除，但最重要的是有些设备没有外部存储。

有没有办法在内部存储上制作一个可以在应用程序之间共享的假外部存储？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:57:22.923

> A 和 B 如何仅使用内部存储共享 C 已有的文件？

这不是一个好主意，即使它是可能的。

如果您坚持，您可以尝试从另一个应用程序的内部存储中播放`android:sharedUserId`和加载`.so`文件，但这会导致脆弱性，并且如果您的任何应用程序已经在 Play 商店中，则将无法正常工作（因为您无法在`android:sharedUserId`不破坏所有当前安装的情况下进行更改）。

> 我知道可以在外部存储上执行此操作

只有白痴。`.so`任何人都可以用另一个包含恶意软件的人替换你的。

# asp.net - 如何将列表内容显示为连接字符串

> ID：14297065
> 
> 赞同：2
> 
> 时间：2013-01-12T19:25:58.607
> 
> 标签：asp.net

我有一个 FormView，它有一个作为 WCF 服务对象的数据源绑定。在 WCF 服务中，我有一个 Object PublicationDetail，它有一个属性 List authors；

我想加入列表的内容并在表单视图中打印出来但是我遇到了以下错误：

> 无法将“System.String[]”类型的对象转换为“System.Collections.Generic.List`1[System.String]”类型。

和代码：

```
<asp:Label ID="AuthorsLabel" runat="server" Text='<%# String.Join( ",", ((List<string>)Eval("Authors")).ToArray()) %>' /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T00:32:47.340

只需使用

```
String.Join( ",", ((string[])Eval("Authors"))) 
```

WCF 在消息中序列化`List<T>`，`T[]`因此您的绑定属性是一个数组。

请参阅[为什么 WCF 像我期望的那样返回 myObject[] 而不是 List<T>？](https://stackoverflow.com/questions/493376/why-does-wcf-return-myobject-instead-of-listt-like-i-was-expecting)

# javascript - JavaScript - 已选择选项的 HTML 选择元素 onchange 触发器

> ID：14297070
> 
> 赞同：0
> 
> 时间：2013-01-12T19:26:38.703
> 
> 标签：javascript, jquery, html

**目标：** 每当有人从下拉列表中选择选项时加载 href 值 -**即使该选项已被选中**。

**问题：** 虽然下面的代码可以工作，但是当某些选项已经被选中（单击）时它不起作用。例如，假设我点击了“按价格”选项。将加载新页面（很好），默认选择“按价格”选项，现在它位于“按名称”选项上方的列表顶部。

现在我想再次选择“按价格”选项**，现在加载页面将无法正常工作**。

**HTML：**

```
<select name="" class="inputbox" size="1" onchange="window.top.location.href=this.options[this.selectedIndex].value">
    <option value="/index.php/by,product_name">By name</option>
    <option value="/index.php/by,mf_name">By MF</option>
    <option value="/index.php/by,product_price">By price</option>
    <option value="/index.php/by,product_special">By type</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:46:59.267

You shouldn't make such a workflow, not only because its hard to maintain for all browsers, its hard for keyboard-accessibility (WCAG), so if you are binding it to "onchange" you are not bothering of keyboard-users pressing up and down when that thing has focus.

what if you bind it when loosing the focus (onblur)?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T19:58:28.727

*   将方法绑定到保存选择和删除选择的 onfocus
*   那么 onchange 总是会被触发。在那里你可以做任何你想做的事（即使使用原始保存的选择）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T19:43:16.360

在您的选择框中添加一个空选项。如果要选择已选择的内容，请先选择此空白选项，然后再选择您想要的选项。这样它就会起作用。

```
<select name="" class="inputbox" size="1" onchange="if(this.options[this.selectedIndex].value) window.top.location.href=this.options[this.selectedIndex].value">
    <option value="">---</option>
    <option value="/index.php/by,product_name">By name</option>
    <option value="/index.php/by,mf_name">By MF</option>
    <option value="/index.php/by,product_price">By price</option>
    <option value="/index.php/by,product_special">By type</option>
</select> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T19:43:23.100

```
$('select').blur(function(){
    window.location = $('option:selected', this).val();
}); 
```

模糊将始终以您想要的方式捕获。

[工作的jsFiddle ...](http://jsfiddle.net/NCS8z/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T20:06:33.660

由于您无论如何都在加载新页面，请重置所选索引

```
onchange="var val=this.options[this.selectedIndex].value;
this.selectedIndex=0;
window.top.location.href=val"> 
```

# c# - 如何使用 Dataset 在 wpf 中插入我的 sql 表

> ID：14297072
> 
> 赞同：0
> 
> 时间：2013-01-12T19:26:46.283
> 
> 标签：c#, wpf, datagrid, dataset, sdf

我想知道通过 WPF 应用程序窗口将一行插入我的 sql 表的最佳方法是什么。我的应用程序中有两个 wpf `DataGrid`，我希望用户能够按下按钮并将数据从那里插入网格（将数据插入 sql 表并在用户关闭弹出窗口后刷新网格插入）。我正在使用`DataSet`数据库模型并在我的应用程序中运行 .sdf 数据库。

我正在使用 a`TableAdapter`来填充我的`DataGrid`：

```
 HomeApplication.TheHomeApplicationDBDataSet theHomeApplicationDBDataSet;
    HomeApplication.TheHomeApplicationDBDataSetTableAdapters.AccountingTableAdapter  homeApplicationDataSetAccountingTableAdapter; 
```

做这个的最好方式是什么？任何想法都会有所帮助。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:55:31.060

WPF 不能帮助您进行数据访问。所以你可以做这样的事情`northwindDataSet1.Customers.Rows.Add(newCustomersRow);`

# java - JD-Eclipse (0.1.3) 不会安装在面向 Java 开发人员的 Eclipse IDE 上

> ID：14297073
> 
> 赞同：0
> 
> 时间：2013-01-12T19:26:52.353
> 
> 标签：java, eclipse, eclipse-plugin

当我尝试在 Eclipse IDE for Java Developers 中使用“安装新软件...”选项时，我在安装开始时收到错误消息。详情说：

```
An error occurred while collecting items to be installed
session context was:(profile=epp.package.java, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
Artifact not found: http://java.decompiler.free.fr/jd-eclipse/update/plugins/jd.ide.eclipse_0.1.3.jar.
http://java.decompiler.free.fr/jd-eclipse/update/plugins/jd.ide.eclipse_0.1.3.jar
Artifact not found: http://java.decompiler.free.fr/jd-eclipse/update/plugins/jd.ide.eclipse.win32.x86_64_0.1.3.jar.
http://java.decompiler.free.fr/jd-eclipse/update/plugins/jd.ide.eclipse.win32.x86_64_0.1.3.jar 
```

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:36:43.460

更新站点可能已死。使用镜像站点手动下载：http: [//jd.benow.ca/jd-eclipse/downloads/jdeclipse_update_site.zip](http://jd.benow.ca/jd-eclipse/downloads/jdeclipse_update_site.zip)

解压缩，然后使用“本地”选项安装插件。

# c# - 使用 GZipStream 压缩

> ID：14297077
> 
> 赞同：13
> 
> 时间：2013-01-12T19:27:08.153
> 
> 标签：c#, .net

我试图理解为什么我的代码没有按预期执行。它创建一个 GZipStream，然后将对象作为压缩文件保存在我的硬盘上，但保存的文件始终为 0 字节。

现在我知道如何[使用 GZipStream 保存文件](http://www.dotnetperls.com/gzipstream)，但是，我的问题不是如何去做。我的问题纯粹是为什么这段代码会保存 0 个字节（或者为什么 FileStream 有效而内存无效）。

```
private void BegingCompression()
{
    var bytes = File.ReadAllBytes(this.fileName);
    using (MemoryStream ms = new MemoryStream(bytes))
    {
        ms.ReadByte();
        using (FileStream fs =new FileStream(this.newFileName, FileMode.CreateNew))
        using (GZipStream zipStream = new GZipStream(ms, CompressionMode.Compress, false))
        {
            zipStream.Write(bytes, 0, bytes.Length);
        }
    }
} 
```

关于源代码，`this.fileName = c:\Audio.wav`并且`newFileName`是`c:\Audio.wav.gz`（但也尝试过`c:\audio.gz`）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-12T19:40:22.887

*   您不需要 MemoryStream，因为`bytes`已经有要压缩的数据。
*   `ms.ReadByte()`不应该使用。
*   创建`zipStream`输出文件时应使用流。

试试这个：

```
var bytes = File.ReadAllBytes(this.fileName);
using (FileStream fs =new FileStream(this.newFileName, FileMode.CreateNew))
using (GZipStream zipStream = new GZipStream(fs, CompressionMode.Compress, false))
{
     zipStream.Write(bytes, 0, bytes.Length);
} 
```

**编辑**

原始代码创建一个零长度文件，因为您不写入文件流。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-12T20:40:16.503

当您使用`GzipStream`或`DeflateStream`来自`System.IO.Compression`命名空间时，`Stream`您在*构造函数*中提供的将被**写入以**进行**压缩**并**从****decompression**中读取。

由于您尝试在此处*压缩*数据，因此使用`MemoryStream`是不正确的，因为您没有尝试对其进行压缩，而是将其用作数据源。因此，您`MemoryStream`应该是输入`Stream`，而应该`FileStream`是您的输出。

我强烈建议您使用`MemoryStream`作为原始数据源的数据源，`byte[]`因为`Stream`它具有更多的多功能性和应用程序（`FileStream`, `NetworkStream`,`CryptoStream`等）

以下是一些使用`async`/`await`模式的示例：

```
public static async Task CompressToFileAsync(byte[] buffer, 
                                             string outputFile)
{
  using (var inputStream = new MemoryStream(buffer))
    await CompressToFileAsync(inputStream, outputFile);
}

public static async Task CompressToFileAsync(Stream inputStream, 
                                             string outputFile)
{
  using (var outputStream = File.Create(outputFile))
  using (var gzip = new GZipStream(outputStream, CompressionMode.Compress))
  {
    await inputStream.CopyToAsync(gzip);
    gzip.Close();
  }
}

public static async Task<MemoryStream> DecompressFromFileAsync(string inputFile)
{
  var outputStream = new MemoryStream();

  using (var inputStream = File.Open(inputFile, FileMode.Open, FileAccess.Read, FileShare.Read))
  using (var gzip = new GZipStream(inputStream, CompressionMode.Decompress))
  {
    await gzip.CopyToAsync(outputStream);

    gzip.Close();
    inputStream.Close();

    // After writing to the MemoryStream, the position will be the size
    // of the decompressed file, we should reset it back to zero before returning.
    outputStream.Position = 0;
    return outputStream;
  }
} 
```

**注意：**始终在关闭*输入*或*输出*`GzipStream.Close()`之前调用。它在关闭/处置时会进行一些最终的缓冲区刷新，如果*输入*或*输出*首先关闭，它会在尝试这样做时抛出异常。（这也适用于） **`Stream`**`DeflateStream`****

 **** * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-05-04T15:23:07.617

我使用这个类进行压缩/解压缩：

```
internal class GZipProcessor : IZipProcessor
{

    public byte[] Compress(byte[] data)
    {
        using (var compressedStream = new MemoryStream())
        {
            using (var zipStream = new GZipStream(compressedStream, CompressionMode.Compress))
            {
                zipStream.Write(data, 0, data.Length);
                zipStream.Close();
                return compressedStream.ToArray();
            }
        }
    }

    public byte[] Decompress(byte[] data)
    {
        using (var compressedStream = new MemoryStream(data))
        {
            using (var zipStream = new GZipStream(compressedStream, CompressionMode.Decompress))
            {
                using (var resultStream = new MemoryStream())
                {
                    zipStream.CopyTo(resultStream);
                    return resultStream.ToArray();
                }
            }
        }
    }

} 
```

以及我如何使用它：

```
public void Compress(string inputPath, string outputPath)
{
    byte[] originalBytes = File.ReadAllBytes(inputPath);
    byte[] zippedBytes = base.ZipProcessor.Compress(originalBytes);
    File.WriteAllBytes(outputPath, zippedBytes);
}

public void Decompress(string inputPath, string outputPath)
{
    byte[] zippedBytes = File.ReadAllBytes(inputPath);
    byte[] originalBytes = base.ZipProcessor.Decompress(zippedBytes);
    File.WriteAllBytes(outputPath, originalBytes);
} 
```

我也有一个[github 存储库](https://github.com/isxaker/)，其中包含更复杂的代码

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-12T19:38:45.103

```
why FileStream works and memory doesn't 
```

因为 MemoryStream 的后备存储是您的 RAM 内存，而不是硬盘驱动器。因此，当您将`MemoryStream`对象传递给`GZipStream`构造函数时，您的 gzip 将只是在 RAM 中。

使用此代码：

```
using (FileStream fs =new FileStream(this.newFileName, FileMode.CreateNew)) 
```

您正在创建新的 FileStream，但您没有使用它。要使用此 FIleStream 存储 gzip，您需要将其传递给`GZipStream`构造函数，以使其后备存储成为硬盘驱动器。***

# clojure - 为什么 Clojure 堆栈跟踪这么长？

> ID：14297079
> 
> 赞同：33
> 
> 时间：2013-01-12T19:27:31.790
> 
> 标签：clojure

我过去写过一些玩具解释器/编译器，因此我将引用编译器源文件中的行的堆栈跟踪与编译器错误相关联。

如果我将以下错误函数定义添加到我的 compojure 项目中：

```
(defn dodgy-map []
  {:1 :2 :3}) 
```

Lein 拒绝开始：

```
$ lein ring server-headless
Exception in thread "main" java.lang.RuntimeException: Map literal must contain an even number of forms, compiling:(one_man_wiki/views.clj:19)
        at clojure.lang.Compiler.load(Compiler.java:6958)
        at clojure.lang.RT.loadResourceScript(RT.java:359)
        at clojure.lang.RT.loadResourceScript(RT.java:350)
        at clojure.lang.RT.load(RT.java:429)
        at clojure.lang.RT.load(RT.java:400)
        at clojure.core$load$fn__4890.invoke(core.clj:5415)
        at clojure.core$load.doInvoke(core.clj:5414)
        at clojure.lang.RestFn.invoke(RestFn.java:408)
        at clojure.core$load_one.invoke(core.clj:5227)
        at clojure.core$load_lib.doInvoke(core.clj:5264)
        at clojure.lang.RestFn.applyTo(RestFn.java:142)
        at clojure.core$apply.invoke(core.clj:603)
        at clojure.core$load_libs.doInvoke(core.clj:5298)
        at clojure.lang.RestFn.applyTo(RestFn.java:137)
        at clojure.core$apply.invoke(core.clj:603)
        at clojure.core$require.doInvoke(core.clj:5381)
        at clojure.lang.RestFn.invoke(RestFn.java:457)
        at one_man_wiki.handler$eval1564$loading__4784__auto____1565.invoke(handler.clj:1)
        at one_man_wiki.handler$eval1564.invoke(handler.clj:1)
        at clojure.lang.Compiler.eval(Compiler.java:6511)
        at clojure.lang.Compiler.eval(Compiler.java:6501)
        at clojure.lang.Compiler.load(Compiler.java:6952)
        at clojure.lang.RT.loadResourceScript(RT.java:359)
        at clojure.lang.RT.loadResourceScript(RT.java:350)
        at clojure.lang.RT.load(RT.java:429)
        at clojure.lang.RT.load(RT.java:400)
        at clojure.core$load$fn__4890.invoke(core.clj:5415)
        at clojure.core$load.doInvoke(core.clj:5414)
        at clojure.lang.RestFn.invoke(RestFn.java:408)
        at clojure.core$load_one.invoke(core.clj:5227)
        at clojure.core$load_lib.doInvoke(core.clj:5264)
        at clojure.lang.RestFn.applyTo(RestFn.java:142)
        at clojure.core$apply.invoke(core.clj:603)
        at clojure.core$load_libs.doInvoke(core.clj:5298)
        at clojure.lang.RestFn.applyTo(RestFn.java:137)
        at clojure.core$apply.invoke(core.clj:603)
        at clojure.core$require.doInvoke(core.clj:5381)
        at clojure.lang.RestFn.invoke(RestFn.java:421)
        at user$eval1.invoke(NO_SOURCE_FILE:1)
        at clojure.lang.Compiler.eval(Compiler.java:6511)
        at clojure.lang.Compiler.eval(Compiler.java:6500)
        at clojure.lang.Compiler.eval(Compiler.java:6477)
        at clojure.core$eval.invoke(core.clj:2797)
        at clojure.main$eval_opt.invoke(main.clj:297)
        at clojure.main$initialize.invoke(main.clj:316)
        at clojure.main$null_opt.invoke(main.clj:349)
        at clojure.main$main.doInvoke(main.clj:427)
        at clojure.lang.RestFn.invoke(RestFn.java:421)
        at clojure.lang.Var.invoke(Var.java:419)
        at clojure.lang.AFn.applyToHelper(AFn.java:163)
        at clojure.lang.Var.applyTo(Var.java:532)
        at clojure.main.main(main.java:37)
Caused by: java.lang.RuntimeException: Map literal must contain an even number of forms
        at clojure.lang.Util.runtimeException(Util.java:170)
        at clojure.lang.LispReader$MapReader.invoke(LispReader.java:1071)
        at clojure.lang.LispReader.readDelimitedList(LispReader.java:1126)
        at clojure.lang.LispReader$ListReader.invoke(LispReader.java:962)
        at clojure.lang.LispReader.read(LispReader.java:180)
        at clojure.lang.Compiler.load(Compiler.java:6949)
        ... 51 more 
```

如果我引用一个不存在的变量：

```
(defn no-such-variable []
  i-dont-exist) 
```

我得到了同样巨大的回溯：

```
Exception in thread "main" java.lang.RuntimeException: Unable to resolve symbol: i-dont-exist in this context, compiling:(one_man_wiki/views.clj:18)
        at clojure.lang.Compiler.analyze(Compiler.java:6281)
        at clojure.lang.Compiler.analyze(Compiler.java:6223)
        at clojure.lang.Compiler$BodyExpr$Parser.parse(Compiler.java:5618)
        at clojure.lang.Compiler$FnMethod.parse(Compiler.java:5054)
        at clojure.lang.Compiler$FnExpr.parse(Compiler.java:3674)
        at clojure.lang.Compiler.analyzeSeq(Compiler.java:6453)
        at clojure.lang.Compiler.analyze(Compiler.java:6262)
        at clojure.lang.Compiler.analyzeSeq(Compiler.java:6443)
        at clojure.lang.Compiler.analyze(Compiler.java:6262)
        at clojure.lang.Compiler.access$100(Compiler.java:37)
        at clojure.lang.Compiler$DefExpr$Parser.parse(Compiler.java:518)
        at clojure.lang.Compiler.analyzeSeq(Compiler.java:6455)
        at clojure.lang.Compiler.analyze(Compiler.java:6262)
        at clojure.lang.Compiler.analyze(Compiler.java:6223)
        at clojure.lang.Compiler.eval(Compiler.java:6515)
        at clojure.lang.Compiler.load(Compiler.java:6952)
        at clojure.lang.RT.loadResourceScript(RT.java:359)
        at clojure.lang.RT.loadResourceScript(RT.java:350)
        at clojure.lang.RT.load(RT.java:429)
        at clojure.lang.RT.load(RT.java:400)
        at clojure.core$load$fn__4890.invoke(core.clj:5415)
        at clojure.core$load.doInvoke(core.clj:5414)
        at clojure.lang.RestFn.invoke(RestFn.java:408)
        at clojure.core$load_one.invoke(core.clj:5227)
        at clojure.core$load_lib.doInvoke(core.clj:5264)
        at clojure.lang.RestFn.applyTo(RestFn.java:142)
        at clojure.core$apply.invoke(core.clj:603)
        at clojure.core$load_libs.doInvoke(core.clj:5298)
        at clojure.lang.RestFn.applyTo(RestFn.java:137)
        at clojure.core$apply.invoke(core.clj:603)
        at clojure.core$require.doInvoke(core.clj:5381)
        at clojure.lang.RestFn.invoke(RestFn.java:457)
        at one_man_wiki.handler$eval1564$loading__4784__auto____1565.invoke(handler.clj:1)
        at one_man_wiki.handler$eval1564.invoke(handler.clj:1)
        at clojure.lang.Compiler.eval(Compiler.java:6511)
        at clojure.lang.Compiler.eval(Compiler.java:6501)
        at clojure.lang.Compiler.load(Compiler.java:6952)
        at clojure.lang.RT.loadResourceScript(RT.java:359)
        at clojure.lang.RT.loadResourceScript(RT.java:350)
        at clojure.lang.RT.load(RT.java:429)
        at clojure.lang.RT.load(RT.java:400)
        at clojure.core$load$fn__4890.invoke(core.clj:5415)
        at clojure.core$load.doInvoke(core.clj:5414)
        at clojure.lang.RestFn.invoke(RestFn.java:408)
        at clojure.core$load_one.invoke(core.clj:5227)
        at clojure.core$load_lib.doInvoke(core.clj:5264)
        at clojure.lang.RestFn.applyTo(RestFn.java:142)
        at clojure.core$apply.invoke(core.clj:603)
        at clojure.core$load_libs.doInvoke(core.clj:5298)
        at clojure.lang.RestFn.applyTo(RestFn.java:137)
        at clojure.core$apply.invoke(core.clj:603)
        at clojure.core$require.doInvoke(core.clj:5381)
        at clojure.lang.RestFn.invoke(RestFn.java:421)
        at user$eval1.invoke(NO_SOURCE_FILE:1)
        at clojure.lang.Compiler.eval(Compiler.java:6511)
        at clojure.lang.Compiler.eval(Compiler.java:6500)
        at clojure.lang.Compiler.eval(Compiler.java:6477)
        at clojure.core$eval.invoke(core.clj:2797)
        at clojure.main$eval_opt.invoke(main.clj:297)
        at clojure.main$initialize.invoke(main.clj:316)
        at clojure.main$null_opt.invoke(main.clj:349)
        at clojure.main$main.doInvoke(main.clj:427)
        at clojure.lang.RestFn.invoke(RestFn.java:421)
        at clojure.lang.Var.invoke(Var.java:419)
        at clojure.lang.AFn.applyToHelper(AFn.java:163)
        at clojure.lang.Var.applyTo(Var.java:532)
        at clojure.main.main(main.java:37)
Caused by: java.lang.RuntimeException: Unable to resolve symbol: i-dont-exist in this context
        at clojure.lang.Util.runtimeException(Util.java:170)
        at clojure.lang.Compiler.resolveIn(Compiler.java:6766)
        at clojure.lang.Compiler.resolve(Compiler.java:6710)
        at clojure.lang.Compiler.analyzeSymbol(Compiler.java:6671)
        at clojure.lang.Compiler.analyze(Compiler.java:6244)
        ... 66 more 
```

为什么 Clojure 编译器不引发可以在顶层捕获的a`ClojureSyntaxError`和 a并显示一个简单的错误？`ClojureNameError`这些是开发过程中常见的开发人员错误。

如果长回溯在某些情况下有用，为什么它们会被截断？

**编辑**：我在寻找答案：

1.  在获取引用 clojure.lang 的回溯时是否有用？
2.  （相关）是否有任何技术限制阻止添加`ClojureSyntaxError`如上所述的 a？值得我在 Clojure 错误跟踪器上打开一个问题吗？（更新：我已经[打开了 CLJ-1155](http://dev.clojure.org/jira/browse/CLJ-1155)）
3.  经验丰富的 Clojure 程序员如何阅读这些回溯？有什么工具可以帮忙吗？每个人都使用 clj-stacktrace 吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-12T22:24:55.947

回复您的编号点，

1.  在 Clojure 中，直接与 Java 库进行互操作是惯用的，因此如果您以某种意外或不受支持的方式调用 Java 对象，则获取完整的 Java 堆栈跟踪会很有帮助。

2.  听起来是一个好主意; 我经常至少希望有一个可设置的选项，它可以让我只看到源自我自己的代码的堆栈跟踪部分，抑制所有底层语言层。

3.  我通常只是以艰难的方式进行并仔细研究堆栈跟踪，以获取我的程序中的行，调出`clojure.*`部分（我通常测试每一分钟的更改，所以我很清楚是什么更改导致了问题）。我使用的一些 Emacs 和 Eclipse 工具只向您显示实际错误，而不是整个堆栈跟踪；我通常觉得这更有帮助。

    在 2012 年的 Clojure/west 上，@chouser 就堆栈跟踪的剖析做了[一场精彩的演讲](https://github.com/strangeloop/clojurewest2012-slides/blob/master/StackTraces-Longbottom-Chouser.pdf)[PDF]，解释了如何阅读它们，并介绍了一个看起来很有前途的工具，但显然还没有出现。

与 Python 相比，我觉得它的堆栈跟踪非常用户友好，我认为堆栈跟踪在 Clojure 中是一个粗糙的边缘，特别是对于初学者来说。这部分是由于该语言的“托管”性质，尽管我希望可以在不增加附带复杂性的情况下进行改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-10T08:09:49.660

Clojure 堆栈跟踪很嘈杂，这显然是一种抱怨。一些库提供了更好的堆栈跟踪，例如[clj-stacktrace](https://github.com/mmcgrana/clj-stacktrace)或[期望库](http://jayfields.com/expectations/#installing)。

但这也是 Clojure 本身也在改进的地方，例如[最近的 1.7 版本](https://github.com/clojure/clojure/blob/master/changes.md#27-printing-as-data)。另请参阅[clojure.stacktrace api](https://clojure.github.io/clojure/clojure.stacktrace-api.html)。

所以我打赌它只会随着时间的推移而变得更好。Clojure{Script} 生态系统中的事情现在非常令人兴奋。

# jquery - 来自 django 视图的 2 条消息

> ID：14297081
> 
> 赞同：-3
> 
> 时间：2013-01-12T19:27:36.167
> 
> 标签：jquery, ajax, django, view, message

我想从 django 视图返回两条消息。例如，在我创建了一些对象（消息：“对象已创建”）和创建相关对象之后（“相关对象已创建”）。我想在当前网页上显示这些消息。我想我需要使用 jQuery 和 Ajax 发布请求（Ajax 请求 + 视图返回，从请求中创建对象）并在请求完成后显示 div，您对此有何看法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-12T20:23:43.313

要通过 ajax 返回消息，请使用`alert`. 我会做这样的事情：

```
def view(request):
    if request.is_ajax():
        //whatever you need to do
    else:
        //regular POST request 
```

jQuery：

```
$(document).ready( function() {
$('div#ajax-div').click(function(){
  $.ajax({
  type: "POST",
  url:"/ajax-url/",
  success: function(data){alert('Object was created!');}
  error: function(){alert("Error");}
});
} 
```

模板：

```
<div id='ajax-div'>
  <a href='{% url ajax-url %}'>Click here for Message</a>
</div> 
```

网址：

```
url(r'^ajax-url/$', 'views.view', name='ajax_url'), 
```

# objective-c - Cocoa 模型视图控制器：在哪里进行计算

> ID：14297082
> 
> 赞同：1
> 
> 时间：2013-01-12T19:27:43.787
> 
> 标签：objective-c, model-view-controller

我正在开发一款软件，它接受用户输入，对其进行大量计算，然后根据计算结果显示数字和图表。我认为 MVC 方法尽可能好。以下是我的问题：

1.  我应该在哪里存储用户输入（将显示在表格视图中）？它应该存储在`ArrayController`控制器类中需要的还是模型（类）中的附加数组中？到目前为止我的理解是信息应该存储在模型中。

2.  我应该在哪里进行所有必要的计算，其输出用于视图中的图形？这些应该在模型中还是在视图控制器（类）中完成？

3.  在 nib 中为表视图设置单独的控制器类是否有意义？现在我通过`ArrayController`相应的窗口控制器（类）处理这些数据。

我问的是非常笼统的问题，因为我知道 MVC 方法独立于代码，但我在显示更具体的代码方面没有问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:38:58.677

> 我在哪里存储应该在表格视图中显示的用户输入。它应该存储在控制器类中所需的数组控制器中还是模型（类）中的附加数组中？到目前为止我的理解是信息应该存储在模型中。

控制器类应该读取它并将其存储在模型类中。视图和模型不直接相互交流。

> 在哪里进行所有必要的计算，这些计算为视图中的图形获取输出。应该在模型中还是在视图控制器（类）中完成？

在控制器中，绝对。

> 在 nib 中为表视图设置一个单独的控制器类是否有意义？现在我通过相应的窗口控制器（类）中的数组控制器处理这些数据。

是的，这是有道理的。你也可以使用表格视图控制器——你可以拥有尽可能多的控制器，只要你觉得有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T19:40:51.557

大多数 iOS 实现——包括我见过的大量教程——并不严格遵循 MVC 方法。换句话说，`UIViewController`子类（或`UITableViewController`子类）充当控制视图的对象（V）*和*控制器本身（C）。

从技术上讲，这些控制器是视图层。

您`UITableView`希望它的控制器成为数据源委托，这意味着它必须符合相关的数据源协议。实际上，视图控制器通常分配`self`为数据源委托（或 IB 分配文件的所有者，通常是视图控制器）。

要回答您的问题：

1.  我会说数据应该在模型中表示。为了支持表格，您可以使用一些`NSArray`或`NSDictionary`结构（带有索引路径）来引用模型中的对象或包含模型中的数据副本。如果您有一个专用控制器，那么它应该将模型的数据链接到视图的数据。

2.  所有与业务逻辑有关的计算都应该在控制器中完成。如果您决定遵循既定模式，即拥有一个同时满足这两个目的的视图控制器，那么这将是您进行计算的地方。直接影响外观的计算（颜色`x`和`y`绘图值，宽度和高度值等）应始终在视图控制器中完成。

3.  正如我之前所说，根据 MVC 模型使用（或滥用）视图控制器（窗口控制器是视图控制器）作为控制器是相当普遍的。我决定采用这种方法，以便我可以轻松地集成来自教程或 Stack Overflow 答案的代码片段。但最终，这取决于你。但是，仅当您拥有单视图应用程序时，*才*建议使用窗口控制器。一旦你开始使用导航视图控制器来推送视图、标签栏等，你应该（ab）使用相关的`UIViewController`子类，如果你没有使用专用的控制器对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T20:01:38.250

您可以将数据数组与计算代码一起放在一个类中：模型。然后视图控制器将读取用户输入并将其放置在此模型类中。这是一个很好的面向对象设计，将数据及其操作很好地结合在一起，同时完全没有与 UI 相关的代码。

如果计算不会花费太多时间，您可以在主线程中执行它们，以便您的视图控制器调用模型方法，该方法返回结果。或者，根据数据的形状，模型可能会通过其他方法和/或属性使结果可用。

如果计算可能需要更长时间，您应该考虑使用[GCD](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)在模型内的较低优先级线程上运行它们`dispatch_async()`。你不想阻止 UI 太久——我会说大约一秒钟是极限。在这种情况下，最好在模型的计算方法中添加一个就绪块，以便模型可以在计算就绪时通知视图控制器。不要忘记在主线程上运行这个块，以防止视图控制器中的 UIKit 操作被搞砸。（如果您需要我上面提到的任何内容的详细信息或代码，请告诉我，但其中大部分内容应该很容易在 Stack Overflow 或其他地方找到。）

最后，为您的 NIB 提供一个包含表视图的单一视图控制器是可行的方法。您通常会将 UI 功能（例如图形）放在`UIView`子视图中，而不是放在额外的`UIViewController`. 然后您可以将子视图放在您的 NIB 上（或以编程方式将其添加到视图控制器中）。

# asp.net - 使用空值提交的 html 表单

> ID：14297083
> 
> 赞同：0
> 
> 时间：2013-01-12T19:27:46.100
> 
> 标签：asp.net, forms, sharepoint-2010, httprequest

我在 asp.net 页面中有一个带有 Method attribute="post" 和 on Codebehinde 的小表单，我想访问这样的表单值： string val = Request.form["field"]; 但是当我放置断点并检查时，它返回空值。但我已将值放入输入文本框中并按下提交按钮。我不明白为什么它返回null。任何人都可以解释什么是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:49:28.657

You are are using `runat="server"` on the textbox so the name of it in the Form collection will be probably be something like "ctl00_srchtxtx".

Make the `<input>` into `<asp:TextBox>` and use `string val = srchtxtx.Text;` instead. You should also add `runat="server"` to your form, or you will probably get other issues.

Or if this cannot be a server form remove runat="server" from the `<input>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:04:07.517

假设 runat = "server" 为：

字符串 val = Request.Form[srchtxtx.UniqueID];

# ubuntu-12.04 - 安装 GCC4.7 时无法运行 C 编译程序

> ID：14297092
> 
> 赞同：0
> 
> 时间：2013-01-12T19:28:33.047
> 
> 标签：ubuntu-12.04, gcc4.7

> 安装 GCC4.7 时出现一些问题。请帮我解决这个错误。 [http://solarianprogrammer.com/2012/04/13/building-gcc-4-7-on-ubuntu-12-04/](http://solarianprogrammer.com/2012/04/13/building-gcc-4-7-on-ubuntu-12-04/) 我试图按照上述站点中的这些命令安装 GCC4.7。gcc 的先决条件已正确安装，当我在安装 Gcc 期间尝试调用“make”时，出现以下错误。
> 
> ```
> checking for C compiler default output file name... a.out
> checking whether the C compiler works... configure: error: in `/home/priya/OS_HW1/gcc-4.7/build/x86_64-linux-gnu/libgomp':
> configure: error: cannot run C compiled programs.
> If you meant to cross compile, use `--host'.
> See `config.log' for more details.
> make[2]: *** [configure-stage1-target-libgomp] Error 1
> make[2]: Leaving directory `/home/priya/OS_HW1/gcc-4.7/build'
> make[1]: *** [stage1-bubble] Error 2
> make[1]: Leaving directory `/home/priya/OS_HW1/gcc-4.7/build'
> make: *** [all] Error 2 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:48:13.677

安装似乎坏了。尝试

```
 sudo apt-get install libgomp1 
 sudo apt-get install gcc-4.7-base 
```

# python - 日历模块中全年的矩阵

> ID：14297095
> 
> 赞同：0
> 
> 时间：2013-01-12T19:28:54.227
> 
> 标签：python, calendar

我想使用 Python 的`calendar`模块（或其他更合适的模块）为给定年份的每个星期一和星期六生成 yyyy-mm-dd 格式的日期列表，但我不想引入图书馆外）。

但是，为您提供全年数据的函数，例如`calendar.calendar()`以字符串格式输出日历，不用说，使用起来会非常繁琐。

我想要的是类似的`calendar.monthcalendar`，它为每个列表返回一个包含 7 个条目的矩阵，每个条目代表一周中有序的一天。然而，这对我的周一和周六问题来说也是一个负担，因为有些周跨越 2 个月（即月末和月初）。

我想我可以开发一个尴尬的黑客来解决这个问题，但我希望有一种更好的方法可以忽略。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T19:41:15.830

IIUC，您可以简单地使用[datetime](http://docs.python.org/2/library/datetime.html)：

```
>>> year = 2013
>>> days = [datetime.datetime(year, 1, 1) + datetime.timedelta(days=i) for i in range(366)]
>>> days = [day for day in days if day.year == year and day.weekday() in (0, 5)]
>>> formatted = [day.strftime("%Y-%m-%d") for day in days]
>>> len(formatted)
104
>>> formatted[:10]
['2013-01-05', '2013-01-07', '2013-01-12', '2013-01-14', '2013-01-19', '2013-01-21', '2013-01-26', '2013-01-28', '2013-02-02', '2013-02-04'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T22:11:23.077

尽管它是一个外部依赖项，[但 dateutil](http://labix.org/python-dateutil)具有您通过它[rrule 模块](http://labix.org/python-dateutil#head-470fa22b2db72000d7abe698a5783a46b0731b57)搜索的功能。

```
>>> import datetime
>>> import dateutil.rrule as rr
>>> year = 2013
>>> mondays_saturdays = rr.rrule(rr.DAILY,
...                              dtstart=datetime.datetime(year, 1, 1),
...                              until=datetime.datetime(year, 12, 31),
...                              byweekday=(rr.MO, rr.SA)
... )
>>> print len(list(mondays_saturdays))
104
>>> print list(mondays_saturdays)[:5]
[datetime.datetime(2013, 1, 5, 0, 0), datetime.datetime(2013, 1, 7, 0, 0), datetime.datetime(2013, 1, 12, 0, 0), datetime.datetime(2013, 1, 14, 0, 0), datetime.datetime(2013, 1, 19, 0, 0)]
>>> 
```

# python - 确定此功能是否成功的pythonic方式是什么？

> ID：14297096
> 
> 赞同：0
> 
> 时间：2013-01-12T19:29:01.277
> 
> 标签：python, exception, exception-handling, python-2.7

```
def get_connection_tag(connections_tag, connection_type):
    for child in connections_tag.children:
        concat = "".join(child.attributes)
        if connection_type in concat:
            return child
    return -1 
```

此函数的行为类似于搜索函数，以查找指定的是否`connection_type`存在于`connection_tag`. 如果成功则从 中返回一个元素`connections_tag.children`，但如果不成功则返回 -1。

如果搜索函数成功我想调用一个函数来修改这个子元素，但是如果不成功我想调用一个函数来生成一个子元素。

我可以简单地`isinstance()`用返回的孩子和班级打电话，或者我可以检查是否返回`child == -1`，但我觉得我错过了更合适的方式。也许与 try/except 和提高 a 有什么关系`TypeError`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:31:41.090

在这种情况下，返回“None”会更合适，因为它直观地表明没有找到连接。或者，您也可以引发异常，如果执行必须停止或者是更严重的错误，我通常会引发异常。

根据您的用例，代码如下所示：

```
tag = get_connection_tag(connections_tag, connection_type)
if not tag:
    pass 
```

# iphone - Passkit / 存折 iOS 5

> ID：14297098
> 
> 赞同：1
> 
> 时间：2013-01-12T19:29:15.013
> 
> 标签：iphone, ios, objective-c, passbook

如果我的开发目标是 5.0，我可以使用 Passkit 和 PassBook 吗？我有点困惑，因为存折是 iOS 6 自带的。但我可以在 Xcode 中添加 passkit 框架。使用 iOS 5 的设备会发生什么？在哪个sdk passkit中添加了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T20:03:23.257

我没有特别检查 - 但你应该能够使链接成为弱链接，然后在运行时检查。

转到您的项目 -> 目标 -> 构建阶段 -> 将二进制文件与库链接。

然后将要弱链接的库从“必需”更改为“可选”

如果您不将其设为弱链接，它将无法在运行 iOS < 6.0 的设备上运行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T19:56:21.407

它不会为较低的设备编译。它实际上根本不应该编译。如果它编译它会通过一个警告告诉你：

> 低于 6.0 的 iOS 版本不支持 PassKit.framework

# mysql - 插入数据后显示消息框

> ID：14297100
> 
> 赞同：0
> 
> 时间：2013-01-12T19:29:20.260
> 
> 标签：mysql, vb.net, visual-studio-2008

我是 vb.net (VS 2008) 的新手，需要帮助。我正在将数据从 Windows 窗体馈送到 mysql dbase .. 成功插入数据后，它会在 msgbox 中显示“添加的数据”怎么做？> 请帮助。

这是我的按钮代码

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Manage("insert into pExpenses(expdate,exptype,expamount) values('" & txtExpDate.Text & "','" & txtExpType.Text & "'," & txtExpAmount.Text & ")")
    End Sub 
```

单击时，数据将输入数据库，但我需要以消息框的形式进行确认。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:02:47.740

正如您所说，您正在使用 MySQL 数据库作为 VB.net 应用程序的后端。如果您正在调用 manage() 函数来插入数据，请查找“.ExecuteNonQuery()”函数调用来插入数据。此 ExecuteNonQuery() 函数始终返回在命令执行期间受影响的行数。将该返回值分配给一个整数变量，检查它是否大于 0，然后显示消息。

```
Dim insRet as integer = <MySqlCommandobject>.ExecuteNonQuery()
If insRet>0 then
messagebox.show(insret & " Record(s) Successfully Inserted")
else
messagebox.show("Records not inserted")
End If 
```

# c++ - C++：从链表中提取值

> ID：14297105
> 
> 赞同：0
> 
> 时间：2013-01-12T19:29:43.057
> 
> 标签：c++, linked-list

`extractMin()`当我多次调用时，此代码会崩溃。我认为对你们中的一些人来说，问题出在函数上应该是显而易见的，因为我是指针新手，可能是一个明显的错误。所以你知道它是一个链表就足够了，除了函数应该使用`<`运算符检索字典最小值，然后从链表中删除该值之外，无需详细说明。

```
string LinkedListPQueue::extractMin() {
    if (this->isEmpty()) throw ErrorException("Empty queue.");
    string front = LEX_HIGH;
    cell *old;

    for (int i = 0; i < this->size(); i++) {
        if (this->head->value < front) {
            front = this->head->value;
            old = this->head;
        }

        old = this->head;
        this->head = this->head->next;
    }

    logSize--;
    delete old;
    return front;
}

void LinkedListPQueue::enqueue(const string& elem) {
    cell *newCell = new cell;
    newCell->value = elem;
    newCell->next = NULL;
    if(this->isEmpty()) {
        this->head = this->tail = newCell;
        logSize++;

    } else {
        recurSort(newCell);
        this->tail->next = newCell;
        this->tail = newCell;
        logSize++;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:32:35.540

您`head`被修改但在运行后从未重置

您应该简单地使用`iterators`或简单地添加一个从开始的指针`head`并移动该指针，而不是“破坏”您的列表`head`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T19:32:42.990

您正在修改 中的头成员`extractMin()`，这会使列表损坏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T19:34:02.593

问题在于这个循环：

```
for (int i = 0; i < this->size(); i++) {
    if (this->head->value < front) {
        front = this->head->value;
        old = this->head;
    }

    old = this->head;
    this->head = this->head->next;
} 
```

它对我来说似乎已经过时了，但它也会导致内存泄漏以及导致列表在执行后具有单个元素。

在我看来这两行：

```
old = this->head;
this->head = this->head->next; 
```

不应该在循环中。函数逻辑应该更复杂一些——你找到一个指向最小元素的指针，然后将它的值与头部交换，然后移除头部。

# android - 如何正确组织android可绘制资源？

> ID：14297106
> 
> 赞同：1
> 
> 时间：2013-01-12T19:29:55.987
> 
> 标签：android, android-resources

我知道 android 会根据它们的位置（-ldpi、-mdpi 等）选择可绘制对象。如果我有两组可绘制对象，一组用于 mdpi 和 ldpi，另一组用于 hdpi 和 xhdpi，我应该如何组织我的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:41:36.030

目前，我没有遇到任何对dpi 文件夹进行*分组的可能性。*但你仍然有选择：

**虚拟可绘制：**

将您的图像放入您的普通`/drawable`文件夹并将它们命名为`image1_low.png`和`image1_high.png`。现在将“虚拟可绘制”文件`image1_dummy.xml`放入您的`/drawable-ldpi` *和* `/drawable-mdpi`文件夹中，其中包含以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/image1_low" /> 
```

`/drawable-hdpi` *和* 文件夹也是如此`/drawable-xhdpi`，但现在使用`@drawable/image1_high`而不是`@drawable/image1_low`.

现在您可以参考假人的名称，例如

`getResources().getDrawable(R.drawable.image1_dummy);`

在您的代码中获得所需的drawable。

**程序化：**

您不仅限于使用文件夹，还有一种编程方法（感谢 [https://stackoverflow.com/a/5323437/1140682](https://stackoverflow.com/a/5323437/1140682)）：

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);
switch(metrics.densityDpi){
   case DisplayMetrics.DENSITY_XHIGH:
         // assign your high-res version
         break;
   case DisplayMetrics.DENSITY_HIGH:
         // assign your high-res version
         break;
   default:
         // assign your low-res version
         break;
} 
```

# css - 更改下拉菜单以避免长锚

> ID：14297109
> 
> 赞同：0
> 
> 时间：2013-01-12T19:30:04.210
> 
> 标签：css, drop-down-menu, html-lists

我制作了一个下拉菜单，虽然它工作正常并且行为与我想要的完全一样，但有一个问题我似乎无法纠正。

对于一些下拉菜单，我会在下面添加一些评论以帮助用户。例如 ：

```
<a href="/#"><b>test</b> <br/><span>testing comment</span></a> 
```

我不想将评论放在锚内，而是将其放在锚外并以相同的方式进行外观/行为。推理......谷歌让我害怕，我不希望他们认为我是关键字填充......特别是因为下拉菜单最初是显示：隐藏。我在想类似的东西：

```
<a href="/#"><b>test</b></a> <br /><span>testing comment</span></ 
```

一定有可能，但我似乎无法理解。这个小提琴的完整代码和 css - [jsfiddle](http://jsfiddle.net/qn7qr/)

```
<div class="drop-menu">
                <ul>
                    <li><a class="full" href="/#">number 1</a>
                        <ul>
                            <li><a href="/#"><b>test</b> <br/><span>testing comment</span></a></li>
                            <li><a href="/#"><b>test</b> <br/><span>testing comment</span></a></li>
                            <hr/>
                            <li><a href="/#"><b>testing</b> <br/><span>testing comment</span></a></li>
                        </ul>
                    </li>
                    <li><a href="/#">number 2</a></li>
                    <li><a class="purchase" href="/#"><img alt="cart" height="16" src="/images/trans.gif" width="16"> number 3</a></li>
                    <li><a class="full" href="/#">number 4</a>
                        <ul>
                            <li><a href="/#">testing</a></li>
                            <li><a href="/#">testing</a></li>
                            <li><a href="/#">testing</a></li>
                        </ul>                   
                    </li>
                    <li><a href="/#">number 5</a></li>
                </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:53:12.690

你可以这样做：

```
<li><a href="/#"><b>test</b></a><span>testing comment</span></li> 
```

当您将鼠标悬停在`li`背景上时也会产生相同的效果。

```
.drop-menu li ul li:hover {
  background:#c4dcec;
  overflow: hidden;
  display: block;
} 
```

# java - 日食错误？什么时候短不是短？

> ID：14297113
> 
> 赞同：4
> 
> 时间：2013-01-12T19:30:37.887
> 
> 标签：java, eclipse

这是 Eclipse 中的错误吗？

声明短变量时，编译器将整数文字视为短变量。

```
// This works
short five = 5; 
```

然而，当将整数文字作为短参数传递时，它并没有做同样的事情，而是产生了一个编译错误：

```
// The method aMethod(short) in the type Test is not applicable for 
// the arguments (int)
aMethod(5); 
```

它清楚地知道整数文字何时超出短整数范围：

```
// Type mismatch: cannot convert from int to short
    short notShort = 655254 
```

-

```
class Test {
    void aMethod(short shortParameter) {
    }

    public static void main(String[] args) {
        // The method aMethod(short) in the type Test is not applicable for 
        // the arguments (int)
        aMethod(5); 

      // the integer literal has to be explicity cast to a short
      aMethod((short)5);

      // Yet here the compiler knows to convert the integer literal to a short
      short five = 5;
      aMethod(five);

      // And knows the range of a short
      // Type mismatch: cannot convert from int to short
        short notShort = 655254
    }
} 
```

参考：[Java 原始数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T19:35:18.263

这是因为在调用方法时，只授权原始的扩大转换，而不是原始的缩小转换（int -> short 是）。这是在[JLS #5.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.3)中定义的：

> 方法调用上下文允许使用以下之一：
> 
> *   身份转换（§5.1.1）
> *   扩大的原始转换（§5.1.2）
> *   扩大参考转换（§5.1.5）
> *   一个装箱转换（第 5.1.7 节）可选地后跟扩大参考转换
> *   一个拆箱转换（第 5.1.8 节）可选地后跟一个扩大的原始转换。

另一方面，在赋值的情况下，允许缩小转换，只要该数字是一个常数并且适合一个简短的，cf [JLS #5.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.2-300)：

> 如果变量的类型是 byte、short 或 char，并且常量表达式的值可以用变量的类型表示，则可以使用窄化原语转换。

# javascript - 使用 AngularJS 的动态菜单项

> ID：14297116
> 
> 赞同：2
> 
> 时间：2013-01-12T19:30:47.370
> 
> 标签：javascript, twitter-bootstrap, angularjs

假设我有以下菜单结构：

```
 <li class="dropdown"><img role="button" class="dropdown-toggle" data-toggle="dropdown" ng-src="{{avatarUrl}}" />
      <ul class="dropdown-menu pull-right" role="menu">
        <li ng-hide="user"><a ng-click="openLoginDialog()">Login</a></li>
        <li ng-show="user"><a ng-click="logout()">Logout</a></li>
      </ul>
    </li> 
```

我得到了正确的菜单，但是因为我使用的是 ng-show/ng-hide，所以当我`user = false;`在控制器中以编程方式更改时，会出现登录菜单。我明白为什么会发生这种情况，但我不确定在使用 Angular 来防止它时采取什么方法。我尝试了一个 ng-repeat：

```
 <li class="dropdown"><img role="button" class="dropdown-toggle" data-toggle="dropdown" ng-src="{{avatarUrl}}" />
      <ul class="dropdown-menu pull-right" role="menu">
        <li ng-repeat="action in actions"><a ng-click="{{action.command}}">{{action.name}}</li>
      </ul>
    </li> 
```

和：

```
$scope.actions = [ {
  name : "Login",
  command : "openLoginDialog()"
}, {
  name : "Logout",
  command : "logout()"
} ]; 
```

但是使用该策略，单击菜单项不会发生任何事情。对于我确定的行人用例，我不确定合适的 Angular 方法是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T20:17:31.787

使用[ng-switch](http://docs.angularjs.org/api/ng.directive%3angSwitch)而不是 ng-show/hide。ng-switch 从 DOM 中添加/删除元素。

```
<ul class="dropdown-menu pull-right" role="menu">
    <li ng-switch="user">
       <a ng-switch-when="true" ng-click="logout()">Logout</a>
       <a ng-switch-default     ng-click="openLoginDialog()">Login</a>
    </li>
</ul> 
```

**更新**以处理@andyczerwonka 的评论。将 ng-switch 向上移动一到两级。如果`span`s inside`ul`不要打扰你：

```
<ul class="dropdown-menu pull-right" role="menu" ng-switch="user">
  <span ng-switch-when="true">
    <li><a  ng-click="logout()">Logout</a></li>
    <li><a  ng-click="preferences()">Preferences</a></li>
  </span>
  <span ng-switch-default>
    <li><a ng-click="openLoginDialog()">Login</a></li>
  </span>
</ul> 
```

`span`否则，外面的一个怎么样`ul`：

```
<span ng-switch="user">
  <ul class="dropdown-menu pull-right" role="menu" ng-switch-when="true">
      <li><a  ng-click="logout()">Logout</a></li>
      <li><a  ng-click="preferences()">Preferences</a></li>
    </ul>
  <ul class="dropdown-menu pull-right" role="menu" ng-switch-default>
      <li><a ng-click="openLoginDialog()">Login</a></li>
  </ul>
</span> 
```

[小提琴](http://jsfiddle.net/mrajcok/ELurv/)显示了这两种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T07:46:51.183

在我的项目中，我使用以下设置：

```
angular.module('mymodule')
.controller('MenuCtrl', function ($scope, $translate, UserService) { 
```

使用允许使用这些操作的角色定义操作：

```
 $scope.actions = [ {
    name : "menu.login",
    href : "#/login",
    roles : []
  }, {
    name : "menu.logout",
    href : "#/logout",
    roles : [ 'READ_ONLY', 'ADMIN' ]
  }, {
    name : "menu.foo",
    href : "#/foo",
    roles : [ 'READ_ONLY', 'ADMIN' ]
  }, {
    name : "menu.adminArea",
    href : "#/adminArea",
    roles : [ 'ADMIN' ]
  } ]; 
```

定义一个 isAllowed 函数来确定当前用户是否可以使用某个操作：

```
 $scope.isAllowed = function(action) {
    if (action.roles && action.roles.length) {
      for ( var i = 0; i < action.roles.length; ++i) {
        if (jQuery.inArray(action.roles[i], UserService.roles) >= 0) {
          return true;
        }
      }
      return false;
    } else {
      return !(UserService.roles && UserService.roles.length);
    }
  }; 
```

然后使用 $roueChangeSuccess 事件来确定应该为当前用户显示哪些操作：

```
 $scope.initView = function() {
    for(var i=0; i<$scope.actions.length; ++i) {
      var action = $scope.actions[i];
      if($scope.isAllowed(action)) {
        action.isRendered = true;
      } else {
        action.isRendered = false;
      }
    }
  };

  $scope.$on('$routeChangeSuccess', function() {
    $scope.initView();
  });

}); 
```

最后，这是我的菜单模板：

```
<nav ng-controller="MenuCtrl">
  <ul>
    <span ng-repeat="action in actions" ng-switch on="action.isRendered">
      <li ng-switch-when="true"><a href="{{action.href}}">{{action.name | translate}
      </a></li>
    </span>
  </ul>
</nav> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T19:34:40.067

为什么不为命令分配功能：

```
var openLoginDialog = function() { ... };
var logout = function() { ... };

$scope.actions = [ {
  name : "Login",
  command : openLoginDialog
}, {
  name : "Logout",
  command : logout
} ]; 
```

# eclipse - 2个不同的Eclipse实例

> ID：14297120
> 
> 赞同：0
> 
> 时间：2013-01-12T19:31:13.553
> 
> 标签：eclipse

我使用 Ubuntu 12.04 和 Eclipse Indigo。

我想升级到 Juno，但正如我一般[阅读](https://stackoverflow.com/a/11264210/423980)的那样，最好进行全新安装。

因此，如果我的系统中有两个实例，则会出现一些问题。

1.  将工作区文件夹从一个地方复制到新的地方我会丢失使用 svn 完成的提交吗？有没有办法找回它们或什么？

2.  当我想启动*eclipse*我只需使用 ALT+F2 并写下*eclipse*。现在我将有 2 个实例，我应该如何知道应该执行这两个实例中的哪一个。我将如何运行 Indigo 以及如何运行 Juno？

PS：我没有添加ubuntu作为标签我猜有些用户可以回答第二个问题。

# jsp - JSP 链接到另一个 JSP

> ID：14297122
> 
> 赞同：2
> 
> 时间：2013-01-12T19:31:18.113
> 
> 标签：jsp, servlets

在我的 JSP 页面中，我希望将链接转发到另一个 JSP 页面。当用户在 home.jsp 上时，我希望他们去 login.jsp 等。我遇到的问题是找不到 JSP，除非我将页面放在项目文件夹中（在 WEB-INF 上方文件夹）。

我尝试了这些代码行，但没有一个起作用：

```
<a href="/enq/WEB-INF/pages/login.jsp">
<a href="/WEB-INF/pages/login.jsp">
<a href="/pages/login.jsp"> 
```

它仅适用于项目文件夹中的 JSP 页面，然后我使用下一行：

```
<a href="login.jsp"> 
```

但我希望 JSP 页面位于：WEB-INF/pages/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-21T17:45:35.023

我已经解决了，我为每个 JSP 页面创建了 4 个 Servlet。每个 servlet 都将消息转发到相应的 JSP，如下所示：

```
request.getRequestDispatcher("/WEB-INF/pages/enquette.jsp").forward(request, response); 
```

并且在 JSP 页面中的 a href 之间：

```
<a href="/enq/enquette"> 
```

网络 XML：

```
<servlet-mapping>
<servlet-name>Enquette</servlet-name>
<url-pattern>/enquette</url-pattern> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T20:37:55.783

```
<a href="/pages/login.jsp"> 
```

它必须正常工作。在这种情况下，您会得到什么 HTTP 状态？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-28T17:14:21.247

如果您希望用户可以访问以下文件：/WEB-INF/pages/login.jsp

您应该创建一个 servlet，并且应该更改 html 或 jsp 文件中的链接：

```
<a href="/pages/login.jsp"> login page </a> 
```

创建一个 servlet：将此行添加到您的 web.xml 文件中：

```
<servlet-mapping>
<servlet-name>accessFiles</servlet-name>
<url-pattern>/pages/*</url-pattern>  
</servlet-mapping>

<servlet>
<servlet-name>accessFiles</servlet-name>
<servlet-class>yourclass</servlet-class>
</servlet> 
```

然后创建扩展 servlet 的 yourclass.java：

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class yourclass extends javax.servlet.http.HttpServlet {

 private String message;

  public void init() throws ServletException
  {

  }

  public void doGet(HttpServletRequest request,
                    HttpServletResponse response)
            throws ServletException, IOException
  {
      String pathInfo = request.getPathInfo();
      request.getRequestDispatcher("/WEB-INF/pages/" + pathInfo).forward(request, response);

  }

  public void destroy()
  {
      // do nothing.
  } 
```

}

getPathInfo() 将返回应该工作的 servlet 模式 (/pages/) 之后的 URL 部分。

您还可以在 /WEB-INF/pages/ 目录下添加更多 jsp 文件，并通过此 servlet 将用户转发到所需页面。

# macos - 在方法中间显示模态窗口

> ID：14297126
> 
> 赞同：0
> 
> 时间：2013-01-12T19:31:34.083
> 
> 标签：macos, cocoa, modal-dialog, nswindow

所以我有一个程序，在发生 try/catch 块后，我需要一个模式窗口出现，以便用户可以做出特定选择，然后我希望程序继续运行。我不知道如何进行这项工作，并且我不断收到这些异常。

```
*** Assertion failure in -[NSApplication _commonBeginModalSessionForWindow:relativeToWindow:modalDelegate:didEndSelector:contextInfo:], /SourceCache/AppKit/AppKit-1187.34/AppKit.subproj/NSApplication.m:3920

Exception detected while handling key input.

Modal session requires modal window 
```

我已将模态表配置为以两种不同的方式出现，第一种方式是通过按钮按下，第二种方式是在我的 try catch 块之后。当我通过直接链接到它的按钮按下使其显示时，`Configure Game`它工作正常，但是当我通过另一种方法中的 try catch 块进行操作时，它会抛出上述所有异常。

```
//Method that opens the modal sheet
- (IBAction)configureGame:(id)sender
{
    //Calls a webview for the user to go to a specific location   
    NSString *FGstarter = @"http://www.google.com";
    NSURL *FGplayerUrl = [NSURL URLWithString:FGstarter];        
    [webView setMainFrameURL:[FGplayerUrl absoluteString]];

    //Opens the Modal Sheet
    [NSApp beginSheet:configureSheet modalForWindow:mainWindow
        modalDelegate:self didEndSelector:NULL contextInfo:nil];

}

//Select Method to a Select button which also closes the Sheet
- (IBAction)select:(id)sender{
    //sets a NSString Instance Var to the Current URL of the webView
    currentPage = [webView stringByEvaluatingJavaScriptFromString:@"window.location.href"]);

    //Closes the sheet
    [NSApp endSheet:configureSheet];     
}

-(NSMutableArray *)loadPlayer:(NSString *)name{
@try {
   // Code here might cause exception that gets caught in the catch
}
@catch (NSException *exception) {
    //When I call this function I get all the exceptions listed in the top of the post
    [self configureGame:nil];
    //Ideally here what would happen here is the modal sheet would pop up the user would hit the select button that calls the select method then the program continues running.  
}
   NSString *page = currentPage;
   //...Continue Using this method
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:18:18.600

请不要这样做。从苹果文档...

> **重要**在许多环境中，使用异常是相当普遍的。例如，您可能会抛出异常来表示例程无法正常执行，例如文件丢失或数据无法正确解析时。在 Objective-C 中，异常是资源密集型的。您不应该将异常用于一般的流控制，或者仅仅表示错误。相反，您应该使用方法或函数的返回值来指示发生了错误，并在错误对象中提供有关问题的信息。有关详细信息，请参阅错误处理编程指南。

另请参阅此问题的最佳答案：
[将 Java 代码移植到 ObjC 时，如何最好地表示已检查的异常？](https://stackoverflow.com/questions/1117384/when-porting-java-code-to-objc-how-best-to-represent-checked-exceptions)

# asp.net-mvc-4 - 为什么要使用 DevExpress 高级自定义绑定？

> ID：14297132
> 
> 赞同：0
> 
> 时间：2013-01-12T19:32:16.493
> 
> 标签：asp.net-mvc-4, devexpress

所以我一直在寻找这个问题的答案，我真的没有取得任何进展，所以我希望这里有人可以帮助我。

我指的是这个： http: [//mvc.devexpress.com/GridView/AdvancedCustomBinding](http://mvc.devexpress.com/GridView/AdvancedCustomBinding)

现在这是否使我能够在服务器端进行分页，因此大型数据集不会阻碍初始请求，或者如果您想做纯粹的自定义分页/过滤等等，它们从来没有真正给出很好的例子为什么您要走这条路线而不是使用那里的基本数据绑定。我对 devExpress 还是半新的，真的只用过那里的报告引擎，所以任何建议都将不胜感激。

我真的不确定这一切是如何在 devExpress 端（服务器或客户端）完成的，我真的找不到任何关于此的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T19:36:13.877

很晚了，但如果有兴趣，我会在这里分享我的经验。

例如，现在我的任务是在我们的一个 MVC 网格视图中执行“比较”功能。这意味着不关心任何过滤或排序，一个自定义的“幽灵”行应该一直跟随每个“正常”行，其中包含 - 例如 - 去年的数据。我的意思是不要像所有过滤、排序、分组那样关心过滤或排序，应该只基于“标准”行工作，而“幽灵”行只是在其相应的标准行之后愚蠢地跟随。

没有自定义绑定是不可能实现的，因为在每一个标准的数据绑定机制中，网格都会对其所有可见的行进行排序、过滤、分组，而我无法告诉它“这些只是幽灵行” .

在自定义绑定功能之前我一直很困惑，但现在我可以简单地在 GetData 处理程序中查询标准数据，从中创建一个列表，然后在排序、过滤或分组后插入我的幽灵行。使用特殊的模型属性，我什至可以为这些特殊行制作不同的背景颜色或字体。直到现在我还没有完全测试过它，但乍一看它看起来不错，我有很大的希望。

总而言之，使用自定义绑定，正如我所解释的，基本上您可以以任何方式处理 UI 请求（排序、过滤等），因此您可以将任何数据放入 gridview 中，就好像它是纯粹的一样HTML 表格，但您仍然拥有用于排序、过滤、分组、分页等的出色用户界面。

编辑：目前不支持过滤器生成器和其他高级过滤选项。因为我需要它们，所以现在我不能使用自定义绑定。期待完整的支持。

# android - Android BroadcastReceiver 不适用于 android 4.x，但适用于模拟器

> ID：14297137
> 
> 赞同：0
> 
> 时间：2013-01-12T19:32:51.807
> 
> 标签：android, broadcastreceiver

对于我的项目，我需要使用 BroadcastReceiver 来接收 SMS。我的代码适用于我的模拟器，但不适用于我的手机。我的手机是 HTC one X (android 4.0.3)。在仿真中，当我收到短信时我可以看到吐司，而在我的手机中我看不到...

我的代码：

SMSReceiver.java：

```
package com.tuto.smsreceiver;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SMSReceiver extends BroadcastReceiver
{
     private final String   ACTION_RECEIVE_SMS  = "android.provider.Telephony.SMS_RECEIVED";

     @Override
     public void onReceive(Context context, Intent intent)
     {
         if (intent.getAction().equals(ACTION_RECEIVE_SMS))
         {
             Bundle bundle = intent.getExtras();
             if (bundle != null)
             {
                 Object[] pdus = (Object[]) bundle.get("pdus");

                 final SmsMessage[] messages = new SmsMessage[pdus.length];
                 for (int i = 0; i < pdus.length; i++)  {  messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);  }  if (messages.length > -1)
                 {
                     final String messageBody = messages[0].getMessageBody();
                     final String phoneNumber = messages[0].getDisplayOriginatingAddress();

                     Toast.makeText(context, "Exp : " + phoneNumber, Toast.LENGTH_LONG).show();
                     Toast.makeText(context, "MSG recu : " + messageBody, Toast.LENGTH_LONG).show();

                 }
             }
        }
    }
} 
```

AndroidManifest.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.tuto.smsreceiver"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="8" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

    <receiver class="com.tuto.smsreceiver.SMSReceiver"
        android:name="com.tuto.smsreceiver.SMSReceiver">
        <intent-filter android:priority="999">
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver>

    </application>

    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.READ_SMS" />

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:56:03.127

当收到 SMS 消息时，您尝试捕获的广播是有序广播。它可以被任何收件人取消（在这种情况下，其他潜在收件人不会收到它，包括您的`BroadcastReceiver`）。我不能 100% 确定，但您设备上的某些东西可能会收到此广播并取消它（我会责怪 HTC 堆栈中的软件，我听说这是众所周知的问题）。

有关详细信息，请查看`BroadcastReceiver` [文档](http://developer.android.com/reference/android/content/BroadcastReceiver.html)（其中部分解释了有序广播）。

# ruby-on-rails - 无法在生产中启动 Rails 控制台

> ID：14297140
> 
> 赞同：2
> 
> 时间：2013-01-12T19:33:19.223
> 
> 标签：ruby-on-rails, sqlite, console

尝试在我的项目上启动 rails 控制台时出现此错误：

```
/home/username/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:47:in `resolve_hash_connection': database configuration does not specify adapter (ActiveRecord::AdapterNotSpecified)
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:41:in `resolve_string_connection'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:25:in `spec'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:129:in `establish_connection'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.8/lib/active_record/railtie.rb:82:in `block (2 levels) in <class:Railtie>'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:42:in `each'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.8/lib/active_record/base.rb:721:in `<top (required)>'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.8/lib/active_record/railtie.rb:41:in `block in <class:Railtie>'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/railties-3.2.8/lib/rails/railtie.rb:179:in `call'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/railties-3.2.8/lib/rails/railtie.rb:179:in `block in load_console'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/railties-3.2.8/lib/rails/railtie.rb:179:in `each'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/railties-3.2.8/lib/rails/railtie.rb:179:in `load_console'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/railties-3.2.8/lib/rails/engine.rb:429:in `block in load_console'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/railties-3.2.8/lib/rails/application/railties.rb:8:in `each'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/railties-3.2.8/lib/rails/application/railties.rb:8:in `all'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/railties-3.2.8/lib/rails/engine.rb:429:in `load_console'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/railties-3.2.8/lib/rails/application.rb:153:in `load_console'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/railties-3.2.8/lib/rails/commands/console.rb:27:in `start'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/railties-3.2.8/lib/rails/commands/console.rb:8:in `start'
from /home/username/.rvm/gems/ruby-1.9.3-p362/gems/railties-3.2.8/lib/rails/commands.rb:41:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

这是我的 database.yml 文件（未修改默认文件）：

```
# SQLite version 3.x
#   gem install sqlite3
#
#   Ensure the SQLite 3 gem is defined in your Gemfile
#   gem 'sqlite3'
development:
  adapter: sqlite3
  database: db/development.sqlite3
  pool: 5
  timeout: 5000

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: sqlite3
  database: db/test.sqlite3
  pool: 5
  timeout: 5000

production:
  adapter: sqlite3
  database: db/production.sqlite3
  pool: 5
  timeout: 5000 
```

我不认为这是特定于系统的问题，因为它发生在我的开发环境（Fedora 17 笔记本电脑）和生产环境（Debian 6 VPS）上。在 VPS 上，nginx+unicorn 启动并在生产中正常运行。原因可能是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-25T23:30:33.423

而不是`rails console RAILS_ENV=production`：

使用`rails console production`或更短的`rails c production`.

调用 rails console 之后的值将被视为环境，因此它认为“RAILS_ENV=production”是它应该使用的环境名称，而不是“production”。

# windows - haskell中的win32 SetForegroundWindow

> ID：14297146
> 
> 赞同：2
> 
> 时间：2013-01-12T19:34:03.750
> 
> 标签：windows, haskell

我注意到[Haskell Win32 api](http://hackage.haskell.org/packages/archive/Win32/2.2.2.0/doc/html/Graphics-Win32-Window.html)没有`SetForegroundWindow`功能，而且我在 Haskell 方面不够熟练，无法自己添加此功能。是否有任何方法可以使用haskell 复制它，或者是否有人使用ffi 制作了自己的包装器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T20:55:40.800

这是一个使用 FFI 的简单包装器：

```
{-# LANGUAGE ForeignFunctionInterface #-}

module SetForegroundWindow
( setForegroundWindow
) where

import Foreign
import Graphics.Win32

foreign import stdcall safe "windows.h SetForegroundWindow"
    c_setForegroundWindow :: HWND -> IO Bool

setForegroundWindow :: HWND -> IO Bool
setForegroundWindow = c_setForegroundWindow 
```

# android - Android 应用调试和测试哪个更好用：android 手机还是 androidx86 操作系统？

> ID：14297147
> 
> 赞同：0
> 
> 时间：2013-01-12T19:34:06.913
> 
> 标签：android, debugging, android-emulator, android-x86

由于 eclipse 的模拟器真的很慢，而且我读过评论说即使在高端计算机上它仍然会运行缓慢，这是您用于应用程序测试的更好选择吗？在灵活性、速度甚至只是开发人员偏好方面更好。

屏幕尺寸是 android 手机的限制，因为它是静态的，androidx86 操作系统可以随着屏幕尺寸动态变化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:50:24.047

我使用 androidx86 图像和英特尔的模拟器。它工作得非常快。您可以设置不同的屏幕尺寸和其他一些设备功能，例如普通的 android 模拟器。

但也有一些缺点：没有 4.2 版本，只有 4.0 和 4.1 可用。安装了 Google API 的 Android 镜像现在不可用（您可以自己添加它们）。

所以你可以使用x86作为开发和测试的主要设备，但是你仍然需要arm android模拟器来测试旧的android版本，你仍然需要几个真实的设备，因为模拟器并不总是正确的，有些测试用例你只能运行在真实设备上。

PS 一般来说，真机更好（最流行的屏幕尺寸和android版本要好得多）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T19:50:30.143

有一种叫做硬件加速执行管理器的东西，它使事情变得更好。

如果您可以在您的计算机上使用 HAXM，那么您使用模拟器的体验将会大大改善（它在 MacOS 和 Windows 上受支持，并且需要 Intel 处理器）。启动时间和部署时间大大改善。

它也仅在某些 Android 操作系统版本上受支持。

如果可能的话，最好有一个用于测试的实际设备，因为它确实具有与仿真器不同的功能。

Mac： http: [//software.intel.com/en-us/articles/installation-instructions-for-intel-hardware-accelerated-execution-manager-mac-os-x](http://software.intel.com/en-us/articles/installation-instructions-for-intel-hardware-accelerated-execution-manager-mac-os-x)

Windows： http: [//software.intel.com/en-us/articles/installation-instructions-for-intel-hardware-accelerated-execution-manager-microsoft](http://software.intel.com/en-us/articles/installation-instructions-for-intel-hardware-accelerated-execution-manager-microsoft)

# asp.net-mvc-3 - 在 ASP.Net (MVC 3) 中验证配置文件属性的唯一性

> ID：14297150
> 
> 赞同：0
> 
> 时间：2013-01-12T19:34:23.287
> 
> 标签：asp.net-mvc-3, optimization, unique, asp.net-profiles

我在我的 MVC 3 ASP.Net 应用程序中使用我自己的配置文件提供程序。我在这个[博客](http://weblogs.asp.net/jgalloway/archive/2008/01/19/writing-a-custom-asp-net-profile-class.aspx)中使用 ProfileBase 类对此进行了改进。

我的问题是我有一个我想要独特的属性，称为“BlogSpace”。我怎样才能验证这一点？

目前，我在 UserProfile 类中创建了一个静态方法，该方法在尝试保存之前在控制器中调用。像这样：

```
public static bool ValidateUniquenessBlogSpace(string blogspace, string currentUsername, MembershipUserCollection col)
    {
        bool bUnique = true;

        foreach (MembershipUser user in col)
        {
            UserProfile userprofile = Create(user.UserName) as UserProfile;
            if (userprofile.BlogSpace == blogspace && userprofile.UserName != currentUsername)
                return false;
        }

        return bUnique;
    } 
```

主要问题是它会通过所有成员，所以如果我的用户群增长我不确定它会非常快。~~另一个问题是，通过从控制器调用它，我不确定如何返回问题来自该字段的视图并显示适当的消息......~~（见编辑）。我想要这样的方法，但这仅适用于数据库：

```
 public class UniqueBlogSpace : ValidationAttribute
            {
                public override bool IsValid(object value)
                {
                    DataContext db = new DataContext();
                    var userWithTheSameBlogSpace = db.Users.SingleOrDefault(
                        u => u.BlogSpace == (string)value);
                    return userWithTheSameBlogSpace == null;
                }
            }

[UniqueBlogSpace(ErrorMessage = "This name is already in use...")]
        public string BlogSpace { get; set; } 
```

***编辑***

我现在知道如何向我的模型传达控制器中某个字段存在此类问题的方法。主要问题仍然是如果我的用户群增长，解析所有成员的方式会非常慢。有没有更好的方法来验证唯一性？

```
ModelState.AddModelError("Blogspace", new System.Exception()); 
```

# c - 请解释这个对齐错误

> ID：14297154
> 
> 赞同：3
> 
> 时间：2013-01-12T19:34:39.873
> 
> 标签：c, memory, alignment

```
#include <stdio.h>
void main(void)
{
    char array[4] = {0, 1, 2, 3};
    float *fpek;
    int i;
    for(i=0;i<4;i++)
    {
        fprintf(stderr,"i = %d ", i);
        fpek = (float *)(&array[i]);
        fprintf(stderr, "fpek = %lx ", (unsigned long) fpek);
        *fpek = (float) i + 10;
        fprintf(stderr, "*fpek = %.2f\n", *fpek);
    }
}

$ cc alignment.c
$ a.out
i = 0 fpek = effff0fc *fpek = 10.00
i = 1 fpek = effff0fd Bus error 
```

上面的代码是在 C 编程练习材料中找到的。我理解这些陈述本身，但我并没有真正看到作者试图说明什么。为什么会出现总线错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T20:14:17.193

对齐与否，这完全是**错误**的：

```
 fpek = (float *)(&array[i]); // invalid for i>0, questionable for i==0
    fprintf(stderr, "fpek = %lx ", (unsigned long) fpek);
    *fpek = (float) i + 10; 
```

由于`array`最多有四个字符宽，即使您的系统 -`float`是 4 个字节，您在分配时会立即寻址（可能未对齐）`i`超出数组范围的数据字节`i>0`。一旦您取消引用该指针，您要么会由于未对齐而导致总线错误，或者，如果您的体系结构没有对齐限制*（*`float`并且大多数情况下），您将开始踩踏堆栈变量的赋值跟随。

 *为了突出作者可能试图克服的错误（对齐可能很重要）而不引入除此之外的未定义行为，请考虑以下内容：

```
#include <stdlib.h>
#include <stdio.h>

int main()
{
    /* note: defined to hold enough bytes for *two* floats. */
    float *fpek = NULL;
    char array[2*sizeof(*fpek)];
    int i;

    /* fill with incrementing values */
    for (i=0; i<sizeof(array)/sizeof(array[0]);++i)
        array[i] = (i+1);

    // now walk the array, one char at a time,
    //  casting the address of the current element
    //  to a float pointer and try to read/write it.
    fprintf(stderr, "array = %p, size=%lu\n", array, sizeof(array));
    for(i=0;i<sizeof(*fpek);++i)
    {
        fprintf(stderr,"i = %d, ", i);
        fpek = (void*)(array+i);
        fprintf(stderr, "fpek = %p, ", fpek);
        *fpek = i+10;
        fprintf(stderr, "*fpek = %.2f\n", *fpek);
    }

    return 0;
} 
```

无论`float`您的系统上的 a 有多宽/多窄，这都将起作用，而不会引入*特定于走过 char 数组末尾的*未定义行为。它很可能仍然会出现总线错误，但至少解决了超出数组下标的 UB。

在我的 Mac Air（英特尔 64 位 CPU）上运行它不会产生总线错误：

```
array = 0x7fff5fbff868, size=8
i = 0, fpek = 0x7fff5fbff868, *fpek = 10.00
i = 1, fpek = 0x7fff5fbff869, *fpek = 11.00
i = 2, fpek = 0x7fff5fbff86a, *fpek = 12.00
i = 3, fpek = 0x7fff5fbff86b, *fpek = 13.00 
```

如您所见，我的平台对`float`对齐并不是特别挑剔。您的结果可能（根据您之前的输出判断，可能*会*）有所不同。

注意：`(void*)`演员阵容`fpek = (void*)(array+i);`可能看起来很奇怪，但这是 C，所以我可以侥幸逃脱。我这样做的原因是为了让您演示​​其他浮点类型并查看它们是否有对齐限制。正如所写，您可以`fpek`将函数顶部的声明更改为`double`：

```
double *fpek = NULL; 
```

然后重新运行程序。在我的系统上，这会产生：

```
array = 0x7fff5fbff860, size=16
i = 0, fpek = 0x7fff5fbff860, *fpek = 10.00
i = 1, fpek = 0x7fff5fbff861, *fpek = 11.00
i = 2, fpek = 0x7fff5fbff862, *fpek = 12.00
i = 3, fpek = 0x7fff5fbff863, *fpek = 13.00
i = 4, fpek = 0x7fff5fbff864, *fpek = 14.00
i = 5, fpek = 0x7fff5fbff865, *fpek = 15.00
i = 6, fpek = 0x7fff5fbff866, *fpek = 16.00
i = 7, fpek = 0x7fff5fbff867, *fpek = 17.00 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T19:36:50.507

并非所有系统都可以对内存进行非对齐访问，例如旧的摩托罗拉 M68000 就无法做到这一点。发生这种情况时的典型错误是总线错误。然而，这些系统在今天变得不常见了，现代（而不是那么现代）的编译器应该能够正确处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T20:00:43.760

问题是您创建了一个 char 数组（分配的内存为 4 位）并将浮点指针指向数组的开头。您在将 10 添加到指针后尝试读取（因为指针来自 float 类型，它以 sizeof(float)*10 递增，并且这已经在数组之外。因此预计会产生错误。

尝试删除此行`*fpek = (float) i + 10;`。试试看。

另一件要改变的事情可能`fprintf(stderr, "*fpek = %.2f\n", *fpek);`是`fprintf(stderr, "*fpek = %c\n", *fpek);`*

# salesforce - 如何在 Force.com 中部署现有项目

> ID：14297158
> 
> 赞同：1
> 
> 时间：2013-01-12T19:35:15.517
> 
> 标签：salesforce, apex-code, visualforce

我正在使用 Eclipse IDE，我提供了一个包含代码的 src 文件夹，我必须将此代码保存到我的开发组织中。我如何尝试解决这个问题 1.首先我创建了一个 Force.com 项目 2.然后我复制给定的 src(Ctrl+c) 文件夹并粘贴(Ctrl+v) 到我在 Eclipse 3 中的项目中。我添加了元数据组件右键单击项目 Force.com >添加/删除元数据组件

4.然后我右键单击我的项目 Force.com >部署到服务器

我收到失败错误

# 部署结果：

文件名：applications/Rule.app 全名：规则操作：无操作结果：失败问题：在字段中：选项卡 - 找不到名为 Rule__c 的自定义选项卡

文件名：objects/RuleAction_ *c.object 全名：RuleAction* _c 操作：NO ACTION 结果：FAILED 问题：manageruleactions 不存在或不是操作编辑的有效覆盖。

文件名：pages/ManageRuleActions.page 全名：ManageRuleActions 操作：NO ACTION 结果：FAILED 问题：*SObject RuleAction* _c的 Notify_User_c 字段无效

谁能告诉一个合适的路径如何在开发组织中保存整个 src 文件夹代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T00:22:13.617

很难说具体的步骤。您必须在解决依赖关系的同时继续尝试。[当所有对象都相互引用时，如何部署 Force ID 应用程序](https://stackoverflow.com/questions/13919942/how-to-deploy-a-force-id-app-when-all-objects-are-referencing-each-other)是一个关于类似问题的问题。

第一个应该相当简单。你可能有`applications/Rule.app`，但看起来你不见了`tabs/Rule__c.tab`。最简单的方法是转到您的目标环境并使用 Setup -> Create -> Tabs 为该对象创建选项卡。然后应用程序部署应该可以工作，如果您愿意 - 您可以稍后下载选项卡定义文件。

接下来的两个 - 尝试启动一个同时推送两者的`objects/RuleAction__c.object`部署`pages/ManageRuleActions.page`。如果它仍然不起作用 - 像我对这个类似问题的回答一样拆分您的操作（暂时注释掉 VF 页面的正文或从目标文件中删除编辑操作覆盖定义）。

# html - wxEasyHTMLPrinting html 支持

> ID：14297163
> 
> 赞同：0
> 
> 时间：2013-01-12T19:35:48.027
> 
> 标签：html, printing, wxpython

我目前正在开发一些简单的发票生成器应用程序，但我被困在打印上。我阅读了有关打印的信息，`wxPython`但对于我的目的而言，一切看起来都不必要的复杂。所以我找到了一些关于的东西`wxEasyHTMLPrinting`，看起来非常好，但是我找不到支持哪些 html 功能。那么你能给我指出一些关于它的信息吗？是否支持 css（一些基本样式）？

我无法找到一些更复杂的例子，因为这个[http://wiki.wxpython.org/Printing](http://wiki.wxpython.org/Printing) :( 感谢您的帮助 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:52:40.573

我查看了 wx.HTMLEasyPrinting，但发现它既过于简单又难以使用。可能只是我。

但相反，我开发了一个像 Crystal Reports 这样的带状报表编写器，它结合了从 cur.fetchall() 获得的数据和基于 xml 的报表表单文件并输出 PDF。您可以获取该 PDF 并进行预览、发送电子邮件、传真或打印，所有这些都使用代码。

如果您有兴趣，它是一个名为 Dabo 的更大框架的一部分。甚至还有一个示例发票报告可以帮助您入门。[http://dabodev.com](http://dabodev.com)或[https://github.com/dabodev/dabo](https://github.com/dabodev/dabo)

# c - 在非常小的代码片段中寻找 SEGFAULT 原因

> ID：14297164
> 
> 赞同：0
> 
> 时间：2013-01-12T19:35:48.490
> 
> 标签：c

简而言之，我正在为基本数据库编写真正原始的单链表实现。当用户请求打印索引下列出的元素高于当前数据库中的记录数量时，我不断收到段错误，但只有当差异为 1 时。对于更高的数字，它只会触发我在那里编写的错误系统。

代码是：

```
void print_spec(List* head)
{
int index, i, is_correct=1;
List * current=NULL; //List is typedef'ed structure consisting variables for data and pointer assumed to be bound to next element in list
printf("\nInput the element index: ");
scanf("%d", &index);
if(head!=NULL) 
{
    current=head;
    for (i=0; i<index; i++) 
    {
        if(current==NULL) 
        {
            printf("There is no such element");
            is_correct=0;
            break;
        }
        else current=current->next;
        }
    if(is_correct!=0) print(current); //this function simply prints out variables from element
}
else printf("List is empty, can't print");
} 
```

我想有一个小错误，但正如我在主题中提到的，我现在正在搜索它大约 4 个小时，考虑到循环计数器中可能的范围超出，我花了 2 个小时在试错法上，但没有收到正确的结果.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:42:29.890

您的循环可能会退出，因为`i==index`while `current==NULL`。 `is_correct`在这种情况下永远不会设置，并且您的程序在尝试打印 NULL 列表元素时可能会失败。您可以通过将代码更改为类似的方式来避免这种情况并简化循环

```
for (i=0; i<index && current!=NULL; i++) 
{
    current=current->next;
}
if (current != NULL)
    print(current); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T19:49:04.233

## UPDATED

In the original code above, replace:

```
if(is_correct!=0) print(current); 
```

with

```
if(is_correct!=0 && current != NULL)
    print(current);
else
    printf("Trying to print null List entry\n"); 
```

* * *

Suppose you have 10 entries in the list and the index happens to be 11.
Then here is what happens at i = 10:

```
for (i=0; i<index; i++) // i(10) < index(11)
{
    if(current==NULL) // not true as you have a 10th element
    {
        printf("There is no such element");
        is_correct=0;
        break;
    }
    else current=current->next; // current is now NULL as there is no 11th element
}
if(is_correct!=0) print(current); // crash, trying to print NULL 
```

# c - 如何从 C 函数中创建数组返回类型？

> ID：14297169
> 
> 赞同：17
> 
> 时间：2013-01-12T19:36:33.593
> 
> 标签：c

我试图返回数组名称，如下所示。基本上我试图让函数测试返回一个可以在main中使用的数组。你能告诉我我需要阅读更多内容以了解如何执行这样的功能吗？

```
#include <stdio.h>

int test(int size, int x){
    int factorFunction[size];    
    factorFunction[0] = 5 + x;
    factorFunction[1] = 7 + x;
    factorFunction[2] = 9 + x;
    return factorFunction;
}

int main(void){
    int factors[2];
    factors = test(2, 3);
    printf("%d", factors[1]);
    return 0;
} 
```

我收到编译器错误：

```
smallestMultiple.c:8: warning: return makes integer from pointer without a cast
smallestMultiple.c:8: warning: function returns address of local variable
smallestMultiple.c: In function ‘main’:
smallestMultiple.c:13: error: incompatible types in assignment 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-12T19:38:57.023

函数不能在 C 中返回数组。

但是，它们可以返回结构。结构可以包含数组...

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-12T19:42:17.517

您可以通过返回指针来返回数组（数组衰减为指针）。但是，在您的情况下这会很糟糕，因为您将返回一个指向局部变量的指针，这会导致未定义的行为。这是因为返回的指针指向的内存在函数返回后不再有效，因为堆栈空间现在被其他函数重用。

您应该做的是将数组及其大小都作为参数传递给函数。

您的代码中还有另一个问题，那就是您使用了一个大小为 2 的数组，但写入了*第三个*元素。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-12T19:40:15.140

您将需要在堆上分配内存并返回一个指针。C 不能从函数返回数组。

```
int* test(int size, int x)
{
    int* factorFunction = malloc(sizeof(int) * size);    
    factorFunction[0] = 5 + x;
    factorFunction[1] = 7 + x;
    factorFunction[2] = 9 + x;
    return factorFunction;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-12T19:41:03.413

错误消息的第一行正是它所说的：您已将函数声明为返回一个`int`，但您尝试返回一个指针。
更大的问题（正如错误消息的第二行告诉您的那样）是您尝试返回指针的数组是本地数组，因此当函数返回并且不再有效时将超出范围。你应该做的是使用or
动态分配一个数组（即一块连续的内存）并返回一个指向它的指针。当然，请确保在完成后释放内存。`malloc``new`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-08-27T17:21:36.183

不幸的是，C 不支持从函数返回任意数组或匿名结构，但有两种解决方法。

第一个解决方法是创建一个包含数组的结构。它将具有与数组相同的大小，在堆栈上分配以确保空间局部性。

例如

```
typedef struct {
    int arr[5];
} my_array1;

typedef struct {
    int values[3];
} factorFunctionReturnType_t; 
```

第二种解决方法是发明一个静态内存池（例如，仅针对该数组具有自定义 malloc/free 的数组），这将有效地允许您从该池中动态分配内存，再次有效地返回一个指向连续堆栈空间的指针，这根据定义是一个数组。

例如

```
#include <stdint.h>
static uint8_t static_pool[2048]; 
```

然后实现管理这个特定内存池的 my_alloc、my_free，再次确保创建的内存在堆栈上，并且内存已经由您的应用程序先验拥有（而 malloc 可能会分配以前应用程序无法访问的内存，或者如果内存不足则崩溃并且没有检查失败返回）。

第三种解决方法是让函数将局部变量返回给回调函数；这确保一旦函数完成，您可以使用结果而不会破坏堆栈，因为使用内存的函数将位于包含堆栈的范围之上。

```
#include <stdint.h>
#include <stdio.h>

void returnsAnArray(void (*accept)(void *)) {
    char result[] = "Hello, World!";    

    accept(result);
}

void on_accept(void *result) {
    puts((char *)result);
}

int main(int argc, char **argv)
{
    returnsAnArray(on_accept);

    return 0;
} 
```

这比非堆栈式内存池更有效，后者需要做出决策以避免碎片，比堆栈式内存池更有效，后者只需将结果放在堆栈顶部，因为它不需要复制字符串，等等线程安全，因为函数的返回值不会被另一个线程覆盖（除非使用了锁）。

有趣的是，所有“函数式编程范例”程序最终都强调您可以通过链接回调函数来编写没有任何 malloc 的 C 程序，从而有效地在堆栈上分配。

这有一个有趣的副作用，使链表不再缓存恶意（因为分配在堆栈上的回调链表都将在堆栈上彼此靠近，这使您可以在没有任何 malloc 的情况下执行运行时字符串操作等操作，并让你建立了未知大小的用户输入，而不做任何 malloc。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-11-02T10:23:23.330

C 不提倡将局部变量的地址返回到函数外部，因此您必须将局部变量定义为静态变量。

```
#include <stdio.h>

/* function to generate and return random numbers */
int * getRandom( ) {

   static int  r[10];
   int i;

   /* set the seed */
   srand( (unsigned)time( NULL ) );

   for ( i = 0; i < 10; ++i) {
      r[i] = rand();
      printf( "r[%d] = %d\n", i, r[i]);
   }

   return r;
}

/* main function to call above defined function */
int main () {

   /* a pointer to an int */
   int *p;
   int i;

   p = getRandom();

   for ( i = 0; i < 10; i++ ) {
      printf( "*(p + %d) : %d\n", i, *(p + i));
   }

   return 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-12T19:45:38.847

```
#include <stdio.h>

#include <stdlib.h>

int* test(int size, int x){
    int *factorFunction = (int *) malloc(sizeof(int) * size);    
    if( factorFunction != NULL ) //makes sure malloc was successful
    {
        factorFunction[0] = 5 + x;
        factorFunction[1] = 7 + x;
        factorFunction[2] = 9 + x; //this line won't work because your array is only 2 ints long

    }
return factorFunction;
}

int main(void){
    int *factors;
    factors = test(2, 3);
    printf("%d", factors[1]);
    //just remember to free the variable back to the heap when you're done
    free(factors);
    return 0;
} 
```

you also might want to make sure that the indexes you are setting actually exist in your array as I've noted above

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-12T19:45:39.830

Firstly, Unless you have C99 which has [VLA](https://en.wikipedia.org/wiki/Variable-length_array)s, the array size should be constant in C. You can not use the statement below:

```
int factorFunction[size]; 
```

Secondly, you are trying to return an array created in the function which will be deleted out of the scope.

To avoid this, you can take an array as parameter in test function or create an array dynamically with `malloc` function. Btw your `test` function can return pointer to updated array.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-12T20:05:02.123

我的建议是传入一个数组来填写：

```
void test(int size, int factors[], int x){
    factorFunction[0] = 5 + x;
    factorFunction[1] = 7 + x;
    factorFunction[2] = 9 + x;
}

int main(void){
    int factors[3];
    test(3, factors, 3);
    printf("%d", factors[1]);
    return 0;
} 
```

使用这种方法，您不必担心分配，以后也无需释放数组。

我还修正了数组的大小，所以你不要用第三个元素在它之外写。请记住，C 数组是用“你想要多少”声明的，然后从 开始索引`0 ... (how_many-1)`，所以`[2]`用声明的数组`[2]`在数组之外。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-29T15:53:24.480

首先，您不能直接从 C 中的函数返回数组。您可以做的是，您可以在该函数中返回数组的地址。在这种情况下，该函数将如下所示：

```
int* test(int size, int x){

    /* function body */

    return factorFunction;
} 
```

要接收数组，您将需要一个指针 - 而不是数组。

所以，`int factors[2];`你必须`int *factors;`在你的`main`函数中使用，而不是使用。

其次，即使你返回数组的地址，这段代码也不行；因为您试图返回本地数组的地址；函数执行后将不存在。解决此问题的一种简单方法是将本地数组（`factorFunction`在本例中）声明为静态的。

考虑到这两个问题，函数`test`将如下所示：

```
int* test(int size, int x){

    static int factorFunction[size];

    /* function body */

    return factorFunction;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-21T13:57:48.823

这是传回数组的另一种方法：

```
 int test(){
        static int factorFunction[3];    
        factorFunction[0] = 5 + x;
        factorFunction[1] = 7 + x;
        factorFunction[2] = 9 + x;
        return factorFunction;
    } 
```

静态表示变量将以保留在内存中的方式分配。因此，如果您有一个固定大小的值并希望它在函数调用之间保留在内存中，这是一种方法。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-02-07T11:46:32.943

```
 // example for to create a array in function and it return using pointer
  //if you want use malloc use header #include <stdlib.h>
      int * printsquares(int a[],int size){  //to declare aa function

      int* e = malloc(sizeof(int) * size);  //to create array using malloc
       for(int i=0;i<size;i++){    
             e[i]=i*i;       //assign the square root values
      }

   return e;

 } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-12-15T12:08:03.127

要记住两点：

1.  如果要从函数返回一维数组，则必须声明一个返回指针的函数。

2.  C 不提倡将局部变量的地址返回到函数外部，因此您必须将局部变量定义为静态变量。

参考这个链接： [https ://www.tutorialspoint.com/cprogramming/c_return_arrays_from_function.htm](https://www.tutorialspoint.com/cprogramming/c_return_arrays_from_function.htm)

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2015-01-29T11:19:26.040

> 关于如何将数组从用户定义的函数返回到主函数的非常基本的代码解释希望它有所帮助。下面，我写了一个完整的代码来制作。请原谅 c++ 语言，但是如果您需要 c 程序，请随时发表评论

```
#include<iostream>
using namespace std;

int * function_Random()// function with returning pointer type of integer
{
     static int arr[100];
     cout<<"We are Inside FunctionRandom"<<endl;
    for(int i=0;i<100;i++)//loop to add elements in array
    {
        arr[i]=rand();//rand() function to put random numbers generated by system
        cout<<"\t"<<arr[i]; //to show how our array will look
    }
    cout<<endl<<endl;//endl for end line to look well formatted 
    return arr;
}
int main()
{

    int *arrptr; //pointer to get back base address of array
    arrptr=function_Random();//function that returns base address
    cout<<"We are Inside Main"<<endl;
    for(int j=0;j<100;j++)
    {
         cout<<"\t"<<arrptr[j];//returned base address has complete link of array that's why it is able to print the array:contiguous memory locations.
    }       
    return 0;//nothing to return that's why 0
} 
```

# android - 如何使用 Android SQLite DB 在 iOS 中填充 CoreData？

> ID：14297174
> 
> 赞同：1
> 
> 时间：2013-01-12T19:36:54.377
> 
> 标签：android, ios, core-data, sqlite

所以基本上我在现有的 Android 应用程序中有很多静态数据，我正在尝试在 iOS 中制作一个使用 Core Data 的应用程序版本。

我想知道如何使用现有的 Android DB 文件并以编程方式迁移数据。

如果可能的话，我真的很想远离 iOS 中的 sqlite3 东西。

请让我知道这是否可能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:07:01.447

对此没有简单的、一刀切的方法。一般来说，这些是您需要遵循的步骤：

1.  识别现有数据库中表示的实体
2.  识别它们与其他实体的关系以及它们的属性（这些可能分别是数据库中的外键和普通列）。
3.  创建与您已识别的实体、关系和属性相对应的核心数据模型。
4.  使用 iOS 上的 SQLite 库，编写代码来查询您的数据库。使用数据库查询的结果来实例化`NSManagedObject`s 并填充您之前确定的属性和关系。

不幸的是，没有办法避免编写一些代码来与现有数据库进行交互。如果您希望避免为此编写 C 代码，您可以查看一个 Objective-C 库，该库为更面向对象的 SQLite 例程提供接口，称为[FMDB](https://github.com/ccgus/fmdb)。

# android - 设置操作栏标题和副标题

> ID：14297178
> 
> 赞同：67
> 
> 时间：2013-01-12T19:37:20.987
> 
> 标签：android, android-layout, android-widget

我想在编译之前设置我的操作栏的标题和副标题。我有办法做到这一点：

```
ActionBar ab = getActionBar();
ab.setTitle("My Title");
ab.setSubtitle("sub-title"); 
```

但我不想在运行时这样做。是否有任何 xml 文件或我可以指定这些标题的任何位置？

我正在努力实现这一目标：

![在此处输入图像描述](../Images/205e861ae28897a9c1ec95b3aa978522.png)

## 编辑：

我希望它在 xml 中的原因是我希望我的应用程序在 API 级别 8 中得到支持。并且方法 getActionBar() 至少在级别 11 上受支持。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-01-12T20:42:43.653

您可以执行以下操作来为这两个版本编写代码：

```
/**
 * Sets the Action Bar for new Android versions.
 */
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
private void actionBarSetup() {
  if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    ActionBar ab = getActionBar();
    ab.setTitle("My Title");
    ab.setSubtitle("sub-title"); 
  }
} 
```

然后打`actionBarSetup()`进来`onCreate()`。仅在新的`if`Android 版本上运行代码，并且`@TargetApi`允许代码编译。因此，它对新旧 API 版本都是安全的。

或者，您也可以使用[ActionBarSherlock](http://actionbarsherlock.com/)（*请参阅编辑*），这样您就可以在所有版本上使用 ActionBar。您将不得不做一些更改，例如让您的活动扩展`SherlockActivity`和调用`getSupportActionBar()`，但是，这是一个非常好的全局解决方案。

## **编辑**

请注意，最初编写此答案时`ActionBarSherlock`，已*弃用*的 是首选兼容性解决方案。

如今，[Google 的`appcompat-v7`库](https://developer.android.com/tools/support-library/features.html)提供了相同的功能，但由 Google 支持（并积极更新）。想要实施[`ActionBar`](https://developer.android.com/reference/android/support/v7/app/ActionBar.html)必须的活动：

*   延长`AppCompatActivity`
*   使用`Theme.AppCompat`衍生物

`ActionBar`要使用此库获取实例，请使用恰当命名的`getSupportActionBar()`方法。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-12T21:45:13.757

操作栏的标题可以在 AndroidManifest 中，这里：

```
<activity 
    . . .
          android:label="string resource" 
    . . .
</activity> 
```

> **android:label** 活动的用户可读标签。当必须向用户表示活动时，标签会显示在屏幕上。它通常与活动图标一起显示。如果未设置此属性，则使用为整个应用程序设置的标签（请参阅元素的标签属性）。活动的标签（无论是在此处设置还是由元素设置）也是所有活动的意图过滤器的默认标签（请参阅元素的标签属性）。标签应设置为对字符串资源的引用，以便它可以像用户界面中的其他字符串一样本地化。但是，为了方便您开发应用程序，也可以将其设置为原始字符串。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-12-01T08:48:26.530

试试这个：

```
android.support.v7.app.ActionBar ab = getSupportActionBar();
ab.setTitle("This is Title");
ab.setSubtitle("This is Subtitle"); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-12-29T13:59:02.143

还有另一个没有人评论的选项，来自支持库 V7 是由 Google 实现的`ActionBarSupport`，它`ActionBar`与 Android 2.2 兼容。
如果您更改`ActionBar`此设置，您可以`getSupportActionBar().setTitle("")`在所有 Android 版本上执行此操作。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-12T19:51:28.783

没有！您必须在运行时执行此操作。

如果你想让你的应用向后兼容，那么只需检查设备 API 级别。如果高于11，那么你可以摆弄ActionBar并设置字幕。

```
if(Integer.valueOf(android.os.Build.VERSION.SDK) >= 11){
    //set actionbar title
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-06-04T11:50:44.643

```
supportActionBar?.title = "Hola tio"
supportActionBar?.subtitle = "Vamos colega!" 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-04-20T06:41:12.790

```
 <activity android:name=".yourActivity" android:label="@string/yourText" /> 
```

将此代码放入您的 android 清单文件中，它应该将操作栏的标题设置为您想要的任何内容！

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-12-24T08:00:31.603

**尝试这个**

只需转到您的清单文件。并且您已经在清单文件中定义了每个活动的标签。

```
<activity
        android:name=".Search_Video"
        android:label="@string/app_name"
        android:screenOrientation="portrait">
    </activity> 
```

这里改变

android:label="@string/your_title"

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-01-12T19:57:13.947

尝试这个：

在 strings.xml 添加您的标题和副标题...

```
ActionBar ab = getActionBar();
ab.setTitle(getResources().getString(R.string.myTitle));
ab.setSubtitle(getResources().getString(R.string.mySubTitle)); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-08-20T18:00:46.280

这是 Kotlin 中微不足道的单行代码

`supportActionBar?.title = getString(R.string.coolTitle)`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-05-09T21:25:06.257

对于活动，您可以使用此方法在清单中指定副标题以及标题。

**显现：**

```
<activity
    android:name=".MyActivity"
    android:label="@string/my_title"
    android:description="@string/my_subtitle">
</activity> 
```

**活动：**

```
try {
    ActivityInfo activityInfo = getPackageManager().getActivityInfo(getComponentName(), PackageManager.GET_META_DATA);
    //String title = activityInfo.loadLabel(getPackageManager()).toString();
    int descriptionResId = activityInfo.descriptionRes;
    if (descriptionResId != 0) {
        toolbar.setSubtitle(Utilities.fromHtml(getString(descriptionResId)));
    }
}
catch(Exception e) {
    Log.e(LOG_TAG, "Could not get description/subtitle from manifest", e);
} 
```

这样，您只需要指定一次标题字符串，就可以在它旁边指定字幕。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-05-26T06:29:20.073

您可以使用在操作栏中设置标题`AndroidManifest.xml`。将标签添加到`activity`

```
<activity
            android:name=".YourActivity"
            android:label="Your Title" /> 
```

# cordova - 手机应用phonegap飞行模式/报警控制？

> ID：14297182
> 
> 赞同：0
> 
> 时间：2013-01-12T19:37:56.807
> 
> 标签：cordova, mobile

是否可以在 phonegap 中做一个移动应用程序，从在线 API 检索日历条目，并根据日历条目，它会在日历条目前几小时设置警报，然后自动进入飞行模式？

它是飞行员的基本应用程序，但对移动应用程序来说有点新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:33:24.313

由于 PhoneGap 允许您向[现有项目添加插件，](http://docs.phonegap.com/en/2.2.0/guide_plugin-development_index.md.html)因此您可以在基于 Objective C 的原生应用程序中做任何您可以做的事情。但是PhoneGap背后的想法是编写一次并部署在多个设备上，如果您要为iOS定制应用程序，那么您不妨编写一个实际的iOS应用程序。

# c++ - 按字典顺序比较字符串

> ID：14297185
> 
> 赞同：27
> 
> 时间：2013-01-12T19:38:20.423
> 
> 标签：c++, string, compare

我认为如果我在 C++ 中使用诸如“>”和“<”之类的运算符来比较字符串，这些会按字典顺序比较它们，问题是这有时只在我的计算机中有效。例如

```
if("aa" > "bz") cout<<"Yes"; 
```

这不会打印任何内容，这就是我需要的，但是如果我输入

```
if("aa" > "bzaa") cout<<"Yes"; 
```

这将打印“是”，为什么会这样？或者我应该使用其他方法来按字典顺序比较字符串？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-12T19:39:36.787

像这样比较`std::string`-s**会**起作用。但是，您正在比较字符串文字。要进行比较，您需要使用它们初始化 std::string 或使用 strcmp：

```
if(std::string("aa") > std::string("bz")) cout<<"Yes"; 
```

这是c ++风格的解决方案。

或者：

```
if(strcmp("aa", "bz") > 0) cout<<"Yes"; 
```

编辑（感谢康拉德鲁道夫的评论）：事实上，在第一个版本中，只有一个操作数应该被显式转换，所以：

```
if(std::string("aa") > "bz") cout<<"Yes"; 
```

将再次按预期工作。

编辑（感谢 churill 的评论）：因为 c++14 你可以使用字符串文字：

```
if("aa"s > "bz") cout<<"Yes"; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-12T20:04:23.770

您正在比较类型为 的“原始”字符串`char const *`。

以下基本上等同于您的示例：

```
char const * s1 = "aa";
char const * s2 = "bz";
if ( s1 > s2 ) cout<<"Yes"; 
```

这是比较指针（字符串的内存地址），而不是内容。

@izomorphius 提出了一些好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-24T20:23:21.543

您可以使用`strcmp()`包含在`#include <cstring>`头文件中的函数。`strcmp()`逐个字符比较两个字符串。该过程将继续，直到达到`NULL`或其中一个字符串变得不相等（字符变得不相等）。例如：

```
#include <iostream>
#include <cstring>

void display(char *lhs, char *rhs, int result)
{
    if(result > 0)
        std::cout << rhs << " precedes " << lhs << std::endl;
    else if (result < 0)
        std::cout << lhs << " precedes " << rhs << std::endl;
    else
        std::cout << lhs << " and " << rhs << " are same" << std::endl;
}

int main()
{
    char lhs[] = "aa";
    char rhs[] = "bz";
    int result;

    result = strcmp(lhs,rhs);
    display(lhs,rhs,result);

    result = strcmp(lhs,lhs);
    display(lhs,lhs,result);

    return 0;
} 
```

输出：

```
aa precedes bz
aa and aa are same 
```

# java - 使用 Gson 从 json 输出中检索的数据保存到数组中

> ID：14297190
> 
> 赞同：0
> 
> 时间：2013-01-12T19:38:48.177
> 
> 标签：java

我正在构建一个安静的 Web 服务以及一个使用 Web 服务的 Java 客户端。服务器发送给客户端的响应是 json 格式的。我想将json字符串中的属性和数据存储到一个数组中，这样我就可以使用这些数据来构建一些客户端操作。假设我有我有一系列产品。其余服务器的输出采用这种格式，我只是将它放在一个字符串变量中：

```
String output="{"product":[{"code":"7","name":"book","value":"4.0"},{"code":"3","name":"pen","value":"4.5"},{"code":"9","name":"pencil","value":"5.5"}]}" 
```

我试图将 json 对象转换为 Product 类型的 java 对象

```
Gson gson = new GsonBuilder().serializeNulls().create();
Product product= gson.fromJson(output,Product.class);
System.out.println(product); 
```

输出是：

```
product:[product:null,name:book,code:7,value:4,000000,       
product:null,name:pen,code:3,value:4,500000,  
product:null,name:pencil,code:9,value:5,500000],name:null,code:null,value:null 
```

当我

```
System.out.println(product.product); 
```

输出是：

```
[product:null,name:book,code:7,value:4,000000,     
product:null,name:pen,code:3,value:4,500000,   
product:null,name:pencil,code:9,value:5,500000] 
```

第一个问题：我不知道为什么会出现空值，也找不到解决此问题的方法。

第二个问题：我已经搜索了几天，但我真的找不到将这些数据保存到数组或列表中的方法。我不想将它们保存在 java Products 对象中。我想要做的是将所有属性放在一起，例如所有值的数组，或者名称或所有产品。

```
Something like this I have in mind:

String[] names=["book","pen","pencil"];
Integer[] codes=[7,3,9];
Double[] values=[4.0,4.5,5.5]; 
```

第三个问题：我应该在服务器端进行这些操作（例如计算总值）吗？这会是更好的方法吗？

第四个问题：需要在Client中复制Products类吗？这就是我不确定 CRUD 之外的操作是否绝对应该在客户端的原因。

产品类别：

```
class Product  {

public String name;
public Integer code;
public Double value;
public List<Product> product;

public String getName()
{
    return name;
}

public void setName(String name)
{
    this.name=name;
}

public Integer getCode()
{
    return code;
}

public void setCode(Integer code)
{
    this.code=code;
}

public Double getValue()
{
    return value;
}

public void setValue(Double value)
{
    this.value=value;
}
public List<Product> getProduct() 
{ 
    return product; 
}
 public void setProduct(List<Product> order) 
 { 
     this.product = product; 
 }
@Override
public String toString() {
 return    String.format("product:%s,name:%s,code:%d,value:%f",product,name,code,value);
      }
} 
```

我正在使用 Gson 库，因为它似乎是最简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:45:42.170

First, the appearance of the "null" values: That is probably due to the way your toString() method works. Just check what it does. If you append a null to a String, it will be printed as literal "null". Secondly, why don't you want to store your products as Product objects on the client? That's pretty much what object oriented programming is all about, keeping stuff together that belongs together. Just put them all in a Collection and define your methods for iterating over that Collection to get out all the prices, names and whatnot that you need or do whatever you need to do with your products. I see no good reason not to have the Product class in the client. Or rather use a shared project for client and server that contains the class, so you can use it in both wothout having to worry about keeping it in sync.

Your JSON String contains a list, but you try to retrieve a single object. Try this:

```
final List<Product> products = new Gson().fromJson(jsonString,
new TypeToken<Collection<Product>>() {
            }.getType()); 
```

Then you should be able to iterate over the result, e.g. like this:

```
double totalValue=0; 
for (Product product:products) {
    totalValue+=product.getValue();
} 
```

# php - PHP表行中的unix时间到正常时间

> ID：14297194
> 
> 赞同：0
> 
> 时间：2013-01-12T19:39:25.333
> 
> 标签：php, html, unix-timestamp

我从下拉列表中查找 php。这将查找对特定员工考勤卡的更改并返回到表格。效果很好，但我无法从第 2 行、第 5 行和第 7 行返回结果以显示实时而不是 unix 时间，2 是生效日期，5 是请求日期，7 是批准/更改日期。这是我正在使用的代码。

```
<table border="1" width="75%" cellpadding="2" cellspacing="0">
<tr>
<td align="center">Date Effected</td>
<td align="center">Status requested</td>
<td align="center">Requested by</td>
<td align="center">Date requested</td>
<td align="center">Amended by</td>
<td align="center">Date amended</td>
</tr>
<?php
$host = "host";
$user = "USER";
$pass = "PWORD";
$dbname = "DB";
$loc = $fgmembersite->UserLocation();
$term = $_GET['button'];
$connection = mysql_connect($host,$user,$pass) or die (mysql_errno().":    ".mysql_error()."<BR>");
mysql_select_db($dbname);
$query= "select * from $loc where User_id=$term";
$result = mysql_query($query) or die('Query failed: ' . mysql_error());
while ($line = mysql_fetch_row($result) )
{
echo '<tr>';
echo '<td align="center">'.$line[2].'</td>';
echo '<td align="center">'.$line[3].'</td>';
echo '<td align="center">'.$line[4].'</td>';
echo '<td align="center">'.$line[5].'</td>';
echo '<td align="center">'.$line[6].'</td>';
echo '<td align="center">'.$line[7].'</td>';
echo '</tr>';
}
?>
</table> 
```

任何帮助都感激地恢复了。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:46:51.450

Did I misunderstand or are you looking for the Date function? If so, try this:

```
while ($line = mysql_fetch_row($result) )
{
echo '<tr>';
echo '<td align="center">'.date("d-m-Y", $line[2]).'</td>';
echo '<td align="center">'.$line[3].'</td>';
echo '<td align="center">'.$line[4].'</td>';
echo '<td align="center">'.date("d-m-Y", $line[5]).'</td>';
echo '<td align="center">'.$line[6].'</td>';
echo '<td align="center">'.date("d-m-Y",$line[7]).'</td>';
echo '</tr>';
} 
```

The function is documented here: [http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T19:50:00.060

您可以在 PHP 级别或 MySQL 级别上执行此操作

在 PHP 中，您可以使用从格式创建日期，PHP 中的[DateTime](http://php.net/manual/en/class.datetime.php)类非常方便/灵活

```
// add this function to your script
function convertUnixTime($timeStamp) {
    $date = date_create_from_format('U', $timeStamp);

    // check the php docs for different ways you can format dates
    return date_format($date, 'm-d-Y');
}

// then update your echo statements 
echo '<td align="center">'.convertUnixTime($line[7]).'</td>'; 
```

有关更多信息，请参阅[DateTime->format 文档](http://php.net/manual/en/datetime.format.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T19:42:11.370

首先，停止使用`mysql_`函数。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](http://j.mp/Te9zIL)了吗？了解[*准备好的语句*](http://j.mp/T9hLWi)，因为您的代码容易受到 SQL 注入的影响并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](http://j.mp/QEx8IB)将帮助您确定哪个。

如果我理解正确，您将日期存储为 unix 时间戳并需要对其进行转换。它可以用 MySQL 或 PHP 来完成。

使用 MySQL，您可以使用`FROM_UNIXTIME()`.

> ```
> mysql> SELECT FROM_UNIXTIME(1196440219);
>     -> '2007-11-30 10:30:19' 
> ```

[手动的](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)

使用 PHP，您可以使用`date`.

> ```
> echo date("F j", 1196440219);
>    //November 30 
> ```

[手动的](http://php.net/manual/en/function.date.php)

我还建议您在查询中指定一个列列表，并使用这些列而不是索引值。

# html - 使用margin 0px auto在浏览器窗口中的div标签中心

> ID：14297195
> 
> 赞同：1
> 
> 时间：2013-01-12T19:39:28.983
> 
> 标签：html, css

我无法让这个 div 容器在浏览器页面中水平居中...

这是我的代码。

HTML

```
<div class="copyrightposition clearfix">
                <p class="copyright clearfix">copyright2013 Rachael 
    Stetson Design Inc.</p>
                <p class="copyright clearfix">|</p>
                <p class="copyright 
    clearfix">www.rachaelstetson.com</p>
                </div> 
```

CSS

```
.copyrightposition {
position: relative;
float: left;
margin: 0px auto 0px auto;
}
.copyright {
position: relative;
float: left;
font-size: 65%;
padding-right: 10px;
text-transform: uppercase;
letter-spacing: 0.19em;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:42:28.680

边距：0 自动；仅适用于具有设定宽度的元素并且它们不能浮动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:01:50.930

我已经编辑了你的代码。看到这个[jsFiddle](http://jsfiddle.net/DFrYF/)。

我用过`text-align:center`。

HTML

```
<div class="copyrightposition clearfix">
  <p class="copyright clearfix">copyright &copy lorem ipsum |  www.rachaelstetson.com</p>
</div> 
```

CSS

```
.copyrightposition {
  text-align: center;
}
.copyright {
  font-size: 65%;
  padding-right: 10px;
  text-transform: uppercase;
  letter-spacing: 0.19em;
} 
```

# windows-phone-7 - 如何在 Windows Phone 中禁用灯光模式

> ID：14297198
> 
> 赞同：1
> 
> 时间：2013-01-12T19:39:38.780
> 
> 标签：windows-phone-7

如何在 Windows Phone 中禁用灯光模式。我不喜欢有人会在我的申请中改变颜色，然后在证明中写下他什么都看不到的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:38:52.617

当然，您也不需要使用系统样式，而是使用您自己想要的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:25:21.980

您不能禁用浅色或深色模式。您需要使用这两个主题测试您的应用程序，因为这是一个认证要求。

# android - Windows Phone 8 和 Android 可以通过 Wifi Direct 连接吗？

> ID：14297199
> 
> 赞同：5
> 
> 时间：2013-01-12T19:39:45.550
> 
> 标签：android, windows-phone, windows-phone-8, wifi-direct

我正在开发一个多平台多人游戏应用程序，并希望能够将玩家彼此联系起来。为避免可能的延迟问题（以及对服务器的需求），我想使用 Wifi Direct 将播放器彼此连接起来。

Windows Phone 8 和 Android 现在似乎都支持 WiFi Direct，但它们可以相互连接吗？

理想情况下，我希望玩家能够决定他们是托管还是加入游戏，然后接受连接或相应地查看托管游戏的玩家列表。（游戏加入者将无法看到对方）

Android 在这里有一些文档[https://developer.android.com/training/connect-devices-wireless/nsd-wifi-direct.html](https://developer.android.com/training/connect-devices-wirelessly/nsd-wifi-direct.html)看起来像我需要的。

Windows Phone 在这里有一些文档[http://msdn.microsoft.com/en-gb/library/windows/apps/windows.networking.proximity.peerfinder](http://msdn.microsoft.com/en-gb/library/windows/apps/windows.networking.proximity.peerfinder)但我仍然不确定它是否支持 Wifi Direct（而不仅仅是蓝牙）而且看起来它不会允许我托管网络服务。

即使 Windows Phone 支持 WiFi Direct，它是否与 Android 的实现兼容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T19:56:46.140

Windows Phone 8 不支持来自 WP8 SDK 的 WiFi 直接通信。

# python - python 3中的字符编码转换

> ID：14297204
> 
> 赞同：3
> 
> 时间：2013-01-12T19:40:05.490
> 
> 标签：python, character-encoding, python-3.x

在 python 2.x 中，我使用过

```
"shift-jis".decode('shift-jis').encode('utf-8') 
```

但在 python 3.x 中没有更多的 str.decode()。python 3.x中的等效代码是什么？

更新 ：

更详细：

python2函数是

```
def unzip(file, dir):
    zips = zipfile.ZipFile(file)
    for info in zips.infolist():
        info.filename = info.filename.decode('shift-jis').encode('utf-8')
        zips.extract(info,dir)

        print(info, filename) 
```

这个函数的等效 python3 代码是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T20:18:09.513

对于您更新的问题：

```
def unzip(file, directory): # dir is a keyword
    with zipfile.ZipFile(file, mode='r') as zips:
        zips.printdir()
        zips.extractall(directory) 
```

.

```
>>> b'\x82\xb3'.decode('shiftjis')
'さ'
>>> b'\x82\xb3'.decode('shift-jis')
'さ'
>>> b'\x82\xb3'.decode('shift_jis')
'さ'
>>> '日本語'.encode('shiftjis')
b'\x93\xfa\x96{\x8c\xea'
>>> b'\x93\xfa\x96{\x8c\xea'.decode('shiftjis')
'日本語' 
```

和读取文件时：

```
with open('shiftjis.txt', 'r', encoding='shiftjis') as file:
    # do something with it 
```

阅读更多：[http ://docs.python.org/3.3/library/io.html#io-base-classes](http://docs.python.org/3.3/library/io.html#i-o-base-classes)

一个不太理智的版本：

```
with open('shiftjis.txt', 'rb') as file:
    string = file.read().decode('shift-jis') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T04:21:16.750

我需要自己做这件事，而天真的做法是：

```
def unzip(file, dir):
    zips = zipfile.ZipFile(file)
    for info in zips.infolist():
        info.filename = info.filename.encode("cp437").decode("shift-jis")
    print("Extracting: " + info.filename.encode(sys.stdout.encoding,errors='replace').decode(sys.stdout.encoding))
    zips.extract(info,dir)
    print("") 
```

`ZipFile`似乎在内部将所有文件名视为 DOS（代码页 437）。与 Python 2 不同，Python 3 在内部将所有字符串存储为某种 UTF。因此，我们将文件名转换为字节数组，并将原始字节字符串解码为 shift-JIS 以得到最终文件名。

该`print`行做类似的事情，但默认编码`stdout`和返回。这可以防止在 Windows 上发生错误，因为它的终端几乎从不支持 Unicode。（如果是，则名称应正确显示。）

这适用于几个 zip 文件，直到 bam...

```
Traceback (most recent call last):
  File "jp\j-unzip.py", line 73, in <module>
    unzip(archname,archpath)
  File "jp\j-unzip.py", line 68, in unzip
    info.filename = info.filename.encode("cp437").decode("shift-jis")
UnicodeDecodeError: 'shift_jis' codec can't decode byte 0x8f in position 28: illegal multibyte sequence 
```

奖励内容！弄清楚这一点花了一些时间，但问题是一些有效的 shift-JIS 字符包含反斜杠，ZipFile 将其转换为正斜杠！例如，十在 shift-JIS 中编码为`8F 5C`. 这被转换为`8F 2F`非法序列。如果发生错误，以下（可能过于复杂）代码会检查这种情况，并尝试修复它。但也许还有其他字符发生这种情况，并且序列是有效的，所以你得到了错误的字符而不是错误。:(

```
def convert_filename(inname):
    err_ctr=0
    keep_going = True

    trans_filename = bytearray(inname.encode("cp437"))

    while keep_going:
        keep_going = False

        try:
            outname = trans_filename.decode("shift-jis")
        except UnicodeDecodeError as e:
            keep_going = True

            if e.args[4]=="illegal multibyte sequence":
                p0, p1 = e.args[2], e.args[3]
                print("Trying to fix encoding error at positions " + str(p0) +", "+ str(p1) + " caused by shift-jis sequence " + hex(trans_filename[p0]) +", "+  hex(trans_filename[p1]) )

                if (trans_filename[p0]>127 and trans_filename[p1] == 0x2f):
                    trans_filename[p1] = 0x5c
                else:
                    print("Don't know how to fix this error. Quitting. :(")
                    raise e

                err_ctr = err_ctr + 1
                print("This is error #" + str(err_ctr) + " for this filename.")
            else:
                raise e

        if err_ctr>50:
            print("More than 50 iterations. Are we stuck in an endless loop? Quitting...")
            sys.exit(1)

    return outname

def unzip(file, dir):
    zips = zipfile.ZipFile(file)
    for info in zips.infolist():
        info.filename = convert_filename(info.filename)
    print("Extracting: " + info.filename.encode(sys.stdout.encoding,errors='replace').decode(sys.stdout.encoding))
    zips.extract(info,dir)
    print("") 
```

# vim - Vim: 'DoMatchParen' 和 showmatch 选项有什么区别？

> ID：14297209
> 
> 赞同：0
> 
> 时间：2013-01-12T19:40:28.780
> 
> 标签：vim

两者我都听过很多，但我无法真正测试它们有何不同。

例如，如果我激活了 MatchParen（默认情况下启用或执行`:DoMatchParen`），光标在某种括号顶部时会改变颜色，匹配的括号也会这样做。

我也得到`cursorline`和`cursorcolumn`效果。尽管这些总是存在我已经注意到，即使我使用`:NoMatchParen`，如果我错了，请纠正我。

但是，如果在我的 .vimrc 文件中有 .vimrc 文件`set showmatch`，即使我用 .vimrc 禁用 MatchParen，我也不会真正注意到任何区别`:NoMatchParen`。

所以我的问题是，这两者之间有什么区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T19:54:02.963

*   启用后，当`showmatch`您输入右括号时，光标会短暂跳转到匹配的左括号。这仅在输入文本时完成（即在插入模式下）。

*   `MatchParen`激活后，如果光标在括号上，则突出显示其匹配的伙伴（在插入模式或正常模式下）。

两者相互独立。

# python - 未呈现 Django 自定义标签 (GAE)

> ID：14297211
> 
> 赞同：10
> 
> 时间：2013-01-12T19:40:32.660
> 
> 标签：python, django, google-app-engine

我正在尝试使用 Google App Engine 创建 Django 自定义标签，但由于某种原因，它并不总是有效。我相信我的标签已正确注册，因为 Django 正在解析它们，但渲染方法从未被调用。最奇怪的是，我的标签放在 for 循环 {% for ... %} 内时有效，但从不在外面。

这是代码：

在 django/mytags.py

```
from django import template
from google.appengine.ext import webapp

register = webapp.template.create_template_register()

# This works all the time
@register.simple_tag
def hello_world():
    return u'Hello world'

@register.tag('foo')
def foo(parser, token):
    return FooNode()

class FooNode(template.Node):
    def __init__(self):
        self.foo = 'foo'

    def render(self, context):
        return self.foo 
```

在 main.py

```
from google.appengine.ext.webapp import template

template.register_template_library('django.mytags')

...

self.response.out.write(template.render('main.html', template_values)) 
```

在 main.html 中

```
{% foo %}

{% for item in items %}
    {% foo %} 
```

结果：

```
<django.mytags.FooNode object at 0x000000001794BAC8>

foo
foo
foo
... 
```

这让我发疯。我怀疑将我的标签放在 for 循环中会强制渲染节点（应该已经完成​​）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:38:12.850

您需要为您的班级添加字符串表示形式

```
class FooNode(template.Node):
    def __init__(self):
        self.foo = 'foo'

    def render(self, context):
        return self.foo

    def __unicode__(self):
        return 'string to put in template' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:55:38.183

你不是忘记加了`{% load mytags %}`吗？（应该使用，每个[自定义标签文档](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)）

# delphi - 缺少 vcl150.bpl

> ID：14297215
> 
> 赞同：0
> 
> 时间：2013-01-12T19:41:00.923
> 
> 标签：delphi, runtime

我有一个 delphi 应用程序，作者没有将运行时库打包到其中。它需要 3 个 bpls 才能运行。我设法找到了其中的 2 个，但无论我去哪里，我都找不到 vcl150.bpl。我还尝试安装 delphi IDE（XE3）。IDE 带有 vcl170.bpl，没有 vcl150.bpl。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:44:55.893

vcl150.bpl is the VCL runtime package for Delphi XE. You should contact whoever supplied the application and ask for the necessary packages.

# android - 更改 EditText.setError(String) 的样式

> ID：14297225
> 
> 赞同：1
> 
> 时间：2013-01-12T19:41:36.490
> 
> 标签：android, android-layout, android-edittext

是否可以更改可以通过该`EditText.setError(String)`方法显示的“错误弹出窗口”的样式？或者这是一个无法确定样式的弹出窗口：-/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T05:58:49.617

是的，您可以使用此方法更改文本的颜色。只需使用 html

UserNameEdt.setError(Html.fromHtml("请输入用户名"));

# wordpress - 在wordpress中如何编辑footer.php

> ID：14297236
> 
> 赞同：0
> 
> 时间：2013-01-12T19:43:17.143
> 
> 标签：wordpress, wordpress-theming

我在 wordpress.com ( [xxxxx].wordpress.com ) 上有一个博客，我想在博客页面的页脚中添加 Google Analytics。我正在使用免费的“能”主题。我试图找到编辑模板的选项`footer.php`，但还没有运气。

我什至尝试在“外观”菜单下查看，但没有任何用处。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:12:54.723

尝试将代码 Google Analytics 添加到小部件“文本”并将小部件放在页脚中。但模板不允许添加页脚。

# database - 如何根据 MySql 上另一个表行中的 id 从 max(id) 行中选择值

> ID：14297243
> 
> 赞同：2
> 
> 时间：2013-01-12T19:43:56.643
> 
> 标签：database

我有带有 id 、 sku 、 amount 、 columns 的产品表。
id 和 sku 是唯一列。

```
 products table 
  ---------------------------                                
      sku         |  amount
  ----------------|----------
  1-13-013-000    |  765.00
  4-670-140-NB12  |  864.00
  4-670-153f-NS16 |  912.00
  5-616-40        |  86.00 
```

另一个表是带有 id 、 sku 、 balance 的移动
在这个表中只有 id 是唯一的。

```
 movements table           
  id |  sku           | balance
  ---|----------------|----------
  1  |  5-51-51       |  765.00
  2  |  5-616-40      |  11.00
  3  |  5-704-40      |  709.00
  4  |  5-616-40      |  67.00
  5  |  1-13-013-000  |  414.00
  6  |  5-704-40      |  415.00 
  7  |  4-670-140-NB12|  313.00 
  8  |  5-616-40      |  79.00
  9  |  1-83-019-2    |  11.00  
  10 |  5-616-40      |  86.00
  11 |  4-670-140-NB12|  811.00
  12 |  1-13-013-000  |  765.00 
```

我想比较和检查产品表上的每个 sku 是否有运动
（所以我需要检查运动表）并通过运动表中的最高 id 找到最后一个运动
并比较余额和金额。
我想得到这个结果

```
 --------------------------------------                                
      sku         |  amount    | balance
  ----------------|------------|--------
  1-13-013-000    |  765.00    | 765.00 
  4-670-140-NB12  |  864.00    | 811.00  <- No match 
  4-670-153f-NS16 |  912.00    |         <-no movement
  5-616-40        |  86.00     | 79.00 
```

我不需要这句话`<- No match`，`<-no movement`
任何帮助表示赞赏！
感谢阅读，
阿隆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:55:12.433

如果您尝试`MAX`从运动表中获取结果，您的结果似乎不正确。

```
id |  sku           | balance
---|----------------|----------
1  |  5-51-51       |  765.00
2  |  5-616-40      |  11.00
3  |  5-704-40      |  709.00
4  |  5-616-40      |  67.00
5  |  1-13-013-000  |  414.00
6  |  5-704-40      |  415.00 
7  |  4-670-140-NB12|  313.00 
8  |  5-616-40      |  79.00
9  |  1-83-019-2    |  11.00  
10 |  5-616-40      |  86.00    <-- Max of 5-616-40
11 |  4-670-140-NB12|  811.00   <-- Max of 
12 |  1-13-013-000  |  765.00   <-- Max of 1-13-013-000 
```

这应该会给你想要的结果：

```
SELECT p.sku, p.amount, m.balance
FROM products p
LEFT JOIN
    (SELECT sku, MAX(balance) AS balance FROM movements
    GROUP BY sku) m ON m.sku = p.sku 
```

**结果**

```
| 货号 | 数量 | 余额 |
--------------------------------------
| 1-13-013-000 | 765 | 765 |
| 4-670-140-NB12 | 第864章 811 |
| 4-670-153f-NS16 | 912 | (空) |
| 5-616-40 | 86 | 86 |
```

## [看到它在行动](http://sqlfiddle.com/#!2/e87b2/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:07:47.140

以下代码将起作用：

```
SELECT
    p.Sku,
    p.Amount,
    m.Balance
FROM
    TestMovements AS m
    INNER JOIN
    (
        SELECT
            MAX(Id) AS Id
        FROM
            TestMovements
        GROUP BY
            Sku
    ) AS MaxIds
    ON
        m.Id = MaxIds.Id
    RIGHT OUTER JOIN
    TestProducts AS p
    ON
        m.Sku = p.Sku 
```

# python - Transfer a file with sockets and find maximum mtu

> ID：14297244
> 
> 赞同：1
> 
> 时间：2013-01-12T19:44:21.407
> 
> 标签：python, sockets

i'm trying to transfer a file from the sender to the receiver such that the packets are not fragmented en-route. This is composed of two tasks: (1) find out the maximal fragmentation unit (MTU) of the minimal MTU on the path from the sender to the receiver, and (2) then transfer a file in packets that do not exceed the minimal MTU between a receiving and sending host.

**the code that I have to the receiver is:**

```
# ----    Imports     ---- # 
from socket import *
import sys, struct, time

# ----   Constants    ---- #
HOST            = ""
PORT            = 5555
ADDRESS         = (HOST,PORT)
PORT_MSGS               = 9999
TIMEOUT         = 0.0005
BUFFER                  = 65536

#---        Body        --- #
mtu = 0
numMsgs = 0

#make a socket
try:
    sckt = socket(AF_INET,SOCK_DGRAM)
    sckt.bind(ADDRESS)
    sckt.settimeout(TIMEOUT)
except socket.error:
    if sckt:
        sckt.close() # Socket Creation Failed
        sys.exit(1) # Exit program with error

#get mtu and number of messages
header = struct.pack('c','k')
while (1):  
    try:
        data, addr = sckt.recvfrom(BUFFER)
        char = struct.unpack('lc', data[0:5])[1]
        if (char == 'm'):
            mtu = struct.unpack('lc', data[0:5])[0]
            numMsgs = int(data[5:])
            #send ack for the mtu message
            sckt.sendto(header, (addr[0] ,PORT_MSGS))
            break
        if not(char == 'm'):
            continue
    except socket.error:
        continue
    except timeout:
        continue

mtuFileName = sys.argv[1]
fileName= sys.argv[2]

#make mtu file
mtuFile = open(mtuFileName,'wb')
mtuFile.write(str(mtu))
mtuFile.close()

f = open(fileName,'wb')

packetsBuffer = numMsgs * [0]
# Receive messages
packetCounter = 0
data, addr = sckt.recvfrom(BUFFER)
while (1):
        packetSeq = int(struct.unpack('lc', data[0:5])[0])
        char = struct.unpack('lc', data[0:5])[1]
        if (char == 'r') and (packetsBuffer[packetSeq] == 0):
            dataOfPack = data[5:]
            packetsBuffer[packetSeq] = dataOfPack
            packetCounter = packetCounter + 1
        if( numMsgs == packetCounter):
            break
        data, addr = sckt.recvfrom(BUFFER)

#write messages to file
buffIndex = 0
while (buffIndex < numMsgs):
    f.write(packetsBuffer[buffIndex])
    buffIndex = buffIndex + 1

f.close()
sckt.close() # close the socket 
```

**the sender is:**

```
# -------    Imports    ------- #
from socket import *
import sys, struct, os, stat, commands, time

# -------   Constants    ------- #
PORT_SEND           = 5555
IP_HOST         = sys.argv[1]
SERVER_ADDRESS      = (IP_HOST  ,PORT_SEND)
MY_PORT             = 9999
MAX_FAILS_SENDING   = 10
MTU_DISCOVERY_SEQ   = 0 # the Sequence number sending MTU discovery messages
TIMEOUT             = 0.0005
BUFFER              = 65536

# -------     Body       ------- #
#socket- file
try:
    scktFile = socket(AF_INET,SOCK_DGRAM)
    scktFile.connect(SERVER_ADDRESS)
    scktFile.settimeout(TIMEOUT)
except socket.error:
    if scktFile:
        scktFile.close() # Socket Creation Failed
        sys.exit(1) # Exit program with error

#socket- ack/mtu
try:
    scktMsgs = socket(AF_INET,SOCK_DGRAM)
    scktMsgs.bind(("", MY_PORT))
    scktMsgs.settimeout(TIMEOUT)
except socket.error:
    if scktMsgs:
        scktMsgs.close() # Socket Creation Failed
        sys.exit(1) # Exit program with error

#find the mtu
mtu = int(commands.getoutput(" tracepath "+sys.argv[1]+"| grep -i resume | awk '{print $3}'"))

payloadSize = mtu-(20+8+8+5)

fileName = sys.argv[2]
f = open (fileName, 'rb') 

fileData = f.read(99999999)
fileLen = len(fileData)
numMsgs = fileLen / (payloadSize)
if((fileLen % payloadSize) != 0):
    numMsgs = numMsgs + 1

#m - mtu,k - mtu ack, a - ack, f - fin, r - regular message part of file, w - wait for ack - after  10 rounds, n -name of file
while (1):  
    header = struct.pack('lc', mtu, 'm') #m - mtu
    sNumMsgs = str(numMsgs)
    scktFile.sendto(header+sNumMsgs, SERVER_ADDRESS)
    try:
        data,addr = scktFile.recvfrom(BUFFER)
        char = struct.unpack('c', data[0])
        if char == 'k':
            break
    except socket.error:
        continue
    except timeout:
        continue

# send file content
seqNum = 0
header = struct.pack('lc', seqNum, 'r')#r - regular message part of file
while (1):
        seqNum = 0
        indexFile = 0
        header = struct.pack('lc', seqNum, 'r')
        data = fileData[indexFile:(indexFile+payloadSize)]
        indexFile = indexFile + payloadSize
        while (data):
            if(scktFile.sendto(header+data,SERVER_ADDRESS)):
                data = fileData[indexFile:(indexFile+payloadSize)]
                indexFile = indexFile+payloadSize
            #time.sleep(0.00005)
            seqNum = seqNum + 1
            seqNum = seqNum % numMsgs # Maximum Seq number
            header = struct.pack('lc', seqNum, 'r')
            if seqNum == 0:
                break

scktMsgs.close()
scktFile.close() 
```

I keep getting the error "0 points (No Output)" and I dont know why

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:27:35.983

你不能这样做。

1.  确保传出数据包符合路径 MTU 已经是 TCP 堆栈的责任。为什么你也想在应用程序中承担这个责任对我来说是个谜。
2.  据我所知，没有任何 API 可以在任何数据传输之前告诉您 MTU。
3.  无法控制传出数据包的大小。TCP 是一种字节流协议，而不是数据包交换，它有权随时合并传出的数据包。关闭 Nagle 算法可以缓解这种情况，但不能保证消除它。
4.  没有任何好处。众所周知，通过 TCP 传输批量数据的最有效方式是写入尽可能大的块；在发送方设置一个大的套接字发送缓冲区；并在接收器处设置一个大的套接字接收缓冲区。

# php - SOAP java.lang.NumberFormatException：无效的日期/时间

> ID：14297246
> 
> 赞同：0
> 
> 时间：2013-01-12T19:44:42.327
> 
> 标签：php, api, soap

当我尝试连接到肥皂服务器并使用方法时出现此错误。

```
[previous:Exception:private] => 
[faultstring] => java.lang.NumberFormatException: Invalid date/time
[faultcode] => soapenv:Server.userException
[detail] => stdClass Object
 (
  [hostname] => bast.itek.handelsbanken.se
) 
```

任何的想法 ？

我怎样才能看到我的肥皂请求是什么样的？

这是我的代码片段：

[http://pastebin.com/apTw5Zhh](http://pastebin.com/apTw5Zhh)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:48:53.513

更多细节会很好。你如何连接到服务器？您将问题标记为 php，但显示 Java 异常，我猜它来自服务器？您可以尝试在客户端和服务器之间放置一个代理来监控您的请求。

在没有看到任何内容的情况下，我会猜测某些日期字段的格式与服务器预期的格式不同。尝试记录您的请求并将它们与示例请求（如果您能找到）和描述服务的 WSDL/XSD 进行比较。

编辑：我猜，这条线给你带来了问题：

```
 $score->request->contract->params->deliveryDate = '2013-02-11' 
```

尝试不使用该行或尝试在日期中添加时间，尽管对于 XML 日期应该没问题。

[也许可以尝试使用服务器，使用soapUI](http://www.soapui.org/)之类的工具找出正确的请求，直到你知道你到底想要什么。

# asp.net - HTML5 locaStorage and ASP.Net App debugging

> ID：14297255
> 
> 赞同：1
> 
> 时间：2013-01-12T19:45:43.057
> 
> 标签：asp.net, html, visual-studio-2012, local-storage

I am debugging my ASP.Net app using Visual Studio 2012 (IE10) and looks like the data that I have stored onto localStorage disappears after each debug session. Here is what I am doing

Store some data to localStorage using

```
localStorage.setItem(KEY_MY_OBJECT, JSON.stringify(myObject)); 
```

I access them using

```
JSON.parse(localStorage.getItem(KEY_MY_OBJECT)) 
```

The get & set works fine in the same debug session but the local storage for my key is `null` on the subsequent debug sessions (*after closing the current browser window and hitting F5 to restart a new debug session*). From my understanding of the localStorage, I was expecting the data to persist even after closing the window.

Here is how the Url looks while debugging

```
http://localhost/AppName/AppDashboardDashboard.aspx?&param1=param1value 
```

Could you please let me know if I am missing something here? Or will contents of localStorage not persist across debug sessions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:38:29.850

Looks like an issue with IE10 and debugging. It worked fine in release mode

# entity-framework - Is there any way to generate a DB from an EDMX model without all the table names being pluralised?

> ID：14297256
> 
> 赞同：3
> 
> 时间：2013-01-12T19:46:07.180
> 
> 标签：entity-framework, entity-framework-4, entity-framework-5

I forgot to include a DB creation script in my Git repo to bring work home for the weekend. Ha, I thought, how fortunate I can generate a DB DDL from my EDMX model, but the bloody daft thing goes and uses the entity set names for table names, not the entity names. This blows any ambitions I had of homework out of the bloody water.

Is there any trick in the book to avoid this and get my original table names back?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:15:24.027

我可以为此建议一个 hack，但我没有尝试过，所以我不知道结果，它需要一些工作，话虽如此，创建一个`DbContext`带有空模型类的实现（只是一个骨架）来创建一个您的真实模型的精确模型，然后使用[Entity Framework Power Tools](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)通过单击`DbContext`文件为您生成 DDL 代码（我知道这需要一些工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:41:28.247

如果您进入实体设计器，选择一个实体并编辑实体集属性，您可以为每个实体显式设置表名。不幸的是，这也会更改您的 ObjectContext 上的集合属性的名称。

奇怪的是，当我只更改 EDMX 中的 CSDL 实体的名称时，而不是 SSDL 实体的名称，但是当我生成脚本时，它使用了来自 CSDL 实体的名称（而不是人们期望的 SSDL 实体）。EF的设计者很奇葩。

一个解决方案是使用 Code First，您可以通过属性显式控制映射。

# mercurial - 从 Hg 中的过去提交中删除一些文件

> ID：14297260
> 
> 赞同：1
> 
> 时间：2013-01-12T19:46:19.733
> 
> 标签：mercurial

我的项目中有一些音频文件（用于测试目的），我认为如果我将它们包含在 Hg 存储库中，对其他队友来说会更方便。推送到服务器后，我发现它们占用了太多空间和时间来下载。无论如何要删除这些文件吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T23:17:47.673

有关在 Mercurial 中更改历史的一般概述，请参阅Mercurial wiki 中的[编辑历史](http://mercurial.selenic.com/wiki/EditingHistory)。

您已经推送到服务器的事实[使整个事情变得更加复杂](http://mercurial.selenic.com/wiki/EditingHistory#Consequences_of_editing_history)（如果更改仅在本地存储库中，问题会更容易解决）。

您可以使用[Mercurial Queues 扩展来**真正**从历史记录中删除更改](http://mercurial.selenic.com/wiki/EditingHistory#Editing_recent_history_with_MQ)。

# asp.net - 如何检查中继器控制内部的东西？

> ID：14297261
> 
> 赞同：0
> 
> 时间：2013-01-12T19:46:24.700
> 
> 标签：asp.net, repeater

是否可以使用转发器控件中的 If 语句检查某些内容并根据 If 语句决定要通过哪个 HTML 语句？像这样（C#代码）

```
 <asp:Repeater runat="server" >
    <ItemTemplate>
    ...
    if(something) do() .. else do_else()..
    ...
    </ItemTemplate>
    </asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:47:36.737

是的，它是：

```
<asp:Repeater runat="server" >
<ItemTemplate>

<%if(something) {%> 
 write this
<%}else{%>
 write that
<%}%>

</ItemTemplate>
</asp:Repeater> 
```

类似：
[在 ASP.NET 中继器中设置数据格式 在](https://stackoverflow.com/questions/3937425/format-data-in-an-asp-net-repeater/3937509#3937509)
[绑定到中继器时希望每页有 10 行](https://stackoverflow.com/questions/12122440/want-10-rows-in-every-page-while-binding-to-a-repeater/12122938#12122938)
[我可以在 asp:repeater 中使用过滤器吗？](https://stackoverflow.com/questions/14196364/can-i-use-filter-in-asprepeater/14196521#14196521)

# php - 使用 GMail 和 phpMailer 发送时“服务器不接受密码：535 验证数据不正确”

> ID：14297264
> 
> 赞同：24
> 
> 时间：2013-01-12T19:47:02.627
> 
> 标签：php, gmail, phpmailer

我在本地主机上运行相同的 php 脚本 - 我的带有 XAMPP 的 PC 和托管服务器上。它适用于我的 PC，但不适用于托管服务器。

当我从托管服务器发送它时，我得到以下输出：

```
SMTP -> ERROR: Password not accepted from server: 535 Incorrect authentication data  
SMTP -> ERROR: RCPT not accepted from server: 550-Please turn on SMTP Authentication in your mail client, or login to the 550-IMAP/POP3 server before sending your message. dev.camppage.com 550-(patchvalues.com) [205.234.141.238]:50958 is not permitted to relay through 550 this server without authentication.  
SMTP Error: The following recipients failed: jdorner4@gmail.com FAILED 
```

我怀疑服务器上有一个配置设置需要更改，但我不知道是哪一个。任何建议将不胜感激！

这是代码：

```
function send_gmail ($recipients, $subject, $message, $attachment_filenames = array()) 
{
  global $email_address, $email_password, $email_name;
  require_once ($_SERVER['DOCUMENT_ROOT']. '/php/PHPMailer/class.phpmailer.php');   

  $body  = $message;
  $body  = str_replace("\\", '', $body);
  $mail = new PHPMailer();
  $mail->CharSet = "UTF-8";
  $mail->IsSMTP();
  $mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
  $mail->SMTPDebug  = 1;                     // enables SMTP debug information (for testing) 0 - none; 1 - errors & messages; 2 - messages only
  $mail->SMTPAuth   = true;                  // enable SMTP authentication
  $mail->SMTPSecure = "ssl";                 // sets the prefix to the servier
  $mail->Port       = 465;                   // set the SMTP port
  $mail->Username   = $email_address;  // GMAIL username
  $mail->Password   = $email_password; // GMAIL password
  $mail->SetFrom($email_address);
  $mail->FromName   = $email_name;
  $mail->AddReplyTo($email_address,$email_name);
  $mail->Subject    = $subject;
  $mail->MsgHTML($body);
  $mail->IsHTML(true); // send as HTML

  if (isset ($recipients[0]))
  {
    foreach ($recipients AS $to)
    {
        $to_pieces = explode (",", $to, 2);
        $to_email = trim ($to_pieces[0]);
        if (isset ($to_pieces[1]))
            $to_name = trim ($to_pieces[1]);
        else
            $to_name = " ";
        $mail->AddAddress($to_email, $to_name);
    }
    $mail->IsHTML(true); // send as HTML

    if ($mail->Send()){
        return TRUE;
    } else {
        return FALSE;
    }
} 
else 
{
    return FALSE;
}
} 
```

TIA

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-21T19:17:16.020

解决方案是从服务器设置中启用传出 SMTP。

在运行 cPanel 的 WHM 的服务器上，它位于 WHM 的“调整设置”部分下。

选项是启用/禁用 - 选择禁用。

警告：进行此更改将重定向传出 SMTP 连接，允许帐户进行直接连接，这可能会增加您将服务器列入黑名单的几率。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-06-15T09:49:46.097

这与**WHM/cPanel**相关，您可以执行与上一个答案或 shell 中相同的操作，方法是键入此

```
/scripts/smtpmailgidonly off 
```

你应该得到

```
"SMTP Mail protection has been disabled.  All users may make outbound smtp connections." 
```

更多阅读在这里[https://forums.cpanel.net/threads/cant-enable-smtp-restrictions.360971/](https://forums.cpanel.net/threads/cant-enable-smtp-restrictions.360971/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-04T10:45:11.363

我写这个答案是因为评论只支持文本并且不提供上传图片的选项。@John Dorner 给出的答案是正确的。

我张贴这张图片以供快速参考。这只是为了任何来到这里的未来用户都可以快速解决这个问题。

*注意：这种问题通常发生在您设置服务器时，并且名称服务器可能由域服务提供商管理，并且服务器仅通过带有某个 IP 地址的记录条目来指向。在这种情况下，域所有者可能正在使用 GSuit 并在该域的名称记录中添加了少量 MX 记录。在这种情况下，通过 WHM 创建的电子邮件帐户发送电子邮件可能无法正常工作，因为服务器上缺少 MX 记录条目并且该 MX 记录条目存在于域服务提供商处。在这种情况下，最好使用第三方电子邮件服务提供，例如 MailGun、MailTrap 或 MailChimp。*

[![在此处输入图像描述](../Images/d35856489063bc1827cfb0a9117b682c.png)](https://i.stack.imgur.com/5JfW1.png)

# emacs - Emacs (24) 加载并运行 emacs-w3m，但不将其用于 Lisp HyperSpec

> ID：14297271
> 
> 赞同：0
> 
> 时间：2013-01-12T19:47:45.150
> 
> 标签：emacs, slime, emacs24, w3m

我目前正在运行 Emacs 24 + SLIME 设置，并试图通过 emacs-w3m 让 Common Lisp HyperSpec 显示在 Emacs 中。目前，如果我进入迷你缓冲区 `M-x w3m`，它确实会启动 emacs-w3m，并且一切都按预期工作。

但是，当处于 SLIME 模式并尝试通过 w3m 加载 HyperSpec 时，就会出现问题。我手头有该文档的本地副本，并将其设置为我的`~/.emcas`文件中的 common-lisp-hyperspec-root。当我`C-c C-d h`进入迷你缓冲区并尝试搜索 HyperSpec 时，问题就出现了。它可以工作，但不是在 emacs 中使用 w3m，而是在我的普通 Web 浏览器（在本例中为 Firefox）中拉出一个新选项卡查看该实用程序的 README，它说要确保`(require 'w3m-load)`在一个`~/.emcas`文件中，我已经完成了那。就此而言，Emacs 也没有启动错误。

他们有什么办法让我强迫 Emacs 使用 w3m 打开本地文档，或者失败了，让它不使用任何其他可能的网络浏览器？

我的完整`~/.emcas`文件在这里： http: [//pastebin.com/E51upqF4](http://pastebin.com/E51upqF4)

编辑：作为更新，值得注意的是，如果我卸载 Firefox 并再次尝试相同的操作，它只会打开另一个带有 html 本身的 emacs 缓冲区。不过，它不使用 w3m。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T19:58:31.480

我将此行添加到我的 .emacs 并且它有效

(setq browse-url-browser-function 'w3m-goto-url)

我没有必要使用：

（需要'w3m-load）

# php - 购买贝宝后如何更新特定用户排名？(IPN)

> ID：14297272
> 
> 赞同：0
> 
> 时间：2013-01-12T19:47:48.347
> 
> 标签：php, sql, paypal, paypal-ipn

我想在登录用户自动购买升级后更新他们的排名。下面是一个我无法工作的例子。

```
 $result = curl_exec($ch);
    curl_close($ch);

    if($result == "VERIFIED")
       {

               session_start();
               $db_host="localhost";
               $db_name="mydb";
               $username="user";
               $password="psw";
               $conn = mysql_connect($db_host, $username, $password);
               $connection_string=mysql_select_db($db_name);
               $sql  = "UPDATE users SET rank ='10' WHERE username                  ='{$_SESSION['username']}'";
               $retval = mysql_query( $sql, $conn );

       }
    else
       {

       } 
```

我知道（IPN）创建一个新会话有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:21:39.647

尝试添加`$_SESSION['username']`到您的付款按钮的自定义字段， -

```
custom='{$_SESSION['username']}' 
```

然后在您的 IPN 中，您可以获得价值回馈-

```
$username = $_POST['custom']; 
```

并在您的 sql 更新中使用它 -

```
$sql  = "UPDATE users SET rank ='10' WHERE username ='$username'"; 
```

[https://cms.paypal.com/es/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables#id08A6HH00W2J](https://cms.paypal.com/es/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables#id08A6HH00W2J)

# javascript - Phantom Js、CasperJs 外部脚本未正确评估

> ID：14297274
> 
> 赞同：1
> 
> 时间：2013-01-12T19:48:08.340
> 
> 标签：javascript, server-side, phantomjs, casperjs

这里有趣的问题，我使用 injectJs 将外部文件（site.js）加载到我的 phantomJs/CasperJs 脚本中。它的加载很好，但函数没有评估并且作为字符串返回。

这是site.js：

```
var site = function(){
     this.getName = function(){
         return 'this is a name';
     }
} 
```

这是我的 phantom.js 脚本：

```
casper.start();

casper.then(function(){
    phantom.injectJs('/path/to/site.js');
    mysite = new site(casper);
    name = mysite.getName;
    this.echo(name);

}); 
```

我希望控制台打印出：'this is a name'，但它会打印出：'function(){ this.getName = function(){ return 'this is a name'; }}'

我也试过 eval() 无济于事（eval？）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:59:10.887

你忘记了`()`：

```
name = mysite.getName(); 
```

# ruby-on-rails - 无法显示简单的 has_one 关联：nil:NilClass 的未定义方法

> ID：14297275
> 
> 赞同：0
> 
> 时间：2013-01-12T19:48:12.370
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如果这看起来像重复，我深表歉意，但我没有看到明确解释的解决方案。我有一个简单的 has_one, belongs_to 关联

```
class Author < ActiveRecord::Base
  attr_accessible :name, :book_attributes
  has_one :book
  accepts_nested_attributes_for :book, :allow_destroy => true  
end

class Book < ActiveRecord::Base
  attr_accessible :title, :author_id
  belongs_to :author
end 
```

authors_controller

```
class AuthorsController < ApplicationController
  def index
    @authors = Author.includes(:book).all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @authors }
    end
  end

 def show
    @author = Author.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @author }
    end
  end

 def new
    @author = Author.new
    @book = @author.build_book    

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @author }
    end
  end 
```

这个 Show.html.erb 是表演的终结者，@author.book.title 给了我一个 nil:NilClass 的未定义方法：

```
<p id="notice"><%= notice %></p>

<p>
  <b>Name:</b>
  <%= @author.name %>
</p>

<p>
  <b>Book:</b>
  <%= @author.book.title %><br/>
</p>

<%= link_to 'Edit', edit_author_path(@author) %> |
<%= link_to 'Back', authors_path %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:06:10.460

如果作者没有书，`@author.book`会返回`nil`，然后你继续打电话`nil.title`，它会爆炸。

你需要提防这种情况。也许是`if`围绕相关代码的声明：

```
<% if @author.book %>
  <%= @author.book.title %>
<% else %>
  (none)
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:06:20.117

您要显示的作者似乎有一本零书。所以当你这样做时`@author.book.title`，你会得到错误，因为`title`is not a method on nil:NilClass.

要解决此问题，您需要通过以下方式检查 nil 标题：

```
@author.book.try(:title) 
```

或者，通过将其添加到您的 Author 模型中，确保所有作者在被认为有效之前始终拥有一本书：

```
validates :book_id, :presence => true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T20:22:38.780

Book 为 nil，因为它尚未分配给 Author。

```
<%= @author.book.nil? ? link_to 'Add Book', path(@author) : @author.book.title %> 
```

或者

```
<%= @author.book.nil? ? 'No Titles available' : @author.book.title %> 
```

# c# - Hiding base class or interface from polluting code

> ID：14297276
> 
> 赞同：2
> 
> 时间：2013-01-12T19:48:22.480
> 
> 标签：c#

this is an issue ive been faced with countless number of times.. consider..

```
[public/private] interface IBase
{
    void DoCore();
}

public interface IDerived_A : IBase
{
    void Do_A();
}
public interface IDerived_B : IBase
{
    void Do_B();
} 
```

here i have 2 useful interfaces that provide some common functionality (provided by the IBase interface), plus some other functionality unique to either of them.. c# forces me to declare IBase as public (the same visibility as the inheriting interfaces).. however, the IBase interface is visible to everyone.. there is no need for anyone else to use this interface.. ppl only need to access the IDeriver_X interfaces.. how can i hide the IBase interface from the users of my code? there can be two kinds of users of my code..

1.  code in the same namespace / assembly accessing IDerived_X..
2.  code in a separate project referencing the assembly containing IDeriver_X..

ps.. i hate making more interfaces public than is neccessary (neccessary means only those interfaces that ppl will use directly).. ps2.. i face the same dilemma with classes..

EDIT:

i have a feeling that the question was misinterpreted a bit.. for that im posting a clarification.. the issue isnt just related to interfaces.. it bugs me about classes too.. consider the following code..

```
public abstract class Vehicle
{
    // generic vehicle functionality
}
public Car : Vehicle
{
    // functionality specific to cars
}
public Truck : Vehicle
{
    // functionality specific to trucks
} 
```

Car and Truck are the ONLY two kinds of objects im allowing the users of my code to use.. to make my job easier, and to avoid dupilcation of code, ive moved the common code to the Vehicle abstract class.. but that doesnt mean its ok for the user to store references to cars or trucks in vehicle variables.. from the perspective of the users, my code should only expose cars and trucks (and not vehicles or engines or whatever base classes i used internally to avoid code duplication).. specifically, im looking for a technique that allows me to expose complete cars and trucks but not any other incomplete building blocks like vehicles or engines.. the problem is, c# doesnt let me make the base classes private if the derived class is public.. does that make more sense? =)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T19:59:47.620

出色地，

*   要么你的子接口派生自基础是有道理的
*   或子接口的用户不应访问基础 API

在第一种情况下，API IDerived_A 的使用者可以访问 IBase 是合理的。在第二个中，不要从基础 IBase 派生

其他任何事情都是在调整 OOP。

作为您的接口的使用者，我同时获得了 IBase 和 IDerived_A，因此我可以访问 IBase 是合理的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T20:21:09.303

我不确定您要在这里表达什么（因此对您的完整场景的描述可能会有所帮助）。如果您的`IDerived_A`和`IDerived_B`接口 是`IBase`，您的客户端代码需要能够访问`DoCore`. 并且拥有`IBase`public 将允许您概括在继承`IDerived_A`或的类型上相同的功能`IDerived_B`。

如果您只是想避免在其中重复方法定义，`IDerived_A`但从`I_Derived_B`您`IBase`的继承不是建模 IS A 关系（即 I_Derived_A 和 I_Derived_B 不需要在层次结构中直接相关，而只是在它们之间共享一些功能），您可能应该只需创建单独的接口，它们之间没有层次关系，如下所示：

```
public interface ICore 
{
    void DoCore()
}

public interface INonCore_A // no more inheritance
{
    void Do_A();
}

public interface INonCore_B 
{
    void Do_B();
} 
```

现在可以请求您的库代码中的类来实现`ICore`和`INonCore_A/B`。`ICore`它本身可能仍然需要公开（除非您希望 DoCore 方法本身仅对您的库代码可见），但您可以通过使用`ICore`.

在第二种情况下，您失去的是一种告诉您的客户端代码实现`INonCore_A` **需要**您也实现的方式`ICore`。例如，该功能存在于 scala 编程语言中，但不存在于 C# 中。如果它存在，你可以说：

```
// warning: non-existing c# syntax. Does not compile
    public interface INonCore_A {
        self: ICore => // this is scala syntax, does not work in c#
                       // it means "anyone who implements INonCore_A must 
                       // also implement ICore
            void Do_A();
    } 
```

如前所述，由于这在 c# 中不起作用，因此取决于文档和程序员的纪律，以确保无论谁实现`INonCore_A`和 B 也实现`ICore`

# c# - Improving my database design using TPH Inheritance

> ID：14297277
> 
> 赞同：1
> 
> 时间：2013-01-12T19:48:36.983
> 
> 标签：c#, sql, database, database-design, table-per-hierarchy

This is my current database design, for the moment just look the student, teacher and classes tables.

![enter image description here](../Images/7ab0a0f89fc334e2ebabefd201ddf0fe.png)

I'm trying to convert some tables into news using TPH Inheritance. For example.

Create a new table called Person where contains:

*   Id,
*   FullName,
*   EnrollmentDate (for student),
*   Email (for student),
*   HireDate (for teacher)

But is there remaining one field called `ClassId`, where it's contained in `Student` table. At this momment I don't know if should I create a join table to store the `ClassId` and `PersonId`, or just put the `ClassId` into the `Person` table. That's my big doubt.

Where do I have to put the `ClassId` field?

I have to mention that each student can only be in one class, not many. Teachers can have many classes as they want.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:58:41.593

我认为您没有正确建模域：

首先你必须有学生，不管他们有没有班级，
在当前的模型中，学生似乎是一个弱实体并且依赖于班级。

课程也独立于学期课程，学期课程可能会在今年发生，明年不会发生。

但是，如果您想使用 TPH 策略对数据库进行建模，此[链接](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)可能会对您有所帮助。

您将有一个 Person 表，然后是具有对 Person 的引用的 Teacher 表，以及也具有对 Person 表的引用的 Student。
最后，学生表通过联合表引用学期课程。

# c++ - 将任意地址分配给 HWND

> ID：14297280
> 
> 赞同：5
> 
> 时间：2013-01-12T19:49:03.803
> 
> 标签：c++, winapi, pointers

[正如我从有关 Windows Data Types](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa383751%28v=vs.85%29.aspx)的 MSDN 文档中了解到的那样， a`HWND`相当于 a `void*`：

HWND - 窗口句柄。这种类型在 WinDef.h 中声明如下： typedef HANDLE HWND; HANDLE - 对象的句柄。这种类型在 WinNT.h 中声明如下： typedef PVOID HANDLE; PVOID - 指向任何类型的指针。此类型在 WinNT.h 中声明如下： typedef void *PVOID;

但是，如果我尝试以下操作：

```
int foo;
HWND bar = &foo; 
```

我的编译器（VS2012）抱怨：

```
error C2440: '=' : cannot convert from 'int *' to 'HWND'
Types pointed to are unrelated; conversion requires reinterpret_cast,
C-style cast or function-style cast 
```

我无法弄清楚原因。我已经确定它与 typedefs 的使用无关，因为以下编译良好：

```
typedef void* MyType;
int foo;
MyType bar = &foo; 
```

是什么阻止我将任意对象的地址分配给 a `HWND`？

如果有人反对我首先尝试这样做，我想这样做的原因是我有一些涉及`HWND`s 的代码，我想通过为`HWND`s 提供我可以测试的已知值来进行单元测试.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T19:52:57.797

如果`STRICT`在编译期间定义，则 an`HWND`被定义为指向虚拟结构的指针，而不是`void*`.

添加的原因之一`STRICT`是使编译器能够捕获您想要执行的那种隐式转换（很多人确实没有）。由于您实际上想要“松散检查”，因此请确保`STRICT`未定义。

或者只是投。

（请注意，yic81 在您链接的 MSDN 文档页面上的评论表明它需要一些更新）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T19:56:28.937

尝试

```
int foo;
HWND bar = (HWND)&foo; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-20T12:32:21.820

我发现它`long long`可以转换为`HWND`：

```
long long llHwnd = 133282;
HWND hwnd = (HWND)llHwnd; 
```

如果我找到一个，我会附上原始答案的链接。

# javascript - Sqlite 插入语句未运行

> ID：14297291
> 
> 赞同：0
> 
> 时间：2013-01-12T19:49:41.060
> 
> 标签：javascript, sqlite

我的 sqlite 有以下代码来存储来自相机的名称和图像。我从 Eclipse 控制台知道我正在获取名称和图像路径。console.log(addRecord) 正在获取名称和图像路径，但我在事务行和 queryDB 函数上收到“无法执行未定义的 SQL”消息，所以我认为我的插入语句出错了？此外，imageURI 的数据类型文本是否正确？任何帮助表示赞赏。

```
 function onDeviceReady() {
    var db = window.openDatabase("database", "1.0", "Profiles", 5000);
    if(db) {
console.log('The device is ready');
db.transaction(populateDB, errorCB, successCB, insertRecord); // only do stuff if db exists
}
else{
console.log('There is a problem');
}   
   function populateDB(tx) {
   tx.executeSql('DROP TABLE IF EXISTS USERS');//get rid of this once working?
   tx.executeSql('CREATE TABLE IF NOT EXISTS USERS (id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, username VARCHAR NOT NULL, imagePath TEXT)');
   console.log('The table USERS is created');
   }
  //Insert the details
function insertRecord(tx) {
       userName = document.getElementById('userName').value;
       imagePath;
       var addRecord = 'INSERT INTO USERS (username, imagePath) VALUES ("' + userName + '","' + imagePath + '")';
       console.log(addRecord);
       tx.executeSql(addRecord, [userName, imagePath], queryDB, errorCB);
}

 // Query the database
function queryDB(tx) {
       var getUsers = "SELECT * FROM USERS ORDER BY id ASC', [], querySuccess, errorCB";
       db.transaction(function (tx) {
       tx.executeSql(getUsers, [], querySuccess, queryFailure);
    }, errorCB, successCB);
}

// Query the success callback

function querySuccess(tx, results) {
        console.log("You are in the querysuccess function");
}

// Transaction error callback

function errorCB(err) {
        console.log("Error processing SQL: " + err.code);
}

function queryFailure(err) {
      console.log("Error processing SQL: " + err.code);
}
// Transaction success callback

function successCB() {
      console.log('The db and table are working');
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:01:13.593

标识符`queryFailure`未定义。添加功能：

```
function queryFailure(tx, results) {
    console.log("You are in the queryFailure function");
} 
```

一旦你让它运行，你会看到这个`queryFailure`函数被调用了，因为你在查询中有一个错误。这：

```
var getUsers = "SELECT * FROM USERS ORDER BY id ASC', [], querySuccess, errorCB"; 
```

应该：

```
var getUsers = "SELECT * FROM USERS ORDER BY id ASC"; 
```

# arrays - VBA，一个单元格中的多个数组参数过滤

> ID：14297295
> 
> 赞同：1
> 
> 时间：2013-01-12T19:50:21.957
> 
> 标签：arrays, vba, syntax, parameters, filtering

环顾四周，还没有找到合适的解决方案，所以这是我的问题！对此还是很陌生，请原谅我的任何不当词汇。

我正在尝试为类似于以下内容的数据进行过滤：

```
8.5 x 11
8.3 x 10.9
8.7 x 10.9
8.3 x 10.9
11 x 8.5
8.5 x 11
8.5 x 11
15 x 11 
```

基本上我需要能够按第一个值和第二个值进行过滤。在 Stackoverflow 成员的大力帮助下，我整理出将这些值放入数组中，确定第一个和第二个值并将它们分配为 Arrval(0) 和 Arrval(1)，然后将这些值分配给变量“小”和“大”基于尺寸。这样，如果第一面较大，等等。它仍然有效。以下是与此相关的相关代码：

```
val = Trim(arr(r, 1))
    If val Like "*x*" Then
        Arrvals = Split(val, "x")
        V1 = Trim(Arrvals(0))
        V2 = Trim(Arrvals(1))
        If IsNumeric(V1) And IsNumeric(V2) Then
            V1 = CDbl(V1)
            V2 = CDbl(V2)
                            If V1 > V2 Then
                Small = V2: Large = V1
            Else
                Small = V1: Large = V2
            End If
            End If
            End If 
```

随后，我使用这些值来确定“尺寸”的尺寸，并在它满足某些参数时对其进行计数。例如

```
testcase8511 = Small <= 9.9 And Large <= 14.5
test117 = Small >= 10 And Large <= 17.6 
```

然后我使用 if-else 语句（仅使用 if x then range.value = range.value +1）计算这些并更改它们所在行的颜色。

长话短说（希望提供足够的背景资料让这更容易！）我需要能够按这些参数进行过滤，然后将结果导出到文本文件。我已经将文本导出大部分整理出来，但我不知道如何正确过滤。我怀疑这主要是语法问题。

快速而肮脏的方法是在这些变量为真的行中添加另一个单元格，在我进行计数时将“x”或“y”或其他一些标记添加到它们，然后按此过滤，但我怀疑对于比我有更多线索的人来说，有更好/更有效/更少资源密集型的方法来做到这一点。我什至不知道从字面上使用自动过滤器，导出然后关闭自动过滤器是否是最好的方法。由于这些行是彩色的，我想我也可以通过单元格的内部颜色或其他东西进行过滤。只是不知道去哪里才能正确完成这项工作。

所以基本上，总而言之，我需要能够做到

1.  在我浏览完所有数据并计算它们是否为真后，按我的上述变量之一（例如 testcase8511）进行过滤。（有没有办法在 VBA 中存储这些信息，这在资源方面是有意义的？我对此表示怀疑，不知道。）
2.  将此过滤后的数据导出到文本文件（我主要为自己排序）
3.  返回工作簿（或保留它）的外观相同。即我不希望在导出过程完成后这个过滤器在视觉上呈现给用户。
4.  尽可能高效地执行此操作，程序明智（诚然，我怀疑任何愿意回答的人都会渴望不这样做）。我们正在使用的一些计算机......不是很好。

提前致谢！如果我没有解释清楚，我会澄清任何事情。问远点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:42:06.060

好的，这是过滤的一种解决方案：
在工作表模块中：

```
Sub test()
    Dim i As Long
    Dim f1 As String, f2 As String
    Dim f As String
    Dim c As New Collection
    Dim arr() As String

    f = InputBox("Enter two filters with comma, e.g. '>3.2, <10", "Filters")
    If InStr(f, ",") = 0 Then Exit Sub
    f1 = Split(f, ",")(0)
    f2 = Split(f, ",")(1)

    For i = 2 To Me.UsedRange.Rows.Count
        If xFilter(f1, f2, Me.Cells(i, "A").Text) Then c.Add Me.Cells(i, "A").Text
    Next
    If Not Me.AutoFilterMode Then Me.Rows(1).AutoFilter

    ReDim arr(c.Count - 1)
    For i = 1 To c.Count
        arr(i - 1) = c(i)
    Next
    Me.UsedRange.AutoFilter Field:=1, Criteria1:=arr, Operator:=xlFilterValues

End Sub 
```

（`Field`是列号，必须与`Cell(i, "A")`上面匹配）

在一个模块中：

```
Public Function xFilter(f1 As String, f2 As String, t As String) As Boolean
    Dim v1 As Double
    Dim v2 As Double
    Dim r1 As Boolean
    Dim r2 As Boolean

    v1 = Val(Split(t, "x")(0))
    v2 = Val(Split(t, "x")(1))

    r1 = Evaluate( _
        WorksheetFunction.Text(v1, "0.0########") & f1)
    r2 = Evaluate( _
        WorksheetFunction.Text(v2, "0.0########") & f2)
    xFilter = r1 And r2
End Function 
```

它似乎做了“OK”的伎俩。（我使用了`WorksheetFunction.Text`因为`CStr`给出了一个类似于德语的本地化字符串`3,5`。）然而，从实际的角度来看，我个人会坚持以下规则：如果你想将数字作为数字使用，它们应该是数字！所以我宁愿将这些值分成两列，并在这些列上使用“普通”数字过滤器。（一个 sub 的工作原理与这里的非常相似......）

# php - 使用带有递归函数的 PHP 的 FTP 整个目录

> ID：14297303
> 
> 赞同：1
> 
> 时间：2013-01-12T19:51:23.383
> 
> 标签：php, ftp

我正在编写一个将更新文件文件夹上传到多个网站的代码。我一直在尝试使用以下功能将所有文件和文件夹上传到 FTP 帐户。在这种情况下，包含文件的本地文件夹被命名为“files”，并且所有文档都被上传到 ftp 帐户的父目录。

**功能**

```
function upload_dir($dirname,$conn_id) {
    $dir_array=array();
   if (is_dir($dirname))
      $dir_handle = opendir($dirname);
   if (!$dir_handle)
      return false;
   while($file = readdir($dir_handle)) {
      if ($file != "." && $file != "..") {
         if (!is_dir($dirname."/".$file)){
             $dirname2= str_replace('files','',$dirname);
             if($dirname2[0]=='/'){
                $dirname2 = substr($dirname2, 1);
             }
             ftp_put($conn_id, $dirname2."/".$file, $dirname."/".$file, FTP_BINARY);
         }
         else{
             $dirname2= str_replace('files','',$dirname);
             if($dirname2[0]=='/'){
                  $dirname2 = substr($dirname2, 1);
             }

             if(in_array($dirname2.'/'.$file, $dir_array)){
                 upload_dir($dirname.'/'.$file,$conn_id);
             }
             else{
                 array_push($dir_array, $dirname2.'/'.$file);
                 // check if directory exists before trying to create it
                    $filename = $dirname2.'/'.$file;
                    if (file_exists($filename)) {
                    } else {
                      ftp_mkdir($conn_id,$dirname2.'/'.$file);
                    }
                 upload_dir($dirname.'/'.$file,$conn_id);
             }
         }
      }
   }
   closedir($dir_handle);
   return true;
} 
```

**代码**

```
// Ftp All data to new server
$ftp_server = "ftp.mywebsite.com";
// set up basic connection
$conn_id = ftp_connect($ftp_server); 
// login with username and password
$login_result = ftp_login($conn_id, 'username', 'password'); 
// check connection
if ((!$conn_id) || (!$login_result)) { 
$reply  = "FTP connection has failed!";
$reply .= "Attempted to connect to $ftp_server for user zerozill@".$option1; 
exit; 
} else {
$reply = "Connected to $ftp_server, for user annon";
upload_dir('files',$conn_id);
}
// close the FTP stream 
ftp_close($conn_id); 
```

我遇到的问题是该功能在大多数情况下都有效，但由于某种原因它有时会拒绝上传文件夹。例如，我有一个名为 scripts 的文件夹。每次我运行此功能时，它都不会上传脚本文件夹。同样，它仍会尝试将所有文​​件上传到文件夹，从而创建脚本文件夹不存在的错误。我不知道我是否忽略了某些东西或什么，但对此事的任何帮助表示赞赏。

# django - 了解 Django 事务的工作

> ID：14297304
> 
> 赞同：0
> 
> 时间：2013-01-12T19:51:28.260
> 
> 标签：django, django-models, transactions

我已经阅读了 Django 事务并将在我的项目中使用它，但这里有几个我想知道的问题。实际上我希望在注册时使用事务，我在注册时在 2-3 个地方插入，所以我希望如果任何查询失败，则不应该执行插入。所以根据 Django 文档，我想我需要使用`commit_on_success`事务类型。

但我想知道这些事务是依赖于数据库还是都是 Django 内部的？我是否需要为它更改数据库存储引擎？如果我必须在不同的存储引擎甚至未来不同的数据库上使用它，比如 SQL 中的一个表和 nosql 中的一个表，该怎么办？还是这无关紧要？

另外，如果我会像这样使用它：

```
from django.db import transaction

def function1():
    #code here without transaction

@commit_on_success
def function2():
    #code here with transaction 
```

如果所有方法代码都成功，那么函数 2 将与提交一起工作，但是在导入事务之前，函数 1 会发生什么？function1 将应用什么类型的事务？我希望 function1 没有任何事务，但在其他模型代码中工作时表现正常，那么我该怎么办？

所以我的问题是，如果没有交易但有一种交易方法，该怎么办？它会通过使用装饰器和其他方法正常工作还是我需要做其他事情？这些事务是否也依赖于数据库和数据库存储引擎，如 InnoDB 这些事务只是 Django 内部事务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:52:50.197

*   Django 使用数据库事务。
*   您无需更改数据库存储引擎。
*   并非所有数据库引擎都支持事务
*   如果你使用事务管理，而你的数据库引擎不支持它（例如 MySQL 和 MyISAM 表），一切仍然有效，没有事务。

即在一种方法中使用@commit_on_success 是安全的。如果您将来在没有事务支持的情况下更改为 DB，什么都不会中断。

# wordpress - function.php 会在主题更新时被覆盖吗？

> ID：14297307
> 
> 赞同：7
> 
> 时间：2013-01-12T19:51:37.720
> 
> 标签：wordpress

我必须在主题中添加一些 php 函数，以便可以从不同的页面使用它们。文档说添加自定义 php 函数的一个地方是在 function.php

凉爽的！

我的问题是，当我更新主题时会发生什么？包含我的更改的functions.php 会被一个新的覆盖 - 从而消除我所有的辛勤工作吗？

我的直觉说是的，但在我去创建一个儿童主题之前，我想我会要求确定。

谢谢

标记

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2020-04-28T18:24:03.440

我只是加了 2 美分，因为这是我在搜索相同问题时出现的第一个 Google 结果。是的，您的 functions.php 将被主题更新覆盖。

我通过下载代码片段插件解决了这个问题。

[https://wordpress.org/plugins/code-snippets/](https://wordpress.org/plugins/code-snippets/)

现在我可以轻松添加和管理不会被覆盖的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T20:04:44.670

我不确定在更新主题时是否会覆盖*所有*文件，或者仅覆盖更改的文件，但是您的更改肯定会在将来的某个时候丢失。

从[使用主题编辑器和插件编辑器](http://codex.wordpress.org/Editing_Files#Using_the_Theme_Editor)：

> 请注意，如果您编辑的主题已更新，您的更改将被覆盖。为了更好地组织您的更改并保护它们免受更新，请考虑创建一个子主题来保存您的所有更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-09T20:58:14.790

假设您正在谈论-仅-修改functions.php，编写插件可能是一个更好的选择。创建插件基本上涉及编写几行文本来创建标题，其中包括插件名称等。然后添加你的代码......就是这样。插件是高度可移植的，您可以在其他网站上使用它们。此外，如果您切换主题，您的代码不会消失。

（我不是反儿童主题，我只是提出一个替代方案。）

[https://codex.wordpress.org/Writing_a_Plugin](https://codex.wordpress.org/Writing_a_Plugin)

# android - Holo 中的 Android 按钮栏

> ID：14297309
> 
> 赞同：0
> 
> 时间：2013-01-12T19:51:52.817
> 
> 标签：android, android-layout

我正在创建一个 Android 应用程序，该应用程序在可用时使用 Holo 主题，并在不可用时回退到黑色主题。我通过使用 、 和 文件夹来完成`values`此`values-v11`操作`values-14`。

我有一个我想使用`?android:attr/buttonBarStyle`and`?android:attr/buttonBarButtonStyle`样式的活动，但我不确定当它们不可用时如何回退到不同的样式（例如`@android:style/ButtonBar`）。这是我的布局供参考。

```
<LinearLayout
    android:id="@+id/buttonArea"
    style="?android:attr/buttonBarStyle"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:gravity="bottom|right"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button1"
        style="?android:attr/buttonBarButtonStyle"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Button One" />

    <Button
        android:id="@+id/button2"
        style="?android:attr/buttonBarButtonStyle"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Button Two" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-29T20:16:49.607

好吧，我有点晚了，但这就是我解决它的方法：

```
<LinearLayout
    android:id="@+id/footer"
    style="@style/ButtonBar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/accountSpinner"
    android:orientation="horizontal" >

    <Button
        android:id="@android:id/button1"
        style="@style/ButtonBarButton"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="50dp"
        android:text="@string/login" />
    <Button
        android:id="@android:id/button2"
        style="@style/ButtonBarButton"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="50dp"
        android:enabled="false"
        android:text="@string/login" />
</LinearLayout> 
```

这种风格：

```
<style name="ButtonBarButton">
</style>

<style name="ButtonBar" parent="@android:style/ButtonBar">
</style> 
```

对于 v11：

```
<style name="ButtonBarButton" parent="@android:style/Widget.Holo.Button.Borderless">
    <item name="android:textColor">@android:color/primary_text_light</item>
</style>

<style name="ButtonBar" parent="@android:style/Holo.Light.ButtonBar.AlertDialog">
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T01:13:27.507

我通过使用两个单独的布局文件解决了这个问题，一个位于`layout`文件夹中，一个位于`layout-v11`. 它们几乎相同，只是它们包含不同的`style`属性值。

第一个看起来像这样（在`layout`）：

```
<LinearLayout
    android:id="@+id/buttonArea"
    style="@style/buttonBar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:gravity="bottom|right"
    android:orientation="horizontal"
    android:padding="5dp" >

    <Button
        android:id="@+id/button1"
        style="@style/buttonBarButton"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"/>

    <Button
        android:id="@+id/button2"
        style="@style/buttonBarButton"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"/>
</LinearLayout> 
```

第二个看起来像这样（在`layout-v11`）：

```
<LinearLayout
    android:id="@+id/buttonArea"
    style="?android:attr/buttonBarStyle"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:gravity="bottom|right"
    android:orientation="horizontal"
    android:padding="5dp" >

    <Button
        android:id="@+id/button1"
        style="?android:attr/buttonBarButtonStyle"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"/>

    <Button
        android:id="@+id/button2"
        style="?android:attr/buttonBarButtonStyle"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"/>
</LinearLayout> 
```

由于重复信息的数量，我对这种方法并不完全满意。我想找到一种`?android:attr/buttonBarButtonStyle`用作父样式的方法，但我找不到实现此目的的方法。

# iphone - 如何在 iOS 的 post 请求中发送表单数据？

> ID：14297310
> 
> 赞同：3
> 
> 时间：2013-01-12T19:51:54.590
> 
> 标签：iphone, ios, objective-c, url, post

> **可能重复：**
> [Objective-C iPad 开发中的 POST](https://stackoverflow.com/questions/12712861/post-in-objective-c-ipad-dev)

我对网络之类的东西非常缺乏经验，所以请善待。

我正在尝试使用以下表单数据发送发布请求

`{"email":"JoeSmith@aol.com","password":"password","password_confirm":"password","name":"Joe Smith","cellphone":"4402415585","address":"Fake Street"}:`

到目前为止，这是我所拥有的：

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@",SERVER_ADDRESS]] cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData
                                                   timeoutInterval:10];
[request setHTTPMethod: @"POST"];
NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self];
[connection start]; 
```

我的问题是我无法弄清楚如何在此请求中包含表单数据。我确信`NSMutableURLRequest`可以使用一种简单的方法，但我无法弄清楚是哪一种。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T20:16:36.310

您需要将 JSON 字符串转换为 NSData 格式。然后您就可以在 URLRequest 对象中将此数据设置为 HTTP 正文。

添加代码示例：

```
NSData* postData= [<yourJSON> dataUsingEncoding:NSUTF8StringEncoding];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
  [request setHTTPMethod:@"POST"];
  [request setValue:[NSString stringWithFormat:@"%d", postData.length] forHTTPHeaderField:@"Content-Length"];
  [request setValue:@"application/x-www-form-urlencoded charset=utf-8" forHTTPHeaderField:@"Content-Type"];
  [request setHTTPBody:postData];

  NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request 
                                                                delegate:self];

  [connection start]; 
```

如果有更多帮助，请告诉我...

# c# - 带有MVVM模式的WPF MessageBox？

> ID：14297312
> 
> 赞同：9
> 
> 时间：2013-01-12T19:52:13.603
> 
> 标签：c#, .net, wpf, mvvm, messagebox

假设我想向用户显示一些验证错误。在 MVVM 模式中，我可以有一个绑定到我的视图模型上的某个属性的标签。但是，如果我想在严格遵守 MVVM 模式的同时显示一个消息框怎么办。我的视图模型将绑定到什么，以及它将如何触发创建/显示的消息框？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-12T20:27:11.447

有一个接口`IMessageBoxService`：

```
interface IMessageBoxService
{
    bool ShowMessage(string text, string caption, MessageType messageType);
} 
```

创建一个`WPFMessageBoxService`类：

```
using System.Windows;

class WPFMessageBoxService : IMessageBoxService
{
    bool ShowMessage(string text, string caption, MessageType messageType)
    {
        // TODO: Choose MessageBoxButton and MessageBoxImage based on MessageType received
        MessageBox.Show(text, caption, MessageBoxButton.OK, MessageBoxImage.Information);
    }
} 
```

在您`ViewModel`接受 IMessageBoxService 作为构造函数参数并`WPFMessageBoxService`使用 DI/IoC 注入。

在 ViewModel 中，用于`IMessageBoxService.ShowMessage`显示 MessageBox。

```
ShowMessageCommand = new DelegateCommand (
    () => messageBoxService.ShowMessage(message, header, MessageType.Information)
); 
```

`IMessageBoxService`根据您的需要自定义界面，并选择更好的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T20:01:50.967

您可以将消息框控件的可见性绑定到验证。

为此，您将需要一个 Bool To Visibility 转换器。

有关使用内置转换器的信息，请参见此处： [Binding a Button's visibility to a bool value in ViewModel](https://stackoverflow.com/questions/7000819/binding-a-button-visibility-to-bool-value-in-viewmodel)

# java - Java - 我在 Eclipse 中没有 Swing

> ID：14297313
> 
> 赞同：-1
> 
> 时间：2013-01-12T19:52:17.163
> 
> 标签：java, eclipse, swing, wizard

好的，我知道我有 swing 库，因为我可以通过编程方式添加 JFrame。但是，我无法在 Eclipse 中使用 New > Other > Swing 等添加 JFrame，因为我的其他向导中没有 Swing 文件夹。

[![截屏](../Images/804eff72b810efd4eaf0b5452acd813a.png)](https://i.stack.imgur.com/koFxU.png)
[（来源：[gyazo.com](http://gyazo.com/957c304fe13fb5741c122719faaf8856.png?1358020174)）]

如何添加 Swing 向导？

对不起，如果这是一个非常愚蠢的问题，但我不明白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:55:30.237

在 Eclipse Marketplace 中搜索可能会添加您需要的东西的 Swing 插件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-12T19:55:03.343

没有这样的挥杆向导。也没有内置选项可以使用 GUIBuilder 或类似的东西创建它们。但是有插件可以做到这一点。
您似乎安装了具有此功能的 Google WindowBuilder。也许您应该阅读常见问题解答中的如何使用它。[这里](https://developers.google.com/java-dev-tools/wbpro/?hl=de)可能是一个很好的起点。

# c# - 如何全局检测点击（触摸输入）而不是鼠标点击？

> ID：14297322
> 
> 赞同：12
> 
> 时间：2013-01-12T19:53:27.883
> 
> 标签：c#, .net, winapi, windows-8, touch

我想制作一个在用户触摸他的屏幕时显示自己的应用程序。它不应该适用于点击。我在 Windows 7/8 中查找了触摸处理程序。但是我看到每个触摸窗口都必须用 RegisterTouchWindow 注册

TL;博士

有没有办法让我的窗口外的接触点位置（全局）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-13T15:18:21.103

Win 8 应用程序不再需要 RegisterTouchWindow。

据我所知，有几种方法可以实现您的目的，但有一些限制。

1.  [本文](http://www.codeproject.com/Articles/381673/Using-the-RawInput-API-to-Process-MultiTouch-Digit)适用于 Win 7 和 8。但触摸屏的供应商 ID 和产品 ID 是必需的。您的应用程序可能无法在某些触摸设备上正常工作。

2.  在Win 8上使用[RegisterPointerInputTarget](http://msdn.microsoft.com/library/windows/desktop/hh454911%28v=vs.85%29.aspx)。从我的调试来看，windows 8的触摸机制有其独特的特点。在touch down和touch up之间，所有的touch事件都会被发送到第一个touch事件的window，无论是window被最小化还是被另一个window覆盖，或者在其后期设置WS_EX_TRANSPARENT属性。如果第一个被销毁，则只能将按下和释放之间的触摸事件共享到另一个窗口。使用此 API，所有的触摸事件都将发送到注册的窗口。[直到注册的窗口调用UnregisterPointerInputTarget或使用](http://msdn.microsoft.com/en-us/library/windows/desktop/hh454915%28v=vs.85%29.aspx)[InjectTouchInput](http://msdn.microsoft.com/en-us/library/windows/desktop/hh802881%28v=vs.85%29.aspx)将触摸输入注入回系统后，其他窗口才能接收到触摸事件. “注册的输入目标注入的输入不会被拦截。” 请注意，使用此 API 需要 UI 访问权限。可以在[此处](http://video.ch9.ms/build/2011/slides/APP-189T_Humphrey.pptx)找到示例。

3.  窗户挂钩。对于 Win 7/8 上的桌面应用程序，可以通过使用带有 WH_CALLWNDPROC 或 WH_GETMESSAGE的[SetWindowsHookEx轻松挂钩触摸事件。](http://msdn.microsoft.com/en-us/library/ms644990%28VS.85%29.aspx)对于 Win 8 上的 Metro 应用程序，在窗口的消息循环中只能检测到第一个指针事件。虽然指针事件可以通过单击或点击来发生，但[GetPointerType](http://msdn.microsoft.com/library/windows/desktop/hh454892%28v=vs.85%29.aspx)可以告诉您它是触摸指针还是鼠标指针。可以在[此处](http://msdn.microsoft.com/en-us/library/ms644960%28VS.85%29.aspx)找到使用钩子的示例。

处理指针事件的代码片段：

```
switch(Msg)  
{  
...  
case WM_POINTERENTER:  
case WM_NCPOINTERDOWN:  
case WM_NCPOINTERUP:  
case WM_NCPOINTERUPDATE:  
case WM_POINTERACTIVATE:  
case WM_POINTERCAPTURECHANGED:  
case WM_POINTERDOWN:  
case WM_POINTERLEAVE:  
case WM_POINTERUP:  
case WM_POINTERUPDATE:  
    {  
        UINT32 pointerId = GET_POINTERID_WPARAM(wParam);  
        POINTER_INPUT_TYPE pointerType;  

        if (GetPointerType(pointerId, &pointerType))  
        {
            if (pointerType == PT_TOUCH)   
            {  
                ...  
            }  
        }  
    }  
    break;  
... 
```

# opengl - OpenGL save compressed textures and mipmaps

> ID：14297323
> 
> 赞同：-1
> 
> 时间：2013-01-12T19:53:33.630
> 
> 标签：opengl, compression, save, textures, mipmaps

I'm trying to make my loading a bit faster (right now engine loads TGA files, compress them and creates mipmaps and it takes too long) So my idea is to save already compressed textures and next time just copy-paste it to memory without compressing it another time. But there is a problem - I don't know how to save compressed textures to a file. I have to save data in format that is very easy for opengl to load. Same situation with mipmaps.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T23:29:21.733

You can retrieve the compressed texture image data using [glGetCompressedTexImage](http://www.opengl.org/sdk/docs/man/xhtml/glGetCompressedTexImage.xml). You'll also likely need to retrieve the image format (details are at the bottom of the glGetCompressedTexImage man page). As for storing the image data, use any file format that matches your need (including just a simple binary file).

# android - 显示从 json 文件中读取的信息 - android

> ID：14297328
> 
> 赞同：0
> 
> 时间：2013-01-12T19:53:58.220
> 
> 标签：android, json

我在项目的 raw 文件夹中的 json 文件中有以下（以及更多，但只是其中的一部分）代码。

```
{
"Monday": [
    {
        "time": "09:15",
        "class": "Nature",
        "room": "AL32"
    },
    {
        "time": "10:15",
        "class": "Nature",
        "room": "AL32"
    }
],
"Tuesday": [
    {
        "time": "12:15",
        "class": "Maths",
        "room": "AL20"
    },
    {
        "time": "13:15",
        "class": "Englsh",
        "room": "AG22"
    }
]....etc

} 
```

我希望它显示为

```
Time|Class|Room
Monday
09:15|Nature|AL32
10:15|Nature|AL32
Tuesday
12:15|Maths|AL20
13:15|English|AG22
etc etc 
```

我所做的（到目前为止）是，用 BufferedReader jsonReader = new BufferedReader(new InputStreamReader(this.getResources().openRawResource(R.raw.localjsonfile))); 读取json文件中的信息

然后我可以打印出文件中的所有内容（到 LogCat）

```
String readLine = null;
// While the BufferedReader readLine is not null 
while ((readLine = jsonReader.readLine()) != null) 
{
    System.out.println(readLine);
} 
```

但我不知道从那里去哪里。我想我在星期一将任何东西存储在一个名为 monday 的数组/对象中（周二在一个名为 tuesday 的数组/对象中），然后打印出数组/对象中的值并将它们放在我拥有的 TextView 字段中（我有三个名为 android:id="@+id/time"、android:id="@+id/class 和 android:id="@+id/room") 的文本视图，然后文本视图将被重新打印到屏幕上如所须。

我才开始学习 android 和 java，我对 json 一无所知，所以我被困在如何走得更远。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:17:51.997

尝试使用此代码从行文件夹中获取 JSON 并进行解析。

```
 //Get Data From Text Resource File Contains Json Data.

        InputStream inputStream = getResources().openRawResource(R.raw.localjsonfile);

        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

        int ctr;
        try {
            ctr = inputStream.read();
            while (ctr != -1) {
                byteArrayOutputStream.write(ctr);
                ctr = inputStream.read();
            }
            inputStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        Log.v("Text Data", byteArrayOutputStream.toString());
        try {

            // Parse the data into jsonobject to get original data in form of json.  
            JSONObject jObject = new JSONObject(
                    byteArrayOutputStream.toString());

            JSONArray jArray = jObject.getJSONArray("Monday");
            String  time="";
            String class ="";
            String room ="";

            ArrayList<String[]> data = new ArrayList<String[]>();
            for (int i = 0; i < jArray.length(); i++) {
                time= jArray.getJSONObject(i).getString("time");
                class= jArray.getJSONObject(i).getString("class");
                 room= jArray.getJSONObject(i).getString("room");

                data.add(new String[] {time, class,room});
            }

        } catch (Exception e) {
            e.printStackTrace();
        } 
```

查看此[库](http://www.json.org/java/)以获取有关 JSON 解析的帮助，有关 JSON 解析的更多示例，请阅读[本文](http://www.vogella.com/articles/AndroidJSON/article.html)

# java - 使用 Java API 进行 ElasticSearch 全文搜索

> ID：14297329
> 
> 赞同：8
> 
> 时间：2013-01-12T19:53:58.487
> 
> 标签：java, lucene, elasticsearch

我最近开始探索搜索世界，并尝试使用 ES 作为我的 MongoDB 的索引。我已经成功地集成了它们，但我发现搜索 API 相当复杂和令人困惑。Java API 也不是很有帮助。我能够找到完全匹配的内容，但如何进行全文搜索？这是我的代码：

```
Settings settings = ImmutableSettings.settingsBuilder()
    .put("cluster.name", "elasticsearch").build();
Client client = new TransportClient(settings)
    .addTransportAddress(new InetSocketTransportAddress("host-ip", 9300));
SearchResponse response = client.prepareSearch("mongoindex")
    .setSearchType(SearchType.QUERY_AND_FETCH)
    .setQuery(termQuery("name", "*name*"))
    .setFrom(0).setSize(60).setExplain(true)
    .execute()
    .actionGet(); 
```

`"name":"testname"`我在查找using时没有问题`.setQuery(termQuery("name", "testname"))`，但`"name":"this is a test name"`不适用于上面的示例。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T08:26:42.543

[在互联网上爬了几个小时后，在javadocs](http://es-java-doc.medcl.net)的帮助下，我设法弄明白了。最重要的是接口`*QueryBuilder*`及其实现类。我用于`FieldQueryBuilder`我的查询，如下面的`setQuery`方法所示。

```
SearchResponse response = client.prepareSearch("mongoindex")
    .setSearchType(SearchType.QUERY_AND_FETCH)
    .setQuery(fieldQuery("name", "test name"))
    .setFrom(0).setSize(60).setExplain(true)
    .execute()
    .actionGet();
SearchHit[] results = response.getHits().getHits();
for (SearchHit hit : results) {
  System.out.println(hit.getId());    //prints out the id of the document
  Map<String,Object> result = hit.getSource();   //the retrieved document
} 
```

使用生成的 Map 对象，您可以简单地调用该`get`方法来检索相关数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-13T18:55:13.500

最好看看 [wildcard Query] ( [http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-wildcard-query.html](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-wildcard-query.html) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T21:51:10.670

看起来弹性搜索中的[termQuery](http://www.elasticsearch.org/guide/reference/query-dsl/term-query.html)使用 Lucence 作为搜索语法。根据[Lucene 文档](http://www.lucenetutorial.com/lucene-query-syntax.html)，“*”通配符不允许作为搜索的第一个词。

# java - 纸牌游戏无法打印纸牌

> ID：14297330
> 
> 赞同：-2
> 
> 时间：2013-01-12T19:54:00.390
> 
> 标签：java, object, printing, arraylist, playing-cards

我正在开发一个java纸牌游戏，它接近纸牌游戏的*心*。我有很多结构，但现在我被卡住了，我无法打印它。它有不同数量的玩家 - 我需要它为每个玩家发五张牌 - 显示每个玩家收到了哪些牌。我认为“Session.dealHands”方法存在问题。希望大家能帮忙。

***会话类***

```
import java.util.ArrayList;
import java.util.Collections;

public class Session {

    // Variables
    static int numberOfPlayers = PlayGame.generateRandom(2, 10);
    Player player[] = new Player[numberOfPlayers];
    static int numberOfRounds;
    static int leadPlayer = 1;

    // Initializes the class Deck and assign it to DeckOfCards
    static Deck deckOfCards = new Deck();

    public static void initializeSession() {
        // initializes the deck from Deck class
        Deck.createDeck();
        // Creates an array of players
        Player player[] = new Player[numberOfPlayers];

        for (int i = 0; i < Session.numberOfPlayers; i++) {
            player[i] = new Player(i);
        }
        // Makes the possible amount of rounds determined by numberOfPlayers
    maxRounds();
    whoIsLeadPlayer();

        System.out.println("Welcome - The Game has Startet");
        System.out.println("\n" + "The number of Players " + numberOfPlayers);
        System.out.println("Number of rounds is: " + numberOfRounds);
        System.out.println("\n" + "The leadPlayer is: " + leadPlayer );

        //playSession(player);
    }
public static void whoIsLeadPlayer(){
    //for(leadPlayer = 1; leadPlayer < numberOfPlayers; leadPlayer++){
        //Player pls = new Player();

    //}

}

    private static void maxRounds() {
            if (numberOfPlayers == 2) {
                numberOfRounds = 5;
            } else if (numberOfPlayers == 3) {
                numberOfRounds = 3;
            } else if (numberOfPlayers < 6) {
                numberOfRounds = 2;
            } else {
                numberOfRounds = 1;
            }       
    }

    public static void playSession(Player player[]) {
        for (int i = 0; i < Session.numberOfRounds; i++) {

            dealHands(player);
            playRound(player);

        }
    }

    // Should be able to deal a Hand
    public static void dealHands(Player player[]) {
    for (int i = 0; i < 4; i++){
        Card currentCard = deckOfCards.getCard(PlayGame.generateRandom(0, 52));
        player[i].hand.add(new Card(Card.rank, Card.suit));
        //System.out.println(player[i].hand);
    }

        /*for (int i = 0; i <= 4; i++) {
            Card currentCard = deckOfCards.getCard(PlayGame.generateRandom(0, deckOfCards.cards.size()));
            player[i].hand.add(new Card(currentCard.getRank(), Card.getSuit()));
        }*/

    }

    public static void playRound(Player player[]) {
        for (int i = 0; i < Session.numberOfPlayers; i++) {
            playTurn(player);
        }
    }

    public static void playTurn(Player player[]) {
        // placeCard();
    }

    private static void placeCard() {

    }

    public static void printCards(Player player[]) {
        // Card card;
        for (int i = 0; i <= Session.numberOfPlayers; i++) {
            for (int j = 0; j <= player[i].hand.size(); j++) {
                Card card = player[i].hand.get(j);
                System.out.println("player" + i + "card " + card.getSuit() + ""
                        + card.getRank());

            }
        }
    }
} 
```

***甲板等级***

```
import java.util.ArrayList;

public class Deck {
    // Create Arraylist to store deck of cards
    static ArrayList<Card> cards = new ArrayList<Card>();

    // Adds numbers to the ArrayList
    public static void createDeck() {
        for (int suit = 0; suit < 3; suit++) {
            for (int rank = 0; rank < 12; rank++) {
                cards.add(new Card(suit, rank));
            }
        }
    }

    // Get Card Method to get a card from the Card class
    public Card getCard(int iD) {
        //Card card = ID;
        Card gC = new Card(Card.getRank(), Card.getSuit());
        cards.remove(iD);
        return gC;
    }
} 
```

***卡类***

```
import java.util.*;

public class Card {

    static int rank;
    static int suit;

    public static int getRank() {
        return rank;
    }

    public void setRank(int rank) {
        this.rank = rank;
    }

    public static int getSuit() {
        return suit;
    }

    public void setSuit(int suit) {
        this.suit = suit;
    }

    public Card(int rank, int suit) {
        this.rank = rank;
        this.suit = suit;
    }
} 
```

***玩家等级***

```
import java.util.ArrayList;
import java.util.Collections;

public class Player {

    boolean leadPlayer;
    int score;
    ArrayList<Card> hand = new ArrayList<Card>();

    // Getters and Setter methods to be implemented later
    public int getScore() {
        return score;
    }

    public void setScore(int score) {
        this.score = score;
    }

    public int getPlayerID() {
        return playerID;
    }

    public void setPlayerID(int playerID) {
        playerID = 1;
        this.playerID = playerID;
    }

    public ArrayList<Card> getHand() {
        return hand;
    }

    public void setHand(ArrayList<Card> hand) {
        this.hand = hand;
    }

    public boolean isLeadPlayer() {
        return leadPlayer;
    }

    public void setLeadPlayer(boolean leadPlayer) {
        Session.leadPlayer++;
        this.leadPlayer = leadPlayer;
    }

    int playerID;

    // Constructor to call when using a Player
    public Player(int playerID) {
        this.playerID = playerID;
    }
} 
```

***主班***

```
import java.util.Random;

public class PlayGame {

    // Starts the program
    public static void main(String[] args) {

        Session.initializeSession();

    }

    public static int generateRandom(int min, int max) {
        Random r = new Random();
        int random = r.nextInt(max - min) + min;
        return random;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T19:55:13.700

请摆脱那些静态方法和字段！

```
public class Card {

    static int rank; // ???????
    static int suit; // ???????

    public static int getRank() { // ???????
        return rank;
    }

    public void setRank(int rank) {
        this.rank = rank;
    }

    public static int getSuit() { // ???????
        return suit;
    } 
```

这是没有意义的，因为任何卡片都不会有自己的花色和等级字段，因为它们将是类而不是实例的属性。使它们成为所有***非静态***实例字段和方法。

实际上，除了 main 方法之外，您上面的代码中可能没有任何内容应该是静态的。

**编辑：**
此外，这需要更改：

```
player[i].hand.add(new Card(Card.rank, Card.suit)); 
```

你试图获得职业卡片的等级和花色，***这***在逻辑上并不合理。你想用这个来达到什么目的？

# frameset - 框架的替代品

> ID：14297333
> 
> 赞同：1
> 
> 时间：2013-01-12T19:54:05.990
> 
> 标签：frameset

我们有一个 Web 应用程序，并且正在使用框架集进行布局。（[示例](http://www.sportsmanager.us/orgmanager/NHYLA.htm)）。但是我读到框架已被弃用，并且基于网站的网站也不符合 ADA 标准，谷歌或任何其他搜索引擎不会获取任何内容，因为这些系统只会找到设置框架的页面，而不是框架本身的内容. 所以我的问题是框架的替代品是什么？谢谢，拉维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:39:06.223

使用 div 标签。尝试这样的事情：

```
<div id="header">
    HEADER STUFFS
</div>
<div id="below-header">
    <div id="menu">
        MENU STUFFS
    </div>
    <div id="content">
        CONTENT STUFFS
    </div>
</div> 
```

使用以下 CSS：

```
#header {
    height: HEADER HEIGHT;
}
#below-header {
    position: absolute;
    top: HEADER HEIGHT;
    right: 0;
    bottom: 0;
    left: 0;
}
    #menu {
        width: MENU WIDTH;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
    }
    #content {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: MENU WIDTH;
    } 
```

当然换成自己喜欢的。您可以使用百分比作为宽度和高度。

然后，真正的挑战是如何在按下菜单中的链接时将内容加载到 content-div 中。为此，我建议使用 AJAX（最好使用 jQuery 之类的库，因为它更容易）。另一种解决方案是制作许多具有相同标题和菜单但内容不同的页面，但我不建议这样做。你会后悔一辈子。

一个简单的脚本是：

```
$(function() {
    $("a").each(function() {
        var pat = /^https?:\/\//i;
        var url = $(this).attr("href");
        if(!pat.test(url)) {
            $("body").on("click", "a", (function(e) {
                e.preventDefault();
                $.get(url, function(data) {
                    $("#content").html(data);
                });
            });
        }
    });
} 
```

这里所有的相对链接都设置为将内容加载到内容 div 中而不重新加载页面。所以：

```
<a href="contact.html">Contact us!</a> 
```

将 contact.html 的内容加载到内容 div 中，并且：

```
<a href="http://www.google.com">Google.com</a> 
```

会将页面重定向到 google.com。

其他要考虑的事情是在更改内容时更改 url。但这是一个完全不同的故事。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:10:58.187

框架肯定已被弃用，正如您正确指出的那样，主要网站非常积极地劝阻。如今，许多网站将 CSS 与 Javascript 结合使用（特别是通过使用[jQuery](http://jquery.com/)（尤其是 UI 部分）和[Dojo](http://dojotoolkit.org/)等库），以便拥有用于提供的那种动态布局框架。

当需要重新加载页面的某些部分而不重新加载整个页面时尤其如此，在这种情况下，通常使用 AJAX 来加载页面的某些部分。有很多很棒的教程我不会在这里列出（谷歌是你的朋友！）关于如何完成这个并实现类似于过去提供的框架的布局。

这绝对是一个最通用的答案，因为我不知道您的编码技能水平或预算（时间或金钱），因为也有许多简单的方法可以建立一个简单的网站（[Sites.google.com](http://sites.google.com/)等）其他）。

# c# - 来自数据库或代码的 DropDownListFor 枚举的 MVC4 最佳实践

> ID：14297334
> 
> 赞同：4
> 
> 时间：2013-01-12T19:54:12.830
> 
> 标签：c#, .net, asp.net-mvc, razor, asp.net-mvc-4

我对 MVC 还很陌生，想知道在我的编辑器模板中填充下拉列表的最佳方式？

我正在构建一个具有很多下拉列表的应用程序，并且这些下拉列表的数据是非常静态的。目前我将它们全部放在数据库中的一个表中，然后将它们加载到会话中。

这是一个例子：

我的观点：

```
 @{
        var widgettypes = Business.MySession.Current.WidgetTypes.ToSelectList(d => d.TypeName,
                                   d => d.WidgetTypeID.ToString(),
                                   " - Select - ");
    }
    <div class="editor-label">
        @Html.LabelFor(model => model.WidgetTypeID)
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => model.WidgetTypeID, @widgettypes)
        @Html.ValidationMessageFor(model => model.WidgetTypeID)
    </div> 
```

下拉助手：

```
 public static List<SelectListItem> ToSelectList<T>(
            this IEnumerable<T> enumerable,
            Func<T, string> text,
            Func<T, string> value,
            string defaultOption)
    {
        var items = enumerable.Select(f => new SelectListItem()
        {
            Text = text(f),
            Value = value(f)
        }).ToList();
        items.Insert(0, new SelectListItem()
        {
            Text = defaultOption,
            Value = "-1"
        });
        return items;
    } 
```

我在 SO 上看到了很多示例，这些示例显示了在视图中静态创建选择列表。

最佳实践是从.net 代码中的静态枚举的视图中创建它们，还是最好按照我现在这样做的方式进行？或者它只是无关紧要？

我只想知道我应该做什么，而不是什么才有效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T20:04:18.843

我个人认为数据库驱动是要走的路。主要是根据经验，假设您想在查找中添加一个值并且您已经部署了您的应用程序，您必须在将新值添加到 Enum 后重新部署代码。由于它们是数据库驱动的，您只需对数据库运行插入查询，无需重新部署。

我不会在你的视图中那样调用你的数据库，我不会说这是最佳实践，因为这不是视图的责任，它只需要显示数据，而不是查询额外的数据。

首先，将您想要的项目放在模型的下拉列表中，如下所示：

```
public class YourModel
{
    public int WidgetTypeId { get; set; }
    public SelectList WidgetTypes { get; set; }
    //...rest of your model
} 
```

然后，在控制器中的 GET 方法中（在返回视图之前，使用视图中的代码填充该列表：

```
public ActionResult MyAction()
{
    YourModel model = new YourModel();

    model.WidgetTypes = Business.MySession.Current.WidgetTypes
        .ToSelectList(d => d.TypeName, d => d.WidgetTypeID.ToString(), " - Select - ");

    return View(model);
} 
```

然后在您看来，只需执行以下操作：

```
@Html.DropDownListFor(model => model.WidgetTypeID, Model.WidgetTypes) 
```

# iphone - 显示来自 nstask 错误的输出

> ID：14297335
> 
> 赞同：1
> 
> 时间：2013-01-12T19:54:22.557
> 
> 标签：iphone, objective-c, xcode, nstask

好的，所以我正在尝试制作一个基本上是脚本的 GUI 的应用程序，我无法正常工作的部分是显示脚本的输出，起初我有它，所以它应该是我完成任务后的所有内容不用说是没有好处的。我现在所处的位置是我可以在 uitextview 中实时获取输出，但是随着新信息的传递，它会经过数圈传递，使其不可读，我在示例中使用了脚本 apt-get update。我是一个新的越狱开发者，是的，我的应用程序以 root 权限运行我唯一的问题是输出......我的代码是这样的：

```
#import "RootViewController.h"

@implementation RootViewController
@synthesize navItem;
- (void)loadView {
    self.view = [[[UIView alloc] initWithFrame:       [[UIScreen mainScreen] applicationFrame]]        autorelease];
    self.view.backgroundColor = [UIColor        redColor];

    navBar = [[UINavigationBar alloc] init];
    navBar.frame = CGRectMake(0, 0,         self.view.frame.size.width, 44);

    navItem = [[[UINavigationItem alloc]
    initWithTitle:@"GUI"] autorelease];
    navBar.barStyle = UIBarStyleDefault;
    navBar.items = [NSArray     arrayWithObject:navItem];
    [self.view addSubview:navBar];

    NSPipe *pipe = [NSPipe pipe];

    _fileHandle = [pipe fileHandleForReading];
    [_fileHandle readInBackgroundAndNotify];

    task = [[NSTask alloc] init];
    [task setLaunchPath:@"/usr/bin/apt-get"];
    [task setStandardOutput: pipe];
    [task setStandardError: pipe];

        NSArray *arguments;
    arguments = [NSArray arrayWithObjects:     @"update", nil];
    [task setArguments: arguments];

    [task launch];

}
-(id)init
{
    [super init];
    [[NSNotificationCenter defaultCenter]     addObserver:self
    selector:@selector( readPipe: )
      name:NSFileHandleReadCompletionNotification 
    object:nil];
    return self;
}

-(void)dealloc
{
    [[NSNotificationCenter defaultCenter]     removeObserver:self];
}

-(void)readPipe: (NSNotification *)notification
{
    NSData *data;
    NSString *text;

    if( [notification object] != _fileHandle )
        return;

    data = [[notification userInfo] objectForKey:NSFileHandleNotificationDataItem];
    text = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];

    navItem.title = text;

    titleTextField = [[UITextView alloc]   initWithFrame: CGRectMake(0, 40, 320, 350)];
    [titleTextField setBackgroundColor:[UIColor     clearColor]];
    titleTextField.text = text;
    titleTextField.editable = YES;
    titleTextField.scrollEnabled = YES;
    titleTextField.autoresizingMask =UIViewAutoresizingFlexibleHeight;
    [self.view addSubview: titleTextField];

    [text release];
    if( task )
    [_fileHandle readInBackgroundAndNotify];

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:29:40.697

每次`readPipe`使用任务的新输出调用时，您都会创建一个`UITextView`具有*相同框架矩形*的新输出。这就是新文本与先前显示的文本重叠的原因。

您应该使用单个`UITextView`并始终将新文本*附加*`readPipe`到 中，或者为每个文本视图创建一个不同的框架。

# java - 如何在java中求和

> ID：14297341
> 
> 赞同：-8
> 
> 时间：2013-01-12T19:55:06.990
> 
> 标签：java

我有这个字符串：

```
String times = "5:15 | 4:41 | 4:27 | 3:13 | 5:01 | 4:47 | 4:50 | 5:20" 
```

结果应该是“37:34”

如何在 java 字符串中处理这个并返回预期的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:00:43.947

我会用一个标记器来解析这个字符串。
遍历结果`Array`，取所有值的*小时*和*分钟*并将它们相加（h+h 和 min+min）。完成计算后：

```
hours += minutes / 60
minutes = minutes % 60 
```

就是这样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:01:40.260

创建 DateTime 变量并对它们求和是一种方法，但我假设您是 Java 新手，并为您提供基本答案，以警告您进行一些编码，而不是走简单的路：

```
String[] timesSplit = times.split(" | ");

int hour = 0;
int minute = 0;

for(int i = 0; i < timesSplit.length; i += 2) {
    String[] time = timesSplit[i].split(":");
    hour += Integer.parseInt(time[0]);
    minute += Integer.parseInt(time[1]);
}

hour += minute / 60;
minute %= 60;

String result = hour + ":" + minute; 
```

编辑：奇怪的行为，拆分为“|”结果字符串数组，如：

`5:33, |, 1:32, ..`

因此相应地编辑了 for increment 语句。[您可以在此处](http://ideone.com/xrpzIX)查看运行代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T20:05:08.750

我会解析字符串并将所有转换为分钟。比添加它们并将其转换回小时和分钟。

# sql - SQL SELECT：我需要一个“IN ALL”子句

> ID：14297354
> 
> 赞同：5
> 
> 时间：2013-01-12T19:57:05.467
> 
> 标签：sql, oracle, select

我有两张桌子。我需要所有`organizer_id`在 2010 年到 2012 年间组织所有活动的人。

```
event
--------- 
event_id
name
year

event_organizer
---------
event_id
organizer_id 
```

我试过这样的事情：

```
SELECT organizer_id 
  FROM event_organizer
 WHERE event_id IN (SELECT event_id 
                      FROM event 
                     WHERE year>=2010 AND year<=2012); 
```

但它不起作用，因为我只需要`organizer_id`在 2010 年和 2012 年之间组织了所有事件的那些。我不知道查询应该如何看起来像我想要的那样工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T20:04:09.120

你可以写：

```
SELECT t1.organizer_id
  FROM ( SELECT eo.organizer_id,
                COUNT(1) AS num_events
           FROM event_organizer eo
           JOIN event e
             ON eo.event_id = e.event_id
          WHERE e.year BETWEEN 2010 AND 2012
          GROUP
             BY eo.organizer_id
       ) t1
  JOIN ( SELECT COUNT(1) AS num_events
           FROM event e
          WHERE e.year BETWEEN 2010 AND 2012
       ) t2
    ON t1.num_events = t2.num_events
; 
```

（上面的想法是：对于每个组织者，找出他在 2010 年和 2012 年之间组织了多少活动。然后，将其与 2010 年和 2012 年之间的活动总数进行比较。如果这两个数字相同，然后组织者组织了那个时期的所有活动。）

或者，您可以编写：

```
SELECT organizer_id
  FROM organizer       -- I assume you have an 'organizer' table?
 WHERE organizer_id NOT IN
        ( SELECT o.organizer_id
            FROM event e
           CROSS
            JOIN organizer o
            LEFT
           OUTER
            JOIN event_organizer eo
              ON e.event_id = eo.event_id
             AND o.organizer_id = eo.organizer_id
           WHERE e.year BETWEEN 2010 and 2012
             AND eo.event_id IS NULL
        )
; 
```

（这个想法是：找到所有活动组织者配对，使得组织者没有*组织*活动。然后，返回所有未出现在任何此类配对中的组织者。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T20:58:45.393

我认为进行此类查询的最简单方法是使用聚合：

```
with events as (
    select event_id
    FROM event 
    WHERE year>=2010 AND year<=2012
)
select organizer_id
from event_organizer eo
where event_id in (select event_id from events)
group by organizer_id
having count(distinct event_id) = (select count(*) from events) 
```

# asp.net-mvc - 存储库的实体框架和工作单元设计问题

> ID：14297357
> 
> 赞同：0
> 
> 时间：2013-01-12T19:57:35.747
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-4, repository-pattern, unit-of-work

我在使用 UnitOfWork 保存数据时遇到问题。我的意思是我无法使用Controller 类中的**UnitOFWork.Commit()保存数据。**我的实施检查如下。

**工作单位**

```
public interface IUnitOfWork<C> :  IDisposable
{
        int Commit();
        C GetContext { get; set; }
        TransactionScope BeginTransaction();
} 
```

**工作单位**

```
 public class UnitOfWork<C> : IUnitOfWork<C> where C : DbContext
    {
        private bool _disposed;
        private readonly C _dbContext = null;
        private TransactionScope _transaction;

        public UnitOfWork()
        {
            GetContext = _dbContext ?? Activator.CreateInstance<C>();
        }

        public int Commit()
        {
            return GetContext.SaveChanges();
        }

        public C GetContext
        {
            get;
            set;
        }

        public TransactionScope BeginTransaction()
        {
            if (null != _transaction)
            {
                _transaction = new TransactionScope();
            }

            return _transaction;
        }

        #region IDisposable Members
        protected virtual void Dispose(bool disposing)
        {
            if (!_disposed)
            {
                if (disposing)
                {
                    if (null != _transaction)
                    {
                        _transaction.Dispose();
                    }

                    if (null != _dbContext)
                    {
                        _dbContext.Dispose();
                    }

                }

            }

            _disposed = true;
        }

        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);
        }
        #endregion

    } 
```

现在在**RepositoryBase / GenericRepository**

```
public abstract class RepositoryBase<C, E> : IRepository<E> where E : class where C : DbContext
    {
        private readonly IDbSet<E> _dbSet;

        protected RepositoryBase(IUnitOfWork<C> unitOfWork)
        {
            UnitOfWork = unitOfWork;

            _dbSet = UnitOfWork.GetContext.Set<E>();

        }

        protected IUnitOfWork<C> UnitOfWork
        {
            get;
            private set;
        }

        #region IRepository<E> Members

        public void Insert(E entity)
        {
            _dbSet.Add(entity);
            UnitOfWork.GetContext.Entry(entity).State = System.Data.EntityState.Added;
            UnitOfWork.Commit();
        }

[...] 
```

当我使用**UnitOfWork.Commit();** 在**GenericRepository**中，我能够成功保存数据。但是当我使用**UnitOfWork.Commit();** 使用**控制器**我无法保存数据。

**控制器代码**

```
 private readonly IEmployeeRepository _employeeRepository;

    public EmployeeController(IEmployeeRepository employeeRepositoty, IUnitOfWork<MyDbContext> unitOfWork)
    {
        UnitOfWork = unitOfWork;
        this._employeeRepository = employeeRepositoty;
    }

  [HttpPost]
        public ActionResult Create(EmployeeModel employeemodel)
        {
            if (ModelState.IsValid)
            {

                    using (UnitOfWork)
                    {
                        _employeeRepository.Insert(employeemodel);

                        UnitOfWork.Commit();  //OR UnitOfWork.GetContext.SaveChanges();                  

                    }  

                return RedirectToAction("Index");
            }

            return View(employeemodel);
        } 
```

如果我在 Controller 中使用**UnitOfWork.commit()则****GenericRepository** Insert 方法代码检查如下

```
 public void Insert(E entity)
        {
            _dbSet.Add(entity);
            UnitOfWork.GetContext.Entry(entity).State = System.Data.EntityState.Added;
        } 
```

据我了解，这是 UnitOfWork 的设计问题。请帮我解决这个问题。

**IEmployee存储库**

```
public interface IEmployeeRepository : IRepository<EmployeeModel>
{

}

public class EmployeeRepository : RepositoryBase<MyDbContext, EmployeeModel>, IEmployeeRepository
{
    public EmployeeRepository(IUnitOfWork<MyDbMContext> unitOfWork)
        : base(unitOfWork)
    {

    }
} 
```

**NinjetDI配置**

```
kernel.Bind<IUnitOfWork<MyDbContext>>().To<UnitOfWork<MyDbContext>>();
kernel.Bind<ICountryRepository>().To<CountryRepository>();
kernel.Bind<IUserProfileRepository>().To<UserProfileRepository>();
kernel.Bind<IEmployeeRepository>().To<EmployeeRepository>(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:52:17.207

可能是错误的 DI (Ninject) 配置造成了问题。解决方案检查如下。

```
kernel.Bind<IUnitOfWork<MyDbContext>>().To<UnitOfWork<MyDbContext>>().InRequestScope();
kernel.Bind<IEmployeeRepository>().To<EmployeeRepository>().InRequestScope(); 
```

实际上我没有`.InRequestScope();`在我以前的配置中使用。这就是为什么它会产生神秘的行为。

但仍然无法理解这背后的原因。欢迎澄清。

根据**Mystere Man**的澄清（**问题：** 由于您在存储库和控制器中都使用 UnitOfWork，因此您有两个不同的实例，并且每个实例都有自己的上下文。因此，您将实体添加到一个上下文（在您的存储库）但您在不同的上下文中调用了 SaveChanges。由于该不同的上下文没有添加任何内容，因此什么也没有发生。

**建议：**您不需要创建存储库 InRequestScope，只需创建 UnitOfWork，因为它包含上下文）。

所以**最好的解决方案**检查如下。

```
kernel.Bind<IUnitOfWork<MyDbContext>>().To<UnitOfWork<MyDbContext>>().InRequestScope();
kernel.Bind<IEmployeeRepository>().To<EmployeeRepository>(); 
```

如果不使用`_dbContext ?? Activator.CreateInstance<C>();`，是否可以通过 Ninject 获取 DbContext 实例？

是的，根据**MystereMan**的建议，它是可行的。检查下面的解决方案

**Ninject DI 配置**

```
kernel.Bind<MyDbContext>().ToSelf().InRequestScope();
kernel.Bind<IUnitOfWork<MyDbContext>>().To<UnitOfWork<MyDbContext>>();
kernel.Bind<IEmployeeRepository>().To<EmployeeRepository>(); 
```

在**UnitOfWork中**

```
 public class UnitOfWork<C> : IUnitOfWork<C> where C : DbContext
    {
        private readonly C _dbcontext;

        public UnitOfWork(C dbcontext)
        {
            _dbcontext = dbcontext;
        }

        public int Commit()
        {
           return _dbcontext.SaveChanges();
        }

        public C GetContext
        {
            get
            {
                return _dbcontext;
            }

        }
[...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:44:40.207

你有很多问题没有解决。看起来您可能正在使用某种依赖注入，如果是这种情况，您使用的是什么 DI 框架，以及您的绑定是如何声明的？

我认为，这里真正的问题是，您的存储库是使用与您用来调用的不同的 UnitOfWork 创建的`Commit()`。查看控制器的构造和传递实例将确定如何解决问题。

顺便说一句，EF 通常不需要 TransactionScope，因为它已经使用了隐含的事务。

另外，我会非常小心那个 using 语句。如果您尝试在该块之外使用 UnitOfWork，它可能会产生严重的错误。相反，我会让我的 DI 框架负责处理 UnitOfWork，因为它是创建它的那个。

就此而言，我还将使用 DI 框架在您的 UoW 中创建上下文，而不是使用 Activator。

# database - Magento 数据库中的哪些表是事务性电子邮件保存到的？

> ID：14297360
> 
> 赞同：3
> 
> 时间：2013-01-12T19:57:47.527
> 
> 标签：database, magento

不久前，我不得不重新开始我的 Magento 商店。在此之前，我创建了新的交易电子邮件。我有我的旧数据库，我想找到这些电子邮件在数据库中的位置，所以我不必重新创建它们。他们保留了哪些表格？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-12T20:22:58.790

所有自定义交易电子邮件模板都存储在**core_email_template**中。

# bash - 如何同时运行两个 while 循环？重击

> ID：14297362
> 
> 赞同：1
> 
> 时间：2013-01-12T19:57:50.897
> 
> 标签：bash, shell

好吧，我只是想知道如何同时运行两个 while 循环。我听说过 while 循环中的 done&，但当我尝试使用它时，它最终失败了。我也听说过使用类似 fork 循环的方法，但我仍然不明白。

如果有人有想法，您可以给我一个小示例脚本，以便我理解。我也不拒绝 done& 和 fork 循环只是不知道如何正确使用它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T21:21:59.033

```
#!/bin/bash

while [ number == 1 ]; do sleep 1 echo "$time" done &

while [ number == 1 ]; do sleep 1 time=$(echo "$time+1" | bc) done 
```

当您运行上述脚本时，while 循环作为单独的进程运行，它们无法“看到”变量`time`，因为它们会将它们作为自己的局部变量。为了跨进程发送数据，您必须使用 IPC 机制。

您可以使用创建[**命名管道**](http://www.kernel.org/doc/man-pages/online/pages/man3/mkfifo.3.html)`mkfifo`并将`time`值从一个进程发送到另一个进程。以下是您尝试执行的操作的简单示例：

```
#!/bin/bash

mkfifo mypipe #Creates a named pipe

while read line<mypipe; 
do 
  sleep 1
  echo "$line" 
done & 

while : ; 
do 
  sleep 1 
  ((time=time+1))
  echo $time > mypipe
done 
```

最后，不要忘记删除管道。只需这样做：（`rm mypipe`您可以在当前目录中看到它：）`ls -l mypipe`。

# java - Glassfish：下载客户端后出现异常

> ID：14297365
> 
> 赞同：1
> 
> 时间：2013-01-12T19:58:10.343
> 
> 标签：java, jakarta-ee, network-programming, ejb, glassfish-3

在远程 API 的帮助下开发了 Java EE 服务器和客户端后，我尝试从另一个工作站运行这个应用程序。然后我遇到了一个问题。通过网络浏览器从地址“ [http://myip:8080/EntAppClient](http://myip:8080/EntAppClient) ”下载客户端后，我收到*“无法启动应用程序”*错误。我使用 Glassfish 3.0.1（NetBeans 无法安装更新的版本）。我的应用程序是在该教程的基础上创建的：http: [//netbeans.org/kb/docs/javaee/entappclient.html](http://netbeans.org/kb/docs/javaee/entappclient.html)。

[更新：15 I 2013]

行。所以感谢[Netbeans 7.1.2 - 无法添加 glassfish 服务器 3.1.2](https://stackoverflow.com/questions/13799825/netbeans-7-1-2-unable-to-add-glassfish-server-3-1-2/13800264#13800264)我设法运行了最新版本的 glassfish，现在我有了：

**错误：**无法加载资源：[http://myip:8080/___JWSappclient/___system/___dyn/___system_s1as.jnlp](http://myip:8080/___JWSappclient/___system/___dyn/___system_s1as.jnlp)

作为问题描述的一部分，**启动文件**选项卡是否重要？

**现在例外**是：

```
com.sun.deploy.net.FailedDownloadException: Unable to load resource: http://myip:8080/___JWSappclient/___system/___dyn/___system_s1as.jnlp
    at com.sun.deploy.net.DownloadEngine.actionDownload(Unknown Source)
    at com.sun.deploy.net.DownloadEngine._downloadCacheEntry(Unknown Source)
    at com.sun.deploy.cache.ResourceProviderImpl.getResourceCacheEntry(Unknown Source)
    at com.sun.deploy.cache.ResourceProviderImpl.getJreResource(Unknown Source)
    at com.sun.javaws.LaunchDownload._downloadExtensionsHelper(Unknown Source)
    at com.sun.javaws.LaunchDownload.downloadExtensionsHelper(Unknown Source)
    at com.sun.javaws.LaunchDownload.downloadExtensions(Unknown Source)
    at com.sun.javaws.Launcher.prepareLaunchFile(Unknown Source)
    at com.sun.javaws.Launcher.prepareAllResources(Unknown Source)
    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
    at com.sun.javaws.Launcher.launch(Unknown Source)
    at com.sun.javaws.Main.launchApp(Unknown Source)
    at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
    at com.sun.javaws.Main.access$000(Unknown Source)
    at com.sun.javaws.Main$1.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

包装**异常**：

```
java.io.FileNotFoundException: http://myip:8080/___JWSappclient/___system/___dyn/___system_s1as.jnlp
    at sun.reflect.GeneratedConstructorAccessor1.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection$6.run(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection$6.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.net.www.protocol.http.HttpURLConnection.getChainedException(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at com.sun.deploy.net.BasicHttpRequest.doRequest(Unknown Source)
    at com.sun.deploy.net.BasicHttpRequest.doGetRequestEX(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.actionDownload(Unknown Source)
    at com.sun.deploy.net.DownloadEngine._downloadCacheEntry(Unknown Source)
    at com.sun.deploy.cache.ResourceProviderImpl.getResourceCacheEntry(Unknown Source)
    at com.sun.deploy.cache.ResourceProviderImpl.getJreResource(Unknown Source)
    at com.sun.javaws.LaunchDownload._downloadExtensionsHelper(Unknown Source)
    at com.sun.javaws.LaunchDownload.downloadExtensionsHelper(Unknown Source)
    at com.sun.javaws.LaunchDownload.downloadExtensions(Unknown Source)
    at com.sun.javaws.Launcher.prepareLaunchFile(Unknown Source)
    at com.sun.javaws.Launcher.prepareAllResources(Unknown Source)
    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
    at com.sun.javaws.Launcher.launch(Unknown Source)
    at com.sun.javaws.Main.launchApp(Unknown Source)
    at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
    at com.sun.javaws.Main.access$000(Unknown Source)
    at com.sun.javaws.Main$1.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.io.FileNotFoundException: http://myip:8080/___JWSappclient/___system/___dyn/___system_s1as.jnlp
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at java.net.HttpURLConnection.getResponseCode(Unknown Source)
    ... 19 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:15:33.117

将您的库添加到 Glassfish 我曾经遇到过同样的问题 :)

你也可以看看[这里](https://stackoverflow.com/questions/13056010/what-are-the-folders-in-the-lib-folder-in-glassfish-for-and-how-should-you-use)

# android - 使用 svg-android 时我得到的只是空白屏幕

> ID：14297372
> 
> 赞同：9
> 
> 时间：2013-01-12T19:58:49.160
> 
> 标签：android, svg, imageview, svg-android

***目的：*** 我想最好使用 ImageView 来显示 SVG 图像文件。

***尝试1：***

*   我正在使用[svg-android](http://code.google.com/p/svg-android/)库来做到这一点。

*   我按照他们的[教程](http://code.google.com/p/svg-android/wiki/Tutorial)逐字逐句。我只是将他们的代码复制粘贴到我的 onCreate 中，从 onCreate 中注释掉我的应用程序代码。

    > 在此之前我有一个启动画面，但我怀疑无论如何都会干扰这个。在任何情况下，我都会更改启动意图并发布更新。

*   我已将他们的 jar 添加到 libs 文件夹并引用它。

***结果1：***

> 我正在测试三星 Galaxy I93000（国际版）
> 
> 我得到的只是一个白屏。
> 
> 没有编译或运行时错误。

***Logcat输出如下：***

> ```
> 01-13 01:22:11.755: D/dalvikvm(24889): GC_FOR_ALLOC freed 52K, 7% free 12198K/12995K, paused 17ms, total 17ms
> 01-13 01:22:11.765: I/dalvikvm-heap(24889): Grow heap (frag case) to 17.000MB for 4642816-byte allocation
> 01-13 01:22:11.810: D/dalvikvm(24889): GC_CONCURRENT freed 1K, 5% free 16730K/17543K, paused 15ms+2ms, total 43ms
> 01-13 01:22:12.080: D/dalvikvm(24889): GC_FOR_ALLOC freed <1K, 5% free 16731K/17543K, paused 13ms, total 13ms
> 01-13 01:22:12.100: I/dalvikvm-heap(24889): Grow heap (frag case) to 21.928MB for 5168972-byte allocation
> 01-13 01:22:12.125: D/dalvikvm(24889): GC_CONCURRENT freed <1K, 4% free 21779K/22599K, paused 12ms+2ms, total 25ms
> 01-13 01:22:12.560: D/libEGL(24889): loaded /system/lib/egl/libEGL_mali.so
> 01-13 01:22:12.595: D/libEGL(24889): loaded /system/lib/egl/libGLESv1_CM_mali.so
> 01-13 01:22:12.600: D/libEGL(24889): loaded /system/lib/egl/libGLESv2_mali.so
> 01-13 01:22:12.605: D/(24889): Device driver API match
> 01-13 01:22:12.605: D/(24889): Device driver API version: 10
> 01-13 01:22:12.605: D/(24889): User space API version: 10 
> 01-13 01:22:12.605: D/(24889): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Tue Oct 16 15:37:13 KST 2012 
> 01-13 01:22:12.670: D/OpenGLRenderer(24889): Enabling debug mode 0 
> ```

***更新1：***

我尝试将显示 SVG 图形的活动作为清单中的主要活动。结果没有变化。

***更新 2：***

尝试另一种库/方法来做到这一点 - [ImageView with SVG Support](http://www.codeproject.com/Articles/130791/Android-ImageView-with-SVG-Support)。将返回结果。

***更新 3：***

如您所知，我已经了解了[Android 上的 SVG 支持](https://stackoverflow.com/questions/3889882/svg-support-on-android)。那里的答案并没有真正提供本机解决方案。一种解决方法是创建静态 html 页面，每个 svg 一个，引用 SVG js 库。这似乎根本无法维护。我会成为人们在查看遗留代码时诅咒的人。

> 正如您可能已经猜到的那样，上述试验的效果并不好。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-06-10T17:00:05.343

您可能已经找到了解决方案，但供将来参考：

> 我正在测试三星 Galaxy I93000（国际版）
> 
> 我得到的只是一个白屏。
> 
> 没有编译或运行时错误。

您可能需要为正在使用的 ImageView 禁用硬件加速：

```
imageView.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

我在 svg-android 的一个分支上遇到了同样的问题，这完全是由于硬件加速造成的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T01:19:40.690

好的，经过一个完整的不眠之夜，这就是我所拥有的。:)

***希望1：***

* **[TPSVG_Android_SVG_Library：](https://github.com/TrevorPage/TPSVG_Android_SVG_Library) ***（**这是我使用的，即我的批准印章**；））

试过这个有福的人的图书馆。像魅力一样工作。他从 View 扩展了他的自定义视图，因此您拥有大部分用于布局的基本参数。它只有一个贡献者。我有点反对在生产中使用它，至少在长期的基础上。但对他的工作表示敬意，非常感谢，因为它满足了我的迫切需要。

这个用法很简单，我将粗略地描述一下。

*   以 zip 格式下载 repo 并将其导入 eclipse
*   将其作为库项目添加到您的项目中（项目属性 - > Android）
*   在 onCreate 中像这样使用它：

    > SVGView svgView = (SVGView)this.findViewById(R.id.svgImage); SVGParserRenderer 图像 = 新的 SVGParserRenderer(this, R.raw.anime); svgView.setSVGRenderer(image, null); svgView.setBackgroundColor(Color.WHITE);

*   我使用 FrameLayout 来定位它。需要大量试验和错误，因为这不会出现在 Android 的 WYSIWYG 编辑器中。您可以暂时将其替换为 ImageView 并处理格式。

*   此标签中使用的任何不属于 View 类的参数都会导致编译错误

> ***问题：***我还没有完全弄清楚如何在运行时在此视图上切换可绘制对象（SVG）。如果有人知道这一点，请发布程序。

***希望2：***

***[类向量：](http://www.vectoroid.com/)***

这似乎很有希望。他们有一些基于矢量的应用程序以及库。我不太清楚如何使用它来加载 SVG 可绘制对象（似乎还不支持）。可是等等！[在](http://sentinelweb.co.uk/mypod-re-write-vector-graphics-improvements-droidcon/)他们的博客上，他们说他们已经实现了“SVG to drawable”，并将很快发布。耶！

# c# - C# Struct 通过构造函数赋值

> ID：14297377
> 
> 赞同：0
> 
> 时间：2013-01-12T19:59:26.057
> 
> 标签：c#, constructor, struct

作为我的代码的一部分，我创建了以下结构：

```
struct ItemInformation
{
    public int ItemNumber;
    public double HighPrice, LowPrice, MedianPrice;

    public ItemInformation(int number, double highP, double lowP) : this()
    {
        this.ItemNumber = number;
        this.HighPrice = highP;
        this.LowPrice = lowP;
        this.MedianPrice = CalculateMedian(highP, lowP);
    }

    private double CalculateMedian(double high, double low)
    {
        return 0.5 * (high + low);
    }
} 
```

我知道该结构包含四条数据，但我希望只能指定三条，因为第四条 MedianPrice 完全由高价和低价决定。所以我想用

```
ItemInformation jacket; 
```

也

```
ItemInformation jacket = new ItemInformation(1234, 145.70, 73.20) 
```

创建结构的实例，但我似乎无法让它工作。除了 MedianPrice 之外，结构中的所有项目都设置正确。这可能是一个可变性问题，但我并没有真正改变这里的值。我只是根据其他两个值设置一个值，并且我想只使用三个输入来创建结构的实例。有人对我如何做到这一点有任何建议吗？任何建议将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T22:41:04.483

.net 中的结构通常应该符合两种风格中的一种，我称之为“透明”和“不透明”。请注意，MSDN 指南似乎是由认为一切都表现得像类对象的人编写的，而不能像类对象那样表现是一种缺陷。因此，他们忽略了这样一个事实，即透明结构本身可以具有*有用的语义*，并且在许多情况下，使不透明结构效率低下的因素可能会使类更加低效。

透明结构是所有字段都公开的结构，结构的状态无非就是其字段中值的组合。透明结构可能具有基于其字段值计算的只读“便利属性”（例如`Vector3d`，具有字段 DX、DY 和 DZ 的透明结构可能具有`Length`基于这些字段计算的属性），但它应该很明显，这些属性并不构成结构状态的一部分，而是在字段上执行计算的便捷简写。例如，`vec.Length`将作为`SomeLibrary.Distance3d(vec.DX, vec.DY, vec.DZ)`.

透明结构类型的变量为每个字段分配一个变量；如果需要，可以将每个字段作为其自己的单独变量进行访问。按值传递透明结构类型的成本与单独传递其所有字段的成本大致相同（在某些情况下，它可能更有效；在其他情况下，则更少）。传递透明结构类型`ref`与传递对象引用具有相同的固定成本，无论字段数如何。

如果当前版本满足以下所有标准并且所有可能的未来版本也将满足以下标准，则结构在许多情况下应该是透明的[意味着不符合标准的结构将不被视为兼容的替代品]

1.  有一些固定的可读成员集（字段或属性）暴露了它的整个状态
2.  给定这些成员的任何一组所需值，可以使用这些值创建一个实例（禁止值组合）。
3.  结构的默认值应该是将所有这些成员设置为其各自类型的默认值。

如果一个结构符合上述标准，公开其字段将不允许外部代码做任何它不能做的事情，除非它可能允许快速执行否则会很慢的操作，并且可能允许线程安全操作否则需要使用原子原语安全地执行锁定。

当然，并非所有结构都符合上述标准，但如果将那些确实符合标准的结构透明化，则通常可以提高性能——有时甚至是相当大的。事实上，结构通常被认为只比类快一点的大部分原因是它们的性能因不必要地使其不透明而受到阻碍。

不透明结构是其状态在语义上表示其字段中的值以外的东西。例如，`Decimal`大小为 1234 且指数为 2 的 a 可能表示数值 12.34。不可能只改变不透明结构的一个方面，除非为整个事物计算一个新值。不透明结构可能会尝试对其字段强制执行不变量，但重要的是要注意，由于结构分配的工作方式，在许多情况下滥用线程（但没有任何特殊执行权限）的代码可能会被滥用线程以生成违反结构不变量的结构实例。

Microsoft 的指南在应用于不透明结构时非常好。此类结构通常应避免暴露属性设置器。类型喜欢`Point`并且`Rectangle`不代表背离该规则。 *相反，它们代表的类型本来就不应该是不透明的结构——它们应该是透明的结构*。在某些情况下，公开属性设置器的不透明结构可以提供无法通过任何其他方式实现的语义，但这种结构有一些令人讨厌的陷阱，通常使它们不如实现相同目的的其他方式可取。

关于您提出的结构，我建议将其设置为具有三个字段的透明结构，并且具有`MedianPrice`每次调用时计算这三个字段的中位数的属性，或者具有四个字段的不透明结构，它将计算MedianPrice 在其构造函数中。我的决定将基于阅读的相对频率`MedianPrice`，与代码想要修改其中一个价格而不修改其他价格的相对频率相比。如果前者更常见，则为不透明结构。如果是后者，透明结构。请注意，如果一开始使用透明结构并编写代码以利用它，则可能难以调整代码以处理不透明结构。相比之下，为使用不透明结构而编写的代码也可以使用透明结构，但不会像其他情况下那样高效。

请注意，透明结构和其他类型之间的效率差异随着结构大小的增加而增长。例如，假设需要存储许多 3d 三角形的坐标。可以定义一个`Triangle3d`包含三个类型字段`Point3d`（每个字段包含三个数字 X、Y、Z）的透明结构，并将所有三角形存储在`Triangle3d[]`. 给定这样的定义，人们可以轻松地修改任何三角形中单个点的单个坐标，而无需触摸甚至读取任何其他坐标。相比之下，如果使用不透明结构或不可变类类型，即使更改单个属性也需要将所有信息从旧实例复制到新实例。类型的字段越多，使用不透明或不可变类型的成本就越高。如果使用可变类类型，则修改会很便宜，但是没有一种很好的方法可以保存上述数组以使调用者可以在不暴露底层存储对象的情况下使用三角形的坐标，而不是手动操作-将所有字段值复制到新的不可变对象。 *因此，与 Microsoft 的指导方针相反，对于许多使用模式，类型具有的字段越多，其作为透明结构而不是类的优势就越大*。

顺便说一句，有些人会争辩说暴露字段结构违反了封装。我会反驳。like`KeyValuePair<TKey,TValue>`应该包含一个 type 字段`TKey`和另一个 type字段`TValue`。由于可以自由读取这两个字段，因此可以为它们分配对其各自类型有效的任何值组合，并且*没有任何有用的类型的未来版本可能会做透明结构不会做的事情能够做得一样好*，所谓的“封装”除了在添加零值的同时降低代码效率之外什么也没做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T20:13:30.360

您应该通过使所有实例字段来使结构不可变`readonly`。此外，`MedianPrice`可能是一个属性，它不需要结构值中的数据：

```
struct ItemInformation
{
  public readonly int ItemNumber;
  public readonly double HighPrice, LowPrice;  // no MedianPrice here

  public ItemInformation(int number, double highP, double lowP) // no need to chain this()
  {
    this.ItemNumber = number;
    this.HighPrice = highP;
    this.LowPrice = lowP;
  }

  public double MedianPrice
  {
    get
    {
      return 0.5 * (HighPrice + LowPrice);
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T20:03:21.277

我认为问题可能是，您指的是：

```
this.Median 
```

并不是

```
this.MedianPrice 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T20:06:05.080

首先

```
ItemInformation jacket; 
```

并不意味着`jacket`创建了变量。你不能用它来操作。

试试这个：

```
public ItemInformation(int number = 0, double highP = 0, double lowP = 0)
{
    ItemNumber = number;
    HighPrice = highP;
    LowPrice = lowP;
    MedianPrice = 0;
    MedianPrice = CalculateMedian(highP, lowP);
} 
```

用法：

```
ItemInformation jacket1 = new ItemInformation();
ItemInformation jacket2 = new ItemInformation(1234, 145.70, 73.20); 
```

# c - 信号使用后无法摆脱

> ID：14297378
> 
> 赞同：0
> 
> 时间：2013-01-12T19:59:35.290
> 
> 标签：c, while-loop, signals

```
#include  <stdio.h>
#include  <signal.h>
#include <stdlib.h>
#include <unistd.h>

void sigint_handler(int);

int  main()
{
    signal(SIGINT, sigint_handler);

     while (1){
         pause();
     }
    printf("Out..\n");
    return 0;
}

 void sigint_handler(int sig)
{

    printf("killing process %d\n",getpid());
    exit(0);
} 
```

我没有得到： Out... 在 ctrl+c 之后 所以永远不要返回 while 或离开。我该如何解决它，继续主，并打印“Out ...”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T20:01:18.350

> 我不明白：Out... 在 ctrl+c 之后

因为信号处理程序立即结束进程，所以`main`永远没有机会实际执行 printf。我怀疑您实际上并不想`exit`在处理程序中。您应该`pause`退出循环并等待信号传递。

**这不是等待信号的最佳方式。**对于初学者来说，可以想象用户可以在您有机会发送 SIGINT 之前发送 SIGINT `pause`。信号将丢失并`pause(2)`阻塞直到时间结束。

您可能应该使用`sigsuspend`或更简单的`sigpause`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T20:13:43.557

```
#include  <stdio.h>
#include  <signal.h>
#include <stdlib.h>
#include <unistd.h>

void sigint_handler(int);

int  main()
{
    signal(SIGINT, sigint_handler);

     pause();

    printf("Out..\n");
    return 0;
}

 void sigint_handler(int sig)
{

    printf("killing process %d\n",getpid());
    //exit(0);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T20:01:06.473

不要`printf`在 sigint_handler 中使用，它可能是未定义的行为。 [可以在信号处理程序手册页中调用的安全函数列表](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)。
说明：[**使用可重入函数进行更安全的信号处理**](http://www.ibm.com/developerworks/linux/library/l-reent/index.html#N101CA)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T20:19:04.967

如果您希望循环在`main()`控制下退出，则必须使其成为非无限循环。我可能会这样做：

```
#include <stdio.h>
#include <signal.h>
#include <unistd.h>

static volatile sig_atomic_t sig_received = 0;
void sigint_handler(int);

int main(void)
{
    signal(SIGINT, sigint_handler);

    while (sig_received == 0)
        pause();
    printf("Out..\n");
    return 0;
}

void sigint_handler(int sig)
{
    sig_received = sig;
} 
```

这符合 C 标准的要求，与 POSIX 相比，在信号处理程序中允许您执行的操作要严格得多。

# variables - 用帕斯卡定义和更新坐标

> ID：14297392
> 
> 赞同：-1
> 
> 时间：2013-01-12T20:01:08.363
> 
> 标签：variables, pascal

这是帕斯卡；

我有许多矩形，它们由它们的右上角和左下角坐标定义，例如（x1，y1，x2，y2）。我必须通过变量 a 和 b (x1+a,y1+b,x2+a,y2+b) 移动这些坐标。

有没有一种简单的方法来定义这些常量然后移动它们？我一个接一个地做这个，需要很长时间。如果可能，请不要告诉我使用“一些概念或命令”给出示例代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:03:53.397

你没有提到你的编译器，但在 Pascal 的活动版本（Delphi 或 FPC）中，如果你在名为*rect*的 TRect 中有矩形，你可以简单地做

```
OffsetRect(rect,a,b); 
```

您可能需要在您的使用条款中添加单位“类型”

# asp.net - ASPNET 网页中的安全性如何真正起作用？

> ID：14297394
> 
> 赞同：2
> 
> 时间：2013-01-12T20:01:13.730
> 
> 标签：asp.net, security, asp.net-webpages

我想了解，**如何在最基本的级别保护使用 ASP.NET 网页制作的网站？**. 问题是我总是找到关于使用创建一系列表并使用预定义模型的内置提供程序的相同解释。我不想立即使用它，我想从零开始，我的意思是真正的零，经过：

*   通过可变内容进行保护....我知道这很荒谬，但我想用真正简单的术语来了解安全性是如何工作的。

*   通过已经存在的数据保护....我的模型，而不是预定义的模型。

我找到了以下链接[http://msdn.microsoft.com/en-us/library/ks310b8y(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ks310b8y(v=vs.100).aspx)，它解释了“ASP.NET 安全”的工作原理，但是当我开始阅读时，我感到困惑通过符合 ASP.NET 的不同框架。此内容可以应用于“ASP.NET 网页”还是仅应用于 Web 窗体？网页完全不同吗？

根据 Joe 的建议，我澄清一下，当我提到“保护网站”时，我的意思是**只允许特定用户访问网站的特定部分**。

# sql-server-2005 - 从现有数据库中生成 EF Code First 中的 POCO-s？

> ID：14297396
> 
> 赞同：0
> 
> 时间：2013-01-12T20:01:17.910
> 
> 标签：sql-server-2005, .net-4.0, entity-framework-4

这可能吗？我有大约 40 个具有相同结构的现有数据库，我不希望手动写出实体类也不使用 .edmx 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:06:28.067

是的，您可以安装[Entity Framework Power Tools](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d) Visual Studio 扩展，然后使用逆向工程代码优先选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:52:10.230

VS2012中的EFDesigner默认生成POCO。在 VS2010 中，您可以使用[EF 4.x DbContext Generator](http://visualstudiogallery.msdn.microsoft.com/7812b04c-db36-4817-8a84-e73c452410a2)

# jquery - 我可以依赖已解析的 jquery 延迟对象的同步特性吗

> ID：14297398
> 
> 赞同：4
> 
> 时间：2013-01-12T20:01:31.013
> 
> 标签：jquery, synchronous, jquery-deferred

> **请注意：**这个问题是关于为什么 jQuery 的 promise 实现不遵循 Promises/A+ 规范的[要求 2.2.4](http://promisesaplus.com/#point-34)。

* * *

我注意到一旦[jQuery 延迟对象](http://api.jquery.com/category/deferred-object/)被解析，对[done](http://api.jquery.com/deferred.done/)的新调用将同步调用任何 doneCallbacks。

```
var d = $.Deferred();

d.resolve("Foo Bar!");

var fooBar = "Waiting";

d.done(function(data){fooBar = data; });

console.log(fooBar);//Will output "Foo Bar!" because the doneCallback is called synchronously 
```

我曾期望将回调放在事件队列中（在这种情况下，控制台的输出将是“等待”），以匹配在延迟对象解决之前调用 done 的行为。我的期望不合理吗？

不过，我似乎找不到任何关于这种行为的文档，所以我不确定这是否是我可以依赖的行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-04T09:19:39.407

此行为在此处明确记录：http: [//api.jquery.com/jquery.deferred/](http://api.jquery.com/jquery.deferred/)

> 一旦对象进入已解决或已拒绝状态，它就会保持该状态。回调仍然可以添加到已解决或已拒绝的 Deferred 中——它们将立即执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-07T05:54:00.980

我认为您需要关注的问题是“范围”。这是假设我在这里理解你的问题。你很好奇为什么没有设置“等待”，因为它似乎是在你的决心之后。

例如..你在这里有这个片段：

```
 var d = $.Deferred();
    d.resolve("Foo Bar!");
    var fooBar = "Waiting";
    d.done(function(data){fooBar = data; });
    console.log(fooBar) 
```

那有什么好处？

现在我们有了这个：

```
 var d = $.Deferred();
    var fooBar = "Waiting";
    d.done(function(data){fooBar = data; });
    console.log(fooBar)
    d.resolve("Foo Bar!"); 
```

还有这个：

```
 var d = $.Deferred();
    d.done(function(data){fooBar = data; });
    d.resolve("Foo Bar!");
    var fooBar = "Waiting";
    console.log(fooBar) 
```

现在看看这个！

```
var d = $.Deferred();
console.log( fooBar);
d.resolve("Foo Bar!");
var fooBar = "Waiting";
console.log( fooBar);
d.done(function(data){fooBar = data; });
console.log(fooBar) 
```

想想**吊装**和**范围**。

# c++ - C++ 地址，奇怪的地址？

> ID：14297399
> 
> 赞同：0
> 
> 时间：2013-01-12T20:01:32.230
> 
> 标签：c++, memory-address

我不明白我程序中的第二个地址是什么`(readurl)，我通过 cout'ing readurl(ifstream) 找到了它，谢谢你的帮助/声明！（来自 readurl 的地址与 cout'ing readurl 不同）
代码：

```
#include <fstream>
#include <iostream>
#include <string>
#include <tchar.h>
using namespace std;
int main()
{
    string file; //filepath
    int sel; //menu-switch
    cout << "Select your Language!"<<endl;
    cout << "1:German"<<endl;
    cout << "2:English"<<endl;
    cout << "Language: ";
    cin  >> sel;
    getchar();
    system("cls");
    switch(sel)
    {
        case 2:
            cout << "Hello!"<<endl;
            cout << "Select your File: ";
            cin  >> file;
            getchar();
            system("cls");
            break;
        case 1:
            cout << "Hallo!"<<endl;
            cout << "Waehle deine Datei aus: ";
            cin  >> file;
            getchar();
            system("cls");
    }
    ifstream readurl(file.c_str());
    char url[CHAR_MAX];
    while(!readurl.getline(url,CHAR_MAX,'#'))
    {
        readurl.ignore();
    }
    cout << endl;
    cout << &readurl<<endl<<readurl<<endl; // What is readurl?
    cout << "File: (Sentences with # will be ignored)"<<endl;
    cout << url;
    getchar();
} 
```

文本文件如下所示：

```
This will be readed
TEST
TEST
TEST
#This wont be readed 
#This can be a comment.
#lsdjpofiuhpdsouhsdih+g 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:06:37.230

表达式`&readurl`返回`readurl`内存中 where 的地址。像这样使用的运算符`&`称为地址运算符。

当您写出时，`readurl`您实际上是在编写实际的对象实例，在这种情况下，它实际上不是有效的输出操作。你应该在编译时得到警告，你从中得到的值可以是任何东西。

* * *

from 的输出`std::cout << readurl`可能与[`operator void*`](http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool)覆盖相同，并且不是有效地址。

# css - PHP表格背景上没有重复的图像

> ID：14297407
> 
> 赞同：0
> 
> 时间：2013-01-12T20:02:06.597
> 
> 标签：css, html-table

我为我的 BB 论坛 postbit 使用表格代码；所以在这个 postbit 表中，我有一张背景图片，但这里有一个问题。图像重复并且效果不佳，因此我希望此图像不会重复并在我的 postbit 表中居中。我使用以下代码解决了这个问题，但它根本不起作用！

```
 background-repeat:no-repeat 
```

所以请告诉我什么是错的，我能做些什么来解决它？

这是我的 postbit 表代码和 css：

```
 <table background="images/postarkaplan/{$post['fidx']}.png" border="0" cellspacing="{$theme['borderwidth']}" class="tborder2" > .... </table> 
```

的CSS：

```
. Tborder2 { 
    width: 100%; 
    margin: auto auto; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:31:53.060

将您的 CSS 更改为：

```
.tborder2 { 
    width: 100%; 
    margin: auto auto; 
    background-repeat:no-repeat;
} 
```

您元素上的类是`class="tborder2"`，但您的规则是针对`. Tborder2`. 注意大小写的空格和变化。

# algorithm - 最小瓶颈生成树与最小生成树有何不同？

> ID：14297409
> 
> 赞同：35
> 
> 时间：2013-01-12T20:02:08.427
> 
> 标签：algorithm, graph, minimum-spanning-tree, spanning-tree

*加权图G*的最小瓶颈生成树是*G*的生成树，使得生成树中任何边的最大权重最小化。MBST 不一定是 MST（最小生成树）。

请举一个这些陈述有意义的例子。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-13T10:05:49.700

查看[Wikipedia 上的 MST 示例以](http://commons.wikimedia.org/wiki/File:Minimum_spanning_tree.svg)供参考：

![来自维基百科的最小生成树示例](../Images/d27da8759f8ea4440b5cde9b39a97f7e.png)

生成树中的瓶颈是该树中的最大权重边。生成树中可能存在多个瓶颈（当然，所有瓶颈都具有相同的权重）。在 Wikipedia MST 中有两个权重为 8 的瓶颈。

现在，取给定图的最小生成树（可能有多个 MST，当然，它们的总边权重相同）并调用最大边权重 B。在我们的示例中，B = 8。

任何具有 B = 8 瓶颈的生成树都是 MBST。但它可能不是 MST（因为总边缘权重大于最佳值）。

因此，请使用 Wikipedia MST 并对其进行修改（添加/删除一些边缘），以便

1.  它仍然是一棵生成树，并且
2.  它仍然不使用任何大于 8 的权重，但是
3.  你增加了总边缘权重

例如，仅将 Wikipedia MST 的“左侧”子树（由权重 {2,2,3} 组成）更改为 {2,3,6}，从而在不改变瓶颈的情况下将总边权重增加 4 8\. Bingo，你创建了一个不是 MST 的 MBST。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-08-11T09:29:20.763

在回答您的问题之前，让我定义一些此处使用的术语...

1）生成树：给定图的生成树是覆盖该图中所有顶点的树。

2）最小生成树（MST）：给定图的MST是该图的所有可能生成树中长度最小的生成树。更清楚地，对于给定的图，列出所有可能的生成树（可能非常大）并选择边缘权重之和最小的一棵。

3）最小瓶颈生成树（MBST）：给定图的MBST是所有可能生成树中最大边权重最小的生成树。更清楚地，对于给定的图，列出所有可能的生成树和每个生成树的最大边权重。其中选择最大边权重最小的生成树。

现在让我们用一个四节点图来看看下图……

![在此处输入图像描述](../Images/3109e198b1140d56e07e205b8f2e00f3.png)

Graph-A 是给定的原始图。如果我列出该图的所有可能生成树并选择边权重之和最小的那棵，那么我将得到 Graph-B。所以图B是最小生成树（MST）。注意它的总权重是1+2+3=6。

现在，如果我选择最大边权重最小的生成树（即 MBST），那么我最终可能会选择 Graph-B（或）Graph-C。请注意，这两个生成树的最大边权重为 3，这是所有可能的生成树中最小的。

从 Graph-B 和 Graph-C 可以清楚地看出，即使 Graph-C 是 MBST，它也不是 MST。因为它的总权重是1+3+3=7，大于Graph-B中绘制的MST的总权重（即6）。

所以 MBST 不一定是给定图的 MST。但是 MST 必须是 MBST。

# javascript - HTML5 中动态、大小调整、重新排列表格结构的“最佳实践”是什么？

> ID：14297411
> 
> 赞同：-1
> 
> 时间：2013-01-12T20:02:18.613
> 
> 标签：javascript, jquery, css, html

我有一些可以显示为表格数据的东西，但某些操作可能会将其中一个单元格“扩展”为大于其他单元格，这会挤压其他单元格。此外，行和列将定期交换和移动。

我应该使用实际的 HTML 表格吗？或者将 div 与 javascript 或 jquery 一起使用？这里的最佳实践答案是什么？

为了澄清，我在问表格或 div 是否是合适的方法，或者是否有其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:05:07.720

我会为此使用现有的工具。一些例子：

[http://developer.yahoo.com/yui/datatable/](http://developer.yahoo.com/yui/datatable/)

[http://www.datatables.net/](http://www.datatables.net/)

[同类最佳的 JavaScript 数据表小部件/库](https://stackoverflow.com/questions/5797547/best-of-breed-javascript-datatable-widget-library)

# sharepoint - 这是否可以限制用户仅在文档获得批准后才能查看文档？

> ID：14297412
> 
> 赞同：-1
> 
> 时间：2013-01-12T20:02:31.793
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-workflow

我们有一个带有 OOB 'Approve-share point 2010' 工作流程的基本文档库。我们希望用户只有在文档被批准后才能看到它（所有者和批准者可以查看它）。

我一直在玩不同的共享点设置，但到目前为止还没有运气。

目前，如果贡献者组中的某个人上传了一个文档，那么它对每个人都是可见的，即使它还没有被批准。

注意：我们不使用版本和结帐设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:35:39.567

我很确定您需要发布工作流程，它以与批准工作流程相同的方式路由内容以供批准，除了它是为启用了发布功能的企业内容管理网站而设计的。

因此请注意，发布工作流仅在 SharePoint Server 2010 中可用。您必须启用发布功能。

澄清：您使用审批工作流来审批费用报告。这与使用发布工作流程发布内容完全不同。误解是您可能认为您批准了要发布的内容，这确实是事实，但您需要它通过发布工作流程来执行此操作。

# macros - 换帧的Imacro

> ID：14297416
> 
> 赞同：-2
> 
> 时间：2013-01-12T20:03:00.153
> 
> 标签：macros, browser-automation, imacros

我正在尝试记录一个宏以在网站上自动发布，但问题是每次宏尝试发布时，一个文本字段都会更改其框架 ID，因此我无法自动化该过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:03:28.967

上面的答案可以工作，但同样的问题在这里得到了回答。

[iframe id 正在更改每个选项卡。我怎样才能固定它？](https://stackoverflow.com/questions/14033550/iframe-id-is-changing-every-tab-how-can-i-immobilize-it)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:15:01.883

如果你从 javascript js 文件运行你的 imacros 代码，你可以做到这一点——你所需要的只是循环，它将遍历所有可能的帧 ID，直到找到当前帧。这是代码示例：

```
var find_frame;
find_frame =  "CODE:";
find_frame +=  "SET !ERRORIGNORE YES" + "\n";
find_frame +=  "set !timeout_step 2" + "\n";
find_frame +=  "frame f={{i}}" + "\n";
find_frame +=  "code to check if frame is correct" + "\n";   
for (i=1;i<=max_frame_id,i++){
iimSet("i",i);
iimPlay(find_frame);
} 
```

# java - 制作图像查看器时出错

> ID：14297417
> 
> 赞同：1
> 
> 时间：2013-01-12T20:03:17.270
> 
> 标签：java, image, swing, events

我实际上是在尝试使用 Java 制作一个简单的图像查看器。它包括一个标签和三个按钮。其中两个按钮用作导航的左右箭头键，第三个是用于选择目录的打开按钮。但是，当我单击打开时，只会查看第一个 JPG 图像，并且该图像太未缩放。如果我单击前进按钮，则不会发生导航。

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.*;
import javax.swing.*;
import javax.swing.tree.*;
import java.io.*;

public class picframe extends Thread implements ActionListener
{
  JTree tr;
  JScrollPane jsp;
  JFrame f;
  JButton b1,b2,b3;
  JLabel lab;
  File fl;
  File[] flist;
  ImageIcon ig;
  int k,j=0;
  FileDialog fdial;
  String str;

  picframe()
  {
    f=new JFrame("My Frame");
    f.setVisible(true);
    f.setLayout(null);

    lab=new JLabel();
    lab.setBounds(100,50,1166,500);
    f.add(lab);

    b1=new JButton(" <| ");
    b1.setBounds(486,600,100,30);
    b1.setEnabled(false);
    f.add(b1);
    b1.addActionListener(this);

    b2=new JButton(" |> ");
    b2.setBounds(786,600,100,30);
    f.add(b2);
    b2.setEnabled(false);
    b2.addActionListener(this);

    b3=new JButton("Open");
    b3.setBounds(633,650,100,30);
    f.add(b3);
    b3.addActionListener(this);

    f.pack();
    f.setSize(1366,768);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  }

  public void actionPerformed(ActionEvent ae)
  {

    if(ae.getActionCommand().equals("Open"))
    {
      FileDialog fdial=new FileDialog(f,"Open Box",FileDialog.LOAD);
      fdial.setSize(300,300);
      fdial.setVisible(true);
      str=fdial.getDirectory();
      fl=new File(str);
      flist=fl.listFiles();
      b2.setEnabled(true);

      rat:while(j<flist.length)
      {
        if(flist[j].isFile())
        {
          if(flist[j].getName().toLowerCase().endsWith(".jpg"))
          {
            ig=new ImageIcon(fdial.getDirectory()+flist[j].getName());
            lab.setIcon(ig);
            break rat;

          }
        }

        j++;
      }

    }

    if(ae.getActionCommand().equals("<|"))
    {
      --j;

      if(j+1!=0)
      {
        bat:while(j<flist.length)
        {
          if(flist[j].isFile())
          {
            if(flist[j].getName().toLowerCase().endsWith(".jpg"))
            {
              ig=new ImageIcon(fdial.getDirectory()+flist[j].getName());
              lab.setIcon(ig);
              b1.setEnabled(true);
              break bat;
            }
          }

          j--;
        }
      }

      if(j<0 || !flist[j].isFile())
      {
        lab.setText("no image");
      }

      if(ae.getActionCommand().equals("|>"))
      {
        ++j;

        if(j-1!=flist.length)
        {
          cat:while(j<flist.length)
          {
            if(flist[j].isFile())
            {
              if(flist[j].getName().toLowerCase().endsWith(".jpg"))
              {
                ig=new ImageIcon(fdial.getDirectory()+flist[j].getName());
                lab.setIcon(ig);
                b1.setEnabled(true);
                break cat;

              }
            }

            j++;
          }
        }

        if(j>flist.length || !flist[j].isFile())
        {
          lab.setText("no image");
        }
      }

    }
  }
  public static void main(String args[])
  {
    new picframe();
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:40:29.460

> 那太没有比例了

是什么让你认为它应该是其他的？Swing 没有提供任何自动缩放其内容的组件（我的头顶），这个，你必须自己解决。查看有关该主题的这些先前的问题以获取一些解决方案

*   [Java：保持JPanel背景图像的纵横比](https://stackoverflow.com/questions/11959758/java-maintaining-aspect-ratio-of-jpanel-background-image/11959928#11959928)
*   [Jpanel在重绘时调整大小](https://stackoverflow.com/questions/12797933/jpanel-resize-on-repaint/12798480#12798480)

**更新#1**

您的其他问题是`f.setLayout(null);`，这样做意味着您突然开始负责管理组件的大小，因此当您加载新图像时，它的大小可能与以前不同，但您似乎没有尝试更新图片标签...

**更新#2**

`flist[j].getPath()`会给你一个更好的结果，`fdial.getDirectory()+flist[j].getName()`因为你可能会错过路径分隔符；）

**更新#3**

这是一个工作示例...没有缩放

![在此处输入图像描述](../Images/7f34f8ace439fb4760e634ee5c34b42c.png)

```
public class BetterBrowser {

    public static void main(String[] args) {
        new BetterBrowser();
    }

    public BetterBrowser() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new BrowserPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class BrowserPane extends JPanel {

        private FileModel fileModel;
        private JButton open;
        private JButton next;
        private JButton prev;

        private JLabel image;

        public BrowserPane() {
            fileModel = new FileModel();
            setLayout(new BorderLayout());

            JToolBar tb = new JToolBar();
            tb.add((open = new JButton(new OpenAction(fileModel))));

            add(tb, BorderLayout.NORTH);

            JPanel navPane = new JPanel(new FlowLayout(FlowLayout.CENTER));
            navPane.add((prev = new JButton(new PrevAction(fileModel))));
            navPane.add((next = new JButton(new NextAction(fileModel))));

            add(navPane, BorderLayout.SOUTH);
            add(new JScrollPane((image = new JLabel())));

            fileModel.addListDataListener(new ListDataListener() {
                @Override
                public void intervalAdded(ListDataEvent e) {
                }

                @Override
                public void intervalRemoved(ListDataEvent e) {
                }

                @Override
                public void contentsChanged(ListDataEvent e) {
                    if (e.getIndex0() == -1 && e.getIndex1() == -1) {
                        File file = (File) fileModel.getSelectedItem();
                        try {
                            ImageIcon icon = new ImageIcon(ImageIO.read(file));
                            image.setIcon(icon);
                        } catch (IOException exp) {
                            exp.printStackTrace();;
                            image.setIcon(null);
                        }
                    }
                }
            });
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(400, 400);
        }

    }

    public class OpenAction extends AbstractAction {

        private FileModel model;

        public OpenAction(FileModel model) {
            this.model = model;
            putValue(NAME, "Open");
        }

        public FileModel getModel() {
            return model;
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            JFileChooser fc = new JFileChooser();
            fc.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
            fc.setMultiSelectionEnabled(false);
            switch (fc.showOpenDialog((Component) e.getSource())) {
                case JFileChooser.APPROVE_OPTION:
                    File folder = fc.getSelectedFile();
                    File[] files = folder.listFiles(new FileFilter() {
                        @Override
                        public boolean accept(File pathname) {
                            String name = pathname.getName().toLowerCase();
                            return name.endsWith(".jpg")
                                            || name.endsWith(".png")
                                            || name.endsWith(".gif");
                        }

                    });

                    model.removeAllElements();

                    FileModel model = getModel();
                    for (File file : files) {
                        model.addElement(file);
                    }

                    if (model.getSize() > 0) {
                        model.setSelectedItem(model.getElementAt(0));
                    }
                    break;
            }
        }

    }

    public class FileModel extends DefaultComboBoxModel<File> {
    }

    public abstract class AbstractNavigationAction extends AbstractAction {

        private FileModel fileModel;
        private int direction;

        public AbstractNavigationAction(FileModel fileModel, int direction) {
            this.fileModel = fileModel;
            this.direction = direction;
            fileModel.addListDataListener(new ListDataListener() {
                @Override
                public void intervalAdded(ListDataEvent e) {
                    updateState();
                }

                @Override
                public void intervalRemoved(ListDataEvent e) {
                    updateState();
                }

                @Override
                public void contentsChanged(ListDataEvent e) {
                    updateState();
                }

            });
            updateState();
        }

        protected void updateState() {
            setEnabled(getFileModel().getSize() > 0);
        }

        public FileModel getFileModel() {
            return fileModel;
        }

        public int getDirection() {
            return direction;
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            FileModel model = getFileModel();
            if (model.getSize() > 0) {
                File file = (File) model.getSelectedItem();
                int index = model.getIndexOf(file);

                index += direction;
                if (index < 0) {
                    index = model.getSize() - 1;
                } else if (index >= model.getSize()) {
                    index = 0;
                }
                file = model.getElementAt(index);
                model.setSelectedItem(file);
            }
        }

    }

    public class PrevAction extends AbstractNavigationAction {

        public PrevAction(FileModel fileModel) {
            super(fileModel, -1);
            putValue(NAME, "< Previous");
        }

    }

    public class NextAction extends AbstractNavigationAction {

        public NextAction(FileModel fileModel) {
            super(fileModel, 1);
            putValue(NAME, "Next >");
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T21:08:00.443

错误很多，我会帮你改正这些错误。

首先`FileDialog fdial;`应该放在类 attr 上。稍后引用它，但不要创建局部变量。

现在问题出在`actionPerformed`方法上。首先，该`equals`方法不起作用，因为返回的字符串`getActionCommand`不对应。

在该方法中`actionPerformed`，您应该在不同的情况下切换并退出，仅此而已。

`j`用于将当前文件保存在文件列表中的变量。增加和减少它不应超过数组或`ArrayIndexOfBoundException`.

固定代码是：

```
public class picframe extends Thread implements ActionListener
{
  JTree tr;
  JScrollPane jsp;
  JFrame f;
  JButton b1,b2,b3;
  JLabel lab;
  File fl;
  File[] flist;
  ImageIcon ig;
  int k,j=0;
  FileDialog fdial;

  picframe ()
  {
    f=new JFrame("My Frame");
    f.setVisible(true);
    f.setLayout(null);

    lab=new JLabel();
    lab.setBounds(100,50,1166,500);
    f.add(lab);

    b1=new JButton(" <| ");
    b1.setBounds(486,600,100,30);
    b1.setEnabled(false);
    f.add(b1);
    b1.addActionListener(this);

    b2=new JButton(" |> ");
    b2.setBounds(786,600,100,30);
    f.add(b2);
    b2.setEnabled(false);
    b2.addActionListener(this);

    b3=new JButton("Open");
    b3.setBounds(633,650,100,30);
    f.add(b3);
    b3.addActionListener(this);

    f.pack();
    f.setSize(1366,768);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  }

  public void actionPerformed(ActionEvent ae)
  {

    if(ae.getActionCommand().equals("Open"))
    {
      fdial=new FileDialog(f,"Open Box",FileDialog.LOAD);
      fdial.setSize(300,300);
      fdial.setVisible(true);
      String str=fdial.getDirectory();
      fl=new File(str);
      flist=fl.listFiles();
      b2.setEnabled(true);
      j = 0;
      if (flist != null)
        while(j<flist.length)
        {
          if(flist[j].isFile())
          {
            if(flist[j].getName().toLowerCase().endsWith(".jpg"))
            {
              ig=new ImageIcon(fdial.getDirectory()+flist[j].getName());
              lab.setIcon(ig);
              break;

            }
          }

          j++;
        }

    }

    if(ae.getActionCommand().equals(" <| "))
    {
      --j;
      if (flist != null)
        if(j<0 )  {
          j = -1;
          lab.setText("no image");
        } else {

          while(j<flist.length)
          {
            if(flist[j].isFile())
            {
              if(flist[j].getName().toLowerCase().endsWith(".jpg"))
              {
                ig=new ImageIcon(fdial.getDirectory()+flist[j].getName());
                lab.setIcon(ig);
                b1.setEnabled(true);
                break;
              }
            }

            j--;
          }
        }
    }

    if(ae.getActionCommand().equals(" |> "))
    {
      ++j;

      if (flist != null)
        if(j>=flist.length){
          j = flist.length;
          lab.setText("no image");
        } else  {
          while(j<flist.length)
          {
            if(flist[j].isFile())
            {
              if(flist[j].getName().toLowerCase().endsWith(".jpg"))
              {
                ig=new ImageIcon(fdial.getDirectory()+flist[j].getName());
                lab.setIcon(ig);
                b1.setEnabled(true);
                break;

              }
            }

            j++;
          }
        }
    }

  }
  public static void main(String args[])
  {
    new picframe ();
  }

} 
```

# ruby-on-rails-3 - 在端口 80 上启动服务器时出现 rails gem 错误，使用另一个端口？

> ID：14297418
> 
> 赞同：0
> 
> 时间：2013-01-12T20:03:19.743
> 
> 标签：ruby-on-rails-3, webserver, port-number

我正在构建一个平板电脑应用程序，我的开发环境是在 Windows 主机上的 virualbox 中运行 ubuntu 的 rails。我在 Windows 机器上设置了 dev.myapp.com 的主机名。

我作为我的网络服务器运行得很薄，但是当我运行时`sudo rails s thin -p 80`出现错误

```
在任何来源中都找不到 multi_json-1.0.4

```

安装 gem 并不能解决问题，如果我跑得很瘦，我会得到同样的错误。

我想我之前在不同的端口上启动了服务器，但我不记得是哪个端口了。我试过 8080，但是当我尝试`dev.myapp.com`在主机上的浏览器中打开时，它不起作用。

关于使用另一个端口（以及哪个端口无需端口扩展即可工作）或解决 multi_json 错误的任何建议。或者其他建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:30:29.487

放下`sudo`并像这样运行它`rails s thin -p 3000`。让它工作并验证您是否可以浏览到[http://dev.myapp.com:3000](http://dev.myapp.com:3000)。一旦这个工作正常，您可以重新引入 sudo 位并恢复到端口 80。如果不了解更多关于您的系统的信息，无法回答为什么 sudo 找不到 gem。很可能是路径问题，但有太多变量无法猜测。

综上所述..在备用端口上运行它有什么害处？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:08:41.053

我最终在这里做的是只用一个香草运行`rails s thin`，然后指向提琴手将 IP 地址重定向到端口 3000

# javascript - Javascript“关联”数组疯狂

> ID：14297422
> 
> 赞同：0
> 
> 时间：2013-01-12T20:03:39.627
> 
> 标签：javascript, arrays

我似乎不可能实现这个数组结构

```
[{ "Field1" : "Foo"}, {"Field2" : "Bar" }] 
```

使用以下代码

```
 var matching = new Array();

    $('tr[type="entity"]').each(function(){

        var $select = $(this).find('select');

        matching[$select.attr('id')] = $select.val();               
    }); 
```

这个

```
alert(JSON.stringify(matching)) 
```

总是返回 [ ]。如果是 php，我的数组看起来像这样

```
$matching = array(
    "Field1" => "Foo",
    "Field2" => "Bar"
); 
```

我知道 javascript 中没有关联数组。但是，如何根据我的代码实现这样的数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T20:05:58.210

对象是关联数组。考虑`var matching = new Object();`改用，并检查以确保该函数实际正在运行（即`tr`您期望的实际存在）。

# python-3.x - Python3.3 在 OS X virtualenv 中找不到 libpython3.3m.so

> ID：14297425
> 
> 赞同：0
> 
> 时间：2013-01-12T20:03:56.270
> 
> 标签：python-3.x, virtualenv, pyside, virtualenvwrapper

我已经在我的系统中安装了`IPython`with `qtconsole`，但我想构建一个独立`venv`的`virtualenv`和`virtualenvwrapper`作为沙箱，在向我的系统添加更多东西之前在其中进行试验，另外我想试验`virtualenv`并`virtualenvwrapper`更好地理解它们，所以我尝试在 a 中构建相同的安排`venv`并失败，因为我无法`PySide`安装在`venv`.

我阅读了这个[问题和答案](https://stackoverflow.com/questions/13903321/python3-3-cant-find-libpython3-3m-so-in-linux-pip-3-3)，以及[这个](https://stackoverflow.com/questions/13895763/installing-python-modules-for-specific-version-on-linux-pyside/13895878#13895878)问题，我阅读了[PySide 说明在 Unix 上从源代码安装](http://pypi.python.org/pypi/PySide)，但是这些指导集都不适合我。

显然，我确实已经`PySide`通过 MacPorts ( ) 在系统 (OS X 10.6 Snow Leopard) 本身中安装了`py33-pyside @1.1.2_1 (active)`，并且可以`ipython3 qtconsole`从系统（在外部`venv`）运行，但是`PySide`从*内部* `venv`源安装`$ pip install PySide`失败：

```
...running install
running build
error: Failed to locate the Python library /opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib/libpython3.3m.so 
```

事实上，这是真的：

```
$ ls -l /opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib/
total 16
lrwxr-xr-x    1 root  wheel     9 Sep 29 11:17 libpython3.3.dylib -> ../Python
lrwxr-xr-x    1 root  wheel     9 Sep 29 11:17 libpython3.3m.dylib -> ../Python
drwxr-xr-x    5 root  wheel   170 Jan 11 12:33 pkgconfig
drwxr-xr-x  191 root  wheel  6494 Jan 11 12:33 python3.3 
```

这些`.dylib`文件来自我的 MacPorts`python33`系统安装：

```
$ sudo port provides /opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib/libpython3.3m.dylib 
/opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib/libpython3.3m.dylib is provided by: python33 
```

但我的印象是`virtualenv`会导致新软件包安装使用独立于系统的资源（除了最初创建`venv`来自系统资源的资源），所以我想我错过了一些关于如何`virtualenv`隔离`venv`系统的重要信息。

iptest3 status 对于系统和`venv`（不确定是否重要）都可以。

应该给我`libpython3.3m.so`图书馆的是什么？也许是python3.3的一些开发版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:47:36.057

如果你链接`libpython3.3m.dylib`到`libpython3.3m.so`，一切都会好起来的（好吧，至少对我来说是这样）。`ln -s libpython3.3m.dylib libpython3.3m.so`在`/opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib/`. 我认为问题在于 OS X`.dylib`用于共享库，而 *nix 倾向于使用`.so`（尽管如果我错了，请随时纠正我）。

# php - CodeIgniter Pagination - 页面链接表现怪异

> ID：14297431
> 
> 赞同：2
> 
> 时间：2013-01-12T20:04:20.837
> 
> 标签：php, codeigniter, pagination

好的，过去一个小时我一直在做这件事，我一生都无法弄清楚这一点。它的页数正确..就像我现在应该有两页。我现在将它限制在 5 并且有 7 个结果。但是，当我单击第 2 页时，它不会显示其他两个帖子。现在，我的论坛 URL 是这样的：forum/category/2（论坛控制器，类别方法，类别 ID 为 2）我认为页面如下所示：forum/category/2/1 用于第 1 页和论坛/category/2/2 用于第 2 页等.. 但是，第 2 页给了我这个 URL：

forum/category/5... 哪个类别 ID 5 中没有主题.. 但它应该指向类别 ID 2 的第二页！所以我不确定......它可能会显示 5，因为它每页只显示 5？不知道它是如何工作的，但这是我的以下代码：

```
public function category($id, $page = NULL) {
    //grab topics
    parent::before();
    $data['forum_title'] = $this->forum->get_cat($id);
    $data['id'] = $id;

    $config = array();
    $config['base_url'] = base_url() . 'forum/category/';
    $config['total_rows'] = $this->forum->topic_count($id);
    $config['per_page'] = 5;
    $config['uri_segment'] = 4;

    $this->pagination->initialize($config);

    $page = ($this->uri->segment($config['uri_segment'])) ? $this->uri->segment($config['uri_segment']) : 0;
    $data['topics_array'] = $this->forum->get_topics($id, $config['per_page'], $page);

    $data['links'] = $this->pagination->create_links();
    $this->load->view('forum/category', $data);
    parent::after();
} 
```

这是我在该控制器中使用的函数：

```
//count the topics in a certain category id for pagination
public function topic_count($id) {
    $this->db->where('cat_id', $id);
    $this->db->from('forum_topic');

    return $this->db->count_all_results();

}
//get all topics in a certain category
public function get_topics($id, $limit, $start) {
    $this->db->distinct();
    $this->db->select('t.id, t.title, t.sticky, t.locked, u.username as author, COUNT(p.id) as postcount, (SELECT u.username
        FROM forum_post fp
        INNER JOIN user u ON fp.author_id = u.user_id
        WHERE fp.topic_id = t.id
        ORDER BY fp.date DESC
        LIMIT 1) as lposter, (SELECT fp.date
        FROM forum_post fp
        WHERE fp.topic_id = t.id
        ORDER BY fp.date DESC
        LIMIT 1) as lastdate');
    $this->db->from('forum_topic t');
    $this->db->join('user u', 'u.user_id = t.author_id', 'inner');
    $this->db->join('forum_post p', 'p.topic_id = t.id', 'inner');
    $this->db->where('t.cat_id', $id);
    $this->db->group_by('t.id, t.title, t.sticky, t.locked, author, lposter, lastdate');
    $this->db->order_by('t.sticky desc, p.date desc');
    $this->db->limit($limit, $start);
    return $this->db->get()->result();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:37:37.907

`$config['uri_segment']`CI 使用它来确定当前页面，而不是生成链接。

试试这个：

```
$config['base_url'] = site_url('forum/category/' . $id); 
```

# hibernate - Glassfish 3.1.2.2 和休眠 4.1.9

> ID：14297437
> 
> 赞同：1
> 
> 时间：2013-01-12T20:05:04.087
> 
> 标签：hibernate, glassfish

我开始接触 GF3 和 Hibernate。我见过类似的问题，但这些最新版本没有。我还看到了 Glassfish 3.1.2.2 中的附加组件与旧的 3.5 版本的 Hibernate。

我已经阅读了有关将所有休眠 jar 复制到：
`glassfish3\glassfish\lib`或`glassfish3\glassfish\domains\domain1\lib`

我的目标是编写一组使用休眠访问 MySQL 的 Web 服务。

是否有具体的文件说明这是如何完成的？

# c# - 隐藏窗口后任务栏进度条不显示

> ID：14297438
> 
> 赞同：0
> 
> 时间：2013-01-12T20:05:05.017
> 
> 标签：c#, windows-7, windows-api-code-pack

我正在尝试使用 C#（Net 3.5）向 Windows 7 中的任务栏图标添加进度条。我正在使用 Windows API 代码包来实现这一点：

```
 if (WindowStateInternal == FormWindowState.Normal) // the taskbar can only be set if the window is visible
    {
        TaskbarManager.Instance.SetProgressState(TaskbarProgressBarState.Normal);
        TaskbarManager.Instance.SetProgressValue(100 - (int)PercentRemaining, 100);
    } 
```

这工作正常，但只是第一次显示窗口。用户可以选择最小化窗口，然后将其删除，因为存在托盘图标。如果窗口再次显示，我无法再次打开进度条。

当用户最小化窗口时运行代码：

```
 this.WindowState = FormWindowState.Minimized;
    this.ShowInTaskbar = false;
    this.Visible = false; // otherwise problem when windows starts up and program is in autostart
    this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.FixedToolWindow; // Hide from Task-List (Alt+Tab) 
```

当它恢复正常时：

```
 this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.FixedSingle; // Show in Task-List (Alt+Tab)
    this.Visible = true;
    this.ShowInTaskbar = true;
    this.WindowState = FormWindowState.Normal;
    this.BringWindowToFront(); 
```

关闭和打开进度条不起作用。

如何再次显示进度条？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:58:52.190

显然，TaskbarManager 的“this.ShowInTaskbar = false;”有问题 线。我刚刚删除了它，因为隐藏窗口也会隐藏任务栏。但是，我需要保留“this.ShowInTaskbar = true;”。我只是假设这是一个错误。

# html - 让 iFrame 向左展开

> ID：14297441
> 
> 赞同：1
> 
> 时间：2013-01-12T20:05:24.613
> 
> 标签：html, css, iframe, styles

我正在制作一个位于 iFrame 内的 UI，并且可以嵌入到 HTML 页面中。UI 包含一个可变长度的水平菜单。想一想：

首页 - 登录 - 关于 - 帮助

但是菜单的长度/元素数量可能会发生变化。UI 位于它所嵌入**的每个页面的右上角。**我想要发生的是当我向菜单添加一个元素时，比如说“联系我们”，我希望 iFrame 向左扩展以容纳额外的元素。

现在菜单结构有多个 div 样式

`display: inline-block;`

但我也尝试过使用 UL 和 LI。

让这件事变得复杂的是我不希望 iFrame 的宽度是整个页面，我只希望它足够大以包含菜单。但是，如果我在添加新元素时没有明确设置宽度，而不是水平排列，它们会被推到下一行。

所以当我添加一个新元素（联系我们）时，我希望它看起来像这样：

```
Home - Login - About - Help - Contact Us 
```

但它最终看起来像

```
Home - Login - About - Help 
- Contact Us 
```

（请记住，这一切都发生在`position: fixed;`每个页面右上角的 iFrame 内）

我想弄清楚的是如何使 iFrame 向左扩展，而不是将新元素向下推到下一行。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:32:09.347

只要两个页面都在同一个域中，您就可以使用`window.frameElement`javascript 中的属性从菜单页面内部设置 iFrame 元素的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T00:29:01.800

查看这个处理 iFrame 在两个轴上调整大小的小库。

**[https://github.com/davidjbradshaw/iframe-resizer](https://github.com/davidjbradshaw/iframe-resizer)**

# java - 如何从 Java 中的 Hibernate 查询结果中获取列名？

> ID：14297443
> 
> 赞同：5
> 
> 时间：2013-01-12T20:05:28.377
> 
> 标签：java, hibernate, names

我正在编写一个使用 Hibernate 获取数据的 Java 应用程序，在我的应用程序中，我有一个输入文本区域，它接受用户输入的 sql 命令字符串并通过 Hibernate 运行它以获取用户查询的任何数据，所以我不事先不知道结果表可能是什么样子，因此不知道列名，但我确实需要在列名与数据字段相关的表中显示用户查询结果，如何在 Hibernate 中实现？我试过以下代码：

```
 Session session=HibernateUtil.getSession();
  session.beginTransaction();
  Query q=session.createQuery(hql);

  AliasToEntityMapResultTransformer INSTANCE=new AliasToEntityMapResultTransformer();
  q.setResultTransformer(INSTANCE);
  List<Map<String,Object>> aliasToValueMapList=q.list();

  for (Map<String,Object> map : aliasToValueMapList)
    for (Map.Entry<String,Object> entry : map.entrySet()) System.out.println(entry.getKey()+" - "+entry.getValue()); 
```

它给了我以下错误消息：线程“AWT-EventQueue-0”中的异常 java.lang.ClassCastException：sakila.entity.Actor 无法转换为 java.util.Map

它指向第一个for循环，因为我是Hibernate的新手，不知道它是否可行，如何修复上面的代码？有人可以向我展示一些适用于我的示例代码吗？

编辑：正如下面提到的 Marcel Stör，我需要能够允许这两种情况发生并且不限制用户查询任何数据的能力，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:25:26.153

不太明白，但还是敢回答。。。

如果您像这样使用[HQL](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch16.html)`Query q=session.createQuery(hql);` ，则建议您默认取回*对象*而不是单个字段。这意味着无论如何尝试将结果映射回查询都不走运，但是您可以简单地将对象的字段名称用作列名称。

如果你从文本区域得到的是纯 SQL，那么你必须使用`session.createSQLQuery(sql)`. 你得到的是一个[对象数组列表](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch18.html)。但是，在这里您也只能获取数据。您必须禁止您的用户使用`select *`查询。然后，您可以使用查询中的字段/列的名称作为输出列名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T08:53:10.123

对于 HQL 查询，我遇到了同样的问题，例如

```
select new Map(id as id, name as name) from Person 
```

我用作视图 DTO

使用一条或多条记录，我可以遍历作为 . 元素的地图`List<Map<String, Object>`。只有当我需要管理**空**数据集的情况时才会出现问题。对于这种情况，类似

```
public List<String> getAliases(String queryString) {
   ArrayList<String> list = 
       new ArrayList<String>(Arrays.asList(queryString.split("as ")));
   List<String> result = new ArrayList<String>();
   list.remove(0);
   for (String str : list) {
        StringTokenizer st = new StringTokenizer(str, ",) ");
        result.add(st.nextToken());
    }
    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T00:40:48.367

用户是否键入 SQL 或 HQL 查询？它们之间有很大的不同。

如果用户键入 HQL 查询，您可以调用`hqlQuery.getReturnTypes()`，然后对于每种类型，您可以执行[本文中建议的任何](https://stackoverflow.com/questions/2023700/get-column-name-of-property-mapped-with-hibernate)操作来查找表元数据。

# java - Java 分布式程序的当前最佳实践

> ID：14297445
> 
> 赞同：5
> 
> 时间：2013-01-12T20:05:40.277
> 
> 标签：java, jms, ipc, rmi, distributed-computing

我有兴趣实现一些跨越机器的进程，即形成一个分布式程序。我想要分发的是这些进程提供的功能，而不是数据。
那么目前 Java 中分布式编程的规范是什么？
还是RMI吗？还是某种消息系统？
我最初认为 RMI 和一点 JMX 用于远程管理，但想知道当前的最佳实践是什么。似乎 RMI 总是“埋在”另一层下（例如 EJB 对吗？）

**更新：**
在回答和评论之后，似乎当前的趋势是使用消息传递系统？这不是在分布式设计中引入了“集中式”组件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T20:25:49.610

我认为 RMI 不再是要走的路，如果 RMI 适合您的任务，只需使用 EJB 即可，因为您将从应用程序服务器获得许多功能，例如安全/访问控制、事务管理、数据库管理等。那些在 RMI 中的人是痛苦和浪费时间的。

分布式编程的另一个选择是使用[GridGain](http://www.gridgain.com/)，这是一个强大的框架，您可以使用它来轻松地在商用机器集群上运行您的程序。同样，您可能会考虑使用[Apache Hadoop](http://hadoop.apache.org/)

我会从 GridGain 开始，因为它非常易于安装，只需解压缩并运行，而且与您的应用程序集成也相对简单。

**编辑**

RMI 和消息系统有点不同，因为同步与异步通信的使用应取决于整个系统架构以及不同组件如何相互交互。例如，当服务调用需要很长时间才能完成时，例如进行批处理操作或归档大数据时，异步通信可能更合适。在这种情况下，服务客户端不持有系统资源（例如套接字和线程）

另一方面，当服务/功能需要很短的时间完成并且每个远程服务都依赖于前一个服务的结果时，同步通信可能更合适。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T22:40:01.763

我最近使用[Cajo](http://java.net/projects/cajo/pages/Home)项目在 Java 桌面 (Swing) 应用程序的几个实例之间进行远程处理。该项目已经有一段时间没有更新了，但它真的很容易使用，而且可以正常工作，而且几乎不用大惊小怪。

它是 RMI 的薄包装，所以它非常轻量级，而且速度非常快。

有关示例，请参阅文章[“Cajo，用 Java 完成分布式编程的最简单方法”](http://www.javacodegeeks.com/2011/01/cajo-easiest-way-to-accomplish.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T19:54:40.113

最佳实践通常是 EJB，前提是您在应用服务器/Java EE 堆栈中运行。

我喜欢异步消息传递解决方案。即使用JMS。您可以轻松地将 ActiveMQ 设置[为代理网络](http://activemq.apache.org/networks-of-brokers.html)，然后依赖发布订阅模式。在这种情况下，将没有中心组件。还有其他经纪人也这样做。

你看过[阿卡](http://akka.io/)吗？它不是任何接近标准的东西，但如果您的应用程序本质上是非常分布式的，那么它是一个有用的概念。

另一个趋势（可能对您来说过于以数据为中心）是使用分布式内存/数据网格。比如hadoop等。

# entity-framework - 如何连接到 Azure SQL Server？

> ID：14297446
> 
> 赞同：1
> 
> 时间：2013-01-12T20:05:45.820
> 
> 标签：entity-framework, entity-framework-4, azure-sql-database

我是 Azure 做事方式的新手，但已成功获得数据库设置和数据到 Azure SQL DB。我遇到的问题是我无法通过我的 MVC 4 应用程序连接到数据库。我正在使用实体框架。我的连接字符串是正确的。但我收到以下错误消息：

**初始化字符串的格式不符合从索引 0 开始的规范。**

我的想法是我的 web.config 文件配置不正确？我在这里包括部分：

```
 <configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
  </configSections>
  <connectionStrings>
    <add name="MovieContext" connectionString="Data Source=rh9bqjbkqi.database.windows.net; Initial Catalog=MainSQLDB; User ID=****; Password=****;" providerName="System.Data.SqlClient"/>
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0"/>
    <add key="webpages:Enabled" value="false"/>
    <add key="PreserveLoginUrl" value="true"/>
    <add key="ClientValidationEnabled" value="true"/>
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
    <add key="MvcMailer.BaseURL" value=""/>
  </appSettings> 
```

再往下看，我有以下内容：

```
<entityFramework>
<defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
  <parameters>
    <parameter value="v11.0"/>
  </parameters>
</defaultConnectionFactory> 
```

请告知，因为我想绕过这个颠簸并继续解决更大的问题，哈哈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:11:19.460

尝试将其更改为：

`Server=tcp:rh9bqjbkqi.database.windows.net;Database=MainSQLDB; User ID=username@rh9bqjbkqi;Password=password;Trusted_Connection=False;Encrypt=True;`

# java - JLabel：在覆盖paintComponent() 之后。如何使 setText() 呈现文本字符串？

> ID：14297448
> 
> 赞同：5
> 
> 时间：2013-01-12T20:05:48.887
> 
> 标签：java, swing, overriding, jlabel, paintcomponent

我写了一个 JLabel 的子类，并重写`paintComponent(Graphics)`了方法来制作渐变背景色。

这是 JLabel 的子类：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GradientPaint;
import java.awt.Graphics;
import java.awt.Graphics2D;
import javax.swing.BorderFactory;
import javax.swing.JLabel;

public class DLabel extends JLabel
{

    Dimension size = new Dimension(70, 80);

    public DLabel()
    {
        this.setPreferredSize(size);
        this.setBorder(BorderFactory.createBevelBorder(TOP, Color.white, Color.black));
    }

    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        Color color1 = new Color(226, 218, 145);
        Color color2 = color1.brighter();
        int w = getWidth();
        int h = getHeight();
        GradientPaint gp = new GradientPaint(
                0, 0, color1, 0, h, color2);
        g2d.setPaint(gp);
        g2d.fillRect(0, 0, w, h);
    }

} 
```

当我创建此标签的实例时，它会正确显示，但是当我使用`setText(String)`文本时不会呈现任何内容。

```
DLabel label = new DLabel();
label.setText("I am"); //No text displayed. 
```

设置文本后，我尝试了这些方法的不同编译：

```
label.setOpaque(true);
label.revalidate();
label.repaint(); 
```

但什么也没发生

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T20:09:47.927

如果你在方法的*最后*调用 super.paintComponent(g) ，让标签在绘制渐变*之后*绘制文本：

```
public void paintComponent(Graphics g) {
  // super.paintComponent(g);  // *** commented
  Graphics2D g2d = (Graphics2D) g;
  Color color1 = new Color(226, 218, 145);
  Color color2 = color1.brighter();
  int w = getWidth();
  int h = getHeight();
  GradientPaint gp = new GradientPaint(0, 0, color1, 0, h, color2);
  g2d.setPaint(gp);
  g2d.fillRect(0, 0, w, h);
  super.paintComponent(g); // *** added
} 
```

另外，作为一个无关的，我更喜欢改变这个：

```
Dimension size = new Dimension(70, 80);

public DLabel()
{
    this.setPreferredSize(size);
    this.setBorder(BorderFactory.createBevelBorder(TOP, Color.white, 
         Color.black));
} 
```

对此：

```
public static final Dimension PREF_SIZE = new Dimension(70, 80);

public DLabel()
{
    this.setBorder(BorderFactory.createBevelBorder(TOP, Color.white, 
         Color.black));
}

@Override
public Dimension getPreferredSize() {
  Dimension superDim = super.getPreferredSize();
  int width = Math.max(superDim.getWidth(), PREF_SIZE.getWidth());
  int height = Math.max(superDim.getHeight(), PREF_SIZE.getHeight()); 
  return new Dimension(width, height);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T20:11:46.683

`JLabel`在方法中呈现其文本内容`paintComponent`。

正确地，您正在调用`super.paintComponent`，但随后会立即使用`fillRect`

尝试将调用移动到`super.paintComponent`方法的末尾（`fillRect`调用之后）并将标签保留为透明

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-12T20:13:33.703

当您进行绘画时，它会在文本上绘画。看看[SwingX](http://swingx.java.net/)项目。它有一个 JxLabel 类，可以完全满足您的要求。

# html - 将css中的文本定位在文本框内（背景图片）

> ID：14297452
> 
> 赞同：0
> 
> 时间：2013-01-12T20:06:16.403
> 
> 标签：html, css, textarea

我在`div`文本框中使用图像，并且该图像上有某种边框/浮雕，因此文本越过该部分并且看起来很糟糕，因此我想将文本 cca 定位在右侧 15 像素，但无论我尝试什么都没有工作

html:

```
<div id=textarea>
    <h2> Tardis -time music festival </h2>
    <p>
    <br/>    Hello fellow time travelers,
    <br/>    Do you enjoy Music as much as Time travel?
    <br/>    If you do this is the right festival for you!
    <br/>    You don't even have to travel, we come to you,
    <br/>    And take you tot he biggest time adventure of your life!!
    <br/>    experience birth of music, the first rock song and much much more.
    </p>
</div> 
```

和CSS：

```
#textarea{
    background-image:url(images/text.png);
    background-repeat:no-repeat;

    border:none;
    width: 910px;
    height:300px;
    color:#CAAA5B;
    padding:3px;
    margin-right:4px;
    margin-bottom:8px;
    float:right;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:11:01.497

如果您想将包含文本的 div 向右移动，只需使用位置移位...例如：

```
#textarea{
postion:relative;
left:15px;
} 
```

这也可能会改变您的背景图像，但如果发生这种情况，您可以添加另一个 div，它只是文本，不会影响周围 div 中的图像。

```
div id=textarea>
<div id="text">
                <h2> Tardis -time music festival </h2>
        <p>
            <br/>    Hello fellow time travelers,
            <br/>    Do you enjoy Music as much as Time travel?
            <br/>    If you do this is the right festival for you!
            <br/>    You don't even have to travel, we come to you,
            <br/>    And take you tot he biggest time adventure of your life!!
            <br/>    experience birth of music, the first rock song and much much more.
                    </p>
                    </div></div> 
```

和

```
<style>
#text{
postion:relative;
left:15px;
}
</style> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-12T20:54:49.057

您是否尝试仅在 CSS 中定位 div 中的元素？

```
<style>
#textarea p h2 {
postion:relative;
left:15px;
}
</style> 
```

# jquery - 从选中的复选框中显示/隐藏具有大小和连续天数的 Div

> ID：14297456
> 
> 赞同：1
> 
> 时间：2013-01-12T20:06:30.573
> 
> 标签：jquery

下面的 js 显示了一个基于复选框 vselected 的数量（大小）的 div，它工作正常。复选框本身是连续的日期。我需要确保选择的日期是连续的 - 即 07/04、07/05、07/06 等 如果日期不是连续的，那么 div 不会显示（显示）。

```
$('input[type=checkbox]').change(function(){
   if($('input:checked').size() > 4){
     $("#hideocrp").show();   
   }
   else {
     $('#hideocrp').hide()   
   }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:24:58.520

您可以使用以下代码来实现您的目标：

```
var start = false;
var checkstart = false;
$('#hideocrp').hide();
$('input[type=checkbox]').change(function () {
  checkstart = false;
  start = false;
  $('input[type=checkbox]').each(function () {
    if ($(this).is(":checked")) {
      var index = $(this).index("input[type=checkbox]");
      if (start == false) {
        start = index + 1;
      }
      if (index == start - 1) {
        start = start + 1;
        checkstart++;
      } else {
        checkstart = false;
        return false;
      }
    }
  });
  if (checkstart > 3) {
    $("#hideocrp").show();
  } else {
    $('#hideocrp').hide();
  }
}); 
```

[现场演示](http://jsfiddle.net/RYBK5/2/show)| [演示源](http://jsfiddle.net/RYBK5/2/)

**编辑：** 尝试使用此代码轻松搜索连续的复选框匹配。

```
var start = false;
var checkstart = false;
$('#hideocrp').hide();
$('input[type=checkbox]').change(function () {
  checkstart = 0;
  start = false;
  $('input[type=checkbox]').each(function () {
    if ($(this).is(":checked")) {
      var index = $(this).index("input[type=checkbox]");
      if (index == 0) {
        start = index+1;
      }
      if (index == start+1) {
        start = start + 1;
        checkstart++;
      } else {
        if (checkstart < 4) {
          checkstart = 1;
          start = index;
        } else {
          return false;
        }
      }
    }
  });
  if (checkstart > 3) {
    $("#hideocrp").show();
  } else {
    $('#hideocrp').hide();
  }
}); 
```

[现场演示](http://jsfiddle.net/RYBK5/6/show)| [演示源](http://jsfiddle.net/RYBK5/6/)

**编辑2：**

要解决您的第二个问题，只需使用

```
$(document).ready(function() {
  $('input[type=checkbox]').trigger("change");
}); 
```

[演示](http://jsfiddle.net/RYBK5/7/show)| [来源](http://jsfiddle.net/RYBK5/7/)

[测试](http://jsfiddle.net/RYBK5/8/show)

# java - 对象数组 - 空指针异常

> ID：14297461
> 
> 赞同：-2
> 
> 时间：2013-01-12T20:07:28.113
> 
> 标签：java, oop, nullpointerexception

我需要一个返回对象数组的方法。下面是我的代码，但我得到空指针异常，不知道为什么。

```
 public Place[] getPlaces() 
    {
        Place result[] = null ;
        int counter = 0;

        try {
            PreparedStatement ps = this.db.prepareStatement("select * from places");

            ResultSet rs = ps.executeQuery();

            while(rs.next()) {
                Place p = new Place();
                p.setPlaceID(rs.getInt("placeID"));
                p.setPlaceName(rs.getString("placeName"));

                result[counter] = p;
                counter++;
            }

        } catch (Exception e) {
            e.printStackTrace();
        }
        return result;
    } 
```

在线`result[counter] = p;`日食说：

此行有多个标记 - 空指针访问：变量结果在此位置只能为空

所以，我`@SuppressWarnings("null")`在我的方法之前添加了。但是，当方法被调用时，它会抛出空指针异常。在我遇到问题的行之前，尝试打印存储在 db 中的地名并且它有效。因此，这不是数据库问题，因为错误输出显示：

```
java.lang.NullPointerException
    at PlaceMod.getPlaces(PlaceMod.java:29)
    at PlaceCont.list(PlaceCont.java:15)
    at Main.main(Main.java:14) 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T20:11:48.417

您创建了一个空数组。使用`ArrayList`（因为您不知道结果集的大小）：

```
 List<Place> result = new ArrayList<>();

 while(rs.next()) {
   ...
   result.add(p);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:10:29.720

您从未分配过一个数组，因此当您尝试时`result`它仍然存在`null``result[counter] = p;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T20:10:58.393

你没有初始化你的数组。您必须`result = new Place[size]`在使用此数组之前放置类似的内容（大小是数组的长度）。你应该考虑`ArrayList`在这里使用。

# php - 上传文件时回显消息

> ID：14297462
> 
> 赞同：0
> 
> 时间：2013-01-12T20:07:30.867
> 
> 标签：php

我想在文件上传时回显一条读取“文件上传”的消息，但该消息仅在完成上传后才被回显，还有另一种方法吗？

```
if(move_uploaded_file($_FILES['uploaded']['tmp_name'], $target))

  {
     echo "file uploading";
     header("location:somewhere.php?uploaded")
  } 

else echo "oops!"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T20:10:22.183

它仅在文件上传后打印，因为那是在文件上传**后**执行 PHP 脚本的时候。

一个解决方案是使用 PECL[上传进度](http://pecl.php.net/package/uploadprogress)包，尽管这意味着安装 PHP 扩展，您可能无法使用您的主机执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T20:15:03.023

您现在遇到的是*异步*执行某些操作的必要性。同步是您现在正在做的事情，即触发一个新请求并上传图片，它只允许在请求*之后*显示消息。

[您可以在后台上传图像并使用AJAX](http://api.jquery.com/jQuery.ajax/)和[jQuery](http://jquery.com)在页面上显示加载 gif 或类似的内容。这允许您*在*上传时显示消息。

有关 jQuery 的良好介绍，请查看[新 boston 中的这些视频](http://thenewboston.org/list.php?cat=32)。专门针对 AJAX，请查看[第 101 集和以下内容](http://thenewboston.org/watch.php?cat=32&number=101)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T20:36:32.937

第一件事。**位置** `header();`函数应该是`L`（在大写中`Location:`）然后，始终**在**header() 中使用绝对 URI；像..

`header("Location: the_location_url");`好的？好的！

现在，关于显示，`Loading..`您应该使用该`sleep();`功能通过在其中输入秒数来延迟任何正在进行的过程，如此处所示`sleep(05);`

现在，关于您的代码：

```
if(move_uploaded_file($_FILES['uploaded']['tmp_name'], $target))

  {
     echo "file uploading";
      sleep(05);
     header("Location: the_location_url")
  } 

else echo "oops!"; 
```

# javascript - 使用 javascript cookie 识别访问者以进行调查

> ID：14297463
> 
> 赞同：1
> 
> 时间：2013-01-12T20:07:33.280
> 
> 标签：javascript, cookies, unique, survey

我希望第一次访问我网站的人填写调查表。我有代码来显示一个弹出窗口，询问用户是否要填写调查，但我仍然没有识别唯一用户的代码。我搜索了2个多小时，但我找不到它。

这是我的要求：

*   我正在使用wix.com，所以我不能使用php或asp，所以我必须使用javascript
*   我想使用[evercookie](http://samy.pl/evercookie/)，所以访问者不会意外删除我的 cookie

后者并不是真正需要的，但它会很方便，因为它们不能被删除。

另外我想获得完整的代码，没有例子。您可以使用**http://url.com**作为我存储调查的网站的 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:43:52.067

这样做确实违反了欧盟关于 cookie 的政策：http: [//ec.europa.eu/ipg/standards/cookies/index_en.htm#section_2](http://ec.europa.eu/ipg/standards/cookies/index_en.htm#section_2)

但是，我确实建议使用[localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage)和使用[jstorage](http://www.jstorage.info/#reference)的 cookie 回退，您可以在此处获取代码：[https ://raw.github.com/andris9/jStorage/master/jstorage.min.js](https://raw.github.com/andris9/jStorage/master/jstorage.min.js)

演示： http: [//fiddle.jshell.net/eXZky/show/](http://fiddle.jshell.net/eXZky/show/) | 来源： http: [//fiddle.jshell.net/eXZky/](http://fiddle.jshell.net/eXZky/)

使用[evercookie](https://github.com/samyk/evercookie)需要额外的浏览器插件，甚至服务器端脚本。

# c++ - 将曲面剪裁到视口

> ID：14297464
> 
> 赞同：0
> 
> 时间：2013-01-12T20:07:36.187
> 
> 标签：c++, directx, surface, directx-9, clipping

我正在尝试使用采用 Surface 和 X、Y 位置进行渲染的方法来渲染表面。问题是当表面在屏幕之外一个小像素时，它根本不会渲染。

这是为什么？我正在尝试搜索 DirectX 剪辑，但根本找不到任何东西。

```
void Draw(LPDIRECT3DSURFACE9 src, int x, int y)
{
    D3DSURFACE_DESC desc;
    src->GetDesc(&desc);

    D3DVIEWPORT9 viewport;
    Device->GetViewport(&viewport);

    int vX = viewport.X;
    int vY = viewport.Y;
    int vWidth = viewport.X + viewport.Width;
    int vHeight = viewport.Y + viewport.Height;

    RECT source;
    source.left = max(x, vX);
    source.right = min(source.left + desc.Width, vWidth);
    source.top = max(y, vY);
    source.bottom = min(source.top + desc.Height, vHeight);

    RECT destination;
    destination.left = max(x, vX);
    destination.right = min(destination.left + desc.Width + x, vWidth);
    destination.top = max(y, vY);
    destination.bottom = min(destination.top + desc.Height + y, vHeight);

    Device->StretchRect(src, &source, BackBuffer, &destination, D3DTEXF_POINT);
}; 
```

...并且 X = 100, Y = 100 不起作用，但 -100 起作用，但它不能正确拉伸。

**所需效果的示例图像：** ![在此处输入图像描述](../Images/b29a644438c2dcea7e0026105ec5f955.png)

我也一直在尝试将 *pSourceRect 和 *pDestRect 设置为可以剪切表面但没有任何运气的东西。

我正在使用 DirectX9。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T21:48:30.437

我不确定这是否有效（还没有测试过），但理论上你应该用正确的矩形来解决你的问题。选择它们，使其不超过边界并且仅复制重叠部分。我试图将这个想法想象成下图：

![重叠矩形](../Images/99674899a65d1e966185bb2bc144c531.png)

如果我没记错的话应该是

```
RECT source;
source.left = max(min(-x, desc.Width - 1),0);
source.right = max(min(source.left + viewport.Width -1, desc.Width - 1),0);
source.top = max(min(-y, desc.Height - 1),0);
source.bottom = max(min(source.top + viewport.Height -1, desc.Width - 1),0);

RECT destination;
destination.left = max(min(x, viewport.Width - 1),0);
destination.right = max(min(destination.left + desc.Width -1, viewport.Width - 1),0);
destination.top = max(min(y, viewport.Height - 1),0);
destination.bottom = max(min(destination.top + desc.Height -1, viewport.Height - 1),0); 
```

在你的情况下。目标是矩形不超过相关表面，因此它们的所有坐标都必须在边缘处被剪裁。

# php - 使用 grap api facebook 上传笔记粉丝专页

> ID：14297470
> 
> 赞同：0
> 
> 时间：2013-01-12T20:08:12.330
> 
> 标签：php, facebook, api, facebook-graph-api, facebook-javascript-sdk

嗨，我正在使用此代码在我的粉丝页面上发布注释，它有效，问题是日记页面不显示图像，而只有文字，为什么？

```
<?php
$access_token='MY ACCES TOKEN FAN PAGE';
$attachment = array(
'access_token' => $access_token,
'message' => 'MESSAGE <img src="IMAGE_ADDRESS" alt="TEST IMAGE" /> ',
'subject' => 'test test test'
);

// set the target url
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,'https://graph.facebook.com/id_fanpage/notes?');
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, false); //to suppress the curl output

$result= curl_exec($ch);
curl_close ($ch); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:03:19.677

你是怎么上传图片的？

似乎`notes`'`message`字段接受 HTML 标记，因此具有以下内容应该可以工作：

```
<img src='http://domain.com/myImage.jpg' /> 
```

# java - 线程交错 - 可以输出什么可能的结果

> ID：14297472
> 
> 赞同：7
> 
> 时间：2013-01-12T20:08:52.167
> 
> 标签：java, multithreading, concurrency

拿这个线程：

> a = 3; b = 3;

并采取这个线程：

> b = 5; a = 5;

他们都从监视器访问相同的数据。

如果它们都同时运行（通过使用线程），可能的结果是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T20:10:22.330

因为线程的操作可以按任何顺序执行，所以 a=3,5 和 b=3,5 的任意组合都是可能的。

为未来的读者澄清：

`Thread-1: a=3 b=3`, `Thread-2: b=5 a=5`

可能的操作订单：

I：线程 1、线程 1、线程 2、线程 2

二：线程1、线程2、线程1、线程2

III：线程 1、线程 2、线程 2、线程 1

IV：线程 2、线程 1、线程 2、线程 1

五：线程2，线程2，线程1，线程1

VI：线程 2、线程 1、线程 1、线程 2

让我们尝试每一个：

`I: a=3, b=3, b=5, a=5 --> a=5, b=5`

`II: a=3, b=5, b=3, a=5 --> a=5, b=3`

`III: a=3, b=5, a=5, b=3 --> a=5, b=3`

`IV: b=5, a=3, a=5, b=3 --> a=5, b=3`

`V: b=5, a=5, a=3, b=3 --> a=3, b=3`

`VI: b=5, a=3, b=3, a=5 --> a=5, b=3`

请注意，有四种方法可以提出`a=5,b=3`. 因此，如果您对每个线程排序有一个*公平*的概率，您将在大约 67% 的时间内得出该结果。但是，您无法保证这种可能性；事实上，您几乎可以肯定操作系统以某种未知的方式存在偏见。教训是，你不应该试图依赖未定义的行为来为你做任何事情。

（我知道最后一部分有点超出了问题的范围，但我认为需要牢记。）

# c++ - 如何在字符串中插入制表符？

> ID：14297477
> 
> 赞同：0
> 
> 时间：2013-01-12T20:09:18.300
> 
> 标签：c++

我真的不明白。请帮忙！

我是初学者。

要标签，你不这样做吗？

```
/t 
```

无论如何，有人可以向我解释一下标签吗？谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-12T20:11:00.250

选项卡的正确转义序列是`\t`

# python - 从 Python 中的 wxDialog 修改 wxTextCtrl 的值

> ID：14297482
> 
> 赞同：-1
> 
> 时间：2013-01-12T20:10:08.680
> 
> 标签：python, class, wxpython

我有以下代码：

```
import wx

class CotizadorWindow(wx.Frame):
    def __init__(self):
        super(CotizadorWindow,self).__init__(None)
        self.CreateInteriorWindowComponents()

        self.SetTitle(u"Cotizador")

   def CreateInteriorWindowComponents(self):
       self.hbox=wx.BoxSizer(wx.VERTICAL)
       self.panel1=wx.Panel(self,-1,style=wx.SIMPLE_BORDER)
       self.SetSizer(self.hbox)
       self.Centre()
       self.hbox.Add(self.panel1,1,wx.EXPAND|wx.ALL,3)

       wx.StaticText(self.panel1,label=u"Cotización", pos=(10,10))
       self.bxCotizacion=wx.TextCtrl(self.panel1,size=(80,-1),pos=(80,8))

       self.btnAltaCliente=wx.Button(self.panel1,label='Alta cliente', pos=(100,37))
       self.btnAltaCliente.Bind(wx.EVT_BUTTON,self.Alta)

    def Alta(self,event):
        altacliente=DlgAltaCliente(None, title='Nuevo Cliente')
        altacliente.ShowModal()
        altacliente.Destroy()

    def ClearCliente2(self):
        self.bxCotizacion.Value='1'

class DlgAltaCliente (wx.Dialog):
    def __init__(self,*args,**kw):
        super(DlgAltaCliente,self).__init__(*args,**kw)

        self.InitUI()
        self.SetSize((200,200))
        self.SetTitle("Alta de Cliente")

    def InitUI(self):
        pnl=wx.Panel(self)
        vbox=wx.BoxSizer(wx.VERTICAL)

        hbox=wx.BoxSizer(wx.HORIZONTAL)
        okButton=wx.Button(self,label='OK')
        closeButton=wx.Button(self,label='Cancelar')
        hbox.Add(okButton)
        hbox.Add(closeButton, flag=wx.LEFT,border=5)

        vbox.Add(pnl,proportion=1, flag=wx.ALL|wx.EXPAND,border=5)
        vbox.Add(hbox,flag=wx.ALIGN_CENTER|wx.TOP|wx.BOTTOM, border=10)

        self.SetSizer(vbox)
        okButton.Bind(wx.EVT_BUTTON,self.EvtGuardarCliente)
        closeButton.Bind(wx.EVT_BUTTON,self.EvtOnClose)

    def EvtGuardarCliente(self,event):

        self.Destroy()
        cotizador=CotizadorWindow()
        cotizador.ClearCliente2()

   def EvtOnClose(self,event):
       self.Destroy()

app=wx.App()
frame=CotizadorWindow()
frame.Show()
frame.Maximize()
app.MainLoop() 
```

在 2nd Class 我创建了一个对话框，关闭后对话框的信息应该被传输到 1st Class 组件中的组件。它不起作用。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:29:50.060

对话框的“确定”和“取消”按钮无需使用事件处理程序。只需为这些按钮使用库存 ID wx.ID_OK 和 wx.ID_CANCEL，默认处理程序将为您做正确的事情，包括验证对话框控件是否具有验证器，然后调用 EndModal。

然后在创建和显示对话框的代码中，典型的使用模式是这样的：

```
def Alta(self,event):
    altacliente=DlgAltaCliente(None, title='Nuevo Cliente')
    if altacliente.ShowModal() == wx.ID_OK:
        # fetch values from the dialog
        self.someValue = altacliente.getSomeValue()
    altacliente.Destroy() 
```

并且将对话框用作上下文管理器也是可能的，完成后它会自动为您调用 Destroy：

```
def Alta(self, event):
    with DlgAltaCliente(None, title='Nuevo Cliente') as dlg:
        if dlg.ShowModal() == wx.ID_OK:
            # do something with dlg values... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:33:40.607

您的问题是，在 ok 案例的事件处理程序中，您正在创建 CortizadorWindow 的新实例，而不是访问对已经实例化的实例的引用。

# windows - 使用任务调度程序关闭程序

> ID：14297498
> 
> 赞同：0
> 
> 时间：2013-01-12T20:11:23.307
> 
> 标签：windows, vb.net, batch-file, scheduled-tasks

我想使用 Windows 任务调度程序关闭一个程序，所以我创建了一个批处理文件：

```
TASKKILL /F /IM "Mobile Partner.exe" 
```

此脚本关闭应用程序“移动合作伙伴”，此技巧有效！

我的问题 - 只有当“移动合作伙伴”尝试启动或计算机连接到互联网时才可以运行此脚本？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:00:36.327

如果它正在运行或有互联网连接，这将终止该进程。

```
tasklist /nh /fi "imagename eq Mobile Partner.exe" | find /i "Mobile Partner.exe" >nul && taskkill /im "Mobile Partner.exe" /f
ping www.google.co.uk -n 1
if %errorlevel%==0 taskkill /im "Mobile Partner.exe" /f 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:16:54.153

是的，从某种意义上说。无论如何，该脚本都会按计划运行。您想要的是仅在您的条件下运行 kill 命令。

这是一个关于 ping ip 的 SO question，可用于确定您是否已连接到 Internet[如何在批处理文件中检查 ping 是否响应](https://stackoverflow.com/questions/3050898/how-to-check-if-ping-responded-or-not-in-a-batch-file)

至于另一个，只需查看“移动伙伴”进程是否处于活动状态（一个简单的 WMI 调用）即可。

# uncrustify - Uncrustify 选项以在空行上留下空格

> ID：14297499
> 
> 赞同：5
> 
> 时间：2013-01-12T20:11:30.017
> 
> 标签：uncrustify

我正在尝试找到在空白行上留下空格的选项。目前 uncrustify 将删除所有尾随空格（好！），但是如果它在空白行上，我想保留空格，因为它通常是缩进级别。

这是一个空行`nl_*`选项，还是一个缩进`indent_*`选项？我找不到一个可以做我想做的事，甚至无法控制尾随空格选项！它只是默认执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T10:42:45.593

我收到了项目负责人 Ben Gardner 的[回复](https://github.com/bengardner/uncrustify/issues/132)，他说：

> 没有选项可以做到这一点，也没有计划添加一个选项来做到这一点。

# tomcat - 对 Web 应用程序的域访问 - Tomcat

> ID：14297500
> 
> 赞同：0
> 
> 时间：2013-01-12T20:11:33.557
> 
> 标签：tomcat, tomcat6

我正在使用可以通过以下方式访问的 Tomcat 服务器`https://<IP>:8443/webappname`（适用于所有 Web 应用程序）

此 tomcat 服务器还配置为由域访问，例如：`https://mydomain123.com/webappname`

但是，并非所有 web 应用程序都可以访问。如何使 webapps 文件夹中的新 Web 应用程序可以像上面那样访问（域）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T03:49:39.203

如果 Apache (httpd) 在 Tomcat 前面运行，它很可能`mod_proxy`用于将某些 webapps 的请求转发到 Tomcat。由于它适用于某些 webapps 但不适用于其他 webapps，请尝试查看 Apache 配置文件（通常`/etc/apache2`在 Linux 中）以查找以 开头的行`ProxyPass`，类似于：

```
ProxyPass /example ajp://localhost:8009/example
ProxyPassReverse /example ajp://localhost:8009/example 
```

对于通过 Apache 可访问的每个 webapp，应该有两行这样的行。只需复制这些行并更改 webapp 的名称（上面的“示例”）以代理其他应用程序。

如果您在 Apache 配置文件中没有找到任何`ProxyPass`行，则它可能正在使用不同的模块，例如`mod_jk`.

# android - Android - 无法启动之前启动的新活动

> ID：14297506
> 
> 赞同：0
> 
> 时间：2013-01-12T20:11:59.453
> 
> 标签：android, android-intent

我无法解决这个问题。我其实不明白这一点。我正在创建一个游戏。一项活动，一个级别有大约 1000 行代码，所以我不会全部输入。但是问题看起来像这样：有一些启动活动，它启动了菜单活动并自行关闭。然后我打开我的第一个级别活动[从菜单，我通过finish（）关闭菜单活动]，当它完成时[这个级别活动]，我想开始另一个活动。但是出现了问题。直到 3 天前一切正常，现在当我尝试打开活动时它只是崩溃了。如果我能记住并编辑了几行代码，我只是在我的游戏中添加了一些位图。我关卡中的这个片段正在关闭它，并假设打开菜单活动：

```
canvas.drawBitmap(game_over, 0, 0, null);
                    try {
                        Thread.sleep(500);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    soSelCarIgn.release();
                    soSelCarRun.release();
                    Intent menu=new Intent("com.ntii.game.adam.Menu");
                    startActivity(menu);
                    finish(); 
```

所以我尝试打开活动，在我第二次开始游戏时打开没有问题。它发生在任何其他活动中，除了关卡本身。（我的意思是，当我尝试在关卡中打开关卡然后完成（）第一个关卡时，它可以工作）。当我删除开始活动的行时，关卡会自行关闭，一切正常，没有任何错误。

安卓清单：

```
<activity
        android:name=".Menu"
        android:label="@string/title_activity_main"
        android:screenOrientation="portrait"
        android:noHistory="true" >
        <intent-filter>
            <action android:name="com.ntii.game.adam.Menu" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

有这一行“android:noHistory="true" 因为我尝试了任何方法来关闭这个活动。它给了我错误： http: [//img839.imageshack.us/img839/7426/wtfvh.jpg](http://img839.imageshack.us/img839/7426/wtfvh.jpg)

我最近添加的位图是小尺寸的 jpeg，更重要的是我尝试优化和清理代码，删除了一些其他位图，仍然不起作用。看起来这个活动在完成（）之后没有关闭，当我尝试打开菜单活动时，没有足够的内存。任何想法，线索？

如果有人不了解整个活动的运行顺序：

SPLASH --> 菜单 --> LEVEL - 尝试打开，但有崩溃 -> 菜单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:22:47.217

问题在这里：

```
Intent menu=new Intent("com.ntii.game.Menu"); 
```

利用

```
Intent menu=new Intent("com.ntii.game.adam.Menu"); 
```

或者

```
Intent menu=new Intent(this, com.ntii.game.adam.Menu.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:41:54.060

尝试这个：

```
Intent menu = new Intent(currentClass.this, Menu.class);

startActivityForResult(menu,0); 
```

原因是，类的名称是“Menu”，这是您要引用的内容，您不需要动作名称，即：“com.ntii.game.adam.Menu”。** currentClass 只是指您的应用程序中的当前类，因为我不知道它是什么。

# java - 从嵌套的 for 循环中返回一个变量

> ID：14297507
> 
> 赞同：1
> 
> 时间：2013-01-12T20:12:15.323
> 
> 标签：java, arrays, loops, methods

我正在编写一个彩票类，我的其余代码都在工作，除了比较匹配彩票号码数量的方法。我终其一生都无法弄清楚如何记录比赛的数量并将其归还。

我对java相当陌生，所以如果这是一个明显的答案，我深表歉意。

这是我正在使用的方法的代码：

```
public int numIntsInCommon(int[] picks){
     int inCommon = 0;

     for (int counter = 0; counter < 5; counter++)
     {
        for (int index = 0; index < 5; index++)
        {
           if (lotteryNumbers[counter] == picks[index])
              inCommon += 1;

        }
        return inCommon;
     }

     return inCommon;
  } 
```

现在它目前只返回 0。任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:14:35.537

`return inCommon`从 for 循环中删除。永远无法达到外部回报。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T20:15:33.387

第一条`return`语句将`inCommon`在方法有机会完成外循环之前返回值。我根本不确定第一个 return 语句的意义，真的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T20:28:12.463

在java中，“return”意味着一个函数的终止，所以如果你在内循环中返回，外循环在任何情况下都不会被执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T20:21:01.733

```
public int numIntsInCommon(int[] picks)
{
     int inCommon = 0;

     for (int counter = 0; counter < 5; counter++)
     {
        for (int index = 0; index < 5; index++)
        {
           if (lotteryNumbers[counter] == picks[index])
              inCommon++;
        }
     }

     return inCommon;
} 
```

现在应该好了。您之前所做的是在第一次迭代后跳出嵌套循环。换句话说：由于您的嵌套返回，循环在 counter = 1 之后结束。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T20:40:32.797

如果您使用 Java Collections Framework 并将您的 lotteryNumbers 和 picks 定义为 List，那么您的问题更容易解决，如下所示：

```
public int numIntsInCommon(List<Integer> picks) {
    List<Integer> matches = new ArrayList<Integer>(picks);
    matches.retainAll(lotteryNumbers);
    return matches.size();
} 
```

# ruby-on-rails - 如何在 Rails 中设置默认源编码？

> ID：14297508
> 
> 赞同：1
> 
> 时间：2013-01-12T20:12:22.667
> 
> 标签：ruby-on-rails, ruby, encoding

Ruby 的默认源编码为 ASCII，要更改源编码，需要在每个文件的标题上使用魔术编码注释，这将有助于 Ruby 解释器以该编码加载文件。

我已经完成了我的作业，我知道 Ruby 中有[三种编码](http://blog.grayproductions.net/articles/ruby_19s_three_default_encodings)以及可以通过开关设置的外部或内部编码）

要配置`Ruby`默认源编码（例如 utf-8）而不影响我的程序文件，我可以使用它`Ruby -e`来启动我的文件。

如何在in或wrapepr`Rails`等环境中启用此功能？`unicorn``rails`

# svg - 如何在svg tiny中获得溢出隐藏效果

> ID：14297510
> 
> 赞同：0
> 
> 时间：2013-01-12T20:12:38.127
> 
> 标签：svg, scroll, css

我一定会使用 SVG Tiny，因为它是浏览器支持的唯一版本。我怎样才能实现类似于`overflow: hidden`这个版本的效果（我必须实现滚动效果）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:53:18.810

构建您的内容，以便您首先绘制滚动内容，然后在顶部绘制其他内容，使其看起来被剪裁。请注意，如果顶部的东西绘制起来很复杂，这可能会很昂贵，因此对于覆盖您不想看到的部分的东西，我建议使用一个或多个纯色矩形。

# android - Android上的Ruby脚本？

> ID：14297511
> 
> 赞同：0
> 
> 时间：2013-01-12T20:12:47.440
> 
> 标签：android, ruby, scripting

在我的桌面上，如果我必须编写一些脚本，我会使用 ruby​​。我想知道使用 Ruby 在 Android 上编写脚本是否可行且实用？

我所说的脚本是指简短的、通常重复的任务，而不是应用程序。

我的脚本中有 70% 的脚本是要“即时”修改的，使用文本编辑器，所以，我基本上需要 Ruby 来像在 Debian 桌面上一样运行。

实用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:21:35.687

我认为您正在寻找的是[Ruboto](http://ruboto.org/)和相关的[IRB](https://play.google.com/store/apps/details?id=org.ruboto.irb)，它允许您执行一些脚本，尽管我不相信它在桌面上像 Ruby 那样工作，您可能需要修改您的脚本（尽管公平地说，我对使用 ruby​​ 在桌面上创建脚本知之甚少，所以它可能没有什么不同，但看起来有相当多的 android 特定调用）。

# annotations - 如何在 Intellij 中对注释字段进行代码补全？

> ID：14297513
> 
> 赞同：0
> 
> 时间：2013-01-12T20:12:56.867
> 
> 标签：annotations, intellij-idea

想象一下下面的代码：

```
@OneToMany(mappedBy = "country", cas) 
```

如何调用“cas”的代码完成以使用@nnotation 的“cascade”选项？

# c - 计算最大公约数

> ID：14297515
> 
> 赞同：3
> 
> 时间：2013-01-12T20:12:59.453
> 
> 标签：c, greatest-common-divisor

我编写了以下函数来计算浮点数的 GCD，但是当我为输入 (111.6, 46.5) 运行此函数时，函数中 fmod(a,b) 的计算在 2 次递归调用后开始给出错误的结果。我在这里找不到错误。谁能找到这里出了什么问题？

```
float gcd(float a, float b){
if (a>b) {
    if(b==0){
        return a;
    }
    else {
        return gcd(b, fmod(a,b));
    }
}
else {
    if (a==0) {
        return b;
    }
    else {
        return gcd(fmod(b,a), a);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T20:43:43.770

由于浮点值的表示方式，源文本“111.6”转换为 111.599999999999994315658113919198513031005859375，源文本“46.5”转换为 46.5。然后你的`gcd`函数返回 7.62939453125e-06。那是两个输入值的正确 GCD。

请注意，第一个值为 14627635/131072。所有浮点数都是某个整数（在一定范围内）乘以或除以 2 的幂。用二进制浮点数精确表示 111.6 是不可能的。因为你不能精确地表示 111.6，所以你不能用它做精确的算术运算。浮点主要是为近似算术而设计的。做精确的算术需要非常小心。

* * *

> 谈论实数（相对于整数）的 GCD 是什么意思？

*a*和*b*的 GCD是最大数*c*使得*a* / *c*和*b* / *c*是整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:41:07.493

```
float gcd(float a, float b){
    printf("a=%f b=%f\n",a,b);
if (a>b) {
    if(b==0){
        return a;
    }
    else {
        return gcd(b, fmod(a,b));
    }
}
else {
    if (a==0) {
        return b;
    }
    else {
        return gcd(fmod(b,a), a);
    }
}
}
main(){
    printf("%f\ndddeellliiimmiitteerr\n",gcd(1116,465));
    printf("%f\n",gcd(111.6,46.5));
} 
```

所以你可以看到浮动不太准确。
你可以尝试双倍（但它也是:)）或......阅读有关如何存储浮点数的信息

# javascript - jQuery 周历插件中的非营业时间变灰

> ID：14297522
> 
> 赞同：2
> 
> 时间：2013-01-12T20:13:54.953
> 
> 标签：javascript, jquery, css, plugins

我正在使用[jQuery weekcalendar 插件](https://github.com/themouette/jquery-week-calendar)来显示带有事件的基于 Web 的日历。如何将非工作时间灰显？当不在营业时间时，整行应该是灰色的：

```
businessHours: {start: 8, end: 19, limitDisplay: false}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:25:44.690

首先，您需要为您的营业时间使用全局变量，如下所示：

```
var timeStart = 8
var timeEnd = 19

businessHours: {start: timeStart , end: timeEnd , limitDisplay: false}, 
```

然后，尝试将其添加到文档准备好的 jquery javascript 中（在创建日历之后）：

```
$('.wc-time-slot').each(function(index, element) {
    if (index<6*timeStart||index>=6*timeEnd) {
        $(this).css('background-color','#eee')
    }
}); 
```

每小时有六行，所以这就是为什么要乘以 6。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:13:00.770

编辑：不完整的答案。它不会突出显示整行。

感谢 Phekka，我在 Inspect element 部分找到了这个：

非营业时间：

```
<div class="wc-hour-header ui-state-default"></div> 
```

营业时间：

```
<div class="wc-hour-header ui-state-active wc-business-hours"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T23:47:00.360

这有点难。我认为您必须使用 `td.wc-day-column`背景属性进行管理，并添加一个带有**计算像素或百分比**值的[css3 渐变。](http://www.colorzilla.com/gradient-editor/)

 **祝你好运。**

# jquery - 如何使用 JQuery 访问存储在 XML 中的“额外数据”以填充下拉列表

> ID：14297524
> 
> 赞同：0
> 
> 时间：2013-01-12T20:14:01.047
> 
> 标签：jquery, xml, drop-down-menu, city, multiple-value

Pavel K 的回答奏效了。但是，由于未知原因，我需要将“data-stationID”更改为“data-sid”。可能是混合案例问题？

对于需要多条数据的其他人，此行显示了如何将更多数据“堆叠”到选项中；

```
$('<option data-stationID="' +$(this).data('sid')+ '" data-lat="' +$(this).data('lat')+'" data-lon="' +$(this).data('lon')+'"  ></option>').text($(this).data('city')).appendTo(city); 
```

我的 XML：

```
<states>
<state name="AK"> 
        <option value="null" data-stationID="null" data-lat="null" data-lon="null" data-city="Select City">Select City</option>
        <option value="326" data-stationID="9450460" data-lat="55.331799" data-lon="-131.626205" data-city="Ketchikan">Ketchikan</option>
        <option value="327" data-stationID="9451054" data-lat="56.246700" data-lon="-134.647003" data-city="Port Alexander">Port Alexander</option>
</state>
<state name="CT"> 
        <option value="null" data-stationID="null" data-lat="null" data-lon="null" data-city="Select City">Select City</option>
        <option value="35" data-stationID="8461490" data-lat="41.361401" data-lon="-72.089996" data-city="New London">New London</option>
        <option value="36" data-stationID="8465705" data-lat="41.283298" data-lon="-72.908302" data-city="New Haven">New Haven</option>
</state> 
```

我当前的代码：

```
$('#states').change(function() { // bind a trigger to when the states select changes
        var val = $(this).val(); // hold the select's new value
        var city = $('#cities').empty(); // empty the select of cities and hold a reference in 'city'
        $('state', station_data).filter(function() { // get all states...
            return val == $(this).attr('name'); // find the chosen state
        }).find('option').each(function() { //  Search Between/Within "<option..." for data ending in "city" & create a new option, set its text to the city [name], append to the cities select            
            $('<option>').text($(this).data('city')).appendTo(city);

        })
    });

$('#cities').change(function() { // bind a trigger to when the cities select changes
        console.log($(this).val() );// prints selected city

    }); 
```

我的问题是；用户选择城市后如何访问“data-stationID”等数据？充其量，我似乎只能获得所有 stationID 或选项标签内的最后一个 stationID。

这个想法是，在用户选择他们想要信息的城市后，我可以访问存储在选项标签之间的所有其他“数据-*”，这样我就可以查询我的数据库 [或其他 php 页面]

我使用[来自 xml 的动态加载数据的代码到带有 jquery 的下拉框](https://stackoverflow.com/questions/655340/dynamic-load-data-from-xml-to-drop-down-box-with-jquery)来启动它。

谢谢你的帮助！

根据 Ohgodwhy 的要求，这是查询我的数据库的 php 代码。

```
fwrite($fh,  "<?xml version=\"1.0\"?>\n"); 
fwrite($fh,  "<states>\n");
while($row=mysqli_fetch_array($states)) {
    fwrite($fh,  "  <state name=\"${row['state']}\"> \n");
    $queryCities="SELECT * FROM locations WHERE state='${row['state']}'";
    $cities=mysqli_query($dbc,$queryCities);
    fwrite($fh, "           <option value=\"null\" data-stationID=\"null\" data-lat=\"null\" data-lon=\"null\" data-city=\"Select City\">Select City</option>\n");
    while($row=mysqli_fetch_array($cities)) {
        fwrite($fh,  "          <option value=\"${row['id']}\" data-stationID=\"${row['stationID']}\" data-lat=\"${row['latitude']}\" data-lon=\"${row['longitude']}\" data-city=\"".StripStuff($row['city'])."\">".StripStuff($row['city'])."</option>\n");
    }
    fwrite($fh,  "  </state>\n\n");
}
fwrite($fh,  "</states>\n");    
fclose($fh); 
```

澄清一下，我想我不知道 JQuery 如何处理这些信息，所以我不知道如何访问。此外，如果有更好的方法我应该格式化数据，我显然可以重写 php 代码以导出任何格式......

这是我的 XML 导入/加载功能：

```
$.get('test2.xml', function(data) { // get the states.xml file
        station_data = data; // save the data for future use so we don't have to call the file again
        var state = $('#states'); // states select
        $('state', station_data).each(function() { // find states in data & dynamically create a new option element & make its text the value of the "title" attribute in the XML & append it to the states select
            $('<option>').text($(this).attr('name')).appendTo(state);
        });
    }, 'xml'); // specify what format the request will return - XML 
```

使用 JQuery 版本：jquery-1.8.2.min.js

使用 JQuery Mobile 版本：jquery.mobile-1.2.0.min.js

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:54:55.927

我认为这不是明确的方法，但您可以直接从 XML 添加选项标签来选择。试试这个，它应该工作：

**更新：**

```
$('#states').on('change', function() { // bind a trigger to when the states select changes
        var state = $(this).val(); // hold the select's new value
        var city = $('#cities').empty(); // empty the select of cities and hold a reference in 'city'
        $('state', station_data).filter(function() { // get all states...
            return state == $(this).attr('name'); // find the chosen state
        }).find('option').each(function() { //  Search Between/Within "<option..." for data ending in "city" & create a new option, set its text to the city [name], append to the cities select            
            $('<option data-stationID="'+$(this).data('stationID')+'"></option>').text($(this).data('city')).appendTo(city);
        })
    });

$('#cities').on('change', function() { // bind a trigger to when the cities select changes
        console.log($(this).children('option:selected:eq(0)').attr('data-stationID') );// prints selected city's attr
}); 
```

# objective-c - 每当调用空方法时应用程序崩溃

> ID：14297525
> 
> 赞同：0
> 
> 时间：2013-01-12T20:14:10.620
> 
> 标签：objective-c, cocos2d-iphone

所以我在 Xcode 3.2.4 中使用 cocos2d 编写游戏，并创建了一个名为 player 的类。到目前为止，它只有一个什么都不做的功能。

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"

@interface Player : CCSprite {

}

-(void)leftButtonPressed;

@end 

#import "Player.h"

@implementation Player

- (id)init{
    if((self=[super init])){
        self = [CCSprite spriteWithFile:@"playerPlane.png"];
        }
    return self;
}

-(void)leftButtonPressed{
}

@end ` 
```

每当我尝试从任何地方调用 leftButtonPressed 时，整个应用程序都会在控制台中崩溃

`Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[CCSprite leftButtonPressed]: unrecognized selector sent to instance 0x6e4bb50'`

我通过执行将 Player 初始化为另一个类中的实例 `Player * thePlayer = [[Player alloc]init];`

请帮忙！谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T20:39:23.137

这会导致问题：

```
- (id)init{
    if((self=[super init])){
        self = [CCSprite spriteWithFile:@"playerPlane.png"];
        }
    return self;
} 
```

你在做什么？您初始化新创建的（调用`alloc`/`init`创建它的调用者） `Player`对象。该`init`方法甚至可能返回了另一个实例，而不是当前正在执行的实例（一些奇怪的独特可可事物）。当这成功时，您创建一个新`CCSprite`对象并将其分配给`self`. `Self`然后返回给调用者。（如果你不会 ARC——我假设你会这样做——那么这肯定会造成内存泄漏）；

但是调用者希望处理一个`Player`对象，然后将无法响应的`leftButtonPressed`消息发送给它。`CCSprite`

也就是说，错误消息告诉你什么。

您可以改用：

```
- (id)initSpriteWithFile(NSString*)fileName{
    if((self=[super initSpriteWithFile:fileName])){
        // Do any additional setup here. If you don't have any setup then do not overwrit the init method at all. 
        }
    return self;
} 
```

或类似的东西：

```
- (id)init{
    if((self=[super init])){
        [self setFileName:@"playerPlane.png"]; //This method may not exist at all but you may find an appropriate one in the docs. I am not used to CCSprit. I am just trying to explain the concept by example. 
        }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:29:48.317

您正在调用`self = [CCSprite spriteWithFile:@"playerPlane.png"];`，但这会创建一个`CCSprite`实例而不是`Player`实例。

我猜您没有 CCSprite 的来源，或者没有基于非工厂的初始化程序？

在这种情况下，您最好创建一个类扩展而不是子类化。

# c++ - 如何在 Eclipse cdt 中动态链接 sfml 2？

> ID：14297531
> 
> 赞同：0
> 
> 时间：2013-01-12T20:14:40.600
> 
> 标签：c++, eclipse-cdt, sfml

我刚刚安装了 Eclipse CDT 并尝试在其中安装 sfml 2。我似乎在链接库时遇到问题，因为它既不能通过静态链接也不能通过动态链接编译。它只是给了我这些错误：

```
22:08:57 **** Incremental Build of configuration Debug for project sdl ****
Info: Internal Builder is used for build
g++ "-LC:\\Users\\Romeo\\Desktop\\SFML-2.0-rc\\lib" -o sdl.exe "src\\sdl.o" -lsfml-graphics-s-d -lsfml-window-s-d -lsfml-system-s-d 
src\sdl.o: In function `main':
D:\_workspace\_eclipsec++\sdl\Debug/../src/sdl.cpp:5: undefined reference to     `sf::VideoMode::VideoMode(unsigned int, unsigned int, unsigned int)'
D:\_workspace\_eclipsec++\sdl\Debug/../src/sdl.cpp:5: undefined reference to     `sf::RenderWindow::RenderWindow(sf::VideoMode, std::string const&, unsigned int,     sf::ContextSettings const&)'
D:\_workspace\_eclipsec++\sdl\Debug/../src/sdl.cpp:6: undefined reference to     `sf::CircleShape::CircleShape(float, unsigned int)'
D:\_workspace\_eclipsec++\sdl\Debug/../src/sdl.cpp:7: undefined reference to     `sf::Color::Green'
D:\_workspace\_eclipsec++\sdl\Debug/../src/sdl.cpp:7: undefined reference to     `sf::Shape::setFillColor(sf::Color const&)'
D:\_workspace\_eclipsec++\sdl\Debug/../src/sdl.cpp:15: undefined reference to `sf::Window::close()'
D:\_workspace\_eclipsec++\sdl\Debug/../src/sdl.cpp:12: undefined reference to `sf::Window::pollEvent(sf::Event&)'
D:\_workspace\_eclipsec++\sdl\Debug/../src/sdl.cpp:18: undefined reference to     `sf::Color::Color(unsigned char, unsigned char, unsigned char, unsigned char)'
D:\_workspace\_eclipsec++\sdl\Debug/../src/sdl.cpp:18: undefined reference to `sf::RenderTarget::clear(sf::Color const&)'
D:\_workspace\_eclipsec++\sdl\Debug/../src/sdl.cpp:19: undefined reference to `sf::RenderStates::Default'
D:\_workspace\_eclipsec++\sdl\Debug/../src/sdl.cpp:19: undefined reference to `sf::RenderTarget::draw(sf::Drawable const&, sf::RenderStates const&)'
D:\_workspace\_eclipsec++\sdl\Debug/../src/sdl.cpp:20: undefined reference to `sf::Window::display()'
D:\_workspace\_eclipsec++\sdl\Debug/../src/sdl.cpp:9: undefined reference to `sf::Window::isOpen() const'
D:\_workspace\_eclipsec++\sdl\Debug/../src/sdl.cpp:5: undefined reference to `sf::RenderWindow::~RenderWindow()'
D:\_workspace\_eclipsec++\sdl\Debug/../src/sdl.cpp:5: undefined reference to `sf::RenderWindow::~RenderWindow()'
D:\_workspace\_eclipsec++\sdl\Debug/../src/sdl.cpp:5: undefined reference to `sf::RenderWindow::~RenderWindow()'
src\sdl.o: In function `~CircleShape':
C:/Users/Romeo/Desktop/SFML-2.0-rc/include/SFML/Graphics/CircleShape.hpp:41: undefined     reference to `vtable for sf::CircleShape'
C:/Users/Romeo/Desktop/SFML-2.0-rc/include/SFML/Graphics/CircleShape.hpp:41: undefined reference to `vtable for sf::CircleShape'
C:/Users/Romeo/Desktop/SFML-2.0-rc/include/SFML/Graphics/CircleShape.hpp:41: undefined     reference to `sf::Shape::~Shape()'
collect2: ld returned 1 exit status

22:08:59 Build Finished (took 1s.419ms) 
```

我想我做错了什么，但我不知道是什么。一点帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:05:16.620

因为你的 g++ 不同于编译器来构建 sfml。以下任何组合都会导致您的问题：

*   g++ <-> cl(vc++的编译器)
*   g++32 <-> g++64
*   g++ <-> gcc

# javascript - onClick - > Fiddle 在第一次点击时工作，但停止工作 - 谜

> ID：14297542
> 
> 赞同：0
> 
> 时间：2013-01-12T20:15:56.437
> 
> 标签：javascript, onclick, layer, mask

我有这个[jsfiddle](http://jsfiddle.net/sebababi/dFp6f/)，它可以工作一次。

```
function toggle_off(itemID){
  alert(itemID+'->'+document.getElementById(itemID).getAttribute("style"));
  document.getElementById(itemID).style.display = 'none';
}

function maskIt(x){
  alert(x);
  var mask = document.createElement('div');
  mask.id = 'maskIt';
  mask.setAttribute("class", "maskIt");
  mask.onclick = function(){toggle_off('maskIt');}
  mask.innerHTML = 'click to close mask';
  document.body.appendChild(mask);
} 
```

单击它会打开一个蒙版（图层），单击蒙版时会自动关闭它-到这里为止都很好。

在第二次点击时，面具会再次打开，但是当你第二次点击它时它不会关闭。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:22:20.197

而不是隐藏 div 您应该在每次单击时创建一个新 div 时将其删除

```
function toggle_off(itemID){
  alert(itemID+'->'+document.getElementById(itemID).getAttribute("style"));
  var mask = document.getElementById(itemID);
  mask.parentNode.removeChild(mask);
} 
```

[**演示**](http://jsfiddle.net/dFp6f/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T20:31:58.597

当您关闭覆盖时，您不会破坏“maskIt”的第一个实例，因此它们会在后台建立。如果您在第二次单击后检查页面，您将看到两个 maskIt div，第一个隐藏。

当您调用 getElementById('maskIt') 时，它会在文档中找到第一个隐藏的一个，因此不会隐藏第二个。

为什么不重复使用第一个面具？

```
function toggle_off(itemID) {
  alert(itemID + '->' + document.getElementById(itemID).getAttribute("style"));
  document.getElementById(itemID).style.display = 'none';
}

function maskIt(x) {
  alert(x);
  var mask = document.getElementById('maskIt');
  if (mask == null) {
    mask = document.createElement('div');
    mask.id = 'maskIt';
    mask.setAttribute("class", "maskIt");
    mask.onclick = function () {
      toggle_off('maskIt');
    }
    mask.innerHTML = 'click to close mask';
    document.body.appendChild(mask);
  }
  else
  {
    mask.style.display = "block";
  }
} 
```

[http://jsfiddle.net/dFp6f/2/](http://jsfiddle.net/dFp6f/2/)

# sqlite - SQLite：使用自反连接删除规则功能？

> ID：14297548
> 
> 赞同：3
> 
> 时间：2013-01-12T20:16:38.767
> 
> 标签：sqlite

我试图在 SQLite 中使用外键支持来维护具有自反连接的单表数据库的引用完整性。

例如

```
PRAGMA foreign_keys = ON;

create table tree (
  objectId text unique not null,
  parentObjectID text,
  foreign key (parentObjectID) references tree(parentObjectID) on delete cascade
) 
```

我希望的行为是，当父行被删除时，其子行及其子行也将被删除。

但是，当我尝试删除根行时（预期的行为是数据库中的所有其他行也被删除），我收到此错误：

```
sqlite> delete from tree where objectid = '0';
Error: foreign key mismatch 
```

SQLite外键支持（和删除行为）可以提供我的期望吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:50:57.600

您的问题很简单，您的 FK`parentObjectId`引用`parentObjectId`而不是`objectId`SQLite 在您尝试使用该表之前不会检测到这一点混乱。如果您的 FK 定义如下：

```
foreign key (parentObjectID) references tree(objectID) on delete cascade 
```

来自[精美手册](http://www.sqlite.org/foreignkeys.html#fk_indexes)：

> 因此，换句话说，需要同时查看子项和父项的错误配置的外键约束是 DML 错误。外键 DML 错误的英文错误消息通常是“外键不匹配”，但如果父表不存在，也可能是“没有这样的表”。如果出现以下情况，可能会报告外键 DML 错误：
> 
> *   父表不存在，或
> *   外键约束中命名的父键列不存在，或者
> *   外键约束中命名的父键列不是父表的主键，并且不受使用 CREATE TABLE 中指定的整理顺序的唯一约束，或
> *   子表引用了父表的主键，没有指定主键列，并且父表中的主键列数与子键列数不匹配。

第三点似乎适用于此，因为`parentObjectId`它既不是 PK 也不是被限制为唯一的，所以这就是为什么在您尝试修改表的内容（即使用 DML 语句而不是 DDL 语句）之前不会看到错误的原因。

# javascript - 单击按钮时如何启用/禁用 div 标签和其中的所有元素？仅限 JavaScript

> ID：14297549
> 
> 赞同：1
> 
> 时间：2013-01-12T20:16:44.363
> 
> 标签：javascript

```
function toggleDisabled(el) {
    try {
        el.disabled = el.disabled ? false : true;
    }
    catch(E){
    }
    if (el.childNodes && el.childNodes.length > 0) {
        for (var x = 0; x < el.childNodes.length; x++) {
            el.style.opacity=0.5;
            toggleDisabled(el.childNodes[x]);
        }
    }
} 
```

我已经能够禁用按钮 onclick，但我无法让另一个按钮重新启用它。还有一件事，它不是启用/禁用的按钮，而是 div 及其元素.

这是链接：http: [//jsfiddle.net/XBppR/20/](http://jsfiddle.net/XBppR/20/)

尝试单击文本，然后调用，它都会被禁用，我的问题是我不希望它们都被禁用或都被启用......

# php - Wordpress javascript文件调用返回奇怪的路径

> ID：14297550
> 
> 赞同：0
> 
> 时间：2013-01-12T20:16:52.640
> 
> 标签：php, javascript, jquery, html, wordpress

我正在尝试使用推荐的方法将 jQuery 和我的自定义脚本文件包含在 Wordpress Child 主题中`wp_enqueue_script`

```
<?php

function wptuts_scripts_with_jquery()  
{  
    // Register the script like this for a plugin:  
    wp_register_script( 'customScripts', plugins_url( '/js/customScripts.js', __FILE__ ), array( 'jquery' ) );  
    // or  
    // Register the script like this for a theme:  
    wp_register_script( 'customScripts', get_template_directory_uri() . '/js/customScripts.js', array( 'jquery' ) );  
    // For either a plugin or a theme, you can then enqueue the script:  
    wp_enqueue_script( 'customScripts' );  
}  
add_action( 'wp_enqueue_scripts', 'wptuts_scripts_with_jquery' ); 

?> 
```

包括 jQuery 在内都可以正常工作，但它会为我的自定义脚本吐出这条路径。

```
http://localhost:15869/wp-content/plugins/C:/Users/Kyle/Documents/MyWebSites/TomWictor.com/wp-content/themes/twentywelve-child/js/customScripts.js?ver=3.5 
```

这显然是错误的。我认为这与在本地主机上开发（使用 Microsoft WebMatrix 2）没有任何关系，但更多地与 Wordpress 破译路径的方式有关？我不确定..

我怎样才能让它吐出正确的路径？

```
twentywelve-child/js/customScripts.js 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T00:17:01.687

试试这个`plugins_url( 'js/customScripts.js', __FILE__ )`而不是`plugins_url( '/js/customScripts.js', __FILE__ )`（删除你的第一个斜杠）

看：[http ://codex.wordpress.org/Function_Reference/plugins_url](http://codex.wordpress.org/Function_Reference/plugins_url)

# javascript - 如何为 AngularJS 生成的选择列表进行预选？

> ID：14297560
> 
> 赞同：30
> 
> 时间：2013-01-12T20:17:59.780
> 
> 标签：javascript, angularjs

```
<select ng-model="team.captain" ng-options="player.name for player in team.players"></select> 
```

这正确地创建了一个选择列表来选择队长。但是，默认情况下会选择一个空白选项。我们怎样才能从列表中预先选择第一个玩家呢？

```
<select ng-model="team.captain" ng-options="player.name for player in team.players" class="ng-pristine ng-valid">
  <option value="0">John</option>
  <option value="1">Bobby</option>
</select> 
```

我尝试添加`ng-init="team.captain='0'"`，但没有帮助。

**更新**显然这是因为

> ng-model 引用的值在传递给 ng-options 的一组选项中不存在。

资料来源：[为什么 AngularJS 在选择中包含一个空选项？](https://stackoverflow.com/questions/12654631/why-does-angularjs-include-an-empty-option-in-select?rq=1)

但是，问题仍然存在，为什么使用 ng-init 不起作用？

```
<select ng-init="team.captain='0'" ng-model="team.captain" ng-options="player.name for player in team.players"></select> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-12T21:02:00.503

这是有效的：

```
<select ng-init="team.captain=team.players[0]" 
        ng-model="team.captain" 
        ng-options="player.name for player in team.players"></select> 
```

什么不起作用：

```
ng-init="team.captain='0'"
ng-init="team.captain='John'" 
```

我的猜测是 Angular 超越了值或标签的简单比较。它可能会比较对象引用。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-01-17T00:12:14.673

这是使用 AngularJS 初始化下拉菜单的另一种方法。

（关于 JS Fiddle 的工作示例：http: [//jsfiddle.net/galeroy/100ho18L/1/](http://jsfiddle.net/galeroy/100ho18L/1/)）

```
<head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>
</head>

<body ng-app="" ng-controller="myController">

    <select 
        ng-model="carSelection"
        ng-options = "x.make for x in cars">
    </select>

    <script>

        function myController($scope) {

            $scope.cars = [
                {"make": "Nissan", "model": "Sentra"},
                {"make": "Honda", "model": "Prelude"},
                {"make": "Toyota", "model": "Prius"}
            ]

            $scope.carSelection = $scope.cars[1]; // this line initializes the drop down menu
        }

    </script>

</body> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-12T20:52:20.363

正如@camus 在评论中已经提到的，您需要将模型设置为有效的“标签”值（或参考），而不是索引值。这有点奇怪，因为您可以看到 HTML 中使用的索引值。

Angular 在 HTML 中设置 value 属性如下：

*   当使用数组作为数据源时，它将是每次迭代中数组元素的索引；
*   当使用对象作为数据源时，它将是每次迭代中的属性名称。

当一个项目被选中时，Angular 根据索引或属性名称在数组/对象中查找正确的条目。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-03-12T11:41:44.663

[ng-selected](https://docs.angularjs.org/api/ng/directive/ngSelected)怎么样，正如在 [这个 jsfiddle](https://jsfiddle.net/61r6x5tL/4/)中看到的那样：

```
<select ng-model="val">
  <option ng-repeat="opt in options" ng-selected="$first">
    {{ opt }}
  </option>
</select> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-05T07:29:19.657

我使用**ng-model**和**ng-options**实现了这一点。基本上你的模型和 ng-options 应该是同步的。

当我的模型（在本例中为 projIndustry）初始化为某个数字时，我不得不在 ng-options 中使用**ind.ID。**（ID 比较）。
当我的模型初始化为 object 时，我不得不在 ng-options 中使用**ind (object)。(Object comparison)**

```
<select data-ng-options="ind.ID as ind.Display_Text for ind in arrIndustries" 
 data-ng-model="projIndustry" ng-change="onIndChange()" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-11T06:41:14.387

如果您使用的是 angular 2+，这就是有效的方法。`

```
<mat-select matNativeControl placeholder="Select Item" [(ngModel)]="selectedItem" name="selectedCaseStudyName" (selectionChange)="onSelectionChangeHandler($event)" [ngStyle]="{'background-color':'silver'}">

        <mat-option *ngFor="let item of myItemList" [value]="item.ItemName">
            {{item.ItemName}}
        </mat-option>
    </mat-select>` 
```

在 .ts 中，

```
'selectedItem = myItemList[2].ItemName' 
```

myItemList 是对象列表，其中一个字段是 ItemName。重要的一点是将 [(ngModel)] 绑定到变量 selectedItem，然后使用所需的列表索引对其进行初始化。每当您绑定`[(ngModule)]`时，请确保您导入`NgModule`

```
import {ngModule} from '@angular/core'; 
```

# c++ - C++：有趣的字符串比较崩溃

> ID：14297567
> 
> 赞同：0
> 
> 时间：2013-01-12T20:18:31.723
> 
> 标签：c++, strcmp, strncmp

我试图在 C++ 程序中采用一个简单的命令行参数来触发不同的程序行为——当你包含一个“y”（或任何以 y 开头的字符串——我不在乎）时，程序会显示一些中间结果.
当我和

> ccal pix.txt

一切正常。

当我使用

> ccal pix.txt 是的

它运行正常，显示我的像素并在最后崩溃。

还，

> ccal pix.txt 没有

在不显示 pix 的情况下运行一切正常（就像它应该的那样），最后仍然崩溃。

这是相关代码-我做错了什么？

```
void dumpFloatMatrix(Mat m){
for(int i = 0; i < m.cols; i++){
    for(int j = 0; j < m.rows; j++){
        char *buff = new char[10];
        sprintf(buff, "%5.1f ", m.at<float>(i,j));
        cout << buff;
        delete buff;
    }
    cout << endl;
}
 }
int main(int argc, char *argv[]){
char* outFile;
bool showPix = false;

// Take in command line args
switch(argc){
case 3:
    if(strncmp(argv[2], "y", 1) == 0)
        showPix = true;
    outFile = argv[1];
    break;
case 2:
    outFile = argv[1];
    break;
default:
    cout << "Usage: ccal INPUT_LIST_FILE" << endl;
    return -1;
}
Mat cameraMatrix(3, 3, CV_32FC1);
dumpFloatMatrix(cameraMatrix);
return 0;
} 
```

奇怪的是，即使我将案例 3 中的测试切换为以下内容：

```
 if(argv[2][0] == 'y') 
```

我仍然得到相同的行为。我无法为我的生活找出原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:00:16.080

固定大小的缓冲区对我来说是一个警告信号。

作为故障排除步骤，更改

```
sprintf(buff, "%5.1f ", m.at<float>(i,j)); 
```

到

```
int const used = sprintf(buff, "%5.1f ", m.at<float>(i,j));
assert(used < 10); 
```

除此之外，使用动态分配显然很荒谬。如果固定大小的缓冲区就足够了，只需使用本地自动数组变量即可。当您使用它时，堆栈空间很便宜，因此通过使缓冲区足够大来防止溢出。

```
void dumpFloatMatrix( Mat m )
{
    char buff[400];
    for(int i = 0; i < m.cols; i++){
        for(int j = 0; j < m.rows; j++){
            int const used = sprintf(buff, "%5.1f ", m.at<float>(i,j));
            assert(used * sizeof *buff < sizeof buff);
            cout << buff;
        }
        cout << endl;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T21:01:45.127

对不起，但这纯粹是疯狂：

```
for(int j = 0; j < m.rows; j++){
    char *buff = new char[10];
    sprintf(buff, "%5.1f ", m.at<float>(i,j));
    cout << buff;
    delete buff;
} 
```

为 10 字节数组调用 new/delete 将花费 16-32 字节的内存加上您想要的 10 字节 [可能四舍五入为 16、32 或 64 字节]。并分别调用 new 和 delete 。是的，我肯定`cout << buff`会花费更多的周期，但这些在某种程度上是必要的。

要么使用：

```
for(int j = 0; j < m.rows; j++){
    char buff[10];
    sprintf(buff, "%5.1f ", m.at<float>(i,j));
    cout << buff;
} 
```

或使用 C++ 样式格式：

```
for(int j = 0; j < m.rows; j++){
    cout << precision(1) << setw(5) << m.at<float>(i,j);
} 
```

如果数组非常大，您可能更愿意将这些移出循环：

```
cout.precision(1); 
cout.setw(5); 
```

我更喜欢最后一种方法——因为如果你的计算结果为 1210121281.9，它不会溢出[你的布局看起来有点滑稽]。

# asp.net - asp:label 和 HTML 标签有什么区别？

> ID：14297572
> 
> 赞同：3
> 
> 时间：2013-01-12T20:19:32.947
> 
> 标签：asp.net, html, label, webforms

`asp:label`和 html有什么区别`label`？

我知道第一个是在服务器上呈现的，所以基本上它返回一个跨度选项卡，但它有什么用？在哪些情况下需要使用 HTML 标签，在哪些情况下需要使用`asp:label`? 我知道如果我把它作为一个 ASP 控件，我可以通过编程方式访问它，但是纯粹在设计 UI 方面两者之间有什么区别？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T01:02:21.933

如果 asp:Label 将其“AssociatedControlID”属性值设置为页面上表单控件的 ID，那么它实际上将呈现为 HTML 标签控件（“for”值设置为同一控件的客户端 ID）当呈现给客户端时。

HTML 标签控件严格设计**为**为表单控件（即输入、选择或文本区域）提供标签/标题，向用户描述表单控件的目的（参见[https://developer.mozilla.org/en -US/docs/HTML/Element/label](https://developer.mozilla.org/en-US/docs/HTML/Element/label) )。标签通常（强烈）使用“for”属性与特定输入相关联，该属性应该是输入的 ID。这对于那些无法仅根据文本和控件的接近程度来解释关系的具有可访问性需求的人特别有用。想象一个包含多个文本框但无法知道每个文本框需要哪些输入的表单。HTML 标签控件不用于此上下文之外的一般文本。

如果 asp:Label 的“AssociatedControlID”属性没有值，则控件将简单地呈现为包含文本的跨度控件。一些开发人员喜欢使用 asp:Labels 将文本输出到页面上，从而使控件具有双重用途（与 HTML 对应物不同）。我个人更喜欢为此目的使用 asp:Literals，因为它让我可以更好地控制包含的标记。

选择 asp:Label 而不是原生 HTML 标签控件的原因是您可以使用服务器端代码轻松地与它进行交互，例如更改文本或 CssClasses 以响应服务器事件，并且您可以输入服务器 ID 作为“AssociatedControlID”值将在客户端的“for”值中自动呈现为客户端 ID（例如，显示为“ct100_MainContent_TextBox1”而不是“TextBox1”）。

# jquery - 打开弹出窗口的直接 URL？

> ID：14297573
> 
> 赞同：-2
> 
> 时间：2013-01-12T20:19:46.610
> 
> 标签：jquery, html

我有一个包含 jQuery 播放器的页面。

在地址栏中输入页面 url 后，如何使页面显示在具有设置尺寸的弹出窗口中？

[例子](http://www.di.fm/play/trance)

*   警告：示例中播放音乐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:22:31.147

这个 javascript 示例应该可以在您想要打开的链接中使用。

```
<a href="http://www.learningmovabletype.com/about2.php" onclick="window.open('http://www.learningmovabletype.com/about2.php','popup','width=600,height=700,scrollbars=yes,resizable=yes,toolbar=no,directories=no,location=no,menubar=no,status=no,left=50,top=0'); return false">About</a> 
```

示例取自[这里](http://www.learningmovabletype.com/a/000326popup_window/)。

如果您希望您的弹出窗口从直接访问特定链接自动打开；您可以尝试在加载 html 正文后立即使用 onLoad 运行 java 函数。例如：

```
<html>
<head>
<script type="text/javascript">
function my_function(){
window.open('http://www.example.com/about2.php','popup','width=600,height=700,scrollbars=yes,resizable=yes,toolbar=no,directories=no,location=no,menubar=no,status=no,left=50,top=0');
}
<script>
<body onLoad='my_function()'>
</body>
</html> 
```

如果您想为每个加载的页面创建一个唯一的弹出窗口，您需要在链接中包含一个参数 例如：mylink.php?popid=123 然后使用 $_GET 获取该值...

```
<?php
$popid = $_GET['popid'];
?> 
```

然后在你的 java-script 函数中，你可以调用一个特定的链接。

```
 <script type="text/javascript">
    function my_function(){
 var link = <?php echo $popid; ?>;
window.open('http://www.example.com/player.php?popid=<?php echo $popid; ?> ','popup','width=600,height=700,scrollbars=yes,resizable=yes,toolbar=no,directories=no,location=no,menubar=no,status=no,left=50,top=0');
    }
    <script> 
```

# meteor - 我可以保留 Meteor 热代码推送中输入的文件吗？

> ID：14297574
> 
> 赞同：2
> 
> 时间：2013-01-12T20:19:46.457
> 
> 标签：meteor

背景：我正在处理文件上传`Meteor.js`，当我执行热代码推送时，客户端会刷新他们的页面，但如果他们在文件上传期间会停止。

我的问题是：**“Meteor`hot code push`是对应用程序的全面更新吗？”**

*   如果是这样，那么我很不走运，因为`file`输入无法在会话/cookie中存活。但：
*   如果没有，那么我怎样才能收到热码推送`event`？*（有`Meteor.addListener`这个吗？）*

*（不，我没有任何代码，因为这是一个普遍`Meteor.js`问题）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:41:23.597

热代码推送的工作方式是序列化您的应用程序状态并刷新页面，然后恢复状态。不幸的是，文件上传有点复杂。我想您实际上并没有将文件上传进度存储在您的应用程序状态中，这意味着如果页面刷新，它不会自行重新启动并继续。

要解决此问题，您可以先将上传文件本地存储在数据库中，然后从那里上传。跟踪上传了多少，然后当应用刷新时，告诉应用从上次中断的地方继续。

显然，这是一个不平凡的问题。就我个人而言，我可能会认为这是一个边缘案例，并要求用户重新上传文件，而不是把所有需要的时间都投入到设计解决方案中。除非您的应用用例完全由上传文件组成，否则您将面临挑战:-)

# ios - 在 iOS 中将音频文件的播放速度降低 600%-900%（不影响音高）

> ID：14297576
> 
> 赞同：3
> 
> 时间：2013-01-12T20:19:58.127
> 
> 标签：ios, objective-c, audio, avaudioplayer, playback

听起来应该是[**这样**](http://www.youtube.com/watch?v=bidHnEekXpE)的。

我试过了：

```
NSURL* url = [[NSBundle mainBundle] URLForResource:@"Justin Bieber - U Smile" withExtension:@"mp3"];

    self.player = [[AVAudioPlayer alloc] initWithContentsOfURL:
                             url error:nil];
    self.player.volume = 1.0f;
    self.player.enableRate=YES;
    [self.player prepareToPlay];
    [self.player setNumberOfLoops:0];
    self.player.rate=0.16f;

    [self.player play]; 
```

但这听起来很糟糕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:40:29.467

你问的不是一项简单的任务，原因是音高与音频播放的速度有着内在的联系。例如，一个 100 Hz 的 10 秒正弦波，当减慢两倍时，将变成一个 20 秒 50 Hz 的波（Hz 与波速和您听到的音高有关）。为了在不影响音高的情况下将这个正弦波减慢两倍，一些算法必须计算出你插入的 10 秒音频中缺少什么声音，生成这个音频并将它与那里的声音相结合。这并不容易，事实上真的很难。

使用一些复杂的算法，好的音频编辑程序（例如 Logic Pro）可以做得相当好。然而，任何超过几倍的因素都会产生非常可怕的结果，原因是很难生成以前不存在的音频，并使其听起来不错。

* * *

## 但是，这就是我将如何去做

（以及我认为上面的链接听起来不错）：

首先，从非常高质量的音频开始。避开 128 kpbs mp3，他们只是不会削减它。发出的声音信息越多，算法就越容易创造出听起来不错的东西。

接下来，研究将在 600 - 900% 的因素下运行良好的算法。看看这个：[http](http://hypermammut.sourceforge.net/paulstretch/) ://hypermammut.sourceforge.net/paulstretch/ - 它是开源的，所以你应该能够从中学到很多东西。此外，该算法特别适用于大规模因子。答对了！

我想说某种效果（或几个）已应用于 youtube 视频的最终结果。我在上面链接的网站提到“光谱平滑”已应用于音频。此外，诸如混响之类的东西可能会给结果带来更好或更有趣的质感——一些可以玩的东西。

* * *

这不是一项小任务，尤其是要做好。不过应该很有趣/有趣-祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:22:39.450

在维基百科中，有一篇文章在某种程度上描述了您需要做的事情：[链接](http://en.wikipedia.org/wiki/Audio_timescale-pitch_modification)。您需要时间缩放并相应地调整音高以补偿缩放效果。听起来不简单，也许你可以尝试在一个已经存在的开源过滤器项目中找到源代码。

# spring - 获取 Spring Security 中的所有登录用户

> ID：14297577
> 
> 赞同：5
> 
> 时间：2013-01-12T20:19:59.673
> 
> 标签：spring, session, spring-security

我想获取当前登录我的应用程序的所有用户的列表。我知道，我应该注入`SessionRegistry`我的代码来调用`getAllPrincipals()`方法。不幸的是，我总是得到空列表。似乎`SessionRegistry`没有填充，我不知道如何制作。我知道，在 StackOverflow 上有类似的问题，但我仍然无法解决我的问题。首先，我将这段代码添加到我的 web.xml 中：

```
<listener>
    <listener-class>
        org.springframework.security.web.session.HttpSessionEventPublisher
    </listener-class>
</listener> 
```

据我所知，它允许获取有关会话生命周期（创建、销毁）的信息。就这样。我在前进方面遇到了很大的问题。我的带有安全 bean 的文件如下所示：

```
<beans:bean id="successAuth" class="pl.fp.microblog.auth.SuccessAuth"/>
<beans:bean id="failureAuth" class="pl.fp.microblog.auth.FailureAuth"/>

<http auto-config="true">
    <intercept-url pattern="/" access="ROLE_USER" />
    <intercept-url pattern="/profile/*" access="ROLE_USER" />
    <form-login 
        login-page="/login"         
        authentication-success-handler-ref="successAuth"
        authentication-failure-handler-ref="failureAuth"
        username-parameter="username"
        password-parameter="password"           
        login-processing-url="/login_processing_url"
    />          
    <security:logout logout-url="/logout_processing_url"/>  
    <session-management>
        <concurrency-control max-sessions="1" session-registry-alias="sessionRegistry"/>
    </session-management>
</http>

<beans:bean id="saltProvider" class="org.springframework.security.authentication.dao.ReflectionSaltSource">
    <beans:property name="userPropertyToUse" value="username"></beans:property>
</beans:bean>

<beans:bean id="userService" class="pl.fp.microblog.auth.UserService">
    <beans:property name="userDAO" ref="userDAO"/>
</beans:bean>

<authentication-manager>
    <security:authentication-provider user-service-ref="userService">
        <password-encoder hash="sha-256">
            <security:salt-source ref="saltProvider"/>
        </password-encoder>         
    </security:authentication-provider>
</authentication-manager> 
```

这里我调用 getAllPrinciples() 方法：

```
@Transactional
@Controller
public class SiteController {
    @Autowired
    private UserDAO userDAO;
    @Autowired
    private SessionRegistry sessionRegistry;    

    @RequestMapping(value = "profile/{login}")  
    public String profilePage(@PathVariable String login, HttpServletRequest req) throws SQLException {     
        ...
        sessionRegistry.getAllPrincipals().size()
        ...     
        return "profile";               
    }
} 
```

我试图将`session-managemenent`代码添加到我的`http`,`ConcurrentSessionFilter`和类似的东西中，但实际上我不明白。而且文档对我来说太复杂了。有谁可以帮助我并逐步告诉我下一步该做什么？我应该添加哪些豆子？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T21:59:56.027

我想你快到了。您可能错过的唯一一件事是使用`session-registry-alias`. 通过在元素上使用该属性，`concurrency-control`您可以公开会话注册表，以便可以将其注入您自己的 bean。请参阅[参考文档](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/appendix-namespace.html#nsa-concurrency-control)。

所以你需要的是：

```
<http auto-config="true">
...
    <session-management>
        <concurrency-control max-sessions="1" session-registry-alias="sessionRegistry"/>
    </session-management>
</http> 
```

现在您有了对会话注册表的引用，该注册表将由`ConcurrentSessionControlStrategy`上述配置隐式设置的 填充。要使用它，你只需像往常一样将它注入到你的 bean 中：

```
<bean class="YourOwnSessionRegistryAwareBean">
    <property sessionRegistry="sessionRegistry"/>
</bean> 
```

请注意，上述配置还将限制用户可能拥有的并发会话数。如果您不想要这个限制，您将不得不放弃命名空间配置的便利性，因为命名空间架构不允许您将`max-sessions`属性设置为 -1。如果您需要有关如何手动连接必要 bean 的帮助，参考文档会提供[详细说明](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/session-mgmt.html#concurrent-sessions)。

# ms-word - ms-word 模板命名样式转换

> ID：14297578
> 
> 赞同：3
> 
> 时间：2013-01-12T20:20:04.697
> 
> 标签：ms-word

在 MS Word 2010 中，当我将 dotx 模板应用于 docx 文件并且两个文档中存在不同的样式时，如何将前者的样式列表映射到后者的不同命名样式列表？

让我澄清一下这个问题。我有一个 dotx 样式文件，其中包含一些标准样式（例如标题 1、标题等）和一些其他样式（例如 blockquote、superfigure 等）。我必须使用此模板，并且不能在其中更改或添加任何名称。

我有一个输出 docx 文件的文档准备系统（例如 pandoc、orgmode）。当我比较这个 docx 中使用的一些样式时，我发现它们的名称与之前的 dotx 不同，但“含义”是相同的。例如，dotx 的“blockquote”应该应用于 docx 中标记为“quotedtext”的部分。

那么，我如何告诉 MS Word 2010 将 dotx 样式应用于我的 docx 映射“blockquote”到“quotedtext”？任何使用不同技术的替代解决方案，如 xls 转换或类似的东西？

任何提示将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T00:26:15.917

在主页选项卡中，单击样式组的*小部件*（角落中的小箭头）以显示样式窗格。单击底部的管理样式图标，然后单击左下角的导入/导出按钮。

![在此处输入图像描述](../Images/5907e8d48f06d3c9d525fd2f5943cb2d.png)

在此对话框中，您可以跨文档或模板复制样式、重命名和删除它们。如果其他文档或模板未打开，请单击关闭文件（右键）然后打开文件（按钮文本更改为此）。

不幸的是，您不能只将一种风格转换为另一种风格（至少，不是从这里开始；见下文）。但是，我相信复制、重命名和删除的过程可以达到相同的效果。

或者，为“替换”对话框按 Ctrl-H，然后按“更多>>”按钮。将光标放在“查找内容”框中，然后将左下角的格式和样式... 选择要替换的样式。在“替换为”框中执行相同操作。但是，您要替换的样式需要在当前文档中可用。使用上述顺序首先将您需要的样式引入当前文档。从其他文档或模板中引入所有样式的快速方法是将此文档/模板中的内容复制到当前文档的底部，稍后将其删除。

也可以使用样式对话框（如上所述）修改样式，更改**样式基于**属性。但是，我不会推荐这种方法。您需要非常彻底并充分意识到*级联*的后果；也就是说，每个修改如何影响文档中的其他样式。

如果您需要对大量样式进行此过程，请使用宏记录器。然后，您需要修改生成的代码，将其放入循环中。

# asp.net - 在 .ashx 处理程序中缓存对象

> ID：14297580
> 
> 赞同：0
> 
> 时间：2013-01-12T20:20:21.740
> 
> 标签：asp.net, caching, ashx

我不确定解决这个问题的最佳方法，但这是我的方案。

假设我有一个 ashx 处理程序，它将一些数据馈送到来自客户端的 ajax 请求。像这样简单的东西：

```
public class Handler : IHttpHandler
{
    private List<MyObject> data;

    public bool IsReusable
    {
        get { return true; }
    }

    public void ProcessRequest(HttpContext context)
    {
        data = GetData();
        string result;

        switch (context.Request.QueryString["requestType"])
        {
            case "case":
                result = Foo.Bar(data).GetJSON();
                break;

            // .. several more data conversitions / comparisions 
        }

        context.Response.Write(result);
    }

    public class MyObject
    {
        public int Id { get; set; }
        public string Data { get; set; }
    }
} 
```

我将如何缓存 MyObject 的列表，以便每次向服务发出请求时都不会重新构建它？假设 MyObject 的列表有数千个结果，我想将其缓存约 1 分钟。我可以使用 context.Cache 吗？

基本上; 我不想缓存处理程序的输出。只是一个包含数据的对象。

**编辑：** 我正在寻找类似的东西：

```
data = (List<MyObject>) context.Cache["data"];

if (data == null || !data.Any())
{
    data = GetData();
    context.Cache.Insert("data", data, null, DateTime.Now.AddMinutes(1), System.Web.Caching.Cache.NoSlidingExpiration);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:28:07.227

您可以添加`result`到 HttpContext.Current.Cache，如下所示：

```
var requestType = context.Request.QueryString["requestType"];
HttpContext.Current.Cache[requestType] = result; 
```

# javascript - Win32 程序员的 jQuery 资源

> ID：14297582
> 
> 赞同：0
> 
> 时间：2013-01-12T20:20:33.477
> 
> 标签：javascript, jquery

我一般都懂编程，但一直在做 Delphi、VB 6 或 C#.net！现在我必须做 web-dev 并且必须快速完成！我还没有用 JavaScript 编写一个 hello world 并且必须学习 jQuery，因为我必须在我的 web 应用程序中显示一些图表，看起来我必须知道 JavaScript 和 jQuery 才能做到这一点。

因此，我正在寻找一个 jQuery 资源，它在课程中或者可能在第一章中也可以让我们快速了解最基本的 JavaScript 知识。一些书或资源，我希望可以在一天内坐下来阅读，比如 12 小时，然后学习足够的知识来使用它并将那些该死的图表和图形嵌入到我的网络应用程序中。

你有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:17:50.683

Javascript 作为一种语言的基础知识实际上相当简单，特别是如果你有其他几种语言的背景。你会发现它对花括号和其他你会从别处认出的语法立即熟悉。

如果您使用过 C#，那么您可能已经接触过 lambda 函数或闭包。这些在 Javascript 中非常重要，它们是驱动大多数网站的事件驱动代码的关键，特别是如果您使用像 jQuery 这样的库，它们几乎用于所有内容。如果您要制作 jQuery 的头部或尾部，您需要对这些函数的工作方式有一个强有力的掌握。

要注意的另一件事是，Javascript 的对象处理与您习惯使用的其他语言有点不同。有一些相似之处，但是如果你尝试以你习惯的方式编写你的类和对象，你会得到一些意想不到的结果。有关这方面的更多信息，请参阅[JavaScript 是什么类型的语言。](https://stackoverflow.com/questions/4120711/what-type-of-language-is-javascript)

除此之外，我认为您的语法不会有问题。

另一件需要担心的是DOM——即通过Javascript 访问的浏览器API。DOM 在技术上不是 Javascript 语言的一部分，但它与它有着千丝万缕的联系，并且与语言本身一样是学习挑战的一部分。jQuery 从您那里抽象出相当多的 DOM，但了解它仍然会有所帮助。

希望这有助于您入门。

# regex - 使用正则表达式从日志文件中提取信息

> ID：14297586
> 
> 赞同：2
> 
> 时间：2013-01-12T20:20:59.870
> 
> 标签：regex

解决以下问题：[http](http://regexone.com/example/6) ://regexone.com/example/6 ？

我发现自己无法使用正则表达式捕获第一个括号。到目前为止，这是我的正则表达式：`at (\w+).(\w+)\.(\w+)`

这是我的正则表达式应该处理的示例行：`at widget.List.makeView(ListView.java:1727)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T21:38:04.617

要捕获一些括号之间的所有内容，请包含括号：

`(\(.*?\))`. 例如，这会将“(ListView.java:1727)”放在捕获组 1 中，您可以根据正则表达式的风格将其引用为`\1`.

因此，`(\(.*?\))`最终将得到可通过 \1 访问的 '(ListView.java:1727)'。

如果您想在括号内匹配，但不将括号本身捕获为捕获的一部分，您可以这样做 `\((.*?)\)`：现在 \1 将是 'ListView.java:1727'。

如果你想在括号内得到个别的东西，你可以做类似`\((.*?):(.*?)\)`. 这将使\1 成为'ListView.java' 而\2 成为'1727'。

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:29:26.350

如果我只是给你一个有效的正则表达式，不确定你是否真的会学到任何东西，但是你去：

```
at [^\.]+\.[^\.]+\.([^\.]+)\((.+):(\d+)\) 
```

或者更简单一点：

```
at \w+\.\w+\.(\w+)\((\w+\.\w+):(\d+)\) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T12:08:33.390

我会让它更通用一点，即

```
/at ([\w.]+)\(([^:]+):(\d+)) 
```

内存捕获是：

1.  班上
2.  文件名
3.  行号

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-08T10:04:31.307

我用了

```
.*\..*\.(\w+)\((\w+\.\w+):(\d+)\) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-24T10:28:20.013

我参加聚会有点晚了，但是使用这种模式可以让您单击继续：

```
([\w]+).([\w]+\.[\w]+):([\d]+)

(        //First group
[\w]     //Match a single character
+        //Between 1 and x times
)        //End of first group
.        //any character (\W works too, \( unfortunately not)
(        //2nd Capturing group ([\w]+\.[\w]+)
[\w]     //Match a single character
+        //Between 1 and x times
\.       //The literal . char
[\w]     //Match a single character
+        //Between 1 and x times
)        //end of 2nd group
:        // Match colon char
(        //Start of 3rd group
[\d]     //Match any digits
+        // one or more times
)        //End of third group 
```

可能有更清洁的选择，但这是 regexone.com 接受的一种方式

# spring - 通过环境更改配置源的 Spring 方法

> ID：14297591
> 
> 赞同：2
> 
> 时间：2013-01-12T20:21:18.067
> 
> 标签：spring

我是 Spring 新手，并试图找出处理以下情况的最佳方法：

我们有一个应用程序，用于本地开发和测试，所有配置值都从属性文件中提取。当应用程序部署到应用程序服务器（本例中为 Websphere）上时，我们使用 JNDI 资源属性而不是属性文件。

在 Spring 中是否有一种可接受的方式来处理这个问题？对于非 Spring 应用程序，我可能会使用一个好的 ol' 工厂模式来决定配置源。对于 Spring，我已经看到每个环境使用不同上下文 XML 文件的示例（听起来很乱），或者使用 Spring“配置文件”。

这种情况是否有普遍接受的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:30:03.070

**Spring 配置文件**相当新，它们的添加正是为了解决您的问题。此外，他们应该弃用所有其他解决方法，例如您提到的不同上下文 XML 文件。

为了完整起见，这里是一个例子：

```
<beans profile="test">
  <context:property-placeholder location="/foo/bar/buzz.properties" />
</beans>
<beans profile="prd">
  <jee:jndi-lookup id="properties" jndi-name="foo/bar/name"/>
</beans> 
```

根据您在部署/启动期间选择的配置文件，只会实例化上述 bean 之一。

* * *

我从未尝试过但似乎适合您的情况的另一种方法是命名空间中的`default-value`属性`jee`：

```
<jee:jndi-lookup id="properties" jndi-name="foo/bar/name" resource-ref="true"
        default-value="classpath:foo.properties"/> 
```

不确定这是否会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T19:18:52.487

假设 Spring 3.1，尝试使用 Tomasz 建议的配置文件，但不要为生产设置单独的 JNDI 值，而是使用

```
<beans profile="prd">
  <context:property-placeholder/>
</beans> 
```

在 Spring 3.1 中，ContextLoaderListener 显然默认将 JNDI 道具作为 PropertySource 拉入，因此使用 property-placeholder，当您需要访问一个值时，您可以在 applicationContext.xml 或 @Value 注释中使用 ${some/jndi/name} .

要确保 webapp 从 JNDI 获取值，请添加

```
<context-param>
   <param-name>spring.profiles.default</param-name>
   <param-value>prd</param-value>
</context-param> 
```

到 web.xml。

在您的测试中，将系统属性“spring.profiles.active”设置为“test”，您将从 props 文件中获取值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T20:31:28.413

一种方法是您也将 jndi 用于本地开发和测试。您可以定义相同的 jndi 名称。我不知道你的测试服务器是什么，实际上我们使用 jetty 和 maven-jetty 插件进行测试。它是轻量级的，可以从您的 ide 运行。

另一种方式就像您在问题中所说的那样。使用 Spring 配置文件。然后你可以用相同的 id/name 声明不同的 transactionManager bean。当然，它们应该在不同的配置文件中。在运行时，您可以决定应该激活哪个配置文件，即应该使用哪个 bean。

# c# - 如何从 LoopingSelector Windows Phone 中获取所选项目

> ID：14297592
> 
> 赞同：0
> 
> 时间：2013-01-12T20:21:31.283
> 
> 标签：c#, windows-phone-7, selector

如何从循环选择器中获取所选项目或文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:32:30.953

对所选项目的正确访问是：

```
TypeOfTheItem s= (TypeOfTheItem)selectorString.DataSource.SelectedItem; 
```

# android - 从 GoogleApis 读取 JSON

> ID：14297596
> 
> 赞同：0
> 
> 时间：2013-01-12T20:21:46.527
> 
> 标签：android, json, google-maps

我是 android 新手，尝试从以下位置读取此 JSON 时遇到了一些麻烦：

[http://maps.googleapis.com/maps/api/geocode/json?address=portugal&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?address=portugal&sensor=true)

```
 {
"results" : [
  {
     "address_components" : [
        {
           "long_name" : "Portugal",
           "short_name" : "PT",
           "types" : [ "country", "political" ]
        }
     ],
     "formatted_address" : "Portugal",
     "geometry" : {
        "bounds" : {
           "northeast" : {
              "lat" : 42.15420480,
              "lng" : -6.19020910
           },
           "southwest" : {
              "lat" : 32.403740,
              "lng" : -31.2751580
           }
        },
        "location" : {
           "lat" : 39.39987199999999,
           "lng" : -8.2244540
        },
        "location_type" : "APPROXIMATE",
        "viewport" : {
           "northeast" : {
              "lat" : 42.15420480,
              "lng" : -6.19020910
           },
           "southwest" : {
              "lat" : 36.96017720,
              "lng" : -9.51711070
           }
        }
     },
     "types" : [ "country", "political" ]
  }
  ],
  "status" : "OK"
} 
```

任何人都可以指点我一些图书馆或一些代码让我开始吗？:D

提前TY

***编辑***

是否可以使用此结果并在活动中显示谷歌地图中的实际位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:25:09.590

是解析的问题。您可以使用[google http java 客户端](http://code.google.com/p/google-http-java-client/)。[这里](http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/)有一些例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T01:50:10.083

results[0].address_components[0].long_name 将输出葡萄牙

results[0].geometry.location.lat 将输出 39.39987199999999

ETC...

您可以使用 lat 和 lng 使用 map.setCenter(latlng:LatLng) 将地图置于该位置的中心

# ios - iOS - 文件输入 - 变量类型转换问题

> ID：14297603
> 
> 赞同：0
> 
> 时间：2013-01-12T20:22:44.007
> 
> 标签：ios, xcode, types

使用我在 cimgf.com 上找到的以下代码将 JSON 文件输入到 Core Data 中：

```
NSString *filePathGPS = [[NSBundle mainBundle] pathForResource:@"gps_6kb" ofType:@"json"];

if (filePathGPS) {
    NSString *contentOfFile = [NSString stringWithContentsOfFile:filePathGPS encoding:NSUTF8StringEncoding error:nil];
    NSDictionary *jsonDict = [contentOfFile objectFromJSONString];

    NSManagedObjectContext *context = [self managedObjectContext];
    NSManagedObject *areaName = [NSEntityDescription
                                  insertNewObjectForEntityForName:@"Area"
                                  inManagedObjectContext:context];

    NSDictionary *attributes = [[areaName entity] attributesByName];

    for (NSString *attribute in attributes) {
        for (NSDictionary * tempDict in jsonDict) {
            NSLog(@"Attribute =  %@", attribute);

            id value = [tempDict objectForKey:attribute];

            NSLog(@"Value =  %@", value);

            if (value == nil) {
                continue;
            }

            [areaName setValue:value forKey:attribute];
        }
    }

    NSError *error = nil;
    if (![context save:&error]) {
        NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
    }
} 
```

我收到以下错误：

```
2013-01-12 12:11:09.548 SuperGatherData[1194:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Unacceptable type of value for attribute: property = "area2"; desired type = NSString; given type = NSNull; value = <null>.' 
```

我明白为什么会发生错误，因为文件中的某些值是 null 而不是字符串。这是 JSON 数据的示例：

```
 {
        "area1": "International",
        "area2": null,
        "area3": null,
        "area4": null,
        "area5": null,
        "latitude": "-25.2447",
        "longtitude": "133.9453",
    },
    {
        "area1": "Alaska",
        "area2": "Anchorage & South Central Alaska ",
        "area3": null,
        "area4": null,
        "area5": null,
        "latitude": "61.2134",
        "longtitude": "-149.8672",
    },
    {
        "area1": "Alabama",
        "area2": null,
        "area3": null,
        "area4": null,
        "area5": null,
        "latitude": "34.4112",
        "longtitude": "-85.5737",
    }, 
```

并意识到我需要对以下行中的属性类型转换做一些事情：

```
for (NSString *attribute in attributes) { 
```

我只是不知道那个修复是什么。我是 Objective-C 的新手，之前没有处理过强类型语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:53:11.343

`if (value == nil)`应该`if ([value isEqual:[NSNull null]])`改为 - 大多数 JSON 解析器通过 表示显式`null`值`NSNull`，因为不能存储`nil`在 an`NSDictionary`或 an 中`NSArray`。

# git - 创建和/或推送新分支时的 Git 钩子

> ID：14297606
> 
> 赞同：30
> 
> 时间：2013-01-12T20:22:53.757
> 
> 标签：git

我想加入一个新分支的创建。无论是在创建分支时还是在第一次推送完成时。一种或两种可能吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2016-01-27T15:51:43.463

接受的答案说使用`update hook`. 我不确定这对每个人都有帮助，因为这是一个服务器端的钩子。如果你推送你的新分支，它会起作用，但是保持它纯粹是本地的呢？

我正在创建永远不会推送的本地分支，所以我正在使用它`post-checkout`。创建分支后，您通常不会在对其进行任何其他操作之前对其进行检查吗？当我检测到一个新分支时，我会对其进行修改并自动添加一个提交。之后，我可以根据它是否具有提交历史来确定这是否是结帐时的新分支。

这是我的做法（我的钩子在 bash 中）：

```
 true=1
    false=0

    isNewBranch()
    {   
        local logQuery=$(git log --all --not $(git rev-list --no-walk --exclude=refs/heads/$(getBranchName) --exclude=HEAD --all))  
        if [ -z $logQuery ]; then 
            echo $true
        else
            echo $false
        fi  
    }

    getBranchName()
    {
        echo $(git rev-parse --abbrev-ref HEAD)
    } 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-12T20:54:02.517

这是更新钩子，它为新的参考获得零 sha，分支会说头而不是标签

# php - 无法让 in_array 与关联数组一起使用

> ID：14297607
> 
> 赞同：6
> 
> 时间：2013-01-12T20:22:56.877
> 
> 标签：php, arrays, multidimensional-array

我在尝试显示关联数组中存在某些数字（产品编号）时遇到了麻烦。当我尝试这段代码时，我总是得到“假”。

```
<?php

$products = array(
    '1000' => array('name' => 'Gibson Les Paul Studio',
                    'price' => 1099.99),
    '1001' => array('name' => 'Fender American Standard Stratocaster',
                    'price' => 1149.99),
    '1002' => array('name' => 'Jackson SL1 USA Soloist',
                    'price' => 2999.99)
);

if (in_array('1001', $products)) {
    echo "true";
} else {
    echo "false";
}
?> 
```

我真的很感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-12T20:23:41.437

您正在寻找[`array_key_exists()`](http://php.net/array_key_exists)，而不是`in_array()`，因为您正在搜索特定键，而不是搜索值：

```
if( array_key_exists('1001', $products)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T20:23:58.813

您不能在此处使用[in_array()](http://php.net/manual/en/function.in-array.php)（*检查数组中是否存在值*）。

尝试[array_key_exists()](http://php.net/manual/en/function.array-key-exists.php)（*检查给定的键或索引是否存在于数组中*）。

```
if (array_key_exists('1001', $products)) {
    echo "true";
} else {
    echo "false";
} 
```

[您甚至可以使用isset()](http://php.net/manual/en/function.isset.php)和[empty()](http://php.net/manual/en/function.empty.php)检查密钥是否存在。

# android - 如何创建 NxN 不可滚动网格？

> ID：14297609
> 
> 赞同：0
> 
> 时间：2013-01-12T20:23:00.687
> 
> 标签：android, gridview

如何创建自动缩放其项目以适应整个屏幕的 NxN 网格？我需要类似于 GridView 但不滚动的东西。我想让所有项目都可见并适合屏幕尺寸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T23:38:40.387

那么你可以得到gridView可以适应的大小，然后根据它来设置gridView的每个view的大小。

这样，根本不需要滚动。

因此，例如，如果您需要一个 NxN 网格并且您有 100Nx100N 像素可用，则为每个项目提供 100x100 像素。

当然，您可能希望在它们之间添加一些填充或分隔符，但这是基本思想。

为了获得 gridView 的大小（以便您可以设置每个视图的大小），您可以使用我制作的[这个示例代码，它适用于任何类型的视图。](https://stackoverflow.com/a/10923514/878126)

# python - 在 Python 脚本中打开 Google App Engine

> ID：14297610
> 
> 赞同：1
> 
> 时间：2013-01-12T20:23:12.893
> 
> 标签：python, google-app-engine, subprocess, popen

我对编程还很陌生，因此决定设置一个简单的 python 脚本来打开我用于 webapp 开发的所有应用程序。我正在使用的代码是（用于 GAE）：

```
google_appengine = r'C:\Applications\google_app_engine\launcher\GoogleAppEngineLauncher.exe'
subprocess.Popen(google_appengine) 
```

这适用于我打开的其他程序，但是在以这种方式打开 App Engine 后，我无法在 App Engine 中运行任何应用程序。我的 App Engine 日志文件中出现以下错误：

```
Exception in thread Thread-2:
Traceback (most recent call last):
File "threading.pyc", line 486, in __bootstrap_inner
File "launcher\taskthread.pyc", line 65, in run
File "subprocess.pyc", line 587, in __init__
File "subprocess.pyc", line 700, in _get_handles
File "subprocess.pyc", line 745, in _make_inheritable
WindowsError: [Error 6] The handle is invalid 
```

我猜这是 subprocess.Popen() 的工作方式，但我找不到任何替代方案。如果这有所作为，我正在运行 Windows 7。感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T02:28:14.127

如果要管理本地 dev_appserver，这是错误的方法。

最好的方法是将 sdk 存储库 ( [https://code.google.com/p/googleappengine/](https://code.google.com/p/googleappengine/source/checkout) ) 直接克隆到您的驱动器，然后将该路径添加到您的环境 PYTHONPATH 变量中。

这是我创建并经常用于管理 dev_appserver 进程的启动和终止的脚本模板的链接：[https ://gist.github.com/4514647](https://gist.github.com/4514647)

我不太熟悉在 Windows 上管理 python 环境，所以你必须在高层次上做笔记并研究该平台的具体实现。

# .htaccess - 禁止链接到 txternal 图片

> ID：14297611
> 
> 赞同：-1
> 
> 时间：2013-01-12T20:23:13.967
> 
> 标签：.htaccess, hotlinking

有没有办法在我的论坛中禁止外部图像？指向外部图像的链接有时会被破坏，而且并不总是合法的。是否可以通过.htaccess 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:21:01.823

不`< a href='' >`，并`< img src='' >`要求客户端加载定义的 uri。由于 uri 是由您的浏览器而不是服务器加载的，因此没有安全的方法来禁止这种情况（可以禁用 javascript 解决方案）。

论坛中用户生成的标签始终是安全威胁，应该被过滤掉。根据您的代码，恶意网站可能包含读取具有您各自页面权限的客户端会话 cookie 的代码。

如果您使用 php，您可能想要使用该`$str = strip_tags($str)`功能。请注意，可能无法正确检测到嵌套标签。

安全威胁也可能基于`CDATA`或`html-comments`。如果您在`< input >`标签中使用高逗号或双引号，也可以将它们替换为空字符串。

如果你使用 utf-8，你可以这样做：

```
mb_regex_encoding('UTF-8');
$str = mb_eregi_replace( '\'' , '' , $str);
$str = mb_eregi_replace( '<([A-Z][A-Z0-9]*)\b[^>]*>' , '' , $str);
$str = mb_eregi_replace( '<\/([A-Z][A-Z0-9]*)\b[^>]*>' , '' , $str);
$str = mb_eregi_replace( '<!--' , '' , $str);
$str = mb_eregi_replace( '-->' , '' , $str);
$str = mb_eregi_replace( '<!\[CDATA\[' , '' , $str);
$str = mb_eregi_replace( '\]\]>' , '' , $str); 
```

# ios - 我在哪里可以找到要添加到项目中的 iOS 5 框架？

> ID：14297621
> 
> 赞同：0
> 
> 时间：2013-01-12T20:24:35.433
> 
> 标签：ios

我有安装了所有 iOS6 框架的最新 XCode 4.5.2。但我想创建适用于 iOS 5、5.1 和 6 的项目。

我添加了 MapKit 框架，但我只能选择 iOS 6 框架。

有没有地方可以下载旧框架以使每个人都可以使用应用程序？或者这个 iOS 6 框架是否适用于 5.0 项目？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:28:01.120

将您的部署目标更改为 5.0。确保弱引用仅与 iOS 6.0 相关的框架（如果有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:37:49.287

转到 cocoapods.org，它是一个脚本，可以将外部框架下载并安装到您的项目中。您甚至可以设置您正在使用的 iOS 版本。

# c# - 站点范围的 CustomValidator 方法。

> ID：14297624
> 
> 赞同：1
> 
> 时间：2013-01-12T20:24:55.633
> 
> 标签：c#, asp.net, validation, customvalidator

我有一个使用 CustomValidators 的 Web 表单，并且我的“validators.js”文件中有一些验证例程，我可以将它们设置为`ClientValidationFunction`每个`CustomValidator`. 例程，例如 ValidateRequired、ValidateEmail、ValidateUsername 等。

我想在我的 c# 代码本身中定义一组全局可用的 CustomValidator 函数，但是我无法掌握如何做到这一点。

理想的解决方案是这样的：

**验证器.cs：**

```
protected void ValidateUsername(object sender, ServerValidateEventArgs e){
   // Validation Logic here
} 
```

**默认.aspx**

```
<asp:TextBox runat="server" id="txtUsername">
<asp:CustomValidator runat="server" OnServerValidate="ValidateUsername" id="cvldUsername" ControlToValidate="txtUsername" ClientValidationFunction="ValidateUsername"></asp:CustomValidator> 
```

我知道我可以将事件添加到我的 default.aspx.cs 中，然后调用我的验证函数以获得布尔响应，然后在 IsValid 上返回真/假——但我想知道是否有更优雅的方法来做到这一点.

我觉得我可能错过了什么。

提前致谢，

戴夫

# javascript - 在 Javascript 中使用时间跨度

> ID：14297625
> 
> 赞同：32
> 
> 时间：2013-01-12T20:24:57.037
> 
> 标签：javascript, date, datetime, timespan, datejs

已经使用 Date.js，但如果需要，也可以使用另一个库。

不确定使用时间增量的最佳方法是什么。具体来说，我想显示从现在到过去的日期时间已经过去的时间。

所以我需要做这样的事情：

```
var elapsed_time = new Date() - pastDate;
pastDate.toString('days-hours-minutes-seconds'); 
```

让它主要使用 Date.js 工作，但问题是现在我正在使用 Date 对象而不是时间跨度，所以应该是 23 小时的时间跨度而不是 Date 第一次之后的 23 小时：

```
var result = (new Date()) - past_date;
“结果”是数字（可能是毫秒）：15452732

```

```
var result = (new Date() - Past_date
“结果”是 1969 年的日期：Wed Dec 31 1969 23:17:32

```

我需要的是：

```
0 天 23 小时 17 分 32 秒

```

有任何想法吗？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-01-12T20:29:14.247

听起来你需要[moment.js](http://momentjs.com/)

例如

```
moment().subtract('days', 6).calendar(); 
```

=> 上周日晚上 8:23

```
moment().startOf('hour').fromNow(); 
```

=> 26 分钟前

**编辑：**

纯 JS 日期差异计算：

```
var date1 = new Date("7/Nov/2012 20:30:00");
var date2 = new Date("20/Nov/2012 19:15:00");

var diff = date2.getTime() - date1.getTime();

var days = Math.floor(diff / (1000 * 60 * 60 * 24));
diff -=  days * (1000 * 60 * 60 * 24);

var hours = Math.floor(diff / (1000 * 60 * 60));
diff -= hours * (1000 * 60 * 60);

var mins = Math.floor(diff / (1000 * 60));
diff -= mins * (1000 * 60);

var seconds = Math.floor(diff / (1000));
diff -= seconds * (1000);

document.write(days + " days, " + hours + " hours, " + mins + " minutes, " + seconds + " seconds");
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-12T21:36:45.260

如果您在几天后不太担心准确性，您可以简单地做数学

```
function timeSince(when) { // this ignores months
    var obj = {};
    obj._milliseconds = (new Date()).valueOf() - when.valueOf();
    obj.milliseconds = obj._milliseconds % 1000;
    obj._seconds = (obj._milliseconds - obj.milliseconds) / 1000;
    obj.seconds = obj._seconds % 60;
    obj._minutes = (obj._seconds - obj.seconds) / 60;
    obj.minutes = obj._minutes % 60;
    obj._hours = (obj._minutes - obj.minutes) / 60;
    obj.hours = obj._hours % 24;
    obj._days = (obj._hours - obj.hours) / 24;
    obj.days = obj._days % 365;
    // finally
    obj.years = (obj._days - obj.days) / 365;
    return obj;
} 
```

然后`timeSince(pastDate);`根据需要使用属性。

**否则**您可以使用[`.getUTC*`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date#Methods)它来计算它，但请注意它可能会稍微慢一些

```
function timeSince(then) {
    var now = new Date(), obj = {};
    obj.milliseconds = now.getUTCMilliseconds() - then.getUTCMilliseconds();
    obj.seconds = now.getUTCSeconds() - then.getUTCSeconds();
    obj.minutes = now.getUTCMinutes() - then.getUTCMinutes();
    obj.hours = now.getUTCHours() - then.getUTCHours();
    obj.days = now.getUTCDate() - then.getUTCDate();
    obj.months = now.getUTCMonth() - then.getUTCMonth();
    obj.years = now.getUTCFullYear() - then.getUTCFullYear();
    // fix negatives
    if (obj.milliseconds < 0) --obj.seconds, obj.milliseconds = (obj.milliseconds + 1000) % 1000;
    if (obj.seconds < 0) --obj.minutes, obj.seconds = (obj.seconds + 60) % 60;
    if (obj.minutes < 0) --obj.hours, obj.minutes = (obj.minutes + 60) % 60;
    if (obj.hours < 0) --obj.days, obj.hours = (obj.hours + 24) % 24;
    if (obj.days < 0) { // months have different lengths
        --obj.months;
        now.setUTCMonth(now.getUTCMonth() + 1);
        now.setUTCDate(0);
        obj.days = (obj.days + now.getUTCDate()) % now.getUTCDate();
    }
    if (obj.months < 0)  --obj.years, obj.months = (obj.months + 12) % 12;
    return obj;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-07-25T16:33:56.883

纯 JS 中的简单时间戳格式化程序，具有**自定义模式支持**和**locale-aware**，使用[**Intl.RelativeTimeFormat**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/RelativeTimeFormat)

一些格式化示例

```
/** delta: 1234567890, @locale: 'en-US', @style: 'long' */

/* D~ h~ m~ s~ */
14 days 6 hours 56 minutes 7 seconds

/* D~ h~ m~ s~ f~ */
14 days 6 hours 56 minutes 7 seconds 890

/* D#"d" h#"h" m#"m" s#"s" f#"ms" */
14d 6h 56m 7s 890ms

/* D,h:m:s.f */
14,06:56:07.890

/* D~, h:m:s.f */
14 days, 06:56:07.890

/* h~ m~ s~ */
342 hours 56 minutes 7 seconds

/* s~ m~ h~ D~ */
7 seconds 56 minutes 6 hours 14 days

/* up D~, h:m */
up 14 days, 06:56 
```

代码和测试

```
/**
    Init locale formatter:

        timespan.locale(@locale, @style)

    Example:

        timespan.locale('en-US', 'long');
        timespan.locale('es', 'narrow');

    Format time delta:

        timespan.format(@pattern, @milliseconds)

        @pattern tokens:
            D: days, h: hours, m: minutes, s: seconds, f: millis

        @pattern token extension:
            h  => '0'-padded value, 
            h# => raw value,
            h~ => locale formatted value

    Example:

        timespan.format('D~ h~ m~ s~ f "millis"', 1234567890);

        output: 14 days 6 hours 56 minutes 7 seconds 890 millis

    NOTES:

    * milliseconds unit have no locale translation
    * may encounter declension issues for some locales
    * use quoted text for raw inserts

*/

const timespan = (() => {
    let rtf, tokensRtf;
    const
    tokens = /[Dhmsf][#~]?|"[^"]*"|'[^']*'/g,
    map = [
        {t: [['D', 1], ['D#'], ['D~', 'day']], u: 86400000},
        {t: [['h', 2], ['h#'], ['h~', 'hour']], u: 3600000},
        {t: [['m', 2], ['m#'], ['m~', 'minute']], u: 60000},
        {t: [['s', 2], ['s#'], ['s~', 'second']], u: 1000},
        {t: [['f', 3], ['f#'], ['f~']], u: 1}
    ],
    locale = (value, style = 'long') => {
        try {
            rtf = new Intl.RelativeTimeFormat(value, {style});
        } catch (e) {
            if (rtf) throw e;
            return;
        }
        const h = rtf.format(1, 'hour').split(' ');
        tokensRtf = new Set(rtf.format(1, 'day').split(' ')
            .filter(t => t != 1 && h.indexOf(t) > -1));
        return true;
    },
    fallback = (t, u) => u + ' ' + t.fmt + (u == 1 ? '' : 's'),
    mapper = {
        number: (t, u) => (u + '').padStart(t.fmt, '0'),
        string: (t, u) => rtf ? rtf.format(u, t.fmt).split(' ')
            .filter(t => !tokensRtf.has(t)).join(' ')
            .trim().replace(/[+-]/g, '') : fallback(t, u),
    },
    replace = (out, t) => out[t] || t.slice(1, t.length - 1),
    format = (pattern, value) => {
        if (typeof pattern !== 'string')
            throw Error('invalid pattern');
        if (!Number.isFinite(value))
            throw Error('invalid value');
        if (!pattern)
            return '';
        const out = {};
        value = Math.abs(value);
        pattern.match(tokens)?.forEach(t => out[t] = null);
        map.forEach(m => {
            let u = null;
            m.t.forEach(t => {
                if (out[t.token] !== null)
                    return;
                if (u === null) {
                    u = Math.floor(value / m.u);
                    value %= m.u;
                }
                out[t.token] = '' + (t.fn ? t.fn(t, u) : u);
            })
        });
        return pattern.replace(tokens, replace.bind(null, out));
    };
    map.forEach(m => m.t = m.t.map(t => ({
        token: t[0], fmt: t[1], fn: mapper[typeof t[1]]
    })));
    locale('en');
    return {format, locale};
})();

/************************** test below *************************/

const
cfg = {
  locale: 'en,de,nl,fr,it,es,pt,ro,ru,ja,kor,zh,th,hi',
  style: 'long,narrow'
},
el = id => document.getElementById(id),
locale = el('locale'), loc = el('loc'), style = el('style'),
fd = new Date(), td = el('td'), fmt = el('fmt'),
run = el('run'), out = el('out'),
test = () => {
  try {
      const tv = new Date(td.value);
      if (isNaN(tv)) throw Error('invalid "datetime2" value');
      timespan.locale(loc.value || locale.value, style.value);
      const delta = fd.getTime() - tv.getTime();
      out.innerHTML = timespan.format(fmt.value, delta);
  } catch (e) { out.innerHTML = e.message; }
};
el('fd').innerText = el('td').value = fd.toISOString();
el('fmt').value = 'D~ h~ m~ s~ f~ "ms"';
for (const [id, value] of Object.entries(cfg)) {
  const elm = el(id);
  value.split(',').forEach(i => elm.innerHTML += `<option>${i}</option>`);
}
```

```
i {color:green}
```

```
locale: <select id="locale"></select>
custom: <input id="loc" style="width:8em"><br>
style: <select id="style"></select><br>
datetime1: <i id="fd"></i><br>
datetime2: <input id="td"><br>
pattern: <input id="fmt">
<button id="run" onclick="test()">test</button><br><br>
<i id="out"></i>
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-08-26T12:54:35.953

您可以使用[momentjs](http://momentjs.com/) [持续时间](http://momentjs.com/docs/#/durations/)对象

例子：

```
const diff = moment.duration(Date.now() - new Date(2010, 1, 1))
console.log(`${diff.years()} years ${diff.months()} months ${diff.days()} days ${diff.hours()} hours ${diff.minutes()} minutes and ${diff.seconds()} seconds`) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-05T03:32:43.413

```
/**
 * 计算时间对象与当前时间的差距，并显示友好的文本 
 * English: Calculating the difference between the given time and the current time and then showing the results.
 */
function date2Text(date) {
    var milliseconds = new Date() - date;
    var timespan = new TimeSpan(milliseconds);
    if (milliseconds < 0) {
        return timespan.toString() + "之后";
    }else{
        return timespan.toString() + "前";
    }
}

/**
 * 用于计算时间间隔的对象
 * English: Using a function to calculate the time interval
 * @param milliseconds 毫秒数
 */
var TimeSpan = function (milliseconds) {
    milliseconds = Math.abs(milliseconds);
    var days = Math.floor(milliseconds / (1000 * 60 * 60 * 24));
    milliseconds -= days * (1000 * 60 * 60 * 24);

    var hours = Math.floor(milliseconds / (1000 * 60 * 60));
    milliseconds -= hours * (1000 * 60 * 60);

    var mins = Math.floor(milliseconds / (1000 * 60));
    milliseconds -= mins * (1000 * 60);

    var seconds = Math.floor(milliseconds / (1000));
    milliseconds -= seconds * (1000);
    return {
        getDays: function () {
            return days;
        },
        getHours: function () {
            return hours;
        },
        getMinuts: function () {
            return mins;
        },
        getSeconds: function () {
            return seconds;
        },
        toString: function () {
            var str = "";
            if (days > 0 || str.length > 0) {
                str += days + "天";
            }
            if (hours > 0 || str.length > 0) {
                str += hours + "小时";
            }
            if (mins > 0 || str.length > 0) {
                str += mins + "分钟";
            }
            if (days == 0 && (seconds > 0 || str.length > 0)) {
                str += seconds + "秒";
            }
            return str;
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-12T21:57:18.363

Moment.js 提供了这样的功能：

[http://momentjs.com/](http://momentjs.com/)

它有很好的文档和很好的库。

它应该遵循“持续时间”和“API 人性化” [http://momentjs.com/docs/#/displaying/from/](http://momentjs.com/docs/#/displaying/from/)

```
 var d1, d2; // Timepoints
 var differenceInPlainText = moment(a).from(moment(b), true); // Add true for suffixless text 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2019-01-16T23:45:01.480

这是一个支持天、小时、分钟和秒的时间跨度类的类似 .NET C# 实现。此实现还支持负时间跨度。

```
const MILLIS_PER_SECOND = 1000;
const MILLIS_PER_MINUTE = MILLIS_PER_SECOND * 60;   //     60,000
const MILLIS_PER_HOUR = MILLIS_PER_MINUTE * 60;     //  3,600,000
const MILLIS_PER_DAY = MILLIS_PER_HOUR * 24;        // 86,400,000

export class TimeSpan {
    private _millis: number;

    private static interval(value: number, scale: number): TimeSpan {
        if (Number.isNaN(value)) {
            throw new Error("value can't be NaN");
        }

        const tmp = value * scale;
        const millis = TimeSpan.round(tmp + (value >= 0 ? 0.5 : -0.5));
        if ((millis > TimeSpan.maxValue.totalMilliseconds) || (millis < TimeSpan.minValue.totalMilliseconds)) {
            throw new TimeSpanOverflowError("TimeSpanTooLong");
        }

        return new TimeSpan(millis);
    }

    private static round(n: number): number {
        if (n < 0) {
            return Math.ceil(n);
        } else if (n > 0) {
            return Math.floor(n);
        }

        return 0;
    }

    private static timeToMilliseconds(hour: number, minute: number, second: number): number {
        const totalSeconds = (hour * 3600) + (minute * 60) + second;
        if (totalSeconds > TimeSpan.maxValue.totalSeconds || totalSeconds < TimeSpan.minValue.totalSeconds) {
            throw new TimeSpanOverflowError("TimeSpanTooLong");
        }

        return totalSeconds * MILLIS_PER_SECOND;
    }

    public static get zero(): TimeSpan {
        return new TimeSpan(0);
    }

    public static get maxValue(): TimeSpan {
        return new TimeSpan(Number.MAX_SAFE_INTEGER);
    }

    public static get minValue(): TimeSpan {
        return new TimeSpan(Number.MIN_SAFE_INTEGER);
    }

    public static fromDays(value: number): TimeSpan {
        return TimeSpan.interval(value, MILLIS_PER_DAY);
    }

    public static fromHours(value: number): TimeSpan {
        return TimeSpan.interval(value, MILLIS_PER_HOUR);
    }

    public static fromMilliseconds(value: number): TimeSpan {
        return TimeSpan.interval(value, 1);
    }

    public static fromMinutes(value: number): TimeSpan {
        return TimeSpan.interval(value, MILLIS_PER_MINUTE);
    }

    public static fromSeconds(value: number): TimeSpan {
        return TimeSpan.interval(value, MILLIS_PER_SECOND);
    }

    public static fromTime(hours: number, minutes: number, seconds: number): TimeSpan;
    public static fromTime(days: number, hours: number, minutes: number, seconds: number, milliseconds: number): TimeSpan;
    public static fromTime(daysOrHours: number, hoursOrMinutes: number, minutesOrSeconds: number, seconds?: number, milliseconds?: number): TimeSpan {
        if (milliseconds != undefined) {
            return this.fromTimeStartingFromDays(daysOrHours, hoursOrMinutes, minutesOrSeconds, seconds, milliseconds);
        } else {
            return this.fromTimeStartingFromHours(daysOrHours, hoursOrMinutes, minutesOrSeconds);
        }
    }

    private static fromTimeStartingFromHours(hours: number, minutes: number, seconds: number): TimeSpan {
        const millis = TimeSpan.timeToMilliseconds(hours, minutes, seconds);
        return new TimeSpan(millis);
    }

    private static fromTimeStartingFromDays(days: number, hours: number, minutes: number, seconds: number, milliseconds: number): TimeSpan {
        const totalMilliSeconds = (days * MILLIS_PER_DAY) +
            (hours * MILLIS_PER_HOUR) +
            (minutes * MILLIS_PER_MINUTE) +
            (seconds * MILLIS_PER_SECOND) +
            milliseconds;

        if (totalMilliSeconds > TimeSpan.maxValue.totalMilliseconds || totalMilliSeconds < TimeSpan.minValue.totalMilliseconds) {
            throw new TimeSpanOverflowError("TimeSpanTooLong");
        }
        return new TimeSpan(totalMilliSeconds);
    }

    constructor(millis: number) {
        this._millis = millis;
    }

    public get days(): number {
        return TimeSpan.round(this._millis / MILLIS_PER_DAY);
    }

    public get hours(): number {
        return TimeSpan.round((this._millis / MILLIS_PER_HOUR) % 24);
    }

    public get minutes(): number {
        return TimeSpan.round((this._millis / MILLIS_PER_MINUTE) % 60);
    }

    public get seconds(): number {
        return TimeSpan.round((this._millis / MILLIS_PER_SECOND) % 60);
    }

    public get milliseconds(): number {
        return TimeSpan.round(this._millis % 1000);
    }

    public get totalDays(): number {
        return this._millis / MILLIS_PER_DAY;
    }

    public get totalHours(): number {
        return this._millis / MILLIS_PER_HOUR;
    }

    public get totalMinutes(): number {
        return this._millis / MILLIS_PER_MINUTE;
    }

    public get totalSeconds(): number {
        return this._millis / MILLIS_PER_SECOND;
    }

    public get totalMilliseconds(): number {
        return this._millis;
    }

    public add(ts: TimeSpan): TimeSpan {
        const result = this._millis + ts.totalMilliseconds;
        return new TimeSpan(result);
    }

    public subtract(ts: TimeSpan): TimeSpan {
        const result = this._millis - ts.totalMilliseconds;
        return new TimeSpan(result);
    }
} 
```

# 如何使用

### 创建一个新的 TimeSpan 对象

从零开始

```
 const ts = TimeSpan.zero; 
```

从毫秒

```
 const milliseconds = 10000; // 1 second

    // by using the constructor
    const ts1 = new TimeSpan(milliseconds);

    // or as an alternative you can use the static factory method
    const ts2 = TimeSpan.fromMilliseconds(milliseconds); 
```

从秒

```
 const seconds = 86400; // 1 day
    const ts = TimeSpan.fromSeconds(seconds); 
```

从分钟

```
 const minutes = 1440; // 1 day
    const ts = TimeSpan.fromMinutes(minutes); 
```

从小时

```
 const hours = 24; // 1 day
    const ts = TimeSpan.fromHours(hours); 
```

从天

```
 const days = 1; // 1 day
    const ts = TimeSpan.fromDays(days); 
```

从具有给定小时、分钟和秒的时间开始

```
 const hours = 1;
    const minutes = 1;
    const seconds = 1;
    const ts = TimeSpan.fromTime(hours, minutes, seconds); 
```

从 time2 开始，具有给定的天、小时、分钟、秒和毫秒

```
 const days = 1;
    const hours = 1;
    const minutes = 1;
    const seconds = 1;
    const milliseconds = 1;
    const ts = TimeSpan.fromTime(days, hours, minutes, seconds, milliseconds); 
```

从最大安全整数

```
 const ts = TimeSpan.maxValue; 
```

从最小安全整数

```
 const ts = TimeSpan.minValue; 
```

从最小安全整数

```
 const ts = TimeSpan.minValue; 
```

添加

```
 const ts1 = TimeSpan.fromDays(1);
    const ts2 = TimeSpan.fromHours(1);
    const ts = ts1.add(ts2);

    console.log(ts.days);               // 1
    console.log(ts.hours);              // 1
    console.log(ts.minutes);            // 0
    console.log(ts.seconds);            // 0
    console.log(ts.milliseconds);           // 0 
```

减去

```
 const ts1 = TimeSpan.fromDays(1);
    const ts2 = TimeSpan.fromHours(1);
    const ts = ts1.subtract(ts2);

    console.log(ts.days);               // 0
    console.log(ts.hours);              // 23
    console.log(ts.minutes);            // 0
    console.log(ts.seconds);            // 0
    console.log(ts.milliseconds);           // 0 
```

获取间隔

```
 const days = 1;
    const hours = 1;
    const minutes = 1;
    const seconds = 1;
    const milliseconds = 1;
    const ts = TimeSpan.fromTime2(days, hours, minutes, seconds, milliseconds);

    console.log(ts.days);               // 1
    console.log(ts.hours);              // 1
    console.log(ts.minutes);            // 1
    console.log(ts.seconds);            // 1
    console.log(ts.milliseconds);           // 1

    console.log(ts.totalDays)           // 1.0423726967592593;
    console.log(ts.totalHours)          // 25.016944722222224;
    console.log(ts.totalMinutes)            // 1501.0166833333333;
    console.log(ts.totalSeconds)            // 90061.001;
    console.log(ts.totalMilliseconds);      // 90061001; 
```

另请参阅： [https ://github.com/erdas/timespan](https://github.com/erdas/timespan)

# c - 您可以从 2 个字符串中分配一个字符串吗？

> ID：14297631
> 
> 赞同：0
> 
> 时间：2013-01-12T20:25:55.613
> 
> 标签：c

我还是新来的，但我遇到了质疑，为什么我认为以下内容无法完成。

我正在尝试将 foobar 分配给“Hello there!\n”的值。要么无法完成，要么我很难弄清楚。

编辑：我需要澄清一下，我正在寻找以下原因不起作用的原因，而不是可以取代它的众多解决方案中的 1 个。

编辑：我接受了“你不能以这种方式连接 c 中的字符串变量”的答案。大概是因为编写解析器太难而无法采用以下方式。我太新了，不知道有什么不同，也太新了，不能这么担心。如果有人发现引用的正式原因，请张贴。

```
#include <stdio.h>

int main()
{

char *foo = "Hello";
char *bar = " there!\n";
const char *foobar = (*foo) *bar;

printf("%s", foobar);

return 0;

} 
```

这似乎不应该是一个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-12T20:30:18.490

您不能以这种方式连接 c 中的字符串变量。

您需要一个内存空间，您可以在其中复制该内存中的两个字符串。

内存空间可以是静态缓冲区，就像`char foobar[100]`您已经知道字符串的大小不能大于定义的大小一样。或者，如果您不知道字符串的限制大小，如以下示例所示，内存可能是动态缓冲区

```
#include <stdio.h>
#include <string.h>

int main()
{

   char *foo = "Hello";
   char *bar = " there!\n";
   char *foobar = malloc(strlen(foo) + strlen(bar) + 1);
   strcpy(foobar,foo);
   strcat(foobar,bar);
   printf("%s", foobar);

   return 0;

} 
```

如果您分配内存，`malloc()`那么不要忘记`foobar`在您的程序中变得无用时释放内存

```
free(foobar); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T20:34:46.467

在 C 中，字符串不能以您的方式连接。模仿您正在尝试做的事情的一种可能方法是使用预处理器：

```
#include <stdio.h>
#define FOO "foo"
#define BAR "bar"

int main()
{
char *foo = FOO;
char *bar = BAR;
const char *foobar = FOO BAR;

printf("%s", foobar);

return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T20:43:26.347

回答“已编辑”的问题：

它不起作用，因为 C 语言本身不知道如何连接字符串。您应该使用`strcat`或其他一些功能。此外，编译器不知道将字符串放在内存中的何处，因为它不能使用“foo”和“bar”的存储空间来存储结果字符串。

当然，在C语言中，`*foo`你代码中的意思是字母`'H'`，`*bar`变成了`' '`。So`(*foo) *bar`变得`('H') ' '`在C中绝对没有用处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T20:45:24.457

您的代码可能编译没有问题，但其中可能存在一些错误。

前两个 char*（或字符串）声明是合法的。第三个没那么多。您将 (*bar) 转换为 *foo，它不是数据类型而是变量，并且您将 foobar 设置为 foo 的转换值，而不是进行字符串连接。

C 不使用运算符进行字符串连接。相反，您需要使用特定的库来连接字符串或创建自己的函数。对于字符串，您有[string.h](http://pubs.opengroup.org/onlinepubs/7908799/xsh/string.h.html)

对于这种特殊情况，您有[strcat](http://pubs.opengroup.org/onlinepubs/7908799/xsh/strcat.html)：它接受两个字符串并返回一个包含这两个字符串连接的新字符串。

因此，对于您的示例：

```
char *foo = "Hello";
char *bar = " there!\n";
const char *foobar = malloc((strlen(foo)+strlen(bar))*sizeof(char));
foobar = strcat(foo,bar); 
```

像这样的东西。

希望这可以帮助。

# c# - C# 将 Lambda 表达式作为方法参数传递

> ID：14297633
> 
> 赞同：119
> 
> 时间：2013-01-12T20:26:04.647
> 
> 标签：c#, linq, lambda

我有一个我希望能够传递和重用的 lambda 表达式。这是代码：

```
public List<IJob> getJobs(/* i want to pass the lambda expr in here */) {
  using (SqlConnection connection = new SqlConnection(getConnectionString())) {
    connection.Open();
    return connection.Query<FullTimeJob, Student, FullTimeJob>(sql, 
      (job, student) => {         
        job.Student = student;
        job.StudentId = student.Id;
        return job;
        },
        splitOn: "user_id",
        param: parameters).ToList<IJob>();   
  } 
```

这里的关键是我希望能够将我在这里使用的 lambda 表达式传递给调用此代码的方法，以便我可以重用它。lambda 表达式是我的 .Query 方法中的第二个参数。我假设我想使用 Action 或 Func，但我不太确定它的语法是什么或它是如何工作的。有人可以给我一个例子吗？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2013-01-12T20:28:51.443

使用[`Func<T1, T2, TResult>`](http://msdn.microsoft.com/en-us/library/bb534647.aspx)委托作为参数类型并将其传递给您的`Query`：

```
public List<IJob> getJobs(Func<FullTimeJob, Student, FullTimeJob> lambda)
{
  using (SqlConnection connection = new SqlConnection(getConnectionString())) {
    connection.Open();
    return connection.Query<FullTimeJob, Student, FullTimeJob>(sql, 
        lambda,
        splitOn: "user_id",
        param: parameters).ToList<IJob>();   
  }  
} 
```

你会这样称呼它：

```
getJobs((job, student) => {         
        job.Student = student;
        job.StudentId = student.Id;
        return job;
        }); 
```

或者将 lambda 分配给一个变量并将*其*传入。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-04-24T02:34:35.253

如果我了解您需要以下代码。（通过参数传递表达式 lambda）方法

```
public static void Method(Expression<Func<int, bool>> predicate) { 
    int[] number={1,2,3,4,5,6,7,8,9,10};
    var newList = from x in number
                  .Where(predicate.Compile()) //here compile your clausuly
                  select x;
                newList.ToList();//return a new list
    } 
```

调用方法

```
Method(v => v.Equals(1)); 
```

你可以在他们的课堂上做同样的事情，看这个例子。

```
public string Name {get;set;}

public static List<Class> GetList(Expression<Func<Class, bool>> predicate)
    {
        List<Class> c = new List<Class>();
        c.Add(new Class("name1"));
        c.Add(new Class("name2"));

        var f = from g in c.
                Where (predicate.Compile())
                select g;
        f.ToList();

       return f;
    } 
```

调用方法

```
Class.GetList(c=>c.Name=="yourname"); 
```

我希望这是有用的

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-12T20:29:07.960

Lambda 表达式的类型为`Action<parameters>`（如果它们不返回值）或`Func<parameters,return>`（如果它们有返回值）。在您的情况下，您有两个输入参数，并且需要返回一个值，因此您应该使用：

```
Func<FullTimeJob, Student, FullTimeJob> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-12T20:30:45.630

您应该使用委托类型并将其指定为您的命令参数。您可以使用其中一种内置委托类型 -`Action`和`Func`.

在您的情况下，您的委托看起来像接受两个参数，并返回一个结果，因此您可以使用`Func`：

```
List<IJob> GetJobs(Func<FullTimeJob, Student, FullTimeJob> projection) 
```

然后，您可以调用`GetJobs`传递委托实例的方法。这可以是与该签名匹配的方法、匿名委托或 lambda 表达式。

PS您应该使用 PascalCase 作为方法名称 - `GetJobs`，而不是`getJobs`。

# nhibernate - Fluent Nhibernate QueryOver 与日期值表达式

> ID：14297634
> 
> 赞同：2
> 
> 时间：2013-01-12T20:26:14.083
> 
> 标签：nhibernate, fluent-nhibernate

不确定如何在最后一行下面的示例中完成日期表达式。类似的查询无法执行。我假设我必须使用某种 Projections SqlFunction？有人帮忙吗？

```
Session.QueryOver(() => myobj)
.JoinAlias(() => myobj.Object, () => o1)
.Where(() => myobj.SomeInt > o1.Date.Subtract(someTime).Minutes); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T12:28:08.687

我们需要将您的日期操作从 C# 方法转换为 DB 服务器函数。对于 MS SQL Server，我们可以使用 DATEDIFF 函数：

[DATEDIFF（日期部分，开始日期，结束日期）](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

期望您的对象有一个列`Date`，因此我们可以创建它`ICriterion`

```
DateTime someTime = ...;
var sqlString = " DATEDIFF( mi, ?, [Date]) < {alias}.SomeInt ";
var sql = NHibernate.Criterion.Expression.Sql(sqlString
              , someTime
              , NHibernate.NHibernateUtil.DateTime); 
```

将此 SQL 语句作为 Icriterion 我们可以调整您的代码段：

```
Session
  .QueryOver(() => myobj)
  .JoinAlias(() => myobj.Object, () => o1)
  .Where(sql); // sql = our ICriterion above 
```

*这只是一个简单的例子......起点如何使用 NHibernate API 来做到这一点......一些子查询应该更适合避免使用显式`SomeInt`列名......*

# visual-studio-2010 - Visual basic-如果有按钮，我如何制作一个自动单击按钮的机器人？

> ID：14297635
> 
> 赞同：0
> 
> 时间：2013-01-12T20:26:46.303
> 
> 标签：visual-studio-2010, vb.net-2010, bots

我需要它来刷新页面，直到它看到一个新按钮，然后自动单击它，如果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:50:22.207

如果图像是静态的，您可以创建图像比较工具。

首先，您将需要[此](http://www.vb-helper.com/howto_net_image_compare.html)页面中的代码：

```
Private Sub btnGo_Click(ByVal sender As System.Object, _
    ByVal e As System.EventArgs) Handles btnGo.Click
    Me.Cursor = Cursors.WaitCursor
    Application.DoEvents()

    ' Load the images.
    Dim bm1 As Bitmap = Image.FromFile(txtFile1.Text)
    Dim bm2 As Bitmap = Image.FromFile(txtFile2.Text)

    ' Make a difference image.
    Dim wid As Integer = Math.Min(bm1.Width, bm2.Width)
    Dim hgt As Integer = Math.Min(bm1.Height, bm2.Height)
    Dim bm3 As New Bitmap(wid, hgt)

    ' Create the difference image.
    Dim are_identical As Boolean = True
    Dim r1, g1, b1, r2, g2, b2, r3, g3, b3 As Integer
    Dim eq_color As Color = Color.White
    Dim ne_color As Color = Color.Red
    For x As Integer = 0 To wid - 1
        For y As Integer = 0 To hgt - 1
            If bm1.GetPixel(x, y).Equals(bm2.GetPixel(x, _
                y)) Then
                bm3.SetPixel(x, y, eq_color)
            Else
                bm3.SetPixel(x, y, ne_color)
                are_identical = False
            End If
        Next y
    Next x

    ' Display the result.
    picResult.Image = bm3

    Me.Cursor = Cursors.Default
    If (bm1.Width <> bm2.Width) OrElse (bm1.Height <> _
        bm2.Height) Then are_identical = False
    If are_identical Then
        MessageBox.Show("The images are identical")
    Else
        MessageBox.Show("The images are different")
    End If

    bm1.Dispose()
    bm2.Dispose()
End Sub 
```

此代码允许您比较图像，因此您可以制作按钮的屏幕截图并将其存储为要比较的主图像，然后您需要制作计算机屏幕的屏幕截图并提取按钮所在的像素应该。

[这](http://forum.codecall.net/topic/51761-creating-a-screen-shot-tool-vbnet/#axzz2IETc0lWG)是有关如何从计算机屏幕获取屏幕截图的教程。

在此之后，您可以使用系统鼠标功能来模拟单击[此](http://excelhelphq.com/how-to-move-and-click-the-mouse-in-vba)页面中的代码：

```
Public Declare Function SetCursorPos Lib "user32" (ByVal x As Long, ByVal y As Long) As Long
Public Declare Sub mouse_event Lib "user32" (ByVal dwFlags As Long, ByVal dx As Long, ByVal dy As Long, ByVal cButtons As Long, ByVal dwExtraInfo As Long)
Public Const MOUSEEVENTF_LEFTDOWN = &H2
Public Const MOUSEEVENTF_LEFTUP = &H4
Public Const MOUSEEVENTF_RIGHTDOWN As Long = &H8
Public Const MOUSEEVENTF_RIGHTUP As Long = &H10

Private Sub SingleClick()
  SetCursorPos 100, 100 'x and y position
  mouse_event MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0
  mouse_event MOUSEEVENTF_LEFTUP, 0, 0, 0, 0
End Sub

Private Sub DoubleClick()
  'Simulate a double click as a quick series of two clicks
  SetCursorPos 100, 100 'x and y position
  mouse_event MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0
  mouse_event MOUSEEVENTF_LEFTUP, 0, 0, 0, 0
  mouse_event MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0
  mouse_event MOUSEEVENTF_LEFTUP, 0, 0, 0, 0
End Sub

Private Sub RightClick()
  'Simulate a right click
  SetCursorPos 200, 200 'x and y position
  mouse_event MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0
  mouse_event MOUSEEVENTF_LEFTUP, 0, 0, 0, 0
  mouse_event MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0
  mouse_event MOUSEEVENTF_LEFTUP, 0, 0, 0, 0
End Sub 
```

# c - printf() 函数并显示 %

> ID：14297636
> 
> 赞同：0
> 
> 时间：2013-01-12T20:27:09.170
> 
> 标签：c

我正在尝试执行一个程序，该程序在 && 运算符返回 true 和返回 false 时打印数值。代码如下：-

```
#include <stdio.h>
main()
{
int a,b;
scanf("%d%d",&a,&b);
printf("Part I\n");
printf("(a%2 == 0) && (b%2 == 0): %d\n",(a%2 == 0) && (b%2 == 0));
printf("(a%3 == 0) && (b%3 == 0): %d\n",(a%3 == 0) && (b%3 == 0));
printf("(a%5 == 0) && (b%5 == 0): %d\n",(a%5 == 0) && (b%5 == 0));
printf("(a%7 == 0) && (b%7 == 0): %d\n",(a%7 == 0) && (b%7 == 0));
printf("Part II\n");
printf("The AND operator yields: %d\n",(a%2 == 0) && (b%2 == 0));
printf("The AND operator yields: %d\n",(a%3 == 0) && (b%3 == 0));
printf("The AND operator yields: %d\n",(a%5 == 0) && (b%5 == 0));
printf("The AND operator yields: %d\n",(a%7 == 0) && (b%7 == 0));

return 0;
} 
```

输出（连同我的输入）如下： -

```
210
210
Part I
(a%2 == 0) && (b%2 == 0): %d
(a%2 == 0) && (b%2 == 0): %d
(a%2 == 0) && (b%2 == 0): %d
(a%2 == 0) && (b%2 == 0): %d
Part II
The AND operator yields: 1
The AND operator yields: 1
The AND operator yields: 1
The AND operator yields: 1 
```

为什么第一部分以这种方式表现？即使我将 && 替换为 || 也会发生这种情况。我正在使用 Borland C++ 编译器 5.5 。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T20:28:51.680

因为如果你想实际显示一个`%`，那么你必须在`printf`格式字符串中用另一个转义它`%`。例如

```
printf("(a%%2 == 0) && (b%%2 == 0): %d\n",(a%2 == 0) && (b%2 == 0));
          ^              ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:37:45.190

我已经用[http://codepad.org/](http://codepad.org/)对此进行了测试，我认为它使用了 gcc，并且代码运行正常。`%`但是您可能会尝试在文字`%`（即）之前添加额外的内容，`%%`以便编译器知道后面的 % 是实际字符。像这样：

```
printf("Part I\n");
printf("(a%%2 == 0) && (b%%2 == 0): %d\n",(a%2 == 0) && (b%2 == 0));
printf("(a%%3 == 0) && (b%%3 == 0): %d\n",(a%3 == 0) && (b%3 == 0));
printf("(a%%5 == 0) && (b%%5 == 0): %d\n",(a%5 == 0) && (b%5 == 0));
printf("(a%%7 == 0) && (b%%7 == 0): %d\n",(a%7 == 0) && (b%7 == 0)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-25T03:49:44.073

您实际上是`%`在第一部分使用非法转义序列字符进行打印。这就是 printf 产生垃圾值的原因。

> printf("(a%2 == 0) && (b%2 == 0): %d\n",(a%2 == 0) && (b%2 == 0));
>               ^ ^
>       这是你误会了

它应该像

```
printf("(a%%2 == 0) && (b%%2 == 0): %d\n",(a%2 == 0) && (b%2 == 0)); 
```

您还可以阅读[C 中使用的所有格式说明符](http://codeforwin.blogspot.in/2015/05/list-of-all-format-specifiers-in-c.html)。

# c++ - 右值你好世界缺少构造函数

> ID：14297639
> 
> 赞同：9
> 
> 时间：2013-01-12T20:27:18.753
> 
> 标签：c++, c++11, clang

我试图更多地了解右值引用，但我陷入了这个最简单的例子：

```
#include <iostream>
using namespace std;

struct C {
    C() { cout << "C()\n"; }
    ~C() { cout << "~C()\n"; }
    C(const C&) { cout << "C(const C&)\n"; }
    C& operator=(const C&) { cout << "operator=(const C&)\n"; return *this; }

    C(C&&) { cout << "C(C&&)\n"; }
    C& operator=(C&&) { cout << "operator=(C&&)\n"; return *this; }
};

C foo() { C c; return c; }

int main()
{
    const C c = foo();
    return 0;
} 
```

我已经用 Clang 3.2 和`-std=c++11 -fno-elide-constructors`（以避免（N）RVO）编译它，但结果令我惊讶：

```
C()
~C()    // huh?
C(C&&)
~C()
~C() 
```

我完全预料到了，除了第一个`~C()`。它是从哪里来的，我错过了什么，因为有 2 个构造和 3 个破坏？&& 构造函数是否使用被破坏的对象引用调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:25:57.920

这一定是个bug。构造的本地对象的析构函数在`foo()`接收对象的移动构造函数之前被调用。特别是，当按值返回时，**似乎分配了一个临时但没有（移动）构造。**以下程序显示了这一点：

```
#include <iostream>
using namespace std;

struct C 
{
    C(int z) { id = z; cout << "C():" << id << endl; }
    ~C() { cout << "~C():" << id << endl; }
    C(const C& c) { id = c.id + 1; cout << "C(const C&):" << id << endl; }
    C& operator=(const C&) { cout << "operator=(const C&)\n"; return *this; }
    C(C&& c) { id = c.id + 1; cout << "C(C&&):" << id << endl;}
    C& operator=(C&&) { cout << "operator=(C&&)\n"; return *this; }
    int id;
};

C foo() { C c(10); return c; }

int main()
{
    const C c = foo();
    return 0;
} 
```

输出：

```
C():10
// THE TEMPORARY OBJECT IS PROBABLY ALLOCATED BUT *NOT CONSTRUCTED* HERE...
~C():10 // DESTRUCTOR CALLED BEFORE ANY OTHER OBJECT IS CONSTRUCTED!
C(C&&):4198993
~C():4198992
~C():4198993 
```

在内部创建*两个*对象`foo()`似乎可以更清楚地说明这个问题：

```
C foo() { C c(10); C d(14); return c; } 
```

输出：

```
C():10
C():14
~C():14
// HERE, THE CONSTRUCTOR OF THE TEMPORARY SHOULD BE INVOKED!
~C():10
C(C&&):1 // THE OBJECT IN main() IS CONSTRUCTED FROM A NON-CONSTRUCTED TEMPORARY
~C():0 // THE NON-CONSTRUCTED TEMPORARY IS BEING DESTROYED HERE
~C():1 
```

有趣的是，这似乎取决于对象的构造方式`foo()`。如果`foo()`这样写：

```
C foo() { C c(10); return c; } 
```

然后出现错误。如果它是这样写的，它不会：

```
C foo() { return C(10); } 
```

最后一个定义的输出`foo()`：

```
C():10 // CONSTRUCTION OF LOCAL OBJECT
C(C&&):11 // CONSTRUCTION OF TEMPORARY
~C():10 // DESTRUCTION OF LOCAL OBJECT
C(C&&):12 // CONSTRUCTION OF RECEIVING OBJECT
~C():11 // DESTRUCTION OF TEMPORARY
~C():12 // DESTRUCTION OF RECEIVING OBJECT 
```

# applescript - 使用 AppleScript 检查应用程序是否存在

> ID：14297644
> 
> 赞同：5
> 
> 时间：2013-01-12T20:28:06.660
> 
> 标签：applescript

此代码不适用于不存在的应用程序，因为它会提示用户查找“FooApp”（并且我不想与用户交互）：

```
get exists application "FooApp" 
```

此代码仅适用于进程名称与其应用程序名称匹配的应用程序，它涵盖了大多数但不是所有应用程序：

```
tell application "System Events"
    get exists application process "FooApp"
end tell 
```

（例如在我的机器上“OmniGraffle Professional”是一个进程名称，但对应的应用程序名称是“OmniGraffle Professional 4”。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T14:42:27.293

[@regulus6633](https://stackoverflow.com/a/14297870/1845155)正确地指出您在示例中做了两件不同的事情，而且他对捆绑标识符的建议也很到位。

我检查应用程序是否已安装的首选方法如下：

```
try
    tell application "Finder" to get application file id "bundle.id.here"
    set appExists to true
on error
    set appExists to false
end try 
```

这避免了“应用程序 x 在哪里？” 对话框并为 appExists 分配一个布尔值。你也可以`display alert`在`on error`街区（或任何你想要的东西）。

对于第二个示例，您可以编写：

```
tell application "System Events"
    set processIsRunning to ((bundle identifier of processes) ¬
    contains "com.bundle.id.here")
end tell 
```

它几乎与@regulus6633 的代码完全一样，但获取进程列表并在一行中检查它。您也不必担心初始化 processIsRunning。

如果您使用应用程序名称，只需`bundle identifier`换成`name`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T20:56:22.870

请注意，您的 2 个脚本执行不同的操作。第一个检查它是否在计算机上。第二个检查它是否当前正在运行。所以这里是如何做第一件事。

```
set doesExist to false
try
    do shell script "osascript -e 'exists application \"foo\"'"
    set doesExist to true
end try

return doesExist 
```

请注意，正如您所指出的，某些应用程序有多种名称。在这些情况下，您可以使用应用程序的捆绑包 ID 而不是它的名称。以下是如何获取 Safari 的 id 并使用它...

```
set appID to id of application "Safari"
exists application id appID 
```

如果你想看看它是否正在运行，就像在你的第二个脚本中一样，你可以这样做......

```
set processIsRunning to true
tell application "System Events"
    set runningProcesses to processes whose bundle identifier is appID
end tell
if runningProcesses is {} then set processIsRunning to false
return processIsRunning 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-31T16:05:55.620

这是一个老问题，但答案可能仍然有帮助。以下 shell 脚本不会启动应用程序，避免出现“应用程序 x 在哪里？” 如果应用程序不存在，则对话框，接受应用程序名称或包 ID 作为输入，如果存在则返回应用程序的包 ID，如果不存在则返回空字符串：

```
set appBundleId to do shell script "osascript -e " & ("id of application \"" & appRef & "\"")'s quoted form & " || osascript -e " & ("id of application id \"" & appRef & "\"")'s quoted form & " || :"
set doesExist to (appBundleId ≠ "") 
```

其中 appRef 是应用程序名称或包 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-19T21:00:10.130

如果您有两个具有相同捆绑标识符的应用程序，另一种方法是使用应用程序名称。例如，Adobe InDesign CS5.5 和 Adob​​e InDesign CS6 都有`com.adobe.InDesign`作为它们的包标识符。

```
tell application "System Events"
    name of every process contains ("Adobe Photoshop CS5.5")
end tell 
```

# eclipse - 教程第一步出现 Maven 错误

> ID：14297647
> 
> 赞同：0
> 
> 时间：2013-01-12T20:28:26.233
> 
> 标签：eclipse, maven, m2eclipse, pom.xml

我正在关注一个很棒的教程：`http://www.objectdb.com/tutorial/jpa/eclipse/spring/project`

在复制 pom.xml 的代码后的第一步，我得到 9 个错误。这是我的 pom.xml 的第 1 行显示的错误：

```
Failure to transfer org.apache.maven.reporting:maven-reporting-api:jar:2.0.6 from http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced. Original error: Could not transfer artifact org.apache.maven.reporting:maven-reporting-api:jar:2.0.6 from/to central (http://repo.maven.apache.org/maven2): The operation was cancelled.   pom.xml /Guestbook  line 1  Maven Configuration Problem 
```

如有必要，我可以发布其他错误。在此之前我尝试过运行一些简单的预制 maven 项目，我相信他们称它们为 archtypes。他们有类似的错误。我不明白为什么会发生这种情况，而且我无法得到一些不立即抛出错误的 hello world 东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T19:31:07.873

对伏都教编码说不。不要核弹.m2！

当 Maven 尝试为您的构建解决依赖关系时，它首先在本地存储库中查找，即 .m2/repository。如果它在那里找到它们，它将使用这些本地缓存的工件。如果工件在本地存储库中不存在，Maven 将尝试从它知道的远程存储库中解析它。开箱即用，它只知道 maven central。所以，它会去那里。

您遇到的场景有一个主要的并发症。如果给定的依赖项工件是 SNAPSHOT 工件，那么您将需要偶尔检查该工件的新版本，因为 SNAPSHOT 名称表明它当前正在开发中并且可能会经常更改。为了处理这个问题，Maven 被构建为每天在远程存储库中检查一次它在本地存储库中拥有的任何 SNAPSHOT 工件的更新版本。

此外，如果它试图在远程存储库中找到一个工件并出现某种故障——通常是由于网络相关问题可能是暂时的或永久性的（网络速度慢或代理设置）——这也将在本地存储库元数据。与 SNAPSHOT 解决方案一样，此故障将作为给定工件的状态持续 24 小时。

要覆盖 Maven 的 24 小时政策，您不必核对本地存储库。您只需将 -U 标志传递给它，这会导致它“更新”所有本地工件状态，即它将出去并重新检查远程存储库中的所有内容（除了成功解决的发布工件 - 发布应该是永久性的）它知道关于。

所以，试试：

```
mvn -U install 
```

不是，

```
rm -Rf .m2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-17T10:27:11.983

在 Eclipse 中，右键单击您的项目名称，选择弹出菜单：**Maven->Update Project**。在下面的对话框中，勾选“ **Force Update of Snapshots/Releases** ”，点击“OK”。然后maven会重新下载需要的依赖。无论如何，这解决了我的问题。[![强制性升级](../Images/d568115f9541ed725f75fc7c076eae92.png)](https://i.stack.imgur.com/sogho.png)

# visual-studio-2010 - 我可以在 Microsoft Visual Studio 2010 中编译 .asm 文件吗？

> ID：14297652
> 
> 赞同：0
> 
> 时间：2013-01-12T20:28:53.690
> 
> 标签：visual-studio-2010, assembly

> **可能重复：**
> [在 Visual Studio 中编译程序集](https://stackoverflow.com/questions/4548763/compiling-assembly-in-visual-studio)

我可以在 Microsoft Visiual Studio 2010 中编译“.asm”文件/汇编语言程序吗？如果是，使用 Masm 还是 Microsoft Visual Studio 更好？

# wordpress - 为什么我的文字没有居中？（通过 WordPress 网站）

> ID：14297653
> 
> 赞同：0
> 
> 时间：2013-01-12T20:29:06.563
> 
> 标签：wordpress, text, alignment, footer

我一直在开发我的第一个 WordPress 网站（耶！），我正在使用新的 2012 主题。没有将小部件放在页脚中的选项，所以我添加了一个侧边栏，我的文本随机被推到一边。网站：[http ://www.rachelsilberman.com/dan-krokos/](http://www.rachelsilberman.com/dan-krokos/)

如果您在 Chrome 中查看它是居中的，但将页面缩小并缩放到右侧。我将文本放在一个名为 footer-name 的 div 中。我觉得有一个 float:left 发生在某个地方，或者覆盖页脚样式的东西。

我正在使用的 CSS

```
footer[role="contentinfo"] {
border-top: 1px solid #ededed;
clear: both;
font-size: 12px;
font-size: 0.857142857rem;
line-height: 2;
max-width: 960px;
max-width: 68.571428571rem;
margin-top: 24px;
margin-top: 1.714285714rem;
margin-left: auto;
margin-right: auto;
padding: 24px 0;
padding: 1.714285714rem 0;
background-color: #E3E3E3;
}
footer[role="contentinfo"] a {
color: #686868;
}
footer[role="contentinfo"] a:hover {
color: #55abe8;
}

#footer-name{
 display: block;
 margin-left: auto;
 margin-right: auto;
 background-color: aqua;
}

#footer-sidebar {
 display:block;
 height: 30px;
}

#footer-sidebar1 {
  width: 300px;
  margin-left: auto;
  margin-right: auto;
} 
```

我将 div 包裹在其中的页脚（通过 footer.php）

```
<div id="footer-name">
        <a href="<?php echo esc_url( __( 'http://rachelsilberman.com/', 'twentytwelve' ) ); ?>" title="<?php esc_attr_e( 'Semantic Personal Publishing Platform', 'twentytwelve' ); ?>"><?php printf( __( 'Website created by %s', 'twentytwelve' ), 'Rachel Silberman' ); ?></a>
        </div> 
```

以及我用来制作位于functions.php 中的额外侧边栏的代码。

```
register_sidebar( array(
    'name' => __( 'Footer', 'twentytwelve' ),
    'id' => 'sidebar-2',
    'description' => __( 'Appears on footer', 'twentytwelve' ),
    'before_widget' => '<aside id="%1$s" class="widget %2$s">',
    'after_widget' => '</aside>',
    'before_title' => '<h3>',
    'after_title' => '</h3>',
) ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:47:32.823

如果您希望页脚文本居中，您可以试试这个

```
div#footer-name {
    background-color: aqua;
    display: block;
    margin-left: auto;
    margin-right: auto;
    text-align: center; // added this line
} 
```

# image - 套接字 - 发送图像

> ID：14297657
> 
> 赞同：0
> 
> 时间：2013-01-12T20:29:18.933
> 
> 标签：image, sockets

```
fp = fopen("image.jpg","rb");
if (!fp)
    exit(1);
fseek(fp,0,SEEK_END); 
len = ftell(fp);
fseek(fp,0,SEEK_SET); 
buf = (char *)malloc(len);
fread(buf,len,1,fp);
fclose(fp);

if (WSAStartup(0x0202,&wsa) != 0)
{
    printf("Error code : %d",WSAGetLastError());
    return 1;
}

if((s = socket(AF_INET , SOCK_STREAM , 0 )) == INVALID_SOCKET)
{
    printf("Error code : %d" , WSAGetLastError());
    WSACleanup();
    exit(1);
}

server.sin_family = AF_INET;
server.sin_addr.s_addr = INADDR_ANY;
server.sin_port = htons( 8888 );

if( bind(s ,(struct sockaddr *)&server , sizeof(server)) == SOCKET_ERROR)
{
    printf("Error code : %d" , WSAGetLastError());
    closesocket(s);
    WSACleanup();
    exit(EXIT_FAILURE);
}

sprintf(str,"%d",len);
strcpy(message,"HTTP/1.1 200 OK\r\nContent-Length: ");
sprintf(message,"%s %s",message,str);
sprintf(message,"%s %s",message,"\r\nContent-Type: image/jpeg\r\n\r\n");
sprintf(message,"%s %s",message,buf);
sprintf(message,"%s %s",message,"\r\n");

listen(s , 100);

c = sizeof(struct sockaddr_in);

while( (new_socket = accept(s , (struct sockaddr *)&client, &c)) != INVALID_SOCKET )
{
    memset(recvdata,'\0',sizeof(recvdata));
    recv(new_socket,recvdata,2000,0);

    send(new_socket , message , strlen(message) , 0);
}

if (new_socket == INVALID_SOCKET)
{
    printf("Error code : %d" , WSAGetLastError());
    closesocket(s);
    WSACleanup();
    return 1;
}
closesocket(s);
WSACleanup();
return 0; 
```

}

我在发送图像文件时遇到问题。这是通信的服务器端，浏览器将是客户端。当我尝试连接到服务器时，服务器接受连接并且一切正常。然后我想发送图像作为响应，它应该显示在浏览器中。谁能告诉我这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:38:39.240

很多问题。刚开始：

*   您没有检查系统调用（`listen()`、`recv()`、`send()`等）的返回值，因此您不知道错误以及您发送或接收了多少数据。
*   从图像文件中打印二进制数据`printf()`是一个 Bad Idea ^(TM) - 它将在第一个零字节处被截断，或者它可能会因缺少此类而超出您的内存。
*   您假设`recv()`使用来自客户端的完整 HTTP 请求。它可能不会，所以你正在破坏 HTTP 协议。
*   您没有在循环中关闭连接的客户端套接字。那是资源泄漏。

# c# - 无法转换类型的对象...将标签转换为双变量

> ID：14297661
> 
> 赞同：1
> 
> 时间：2013-01-12T20:29:31.630
> 
> 标签：c#, .net, casting, type-conversion, typeconverter

嗨，在这段代码中，我试图将双精度从标签转换为变量，但我遇到了异常

> “无法将‘System.Windows.Forms.Label’类型的对象转换为‘System.IConvertible’类型。”

在该`"convert.toDouble(lblPricekey);"`地区，我不知道为什么。

```
 private void btnAddtoTotal_Click(object sender, EventArgs e)
    {
        double numPadTotal;
        numPadTotal = Convert.ToDouble(lblPricekey.Text);

        double finalTotal = total + numPadTotal;
        txtTotal.Text = finalTotal.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T20:31:15.823

您正在转换`Label`为`double`. 你应该转换`Label.Text`.

```
numPadTotal = Convert.ToDouble(lblPricekey.Text); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T20:31:01.270

尝试：

```
private void btnAddtoTotal_Click(object sender, EventArgs e)
{
    double numPadTotal = Convert.ToDouble(lblPricekey.Text);

    double finalTotal = total + numPadTotal;
    txtTotal.Text = finalTotal.ToString();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T20:31:17.350

`lblPricekey`是 的一种`label`。您无法将其转换为`double`. 使用`Text`属性进行转换。它代表`string`. 从 看*[`MSDN`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.label.text.aspx)*。

> 获取或设置 Label 控件的文本内容。

试试这样；

```
numPadTotal = Convert.ToDouble(lblPricekey.Text); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T20:37:36.877

最好的方法是使用[TryParse 方法](http://msdn.microsoft.com/en-us/library/system.double.tryparse.aspx)

```
 double numPadTotal;
            var IsDouble = double.TryParse(lblPricekey.Text, out numPadTotal);
            if (IsDouble)
            {
                double finalTotal = total + numPadTotal;
                txtTotal.Text = finalTotal.ToString();
            } 
```

# php - get_post_meta 带有简码的数据，这可能吗

> ID：14297667
> 
> 赞同：2
> 
> 时间：2013-01-12T20:29:52.210
> 
> 标签：php, wordpress, function

问题是关于 Wordpress 自定义元字段。**如果我的元字段中有一些东西，我想在我想要的single.php**上显示我的元值。我认为使用短代码是可能的。

```
function themedemocode($atts,$content = null ) {
return 'What should i do for displaying my meta values ?'; 
}
add_shortcode('demo', 'themedemocode'); 
```

我的元字段 ID 是； **ThemeDemoUrl**和**ThemeDownloadUrl**？

**- 解决了 -**

```
function examplewpkeep($atts, $content = null ) {
     global $post;
     $custom_content = get_post_custom($post->ID);
     if (isset($custom_content["UygulamaDemo"])) {
        $meta_content = $custom_content["UygulamaDemo"][0];
     }
     if (isset($custom_content["UygulamaKaynak"])) {
        $meta_content = $custom_content["UygulamaKaynak"][0];
     }
     $meta_content  = '<p style="text-align:center;width:600px;"><a class="informational-link" style="color:#fff;text-decoration:none;margin-right:20px;" href="http://www.fatihtoprak.com/git/'.$custom_content["UygulamaDemo"][0].'" target="_blank" />Önizleme.</a><a class="website-link" style="color:#fff;text-decoration:none;" href="http://www.fatihtoprak.com/git/'.$custom_content["UygulamaKaynak"][0].'" target="_blank" />Dosyaları indir.</a></p>';

     return $meta_content;
}
add_shortcode('kaynak', 'examplewpkeep'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T20:54:43.970

未经测试，但这样的事情应该可以工作：

```
function themedemocode($atts, $content = null ) {
     global $post;
     $meta_content = '';
     $custom_content = get_post_custom($post->ID);
     if (isset($custom_content["ThemeDemoUrl"])) {
        $meta_content .= $custom_content["ThemeDemoUrl"][0];
     }
     if (isset($custom_content["ThemeDownloadUrl "])) {
        $meta_content .= $custom_content["ThemeDownloadUrl"][0];
     }
     return $meta_content;
} 
```

当然，您可以像下面这样包装您的元内容，以对其应用一些 html / 样式

```
$meta_content .= '<p>' . $custom_content["someKey"][0] . '</p>'. 
```

# redis - 将一个 redis 排序集复制到一个集合中

> ID：14297671
> 
> 赞同：5
> 
> 时间：2013-01-12T20:30:28.727
> 
> 标签：redis

如何将redis中的排序集复制到常规的未排序集？有没有可以做到这一点的redis命令？我可以手动遍历排序集并手动插入未排序集，但似乎有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T23:45:56.167

我认为没有任何命令可以直接执行此操作。

但是您可以编写简单的 lua 脚本在服务器上执行此操作，而不是将已排序的集合内容下载到客户端，然后将其推送回新集合。

Redis 命令：

```
SCRIPT LOAD "for i,v in ipairs(redis.call('zrange', KEYS[1], 0, -1)) do redis.call('sadd', KEYS[2], v) end"
ZADD zset 1 first
ZADD zset 2 second
ZADD zset 3 third
EVALSHA dd1c22a22108d758b93c26eb92d1ef2933cec314 2 zset set
SMEMBERS set 
```

结果：

```
"dd1c22a22108d758b93c26eb92d1ef2933cec314"
(integer) 0
(integer) 0
(integer) 0
(nil)
1) "second"
2) "first"
3) "third" 
```

SCRIPT LOAD 定义脚本并返回其 sha 哈希值 EVALSHA，然后执行。参数为 2 表示后面有 2 个键名，第一个被排序设置为复制自，第二个被设置为复制到。

# android - Android背景选择器按下状态一次显示在所有项目上

> ID：14297673
> 
> 赞同：1
> 
> 时间：2013-01-12T20:30:39.783
> 
> 标签：android, android-layout, android-drawable

我已经设置了一个背景可绘制选择器，以便在按下时突出显示列表项的背景（类似于我之前多次完成它的方式，除了在代码中分配了可绘制对象）。首先，我将向您展示问题，然后将我的代码放在底部。如果有人能帮我解决这个问题，我将不胜感激！

这里屏幕正在等待输入：

![等待输入](../Images/8a0b05bd2dd2d351423dae36cedba3d8.png)

在这里，我按下并按住一个项目。如果我将手指滑离屏幕而不抬起某个项目，它仍然是这样的：

![在此处输入图像描述](../Images/77f1145bb8dd806d3aa3defb6ba9001d.png)

如果我按住然后向上滑动以滚动列表，则进入视图的项目不会显示按下的颜色：

![在此处输入图像描述](../Images/e10cf4591b0cf2c7ca242264ff8d0316.png)

这是相关的 XML。我在这里设置了可绘制背景，但它确实是在代码中设置的，所以它是多余的。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="@dimen/thumbnail_size"
    android:background="@drawable/white_button_background">
...
</Relative... 
```

这是可绘制的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:drawable="@color/stitcher_holo_blue_light" android:state_pressed="true"/>
     <item android:drawable="@android:color/white"/>

 </selector> 
```

这是在数组适配器中设置背景选择器的代码：

```
public MyArrayAdapter(...) {
    super(...);
    mItemBackground = mResources.getDrawable(R.drawable.mybuttonselector);
}

public View getView(..., View convertView, ...) {
    ...
    convertView.setBackgroundDrawable(mItemBackground);//I also tried setBackground()
    ...
} 
```

任何想法，将不胜感激！

# java - 计算汉明权重，在 Java 中也称为 popcount？

> ID：14297674
> 
> 赞同：5
> 
> 时间：2013-01-12T20:30:40.423
> 
> 标签：java, c++, nlp, computer-vision, porting

我不确定如何将它从 C++ 翻译成 Java。它是一个计算汉明权重的函数。

```
/** This is popcount_3() from:
 * http://en.wikipedia.org/wiki/Hamming_weight */
unsigned int popcnt32(uint32_t n) const
{
    n -= ((n >> 1) & 0x55555555);
    n = (n & 0x33333333) + ((n >> 2) & 0x33333333);
    return (((n + (n >> 4))& 0xF0F0F0F)* 0x1010101) >> 24;
} 
```

更具体地说，我不知道用什么来代替 uint32_t，如果我使用该类型，不管它是什么，我可以保持其余代码不变吗？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-12T20:36:54.690

它是为您实施的`Integer.bitCount(int i)`

# java - 将我的 Java Slick 游戏放到网站上

> ID：14297678
> 
> 赞同：2
> 
> 时间：2013-01-12T20:31:07.833
> 
> 标签：java, html, applet, slick2d

我使用基于状态的游戏在 Java 中制作了一个 GUI，因为它扩展`StateBasedGame`而不是`JApplet`真正的小程序，我想把它放在一个网站上并且不确定如何做到这一点，我被告知以下代码允许我使用 html 将其制作成一个小程序，而不必编辑 Java 代码：

```
<applet code="org.lwjgl.util.applet.AppletLoader" 
        archive="org.lwjgl.util.applet.AppletLoader" 
        codebase="." 
        width="640" height="480">

  <param name="al_title" value="Ham Blaster"> 
  <param name="al_main" value="org.newdawn.slick.AppletGameContainer"> 
  <param name="game" value="org.javagame.Game">

  <param name="al_jars" value="racegame.jar, lwjgl.jar, slick.jar"> 

  <param name="al_windows" value="windows_natives.jar"> 
  <param name="al_linux" value="linux_natives.jar"> 
  <param name="al_mac" value="macosx_natives.jar"> 

  <param name="separate_jvm" value="true"> 
</applet> 
```

当我运行 html 代码时，我的屏幕中心出现以下错误：

```
An error occurred while loading the applet. Please contact support to resolve this issue. missing required applet parameter: al_main. 
```

我已经在 slick 里面查看了，`ApplerGameContainer`但我只能找到 chrome 文件，我尝试将它们放在与 html 文件相同的目录中，但我仍然得到同样的错误。

如果某些事情看起来很简单并且似乎太明显而无法问我，请告诉我，因为我是 Java 新手，我之前使用此代码的错误是因为我的 html 和 lwjgl_util_applet.jar 不在同一个目录中，所以请告诉我我**有任何**可能对我有帮助的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T06:53:55.913

嗯...

我不太确定，但根据[消息来源](http://www.smartwerkz.com/svn/public/projects/LWJGL/lwjgl-2.2.1/src/java/org/lwjgl/util/applet/AppletLoader.java) ，错误来自 init 方法

```
/*
     * @see java.applet.Applet#init()
     */
    public void init() {
        state = STATE_INIT;

        // sanity check
        String[] requiredArgs = {"al_main", "al_logo", "al_progressbar", "al_jars"};
        for(int i=0; i<requiredArgs.length; i++) {
            if(getParameter(requiredArgs[i]) == null) {
                fatalErrorOccured("missing required applet parameter: " + requiredArgs[i], null);
                return;             
                }

//...           }       
        } 
```

所以看起来你的**al_main**参数值是***null***什么的：S

问题可能出在某个地方

```
<param name="al_main" value="org.newdawn.slick.AppletGameContainer"> 
```

...*也许*是因为我看不到您将所有其余所需的参数初始化为`"al_logo", "al_progressbar"`

无论如何，显示问题代码会更有帮助

* * *

报告是否有帮助

# android - ViewPager 为所有页面显示相同的 ListFragments

> ID：14297689
> 
> 赞同：1
> 
> 时间：2013-01-12T20:33:00.780
> 
> 标签：android, android-viewpager, android-listfragment

我正在尝试使用 FragmentPagerAdapter 将 ListFragment 与 ViewPager 一起使用。寻呼机由 ListFragment 的两个实例组成。ViewPager 控件有效并允许我在片段之间滑动，但是两个页面中出现相同的 ListFragment。ViewPager 的 getItem() 方法似乎创建了 ListFragment 的两个不同实例，但它只为两个页面显示它的第二个实例。这是一个代码：

```
// FragmentPagerAdapter
private static class MyFragmentPagerAdapter extends FragmentPagerAdapter {      
    public MyFragmentPagerAdapter(FragmentManager fm)   {
        super(fm);
    }

    @Override
    public Fragment getItem(int index) {
        Log.i("Page: ", index + "");
        return PageFragment.newInstance(pages.get(index));
        // pages is an ArrayList<ArrayList<Restaurant>> pages
    }

    @Override
    public int getCount() {
        return numberOfPages;
    }
}

// ListFragment
public class PageFragment extends ListFragment {

    private static ArrayList<Restaurant> restaurantsList;

    public static PageFragment newInstance(ArrayList<Restaurant> restaurantsList) {
        PageFragment pageFragment = new PageFragment();
        pageFragment.setRestaurantsList(restaurantsList);
        return pageFragment;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)   {
    View view = inflater.inflate(R.layout.fragment, container, false);      
    setListAdapter(new RestaurantArrayAdapter(getActivity().getBaseContext(), getRestaurantsList()) );
    return view;
    }

    private void setRestaurantsList(ArrayList<Restaurant> list)
    {
        restaurantsList = list;
    }

    private ArrayList<Restaurant> getRestaurantsList()
    {
        return this.restaurantsList;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:49:38.090

好吧，伙计，问题是您已将数组成员声明为“静态”，

`private static ArrayList<Restaurant> restaurantsList;`

失去静电，你应该没事。

# django - Django：安全中间件使网站崩溃

> ID：14297691
> 
> 赞同：3
> 
> 时间：2013-01-12T20:33:44.337
> 
> 标签：django, ssl, nginx, django-settings, django-middleware

在生产中，我一直在尝试将 djangosecure.middleware.SecurityMiddleware（来自[http://pypi.python.org/pypi/django-secure](http://pypi.python.org/pypi/django-secure)to) ）添加到我的设置中，但没有任何运气让它工作。

当我运行时：

```
./manage.py checksecure 
```

一切都非常顺利。但我无法加载网站。它给了我以下错误：

```
The webpage has resulted in too many redirects. Clearing your cookies for this site or 
allowing third-party cookies may fix the problem. If not, it is possibly a server 
configuration issue and not a problem with your computer. 
```

在本地，当我使用生产设置时，我收到一个页面错误：

```
Unable to make a secure connection to the server. This may be a problem with the server,
or it may be requiring a client authentication certificate that you don't have. 
```

然后我的终端充满了我无法破译的奇怪错误：

```
[12/Jan/2013 14:15:25] code 400, message Bad HTTP/0.9 request type    
('\x16\x03\x01\x00\x98\x01\x00\x00\x94\x03\x02P\xf1\xc4]\x97e\xdd\xdc\xa9\xeb\x0e\xfc\xbb\xfa3 ')
[12/Jan/2013 14:15:25] "??P??]?e?ܩ????3 Ʀ?-?:?.E:?o?FH?" 400 -
[12/Jan/2013 14:15:25] code 400, message Bad request syntax     ('\x16\x03\x01\x00\x98\x01\x00\x00\x94\x03\x02P\xf1\xc4]M\xeeA50\xfc\x15%\xc1\xa4\x02\xec\xf0\x1fO')
[12/Jan/2013 14:15:25] "??P??]M?A50?%????O" 400 -
[12/Jan/2013 14:15:25] code 400, message Bad request syntax ('\x16\x03\x01\x00\x98\x01\x00\x00\x94\x03\x01P\xf1\xc4]\x8eg\xbey\x155\xafiP5\x85r\xb4|\x8c\x 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-28T15:41:11.577

Infinite-redirects 意味着您已将[SECURE_SSL_REDIRECT](http://django-secure.readthedocs.org/en/v0.1.2/settings.html#secure-ssl-redirect)设置为`True`，但在生产中，您的站点在 SSL 剥离代理服务器后面运行，因此 Django 无法判断该请求实际上已经是 SSL，因此它会不断尝试重定向到 SSL。如链接文档中所述，您需要确定代理设置的标头以指示外部 SSL 请求，并相应地设置[SECURE_PROXY_SSL_HEADER](http://django-secure.readthedocs.org/en/v0.1.2/settings.html#secure-proxy-ssl-header)设置。

在本地使用生产设置将不起作用，因为 Django 的开发服务器不支持 SSL。奇怪的终端输出是您的浏览器试图与不理解 SSL 的服务器进行 SSL 握手。

# java - 部署时出现无法解释的 Tomcat LifeCycleException

> ID：14297696
> 
> 赞同：0
> 
> 时间：2013-01-12T20:34:13.137
> 
> 标签：java, tomcat, servlets

尝试在 Tomcat 中部署我的 webapp 时收到此错误消息：

```
FAIL - Application at context path /skynet could not be started
FAIL - Encountered exception org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/skynet]] 
```

自然，我做的第一件事是检查`log/catalina.out`（正如该网站上的其他各种页面所说），但那里绝对没有信息（但日志没有损坏，其他应用程序有很多输出）。

首先，我认为问题可能是我显然编译为 Java 7，但在 Java 6 上运行它，但修复编译后问题仍然存在。

**环境：**

雄猫 7.0.26

```
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.5) (6b24-1.11.5-0ubuntu1~12.04.1)
OpenJDK Client VM (build 20.0-b12, mixed mode, sharing) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:44:37.640

> 首先，我认为问题可能是我显然编译为 Java 7，但在 Java 6 上运行它，但修复编译后问题仍然存在。

这毕竟是问题所在。修复编译设置时失败。现在我真的修复了它们，应用程序启动了。

不过，为什么没有记录？

# offset - 这次我怎么能得到kafka服务器的偏移量？

> ID：14297700
> 
> 赞同：0
> 
> 时间：2013-01-12T20:34:53.663
> 
> 标签：offset

我已经保留了我的 kafka 客户端偏移量，但是 kafka 服务器在时间增量中删除了数据。

所以当我调用 kafka 服务器获取数据时，我什么也得不到。

这次我怎么能得到kafka服务器的偏移量？

我只想从现在开始获取数据

我有保存我的卡夫卡客户端还有，但卡夫卡服务器会在之后删除数据。</p>

因此，当我向卡夫卡服务器要数据时，我不能得到任何东西。</p>

我怎么能得到卡夫卡服务器现在的偏移量？

我只是想从现在开始获取数据</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T09:22:45.287

SimpleConsumer.getOffsetsBefore（主题，分区，时间，1）

时间应该是 kafka.api.OffsetRequest.EarliestTime() ，得到最小的有效偏移量

# sqlite - 内存数据库中 SQLite3 的大小

> ID：14297704
> 
> 赞同：1
> 
> 时间：2013-01-12T20:35:26.343
> 
> 标签：sqlite, in-memory

我在内存数据库中有一个 SQLite3：

```
sqlite3* database;
sqlite3_open(":memory:", &database); 
```

是否可以在内存中获取数据库的确切大小？

我需要将数据库发送给客户端而不将其保存在磁盘上，并且必须告诉他大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:48:03.360

使用`pragma page_count`（乘以`pragma page_size`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:32:47.743

您可以为此使用 sqlite3_memory_used()。

> sqlite3_memory_used() 例程返回当前未完成的内存字节数（分配但未释放）。

[http://www.sqlite.org/c3ref/memory_highwater.html](http://www.sqlite.org/c3ref/memory_highwater.html)

# jquery - 当使用带有 MVC4 的 jQuery UI 小部件时，验证的最佳方法是什么？

> ID：14297707
> 
> 赞同：0
> 
> 时间：2013-01-12T20:35:58.403
> 
> 标签：jquery, asp.net-mvc, jquery-ui, validation

以前在编写 MVC 应用程序时，我避免对 DatePickers 等使用 jQuery UI 小部件，因为它们似乎需要手动客户端验证，而 MVC Helpers（我使用 DevExpress）使用 DataAnnotations 信息进行客户端验证，无需额外编码。

我越来越想在 MVC 控件中添加一些 jQuery UI 小部件，以为我的客户提供更丰富的客户端体验，但我不想为 jQuery UI 小部件编写额外的验证代码。

是否有可用的解决方案或技术允许 MVC Helper 和 jQuery UI 小部件以 jQuery UI 小部件使用 DataAnnotations 进行验证而无需编写额外的客户端验证代码的形式共存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:14:53.880

jQuery 小部件中没有验证。它们只是在不显眼地增强标准 HTML 控件，例如输入字段或下拉菜单。而且因为这些字段应该绑定到服务器端视图模型，所以您可以完美地使用验证属性装饰您的视图模型，并在服务器端完成所有验证。jQuery UI 根本不会成为障碍。

# java - 如何将字符串值转换为指针 （Java，JNAerator）？

> ID：14297709
> 
> 赞同：3
> 
> 时间：2013-01-12T20:36:32.133
> 
> 标签：java, jnaerator

我已经使用 JNAerator 将 .dll 库转换为 JAR。现在我需要调用如下所示的 OpenTCPIPPort_V 方法： `public static short OpenTCPIPPort_V(Pointer<Byte > tcpPort, Pointer<Byte > IPAddr)`

如何将两个字符串值传递给此方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T08:23:15.800

我找到了解决方案。这是方法`Pointer<Byte> org.bridj.Pointer.pointerToCString(String string)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:18:59.357

我尝试了 Tekvisa DLL（用于控制 Tektronix 测量仪器的 DLL）的 pointerToCString，它无法打开仪器会话。该线程中的第二个答案更好，但遗漏了一个细节：字节数组必须以 0 结尾。我的代码如下。（仪器变量是字符串类型，包含仪器字符串，例如“TCPIP::::INSTR”。）

有趣的是，pointerToCString 在向仪器发送命令时起作用，例如 viWrite("*IDN?")。

```
 Pointer<Byte> pViString = Pointer.allocateBytes(instrument.length() + 1);
  byte[] instrumentBytes = instrument.getBytes();
  pViString.setBytes(instrumentBytes);
  pViString.setByteAtIndex(instrument.length(), (byte) 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T20:45:36.410

String 类中有一个名为 getBytes 的函数。这是一个例子：

```
String example = "example, string";
byte[] bytes = example.getBytes(); 
```

您现在需要将这些 byte[] 值放入您的指针中。我想你现在可以应付了。

# sql - 向记录中添加多个国家

> ID：14297711
> 
> 赞同：0
> 
> 时间：2013-01-12T20:36:41.210
> 
> 标签：sql, ruby-on-rails-3, postgresql, database-design, postgresql-9.2

我正在创建一个可以列出企业的应用程序，我还想添加一个设施，他们可以在其中指定他们出口到的国家/地区。因此，当用户搜索其国家/地区的企业列表时，他们不仅会看到位于其国家/地区的企业，还会看到其他国家/地区的企业也可能将其服务出口到其国家/地区。

到目前为止，这是我的想法-有更好的解决方案吗？我正在使用 Rails 3.2 和 Postgres。

*   国家模型，包含 id、name、slug 等字段
*   列表模型，有一个 Postgres 数组字段，用于存储该企业出口到的国家/地区 ID

然后，当我显示某个国家/地区的列表时，我可以在 country_export 数组中搜索也具有该国家/地区 ID 的企业。

但这是最有效的方法吗？（我会使用 postgres_ext gem 来启用 pg 数组支持：[https](https://github.com/dockyard/postgres_ext) ://github.com/dockyard/postgres_ext ）

我能想到的另一个选项是列表模型上的复选框，因此企业可以说明他们是否出口到全球、欧盟、亚洲等。然后将它们添加为国家模型中的布尔字段。这样做的缺点是它不会像具体说明国家那样准确......但如果这是一种更有效的方式，我不介意妥协。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:51:16.647

这是两个表和之间的经典**n:m 关系**，通常由引用这些表的两个主键的表（如 ）实现。`company``country``company_country`

在这些密切相关的问题下查看完整的代码示例：
[如何在 PostgreSQL 中实现多对多关系？](https://stackoverflow.com/questions/9789736/how-to-implement-a-many-to-many-relationship-in-postgresql)
[多对多关系过滤器](https://stackoverflow.com/questions/13253420/many-to-many-relation-filter)

对于某个国家/地区的公司列表，您的查询将是：

```
SELECT c.*
FROM   company_country cc
JOIN   company c USING (company_id)
WHERE  cc.country_id = ? 
```

关系数据库基础，SQL基础。使用适当的索引，这比处理数组要快得多*。*

# javascript - 我有某种 jquery 冲突或问题

> ID：14297713
> 
> 赞同：0
> 
> 时间：2013-01-12T20:36:56.253
> 
> 标签：javascript, jquery, magento

如果您查看此页面`http://50.87.6.244/~storeupp/index.php/basketball/lebron-james-dwyane-wade-dual-signed-basketball.html`，您会注意到除了页脚中的小红色箭头之外，一切都很好。假设这个箭头会扩展一个额外的页脚区域。这工作正常，直到我添加了 infortis cloudzoon 脚本，这些脚本是：

```
http://50.87.6.244/~storeupp/js/infortis/jquery/jquery-1.7.1.min.js
http://50.87.6.244/~storeupp/js/infortis/jquery/jquery-noconflict.js
http://50.87.6.244/~storeupp/js/infortis/jquery/plugins/cloud-zoom.1.0.2.min.js 
```

cloudzoon 是悬停时使产品图像变大的原因。我还在源文件中看到有第二个 cloudzoom 脚本和一个不同版本的 jquery 被首先调用。我不确定这里的确切问题是什么以及如何解决它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:55:43.127

您两次引用 jQuery 库：第一次出现引用 1.6.2 版本：然后，在依赖于 jQuery 的几个 js 文件之后，您添加为 1.7.1 版本 `<script type="text/javascript" src="http://50.87.6.244/~storeupp/js/etheme/dresscode/jquery-1.6.2.min.js"></script>`添加另一个元素： 尝试用 1.7 替换 1.6.2 脚本元素.1`script``<script type="text/javascript" src="http://50.87.6.244/~storeupp/js/infortis/jquery/jquery-1.7.1.min.js"></script>`

# matplotlib - Matplotlib：不要在图例中显示错误栏

> ID：14297714
> 
> 赞同：25
> 
> 时间：2013-01-12T20:36:57.060
> 
> 标签：matplotlib

我正在绘制一系列带有 x 和 y 错误的数据点，但不希望错误栏包含在图例中（仅标记）。有没有办法这样做？

![如何避免图例中的错误栏？](../Images/2c46c7f504a2c2644160a29121b7697b.png)

例子：

```
import matplotlib.pyplot as plt
import numpy as np
subs=['one','two','three']
x=[1,2,3]
y=[1,2,3]
yerr=[2,3,1]
xerr=[0.5,1,1]
fig,(ax1)=plt.subplots(1,1)
for i in np.arange(len(x)):
    ax1.errorbar(x[i],y[i],yerr=yerr[i],xerr=xerr[i],label=subs[i],ecolor='black',marker='o',ls='')
ax1.legend(loc='upper left', numpoints=1)
fig.savefig('test.pdf', bbox_inches=0) 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-21T15:41:51.433

您可以修改图例处理程序。请参阅[matplotlib 的图例指南](http://matplotlib.org/users/legend_guide.html)。调整你的例子，这可能是：

```
import matplotlib.pyplot as plt
import numpy as np

subs=['one','two','three']
x=[1,2,3]
y=[1,2,3]
yerr=[2,3,1]
xerr=[0.5,1,1]
fig,(ax1)=plt.subplots(1,1)

for i in np.arange(len(x)):
    ax1.errorbar(x[i],y[i],yerr=yerr[i],xerr=xerr[i],label=subs[i],ecolor='black',marker='o',ls='')

# get handles
handles, labels = ax1.get_legend_handles_labels()
# remove the errorbars
handles = [h[0] for h in handles]
# use them in the legend
ax1.legend(handles, labels, loc='upper left',numpoints=1)

plt.show() 
```

这产生

![输出图像](../Images/9c5006bbbe4adb931e5057d8deb1a65b.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T21:49:44.190

这是一个丑陋的补丁：

```
pp = []
colors = ['r', 'b', 'g']
for i, (y, yerr) in enumerate(zip(ys, yerrs)):
    p = plt.plot(x, y, '-', color='%s' % colors[i])
    pp.append(p[0])
    plt.errorbar(x, y, yerr, color='%s' % colors[i])  
plt.legend(pp, labels, numpoints=1) 
```

下面是一个例子：

![在此处输入图像描述](../Images/b18ce1166744ce6b672246c5ce7bcc39.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-23T11:22:03.377

公认的解决方案在简单的情况下有效，但在一般情况下无效。特别是，它在我自己更复杂的情况下不起作用。

我找到了一个更强大的解决方案，它可以测试`ErrorbarContainer`，它确实对我有用。它是由[Stuart WD Grieve](https://swdg.io/2015/errorbar-legends/)提出的，为了完整起见，我在这里复制它

```
import matplotlib.pyplot as plt
from matplotlib import container

label = ['one', 'two', 'three']
color = ['red', 'blue', 'green']
x = [1, 2, 3]
y = [1, 2, 3]
yerr = [2, 3, 1]
xerr = [0.5, 1, 1]

fig, (ax1) = plt.subplots(1, 1)

for i in range(len(x)):
    ax1.errorbar(x[i], y[i], yerr=yerr[i], xerr=xerr[i], label=label[i], color=color[i], ecolor='black', marker='o', ls='')

handles, labels = ax1.get_legend_handles_labels()
handles = [h[0] if isinstance(h, container.ErrorbarContainer) else h for h in handles]

ax1.legend(handles, labels)

plt.show() 
```

它产生以下图（在 Matplotlib 3.1 上）

[![在此处输入图像描述](../Images/9c7363c31b1edb4049154a73f947a069.png)](https://i.stack.imgur.com/1nGCv.png)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-05-17T22:31:43.100

如果我将 label 参数设置为 None 类型，我会为我工作。

```
plt.errorbar(x, y, yerr, label=None) 
```

# java - 保护 servlet 中的图像等资源

> ID：14297717
> 
> 赞同：0
> 
> 时间：2013-01-12T20:37:17.393
> 
> 标签：java, tomcat, servlets

假设您有一张图像 I，您只希望登录到您网站的用户能够看到它。保护我免受未登录用户的最佳方法是什么。一种可能的方法是创建一个页面，您可以在其中通过 get 或 post 参数传递图像名称，它会通过从磁盘读取图像并根据用户是否登录到会话中写回响应来返回图像。是否/是否有更好的方法来更有效地实现资源安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:42:05.923

使用你的会话。当用户登录时，您将图像加载到您的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T20:49:44.533

有几种简单的方法可以使用[servlet 过滤器](http://docs.oracle.com/javaee/5/api/javax/servlet/Filter.html)或只是为您的资源提供服务的普通 servlet。

就我个人而言，我会检查主体是否已设置，那么您就知道用户已通过身份验证

```
 Principal principal = request.getUserPrincipal();
    if (principal == null) {
        return null;
    } 
```

如果没有您知道用户未通过身份验证的主体，您可以返回 403 状态、空白图像或您喜欢的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T16:23:51.353

如果您想保护图像文件的 url，请在代码中设置一些有关其访问权限的规则。我认为更好的选择是使用一些安全框架。有一些安全平台比如[Spring Security](http://static.springsource.org/spring-security/site/)提供了非常全面的基于用户认证状态、url-role 组合、acl 等的访问规则。

# ios - 无法使用 MPMoviePlayerController 从视频中获取多个图像。操作系统状态 -12433

> ID：14297726
> 
> 赞同：7
> 
> 时间：2013-01-12T20:38:20.693
> 
> 标签：ios, xcode, mpmovieplayercontroller, avfoundation

我正在尝试使用 MPMoviePlayerController 从选定的视频文件中提取多个图像。下面是我写的代码。

```
movie = [[MPMoviePlayerController alloc] initWithContentURL:[info  objectForKey:UIImagePickerControllerMediaURL]];

NSNumber *time1 = [NSNumber numberWithInt:1];
NSNumber *time2 = [NSNumber numberWithInt:3];
NSNumber *time3 = [NSNumber numberWithInt:5];

NSArray *times = [NSArray arrayWithObjects:time1,time2,time3,nil];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleThumbnailImageRequestFinishNotification:) name:MPMoviePlayerThumbnailImageRequestDidFinishNotification object:movie];

[movie requestThumbnailImagesAtTimes:times timeOption:MPMovieTimeOptionExact]; 
```

这是通知的处理程序

```
 -(void)handleThumbnailImageRequestFinishNotification:(NSNotification*)note
  {
     NSDictionary *userinfo = [note userInfo];
     NSError* value = [userinfo objectForKey:MPMoviePlayerThumbnailErrorKey];

     if (value!=nil)
     {
       NSLog(@"Error: %@", [value debugDescription]);
     }
     else
     {
       _imageView.image = [userinfo valueForKey:MPMoviePlayerThumbnailImageKey];
     }
  } 
```

但是我收到以下错误消息：

```
 Error: Error Domain=AVFoundationErrorDomain Code=-11800 "The operation could not be completed" UserInfo=0x1d8a63d0 {NSLocalizedDescription=The operation could not be completed, NSUnderlyingError=0x1d8b7b50 "The operation couldn’t be completed. (OSStatus error -12433.)", NSLocalizedFailureReason=An unknown error occurred (-12433)} 
```

有人知道 OSStatus Error -12433 的描述吗？我尝试搜索有关 OSStatus 错误代码的文档，但没有成功。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-26T00:25:46.893

我不得不将时间添加为浮点数，所以：

```
NSNumber *time1 = [NSNumber numberWithFloat:1.f]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:02:45.690

我使用库 iFrameExtractor [https://github.com/lajos/iFrameExtractor](https://github.com/lajos/iFrameExtractor)

希望这有助于祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:52:45.687

我得到了完全相同的错误`OSStatus -12433`，我正在使用`AVAssetImageGenerator`

原来我的问题是由我请求缩略图的时间引起的。以下是有效时间和出现错误的时间的示例。

```
CMTime timeGivesError = CMTimeMakeWithSeconds(0.0, 0.0);
CMTime timeWorks = CMTimeMakeWithSeconds(0.0, 1.0);
CGImageRef image = [gen copyCGImageAtTime:timeWorks actualTime:&actualTime error:&error]; 
```

我会尝试调整你的时间，看看是否有另一个可行的选择。

# sendmail - 如何伪装 Sendmail 域并使 DKIM 使用正确的域

> ID：14297727
> 
> 赞同：1
> 
> 时间：2013-01-12T20:38:21.743
> 
> 标签：sendmail, dkim

我有一个域，其中包含用于不同站点的十几个子域。每个在 apache 中都有一个单独的虚拟主机。

我将 sendmail 配置为伪装为顶级域，以便电子邮件始终来自顶级域而不是子域。

不幸的是，DKIM 标头 d= 和 i= 字段显示子域。由于 DNS 记录存储在顶级域中，因此 DKIM 检查失败。

我如何告诉 DKIM 使用顶级域？

帮助？- 吉姆

ps 我已经尝试了这方面的每一个角度，我很难过。我不知道 Sendmail 如何告诉 DKIM 使用哪个子域。而且我不知道 PHP 如何告诉 Sendmail 正在使用哪个子域。我尝试在发送邮件之前将 $_SERVER['SERVER_NAME'] 设置为覆盖它，但它没有效果。我想不出一个解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:54:03.927

问题源于重写标题及其在此处讨论： [https ://serverfault.com/questions/442180/sendmail-rewriting-headers-after-opendkim-signature](https://serverfault.com/questions/442180/sendmail-rewriting-headers-after-opendkim-signature)

建议的解决方案之一是在 PHP 中设置正确的标头，以便为 sendmail 提供正确的域信息并且不涉及重写。

就我而言，我意识到这意味着设置 $_SERVER['SERVER_NAME'] 是一个简单的解决方法。我曾提到它对我不起作用，因为我认为 Sendmail 忽略了价值。但我又试了一次，发现 Sendmail 确实识别出来自 $_SERVER['SERVER_NAME'] 的值。我之前没有意识到的问题是我的 DKIM 过滤器配置不正确。

在 dkim-filter.conf 中，我有一行：Domain *.mydomain.com

当 Sendmail 在标头信息中接收“mydomain.com”并调用 DKIM-Milter 时，DKIM 无法找到匹配项，因为“mydomain.com”显然与 *.mydomain.com 不匹配。我将 *.mydomain.com 更改为 mydomain.com，一切都开始工作了。

所以我在所有网站上要做的就是在调用 mail() 或 wp_mail() （对于 WordPress）之前设置 $_SERVER['SERVER_NAME'] = 'mydomain.com' 。然后一切正常。

# c# - 将实体框架架构与数据库进行比较

> ID：14297728
> 
> 赞同：0
> 
> 时间：2013-01-12T20:38:24.823
> 
> 标签：c#, sql, entity-framework

我找不到这个问题的答案。但是，如何从 EF（使用 5 atm）获取数据库模式？

我想将 EF 架构与`.mdf`文件的架构进行比较，看看它们是否兼容。

对于`.mdf`文件，我将其读入数据集，然后使用

```
string currentDsSchema = dsMan.DataSet.GetXmlSchema(); 
```

但是，不知道如何从 EF 中读取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:56:02.630

EF 模型文件与 xml 模式不兼容；他们有自己的格式。也许您应该从 EF 模式创建数据库并将生成的数据库与现有数据库进行比较。

# java - 停止空格键按键在 Eclipse 中触发自动完成

> ID：14297735
> 
> 赞同：90
> 
> 时间：2013-01-12T20:39:21.810
> 
> 标签：java, eclipse

[**更新**]

[这已在 Eclipse **2018-12**中修复。此行为仍然是默认行为，但可以配置为关闭 - 请参阅[接受的答案](https://stackoverflow.com/a/53876787/1082449)以了解如何]

[我将把这个问题留给后代，以及早期版本的 Eclipse]

* * *

在 Eclipse 中，我通过访问为 Java 启用了智能感知风格的建议

```
Window -> Preferences -> Java/Editor/Content Assist 
```

并设置以下

```
Auto activation delay (ms) -> 0
Auto activation triggers for Java -> .(abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ 
```

*来源 = [Eclipse 智能感知？](https://stackoverflow.com/questions/2943131/eclipse-intellisense)*

除了一个烦人的问题外，这非常有效。当我点击`spacebar`时，正在键入的令牌会自动完成，其中包含建议列表顶部的任何内容。很公平，除了有时我会输入一个完全合法匹配的类/变量名，但这*不会*作为最重要的建议出现。所以当我自然而然地点击`spacebar`Eclipse 时插入了一些完全错误的东西。

> **EG**打字后`Cookie`我会点击`spacebar`并获得`CookieMonster`。

这似乎是一个错误，并且经常发生以至于令人讨厌，但即使如此，**我通常也不想`spacebar`触发自动完成**。我可能想输入一个尚未声明的变量名，或类似的东西。我想使用自动完成作为辅助工具，但我的自然打字应该*始终*优先于它。

我想停止`spacebar`触发自动完成，或者退回到 using `enter`，或者更好地`custom`使用普通打字中未使用的键触发自动完成。**这有可能吗？**

我已经尝试过*Content Assist*中的所有设置，但无济于事。谷歌搜索这个问题只会返回一堆关于禁用自动完成功能的结果。

* * *

**此问题已从 Eclipse 2018-12 [4.10] 修复，**请参阅[已接受的答案](https://stackoverflow.com/a/53876787/1082449)

它存在于所有以前的版本中，即*2018-09* [4.9]、*Photon* [4.8]、*Oxygen* [4.7]、*Neon* [4.6] 等。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-10-26T07:24:10.473

[问题跟踪器上](https://bugs.eclipse.org/bugs/show_bug.cgi?id=348857#attach_236956)有一个解决方案。将[jar](https://bugs.eclipse.org/bugs/attachment.cgi?id=236956)复制到 eclipse/dropins 文件夹中。随着下一次重新启动，空间被禁用为自动完成触发器。

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=348857](https://bugs.eclipse.org/bugs/show_bug.cgi?id=348857)

**Eclipse 12-2018 及更新版本：**这是本机工作，检查 Pyves 答案。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2018-12-20T22:15:26.843

## Eclipse 2018-12 已经为此打了补丁！

[Bug 348857](https://bugs.eclipse.org/bugs/show_bug.cgi?id=348857)的补丁最近被合并到 Eclipse 项目中，并作为**Eclipse 2018-12**的一部分发布。[您可以在此处](https://www.eclipse.org/downloads/packages/release/2018-12/r)下载该版本。

您现在有一个新选项可以禁用除 之外的所有插入触发器`enter`，这将防止`spacebar`导致自动完成。

只需转到*Preferences...* -> *Java* -> *Editor* -> *Content Assist*（或*Window* -> *Preferences* -> *Java* -> *Editor* -> *Content Assist* on Windows）并选择***Disable insert triggers except 'Enter'***，如截图如下： [![禁用插入触发器首选项](../Images/355216f6ce67441ab6201346a94a07d1.png)](https://i.stack.imgur.com/48CQ1.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-02-20T05:19:00.200

使用 eclipse 的 SDK 版本

1.打开Plug-ins View，找到org.eclipse.jface.text，右键，选择import as Source Project。导入后，您可以在工作区中找到它。

2.在 src/org/eclipse/jface/text/contentassist/CompletionProposalPopup.java

```
char[] triggers = t.getTriggerCharacter();
if(contains(triggers,key)) 
```

改成

```
if(key!='='&&key!=0x20&&contains(triggers,key)) 
```

3.导出org.eclipse.jface.text

右键单击org.eclipse.jface.text的项目文件夹，选择export-->Deployable plugins and Fragments，下一步，destination选择archive file，完成。用您生成的替换 eclipse/plugins 中的那个。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-28T13:16:25.290

即使在 Indigo 中，空格键也是选择自动完成的关键。据我所知，这是无法配置的。事实上，这可能就是延迟存在的原因。

我建议将延迟设置为某个最佳值，使您可以`private void ...`舒适地键入内容，而不会触发`private`和的建议`void`。然后，如果您因为等待太久而收到建议，请按 Escape 中止 Content Assist。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-05T20:54:13.073

与 davnicwil 相同的配置，相同的问题，仍在 eclipse 4.4 上。

**解决方案**：在（编辑器窗口）eclipse上截取（挂钩）SHIFT + SPACE（按住）并将其替换为ESC，SPACE（序列）。现在你我决定

*   自动完成+空格：出现自动提示时按空格键
*   只是 SPACE：按预定义的组合键或序列（例如 SHIFT+SPACE）

在 windows 上你可以使用[http://www.heise.de/download/activaid.html](http://www.heise.de/download/activaid.html) (你也可以使用 AutoHotkey, java native hook, ...)

如何使用 ActivAid：

1.  打开 ActivAid，选择“UserHotkeys”
2.  点击“+”，设置描述
3.  单击“快捷方式”，按例如 SHIFT+SPACE
4.  命令：“{ESC}{SPACE}”（不带引号）
5.  单击“+”，选择eclipse编辑器框架，按ENTER
6.  单击确定，在 ActivAid 中确定

我的配置文件：activAid/settings/ac'tivAid.ini:[UserHotkeys]

```
Hotkey11=+Space
Path11=<Send>{ESC}{SPACE}
Description11=Eclipse Shift+Space -> Esc,Space
Category11=
Application11=ahk_class SWT_Window0 
```

您还可以使用“HotStrings”重新映射非英语键盘上的键，例如ö->{,ä->} 等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-01T08:54:00.143

终于搞定了。

尝试下载此[org.eclipse.jface.text.jar](http://goo.gl/SI5JyN)并将其复制到您的插件文件夹（通常为 eclipse/plugin）。不要忘记备份自己的。

适用于 Eclipse Juno。

如果链接失效，请评论，谢谢。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-08-28T13:06:03.160

在 Eclipse 中，转到 Window -> Preferences -> General -> Keys 并删除命令 Content Assist 的绑定。

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2013-01-14T17:48:33.127

您可以通过复选框禁用自动激活

```
Window -> Preferences -> Java/Editor/Content Assist 
```

并按需激活自动完成功能。默认的热键是

`CTRL`+`Space`

# ruby-on-rails - 我怎样才能为这个自定义方法做一个延迟的工作？

> ID：14297736
> 
> 赞同：1
> 
> 时间：2013-01-12T20:39:22.160
> 
> 标签：ruby-on-rails, postgresql, delayed-job

这是我的课程模型：

```
#encoding: utf-8

class Lesson < ActiveRecord::Base
    attr_accessible :content, :title, :parsed_content, :html_content, :user_id

    serialize :parsed_content, Array
    serialize :html_content, Array
    serialize :pinyin_content, Array
    serialize :defined_content, Array
    serialize :literal_content, Array

    validates :title, :presence => true
    validates :content, :presence => true

    belongs_to :user

    before_update do |lesson|
        lesson.makesandwich
    end

    before_save do |lesson|
        lesson.delay.makesandwich
    end

    def makesandwich

        require 'rmmseg'
                                                          #require 'to_lang'
        require 'bing_translator'
        require 'ruby-pinyin'

        self.parsed_content = []

        RMMSeg::Dictionary.load_dictionaries

        content               = self.content
        paragraphs            = content.split(/\r\n\r\n/) #convert to array of paragraphs
        self.parsed_content = paragraphs
        paragraphs.each_with_index do |text, ti|

            text = text.gsub("。", "^^.")
            text = text.gsub("？", "~~?")
            text = text.gsub("！", "||!")
            text = text.gsub(":", "：")  #fix missing colons

            text = text.split(/[.?!]/u) #convert to an array
            text.each do |s|
                s.gsub!("^^", "。")
                s.gsub!("~~", "？")
                s.gsub!("||", "！")
                #s.gsub!("———————————",":")
            end

            text.each_with_index do |val, index|
                algor     = RMMSeg::Algorithm.new(text[index])
                splittext = []
                loop do
                    tok = algor.next_token
                    break if tok.nil?
                    tex = tok.text.force_encoding('UTF-8')
                    splittext << tex
                    text[index] = splittext
                end
                paragraphs[ti] = text
            end
        end
        bing                   = BingTranslator.new(BING_API)
        self.parsed_content  = paragraphs
        textarray              = Marshal.load(Marshal.dump(paragraphs))
        self.defined_content = Marshal.load(Marshal.dump(paragraphs))
        self.literal_content = Marshal.load(Marshal.dump(paragraphs))
        self.pinyin_content  = Marshal.load(Marshal.dump(paragraphs))
        textarray.each_with_index do |paragraph, pi|
            paragraph.each_with_index do |sentence, si|
                sentence.each_with_index do |word, wi|
                    if DictionaryEntry.find_by_simplified(word) != nil
                        self.defined_content[pi][si][wi] = DictionaryEntry.find_by_simplified(word).definition
                        #self.literal_content is down below
                        self.pinyin_content[pi][si][wi]  = DictionaryEntry.find_by_simplified(word).pinyin
                    else
                        self.defined_content[pi][si][wi] = bing.translate(word, :from => 'zh-CHS', :to => 'en')
                        #self.defined_content[pi][si][wi] = word
                        #self.literal_content is down below
                        if PinYin.of_string(word, true).length > 1 #for punctuation
                            self.pinyin_content[pi][si][wi] = PinYin.of_string(word, true).join(" ").downcase
                        else
                            self.pinyin_content[pi][si][wi] = word
                        end
                    end
                end
            end
        end

        #Literal
        literalarray = Marshal.load(Marshal.dump(paragraphs))
        literalarray.each_with_index do |paragraph, pi|
            paragraph.each_with_index do |sentence, si| #iterate array of sentence
                literalarray[pi][si] = []
                sentence.each_with_index do |word, wi| #iterate sentence's array of words
                    entrytobesliced = DictionaryEntry.find_by_simplified(word)
                    slicedentry     = []

                    if entrytobesliced == nil
                        if word.length > 1 && word !~ /\w/ #/^\s*\w\d+\s*$/ #number regex  #for cases where there is no DictionaryEntry
                            split     = []
                            wordarray = word.split("").each_with_index() do |ws, wsi|
                                split << [DictionaryEntry.find_by_simplified(ws).definition]
                            end
                            literalarray[pi][si] << split
                        else
                            literalarray[pi][si] << [word] #in case none of the above work
                        end
                    else
                        entrytobesliced.simplified.each_char do |w|
                            singlechar = DictionaryEntry.find_by_simplified(w)
                            slicedentry << singlechar.definition.split("\", \"")
                        end
                        literalarray[pi][si] << slicedentry
                    end
                    self.literal_content = literalarray #slicedentry #literalarray
                end
            end

        end
    end
end 
```

当我尝试创建新课程时，会出现如下错误：`Jobs cannot be created for records before they've been persisted`

但是，如果我将其更改`after_save`为`before_save`then 我可以看到工作正在运行，但它不会更新数据库中的序列化数组。

有人可以帮我为此实施delayed_jobs吗？当我有它时它正在工作：

```
 before_save do |lesson|
        lesson.makesandwich #no delay
    end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:04:11.310

我认为您遇到了以下错误：

> 在持久化之前无法为记录创建作业

因为您的实例在保存之前`Lesson`不会有并且没有DJ 无法知道它应该使用哪个实例。因此，您必须使用 an以便您拥有并且可以唯一标识。但是，您的延迟作业的更新将不会被保存，因为没有什么要求保存它们。您应该能够通过在末尾添加一个或调用来解决这个问题。`id``id``after_save``Lesson``id``self.save``self.save!``makesandwich`

# objective-c - 删除 UITableView 单元格之前发出警报 - (UIAlertController) Swift 或 Objective-C

> ID：14297738
> 
> 赞同：8
> 
> 时间：2013-01-12T20:39:27.977
> 
> 标签：objective-c, swift, uitableview, uialertview, uialertcontroller

我想删除一个表格视图单元格，但在该操作发生之前我想给用户一个警报视图。我懂了：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Warning"
                                                        message:@"Are you sure?"
                                                       delegate:self
                                              cancelButtonTitle:@"NO"
                                              otherButtonTitles:@"YES", nil];
        [alert show];

        [self.array removeObjectAtIndex:indexPath.row];//or something similar to this based on your data source array structure
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
    if([title isEqualToString:@"Nee"])
    {
        NSLog(@"Nothing to do here");
    }
    else if([title isEqualToString:@"Ja"])
    {
        NSLog(@"Delete the cell");

    }
} 
```

但是现在当我在单元格上向右滑动并出现删除按钮时，我没有得到 AlertView。当我按下删除按钮时，我只会得到 AlertView。当我按下删除按钮时，会出现消息，但单元格已被删除。

如何使这项工作？所以当我滑动时有一个 AlertView。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-12T20:54:19.760

关于顺序，一切都很好。`commitEditingStyle`只有当删除按钮被按下时才会被调用。关键是您实际上是在响应警报之前删除对象。将其更改为：

将此添加到 .m 文件之前`@implementation`：

```
@interface PutYourViewControllerClassNameHere
@property (strong, nonatomic) NSIndexPath *indexPathToBeDeleted;
@end 
```

接着：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {

        self.indexPathToBeDeleted = indexPath;

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Warning"
                                                        message:@"Are you sure?"
                                                       delegate:self
                                              cancelButtonTitle:@"NO"
                                              otherButtonTitles:@"YES", nil];
        [alert show];
        // do not delete it here. So far the alter has not even been shown yet. It will not been shown to the user before this current method is finished.     
    }
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    // This method is invoked in response to the user's action. The altert view is about to disappear (or has been disappeard already - I am not sure) 

    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
    if([title isEqualToString:@"NO"])
    {
        NSLog(@"Nothing to do here");
    }
    else if([title isEqualToString:@"YES"])
    {
        NSLog(@"Delete the cell");

        [self.array removeObjectAtIndex:[self.indexPathToBeDeleted row]];
        [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:self.indexPathToBeDeleted] withRowAnimation:UITableViewRowAnimationFade];
    }
} 
```

编辑：这应该编译，尽管可能有轻微的语法错误。一般假设：您只处理一个部分。至少只有一个部分在删除是可能的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-21T06:54:50.413

## iOS 8 +

iOS 8 推出`UIAlertController`。这允许您在完成块中而不是在委托方法中编写删除和取消代码（根据`-clickedButtonAtIndex`旧的`UIAlertView`）。

**斯威夫特 3**

```
func tableView(_ tableView: UITableView, commit editingStyle: UITableViewCellEditingStyle, forRowAt indexPath: IndexPath) {
    if editingStyle == .delete {
        let alertController = UIAlertController(title: "Warning", message: "Are you sure?", preferredStyle: .alert)

        let deleteAction = UIAlertAction(title: "Delete", style: .destructive, handler: { (action) in
            self.tableView.deleteRows(at: [indexPath], with: .fade)
        })
        alertController.addAction(deleteAction)

        let cancelAction = UIAlertAction(title: "Cancel", style: .default, handler: nil)
        alertController.addAction(cancelAction)

        present(alertController, animated: true, completion: nil)
    }
} 
```

**Objective-C**

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        UIAlertController *alertController = [UIAlertController alertControllerWithTitle:@"Warning" message:@"Are you sure?" preferredStyle:UIAlertControllerStyleAlert];

        UIAlertAction *deleteAction = [UIAlertAction actionWithTitle:@"Delete" style:UIAlertActionStyleDestructive handler:^(UIAlertAction * _Nonnull action) {
            [self.tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
        }];
        [alertController addAction:deleteAction];

        UIAlertAction *cancelAction = [UIAlertAction actionWithTitle:@"Cancel" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
            NSLog(@"Don't do anything");
        }];
        [alertController addAction:cancelAction];

        [self presentViewController:alertController animated:YES completion:nil];
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T20:58:48.417

当删除操作已经发生时，您正在调用警报....

把它放进去：

```
-(void)tableView:(UITableView*)tableView willBeginEditingRowAtIndexPath:(NSIndexPath *)indexPath
{
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Waarschuwing!"
                                                message:@"Weet je zeker dat je het vak: lalaal wilt verwijderen?"
                                               delegate:self
                                      cancelButtonTitle:@"Nee"
                                      otherButtonTitles:@"Ja", nil];
[alert show];
} 
```

这将在单元格被滑动时和在按下按钮之前调用警报。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-16T19:08:40.673

**iOS 9.0 和 Swift 2.3**

```
func tableView(tableView: UITableView, commitEditingStyle editingStyle: UITableViewCellEditingStyle, forRowAtIndexPath indexPath: NSIndexPath) {

    if editingStyle == .Delete {

        let alertController = UIAlertController(title: "Warning!", message: "You're about to delete this stuff right meow.", preferredStyle: .Alert)
        let delete = UIAlertAction(title: "Do it.", style: .Destructive, handler: { action in

            tableView.beginUpdates()
            //delete from your datasource!
            tableView.deleteRowsAtIndexPaths([indexPath], withRowAnimation: .Fade)
            tableView.endUpdates()
        })

        let cancel = UIAlertAction(title: "Cancel", style: .Cancel, handler: { action in

            //this is optional, it makes the delete button go away on the cell
            tableView.reloadRowsAtIndexPaths([indexPath], withRowAnimation: .Automatic)
        })

        alertController.addAction(delete)
        alertController.addAction(cancel)
        presentViewController(alertController, animated: true, completion: nil)
    }
} 
```

# python - 如何在启动时作为守护进程启动 ipython 笔记本服务器

> ID：14297741
> 
> 赞同：20
> 
> 时间：2013-01-12T20:39:51.950
> 
> 标签：python, ipython

我喜欢 ipython，尤其是 notebook 功能。我目前保持一个屏幕会话与其中的笔记本进程一起运行。如何将 ipython 的笔记本引擎/网络服务器添加到我的系统 (CentOS5) 启动程序中？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-03-10T11:17:25.240

```
vi /usr/lib/systemd/system/ipython-notebook.service
#put the following in there.
-----------------8<------------------
    [Unit]
    Description=IPython notebook

    [Service]
    Type=simple
    PIDFile=/var/run/ipython-notebook.pid
    ExecStart=/usr/bin/ipython notebook --no-browser
    User=ipynb
    Group=ipynb
    WorkingDirectory=/home/ipynb/notebooks

    [Install]
    WantedBy=multi-user.target
-----------------8<------------------

# useradd ipynb
# su - ipynb # go there create notebooks dir
# systemctl daemon-reload
# systemctl enable ipython-notebook
# systemctl start ipython-notebook 
```

[学分](https://amitksaha.wordpress.com/2013/09/22/managing-ipython-notebook-server-via-systemd-part-i)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-12T22:45:59.403

Maybe put something like:

```
cd /path/to/notebookdir && ipython notebook --no-browser & 
```

in `/etc/rc.d/rc.local`? That's the 'easy' way, fine I think if it's just your personal machine, but if it's a 'real' server you should probably do a full Sys V-init thing; see [this question](https://unix.stackexchange.com/questions/26619/how-to-run-a-c-program-as-a-daemon) for more

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-07T21:41:26.840

我假设您不想以 root 身份运行该程序。所以这是我修改后的版本，运行方式为`<username>`（放在行`/etc/rc.local`前`exit 0`）：

`su <username> -c "/usr/bin/ipython notebook --no-browser --profile <profilename> &"`

您可以检查以确保您的 ipython 位于带有`which ipython`. 尽管您可能不走完整路径就可以逃脱。

# c# - 将项目范围添加到列表中而不重复

> ID：14297758
> 
> 赞同：6
> 
> 时间：2013-01-12T20:41:48.980
> 
> 标签：c#, list, distinct, addrange

我有`List`of `List`，`Strings`我需要使用`AddRange()`Function 向其中添加一组项目，但从不重复项目。

我使用了以下代码：

```
List<List<string>> eList = new List<List<string>>();
List<List<string>> mergedList = new List<List<string>>(); 

//
// some code here
//

mergedList.AddRange(eList.Where(x => !mergedList.Contains(x)).ToList()); 
```

但是它不起作用。

添加了所有重复的项目，那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T20:56:17.777

**一种）**

如果您对*重复*的意思是*两个列表都包含相同顺序的相同元素*，那么

```
List<List<string>> eList = new List<List<string>>();
eList.Add(new List<string>() { "a", "b" });
eList.Add(new List<string>() { "a", "c" });
eList.Add(new List<string>() { "a", "b" });

var mergedList = eList.Distinct(new ListComparer()).ToList(); 
```

* * *

```
public class ListComparer : IEqualityComparer<List<string>>
{
    public bool Equals(List<string> x, List<string> y)
    {
        return x.SequenceEqual(y);
    }

    public int GetHashCode(List<string> obj)
    {
        return obj.Take(5).Aggregate(23,(sum,s)=> sum ^= s.GetHashCode());
    }
} 
```

**二）**

如果列表中元素的顺序不重要，那么

```
List<List<string>> eList = new List<List<string>>();
eList.Add(new List<string>() { "a", "b" }); <--
eList.Add(new List<string>() { "a", "c" });
eList.Add(new List<string>() { "b", "a" }); <--

var mergedList = eList.Select(x => new HashSet<string>(x))
                      .Distinct(HashSet<string>.CreateSetComparer()).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T21:07:57.107

尝试以下 LINQ 查询

```
mergeList.AddRange( eList.Where (x => mergeList.Where ( y => y.Intersect(x)).Any())); 
```

# c# - 单元测试 Amazon S3

> ID：14297766
> 
> 赞同：1
> 
> 时间：2013-01-12T20:43:31.363
> 
> 标签：c#, unit-testing, amazon-s3, mocking

我有一个相当简单的类，我正在尝试对其进行单元测试。一般来说，我对单元测试很陌生，我不确定我应该在这里测试什么。

我能弄清楚如何编码的唯一测试用例是`stream`. 除此之外，我不确定如何测试 a`PutObjectRequest`或其他什么的结果。如果我应该在这里使用模拟，如何？

```
public class AmazonS3Service : IAmazonS3Service
{
    private readonly Uri baseImageUrl;
    private readonly Uri s3BaseUrl;
    private readonly string imageBucket;

    public AmazonS3Service()
    {
        imageBucket = ConfigurationManager.AppSettings["S3.Buckets.Images"];

        s3BaseUrl = new Uri(ConfigurationManager.AppSettings["S3.BaseAddress"]);
        baseImageUrl = new Uri(s3BaseUrl, imageBucket);
    }

    public Image UploadImage(Stream stream)
    {
        if (stream == null) throw new ArgumentNullException("stream");
        var key = string.Format("{0}.jpg", Guid.NewGuid());

        var request = new PutObjectRequest
        {
            CannedACL = S3CannedACL.PublicRead,
            Timeout = -1,
            ReadWriteTimeout = 600000, // 10 minutes * 60 seconds * 1000 milliseconds
            InputStream = stream,
            BucketName = imageBucket,
            Key = key
        };

        using (var client = new AmazonS3Client())
        {
            using (client.PutObject(request))
            {
            }
        }

        return new Image
        {
            UriString = Path.Combine(baseImageUrl.AbsoluteUri, key)
        };
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:34:00.343

您在单元测试中遇到了麻烦，`UploadImage`因为它与许多其他外部服务和状态耦合。包括 ( ) 在内的静态调用`new`将代码与特定实现紧密耦合。您的目标应该是重构这些，以便您可以更轻松地进行单元测试。另外，请记住，在对此类进行单元测试之后，您仍然需要进行涉及实际使用 Amazon S3 服务的大型测试，并确保上传正确无误或按预期失败。通过彻底的单元测试，希望您减少这些大型且可能昂贵的测试的数量。

消除与`AmazonS3Client`实现的耦合可能会给您带来最大的测试收益。`new AmazonS3Client`我们需要通过调用来重构。如果这个类还没有接口，那么我会创建一个来包装它。然后你需要决定如何注入实现。有许多选项，包括作为方法参数、构造函数参数、属性或工厂。

让我们使用工厂方法，因为它比其他直接的方法更有趣。为了清晰和可读性，我省略了一些细节。

```
interface IClientFactory
{
  IAmazonS3Client CreateAmazonClient();
}

interface IAmazonS3Client
{
  PutObjectResponse PutObject(PutObjectRequest request); // I'm guessing here for the signature.
}

public class AmazonS3Service : IAmazonS3Service
{
    // snip
    private IClientFactory factory;

    public AmazonS3Service(IClientFactory factory)
    {
       // snip
      this.factory = factory;
    }

   public Image UploadImage(Stream stream)
    {
        if (stream == null) throw new ArgumentNullException("stream");
        var key = string.Format("{0}.jpg", Guid.NewGuid());

        var request = new PutObjectRequest
        {
            CannedACL = S3CannedACL.PublicRead,
            Timeout = -1,
            ReadWriteTimeout = 600000, // 10 minutes * 60 seconds * 1000 milliseconds
            InputStream = stream,
            BucketName = imageBucket,
            Key = key
        };

        // call the factory to provide us with a client.
        using (var client = factory.CreateAmazonClient())
        {
            using (client.PutObject(request))
            {
            }
        }

        return new Image
        {
            UriString = Path.Combine(baseImageUrl.AbsoluteUri, key)
        };
    }
} 
```

MSTest 中的单元测试可能如下所示：

```
[TestMethod]
public void InputStreamSetOnPutObjectRequest()
{
  var factory = new TestFactory();
  var service = new AmazonS3Service(factory);
  using (var stream = new MemoryStream())
  {
      service.UploadImage(stream);
      Assert.AreEqual(stream, factory.TestClient.Request.InputStream);
  }
}

class TestFactory : IClientFactory
{
  public TestClient TestClient = new TestClient();

  public IAmazonS3Client CreateClient()
  {
     return TestClient;
  }
}

class TestClient : IAmazonS3Client
{
  public PutObjectRequest Request;
  public PutObjectResponse Response;

  public PutObjectResponse PutObject(PutObjectRequest request)
  {
    Request = request;
    return Response;
  }
} 
```

现在，我们有一个测试来验证请求对象中是否发送了正确的输入流。显然，模拟框架将有助于减少用于测试此行为的大量样板代码。您可以通过开始为请求对象上的其他属性编写测试来扩展它。错误案例是单元测试真正大放异彩的地方，因为它们通常很难或不可能在生产实现类中引入。

要对该方法/类的其他场景进行完全单元测试，这里还有其他外部依赖项需要传入或模拟。`ConfigurationManager`直接访问配置文件。应该传入这些设置。`Guid.NewGuid`基本上是不受控制的随机性的来源，这对单元测试也是不利的。您可以将 an 定义`IKeySource`为各种服务的键值提供者并对其进行模拟，或者只是将键从外部传递。

最后，您应该权衡测试/重构所花费的所有时间与它给您带来的价值。总是可以添加更多的层来隔离越来越多的组件，但是每增加一层的回报就会递减。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T21:32:20.393

我会看的东西：

*   模拟您的配置管理器以返回存储桶和 URL 的无效数据。（空，无效的网址，无效的桶）

*   S3 支持 https 吗？如果是这样模拟它，如果不是，模拟它并验证你得到一个有效的错误。

*   在（内存、文件、其他类型）中传递不同类型的流。

*   传入不同状态的流（空流，已读到最后的流，...）

*   我会允许将超时设置为参数，因此您可以使用非常低的超时进行测试，看看您会得到什么错误。

*   我还会使用重复的密钥进行测试，只是为了验证错误消息。即使您使用的是 guid，您也将存储到亚马逊服务器，其他人可以使用 S3 API 来存储文档，理论上可以创建一个看似 guid 的文件，但可能会在未来产生冲突（不太可能，但可能的）

# asp.net - ASP.NET：更新面板内 ListView 内的按钮导致完整的回发

> ID：14297767
> 
> 赞同：1
> 
> 时间：2013-01-12T20:43:40.277
> 
> 标签：asp.net, updatepanel, postback, disabled-control

```
<script type="text/javascript">

    function ClientSideClick(myButton) {
        //make sure the button is not of type "submit" but "button"
        if (myButton.getAttribute('type') == 'button') {
            // disable the button
            myButton.disabled = true;
            //myButton.className = "btn-inactive";
            myButton.value = "Posting...";
        }
        return true;
    }

</script>

<asp:UpdatePanel ID="upComments" runat="server" UpdateMode="Always" >
    <ContentTemplate>

        <asp:ListView ... >

            <asp:Button ID="btnSubPostComment" runat="server" Text="Reply Comment"
                        CommandName="cmdPostSubComment" OnClientClick="ClientSideClick(this)" UseSubmitBehavior="false"

        </asp:ListView>

    </ContentTemplate>
</asp:UpdatePanel> 
```

Javascript 函数 (ClientSideClick) 在处理时禁用按钮。

问题是，当我在按钮中包含 OnClientClick="ClientSideClick" UseSubmitBehavior="false" 时，即使它位于更新面板内，它也会导致完整的回发。

如果我删除这两个属性 OnClientClic 和 UseSubmitBehavior 按钮不会导致完全回发。有谁知道为什么会这样？

我想要做的就是禁用按钮并更改它的文本以防止多次提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:05:54.663

我不确定这是否正是您正在寻找的，但我通常使用这个：

```
<asp:ScriptManager ID="ScriptManager1" runat="server" />
<script type="text/javascript">
var pbControl = null;
var prm = Sys.WebForms.PageRequestManager.getInstance();
prm.add_beginRequest(BeginRequestHandler);
prm.add_endRequest(EndRequestHandler);

function BeginRequestHandler(sender, args) {
    pbControl = args.get_postBackElement();
    pbControl.disabled = true;
}
function EndRequestHandler(sender, args) {
    pbControl.disabled = false;
    pbControl = null;
}
</script>
<asp:UpdatePanel ID="UpdatePanel1" UpdateMode="Conditional" runat="server">
    <ContentTemplate>
        <asp:ListView ... >
            <asp:Button ID="btnSubPostComment" runat="server" Text="Reply Comment" CommandName="cmdPostSubComment" OnClientClick="this.value='Posting...';" />
        </asp:ListView>
    </ContentTemplate>
</asp:UpdatePanel> 
```

唯一的问题是，如果在第一次异步回发后再次单击相同的按钮，则会引发“由于对象的当前状态，操作无效”错误。这可能会以 500 内部服务器错误的形式显示为 javascript 异常。经过一番研究，我发现：

“微软最近（2011 年 12 月 29 日）发布了一个更新，以解决 .NET 框架中的几个严重安全漏洞。MS11-100 是最近才推出的，用于处理潜在的 DoS 攻击。不幸的是，该修复程序还破坏了非常大量的页面 POST发布的数据（表单字段）。MS11-100 对回发项目设置了 500 个限制。最近的安全更新引入的新默认最大值是 1000。

Scott Gu 在这里写到：[http ://weblogs.asp.net/scottgu/archive/2011/12/28/asp-net-security-update-shipping-thursday-dec-29th.aspx](http://weblogs.asp.net/scottgu/archive/2011/12/28/asp-net-security-update-shipping-thursday-dec-29th.aspx)

将设置键添加到 web-config 文件可以克服此错误：

```
<appSettings>
    <add key="aspnet:MaxHttpCollectionKeys" value="2000" />
</appSettings> 
```

# java - 用于生成 Excel 的 Java API

> ID：14297769
> 
> 赞同：0
> 
> 时间：2013-01-12T20:43:45.390
> 
> 标签：java, excel, export-to-excel

生成包含公式的 excel 表（与最新的 Excel 兼容）的最佳 Java API 是什么？除了 POI 和 JXL 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:47:58.740

还有这个： http: [//jexcelapi.sourceforge.net/](http://jexcelapi.sourceforge.net/)，但 POI 几乎是标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T21:53:33.230

我已经在 POI 和 JXL 之间切换了几次。两者都工作得很好。过去我离开 POI 的原因是 POI 开发闲置了。也就是说，现在开发再次活跃，我已经切换回 POI。我喜欢 POI 的一件事是它也可以[处理 XLSX 格式](http://poi.apache.org/spreadsheet/index.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-12T14:37:38.213

我在其中一个项目中使用过 Apache POI。它对我来说效果很好。

[http://poi.apache.org/](http://poi.apache.org/)

支持多种 MS Office 格式。

# .htaccess - 无法从 CodeIgniter URL 中删除 index.php

> ID：14297770
> 
> 赞同：7
> 
> 时间：2013-01-12T20:43:45.630
> 
> 标签：.htaccess, codeigniter, codeigniter-2

我的目录结构是 /var/www/CI/，所有文件夹，即应用程序，系统，在 CI 文件夹下。在 CI 下创建了一个 .htaccess 文件。

以下是 .htacess 中的代码。

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond $1 !^(index\.php|public|images|robots\.txt|css)
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

仍然 localhost/CI/blog 给出 404 错误。谁能指导一下这条规则哪里错了？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-13T08:22:48.277

请尝试以下

首先，确保你像下面这样设置配置文件..

```
$config['index_page'] = ''; 
```

还要确保在 httpd.conf 文件中启用了**mod_rewrite**，然后，使用以下代码覆盖位于项目根文件夹而不是应用程序文件夹中的 .htaccess 文件。

```
RewriteEngine on
RewriteCond $1 !^(index\.php|public|\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T20:51:28.810

确保在您的`application/config/config.php`文件中设置如下：

```
$config['index_page'] = ''; 
```

也这样做：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond $1 !^CI/(index\.php|public|images|robots\.txt|css)
    RewriteRule ^CI/(.*)$ CI/index.php/$1 [L]
</IfModule> 
```

通常，您不会将 CI 放在其自己的目录中，而是将 and 放在`application`根`system`文件夹中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-13T02:07:16.343

检查您的 Apache 配置，以便它允许覆盖。如果`AllowOverride`设置为`None`，重写将不适合您。

将以下内容添加到您的`httpd.conf`（不是您的 .htaccess）应该可以解决您的问题

```
<Directory "/">
    AllowOverride All
</Directory> 
```

让我知道它是否仍然无法正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-07T17:03:54.467

使用以下步骤， 1\. 在文档根目录 [ ]
中创建 .htaccess 文件。 2.打开配置文件，执行以下操作`myroot_folder/.htaccess`
`application/config/config.php`

```
$config['index_page'] = ''; 
```

如果将其 更改为，`index.php`请从您的基本网址中删除
`$config['base_url']= 'http://localhost/myroot_folder/index.php';`
`$config['base_url']= 'http://localhost/myroot_folder/';`

现在打开`.htaccess`文件并添加以下代码块

```
DirectoryIndex index.php
RewriteEngine on
RewriteCond $1 !^(index\.php|images|css|js|robots\.txt|favicon\.ico)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ ./index.php/$1 [L,QSA] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-04T10:39:38.860

这行得通。虽然，请确保您的**mod_rewrite**已启用，

1.  在 Apache 的安装文件夹内的文件夹`httpd.conf`下找到该文件。`C:\wamp\bin\apache\apache2.4.9\conf`
2.  `#LoadModule rewrite_module modules/mod_rewrite.so`在文件中找到以下行。`httpd.conf`您可以通过搜索关键字“mod_rewrite”轻松完成此操作。
3.  去掉`#`行首的 ，`#`表示该行已被注释。
4.  然后**重新启动 apache 服务器**。
5.  您现在可以`mod_rewrite`在加载的模块部分中看到，同时执行`phpinfo()`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-29T10:01:43.143

1）制作`.htaccess`文件并放置此代码。

```
 RewriteEngine on
  RewriteCond $1 !^(index\.php|resources|robots\.txt)
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

2) 改变：

```
 $config['index_page'] = ''; 
 remove index.php present in config.php file 
```

3）从您的服务器重写

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-04-10T22:11:41.377

**如果你还没有工作，但你已经这样做了，试试这个：**

**在/etc/apache2/sites-available/default**中的虚拟主机文件中将**AllowOverride None**更改为**AllowOverride All**

 **[详情在这里](https://stackoverflow.com/a/11549808/4043476)**

# jsp - 评估请求属性中的 EL 表达式

> ID：14297772
> 
> 赞同：4
> 
> 时间：2013-01-12T20:43:57.247
> 
> 标签：jsp, el, jsp-tags, taglib

我们将 HTML 标记存储在 XML 文档中，并使用 JiBX 解组。我们还使用 Spring，当这些对象之一添加到模型中时，我们可以通过 EL 在 JSP 中访问它。

```
${model.bookshelf.columnList[0].linkList[0].htmlMarkup} 
```

没有什么开创性的。但是如果我们想在 HTML 标记中存储 EL 表达式呢？例如，如果我们要存储以下链接怎么办？

```
<a href="/${localePath}/important">Locale-specific link</a> 
```

...并将其显示在一个 JSP 中，其中 LocalePath 是一个请求属性。

或者更有趣的是，如果我们要存储以下内容怎么办？

```
The link ${link.href} is in column ${column.name}. 
```

...并将其显示在嵌套的 JSP forEach 中...

```
<c:forEach var="column" items="${bookshelf.columnList}">
    <c:forEach var="link" items="${column.linkList}">
        ${link.htmlMarkup}
    </c:forEach>
</c:forEach> 
```

请求属性中的这些 EL 表达式永远不会被评估。有没有办法让他们评估？类似“eval”标签的东西？令牌替换在第一个示例中有效，但在第二个示例中无效，并且不是很健壮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T22:30:03.007

如果我理解正确：您正在寻找一种在运行时评估 EL 表达式的方法，该表达式存储在 EL 表达式提供的另一个值中 - 类似于递归 EL 评估。

由于我找不到任何现有的标签，我很快为这样的 EvalTag 整理了一个概念验证：

```
import javax.el.ELContext;
import javax.el.ValueExpression;
import javax.servlet.ServletContext;
import javax.servlet.jsp.*;
import javax.servlet.jsp.tagext.SimpleTagSupport;

public class SimpleEvalTag extends SimpleTagSupport {
    private Object value;

    @Override
    public void doTag() throws JspException {
        try {
            ServletContext servletContext = ((PageContext)this.getJspContext()).getServletContext();
            JspApplicationContext jspAppContext = JspFactory.getDefaultFactory().getJspApplicationContext(servletContext);
            String expressionStr = String.valueOf(this.value);
            ELContext elContext = this.getJspContext().getELContext();
            ValueExpression valueExpression = jspAppContext.getExpressionFactory().createValueExpression(elContext, expressionStr, Object.class);
            Object evaluatedValue =  valueExpression.getValue(elContext);
            JspWriter out = getJspContext().getOut();
            out.print(evaluatedValue);
            out.flush();
        } catch (Exception ex) {
            throw new JspException("Error in SimpleEvalTag tag", ex);
        }
    }

    public void setValue(Object value) {
        this.value = value;
    }
} 
```

相关顶级域名：

```
<?xml version="1.0" encoding="UTF-8"?>
<taglib version="2.1" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd">
  <tlib-version>1.0</tlib-version>
  <short-name>custom</short-name>
  <uri>/WEB-INF/tlds/custom</uri>
  <tag>
    <name>SimpleEval</name>
    <tag-class>SimpleEvalTag</tag-class>
    <body-content>empty</body-content>
    <attribute>
      <name>value</name>
      <required>true</required>
      <rtexprvalue>true</rtexprvalue>
      <type>java.lang.Object</type>
    </attribute>
  </tag>
</taglib> 
```

用法：

```
<custom:SimpleEval value="${someELexpression}" /> 
```

**笔记：**

我已经使用 Tomcat 7.0.x / JSP 2.1 对其进行了测试，但是正如您在源代码中看到的那样，没有特殊的错误处理等，因为它只是一些概念验证。

在我的测试中，它适用于会话变量 using`${sessionScope.attrName.prop1}`和请求参数 using `${param.urlPar1}`，但由于它使用当前 JSP 的表达式评估器，我想它也应该适用于所有其他“正常”EL 表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T19:13:37.897

您不需要自己以编程方式解析 el 表达式，应通过`<rtexprvalue>true</rtexprvalue>`在 taglib 中包含评估结果来为您的标签提供评估结果，例如

```
 <tag>   
      <name>mytag</name>

      <attribute>
        <name>myattribute</name>
        <required>true</required>
        <rtexprvalue>true</rtexprvalue>
       </attribute>
   </tag> 
```

# c++ - 类型擦除映射的副本（分配）应该有多深

> ID：14297781
> 
> 赞同：1
> 
> 时间：2013-01-12T20:44:41.400
> 
> 标签：c++, map, copy, type-erasure

我正在用 C++ 编写一个库，为此我实现了一个带有类型擦除的地图包装器。包装器的结构与这篇精彩的文章一样：[http](http://www.cplusplus.com/forum/articles/18756/) ://www.cplusplus.com/forum/articles/18756/ 。

TLDR：

```
template<typename K, typename V>
class AnyMap
{
    class MapConcept
    {
    public:
        // Lots of pure virtual methods...
        // These mimic the intersection of STL and Boost maps' interfaces
        // Example:
        virtual size_type size() = 0;
    };

    template<typename ActualMapType>
    class MapModel : MapConcept
    {
        ActualMapType m;
    public:
        // Implementations of the parent's virtual methods...
        // These basically just call the same method on member m.
        // Example:
        size_type size()  { return m.size(); }
    };

    MapConcept* mapConcept;

public:
    // Again, the STL and Boost maps' interface methods
    // Example:
    size_type size()  { return mapConcept->size(); }
}; 
```

我不确定我是否会将此地图作为已完成库的一部分公开，还是将其作为辅助类隐藏起来，但无论哪种方式，我都想知道赋值运算符的作用。

目前，我有这样的事情：

```
AnyMap& AnyMap::operator=(const AnyMap& other) {
    delete mapConcept;
    mapConcept = other.mapConcept->clone();
    return *this;
} 
```

这意味着，如果我使用 STL 的映射和 Boost 的 unordered_map 创建两个映射，然后将一个分配给另一个，那么现在两者都将具有相同的映射类型。

```
std::map<string, int> stlMap;
boost::unordered_map<string, int> boostMap;
// insert some stuff into maps
AnyMap<string, int> stlAnyMap( stlMap );
AnyMap<string, int> boostAnyMap( boostMap );

stlAnyMap = boostAnyMap;
// now stlAnyMap has a copy of boostMap 
```

所以，这是有道理的，因为分配给地图的内容是预期的。但是，我怀疑通常映射类型会因具有默认值的类型参数之一而有所不同（例如 Boost::unordered_map 中的哈希）。所以，也许它应该保留底层的地图类型。我认为，这可以通过以下方式完成：

```
AnyMap& AnyMap::operator=(const AnyMap& other) {
    mapConcept->clear();
    mapConcept->insert( other.mapConcept->begin(), other.mapConcept->end() );
    return *this;
} 
```

由于模板化的插入方法，这应该可以工作：

```
template <class InputIterator>
  void insert (InputIterator first, InputIterator last); 
```

顺便说一句，如果有人想知道我是如何处理迭代器的：我使用了 Thomas Becker 的 any_iterator - [http://thbecker.net/free_software_utilities/type_erasure_for_cpp_iterators/any_iterator.html](http://thbecker.net/free_software_utilities/type_erasure_for_cpp_iterators/any_iterator.html)。

那么，你们怎么看？我倾向于后一种方法，但我想听听任何一方的任何论点。

提前致谢！

编辑：这是反对的第一个论点（也许，你可以告诉我这是多么重要）：如果一个谓词区分映射中的两个键而另一个映射类型的内容现在可能一对一映射到另一个映射认为它们相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:35:19.247

您是否希望地图包装器具有值语义？这将决定副本的深度。在任何情况下，实现都`other.mapConcept->clone()`将是多态的（这毕竟是 C++ 类型擦除技术的本质）并导致调度到 MapModel 子类中的调用，如下所示

```
virtual MapModel *clone() { return new MapModel(m); } // covariant return type 
```

所以一切都归结为 ActualMapType 的复制构造函数所做的事情（因为成员变量`m`将是一个副本。）

由于该技术是为了获得价值语义而发明的，因此我认为保留该功能符合 Least Surprise 原则。而且，关键是要有一个固定的*接口*。实现（STL 或 boost 或其他）与设计无关，因此尝试在任何特定对象实例中保留实现几乎没有意义。

顺便说一句，您对“标准”情况的 operator= 实施不是异常安全的。复制和交换习语（可能使用自定义 swap() 方法）效果更好

```
AnyMap( AnyMap const& other )
: mapConcept( other.mapConcept ? other.mapConcept->clone() : 0)
{}

AnyMap& operator= ( AnyMap rhs ) // note temporary: invokes copy constructor
{ std::swap( mapConcept, rhs.mapConcept ) ; return *this; } 
```

# gcc - gcc 程序集中的重新排序函数

> ID：14297782
> 
> 赞同：2
> 
> 时间：2013-01-12T20:45:14.223
> 
> 标签：gcc, assembly

我正在编写一个程序，它在内存中对自身进行加密/解密，然后将 .text 内存区域写入可执行文件的副本，这样我每次都可以更改加密密钥。

这主要是为了挑战，因为我对 C 不是很好，而且我也在组装中合并零件。

我的系统是 x86_64 Linux 但我正在使用 -m32 进行编译

我也在使用 -nostartfiles（使用 gcc），这样我就可以编写自己的 _start 函数。这个函数是用汇编编写的，它解密/加密 .text 部分的其余部分。我的问题是外部函数的编译顺序错误，因此当我在加密后尝试转储内存时，它会调用一个加密函数，因此它不起作用。

这是函数的当前顺序：

*   一些来自 -static
*   我的函数顺序正确（汇编函数，然后是主 C 文件中的函数）
*   更多来自 -static

这不起作用，因为程序集从主 C 文件“向下”加密，还加密了程序集函数所需的一些静态函数。

这是我希望函数的顺序：

*   所有 -static 函数和来自 #include <> 的任何内容
*   .S 程序集文件中的函数（整个 .S 按顺序排列）
*   .c 主文件中的函数（整个 .c 按顺序排列）
*   .c 主文件的任何非标准包含（即不是 stdio.h 等，来自 #include "" 的内容）

除了手动修改 ELF 文件之外，有什么方法可以让我重新排序这些函数，这样我需要的函数就不会被加密，而我想要加密的函数可以很容易地加密？

**在使用 musl（替代 libc）编译时进行编辑**，我可以在开始时获取我的所有函数，然后是其余的静态函数。但是，这仍然是错误的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T12:26:30.693

二进制文件中函数的“错误”顺序来自编译器的优化工作。经常（或经常一起）使用的函数彼此靠近，因此调用它们不会产生页面错误。

您可以使用标志关闭部分优化`-fno-toplevel-reorder`。您还可以使用该属性`section`将仅功能的子集排序在一起（例如加密它们），或者您可以编写自己的[链接器脚本](http://sourceware.org/binutils/docs-2.21/ld/Scripts.html#Scripts)。

另请参阅[此问题](https://stackoverflow.com/questions/6614209/how-can-i-force-the-order-of-functions-in-a-binary-with-the-gcc-toolchain)。

# sql - sql server 2008 两个并行事务中的死锁

> ID：14297788
> 
> 赞同：5
> 
> 时间：2013-01-12T20:45:57.690
> 
> 标签：sql, sql-server, database, deadlock

我有两个事务：具有`SERIALIZABLE`隔离级别的 T1 和 T2（我认为 - 具有默认`READ COMMITTED`隔离级别，但没关系）。

`SELECT`然后事务 T1 执行`WAITFOR`2 秒`SELECT`。

事务 T2`UPDATE`对 T1 读取的数据执行。

它导致死锁，为什么事务 T2 不等待 T1 结束？

当 T1 具有`REPEATABLE READ`隔离级别时，一切正常，即出现幻像行。我以为当我将隔离级别提高到 时`SERIALIZABLE`，T2 将等待 T1 结束。

这是我大学运动的一部分。我必须在两个具有不正确隔离级别的并行事务中显示负面影响，并且在正确的隔离级别下不存在这些影响。

这是代码，不幸的是，字段名称是波兰语。

T1：

```
使用先生；

SET IMPLICIT_TRANSACTIONS 关闭；
设置事务隔离级别可序列化；

开始交易；

-- 1\. 扎皮塔尼
选择
    www.IdSamochodu, s.Model, s.Marka, s.NrRejestracyjny, o.PESEL, o.Nazwisko, o.Imie, o.NrTelefonu
从
    WizytyWWarsztacie www
加入
    萨摩奇
    ON s.IdSamochodu = www.IdSamochodu
加入
    奥索比
    ON o.PESEL = s.PESEL
在哪里
    www.[状态] = 'gotowy_do_odbioru'
由 www.IdSamochodu ASC 订购
;

等待延迟'00:00:02';

-- 2\. 扎皮塔尼
选择
    u.IdSamochodu，tu.Nazwa，tu.Opis，u.Oplata
从
    乌斯鲁吉乌
加入
    TypyUslug tu
    ON tu.IdTypuUslugi = u.IdTypuUslugi
加入
    WizytyWWarsztacie www
    在 www.IdSamochodu = u.IdSamochodu 和
        www.DataOd = u.DataOd
在哪里
    www.[状态] = 'gotowy_do_odbioru'
由 u.IdSamochodu ASC、u.Oplata DESC 订购
;

犯罪;

```

T2：

```
使用先生；

SET IMPLICIT_TRANSACTIONS 关闭；
将事务隔离级别设置为已提交；

开始交易；

更新
    乌斯鲁吉
放
    [状态] = 'wykonano'
在哪里
    IdUslugi = 2
;

更新
    万维网
放
    www.[状态] = 'gotowy_do_odbioru'
从
    WizytyWWarsztacie www
在哪里
    www.[状态] = 'wykonywanie_usług' AND
    存在（
        选择 1
        从
            乌斯鲁吉乌
        在哪里
            u.IdSamochodu = www.IdSamochodu 和
            u.DataOd = www.DataOd AND
            u.[状态] = 'wykonano'
        由 u.IdSamochodu、u.DataOd 分组
        有计数（u.IdUslugi）=（
            选择
                计数（u2.IdUslugi）
            从
                乌斯鲁吉 u2
            在哪里
                u2.IdSamochodu = www.IdSamochodu 和
                u2.DataOd = www.DataOd
            由 u2.IdSamochodu、u2.DataOd 分组
        )
    )
;

犯罪;

```

我使用 SQL Management Studio，每个事务都在不同的文件中。我通过在 T1 中单击 F5 来运行它，然后快速切换到包含 T2 的文件，然后再次 - F5。

我在 mssql 中阅读了有关死锁和锁定机制的信息，但显然，我还没有理解这个主题。

[SQL Server 2008 R2（.Net 2.0 应用程序）中的死锁问题](https://stackoverflow.com/questions/3725822/deadlock-issue-in-sql-server-2008-r2-net-2-0-application)

[选择/更新或多选之间的 SQL Server 死锁](https://stackoverflow.com/questions/661908/sql-server-deadlocks-between-select-update-or-multiple-selects)

[SELECT/UPDATE 死锁](https://stackoverflow.com/questions/959501/deadlock-on-select-update)

[http://msdn.microsoft.com/en-us/library/ms173763(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms173763(v=sql.105).aspx)

[http://www.sql-server-performance.com/2004/advanced-sql-locking/](http://www.sql-server-performance.com/2004/advanced-sql-locking/)

# **编辑**

我发现 T2 中的第一个 UPDATE 语句导致了问题，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T21:48:25.157

解决死锁问题从获取死锁图开始。这是一个 xml 文档，它告诉您有关所涉及的事务和资源的相关信息。您可以通过 Profiler、扩展事件或事件通知来获取它（我确信还有其他方法，但现在就可以了）。获得图表后，检查它以查看每个事务在哪些资源上具有哪些类型的锁。你从那里去哪里真的取决于图表中发生的事情，所以我会停在那里。底线：获取死锁图并挖掘它以获取详细信息。

顺便说一句，说一个或另一个事务“导致”死锁有点误导。死锁中涉及的所有事务都是导致死锁情况所必需的，因此两者都没有更多的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T22:26:03.407

我的 SQL Managmenet Studio 有一些问题（Profiler 没有工作），但最后我得到了**deadlock graph**。[这篇文章](https://docs.microsoft.com/en-us/previous-versions/sql/sql-server-2008-r2/ms188246(v=sql.105))对我很有帮助。

[![僵局](../Images/790ce81e2307d9c211bf81ac984cb324.png)](https://i.stack.imgur.com/ZEjxO.png)

为了理解这个图表，我必须了解锁定机制和符号。
我认为[这里](https://www.microsoft.com/en-us/download/details.aspx?id=51958)解释得很清楚。

现在，当我知道所有这些东西时，死锁的原因就很明显了。
我已经为所描述的情况制作了序列图：

[![序列图](../Images/fce6ee93f3a48aaa931d87b8dbe2a897.png)](https://i.stack.imgur.com/IfCNM.png)

正如我之前写的，当我们从事务 T2 中删除第一个 UPDATE 语句时，不会发生死锁。

在这种情况下，T2 不会在`pk_uslugi`索引上获得锁，因此来自事务 T1 的第二个 SELECT 语句将成功执行并且索引`pk_wizytywwarsztacie`将被解锁。在那之后，T2也将完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T21:59:54.020

问题可能是这样的：

1.  T1 Select S 锁定行
2.  T2 更新 U 锁定行（成功）
3.  T2 更新 X 锁定行（等待，锁定排队）
4.  T2 再次尝试 S-lock，但 S-lock 与排队的 X-lock 不兼容。

SQL Server 中的锁是排队的。如果队列的头在等待，那么它后面的所有其他东西也会等待。

实际上，我不完全确定这是原因*，*因为`REPEATABLE READ`. 我仍在发布这个想法，希望它有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T00:18:31.147

我遇到了类似的问题，我从可用项目列表中进行选择，然后将这些项目插入到保留队列表中。当我有太多并发请求时，select 语句将返回在另一个并行请求期间也同时选择的项目。当尝试将它们插入到保留队列表中时，我会收到一个唯一约束错误（因为同一项目不能两次进入保留表）。

然后我尝试围绕整个事物包装一个 SERIALIZABLE 事务，但后来我遇到了 DEADLOCK 错误，因为两个事务都持有 UC 索引上的锁（由我的死锁图确定）。

**我终于能够**通过在 select 语句中使用排他行锁来解决这个问题。

您可以尝试在有问题的表/行上使用排他行锁。这将确保 T1 中的行上的锁定将在 T2 尝试更新相同的行之前完成。

例子：

```
SELECT *
FROM Uslugi u WITH (XLOCK, ROWLOCK) 
```

我还不确定这对性能的影响，但是在使用多个线程运行负载测试时，它似乎没有负面影响。

# android - Android - 键盘打开后更改按钮

> ID：14297792
> 
> 赞同：0
> 
> 时间：2013-01-12T20:46:34.880
> 
> 标签：android, image, button, keyboard

我有一个自定义的屏幕后退按钮，一旦用户点击我屏幕的 EditText，我想将其更改为“隐藏键盘”。[我从这个问题](https://stackoverflow.com/questions/2150078/how-to-check-visibility-of-software-keyboard-in-android)中找到了一些很好的代码，关于检测键盘是否打开（查看 Reuben Scratton 的旧答案了解我所做的事情）。我在 .java 文件中的步骤：

```
 @Override
public void onSoftKeyboardShown(boolean isShowing) {
    // do whatever you need to do here
} 
```

一旦键盘打开，我将如何在此处输入后退按钮的代码以更改其图像？

这是我当前的后退按钮的代码：

```
 <ImageButton
        android:id="@+id/back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:contentDescription="Back"
        android:scaleType="fitStart"
        android:src="@drawable/back_bar" /> 
```

我想将其更改为：

```
 <ImageButton
        android:id="@+id/back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:contentDescription="Back"
        android:scaleType="fitStart"
        android:src="@drawable/hide_keyboard" /> 
```

这是我正在尝试做的事情的图像，以防我没有任何意义！ [![图片](../Images/6ec09201091316e4810def675a7d7b00.png)](https://i.stack.imgur.com/0cHuP.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:02:08.747

你可以使用：

```
ImageButton backButton = (ImageButton)findViewById(R.id.back); 
backButton.setImageResource(R.drawable.hide_keyboard); 
```

在你的`onSoftKeyboardShown`方法中

# regex - .htaccess 将某些区域重定向到 https

> ID：14297793
> 
> 赞同：0
> 
> 时间：2013-01-12T20:46:41.603
> 
> 标签：regex, .htaccess, https

我要做的是通过http为文件夹/soap或标题中有/?p=uploads的页面提供服务，网站的其余部分通过https提供。

```
RewriteEngine on
RewriteBase /

RewriteCond %{QUERY_STRING} (^|&)(p=uploads)(&|$) [NC,OR]
RewriteCond %{QUERY_STRING} ^$
RewriteRule ^ - [E=IS_HTTP:1]

RewriteCond %{SERVER_PORT} 443
RewriteRule ^soap/?(.*) http://www.example.com/soap/$1 [R,L]

RewriteCond %{SERVER_PORT} 80
RewriteCond %{REQUEST_URI} !^/soap

RewriteRule ^(.*)$ https://www.example.com/$1 [R,L] 
```

它似乎适用于肥皂文件夹，但不适用于带有 /?p=uploads 的页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:23:32.850

这是一种方法：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  !soap/?      [NC]
RewriteCond %{QUERY_STRING} !p=uploads/? [NC] 
RewriteRule ^(.*)$  https://www.example.com/$1    [L,R=301,QSA] 
```

所有 URL 都被重定向到 HTTPS，除了那些具有`/soap`或 `/?p=uploads`

# c#-4.0 - 解析邮政地址的正则表达式？

> ID：14297794
> 
> 赞同：-4
> 
> 时间：2013-01-12T20:47:26.910
> 
> 标签：c#-4.0

您好，我是编程新手。我有以下格式的地址，我想将门牌号和门牌号部分分开。

```
house no.966 s# 70  Kashmir road Peshawar road Rawalpindi
house no.970 st. # 43  Darian Kalar saeedan
H# 110 Street No.35  Dhowk kala Rwp
h# 124 Street No.73  G-11/3 ISB
h no.423 St. No.23  Chan chirag Rawat
H No.437 st. # 61  Chaklal scheme 3 RAWALPINDI 
```

对此有任何帮助建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:36:14.077

看起来你只是按照它们出现的顺序在两组数字之后，所以你可以这样做：

```
void Main()
{
    var addresses = new string[] { 
        "house no.966 s# 70  Kashmir road Peshawar road Rawalpindi",
        "house no.970 st. # 43  Darian Kalar saeedan",
        "H# 110 Street No.35  Dhowk kala Rwp",
        "h# 124 Street No.73  G-11/3 ISB",
        "h no.423 St. No.23  Chan chirag Rawat",
        "H No.437 st. # 61  Chaklal scheme 3 RAWALPINDI"
    };

    Regex houseAndStreet = new Regex(@"(\d+).+?(\d+)");

    foreach (string address in addresses)
    {
        Match match = houseAndStreet.Match(address);
        string house = match.Groups[1].Value;
        string street = match.Groups[2].Value;
        Console.WriteLine ("House = {0}, Street = {1}", house, street);
    }
} 
```

您可能希望添加一些错误检查以使其更加健壮，但这是基本思想。

正则表达式分解如下：

*   `(\d+)`一组中的一个或多个数字
*   `.+?`对任何其他字符的非贪婪搜索
*   `(\d+)`另一组中的一个或多个数字

# security - Oauth 2.0 隐式授权有多安全？

> ID：14297805
> 
> 赞同：11
> 
> 时间：2013-01-12T20:48:44.233
> 
> 标签：security, web, oauth-2.0, application-security

在隐式授予中，访问令牌在回调 URL 中发回。这不是安全风险吗，因为如果此回调 URL 缓存在跃点中。一般来说，建议不要在 URL 参数中发送敏感数据，并且此访问令牌将是访问所有受保护用户资源的令牌。那么为什么它在 URL 中作为片段传递

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-14T03:04:16.883

嗯，恐怕上面的答案有一些误解。虽然使用 TLS 时 URL 查询字符串是安全的，因此访问令牌在飞行中受到保护，但它会暴露在用户浏览器（他们历史的一部分）以及目标 Web 浏览器日志中。大多数 Web 浏览器都会记录传入请求的整个 URL。它们是一个称为“引用”泄漏问题的附加问题，其中查询字符串将被传递到第三方站点。可以在以下位置找到一个很好的概述：

[http://blog.httpwatch.com/2009/02/20/how-secure-are-query-strings-over-https/](http://blog.httpwatch.com/2009/02/20/how-secure-are-query-strings-over-https/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T00:30:27.940

就像您指出的那样，令牌是通过 URI 片段传递的。由于浏览器不会将 URL 片段发送到 HTTP 服务器，因此有人窃听并获取访问令牌的机会大大降低。

还有其他安全措施，例如仅在隐式授权流程中发布短期访问令牌。

[OAuth2威胁模型文档](https://www.rfc-editor.org/rfc/rfc6819#section-4.4.2)中的更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T09:26:37.660

详细说明@vlatko 的回应......

为了降低在片段中发送令牌的风险（或通过任何其他 OAuth2 授权）：

*   确保 OAuth 端点和回调端点是 TLS (https)（参见[对策](https://www.rfc-editor.org/rfc/rfc6819#section-4.4.2.1)）
*   发送[状态参数](https://www.rfc-editor.org/rfc/rfc6819#section-3.6)以防止跨站点伪造（另见：[https](https://www.rfc-editor.org/rfc/rfc6749#section-4.2.1) ://www.rfc-editor.org/rfc/rfc6749#section-4.2.1 ）

发行短期访问令牌（如@vlatko 所说）将减少泄漏令牌的影响，但不是预防措施。

# html - 使用 CSS 操作 HTML 表单

> ID：14297808
> 
> 赞同：0
> 
> 时间：2013-01-12T20:48:47.097
> 
> 标签：html, forms, css

我一直在研究一些表格，但我不确定如何自定义它们。

[这个解决方案](http://www.red-team-design.com/style-an-input-button)似乎有效，但在我的情况下，属性只是应用于表单周围的区域，而不是表单本身。

CSS：

```
.Forms{
    position:relative;
    top:100px;
    background-color:#666;
    font-family:'Unica One';
    font-weight:500;
} 
```

HTML：

```
<form action="" method="post" class="Forms" id="Form1">
    <input type="submit" value="Email Zoltan (Financial Manager, Director)" />
    <input type="hidden" name="button_pressed" value="1" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:03:51.013

试试这个给 css 到表单输入提交按钮，正如 scott 所说

```
form.Forms input[type="submit"]{
    position:relative;
    top:100px;
    background-color:#666;
    font-family:'Unica One';
    font-weight:500;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T21:37:18.727

`form`CSS 代码设置元素的属性。显然您想将其中一些应用到输入按钮，因此您需要将规则分成两个规则：

```
<!doctype html>
<link href='http://fonts.googleapis.com/css?family=Unica+One'
  rel='stylesheet'>
<style>
.Forms {
    position: relative;
    top: 100px; 
}
.Forms input[type=submit] {
    background-color: #666;
    font-family: 'Unica One';
}
</style>
<form action="" method="post" class="Forms" id="Form1">
    <input type="submit" value="Email Zoltan (Financial Manager, Director)" />
    <input type="hidden" name="button_pressed" value="1" />
</form> 
```

I presume Unica One is meant to refer to a Google font with that name. In that case, do not set `font-weight`, since that font exists as normal (400) typeface only. If you try to set the weight to 500, most browsers ignore it but some may apply algorithmic bolding, which produces questionable results.

Note that setting the background color changes the basic rendering too: the default button, usually with rounded corners in modern browsers, turns to a rectangular box with a bit odd border. You can change this by setting various `border` properties (including `border-radius`) on the `input` element. The point is that buttons have built-in rendering in browsers, but if you set certain crucial CSS properties, this rendering changes to something different, and you should consider setting different other properties as well, when relevant.

P.S. The button becomes almost illegible, due to insufficient color contrast mostly, and Unica One isn’t really suitable for use like this.

# java - 如何在 JtextArea 中选择和检索整行文本的字符串？

> ID：14297809
> 
> 赞同：6
> 
> 时间：2013-01-12T20:48:48.190
> 
> 标签：java, swing, jtextarea

我有一个 JFrame，它显示存储在我的计算机上的当前电影。它将文件的名称显示为`String`s 中的`JTextArea`.

我想要做的是双击一个特定的`String`（它代表我计算机上的一个实际文件）并且该文件将被打开。

打开部分和双击部分已经解决了，但是当我双击时`String`，我`JTextArea`只会选择其中的一部分`String`。（我正在使用`JTextArea.getSelectedText()`）。

我想要的是整个`String`被选中并且我可以检索`String`. 我需要这样做，因为我的一些电影文件具有相似的名称，并且会打开错误的文件。

是否有任何已经实现的方法可以将选择扩展到整行？我试过用谷歌搜索这个问题，但没有任何东西会选择整行文本。

一个例子：http: [//i47.tinypic.com/wvol6a.png](http://i47.tinypic.com/wvol6a.png)

* * *

谢谢大家的意见，很抱歉我不清楚 JTextArea，JTextArea 是强制性的。

我现在有了解决问题的方法，为此我感谢充满鳗鱼的气垫船。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T21:14:46.160

您最好的选择是使用上面许多人推荐的 JList。如果您必须使用 JTextArea，则可以这样做，但您需要使用 JTextArea 的`viewToModel(Point p)`方法将鼠标按下位置的 Point 转换为文本中的偏移位置。然后您可以使用 javax.swing.text.Utilities 类的静态实用程序方法，`getRowStart(...)`并`getRowEnd(...)`找到所选行的开始和结束。例如，我的 SSCCE：

```
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.Random;

import javax.swing.JOptionPane;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.text.BadLocationException;
import javax.swing.text.Utilities;

public class GetLineFromTextArea {
   private static final int MIN_CHARS = 4;
   private static final int MAX_CHARS = 8;
   private static final int WORDS_PER_LINE = 10;
   private static final int ROWS = 30;

   public static void main(String[] args) {
      Random random = new Random();
      final JTextArea textArea = new JTextArea(20, 50);
      JScrollPane scrollpane = new JScrollPane(textArea);
      StringBuilder sb = new StringBuilder();

      for (int row = 0; row < ROWS ; row++) {
         sb = new StringBuilder();
         for (int words = 0; words < WORDS_PER_LINE; words++) {
            int maxChars = random.nextInt(MAX_CHARS - MIN_CHARS) + MIN_CHARS;
            for (int charsPerWord = 0; charsPerWord < maxChars; charsPerWord++) {
               char c = (char) (random.nextInt('z' - 'a' + 1) + 'a');
               sb.append(c);
            }
            sb.append(" ");
         }
         textArea.append(sb.toString() + "\n");
      }

      textArea.addMouseListener(new MouseAdapter() {
         @Override
         public void mouseClicked(MouseEvent e) {
            if (e.getButton() != MouseEvent.BUTTON1) {
               return;
            }
            if (e.getClickCount() != 2) {
               return;
            }

            int offset = textArea.viewToModel(e.getPoint());

            try {
               int rowStart = Utilities.getRowStart(textArea, offset);
               int rowEnd = Utilities.getRowEnd(textArea, offset);
               String selectedLine = textArea.getText().substring(rowStart, rowEnd);
               System.out.println(selectedLine);

            } catch (BadLocationException e1) {
               e1.printStackTrace();
            }

         }
      });

      JOptionPane.showMessageDialog(null, scrollpane);
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T20:53:51.897

考虑使用 JList 而不是 JTextArea。JList 允许您从某个集合中选择一个元素。所以你只需用你需要的任何字符串填充这个集合，让用户选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T20:53:16.277

我认为 JList 更适合您的需求。

简单示例：[http ://www.cs.cf.ac.uk/Dave/HCI/HCI_Handout_CALLER/node143.html](http://www.cs.cf.ac.uk/Dave/HCI/HCI_Handout_CALLER/node143.html)

或者是否需要使用 JTextArea？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T21:15:12.150

基本上，您需要从该 JTextArea 中提取该行。但我建议您切换到更适合您的用例的组件：http: [//docs.oracle.com/javase/6/docs/api/javax/swing/JList.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/JList.html)

无论如何，您可以尝试像这样快速而肮脏的 hack：

```
public static String getLineOfSelectionStart(JTextArea textArea) {
    String contents = textArea.getText();
    int selStart = textArea.getSelectionStart();

    if (selStart >= 0) {
        int selEnd = selStart; // don't use getSelectionEnd(), since one
                                // could select multiple lines;

        while (selStart > 0) {
            switch (contents.charAt(selStart)) {
            case '\r':
            case '\n':
                break;
            default:
                --selStart;
                continue;
            }
            break;
        }
        while (selEnd < contents.length()) {
            switch (contents.charAt(selEnd)) {
            case '\r':
            case '\n':
                break;
            default:
                ++selEnd;
                continue;
            }
            break;
        }

        return contents.substring(selStart, selEnd);
    }
    return null;
} 
```

但实际上，在列出大量文件时使用 String 并不会表现得那么好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T21:01:34.730

使用 JList 并检索所选选项，使用`getSelectedIndex()`检索索引或使用`getSelectedValue()`获取值。

见这里：[见 getSelectedIndex() 方法](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JList.html#getSelectedIndex%28%29)

# hibernate - 出现错误无法在 Mule Studio 中加载 JDBC 驱动程序类 [oracle.jdbc.OracleDriver]

> ID：14297810
> 
> 赞同：2
> 
> 时间：2013-01-12T20:48:52.650
> 
> 标签：hibernate, maven, mule, spring-3

我试图找出这个错误`Could not load JDBC driver class [oracle.jdbc.OracleDriver]`很长时间。我知道我在类路径中缺少 ojdbc14.jar 文件。我是 mule studio 的新手，并试图实现一个非常简单的 mule -spring-hibernate 示例。

但是我将如何在 mule-maven 项目中添加这个 jar 文件呢？

我尝试在 POM.xml 中添加 ojdbc14.jar 文件，但在这种情况下，maven 构建失败，我收到类似于此的错误 [http://stackoverflow.com/questions/9007009/is-there-an-issue-with -the-oracle-dependency] 注意我已经在 m2 repo 中添加了 ojdbc14.jar 文件。

这是我的 pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>pos_mule</groupId>
    <artifactId>pos_mule</artifactId>
    <packaging>mule</packaging>
    <version>1.0.0-SNAPSHOT</version>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>

        <mule.version>3.3.0</mule.version>
        <eclipsePluginVersion>2.8</eclipsePluginVersion>
        <jdkName>JavaSE-1.6</jdkName>
        <jdk.version>1.6</jdk.version>
        <junit.version>4.9</junit.version>
    </properties>

    <build>
        <!-- Use a newer version of the install plugin than what your Maven uses 
            by default. The older version failed to install the project if there was 
            no target/classes folder. Since we use mule packaging on the project we actually 
            create and attach the zip that must be installed. -->
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-install-plugin</artifactId>
                    <version>2.3.1</version>
                </plugin>
                <!--This plugin's configuration is used to store Eclipse m2e settings 
                    only. It has no influence on the Maven build itself. -->
                <plugin>
                    <groupId>org.eclipse.m2e</groupId>
                    <artifactId>lifecycle-mapping</artifactId>
                    <version>1.0.0</version>
                    <configuration>
                        <lifecycleMappingMetadata>
                            <pluginExecutions>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>org.mule.tools</groupId>
                                        <artifactId>maven-mule-plugin</artifactId>
                                        <versionRange>[1.6,)</versionRange>
                                        <goals>
                                            <goal>attach-test-resources</goal>
                                            <goal>filter-resources      </goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <ignore></ignore>
                                    </action>
                                </pluginExecution>
                            </pluginExecutions>
                        </lifecycleMappingMetadata>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.mule.tools</groupId>
                <artifactId>maven-mule-plugin</artifactId>
                <version>1.7</version>
                <extensions>true</extensions>
                <configuration>
                    <copyToAppsDirectory>true</copyToAppsDirectory>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>${jdk.version}</source>
                    <target>${jdk.version}</target>
                    <encoding>ISO-8859-1</encoding>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <version>2.2.1</version>
                <configuration>
                    <descriptorRefs>
                        <descriptorRef>project</descriptorRef>
                    </descriptorRefs>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>${eclipsePluginVersion}</version>
                <configuration>
                    <!-- by default download all sources when generating project files -->
                    <downloadSources>true</downloadSources>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <executions>
                  <execution>
                    <goals>
                      <goal>java</goal>
                    </goals>
                  </execution>
                </executions>
                <configuration>
                  <mainClass>org.mule.MuleServer</mainClass>
                  <arguments>
                    <argument>-config</argument>
                    <argument>src/main/app/mule-config.xml</argument>
                  </arguments>
                <classpathScope>compile</classpathScope>
                </configuration>
              </plugin>
        </plugins>
    </build>

    <!-- plugins for creating site reports -->
    <reporting>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-report-plugin</artifactId>
                <version>2.4.2</version>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-checkstyle-plugin</artifactId>
                <version>2.5</version>
                <configuration>
                    <configLocation>http://mulesoft.org/download/attachments/92/checkstyle.xml?version=1</configLocation>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-pmd-plugin</artifactId>
                <version>2.5</version>
                <configuration>
                    <targetJdk>${jdk.version}</targetJdk>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>cobertura-maven-plugin</artifactId>
                <version>2.5</version>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>taglist-maven-plugin</artifactId>
                <version>2.4</version>
                <configuration>
                    <tags>
                        <tag>TODO</tag>
                        <tag>@todo</tag>
                        <tag>FIXME</tag>
                        <tag>@fixme</tag>
                        <tag>@deprecated</tag>
                    </tags>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jxr-plugin</artifactId>
                <version>2.2</version>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-javadoc-plugin</artifactId>
                <version>2.7</version>
                <configuration>
                    <source>${jdk.version}</source>
                    <links>
                        <link>http://java.sun.com/j2ee/1.4/docs/api</link>
                        <link>http://java.sun.com/j2se/1.4.2/docs/api</link>
                        <link>http://java.sun.com/j2se/1.5.0/docs/api</link>
                    </links>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>jdepend-maven-plugin</artifactId>
                <version>2.0-beta-2</version>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>findbugs-maven-plugin</artifactId>
                <version>2.3.2</version>
            </plugin>
        </plugins>
    </reporting>

    <!-- Mule Dependencies -->
      <dependencies>
    <dependency>
        <groupId>org.mule</groupId>
        <artifactId>mule-core</artifactId>
        <version>3.4-M1</version>
    </dependency>
    <dependency>
        <groupId>pos_core</groupId>
        <artifactId>pos_core</artifactId>
        <version>0.0.1-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>pos_persistent</groupId>
        <artifactId>pos_persistent</artifactId>
        <version>0.0.1-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.2.0.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.3.2.GA</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.2.0.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>3.2.0.RELEASE</version>
    </dependency>
<dependency>
        <groupId>com.oracle</groupId>
        <artifactId>ojdbc14</artifactId>
        <version>10.2.0.4.0</version>
    </dependency>

      </dependencies>

    <repositories>
        <repository>
            <id>jboss</id>
            <name>JBoss</name>
            <url>http://repository.jboss.com/</url>
        </repository>
        <repository>
            <id>mulesoft-releases</id>
            <name>MuleSoft Releases</name>
            <url>http://repository.mulesoft.org/releases/</url>
        </repository>
        <repository>
            <id>oss-sonatype-snapshots</id>
            <url>https://oss.sonatype.org/content/repositories/snapshots/</url>
        </repository>
        <repository>
            <id>codehaus-snaphosts</id>
            <name>Codehaus Snapshots</name>
            <url>http://snapshots.repository.codehaus.org/</url>
        </repository>
        <repository>
            <id>codehaus-releases</id>
            <name>CodeHaus Releases</name>
            <url>http://repository.codehaus.org/</url>
        </repository>

    </repositories>

</project> 
```

这是我的 pos_mule.mflow

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" version="CE-3.3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd ">

<spring:beans>
 <spring:import resource="classpath:spring-mule.xml"/>
</spring:beans>

</mule> 
```

这是我的 spring-mule.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee"
    xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:p="http://www.springframework.org/schema/p"
    .." >
        <bean id="datasource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
<property name="driverClassName" value="oracle.jdbc.OracleDriver" />
<property name="url" value="jdbc:oracle:thin:@localhost:1521:xe" />
<property name="username" value="dfdfdff" />
<property name="password" value="dfdfdff" />
</bean> 

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="datasource" />
        <property name="configLocation">
            <value>classpath:hibernate.cfg.xml</value>
        </property>
        <property name="configurationClass">
            <value>org.hibernate.cfg.AnnotationConfiguration</value>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="cache.provider_class">org.hibernate.cache.NoCacheProvider</prop>
                <prop key="hibernate.connection.release_mode">auto</prop>
            </props>
        </property>
    </bean>

    <tx:annotation-driven />
    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>
 </beans> 
```

当我删除以下依赖项时，maven build 执行良好。

```
 <dependency>
            <groupId>com.oracle</groupId>
            <artifactId>ojdbc14</artifactId>
            <version>10.2.0.4.0</version>
        </dependency> 
```

当我将项目作为骡子应用程序运行时，我收到以下错误。

```
 ..
    Caused by: java.lang.ClassNotFoundException: oracle.jdbc.OracleDriver
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at org.mule.module.launcher.FineGrainedControlClassLoader.findClass(FineGrainedControlClassLoader.java:179)
        at org.mule.module.launcher.MuleApplicationClassLoader.findClass(MuleApplicationClassLoader.java:143)
        at org.mule.module.launcher.FineGrainedControlClassLoader.loadClass(FineGrainedControlClassLoader.java:123)
        at org.mule.module.launcher.MuleApplicationClassLoader.loadClass(MuleApplicationClassLoader.java:149)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:247)
        at org.springframework.jdbc.datasource.DriverManagerDataSource.setDriverClassName(DriverManagerDataSource.java:147)
        ... 55 more
    Exception in thread "main" org.mule.module.launcher.DeploymentInitException: PropertyBatchUpdateException: Failed properties: Property 'driverClassName' threw exception; nested exception is java.lang.IllegalStateException: Could not load JDBC driver class [oracle.jdbc.OracleDriver]
        at org.mule.module.launcher.application.DefaultMuleApplication.init(DefaultMuleApplication.java:220)
        at org.mule.module.launcher.application.ApplicationWrapper.init(ApplicationWrapper.java:64)
        at org.mule.module.launcher.DefaultMuleDeployer.deploy(DefaultMuleDeployer.java:46)
        at org.mule.tooling.server.application.ApplicationDeployer.run(ApplicationDeployer.java:56)
        at org.mule.tooling.server.application.ApplicationDeployer.main(ApplicationDeployer.java:88)
    Caused by: org.mule.api.config.ConfigurationException: Error creating bean with name '_muleNotificationManager': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [spring-mule.xml]: Cannot resolve reference to bean 'datasource' while setting bean property 'dataSource'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'datasource' defined in class path resource [spring-mule.xml]: Error setting property values; nested exception is org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:
    PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'driverClassName' threw exception; nested exception is java.lang.IllegalStateException: Could not load JDBC driver class [oracle.jdbc.OracleDriver] (org.mule.api.lifecycle.InitialisationException) (org.mule.api.config.ConfigurationException)
        at org.mule.config.builders.AbstractConfigurationBuilder.configure(AbstractConfigurationBuilder.java:52)
        at org.mule.config.builders.AbstractResourceConfigurationBuilder.configure(AbstractResourceConfigurationBuilder.java:78)
        at org.mule.context.DefaultMuleContextFactory.createMuleContext(DefaultMuleContextFactory.java:80)
        at org.mule.module.launcher.application.DefaultMuleApplication.init(DefaultMuleApplication.java:208)
        ... 4 more
    Caused by: org.mule.api.config.ConfigurationException: Error creating bean with name '_muleNotificationManager': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [spring-mule.xml]: Cannot resolve reference to bean 'datasource' while setting bean property 'dataSource'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'datasource' defined in class path resource [spring-mule.xml]: Error setting property values; nested exception is org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:
    PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'driverClassName' threw exception; nested exception is java.lang.IllegalStateException: Could not load JDBC driver class [oracle.jdbc.OracleDriver] (org.mule.api.lifecycle.InitialisationException)
        at org.mule.config.builders.AbstractConfigurationBuilder.configure(AbstractConfigurationBuilder.java:52)
        at org.mule.config.builders.AbstractResourceConfigurationBuilder.configure(AbstractResourceConfigurationBuilder.java:78)
        at org.mule.config.builders.AutoConfigurationBuilder.autoConfigure(AutoConfigurationBuilder.java:101)
        at org.mule.config.builders.AutoConfigurationBuilder.doConfigure(AutoConfigurationBuilder.java:57)
        at org.mule.config.builders.AbstractConfigurationBuilder.configure(AbstractConfigurationBuilder.java:46)
        ... 7 more
    Caused by: org.mule.api.lifecycle.InitialisationException: Error creating bean with name '_muleNotificationManager': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [spring-mule.xml]: Cannot resolve reference to bean 'datasource' while setting bean property 'dataSource'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'datasource' defined in class path resource [spring-mule.xml]: Error setting property values; nested exception is org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:
    PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'driverClassName' threw exception; nested exception is java.lang.IllegalStateException: Could not load JDBC driver class [oracle.jdbc.OracleDriver]
        at org.mule.registry.AbstractRegistry.initialise(AbstractRegistry.java:117)
        at org.mule.config.spring.SpringXmlConfigurationBuilder.createSpringRegistry(SpringXmlConfigurationBuilder.java:116)
        at org.mule.config.spring.SpringXmlConfigurationBuilder.doConfigure(SpringXmlConfigurationBuilder.java:73)
        at org.mule.config.builders.AbstractConfigurationBuilder.configure(AbstractConfigurationBuilder.java:46)
        ... 11 more
    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name '_muleNotificationManager': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [spring-mule.xml]: Cannot resolve reference to bean 'datasource' while setting bean property 'dataSource'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'datasource' defined in class path resource [spring-mule.xml]: Error setting property values; nested exception is org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:
    PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'driverClassName' threw exception; nested exception is java.lang.IllegalStateException: Could not load JDBC driver class [oracle.jdbc.OracleDriver]
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:149)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:102)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1442)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:248)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:581)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
        at org.mule.config.spring.SpringRegistry.doInitialise(SpringRegistry.java:89)
        at org.mule.registry.AbstractRegistry.initialise(AbstractRegistry.java:109)
        ... 14 more
    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [spring-mule.xml]: Cannot resolve reference to bean 'datasource' while setting bean property 'dataSource'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'datasource' defined in class path resource [spring-mule.xml]: Error setting property values; nested exception is org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:
    PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'driverClassName' threw exception; nested exception is java.lang.IllegalStateException: Could not load JDBC driver class [oracle.jdbc.OracleDriver]
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.AbstractBeanFactory.isSingleton(AbstractBeanFactory.java:408)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:319)
        at org.springframework.context.support.AbstractApplicationContext.getBeanNamesForType(AbstractApplicationContext.java:1154)
        at org.mule.config.spring.ServerNotificationManagerConfigurator.getMergedListeners(ServerNotificationManagerConfigurator.java:83)
        at org.mule.config.spring.ServerNotificationManagerConfigurator.getObject(ServerNotificationManagerConfigurator.java:65)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:142)
        ... 23 more
    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'datasource' defined in class path resource [spring-mule.xml]: Error setting property values; nested exception is org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:
    PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'driverClassName' threw exception; nested exception is java.lang.IllegalStateException: Could not load JDBC driver class [oracle.jdbc.OracleDriver]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1396)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
        ... 38 more
    Caused by: org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:
    PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'driverClassName' threw exception; nested exception is java.lang.IllegalStateException: Could not load JDBC driver class [oracle.jdbc.OracleDriver]
        at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:102)
        at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:58)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1393)
        ... 46 more 
```

请提出任何解决方案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T21:57:11.353

您是如何将其添加到您的 m2 存储库中的？如果您从提供的链接中遇到问题，则表示您没有在您的存储库中正确安装 jar。

你应该像这样安装jar：

```
mvn install:install-file 
    -Dfile=path/to/ojdbc14.jar 
    -DgroupId=com.oracle 
    -DartifactId=ojdbc14 
    -Dversion=10.2.0.4.0 
    -Dpackaging=jar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-25T13:33:02.727

给定的 Maven 依赖项不起作用

`<dependency> <groupId>com.oracle</groupId> <artifactId>ojdbc14</artifactId> <version>10.2.0.4.0</version> </dependency>`

您需要手动下载 ojdbc 的 jar 文件并将其添加到 mule 项目中。您可以按照以下步骤执行此操作。

1.  在项目中创建一个 lib 文件夹。
2.  将下载的jar文件放到lib文件夹中
3.  通过右键单击项目名称 -> 构建路径 -> 添加库 -> 导航到 jar 位置 -> 添加，将其添加到项目的构建路径。

希望这有帮助

# ruby-on-rails - Rails 将 application.js 更改为 application.js.coffee

> ID：14297812
> 
> 赞同：2
> 
> 时间：2013-01-12T20:49:18.847
> 
> 标签：ruby-on-rails

我喜欢咖啡！

有什么原因我不能将我的 application.js 文件更改为 application.js.coffee？

谢谢！

更新：

我只是尝试更改它并收到此错误（以及其他 58 个错误）：第 11 行的保留字“function”（在 /Users/burtondav/sites/requestsys/app/assets/javascripts/application.js.coffee）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:14:10.433

您正在尝试重命名清单文件。它是资产管道的重要组成部分。它有一个特殊的用途：管理 javasript 资产。如果您查看该`application.js`文件的默认结构，您会发现它非常不寻常。我认为用coffeescript 编写的更好方法是使用代码片段创建文件并将它们放在相关的`javascripts`资产文件夹中。尝试创建一个新的 js.coffee 文件并将其放在`app/assets/javascripts`目录中。在大多数通常情况下，它将准备好运行。如果您要翻译 javasript -> coffeescript ，我想您知道[js2coffee](http://js2coffee.org/)工具。

# c# - 如何将整个模型从我的索引视图传递到完全不同的控制器？

> ID：14297815
> 
> 赞同：2
> 
> 时间：2013-01-12T20:49:44.657
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, viewbag

这是我的索引视图（Index.cshtml）的相关部分：

```
 @foreach (var item in Model) {
       <li>
            @Html.ActionLink(item.name, "Index", "Filler", new { cap = item }, null)
       </li>
    } 
```

如您所见，ActionLink 与 Filler Controller 上的 Index 动作相关联，并传入整个项目（模型）——“项目”的类型为“胶囊”。

现在，在我的填充控制器上，在索引操作中：

```
 public ActionResult Index(capsule cap)
        {
            var fillers = db.fillers.ToList();
            return View(fillers);
        } 
```

Entity Framework自动生成的capsule类是：

```
namespace CapWorx.Models
{
using System;
using System.Collections.Generic;

public partial class capsule
{
    public capsule()
    {
        this.fillers = new HashSet<filler>();
    }

    public int pk { get; set; }
    public string name { get; set; }

    public virtual ICollection<filler> fillers { get; set; }
}
} 
```

问题是上述索引操作中的“上限”为 NULL。但是，如果我将类型更改为“对象”而不是“胶囊”，我会得到一些奇怪的非空数据，但我不能将对象转换为“胶囊”。有谁知道为什么这是NULL？

谢谢，

麦克风

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T22:38:52.987

你通常只需要传递`id`给动作。例如，您是否可以重构您的代码，以便它可以接收 a `capsuleId`，从 db 获取胶囊并进行所需的任何处理。将整个对象添加到路由值`ActionLink`没有任何意义。查看正在生成的链接。它可能就像`...?cap=Namespace.Capsule`对象会被`ToString`编辑一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:33:44.333

第一个问题是在 MVC 中您无法绑定到接口 ( `ICollection`)。您需要将其更改为 List - `List<filler>`。您将面临的第二个问题是列表/数组需要以数组表示法表示才能正确发布，例如`name="books[0].book_id"`. 即使 MVC 做了很多魔法，链接中的模型最终仍然必须表示为查询字符串。

根据您要执行的操作，您最好将模型表示为 JSON 对象并使用 .ajax() 发布。

有关其他想法，请参阅此 SO 帖子 -[需要帮助将 Set 与 Spring MVC 表单绑定](https://stackoverflow.com/questions/5212408/need-help-with-binding-set-with-spring-mvc-form)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-12T22:45:01.037

`@Html.ActionLink` just generates an anchor element (`<a href="...">...</a>`), so it makes no sense to attempt to bind a complete object to the `routeValues` parameter. As @manojlds says, it make much more sense to just pass the relevent key value, since you'll be performing the lookup then anyway (remember, the web is "stateless").

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-12T21:45:12.137

我不完全确定这为什么会起作用（我认为您正在取消 html 属性），但请尝试删除操作链接的“null”部分。

或者，创建模型的控制器是错误的。

再说一次，不要为此杀了我。

# c# - 触发某些事件时如何更改listboxitem中的按钮中的图像？

> ID：14297816
> 
> 赞同：0
> 
> 时间：2013-01-12T20:49:50.470
> 
> 标签：c#, silverlight, windows-phone-7, button

我正在制作一个`LongListboxSelector`显示音轨的页面。每个项目都有`Button`“播放”以及`TextBlock`艺术家和标题信息。我正在使用`BackgroundAudioPlayer`. 我的愿望是制作**下一个**：当曲目正在播放时 - 图像`Button`是“暂停”，当曲目结束时 - 使其`Button`图像“播放”，并使下一曲目的`Button`图像“暂停”（下一首曲目自动播放）。我试过了，喜欢这个

```
 public AudioListPage()
    {
        InitializeComponent();
        BackgroundAudioPlayer.Instance.PlayStateChanged += Instance_PlayStateChanged;
    }

    void Instance_PlayStateChanged(object sender, EventArgs e)
    {
        if (BackgroundAudioPlayer.Instance.PlayerState == PlayState.Stopped)
        {
            IEnumerable buttons = AudioLLS.Descendants<Coding4Fun.Phone.Controls.RoundButton>();
            var test = new BitmapImage(new Uri(@"/Images/appbar.transport.pause.rest.png", UriKind.Relative));

            foreach (Coding4Fun.Phone.Controls.RoundButton item in buttons)
            {                   
                if (item.ImageSource == test)
                {
                    MessageBox.Show("in new image");
                    item.ImageSource = new BitmapImage(new Uri(@"/Images/appbar.transport.play.rest.png", UriKind.Relative));
                    buttons.GetEnumerator().MoveNext();
                    item.ImageSource = new BitmapImage(new Uri(@"/Images/appbar.transport.pause.rest.png", UriKind.Relative));
                }

            }
        }
    } 
```

`PlayState.Stopped`当 track 结束时触发，next 将开始。我尝试使用`LinqToVisualTree`helper in获取 LLS 中的所有按钮，`IEnumerable buttons = AudioLLS.Descendants<Coding4Fun.Phone.Controls.RoundButton>()`并将它们的图像与`test`. 但正如我所看到的 - 我做错了，因为阻止`if(item.ImageSource == test)`我的应用程序永远不会出现。请告诉我，我做错了什么？如果我解决问题的方法不好 - 请告诉我如何以简单的方式做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:05:09.737

我在我的音频模型中添加了两个属性

```
 private bool isPlaing = false;
    public bool IsPlaing 
    { 
        get { return isPlaing; }
        set 
        { 
            isPlaing = value;
            OnPropertyChanged("IsPlaing");
            if (IsPlaing) Image = @"/Images/appbar.transport.pause.rest.png";
            else if (!IsPlaing) Image = @"/Images/appbar.transport.play.rest.png";
        }
    }
    private string image = @"/Images/appbar.transport.play.rest.png";
    public string Image { get { return image; } set { image = value; OnPropertyChanged("Image"); } } 
```

在`playerStateChanged`我添加

```
 if (BackgroundAudioPlayer.Instance.PlayerState == PlayState.Stopped)
        {
            for (int i = 0; i < AudioList.Count; i++)
            {
                if (AudioList[i].Url1 == currTrack)
                {
                    AudioList[i].IsPlaing = false;
                    currTrack = AudioList[i + 1].Url1;
                    AudioList[i + 1].IsPlaing = true;
                    break;
                }

                }
            }
            BackgroundAudioPlayer.Instance.Play();
        } 
```

这样我就解决了我的问题。正如我所看到的 - 一切正常。

# ruby-on-rails - RoR、Rspec 测试神秘失败

> ID：14297817
> 
> 赞同：1
> 
> 时间：2013-01-12T20:49:51.323
> 
> 标签：ruby-on-rails, ruby, testing, rspec

我正在编写用于创建用户帐户的集成测试。

```
describe "with valid information" do
  before (:each) do
    fill_in 'first name',             :with => 'test'
    fill_in 'last name',              :with => 'user'
    fill_in "email",                  :with => "test@shakeshack.com"
    fill_in "password",               :with => "1234567"
    fill_in "password confirmation",  :with => "1234567"
  end

  it "should create a user" do
    expect {click_button "Create"}.to change(User, :count).by(1)

  end
end 
```

当我运行本地服务器并使用相同的信息填写上述字段时，用户帐户已成功创建。我得到的错误如下：

```
User pages signup with valid information should create a user
 Failure/Error: expect {click_button "Create"}.to change(User, :count).by(1)
   count should have been changed by 1, but was changed by 0
 # ./spec/requests/users_spec.rb:43:in `block (4 levels) in <top (required)>' 
```

提前感谢您的解决方案或建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:12:12.240

一些建议和要寻找的东西：

*   您确定在浏览器中测试时已成功创建用户吗？您是否在 Rails 控制台或其他方式中进行了验证？
*   您确定这些数据足以成功创建用户吗？
*   在这种情况下，我通常会在某处发生静默失败，可能是由于未使用 bang 方法（例如`save!`）或未正确检查非 bang 方法的返回值（例如`save`）。

在测试期间，您始终可以`save_and_open_page`在规范中使用 capybara 来查看浏览器中的页面渲染：

```
describe "with valid information" do
  before (:each) do
    fill_in 'first name',             :with => 'test'
    fill_in 'last name',              :with => 'user'
    fill_in "email",                  :with => "test@shakeshack.com"
    fill_in "password",               :with => "1234567"
    fill_in "password confirmation",  :with => "1234567"
    save_and_open_page
  end

  it "should create a user" do
    expect {click_button "Create"}.to change(User, :count).by(1)

  end
end 
```

# php - 在 WordPress 中，将自定义字段数据插入文件而不是数据库

> ID：14297819
> 
> 赞同：0
> 
> 时间：2013-01-12T20:50:11.130
> 
> 标签：php, wordpress, custom-fields

有没有办法将 WordPress 自定义字段中的数据插入自定义文件而不是 MySQL 数据库？

我想这样做的原因是因为我试图为用户设置一个自定义字段作为一种 PHP 沙箱，我想只`include filename.php`在模板文件中使用并避免将 PHP 数据插入数据库和安全漏洞随之而来的，或者更糟糕的是，必须`eval`在从数据库中检索到数据后使用。

我愿意接受任何其他建议来实现这一点，但我认为最简单的方法是将数据存储在随机 php 文件中并完全绕过数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:09:26.513

让我先说：

## 这是一个坏主意

您的想法是让最终用户上传您将在服务器上执行的 PHP 脚本。什么可以阻止攻击者上传这样的脚本：

```
<?php
// get a list of all of the wp-config.php files available to this user
$configs = shell_exec("cd ~ && find `pwd` -name wp-config.php");
// go through every match and email the contents 
// of the file to my super secret hacker email or whatever
// btw i now have mysql credentials for all of your wp sites.
?> 
```

这甚至都没有想象力。

## 这里说的是怎么做

### 在您的 WP 网站上下载并安装[https://github.com/fyaconiello/WP_Bad_Idea](https://github.com/fyaconiello/WP_Bad_Idea)作为插件

然后将其添加到您的主题`single-attack_post.php`

```
<h3>THE CODE</h3>
<pre>
<?php include($post->attack_code); ?>
</pre> 
```

# php - 是否可以检测何时包含 php 文件？

> ID：14297821
> 
> 赞同：3
> 
> 时间：2013-01-12T20:50:31.697
> 
> 标签：php

所以在文件中`first.php`我将包含`original.php`文件`include_once`。

当我尝试调用内部的函数并且`original.php`如果没有用户会话时该文件未加载时，就会出现问题。

基本上我包含文件`original.php`，其中有几个函数我稍后会调用`first.php`，但由于我设置的限制，这些函数无法访问`original.php`，但现在我想添加规则以`original.php`允许来自`first.php`或任何其他 PHP 文件的此类请求包括`original.php`...

我想知道在这种情况下我可以做什么，或者我可以简单地添加一些 if 子句`original.php`，例如：

```
if($fileIncluded == 'yes')
{
   // do not check if user session exist etc.
}
else
{
   // check for user session
} 
```

感谢您的想法和提前帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T21:04:30.587

您可以在要包含的文件中设置一个常量，如下所示：

在`original.php`：

```
define('ORIGINAL_INCLUDED', TRUE); 
```

然后`first.php`检查常量是否存在：

```
if (defined('ORIGINAL_INCLUDED'))
{
    // do not check if user session exist etc.
}
else
{
    // check for user session
} 
```

与[get_included_files()](http://php.net/manual/en/function.get-included-files.php)不同，这将在脚本包含脚本时起作用。`get_included_files()`只会返回包含在主脚本中的文件，而不是包含在子脚本中的脚本。

或在`original.php`：

```
if ('original.php' == basename(__FILE__))
{
    // original.php directly accessed
}
else
{
    // original.php included instead
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T20:56:38.807

PHP 提供了一个**[get_included_files](http://php.net/manual/en/function.get-included-files.php)**函数，在这种情况下似乎可以工作。

```
if in_array('file.php', get_included_files()) {
    /* ... */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T20:52:41.860

好吧，我是 PHP 新手，但我愿意

```
$add_file = require(file.php); 
```

然后做

```
if($add_file) {echo "file is aded";} else {echo "file is not added";} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T20:56:15.113

您可以使用该函数`get_included_files()`或设置如下变量：

```
 // includedfile.php
 $variable = true;

 //index.php
 include 'includedfile.php';

 if(isset($variable)) {
     // file included
 } else {
     // not included
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-12T21:06:33.340

您还可以定义一个常量，并检查它是否稍后定义。为此使用*定义*和*定义*函数。我认为这比使用普通变量更好。

PHP 文档：[http](http://ch2.php.net/manual/en/function.defined.php) ://ch2.php.net/manual/en/function.defined.php和[http://ch2.php.net/manual/en/function.define.php](http://ch2.php.net/manual/en/function.define.php)

# jquery - jQuery Flyout 面板不会关闭

> ID：14297824
> 
> 赞同：0
> 
> 时间：2013-01-12T20:51:25.730
> 
> 标签：jquery, wordpress, flyout

我构建了这个弹出式联系面板。它运行良好，直到我将它放入我的 Wordpress 网站，然后它根本拒绝运行。这是它应该做的：

[http://jsfiddle.net/XwTpE/1/](http://jsfiddle.net/XwTpE/1/)

我发现如果我把它放在`jQuery(document).ready`开头，它开始工作，但现在它不会关闭！当您按下关闭按钮时，它会重新打开。事实上，我注意到您在页面上单击的任何位置都会导致它重新打开。在此处查看演示：

[http://jsfiddle.net/q9b7M/1/](http://jsfiddle.net/q9b7M/1/)

希望这很容易解决！任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:57:16.830

这不是您使用[DOM Ready 处理程序](http://api.jquery.com/ready/)的方式：

```
jQuery(function ($) { //shorthand for DOM Ready, put your code inside of it
  $('#contactFlyout').click(function () {
    $(".togglepanel:visible").hide();
    $("#contact_panel").animate({
      width: 'toggle',
      height: 'toggle'
    }, 200);
  });
  $('.closeDiv').click(function () {
    $(".togglepanel:visible").animate({
      width: 'toggle',
      height: 'toggle'
    }, 200);
  });
}); 
```

[**小提琴**](http://jsfiddle.net/q9b7M/3/)

特殊`jQuery(function($){})`语法对 WP 非常有用，因为它将 jQuery 别名返回到`$`DOM 就绪处理程序范围内。如果您不想`jQuery`一遍又一遍地输入，这非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:57:44.503

你需要：

```
jQuery(document).ready(function() {
  jQuery('#contactFlyout').click(function()
 {
    jQuery(".togglepanel:visible").hide();
    jQuery("#contact_panel").animate({width:'toggle',height:'toggle'},200 );
});

// the close button
$('.closeDiv').click(function()
 {
    jQuery(".togglepanel:visible").animate({width:'toggle',height:'toggle'},200 );

});
}); 
```

见：http: [//jsfiddle.net/DcRHh/2/](http://jsfiddle.net/DcRHh/2/)

或者您可以使用 Fabricio 指出的速记。虽然我会在 Wordpress 中坚持使用 jQuery 而不是 $，除非你知道在避免与其他脚本冲突时你在做什么。

# java - 变量不在类之间传递

> ID：14297827
> 
> 赞同：0
> 
> 时间：2013-01-12T20:51:36.980
> 
> 标签：java, class, methods, user-input

我已经放弃了旧问题，因为它不清楚并且有一堆错误，我发现“我认为”的解决方案更容易一些，尽管没有完全工作。修订:::::::: LognL 类

```
public final class LogInL extends JFrame {
Connection conn = null;
ResultSet rs = null;
PreparedStatement pst = null;
String Username;
String ID;
public LogInL() {
    initComponents();
    ButtonGroup();         
}

private void backBActionPerformed(ActionEvent e) {
    LoginMain login = new LoginMain();
    login.setVisible(true);
    this.dispose();
}

private void LoginBActionPerformed(ActionEvent e) {

    if(prosecutorCB.isSelected())
    {
        try {
            conn = SQLConnect.ConnectDb();
            String sql = "SELECT prosecutors.username, criminalrecords.ID FROM prosecutors, criminalrecords "
                       + "WHERE username = ? and ID = ?";
            pst = conn.prepareStatement(sql);
            pst.setString(1, usernameF.getText());
            pst.setString(2, criminalIdF.getText());

            Username = usernameF.getText();
            System.out.println("Username is " + Username);

            ID = criminalIdF.getText();
            System.out.println("Criminal ID is " + ID);
            rs = pst.executeQuery();
            if(rs.next())
            {
                ProsecutorMain Frame = new ProsecutorMain(); // call Policemain class //display it
                Frame.pack();
                Frame.setVisible(true); // make it visible 
                System.out.println("Welcome to prosecutors");
                this.dispose();
            }
            else
            {
                JOptionPane.showMessageDialog(null,"<html>wrong username or criminal ID<br>"
                + "Criminal may not longer be in database");
            }
        } 
        catch (SQLException ex) 
        {
            Logger.getLogger(LogInL.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//end if proseutor

}//end logination

private void ButtonGroup()
{
    ButtonGroup bg = new ButtonGroup();
    bg.add(prosecutorCB);
    bg.add(criminaldefenceCB);
} 
```

修订:::::::: ProsecutorMain 类

```
public class ProsecutorMain extends JFrame {
Connection conn = null;
ResultSet rs = null;
PreparedStatement pst = null;
LogInL id = new LogInL();
String UserName;
public ProsecutorMain() throws SQLException 
{
    initComponents();
    UserName = id.Username;
    username.setText(UserName);

    firstname.setText("blablabla");
    incidentlocation.setText("kupa");
    System.out.println(UserName);

} 
private void logOutActionPerformed(ActionEvent e) {

        int response = JOptionPane.showConfirmDialog(null, "<html> Are you sure you want to log out?", 
                "Confirm",JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE);
        if (response == JOptionPane.NO_OPTION) 
        {

        }
        if (response == JOptionPane.YES_OPTION)
        {
            this.dispose();
            LogInL login = new LogInL();
            login.setVisible(true);
            JOptionPane.showMessageDialog(null,"You have been sucessfully logged out");
        }       
    } 
```

问题中的变量是用户名

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:11:09.737

当您创建一个新实例时，该变量`UserName`就`null`在其中，该实例不具有数据库中原始（和显示）实例的值。`ProsecutorMain``LogInL``JFrame`

要修复，您必须传入已设置*的实例：*`Username`

```
public ProsecutorMain(LogInL id) {
   this.id = id;
   ...
} 
```

并创建`LogInL`：

```
new ProsecutorMain(this); 
```

* * *

`ProsecutorMain` `JFrame`当您从查询中获得结果时，您可以创建一个`LawRecord`包含必要字段`username`和字段的自定义，而不是创建一个新的`id`。然后，您可以将其传递给`ProsecutorMain`.

`JFrames`您可以使用模式`JDialog`来接受搜索条件，而不是在这里使用 2 。

链接：[如何制作对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

# ruby - 与输出的混淆来自从 IRB 调用的用户定义的实例方法

> ID：14297828
> 
> 赞同：1
> 
> 时间：2013-01-12T20:51:41.837
> 
> 标签：ruby, ruby-1.9.3

```
class Object
  def all_equals(o)
    ops = [:==, :===, :eql?, :equal?]
    Hash[ops.map(&:to_s).zip(ops.map {|s| send(s, o) })]
  end
end 
```

***输出***

```
"a".all_equals "a" # => {"=="=>true, "==="=>true, "eql?"=>true, "equal?"=>false} 
```

任何人都可以通过尽可能深入地破坏代码来帮助我，看看它是如何产生这样的输出的吗？

只是想知道给出一些输出的逻辑

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:12:37.707

```
self
# => "a"

o
# => "a"

ops.map(&:to_s)
# => [:==, :===, :eql?, :equal?].map(&:to_s)
# => ["==", "===", "eql?", "equal?"]

ops.map {|s| send(s, o) }
# => [:==, :===, :eql?, :equal?].map {|s| "a".send(s, "a") }
# => ["a".send(:==, "a"), "a".send(:===, "a"), "a".send(:eql?, "a"), "a".send(:equal?, "a")]
# => ["a" == "a", "a" === "a", "a".eql?("a"), "a".equal?("a")]
# => [true, true, true, false]

ops.map(&:to_s).zip(ops.map {|s| send(s, o) })
# => ["==", "===", "eql?", "equal?"].zip([true, true, true, false])
# => [["==", true], ["===", true], ["eql?", true], ["equal?", false]]

Hash[ops.map(&:to_s).zip(ops.map {|s| send(s, o) })]
# => Hash[[["==", true], ["===", true], ["eql?", true], ["equal?", false]]]
# => {"==" => true, "===" => true, "eql?" => true, "equal?" => false} 
```

# ios - RestKit POST 对象到服务器，但服务器收到空的 GET 请求

> ID：14297829
> 
> 赞同：0
> 
> 时间：2013-01-12T20:51:54.293
> 
> 标签：ios, ios6, restkit

当我`postObject`在 RestKit 中使用该方法时，日志显示一切正常（见下文）。

但是在服务器上，请求被接收为`GET`并且请求正文为空，而不是`POST`包含序列化对象的 a。

```
2013-01-12 14:40:08.860 AppName[3953:c07] I restkit.network:RKHTTPRequestOperation.m:152 POST 'http://urlgoeshere.com' 
```

下面是我用于`POST`和 RestKit 初始化的代码。我正在使用 RestKit 0.20.0-pre6。

**POST 对象到服务器**

```
// CREATE THE MANAGED OBJECT, AND SAVE IT
RKManagedObjectStore *objectStore = [[RKObjectManager sharedManager] managedObjectStore];
Message *msg = [NSEntityDescription insertNewObjectForEntityForName:@"Message" inManagedObjectContext:objectStore.mainQueueManagedObjectContext];
msg.note = @"This is a sample message.";
msg.dateCreated = [NSDate date];
[objectStore.mainQueueManagedObjectContext save:nil];

// BUILD THE REQUEST MAPPING & REQUEST DESCRIPTOR
RKObjectMapping *requestMapping = [RKObjectMapping requestMapping];
[requestMapping addAttributeMappingsFromDictionary:@{
 @"messageId": @"id",
 @"dateCreated": @"date_created",
 }];
[requestMapping addAttributeMappingsFromArray:@[ @"note" ]];
RKRequestDescriptor *requestDescriptor = [RKRequestDescriptor requestDescriptorWithMapping:requestMapping objectClass:[Message class] rootKeyPath:@"message"];
[[RKObjectManager sharedManager] addRequestDescriptor:requestDescriptor];

// SEND POST REQUEST TO SERVER
[[RKObjectManager sharedManager] postObject:msg
                                       path:@"/path/to/messages"
                                 parameters:[NSDictionary dictionaryWithObject:[(AppDelegate*)[[UIApplication sharedApplication] delegate] userId] forKey:@"user_id"]
                                    success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
                                        NSLog(@"success!");
                                    }
                                    failure:^(RKObjectRequestOperation *operation, NSError *error) {
                                        NSLog(@"failure.\n\n%@", [error description]);
                                    }
 ]; 
```

**App Delegate 中的 RestKit 初始化**

```
NSURL *baseURL = [NSURL URLWithString:@"http://urlgoeshere.com"];
RKObjectManager *objectManager = [RKObjectManager managerWithBaseURL:baseURL];

// Initialize managed object store
NSManagedObjectModel *managedObjectModel = [NSManagedObjectModel mergedModelFromBundles:nil];
RKManagedObjectStore *managedObjectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:managedObjectModel];
objectManager.managedObjectStore = managedObjectStore;

// Setup our object mappings    
RKEntityMapping *messageMapping = [RKEntityMapping mappingForEntityForName:@"Message" inManagedObjectStore:managedObjectStore];
messageMapping.identificationAttributes = @[ @"messageId" ];
[messageMapping addAttributeMappingsFromDictionary:@{
 @"id": @"messageId",
 @"date_created": @"dateCreated",
 }];
[messageMapping addAttributeMappingsFromArray:@[ @"note" ]];

[managedObjectStore createPersistentStoreCoordinator];
NSString *storePath = [RKApplicationDataDirectory() stringByAppendingPathComponent:@"DBNameHere.sqlite"];
NSError *error;
NSPersistentStore *persistentStore = [managedObjectStore addSQLitePersistentStoreAtPath:storePath fromSeedDatabaseAtPath:nil withConfiguration:nil options:nil error:&error];
NSAssert(persistentStore, @"Failed to add persistent store with error: %@", error);

// Create the managed object contexts
[managedObjectStore createManagedObjectContexts];

// Configure a managed object cache to ensure we do not create duplicate objects
managedObjectStore.managedObjectCache = [[RKInMemoryManagedObjectCache alloc] initWithManagedObjectContext:managedObjectStore.persistentStoreManagedObjectContext]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:22:21.540

你在和什么样的服务器说话？我怀疑您的服务器正在执行重定向或其他操作。RestKit 使用 NSURLConnection 发出请求，因此问题极不可能出现在客户端，因为您在日志中看到的报告是直接从 NSURLRequest 读取的。

# javascript - HTML/CSS 可滚动 加载时显示元素的底部而不是顶部

> ID：14297834
> 
> 赞同：0
> 
> 时间：2013-01-12T20:52:26.047
> 
> 标签：javascript, html, css

我有可以垂直滚动的 div。问题是当 div 加载时它显示 div 的底部而不是顶部。不能让它显示在顶部。有什么建议么？

单击时激活它的Javascript代码：

```
 var pbody = document.getElementById("pbody");
 pbody.style.display = "block"; 
```

HTML：

```
<div id="pbody">
         text stuff
</div> 
```

CSS：

```
#pbody {
    display: none;
    position: relative;
    width: 800px;
    height: 2000px;
    background-color: black;
    border-radius: 100px;
    margin: auto;
    margin-top: 10px;
    overflow: hidden;
    z-index: 200;
    color: white;
    text-align: center;
} 
```

# cmake - Cmake 无法运行 shell 命令

> ID：14297840
> 
> 赞同：0
> 
> 时间：2013-01-12T20:52:58.007
> 
> 标签：cmake, protocol-buffers

假设我们有一个包含一些子目录的项目，我们需要在其子目录之一中生成 .cpp 和 .h 文件。真实的事实：如果我们在该目录中运行命令（不带 < 和 >），它会生成有效文件。

那么如何使用 cmake 做同样的事情呢？

Cmake 有 add_custom_command，但它什么也没做，所以我们不能使用它。execute_process 更好，因为它运行一些东西，但是以错误的方式。

```
execute_process(COMMAND "protoc -I=\".\" --cpp_out=\".\" protocol.proto"
                WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}) 
```

不幸的是，结果什么也没有，因为 cmake 无法正确运行命令，所以“protoc”打印“没有这样的文件或目录”。

添加/编辑：此 execute_process 调用位于 CMakeLists.txt 中，该文件与 protocol.proto 文件位于同一目录中

为什么它不能简单地运行这个命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T21:44:48.420

您不需要将`COMMAND`参数括在引号中：

```
execute_process(COMMAND protoc -I=. --cpp_out=. protocol.proto
                WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}) 
```

# python - Tkinter：根目录而不是另一个窗口上的滚动条

> ID：14297844
> 
> 赞同：1
> 
> 时间：2013-01-12T20:53:40.193
> 
> 标签：python, listbox, tkinter, scrollbar

我有一个小问题。当我将滚动条应用于列表框时，滚动条显示在根窗口的右侧，而不是子窗口。这是我的代码。我在互联网上的某个地方找到了它并根据我的需要进行了修改：

```
list_soft = Listbox(software_list)
s = Scrollbar()
list_soft.pack(side=LEFT, fill=Y)
s.pack(side=RIGHT, fill=Y)
s.config(command=list_soft.yview)
list_soft.config(yscrollcommand=s.set) 
```

这是图片的链接：http: [//i46.tinypic.com/qqv6t5.png](http://i46.tinypic.com/qqv6t5.png) 屏幕右边的东西是一个滚动条（几乎看不到，对不起质量），它应该在我的列表框小部件上。

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:02:29.693

滚动条和列表框应该（通常）具有相同的父项：

```
list_soft = Listbox(software_list)
s = Scrollbar(software_list)
... and so on... 
```

# wolfram-mathematica - Mathematica：求解包含函数共轭或函数 Abs 的偏微分方程

> ID：14297846
> 
> 赞同：3
> 
> 时间：2013-01-12T20:53:58.903
> 
> 标签：wolfram-mathematica, pde, nonlinear-functions

我正在尝试使用`NDSolve`. 我不断收到以下错误：

```
"NDSolve::ndnum: "Encountered non-numerical value for a derivative at t == 0.." 
```

由于`Abs[D[f[x,y,t],x]]`or的存在，我似乎只会收到此错误`Conjugate[D[f[x,y,t],x]]`。我创建了一个非常简单的函数来演示这个问题。

这将起作用：

```
noAbs = D[f[x, t], t] == f[x, t] f[x, t] D[f[x, t], x, x]
xrange = \[Pi]; trange = 5;
forSolve = {noAbs, f[x, 0] == Exp[I x], f[-xrange, t] == f[xrange, t]}
frul = NDSolve[forSolve, f, {x, -xrange, xrange}, {t, 0, trange}, 
   MaxStepSize -> 0.007, Method -> "MethodOfLines" ]; 
```

这不起作用（请注意，唯一的区别是我们没有 Abs）。

```
withAbs = D[f[x, t], t] == f[x, t] f[x, t] Abs[D[f[x, t], x, x]];
forSolve = {withAbs, f[x, 0] == Exp[I x], 
  f[-xrange, t] == f[xrange, t]}
frul = NDSolve[forSolve, {f}, {x, -xrange, xrange}, {t, 0, trange}, 
   MaxStepSize -> 0.007, Method -> "MethodOfLines" ];
Plot3D[Re[f[x, t]] /. frul, {x, -xrange, xrange}, {t, 0, trange}] 
```

现在我猜 Mathematica 试图对我的表达式求导，发现它不知道如何推导`Abs`函数。我的假设是否正确，如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:47:24.947

有一点耐心，并根据函数的实部和虚部编写所有内容。设置`f=fRe + I fIm`：

```
equation =  ComplexExpand[
 (Derivative[0, 1][fRe][x, t] + I Derivative[0, 1][fIm][x, t]) == 
 (fRe[x, t] + I fIm[x, t])^2  Abs[Derivative[2, 0][fRe][x, t] + I Derivative[2, 0][fIm][x, t]], 
   TargetFunctions -> {Re, Im}] ; 
```

![方程](../Images/9f5b266231ae2840fc1f99381f09806e.png)

初始条件 ：

```
Plot[Evaluate@solAbs[x, 0], {x, -xrange, xrange}] 
```

![我知道了](../Images/7c98852b07b4d48855106c3203c5c493.png)

边界条件 ：

```
Plot[Evaluate@(solAbs[-xrange, t] - solAbs[xrange, t]), {t, 0, trange}, PlotRange -> All] 
```

![在此处输入图像描述](../Images/3dbb41f1c9047208fa4c337e528549d4.png)

# dart - DART：如何绑定单选按钮值属性

> ID：14297848
> 
> 赞同：2
> 
> 时间：2013-01-12T20:54:02.807
> 
> 标签：dart, dart-webui

我有一个需要显示为单选按钮的数组，所以在`iterate`我里面：

```
 <input type="radio" name="group" value="{{val}}" ... 
```

下面代码的预期输出是“Selected is 0”或“Selected is 1”等，但输出始终是“Selected is {{val}}”。

那么问题来了，如何在 Dart 的单选按钮中绑定 value 属性呢？

的HTML：

```
 <div id="container">
      <template iterate="val in list">
        <input type="radio" name="group" value="{{val}}" bind-value="radioSelected" on-click="showChange()">
      </template>
      <p id="text"></p>
    </div> 
```

还有飞镖：

```
 List list = ['0','1','2'];
    String radioSelected = '0';

    void showChange() {
      query("#text").text = "Selected is $radioSelected"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:02:38.500

是的，我认为赛斯是对的，这是一个错误。同时，您应该能够通过以下方式解决它：

```
<div id="container">
  <template iterate="val in list">
    <input type="radio" name="group" bind-checked="val == radioSelected" on-click="showChange()">
  </template>
  <p id="text"></p>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:07:03.193

确保您设置了顶级`build.dart`文件。它应该看起来像这样：

```
import 'dart:io';
import 'package:web_ui/component_build.dart';

void main() {
  build(new Options().arguments, ['web/<my_main_html_file>.html']);
} 
```

当您使用`run`此文件时，`out/`将为您创建一个目录。运行`<my_main_html_file>.html`. 绑定应该可以正常工作，并且 {{ }} 不应该出现。

# javascript - 保证获取类实例的方法？

> ID：14297850
> 
> 赞同：1
> 
> 时间：2013-01-12T20:54:17.063
> 
> 标签：javascript, this

我来自 C++，发现“this”仅表示执行上下文。是否有保证获得自我实例的方法？

我问这个是因为我总是尝试在javascript中通过“this”来获取实例，但是我必须自己做各种方式来保证它，例如如下所述的方式：

```
MyClass.prototype.OnSomethingHappened = function () {
  // I want to get the reference to the instance of this class.
} 
```

但是这种函数通常被称为：

```
var bar = new MyClass();
foo.onclick = bar.OnSomethingHappened; 
```

当 onclick 发生时， OnSomethingHappened 被调用，但“this”并不表示 bar 的实例。

有一些解决方案，例如：

```
var bar = new MyClass();
foo.onclick = function () {
  bar.OnSomethingHappened();
} 
```

是的，它在这里完美运行。但请考虑：

```
var bar = new MyClass();
MyClass.prototype.OnSomethingHappened = function () {
  // I want to get the reference to the instance of this class.
}
MyClass.prototype.IWantToBindSomething = function () {
  // sorry for using jquery in a pure javascript question
  $("div#someclass").bind("click", function () {
  bar.OnSomethingHappened();
  });  // I think this is a very very bad practice because it uses a global variable in a class, but I can't think of other workaround, since I have no guaranteed way of getting the instance.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:57:51.670

不，“类”的概念在 JavaScript 中并不像在 C++ 中那样存在。函数和任何特定对象之间没有内在关系。函数只是值。

（好吧，当对象具有引用函数的属性时，除了“偶然”关系之外没有其他关系。）

但是，可以`this`通过将一个函数包装在另一个使用`.call()`或`.apply()`调用目标函数的函数中来强制一个特定的值。您可以`.bind()`在较新的浏览器中执行此操作，或者只需使用匿名（或非匿名）包装器即可。

*编辑*- 重要的是要了解`this`它的值*完全*取决于在每个调用点调用函数的方式。因此，如果您有一个对象：

```
var myObj = new Something(); 
```

并且您想`myObj.handler`用作事件处理程序（常见情况），以便`this`在事件处理程序中引用对象，您只需要一个包装器：

```
$('whatever').click( function(ev) { myObj.handler(ev); } ); 
```

在该示例中，“myObj”不必是全局变量：

```
function justAnExample() {
  var myObj = new Something();

  $('whatever').click( function(ev) { myObj.handler(ev); } );
} 
```

在那里你可以清楚地看到“myObj”是“justAnExample”函数中的一个局部变量。因为 JavaScript 具有真正的闭包，“justAnExample”的调用上下文在调用之后被保留，并且它供作为事件处理程序传递给 jQuery 的匿名包装函数使用。

# c# - 如何从C#中的数组中获取随机值

> ID：14297853
> 
> 赞同：28
> 
> 时间：2013-01-12T20:54:24.953
> 
> 标签：c#, .net, arrays, random, collections

> **可能重复：**
> [访问列表中的随机项目](https://stackoverflow.com/questions/2019417/access-random-item-in-list)

我有一个带有数字的数组，我想从这个数组中获取随机元素。例如：{0,1,4,6,8,2}。我想选择 6 并将这个数字放在另一个数组中，新数组的值将是 {6,....}。

我使用 random.next(0, array.length)，但这给出了长度的随机数，我需要随机数组数。

```
for (int i = 0; i < caminohormiga.Length; i++ )
{
    if (caminohormiga[i] == 0)
    {
        continue;
    }

    for (int j = 0; j < caminohormiga.Length; j++)
    {
        if (caminohormiga[j] == caminohormiga[i] && i != j)
        {
            caminohormiga[j] = 0;
        }
    }
}

for (int i = 0; i < caminohormiga.Length; i++)
{
   int start2 = random.Next(0, caminohormiga.Length);
   Console.Write(start2);
}

return caminohormiga; 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-12T20:56:59.873

> 我使用random.next（0，array.length），但这给出了长度的随机数，我需要随机数组数。

使用 from`random.next(0, array.length)`作为索引的返回值从`array`

```
 Random random = new Random();
 int start2 = random.Next(0, caminohormiga.Length);
 Console.Write(caminohormiga[start2]); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-01-12T21:02:47.893

**洗牌**

```
int[] numbers = new [] {0, 1, 4, 6, 8, 2};
int[] shuffled = numbers.OrderBy(n => Guid.NewGuid()).ToArray(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-12T20:57:06.820

您只需要使用随机数作为对数组的引用：

```
var arr1 = new[]{1,2,3,4,5,6}
var rndMember = arr1[random.Next(arr1.Length)]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-12T21:56:52.517

我在评论中注意到你不想重复，所以你希望数字像一副纸牌一样被“洗牌”。

我会使用 a作为源项目，*随机*`List<>`抓取它们并将它们*推*送到 a以创建数字牌组。**`Stack<>`**

 **这是一个例子：

```
private static Stack<T> CreateShuffledDeck<T>(IEnumerable<T> values)
{
  var rand = new Random();

  var list = new List<T>(values);
  var stack = new Stack<T>();

  while(list.Count > 0)
  {
    // Get the next item at random.
    var index = rand.Next(0, list.Count);
    var item = list[index];

    // Remove the item from the list and push it to the top of the deck.
    list.RemoveAt(index);
    stack.Push(item);
  }

  return stack;
} 
```

那么：

```
var numbers = new int[] {0, 1, 4, 6, 8, 2};
var deck = CreateShuffledDeck(numbers);

while(deck.Count > 0)
{
  var number = deck.Pop();
  Console.WriteLine(number.ToString());
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-12T21:01:12.287

像这样试试

```
int start2 = caminohormiga[ran.Next(0, caminohormiga.Length)]; 
```

代替

```
int start2 = random.Next(0, caminohormiga.Length); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-12T20:57:23.043

```
Console.Write(caminohormiga[start2]); 
```**

# github - 如何创建和处理 .md 页面

> ID：14297858
> 
> 赞同：2
> 
> 时间：2013-01-12T20:55:13.333
> 
> 标签：github, markdown

我刚刚在 github 上看到自述文件页面是一种设置简单自述文件样式的简便方法

有谁知道我在哪里可以获得有关如何将 .md 转换为真正的 html 页面的更多信息？它是来自 github 的特定东西还是需要的某种宝石？

自述文件

# 标题 1

## 标题 2

**粗体文字**

[linke_text](http://ble.bla.com)段落

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:19:55.657

Ruby 工具箱中详细介绍了各种[Markdown](https://www.ruby-toolbox.com/categories/markup_processors) gem，使用现有的 gem 可能是最好和最简单的。

我过去使用过[Maruku](https://github.com/bhollis/maruku)，效果很好。我相信 Github为 Github Pages使用了另一种名为[Red Carpet的宝石。](https://github.com/vmg/redcarpet)

以 Maruku 为例：

```
doc = Maruku.new('# Title 1')
puts doc.to_html 
```

这将输出：

```
<h1>Title 1</h1> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T22:30:00.000

您正在查看的格式是 Markdown。Markdown 的主页在这里：[http ://daringfireball.net/projects/markdown/](http://daringfireball.net/projects/markdown/)

Markdown 也是 StackOverflow 使用的标记格式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T22:35:57.240

对于即时转换，您可以查看[http://www.markdown.io/](http://www.markdown.io/)

即，如果您的文件位于[http://example.com/myfile.md](http://example.com/myfile.md)上，则只需将 markdown.io 放在其前面：`http://markdown.io/http://example.com/myfile.md`

# iphone - 确定 iOS 上的崩溃可能是什么？

> ID：14297859
> 
> 赞同：0
> 
> 时间：2013-01-12T20:55:17.060
> 
> 标签：iphone, ios, objective-c, cocoa-touch

通常我的崩溃报告很简单，并且总是在符号化后导致正确的行号。不过这个很奇怪。它说导致崩溃的行是 main.m，第 13 行，这是写`@autoreleasepool`.

这是否意味着此崩溃发生在应用程序启动时，或者仅仅是因为应用程序中发生的所有事情都在该循环中运行？

另外，有没有人知道这个崩溃指向什么？与键盘有关，可能是某种国际键盘（因为那些是我没有真正测试过的。美国键盘似乎一切正常）

![在此处输入图像描述](../Images/6aada6c384365e3e6021c35d57c12de8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:58:50.837

> 这是否意味着此崩溃发生在应用程序启动时，或者仅仅是因为应用程序中发生的所有事情都在该循环中运行？

前者，一般。正如我们从堆栈跟踪中看到的，可变数组在插入对象 ( `- [__NSArrayM insertObject:atIndex:]`) 时抛出了异常，可能是因为有人试图在无效索引处插入对象（即超出数组边界的索引）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:59:32.363

这意味着在崩溃线程中，这是您调用的代码的最后一行。到目前为止，这并不总是意味着它是坠机发生的地方。

堆栈跟踪中的前两行表明发生了异常。崩溃的异常代码是什么？报告中有没有`Last Exception Backtrace`？

这也可能是一个 iOS 错误，您的代码没有做任何事情来导致它。但是拥有完整的崩溃报告可以帮助理解这一点。

# f# - ODataService 类型提供程序的可空 int 不存在属性“HasValue”

> ID：14297860
> 
> 赞同：6
> 
> 时间：2013-01-12T20:55:17.710
> 
> 标签：f#, type-providers, f#-3.0

我正在尝试将 ODataService 类型提供程序与 Netflix 一起使用。这工作正常：

```
type internal NetflixData = ODataService<"http://odata.netflix.com/Catalog/">
let internal NetflixContext = NetflixData.GetDataContext()

let godzillamovies = query { for t in NetflixContext.Titles do 
                             where (t.Name.Contains "Godzilla")
                             select (t.Name, t.ReleaseYear)
                           } |> Seq.toList 
```

但返回哥斯拉电视节目的所有剧集，没有发布年份日期（嘘）。因此，我将查询更新为：

```
let godzillamovies = query { for t in NetflixContext.Titles do 
                             where (t.Name.Contains "Godzilla" && t.ReleaseYear.HasValue)
                             select (t.Name, t.ReleaseYear.Value)
                           } |> Seq.toList 
```

我遇到了以下错误：

```
<?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?>
<error xmlns=\"http://schemas.microsoft.com/ado/2007/08/dataservices/metadata\">
  <code></code>
  <message xml:lang=\"en-US\">No property 'HasValue' exists in type 'System.Nullable`1[[System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]' at position 45.</message>
</error> 
```

呃，可空整数不存在 HasValue 吗？从何时起？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T21:29:50.363

```
#r "FSharp.Data.TypeProviders"
#r "System.Data.Services.Client"

open Microsoft.FSharp.Data.TypeProviders
open Microsoft.FSharp.Linq.NullableOperators

type internal NetflixData = ODataService<"http://odata.netflix.com/Catalog/">
let internal NetflixContext = NetflixData.GetDataContext()

NetflixContext.DataContext.SendingRequest.Add(fun e -> printfn "%A" e.Request.RequestUri)

// http://odata.netflix.com/Catalog/Titles()?$filter=substringof('Godzilla',Name) and (ReleaseYear ne null)&$select=Name,ReleaseYear
let godzillamovies = query { for t in NetflixContext.Titles do 
                             where (t.Name.Contains "Godzilla")
                             where (t.ReleaseYear ?<>? System.Nullable())
                             select (t.Name, t.ReleaseYear)
                           } |> Seq.toList 
```

# php - 为什么 PHP 对象运算符在浏览器中被视为结束标记？

> ID：14297867
> 
> 赞同：-2
> 
> 时间：2013-01-12T20:56:11.973
> 
> 标签：php, html

我正在使用 PHP 检查 HTML 页面顶部的 $_SESSION 变量。这是我的代码：

```
<?php require('sessions.class.php');
 $session= new session();
 $session->start_session('_s',false);

 if (!isset($_SESSION('session_id'))){
    header(location:'login.html');
  }
 ?>

<!DOCTYPE html> 
```

`->`在达到对象运算符 ( )之前，一切似乎都有效。就像服务器将其视为 PHP 结束标记一样。之后的文字在`->`网页顶部回显。

这类似于这里提出的问题：

[为什么-php-tag-is-close-on-user](https://stackoverflow.com/questions/7894334/why-php-tag-is-closing-on-user)

但是 OP 并没有详细介绍解决方案。

浏览器=Mozilla

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:06:48.157

问题可能是您试图在 html 文档中运行 PHP 代码，这是不可能的。PHP 开始标记的 < 被识别为 html 标记的开始，因此第一个 > 之后的代码作为文本输出，因为它被解释为 html 标记的结束。

如果您想使用 PHP，请将其设为 .php 文件并回显 html。更好的是，您希望尽可能将逻辑（PHPcode）和标记（html）分开在单独的文件中。

搜索“分离 PHP 和 html” [以帮助您入门](https://stackoverflow.com/questions/62617/whats-the-best-way-to-separate-php-code-and-html)

# php - 使用 PHP 和 SQL 进行分页

> ID：14297871
> 
> 赞同：0
> 
> 时间：2013-01-12T20:56:21.463
> 
> 标签：php, sql

我一直在尝试解决分页问题，​​但我不理解以下代码。

```
 $lstart = ($page * 6) -6;
                $lend = ($page * 6)-1;
                $limit = $lstart.','.$lend; 
```

我得到的结果好坏参半。我应该每页有六篇文章，但它是不一致的。该代码包含在我从其他人那里继承的脚本中，我正在尝试修复它。有人可以向我解释这段代码吗？在查询中，LIMIT=$limit。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:59:53.973

它应该是...

```
$lstart = ($page * 6) -6; // quite frankly, it's clearer to write...
       // ($page - 1) * 6
$limit = $lstart.',6'; 
```

limit 中的第二个子句声明了多少项。没有达到某个点。

* * *

来自 mysql 文档：（复制/粘贴）

```
SELECT * FROM tbl LIMIT 5,10;  # Retrieve rows 6-15 
```

因此，1,10 将是第 2-11 行因此，要获得第 1 行，您需要将偏移量设置为零：0,10 这将为您提供第 1-10 行。

您还可以在此处查看有关 LIMIT 的更多教程：http: [//php.about.com/od/mysqlcommands/g/Limit_sql.htm](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)

* * *

带解释的代码。

```
$rows_per_page = 6; // you're trying to get 6 rows for every "page".

// On page 1, you'd want rows 0-5 (6 rows inclusively)
// On page 2, you'd want rows 6-111 (again, 6 rows inclusively)
// and so forth.
// So when $page == 1, you want to start at 0, on page 2, start at 6....
// To express this pattern mathematically, we write:
$start = ($page - 1) * 6

// mysql takes offset and number as it's two variables in the LIMIT clause, 
// in that order, when two are provided.
// So we write:
$query = "SELECT * FROM table WHERE 1 LIMIT $start, $rows_per_page;";

// So, at page 1, you get
$query = "SELECT * FROM table WHERE 1 LIMIT 0, 6;"; // if we were to substitute the variables.
$query = "SELECT * FROM table WHERE 1 LIMIT 6, 6;"; // at page 2
$query = "SELECT * FROM table WHERE 1 LIMIT 12, 6;"; // at page 3 
```

# c# - 将 double 转换为 int .. 我可以删除点后的数字吗？

> ID：14297872
> 
> 赞同：0
> 
> 时间：2013-01-12T20:56:36.393
> 
> 标签：c#

我正在尝试从包含双数字（例如“1.1”）的文本框中转换项目。有没有办法可以格式化它，以便删除“.1”并将其分配给变量“points”？

有没有一种方法可以将文本框“txtTotal”中的项目转换为其中包含“1.1”的项目，该项目将被格式化以保存点之前的数字，然后分配给点变量，然后点将输出“1”？

```
int points;

txtTotal.Text = string.Format("£{0:0}");
points = Convert.ToInt32(txtTotal.Text);
MessageBox.Show("{points}"); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:06:05.380

如果您只想删除小数点后的所有数字，请使用`Math.Truncate();`

[http://msdn.microsoft.com/en-us/library/vstudio/c2eabd70(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/vstudio/c2eabd70(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T21:07:34.727

您可以尝试`Split`使用小数点上的文本，然后`£`使用 . 从第一个数组索引中删除`TrimStart`，我将使用它`int.TryParse`来检查输出是否有效。

像这样：

```
int points;
txtTotal.Text = string.Format("£{0:0}",txtTotal.Text);
if(int.TryParse((txtTotal.Text.Split('.')[0].TrimStart('£')),out points))
   MessageBox.Show(points.ToString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T21:13:36.183

看起来您正在尝试使用*currency*的字符串格式提取*浮点*( ) 值的*小数*部分。*`double`*

 **我会做这样的事情：

```
using System.Globalization; // For NumberStyles enum

var currencyString = txtTotal.Text;

// Parse the TextBox.Text as a currency value.    
double value;
var parsedSuccesfully = double.TryParse(currencyString,
                                        NumberStyles.Currency, 
                                        null,
                                        out value);

// TODO: Handle parsing errors here.

var wholePounds = Math.Truncate(value);
var fractionalPounds = (value - wholePounds);

// Get the whole and fractional amounts as integer values.
var wholePoundsInteger = (int)wholePounds;
var fractionalPoundsInteger = (int)(fractionalPounds * 1000.0); // 3 decimal places 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T21:17:09.060

如果您只想在 a 中显示它，`MessageBox`您可以将其作为字符串处理：

```
string points = txtTotal.Text;
points = points.Substring(0, points.IndexOf("."));
MessageBox.Show(points); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T21:24:57.203

如果文本本身是一种货币格式（看起来是磅），您应该首先获取原始字符串并通过指定货币的 NumberStyle 和适当的文化（例如 en-GB）将其转换为十进制：

```
string rawText = txtTotal.Text;
decimal currencyValue = Decimal.Parse(rawText, NumberStyles.Currency, new CultureInfo("en-GB")); 
```

最后，使用数学方法截断（或四舍五入，如果你想四舍五入）：

```
int finalValue = Math.Truncate(currencyValue); 
```

如果它不是货币格式，而只是普通的双精度格式，那么更直接的双精度解析就足够了：

```
double doubleValue = Double.Parse(txtTotal.Text);
int finalValue = Math.Truncate(doubleValue); 
```

如果格式不一致，可能值得使用`TryParse`方法（而不是直接`Parse`）首先处理任何解析问题。**

# c# - 为什么 .NET 中的 Expression 类型允许从函数构造但不能从函数转换？

> ID：14297873
> 
> 赞同：5
> 
> 时间：2013-01-12T20:56:38.020
> 
> 标签：c#, .net, expression-trees

为什么 expr1 可以编译，而 expr2 不能编译？

```
Func<object> func = () => new object();
Expression<Func<object>> expr1 = () => new object();
Expression<Func<object>> expr2 = func; //Cannot implicitly convert type 'System.Func<object>' to 'System.Linq.Expressions.Expression<System.Func<object>>' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T21:01:15.797

A`Func<T>`是委托（指向函数的指针），而 an`Expression<Func<T>>`是表达式树（描述操作的树状数据结构）。因此，您不能将一个分配给另一个，因为它们完全不同。

当您将 lambda 函数直接分配给 a 时`Func<T>`，编译器会为您的函数编译代码并将指向已编译代码的指针分配给 eg `func`。

另一方面，当您将 lambda 函数直接分配给 a 时`Expression<Func<T>>`，编译器会构建表达式树（它只是引用类型的一个实例）并将对该对象的引用分配给 eg `expr1`。这只是编译器为您提供的一种便利，为您提供了一个比自己在代码中手动构建表达式树更具吸引力的选择（当然这也是完全可能的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T21:18:09.507

您不能在`Func`和`Expression`类型之间进行转换。但是您可以从 lambda 转换为其中任何一个。

lambda 具有**仅存在于 C# 类型系统中**的特殊类型。CLR 不知道什么是 lambda。只有 C# 编译器知道这一点，并且您可以对 lambda 执行的唯一操作是转换为`Func`and`Expression`类型。（这意味着您不能调用 lambda，例如，因为它根本没有 CLR 类型）。

这就是为什么您在这里观察到“语义鸿沟”的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T22:35:17.297

简而言之，编译器可以将一段代码（*Lambda*表达式）转换为

*   一个`Expression`
*   ***或***一个`Func`

这在使用时立即发生，然后代码消失，转换为不可逆。但是`Func`和`Expression`是完全不同的类型。

这就是为什么你不能

```
Expression<Func<object>> expr2 = func; 
```

但反过来也可以

```
Func<object> func2 = expr1.Compile(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T21:01:58.740

因为`System.Func<object>`和`System.Linq.Expressions.Expression<System.Func<object>>`是不同的类型。您不能隐式转换它们。

`Func<T>`是代表。从 看*[`MSDN`](http://msdn.microsoft.com/en-us/library/bb534960.aspx)*。

> 封装没有参数的方法，并返回由 T 参数指定的类型的值。

`Expression<Func<T>>`是一个表达式树。

# serialization - Couchbase：如何自动反序列化链接的文档

> ID：14297886
> 
> 赞同：0
> 
> 时间：2013-01-12T20:57:49.767
> 
> 标签：serialization, deserialization, couchbase

好的，所以我正在使用 Couchbase 2.0 和最新的 .NET 客户端。基本上我正在写的是一个跟踪目标的项目（一个美化的待办事项清单）......

我设法将目标对象作为 JSON 文档存储在 couchbase 中，然后将其反序列化回 POCO，但我的问题是如何自动查找链接的文档并填充 subGoal List<Goal>

不确定这种自动反序列化是否可以在没有一些逻辑在代码本身中处理它的情况下实现，但任何指针表示赞赏，干杯！

JSON

```
{
    id: "goal_1",
    name: "goal 1",
    description: "think of some better projects",
    subGoals: [goal_2, goal_3]
} 
```

C＃

```
var goal = client.GetJson<Goal>(id);
return goal; 
```

这是 POCO

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using Newtonsoft.Json;

namespace stuff.Models
{
    public class Goal
    {
        protected DateTime _targetDate;

        /// <summary>
        /// Name of the goal
        /// </summary>
        [JsonProperty("name")]
        public String Name { get; set; }

        /// <summary>
        /// Full description of the goal
        /// </summary>
        [JsonProperty("description")]
        public String Description { get; set; }

        /// <summary>
        /// Target date for completing this goal
        /// </summary>
        [JsonProperty("targetDate")]
        public DateTime? TargetDate
        {
            get
            {
                return _targetDate;
            }
            set
            {
                // target date must be later than any sub-goal target dates
            }
        }

        /// <summary>
        /// Any sub-goals
        /// </summary>
        [JsonProperty("subGoals")]
        public List<Goal> SubGoals { get; set; }

        /// <summary>
        /// Constructor
        /// </summary>
        /// <param name="Name"></param>
        /// <param name="Description"></param>
        /// <param name="TargetDate"></param>
        /// <param name="SubGoals"></param>
        public Goal(String Name, String Description, DateTime? TargetDate = null, List<Goal> SubGoals = null)
        {
            this.Name = Name;
            this.Description = Description;
            this.TargetDate = TargetDate;
            this.SubGoals = SubGoals;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:29:10.450

没有自动方法可以在一个“加入”查询中获取相关文档，但是您可以使用整理视图。所以给定如下一组目标（注意添加了一个类型属性）：

```
{"name":"goal 1","description":"This is a parent goal","subgoals":["goal2","goal3"],"type":"goal"}
{"name":"goal 2","description":"This is a child goal","type":"goal"}
{"name":"goal 3","description":"This is another child goal","type":"goal"}
{"name":"goal 4","description":"This is another parent goal","subgoals":["goal5","goal6","goal7"],"type":"goal"}
{"name":"goal 5","description":"This is a child goal","type":"goal"}
{"name":"goal 6","description":"This is a child goal","type":"goal"}
{"name":"goal 7","description":"This is a child goal","type":"goal"} 
```

然后，您将编写一个输出每个父目标及其子目标的视图：

```
function (doc, meta) 
{
  if (doc.type == "goal" && doc.subgoals)
  {
    emit([meta.id, 0], null);
        for(var idx in doc.subgoals)
        {
          emit([doc.subgoals[idx], 1], null);
        }    
  }
} 
```

此视图的输出是一组行，其中每一行包含一个由父 ID 和一个 0 组成的键，然后是其子 ID 和一个 1（0 和 1 确保行正确排序）：

```
{"id":"goal1","key":["goal1",0],"value":null},
{"id":"goal1","key":["goal2",1],"value":null},
{"id":"goal1","key":["goal3",1],"value":null},
{"id":"goal4","key":["goal4",0],"value":null},
{"id":"goal4","key":["goal5",1],"value":null},
{"id":"goal4","key":["goal6",1],"value":null} 
```

在 .NET SDK 教程中，我描述了如何查询整理视图（啤酒厂及其啤酒）。

[http://www.couchbase.com/docs/couchbase-sdk-net-1.2/collat​​edviews.html](https://web.archive.org/web/20130625223633/http://www.couchbase.com/docs/couchbase-sdk-net-1.2/collatedviews.html)

# ios - 从 iOS 中的 PHP 函数下载文件

> ID：14297889
> 
> 赞同：0
> 
> 时间：2013-01-12T20:58:03.223
> 
> 标签：ios

我正在尝试从我的 iOS 应用程序中的 PHP 服务下载文件。我使用来自 Android 和浏览器的相同 PHP 服务，并且服务器部分工作正常。我可以在浏览器中测试 url 并提示下载文件，就像你期望的那样。如果我将 url 直接指向我的 iOS 代码中的文件，我也可以很好地下载文件。这些是 zip 文件。我必须使用这种方法，因为我需要通过 id 获取文件，并且必须传递访问令牌字符串。这些验证正常，所以它们不是问题。

当我连接时，我得到一个带有 httpResponse 状态代码 200 的 didReceiveResponse，我相信这是可以的。然后我得到一个 connectionDidFinishLoading 委托调用，但在两者之间从未得到任何数据或错误。

这是我的连接代码：

```
- (BOOL)downloadFile:(NSString *)fileName:(int)fileId
{
    BOOL retVal = FALSE;

    NSString *strUrl = [NSString stringWithFormat:@"%@?id=%d&token=%@", FILE_URL,   fileId, accessToken];

    NSURL *myURL = [NSURL URLWithString:strUrl];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:myURL  cachePolicy:NSURLRequestReloadIgnoringLocalCacheData                                   timeoutInterval:60];

//  Starts the download
connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

return TRUE;
} 
```

// 这里是响应代码：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *)response;

    int code = [httpResponse statusCode];

    if(code <= 200)
    {
        [responseData setLength:0];
    }
    else
    {
        NSString *msg = [NSString stringWithFormat:@"Error Code: %d.  Download has Failed.", code];

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Download Error!"
                                                    message:msg
                                                   delegate:nil
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];
        [alert show];
    }
} 
```

// 这是单独接收数据的方法。永远不会被调用

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [responseData appendData:data];
} 
```

// 失败委托方法，也不会被调用

```
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{

    NSString *msg = [NSString stringWithFormat:@"Error: %@", [error localizedDescription]];

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Download Error!"
                                                message:msg
                                               delegate:nil
                                      cancelButtonTitle:@"OK"
                                      otherButtonTitles:nil];
    [alert show];

} 
```

就像我说的那样，它可以在 Android 和浏览器上运行，如果我只是将 url 指向文件，它会很好地下载。

我被困住了，我很感激我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T14:20:25.720

原来是服务器上的url。在 Apple 文件夹而非 Android 文件夹上设置了安全设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:17:45.703

我想在你的第一个方法下载文件中再写两行：

```
- (BOOL)downloadFile:(NSString *)fileName:(int)fileId
{
    BOOL retVal = FALSE;

    NSString *strUrl = [NSString stringWithFormat:@"%@?id=%d&token=%@", FILE_URL,   fileId, accessToken];

    NSURL *myURL = [NSURL URLWithString:strUrl];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:myURL  cachePolicy:NSURLRequestReloadIgnoringLocalCacheData                                   timeoutInterval:60];

//  Starts the download
connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

 if (connection) 
    {
        self.responseData = [NSMutableData data];
    }

return TRUE;
} 
```

并将 responseData 对象的属性设为非原子并保留在您的 .h 文件中，并在您的 .m 文件中合成。也可以在你的 dealloc 中释放它，并在 viewDidUnload 中使其为零。

另外我不知道你用你的方法调用什么类型的网络服务。但是有两种类型的网络服务 GET 和 POST。你不能调用 POST 服务，只能在你的方法中将 GET 更改为 POST [request setHTTPMethod:@"POST"];

请尝试使用 AFNetworking 类或 ASIHTTPRequest 类有一些 web 服务的示例项目可以帮助你

对于 AFNetworking：

[https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)

[http://mobile.tutsplus.com/tutorials/iphone/afnetworking-1-0/](http://mobile.tutsplus.com/tutorials/iphone/afnetworking-1-0/)

[http://afnetworking.com/](http://afnetworking.com/)

对于 ASIHTTPRequest

[http://allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/)

[https://github.com/pokeb/asi-http-request](https://github.com/pokeb/asi-http-request)

# c++ - 如何在 C++ 中构造带参数的对象

> ID：14297890
> 
> 赞同：0
> 
> 时间：2013-01-12T20:58:12.960
> 
> 标签：c++, constructor

我不断收到此错误：`no matching function for call to 'Person::Person(const char [10])` 该类位于单独的 cpp 文件中。当我在同一个 cpp 文件中有构造函数时，我可以轻松地创建一个对象。这是我的代码：

main.cpp 文件

```
#include <iostream>
#include "Person.h"

using namespace std;

int main()
{
    Person p("hellooooo");
    return 0;
} 
```

人.h 文件

```
#ifndef PERSON_H
#define PERSON_H

class Person
{
    public:
        Person();
    protected:
    private:
};

#endif // PERSON_H 
```

个人.cpp 文件

```
#include <iostream>
#include "Person.h"

using namespace std;

Person::Person()
{
   cout << "this is the default constructor??";
}

Person::Person(string n)
{
   cout << n;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T20:59:51.833

您必须在`.h`文件中添加第二个构造函数的声明

```
#include <string>
class Person
{
    public:
        Person();
        Person(std::string);
}; 
```

# android - 如何在android中指定文件的路径到openFileInputStream方法？

> ID：14297891
> 
> 赞同：0
> 
> 时间：2013-01-12T20:58:25.277
> 
> 标签：android

我想使用 FileInputStream 读取文件（mp3 文件）。但是我无法将文件的路径指定为方法 openFileInput 的参数。我在 res 文件夹中放置了一个原始文件夹，其中是我的 mp3 文件。有人可以告诉我如何指定该方法的路径。我是 android 的新手。

```
 FileInputStream fis;
 fis = openFileInput(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:02:37.897

利用：

```
InputStream raw = context.getResources().openRawResource(R.raw.test); 
```

获取该文件的 InputStream。然后，您可以构造一个 BufferedReader 或 Reader 或任何您想要的并读取数据。

# c# - 如何在 Windows Phone 中设置按钮标签

> ID：14297902
> 
> 赞同：0
> 
> 时间：2013-01-12T21:00:01.367
> 
> 标签：c#, windows-phone-7, button

如何在 Windows Phone 中设置按钮标签？我找不到 text 属性或类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:01:12.967

```
Button.Content = "Your Label";

<Button Content="Your Label"/> 
```

# android - 用于在 android 中更改应用程序的侦听器

> ID：14297903
> 
> 赞同：2
> 
> 时间：2013-01-12T21:00:15.220
> 
> 标签：android, listener, packages

我正在尝试制作一个记录设备上各种应用程序使用情况的应用程序。例如：国际足联 10 分钟，GTA 等 23 分钟。现在我有一个持续运行的服务，我有一个广播接收器，它假设在任何应用程序包更改时触发（使用 intent.action.PACKAGE_CHANGED），但不幸的是里面的代码广播永远不会运行。如果有人能提示问题或告诉我任何其他方法，我将不胜感激。谢谢

```
public class ScreenReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {
     Log.d("BROADCAST", "Works fine" );
} 
```

}

这是服务类中的代码：

```
public int onStartCommand(Intent intent, int flags, int startId) {
    IntentFilter filter = new IntentFilter(Intent.ACTION_PACKAGE_CHANGED);
    ScreenReceiver recevier = new ScreenReceiver();
    registerReceiver(recevier, filter);runningApps();

    return START_STICKY;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T23:01:30.607

[PACKAGE_CHANGED](http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_CHANGED)意图只会在应用程序本身发生变化时发送。它与应用程序的使用无关。

事实上，没有官方的方法来监控应用程序的使用情况。只有类似的解决方案：

1.  到 jelly bean 为止，您可以阅读日志并找出应用程序的进程何时启动以及何时关闭（或用户移动到另一个应用程序）。

2.  您可以不时地轮询最近启动的应用程序或当前正在运行的进程。

3.  您可以创建一个启动器应用程序，该应用程序将找出其中正在启动的应用程序。

当然，我写的每一种方法都有其缺陷，只是给你一个关于实际用法的线索，当然，由于android支持同时运行多个应用程序，我认为任何方法都不够。 .

# c# - 如何制作可以添加到工具箱的自定义控件DLL？

> ID：14297906
> 
> 赞同：0
> 
> 时间：2013-01-12T21:00:22.350
> 
> 标签：c#, user-interface, dll, components, toolbox

我不知道该怎么称呼它。我制作了一个 C# 程序，其中包含 Visual Studio 工具箱的 GUI 控件/组件。添加 *.CS 源后，它会自动将控件添加到工具箱中：

![在此处输入图像描述](../Images/2bdbf7c75cc0b5f26c848001e3fc2d5c.png)

然而，一旦我把它变成了一个 DLL，我就尝试：

*   添加对 DLL 的引用
*   将其添加为现有项目
*   右键单击工具箱->选择项目

这些选项都不会自动显示我的自定义组件。我不想使用用户控件表单，那么如何制作 *.DLL 而不是 *.CS 文件来显示工具箱中的组件？

编辑：您需要将其公开:) 谢谢'newb'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:12:23.077

我班级的某些部分不公开，工具箱无法使用。谢谢'新手'！我忘了更改可访问性。

# breeze - How can I detect a change to an entity's EntityState?

> ID：14297908
> 
> 赞同：8
> 
> 时间：2013-01-12T21:00:37.563
> 
> 标签：breeze

I want to put a "Delete" button and a "Cancel" button on each row of a list of Customers. The "Cancel" button is disabled when a customer is "Unchanged". But when a customer transitions to a changed state ("Added", "Modified", "Deleted"), I want to enable the "Cancel" button so the user can reverse the changes -- whatever they are -- before saving.

I can almost do this by subscribing to `customer.entityAspect.propertyChanged`. A property change signals a potential change in the `EntityState`. I can subscribe to that event and have my handler update an `isChanged` observable that I've added to my Customer entities. Then I bind the "Cancel" button enable to the `isChanged` and I'm good to go.

But the `propertyChanged` event is only raised when a *data property* changes, e.g., `customer.Name("New Co.");`. It isn't raised when the user clicks the "Delete" button. "Delete" triggers `customer.entityAspect.setDelete();` which doesn't touch a data property; it simply changes the customer's `EntityState`.

(1) Why doesn't a change to the customer's `EntityState` raise `propertyChanged` and (2) how can I listen for a change to the `EntityState` so I can control the "Cancel" button?

P.S.: I'm using Knockout.

P.P.S: This question was inspired by a previous SO question ["*entityAspect.setDeleted doesn't fire the subscribed propertyChanged event*"](https://stackoverflow.com/questions/14281856/entityaspect-setdeleted-doesnt-fire-the-subscribed-propertychanged-event/14291778#14291778).

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T21:10:25.767

You are correct that Breeze does not raise `propertyChanged` whent the `EntityState` changes. Maybe it should. We will consider that.

Nor does Breeze have a separate event **on the entity** - no `entityStateChanged` event - to notify you when the `EntityState` changes. We've considered that several times. We keep talking ourselves out of it.

There is a perfectly good solution that performs better than a dedicated `entityStateChanged` event. Right now you'll have to code it yourself.

The trick is to listen to the `EntityManager`, not to the entity. You'll find one variant of this solution in the [**DocCode "Teach Tests"**](http://www.breezejs.com/samples/doccode) sample; look for "*can control custom ko entityState property via entityManager.entityChanged*" in the *entityTest.js* module.

I'll tweak that to fit your example. The essence of it is as follows:

1.  Subscribe to the `entityManager.entityChanged` event; when it is raised **and** the cause is that an entity's `EntityState` changed, you update that entity's `isChanged` boolean KO observable (if that property exists).

2.  Add the `isChanged` observable to entity types that should be watched in this way.

Here's an example of step #1: listening for state changes

```
// subscribe with handler watching for EntityState changes
addEntityStateChangeTracking(manager);

function addEntityStateChangeTracking(entityManager) {

    if (entityManager._entityStateChangeTrackingToken) { return; } // already tracking it

    // remember the change tracking subscription with a token; 
    // might unsubscribe with that token in future
    entityManager._entityStateChangeTrackingToken =
        entityManager.entityChanged.subscribe(entityChanged);

    var entityStateChangeAction = breeze.EntityAction.EntityStateChange;

    function entityChanged(changeArgs) {            
        if (changeArgs.entityAction === entityStateChangeAction) {
            var entity = changeArgs.entity;
            if (entity && entity.isChanged) { // entity has the observable
                var isUnchanged = entity.entityAspect.entityState.isUnchanged();
                entity.isChanged(!isUnchanged);
            }
        }
    }
}

```

Let's talk about step #2: adding the `isChanged` observable to the type. You seem to have tackled that one but I'm not sure how. Perhaps the best place to do add it to the type is in the [**type's initializer**](http://www.breezejs.com/documentation/extending-entities) so you can be sure the property will be there, whether the entity is created or materialized by a query. Here's an example:

```
var store = manager.metadataStore;

function customerInit(entity) {
    var isUnchanged = entity.entityAspect.entityState.isUnchanged();
    entity.isChanged = ko.observable(!isUnchanged);
}

store.registerEntityTypeCtor('Customer', null, customerInit);

```

This all seems like a lot of work. It would be easier if Breeze raised the `propertyChanged` event when the `EntityState` changes. We'll give that more consideration ... there may be some good counter arguments. Meanwhile, I think what you see here is the best approach.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T04:51:43.183

We found wrapping the breeze entity manager inside our own gives us nice flexibility that makes this challenge a walk in the park, especially with the hasChangesChanged event.

```
var EntityManager = (function () {
    function EntityManager(breezeEntityManager) {
        this.breezeEntityManager = breezeEntityManager;
        this.hasChanges = ko.observable(breezeEntityManager.hasChanges());

        // Subscribe with handler watching for EntityState changes
        this.addEntityStateChangeTracking(breezeEntityManager, this);
    }

    EntityManager.prototype.addEntityStateChangeTracking = function (bem, em) {
        if (this.entityStateTrackingToken != null) return;
        this.entityStateTrackingToken = bem.hasChangesChanged.subscribe(function (changeArgs) {
            em.hasChanges(changeArgs.hasChanges);
        });
    };
    return EntityManager;
})(); 
```

Then on your viewModels, expose the EntityManager.

```
var ViewModel = (function (_super) {
    __extends(ViewModel, _super);
    function ViewModel(typeName) {
        _super.call(this);
        this.type = entities.getType(typeName);
    }

    ViewModel.prototype.loadEntity = function (id) {
        this.entityManager = new breeze.EntityManager("MyManager");;
    };
    return ViewModel;
})(ViewModelBase);
exports.ViewModel = ViewModel; 
```

Then in your Knockout UI:

```
<button type="button" class="btn btn-info" data-i18n="common.save" data-bind="click: save, enable: entityManager.hasChanges"> 
```

# java - 使用一个类的单个实例的多个 Java 程序

> ID：14297909
> 
> 赞同：-2
> 
> 时间：2013-01-12T21:01:02.250
> 
> 标签：java, networking, wrapper, single-instance

我正在编写一个虚拟网络。
我有一个中央客户端类，它实现了我的整个网络，并允许向/从网络中的特定其他客户端发送/接收数据。我现在不想对使用网络的所有程序使用 Client 类的单个实例。我有一个程序接口来处理传入的数据包，还有一个用于发送的包装器，所以我会欣赏另一种解决方案，而不是“运行本地 TCP 服务器”。

我现在的问题是：如何让一个类的单个实例为所有在 Java 中使用它的程序运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:08:17.240

这可以通过使用 Java 中可用的 RMI、RMI-IIOP 或 CORBA 功能轻松完成。提到的技术允许在单台机器（服务器）上创建一个对象实例，并将其作为远程接口导出到其他计算机（你说你需要网络）。在其他主机中，您将拥有一个与您的“真实”实例实现的接口相同的存根类，并且能够在其上调用方法。这些调用最终将在您的服务人员的单个实例上远程调用。可能会认为，这正是您所要求的。

从更新、更有趣的方法来看，Google Protocol Buffers 看起来不错，而您需要更多使用 Protocol Buffers 的自定义代码。Web 服务还允许导出接口并且更适合通过防火墙（此处列出的其他方法更适合在您自己的服务器之间进行通信，您可以配置您想要的方式）。

如果您需要确保您的程序只有一个实例在给定的操作系统上运行，可以按照[此问题中的讨论](https://stackoverflow.com/questions/920386/how-to-allow-running-only-one-instance-of-a-java-program-at-a-time)来完成。如果您的程序正在侦听固定端口，则第二个实例可能无论如何都无法正常启动，因为这些端口已经被占用；您只需要在尝试绑定 socked 并终止时捕获异常。

# algorithm - 使用最小堆查找第 k 个最大元素

> ID：14297912
> 
> 赞同：4
> 
> 时间：2013-01-12T21:01:13.567
> 
> 标签：algorithm, sorting, data-structures, heap, min-heap

我有一个关于使用最小堆查找第 k 个最大元素的问题。算法如下：

1.  我们取前 k 个元素并构建一个 minheap

2.  令 Sk 为 S 中的最小元素。

3.  从剩余的 nk 个元素中看一个新元素。

4.  如果新元素大于 Sk，则将其替换到 S 中，并对堆进行重新排序。

5.  S 然后将有一个新的最小元素。

6.  在查看了所有其他元素之后，Sk 就是答案

我不明白这个算法。例如，让数字为 1、2、3、4。我们想找到第 4 个最大的，即 4。但是当我们使用算法时，我们取前 4 个元素，构建 minheap，Sk 为 1。

我究竟做错了什么？如果有人可以提供帮助，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T21:08:29.750

我认为您的困惑在于术语。序列 1、2、3、4 中最大的元素是数字 4。第二大元素是 3，第三大元素是 2，第四大元素是 1。由于算法返回 1，所以它可以正常工作.

但是，4 是序列中第 k 个*最小*的元素。如果您想找到第 k 个最小的元素，您可以将最小堆与最大堆交换，并对算法进行适当的调整。

希望这可以帮助！

# python - 如何使用python登录网站

> ID：14297916
> 
> 赞同：-1
> 
> 时间：2013-01-12T21:01:39.863
> 
> 标签：python, post, login, python-3.x, python-requests

> **可能重复：**
> [如何使用 Python 的请求模块“登录”到网站？](https://stackoverflow.com/questions/11892729/how-to-log-in-to-a-website-using-pythons-requests-module)

我正在使用 python 3.2.3 编写应用程序，但我不知道如何登录网站。我需要登录...并保存 cookie（我认为），但我尝试的一切都不起作用。

我试过[Requests](http://docs.python-requests.org/en/latest/user/quickstart/#post-a-multipart-encoded-file)，但没有运气。我的网页在本地主机上运行（它只是简单的登录表单）。

```
FORM:
    <form method="post" action="">
            <input type="text" name="uname" placeholder="Uporabnisko ime:"/>
            <input type="password" name="password" placeholder="Geslo:"/>
            <input type="submit" value="Send"/>
    </form> 
```

Python：

```
import requests
payload = {'uname': 'name', 'password': 'pswd123'}
r = requests.post('http://localhost/python', data=payload) 
```

这无济于事。如何发布名称和用户名.. 感谢您的回复。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T21:20:10.423

要指示 python 请求“在登录会话中保留 cookie”，请使用`requests.session`：

```
import requests
session = requests.session()
payload = {'uname': 'name', 'password': 'pswd123'}
r = session.post('http://localhost/python', data=payload)
r = session.get('http://localhost/authenticated/resource')
#   ^^^^^^^ 
```

# iphone - UITableViewCell 不显示全文

> ID：14297918
> 
> 赞同：3
> 
> 时间：2013-01-12T21:01:47.820
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我有一个`tableview`但没有一个单元格显示更长的文本。更奇怪的是，它似乎并不是他们停下来的设定值。有些单元格在被截断之前显示的文本比其他单元格多。`NSLog()`确认字符串设置正确。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    //code for getting string removed for readability

    // Identifier for retrieving reusable cells.
    static NSString *cellIdentifier = @"MyCellIdentifier";

    // Attempt to request the reusable cell.
    cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    // No cell available - create one.
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];

        // format it
        cell.textLabel.numberOfLines = 0;           
        cell.textLabel.font = [UIFont systemFontOfSize:12.0]; 
        cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;
    }

    // Set the text of the cell to the row index.
    cell.textLabel.text = fulltext;

    return cell;
} 
```

我的印象是`numberOfLines`函数`0`会处理它，但所有单元格都在 2 行，仅此而已。我怎样才能让它们根据需要调整到尽可能多的行？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:32:59.310

我建议继承 UITableViewCell。不要对 cellForRowAtIndexPath 进行太多更改，但是

```
cell = [[MyVeryOwnTableCell alloc] initWithStyle:UITableViewCellStyleDefault 
reuseIdentifier:cellIdentifier]; 
```

假设您的子类`UITableViewCell`是`MyVeryOwnTableCell`.

在 MyVeryOwnTableCell 的实现中，您应该覆盖 layoutSubViews 方法。首先调用`[super layoutSubViews]`，然后相应地重新排列 textLabel 的框架。您可能不需要更改位置，但需要更改高度和 numberOfLines。另外，您可能需要设置适当的 lineBreakMode。有关详细信息，请参阅文档。 [http://developer.apple.com/library/ios/#documentation/uikit/reference/UILabel_Class/Reference/UILabel.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UILabel_Class/Reference/UILabel.html)

按照此模式计算文本的大小：

```
CGSize textSize;
textSize = [textLabel.text sizeWithFont:... constraintToSize:
CGSizeMake(300.0f, 10000.0f) lineBreakMode: ...]; 
```

您在单元格实现的 layoutSubViews 中执行此操作，如果单元格的总大小太小，您可能必须以类似的方式使用它，如果您必须覆盖 heightForRowAtIndexPath。

这里的诀窍是，在开始时，您会在 UILabel 的宽度上精确地给出尺寸限制（因此 300.0 可能不适合您）加上或多或少的无限高度。您将返回文本要求的实际大小（在这种情况下最多为 10000）。然后使用该高度/大小分别设置标签的实际大小，以根据需要计算单元格的总高度，以显示文本和可能的其他附加项目。

**例子：**

```
textLabel setFrame:CGRectMake(10.0f, 10.0f, 300.0f, textSize.height); 
```

关于300.0f。如果您仍想使用 UITableViewCell 的自动布局功能（在设置图像时动态重新对齐标签），请将其替换为 textLabel.frame.size.width。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:23:21.160

我认为为了让它显示更多的线条，你必须调整 cell.textlabel 和单元格本身的框架大小。您必须使它们的框架尺寸更高以适应新文本。如果只有两行文本适合，那就是它要显示的全部内容。您必须根据所需的线条以编程方式调整高度。

这是一个人的[链接](https://stackoverflow.com/questions/446405/adjust-uilabel-height-depending-on-the-text)，他展示了如何根据行数使帧大小动态化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T21:33:57.170

您必须在运行时通过计算单元格标签 wrt 字符串的高度来调整每行的高度。

以下函数给出了你的标签大小，表格视图单元格的宽度固定

```
-  (CGSize) calculateLabelHeightWith:(CGFloat)width text:(NSString*)textString
{
    CGSize maximumSize = CGSizeMake(width, 9999);
    CGSize size = [textString sizeWithFont:[UIFont fontWithName:@"HelveticaNeue-Medium" size:14]
                         constrainedToSize:maximumSize 
                             lineBreakMode:UILineBreakModeWordWrap];
    return size;
} 
```

使用表格单元格高度委托方法

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //Get String for corresponding Row
    NSString *stringObject=fullText;
     //here i ave taken row width 320
    CGSize rowSize=[Utils calculateLabelHeightWith:320 text:stringObject];

    return (rowSize.height+20); 
} 
```

如果在创建行时动态调整行高度，它将首先调整其高度。

我希望这能解决你的问题。

# java - DataOutputStream 不发送 -1

> ID：14297923
> 
> 赞同：0
> 
> 时间：2013-01-12T21:02:08.490
> 
> 标签：java, io, chat, send

我正在尝试为聊天客户端创建发送选项，并且我能够为小文件执行此操作，但是当我尝试使用大文件执行此操作时遇到了问题。我试图解决它的方法是：客户端，从文件中读取并发送：

```
while ((buf = bin.read(bytearray, 0, bytearray.length)) != -1) {
     os.write(bytearray,0,bytearray.length);
}
bin.close(); 
```

“bin”是来自 fileInputStream 的 bufferedInputStream，“buf”只是一个整数，os 是我的 DataOutputStream。服务器端，接收和发送：

```
while ((buf = in.read(bytes, 0, bytes.length)) != -1) {
dos.write(bytes,0,bytes.length);
} 
```

“in”是 DataInputStream，“buf”是一个整数，“dos”是一个 DataOutputStream（它为所有客户端执行此操作）客户端，从服务器接收文件并写入硬盘驱动器：

```
int buf;
while ((buf = in.read(bytes, 0, bytes.length)) != -1) {
     fos.write(bytes,0,bytes.length);
}
fos.close(); 
```

这里“in”是一个DataInputStream，“fos”是一个FileOutputStream。发生的情况是，当我在第一个客户端上点击发送按钮时，服务器和客户端都开始接收文件，但只有在我关闭第二个客户端（接收器）时才会收到它，因为那是套接字关闭的时候，可能就是它的时候实际上决定停止接收并完成写入文件。请告诉我为什么在发送执行一次时它没有收到那个“-1”，并且服务器中的 dataInputStream 应该是空的，因此导致那个“-1”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T03:38:00.213

DataOutputStream*从不*发送 -1。当您关闭输出流时，底层传输向对等方发送 EOS 信号，并且在遇到时由 read() API 返回为 -1。电线上没有-1。如果您不关闭输出流，您将不会收到 -1。

如果您希望阅读器在不关闭输出流的情况下停止阅读，则必须以某种方式告诉它作为应用程序协议的一部分：例如，在数据之前发送一个长度字，并让阅读器准确读取那么多字节。

# c++ - dllimport 和 w/o 指示器有什么区别？

> ID：14297924
> 
> 赞同：-1
> 
> 时间：2013-01-12T21:02:27.550
> 
> 标签：c++, dll

假设 A 类仅在 dll 库的头文件中定义（在 cpp 中没有实现），如下所示，有两种方式：

```
class __declspec(dllimport) A {...};

class A {...}; 
```

我尝试在我的应用程序中使用该库，我发现第一个不起作用。为什么？有什么方法可以使它与 dllimport 一起使用？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:38:34.273

它`__declspec(import)`有两个下划线，而不是一个。

除此之外，如果您使用的库是使用不同版本的 Visual Studio 编译的，它很可能找不到它尝试导入的符号。

应该假设由于潜在的 ABI 更改，使用一个版本的 Visual Studio 编译的库将无法链接到使用另一个版本的 Visual Studio 编译的库。

您需要使用与尝试链接它的应用程序相同的 Visual Studio 版本来编译 DLL。

# php - 序列化 PHP 字符串的结构

> ID：14297926
> 
> 赞同：37
> 
> 时间：2013-01-12T21:02:32.847
> 
> 标签：php, string, serialization

我想知道是否有人可以将我指向一个记录了序列化 php 字符串详细信息的资源。我基本上想知道格式/结构，所以我可以在 VB.NET 中编写一个函数来序列化/反序列化它。

谢谢！

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-01-12T22:34:54.767

基本结构如下：

**标量类型：**

1.  布尔值被序列化为：

    ```
    b:<i>; 
    ```

    其中`<i>`是一个值为`0`(false) 或`1`(true) 的整数。

2.  整数被序列化为：

    ```
    i:<i>; 
    ```

    其中`<i>`是整数值。

3.  浮点数被序列化为（`d`含义为双）：

    ```
    d:<f>; 
    ```

    `<f>`浮点值在哪里。

4.  字符串被序列化为：

    ```
    s:<i>:"<s>"; 
    ```

    其中`<i>`是表示 的字符串长度的整数`<s>`，`<s>`是字符串值。

**特殊类型：**

1.  `null`被简单地序列化为：

    ```
    N; 
    ```

**复合类型：**

1.  数组被序列化为：

    ```
    a:<i>:{<elements>} 
    ```

    其中`<i>`是一个整数，表示数组中元素的数量，以及`<elements>`零个或多个序列化键值对：

    ```
    <key><value> 
    ```

    其中`<key>`表示序列化的标量类型，以及`<value>`任何可序列化的值。

2.  对象被序列化为：

    ```
    O:<i>:"<s>":<i>:{<properties>} 
    ```

    其中第一个`<i>`是表示 的字符串长度的整数`<s>`，并且`<s>`是完全限定的类名（类名前面带有完整的命名空间）。第二个`<i>`是一个整数，表示对象属性的数量。`<properties>`是零个或多个序列化名称值对：

    ```
    <name><value> 
    ```

    其中`<name>`是表示属性名称的序列化字符串，以及`<value>`任何可序列化的值。

    **不过有一个问题`<name>`：**

    `<name>`表示为

    ```
    s:<i>:"<s>"; 
    ```

    其中`<i>`是一个整数，表示 的字符串长度`<s>`。`<s>`但是每个属性的可见性的值不同：

    一种。**公共**属性`<s>`是属性的简单名称。

    湾。然而，**受保护**`<s>`的属性是属性的简单名称，前面带有一个`\0*\0`星号，包含在两个`NUL`字符中（即`chr(0)`）。

    C。而对于**私有**属性，`<s>`是属性的简单名称，以`\0<s>\0`-开头，用两个字符`<s>`括起来，其中是完全限定的类名。`NUL``<s>`

* * *

还有一些其他情况，例如`R:<i>;`，代表引用，我在这里没有提到（因为老实说我还没有弄清楚它的确切工作原理），但这应该让您对 PHP 的序列化机制有一个不错的了解.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-06-05T09:42:56.773

我[在 phpinternalsbook 上发现这个页面](http://www.phpinternalsbook.com/classes_objects/serialization.html)非常完整。它还显示了实现`Serializable`接口的类的替代序列化格式，以及`R`格式说明符的含义。

# java - 应用引擎中可排序队列的设计模式

> ID：14297928
> 
> 赞同：1
> 
> 时间：2013-01-12T21:02:38.570
> 
> 标签：java, google-app-engine, design-patterns

我正在尝试在 App 引擎中存储一个可排序的队列。可排序，因为用户可以创建自定义订单。考虑它的最简单方法是歌曲列表。每 5 分钟从列表中选择一首新歌并播放。但是用户可以添加新歌曲并调整列表的播放顺序。播放一首歌曲后，它将从列表中删除。我如何为列表中的大量歌曲执行此操作。

我想过添加一个 sortOrder 字段，但是每当播放一首歌时，我都需要更新整个列表。然后我想保持浮动排序顺序，只跟踪最高和最低条目，但这似乎如果一次添加许多歌曲可能会导致麻烦。

任何有关我可以查看的设计模式的信息将不胜感激。另外，有什么方法可以使用歌曲的唯一键值来排序我的列表。我是否保证所有新的 id 都会比之前创建的更大，或者有什么方法可以保证这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:41:33.987

我认为您只需要一个有序队列，您可以从中任意重新排列或添加/删除元素。如果是这种情况，您可以使用链表，它实际上是一种数据结构，而不是设计模式。

请参阅[java.util.LinkedList](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedList.html)。

因此，例如，您可以使用`remove(int index)`删除列表中任何位置的歌曲，同时保留顺序。等效地，您可以使用`add(int index, Object element)`在列表中的任何索引处插入歌曲，同时保留顺序。那里还有其他实用方法，但这似乎是实现您所需要的基础。

# video.js - chrome 的多个 video.js 问题

> ID：14297931
> 
> 赞同：1
> 
> 时间：2013-01-12T21:03:16.713
> 
> 标签：video.js

我在使用 video.js 和 chrome 时遇到问题。在 chrome 24 上，视频似乎无法播放。播放开始一秒钟，然后停止。video.js 主页上的视频也是如此。我已经尝试过多台PC。在 chrome 23 上播放似乎很好。当播放停止时，我只会在控制台中看到一个视频错误事件。

但是，在具有 chrome 23 的 PC 上，我在使用 wordpress 插件时遇到了问题。任何包含由插件创建的链接的页面都不会滚动。这适用于单个和多个视频

在这两种情况下，IE 和 firefox（使用 flash，因为我只有一个 .mp4）似乎没有问题。

有没有人见过这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:26:49.007

使用 Chrome 24 对我来说效果很好。我不排除视频是原因，而不是播放器。

我最近尝试了很多 Html5 播放器，大多数问题都是由于视频编码造成的。

例如，使用 Miro Video Converter 编码的视频不会出现在 Firefox 上，诸如此类。

我发现的唯一一个似乎普遍适用的带有 Html5 选项的编码软件是 Any Video Converter：[http ://www.any-video-converter.com/](http://www.any-video-converter.com/)

免费版可以满足我的一切需求。

# c++ - 如何从命令行或其他应用程序打开桌面应用程序并将其置于前面？

> ID：14297934
> 
> 赞同：3
> 
> 时间：2013-01-12T21:03:30.487
> 
> 标签：c++, windows, delphi, desktop-application

有时需要从命令行打开新程序（例如 Windows Powerpoint 演示文稿，可以通过命令行“ `powerpnt.exe /s`”打开幻灯片），将该程序最大化并将其作为用户可以看到和使用的第一个程序放在桌面前面。如果用户直接在命令提示符中输入命令，默认情况下会发生这种情况，因为命令提示符是活动窗口。

但问题是 - 如何做到这一点，如果命令行是从后台进程执行的 - 例如来自 Windows Task Scehduler 的自定义 Windows 服务应用程序 - 在这两种情况下，新窗口都不会作为第一个窗口出现。

目前我只能想象非常困难的解决方案（其缺点是它们需要编码并且不能从任务计划程序中使用）：

1.  可以尝试获取已打开程序的主窗口的句柄并操作该窗口 - 例如最大化等；
2.  可以尝试完全放弃命令行，而是将 Windows Office 应用程序作为 COM 对象进行操作。

也许有更简单的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T21:49:22.573

您可以创建一个小型（非 gui）启动器应用程序，它将为您调用新程序（我知道，这就是您所说的硬解决方案），然后在任务调度程序上安排这个启动器。

这个启动器应用程序必须创建 de 进程（[CreateProcess 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)），然后从 pID 中获取窗口句柄...使用窗口句柄，您可以使用 SetForegroundWindow 来执行您需要的操作，或者调用其他函数进行最大化等操作.

由于您标记了 delphi，因此我发布了一个可能的 delphi 实现。

```
function WindowFromPID(pID: Cardinal; VisibleWindow: Boolean): Cardinal;
type
  TProcData = record
    pID: Cardinal;
    pHandle: Cardinal;

    VisibleWindow: Boolean;
  end;

var 
  wPData: TProcData;

  function EnumProc(Handle: HWND; var pProcData: TProcData): Bool; stdcall;
  var pID: DWORD;
  begin
    Result := True;
    if pProcData.VisibleWindow then
      if not IsWindowVisible(Handle) then
        Exit;

    GetWindowThreadProcessId(Handle, @pID);
    if pID = pProcData.pID then begin
      if GetWindow(Handle, GW_OWNER) = 0 then begin
        pProcData.pHandle := Handle;
        Result := false;
      end;
    end;
  end;
begin
  wPData.pHandle := 0;
  wPData.pID := pID;
  wPData.VisibleWindow := VisibleWindow;

  EnumWindows(@EnumProc, Integer(@wPData));
  while (wPData.pHandle = 0) do begin
    Sleep(50);
    EnumWindows(@EnumProc, Integer(@wPData));
  end;

  Result := wPData.pHandle;
end;

procedure RunAndGetWindowHandle(const FileName, Params: String; const WindowState: Word): Cardinal;
var 
  SUInfo: TStartupInfo;
  CmdLine: String;
  ProcInfo: TProcessInformation
begin
  CmdLine := '"' + Filename + '"' + Params;
  FillChar(SUInfo, SizeOf(SUInfo), #0);
  with SUInfo do begin
    cb := SizeOf(SUInfo);
    dwFlags := StartF_UseShowWindow;
    wShowWindow := WindowState;
  end;

  if not CreateProcess(Nil, PChar(CmdLine), nil, nil, False, Create_New_Console Or Normal_Priority_Class, nil, PChar(ExtractFilePath(Filename)), SUInfo, ProcInfo) then
    raise Exception.Create('Error running process');

  if WaitForSingleObject(ProcInfo.hProcess, 50) <> WAIT_TIMEOUT then
    raise Exception.Create('Error running process!');

  CloseHandle(ProcInfo.hThread);
  while Result = 0 do begin
    Sleep(50);
    Result := WindowFromPID(ProcInfo.dwProcessId, true);
  end;
end;

...

var WindowHandle: Cardinal;
begin
  WindowHandle := RunAndGetWindowHandle("powerpnt.exe", " /s", SW_SHOWNORMAL);
  SetForegroundWindow(WindowHandle);
end; 
```

希望这就是你所需要的.. 抱歉，如果不是。

最好的祝福。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:07:49.677

创建一个打开所需程序的批处理文件并让任务计划程序运行*该*.

批处理文件将像用户直接在命令提示符中输入命令一样运行，您将获得所需的结果。

# c++ - C++ 问题读取文本文件

> ID：14297935
> 
> 赞同：1
> 
> 时间：2013-01-12T21:03:38.240
> 
> 标签：c++, text

我正在尝试使用 C++，并在读取文本文件时收到以下错误。知道为什么吗？

输入：

```
This is a test.
    A test, with tabs  and too many spaces.
If this is a good one,
    then all will be well. 
```

输出：

```
 then all will be well. too many spaces. 
```

代码：

```
#include <cstdlib>
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main() {    

    string line;

    ifstream infile ("A5.txt");

    if (infile.is_open()) {
        while (!infile.eof()) {
            getline(infile,line);
            cout << line << endl;
        }
        infile.close();
    }
return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T21:09:44.017

您使用一个使用 UNIX 行尾 ( `\n`) 的实现，并解释`\r`为将光标返回到行首。该文件包含旧的 Mac OS 行尾 ( `\r`)，这意味着`getline()`读取到文件末尾并将所有内容`\r`放入字符串中，导致您稍后将它们打印到控制台。

# sql - 查找每部电影 SQL 的平均评分

> ID：14297937
> 
> 赞同：-2
> 
> 时间：2013-01-12T21:03:51.823
> 
> 标签：sql, database, sqlite, rating, movie

我目前正在参加关于数据库的在线斯坦福课程，如果您能帮我解决这个 sql 问题，我将不胜感激。对不起，我是一个完全的菜鸟。

表电影：

```
mID | title | year | director 
```

表评级

```
rID | mID | stars | ratingDate 
```

表审阅者

```
rID | name 
```

对于所有评论者对，使得两位评论者都对同一部电影进行评分，返回两位评论者的姓名。消除重复，不要将审阅者与他们自己配对，并且每对只包含一次。对于每一对，按字母顺序返回该对中的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-07T18:06:46.940

好的。你实际上问了两个不同的问题。

首先，我将回答您在帖子标题中提出的问题。

这应该有效。

```
select Movie.title, avg(Rating.stars) as AR from
Rating join Movie on Rating.mID = Movie.mID
group by Movie.title
order by AR desc 
```

如果你没有在连接中指定“on”子句，像这样，

```
select Movie.title, avg(Rating.stars) as AR from
Rating join Movie
group by Movie.title
order by AR desc 
```

那么由于加入的全叉积，所有电影将具有相同的评级，即全球平均水平。您想要对名称进行内部连接，或者在本例中为 id。

其次，这是您提出的另一个问题的答案，关于审稿人对。`R1.name < R2.name`确保审阅者姓名从左到右排序。并`order by R1.name`确保这些对将自上而下排序。

```
select distinct R1.name, R2.name from
Rating Ra1 join Rating Ra2
join Reviewer R1 join Reviewer R2
where Ra1.mID = Ra2.mID and Ra1.rID != Ra2.rID
and R1.name < R2.name
and Ra1.rID = R1.rID and Ra2.rID = R2.rID
order by R1.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:54:50.830

求每部电影的平均评分：

```
SELECT 
    [m].[mID],
    [m].[title],
    AVG([r].[stars]) AS [AvgRating]
  FROM [Movie] [m]
  LEFT JOIN [Rating] [r] ON [m].[mID] = [r].[mID]
  GROUP BY 
    [m].[mID],
    [m].[title] 
```

查找每部电影的唯一评论者：

```
SELECT
    [r].[mID],
    [v].[rID],
    [v].[name]
  FROM [Reviewer] [v]
  INNER JOIN [Rating] [r] ON [v].[rID] = [r].[rID]
  GROUP BY
    [v].[rID],
    [v].[name],
    [r].[mID] 
```

结合：

```
SELECT 
  [rat].[mID],
  [rat].[title],
  [rev].[rID],
  [rev].[name],
  [rat].[AvgRating]
FROM
(
  SELECT 
    [m].[mID],
    [m].[title],
    AVG([r].[stars]) AS [AvgRating]
  FROM [Movie] [m]
  LEFT JOIN [Rating] [r] ON [m].[mID] = [r].[mID]
  GROUP BY 
    [m].[mID],
    [m].[title]
) AS [rat]
LEFT JOIN
(
  SELECT
    [r].[mID],
    [v].[rID],
    [v].[name]
  FROM [Reviewer] [v]
  INNER JOIN [Rating] [r] ON [v].[rID] = [r].[rID]
  GROUP BY
    [v].[rID],
    [v].[name],
    [r].[mID]
) AS [rev] ON [rat].[mID] = [rev].[mID]
ORDER BY 
  [rat].[mID] ASC,
  [rev].[name] ASC 
```

对于小提琴，[看这里](http://www.sqlfiddle.com/#!5/3cc9f/8)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T21:07:33.677

这会让你开始。

```
SELECT m.*, ra.*, re.*
FROM Movie m
JOIN Rating ra ON ra.mID = m.mID
JOIN Reviewer re ON re.rID = ra.rID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T21:10:01.490

也许是这样的：

```
SELECT rev.rID, rev.name, m.title
FROM [Reviewer] rev 
   JOIN [Rating] rate ON rev.rID = rate.rID
   JOIN [Movie] m ON rate.mID = m.mID
   JOIN (
     SELECT mID
     FROM [Rating] 
     GROUP BY mID
     HAVING COUNT(Distinct rID) > 1
   ) m2 on m.mID = m2.mID
ORDER BY rev.name 
```

- 编辑

如果您还需要获得平均值：

```
SELECT rev.rID, rev.name, m.title, ar.avgRating
FROM [Reviewer] rev 
   JOIN [Rating] rate ON rev.rID = rate.rID
   JOIN [Movie] m ON rate.mID = m.mID
   JOIN (
     SELECT mID
     FROM [Rating] 
     GROUP BY mID
     HAVING COUNT(Distinct rID) > 1
   ) m2 on m.mID = m2.mID
   JOIN (
     SELECT mID, AVG(stars) as avgRating
     FROM [Rating] 
     GROUP BY mID
   ) ar on m.mID = ar.mID
ORDER BY rev.name 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!7/9c370/9)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-08T19:09:11.880

我正在做同样的课程，这是我得到的答案：

```
SELECT DISTINCT name1, name2
FROM (SELECT R1.name AS name1, R2.name AS name2
FROM (Rating JOIN Reviewer using(rId)) AS R1,
(Rating JOIN Reviewer using(rId)) AS R2
WHERE R1.mId = R2.mId AND R1.rId <> R2.rId) AS Tuple
WHERE name1 < name2; 
```

我不知道为什么 OP 在标题上谈论平均，因为这个问题不需要。

编辑：供进一步参考，以下是数据：[https ://class.stanford.edu/c4x/DB/SQL/asset/moviedata.html](https://class.stanford.edu/c4x/DB/SQL/asset/moviedata.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-28T05:57:14.333

```
select distinct r2.name, r1.name
from 
(select r1.rid, r1.mid, r2.name
from (select * from reviewer order by name) r2
join (select r1.rid, r1.mid from rating r1 join reviewer r2 on r1.rid = r2.rid order by r2.name) r1
on r2.rid = r1.rid
group by mid
order by r2.name) r1,
(select r1.rid, r1.mid, r2.name
from reviewer r2,
rating r1
where r1.rid = r2.rid)r2
where r1.rid <> r2.rid and r1.mid = r2.mID
order by r2.name, r1.name 
```

# c++ - MFC画线

> ID：14297940
> 
> 赞同：1
> 
> 时间：2013-01-12T21:04:27.533
> 
> 标签：c++, visual-c++, mfc

我需要帮助来制作某个 MFC 程序。我需要制作一个程序，以下列方式绘制一条线：用户通过左键单击选择起点，通过第二次左键单击选择终点，然后连接点并绘制线。我已经设法得到了第一个坐标：

```
void CsemView::OnLButtonDown(UINT nFlags, CPoint point)
{
    CsemDoc* pDoc= GetDocument();
    // TODO: Add your message handler code here and/or call default 
    pDoc->a_pos=point;
    Invalidate();
    CView::OnLButtonDown(nFlags, point);
} 
```

问题是，我不知道如何通过第二次左键单击获得第二个坐标。我已经设法通过使用左键双击功能（并将 pDoc->b_pos=point; 放入其中）来做到这一点，但这并不是我真正应该做的。（我将第一个坐标放入 MoveTo 并将第二个坐标放入 LineTo）。如果有人可以帮助我，我将不胜感激（我怀疑可能有一种不同的、更简单的方法）。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:14:56.063

如果你想从同一个事件中获得两个结果，你必须保留一个状态变量来跟踪点击是什么。

换句话说，你`CsemDoc`应该有一个`a_pos`和`b_pos`成员，和`CsemView`一个`bool is_b`，初始化为假。

该`OnLButtonDow`方法应该：类似于

```
if(!is_b)
{ set the a_pos; is_b = true; }
else
{ set the b_pos; is_b = false; invalidate the draw; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:14:47.767

您可以将每个 LButtonDown 上的鼠标坐标推到一个向量上并在 P[i] 和 P[i+1] 之间画线，然后在 RButtonDown 上，您可以在此之后停止记录点，并且不会再有额外的线画。像任何绘图工具箱一样有一个单独的按钮来开始画线，以便之后的任何 LButtonDown 事件都将被推送到向量。

希望这可以帮助！

# ssrs-2008 - 允许用户直接运行 SSRS 2008 R2 报表，而不是在网站内创建报表查看器

> ID：14297943
> 
> 赞同：1
> 
> 时间：2013-01-12T21:04:55.457
> 
> 标签：ssrs-2008, reporting-services

我之前在另一项工作中使用过这个，DBA 设置用户访问 SSRS 中的某些报告。

我所要做的就是提供一个指向 SSRS 主页的链接，用户会尝试向下钻取以单击报告并运行它。如果他们没有访问权限（DBA 设置），他们甚至无法进入包含报告的文件夹，或者最坏的情况是无法运行特定报告。

有人可以帮助我通知我的同事（通过链接等），而不是在应用程序中设置报告查看器页面来访问报告，这可以多么容易地完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T22:05:03.003

好的，

按照这些步骤

1.  以管理员权限登录您的报表管理器 http://{ServerName}/Reports
2.  单击“主页”文件夹旁边的箭头，然后单击安全性 ![在此处输入图像描述](../Images/5ac7fe2b868ff4107a181ca590df545d.png)

3.  点击“新角色分配”

4.  在“组或用户名”中写一个用户名并检查您要为他设置的权限

注意：您应该编写组织中存在的用户

例如写每个人（让每个人都可以访问报表服务器）具有“浏览器”的权限

![在此处输入图像描述](../Images/547d5fb8fc894eb762a28482ec0c1e0e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T22:05:53.400

您在谈论 Report Manager 网站：

[http://msdn.microsoft.com/en-us/library/ms157147(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms157147(v=sql.105).aspx)

这是在 Reporting Services 安装期间或通过 Reporting Services 配置管理器配置的。这仅涉及设置报告 URL；通常是一次完成的操作。

在设置访问方面，您需要授予对报告服务器中项目（例如文件夹和报告）的访问权限 - 确切的步骤在此页面中：

[http://msdn.microsoft.com/en-us/library/ms156034(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms156034(v=sql.105).aspx)

1.  启动报表管理器并找到要为其添加用户或组的报表项。
2.  将鼠标悬停在项目上，然后单击下拉箭头。
3.  在下拉菜单中，单击安全性。
4.  单击新角色分配。
5.  在组或用户名中，按以下格式输入 Windows 域用户或组帐户：<域>\<帐户>。如果您使用表单身份验证或自定义安全性，请以适合您的部署的格式指定用户或组帐户。
6.  选择一个或多个描述用户或组应如何访问项目的角色定义，然后单击确定。

因此，这没什么大不了的 - 取决于您的组织您希望如何进行。

# google-maps - 如何获取地图坐标并反转它们以使其遵循 KML 标准？（纬度/经度与经度/纬度）

> ID：14297946
> 
> 赞同：1
> 
> 时间：2013-01-12T21:05:05.273
> 
> 标签：google-maps, google-maps-api-3, kml

我的地图允许用户绘制与最近道路对齐的坐标。我捕获生成的折线并将它们存储在融合表中。

现在我想检索这些折线坐标并显示在地图上。

当我在融合表中有以下内容时，它会正确映射：

```
<LineString><coordinates>-93.2817792892456,37.20134698578519 -93.28178000000001,37.201420000000006 -93.27869000000001,37.2014 -93.27869000000001,37.2014 -93.27813,37.2014</coordinates></LineString> 
```

但不幸的是，地图输入正在捕获更像这样的东西：

```
<LineString><coordinates>(37.20134698578519,-93.2817792892456),(37.201420000000006,-93.28178000000001),(37.2014,-93.27869000000001),(37.2014,-93.27869000000001),(37.2014,-93.27813)</coordinates></LineString> 
```

我的问题是是否要解决这个问题，我需要解析这个字符串以使其符合可接受的格式，或者如果我遗漏了一些东西并且有一种更容易更容易接受的方法来做到这一点。

[Jsfiddle 在这里](http://jsfiddle.net/witold/X7YRK/2/)。如果您绘制了几条折线，您可以单击“清除”控件以获取显示坐标的警报，或者您可以双击结束折线绘制，这将弹出一个带有“位置”字段的信息框最终出现在融合表中的坐标。

[这是融合表](https://www.google.com/fusiontables/DataSource?docid=1wjb66a4sB7cMwL6mQ0ApHAc0Ob6pfzuPt4HZNs8)。'scce' 和 'scenic' 等记录在地图上正确显示。但是像“曲折/新格式”这样的记录却没有。

对此的任何见解将不胜感激。谢谢你的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:24:44.967

Google Maps API 使用[google.maps.LatLng 对象](https://developers.google.com/maps/documentation/javascript/reference#LatLng)。转换为字符串时，坐标按“纬度，经度”的顺序排列。

[KML 格式](https://developers.google.com/kml/documentation/kmlreference#coordinates)使用相反的顺序：

```
<coordinates>longitude1,latitude1 longitude2,latitude2</coordinates> 
```

（也允许可选的第三个“高度”坐标）

更改代码以正确顺序输出坐标且不带括号

改变这个：

```
 geolines=escape("<LineString><coordinates>")+poly.getPath().getArray().toString().replace(/([\s]+)/g, '')+escape("</coordinates></LineString>") ; 
```

至：

```
 geolines=escape("<LineString><coordinates>");
  var path = poly.getPath();
  var length = path.getLength();
  for (var i=0; i < length; i++) {
    geolines += path.getAt(i).lng()+","+path.getAt(i).lat()+" ";
  }
  geolines+= escape("</coordinates></LineString>"); 
```

（未测试）

# c# - WinRT 中的 XML 解析

> ID：14297947
> 
> 赞同：0
> 
> 时间：2013-01-12T21:05:13.183
> 
> 标签：c#, windows-runtime

如果我有这样的 XML 文档

```
<Doc>
   <File>
      <ObjectID></ObjectID>
   </File>
</Doc> 
```

它有时看起来像这样

```
<Doc>
   <Name />
   <File>
      <ObjectID></ObjectID>
   </File>
</Doc> 
```

我怎样才能得到`File`-元素？
它们并不总是在同一级别，有时它们可​​以在根级别
也可能有时，它被多次放置在 Document 中（但它们处于同一级别）

**更新**

`<File>`-element 也可以有下面的`<File>`元素，不应该这样解析

```
<Doc>
   <Name />
   <File>
      <ObjectID></ObjectID>
      <RelatedTo>
         <File></File>
      </RelatedTo>
   </File>
</Doc> 
```

在这种情况下，结果应该是

```
<File>
   <ObjectID></ObjectID>
   <RelatedTo>
      <File></File>
   </RelatedTo>
</File> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:09:27.250

作为`s`包含您的 XML 代码的字符串：

```
var document = XDocument.Parse(s);
var fileElements = document.Descendants("File").
                       ToArray(); 
```

请注意，您不会得到一个元素，而是一个数组。如果您的文档中只有一个，那么该数组将只有一个元素。

即使`File`元素是其他元素的子元素，上述方法也将起作用，但我不确定它们处于“根级别”是什么意思。你给我们带来的不就是这种情况吗？

**编辑：**使其适应作者的编辑：

```
var elementName = "File";
var firstFileElement = document.Descendants(elementName).
    First();
var fileElements = firstFileElement.Parent.Elements(elementName).
    ToArray(); 
```

# jquery-mobile - jQuery 移动关闭弹出窗口

> ID：14297950
> 
> 赞同：1
> 
> 时间：2013-01-12T21:06:08.577
> 
> 标签：jquery-mobile

我正在尝试使用下面代码中的按钮关闭弹出窗口。但是，当我调用 close 函数时，它似乎不起作用：

```
 $('#popupBasic').popup("close"); 
```

这是html代码：

```
<a href="#popupBasic" id="StopButton" data-rel="popup" data-role="button" data-theme="a" onclick="getLocation2(); Workoutdistance();" data-inline="true" class="">Stop</a>

<div data-role="popup" id="popupBasic">
    <a href="" data-role="button" onclick="database()" data-inline="true" data-theme="a">Submit to DB</a> 
</div> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T09:57:06.927

您可以添加此代码，因此 x 图标（关闭）将出现在弹出窗口的右上角

```
<a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a> 
```

低于 div

```
<div data-role="popup" id="popupBasic">
    <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
    <a href="" data-role="button" onclick="database()" data-inline="true" data-theme="a">Submit to DB</a> 
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:17:43.267

原来我引用了 jQuery 脚本两次。它现在完美运行。

# visual-c++ - C++/CLI 句柄运算符

> ID：14297951
> 
> 赞同：2
> 
> 时间：2013-01-12T21:06:21.137
> 
> 标签：visual-c++, c++-cli

我只是对 C++/CLI 句柄（^）及其工作原理感到好奇。例如：

我无法理解的第一件事是，[在这里](https://stackoverflow.com/questions/202463/what-does-the-caret-mean-in-c-cli)接受的答案说插入符号是*（指针）的托管等效项。但是，与 * 不同，我可以直接为 ^ 赋值。

```
int ^num;
num = 4; 
```

这在 C++ 中不起作用：

```
int *num2;
num2 = new int[1];
num2 = 10; 
```

为什么会观察到这种行为？此外，在 Microsoft[网页](http://msdn.microsoft.com/en-us/library/vstudio/yk97tc08.aspx)中，他们说您不能指向对象的成员，并且它不支持指针算术。所以下面的代码片段都无法编译

```
int ^num3 = gcnew int[10];

for(int i = 0; i<10; i++)
    %(num3 + i) = i 
```

或者

```
for(int i = 0; i<10; i++)
    (num3 + i) = i 
```

为什么？？？

这让我想到了最后一个问题：在 C++/CLI 中遵循 int 本机/普通 C++ 代码片段相当于什么？

```
int *array1;
array1 = new int[ 10];

for( int i = 0; i < 10; i++)
     *(array1 + i ) = i; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T21:12:27.273

`int^`表示对**[装箱](http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx)**整数的引用。
它不是指向常规整数的指针。

CLR 中引用类型的句柄不等同于指针。这是相似的。

两者都“指向”一个对象，但这就是相似性结束的地方。
它更像是一个 C++ **[shared_ptr](http://en.cppreference.com/w/cpp/memory/shared_ptr)**。

无论如何，装箱整数是包装整数的对象。
`int^`是对装箱对象的引用，因此除了保存值之外，它还可以为 null（因为它是引用）。

当您执行`int^ = 4;`装箱对象的构造函数时，构造一个值为 4 的装箱对象。
因此，与 c++ 指针不同，您不是指向地址“4”，而是“指向”恰好包含值 4 的对象.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T21:11:45.070

`^`等效于`*`, 用于处理类对象（new/gcnew、作为参数传递、作为类定义的一部分存储等）。指针算法在 C++/CLI 中是不一样的。

这是您的代码片段的等价物：

```
array<int>^ array1;
array1 = gcnew array<int>(10);

for (int i = 0; i < 10; i++)
    array1[i] = i; 
```

`array<int>^`：这是一个托管引用，存储在堆栈中。

`array1 = gcnew array<int>(10)`：这是在托管堆上创建一个托管对象（来自名为“array”的类），并将引用分配给堆栈上的局部变量。

`array1[i] = i`：在幕后，这调用了“数组”类的一个方法，将索引和新值传递给它（`i`在这种情况下都是如此）。

# perl - 如何使用 Perl 对相等的值进行分组并打印最小和最大参数？

> ID：14297954
> 
> 赞同：1
> 
> 时间：2013-01-12T21:06:45.253
> 
> 标签：perl, hash, max, min

我有这个输入数据：

```
miRNA17 dvex571195  207 230
miRNA17 dvex571195  189 229
miRNA17 dvex571195  207 241
miRNA17 dvex571195  207 230
miRNA17 dvex571195  80  111
miRNA18 dvex449276  12  43
miRNA18 dvex196735  2909    2929
miRNA18 dvex765590  183 213
miRNA22 dvex826214  206 236
miRNA23 dvex529006  111 168
miRNA24 dvex803612  317 347 
```

我想对具有相同 First 和 Second 值的行进行分组。接下来，使用这个“组”，我需要在第三列中打印“组”的最小值，并在第四列中打印“组”的最大值。输出将是：

```
miRNA17 dvex571195  80  241
miRNA18 dvex449276  12  43
miRNA18 dvex196735  2909    2929
miRNA18 dvex765590  183 213
miRNA22 dvex826214  206 236
miRNA23 dvex529006  111 168
miRNA24 dvex803612  317 347 
```

我试图将所有数据分组在一个大的 %Hash 中，我的键由第一列和第二列表示。但是我可以使用一种方法来组织后续的列。代码是：

```
#!/usr/bin/perl

use strict;
use warnings;
use Data::Dumper;

my %lines; # hash with 1rd and 2th elements as key
my %first_line_per_group; # stores in which line a group appeared first
while(my $line = <>) {
# remove line break
chomp $line;

# retrieve elements form line
my @elements = split /\s+/, $line;

# build key from elements 1 and 2 (array 0-based!)
my $key = $elements[0]." ".$elements[1];

if(! $lines{key}) {
    #my $min = max $elements[3];
    $first_line_per_group{$key} = $elements[0]."\t".$elements[1];#."\t".$min;
}
push @{ $lines{$key} }, $line;

}

# the result:
 for my $key (keys %lines) {
    print $first_line_per_group{$key}."\t";
    print "$_\n" for @{ $lines{$key} };
} 
```

这段代码的输出是：

```
miRNA17 dvex571195  miRNA17 dvex571195 207 230
miRNA17 dvex571195 189 229
miRNA17 dvex571195 207 241
miRNA17 dvex571195 207 230
miRNA17 dvex571195 80 111
miRNA18 dvex449276  miRNA18 dvex449276 12   43
miRNA18 dvex196735  miRNA18 dvex196735 2909 2929
miRNA18 dvex765590  miRNA18 dvex765590 183  213
miRNA22 dvex826214  miRNA22 dvex826214 206  236
miRNA23 dvex529006  miRNA23 dvex529006 111  168
miRNA24 dvex803612  miRNA24 dvex803612 317  347 
```

但我需要消除分组值并完成上述工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:31:35.407

您只缺少一件事：当`$lines{key}`为真时，您想要调整`$first_line_per_group{$key}`，使其值包含组的最小值和最大值。

经过一些清理后，您最终得到以下代码：

```
my %groups;
while (<>) {
   my @f = split;
   my $key = "$f[0] $f[1]";

   if ($groups{$key}) {
      $f[2] = $groups{key}[2] if $groups{key}[2] < $f[2];
      $f[3] = $groups{key}[3] if $groups{key}[3] > $f[3];
   }

   $groups{$key} = \@f;
}

for my $key (keys(%groups)) {
   print(join(' ', @{ $groups{$key} }), "\n");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T05:51:26.037

您可能想看看这个程序，它似乎可以满足您的需求。

我不清楚您的文件是制表符分隔的还是只是空格分隔的，但只要值中没有空格就没有关系。我已经在空格上拆分了每条记录，因为这就是您的代码所做的。

```
use strict;
use warnings;

use List::Util qw/ min max /;

my %data;

while (<>) {
  my @fields = split;
  push @{ $data{"@fields[0,1]"} }, [ @fields[2,3] ];
}

for my $key (sort keys %data) {
  my $val = $data{$key};
  print join(' ', $key, min(map $_->[0], @$val), max(map $_->[1], @$val)), "\n";
} 
```

**输出**

```
miRNA17 dvex571195 80 241
miRNA18 dvex196735 2909 2929
miRNA18 dvex449276 12 43
miRNA18 dvex765590 183 213
miRNA22 dvex826214 206 236
miRNA23 dvex529006 111 168
miRNA24 dvex803612 317 347 
```

# php - 在客户端 onsubmit 生成的 POST 随机数字段

> ID：14297955
> 
> 赞同：0
> 
> 时间：2013-01-12T21:06:45.437
> 
> 标签：php, javascript, post

我有一个简单的 JavaScript：

```
function myfunction(form) 
```

和一个带有提交按钮的表单：

```
<input type="submit" class="btn" onclick="return myfunction(this)" onsubmit="return myfunction(this)" value="Send!"> 
```

因此，当用户发送表单时，会调用该函数。例如，在这个函数中，我想创建一个随机数，并将其与表单中的信息一起发布。

所以在php文件中我读取了我想说的数据

```
$randomNumberGeneratedInTheScript = $_POST['randomNumber']; 
```

这可能吗？谢谢..

（我不想在 php 文件中生成随机数。它必须在 JavaScript 中完成。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:14:38.090

很简单。使用隐藏的表单域：

```
<input type="hidden" name="randomNumber" value=""> 
```

然后你可以使用[数学](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/random)函数产生一个随机数

```
 var randomNumber = Math.floor(Math.random()*1000); 
```

*注意：这将产生一个介于 1 和 1000 之间的数字，将 1000 更改为您希望的任何值*

然后 onload 或在单独的函数中，您可以调用它并设置隐藏字段的值

```
 document.getElementById('randomID').value = randomNumber; 
```

还有其他方法可以做到这一点，但是对于您描述的情况，这听起来像是最交叉兼容和最容易使用的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T21:17:16.140

您可以添加一个名为 randomNumber 的隐藏输入。在 myFunction 中生成随机数并将隐藏的输入值设置为随机数。Onsubmit 现在可以先调用该函数，然后正常提交表单。

# php - 使用 PHP 会话验证用户名

> ID：14297957
> 
> 赞同：2
> 
> 时间：2013-01-12T21:07:06.380
> 
> 标签：php, mysql, sql, session

我觉得这是一个非常简单的解决方法，但我尝试了很多不同的方法，并且在谷歌上花了很多时间。基本上一个用户登录，我的脚本确保他们在我的数据库中。效果很好，然后我开始我的视野。

```
session_start();
$_SESSION['log']=$username;
header("location:lindex.php"); 
```

在我的下一页 lindex.php 上，我按顺序调用会话并尝试根据该值是否`$_SESSION['log']`为“支持”来设置 if 语句，但似乎无论我的会话调用中的值是什么，它总是执行我尝试基于字符串长度、strstr、strpos、==“支持的 if 语句。没有任何工作。任何想法？这里是 lindex.php：

```
session_start();
if(empty($_SESSION['log'])){
echo "You must log in";
exit();}

if(strstr($_SESSION['log'], 'support'))
{
header("location:../sindex.php");
} 
```

在旁注上。如果会话为空，它会退出脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:10:07.793

```
if(strstr($_SESSION['log'], 'support')) 
```

应该：

```
if($_SESSION['log'] == 'support')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:12:47.513

```
if(isset($_SESSION['log'] === "support")) 
{
echo "You are logged in ";
} else {

echo "You are not logged in ";
header("Location: http://site.com/login.php"); //should be always absolute URI
die();
} 
```

# ruby-on-rails - 为 Rails 安全静态内容交付设置 nginx X-Accel-Mapping

> ID：14297958
> 
> 赞同：1
> 
> 时间：2013-01-12T21:07:16.720
> 
> 标签：ruby-on-rails, nginx

我正在尝试通过 nginx 和 rails 使用`X-Accel-Redirect`. 我的实际静态内容目录位于 rails 根文件夹，如下所示

```
 - "rails_root\books\sources\:book_id\remaining_path". 
```

只有那个`rails_root\books\sources`是不变的，其余的部分总是在变化的。前任

```
 -app\books\sources\111\oep\cover.html
  -app\books\sources\111\oep\images\xx.png 
```

我尝试使用以下配置设置 nginx

```
 location ~ /readbook/*./.* {
      internal;
      alias /home/vooodoo/work/reader/books/sources/$1/$2;
    }

    location / {
      proxy_redirect    off;

      proxy_set_header  Host              $http_host;
      proxy_set_header  X-Real-IP         $remote_addr;
      proxy_set_header  X-Forwarded-For   $proxy_add_x_forwarded_for;

       proxy_set_header  X-Sendfile-Type   X-Accel-Redirect;
      proxy_set_header  X-Accel-Mapping   /readbook/=/home/vooodoo/work/reader/books/sources/;

      proxy_pass http://127.0.0.1:3001/;
    } 
```

它成功检测到请求并将其传递给 rails。在铁轨上做

```
 class ReaderController < ApplicationController
        def resource
           send_file "#{Rails.root}/books/sources/"+ params[:id] + "/" + params[:resource] + "." + params[:format]
        end
 end 
```

它将文件信息返回给 nginx，但似乎 rails 不理解我的配置的 X-Accel-Mapping。所以当nginx试图读取文件时，会发生这个错误

> ActionController::RoutingError (没有路由匹配 [GET] "/home/voodoo/work/reader/books/sources/229/OPS/cover.xml"):

我坚信这是由于`incorrect X-Accel-Mapping in nginx`. 但想不通是什么。有人可以帮我吗。在过去的几个小时里，我对此感到震惊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:35:03.907

Your `X-Accel-Mapping` configuration is wrong, try this:

```
location ~ /readbook/*./.* {
  internal
  alias /home/vooodoo/work/reader/books/sources/$1/$2;
}

location / {
  ...
  proxy_set_header X-Sendfile-Type X-Accel-Redirect;
  proxy_set_header X-Accel-Mapping /home/vooodoo/work/reader/books/sources/=/readbook/;
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:19:37.610

我相信`/readbook=/...`应该是`...=/readbook/`。

# python - usecols 与 parse_dates 和名称

> ID：14297959
> 
> 赞同：2
> 
> 时间：2013-01-12T21:07:30.353
> 
> 标签：python, pandas

我正在尝试使用以下格式的 OHLC 数据加载 csv 文件。

```
In [49]: !head '500008.csv'
03 Jan 2000,12.85,13.11,12.74,13.11,976500,,,,
04 Jan 2000,13.54,13.60,12.56,13.33,2493000,,,,
05 Jan 2000,12.68,13.34,12.37,12.68,1680000,,,,
06 Jan 2000,12.60,13.30,12.27,12.34,2800500,,,,
07 Jan 2000,12.53,12.70,11.82,12.57,2763000,,,,
10 Jan 2000,13.58,13.58,13.58,13.58,13500,,,,
11 Jan 2000,14.66,14.66,13.40,13.47,1694220,,,,
12 Jan 2000,13.66,13.99,13.20,13.54,519164,,,,
13 Jan 2000,13.67,13.87,13.54,13.80,278400,,,,
14 Jan 2000,13.84,13.99,13.30,13.50,718814,,,, 
```

我尝试了以下加载数据的方法。

```
df = read_csv('500008.csv', parse_dates=[0,1,2], usecols=range(6), 
                            header=None, index_col=0) 
```

但现在我想命名要命名的列。所以，我试过了，

```
df = read_csv('500008.csv', parse_dates=[0,1,2], usecols=range(6),
                            header=None, index_col=0, names='d o h l c v'.split()) 
```

但这没有说，

```
IndexError: list index out of range 
```

有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T22:09:51.383

我不知道它是错误还是功能，但即使您只指定了列的子集，您也必须为**所有列指定名称**`usecols`

```
df = pd.read_csv(StringIO(raw),
                 parse_dates=True,
                 header=None,
                 index_col=0,
                 usecols=[0,1,2,3,4,5],
                 names='0 1 2 3 4 5 6 7 8 9'.split()) 
```

这使

```
 1      2      3      4        5
0                                              
2000-01-03  12.85  13.11  12.74  13.11   976500
2000-01-04  13.54  13.60  12.56  13.33  2493000
2000-01-05  12.68  13.34  12.37  12.68  1680000 
```

我通过尝试为两者指定完整列表的极端情况来解决这个问题，`names`然后`usecols`尝试逐渐减少并查看会发生什么。

奇怪的是您在尝试时收到的错误消息，`usecols=[1,2,3]`例如`names=['1','2','3']`：

```
ValueError: Passed header names mismatches usecols 
```

这没有意义……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T01:05:54.263

这是一个[错误](https://github.com/pydata/pandas/issues/5766)。我遇到了[同样的问题](https://stackoverflow.com/questions/20720197/indexerror-when-trying-to-read-table-with-pandas/20721187)，想出了[两个解决方法](https://stackoverflow.com/questions/20720197/indexerror-when-trying-to-read-table-with-pandas/20721187#20721187)，并提交了一个[拉取请求](https://github.com/pydata/pandas/pull/5767)来修复它。

# javascript - JavaScriptMVC 和 CanJs 的区别

> ID：14297962
> 
> 赞同：2
> 
> 时间：2013-01-12T21:07:36.543
> 
> 标签：javascript, javascriptmvc, canjs

叫我笨蛋，但我很困惑。它们是否相同，can.js 只是它的继任者？它们似乎共享了很多功能。由于 JavaScriptMVC 没有像 CanJs 那样定期更新，我考虑切换到后者。有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T16:24:19.953

CanJS 是曾经是 jQueryMX 的 MVC 部分的下一个版本，它是 JavaScriptMVC 的一部分。它将在下一个 JavaScriptMVC 版本中取代 jQueryMX，但由同一团队维护，并与一些现代功能（如实时绑定和 Mustache 模板）共享大部分想法。

主要思想是让 CanJS 可以以任何您喜欢的方式使用，作为单个库，作为带有 RequireJS 的 AMD 模块或在 JavaScriptMVC 为全栈应用程序框架（[jQuery++](http://jquerypp.com/)、[Steal](http://javascriptmvc.com/docs.html#!stealjs)、[FuncUnit](http://funcunit.com/)、[DocumentJS](http://javascriptmvc.com/docs.html#!DocumentJS) ）提供的其他工具（不是和 MVC 框架）。所以如果你刚刚开始，我绝对推荐使用 CanJS，因为它很快就会成为 JavaScriptMVC 的一部分。

# ruby-on-rails - Rails 路由错误，但路由显示正确

> ID：14297963
> 
> 赞同：-1
> 
> 时间：2013-01-12T21:07:43.320
> 
> 标签：ruby-on-rails, ruby

我有一个路由错误，但我认为我的路由是正确的：

```
Routing Error

No route matches {:controller=>"posts", :action=>"edit", :user_id=>#<Post id: 9, title: "Na Curva do Horizonte", content: "Eu na mesma minha opinião no pensamento vejo me ca...", created_at: "2013-01-12 20:41:57", updated_at: "2013-01-12 20:41:57", image_file_name: "iris_by_archang3lzz-d5k2i5l.jpg", image_content_type: "image/jpeg", image_file_size: 1101282, image_updated_at: "2013-01-12 20:41:56", user_id: 5>}
Try running rake routes for more information on available routes. 
```

当我执行`rake routes`时，结果是正确的：

```
 user_posts GET    /user/:user_id/posts(.:format)              posts#index
                  POST   /user/:user_id/posts(.:format)              posts#create
    new_user_post GET    /user/:user_id/posts/new(.:format)          posts#new
   edit_user_post GET    /user/:user_id/posts/:id/edit(.:format)     posts#edit
        user_post GET    /user/:user_id/posts/:id(.:format)          posts#show 
```

我的路线是：

```
 resources :posts

  resources :user  do
    resources :posts,:comments
  end

  resources :posts do
    resources :comments
  end 
```

错误的链接是：

```
<%= link_to 'Edit', edit_user_post_path(notice) %> 
```

我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:22:36.443

由于您要编辑属于*特定用户的**特定*帖子，因此您需要将这两个作为参数传递给该链接，将父级放在首位。否则，rails 不知道您要编辑哪个帖子。

 *```
<%= link_to 'Edit', edit_user_post_path(@user, @post) %> 
```

所以你似乎只需要这两个变量。

仔细阅读你的 rake 路线。它说：

```
/user/:user_id/posts/:id/edit(.:format) 
```

所以在那里你可以看到你需要`:user_id`以及`:id`，它指的是帖子。将对象作为参数就足够了，rails 足够聪明，可以找出它们的 id 并将它们用于链接。*

# ruby-on-rails - Rails 应用程序特定内容

> ID：14297965
> 
> 赞同：0
> 
> 时间：2013-01-12T21:07:55.383
> 
> 标签：ruby-on-rails, database

我的 Rails 应用程序只是一个个人网站。在网站上，我有主页的内容（主要是文本），但我也想要一些其他的内容，比如我的电子邮件地址和一些社交媒体名称等等。

将这种类型的数据作为文本存储在我的实际应用程序中感觉不对。当然它应该在数据库或其他东西中。

有没有办法可以将它存储在一种个人设置表中。我只是看不到如何将所有数据存储在一张表中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:15:41.833

如果您只存储一个人的数据 - 您自己 - 设置数据库等似乎是一种浪费。您的数据库将只有一行！这并不是数据库支持的网站的真正意义所在。当用户添加自己的数据并请求特定的数据集时，您需要一个数据库。或者也许我误解了你想要做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:31:53.667

一个想法（如果您真的想使用数据库）用于简单的社交媒体设置（单个用户）

```
# 1 - Facebook - 'fb.png'
# 2 - Twitter  - 'tw.png'

create_table :social_media do |t|
  t.string :name
  t.string :ico_url
end

# 1 - 'Apikey' - 'key_data'
# 2 - 'User' - 'user'
create_table :social_media_fields do |t|
  t.integer :social_media_id
  t.string  :name
  t.string  :value
end 
```

# java - Java Canvas 大小问题

> ID：14297967
> 
> 赞同：0
> 
> 时间：2013-01-12T21:07:59.410
> 
> 标签：java, canvas, awt

我是 Java 新手（虽然我对 JavaScript 有广泛的了解），

我正在尝试使用`Canvas`，这导致了这个奇怪的问题。

如您所见，在我定义了 的大小之后`Canvas`，我正在尝试打印它。但它不能正确打印尺寸。

```
import java.awt.Canvas;
import java.awt.Dimension;

public class test extends Canvas {
    public static final int WIDTH = 180;
    public static final int HEIGHT = 250;

    public test() {
        setMinimumSize(new Dimension(WIDTH,HEIGHT));
        setMaximumSize(new Dimension(WIDTH,HEIGHT));
        setPreferredSize(new Dimension(WIDTH,HEIGHT));

        System.out.println(getWidth());
    }

    public static void main(String[] args) {
        new test();
    }
} 
```

为什么尺寸变了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T21:12:14.060

> 为什么它打印为零？如何正确打印画布的大小？

您尚未设置大小，因此宽度和高度仍为 0。您仅设置了布局提示的大小。布局管理器使用这些来布局组件。由于您没有使用布局管理器，因此未设置画布的实际大小。

用于`setSize(new Dimension(WIDTH,HEIGHT));`设置实际大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T21:14:44.877

尝试这样做：`setSize(new Dimension(WIDTH, HEIGHT))`;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T21:50:26.807

要打印它，可以尝试：System.out.print(test.getWidth()) 或：System.out.print(WIDTH)？抱歉，我并没有真正使用过 java.awt，但我希望第一个能用！

# c++ - 将任何函数作为模板参数传递？

> ID：14297971
> 
> 赞同：2
> 
> 时间：2013-01-12T21:08:36.073
> 
> 标签：c++, templates, c++11, function-pointers, variadic-templates

我正在寻找一种将通用（显然是 constexpr）函数传递给模板的方法。它必须能够在不使用 lambda 的情况下接受任意数量的参数。这是我到目前为止所拥有的：

```
template<typename T, T(*FUNC)()> struct CALL
{
    static inline constexpr decltype(FUNC()) EXEC()
    {
        return FUNC();
    }
}; 
```

但是，这仅在传递的函数不带参数时才有效。有没有办法让模板接受任何 constexpr 函数？传递 std::function 似乎不起作用。我想关键是可变参数模板参数，但我不知道如何在这种情况下利用它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T21:59:47.300

如果我正确理解您要实现的目标，您可以使用模板函数而不是具有静态函数的模板类：

```
#include <iostream>

template<typename T, typename... Ts>
constexpr auto CALL(T (*FUNC)(Ts...), Ts&&... args) -> decltype(FUNC(args...))
{
    return FUNC(std::forward<Ts>(args)...);
}

constexpr double sum(double x, double y)
{
    return (x + y);
}

int main()
{
    constexpr double result = CALL(sum, 3.0, 4.0);
    static_assert((result == 7.0), "Error!");
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:40:03.803

```
template<int... I>
struct with
{
    template<int F(decltype(I)...)>
    struct call
    {
        static constexpr int value = F(I...);
    };
};

constexpr int f(int i) {return i;}
constexpr int g(int i, int j) {return i + j;}

int main()
{
    int u = with<0>::call<f>::value;
    constexpr int v = with<0, 1>::call<g>::value;
} 
```

请注意，这有一些限制，就像我[回答](https://stackoverflow.com/a/14297002/1000282)的[上一个问题](https://stackoverflow.com/q/14294271/1000282)一样。但是在编译时仍然可以从非类型模板参数生成一个值。`std::integral_constant``constexpr` `double`

```
#include <iostream>

template<typename T, T... v>
struct with
{
    template<typename R, R f(decltype(v)...)>
    struct call
    {
        static constexpr R value = f(v...);
    };
};

#define AT_COMPILATION(f, x, ...) with<decltype(x), x, ##__VA_ARGS__>::call<decltype(f(x, ##__VA_ARGS__)), f>::value

constexpr long f(long i) {return i;}
constexpr double g(int i, int j) {return static_cast<double>(i) / j;}

int main()
{
    constexpr double u = with<long, 0L>::call<decltype(f(0L)), f>::value;

    std::cout << with<int, 5, 2>::call<double, g>::value << std::endl;

    constexpr double v = AT_COMPILATION(f, 0L);

    std::cout << AT_COMPILATION(g, 5, 2) << std::endl;
} 
```

# ios6 - 将子视图添加到自定义视图时出现问题

> ID：14297972
> 
> 赞同：0
> 
> 时间：2013-01-12T21:08:45.727
> 
> 标签：ios6

我正在尝试按照[这个答案](https://stackoverflow.com/a/1220605/1137206)创建一个显示下一个和上一个图像的分页滚动视图。

我创建了一个自定义 UIView 类，并将 UIScrollView 添加为子视图。我有两个问题。

1.  我希望视图与 IB 一起工作，所以我实现了 initWithCoder，并在调用超类 initWithCoder 后尝试将帧传递给我的 init。但框架的宽度和高度始终为 0。
2.  为了解决这个问题，我只是在我的 initView 方法中使用了屏幕宽度。但是我的滚动视图（或者更确切地说是其中的图像）没有显示。我更改了自定义视图（红色）和滚动视图（蓝色）的背景颜色，我看到的只是红色背景。我检查了滚动视图的框架矩形，它看起来很合理（59、0、201、135），所以我不确定为什么我不能显示滚动视图。

任何想法将不胜感激。

**模式选择视图.m**

```
#import "ModeSelectView.h"

@implementation ModeSelectView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self initView:frame];
    }
    return self;
}

- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:(aDecoder)];
    if (self) {
        CGRect frame = self.frame;
        [self initView:self.frame];
    }
    return self;
}

- (void)initView:(CGRect)frame
{
    // Initialization code
    // Create an array of images for the different modes
    UIImage *imgTowerOnlyMode = [UIImage imageNamed:@"tower_only_mode_icon.png"];
    UIImage *imgLocalMode = [UIImage imageNamed:@"local_mode_icon.png"];
    UIImage *imgHowToPlay = [UIImage imageNamed:@"how_to_play_icon.png"];
    NSArray *modeSelectIcons = @[imgTowerOnlyMode, imgLocalMode, imgHowToPlay];

    int iconSize = 115;
    // Center to center icon spacing
    int viewSpacing = 115 * 1.75;
    int frameWidth = 2*viewSpacing;
    int contentWidth = 4*frameWidth;
    int pageWidth = viewSpacing;
    int verticalPadding = 10;
    int pageHeight = iconSize + 2*verticalPadding;
        //int viewWidth = frame.size.width;
    int viewWidth = [[UIScreen mainScreen] applicationFrame].size.width;
    int scrollViewX = (viewWidth - pageWidth)/2;

    // Create the scrollview, setting it to be page size in width the icon height plus padding
    CGRect scrollViewFrame = CGRectMake(scrollViewX, 0, pageWidth, pageHeight);
    self.scrollModeSelect = [[UIScrollView alloc] initWithFrame:scrollViewFrame];

    // Now iterate over the array creating a view for each
    // The first view will be offset in X to allow it to be
    // centered in the page
    int imageOffset = (frameWidth-iconSize)/2;
    for (int i = 0; i < [modeSelectIcons count]; ++i) {
        // Get the origin x value for the image view within the scroll view
        int viewOriginX = i*frameWidth + imageOffset;

        // Initialize the image view
        UIImageView *ivModeSelect = [[UIImageView alloc]
        initWithFrame:CGRectMake(viewOriginX , verticalPadding/2,
                                 iconSize, iconSize)];

        // Set the image
        ivModeSelect.image = (UIImage *)modeSelectIcons[i];

        // Tell the parent view to scale the iamge, preserving aspect ratio, to
        // fit the parent view.
        ivModeSelect.contentMode = UIViewContentModeScaleAspectFit;

        // Add the image view to the scroll view
        [self.scrollModeSelect addSubview:ivModeSelect];
    }

    [self.scrollModeSelect setContentSize:CGSizeMake(contentWidth, pageHeight)];
    // Turn off clipping so we can see the adjacent icons
    [self.scrollModeSelect setClipsToBounds:FALSE];

    // Add the scrollview as a subview
    [self addSubview:self.scrollModeSelect];

    [self.scrollModeSelect setBackgroundColor:[UIColor blueColor]];
    [self setBackgroundColor:[UIColor redColor]];
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:31:14.830

事实证明，您实际上无法在 initWith 方法中调整任何视图大小，因为尚未确定应用程序框架。因此，要做到这一点，您需要在视图层次结构中使用默认大小设置视图。然后你需要覆盖 layoutSubviews 来做你的尺寸。在 layoutSubviews 中，您可以使用 self.frame 访问您的视图框架。所以这里是和上面一样的代码，但是使用了 layoutSubviews。

```
- (void)initView:(CGRect)frame
{
    // Initialization code
    self.ivModeSelectArray = [[NSMutableArray alloc] init];

    // Create an array of images for the different modes
    UIImage *imgTowerOnlyMode = [UIImage imageNamed:@"tower_only_mode_icon.png"];
    UIImage *imgLocalMode = [UIImage imageNamed:@"local_mode_icon.png"];
    UIImage *imgHowToPlay = [UIImage imageNamed:@"how_to_play_icon.png"];
    NSArray *modeSelectIcons = @[imgTowerOnlyMode, imgLocalMode, imgHowToPlay];

    // Create the scrollview, initially setting it to 0 size.  We'll resize it
    // in layoutSubviews
    CGRect scrollViewFrame = CGRectMake(0,0,200,110);
    self.scrollModeSelect = [[UIScrollView alloc] initWithFrame:scrollViewFrame];

    // Now iterate over the array creating a view for each, intially set to 0
    // size.  We'll resize them and reposition them in layoutSubviews
    for (int i = 0; i < [modeSelectIcons count]; ++i) {
        UIImageView *ivModeSelect =
                 [self addModeIcon:[modeSelectIcons objectAtIndex:i]];

        // Add the image view to the scroll view
        [self.scrollModeSelect addSubview:ivModeSelect];
    }

    // Turn off clipping so we can see the adjacent icons
    [self.scrollModeSelect setClipsToBounds:FALSE];

    // Turn on paging
    [self.scrollModeSelect setPagingEnabled:TRUE];

    // Add the scrollview as a subview
    [self addSubview:self.scrollModeSelect];

//    self.scrollModeSelect.backgroundColor = [UIColor blueColor];
//    self.backgroundColor = [UIColor redColor];
}

- (void)layoutSubviews
{
    int iconSize = 115;
    // Center to center icon spacing
    CGFloat viewSpacing = 115 * 1.4;
    int frameWidth = viewSpacing;
    int contentWidth = 4*frameWidth;
    int pageWidth = viewSpacing;
    int verticalPadding = 10;
    int pageHeight = iconSize + 2*verticalPadding;
    int viewWidth = self.frame.size.width;
    int scrollViewX = (viewWidth - frameWidth)/2;

    // Now iterate over the array configuring the size and offset for each view
    // The first view will be offset in X to allow it to be centered in the page
    int imageOffset = (frameWidth-iconSize)/2;
    for (int i = 0; i < [self.ivModeSelectArray count]; ++i) {
        // Get the origin x value for the image view within the scroll view
        int viewOriginX = i*viewSpacing + imageOffset;

        // Size the image view
        UIImageView *ivModeSelect = [self.ivModeSelectArray objectAtIndex:i];
        [ivModeSelect setFrame:CGRectMake(viewOriginX , verticalPadding/2,
                                          iconSize, iconSize)];

    }

    [self.scrollModeSelect setFrame:CGRectMake(scrollViewX, 0,
                                               pageWidth,pageHeight)];
    [self.scrollModeSelect setContentSize:CGSizeMake(contentWidth, pageHeight)];
} 
```

# javascript - FullCalendar 未在页面加载时初始化

> ID：14297973
> 
> 赞同：0
> 
> 时间：2013-01-12T21:08:48.710
> 
> 标签：javascript, jquery

我正在尝试使用 FullCalendar，但在我按下今天、星期或日期按钮之前，它没有初始化。我试图设置 det defaultView 参数，但没有什么不同。

```
<script type='text/javascript'>

    $(document).ready(function () {

        /* initialize the external events
        -----------------------------------------------------------------*/

        $('#external-events div.external-event').each(function () {

            // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
            // it doesn't need to have a start or end
            var eventObject = {
                title: $.trim($(this).text()) // use the element's text as the event title
            };

            // store the Event Object in the DOM element so we can get to it later
            $(this).data('eventObject', eventObject);

            // make the event draggable using jQuery UI
            $(this).draggable({
                zIndex: 999,
                revert: true,      // will cause the event to go back to its
                revertDuration: 0  //  original position after the drag
            });

        });

        /* initialize the calendar
        -----------------------------------------------------------------*/

        $('#calendar').fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'agendaWeek,agendaDay',
                height: 650
            },
            editable: true,
            defaultView: 'basicWeek',
            droppable: true, // this allows things to be dropped onto the calendar !!!
            drop: function (date, allDay) { // this function is called when something is dropped

                // retrieve the dropped element's stored Event Object
                var originalEventObject = $(this).data('eventObject');

                // we need to copy it, so that multiple events don't have a reference to the same object
                var copiedEventObject = $.extend({}, originalEventObject);

                // assign it the date that was reported
                copiedEventObject.start = date;
                copiedEventObject.allDay = allDay;

                // render the event on the calendar
                // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
                $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);

                // is the "remove after drop" checkbox checked?
                if ($('#drop-remove').is(':checked')) {
                    // if so, remove the element from the "Draggable Events" list
                    $(this).remove();
                }

            }
        });
    });

</script> 
```

日历位于 [jquery ui 选项卡内](http://jqueryui.com/tabs/#default)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:15:38.197

我找到了解决方案。初始化日历后，我调用此函数

```
$('#tabs').tabs({
    show: function (event, ui) {
        $('#calendar').fullCalendar('render');
    }
}); 
```

# ios - 在代码中创建核心数据的更简单的工具

> ID：14297974
> 
> 赞同：0
> 
> 时间：2013-01-12T21:09:13.497
> 
> 标签：ios, core-data

我正在努力将我的一个核心数据模型转换为在代码中创建。我找到了[这个资源](http://www.cocoanetics.com/2012/04/creating-a-coredata-model-in-code/)并且我的编码模型工作了，但是，做这一切的整个过程对我来说似乎有点乏味。对于具有少量关系和超过两三个表的模型，核心数据生成器的代码看起来非常乏味和重复。我想知道是否有人想出了一种方法来简化在代码中创建核心数据模型的过程，而不必做太多重复的工作。

# javascript - HTML5 请求动画框架

> ID：14297978
> 
> 赞同：0
> 
> 时间：2013-01-12T21:09:50.633
> 
> 标签：javascript, html, animation, canvas, sprite

所以我用 requestAnimationFrame 写了一个基本的游戏。它重绘画布并监听键盘输入并相应地以像素/秒移动播放器。我的问题是，给定一个包含 9 帧的精灵表，我如何在玩家行走时创建这个动画？基本上 if(walking){ 以给定的速率循环遍历这九帧}。我了解游戏循环是如何工作的，而不是如何为精灵表设置动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T05:17:18.523

有动画本身的库，但你自己很容易。

你需要使用drawImage：

```
ctx.drawImage(image, sx, sy, sw, sh); 
```

假设精灵表是水平格式：

```
var frame = 0;
ctx.drawImage(image, startX+(spriteWidth*frame), startYy, spriteWidth, spriteHeight); 
```

只需根据您希望逐步完成动画的节拍数或秒数更新帧。这可以是评论中建议的任何方式。

模函数将保持`frame`在界限内：

```
frame = frame % numberOfFrames; 
```

我更喜欢只制作一个动画精灵类并使用它。它更有趣。这就是它如何工作的基础。希望有帮助。

# symfony - 如何选择要在 Symfony 2 上加载的模板

> ID：14297982
> 
> 赞同：0
> 
> 时间：2013-01-12T21:10:14.760
> 
> 标签：symfony, symfony1

这可能是一个糟糕的方法问题而不是技术问题，但无论如何您的建议非常有价值。

我的网站有两个受保护的页面，**/home**和**/popup**，每个页面都需要登录用户。您可能知道 Symfony 会自动将未登录的用户重定向到您的 login_path（在我的情况下只是**/login**），所以没关系。问题是，尝试从 URL **/home**登录的用户需要看到一个模板调用**normal_login.html.php**，而尝试使用**/popup**登录的用户将看到**popup_login.html.php**。

我的**/login**页面由我的用户控制器管理，在那里我只是检查标题引用以查看用户是否来自**/popup**：

```
 $previousUrl = $this->getRequest()->headers->get('referer'); 
    if(strpos($previousUrl, $this->generateUrl('done_punctis_popup'))) $popupref = true; 
```

脚本完成后，我只检查**popupref**标志，如果它为真，我只返回弹出模板，如果不是，我返回普通模板。

到目前为止，一切都很好并且可以正常工作（经过测试）。Symfony 框架然后处理来自任何模板的表单提交，并登录用户将他重定向到原始预期的受保护页面**/home**或**/popup**。

你可能会问错在哪里？好吧，由于系统是基于引用值的，如果用户在登录表单中没有出错，一切都会正常，但如果输入信息不正确（密码或用户名错误），check_login 脚本会将用户重定向回这次登录控制器唯一的问题，引用者不再是**/home**或**/popup**而是**/login_check**！所以现在我的控制器不知道用户来自哪里，所以它不知道模板从哪里返回。

* * *

你怎么看？

**编辑（要求）**

## 控制器

```
public function loginAction( )
{
    $popupref = false;
    $previousUrl = $this->getRequest()->headers->get('referer'); 
    if(strpos($previousUrl, $this->generateUrl('done_punctis_popup'))) $popupref = true;

    // Se è già loggato non deve vedere questa pagina quindi redirect
    if( $this->get('security.context')->isGranted('ROLE_USER') && !$popupref)
        return $this->redirect( $this->generateUrl('done_punctis_user_homepage'));

    $request = $this->getRequest();
    $session = $request->getSession();

    // verifica di eventuali errori
    if ($request->attributes->has(SecurityContext::AUTHENTICATION_ERROR)) {
        $error = $request->attributes->get(SecurityContext::AUTHENTICATION_ERROR);
    } else {
        $error = $session->get(SecurityContext::AUTHENTICATION_ERROR);
        $session->remove(SecurityContext::AUTHENTICATION_ERROR);
    }

    if(!$popupref) {
        return $this->render('DonePunctisBundle:Pages:login.html.php', array(
            'last_username' => $session->get(SecurityContext::LAST_USERNAME),
            'error'         => $error
            ));
    } else {
        return $this->render('DonePunctisBundle:Popup:popupSignup.html.php', array(
            'last_username' => $session->get(SecurityContext::LAST_USERNAME),
            'error'         => $error
           ));
    }

} 
```

## 安全

```
firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false
    main:
        remember_me:
            key: %secret%
            lifetime: 3600
            path: /
            domain: ~
        pattern: ^/
        anonymous: ~
        form_login:
            login_path: /login
            check_path: /login_check
        logout:
            path:   /logout
            target: / 
```

**在问题中我更改了一些名称只是为了有更清楚的解释， /home 实际上不存在，实际上所有需要授权的调用都使用普通模板，只是来自 /popup 的调用需要弹出模板。**

PS。/home 或 /popup 的用户是相同的，/home 和 /popup 只是登录我网站的两种不同方式。

# javascript - jQuery动画宽度向右

> ID：14297985
> 
> 赞同：8
> 
> 时间：2013-01-12T21:10:51.617
> 
> 标签：javascript, jquery, animation

我想动画 div 向右滑动，如下例所示：

[http://jsfiddle.net/56hxy/3/](http://jsfiddle.net/56hxy/3/)

但是我不想移动边距，而是想“挤压”宽度，但通过改变宽度 % ( `width: '60%'`) 却无法正常工作，而是向左挤压..

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-12T21:14:52.990

不确定这是否正是您要寻找的，但请尝试：

```
$('#content').animate({
    marginLeft: '40%',
    width:'60%'
}); 
```

[**小提琴**](http://jsfiddle.net/56hxy/4/)

* * *

或者在 CSS 中给`right:0`到`#content`，然后你可以为它设置动画`width`，它会从左到右收缩而不需要边距。效果与上述相同，但更清洁。[**小提琴**](http://jsfiddle.net/56hxy/8/)

此外，jQuery 有一个用于交替单击的内置“[切换事件](http://api.jquery.com/toggle-event/)”，因此，如果您只切换单击事件，则可以使用：

```
$('#content').toggle(function() { 
    $(this).animate({ width:'60%' }); 
}, function() {
    $(this).animate({ width:'100%' }); 
}); 
```

[**小提琴**](http://jsfiddle.net/56hxy/12/)

# node.js - 在 gradle 任务中运行 mocha 测试

> ID：14297989
> 
> 赞同：3
> 
> 时间：2013-01-12T21:11:45.823
> 
> 标签：node.js, asynchronous, gradle, mocha.js

我有一个摩卡测试，我想在 gradle 任务中运行。

当我独立运行它时，我会得到一个很好的输出，如下所示： ![在此处输入图像描述](../Images/09b991c68424f764372b7b6a6824935d.png)

但是当我通过 gradle 运行它时，我得到如下输出： ![在此处输入图像描述](../Images/4a0f49e0e9b226b02ff5334e475f6f93.png)

尽管没有颜色，但我设法正确显示字符。困扰我的是输出不完整。每次运行任务时，输出长度也不同。这让我相信这是因为测试脚本在 node.js 中异步运行

有没有办法在gradle中解决这个问题？

# java - Java 6：如何拖动/移动一条线？

> ID：14297990
> 
> 赞同：1
> 
> 时间：2013-01-12T21:11:57.697
> 
> 标签：java, paint, move, point, repaint

我有这段代码，它应该在释放鼠标按钮时移动一些像素：

```
if (selected != -1) {
    Point to = e.getPoint();
    int dx = start.x - to.x;
    int dy = start.y - to.y;
    for (Point p: store.get(selected)) {
        int px = (int) p.getX();
        int py = (int) p.getY();
        p.move(px - dx, py - dy);
    }

    validate(); 
```

调试器的使用表明点 p 确实获得了新值，但视觉效果没有得到更新。请帮帮我。

下面是我的程序的全部代码。

```
public class Pisi extends JFrame implements MouseMotionListener, MouseListener {
ArrayList<ArrayList<Point>> store = new ArrayList<ArrayList<Point>>();
ArrayList<Point> pts = new ArrayList<Point>();
Point start;
static int xsize = 450;
static int ysize = 300;
int listNumber = 0;
int selected = -1;

public static void main(String[] args) {
    Pisi d = new Pisi();
    d.setSize(xsize, ysize);
    d.setLocationRelativeTo(null);
    d.addMouseMotionListener(d);
    d.addMouseListener(d);
    d.setResizable(false);
    d.setVisible(true);
}

@Override
public void update(Graphics g) {
    paint(g);
}
@Override
public void paint(Graphics g) {
    Point last = null;

    for (Point p : pts) {

        if (last == null) {
            last = p;
            continue;
        }
        g.drawLine(last.x, last.y, p.x, p.y);
        last = p;
    }
}

@Override
public void mouseDragged(MouseEvent e) {

    if (e.getButton() == MouseEvent.BUTTON1) {
        pts.add(e.getPoint());
        repaint();
    }

}

@Override
public void mouseMoved(MouseEvent e) {
    //To change body of implemented methods use File | Settings | File Templates.
}

@Override
public void mouseClicked(MouseEvent e) {
    //To change body of implemented methods use File | Settings | File Templates.
}

@Override
public void mousePressed(MouseEvent e) {
    Point point = e.getPoint();
    start = null;
    selected = -1;
    for (ArrayList<Point> points: store) {
        for (Point p : points) {
            double dist = point.distanceSq(p);
            if (dist < 10) {
                selected = store.indexOf(points);
            }
        }
    }
    if (selected != -1) {
        start = e.getPoint();
    }
    System.out.println(selected);
}

@Override
public void mouseReleased(MouseEvent e) {
    if (selected != -1) {
        Point to = e.getPoint();
        int dx = start.x - to.x;
        int dy = start.y - to.y;
        for (Point p: store.get(selected)) {
            int px = (int) p.getX();
            int py = (int) p.getY();
            p.move(px - dx, py - dy);
        }

        validate();
    } else if (e.getButton() == MouseEvent.BUTTON1 && pts.size() != 0) {
        store.add(new ArrayList<Point>(listNumber));
        for (int i = 0; i < pts.size(); i++) {
            store.get(listNumber).add(pts.get(i));
        }
        listNumber++;
    }
    pts.clear();

}

@Override
public void mouseEntered(MouseEvent e) {
    //To change body of implemented methods use File | Settings | File Templates.
}

@Override
public void mouseExited(MouseEvent mouseEvent) {
    //To change body of implemented methods use File | Settings | File Templates.
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T22:20:37.617

我会推荐：

*   首先，您在`paintComponent(...)`JPanel 的方法中绘制，而不是直接在`paint(...)`JFrame 的方法中绘制。这将使您能够访问 Swing 的自动双缓冲，并防止您弄乱 JFrame 的任何子项或边框的图形。
*   与其使用 an`ArrayList<Point>`和 an `ArrayList<ArrayList<Point>>`，不如使用 Path2D 和 an `ArrayList<Path2D>`。
*   您将您的`paintComponent's Graphics 对象转换为 Graphics2D 对象
*   您使用此 Graphics2D 对象使用此`draw(Shape s)`方法绘制您的 Path2D 对象。
*   您使用 Path2D`contains(...)`方法查看鼠标按下是否发生在您持有的 Path2D 对象上`List<Path2D>`
*   如果选择了 Path2D，您可以使用 AffineTransform 通过变换方法移动它。

**编辑：**
不，`contains(...)`不会起作用，因为如果在 Path2D 勾勒的凹形区域中按下鼠标，这是真的。进一步研究这个...

**编辑 2：**
解决此问题的一种方法是使用 PathIterator 遍历您的 Path2D，以查看您的 mousePress 是否靠近构成 Path2D 的任何线段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:20:33.443

**我建议你先尝试`validate()`方法（`Container`类的方法）**

***注意：*** [关于 validate() 方法的信息](http://docs.oracle.com/javase/6/docs/api/java/awt/Container.html#validate%28%29)

如果 `validate()`方法不起作用，请尝试使用：

`update()`方法（调用`paint()`方法）或`repaint()`方法。

# eclipse - 我什么时候应该考虑将我的 Eclipse 项目分成不同的工作区？

> ID：14297992
> 
> 赞同：2
> 
> 时间：2013-01-12T21:12:09.307
> 
> 标签：eclipse

我在理解 Eclipse 中的工作空间的概念时遇到了一些麻烦，以及我应该如何区别对待它，例如工作集或文件夹。请赐教！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:54:01.443

工作区是您的项目所在的文件夹。此外，它还包含元数据，如保存的透视图、文本编辑器首选项等（您在 Window -> Preferences 中找到的所有内容）。每个 Eclipse 实例一次只能使用一个工作区。

工作集只是工作区中的项目集合。例如，您可以使用工作集根据某些标准对项目进行分组。当您有许多项目时，这很有用。

因此，本质上，工作区是您的项目物理驻留的地方，也是您存储偏好的地方，工作集只是逻辑项目集，即工作区中内容的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T21:58:06.767

它对于不同的工作空间偏好很有用（比如默认编码 UTF-8 与否，等等...） 我个人使用 3 个工作空间：1 个用于我的工作 2 个用于我的个人使用：我有 2 个，因为它们位于我的不同位置硬盘根据我的“备份”策略（一个我使用SVN，另一个我使用谷歌驱动器我不想用太多项目污染我的谷歌驱动器所以我拆分）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T21:48:36.447

**工作空间：**

我将创建另一个工作区而不是默认工作区，例如：

-一个用于学校项目

- 用于帮助其他人编写代码的项目

**项目：**

您创建一个项目，该项目通常定义该程序的内容，例如：“转换器”，它将货币转换为美元、欧元等。

一个项目可以帮助您组织和存储所有相关的包和文件夹，这些包和文件夹存储图标、文本文件等，以便从您的程序中使用/操作。

**包裹呢？**

包可帮助您将类组织到文件夹结构中，并使其易于查找和使用。

最重要的是，它可以帮助您提高可重用性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T21:57:58.457

Eclipse 在处理大量中小型项目方面进行了优化。

或者，您可以关闭项目，然后隐藏已关闭的项目。这将提高您的性能。

您还可以创建项目的工作集，以便您可以在相关项目的视图之间来回切换，而不会产生使用新工作区重新启动 eclipse 的开销。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T22:01:20.207

在以下情况下，我会将项目拆分为不同的工作区：

*   我不希望客户在现场工作时看到我的其他项目（每个客户的工作空间）
*   当我想使用不同版本的依赖项目作为源构建的一部分时
*   当我想玩时，我有一个单独的“游乐场”工作区用于完全一次性的工作，还有一个“示例”工作区用于独立但应该保留的代码。

如果适合您的工作流程，则按项目或应用程序策略也很好。我不在工作区文件夹中保留源代码（它已从源代码管理中检出），因此它纯粹是元数据和运行/调试配置。