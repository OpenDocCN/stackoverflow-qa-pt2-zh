# StackOverflow 问答 13659000-13659999

# novell - Backup Exec 9.1 for netware（挂起扫描网络代理）

> ID：13659002
> 
> 赞同：2
> 
> 时间：2012-12-01T11:31:50.697
> 
> 标签：novell, backupexec

当我使用 BackupExec v9.1 重新启动 netware 6.5 服务器时，它一直在扫描网络代理，并且在扫描代理之一时一直挂起。

我正在尝试重新启动 backupexec 但失败了。如何避免扫描？

顺便说一句，我试图重新启动远程代理，但扫描仍然挂在这一点上。

请为任何可以帮助解决此问题的专家提供种子....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:27:16.133

有一个 bestart.nlm 可以启动各种进程。有大量的命令行开关，我忘记了控制启动和不启动的内容。

在 sys:\system\autoexec.ncf 中查找您正在执行的启动命令，以便在重新启动时启动 bestart.nlm。

# php - 如果我更改 wordpress 的永久链接，分页不起作用

> ID：13659005
> 
> 赞同：0
> 
> 时间：2012-12-01T11:31:55.160
> 
> 标签：php, wordpress

如果我更改永久链接设置，我会遇到分页问题

我创建了自定义模板，并在其中显示了结果，并将分页应用于显示产品。当我将永久链接更改为 postname 时，我的 url 显示如下..

//localhost/traveller/root/2/ 和分页不起作用

如果我像这样将永久链接设置为默认网址...

//localhost/traveller/page_id=21/&page=2 和分页工作正常

请提出一些解决方案？

我使用以下代码进行分页：

```
<?php
         $page = isset($_GET['page']) ? (int) $_GET['page'] : 1;
         $limit =5;
         $offset = ( $page - 1 ) * $limit;
?>   

        <?php $data = $wpdb->get_results("select * from table_name
                                          LIMIT $offset,$limit ");?>

                                       <?php
                                       $total=$wpdb->get_results("select * from table_name ");

                                        $pages = COUNT($total);
                                        $pages = ceil($pages / $limit);
                                        $querystring = "";
                                        foreach ($_GET as $key => $value) {
                                            if ($key != "page") $querystring .= "$key=$value&amp;";
                                        }

                                        // Pagination

for ($i = 1; $i <= $pages; $i++)
                {
                    echo "<a " . ($i == $page ? "class=\"page active\" " : "class=\"page gradient\"");
                    echo "href=\"?{$querystring}page=$i";
                    echo "\">$i</a> ";
                }
                $page1=$page;
                $next=$page1+1;
                echo "<a " . ($i == $page ? "class=\"page active\" " : "class=\"page gradient\"");
                    echo "href=\"?{$querystring}page=$next";
                    echo "\">Next</a> ";

 ?> 
```

# css - 变换旋转（）无法正常工作

> ID：13659008
> 
> 赞同：-1
> 
> 时间：2012-12-01T11:32:18.287
> 
> 标签：css, css-transforms

我无法弄清楚为什么 css transform: rotate() 不起作用。这是代码： http: [//jsbin.com/afayan/1/edit](http://jsbin.com/afayan/1/edit) 当我将背景颜色添加到“内容”类时，转换不起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:37:47.077

您必须为这两个内容添加正确的 z-index。或者删除 z-index。

更新：

[代码](http://jsbin.com/afayan/14/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:38:21.720

这是关于 z 索引的。试试这个：

```
.content { padding:50px; background: green; z-index: 5; }
.box { background:#ccc; padding:50px; position:relative;}
.box:after { content:''; width:100%; height:100%; left:0; top:0; 
             background:red; position:absolute; z-index:4; 
             -moz-transform: rotate(2deg); transform: rotate(2deg); 
             -webkit-transform: rotate(2deg); } 
```

# haskell - ghcInvocation：programVersion 不能是 Nothing

> ID：13659011
> 
> 赞同：1
> 
> 时间：2012-12-01T11:32:37.970
> 
> 标签：haskell, yesod

我正在尝试将我的 Yesod 项目升级到 1.1 版，它在 1.0 版上运行良好。现在我正在尝试在 1.1 版上运行我的项目。尝试运行时`yesod --dev devel`出现以下错误：

```
cabal-dev: user error (Warning: cannot determine version of /home/user/.cabal/bin/fake-ghc-cabal-dev
:
"== GHC Arguments: Start ==\n--numeric-version\n== GHC Arguments: End ==\n"
cabal: ghcInvocation: the programVersion must not be Nothing
)
yesod: readProcess: cabal-dev "buildopts" (exit 1): failed 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T12:14:53.420

我不确定到底是什么问题，但是升级 cabal-dev、cabal-install 和 cabal 就可以了。

```
cabal install cabal-dev cabal-install cabal 
```

# algorithm - 图论深度优先搜索

> ID：13659018
> 
> 赞同：3
> 
> 时间：2012-12-01T11:33:13.770
> 
> 标签：algorithm, graph, traversal, depth-first-search

在使用堆栈实现 DFS 遍历时，如果元素已经在堆栈内但未访问，我们是否需要将元素推入堆栈？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-23T08:05:15.417

> 如果元素已经在堆栈中但未被访问，我们是否需要将元素推入堆栈？

答案是**否定**的，因为这是进入循环的一种方式。

如果您使用深度优先搜索遍历图，您可能会陷入循环。

避免该问题的最佳方法是使用禁忌列表，该列表保留所有访问节点的 ID。

```
stack.push(init);

while (!stack.empty())
{
    current = stack.pop();
    taboo.add(current.id);

    if (isGoal(current))
    {
        break;
    }

    for (Node neighbor : getNeighbors(current))
    {
        if (!taboo.contains(neighbor.id))
        {
            stack.push(neighbor);
        }
    }

} 
```

# c++ - 如何定义自定义浮点类型 numpy dtypes (C-API)

> ID：13659019
> 
> 赞同：13
> 
> 时间：2012-12-01T11:33:26.860
> 
> 标签：c++, python, numpy, boost-python

我有一个自定义浮点数据类型，它使用两个 64 位浮点数（`dd_real`来自[QD 库](http://crd-legacy.lbl.gov/~dhbailey/mpdist/)的 double-double 类）模拟 128 位浮点数。从 C++ 我想将一个 ndarray 导出到 python。我已经知道如何为 64 位浮点数执行此操作，但对于双打我不知何故需要指定我自己的自定义 dtype。怎么做？

注意：numpy 有自己的 128 位浮点数（np.float128），不幸的是，这映射到`long double`C/C++ 中，它只是存储在 128 位（在我的所有平台上）的 80 位浮点数。

实际上，应该能够以与 numpy 导出 np.float128 完全相同的方式执行此操作（我只是不知道这是如何完成的），唯一的区别是它`dd_real`在 C++ 端使用而不是`long double`.

如果这有帮助，我已经将 C++ 类型导出`dd_real`到 python 使用`boost::python`也许可以以某种方式重用。

* * *

到目前为止，我能够研究以下内容

1.  [dtypes](http://docs.scipy.org/doc/numpy/reference/arrays.scalars.html#defining-new-types)的 numpy 文档参考了 [C-API](http://docs.scipy.org/doc/numpy/reference/c-api.dtype.html)以了解如何导出自定义 dtypes，但该文档以某种方式仅解释了现有的 dtypes 而不是如何创建新的dtypes。

2.  在[浏览](https://stackoverflow.com/questions/13199218/how-to-create-a-custom-numpy-dtype-using-cython)stackoverflow 时，我发现[了这个](https://github.com/numpy/numpy-dtypes/blob/master/npytypes/quaternion/numpy_quaternion.c)例子，但我想知道`dd_real`这是否可以更简单。我也看不到 dtype 的实际生成位置。也许只在 python [__ init__](https://github.com/numpy/numpy-dtypes/blob/master/npytypes/quaternion/__init__.py) via`np.typeDict['quaternion'] = np.dtype(quaternion)`中。当我想生成 ndarray 时，如何在 C++ 中使用该 dtype？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T23:04:17.313

您链接到的存储库，

```
https://github.com/numpy/numpy-dtypes 
```

可能包含有关如何向 Numpy 添加新 dtype 的最简单示例。我不知道更简单的方法。注意对这些文件的调用`register_cast_function`和`REGISTER_UFUNC`在这些文件中的调用：它们告诉 Numpy 如何在逐个元素的级别上处理乘法和强制转换等操作。

但是，如果您真正想做的只是导出数据，则可以导出为双精度数组，或者将两个双精度数据绑定到一个数据类型

```
np.dtype([('a', double), ('b', double)]) 
```

然后，您需要编写单独的函数来对这些数组进行操作（因为`arr1 * arr2`这里不会执行您想要的操作）。一种可能的更进一步并使其`arr1 * arr2`工作的方法是将`np.ndarray`您的数据类型子类化，覆盖`__mul__`等操作。

# android - 多平台游戏中心

> ID：13659026
> 
> 赞同：1
> 
> 时间：2012-12-01T11:34:16.410
> 
> 标签：android, iphone

为了构建一个我们想要与 Facebook、多个对手、成就和东西进行某种集成的应用程序......我们正在寻找最好的方法来做到这一点。

现在，Apple 有游戏中心，它不能与 Android 一起使用，同样可能适用于 Google 对应部分。构建这样一个系统和/或在 Android 和 iOS 环境中实现一个系统的最佳选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:38:31.543

你应该搜索 OpenFeint ，你可以看看下面的帖子

[http://www.iphonenuts.com/game-center-v-openfeint](http://www.iphonenuts.com/game-center-v-openfeint)

# php - ReferenceError：未定义 jQuery

> ID：13659027
> 
> 赞同：1
> 
> 时间：2012-12-01T11:34:21.420
> 
> 标签：php, javascript, jquery, html

我正在使用 PHP/MySQL 构建一个 CMS，到目前为止，我使用 jQuery 向表列添加排序和过滤。通常，它工作得很好，但有时排序和过滤元素不会加载 - 只有当我手动刷新页面时才会发生这种情况（从不通过链接访问它），而且只是有时。有时我可以在它发生之前刷新几次，而其他时候它可能会连续发生几次。

当问题发生时，Firebug 的控制台会告诉我以下一项或两项：

**ReferenceError：未定义 jQuery**

**ReferenceError: $ 未定义
$(document).ready(function(){**

（有时：**TypeError: $(".tablesorter").tablesorter is not a function**）

当一切正常时，控制台是空白的。

我的头文件加载在 CMS 的所有页面上，开头是：

```
<?php ob_start(); ?>
<!DOCTYPE html>
<html>
<head>
    <meta name="robots" content="noindex">
    <title><?=$pg_title." - ".$site_name;?> | Lucid <?=$ver_num;?></title>
    <link href="/favicon.gif" rel="icon" />
    <link rel="stylesheet" href="css/styles.php" type="text/css" />
    <script src="js/jquery-1.8.3.min.js" async></script>
    <script src="plugins/jquery-tablesorter/js/jquery.tablesorter.min.js" async></script>
    <script src="plugins/jquery-tablesorter/js/jquery.metadata.js" async></script>
    <script src="plugins/jquery-tablesorter/addons/pager/jquery.tablesorter.pager.min.js" async></script>
    <script src="js/picnet.table.filter.min.js" async></script>
</head> 
```

然后在页脚文件中，我调用了各种函数：

```
 <script async>
    $(document).ready(function(){
        function validateNumber(event) {
            var key = window.event ? event.keyCode : event.which;

            if (event.keyCode == 8 || event.keyCode == 46
             || event.keyCode == 37 || event.keyCode == 39) {
                return true;
            }
            else if ( key < 48 || key > 57 ) {
                return false;
            }
            else return true;
        };
        $('[class=sort-order]').keypress(validateNumber);
        $(".tablesorter").tablesorter({ 
            textExtraction: 'complex'
        }); 
        var options = {
            filterDelay: 100,
            clearFiltersControls: [$('.filter-clear')]
        };
        $('.tablesorter').tableFilter(options);
        $('input:not(.filter)').live("change", function () {
            window.onbeforeunload = function () { return "Your changes have not been saved, if you leave the page you'll lose them" };
        });
    });
</script>
</body>
</html>
<?php 
ob_flush();
?> 
```

我知道这是一个相当普遍的问题，但我觉得我已经尝试了所有解决方案（包括这里列出的那些：[JQuery - $ is not defined](https://stackoverflow.com/questions/2194992/jquery-is-not-defined)）

我尝试使用 setTimeout 将除 jQuery 之外的所有脚本的加载延迟最多一秒钟 - 没有帮助。

我试过检查 jQuery 是否是用 if(jQuery) 定义的——它总是这样。

Firebug 的 Net 选项卡显示 jQuery 文件的状态为 304 Not Modified，无论问题是否发生。

据我所知，我所有的拼写和语法都很好，应该认为它在大多数情况下都有效。

我尝试从外部网站而不是本地加载 jQuery - 没有区别。

我应该指出我正在使用 XAMPP 在本地开发 CMS，而不是远程服务器，所以我认为我的 apache 配置可能有问题。然后我将所有内容上传到远程服务器，发现问题更严重，这表明这与加载页面的速度有关，也许是异步？但我不知道在加载任何脚本之前我还能做些什么来确保 jQuery 加载......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T11:36:17.333

元素上的[`async`属性](http://www.w3.org/TR/html5/the-script-element.html#attr-script-async)`script`意味着 HTML 的解析可以在脚本被下载和评估之前继续。这意味着后续的脚本元素**不能**依赖于之前已经评估过的元素——这意味着您在 jQuery 之后加载的 jQuery 插件失败，因为尚未加载 jQuery。

具体来说：

```
<script src="js/jquery-1.8.3.min.js" async></script> 
```

告诉浏览器你想要那个脚本，但不要等待它。然后：

```
<script src="plugins/jquery-tablesorter/js/jquery.tablesorter.min.js" async></script> 
```

说同样的话。这设置了一个竞争条件，这两个脚本元素不再有任何顺序，因此有时第二个元素首先被评估。由于第二个需要 jQuery，因此失败了。

要修复它，您需要删除该`async`属性。如果您的目标是让页面更快地呈现，而无需等待脚本，请将所有脚本移动到末尾`body`（例如，就在之前`</body>`）。但请注意，这*可能*意味着用户在连接事件处理程序之前尝试与页面交互的短暂时刻等。

# ruby - OCRA 甚至无法构建最简单的 exe

> ID：13659029
> 
> 赞同：0
> 
> 时间：2012-12-01T11:34:46.443
> 
> 标签：ruby, ocra

我正在运行全新安装的 Windows、Ruby 1.9.3p327 和 Ocra 1.3.0。

测试.rb：

```
puts 'hi' 
```

`ocra test.rb`返回：

```
=== Loading script to check dependencies
hi
C:/Ruby193/lib/ruby/gems/1.9.1/gems/ocra-1.3.0/bin/ocra:467: Use
RbConfig instead of obsolete and deprecated Config.
=== Including 52 encoding support files (2831360 bytes, use --no-enc to
exclude)

=== Building test.exe

=== Adding user-supplied source files

=== Adding ruby executable ruby.exe

=== Adding detected DLL C:/Ruby193/bin/libyaml-0-2.dll

=== Adding detected DLL C:/Ruby193/bin/zlib1.dll

=== Adding detected DLL C:/Ruby193/bin/libffi-6.dll

=== Adding library files

=== Compressing 6529206 bytes

C:/Ruby193/lib/ruby/gems/1.9.1/gems/ocra-1.3.0/bin/ocra:1003:in block in initialize': unhandled exception

from
C:/Ruby193/lib/ruby/gems/1.9.1/gems/ocra-1.3.0/bin/ocra:983:in open'

from
C:/Ruby193/lib/ruby/gems/1.9.1/gems/ocra-1.3.0/bin/ocra:983:in initialize'

from
C:/Ruby193/lib/ruby/gems/1.9.1/gems/ocra-1.3.0/bin/ocra:822:in new'

from
C:/Ruby193/lib/ruby/gems/1.9.1/gems/ocra-1.3.0/bin/ocra:822:in build_exe'

from
C:/Ruby193/lib/ruby/gems/1.9.1/gems/ocra-1.3.0/bin/ocra:1138:in block in <top (required)>' 
```

ocra 中的违规行是：

```
system("\"#{Ocra.lzmapath}\" e tmpin tmpout 2>NUL") or fail 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T23:28:56.813

解决了，这是 Autorun 注册表项的意外副作用，它允许您重定向命令提示符的默认目录。由于某种原因，它只对这台机器产生了不利影响。

# java - 如何比较两个日历以检查事件是否发生在今天？

> ID：13659031
> 
> 赞同：0
> 
> 时间：2012-12-01T11:34:56.007
> 
> 标签：java

我有两个日历`calendarCurrent`，`calendarReceived`如何检查它们是否在同一日期（不要考虑小时、分钟、秒）

```
SimpleDateFormat sdf = new SimpleDateFormat(DATE_FORMAT_PATTER, Locale.US);
String receivedStringDate = "2012-12-01T00:33:24.935Z";
sdf.parse(receivedStringDate, new ParsePosition(0));
calendarCurrent = Calendar.getInstance(Locale.US);
calendarReceived = sdf.getCalendar(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:38:08.940

检查他们的 YEAR、MONTH 和 DATE 字段是否相同：[Calendar.get(int)](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#get%28int%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T11:43:11.170

`Calendar`为这个实现接口编写你自己的比较器`Comparator<Calendar>`

您还可以使用第三方 API，例如[JodaTime](http://joda-time.sourceforge.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T11:39:15.793

采用 ：

```
Calendar.YEAR
Calendar.MONTH
Calendar.DAY_OF_MONTH 
```

参考：[http ://www.vogella.com/articles/JavaDateTimeAPI/article.html](http://www.vogella.com/articles/JavaDateTimeAPI/article.html)

# php - 将每个特定字母转换为大写

> ID：13659036
> 
> 赞同：0
> 
> 时间：2012-12-01T11:36:06.680
> 
> 标签：php

假设我有一个字符串：

```
"\System\Classes\SomeClass" 
```

我想将其转换为：

```
"\system\classes\someClass" 
```

我该怎么做 - 将每个“\X”转换为“\x”？我应该使用哪个正则表达式，我可以使用正则表达式吗？（据我所知，他们只搜索搜索模式的第一次出现）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:44:53.487

试试这个 -[**演示**](http://codepad.viper-7.com/FJTkWx)

```
$string = "\System\Classes\SomeClass";
$array  = explode("\\", $string);

for ( $i = 0, $len = sizeof($array); $i < $len; $i++ ) {
    $array[$i] = lcfirst($array[$i]);
}

$new_string  = implode("\\", $array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T11:45:28.763

您只想将 后面的字母小写`\`，对吗？我建议您按照 Ajmal Salim的建议拆分字符串`\`，然后在每个字符串上使用。`lcfirst($str)`然后你可以再次内爆字符串。所以它会像：

```
$parts = explode('\\', '\\System\\Classes\\SomeClass');
$parts = array_map(function($item) { return lcfirst($item); }, $parts);
$end   = implode('\\', $parts); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T11:46:02.337

如果最后一句话总是上课，可能会这样

```
$str="\System\Classes\SomeClass";
$str2=strtolower($str);
$strArr=explode("\\",$str2);

$newStr=preg_replace('~class~','Class',$strArr[3]);
$complete=$strArr[1].'\\'.$strArr[2].'\\'. $newStr;
echo $complete; 
```

# c - 如何动态分配二维数组

> ID：13659041
> 
> 赞同：4
> 
> 时间：2012-12-01T11:36:24.447
> 
> 标签：c, multidimensional-array

我想在 C 中创建一个二维数组。

例如，我创建了一个名为 place 的 int 类型变量，如下所示：

```
int *place; 
```

我有一个游戏，其中包含行和列等变量。我希望我的 place 变量是一个二维数组，动态分配它的行和列（对于数组的最大大小），在“正常”声明中看起来像这样：

```
place[rows][columns]; 
```

但我不知道如何使用动态分配来做到这一点。

对于一维数组，我会这样做：

```
place = (int*) malloc (levels * sizeof(int)); 
```

但我不知道如何使用二维数组来做到这一点。

**编辑：**

我如何为 char 而不是 int 重写它？

我试图用字符覆盖整数，但它不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T11:38:57.290

让`place`是一个指向数组的指针，

```
int (*place)[columns] = malloc(rows * sizeof *place); 
```

这为您提供了一个连续的内存块（有利于局部性），您可以简单地访问它

```
place[i][j] = whatever; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:42:37.590

您需要执行以下操作来动态分配 int 类型的 arr[x][y]：

```
 int i = 0;
 int **arr = (int**)calloc(x, sizeof(int*));
 for(i = 0; i < x; i++)
      arr[i] = (int *) calloc(y, sizeof(int)); 
```

这个想法是首先创建一个一维指针数组，然后为每个数组条目创建另一个一维数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T11:44:50.853

您可以通过一些智能索引将单个 1d 数组用作 2d 数组：

分配内存：

```
place = (int*) malloc(rows * columns * sizeof(int)); 
```

要访问`place[i][j]`，请使用 i 和 j 作为：

```
place[ i*columns + j] = value ; 
```

# java - 如何找到方法中调用的所有方法？

> ID：13659042
> 
> 赞同：10
> 
> 时间：2012-12-01T11:36:27.173
> 
> 标签：java, class, methods, bytecode

如何获取特定方法中调用的其他类的方法？

例子

**方法 getItem1()**

```
public String getItem1() throws UnsupportedEncodingException{
    String a = "2";
    a.getBytes();
    a.getBytes("we");
    System.out.println(a);
    int t = Integer.parseInt(a);
    return a;
} 
```

调用的方法`getItem1()`有：

1.  `String.getBytes()`
2.  `String.getBytes(String)`
3.  `PrintStream.println(String)`
4.  `Integer.parseInt(String)`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-01T13:03:00.727

我会用[javassist](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/)做到这一点。

因此，假设您在类路径中可以访问以下类，并希望找到从**getItem1()**调用的所有方法：

```
class MyClass {
  public String getItem1() throws UnsupportedEncodingException{
    String a = "2";
    a.getBytes();
    a.getBytes("we");
    System.out.println(a);
    int t = Integer.parseInt(a);
    return a;
  }
} 
```

你已经编译了这个 MyClass。创建另一个使用 javassist api 的类：

```
public class MethodFinder {

  public static void main(String[] args) throws Throwable {
    ClassPool cp = ClassPool.getDefault();
    CtClass ctClass = cp.get("MyClass");
    CtMethod method = ctClass.getDeclaredMethod("getItem1");
    method.instrument(
        new ExprEditor() {
            public void edit(MethodCall m)
                          throws CannotCompileException
            {
                System.out.println(m.getClassName() + "." + m.getMethodName() + " " + m.getSignature());
            }
        });
  }
} 
```

MethodFinder 运行的输出是：

```
java.lang.String.getBytes ()[B   
java.lang.String.getBytes (Ljava/lang/String;)[B   
java.io.PrintStream.println (Ljava/lang/String;)V   
java.lang.Integer.parseInt (Ljava/lang/String;)I 
```

# iphone - 下载许多文件iPhone时添加activityIndi cator

> ID：13659044
> 
> 赞同：2
> 
> 时间：2012-12-01T11:37:08.610
> 
> 标签：iphone, ios, ipad, uiactivityindicatorview

我正在使用此代码下载许多 pdf 文件

```
for (int i=0; i<[myBooks count]; i++) {

Book_own *temp= (Book_own *)[myBooks objectAtIndex:i]; // myBooks is a mutable array of object Book_own

     // to download pdf
     NSString *documentName = [temp.bo_path stringByDeletingPathExtension];

     NSString *pdfLink = [NSString stringWithFormat:@"http://url.com/files/%@",temp.bo_path];

     NSString *linkWithoutSpaces = [pdfLink stringByReplacingOccurrencesOfString:@" " withString:@"%20"];

     NSString *urlString = linkWithoutSpaces;

     NSURL *url = [NSURL URLWithString:urlString];

     NSData *data = [NSData dataWithContentsOfURL:url];

     NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

     NSString *documentDir = [documentPaths objectAtIndex:0];

     NSLog(@"in settings, Document Directory: %@",documentDir);

     NSString *pdfPath = [NSString stringWithFormat:@"%@/%@",documentDir,[NSString stringWithFormat:@"%@.pdf",documentName]];

      NSLog(@"pdfpath: %@",pdfPath);

      [data writeToFile:pdfPath atomically:YES];
      NSData *tmp = [NSData dataWithContentsOfURL:url];

      if (tmp != nil) {
         NSError *error = nil;
         [tmp writeToFile:pdfPath options:NSDataWritingAtomic error:&error];
         if (error != nil) {
            NSLog(@"Failed to save the file: %@", [error description]);
             } else {
               NSLog(@"downloaded");
             }
           } else {
               NSLog(@"fail to save pdf file");
              }
 } 
```

这会为我下载文件，但它让我等待了很长时间，我想添加 activityIndi​​cator 或进度条来显示下载进度。但我是 iPhone 的新手，我不知道该怎么做。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:54:32.370

活动指示器有很多自定义类。由于您是 iphone 新手。我建议在 xcode 中使用默认活动指示器。

1) 将 UIActivityIndi​​cator 对象拖放到您的界面构建器中。

在视图控制器的 .h 文件中编写以下代码：

```
 IBOutlet  UIActivityIndicator *activityIndicator;
    //connect this outlet to the xib. 
```

在您的 .m 文件中：

```
 //when u call the method
      [activityIndicator startanimating];
      //when everything is complete
      [activityIndicator stopanimating]; 
```

希望这可以帮助您开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T22:12:31.143

我找到了一个很好的例子

在 .h 文件中

```
UIAlertView *progressAlert; 
```

在 .m 文件中

```
-(void)showAlertMethod

{
 progressAlert = [[UIAlertView alloc] initWithTitle:@"Uploading please wait...\n" message:@"" delegate:nil cancelButtonTitle:nil otherButtonTitles:nil];
CGRect alertFrame = progressAlert.frame;
UIActivityIndicatorView* activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
activityIndicator.frame = CGRectMake(135,alertFrame.size.height+55, alertFrame.size.width,30);
activityIndicator.hidden = NO;
activityIndicator.contentMode = UIViewContentModeCenter;
[activityIndicator startAnimating]; 
[progressAlert addSubview:activityIndicator];
[progressAlert show];

}
-(void)dismissAlertMethod
{
[progressAlert dismissWithClickedButtonIndex:0 animated:YES];
} 
```

根据您的要求调用该方法。我以这种方式调用方法：-

```
[NSThread detachNewThreadSelector:@selector(showAlertMethod) toTarget:self withObject:nil];

[NSThread detachNewThreadSelector:@selector(dismissAlertMethod) toTarget:self withObject:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T11:47:19.353

[MBProgressuHUD](https://github.com/jdg/MBProgressHUD)是一个非常好用且易于使用的插件类来显示活动指示器。

此外，您绝对应该异步下载文件。在演示项目中，我认为有几个使用 NSURLConnection 和 GCD 的不同示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T11:52:18.283

```
You can use below function for depicting indicator, which is added on a view:(showing indicator at amid of screen)

-(void)showActivityIndicatorViewer
{
    AppDelegate *delegate = [[UIApplication sharedApplication] delegate];
    UIWindow *window = delegate.window;
    activityView = [[UIView alloc] initWithFrame: CGRectMake(0, 0, window.bounds.size.width, window.bounds.size.height)];
    activityView.backgroundColor = [UIColor blackColor];
    activityView.alpha = 0.5;

    UIActivityIndicatorView *activityWheel = [[UIActivityIndicatorView alloc] initWithFrame: CGRectMake(window.bounds.size.width / 2 - 12, window.bounds.size.height / 2 - 12, 24, 24)];
    activityWheel.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhite;
    activityWheel.autoresizingMask = (UIViewAutoresizingFlexibleLeftMargin |
                                      UIViewAutoresizingFlexibleRightMargin |
                                      UIViewAutoresizingFlexibleTopMargin |
                                      UIViewAutoresizingFlexibleBottomMargin);
    [activityView addSubview:activityWheel];
    [window addSubview: activityView];

    [[[activityView subviews] objectAtIndex:0] startAnimating];
}

-(void)hideActivityIndicatorViewer
{
    [[[activityView subviews] objectAtIndex:0] stopAnimating];
    [activityView removeFromSuperview];
    activityView = nil;
}

While, if you just want default(shown at top of status bar):

Also, you can third party like HUD, you just google it, you'll find how yo use it. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T11:54:46.970

1.  将其卸载到第二个线程：

    ```
    [self performSelectorInBackground:@selector(downloadAll)]; 
    ```

2.  下载前显示指示器 UI

    ```
    //MOCKUP UI
    indicator = [[UIActivityIndicator alloc] initWithFrame:CGRectMake(10,10,50,50)];
    self.view addSubView:indicator];
    [indicator startAnimating];

    [self performSelectorInBackground:@selector(downloadAll)]; 
    ```

3.  AFTER 下载回调主线程

    ```
    - (void)downloadAll {
        //...... YOUR DOWNLOAD CODE
        [self performSelectorOnMainThread:@selector(downloadDone) waitUntilDone:NO];
    } 
    ```

4.  在下载完成隐藏指示器

    ```
    - (void)downloadDone {
        [self.indicator stopAnimating];
        [self.indicator removeFromSuperview];
    } 
    ```

# bash - Bash for循环获取上一个和下一个项目

> ID：13659047
> 
> 赞同：6
> 
> 时间：2012-12-01T11:37:14.723
> 
> 标签：bash, loops

我想做一个循环，并在循环内获取上一个和下一个项目。

目前，我正在使用以下循环：

```
for file in $dir;do
    [...do some things...]
done 
```

我可以在 C 中做类似的事情，例如，file[i-1]/file[i+1] 来获取上一个和下一个项目吗？有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T11:57:41.913

```
declare -a files=(*)
for (( i = 0; i < ${#files[*]}; ++ i ))
do
  echo ${files[$i-1]} ${files[$i]} ${files[$i+1]}
done 
```

在第一次迭代中，索引 -1 将打印最后一个元素，在最后一次迭代中，索引 max+1 将不打印任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T11:43:22.617

尝试这个：

```
previous=
current=
for file in *; do
  previous=$current
  current=$next
  next=$file
  echo $previous \| $current \| $next 
  #process item
done
previous=$current
current=$next
next=
echo $previous \| $current \| $next 
#process last item 
```

# sql - 将sql重写为linq，可能是小菜一碟，但无法理解

> ID：13659052
> 
> 赞同：1
> 
> 时间：2012-12-01T11:37:30.120
> 
> 标签：sql, linq

我需要在 Linq 中重写这个 sql 语句。

```
select hand,count(hand) as Hands, deviceid from individualhands
where deviceid = '977aed93-d1f1-4f7a-a6fa-6bc3ea7d863b'
group by hand, deviceid 
```

有人可以帮忙吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:24:06.687

试试这个：

```
var query = individualHands
    .Where(r => r.deviceid == '977aed93-d1f1-4f7a-a6fa-6bc3ea7d863b')
    .GroupBy(r => new { r.hand, r.deviceid })
    .Select(g => new { hand = g.Key.hand, deviceid = g.Key.deviceid, Count = g.Count() }); 
```

# html - 在 Ember Handlebars 中使用嵌套的每个块时的上下文绑定

> ID：13659053
> 
> 赞同：1
> 
> 时间：2012-12-01T11:37:31.857
> 
> 标签：html, ember.js, handlebars.js, templating

我刚刚偶然发现了 emberJS，并认为值得在我的下一个 Web 应用程序中尝试一下。

我实际上打算做的是以二维方式显示对象列表（atm 这可以是一个表）。

到目前为止我所拥有的：

```
<script type="text/x-handlebars">
<table width="100%" style="text-align:left">
  <tr>
    <th>
    </th>
    {{#each App.MyController.getColumnValues}}
      <th>{{this}}</th>
    {{/each}}
  </tr>
  {{#each App.MyController.getRowValues}}
    <tr>
      <th>{{this}}</th>
      {{#each App.MyController.getColumnValues}}
        {{view App.CountView rowBinding="this" columnBinding="../this"}}
      {{/each}}
    </tr>
  {{/each}}
</table>
</script> 
```

对于countView：

```
<script type="text/x-handlebars" data-template-name="countView">
  <td>{{view.row}} - {{view.column}}</td>
</script> 
```

如您所见，我想要一个表格，每个单元格中都有当前列和行的值。一切正常，除了 columnBinding。正如我在 Handlebars 的页面 {{../this}} 上所读到的，它是解决父模板范围的方法。在两个花括号中（没有为其创建额外的视图，这工作得很好。但我稍后需要调用一个函数，将列和行值传递给它，并认为（为了使其清晰）此时视图会很好.

任何想法如何访问父模板范围并将其传递给 countView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T13:00:32.270

为了避免混淆，您可以`{{each}}`在这种情况下始终在块中使用变量，您可以尝试这种方式：

```
{{#each row in App.MyController.getRowValues}}
  <tr>
    <th>{{row}}</th>
    {{#each column in App.MyController.getColumnValues}}
      {{view App.CountView rowBinding="row" columnBinding="column"}}
    {{/each}}
  </tr>
{{/each}} 
```

让我知道这是否有帮助...

# ios - Air for iOS - 在没有开发者证书的情况下调试应用程序

> ID：13659062
> 
> 赞同：0
> 
> 时间：2012-12-01T11:38:29.690
> 
> 标签：ios, air, flash-cs6

是否可以在没有 Apple 开发人员证书的情况下调试 AIR for iOS 应用程序，或者我是否需要越狱设备？（我在 Windows XP 上使用 Flash CS6 和 Air 3.5）

谢谢你。乌里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:45:06.453

我认为库存设备不再可能。

# c - TinyOS：如何将 uint_16 转换为两个 uint_8 整数（AES 加密）

> ID：13659073
> 
> 赞同：1
> 
> 时间：2012-12-01T11:40:17.223
> 
> 标签：c, aes, tinyos

我正在使用示波器组件来读取传感器数据。我正在将此数据发送到基站节点，基站节点将数据发送到笔记本电脑。

我想使用此处提供的组件对传感器数据实施 AES 加密：http: [//tinyos.cvs.sourceforge.net/viewvc/tinyos/tinyos-2.x-contrib/crypto/index.html](http://tinyos.cvs.sourceforge.net/viewvc/tinyos/tinyos-2.x-contrib/crypto/index.html)

我的计划是在 Oscilloscope.h 中将数据缓冲区从 10 减少到 8。这会将总数据大小更改为 128 位（与 AES 中的块大小相同）。现在唯一的问题是AES块中的每个数组元素是一个unit_8，但是数据缓冲区的数组元素是uint_16。

无论如何我可以将 uint_16 值“拆分”为高位和低位吗？然后我会将它们作为 2 个元素存储在我的 AES 块数组中。

为了澄清，我有一个 uint_16 对应于传感器读取的一些数据。我希望能够将此值存储在 2 个 uint_8 值中。然后我将加密数据块，将数据包发送到基站，基站将解密并将值组合到原始 uint_16。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T11:42:59.337

当然，只需将最低有效八位存储在一个变量中，并将最高有效八位存储在另一个变量中

```
unit8_t low = value & 0xFF;
uint8_t high = (value >> 8) & 0xFF; 
```

（按位和在这两种情况下都是多余的，因为`uint8_t`指定转换为相同）。

要从零件中检索`uint16_t`值，您需要移位和按位或，

```
uint16_t reassembled = ((uint16_t)high << 8) | low; 
```

由于整数提升是在移位运算符的参数上执行的，`uint16_t`如果`int`大于 16 位宽，则不需要强制转换，但如果`int`正好是 16 位宽，则移位可能导致未定义的行为，因为值`high*256`不需要可表示然后，`int`为了安全起见，轮班前需要进行演员表。如果`int`是 16 位宽，`uint16_t`则从转换获得的值将被转换为`unsigned int`- 除非你有一个不正当的实现，其中的宽度`unsigned int`小于`int`- 的宽度，否则转换为`int`，但这已经足够宽了。

# c - 如何使用 C 加密和解密文本？

> ID：13659079
> 
> 赞同：2
> 
> 时间：2012-12-01T11:40:53.097
> 
> 标签：c, encryption

我尝试编写简单的应用程序来获取字符串并对其进行加密。在我想通过使用解密算法获取以前的字符串之后。

AES加密/解密会很不错

它看起来很基本，但大多数示例都是用其他语言而不是 C 语言编写的。我没有找到任何合适的示例来做到这一点。请帮忙。

任何和所有的建议将不胜感激。:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:07:20.780

您将需要以下库：

```
 libc.lib
  euser.lib
  libcrypto.lib 
```

您还需要从[http://www.developer.nokia.com/info/sw.nokia.com/id/91d89929-fb8c-4d66-bea0-227e42df9053/Open_C_SDK_Plug-In.html安装 openC 插件](http://www.developer.nokia.com/info/sw.nokia.com/id/91d89929-fb8c-4d66-bea0-227e42df9053/Open_C_SDK_Plug-In.html)

这是带有解释注释的源代码：

```
#include <stddef.h>
#include <openssl/rc4.h>
#include <openssl/md5.h>

//#include<filelogger.h>

void openc_encrypt(int len, unsigned char* in, unsigned char* crypted, unsigned char* password, int passlen)
{
   unsigned char digest[MD5_DIGEST_LENGTH];
   RC4_KEY key;

   MD5(password, passlen, digest);

   RC4_set_key(&key, MD5_DIGEST_LENGTH, digest);
   RC4(&key, len, in, crypted);
}

void openc_decrypt(int len, unsigned char* in, unsigned char* decrypted, unsigned char* password, int passlen)
{
   unsigned char digest[MD5_DIGEST_LENGTH];
   RC4_KEY key;

   MD5(password, passlen, digest);

   RC4_set_key(&key, MD5_DIGEST_LENGTH, digest);
   RC4(&key, len, in, decrypted);
}

/////////////////////////////////////////////////////////////////////////////////////

const TInt KMaxTextLen = 100;

_LIT8(KExampleText, "Encrypt this text!");
_LIT8(KPassWord, "secret");

void doExampleL()
    {    
    TBuf8<KMaxTextLen> buffer(KExampleText);

    HBufC8* password = KPassWord().AllocLC();    
    HBufC8* crypted = HBufC8::NewLC(buffer.Size());

    TPtr8 cryptedPtr = crypted->Des();
    cryptedPtr.SetLength(buffer.Size());

    openc_encrypt(buffer.Size(),
              (unsigned char*)buffer.Ptr(),
              (unsigned char*)cryptedPtr.Ptr(),
              (unsigned char*)password->Ptr(),
              password->Size()); 

  //LOGDES16(buffer); //Encrypt this text!
  //LOGDES8(*crypted) ; //Ór›­Â Û¦  }ÖŠ4 b q 

    HBufC8* decrypted = HBufC8::NewLC(buffer.Size());
    TPtr8 decryptedPtr = decrypted->Des();

    buffer.Copy(cryptedPtr);
    decryptedPtr.SetLength(buffer.Size());

    openc_decrypt(buffer.Size(),         
                (unsigned char*)buffer.Ptr(),
                (unsigned char*)decryptedPtr.Ptr(),
                (unsigned char*)password->Ptr(),
                password->Size());

  //LOGDES16(buffer);       //Ór›­Â Û¦  }ÖŠ4 b q 
  //LOGDES8(*decrypted) ; //Encrypt this text!

    CleanupStack::PopAndDestroy(3);  //decrypted, crypted, password                   
} 
```

此示例中的文本已使用密码短语加密，然后使用示例函数 openc_encrypt() 和 openc_decrypt() 使用相同的密码短语解密。

**编辑**

**AES 加密**

*（信用去：abhi）*

对于AES加密请参考这个例子：[http ://saju.net.in/code/misc/openssl_aes.c.txt](http://saju.net.in/code/misc/openssl_aes.c.txt)

代码足够详细，并带有注释，如果您仍然需要对 API 本身进行更多解释，我建议您查看 Viega/Messier/Chandra 的这本书 Network Security with OpenSSL（谷歌它，您会很容易找到这本书的 pdf ..）阅读章节6，它特定于使用 EVP API 的对称密码。这有助于我真正理解使用 EVP 的各种功能和结构背后的原因。

如果你想深入研究 Openssl 加密库，我建议从 openssl 网站（安装在你的机器上的版本）下载代码，然后查看 EVP 和 aeh api 的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:06:24.087

从 即[Rot-13](http://en.wikipedia.org/wiki/ROT13)开始，然后从[那里](http://rosettacode.org/wiki/Rot-13)开始工作；）

# coldfusion - Coldfusion Fusebox URL-Controller SES 映射

> ID：13659081
> 
> 赞同：1
> 
> 时间：2012-12-01T11:41:21.360
> 
> 标签：coldfusion, coldbox, fusebox, fw1

刚开始稍微使用coldfusion和fusebox（这是我在这里提出的第二个问题，很多回复都提到不再支持fusebox，并且可能有更适合的框架-所以我在看ColdBox和FW/1-但是仍然想问这个保险丝盒问题！）。

我试图了解 Fusebox 5.5（正在使用的最新版本）是否支持任何类型的基于约定的 url 映射。我有在 url 上启动和运行的 noxml 框架应用程序：

```
http://127.0.0.1:8500/noxml 
```

现在我已经看到这默认为在应用程序控制器中执行欢迎功能 - 我想知道是否内置了基于约定的 url 映射，所以我可以像这样定义我的 url：

```
http://127.0.0.1:8500/noxml/app/welcome 
```

（例如 {appname}/{controllername}/{functionname}）

我也看到了这个问题：[How do I create Search Engine Safe URLs in Fusebox 5.1 noxml?](https://stackoverflow.com/questions/744181/how-do-i-create-search-engine-safe-urls-in-fusebox-5-1-noxml) 并添加了建议的基本配置：

```
FUSEBOX_PARAMETERS.queryStringStart = "/";
FUSEBOX_PARAMETERS.queryStringSeparator = "/";
FUSEBOX_PARAMETERS.queryStringEqual = "/ 
```

我可以点击这个网址：

```
http://127.0.0.1:8500/intranet/index.cfm/fuseaction/app.welcome 
```

但显然，那仍然是一个非常丑陋的网址..

使用 fusebox 5.5 开箱即用，我想要什么？（fusebox 站点 404 上的文档和社区链接 ..）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:05:34.023

如果你想做最纯粹的 SES URL ( [http://site.com/controller/action](http://site.com/controller/action) ) ，它需要删除 index.cfm ，这需要在 Web 服务器端进行一些 URL 重写。如果您想删除 index.cfm，我所知道的任何框架都无法避免 URL 重写

IIS7.5 使用 web.config 或使用内置向导原生支持它；Apache 通过 .htaccess 有 mod_rewrite。IIS6/7 有第 3 方产品。

如果你想要更多的权力/控制，你也可以使用coldcourse（[http://coldcourse.riaforge.org](http://coldcourse.riaforge.org)）进行检查，如下所述：

[如何在 Fusebox 5.1 noxml 中创建搜索引擎安全 URL？](https://stackoverflow.com/questions/744181/how-do-i-create-search-engine-safe-urls-in-fusebox-5-1-noxml)

正如海报所提到的，显然 FB 5.5 中内置了 URL 重写，但我对 5.5 并不熟悉。

# php - 从存储过程中获取记录？

> ID：13659106
> 
> 赞同：0
> 
> 时间：2012-12-01T11:44:03.160
> 
> 标签：php, mysql, stored-procedures

我有一个这样的存储过程：

```
DELIMITER //
DROP PROCEDURE IF EXISTS `get_games_menu` //

CREATE PROCEDURE `get_games_menu`
(
IN currplayer INT,
OUT gameid INT,
OUT lastdraw INT,
OUT playertiles TEXT,
OUT oppnation INT,
OUT oppname VARCHAR(100),
OUT fdraw INT,
OUT playerpoints INT,
OUT infopop INT,
OUT oppTiles TEXT,
OUT tabletiles TEXT,
OUT playerturn INT,
OUT newtabletiles TEXT,
OUT profileimg VARCHAR(255)
)
BEGIN
SELECT 
    gp.fk_game_id
  , gp.player_tiles
  , gp.infoPop
  , gp.first_draw
  , gp.player_points
  , g.table_tiles
  , g.new_tiles
  , gp2.last_draw_type
  , gp2.player_turn
  , gp2.player_tiles
  , u.country
  , u.username
  , u.profileimg
INTO 
    gameid
  , playertiles
  , infopop
  , fdraw
  , playerpoints
  , tabletiles
  , newtabletiles
  , lastdraw
  , playerturn
  , oppTiles
  , oppnation
  , oppname
  , profileimg
FROM nf_gameplayer gp
INNER JOIN nf_games g 
ON gp.fk_game_id = g.game_id
INNER JOIN nf_gameplayer gp2
ON  gp.fk_game_id = gp2.fk_game_id
AND gp.fk_player_id != gp2.fk_player_id
INNER JOIN nf_users u
ON gp2.fk_player_id = u.id
WHERE gp.fk_player_id = currplayer 
AND   g.invite=0 
AND   g.deleteby != currplayer 
ORDER BY g.lastdraw;
END //
DELIMITER ; 
```

然后我试图这样称呼它：

```
$mysqli = new mysqli('localhost', 'root', '', 'mytest');

$rs = $mysqli->query( 'CALL get_games_menu(1, @gameid,@playertiles,@infopop,@fdraw,@playerpoints,@tabletiles,@newtabletiles,@lastdraw,@playerturn,@opptiles,@oppnation,@oppname,@profileimg)' );
$rs = $mysqli->query( 'SELECT @gameid,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL');
while($row = $rs->fetch_object())
{
    echo $row['gameid']-'<br>';
} 
```

但我没有得到任何记录。当做一个普通的mysql时，我得到9条记录......

我究竟做错了什么。（新的存储过程）。

提前致谢 ;-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:59:33.170

CALL get_games_menu(1, @gameid) 传递 get_games_menu 中所有变量的值。否则设置 CALL get_games_menu(1, @gameidm,NULL,NULL,etc..)

# c# - 在给定的偏移量处显示 toast

> ID：13659110
> 
> 赞同：0
> 
> 时间：2012-12-01T11:44:52.143
> 
> 标签：c#, android, monodevelop, offset, toast

在适用于 Android 的 Google 地图应用程序中，我无法在给定偏移量处显示 toast。

这是我的代码：

```
 static public void DisplayCustomToast (Context displayContext, string stringText, int offsetX, int offsetY)
    {
        Toast toast = new Toast(displayContext);
        toast.SetText(stringText);
        toast.SetGravity (GravityFlags.Top, offsetX, offsetY);
        toast.Show();
    } 
```

当模拟器启动时，我尝试通过 onCreate 方法执行此代码：

```
DisplayCustomToast(this, "test", -30, 50); 
```

该应用程序完全停止工作，并显示手机主背景。

我可以帮忙在给定的 Android 偏移量处显示自定义吐司吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:19:12.440

尝试这个..

```
toast.SetGravity (GravityFlags.Top, 0, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:12:34.970

尝试这样做

```
Toast toast = Toast.makeText(MainActivity.this,"Test",Toast.LENGTH_SHORT);
toast.setGravity(Gravity.TOP|Gravity.LEFT, -30, 50);
toast.show(); 
```

# mysql - sql DROP CONSTRAINT UNIQUE 不起作用

> ID：13659114
> 
> 赞同：0
> 
> 时间：2012-12-01T11:45:00.287
> 
> 标签：mysql, unique-constraint, sql-drop

我得到了下表：

```
CREATE TABLE `unsub_counts` (
 `count_id` int(11) NOT NULL AUTO_INCREMENT,
 `unsub_date` date DEFAULT NULL,
 `unsub_count` int(11) DEFAULT NULL,
 `store_id` smallint(5) DEFAULT NULL,
 PRIMARY KEY (`count_id`),
 UNIQUE KEY `uc_unsub_date` (`unsub_date`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

列在`unsub_date`哪里`unique`。现在我想放弃这种唯一性，因为我需要在`unsub_date + store_id`.

我在网上找到了建议，但失败了：

```
ALTER TABLE `unsub_counts` DROP CONSTRAINT `unsub_date` 
```

给我：**你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`unsub_date`在第 1 行的“CONSTRAINT”附近使用正确的语法**

这与 MyISAM 有关吗？还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:50:39.593

`drop index`与约束名称一起使用：

```
ALTER TABLE unsub_counts DROP INDEX uc_unsub_date; 
```

要不就：

```
drop index uc_unsub_date on unsub_counts; 
```

# python - 将 0 和 1 的数组转换为整数

> ID：13659120
> 
> 赞同：0
> 
> 时间：2012-12-01T11:45:49.807
> 
> 标签：python

我有一个整数数组，它只存储 1 或 0。python 中是否有直接函数可以做到这一点？假设数组是 [0,1,0,1] 那么它应该返回 5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T11:49:12.800

想不出一个单一的功能，但以下很简单：

```
In [60]: val = 0

In [61]: for digit in [0,1,0,1]:
   ....:     val = val * 2 + digit
   ....:     

In [62]: val
Out[62]: 5 
```

**编辑：**下面的单线做同样的工作，如果有点慢：

```
In [66]: reduce(lambda x,y: 2*x+y, [0,1,0,1,1])
Out[66]: 11 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T11:49:17.403

如果您有效地获得了位串，那么您可以执行以下操作：

```
>>> a
[0, 1, 0, 1]
>>> int(''.join(str(i) for i in a), 2)
5
>>> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T12:10:30.137

```
sum(j<<i for i, j in enumerate(reversed([0, 1, 0, 1]))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T11:54:12.073

这应该做你想要的：

```
a_list = [0,1,0,1]
int(''.join(map(str,a_list)), base=2) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T13:48:29.993

如果您需要在 Python 中进行位操作，请务必查看此 wiki 页面：

[http://wiki.python.org/moin/BitManipulation](http://wiki.python.org/moin/BitManipulation)

虽然没有内置的功能，但那里提到的库（尤其是 python-bitstring）应该可以帮助你。

# javascript - Javascript 框架比较概述

> ID：13659122
> 
> 赞同：4
> 
> 时间：2012-12-01T11:45:58.217
> 
> 标签：javascript

Web 中是否存在对现代 JavaScript 框架的系统概述和比较，包括方法、优缺点、优缺点的比较，以了解它们在不同情况下的适用性的总体思路？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T08:23:22.150

我发现的最佳比较是 Steven Sanderson 的这篇博文： [Rich JavaScript Applications – the Seven Framework](http://blog.stevensanderson.com/2012/08/01/rich-javascript-applications-the-seven-frameworks-throne-of-js-2012)

这篇博文实际上是2012 年夏天举行的[Throne of JS](http://throneofjs.com/)会议的一种报告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-04T05:51:08.773

我刚刚找到了一个非常有用的网站，可以帮助您选择正确的 MVC 框架：[http ://todomvc.com/](http://todomvc.com/)

相同的 ToDo-Application 是使用多个框架（包括backbone.js、AngularJS、Ember.js、KnockoutJS 等）编写的——因此您可以查看所有这些框架。

# php - 在 PHP 中搜索字符串格式数组中的数字？

> ID：13659124
> 
> 赞同：0
> 
> 时间：2012-12-01T11:46:03.337
> 
> 标签：php, arrays

我的数组如下所示：

```
array( '0|500|0.50', '501|1000|0.75' ); 
```

我正在尝试运行搜索以获取具有搜索值的 KEY。

我做了这个功能来搜索：

```
function cu_array_search($str,$array){
    foreach($array as $key => $value) {
        if(strstr($str,$value)) {
            return true;
        } else {
            return false;
        }
    }
} 
```

并在检查时像这样使用它：

```
if (cu_array_search(500,$array) { 
```

但它永远不会返回 true，尽管 500 存在于数组的第一个键中。

如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:54:00.123

`strpos`会让你的函数返回 true，即使那是`0.5001`但不是`500`。

您应该将值分解为`|`，然后检查数组中的数字是否。

```
function cu_array_search($num, $array){
  return count(array_filter($array, function ($var) use ($num) {
    return in_array($num, explode('|', $var));
  })) > 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T11:50:39.703

haystack 是第一个参数，而不是第二个：

```
if(strstr($value,$str)) { 
```

此外，`strpos`在这方面速度更快，因此您应该使用：

```
function cu_array_search($str,$array){
    foreach($array as $key => $value) {
        if(strpos($value,$str) !== false) {
            return $key;
        } else {
            return false;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T11:48:09.510

一、`strstr`参数错误

其次，`return false`应该在循环的末尾。

第三，如果你需要 KEY 那么你需要使用`return $key`而不是`return true`

```
function cu_array_search($str,$array){
    foreach($array as $key => $value) {
        if(strstr($value, $str)) {
            return $key;
        }
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T12:05:23.363

这工作正常

```
<?php

function cu_array_search($str, $array) {
    foreach($array as $key => $value) {
        $temp_array=explode('|', $value);
        if (in_array($str, $temp_array))
            return true;
    }
    return false;
}

$array = array( '0|500|0.50', '501|1000|0.75' );

if (cu_array_search(500, $array))
    echo "success";
else
    echo "failed" ;

?> 
```

# php - 打开存储在 mysql 中的 .txt 文件

> ID：13659129
> 
> 赞同：1
> 
> 时间：2012-12-01T11:46:49.713
> 
> 标签：php

我正在尝试打开存储在 mysql 中的 .txt 文件。可能是问题太小了，但我只是被困在这里。这是脚本，请任何人指导我。

```
$connect = mysql_connect('localhost', 'root', 'password') or die(mysql_error());
$select_db = mysql_select_db('uploadFile', $connect) or die(mysql_error());
$file = $_FILES['file']['name'];
$fileType = $_FILES['file']['type'];
move_uploaded_file($_FILES['file']['tmp_name'], 'txt_files/'. $file);
$query = mysql_query("INSERT INTO file VALUES ('$file')") or die(mysql_error());
$selectQuery = mysql_query("SELECT * FROM file"); 
```

我失去了 3 天的时间来寻找它。请指导我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:50:31.217

您的文件路径存储在 mysql 中，文件复制到 txt_files 文件夹中，如果文件成功上传，请检查您的 txt_files 文件夹，然后它在该文件夹中

# java - 如何在Java中存储和检查字符串的同义词

> ID：13659130
> 
> 赞同：7
> 
> 时间：2012-12-01T11:46:52.413
> 
> 标签：java, arrays, string, synonym, chatbot

我正在制作一个可以响应用户所说内容的程序，例如聊天机器人。但是我想知道如果两个或多个单词具有相同的含义，我是否可以让它理解。

例如，当用户说“你害怕黑暗吗？”时，我会回答“是”。但是“害怕”、“害怕”和“害怕”具有相同的含义。如果用户使用“害怕”而不是“害怕”，程序如何识别这两个词具有相同的含义，因此引用“你害怕黑暗吗？” 问和回答“是”？

我想知道我是否可以制作类似`{"hello", "hi", "hey"}`或`{"afraid", "scared", "frightened"}`等的字符串数组。谢谢你的帮助。

PS：我写的程序没有使用英文，恐怕不能使用库或API，但我自己定义同义词列表没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:07:32.577

我至少会使用称为面向对象的漂亮功能：

```
public class Word implements Comparable<Word> {
   private String word;

   private TreeSet<Word> synonyms;
   //getter and setter
   public void addSynonym(final Word word) {
       synonyms.add(word);
   }

   @Override
   public int compareTo(final Word other) {
      if (this.word == null) {
          return -1;
      if (other == null || other.getWord() == null) {
         return 1;
      }
      return this.word.compareTo(other.getWord());
   }
} 
```

所以我们有一个 Word 类，带有同义词的 TreeSet（用于快速搜索）。例如，这可以从属性文件中填充，例如：

```
afraid=scared
hello=hey 
```

并且所有单词都可以存储在 TreeSet 中：

```
private TreeSet<Word> allWords = new TreeSet<Word>();

String key;
String value;
//loop through all properties
Word word = new Word(key);
Word synonym = new Word(value);

if (allWords.contains(word)) {
    allWords.tailSet(word).first().addSynonym(synonym); //find the word in the set
} else {
    word.addSynonym(synonym);
    allWords.add(word);
} 
```

它需要一些改进，如何存储单词存在问题，每个单词应该存储在 allWords 中，还是只存储一组同义词？使用某种 TreeMap 可能会更好，比如

```
final TreeMap<Word, List<Word>> allWords; 
```

但是，仍然可以帮助您朝着正确的方向前进。无论如何，就在我的头顶上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T12:14:07.223

对您来说最好的想法是将同义词存储在文本文件（或数据库中）中。之后查询数据集并获得匹配结果。

下面是它的数据库模型图 -

![数据库结构](../Images/da33fd5f0a1a62f551548c6b52f45de4.png)

您可以查询 refSynomy 表以获取同义词。

在 postgres 中对上述结构的查询将是 -

```
CREATE TABLE "testing"."synomy" (
    "idSynomy" int2 NOT NULL,
    "word" text NOT NULL,
    CONSTRAINT "synomy_pkey" PRIMARY KEY ("idSynomy") NOT DEFERRABLE INITIALLY IMMEDIATE
)
WITH (OIDS=FALSE);
ALTER TABLE "testing"."synomy" OWNER TO "dulitharasangawijewantha";
CREATE UNIQUE INDEX "synomy_idSynomy_key" ON "testing"."<table_name>" USING btree("idSynomy" ASC NULLS LAST);

CREATE TABLE "testing"."refSynomy" (
    "idSynomyref" int2 NOT NULL,
    "refSynomy" int2 NOT NULL,
    CONSTRAINT "refSynomy_pkey" PRIMARY KEY ("idSynomyref") NOT DEFERRABLE INITIALLY IMMEDIATE,
    CONSTRAINT "refSynomy" FOREIGN KEY ("refSynomy") REFERENCES "testing"."synomy" ("idSynomy") ON UPDATE NO ACTION ON DELETE NO ACTION NOT DEFERRABLE INITIALLY IMMEDIATE,
    CONSTRAINT "idSynomy" FOREIGN KEY ("idSynomyref") REFERENCES "testing"."synomy" ("idSynomy") ON UPDATE NO ACTION ON DELETE NO ACTION NOT DEFERRABLE INITIALLY IMMEDIATE
)
WITH (OIDS=FALSE);
ALTER TABLE "testing"."refSynomy" OWNER TO "dulitharasangawijewantha"; 
```

我建议您应该使用小型数据库的原因 -

*   可在应用程序的后期阶段进行管理
*   如果您想引入更多功能（例如反义词），这很有用
*   高效，因为我们使用的是数据库

您可以使用您最初的想法将它们存储在数组中，但很快就会很难维护。所以我的建议是数据库。如果您想让您的应用程序可移植，您可以使用 sqlite 解决方案，以便数据库位于文件中。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T09:23:23.433

如果你必须存储这些数据，你可以使用 Lucene 来索引一个数据库并快速找到东西

# android - Android：替换不同活动中的小部件

> ID：13659132
> 
> 赞同：1
> 
> 时间：2012-12-01T11:46:58.717
> 
> 标签：android, view, android-activity, replace

我想做的事情，实际上是一个“Action Bar”，像这样： ![塔帕谈话](../Images/1f2f8e81f175f71e2ef5795d598c226f.png)

在开始一项活动时，我想替换操作栏下方的视图。main.xml 示例（简化）：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/mainLinear"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <!-- SIMPLIFIED ACTION BAR -->
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:tools="http://schemas.android.com/tools"
            android:layout_width="fill_parent"
            android:layout_height="65dp"
            android:orientation="horizontal"
            android:background="#333333">

        <Button android:id="@+id/actionBtn"
            android:text="@string/actionText"
            android:textColor="#FFFFFF"
            android:textSize="15sp"
            android:layout_width="0.0dip"
            android:layout_height="wrap_content"
            android:contentDescription="@string/fillImage"
            android:drawableTop="@android:drawable/ic_menu_agenda"
            android:background="@drawable/tab_unselect"
            android:layout_weight="1.0" />

    </LinearLayout>

    <Button
        android:background="@drawable/btn_default_holo_light"
        android:textSize="20sp"
        android:id="@+id/BUTTON1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical|center_horizontal"
        android:textColor="#000000"
        android:text="@string/button"
        android:layout_below="@+id/klassenBtn"/>
</LinearLayout> 
```

在我的 MainActivity.java 中，我执行 setContentView(R.layout.main,xml)

在 web.xml 中：

```
 <WebView  xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/webView1"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"/> 
```

现在我想在不同的活动 (WebActivity.java) 中用 webView1 (@+id/webView1) 替换 BUTTON1 (@+id/BUTTON1)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:19:47.527

您可以将 webview 和按钮放在相同的布局中。如果您设置其可见性，它将不会在小部件之间分配空间。

然后只有您可以更改小部件的可见性。

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="65dp"
    android:background="#333333"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/actionBtn"
        android:layout_width="0.0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:background="@drawable/tab_unselect"
        android:contentDescription="@string/fillImage"
        android:drawableTop="@android:drawable/ic_menu_agenda"
        android:text="@string/actionText"
        android:textColor="#FFFFFF"
        android:textSize="15sp" />
</LinearLayout>

<Button
    android:id="@+id/BUTTON1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/klassenBtn"
    android:background="@drawable/btn_default_holo_light"
    android:gravity="center_vertical|center_horizontal"
    android:text="@string/button"
    android:textColor="#000000"
    android:textSize="20sp"
    android:visibility="visible" />

<WebView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:visibility="gone" 
    android:background="#ad00fc"/> 
```

# objective-c - 在 WebKit 上的 Mac OS 应用程序中启用 WebGL

> ID：13659133
> 
> 赞同：6
> 
> 时间：2012-12-01T11:46:59.980
> 
> 标签：objective-c, macos, webkit, webgl

我正在为 Mac OS 编写一个应用程序 - WebKit 上的浏览​​器，用于 WebGL 上的某个站点。一切就绪，应用程序正确显示正常的 HTML 站点，但 WebGL 不起作用。如何在我的应用程序中启用 WebGL？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-01T16:26:49.093

一旦你有了一个 WebView，就有一个**未记录的方法**可以启用 WebGL：

```
WebPreferences *p = [webView preferences];
if ([p respondsToSelector:@selector(setWebGLEnabled:)]) {
    [p setWebGLEnabled:YES];
} 
```

在这个例子中，我用它来保护它，`respondsToSelector:`以确保如果以后的版本删除了这个特定的选项，代码不会中止。

请注意，我了解包含使用未记录接口的代码的应用程序如果提交到 Apple 的 Mac App Store 可能会被拒绝。

* * *

另一种选择是使用官方支持 WebGL 的不同嵌入式渲染器（在 Safari 中演示的 Apple 的 WebKit 仅将其作为开发人员选项，可能是为了实验性的）。由于 Firefox 和 Chrome 都支持 WebGL，请查看[Gecko](https://developer.mozilla.org/en-US/docs/Gecko/Gecko_Embedding_Basics)和[Chromium Embedded Framework](http://code.google.com/p/chromiumembedded/)。（注：我无法确认嵌入式 Gecko 是否支持 WebGL。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-09T17:46:49.153

在小牛队，这是正确的代码。

```
WebPreferences *preferences = [_webview preferences];
if([preferences respondsToSelector:@selector(setWebGLEnabled:)]){
    [preferences performSelector:@selector(setWebGLEnabled:) withObject:[NSNumber numberWithBool:YES]];
} 
```

你需要调用 performSelector 否则你会得到一个编译错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-22T04:37:32.173

我想出了如何在不使用未记录方法的情况下做到这一点。您需要为您的应用设置用户首`WebKitWebGLEnabled`选项`@YES`。要在应用程序第一次运行时应用设置，需要在`WebView`初始化之前尽早设置。在我的例子中，`WebView`实例是从主 nib 文件加载的，所以这确实很早。我将此代码添加到`Supporting Files/main.m`：

```
[[NSUserDefaults standardUserDefaults] setObject:@YES
                                       forKey:@"WebKitWebGLEnabled"]; 
```

请注意，由于没有调用未记录的方法，我假设此代码在应用商店指南内，但我的应用尚未经过审核！

# asp.net - 来自远程计算机的 IIS 连接问题

> ID：13659142
> 
> 赞同：1
> 
> 时间：2012-12-01T11:47:54.897
> 
> 标签：asp.net, wcf, iis-7

![WireShark 日志](../Images/fa1bd980e9f3b3ede2bf197a1db4fdea.png)

我在 WIN7 机器（服务器）中安装了 IIS，当我尝试使用 . 从同一网络上的远程机器连接到该系统时`<http://ServerMachineName>`，它失败了。

如上图所示，我拍摄了 wireshark 日志的快照。请看一下，如果您能找出原因，请告诉我。

# linux - 访问以单行而不是多行显示的变量

> ID：13659145
> 
> 赞同：2
> 
> 时间：2012-12-01T11:48:15.607
> 
> 标签：linux, bash, shell

我将多行存储在一个变量中，当我尝试访问它们时，它显示在一行中。

```
$ echo -e "A\nB"
A
B
$ VAR=`echo -e "A\nB"`
$ echo $VAR
A B 
```

让我知道有什么方法可以使输出与命令相同。我希望 A，B 在访问它时处于不同的行中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T11:53:21.787

回显时需要引号：

```
$ var=$(echo -e "A\nB")

$ echo "$var"
A
B 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T05:43:08.273

$ VAR= `echo -e "A\nB"` $ echo "$VAR" AB

# python - 显示上下文相关的子菜单

> ID：13659146
> 
> 赞同：0
> 
> 时间：2012-12-01T11:48:18.310
> 
> 标签：python, user-interface, python-2.7, pyqt, pyqt4

我编写了一个程序，在系统托盘中创建一个图标，然后单击鼠标右键显示一个上下文菜单，其中包含 2 点 Notes 和 Quit，Notes 项是单点 Create new note 的子菜单。但是为什么该项目不显示注释。为什么？

```
from PyQt4 import QtCore, QtGui
import sys

def main():
    app = QtGui.QApplication(sys.argv)

    tray = QtGui.QSystemTrayIcon()
    icon = app.style().standardIcon(QtGui.QStyle.SP_DesktopIcon)
    tray.setIcon(icon)
    tray.show()
    CreateMenu(tray, app)
    sys.exit(app.exec_())

def CreateMenu(tray, app):
    m1 = QtGui.QMenu("Menu 1")
    m2 = QtGui.QMenu("Notes")
    m2.addAction("Create new note")
    m1.addMenu(m2)
    m1.addSeparator()
    m1.addAction("Quit", app.quit)
    tray.setContextMenu(m1)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:44:21.227

只需将`m1`菜单作为父级传递给`m2`它，它就会起作用。

```
m1 = QtGui.QMenu("Menu 1")
m2 = QtGui.QMenu("Notes", m1) 
```

在我的 Ubuntu 机器上测试。

# android - Activity 开始时 ProgressBar 的进度无法正常工作

> ID：13659148
> 
> 赞同：0
> 
> 时间：2012-12-01T11:48:23.630
> 
> 标签：android, android-progressbar

我正在使用`ExpandableListActivity`and 在底部我有一个 ProgressBar 来确定检查了多少行。

活动的 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/activity_main_layout"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:id="@+id/activity_main_content"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:weightSum="100" >

    <include
        android:id="@+id/activity_checklist_titlebar"
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_weight="10"
        layout="@layout/titlebar" />

    <ExpandableListView
        android:id="@+id/android:list"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="90" >
    </ExpandableListView>
</LinearLayout>

<ProgressBar
    android:id="@+id/activity_checklist_progress"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="match_parent"
    android:layout_height="@dimen/height_activity_checklist_progress"
    android:layout_alignParentBottom="true" />

<TextView
        android:id="@+id/activity_checklist_progress_text"
        style="@style/Text.Strong.Medium"
        android:layout_width="wrap_content"
        android:layout_height="@dimen/height_activity_checklist_progress"
        android:gravity="center"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="0/50" />

</RelativeLayout> 
```

我在这里更新进度：

```
@Override
public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) 
{
    // ...
    TextView overall_progress_text = 
       (TextView) main_layout.findViewById(R.id.activity_checklist_progress_text);
        int overall_progress = checklist.getProgress();
        overall_progress_text.setText(overall_progress + "/" + checklist.size());
    ProgressBar overall_progress_bar = 
       (ProgressBar) main_layout.findViewById(R.id.activity_checklist_progress);
        overall_progress_bar.setProgress(overall_progress);
        overall_progress_bar.setMax(checklist.size());

    return convertView;
} 
```

如您所见，我有一个 TextView 也显示了进度，显然这些值很好。当我开始更改列表中复选框的状态时，一切正常，唯一的问题是在活动开始时。

progressBar 显示了这一点（我认为最大值是“100”而不是“9”）：

![在此处输入图像描述](../Images/8faefb732cf2f78be48e58781d1dc203.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:14:46.333

我只是解决了在进度之前设置最大值的问题。即使您在进度后立即设置最​​大值，Android 的 ProgressBar 似乎也不起作用......

改变了这个：

```
overall_progress_bar.setProgress(overall_progress);
overall_progress_bar.setMax(checklist.size()); 
```

对此：

```
overall_progress_bar.setMax(checklist.size());
overall_progress_bar.setProgress(overall_progress); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:57:56.600

您可以使用 [Async Task](http://developer.android.com/reference/android/os/AsyncTask.html)查看进度，在[onProgressUpdate](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29)中您可以放置​​进度对话框或进度条..

# javascript - JavaScript 的日期是如何工作的？

> ID：13659149
> 
> 赞同：1
> 
> 时间：2012-12-01T11:48:30.753
> 
> 标签：javascript, date

有人可以解释一下[http://jsfiddle.net/mark69_fnd/NhuLe/](http://jsfiddle.net/mark69_fnd/NhuLe/)产生的输出吗？

```
new Date('2012-07-01') == Sat Jun 30 2012 20:00:00 GMT-0400 (Eastern Daylight Time)
new Date('2012-07-09') == Sun Jul 08 2012 20:00:00 GMT-0400 (Eastern Daylight Time)
new Date('2012-07-10') == Mon Jul 09 2012 20:00:00 GMT-0400 (Eastern Daylight Time)
new Date('2012-07-31') == Mon Jul 30 2012 20:00:00 GMT-0400 (Eastern Daylight Time)
new Date('2012-08-1') == Wed Aug 01 2012 00:00:00 GMT-0400 (Eastern Daylight Time)
new Date('2012-08-9') == Thu Aug 09 2012 00:00:00 GMT-0400 (Eastern Daylight Time)
new Date('2012-08-10') == Thu Aug 09 2012 20:00:00 GMT-0400 (Eastern Daylight Time)
new Date('2012-08-31') == Thu Aug 30 2012 20:00:00 GMT-0400 (Eastern Daylight Time)
new Date('2012-09-1') == Sat Sep 01 2012 00:00:00 GMT-0400 (Eastern Daylight Time)
new Date('2012-09-9') == Sun Sep 09 2012 00:00:00 GMT-0400 (Eastern Daylight Time)
new Date('2012-09-10') == Sun Sep 09 2012 20:00:00 GMT-0400 (Eastern Daylight Time)
new Date('2012-12-09') == Sat Dec 08 2012 19:00:00 GMT-0500 (Eastern Standard Time)
new Date('2012-12-31') == Sun Dec 30 2012 19:00:00 GMT-0500 (Eastern Standard Time)
new Date('2013-01-01') == Mon Dec 31 2012 19:00:00 GMT-0500 (Eastern Standard Time)
new Date('2013-01-09') == Tue Jan 08 2013 19:00:00 GMT-0500 (Eastern Standard Time)
new Date('2013-02-09') == Fri Feb 08 2013 19:00:00 GMT-0500 (Eastern Standard Time)
new Date('2013-03-09') == Fri Mar 08 2013 19:00:00 GMT-0500 (Eastern Standard Time)
new Date('2013-04-09') == Mon Apr 08 2013 20:00:00 GMT-0400 (Eastern Daylight Time)
new Date('2013-05-09') == Wed May 08 2013 20:00:00 GMT-0400 (Eastern Daylight Time)
new Date('2013-06-09') == Sat Jun 08 2013 20:00:00 GMT-0400 (Eastern Daylight Time)
new Date('2013-07-09') == Mon Jul 08 2013 20:00:00 GMT-0400 (Eastern Daylight Time)
new Date('2013-08-09') == Thu Aug 08 2013 20:00:00 GMT-0400 (Eastern Daylight Time)
new Date('2013-09-09') == Sun Sep 08 2013 20:00:00 GMT-0400 (Eastern Daylight Time) 
```

我有兴趣了解它如何决定计算这一天。请注意 和 之间的`2012-07-09`区别。`2012-08-9``2013-08-09`

我在 Chrome 上运行它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T11:58:15.063

这是一个非常有趣且微妙的问题。

原因是您的某些日期采用规范中定义的类似 ISO-8601 的格式，因此被解析为 GMT，但其他日期**不是**，因此它们依赖于非标准日期解析，这似乎是（在 Chrome 中）改用当地时间。

日期字符串`2012-07-01`符合[第 15.9.1.15 节](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.1.15)中指定的格式，因此根据该节的规则，它在时区 Z (GMT) 中解析。然后你输出它，它在本地时间输出，大约提前四个小时，所以日期随着原始值（没有时间部分）在午夜发生变化。

日期字符串`2012-08-1`不**符合**该格式（它需要在`0`之前`1`）。这使我们脱离了特定行为的领域。构造函数，当给定一个字符串时，遵循与[第 15.9.4.2 节](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.4.2)中定义的`Date`规则相同的规则，其中包括：`Date.parse`

> 该函数首先尝试根据日期时间字符串格式（15.9.1.15）中调用的规则解析字符串的格式。**如果字符串不符合该格式，则函数可能会退回到任何特定于实现的启发式或特定于实现的日期格式。**

*（我的重点）*

这个故事的寓意是：坚持指定的格式。:-)

但附带说明：规范中定义的日期/时间格式相对较新（从 ES5 开始，大约三年前）。在此之前，**没有**定义`Date`构造函数（或`Date`解析）需要解析的日期/时间格式。它只需要能够解析`Date#toString`吐出的任何内容，但那是特定于实现的。并且较旧的浏览器确实无法解析`2012-08-01`. 尽管没有指定，但几乎所有浏览器（我测试过的每一个）**都会**解析`2012/08/01`. 当然，现在我想回去看看他们使用的时区（并检查他们是否都使用相同的时区）......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:51:23.660

`new Date('2012-07-01')`表示您在 * *GMT 000* *0 时区提供日期。

但是，当它向您显示日期时，它会在您的浏览器时区（在您的情况下为**GMT -400**）中执行相同的操作。

这就是您看到所有时间都是**20:00**的原因。

# java - PackageInfo LoadLabel 性能缓慢

> ID：13659156
> 
> 赞同：5
> 
> 时间：2012-12-01T11:49:23.740
> 
> 标签：java, android, performance

我正在为 Android 编写一个应用程序，其中获取应用程序的标签（实际名称）非常慢。特别是这段代码的表现非常糟糕：

```
packageInfo.loadLabel(pm); 
```

只是给你一些指标。在安装了 400 个应用程序的 Android 设备上，构建所有应用程序包名（com.android.* 等）的列表将花费不到一秒钟的时间。但是，获得每个应用程序的实际名称需要 30 多秒。

我也尝试过这段代码，但结果几乎相同（非常慢）：

```
(String)pm.getApplicationLabel(packageInfo); 
```

**问题：**如果已知应用程序包名称（即“com.android.htmlviewer”），是否有另一种方法可以快速获取应用程序名称（即“HTML Viewer”）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T20:55:51.783

您可以在您的应用程序中构建一个“已知”应用程序名称的数据库，并在每次您的应用程序遇到新包时更新它。第一次运行需要一段时间，但之后您只需检查一个或两个包名称即可节省大量时间。

# iphone - 如何从 AppStore 中删除 iPhone 应用程序版本？

> ID：13659159
> 
> 赞同：3
> 
> 时间：2012-12-01T11:49:29.780
> 
> 标签：iphone, ios, xcode, sdk

我已经将 2.0 版本上传到了必须同时支持 iPhone 和 iPad 的应用商店。但之前的版本确实只支持 iPhone。此版本在 iPad 中存在分辨率问题。我只为 iPhone 创建了 3.0 版，但 iTunes 连接不接受此版本，并说“此捆绑包不支持先前应用版本支持的一个或多个设备。您的应用更新必须继续支持所有以前支持的设备。您在 Xcode 中使用 Targeted Device Family 构建设置声明支持的设备。

任何人请建议我最好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T12:46:35.480

只有在应用程序获得批准并在 App Store 中发布后，您才能将应用程序从通用应用程序更改为 iPhone 或 iPad。您唯一的选择是完全从 App Store 中删除该应用程序并提交一个仅适用于 iPhone 的新应用程序，但您可能会失去大部分客户。

我建议您尽快解决通用版本的任何问题并提交更新。

# javascript - JS 事件监听器：OnBlur 事件：结果取决于点击的内容

> ID：13659160
> 
> 赞同：0
> 
> 时间：2012-12-01T11:49:44.603
> 
> 标签：javascript, javascript-events

我有一个带有弹出日历日期选择器的日期输入框。当我单击日期框时，会出现弹出日历。然后我可以

*   选择一个日期。日期出现在日期框中，日历出现
*   在日历外单击。日历消失。这是通过一个 mouseup 事件来检查点击了什么。
*   在日期框中键入日期。

我想要什么：当我在日期框中键入日期并使用标签时，我希望日历消失。我已经通过在日期框中添加一个 onBlur 事件来尝试这个。这个事件让日历消失了。但是，这意味着当我在日历内单击时日历会消失，这是我不想要的。所以我需要某种日期框 onBlur 事件来检查日历是否被点击/有焦点。或者完全是别的东西。

我试图检查日历是否有焦点。使用 jquery 我做了：

```
target = $("*:focus"); 
```

这没有任何用处。通常我会使用 onCLick 事件来查看点击了什么，但是我需要一个 OnClick 和一个 OnBlur 事件，而 OnBlur 事件需要 onClick 事件的结果。但是，我似乎无法控制首先调用的内容。

我尝试使用 Chrome 和 IE JS 调试器来查看发生了什么，但添加断点似乎会改变调用的函数，这没有任何意义。在 onBlur 事件中添加断点：它停在那里。在 mouseUp 事件中添加断点：它停在那里。在两个事件中添加断点：即使我继续，它也只会在 onBlur 事件中停止。我必须再次单击才能触发 mouseUp 事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:48:07.533

[http://jsfiddle.net/alaa13212/Gs5Y2/](http://jsfiddle.net/alaa13212/Gs5Y2/)

在 jQuery中使用`blur`focusout。
必须专注于元素（使用`tabindex`可聚焦的属性）

# ssis - ssis 包中的优先约束编辑器

> ID：13659164
> 
> 赞同：0
> 
> 时间：2012-12-01T11:50:30.577
> 
> 标签：ssis, editor, package, constraints, operator-precedence

我想要一个 SSIS 包，在这种情况下我有两个变量：x=1 和 y=0 和 3 个任务：一个是执行 SQL 任务（任务 A）和两个脚本任务（任务 B 和 C）。我想当我们在任务 A 中选择 x=1 时，任务 B 运行，当在任务 A 中选择 y=0 时，任务 C 运行。在 A 和 BI 之间的优先约束编辑器中选择带有成功值的 Expression 和 Constraint ，在 A 和 CI 之间的优先约束编辑器中选择带有失败值的 Expression 和 Constraint 但我不知道在这些优先约束编辑器中必须写什么表达式。请尊重我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T22:12:21.063

您需要在设计时设置两个包变量来保存 x 和 y。

在 Execute SQL 组件的 General 选项卡中，将结果更改为 SingleRow 并确保查询返回 1 行，其中包含您需要的参数详细信息。转到结果集选项卡并将两个包变量 (x, y) 设置为从查询返回的列。

添加两个工作流，均来自执行 SQL 组件，均成功。对于第一个工作流（转到任务 B），将表达式设置为 @[User::x] == 1。对于第二个工作流（到任务 C），将表达式设置为 @[User::y] == 0 .

如果您希望选项互斥，则必须在每个工作流中包含两个子句（即@[User::x] == 1 && @[User::y] !=0）。您必须计算出所有排列并将它们包含在表达式中以避免两个工作流触发。

# c++ - 奇怪的自发运行崩溃

> ID：13659166
> 
> 赞同：-1
> 
> 时间：2012-12-01T11:50:34.177
> 
> 标签：c++, debugging, crash

我的项目 atm 出现了一些奇怪的错误和崩溃。

它始于我收到此消息的崩溃：

```
terminate called after throwing an instance of 'std::length_error'
  what():  basic_string::_S_create 
```

所以我开始添加一些**cerr << "1"**等来尝试找出它在哪一行崩溃。

现在我找到了崩溃行，尽管它没有打印出相同的错误代码。事实上，它什么也没说，只是崩溃。

导致崩溃的行是这样的：

```
Item* tempItem = new Item(name, id2, desc); 
```

Item.h 构造函数如下所示：

```
Item(std::string name_, int itemId_, std::string description_ = "") 
: name(name_), itemId(itemId_), description(description_){} 
```

我发送的变量如下所示：

```
string name = "Frying pan";
int id2 = 1;
string desc = "It's all rusty"; 
```

有任何想法吗？（如果您需要更多代码，请告诉我您需要什么，我会编辑它）

**编辑** 一些更新的信息：

```
name.max_size() = 1073741820
name.length() = 9

desc.max_size() = 1073741820
desc.length() = 14 
```

**EDIT2** 我现在尝试在构造之前使用硬编码变量值来创建项目对象：

```
name = "itemName";
desc = "itemDesc";
id2 = 2; 
```

它仍然在该行崩溃：

```
Item* tempItem = new Item(name, id2, desc); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:53:27.070

a 的长度是有限制的`std::string`。`std::length_error`超过该长度时抛出。实际限制取决于您的编译器对标准模板库的实现。

从 C++ 标准（19.2.4）：

> 该类`length_error`定义作为异常抛出的对象类型，以报告尝试生成长度超过其最大允许大小的对象。

您可以通过读取 的值来检查允许的最大字符串大小`string::max_size`。

# operating-system - 无操作系统的媒体播放器

> ID：13659170
> 
> 赞同：2
> 
> 时间：2012-12-01T11:50:52.870
> 
> 标签：operating-system, media-player

我和我的一些朋友有这个想法，要创建一个非常基本的媒体播放器，说它只播放 mp3（非常有限的 GUI 显示播放器的控件）。棘手的部分是我们希望在没有任何操作系统的情况下做到这一点。ie 它将直接从引导加载程序加载，我们将从笔式驱动器中读取文件。这是一个可行的项目想法吗？它是一个爱好项目，所以目前没有时间限制。有人可以指导我如何进行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:04:58.473

如果你想从头开始，我只能说祝你好运。Yu 必须编写文件系统驱动程序、声音驱动程序、显示驱动程序、键盘驱动程序、鼠标驱动程序、USB 驱动程序等。这将是大量的工作。

相反，如果您仍然想自己编写诸如 mp3 编解码器之类的东西，您可以，但要在现有的操作系​​统之上进行。如果你愿意，你可以使用 DOS，并且至少有一些内置的东西可以解决。如果我这样做，我会选择嵌入式 Linux + x11。但这是你的选择。

# php - PHP：函数中的变量不起作用

> ID：13659178
> 
> 赞同：2
> 
> 时间：2012-12-01T11:52:00.307
> 
> 标签：php

我正在尝试通过 dns_get_record() 获取域的 dns 记录，但是当插入变量时该函数似乎不起作用..这是我的代码

```
<form action="" method="post">
     <input type="text" name="host" placeholder="Enter IP or Domain"/>
     <select name="dns">
          <option value="DNS_A" selected="selected">A</option>
               ....
          <option value="DNS_ANY">ANY</option>
     </select>
</form>
<?php
$host=$_POST['host'];
$dns=$_POST['dns'];
$type=end(explode('_',$dns));
if ($host==""){
     exit();
}
echo "Results for $host $type record<br />";
$result = dns_get_record($host, $dns);
echo "Result = ";
print_r($result);
?> 
```

但如果我把

```
$result = dns_get_record($host, DNS_A); 
```

代替

```
$result = dns_get_record($host, $dns); 
```

它有效..帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T11:54:43.633

这是因为您的 POST 返回一个文字字符串：“DNS_A”，如果您愿意的话。这与***DNS_A***不同，DNS_A 是一个常量，很可能包含一个整数。

你需要一个映射表。或者直接传递整数值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T11:55:53.167

`DNS_A`是值为 1 的常量，当您传递字符串“DNS_A”时，尝试通过传递常量值，使用`$result = dns_get_record($host, constant($dns));`

# javascript - cloud9 gui是用什么库写的？

> ID：13659179
> 
> 赞同：4
> 
> 时间：2012-12-01T11:52:06.953
> 
> 标签：javascript, html, user-interface, cloud9-ide

我找不到任何关于编写 cloud9 ui 的库的信息。我听说它使用 ui.ajax.org，但它看起来比 ui.ajax.org 示例好得多。这是真的还是在使用另一个库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T02:10:54.063

您可以自己检查源代码：

[https://github.com/ajaxorg](https://github.com/ajaxorg) ,

是的，ajax.org 和 cloud9 似乎是由同一个人制作的。

# c# - 使用代理拦截 C# 中的方法调用

> ID：13659185
> 
> 赞同：4
> 
> 时间：2012-12-01T11:53:15.037
> 
> 标签：c#, .net, marshalling, aop

我想要做的是能够拦截对对象的方法和属性的调用，以解决横切关注点。我正在使用基于代理的 AOP，使用`ContextBoundObject`.

但是这对递归方法调用不起作用，对目标的第一次调用将被代理拦截并成功调用，允许我在这里做横切。但是，第一个方法中的后续方法调用将保留在目标类中，并且**不会被代理拦截**，就好像没有发生封送处理一样！

有什么办法可以让它工作吗？（我试图避免使用 PostSharp、Unity 或 Spring.Net 等第三方库）

```
class Program
{
    static void Main(string[] args)
    {
        var t = new SimpleObject();
        t.TestMethod1();
    }
}

[Intercept]
class SimpleObject : ContextBoundObject
{
    public string TestMethod1()
    {
        return TestMethod2();
    }

    public string TestMethod2()
    {
        return "test";
    }
}

[AttributeUsage(AttributeTargets.Class)]
public class InterceptAttribute : ContextAttribute, IContributeObjectSink
{
    public InterceptAttribute()
        : base("Intercept")
    { }

    public override bool IsContextOK(Context ctx, IConstructionCallMessage ctorMsg)
    {
        return false;
    }

    public IMessageSink GetObjectSink(MarshalByRefObject obj, IMessageSink nextSink)
    {
        return new InterceptSink(nextSink);
    }
}

public class InterceptSink : IMessageSink
{
    public IMessageSink NextSink { get; private set; }

    public InterceptSink(IMessageSink nextSink)
    {
        this.NextSink = nextSink;
    }

    public IMessage SyncProcessMessage(IMessage msg)
    {
        IMethodCallMessage mcm = (msg as IMethodCallMessage);

        // { cross-cut here }

        IMessage rtnMsg = this.NextSink.SyncProcessMessage(msg);
        IMethodReturnMessage mrm = (rtnMsg as IMethodReturnMessage);

        // { cross-cut here }

        return mrm;
    }

    public IMessageCtrl AsyncProcessMessage(IMessage msg, IMessageSink replySink)
    {
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-14T18:09:49.463

C# 设计者从来不赞成 AOP，如果不使用 Proxies 和 Marshaling，就没有简单的方法来拦截方法调用，它们有自己的缺点！如果有人想拦截方法/属性调用（例如横切关注点），我发现`RealProxy`会有一些帮助。

来自 MSDN 的 RealProxy：

> 跨任何类型的远程边界使用对象的客户端实际上是使用对象的透明代理。透明代理提供了实际对象驻留在客户端空间中的错觉。它通过使用远程基础设施将对其进行的调用转发到真实对象来实现这一点。

注意：被代理使用的类型`RealProxy`必须是*接口*或继承自`MarshalByRefObject`.

以下是`RealProxy`使用工厂方法在运行时创建对象代理的一些实现：

```
public abstract class RuntimeProxy
{
    public static readonly object Default = new object();

    public static Target Create<Target>(Target instance, RuntimeProxyInterceptor interceptor) where Target : class
    {
        return (Target)new InternalProxy<Target>(instance, interceptor).GetTransparentProxy();
    }

    public static Target Create<Target>(Target instance, Func<RuntimeProxyInvoker, object> factory) where Target : class
    {
        return (Target)new InternalProxy<Target>(instance, new InternalRuntimeProxyInterceptor(factory)).GetTransparentProxy();
    }

    class InternalProxy<Target> : RealProxy where Target : class
    {
        readonly object Instance;
        readonly RuntimeProxyInterceptor Interceptor;

        public InternalProxy(Target instance, RuntimeProxyInterceptor interceptor)
            : base(typeof(Target))
        {
            Instance = instance;
            Interceptor = interceptor;
        }

        public override IMessage Invoke(IMessage msg)
        {
            var methodCall = (IMethodCallMessage)msg;
            var method = (MethodInfo)methodCall.MethodBase;

            try
            {
                var result = Interceptor.Invoke(new InternalRuntimeProxyInterceptorInvoker(Instance, method, methodCall.InArgs));

                if (result == RuntimeProxy.Default)
                    result = method.ReturnType.IsPrimitive ? Activator.CreateInstance(method.ReturnType) : null;

                return new ReturnMessage(result, null, 0, methodCall.LogicalCallContext, methodCall);
            }
            catch (Exception ex)
            {
                if (ex is TargetInvocationException && ex.InnerException != null)
                    return new ReturnMessage(ex.InnerException, msg as IMethodCallMessage);

                return new ReturnMessage(ex, msg as IMethodCallMessage);
            }
        }
    }

    class InternalRuntimeProxyInterceptor : RuntimeProxyInterceptor
    {
        readonly Func<RuntimeProxyInvoker, object> Factory;

        public InternalRuntimeProxyInterceptor(Func<RuntimeProxyInvoker, object> factory)
        {
            this.Factory = factory;
        }

        public override object Invoke(RuntimeProxyInvoker invoker)
        {
            return Factory(invoker);
        }
    }

    class InternalRuntimeProxyInterceptorInvoker : RuntimeProxyInvoker
    {
        public InternalRuntimeProxyInterceptorInvoker(object target, MethodInfo method, object[] args)
            : base(target, method, args)
        { }
    }
}

public abstract class RuntimeProxyInterceptor
{
    public virtual object Invoke(RuntimeProxyInvoker invoker)
    {
        return invoker.Invoke();
    }
}

public abstract class RuntimeProxyInvoker
{
    public readonly object Target;
    public readonly MethodInfo Method;
    public readonly ReadOnlyCollection<object> Arguments;

    public RuntimeProxyInvoker(object target, MethodInfo method, object[] args)
    {
        this.Target = target;
        this.Method = method;
        this.Arguments = new ReadOnlyCollection<object>(args);
    }

    public object Invoke()
    {
        return Invoke(this.Target);
    }

    public object Invoke(object target)
    {
        if (target == null)
            throw new ArgumentNullException("target");

        try
        {
            return this.Method.Invoke(target, this.Arguments.ToArray());
        }
        catch (TargetInvocationException ex)
        {
            throw ex.InnerException;
        }
    }
} 
```

您可以将其`RuntimeProxy`用作工厂来创建对象的代理并拦截所有方法/属性调用并调用实际方法。

这是一个示例：

```
class SomeClass : MarshalByRefObject
{
    public int Mul(int a, int b)
    {
        return a * b;
    }

    public void SetValue(int val)
    {
        this.Val = val;
    }

    public int Val { get; set; }
} 
```

使用`RuntimeProxy`class 为类的实例创建代理`SomeClass`并拦截调用：

```
var test = new SomeClass();
var proxy = RuntimeProxy.Create(test, t =>
{
    // cross-cut here

    return t.Invoke();          // invoke the actual call
});

var res = proxy.Mul(3, 4);      // method with return value
proxy.SetValue(2);              // void method, setting some property
var val = proxy.Val;            // property access 
```

如果您不想从`MarshalByRefObject`类继承，您可以使用接口类型。

# perl - 如何告诉 perl 打印到文件句柄而不是打印文件句柄？

> ID：13659186
> 
> 赞同：14
> 
> 时间：2012-12-01T11:53:18.253
> 
> 标签：perl

我试图围绕 Perl 处理对`print`.

为什么会这样

```
print $fh $stufftowrite 
```

按预期写入文件句柄，但是

```
print($fh, $stufftowrite) 
```

而是将*文件句柄*写入？`STDOUT`

我的猜测是它与以下文档中的警告有关`print`：

> 注意不要在 print 关键字后面加上左括号，除非您希望相应的右括号终止 print 的参数；在所有参数周围加上括号（或插入一个 + ，但这看起来不太好）。

我应该习惯第一种形式（这对我来说似乎不正确，来自所有在函数参数周围使用括号的语言），还是有办法告诉 Perl 做我想做的事？

到目前为止，我已经在第一个、第二个和两个参数周围尝试了很多括号组合，但没有成功。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-01T12:25:00.753

### 在名单上

该结构的`bareword (LIST1), LIST2`意思是“将函数`bareword`应用于参数`LIST1`”，虽然`bareword +(LIST1), LIST2`可以，但不一定意味着“应用于`bareword`组合列表的参数`LIST1, LIST2`”。这对于分组参数很重要：

```
my ($a, $b, $c) = (0..2);
print ($a or $b), $c;  # print $b
print +($a or $b), $c; # print $b, $c 
```

前缀`+`也可以用来区分 hashrefs 和 block，以及函数和 barewords，例如在下标 hash 时：`$hash{shift}`返回`shift`元素，同时`$hash{+shift}`调用函数`shift`并返回 value 的 hash 元素`shift`。

### 间接语法

在面向对象的 Perl 中，您通常使用箭头语法调用对象上的方法：

```
$object->method(LIST);   # call `method` on `$object` with args `LIST`. 
```

但是，可以但*不*推荐使用将动词放在首位的间接表示法：

```
method $object (LIST);   # the same, but stupid. 
```

因为类只是它们自身的实例（在句法意义上），你也可以在它们上调用方法。这就是为什么

```
new Class (ARGS);  # bad style, but pretty 
```

是相同的

```
Class->new(ARGS);  # good style, but ugly 
```

但是，这有时会混淆解析器，因此不建议使用间接样式。

但它确实暗示了 print 的作用：

```
print $fh ARGS 
```

是相同的

```
$fh->print(ARGS) 
```

实际上，文件句柄`$fh`被视为类的对象[`IO::Handle`](http://search.cpan.org/~gbarr/IO-1.25/lib/IO/Handle.pm)。

（虽然这是一个有效的*句法*解释，但它并不完全正确。它`IO::Handle`本身的源代码使用了这一行`print $this @_;`。打印函数就是这样定义的。）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-01T11:54:38.563

看起来你有一个错字。您在第二个打印语句中的文件句柄和参数之间放置了一个逗号。如果你这样做，文件句柄将被视为一个参数。这似乎只适用于词法文件句柄。如果使用全局文件句柄完成，则会产生致命错误

```
No comma allowed after filehandle at ... 
```

因此，要清楚，如果您绝对必须为您的 加上括号，请`print`执行以下操作：

```
print($fh $stufftowrite) 
```

虽然我个人更喜欢不使用括号，除非我必须这样做，因为它们只会增加混乱。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-01T12:27:16.277

现代 Perl 书在[第 11 章](http://modernperlbooks.com/books/modern_perl/chapter_11.html)（“要避免的事情”）的“间接表示法标量限制”部分中指出：

> 语法的另一个危险是解析器需要一个单一的标量表达式作为对象。打印到存储在聚合变量中的文件句柄似乎很明显，但事实并非如此：

```
# DOES NOT WORK AS WRITTEN
say $config->{output} 'Fun diagnostic message!'; 
```

> Perl 将尝试在 $config 对象上调用 say。 `print`, `close`, 和`say`——所有在文件句柄上运行的内置函数——以间接方式运行。当文件句柄是包全局变量时这很好，但是词法文件句柄（文件句柄[引用](http://modernperlbooks.com/books/modern_perl/chapter_03.html)）使间接对象语法问题变得明显。为了解决这个问题，消除产生预期调用者的子表达式的歧义：

```
say {$config->{output}} 'Fun diagnostic message!'; 
```

当然，`print({$fh} $stufftowrite)`也是可以的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-05T05:22:40.707

`print`这就是定义的语法的方式。真的就是这么简单。没有什么可以解决的。如果在文件句柄和其余参数之间放置逗号，则表达式将被解析为`print LIST`而不是`print FILEHANDLE LIST`. 是的，这看起来真的很奇怪。这*真的*很奇怪。

不被解析为的方法`print LIST`是提供一个可以合法解析为的表达式`print FILEHANDLE LIST`。如果你想要做的是在参数周围加上括号，`print`让它看起来更像一个普通的函数调用，你可以说

```
print($fh $stufftowrite); # note the lack of comma 
```

你也可以说

```
(print $fh $stufftowrite); 
```

如果您尝试做的是`print`从周围的代码中删除表达式。关键是包含逗号会改变解析。

# vb.net - 将 Listview 项目传输到 VB.NET 中的列表框

> ID：13659187
> 
> 赞同：0
> 
> 时间：2012-12-01T11:53:19.997
> 
> 标签：vb.net

我想将 Listview 项及其子项传输到 VB.net 中的列表框。
这是我的代码，但它似乎对我不起作用。在键入语法期间，子项属性无法弹出。我错过了什么吗？

```
ListBox1.Items.Add(Item.Text & " " & Item.SubItems(1).Text & " " & Item.SubItems(2).Text) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:05:21.873

您的代码中如何声明“项目”？

以下工作正常：

```
Dim item As ListViewItem = ListView1.SelectedItems(0)
ListBox1.Items.Add(item.Text & " " & item.SubItems(1).Text & " " & item.SubItems(2).Text) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T11:55:44.903

```
FOR I=0 TO 10 
Dim item As ListViewItem = ListView1.SelectedItems(0)
ListBox1.Items.Add(item.Text & " " & item.SubItems(1).Text & " " & item.SubItems(2).Text)
NEXT 
```

# scala - 如何使用 SORM 在我的模型中包含时间戳（created_at 和 updated_at）？

> ID：13659190
> 
> 赞同：2
> 
> 时间：2012-12-01T11:53:29.967
> 
> 标签：scala, sorm

ActiveRecord 处理时间戳，如下所示：

*   插入数据？created_at 已定义
*   更新数据？updated_at 被重新定义

我将如何使用 SORM 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T13:01:47.250

乍一看，这样的事情可能会起作用：

```
import org.joda.time._
object Db extends Instance (entities = ...) {
  override def save [T <: AnyRef : TypeTag] ( v : T ) 
    = v match {
        case v : Artist with Persisted =>
          super.save( v.copy( updatedAt = DateTime.now() ) )
        case v : Artist =>
          super.save( v.copy( createdAt = DateTime.now() ) )
        // ... so on for other entities
        case v =>
          super.save(v)
      }
} 
```

但是，您将如何从头开始创建这些艺术家实例？应该为这些日期字段分配混乱`null`的 s 或 null ish 日期值，还是应该将它们包裹在`Option`s 中？好吧，其中任何一个都可以解决问题，但这是另一种选择：

```
import org.joda.time._
case class Artist 
  ( name : String, 
    updatedAt : DateTime = DateTime.now(),
    createdAt : DateTime = DateTime.now() )

object Db extends Instance (entities = ...) {
  override def save [T <: AnyRef : TypeTag] ( v : T ) 
    = v match {
        case v : Artist with Persisted =>
          super.save( v.copy( updatedAt = DateTime.now() ) )
        case v =>
          super.save(v)
      }
} 
```

我得告诉你整个问题对我来说不是很自然。我无法想象这种行为会带来什么好处。但话又说回来，我已经向您展示了这些选项。

# algorithm - 从图中删除边后如何更新 MST？

> ID：13659191
> 
> 赞同：3
> 
> 时间：2012-12-01T11:53:40.557
> 
> 标签：algorithm, graph, minimum-spanning-tree, edges

我有一个用邻接列表表示的图，他的 MST 用父数组表示。

我的问题是我需要从图中删除一条边并更新父数组。

我已经设法处理以下情况：

1.  边缘不存在；
2.  边缘在图中但不在 MST 中（MST 不变）；
3.  并且边缘是来自两个节点的唯一路径（在这种情况下，我返回 null，因为图未连接）。

当边缘在 MST 中并且图中的边缘处于循环中时，我该怎么办？我需要在**O(n+m) 复杂性**中做到这一点。

我用红色写边的成本。 ![](../Images/bec19809138a323dc6a2c29c8ea0eae9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T01:16:11.610

只需搜索现在断开连接的树部分到树的其余部分的最小距离路径，然后在中间添加该路径——这是一条边。

假设你的原始树是 T。随着边缘的移除，它现在被分成树 T1 和 T2。

拿其中一个——比如说T2。与 T2 上的节点相连的每条边要么在 T2 上，要么是连接 T2 和 T1 的边。在这些与 T2 上的一个节点相关的边中，选择一个 ( (其另一端位于 T1 节点) 和 (在所有此类边中具有最小成本) )。搜索这条边，比如 e=(u,v)，需要 O(|E|) 时间。O(|N|) 如果分离的部分是叶子。

如果有一棵树，比如 T'，其成本低于 T1 \union T2 \union {e}，那么 T1 和 T2 的节点集 N1 和 N2 将具有比仅一条边更多的互连，

即，T' 上有两条或更多条边，它们从 N1 中的一个节点开始，到 N2 中的一个节点结束。否则，（（T1 和 T2 是最小生成树响应。超过 N1 和 N2）和（e 是 T1 和 T2 之间成本最低的连接））将是错误的。但是，T1 和 T2 之间的任何中间人都比 e=(u,v) 更昂贵——这是矛盾的。

跳过了一些证明细节。希望这可以帮助。

# filter - rsync 复杂过滤器

> ID：13659202
> 
> 赞同：2
> 
> 时间：2012-12-01T11:54:33.943
> 
> 标签：filter, rsync

我是 Unison 的粉丝，但我需要更复杂的过滤器来备份我的笔记本电脑。经过几个小时的尝试，我得到了大部分我想要的东西；这是我的情况：

这是我的 bash 脚本：

```
#!/bin/sh
rsync -aHAXzhv --dry-run \
--progress \
--stats \
--delete \
--prune-empty-dirs \
--filter="merge filter" \
/ /media/mypassport/laptop/ 
```

这是我的过滤器：

```
+ etc
+ etc/apache2
+ etc/apache2/sites-available
+ etc/apache2/sites-available/*

+ home
+ home/ale
+ home/ale/*
+ home/ale/.filezilla/*
+ home/ale/.emacs.d/*
+ home/ale/.evolution/*
+ home/ale/.mozilla/*
+ home/ale/.ssh/*
+ home/ale/.subversion/*
+ home/ale/.unison/*

+ root
+ root/*
+ root/.c/*

+ usr/
+ usr/local/
+ usr/local/*

+ var/
+ var/www
+ var/www/*

+ *.git/***
+ *.svn/***
+ *.cvs/***

- etc/*
- etc/apache2/*

- home/ale/.** # this exclude hidden folder in ale's home

- var/*

- root/.**
- lib64
- initrd.img.old
- initrd.img
- vmlinuz
- vmlinuz.old

- *~
- .*~
- *.o
- *.tmp
- .*
- */ 
```

我希望能够排除主文件夹中的所有隐藏文件，并以这种方式仅包含其中的几个：

```
+ home/*/.bashrc
- home/*/.* 
```

但它不起作用。

任何帮助，将不胜感激。

此致

谢谢

# javascript - 顶点 3.2 中的动态验证

> ID：13659203
> 
> 赞同：1
> 
> 时间：2012-12-01T11:54:34.803
> 
> 标签：javascript, oracle-apex

我在 APEX 3.2 中有不同的字段，边距是根据用户输入的值计算的。如何进行保证金验证？例如，假设边距小于零，用户应该在按钮单击时弹出警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:33:43.587

另请参阅此问题：[APEX 3.2 (Oracle)：在更改项目时动态填充页面上其他项目的值](https://stackoverflow.com/questions/13648314/apex-3-2-oracle-on-change-of-an-item-dynamically-populates-the-values-of-othe)
我不是 3.2 向导，但我会尽力提供帮助。

创建一个名为“calculate_margin”的应用程序进程

```
DECLARE
   lMargin NUMBER;
BEGIN
   lMargin := :P8_ITEM1 + :P8_ITEM2 + :P8_ITEM3;

   IF lMargin < 0 THEN
      htp.p('{"result":"nok", "message":"margin is less than zero!"}');
   ELSE
      htp.p('{"result":"ok", "message":"margin is ok"}');
   END IF;      
END; 
```

将此javascript代码放在您的页面上。如果您没有 javascript 部分，请将其放在`<script type="text/javascript"></script>`标签之间。

```
function checkMargin(){
   $.post('wwv_flow.show', 
          {"p_request"      : "APPLICATION_PROCESS=calculate_margin",
           "p_flow_id"      : $v('pFlowId'),
           "p_flow_step_id" : '0',
           "p_instance"     : $v('pInstance'),
           "p_arg_names"    : ['P8_ITEM1','P8_ITEM2','P8_ITEM3'],
           "p_arg_values"   : [$('#P8_ITEM1').val(),$('#P8_ITEM2').val(),$('#P8_ITEM3').val()]},
           function(data){
              if(data){
                 var lReturn = $.parseJSON(data);
                 if(lReturn.result=='ok'){
                    //you could do something here 
                 } else {
                    alert(lReturn.message);
                 };
              };
           }
   );
}; 
```

现在转到按钮。如果这是您在 apex 中定义的按钮，请将其更改为指向 URL，并在 URL 中输入：

```
javascript:checkMargin(); 
```

# html - "background-size:cover" 不覆盖手机屏幕

> ID：13659204
> 
> 赞同：18
> 
> 时间：2012-12-01T11:54:34.783
> 
> 标签：html, background, media-queries, css

我的网站上有一张照片背景，使用`background-size:cover`. 它在大多数情况下都有效，但在我的 Galaxy S3 纵向模式下会留下一个奇怪的~30px 空白区域。

我附上了截图。1px 青色线是为了说明整个屏幕。似乎背景在社交媒体之后立即停止`ul`。

我通过删除`ul`和背景将其自身附加到标语文本的底部来测试这一点。

![问题截图](../Images/d3fa3f517f65af750ebd0b5c94578ecb.png)

另外，这是我的与移动肖像视图相关的 CSS：

```
@media only screen and (max-width: 480px) {

.logo {
    position: relative;
    background-size:70%;
    -webkit-background-size: 70%;
    -moz-background-size: 70%;
    -o-background-size: 70%;
    margin-top: 30px;
}   

h1 {
    margin-top: -25px;
    font-size: 21px;
    line-height: 21px;
    margin-bottom: 15px;
}

h2 {
    font-size: 35px;
    line-height: 35px;
}

.footer_mobile {
    display: block;
    margin-top: 20px;
    margin-bottom: 0px;
}

li {
    display: block;
    font-size: 1.3em;
} 
```

这过去不会发生，但我想我在尝试解决另一个问题时不小心弄错了它。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-01T19:47:15.873

经过数小时尝试不同的事情，添加到为我工作的`min-height: 100%;`底部。`html``{ background:... }`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-06T04:57:40.387

这适用于 Android 4.1.2 和 iOS 6.1.3 (iPhone 4) 和桌面交换机。为响应式网站编写。

以防万一，在您的 HTML 头中，如下所示：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"/> 
```

HTML：

```
<div class="html-mobile-background"></div> 
```

CSS：

```
html {
    /* Whatever you want */
}
.html-mobile-background {
    position: fixed;
    z-index: -1;
    top: 0;
    left: 0;
    width: 100%;
    height: 125%; /* To compensate for mobile browser address bar space */
    background: url(/images/bg.jpg) no-repeat; 
    background-size: 100% 100%;
}

@media (min-width: 600px) {
    html {
        background: url(/images/bg.jpg) no-repeat center center fixed; 
        background-size: cover;
    }
    .html-mobile-background {
        display: none;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T12:12:39.990

Galaxy S3 在纵向或横向视图中的宽度都大于 480 像素，因此我认为这些 CSS 规则不适用。您将需要使用 720 像素。

尝试添加：

```
* { background:transparent } 
```

就在最后&`html { background:... }`之后移动你的CSS。

通过这种方式，您可以查看是否有移动页脚 div 或您创建的任何其他元素阻碍了视图。

此外，我会尝试将背景 CSS 应用于正文而不是 HTML。希望你离答案越来越近。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-05T19:32:44.643

当前的解决方案是使用视口高度 (vh) 来指示所需的高度。100% 不适用于移动 Chrome。CSS：

```
background-size: cover;
min-height: 100%; 
```

# debugging - Prolog 调试模式 - Last Call 优化

> ID：13659212
> 
> 赞同：3
> 
> 时间：2012-12-01T11:56:13.027
> 
> 标签：debugging, prolog

所以 Prolog 解释器实现了 Last Call Optimization - 就像......

```
length([], Acc, Acc).
length([_|T], Acc, X) :- NewAcc is Acc+1, length(T, NewAcc, X). 
```

可以在 O(1) 空间中调用。

但是，如果我进入调试模式 - 这将被禁用。

我的问题只是“为什么？”。这肯定会破坏调试的全部意义吗？我们再也看不到程序正在正确执行的操作...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-18T09:15:19.620

它宁可选择点消除而不是最后调用优化。如果调试器要服务于 Byrds box 模型的所有端口，即：

```
 +--------+
   Call ->|        |-> Exit
          |        |
   Fail <-|        |<- Redo
          +--------+ 
```

他需要额外的选择点。所以我想这不仅是最后一次调用优化，还有选择点优化，在调试过程中会落空。

在 length/2 示例中，当您在实例化第一个参数的情况下调用 length/2 时，可以通过索引消除选择点。

有一些调试器，例如 SWI-Prologs 调试器，它在某种程度上遵循普通解释器的选择点消除。所以在 SWI-Prolog 中你不会总是看到所有的端口。

再见

# c++ - 蹩脚的 wav 到数组并使用 c/c++ 返回到 wav

> ID：13659213
> 
> 赞同：1
> 
> 时间：2012-12-01T11:56:18.963
> 
> 标签：c++, c, encoding, wav, lame

我可以将 wav 文件转换为简单的 c double 或 int 数组并转换回新的 wav 文件吗？我想在 wav 文件中使用一些 c 过滤器。我认为跛脚是可能的。但我不知道怎么做。有人可以链接一些文档或代码片段，我该如何使用它？

wav 文件 -> 数组 -> 一些操作 -> wav 文件

谢谢你的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T11:59:42.717

这与跛脚无关。Lame 是一种用于编码 MP3 文件的工具。

有许多用于读取和写入 WAV 文件的库。您甚至可以自己编写，但这很不方便，因为 WAV 文件有很多不同的样本格式：8 位、16 位、24 位、浮点、ADPCM、µlaw 等。

您可以使用[libsndfile](http://www.mega-nerd.com/libsndfile/)来读取 WAV 文件。

# WAV 文件中的字段没有固定的偏移量

这是粗体+大的原因是因为很多人认为WAV文件中的数据总是以44字节开始。这是不正确的。WAV 文件是 RIFF 文件，可以包含任意数量的数据块，其中一个*或多个*包含样本数据。您无法处理深奥的 WAV 文件是可以原谅的，但如果您对文件中数据的位置做出假设，您最终可能会得到垃圾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:05:14.497

是的，这是可能的。Wav 格式非常明确，它通常使用 2 个 16 位样本的通道。这些可以精确地表示为整数、浮点数和双精度数。

正如*simonc*在评论中所说，典型的格式非常简单，学习使用库真的不值得。如果 wav 的长度没有改变，转换/过滤可以简单地通过：

```
fread(header,1,44,in_file); fwrite(header,1,44,out_file);
short int block[1024];  // left and right channel will be interleaved.
while (c=fread(block, 2, 1024, fp))
{  
    filter_in_place(block,c); 
    fwrite(block, 2,c, out_file);
} 
```

# highcharts - highcharts 使用 ajax 测量实时数据

> ID：13659214
> 
> 赞同：2
> 
> 时间：2012-12-01T11:56:20.663
> 
> 标签：highcharts

我在我的项目中使用[了 highcharts](http://www.highcharts.com)库，我必须每 1 秒使用 PHP 文件创建的数据更新 Gauge。

highcharts [Gauge Example](http://www.highcharts.com/demo/gauge-speedometer) 有一些代码让它每 1 秒触发一次，但我找不到像[This Link](http://www.highcharts.com/studies/live-server.htm)这样的东西来使用 Ajax Technic 从 PHP 文件中获取数据。

任何人都知道实现这个场景并将 Ajax 应用于这个图表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:10:53.900

您没有找到示例，因为它是通用的，请查看如何使用`$.post()`：

[http://jsfiddle.net/oceog/zpwdp/](http://jsfiddle.net/oceog/zpwdp/)

```
$(function () {

    var chart = new Highcharts.Chart({

        chart: {
            renderTo: 'container',
            type: 'gauge',
            plotBackgroundColor: null,
            plotBackgroundImage: null,
            plotBorderWidth: 0,
            plotShadow: false
        },

        title: {
            text: 'Speedometer'
        },

        pane: {
            startAngle: -150,
            endAngle: 150,
            background: [{
                backgroundColor: {
                    linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
                    stops: [
                        [0, '#FFF'],
                        [1, '#333']
                    ]
                },
                borderWidth: 0,
                outerRadius: '109%'
            }, {
                backgroundColor: {
                    linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
                    stops: [
                        [0, '#333'],
                        [1, '#FFF']
                    ]
                },
                borderWidth: 1,
                outerRadius: '107%'
            }, {
                // default background
            }, {
                backgroundColor: '#DDD',
                borderWidth: 0,
                outerRadius: '105%',
                innerRadius: '103%'
            }]
        },

        // the value axis
        yAxis: {
            min: 0,
            max: 200,

            minorTickInterval: 'auto',
            minorTickWidth: 1,
            minorTickLength: 10,
            minorTickPosition: 'inside',
            minorTickColor: '#666',

            tickPixelInterval: 30,
            tickWidth: 2,
            tickPosition: 'inside',
            tickLength: 10,
            tickColor: '#666',
            labels: {
                step: 2,
                rotation: 'auto'
            },
            title: {
                text: 'km/h'
            },
            plotBands: [{
                from: 0,
                to: 120,
                color: '#55BF3B' // green
            }, {
                from: 120,
                to: 160,
                color: '#DDDF0D' // yellow
            }, {
                from: 160,
                to: 200,
                color: '#DF5353' // red
            }]        
        },

        series: [{
            name: 'Speed',
            data: [80],
            tooltip: {
                valueSuffix: ' km/h'
            }
        }]

    }, 
    // Add some life
    function (chart) {
        setInterval(function () {
            $.post('/echo/json/',{
                   json: JSON.stringify({
                   //This is just a sample data, see comments after code to real world usage
                   inc: Math.round((Math.random() - 0.5) * 20)
                   })},
            function(data) {
            var point = chart.series[0].points[0],
                newVal,
                inc = data.inc;

            newVal = point.y + inc;
            if (newVal < 0 || newVal > 200) {
                newVal = point.y - inc;
            }

            point.update(newVal);
        },"json");
        }, 3000);
      });
    });​ 
```

在现实世界中，您使用类似

```
$.post('new_data.php',{last_time: last_time},function(data) { 
   //set point here

},"json") 
```

在 new_data.php 你做类似的事情

```
$data=get_data($last_time);
echo json_encode($data);
exit; 
```

# python - python sqlite3选择变量

> ID：13659215
> 
> 赞同：0
> 
> 时间：2012-12-01T11:56:32.823
> 
> 标签：python, variables, sqlite

我正在尝试在 sqlite3 语句中选择 3 个变量。并将其放入 3 个 python 变量中，无法使其工作..

```
knifekingdb.execute("SELECT rank, rounds, date FROM  knifekingdb WHERE steamid = ?", steamid) 
```

我可以通过将该语句分配给 python 变量将其放入一个列表中。但我不知道如何将整数和字符串列表拆分为不同的变量。

你能帮帮我吗，因为我有点卡住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:40:15.010

```
knifekingdb.execute(
    """SELECT rank, rounds, date 
       FROM  knifekingdb WHERE steamid = ? LIMIT 1""", steamid)
try:
    rank, rounds, date = knifekingdb.fetchone()
except TypeError:
    # fetchone returned None because no row was found
    # handle error here
    raise 
```

# iphone - 分享到社交 iphone 原生代码

> ID：13659216
> 
> 赞同：1
> 
> 时间：2012-12-01T11:56:41.713
> 
> 标签：iphone, cordova, share

我想从我的 phonegap 应用程序将消息分享到社交网络。对于那个我正在为 iphone 和 android 创建插件。

我找到了android的代码：

```
String message = "Text I wan't to share."
Intent share = new Intent(Intent.ACTION_SEND);
share.setType("text/plain");
share.putExtra(Intent.EXTRA_TEXT, message);

startActivity(Intent.createChooser(share, "Title of the dialog the system will open")); 
```

但是我找不到iphone的代码..你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:00:10.957

共享`Intent`是 Android SDK 的一部分，而不是 iOS！iOS 不存在这样的情况，您只需要单独集成每个社交网络。

你可能想看看[这个](https://developers.facebook.com/blog/post/2012/09/25/facebook-sdk-for-ios-and-the-ios-6-facebook-integration/)和[这个](https://dev.twitter.com/docs/ios)关于 facebook 和 twitter 的集成，因为它们现在是 iOS 的一部分（Twitter 被集成到 iOS 5 中，Facebook 被集成到 iOS 6 中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T12:35:13.753

您可以使用Phonegap 团队授权的[FacebookConnect插件。](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/FacebookConnect)

*   这个插件提供了一种在 Cordova 中使用 Facebook Graph API 的简单方法。
*   该插件是为带有 ARC 的 Cordova >= v2.1.0 构建的。iOS 和 Android 都支持相同的 javascript 界面。

使用也可以使用 Dave johnson 的[插件](https://github.com/davejohnson/phonegap-plugin-facebook-connect)，这个也支持 iOS 和 Android 平台。

# java - Enum 的 values() 方法的文档在哪里？

> ID：13659217
> 
> 赞同：184
> 
> 时间：2012-12-01T11:57:06.757
> 
> 标签：java, enums

我将枚举声明为：

```
enum Sex {MALE,FEMALE}; 
```

然后，迭代枚举，如下所示：

```
for(Sex v : Sex.values()){
    System.out.println(" values :"+ v);
} 
```

我检查了 Java API 但找不到 values() 方法？我很好奇这个方法是从哪里来的？

API 链接： [https ://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html](https://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html)

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2012-12-01T11:58:49.383

您在 javadoc 中看不到此方法，因为它是由编译器添加的。

记录在三个地方：

*   [枚举类型](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)，来自 Java 教程

> 编译器在创建枚举时会自动添加一些特殊方法。例如，它们有一个静态值方法，该方法返回一个数组，该数组按照声明的顺序包含枚举的所有值。此方法通常与 for-each 构造结合使用，以迭代枚举类型的值。

*   [`Enum.valueOf`](http://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html#valueOf(java.lang.Class,%20java.lang.String))类（方法描述中提到了
    特殊的隐式方法）`values``valueOf`

> 枚举类型的所有常量都可以通过调用该类型的隐式 public static T[] values() 方法获得。

*   [枚举类型，第 8.9 节](http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.9)，[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se8/html/index.html)

该`values`函数只是列出枚举的所有值。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-12-01T12:00:59.863

该方法是隐式定义的（即由编译器生成）。

从[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.2)：

> 此外，如果`E`是`enum`类型的名称，则该类型具有以下隐式声明的`static`方法：
> 
> ```
> /**
> * Returns an array containing the constants of this enum 
> * type, in the order they're declared.  This method may be
> * used to iterate over the constants as follows:
> *
> *    for(E c : E.values())
> *        System.out.println(c);
> *
> * @return an array containing the constants of this enum 
> * type, in the order they're declared
> */
> public static E[] values();
> 
> /**
> * Returns the enum constant of this type with the specified
> * name.
> * The string must match exactly an identifier used to declare
> * an enum constant in this type.  (Extraneous whitespace 
> * characters are not permitted.)
> * 
> * @return the enum constant with the specified name
> * @throws IllegalArgumentException if this enum type has no
> * constant with the specified name
> */
> public static E valueOf(String name); 
> ```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-01T17:28:34.183

运行这个

```
 for (Method m : sex.class.getDeclaredMethods()) {
        System.out.println(m);
    } 
```

你会看见

```
public static test.Sex test.Sex.valueOf(java.lang.String)
public static test.Sex[] test.Sex.values() 
```

这些都是“sex”类拥有的公共方法。它们不在源代码中，javac.exe 添加了它们

笔记：

1.  永远不要使用 sex 作为类名，很难阅读您的代码，我们在 Java 中使用 Sex

2.  当遇到像这样的 Java 难题时，我建议使用字节码反编译器工具（我使用 Andrey Loskutov 的字节码大纲 Eclispe 插件）。这将显示类中的所有内容

# ssl - 如何在 AFNetworking 中分配 .cer 文件？

> ID：13659218
> 
> 赞同：6
> 
> 时间：2012-12-01T11:57:29.940
> 
> 标签：ssl, https, afnetworking

我正在使用 AFNetworking 开发建立 HTTPS 连接的 iPhone 应用程序，我想使用我可以定义的自签名证书或受信任证书，但我在 AFNetworking 中找不到任何功能（API）可以做到这一点。

我看到了这个页面：[How to use NSURLConnection to connect with SSL for an untrusted cert?](https://stackoverflow.com/questions/933331/how-to-use-nsurlconnection-to-connect-with-ssl-for-an-untrusted-cert/2033823#2033823) .但我想知道如何分配一个cer文件？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-04T15:10:35.823

好吧，为了简单起见，请按照以下步骤操作

1.  **将您的 .cer 文件复制到您的项目包中**

2.  **假设您正在使用**

    `AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] init...`

    在该行之后调用以下内容：

    `[operation setSSLPinningMode:AFSSLPinningModeCertificate]`

这将指示 AF 进行证书固定，无需设置任何其他内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-07T10:13:29.920

只需将 cer 文件复制到项目包中即可。在`AFURLConnectionOperation.m`文件中，第 215 行：

`NSArray *paths = [bundle pathsForResourcesOfType:@"cer" inDirectory:@"."];`

它将自动分配 cer 文件。

并确保 Prefix.pch 具有以下内容：

```
#define _AFNETWORKING_PIN_SSL_CERTIFICATES_ 
```

和

```
#define _AFNETWORKING_ALLOW_INVALID_SSL_CERTIFICATES_ 
```

如果证书不受信任。

# .net - WPF 日历可见日期

> ID：13659219
> 
> 赞同：0
> 
> 时间：2012-12-01T11:57:35.953
> 
> 标签：.net, wpf, user-interface, wpf-controls

快速提问：我有一个绑定到 DateTime 值的 Calendar 的 SelectedDate 属性。但是，无论当前的 SelectedDate 值是多少，**日历都会默认显示带有今天日期的“页面” 。**So when the selected date is, let's say, in 1989, I have to navigate to that year manually to see that the correct date is actually selected. 每当数据绑定机制更新 SelectedDate 时，**如何使其自动跳转到具有所选日期的相关“页面” ？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T14:16:00.427

显示日期

[Calendar.DisplayDate 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.calendar.displaydate%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-18T13:35:34.980

如果您要绑定到 Calendar.DisplayDate 属性并希望使用 SelectedDate，那么您需要使用 OneWay 绑定。

# php - 需要在另一个页面中使用变量

> ID：13659223
> 
> 赞同：-1
> 
> 时间：2012-12-01T11:57:49.940
> 
> 标签：php

> **可能重复：**
> [PHP 将变量传递到下一页](https://stackoverflow.com/questions/871858/php-pass-variable-to-next-page)

是否可以在另一个页面上使用超级全局变量。基本上我有两个页面form.php 和search.php。我在点击提交按钮时使用 ajax 调用 search.php，我也在使用方法 post 并且没有操作。如果我尝试在 form.php 中的 search.php 中使用超级全局变量，那么它会为未定义的变量提供错误。我不想使用会话、cookie 或 $_get。我必须使用这些变量从 MySQL 中获取数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:58:58.200

代替全局变量，您可以使用会话变量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T12:01:00.707

您必须在另一个页面中包含一个页面或使用您的变量创建第三页。
或者你只是使用会话超全局。

# javascript - 拆分字符串并将其传递给函数

> ID：13659225
> 
> 赞同：0
> 
> 时间：2012-12-01T11:57:58.637
> 
> 标签：javascript, node.js

我在尝试将字符串对象传递给函数时遇到了一些麻烦。在 url 的查询字符串中，我传递字段，这是一个逗号分隔的字符串，包含感兴趣的属性。

我将这些属性的名称放在字段数组中。但是现在我无法将该信息传递给函数。

在 query.pluck('id', 'name') 下面的代码中，query.pick(fieldString) 没有。

我被困在这个问题上，如何将字段数组中的属性名称传递给函数以便它可以工作？

请指教。

```
 var log = require('logule').init(module,'query');
 var url = require('url');

 module.exports = {

   build : function(req, entity, callback) {
     var isCollection;
     isCollection = req.params.id? false: true;
     var query = req.rethink.table(entity);
     parsedUrl = url.parse(req.url, true);

     console.log(isCollection);

     if (parsedUrl.query.fields) {
       var fields = parsedUrl.query.fields.split(',');
       var total = fields.length;

       fieldString = fields[0]; 
       for (var i = 1; i < total; i++) {
         fieldString += ', ' + fields[i];
       }

       if (isCollection) {
         var query = query.pluck('id', 'name');      
       } else {
         var query = query.get(req.params.id).pick( fieldString );
       }
     }

     return callback(null, query);
   }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:24:13.657

您不需要将字段放在字符串中，只需使用

```
var query = query.get(req.params.id).pick.apply(this,fields); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-01T12:01:37.913

您需要使用带有函数名称的“应用”函数和一组参数（在您的情况下为字段）

var query = query.get(req.params.id).apply('pick', fields);

# language-agnostic - 跟踪分代 GC 如何确定年轻代中的垃圾？

> ID：13659226
> 
> 赞同：3
> 
> 时间：2012-12-01T11:58:10.157
> 
> 标签：language-agnostic, garbage-collection

假设我们有一个简单的分代 GC，只有两代，“老”代（至少在一次收集中幸存的对象）和“年轻”代（新分配的）。*那么，如果不*从根部跟踪整个引用图，GC 究竟如何确定一个“年轻”对象是垃圾呢？或者换一种说法：当只收集“年轻”一代时，GC 选择什么作为跟踪的根？

我对通用方法感兴趣，但也对现有实现的特定示例感兴趣。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T12:29:51.647

有一些技术可以归结为维护哪些老一代对象（或老一代内存范围）可能包含对年轻对象的引用的知识。

我能想到的几乎所有实现都通过添加写屏障来保持这些知识。当年轻代引用存储在老代对象中时，这些写屏障触发，从而导致执行一个记住新引用的小代码片段。

为了存储这些知识，一些 GC 使用[card marking](http://blogs.msdn.com/b/abhinaba/archive/2009/03/02/back-to-basics-generational-garbage-collection.aspx)，其中使用紧凑的位图将小的内存块标记为“包含对年轻代的引用”。其他人维护明确的“记忆集”，它对单个对象做类似的事情。在这两种情况下，年轻一代的集合然后将（由卡表标记的记忆集/内存块）中的对象添加到根。

至于具体实现：

*   Mono 使用[记忆集](http://www.mono-project.com/Generational_GC)。
*   PyPy 有几个 GC，最新和最闪亮的 ( [Minimark](https://pypy.readthedocs.org/en/latest/garbage_collection.html#minimark-gc) ) 使用[记忆集](https://bitbucket.org/pypy/pypy/src/42c0d1650cf4/pypy/rpython/memory/gc/minimark.py?at=default#cl-1005)，并为*单个大型数组*添加了卡片标记。
*   .NET 使用[卡片标记](http://msdn.microsoft.com/en-us/library/ms973837.aspx)。

# ios - 安装 RestKit 的问题 - RKURL 未声明的标识符

> ID：13659228
> 
> 赞同：1
> 
> 时间：2012-12-01T11:58:26.133
> 
> 标签：ios, cocoa-touch, restkit

通过命令行 git 将 RestKit 安装到我的 Xcode 4.5.2 项目中。

按照 T 的所有安装说明进行操作。出现了一些问题

1.  当我尝试将库链接到二进制文件并选择 libRestKit.a 时，.. libRestKit.a 显示为红色。

2.  当我尝试在我的项目中使用 RestKit 时，我导入了 RestKit.h，它构建得很好。IDE 看到一大堆 RK* 类。但是，每当我尝试创建 RKURL 的实例时，它都会给我一个未声明的标识符。

有人有任何线索吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:18:30.487

1.  我推荐你使用[CocoaPods](http://cocoapods.org/)来管理你的库。CocoaPods 将通过神奇地为您安装和维护库来挽救您的生命，因此您不会面临将库链接到二进制文件的问题。

2.  如果你想使用 RKURL，你必须将你的 RestKit 降级到 v0.10.3。v0.20.0 中没有“RKURL”。如果您使用 CocoaPods 来维护库，则可以在 Podfile 中分配版本：`pod 'RestKit', '~> 0.10.3'`

# android - Android单选按钮显示基于radioButton的东西给出了onClick错误

> ID：13659229
> 
> 赞同：2
> 
> 时间：2012-12-01T11:58:35.750
> 
> 标签：android, onclick, radio-button

我是 android 编程和构建我的第一个应用程序的新手。它应该根据 RadioGroup 中选择的内容显示关于两个数字的消息。我的问题是我在单击“查找”按钮时不断出错，与onClick有关。

```
public void onCheckedChanged(RadioGroup radio, int checkedId) {
    count = checkedId;
}
public void executa(View v){
       RadioButton radioButton1=(RadioButton) findViewById(R.id.radioButton1);
       RadioButton radioButton2=(RadioButton) findViewById(R.id.radioButton2);
       RadioButton radioButton3=(RadioButton) findViewById(R.id.radioButton3);
       RadioButton radioButton4=(RadioButton) findViewById(R.id.radioButton4);
       Button button=(Button) findViewById(R.id.button); 
     RadioGroup radio=(RadioGroup) findViewById(R.id.radio);
    if (v.getId() == R.id.button){
    count = radio.getCheckedRadioButtonId();
    EditText editText1 = (EditText) findViewById(R.id.Text1);
       int nr1=Integer.getInteger(editText1.getText().toString());  
       EditText editText2 = (EditText) findViewById(R.id.Text2);
       int nr2=Integer.getInteger(editText2.getText().toString());  

       pozitive=0;

       negative=0;

       if (nr1==nr2) max=min=-1; else
       if (nr1>nr2){  max=nr1;
                                   min=nr2;}
       else {  max=nr2;
           min=nr1;}
      if (nr1>0) pozitive++;
                else negative--;
      if (nr2>0) pozitive++;
        else negative--;

    Intent intent=new Intent(this,Raspuns.class);
    switch(count){
    case 1:intent.putExtra(Valoare, max);
    break;
    case 2:intent.putExtra(Valoare, min);
    break;
    case 3:intent.putExtra(Valoare, pozitive);
    break;
    case 4:intent.putExtra(Valoare, negative);
    break;
    }
    startActivity(intent);  
}
}
 @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

 }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return false;
        }

} 
```

此外，消息是通过意图发送到第二个活动的，从执行程序调用，通过单击 afla 按钮。感谢您的任何建议！编辑：logcat：

```
12-02 00:12:11.788: E/AndroidRuntime(3524): FATAL EXCEPTION: main
12-02 00:12:11.788: E/AndroidRuntime(3524): java.lang.IllegalStateException: Could not execute method of the activity
12-02 00:12:11.788: E/AndroidRuntime(3524):     at android.view.View$1.onClick(View.java:3044)
12-02 00:12:11.788: E/AndroidRuntime(3524):     at android.view.View.performClick(View.java:3511)
12-02 00:12:11.788: E/AndroidRuntime(3524):     at android.view.View$PerformClick.run(View.java:14109)
12-02 00:12:11.788: E/AndroidRuntime(3524):     at android.os.Handler.handleCallback(Handler.java:605)
12-02 00:12:11.788: E/AndroidRuntime(3524):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-02 00:12:11.788: E/AndroidRuntime(3524):     at android.os.Looper.loop(Looper.java:137)
12-02 00:12:11.788: E/AndroidRuntime(3524):     at android.app.ActivityThread.main(ActivityThread.java:4424)
12-02 00:12:11.788: E/AndroidRuntime(3524):     at java.lang.reflect.Method.invokeNative(Native Method)
12-02 00:12:11.788: E/AndroidRuntime(3524):     at java.lang.reflect.Method.invoke(Method.java:511)
12-02 00:12:11.788: E/AndroidRuntime(3524):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-02 00:12:11.788: E/AndroidRuntime(3524):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-02 00:12:11.788: E/AndroidRuntime(3524):     at dalvik.system.NativeStart.main(Native Method)
12-02 00:12:11.788: E/AndroidRuntime(3524): Caused by: java.lang.reflect.InvocationTargetException
12-02 00:12:11.788: E/AndroidRuntime(3524):     at java.lang.reflect.Method.invokeNative(Native Method)
12-02 00:12:11.788: E/AndroidRuntime(3524):     at java.lang.reflect.Method.invoke(Method.java:511)
12-02 00:12:11.788: E/AndroidRuntime(3524):     at android.view.View$1.onClick(View.java:3039)
12-02 00:12:11.788: E/AndroidRuntime(3524):     ... 11 more
12-02 00:12:11.788: E/AndroidRuntime(3524): Caused by: java.lang.NullPointerException
12-02 00:12:11.788: E/AndroidRuntime(3524):     at com.example.myfirstrealandroidapp.MainActivity.executa(MainActivity.java:48)
12-02 00:12:11.788: E/AndroidRuntime(3524):     ... 14 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:12:56.673

```
 RadioButton radioButton1=(RadioButton) findViewById(R.id.radioButton1);

   RadioButton radioButton2=(RadioButton) findViewById(R.id.radioButton2);

   RadioButton radioButton3=(RadioButton) findViewById(R.id.radioButton3);
   RadioButton radioButton4=(RadioButton) findViewById(R.id.radioButton4);
   Button button=(Button) findViewById(R.id.button); 
   RadioGroup radio=(RadioGroup) findViewById(R.id.radio);
    radio.setOnCheckedChangeListener(new OnCheckedChangeListener() {

    public void onCheckedChanged(RadioGroup group, int checkedId) {
        // TODO Auto-generated method stub
        count = checkedId;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:33:55.623

感谢您的输入！我的应用程序的错误似乎是我使用`"Integer.getInt`了 " 而不是 " `Integer.parseInt"`。此外，当我使用收音机监听器和按钮时，它给出了正确的答案

# mysql - MYSQL 触发器上的语法错误

> ID：13659234
> 
> 赞同：2
> 
> 时间：2012-12-01T11:59:31.087
> 
> 标签：mysql

我的 MYSQL 触发器出现错误。我使用了各种形式的语法，我在这里和互联网上的其他地方都找到了，但似乎没有任何效果。以下是我使用的 3 个语法示例：

```
>         CREATE TRIGGER LOG_UPDATE BEFORE UPDATE ON WORKLOG
>     FOR EACH ROW BEGIN
>       INSERT INTO WORKLOG_BACKUP VALUES(NULL, CURRENT_TIMESTAMP, NEW.LOGNO, NEW.JOBNO, NEW.EMPLOYEENO, NEW.WORKDATE, NEW.WORKTIME,
> 'UPDATE');    
>     END;
>     
>     CREATE TRIGGER LOG_UPDATE BEFORE UPDATE ON WORKLOG
>     FOR EACH ROW BEGIN
>       UPDATE WORKLOG_BACKUP SET BACKUPSTAMP = CURRENT_TIMESTAMP,
>       UPDATE WORKLOG_BACKUP SET LOGNO = NEW.LOGNO,
>       UPDATE WORKLOG_BACKUP SET JOBNO = NEW.JOBNO,
>       UPDATE WORKLOG_BACKUP SET EMPLOYEENO = NEW.EMPLOYEENO,
>       UPDATE WORKLOG_BACKUP SET WORKDATE = NEW.WORKDATE,
>       UPDATE WORKLOG_BACKUP SET WORKTIME = NEW.WORKTIME,
>       UPDATE WORKLOG_BACKUP SET CAUSE = 'UPDATE'; 
>     END;
>     
>     CREATE TRIGGER LOG_UPDATE BEFORE UPDATE ON WORKLOG
>     FOR EACH ROW BEGIN
>       INSERT INTO WORKLOG_BACKUP VALUES(
>       SET BACKUPSTAMP = CURRENT_TIMESTAMP,
>       SET LOGNO = NEW.LOGNO,
>       SET JOBNO = NEW.JOBNO,
>       SET EMPLOYEENO = NEW.EMPLOYEENO,
>       SET WORKDATE = NEW.WORKDATE,
>       SET WORKTIME = NEW.WORKTIME,
>       SET CAUSE = 'UPDATE');  
>     END; 
```

我会感谢任何人可以提供的任何帮助。我正在使用 phpmyadmin。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T12:13:35.633

为了让您的 MySQL 客户端不将`;`终止`INSERT`语句的 解释为语句的结尾`CREATE TRIGGER`，您必须通知它您希望使用其他语句分隔符。

在[`mysql`](http://dev.mysql.com/doc/en/mysql.html)命令行客户端中，您可以使用`DELIMITER` [命令](http://dev.mysql.com/doc/en/mysql-commands.html)来执行此操作。例如，要将语句分隔符更改为双分号：

```
DELIMITER ;; 
```

然后你可以这样做：

```
CREATE TRIGGER LOG_UPDATE BEFORE UPDATE ON WORKLOG FOR EACH ROW BEGIN
  INSERT INTO WORKLOG_BACKUP VALUES (
    NULL,
    CURRENT_TIMESTAMP,
    NEW.LOGNO,
    NEW.JOBNO,
    NEW.EMPLOYEENO,
    NEW.WORKDATE,
    NEW.WORKTIME,
    'UPDATE'
  );
END;; 
```

但是，因为在这种情况下您的触发器只包含一个语句，所以您不需要使用[`BEGIN ... END`复合语句块](http://dev.mysql.com/doc/en/begin-end.html)，因此可以完全避免更改分隔符：

```
CREATE TRIGGER LOG_UPDATE BEFORE UPDATE ON WORKLOG FOR EACH ROW
  INSERT INTO WORKLOG_BACKUP VALUES (
    NULL,
    CURRENT_TIMESTAMP,
    NEW.LOGNO,
    NEW.JOBNO,
    NEW.EMPLOYEENO,
    NEW.WORKDATE,
    NEW.WORKTIME,
    'UPDATE'
  )
; 
```

# sencha-touch - sencha touch pdf生成表单客户端

> ID：13659237
> 
> 赞同：1
> 
> 时间：2012-12-01T11:59:47.757
> 
> 标签：sencha-touch, pdf-generation, itext

我们正在使用 sencha touch 框架创建移动应用程序。我们的要求之一是当用户点击查看pdf时，用户输入的本地存储的json格式的表单详细信息应呈现并以pdf格式查看，也可以在本地保存为pdf格式。我发现 itext 是广泛用于 pdf 生成的 java 库之一。但我找不到任何与 sencha touch 和 itext 相关的文章。让我知道的是，一种可能的方式或任何其他方法可用于在 sencha touch 中生成 json 到 pdf。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:36:17.083

java与javascript无关。

快速谷歌搜索“javascript pdf generation”列出了一些可能有效的库，但让它们在设备上运行可能比将表单结果提交到服务器并下载生成的 PDF 更麻烦。

这可能会为您指明正确的方向： [generate-pdf-files-with-javascript](https://stackoverflow.com/questions/742271/generating-pdf-files-with-javascript)

# sql - 如何通过选择表中最长的前缀来提高性能

> ID：13659238
> 
> 赞同：0
> 
> 时间：2012-12-01T11:59:58.433
> 
> 标签：sql, sybase

有一个表格包含一些值，例如：

```
id  | prefix         | name 
----+----------------+--------------------------
1   | record1        | name for record 1
2   | record2        | name for record 2
3   | record         | name for record 3
4   | another rec    | name for record 4 
```

为了选择给定文本的最长前缀并返回名称，我使用以下 SQL：

```
select top 1 name from prefixes where :text like prefix + '%' order by prefix desc 
```

这正是我所需要的，当我给出文本时，`record1`它返回我`name for record 2`时`record1`返回我`name for record 1`，如果我给出`a`它返回我`name for record 4`。

但问题是这执行了几次并且表更新了很多，所以在我的情况下（只有 210000 行的表）的性能大约是 300 毫秒，我想减少这个，有什么可以改进的查询甚至数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:43:12.810

我不太了解 Sybase 内部结构。但是，请查看计划以查看它是否正在使用索引。如果是这样，它是对索引进行全面扫描还是引擎足够聪明以理解“喜欢”。

我的猜测是引擎正在进行全面扫描。您可以通过更改查询来欺骗它寻找正确的起始位置：

```
where prefix >= :text and :text like prefix + '%' 
```

但是，它可能会从那时起进行全面扫描。您可以通过设置最大搜索位置来解决此问题：

```
where prefix >= :text and prefix <= :text + 'zzz' 
```

（假设您在前缀中使用字母数字值，这应该没问题。您也可以使用 :text + '}' 之类的东西，因为 '}' 具有非常高的 ASCII 值，假设您使用的是 ASCII 整理序列。）

你的前缀是事先知道的吗？也就是说，对于“record1”，前缀总是“record”吗？或者您是否正在考虑“r”、“re”等。

如果是前者，则添加一个包含前缀“base”部分的新列。在此列上建立索引并将连接更改为相等。引擎将仅从索引中获取记录。

在索引中包含“名称”列的问题是防止在表的数据页上查找名称的额外步骤。同样，这取决于 Sybase 如何优化查询。它*应该*只使用索引找到适当的记录，然后在应用`top 1`. 但是，如果它获取所有值，则应用`top 1`，在索引中具有“名称”将是一个好处。

# javascript - javascript不会拼接数组的所有元素

> ID：13659243
> 
> 赞同：2
> 
> 时间：2012-12-01T12:00:56.107
> 
> 标签：javascript, arrays

[http://jsfiddle.net/4wKuj/8/](http://jsfiddle.net/4wKuj/8/)

```
 var myarr=new Array("Saab","Volvo","BMW");       
  console.log(myarr);
  for (var i=0; i<myarr.length; i++) {
    myarr.splice(i,1);
  }
  console.log(myarr); 
```

注意：在实际实现中，我并没有尝试清空数组，所以请不要建议其他清空数组的方法。

为什么我仍然在控制台日志中看到“volvo”？

不应该像其他一样将其删除吗？

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T12:04:04.713

它能做什么 ：

*   第一次迭代, `i=0`, 删除`"Saab"`, => 数组是`["Volvo","BMW"]`
*   第二次迭代 ,`i=1`删除，`"BMW"`因为这是您在 index 处所拥有的`1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T12:07:40.903

第一次拼接后：

```
i = 1
myarr = ["Volvo", "BMW"] 
```

所以它会删除`"BMW"`. 第二次拼接后：

```
i = 2
myarr = ["Volvo"] 
```

并且循环不会继续。最好这样做：

```
while (myarr.length > 1) {
    myarr.splice(0, 1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T12:06:05.080

在循环之前，您的数组看起来像

> [“萨博”、“沃尔沃”、“宝马”]

在循环的第一次迭代后，您删除数组的第一个元素，现在数组看起来像

> [“沃尔沃”、“宝马”]

在第二次迭代期间，您的“i”变量具有与数组的第二个元素相对应的“1”（一个）值，换句话说，您说：

删除索引为 '1' 的 ["Volvo","BMW"] 数组元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T12:13:37.987

如果从数组中删除一个项目，还需要调整索引值，f.ex：

```
var myarr=new Array("Saab","Volvo","BMW");       
for (var i=0; i<myarr.length; i++) {
  myarr.splice(i--,1);
} 
```

提示：如果您使用循环根据其值从数组中删除项目，您可以使用其他方法 f.ex [`Array.filter`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)：

```
myarr = myarr.filter(function(val) {
    return val !== 'Volvo'
}); 
```

`Array.indexOf`也浮现在脑海。

# c++ - VC++中如何将图片放置在Picture Conrol的特定位置

> ID：13659247
> 
> 赞同：0
> 
> 时间：2012-12-01T12:01:16.903
> 
> 标签：c++, windows, winapi, win32gui, win32-process

我正在尝试在实时视频上叠加图像。使用的 IDE 是 Visual Studio Professional 2010。代码是用 C++ 开发的。当我尝试在实时视频上叠加图像时，我正在使用句柄加载图像，即

```
 HANDLE hBitmap;            

         hBitmap = LoadImage(NULL, L"C:\\Users\\User\\Documents\\Visual Studio 2010\\Projects\\BMP_Image.bmp",IMAGE_BITMAP, 0,0, LR_LOADFROMFILE ); 
```

我正在使用 Alpha Blending 机制将图像叠加到视频上。我遇到的问题是，图像连续五次叠加到视频上。

我正在传递一个图片控件的 ID，放置在 rc 文件的对话框中，以加载实时视频并显示它。我没有在代码中使用任何 MFC。视频使用 Direct 2D 机制渲染

视频分辨率为640*480，位图图像分辨率为128*128。如果我拿这个位图，视频将在视频上产生五倍的叠加图像..

我使用 GetWindowRect() 和 ScreentoClient() 获得了对话框的坐标。但我想要图片控件的坐标。

我有以下疑问：

如何获取图片控件的坐标？？？

如何将图像放置在图片控件中的特定位置？？？

期待您的积极回应尽早...

* * *

问候，

维韦克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:29:21.850

您可以使用以下函数来检索图片控件的句柄：

```
::GetDlgItem( hWnd of your dialog, Id of your picture control) 
```

通过检索它的句柄，您可以获得其他信息，例如它的位置、大小和

```
::GetWindowRect(hWnd, &rc) 
```

如果您通过一些 API 调用（例如 StretchBlt）覆盖图像，则可以将其放置在您想要的任何位置。

# c++ - 获取 .NET 模块的图像大小

> ID：13659248
> 
> 赞同：0
> 
> 时间：2012-12-01T12:01:18.303
> 
> 标签：c++, .net, image-size

我从 .NET 进程中的线程获得了指令指针，现在我想确定
它驻留在该进程中的哪个模块中。
所以我想获取进程的加载模块并检查每个模块是否：
模块的基地址<= ip <模块的基地址+模块的大小。

我想知道的是：
如何获得 .NET 模块的大小？（最好在 C++ 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:08:27.983

当您在执行 .NET 代码时检查指令指针时，它要么在 CLR 模块中，要么在模块的 JIT 编译代码中。

这些对您来说都不感兴趣，特别是因为 JIT 编译的 CLR 代码可以被丢弃、重新编译、动态优化……没有 .NET 模块的“大小”之类的东西。

# c# - 我如何在 btnClick 事件中应用事务

> ID：13659252
> 
> 赞同：-3
> 
> 时间：2012-12-01T12:02:06.807
> 
> 标签：c#, asp.net

```
protected void btnHiddenCheckIn_Click(object sender, EventArgs e)
{/ointments();

                ScriptManager.RegisterStartupScript(this, this.GetType(), "starScript", "checkINClick('" + hidPatientName.Value + "');", true);
                return;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:19:03.600

尼基尔，

在顶部声明`SqlTransaction objSqlTransaction;`，但不要初始化它！

您在哪里设置`objSqlDbComm`Connection、TimeOut 等属性...您需要传递 SqlTransaction 对象来设置`SqlCommand.Transaction`属性！

现在你要开始事务初始化对象：

```
objSqlTransaction = Master.objSqlDbComm.SqlConnectionObject.BeginTransaction(); 
```

当您完成插入和更新时，可能在 else... 的末尾... write `transaction.Commit();`，如果不成功将抛出异常...因此将 try catch 添加到您的代码中，在开始 try 和 catch 之前声明 SqlTransaction`transaction.RollBack();`

请参阅 MSDN 上的完整示例：
[SqlTransaction](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqltransaction.aspx)

**更新：**
那是因为您对 ExecuteNonQuery 和 ExecuteDataSet 使用相同的 SqlCommand 对象，当 ExecuteDataSet 时您需要使用不同的 SqlCommand 对象......因为您的 SqlCommand 是事务的一部分！

# scala - 如何将 scaladoc 默认排序更改为“通过继承”？

> ID：13659255
> 
> 赞同：2
> 
> 时间：2012-12-01T12:02:16.387
> 
> 标签：scala, sbt, scaladoc

我使用 sbt 命令生成 scaladoc `doc`。生成的 scaladoc 将默认排序设置为`Alphabetic`. 我可以手动将其更改为`By inheritance`，但是当我访问另一个类文档时，排序会恢复为`alphabetic`.

有没有办法生成默认排序设置为的scaladoc `By inheritanace`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:29:23.600

目前无法生成默认排序设置为按继承的 scaladoc。

[页面模板](https://github.com/scala/scala/blob/v2.9.2/src/compiler/scala/tools/nsc/doc/html/page/Template.scala#L88)对初始值进行硬编码，并且切换由一些 jQuery [事件侦听](https://github.com/scala/scala/blob/v2.9.2/src/compiler/scala/tools/nsc/doc/html/resource/lib/template.js#L91)器处理。

应该可以编写一个简单的脚本并将其附加到[TamperMonkey](https://chrome.google.com/webstore/detail/tampermonkey)或类似的东西，这将为您运行相当于 click() 的功能。

# java - 从 sharedpreferences 中恢复数组

> ID：13659257
> 
> 赞同：-1
> 
> 时间：2012-12-01T12:03:38.747
> 
> 标签：java, android

我的应用程序首先调用 checkIndex()，如果索引不为空，则转到主屏幕。

我将数组保存到共享首选项：

```
SharedPreferences prefs = getSharedPreferences(PRIVATE_PREF, 0);
SharedPreferences.Editor editor = prefs.edit();
editor.putInt(prog +"_size", prog.length);
for(int i=0;i<prog.length;i++)
editor.putString(prog + "_" + i, prog[i]);
editor.putInt("x", x);
editor.commit(); 
```

回调数组，我用这个：

```
 int size = prefs.getInt(prog +"_size", 0);
  String prog2[] = new String[size];
  for(int i=0; i<prog2.length; i++) 
  prog2[i] = prefs.getString(prog + "_" + i, "");
  prog=prog2;  
  int l = prefs.getInt("x", 0);
  x=l;

  textView1.setText(""+prog[x]); 
```

日志猫：

```
12-01 00:53:35.976: E/AndroidRuntime(6222): FATAL EXCEPTION: main
12-01 00:53:35.976: E/AndroidRuntime(6222): java.lang.ArrayIndexOutOfBoundsException: length=10; index=10
12-01 00:53:35.976: E/AndroidRuntime(6222):     at com.example.perledisaggezza.MainActivity$6.onClick(MainActivity.java:428)
12-01 00:53:35.976: E/AndroidRuntime(6222):     at android.view.View.performClick(View.java:4084)
12-01 00:53:35.976: E/AndroidRuntime(6222):     at android.view.View$PerformClick.run(View.java:16966)
12-01 00:53:35.976: E/AndroidRuntime(6222):     at android.os.Handler.handleCallback(Handler.java:615)
12-01 00:53:35.976: E/AndroidRuntime(6222):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-01 00:53:35.976: E/AndroidRuntime(6222):     at android.os.Looper.loop(Looper.java:137)
12-01 00:53:35.976: E/AndroidRuntime(6222):     at android.app.ActivityThread.main(ActivityThread.java:4745)
12-01 00:53:35.976: E/AndroidRuntime(6222):     at java.lang.reflect.Method.invokeNative(Native Method)
12-01 00:53:35.976: E/AndroidRuntime(6222):     at java.lang.reflect.Method.invoke(Method.java:511)
12-01 00:53:35.976: E/AndroidRuntime(6222):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-01 00:53:35.976: E/AndroidRuntime(6222):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-01 00:53:35.976: E/AndroidRuntime(6222):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:05:22.393

不可能给你一个明确的答案。但是查看第二个代码段，有两个地方可能会引发异常：

```
 int size = prefs.getInt(prog +"_size", 0);
  String prog2[] = new String[size];
  for(int i=0; i<prog2.length; i++) {
      prog2[i] = prefs.getString(prog + "_" + i, "");  // FIRST PLACE
  }
  prog=prog2;  
  int l = prefs.getInt("x", 0);
  x=l;

  textView1.setText(""+prog[x]);    // SECOND PLACE 
```

我们可以忽略的第一个位置，因为`i`总是小于`prog2.length`..

如果“x”属性的值大于`size`来自不同属性的 ... 的值，则第二个位置是可能的。

查看其他代码片段，没有任何东西可以确保“x”属性小于大小。所以至少这个因果关系是合理的。

# php - 保存后下拉选择

> ID：13659263
> 
> 赞同：0
> 
> 时间：2012-12-01T12:04:40.820
> 
> 标签：php, html, mysql

我确实有两个下拉菜单，称为源和活动，这两个下拉菜单显示来自数据库的数据。我也有其他输入字段。我担心的是我想在填充后保存这些数据在给定的输入和选择下拉数据中，它必须被保存，但在保存数据后，下拉菜单必须显示我在单击保存按钮时选择的选择，但它显示的是默认选项。我的代码如下：这是源代码：

```
 $result= mysql_query("SELECT * FROM infosources where kunnr = '".$_SESSION["kunnr"]."' order by sort_order asc");
    $model["source"]=array();
    while($row = mysql_fetch_array($result)){
        array_push($model["source"],$row);

} 
```

这是针对广告系列：

```
$result= mysql_query("SELECT * FROM s_campaigns WHERE kunnr ='".$_SESSION["kunnr"]."' and active = 'true' order by name asc");
$model["campaign"]=array();
while($row = mysql_fetch_array($result)){
    array_push($model["campaign"],$row);

} 
```

我的下拉列表如下：

```
<select name="srcid"> <?php foreach($model["source"] as &$obj){?>
                       <option  value=<?php echo $obj["srcid"];?>>    <?php echo $obj["srcname"];?> </option> 
                           <?php }?></select> 
```

另一个下拉菜单是

```
<select name="camp_id"> <?php foreach($model["campaign"] as &$obj){?>
                       <option <?php if($model["selected"]==$obj[""]){?>selected <?php }?>  value=<?php echo $obj["id"];?>>    <?php echo $obj["name"];?> </option> 
                           <?php }?></select> 
```

请在这方面给我建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:10:32.757

为此，您必须在刷新页面时确定视图中的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:26:46.307

这是一个非常简单的示例，如果您将表单发送到同一个文件，那么它只是工作......如果您将表单发送到任何其他文件，或者如果您将 $selectedCampId 变量从其他文件传递回此 html 表单

```
<?php

// fetch the database to get all possible campaings always... before form was saved and also afterwards
$result= mysql_query("SELECT * FROM s_campaigns WHERE kunnr ='".$_SESSION["kunnr"]."' 
    and active = 'true' order by name asc");

$model["campaign"]=array();
while($row = mysql_fetch_array($result)){
   array_push($model["campaign"],$row);
}

// initiate $selectedCampId .... if the form is sent ... this variable will be filled with the campaign_id so that we know which option was selected... otherwise it wil remain empty..
$selectedCampId= '';

// if the save button was pushed, the form method is POST and the camp_id is not empty
// save the value of the camp_id input field to the variable so that in the next step 
// we know which one was selected
if(!empty($_POST['camp_id'])){
    // validate the input and save the data to database
    // check which campaign id is selected and write it to variable
    $selectedCampId= $_POST['camp_id'];
}

?>
<?php // the form method is POST otherwise use $_GET to fetch the camp_id after the form was sent ?>
<form method="post">
<select name="camp_id"> 
    <?php foreach($model["campaign"] as &$obj): ?>
        <option 
           <?php // if form is sent and $selectedCampId is not empty ... echo selected = "selected" ---- otherwise echo empty string ?>
           <?php echo ($obj['id'] == $selectedCampId) ? 'selected = "selected"' : ""; ?>>
           <?php echo $obj["name"];?> 
        </option> 
    <?php endforeach;?>
</select>
</form> 
```

# sql - 增强 Postgresql 查询（许多子查询）

> ID：13659264
> 
> 赞同：2
> 
> 时间：2012-12-01T12:04:53.920
> 
> 标签：sql, postgresql

由于我认为子查询，我有一个 postgrsql 查询需要很长时间才能执行（5 分钟）。我想找到一种方法来增强这个查询：

```
select v.id, v.pos, v.time,  v.status,  vi.name,vi.type,
        (select c.fullname
           from company c
          where vi.registered_owner_code = c.owcode ) AS registered_owner
       ,(select c.fullname
           from company c
         where vi.group_beneficial_owner_code=c.owcode) AS group_beneficial_owner
       ,(select c.fullname
           from company c
          where vi.operator_code = c.owcode ) AS operator
       ,(select c.fullname
           from company c
          where vi.manager_code = c.owcode ) AS manager
  from (car_pos v left join cars vi on v.id = vi.id)
 where age(now(), v.time::time with time zone) < '1 days'::interval 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:17:44.033

> 因为我认为子查询

这不是一个真正的猜谜游戏。您可以在 pgadmin 或控制台下获得查询执行计划说明

[http://www.pgadmin.org/docs/1.4/query.html](http://www.pgadmin.org/docs/1.4/query.html)

[http://www.postgresql.org/docs/current/static/sql-explain.html](http://www.postgresql.org/docs/current/static/sql-explain.html)

然后你就可以看到发生了什么以及什么需要这么多时间。

分析后，您可以添加索引或更改其他内容，但至少您会知道需要更改的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T17:25:01.167

### 3个关键成分：

1.  取消**相关的子查询**，[`JOIN`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FROM)改用 - 就像已经提到的其他答案一样。

2.  在**`WHERE`子句**中，不要在列上使用无法使用索引的表达式。@Frank 已经提到过。只有最基本的、稳定的表达式可以被查询规划器重写以使用索引。看看我是如何重写的。

3.  创建合适的**索引**。

```
SELECT v.id, v.pos, v.time, v.status, c.name, c.type
      ,r.fullname AS registered_owner
      ,g.fullname AS group_beneficial_owner
      ,o.fullname AS operator
      ,m.fullname AS manager
FROM   car_pos v
LEFT   JOIN cars    c ON USING (id)
LEFT   JOIN company r ON r.owcode = c.registered_owner_code
LEFT   JOIN company g ON g.owcode = c.group_beneficial_owner_code
LEFT   JOIN company o ON o.owcode = c.operator_code
LEFT   JOIN company m ON m.owcode = c.manager_code
WHERE  v.time > (now() - interval '1 day'); 
```

您需要唯一的索引`cars.id`和`company.owcode`（主键也可以完成这项工作）。

你需要一个`car_pos.time`类似的索引：

```
CREATE INDEX car_pos_time_idx ON car_pos (time DESC); 
```

也可以不按降序工作。如果您有*很多*行（-> 大表、大索引），您可能希望创建一个仅涵盖最近历史记录的**部分索引**，并在每天或每周的下班时间*重新创建它：*

```
CREATE INDEX car_pos_time_idx ON car_pos (time DESC);
WHERE time > $mydate 
```

其中 $mydate 是`(now() - interval '1 day')`. 这可以随时在逻辑上匹配您的查询条件。效果会随着时间慢慢恶化。

另外：不要命名`timestamp`“时间”类型的列，从文档的角度来看这是一种误导。*实际上，根本*不要`time`用作列名。它是每个 SQL 标准中的[保留字](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html)，也是 PostgreSQL 中的类型名称。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T12:19:57.157

WHERE 条件不能使用索引，您必须更改该索引。v.time 不应该在一个 volatile 函数中，在这种情况下是 age()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T12:21:43.593

```
select v.id, v.pos, v.time,  v.status,  vi.name,vi.type,
c1.fullname as Registered_owner,
c2.fullname as group_beneficial_owner,          
c3.fullname AS operator,   
c4.fullname AS manager 

from car_pos v 
left outer join cars vi on v.id = vi.id
left outerjoin company c1 on vi.registered_owner_code=c1.owcode
left outerjoin company c2 on vi.group_beneficial_owner_code=c2.owcode
left outerjoin company c3 on vi.operator_code=c3.owcode
left outerjoin company c4 on vi.manager_code=c4.owcode
 where age(now(), v.time::time with time zone) < '1 days'::interval 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T12:14:41.777

一种简单的解决方案是将其转换为连接

```
select v.id, v.pos, v.time,  v.status,  vi.name,vi.type, 
reg_owner.fullname AS registered_owner, 
gr_ben_owner.fullname AS group_beneficial_owner, 
op.fullname AS operator, 
man.fullname AS manager
from  
  car_pos v 
  left join cars vi on v.id = vi.id
  left join company reg_owner on vi.registered_owner_code = reg_owner.owcode
  left join company gr_ben_owner on vi.group_beneficial_owner_code = gr_ben_owner.owcode
  left join company op on vi.operator_code = op.owcode
  left join company man on vi.manager_code  = man.owcode
where age(now(), v.time::time with time zone) < '1 days'::interval 
```

但是，我怀疑，仅对表 Company 进行一次连接可能是可能的...我不能 100% 确定确切的语法，并且我怀疑这会提高性能（因为所有 CASE- WHEN、GROUP by 等）与四次加入解决方案相比，但我认为这也应该有效。（我假设，这 cars-car_pos 是一对一的关系）

```
select v.id, MAX(v.pos) as pos, MAX(v.time) as vtime,  MAX(v.status) as status,  MAX(vi.name) as name,MAX(vi.type) as type, 
MAX(CASE WHEN c.owcode = vi.registered_owner_code THEN c.fullname END) AS registered_owner, 
MAX(CASE WHEN c.owcode = vi.group_beneficial_owner_code THEN c.fullname END) AS group_beneficial_owner, 
MAX(CASE WHEN c.owcode = vi.operator_code THEN op.fullname END) AS operator, 
MAX(CASE WHEN c.owcode = vi.manager_code THEN man.fullname END) AS manager
from  
  car_pos v 
  left join cars vi on v.id = vi.id
  left join company c on c.owcode IN (vi.registered_owner_code, vi.group_beneficial_owner_code, vi.operator_code, vi.manager_code)
group by v.id
having age(now(), vtime::time with time zone) < '1 days'::interval 
```

如果您可以将表创建 DDL 脚本和一些插入到问题中，那么在 SQL 小提琴中尝试会很容易......*

# python - 用想要的行列表切片 numpy 数组

> ID：13659266
> 
> 赞同：8
> 
> 时间：2012-12-01T12:05:21.057
> 
> 标签：python, arrays, numpy, slice

我有一个 numpy 二维数组`A`和一个行号列表`row_set`。如何获得新数组`B`，例如 if `row_set = [0, 2, 5]`, then `B = [A_row[0], A_row[2], A_row[5]]`？

我想到了这样的事情：

```
def slice_matrix(A, row_set):
    slice = array([row for row in A if row_num in row_set]) 
```

但我不知道，我怎样才能得到一个row_num。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-01T12:09:35.973

使用`take()`：

```
In [87]: m = np.random.random((6, 2))

In [88]: m
Out[88]: 
array([[ 0.6641412 ,  0.31556053],
       [ 0.11480163,  0.00143887],
       [ 0.4677745 ,  0.43055324],
       [ 0.49749099,  0.15678506],
       [ 0.48024596,  0.65701218],
       [ 0.48952677,  0.97089177]])

In [89]: m.take([0, 2, 5], axis=0)
Out[89]: 
array([[ 0.6641412 ,  0.31556053],
       [ 0.4677745 ,  0.43055324],
       [ 0.48952677,  0.97089177]]) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-01T12:47:35.877

您可以将列表或数组作为索引传递给任何 np 数组。

```
>>> r = np.random.randint(0,10,(5,5))
>>> r
array([[3, 8, 9, 8, 4],
       [4, 1, 5, 9, 1],
       [3, 6, 8, 8, 0],
       [5, 1, 7, 6, 1],
       [6, 1, 7, 7, 7]])
>>> idx = [0,3,1]
>>> r[idx]
array([[3, 8, 9, 8, 4],
       [5, 1, 7, 6, 1],
       [4, 1, 5, 9, 1]]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-16T03:53:37.637

速度比较：`take()`更快。

```
In [1]:  m = np.random.random((1000, 2))
         i = np.random.randint(1000, size=500)

         %timeit m[i]
Out[1]:
         10000 loops, best of 3: 27.2 µs per loop

In [2]:  %timeit m.take(i, axis=0)
Out[2]:
         100000 loops, best of 3: 7.24 µs per loop 
```

对于非常大的`m`和`i`

# ruby-on-rails - 如何使用 rspec 测试控制器

> ID：13659271
> 
> 赞同：-1
> 
> 时间：2012-12-01T12:05:40.107
> 
> 标签：ruby-on-rails, rspec-rails

请提供使用 rspec 进行控制器测试的教程的任何链接，如何开始我无法做到，我是测试的初学者，这是控制器的代码：

```
 def login
    if admin_logged_in?
      flash[:notice]="You are already logged in"
      redirect_to( "/admin/")
    else
      render(:layout => "admin")
    end
  end 
```

如何测试这种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:29:48.433

检查这两个链接：测试风格指南[https://github.com/bbatsov/rails-style-guide#controllers-1](https://github.com/bbatsov/rails-style-guide#controllers-1) 和这个截屏视频[http://railscasts.com/episodes/71-testing-controllers-with- rspec](http://railscasts.com/episodes/71-testing-controllers-with-rspec)

# internet-explorer - IE7 CSS 背景尺寸：100% 后备

> ID：13659274
> 
> 赞同：0
> 
> 时间：2012-12-01T12:05:46.250
> 
> 标签：internet-explorer, css

任何人都有 IE 的 CSS background-size:100% 的后备方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:08:31.027

试试这些 CSS 选项

```
 min-height: 100%;
 min-width: 1024px;
 width: 100%;
 height: auto;
 position: fixed;
 top: 0;
 left: 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:10:23.913

请检查链接：

[http://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

它可能对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T12:16:07.260

我不太确定这项工作，但你可以试试这个 js 这里是 js 的链接[https://github.com/louisremi/jquery.backgroundSize.js](https://github.com/louisremi/jquery.backgroundSize.js)

```
$("h2#news").css({backgroundSize: "cover"}); 
```

如果您对此有任何问题，请告诉我，或者您也可以尝试过滤 ie

```
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='images/logo.gif',
sizingMethod='scale'); 
```

# c# - c#列表覆盖问题

> ID：13659284
> 
> 赞同：0
> 
> 时间：2012-12-01T12:07:24.027
> 
> 标签：c#, list, gridview

我有一些下面显示的代码，它们将 a 的值写入`gridview`列表，如图所示。该代码确实获得了正确的值，但是当网格的第二行添加到列表中时，它会覆盖列表的第一行。
有人知道为什么会这样吗？

**C# 代码**

```
 List<Item> lstNewItems = new List<Item>(); // Control Items  
 lstNewItems.Clear();
 Item NewItem = new Item();
 foreach (GridViewRow PendingItemUnderControl in GridViewPendingList.Rows)
 {
    NewItem.Paramater = PendingItemUnderControl.Cells[0].Text.ToLower();
    NewItem.Type = (String)Session["BrowseType"];
    lstNewItems.Add(NewItem);
 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T12:09:07.937

您正在创建一个`Item`类实例。它发生在你的循环之前，所以实际上你正在处理同一个对象。您需要在循环内创建新实例（在每次迭代中）：

```
List<Item> lstNewItems = new List<Item>(); // Control Items  
lstNewItems.Clear();

foreach (GridViewRow PendingItemUnderControl in GridViewPendingList.Rows)
{
    Item NewItem = new Item();
    NewItem.Paramater = PendingItemUnderControl.Cells[0].Text.ToLower();
    NewItem.Type = (String)Session["BrowseType"];
    lstNewItems.Add(NewItem);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T12:09:23.060

这是因为您不断添加相同的对象，并且在循环的每次迭代中都对其进行了变异。

您只分配`NewItem`一次，然后配置并将其添加到列表中。但是，当列表中的项目时，您重新配置它并将其第二次添加到列表中。现在您将两个项目配置为最后一个项目。然后将其配置为第三项，并再次添加。但是，所有三个项目的配置都相同：前面的两个参数和类型都消失了。循环完成后，您将拥有列表中相同最后一项的`N` *副本*。

移动`new`循环内部以解决问题：

```
foreach (GridViewRow PendingItemUnderControl in GridViewPendingList.Rows)
{
    Item NewItem = new Item();
    ....
} 
```

更好的是，让你的`Item` *immutable*，并在构造函数中传递参数：

```
foreach (GridViewRow PendingItemUnderControl in GridViewPendingList.Rows)
{
    lstNewItems.Add(new Item(
        PendingItemUnderControl.Cells[0].Text.ToLower()
    ,   (String)Session["BrowseType"])
    );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T12:09:50.840

您正在循环之外创建新`Item`元素，因此每次更新相同的元素。

```
foreach (GridViewRow PendingItemUnderControl in GridViewPendingList.Rows)
{
    Item NewItem = new Item(); <------
    NewItem.Paramater = PendingItemUnderControl.Cells[0].Text.ToLower();
    NewItem.Type = (String)Session["BrowseType"];
    lstNewItems.Add(NewItem);

} 
```

移动`new`到循环中

# android - 将字符串数组添加到 setListAdapter

> ID：13659288
> 
> 赞同：2
> 
> 时间：2012-12-01T12:07:41.813
> 
> 标签：android, listview

我正在尝试将一个类数组添加到我的 Listview 中。

在调试时它卡在 setListAdapter 行上，没有任何特殊错误。

当我编译它时，它会通过我的启动屏幕并打开 menu.java 但是当我单击列表上的项目时没有任何反应。

这是我的 Menu.java

```
package com.android;
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Menu extends ListActivity {

    String classes[] = { "MainActivity", "Acl", "Bcl", "Ccl",
            "Dcl", "Ecl", "Fcl" };

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(Menu.this,
                android.R.layout.simple_list_item_1, classes));

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

        super.onListItemClick(l, v, position, id);
        String classpos = classes[position];
        try {

            Class ourClass = Class.forName("com.android.MainActivity"  classpos);
            Intent ourIntent = new Intent(Menu.this, ourClass);

            startActivity(ourIntent);
        } catch (ClassNotFoundException e) {

            e.printStackTrace();
        }

    }
} 
```

这里是我的 AndroidManifest.xml 代码相关部分

```
<activity
            android:name=".MainActivity"
            android:exported="false"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="com.android.MAINACTIVITY" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:22:49.310

在您的代码中创建类名时出错。

尝试这个，

String classpos = "com.android."+classes[位置];

类 ourClass = Class.forName(classpos);

# java - 如何制作由其他给定长度字节数组组成的给定长度字节数组JAVA

> ID：13659289
> 
> 赞同：0
> 
> 时间：2012-12-01T12:07:53.263
> 
> 标签：java, arrays, sockets, byte

我想发送一个 256 字节长度的字节数组，它必须是 128 字节的字符串，并且与另一个字符串的长度相同（长度仅用于测试目的）。

这是我的代码：

```
public void packetCompose(String user, String password) {
    //insert user in 128 bytes length, same with password 
    //and make a 256 length byte array to send
    byte[] userBytes = user.getBytes();
    byte[] passwordBytes = password.getBytes();
    byte[] buf = new byte[256];
} 
```

我希望 userBytes 的长度为 128 字节，即使字节数超过需要，并且与 passwordBytes 相同。然后使 buf 像 userBytes 后跟 passwordBytes。

有什么建议么？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T12:12:21.507

只需将字节复制到目标`buf`数组中。

```
System.arraycopy( userBytes    , 0, buf,   0, Math.min( userBytes.length, 128 ) );
System.arraycopy( passwordBytes, 0, buf, 128, Math.min( userBytes.length, 128 ) ); 
```

# java - 为什么 calendar.get(Calendar.MONTH) 返回 10 而不是 12？

> ID：13659295
> 
> 赞同：0
> 
> 时间：2012-12-01T12:08:59.933
> 
> 标签：java

为什么

```
calendarCurrent = Calendar.getInstance(Locale.US);
calendarCurrent.get(Calendar.MONTH) 
```

如果现在是 12，返回 10？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T12:11:31.927

月份索引从 0 开始，而不是从 1 开始，因此如果返回 10，则它必须是 11 可能在美国语言环境中它还不是 11

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T12:11:22.013

月份是从零开始的（一个不幸的设计决定，恕我直言），所以 0 表示 1 月，10 表示 11 月。现在是 12 月 1 日，但在某些时区可能仍然是 11 月 30 日。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T12:11:29.663

我刚刚对其进行了测试，它返回 11，这是 12 月，因为月份是`[0, 11]`.

从[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#set%28int,%20int,%20int%29)：

> month - 用于设置 MONTH 日历字段的值。月份值从 0 开始。例如，0 表示一月。

一切都很好。您可能在午夜之前或在非美国时区测试过它，不是吗？

# android - 如何使文本视图在相对布局中可滚动？安卓

> ID：13659299
> 
> 赞同：0
> 
> 时间：2012-12-01T12:09:19.060
> 
> 标签：android

我有一个应用程序，它有一个相对布局作为父级，一个页眉和一个页脚，以及 textview 作为它的内容（详细信息所在）。我想让 textview 可滚动。即使我在我的 xml 中添加了滚动视图，它也没有显示滚动视图。你能帮我弄清楚我在这里缺少什么吗？

请检查我的 .xml：

```
 <LinearLayout
    android:id="@+id/l1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:layout_alignParentTop="true">

 <include layout="@layout/tabsfordiseases"/>
 </LinearLayout>

 <TextView
 android:id="@+id/tvValvularDescription"
 style="@style/DescriptionHeader"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:layout_alignParentLeft="true"
 android:layout_alignParentRight="true"
 android:layout_below="@+id/l1"
 android:layout_marginTop="28dp"
 android:drawableLeft="@drawable/note16"
 android:textStyle="bold" />

<LinearLayout
    android:id="@+id/l2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"

    android:gravity="center_horizontal" >

    <include layout="@layout/zooming_controls" />
 </LinearLayout>

 <ScrollView
   android:id="@+id/scrollView1"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:layout_alignParentLeft="true"
   android:layout_below="@+id/tvValvularDescription"
   android:layout_marginLeft="25dp"
   android:layout_marginTop="14dp" >

  <!--     <LinearLayout
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:orientation="horizontal" > -->

   <TextView
   android:id="@+id/tvValvularDescriptionContainer"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:text="hello world" />

 </ScrollView>

 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:13:09.457

鉴于您将其包装在一个中，`TextView`一旦超出您的边界，您的将变为可滚动的。`ScrollView`

由于您将文本设置为“Hello world”，我猜 TextView 根本不超过`ScrollView`..？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T12:13:54.817

将 TextView 放在 ScrollView 中以便能够滚动

# java - 找不到类“org.gwtwidgets.client.temp.TMouseListenerCollection”

> ID：13659309
> 
> 赞同：0
> 
> 时间：2012-12-01T12:10:48.137
> 
> 标签：java, gwt, gwt-rpc

我有下一个父类：

```
public class ListUIModel<T extends BaseModel> extends BaseModel implements List<T> {

    protected ArrayList<T> list = new ArrayList<T>();

    public ListUIModel() {
    }

    public ListUIModel(T... models) {
        list = ArraysUtil.asList(models);
    }

    //implementation of List interface... 
```

并且有从 ListUIModel 派生的类：

```
public class ProducersUIModel extends ListUIModel<ProducerUIModel> {

public ProducersUIModel() {
}

public ProducersUIModel(ProducerUIModel... producers) { 
    super(producers);
}

other methods... 
```

服务方法返回 PublicationUIModel。

此代码由 gwt 编译，当我运行 tomcat 时，我看到此警告：

```
29 Nov 2012 09:10:59,498: ERROR http-8443-Processor21 org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/] - userProfileController: ERROR: Could not find class 'org.gwtwidgets.client.temp.TMouseListenerCollection' listed in the serialization policy file '/5C1ACC115899B7BFEC8646E55EC693E0.gwt.rpc'; your server's classpath may be misconfigured
java.lang.ClassNotFoundException: org.gwtwidgets.client.temp.TMouseListenerCollection
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1377)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1223)
    at java.lang.Class.forName0(Native Method)... 
```

GWT 的 util CompileReport 说：

```
org.gwtwidgets.client.temp.TMouseListenerCollection
   Serialization status
      Instantiable
   Path
      'org.gwtwidgets.client.temp.TMouseListenerCollection' is reachable as a subtype of type 'class java.util.ArrayList<T>'
      'java.util.ArrayList<T>' is reachable from field 'list' of type 'com.xalmiento.desknet.ui.client.model.ListUIModel<T>'
      'com.xalmiento.desknet.ui.client.model.ListUIModel<com.xalmiento.desknet.ui.client.model.ProducerUIModel>' is reachable as a supertype of type 'class com.xalmiento.desknet.ui.client.model.ProducersUIModel'
      'com.xalmiento.desknet.ui.client.model.ProducersUIModel' is reachable as a subtype of type 'class com.xalmiento.desknet.ui.client.model.ProducersUIModel' 
```

为什么 GWT 会尝试加载 TMouseListenerCollection？我使用 ArrayList（在其他地方没有），没关系。对我来说很难理解:(

我知道我可以从 .gwt.rpc 策略文件中明确排除此类。但是我如何用另一种方法解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:36:50.360

GWT compiler tries to list out all subtypes from ArrayList which are implementing IsSerializable. The solution is to try removing IsSerializable interface from TMouseListenerCollection or declare list in ListUIModel as transient ( non-serializable ) if it is not to be sent over the rpc.

# bash - 如何从字符串中删除空格？

> ID：13659318
> 
> 赞同：74
> 
> 时间：2012-12-01T12:11:48.580
> 
> 标签：bash, shell

在ubuntu bash脚本中如何从一个变量中删除空间

字符串将是

```
 3918912k 
```

想要删除所有的空格。

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-12-01T17:51:25.960

工具`sed`或`tr`将通过交换空白为您做到这一点

`sed 's/ //g'`

`tr -d ' '`

例子：

```
$ echo "   3918912k " | sed 's/ //g'
3918912k 
```

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2012-12-01T12:14:09.283

尝试在 shell 中执行此操作：

```
var="  3918912k"
echo ${var//[[:blank:]]/} 
```

使用[参数扩展](http://wiki.bash-hackers.org/syntax/pe)（这是一个非[posix](/questions/tagged/posix "显示标记为“posix”的问题")功能）

`[[:blank:]]`是一个 POSIX 正则表达式类（删除空格、制表符...），请参阅[http://www.regular-expressions.info/posixbrackets.html](http://www.regular-expressions.info/posixbrackets.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-01T13:45:41.323

您还可以使用`echo`删除字符串开头或结尾的空格，还可以删除字符串内的重复空格。

```
$ myVar="    kokor    iiij     ook      "
$ echo "$myVar"
    kokor    iiij     ook      
$ myVar=`echo $myVar`
$
$ # myVar is not set to "kokor iiij ook"
$ echo "$myVar"
kokor iiij ook 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-01T16:34:01.893

从变量中删除所有空格的一种有趣方法是使用 printf：

```
$ myvar='a cool variable    with   lots of   spaces in it'
$ printf -v myvar '%s' $myvar
$ echo "$myvar"
acoolvariablewithlotsofspacesinit 
```

事实证明，它的效率略高于，但对于可能出现在字符串中的`myvar="${myvar// /}"`glob ( ) 而言并不安全。`*`所以**不要在生产代码中使用它。**

如果你真的很想使用这个方法并且真的很担心 globbing 的事情（你真的应该这样做），你可以使用`set -f`（它完全禁用了 globbing）：

```
$ ls
file1  file2
$ myvar='  a cool variable with spaces  and  oh! no! there is  a  glob  *  in it'
$ echo "$myvar"
  a cool variable with spaces  and  oh! no! there is  a  glob  *  in it
$ printf '%s' $myvar ; echo
acoolvariablewithspacesandoh!no!thereisaglobfile1file2init
$ # See the trouble? Let's fix it with set -f:
$ set -f
$ printf '%s' $myvar ; echo
acoolvariablewithspacesandoh!no!thereisaglob*init
$ # Since we like globbing, we unset the f option:
$ set +f 
```

我发布这个答案只是因为它很有趣，而不是在实践中使用它。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-01T16:42:58.203

由于您使用的是 bash，因此最快的方法是：

```
shopt -s extglob # Allow extended globbing
var=" lakdjsf   lkadsjf "
echo "${var//+([[:space:]])/}" 
```

它是最快的，因为它使用内置函数而不是启动额外的进程。

但是，如果您想以符合 POSIX 的方式执行此操作，请使用`sed`：

```
var=" lakdjsf   lkadsjf "
echo "$var" | sed 's/[[:space:]]//g' 
```

# ios - iOS中UIButton的简单子类化

> ID：13659319
> 
> 赞同：-1
> 
> 时间：2012-12-01T12:11:50.693
> 
> 标签：ios, uibutton, subclass

我想我已经按照示例代码写了这封信，但是下面给了我一个错误。

我想继承 UIButton 并添加几个属性，但我从一开始就失败了。

我创建了一个子类文件。这些是我的 .h/.m 的：

```
// damButton.h
#import <UIKit/UIKit.h>

@interface damButton : UIButton
{
    CGFloat _position;
}
@property (nonatomic) CGFloat position;
@end 
```

和

```
// damButton.m
#import "damButton.h"

@implementation damButton

@synthesize position = _position;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}
@end 
```

在我的 mainviewcontroller 中，我已经导入了自定义按钮，但是当我使用属性的内置 getter 和 setter 时，出现错误：

```
//MainViewController.m
#import "damButton.h"

// then within a method...
damButton *b = [damButton buttonWithType:UIButtonTypeRoundedRect];
[b position:5.0]; 
```

生成此错误：`No visible @interface for 'damButton' declares the selector 'position:'`

我不确定我在这里缺少什么，我几乎逐字复制它（我认为）。我只想使用内置的 getter/setter（现在）。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T12:14:58.243

您正在调用 getter 方法，而不是 setter 方法 -setPosition，即尝试：

```
[b setPosition:5.0]; 
```

或者

```
b.position = 5.0; 
```

请问你想通过继承 UIButton 来实现什么？

# c++ - C++ 开关：案例 - 这是允许的吗？

> ID：13659323
> 
> 赞同：0
> 
> 时间：2012-12-01T12:12:10.657
> 
> 标签：c++, switch-statement, expression, constants, case

我正在尝试执行以下操作：

```
 switch(moveDirection){
        case MOVE_DIRECTION_UP:
            //do something
        break;
    } 
```

MOVE_DIRECTION_UP 是这样的：

```
 const unsigned char MOVE_DIRECTION_UP = 0x0; 
```

编译器给出错误：MOVE_DIRECTION_UP 不能出现在常量表达式中

当然应该允许这样做，因为如果我将 MOVE_DIRECTION_UP 替换为 0x0，它编译得很好。

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:18:00.613

如果您使用 C++11，则可以声明`MOVE_DIRECTION_UP`为`constexpr`. 编译器会将其视为可以用作开关标签的常量值。

如果不是，您可以定义一个枚举：

```
namespace eDirection { enum e {
    UP = 0x0,
    DOWN = 0x1
};}

switch( direction ) {
    case eDirection::UP: ...
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T12:22:24.207

这在 C++ 中是允许的。你的代码是正确的。`const`变量可以在常量表达式中使用。

你确定你正在构建一个 C++ 源文件而不是 C 吗？在 C 中，代码无效（*不能*在常量表达式中使用`const`变量。）

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T12:28:26.187

这似乎是一个编译器错误。

在 C++98 中：

> 5.19 常量表达式
> 
> ...
> 
> 一个整数常量表达式只能包含文字 (2.13)、枚举数、**常量变量或整数或枚举类型的静态数据成员，这些成员使用常量表达式 (8.5) 初始化**

在 C++11 中：

> 5.19 常量表达式
> 
> ...
> 
> 2 条件表达式是一个核心常量表达式，除非它涉及以下之一作为潜在评估的子表达式
> 
> ...
> 
> — 左值到右值的转换 (4.1)，除非它应用于
> 
> —**整数或枚举类型的左值，它引用具有前面初始化、用常量表达式初始化的非易失性 const 对象**，或

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T15:43:20.723

您没有提供演示问题的实际程序，所以我将使用水晶球。您转发声明了您的 const 并且其值在开关处不直接可见。*

# xcode - iOS6使用的是什么版本的OpenGLES？

> ID：13659325
> 
> 赞同：-3
> 
> 时间：2012-12-01T12:12:21.553
> 
> 标签：xcode, opengl-es, ios6, version

iOS6使用的是什么版本的OpenGLES？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:18:29.110

根据 iOS 开发人员库，可以使用 OpenGL ES 1.1 和 OpenGL ES 2.0 的实现。

# php - 在php中解析和连接一个json字符串

> ID：13659327
> 
> 赞同：-5
> 
> 时间：2012-12-01T12:12:35.010
> 
> 标签：php, json

我有一个这样的json字符串

```
{
"6ad416d7-551a-41e3-9103-42d0a6a14d95":{
  "0":{
     "value":"KOSHER ONE"
  }
},
"acb022a1-2369-4a20-8b6e-714387b81a6c":{
  "0":{
     "value":"PAREVE"
  }
},
"f4ef2148-270e-4d9d-913d-f1a4ed2a73f0":{
  "0":{
     "value":"Crayon"
  }
}
} 
```

我想提取并连接以下值，例如 KOSHER ONE+PAREVE+CRAYON。

谁能帮我解析这个字符串。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:14:27.893

PHP 有一个完整的[JSON 库](http://uk1.php.net/manual/en/book.json.php)。

您将使用 解析字符串[`json_decode`](http://uk1.php.net/manual/en/function.json-decode.php)，然后从结果对象图中检索值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:14:56.323

用于`json_decode()`解码 json 数据，您可以更改值。

更新所有值后，使用`json_encode()`将其更改回 json 字符串

json_encode：[http:](http://www.php.net/manual/en/function.json-encode.php) //www.php.net/manual/en/function.json-encode.php json_decode：[http ://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

# cocos2d-iphone - Cocos2d 和 grid3d - 动作完成后重置效果

> ID：13659329
> 
> 赞同：0
> 
> 时间：2012-12-01T12:12:53.020
> 
> 标签：cocos2d-iphone, effects

我只是想弄清楚这一点，我有一个 grid3d CCRipple3D 动作/效果，它出现在它应该出现的地方。除非它完成时（1 秒后），它会“暂停”效果并将其留在原处。我想要的只是一个涟漪，然后它就会消失。这是我的代码：

```
for( UITouch *touch in touches ) {

    CGPoint location = [touch locationInView: [touch view]];

    location = [[CCDirector sharedDirector] convertToGL: location];

    id effect = [CCRipple3D actionWithPosition:location radius:180 waves:10 amplitude:20 grid:ccg(60, 60) duration:1]; 

    [self runAction:effect];
} 
```

但这会在该位置的图层上留下失真。我需要它波动 1 秒钟然后消失。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:48:39.740

```
id effect = [CCRipple3D actionWithPosition:location radius:180 waves:10 amplitude:20 grid:ccg(60, 60) duration:1];
[someNode runAction:[CCSequence actions:effect,[CCStopGrid action], nil]]; 
```

如果是旧版本的 cocos2d，请使用 [StopGrid action] 而不是 [CCStopGrid action]。

可能，OP 早就找到了答案。但是仍然发布解决方案，以便任何人都可以找到到达这里的答案（就像我一样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-19T13:16:10.917

我在使用 cocos2d-js 3.0 时也遇到了这个问题。感谢 Mesbah 的回答，我得到了这个：

```
 var action = cc.shaky3D(3, cc.size(15, 10), 50, false);
    gameBg.runAction( cc.sequence(action, cc.stopGrid()) ); 
```

# mysql - 在 Windows 启动时运行 mysql 调度程序

> ID：13659331
> 
> 赞同：0
> 
> 时间：2012-12-01T12:13:04.200
> 
> 标签：mysql, windows, stored-procedures

我正在使用**mysql 版本 5.5.12-log**。在我的系统中，我正在使用调度程序。但是**如果服务器重新启动，那么调度程序就不起作用**。那个时候我必须使用以下命令再次启用调度程序。当系统重新启动时，很难记住再次运行查询。我该如何修复它。

我的命令：

```
SET GLOBAL event_scheduler = ON;
SET @@global.event_scheduler = ON;
SET GLOBAL event_scheduler = 1;
SET @@global.event_scheduler = 1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:35:35.740

将“ **event_scheduler=ON** ”行写入“ **my.ini** ”文件，在位于“C:\Program Files\MySQL\MySQL Server 5.5”的子句[mysqld]下。我的windows版本是“Windows7”，MySql版本是：5.5 .12\. 现在重新启动服务器并检查变量“ `SELECT @@event_scheduler`”是否为“ **ON** ”。有关详细信息，请检查[链接](https://stackoverflow.com/questions/942354/why-this-mysql-event-cant-get-run)和[链接2](http://dev.mysql.com/doc/refman/5.1/en/events-configuration.html)

# c# - 使用 C# 获取公共推文

> ID：13659338
> 
> 赞同：0
> 
> 时间：2012-12-01T12:13:41.267
> 
> 标签：c#, twitter, tweetsharp, twitter-client

```
TwitterService service = new TwitterService();
service.AuthenticateWith("XXXXXX", "XXXXXXX");
// Geting Tweets On Specific Topic
var twts = service.Search("#ghaza", 100);
List<TwitterSearchStatus> resultList = new List<TwitterSearchStatus>(twts.Statuses);
foreach (var twt in resultList)
{
    Console.WriteLine(twt.Text);
} 
```

我使用此代码获取有关 ghaza 的推文有两件事我想知道

1.  我应该怎么做才能得到`json`结果
2.  这在开始时给了我一些奇怪的输出，例如：

```
    加入佳音
     #伊朗
     ＃伊拉克
     #PAK
     ＃假
     #GHAZA

```

在迭代了一段时间之后，它向我展示了我想要`json`格式化的推文

我用这个：

```
Console.WriteLine("{0} says '{1}'", twt.User.ScreenName, twt.Text); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:05:30.693

这对我有用

```
TwitterResponse<TwitterSearchResultCollection> tr = TwitterSearch.Search("#christmas");

TwitterSearchResultCollection results = tr.ResponseObject;
List<TwitterSearchResult> resultList = results.ToList();

foreach ( TwitterSearchResult resultRow in resultList ) {
    messages.AppendText( "\n" + resultRow.Text );
} 
```

该`TwitterSearchResult`对象具有以下属性（[在文档中找到](http://www.twitterizer.net/documentation/html/T_Twitterizer_TwitterSearchResult.htm)）：

```
CreatedDate 
```

获取或设置创建日期。

```
FromUserId 
```

从用户 ID 获取或设置。

```
FromUserScreenName 
```

获取或设置来自用户屏幕的名称。

```
Geo 
```

获取或设置与结果关联的地理位置。

```
Id 
```

获取或设置状态 ID。

```
Language 
```

获取或设置语言。

```
Location 
```

获取或设置位置。

```
ProfileImageLocation 
```

获取或设置个人资料图片 URL。

```
Source 
```

获取或设置源。

```
Text 
```

获取或设置状态文本。

```
ToUserId 
```

获取或设置为用户 ID。

```
ToUserScreenName 
```

获取或设置用户屏幕的名称。

# cordova - 适用于 iOS 和 Android 的 Phoengap App - 如何设置资产/www 文件夹

> ID：13659343
> 
> 赞同：0
> 
> 时间：2012-12-01T12:14:06.790
> 
> 标签：cordova

因为我正在尝试通过 phonegap 制作应用程序，应该在 iOS 和 Android 以及其他设备（如 Windows）上运行什么我对资产文件夹的敲击有一个小的理解问题。

在文档中，资产/www forlder 中的所有内容都来自我。HTML/JS/CSS 图像等。

但是，当我在 iOS 应用程序和 Android 应用程序之间特别是在设计上有小的差异时，会发生什么。我应该在 www 文件夹中打包所有内容并进行每次检查，如果是 iOS，那么这个，如果是 Android，那么这个，或者我应该制作单独的文件夹，例如 assets/www/android 和 assets/www/iOS 并在那里有不同的代码和图像对于每个平台或使其像维基百科：[https ://github.com/wikimedia/WikipediaMobile](https://github.com/wikimedia/WikipediaMobile)

在 Wikipedia 的应用程序中的 www 文件夹中，每个平台都有子文件夹，其中有该平台的属性。这个，我不明白的是他们如何选择使用哪个平台，以及如何知道 iOS 上的应用程序从 iOS forlder 中选择属性？

有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:41:41.973

我主要使用平台之间存在真正差异的预构建脚本 - 大多数东西是不变的，但是当从开发 www 文件夹（它本身是由 jekyll 生成）复制到应用程序 www 文件夹时，一些文件会被换出 - 例如 cordova .android.js 被复制为 cordova.js。

这种方法还允许处理平台之间的一些较大的不一致性，例如视频需要在 res 中，而不是在 android 上。

大多数设计差异都可以通过 CSS 媒体查询来处理。

自定义插件也很有用——它们可以在所有平台上具有相同的接口，但实现完全不同。

如果您最终不得不在运行时切换 javascript 中的某些内容，只需检查 device.platform。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T15:49:04.847

To work with PhoneGap and on different platform, I create different folder : page, plugin, function... All this folder are similar on all platform. This allow you to copy them in a different platform and to see your application running. Just don't copy the cordova.js file.

In each specific function, like Tom, I check the device.platform to adjust the code. But I try to get the most generic code. Be carefull, sometimes the platform don't interpret basic code (like in windows Phone the balise bottom...)

If you use plugins, just don't put it in the same folder as your project one.

When I developed with phonegap, this was my strategy:

-Develop on Android my application, test it

-Copy with a software like diffmerge, the www folder of android in iosproject

-Build ios project, test it

# php - 如何使用分隔符在范围格式的字符串中搜索数字？

> ID：13659346
> 
> 赞同：0
> 
> 时间：2012-12-01T12:14:09.100
> 
> 标签：php

如果我的格式化字符串是：

```
$range = '0|500|0.50'; 
```

如何搜索数字（200）是否存在于 0 到 500 之间？

这是我尝试过的，如果有更好的想法请告诉我

首先爆炸范围？

```
$arr = explode('|', $range);
$min = min($arr);
$max = max($arr); 
```

但我不知道如何从那里进步？在这种情况下，我什至不知道如何从范围 0.50 中排除第三个参数。谁能给我一个起点？我基本上想针对范围搜索数字（使用|分隔符格式化）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:23:42.853

使用[array_pop()](http://php.net/manual/en/function.array-pop.php)函数从数组中删除最后一个元素。

```
$arr = explode('|', $range);
$arr = array_pop($arr);
$min = min($arr);
$max = max($arr); 
```

然后比较最小值和最大值......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:18:06.217

使用它来获取数组的第一个和第二个值

```
$arr = explode('|', $range);
$min = min($arr[0]);
$max = max($arr[1]); 
```

并使用 if 条件进行检查。

# java - 一个对象有多大，不使用分析器

> ID：13659363
> 
> 赞同：1
> 
> 时间：2012-12-01T12:16:44.837
> 
> 标签：java

> **可能重复：**
> [在 Java 中，确定对象大小的最佳方法是什么？](https://stackoverflow.com/questions/52353/in-java-what-is-the-best-way-to-determine-the-size-of-an-object)

我在网上找到了这段代码：

```
static Runtime runtime = Runtime.getRuntime();
...
long start, end;
Object obj;
runtime.gc();
start = runtime.freememory();
obj = new Object(); // Or whatever you want to look at
end =  runtime.freememory();
System.out.println("That took " + (start-end) + " 
bytes."); 
```

但这不是很可靠，关于如何做得更好的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:41:10.953

JVM 以块的形式分配内存，因此可以跨线程同时执行。这称为[线程局部分配缓冲区](http://openjdk.java.net/groups/hotspot/docs/HotSpotGlossary.html)。

> TLAB - 线程本地分配缓冲区。用于快速分配堆空间而无需同步。编译后的代码有一条由几条指令组成的“快速路径”，这些指令试图在当前线程的 TLAB 中碰撞高水位标记，如果碰撞标记落在 TLAB 特定的限制地址之前，则成功分配对象。

如果您将其关闭，`-XX:-UseTLAB`您将获得更准确的内存使用信息。

```
public static void main(String... args) {
    for (int i = 0; i < 10; i++) {
        long used1 = memoryUsed();
        new Object();
        long used2 = memoryUsed();
        System.out.println(used2 - used1);
    }
}

public static long memoryUsed() {
    return Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory();
} 
```

使用默认选项打印

0 0 0 0 0 0 0 0 0 0

和`-XX:-UseTLAB`

16 16 16 16 16 16 16 16 16 16

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T12:42:18.317

我有一些测量对象大小的经验，我学到的一件事是**不信任分析器**。它没有给出真实的测量值，而是**猜测**。具体来说，它在 64 位 VM 上误判了参考数组的大小 100%：实际大小是每个插槽 32 位，它猜测为 64 位。

只要您非常小心地熟悉您的特定配置并确保您获得一致的结果，您的测量方式实际上是可以的。一些额外的建议：

1.  永远不要测量单个对象的大小，而是测量一千个或一百万个对象的数组。在对象之间共享数据的情况下（非常典型的场景），这对于提供更真实的结果非常重要。更改数组大小以查看每个对象的结果始终相同；

2.  在分配数组之前和之后做两`System.gc()`到三秒，在它们之间暂停半秒左右；

3.  不要仅仅`freeMemory`因为堆可以增长而测量；测量`totalMemory() - freeMemory()`。

# php - 在字符串中包含常量

> ID：13659366
> 
> 赞同：2
> 
> 时间：2012-12-01T12:16:54.560
> 
> 标签：php, constants

有没有更短的方法在字符串中包含 PHP 常量？例如，而不是：

```
define("MYCONST","this");
echo "hello, my const is set to: " . MYCONST . ", and that is that."; 
```

例如，我最近了解了`{}`在字符串中包含数组时的标签，这意味着您不必转义。有没有类似的方法可以用常量来做到这一点，这样我就不必每次都逃出字符串来包含它们？

IE

`echo "hello, my const is set to: {MYCONST}, and that is that.";`

..但这似乎不起作用:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:18:05.967

不。不幸的是，如果您想在其中使用常量，则必须连接字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:18:23.477

您不能以这种方式使用常量。您需要使用它添加字符串。否则，还有另一种方式：

### 试试这个：

```
define("MYCONST","this");
echo "hello, my const is set to: " , MYCONST , ", and that is that."; 
```

### 输出：

```
hello, my const is set to: this, and that is that. 
```

### 演示： http: [//phpfiddle.org/main/code/t63-1zx](http://phpfiddle.org/main/code/t63-1zx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T12:24:45.903

`{}`它将值转换为变量不起作用。

# android - Android：如何仅水平缩放 xml imageview

> ID：13659367
> 
> 赞同：1
> 
> 时间：2012-12-01T12:16:56.857
> 
> 标签：android, imageview, scaling

我有一个图像视图，在表格单元格中显示了一个 9 补丁，我想将其用作水平条。但是，无论我尝试什么宽度/高度（match_parent、minWidth 等），我都无法让它缩放以填充单元格。我可以缩放它以使用缩放类型“FitXY”填充整个单元格。如何将缩放设置为 FitX 但保持 Y 不变？

编辑：这是展示我的问题的简化布局。这是一个 2x2 的图像表，包含三个默认 Android 图标副本和一个我的“bluebar”9patch (imageView3) 实例我希望 imageView3 水平拉伸以跨越单元格。

```
<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:weightSum="2"
    android:stretchColumns="*" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_launcher" />

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_launcher" />

    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:layout_weight="1">

        <ImageView
            android:id="@+id/imageView3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:src="@drawable/bluebar" />

        <ImageView
            android:id="@+id/imageView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_launcher" />

    </TableRow>
</TableLayout> 
```

# batch-file - 如果文件存在，则将文件复制为另一个名称

> ID：13659369
> 
> 赞同：0
> 
> 时间：2012-12-01T12:17:17.340
> 
> 标签：batch-file, cmd, backup, xcopy

我想将特定文件从电脑复制到 USB

我的代码：

```
 xcopy /H /Y /C /R "C:\image1.jpeg" "G:\backup\image.jpeg" 
```

我想做以下事情：如果 G:\backup\image1.jpeg 存在，将 image.jpeg 复制为 image2.jpeg（或其他名称），

如果 image2.jpeg 存在，则复制为 image3.jpeg 等。

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:56:34.420

我将假设您的源名称是“image.jpeg”，并且您的目的地具有附加的后缀。

我建议在附加的后缀之前放置一个点，以明确原始名称的结束位置和后缀的开始位置。您的原始名称末尾可能已经有一个数字。

这是一种粗略但非常有效的蛮力方法，最多支持 100 个副本。显然上限很容易提高。

```
call :backup "c:\image.jpeg"
exit /b

:backup
for /l %%N in (1 1 100) do (
  if not exist "G:\backup\%~n1.%%N.%~x1" (
    echo F|xcopy %1 "G:\backup\%~n1.%%N.%~x1" >nul
  )
  exit /b
) 
```

但是有一个潜在的问题。假设 image.1.txt 和 image.2.txt 已经存在，然后你删除了 image.1.txt。下次备份时，它会重新创建 image.1.txt，然后您可能会认为 image.2.txt 是最近的备份。

以下可用于始终创建数字后缀 1 大于现有最大后缀的新备份，即使数字中有整数也是如此。

```
@echo off
call :backup "c:\image.jpeg"
exit /b

:backup
setlocal disableDelayedExpansion
set /a n=0
for /f "eol=: delims=" %%A in (
  'dir /b "g:\backup\%~n1.*%~x1"^|findstr /rec:"\.[0-9][0-9]*\%~x1"'
) do for %%B in ("%%~nA") do (
  setlocal enableDelayedExpansion
  set "n2=%%~xB"
  set "n2=!n2:~1!"
    if !n2! gtr !n! (
    for %%N in (!n2!) do (
      endlocal
      set "n=%%N"
    )
  ) else endlocal
)
set /a n+=1
echo F|xcopy %1 "g:\backup\%~n1.%n%%~x1" >nul 
```

# javascript - 为标签定义 CSS 规则

> ID：13659376
> 
> 赞同：0
> 
> 时间：2012-12-01T12:18:04.803
> 
> 标签：javascript, jquery, html

我只是想知道为标签定义 CSS 规则的最佳方法。网上有很多方法，但我想以最有效的方式实现它。你怎么做呢？我的代码在这里：http: [//jsfiddle.net/mgd5P/](http://jsfiddle.net/mgd5P/)

**HTML**

```
<ul id="tabs">
    <li><a href="#" title="tab1">TTS</a></li>
    <li><a href="#" title="tab2">PMW</a></li>  
</ul>

<div id="content"> 
    <div id="tab1">One - content</div>
    <div id="tab2">Two - content</div>
</div>​ 
```

**JS**

```
$(document).ready(function() {
    $("#content div").hide(); // Initially hide all content
    $("#tabs li:first").attr("id","current"); // Activate first tab
    $("#content div:first").fadeIn(); // Show first tab content

    $('#tabs a').click(function(e) {
        e.preventDefault();        
        $("#content div").hide(); //Hide all content
        $("#tabs li").attr("id",""); //Reset id's
        $(this).parent().attr("id","current"); // Activate this
        $('#' + $(this).attr('title')).fadeIn(); // Show content for current tab
    });
})();​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T12:46:58.717

这是制作标签的纯 CSS 方法（在[csstricks](http://css-tricks.com/functional-css-tabs-revisited/)学习）

1.  使用单选按钮作为选项卡菜单
2.  使用`:checked`钩子设置所选选项卡内容的样式
3.  隐藏实际的单选按钮并将其标签设置为选项卡。单击标签会影响属性中指定的控件`for`，因此单击选项卡仍会影响单选按钮。

这是一个演示：http: [//jsfiddle.net/abwyU/](http://jsfiddle.net/abwyU/)

# c - 我的 c 代码在 c-free 上运行时崩溃，但在 borland 上运行良好？

> ID：13659381
> 
> 赞同：0
> 
> 时间：2012-12-01T12:18:33.670
> 
> 标签：c, segmentation-fault, turbo-c

在 borland c 3.1 中运行我的代码时，它工作正常，但是在 c-free 上运行它时，它在这一行崩溃：`while(ptr1->pright) { ptr1=ptr1->pright; }` 给 SIGSEGV，有什么合乎逻辑的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:22:28.167

您可能正在访问数组边界之外或未分配的内存。因此，您触发了**未定义的行为**，因此几乎任何事情都可能发生，包括崩溃甚至*显然*工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:25:26.123

创建/初始化链接列表的节点时，请确保将节点的成员显式初始化`pright`为`NULL`.

# c++ - 删除双向链表中动态分配的内存时会发生什么情况？

> ID：13659382
> 
> 赞同：-1
> 
> 时间：2012-12-01T12:18:34.397
> 
> 标签：c++, linked-list

假设我有一个双向链表，它有一个指向名为“first”的第一个节点的指针。现在假设我想为这个双向链表创建一个删除“第一个”节点的函数（假设该函数完成了第二张图片中所做的事情；即，一个新的指针节点已被声明为先前的第一个和第一个已迭代一次）。现在我的问题是：如果我先删除新的，那么第一个的 PREV 现在是否指向 NULL？如果不是，它指向什么？本质上，我想知道是否需要明确定义 first->PREV = NULL 或者删除新的 first 是否会完成相同的任务。

注意：如果不清楚，向上箭头用于 PREV，向下箭头用于 NEXT。

![在此处输入图像描述](../Images/36a364a337b045a719d9b5a160979b7f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:21:02.160

你需要明确地做到这一点。当你释放一个对象时，指向它的指针不会被重置为空；他们被悬空了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T12:24:07.977

当您调用 delete 时，您只需释放该内存，如果指针指向该内存区域，它不会改变它的值。
因此，在删除节点的函数中，您还必须将指向已删除区域的指针设置为 NULL（或 nullptr）。

# database - 如何在没有服务器端编码的情况下将数据库文件上传到 FTP 服务器

> ID：13659383
> 
> 赞同：2
> 
> 时间：2012-12-01T12:18:34.857
> 
> 标签：database, upload, ftp

我想制作一个具有数据库文件的应用程序，单击该按钮可将该数据库文件上传到 FTP 服务器进行备份。帮助我如何完成此操作。？

# php - 以不同的方法从两个视图加载驱动程序。从 CI 开始

> ID：13659390
> 
> 赞同：2
> 
> 时间：2012-12-01T12:19:39.137
> 
> 标签：php, codeigniter

这是我在 StackOverflow 上的第一个问题。我从我在 codeigniter 中的第一次开发开始，我对这些观点有疑问。在我的控制器中，我在索引函数中加载视图，但我想从同一控制器中的方法加载另一个视图。我该怎么做？需要另一个控制器来重新发送方法？

```
public function index($_msg = NULL)
    {
        $data['title'] = 'The title';
        $data['msg'] = $_msg;

        $this->load->view(DIRECTORIO_ADMIN . '/login_view2', $data);

    }

public function procesar(){
    {
        //some code here

    }

public function reenviar_password(){
    {
        $this->load->view(DIRECTORIO_ADMIN . '/resend_password_view');

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:36:20.763

根据您的评论，我知道您想使用索引方法显示登录视图，并在用户单击“忘记密码”链接时忘记密码视图并且它位于登录视图

为此，您必须这样做：创建一个登录页面并为“忘记密码”添加一个 url，并为其添加一个忘记密码功能的 url，以便当用户单击“忘记密码”时，他们将重定向到[http:/ /example.com/index.php/controller/reenviar_password](http://example.com/index.php/controller/reenviar_password)

# python - 当掩码为一时，numpy 更改数组值

> ID：13659401
> 
> 赞同：1
> 
> 时间：2012-12-01T12:21:01.130
> 
> 标签：python, numpy

我是 numpy 的新手，我遇到了麻烦。

我有两个 numpy 数组，img 和 thr：

```
>>>img.shape
(2448, 3264, 3)
>>>thr.shape
(2448, 3264) 
```

我想做这样的事情：`img[x,y] = [255,255,255]`只在`thr[x,y] is not 0`

我尝试迭代数组并自己做，但这需要很长时间，所以我真的需要numpy下面的C。我还查看了掩码数组，但我不明白如何使用它们。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T12:23:53.303

[对索引数组](http://docs.scipy.org/doc/numpy/user/basics.indexing.html#assigning-values-to-indexed-arrays)使用NumPy 赋值：

```
img[thr != 0] = [255,255,255] 
```

# database - MS access 2010中的Web DB将用户登录保存到全局变量中

> ID：13659405
> 
> 赞同：3
> 
> 时间：2012-12-01T12:21:32.677
> 
> 标签：database, web, global-variables, ms-access-2010

我是 MS Access 2010 的初学者，请帮助我在 MS Access 2010 的 Web DB 中执行以下操作：

1.  将“用户”表中的用户登录名“全名”保存到全局变量“用户名”中。
2.  当用户从登录表单'login'中选择他的名字时，然后将其插入到另一个表单中的txt文件'Text57'中以将其保存到记录中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T03:14:43.310

您是否有任何理由尝试在这里构建自己的登录表单？如果首先没有合法用户登录，您将无法访问或使用已发布的网站。

因此，以任何方式尝试构建您自己的登录和安全系统都没有绝对意义。用户永远无法启动您的登录表单，除非他们已经拥有合法的用户 ID 和用户登录。他们必须先输入他们的登录名和密码，然后才能启动您的表单，在该表单中您再次建议输入他们的用户 ID 和登录名！

更糟糕的是，尝试构建自己的登录系统会比整个应用程序花费更多的开发时间。更糟糕的是，您构建的最终系统将几乎没有任何安全性。

此外，由于安全系统是作为 Access Web 服务（SharePoint 或 Office 365）的一部分内置的，因此用户无法登录和使用任何应用程序，除非您已经授予他们权限并给予他们有效的登录。因此，无论如何，如果没有合法登录并经过身份验证，他们就永远无法访问此登录表单。

但是，您可以使用以下功能获取和获取当前登录的 Web 用户的使用：

当前网络用户（N）

N 的值为：

```
CurrentWebUser(0) (acWebUserID) This gives the users web id 
eg: 1

CurrentWebUser(1) (acWebUserName)  This give the users web user name
 eg: Albert Kallal

CurrentWebUser(2) (acWebUserLoginName) This gives the users web logon  name 
 eg:RIDES1\Administrator

CurrentWebUser(3) (acWebUserEmail) This gives the users email address
  Eg: someone@example.com 
```

除了上述获取当前登录用户的功能外，您还可以测试您创建的安全组中的用户成员资格。该命令称为：

```
 IsCurrentWebUserInGroup("name of security group") 
```

因此，不清楚您为什么要尝试构建自己的登录表单，因为您的用户都无法访问登录表单，除非他们已经获得了用户登录名和合法密码，然后才能在第一名。

此外，虽然尝试使用 VBA 在基于客户端的应用程序中构建自己的登录系统通常是可能的，但大多数时候整个事情变得不安全，而且整个事情通常是一个巨大的组合。

但是，在访问 Web 服务的情况下，由于编程语言和环境比 VBA 更受限制，因此尝试在访问 Web 服务中构建自己的登录系统比使用 VBA 应用程序这样做更糟糕。

归根结底，有大量命令可让您测试当前用户是谁，此外请记住，所有已发布的 Web 表格都已自动为您记录，并添加了一组额外的列，您可以在其中不仅可以跟踪谁在表中创建了当前记录，还可以跟踪谁最后编辑了该行数据。因此，Access Web 服务中的日志记录和跟踪非常适合参考它，因为它下降到角色级别，并且会自动为您完成。发布链接后为每个表获得的列如下：

```
SharePointEditor        (who edited the row record last)
SharePointAuthor        (who created the row)
SharePointModifiedDate  (time and date of row record last edit)
SharePointCreatedDate   (time and date of when row was created) 
```

请注意，上面这意味着系统不仅会自动跟踪最后编辑行的人，还会向您显示实际创建行的人，这意味着您可以根据上述表达式过滤和构建查询，以将数据限制在给定个人。当您发布到 Web 时，上述附加行会自动添加到所有 Access 表中。

因此，尝试将当前登录的用户提取或利用到某个全局变量中几乎没有任何意义。但是，在登录时，如果您愿意，您当然可以将 CurrentWebUser 表达式设置为全局语言。

# iphone - Xcode 错误消息：“无法检查应用程序包”

> ID：13659409
> 
> 赞同：22
> 
> 时间：2012-12-01T12:21:54.470
> 
> 标签：iphone, ios, xcode, device

我正在尝试在设备上运行我的应用程序，但收到以下错误消息“无法检查应用程序包”，该应用程序已在设备上成功运行，但随后停止，它仍然可以成功构建。其他应用程序运行良好。

这是来自控制台的错误。

> 28 Marafeti mobile_installation_proxy[572]：handle_install：安装失败 12 月 1 日 14:08:29 Marafeti installd[31]：0x2ff7c000 handle_install：API 失败 12 月 1 日 14:11:50 Marafeti dataaccessd[83]：0x1dd6c3b0|DA|注|AccountID： E1B4940D-E02C-4ECF-B6AC-7B0DB8BAAA52（“iCloud”）（旧版）统计数据 DAStatusReport 0x1e8e9d80：{ DASRAccountType = IMAPNotes; DASRPersistentUUID = "E1B4940D-E02C-4ECF-B6AC-7B0DB8BAAA52"; DASRTimeSpan = "37.06999397277832"; } ======= { DASRAccountType = IMAPNotes; DASRPersistentUUID = "E1B4940D-E02C-4ECF-B6AC-7B0DB8BAAA52"; DASRTimeSpan = "37.06999397277832"; } ======= { DASRAccountType = IMAPNotes; DASRPersistentUUID = "E1B4940D-E02C-4ECF-B6AC-7B0DB8BAAA52"; DASRTimeSpan = "37.06999397277832"; } =======

```
AccountID: ABEE9E0F-D30B-488C-AE35-0A67FFC9D0A8 ("Gmail") (Legacy)
Stats DAStatusReport 0x1ddc6af0: {
    DASRAccountType = IMAPNotes;
    DASRPersistentUUID = "ABEE9E0F-D30B-488C-AE35-0A67FFC9D0A8";
    DASRTimeSpan = "36.95116698741913";
}
=======

AccountID: 00D54212-0B42-4D2E-A7CF-517815381FCC ("iCloud") (Legacy)
Stats DAStatusReport 0x1e8e5e30: {
    DASRAccountType = CalDAV;
    DASRFailedNetworkRequests = 3;
    DASRPersistentUUID = "00D54212-0B42-4D2E-A7CF-517815381FCC";
    DASRSuccessfulRequests = 1;
    DASRTimeInNetworking = "0.1138659119606018";
    DASRTimeSpan = "36.83354198932648";
}
DATaskManager <DACoreDAVTaskManager: 0x1e889060> state:Nominal
Active exclusive task: (null)
Queued exclusive tasks: (null)
Independent tasks: (null)
Held independent tasks: (null)
Modal-held independent tasks: (null)
Active queued task: (null)
Queued tasks: (null)
Active modal task: (null)
Queued modal tasks: (null)

Associated with account: <MobileCalDAVMobileMeChildDaemonAccount: 0x1ddc7740>: accountID 00D54212-0B42-4D2E-A7CF-517815381FCC persistentUUID 00D54212-0B42-4D2E-A7CF-517815381FCC
=======

AccountID: 939CC513-0027-4F6E-821B-CC14022CA49A ("Oxinai") (Legacy)
Stats DAStatusReport 0x1e8ece00: {
    DASRAccountType = CalDAV;
    DASRFailedNetworkRequests = 3;
    DASRPersistentUUID = "939CC513-0027-4F6E-821B-CC14022CA49A";
    DASRSuccessfulRequests = 1;
    DASRTimeInNetworking = "0.06468302011489868";
    DASRTimeSpan = "36.41551601886749";
}
DATaskManager <DACoreDAVTaskManager: 0x1ddfb950> state:Nominal
Active exclusive task: (null)
Queued exclusive tasks: (null)
Independent tasks: (null)
Held independent tasks: (null)
Modal-held independent tasks: (null)
Active queued task: (null)
Queued tasks: (null)
Active modal task: (null)
Queued modal tasks: (null)

Associated with account: <MobileCalDAVChildDaemonAccount: 0x1e8e41f0>: accountID 939CC513-0027-4F6E-821B-CC14022CA49A persistentUUID 939CC513-0027-4F6E-821B-CC14022CA49A
=======

AccountID: C82E01E9-8299-49F2-8501-B0C31E05C8FC ("Gmail") (Legacy)
Stats DAStatusReport 0x1e8ef610: {
    DASRAccountType = CalDAV;
    DASRFailedNetworkRequests = 3;
    DASRPersistentUUID = "C82E01E9-8299-49F2-8501-B0C31E05C8FC";
    DASRSuccessfulRequests = 1;
    DASRTimeInNetworking = "0.04899799823760986";
    DASRTimeSpan = "36.41232699155807";
}
DATaskManager <DACoreDAVTaskManager: 0x1dd7b060> state:Nominal
Active exclusive task: (null)
Queued exclusive tasks: (null)
Independent tasks: (null)
Held independent tasks: (null)
Modal-held independent tasks: (null)
Active queued task: (null)
Queued tasks: (null)
Active modal task: (null)
Queued modal tasks: (null)

Associated with account: <MobileCalDAVChildDaemonAccount: 0x1e8eea60>: accountID C82E01E9-8299-49F2-8501-B0C31E05C8FC persistentUUID C82E01E9-8299-49F2-8501-B0C31E05C8FC
=======

AccountID: 915C5A43-FE6D-4EEE-A157-A7D26671DDAA ("iCloud") (Legacy)
Stats DAStatusReport 0x1ddda4a0: {
    DASRAccountType = CardDAV;
    DASRPersistentUUID = "915C5A43-FE6D-4EEE-A157-A7D26671DDAA";
    DASRTimeSpan = "36.39721202850342";
}
DATaskManager <DACoreDAVTaskManager: 0x1e83be40> state:Nominal
Active exclusive task: (null)
Queued exclusive tasks: (null)
Independent tasks: (null)
Held independent tasks: (null)
Modal-held independent tasks: (null)
Active queued task: (null)
Queued tasks: (null)
Active modal task: (null)
Queued modal tasks: (null)

Associated with account: <CardDAVMobileMeChildDaemonAccount: 0x1ddda0e0>: accountID 915C5A43-FE6D-4EEE-A157-A7D26671DDAA persistentUUID 915C5A43-FE6D-4EEE-A157-A7D26671DDAA
=======

AccountID: 2F8D6492-EB6D-4C65-BB6D-29DB9B9D5FDD ("iCloud") (Legacy)
Stats DAStatusReport 0x1dddcb00: {
    DASRAccountType = BookmarkDAV;
    DASRPersistentUUID = "2F8D6492-EB6D-4C65-BB6D-29DB9B9D5FDD";
    DASRTimeSpan = "36.25405502319336";
}
DATaskManager <DACoreDAVTaskManager: 0x1ddcf400> state:Nominal
Active exclusive task: (null)
Queued exclusive tasks: (null)
Independent tasks: (null)
Held independent tasks: (null)
Modal-held independent tasks: (null)
Active queued task: (null)
Queued tasks: (
)
Active modal task: (null)
Queued modal tasks: (null)

Associated with account: <BookmarkDAVMobileMeChildDaemonAccount: 0x1e8f1670>: accountID 2F8D6492-EB6D-4C65-BB6D-29DB9B9D5FDD persistentUUID 2F8D6492-EB6D-4C65-BB6D-29DB9B9D5FDD
=======

AccountID: A7FA469A-9A67-4C93-8FF7-D60BC81AB75C ("Facebook") (Accountsd)
Stats DAStatusReport 0x1e8a8d40: {
    DASRDisplayName = Facebook;
    DASRPersistentUUID = "A7FA469A-9A67-4C93-8FF7-D60BC81AB75C";
    DASRTimeSpan = "36.18959897756577";
}
No Task Manager initted yet=======

AccountID: 34DBB43F-29EB-4B7A-B8EC-6DBAD3CE87BE ("Facebook") (Accountsd)
Stats DAStatusReport 0x1ddc1710: {
    DASRDisplayName = Facebook;
    DASRPersistentUUID = "34DBB43F-29EB-4B7A-B8EC-6DBAD3CE87BE";
    DASRTimeSpan = "36.06168901920319";
}
No Task Manager initted yet=======

_contactsLockHolder (null)
_contactsWaiters (
)
_waiterIDsExpectingContactsLock {(
)}
_eventsLockHolder (null)
_eventsWaiters (
)
_waiterIDsExpectingEventsLock {(
)}
_notesLockHolder (null)
_notesWaiters (
)
_waiterIDsExpectingNotesLock {(
)}
_bookmarksLockHolder (null)
_bookmarksWaiters (
)
_waiterIDsExpectingBookmarksLock {(
)}
Shared DAPowerAssertionManager object <DADaemonPowerAssertionManager: 0x1dd637c0>:
Contexts asserting power: <NSCountedSet: 0x1ddf9fd0> ()
Contexts held aside: <NSCountedSet: 0x1ddf68f0> ()
Active Assertions: {
}

DARefreshManager enabled wrappers:
Topic "com.me.cal" {
    <DARefreshWrapper 0x1ddc14c0 for delegate <MobileCalDAVMobileMeChildDaemonAccount: 0x1ddc7740>: accountID 00D54212-0B42-4D2E-A7CF-517815381FCC persistentUUID 00D54212-0B42-4D2E-A7CF-517815381FCC: Push state 0, style Poll, last registration: (null)>
}
DARefreshManager wrappers:
    <DARefreshWrapper 0x1e889c90 for delegate <MobileCalDAVChildDaemonAccount: 0x1e8e41f0>: accountID 939CC513-0027-4F6E-821B-CC14022CA49A persistentUUID 939CC513-0027-4F6E-821B-CC14022CA49A: Push state 0, style Poll, last registration: (null)>
    <DARefreshWrapper 0x1dd28170 for delegate <CardDAVAgent: 0x1e8af410>: Push state 0, style Poll, last registration: (null)>
    <DARefreshWrapper 0x1e829ae0 for delegate <BookmarkDAVAgent: 0x1e8af570>: Push state 0, style Poll, last registration: (null)>
    <DARefreshWrapper 0x1ddeeac0 for delegate <MobileCalDAVChildDaemonAccount: 0x1e8eea60>: accountID C82E01E9-8299-49F2-8501-B0C31E05C8FC persistentUUID C82E01E9-8299-49F2-8501-B0C31E05C8FC: Push state 0, style Poll, last registration: (null)> 
```

有什么建议吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-29T13:00:44.123

对我来说，我将一个名为“Resources”的文件夹复制到 Xcode 4.6.2 中。当 Xcode 询问时，我为任何添加的文件夹创建了文件夹引用。

每次我这样做时，我都必须转到派生应用程序目录，并删除我的项目的构建目录以使其再次工作。

**解决方案：**不要通过引用将文件夹复制到 Xcode 中，名称为“Resources”。将其重命名为 Resources 以外的其他名称。

非常烦人的错误。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-28T13:06:09.140

也尝试做一个产品->清洁

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-05T13:10:39.090

当我替换 xcode 上的“资源”文件夹时，错误地选择了以下选项。

> **为任何添加的文件夹创建文件夹引用**

但正确的选择应该是，

> **为任何添加的文件夹创建组**

照顾上述选项是节省时间广告解决上述问题的重要一点。（这是出现此错误的可能性之一）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-07T09:13:10.453

问题在于您的捆绑包名称。确保为项目、目标和 info.plist 分配一个包 ID。我有同样的问题，添加捆绑ID后它修复了:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-08T08:53:12.967

我创建了一个名为“ `Resources`”的组，然后选择资源文件夹下的所有资源并选择“为任何添加的文件夹创建文件夹引用”

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-19T13:31:02.023

取消选中 .plist 中的目标成员资格

![](../Images/793b16a0d761285da4a01b18d54fb041.png).

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-09T08:59:45.750

**斯威夫特框架**

对我来说，问题是使用了一个自定义的 Swift 框架，其文件结构类似于以下内容：

[![在此处输入图像描述](../Images/b8ce1775d4fb994999e2268c7755e6f3.png)](https://i.stack.imgur.com/CJ0on.png)

取自： [https ://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPFrameworks/Concepts/FrameworkAnatomy.html](https://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPFrameworks/Concepts/FrameworkAnatomy.html)

事实证明，使用 Swift 的正确框架结构如下所示：

[![在此处输入图像描述](../Images/7705afad84c11616c69914b51ae7b863.png)](https://i.stack.imgur.com/Pap0F.png)

在我将目录结构更改为后者之后 - 一切都按预期工作

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-26T19:45:35.203

我有两个问题为我解决了这个问题。首先，我在 XCodes 复制文件部分进行了配置，以复制 ResourceRules.plist，另一方面，在复制文件部分（在我的例子中为 Storekit）还添加了一个非第三方 ios 框架。删除后问题就解决了。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-10-23T14:11:14.720

在更新到 XCode 6.1 之前，我在使用无线企业应用程序时遇到了同样的问题。

我遇到了通常的嫌疑人（捆绑标识符、名为“资源”的文件或目录、清理和构建等）。没有骰子。

这解决了我的问题 - 我重命名了我的应用程序的 .plist 文件，并从 XCode 更新后运行良好的项目中复制到 .plist 文件中。

重新编译。工作。

我没有逐行比较以查看发生了什么变化……因为我已经为此浪费了一天的时间。也许以后。但不是今天。

希望这可以帮助其他人不要浪费一个下午。

# android - Android 应用内非托管服务器验证

> ID：13659411
> 
> 赞同：1
> 
> 时间：2012-12-01T12:22:06.547
> 
> 标签：android, transactions, in-app-billing

我想第一次在我的应用程序中使用应用内购买。我使用一个非托管项目（它是一个虚拟货币），我想在服务器端使用我的公钥验证交易。

为此，我使用[了 AndroidBillingLibrary](https://github.com/robotmedia/AndroidBillingLibrary)。我设置了一个“signatureValidator”，在“validate（String signedData，String signature）”上调用。这是可行的，我收到了签名数据和签名，我返回“false”表示“这不是正确的购买”。我用这个启动了我的 WS（异步），如果可以，我调用“BillingService.confirmNotifications()”，否则我什么都不做。

但我的问题：如果服务器不验证交易，我不会调用“confirmNotification”，但交易仍然有效，客户必须付费。我该怎么做才能等待服务器响应并取消（或只是未确认）交易不正常？

谢谢 ！

编辑，我添加一些代码：

```
private void requestPurchase(String purchaseId) {
    mPurchaseId = purchaseId;
    // request my purchase
    BillingController.requestPurchase(this, mPurchaseId, false, null);
}

// Receipt the answer of my purchase
@Override
public boolean validate(String signedData, String signature) {
    // when a purchased need to be checked
    mProgressDialog = ProgressDialog.show(this, null, getString(R.string.loading), true, false);
    RequestHelper.getInstance().executeRequest(getRequestCheckReceipt(signedData, signature);
    return false;
}

// Receipt the answer of my WS
@Override
public void onRequestReceived(Request request) {
    if (mProgressDialog != null) {
            mProgressDialog.dismiss();
            mProgressDialog = null;
    }
    if(request.isOk()) {
        BillingService.confirmNotifications(this, new String[] { mPurchaseId };);
    }
} 
```

# css - 使用 CSS 添加文本链接

> ID：13659419
> 
> 赞同：4
> 
> 时间：2012-12-01T12:22:51.943
> 
> 标签：css, transform

我想使用 CSS 选择器将大括号内的所有文本转换为链接。我可以用 JavaScript 编写它，但我想知道它是否可以像这样添加到 CSS 中：

```
p:before {
    content: "<a href'http://example.com/t2'>";
}

p:after {
    content: "</a>";
} 
```

`t2`in将`href`是大括号内文本的副本。

在上面的示例中，所有文本`p`都转换为链接，但是有没有办法只选择花括号内的内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T12:31:44.360

简单的回答：你不能，因为这不是级联样式表的用途。使用 JavaScript

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T12:33:05.913

对这类事情使用 Javascript 通常是个好主意。

CSS 最适合处理页面的表现方面。

您在这里尝试做的是操作页面内容，而 Javascript 就是其中之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T13:58:11.537

CSS 不能用于创建链接。这些事情最好在生成页面时处理，例如在服务器端脚本中。如果您在客户端 JavaScript 中执行此操作，搜索引擎将看不到链接。

# c - mac 'purge' 命令的真正作用是什么？

> ID：13659421
> 
> 赞同：1
> 
> 时间：2012-12-01T12:23:09.087
> 
> 标签：c, macos, systems-programming, purge

我用的是mac机器，我对mac的purge命令的概念很好奇。

当我执行该命令时，它会释放一些像垃圾一样的内存（真的吗？）

我本学期在“系统编程”中学习了虚拟内存概念，但我不知道这种清除实际上是如何做的。

所以我的问题是

1.  如何清除可以区分仍在使用分配的内存块和垃圾？

2.  C中是否有任何小工具或相同的功能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T13:16:09.523

你让我很好奇，因为我不知道 purge 命令是什么，所以我在终端上输入了 man purge ：

```
NAME
     purge -- force disk cache to be purged (flushed and emptied)

SYNOPSIS
     purge

DESCRIPTION
     Purge can be used to approximate initial boot conditions with a cold disk
     buffer cache for performance analysis. It does not affect anonymous mem-
     ory that has been allocated through malloc, vm_allocate, etc.

SEE ALSO
     sync(8), malloc(3) 
```

所以它会删除缓存。

# opengl - TBO/VBO/other 用于带有压缩和 mipmap 的 opengl 纹理

> ID：13659428
> 
> 赞同：2
> 
> 时间：2012-12-01T12:24:15.147
> 
> 标签：opengl, textures

到目前为止，我已经使用过：

纹理创建：

```
glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, texture[1]);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_BASE_LEVEL, 0);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAX_LEVEL, 4);
glTexImage2D(GL_TEXTURE_2D, 0,GL_COMPRESSED_RGBA_S3TC_DXT5_EXT  , tWidth,Height, 0, GL_RGBA, GL_UNSIGNED_BYTE,Data);
glGenerateMipmap(GL_TEXTURE_2D); 
```

纹理用法：

```
glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, texture[1]); 
```

我正在寻找有效的解决方案来将纹理保存在内存中并在着色器中使用它。我已经阅读了一些关于 PBO 和 TBO（以及其他一些解决方案）的内容，但是我无法通过压缩和 mipmap 的示例找到它们。你建议我选择什么？哪个更快？以及它如何与压缩和 mipmap 配合使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T15:59:28.657

> 我认为通过使用缓冲区，驱动程序可以直接访问数据纹理，所以一切都会更快。

这是你问题的根源。

当您调用时`glTexImage2D`，您是在告诉 OpenGL[为纹理对象分配存储空间](http://www.opengl.org/wiki/Texture_Storage)。在此调用之后，纹理将*存储*该图像数据。这就像调用`malloc`，仅用于纹理内存。纹理不再尝试从您提供的内存指针中读取（不是在调用之后）；您可以（并且通常应该）删除它。纹理现在在*内部*具有该数据。

> 那么改变纹理呢？（例如，如果所有内容都不适合内存？）

分配*更多*内存（您正在谈论的缓冲区对象）不会使其更有可能适合内存。如果你内存不足，你就内存不足；做更多的分配是没有帮助的。

更重要的是，缓冲区对象与纹理存在*相同的内存问题。*如果驱动程序喜欢它，它会将它们从 GPU 内存中删除。所以你什么也得不到。所以缓冲区对象存储与纹理对象存储没有区别。

最重要的是，*PBO 和 TBO 不是那样工作的。*

“像素缓冲区对象”只不过是一种[将像素数据异步复制*到*纹理存储中或从中复制*出来的方法*](http://www.opengl.org/wiki/Pixel_Buffer_Object)。复制完成后，缓冲区与纹理不再*关联。*除非您动态修改纹理的内容，否则 PBO 与整体纹理性能几乎没有关系。

[Buffer textures](http://www.opengl.org/wiki/Buffer_Texture) are a way to use a buffer object as the storage for a texture. But buffer textures are a [different texture *type*](http://www.opengl.org/wiki/Texture#Theory); they are as different from 2D textures as 2D textures are different from 3D textures. Buffer textures can't be mipmapped, cannot have array layers, cannot have filtering or any sampling parameters at all, can only use a [very limited set of image formats](http://www.opengl.org/wiki/Buffer_Texture#Image_formats) (and none of them are *compressed*), and they can only be accessed with `texelFetch` and its ilk. They are one-dimensional (but not 1D textures).

Buffer textures are little more than a way for a shader to just directly read from a linear array of GPU memory. You cannot simply *replace* a 2D texture with a buffer texture; you'd have to redesign your shaders and everything.

All in all, you seem to be misunderstanding a lot about OpenGL.

# jquery - 仅隐藏触发元素，而其他元素具有相同的类

> ID：13659432
> 
> 赞同：1
> 
> 时间：2012-12-01T12:24:46.227
> 
> 标签：jquery

我有很多按钮，单击它后，我希望每个按钮都取决于单击的按钮-被隐藏。现在我已经这样做了，但不是这样：

```
$(".like.1").click(function()
{
$(".like.1").hide();
});
$(".like.2").click(function()
{
$(".like.2").hide();
});
$(".like.3").click(function()
{
$(".like.3").hide();
}); 
```

可以这样做吗？

```
$(".like").click(function() 
{
$t(".like").hide(); <--- hide only button which was clicked, while others with same class are not triggered
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T12:26:44.620

```
$(".like").click(function() 
{
    $(this).hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T13:25:26.723

如果您有多个元素来执行某些隐藏功能，您可以尝试以下代码：

```
$(".like").click(function() {
   hideElement($(this));
});

function hideElement(elmt) {
   $(elmt).hide();
} 
```

如果您想在单击每个元素时执行更多其他操作，这使代码更易于维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T12:28:19.230

将您的代码修改为：

```
$(".like").click(function(){
   $(this).hide(); 
}); 
```

该元素将由此获得

# java - 查找类用法

> ID：13659435
> 
> 赞同：1
> 
> 时间：2012-12-01T12:25:15.547
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-jdt

我正在创建一个 Eclipse 插件来重命名类型、方法和字段。使用以下代码我可以重命名类和源文件，但我不知道如何在其他类中找到该类的用法。

```
ITextEditor editor = (ITextEditor) PlatformUI.getWorkbench()
                    .getActiveWorkbenchWindow().getActivePage().getActiveEditor();

ITextSelection selection = (ITextSelection) editor
                    .getSelectionProvider().getSelection();

IEditorInput editorInput = editor.getEditorInput();
IJavaElement elem = JavaUI.getEditorInputJavaElement(editorInput);

if (elem instanceof ICompilationUnit) {
    ICompilationUnit unit = (ICompilationUnit) elem;
    IJavaElement selected = null;
    try {
        selected = unit.getElementAt(selection.getOffset());
    } catch (JavaModelException e) {
        e.printStackTrace();
    }

    if(selected.getElementType() == IJavaElement.TYPE) {            
        IType type = (IType) selected;

        InputDialog input = new InputDialog(HandlerUtil.getActiveShell(event), "Rename...", 
                            "Enter the new name for Type: " + selected.getElementName() , selected.getElementName(), null);
        if(input.open() == InputDialog.OK)
        {
            try {
                type.rename(input.getValue(), true, null);      
            } catch (JavaModelException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T23:42:07.160

您可以使用JDT Core的[SearchEngine API](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/search/SearchEngine.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:16:05.763

我在[这里](https://github.com/kcassell2001/extc/blob/master/src/nz/ac/vuw/ecs/kcassell/utils/EclipseSearchUtils.java)有许多有用的 Eclipse JDT 搜索方法，它们使用[SearchEngine](https://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.jdt.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjdt%2Fcore%2Fsearch%2FSearchEngine.html)等。例如：

```
/**
      * Find all classes that access methods or fields in this class
      * from within the same project.
      * @param element the Java element the search pattern is based on
      * @param scope the elements being examined, e.g. this class or this package
      * @return the handles of the classes that have methods that
      *  reference methods or fields in this class
      */
     public static Set<String> calculateCallingClasses(IJavaElement element,
                     IJavaSearchScope scope)
                     throws CoreException {
             SearchEngine engine = new SearchEngine();
             SearchParticipant[] participants =
                     new SearchParticipant[] { SearchEngine.getDefaultSearchParticipant() };
             SearchPattern pattern =
                     SearchPattern.createPattern(element, REFERENCES);
             IType enclosingType =
                     (IType)element.getAncestor(IJavaElement.TYPE);
             ClientClassCollector collector = new ClientClassCollector(enclosingType);
             try{
                     engine.search(pattern, participants, scope, collector, null);
             } catch (Exception e) {
                     System.err.println(e.toString() + " for " + element.getElementName());
             } 
            Set<String> clients = collector.getResult();
            return clients;
     } 
```

# linux - Linux shell 重命名文件（如果存在）

> ID：13659439
> 
> 赞同：2
> 
> 时间：2012-12-01T12:26:01.087
> 
> 标签：linux, shell

嘿，我有以下代码检查文件是否已经存在于它被删除之前的原始位置。
这有效，如果它不存在，那么它将被移动，这也有效，但我的问题是如何让 shell 脚本要求用户指定一个新名称来重命名文件，然后将其存储在新名称下如果已经存在同名文件。重命名代码应位于第一部分的 echo 下方`if`

```
#! /bin/sh
#restore the dustbin contents 

if [[ -f "$(grep $1 /root/TAM/store) " ]]; then
   echo "A File with the same name already exists please rename this file to store it"
else 
   mv /root/TAM/dustbin/$1 `grep $1 /root/TAM/store`
   cd /root/TAM
   rm store
   touch store
fi 
```

编辑

```
read -p "please enter a new name:  " newName
mv /root/TAM/dustbin/$1 /root/TAM/dustbin/$newName
cd /root/TAM
rm store
touch store 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T12:29:58.730

要提示用户，请尝试这样做：

```
read -p "New name >>> " name
echo "The file name is $name" 
```

# java - 为什么 calendar.getActualMaximum(Calendar.DAY_OF_MONTH) 返回 31 而不是 30？

> ID：13659441
> 
> 赞同：0
> 
> 时间：2012-12-01T12:26:11.657
> 
> 标签：java

为什么我得到 31 而不是 3？现在是 12 月，所以之前的 11 月 = 30。

```
Calendar calendarPreviousMonth = Calendar.getInstance();
        calendarPreviousMonth.add(Calendar.MONTH, calendarCurrent.get(Calendar.MONTH) - 1);
        System.out.println("Amount of days in month " + calendarPreviousMonth.getActualMaximum(Calendar.DAY_OF_MONTH)); 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T12:29:17.357

上个月要查找的代码应如下所示：

```
calendarPreviousMonth.add(Calendar.MONTH, -1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:32:00.170

这是错误的：

```
calendarPreviousMonth.add(Calendar.MONTH, calendarCurrent.get(Calendar.MONTH)-1) 
```

您要么想要添加`-1`到月份，要么将其设置为`calendarCurrent.get(Calendar.MONTH) - 1`. 不是都！试试这个：

```
calendarPreviousMonth.add(Calendar.MONTH, -1); 
```

**或者**这个：

```
calendarPreviousMonth.set(Calendar.MONTH, calendarCurrent.get(Calendar.MONTH)-1) 
```

# android - 相对布局可滚动

> ID：13659442
> 
> 赞同：13
> 
> 时间：2012-12-01T12:26:12.427
> 
> 标签：android, android-relativelayout, scrollable

我已经尝试了很多次来对齐我的 RelativeLayout 中的元素，但我没有得到我期望的结果：

![在此处输入图像描述](../Images/92250fa85b1171f1fc6deeeb75751b83.png)

我想将第一个按钮对齐到右上角，然后我有多个 Textview，我希望它们都是可滚动的，但是当我插入标签时出现错误，这是我的代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/RL01"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical"
  android:padding="5dp">

     <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

    <Button
          android:id="@+id/btnBrowser"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="Browser"
          android:layout_marginTop="5dp"
            >
    </Button>

        <TextView
        android:id="@+id/txtAuthor"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="20dp"
        android:textStyle="bold"
        android:textColor="#143781"
        android:layout_marginTop="10dp"
        android:layout_marginLeft="20dp"
        android:layout_below="@+id/btnBrowser"
        >
    </TextView>
    <TextView
        android:id="@+id/txtDate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="14dp"
        android:textColor="#8D89B3"
        android:layout_marginTop="5dp"
        android:layout_marginLeft="20dp"
        android:layout_below="@+id/txtAuthor">
    </TextView>
    <TextView
        android:id="@+id/txtTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="14dp"
        android:textStyle="bold"
        android:textColor="#000000"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="5dp"
        android:layout_below="@+id/txtDate">
        >
    </TextView>
    <TextView
        android:id="@+id/txtMsg"
        android:layout_height="wrap_content" 
        android:layout_width="wrap_content"
        android:textSize="14dp"
        android:textColor="#000000"
        android:layout_marginLeft="20dp"
        android:layout_below="@+id/txtTitle">
    </TextView>

    <Button
          android:id="@+id/btnReply"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="Reply"
          android:layout_marginTop="20dp"
          android:layout_below="@+id/txtMsg"
          android:layout_centerInParent="@+id/txtMsg">

    </Button>
       </ScrollView>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-01T12:53:05.597

`ScrollView`不允许超过一个直接孩子，这就是你得到错误的原因。所以你尝试如下：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
        android:layout_height="fill_parent">

<RelativeLayout
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">
         <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Button" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/button1"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView2"
        android:text="TextView" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_below="@+id/textView3"
        android:text="Button" />

     </RelativeLayout>
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T12:46:47.030

您不能在滚动视图中放置多个小部件。为此，您必须用视图包装您的小部件。像下面

```
<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
        <Button
            android:id="@+id/btnBrowser"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="false"
            android:layout_marginTop="5dp"
            android:text="Browser" >

        </Button>

        <TextView
            android:id="@+id/txtAuthor"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/btnBrowser"
            android:layout_marginLeft="20dp"
            android:layout_marginTop="10dp"
            android:text="Text"
            android:textColor="#143781"
            android:textSize="20dp"
            android:textStyle="bold" >
        </TextView>

        <TextView
            android:id="@+id/txtDate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/txtAuthor"
            android:layout_marginLeft="20dp"
            android:layout_marginTop="5dp"
            android:textColor="#8D89B3"
            android:textSize="14dp" android:text="Text"
            >
        </TextView>

        <TextView
            android:id="@+id/txtTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/txtDate"
            android:layout_marginLeft="20dp"
            android:layout_marginTop="5dp"
            android:textColor="#000000"
            android:textSize="14dp"
            android:textStyle="bold" android:text="Text">
        </TextView>

        <TextView
            android:id="@+id/txtMsg"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/txtTitle"
            android:layout_marginLeft="20dp"
            android:textColor="#000000"
            android:textSize="14dp" android:text="Text">
        </TextView>

        <Button
            android:id="@+id/btnReply"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/txtMsg"
            android:layout_centerInParent="@+id/txtMsg"
            android:layout_marginTop="20dp"
            android:text="Reply" >
        </Button>
    </RelativeLayout>
</ScrollView> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T12:47:27.473

你在`scrollview`里面添加`relativelayout`。你必须在`Relativelayout`里面添加`scrollview`才能得到结果。还有一件东西`scrollview`一次只能包含一个孩子，所以添加`relativelayout`进去`scrollview`看看有什么不同

# python - 如何在我的应用程序中制作小型股票图标？

> ID：13659445
> 
> 赞同：1
> 
> 时间：2012-12-01T12:26:40.060
> 
> 标签：python, gtk, pygtk, stock

我的应用程序中有一个按钮，我希望它的尺寸​​为 23x23 像素，库存图标为 16x16 像素。

我想出了：

```
closeButton = gtk.ToolButton(gtk.STOCK_CLOSE)
closeButton.set_size_request(23, 23) 
```

但此代码仅更改按钮的大小而不更改图标的大小：/

如何在我的按钮上缩放股票图标？是否有任何小版本的库存商品？像 gtk.STOCK_SMALL_CLOSE 之类的东西？

编辑这是测试创建小库存项目的可能性的示例程序

```
import gtk

class Tab(gtk.VBox):
    def __init__(self, caption):
        gtk.VBox.__init__(self)
        self.Label = self.__createLabel(caption)
        self.show_all()

    def __createLabel(self, caption):
        hbox = gtk.HBox()
        label = gtk.Label(caption)
        hbox.pack_start(label, True, True)
        closeButton = gtk.ToolButton(self._getCloseIcon())
        hbox.pack_start(closeButton, False, False)
        hbox.show_all()
        return hbox

    def _getCloseIcon(self):
        raise NotImplementedError

class TabWithNormalIcons(Tab):
    def __init__(self, caption):
        Tab.__init__(self, caption)

    def _getCloseIcon(self):
        return gtk.STOCK_CLOSE

class TabWithImage16Icons(Tab):
    def __init__(self, caption):
        Tab.__init__(self, caption)

    def _getCloseIcon(self):
        return gtk.image_new_from_stock(gtk.STOCK_CLOSE, 16)

class TabWithSmallToolbarIcons(Tab):
    def __init__(self, caption):
        Tab.__init__(self, caption)

    def _getCloseIcon(self):
        return gtk.image_new_from_stock(gtk.STOCK_CLOSE, gtk.ICON_SIZE_SMALL_TOOLBAR)

class TabWithMenuIcons(Tab):
    def __init__(self, caption):
        Tab.__init__(self, caption)

    def _getCloseIcon(self):
        return gtk.image_new_from_stock(gtk.STOCK_CLOSE, gtk.ICON_SIZE_MENU)

class App(gtk.Window):
    def __init__(self):
        gtk.Window.__init__(self, gtk.WINDOW_TOPLEVEL)
        self.connect('destroy', lambda event: gtk.main_quit())
        self.set_default_size(640, 480)
        notebook = gtk.Notebook()
        tabNumber = 1

        #Icon normal sizes
        for i in range(3):
            tab = TabWithNormalIcons('Tab %s' % str(tabNumber))
            notebook.append_page(tab, tab.Label)
            tabNumber += 1

        #Icons with 16 pixel Image
        for i in range(3):
            tab = TabWithImage16Icons('Tab %s' % str(tabNumber))
            notebook.append_page(tab, tab.Label)
            tabNumber += 1

        #Icons with small toolbar images
        for i in range(3):
            tab = TabWithSmallToolbarIcons('Tab %s' % str(tabNumber))
            notebook.append_page(tab, tab.Label)
            tabNumber += 1

        #Icons with menu images
        for i in range(3):
            tab = TabWithMenuIcons('Tab %s' % str(tabNumber))
            notebook.append_page(tab, tab.Label)
            tabNumber += 1
        self.add(notebook)
        self.show_all()

a = App()
gtk.main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T02:59:20.470

我有一个类似的问题并在 C 中解决了这个问题，虽然我不是 Python 程序员，但我可以给你一个相关函数的提示，所以你也许可以完成你的任务：

首先，您使用 gtk.Widget.render_icon 从股票图标中创建一个 pixbuf。然后，通过 gtk.gdk.Pixbuf.scale_simple，您可以将其调整为所需的任何大小。作为最后一步，您可以从此 pixbuf 创建图像并将其用作按钮。

与相应的 C 函数完美配合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T12:35:00.893

`set_size_request`仅定义您希望小部件具有的最小尺寸。所以确实，它不会缩放孩子，当它的孩子需要时，它也不会阻止它成长。如果可以，那将不是您想要的：它仍然会绘制大图标，但会将其剪辑到按钮上。

所以你想要的是让你的库存商品具有不同的尺寸。我认为最简单的方法是创建一个 gtk.Image，您可以在其中指定库存大小。然后将该图像小部件插入您的按钮而不是库存值。

所以在代码中：

```
image = gtk.image_new_from_stock (gtk.STOCK_CLOSE, gtk.ICON_SIZE_SMALL_TOOLBAR)
closeButton = gtk.Button ()
closeButton.add (image)
closeButton.set_size_request (23, 23) 
```

# r - 使用 S3 为“+”方法模拟多个调度 - 可能吗？

> ID：13659449
> 
> 赞同：8
> 
> 时间：2012-12-01T12:27:06.077
> 
> 标签：r, r-s3

我有两个类（`a`和`b`），我想`+`为它们定义方法。对于这两个类的四种可能组合，我需要不同的方法，即：

```
a + a  method 1
a + b  method 2
b + a  method 3
b + b  method 4 
```

我知道我可以使用 S4 进行多次调度，但我想知道是否有办法使用 S3 来模拟这种行为。我的方法如下：

```
a <- "b"
class(a) <- "a"

b <- "e"
class(b) <- "b"

Ops.a <- function(e1, e2){
  if (class(e1) == "a" &
      class(e2) == "a")
    print("a & a")
  if (class(e1) == "a" &
        class(e2) == "b")
    print("a & b")
  if (class(e1) == "b" &
        class(e2) == "a")
    print("b & a")
  NULL
}

a + a
a + b
b + a 
```

所有这些都可以正常工作，但是当然没有定义以下内容。

```
b + b 
```

现在为了涵盖这种情况，我添加了另一个方法定义。

```
Ops.b <- function(e1, e2){
  if (class(e1) == "b" &
        class(e2) == "b")
    print("b & b")
  NULL
} 
```

这将导致`b + b`工作，但现在`a + b`和`b + a`方法不一致，将导致错误。

```
> a + b
error in a + b : non-numeric argument for binary operator
additional: warning:
incompatible methods ("Ops.a", "Ops.b") for "+" 
```

有没有办法使用 S3 正确定义所有四种情况？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-08-29T20:07:40.443

您可以通过将`+.a`and定义`+.b`为相同的函数来实现。例如：

```
a <- "a"
class(a) <- "a"
b <- "b"
class(b) <- "b"

`+.a` <- function(e1, e2){
  paste(class(e1), "+", class(e2))
}
`+.b` <- `+.a`

a+a
# [1] "a + a"
a+b
# [1] "a + b"
b+a
# [1] "b + a"
b+b
# [1] "b + b"

# Other operators won't work
a-a
# Error in a - a : non-numeric argument to binary operator 
```

如果定义`Ops.a`and `Ops.b`，它也会定义其他运算符的操作，可以`.Generic`在函数中访问：

```
##### Start a new R session so that previous stuff doesn't interfere ####
a <- "a"
class(a) <- "a"
b <- "b"
class(b) <- "b"

Ops.a <- function(e1, e2){
  paste(class(e1), .Generic, class(e2))
}

Ops.b <- Ops.a

a+a
# [1] "a + a"
a+b
# [1] "a + b"
b+a
# [1] "b + a"
b+b
# [1] "b + b"

# Ops covers other operators besides +
a-a
# [1] "a - a"
a*b
# [1] "a * b"
b/b
# [1] "b / b" 
```

**更新**：我在玩这个时发现的另一件事。如果你把它放在一个包中，你会得到“非数字参数”错误和“不兼容的运算符”警告。这是因为 R 仅适用于多个运算符，如果它们是完全相同的对象，在内存中具有相同的地址 - 但不知何故，在构建和加载包时，这两个函数失去了这个确切的身份。（您可以使用 进行检查`pryr::address()`）

我发现有效的一件事是在加载包时显式注册 S3 方法。例如，这将进入您的包中：

```
# Shows the classes of the two objects that are passed in
showclasses <- function(e1, e2) {
  paste(class(e1), "+", class(e2))
}    

.onLoad <- function(libname, pkgname) {
  registerS3method("+", "a", showclasses)
  registerS3method("+", "b", showclasses)
} 
```

在这种情况下，这两个方法指向内存中完全相同的对象，并且它可以工作（尽管它有点小技巧）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T16:11:31.740

好吧，您不能使用该策略。正如您在帮助（Ops）页面中发现和记录的那样，这是特别禁止的。

“如果只为一个参数找到一个方法，或者为两个参数找到相同的方法，则使用它。如果找到不同的方法，则会出现关于“不兼容的方法”的警告：在这种情况下，或者如果没有找到任何一个方法参数内部方法被使用。”

因此，您需要将所有案例放入同一个方法中。（经过测试，确实成功了。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T12:55:53.060

如果只调用带有相反参数的运算符呢？

```
Ops.b <- function(e1, e2){
  if (class(e1) == "b" &
        class(e2) == "b")
    print("b & b")
  if (class(e1) =="b" & class(e2)=="a")
    e2+e1
  NULL
} 
```

但我强烈建议为此使用适当的多次调度，因此使用 S4。请参阅 [在单个函数中组合 S4 和 S3 方法](https://stackoverflow.com/questions/12100856/combining-s4-and-s3-methods-in-a-single-function) 和 [将 S4 调度添加到基本 R S3 泛型](https://stackoverflow.com/questions/12709933/adding-s4-dispatch-to-base-r-s3-generic)。

# c# - 将 WCF 4 中的默认 JSON 序列化程序替换为 JSON.NET

> ID：13659451
> 
> 赞同：14
> 
> 时间：2012-12-01T12:27:15.970
> 
> 标签：c#, json, wcf, c#-4.0, json.net

我想用 JSON.NET 替换默认的 WCF JSON（适用于所有数据类型）序列化。我已经搜索了整个网络，但找不到有效的解决方案。

这是我的对象：

```
 [JsonObject]
public class TestObject
{
    [JsonProperty("JsonNetName")]
    public string Name = "John";

    [JsonProperty]
    public DateTime Date = DateTime.Now;
} 
```

这是我的 WCF 函数：

```
 [OperationContract]
    [WebGet(BodyStyle = WebMessageBodyStyle.Bare, ResponseFormat = WebMessageFormat.Json)]
    List<TestObject> Get(); 
```

这是 Global.asax 中的代码：

```
 protected void Application_Start(object sender, EventArgs e)
    {
        // Create Json.Net formatter serializing DateTime using the ISO 8601 format
        var serializerSettings = new JsonSerializerSettings();

        serializerSettings.Converters.Add(new IsoDateTimeConverter());
        serializerSettings.Converters.Add(new BinaryConverter());
        serializerSettings.Converters.Add(new JavaScriptDateTimeConverter());
        serializerSettings.Converters.Add(new BinaryConverter());
        serializerSettings.Converters.Add(new StringEnumConverter());

        var config = HttpHostConfiguration.Create().Configuration;

        Microsoft.ApplicationServer.Http.JsonMediaTypeFormatter jsonFormatter = config.OperationHandlerFactory.Formatters.JsonFormatter;

        config.OperationHandlerFactory.Formatters.Remove(jsonFormatter);

        config.OperationHandlerFactory.Formatters.Insert(0, new JsonNetMediaTypeFormatter(serializerSettings));

        var httpServiceFactory = new HttpServiceHostFactory
        {
            OperationHandlerFactory = config.OperationHandlerFactory,
            MessageHandlerFactory = config.MessageHandlerFactory
        };

        //Routing
        RouteTable.Routes.Add(
           new ServiceRoute(
               "Brands", httpServiceFactory,
               typeof(Brands)));

      } 
```

这是 Web.Config：

```
 <endpointBehaviors>
    <behavior name="Behavior_Brands">
      <webHttp defaultOutgoingResponseFormat="Json" defaultBodyStyle="Bare" />
    </behavior>
  </endpointBehaviors> 
```

和服务部分：

```
<service name="TestApp.CoreWCF.Brands">
    <endpoint address="" behaviorConfiguration="Behavior_Brands" binding="webHttpBinding" contract="TestApp.CoreWCF.IBrands">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
  </service> 
```

最后，这是我在启动 URL 时得到的：

“ [http://localhost:30000/Brands/Get](http://localhost:30000/Brands/Get) ”

```
[{"Date":"\/Date(1354364412708+0200)\/","Name":"John"}, {"Date":"\/Date(1354364412708+0200)\/","Name":"John"}] 
```

JSON 答案显然忽略了 JSON.NET 属性。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-02T11:47:40.427

无论如何，我想出了一种手动使用不同序列化程序的方法，它似乎更高效、更快，因为它不通过微软的序列化程序，尽管代码方面有点混乱。

1.  在您的接口和实现它们的类中将所有返回类型设置为“System.ServiceModel.Channels.Message”。

    ```
    [OperationContract]
    [WebGet(BodyStyle = WebMessageBodyStyle.Bare, ResponseFormat = WebMessageFormat.Json)]
    System.ServiceModel.Channels.Message GetData(); 
    ```

2.  创建一个扩展方法，以便您可以使用 JSON.NET 序列化程序（或您想要使用的任何一个）轻松地从对象构建内存流。

    ```
    public static System.ServiceModel.Channels.Message GetJsonStream(this object obj)
    {
        //Serialize JSON.NET
        string jsonSerialized = JsonConvert.SerializeObject(obj);

        //Create memory stream
        MemoryStream memoryStream = new MemoryStream(new UTF8Encoding().GetBytes(jsonSerialized));

        //Set position to 0
        memoryStream.Position = 0;

        //return Message
        return WebOperationContext.Current.CreateStreamResponse(memoryStream, "application/json");
    } 
    ```

3.  在方法体中，将序列化的对象直接返回到流中

    ```
    return yourObject.GetJsonStream(); 
    ```

# javascript - Angular JS：指令中的范围和 ng-repeat

> ID：13659452
> 
> 赞同：1
> 
> 时间：2012-12-01T12:27:32.460
> 
> 标签：javascript, angularjs

我正在尝试编写自定义指令。[这是来自Andy Joslin](http://plnkr.co/edit/T0BgQR)的一个例子的一个分支。

请参阅代码[http://plnkr.co/edit/jXfr6P?p=preview](http://plnkr.co/edit/jXfr6P?p=preview)

我可以将该`selection`方法传递给第一个子范围，但不能更进一步。我知道 ng-repeat 创建子范围，并且原始示例正确更新了模型。但是，不确定如何调用该函数。

```
Click on Apparel -> sel = Apparel ==> works
Click on Mens Shirts  -> sel = Apparel ==> Not OK (needs to be Mens Shirts )
Click on Mens Special Shirts -> sel = Apparel ==> works Not OK (needs to be Mens Special Shirts)
...
Click on Boats -> sel = Boats ==> works 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T20:48:34.877

我已经设法解决了你的例子。找到解决方案的关键是将指令范围更改为：

```
 scope: {
      tree: '=ngModel',
      selection:'=selection' // changed & to =
    } 
```

因为您必须通过这种方式为每棵树和选择传递选择功能：

```
selection="selection" // was selection="selection(val)" 
```

请参阅我的分叉 plunker：[http ://plnkr.co/edit/2tal6V?p=preview](http://plnkr.co/edit/2tal6V?p=preview)

# entitydatasource - 从代码后面构建实体数据源控制

> ID：13659453
> 
> 赞同：0
> 
> 时间：2012-12-01T12:27:42.563
> 
> 标签：entitydatasource

如果我的 aspx 中有一个 entitydatasource 控件（看起来像这样，是由设计器中的配置向导创建的并且可以工作）

```
<asp:EntityDataSource ID="edsFuelPrices" runat="server"
                        ConnectionString="name=enerEntities" DefaultContainerName="enerEntities"
                        EnableFlattening="False" EntitySetName="dieselprices" Select="it.[date], it.[NYMarineDiesel]">
                </asp:EntityDataSource> 
```

我想在后面的代码中构建它并从 aspx 标记中删除所有属性。为什么以下不起作用？即使 NYMarineDiesel 是表中的有效列，我在加载时收到错误“查询语法无效。接近转义标识符 '[NYMarineDiesel]'，第 1 行，第 21 列”

```
Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then
        ' when page loads for the first time just show the Marine diesel prices
        Try
            edsFuelPrices.ConnectionString = "name=enerteckEntities"
            edsFuelPrices.DefaultContainerName = "enerteckEntities"
            edsFuelPrices.EnableFlattening = False
            edsFuelPrices.EntitySetName = "dieselprices"
            'edsFuelPrices.Include = "Date,NYMarineDiesel"
            edsFuelPrices.Select = "it.[Date], it[NYMarineDiesel]"
        Catch ex As Exception
            MsgBox("An error occurred while loading this page: " & ex.Message.ToString())
        End Try
    Else
        'need to add the code on postbacks, the data returned for the chart is  determined by what checkboxes are checked in the checkboxlist

    End If
                'FormatXAxisLabels(chtFuelPrices, "MainChartArea", 9)
                FormatYAxisLabels(chtFuelPrices, "MainChartArea", 9)
                FormatLineCharts(chtFuelPrices, True, "MainLegend", "Fuel Types")
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:37:17.547

您不是在“它”和属性名称之间缺少一个点吗？- 你有`it[NYMarineDiesel]`，我相信你应该有`it.[NYMarineDiesel]"`

# html - 在 html 页面中写单词Українська

> ID：13659459
> 
> 赞同：-1
> 
> 时间：2012-12-01T12:28:28.933
> 
> 标签：html, special-characters, notepad++

请我尝试在 html 页面中写单词“ **Українська** ”，所以我将它复制并粘贴到记事本++ 编辑器中，但它给了我“ **??????????** ”

我认为这是一个 html 特殊字符，请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:29:40.057

确保文件的编码是`UTF-8`（`Encoding`菜单），你有`meta`这个编码的正确元素并且服务器正在返回`UTF-8`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T13:02:43.270

我认为默认情况下 Notepad++ 使用 ANSI，它解释了你得到的问号。

要切换到 UTF-8 模式，请转到`Encoding > Encode in UTF-8`然后尝试粘贴该单词。

![编码菜单截图](../Images/2d620d49c227bcb2a2085d169e5e2669.png)

然后确保 HTML 页面具有上面其他答案中解释的元字符集，以便可以在浏览器上正确查看：

```
 <meta http-equiv="Content-Type" content="text/html"; charset="utf-8"> 
```

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T12:33:40.047

在 html 代码中使用 utf-8 编码。

[http://en.wikipedia.org/wiki/Character_encodings_in_HTML](http://en.wikipedia.org/wiki/Character_encodings_in_HTML)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T12:33:42.047

当您使用 对特殊字符进行编码时，问号通常会替换无法`utf8`解码的特殊字符，因为默认情况下 Web 浏览器使用`iso-latin1`. 您应该使用以下指令明确声明网页的编码：

```
<meta http-equiv="Content-Type" content="text/html"; charset="utf-8"> 
```

对于像这样的特殊字符，我更喜欢使用 HTML 实体

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T13:55:33.303

您可以在编写程序、HTML 级别和服务器（如果需要）中解决字符编码问题，或者您可以采取使用字符引用的捷径，它独立于编码工作。后者是可行的，如果你只需要，比如说，一个页面上的乌克兰语单词，否则是英语。在这种情况下，您可以使用

```
&#1059;&#1082;&#1088;&#1072;&#1111;&#1085;&#1089;&#1100;&#1082;&#1072; 
```

（通过复制单词并将其粘贴到 BabelPad 中并使用命令 Convert → Numerical Character References (NCR) → Unicode to NCR (hex) 来构建。）

# ruby-on-rails - 当我从终端断开连接时，乘客 + nginx 失败

> ID：13659462
> 
> 赞同：1
> 
> 时间：2012-12-01T12:29:30.633
> 
> 标签：ruby-on-rails, ubuntu, nginx, passenger

我使用乘客安装的 Ubuntu 12.04 LTS、rvm、passenger 和 nginx。我用 Putty 连接到我的服务器，通过 init.d/nginx 启动 nginx，我的 Rails 应用程序运行良好。

但是当我从终端断开连接时，我会看到标准应用程序错误（出现问题等）。

nginx错误日志输出：

```
<internal:lib/rubygems/custom_require>:29:in `require': no such file to load -- rubygems (LoadError)
  from <internal:lib/rubygems/custom_require>:29:in `require'
  from <internal:gem_prelude>:167:in `load_full_rubygems_library'
  from <internal:gem_prelude>:217:in `try_activate'
  from <internal:lib/rubygems/custom_require>:32:in `rescue in require'
  from <internal:lib/rubygems/custom_require>:29:in `require'
  from /var/lib/passenger-standalone/3.0.18-x86_64-ruby1.9.3-linux-gcc4.6.3-1002/support/helper-scripts/passenger-spawn-server:75:in `<main>'
*** Passenger ERROR (ext/common/ApplicationPool/../SpawnManager.h:220):
Could not start the spawn server: /home/torteg/.rvm/wrappers/ruby-1.9.2-p320/ruby: No such file or directory (2)
*** Passenger ERROR (ext/common/ApplicationPool/../SpawnManager.h:220):
Could not start the spawn server: /home/torteg/.rvm/wrappers/ruby-1.9.2-p320/ruby: No such file or directory (2) 
```

ps辅助输出：

```
root      5066  0.0  0.0 220928  1936 ?        Ssl  15:46   0:00 PassengerWatchdog
root      5069  0.0  0.0 1872956 2340 ?        Sl   15:46   0:00 PassengerHelperAgent
root      5071  0.5  0.2 114348 10172 ?        Sl   15:46   0:00 Passenger spawn server
nobody    5074  0.0  0.1 169324  4688 ?        Sl   15:46   0:00 PassengerLoggingAgent
root      5105  0.0  0.0  39472  1028 ?        Ss   15:46   0:00 nginx: master process /opt/nginx/sbin/nginx
torteg    5106  0.0  0.0  39892  2276 ?        S    15:46   0:00 nginx: worker process
torteg    5116 13.2  1.5 225720 62432 ?        Sl   15:46   0:03 Passenger ApplicationSpawner: /webapps/ngt-storage
torteg    5132  2.4  1.5 230940 64520 ?        Sl   15:46   0:00 Rack: /webapps/ngt-storage
root      5141  0.1  0.1 160656  7272 ?        Ss   15:47   0:00 sshd: torteg [priv]
torteg    5145  0.0  0.0 164168  1820 ?        S    15:47   0:00 sshd: torteg [priv]
torteg    5291  0.0  0.0 160656  2656 ?        S    15:47   0:00 sshd: torteg@pts/3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:29:33.997

因此，当您通过 ssh 连接到生产服务器、世界其他地方（或云中）并访问 mydomain.com 时，它就可以工作了。一旦您退出该 ssh 连接，nginx 和乘客就会停止工作？这两个独立的事件是如何相互关联的？您使用什么服务来托管此应用程序？可能的答案（当你得到我们的答案时会清理这个）

我看到你也在使用 rvm ......除非你的部署用户中没有设置 rvm 路径（只是大声思考）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:22:43.147

使用默认*bash* shell创建了新用户**部署。**为该用户安装了 rvm。然后我设置 user 和passenger_user**部署**在nginx.conf 中。清理过的预编译资产..效果很好！

# php - PHPmaker 动态用户未显示权限复选框

> ID：13659467
> 
> 赞同：1
> 
> 时间：2012-12-01T12:29:51.493
> 
> 标签：php

**问题：**我成功设置了 PHPmaker 软件动态权限所需的 2 个表，但动态权限显示与教程所述不同。我错过了什么？

我知道这应该在 Phpmaker 站点论坛中，但现在看不到在那里创建新帖子的任何链接。虽然我也是注册用户。

见下图：

![在此处输入图像描述](../Images/4e78292c75d2f68a510266deafcd2a06.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-07T08:00:55.877

1.  请从 PHPMaker 帮助菜单中阅读以下主题：

    *   教程 - 高级安全 - 用户 ID 安全
    *   教程 - 高级安全 - 动态用户级安全
2.  您需要重新生成所有脚本文件，包括“生成”对话框窗口的“其他文件”部分下的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-04T17:19:40.007

您可能已经手动创建了权限相关表。最好的推荐方法是使用**PHPMaker 内置的创建表功能**创建这些表，该功能在**高级安全-用户级别**下可用。然后选择用户级别部分和其下的**动态用户级别**。选中**启用动态用户级别**选项后，创建表按钮将可用。您可以单击它，它将创建所需的表并自动设置所有字段。这样您就不会遇到任何与权限相关的问题。

# javascript - 在 Windows 8 Javascript 应用程序中将 XML 的字符串表示形式转换为 XML DOM 对象

> ID：13659468
> 
> 赞同：0
> 
> 时间：2012-12-01T12:29:51.980
> 
> 标签：javascript, xml, dom, windows-8, windows-store-apps

我正在创建一个 Windows 8 JavaScript 应用程序，我需要像这样转换一个字符串：

```
<p>
  blah blah blah
</p>
<div>
  <p>
    random dom stuff
  </p>
</div> 
```

放入一个 XML DOM 对象，所以我可以用 DOM 方法（即`getElementByID()`）遍历它。

我试过两种方法

```
 //retrieve text to process
 var content = xml.querySelector("api > parse > text").textContent;

 //1
 var contentXML = new DOMParser().parseFromString(content, "text/xml");

 //2
 var newContentXML = new ActiveXObject("Microsoft.XMLDOM");
 newContentXM.async = false;
 newContentXM.loadXML(content); 
```

两者都失败了。#1 与`Only one root element is allowed.`, 和 #2 与`Automation server can't create object. Can't load the ActiveX plug-in that has the class ID '{2933BF90-7B36-11D2-B20E-00C04F983E60}'. Applications can't load ActiveX controls.`

我看过的所有地方都说#2 是你应该如何在 IE 中做到这一点，我假设 W8 JS 应用程序使用与 IE 相同的 JavaScript 引擎。

如何将我的文本转换为 XML DOM 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:17:29.680

DOMParser 没问题，报错准确。parseFromString 返回一个文档*的实例*，但是您的文本没有定义单个文档根，它是两个的串联：一个段落和一个 div。

以下将起作用：

```
<div>
  <p>
    blah blah blah
  </p>
  <div>
    <p>
      random dom stuff
    </p>
  </div>
</div> 
```

顺便说一下你原来的字符串，

*   Chrome 的 DOMParser 实现也会抛出错误“Extra content at the end of the document”
*   Firefox 产生“XML Parsing Error: junk after document element”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:07:30.767

IE 很痛苦，而且做事的方式要复杂得多。虽然`DOMParser`适用于大多数浏览器，但在 IE 中，您需要创建一个 ActiveX 对象`MSXML2.DOMDocument.6.0`，`MSXML2.DOMDocument.3.0`或者`MSXML2.DOMDocument`- 以首先受支持的为准。这是一些检测要使用的代码：

```
var xml, tmp;
try {
    if (isIE)   // add your IE detection here
    {
        var versions = ["MSXML2.DOMDocument.6.0",
                "MSXML2.DOMDocument.3.0",
                "MSXML2.DOMDocument"];

        for (var i = 0; i < 3; i++){
            try {
                xml = new ActiveXObject(versions[i]);

                if (xml)
                    break;
            } catch (ex){
                xml = null;
            }
        }

        if (xml)
        {
            xml.async = "false";
            xml.loadXML(str);
        }
    }
    else {
        tmp = new DOMParser();
        xml = tmp.parseFromString(str, "text/xml");
    }
} catch(e) {
    xml = null;
} 
```

# function - Powershell别名内部函数在外部不可用

> ID：13659472
> 
> 赞同：2
> 
> 时间：2012-12-01T12:30:30.603
> 
> 标签：function, powershell, alias

我在文件 myfunc.ps1 中有一个 powershell 函数

```
function Set-Util ($utilPath ) {

    if(Test-Path($utilPath) ){
      $fullPath = Join-Path -Path $utilPath "util.exe"
      set-alias MyUtil $fullPath
      #echo  "Path set to $fullPath"
    }else {
        throw  (" Error: File not found! File path '$fullPath' does not exist.")
    }
} 
```

我点从命令行调用它

> . .\myfunc.ps1

然后打电话

> Set-Util 某个目录

别名已在函数中正确设置，但我无法在此处访问它

> 我的实用程序

我应该导出别名，因为范围仅在方法中吗？我尝试使用 Export-ModuleMember 执行此操作，但收到错误消息，提示只能从模块中调用 cmdlet。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T14:06:58.780

您不能这样做，因为在调用函数之前不会设置别名，并且当调用函数时，别名的范围仅限于函数范围，因此当函数完成运行时 - 别名消失了。

如果您希望别名继续存在，请指定值为“全局”的使用范围参数

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-01T13:10:43.903

[别名只能指向 cmdlet](http://technet.microsoft.com/en-us/library/ee176958.aspx)，不能指向 cmdlet（对象）的输出。

# sql - Sql Count 按多个 Where 条件

> ID：13659480
> 
> 赞同：0
> 
> 时间：2012-12-01T12:31:55.943
> 
> 标签：sql

我对这个 sql 查询有很大的问题。根据我的表格，我需要一些类似这样的结果：

```
table1

Id | Type | Size |Count | OwnerId
___________________________________
1     A      1      12      1
2     A      2      12      1
3     B      1      14      1
4     B      1      20      1
5     A      1      12      2
6     A      1      17      2 
```

表2

```
Id | name
_________
1     A
2     B 
```

结果

```
______________________
Name |  Size1Type1 Count |  Size2Type1 Count |  Size1Type2 Count 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:35:50.053

您没有指定您正在使用什么 RDBMS，但您应该能够通过使用`CASE`语句实现聚合函数来获得结果。这个过程类似于`PIVOT`：

```
select t2.name,
  sum(case when t1.size = 1 and t1.type = 'a' then 1 else 0 end) Size1Type1Count,
  sum(case when t1.size = 2 and t1.type = 'a' then 1 else 0 end) Size2Type1Count,
  sum(case when t1.size = 1 and t1.type = 'b' then 1 else 0 end) Size1Type2Count,
  sum(case when t1.size = 2 and t1.type = 'b' then 1 else 0 end) Size2Type2Count
from table1 t1
inner join table2 t2
  on t1.ownerid = t2.id
group by t2.name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/a8648/1)

结果：

```
| NAME | SIZE1TYPE1COUNT | SIZE2TYPE1COUNT | SIZE1TYPE2COUNT | SIZE2TYPE2COUNT |
--------------------------------------------------------------------------------
|    A |               1 |               1 |               2 |               0 |
|    B |               2 |               0 |               0 |               0 | 
```

如果你想包括你的`count`领域，那么你会使用这样的东西：

```
select t2.name,
  sum(case when t1.size = 1 and t1.type = 'a' then "Count" end) Size1Type1Count,
  sum(case when t1.size = 2 and t1.type = 'a' then "Count" end) Size2Type1Count,
  sum(case when t1.size = 1 and t1.type = 'b' then "Count" end) Size1Type2Count,
  sum(case when t1.size = 2 and t1.type = 'b' then "Count" end) Size2Type2Count
from table1 t1
inner join table2 t2
  on t1.ownerid = t2.id
group by t2.name; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/a8648/16)

结果：

```
| NAME | SIZE1TYPE1COUNT | SIZE2TYPE1COUNT | SIZE1TYPE2COUNT | SIZE2TYPE2COUNT |
--------------------------------------------------------------------------------
|    A |              12 |              12 |              34 |          (null) |
|    B |              29 |          (null) |          (null) |          (null) | 
```

或者您甚至可以对表执行多个连接以获得您想要的结果：

```
select t2.name, 
  sum(t1_a1."count") Size1Type1Count,
  sum(t1_a2."count") Size2Type1Count,
  sum(t1_b1."count") Size1Type2Count,
  sum(t1_b2."count") Size2Type2Count
from table2 t2
left join table1 t1_a1
  on t1_a1.ownerid = t2.id
  and t1_a1.size = 1 
  and t1_a1.type = 'a'
left join table1 t1_a2
  on t1_a2.ownerid = t2.id
  and t1_a2.size = 2
  and t1_a2.type = 'a'
left join table1 t1_b1
  on t1_b1.ownerid = t2.id
  and t1_b1.size = 1
  and t1_b1.type = 'b'
left join table1 t1_b2
  on t1_b2.ownerid = t2.id
  and t1_b2.size = 2
  and t1_b2.type = 'b'
group by t2.name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/a8648/15)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:40:01.247

```
SELECT Name, Type, Size, SUM(Count) AS 'Count' FROM Table1, Table2
WHERE Table1.OwnerID = Tabel2.Id
GROUP BY Name, Type, Size 
```

# php - 在 ajax 请求中中止 cURL

> ID：13659484
> 
> 赞同：0
> 
> 时间：2012-12-01T12:32:11.480
> 
> 标签：php, ajax, jquery, curl

我正在向`ajax.php`使用 cURL 下载 XML 的文件发送 Ajax 请求。

```
//ajax.php

$ch = curl_init();
curl_setopt($ch, CURLOPT_USERPWD,       USERNAME.':'.PASSWORD);
curl_setopt($ch, CURLOPT_POSTFIELDS,    getData());
curl_setopt($ch, CURLOPT_URL,       $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,    1);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT,    5);
curl_setopt($ch, CURLOPT_FRESH_CONNECT,     true);
$data = curl_exec($ch);

echo $data; 
```

用户未确认此过程，可能会刷新网页。

有时`curl_exec($ch)`需要很长时间，我得到一个`timeout`错误。此错误阻止脚本继续。我搜索并没有找到解决此问题的确切解决方案。

现在更大的问题是，在这种情况下，当 ajax 请求在后台处理并且用户刷新页面时，它不会刷新，直到 ajax 请求超时或结束。

我认为在页面刷新时中止该 cURL 请求是一个很好的临时解决方案，但不知道该怎么做。

**注意：**已经使用 jQuery 设置了 Ajax 请求，但中止它`ajax.abort()`并没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:24:03.407

您应该更改应用程序处理此功能的方式。我会尝试在 ajax 调用和实际计算过程之间放置另一个抽象层。

例如，ajax 调用可以初始化 php 后台进程，甚至可以使用 worker 初始化更好的中间件消息队列。作为回应，您提供客户工作 ID（或将其存储在与用户 ID 链接在一起的数据库中）。然后 onTimeout() 正在执行 ajax 请求以获取作业状态。与此同时，后台进程或中间件工作人员正在处理任务并将响应保存到具有相同作业 ID 的数据库中。

所以最终客户初始化工作，然后检查该工作的状态。工作完成后，您在服务器端就知道了。因此，在下一个 ajax 请求中，您会以实际的工作结果进行响应。Javascript 正在接收带有结果的响应，并正在执行回调函数，该函数正在客户端继续工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-01T12:38:59.410

您可以尝试使用 try/catch 块来返回可以在发生此（或其他）错误时处理的内容。

# wordpress - WooCommerce 重写结帐规则

> ID：13659490
> 
> 赞同：1
> 
> 时间：2012-12-01T12:33:23.837
> 
> 标签：wordpress, nginx, woocommerce

我很难调试 Woocommerce 支持的网站的问题。当我结帐时，填写所有订单字段，单击“下订单”按钮，然后有一个 AJAX 请求

[https://www.shop.com/wp-admin/admin-ajax.php](https://www.shop.com/wp-admin/admin-ajax.php)

以成功 JSON 响应：

```
{"result":"success","redirect":"https:\/\/www.shop.com\/checkout\/pay\/?key=order_50b9f4b86e75f&order=4491"} 
```

然后浏览器实际上转到[https://www.shop.com/checkout/pay/?key=order_50b9f4b86e75f&order=4491](https://www.shop.com/checkout/pay/?key=order_50b9f4b86e75f&order=4491)但问题是在此请求中它被重定向回（302 通过标头重定向）到 /checkout 没有 /付款，所有字段为空。但它曾经重定向到 woocommerce 的默认支付网关，在我的例子中是 paypal。订单实际上已下达并在管理员中可见，但用户永远不会被定向到贝宝付款。

当我从 apache 切换到 nginx 服务器时出现这种情况。

这是我为这个站点配置的 nginx：

```
server {
       listen 80;
       server_name shop.com www.shop.com;
       root /var/www/shop;
       index index.php;
error_log    /var/log/nginx/shop_error.log notice;
rewrite_log     on;

       location / {
                try_files $uri $uri/ /index.php;
       }
       location ~* \.(?:ico|css|js|gif|jp?g|png) {
           expires 100d;
       }

       location ~ \.php$ {
          include        fastcgi_params;
          fastcgi_pass   localhost:9000;
       }

#       include /var/www/shop/nginx.conf;

       location = /wp-config.php {
          deny all;
       }

}

server {
       listen 443;
       server_name shop.com www.shop.com;
error_log    /var/log/nginx/shop_error.log notice;
rewrite_log     on;
       root /var/www/shop;
       index index.php;

       ssl on;
       ssl_certificate /etc/nginx/sslchain.crt;
       ssl_certificate_key /etc/nginx/server.key;
       ssl_client_certificate /etc/nginx/cert.ca-bundle;

       ssl_session_timeout 5m;

       ssl_protocols SSLv3 TLSv1;
       ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv3:+EXP;
       ssl_prefer_server_ciphers on;
location / {
       try_files $uri $uri/ /index.php;
}
       #include /var/www/shop/nginx.conf;

       location ~* \.(?:ico|css|js|gif|jp?g|png) {
           expires 100d;
       }
       location ~ \.php$ {
          include        fastcgi_params;
          fastcgi_pass   localhost:9000;
       }

       location = /wp-config.php {
          deny all;
       }

} 
```

我查看了 nginx 重写日志，它正确地将 /checkout/pay 请求重定向到 WP index.php，至少我认为这是正确的。

现在我不要求任何人指出我确切的问题。即使我很感激，但我正在尝试找出 woocommerce 重写规则以及处理 /checkout/pay 的脚本在哪里，我会在重定向到 /checkout**之前**尝试自己调试它以了解它重定向的原因.

“支付”页面在 [woocommerce_pay] 中只有 Woocommerce 短代码，其 URL 似乎是正确的：“/checkout/pay/”

我试图在 shortcodes/shortcode-pay.php 中的函数中放置调试转储，但没有任何反应，所以在此之前它会被重定向？

现在所有缓存插件都已关闭。以下是目前所有活动插件的列表：

```
akismet
debug-bar
gravityforms
secure-wordpress
tinymce-advanced
vslider
woocommerce
woocommerce-compare-products
woocommerce-custom-product-tabs-lite
woocommerce-debug-bar
woocommerce-delivery-notes
woocommerce-fedex
woocommerce-gateway-paypal-advanced
woocommerce-gravityforms-product-addons
woocommerce-product-bundles
woocommerce-usps
woocommerce-USPS
woodojo
woodojo-downloads
woosidebars
wordpress-importer
wordpress-seo
wp-dbmanager 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:37:03.337

我自己发现了错误，这是nginx重写规则的错误配置。具体来说，我想我得到了

```
location / {
   try_files $uri $uri/ /index.php
} 
```

但它应该像[这里](http://wiki.nginx.org/WordPress)的“Abridged basic setup”部分

# random - 随机化 opencart 中的默认产品

> ID：13659495
> 
> 赞同：1
> 
> 时间：2012-12-01T12:34:34.197
> 
> 标签：random, opencart, product

我正在使用 OpenCart V1.5.3.1 并尝试在页面加载时对每个类别的产品进行随机化或洗牌。其他排序选项应该仍然有效（按价格、评级、字母顺序，..）。

任何人都可以给我一些指示？

非常感谢，史蒂文

我试过的代码：在控制器/目录/产品/category.php

略低于

`$this->data['products'][] = array( 'product_id' => $result['product_id'], 'thumb' => $image, 'name' => $result['name'], 'description' => utf8_substr(strip_tags(html_entity_decode($result['description'], ENT_QUOTES, 'UTF-8')), 0, 100) . '..', 'price' => $price, 'special' => $special, 'tax' => $tax, 'rating' => $result['rating'], 'reviews' => sprintf($this->language->get('text_reviews'), (int)$result['reviews']), 'href' => $this->url->link('product/product', 'path=' . $this->request->get['path'] . '&product_id=' . $result['product_id']) );`

我补充说：

```
shuffle($this->data['products']); 
```

而不是这个，我也试过这个：就在下面：

```
$results = $this->model_catalog_product->getProducts($data); 
```

我补充说：

```
 srand((float)microtime() * 1000000);
    shuffle($results);
    $results = array_slice($results, 0, $data['limit']); 
```

不幸的是，这两种方法在选择另一个排序选项（评级、定价、名称）时也会对结果进行洗牌。我只希望页面加载的初始结果被打乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:08:13.853

解决方案：

去`catalog/model/catalog/product.php`寻找方法`getProducts($data)`。在这里改变这个：

```
if (isset($data['sort']) && in_array($data['sort'], $sort_data)) {
    if ($data['sort'] == 'pd.name' || $data['sort'] == 'p.model') {
        $sql .= " ORDER BY LCASE(" . $data['sort'] . ")";
    } else {
        $sql .= " ORDER BY " . $data['sort'];
    }
} else {
    $sql .= " ORDER BY p.sort_order";   
} 
```

对此：

```
if (isset($data['sort']) && in_array($data['sort'], $sort_data)) {
    if ($data['sort'] == 'pd.name' || $data['sort'] == 'p.model') {
        $sql .= " ORDER BY LCASE(" . $data['sort'] . ")";
    } else {
        $sql .= " ORDER BY " . $data['sort'];
    }
} else {
    $sql .= " ORDER BY RAND()"; 
} 
```

（提示：仅最后一次`$sql .= ...`更改）

通过这个简单的更改，如果没有选择排序，产品将始终按随机顺序排序。

# c++ - 错误：opencv2/core/core.hpp：没有这样的文件或目录

> ID：13659496
> 
> 赞同：5
> 
> 时间：2012-12-01T12:34:41.483
> 
> 标签：c++, opencv, compiler-errors, codeblocks

我曾`Code::Blocks 10.05`尝试`OpenCV-2.4.0`从`C:\opencv\samples\cpp`

```
#include "opencv2/core/core.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/calib3d/calib3d.hpp"
#include "opencv2/highgui/highgui.hpp"
#include <stdio.h>
#include <string.h>
#include <time.h>

using namespace cv;
using namespace std;

const char * usage =.... 
```

Code::Blocks 的编译器告诉我：

`C:\opencv\samples\cpp\calibration.cpp|1|Fattal Error: opencv2/core/core.hpp: No such file or directory|`

这是否意味着我必须更改包含代码？使用我自己的包含文件夹所在的路径？那是我`core.hpp`文件中的路径`C:\opencv\modules\core\include\opencv2\core`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:43:42.373

您需要将每个模块的包含目录添加到 Code::Blocks 将搜索包含的目录列表中。这可以通过两种方式完成。如果您希望它们包含在所有项目中

```
Settings -> Compiler & Debugger Settings -> Search Directories. 
```

或仅当前项目

```
Project -> Build Options -> Search Directories 
```

# core-image - CIVignette 的参数是什么意思

> ID：13659499
> 
> 赞同：6
> 
> 时间：2012-12-01T12:34:55.310
> 
> 标签：core-image

[我在http://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CIColorControls](http://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CIColorControls)查看 Core Image Filter Reference 的 CIVignette

并玩弄参数： inputRadius inputIntensity ，但仍然没有完全理解每个参数的影响。可以请人解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:53:01.847

Take a look at wiki understand what vignetting in photography means.
It is the fall of of light starting from the center of an image towards the corner.

Apple does not explain much about the the params.

obviously the radius specifies somehow where the vignetitting starts

the param intensity i expect to be how fast the light goes down after vignetting starts.
The radius may not be given in points, a value of 1.0 relates to your picture size.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T13:24:22.843

强度绝对是 1 到 10 或更大的数字。1有一些效果，10已经相当暗了。

半径似乎以像素（或点）为单位。我使用了一部分图像尺寸（比如宽度的 1/10），效果还不错！但是，如果强度很大（例如 10），则半径可以很小（例如 1），您仍然可以看到不同之处。

# android - 我的应用在 Android 4.0 上明显变慢了

> ID：13659502
> 
> 赞同：9
> 
> 时间：2012-12-01T12:35:22.237
> 
> 标签：android, performance, android-4.0-ice-cream-sandwich

我在 Android 3.2 上开发并测试了一个应用程序，它与 SQLite 数据库交互并在屏幕上显示结果。我没有动画或任何花哨的东西。我所拥有的是很多 ListViews 来向用户显示数据。

该应用程序的数据库非常大，有些表有超过 30 万行。我们尝试在与数据库的每次交互中使用 AsyncTask，但仍有一些地方需要优化性能。

问题是该公司将一些平板电脑更新为 Ice Cream Sandwich，并且该应用程序比 Honeycomb 上的应用程序要慢得多。我在两台设备中加载了相同的代码和相同的数据库，一台运行 ICS，另一台使用 Honeycomb。该应用程序在 3.2 设备中的表现要好得多。我也尝试过使用`<uses-sdk android:minSdkVersion="14" />`，但效果并不好。

我能做些什么来优化 4.0 的性能吗？我也很想知道为什么会发生这种情况，以及是否有什么可能导致这种情况（某些组件或类在 4.0 上不能很好地工作）。

谢谢！

**更新：**我找到了我的应用程序主屏幕的解决方案。我正在展示一个作为水平列表工作的片段，它`HorizontalScrollView`加载了一个巨大的数据列表并创建了很多`LinearLayout`要在 ScrollView 中呈现的内容。我找到了一个 Horizo​​ntalListView 的小部件[并](https://github.com/vieux/Android-Horizontal-ListView "水平列表视图")用它来加载我的列表。只是这让应用程序更快。但是我没有找到为什么在 ICS 上速度较慢的答案。

我也尝试分析应用程序，但这是一件非常困难的事情，有很多信息。在接下来的几周内，我可能仍会这样做以加快申请速度。谢谢大家的回答和评论！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:49:59.907

My guess is it is related to [hardware acceleration](http://developer.android.com/guide/topics/graphics/hardware-accel.html) which is [default enabled for ice cream sandwich](http://androidandme.com/2011/11/news/android-4-0-applications-will-have-hardware-acceleration-turned-on-by-default/). Hardware acceleration is nice but it [sometimes comes with a performance decline](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/TjPKVJOIUUI).

There is another interesting [read](https://plus.google.com/105051985738280261832/posts/2FXDCz8x93s) about android hardware acceleration by Dianne Hackborn on google+ I'd recommend you to look at.

# asp.net-mvc-3 - 如何以优化的方式将许多参数传递给存储过程？

> ID：13659503
> 
> 赞同：0
> 
> 时间：2012-12-01T12:35:22.843
> 
> 标签：asp.net-mvc-3, sql-server-2008, stored-procedures

我正在使用 Web 服务在 ASP.NET MVC 3 中开发一个 Web 项目。我正在使用存储过程以自定义方式执行插入或更新或其他任务等任务。我有超过 10 个参数要传入 SP。这会消耗很多行代码。有没有优化的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:41:19.377

在处理数据库（直接或使用存储过程）时，Micro-ORM 可以让生活更轻松。

作为一个起点，看看 Dapper：[http ://code.google.com/p/dapper-dot-net/](http://code.google.com/p/dapper-dot-net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T12:48:22.637

如果您的存储过程需要 10 个参数，那么最终*必须*将这 10 个参数添加到 SQL 命令中。正如@chamila_c 指出的那样，ORM 可以帮助减少您必须为这些参数分配值的手动工作量，或者从另一个方向 - 从数据库中取出，ORM 可以在您不需要的情况下从数据库中“重新水化”您的对象手动写出所有左右分配。

您*可以*编写一个辅助函数，该函数接受一个 IEnumerable 对象集合，遍历它为您完成分配工作，创建新参数并将它们添加到您的命令中，这将为您节省一些重复的代码行。然后你只需要向你的函数发送一个新的参数列表。但老实说，这种类型的问题是 ORM 存在的原因，您将从采用一个 IMO 中获得其他好处

# java - 如何以编程方式捕获 Oracle Virtual Box 机器的屏幕？

> ID：13659507
> 
> 赞同：1
> 
> 时间：2012-12-01T12:35:56.993
> 
> 标签：java, c++, virtualbox, screen-capture

`VBoxManage`可以做到这一点。但我想在我的程序中自己做这个（写一个机器人）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:16:05.460

**更新：**我已经回答了你的另一个问题：

[VBoxManage.exe 使用什么 API？](https://stackoverflow.com/questions/13649493/what-api-does-vboxmanage-exe-use/)

如果您想要的只是屏幕截图，那么绑定到该 API 会产生相当大的开销。对于该操作，听起来您手中拥有所需的工具......`VBoxManage`已经是跨平台的并且已经构建。对于您实际使用的任何语言/平台，请查看某种形式的[exec 。](/questions/tagged/exec "显示标记为“执行”的问题")

但是，如果您*真的*想进行大量自动化操作并需要更多功能（移动鼠标、在访客屏幕上绘图）……这就是 API 的用途。虽然如果你不使用 C++ 编写它，你可能会让自己感到讨厌。

如果我要走这条路，我可能会遵循 VirtualBox 构建说明并让 VBoxManage 构建。然后我会复制 VBoxManage 构建环境来制作 MyVBoxManage （或其他），并一次调整一点。

# django - 如何使用通用视图在视图中设置模型的字段？

> ID：13659508
> 
> 赞同：3
> 
> 时间：2012-12-01T12:35:58.753
> 
> 标签：django, django-generic-views

我有一个模型，它有一个 author `ForeignKey`，例如：

```
class Appointment(models.Model):
    # ...
    author = models.ForeignKey(User) 
```

我希望在`author`为当前登录的用户创建约会时自动设置该字段。换句话说，作者字段不应该出现在我的 Form 类中：

```
class AppointmentCreateForm(ModelForm):
    class Meta:
        model = Appointment
        exclude = ('author') 
```

有两个问题：

1.  如何访问通用 CreateView 中的表单并设置`author`？
2.  如何告诉表单保存排除的字段以及从用户输入中读取的值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-29T15:31:56.277

以下看起来稍微简单一些。注意 self.request 设置在[`View.as_view`](http://ccbv.co.uk/projects/Django/1.6/django.views.generic.base/View/)

```
class AppointmentCreateView(CreateView):        
    model=Appointment
    form_class = AppointmentCreateForm

    def get_form(self, form_class):
        form = super(AppointmentCreateView, self).get_form(form_class)
        # the actual modification of the form
        form.instance.author = self.request.user
        return form 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T12:35:58.753

我已经修改了我的通用视图子类：

```
class AppointmentCreateView(CreateView):        
    model=Appointment
    form_class = AppointmentCreateForm

    def post(self, request, *args, **kwargs):
        self.object = None
        form_class = self.get_form_class()
        form = self.get_form(form_class)

        # the actual modification of the form
        form.instance.author = request.user

        if form.is_valid():
            return self.form_valid(form)
        else:
            return self.form_invalid(form) 
```

这里有几个重要的部分：

*   我修改了表单`instance`字段，其中包含要保存的实际模型。
*   你当然可以摆脱`form_class`
*   我需要修改的 post 方法是层次结构中的两个类，因此我需要合并基本代码**和**行，将重载和基合并到一个函数中`self.object = None`（我没有调用）。`super``post`

我认为这是解决相当普遍的问题的好方法，而且我再次不必编写自己的自定义视图。

# ms-access - 如何在导入时使用静态标题行信息填充字段？

> ID：13659510
> 
> 赞同：0
> 
> 时间：2012-12-01T12:36:07.317
> 
> 标签：ms-access

就目前而言，我目前希望每月将数据从 Excel 电子表格导入表格。电子表格中的标题行包含运行原始查询的日期。

我有一个包含多个文件的访问主表。我想设置一个自动化流程以在导入时捕获标题中的日期，然后将其记录在导入的每条新记录的字段中。

这里有两个警告：

1.  电子表格的大小会因数据存在的位置而异。
    *   我无法控制如何提供数据。不包含当月数据的字段不会填充到电子表格中。
2.  不太频繁地添加不存在的字段。
    *   到目前为止，我一直在手动识别这些新增内容，并在字段列表的末尾为它们创建一个新字段。我意识到这是非常低效的，如果可以的话，我想自动化它。

有没有人有任何见解？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:39:23.910

好的，这是您要执行的步骤。
创建从 Access 到 Excel 电子表格的链接。Access 现在会将其视为一个表。
使用 Excel 表作为源创建生成表查询，并将日期（从子查询派生）添加为附加字段。
然后运行查询。这将自动创建所有字段。

但是，如果您需要在现有表中创建新字段，则必须使用 VBA，读取 Excel 表中的每个标题，将其与现有表的架构进行比较，然后执行更改表查询以添加场。

祝你好运

# php - preg_split 不适用于价格提取

> ID：13659512
> 
> 赞同：0
> 
> 时间：2012-12-01T12:36:20.003
> 
> 标签：php, regex, preg-split

我正在分解的字符串中有这些类型的可能内容：

```
$string = "$100 USD per year"
$string = "$100USD per year"
$string = "100 USD per year"
$string = "100EUR per year"
$string = "€100EUR per year"
$string = "€100 EUR per year" 
```

这是我正在使用的正则表达式（它适用于 Expresso）：

```
$pattern = "/\$?(\d+\.\d+)(\w{0,3})\s(.*)/i"; 
```

基本上，我希望最终结果是一个如下所示的数组：

```
$arr[0] = "$100" // the "$" optional, also number might be integer or decimal
$arr[1] = "USD";
$arr[2] = "per year"; 
```

这是我正在运行但无济于事的示例 PHP 代码：

```
<?php
$content = "$99.37CAD per year";

$pattern = "/\$?(\d+\.\d+)(\w{0,3})\s(.*)/i";

$myArr = preg_split($pattern, $content);

echo "<pre>";
var_dump($myArr);
echo "</pre>";
?> 
```

输出是：

```
bool(false) 
```

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:40:02.797

你不需要`match`它`split`..

正则表达式也应该是

```
 |->required to capture $ or €
  |                |-----------|-------->needed since there can be 0 to many spaces
 --               ---         ---
/.?(\d+(?:\.\d+)?)\s*(\w{0,3})\s*(.*)/
       ----------                
           |
           |
           |->this is needed since it would not always be 55.43..it could be 55 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T12:42:49.870

问题是`SPACE`价格和欧元/加元/美元之间的关系不是可选的。所以你只需要添加一个`*`，比如`\s*`. 这样，您将告诉 RegEx 该空间是可选的，因此它可以是也可以不是。

另一件事是你必须匹配，而不是分裂。小数位可选。

[演示](http://regex101.com/r/uT5fP1)正则表达式：`[$€]?(\d+(?:\.\d+)?)\s*(\w{0,3})\s*(.*)`

# routes - 如何更改 Rails 路由助手以符合我们的意愿？

> ID：13659513
> 
> 赞同：0
> 
> 时间：2012-12-01T12:36:27.620
> 
> 标签：routes, ruby-on-rails-3.2, helpers

我使用以下命令生成了一个脚手架：

```
rails generate scaffold indice valeur:decimal date:date 
```

我使用华丽的 gem“ [rails-translate-routes](https://github.com/francesc/rails-translate-routes) ”将 URL（路径）翻译成 I18 国际化的法语。

**我还使用我的config/route.rb**将索引控制器放入**命名空间**（app/controller/catalogs/pub_indices_controller.rb）：

 **```
 namespace :catalogs do
    resources :pub_indices
  end 
```

由于 Rails 变形，生成的路线不正确。它使用“index”而不是“indice”来表示单数，尽管我使用“indice”来生成并且我的模型被称为 pub_indice.rb ：

```
 catalogs_pub_indices_fr GET    /catalogues/indices(.:format)                      catalogs/pub_indices#index {:locale=>"fr"}
             catalogs_pub_indices_en GET    /en/catalogs/pub_indices(.:format)                 catalogs/pub_indices#index {:locale=>"en"}
                                     POST   /catalogues/indices(.:format)                      catalogs/pub_indices#create {:locale=>"fr"}
                                     POST   /en/catalogs/pub_indices(.:format)                 catalogs/pub_indices#create {:locale=>"en"}
           new_catalogs_pub_index_fr GET    /catalogues/indices/nouveau(.:format)              catalogs/pub_indices#new {:locale=>"fr"}
           new_catalogs_pub_index_en GET    /en/catalogs/pub_indices/new(.:format)             catalogs/pub_indices#new {:locale=>"en"}
          edit_catalogs_pub_index_fr GET    /catalogues/indices/:id/modifier(.:format)         catalogs/pub_indices#edit {:locale=>"fr"}
          edit_catalogs_pub_index_en GET    /en/catalogs/pub_indices/:id/edit(.:format)        catalogs/pub_indices#edit {:locale=>"en"}
               catalogs_pub_index_fr GET    /catalogues/indices/:id(.:format)                  catalogs/pub_indices#show {:locale=>"fr"}
               catalogs_pub_index_en GET    /en/catalogs/pub_indices/:id(.:format)             catalogs/pub_indices#show {:locale=>"en"}
                                     PUT    /catalogues/indices/:id(.:format)                  catalogs/pub_indices#update {:locale=>"fr"}
                                     PUT    /en/catalogs/pub_indices/:id(.:format)             catalogs/pub_indices#update {:locale=>"en"}
                                     DELETE /catalogues/indices/:id(.:format)                  catalogs/pub_indices#destroy {:locale=>"fr"}
                                     DELETE /en/catalogs/pub_indices/:id(.:format)             catalogs/pub_indices#destroy {:locale=>"en"} 
```

所以我用谷歌搜索了一下，发现了“inflector”这个词......所以我使用了[官方文档](http://guides.rubyonrails.org/routing.html#overriding-the-singular-form)在我的**config/route.rb**中提供的技巧：

```
 ActiveSupport::Inflector.inflections do |inflect|
    inflect.irregular 'indice', 'indices'
  end 
```

路线助手看起来还不错：

```
 catalogs_pub_indices_fr GET    /catalogues/indices(.:format)                      catalogs/pub_indices#index {:locale=>"fr"}
             catalogs_pub_indices_en GET    /en/catalogs/pub_indices(.:format)                 catalogs/pub_indices#index {:locale=>"en"}
                                     POST   /catalogues/indices(.:format)                      catalogs/pub_indices#create {:locale=>"fr"}
                                     POST   /en/catalogs/pub_indices(.:format)                 catalogs/pub_indices#create {:locale=>"en"}
          new_catalogs_pub_indice_fr GET    /catalogues/indices/nouveau(.:format)              catalogs/pub_indices#new {:locale=>"fr"}
          new_catalogs_pub_indice_en GET    /en/catalogs/pub_indices/new(.:format)             catalogs/pub_indices#new {:locale=>"en"}
         edit_catalogs_pub_indice_fr GET    /catalogues/indices/:id/modifier(.:format)         catalogs/pub_indices#edit {:locale=>"fr"}
         edit_catalogs_pub_indice_en GET    /en/catalogs/pub_indices/:id/edit(.:format)        catalogs/pub_indices#edit {:locale=>"en"}
              catalogs_pub_indice_fr GET    /catalogues/indices/:id(.:format)                  catalogs/pub_indices#show {:locale=>"fr"}
              catalogs_pub_indice_en GET    /en/catalogs/pub_indices/:id(.:format)             catalogs/pub_indices#show {:locale=>"en"}
                                     PUT    /catalogues/indices/:id(.:format)                  catalogs/pub_indices#update {:locale=>"fr"}
                                     PUT    /en/catalogs/pub_indices/:id(.:format)             catalogs/pub_indices#update {:locale=>"en"}
                                     DELETE /catalogues/indices/:id(.:format)                  catalogs/pub_indices#destroy {:locale=>"fr"}
                                     DELETE /en/catalogs/pub_indices/:id(.:format)             catalogs/pub_indices#destroy {:locale=>"en"} 
```

但是 Rails 拒绝接受这样的“索引”路由：**new_catalogs_pub_indice_path**

相反，它接受了不正确的形式：**new_catalogs_pub_index_path**尽管 rake route 说的是不同的东西。

谁能解释我做错了什么？（我希望 Rails 没有使用这种单数/复数形式。这会简单得多*sigh*）

===== 更新 =====

好的，我要快速回答这个问题。经过一番搜索，我意识到我的“变形器”代码应该放在**config/initializers/inflections.rb**中：

```
 ActiveSupport::Inflector.inflections do |inflect|
    inflect.irregular 'indice', 'indices'
  end 
```

[官方文档](http://guides.rubyonrails.org/routing.html#overriding-the-singular-form)只是解释了如何。它没有告诉你在哪里。因此，当上下文谈论 config/route.rb 时，我考虑将我的代码放入 route.rb 但这是错误的。

官方文档缺乏关于变形器的解释。真可惜^^要小心，伙计们;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:45:20.947

好的，正如我在更新中解释的那样。

**可以通过在config/initializers/inflections.rb**中使用 infelctor 来更改路由助手的语法。

[官方文档](http://guides.rubyonrails.org/routing.html#overriding-the-singular-form)显示了一个示例。**

# python - Django：输入具有空集合的类的实例

> ID：13659515
> 
> 赞同：0
> 
> 时间：2012-12-01T12:36:41.063
> 
> 标签：python, django

我有一个带有以下类的 Django 应用程序：

```
class Opinion(models.Model):
    id = models.AutoField(primary_key=True)
    contents = models.CharField(max_length=256)
    source = models.CharField(max_length=256)
    proArguments = models.ManyToManyField('self', verbose_name="Pro arguments", related_name='proargs', null='true', blank='true')
    contraArguments = models.ManyToManyField('self', verbose_name="Contra arguments", related_name='contraarg', null='true', blank='true')

    def __unicode__(self):
        return self.contents 
```

当我尝试在管理员中创建此类的新实例时，新创建的意见有 one`proArgument`和 one `contraArgument`，即使我没有输入它们。

![在此处输入图像描述](../Images/d7ce28ea57ad80e1c853929ce0fa71ee.png)

当我不输入它们时，我可以做什么`proargs`来获得空虚？`contraarg`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:52:26.890

多对多字段的多选小部件包含所有可能的`Opinions`. 在您的屏幕截图中，这些字段没有`Opinions`被选中。在您单击一个或多个意见并保存之前，它们不会被选中。

您可能会发现[`filter_horizontal`](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.filter_horizontal)和`filter_vertical`模型管理选项很有帮助。它们使选择了哪些对象更加清晰。

# computer-vision - 非最大抑制

> ID：13659517
> 
> 赞同：13
> 
> 时间：2012-12-01T12:36:56.510
> 
> 标签：computer-vision, non-maximum-suppression

我们已经了解到，您可以获得与`atan(dy/dx)`边缘正交的方向的梯度方向。现在我们有一个作业，我们应该将此方向离散化为四个类别（x 和 y 方向以及两个对角线），然后检查最佳匹配方向上的两个像素邻居以进行**非最大抑制**。

我没有完全得到解决方案。显然我们有四种情况：

1.  `abs(angle) < pi/8`，所以梯度（大致）指向x方向，因此我们检查`img(i, j-1)`和`img(i, j+1)`（假设图像原点在左上角）

2.  `angle > pi/8 && angle <= 3*pi/8`，所以梯度指向右上角。现在我认为我们需要检查`img(i-1, j+1)`，`img(i+1, j-1)`但我们检查`img(i-1, j-1)`并且`img(i+1, j+1)`看起来像正交对角线。

其他两种情况是等价的。我试图改变这一点，但边缘看起来真的很奇怪，所以这似乎是正确的，但我不明白为什么。

谁可以给我解释一下这个？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-12T13:03:26.870

非最大抑制是一种消除不位于重要边缘的点的方法。在第一种情况下，如果给定点的梯度接近零度，则意味着边缘在北或南，如果该点的大小大于该点，则该点将被视为在边缘左右两侧的点的大小（如您的示例中所示）。在第二种情况下，您正在检查 45 度的梯度，因此边缘为 135 度，因此如果该点大于沿梯度方向的点，即 (-1, -1) 和 (1 , 1)。旋转坐标系不会影响这一点。

![在此处输入图像描述](../Images/d3648c04bd5565543a83da3ffcb2c914.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-20T11:08:13.213

这是Canny 边缘检测过程中使用的[非极大值抑制](https://github.com/sebasvega95/Canny-edge-detector/blob/master/nonmax_suppression.py)的 python 实现。

他们集中在北部和南部、东北和西南、东部和西部以及东南和西北。然后决定要保留哪些值。

希望它可以帮助需要 NMS 的人找到更好的优势。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-12T22:44:27.107

原始问题可能会迟到，但以下链接可能会帮助任何努力理解非最大抑制的人。

[非最大抑制的Java Demo](http://users.ecs.soton.ac.uk/msn/book/new_demo/nonmax/)

# java - 将日期作为整数转换为参数

> ID：13659518
> 
> 赞同：1
> 
> 时间：2012-12-01T12:36:56.510
> 
> 标签：java, calendar

如何将 day_of_month、month 和 year 作为整数转换为参数？

```
DateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
Calendar start_date = Calendar.getInstance();     
System.out.println(dateFormat.format(start_date.getTime()));

int day = start_date.get(Calendar.DAY_OF_MONTH);
int month = start_date.get(Calendar.MONTH);
int year = start_date.get(Calendar.YEAR);

String result = day + "/" + month + "/" + year; 
```

但是，今天的日期是：01/12/12，而结果是：01/11/12。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T12:38:04.637

这是预期的行为。月份从 0 到 11。您可以通过发出以下命令进行检查：

```
System.out.println(Calendar.JANUARY); 
```

*   [日历](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)
*   [Calendar.MONTH 特别是](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#MONTH)

顺便说一句，要将日期转换为字符串，您应该真正使用[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

```
new SimpleDateFormat("dd/MM/yyyy").format(start_date.getTime()); 
```

（旁注，但很重要：**SimpleDateFormat 不是线程安全**的，非常不是线程安全的，所以不要尝试通过在多线程环境中将它们用作静态实例来进行优化！API 文档中也说明了这一点`Date formats are not synchronized. It is recommended to create separate format instances for each thread. If multiple threads access a format concurrently, it must be synchronized externally.`：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T12:38:43.070

月份索引从 0 开始，这就是为什么给出 11

> 0- 一月。
> .
> .
> 12月11日

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T12:38:46.183

在`Calendar`课堂上，月份从 0 开始，即一月，以 11 结束，即十二月。

[打开 JDK 6](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Calendar.java#Calendar.0JANUARY) -

```
public final static int JANUARY = 0;
...
public final static int DECEMBER = 11; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T12:39:05.877

从`MONTH`（重点是我的）的文档中：

> `MONTH`: get 和 set 的字段编号，表示月份。这是特定于日历的值。公历和儒略历中的第一个月是 JANUARY **，即 0**；最后一个取决于一年中的月数。

人类日历从一月开始，而不是从零开始。这就是为什么 12 月结束时是 11 点而不是 12 点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-01T12:40:42.933

只是不要使用 java.util.Date 和 java 的其他不好的部分

从 Java 8 开始，joda 时间将在标准库中，所以我看不到使用错误代码的意义。

[http://joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)

你不会有这个问题，相信我。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-01T12:43:09.737

根据文档，结果`start_date.get(Calendar.MONTH)`是`int`从 0 到 11，其中 0 是 1 月，11 是 12 月。

[日历.月](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#MONTH)

# objective-c - 主 UI 线程中的网络通信

> ID：13659528
> 
> 赞同：0
> 
> 时间：2012-12-01T12:38:46.647
> 
> 标签：objective-c, ios, multithreading, networking

我有以下担忧..

我的应用程序第一次启动时会下载 6 MB 的数据。在该过程中`UIView`，会显示有关正在进行的下载的信息，并且通常不会与用户进行交互。

因此，我在主 UI 线程中使用 下载所有数据`dispatch_async`，但现在我不知道这是否是最好的解决方案，以及 Apple 在我提交申请时会说什么。

你能指导我这是否可以吗？

**更新**
调度代码

```
//Called at the end of [UIViewController viewDidLoad]
-(void)splashScreenAppeared
{
myTabBarController_.loadingLabel.text = NSLocalizedString(@"Checking for updates",@"launch progress");
dispatch_queue_t d_queue = dispatch_get_main_queue();
[self launchActionCheckIfDataIsStored:d_queue];
}
//...
-(void)launchActionCheckIfDataIsStored:(dispatch_queue_t)queue
{
dispatch_async(queue, ^ {
    //If there is no data stored in core data then download xml data files and images
    if (![self isAnyDataStoredInCoreData]) {
        launchNoDataStored_ = YES;
        [self launchDownloadData:queue];
    } else {
        launchNoDataStored_ = NO;
        [self launchCheckNewVersion:queue];
    }

});
}
//...
-(void)launchDownloadData:(dispatch_queue_t)queue
{        
myTabBarController_.loadingLabel.text = NSLocalizedString(@"Downloading catalog data",@"launch progress");
dispatch_async(queue, ^ {
    [self loadMenuData];
    if (seriousError_) {
        [self launchSeriousError:queue];
        return;
    }

    myTabBarController_.loadingLabel.text = NSLocalizedString(@"Downloading products details",@"launch progress");
    dispatch_async(queue, ^ {
        [self loadProductsData];
        if (seriousError_) {
            [self launchSeriousError:queue];
            return;
        }
//...
//And so on with other parts of download
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:47:12.887

只是为了设置背景，我已经编写并提交了 2 个成功的应用程序到 App Store，所以你知道我不是在假设。

回来，您可以将下载推送到后台线程并以滑块的形式更新进度（为了用户的利益）。但是，如果在这种情况下，用户无论如何都不能做任何事情，那么就没有意义了。

另外，我认为 Apple 不会仅仅因为这个而拒绝您的应用程序。他们检查的主要事情之一是您是否使用任何私有 API 或更基本的东西，例如应用程序崩溃。所以继续提交应用商店审核...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:51:48.997

现在我知道 UI Thread 中的网络通信可能是 Apple 拒绝您的应用程序的一个很好的理由。

考虑以下场景：

*   应用程序适用于 iPhone。
*   没有与用户的交互。
*   应用程序在 iPad 上运行！！

即使没有与用户交互，当用户在 iPad 上按下**2x按钮时，应用程序也不会做出反应。**

所以 UI 线程中的网络通信是有效的，但如果申请不是仅适用于 iPad，那么申请将在 Apple 审核过程中被拒绝。

# breeze - 本地查询使用“选择”省略/忽略投影

> ID：13659529
> 
> 赞同：1
> 
> 时间：2012-12-01T12:38:48.473
> 
> 标签：breeze

模型（多对多关系的暴露映射表）：

```
 public class TeamUsers
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public long TeamUsersId { get; set; }

    public Team Team { get; set; }
    public User User { get; set; }

    public bool Temporary { get; set; }
} 
```

远程和本地查询的两种通用方法：

```
getAllOfTypeSelectRemote = function (manager, success, failed, resource, orderBy, predicate, select) {
            var query = EntityQuery
                .from(resource)
                .where(predicate)
                .using(manager)
                .select(select)   //<------
                .orderBy(orderBy);
            return query.execute()
                .then(success)
                .fail(failed);
        },

getAllOfTypeSelectLocally = function (manager, resource, orderBy, predicate, select) {
            var res = null;
            try {
                res = EntityQuery
                .from(resource)
                .where(predicate)
                .select(select)   //<-----
                .orderBy(orderBy)
                .using(manager)
                .executeLocally();
            } catch (e) {
                logger.error('resource: ' + resource + '<br>select: ' + select + '<br>orderBy:' + orderBy, 'Local query failed!');
            }
            return res;
        }; 
```

这样称呼：

```
var selectStr = 'User'; //<------

            var p1 = new breeze.Predicate("Team.TeamName", Qop.Equals, team);
            var p2 = breeze.Predicate("User.UserName", Qop.NotEquals, username);
            var predicate = p1.and(p2);

            //var res = dsUtils.getAllOfTypeSelectRemote(manager, success, queryFailed, 'TeamUsers', 'User.Nachname, User.Vorname', p1, select);
            var res = dsUtils.getAllOfTypeSelectLocally(manager, 'TeamUsers', 'User.Nachname, User.Vorname', p1, selectStr); 
```

远程查询返回一个用户实体数组，我相信这是正确的。将“selectStr”修改为“bla”之类的无效类型会按预期抛出异常。结果：

```
data.results = [{"User": {...}}, {"User": {...}}] 
```

本地查询只是忽略选择并返回 TeamUser 结果数组：

```
res=[{ Here are the fields of TeamUsers }, { Here are the fields of TeamUsers }] 
```

将“selectStr”修改为“bla”等无效类型不会引发异常。为什么省略了select，应该是这样的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:36:34.080

从 v 0.74.3 开始，这应该是固定的；ie select 子句现在将被本地查询和远程查询正确解释。希望这可以帮助。

# ruby-on-rails - 错误 505 逃跑超时错误

> ID：13659530
> 
> 赞同：0
> 
> 时间：2012-12-01T12:38:53.397
> 
> 标签：ruby-on-rails, ruby, webrick

执行严格的方法来分析 rails 中的文本。问题是，当用户在服务器上加载一个文本文件正在处理它（有一个搜索关键字排名计算每个单词和许多其他的）作为结果时，服务器处理文本时，它甚至不能向朋友用户显示页面并且是 505 Gateway Time Out Error。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:54:07.173

A gateway timeout error means that your application is taking too long to return a result, and the gateway/proxy which routes the connection to your application has given up. Either increase the timeout on your gateway, or (much better in the long term) consider moving your processor-intensive task to a background thread/process.

# php - 用php备份mysql表

> ID：13659534
> 
> 赞同：3
> 
> 时间：2012-12-01T12:39:11.633
> 
> 标签：php, mysql, backup, dump

`(with PHP)`如果表前缀与子字符串匹配，我想从数据库备份表。我正在尝试但没有工作

```
error_reporting(1);
$dbname = 'wp_dev';

if (!mysql_connect('127.0.0.1', 'root', '')) {
    echo 'Connection Error';
    exit;
}

$sql = "SHOW TABLES FROM $dbname LIKE 'wp_%'";
$result = mysql_query($sql);

if (!$result) {
    echo "DB tables could not be listed\n";
    echo 'MySQL Fehler: ' . mysql_error();
    exit;
}

while ($row = mysql_fetch_row($result)) {
    echo "<pre>Table: {$row[0]}\n</pre>";
    system( 'mysqldump $dbname $row[0] > verlag_$row[0].sql');
}

mysql_free_result($result); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T18:26:10.457

这是一个用于从 db 或仅一些表进行 bakups 的函数

```
function &backup_tables($host, $user, $pass, $name, $tables = '*'){
  $data = "\n/*---------------------------------------------------------------".
          "\n  SQL DB BACKUP ".date("d.m.Y H:i")." ".
          "\n  HOST: {$host}".
          "\n  DATABASE: {$name}".
          "\n  TABLES: {$tables}".
          "\n  ---------------------------------------------------------------*/\n";
  $link = mysql_connect($host,$user,$pass);
  mysql_select_db($name,$link);
  mysql_query( "SET NAMES `utf8` COLLATE `utf8_general_ci`" , $link ); // Unicode

  if($tables == '*'){ //get all of the tables
    $tables = array();
    $result = mysql_query("SHOW TABLES");
    while($row = mysql_fetch_row($result)){
      $tables[] = $row[0];
    }
  }else{
    $tables = is_array($tables) ? $tables : explode(',',$tables);
  }

  foreach($tables as $table){
    $data.= "\n/*---------------------------------------------------------------".
            "\n  TABLE: `{$table}`".
            "\n  ---------------------------------------------------------------*/\n";           
    $data.= "DROP TABLE IF EXISTS `{$table}`;\n";
    $res = mysql_query("SHOW CREATE TABLE `{$table}`", $link);
    $row = mysql_fetch_row($res);
    $data.= $row[1].";\n";

    $result = mysql_query("SELECT * FROM `{$table}`", $link);
    $num_rows = mysql_num_rows($result);    

    if($num_rows>0){
      $vals = Array(); $z=0;
      for($i=0; $i<$num_rows; $i++){
        $items = mysql_fetch_row($result);
        $vals[$z]="(";
        for($j=0; $j<count($items); $j++){
          if (isset($items[$j])) { $vals[$z].= "'".mysql_real_escape_string( $items[$j], $link )."'"; } else { $vals[$z].= "NULL"; }
          if ($j<(count($items)-1)){ $vals[$z].= ","; }
        }
        $vals[$z].= ")"; $z++;
      }
      $data.= "INSERT INTO `{$table}` VALUES ";      
      $data .= "  ".implode(";\nINSERT INTO `{$table}` VALUES ", $vals).";\n";
    }
  }
  mysql_close( $link );
  return $data;
} 
```

如何使用：

```
// create backup
//////////////////////////////////////

$backup_file = 'db-backup-'.time().'.sql';

// get backup
$mybackup = backup_tables("myhost","mydbuser","mydbpasswd","mydatabase","*");

// save to file
$handle = fopen($backup_file,'w+');
fwrite($handle,$mybackup);
fclose($handle); 
```

您可以修改该行：

$result = mysql_query("显示表");

表前缀

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-08T16:43:22.257

和便便

```
<?php
//backup
//function &backup_tables($host, $user, $pass, $name, $tables = '*'){

function &backup_tables($host, $user, $pass, $name, $tables){   
$data = "\n/*---------------------------------------------------------------".
      "\n  SQL DB BACKUP ".date("d.m.Y H:i")." ".
      "\n  HOST: {$host}".
      "\n  DATABASE: {$name}".
      "\n  TABLES: {$tables}".
      "\n  ---------------------------------------------------------------*/\n";
 include "connexion.php";

$myquery="SET NAMES `utf8` COLLATE `utf8_general_ci`";
$result = $mylink->query($myquery);

if($tables == '*'){ //get all of the tables
$tables = array();
$myquery="SHOW TABLES";
$result = $mylink->query($myquery);

while($row = mysqli_fetch_row($result)){
  $tables[] = $row[0];
}
}else{
$tables = is_array($tables) ? $tables : explode(',',$tables);
}

foreach($tables as $table){
$data.= "\n/*---------------------------------------------------------------".
        "\n  TABLE: `{$table}`".
        "\n  ---------------------------------------------------------------*/\n";           
$data.= "DROP TABLE IF EXISTS `{$table}`;\n";

$myquery="SHOW CREATE TABLE `{$table}`";
$result = $mylink->query($myquery);

$row = $result->fetch_row();
$data.= $row[1].";\n";

$myquery="SELECT * FROM `{$table}`";
$result = $mylink->query($myquery);
$num_rows = $result->num_rows;

if($num_rows>0){
  $vals = Array(); $z=0;
  for($i=0; $i<$num_rows; $i++){
    $items = mysqli_fetch_row($result);
    $vals[$z]="(";
    for($j=0; $j<count($items); $j++){
      if (isset($items[$j])) { $vals[$z].= "'".$mylink->real_escape_string($items[$j]) ."'"; } else { $vals[$z].= "NULL"; }
      if ($j<(count($items)-1)){ $vals[$z].= ","; }
    }
    $vals[$z].= ")"; $z++;
  }
  $data.= "INSERT INTO `{$table}` VALUES ";      
  $data .= "  ".implode(";\nINSERT INTO `{$table}` VALUES ", $vals).";\n";
  }
  }
 $mylink->close();
 return $data;
 }

//***********
// called by :

$backup_file = 'db-backup-'.time().'.sql';

// get backup

$host = "yourhost";
$user = "youruser";
$pass = "your_pw";
$name = "your base";
$tables= 'your_table';
 $mybackup = backup_tables($host,$user,$pass,$name,$tables);

// save to file
$handle = fopen($backup_file,'w+');
fwrite($handle,$mybackup);
fclose($handle);

//affichage des résultats, pour savoir si la modification a marchée:
 echo("La sauvegarde à été correctement effectuée") ;

?>

where connection.php is :
<?php
 $mylink = new mysqli("host", "user", "pw", "base");
if ($mylink->connect_errno) {
echo "Echec lors de la connexion à MySQL : " . $mylink->connect_error;
exit();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-14T19:13:07.093

我设置了简单的函数 'openDb()' 和 get($SQL) 来打开数据库并执行 PHP mysql 查询。可能存在逐行复制更有用的情况，但您也可以使用，如果它有效（使用我上面的简单函数）：

```
 openDb($db,$user,$pw);
 get("CREATE TABLE `TABLE1_backup` LIKE `TABLE1`");
 get("INSERT INTO `TABLE1_backup` (SELECT * FROM `TABLE1`)"); 
```

（注意这是一个基本描述。根据需要添加 DROP 等。“get”根据成功返回 T/F，因此对于调试，可能需要测试 false 并提供 MySQLi_ERROR）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-04-11T07:33:12.023

```
function backup_tables($tables = '*', $filepath) {
$data = "\n/*---------------------------------------------------------------" .
        "\n  SQL DB BACKUP " . date("d.m.Y H:i") . " " .
        "\n  HOST: {$host}" .
        "\n  DATABASE: {$name}" .
        "\n  TABLES: {$tables}" .
        "\n  ---------------------------------------------------------------*/\n";
mysql_query("SET NAMES `utf8` COLLATE `utf8_general_ci`"); // Unicode

if ($tables == '*') { //get all of the tables
    $tables = array();
    $result = mysql_query("SHOW TABLES");
    while ($row = mysql_FetchRecordsFromCSV_row($result)) {
        $tables[] = $row[0];
    }
} else {
    $tables = is_array($tables) ? $tables : explode(',', $tables);
}

foreach ($tables as $table) {
    $data.= "\n/*---------------------------------------------------------------" .
            "\n  TABLE: `{$table}`" .
            "\n  ---------------------------------------------------------------*/\n";
    $data.= "DROP TABLE IF EXISTS `{$table}`;\n";
    $res = mysql_query("SHOW CREATE TABLE `{$table}`");
    $row = mysql_fetch_row($res);
    $data.= $row[1] . ";\n";

    $result = mysql_query("SELECT * FROM `{$table}`");
    $num_rows = mysql_num_rows($result);

    if ($num_rows > 0) {
        $vals = Array();
        $z = 0;
        for ($i = 0; $i < $num_rows; $i++) {
            $items = mysql_fetch_row($result);
            $vals[$z] = "(";
            for ($j = 0; $j < count($items); $j++) {
                if (isset($items[$j])) {
                    $vals[$z].= "'" . mysql_real_escape_string($items[$j]) . "'";
                } else {
                    $vals[$z].= "NULL";
                }
                if ($j < (count($items) - 1)) {
                    $vals[$z].= ",";
                }
            }
            $vals[$z].= ")";
            $z++;
        }
        $data.= "INSERT INTO `{$table}` VALUES ";
        $data .= "  " . implode(";\nINSERT INTO `{$table}` VALUES ", $vals) . ";\n";
    }
}
//mysql_close( $link );
$handle = fopen($filepath, 'w+');
fwrite($handle, $data);
fclose($handle); 
```

}

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2020-03-12T15:27:40.650

与 user3365179 相同，但使用 PDO。

将 ISO-8859-1 更改为 utf8

$mylink 在 $GLOBALS['db_pdo']

```
function backup_tables_pdo($host, $user, $pass, $name, $tables) {   
    $data = "\n/*---------------------------------------------------------------".
          "\n  SQL DB BACKUP ".date("d.m.Y H:i")." ".
          "\n  HOST: {$_SERVER['SERVER_NAME']}".
          "\n  DATABASE: {$name}".
          "\n  TABLES: {$tables}".
          "\n  ---------------------------------------------------------------*/\n";
    // include "connexion.php";

    $myquery="SET NAMES `ISO-8859-1` COLLATE `latin1_spanish_ci`";
    $result = $GLOBALS['db_pdo']->query($myquery);

    if($tables == '*'){ //get all of the tables
        $tables = array();
        $myquery="SHOW TABLES";
        $result = $GLOBALS['db_pdo']->query($myquery);

        while($row = mysqli_fetch_row($result)){
          $tables[] = $row[0];
        }
    } else {
        $tables = is_array($tables) ? $tables : explode(',',$tables);
    }

    foreach($tables as $table) {
        $data.= "\n/*---------------------------------------------------------------".
                "\n  TABLE: `{$table}`".
                "\n  ---------------------------------------------------------------*/\n";           
        $data.= "DROP TABLE IF EXISTS `{$table}`;\n";

        $myquery="SHOW CREATE TABLE `{$table}`";
        $result = $GLOBALS['db_pdo']->query($myquery);

        $row = $result->fetch(); // fetch_row()
        $data.= $row[1].";\n";

        $myquery="SELECT * FROM `{$table}`";
        $result = $GLOBALS['db_pdo']->query($myquery);
        $num_rows = $result->rowCount();  // num_rows

        if($num_rows>0) {
          $vals = Array(); $z=0;
          for($i=0; $i<$num_rows; $i++) {
            $items = $result->fetch(PDO::FETCH_NUM);  // mysqli_fetch_row($result)
            //var_dump($items); exit;
            $vals[$z]="(";
            for($j=0; $j<count($items); $j++) {
                if (isset($items[$j])) { 
                    $vals[$z].= $GLOBALS['db_pdo']->quote($items[$j]); //real_escape_string($items
                } else { 
                    $vals[$z].= "NULL"; 
                } 
              if ($j<(count($items)-1)){ $vals[$z].= ","; }
            }
            $vals[$z].= ")"; $z++;
          }
          $data.= "INSERT INTO `{$table}` VALUES ";      
          $data .= "  ".implode(";\nINSERT INTO `{$table}` VALUES ", $vals).";\n";
        }
    }
    return $data;
} 
```

# javascript - 自动保存中使用的表单验证？

> ID：13659537
> 
> 赞同：0
> 
> 时间：2012-12-01T12:39:43.470
> 
> 标签：javascript, jquery, forms, validation, setinterval

我想提出一个`<form>`与 Stackoverflow 上类似的自动保存问题。我知道我们可以使用`setInterval()`and `$.ajax()` [(ref.1](https://stackoverflow.com/questions/931252/ajax-autosave-functionality) [ref.2)](https://stackoverflow.com/questions/5804528/periodically-autosave-form)完成不显眼的自动保存，但我对 Stackoverflow 用来确定表单是否在给定时间间隔后提交的表单验证更感兴趣。

我的问题是，我是否应该保持验证简单并确保用户输入了超过 5 个字符（或者超过 5 个字符已更改）？对于表单验证，我还应该考虑什么，特别是在自动保存的情况下（或与 user-initiated 相比`submit()`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:38:38.273

您可以通过在最后一次击键几秒钟后更新用户的输入来保持简单。

这就是我的 jquery 代码的样子。

```
var timer = null;
$(inputElem).on('keyup',function(){
    clearTimeout(timer);

    // Update user input after 5 seconds of last keystroke
    timer = setTimeout( updateUserInput , 5 * 1000 ); 
}); 
```

需要考虑的重要一点是跟踪修订。如果用户可能不想保留它的当前更改，那么它应该能够恢复到最后一个副本。

仍然所有这些事情都取决于您要开发的应用程序的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:11:11.050

此示例用于测试用户是否更改或添加/删除 5 个字符

按`testDeff`功能

[http://jsfiddle.net/alaa13212/PSJ4z/](http://jsfiddle.net/alaa13212/PSJ4z/)

# ruby-on-rails - 重定向后传递参数以查看的rails

> ID：13659541
> 
> 赞同：1
> 
> 时间：2012-12-01T12:40:06.663
> 
> 标签：ruby-on-rails, controller

我想在重定向后将 2 个字符串传递给视图。控制器：

```
def create
    @rating = Rating.new(params[:rating])

    respond_to do |format|
      if @rating.save
        format.html { redirect_to @rating, :notice => 'Got It!' ,
                      :notice_small => 'Your photo has been uploaded. good luck with it\'s coolness rating!' }
        format.json { render :json => @rating, :status => :created, :location => @rating }
      else
        format.html { render :action => "new" }
        format.json { render :json => @rating.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

风景：

```
<p id="notice" class="big_notice"><%= notice %></p>

<% if defined? notice_small  %>
    <p id="small_notice" class="small_notice"><%= notice_small %></p>
<% end %> 
```

通知字符串抛出但notice_small 没有，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T13:13:03.043

只允许使用`:notice`和`:alert`进行设置`redirect_to`。

如果您想要超出此范围的内容，请使用`:flash => { :notice_small => '....' }`option for`redirect_to`或 set `flash[:notice_small]`before`redirect_to`明确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:52:46.823

据我所知，重定向看起来应该可以工作。但是，要使其在您的视图中可用，您重定向到的操作必须采取`params["notice_small"]`并将其放入实例变量中。就像是

```
@notice_small = params["notice_small"] 
```

在行动中，那么你可以做

```
<% if defined? @notice_small  %>
    <p id="small_notice" class="small_notice"><%= @notice_small %></p>
<% end %> 
```

# php - PHP 注意：类 Closure 的对象无法转换为 int

> ID：13659542
> 
> 赞同：3
> 
> 时间：2012-12-01T12:40:12.577
> 
> 标签：php

我在我的应用程序中收到一个奇怪的警告通知。我在`usort`类中使用自定义函数。这是它的外观：

```
class Class_Name
{
    function zstream_builder()
    {
            $array = some_array();
        //sort posts by date DESC
        usort($array, array('Class_Name', 'zstream_sorter')); // <- the notice is thrown on this line

        return $array;
    }

    private static function zstream_sorter($key = 'sort_str_date')
    {
        return function ($a, $b) use ($key)
        {
            return strnatcmp($a[$key], $b[$key]);
        };
    }
} 
```

这是我收到的通知：

`Notice: Object of class Closure could not be converted to int in PATH_TO_FILE on line xx`

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T12:44:53.697

`usort`将`Class_Name::stream_sorter`作为*比较函数*调用，并传递两个参数。返回值是一个函数，但`usort`需要一个整数来告诉它哪个参数更大。您需要传递 to 的返回值，`Class_Name::stream_sorter`而`usort`不是函数本身：

```
usort($array, self::zstream_sorter()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T12:45:26.963

您的比较函数需要返回一个 int，而不是函数。

如果要选择排序字段，则应使用

```
protected $key = 'sort_str_date';

function zstream_builder()
{
  $array = some_array();
  //sort posts by date DESC
  usort($array, array($this, 'z_sorter')); 

  return $array;
}

function z_sorter($a, $b) 
{
   return strnatcmp($a[$this->key], $b[$this->key]);
} 
```

# css - 带有溢出隐藏父级的下拉菜单

> ID：13659545
> 
> 赞同：4
> 
> 时间：2012-12-01T12:40:43.507
> 
> 标签：css, drop-down-menu, overflow

我有这个下拉菜单，由于#parent 的溢出隐藏而被切断。有没有办法让下拉列表的溢出部分显示在#parent之外，同时保持#parent的溢出隐藏？

[http://jsfiddle.net/vXuuA/](http://jsfiddle.net/vXuuA/)

```
 <div id="parent">
    <ul>
      <li class="dropdown">
        <a href="#">Lorem</a>
        <ul>
          <li><a href="#">Ipsum</a></li>
          <li><a href="#">Dolor</a></li>
        </ul>
      </li>
    </ul>
  </div> 
```

和

```
a {
  color: white;
}
#parent {
  height: 100px;
  background: blue;
}
.dropdown ul {
  width: 100px;
  display: none;
  padding: 50px;
  background: black;
} 
```

和

```
$(".dropdown").hoverIntent({
  over: function() {
    $("ul", this).show();
  },
  out: function() {
    $("ul", this).hide();
  },
  timeout: 500
}); 
```

要求：[http ://cherne.net/brian/resources/jquery.hoverIntent.minified.js](http://cherne.net/brian/resources/jquery.hoverIntent.minified.js)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T12:49:34.603

请将`<ul>`css修改为：

```
.dropdown ul {
  width: 100px;
  display: none;
  padding: 50px;
  background: black;
  z-index:1000;
  position:absolute;
} 
```

这将把菜单带到外面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-17T16:58:27.190

另一种解决方案是将 ul 替换为 select 元素。选择元素似乎总是被渲染，因为您希望下拉列表被渲染，如有必要，在父元素的上方和外部。你需要做一些造型让它看起来不错。查看上面的示例，我不确定选择是否足够灵活以满足您的显示要求，因为您在列表中有一个列表。

```
<div id="parent">
    <select name="select">
      <option value="value1">Value 1</option> 
      <option value="value2" selected>Value 2</option>
      <option value="value3">Value 3</option>
    </select>
</div> 
```

Uttam Kaddam 为 ul 提供高 z-index 并使其位置绝对的解决方案对我来说不起作用，因为我在同一个父元素中有多个列表，实际上是下拉表头，这弄乱了表头的显示.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T01:48:57.693

```
a {
    color: white;
}
#parent-wrapper {
    width: 500px;
    position: relative;
    float:left;
}
#parent {
    height: 100px;
    background: blue;
    display:block;
}
.dropdown ul {
    width: 100px;
    display: none;
    padding: 50px;
    background: black;
    z-index: 2000;
    position: absolute;
} 
```

# c# - C# Facebook SDK 动态数据转换

> ID：13659553
> 
> 赞同：2
> 
> 时间：2012-12-01T12:42:17.700
> 
> 标签：c#, facebook-c#-sdk

我从 Facebook SDK 获得了一个对象

```
var responsePages = (JsonObject)FBClient_.Get(new { ids = 
[123123123, 123123123, 12312213, etc]}); 
```

此查询返回数据（见图）

![结果](../Images/a1f297dfad2ac71b750262a6af22a4c0.png)

现在如何将其转换为对象列表？我已经尝试过，但它不起作用

```
var pe = (from dynamic page
                in (IList<object>)(object)responsePages.Values
                             orderby page.name ascending
                             select new FBPage
                             {
                                 Id = Convert.ToString(page.id),
                             }
                ).ToList(); 
```

所以失败了，希望有任何帮助，因为这种动态的东西让我非常生气。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T02:39:10.113

如果您使用动态，则不需要强制转换。

```
var fb = new FacebookClient();

dynamic result = fb.Get(new { ids = new[] { "...", "..." } });

var pages = new List<FBPage>();
foreach (var page in result.Values)
{
    var fbPage = new FBPage {
        Id = page.id,
        Name = page.name
    };

    pages.Add(fbPage);
} 
```

或者如果你想使用 linq。（动态不支持扩展方法，所以你需要做一些转换`JsonObject => IDictionary<string, dyanmic>`，，，`JsonArray => IList<dynamic>`）

```
var pages = ((IDictionary<string, dynamic>)result)
    .Select(kpv => kpv.Value)
    .Select(p => new FBPage { id = p.id, name = p.name })
    .ToList(); 
```

或者你是强类型的类。

```
var fbPages = fb.Get<IDictionary<string, FBPage>>(new { 
    ids = new[] { "...", "..." } 
}).Values;

public class FBPage
{
    public string id { get; set; }
    public string name { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T13:20:08.090

'responsePages.Values' 是一个`ICollection<JsonValue>`

JsonValues 可以序列化为 Json 字符串，然后可以将其作为 Json 反序列化器（如 Json.Net）的玩物。

使用一个简单的循环，这可能看起来像：

```
List<dynamic> dynamicList = new List<dynamic>();
List<FBPage> pe = new List<FBPage>();

foreach(var page in responsePages.Values)
{
   //ToString is overridden in JsonValue to provide a string in Json format
   string pageAsJsonString = page.ToString();

   //Deserialize (parse) to a dynamic object using Json.Net's JObject.Parse static method
   dynamic parsedPage = JObject.Parse(pageAsJsonString);
   dynamicList.Add(parsedPage);

   //Alternatively, if you have an appropriate object handy, deserialize directly:
   FBPage deserializedPage = JsonConvert.DeserializeObject<FBPage>(pageAsJsonString);
   pe.Add(deserializedPage);
}

foreach(dynamic page in dynamicList)
{
   Console.WriteLine(page.name);
}

foreach(FBPage page in pe)
{
   Console.WriteLine(page.Id);
} 
```

# compiler-errors - How to make Groovy Shell read # symbol

> ID：13659563
> 
> 赞同：0
> 
> 时间：2012-12-01T12:43:25.230
> 
> 标签：compiler-errors, groovyshell

I am having trouble getting the following code to compile in groovy.

```
String execute(Document doc){

    CompilerConfiguration configuration = new CompilerConfiguration()
    configuration.setSourceEncoding("UTF-8")

    binding = new Binding();
    binding.setVariable("doc", doc)

    shell = new GroovyShell(binding, configuration)

    String clipping = shell.evaluate("doc."+jsoupExpression+".text()")

    return clipping 
```

}

This is what should be executed when I call my function like this:

```
//Use a document from test/resources as input
Document doc = Jsoup.parse(new File("test/resources/online.html"), "UTF-8")

//This is what gets passed as jsoupExpression
Rule r = new Rule("select(div#unten div h2).get(1)")

String result = r.execute(doc) 
```

What I get is this exception:

```
| Failure:  testExecute(com.threefact.scrapetastic.RuleTests)
|  org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
Script1.groovy: 1: unexpected char: '#' @ line 1, column 15.
   doc.select(div#unten div h2).get(1).text()
                 ^
1 error 
```

I googled this exception for a while now, but cannot come up with how to resolve this issue. Perhaps someone has experienced a similar situation already and can help me out with this.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:21:09.683

The problem is this line:

```
Rule r = new Rule("select(div#unten div h2).get(1)") 
```

When you isolate the rule, you get this program:

```
select(div#unten div h2).get(1) 
```

I think you want to pass a string argument to `select`, so this would be the correct program:

```
select("div#unten div h2").get(1) 
```

This means the `Rule r` line should be written as follows:

```
Rule r = new Rule("select(\"div#unten div h2\").get(1)") 
```

# sql - 将订单量四舍五入到限制总数

> ID：13659568
> 
> 赞同：2
> 
> 时间：2012-12-01T12:43:45.737
> 
> 标签：sql, sql-server

昨天在工作中遇到了一个有趣的小问题。这是一个关于算术和 SQL 的问题。假设您有一堆订单，并且订单可以拥有的数量有限制（在本例中为 20 个）：

```
if object_id('tempdb..#OMAX') is not null drop table #OMAX
create table #OMAX
    (
    OrderId int primary key,
    MaxVol decimal(15,3)
    )
insert into #OMAX(OrderId, MaxVol) values (1, 20), (2, 20), (3, 20) 
```

以下是您的订单行项目及其当前、建议的数量：

```
if object_id('tempdb..#OLI') is not null drop table #OLI
create table #OLI
    (
    OrderId int,
    ProposedVolume decimal(15,3)
    )

insert into #OLI(OrderId, ProposedVolume)
values
    (1, 11.6),
    (1, 5.4),
    (2, 9.744),
    (2, 16.254),
    (2, 9.556),
    (3, 7.1),
    (3, 7.23),
    (3, 7.45) 
```

您还希望将结果四舍五入到特定的准确度，假设目前为 1.0（整数）：

```
declare @nOrderRoundAmt decimal(15,3) = 1.0; 
```

**问题**：对于当前总数大于 OMAX.MaxVol 的订单，您能否编写一条 SQL 语句来缩小 ProposedVolumes 以使订单行的新总数等于 MaxVol？它必须相等，不少于（原因：这里的商业案例是订单 2 的总建议量为 35.554，但我们说允许的最大值为 20，所以当我们减少订单时，我们需要减少它到 20，不低于，因为那是不合理的）。

复杂性：一个订单可以有 1..N 个订单项。不要认为这是一组详尽的测试数据，我怀疑还有其他棘手的情况。

在这种情况下，订单 1 应该保持不变，除了四舍五入，订单 2 和 3 应该减少并四舍五入到 20。

这是我迄今为止的最大努力：

```
; with OrderTotals as
    (
    select OrderId, sum(ProposedVolume) as TotalVolume
    from #OLI
    group by OrderId
    )
select
    OLI.*, 
    Ratio.Ratio,
    Scaled.Vol as SVol,
    ScaledAndRounded.Vol as SRVol
from
    #OLI OLI
    join OrderTotals OT on OLI.OrderId = OT.OrderId
    join #OMAX OMAX on OLI.OrderId = OMAX.OrderId
    cross apply
        (
        -- Don't reduce orders that are already below the max.
        select
            case when OMAX.MaxVol / OT.TotalVolume > 1 then 1
            else OMAX.MaxVol / OT.TotalVolume
            end as Ratio
        ) Ratio
    cross apply (select OLI.ProposedVolume * Ratio.Ratio as Vol) Scaled
    -- Rounds to nearest.
    cross apply (select round(Scaled.Vol / @nOrderRoundAmt, 0) * @nOrderRoundAmt as Vol) ScaledAndRounded
    -- Rounds down.
    -- cast(Scaled.Vol / @nOrderRoundAmt as bigint) * @nOrderRoundAmt as ScaledAndRoundedDown, 
```

这说明了两个问题：订单 2 的总数为 19，订单 3 的总数为 21。您可以通过始终向下舍入来阻止订单 3 超过 20，但是您可以得到订单总数出现的情况18点出门。

那么是否有可能在单个语句中？到目前为止，我最好的解决方案是应用上述逻辑（使用向下舍入），然后在光标中应用第二步处理以添加差异，直到我们回到总数 20。

你能证明你的解决方案适用于所有情况吗？

以下用于生成随机测试订单的代码可能很有用：

```
declare @OrderId int = 0, @NumLineItems int;

while @OrderId < 1000 begin
    set @NumLineItems = cast(rand() * 5 as int) + 1

    insert into #OLI(OrderId, ProposedVolume)
    select top (@NumLineItems) @OrderId, rand(cast(newId() as varbinary)) * 15
    from sys.objects

    set @OrderId = @OrderId + 1
end 
```

**解决方案**

如果有人对我根据 Gordon 的回答做出的最终解决方案感兴趣，就在这里。它有点冗长，返回的列比实际需要的多得多，但这有助于调试/理解。尝试将舍入度设置为 0.1 或 0.01。如果任何行项目的建议数量为 0，则该解决方案很容易出现除零错误，但它们很容易事先被过滤掉。它还可以生成一些四舍五入到零的行项目，需要事后排除。

```
declare @nOrderRoundAmt decimal(15,3) = 0.1;  -- Degree of rounding required.
if object_id('tempdb..#Results') is not null drop table #Results

select
    T.*,
    row_number() over (partition by OrderId order by Remainder desc) as seqnum,
    case
        when NeedsAdjustment = 0 then ProposedVolumeRounded
        else
            (case when row_number() over (partition by OrderId order by Remainder desc) <= LeftOver
            then AppliedVolInt + 1
            else AppliedVolInt
            end)
    end * @nOrderRoundAmt as NewVolume
--into #Results
from
    (
    select
        T.*,
        floor(T.AppliedVol) as AppliedVolInt,
        (T.AppliedVol - 1.000 * floor(T.AppliedVol)) as Remainder,
        T.MaxVol * 1.0 - sum(floor(T.AppliedVol)) over (partition by T.OrderId) as LeftOver
    from
        (
        select
            OLI.OrderId,
            OMAX.MaxVol as OrigMaxVol,
            MaxVol.Vol as MaxVol,
            OLI.ProposedVolume as OrigProposedVolume,
            ProposedVolume.Vol as ProposedVolume,
            ProposedVolumeRounded.Vol as ProposedVolumeRounded,
            sum(ProposedVolume.Vol) over (partition by OLI.OrderId) as SumProposedVolume,
            sum(ProposedVolumeRounded.Vol) over (partition by OLI.OrderId) as SumProposedVolumeRounded, -- Round, THEN sum.
            case
                -- when SumProposedVolumeRounded > MaxVol, i.e. the sum of the rounded line items would be
                -- greater than the order limit, then scale, else take the original.
                when sum(ProposedVolumeRounded.Vol) over (partition by OLI.OrderId) > MaxVol.Vol then 1
                else 0
            end as NeedsAdjustment,
            case
                -- when SumProposedVolumeRounded > MaxVol, i.e. the sum of the rounded line items would be
                -- greater than the order limit, then scale, else take the original.
                when sum(ProposedVolumeRounded.Vol) over (partition by OLI.OrderId) > MaxVol.Vol then MaxVol.Vol * (ProposedVolume.Vol / sum(ProposedVolume.Vol) over (partition by OLI.OrderId))
                else ProposedVolume.Vol
            end as AppliedVol
        from
            ##OLI OLI
            join ##OMax OMAX on OLI.OrderId = OMAX.OrderId
            cross apply (select OLI.ProposedVolume / @nOrderRoundAmt as Vol) ProposedVolume
            cross apply (select OMAX.MaxVol / @nOrderRoundAmt as Vol) MaxVol
            cross apply (select round(ProposedVolume.Vol, 0) as Vol) ProposedVolumeRounded
        ) T
    ) T 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:33:35.157

这是一个分区问题，您试图将结果设为整数（或等效地，整数的某个固定倍数）。该策略是将所有内容都计算为整数，找到余数，然后将余数分配给各个项目。

以下是计算的概述：

1.  将新交易量计算为订单中每个条目的浮点数
2.  将此卷中的整数部分与分数分开。
3.  计算最大体积减去整数比例的总和。差额是您必须弥补的金额。
4.  枚举分数，从最大到最小。
5.  将最终金额计算为整数金额加上 1 或 0。当枚举小于或等于要弥补的金额时，使用 1。0为其他。

以下 SQL 执行此操作：

```
select t.*, row_number() over (partition by orderid order by remainder desc) as seqnum,
       (case when row_number() over (partition by orderid order by remainder desc) <= LeftOver
             then AppliedVolInt + 1
             else AppliedVolInt
        end) as NewVolume
from (select t.*, floor(AppliedVol) as AppliedVolInt,
             (AppliedVol - 1.000*floor(AppliedVol)) as Remainder,
             maxvol*1.0 - sum(floor(AppliedVol)) over (partition by orderid) as LeftOver
      from (select oli.orderid, oli.ProposedVolume, omax.MaxVol,
                   sum(proposedVolume) over (partition by oli.orderid) as sumProposed,
                   omax.maxvol * (oli.ProposedVolume / sum(proposedVolume) over (partition by oli.orderid)) as AppliedVol
            from #OLI oli join
                 #OMax omax
                 on oli.orderid = omax.orderid
           ) t
     ) t 
```

如果你没有整数，那么算术会稍微复杂一些（因为使用了从 (4) 到 (5) 的枚举。我的建议是将所有数字乘以一个常数并将其转化为整数问题或相乘（4）中的枚举由因子。

而且，是的，我已经根据您的测试数据对此进行了测试。它不仅在逻辑上有效，而且在实践中也有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T13:42:10.180

**方法**

一种可能的方法是

1.  获取“最圆润”的建议体积（在我的示例中，舍入和未舍入缩放体积之间的最小差异）；
2.  如果计算的总体积不等于 20 且比率不是 1，则将该体积修正 1。

*更新：*这只是一个例子，实施有一些问题

1.  ~~`RR`并且`RRS`应该加入由 分区`orderId`和排序的建议卷的行列`SDiffMax`。加盟`SDiff`不*适合*生产；~~固定的
2.  ~~它应该确保`0`修正后没有交易量（最好的做法可能是在计算中排除订单`SRVol = 1`）`SDif < 0`；~~固定的
3.  ~~最好使用*相对*差异而不是*算术*差异，因为在计算与的比率时`SDiff`，`SVol`使用该值而不是`SDiff`进一步计算会使结果更加准确。~~固定的

如果您在这些方面需要任何帮助，请告诉我。

**解决方案**

```
; with OrderTotals as
    (
    select OrderId, sum(ProposedVolume) as TotalVolume
    from #OLI
    group by OrderId
    ),
 RawRounded as
 (
    select
        OLI.*, 
        Ratio.Ratio,
        Scaled.Vol as SVol,
        ScaledAndRounded.Vol as SRVol,
        (Scaled.Vol - ScaledAndRounded.Vol) / Scaled.Vol as SDiff,
        row_number() over (partition by OLI.OrderId order by (Scaled.Vol - ScaledAndRounded.Vol) / Scaled.Vol desc) as SDiffRank,
        TotalVolume
    from
        #OLI OLI
        join OrderTotals OT on OLI.OrderId = OT.OrderId
        join #OMAX OMAX on OLI.OrderId = OMAX.OrderId
        cross apply
            (
            -- Don't reduce orders that are already below the max.
            select
                case when OMAX.MaxVol / OT.TotalVolume > 1 then 1
                else OMAX.MaxVol / OT.TotalVolume
                end as Ratio
            ) Ratio
        cross apply (select OLI.ProposedVolume * Ratio.Ratio as Vol) Scaled
        -- Rounds to nearest.
        cross apply (select round(Scaled.Vol / @nOrderRoundAmt, 0) * @nOrderRoundAmt as Vol) ScaledAndRounded
),
RawRoundedSum AS
(
    select 
        OrderId,
        MIN(SDiff) AS SDiffMin,
        MIN(SDiffRank) AS SDiffRankMin,
        SUM(SRVol) AS SRVolSum
    from RawRounded
    where 
        Ratio <> 1
    group by OrderId
    having SUM(SRVol) <> 20
)
select 
    RR.OrderId,
    RR.ProposedVolume,
    case 
        when RRS.SDiffMin is null then RR.SRVol 
        else round(RRS.SDiffMin / @nOrderRoundAmt + case when RRS.SDiffMin < 0 then - 0.5 else 0.5 end, 0) * @nOrderRoundAmt + RR.SRVol
    end SRVolFinal
from 
    RawRounded RR
    left join RawRoundedSum RRS 
        on RR.OrderId = RRS.OrderId and RR.SDiffRank = RRS.SDiffRankMin 
```

**结果**

```
OrderId     ProposedVolume                          SRVolFinal
----------- --------------------------------------- ---------------------------------------
1           11.600                                  12.000000
1           5.400                                   5.000000
2           9.744                                   5.000000
2           16.254                                  10.000000
2           9.556                                   5.000000
3           7.100                                   6.000000
3           7.230                                   7.000000
3           7.450                                   7.000000 
```

# sql - 更改连接字符串不会更改数据库？

> ID：13659571
> 
> 赞同：1
> 
> 时间：2012-12-01T12:44:05.810
> 
> 标签：sql, connection-string

我想在服务器上的数据库（真实数据库）上运行和我保留用于在 localhost 中测试的本地副本之间切换。

我尝试通过更改 app.config 中连接字符串的定义在 db#1（服务器）和 db#2（本地主机）之间切换（我还重新启动了 VS 以确保没有任何东西隐藏在内存中）。发生了一件奇怪的事情：一方面，如果我通过数据源/预览数据（在 VS'10 中）查询数据库，它确实会带来来自 db#2 的数据。但是当我运行应用程序时仍然从 db#1 获取信息，尽管据我所知连接字符串只出现在 app.config 中，所以我什至不明白它从哪里获取信息以便连接到数据库#1。

当我们讨论这个主题时，在数据库之间切换更优雅的方式是什么？理想情况下，我会从下拉菜单中选择数据源。但是我可以在运行时切换连接字符串吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:01:10.367

Visual Studio 维护自己的数据库连接信息，大概来自它自己的 app.config 文件。这完全独立于您的解决方案 app.config。

按照您的建议切换数据库相对容易。在 app.config 中放置 2 个不同名称的连接字符串。使用变量来保存您想要的字符串，并在您现在直接引用连接字符串的任何地方引用它。

# grails - 开启activemq轮询->处理所有消息->关闭->等待一段时间->重复

> ID：13659573
> 
> 赞同：0
> 
> 时间：2012-12-01T12:45:01.177
> 
> 标签：grails, groovy, activemq, apache-camel

如果我有一个 activemq Camel 路由定义，例如

```
from('activemq:some.route')
   .to('direct:some.other.route') 
```

有没有一种方法可以通过以下方式以编程方式打开和关闭 activemq 端点的轮询：`activemq polling on -> process all messages -> turn off -> wait for a period of time -> repeat`？

请注意，我可以使用石英作为它的计时部分，主要问题是 Camel 是否具有允许我说“打开 activemq 轮询，处理所有消息，然后关闭”的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:26:41.740

您可以使用两个额外的路由来启动和停止 activemq 路由。以计时器或石英组件开始这些路由，然后在 activemq 路由上调用 start 和 stop。

见[https://camel.apache.org/how-can-i-stop-a-route-from-a-route.html](https://camel.apache.org/how-can-i-stop-a-route-from-a-route.html)

# android - 使用 dom 解析 Xml

> ID：13659575
> 
> 赞同：0
> 
> 时间：2012-12-01T12:45:12.927
> 
> 标签：android

**在此 xml 中，仅解析用户标签中的图像标签，其余部分不起作用如何解决此错误。找到 1 个帖子

```
 <url>http://industryvegas.com/pokerspyapp/central//f06d5d94b40d7af9dbba1bd601e5ae33</url>
    <title>test</title>
    <text>testimage</text>
    <image>http://industryvegas.com/pokerspyapp/uploads/posts/a5771bce93e200c36f7cd9dfd0e5deaa.jpg</image>
    <gcomments>
    <gcomment id="38" createdOn="1354269393" likes="1" user_like="false" comments="1">
    <user id="40" username="bhanusharma" user_level="2">
    <image>http://industryvegas.com/pokerspyapp/uploads/users/d645920e395fedad7bbbed0eca3fe2e0.jpg</image>
    </user>
    <text>test image</text>
    <image>http://industryvegas.com/pokerspyapp/uploads/comments/a5771bce93e200c36f7cd9dfd0e5deaa.jpg</image>
    <greplies></gcomment>
    <gcomment id="37" createdOn="1354268379" likes="1" user_like="false" comments="1">
    <user id="40" username="bhanusharma" user_level="2">
    <text>test image comment</text>
    <image>http://industryvegas.com/pokerspyapp/uploads/comments/a5bfc9e07964f8dddeb95fc584cd965d.jpg</image>
    <greplies></gcomment>
    </gcomments>
    </gpost>
    </response>** 
```

# php - javascript函数不返回特定情况的值

> ID：13659581
> 
> 赞同：1
> 
> 时间：2012-12-01T12:45:41.160
> 
> 标签：php, javascript, ajax

我在 php 中有一个示例脚本，并且验证是使用 javascript 完成的。我在单击按钮时使用 ajax 脚本生成一个输入框。当我单击提交时，它会检查所有框是否都已填写。我正在使用 for 循环验证框。当这些框为空时，它会正确发出警报，并且我在相同的情况下返回 false。但问题是，当所有的盒子都被填满时，它不会返回任何东西，即使我在这种情况下返回 true，函数也会停止工作。我的带有函数的javascript代码如下所示

```
function addInput(){
var xmlhttp;

if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }

xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    var result = xmlhttp.responseText;

     var newElem = document.createElement ("div");
            newElem.innerHTML = result;
     newElem.id = "input";

       var container = document.getElementById ("main");
            container.appendChild (newElem);

    }

  }
xmlhttp.open("GET","insert.php",true);
xmlhttp.send();
}

var count = '<?php echo $_SESSION['z']; ?>'

function check(){
    function validate()
    {   
        for(var i=1; i<=count+10; i++)
        {
            if(document.getElementById("text"+i+"").value == "")
            {
                alert("Please Enter Start Date For Sales Promotion");
                document.getElementById("text"+i+"").focus();
                return 'false';
            }
        }
        return 'abc';
    }

    var flag = validate();
    if(flag != 'false')
    {
        alert("correct");
    }
} 
```

我的html代码如下所示

```
<form method="post" action="save.php">
<div id="main">
    <div id="input1">
            Enter Name </br></br>
            <input type="text" id="text1" />
            <?php $_SESSION['z'] = 2; ?>
    </div>
</div>
</br>
<input type="button" value="add another" onclick="addInput()" />
<input type="button" value="Submit" onclick="check()" />
</form>
<div id="display"></div> 
```

我的ajax代码如下所示

```
 <?php
session_start();
$q = $_SESSION['z'];

?>

            Enter Name </br></br>
            <input type="text" id="text<?php echo $q; ?>" />

<?php $q = $q + 1; 
$_SESSION['z'] = $q;

?> 
```

问题是当所有字段都填满时，它不会返回任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:01:57.123

这种情况可能很多，而且根据使用的浏览器，点击事件和提交事件会同时被调用，这是不安全的（例如，在IE中如果你的提交按钮调用另一个提交函数，表单将被提交两次...）

您应该将检查功能连接到表单的 onBeforeSubmit 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T13:12:07.210

当您尝试检索页面上不存在的项目时，您可能会遇到错误。

```
 if(document.getElementById("text"+i+"").value == "")
            {
                alert("Please Enter Start Date For Sales Promotion");
                document.getElementById("text"+i+"").focus();
                return 'false';
            } 
```

这里可能没有 ID 为“text8”、“text9”等的项目。在这种情况下，当您尝试获取不存在元素的值时会出现空引用错误。

尝试像这样更改它：

```
 var ele = document.getElementById("text"+i); 
            if(ele && ele.value == "")
            {
                alert("Please Enter Start Date For Sales Promotion");
                document.getElementById("text"+i+"").focus();
                return 'false';
            } 
```

`ele`这在访问它的值之前验证是否为空。

# android - GCM-Android 更多通知

> ID：13659582
> 
> 赞同：1
> 
> 时间：2012-12-01T12:46:14.573
> 
> 标签：android, push-notification, google-cloud-messaging

我想向我的 android 设备发送通知。问题是在正确发送和接收的第一个通知之后，我必须关闭（杀死）并打开应用程序才能接收另一个通知。我不知道我必须改变什么。非常感谢你

我像这样对应用程序进行了编程（如谷歌示例）：

```
public class FirstActivity extends Activity
{
    String TAG = "FirstActivity";
    String SENDER_ID = "123456789101";
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_first);
        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        final String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) {
          GCMRegistrar.register(this, SENDER_ID);
        } else {
          Log.v(TAG, "Already registered");
        }
    }
} 
```

和：

```
public class GCMIntentService extends GCMBaseIntentService
{
    String TAG = "GCMIntentService";
    public GCMIntentService()
    {
        // TODO Auto-generated constructor stub
    }
    @Override
    protected void onError(Context arg0, String arg1)
    {
        // TODO Auto-generated method stub
        Log.d(TAG, "onError");
    }

    @Override
    protected void onMessage(Context arg0, Intent arg1)
    {
        // TODO Auto-generated method stub
        Log.d(TAG, "onMessage");
        generateNotification(arg0, arg1.getStringExtra("message"));

    }
    private static void generateNotification(Context context, String message) {
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.ic_launcher,
                message, when);
        String title = context.getString(R.string.app_name);
        Intent notificationIntent = new Intent(context,
                FirstActivity.class);
        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
                | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent = PendingIntent.getActivity(context, 0,
                notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notificationManager.notify(0, notification);
    }

    @Override
    protected void onRegistered(Context arg0, String arg1)
    {
        // TODO Auto-generated method stub
        Log.d(TAG, "onRegistered");
    }

    @Override
    protected void onUnregistered(Context arg0, String arg1)
    {
        // TODO Auto-generated method stub
        Log.d(TAG, "onUnregistered");
    }

} 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="at.demo.gcm"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <permission
        android:name="at.demo.gcm.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="at.demo.gcm.permission.C2D_MESSAGE" />

    <!-- App receives GCM messages. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <!-- GCM connects to Google Services. -->
    <uses-permission android:name="android.permission.INTERNET" />
    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="at.demo.gcm.FirstActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="at.demo.gcm" />
            </intent-filter>
        </receiver>
        <service android:name=".GCMIntentService" />
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:22:54.697

GCMIntentService 类的构造函数必须具有 SENDER_ID，在您的情况下，如：

```
private static final String SENDER_ID = "123456789101";

public GCMIntentService()
    {
        super(SENDER_ID);
    } 
```

希望这会对您有所帮助，因为我在我正在使用的类似应用程序中尝试了您的代码，并且只要我从 Web 服务器发送通知而无需终止应用程序，我就会收到通知

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:17:36.170

GCM 在这里不是问题。问题是您如何生成通知（调试应该显示）。您为所有通知使用一个 id `0`，您无法通过这种方式更新通知。每次都换身份证。

# c++ - C++ 多态性从基类访问派生类字段

> ID：13659583
> 
> 赞同：1
> 
> 时间：2012-12-01T12:46:17.143
> 
> 标签：c++, polymorphism

我有以下程序：

```
#include <iostream>

class Base {};

class Deriv : public Base
{
    public:
        int data;
        Deriv(int data): data(data) {} 
};

int main()
{
    Base *t = new Deriv(2);
    std::cout << t->data << std::endl;
} 
```

当我编译它时，我得到了错误：

```
x.cpp: In function ‘int main()’:
x.cpp:15:21: error: ‘class Base’ has no member named ‘data’ 
```

**如何访问数据字段（请注意，我不想使用 Deriv *t = new Deriv(2)）？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T12:49:25.413

把它放到基类：

```
virtual int get_data() const=0; 
```

然后派生类将需要实现它 - 所有派生类的所有数据都将通过接口：

```
class Base
{
    virtual int get_data() const = 0;
};

class Deriv: public Base
{
public:
    int data;
    Deriv(int data): data(data) {} 
    virtual int get_data() const
    { return data; }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T12:55:17.433

Object`t`的类型为 pointer-to-`Base`并且`Base`没有定义`data`成员，这就是您的代码无法编译的原因。如果您确定它`t`指向一个实际的类型对象`Deriv`（就像您发布的代码一样），您可以强制转换它以便能够调用`Deriv`成员：

```
Deriv* d = static_cast<Deriv*>(t);
std::cout << d->data << std::endl; 
```

如果您不知道`t`指向 type 的实际对象，`Deriv`则需要通过 dynamic_cast 对其进行多态向下转换并检查返回值：

```
Deriv* d = dynamic_cast<Deriv*>(t);
if (d != nullptr)
{
    std::cout << d->data << std::endl;
} 
```

无论如何，根据您发布的代码，`t`如果`Base*`您只是使用它来访问仅由`Deriv`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T12:48:40.980

您已将指针声明为类型并且编译器是正确的，该类`Base`中没有成员。`data`您需要将指针重新转换为 a`Deriv*`以便以这种方式访问​​成员。你为什么要把类型指针指向基类呢？这通常仅在您具有多态类层次结构时才有用。

您可以考虑使用虚函数来返回此成员的值，但是在不知道您的类和代码试图实现什么的情况下，很难推荐一种方法或另一种方法。根据您的小代码示例，只需使用

```
Deriv *t = new Deriv(2); 
```

相反，似乎是更好的选择

# php - 在 PHP 中动态创建 html 表时页面呈现时间较长

> ID：13659585
> 
> 赞同：0
> 
> 时间：2012-12-01T12:46:23.023
> 
> 标签：php, html-table, settimeout

我正在使用 PHP 动态创建一个 html 表。但是当行和列大小增加时，页面渲染会卡住。它适用于低值。这是我的代码。我知道它是因为循环。有人可以提出更好的方法吗？

```
<?php
echo "<table>"; 
for($tr = 1; $tr <= 1000; $tr++){ 
    echo "<tr>"; 
    for($td = 1; $td <= 1000; $td++){ 
            echo "<td>x</td>";
        }               
    } 
    echo "</tr>"; 
} 
echo "</table>"; 
?> 
```

# android - 如何知道使用 android 中的 facebook 应用程序共享或取消的 facebook 墙贴

> ID：13659586
> 
> 赞同：1
> 
> 时间：2012-12-01T12:46:29.543
> 
> 标签：android, facebook, android-activity

让我澄清一下我的问题。M 使用 facebook 本机应用程序使用此代码在墙上发布

```
 public void sendToFB()
{
    Intent share = new Intent(Intent.ACTION_SEND);
    share.setType("text/plain");
String _mPostText=
         "{\"name\":\"My Test Image\"," + "\"href\":\"" +
          "http://www.google.com" + "\"," +
          "\"media\":[{\"type\":\"image\",\"src\":\"" +
          "http://www.google.com/logos/mucha10-hp.jpg" +
          "\",\"href\":\"" + "http://www.google.com" + "\"}]" + "}";
    share.putExtra(Intent.EXTRA_TEXT,_mPostText );
    startActivityForResult(Intent.createChooser(share, "Share"), 100);

} 
```

这是完美的工作。下面是结果的快照。 ![在此处输入图像描述](../Images/a18ed6253ce9a883051264447cb853a7.png)

M 为此意图设置 OnActivityResult。

代码如下

```
 @Override
protected void onActivityResult(int requestcode, int resultcode, Intent arg2) {
    // TODO Auto-generated method stub
    if (resultcode == RESULT_OK) {
        if (requestcode ==100){//do something
        }
        } 
```

}

我的问题是我想在分享 facebook 帖子时执行操作。在这里，如果 facebook 帖子被取消，那么 onActivityResult 也会执行相同的操作。我怎么知道 Facebook 帖子是分享还是取消？请在这个问题上建议我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:18:53.917

Use the Android SDK instead of the application.

The SDK is open-source, in case it has the same bug, you can fix it.

# android - 通过单击具有 3 个字段/列的自定义列表视图中的项目，从 sqlite 检索数据以执行编辑/删除

> ID：13659596
> 
> 赞同：0
> 
> 时间：2012-12-01T12:47:23.807
> 
> 标签：android, listview

先生，您能帮我了解如何通过单击相应的自定义列表视图项来显示 sqlite 的详细信息吗？我的列表视图包含三列，所以我希望它显示在另一个活动中，我可以在其中编辑信息和删除等。起初，我想使用行 ID，但放弃了这个想法，因为如果我试图删除一个项目在数据库中，我无法使用已删除的行 ID。所以listview和数据库的行ID不匹配。例如。数据库 1,2,3 中的行 ID ...如果我删除了第 2 行，如果我添加另一个项目，它只会添加到第 4 行...就像第 1,3,4 行一样。提前感谢您的帮助

```
public class CustomListView extends Activity {
final Context context = this;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    GroupDb info = new GroupDb(this);
    info.open();
    ArrayList<Contact> searchResults = info.getView();

    final ListView lv = (ListView) findViewById(R.id.srListView);
    lv.setAdapter(new MyCustomBaseAdapter(this, searchResults));
    info.close();

    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub
} 
```

这是我的 custombaseadapter

```
public class MyCustomBaseAdapter extends BaseAdapter {
private static ArrayList<Contact> searchArrayList;

private LayoutInflater mInflater;

public MyCustomBaseAdapter(Context context, ArrayList<Contact> results) {
    searchArrayList = results;
    mInflater = LayoutInflater.from(context);
}

public int getCount() {
    return searchArrayList.size();
}

public Object getItem(int position) {
    return searchArrayList.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.custom_row_view, null);
        holder = new ViewHolder();
        holder.txtName = (TextView) convertView.findViewById(R.id.name);

        holder.txtPhone = (TextView) convertView.findViewById(R.id.phone);

        holder.status = (TextView) convertView.findViewById(R.id.status);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.txtName.setText(searchArrayList.get(position).getName());

    holder.txtPhone.setText(searchArrayList.get(position).getPhoneNumber());

    holder.status.setText(searchArrayList.get(position).getStatus());

    return convertView;
}

static class ViewHolder {
    TextView txtName;
    TextView txtPhone;
    TextView status;
}
} 
```

这是我在自定义列表视图中使用 GroupDb.class 中的三个字段/列保存数据库值的方法

```
public ArrayList<Contact> getView() 
{
    // TODO Auto-generated method stub
    ArrayList<Contact> results = new ArrayList<Contact>();
    String[] columns = new String[]{KEY_NAME, KEY_NUMBER, KEY_STATUS};
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    String sName = "";
    String nName = "";
    String status = "";
    int iName = c.getColumnIndex(KEY_NAME);
    int iNumber = c.getColumnIndex(KEY_NUMBER);
    int iStatus = c.getColumnIndex(KEY_STATUS);
    Contact contact;
    for(c.moveToFirst(); ! c.isAfterLast(); c.moveToNext())
    {
        contact = new Contact();
        sName += c.getString(iName);
        nName += c.getString(iNumber);
        status += c.getString(iStatus);
        contact.setName(sName);
        contact.setPhoneNumber(nName);
        contact.setStatus(status);
        results.add(contact);
        sName = "";
        nName = "";
        status = "";
    }
    return results;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:50:39.050

您正在维护联系人数组列表。单击列表视图时，从您的数组列表中的给定位置获取位置获取联系人对象。您必须在您的联系人类中保存主键列。

# c - 简单链表 C 代码分段错误

> ID：13659598
> 
> 赞同：2
> 
> 时间：2012-12-01T12:47:28.873
> 
> 标签：c, linked-list, segmentation-fault

我正在为我的基本 C 作业制作一个链表程序。但是，我总是会在 .exe 上遇到强制关闭错误，并在 Ubuntu 上遇到分段错误。

我试图将其分解并重写，但我不知道代码在哪里失败。

我会很感激你的帮助。

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

    struct node{
            char name[20];
            int mark;
            struct node *next;

    };

    struct node *addnode(char name[], float mark);

    int main(void){

            int j = 0;
            char StdName[10];
            float StdMarks;

            struct node *head = NULL;
            struct node *curr = NULL;

            head = curr = addnode('\0',0.0);

            for(j=0; j<3; j++){

                    printf("\nEnter StdName >>");

                    printf("\nMarks for %s >>", StdName);

                    curr -> next = addnode("", 5.5);
                    curr = curr->next;
            }

            curr = head -> next;

            j = 0;

            printf("\nnode\tName\tMarks");

            while(curr){

                    printf("\n%d\t%s\t%5.2f", j++, curr->name, curr->mark);
                    curr=curr->next;
            }

    return 0;

    }

    struct node *addnode(char name[], float mark){

            struct node *temp;

            temp=(struct node*)malloc(sizeof(struct node));
            strcpy(temp->name,name);
            temp->mark=mark;
            temp->next=NULL;

    return (temp);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:52:37.693

当您应该传递一个字符串时，您添加的第一个节点使用单个字符`'\0'`作为名称：

```
head = curr = addnode("", 0.0); 
```

而且这也不指向第一个节点，它指向第二个：

```
curr = head -> next; 
```

应该：

```
curr = head; 
```

我不知道您打算做什么，`StdName`但正如 hmjd 所说，它应该初始化为某个值。

```
char StdName[] ="stdname"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T12:52:45.177

几个错误：

*   `'\0'`不是 a `char[]`，而是 a `char`，其值为 is`0`并转换为`char*`(`NULL`指针)。用于`""`空字符串。编译器应该为此发出警告。以最高警告级别编译并将警告视为错误（因此您不能忽略它们）。对于`gcc`标志是`-Wall -Werror`.
*   `StdName`未初始化且从不填充但在`printf("%s")`调用中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T12:54:31.183

`head = curr = addnode('\0',0.0);`行无效。您的`addnode`函数需要一个指向字符数组的指针作为第一个参数。`'\0'`是一个等于 0 的整数值。传递`name`给`strcpy`which 使用它作为指向源数据的指针。由于指针为 0 (== NULL)，因此您会崩溃。

# php - 子类共享方法而无需多次运行 __construct

> ID：13659603
> 
> 赞同：-1
> 
> 时间：2012-12-01T12:48:11.047
> 
> 标签：php, class

我有 5 个不同的模型类。每个都处理不同类型的数据，但它们都遵循相同的格式。

我希望每种模型都共享 toJson、toArray 等函数。

有很多黑客方法我可以做到这一点，我可以弄清楚这些，但必须有更好的方法。

这是我想要的效果：

```
<?
something here{
    function toJson(){return json_encode($this->lastResult);}
}
class applications{
    function findAllFoo(){
        $this->lastResult = $this->db->foo->find();
        return $this;
    }
}

class users{
    function findAllBar(){
        $this->lastResult = $this->db->bar->find();
        return $this;
    }
}
$models = new models();

echo $models->applications->findAllFoo()->toJson();
echo $models->users->findAllBar()->toJson(); 
```

我可以只`new applications($this)`为每个模型传递一整套类，但我确信标准实践中有一种方法可以做到这一点。

TL;DR - 我如何拥有一组共享一些辅助函数但又不会与`__construct`函数冲突的类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T12:52:55.427

这是一个坏主意。父母不应该知道他们的孩子。一个类应该独立存在，按原样工作。孩子可以扩展父母并使用它，因为这种关系是通过`x extends y`声明编纂和强制执行的。但是，父母与孩子之间没有这种关系，所以仅仅看一个类就不可能说它是否会起作用，因为在实现时不知道孩子是否存在。

重新考虑你在做什么。孩子*延伸*已经完全的父母，父母不依赖孩子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T13:20:04.877

如果所有模型都共享一些功能，为什么不为它们创建一个“模型”基类呢？

```
abstract class Model {
    protected $lastResult;
    protected $db;

    public function __construct(DB $db) {
        $this->db = $db;
    }

    public function toJson() {
        return json_encode($this->lastResult);
    }
}

class Applications extends Model {
    public function findAllFoo() {
        $this->lastResult = $this->db->foo->find();
        return $this;
    }
}

class ModelBroker {
    public $applications;

    public function __construct() {
        $db = /* ... connection code here ... */;
        $this->applications = new Applications($db); // <-- dependency injection
    }
}

$models = new ModelBroker();
$json = $models->applications->findAllFoo()->toJson(); 
```

# sql-server-2008 - T-SQL 从特定时间之间的多天中选择数据

> ID：13659607
> 
> 赞同：2
> 
> 时间：2012-12-01T12:48:26.803
> 
> 标签：sql-server-2008, tsql, datetime

在我的表格中，我有关于每日温度测量的详细数据。该表如下所示：

```
DateTime timestamp, Float temperature 
```

我想在某个时间间隔内显示不同日期的温度，然后只显示早上 7 点到晚上 8 点之间的温度。

我知道如何获取日期之间的数据：

```
SELECT [timestamp],[temperature]
  FROM [meteo_data]
  WHERE [timestamp] BETWEEN '2012-11-10' and '2012-11-17' 
```

如何也实施时间限制（早上 7 点至晚上 8 点）？

非常感谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T13:05:43.617

如果你在`SQL Server 2008 or above`，你可以使用`TIME datatype`

```
SELECT [timestamp],[temperature]
FROM [meteo_data]  
WHERE [timestamp] BETWEEN '2012-11-10' and '2012-11-17'
AND CONVERT(TIME,[timestamp]) BETWEEN '19:00:00' AND '20:00:00' 
```

**编辑：**还建议`ISO (yyyymmdd)`在使用日期作为字符串时使用日期格式。IE

```
BETWEEN '20121110' and '20121117' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T12:59:16.047

DateTime 和 TimeStamp 值应该包含您需要的精度，所以

```
SELECT [timestamp],[temperature]
FROM [meteo_data]  
WHERE [timestamp] BETWEEN '2012-11-10' and '2012-11-17'
AND RIGHT([timestamp], 12) BETWEEN '19:00:00.000' AND '20:00.00.000' 
```

您可能需要根据数据库中的精度调整在 RIGHT 谓词中评估的字符数。但这个想法是采用构成小时、分钟、秒和毫秒的所有部分，并将其限制在您需要的小时之间。

# ios - 尝试从引脚注释推送详细视图不起作用 - 我使用的是故事板而不是 XIB，我的 detailviewcontroller IBOutlet 显示为未连接

> ID：13659608
> 
> 赞同：1
> 
> 时间：2012-12-01T12:48:39.703
> 
> 标签：ios, uiviewcontroller, storyboard, mkannotation

我有一个带有披露按钮的图钉，试图在点击按钮时添加详细视图。

我使用 Apple 的 MapCallouts 作为参考。我收到错误

> 应用程序试图在目标上推送一个 nil 视图控制器

使用他们的代码示例 -

```
[self.navigationController pushViewController:self.detailViewController animated:YES]; 
```

我在错误的地方实施它吗？我不知道为什么我得到错误。

无法链接所有内容，例如#import、@class @interface @property @implementation @synthesize ... 不知道做什么。

```
-(MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation:
(id <MKAnnotation>)annotation {
    MKPinAnnotationView *pinView = nil;
if(annotation != mapView.userLocation)
{
    static NSString *defaultPinID = @"com.invasivecode.pin";
    pinView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
    if ( pinView == nil ) pinView = [[[MKPinAnnotationView alloc]
                                      initWithAnnotation:annotation reuseIdentifier:defaultPinID] autorelease];

    pinView.pinColor = MKPinAnnotationColorRed;
    pinView.canShowCallout = YES;
    pinView.animatesDrop = YES;

    // add a detail disclosure button to the callout which will open a new view controller page
    UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    pinView.rightCalloutAccessoryView = rightButton;
}
else {
    [mapView.userLocation setTitle:@"Current Location"];
}
return pinView;
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (void)mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views {

id<MKAnnotation> myAnnotation = [self.mapView.annotations objectAtIndex:0];
[self.mapView selectAnnotation:myAnnotation animated:YES];
}

- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view      calloutAccessoryControlTapped:(UIControl *)control {
// code to show details view
MapDetailViewController *detailViewController = [[MapDetailViewController alloc] init];
// Adds the above view controller to the stack and pushes it into view
[self.navigationController pushViewController:detailViewController animated:YES];
// We can release it again, because it's retained (and autoreleases in the stack). You can also choose to autorelease it when you allocate it in the first line of code, but make sure you don't call release on it then!
[MapDetailViewController release];

} 
```

# c++ - How do I emulate C++ postfix in bison?

> ID：13659610
> 
> 赞同：3
> 
> 时间：2012-12-01T12:48:39.657
> 
> 标签：c++, compiler-construction, bison

I am trying to implement a simple compiler using flex & bison, and got stuck in the postfix notation. (The compiler should behave like the C++ compiler)

Here is the problem: Given the following code:

```
 int x = 0;
    int y = x++ || x++  ; //y=1 , x = 2 this is understandable

    int z = x++ + x++ ;  // z = 0 , x=2 
```

the first line is fine because of the following grammar:

```
 expression = expression || expression; //  x=0
    expression = 0 || expression   // x= 1
    expression = 0 || 1  //x=2
    expression = 1 // x=2 
    y = 1 
```

However, I don't understand why z=0.

When my bison grammar sees 'variable' ++ it first returns the variables value, and only then increments it by 1\. I used to think thats how C++ works, but it won't work for the 'z' variable.

Any advice on how to solve this case?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:57:48.497

```
int z = x++ + x++; 
```

尽管 z 可能看起来是 0，但实际上不是，它实际上可以是任何值，并且完全取决于您使用的编译器。这是因为 z 的赋值具有未定义的行为。

未定义的行为来自序列点之间多次更改 x 的值。在 C++ 中，|| 运算符是一个序列点，这就是为什么 y 的分配按预期工作的原因，但是 + 运算符不是一个序列点。

C++ 中当然还有其他各种序列点， ; 是一个更突出的例子。

我还应该指出 ++ 运算符返回变量的先前值，即在此示例中

```
#include <iostream>

using namespace std;

int main() {
    int x = 0;
    int y = x++;
    cout << y << endl;
    return 0;
} 
```

为 y 打印的值为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:15:50.437

用另一种方式说同样的话。AC编译器可以自由实现

```
int z = x++ + x++; 
```

作为

```
 z = x + x
 incr x
 incr x 
```

或作为

```
 int r1 = x;
 incr x
 z = r1 + x
 incr x 
```

您的编译器似乎正在使用第一个计划。

# c - 将 .PEM 文件中的 RSA 密钥读取到 C 中的 RSA 结构

> ID：13659613
> 
> 赞同：0
> 
> 时间：2012-12-01T12:49:29.940
> 
> 标签：c, openssl, rsa, pem

JKJS

观察：

假设 RSA 私钥是通过以下命令创建的：

```
openssl genrsa -out mykey.pem 1024 
```

然后，在 C 中从该文件中读取密钥没有问题：

```
RSA *privatekey=NULL;
privatekey=PEM_read_RSAPrivateKey(fp,NULL,NULL,NULL);
if(privatekey==NULL)
ERR_print_errors_fp(stderr); 
```

但是，如果 RSA 密钥对是通过以下命令创建的：

```
openssl req -newkey rsa:1024 -sha1 -keyout mykey.pem -out rootreq.pem 
```

然后从 mykey.pem 读取会导致错误。为什么？

JKJS哈迪克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:11:30.737

在第二个命令中，您是否提供了密码？在任何编辑器中打开第二个命令创建的密钥 - 你在 haders 中看到 ENCRYPTED 吗？

如果是，那么这就是为什么您无法使用它来读取它的`PEM_read_RSAPrivateKey`原因，因为您将第三个参数作为 NULL 传递。

在对 的调用中传递回调以获取密码`PEM_read_RSAPrivateKey`。

或者，您可以使用以下命令从密钥中删除密码

```
openssl rsa -in mykey.pem -out mykey1.pem. 
```

这将要求您输入密码 - 如果您提供正确的密码，您将获得未加密形式的密钥`mykey1.pem`

# facebook - suddenly facebook connect stopped working

> ID：13659618
> 
> 赞同：3
> 
> 时间：2012-12-01T12:50:28.017
> 
> 标签：facebook, connect

A few days ago the facebook connection with our website stopped working all of the sudden, nothing was changed to the code???

Facebook made some changes???

[http://www.presbium.sk/vstup-pre-uchadzacov/](http://www.presbium.sk/vstup-pre-uchadzacov/)

```
require 'facebook-php-sdk/src/facebook.php';

    $facebook = new Facebook(array(
    'appId'  => 'YOUR_APP_ID',
    'secret' => 'YOUR_APP_SECRET',
    ));

    // Get User ID
    $user = $facebook->getUser();

    if ($user) {
    try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
    } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
     }
}

if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
 $loginUrl = $facebook->getLoginUrl();
}

enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:00:17.587

你可以在那里找到你需要的一切：

[http://developers.facebook.com/docs/](http://developers.facebook.com/docs/)

登录：

[http://developers.facebook.com/docs/authentication/](http://developers.facebook.com/docs/authentication/)

对于 Facebook 连接：

[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)

Facebook 登录不是官方的 Facebook 表达方式。官方术语是 Facebook 身份验证。Facebook Connect 是用于服务器到服务器技术的表达式，早在 Rest API 是最新的时候。现在，您必须使用 Graph API 来做同样的事情。您可以在此处找到有关旧的 Rest API 的信息：

[http://developers.facebook.com/docs/reference/rest/](http://developers.facebook.com/docs/reference/rest/)

但是考虑到这些 API 已被弃用，并且将它们用于新开发可能不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T13:22:01.120

Facebook 的 API 不断发生变化。其中一些可能会破坏您应用的功能。了解正在发生的变化的一个好方法是关注[Operation Developer Love 平台更新](http://developers.facebook.com/blog/post/2012/11/28/platform-updates--operation-developer-love/)。在那里，您可以了解 API 的错误和重大更改。浏览最新的博客更新，看看是否有您错过实施的更改。

编辑：

你写了：

> 我在这里做了一切 github.com/facebook/facebook-php-sdk 并且在 1 个月之前它可以工作但现在它不工作

SDK github 示例为您提供了一般案例的蓝图。该错误很可能是特定于应用程序的，例如您要求的权限。我建议您仔细阅读过去 3 个月中博客中的所有“重大变化”，看看会发生什么。例如，“离线访问”权限在不久前被删除。如果您的应用仍然要求它，则应用预期的行为可能会中断。对于隐私政策也有新的要求，如果不满足，可能会切断应用程序对部分 API 的访问。我并不是说这些是您的应用程序问题的根源，它们只是示例。真实的例子。

# android - Having trouble gett my fragment to populate a listView using an asynctask

> ID：13659621
> 
> 赞同：2
> 
> 时间：2012-12-01T12:50:38.723
> 
> 标签：android, listview, android-asynctask, fragment

I have been busting my head over this for a whole day now, so I figured I would ask for some help. I am trying to get this fragment to properly populate the listView, but no matter what I do, I get a nullpointer exception. I am sure I am missing something really small and I hope someone can point it out for me :)

```
package com.jaymzzz;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ListView;
import android.widget.Toast;
import com.actionbarsherlock.app.SherlockListFragment;
import com.actionbarsherlock.widget.SearchView;
import org.json.JSONArray;
import org.json.JSONObject;
import java.util.ArrayList;
import java.util.List;

public class TestAPICallFragment extends SherlockListFragment implements SearchView.OnQueryTextListener {
ListView listView;
ItemListAdapter itemListAdapter;
Context context;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setRetainInstance(true);

}

@Override
public void onResume() {
    super.onResume();
    new JSONFromAPI().execute(new String[]{"https://api.jaymzzz.com/api/json"});
}

public void onAttach(Activity activity) {
    super.onAttach(activity);
    context = this.getActivity();
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View fragmentView = inflater.inflate(R.layout.fragment, container, false);
    listView = (ListView) fragmentView.findViewById(android.R.id.list);
    return fragmentView;
}

@Override
public boolean onQueryTextSubmit(String query) {
    Toast.makeText(getActivity(), query, Toast.LENGTH_SHORT);
    Log.d("errlog", "Search query = " + query);
    return false;
}

@Override
public boolean onQueryTextChange(String newText) {
    Log.d("errlog", "Search query changed to " + newText);
    return false;  //To change body of implemented methods use File | Settings | File Templates.
}

private class JSONFromAPI extends AsyncTask<String, Void, JSONObject> {

    ProgressDialog dialog = new ProgressDialog(getActivity());

    protected void onPreExecute() {
        dialog.setMessage("Loading...");
        dialog.show();
    }

    protected JSONObject doInBackground(String... urlString) {
        String url = urlString[0];

        JSONObject json = new utilGetJSONFromAPI().getJSONFromAPI(url);
        Log.d("errlog", "Leaving doInBackground");

        if (dialog.isShowing()) {
            dialog.dismiss();
        }
        return json;
    }

    protected void onPostExecute(JSONObject json) {

        Log.d("errlog", "Initiating onPostExecute()");

        List<ItemEntry> items = new ArrayList<ItemEntry>();

        try {
            JSONArray message = json.getJSONArray("message");

            Log.d("errlog", "Message size: " + message.length());

            for (int i = 0; i < message.length(); i++) {
                JSONObject e = message.getJSONObject(i);
                items.add(new ItemEntry(e.getString("item_name"), e.getString("item_brand_name"), e.getInt("item_id")));

            }
        } catch (Exception e) {
            Log.e("errlog", "Error parsing data " + e.toString());
        }

        itemListAdapter = new ItemListAdapter(context, R.layout.list_item, R.id.title, R.id.subtitle);

        try {
            listView.setAdapter(itemListAdapter); // THE LINE THAT KEEPS FAILING

            for (final ItemEntry entry : items) {
                itemListAdapter.add(entry);
            }
        } catch (Exception e) {
            Toast.makeText(context, "Error Loading data..", Toast.LENGTH_SHORT).show();
            e.printStackTrace();
        }

    }
  }

} 
```

Here is the stack trace as well:

> 12-01 06:33:27.142: WARN/System.err(3003): java.lang.NullPointerException 12-01 06:33:27.142: WARN/System.err(3003): at com.jaymzzz.TestAPICallFragment$JSONFromAPI.onPostExecute(TestAPICallFragment.java:117) 12-01 06:33:27.152: WARN/System.err(3003): at com.jaymzzz.TestAPICallFragment$JSONFromAPI.onPostExecute(TestAPICallFragment.java:72) 12-01 06:33:27.152: WARN/System.err(3003): at >android.os.AsyncTask.finish(AsyncTask.java:602) 12-01 06:33:27.152: WARN/System.err(3003): at android.os.AsyncTask.access$600(AsyncTask.java:156) 12-01 06:33:27.152: WARN/System.err(3003): at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615) 12-01 06:33:27.152: WARN/System.err(3003): at >android.os.Handler.dispatchMessage(Handler.java:99) 12-01 06:33:27.152: WARN/System.err(3003): at android.os.Looper.loop(Looper.java:137) 12-01 06:33:27.152: WARN/System.err(3003): at android.app.ActivityThread.main(ActivityThread.java:4340) 12-01 06:33:27.152: WARN/System.err(3003): at java.lang.reflect.Method.invokeNative(Native >Method) 12-01 06:33:27.162: WARN/System.err(3003): at >java.lang.reflect.Method.invoke(Method.java:511) 12-01 06:33:27.162: WARN/System.err(3003): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 12-01 06:33:27.162: WARN/System.err(3003): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 12-01 06:33:27.162: WARN/System.err(3003): at dalvik.system.NativeStart.main(Native Method)

Help, please :)

# android - Android：在其他活动的 WebView 上加载 url

> ID：13659622
> 
> 赞同：2
> 
> 时间：2012-12-01T12:50:38.640
> 
> 标签：android, view, android-activity, webview

正如标题所说。

例如：我有 MainActivity 和 main.xml main.xml 有 WebView "@+id/WebView1"。

打开 SecondActivity 后，我希望它在 MainActivity 的 webview 上加载一个 URL。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:03:03.707

在你的 MainActivity.java

```
WebView webView;
static WebView sWebView; // because we will use in static method 
```

将它们放在 oncreate 方法中；

```
webView = (WebView )findViewById(webview);
sWebView= webView ; 
```

创建下面的方法

```
 // it is static because we will call it from second actvity 
    static loadUrl (String Url){
       sWebView.webloadUrl(url);
    } 
```

在创建方法的第二个活动中，

```
MainActivity.loadUrl("your URL"); // because load url is a statci method, you can call the it from other class. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:56:22.797

把你的网址放在额外的地方。

```
myIntet.putExtra("url", "www.abc.com"); 
```

在第二个活动中访问它。

```
String url = getIntent().getExtras().getString("url"); 
```

在 webview 中呈现 url。

```
WebView webView = (WebView)findViewById(R.id.webview);
webView.loadUrl(url); 
```

# xcode - MacPorts 2.1.2 git 和 libsndfile 安装

> ID：13659624
> 
> 赞同：0
> 
> 时间：2012-12-01T12:50:42.493
> 
> 标签：xcode, git, macports, libsndfile

我尝试使用端口安装 git 和 libsndfile，但我收到此消息。

```
MacPorts 2.1.2
Error: Port git not found
Error: Port libsndfile not found 
```

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:41:11.877

您可以尝试`port search git`搜索**正确**的端口。

本文将向您展示如何安装版本控制*Git*： [使用 MacPorts 安装 git](http://matthew.mceachen.us/blog/installing-git-with-macports-197.html)

`sudo port selfupdate`更新MacPorts*基础源*

然后做一个`sudo port install libsndfile`。

您可能需要先执行`sudo port upgrade outdated`升级已安装的端口。

# objective-c - Use iTunes' Up Next function with an API

> ID：13659626
> 
> 赞同：8
> 
> 时间：2012-12-01T12:50:49.940
> 
> 标签：objective-c, xcode, macos, cocoa, itunes

Is there a way to use iTunes' Up Next function with an API?

I know that you can use Scripting Bridge, but it doesn't cover any of the new functions of iTunes 11.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T12:53:13.233

iTunes has no public API but the scripting bridge

you could use Applesript UI Scripting I'd wager -- but that would be very fragile

you can also simulate a keypress then:
That less fragile than scripting the visible interface (IMO):
**http://hints.macworld.com/article.php?story=20121203223100335**

TADA -- YAY -- a 'ready' script that will add songs selected to UpNext ::

```
tell application "AppleScript Utility"
    set GUI Scripting enabled to true
end tell

tell application "iTunes"
    --get the song
    set l to playlist "Purchased"
    set t to item 5 of tracks of l

    --focus it in list
    reveal t

    --show window
    activate
end tell

tell application "System Events"
    -- option enter
    delay 1
    key down option
    delay 1
    key code 36
    key up option

    -- Click the “Play Song” button in the annoying dialog.
    set w to null
    try
        set w to window "Add to Up Next" of application process "iTunes"
    end try
    if w is not null then
        set b to UI element "Play Song" of w
        click b
    end if
end tell 
```

# c# - Apply SelectMany to three or more sequences

> ID：13659629
> 
> 赞同：2
> 
> 时间：2012-12-01T12:52:16.447
> 
> 标签：c#, linq

What is the best way to apply `SelectMany` to get a cross join of three or more sequences using only extension methods? Is there any other way to get a cross join?

**Test Data**

```
var a = Enumerable.Range(11, 2);
var b = Enumerable.Range(21, 2);
var c = Enumerable.Range(31, 2); 
```

**Expected Result**

```
 X  Y  Z 

11 21 31 
11 21 32 
11 22 31 
11 22 32 
12 21 31 
12 21 32 
12 22 31 
12 22 32 
```

**What I tried**

Here's the code that works but I wonder if there's any alternative that'd be easier to read and understand:

```
var d = a
    .SelectMany(rb => b
    .SelectMany(rc => c, (y, z) => new { Y = y, Z = z}), 
                        (x, yz) => new { X = x, Y = yz.Y, Z = yz.Z }); 
```

The equivalent query expression is good but not what I'm looking for:

```
var e = from x in a
        from y in b
        from z in c
        select new { X = x, Y = y, Z = z }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T13:41:24.653

您可以通过这种方式简化（即使不多）您的`SelectMany`查询：

```
var res = a.SelectMany(X => b.SelectMany(Y => c.Select(Z => new { X, Y, Z }))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T12:59:57.523

您可以使用`Join`始终匹配的项目密钥。

```
var e = a.Join(b, x => true, y => true, (x, y) => new { A = x, B = y })
         .Join(c, x => true, y => true, (x, y) => new { x.A, x.B, C = y }); 
```

诚然，它的效率可能低于您的`SelectMany`版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T14:38:38.877

我仍然不确定是否可以制作自定义方法。但无论如何，这里是：

```
public static IEnumerable<IEnumerable<T>> CrossJoin<T>(params IEnumerable<T>[] sequences)
{
    IEnumerable<IEnumerable<T>> result = new[] { Enumerable.Empty<T>() };
    foreach (var sequence in sequences)
    {
        result = result.SelectMany(i => sequence.Select(s => i.Concat(new[] { s })));
    }
    return result;
} 
```

如果添加这样的方法，那么重要的代码将变得非常可读：

```
var d = CrossJoin(
    Enumerable.Range(11, 2),
    Enumerable.Range(21, 2),
    Enumerable.Range(31, 2)
); 
```

结果：

```
Console.WriteLine("X  Y  Z");
foreach( var item in d ) {
    Console.WriteLine(String.Join( ",", item ));
}
/*
X  Y  Z
11,21,31
11,21,32
11,22,31
11,22,32
12,21,31
12,21,32
12,22,31
12,22,32
*/ 
```

# database - ASP MVC3: Accessing Database in Index file- There is already an object named 'Model Name' in the database

> ID：13659636
> 
> 赞同：0
> 
> 时间：2012-12-01T12:52:48.060
> 
> 标签：database, asp.net-mvc-3, model

I created a model class, ClassOne, for my database as follows

```
public class ClassOne
{
    [Key]
    public int primary { get; set; }
    public string column1 { get; set; }
    public string column2 { get; set; }
    public string column3 { get; set; }

} 
```

Then in a DAL folder I created, i added the following code

```
public class MyContext : DbContext
{
    public DbSet<ClassOne> ClassOnes { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }
} 
```

And I set up my connection string in my web.config

Instead of adding a controller for the model ClassOne, I want to access the data from my project's home controller file, in the index method. So I added the code

```
private ProjectContext db = new ProjectContext(); 
```

Hand my index method return statement is

```
return(db.ClassOnes.ToList()); 
```

However, when I run the code, I get the following error message:

> There is already an object named 'ClassOne' in the database.
> 
> Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.
> 
> Exception Details: System.Data.SqlClient.SqlException: There is already an object named 'ClassOne' in the database.

ANd it points to my return statement in the homecontroller.cs file:

> return(db.ClassOnes.ToList());

How can I fix this please?

# macos - Motorola MC68xxx

> ID：13659637
> 
> 赞同：0
> 
> 时间：2012-12-01T12:52:55.700
> 
> 标签：macos, assembly, osx-mountain-lion, motorola

> **Possible Duplicate:**
> [68k Assembler on OS X Lion](https://stackoverflow.com/questions/10218442/68k-assembler-on-os-x-lion)

I'm going to study a Motorola MC68xxx micro-controller and I'm wondering if there's an assembler for Mac OSX.

Eterm 6.5 is suggested for PC users.

# c++ - What is the meaning of client coordinates in SetWindowPos

> ID：13659642
> 
> 赞同：2
> 
> 时间：2012-12-01T12:53:20.357
> 
> 标签：c++, windows, winapi

The documentation for [SetWindowPos](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545%28v=vs.85%29.aspx) says the following for the X and Y parameters:

> X [in]
> 
> Type: int
> 
> The new position of the left side of the window, in client coordinates.
> 
> Y [in]
> 
> Type: int
> 
> The new position of the top of the window, in client coordinates.

By "client coordinates", does it mean that the parameters specify the position of the **client area** of the window, or that they specify the position of the window (not the client area) relative to the parent window's client area? Or something else?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T13:00:58.297

这是您的第二个命题：窗口在其父客户区中的位置。

# spring-mvc - Spring MVC @ExceptionHandler chaining

> ID：13659644
> 
> 赞同：3
> 
> 时间：2012-12-01T12:53:28.790
> 
> 标签：spring-mvc, exception-handling

Is there a way to chain @ExceptionHandler with exception throwing?
I'm trying to wrap exceptions throw in request handler methods before sending a response:

```
@ExceptionHandler(value = JsonParseException.class)
public void handleJsonParseException(JsonParseException e) throws BadRequestException {
    throw new BadRequestException(e);
}

@ResponseStatus(value = HttpStatus.BAD_REQUEST)
@ExceptionHandler(value = BadRequestException.class)
public @ResponseBody RestResponse handleBadRequest(BadRequestException e) {
    log.info("Bad REST Request", e);
    return constructErrorResponse(e);
} 
```

So, I'd like to for the `handleBadRequest()` to catch BadRequestException re-thrown from `handleJsonParseException()`.

With the code above, `handleJsonParseException()` causes server to return default error page instead of `RestResponse`.

Is this possible or will I have to put exception wrapping in request handlers' try - catch?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-08T00:00:39.777

不可能：

*   [链式注释异常处理 - @ExceptionHandler](https://jira.spring.io/browse/SPR-13726) ( **SPR-13726** )

# android - Google places Api in android Display all category?

> ID：13659646
> 
> 赞同：2
> 
> 时间：2012-12-01T12:53:46.667
> 
> 标签：android, google-places-api

ho to display all category in Google places API in android

this "**https://maps.googleapis.com/maps/api/place/nearbysearch/json?blablabla&type=food**?" show for only food.. how to display all category in google places api

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T13:07:15.323

Google 不支持所有类型的类别。. [支持的类型链接 - 点击这里](https://developers.google.com/places/documentation/supported_types)

如果你想搜索所有类型，你必须使用管道符号（|）并输入你想要的所有东西 [https://maps.googleapis.com/maps/api/place/nearbysearch/json?blablabla&type=food|bar|gym|赌场|酒店|学校|....](https://maps.googleapis.com/maps/api/place/nearbysearch/json?blablabla&type=food%7Cbar%7Cgym%7Ccasino%7Chotel%7Cschool)

# iphone - Detection system with other software are playing music

> ID：13659647
> 
> 赞同：-1
> 
> 时间：2012-12-01T12:54:01.630
> 
> 标签：iphone, objective-c, ios, avaudioplayer

How to judge whether the system has other software are playing music ios？ Thankyou！！！</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:57:33.380

要查看是否正在播放其他音频，您可以检查`kAudioSessionProperty_OtherAudioIsPlaying`属性。[从文档](http://developer.apple.com/library/ios/#documentation/AudioToolbox/Reference/AudioSessionServicesReference/Reference/reference.html)

```
UInt32 propertySize, audioIsAlreadyPlaying;

propertySize = sizeof(UInt32);
AudioSessionGetProperty(kAudioSessionProperty_OtherAudioIsPlaying, &propertySize, &audioIsAlreadyPlaying); 
```

[如何检测其他应用是否正在播放背景音频？](https://stackoverflow.com/questions/3152549/how-do-i-detect-if-other-apps-are-playing-background-audio)

# javascript - 返回语句上的 JSLint 错误

> ID：13659650
> 
> 赞同：1
> 
> 时间：2012-12-01T12:54:08.170
> 
> 标签：javascript, return, jslint

大家好，我目前正在我的文件上运行 JSLint 来清理它们。我有一些具有一些私有函数和公共函数的文件，并且我正在使用变量使外部文件可以访问公共函数。

```
Util.data = (function() {
    var privar; 
    pri_func1 = function() { 
       //do something
    },
    pri_func2 = function() { 
       //do something
    }

    return {  // JSLint error

         pub_fun1: function() {
               //do something
            },
         pub_fun2: function() {
               //do something
            }
    }

})(); 
```

现在在我的这个文件之外，我正在访问这些函数，就像这样

```
Util.data.bub_fun1();
Util.data.bub_fun2(); 
```

它工作正常。但是现在问题是 JSLint 在 return 语句上给了我一个错误

**#1 意外的“回归”。return { // 第 78 行，位置 9**

所以我想问有没有办法以我不必更改其他文件并且可以按原样调用这些函数的方式删除 JSLint 错误

```
Util.data.bub_fun1(); 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:05:01.457

一切安好。你只需要照顾一些小事。在这种情况下`;`，在声明 'pri_func2' 后丢失。

```
pri_func2 = function() { 
   //do something
}; 
```

对于这个错误，这应该足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T13:11:31.860

试试这个：

```
var Util = {};
Util.data = (function() {
    var privar,
        pri_func1 = function() { 
           //do something
        },
        pri_func2 = function() {
           //do something
        };

    return {  // JSLint error
         pub_fun1: function() {
               //do something
            },
         pub_fun2: function() {
               //do something
            }
    };
})(); 
```

# android - check if wifi is connected every 5 minutes after screen is off

> ID：13659652
> 
> 赞同：2
> 
> 时间：2012-12-01T12:54:47.870
> 
> 标签：android

I have found good tutorial to for Handling Screen OFF and Screen ON Intents: [http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/](http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/)

but i want that after screen is off every 5 minutes wifi is checked if is connected

```
ConnectivityManager connManager = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo mWifi = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
wifi.isConnected() 
```

i want to use `alarm manager` [http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html) but i don't know how to check every 5 minutes if is connected or not.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T13:50:51.547

您的方法完全糟糕，计时器是多余的。[只需为WifiManager.NETWORK_STATE_CHANGED_ACTION](http://developer.android.com/reference/android/net/wifi/WifiManager.html#NETWORK_STATE_CHANGED_ACTION)
创建广播接收器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T13:50:52.420

首先声明一个 Timer，如下所示：

```
Timer timer = new Timer(); 
```

然后将参数分配给计时器，如下所示：

```
timer.scheduleAtFixedRate(new checkWifi, 0,50000); 
```

然后定义 checkWifi 任务如下：

```
class checkWifi extends TimerTask {

        @Override
        public void run() {
        //here put the code that will check if the wifi is connected or not
       ConnectivityManager connManager =         (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
         NetworkInfo mWifi = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
         wifi.isConnected()
     }
   }; 
```

# mysql - MySQL stored procedure error: unknown system variable

> ID：13659653
> 
> 赞同：4
> 
> 时间：2012-12-01T12:54:49.227
> 
> 标签：mysql, stored-procedures

I have a problem with a stored procedure in MySQL 5.5\. This is the table on which the procedure must work:

```
Table `diba`:
----------------------------------------------------
Column   | Type    | Null | Default | Links to
----------------------------------------------------
ParentID | int(11) | No   |         | articoli -> id         
ChildID  | int(11) | No   |         | articoli -> id
Quantity | int(11) | No   |
lvl      | int(11) | No   | 0 
```

and this is the procedure itself:

```
DELIMITER //
CREATE PROCEDURE RenumberLevels()
DETERMINISTIC
BEGIN
DECLARE lvl_counter INT;
SET lvl_counter = 1;
UPDATE `diba` SET `diba`.`lvl` = CASE WHEN `diba`.`ParentID` IS NULL THEN 1 ELSE 0 END;
WHILE EXISTS (SELECT * FROM `diba` WHERE `diba`.`lvl` = 0) DO
UPDATE `diba` SET `diba`.`lvl` = lvl_counter +1 WHERE (SELECT `D2`.`lvl` FROM `diba` AS D2
WHERE D2.ChildID = `diba`.`ParentID`) > 0 AND `diba`.`lvl` = 0;
SET `diba`.`lvl` = lvl_counter + 1;
END WHILE;
END//
DELIMITER ; 
```

The resulting error is: `#1193 - Unknown system variable 'lvl'`

What's wrong with this procedure?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T12:03:07.557

这是*创建过程*语句的正确版本：

```
DELIMITER $$
CREATE PROCEDURE `RenumberLevels`()
DETERMINISTIC
BEGIN
  DECLARE lvl_counter INT;
  SET lvl_counter = 1;
  UPDATE `diba` SET `diba`.`lvl` = CASE WHEN `diba`.`ParentID` IS NULL THEN 1 ELSE 0 END;
  WHILE EXISTS (SELECT * FROM diba WHERE lvl = 0) DO
    CREATE TABLE dibatemp AS
      SELECT D2.lvl FROM diba AS D2 LEFT JOIN diba ON diba.ParentID=D2.ChildID;
    UPDATE diba
      SET lvl = lvl_counter +1 WHERE lvl IN (SELECT lvl FROM dibatemp) > 0 AND lvl = 0;
    DROP TABLE dibatemp;
    SET lvl_counter = lvl_counter + 1;
  END WHILE;
END$$
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T16:19:19.193

在上面写着

```
SET `diba`.`lvl` = lvl_counter + 1; 
```

我想你的意思是

```
SET lvl_counter = lvl_counter + 1; 
```

# wordpress - how to create permalink to new category file in wordpress

> ID：13659656
> 
> 赞同：0
> 
> 时间：2012-12-01T12:55:09.973
> 
> 标签：wordpress, categories, permalinks

as a newbie in wordpress i m searching over to create link of my 'new-category.php' file to display my product category only & 'category.php' will be default for others. So anyone please tell me how to change the default permalink to link-up my static 'new-category.php' file ?

Here below code displaying the default category page:

```
<?php $categories=getCategory ();
       foreach ($categories as $category)  {     ?>
<li> <a href=" <?php echo get_category_link( $category->term_id );?>">
<?php   echo     $category->cat_name; ?> </a></li>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:02:30.723

创建您的页面，如：

```
<?php /* Template Name: my_category*/ ?>

    <?php get_header(); ?>

    //my_category page

    <?php get_footer(); ?> 
```

并像访问它一样`: http://yourdomain.com/my_category`

模板名称：在这里起着重要作用。

# iphone - 由于数据存储问题而拒绝二进制文件

> ID：13659658
> 
> 赞同：-1
> 
> 时间：2012-12-01T12:55:21.550
> 
> 标签：iphone, objective-c, ios, xcode, ipad

由于这个问题，我的申请被拒绝了：

![在此处输入图像描述](../Images/76db155d5e3dd97c7f5a049c67782d3b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:58:57.560

我刚改成`NSDocumentDirectory`，`NSCachesDirectory`终于批准了！

# java - Java中更快的Erathostenes筛和素数分解

> ID：13659659
> 
> 赞同：1
> 
> 时间：2012-12-01T12:55:28.460
> 
> 标签：java, primes, factorization, sieve

我的输入是一个`Integer`. 在该值之前，应该找到所有质数并将其打印在 5 列中，然后我必须对整数进行“质数分解”并打印结果。

挺好用的，就是太慢了。。。

```
public class Bsp07 {
  public static void main(String[] args) {

     System.out.println("Enter the upper bound for prime number search");
     int n = SavitchIn.readLineInt();
     int[] aZahlen = new int[n - 1];
     for (int el = 0, zahl = 2; el != n - 1; el++, zahl++)
        aZahlen[el] = zahl;

     int p = 2, altesP; // next unmarked number
     boolean aus = false; // when unmarked elements are "aus" (off)

     while (aus == false) {

     // marks Elements; using For loop since for-each loop doesn't work
        for (int i = 0; i < aZahlen.length; i++) {
           if ((aZahlen[i] % p == 0) && (aZahlen[i] != p))
              aZahlen[i] = 0;
        }

        altesP = p; // merkt sich altes p
     // update p, find next unmarked Element
        for (int el : aZahlen) {
           if ((el != 0) && (el > altesP)) {
              p = el;
              break;
           }
        }
     // if p stayed the same unmarked elements are "aus" (off)
        if (altesP == p)
           aus = true;
     }

     int nervVar = 0;
     for (int pr : aZahlen) {
        if(pr==0) 
           continue;
        System.out.print(pr + " ");
        nervVar++;
        if ((nervVar % 5 == 0)) System.out.print("\n");
     }

     /* Factorization */
     System.out.print("\n" + n + " = ");
     for (int i = 0, f = 0; n != 1; i++, f++) {
        while(aZahlen[i]==0) i++;
     /*
      * If the prime divides: divide by it, print the prime,
      * Counter for further continuous decrease with prime number if n = 1,
      * Stop
      */
        if (n % aZahlen[i] == 0) {
           n /= aZahlen[i];
        // So that the first time is not *
           if (f != 0)
              System.out.print(" * " + aZahlen[i]);
           else
              System.out.print(aZahlen[i]);
           i--;
        }
        // So that f remains zero if no division by 2
        else
           f--;
     }
     System.out.println();
  } 
```

}

我在哪里可以节省一些资源？顺便说一句，我现在只能使用数组......对不起德国人的评论。只是如果一些真正不必要的长循环或类似的东西引起了你的注意

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:30:10.423

而不是搜索到`n-1`，我只会搜索到`(int) sqrt(n)`。自己弄清楚为什么这就足够了。;-)

我不明白你为什么需要`altesP`。你不能只增加`p`两个吗？

我不会通过删除来过滤。我会建立一个肯定的列表，并添加你找到的素数。

研究可以排除一个数字而不必经过整个筛子的快速素数测试。

因此，请对您的代码进行以下更改：

1.  而不是擦除`aZahlen`，建立一个列表`primes`。`sqrtN = (int)sqrt(n)`因为分配大小应该没问题，并使用`foundPrimes`你知道多少素数的计数。

2.  迭代`p`直到`<= sqrtN`没有任何模糊。看看是否有任何已知的素数是除数，否则你找到了一个新的素数。输出它，并将其存储在您的`foundPrimes`列表中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-01T13:38:07.073

An`int[]`每个值使用 32 位。如果您使用`byte[]`它，每个值将使用 8 位，如果您使用 BitSet，它将使用每个值 1 位（小 32 倍）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-01T17:55:04.107

我不确定你想做什么。我认为您正在尝试通过素数的试除法来分解整数。为此，您不需要所有小于整数的素数，只需要小于整数平方根的素数，因此您只需要一个简单的 Eratosthenes 筛来选择素数：

```
function sieve(n)
  bits := makeArray(2..n, True)
  ps := []
  for p from 2 to n
    if bits[p]
      ps.append(p)
      for i from p+p to n step p
        bits[i] = False
  return ps 
```

然后你可以使用这些素数来执行分解：

```
function factors(n)
  ps := primes(sqrt(n))
  fs := []
  p := head(ps)
  while p*p <= n
    if n%p == 0
      fs.append(p)
      n := n / p
    else
      ps := tail(ps)
      p := head(ps)
  fs.append(n)
  return fs 
```

[我在博客上的一篇文章](http://programmingpraxis.com/essays)中讨论了使用素数进行编程，其中包括这两种算法在 Java 中的实现。这篇文章还包括其他更有效的枚举素数和因式分解上面给出的方法。

# java - 找出谁（什么）杀死了我的进程

> ID：13659671
> 
> 赞同：1
> 
> 时间：2012-12-01T12:58:37.880
> 
> 标签：java, linux, process, signals, kill

当我从 bash 脚本运行我的 java 程序时，有时我会收到一条消息：

```
MyProgram.bash: line 30:  4388 Killed 
```

我将 bash 的参数设为最大值：

```
ulimit -Ss unlimited
ulimit -Sc unlimited
ulimit -Sn 4096 
```

但是当我在执行后按 CTRL+C 时，我有这个错误：

```
OpenJDK 64-Bit Server VM warning: Exception java.lang.OutOfMemoryError occurred dispatching signal SIGINT to handler- the VM may need to be forcibly terminated 
```

我添加了这些信息，当我在另一台机器上运行具有相同参数的相同程序时，我没有这个异常！我用这些参数运行我的程序（我的内存中有 5Go）

```
jvmargs="-d64 -Xms512m -Xmx3G -Xss1G" 
```

我的算法占用大量内存，因为我使用序列化。那么为什么我杀死了消息，而不是一个例外`OutOfMemoryError`呢？我能做些什么来解决问题？为什么当我在另一台具有相同参数的机器上运行时它可以工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T13:19:42.237

重新阅读该错误消息：

> OpenJDK 64 位服务器 VM 警告：发生异常 java.lang.OutOfMemoryError 将信号 SIGINT 分派到处理程序 - 可能需要强制终止 VM

如果 OpenJDK 无法*正确*处理中断信号（因为它完全内存不足），它可能会诉诸于*自杀*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T14:35:12.707

如果一个进程因为内存不足、Segfault 或其他导致 Linux 杀死它的原因而被杀死，您将在 dmesg 和/或您的 /var/log/dmesg 或 /var/log/messages 中找到带有堆栈跟踪的问题描述日志文件。尝试在 linux 控制台输入 dmesg。

```
# dmesg
[4374940.147496] php-fpm[15522]: segfault at 10000004d8 ip 00000010000004d8 sp 00007ffff9d41428 error 14 in libnss_dns.so.2[7ffe4d5a1000+5000]
[4375020.428429] soffice.bin[23336]: segfault at 48 ip 00007f8d63c566c0 sp 00007ffff529cc88 error 4 in libsvllo.so[7f8d63bb1000+108000] 
```

# c# - 填充出现在 UniformGrid 的底部

> ID：13659675
> 
> 赞同：1
> 
> 时间：2012-12-01T12:59:39.243
> 
> 标签：c#, wpf, xaml

我有下面的 XAML，它在 UniformGrid 的按钮下显示了一些填充：

```
<Grid>
  <UniformGrid Background="#CCC"
               HorizontalAlignment="Stretch"
               VerticalAlignment="Bottom"
               Margin="8,8,8,0">
    <Button Height="28"
            Margin="5">
      OK
    </Button>
    <Button Height="28"
            Margin="5">
      Cancel
    </Button>
  </UniformGrid>
</Grid> 
```

它显示为：

![2 个按钮](../Images/473cd3cdd72a8d792ab0b9c61422091a.png)

但是，如果我删除其中一个按钮，则不会发生填充：

![1 个按钮](../Images/21c3b45d2fd71334032fc3cc74d570ea.png)

当 XAML 中有 2 个按钮时，如何删除此填充？

我已经尝试了明显的`Padding`和`Margin`属性，但它保持不变。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T13:17:07.773

尝试指定行数：

```
<UniformGrid Rows="1" /> 
```

UniformGrid 将根据添加到其中的元素数自动设置列数和行数。看看这个[帖子](http://wpf.2000things.com/2012/01/13/472-uniformgrid-defaults-to-being-square/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T13:10:57.630

我发现将列数设置为 2 可以解决问题，如下所示：

```
<UniformGrid Columns="2" /> 
```

虽然我仍然不知道为什么如果不设置列这将不起作用，但如果有人能解释我将不胜感激。

# accordion - 手风琴菜单在特定 URL 上展开

> ID：13659680
> 
> 赞同：0
> 
> 时间：2012-12-01T13:00:01.570
> 
> 标签：accordion

手风琴菜单有一些顶级项目，这些项目在单击时只是展开菜单的相应部分。当 URL 包含一些关键字时，有没有办法触发这些扩展？例如：当 URL 包含关键字“狗”时，顶级“动物”会自动展开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T16:37:58.373

好的，我使用以下方法解决了我的问题：

```
$url = 'http://' . $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'];

if ((false !== strpos($url,'dog')) &&  ($li->hasClass('animals'))){

$li->attr('class', sprintf('level1 animals active'));} 
```

就像我在 url 中存在关键字 dog 时需要的那样，“动物”菜单设置为活动状态。

# oop - 哪个班级的“关注点分离”更好

> ID：13659681
> 
> 赞同：0
> 
> 时间：2012-12-01T13:00:09.053
> 
> 标签：oop, solid-principles

我有这个类，它创建一个文档并保存它：

```
public class DocCreator
{
  private IDocumentStore _documentStore;

  public DocCreator(IDocumentStore documentStore)
  {
    _documentStore = documentStore;
  }

  public void CreateAndSave()
  {
    var doc = new Document();
    doc.Title = "this is a title";
    doc.Content = whateverStream;
    doc.Hash = CalculateHash(doc.Content);
    //[do more things to create a doc]

    _documentStore.PersistToDisk(doc);
  }
} 
```

我认为这很不错，因为保存东西的代码隐藏在`DocumentStore`. 但我们可以更进一步，移除`_documentStore.PersistToDisk(doc);`对另一个类的调用，如下所示：

```
public class DocCreatorWorkflow
{
  private IDocumentStore _documentStore;

  public DocCreatorWorkflow(IDocumentStore documentStore)
  {
    _documentStore = documentStore;
  }

  public void CreateAndSave()
  {
    var docCreator = new DocCreator();
    var doc = docCreator.Create();

    _documentStore.PersistToDisk(doc);
  }
} 
```

在上面的示例中，我创建了另一个类，它调用两个`lower`类，因此负责“工作流”。它可能更干净，但它也使事情变得更加复杂。不是吗？

还是我应该总是选择第二种选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:29:51.230

根据可用的信息，选项二看起来更好（尽管可能有其他信息可能会改变这种判断）。

但是，总的来说，您如何确定哪个更好？我认为，最好先从概念化关注点开始，而不涉及代码。例如，在这种情况下，我认为存在三个问题。1) 创建文档 2) 持久化文档 3) 执行涉及创建和保存文档的逻辑（某些工作单元）。关键是，这第三个问题与前两个问题是分开的。DocCreator 和 DocumentStore 都不知道它们是以这种方式或其他方式被调用的。因此，这不是他们关心的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T13:42:15.593

我会选择选项 2。不过，您需要修改 DocCreatorClass，因为它不再负责将其保存到磁盘：

```
public static class DocCreatorClass
{
    public static Document Create()
    {
        Document doc = new Document();
        // Property assignment code here.

        return doc;
    }
} 
```

它是静态的，因此您不需要实例化 DocCreatorClass。我还将在 DocCreatorWorkflow 类中为 Create 和 Save 创建单独的函数：

```
public class DocCreatorWorkflow
{
    public IDocumentStore _documentStore;

    public DocCreateWorkflow(IDocumentStore documentStore)
    {
    }

    public void Document Create()
    {
        return DocCreatorClass.Create();
    }

    public void Save(Document doc)
    {
        _documentStore.PersistToDisk(doc);  
    }

    public void CreateAndSave()
    {
        Save(Create());
    }
} 
```

这样，您不必总是立即将新创建的文档保存到磁盘。CreateAndSave() 将是一个方便的函数，它在其中调用 Save() 和 Create()，以防您的程序经常想要立即保存一个新文档。

这种类型的设计肯定是更多的编码，可能会遇到更复杂的情况。从长远来看，它更容易查看和维护，因为每个功能只做一件事。

我个人坚持（大多数时候，因为可能有例外）一班一责的规则。当您发现某个功能不起作用时，这使您更容易找到项目的一部分。当您修复它时，您可以放心，您的应用程序的其余部分（其他任务，因此类）不会受到影响。对于函数，我喜欢以这样的方式创建它们，即在一个类中，不会在两个或多个不同的地方重复代码块。这样，您就不必寻找所有相同的代码块来更新。

# android - 如何调整图像大小以适应多种屏幕密度

> ID：13659682
> 
> 赞同：2
> 
> 时间：2012-12-01T13:00:14.517
> 
> 标签：android, android-image, android-screen-support

我需要将头像添加到网格项目。

我想知道如何处理从手机图库中选择的图像的大小调整。一旦选择，我想将需要一些调整大小，以适应网格。

但是，我是否需要为每个屏幕密度存储调整大小的图像？存储一个 xhdpi 版本并按比例缩小以供其他设备使用，或者以其他方式聪明？

原因是，应用程序将此图像存储到云数据库中，其他人可以下载此图像。他们可能会在不同的设备上看到图像（因此需要不同的图像尺寸）。这个图像的管理应该如何处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T06:48:37.860

> 做这样的事情：

```
 DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);

    Bitmap bitmapOrg = new BitmapDrawable(getResources(), new  ByteArrayInputStream(imageThumbnail)).getBitmap();

    int width = bitmapOrg.getWidth();
    int height = bitmapOrg.getHeight();

    float scaleWidth = metrics.scaledDensity;
    float scaleHeight = metrics.scaledDensity;

    // create a matrix for the manipulation
    Matrix matrix = new Matrix();
    // resize the bit map
    matrix.postScale(scaleWidth, scaleHeight);

    // recreate the new Bitmap
    Bitmap resizedBitmap = Bitmap.createBitmap(bitmapOrg, 0, 0, width, height, matrix, true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T13:13:02.040

我希望您发现下面的代码很有用。它将以最小的开销返回具有 reqd 尺寸的图像。我已经用过很多次了，就像魅力一样。您可以根据目标设备设置所需的尺寸。缩放会导致图片模糊，但这不会。

```
private Bitmap getBitmap(Uri uri) {                             
    InputStream in = null;
    try {
        final int IMAGE_MAX_SIZE = 200000; // 0.2MP
        in = my_context.getContentResolver().openInputStream(uri);

        // Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;                    //request only the dimesion
        BitmapFactory.decodeStream(in, null, o);
        in.close();

        int scale = 1;
        while ((o.outWidth * o.outHeight) * (1 / Math.pow(scale, 2)) > IMAGE_MAX_SIZE) {
            scale++;
        }

        Bitmap b = null;
        in = my_context.getContentResolver().openInputStream(uri);
        if (scale > 1) {
            scale--;
            // scale to max possible inSampleSize that still yields an image
            // larger than target
            o = new BitmapFactory.Options();
            o.inSampleSize = scale;
            b = BitmapFactory.decodeStream(in, null, o);
            // resize to desired dimensions
            int height = b.getHeight();
            int width = b.getWidth();

            double y = Math.sqrt(IMAGE_MAX_SIZE
                    / (((double) width) / height));
            double x = (y / height) * width;

            Bitmap scaledBitmap = Bitmap.createScaledBitmap(b, (int) x, (int) y, true);
            b.recycle();
            b = scaledBitmap;
            System.gc();
        } else {
            b = BitmapFactory.decodeStream(in);
        }
        in.close();

        return b;
    } catch (IOException e) {

        return null;
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T13:13:12.373

```
android:scaleType="fitXY"
android:layout_gravity="center" 
```

将缩放图像并将其居中设置大小为填充父级的容器，它应该这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T13:14:46.363

您可以将图像放入可绘制对象（无需创建 xhdpi、hdpi、mdpi、ldpi...）（全局图像）。

然后，您可以为不同的屏幕尺寸创建 4 个相同的布局。您的所有布局都可以使用可绘制导向器中的图像。因此，您可以轻松调整图像大小。

# networking - 网络操作方面的 poll() 函数调用

> ID：13659685
> 
> 赞同：1
> 
> 时间：2012-12-01T13:00:50.123
> 
> 标签：networking, tcp, network-programming

有人可以解释当我们对 fd 进行民意调查时会发生什么。我已阅读手册页并了解我们等待给定文件描述符上的某些事件

但我想了解的是，为了获得轮询结果[成功或错误（POLLHUP）]，发生了什么握手以及从客户端流向服务器并返回的数据包类型

我遇到了以下 - 连接建立 - 数据传输 - 连接关闭的序列图

这是网址 [http://www.eventhelix.com/realtimemantra/networking/Tcp.pdf](http://www.eventhelix.com/realtimemantra/networking/Tcp.pdf)

我们可以肯定地说这只是一种数据传输形式吗？如果没有，有人可以将我引导到正确的流程。

假设：我正在考虑上述问题中的 TCP 连接。

在此先感谢您的帮助。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:11:09.920

Poll() 不会导致任何数据流。它只是用来监听 fds 的事件。

对于 TCP 连接，数据流应该由客户端 connect() 调用发起。

# jquery - jQuery AJAX 请求返回 XML

> ID：13659687
> 
> 赞同：1
> 
> 时间：2012-12-01T13:01:10.317
> 
> 标签：jquery, xml, ajax

```
<suggestions>
<user>
<![CDATA[ Chris ]]>
</user>
<user>
<![CDATA[ Christina ]]>
</user>
</suggestions> 
```

和js部分

```
 $.ajax({
                type: "POST",
                url: 'index.php/Suggest/',
                dataType: 'xml',
                data: {username: username},
                success: function(data) {
                    $(data).find('suggestions').each(function(){
                        if ($(this).find('user').text()) {
                            $('#container').html('<div>' + $(this).find('user').text() + '</div>');
                        }
                    });
                },
                error: function(request, status, error) {
                    // will also occur when the user toggles a window and instantly clicks on a link, so don't alert anything
                }
            }); 
```

刀片

```
<div>ChrisChristina</div> 
```

但我想要

```
<div>Chris</div> <div>Christina</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:05:23.563

我认为它迭代了`suggestions`. 相反，它应该迭代`user`. 这是工作代码：

```
var response = ""+
"<suggestions>" +
"<user>" + 
"<![CDATA[ Chris ]]>" +
"</user>" + 
"<user>" + 
"<![CDATA[ Christina ]]>" + 
"</user>" + 
"</suggestions>";

// This is using the JSFiddle "echo" interface
$.post("/echo/xml/", {"xml": response}, function(data) {
    $(data).find('user').each(function(i, user){
        $("#container").append($("<div>").text($(user).text()));
    });
});​ 
```

您可以[在 JSFiddle 上实时查看](http://jsfiddle.net/vynYa/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T13:05:59.893

如果要添加所有用户，则应使用`append`而不是：`html`

```
 $(data).find('suggestions').each(function(){
        $(this).find('user').each(function(){
            $('#container').append('<div>' + $(this).text() + '</div>');
        });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T13:14:30.347

您将需要遍历每个`user`元素。`text()`在多个元素上使用方法时，返回所有文本，但方法无法识别添加空格。

```
$(data).find('suggestions').each(function() {
    var $user=$(this).find('user');
      /* use length to check if user elements exist*/
     if($user.length){
          var user=$user.map(function(){
            return $(this).text();
          }).get().join(' ')

        $('#container').append('<div>' + user + '</div>');
    }
}); 
```

# mongoid - 使用 RABL 从回形针返回图像 URL

> ID：13659690
> 
> 赞同：1
> 
> 时间：2012-12-01T13:01:29.620
> 
> 标签：mongoid, paperclip, rabl

我有一个用于头像的回形针用户模型，我需要能够`image_url`使用 RABL 返回每个尺寸（小、中、大）的用户模型。

在 mongoid 模型中我会简单地做 `self.avatar(:original)`，但现在没有任何效果，我只是在附件中得到一个空响应

```
"user" : {
  "id" : "50b204e10eae9c55fa000028",
  "paperclip::attachment" : {},
  "name" : "My Name"
} 
```

**/models/user.rb**

```
has_mongoid_attached_file :avatar,
    :styles => {
      :original => ['1000x1000>', :jpg],
      :small    => ['64x64#',           :jpg],
      :medium   => ['250x250',    :jpg],
      :large    => ['500x500>',   :jpg]
    } 
```

**/views/posts/base.json.rabl**

```
child :user do
    attributes :id, :name

    child :avatar do
        attributes :original
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:55:12.683

尝试这个：

```
child :user do
  attributes :id, :name

  node :avatar_original do |u|
    u.avatar(:original)
  end
end 
```

# javascript - PrimeFaces 在换页事件中获取当前页码

> ID：13659691
> 
> 赞同：1
> 
> 时间：2012-12-01T13:01:43.300
> 
> 标签：javascript, jsf-2, primefaces, datatables

我有一个[primefaces 数据表](http://www.primefaces.org/showcase/ui/datatablePagination.jsf)。`page change event`我需要知道使用客户端 API的当前页码。

我在用，

```
<p:ajax event="page" oncomplete="myFunction(usersWidget);"/> 
```

在 myFunction() 我有

```
debugger;
console.log(usersWidget.paginator.getCurrentPage()); 
```

问题是，在分页器`oncomplete`上设置新页面之前调用页面事件内部的回调`(PrimeFaces.widget.Paginator.setPage)`。我用调试器跟踪了这一点。

话虽如此，我会在 oncomplete 回调中获得我所在的上一个页码而不是当前页码。

如果在单击页面链接后设置页面后我可以得到回调，我就会知道当前页面。

**编辑：**文档说它是在 ajax 完成后和 DOM 更新后调用的回调。那么可能有什么问题呢？

请指点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T09:06:22.717

很奇怪，导致页面更新后调用 oncomplete ......

`oncomplete="myFunction();"` **不**传递参数如何调用？

您可能会以这种方式传递旧对象（带有过时的信息）... usersWidget 无论如何都是全局变量... ans 应该存在于您的 js 文件中

由于客户端 api 似乎没有与正确的值同步

作为一种解决方法，您可以尝试像这样从服务器传递页面值

```
DataTable dataTable = (DataTable) 
     FacesContext
         .getCurrentInstance()
         .getViewRoot()
         .findComponent("someOformID:someTableId"); 
```

或尝试，而不是上面的行，

```
PageEvent.getPage(); //PageEvent is an argument to you listener
myPageHolder = dataTable.getPage(); 
```

将此值放入 bean 属性并将其放入 xhtml 中的某个隐藏值中，而不是使用更新该隐藏值`p:ajax update`并从 js 中访问它

# c++ - 声明全局变量的最佳方式？

> ID：13659692
> 
> 赞同：0
> 
> 时间：2012-12-01T13:01:45.420
> 
> 标签：c++, global, declaration, definition

我有一个 OpenGL 应用程序，它需要在多个 OpenGL 函数中使用矢量。据我所知，最好的处理方法是在头文件中声明向量，并将头文件包含在所有包含 OpenGL 函数的文件中。

问题是我在链接器阶段遇到了多重定义错误。什么是最好的解决方案？没有全局变量有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:03:38.837

**在其中一个实现文件中**定义您的向量，并将其****声明**为`extern`在需要它的其余位置或在头文件中。**

 **在大多数情况下，全局变量不是要走的路，但是如果不查看整体设计，没有人可以确定什么是最适合您的情况。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-01T13:38:50.543

另一种方法是使用单例模式**

# ruby - 查找与给定条件匹配的元素的索引

> ID：13659696
> 
> 赞同：75
> 
> 时间：2012-12-01T13:02:18.400
> 
> 标签：ruby, arrays

给定一个数组，如何找到与给定条件匹配的元素的所有索引？

例如，如果我有：

```
arr = ['x', 'o', 'x', '.', '.', 'o', 'x'] 
```

要查找 item 所在的所有索引`x`，我可以这样做：

```
arr.each_with_index.map { |a, i| a == 'x' ? i : nil }.compact   # => [0, 2, 6] 
```

或者

```
(0..arr.size-1).select { |i| arr[i] == 'x' }   # => [0, 2, 6] 
```

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-12-01T14:24:33.977

红宝石 1.9：

```
arr = ['x', 'o', 'x', '.', '.', 'o', 'x']
p arr.each_index.select{|i| arr[i] == 'x'} # =>[0, 2, 6] 
```

[代码](http://ideone.com/VTErvf)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-12-01T13:14:49.643

另一种方式：

```
arr.size.times.select {|i| arr[i] == 'x'} # => [0, 2, 6] 
```

编辑：

不确定这是否需要，但他们在这里。

基准：

```
arr = 10000000.times.map{rand(1000)};

Benchmark.measure{arr.each_with_index.map { |a, i| a == 50 ? i : nil }.compact}
2.090000   0.120000   2.210000 (  2.205431)

Benchmark.measure{(0..arr.size-1).select { |i| arr[i] == 50 }}
1.600000   0.000000   1.600000 (  1.604543)

Benchmark.measure{arr.map.with_index {|a, i| a == 50 ? i : nil}.compact}
1.810000   0.020000   1.830000 (  1.829151)

Benchmark.measure{arr.each_index.select{|i| arr[i] == 50}}
1.590000   0.000000   1.590000 (  1.584074)

Benchmark.measure{arr.size.times.select {|i| arr[i] == 50}}
1.570000   0.000000   1.570000 (  1.574474) 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-12-01T13:44:14.617

`each_with_index.map`比您的产品线略有改进

```
arr.map.with_index {|a, i| a == 'x' ? i : nil}.compact # => [0, 2, 6] 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-12-01T16:03:41.200

这种方法有点长，但速度是原来的两倍

```
class Array
  def find_each_index find
    found, index, q = -1, -1, []
    while found
      found = self[index+1..-1].index(find)
      if found
        index = index + found + 1
        q << index
      end
    end
    q
  end
end

arr = ['x', 'o', 'x', '.', '.', 'o', 'x']
p arr.find_each_index 'x'
# [0, 2, 6] 
```

在这里，AGS 的基准与此解决方案相匹配

```
arr = 10000000.times.map{rand(1000)};

puts Benchmark.measure{arr.each_with_index.map { |a, i| a == 50 ? i : nil }.compact}
puts Benchmark.measure{(0..arr.size-1).select { |i| arr[i] == 50 }}
puts Benchmark.measure{arr.map.with_index {|a, i| a == 50 ? i : nil}.compact}
puts Benchmark.measure{arr.each_index.select{|i| arr[i] == 50}}
puts Benchmark.measure{arr.size.times.select {|i| arr[i] == 50}}
puts Benchmark.measure{arr.find_each_index 50}

  # 1.263000   0.031000   1.294000 (  1.267073)
  # 0.843000   0.000000   0.843000 (  0.846048)
  # 0.936000   0.015000   0.951000 (  0.962055)
  # 0.842000   0.000000   0.842000 (  0.839048)
  # 0.843000   0.000000   0.843000 (  0.843048)
  # 0.405000   0.000000   0.405000 (  0.410024) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-01-27T15:27:47.417

不确定您是否认为这是一种改进，但使用 ( `map`+ `compact`) 作为过滤器对我来说感觉非常笨拙。我会使用`select`, 因为这就是它的用途，然后只需抓住我关心的部分结果：

```
arr.each_with_index.select { |a,i| a == 'x' }.map &:last 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-06-27T13:20:34.000

我定义`Array#index_all`了它的行为，`Array#index`但返回所有匹配的索引。这个方法可以接受一个参数并阻塞。

```
class Array
  def index_all(obj = nil)
    if obj || block_given?
      proc = obj ? ->(i) { self[i] == obj } : ->(i) { yield self[i] }
      self.each_index.select(&proc)
    else
      self.each
    end
  end
end

require 'test/unit'

class TestArray < Test::Unit::TestCase
  def test_index_all
    arr = ['x', 'o', 'x', '.', '.', 'o', 'x']
    result = arr.index_all('x')
    assert_equal [0, 2, 6], result

    arr = [100, 200, 100, 300, 100, 400]
    result = arr.index_all {|n| n <= 200 }
    assert_equal [0, 1, 2, 4], result
  end
end 
```

# javascript - 'el' 在 vi ew.render().el 中做了什么？

> ID：13659701
> 
> 赞同：9
> 
> 时间：2012-12-01T13:02:43.720
> 
> 标签：javascript, jquery, backbone.js

我正在努力学习骨干。我知道这`el`是正在采取行动的元素。如果未指定，则为空 div。我正在我的视图中创建一个模板并返回视图对象。然后我正在渲染视图，但我不明白为什么我`el`在渲染函数之后链接。有人可以向我解释这行代码：

```
var view = new PersonView();
this.$('#family_list').children().append(view.render().el); 
```

el 是干什么用的？谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-01T13:05:49.400

jQuery 的[`.append()`](http://api.jquery.com/append/)方法需要一个 HTML 字符串或一个 DOM 元素附加到它的调用节点。

视图的[`.el`](http://backbonejs.org/#View-el)属性是其绑定的 DOM 元素。调用后`view.render()`，它的`.el`DOM 元素属性被传递给 jQuery`.append()`方法，因此 jQuery`.append()`获取更新（新渲染）的 DOM 节点。

这是可能的，因为`.render()`调用必须按照`this` [文档中的建议](http://backbonejs.org/#View-render)返回。因此，它的返回值是视图对象本身¹，并且`.el`可以从中立即引用。

* * *

¹维基百科：[流畅的界面](http://en.wikipedia.org/wiki/Fluent_interface)

# java - AndroidBillingLibrary：远程服务在 BillingController.requestPurchase 上崩溃

> ID：13659702
> 
> 赞同：4
> 
> 时间：2012-12-01T13:02:50.303
> 
> 标签：java, android, in-app-purchase, in-app-billing

我正在开发一个应用程序，它具有一些用户必须付费才能使用的功能。用户可以通过点击按钮在每个活动中购买。为此，我使用 Android In-app billing 和 robotsmedia/AndroidBillingLibrary。一切似乎在我的设备上运行良好：HTC Wildfire S (Android 2.3.5) 和 Asus Transformer Pad (Android 4.1.1) 但我得到的信息（带有日志捕获）有时在其他设备上单击购买按钮后没有任何反应。设备：

*   三星 Galaxy ACE (Android 2.3.5)
*   HTC Sensation (Andorid 4.0.3)
*   Xperia Neo V (Android 2.3.4)

这是日志捕获：

```
11-30 15:05:16.157: D/Parent Activity:(30220): Request Purchase: myitem
11-30 15:05:16.177: W/BillingService(30220): Remote billing service crashed
11-30 15:05:16.177: W/BillingService(30220): Caused by: null 
```

这是我的活动代码的一部分：

```
@Override
protected void onCreate(Bundle savedInstanceState) 
{
        super.onCreate(savedInstanceState);
        (...)
        initViews();
        initBilling();
}

@Override
protected void onDestroy()
{
    BillingController.unregisterObserver(mBillingObserver);
    (...)
    super.onDestroy();
}

private void initBilling()
{
    mBillingObserver = new BillingObserver(this);
    BillingController.registerObserver(mBillingObserver);
    BillingController.setConfiguration(new BillingConfiguration());
    BillingController.checkBillingSupported(getApplicationContext());
    if (!mBillingObserver.isTransactionsRestored()) {
        BillingController.restoreTransactions(getApplicationContext());
    }
    Settings.updateOwnedItems(this);
}

private void showPurchaseAlert()
{
    if(Settings.isOnline() && BillingController.checkBillingSupported(this) == BillingStatus.SUPPORTED)
    {
    (...)
        ((Button) alertRoot.findViewById(R.id.alert_billing_yes))
            .setOnClickListener(new OnClickListener() {
                    public void onClick(View v) {
                        requestPurchase(BillingElement.CATALOG[number].sku);
                        alert.cancel();
                }
            });
    }
    else
    {
      (...)
      //Purchase Alert Invisible
    }
}

public void requestPurchase(String itemId) 
{
    Log.d("Parent Activity:", "Request Purchase: "+itemId);
    BillingController.requestPurchase(getApplicationContext(), itemId, true, null);
} 
```

在这段代码中，我总是检查设备是否在线以及是否支持应用内计费。似乎来自 Google In-App Billing 的 IMarketBillingService 抛出 RemoteException 并且它在 BillingService 类的 robotmedia/AndroidBillingLibrary 中被捕获：

```
private void runRequest(BillingRequest request){
    try {
        long requestId = request.run(mService);
        BillingController.onRequestSent(requestId, request);
    } catch (RemoteException e) {
        Log.w(this.getClass().getSimpleName(), "Remote billing service crashed");
        Log.w(this.getClass().getSimpleName(), "Caused by: "+e.getCause());

        // TODO: Retry?
    }
} 
```

谁能解释我为什么抛出 RemoteException ？以及如何处理？我做了很多测试，但在我的设备上，应用内计费始终正常工作。在这些引发 RemoteException 的设备上更有趣的是，它只是偶尔发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T10:45:40.737

它是 robotsmedias 实现中的一个错误，您只需将服务重新绑定到您的活动。

hpique 在他的 fork 中修复了它（和其他一些错误）：[https ://github.com/hpique/AndroidBillingLibrary/commit/a62593764172d0fd650b1dca1d15c59e79aecd49](https://github.com/hpique/AndroidBillingLibrary/commit/a62593764172d0fd650b1dca1d15c59e79aecd49)

看看[https://github.com/hpique/AndroidBillingLibrary](https://github.com/hpique/AndroidBillingLibrary)

# c# - HttpWebRequest 在 30 个线程后开始超时

> ID：13659705
> 
> 赞同：1
> 
> 时间：2012-12-01T13:03:09.273
> 
> 标签：c#, multithreading, httpwebrequest

我正在运行以下代码来启动我的线程：

```
 stpStartInfo.MaxWorkerThreads = Convert.ToInt32(parserThreadCount.Value);
        stpStartInfo.MinWorkerThreads = 1;
        _smartThreadPool2 = new Smart.SmartThreadPool(stpStartInfo);

        string f = sourceFileName.Text;
        int totCount = countLinesInFile(f);

        using (StreamReader r = new StreamReader(f))
        {
            int iia = 0;
            string line;
            while ((line = r.ReadLine()) != null)
            {
                if (!string.IsNullOrEmpty(line)) 
                {
                    _smartThreadPool2.QueueWorkItem(
                    new Amib.Threading.Func<string, int, int, int>(checkSource),
                    line, iia, totCount);

                    iia++;
                }
            }
        } 
```

我的线程正在做这个 HttpWebRequest：

```
 try
        {
            HttpWebRequest _wReq;
            HttpWebResponse _wResp;
            System.IO.StreamReader _sr;
            System.Text.ASCIIEncoding _enc = new System.Text.ASCIIEncoding();
            _wReq = (HttpWebRequest)WebRequest.Create(PAGE_URL);
            _wReq.CookieContainer = cookieCont;
            _wReq.UserAgent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)";
            _wReq.ReadWriteTimeout = 10000;
            _wReq.Timeout = 10000;
            _wReq.ProtocolVersion = HttpVersion.Version10;
            _wReq.KeepAlive = false;

            _wResp = (HttpWebResponse)_wReq.GetResponse();
            _sr = new System.IO.StreamReader(_wResp.GetResponseStream());
            html = _sr.ReadToEnd();

            _sr.Close();
            _cookies = _wReq.CookieContainer;
            _wResp.Close();
        }
        catch (WebException ex)
        {

            if (ex.Status == WebExceptionStatus.ProtocolError && ex.Response != null)
            {
                var resp = (HttpWebResponse)ex.Response;
                if (resp.StatusCode == HttpStatusCode.ServiceUnavailable)
                {

                }

            }
        } 
```

它工作得很好，但是在 30ish 线程之后请求开始超时..

知道如何解决这个问题吗？:)

# functional-programming - 使用函数式编程作为字符序列的所有子字符串

> ID：13659706
> 
> 赞同：2
> 
> 时间：2012-12-01T13:03:24.783
> 
> 标签：functional-programming, sequences

作为[我之前](https://stackoverflow.com/q/13650326/96233)关于在字符串中查找相同字符的运行的问题的后续，我还想找到一种函数算法来查找长度大于 2 的所有子字符串，这些子字符串是字母或数字的升序或降序序列（例如,: "defgh", "34567", "XYZ", "fedcba", "NMLK", 9876", etc.) in a string ( `[Char]`). 我考虑的唯一序列是`A..Z`, `a..z`,的子串`0..9`及其递减对应项。返回值应该是（从零开始的偏移量，长度）对的列表。我正在将“zxcvbn”密码强度算法从 JavaScript（包含命令式代码）转换为 Scala。我想保持我的代码纯粹尽可能实用，出于以函数式编程风格编写的所有常见原因。

我的代码是用 Scala 编写的，但我可能可以用 Clojure、F#、Haskell 或伪代码中的任何一种来翻译算法。

示例：对于字符串`qweABCD13987`将返回`[(3,4),(9,3)]`.

我写了一个相当可怕的函数，当我再次可以访问我的工作计算机时，我将发布它，但我确信存在一个更优雅的解决方案。

再一次，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:58:38.910

最好将一个问题拆分为几个较小的子问题。我用 Haskell 写了一个解决方案，这对我来说更容易。它使用惰性列表，但我想您可以使用流或通过使主函数尾递归并将中间结果作为参数传递来将其转换为 Scala。

```
-- Mark all subsequences whose adjacent elements satisfy
-- the given predicate. Includes subsequences of length 1.
sequences :: (Eq a) => (a -> a -> Bool) -> [a] -> [(Int,Int)]
sequences p [] = []
sequences p (x:xs) = seq x xs 0 0
  where
    -- arguments: previous char, current tail sequence, 
    -- last asc. start offset of a valid subsequence, current offset
    seq _ [] lastOffs curOffs = [(lastOffs, curOffs - lastOffs)]
    seq x (x':xs) lastOffs curOffs
        | p x x'    -- predicate matches - we're extending current subsequence
            = seq x' xs lastOffs curOffs'
        | otherwise -- output the currently marked subsequence and start a new one
            = (lastOffs, curOffs - lastOffs) : seq x' xs curOffs curOffs'
      where
        curOffs' = curOffs + 1

-- Marks ascending subsequences.
asc :: (Enum a, Eq a) => [a] -> [(Int,Int)]
asc = sequences (\x y -> succ x == y)

-- Marks descending subsequences.
desc :: (Enum a, Eq a) => [a] -> [(Int,Int)]
desc = sequences (\x y -> pred x == y)

-- Returns True for subsequences of length at least 2.
validRange :: (Int, Int) -> Bool
validRange (offs, len) = len >= 2

-- Find all both ascending and descending subsequences of the
-- proper length.
combined :: (Enum a, Eq a) => [a] -> [(Int,Int)]
combined xs = filter validRange (asc xs) ++ filter validRange (desc xs)

-- test:
main = print $ combined "qweABCD13987" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:01:49.853

这是我在 Clojure 中的近似值：

我们可以转换输入字符串，以便我们可以应用您[之前的算法](https://stackoverflow.com/q/13650326/96233)来找到解决方案。算法不会是最高性能的，但我认为您将拥有更抽象和可读的代码。

示例字符串可以通过以下方式进行转换：

```
user => (find-serials "qweABCD13987")
(0 1 2 # # # # 7 8 # # #) 
```

重用[之前的函数“find-runs”](https://stackoverflow.com/questions/13650326/functional-programming-algorithm-for-finding-repeated-characters/13693089#13693089)：

```
user => (find-runs (find-serials "qweABCD13987"))
([3 4] [9 3]) 
```

最终代码将如下所示：

```
(defn find-runs [s]
  (let [ls (map count (partition-by identity s))]
    (filter #(>= (% 1) 3) 
            (map vector (reductions + 0 ls) ls))))

(def pad "#")

(defn inc-or-dec? [a b] 
  (= (Math/abs (- (int a) (int b))) 1 ))

(defn serial? [a b c] 
  (or (inc-or-dec? a b) (inc-or-dec? b c)))

(defn find-serials [s] 
  (map-indexed (fn [x [a b c]] (if (serial? a b c) pad x)) 
       (partition 3 1 (concat pad s pad)))) 
```

`find-serials`创建一个 3 单元格滑动窗口并应用于`serial?`检测作为序列开头/中间/结尾的单元格。该字符串被方便地填充，因此窗口始终以原始字符为中心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T17:50:22.073

我想这个问题的一个很好的解决方案确实比最初看起来更复杂。我不是 Scala Pro，所以我的解决方案肯定不是最佳和好的，但也许它会给你一些想法。

基本思想是计算两个连续字符之间的差异，不幸的是它变得有点混乱。问我是否有些代码不清楚！

```
object Sequences {

  val s = "qweABCD13987"                         

  val pairs = (s zip s.tail) toList   // if s might be empty, add a check here            
  // = List((q,w), (w,e), (e,A), (A,B), (B,C), (C,D), (D,1), (1,3), (3,9), (9,8), (8,7))

  // assuming all characters are either letters or digits
  val diff = pairs map {case (t1, t2) =>
    if (t1.isLetter ^ t2.isLetter) 0 else t1 - t2}   // xor could also be replaced by !=
  // = List(-6, 18, 36, -1, -1, -1, 19, -2, -6, 1, 1)

  /**
   *
   * @param xs A list indicating the differences between consecutive characters
   * @param current triple: (start index of the current sequence;
   *                         number of current elements in the sequence;
   *                         number indicating the direction i.e. -1 = downwards, 1 = upwards, 0 = doesn't matter)
   * @return A list of triples similar to the argument
   */
  def sequences(xs: Seq[Int], current: (Int, Int, Int) = (0, 1, 0)): List[(Int, Int, Int)] = xs match {
    case Nil => current :: Nil
    case (1 :: ys) =>
      if (current._3 != -1)
        sequences(ys, (current._1, current._2 + 1, 1))
      else
        current :: sequences(ys, (current._1 + current._2 - 1, 2, 1))  // "recompute" the current index
    case (-1 :: ys) =>
      if (current._3 != 1)
        sequences(ys, (current._1, current._2 + 1, -1))
      else
        current :: sequences(ys, (current._1 + current._2 - 1, 2, -1))
    case (_ :: ys) =>
      current :: sequences(ys, (current._1 + current._2, 1, 0))
  }                                               

  sequences(diff) filter (_._2 > 1) map (t => (t._1, t._2))
} 
```

# php - 使用 curl 我在抓取时没有得到整个 html，为什么？

> ID：13659708
> 
> 赞同：0
> 
> 时间：2012-12-01T13:03:47.543
> 
> 标签：php, curl

例如，我尝试抓取 yebhi.com 的元标记，而对于某些页面，它返回为 null。

我正在使用以下代码：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://www.yebhi.com/253196/PD/Tech-Graphic-Tee-81703611.htm');
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4');
$data = curl_exec($ch);
curl_close($ch); 
```

我没有正确获取 html，我做错了什么？

# objective-c - 具有浮动组行的基于视图的 NSTableView

> ID：13659713
> 
> 赞同：2
> 
> 时间：2012-12-01T13:04:12.347
> 
> 标签：objective-c, macos, cocoa, nstableview

这实际上是一个非常简单的问题：有没有什么方法可以使基于视图的 NSTableView 上的组行视图浮动*而不使其也透明*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:12:03.073

使用您喜欢的自定义单元格 - 浮动只是将单元格放置在表格内。

通常 RowView 为所有单元格绘制背景，默认的不绘制任何自己的背景。这就是你必须在你的单元格中做的事情——让它自己绘制一个 bg 而不是依赖于 TableRowView

# html - 使用 CSS 可概括蚀刻线效果？

> ID：13659715
> 
> 赞同：0
> 
> 时间：2012-12-01T13:04:46.700
> 
> 标签：html, css

我想开发一个通用的解决方案来创建蚀刻线。目标是不必为我想要蚀刻的每个配色方案手动选择密切相关的颜色。这个问题似乎是相对于背景颜色的缩进部分的颜色对于创建 3 维效果有些关键。

[下面是一个蓝色示例（注释气泡上方/数字“11”下方的行）](http://instagram.com/p/Omjwtpxm_O/)。我想我需要使用`box-shadow`但不确定这是否是最好的方法。

如果 box-shadow 是我应该使用的，有谁知道如何设置它的 CSS 值，这样灰线也适用于蓝线？

![在此处输入图像描述](../Images/94211e701aacc1c703866589070b9f2d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T14:08:19.940

您可以使用带有半透明黑/白颜色（*using`rgba`*）的边框，这将使底层颜色变暗/变亮。

[http://dabblet.com/gist/4182495](http://dabblet.com/gist/4182495)上的示例

`:after`使用/添加伪元素可以`:before`让您在添加二级边框等方面获得额外的力量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T13:10:26.213

这是该评论指示器的稍微简化的 CSS，我使用 Chrome Web Developer 工具找到了它：

```
.media-bar .count-badge {
    padding: 0 7px;
    background: #1C5380;
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), inset 0 1px 1px rgba(0, 0, 0, 0.2);
    border-radius: 12px;
} 
```

如果您访问该页面并检查 count-badge 元素，您将能够打开和关闭 box-shadow 样式，这将显示它们如何创建插入效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T13:19:28.267

我想有两个边界在一起：

```
border-bottom: 1px solid #1C5380;
border-top: 1px solid rgba(255, 255, 255, 0.12); 
```

# iphone - iPhone 当增加 UITableView 部分标题的高度时，它下面的单元格的高度会降低。如何避免？

> ID：13659718
> 
> 赞同：1
> 
> 时间：2012-12-01T13:05:19.960
> 
> 标签：iphone, uitableview, sectionheader

我创建了一个 UITableView，我调整了部分标题的高度和背景。这一切都按预期工作，但它下面的单元格（行）变小了。似乎部分标题越过了第一个单元格。有没有办法解决这个问题？或者我应该问，如何解决这个问题？

我的部分标题代码：

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 30)];

    UILabel *headerLabel = [[UILabel alloc] initWithFrame:CGRectMake(0.0, 0.0, tableView.bounds.size.width, 30)];
    headerLabel.text = [self tableView:tableView titleForHeaderInSection:section];
    headerLabel.font = [UIFont boldSystemFontOfSize:16];
    [headerLabel setTextColor:[UIColor whiteColor]];
    headerLabel.backgroundColor = [UIColor colorWithPatternImage: [UIImage imageNamed:@"menuSectionBg.png"]];

    [headerView addSubview:headerLabel];

    return headerView;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T13:46:04.193

您不应该调整单元格视图的高度，而是实现

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section; 
```

实现中的方法`UITableViewDelegate`。

甚至在创建单元之前计算单元的高度。

# ruby - 如何为 RGL::DirectedAdjacencyGraph 提供动态输入？

> ID：13659723
> 
> 赞同：0
> 
> 时间：2012-12-01T13:05:50.170
> 
> 标签：ruby, ruby-rgl

我是 RGL 的新手。我想显示所有父子类型关系的图表。我已经编写了以下代码。

我的代码如下： 我们需要提供如下输入来生成图形。
**`require 'rgl/adjacency'`
`require 'rgl/dot'`
`input_arr = [1,2,2,3,2,4,4,5,6,4,1,6]`** **`dg=RGL::DirectedAdjacencyGraph[1,2,2,3,2,4,4,5,6,4,1,6]`
`dg.write_to_graphic_file('jpg')`** 

**但我想动态地给出数组，即我想传递**input_arr**。但它不起作用。谁能解释一下怎么走？**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T13:54:38.573

最终我可以解决我的问题。

我写的如下：
我已经处理了我的 main_arr 变量，就像这样。
**`main_arr=[[1,2],[2,3],[2,4],[4,5],[6,4],[1,6]]`
`dg=RGL::DirectedAdjacencyGraph[]`
`main_arr.each do |ma|`
  `dg.add_edge ma[0],ma[1]`
`end`**

现在它工作正常。现在我可以传递任何动态值来生成图形。**

# .net - 将子文件夹 URL 重定向到子域

> ID：13659727
> 
> 赞同：1
> 
> 时间：2012-12-01T13:06:21.440
> 
> 标签：.net, url, redirect, azure

我想将 abc.com/yyy 重定向到 xxx.abc.com，我可以知道如何在域管理器中实现这一点吗？

实际上这是一个托管在 Azure 中的 .net MVC 项目，我可以知道这是在域管理器中完成还是？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:49:20.480

为了完成这项工作，您需要做一些事情：

1.  为您的 abc.com 域配置**CNAME ，** **xxx.abc.com**指向**yourapplication.cloudapp.net**（您不在 Azure 门户中执行此操作，这是您在管理域设置的网站上执行的操作） .
2.  **将/yyy**子目录配置为 Web 角色中的附加站点，如下所述：[如何为多个网站配置 Web 角色](http://msdn.microsoft.com/en-us/library/windowsazure/gg433110.aspx)。这将允许您将主机头 ( **xxx.abc.com** ) 映射到子目录 ( **/yyy.com** )。完成此操作后，您的子目录也可以通过**xxx.abc.com 访问**
3.  如果您还想设置从**abc.com/yyy**到**xxx.abc.com**的重定向重定向，则需要设置一个 URL 重写，并将操作类型设置为**重定向**（[如此处所述](http://www.iis.net/learn/extensions/url-rewrite-module/creating-rewrite-rules-for-the-url-rewrite-module)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T20:39:24.090

这也可以通过 global.asax 以编程方式完成。我用它来重定向

> [http://www.mysite.com](http://www.mysite.com)

至

> [http://mysite.com](http://mysite.com)

这是执行此操作的代码。

```
public class SubdomainRoute : RouteBase
{
    public override RouteData GetRouteData(HttpContextBase httpContext)
    {
        RouteData returnValue = null;
        var url = httpContext.Request.Headers["HOST"];
        var index = url.IndexOf(".");
        if (index < 0)
            return returnValue;

        string subDomain = url.Substring(0, index);
        switch (subDomain.ToLowerInvariant())
        {
            case "www":
                returnValue = new RouteData(this, new MvcRouteHandler());
                returnValue.Values.Add("controller", "Redirect");
                returnValue.Values.Add("action", "RedirectToRoot");

                break;
                /*case "live":
                returnValue = new RouteData(this, new MvcRouteHandler());
                returnValue.Values.Add("controller", "Database");
                returnValue.Values.Add("action", "Index");
                returnValue.Values.Add("liveMode", true); // set parameter to 'true';
                break;*/
            default: // not a supported domain, return null;
                break;
        }
        return returnValue;
    }

    /// <summary>
    /// required override
    /// </summary>
    /// <param name="requestContext"></param>
    /// <param name="values"></param>
    /// <returns></returns>
    public override VirtualPathData GetVirtualPath(RequestContext requestContext, RouteValueDictionary values)
    {
        return null;
    }

}

 public static void RegisterRoutes(RouteCollection routes)
    {

        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.Add(new SubdomainRoute()); 
```

}

当它找到您搜索的子域时，它将重定向到一个操作。确保此操作返回`Redirect`到您想要的任何路径。

# java - 如何使用通配符在 Spring 中指定回滚？

> ID：13659732
> 
> 赞同：0
> 
> 时间：2012-12-01T13:07:18.397
> 
> 标签：java, spring, spring-aop, spring-jdbc

我在春天有以下代码 -

```
<tx:advice id="transactionAdvice" transaction-manager="transactionManager">
        <tx:attributes>
            <tx:method name="*" propagation="REQUIRED" rollback-for="org.springframework.dao.DataAccessException" no-rollback-for="java.lang.IndexOutOfBoundsException"
                timeout="30" />
        </tx:attributes>
    </tx:advice> 
```

此配置将回滚`DataAccessException`及其所有子异常。即异常层次结构被回滚。但是我希望能够回滚一组异常（不属于同一层次结构）。是否可以写出类似的东西 -

```
<tx:advice id="transactionAdvice" transaction-manager="transactionManager">
        <tx:attributes>
            <tx:method name="*" propagation="REQUIRED" rollback-for="org.springframework.*" no-rollback-for="java.lang.*"
                timeout="30" />
        </tx:attributes>
    </tx:advice> 
```

我已经尝试了上面的代码，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:03:54.910

不，你不能使用通配符，但是

```
 <tx:method name="*" propagation="REQUIRED" rollback-for="org.springframework" no-rollback-for="java.lang" /> 
```

会做你想做的。`Exception`如果类名包含该模式，则匹配是肯定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:09:18.927

Spring 通常使用普通子字符串作为异常匹配模式。

例如，RollbackRuleAttribute javadoc

> 注意：仔细考虑模式的具体程度，以及是否包含包信息（这不是强制性的）。例如，“例外”几乎可以匹配任何东西，并且可能会隐藏其他规则。如果“Exception”旨在为所有检查的异常定义规则，则“java.lang.Exception”将是正确的。对于更不寻常的异常名称，例如“BaseBusinessException”，无需使用完全包限定的名称。

所以你可以尝试使用`"org.springframework."`. 但是似乎没有记录，Spring 文档只提到*rollback-for*具有逗号分隔的格式。

> *rollback-for*触发回滚的异常；逗号分隔。例如，com.foo.MyBusinessException,ServletException

# tomcat - Spring 安全上下文路径解析器

> ID：13659734
> 
> 赞同：3
> 
> 时间：2012-12-01T13:07:25.743
> 
> 标签：tomcat, grails, spring-security

我想定义从 spring security 设置的会话 cookie 的路径，以允许从 web-app 进行多次登录。例如：

```
http://localhost:8080/myApp/context1/login
http://localhost:8080/myApp/context2/login
http://localhost:8080/myApp/context3/login
... 
```

基本上，这可以通过覆盖`LoginUrlAuthenticationEntryPoint`, `SimpleUrlAuthenticationFailureHandler`, `SimpleUrlAuthenticationSuccessHandler`,来实现`SimpleUrlLogoutSuccessHandler`。但是我找不到负责设置 cookie 上下文路径的处理程序，我需要从以下位置覆盖它：

```
/myApp 
```

到适当的等价物：

```
/myApp/context1 
```

这是必需的，以便允许并行登录这些应用程序。

Q：tomcat如何动态改变session cookie（HttpSession）的cookie路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:15:14.343

您的应用程序容器负责向客户端发送会话 cookie。在 Spring Security 代码中，您只会看到如下行：

```
HttpSession session = request.getSession(); 
```

Spring Security 源代码中没有 session-cookie-creation 逻辑。这就是为什么没有接口来实现或配置属性来提供自定义路径的原因。

要指定将分配给由您的 Web 应用程序创建的任何会话 cookie 的路径，您可以输入：

```
<web-app>
    <session-config>
        <cookie-config>
            <path></path>
        </cookie-config>
    </session-config>
</web-app> 
```

在你的`web.xml`描述符中。

但是，您希望在一个 Web 应用程序中拥有多个会话。为什么不为每个用户上下文部署新的应用程序？这是最合乎逻辑的方法。

编辑：恐怕您想要实现无需修改会话即可轻松完成的事情。您的问题看起来更像是授权而不是身份验证。也许您需要为每个上下文使用角色？还是访问控制列表？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:09:31.110

扩展 InlineExplodedTomcatServer

```
package myapp

    import org.grails.plugins.tomcat.InlineExplodedTomcatServer
    import org.grails.plugins.tomcat.TomcatLoader
    import grails.util.GrailsNameUtils
    import org.apache.catalina.connector.Connector
    import org.apache.catalina.startup.Tomcat
    import org.apache.coyote.http11.Http11NioProtocol
    import org.codehaus.groovy.grails.lifecycle.ShutdownOperations
    import org.codehaus.groovy.grails.plugins.PluginManagerHolder
    import org.codehaus.groovy.grails.plugins.GrailsPluginUtils
    import static grails.build.logging.GrailsConsole.instance as CONSOLE
    import org.apache.tomcat.util.scan.StandardJarScanner
    import org.springframework.util.ReflectionUtils

    class MyappInlineExplodedTomcatServer extends InlineExplodedTomcatServer {

        MyappInlineExplodedTomcatServer(String basedir, String webXml, String contextPath, ClassLoader classLoader) {
            super(basedir, webXml, contextPath, classLoader)
            context.setSessionCookieDomain(System.getProperty('mydomain.com'))
            context.setSessionCookiePath('/mypath')     
        }

    } 
```

扩展tomcat服务器工厂

```
package myapp

import grails.web.container.EmbeddableServer

import org.grails.plugins.tomcat.TomcatServerFactory

class MyappServerFactory extends TomcatServerFactory {

    EmbeddableServer createInline(String basedir, String webXml, String contextPath, ClassLoader classLoader) {             
        new MyappInlineExplodedTomcatServer(basedir, webXml, contextPath, classLoader)      
    }

} 
```

在 events.groovy 中设置服务器工厂

```
eventRunAppStart = {
        System.setProperty 'grails.server.factory','myapp.MyappServerFactory'
        }
} 
```

显然，此配置仅在使用 grails "run-app" 运行时应用，而不是在部署在 tomcat 或其他服务器上时应用。在 tomcat 上，您必须在 tomcat 配置文件中配置它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T14:28:22.787

默认情况下，[org.springframework.security.web.authentication.rememberme.TokenBasedRememberMeServices](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/authentication/rememberme/TokenBasedRememberMeServices.html)类型的 bean rememberMeServices 负责设置 cookie

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-03T16:04:24.527

请参考spring security中[successfulAuthentication的默认行为。](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/AbstractAuthenticationProcessingFilter.html#successfulAuthentication%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse,%20org.springframework.security.core.Authentication%29)

**更新（来自评论的指针）：**在 2 点成功认证时，spring security `"Invokes the configured SessionAuthenticationStrategy to handle any session-related behaviour"`。因此，尝试`SessionControlStrategy`为您的应用程序实现自定义扩展框架提供的类，看看它是否满足您的需求。
框架提供的策略类有[ConcurrentSessionControlStrategy](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/session/ConcurrentSessionControlStrategy.html)、[NullAuthenticatedSessionStrategy](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/session/NullAuthenticatedSessionStrategy.html)、[SessionFixationProtectionStrategy](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/session/SessionFixationProtectionStrategy.html)

* * *

**成功认证后控制 cookie 创建逻辑及其值：**

1) 为您的应用程序选择记住我的服务
，例如： [TokenBasedRememberMeServices](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/rememberme/TokenBasedRememberMeServices.html)或[PersistentTokenBasedRememberMeServices](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/rememberme/PersistentTokenBasedRememberMeServices.html)

2）创建一个`MyAppTokenBasedRemenberMeServices`扩展所选类的自定义类，例如：[TokenBasedRememberMeServices](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/rememberme/TokenBasedRememberMeServices.html)

3）覆盖方法`protected void setCookie(String[] tokens, int maxAge, HttpServletRequest request, HttpServletResponse response)`。它负责创建 cookie 并将创建的 cookie 添加到响应中（这样您可以控制任何 cookie 值，例如上下文路径值）。此方法位于类中：[AbstractRememberMeServices](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/rememberme/AbstractRememberMeServices.html)

4）映射新创建的自定义类`rememberMeServices`

我希望这有帮助！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-06T22:02:47.160

好的……这一次我想我找到了你要找的东西。看看[这个答案](https://serverfault.com/questions/401574/tomcat-session-managment-independent-session-in-one-host)

我认为你可以在创建[过滤器的 grails 中做到这一点](http://grails.org/doc/2.0.x/guide/theWebLayer.html#filters)

# javascript - 带有球衣的 REST Web 服务的 jQuery 客户端

> ID：13659739
> 
> 赞同：-1
> 
> 时间：2012-12-01T13:08:17.943
> 
> 标签：javascript, jquery, ajax, web-services, client

我是 jQuery 新手，我正在尝试为我的 Web 服务开发一个客户端。我尝试了一些简单的东西，只是为了测试，但它仍然不起作用，虽然对我来说似乎没问题。

我的 tomee/webapp 文件夹中有 jQuery 库，还有我的 html 和 javascript 文件。如果我在我的 javascript 文件中编写一些非 jQuery 代码，它就可以工作。

我有以下代码：

索引.html

```
<!DOCTYPE html SYSTEM "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title></title>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="client.js"></script>
    </head>
    <body>
        <input type="button" id="getAllButton" value="Get all books" onclick="return getAllBooks()"/>
        <div id="messageBox"></div>
    </body>
</html> 
```

客户端.js

```
function getAllBooks() {
    $.ajax({
        dataType: 'application/xml',
        type: 'GET',
        url: rootURL + '/books',
        success: function (data) {
            alert(1);
        },
        error: function (data) {
            alert(2);
        }
    });
} 
```

问题是不会出现警报。如果编写纯 javascript（我的意思是没有 jQuery），则会出现警报。

为什么不显示警报？有什么建议吗？

谢谢！

索林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:40:13.003

让我们尝试找出哪些有效，哪些无效；尝试将您的 client.js 更改为：

```
alert(1); 
function getAllBooks() {
    alert(2);
    window.open(rootURL + '/books'); 
    $.ajax({
        dataType: 'application/xml',
        type: 'GET',
        url: rootURL + '/books',
        success: function (data) {
            alert(3);
        },
        error: function (data) {
            alert(4);
        }
    });
} 
```

如果您看到警报 #1（当您的 html 页面加载时），那么您的 client.js 路径就可以了。如果您看到警报 #2（当您单击按钮时），那么至少该函数正在被调用。

验证 window.open() 是否显示您的 Web 服务应该向您显示的内容（即使是错误消息也会引导您选择正确的路径）。当然，如果您看到警报 #3 或 #4，那么您的问题就被它自己神秘地解决了......它有时会发生 :-)

注意：如果您知道如何使用浏览器的 javascript 控制台，请使用 console.log() 而不是 alert() 进行调试；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T13:52:13.530

感谢 charlietfl 的提示！他们帮我解决了问题。

问题是它不知道 rootURL 是谁。我在一个示例中找到了 rootURL，我认为这是在 jQuery 中定义的。似乎不是。

# java - Appengine 和 JPA - 读取刚刚写入的数据

> ID：13659741
> 
> 赞同：2
> 
> 时间：2012-12-01T13:08:40.780
> 
> 标签：java, google-app-engine, jpa-2.0, google-cloud-datastore

我刚刚开始使用 AppEngine，但数据存储存在一些问题。

我想使用 JPA 将一些数据写入数据存储区。我一直在关注 Appengine 网站上的 Java 示例和留言簿示例，我想将此留言簿示例翻译为使用 JPA 2.0。

当我在我的输出中使用我的数据存储区中已经可用的一些数据（使用以前的运行创建）运行应用程序时，它显示我在写入之前有 7 个项目，然后写入是好的，之后它又给了我 7 个项目。但是，如果我打开我的管理控制台 (http://localhost:8888/_ah/admin/datastore?kind=Greeting)，我可以看到数据存储区中已经有 8 个项目。所以出于某种原因，我正在遭受幻读......

我的所有代码如下所示。

有谁知道我做错了什么？

这就是我的 persistence.xml 的样子：http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" version="1.0">

```
<persistence-unit name="transactions-optional">
    <provider>org.datanucleus.api.jpa.PersistenceProviderImpl</provider>
    <properties>
        <property name="datanucleus.NontransactionalRead" value="true"/>
        <property name="datanucleus.NontransactionalWrite" value="true"/>
        <property name="datanucleus.ConnectionURL" value="appengine"/>
    </properties>
</persistence-unit> 
```

这是代码：

```
 EntityManagerFactory emf = EMF.get();
        EntityManager em = emf.createEntityManager();
        try {
            em.getTransaction().begin();

            // Reading the data
            javax.persistence.Query query = em.createQuery("SELECT FROM Greeting g");
            List<Greeting> greetings = query.getResultList();
            for (Greeting g : greetings) {
                log.info("Greeting found: " + g.getContent());
            }
            log.info("Number of greetings found before writing: " + greetings.size());

            // Storing the data
            Greeting greeting = new Greeting();
            greeting.setUser(user);
            greeting.setDate(new Date());
            greeting.setContent(content);

            em.persist(greeting);
            em.flush();

            // Reading the data
            query = em.createQuery("SELECT FROM Greeting g");
            greetings = query.getResultList();
            for (Greeting g : greetings) {
                log.info("Greeting found: " + g.getContent());
            }
            log.info("Number of greetings found after writing: " + greetings.size());
            em.getTransaction().commit();
        } catch (Exception e) {
            log.warning("Cannot write to database because of error: " + e.getMessage());
            e.printStackTrace();
        } finally {
            em.close();
            emf.close();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T02:30:53.643

Google AppEngine 不支持这种数据库一致性。对于每次写入，它们不会在后台复制数据库，而是同时写入 > 50% 的副本并稍后完成复制。因此，如果您先写入，然后立即读取，您的读取可能会遇到尚未复制的副本。

您只需要更改代码以避免写入后读取。通常这应该不是问题，因为它已经在内存中。

[https://developers.google.com/appengine/docs/java/datastore/structuring_for_strong_consistency](https://developers.google.com/appengine/docs/java/datastore/structuring_for_strong_consistency)

要在 Eclipse 中更改该设置，请转到 Project > Right Click > Google > AppEngine Settings > Run Configurations > Web Application > YOUR PROJECT > App Engine > High Replication Settings (HRD) Unapplied Job Percentage > 50。此值模拟次数百分比在开发中写入后读取将失败。0% = 正常数据库（但在生产中会失败）。

JPA 位于 Datastore API 之上，因此也存在同样的问题。

# liferay - 过滤liferay中的下拉列表值

> ID：13659742
> 
> 赞同：0
> 
> 时间：2012-12-01T13:08:45.573
> 
> 标签：liferay, portlet

我正在开发一个liferay portlet，我是新手。在我的一种形式中，我有两个下拉列表。我希望当用户在第一个下拉列表中选择一个值时过滤第二个下拉列表值。例如，如果用户在第一个下拉列表中选择一个部门，则第二个显示所选部门的员工。我不知道如何在liferay中做到这一点。提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:27:51.490

一种方法是使用 AJAX。通常你可以使用 jQuery，但 liferay 有一个称为 Alloy UI 的框架。这个想法是，当用户在第一个下拉列表中选择某些内容时，应用程序将选定的行发送到 portlet，这会将新列表发送回第二个下拉列表。

# php - PHP / Javascript - 空引用

> ID：13659744
> 
> 赞同：0
> 
> 时间：2012-12-01T13:09:24.823
> 
> 标签：php, javascript, null

我正在寻找一个简单的脚本，我可以用它来使引用者为空

一个例子是：

[http://www.refnull.com/](http://www.refnull.com/)

有人知道如何在 php 或 javascript 中使引用者为空吗？我不介意任何一种方式，最好不要使用任何数据库。

所以他们去 www.examplesite.com/link.php?http://whateverlinktonull.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:20:16.733

这样`refnull.com`做的方式如下（你可以通过使用像`Fiddler2`windows这样的工具来解决这个问题）：

* * *

**请求 1 内容**：

```
<meta http-equiv="refresh" content="0; url=http://www.refnull.com/?http://www.whatismyreferer.com/&attempt=1"> 
```

..它将您重定向到请求2：

* * *

**请求 2 内容**：

```
<script>
    function go(){
        window.frames[0].document.body.innerHTML='<form target="_parent" method="post" action="http://www.refnull.com/?http://www.whatismyreferer.com/&attempt=1&attempt=2"></form>';
        window.frames[0].document.forms[0].submit()
    }   
</script>
<iframe onload="window.setTimeout('go()', 99)" src="about:blank" style="visibility:hidden"></iframe> 
```

..重定向到请求 3：

* * *

**请求 3“内容”**：

`HTTP/1.1 302 Found`可以使用以下 PHP 完成的标头：

```
header("HTTP/1.1 302 Found");
header("Location: http://www.whatismyreferer.com/");
die(); 
```

..它将您重定向到外部站点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T13:23:33.320

使用[元刷新](https://en.wikipedia.org/wiki/Meta_refresh)。推荐人是由浏览器设置的，但这通常对我来说很好。

你可以用 HTML 把它吐出来：

```
<meta http-equiv="refresh" content="0;URL='http://example.com/'"> 
```

或者你可以直接设置http头：

```
Refresh: 0;URL='http://example.com/' 
```

# iphone - initWithFrame - 尝试与 initWithStyle 交换 - 发生错误

> ID：13659745
> 
> 赞同：-1
> 
> 时间：2012-12-01T13:09:28.860
> 
> 标签：iphone, objective-c, ios, xcode

我有一段代码使用旧的折旧方法；

```
cell1 = [[[CustomCell alloc] initWithFrame:CGRectZero reuseIdentifier:kLastCellIdentifier] autorelease]; 
```

我尝试简单地将 initWithFrame 部分替换为 initWithStyle

```
cell1 = [[[CustomCell alloc] initWithStyle:CGRectZero reuseIdentifier:kLastCellIdentifier] autorelease]; 
```

但是，这不起作用，并给出了一个新错误

“没有从 'const CGRect' 到 'UITableViewCellStyle' aka 'int' 的可行转换”

我想知道是否有人可以帮助我替换代码行，使其适合新操作系统而不会出错。

亲切的问候，

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:17:16.823

对于 ios6，你不传递一个矩形而是一个样式。

样式不是矩形，而是 uitableviewcellstyle 枚举值

```
typedef enum {
   UITableViewCellStyleDefault,
   UITableViewCellStyleValue1,
   UITableViewCellStyleValue2,
   UITableViewCellStyleSubtitle
} UITableViewCellStyle; 
```

使用例如默认值

```
UITableViewCellStyleDefault 
```

# jquery - 如何读取任何点击元素的 css 属性？

> ID：13659747
> 
> 赞同：0
> 
> 时间：2012-12-01T13:09:46.777
> 
> 标签：jquery, css

我试图制作一个 jquery 颜色选择器，它应该读取单击的任何元素的背景颜色并将其返回到 .result div 中。

问题：如何描述“当前点击的”元素？

这是我的代码：

```
$("p").click(function () {
  var color = $("p").css("background-color");
  $(".result").html("That div is <span style='color:" +
                     color + ";'>" + color + "</span>.");
}); 
```

我希望这适用于任何被点击的元素，而不仅仅是 p。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:16:50.300

```
$(document).click(function(ev){
  var color = $(ev.target).css("background-color");   
});​ 
```

[http://jsfiddle.net/tarabyte/9v2rA/](http://jsfiddle.net/tarabyte/9v2rA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T13:16:46.960

如果您正在谈论一个颜色选择器框，其中包含`p`代表每种颜色的几个元素，因此您不需要`click`在任何元素上调度所有事件。您可以使用`p`s。您可以使用`this`来引用当前单击的`p`：

```
var color = $(this).css("background-color"); 
```

所以你的代码将是：

```
$("p").click(function () {
  var color = $(this).css("background-color");
  $(".result").html("That div is <span style='color:" +
                     color + ";'>" + color + "</span>.");
}); 
```

您的 HTML 可能是：

```
<div class="color-picker">
  <p style="background-color: #111;"></p>
  <p style="background-color: #333;"></p>
  <p style="background-color: #666;"></p>
  <p style="background-color: #999;"></p>
</div> 
```

# c++ - 如何进入类内的向量？

> ID：13659749
> 
> 赞同：1
> 
> 时间：2012-12-01T13:10:02.340
> 
> 标签：c++

```
class WavFile
{
    std::vector<short> SoundData;

public:

    std::vector<short> getSoundData()
    {
        return SoundData;
    }
} 
```

通常我会使用`fread( &SoundData[0], 1, 1337, SomeFile );`

但是现在我在一个类中使用了一个向量，我遇到了以下问题：

*   知道如何在类外设置向量大小。

*   而且我不确定如何使用该方法作为`fread`将数据放入向量中的参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T13:14:43.387

一般来说，您尝试做的事情很**糟糕**。它有几个要点：

如果是`vector`在课堂上封装的话，如果是public的话，还是可以从外面正常操作的。

```
WavFile WF;
void* Ptr = WF.SoundData.data();
// void* Ptr = &WF.SoundData[0]; - C++03 
```

您还可以*包装*一些对向量的调用，`.resize()`例如：

```
void WavFile::resize(vector::size_type new_size) {
    SoundData.resize(new_size);
}

void* WavFile::getRawPtr () {
    return SoundData.data();
    // return (&SoundData[0]); - C++03
} 
```

如果你正在使用`std::vector`，你也应该在上面使用相应的 C++ 读取函数。将`vector`其视为内存数组是有效的，但有更好的方法来使用它，`fstream`例如。

如果您正在封装`vector`（或一般的任何`std`容器），请不要按值返回它！它将导致复制所有元素。相反，返回对容器的 const 引用，或者更好的是，返回范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T13:14:26.157

> *   知道如何在类外设置向量大小。

您可以构造向量，将大小传递给向量的构造函数。

> *   而且我不确定如何使用该方法作为 fread 的参数将数据放入向量中。

你为什么`fread`开始使用？为什么不`fstream`呢？

此外，一旦你初始化了传递大小的向量，你就可以`&v[0]`像声明为 c-array 时一样使用它（即`float v[const_size]`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T13:17:48.100

您不能使用向量作为 fread 的参数。您必须分配一块内存（短缓冲区[SIZE]）作为缓冲区来读取数据，然后将数据逐个元素地插入缓冲区中的向量。

虽然 C++ 中允许使用 fread，但最好使用原生 C++ 方式读取文件，例如 fstream。

# zend-framework - Zend Framework：当使用内置翻译器时，是否可以覆盖一些验证器错误消息？

> ID：13659753
> 
> 赞同：1
> 
> 时间：2012-12-01T13:10:45.137
> 
> 标签：zend-framework

我已使用此答案中的验证器错误自定义示例：[https](https://stackoverflow.com/questions/4880076/custom-error-message-for-input-validators-using-the-array-syntax) ://stackoverflow.com/a/4881030/822947 ，但我需要使用 addValidator() 或 setMessage()/setMessages() 覆盖一些翻译错误。下面的例子不起作用（似乎，内置的翻译器有优先权？）......我该怎么做？

```
$field->addValidator ('Alpha', false, array ('messages' => array (Zend_Validate_Alpha::NOT_ALPHA => 'My msg')));

$Alpha = new Zend_Validate_Alpha ();
$Alpha->setDisableTranslator (true);
$Alpha->setMessage ('My msg', Zend_Validate_Alpha::NOT_ALPHA);

$Alpha->setMessages (array (Zend_Validate_Alpha::NOT_ALPHA  => 'My msg'));
$field->addValidator ($Alpha); 
```

**更新** 问题不在于我添加验证器并向其设置消息的方式。

我的目标是本地化*所有*错误消息。但是对于*某些*表单字段，我需要添加更具体的消息。

例如，在我的 lang/translate.php 我有 common `Zend_Validate_Alpha::NOT_ALPHA => 'Value contains non alphabetic characters'`，

但对于名称字段，我需要更具体 `Zend_Validate_Alpha::NOT_ALPHA => 'Field can contain only alphabetic characters and spaces'`，

当我启用内置翻译器时，问题是特定消息被忽略。所以例如代码

```
$form = new Zend_Form ();

$validator = new Zend_Validate_Alpha ();
$validator->setMessages (array (
    Zend_Validate_Alpha::NOT_ALPHA => 'xxx %value% x'
));

$form->addElement ('text', 'digit', array (
    'validators' => array (
        $validator
    )
));

$name = new Zend_Form_Element_Text ('name');
$name->addValidator ('Alpha', true, array (
    'allowWhiteSpace' => true,
    'messages' => array
    (
        Zend_Validate_Alpha::NOT_ALPHA => 'my more specific localized msg',
    )
));

$form->addElement ($name);

$form->isValid (array (
    'digit' => '___',
    'name' => '___',
));

Zend_Debug::dump ($form->getMessages ()); 
```

当翻译器禁用时，我有

```
array(2) {
  'digit' =>
  array(1) {
    'notAlpha' =>
    string(9) "xxx ___ x"
  }
  'name' =>
  array(1) {
    'notAlpha' =>
    string(30) "my more specific localized msg"
  }
} 
```

启用翻译器后，我收到来自 lang/translate.php 的消息

```
array(2) {
  'digit' =>
  array(1) {
    'notAlpha' =>
    string(104) "common localized msg"
  }
  'name' =>
  array(1) {
    'notAlpha' =>
    string(104) "common localized msg"
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:56:18.227

问题是 Alpha 验证器不支持构造函数参数中的选项数组。您必须单独设置它们。

```
 $form = new Zend_Form ();

    $validator = new Zend_Validate_Alpha ();

    /* Custom error message */
    $validator->setMessages (array (
        Zend_Validate_Alpha::NOT_ALPHA => 'xxx %value% x'
    ));

    $form->addElement ('text', 'digit', array (
        'validators' => array (
            $validator
        )
    ));

    $form->isValid (array (
        'digit' => '___'
    ));

    Zend_Debug::dump ($form->getMessages ()); 
```

# 更新

那么问题出在你的翻译上。

我的翻译器配置如下：

```
resources.translate.adapter = Array
resources.translate.data = APPLICATION_PATH "/test-translate" 
```

文件 en.php：

```
return array (
                "notAlpha" => 'my Translated alpha'
); 
```

它有效。

# java - 运行时显示的小程序中的随机数更新每一帧，或被背景图像透支

> ID：13659758
> 
> 赞同：2
> 
> 时间：2012-12-01T13:11:07.737
> 
> 标签：java, random, runtime, awt, graphics2d

编辑：*使用awt ...*

我正在尝试在基于小程序的数学游戏中显示随机数，但遇到了问题。根据我调用该方法的位置，会发生以下两种情况之一：

*   数字生成并正确显示，不会自动更新每一帧，而是在运行时更新时被每帧*的背景和艺术品绘制，或者......*
*   屏幕上显示的数字显示在背景元素上方，但每帧都会重新绘制。

快速说明：

```
private int setNumberOne() {

    return rand.nextInt(11) + 2;
}

private int setNumberTwo() {

    return rand.nextInt(11) + 2;
}

private int setAnswer() {

    return setNumberTwo() * setNumberOne();
}

private void displayOutput() {

    Graphics2D g2d = graphics();

    int one = setNumberOne();
    int ans = setAnswer();

    setNumberTwo();

    g2d.setColor(Color.WHITE);
    g2d.drawString(one + " x ? = " + ans, 480, 480);
} 
```

在初始化方法中调用此函数会显示一个静态问题，当遇到特定触发器时，我可以在其他地方更新该问题，但是其他*所有*内容都被更新事件绘制在它之上，使其不可见。我设法看到这个工作的唯一方法是从游戏中删除其他图像进行测试。

有没有办法在小程序中设置 GUI 元素的“优先级”？

我目前正在考虑尝试将该`displayOutput()`方法包含在它自己的线程中，但我对 Java 的经验并不丰富，而且事实证明它很难解决。

我还尝试不让背景在运行时更新，但结果是移动的游戏对象在屏幕上留下了痕迹。

我错过了什么？如果有人对如何正确实施有任何建议，我很高兴听到他们的声音。

更新：*“...如果是 AWT，则在 [...] 组件的 paint(...) 方法中绘制，并使用 JVM 传入的 Graphics 对象”* -

已解决，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T13:19:16.807

不要`getGraphics()`用于您的 Graphics 组件，因为这将返回一个非持久对象，该对象将在下一次重绘时被覆盖。`paintComponent(...)`如果这是一个 Swing 应用程序（你没有说），则绘制一个 JComponent 的方法，如果是`paint(...)`AWT，则绘制一个组件的方法，并使用 JVM 传入的 Graphics 对象。主要阅读有关如何使用 Java 进行绘图的教程，因为那里已对此进行了很好的解释。

# javascript - 在jQuery中的下拉选择上显示警报对话框

> ID：13659763
> 
> 赞同：0
> 
> 时间：2012-12-01T13:11:34.373
> 
> 标签：javascript, html

我试图在 jQuery 的下拉选择中显示一个警报对话框，但它似乎不起作用。我究竟做错了什么？我的代码在这里：http: [//jsfiddle.net/AyCFt/6/](http://jsfiddle.net/AyCFt/6/)

**HTML**

```
<select>
  <option selected="selected">Please select your Login</option>
  <option>--------------------------</option>
  <option id="#projectmanager">Project Manager</option>
  <option id="#projectmanager2">Project Manager 2</option>
</select>​ 
```

**JS**

```
$(document).ready(function() {
    $("#projectmanager").click(function(){
        alert("Hello");
    });
    $("#projectmanager 2").click(function(){
        alert("Hello to you too!");
    });
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:33:46.663

这样，您可以为每个项目经理显示一个独特的警报框。

```
<select id='ddselect'>
      <option selected="selected" >Please select your Login</option>
      <option>--------------------------</option>
      <option id="projectmanager">Project Manager</option>
      <option id="projectmanager2">Project Manager 2</option>
</select>

$(document).ready(function() {
    $("#ddselect").change(function(){
        if($("#ddselect option:selected").attr("id") == "projectmanager"){
            alert("Project manager 1 alert");
        }
        if($("#ddselect option:selected").attr("id") == "projectmanager2"){
            alert("Project manager 2 alert");
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T14:04:42.227

一种优雅且灵活的方法：http: [//jsfiddle.net/AyCFt/13/](http://jsfiddle.net/AyCFt/13/) jsFiddle 只是解决了提出的问题（显示警报）。下面的代码显示代码更加灵活，但如果不需要其他答案的 if/switch 语句，则避免它们。

**HTML**：我在 select 元素中添加了一个 id 和名为 data-alert 的自定义属性，其中包含每个选项的消息，这些选项需要在被选中时显示警报。这些属性在 HTML5 和更高版本中有效，但在早期的 HTML 版本中也可以正常工作：

```
<select id="selectAlert">
  <option selected="selected">Please select your Login</option>
  <option>--------------------------</option>
  <option id="#projectmanager" data-alert="Hello">Project Manager</option>
  <option id="#projectmanager2" data-alert="Hello to you too">Project Manager 2</option>ello
</select> 
```

**Javascript（版本 1）**：如果您只想要警报并且喜欢简洁明了的代码：

```
$(function() {
    $("#selectAlert").change(function(){
        var alertMsg = $(this).find(":selected").attr("data-alert");
        if(alertMsg) alert(alertMsg);
    });
}); 
```

请注意，此解决方案不会强制您显示文本或选项的值。您可以根据需要自由选择任何警报消息。

**为什么会这样？** 这种解决方案将逻辑与数据分离。因此，如果您正在生成`select`使用服务器端代码（作为动态生成页面的一部分或通过 AJAX），如果可以避免，理想情况下您不希望以相同的方式生成 Javascript。尽管您的代码和其他一些解决方案中的代码将警报消息放在 Javascript 代码中，但此解决方案将它们放在`option`HTML 中的 each 中。

**Javascript（版本 2）**：如果您需要做更多的事情：

```
$(document).ready(function() {
    $("#selectAlert").change(function(){
        var $selected = $(this).find(":selected"); //faster than $("#selectAlert :selected") as it only searches among the options in the select and not the whole DOM like another answer's solution
        //some code: you can do what you want with $selected here get it's value, its id, etc etc
        var alertMsg = $selected.attr("data-alert")
        if(alertMsg) alert(alertMsg);
        //some more code here
    });
}); 
```

**问题中发布的代码问题：** 您发布的代码的问题是您`click`在选择元素的选项上使用。正如您所发现的，此事件没有为各个选项定义。

**关于 UI 事件的一般要点：**一般来说，最好尽可能尝试使用与设备无关的、更“语义”的事件。在这种情况下，我们使用的事件是告诉我们选择的值已更改的事件。用户是使用鼠标、键盘还是触摸都没有关系！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T13:16:19.147

尝试使用以下代码。它会为你工作。

```
<select id='ddselect'>
          <option selected="selected" >Please select your Login</option>
          <option>--------------------------</option>
          <option id="#projectmanager">Project Manager</option>
          <option id="#projectmanager2">Project Manager 2</option>
    </select>

    $(document).ready(function() {
        $("#ddselect").change(function(){
            alert("Hello");
        });

    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T13:24:44.960

对 html 进行以下更改：

```
<select id="SelectOptions">
  <option selected="selected">Please select your Login</option>
  <option>--------------------------</option>
  <option id="#projectmanager">Project Manager</option>
  <option id="#projectmanager2">Project Manager 2</option>
</select>​​​​​​​​​​ 
```

对 javascript 进行以下更改：

```
$(document).ready(function() {
    $("#SelectOptions").change(function(){
         alert($("#SelectOptions option:selected")[0].text);
    });
}); 
```

这将显示选定的选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T13:36:22.233

如上所述，您可以`onchange`在`select`元素上使用。要对每个值做出唯一响应，您可以使用`switch`如下语句：

[http://jsfiddle.net/AyCFt/11/](http://jsfiddle.net/AyCFt/11/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-01T13:43:28.627

这只是一种方法（根据您的最终实现，可能有更好的方法来解决这个问题）。

向您的标记添加`value`属性，以便消息包含在值中：

```
<select id="changeMe">
    <option selected="selected">Please select your Login</option>
    <option disabled="disabled">--------------------------</option>
    <option id="projectmanager" value="Hello">Project Manager</option>
    <option id="projectmanager2" value="Hello to you too">Project Manager 2</option>
</select>​ 
```

由于`option`元素不 [经常] 接收事件，因此向元素添加处理程序并从那里开始`.click()`会更好：`.change()``select`

```
$(document).ready(function() {
    $('select#changeMe').change(function(e) {
        var self = $(this), //cache lookup
            selected = self.children('option:selected'), //get the selected option
            i = selected.index('select#changeMe option'), //grab the index, relative to all options
            message = selected.val(); //get the message
        if (i > 1) { //ignore "Please select" and "---"
            alert(message);
        }
    });
});​ 
```

更新小提琴：http: [//jsfiddle.net/AyCFt/12/](http://jsfiddle.net/AyCFt/12/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-01T13:45:06.577

要自定义警报消息，您需要在 Javascript 代码中运行“switch”语句（或类似 switch 的一系列“if”语句），或者将警报消息编码为 HTML 并访问它（例如这里[http ://jsfiddle.net/AFguq/](http://jsfiddle.net/AFguq/)）：

```
<select id="SelectOptions">
  <option selected="selected">Please select your Login</option>
  <option>--------------------------</option>
  <option id="#projectmanager" alertText="Hello">Project Manager</option>
  <option id="#projectmanager2" alertText="Hello to you too">Project Manager 2</option>
</select>​ 
```

(javascript:)

```
$(document).ready(function() {
    $("#SelectOptions").change(function(){
         alert($("#SelectOptions option:selected").attr('alertText'));
    });
});​ 
```

# asp.net - asp.net 在 Page_Load 中返回数据

> ID：13659767
> 
> 赞同：1
> 
> 时间：2012-12-01T13:12:24.887
> 
> 标签：asp.net, webforms

如果我的页面请求中存在查询字符串参数，我想在 Page_Load 中查询服务器上的数据库，然后将结果返回给客户端。我可以进行查询字符串参数检查并查询数据库，但是如何将数据返回到页面以及在 javascript 端如何访问该数据？

理想情况下，我会返回一个对象结构的 JSON，它会返回一个它们的数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T13:32:02.957

是的，返回 JSON 是最好的选择。我不确定您如何查询数据库（您使用 LINQ 还是 ADO.NET DataTables 等）

如果您没有要发送的自定义对象类型，我建议您创建一个。然后你应该得到一个数组。

例子：

```
public class Person {
   string Name { get; set; }
   int Age { get; set; }
}

Person[] pArr = new Person[5]; 
```

[然后，您可以使用这样](http://james.newtonking.com/pages/json-net.aspx)的第三方库在 JSON 中创建该数组的字符串表示形式。

```
string json = JsonConvert.SerializeObject(product); 
```

然后`json`，通过覆盖页面的 Render 方法，将该字符串写入 Response 对象，以便将其发送到客户端。

```
// Don't expect this code to work as it is, but take this as a guidance
Response.Clear();
Response.Write(json);
Response.Close(); 
```

在客户端使用 jQuery 库向页面发送请求，并为您处理 JSON 响应。

```
$.getJSON('url', function(data) {
  //process data
}); 
```

如果您不想为此使用 AJAX 请求，这是我的建议：

像通常在 page_load 中那样使用对象，并将其转换为 JSON 字符串，如上所述。

然后在客户端加载时使用 ClientScriptManager 在客户端创建一个 JavaScript 变量。

```
ClientScript.RegisterClientScriptBlock(typeof(Page), "unique_key", "var myObjectList = " + json, true); 
```

此后，当页面加载时，您将拥有一个名为“myObjectList”的变量，其中包含对象列表，而无需进行不同的 AJAX 调用。

您可以直接在 javascript 中引用该变量并进行必要的处理。

希望这可以帮助。

# sql - SQL 数据库帮助中的设计表（初学者）

> ID：13659785
> 
> 赞同：0
> 
> 时间：2012-12-01T13:14:31.357
> 
> 标签：sql, database, database-design

好的，所以我有一个名为的表`Users`，其中包含以下列：`Username`, `Password`, `UserType`（确定它是普通用户还是管理员）。

基本上，我正在尝试模拟与其他用户一起创建一种项目。

因此，我需要创建一个名为`Groups`who should be based on the `Users`table 的表。

它应该有以下数据： `Admin`,`Users`

创建项目的管理员和应该能够加入项目的用户。

我怎样才能做到这一点？假设 Groups 表中的用户列可能有超过 1 个用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:30:59.363

**表用户：**

```
UserId, Name, Type 
```

**Table Projects**【此表将存储项目信息】

```
//AdminUserId = the admin user who created the Prject
ProjectId, Name, AdminUserId(FK) 
```

**表 ProjectUsers**

```
// UserId = UserId of a user
ProjectId(FK), UserId(FK) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T13:28:56.697

确保向用户表添加唯一的数字键：like `user_id`。

然后为组创建一个新表：

```
group
----------
group_id
name
start_date
other_stuff 
```

最后，指出哪些用户在组中

```
user_group
--------------
group_id
user_id
role <--- for instance admin etc.
start_date
end_date
possibly_other_stuff 
```

# java - CTR 模式下的 AES 解密 (Java)

> ID：13659795
> 
> 赞同：5
> 
> 时间：2012-12-01T13:15:38.487
> 
> 标签：java, cryptography, aes, encryption

我有这些信息：

点击率键：36f18357be​​4dbd77f050515c73fcf9f2

CTR 密文 1:69dda8455c7dd4254bf353b773304eec0ec7702330098ce7f7520d1cbbb20fc3\ 88d1b0adb5054dbd7370849dbf0b88d393f252e764f1f5f7adf57ef79d29ceeda29

请注意，16 字节的加密 IV 是随机选择的，并添加到密文之前。并且文本在 CTR 模式下使用 AES 加密。

我必须发现明文为此，我编写了一个简短的 Java 程序，但它不起作用，我找不到原因：/

这是Java程序

```
import java.nio.charset.Charset;
import javax.crypto.Cipher;
import javax.crypto.KeyGenerator;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;

public class AES {

/**
 * @param args
 */
public static void main(String[] args) throws Exception {
    // TODO Auto-generated method stub

    //Dernier exemple CTR mode
    //Clé 16 bits 
    byte[] keyBytes = new byte[] { (byte)0x36,(byte)0xf1,(byte)0x83,(byte)0x57,(byte)0xbe,(byte)0x4d,(byte)0xbd,(byte)0x77,(byte)0xf0,(byte)0x50,(byte)0x51,(byte)0x5c,0x73,(byte)0xfc,(byte)0xf9,(byte)0xf2};
    //IV 16 bits (préfixe du cipherText)
    byte[] ivBytes = new byte[] {(byte)0x69,(byte)0xdd,(byte)0xa8,(byte)0x45,(byte)0x5c,(byte)0x7d,(byte)0xd4,(byte)0x25,(byte)0x4b,(byte)0xf3,(byte)0x53,(byte)0xb7,(byte)0x73,(byte)0x30,(byte)0x4e,(byte)0xec};

    //Initialisation
    SecretKeySpec key = new SecretKeySpec(keyBytes, "AES");
    IvParameterSpec ivSpec = new IvParameterSpec(ivBytes);

    //Mode
    Cipher cipher = Cipher.getInstance("AES/CTR/NoPadding");

    byte[]  cipherText = new byte[] {(byte)0x0e,(byte)0xc,(byte)0x77,(byte)0x02,(byte)0x33,(byte)0x00,(byte)0x98,(byte)0xce,(byte)0x7f,(byte)0x75,(byte)0x20,(byte)0xd1,(byte)0xcb,(byte)0xbb,(byte)0x20,(byte)0xfc,(byte)0x38,(byte)0x8d,(byte)0x1b,(byte)0x0a,(byte)0xdb,(byte)0x50,(byte)0x54,(byte)0xdb,(byte)0xd7,(byte)0x37,(byte)0x08,(byte)0x49,(byte)0xdb,(byte)0xf0,(byte)0xb8,(byte)0x8d,(byte)0x39,(byte)0x3f,(byte)0x25,(byte)0x2e,(byte)0x76,(byte)0x4f,(byte)0x1f,(byte)0x5f,(byte)0x7a,(byte)0xd9,(byte)0x7e,(byte)0xf7,(byte)0x9d,(byte)0x59,(byte)0xce,(byte)0x29,(byte)0xf5,(byte)0xf5,(byte)0x1e,(byte)0xec,(byte)0xa3,(byte)0x2e,(byte)0xab,(byte)0xed,(byte)0xd9,(byte)0xaf,(byte)0xa9,(byte)0x32,(byte)0x29}; 
    cipher.init(Cipher.DECRYPT_MODE, key, ivSpec);  
    byte [] original = cipher.doFinal(cipherText);
    String plaintext = new String(original);
    System.out.println("plaintext: " + plaintext );
} 
```

}

结果是 => 明文：CŸUnfpL¨KH¹)VPÅ|ÉÒ9}FÅgÿ žQ3Š®¹zÛ˜ˆ±<þãh¤ÔÆË“M±§|@+0H5§ 所以好像是错的

先感谢您 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T13:32:33.473

可能还有其他问题，但是您问题中的密文在前 16 个字节之后以 开头`0ec770`，而 Java 代码中的密文以开头

```
0x0e, 0xc, 0x77 
```

他们不匹配。

# android - 为什么我得到错误的 requestCode？

> ID：13659796
> 
> 赞同：27
> 
> 时间：2012-12-01T13:15:55.010
> 
> 标签：android

我有一个我使用的活动`startActivityForResult(intent,634)`。如果我从活动中使用它，requestCode in`onActivityResult()`就可以了。但是如果我`startActivityForResult(intent,634)`在这个 Activity 中使用我的 DialogFragment，我会得到另一个 requestCode，比如 66170。那么为什么会这样呢？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-01T13:26:26.743

发生这种情况是因为如果您`startActivityForResult`从对话框中使用，`onActivityResult`您将获得对话框的 requestCode。不是来自您的另一个活动。如果你想得到正确的 requestCode，你应该`getActivity().startActivityForResult(intent,requestCode)`在 DialogFragment 中使用。

# c++ - std::endl 是否适用于 cout 和 wcout？

> ID：13659798
> 
> 赞同：9
> 
> 时间：2012-12-01T13:16:07.057
> 
> 标签：c++

我想知道 std::endl 是否同时适用于 std::cout 和 std::wcout？

有人对此很清楚吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-01T13:19:39.883

是的。事实上，`std::endl`一个函数模板将作为模板的任何专业化的操纵器`std::basic_ostream`。

* * *

更多细节：27.7.3.6 规定`std::basic_ostream`模板包含`operator<<`如下重载：

```
basic_ostream<charT, traits> &
operator<<(basic_ostream<charT, traits> (*pf)(basic_ostream<charT, traits> &)); 
```

在合适的函数上调用此重载的效果是`return pf(*this)`. 因此，当您说 时`std::cout << std::endl`，这实际上变成`std::endl(std::cout)`并返回了对流对象的引用。

所有其他 ostream 操纵器都以相同的方式编写，输入操纵器也类似。

* * *

函数模板的神奇之处在于`endl`调用`widen('\n')`，它为给定的字符类型生成正确的“换行符”数据。

# python - Python：规范将项目附加到列表

> ID：13659799
> 
> 赞同：0
> 
> 时间：2012-12-01T13:16:08.570
> 
> 标签：python, list, append

我是 Python 的初学者，我有一个简短的问题，我无法找到解决方案：

有什么方法可以规范列表中覆盖的内容吗？例如，我有一个用零填充的列表，然后我将逐渐用其他元素填充，我想要做的是在覆盖零以外的东西时创建一个错误。有什么聪明的方法可以做到这一点吗？

我可以使用类似的东西：

```
a = [0, 1, 0, 1, 0, 0, 0, 0]
b = []
[i for i, e in enumerate(a) if e != 0]
return False 
```

或类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T13:50:13.073

您可以使用函数来更改列表中的元素，该函数会检查元素是否为`0`.

```
def setElement(l, index, element):
    '''Change the element from given list(l) at given index.'''
    if l[index] != 0:
        raise Exception("Attempt to overwrite %s instead of 0" %l[index])
    else:
        l[index] = element 
```

现在您可以通过调用来使用它`setElement(<list>, <index>, <element>)`

```
 In[1]: a = [0, 0, 0, 0, 0, 0, 0]

 In[2]: setElement(a, 2, 3)

 In[3]: setElement(a, len(a)-1, "Last Element!")

 In[4]: setElement(a, len(a)-1, 53)
Out[4]: Attempt to overwrite "Last Element!" instead of 0

 In[5]: print(a)
Out[5]: [0, 0, 3, 0, 0, 0, "Last Element"] 
```

# xml - 在 Firefox 和 IE 中使用 XSLT 将 XML 转换为 XML

> ID：13659802
> 
> 赞同：3
> 
> 时间：2012-12-01T13:16:17.447
> 
> 标签：xml, xslt, cross-browser, mime-types, pretty-print

我进行了从几种 XML 格式到一种标准的转换。我的 XSL 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
    <xsl:output method="xml" encoding="UTF-8" indent="yes" omit-xml-declaration="yes"/>

    <xsl:template match="list | store">
        <list>
            <xsl:for-each select="item | product | product-store">
            <item>
                <name>
                    <xsl:choose>
                        <xsl:when test="name"><xsl:value-of select="substring-before(name, ' ')" /></xsl:when>
                        <xsl:otherwise><xsl:value-of select="name | title" /></xsl:otherwise>
                    </xsl:choose>
                </name>
                <desc>
                    <xsl:choose>
                        <xsl:when test="name"><xsl:value-of select="substring-after(name, ' ')" /></xsl:when>
                        <xsl:otherwise><xsl:value-of select="desc" /></xsl:otherwise>
                    </xsl:choose>
                </desc>
                <nr><xsl:value-of select="index | number" /></nr>
            </item>
            </xsl:for-each>
        </list>
    </xsl:template>
</xsl:stylesheet> 
```

我的示例 XML 是

```
<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<?xml-stylesheet type="text/xsl" href="transform.xsl"?>
<list>
    <item>
      <index>1362242627</index>
      <name>test 22</name>  
    </item>
    <item>
      <index>2362625609</index>
      <name>test 4</name>  
    </item>
    <item>
      <index>736274650</index>
      <name>test 76</name>  
    </item>
</list> 
```

为什么它在 Firefox 17、IE9 和 Google Chrome 等浏览器中无法正确显示？它们像普通文本一样显示它，但是返回类型是“text/xml”。它仅在 Opera 中正常工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T13:53:58.873

我认为问题在于告诉什么是“正确”的显示。像 Firefox 或 IE 这样的浏览器假定，一旦您将带有`xml-stylesheet`类型处理指令的 XML 文档加载`text/xsl`到浏览器窗口中，您就希望将 XML 转换为浏览器知道要呈现的内容，例如 HTML 或现在的 (X)HTML 加 SVG (或加上 MathML）。然而，您的样式表接受 XML 输入并将其转换为浏览器未知的某种 XML 结果格式，因此它所做的只是呈现结果树中文本节点的内容。Opera 似乎将 XML 输入转换为 XML 结果，但随后它似乎认识到结果格式是未知的，因此决定呈现结果的源树。这可能是您更喜欢的，但我不确定是否有规范要求这种行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:22:39.820

`xsl:output="text"`如果在 Firefox 和 Chrome 中，换行符和制表符的保留有效。具有讽刺意味的是，IE 忽略了文本模式下的缩进。这是一个自引用样式表，演示了这一点：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="newline-indent.xml"?>
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns=""
                >

<!-- Output HTML doctype with text/html content-type and without XML declaration-->
<xsl:output method="text" encoding="utf-8" version="1.0" media-type="text/plain" indent="yes" standalone="no" omit-xml-declaration="no"/>

<!-- Output the HTML markup-->
<xsl:template xml:space="preserve" match="/">
  <root>
    <child>1 &#13;&#10;</child>   
    <child>
      <grandchild>&#09; 1.1  &#13;&#10;</grandchild>
    </child>
    <child>
      <grandchild>
        <great-grandchild>&#09; &#09; 1.1.1</great-grandchild>
      </grandchild>
    </child>
  </root>
</xsl:template>
</xsl:stylesheet> 
```

以下来自[Mozilla 错误](https://bugzilla.mozilla.org/show_bug.cgi?id=422403)的评论解释了为什么 XML 序列化不适用于 XML 命名空间：

> 在当前版本的 Gecko 中，XML 序列化程序用于序列化 XHTML 内容。

在标签中使用`style`元素和文字空格来格式化 IE 中的输出：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="newline-indent-ie.xml"?>
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns=""
                >

<xsl:output method="xml" encoding="utf-8" version="1.0" media-type="application/xml" indent="yes" standalone="no" omit-xml-declaration="no"/>

<xsl:template match="/">
  <style>* { white-space:pre-wrap; }</style>
  <root>
    <child  >1</child>   
    <child>
      <grandchild  >1.1</grandchild>
    </child>
    <child>
      <grandchild>
        <great-grandchild  >1.1.1</great-grandchild>
      </grandchild>
    </child>
  </root>
</xsl:template>
</xsl:stylesheet> 
```

**参考**

*   [XML 文档中的空白](http://usingxml.com/Basics/XmlSpace)

# c++ - C++代码中的四个错误，我找不到解决办法

> ID：13659805
> 
> 赞同：0
> 
> 时间：2012-12-01T13:16:46.183
> 
> 标签：c++, compiler-errors

我正在查看我正在处理的一些代码，并且我尝试了大约一周的时间来消除 3-4 个错误，但我就是做不到！我对编程有点陌生，所以如果你能以愚蠢的形式回答，那就太好了！这是代码。

```
#include <iostream>
#include <string>

using namespace std;

int main() {
    string password;

    int choice;

    cout << "Command Line Multi-Tool" << endl;
    cout << endl;
    cout << "plase enter your password: " << endl;
    cin >> password;
    if (password == "creeper1") {
        cout << endl;
        cout << "Main Menu" << endl;
        cout << "1\. Class Schedule" << endl;
        cout << "2\. School Info" << endl;
        cout << "3\. Exit" << endl;
        cin >> choice;
    }
    else {
        cout << "Incorrect, Access Denied" << endl;
        return(0);
    }

    }

    else (password == "admin1"){
        cout << "/*adminLogin=='1'*/" << endl;
        cout << endl;
        cout << "Menu::Main" << endl;
    }

    return(0);

    }

} 
```

这是错误日志。

```
/Users/student/Documents/TO BE FILED/Tuesday/main.cpp:31:0 /Users/student/Documents/TO BE
FILED/Tuesday/main.cpp:31: error: expected unqualified-id before 'else'

/Users/student/Documents/TO BE FILED/Tuesday/main.cpp:36:0 /Users/student/Documents/TO BE
FILED/Tuesday/main.cpp:36: error: expected unqualified-id before 'return'

/Users/student/Documents/TO BE FILED/Tuesday/main.cpp:36:0 /Users/student/Documents/TO BE
FILED/Tuesday/main.cpp:36: error: expected declaration before '}' token 
```

再次非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T13:18:33.343

您的代码中有 1 个`if`但 2 个`else`分支。决定你想要哪一个，然后失去另一个。查看您可能想要的代码

```
 if (password == "creeper1") {
    cout << endl;
    cout << "Main Menu" << endl;
    cout << "1\. Class Schedule" << endl;
    cout << "2\. School Info" << endl;
    cout << "3\. Exit" << endl;
    cin >> choice;
 } else if (password == "admin1")
    // Your processing code here
 }  else {
    cout << "Incorrect, Access Denied" << endl;
    return(0);
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T13:18:31.483

不平衡`else`的，即没有对应的`if`。

也许你想要类似的东西：

```
if (password == "creeper1") {
}
else if (password == "admin1") {
}
else {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T13:22:36.377

如果在 else 之后不能使用 else，则该块将永远不会被执行。另外，正确的语法是 return 0，而不是 return(0)。
您还包括额外的大括号，但如果您以正确的方式缩进代码，您会看到块何时结束和开始，因此您很少会犯错误，例如添加额外的大括号：

```
#include <iostream>
#include <string>

using namespace std;

int main()
{
    string password;

    int choice;

    cout << "Command Line Multi-Tool" << endl;
    cout << endl;
    cout << "plase enter your password: " << endl;
    cin >> password;
    if (password == "creeper1")
    {
        cout << endl;
        cout << "Main Menu" << endl;
        cout << "1\. Class Schedule" << endl;
        cout << "2\. School Info" << endl;
        cout << "3\. Exit" << endl;
        cin >> choice;
    }
    else if(password == "admin1")
    {
        cout << "/*adminLogin=='1'*/" << endl;
        cout << endl;
        cout << "Menu::Main" << endl;
    }
    else
    {
        cout << "Incorrect, Access Denied" << endl;
        return 0;
    }
    return 0;
} 
```

这是修复了所有语法错误的代码。关于语义我不知道它是否有效，但现在您可以编译并执行它，以测试代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T13:29:21.350

因为 else 不能包含判断正确的用法是这样的：

如果（密码==“爬行者1”）{

}否则如果（密码==“admin1”）{

} 别的{

}

# c# - C# 简单 TCP 服务器线程

> ID：13659809
> 
> 赞同：-1
> 
> 时间：2012-12-01T13:17:13.980
> 
> 标签：c#, multithreading, tcp, console

我正在制作一个基本的 C# TCP 控制台服务器，它接受来自 2 个不同客户端的连接。之后，服务器需要能够在两个客户端连接后接收来自它们的消息，这应该能够持续到连接终止。到目前为止，我可以向客户端发送消息，但是我遇到了让两个客户端同时与服务器通信的问题。我很确定我只需要在这里添加一些线程，但我是新手，所以我不确定如何让它工作。这就是我需要帮助的地方。

```
string str1 = "";
            string str2 = "";
            Socket soc1;
            Socket soc2;
            NetworkStream straumur1;
            NetworkStream straumur2;
            BinaryReader lesari1;
            BinaryReader lesari2;
            BinaryWriter skrifari1;
            BinaryWriter skrifari2;
            IPAddress ipTala = IPAddress.Parse("127.0.0.1");
            TcpListener hlustari = new TcpListener(ipTala, 50000);
            Lesa lesa = new Lesa();
            hlustari.Start();

            //Notandi 1 tengist
            soc1 = hlustari.AcceptSocket();
            straumur1 = new NetworkStream(soc1);
            skrifari1 = new BinaryWriter(straumur1);
            lesari1 = new BinaryReader(straumur1);
            skrifari1.Write("Leikmaður 1");
            Console.WriteLine(">> Leikmaður 1 tengdist");

            //Notnadi 2 tengist
            soc2 = hlustari.AcceptSocket();
            straumur2 = new NetworkStream(soc2);
            skrifari2 = new BinaryWriter(straumur2);
            lesari2 = new BinaryReader(straumur2);
            skrifari2.Write("Leikmaður 2");
            Console.WriteLine(">> Leikmaður 2 tengdist");

            do //this is the part that needs fixing.
            {
                str1 = lesari1.ReadString();
                skrifari1.Write(str1);
                Console.WriteLine(str1);
            } while (true);

            do
            {
                str2 = lesari2.ReadString();
                skrifari2.Write(str2);
                Console.WriteLine(str2);
            } while (true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:25:01.103

您已经通过使用第一个 BinaryReader 进行无限循环来阻止执行流程。一个简单的方法是将它们循环到不同的线程中，并从主线程中等待两者。我现在无法访问 Visual Studio，但这样的事情可能会起作用：

```
//create the threads with an anonymous method (you may extract them to named methods, if you prefer)
Thread t1 = new Thread(new ThreadStart(()=>{
    do //this is the part that needs fixing.
        {
            str1 = lesari1.ReadString();
            Console.WriteLine(str1);
        } while (true);
    }
   ));

 Thread t2 = new Thread(new ThreadStart(()=>{
    do //this is the part that needs fixing.
        {
            str2 = lesari2.ReadString();
            Console.WriteLine(str2);
        } while (true);
    }
   ));

  t1.Start(); //start threads
  t2.Start();
  t1.Join(); //wait for them to finish
  t2.Join(); 
```

同样，我不确定是否有任何拼写错误或命名错误，但这样的事情就可以解决问题。此外，每当您访问共享数据（您可以从两个线程访问的对象）时，请注意不要有任何竞争条件。这是 .NET 线程的精彩教程/资源：[http ://www.albahari.com/threading/](http://www.albahari.com/threading/)

# java - Java：BufferedReader 和 OutputStream

> ID：13659812
> 
> 赞同：3
> 
> 时间：2012-12-01T13:17:39.600
> 
> 标签：java

我有以下代码，我正在尝试通过套接字发送数据文本。但是当我尝试通过 发送时`PrintWriter`，我的客户什么也不做，它停在`in.readLine()`. 但是，当我简单地使用 OutputStream 并将其作为字节发送时，我的客户端在读取时没有任何问题。有可能如我所愿吗？

```
 out = new PrintWriter(sock.getOutputStream());
        in = new BufferedReader(new InputStreamReader(sock.getInputStream()));

        while (true) {
            System.out.println("SERVER-THREAD: IP "
                    + sock.getInetAddress().getHostAddress());
            out.write(marshall() + "\n");
            Thread.sleep(1000);
        } 
```

//客户

```
 in = new BufferedReader(new InputStreamReader(sock.getInputStream()));
            out = new PrintWriter(sock.getOutputStream());

            while (updateList) {
                System.out.println("Before");
                String inputip = in.readLine();
                System.out.println("CLIENT: " + inputip);
                //unmarshall(in);
                System.out.println("After");
                Thread.sleep(1000);
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T13:34:29.073

`PrintWriter`缓冲要写入的数据，因此在缓冲区满之前不会这样做。你需要在这里调用flush

```
out.flush(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T13:33:51.083

当您执行 readLine() 时，它会等到它读取整行。即一条新线。

您的发送正在发送没有换行符的文本，因此接收等待不会发生的事情。

一个更基本的问题是您正在混合文本和二进制文件，这更容易混淆而不是有用。

我建议您使用 PrintWriter.println() 编写文本，您可以使用 BufferedReader.readLine() 读取该文本。

# algorithm - 遗传算法代码中的排名选择

> ID：13659815
> 
> 赞同：5
> 
> 时间：2012-12-01T13:17:53.033
> 
> 标签：algorithm, artificial-intelligence, selection, genetic-algorithm

我需要遗传算法的[排名选择方法的代码。](http://www.obitko.com/tutorials/genetic-algorithms/selection.php)我已经创建了轮盘赌和锦标赛选择方法，但现在我需要排名并且我被卡住了。

我的轮盘赌代码在这里（我将 atom struct 用于遗传原子）：

```
const int roulette (const atom *f)
{
  int i;
  double sum, sumrnd;

  sum = 0;
  for (i = 0; i < N; i++)
    sum += f[i].fitness + OFFSET;

  sumrnd = rnd () * sum;

  sum = 0;
  for (i = 0; i < N; i++) {
    sum += f[i].fitness + OFFSET;
    if (sum > sumrnd)
      break;
  }

  return i;
} 
```

其中原子：

```
typedef struct atom
{
  int geno[VARS];
  double pheno[VARS];
  double fitness;
} atom; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T05:59:46.397

当您已经了解轮盘赌选择时，排名选择很容易实现。不是使用适应度作为被选中的概率，而是使用排名。因此，对于 N 个解决方案的群体，最佳解决方案的排名为 N，第二好的排名为 N-1，依此类推。最差的个人排名为 1。现在使用轮盘赌并开始选择。

最佳个体被选中的概率为 N/( (N * (N+1))/2 ) 或大约 2 / N，最差个体的概率为 2 / (N*(N+1)) 或大约2 / N^2。

这称为线性等级选择，因为等级形成线性级数。您还可以将等级视为几何级数，例如 1 / 2^n，其中 n 的范围从 1 代表最好的个人到 N 代表最差的个人。这当然给最好的个人更高的概率。

你可以在[HeuristicLab](http://dev.heuristiclab.com/trac.fcgi/browser/trunk/sources/HeuristicLab.Selection/3.3)中查看一些选择方法的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-26T13:04:44.453

**我在 MatLab 中的排名选择代码：**

```
NewFitness=sort(Fitness);
NewPop=round(rand(PopLength,IndLength));

for i=1:PopLength
    for j=1:PopLength
        if(NewFitness(i)==Fitness(j))
            NewPop(i,1:IndLength)=CurrentPop(j,1:IndLength);
            break;
        end
    end
end
CurrentPop=NewPop;

ProbSelection=zeros(PopLength,1);
CumProb=zeros(PopLength,1);

for i=1:PopLength
    ProbSelection(i)=i/PopLength;
    if i==1
        CumProb(i)=ProbSelection(i);
    else
        CumProb(i)=CumProb(i-1)+ProbSelection(i);
    end
end

SelectInd=rand(PopLength,1);

for i=1:PopLength
    flag=0;
    for j=1:PopLength
        if(CumProb(j)<SelectInd(i) && CumProb(j+1)>=SelectInd(i))
            SelectedPop(i,1:IndLength)=CurrentPop(j+1,1:IndLength);
            flag=1;
            break;
        end
    end
    if(flag==0)
        SelectedPop(i,1:IndLength)=CurrentPop(1,1:IndLength);
    end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-03T05:17:56.640

我在 C++ 中创建了一个模板遗传算法类。

我的遗传算法库与遗传算法和 GAPopulation 是分开的。这些都是模板类，因此您可以在 API 文档中查看其原始代码。

*   这里是源代码和 API 文档。
    *   [http://samchon.github.io/framework/api/cpp/d5/d28/classsamchon_1_1library_1_1GeneticAlgorithm.html](http://samchon.github.io/framework/api/cpp/d5/d28/classsamchon_1_1library_1_1GeneticAlgorithm.html)
    *   [http://samchon.github.io/framework/api/cpp/d8/dcd/classsamchon_1_1library_1_1GAPopulation.html](http://samchon.github.io/framework/api/cpp/d8/dcd/classsamchon_1_1library_1_1GAPopulation.html)

# oracle11g - Linux 中的 NOHUP 命令

> ID：13659816
> 
> 赞同：0
> 
> 时间：2012-12-01T13:18:02.823
> 
> 标签：oracle11g, sqlplus, nohup

我正在发出命令

```
$nohup sqlplus "/ as sysdba" @script.sql & 
```

并在执行此 nohup.out 文件时包含此错误：

```
Error 45 initializing SQL*Plus 
```

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T21:33:43.263

检查命令终止符。如果您有匿名 plsql 块，通常它们看起来像
DECLARE
some stuff
BEGIN
sql statements；
结尾;

您必须在其后添加另一行带有单独的“/”，否则您将收到此错误。

# iphone - 按下自定义 UITableViewCell 中的按钮后如何更改标签的文本

> ID：13659819
> 
> 赞同：-1
> 
> 时间：2012-12-01T13:18:39.320
> 
> 标签：iphone, objective-c, ios, ipad

我有一个 UITableView，在那里我得到一个带有 UILabel 和 UIButton 的 customUITableViewCell，我想在按下同一行中的按钮后更改特定行的标签文本值。请帮助我，我是 iPhone 的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T13:25:19.903

请检查您是否映射了按钮的操作并继续此操作..

```
-(void)yourButtonClicked:(id)sender {
  CustomCell *clickedCell = [[sender superView]superView];
  NSindexPath *indexPath = [YourTableViewObject indexPathForCell:clickedCell];
  NSLog(@"%d %d",indexPath.section,indexPath.row);  
} 
```

在这里，您将获得单击单元格的行..

然后您可以轻松更改标签文本..通过

```
clickedCell.yourLabel.text = @"Your string"; 
```

# matlab - 如何在一定程度上从图像质心点裁剪二值图像

> ID：13659820
> 
> 赞同：1
> 
> 时间：2012-12-01T13:19:09.900
> 
> 标签：matlab, centroid

找出图像的质心后，我想在一定程度上从质心点裁剪图像中的一些对象。我可以使用 regionprops 函数来识别质心。问题是如何根据质心点裁剪图像到某个区域，以及如何使我的对象在图像中的位置固定在整个图像的中心。

# spring - Spring配置调用多个方法

> ID：13659822
> 
> 赞同：0
> 
> 时间：2012-12-01T13:19:24.230
> 
> 标签：spring, dependency-injection

我有如下代码：

```
MyContext context = new MyContext();
context.start();
MyEntity entity =  context.getEntity(); 
```

我想将 MyEntity 实例注入到各种类中。但我不知道如何设置我的 Spring 配置，我首先创建一个对象，然后在其上调用一个方法，然后最后调用另一个返回我要注入的实体的方法。

编辑 2 - 完全删除了字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:50:18.640

使用 Spring 注入的最常见的依赖类型不依赖于用户输入来构建它们。这包括数据访问对象、服务等，

您正在谈论注入其构造直接或间接依赖于用户输入的域对象。

Spring 提供[`@Configurable`](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-atconfigurable)注解来注入使用运算符创建的此类域对象`new`。您可以在 Internet 上搜索“@Configurable Domain Driven Design”以获取有关如何实现此功能的示例。我自己在我的一个应用程序中使用了它，并在[这里](http://vikdor.blogspot.in/2012/08/using-configurable-to-inject-resources.html)写了一篇简单的文章，可能会帮助您入门。

**编辑**：

要根据更新问题中的规范创建 MyEntity 类型的 bean，您需要

*   定义一个 MyContext 类型的 bean
*   创建一个依赖于 MyContext bean 的 MyEntityFactory 类。
*   工厂方法将 MyContext bean 作为参数，调用`context.start()`它并返回 MyEntity 的一个实例。
*   您将使用这个工厂类定义 MyEntity bean。

MyEntityFactory 类如下所示：

```
public class MyEntityFactory
{
    public static MyEntity getMyEntity(MyContext context)
    {
        context.start();
        return context.getEntity();
    }
} 
```

spring bean 配置如下：

```
<bean id="myContext" class="FQCN.Of.MyContext" />
<bean id="myEntity" class="FQCN.Of.MyEntityFactory" factory-method="getMyEntity">
    <constructor-arg ref="myContext" />
</bean> 
```

由于`MyEntity`是单例 bean，工厂方法只会被调用一次，顺便说一句。

更多关于使用工厂方法创建 bean 的[信息](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-class-static-factory-method)。

# asp.net-mvc - “/”应用程序中的服务器错误。当 IDENTITY_INSERT 设置为 OFF 时，无法在表中插入标识列的显式值

> ID：13659824
> 
> 赞同：1
> 
> 时间：2012-12-01T13:19:36.043
> 
> 标签：asp.net-mvc, asp.net-mvc-4

当我在 MVC DB 项目中添加新行时，我无法解决此错误，即使我看到人们之前已经使用 Linq 解决了这个问题。我没有使用 Linq，而是使用 EF。我有一个 MVC 项目，VS 2010，并通过设计器连接到 sql 2008

1）创建互联网项目2）右键单击模型->添加新项目-> ado实体数据模型并选择远程数据库。

3）创建控制器 4）运行项目并看到创建新行的屏幕。我这样做并在添加 2 行后出现此错误。我预先创建了表，并在 sql server 2008 中将 PK 定义为 Int

“/”应用程序中的服务器错误。当 IDENTITY_INSERT 设置为 OFF 时，无法在表中插入标识列的显式值。

我没有写任何代码，所以我不确定我还需要说什么

[Serializable()] [DataContractAttribute(IsReference=true)] 公共部分类视频：EntityObject { #region Factory Method

```
 /// <summary>
    /// Create a new video object.
    /// </summary>
    /// <param name="id">Initial value of the ID property.</param>
    public static video Createvideo(global::System.Int32 id)
    {
        video video = new video();
        video.ID = id;
        return video;
    }

    #endregion
    #region Primitive Properties

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=true, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.Int32 ID
    {
        get
        {
            return _ID;
        }
        set
        {
            if (_ID != value)
            {
                OnIDChanging(value);
                ReportPropertyChanging("ID");
                _ID = StructuralObject.SetValidValue(value);
                ReportPropertyChanged("ID");
                OnIDChanged();
            }
        }
    }
    private global::System.Int32 _ID;
    partial void OnIDChanging(global::System.Int32 value);
    partial void OnIDChanged();

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:08:47.843

请访问您模型的 .edmx 页面，然后选择身份列。打开属性窗口（按 F4）并将“StoreGeneratedPattern”属性设置为“Identity”。此属性确定数据库中的相应列是否将在插入和更新期间自动生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T19:06:10.823

遇到同样的问题。我使用了 Flavia 的方法来解决这个问题。我尝试过的其他解决方案：1）将 identity_insert 设置为 on 2）刷新数据库模型

我使用了 asp.net MVC 5 EF（数据库优先）。我认为问题在于，我一遍又一遍地重建模型，并且我必须关闭该列的标识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T18:54:20.633

您可以发送数据库中表的脚本吗？可能没有在主键上设置身份列（身份增量/身份种子）

# c - 如何检查指向 char 数组的指针是否指向数字字符？

> ID：13659829
> 
> 赞同：1
> 
> 时间：2012-12-01T13:19:51.920
> 
> 标签：c, char, arrays

我有一个指向 char 数组的指针。我想增加它直到它不会指向一个数字/数字（在 char 数组中表示为一个 char）。

例如，如果`pointer`指向`'2'`此 char 数组：

```
['1'][' ']['2']['3']['4'][' '][' '][' ']['5']['6']['7']
            ^
         *pointer 
```

我想增加它直到它指向第一个非数字字符 - `' '`：

```
['1'][' ']['2']['3']['4'][' '][' '][' ']['5']['6']['7']
                           ^
                        *pointer 
```

我知道我可以做这样的事情：

```
while (*pointer == '0' || *pointer == '1' || *pointer == '2' || ...)
    pointer++;

return pointer; 
```

但它很长而且一点也不优雅。

我想我可以使用`atoi()`，`0`当指针不指向数字时返回：

```
while (atoi(pointer) != 0 || *pointer == '0') //while it still points at a number
    pointer++; //increase the pointer until it will not point at a number

return pointer; 
```

但这似乎不起作用。也许没关系，我在其他地方有错误，但无论如何我想知道：

是否有任何其他（更好的）方法来检查指向 char 数组的指针是否指向数字/数字并增加它直到它指向非数字字符，在 C 中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T13:21:29.323

您可能应该使用`isdigit`from`ctype.h`代替。就像是：

```
while (*pointer && isdigit(*pointer))
    pointer++; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T13:21:26.053

```
while (*pointer >= '0' && *pointer <= '9')
    pointer++;

return pointer; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T13:22:00.947

由于数字在 ASCII 和 UTF-16 中具有连续的值，因此可以从字符的值中减去 '0' 的值，得到一位十进制等效值*（如果是一位十进制）*，然后测试该值.

```
while(*pointer-'0'>=0 && *pointer-'0'<=9) pointer++; 
```

或者干脆这样做：

```
while(*pointer>='0' && *pointer<='9') pointer++; 
```

# visual-studio - 实体框架：为什么模板不再生成“.designer.cs”源文件

> ID：13659830
> 
> 赞同：0
> 
> 时间：2012-12-01T13:19:54.563
> 
> 标签：visual-studio, entity-framework, visual-studio-2012, t4

Entity Framework 3.5/4.0 中的默认类型生成会发出“Xxxx.designer.cs”源文件中的每个类型（其中“Xxxx”是正在生成的类型的名称）。然后，这允许开发人员生成他自己的“Xxxx.cs”源文件，在那里可以进行进一步的实现，或者可以将属性添加到元数据类等。

最新发布的 T4 模板（POCO、Self Tracking 等），包括 VS2012 中的默认类型生成，都在没有“.designer”后缀的情况下自行生成“Xxxx.cs”。

我知道覆盖 T4 模板的行为以在文件名中发出“.designer”是很容易的，但是我是否在这里遗漏了一些东西，实际上我们不鼓励通过部分定义来扩展这些类？

在我最近生成自我跟踪实体的项目中，我发现我必须重命名发出的文件，以便我可以使用元数据类属性以及 .Equals(object) 和 .GetHashcode() 的覆盖来扩展定义（否则 EF无法正确检测重复）例如。

有没有我遗漏的东西，我们现在应该将发出的部分类保留原样，或者这仅仅是一个疏忽，你们中的大多数人还必须重命名正在发出的源文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:57:36.440

代码生成策略在 VS2012 中发生了变化。在生成的代码使用基于 EntityObject 的实体和从 ObjectContext 类派生的上下文类之前。VS2012 默认生成 POCO 实体和 DbContext 派生上下文。如果您仍然想要基于 ObjectContext 的上下文和基于 EntityObject 的实体，您需要：

1.  右键单击设计器表面并选择属性
2.  将“代码生成策略”从“无”更改为“默认”
3.  从您的解决方案中删除 .tt 文件以避免同时具有上下文和重复实体。

# cakephp - Cakephp + 枚举支持：无法保存或选择枚举 0 和 1

> ID：13659838
> 
> 赞同：4
> 
> 时间：2012-12-01T13:20:29.603
> 
> 标签：cakephp, enums

当我保存具有两个枚举字段的数据以管理消息状态时，即用户已读或未读。我正在使用 enum ('1','0') 来管理状态 '1' => read 和 '0'=> unread

以下代码将保存消息，但在状态列中保存空字段

```
$data = array(
              'message' => 'test message',
              'status' => 1
             );

$this->Message->save($data); 
```

数据库结构如下

```
Field                Type                  Collation          Null    Key     Default 
------------------  -------------        -----------------  ------  ------  -------  
id                   bigint(20)            (NULL)             NO      PRI     (NULL)   
message              varchar(255)          (NULL)             NO      MUL     (NULL)                                                         
status               enum('0','1')         latin1_swedish_ci  NO      MUL     0 
```

即使我使用数据数组作为

```
$data = array(
              'message' => 'test message',
              'status' => '1'
             );

$data = array(
              'message' => 'test message',
              'status' => "'".1."'"
             ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T15:52:57.273

就在 MySql Docs 中，声明如下：“如本节后面所述 - 我们强烈建议您不要使用数字作为枚举值”

[http://dev.mysql.com/doc/refman/5.0/en/enum.html](http://dev.mysql.com/doc/refman/5.0/en/enum.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T17:34:10.547

您正在使用 cakephp - 它（如文档所述）不支持 ENUM。在您的情况下，甚至首先使用枚举都是错误的。枚举用于两个以上的状态，应该模拟为 ArrayDatasource 或在您的模型中（就像我一样）。

但是“已读/未读”是一个布尔值（两个明确的状态！）。

并且有一种简单的方法可以正确地完成此操作：

```
tinyint(1) [unsigned] [default 0] 
```

cake 会自动假定这是一个布尔值，并将其表单字段转换为复选框。

# php - 通过html的提交按钮而不是flash的上传按钮上传文件

> ID：13659839
> 
> 赞同：2
> 
> 时间：2012-12-01T13:20:30.913
> 
> 标签：php, javascript, html, flash, swfobject

我的 html 表单中至少有 50 个字段，并且我已经集成了用于多个文件上传的 flash 文件上传器。

用于 Flash 文件上传器的另一个原因是我们在 IE 中上传文件之前无法获取文件大小。为了在 IE 中获取文件大小，我使用了 flash。

EAFlashuploader 集成成功。

但我的要求有点不同。

在 EAflashuploader 中，当您单击所有添加的文件上传时，会出现上传按钮。但我想禁用这个上传按钮，当我点击 Html 提交按钮时上传文件应该被上传。

简而言之，我想通过 html 中的提交按钮而不是 flash 中的上传按钮来上传文件。

当表单提交时，我可以在 post 方法中获取所有数据。

项目链接：[http ://www.triggergmbh.com/EAFUpload/PHP/simpleupload.php](http://www.triggergmbh.com/EAFUpload/PHP/simpleupload.php)

EAFlashUpload 链接：[http ://www.easyalgo.com/examples/eaflashupload/simpleupload.aspx](http://www.easyalgo.com/examples/eaflashupload/simpleupload.aspx)

EAFlashUpload 文档链接：[http ://www.easyalgo.com/support/docs/eaflashupload/](http://www.easyalgo.com/support/docs/eaflashupload/)

Javascript函数

```
 function doSendForm() {  
        EAFlashUpload.uploadFiles();  
        document.forms["id_form"].submit();    
    } 
```

HTML 代码

```
<div style="width:450px;height:350;background:#EFEFEF;">  
<form name="id_form" id="id_form" method="post" style="margin:0px;padding:0px;">  
<div id="EAFlashUpload_holder"></div>  

<script type="text/javascript" src="EAFUpload/swfobject.js"></script>  
<script type="text/javascript">  
    var params = {  
        BGcolor: "#ffffff",  
        wmode: "window"  
    };  

    var attributes = {  
        id: "EAFlashUpload",  
        name: "EAFlashUpload"                               
    };  

    var flashvars = new Object();   

    var uploadUrl = "simpleupload.php"; 
    if (!document.all) {  
        uploadUrl = "../" + uploadUrl;  
    }  
    flashvars["uploader.uploadUrl"] = uploadUrl;  
    flashvars["viewFile"] = "EAFUpload/TableView.swf";  
    flashvars["view.uploadButton.visible"] = "false";  

    swfobject.embedSWF("EAFUpload/EAFUpload.swf", "EAFlashUpload_holder", "450", "350", "10.0.0", "EAFUpload/expressInstall.swf", flashvars, params, attributes);  

    function EAFlashUpload_onMovieLoad(errors)  
    {  
        if(errors != "")  
            alert(errors);   
    }  
</script>
    <p>First name: <input type="text" name="firstname"></p>  
    <p>Last name: <input type="text" name="lastname"></p>  
    <input type="submit" id="id_submit" name="submit" value="submit" onClick="doSendForm();" style="padding:10px;font-size:20px;">&nbsp;  
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:35:18.560

EAFlashbutton 似乎具有灵活的配置选项和 Javascript API。

您应该能够 1) 隐藏 Flash 上传按钮和 2) 通过 Javascript 从外部触发上传。

### 1）隐藏按钮

按钮有一个[`visible`属性](http://www.easyalgo.com/support/docs/eaflashupload/EAFlashUpload/tableview.buttons.html#uploadButton)，所以你应该能够用这样的东西隐藏它们：

```
flashvars["view.uploadButton.visible"] = "false"; 
```

### 2) 触发上传

使用 Javascript API 的[`uploadFiles()`方法](http://www.easyalgo.com/support/docs/eaflashupload/EAFlashUpload/javascript.api.html#uploadFiles)。

# ruby-on-rails - Ruby on Rails：使用引导按钮连接函数

> ID：13659840
> 
> 赞同：0
> 
> 时间：2012-12-01T13:20:34.383
> 
> 标签：ruby-on-rails

我[将此示例用于文件上传器。](https://github.com/tors/jquery-fileupload-rails-paperclip-example)

现在它是这样工作的：我上传一个文件，文件保存后，函数（do_picture_analysis）调用R并生成一个直方图（最简单的版本，在更复杂的版本2包必须安装在R中），图片直方图被保存。问题是，如果我想上传 50 个文件，在 R 中分别为每个文件加载 2 个包需要花费大量时间（after_save 回调）。

我需要什么：我上传一个文件，保存文件，单击“直方图”按钮，然后对数据库中的所有文件调用 do_picture 分析函数（如果某些文件已经分析过，则无关紧要）

所以我只需要知道如何**在按钮和函数调用之间进行交互，**仅此而已。

我的 show.html.erb：

```
<script id="template-download" type="text/x-tmpl">
  {% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">

       <td></td>
      <td class="name">
       <a href="{%=file.url%}" download="{%=file.name%}">{%=file.name%}</a>
      </td>
       <td class="nam">
       <a href="{%=file.url_chip_image%}" download="{%=file.name%}">{%=file.name%}</a>
      </td>

      <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>     

      <td class="Pic">
        <button class="btn btn-mini btn-info">Pic</button>    
      </td>

      <td class="Hist">
        <button class="btn btn-mini btn-primary" >Hist</button>        
      </td>

      <td class="delete">
        <button class="btn btn-mini btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}"> 
          <i class="icon-trash icon-white"></i>

        </button>
        <input type="checkbox" name="delete" value="1">
      </td>
    </tr>
    {% } %}
</script> 
```

我的上传.rb：

```
def to_jq_upload
    {
      "name" => (read_attribute(:upload_file_name)).split(".").first,
      "size" => read_attribute(:upload_file_size),
      "url" => upload.url(:original),
      "delete_url" => upload_path(self),
      "delete_type" => "DELETE",
      "url_chip_image"=>read_attribute(:chip_image),

    }
  end

  after_save :do_picture_analyse

def do_picture_analyse
  if read_attribute(:chip_image)==nil

   require 'rinruby'
    myr = RinRuby.new(echo=false)

myr.filepath=upload.path(:original)
myr.fileurl=upload.url(:original)

myr.eval <<EOF
   s=read.table(filepath)
   for(j in nchar(filepath):1){
         if(substr(filepath,j,j)=="/"){      
           savepath<-substr(filepath,1,j-1)
           file.name<-filepath
           file.name<-substr(file.name,j+1,nchar(filepath)-4)

           break
         }
       }

  file.name1<-paste(file.name,"image.jpeg",sep="_")
  savepath<-paste(savepath,file.name1,sep="/")

   jpeg(filename=savepath,width=250, height=250)
   hist(s$V1) 
   dev.off()

EOF

  self.update_attributes(
    :chip_image => (((myr.fileurl).split("?").first)[6..-5]+'_image.jpeg')
  )
end

end 
```

**编辑：**

do_picture_analysis 可以将一个文件夹作为参数，并通过只为整个文件夹加载一次包来分析其中的所有文件。文件只有两个文件夹（两种不同类型的文件，比如说 .txt 和 .blabla 文件将保存在 txt-Folder 或 blabla-Folder 中。文件夹的类型也保存在数据库中。通过单击按钮，应将两个文件夹传递给 do_picture_analysis ，它将完成所有工作 提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:40:54.917

您需要为此创建一条新路线：

```
resources :name_of_your_controller do
  # use this if you want a route like resources/:id/analyze (single file)
  get :analyze, on: :member 
  # use this if you want a route like resources/analyze (multiple files)      
  get :analyze, on: :collection
end 
```

然后在您的控制器上创建一个新操作：

```
def analyze
  # for single file analysis do something like this :
  @file = File.find( params[:id] )
  @file.do_picture_analyse
  respond_to do |format|
    # render what you need to render, js or html
  end

  # ... or do something like this for multiple file analysis :
  @files = File.where( params[:search] )
  @files.each {|f| f.do_picture_analyse )
  # etc.
end 
```

然后，您可以将按钮链接到您的操作：

```
# single file
<%= link_to "Histogram", analyze_file_path( file ) %>
# multiple files
<%= link_to "Histogram", analyze_files_path( search: your_search_conditions ) %> 
```

PS：如果您的方法需要大量处理能力（如果您使用 R，我假设您涉及复杂的计算），您应该考虑将其提取到[Worker](https://stackoverflow.com/questions/10338029/what-is-a-worker-in-ruby-rails)中以将其作为后台任务运行。

**编辑**

回复您的评论：

我认为您应该提取此方法并使其成为接受一个或多个路径的类方法。然后创建一个指向你的控制器的集合路由；在您的控制器操作中，根据一些参数加载文件并执行以下操作：

```
# find the directories to be processed : 
paths = @files.map(&:folder_type).uniq
# pass them to your class method : 
File.do_picture_analyse(paths) 
```

甚至可以创建一个类方法来自动处理关系中所有文件的这两个步骤：

```
def self.perform_analysis!
  paths = all.map(&:folder_type).uniq # or uniq.pluck(:folder_type) on rails >= 3.2.1
  do_picture_analyse(paths)
end

def self.do_picture_analyse( *paths )
  # call R from here
end 
```

那么你可以这样做：

```
File.where( your_search_params ).perform_analysis! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T15:46:10.240

简短而甜蜜的答案：在您的文章中`show.html.erb`：

```
 <td class="Hist">
    <%= link_to 'Histogram', histogram_path, ;method => :post, :class => 'btn btn-mini btn-primary" %>
  </td> 
```

在您`config/routes.rb`添加以下行

```
post '/histogram' => 'your-controller#histogram', :as => 'histogram' 
```

这意味着`histogram_path`将指向一个名为`your-controller`并调用 action的控制器`histogram`。*请用**你的*名字替换那些。

然后你应该很高兴。

我冒昧地提出了一个 POST 动作，因为我假设该动作不是幂等的。如果是，您应该使用 GET。

希望这可以帮助。

# php - 谷歌分析如何避免同源政策？

> ID：13659843
> 
> 赞同：12
> 
> 时间：2012-12-01T13:20:43.323
> 
> 标签：php, javascript, google-analytics, same-origin-policy

我有一个项目的想法，该项目涉及一个 Javascript 终端，该终端利用指定的 PHP 脚本作为服务器来执行远程功能。我知道同源政策会成为这样一个项目的障碍，但看看我每天使用的谷歌分析，他们似乎有办法大规模避免这个问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-01T15:17:02.377

Google Analytics、Google AdWords 和几乎所有其他分析/网络营销平台都使用`<img>`标签。

他们加载他们的 JS 程序，这些程序处理你在页面上放置的任何跟踪，然后他们创建一个图像并将图像的源设置为等于他们服务器的域是什么，并将你所有的跟踪信息添加到查询字符串中.

关键在于它如何到达那里并不重要：
服务器只关心被调用的 URL 内部的数据，而客户端只关心对特定 URL 的调用，而不是获取任何返回值。
因此，有人在`<img>`多年前选择了它，并且公司一直在使用它。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-01T15:04:10.807

允许跨域请求的现代方法是让服务器使用以下标头响应任何请求：

```
Access-Control-Allow-Origin: * 
```

这允许来自任何主机的请求，或者可以使用特定主机代替`*`. 这称为跨域资源共享 (CORS)。不幸的是，较旧的浏览器不支持它，因此在这种情况下，您需要破解浏览器来解决问题（就像评论者所说的可能通过请求图像）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-04-18T06:53:24.480

您可以从第三方网站获取代码，但使用它们收集数据受到[政策](http://en.wikipedia.org/wiki/Same-origin_policy)的限制。

Google 使用 1st-orgine-site 嵌入的“_gaq”函数数组收集数据，然后 Google 将收集到的数据发送到 http-request 参数中。

```
http://www.google-analytics.com/__utm.gif?utmwv=4&utmn=769876874&utmhn=example.com&utmcs=ISO-8859-1&utmsr=1280x1024&utmsc=32-bit&utmul=en-us&utmje=1&utmfl=9.0%20%20r115&utmcn=1&utmdt=GATC012%20setting%20variables&utmhid=2059107202&utmr=0&utmp=/auto/GATC012.html?utm_source=www.gatc012.org&utm_campaign=campaign+gatc012&utm_term=keywords+gatc012&utm_content=content+gatc012&utm_medium=medium+gatc012&utmac=UA-30138-1&utmcc=__utma%3D97315849.1774621898.1207701397.1207701397.1207701397.1%3B... 
```

谷歌清楚地[展示了跟踪是如何工作的。](https://developers.google.com/analytics/resources/concepts/gaConceptsTrackingOverview)

# php - 如何使用 ZEND 模块（不是 Zend 控制器）作为子域

> ID：13659847
> 
> 赞同：1
> 
> 时间：2012-12-01T13:21:40.183
> 
> 标签：php, .htaccess, zend-framework, routing, routes

我使用 ZEND 框架版本 1.12.0 构建了我的网站。我的站点中还有其他三个模块（管理员、博客、图像），我想以[http://admin.mysitename.com](http://admin.mysitename.com)、[http://blog.mysitename.com](http://blog.mysitename.com)、[http://images.mysitename.com](http://images.mysitename.com)的形式访问分别。但是，我无法访问子域。请注意：模块具有不同的操作以及更新、添加、存档等。

**.ht 访问代码：**

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L]
</IfModule> 
```

**引导程序.php：**

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap{
    /**
     * Initialize the application autoload
     *
     * @return Zend_Application_Module_Autoloader
     */
    protected function _initAppAutoload(){
        $autoloader = new Zend_Application_Module_Autoloader(array(
            'namespace' => 'App',
            'basePath'  => dirname(__FILE__),
        ));
        return $autoloader;
    }

    /**
     * Initialize the layout loader
     */
    protected function _initLayoutHelper(){
        $this->bootstrap('frontController');
        $layout = Zend_Controller_Action_HelperBroker::addHelper(new Amz_Controller_Action_Helper_LayoutLoader());
    }   

    public function _initRoutes(){
        $frontController = Zend_Controller_Front::getInstance();
        $router = $frontController->getRouter();

        $route = new Zend_Controller_Router_Route ('cms/:page_url/',array('controller' => 'Cms','action'=> 'index'));
        $router->addRoute('cms-page', $route);

        $router->addRoute('user', new Application_Route_User(
            'user',
            array(
                'module' => 'default',
                'controller' => 'Userdetail',
                'action' => 'index'
            )
        ));

        $routeJoin = new Zend_Controller_Router_Route ('join/:id/',array('controller' => 'Index','action'=> 'index'));
        $router->addRoute('join', $routeJoin); 

        $registration = new Zend_Controller_Router_Route ('registration/invitation/:id',array('controller' => 'Registration','action'=> 'index'));
        $router->addRoute('registration', $registration);

    }  

    /**
     *Get the PDO database connection and set it to the Registry 
     */
    protected function _initDbConfig(){
        $config = new Zend_Config($this->getOptions());
        $params = $config->database->toArray();
        $DB = new Zend_Db_Adapter_Pdo_Mysql($params);    
        $DB->setFetchMode(Zend_Db::FETCH_OBJ);
        Zend_Registry::set('DB',$DB);
    }   

    /**
     *Get the smtp information and set it to the Registry 
     */
    protected function _initSiteConfig(){           
        $registry = Zend_Registry::getInstance();
        $DB = Zend_Registry::get('DB');     
        $selectSiteConfig= "SELECT * FROM site_config order by id"; //fetching available account types  
        $resultSiteInfo = $DB->fetchAssoc($selectSiteConfig);
        $site_config=array();
        foreach($resultSiteInfo as $row){
            $site_config[$row['config_name']]=$row['config_value'];         
        }   
        Zend_Registry::set('site_config',$site_config);
    }   

    /**
     * Setup the Custom Helpers
     */
    protected function _initSetHelper(){
        Zend_Controller_Action_HelperBroker::addPrefix('Helper');
    }   

} 
```

**索引.php：**

```
ini_set("display_errors","on");
// Define path to application directory
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/application'));

// Define application environment
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'production'));

//Ensure zend library is on include_path   
$rootDir = dirname(__FILE__);
set_include_path($rootDir . '/library' . PATH_SEPARATOR . get_include_path());    

/** Zend_Application */
require_once 'Zend/Application.php';  

// Create application, bootstrap, and run
$application = new Zend_Application(
    APPLICATION_ENV, 
    APPLICATION_PATH . '/configs/application.ini'
);

$config = new Zend_Config_Ini('application/configs/application.ini','production');  

$siteurl  = $config->siteurl;
$sitedocroot = $config->sitedocroot;

define('SITEURL',$siteurl); //DEFINE SITE URL AS CONSTANT
define('SITEDOCROOT',$sitedocroot); //DEFINE SITE DOC ROOT AS CONSTANT
define('FORMURL',$form_url);
Zend_Registry::set('siteurl',$siteurl); //SET SITE URL IN REGISTRY
Zend_Registry::set('sitedocroot',$sitedocroot); //SET SITE DOC ROOT IN REGISTRY

$currentDate = date("Y-m-d");
define('CURDATE',$currentDate);
Zend_Registry::set('curdate',$currentDate);

$currentDateTime = date("Y-m-d H:i:s");
define('CURDATETIME',$currentDateTime);
Zend_Registry::set('curdatetime',$currentDateTime);

$detailDateForm= date("F j, Y");//March 22 2012
define('DETAILDATE',$detailDateForm);
Zend_Registry::set('detaildate',$detailDateForm);
$application->bootstrap()->run(); 
```

**我遵循的步骤：**

1) 使用 cpanel 创建单独的子域。子域与域具有相同的 DocumentRoot 文件夹。

2）在application.ini文件中编写了下面提到的代码（提到的代码仅适用于图像模块）

```
resources.router.routes.images.type = "Zend_Controller_Router_Route_Hostname"
resources.router.routes.images.route = ":module.mysitename.com"
resources.router.routes.images.defaults.module = "images"
resources.router.routes.images.chains.index.type = "Zend_Controller_Router_Route"
resources.router.routes.images.chains.index.route = ":controller/:action/*"
resources.router.routes.images.chains.index.defaults.controller 
```

**我遵循的另一个步骤：**

1) 上述步骤中的步骤 1。

2) 在主域的 bootstrap.php 文件（在 _initRoutes 函数上）编写了下面提到的代码

```
$router = Zend_Controller_Front::getInstance()->getRouter();

$hostnameRoute = new Zend_Controller_Router_Route_Hostname(":images.mysitename.com");

$router->addDefaultRoutes();
foreach ($router->getRoutes() as $key=>$route) {
$router->addRoute('hostname' . $key, $hostnameRoute->chain($route)); 
```

我也尝试从其他站点获得帮助，但没有发现任何重要的内容，其中大多数都被提到了控制器。

我的步骤正确吗？请帮助我。

**编辑：**

根据帖子（David Weinraub 建议），我在 application.ini 上添加了下面提到的代码

```
resources.modules[] = "images"

; abstract routes to be used in chaining
resources.router.routes.plain.type = "Zend_Controller_Router_Route"
resources.router.routes.plain.abstract = true
resources.router.routes.plain.route = "/:controller/:action"
resources.router.routes.plain.defaults.controller = "index"
resources.router.routes.plain.defaults.action = "index"

resources.router.routes.mysite.type = "Zend_Controller_Router_Route_Hostname"
resources.router.routes.mysite.abstract = true
resources.router.routes.mysite.route = "images.mysitename.com"
resources.router.routes.mysite.defaults.module = "images"

resources.router.routes.mysite1.type = "Zend_Controller_Router_Route_Hostname"
resources.router.routes.mysite1.abstract = true
resources.router.routes.mysite1.route = "blog.mysitename.com"
resources.router.routes.mysite1.defaults.module = "blog"

; now the actual (non-abstract) routes are chains of the abstract ones
resources.router.routes.mysite-plain.type = "Zend_Controller_Router_Route_Chain"
resources.router.routes.mysite-plain.chain = "mysite,plain"

resources.router.routes.mysite1-plain.type = "Zend_Controller_Router_Route_Chain"
resources.router.routes.mysite1-plain.chain = "mysite1,plain" 
```

但是，这并没有解决。我收到下面提到的错误。

```
Warning: is_readable() [function.is-readable]: open_basedir restriction in effect. File(/home/debcho/public_html/application/../../Library/ZendX/Application/Resource/Frontcontroller.php) is not within the allowed path(s): (/home/debcho/public_html:/usr/lib/php:/usr/local/lib/php:/tmp) in /home/debcho/public_html/library/Zend/Loader.php on line 186

Fatal error: Uncaught exception 'Zend_Session_Exception' with message 'Session must be started before any output has been sent to the browser; output started in /home/debcho/public_html/library/Zend/Loader.php/186' in /home/debcho/public_html/library/Zend/Session.php:451 Stack trace: #0 /home/debcho/public_html/library/Zend/Session/Namespace.php(143): Zend_Session::start(true) #1 /home/debcho/public_html/application/Bootstrap.php(128): Zend_Session_Namespace->__construct('Zend_Auth_LipyU...') #2 /home/debcho/public_html/library/Zend/Application/Bootstrap/BootstrapAbstract.php(669): Bootstrap->_initSetUserAccessPermission() #3 /home/debcho/public_html/library/Zend/Application/Bootstrap/BootstrapAbstract.php(622): Zend_Application_Bootstrap_BootstrapAbstract->_executeResource('setuseraccesspe...') #4 /home/debcho/public_html/library/Zend/Application/Bootstrap/BootstrapAbstract.php(586): Zend_Application_Bootstrap_BootstrapAbstract->_bootstrap(NULL) #5 /home/debcho/public_html/library/Zend/Application.php(355 in /home/debcho/public_html/library/Zend/Session.php on line 451 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-27T05:34:10.097

下面提到的步骤对我有用。

我们需要在 Bootstrap.php 中为子域路径添加一个函数 _initSubDomainRoute()。下面提到的功能成功运行。

```
public function _initSubDomainRoute()
{
   $pathRoute = new Zend_Controller_Router_Route(':controller/:action/*', array('controller'=>'index', 'action'=>'index'));

   $frontController = Zend_Controller_Front::getInstance();
   $router = $frontController->getRouter();

   $imageDomainRoute = new Zend_Controller_Router_Route_Hostname(
                         'image.examples.com',
                          array(
                            'module'     => 'myimage'
                          ));

   $router->addRoute('imagesdomain', $imageDomainRoute->chain($pathRoute));

   $i_pathRoute_1 = new Zend_Controller_Router_Route(':value', array('controller'=>'Details', 'action'=>'index'));
   $router->addRoute('imagesdomain1', $imageDomainRoute->chain($i_pathRoute_1));

   $jokeDomainRoute = new Zend_Controller_Router_Route_Hostname(
                        'joke.examples.com',
                         array(
                           'module'     => 'myjoke'
                         ));

   $router->addRoute('jokesdomain', $jokeDomainRoute->chain($pathRoute));

   $j_pathRoute_1 = new Zend_Controller_Router_Route(':value', array('controller'=>'Details', 'action'=>'index'));
   $router->addRoute('jokesdomain1', $jokeDomainRoute->chain($j_pathRoute_1));
} 
```

.htaccess 和 index.php 文件具有相同的（上面提到的）代码。未修改此文件上的任何内容以进行子域配置。

# svn - 无法从外部访问svn

> ID：13659848
> 
> 赞同：0
> 
> 时间：2012-12-01T13:21:45.753
> 
> 标签：svn, webserver, centos

昨天我在 mydom.com/b-htdocs 上创建了一个 svn 存储库。在项目目录“one”中，我将在其中测试文件夹“ajax”（因为导入所有内容都需要很长时间）

我只能使用文件 url 签出和导入：

```
svn co file:///var/www/svn/b-htdocs/one/ajax 
```

文件完美运行。但网络网址不起作用：

```
svn co http://mydom.com/b-htdocs/one/ajax --username root --password pw
svn: Server sent unexpected return value (403 Forbidden) in response to OPTIONS request for 'http://mydom.com/b-htdocs/one/ajax' 
```

mydom 上的每个路径和每个用户名/密码都相同：

```
svn co http://mydom.com/
svn: Server sent unexpected return value (403 Forbidden) in response to OPTIONS request for 'http://mydom.com' 
```

我实际上最想做的是使用 NetBeans 进行版本处理。尝试连接到[http://www.mydom.com/b-htdocs](http://www.mydom.com/b-htdocs)给出：

```
org.tigris.subversion.javahl.ClientException: Malformed XML 
```

再次，用户名和密码似乎并不重要。尝试连接到[http://www.mydom.com/b-htdocs/one](http://www.mydom.com/b-htdocs/one)或[http://www.bonxx.com/b-htdocs/doesnotexits](http://www.bonxx.com/b-htdocs/doesnotexits)给出：

```
org.tigris.subversion.javahl.ClientException: Could not open the requested SVN filesystem
OPTIONS of '/b-htdocs/one': 500 Internal Server Error (http://www.mydom.com) 
```

当我尝试通过 borwser 连接到[http://www.mydom.com/b-htdocs](http://www.mydom.com/b-htdocs)时，我输入正确的用户名和密码，然后查看：

```
Collection of Repositories
conf/
db/
hooks/
locks/
Powered by Subversion version 1.6.11 (r934486). 
```

去[http://www.mydom.com/b-htdocs/conf](http://www.mydom.com/b-htdocs/conf)或[http://www.mydom.com/b-htdocs/one](http://www.mydom.com/b-htdocs/one)或[http://www.mydom.com/b-htdocs/doesnotexist](http://www.mydom.com/b-htdocs/doesnotexist)给出：

```
<D:error><C:error/><m:human-readable errcode="2">
Could not open the requested SVN filesystem
</m:human-readable></D:error> 
```

Tortoise SVN 也会抛出错误。

如何解决此访问权限问题？

这是我的 svn 配置：

```
LoadModule dav_svn_module     modules/mod_dav_svn.so
LoadModule authz_svn_module   modules/mod_authz_svn.so

<Location /b-htdocs>
DAV svn
SVNParentPath /var/www/svn/b-htdoc
SVNListParentPath on

# Limit write permission to list of valid users.
#   <LimitExcept GET PROPFIND OPTIONS REPORT>
  # Require SSL connection for password protection.
  # SSLRequireSSL

  AuthType Basic
  AuthName "Subversion repositories"
  AuthUserFile /etc/svn-auth-users
  Require valid-user
#   </LimitExcept>
</Location> 
```

服务器运行 CentOS 5.8，我通过 Webmin 进行管理，我拥有所有管理权限。如您所知，我对 SVN、CentOS 或 webmin 了解不多。我也不知道是否有证券，它不是我的服务器（希望没有）。如果您需要任何日志，请告诉我它们在哪里以及它们在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:07:20.433

1.  SVNParentPath 是存储库的**父目录**，而不是存储库
2.  SVNParentPath 必须**在 webspace 之外**，svn-space 的位置是**虚拟目录**
3.  [SVN Book](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.httpd.html#svn.serverconfig.httpd.basic)是你最好的恶魔

# windows - 如何在 64 位 Windows 上从注册表中读取启动项？

> ID：13659852
> 
> 赞同：3
> 
> 时间：2012-12-01T13:22:09.857
> 
> 标签：windows, vb.net, registry, 64-bit

我目前正在尝试获取所有自动运行的列表，但我在 64 位系统上苦苦挣扎。当我使用：

```
My.Computer.Registry.LocalMachine.OpenSubKey("SOFTWARE\Microsoft\Windows\CurrentVersion\Run", False) 
```

它向我显示了以下条目：

```
My.Computer.Registry.LocalMachine.OpenSubKey("SOFTWARE\WOW6432Node\Microsoft\Windows\CurrentVersion\Run", False) 
```

任何人都知道为什么和/或如何解决这个问题？

我还应该声明 HKLM\..\Run 中的项目与 HKLM\..\Wow6432Node..\Run 中的项目不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T14:10:46.177

您的进程是 32 位进程，因此，在 64 位操作系统上，[注册表重定向器](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384232.aspx)开始发挥作用。密钥被重定向，它`HKLM\Software`有两个视图，一个是您的进程正在查找的 32 位视图，一个是 64 位视图。

确实，如果您运行 64 位进程，您将看到注册表的 64 位视图。然而，这还不是全部。Windows 处理`CurrentVersion\Run`来自注册表的 32 位和 64 位视图的条目。因此，如果您只是切换到 x64 或 AnyCPU 进程，那么您将丢失存储在 32 位注册表视图中的自动运行。

因此，由于您的目标是列出所有自动运行，因此您需要读取注册表的 32 位和 64 位视图。您可以使用[`RegistryView`](http://msdn.microsoft.com/en-us/library/microsoft.win32.registryview.aspx).net 4 中引入的枚举来做到这一点。这允许 32 位进程访问注册表的 64 位视图。事实上，它允许 64 位进程访问注册表的 32 位视图。

如果您想要一个同时在 32 位和 64 位系统上运行的进程，您将需要以 x86 或 AnyCPU 为目标。如果您检测到您在 64 位系统上运行，则使用它`RegistryView`来读取注册表的两个视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T13:32:11.880

这是因为您的应用程序是为 x86 平台编译并在 64 位操作系统上运行的。MSDN上有一篇关于[注册表重定向的综合文章](http://msdn.microsoft.com/en-gb/library/aa384232%28VS.85%29.aspx)

> 注册表重定向器通过在 WOW64 上提供注册表某些部分的单独逻辑视图来隔离 32 位和 64 位应用程序。注册表重定向器拦截 32 位和 64 位注册表调用到它们各自的逻辑注册表视图，并将它们映射到相应的物理注册表位置。重定向过程对应用程序是透明的。因此，32 位应用程序可以像在 32 位 Windows 上运行一样访问注册表数据，即使数据存储在 64 位 Windows 上的不同位置

您可以解决为 AnyCPU 平台编译应用程序的问题

# c++ - 使用 WxWidgets 异步执行

> ID：13659853
> 
> 赞同：0
> 
> 时间：2012-12-01T13:22:20.637
> 
> 标签：c++, asynchronous, wxwidgets

我正在开发一个在 Windows 上使用**WxWidgets**和**Codeblocks**的工程程序，它依赖于一些 Bash 脚本。我想使用**单独的 Bash 窗口而不是 Windows 命令提示符**运行程序（将彩色输出打印到 Bash 控制台）。

是否有任何简单的方法可以使用 WxWidgets 异步运行命令，因为 Wx-2.8 附带的示例包含 1231 行代码，我没有更多时间。

```
wxShell(_("bash --login -i"));  // This locks the program until bash window closed
wxShell(_("bash -c grep bla bla")); //This works great but on CMD but

// I want to run on bash.exe like that
wxShell(_("egrep bla bla")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T20:14:50.853

您需要带有标志的函数[wxExecute](http://docs.wxwidgets.org/2.8/wx_processfunctions.html#wxexecute)`wxEXEC_ASYC`。就像是：

```
wxExecute(_("bash --login -i"), wxEXEC_ASYNC); 
```

应该做你需要的。如果你想重定向输入和输出，那么你还需要[wxProcess](http://docs.wxwidgets.org/2.8/wx_wxprocess.html#wxprocess)。

# php - 致命错误：调用未定义的方法 mysqli_stmt::get_result()

> ID：13659856
> 
> 赞同：2
> 
> 时间：2012-12-01T13:22:46.750
> 
> 标签：php, mysqli, fatal-error, easyphp

我正在开发一个网络应用程序，PHP 是我的后端语言......

直到现在，我使用**easyPHP**（**PHP 5.4.6 版**）在本地主机上测试了网站……一切都很好！今天我尝试在线运行网站（**PHP 5.3.18 版**），我有这个错误：

> 致命错误：调用未定义的方法 mysqli_stmt::get_result() 等。

我觉得这很奇怪，因为从 PHP 5.3.0 开始应该支持 get_result() 方法（[source](http://php.net/manual/en/mysqli-stmt.get-result.php)）

您对如何解决这个问题有任何想法吗？

先感谢您

**更新：**

我没有分享任何代码，因为它很好（它仍然可以在我的本地主机上运行）......问题应该出在在线环境上。

**更新 2：** 我将 phpInfo 的部分与有关**mysqli**的信息共享...

*本地主机：* ![本地主机上的 mysqli](../Images/d7650d1f48176150ae18d87c43aa68b4.png)

*偏僻的：* ![mysqli在线](../Images/7d4e02ec573f18c3ff2d7d5f66abb4f4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T14:03:40.330

我发现了问题。

来自[php.net](http://php.net/manual/en/mysqli-stmt.get-result.php)：

> mysqli_stmt :: get_result**仅适用于 mysqlnd**。

我的在线环境，不像我的本地环境，好像缺少mysqlnd！

所以我想我必须联系我的主人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T02:53:44.427

只是遇到了同样的问题，我不太相信我的托管服务提供商会很快启用 mysqlnd。所以最后换了`mysqli_stmt::get_result()`

检查[此解决方案](https://stackoverflow.com/questions/12996427/mysqli-stmt-get-result-alternative-for-php-5-2-6/13794165#13794165)是否适合您

# c - 简单检查 C 中 char 数组中的字符

> ID：13659859
> 
> 赞同：1
> 
> 时间：2012-12-01T13:23:20.730
> 
> 标签：c

我是 C 新手。这段代码在 Flyport 模块上运行并在他们自己的 IDE 上编译，但我认为我的错误对于任何熟悉 C 的人来说应该很容易发现。

尽管更改了几乎所有内容，但我无法编译此代码，我做错了什么？

```
char string_serial[50]="starting Value";    

if (string_serial[0] = "*")
        {   

            UARTWrite(2,"First Char OK");
            UARTWrite(2,"\r\n");

            else 

            UARTWrite(2,"First Char NOT OK");
            UARTWrite(2,"\r\n");

        } 
```

如果不是很明显，我正在尝试检查数组中的字符 0 是否为 *。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T13:25:00.277

if/else 条件的语法错误

语法应该是

```
 if(condition)
  {
  }

  else
  {
  } 
```

对于您的特定代码，它应该是

```
if (string_serial[0] == '*')
        {   

            UARTWrite(2,"First Char OK");
            UARTWrite(2,"\r\n");
         }

else 
        {
            UARTWrite(2,"First Char NOT OK");
            UARTWrite(2,"\r\n");

        } 
```

`=`运算符是赋值，它赋值（成功时返回true）。您需要的是`==`（用于比较）。

如上面的代码所示，还要对字符使用单引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T13:24:46.227

您应该用单引号替换双引号`"*"`，并使用`==`：

```
if (string_serial[0] == '*') 
```

用单引号括起来的单个字符表示“一个字符”；用双引号括起来的单个字符表示“一个字符的 C 字符串”。

一个单一的`=`意思是“分配”；double `==`表示“比较”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T13:25:49.207

`''`用于单个`char`，但`""`用于字符串。以下行应该有效。

```
if (string_serial[0] == '*') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T13:25:57.563

你如果结构不正确

试试这个：

```
char string_serial[50]="starting Value";    

if (string_serial[0] == '*')
{   

   UARTWrite(2,"First Char OK");
}

else {

  UARTWrite(2,"First Char NOT OK");
  UARTWrite(2,"\r\n");

} 
```

你需要`=`改变`==`并`else block`离开`if block`

# c# - Windows 应用商店应用 - 测试应用内购买

> ID：13659860
> 
> 赞同：2
> 
> 时间：2012-12-01T13:23:20.980
> 
> 标签：c#, windows-runtime

我正在开发一个 Windows 应用商店应用程序。此应用程序允许用户在应用程序中支付升级费用。升级只是删除了广告（现在）。我提交了我的应用程序进行认证。然而，它失败了。我怀疑它失败的原因是因为 1.2 (http://msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx)。

更具体地说，我相信这是因为我没有为测试人员提供测试购买的方法。我的问题是，我该怎么做？认证并没有说明这一点。但我收到的认证报告说，一个可能的失败原因是：“用户可以通过该应用进行购买吗？如果可以，您需要提供一种方法来测试这些购买行为。”。

我的应用不需要用户名/密码，因此我无法识别用户。我怎么知道它是一个测试器，以允许他们测试购买。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:22:53.143

也许他们的意思是您应该提供有关如何找到升级按钮并测试应用程序的附加功能的分步说明？Microsoft 测试团队需要验证您的升级功能是否正常工作。

在您的情况下，您必须在 App Store 描述中编写如下内容：

*   进入主菜单并单击升级按钮。
*   如您所见，所有广告都从应用程序中删除。
*   购买升级前有广告的地方：
    *   欢迎屏幕
    *   ...
    *   ……

# php - PHP 将 html 输出打包到一个变量中

> ID：13659864
> 
> 赞同：0
> 
> 时间：2012-12-01T13:24:25.147
> 
> 标签：php, mysql, count

是否可以在 PHP 中将 HTML 代码的输出抓取到变量中？基本上，我正在寻找这段代码的简写：

```
<?php ob_start(); ?>
<div class="headSection">
    <h1><?=$headline?></h1>
    <p><?=$bottomline?></p>
</div>
<?php $contents = ob_get_contents(); ob_end_clean(); ?> 
```

我希望将 HTML 代码保存在`$contents`变量中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T13:28:42.787

使用 PHP 的 EOF 字符串

```
$str = <<<EOF
<div class="headSection">
    <h1>$headline</h1>
    <p>$bottomline</p>
</div>
EOF;
    echo $str; 
```

演示[http://codepad.org/9OeUiJNJ](http://codepad.org/9OeUiJNJ)

# java - 使用 JConsole 中的内存阈值

> ID：13659865
> 
> 赞同：0
> 
> 时间：2012-12-01T13:24:29.623
> 
> 标签：java, memory-leaks, heap-memory, jconsole

我正在研究如何使用`JConsole`来检测内存泄漏。
我看到`Memory Pool`在我的`MBeans`我可以`UsageThreashold`为我的`Tenured Generation`.
因此，如果我的应用程序超过此阈值，则堆内存在“内存”选项卡中变为红色。

**问题：**这有什么帮助？我的意思是我应该如何使用这个设置来分析我的记忆？我应该如何计算这个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T20:55:37.717

您可以使用 JMAP 查看直方图和/或创建堆转储并使用 Eclipse MAT 或 YourKit 等工具研究您的内存消耗。JConsole 更多地用于监视和运行 MBean，而更少用于分析，在我的过期时间里，JVisualvm 对此更好，因为您可以使用它来对代码进行采样并查看哪些方法消耗 CPU。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:18:31.370

在我看来，我不认为该`UsageThreashold`参数对您检测内存泄漏最有帮助（但如果有人知道它的一些技巧，请分享）。根据我的经验，如果我的应用程序太接近我的最大堆大小并且我有可能获得`OutOfMemoryException`.

仍然关于使用`JConsole`搜索内存泄漏，我认为这个过程没有灵丹妙药。但我通常做的是以下几点：

如果存在内存泄漏，则意味着对象（正在泄漏的对象）不会被收集，因此，`Tenured Generation`在任何数量的 GC 之后，您都不会完全恢复。

随着应用程序的运行，我连接`JConsole`并尝试通过观察内存选项卡来发现泄漏，如果在我的应用程序的多次计算以及发生各种 GC 之后（包括按下`Perform GC`按钮，这将导致**完整的 gc**）内存永远不会低于，或者至少到内存值，它开始跟踪很有可能发生了泄漏。当泄漏很大时，您甚至可以在内存中看到“阶梯图”模式。

请记住，如果您的应用程序运行的计算时间很长，这可能会消耗内存，则必须仔细进行此分析。您必须了解这些过程何时完成。例如，只需运行其中一项计算并跟踪内存在之前、期间和之后的总体演变。

另外，我建议您尝试[使用 visualVM](http://visualvm.java.net/)，因为它还允许您创建堆转储，您可以使用它来了解哪些对象仍在内存中并探索引用图以了解为什么它们没有被收集。

# php - 存储每日页面浏览量以及总数的最有效方式

> ID：13659868
> 
> 赞同：6
> 
> 时间：2012-12-01T13:24:52.807
> 
> 标签：php, mysql, performance, pageviews, storing-data

有很多关于在数据库中存储文章或视频的页面浏览量的讨论，但我似乎找不到任何关于存储每日页面浏览量的信息。例如，DeviantArt 在一个小图表中显示过去 15 天左右的页面浏览量，以及个人资料的总页面浏览量。

![浏览量示例](../Images/3743c93dd4ce13e27183f45537eec8d8.png)

您可以在上面确切地看到我想要实现的目标，而 DeviantArt 在获得数百万点击时大规模地做到了这一点。

我在 PHP 和 MySQL 上使用 CodeIgniter

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T14:53:26.820

通常，您在这些情况下所做的是拥有一个日志记录表，每个视图有 1 条记录。您以特定的时间间隔（每天）运行一次 cron，以将日志记录数据汇总到另一个汇总表中。在最基本的级别上，您将在汇总表中每天有 1 条记录以及总查看次数。由于历史数据永远不会改变，因此您无需进行更新。这为您每年最多为每个项目提供 365 条记录。记录不多，所以扩展性很好。

这比每天只有一条记录并更新计数更好。如果您尝试多次更新同一记录，您可能会遇到争用/锁定问题。通过执行 INSERT DELAYED 并使用 MyISAM 表，您的日志记录表可以很好地扩展。

然后，您可以从汇总表中选择以获取每日计数，如果要显示当前天数，您可以从日志表中选择。

如果你想保持你的日志表很小，当你的 cron 运行时，你可以重命名日志表并创建一个新的空表。然后处理重命名的日志记录表。

```
RENAME TABLE logging TO logging_old;CREATE TABLE logging LIKE logging_old; 
```

如果您真的需要扩展，您可以使用复制技巧以极快的速度记录视图。您使用 BLACK HOLE 表类型来记录数据，它会复制到另一个服务器，其中该表是 MyISAM 或 InnoDB。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-01T14:36:33.290

您可以每天有一行，然后在查看时增加计数。

```
INSERT INTO views (day,views) VALUES (CURDATE(),1) ON DUPLICATE KEY UPDATE views=views+1; 
```

还有一个 PHP 脚本...

```
mysql_query("INSERT INTO views (day,views) VALUES (CURDATE(),1) ON DUPLICATE KEY UPDATE views=views+1;"); 
```

这使用了一个名为“views”的表和 2 行“day”和“views”。

有关更多信息，请参阅[本文](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-01T14:02:55.627

我不使用 codeIgniter，但这里是你如何在直接的 php 中做到这一点。

基本上，您可以使用会话记录对您网站的每次访问并记录他们的页面请求，或者您可以简单地记录页面上的每次点击。第一个选项为您提供更多信息（有多少独特的点击，有多少来自回访者的点击等），但需要更多的编程来设置并需要用户会话管理。因此，出于您的目的，我将解释选项 2。

SQL：

```
Table 'pageViews'
Id  - Integer, auto Increment, primary key
page - varchar(150)
datetime - datetime 
```

在您正在监视的页面上，您将添加：

```
 $query2 = "INSERT INTO `pageViews` (page, datetime) VALUES ('".$_SERVER["SCRIPT_NAME"]."', ".date("Y-M-d H:I:s").")";
    $result2 = //insert DB connection etc. to apply update to DB 
```

然后，您可以根据页面和日期时间戳从数据库中获取行，计算结果并使用 html5 画布显示它。或者，因为每次点击都有一个日期时间，您可以将其进一步分解为一天中的几个小时等。

我希望这有帮助。

* * *

要为简单的每日计数器修改它，请添加一个名为“views”的额外列，它只是一个整数。然后在页面上检查数据库中今天是否有当前页面的行。如果是这样，则获取当前视图值并将其递增并转售给数据库。

对于总视图计数，我可能会创建另一个具有相同列但不包含日期时间列的表。然后在您的页面上，您也增加新表中当前页面的视图值。

这将很快减轻。权衡是细节的损失。所以，这里是第三个选项的 MySQL 和 PHP：

MySQL：

```
Table 'dailyViews'
Id  - Integer, auto Increment, primary key
views - integer
page - varchar(150)
datetime - datetime

Table 'totalViews'
Id  - Integer, auto Increment, primary key
views - integer
page - varchar(150) 
```

PHP：

```
// Search the DB for an entry today for this page in dailyViews
$query = "SELECT views FROM `dailyViews` WHERE `page`='".$_SERVER["SCRIPT_NAME"]."' AND `datetime`=".date("Y-M-d H:I:s")."";
$result = //insert your db connection etc to execute the query

if (mysqli_num_rows($result)==1) {
    $resultArray = mysqli_fetch_array($result, MYSQLI_ASSOC);
    $views = $resultArray['views']+1;
    $query2 = "UPDATE `dailyViews` SET `views`=".$views." WHERE `page`='".$_SERVER["SCRIPT_NAME"]."' AND `datetime`=".date("Y-M-d H:I:s")."";
    $result2 = //insert DB connection etc. to apply update to DB
} else if (mysqli_num_rows($result)<1) {
    $query2 = "INSERT INTO `dailyViews` (views, page, datetime) VALUES (1, '".$_SERVER["SCRIPT_NAME"]."', ".date("Y-M-d H:I:s").")";
    $result2 = //insert DB connection etc. to apply update to DB
} else {
    // there is more than one entry for this page and date in the DB. An error has ccurred
}

// Then just get the total views for this page and increase it by 1. 
```

# matlab - PSNR 和 int16 数据类型图像

> ID：13659879
> 
> 赞同：-1
> 
> 时间：2012-12-01T13:25:56.327
> 
> 标签：matlab

此代码是否适合计算 int16 数据类型图像的 PSNR？

```
function PSNR = PeakSignaltoNoiseRatio(origImg, distImg)

[M N] = size(origImg);
error = origImg - distImg;
MSE = sum(sum(error.^2)) / (M * N);
PSNR=10*log10(255*255/MSE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:00:36.553

不要`error`用作变量的名称。这是一个Matlab例程。

在计算“错误”之前将 int16 矩阵转换为例如双精度数：`double(variable)`。

# python - 按熊猫中唯一的列对计数

> ID：13659881
> 
> 赞同：35
> 
> 时间：2012-12-01T13:26:10.750
> 
> 标签：python, pandas

我试图弄清楚如何按每对唯一列（ip，useragent）的行数来计算，例如

```
d = pd.DataFrame({'ip': ['192.168.0.1', '192.168.0.1', '192.168.0.1', '192.168.0.2'], 'useragent': ['a', 'a', 'b', 'b']})

     ip              useragent
0    192.168.0.1     a
1    192.168.0.1     a
2    192.168.0.1     b
3    192.168.0.2     b 
```

生产：

```
ip           useragent  
192.168.0.1  a           2
192.168.0.1  b           1
192.168.0.2  b           1 
```

想法？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-01T13:34:16.033

如果你使用 groupby，你会得到你想要的。

```
d.groupby(['ip', 'useragent']).size() 
```

产生：

```
ip          useragent               
192.168.0.1 a           2
            b           1
192.168.0.2 b           1 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-01-10T14:41:18.310

```
print(d.groupby(['ip', 'useragent']).size().reset_index().rename(columns={0:''})) 
```

给出：

```
 ip useragent   
0  192.168.0.1         a  2
1  192.168.0.1         b  1
2  192.168.0.2         b  1 
```

* * *

另一个不错的选择可能是[pandas.crosstab](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.crosstab.html)：

```
print(pd.crosstab(d.ip, d.useragent) )
print('\nsome cosmetics:')
print(pd.crosstab(d.ip, d.useragent).reset_index().rename_axis('',axis='columns') ) 
```

给出：

```
useragent    a  b
ip               
192.168.0.1  2  1
192.168.0.2  0  1

some cosmetics:
            ip  a  b
0  192.168.0.1  2  1
1  192.168.0.2  0  1 
```

# android - android 2.x 中的溢出滚动问题

> ID：13659882
> 
> 赞同：2
> 
> 时间：2012-12-01T13:26:15.827
> 
> 标签：android, cordova, jquery-mobile, popup

我已经使用 jquery mobile 设计了 ​​android phonegap 应用程序。我需要显示弹出窗口并设置 jquery mobile 弹出窗口的高度。我给出了溢出：css 中的滚动和弹出内容在 android 4.0 中滚动，但在 android 中没有滚动2.2.

这是我的代码

```
<div align="center">
 <a href="#popupBasic" data-rel="popup">Pop Up</a>
</div>  
<div data-role="popup" id="popupBasic" data-dismissable="false" data-theme="c" data-overlay-theme="c" >
  <p id="popup_content">PhoneGap is a free and open source framework that allows you to create mobile apps using standardized web APIs for the platforms you care about.Easily create apps using the web technologies you know and love: HTML, CSS and JavaScript.From first-timers to long-time veterans, we’ve got your dev needs covered. The developer portal is the place to find guides, documentation and tutorials.This guide describes how to set up your development environment for Cordova and run a sample application.</p>
 </div> 
```

**CSS：**

.ui-popup { 位置：相对；高度：100px；溢出：滚动；}

请指导我。在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T11:11:14.980

我在为 android 开发 phonegap 应用程序时遇到了这个问题。基本上，溢出：滚动在 android 2.2 中不起作用；查看这些错误报告：

[http://code.google.com/p/android/issues/detail?id=2118](http://code.google.com/p/android/issues/detail?id=2118)
[http://code.google.com/p/android/issues/detail?id=2911](http://code.google.com/p/android/issues/detail?id=2911)

我通过使用 javascript 解决方案解决了这个问题：[https ://github.com/watusi/jquery-mobile-iscrollview](https://github.com/watusi/jquery-mobile-iscrollview)

希望这可以帮助！

# php - 太有关系还是没有关系？MySQL、PHP 数据库工作流程

> ID：13659884
> 
> 赞同：0
> 
> 时间：2012-12-01T13:26:19.190
> 
> 标签：php, mysql, database-design, workflow, relational-database

我对 mysql 有点陌生，我正在尝试创建一个复杂的数据库，需要一些帮助。

我的数据库结构

```
 Tables(columns)

 1.patients (Id,name,dob,etc....)
 2.visits (Id,doctor,clinic,Patient_id,etc....)
 3.prescription (Id,visit_id,drug_name,dose,tdi,etc....)
 4.payments (id,doctor_id,clinic_id,patient_id,amount,etc...) etc.. 
```

* * *

我有大约 9 个表，所有表的主键都是“id”，并且设置为 autoinc。

我不在我的数据库中使用关系（因为我不知道它是否会更好！而且我从未真正深入了解 mysql，所以我只是使用 php 运行查询以从一个表中获取信息并使用它来运行另一个查询获取更多信息/商店等。）

例如：如果我想查看我给我的一位患者服用的所有药物，例如他的 id 是：100

```
1-click patient name (name link generated from (tbl:patients,column:id))
2-search tbl visits WHERE patient_id=='100' ; ---> that return all his visits ($x array)
3-loop prescription tbl searching for drugs with matching visit_id with $x (loop array).
4- return all rows found. 
```

随着我的数据库越来越多（访问表中的 1k+ 记录），因此 1 名患者可以进行 40 多次访问，即 40 次循环进入处方表以获取他以前的所有处方。

所以我想出了一个小柚木，我在其中编辑了我的数据库，这样**patient_id 和 visit_id 几乎是所有表中的一列，**所以我可以跳过第 2 步和第 3 步进入一个步骤（搜索处方 tbl WHERE patient_id=100），但这给我留下了我的数据库中有这么多重复项，我觉得这样做有点愚蠢！

**我应该开始考虑使用关系数据库吗？**

如果是这样，有人可以解释一下这将如何使我的生活更轻松吗？

我可以重新设计但更改当前表还是必须重新创建所有表？

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:49:06.993

是的，您应该利用 MySQL 的关系数据库功能。随着该项目的扩大，它们将使您的生活更加轻松。

实际上你已经很好地使用它们了。例如，您发现患者可以进行零次或多次就诊。您现在需要做的是学习使用`JOIN`对 MySQL 的查询。

一旦您知道如何使用 JOIN，您可能想要声明一些外键和其他数据库约束。但是没有它们，您的系统将正常工作。

您已经决定通过在几乎所有表中同时包含 patient_id 和 visit_id 来对数据库进行非规范化。非规范化是将正式冗余的数据添加到各种表中。它通常是出于性能原因而完成的。随着您的系统扩展，这可能是一个明智的决定，也可能不是一个明智的决定。但我认为你可以相信你对你选择的非规范化需求的直觉。阅读“数据库规范化”以获得一些背景知识。

One little bit of advice: Don't use columns named simply "id". Name columns the same in every table. For example, use patients.patient_id, visits.patient_id, and so forth. This is because there are a bunch of automated software engineering tools that help you understand the relationships in your database. If your ID columns are named consistently these tools work better.

So, here's an example about how to do the steps numbered 2 and 3 in your question with a single JOIN query.

```
 SELECT p.patient_id p.name, v.visit_id, rx.drug_name, rx.drug_dose
            FROM patients     AS p
       LEFT JOIN visits       AS v    ON p.patient_id = v.patient_id
       LEFT JOIN prescription AS rx   ON v.visit_id = rx.visit_id
           WHERE p.patient_id = '100'
        ORDER BY p.patient_id, v.visit_id, rx.prescription_id 
```

Like all SQL queries, this returns a virtual table of rows and columns. In this case each row of your virtual table has patient, visit, and drug data. I used `LEFT JOIN` in this example. That means that a patient with no visits will have a row with NULL data in it. If you specify `JOIN` MySQL will omit those patients from the virtual table.

# javascript - 如何在javascript中比较两个日期（MonthName YearNumber）

> ID：13659889
> 
> 赞同：0
> 
> 时间：2012-12-01T13:27:06.683
> 
> 标签：javascript, internet-explorer, firefox, date

此功能在 Chrome 中运行良好......但不是 IE 或 FF。

我正在尝试验证两个采用 MonthName YearNumber 值的字段（请参见屏幕截图）。

[![形式](../Images/2f9eed673368b73e6032bfc52c7527c2.png)](https://i.stack.imgur.com/eXqYx.gif)

我`Date.parse()`用来获取毫秒，然后比较 if `Start Date`<= `End Date`。

```
function IsStartEndDtError(StartDt, EndDt) {
    //convert dates to miliseconds to compare if one is greater than other
    var StartDtMili = Date.parse(StartDt);
    var EndDtMili = Date.parse(EndDt);

    if (StartDtMili <= EndDtMili) {
        return false;
    }
    else {
        return true;
    }
} 
```

Firebug 中出现的内容：

[![表格2](../Images/2c1deeab22964a35b4728c555e6df970.png)](https://i.stack.imgur.com/z7ATP.gif)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T13:30:25.833

由于您的日期格式不受普遍支持，您可以尝试使用[Date.js 之](http://www.datejs.com/)类的库：

```
Date.parse("November 2012")
// returns: Thu Nov 01 2012 00:00:00 GMT+0000 (GMT) 
```

如果您不想要另一个库，您可以手动将月份名称替换为数字并创建一个新的日期字符串。

[如果您查看规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)中的“第 15.9.1.15 节日期时间字符串格式”，Ecmascript 似乎不支持完整的月份名称。

在火狐中：

```
new Date("November 2012")
// Invalid Date
new Date("2012-11")
// Thu Nov 01 2012 00:00:00 GMT+0000 (GMT) 
```

第二种日期格式应该跨浏览器标准化，第一种不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T13:31:35.917

`11 1999`,`November 1999`不是可解析的格式。您要么需要使用更灵活的输入格式的日期库，要么处理您的输入并识别其中的部分：

```
function IsStartEndDtError(StartDt, EndDt) {

    var months = {
        January: 0,
        February: 1,
        ...
    };

    //convert dates to miliseconds to compare if one is greater than other

    var StartDtMili = (new Date(StartDt.split(" ")[1], month[StartDt.split(" ")[0]])).getTime();
    var EndDtMili = (new Date(EndDt.split(" ")[1], month[EndDt.split(" ")[0]])).getTime();

    if (StartDtMili <= EndDtMili) {
        return false;
    }
    else {
        return true;
    }
} 
```

# iphone - Xcode 分析说“对象的潜在泄漏”

> ID：13659890
> 
> 赞同：1
> 
> 时间：2012-12-01T13:27:17.917
> 
> 标签：iphone, ios

我是初学者，在 Xcode 上运行“分析”后，我在这里发现了这个警告：

```
IphoneFeatureImageDetailViewController *img = [[IphoneFeatureImageDetailViewController alloc] initWithNibName:@"IphoneFeatureImageDetailViewController" bundle:nil];    
img.imagesArray = [heroArray copy];
img.index = imgButton.tag; // AT THIS LINE IT SAYS POTENTIAL MEMORY LEAK
[self.navigationController pushViewController:img animated:YES];
[img release]; 
```

请指出我正确的方向！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-01T13:38:47.807

**分析命令通常会在问题之后**标记该行，因为这是代码中它知道发生泄漏的点。在你的情况下，它可能`imagesArray`是它正在报告的。如果这是一个`retain`属性，那么将有一个保留用于`copy`分配，另一个用于分配，这比需要的要多。

我猜测...

```
img.imagesArray = [[heroArray copy] autorelease]; 
```

...会清除它。或者你可以切换到 ARC，整个问题就会消失。:)

# android - 使用 ffmpeg 混合音频和视频

> ID：13659893
> 
> 赞同：4
> 
> 时间：2012-12-01T13:27:39.630
> 
> 标签：android, audio, video, ffmpeg

我有一个 mp4 视频（没有音频），我想使用 ffmpeg 添加音乐，并且还希望输出视频与输入视频的长度相同。

但是，结果，我得到了一个与音频合并的视频，但在黑屏开始时会花费更多时间（大约 1-2 秒）。

我正在使用以下命令来获得所需的输出。

```
ffmpeg -i audio.mp3 -i video.avi -acodec copy -vcodec copy output.avi 
```

请建议，我应该做哪些修改以获得我想要的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T15:23:36.243

-itsoffset 是您正在寻找的选项。它会为你做抵消。

# facebook - Facebook 地方喜欢

> ID：13659894
> 
> 赞同：0
> 
> 时间：2012-12-01T13:27:49.003
> 
> 标签：facebook, facebook-fql

我似乎无法找到如何通过 fql 获得像 count 这样的 facebook 位置页面，有人知道如何实现吗？我知道这可以用 graph-api 完成，但我需要在 fql 中使用它，因为我已经有一个多 fql 查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T21:57:29.087

从[文档](https://developers.facebook.com/docs/reference/fql/page)中：

有一个名为的参数`fan_count`包含喜欢该页面的人数。

# android - Android Chrome 中的 HTML 5 离线缓存

> ID：13659896
> 
> 赞同：1
> 
> 时间：2012-12-01T13:28:29.290
> 
> 标签：android, html, google-chrome, manifest, offline

我有一个在桌面 Chrome 浏览器、iPhone 和 iPad 浏览器以及 android 内置浏览器上运行良好的 Web 应用程序。

但是，当我尝试在新的 Android 版 Chrome 上运行它时，它不起作用。我发现清单文件甚至没有被查询（下载）。对文件的请求永远不会被触发。至少它永远不会到达 Web 服务器。

有人知道，Android 上的 Chrome 是否支持此功能（离线缓存）？还是有其他可能为什么它不起作用？

编辑：主索引 HTML 的前三行，这是应用程序中唯一的 HTML。

```
<!DOCTYPE HTML>
<html manifest="resources/advanced/common/cache/application.appcache">
<head> 
```

编辑2：

最奇怪的是，它刚刚开始工作。今天我坐下来尝试进一步测试这个问题。出乎意料的是，我的 Web 服务器完全没有任何变化，开始接收对清单文件的请求。突然之间，该应用程序就可以正常工作了。现在说说怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:59:39.833

根据这里 Chrome for Android 确实支持应用程序缓存：[http ://html5test.com/compare/browser/chromemobile.html](http://html5test.com/compare/browser/chromemobile.html)

您确定 HTML 语法正确并且您在服务器上为清单文件设置了正确的 MIME 类型吗？报告发生的任何错误可能有助于指出问题。

# python - 当我在 Django 中运行完整的测试套件时，我收到有关缺少 MessageMiddleware 的错误

> ID：13659898
> 
> 赞同：6
> 
> 时间：2012-12-01T13:28:40.837
> 
> 标签：python, django, testing, python-2.7, python-unittest

我的应用程序称为 abcapp。我在 Python 2.7 上运行 Django 1.5b1。同样的问题发生在 django 的最新主干版本中。

当我运行`manage.py test abcapp`我编写的所有测试通过时。

当我跑步时，`manage.py test`我会遇到一连串的失败。这些故障中的第一个如下所示：

```
Traceback (most recent call last):
  File "C:\Program Files\Django-1.5b1\django\core\handlers\base.py", line 116, in get_response
    response = callback(request, *callback_args, **callback_kwargs)
  File "C:\Program Files\Django-1.5b1\django\views\decorators\cache.py", line 89, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "C:\Program Files\Django-1.5b1\django\contrib\messages\tests\urls.py", line 30, in add
    getattr(messages, message_type)(request, msg)
  File "C:\Program Files\Django-1.5b1\django\contrib\messages\api.py", line 70, in debug
    fail_silently=fail_silently)
  File "C:\Program Files\Django-1.5b1\django\contrib\messages\api.py", line 22, in add_message
    raise MessageFailure('You cannot add messages without installing '
MessageFailure: You cannot add messages without installing django.contrib.messages.middleware.MessageMiddleware 
```

测试结果如下：

```
======================================================================
FAIL: test_clearsessions_command (django.contrib.sessions.tests.FileSessionTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Program Files\Django-1.5b1\django\test\utils.py", line 213, in inner
    return test_func(*args, **kwargs)
  File "C:\Program Files\Django-1.5b1\django\contrib\sessions\tests.py", line 444, in test_clearsessions_command
    self.assertEqual(1, count_sessions())
AssertionError: 1 != 2

----------------------------------------------------------------------
Ran 474 tests in 5.768s

FAILED (failures=1, skipped=141, expected failures=1) 
```

与消息相反，`django.contrib.messages.middleware.MessageMiddleware`我的`MIDDLEWARE_CLASSES`. my 的值`MIDDLEWARE_CLASSES`如下。我在我的应用程序中使用消息没有任何问题。

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'debug_toolbar.middleware.DebugToolbarMiddleware',
) 
```

任何人都可以对这个问题有所了解吗？虽然我只能运行自己的测试，但我想运行整个套件以确保适当的质量控制。

研究结果：我通过自己的测试注意到，在使用测试http Client时，没有加载任何中间件。当我尝试通过测试客户端中的 Web 请求测试我自己的中间件时，我发现了这一点。如果是这样，这是否意味着 djanog 核心中有不可测试的代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T11:19:23.697

好像是windows版本的bug。

这是[基于文件的会话不在 Windows 上存储任何数据](https://code.djangoproject.com/ticket/9084)的问题。推荐的解决方法：只需替换`os.rename`为`shutil.move`in `django/contrib/sessions/backends/file.py`：

```
+import shutil

....

 -os.rename(output_file_name, session_file_name)

 +shutil.move(output_file_name, session_file_name) 
```

[原始补丁](https://github.com/django/django/commit/b9cc61021a0db1e5b41e61d3e53180e4fc618f9c)

# django - django 学位标志

> ID：13659907
> 
> 赞同：1
> 
> 时间：2012-12-01T13:29:44.817
> 
> 标签：django, django-templates

我正在尝试将学位标志放入传递给模板的字符串中。我试过°当然逃脱了。然后我尝试使用 \u00b0 和 \xb0 像这样：

```
def __str__(self):
    return u"%s (%s \xb0C to %s \xb0C)" % \
        (self.name, self.min_deg_c, self.max_deg_c) 
```

这两种情况都导致：

```
'ascii' codec can't encode character u'\xb0' in position 14: ordinal not in range(128) 
```

理想情况下，django 会在转义时将 \xb0 变成°。我该怎么做才能得到这个结果？我不想关闭转义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T13:39:20.410

您不能从`__str__`方法返回 unicode（假设您使用的是 Python 2.x）。您应该使用该`__unicode__`方法。

# vb.net - 时间跨度出错

> ID：13659912
> 
> 赞同：0
> 
> 时间：2012-12-01T13:30:45.087
> 
> 标签：vb.net, time, timer, counter, timespan

我想添加一个标签，像普通时钟一样打印经过的时间（当秒数达到“59”时，然后在计数器中添加“1”分钟），但是当秒数达到“30”时，我的时间跨度会添加分钟......我做错了什么？

```
 Dim ElapsedTime As TimeSpan

 While log_button.Text = "Stop logger"
            ElapsedTime = Now().Subtract(StartTime)
            Label5.Text = String.Format("Minutos transcurridos: {0:00}:{1:00}", CInt(ElapsedTime.TotalMinutes) Mod 60, CInt(ElapsedTime.TotalSeconds) Mod 60)
            Application.DoEvents()
 End While 
```

我得到这样的错误增量：

![在此处输入图像描述](../Images/a8a8b4be1098a12ed45e07b8035fd5dd.png)

![在此处输入图像描述](../Images/76f99875aff12f8d2405c1b759df1ef4.png)

00:01

...

00:28

00:29

00:30

01:31

01:32

ETC...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T13:38:59.007

那是因为您正在四舍五入代表总分钟数的浮点数。当数字达到`0.5`时，它将四舍五入为 1。

使用`Floor`截断数字的方法：

```
CInt(Math.Floor(ElapsedTime.TotalMinutes)) Mod 60 
```

您还可以使用该`Minutes`属性，它可以完成所有这些：

```
ElapsedTime.Minutes 
```

# php - Doctrine2 插入 NULL 值错误

> ID：13659913
> 
> 赞同：0
> 
> 时间：2012-12-01T13:30:48.583
> 
> 标签：php, doctrine-orm

您好，我在插入空值时遇到问题。

如果我像这样在 phpmyadmin 中测试效果很好： INSERT INTO `all`( `id`, `album_id`, `album_picture_id`, `style_id`, `style_picture_id`) VALUES ('',175,null,null,null)

但是当我使用 Doctrine2 插入时：

```
    $getAlbum = $this->doctrine->em->getRepository('models\Album')->findOneBy(array('id'=>175));
            $all = 新机型\全部；
            $all->setAlbumPicture(NULL);
            $all->setAlbum($getAlbum);

            $all->setStyle(NULL);
            $all->setStylePicture(NULL);
            $this->doctrine->em->persist($all);
            $this->doctrine->em->flush();

```

我收到此错误：[Sat Dec 01 14:24:36 2012] [error] [client 84.255.196.168] PHP Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 /home/hosting/easydrobe.com/data 中的 'all (album_id, album_picture_id, style_id, style_picture_id) VALUES (175, NULL, ' at line 1' 附近使用正确的语法/application/libraries/Doctrine/DBAL/Statement.php:131\n堆栈跟踪：\n#0 /home/hosting/easydrobe.com/data/application/libraries/Doctrine/DBAL/Statement.php(131)：PDOStatement- >execute(NULL)\n#1 /home/hosting/easydrobe.com/data/application/libraries/Doctrine/ORM/Persisters/BasicEntityPersister.php(239): Doctrine\DBAL\Statement->execute()\n# 2 /home/hosting/easydrobe。

我的模型： http: [//pastebin.com/vgq4eWky](http://pastebin.com/vgq4eWky)

有任何想法吗？感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:15:59.393

`All`是保留关键字。您应该在实体定义中引用它，例如：

```
/**
 * @ORM\Table(name="`all`")
 * @ORM\Entity()
 */
class All
{
    // ... etc ...
} 
```

# binding - Clojure 中函数的动态绑定

> ID：13659918
> 
> 赞同：0
> 
> 时间：2012-12-01T13:31:22.500
> 
> 标签：binding, clojure

我有一个算法，它在工作期间使用了一堆不同的函数或步骤。我想用绑定到这些步骤的不同可能函数来运行算法。本质上，我想准备一些值集（应该将哪个特定函数绑定到这个特定步骤）并使用这些值中的每一个来运行我的算法。并与输入集一起捕获每次运行的结果。

像这样的东西：

```
(binding [step1 f1
          step2 f2]
(do-my-job))

(binding [step1 f11
          step2 f22]
(do-my-job)) 
```

但使用动态绑定表达式。

我有哪些选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T19:59:45.977

因此，您正在尝试执行参数扫描之类的操作？

我不明白为什么需要进行动态绑定。您的算法是根据一流的函数调用定义的。只需将函数作为参数传递给您的算法。

要尝试所有值，只需生成值的排列，然后在此列表上运行 map。您将从中获得所有结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:20:42.653

因为绑定是一个宏，所以您需要编写一个生成动态绑定表单的宏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T21:09:08.517

好吧，看来我的工作方式如下：

```
(def conditions [[`step1 f1 `step2 f2] [`step1 f11 `step2 f22]])

(map #(eval `(binding ~% body)) conditions) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T23:29:45.500

因此，我已经对此进行了测试，据我所知，这一切都可以正常工作。

在下面的示例中，我创建了一个 var，然后将此 var 重新绑定到一个函数。正如你所看到的，对函数的调用发生在绑定形式的词法范围之外，所以我们在这里有动态绑定。

```
(def
  ^{:dynamic true}
  *bnd-fn*
  nil
  )

(defn fn1 []
  (println "fn1"))

(defn fn2 []
  (println "fn2"))

(defn callfn []
  (*bnd-fn*))

;; crash with NPE
(callfn)

;; prints fn1
(binding [*bnd-fn* fn1]
  (callfn))

;; prints fn2
(binding [*bnd-fn* fn2]
  (callfn)) 
```

我一直在为我自己的库使用类似的方法（如果您有兴趣，请使用 Clojure-owl！），尽管在我的情况下，我动态重新绑定的东西是 Java 对象。

在这种情况下，虽然我允许动态重新绑定，但在大多数情况下我不允许；我只是为不同的名称空间使用不同的 java 对象。这对我很有效。

在回复您的评论时，如果您想拥有一个单一的绑定表单，那么这很容易实现。添加以下代码。

```
(defn dobinding [fn]
  (binding [*bnd-fn* fn]
    (callfn)))

(dorun
 (map dobinding
             [fn1 fn2])) 
```

函数 dobinding 运行所有其他函数。然后我用一张地图评估这个（和 dorun 或者你得到一个惰性序列）。这为每个步骤运行两个函数。显然，您需要传入一个列表列表。如果您愿意，您应该能够并行化整个批次。

这比尝试拼接整个向量要容易得多。绑定表单中的值被评估，因此它可以是您喜欢的任何值。

# c# - 如何为垂直移动的简单形状设置动画？

> ID：13659919
> 
> 赞同：1
> 
> 时间：2012-12-01T13:31:33.620
> 
> 标签：c#, winforms, animation, timer

所以，我有一个矩形“rectangle1”，位于 160,160。

我希望它**平稳地**移动到坐标 160,30，持续时间约为 1 秒。（时间延迟）

我发现移动形状的一些基本代码是

```
rectangle1.Location = new Point(160,30); 
```

但是，当我尝试使用 for 循环时

```
rectangle1.Location = new Point(160, rectangle1.Location.Y - 100); 
```

它只是立即移到那里。我真的应该预料到的。同样发生在

```
int count = 0;
while(count != 300)
{
       rectangle1.Location = new Point(160, rectangle1.Location.Y -1);
       count += 2;
} 
```

所以，我假设我需要某种时钟/定时器循环，将它移动`x pixels every x milliseconds`. 不知道如何做到这一点，所以帮助将不胜感激。

* * *

另外，我将在水平方向上为另外两个矩形设置动画，然后它们将以与矩形 1 相同的时间/速度向上移动。我想我必须“延迟”rectangle1 的移动，直到它们就位，对吗？

谢谢。

PS：我在谷歌上搜索了很多，但由于我不完全确定我在寻找什么，所以效果不是很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T13:54:47.510

如果你需要流畅的动作，最好使用计时器、线程、后台工作者。

这是您需要做的。假设您有为形状增加/减少 x,y 点的代码。

脚步：

*   将计时器间隔设置为例如 100

*   设置一个整数 int count=0; *

*   在 timer_tick 事件中做移动工作

    ```
     private void timer1_Tick(object sender, EventArgs e)
     // no need to use your while loop anymore :))
      {       
       If(count< 300) //set to your own criteria
       {
         //e.g. myrect.location=new point(x,y);
         // rectangle1.Location = new Point(160, rectangle1.Location.Y -1);       
       }

        count += 2;
    } 
    ```

# python - Matplotlib 矩阵/图像显式声明轴值

> ID：13659921
> 
> 赞同：2
> 
> 时间：2012-12-01T13:31:39.323
> 
> 标签：python, numpy, matplotlib

我会为此使用 imshow，所以我会用它来描述我的问题。我有几个矩阵，我想在同一轴上绘制。像这样的东西：

```
import matplotlib.pyplot as plt
import numpy as np

a = np.array([[0,1,2],[0,1,2]])
x = np.array([0,1,2])
y = np.array([0,1])

a2 = np.array([[10,11,12],[10,11,12]])
x2 = np.array([10,11,12])
y2 = np.array([0,1])

plt.imshow(a,extent=[x.min(),x.max(),y.min(),y.max()])
plt.imshow(a2,extent=[x2.min(),x2.max(),y2.min(),y2.max()])

plt.show() 
```

（使用此代码，第一个 imshow 被第二个覆盖）

我不能将它们组合成具有一组 x 和 y 轴的单个矩阵（通过用零填充间隙）的原因是组合矩阵会很大并且条带之间有很大的空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T15:24:39.187

它不会被覆盖，轴限制每次都会重置为最后一张图像的范围。

只要打电话`plt.autoscale()`。

作为您所看到的一个简单示例：

```
import numpy as np
import matplotlib.pyplot as plt

data1, data2 = np.random.random((2,10,10))

fig, ax = plt.subplots()
ax.imshow(data1, extent=[-10, 0, -10, 0])
ax.imshow(data2, extent=[10, 20, 10, 20])

plt.show() 
```

![在此处输入图像描述](../Images/f09b43859dae33ecde2df2e5874a864a.png)

现在，如果我们只是调用`autoscale`：

```
import numpy as np
import matplotlib.pyplot as plt

data1, data2 = np.random.random((2,10,10))

fig, ax = plt.subplots()
ax.imshow(data1, extent=[-10, 0, -10, 0])
ax.imshow(data2, extent=[10, 20, 10, 20])

ax.autoscale()

plt.show() 
```

![在此处输入图像描述](../Images/a61f2360212a92aa3cc4b50ee7cd83ee.png)

# java - 在android中添加两个字节数组

> ID：13659922
> 
> 赞同：0
> 
> 时间：2012-12-01T13:31:58.220
> 
> 标签：java, android, bytearray, byte

我想将表示图像的两个字节数组（因此它们的大小相同）组合成第三个字节数组，该数组将是两个起始图像的平均值。这是我目前正在尝试的代码：

```
 byte[] facemash = new byte[data1.length];

        for (int i=0; i < data1.length; ++i){
            facemash[i] = ((data1[i]/2)+(data2[i]/2));
        } 
```

我在 Eclipse 中得到的是一个错误，告诉我“类型不匹配：无法从 int 转换为字节。” 谁能看到我要去哪里错了？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:34:32.423

java 在算术运算中将字节转换为整数。只需将结果转换为 (byte)，因为您知道它不会溢出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T13:35:10.323

```
facemash[i] = (byte)((data1[i]/2)+(data2[i]/2)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T16:17:17.713

尝试：

```
facemash[i] = (byte)((byte)(data1[i]/2)+(byte)(data2[i]/2)); 
```

# joomla - 如何删除文章信息（Joomla 3.0）？

> ID：13659924
> 
> 赞同：-1
> 
> 时间：2012-12-01T13:32:05.053
> 
> 标签：joomla, joomla-article

作为问题的标题，我想删除 Joomla 文章中的所有信息（例如：作者，创建日期，打印图标，...）。当我创建文章时，它将显示 default 。我试图隐藏它，但它只隐藏，Joomla 仍然创建 info 的空标签。在这里，您可以看到： ![在此处输入图像描述](../Images/be9b0cd58e0d3e0fbe7c1c9f503ede39.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:41:56.757

请避免自定义核心 Joomla 文件，如文章或其他。如果您想使用模板覆盖方法更改或自定义文章默认文件（如您所说的文章信息）。有关详细信息，请访问以下链接：

[如何覆盖 Joomla 的输出！核](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)

# perl - 将日志文件数据导入应用程序

> ID：13659928
> 
> 赞同：0
> 
> 时间：2012-12-01T13:32:38.517
> 
> 标签：perl, data-import

我的数据文件： votes.txt 由与以下内容相同的行组成：

```
VOTE 1168241980 Campaign:ssss_uk_01B Validity:during 
Choice:Tupele CONN:MIG00VU MSISDN:00088866655598 
GUID:A34-FDS87-FHDHDH-DHDHDHD0 Shortcode:63334 
```

每个条目用空格分隔。我目前有 19 行的样本。

领域：

```
CONN:MIG00VU MSISDN:00088866655598 
GUID:A34-FDS87-FHDHDH-DHDHDHD0 Shortcode:63334 
```

没有用于此练习。

```
#!/usr/bin/perl 

use warnings;
use strict;
use Switch;
use DBI();

#
# _voting.pl
#

# Connect to the database.
my $dbh = DBI->connect("DBI:mysql:database=sms_voting;host=localhost",
                    "sisisi", "*********",
                    {'RaiseError' => 1});

my $sth = $dbh->prepare("INSERT INTO voting 
(epoch, validity, choice, campaigns_id, candidates_id ) VALUES (?,?,?,?,?)");

open (LOGFILE, '/var/www/voting/votes.txt') or die("Could not open log file.");

my $errors = 0;
my $campaign_id = 0;
my $candidate_id = 0;

foreach my $line (<LOGFILE>) {  

    my ($vote, $epoch, $campaign, $validity, 
 $choice, $CONN, $MSISDN, $GUID, $Shortcode) = split(' ', $line);

# parse the field:value entries...
$campaign = substr $campaign, 8, 11, '';
$validity = substr $validity, 9, 6, ''; # during
$choice = substr $choice, 7, 10, ''; # Brown

# case statements to define correct foreign keys...
 switch ($campaign) {
        case ("ssss_uk_01B")    { $campaign_id = 1 } 
        case ("ssss_uk_01C")    { $campaign_id = 2 } 
        case ("ssss_uk_01D")    { $campaign_id = 3 } 
        case ("ssss_uk_01E")    { $campaign_id = 4 } 
        case ("ssss_uk_01F")    { $campaign_id = 5 } 
        case ("ssss_uk_01G")    { $campaign_id = 6 } 
}

switch ($choice) {
        case ("Brown")      { $candidate_id = 1 } 
        case ("Cameron")    { $candidate_id = 2 } 
        case ("Balls")      { $candidate_id = 3 } 
        case ("Green")      { $candidate_id = 4 } 
        case ("Boring")     { $candidate_id = 5 } 
        case ("Tupele")     { $candidate_id = 6 } 
}

if ($epoch && $validity && $choice && $campaign_id && $candidate_id ) {

    $sth->execute($epoch, $validity, $choice, $campaign_id, $candidate_id);
    # debug
    print "$epoch $validity $choice \n"; # 1161048980 during Green
    next;
} 

$errors++;
 }

close (LOGFILE);

# debug
print qq(errors=$errors\n); 
```

对于 foreach 的每个循环，$campaign 和 $choice 变量都通过 switch 语句运行，以定义候选 ID 和活动 ID 数字。这些外键将分别映射到候选人和竞选表。

有关数据库模型，请参见：[http ://acookson.org/wp-content/themes/cookie_23112012/img/sms_voting.png。](http://acookson.org/wp-content/themes/cookie_23112012/img/sms_voting.png)

IE

```
INSERT INTO voting (epoch, validity, choice, campaigns_id, candidates_id ) 
VALUES (1161048980,'during','Brown', 1, 1),
(1161048980,'during','Tupele', 3, 5), ... etc 
```

在 votes.txt 中检测到的任何空值都会导致 $errors 变量增加。

该脚本似乎成功循环通过 votes.txt 但未能初始化：$campaign_id 和 $candidate_id 变量。完成后，errors=19 被打印到终端；我的样本数据 votes.txt 中的总行数；这意味着该文件中的每一行都未能插入到数据库中。

```
mysql> select * from voting;
Empty set (0.00 sec) 
```

证实了这一点。

该脚本没有报告语法错误；因此它的级别更低。没有开关就可以正常工作；因此，这在一定程度上缩小了范围。但是我看不到开关的问题，所以在这里寻求建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:16:04.567

不确定您的问题是什么，但这里有一些关于您的 Switch 语句和其他代码的指针。

据我所知，该`use Switch`功能/模块已在 perl v5.10.1 中替换为该[`given/when`](http://perldoc.perl.org/perlsyn.html#Switch-Statements)功能，现在已弃用。就个人而言，我一直觉得这些陈述有点奇怪和不可靠。并且无论如何都不是不可替代的，因为 perl 是一种如此灵活的语言。

在您的情况下，我会建议使用哈希查找：

```
my %camp = ("ssss_uk_01B" => 1,
            "ssss_uk_01C" => 2,
            ...);
my %cand = ("Brown"       => 1,
            "Cameron"     => 2,
            ...);

$campaign_id  = $camp{$campaign};
$candidate_id = $cand{$choice} 
```

如果需要提供默认值，可以使用[`defined-or`](http://perldoc.perl.org/perlop.html#Logical-Defined-Or)赋值运算符：

```
$campaign_id //= "default value here"; 
```

你的`substr`作业有点错误。首先，您使用所有四个参数，在 perldoc 中是这样描述的：

```
substr EXPR,OFFSET,LENGTH,REPLACEMENT 
```

这意味着您将匹配项替换`''`为空字符串。这会影响变量本身，并且会删除您想要的数据（如果单独保留）。您的情况也不需要长度，因为它是您所追求的字符串的结尾。最后，您因使用`substr`语句的返回值而得救。

最后，当我尝试你的作业时，我在你的第一个作业中遇到了一次性错误（`$campaign`）。输出是`:ssss_uk_01`，并且您期望`ssss_uk_01`。

要`substr`正确使用该功能，您应该使用：

```
$campaign = substr $campaign, 9;
$validity = substr $validity, 9;
$choice   = substr $choice, 7; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:52:48.400

我同意 TLP 关于将哈希用于查找表的建议。但在实际应用程序中，这些查找表应该使用数据库查找来填充，以避免在其他表中的数据发生更改时需要更改应用程序。

我也倾向于不太信任日志中数据的格式。使用 split 减少了知道标签+冒号大小的确切长度的需要。沿着这条线，我还建议在将数据用作查找哈希中的键之前对其进行规范化。在此示例中，我只是将其全部设为小写。

当您使用警告时，您不妨使用警告功能来发现错误情况。在实际应用程序中，您可能会在电子邮件警报系统中点击警告，这样您就可以随时知道无人值守的软件何时出现问题。

在进行文件操作时，or+die 习惯用法是一种极好的做法。但是，如果您包含 $OS_ERROR（又名 $!），即使是用于打印，当这些死亡发生时它会提供更多信息。通过这种方式，您将知道权限被拒绝、不存在或磁盘已满等之间的区别。

这些建议涉及编写可维护和有弹性的程序的问题。但我个人认为代码的美感也有助于可维护性。当您在一两年后打开此程序以进行改进或修复错误时，有意义的命名约定和代码格式会产生很大的不同。我更喜欢创建没有不必要混乱的代码，例如说明显而易见的注释或使用注释来删除代码块。

保持良好的工作。世界需要更多的软件自动化。

```
#!/usr/bin/perl

use strict;
use warnings;
use DBI;

#
# _voting.pl
#
my $logfile = '/var/www/voting/votes.txt';

my $errors = 0;

my %campaign_id_for = (
    'ssss_uk_01b' => 1,
    'ssss_uk_01c' => 2,
    'ssss_uk_01d' => 3,
    'ssss_uk_01e' => 4,
    'ssss_uk_01f' => 5,
    'ssss_uk_01g' => 6,
);

my %candidate_id_for = (
    'brown'   => 1,
    'cameron' => 2,
    'balls'   => 3,
    'green'   => 4,
    'boring'  => 5,
    'tupele'  => 6,
);

my $dbh = DBI->connect( 
    'DBI:mysql:database=sms_voting;host=localhost',
    'sisisi', 
    '*********', 
    { 'RaiseError' => 1 } 
);

my $sth = $dbh->prepare(q{
    INSERT INTO voting (
        epoch,
        validity,
        choice,
        campaigns_id,
        candidates_id
    ) VALUES (
        ?,
        ?,
        ?,
        ?,
        ?
    )
});

my $fh;

open $fh, '<', $logfile
    or die "open $logfile: $!";

LINE:
for my $line (<$fh>) {

    my ($vote, $epoch,  $campaign, $validity, $choice,
        $CONN, $MSISDN, $GUID,     $Shortcode
    ) = split /\s+/, $line;

    ($campaign) = reverse split /:/, $campaign;
    ($validity) = reverse split /:/, $validity;
    ($choice)   = reverse split /:/, $choice;

    my $campaign_id  = $campaign_id_for{ lc $campaign };
    my $candidate_id = $candidate_id_for{ lc $choice };

    if ( $epoch && $validity && $choice && $campaign_id && $candidate_id ) {

        $sth->execute(
            $epoch,
            $validity,
            $choice,
            $campaign_id,
            $candidate_id
        );

        print "$epoch $validity $choice\n"
            or die "print: $!";

        next LINE;
    }
    else {

        warn "failed to parse: $line\n";
        $errors++;
    }
}

close $fh
    or die "close $logfile: $!";

# debug
print "error count: $errors\n"
    or die "print: $!"; 
```

# python - 将 ImageField 的图像用于另一个 ImageField。姜戈

> ID：13659934
> 
> 赞同：0
> 
> 时间：2012-12-01T13:33:34.013
> 
> 标签：python, django, django-models, django-facebook

我正在使用 django_facebook。每次用户在 fb 注册时，她的个人资料都会加载到一个名为“image”的字段中

在我的 models.py 中，我有一个名为 profilpic 的字段，允许用户拥有个人资料图片：

```
 class UserProfile(FacebookProfileModel):
            user = models.OneToOneField(User)
            profilpic = models.ImageField(upload_to="profilepics/", default="profilepics/shadow_user.jpg")

        def create_facebook_profile(sender, instance, created, **kwargs):
             if not created:
                return
             UserProfile.objects.create(user=instance)

        post_save.connect(create_facebook_profile, sender=User) 
```

我想做的是当用户在 facebook 上注册时，'profilpic' 采用'image' 的值（即 profilpic 成为 facebook 图片）。

这是我尝试过的：

```
 def create_facebook_profile(sender, instance, created, **kwargs):
             if not created:
                return
             UserProfile.objects.create(user=instance)
             instance.userprofile.profilpic = instance.userprofile.image
             instance.save()

        post_save.connect(create_facebook_profile, sender=User) 
```

但它不起作用。关于如何做到这一点的任何想法？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T16:16:08.323

您在错误的实例上调用 save 方法。如果你说 instance.save() 它只会调用它的保存方法而不是用户配置文件保存方法。

```
def create_facebook_profile(sender, instance, created, **kwargs):
             if not created:
                return
             UserProfile.objects.create(user=instance)
             instance.userprofile.profilpic = instance.userprofile.image
             instance.userprofile.save() 
```

# yii - 通过覆盖将更多数据发送到 CWebUser 中的 changeIdentity？

> ID：13659936
> 
> 赞同：0
> 
> 时间：2012-12-01T13:33:45.290
> 
> 标签：yii

免责声明：完全的 Yii 初学者，一些 php 经验。
在 Yii 中，是否可以覆盖`login`CWebUser 的方法？
我想这样做的原因是因为源代码中的注释指出该`changeIdentity`方法可以被子类覆盖，但是因为我想向该方法发送更多参数，所以我也在考虑覆盖该`login`方法（CWebUser）。
另外，如果这不是一个好主意，您如何将额外的参数发送到`changeIdentity`方法中。（通过以某种方式从参数中检索它`$states`？？）。额外的参数是 UserIdentity 类的新定义的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:35:41.170

`components/UserIdentity.php`最好先尝试通过覆盖的身份验证方法来做您想做的事情。事实上，这对于实现比默认演示和管理员登录更高级的任何安全系统都是必要的。

在该方法中，您可以使用

`$this->setState('myVar', 5);`

然后像这样在网络应用程序的任何地方访问它：

`Yii::app()->user->getState('myVar');`

如果`myVar`未定义，该方法将`null`默认返回。否则它将返回它存储的任何内容，在我的示例中为 5。这些值存储在 $_SESSION 变量中，因此只要会话存在，它们就会持续存在。

更新：好的，花时间了解这整个混乱如何在 Yii 中工作以获得另一个答案，所以我也在这里分享我的发现。下面主要是从我刚刚在别处给出的类似答案中复制粘贴的。这被测试为在我的系统上从一个页面到另一个页面的工作和持久性。

您需要扩展 CWebUser 类以实现您想要的结果。

```
class WebUser extends CWebUser{
    protected $_myVar = 'myvar_default';

    public function getMyVar(){
        $myVar = Yii::app()->user->getState('myVar');
        return (null!==$myVar)?$myVar:$this->_myVar;
    }

    public function setMyVar($value){
        Yii::app()->user->setState('myVar', $value);
    }
} 
```

然后，您可以`myVar`使用 分配和调用属性`Yii::app()->user->myVar`。

将上面的类放在`components/WebUser.php`，或者任何它将被加载或自动加载的地方。

更改您的配置文件以使用您的新 WebUser 类，您应该已准备就绪。

```
'components'=>
    'user'=>array(
        'class'=>'WebUser',
    ),
...
), 
```

# typo3 - 在 COA 中使用参数和自定义名称创建错字链接

> ID：13659938
> 
> 赞同：0
> 
> 时间：2012-12-01T13:33:48.727
> 
> 标签：typo3, typoscript, typolink

我想从当前页面创建一个错字链接，但使用其他名称和一些额外的 GET 参数。例如

```
<a href="mytypo3site.com/this-is-the-current-side.html?someParam=1" title="My custom title">My custom name</a> 
```

这是我的代码，它只打印出带有 MyCustomName 的文本。

```
lib.tsfooter >
lib.tsfooter = COA
lib.tsfooter {
  10 = TEXT
  10.value (
   <!-- some HTML code-->
  )

  20 = TEXT
  20.value = MyCustomName
  20.stdWrap.typolink {
    data = TSFE:id
    addQueryString = 1
    addQueryString.method = get
    additionalParams = &myCustomParameter=1
  }
} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T10:07:57.153

```
lib.tsfooter >
lib.tsfooter = COA
lib.tsfooter {
  10 = TEXT
  10.value (
   <!-- some HTML code-->
  )

  20 = TEXT
  20.value = MyCustomName
  # you do not need "stdWrap" as pgampe mentioned, but it will work even with stdWrap
  20.stdWrap.typolink {
    # parameter was missing
    parameter.data = TSFE:id
    addQueryString = 1
    addQueryString.method = get
    additionalParams = &myCustomParameter=1
  }
} 
```

# java - Java 程序不干净地存在。创建僵尸

> ID：13659941
> 
> 赞同：2
> 
> 时间：2012-12-01T13:33:52.457
> 
> 标签：java, windows-7, spring-integration, tcp-ip

设想

我有一个 java 应用程序（使用 Spring Integration 侦听 TCP/IP 端口）。我正在使用一些工作线程和使用 java.util.concurrent.Executors 工厂创建的 ExecuterService。主线程创建工作线程并在如下循环中等待

```
while(!shutdownRequested)
{
    try {
         Thread.sleep(2000);
         } catch (InterruptedException e) {
           e.printStackTrace();
         }
} 
```

我有一个关闭钩子，它会停止执行器服务并在超时时强制关闭。

问题
这个程序在我的机器上没有成功终止（Windows 7）。它留下一个线程在 tcp 端口上侦听，之后该进程变得无法访问。我无法从任务管理器中终止此进程并收到“拒绝访问”错误。

有趣的是，这个问题只发生在我的机器上，不会影响任何其他 Windows 7 机器。在所有其他机器上，控制台中的 Control-C 总是成功地停止程序。

我过去曾遇到过这个问题（使用相同的应用程序），在我重新格式化并重新安装 Windows 后，这个问题神奇地消失了。（我知道这有点过分了！！）

该应用程序运行了好几个月，直到不幸的是我最近因为其他原因不得不再次重新格式化我的电脑。重新格式化后问题又回来了。

这是非常令人沮丧的，因为每次我需要重新启动此应用程序时我都必须重新启动 Windows，因为它无法绑定到 TCP 端口，因为僵尸进程在该端口上 litening。

任何想法我的设置可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:17:21.867

您可能需要[close()](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html#close%28%29)套接字。这将导致套接字抛出 SocketException，从而停止阻塞。

# c# - SQL 注入的 OData 问题

> ID：13659943
> 
> 赞同：9
> 
> 时间：2012-12-01T13:34:14.943
> 
> 标签：c#, asp.net-mvc, linq, ado.net, odata

假设我有一个充满健康记录的数据库和一个 ASP.NET MVC 应用程序。假设有人使用 URL“/api/medicalRecords?$filter=id gt 0”来调用 Ajax 请求。在我看来，它对 SQL 注入是开放的——就像 10 到 15 年前一样......

这是否意味着它按标准对 SQL 注入开放，还是取决于服务器端（我使用 IQueryable 结果和实体框架 4）？

我知道身份验证机制是必要的——但为了这个问题，假设没有可用的身份验证机制......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T13:42:41.087

尝试阅读这篇博文，其中提供了有关 OData 和 SQL 注入的非常详细的信息：

[http://kscottmorrison.com/tag/sql-injection/](http://kscottmorrison.com/tag/sql-injection/)

> ...OData，当然，是数据源连接，所以注入不是问题——只要首先掌握它就足够了。因此，对于 OData 至关重要的是严格管理此连接能够执行的操作……

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-01T13:37:11.973

WCF 数据服务将参数化过滤器中的值，从而消除 SQL 注入的可能性。

我建议查看在数据库探查器中执行的实际 SQL 查询。

# cross-domain - 如何保护敏感信息免受跨站点访问？

> ID：13659945
> 
> 赞同：2
> 
> 时间：2012-12-01T13:34:19.877
> 
> 标签：cross-domain, security, access-control, cross-domain-policy

我的 Web 应用程序向登录用户显示一些敏感信息。用户访问另一个站点而没有先明确退出我的站点。如果不接受我或用户的同意，我如何确保其他站点无法访问敏感信息？

例如，如果我的敏感数据采用 JavaScript 格式，则其他站点可以将其包含在脚本标记中并读取副作用。我可以继续建立一个黑名单，但我不想列举什么是不安全的。我想知道什么是安全的，但我找不到任何文档。

*更新：在我的示例中，来自受害者*站点的 JavaScript是在*攻击者的*站点上执行的，而不是相反，这将是跨站点脚本。

另一个例子是图像，任何其他网站都可以读取宽度和高度，但我不认为他们可以读取内容，但他们可以显示它。

第三个例子是，没有 X-Frame-Options 标头的所有内容都可以加载到 iframe 中，并且可以通过诱骗用户进行拖放或复制和粘贴来窃取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:02:34.680

由于我在这里没有得到我想要的答案，所以我在另一个论坛中询问并得到了答案。它在这里： [https ://groups.google.com/forum/?fromgroups=#!topic/mozilla.dev.security/9U6HTOh-p4g](https://groups.google.com/forum/?fromgroups=#!topic/mozilla.dev.security/9U6HTOh-p4g)

我还发现这个页面回答了我的问题： [http ://code.google.com/p/browsersec/wiki/Part2#Life_outside_same-origin_rules](http://code.google.com/p/browsersec/wiki/Part2#Life_outside_same-origin_rules)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T13:15:48.483

> 例如，如果我的敏感数据采用 JavaScript 格式，则其他站点可以将其包含在脚本标记中

是的！所以不要把它放在 JavaScript/JSONP 格式。

传回 JSON 或 JS 代码的通常修复方法是在前面放置一些不可执行的内容，从而导致语法错误或挂起（`for(;;);`很流行）。因此，将资源包括在内`<script>`不会让攻击者在任何地方。当您从自己的站点访问它时，您可以使用 XMLHttpRequest 获取它并在评估它之前去掉前缀。

（一个不起作用的解决方法是检查`window.location`返回的脚本：当您被包含在攻击者的页面中时，他们可以控制 JavaScript 环境并可能破坏内置对象来做意想不到的事情。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T13:48:42.023

跨站攻击的关键是确保您的用户输入将被显示，是合法的，不包含一些脚本。你可以在一开始就停止它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T18:46:16.320

首先，像 superpdm 状态一样，从头开始设计您的应用程序，以确保敏感信息不首先存储在客户端，或者恶意用户无法理解这些信息。

此外，对于您没有太多控制权的数据项，您可以利用内置的 HTTP 控件（如[HttpOnly](https://www.owasp.org/index.php/HTTPOnly)），它试图确保客户端脚本无法访问会话令牌等 cookie。设置`httpOnly`您的 cookie 将大大有助于确保恶意 vbscript、javascript 等不会读取或修改您的客户端令牌。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T21:06:55.163

我认为我们的网络安全知识世界中仍然存在一些混乱。您害怕**Cross Site Request Forgery**，但仍在描述和寻找**Cross Site Scripting**的解决方案。

**跨站点脚本**是一个允许恶意人员将一些不需要的内容注入您的站点的漏洞。它可能是一些文本，但也可能是一些 JS 代码或 VB 或 Java Applet（我提到小程序是因为它们可以用来绕过`httpOnly`标志提供的保护）。因此，如果您有意识的用户点击恶意链接，他的数据可能会被盗。这取决于呈现给用户的敏感数据量。点击链接不仅是 XSS 攻击的攻击媒介，如果您将其他用户提供的未经过滤的内容呈现给用户，也可能有人注入一些恶意代码并造成一些破坏。他不需要偷别人的饼干来得到他想要的东西。它与在登录到您的应用程序的同时访问其他网站无关。我推荐：[XSS](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)

**Cross Site Request Forgery**是一个允许某人构建特制表单并将其呈现给登录用户的漏洞，用户在提交此表单后可能会在您的应用程序中执行他不打算执行的操作。操作可以是转移、更改密码或添加用户。这就是您担心的威胁，如果用户与您的应用程序保持会话并使用这种通过 JS 自动提交的表单访问站点，则此类请求会通过身份验证并执行操作。并且 httpOnly 不会保护它，因为攻击者不需要访问存储在 cookie 中的 sessionId。我推荐：[CSRF](https://www.owasp.org/index.php/CSRF)

# c++ - 递归的帕斯卡三角

> ID：13659949
> 
> 赞同：3
> 
> 时间：2012-12-01T13:34:54.790
> 
> 标签：c++

**注意：** 我的班主任给了我这个问题作为作业......我没有被要求这样做，但请告诉我如何用递归来做

可以使用帕斯卡三角形计算二项式系数：

```
 1                   n = 0
         1     1
      1     2     1
   1     3     3     1
1     4     6     4     1       n = 4 
```

三角形的每个新级别的两端都有 1；内部数字是它们上面的两个数字的总和。

**任务：**编写一个包含递归函数的程序，以使用帕斯卡三角技术生成幂 n 的二项式系数列表。例如，

输入 =`2`输出 = `1 2 1`

输入 =`4`输出 =`1 4 6 4 1`

到目前为止完成了这个，但告诉我如何用递归来做到这一点......

```
#include<stdio.h>

int main()    
{
  int length,i,j,k;
//Accepting length from user
  printf("Enter the length of pascal's triangle : ");
  scanf("%d",&length);
//Printing the pascal's triangle
  for(i=1;i<=length;i++)
  {
      for(j=1;j<=length-i;j++)      
      printf(" ");
      for(k=1;k<i;k++)
          printf("%d",k);
      for(k=i;k>=1;k--)
          printf("%d",k);
      printf("\n");
  }
  return 0;    
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T20:12:05.893

## 方法一：

最简单的方法是使用二项式系数。使用此方法，您有 1 个递归方法：

```
// Here is your recursive function!
// Ok ok, that's cheating...
unsigned int fact(unsigned int n)
{
    if(n == 0) return 1;
    else return n * fact(n - 1);
}

unsigned int binom(unsigned int n, unsigned k)
{
    // Not very optimized (useless multiplications)
    // But that's not really a problem: the number will overflow
    // way earlier than you will notice any performance problem...
    return fact(n) / (fact(k) * fact(n - k));
}

std::vector<unsigned int> pascal(unsigned n)
{
    std::vector<unsigned int> res;
    for(unsigned int k = 0; k <= n; k++)
        res.push_back(binom(n,k));
    return res;
} 
```

[活生生的例子。](http://ideone.com/8mUPfg)

## 方法二：

此方法使用具有以下公式的构造：

![帕斯卡三角形的二项式](../Images/8838ec16115dc24c0af878e493df9593.png)

在这里，唯一的函数是递归的，一次计算一行，将这些结果存储在一个数组中（为了缓存结果）。

```
std::vector<unsigned int> pascal(unsigned int n)
{
    // This variable is static, to cache results.
    // Not a problem, as long as mathematics do not change between two calls,
    // which is unlikely to happen, hopefully.
    static std::vector<std::vector<unsigned int> > triangle;

    if(triangle.size() <= n)
    {
        // Compute for i = last to n-1
        while(triangle.size() != n)
            pascal(triangle.size());

        // Compute for n
        if(n == 0)
            triangle.push_back(std::vector<unsigned int>(1,1));
        else
        {
            std::vector<unsigned int> result(n + 1, 0);
            for(unsigned int k = 0; k <= n; k++)
            {
                unsigned int l = (k > 0 ? triangle[n - 1][k - 1] : 0);
                unsigned int r = (k < n ? triangle[n - 1][k] : 0);
                result[k] = l + r;
            }
            triangle.push_back(result);
        }
    }

    // Finish
    return triangle[n];
} 
```

[活生生的例子。](http://ideone.com/oE1yR1)

## 其他方法：

还有一些其他奇特的方法，使用三角形的属性。你也可以使用矩阵的方式来生成它：

![来自矩阵指数的帕斯卡三角形](../Images/d15a9ca0acd400e8794e95cd41fab544.png)

没有代码，因为它需要大量的基本代码（矩阵、矩阵的指数等），而且它并不是真正的递归。

*另一方面，我认为这个问题绝对不是教授递归的正确问题。有很多更好的案例。*

# ios - 无法调用 addSubLayer：

> ID：13659952
> 
> 赞同：0
> 
> 时间：2012-12-01T13:35:09.260
> 
> 标签：ios, calayer, quartz-core

我正在尝试向我的视图添加渐变，并将以下内容添加到 drawRect：

```
CAGradientLayer *g = [[CAGradientLayer alloc]init];
g.frame = self.bounds;
g.colors = [NSArray arrayWithObjects:(id)[[UIColor blueColor] CGColor],
            [[UIColor redColor] CGColor], nil];
g.locations = [NSArray arrayWithObjects:[NSNumber numberWithFloat:0.0],
               [NSNumber numberWithFloat:1.0],
                nil];
[self addSubLayer:g]; 
```

我收到警告：没有可见的@interface 声明选择器'addSubLayer:'

虽然我导入了 Quartz Core 框架，因为 CALayer 是其中的一部分（否则我在初始化 CAGradientLayer 时会收到错误消息）。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:29:44.680

我认为该行应该是（注意大写和使用`self.layer`）：

```
[self.layer addSublayer:g]; 
```

[`addSublayer`](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instm/CALayer/addSublayer%3a)是`CALayer`实例方法，而不是`UIView`实例方法。

# arrays - 对具有可以具有 3 个值的对象的数组进行排序

> ID：13659954
> 
> 赞同：1
> 
> 时间：2012-12-01T13:35:14.790
> 
> 标签：arrays, algorithm, sorting, language-agnostic

我们有一个包含对象的数组，每个对象都有一个可以有 3 个值的属性。

现在我们需要使用线性 O(n) 算法和恒定的内存使用对这个数组进行排序。

我们该怎么做呢？

是不是类似于荷兰国旗算法？或者我们可以做计数排序吗？如果我不正确，那么我们还有什么其他方法可以继续？这个问题实际上是在一次采访中向我的一位朋友提出的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T23:25:44.410

这是数组元素的重新排列问题。荷兰国旗算法应该在这里做

```
void partition(int data[], int size, int low, int high) {
  int p = -1;
  int q = size;
  for (int i = 0; i < q;) {
    if (data[i] < low) {
      swap(data[i], data[++p]);
      ++i;
    } else if (data[i] >= high) {
      swap(data[i], data[--q]);
    } else {
      ++i;
    }
  }
} 
```

# database - 如何找到记录oracle的分区

> ID：13659957
> 
> 赞同：7
> 
> 时间：2012-12-01T13:35:20.010
> 
> 标签：database, oracle, plsql, oracle11g, database-partitioning

我有一张桌子，上面有一个分区。

从 SUBSCRIBER_01 .. 等开始有 16 个哈希分区

表名：订阅者

分区列：CUSTOMER_ID (VARCHAR2 10)

数据库：11g

如何找到记录的分区？

喜欢 Customer_ID=933587

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-01T14:47:15.747

选择行的rowid，`DBMS_RowID.RowID_Object()`程序将提取数据对象id。

[http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_rowid.htm#i997153](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_rowid.htm#i997153)

在数据字典中查找该数据对象 ID 并读取 subobject_name。

例如：

```
 SELECT dbms_rowid.rowid_object(ROWID) data_object_id
   FROM INVOICE
   WHERE INVOICE_ID = 2268041139:

   -- data_object_id = 546512

   select * from user_objects where data_object_id = 546512;

   -- SUBOBJECT_NAME = 'PART_P2099_P00'     
   -- OBJECT_TYPE = TABLE PARTITION
   -- OBJECT_ID = 464826
   -- DATA_OBJECT_ID = 546512 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-30T04:13:26.410

您可以使用此脚本：

```
SELECT L.*, O.SUBOBJECT_NAME
FROM 
  (
    SELECT DBMS_ROWID.ROWID_OBJECT(ROWID) DATA_OBJECT_ID, L.*
    FROM YOUR_TABLE L
    --WHERE L.ID = 123
  ) L
  JOIN 
  (
    SELECT SUBOBJECT_NAME, DATA_OBJECT_ID 
    FROM USER_OBJECTS
  ) O ON O.DATA_OBJECT_ID = L.DATA_OBJECT_ID
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T15:35:32.780

我认为您只能找到 cust_id = 123... 分配的分区名称：

```
SELECT partition_name, tablespace_name
 FROM user_tab_partitions
WHERE table_name = your_table; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-10T09:57:07.980

尝试这个，

```
select distinct SUBOBJECT_NAME from user_objects where data_object_id = (SELECT distinct dbms_rowid.rowid_object(ROWID) data_object_id FROM <your table name>   WHERE <your partition key> = <partition key value>and rownum=1) 
```

我在这里使用哈希分区。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-01T13:44:46.860

我找到了答案。

```
 DECLARE
       pi_partition varchar2(50);
       v_sql        varchar2(250);
       i            number;
       sy          number;
    BEGIN
       FOR i IN 1..16
       LOOP
          IF i < 10 THEN
            pi_partition:= 'SUBSCRIBER_0'||i;
          ELSE
            pi_partition:= 'SUBSCRIBER_'||i;
          END IF;

          sy:=0;
          v_sql:= 'select count(*) into :say from subscriber partition('||pi_partition||') where customer_ID='||''''||'933564'||'''';
          --dbms_output.put_line(pi_partition);
          EXECUTE IMMEDIATE v_sql INTO sa;

          IF sy > 0 THEN

            DBMS_OUTPUT.PUT_LINE('Result: ' || sy||pi_partition);
            EXIT;
          END IF;
       END LOOP;
    END; 
```

# javascript - 用户共享的 GEOlocation 不适用于 google 地方

> ID：13659960
> 
> 赞同：3
> 
> 时间：2012-12-01T13:35:59.447
> 
> 标签：javascript, html, geolocation, google-places-api, google-places

我不知道如何在 SO 中搜索这个，所以我问了一个新问题。什么可能导致或我的代码的具体问题是什么：由 Javascript (`createElement()`和`appendChild`) 生成的 HTML 没有在 Opera 和 Firefox 中显示，但它在 Chromium 中有效。

HTML 生成代码：

```
function typesOfPlaces(map, bounds) {
  var allowedTypes = [
    "amusement_park",
    "aquarium",
    "art_gallery",
    "cemetery",
    "church",
    "city_hall",
    "hindu_temple",
    "mosque",
    "museum",
    "night_club",
    "park",
    "place_of_worship",
    "rv_park",
    "spa",
    "synagogue",
    "travel_agency",
    "zoo"
  ];
  var typesToDisplay = new Array();
  var request =  {
    bounds: bounds,
    types: allowedTypes
  };
  var service = new google.maps.places.PlacesService(map);
  service.nearbySearch(request, function(results, status) {
    if(status == google.maps.places.PlacesServiceStatus.OK) {
      for(var i = 0; i < results.length; i++) {
        for(var j = 0; j < results[i].types.length; j++) {
          for(var k = 0; k < allowedTypes.length; k++) {
            if(results[i].types[j] == allowedTypes[k]) {
              var allowed = true;
              for(var x = 0; x < typesToDisplay.length; x++) {
                if(allowedTypes[k]==typesToDisplay[x]) {
                  allowed = false;
                }
              }
              if(allowed) {
                typesToDisplay.push(allowedTypes[k]);
              }
            }
          }
        }
      }
      var parent = document.getElementById("types");
      for(var i = 0; i < typesToDisplay.length; i++) {
        var typeBox = document.createElement("div");
        var checkBox = document.createElement("input");
        var checkID = randomString(10);
        var label = document.createElement("label");
        checkBox.setAttribute("type", "checkbox");
        checkBox.setAttribute("id", checkID);
        label.setAttribute("for", checkID);
        label.innerHTML = typesToDisplay[i];
        typeBox.appendChild(checkBox);
        typeBox.appendChild(label);
        parent.appendChild(typeBox);
      }
    }
  });
}//END OF Function 
```

**更新评论**

randomString 只是用于生成随机字符串的 SO'ed 代码：

```
function randomString(L) {
  var s= '';
  var randomchar=function() {
    var n= Math.floor(Math.random()*62);
    if(n<10) return n; //1-10
    if(n<36) return String.fromCharCode(n+55); //A-Z
    return String.fromCharCode(n+61); //a-z
  }
  while(s.length< L) s+= randomchar();
  return s;
} 
```

div #types 确实存在，它看起来像这样：

```
<html>
  <head>
    ...
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=MyKey&sensor=false&libraries=places&language=lt"></script>
  </head>
  <body>
    <div>
      <div>
        <div id="types"></div>
      </div>
    </div>
  </body>
</html> 
```

通过查看标签`<head>`部分，您可以看到 google.maps.places.PlacesService 的导入，`<script>`您可以在其中看到“&libraries=places”。

**一些测试后的第二次更新**

好的。我发现如果我拒绝在 Opera 中共享位置，它可以工作（它可以在 chromium 中工作，因为默认情况下它甚至不会询问用户是否愿意与网站分享他的地理位置）

地理定位代码：

```
function initGeo()
{
    if (navigator.geolocation)
    {
        navigator.geolocation.getCurrentPosition(successFunction, errorFunction);
    }
    else
    {
        errorFunction();
    }
} 
```

所以，不起作用的功能是successFunction（如果用户好心地分享他的地理位置，它将被启动）

```
function successFunction(position)
{
    var geocoder = new google.maps.Geocoder();
    var abstract_location;
    var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
    geocoder.geocode({'latLng': latlng}, function(results, status) 
    {
        if (status == google.maps.GeocoderStatus.OK) 
        {
            abstract_location = new google.maps.LatLngBounds(
                results[0].geometry.viewport.getSouthWest(), 
                results[0].geometry.viewport.getNorthEast());
        }
        else
        {
            alert("NOT SUCCESS 1");
        }
        showGMap(latlng, abstract_location);
    });
} 
```

还有 errorFunction，如果您拒绝访问您的地理位置，默认情况下可以在 chromium 和 Opera 上成功运行：

```
function errorFunction(error)
{
    var geocoder = new google.maps.Geocoder();
    if(google.loader.ClientLocation)
    {
        var latlng = new google.maps.LatLng(google.loader.ClientLocation.latitude, google.loader.ClientLocation.longitude);
        geocoder.geocode({'latLng': latlng}, function(results, status) 
        {
            if (status == google.maps.GeocoderStatus.OK) 
            {
                var abstract_location = new google.maps.LatLngBounds(
                    results[0].geometry.viewport.getSouthWest(), 
                    results[0].geometry.viewport.getNorthEast());
            }
            else
            {
                alert("NOT SUCCESS 2");
            }
            showGMap(latlng, abstract_location);
        });
    }
    else
    {
        geocoder.geocode( {'address': 'Vilnius Region, Lithuania'}, function(results, status) 
        {
            if (status == google.maps.GeocoderStatus.OK) 
            {
                var latlng = results[0].geometry.location;
                var abstract_location = new google.maps.LatLngBounds(
                    results[0].geometry.viewport.getSouthWest(), 
                    results[0].geometry.viewport.getNorthEast());
                showGMap(latlng, abstract_location);
            }
            else
            {
                alert("NOT SUCCESS 3");
            }
        });
    }
} 
```

也没有 Chromium 和 Opera 没有给我任何错误，也没有 javascript 异常，也没有一般情况。

所以问题出在成功功能上。因为它甚至没有给我 alert(typesToDisplay.length) [正如 Stuart 在评论中建议的那样] - 这意味着根本没有警报 - 如果出现错误函数，我会得到 aswer 4，因此我可以看到我生成的HTML。

在成功功能的情况下，只有空的（没有任何附加的孩子）#types。

我看不出是什么导致成功函数为 NOTSUCCESS (:))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:13:31.423

好的，所以我想通了-虽然很简单...

您获得的地理位置数据是一个地址，因此范围非常小，您必须使用反向地理编码（结果 [6].formatted_address）提取城市，然后对该反向地理编码进行地理编码（通过地理编码 - > 反向 - > 再次混淆地理编码）然后它就可以工作了！

所以问题出在地理编码上（没想到地址范围不是整个城市（一开始就应该很明显，但事实并非如此）。

HTML5 地理编码可能有关于城市的信息（不仅是 lan 和 lng，firefox 有一些东西，但那只是 firefox，而不是整个 HTML5），但我不知道它是否好用（缺乏我个人的知识在这个特定领域的时刻）

因此，如果有人确实遇到类似的事情->**检查界限**；）

**感谢您**的评论和您的观点。

# ios - 构建设置以生成正确的 dSYM

> ID：13659961
> 
> 赞同：1
> 
> 时间：2012-12-01T13:36:03.490
> 
> 标签：ios, crash

我有一个关于 dSYM 的问题。我用我的应用程序做了一个实验，并添加了以下代码：

```
if (currentMenuPage_ == MenuPageAttrsVals) {
    return ((ValueAndId *) [currentValues_ objectAtIndex:-1]).name;
} 
```

正如预期的那样，应用程序崩溃并生成了崩溃日志。

但是 Xcode 和 atos 无法告诉我崩溃的确切位置。

```
2   CoreFoundation                  0x3192c23d -[__NSArrayI objectAtIndex:] + 165
3   MyApp                           0x00053487 0x49000 + 42119
4   MyApp                           0x0005102d 0x49000 + 32813 
```

在构建我的应用程序以生成正确的 dSYM 时，我是否必须设置一些特殊设置？

如果我打电话`dwarfdump --uuid MyApp.app.dSYM`，我会得到一个号码。这个数字是否应该出现在我的崩溃日志中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:30:36.027

该数字应出现在该`Binary Images`部分下的第一行中。（它的格式可能不同，例如小写和不带`-`字符）。

请记住，每次构建时，此 UUID 都会发生变化，如果您没有保存之前的 dSYM，它不会对其进行符号化。

如果您没有更改很多（任何）代码，则可以将`Binary Images`部分中的 UUID 字符串（保留格式）替换为最新 dSYM 中的新字符串。

如果符号化不起作用，并且 UUID 正确，则该文件夹很可能没有被 Spotlight 索引，因此符号化脚本无法找到 dSYM。

# javascript - pushState 行为中的骨干片段直接

> ID：13659962
> 
> 赞同：1
> 
> 时间：2012-12-01T13:36:09.837
> 
> 标签：javascript, backbone.js, pushstate

我是backbone.js 的新手，我尝试编写演示以了解backbone.js，但是当我在Backbone history 中设置pushState true 时，Backbone 片段出现问题。这是我的情况

```
var Workspace = Backbone.Router.extend({

    initialize: function() {
        this.route(/^users\/friends$/i, "hellobackbone")
    }
    hellobackbone: function() {
         alert(Backbone.history.fragment)
    }
}); 
```

当我在地址时：`localhost/users/friends`。我按进去`<a href="#hello">hello</a>`

`users/friends`它用和警告两个两次`users/friends#hello`。我只想与路线用户/朋友通话（请参阅我的正则表达式）。我不知道为什么会这样。我找到了backbone.js和一些来自谷歌的网站，但没有帮助:((

# asp.net-mvc-3 - 嵌入 iframe 跨域

> ID：13659963
> 
> 赞同：1
> 
> 时间：2012-12-01T13:36:21.037
> 
> 标签：asp.net-mvc-3, iframe, cross-domain, security, x-frame-options

我需要一个 iframe 脚本，我可以将它提供给我的不同客户，以便他们可以将其嵌入到他们的网站中。就像 Youtube 或 facebook 一样。

但由于跨域限制，它不会被渲染。

我已经阅读了有关 x 框架选项、跨域 ajax 调用的所有文档。

crossDomain ajax 调用的问题是我只有 JSONP 可以使用。

我已经尝试过了 - 只需转到任何 youtube 视频并获取其嵌入代码。它是一个普通的 iframe 脚本，例如 `<iframe width="420" height="315" src="http://www.youtube.com/embed/7N5OhNplEd4" frameborder="0" allowfullscreen></iframe>` ，如果您在 html 中注入上述脚本，它将被渲染，但是一旦您将 iframe 的 src 编辑到 youtube.com 本身，它就会变为空白。

Facebook 的 iframe 也可以在任何地方顺利渲染。

我被这件事折磨得要死。请指导我。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:21:09.607

如果您查看来自 youtube.com 的响应标头，它会返回“X-Frame-Options:SAMEORIGIN”，因此他们会在服务器上添加标头以阻止人们通过 iframe 显示 youtube（网站页面）。

# php - 使用特征更改另一个类中的变量会导致性能下降

> ID：13659968
> 
> 赞同：1
> 
> 时间：2012-12-01T13:36:49.447
> 
> 标签：php, performance, oop

我有一些空闲时间，并决定对我将在我的应用程序中实现的自定义日志记录系统的几个选项进行基准测试。关键是在执行期间将来自不同类和函数的事件简单地记录到一个数组中，以便以后检查。

在尝试这些时，我看到了一些让我感到困惑的事情：**使用 trait 修改另一个类中的变量比修改“self”中的变量需要更长的时间。它也比直接修改变量需要更长的时间。**

我对微不足道的性能提升并不完全感兴趣，也还没有决定最终的实现。我只是好奇为什么会这样。

这是测试它的代码。我还进行了一些其他测试，但由于明显的原因它们速度较慢。

```
class ExternalStore {
    public static $log = [];
}

trait LoggerTrait {
    public static function addLog($time, $event) {
        return [$time, $event];
    }
}

echo "<h1>Changing external variable directly</h1>";
class ExternalAppend {
    public function doStuff() {
        for ($i = 0; $i < 100000; $i++) {
            ExternalStore::$log += [microtime(), "Stuff done"];
        }
    }
}

$ExternalAppend = new ExternalAppend;
$start = microtime(true);
$ExternalAppend->doStuff();
$time = microtime(true) - $start;
echo "Execution time: $time<hr>"; // ~0.18...

echo "<h1>Using a trait to change internal variable</h1>";
class TraitUser {
    use LoggerTrait;

    public static $log = [];

    public function doStuff() {
        for ($i = 0; $i < 100000; $i++) {
            self::$log += self::addLog(microtime(), "Stuff done");
        }
    }
}

$TraitUser = new TraitUser();
$start = microtime(true);
$ExternalAppend->doStuff();
$time = microtime(true) - $start;
echo "Execution time: $time<hr>"; // ~0.18...

echo "<h1>Using a trait to change external variable</h1>";
class TraitUserExternal {
    use LoggerTrait;

    public function doStuff() {
        for ($i = 0; $i < 100000; $i++) {
            ExternalStore::$log += self::addLog(microtime(), "Stuff done");
        }
    }
}

$TraitUserExternal = new TraitUserExternal();
$start = microtime(true);
$TraitUserExternal->doStuff();
$time = microtime(true) - $start;
echo "Execution time: $time<hr>"; // ~0.30... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:23:08.370

终于有时间研究这个问题，解决方案很简单。**问题是调用`$ExternalAppend->doStuff()`而不是`$TraitUser->doStuff()`on `line 41`。**修复此问题后，`TraitUser`和的执行时间`TraitUserExternal`相似。使用`$var += [$val1, $val2]`而不是也有一个错误`$var[] = [$val1, $val2]`，但这似乎不会影响差异。只有总执行时间。

较慢的性能来自调用函数和使用返回值的综合`TraitUser`开销`TraitUserExternal`。`ExternalAppend`

以下代码证实了调查结果。直接修改变量而不调用任何函数是最快的方法。调用函数并修改变量是第二快的。第三种（比第二种慢一点）方法是使用从函数返回的值修改变量。

第四个函数`doStuff4()`还显示了使用 trait 修改另一个类中的变量的更好方法。

```
<?php
trait Logger {
    protected static function modifyInternalValue($time, $event) {
        self::$internalLog[] = [$time, $event];
    }
    protected static function returnValue($time, $event) {
        return [$time, $event];
    }
    protected static function modifyExternalValue($time, $event) {
        ExternalLogger::$externalLog[] = [$time, $event];
    }
}

class ExternalLogger {
    public static $externalLog = [];

    public static function modifyValue($time, $event) {
        self::$externalLog[] = [$time, $event];
    }

}

class LoggerUser {
    use Logger;

    public static $internalLog = [];
    protected static $iterations = 10000;

    public function doStuff1() {
        echo "<h1>1 - Directly modifying an internal variable</h1>";
        for ($i = 0; $i < self::$iterations; $i++) {
            self::$internalLog[] = [microtime(), "Stuff done"];
        }
    }
    public function doStuff2() {
        echo "<h1>2 - Trait returns a value to internal variable</h1>";
        for ($i = 0; $i < self::$iterations; $i++) {
            self::$internalLog[] = self::returnValue(microtime(), "Stuff done");
        }
    }
    public function doStuff3() {
        echo "<h1>3 - Trait modifies a variable inside a function</h1>";
        for ($i = 0; $i < self::$iterations; $i++) {
            self::modifyInternalValue(microtime(), "Stuff done");
        }
    }
    public function doStuff4() {
        echo "<h1>4 - Trait modifies a variable of an external class</h1>";
        for ($i = 0; $i < self::$iterations; $i++) {
            self::modifyExternalValue(microtime(), "Stuff done");
        }
    }
    public function doStuff5() {
        echo "<h1>5 - External class modifies a variable in itself</h1>";
        for ($i = 0; $i < self::$iterations; $i++) {
            ExternalLogger::modifyValue(microtime(), "Stuff done");
        }
    }
}

function profileFunction($function) {
    $LoggerUser = new LoggerUser();
    $start = microtime(true);
    $LoggerUser->$function();
    $time = microtime(true) - $start;
    echo "Execution time: $time<hr>";
}

profileFunction("doStuff1"); // Fast    | Direct modification
profileFunction("doStuff2"); // Slowest | Function returns a value
profileFunction("doStuff3"); // Slower  | Function modifies a value
profileFunction("doStuff4"); // Slower  | Function modifies external class
profileFunction("doStuff5"); // Slower  | External class modifies itself 
```

# linux-kernel - 如何在 Linux 中写入 VGA 内存（不是视频缓冲区、内存）以在屏幕上显示徽标？

> ID：13659969
> 
> 赞同：5
> 
> 时间：2012-12-01T13:36:54.797
> 
> 标签：linux-kernel, ioctl, vga

我想通过用户空间中的mmap-ing并将地址发送到内核空间从用户空间写入VGA内存（视频内存，而不是缓冲区），我将使用pfn remap将那些mmap-ed地址映射到vga内存（我将通过 lspci 获取地址）。通过这样做，我想在屏幕上显示图像/徽标？对此有任何帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-09T08:21:14.403

无需跳过所有这些障碍。

通过直接访问 PCI 内存将相应的`/sys/devices/pci<addr>/resource<N>`-file 映射到进程的内存中。`mmap`

# .net - 如何专注于上次激活的程序？

> ID：13659970
> 
> 赞同：2
> 
> 时间：2012-12-01T13:37:06.090
> 
> 标签：.net, windows, vb.net, winforms, focus

如果您正在制作 Windows 窗体应用程序并且您打开了“记事本”和“Web 浏览器”，如何在您的应用程序获得焦点之前将焦点赋予最后一个焦点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T15:10:08.807

按 Alt+Tab 总是会让您回到之前的活动窗口。它是一个单行代码：

```
 SendKeys.Send("%{TAB}") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T14:54:55.850

您可以使用回调函数和一组 API 来查找 Alt-Tab 可以看到的程序列表（打开的窗口）（无需查看 Alt-Tab 窗口）。

首先声明要使用的 API 集合：

```
[DllImport("user32.dll", SetLastError = true)]
static extern IntPtr GetWindow(IntPtr hWnd, int uCmd);

[DllImport("user32.dll")]
static extern bool SetForegroundWindow(IntPtr hWnd);

[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool IsWindowVisible(IntPtr hWnd);

[DllImport("user32.dll")]
private static extern int EnumWindows(CallBackPtr callPtr, int lPar);

[DllImport("user32.dll", EntryPoint = "SendMessage", CharSet = CharSet.Auto)]
public static extern bool SendMessage(IntPtr hWnd, uint Msg, int wParam, StringBuilder         lParam);
[DllImport("user32.dll", SetLastError = true)]
public static extern IntPtr SendMessage(IntPtr hWnd, int Msg, int wparam, int lparam);

const int WM_GETTEXT = 0xD;

private static int windowCount = 0; 
```

然后你需要通过windows枚举并激活最后一个：

```
public static bool EnumWindowProc(int hwnd, int lParam)
{
    if (!IsWindowVisible((IntPtr)hwnd) || GetWindow((IntPtr)hwnd, GW_OWNER) != IntPtr.Zero)
    return true;

    string name = GetWindowTextRaw((IntPtr)hwnd);
    if (name.Length > 0)
    {
        windowCount++;
        if (windowCount == 2) //The previouse active window
        {
            SetForegroundWindow((IntPtr)hwnd);
            return false;
        }
    }

    return true;
} 
```

并使用以下代码检索窗口的名称。

```
public static string GetWindowTextRaw(IntPtr hwnd)
{
    var length = (int)SendMessage(hwnd, WM_GETTEXTLENGTH, 0, 0);
    var sb = new StringBuilder(length + 1);
    SendMessage(hwnd, WM_GETTEXT, sb.Capacity, sb);
    return sb.ToString();
} 
```

最后调用以下函数：

```
public void ActivateLastWindow()
{
    callBackPtr = EnumWindowProc;
    windowCount = 0;
    EnumWindows(callBackPtr, 0);
} 
```

# python - Pyparsing 新手 setParseAction 修改令牌

> ID：13659972
> 
> 赞同：6
> 
> 时间：2012-12-01T13:37:17.823
> 
> 标签：python, pyparsing

我是 Pyparsing 的新手（对 Python 也很陌生）。我试图将我的问题简化为最简单的形式，以说明出了什么问题（到了我可能根本不需要 Pyparsing 的地步！）

假设我有一个由字母和数字组成的字符串，例如“b7 z4 a2 de c3”。总是有一个字母，但数字是可选的。我想把它解析成它的单个元素，然后处理它们，但是如果有一个没有数字的裸字母，那么更改它以便它后面有“默认”数字 1 会很方便。然后我可以以一致的方式处理每个元素。我想我可以用 setparseAction 来做到这一点，如下所示：

```
from pyparsing import *
teststring = "a2 b5 c9 d e z"
expected_letter = Word("ABCDEFGabcdefgzZxy", exact=1)
expected_number = Word(nums)
letter_and_number = expected_letter + expected_number
bare_letter = expected_letter
bare_letter.setParseAction( lambda s,l,t:  t.append("1") )
elements =  letter_and_number | bare_letter
line = OneOrMore(elements)
print line.parseString(teststring) 
```

不幸的是， t.append() 没有达到我的预期，即在已解析的标记列表中添加一个“1”。相反，我收到一个错误：TypeError: 'str' object is not callable。

在这里，我可能真的很厚，但是你们中的一位专家能否让我直截了当。

谢谢

史蒂夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T17:16:26.460

了解 pyparsing 的基本概念之一是它不仅仅适用于字符串列表，而是将已解析的片段组装成 ParseResults 对象。ParseResults 是在 pyparsing 中定义的丰富数据类型，可以作为列表访问，如果存在已从具有已定义结果名称的 ParserElement 解析的标记，则可以作为 dict 或对象访问。

然而，虽然 ParseResults 的设计考虑到了易于访问，但它的更新方式受到限制。在 pyparsing 内部，每个匹配的表达式都会创建一个小的 ParseResults 对象；如果这是大型表达式的一部分，则该表达式使用 += 运算符将片段累积到大型 ParseResults 中。

在您的情况下，您可以通过创建一个包含“1”的小 ParseResults 并将其添加到 t 来附加到传入的 ParseResults：

```
t += ParseResults("1") 
```

不幸的是，这不能作为 lambda - 你可以尝试

```
lambda s,l,t: t.__iadd__(ParseResults("1")) 
```

但这感觉有点太聪明了。

您可能还需要重新考虑一下您的解析器，以利用 Optional 类。将您的尾随数字视为可选元素，您可以为其定义一个默认值，以防该元素丢失。我认为您可以通过以下方式定义您想要的内容：

```
>>> letter = Word(alphas,exact=1)
>>> digit = Word(nums,exact=1)
>>> teststring= "a2 b5 c9 d e z"
>>> letter_and_digit = Combine(letter + Optional(digit, default="1"))
>>> print (sum(letter_and_digit.searchString(teststring)))
['a2', 'b5', 'c9', 'd1', 'e1', 'z1'] 
```

组合用于将单独的字母和数字重新连接成字符串，否则每个匹配项看起来像`['a','2'], ['b','5']`，等等。

（通常，searchString 返回一个 ParseResults 对象的列表，它看起来像一个单元素列表的列表。通过将 searchString 的结果传递给`sum`this 将它们全部添加到一个 ParseResults 字符串中。）

# iphone - iPhone UITableView 可扩展/可协作

> ID：13659974
> 
> 赞同：-1
> 
> 时间：2012-12-01T13:37:54.187
> 
> 标签：iphone, ipad, uitableview

在我的应用程序中，我有两个表，一个在另一个之下。两个表都必须是可扩展和可折叠的。当两个表格都处于可折叠模式时，两个表格的标题都可见。单击我的第一个表格的标题，我必须展开我的第一个表格。在展开我的第一个表格时，第二个表格的标题必须可见，但是当我单击第二个表格的标题时，我的第二个表格必须占据整个屏幕，并且除了第二个表格的标题和行之外没有其他 UI可见，并且在折叠第二个表格时再次出现展开第二个表格之前存在的正常 UI。

请帮助我实现这种情况。

蒂亚:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T16:44:40.540

当用户单击表格视图时，您应该使用 `UIView`类动画方法并调整表格视图框架的大小。`[UIView animation:(^animation)animation withDuration:(time)duration]`我相信您应该尝试在表格视图的部分标题中放置一个按钮，该按钮将调整两个表格视图的大小并从那里继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T13:53:23.667

听起来像改变表格视图的框架是你所追求的。

例如，一个 tableview 占据整个视图：

```
self.tableView.frame = CGRectMake(self.tableView.frame.origin.x, self.view.frame.origin.y, self.tableView.frame.size.width, self.view.frame.size.height); 
```

# xml - 使用 XSLT 将非重复元素与重复元素连接起来

> ID：13659976
> 
> 赞同：0
> 
> 时间：2012-12-01T13:37:59.200
> 
> 标签：xml, xslt, tibco

我有以下示例源 XML 数据。现在我需要以这样一种方式获取输出，即每个序列号都必须在 XSLT 的帮助下打印其 productNo 值，由管道符号连接。

```
<orders>
    <orderItems>
        <productNo>500656-B21</productNo>
        <serialNumber>KRW13707EV</serialNumber>
        <serialNumber>PR9137RFRV</serialNumber>
        <serialNumber>PR9137RFRW</serialNumber>
        <serialNumber>PR9137RFRX</serialNumber>
    </orderItems>
   <orderItems>
        <productNo>500686-B21</productNo>
        <serialNumber>KRW13807EZ</serialNumber>
        <serialNumber>PR9138RFRD</serialNumber>
        <serialNumber>PR9138RFRY</serialNumber>
        <serialNumber>PR9138RF51</serialNumber>
    </orderItems>
   <orderItems>
        <productNo>500693-B26</productNo>
        <serialNumber>KRW139075V</serialNumber>
        <serialNumber>PR9139RFXV</serialNumber>
        <serialNumber>PR9139RFW7</serialNumber>
        <serialNumber>PR9139RFZ5</serialNumber>
    </orderItems>
</orders> 
```

预期输出为：

```
<orders>
<serialNo>500656-B21|KRW13707EV</serialNo>
<serialNo>500656-B21|PR9137RFRV</serialNo>
<serialNo>500656-B21|PR9137RFRW</serialNo>
<serialNo>500656-B21|PR9137RFRX</serialNo>
<serialNo>500686-B21|KRW13807EZ</serialNo>
<serialNo>500686-B21|PR9138RFRD</serialNo>
<serialNo>500686-B21|PR9138RFRY</serialNo>
<serialNo>500686-B21|PR9138RF51</serialNo>
<serialNo>500693-B26|KRW139075V</serialNo>
<serialNo>500693-B26|PR9139RFXV</serialNo>
<serialNo>500693-B26|PR9139RFW7</serialNo>
<serialNo>500693-B26|PR9139RFZ5</serialNo>
</orders> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:08:52.457

```
<xsl:template match="orders">
   <xsl:copy>
     <xsl:apply-templates select="orderItems/serialNumber"/>
   </xsl:copy>
</xsl:template>

<xsl:template match="serialNumber">
  <serialNo>
    <xsl:value-of select="concat(../productNo, '|', .)"/>
  </serialNo>
</xsl:template>

<xsl:output indent="yes"/> 
```

应该足够了。

# php - 选中复选框时从自定义网格视图中获取行值

> ID：13659978
> 
> 赞同：0
> 
> 时间：2012-12-01T13:38:01.833
> 
> 标签：php, codeigniter

我正在 Codeigniter 中开发应用程序，我被困在一些代码中......我只想知道如果有人选中复选框并提交，我如何获得完整的行值，所以我应该获得所选复选框的行值......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T05:19:42.340

您可以在创建行时使用数组，将每一行的输入字段的名称用作数组，当您在复选框数组上提交表单循环并使用选定复选框具有的相同键从其他元素中获取值时

# javascript - 如果客户端通过套接字连接，如何运行脚本并传递参数？

> ID：13659986
> 
> 赞同：0
> 
> 时间：2012-12-01T13:38:32.423
> 
> 标签：javascript, node.js, sockets

是否可以运行一些脚本，如果客户端连接传递参数给它，像这样：

```
 var io = require('socket.io').listen(http);
 io.sockets.on('connection', function (client) {
     console.log('Client connected');
     var notifikacija = function (array) {
         client.emit('populate', array);
     }
 });

 ///////////////////////////////////////////////////////////////////////

 setInterval(function(){
     var array = newArray();
     array[0]='test';
     notifikacija(array);
 }, 2000); 
```

现在它显示错误：notifikacija 未定义。真是一场斗争……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:43:02.880

该`notifikacija`函数在 io.sockets.on 处理程序的范围内是本地的。您希望它是全局的，以便您可以在 setInterval 中访问它：

```
var notifikacija = function(){}; // just an empty function, in case it gets called before it has something to do
var io = require('socket.io').listen(http);
io.sockets.on('connection', function(client) {
     console.log('Client connected');
     notifikacija = function(array){ // once the client is available assign the function
         client.emit('populate', array);
     }  
});

setInterval(function(){
    var array = newArray();
    array[0]='test';
    notifikacija(array);
}, 2000); 
```

这是[一篇博客文章，其中包含有关 Javascript 范围的更多信息](http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/)。

# ios - showReorderControl 的意义何在？

> ID：13659996
> 
> 赞同：7
> 
> 时间：2012-12-01T13:39:43.890
> 
> 标签：ios, cocoa-touch, uitableview

我有一个`UITableView`实例并实现：

```
tableView:canEditRowAtIndexPath:
tableView:editingStyleForRowAtIndexPath:
tableView:shouldIndentWhileEditingRowAtIndexPath:
tableView:canMoveRowAtIndexPath:
tableView:moveRowAtIndexPath:toIndexPath: 
```

之后，我可以看到所有带有重新排序控件的单元格。

苹果的标题说：

```
@property(nonatomic) BOOL showsReorderControl; // default is NO 
```

如果默认值是`NO`为什么我会看到重新排序控件？

**更新：**`tableView:cellForRowAtIndexPath:`创建单元格后， 我还检查了属性的值：

```
(lldb) p [c showsReorderControl]
(BOOL) $1 = NO 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T15:05:34.273

当您从 中返回 YES 时`tableView:canMoveRowAtIndexPath:`，它的作用与将 设置`showsReorderControl`为 YES 相同。这些只是启用重新排序控制的两种不同方法。

事实上，还有第三种方法——我们永远不要抱怨我们没有选择！;) 来自以下文档`tableView:canMoveRowAtIndexPath:`：

> 此方法允许委托指定不显示指定行的重新排序控件。默认情况下，如果数据源实现 tableView:moveRowAtIndexPath:toIndexPath: 方法，则会显示重新排序控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-19T17:57:40.677

通过阅读当前的 Apple 文档，它似乎`showsReorderControl`根本没有用。

[UITableViewCell](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewCell_Class/index.html#//apple_ref/occ/instp/UITableViewCell/showsReorderControl)

> 要显示重新排序控件，您不仅必须设置此属性，还必须实现 UITableViewDataSource 方法 tableView:moveRowAtIndexPath:toIndexPath:。

[UITableView 数据源](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDataSource_Protocol/#//apple_ref/occ/intfm/UITableViewDataSource/tableView:canMoveRowAtIndexPath:)

> 默认情况下，如果数据源实现 tableView:moveRowAtIndexPath:toIndexPath: 方法，则会显示重新排序控件。

从这个文档中，我得出结论：

1-显示重新排序控件的唯一方法是实现`tableView:moveRowAtIndexPath:toIndexPath:`，它显示所有单元格中的控件。

2-如果您希望单元格*不*显示控件，则必须返回 NO from`tableView:canMoveRowAtIndexPath:`

3-`showsReorderControl`无法控制是否显示重新排序控制。

# security - 保护 GWTP 应用程序的最佳实践

> ID：13659998
> 
> 赞同：0
> 
> 时间：2012-12-01T13:40:17.767
> 
> 标签：security, gwt-platform

我正在使用 GWT 平台开发应用程序，现在我想添加安全部分。这样做的最佳做法是什么？我对安全性的要求是：

*   拥有用户权限；
*   在没有必要权限的情况下向用户隐藏某些地方；
*   在没有必要权限的情况下向用户隐藏页面上的某些元素；
*   保护服务器端免受未经授权的请求；
*   轻松管理所有这些事情（比如在春天使用注释或类似的东西）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:48:41.553

> 拥有用户权限；

使用权限属性为您的用户建模，例如

```
 private int user_type; 
```

> 在没有必要权限的情况下向用户隐藏某些地方；

使用**Gate Keeper的概念**

Gate Keeper 是 Singleton，它要求您继承一个名为

```
boolean canReveal() 
```

使用它，您可以调用服务器并搜索用户权限，然后显示或不显示演示者调用。

如果 Presenter 需要安全性，只需在其代理接口上添加 @UseGateKeeper，例如：

```
SomePresenter extends Presenter<V,P>{
       @UseGateKeeper(YourGateKeeper.class)
       SomePresenterProxy extends ProxyPlace{}
} 
```

这将阻止没有某些权限的用户访问演示者。

> 在没有必要权限的情况下向用户隐藏页面上的某些元素；

一个很好的问题，我从未在 GWTP 项目中看到过这种类型的安全性。但是你总是可以使用 Widget.setVisible(false) ;D，但我不知道 gwtp 是否有一个好的做法。

> 保护服务器端免受未经授权的请求；

*GWTP GWTP 可以将您的每个 ActionHandler 与服务器端 ActionValidator 链接起来，该服务器端 ActionValidator 确定当前客户端是否可以执行该操作*

您可以使用 ActionValidator 隐藏一些服务器调用。

读[这个](http://code.google.com/p/gwt-platform/wiki/IntroductionActionValidator)

> 轻松管理所有这些事情（比如在春天使用注释或类似的东西）

如您所见，许多此类安全概念使用注释和其他东西来轻松管理您的应用程序。

# c# - 使用 UDP 接收和处理连续数据包

> ID：13659999
> 
> 赞同：4
> 
> 时间：2012-12-01T13:40:18.830
> 
> 标签：c#, .net, sockets, udp, asynccallback

这是我当前的设置（使用 UDP）：

```
void OnDataReceived(IAsyncResult result)
{

    IPEndPoint ep = new IPEndPoint(IPAddress.Any, 0);

    byte[] buffer = socket.EndReceive(result, ref ep);

    Packet p = new Packet(Encoding.ASCII.GetString(buffer, 0, buffer.Length));

    //process packet

    socket.BeginReceive(new AsyncCallback(OnDataReceived), socket);

} 
```

我想知道如果我在调用 EndReceive 之后立即调用 socket.BeginReceive 然后处理数据包以获得这样的连续数据包流会发生什么：

```
void OnDataReceived(IAsyncResult result)
{

    IPEndPoint ep = new IPEndPoint(IPAddress.Any, 0);

    byte[] buffer = socket.EndReceive(result, ref ep);
    socket.BeginReceive(new AsyncCallback(OnDataReceived), socket);

    Packet p = new Packet(Encoding.ASCII.GetString(buffer, 0, buffer.Length));

    //process packets

} 
```

如果我一调用 BeginReceive 就收到了一个数据包，这是否会与当前的数据包处理发生冲突？

此外，如果这不会发生冲突，更改为 TCP 会导致此功能失效吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T20:04:22.637

看起来您正在那里创建某种递归处理程序。我不确定这将如何工作，可能不是很好。我通常会使用一个单独的读取器线程来侦听传入的数据并将其传递给事件。这在过去对我很有帮助。不过，我还没有考虑过为此使用异步。

这是一些关于如何使用单独的线程来处理传入的 UDP 数据的示例代码。它不完整，但应该让您了解如何设置它。

```
 private Thread _udpReadThread;
    private volatile bool _terminateThread;

    public event DataEventHandler OnDataReceived;
    public delegate void DataEventHandler(object sender, DataEventArgs e);

    private void CreateUdpReadThread()
    {
        _udpReadThread = new Thread(UdpReadThread) { Name = "UDP Read thread" };
        _udpReadThread.Start(new IPEndPoint(IPAddress.Any, 1234));
    }

    private void UdpReadThread(object endPoint)
    {
        var myEndPoint = (EndPoint)endPoint;
        var udpListener = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
        udpListener.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true);

        // Important to specify a timeout value, otherwise the socket ReceiveFrom() 
        // will block indefinitely if no packets are received and the thread will never terminate
        udpListener.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReceiveTimeout, 100);
        udpListener.Bind(myEndPoint);

        try
        {
            while (!_terminateThread)
            {
                try
                {
                    var buffer = new byte[1024];
                    var size = udpListener.ReceiveFrom(buffer, ref myEndPoint);
                    Array.Resize(ref buffer, size);

                    // Let any consumer(s) handle the data via an event
                    FireOnDataReceived(((IPEndPoint)(myEndPoint)).Address, buffer);
                }
                catch (SocketException socketException)
                {
                    // Handle socket errors
                }
            }
        }
        finally
        {
            // Close Socket
            udpListener.Shutdown(SocketShutdown.Both);
            udpListener.Close();
        }
    }

    public class DataEventArgs : EventArgs
    {
        public byte[] Data { get; private set; }
        public IPAddress IpAddress { get; private set; }

        public DataEventArgs(IPAddress ipaddress, byte[] data)
        {
            IpAddress = ipaddress;
            Data = data;
        }
    } 
```