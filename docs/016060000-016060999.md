# StackOverflow 问答 16060000-16060999

# php - Setcookie域参数处理

> ID：16060001
> 
> 赞同：1
> 
> 时间：2013-04-17T12:26:36.913
> 
> 标签：php, apache, cookies, browser, setcookie

我想以一种可能的详细方式了解如何处理“setcookie”域参数。让我们看下面的例子：

```
setcookie("TestCookie", $value, time()+3600, "/~rasmus/", "www.example.com", 1); 
```

我想知道发生了哪种情况：

1.  服务器决定是否向客户端发送信息以设置cookie“TestCookie”
2.  服务器向客户端发送信息以设置 cookie，同时向客户端发送信息以仅为“www.example.com”域（及其子域）请求设置 cookie。然后浏览器根据用户请求决定是否设置和发送 cookie。

所以我再次问在哪一方做出决定？服务器还是客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:37:42.127

On client-side.

The `setcookie` does not do anything smart. It just takes its arguments, formats and outputs the `Set-Cookie` HTTP header (according to RFC 6265).

You can use any web browser developer tools to see HTTP headers (including cookie headers) in and out. It would help you understand, how it works.

# facebook - Facebook 中的 OAuth 对话框读/写权限

> ID：16060002
> 
> 赞同：0
> 
> 时间：2013-04-17T12:26:39.837
> 
> 标签：facebook, facebook-graph-api

昨天我在我的一个 Facebook 应用程序中收到了这条消息：

![在此处输入图像描述](https://i.stack.imgur.com/MwJV7.png)

试图寻找有关它的文档，但找不到它。这是什么意思？我不能再请求读/写权限了？我必须分开做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:25:58.483

正如有人在其他问题中引用的那样，看起来这不是您的错，您对此无能为力。

* * *

引自**Fabrice Lefloch**在[我将如何处理此 Facebook 警报？关于权限](https://stackoverflow.com/questions/16052157/what-am-i-going-to-do-with-this-facebook-alert-about-the-permissions)

* * *

这似乎是 Facebook 开发人员的错误。

有人在这里问过同样的问题，脸书工程师回答：

```
The alert went out by mistake and we are working on cleaning it up. You can ignore it. 
```

# image - XPages - 在 xpage 文档中显示包含在电子邮件中的图像

> ID：16060005
> 
> 赞同：0
> 
> 时间：2013-04-17T12:26:44.793
> 
> 标签：image, email, xpages

我正在处理内部帮助台。发往帮助台的电子邮件地址出现在 Notes 视图中，我可以在 XPages 中打开文档并查看文本。但它不会在文本中显示任何插入的图像。

我可以将附件列为外部链接（由[http://techdriveactive.blogspot.co.uk/2012/11/open-attachments-in-xpage-in-client.html](http://techdriveactive.blogspot.co.uk/2012/11/open-attachments-in-xpage-in-client.html)提供），但我似乎无法获得处理图像。

有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T02:32:23.827

解决该挑战的一种方法是使用 Dojo [ContentPane](http://dojotoolkit.org/reference-guide/1.8/dijit/layout/ContentPane.html)。它有一个 href 属性，可以指向不同的 url。然后，您可以将其指向经典引擎呈现的内容：

```
 href="someview/docid/Body?OpenField" 
```

注意：这在 XPiNC 中不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T16:21:35.083

为您 HelpDeskOpenDoc.xsp XPage 添加富文本控件并将其绑定到富文本字段与图像和其他丰富的内容...

```
<xp:inputRichText id="inputRichText1" value="#{document1.Body}"></xp:inputRichText> 
```

# java - java \bword\B 中的正则表达式哪个元字符获胜？

> ID：16060007
> 
> 赞同：-5
> 
> 时间：2013-04-17T12:26:53.917
> 
> 标签：java, regex, word-boundary

我知道它的`\bword\B`行为就像`word\B`在 Java 中使用正则表达式。（就匹配引擎而言）

为什么会有可能？如果它是 en 异常（语法异常）不是更合理吗？[此外，本](http://docs.oracle.com/javase/tutorial/essential/regex/bounds.html)教程中的 oracle 也使用它作为解释性示例 ( `\bdog\B`)。如果您不知道答案，请随意不回复。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:44:45.530

`\B`是 的否定版本`\b`。在不`\B`匹配的每个位置匹配。`\b`实际上，`\B`匹配两个单词字符之间的任何位置以及两个非单词字符之间的任何位置。

`\b`允许您使用`\bword\b`. “单词字符”是可用于构成单词的字符。所有不是“单词字符”的字符都是“非单词字符”。更准确地说是`\b`在字母数字序列之前和之后匹配

* * *

以上来自[这里](http://www.regular-expressions.info/wordboundaries.html)。

在您的示例中`\bdog\B`，它将匹配“doggie”，因为您要求它匹配单词和部分单词。

`\bdog\b`将在“doggie”上失败，因为“dog”是整个词，而“doggie”中的“dog”是部分词。

*它是有条件的，取决于它所接触的内容。*

此外，`dog\B`将匹配短语“I have a doggie”中的**“dog ”**

`dog\b`将匹配短语“I have adog gie”中的“dog **”**

`dog\B`不会匹配短语“I have adog gie”中的“dog **”**

`\bdog\b`不会匹配短语“I have adog gie”中的“dog **”**

但`\Bdog\b`会匹配短语“I have adog gie”中的“dog **”**

这个 SO answer 提供了[详细的解释](https://stackoverflow.com/a/4214173/195488)。

# html - 表格仍然不利于布局吗？

> ID：16060009
> 
> 赞同：-5
> 
> 时间：2013-04-17T12:26:56.263
> 
> 标签：html, css

我只是浪费了 4 个小时来尝试垂直对齐一些文本，同时避免使用表格。

我尝试使用此处概述的方法[http://www.jakpsatweb.cz/css/css-vertical-center-solution.html](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)这似乎是堆栈中推荐的解决方案之一。

但是，考虑到我需要使用的一些结构和 CSS（元素内元素的浮动/百分比宽度/绝对定位等...），为了在实现我需要的结果的同时保持响应式布局，我无法由于一个或另一个问题，使提供的解决方案工作。

最终我不得不把它包起来，只用一张桌子，以免浪费太多时间。

所以我的问题是，我们是否仍然应该不惜一切代价避免使用（某些）布局的表格，或者考虑到所述困境的频率和当今布局的复杂性，这种观点是否已经演变？

**编辑：**

**哪一个看起来像你的黑客？你能发现吗？**

这是一个黑客，上面的链接甚至指出！（在页面上搜索“hack”这个词。）

```
<div class="greenBorder" style="display: table; height: 400px; #position: relative; overflow: hidden;">
    <div style=" #position: absolute; #top: 50%;display: table-cell; vertical-align: middle;">
      <div class="greenBorder" style=" #position: relative; #top: -50%"> 
```

这就是 html 的设计使用方式，它总是有效的！

```
<table>
<tr>
<td>
Text 
```

**什么看起来更干净？！不要被愚弄了！用你自己的头脑！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:29:48.227

> 所以我的问题是，我们是否仍应不惜一切代价避免使用（某些）布局的表格

是的

> 或者考虑到上述困境的频率和当今布局的复杂性，这种观点是否已经发生了变化？

鉴于浏览器对更多 CSS 的支持增加，视图已经发展。

# java - 在 alertDialog 中使用 Intent

> ID：16060013
> 
> 赞同：0
> 
> 时间：2013-04-17T12:27:04.170
> 
> 标签：java, android, if-statement, android-alertdialog

我有以下由 if 语句触发的警报对话框：

```
if (x < 10) {
               AlertDialog.Builder builder= new AlertDialog.Builder(parentActivity);
                builder.setTitle(x.toString());
               builder.setMessage(x.toString());
               builder.setPositiveButton("x", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub//
                    Intent intent = new Intent(parentActivity.getApplicationContext(),secondActivity.class);
                    Bundle b = new Bundle();
                    b.putString("x",x.toString());
                    intent.putExtras(b);

                    startActivity(intent);

                }});

            AlertDialog dialog = builder.create();
            dialog.show(); 
```

在名为 secondActivity 的第二个类中，java 看起来像：

```
 public class secondActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.xView);
        Button b = (Button) findViewById(R.id.button1);
}
} 
```

清单看起来像

```
</activity>
           <activity
        android:name=".secondActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="uk.ac.ucl.cege.ucestw0.SECONDACTIVITY" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

但是我在 startActivity(intent) 行上不断收到错误。警报对话框正确显示，但在单击按钮时失败。有什么建议么？

**编辑：**错误是：

```
 threadid=1: thread exiting with uncaught exception (group=0x40015560)
    E/AndroidRuntime(1103): FATAL EXCEPTION: main
    E/AndroidRuntime(1103): java.lang.NullPointerException
    E/AndroidRuntime(1103):     at android.app.Activity.startActivityForResult(Activity.java:2827)
    E/AndroidRuntime(1103):     at android.app.Activity.startActivity(Activity.java:2933)
    E/AndroidRuntime(1103):     at my.package.QuizMeLocationListener$1.onClick(mainAcitivity.java:79)
    E/AndroidRuntime(1103):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:159)
    E/AndroidRuntime(1103):     at android.os.Handler.dispatchMessage(Handler.java:99)
    E/AndroidRuntime(1103):     at android.os.Looper.loop(Looper.java:130)
    E/AndroidRuntime(1103):     at android.app.ActivityThread.main(ActivityThread.java:3683)
    E/AndroidRuntime(1103):     at java.lang.reflect.Method.invokeNative(Native Method)
    E/AndroidRuntime(1103):     at java.lang.reflect.Method.invoke(Method.java:507)
    E/AndroidRuntime(1103):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    E/AndroidRuntime(1103):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    E/AndroidRuntime(1103):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:47:48.580

尝试

```
Intent intent = new Intent(CurrentActivity.this,secondActivity.class);   //CurrentActivity is your current activity name
intent.putExtra("x",x.toString());
startActivity(intent); 
```

在第二个活动中

```
 Intent intent = getIntent();
  String x= intent.getStringExtra("x"); 
```

如果 x 是整数，则以这种方式将其转换为字符串 `x+""`or `String.valueOf(x)`, or`String str = Integer.toString(x);`

# javascript - 使用 jQuery 添加数字间距

> ID：16060016
> 
> 赞同：2
> 
> 时间：2013-04-17T12:27:12.200
> 
> 标签：javascript, jquery, number-formatting

我想检查一个 span 元素并检查它的数字格式并使用 jquery 对其应用数字分组

如果数字超过3位，即>1000，则必须进行数字分组，将千与百分开，将十万与千分开：

例如。

```
<span>5500000.00</span> 
```

应该成为

```
<span>5 500 000.00</span> 
```

jQuery可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:40:29.023

此任务有许多格式化插件。或者使用可以使用正则表达式。

```
function formatPrice(price) {
    return price.reverse().replace(/((?:\d{2})\d)/g, '$1 ').reverse();
}

// Need to extend String prototype for convinience
String.prototype.reverse = function() {
    return this.split('').reverse().join('');
} 
```

测试：

```
formatPrice('1234.00')   // "1 234.00"
formatPrice('12345.00')  // "12 345.00"
formatPrice('123456.00') // "123 456.00" 
```

*也许有一种方法可以在不恢复字符串的情况下做到这一点？*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:31:05.820

此链接可能会有所帮助：

[https://code.google.com/p/jquery-numberformatter/](https://code.google.com/p/jquery-numberformatter/)

[Javascript：格式化数字的更简单方法？](https://stackoverflow.com/questions/726144/javascript-easier-way-to-format-numbers/)

# c# - 未安装 installshield 的 Installshield 错误 1001

> ID：16060020
> 
> 赞同：2
> 
> 时间：2013-04-17T12:27:19.730
> 
> 标签：c#, visual-studio-2010, installshield-le

我有一个带有 installshield 安装程序的应用程序。我安装了一个服务和一个 Windows 窗体。

每当我在安装了 installshield 的计算机上安装应用程序时，但当我尝试在其他机器上安装它时，它会给我错误 1001。

我正在使用 Installshield LE，Visual Studio 2010。我在开发机器和我想安装的机器上使用相同的操作系统，Windows 7。

任何人都知道如何解决这个问题？我试图添加所有我可以的 installshiled 引用，但它没有改变任何东西。

问候丹尼尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-12T14:36:42.553

我有确切的场景和错误，安装服务和一个winform。事实证明我收到了 1001 错误（显然），因为我的服务已经在那台机器上运行。（这就是为什么我怀疑你只是在你的开发机器上得到错误？）当我通过添加/删除程序卸载服务时，安装按计划进行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T12:36:44.237

`This installation error can occur because the incorrect version of InstallUtilLib.dll has been streamed into the MSI package for the .NET Installer Class custom actions.`

[Q112469：信息：安装期间出现错误 1001](https://flexeracommunity.force.com/customer/articles/en_US/INFO/Error-1001-Occurs-During-Installation)

您是否同时使用 VS10 和 VS12 ？

您是否激活了 InstallShield？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-29T14:55:39.927

我有一个类似的问题。我的问题是由已经安装的类似服务引起的。卸载已安装的服务对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-15T15:21:43.047

当您在尝试安装应用程序的服务器中未安装引用的框架时，会发生此错误，在菜单栏中选择 installshield le，选择选项，然后选择 .NET，最后在我的情况下选择框架的文件夹是 v2 .0 因为这是我在服务器中安装的框架，

希望能帮上忙

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-09T23:12:11.767

希望这将帮助您在尝试使用 InstallShield 2015 LE 安装程序项目安装 .NET Windows 服务时遇到错误 1001，并将主输出设置为安装程序。

在 Windows 10 上安装 .NET 4.6 时，这是一个已知的 InstallShield 错误。

[https://flexeracommunity.force.com/customer/articles/en_US/ISSUE/HOTFIX-Install-Fails-With-Error-1001-When-a-NET-Installer-Class-Component-is-Present-in-InstallShield- 2015-SP1](https://flexeracommunity.force.com/customer/articles/en_US/ISSUE/HOTFIX-Install-Fails-With-Error-1001-When-a-NET-Installer-Class-Component-is-Present-in-InstallShield-2015-SP1)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-12-17T15:03:51.180

验证您在要安装软件的机器上安装了正确版本的 .NET 框架。版本显示在项目属性中。

# javascript - 淘汰赛选项条件css

> ID：16060021
> 
> 赞同：5
> 
> 时间：2013-04-17T12:27:21.710
> 
> 标签：javascript, html, knockout.js

我有一个可观察的对象数组

```
question = {
        ownerUserName: item.id,
        text: item.text,
        dataType: item.dataType,
        personalized: item.personalized,
        status: item.status,
        actionUserName: item.actionUserName
    } 
```

并选择来自该数组的选项：

```
<select id="questId" style="width: 425px" data-bind="options: questionList, optionsText: 'text'"> 
```

在淘汰赛的帮助下，如果 question.personalized == "Y" 这个问题的文本颜色为绿色，我该如何制作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T12:49:58.493

你最好的选择是[css绑定](http://knockoutjs.com/documentation/css-binding.html)

根据您的需要快速调整文档将是

```
<div data-bind="text: personalized, css: personalizedStatus">
   Profit Information
</div>

<script type="text/javascript">
    question.personalizedStatus = ko.computed(function() {
        return this.personalized() == "Y" ? "green" : "red";
    }, question);

</script>
<style>
    .green {color:green;}
    .red{color:red;}
</style> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T12:42:25.837

您可以使用**foreach**代替通常的**选项**绑定。就像是

```
<style>
   .highlighted{
      background-color: red;
   }
</style
<select id="questId" style="width: 425px" data-bind="foreach: questionList">
   <option data-bind="text: text, class: {highlighted: personalized == 'Y'}">
</select> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T12:57:48.087

还可以选择设置 data-bind="style:{color: value ? 'green' : null}"

这不是最好的选择（最好是设置新课程），但有可能

# vba - MS Access 在命令按钮单击时关闭

> ID：16060022
> 
> 赞同：0
> 
> 时间：2013-04-17T12:27:29.297
> 
> 标签：vba, ms-access

我一直在为拆分数据库编写 VBA 代码，最近，一些命令按钮将关闭最终用户机器上的访问实例。没有警告，没有能力阻止它发生。如果我添加一个断点，代码甚至不会点击点击事件，它只是完全关闭。然而，通过添加一个新的命令按钮然后将代码传输过来，可以简单地解决这个问题。是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:46:22.893

修复和压缩数据库似乎很少能解决数据库损坏问题，反编译也不能解决（尽管这些可以工作）。

我会按照这些步骤（根据丹的建议）：

*   创建一个新的数据库
*   从旧数据库导入所有对象（表、查询、表单、报表、宏和模块）

此时，它可能会挂在一个特定的表格或报告上。如果发生这种情况，只需从导入中省略此表单/报告（尽管您可能永远无法再次获得它！）。

最后，编译任何 VBA 代码，修复对其他 VBA 对象库的任何引用，重新绘制关系窗口，使其看起来像以前一样漂亮（关系本身不会丢失；只是它们的排列方式） - 并诅咒 Access ！

# c++ - 在函数c ++中更改给定的函数参数

> ID：16060023
> 
> 赞同：0
> 
> 时间：2013-04-17T12:27:31.747
> 
> 标签：c++, function, pointers, parameters

我编写了一个名为 swap 的函数来交换函数中给定的两个元素。但是当我在另一个函数中使用它时，它不起作用。如何让它工作？

```
#include <iostream>
using namespace std;
void swap(int *a, int * b){
    int temp=*a;
    *a=*b;
    *b=temp;
}

void sum(int x, int y){
    int *a;
    a = &x;
    int *b;
    b=&x;
    swap(a,b);
    //cout << x << endl << y << endl;
}
int main(){
    int a=0, b=1;

    //swap(a,b);
    sum(a,b);
    cout << a << endl << b << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:32:24.987

```
b=&x; 
```

应该

```
b=&y; 
```

此外，您正在交换本地副本。`sum`应该：

```
void sum(int& x, int& y) 
```

而且，这已经存在。它被称为[`std::iter_swap`](http://en.cppreference.com/w/cpp/algorithm/iter_swap)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:30:33.193

`x`并`y`通过值传递给`sum`所以`swap`是在本地副本上工作，而不是来自`main`. 您还需要修改`sum`和调用交换：

```
void sum(int &x, int &y)
             ^       ^
{
 // other code
 swap(&x,&y);
      ^  ^
} 
```

如果你离开你打电话给`swap`这样的：

```
swap(x,y); 
```

你实际上会打电话给`std::swap`. 我将假设您将添加更多代码，`sum`否则名称与它的作用不一致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:31:32.057

您不是在交换中，而是在 sum 函数中，您通过值传递 x 和 y 并稍后修改和交换值的副本以解决此问题，您需要更改`void sum(int x, int y){`为`void sum(int& x, int& y){`this 将导致 x 和 y 通过引用传递，因此 sum 将是能够更新它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:32:12.083

我猜“错误”是指最后一个 cout 的输出没有像您期望的那样显示“a”和“b”。但是您将它们按值传递给“总和”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T12:34:24.793

我假设您只是在学习指针和引用。

您的函数`swap`交换两个指针的内容。请注意，您已经输入`using namespace std`并且 std 也有一个交换功能，所以我建议从您的源中删除它，尽管如果您传递指向 int 的指针，您的将是更接近的匹配。

您调用`sum`的函数显然是用词不当，因为它实际上并没有求和或添加任何内容，它试图通过调用指针版本来进行交换。

要修复您的特定错误，它必须通过引用获取其参数，并且`b`应该指向 y，而不是 x。

# iphone - 使用 NSPredicate iOS 在具有 NSArray 和 NSString 的 NSArray 中查找值

> ID：16060026
> 
> 赞同：2
> 
> 时间：2013-04-17T12:27:47.247
> 
> 标签：iphone, ios, objective-c, nspredicate

`NSArray`只有我可以找到值：

```
NSArray *arr = [NSArray arrayWithObjects:@"299-1-1", @"299-2-1", @"299-3-1", @"399-1-1", @"399-2-1", @"399-3-1", @"499-1-1", @"499-2-1", @"499-3-1", nil];
NSString *search = @"299";
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF CONTAINS %@",[NSString stringWithFormat:@"%@", search]];
NSArray *array = [arr filteredArrayUsingPredicate: predicate];
NSLog(@"result: %@", array); 
```

`Found Result`正如预期的那样：

```
 result: (
 "299-1-1",
 "299-2-1",
 "299-3-1"
 ) 
```

但是为了`NSArray`拥有`NSArray``NSString`

```
NSArray *arr = [NSArray arrayWithObjects:[NSArray arrayWithObjects:@"299-1-1", nil],[NSArray arrayWithObjects:@"399-1-1", nil],[NSArray arrayWithObjects:@"499-1-1", nil], nil]; 
```

这里会有什么`predicate syntax`？？？？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T13:14:22.997

要在嵌套数组中搜索，您可以在谓词中使用“ANY”运算符：

```
NSArray *arr = [NSArray arrayWithObjects:[NSArray arrayWithObjects:@"299-1-1", nil],[NSArray arrayWithObjects:@"399-1-1", nil],[NSArray arrayWithObjects:@"499-1-1", nil], nil];
NSString *search = @"299";
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY SELF CONTAINS %@", search];
NSArray *array = [arr filteredArrayUsingPredicate: predicate];
NSLog(@"result: %@", array); 
```

输出：

```
(
    (
        “299-1-1”
    )
)

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T12:48:07.133

如果您想提供一组 searchTerms，那么您需要更改您的谓词。

像这样的事情会做到这一点

```
NSArray *arr         = @[ @"299-1-1", @"299-2-1", @"299-3-1", @"399-1-1", @"399-2-1", @"399-3-1", @"499-1-1", @"499-2-1", @"499-3-1" ];
NSArray *searchTerms = @[ @"299", @"399" ];

NSPredicate *predicate = [NSPredicate predicateWithBlock:^ (id evaluatedObject, NSDictionary *bindings) {   
  for (NSString *searchTerm in searchTerms) {
    if (NSNotFound != [evaluatedObject rangeOfString:searchTerm].location) {
      return YES;
    }   
  }
  return NO;
}];

NSArray *array = [arr filteredArrayUsingPredicate:predicate];
NSLog(@"result: %@", array);
//#=> result: (
  "299-1-1",
  "299-2-1",
  "299-3-1",
  "399-1-1",
  "399-2-1",
  "399-3-1"
) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T12:31:02.747

```
NSArray *arr = [NSArray arrayWithObjects:[NSArray arrayWithObjects:@"299-1-1", nil],[NSArray arrayWithObjects:@"399-1-1", nil],[NSArray arrayWithObjects:@"499-1-1", nil], nil];
NSString *search = @"299";
NSMutableArray *filteredArray = [[NSMutableArray alloc] init];
for (NSArray *array in arr) {
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"self CONTAINS %@",search];
    if([array filteredArrayUsingPredicate:predicate].count)
    {
        [filteredArray addObject:[array filteredArrayUsingPredicate:predicate]];
    }
}
NSLog(@"%@", filteredArray); 
```

# asp.net - Request.Url.Authority 不返回预期的域

> ID：16060027
> 
> 赞同：3
> 
> 时间：2013-04-17T12:27:47.573
> 
> 标签：asp.net

我正在我网站的控制器中生成一封电子邮件，其中包含指向我网站的链接：

```
"http://" & Request.Url.Authority & "/some-page" 
```

当我在本地机器（returns `localhost:12345`）和生产环境（returns `www.company.com`）上测试它时，这很有效，但结果有 1 人得到了这个：

```
http://www.company..com/some-page 
```

如您所见`..`，域名中有 2 个。我无法重现此错误，这怎么可能？

编辑：更多信息

*   我发送的电子邮件类型是纯文本电子邮件（没有 HTML 或 RTF）
*   发出有问题的请求时，网络服务器日志将 www.company.com 显示为域
*   我只收到了电子邮件的部分截图。我认为电子邮件客户端是 Outlook，但我看不出 Outlook 会误解链接的原因。
*   这个人（或恶意软件）很可能编辑了这封电子邮件的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-09T01:12:14.730

这实际上是电子邮件编码方式的问题，请参阅此答案：[https](https://stackoverflow.com/a/6603002/186288) ://stackoverflow.com/a/6603002/186288 。总之，您应该将编码更改为 UTF8 以强制对电子邮件进行 base-64 编码，否则某些电子邮件客户端可能会误解默认的 Content-Transfer-Encoding: Quoted-Printable; 编码并在碰巧到达换行点的 URL 中添加额外的“.”。

为此，请在发送电子邮件之前添加此行：

```
mail.BodyEncoding = System.Text.Encoding.UTF8; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-27T12:33:59.423

我应该用一个简单的例子早点尝试这个：

```
Module Module1
    Sub Main()
        Dim SomeAddress As New Uri("http://www.example..com/test")

        Console.WriteLine(SomeAddress.Authority)
    End Sub
End Module 
```

这将在构造函数中抛出异常：

> System.UriFormatException - 无效的 URI：无法解析主机名

因此，如果不进行编辑，客户就无法从我的代码中收到这样的电子邮件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T13:22:17.510

你为什么用`Request.Url.Authority`？我建议你避免使用它，并使用 Request.Url.Host。最好使用`Request.Url.Host`或 Uri 类构造函数，当构造不正确的 URI 时，它会抛出异常，您可以记录它或显示错误。

无论如何，很难预测为什么一个用户得到了`www.company..com`无论如何，您的`Request.Url.Authority`串联代码无法生成它。所以可能错误在其他位置。

# arm - ARM微处理器的内存空间

> ID：16060030
> 
> 赞同：0
> 
> 时间：2013-04-17T12:27:56.047
> 
> 标签：arm, computer-architecture, microprocessors

在 ARM 微处理器中，唯一可用的内存空间是 37 个左右的通用寄存器和状态寄存器，还是微处理器芯片内有单独的可访问内存空间？

例如，在 Atmel AVR 微控制器中，据我了解，内存在同一芯片内部映射，包括数据内存、程序内存（包含程序内存）和 EEPROM 内存。这同样适用于 ARM 微处理器，还是带有 ARM 微处理器的微控制器需要单独的外部存储器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:33:27.483

您对 Atmel AVR 架构的解释并不完全正确。

当然，几乎可以将任何类型的内存集成到与 CPU 内核相同的芯片上。但是，这并不意味着您可以将一个此类集成系统上的可用闪存与另一个系统上的寄存器进行比较。

CPU 内核需要一个内存接口，这才是最重要的：闪存比寄存器慢。因此，如果您将 Flash 连接到 ARM 处理器，它的行为将与 AVR 的板载 Flash 相似（在速度方面的数量级相同）。

此外，ARM 只是一种 IP（设计概念），并已获得众多公司的许可，这些公司构建高效的外围设备，有时还围绕内核构建内存。因此，您会在市场上找到带有 ARM 内核和板载内存的芯片。

（我在上面的描述中简化了一些事情，但我专注于试图指出我认为你误解了两个处理器的比较。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:30:04.643

下面的链接讨论了很多关于如何在 ARM 处理器中进行内存管理的内容。希望能帮助到你

[http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0471c/CHDDJIFI.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0471c/CHDDJIFI.html)

# yii - 创建一个简单的控制器别名

> ID：16060036
> 
> 赞同：2
> 
> 时间：2013-04-17T12:28:06.170
> 
> 标签：yii, alias

我不确定我是否使用了正确的术语，所以我将描述我想要实现的目标。

我有一个名为 ControllerA 的控制器，并希望一个名为 ControllerB 的“虚拟”控制器的功能与 ControllerA 完全相同。

基本上我只希望 url *site.com/ControllerB加载与**site.com/ControllerA*相同的页面（但不重定向）。

希望我的描述足够清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T13:02:06.873

你可以通过一个简单的 URL 规则来实现你想要的：

```
'controllerA/<a>'   => 'controllerA/<a>',
'controllerB/<a>'   => 'controllerA/<a>', 
```

在此处阅读有关 URL 规则的更多信息：[http ://www.yiiframework.com/doc/guide/1.1/en/topics.url#user-friendly-urls](http://www.yiiframework.com/doc/guide/1.1/en/topics.url#user-friendly-urls)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:01:28.070

您可以使用 ControllerB 扩展 ControllerA 并提供扩展控制器名称。下一个覆盖`getViewPath`方法。属性`extendedControler`给我们基本的控制器名称。

```
class ControllerBController extends ControllerAController
{
    private $extendedControler = 'ControllerA';
    public function getViewPath() {
        $nI = Yii::app()->createController($this->extendedControler);
        return $nI[0]->getViewPath();
    }
} 
```

当然你可以使用一些字符串修改。像 str_ireplace：

```
class Klient2Controller extends KlientController
{
    public function getViewPath() {
        //We must extract parent class views directory
        $c = get_parent_class($this);
        $c = str_ireplace('Controller', '', $c); //Extract only controller name
        $nI = Yii::app()->createController($c);
        return $nI[0]->getViewPath();
    }
} 
```

# ios - iOS：MKMapView 中的 WEPopoverController

> ID：16060043
> 
> 赞同：1
> 
> 时间：2013-04-17T12:28:23.500
> 
> 标签：ios, mkmapview, hittest

Because i have more than one element to display at a given location in a mapview, i'd like to display a WEPopoverController in the MKMapView when a given MKPinAnnotationView has been selected.

呈现内容，这是一个表格视图，到目前为止工作正常。我对 MKPinAnnotationView 进行了子类化，当单击注释视图时，我调用了我的自定义演示方法。

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view {

      [view openCustomPopoverInFrame:self.view.frame];

      [mapView deselectAnnotation:view.annotation animated:NO];

      if (_lastAnnotationView != view) {

           [_lastAnnotationView closeCustomPopover];

           _lastAnnotationView = view;
      }
}

- (void) openCustomPopoverInFrame:(CGRect) frame {

      CGRect fromFrame = self.frame; //Pin Annotation View Frame

      WEPopoverContentViewController *contentViewController = [[WEPopoverContentViewController alloc] initWithStyle:UITableViewStylePlain];
      contentViewController.delegate = self;

      WEPopoverController *viewController = [[WEPopoverController alloc] initWithContentViewController:contentViewController];
      //[viewController setPassthroughViews:[NSArray arrayWithObjects:contentViewController.view, contentViewController.tableView, nil]];

      viewController.delegate = self;

      //set the displayed content
      ....

      _myPopoverController = [viewController retain];

      [viewController presentPopoverFromRect:fromFrame inView:self.superview permittedArrowDirections:UIPopoverArrowDirectionUp | UIPopoverArrowDirectionDown animated:YES];

      [contentViewController release];
      [viewController release];
} 
```

在表格视图单元格中选择按钮也可以找到，我得到了预期的响应（该方法被调用并且 popovercontroller 保持在视图层次结构的顶部）。

我的问题是，当我单击 WEPopoverController 内容（表格视图单元格之一，在中心，没有按钮所在的位置）时，点击事件被传递到地图视图，因此隐藏了弹出控制器。我能做些什么来防止通过点击事件？

我尝试了几种解决方案，例如设置 passThroughViews 并在 WETouchableView 中操作 hitTest:withEvent: 方法并始终返回 nil，但这也对我没有任何帮助。

最好的网卡

**编辑**

我现在已经调试了 WETouchableView 中的 hitTest:withEvent: 方法，它似乎总是返回 UITableViewCellContentView 的一个实例，我认为到目前为止应该是正确的。

**编辑**

所以为了更清楚一点，我想显示一个弹出控制器，当它被点击时，它应该会消失，就像通常的注释行为一样，也不应该调用底层视图。它应该保持在视图的顶部，并且点击事件应该被表视图捕获并调用特定的方法（tableView:didSelectRowAtIndexpath:)。

我也看过[这个](https://stackoverflow.com/questions/13013716/how-to-add-a-mkmapkit-behind-uitableview-just-like-svpply-does)解决方案，但它似乎对我不起作用，并且底层视图（即地图视图）被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:02:44.240

好的，对我有用的是添加一个具有透明背景颜色的 UIButton 作为表格视图单元格的第一个子视图。现在，单元格上的所有点击事件都被 UIButton 捕获。顺便说一句，所有滑动事件都会被表格视图捕获，所以至少可以正常工作。

老实说，这不是一个很好的解决方案，但它对我有用。我真的很感激任何进一步的建议！

最好的网卡

# kml - KML 文件如何帮助在 Google 地球中加载地图？

> ID：16060049
> 
> 赞同：0
> 
> 时间：2013-04-17T12:28:48.927
> 
> 标签：kml, google-earth

[https://developers.google.com/kml/documentation/kml_tut](https://developers.google.com/kml/documentation/kml_tut)

> KML 使用带有嵌套元素和属性的基于标记的结构，并且基于 XML 标准。

因此，KML 基本上是一个“文本”文件，它不包含地图。

Google 地球如何使用 KML 文件显示地图？**它是否将 KML 文件视为“索引”以了解当用户按下 x 按钮时要选择哪个地图？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:12:15.053

KML 是一种 XML 语言，用于使用点、线、多边形、3d 模型和叠加来注释地球。

打个比方，HTML 是一种在 Web 浏览器中以二维文档上下文构建和表示文本信息和多媒体的语言。同样，KML 是一种在地图上构建和表示地理空间和时间实体并在“地球浏览器”（例如 Google 地球）中显示的语言。

具体来说，KML 允许您：

*   指定图标和标签以识别地球表面上的位置
*   创建不同的相机位置以定义地理特征的独特视图
*   定义图像叠加层以附加到地面或屏幕
*   定义样式以指定 KML 要素外观
*   将 KML 功能组织到层次结构中
*   从本地或远程网络位置定位和更新检索到的 KML 文档

KML 是一种结构化的数据格式，它告诉 Google 地球如何显示数据（点、线、图标、颜色、样式等）以及在哪里绘制数据（在给定的高度可选的经度和纬度）。KML 只是一种数据交换格式。

这是一个简单的 KML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document>
<Placemark>
  <name>New York City</name>
  <description>New York City</description>
  <Point>
    <coordinates>-74.006393,40.714172</coordinates>
  </Point>
</Placemark>
</Document>
</kml> 
```

作为“索引”，默认情况下，KML 文件将加载到覆盖 KML 中所有包含要素的中心点，但如果定义了*[LookAt](https://developers.google.com/kml/documentation/kmlreference#lookat)*或*[Camera](https://developers.google.com/kml/documentation/kmlreference#camera)* ，则可以覆盖该文件。如果您单击地标，它将飞到由其坐标定义的该特征。

在 Google 地球中单击这样的地标将飞到该位置，对于上面的示例，该位置恰好是纽约市。

KML 是一个“文本”文件，也可以打包和分发在一个“ [KMZ](https://developers.google.com/kml/documentation/kmzarchives) ”文件中，该文件是一个带有*.kmz*文件扩展名的 ZIP 文件。

有关 KML 的更多详细信息，请参阅[OGC KML 标准#07-147r2](http://www.opengeospatial.org/standards/kml)。

# windows - 从 dll 导入的全局变量未更新

> ID：16060053
> 
> 赞同：0
> 
> 时间：2013-04-17T12:29:00.890
> 
> 标签：windows, winapi, dll

我正在使用 __declspec(dllexport) 从 dll 中导出全局变量，并使用 __declspec(dllimport) 在客户端 exe 中导入相同的变量。

dll 中的全局变量在单独的线程中随时间更新。我想在我的客户端 .exe 中接收这个更新的数据，但我没有得到它。每次我使用客户端 exe 中的计时器读取数据时，我得到的是全局变量的唯一初始值。

这种行为的解释是什么？我能做些什么来实现我想要实现的目标？是否有不包括从 dll 导出的 get() 和 set() 函数的选项？

以下是从 dll 导出的代码：

```
typedef struct{
    int iTotalQueues;
    int iCurrentQueue;
    wchar_t szQueueName[100];
}UPDATE_STATUS_DATA;

__declspec(dllexport) UPDATE_STATUS_DATA UpdateStatusData; 
```

该结构成员长时间循环更新。更新代码在 dll 本身中。

这是在exe中导入的代码：

```
typedef struct{
    int iTotalQueues;
    int iCurrentQueue;
    wchar_t szQueueName[100];
}UPDATE_STATUS_DATA;

__declspec(dllimport) UPDATE_STATUS_DATA UpdateStatusData; 
```

我正在计时器响应中读取这些数据，但没有获得更新的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:23:11.760

您问题中的代码与您在构建到一个简单的测试项目时所期望的一样。所以，这是我可以编造的两种解释：

1.  您正在`UpdateStatusData`您的可执行文件中获取副本。因此，`UpdateStatusData`对 DLL 中值的更改不会反映在副本中。
2.  由于某种原因，您的 DLL 没有修改结构。

# javascript - 将字符串中的 '\' 替换为 '-'

> ID：16060054
> 
> 赞同：0
> 
> 时间：2013-04-17T12:29:04.580
> 
> 标签：javascript, regex, string, replace, html-escape-characters

我已经看到了之前提出的所有问题，但它并没有帮助我。我有一个包含反斜杠的字符串，我想用'-'替换反斜杠

```
var s="adbc\sjhf\fkjfh\af";
s = s.replace(/\\/g,'-');
alert(s); 
```

我认为这是正确的方法，当然我错了，因为在警报中它显示`adbcsjhffkjfhaf`但我需要它像`adbc-sjhf-fkjfh-af`。

我在这里犯了什么错误，它的原因是什么以及如何实现这个......？？

[工作 JS 小提琴](http://jsfiddle.net/GHBV8/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T12:30:22.850

你`s`最初是`adbcsjhffkjfhaf`. 你的意思是

```
var s="adbc\\sjhf\\fkjfh\\af"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T12:30:42.710

您需要将输入字符串中的反斜杠加倍：

```
var s="adbc\\sjhf\\fkjfh\\af"; 
```

在字符串文字中以'\' 为前缀赋予该字符特殊的含义（例如，`'\t'`表示制表符）。如果你想在你的字符串中实际包含一个'\'，你必须用第二个反斜杠对其进行转义：`'\\'`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T12:31:19.870

Javascript 忽略了字符串中的 in `\`。`\s` `\f` `\a`做一个`console.log(s)`分配后，你会明白的。

你需要`\`用`\\`. 喜欢：`"adbc\\sjhf\\fkjfh\\af"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T12:46:57.593

该字符串不包含反斜杠，它包含 \a、\s 和 \f（换页符的转义序列）。

如果您将字符串更改为`adbc\\sjhf\\fkjfh\\af`

```
var s="adbc\\sjhf\\fkjfh\\af";
s = s.replace(/\\/g,'-');
alert(s); 
```

您将可以将其替换为`-`

# jquery - 视差背景不占用整个“页面”区域

> ID：16060055
> 
> 赞同：0
> 
> 时间：2013-04-17T12:29:17.310
> 
> 标签：jquery, jquery-plugins, parallax, smooth-scrolling

我正在使用[StickyPanel](https://code.google.com/p/sticky-panel/ "滚动过去后使导航栏保持不变")、[Smooth-Scroll](https://github.com/kswedberg/jquery-smooth-scroll "用于在同一页面链接上的平滑滚动")和[Scrolly](http://lab.victorcoulon.fr/javascript/scrolly/ "对于视差背景")，我需要在偶数“页面”上固定（内容在其上移动）背景**，以及在***奇数*“页面”上使用视差背景（内容和背景相互分开移动）。所以我的“页面”是**偶数**、*奇数*、**偶数**、*奇数*、**偶数**。“页面”是 5 个 div，一个在另一个之下，每个 div 设置为浏览器窗口的宽度和高度，以制作一个单页网站。

我遇到的问题是，在具有视差背景的“页面”2 和 4 上，背景位置错误。通过检查元素，我发现*Scrolly*设置的背景位置太远了，甚至没有显示背景图像。*Scrolly*为您提供了两个属性来设置具有滚动背景的元素：

```
<div data-velocity=".3" data-fit="1000"> 
```

这些允许您设置视差元素的速度并分别设置相对背景位置。我发现当我使用 data-fit 属性调整背景时，它永远不会出现在正确的位置，因为“页面”以及背景高度是相对于浏览器窗口的。

**我需要背景始终覆盖 div，即如果背景图像是不透明的图像，则 div 的背景颜色将永远不会显示。**

我认为可能将背景设置为比浏览器窗口多约 10% 可能会有所帮助，但我不知道该怎么做。

这是一个[jsFiddle](http://jsfiddle.net/8742d/embedded/result/)，尽管由于某种原因背景图像不会显示在“页面”5上。我还将背景图像设置为占位符，并将 div 设置为具有随机背景颜色，以便在开发时轻松。

这是一个很难解释的问题，所以我可能没有彻底传达我的观点。如果我想到一个更好的方法来解释这个问题，我会更新我的帖子。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:25:17.650

好的，这是一个简单的，但终于弄明白了。我是在使用 JS 获取页面高度的一半，获取页面高度的 130%，然后将背景图像 css 设置为那样，当我意识到我可以在 CSS 中设置它时......所以我设置了背景- size 到 100% 130%，然后只是用 data-fit 属性完善它的一个例子。无论如何，它现在已经足够接近我的喜好了。

```
background-size: 100% 130%; 
```

[jsFiddle 对于那些感兴趣的人](http://jsfiddle.net/8742d/4/)

# excel - 如何在 Excel 2013 中删除数字列中的单个前导空格

> ID：16060056
> 
> 赞同：0
> 
> 时间：2013-04-17T12:29:17.607
> 
> 标签：excel, excel-2013

我真的尝试了很多内置功能以及谷歌搜索，但没有一种方法不能达到预期的效果。

我的确切问题是：我从网站获得并直接复制到excel中的数字列很少。

在这些列中，整个列的单元格中每个数字的开头都有一个单前导空格。例子`523946.00`。在这个数字中，数字前有一个空格`5`。

我尝试了很多 TRIM 和 SUBSTITUTE 内置函数，但没有解决我删除空格的问题。

而且我的**期望**是，当我在同一列中选择两个或多个单元格（删除空格）时，Excel 应该自动显示或显示`AVERAGE: <Average value> SUM: <total Sum> COUNT: <count value>` 在下面的状态栏或底部功能区。

说，`AVERAGE: 175.49 COUNT: 2 SUM: 350.98`

此类信息未显示在底部。只有我一个`COUNT: 2`人能看到……为什么？我只想要通用格式。没有任何特殊格式。

我正在使用 MS Excel 2013

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:51:21.343

**编辑：**

您实际上可以只使用查找和替换。

1.  复制其中一个故障单元。
2.  选择所有包含不间断空格的单元格，然后选择查找和替换。
3.  将复制的单元格粘贴到查找栏中，删除除最后一个字符以外的所有内容（假设这是非中断空格）。
4.  将替换栏留空，然后按全部替换。

这将删除所有非中断空格。:)

**旧解决方案：**您可以在出现空格的整个列中添加任何内容。

1.  首先复制一个完全空的单元格。（！记住这一步）

2.  然后选择列中的所有单元格并右键单击并选择选择性粘贴。

3.  然后选择几乎在底部的“添加”（见图）并按确定。

![在此处输入图像描述](https://i.stack.imgur.com/W7FOR.jpg)

这将使 excel 重新评估值，就像您已手动修改并输入值一样。Excel 然后正确地将它们转换为数字。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:00:59.000

首先确保您已将列格式化为您想要的。确保它是一个有 2 位小数的数字（或者你需要多少位），然后还要确保没有缩进（也许你认为缩进是一个空格？）并且你让它左对齐，或者您希望数据在哪里。仅此一项就可以解决您的问题。

如果这在此处不起作用，请列出可能的解决方案。

```
=Value(Trim(A1)) ' Removes all white space before and after the text in A1

=Value(Clean(A1)) 'Removes all non printable Charactersin A1

=Value(SUBSTITUTE(I3," ","")) 'Substitutes(Replaces) all instances of " "(Space) with ""(nothing)
                       '****Note: With Substitute you can also specify how many
                       ' Substitutes(Replaces) to make of the value

=Value(SUBSTITUTE(I3," ","",1)) ' Same as above but with only remove the FIRST space

 =Value(Trim(Clean(A1)))    ' Removes all white space before and after the text 
                    ' after removing all Non-Printable Characters

=Value(Trim(Clean(Substitute(A1," ","")))) ' Removes all white space before and after the 
                                    'after removing all Non-Printable Characters
                                    ' And after replaceing all spaces with nothing 

=Value(Right(A1, Len(A1)-1))  ' This takes the End of your text by the number of characters  
                     ' in the value Except the First (In your case should be the Space)

=Value(SUBSTITUTE(I6,CHAR(160),"")) 'To help with the non breaking spaces also. 
```

如果没有任何效果，请分享您为什么要删除空间？就像你试图对数据做些什么一样？因为也许这会打开更多的解决方案

使用 Ole Henrik Skogstrøm 的建议，在函数周围添加了价值，以将结果作为值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:06:46.317

可能是 Excel 将您的单元格视为文本数据。有趣的绿三角在吗？

这是excel中的常见问题。强制数字比文本更容易。只需将列格式化为数字或常规，然后将函数 value() 放入单元格中。

可以使用复制/粘贴特殊值从那里清理东西，然后删除原始列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-21T06:19:26.363

使用 Excel 2007 brettdj 为我回答了这个问题。这对我有用，而且很简单！

要在没有解决方法的情况下直接删除 CHAR(160)，请转到查找和替换

在查找内容中**按住 ALT 并使用数字小键盘键入 0160，** 然后**将替换为保留为空白并选择全部替换**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-12T09:23:52.413

在您的情况下，由于您总是有一串数字，您只想删除第一个字符（空格），因此该公式应该有效：

```
=RIGHT(A1,LEN(A1)-1) 
```

这些数字的长度可能会有所不同，重要的是，您只想删除 1 个（或 2 个或 3 个等）字符。它仍然可以工作。{如果前面有 2 个空格，那么你将在公式中使用 -2，如果是三个 -3，等等)

但是，如果你的数字字符串中的空格数量总是不同的，就像我一样，你可以使用这个对我有用的公式：

```
=VALUE(SUBSTITUTE(TRIM(A1),CHAR(160),"")) 
```

，假设您面临的问题是代码“160”。你可以通过输入: 来找到`=code(A1)`它，在我的例子中，它给了我结果“160”。因此 char(160) 在上面的公式中。

# dynamic - 如何在 iOS 6 中使用自动布局创建具有动态大小的标签

> ID：16060057
> 
> 赞同：0
> 
> 时间：2013-04-17T12:29:17.787
> 
> 标签：dynamic, ios6, label, orientation, autolayout

我在使用自动布局和标签时遇到问题，这些标签会根据一些外部条件在源代码中设置文本。这些布局（纵向和横向）在模拟器上如下所示：

[http://imgur.com/l6Iirun](http://imgur.com/l6Iirun)

[http://imgur.com/n7RwwSD](http://imgur.com/n7RwwSD)

第二个显然不是我想要的，带有 URN 的标签应该填满整个屏幕。我对 Xcode 添加的动态标签有一个宽度约束，即使“名称”标签具有固定宽度并且所有水平空间也是固定的，我也无法摆脱它，这在逻辑上应该让我不需要拥有包含动态文本的标签的宽度约束。关于如何实现我想要的任何帮助？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T04:32:15.643

在我看来，您的标签没有将它们的后沿绑定到超级视图。在右下角有一个小“I beam”图标，点击你的标签，然后点击那个图标，菜单顶部应该是“Pin”，然后选择后沿进行超级查看。标签应该扩展以适应屏幕的宽度，减去一些填充。一旦到位，您应该能够删除宽度约束 - 尽管您可能需要在尺寸检查器中找到它并选择提升到用户约束才能删除它。

如果您没有看到 pin 菜单，请尝试上到顶部并选择 Editor -> Pin，您应该会在那里看到它。

如果它已经被固定，请尝试增加内容压缩阻力优先级并降低宽度的优先级 - 尽管如果固定它并不能修复它，那么还有另一个约束在起作用。

# javascript - 使用 z-index 在其他元素后面显示元素不起作用

> ID：16060060
> 
> 赞同：3
> 
> 时间：2013-04-17T12:29:24.860
> 
> 标签：javascript, jquery, html, css, z-index

我创建了这个小提琴来说明我的问题：http: [//jsfiddle.net/AVxbd/](http://jsfiddle.net/AVxbd/)

我有一个菜单 ( `#container`)，带有一些链接 ( `#text1`, `#text2`)。我制作了一个`#highlighter`元素来突出显示该人在特定时刻所在页面的链接。的HTML：

```
<div id="container">
    <div id="highlighter"></div>
    <div id="text1">Text 1</div><div id="text2">Text 2</div>
</div> 
```

JavaScript：

```
$('#highlighter')
    .offset($('#text1').offset())
    .width($('#text1').width()
);

$('#text1, #text2').click(function(){
    $('#highlighter').animate({
        top: $(this).offset().top,
        left: $(this).offset().left,
        width: $(this).width() + "px"
    },300);
}); 
```

问题是`#highlighter`元素显示*在*和元素上`#text1`。`#text2`那不是我想要的！

我试图用 z-index 解决这个问题：

```
#container {     z-index: 1; }
#highlighter {   z-index: 2; }
#text1, #text2 { z-index: 3; } 
```

但是，这不起作用，正如您在小提琴中看到的那样。

我怎样才能让它工作？我想让`#text1`and`#text2`元素看起来像具有橙色背景，但是因为我希望荧光笔在宽度和位置上设置动画，所以我不能只给这些元素本身提供背景。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T12:31:51.513

添加`position: relative;`到`#text1, #text2`

[http://jsfiddle.net/AVxbd/2/](http://jsfiddle.net/AVxbd/2/)

z-index 仅适用于定位元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T12:32:19.077

```
#text1, #text2 {
cursor: pointer;
display: inline-block;
font-size: 30px;
height: 50px;
line-height: 50px;
text-align: center;
z-index: 3;
*position:relative;* 
```

}

将**位置**添加到此类。如果未定义位置，Z-index 不起作用。

[有关位置和 z-index 的详细信息，请单击此处。](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:33:09.947

只需`position:relative;`为#text1 和#text2设置

[看演示](http://jsfiddle.net/AVxbd/5/)

# c# - 在 C# WPF 中读取本地 .db 文件

> ID：16060069
> 
> 赞同：1
> 
> 时间：2013-04-17T12:29:55.143
> 
> 标签：c#, .net, wpf

我是 C# 新手，如何在 C# WPF 中读取本地数据库文件？

我已经尝试过本教程：[Link](http://www.dreamincode.net/forums/topic/157830-using-sqlite-with-c#/#/)。

但是我无法让它工作，我在哪里放置 .db 文件，有人可以指出我的好教程或显示正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:03:56.217

尝试这个;

```
string dbfile = "C:\\.....\\datasabename.db";
string connStr= "Data Source=" + dbfile  + ";Version=3;Synchronous=Off;UTF8Encoding=True;";

SQLiteConnection sqlConn= null;
sqlConn = new SQLiteConnection(connStr);
sqlConn.Open(); 
```

# vbscript - VB 脚本 - 在目录中搜索文件

> ID：16060072
> 
> 赞同：2
> 
> 时间：2013-04-17T12:30:02.933
> 
> 标签：vbscript, system-administration

我正在尝试编写一个 VB 脚本（以前从未尝试过） - 我需要它来搜索文件夹'\file001\source$' - 同时在文件夹中搜索所有'Update.exe'文件 - 如果这是手动完成的，在Windows中需要很长时间！我希望它找到的所有具有此名称的文件 - 都被复制到一个新文件夹中。

看着各种帮助论坛，我越来越困惑。

以下是我尝试过的：

```
Set fso = CreateObject("Scripting.FileSystemObject")
ShowSubfolders fso.GetFolder("\\file001\source$") 
```

'文件夹名 = "\file001\source$" '文件名 = "Updater.exe"

```
Function ShowSubFolders(Folder)
    For Each Subfolder in Folder.SubFolders
        Wscript.Echo Subfolder.Path
        ShowSubFolders Subfolder
    Next
End Function 
```

这是通过文件夹搜索，递归地通过文件夹子文件夹查找具有此名称的所有文件。

我还对 -directory.getfiles 进行了研究。但不知道这是否是正确的方向。

作为 VB 脚本的新手，我研究并尝试使用 VB 脚本来获得我想要的功能。如果我能得到任何帮助，我将不胜感激。

再次 - 我的目标是 - 找到给定文件夹和名为 update.exe 的子文件夹中的所有文件 - 然后将找到的这些文件复制到新文件夹中。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T21:56:00.210

如果您只想检查单个文件夹的内容是否存在特定文件，您可以这样做：

```
Set fso = CreateObject("Scripting.FileSystemObject")

foldername = "\\file001\source$"
filename   = "Update.exe"

If fso.FileExists(fso.BuildPath(foldername, filename)) Then
  WScript.Echo filename & " exists."
End If 
```

如果您还想检查子文件夹`foldername`，则需要使用类似这样的内容递归到子文件夹[中](https://stackoverflow.com/a/14965606/1630171)。您可以将上述代码示例中的检查集成到子文件夹的循环中，或者在文件夹中的文件上添加另一个循环：

```
Set fso = CreateObject("Scripting.FileSystemObject")

CopyUpdater fso.GetFolder("\\file001\source$")

Sub CopyUpdater(fldr)
  For Each f In fldr.Files
    If LCase(f.Name) = "update.exe" Then
      'copy file to somewhere else
    End If
  Next

  For Each sf In fldr.SubFolders
    CopyUpdater sf
  Next
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:53:44.123

在这里查看我的问题，我对三种语言（也包括 vbscript）进行了基准测试，它们使用完整的工作示例进行子目录遍历并针对语言进行了优化。[基准测试：python 是否有更快的遍历网络文件夹的方法？](https://stackoverflow.com/questions/13138160/benchmarks-does-python-have-a-faster-way-of-walking-a-network-folder)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:34:00.753

这是一个很好的尝试。阅读以下链接的更多信息并更好地了解事情。

*   [Vbscript列出文件夹和子文件夹中的所有PDF文件](https://stackoverflow.com/questions/4200028/vbscript-list-all-pdf-files-in-folder-and-subfolders)
*   [VBScript 遍历子目录](http://social.technet.microsoft.com/Forums/en-US/ITCG/thread/102ef98d-e815-40f3-9e7a-b28b2b1311c7/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-08T18:27:07.053

```
dim sFilename

Dim objDict
Set objDict=CreateObject("Scripting.Dictionary")
sFilename = ""

'root folder path where subfolder exists 
fileLocation="C:\Users\u258251\Desktop\TestSubfolder"

Dim objFSO 'File System Object
Set objFSO = CreateObject("Scripting.FileSystemObject")

'Add all files with specific extention to dictonary 

Call Recurse(fileLocation)

ItemArray = objDict.Items

'Loop through dictonary
For i = 0 To objDict.count -1
    sFilename = sFilename & ItemArray(i) & VBCRLF
Next 

msgbox(sFilename)

'find a specific file by name and return path 
if objDict.Exists("DP103.txt") then 
    msgbox(objDict.Item("DP103.txt")) 
end if

Sub Recurse(strFolderPath)
    Dim objFolder
    Set objFolder = objFSO.GetFolder(strFolderPath)
    Dim objFile
    Dim objSubFolder

    For Each objFile In objFolder.Files
        If (InStr(objFile.Name, ".") > 0) Then

            'proceed if extention is .txt 
            If (LCase(Mid(objFile.Name, InStrRev(objFile.Name, "."))) = ".txt") Then 
                if objDict.Exists(objFile.Name)=false then 
                'add files and path to dictonary 
                objDict.Add objFile.Name,objfile.Path 
                End if 
            End if 
        End If 
    Next

    For Each objSubFolder In objFolder.SubFolders
        Call Recurse(objSubFolder.Path)
    Next
End Sub 
```

# forms - 使用 CodeIgniter 的多步表单

> ID：16060073
> 
> 赞同：0
> 
> 时间：2013-04-17T12:30:03.180
> 
> 标签：forms, codeigniter, jquery, multi-step

我正在尝试使用 CodeIgniter 构建一个多步骤表单，但我无法弄清楚它应该是怎样的。我的想法是为每个步骤创建不同的控制器功能和视图。我的想法是正确的还是有更好的方法来实现它？您是否建议使用 AJAX 创建表单？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:56:55.773

对于你的问题，我可以提出两种解决方案。使用 ajax 或表单发布取决于您。

方法一

1.第一个步骤将数据保存到表 2.在第二个和所有其他步骤中更新表。如果您要返回功能，则必须仔细工作，并确保您的表单代码在至少第一步通过时具有主键。

方法 2 在此方法中，不要仅通过每个表单发布到会话中保存在表中，当通过最后一步时，您可以将数据从会话中一劳永逸地保存到表中

# c# - 通过 jquery 将集合传递给 MVC 控制器

> ID：16060080
> 
> 赞同：3
> 
> 时间：2013-04-17T12:30:27.713
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-mvc-3

我将 ASP.NET MVC3 与 Jquery 一起使用。我正在尝试使用类似这样的方法将表单元素传递回控制器（请注意，为简单起见，我删除了成功和错误代码）：

```
var formElements = $("#myForm").serialize();
        $.ajax({
            type: "POST",
            url: ScriptResolveUrl("~/Report/SubmitChanges"),
            data: {collection: formElements},
            success: 
            error:
            dataType: "json"
        }); 
```

我的问题是我的控制器方法中的参数应该是什么样的：这是我的控制器方法：

```
public ActionResult SubmitChanges(WHAT GOES HERE?)
{
} 
```

所以我真正要寻找的是进入控制器方法的参数类型应该是什么？我希望能够检索控制器中表单元素的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:06:28.877

所以这就是我所做的。我的表单上有大约 20-30 个元素，所以我真的不想将每个元素都变成参数或将它们全部列在集合中。

在 jquery 中，我执行了以下操作：

```
 var formElements = $("#myForm").serialize();

        $.ajax({
            type: "POST",
            url: ScriptResolveUrl("~/Report/SubmitChanges"),
            data: { parms: formElements },
            success:
            error: 
            dataType: "json"
        }); 
```

然后它作为字符串进入我的控制器：

```
public ActionResult SubmitChanges(string parms) 
```

然后我找到了一个解析该字符串的函数（似乎正在工作）

```
NameValueCollection qscoll = HttpUtility.ParseQueryString(parms); 
```

这似乎可以在没有列出所有表单元素的情况下工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:33:48.017

假设您的表单元素都对应于您的模型（假设它是`MyModel`），那么它应该只是：

```
public ActionResult SubmitChanges(MyModel model)
{
} 
```

MVC 默认模型绑定将完成其余的工作:)。

确保您更改`data`了 jQuery ajax 方法中的定义，但您已经对其进行了序列化。做就是了：

```
data: formElements, 
```

我假设您的 jQuery ajax 方法中的以下内容是复制和粘贴错误？

```
success: 
error: 
```

如果不是，请确保将其删除或将其更改为：

```
success: function (result) {
    //do something
},
error: function () {
    //do something on error
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:08:14.570

你快到了。只需去掉`data`参数周围的括号：

```
var formElements = $('#myForm').serialize();
$.ajax({
    type: 'POST',
    url: ScriptResolveUrl("~/Report/SubmitChanges"),
    data: formElements,
    success: function(result) {
        // handle the success of the AJAX request
    },
    error: function() {
        // an error occurred
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:39:44.017

> 问题是它们没有与我的表单元素对应的模型。

然后你可以有这个：

```
public ActionResult SubmitChanges(int id, string name)
{
} 
```

然后传入各个项目：

```
var o = {
    id = $("#id_elem_id").val(),
    name = $("#name_elem_id").val()
}
$.ajax({
    type: "POST",
    url: ScriptResolveUrl("~/Report/SubmitChanges"),
    data: JSON.stringify(o),
    success: 
    error:
    dataType: "json"
}); 
```

where`id_elem_id`和`name_elem_id`是您的 html 元素的 id。并添加您需要的任何其他参数，只需遵循即可。

# c# - 正则表达式性能随着时间的推移而下降

> ID：16060087
> 
> 赞同：0
> 
> 时间：2013-04-17T12:30:36.480
> 
> 标签：c#, regex

我编写了一个简单的测试应用程序来检查是否可以根据需要使用正则表达式。我需要在提供的文本文件中查找所有重复的标签并将其替换为一些唯一的字符串。例如，如果在输入文件中找到的某些文本多于一次，则所有出现的文本都应替换为 {1}，依此类推。

为此，我创建了以下代码段：

```
 static void Main(string[] args)
    {
        StringBuilder xml = new StringBuilder(File.ReadAllText(@"C:\Integration\Item-26 - Copy.xml"));

        Regex r = new Regex(
            @"(?<exp>\<(?<tag>[^\<\>\s]+)[^\<\>]*\>[^\<\>]+\<\/\k<tag>\>).*\k<exp>", 
            RegexOptions.Singleline | RegexOptions.Compiled | RegexOptions.CultureInvariant);

        List<string> values = new List<string>();

        MatchCollection matches = r.Matches(xml.ToString());

        Stopwatch stopwatch = new Stopwatch();
        stopwatch.Start();

        while (matches.Count > 0)
        {
            foreach (Match m in matches)
            {
                string matchValue = m.Groups["exp"].Value;
                values.Add(matchValue);
                xml.Replace(matchValue, string.Concat("{" + (values.Count - 1) + "}"));
            }

            Console.WriteLine("Analyzed " + matches.Count + " matches, total replacements = " + values.Count);

            matches = r.Matches(xml.ToString());
        }

        stopwatch.Stop();

        Console.WriteLine("=============== " + stopwatch.Elapsed.TotalSeconds);
        Console.ReadLine();
    } 
```

问题是如果我有一个大文件作为输入（> 1MB），那么每次查找匹配项的调用时间都比以前长。一开始调用matches.Count需要0.3秒。而在 100 次迭代之后，将需要超过 1 分钟。

我已经检查了测试应用程序的内存使用情况——它几乎没有消耗任何东西，没有任何真正的增长。

是什么原因造成的，我怎样才能获得稳定的性能？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:06:18.490

这就是我认为的问题所在。你的正则表达式是：

```
@"(?<exp>\<(?<tag>[^\<\>\s]+)[^\<\>]*\>[^\<\>]+\<\/\k<tag>\>).*\k<exp>" 
```

所以你正在寻找类似的东西：

```
<tag>stuff</tag>lots of stuff here<tag>stuff</tag> 
```

在第一次迭代期间，正则表达式很快失败，因为内部标签被替换，因为标签靠得很近。但是随着更多的内部标签被替换，标签之间的空间增加了。很快你就有了：

```
<tag>stuff</tag>hundreds of kilobytes<tag2>other stuff</tag2><tag>stuff</tag> 
```

回溯开始杀死你。

我怀疑您可以通过将`.*`（或`.*?`我之前建议的）替换为`[^\<]*`. 因为您知道，当您找到 a 时，您`<`要么找到匹配项，要么确定失败。

# c# - 正则表达式查找起始编号为 8 的数字

> ID：16060089
> 
> 赞同：-1
> 
> 时间：2013-04-17T12:30:39.570
> 
> 标签：c#, .net, regex

我的问题是我将要构建一个函数来检索 PDF 文档并打印我想要获取以 . 开头的指定数字的文档`8`。

输入：

```
"hello world, the number I want call is 84553741\. help me plz." 
```

正则表达式：

```
 String[] result = Regex.Split(Result, @"[^\d$]"); 
```

如何找到以数字开头的数字`8`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:50:32.690

已经可用的两个答案实际上并不匹配以 8**开头**的数字，而是匹配**包含**8 的数字。但是，匹配将从 8 开始。

要仅匹配以 8 开头的数字，您需要此正则表达式：

```
string[] testArray = new string[] { "test888", "test181", "test890", "test8" };
Regex regex = new Regex(@"(?<!\d)8\d*");

foreach (string testString in testArray)
{
    if (regex.IsMatch(testString))
        Console.WriteLine("\"{0}\" matches: {1}", testString, regex.Match(testString));
    else
        Console.WriteLine("\"{0}\" doesn't match", testString);
} 
```

输出将是：

```
"test888" matches: 888
"test181" doesn't match
"test890" matches: 890
"test8" matches: 8 
```

使用正则表达式`"8\d*"`将产生以下结果：

```
"test888" matches: 888 // not mentioned results: 88 and 8
"test181" matches: 81  // obviously wrong
"test890" matches: 890
"test8" matches: 8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:34:23.037

以下代码将从提供的输入字符串中提取所有以 8 开头的数字。

```
var input= "hello world, the number i want call is 84553741\. help me plz.";
var matches = Regex.Matches(input, @"(?<!\d)8\d*");
IEnumerable<String> numbers = matches.Cast<Match>().Select(m=>m.Value);
foreach(var number in numbers)
{
    Console.WriteLine(number);
} 
```

# php - 根据另一个选择中的值从一个选择中删除选项

> ID：16060091
> 
> 赞同：0
> 
> 时间：2013-04-17T12:30:42.850
> 
> 标签：php, jquery

我的代码从数据库中读取 2 个数据，如果这些数据是特定值，那么它应该从名为 smjer 的选择中删除值 2、3、4、5、6、7、8。数据库中的值在外部 .php 脚本中读取，然后使用 GET 发送回网页。我的问题是下一个：在一个特定情况下，当代码中的第二个选择设置为 3 时，代码应该只从 select smjer 中删除第二个和第三个值。我已经用 jQuery 完成了这个，它可以工作，但我的问题是当我更改其他选择的值时，例如，从 2，我选择值 3，没有任何反应，所以我必须刷新页面，所以我的更改将适用。选择看起来像这样：

```
<select name="smjer" class="smjer">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
</select> 
```

二选一：

```
<select name="godina" class="upis">
<option value="1" >1.</option>
<option value="2" >2.</option>
<option value="3">3.</option>
</select> 
```

以及删除代码：

```
<?php }
if(($_GET['program1'])=='1'&&($_GET['stupanj_spreme1']=='2'))
{?>
<script>
$(document).ready(function(e) {
    var ary=[2,3,4,5,6,7,8];
var provjera=$('.upis').val();
if(provjera=='3')
{
    var ary=[2,3];
}
$('[name=smjer] option').filter(function(){
return ($.inArray(parseInt(this.value),ary) >-1);
}).remove();
});
</script>
<?php } ?> 
```

我一直在网上读到这样的事情应该用 AJAX 来完成，但我对 AJAX 一无所知，我想避免它。提前Tnx。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:40:39.900

与其在准备就绪后运行您的 javascript，不如将其绑定到相关 select 的 change 事件：

```
$(document).ready(function(e) {
  // When the value of the select changes, run this:
  $('.upis').change(function(){
    var ary=[2,3,4,5,6,7,8];
    var provjera=$('.upis').val();
    if(provjera=='3')
    {
      var ary=[2,3];
    }
    $('[name=smjer] option').filter(function(){
      return ($.inArray(parseInt(this.value),ary) >-1);
    }).remove();
  });
}); 
```

此外，最佳实践：如果您不希望“upis”应用于此页面上的另一个元素，请考虑使用 id 而不是 class。

# php - 带有绑定参数的 PHP PDO UPDATE 查询

> ID：16060095
> 
> 赞同：1
> 
> 时间：2013-04-17T12:30:52.693
> 
> 标签：php, pdo

我正在尝试运行以下查询：

```
$sth = "UPDATE `users` SET users_password VALUES (:hash) WHERE users_id = $users_id";
$q = $conn->prepare($sth);
$q->execute(array(':hash'=>$hash)); 
```

但我得到以下信息：

```
Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'VALUES ('$2y$12$Ao46iC7W9Lj8FFfSmAaeoeQs9O.3QRVtDbHAyvpzH90YIUN61ma8i') WHERE us' at line 1' 
```

有任何想法吗？

（是的，代码不在 try, catch 块中，但只是在此时尝试一些东西）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:32:05.683

改变这个

```
$sth = "UPDATE `users` SET users_password VALUES (:hash) WHERE users_id = $users_id"; 
```

到

```
$sth = "UPDATE `users` SET users_password = :hash WHERE users_id = $users_id"; 
```

# java - 使用 AndEngine 的 onAreaTouched 中的负坐标

> ID：16060103
> 
> 赞同：0
> 
> 时间：2013-04-17T12:31:14.357
> 
> 标签：java, android, andengine

我有一个带有触摸事件的屏幕大小的矩形。它工作正常。然后我有一个实体附加到矩形上，我将一些精灵作为我的按钮附加到它上面。

问题是，当我在 Sprites 中调用 onAreaTouched 之后显示我得到的点时，我得到了负点，例如 (-200, 10)。所以我无法在矩形中找到事件。

实体放置其他对象或解释我的负坐标是否有任何问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:19:18.450

可能您正在接收参考矩形的信息坐标？

你能显示一些代码吗？

# c# - Microsoft Word 在用户 PC 上使用加载项在 BeforeSaveAs 之后挂起

> ID：16060109
> 
> 赞同：1
> 
> 时间：2013-04-17T12:31:31.967
> 
> 标签：c#, ms-word, vsto, word-2010, office-addins

我有一个用于 Word 的 C# 4.0 VSTO 加载项，它连接到`DocumentBeforeSave`（*以删除文档中的一些自定义标记*）。这通常工作正常，但在极少数用户计算机（*运行 Word 2010 64 位 Windows 7*）上，用户在尝试**另存**为时会遇到挂起（*保存工作正常，自动保存也是如此*）。

日志记录显示我的代码已经正常退出，所以我很难理解是什么原因造成的。任何想法将不胜感激。

# ios - iOS：“recognizer.view.center = CGPointMake(...”的错误效果

> ID：16060112
> 
> 赞同：1
> 
> 时间：2013-04-17T12:31:40.407
> 
> 标签：ios, uiviewcontroller, uipangesturerecognizer

当用户释放它时，我正在使用 locationInView 来设置我的按钮的位置。释放后，我给出了之前存储的位置，但实际上，我的按钮并没有回到正确的位置。

这是我的代码：

```
- (IBAction)handlePan:(UIPanGestureRecognizer *)recognizer{

    CGPoint translation = [recognizer translationInView:self.view];
    recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x,
                                         recognizer.view.center.y + translation.y);

    [recognizer setTranslation:CGPointMake(0, 0) inView:self.view];

    static CGPoint startLocation;

    if (recognizer.state == UIGestureRecognizerStateBegan) {
        startLocation = [recognizer locationInView:self.view];
        NSLog(@"Began: %d" @"-" @"%d", (int)startLocation.x , (int)startLocation.y);
    }

    if (recognizer.state == UIGestureRecognizerStateEnded)
    {
        NSLog(@"Ended Bef: %d" @"-" @"%d", (int)startLocation.x, (int)startLocation.y);
        recognizer.view.center =  CGPointMake(startLocation.x, startLocation.y);

        startLocation = [recognizer locationInView:self.view];
        NSLog(@"Ended Aft: %d" @"-" @"%d", (int)startLocation.x, (int)startLocation.y);

    }

 } 
```

事实上，指令：

```
recognizer.view.center =  CGPointMake(startLocation.x, startLocation.y); 
```

给出错误的效果。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T21:54:28.007

几个想法：

1.  我建议`startLocation`在对`center`.

2.  您正在使用用户触摸的位置`startLocation`。你真的应该`center`用`recognizer.view`. 用户不太可能在按钮的中心精确地开始他们的手势。因此，您不太可能回到原来的位置。

有点不相关，但是：

1.  `CGMakePoint`重置子句中的`center`of时不需要使用。如果你真的想要，你可以使用，但它是不必要的。如果你愿意，你可以使用。`recognizer.view``UIGestureRecognizerStateEnded``CGPointMake``startLocation`

2.  您可能希望将视图的返回设置为动画`startLocation`。让它立即去那里是不和谐的。

3.  顺便说一句，如果您已保存`startLocation`，则无需不断重置`translation`. 只需使用`startLocation`plus `translation`。对我来说似乎更清楚，但显然这是主观的。

4.  我个人认为在记录结构`NSStringFromCGPoint`时非常有用。`CGPoint`

所以，我建议：

```
- (IBAction)handlePan:(UIPanGestureRecognizer *)recognizer
{
    static CGPoint startLocation;

    if (recognizer.state == UIGestureRecognizerStateBegan)
    {
        startLocation = recognizer.view.center;
        NSLog(@"Began: %@", NSStringFromCGPoint(startLocation));
    }

    CGPoint translation = [recognizer translationInView:self.view];

    recognizer.view.center = CGPointMake(startLocation.x + translation.x,
                                         startLocation.y + translation.y);

    if (recognizer.state == UIGestureRecognizerStateEnded)
    {
        NSLog(@"Ended Bef: %@", NSStringFromCGPoint(startLocation));

        [UIView animateWithDuration:0.25
                         animations:^{
                             recognizer.view.center = startLocation;
                         }];

        CGPoint finalLocation = [recognizer locationInView:self.view];
        NSLog(@"Ended Aft: %@", NSStringFromCGPoint(finalLocation));
    }
} 
```

# php - 在 php 中路由 URL 的更好方法

> ID：16060114
> 
> 赞同：0
> 
> 时间：2013-04-17T12:31:49.993
> 
> 标签：php, routing

我没有使用 MVC 结构，因为我发现它很难处理。所以，在我所有的网络项目中，我都是一步一步直接使用的。（我不知道确切的词，但是 WordPress 使用的结构。即一个一个地加载文件。）

我将所有 URL 请求重定向到`index.php`文件 Using `.htaccess`，并从中获取 url 查询。然后使用该查询加载适当的页面。

站点`index.php`文件

```
// load all configuration files, function files here.

$query = ( isset ($_GET['q']) ) ? $_GET['q'] : "index";
if ( !userLoggedIn() ) {
     if ($query == "index") {
          include_once ("pages/index.php");
     } elseif ($query == "signup") {
          include_once ("pages/signup.php");
     } else {
          include_once ("pages/404.php");
     }
} else {
     if (in_array($query, get_list_of_usernames())) {
          include_once ("pages/users.php");
     } elseif () {
          // and so on...
     } else {
          include_once ("pages/404.php");
     }
} 
```

现在，我的问题，

*   我在 URL 路由方面做得对吗？或者还有其他更有效的方法吗？
*   这种结构比 MVC 好，还是 MVC 比这更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:37:03.027

路由只是 MVC 的一部分，是控制器部分的一部分。MVC 模式理论上可以被视为与您想要的路由方式不同的东西。MVC 更多的是关于如何构建代码。

我曾经为路由的自制方法做过类似的事情。这取决于具有操作方法的控制器类。

您需要调用一个基类`Controller`，并且所有控制器类都需要扩展它。所以基本控制器会是`class Controller {}`，任何控制器都可能像`class someController extends Controller { function someAction() {} }`......调用该方法将是`http://mysite/someController/someAction`

索引.php：

```
// include callable controllers here
$partsA = explode("?", $_SERVER['REQUEST_URI']); // split querystring
$partsB = explode("/", $partsA[0]); // get url parts
if (count($partsB) < 2)
    die("missing controller in url");
elseif (count($partsB) < 3)
    die("missing action in url");
$className = $partsB[1];
$methodName = $partsB[2];
if (class_exists($className))
    if (!is_subclass_of($className, "controller"))
        die(htmlspecialchars("Class $className doesn't extend controller")); // prevents use of unauthorized classes
    else
        $controller = new $className();
else
    die(htmlspecialchars("Class $className doesn't exist"));

if (!method_exists($controller, $methodName))
    die(htmlspecialchars("Method $methodName doesn't exist"));
else
    $controller->$methodName(); 
```

Controller.php：（基本控制器）

```
class Controller {} 
```

现在任何控制器.... 例如 SomeController.php：

```
class someController extends Controller {
    function someAction() {
        echo "test";
    }
} 
```

...调用该`someAction()`方法将完成`http://mysite/someController/someAction`，向您展示`test`

# php - 有什么方法可以减少 htmlspecialchars() CPU 使用率？

> ID：16060127
> 
> 赞同：6
> 
> 时间：2013-04-17T12:32:15.577
> 
> 标签：php, performance, twig, cpu-usage, htmlspecialchars

我有一个`php 5.4`/`mysql`网站，每天有 500 万次点击，运行在带有`nginx`和`php-fpm`. 数据库位于单独的服务器上。

我注意到，在高峰时间，我的网络服务器负载高达 15，而不是四核处理器的正常 4。我已经使用`xdebug`和[xhprof](http://techportal.inviqa.com/2009/12/01/profiling-with-xhprof/)分析了我的 php 应用程序，并看到**90% 的 CPU 工作是由`htmlspecialchars()`**`Twig`我用来显示数据的模板中的函数完成的。有时`htmlspecialchars()`每页有 100 到 1000 个调用。我试图减少不必要的转义，但仍然无法避免。

有什么办法可以按`htmlspecialchars()`功能减少 CPU 使用率？也许为此在php中有某种缓存？或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T16:39:40.003

不要使用树枝。只需将 php-files 与此代码一起使用：

```
<?php
// Load a php-file and use it as a template
function template($tpl_file, $vars=array()) {
    $dir='/usr/local/app/view/'.$tpl_file.'.php';
    if(file_exists($dir)){
        // Make variables from the array easily accessible in the view
        extract($vars);
        // Start collecting output in a buffer
        ob_start();
        require($dir);
        // Get the contents of the buffer
        $applied_template = ob_get_contents();
        // Flush the buffer
        ob_end_clean();
        return $applied_template;
    }
} 
```

# delphi - 在 Delphi 中使用 ADOquery 执行更新查询的返回代码到 PostgreSQL

> ID：16060130
> 
> 赞同：3
> 
> 时间：2013-04-17T12:32:19.787
> 
> 标签：delphi, tadoquery

我将 Adoquery 与 Postgres 数据库一起使用。当我执行 UPDATE 或 INSERT 查询时，ExecSql 或 OPEN 会返回受影响的记录数，但总是-1。我使用最新版本的 psqlODBC：09.01.0200。

代码：

```
Adoquery1.close;
Adoquery1.SQL.Clear;
query := 'insert into  testtabel (nummer, naam) values (3,''Barnsten'') ';
Adoquery1.SQL.Add(query ) ;
result := Adoquery1.ExecSql; 
```

结果是-1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-14T04:55:12.700

```
function PerformSQL(const ASQL: string): integer;
begin
  Result := -1;
  if ASQL <> '' then
  begin
    ZQuery1.SQL.Text := ASQL;
    ZQuery1.ExecSQL;
    Result := ZQuery1.RowsAffected;
  end;
end;

 ShowMessage
    (IntToStr(PerformSQL('insert into test(te_id, te_code, te_name, te_type)' +
    ' VALUES(DEFAULT, 15, ''tezty68'', 1), (DEFAULT, 16, ''teztx75'', 1), (DEFAULT, 18, ''teztx89'', 1)')
    )); 
```

还给我 3。

# cuda - 调用 cudaMemcpyAsync 时何时可以安全地重用 CPU 缓冲区？

> ID：16060132
> 
> 赞同：0
> 
> 时间：2013-04-17T12:32:23.083
> 
> 标签：cuda

我的项目将有多个线程，每个线程在不同的 cudaStreams 上发布内核执行。其他一些线程将使用将存储在队列中的结果这里的一些伪代码：

```
while(true) {
  cudaMemcpyAsync(d_mem, h_mem, some_stream) 
  kernel_launch(some_stream)
  cudaMemcpyAsync(h_queue_results[i++], d_result, some_stream)
} 
```

在第一个 cudaMemcpyAsync 返回后重用 h_mem 是否安全？还是应该使用 N 个主机缓冲区来发出 gpu 计算？

如何知道何时可以重用 h_mem？我应该使用 cudaevents 进行一些同步吗？

顺便提一句。h_mem 是主机固定的。如果它是可分页的，我可以直接重用 h_mem 吗？从我在这里读到的内容看来，我可以在 memcpyasync 返回后立即重用，对吗？

> 异步
> 
> 对于从可分页主机内存到设备内存的传输，主机内存会立即复制到暂存缓冲区（不执行设备同步）。一旦可分页缓冲区被复制到暂存内存，该函数将返回。到最终目的地的 DMA 传输可能尚未完成。对于固定主机内存和设备内存之间的传输，该函数是完全异步的。对于从设备内存到可分页主机内存的传输，该函数仅在复制完成后返回。对于所有其他传输，该函数是完全异步的。如果必须首先将可分页内存暂存到固定内存，这将使用工作线程异步处理。对于从任何主机存储器到任何主机存储器的传输，该函数相对于主机是完全同步的。

[MemcpyAsynchronousBehavior](http://developer.download.nvidia.com/compute/cuda/4_1/rel/toolkit/docs/online/sync_async.html#MemcpyAsynchronousBehavior)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:03:15.730

In order to get copy/compute overlap, you must use pinned memory. The reason for this is contained in the paragraph you excerpted. Presumably the whole reason for your multi-streamed approach is for copy/compute overlap, so I don't think the correct answer is to switch to using pageable memory buffers.

Regarding your question, assuming `h_mem` is only used as the source buffer for the pseudo-code you've shown here (i.e. the data in it only participates in that one `cudaMemcpyAsync` call), then the h_mem buffer is no longer needed once the *next* cuda operation in that stream begins. So if your `kernel_launch` were an actual `kernel<<<...>>>(...)`, then once `kernel` begins, you can be assured that the previous `cudaMemcpyAsync` is complete.

You could use cudaEvents with `cudaEventSynchronize()` or `cudaStreamWaitEvent()`, or you could use `cudaStreamSynchronize()` directly in the stream. For example, if you have a `cudaStreamSynchronize()` call somewhere in the stream pseudocode you have shown, and it is after the `cudaMemcpyAsync` call, then any code after the `cudaStreamSynchronize()` call is guaranteed to be executing after the `cudaMemcpyAsync()` call is complete. All of the calls I've referenced are documented in the [usual place](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html).

# android - 使用 FFT 从声音输入计算频率

> ID：16060134
> 
> 赞同：0
> 
> 时间：2013-04-17T12:32:25.293
> 
> 标签：android, signal-processing, fft

我的应用程序。正在以 RPM 显示输入声音的峰值频率。我有一个双精度数组包含时域中的样本。

```
audioRecord.read(buffer, 0, 1024); 
```

然后我对它做了 FFT。

```
transformer.ft(toTransform); 
```

[在这里](http://herschel.esac.esa.int/hcss-doc-10.0/load/hcss_drm/api/herschel/ia/numeric/toolbox/xform/util/ComplexDoubleFFT.html)使用这个类

然后我得到了复数值的最大值，这是 FFT 的结果

// 块大小 = 1024

```
double magnitude[] = new double[blockSize / 2];

            for (int i = 0; i < magnitude.length; i++) {
                double R = toTransform[2 * i] * toTransform[2 * i];
                double I = toTransform[2 * i + 1] * toTransform[2 * i * 1];

                magnitude[i] = Math.sqrt(I + R);
            }
            int maxIndex = 0;
            double max = magnitude[0];
            for(int i = 1; i < magnitude.length; i++) {
                if (magnitude[i] > max) {
                    max = magnitude[i];
                    maxIndex = i;
                }
            } 
```

现在我得到了最大幅度的索引...... 1 - 我怎样才能得到峰值频率的详细信息？2 - 是否有任何名为 ComputeFrequency() 或 getFrequency() 的现成函数？提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:48:31.717

对应于给定 FFT bin 索引的频率由下式给出：

```
f = i * Fs / N; 
```

在哪里：

```
Fs = sample rate (Hz)
N = FFT size
i = bin index 
```

因此，对于您的峰值指数`maxIndex`和 FFT 大小`blockSize`，峰值的频率将是：

```
f = maxIndex * Fs / blockSize; 
```

有关更多详细信息，请参阅[此答案](https://stackoverflow.com/questions/4364823/how-to-get-frequency-from-fft-result/4371627#4371627)。

# android - Android在保存到SD卡之前拍照并调整大小

> ID：16060143
> 
> 赞同：18
> 
> 时间：2013-04-17T12:32:39.313
> 
> 标签：android, android-camera

我希望我的代码在保存之前调整图像大小，但我在 Google 上找不到任何相关信息。请问你能帮帮我吗 ？

这是代码（来自 Android 文档）：

```
private void galleryAddPic() {
    Intent mediaScanIntent = new Intent("android.intent.action.MEDIA_SCANNER_SCAN_FILE");
    File f = new File(mCurrentPhotoPath);

    picturePathForUpload = mCurrentPhotoPath;

    Uri contentUri = Uri.fromFile(f);
    mediaScanIntent.setData(contentUri);
    this.sendBroadcast(mediaScanIntent);
} 
```

之后，我必须将其上传到服务器。

非常感谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-17T14:28:46.333

您可以按照以下代码保存位图图像

```
Bitmap photo = (Bitmap) "your Bitmap image";
photo = Bitmap.createScaledBitmap(photo, 100, 100, false);
ByteArrayOutputStream bytes = new ByteArrayOutputStream();
photo.compress(Bitmap.CompressFormat.JPEG, 40, bytes);

File f = new File(Environment.getExternalStorageDirectory()
        + File.separator + "Imagename.jpg");
f.createNewFile();
FileOutputStream fo = new FileOutputStream(f);
fo.write(bytes.toByteArray());
fo.close(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-24T21:57:09.287

在阅读了其他答案并没有找到我想要的东西之后，这是我获取适当​​缩放位图的方法。这是对 Prabu 答案的改编。

它确保您的图片以不会使照片尺寸变形的方式缩放：

```
public saveScaledPhotoToFile() {
    //Convert your photo to a bitmap
    Bitmap photoBm = (Bitmap) "your Bitmap image";
    //get its orginal dimensions
    int bmOriginalWidth = photoBm.getWidth();
    int bmOriginalHeight = photoBm.getHeight();
    double originalWidthToHeightRatio =  1.0 * bmOriginalWidth / bmOriginalHeight;
    double originalHeightToWidthRatio =  1.0 * bmOriginalHeight / bmOriginalWidth;
    //choose a maximum height
    int maxHeight = 1024;
    //choose a max width
    int maxWidth = 1024;
    //call the method to get the scaled bitmap
    photoBm = getScaledBitmap(photoBm, bmOriginalWidth, bmOriginalHeight,
            originalWidthToHeightRatio, originalHeightToWidthRatio,
            maxHeight, maxWidth);

    /**********THE REST OF THIS IS FROM Prabu's answer*******/
    //create a byte array output stream to hold the photo's bytes
    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
    //compress the photo's bytes into the byte array output stream
    photoBm.compress(Bitmap.CompressFormat.JPEG, 40, bytes);

    //construct a File object to save the scaled file to
    File f = new File(Environment.getExternalStorageDirectory()
            + File.separator + "Imagename.jpg");
    //create the file
    f.createNewFile();

    //create an FileOutputStream on the created file
    FileOutputStream fo = new FileOutputStream(f);
    //write the photo's bytes to the file
    fo.write(bytes.toByteArray());

    //finish by closing the FileOutputStream
    fo.close();
}

private static Bitmap getScaledBitmap(Bitmap bm, int bmOriginalWidth, int bmOriginalHeight, double originalWidthToHeightRatio, double originalHeightToWidthRatio, int maxHeight, int maxWidth) {
    if(bmOriginalWidth > maxWidth || bmOriginalHeight > maxHeight) {
        Log.v(TAG, format("RESIZING bitmap FROM %sx%s ", bmOriginalWidth, bmOriginalHeight));

        if(bmOriginalWidth > bmOriginalHeight) {
            bm = scaleDeminsFromWidth(bm, maxWidth, bmOriginalHeight, originalHeightToWidthRatio);
        } else {
            bm = scaleDeminsFromHeight(bm, maxHeight, bmOriginalHeight, originalWidthToHeightRatio);
        }

        Log.v(TAG, format("RESIZED bitmap TO %sx%s ", bm.getWidth(), bm.getHeight()));
    }
    return bm;
}

private static Bitmap scaleDeminsFromHeight(Bitmap bm, int maxHeight, int bmOriginalHeight, double originalWidthToHeightRatio) {
    int newHeight = (int) Math.min(maxHeight, bmOriginalHeight * .55);
    int newWidth = (int) (newHeight * originalWidthToHeightRatio);
    bm = Bitmap.createScaledBitmap(bm, newWidth, newHeight, true);
    return bm;
}

private static Bitmap scaleDeminsFromWidth(Bitmap bm, int maxWidth, int bmOriginalWidth, double originalHeightToWidthRatio) {
    //scale the width
    int newWidth = (int) Math.min(maxWidth, bmOriginalWidth * .75);
    int newHeight = (int) (newWidth * originalHeightToWidthRatio);
    bm = Bitmap.createScaledBitmap(bm, newWidth, newHeight, true);
    return bm;
} 
```

这是我的 GitHub Gist 的相应链接：[https ://gist.github.com/Lwdthe1/2d1cd0a12f30c18db698](https://gist.github.com/Lwdthe1/2d1cd0a12f30c18db698)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-17T12:40:04.767

**首先将您的图像转换为位图，然后使用以下代码：**

```
Bitmap yourBitmap;
Bitmap resized = Bitmap.createScaledBitmap(yourBitmap, newWidth, newHeight, true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T12:43:37.660

[看到这个](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html#load-bitmap) 会很有帮助。通常，如果您使用意图通过相机拍摄图像，您将获得`uri`图像，因为您将其读取为按比例缩小的图像并将其存储在同一个地方

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T14:33:42.493

如果要截取完整尺寸的图像，那么您别无选择，只能将其保存到 sd 购物车，然后更改图像的大小。

但是，如果缩略图足够，则无需将其保存到 SD 卡中，您可以从返回的意图的附加内容中提取它。

您可以查看我为使用内置相机拍摄图像的两种方法编写的本指南`Activity`：

[指南：Android：将相机活动用于缩略图和全尺寸图像](https://blog-emildesign.rhcloud.com/?p=590)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-26T04:33:51.143

```
BitmapFactory.Options optionsSignature = new BitmapFactory.Options();
final Bitmap bitmapSignature = BitmapFactory.decodeFile(
fileUriSignature.getPath(), optionsSignature);
Bitmap resizedSignature = Bitmap.createScaledBitmap(
                bitmapSignature, 256, 128, true);
signature.setImageBitmap(resizedSignature); 
```

# active-directory - dotnetnuke 6.2 中的成员目录模块

> ID：16060149
> 
> 赞同：0
> 
> 时间：2013-04-17T12:32:48.320
> 
> 标签：active-directory, dotnetnuke, dotnetnuke-module

如何根据单个组在 dotnetnuke 的成员目录模块中显示成员。我只能为单个组而不是多个组设置组过滤器...有人可以建议如何设置吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:01:55.970

要使成员目录适用于特定组，您需要将模块放置到组配置页面上。如果您在 DNN 中使用社交组，则有一个自动设置选项可以为组创建页面，其中应包括成员目录。查看

DotNetNuke 6.2 系列入门

此页面上的教程[http://www.dotnetnuke.com/Resources/Training/Tutorials.aspx](http://www.dotnetnuke.com/Resources/Training/Tutorials.aspx)

# c# - 将 Json 代码转换为 C#（数字作为键）

> ID：16060150
> 
> 赞同：3
> 
> 时间：2013-04-17T12:32:48.380
> 
> 标签：c#, json, windows-phone-8, entity

我从 Windows Phone 8 的 Web 服务中获得了一些 json 代码。感谢站点 json2csharp ( [http://json2csharp.com/](http://json2csharp.com/) )，我生成了我的实体类。但是有一个 web 服务有奇怪的 json 代码，就像这样。有编号作为键（0,1,2）：

```
{
  "service": "MainMapService",
  "func": "getPlacesByAxes",
  "result": {
    "0": {
      "id": "13478",
      "date": "0",
      "id_cat": "1",
      "id_cat_sub": "0",
      "id_user": "0",
     },
    "2": {
      "id": "23272",
      "date": "0",
      "id_cat": "1",
      "id_cat_sub": "0",
      "id_user": "667"
    },
    "1": {
      "id": "21473",
      "date": "0",
      "id_cat": "1",
      "id_cat_sub": "0",
      "id_user": "0"
     }
   },
  "args": [
    "1",
    "50.8",
    "4.5",
    "1"
  ]
} 
```

并且 json2csharp 生成这样的类......每个类都有一个数字：

```
public class __invalid_type__0
{
    public string id { get; set; }
    public string date { get; set; }
    public string id_cat { get; set; }
    public string id_cat_sub { get; set; }
    public string id_user { get; set; }
}

public class __invalid_type__2
{
    public string id { get; set; }
    public string date { get; set; }
    public string id_cat { get; set; }
    public string id_cat_sub { get; set; }
    public string id_user { get; set; }
}

public class __invalid_type__1
{
    public string id { get; set; }
    public string date { get; set; }
    public string id_cat { get; set; }
    public string id_cat_sub { get; set; }
    public string id_user { get; set; }
}

public class Result
{
    public __invalid_type__0 __invalid_name__0 { get; set; }
    public __invalid_type__2 __invalid_name__2 { get; set; }
    public __invalid_type__1 __invalid_name__1 { get; set; }
}

public class RootObject
{
    public string service { get; set; }
    public string func { get; set; }
    public Result result { get; set; }
    public List<string> args { get; set; }
} 
```

所以，问题来自编号键，可能有几个数字。你知道我该如何解决这个问题吗？我无法更改 Json 代码...

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:05:34.153

这远非优雅，但试一试。

那么，我的想法是什么：

我创建了两个类

`RootObject`帮手

> ```
> public class YourJsonClass
> {
>   public string service { get; set; }
>   public string func { get; set; }
>   public dynamic result { get; set; }
>   public string[] args { get; set; }
> } 
> ```

`result`帮手

```
public class Item
        {
            public string id { get; set; }
            public string date { get; set; }
            public string id_cat { get; set; }
            public string id_cat_sub { get; set; }
            public string id_user { get; set; }
        } 
```

我在用着`newtonsoft json`

```
 var m_res = JsonConvert.DeserializeObject<YourJsonClass>(YourJsonResponce);        
            foreach (dynamic numb in m_res.result)
            {

                string m_name = numb.Name; // it will be "1", "0" or whatever
                string h = numb.Value.ToString();
                var m_value = JsonConvert.DeserializeObject<Item>(h);

            } 
```

...确实有更好的方法，但我希望这会有所帮助（：

# java - 通用 HighCharts (Javascript\Java)

> ID：16060153
> 
> 赞同：0
> 
> 时间：2013-04-17T12:32:58.723
> 
> 标签：java, javascript, ajax, highcharts

我已经搜索了很长时间，但找不到我要找的东西。我正在使用highCharts。

有没有一种方法或项目或什么东西可以为我创建通用的 highcharts 图表？目前我必须为我想要的每个图表制作一个 javascript 图表函数。我想让这个通用。

所以我只需要问方法 getChart('line','etc'); 像这样的东西。这样我就不必为我想要的每个图表一遍又一遍地编写所有代码。（它的仪表板）

如果这根本不存在，我会自己做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:47:40.733

有几个库可以用来制作 highcharts。许多都列在 highcharts 下载页面上：http://www.highcharts.com/download[在](http://www.highcharts.com/download)“API Wrappers:”下。

如果您最喜欢使用 Java，也许您应该查看 GWT 和 GWT Highcharts 包装器。GWT 允许您编写 Java 代码，然后将其编译成 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:52:41.873

这些是最好的[http://www.highcharts.com/](http://www.highcharts.com/)我试过了，它们的设计非常好，只需下载它们，如果您在使用它们时遇到问题，请告诉我们。

# opencv - openCV cvFindContours 函数以何种顺序查找图像中的轮廓

> ID：16060155
> 
> 赞同：2
> 
> 时间：2013-04-17T12:33:15.493
> 
> 标签：opencv

有人可以帮助我以哪种顺序`cvFindContours`函数找到图像中的轮廓。我有一张只有 0 到 9 个数字的图像。这意味着图像包含“0123456789”字符。我正在尝试使用`cvFindContours`函数找出轮廓，但它每次都以不同的顺序给出轮廓。我有任何方法可以按顺序找出轮廓。我的意思是基于图像中轮廓的像素位置。

我正在使用 cvFindContours，如下所示

```
cvFindContours( frame, storage, &pContour, sizeof(CvContour),CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE, cvPoint(0, 0) );

pContourLow=cvApproxPoly(pContour, sizeof(CvContour), storage,CV_POLY_APPROX_DP,1,1); 
```

实际上`cvApproxPoly`是按照我的意愿正确返回轮廓数。它给了我 10 个外部轮廓，因为我的图像中有 0 到 9 个字符。

我知道我们的图片很难理解，但我无法上传图片。

任何帮助都会得到帮助

# android - 拦截来自外部应用程序的意图

> ID：16060161
> 
> 赞同：5
> 
> 时间：2013-04-17T12:33:33.300
> 
> 标签：android, broadcastreceiver

假设我想开发一个以某种方式扩展的应用程序（让我说“合作”）一个我显然无法控制的*非常流行的应用程序。*为简单起见，我们还假设*非常著名的应用程序*作者不会发布更新来阻止我的应用程序。

我研究了应用程序的功能并确定它广泛使用`BroadcastReceiver`s。我也从清单中知道`com.famousvendor.intent.INTENT_NAME`我可能使用的常量。

问题很简单：如果我创建一个应用程序，即为`org.zighinetto.tinyapp`意图设置广播接收器*，微型应用程序*`com.famousvendor.intent.INTENT_NAME`会捕获广播吗？还是只能由触发它们的进程接收这些广播？

 ** * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T13:09:26.157

> 小应用程序会捕捉到广播吗？还是只能由触发它们的进程接收这些广播？

有很多东西可以控制这一点。

如果广播受到许可的保护，除非您也持有该许可，否则您将无法接收该广播。您可能无法持有该权限，具体取决于权限的类型。

此外，如果广播是有序广播，则较高优先级的应用程序将接收该广播并可以中止它（消耗该事件，因此较低优先级的接收器不会收到广播）。优先级是通过`<intent-filter>`（或`IntentFilter`）设置的，您可能无法拥有比他们自己的应用程序更高优先级的应用程序，具体取决于原始开发人员持有的优先级值。

还有其他仅限本地的场景（例如，`LocalBroadcastManager`），尽管您不会在清单中看到它们，因此我们可以假设它们不是这里使用的......今天。

> 为简单起见，我们还假设非常著名的应用程序作者不会发布更新来阻止我的应用程序。

他们不需要专门阻止您的应用程序。他们只需要决定他们是否真的想要拥有您尝试利用的 API，如果这更像是一个意外的 API，他们可能会选择锁定它。例如，他们可能会这样做以回应[秃顶人的博客文章](http://commonsware.com/blog/2013/04/17/do-not-have-accidental-api.html)。*

# python - 编辑时如何仅调用验证方法的子集

> ID：16060162
> 
> 赞同：0
> 
> 时间：2013-04-17T12:33:36.987
> 
> 标签：python, django, django-forms

在我的 Django 应用程序中，我使用了一个模型（我们称之为 Mymodel）和一个表单：

```
class Mymodel(models.Model):
    firstField(...)
    secondField(...)

class MymodelAddform(ModelForm):
    def clean_firstField(self):
        #stuff

    def clean_secondField(self):
        #stuff again

    def clean(self):
        #performs stuff with all the fields

    class Meta:
        model = Mymodel 
```

现在我想`MymodelEditform`再次基于 Mymodel 添加另一个表单，仅使用`secondField`，并且仅`secondField`验证

我考虑过的两个选项（在我写它们时都不起作用）：

```
class MymodelEditform(ModelForm):
    class Meta:
        model = Mymodel
        fields = ['secondField'] 
```

这里的问题是`clean_secondField`除非我重新定义它，否则不会调用它，并且我想避免`clean_secondField`调用其他地方定义的另一个方法（不过，如果它是唯一的选择，那就这样吧）

```
class MymodelEditform(MymodelAddform):
    class Meta:
        model = Mymodel
        fields = ['secondField'] 
```

这里的问题是调用了 clean() 验证，并且由于我只使用了字段的子集，所以它失败了。

问题很明显：我怎样才能让它按预期工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:46:57.420

我没有这样做，但你可以试试这个。

*   使用干净的方法创建一个简单的类。

如下

```
class MymodelformCleaner(ModelForm):
    def clean_firstField(self):
        #stuff
    def clean_secondField(self):
        #stuff again 
```

*   从此类继承您的模型表单

您的模型表单将只定义字段，而干净的方法来自另一个类

```
class MymodelAddform(ModelForm, MymodelformCleaner):
    class Meta:
        model = Mymodel

class MymodelEditform(ModelForm, MymodelformCleaner):
    class Meta:
        model = Mymodel
        fields = ['secondField'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:03:18.730

一个明显的解决方案是定义`clean_secondField`in`MymodelEditform`和 make `MyModelAddForm`inherit from `MymodelEditForm`，但它可能无法按预期工作。另一种解决方案是让两个表单都继承自定义 clean_secondField 的通用基本表单。

或者您可以明确排除表单元中的字段（参见[https://code.djangoproject.com/ticket/12901](https://code.djangoproject.com/ticket/12901)）

# html - Wordpress 导航样式

> ID：16060167
> 
> 赞同：0
> 
> 时间：2013-04-17T12:33:47.973
> 
> 标签：html, css

知道为什么我的导航在主页上 < IE10 的任何版本中都搞砸了，但在帖子页面上看起来很好吗？

[http://www.craigwilliamson.info/wordpress/](http://www.craigwilliamson.info/wordpress/)

无法理解它在所有其他浏览器中都可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:36:51.730

你没有在你的`<h1>`

永远不要忘记`</h1>`！

详细地说，由于缺少结束标记，H1 样式正在沿 DOM 进一步应用，但大多数现代浏览器只是绕过了这一点。尽管如此，它还是使代码无效，因此请始终记住它。

# c# - C# .net 中的 Json 对象

> ID：16060170
> 
> 赞同：6
> 
> 时间：2013-04-17T12:33:51.493
> 
> 标签：c#, asp.net, json, object, json.net

我有一个 C#.net 方法，如下所示

```
 public string jsonTest()
        {
            List<string> list = new List<string>();
            list.Add("aa");
            list.Add("bb");
            list.Add("cc");
            string output = JsonConvert.SerializeObject(list);
            return output;          
        } 
```

在这里，尽管我使用 JsonConvert.SerializeObject 创建了一个 Json 对象，但我得到了一个字符串（因为返回类型是字符串）。

我可以通过使用返回类型 JsonResult （或类似的东西）来像我们在 MVC 中做的那样做下面的事情吗？

```
 return Json(new { data = list }, JsonRequestBehavior.AllowGet); 
```

是否可以在 asp.net 中创建 Json 数据？

在客户端，我使用 ajax 调用从 jsonTest() 获取数据。

```
 $.ajax({
                type: 'GET',
                url: "test.aspx",  //In test.aspx pageload calling jsonTest()
                dataType: 'json',
                success: function (data) {
                    alert(data);
                },
                error: function (data) {
                    alert("In error");
                }

            }); 
```

当我给出 dataType: 'json' 时，它会进入错误部分（因为 ajax 需要 json 数据但它会得到字符串）。这就是为什么我想将它解析为服务器端的 json 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:38:41.367

如果是 ASP.NET，

```
string output = JsonConvert.SerializeObject(list);
Response.Clear();
Response.ContentType = "application/json; charset=utf-8";
Response.Write(output);
Response.End(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:41:09.677

我将假设您正在尝试创建一个`WebMethod`供 JavaScript XHR 调用或类似调用使用的对象：

ASP.NET 将仅为请求自动序列化为 JSON `POST`（使用 ASMX 或所谓的“页面方法”）。WCF 和 WebAPI 不需要该`POST`方法，但需要一些配置。

```
[WebMethod]
public static List<Task> TasksGet(string projectId) {
    return MyNamespace.Tasks.GetForProject(projectId);
} 
```

您的 JS 调用看到的结果类似于：

```
{"d": [{
     "__type": "MyNamespace.Task", 
     "id": 1, 
     "description": "This is my first task"
   }, {
     "__type": "MyNamespace.Task", 
     "id": 2, 
     "description": "This is my second task"
   }, {
     ....etc etc
   }
]} 
```

无需直接使用 JsonSerializer 类。

还要确保您的请求标头设置正确：

`Content-Accept: application/json;charset=UTF8`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:38:35.927

没有什么叫做 JSON 对象。该`SerializeObject`方法返回一个字符串，因为 JSON 只不过是一个遵循特定规则的字符串值。

要将 JSON 返回到浏览器，您需要做的就是：

```
Response.ContentType = "application/json; charset=utf-8";
Response.Write(jsonTest());
Response.End(); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-17T12:36:58.403

Json 只是字符串数据。这就是该字符串的解释方式。所以它返回一个字符串的事实是正确的。你提到了 ASP.Net。您是否正在使用 ASP.Net 网络表单并正在寻找一种将 JSON 返回到前端的方法？

# android - android mms通过mms url下载mms内容

> ID：16060173
> 
> 赞同：13
> 
> 时间：2013-04-17T12:34:01.183
> 
> 标签：android, mms, msisdn

我正在尝试`MMS`通过彩信 url 下载图片内容，但它返回带有无效`MSISDN`号码的 403（禁止访问）服务器响应。我在下面粘贴了我的代码以供参考。提前致谢！

```
private static boolean downloadThroughGateway(Context context, String host,
            String port, String urlMms) throws Exception {
        URL url = new URL(urlMms);

        // Set-up proxy
        if (host != null && port != null && host.equals("") && !port.equals("")) {
            Log.d(TAG, "[MMS Receiver] Setting up proxy (" + host + ":" + port
                    + ")");
            Properties systemProperties = System.getProperties();
            systemProperties.setProperty("http.proxyHost", host);
            systemProperties.setProperty("http.proxyPort", port);
            systemProperties.setProperty("http.keepAlive", "false");
        }

        // Open connection
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();

        // Disable cache
        connection.setUseCaches(false);

        // Set the timeouts
        connection.setConnectTimeout(TIMEOUT);
        connection.setReadTimeout(TIMEOUT);

        // Connect to the MMSC
        Log.d(TAG, "[MMS Receiver] Connecting to MMS Url " + urlMms);
        connection.connect();

        try {
            Log.d(TAG,
                    "[MMS Receiver] Response code is "
                            + connection.getResponseCode());

            if (connection.getContentLength() >= 0) {
                Log.d(TAG, "[MMS Receiver] Download MMS data (Size: "
                        + connection.getContentLength() + ")");
                byte[] responseArray = new byte[connection.getContentLength()];
                DataInputStream i = new DataInputStream(
                        connection.getInputStream());
                int b = 0;
                int index = 0;
                while ((b = i.read()) != -1) {
                    responseArray[index] = (byte) b;
                    index++;
                }
                i.close();

                // Parse the response
                MmsDecoder parser = new MmsDecoder(responseArray);
                parser.parse();

                byte[][] imageBytes = new byte[parser.getParts().size()][];
                for (int j = 0; j < parser.getParts().size(); j++) {
                    imageBytes[j] = parser.getParts().get(j).getContent();
                }

                // Insert into db
                // Uri msgUri = MmsHelper.insert(context, parser.getFrom(),
                // parser.getSubject(), imageBytes);
                // ContentValues updateValues = new ContentValues();
                // updateValues.put("read", 0);
                // context.getContentResolver().update(msgUri, updateValues,
                // null,
                // null);

                // Close the connection
                Log.d(TAG, "[MMS Receiver] Disconnecting ...");
                connection.disconnect();

                System.gc();

                // Callback
                // if (bi != null)
                // bi.onReceiveMms(context, msgUri);

                return true;
            }

            // Close the connection
            Log.d(TAG, "[MMS Receiver] Disconnecting ...");
            connection.disconnect();
        } catch (Exception e) {
            e.printStackTrace();
        }

        return false;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-28T05:00:38.077

现在我能够找到解决方案，但是我发现有时下载代码不起作用但是当您再次尝试时它可以工作，尽管我首先缺少的是**建立与服务器的连接**。我在下面提到了连接方法，在此调用之后，这个问题代码中提到了方法名称 downloadThroughGateway(parameters)。

```
private void startConnectivity() throws Exception {
        ConnectivityManager mConnMgr = (ConnectivityManager) context
                .getSystemService(Context.CONNECTIVITY_SERVICE);
        if (!mConnMgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE_MMS)
                .isAvailable()) {
            throw new Exception("Not available yet");
        }
        int count = 0;
        int result = beginMmsConnectivity(mConnMgr);
        if (result != PhoneEx.APN_ALREADY_ACTIVE) {
            NetworkInfo info = mConnMgr
                    .getNetworkInfo(ConnectivityManager.TYPE_MOBILE_MMS);
            while (!info.isConnected()) {
                Thread.sleep(1500);
                info = mConnMgr
                        .getNetworkInfo(ConnectivityManager.TYPE_MOBILE_MMS);
                Log.d(">>>", "Waiting for CONNECTED: state=" + info.getState());
                if (count++ > 5)
                    throw new Exception("Failed to connect");
            }
        }
        Thread.sleep(1500);
    } 
```

# nose - 解决python中运行unittest的方式太多产生的困惑

> ID：16060178
> 
> 赞同：8
> 
> 时间：2013-04-17T12:34:27.943
> 
> 标签：nose, pytest, unittest2, tox

我正在尝试实现一种完整而干净的测试 python 包的方法，一种适合以下要求的方法：

*   在干净的机器上执行测试而不设置它们（virtualenv）
*   **从多个平台**收集结果
***   **从多个 python 解释器**收集结果***   代码**覆盖率**（将多次执行的结果合并到一个报告中）*   能够生成 xml 代码覆盖率报告，以便构建系统可以跟踪这种变化随时间的变化。*   能够启用基于平台的**禁用测试***   在测试之前运行几个命令，例如 pep8 或 autopep8*   并行运行测试。****

 ****我用了几种方法：`nose + pytest`，`tox + pytest`但最近发现`pytest`应该可以做大部分的东西。

主要问题是我无法找到关于何时使用一种或另一种方法更好的明确比较。

有人可以解释这些并给出这些配置的一些用例或限制吗？...只是为了清楚说明您何时采用一种或另一种方法。

最后，我确实想要这些选项：

*   `quicktest`- 在本地运行测试，每次提交前必须这样做
*   `fulltest`- 完整的测试，在所有可用平台上运行它们，这是发布新版本之前的必备条件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-05T22:57:17.370

py.test 完美地满足了您的所有需求，与其他测试运行程序（如鼻子）相比，它的优点：

*   具有依赖注入的夹具 - 无需复杂的 oop 进行测试设置
*   简单但功能强大的插件系统，包含许多有用的插件 - pytest-xdist 等插件允许您根据需要在所有平台上进行测试，包括 windows，pytest-cov 进行覆盖，pytest-cache 有助于仅运行最后失败的测试等
*   参数化允许您使用一次写入多次运行方法进行使用声明性参数的测试
*   使用简单的断言语句与复杂的类 java 语法 .assertEquals ( [http://pytest.org/latest/assert.html](http://pytest.org/latest/assert.html) )
*   越来越多****

# delphi - 意外插入空格 - 为什么会编译？

> ID：16060185
> 
> 赞同：6
> 
> 时间：2013-04-17T12:34:46.587
> 
> 标签：delphi, delphi-xe2, pascal

我不小心按了空格键并写了这个：

```
lTTEvent .CustUpdateStatus := usUnchanged; 
```

并且惊讶地发现编译器接受了点前面的空格（实际上是任意数量的空格）。

点是解析器可以正确解释的特殊字符吗？这在 Pascal 中如何工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-17T12:37:53.410

解析器首先将文本转换为标记。所以正文：

```
lTTEvent .CustUpdateStatus := usUnchanged; 
```

被翻译成令牌：

*   标识符
*   时期
*   标识符
*   变成
*   标识符
*   分号

该空间是一个空格，它可以具有三个功能：

*   标记之间的分隔符（例如标识符和关键字之间）。
*   文字空间（在这种情况下，它包含在字符串中。
*   化妆品。

第一个和最后一个函数空间在转换为标记时会丢失。

标识符和句点没有任何共同的字符，因此无法混淆它们，因此不需要空格，但仍然可以使用。

**简短的回答**

'lTTEvent' 和 '.' 是令牌。标记（有时）可以用空格分隔。

# android - Android离线语音识别额外结果

> ID：16060186
> 
> 赞同：0
> 
> 时间：2013-04-17T12:34:47.523
> 
> 标签：android, voice-recognition

我正在尝试使用以下行从 Android Google 语音识别引擎中获取具有额外结果的数组：

```
ArrayList<String> text = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS); 
```

但是，这仅在设备在线并连接到互联网时才有效。当它离线时，我得到一个只包含一个结果的数组。

离线时有没有办法获得多个结果数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T11:42:02.953

不，没有办法在网上做到这一点，如果你甚至尝试开发类似的东西，有很多信息要存储，你的想法的一种方法可能是使用**JellyBean**可用的**SpeechInput**，但你稍后会看到（如果您尝试设置此模式）您将需要在您的设备上为它下载一个语言包！

如果您成功找到另一种方法，请告诉我如何！

# python - 当有 11 个参数时，为什么 pyserial 说我给出了 12 个参数？

> ID：16060188
> 
> 赞同：2
> 
> 时间：2013-04-17T12:34:50.660
> 
> 标签：python, pyserial

我正在使用 pyserial 打开 python 连接：

```
self.fpga = serial.Serial(self.fpgaport, 115200, serial.EIGHTBITS, serial.PARITY_NONE, serial.STOPBITS_ONE, self.fpgapollinterval, False, False, None, False, None) 
```

这与此处找到的 pyserial 文档相匹配：

```
__init__(port=None, baudrate=9600, bytesize=EIGHTBITS, parity=PARITY_NONE, stopbits=STOPBITS_ONE, timeout=None, xonxoff=False, rtscts=False, writeTimeout=None, dsrdtr=False, interCharTimeout=None) 
```

但是，当我运行脚本时，我收到此错误：

```
line 391, in run

self.fpga = serial.Serial(self.fpgaport, 115200, serial.EIGHTBITS, serial.PARITY_NONE, serial.STOPBITS_ONE, self.fpgapollinterval, False, False, None, False, None)

TypeError: __init__() takes at most 11 arguments (12 given) 
```

当我取出最后一个参数（最后一个`None`）时，错误就消失了。

我还打印了所有变量名，以防一个超过一维。也不是这样。

我正在使用 python 2.6.6，文档适用于 pyserial 2.6。我一直在努力找出如何找到我正在使用的串行版本。

为什么当我只提供 11 个参数时，python 声称我提供了 12 个参数？我一定在这里遗漏了一些东西。

编辑：

如何找出我安装了哪个串行版本？我正在运行的这段代码可能是为另一个版本的 python（和串行的）编写的。我需要找出我想要的串行版本作为参数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T12:36:50.813

您隐含地`self`作为第一个参数传递。

* * *

我知道这个答案*不能解决*你的问题，但这就是为什么你的解释器告诉你你正在传递 12 个参数，而实际上你只传递了 11 个显式参数。因此，答案确实提供了对您问题的*答案。*如果您需要有关程序的进一步帮助，请提出一个新的、更具体的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:38:45.377

第十二个参数是`self`，它是对始终传递给方法的对象的引用。

检查`serial.VERSION`版本，或者做`help(serial)`

# javascript - 带有可选逗号和点的有效数字的正则表达式

> ID：16060191
> 
> 赞同：6
> 
> 时间：2013-04-17T12:34:56.237
> 
> 标签：javascript, regex, string, validation

我试图只允许数字和特殊字符，如“。” 和“，”在我的文本字符串中被允许。为此我尝试了以下代码

```
var pattern = /[A-Za-z]/g;
var nospecial=/[\(#\$\%_+~=*!|\":<>[\]{}`\\)';@&?$]/g;
if (!ev.ctrlKey && charCode!=9 && charCode!=8 && charCode!=36 && charCode!=37 && charCode!=38 && (charCode!=39 || (charCode==39 && text=="'")) && charCode!=40) {
    console.log(text);
    if (!pattern.test(text) && !nospecial.test(text)) {
        console.log('if');
        return true;
    } else {
        console.log('else');
        return false;
    }
} 
```

但没有得到想要的输出。告诉我哪里错了。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-17T12:36:47.963

忘记尝试列入黑名单，只需这样做以允许您想要的：

```
var pattern = /^[0-9.,]*$/; 
```

编辑：另外，不仅仅是检查数字、逗号和点。我假设这样的事情比你希望的还要多：

```
var pattern = /^(0|[1-9][0-9]{0,2}(?:(,[0-9]{3})*|[0-9]*))(\.[0-9]+){0,1}$/; 
```

[**演示**](http://jsfiddle.net/YbWYp/12/)

![在此处输入图像描述](https://i.stack.imgur.com/OhXNb.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T12:37:52.923

那么你为什么不尝试`/^[0-9,.]*$/`而不是否定测试呢？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-10T08:52:11.133

你可以试试这个：

```
/([0-9]+[.,]*)+/ 
```

它将匹配带有或不带有逗号或点的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-29T20:53:42.033

您也可以只使用[此答案](https://stackoverflow.com/questions/11665884/javascript-parse-a-string-to-a-number)中的解决方案：

```
parseFloat(text.replace(',','')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-27T16:00:30.400

```
^(?!.*[^0-9.,\n]).*$ 
```

不确定您所说的高效是什么意思，但是尽管匹配正确的字符串需要很长时间，但失败的速度更快。请参阅演示。

[http://regex101.com/r/aK2zV7/1](http://regex101.com/r/aK2zV7/1)

# c# - 粗贝塞尔曲线由 C# 中的线条组成

> ID：16060194
> 
> 赞同：0
> 
> 时间：2013-04-17T12:34:59.133
> 
> 标签：c#, graphics, bezier, curve

我在 C# 中创建了贝塞尔曲线。我以某个间隔计算曲线的结果点，并将这些点与线（g.drawLine）连接起来。当我想要 1px 胖的曲线时，一切都好。但是当我想要粗这条曲线时，就会出现问题。这个问题是连接个别线不漂亮。放大图片上的情况说明：

[http://ryska.webzdarma.cz/bezier.png](http://ryska.webzdarma.cz/bezier.png)

一些技巧如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:25:17.490

提到`g.drawLine`我会说这是`WinForms`。在这种情况下，您需要做的就是调用

[Graphics.DrawLines](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.drawlines.aspx)

而不是`DrawLine`. 这会将所有线段绘制为一条连接线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:38:57.073

您可以尝试用几个`LineSegment`对象制作曲线，并指定`IsSmoothJoin = true;`

# c# - 使用c#读取asp.net动态文本框内容长度

> ID：16060199
> 
> 赞同：0
> 
> 时间：2013-04-17T12:35:14.700
> 
> 标签：c#, javascript, asp.net

我正在使用下面的代码创建一个动态文本框及其 onchange 事件。事件成功触发，它没有返回任何值。请帮我解决这个问题。

```
txt_box.Attributes.Add("onchange", "loadValues('" + txt_box.ClientID + "')");

 function loadValues(controlName) {
        alert(controlName);
        //control name comes here
        var txtValue = document.getElementById(controlName);
       //control also return null
        if (txtValue.value.length > 0)
        {
          alert(txtValue.value.length); 
        }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:00:51.597

正要回答与 Ankush Jain 相同的问题，但没有 jquery 版本：

```
function loadValues(control) {
        alert(control.id);
        //control name comes here
        var txtValue = control.value;
        //control also return null
        if (txtValue.length > 0) {
            alert(txtValue.length);
        }
    }

txt_box.Attributes.Add("onchange", "loadValues(this);"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:56:12.160

尝试以下

```
txt_box.Attributes.Add("onchange", "loadValues(this)");

 function loadValues(controlName) {
    if($(controlName).attr('id').length > 0){
       var id=  $(controlName).attr('id');
       var val= $('#'+id).val();
       alert(val);
    }
 } 
```

# android - 数据库操作的日期和时间调度

> ID：16060203
> 
> 赞同：0
> 
> 时间：2013-04-17T12:35:30.713
> 
> 标签：android

我正在创建 Android 项目，我必须在其中通过 PHP 脚本执行一些数据库操作。通常它可以工作，但我想在特定日期和时间运行 PHP 脚本，例如为某些数据库操作创建计划。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:40:36.800

我们可以通过AlarmManager类和简单的代码来实现：

```
Date dateobj = new Date(Year, month, day, hour, min);               
AlarmManager.set(AlarmManager.RTC_WAKEUP, dateobj.getTime(), pendingIntent); 
```

# java - 更改 Java 动态列表或映射中的对象引用

> ID：16060208
> 
> 赞同：0
> 
> 时间：2013-04-17T12:35:43.863
> 
> 标签：java, list, reference, linked-list, linkedhashmap

考虑 Java 动态列表或 Maps，如 LinkedList、LinkedHashMap、TreeMap 等。我想任何对象都有对下一个对象的引用（next->）（对吗？）。为什么在 Java 中没有办法（例如方法）访问这些引用（下一个->）？

我担心的是，如果这是可能的，那么 LinkedList 可以像魅力一样分成两个列表，从而节省大量 CPU 开销。我现在要做的是复制列表的一部分（new Sublist()...），然后清除原始列表中的相应条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:40:34.997

> 我担心的是，如果这是可能的，那么 LinkedArrayList 可以像魅力一样分成两个列表，从而节省大量 CPU 开销。我现在要做的是复制列表的一部分（new Sublist()...），然后清除原始列表中的相应条目。

如果这样做，您将在列表的 API 之外修改列表的内部数据结构，因此列表的其他内部参数将不同步。换句话说，构成链表并持有你放入链表的对象的节点是链表私有的；即，当您创建`LinkedList`实例时，您无法访问节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:38:24.993

访问“下一个”指针是一个实现细节。你是对的，它会节省性能，但从面向对象的角度来看，你不应该依赖这些细节。毕竟，实现可能完全不同，甚至没有下一个指针。如果您担心性能，您应该实现自己的特定解决方案，或使用不同的方法/语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:51:41.273

不同的集合类对于如何访问集合中的各个对象有不同的实现。例如。该类`Arraylist`将各个对象存储为 Object 数组，而`LinkedList`该类使用内部类`Entry`来存储各个对象。但是，这些成员被封装并标记为私有，因此它们对程序员不可见。这背后的主要原因是为程序员提供了一组简单的方法来执行各种操作，而无需关心方法是如何实现的。

> 我担心的是，如果这是可能的，那么 LinkedList 可以像魅力一样分成两个列表，从而节省大量 CPU 开销。我现在要做的是复制列表的一部分（new Sublist()...），然后清除原始列表中的相应条目。

通常，您不会获得管理您的集合并执行拆分等操作的成员。但是，如果您仍然想访问这些成员以提高性能，您可以随时创建自己的类，这样您就可以掌握“下一个”。您可以随时调整预定义类中的现有代码，例如`LinkedList`创建自己的类，例如`MyLinkedList`. 或者您可以扩展这些类并编写自己的方法。

# sharepoint-2010 - 仅当特定用户在 Sharepoint 2010 中发布公告时“提醒我”

> ID：16060210
> 
> 赞同：1
> 
> 时间：2013-04-17T12:35:46.537
> 
> 标签：sharepoint-2010

我想知道是否有办法让具有贡献者访问权限的个人用户设置他们的“提醒我”功能，这样当特定用户时，例如。经理，在公告网页中发布公告，它会触发“提醒我”，只有当经理发布公告时。我希望有一个使用 Sharepoint Designer 中的工作流程的解决方案。从我目前所阅读的内容来看，尝试自定义“Alert Me”似乎是不值得的麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:01:27.077

作为解决此问题的方法，您可以创建一个工作流，当某人（在本例中为您的经理）使用共享点设计器工作流创建某个项目时，该工作流会通过电子邮件通知您。

# javascript - setTimeout 被重复调用，而不是在 3 秒的间隔之后

> ID：16060211
> 
> 赞同：0
> 
> 时间：2013-04-17T12:35:47.980
> 
> 标签：javascript

为什么在 3 秒后重复调用该函数？

```
<button onclick="myFunction()">Try it</button>

<script>
    function myFunction()
    {
        alert("hello");
        setTimeout(myFunction(),3000);
        // setTimeout(function(){ alert("Hello") }, 3000);
     }
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T12:37:07.170

您`myFunction`立即调用，然后将其返回值 ( `undefined`) 传递给`setTimeout`

删除，`()`以便您传递函数而不是调用它。

改变：

```
setTimeout(myFunction(),3000); 
```

至：

```
setTimeout(myFunction,3000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T12:37:56.290

看看这段代码

```
setTimeout(myFunction(),3000); 
```

`()`后面`myFunction`是说，调用 myFunction 并存储它返回的任何内容。3秒后调用。

您需要做的不是调用该函数，而是存储对它的引用。所以你需要删除`()`.

您的代码需要看起来像这样

```
setTimeout(myFunction,3000); 
```

更改后，您将在单击确定后每 3 秒收到一次警报，而不是像您看到的大量警报。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T12:39:41.047

使用setTimeout的时候需要给回调函数，而不是调用回调！XD 而不是：

```
setTimeout(myFunction(), 3000); 
```

你必须写：

```
setTimeout(myfunction, 3000); 
```

请记住，在末尾添加 () 将调用该函数。在您的示例中，您正在执行无限循环。

# spring - 在 BIRT 中使用 Spring bean 访问对象的属性

> ID：16060214
> 
> 赞同：0
> 
> 时间：2013-04-17T12:35:58.907
> 
> 标签：spring, reporting, birt

我正在尝试通过按照[http://www.springsource.org/BusinessIntelligenceWithSpringAndBIRT上的示例调用位于 spring 上下文中的 bean 上的方法来检索值对象](http://www.springsource.org/BusinessIntelligenceWithSpringAndBIRT)

但是，此示例显示只能检索汽车的品牌。有没有办法在 birt 上下文中检索汽车对象本身，而不是将汽车的各个属性映射到数据集中的不同元素或使用它们来呈现报告。

提前致谢，

# c# - 阅读excel工作表时如何避免C#中出现“无法对空引用执行运行时绑定”错误

> ID：16060216
> 
> 赞同：0
> 
> 时间：2013-04-17T12:36:01.570
> 
> 标签：c#, mysql, .net, list, null

我正在尝试使用 Lists.in 将 excel 工作表数据插入数据库。在 excel 数据中，我有一些空单元格。由于空单元格，我收到了类似的错误`Cannot perform runtime binding on a null reference`。我该如何解决这个错误？谢谢。

**我试过这段代码：**

```
 public object verify(object k)
 {
       try
       {
            if (range.Cells[rCnt, 3] == null)
            {
                  return  range.Cells[rCnt, 3].value="null";
            }
       }
       catch
       {
            return k;
       }

 } 
```

但它在方法名称处显示错误。

# maven - jaxws-maven-plugin 和代理排除

> ID：16060218
> 
> 赞同：1
> 
> 时间：2013-04-17T12:36:19.570
> 
> 标签：maven, proxy, wsimport, http-proxy

我使用 jaxws-maven-plugin 从 wsdl 生成 java。wsdl位于本地网络，但指的是互联网上的一些xsd。

使用 maven 插件生成代码时会遇到麻烦，因为它缺少高级 http 代理设置。

这个问题有解决方法吗？我的配置是：

```
 <plugin>
        <groupId>org.jvnet.jax-ws-commons</groupId>
        <artifactId>jaxws-maven-plugin</artifactId>
        <version>2.2</version>
        <executions>
            <execution>
                <goals>
                    <goal>wsimport</goal>
                </goals>
            </execution>
        </executions>
        <configuration>
         <!--<httpproxy>127.0.0.1:5865</httpproxy>-->
            <packageName>my.pkg</packageName>
            <verbose>true</verbose>
            <wsdlUrls>
                <wsdlUrl>
                    http://10.31.7.64:13080/service.wsdl
                </wsdlUrl>
            </wsdlUrls>
        </configuration>
    </plugin> 
```

没有代理我得到

```
parsing WSDL...

[ERROR] IOException thrown when processing "http://www.w3.org/2005/05/xmlmime". Exception: java.net.ConnectException: Connection refused: connect. 
```

有了代理我得到了

```
parsing WSDL...

[ERROR] Server returned HTTP response code: 504 for URL: http://10.31.7.64:13080/service.wsdl 
```

可能是代理问题，但我在公司网络后面没有另一个代理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-02-24T14:43:54.197

更好的方法是使用 JVM 的 noProxy 变量。然后，当 WSDL 不可用时，您的构建会失败（在我的情况下，这对集成测试非常有用）您可以将其添加到`jaxws-maven-plugin`配置中：

```
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>jaxws-maven-plugin</artifactId>
<version>2.4.1</version>
<executions>
    <execution>
        <id>wsdltoJava</id>
        <goals>
            <goal>wsimport</goal>
        </goals>
        <configuration>
            <wsdlUrls>
                <wsdlUrl>https://someService.yourcompany.net/Service/Service?wsdl</wsdlUrl>
            </wsdlUrls>
            <vmArgs>
                <vmArg>-Dhttp.nonProxyHosts=*.yourcompany.net, 10.31.7.64</vmArg>
            </vmArgs>
            <keep>true</keep>
            <packageName>com.yourcompany.package</packageName>
            <sourceDestDir>your/target/directory</sourceDestDir>
        </configuration>
    </execution>
</executions> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T02:22:58.770

AFAIU，当我们启用 时`httpproxy`，所有请求都将转到该代理，包括`<wsdlUrl>`.

服务器返回

```
HTTP response code: 504 for URL: http://10.31.7.64:13080/service.wsdl 
```

[状态代码定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)告诉我们如下： -

> ### 504网关超时
> 
> 服务器在充当网关或代理时，没有收到来自 URI（例如 HTTP、FTP、LDAP）指定的上游服务器或它在尝试完成时需要访问的其他辅助服务器（例如 DNS）的及时响应请求。

根本原因可能是代理不知道我们的地址，在这种情况下是`10.31.7.64`

恕我直言，请尝试下载`wsdl`并将其放入本地计算机。然后使用[wsdlFiles](http://jax-ws-commons.java.net/jaxws-maven-plugin/wsimport-mojo.html#wsdlFiles)进行配置，如下例所示： -

```
 <configuration>
     <wsdlFiles>
         <wsdlFile>${basedir}/path/to/wsdl</wsdlFile>
     </wsdlFiles>
 </configuration> 
```

我希望这可能会有所帮助。

# macos - 如何修复此错误

> ID：16060221
> 
> 赞同：0
> 
> 时间：2013-04-17T12:36:23.023
> 
> 标签：macos, terminal, osx-mountain-lion

当我打开终端系统时显示以下错误

> -bash：/etc/profile.d/sm.sh：没有这样的文件或目录
> -bash：/etc/profile.d/rvm.sh：没有这样的文件或目录

![在此处输入图像描述](https://i.stack.imgur.com/3L355.png)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:43:59.243

貌似你以前有`rvm`什么的，然后去掉了？无论如何，删除有问题的文件`/etc/profile.d`，你应该没问题。

# jquery - 从 Jquery 函数访问枚举数据类型

> ID：16060226
> 
> 赞同：0
> 
> 时间：2013-04-17T12:36:34.890
> 
> 标签：jquery, c#-4.0, asp.net-mvc-2, enums

枚举数据类型在 c# 代码文件中，如下所示：

***C#代码：***

```
[Serializable]
[ComVisible(true)]
public enum DayOfWeek
{
    Sunday = 0,
    Monday = 1,
    Tuesday = 2,
    Wednesday = 3,
    Thursday = 4,
    Friday = 5,
    Saturday = 6
} 
```

我需要从下面提到的 js 函数中访问上面的枚举类型。我怎么能做到这一点？

***JS 文件：***我需要`for loop`使用枚举类型转换变量。

```
function updateGroupLessonHiddenFields() {
    for (var i = 0; i < 7; i++) {
        var name = (('<% DayOfWeek%>')i).ToString();
        var key = name.ToLower();
    }
} 
```

***ascx 文件**我可以像下面这样访问：*

```
<%
    for (var i = 0; i < 7; i++) {
        var name = ((DayOfWeek)i).ToString();
        var key = name.ToLower();
%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:45:35.887

您不能`javascript`在 c# 代码中使用循环变量。javascript的**循环将在服务器端执行完成并发送到客户端后执行**，那么我如何在c#代码中使用javascript循环变量？

您可以定义两个字符串变量以将枚举的名称/值分配给 javascript。

*代码背后*

```
public static string names = string.Join(",", Enum.GetNames(typeof(DayOfWeek)));
public static string values = string.Join(",", Enum.GetValues(typeof(DayOfWeek))); 
```

*Javascript*

```
function updateGroupLessonHiddenFields() {         
  var names = '<%= names  %>';
  var key = '<%= values  %>'     
  nameArray = names.split(',');
  valuesArray = values.split(',');
} 
```

# php - 无法将融合图与 laravel 一起使用

> ID：16060234
> 
> 赞同：0
> 
> 时间：2013-04-17T12:36:50.827
> 
> 标签：php, laravel, fusioncharts, laravel-3

我使用 Laravel 使用融合图表创建图表，但是在我给脚本调用图表之后，laravel 无法运行调用 url 以从服务器进程获取数据的脚本。但是，如果我调用 *.json 文件并在原始 php（没有 laravel）上尝试过，结果是成功的。laravel 是否禁止查看我的脚本以通过 url 读取数据？

我的观点 ：

```
<script type="text/javascript">
        var chart = new FusionCharts("public/fusion/Charts/Column2D.swf", "ChartId",    "100%", "400", "0", "1");
        chart.setJSONUrl("http://api.bertho.web.id/grafik/tiket2.php"); <- Failed
        chart.setJSONUrl("public/fusion/data/data.json"); <- Success
        chart.render("chartdiv");
</script> 
```

# python - Python读取Linux进程内存并转储到文件

> ID：16060237
> 
> 赞同：1
> 
> 时间：2013-04-17T12:36:52.693
> 
> 标签：python, memory, python-2.7

我有以下脚本：

```
import sys, os

pid = sys.argv[1]
maps_file = open("/proc/%s/maps" % pid, 'r')
mem_file = open("/proc/%s/mem" % pid, 'r')
for line in maps_file.readlines():  # for each mapped region
    m = re.match(r'([0-9A-Fa-f]+)-([0-9A-Fa-f]+) ([-r])', line)
    if m.group(3) == 'r':  # if this is a readable region
        start = int(m.group(1), 16)
        end = int(m.group(2), 16)
        mem_file.seek(start)  # seek to region start
        chunk = mem_file.read(end - start)  # read region contents
        #print chunk,  # dump contents to standard output
        mem_dump = open(pid+".bin", "wb")
        mem_dump.write(str(chunk,))
        mem_dump.close()
maps_file.close()
mem_file.close() 
```

到目前为止一切正常（转储进程的内存），但我无法将数据保存到文件中。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:44:59.140

可能是文件被写入了您不期望的地方（看起来它们将被写入当前目录）？

# python - 行尾的反斜杠的目的是什么？

> ID：16060238
> 
> 赞同：18
> 
> 时间：2013-04-17T12:36:53.110
> 
> 标签：python, import, backslash

刚刚在 Python 代码中找到了以下模块导入：

```
from sqlalchemy.ext.declarative import declarative_base,\
      AbstractConcreteBase 
```

我很好奇`\`第一行末尾的反斜杠。它的目的是什么？会不会和下面的一样？

```
from sqlalchemy.ext.declarative import declarative_base, AbstractConcreteBase 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-17T12:41:13.470

是的，它完全一样，这就是反斜杠的重点——它避开了换行符，允许将这条长线分成两半。另一种方法是使用括号：

```
from sqlalchemy.ext.declarative import (declarative_base,
      AbstractConcreteBase) 
```

虽然这是一个语法错误：

```
from sqlalchemy.ext.declarative import declarative_base,
      AbstractConcreteBase 
```

# iphone - 自定义 UIMenuController 以获取 tableView 索引或从默认 UiMenuController 中删除不需要的选项

> ID：16060240
> 
> 赞同：1
> 
> 时间：2013-04-17T12:36:59.487
> 
> 标签：iphone, uigesturerecognizer, uimenucontroller

我正在`UIMenuController`我的应用程序中实现从自定义 tableviewCell 复制文本。

我有两种选择，

选项 1\. 使用 tableviews`shouldShowMenuForRowAtIndexPath`委托方法

选项 2\. 使用自定义`UIMenuController`. 为此，我在视图中添加了（长按/双击）手势识别器。（我不想为此使用 didSelect 用于其他目的）

我真正想要做的是 -当我在 tableView 中（长按/双击）时**仅**`indexPath`显示复制选项并捕获该tableView 的。

选项 1 的问题是，它默认提供三个选项，即剪切、复制、粘贴。选项 2 的问题是，我无法获取表格的索引，因为我的长按手势识别器方法没有 indexPath 的信息。

有什么办法可以让这两个东西都正常工作（只有复制选项和在手势上获取 indexPath）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T07:07:48.613

选项 2 将起作用。您可以通过长按方法获取索引路径。

```
if (recognizer.state == UIGestureRecognizerStateBegan) {
    UITableView *cell = (UITableView *)recognizer.view;
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];

    UIMenuController *menu = [UIMenuController sharedMenuController];
    [menu setMenuItems:[NSArray arrayWithObjects:flag, approve, nil]];
    [menu setTargetRect:cell.frame inView:cell.superview];
    [menu setMenuVisible:YES animated:YES];
} 
```

记住您班级中的索引路径并从中获取访问权限。

# c# - 调试和使用调用时出现 NullReferenceException

> ID：16060244
> 
> 赞同：1
> 
> 时间：2013-04-17T12:37:04.743
> 
> 标签：c#, winforms, thread-safety, nullreferenceexception, invoke

我昨天在调试 Windows 窗体应用程序时发现了一个有趣的行为，请参考以下代码：

```
bool enter = false;

Debugger.Break(); 
if (enter) // Force to enter the if clause, read next comment
{
    bool a = false; // Bypass previous IF check in debug using 'Set Next Statment (CTRL-SHIFT-F10)' here
                    // Will throw null reference exception

    // If I don't use invoke everything works fine
    Invoke(new MethodInvoker(() =>
    {
        a = true;
    }));
} 
```

因此，如果我强制输入不应该在方法上下文中输入的 IF 子句，**并且**代码具有使用 IF 子句中的任何对象的 Invoke 委托，它将引发空引用异常。

异常堆栈跟踪：

```
 at WindowsFormsApplication2.Form1.Test() in c:\WindowsFormsApplication2\Form1.cs:line 26
   at WindowsFormsApplication2.Form1.Form1_Load(Object sender, EventArgs e) in c:\WindowsFormsApplication2\Form1.cs:line 16
   at System.Windows.Forms.Form.OnLoad(EventArgs e)
   at System.Windows.Forms.Form.OnCreateControl()
   at System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)
   at System.Windows.Forms.Control.CreateControl()
   at System.Windows.Forms.Control.WmShowWindow(Message& m)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ScrollableControl.WndProc(Message& m)
   at System.Windows.Forms.ContainerControl.WndProc(Message& m)
   at System.Windows.Forms.Form.WmShowWindow(Message& m)
   at System.Windows.Forms.Form.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

似乎该对象甚至没有在方法上下文中创建，但它仅在我有 Invoke 时发生，否则它将起作用。

有谁知道异常的根本原因是什么以及为什么它与一个尚未调用的 Invoke 方法有关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:59:10.270

据我了解，匿名方法位于一个临时类中。查看IL，进入方法的父范围时会调用临时类的ctor。

根据[这篇文章](http://www.codeproject.com/Articles/15624/Inside-C-2-0-Anonymous-Methods#4)，当您使用周围的局部变量编译匿名方法时会发生以下情况：

1.  创建一个新的私有类，它是定义匿名方法的类的内部类。
2.  在新类中创建一个公共数据成员，其类型和名称与匿名方法主体中使用的局部变量相同。
3.  在包装匿名方法的新类中创建一个公共实例方法。
4.  用新类的声明替换局部变量的声明。创建这个新类的实例来代替局部变量的声明。
5.  将匿名方法体内部和匿名方法外部的局部变量的使用替换为新类实例的数据成员。
6.  将匿名方法定义替换为新类中定义的实例方法的地址。

`a`被声明为匿名方法的临时类中的一个字段。进入父作用域时调用构造函数（在本例中为 if 语句）**，因此通过设置下一条语句，临时类的构造函数已被跳过。**

由于临时类现在为 null，并且`a`是临时类上的一个字段，因此任何涉及 a 的东西都会导致 a `NullReferenceException`。

```
.method private hidebysig instance void  button15_Click(object sender,
                                                        class [mscorlib]System.EventArgs e) cil managed
{
  // Code size       52 (0x34)
  .maxstack  4
  .locals init ([0] bool enter,
           [1] class WindowsFormsApplication1.Form1/'<>c__DisplayClass33' 'CS$<>8__locals34',
           [2] bool CS$4$0000)
  IL_0000:  nop
  IL_0001:  ldc.i4.0
  IL_0002:  stloc.0
  IL_0003:  call       void [mscorlib]System.Diagnostics.Debugger::Break()
  IL_0008:  nop
  IL_0009:  ldloc.0
  IL_000a:  ldc.i4.0
  IL_000b:  ceq
  IL_000d:  stloc.2
  IL_000e:  ldloc.2
  IL_000f:  brtrue.s   IL_0033
  IL_0011:  newobj     instance void WindowsFormsApplication1.Form1/'<>c__DisplayClass33'::.ctor()
  IL_0016:  stloc.1
  IL_0017:  nop
  IL_0018:  ldloc.1
  IL_0019:  ldc.i4.0
  IL_001a:  stfld      bool WindowsFormsApplication1.Form1/'<>c__DisplayClass33'::a
  IL_001f:  ldarg.0
  IL_0020:  ldloc.1
  IL_0021:  ldftn      instance void WindowsFormsApplication1.Form1/'<>c__DisplayClass33'::'<button15_Click>b__32'()
  IL_0027:  newobj     instance void [System.Windows.Forms]System.Windows.Forms.MethodInvoker::.ctor(object,
                                                                                                     native int)
  IL_002c:  call       instance object [System.Windows.Forms]System.Windows.Forms.Control::Invoke(class [mscorlib]System.Delegate)
  IL_0031:  pop
  IL_0032:  nop
  IL_0033:  ret
} // end of method Form1::button15_Click 
```

# asp.net - ASP.Net MVC 不将电子邮件呈现为 type="email"

> ID：16060245
> 
> 赞同：3
> 
> 时间：2013-04-17T12:37:06.157
> 
> 标签：asp.net, html, asp.net-mvc-3, validation

在我的模型中，我有：

```
[Required]
[DataType(DataType.EmailAddress)]
public string EmailAddress {get; set;} 
```

然而，在我看来（来源）这呈现为：

```
<label for="EmailAddress">EmailAddress</label>
<input data-val="true" data-val-required="The EmailAddress field is required"
    id="EmailAddress" name="EmailAddress" type="text" value="" />
<span class="field-validation-valid" data-valmsg-for="EmailAddress" data-valmsg-replace="true"> 
```

我认为这应该使用**type="email"**而不是 type="text" 呈现 - 所以在客户端验证时，如果电子邮件不是有效格式，它不会被接收。

**编辑**

此外，当我调用**if (ModelState.IsValid)**时，即使电子邮件地址的格式不正确，它也会返回 true。所以即使浏览器不支持 HTML5，我也会认为控制器中的 IsValid 会强制执行验证 - 不是这样吗？

我的模型上是否还需要其他东西来强制 type="email" 以便正确检查有效的电子邮件地址？

谢谢，

标记

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T16:09:21.563

DataType 属性不对输入进行任何验证或呈现电子邮件属性。[此](https://stackoverflow.com/questions/11453574/mvc-datatypedatatype-emailaddress-no-validation)问题描述了如何使用正则表达式或 [数据注释扩展](http://dataannotationsextensions.org)库添加电子邮件验证。

此外，如果您使用`@Html.TextBoxFor(m => m.Email, new { type = "email" })`（如果使用 HTML5 文档类型）将呈现电子邮件属性，这将导致兼容浏览器的验证 - 请参阅[此](http://caniuse.com/#feat=form-validation)。

它还有一个额外的优势，即一些（最现代的）智能手机将显示一个电子邮件键盘（带有*@*符号和*.com*）以便于打字。请参阅[默认为 iPhone 上的数字、电子邮件和 URL 键盘](http://www.bennadel.com/blog/1721-Default-To-The-Numeric-Email-And-URL-Keyboards-On-The-iPhone.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:42:23.000

This [input type](https://developer.mozilla.org/en-US/docs/HTML/Element/Input) is only available in HTML5:

```
<input type="email" /> 
```

You can try to set doctype to HTML5 for your document like this:

```
<!DOCTYPE html> 
```

**EDIT** But you won't be sure client browser will be able to treat / validate this input as an email.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:46:33.353

[这也许正是您所需要](http://www.deanhume.com/Home/BlogPost/asp-net-mvc-html5-toolkit/29)的。在该页面上，它说它支持`Email`输入类型。

> 工具包中还支持以下输入类型：文本、颜色、电子邮件、搜索、时间、电话、文件、日期、日期时间、月、周、范围、数字

# cuda - CUDA 将锯齿状阵列从主机复制到设备

> ID：16060246
> 
> 赞同：0
> 
> 时间：2013-04-17T12:37:06.313
> 
> 标签：cuda

所以我试图将一个锯齿状数组从主机复制到设备。首先这里是我目前对cudaMalloc和cudaMemcpy的理解：

cudaMalloc 获取指向内存块指针的指针。

cudaMemcpy 需要一个指向要复制到或从中复制的内存块的指针。

如果我错了，请纠正我。

现在这是我的代码不起作用（编译正常但没有输出）：

```
__global__ void kernel(int** arr)
{
    for (int i=0; i<3; i++)
    printf("%d\n", arr[i][0]);
}

int main()
{
    int arr[][3] = {{1},{2},{3}}; // 3 arrays, 1 element each

    int **d_arr;

    cudaMalloc((void**)(&d_arr), sizeof(int*)*3); // allocate for 3 int pointers

    for (int i=0; i<3; i++)
    {
    cudaMalloc( (void**)  &(d_arr[i]), sizeof(int) * 1 ); // allocate for 1 int in each int pointer

    cudaMemcpy(d_arr[i], arr[i], sizeof(int) * 1, cudaMemcpyHostToDevice); // copy data
    }

    kernel<<<1,1>>>(d_arr);

    cudaDeviceSynchronize();
    cudaDeviceReset();
} 
```

那么我在这里做错了什么？干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:01:23.027

我发现了原因，这是因为 cudaMalloc 和 cudaMemcpy 期望指针存在于主机上而不是设备上。

在我的 for 循环中，我试图在主机上运行的代码中填充设备上存在的指针！

正确的方法是创建一个中间变量，一个指向设备内存的主机指针，用整数填充它，然后将该指针复制到锯齿状数组中（指针上的指针）！

这是正确的版本：

```
__global__ void kernel(int** arr)
{
    for (int i=0; i<3; i++)
        printf("%d\n", arr[i][0]);
}

int main()
{
    int arr[][3] = {{1},{2},{3}}; // 3 arrays, 1 element each

    int **d_arr;

    cudaMalloc((void***)(&d_arr), sizeof(int*)*3); // allocate for 3 int pointers

    for (int i=0; i<3; i++)
    {

        int* temp;

        cudaMalloc( (void**)  &(temp), sizeof(int) * 1 ); // allocate for 1 int in each int pointer

        cudaMemcpy(temp, arr[i], sizeof(int) * 1, cudaMemcpyHostToDevice); // copy data

        cudaMemcpy(d_arr+i, &temp, sizeof(int*), cudaMemcpyHostToDevice);
    }

    kernel<<<1,1>>>(d_arr);

    cudaDeviceSynchronize();
    cudaDeviceReset();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:11:37.560

1.  您的内核调用`printf()`，它~~曾经~~是（直到 CC2.0）一个主机函数。这里一切正常。;)

2.  `cudaMemcpy((void*)d_arr, (void*)arr, sizeof(int*)*3, cudaMemcpyHostToDevice);`将主机上阵列的内存地址复制到设备。这是没有意义的。因为您现在有指向设备上主机内存的指针。

3.  您不能在 CUDA 中以特定方式分配二维数组。请参阅[http://www.stevenmarkford.com/allocating-2d-arrays-in-cuda/](http://www.stevenmarkford.com/allocating-2d-arrays-in-cuda/)。

# javascript - Hammer.js 事件优先级

> ID：16060249
> 
> 赞同：12
> 
> 时间：2013-04-17T12:37:14.493
> 
> 标签：javascript, events, hammer.js

我已经为我的事件实现了hammer.js 库。问题是同时触发了多个事件。

我可以设置某种事件优先级吗？假设在完成转换时，所有其他事件都将被忽略。当变换停止时，可以完成其他事件。

```
 hammertime.on("transform", function(evt) {
      //transform
    }

    hammertime.on("drag", function(ev) {
       //drag
    } 
```

我已经尝试过这样的事情：当我们开始变形时禁用拖动

```
 hammertime.on("transform", function(evt) {
          //transform
          hammertime.options.drag="false";
} 
```

并在转换完成后重新启用它

```
 hammertime.on("transformend", function(evt) {
          //transformend
          hammertime.options.drag="true";
 } 
```

这种方法可以正常工作，除非有时拖动不会重新设置为 true。我想要一个 100% 有效的解决方案。请帮忙...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T13:48:41.807

一种廉价的方法是让您的事件处理程序合作：

```
var transforming = false;
hammertime.on("transformstart", function (ev) { transforming = true; ... });
hammertime.on("transformend", function (ev) { transforming = false; });
hammertime.on("drag", function (ev) { if (!transforming) { ... } }); 
```

如果 Hammer 并不总是调用您的`transformend`，那么不幸的是，解决该错误的所有方法都是使用某种计时器，如果经过一定时间，该计时器将结束您的转换。它并不完美，但它可以帮助您从 Hammer 中可能存在的错误中恢复过来：

```
var transformTimer = undefined,
    transforming = false;
hammertime.on("transform", function (ev) {
    transforming = true;
    if (transformTimer !== undefined) clearTimeout(transformTimer);
    transformTimer = setTimeout(function () {
        transformTimer = undefined;
        transforming = false;
    }, 1000); // end the transform after 1s of idle time.

    // your transform code goes here
});
hammertime.on("transformend", function () {
    if (transformTimer !== undefined) {
        clearTimeout(transformTimer);
        transformTimer = undefined;
    }
    transforming = false;
});
hammertime.on("drag", function (ev) { if (!transforming) { ... } }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-12T12:21:36.683

我刚刚设法修复了那个错误。

```
 var transforming = false;
            var transformTimer = null;          

            hammertime2.on('touch drag dragend transform', function(ev) {
                manageMultitouch(ev);
            });

            hammertime2.on("transformstart", function(evt) {                    
                transforming = true;
            });

            hammertime2.on("transformend", function(evt) {
                setTimeout(function () {       
                    transforming = false;
                }, 1000);
            });

        function manageMultitouch(ev){              

            if (transforming && (ev.type == 'drag' || ev.type =='dragend') ) return;

            switch(ev.type) {
                case 'touch':                      
                    break;

                case 'drag':
                    break;

                case 'transform':
                    transforming = true;                       
                    break;

                case 'dragend':
                    break;
            } 

        } 
```

这里重要的部分是，当你做“变换”时，总是设置`transforming = true;`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T18:24:29.863

尝试`ev.gesture.stopDetect();`

有关详细信息，请参阅 Hammer 的 wiki！ [https://github.com/EightMedia/hammer.js/wiki/Event-delegation-and-how-to-stopPropagation---preventDefaults](https://github.com/EightMedia/hammer.js/wiki/Event-delegation-and-how-to-stopPropagation---preventDefaults)

# javascript - 将 servlet 的响应写入 iframe

> ID：16060252
> 
> 赞同：0
> 
> 时间：2013-04-17T12:37:23.723
> 
> 标签：javascript, html, jsp, servlets, web-applications

内容.jsp

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Insert title here</title>
    </head>
    <body>
    <iframe src="Response.jsp">
    </iframe>
    </body>
    </html> 
```

响应.jsp

```
 <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Insert title here</title>
    </head>
    <body>
    <%="Loading..." %>
    <%
    try{
    Thread.sleep(6000);
    }
    catch(Exception e){

    }
    %>
    <%="Loaded" %>
    </body>
    </html> 
```

在上面的代码中，我希望像在 i 框架中一样，“Loaded”应该在“Loading”6 秒后打印，但在这里它们“Loading...”和“Loaded”在 6 秒后同时打印。我尝试使用flush（）和flush Buffer（）但是如果我更改了“正在加载...”，因为`"<H1> Loading... </H1>"`它可以正常工作。但我需要知道还有其他方法吗？？？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:42:05.607

The server is sending the response as a single html page. So even though you put a sleep between the two statements both will displayed at client side at the same time. There are several approaches to do this.

Have a look at [Commet](http://en.wikipedia.org/wiki/Comet_%28programming%29)

# python - python urllib2 可以打开 localhost 但不能打开 127.0.0.1

> ID：16060254
> 
> 赞同：-2
> 
> 时间：2013-04-17T12:37:30.670
> 
> 标签：python, proxy, localhost, urllib2

我正在使用 python`urllib2`库，可以看到一个奇怪而讨厌的问题。

**Windows 7的。**

我的代码：

```
import urllib2 as url_request

opener = url_request.build_opener(url_request.ProxyHandler({'http': 'http://login:password@server:8080'}))
request = url_request.Request("http://localhost");
response = opener.open(request)
print response.read() 
```

它工作得很好，但是当我更改`localhost`为`127.0.0.1`这个错误时：

```
HTTPError: HTTP Error 502: Proxy Error ( Forefront TMG denied the specified Uniform Resource Locator (URL).  ) 
```

**其他地址如 google.com 可以成功打开。唯一的问题是 127.0.0.1**

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T12:52:09.467

使用 设置`no_proxy`或`NO_PROXY`环境键`127.0.0.1`，也可以使用`localhost`：

```
import os

os.environ['no_proxy'] = '127.0.0.1,localhost' 
```

在 Windows 上，注册表中的`ProxyOverride`键也会被查询，您可能已注册为异常。检查您的代理设置以验证这一点。`HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings``localhost`

# android - 如果mp3已经在android中播放，如何关闭progressdialog

> ID：16060263
> 
> 赞同：0
> 
> 时间：2013-04-17T12:37:49.947
> 
> 标签：android

我的问题是，如果 mp3 已经在播放，你如何关闭 ProgressDialog？

请检查我到目前为止尝试过的内容：

```
mediaPlayer.setDataSource(timelessFuture);
mediaPlayer.prepare(); 

// gets the song length in milliseconds from URL
mediaFileLengthInMilliseconds = mediaPlayer.getDuration(); 
progressDialog = ProgressDialog.show(this, "Downloading", "Please wait while podcast is being downloaded...");

if(!mediaPlayer.isPlaying()){
    mediaPlayer.start();
    play.setCompoundDrawablesWithIntrinsicBounds(R.drawable.button_pause, 0, 0, 0);
}   else {
    mediaPlayer.pause();
    play.setCompoundDrawablesWithIntrinsicBounds(R.drawable.button_play, 0, 0, 0);
}

primarySeekBarProgressUpdater(); 
```

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:41:38.267

when playing starts, use

```
progressDialog.dismiss(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:24:18.750

而不是`mediaPlayer.prepare();`你可以使用`mediaPlayer.prepareAsync();`which 异步工作。

但随后您需要实施`OnPreparedListener`您的活动或服务。之后你还需要说`mediaPlayer.setOnPreparedListener(this);`。所以基本上当媒体播放器准备好，准备好时，它会进入下面的方法。所以你可以像下面这样关闭你的进度对话框。

```
@Override
public void onPrepared(MediaPlayer mp) {
    mediaPlayer.start();
    progressDialog.dismiss();
} 
```

# node.js - 在 nodeJS 中获取 SESSIONID

> ID：16060268
> 
> 赞同：2
> 
> 时间：2013-04-17T12:38:03.730
> 
> 标签：node.js, express, socket.io, sessionid

现在，在玩了几个小时的 nodejs 和 socket.io 之后，我又遇到了几个问题 - 一个是，我需要在 node.js 中获取 sessionID，而无需使用`app.get('/' ...`- 因为该事件似乎不会触发`socket.io`连接，它只会触发`.on('connection', function( ...`

```
var express = require('express')()
express.set('port', process.env.PORT || 8080)

var server = require('http').createServer(express)
var socket = require('socket.io').listen(server)

server.listen(express.get('port'))

// this event is fired, get('/', ... isnt!
server.on('connection', function(stream) {
    // ??
} ) 
```

会话最初是由 PHP 应用程序在用户登录时创建的。会话数据存储在数据库中，我需要访问该数据的关键是会话 ID。最简单的方法是什么？如前所述，我发现了几个使用过的示例，`app.get('/' ...`但我根本无法触发该事件。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:49:31.097

如果会话数据被存储为 cookie（很可能），那么您应该能够在套接字握手期间重新解析该数据。我在[这个答案](https://stackoverflow.com/a/15893116/2210128)上发布了代码，但也在这里复制了代码：

```
io.configure(function () {
  io.set('authorization', function (handshakeData, callback) {

    var cookie = handshakeData.headers.cookie;

    // parse the cookie to get user data...

    // second argument to the callback decides whether to authorize the client
    callback(null, true);
  });
}); 
```

如果会话数据在 URL 中传播，那么您可以从`handshakeData.url`或收集此信息`handshakeData.query`。您可能必须进行自己的实验。

# django - Django __unicode__ 扩展 Auth_User 模型

> ID：16060269
> 
> 赞同：0
> 
> 时间：2013-04-17T12:38:03.943
> 
> 标签：django, django-models, django-admin, django-users

我正在扩展一个，`auth.models.User`但我在实现该方法时遇到了麻烦`__unicode__`。

```
from django.db import models
from django.contrib.auth.models import User

class Artist(models.Model):
    user = models.OneToOneField(User)
    city = models.CharField(max_length=30)
    bio = models.CharField(max_length=500) 
```

现在如何访问`user`字段，因为我想返回 Django Admin 的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:47:38.303

```
class Artist(models.Model):
    # fields

    def __unicode__(self):
        return "{first_name} {last_name}".format(
            **dict(
                first_name=self.user.first_name,
                last_name=self.user.last_name
            )
        ) 
```

虽然`User`已经有一个连接名称字段的功能，所以这也可以：

```
def __unicode__(self):
    return "{0}".format(self.user.get_full_name()) 
```

甚至

```
def __unicode__(self):
    return self.user.get_full_name() 
```

# android - 格式化带有参数的字符串数组

> ID：16060271
> 
> 赞同：7
> 
> 时间：2013-04-17T12:38:06.867
> 
> 标签：android, string-formatting

我想格式化一个字符串数组，就像[android 用来格式化字符串](http://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling)一样：

通常我们这样做：

*   字符串.xml

    ```
    <string name="welcome_messages">Hello, %1$s! You have %2$d new messages.</string> 
    ```

*   在一些java代码中：

    ```
    Resources res = getResources();
    String text = String.format(res.getString(R.string.welcome_messages), username, mailCount); 
    ```

我正在寻找类似的东西：

*   在一些任意的xml中：

    ```
     <string-array name="employee">
            <item>name: %1$s</item>
            <item>post: %2$s</item>
        </string-array> 
    ```

*   在一些java代码中：

    ```
    Resources res = getResources();
    String[] employee = ArrayString.format(res.getStringArray(R.string.employee), name, post); 
    ```

有没有一种优雅的方式来做到这一点？

编辑：

下一段代码是一种解决方法，我发布它只是为了帮助@Sufian，他在评论中要求它。一旦我的问题是关于格式化字符串数组的内容并且下面的代码分别格式化每个字符串，这不是一个真正的答案。

在一些 misc.xml 中：

```
<string-array
    name="string_array">
    <item>1st position: %1$d</item>
    <item>2nd position: %1$d</item>
</string-array> 
```

然后，在java代码中：

```
res = getResources();
String[] sa = res.getStringArray(R.array.string_array);
for (int i = 0; i < sa.length; i++ ) {
    text += String.format(sa[i], i);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-07-10T17:27:19.023

只需使用：

```
String text = String.format(res.getStringArray(R.array.myStringArray)[index], param1, param2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:07:08.100

getQuantityString 可能会解决您的问题。

查看[http://developer.android.com/guide/topics/resources/string-resource.html中的数量字符串](http://developer.android.com/guide/topics/resources/string-resource.html)

这是特定的 API 文档： http: [//developer.android.com/reference/android/content/res/Resources.html#getQuantityString(int,%20int,%20java.lang.Object...)](http://developer.android.com/reference/android/content/res/Resources.html#getQuantityString(int,%20int,%20java.lang.Object...))

# eclipse - 自动标记事件已停止工作

> ID：16060277
> 
> 赞同：0
> 
> 时间：2013-04-17T12:38:31.770
> 
> 标签：eclipse, eclipse-cdt

由于某种原因，一两天以来，我在 C/C++ 代码中出现的标记已经停止工作。

它在我切换按钮/快捷键 (Alt+Shift+O) 时起作用。但是一旦它打开，当我选择/单击其他字段时，它不会自动更新编辑器。

当我关闭该功能时，突出显示消失，然后当我再次打开它时，它将标记当前选定字段的出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:51:57.730

[这似乎是 Juno 4.2.2 版本中的一个错误](http://www.eclipse.org/forums/index.php/m/1008457/)

[关于 SO 的建议解决方法](https://stackoverflow.com/questions/12188020/eclipse-mark-occurrences-doesnt-mark-all-occurrences/16031157#16031157)

# ios - MFMailComposer 并关闭视图

> ID：16060280
> 
> 赞同：0
> 
> 时间：2013-04-17T12:38:35.860
> 
> 标签：ios, xcode

我有一个使用 的视图，`MFMailCompseViewController`并且效果很好！但是，当我发送电子邮件或取消电子邮件时，视图会按原样关闭，但是当它返回到上一个视图时，它会向下滚动到视图上的内容之外。向上滚动时，其余内容将被截断。如何`MFMailComposeViewController`正确关闭并显示先前的视图？我已经包含了一些图像来帮助解释。

![图 1](https://i.stack.imgur.com/RfX9g.png)![图 2](https://i.stack.imgur.com/wDXE3.png)![图 3](https://i.stack.imgur.com/ygXCh.png)![图 4](https://i.stack.imgur.com/eNDnK.png)

# jprofiler - JProfiler 错误：IDE 找不到选定的类

> ID：16060282
> 
> 赞同：2
> 
> 时间：2013-04-17T12:38:37.913
> 
> 标签：jprofiler

当我单击查看源代码时，我在 J Profiler 中遇到问题，我收到一些错误消息，提示 IDE 无法找到所选的类并且无法查看源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:56:20.893

编辑会话设置，选择“应用程序设置”选项卡，选择“Java 文件路径”部分中的“源路径”单选按钮，然后在此处添加源文件根目录。

另一种方法是从您的 IDE（使用适当的 JProfiler 插件）启动分析会话，然后源代码导航将在 IDE 中，您无需进行任何配置。

# jsp - Adobe cq 5.5 具有拖放图像功能的对话框

> ID：16060295
> 
> 赞同：2
> 
> 时间：2013-04-17T12:39:17.000
> 
> 标签：jsp, adobe, aem

我一直致力于 Adob​​e CQ5.5 自定义组件的开发。我面临的问题是在对话框中添加多个拖放图像以映射到 jcr 内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T19:46:59.517

听起来您正试图在一个组件对话框中拥有两个图像选项卡。最简单的方法是使用 CRXDE lite 将图像节点从 /libs/foundation/components/page/dialog/items/tabs/items/image 复制到您的对话框中。

但是有一个问题。如果您尝试将两个图像放在一个组件对话框中，您会注意到该对话框无法正确显示其中一个图像（可能是任何未命名为“图像”的图像）。除了默认图像之外，我还遇到了添加页面缩略图图像的问题。

这种不当行为有两个原因。首先，第二张图片的 requestSuffix 属性必须与第一张不同。您会认为这足以解决问题，而且应该如此，但由于某种原因，CQ 不会在（这些特定的）图像内容节点上创建 sling:resourceType 属性，因此请求仍然无法正确解决在对话框中。在名为“image”的节点的情况下，它似乎被正确推断，但在任何其他情况下都没有。这意味着您必须手动添加此属性：

```
sling:resourceType=foundation/components/image 
```

到第二个图像的内容节点。同样，您还需要将图像对话框属性中的 requestSuffix 属性的值更改为其他值，例如：“/thumbnail.img.png”。缩略图开头的斜线也是必需的。（默认值是“.img.png”——默认图像组件似乎得到了特殊处理，所以这不是一个明显的修复）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-06T01:54:43.643

使用以下代码扩展Image 组件 (/libs/foundation/components/image) 中的*dialog.xml*以在编辑对话框中正确显示第二个图像：

```
 <image
        jcr:primaryType="cq:Widget"
        cropParameter="./imageCrop"
        ddGroups="[media]"
        fileNameParameter="./fileName"
        fileReferenceParameter="./fileReference"
        mapParameter="./imageMap"
        name="./file"
        requestSuffix=".img.png"
        rotateParameter="./imageRotate"
        title="Thumbnail"
        xtype="html5smartimage"/>
    <thumb
        jcr:primaryType="cq:Widget"
        cropParameter="./thumbImageCrop"
        ddGroups="[media]"
        fileNameParameter="./thumbFileName"
        fileReferenceParameter="./thumbFileReference"
        mapParameter="./thumbImageMap"
        name="./thumb"
        requestSuffix="/thumb.img.png"
        rotateParameter="./thumbImageRotate"
        title="Image"
        xtype="html5smartimage"/> 
```

# c# - C#，如何将 int 的增量声明为对象？

> ID：16060296
> 
> 赞同：3
> 
> 时间：2013-04-17T12:39:20.943
> 
> 标签：c#, .net, types, casting

我有一个外部系统，它给了我一个对象值（我知道这个值总是一个装箱的整数类型）。我想以通常的方式增加它：`int value += otherIntValue`，但我从编译器得到一个错误：

> 运算符“+=”不能应用于类型的操作数

例如：

```
//source values i cannot to change it
object targetInt = 100;
int incrementedValue = 20;

//usual way - not works
targetInt += incrementedValue;    

//ugly workaround
targetInt = ((int) targetInt) + incrementedValue; 
```

有没有办法增加 int 和 object 的实例`targetInt += incrementedValue;`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T12:47:16.587

只是不要更改您的代码。将您`object`转换为整数是非常好的，因此可以使用另一个整数进行加法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:11:30.830

只是为了它，这是一种通过运算符重载来实现的方法。你一定很讨厌铸造操作员......

```
targetInt += (Int)incrementedValue;

public class Int
{
    private int _value;

    public Int(int value)
    {
        _value = value;
    }

    public static implicit operator Int(int value)
    {
        return new Int(value);
    }

    public static object operator +(object target, Int increment)
    {
        return increment._value + (int)target;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:20:03.930

正如其他人所说，强制转换是处理被视为`object`.

但是，话虽如此，如果您*真的*想使用任意运算符和方法而不进行编译时类型检查，则可以使用`dynamic`关键字：

```
dynamic targetInt = 100;
int incrementedValue = 20;

targetInt += incrementedValue; 
```

# java - 退货有什么问题？

> ID：16060300
> 
> 赞同：15
> 
> 时间：2013-04-17T12:39:37.437
> 
> 标签：java, oop, this

在我工作的公司，有一份文档描述了我们应该在 Java 中遵守的良好实践。其中之一是避免返回的方法，`this`例如：

```
class Properties {

  public Properties add(String k, String v) {
   //store (k,v) somewhere
     return this;
  }

} 
```

我会有这样的课，这样我就可以写：

```
 properties.add("name", "john").add("role","swd"). ... 
```

这种成语我见过很多次了，喜欢在`StringBuilder`里面并没有发现任何问题。

他们的论点是：

> ... 可能是同步问题的根源或对目标对象状态的预期失败。

我想不出这可能是真的情况，你们谁能给我一个例子吗？

**编辑**该文档没有指定任何关于可变性的内容，所以我看不出链接调用和执行之间的区别：

```
properties.add("name", "john");
properties.add("role", "swd"); 
```

我会尝试与发起人取得联系，但我想在我的枪上膛的情况下这样做，这就是我发布这个问题的原因。

**已解决**：我与其中一位作者交谈，他的初衷显然是避免释放尚未准备好的对象，例如在 Builder 模式中，并解释说如果在调用之间发生上下文切换，则对象可能在无效状态。我认为这与返回无关，`this`因为您可能会犯同样的错误，购买一个一个调用方法，并且更多地与正确同步构建过程有关。他承认该文件可能会更加明确，并将很快对其进行修改。胜利是我/我们的！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T12:47:58.893

我的猜测是他们反对可变状态（而且通常是正确的）。如果您不是设计返回的流畅接口`this`，而是返回具有更改状态的对象的新不可变实例，则可以避免同步问题或没有`"failed expectations about the states of target objects"`. 这可以解释他们的要求。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T12:56:41.960

这种做法的唯一严肃基础是避免可变对象；关于它“令人困惑”并导致“期望失败”的批评相当微弱。一个人在没有首先熟悉它的语义之前**永远**不应该使用一个对象，并且仅仅为了迎合那些选择不阅读 Javadoc 的人而对 API 实施约束根本不是一个好习惯——尤其是因为，正如您所指出的，返回`this`以实现一个流畅的 API 设计是 Java 中的标准方法之一，并且确实是一种非常受欢迎的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T12:56:22.140

我认为有时这种方法可能非常有用，例如在“构建器”模式中。

我可以说，在我的组织中，这种事情是由 Sonar 规则控制的，而我们没有这样的规则。

另一个猜测是，该项目可能是建立在现有代码库之上的，这是一种遗留限制。

所以我在这里唯一能建议的就是和写这个文档的人谈谈 :)

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T14:42:20.533

我认为在某些情况下使用这种模式是完全可以接受的。

例如，作为一名 Swing 开发人员，我经常使用 GridBagLayout，因为它具有优势和灵活性，但任何曾经使用过它的人（它是犯罪 GridBagConstraints 的合作伙伴）都知道它可能非常冗长且可读性不强。

我在网上看到的一种常见解决方法（也是我使用的一种）是子类化 GridBagConstraints (GBConstraints)，它为每个不同的属性都有一个设置器，每个设置器都返回这个。这允许开发人员根据需要链接不同的属性。

生成的代码大约是原来的 1/4 大小，并且更具可读性/可维护性，即使对于可能不熟悉使用 GridBagConstaints 的临时开发人员也是如此。

# ios - 如何在 iOS 中以编程方式添加默认日历

> ID：16060301
> 
> 赞同：3
> 
> 时间：2013-04-17T12:39:40.260
> 
> 标签：ios, iphone, ios5, calendar

如何在我的应用程序中添加日历控件的默认功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:32:10.277

我尝试使用以下一些开源组件来复制 iOS 日历样式：

[Kal - 它非常好和详细，就像 iOS 日历](https://github.com/klazuka/Kal)

[Tapku - 非常大但很好的](https://github.com/devinross/tapkulibrary)

[CK 日历 - 只有一个月，没有 EventKit 集成。](https://github.com/jaykz52/CKCalendar)

[对于日视图和周视图。](http://github.com/muhku/calendar-ui?) [还有这个。](https://www.cocoacontrols.com/controls/maweekview)

[AB 日历选择器 - 非常棒的年份控制。](https://github.com/k06a/ABCalendarPicker)

最好看看所有这些是如何实现的，然后自己做一些事情。

# asp.net - 用于使用 SSL 在现场生成 404 的 Web 表单的 WebAPI

> ID：16060304
> 
> 赞同：1
> 
> 时间：2013-04-17T12:39:44.583
> 
> 标签：asp.net, iis-6, ssl-certificate, webforms, asp.net-web-api

我以前没有使用 Web 表单的 WebAPI，但继承了使用 WebAPI 的代码，所以如果这是一个愚蠢的问题，我深表歉意。

从我今天进行的研究来看，我们的设置似乎相当基本......

1.  global.asax 中的路由表定义

2.  继承自 ApiController 的 Controller 类

3.  通过 jQuery 调用 Ajax

这在本地和没有 SSL 证书的产品站点上都可以正常工作。但是，该站点具有 SSL，ajax 调用会产生 404。

任何帮助将不胜感激。

谢谢你！

富有的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-16T03:28:59.837

这对我有用：

转到：IIS -> [您的站点] -> 处理程序映射

您需要确保有一个 Handler 映射到您的 Web 服务正在使用的路径，即“*/api/*”。在我的项目中，有一个名为“静态文件”的现有处理程序具有这样的路径。它使用了 StaticFileModule、DefaultDocumentModule 和 DirectoryListingModule。

在“请求限制”下设置适用于您的项目的规则。我的设置：

映射 - 选中“仅当请求映射到时调用处理程序：” - 标记“文件或文件夹”

动词 - “所有动词”

访问 - “脚本”（默认）

有关请求限制的更多信息： [http ://technet.microsoft.com/en-us/library/cc730969(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc730969(v=ws.10).aspx)

这些设置很可能在您站点的 Web.config 中设置。当我开始工作时，我会发布我的发现。

# .net - 我正在使用 .NET 4.5 版本的实体框架。如果我导入 Entity Framework 5.0 Nuget 包，我会有任何性能改进吗？

> ID：16060305
> 
> 赞同：0
> 
> 时间：2013-04-17T12:39:50.640
> 
> 标签：.net, performance, entity-framework

我已经阅读了很多关于实体框架性能的文章。[比如这个](http://devproconnections.com/entity-framework/improve-performance-entity-framework-5)。他们都说 Entity Framework 5.0 有性能改进。

让我烦恼的是，我不太了解微软对 EntityFramework 的“部分”所做的分离，该部分实际上是 .NET 框架附带的，并且该部分作为 Nuget 包分发。

如果我继续使用与现在相同的类并且不更改代码中的任何内容，那么仅导入 5.0 程序集会对我的软件产生任何影响对我来说没有任何意义。当然，除非我开始使用不同的类和不同的扩展方法。

我的场景：我使用带有 ObjectContext 的 .NET 4.5 EntityFramework，而不是 DbContext。从性能的角度来看，我会从使用 5.0 中受益吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:52:10.887

不要转播 EF 更新的性能会更好。如果您使用 ObjectContext 可能会有点，因为表达式/查询。你需要做几毫秒，这取决于你。

但是比较预编译和未预编译的查询，我确信它处理大约几毫秒。

当您的应用程序出现性能问题时，最好通过审查和重构设计和架构来修复它。看看你从 DB 中获取了多少数据，N+1 个问题。首先，找出存在性能问题的情况。

# java - 在Java中使用什么更好？x <= 10 或 x < 11？

> ID：16060308
> 
> 赞同：7
> 
> 时间：2013-04-17T12:39:58.717
> 
> 标签：java, performance

`x <= 10` 和 之间有影响程序效率的区别`x < 11`吗？还有其他区别吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T12:44:09.817

参考[http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings](http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings) 例如，for `x <= 10` , `if_icmple` 指令将被使用，for `x < 11` , `if_icmplt` 指令将被使用。两者应该具有相同的效率。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T12:42:13.607

No difference for program, I think this is more personal taste.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T12:45:17.150

没有区别

```
int x;
(x <= 10) == (x < 11) 
```

但是对于 double 有很大的不同：

```
double x = 10.5;
x <= 10 // is false
x < 11 // is true 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T12:42:45.950

根本不应该有任何区别。执行相同数量的检查

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-17T12:46:22.153

这取决于你在做什么。例如见下文。

`i <= 10`执行`101`时间而`i < 11`执行时间的循环`111`。

```
public static void main(String[] args) throws IOException {

    int count = 0;
    for (double i = 0; i <= 10; i = i + 0.1)
        count++;

    System.out.println(count);
    count = 0;
    for (double i = 0; i < 11; i = i + 0.1)
        count++;
    System.out.println(count);

} 
```

输出：

```
101
111 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-17T12:44:30.377

两者在效率方面相同，**其个人选择**。
如果您检查生成的类的字节**码两者都具有****相同的复杂性**，即对于这两种情况，因为（假设检查存在于 for 循环中）循环执行相同的次数，所以它们具有相同的复杂性，所以**它不会影响在一个程序的复杂性中**。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-17T12:46:58.960

这取决于 x 的类型。如果是整数，则没有区别。如果是 a`float`或 a `double`，则两者之间存在一定的差异。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-17T13:11:13.433

我测试了一下，代码如下：

```
 public static void main(String[] args) throws InterruptedException, IOException {

    boolean b;
    Date d = new Date();
    for (long i = 0; i < 10000000001L; i++) {
        b = i < 1000001L;
    }
    System.out.println("< " + ((new Date()).getTime() - d.getTime()) + " ms");
    d = new Date();
    for (long i = 0; i <= 10000000000L; i++) {
        b = i <= 1000000L;
    }
    System.out.println("<= " + ((new Date()).getTime() - d.getTime()) + " ms");
} 
```

3 次运行后的结果显示不到 1% 的差异或在其附近，这似乎更像取决于计算机的当前负载。你可以检查一下。

< 12680 毫秒
<= 12673 毫秒

< 12726 毫秒
<= 12717 毫秒

< 12624 毫秒
<= 12774 毫秒

# java - Jasper 报告中的多个文件

> ID：16060314
> 
> 赞同：0
> 
> 时间：2013-04-17T12:40:24.920
> 
> 标签：java, pdf, jasper-reports

我正在使用此代码在 Jasper 中调用我的 jrxml 文件：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.util.HashMap;

import net.sf.jasperreports.engine.JREmptyDataSource;
import net.sf.jasperreports.engine.JasperCompileManager;
import net.sf.jasperreports.engine.JasperExportManager;
import net.sf.jasperreports.engine.JasperFillManager;
import net.sf.jasperreports.engine.JasperPrint;
import net.sf.jasperreports.engine.JasperReport;

public class Jasperreports {

    public static void main(String[] args) {
        Connection conn = null;
        String iphost = "myhostip";
        String dbsid = "DISAD";
        String username = "MYUSERNAME";
        String password = "mypassword";
        try {
            Class.forName("oracle.jdbc.driver.OracleDriver");
            conn = DriverManager.getConnection("jdbc:oracle:thin:@" + iphost + ":1521:" + dbsid, username, password);
            int count = 0;
            JasperReport jasperReport = JasperCompileManager.compileReport("Advice2.jrxml");
            JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, new HashMap(), conn);
            JasperExportManager.exportReportToPdfFile(jasperPrint, "sample" + count + ".pdf");
            count++;
        } catch (Exception e) {
            System.out.println(e);
        }
    }
} 
```

我的 jrxml 文件是：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Advice" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="253171d0-c1c3-465d-a40b-dd200cc3fca8">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <queryString language="SQL">
        <![CDATA[select h.GROUP_DESC, b.foracid ACCOUNT_NUMBER , a.tran_id, b.ACCT_NAME ACCOUNT_NAME,j.NAME,COALESCE(i.EMAIL, n'No email Address')EMAIL, b.schm_code,e.SCHM_DESC, b.SOL_ID, d.SOL_DESC,
COALESCE(c.ADDRESS_LINE1, n'No Address')ADDRESS_LINE1,c.STATE, g.localetext, f.VALUE, f.categoryid, a.TRAN_DATE TRANSACTION_DATE,a.VALUE_DATE,a.TRAN_PARTICULAR TRAN_PARTICULARS,
a.REF_NUM CHQ_REFERENCE, A.TRAN_CRNCY_CODE CURRENCY, a.RATE,
max(case when a.PART_TRAN_TYPE = 'D' then a.TRAN_AMT else 0.00 end) DEBIT_AMOUNT,
max(case when a.PART_TRAN_TYPE = 'C' then a.TRAN_AMT else 0.00 end ) CREDIT_AMOUNT
from TBAADM.DAILY_TRAN_DETAIL_TABLE a, TBAADM.GENERAL_ACCT_MAST_TABLE b, crmuser.address c, tbaadm.service_outlet_table d,
TBAADM.GEN_SCHM_PARM_TABLE e, crmuser.categories f, crmuser.category_lang g, TBAADM.SOL_GROUP_CONTROL_TABLE h, CRMUSER.PHONEEMAIL i,
crmuser.accounts j
where a.acid = b.acid(+)
and a.CUST_ID = c.orgkey(+) and C.ADDRESSCATEGORY = 'Mailing'
and B.SOL_ID = D.SOL_ID(+)
and b.schm_code = E.SCHM_CODE(+)
and c.state = f.value(+)
and F.CATEGORYID = G.CATEGORYID
and b.foracid is not null
and b.acct_name is not null
and B.BANK_ID = H.SOL_GROUP_ID(+)
and B.CUST_ID = I.ORGKEY(+)
and B.CUST_ID = j.orgkey(+)
and rownum <=10
group by b.foracid, a.tran_date, a.value_date, a.tran_particular, a.ref_num, A.TRAN_CRNCY_CODE,
b.acct_name, b.schm_code, b.sol_id,COALESCE(c.ADDRESS_LINE1, n'No Address'),c.STATE, d.sol_desc, e.SCHM_DESC, f.value, f.categoryid,
g.localetext, a.tran_id, H.GROUP_DESC, COALESCE(I.EMAIL, n'No email Address'), a.RATE, j.NAME
order by B.FORACID asc]]>
    </queryString>
    <field name="GROUP_DESC" class="java.lang.String"/>
    <field name="ACCOUNT_NUMBER" class="java.lang.String"/>
    <field name="TRAN_ID" class="java.lang.String"/>
    <field name="ACCOUNT_NAME" class="java.lang.String"/>
    <field name="NAME" class="java.lang.String"/>
    <field name="EMAIL" class="java.lang.String"/>
    <field name="SCHM_CODE" class="java.lang.String"/>
    <field name="SCHM_DESC" class="java.lang.String"/>
    <field name="SOL_ID" class="java.lang.String"/>
    <field name="SOL_DESC" class="java.lang.String"/>
    <field name="ADDRESS_LINE1" class="java.lang.String"/>
    <field name="STATE" class="java.lang.String"/>
    <field name="LOCALETEXT" class="java.lang.String"/>
    <field name="VALUE" class="java.lang.String"/>
    <field name="CATEGORYID" class="java.math.BigDecimal"/>
    <field name="TRANSACTION_DATE" class="java.sql.Timestamp"/>
    <field name="VALUE_DATE" class="java.sql.Timestamp"/>
    <field name="TRAN_PARTICULARS" class="java.lang.String"/>
    <field name="CHQ_REFERENCE" class="java.lang.String"/>
    <field name="CURRENCY" class="java.lang.String"/>
    <field name="RATE" class="java.math.BigDecimal"/>
    <field name="DEBIT_AMOUNT" class="java.math.BigDecimal"/>
    <field name="CREDIT_AMOUNT" class="java.math.BigDecimal"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="28" splitType="Stretch">
            <staticText>
                <reportElement uuid="cf153a5b-1afb-441b-b840-f2a23274363d" x="136" y="8" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[Transaction Advices]]></text>
            </staticText>
        </band>
    </title>
    <pageHeader>
        <band height="35" splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="7" splitType="Stretch"/>
    </columnHeader>
    <detail>
        <band height="301" splitType="Stretch">
            <textField>
                <reportElement uuid="35a120b1-e836-4415-9663-92ab52b751f5" x="0" y="0" width="212" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{NAME}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="4efa323d-f77b-45d1-943a-042dfd78abae" x="0" y="20" width="212" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{ADDRESS_LINE1}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="d5a0d2b1-998f-4c2d-aa26-f83ca078f5f3" x="0" y="40" width="212" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{STATE}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="cca1db34-ad68-4d09-a28e-5af6b77bdd24" x="0" y="60" width="212" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{EMAIL}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement uuid="d92049c4-3cfe-4be8-beb4-240615dc0e8b" x="136" y="127" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[ACCOUNT_NAME]]></text>
            </staticText>
            <textField>
                <reportElement uuid="0a513b59-c441-405e-96b9-85d2404a82fc" x="256" y="127" width="249" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{ACCOUNT_NAME}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement uuid="7128a15d-f84a-46cd-b2f0-202db8a556bf" x="136" y="147" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[SOL_ID]]></text>
            </staticText>
            <textField>
                <reportElement uuid="1e47e77d-3b0f-4018-ac81-2f8673c0d00e" x="256" y="147" width="249" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{SOL_ID}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement uuid="de11f45c-18ee-413e-8e8d-74da809e9e63" x="136" y="167" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[ACCOUNT_NUMBER]]></text>
            </staticText>
            <textField>
                <reportElement uuid="056f9770-a3a7-4a5a-8582-23a88cd19251" x="256" y="167" width="249" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{ACCOUNT_NUMBER}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement uuid="2ddf4f57-0132-4864-b19c-773e69eff4a3" x="136" y="187" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[DEBIT_AMOUNT]]></text>
            </staticText>
            <textField>
                <reportElement uuid="67658e95-18e3-4877-b717-a0202c36d555" x="256" y="187" width="249" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{DEBIT_AMOUNT}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement uuid="6e7974d6-a2e6-4d30-8823-212976e132e6" x="136" y="207" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[CREDIT_AMOUNT]]></text>
            </staticText>
            <textField>
                <reportElement uuid="e34eb773-f0a6-4ee5-8f50-416cd1b95a16" x="256" y="207" width="249" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{CREDIT_AMOUNT}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement uuid="63292bb9-3ab7-44d1-9fd1-da9f53fcd9a3" x="136" y="228" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[TRAN_PARTICULARS]]></text>
            </staticText>
            <textField>
                <reportElement uuid="1a02a640-77b2-4120-b14b-b67c8dcfd2b7" x="256" y="227" width="249" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{TRAN_PARTICULARS}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <columnFooter>
        <band height="45" splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

我得到一个包含所有记录的文件 .pdf。如何为每个记录生成一个文件，以便为每个报告生成不同的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:41:31.503

这只是 JasperReports 的标准行为。每条 SQL 查询返回的记录，详细信息带将重复一次。

因此，如果您希望将每条记录放在不同的 PDF 文件中，您有两种选择：

1.  更改您的 SQL 查询，使其仅返回一条记录，使用参数，以便您可以控制它。
2.  在 java 中获取 SQL 查询的数据，并将该信息作为参数或使用 java 对象数据集传递给 JasperReport。[这个例子](http://1010111chen.wordpress.com/2010/05/19/ireport-tutorial-using-javabean-datasource/)很老，但展示了如何去做。

当然，您需要遍历记录，为这两种方法的每条记录生成一个调用。

希望有帮助

# wpf - 带有工具提示的 Wpf TextBox 样式

> ID：16060316
> 
> 赞同：2
> 
> 时间：2013-04-17T12:40:25.647
> 
> 标签：wpf, tooltip

我希望我的文本框根据验证状态将特定文本显示为工具提示。为此，我目前使用以下代码并且它可以工作：

```
<TextBox Name="textBox1">
    <TextBox.Style>
        <Style TargetType="{x:Type TextBox}">
            <Style.Triggers>
                <Trigger Property="Validation.HasError" Value="False">
                    <Setter Property="ToolTip" Value="{Binding XPath=HelpText/Description, Mode=OneTime}" />
                </Trigger>
                <Trigger Property="Validation.HasError" Value="True">
                    <Setter Property="ToolTip" Value="{Binding RelativeSource={x:Static RelativeSource.Self}, Path=(Validation.Errors)[0].ErrorContent}" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </TextBox.Style>
</TextBox> 
```

如果没有错误，则会显示从 xml 文件中读取的描述文本，如果有错误，则会显示验证错误字符串。

问题是现在我必须复制这种样式并将其应用于每个文本框（并更改 XPath，它对于每个文本框都是唯一的），我想要做的是将样式放在 Window.Resources 中以便我可以只需为每个文本框引用它，如下所示：

```
<TextBox Name="textBox2" Style="{StaticResource TextBoxStyle}" /> 
```

但是每个文本框的 XPath 会有所不同，所以我不能只将我的样式放在 Window.Resources 中。如何使特定于实例的 XPath 在样式中可用？有没有办法在不创建新文本框并从 TextBox 派生的情况下做到这一点？我想知道在这种情况下是否可以使用附加属性，但我不知道它们是如何工作的。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:37:00.953

I haven't completely tested this, but you could use an attached property Something like:

```
class ToolTipHelper {
    public static readonly DependencyProperty ToolTipProperty =
            DependencyProperty.RegisterAttached("ToolTip", typeof(string) ... 
```

Then you modify your trigger:

```
<Trigger Property="Validation.HasError" Value="False">
  <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=(ToolTipHelper.ToolTip}, Mode=OneTime}" />
</Trigger> 
```

And you use it like

```
<TextBox ToolTipHelper.ToolTip="{Binding XPath=HelpText/Description, Mode=OneTime}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:34:43.117

您可以使用[Tag 属性](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.tag.aspx)并将您的样式更改为

```
<Style TargetType="{x:Type TextBox}">
    <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=Tag}" />
    <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="True">
            <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors)[0].ErrorContent}" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

然后你将期望绑定到每个特定`XPath`的属性`Tag``TextBox`

```
<TextBox Tag="{Binding XPath=HelpText/Description, Mode=OneTime}" /> 
```

# java - 动态生成的表格项目的单元格边距

> ID：16060324
> 
> 赞同：0
> 
> 时间：2013-04-17T12:40:41.920
> 
> 标签：java, html, margin, padding

即使我设置了标签的宽度`Odo`，列之间也有很大的边距。`Location``td`

我有一个简单的表：

```
<table width="95%" border="0" cellspacing="0" cellpadding="2">
       <tr>
        <td width="18%" style="padding-left: 15px">Date</td>
        <td width="16%">Type</td>
        <td width="16%">Odo</td>
        <td width="20%">Location</td>
        <td width="46%">Remark</td>
      </tr>
      {ITEMSLIST}
</table> 
```

我上面的项目列表是这样动态的：

```
itemList += "<tr><td align='left' style='font-size:8px; color:#03F;padding-left: 15px'>"
                                +displayFormat.format(idate)+ "</td><td style='font-size:8px; color:#03F'>"
+ cur2.getString(0)+ " Practicle</td><td style='font-size:8px; color:#03F'>"
+ "200"+ "</td><td style='font-size:8px; color:#03F'>"
+ location+ "</td><td style='font-size:8px; color:#03F'>"
+ cur2.getString(3) + "</td></tr>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:06:33.773

我明确需要为所有动态生成的`td`标签定义宽度，结果很好-

```
itemList += "<tr><td align='left'  width='18%' style='font-size:8px; color:#03F;padding-left: 15px; '>"+displayFormat.format(idate)
    + "</td><td width='16%' style='font-size:8px; color:#03F'>"
    + cur2.getString(0)+ " Practicle</td><td width='16%' style='font-size:8px; color:#03F'>"
    + "200"+ "</td><td width='20%' style='font-size:8px; color:#03F'>"
    + location
    + "</td><td width='46%' style='font-size:8px; color:#03F'>"
    + cur2.getString(3) + "</td></tr>"; 
```

# cygwin - 用另一个文件夹中的修改版本替换一个文件夹及其所有子目录中的文件

> ID：16060326
> 
> 赞同：1
> 
> 时间：2013-04-17T12:40:44.297
> 
> 标签：cygwin, directory, dos, subdirectory

我有两个文件夹，一个叫做“修改”，一个叫做“原始”。

*   'modified' 没有子目录，包含 4000 个 wav 文件，每个文件都有唯一的名称。
*   4000 个文件是“原始”文件的副本，但该文件夹有许多子目录，原始 wav 文件位于其中。

我想，对于“修改”中的所有 wav 文件，无论它们在哪里，都在“原始”中替换它们的名称对应文件。

例如，如果一个文件在修改后被称为“sound1.wav”，那么我想在“original”的某个子目录中找到“sound1.wav”，并将那里的原始文件替换为修改后的版本。

我运行 Windows 8，因此最好使用命令提示符或 cygwin。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:07:44.597

根据要求，我编写了执行上述操作的 python 代码。我使用“os”和“shutil”模块首先浏览目录，然后覆盖文件。

'C:/../modified' 是指包含我们已修改并希望用于覆盖原始文件的文件的目录。

“C:/../originals”是指包含许多子目录的目录，这些子目录的文件名与“modified”中的相同。

该代码通过列出修改后的目录中的每个文件来工作，并且对于每个文件，我们声明文件的路径。然后，我们查看原始目录的所有子目录，在修改后的文件和原始文件同名的地方，我们使用shutil.copyfile() 将原始文件替换为修改后的文件。

因为我们使用的是 Windows，所以有必要将斜杠的方向更改为“/”。

这是对修改目录中的每个文件执行的。

如果有人遇到同样的问题，我希望这能派上用场！

```
import os
import shutil

for wav in os.listdir('C:/../modified'):
    modified_file = 'C:/../modified/' + wav

    for root, dirs, files in os.walk('C:/../original'):
        for name in files:
            if name == wav:
                original_file = root + '/' + name
                original_file = replace_file.replace('\\','/')

                shutil.copyfile(modified_file, original_file)
                print wav + ' overwritten'

print 'Complete' 
```

# json - 这是真的 - 我们需要有序的 JSON 吗？

> ID：16060329
> 
> 赞同：0
> 
> 时间：2013-04-17T12:40:47.257
> 
> 标签：json, wcf, webserver, deserialization

我试图发送以下 JSON Body

```
{
    "ID": "3d7effda-8e3a-4254-bc4a-32c473ce473f",
    "Projects": [
        {
            "__type": "ProductEvaluationReference:#abc.Think.Projects",
            "ID": "01ff01cb-d3a5-4a36-b274-446cdcbd93a2",
            "Type": "ProductEvaluation"
        },
        {
            "__type": "FinancialAssessmentReference:#abc.Think.Projects",
            "ID": "403030bf-dc7d-4e4f-ae5b-b25c6b61e986",
            "Type": "FinancialAssessment"
        },
        {
            "__type": "ProductSurveyReference:#abc.Think.Projects",
            "ID": "8e43e41f-d200-4508-9c48-f0ee6e8baf99",
            "Type": "ProductSurvey"
        },
        {
            "__type": "ProductSurveyReference:#abc.Think.Projects",
            "ID": "e066c8ae-e268-4e9d-b2b0-ecb888d9a238",
            "Type": "ProductSurvey"
        }
    ]
}
} 
```

这完美地工作。但是，如果我更改请求中字段的顺序，`__type`即代替字典中的第一个键并将其设置为第二个键。我得到一个错误`Cannot create abstract class`。例如：

```
{
    "ID": "403030bf-dc7d-4e4f-ae5b-  b25c6b61e986",
    "_type": "FinancialAssessmentReference:#abc.Think.Projects",
    "Type": "FinancialAssessment"
} 
```

[我在MSDN](http://msdn.microsoft.com/en-us/library/bb412170.aspx)上阅读了以下内容

> JSON 对象中的类型提示位置
> 请注意，类型提示必须首先出现在 JSON 表示中。这是键/值对的顺序在 JSON 处理中很重要的唯一情况。

这真的是我们需要的吗，`ORDERED JSON`还是我在服务器端出了点问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-22T18:42:17.593

是的，我们确实需要一个有序的 JSON。我创建了一个 NSDictionary 的子类，为键添加一些排序。

# windows - 是否有支持语法高亮和缩进的 4DOS btm 文件的编辑器？

> ID：16060332
> 
> 赞同：0
> 
> 时间：2013-04-17T12:40:52.217
> 
> 标签：windows, syntax-highlighting, text-editor, indentation

我正在对客户的`.btm`文件进行逆向工程（目前使用**Win7**）。我能希望找到一个支持缩进和语法高亮的文本编辑器（或 Netbeans 插件）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:20:27.233

您可以尝试[SynWrite](http://www.uvviewsoft.com/synwrite/)编辑器 + 尝试根据您的需要自定义 BAT 词法分析器。（或者您可以创建一个新的词法分析器）。

# android - Type of score for Facebook score API

> ID：16060334
> 
> 赞同：1
> 
> 时间：2013-04-17T12:40:55.523
> 
> 标签：android, facebook

I'm currently trying to implement an Android game with Facebook score publishing. I have multiple game modes and I'm currently wondering how I can store my scores.

On the official Facebook [documentation](https://developers.facebook.com/docs/howtos/scores/), they are talking about a field called `type`. I haven't found a way to store the score's type yet.

Example:

```
posting those scores : "mode_1" => 22; "mode_2" => 21; "mode_2" => 12, ... 
```

Can anyone help me?

# for-loop - Makefile：for循环和错误中断

> ID：16060338
> 
> 赞同：6
> 
> 时间：2013-04-17T12:41:18.517
> 
> 标签：for-loop, makefile

我有一个带有 for 循环的 Makefile。问题是当循环内发生错误时，执行会继续进行。

```
SUBDIRS += $(shell ls -d */ | grep amore)

# breaks because can't write in /, stop execution, return 2
test:
    mkdir / 
    touch /tmp/zxcv

# error because can't write in / but carry on, finally return 0
tests:
    @for dir in $(SUBDIRS); do \
            mkdir / ; \  
            touch /tmp/zxcv ; \ 
    done; 
```

遇到错误时如何让循环停止？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T12:52:16.143

`|| exit 1`要么在每个可能失败的调用中添加 a ，要么`set -e`在规则的开头执行 a：

```
tests1:
    @dir in $(SUBDIRS); do \
      mkdir / \
      && touch /tmp/zxcv \
      || exit 1; \
    done

tests2:
    @set -e; \
    for dir in $(SUBDIRS); do \
      mkdir / ; \
      touch /tmp/zxcv ; \
    done 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T13:42:35.903

@Micheal 提供了 shell 解决方案。不过，您确实应该使用 make （然后它将与`-j`*n*一起使用）。

```
.PHONY: tests
tests: ${SUBDIRS}
    echo $@ Success

${SUBDIRS}:
    mkdir /
    touch /tmp/zxcv 
```

**编辑**

目标的可能解决方案`clean`：

```
clean-subdirs := $(addprefix clean-,${SUBDIRS})

.PHONY: ${clean-subdirs}
${clean-subdirs}: clean-%:
    echo Subdir is $*
    do some stuff with $* 
```

在这里，我使用了静态模式规则（good stuff™），因此在配方中`$*`是模式中匹配的任何内容`%`（在本例中为子目录）。

# r - 组中键的频率

> ID：16060340
> 
> 赞同：3
> 
> 时间：2013-04-17T12:41:21.970
> 
> 标签：r, frequency

鉴于我有一个`df`这样的数据框，其中包含列`Key`和`User`.

```
Key  User  
1   Bob  
2   Tobi  
1   Bob  
3   Bob  
4   Bob  
5   Bob  
6   Tobi  
5   Bob 
```

我想创建一个新列，其值的计算方式如下：

> 此行键在数据集中的频率/用户等于此行中的用户的行数

在此示例中显示，它看起来像这样：

```
Key  User  Freq
1   Bob    2/6
2   Tobi   1/2
1   Bob    2/6
3   Bob    1/6
4   Bob    1/6
5   Bob    2/6
6   Tobi   1/2
5   Bob    2/6 
```

我不太确定如何在 R 中解决这个问题，有人知道吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T13:22:12.450

这是使用`table`,`prop.table`和的一种方法`merge`。假设您的 data.frame 被称为“mydf”：

```
> merge(mydf, as.data.frame(prop.table(table(mydf), margin = 2)))
  Key User      Freq
1   1  Bob 0.3333333
2   1  Bob 0.3333333
3   2 Tobi 0.5000000
4   3  Bob 0.1666667
5   4  Bob 0.1666667
6   5  Bob 0.3333333
7   5  Bob 0.3333333
8   6 Tobi 0.5000000 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T12:48:39.920

如果您的数据集被称为 dat 使用`ave`是一种方法：

```
## dat <- read.table(text="Key  User  
## 1   Bob  
## 2   Tobi  
## 1   Bob  
## 3   Bob  
## 4   Bob  
## 5   Bob  
## 6   Tobi  
## 5   Bob", header=TRUE)

dat$Freq <- paste(with(dat, ave(Key, Key, FUN=length)), 
    with(dat, ave(as.character(User), User, FUN=length)), sep="/")

##   Key User Freq
## 1   1  Bob  2/6
## 2   2 Tobi  1/2
## 3   1  Bob  2/6
## 4   3  Bob  1/6
## 5   4  Bob  1/6
## 6   5  Bob  2/6
## 7   6 Tobi  1/2
## 8   5  Bob  2/6 
```

**稍微分解一下**

这给出了按键的频率：

```
## + > with(dat, ave(Key, Key, FUN=length))
## [1] 2 1 2 1 1 2 1 2 
```

这给出了用户的分母频率（尽管你的一个是 2，我不确定我是否错过了一些东西）：

```
## > with(dat, ave(as.character(User), User, FUN=length))
## [1] "6" "2" "6" "6" "6" "6" "2" "6" 
```

然后我将两者粘贴在一起。

***编辑-per Ananda Mahto 评论：***

如果您要获取实际值（可能是十进制），请使用与上述相同的形式，但最后一步是除法，而不是粘贴：

```
dat$Freq2 <- with(dat, ave(Key, Key, FUN=length))/ 
    with(dat, as.numeric(ave(as.character(User), User, FUN=length))) 
```

# math - 聚光灯锥方向旋转和方向反转

> ID：16060342
> 
> 赞同：0
> 
> 时间：2013-04-17T12:41:27.710
> 
> 标签：math, opengl

我正在研究 OpenGL 中的聚光灯变换系统。众所周知，聚光灯默认具有位置和锥方向。但在我的实现中，它还必须具有旋转和方向。在这种情况下，**旋转**- 光锥的局部旋转，而**方向**- 应用局部旋转后圆锥的世界旋转。

我在这项工作中遇到了各种轴翻转问题，部分原因是 glm::lookAt 方法反转了输出矩阵的“眼睛”向量。现在一切正常，除了我必须反转最终方向向量 y 和 z 部分为了获得聚光灯锥面而不是相反的方向：

```
 lookatMatr[2].y =-  lookatMatr[2].y;
    lookatMatr[2].z =-  lookatMatr[2].z; 
```

我无法弄清楚两件事：

1 .如何做到这一点，以便我不需要在最后进行反转。2 .为什么只需要Y轴和Z轴反转。

这是转换的完整代码：

```
 glm::vec4 worldPos = WorldMatr *  _pos ;
    glm::vec4 worldDir = WorldMatr  *  glm::vec4( _lightDir,1) ; 
    glm::vec4 worldUp  = WorldMatr  *  glm::vec4(Y_AXIS,1) ; 

    //first construct lookat matrix to get direction vector
    glm::mat4 lookatMatr =  glm::lookAt(glm::vec3(worldPos),glm::vec3(worldDir),glm::vec3(worldUp)) ;

            //rotate locally :
    lookatMatr =  glm::rotate(lookatMatr,30.0f,X_AXIS) ;
    lookatMatr =  glm::rotate(lookatMatr,0.0f,Y_AXIS) ;
    lookatMatr =  glm::rotate(lookatMatr,0.0f,Z_AXIS) ;

            //Orient :
    lookatMatr =  Transform().GetOrientationMatrix() * ( lookatMatr );

    _posOut=  worldPos ;
//  lookatMatr[2].x =-  lookatMatr[2].x;//why only Y and Z to be inverted?
    lookatMatr[2].y =-  lookatMatr[2].y;
    lookatMatr[2].z =-  lookatMatr[2].z;
    _dirOut=  ( lookatMatr[2])   ; 
```

**更新：**

好的，如下所示，我将 _lightDir 的 w 部分设置为零，现在这样做：

```
_dirOut=World * Transform().GetOrientationMatrix() *  rotMatr *   glm::vec4( _lightDir,0); 
```

它正确显示了光锥，但它的方向现在在 X 轴上翻转了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:10:56.647

你必须记住的一件事是`lookAt`产生一个倒置矩阵。该矩阵是将向量从世界空间转换到相机空间的系统变换。这等于将相机从其在世界空间中的位置移动到原点的模型转换。反之亦然。

描述方向的向量必须在其 w 分量中有一个 0。这导致跳过矩阵的转换部分。更正您对`worldDir`和的定义`worldUp`。

但是，您真的不需要 lookAt 矩阵。相反，您应该只`worldDir`对这个向量进行转换。所以总体方向是：

```
_dirOut = 
    WorldMatr * OrientationMatrix * LocalRotationMatrix * glm::vec4(_lightDir, 0); 
```

您可以对矩阵进行预乘，然后对向量执行一次变换，也可以对向量进行三次变换（首先使用 LocalRotationMatrix 等）。

# perl - trying to parse the log file and redirecting output to saperate file

> ID：16060346
> 
> 赞同：0
> 
> 时间：2013-04-17T12:41:39.740
> 
> 标签：perl

Hello am trying to parse log file and redirecting the output to some number of files but lastly some junk named file is creating.. GLOB(0x152c4e4).txt, GLOB(0x1545c1c).txt like that In code am defining each variable in global

```
my $g1logFIle = " " ;
my $V1gFIle = " " ;
my $D1logFIle = " " ;
my $D1logFIle = " " ; 
```

Again am opening a file to redirect its output-

```
open( $g1logFIle, ">>" , g1logFIle.".txt" ) or die $!;
open( $V1logFIle, ">>" , V1logFIle.".txt" ) or die $!;
open( $D1logFIle, ">>" , D1logFIle.".txt" ) or die $!; 
```

And while parsing am just printing my parsed output in file-

```
print $D1logFIle "+D1Launch Request ", ($D1hMetrics{NoOfTimes} + 1), "\n\n"
print $V1logFIle  "+VOD Launch Request ", ($V1Metrics{NoOfTimes} + 1), "\n\n"; 
```

where am doing wrong??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:58:04.553

当我运行您的代码时，我会得到类似`g1logFIle.txt`. 如果您在文件名中使用了变量，则文件将`GLOB(0x152c4e4).txt`被创建。`$g1logFIle`您应该为文件句柄（的第一个参数`open`）和文件名（第三个参数）使用不同的变量。

```
open my $G_HANDLE, '>>', "$g1logFIle.txt" or die $!; 
```

# python - Finding fmin using a Python lambda function

> ID：16060356
> 
> 赞同：2
> 
> 时间：2013-04-17T12:42:00.927
> 
> 标签：python, arrays, numpy, lambda

I have been trying to find the min of this function but i cant seem to get the proper syntax. y2 and y1a are numpy arrays im trying to pass to my lambda function and x is my third variable used by fmin.

```
 y2 = numpy.array(Apple[i:i+len(Leal)])
        y1 = Leal

        y1a = y1 + dif

        y = lambda x, y2, y1a: sum(abs((y2)+x)-y1a)
        emin = fmin(y,0) 
```

Any help would be great.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:14:13.570

您的 y 函数需要 3 个值，但 fmin 只提供一个...

您需要提供一个数组作为初始估计值，或者提供其他参数作为`args`

[http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fmin.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fmin.html)

假设您需要后者：

```
fmin(y, 0, args=(y2, y1a)) 
```

# typo3 - Textfield only with numbers

> ID：16060359
> 
> 赞同：0
> 
> 时间：2013-04-17T12:42:05.363
> 
> 标签：typo3, fluid

I have a Fluid Problem.

This code:

```
<f:form.textfield class="wettersuchinput" maxlength="4" type="email" name="zip" value="{zip}" placeholder="PLZ für Lokalwetter eingeben"/> 
```

I want to fill just numbers in this input textfield. I tried to change the type in numbers, but that's not that i want to.

Can anybody help me to allow just numbers in this textfield ?

I am looking for a soluthion without viewhelper.

Thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:07:02.160

使用`pattern`输入字段上的属性：

```
<f:form.textfield maxlength="4" name="zip" value="{zip}" additionalAttributes="{pattern: '[0-9]{4}'}"/> 
```

只允许输入正好由四位数字组成。输入是否有效可以由 CSS 伪类`:valid`和`:invalid`.

当然，这不适用于所有浏览器（是的，我在看你，IE），而且它不能帮助你提高安全性——恶意用户可以很容易地绕过这一点。使用服务器端验证来确保安全。

# c - While loop not continuing, exits after 1 iteration

> ID：16060363
> 
> 赞同：1
> 
> 时间：2013-04-17T12:42:16.180
> 
> 标签：c

Here is my code where I am trying to change one value and 3x3 matrix and then automatically changing all the elements of the matrix one by one. My problem is, `while` loop mentioned in the program should continue infinitely but it is not. It is exiting after one iteration. I've tried `gdb` but it is not showing any relevant information regarding this problem..

Code:

```
#include <signal.h>
#include <stdio.h>
#include <stdlib.h>

int matrix[3][3] = {0};
int row=0;
int col=0;
int i, j, k, l;
int seccount = 0;

char buffer[4096];
//buffer[0] = '\0';
void value_changer();
static void catch_signal(int signal)
{
    printf("*********************** Seconds : %d ******************************\n", seccount++);
    printf(buffer);
    puts("Second completes");
}

void value_changer(void)
{
    char temp[32];
    buffer[0] = '\0';
    matrix[0][0] += 1;
    for (int i = 0; i < sizeof(matrix) / sizeof(matrix[0]); i++)
    {
        for (int j = 0; j < sizeof(matrix/*[i]*/) / sizeof(matrix/*[i]*/[0]); j++)
        {
            if(i==0 && j==0)
            {
                for (int k = 0; k < sizeof(matrix) / sizeof(matrix[0]); k++)
                {
                    for (int l = 0; l < sizeof(matrix/*[k]*/) / sizeof(matrix/*[k]*/[0]); l++)
                    {

                        snprintf(temp, sizeof(temp) - 1, "%d ", matrix[k][l]);
                        strcat(buffer, temp);
                    }
                    strcat(buffer, "\n");
                }
                strcat(buffer, "\n");
            }
        }
    }
    //raise(SIGINT);
}

int main()
{
    if (signal(SIGINT, catch_signal) == SIG_ERR)
    {
        fputs("An error occurred while setting a signal handler.\n", stderr);
        return EXIT_FAILURE;
    }
    //buffer[0] = '\0';
    while(1) // I want to continue the loop infinite time.
    {
        value_changer();
        raise(SIGINT);
        sleep(1); // This is to make sure that the each output is separated by 1 second delay.
    }
    return 0;
} 
```

Without giving me any error, it exits after one iteration.

GDB shows:

```
Starting program: /home/sujal.p/signal/test

Program received signal SIGINT, Interrupt.
0x00130416 in __kernel_vsyscall ()
(gdb) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:49:06.857

这取决于 signal() 在您的系统上的工作方式。我猜在第一个 SIGINT 之后在您的平台上，默认信号操作 SIG_DFL 会恢复，这会导致程序下次终止。一种选择是每次都恢复处理程序。或者更好的选择是使用 sigaction()。

注意：您不应该从信号处理程序（或任何非可重入函数）内部调用 printf。

# google-app-engine - GAE Blobstore 的 create_upload_url() 的一些说明

> ID：16060368
> 
> 赞同：0
> 
> 时间：2013-04-17T12:42:25.743
> 
> 标签：google-app-engine, django-admin, blobstore

我正在使用 GAE Blobstore 为我的 Django 应用程序上传和提供图像。对于管理员用户，可以通过将图像包装在 Django 模型中`Image`并为此模型提供标准管理功能来进行维护：添加、更新、删除。

为了执行实际上传，我修改`change_form.html`了 Image 模型的模板并替换`{{ form_url }}`为`{{ blobstore_url}}`. `{{ blobstore_url }}`通过覆盖`render_change_form`of 来设置`ImageAdmin`。

我注意到通过调用`create_upload_url("/admin/some/url")`，我得到了 GAE Blobstore 上传工具的编码 url，函数的参数 ("/admin/some/url") 实际上是 GAE/Blobstore 在上传完成后重定向到的 url。

与问题无关，但我也注意到，在我的第一种方法中，我只是覆盖了的值，`{{ form_url }}`但这似乎不起作用，因为没有设置表单的操作；它要么被其他地方覆盖，要么被忽略。

虽然这可行，但主要缺点是这种方法需要我将“admin/some/url”实现为一个视图，从中我可以处理模型图像所需的添加或更改，这实际上是代码的重复，已经作为默认管理员支持这些功能。

`create_upload_url()`所以我的问题是，为了在上传完成后运行图像模型的验证和数据库更新的标准管理功能，正确的 url 是什么？

**编辑**

或者，在默认管理操作（例如插入或更新）完成后执行上传可能是一个更好的设计......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:16:49.013

您将表单通常发布到的管理 URL 传递到 create_upload_url()。

这样文件将上传到 Blobstore，然后表单将被重定向到正常的管理表单处理 url。

但是，除非您使用 django-nonrel，否则这不会“正常工作”。在重定向目标中，您需要将 GAE blobstore url 保存到您的模型中，这在 django 中默认不会发生。如果你想这样做，你可以考虑集成 django-nonrel 的 GAE 存储后端。

[https://github.com/dragonx/djangoappengine/blob/1.4-devappserver2/djangoappengine/storage.py](https://github.com/dragonx/djangoappengine/blob/1.4-devappserver2/djangoappengine/storage.py)

# java - REST Web 服务：同步还是异步？

> ID：16060372
> 
> 赞同：36
> 
> 时间：2013-04-17T12:42:34.927
> 
> 标签：java, rest, web-services, asynchronous, synchronization

REST Web 服务的默认行为是*同步*的还是*异步*的？
如果它是*同步*的，那么我们可以创建*异步*吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-17T12:47:44.023

“同步”或“异步”是请求资源**的客户端的行为。**它与 REST Web 服务、其结构或支持服务器无关。

同步行为：

*   客户端构造一个 HTTP 结构，通过套接字连接发送。
*   等待响应 HTTP。

异步行为：

*   客户端构建 HTTP 结构，发送请求，然后继续。
*   还有另一个线程在套接字上等待响应。一旦响应到达，就会通知原始发送者（通常使用类似回调的结构）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T14:12:44.833

@Thrustmaster 已经很好地解释了。我只是想补充一点，让它听起来更简单。

REST Web 服务只不过是一个 HTTP 调用。您向 URL 发出 HTTP 请求并返回 HTTP 响应。如何处理请求和响应取决于调用者。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T12:51:00.550

我认为这可能对您了解 Java 中的 RESTful Web 服务有很好的帮助：

*   [使用 JAX-RS 构建 RESTful Web 服务](http://docs.oracle.com/javaee/6/tutorial/doc/giepu.html)

您可以从客户端控制客户端*同步*或*异步*。一个例子 - 使用[AJAX](https://en.wikipedia.org/wiki/Ajax_(programming))。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-17T12:47:23.563

REST 服务与同步或异步无关。

客户端：客户端调用必须支持异步来实现，就像浏览器中的AJAX一样。

服务器端：多线程环境/非阻塞IO用于实现异步服务。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T12:47:46.987

是的，您可以拥有异步和同步 Web 服务。您可以使用任何框架，例如 Restlet、JAXB、JAX-RS。

# ruby-on-rails-3 - Rails 3.1.11 Assets Precompilation sprockets not working

> ID：16060374
> 
> 赞同：1
> 
> 时间：2013-04-17T12:42:37.860
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, asset-pipeline, production-environment, precompile

Rails 3.1.11 Assets Precompilation not working for images, css and js as for css and js it calls every file and increases loading time and for images it does not getting images from there compiled path.

I ran following command to precompile assets:

```
rake assets:precompile 
```

and it made assets directory under public directory of my app, and created images loading-91e9fa95ae55553f2c46cbfa9a9940de.gif like this but when I try to get these images its not loading a single image from the path. I'm using image_tag shown below

```
 <%= image_tag('theme_images/img/gemicon/edit.png') %> 
```

and its source image path is 'app_root/public/assets/theme_images/img/gemicon/edit.png'.

# wordpress - 图像不适用于 WordPress 网络的子目录安装

> ID：16060375
> 
> 赞同：0
> 
> 时间：2013-04-17T12:42:45.413
> 
> 标签：wordpress, .htaccess, mod-rewrite, redirect

我正在尝试安装 WordPress 网站网络。自 2008 年以来已经在运行的主站点（位于根目录中）。除了上传的文件之外，一切都很好。`/assets/`自从我的主站点启动以来，我已将上传文件夹更改为。所有图像在主站点上工作，但子文件夹站点的图像不工作。例如，主站点的图片 URL

`www.mysite.com/assets/2013/04/someimage.jpg`

这是完美的工作。但子文件夹站点的图像路径显示

`www.mysite.com/test/assets/sites/1/2013/04/someimage.jpg`

如果我从 URL 中删除子站点的名称（在本例中是“测试”），它就可以工作。这意味着图像已上传到

`www.mysite.com/assests/sites/1/someimage.jpg (without sub folder site's name).`

我可以通过 FTP 看到相同的内容。但是 WordPress 使用子站点的名称呈现 URL。我认为 .htaccess 重定向应该有一些错误。

以下是我的 .htaccess 文件的内容：

`# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
# uploaded files
#RewriteRule ^([_0-9a-zA-Z-]+/)?files/(.+) wp-includes/ms-files.php?file=$2 [L]
# add a trailing slash to /wp-admin
RewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule ^[_0-9a-zA-Z-]+/(wp-(content|admin|includes).*) $1 [L]
RewriteRule ^[_0-9a-zA-Z-]+/(.*\.php)$ $1 [L]
RewriteRule . index.php [L]
</IfModule>
# END WordPress`

该站点托管在 Godaddy 上，用于测试共享。在所有测试之后，实时站点将在专用服务器上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:59:34.670

真实文件如下`/assets/sites/`。要从请求中删除站点的名称，您必须捕获后一部分并重写为

```
RewriteRule ^.*?/(assets/sites/.*)$ /$1 [L] 
```

**更新**：

如果文件由 提供`wp-includes/ms-files.php`，则必须类似于

```
RewriteRule ^.*?/(assets/sites/.*)$ wp-includes/ms-files.php?file=$1 [L] 
```

# c++ - 通过引用和值返回 *this 的区别

> ID：16060379
> 
> 赞同：-3
> 
> 时间：2013-04-17T12:42:56.370
> 
> 标签：c++, pointers

后面的代码示例之间是否存在差异？

```
ClassTwo ClassTwo::getOwnOne(){
    return *this;
}

 ClassTwo& ClassTwo::getOwnTwo(){
    return *this;
} 
```

后面的代码示例之间是否存在差异？一样吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T12:44:14.677

```
ClassTwo ClassTwo::getOwnOne() 
```

这将返回调用它的对象的*副本。*

```
ClassTwo& ClassTwo::getOwnTwo() 
```

这将返回对调用它的对象的*引用。*

如果您使用结果创建一个新对象，它们都会（或多或少）做同样的事情：

```
ClassTwo c2a = c2.getOwnOne(); // New object
ClassTwo c2b = c2.getOwnTwo(); // New object too 
```

但如果您使用它们来初始化引用，则不同：

```
ClassTwo const & c2a = c2.getOwnOne(); // New object (lifetime tied to reference)
ClassTwo const & c2b = c2.getOwnTwo(); // Reference to c2

ClassTwo & c2a = c2.getOwnOne(); // ERROR
ClassTwo & c2b = c2.getOwnTwo(); // Reference to c2 
```

第三个是错误，因为您无法将可变引用绑定到临时对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T12:43:59.230

第一个复制`*this`，第二个不复制。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T12:44:23.203

他们*不*一样。第一个将隐式调用复制构造函数并返回对象的*副本*。第二个将返回对它的*引用。*

您可以通过向您的类添加一个复制构造函数来验证这一点，就像这样（一个没用的，只是为了显示一条消息）：

```
ClassTwo(const ClassTwo& in)
{
  cout << "I am the copy constructor" << endl;
} 
```

如果您调用您的`getOwnOne()`方法，它将显示该消息。习以为常`getOwnTwo()`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T12:45:06.113

第一个定义返回您正在调用 getOwnOne 的对象的副本。这意味着当您调用此方法时，您将调用类的构造函数。

第二种方法返回对您正在调用 getOwnTwo 的对象的引用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T12:47:26.180

看看[这个](https://stackoverflow.com/questions/5923702/casting-an-object-to-a-reference)。~~第二类可以有未定义的行为~~

也许因为你得到相同的输出。它让你觉得他们是一样的。

第一个返回，`current object`而第二个将返回的对象类型转换为其引用

# sql-server - SQL Server XML 操作 - 只能插入非文档节点

> ID：16060380
> 
> 赞同：2
> 
> 时间：2013-04-17T12:42:59.940
> 
> 标签：sql-server, xml

根据主题[SQL Server XML modify with no result](https://stackoverflow.com/questions/16059591/sql-server-xml-modify-with-no-result) while 在插入新节点之前我收到错误

```
XQuery [modify()]: Only non-document nodes can be inserted. Found "xs:string ?". 
```

新节点的主体：

```
<formant id="'+lower(newid())+'" name="_name" width="155" height="20" x="125" y="761"
         tabindex="0" source-name="_sn" readonly="false" required="false"
         font="_fnt"><value></value></formant> 
```

任何想法如何解决它？

```
DECLARE @newNodeData varchar(max) = <formant id="'+lower(newid())+'" name="_name" width="155" height="20" x="125" y="761"
                                    tabindex="0" source-name="_sn" readonly="false" required="false"
                                    font="_fnt"><value></value></formant> 
```

...@newNodeData 变量上的一些文本修改

然后

```
declare @xml xml;

select @xml = t.xmlData //t.xmlData is ntext type
from table t
where id=123

set @xml.modify('declare namespace xsd="http://www.cebip.pl/xml/schematy/formularze/v1.0/definicja-formularza.xsd"; insert sql:variable("@newNodeData") as first into (/xsd:form-definition/xsd:page)[1]')

update table
set xmlData = @newNodeData 
where id=123 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T13:06:59.833

如果您想进行文本修改，请在 a 上执行这些操作`varchar(max)`，然后将结果存储在最终的 XML 变量中，然后在您的`modify()`

```
DECLARE @newNodeDataTmp varchar(max) = '<formant id="'+lower(newid())+'" name="_name" width="155" height="20" x="125" y="761"
                                    tabindex="0" source-name="_sn" readonly="false" required="false"
                                    font="_fnt"><value></value></formant>'

-- Modifications

declare @newNodeData xml = cast(@newNodeDataTmp as xml) 
```

您使用的变量`modify()`需要是 XML 类型的。

# c++ - 通过 C API 提供 QWidget 的 DLL

> ID：16060384
> 
> 赞同：2
> 
> 时间：2013-04-17T12:43:22.533
> 
> 标签：c++, qt, dll

我有一个 Qt 主应用程序，它使用 C API 动态加载 DLL。我不能使用 Qt 插件，因为一些 DLL 是纯 C 语言。

现在我希望 DLL 可以使主 Qt 应用程序打开一个窗口，装饰它并添加 DLL 提供的 QWidget。

恐怕如果我只是将它作为 void* 推送并将其添加为 QWidget，则主应用程序将在窗口关闭时尝试释放它，这可能会导致未定义的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:46:36.483

主要问题是主应用程序是动态地还是静态地链接到 Qt。如果是动态的，则解决了静态数据共享的问题（因为它将主要驻留在 DLL 中）。

没有更多细节，我只会说“试试看”，看看有什么问题。

# ruby - 瘦版本与尝试安装话语的 gemfile 不匹配

> ID：16060388
> 
> 赞同：0
> 
> 时间：2013-04-17T12:43:34.437
> 
> 标签：ruby, thin, discourse

我正在尝试安装瘦版本 1.5.0 但默认情况下，当我使用 gem install thin 安装时，它会安装 1.5.1 然后我收到此错误

```
>> Writing PID to tmp/pids/thin.0.pid
>> Using rack adapter
>> Exiting!
/var/lib/gems/1.9.1/gems/bundler-1.3.5/lib/bundler/runtime.rb:33:in `block in setup': You have already activated thin 1.5.1, but your Gemfile requires thin 1.5.0\. Using bundle exec may solve this. (Gem::LoadError)
        from /var/lib/gems/1.9.1/gems/bundler-1.3.5/lib/bundler/runtime.rb:19:in `setup' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:01:17.517

也许矫枉过正，但尝试删除你的`Gemfile.lock`，改变你的瘦身版本`Gemfile`并运行`bundle install`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:50:46.850

我跑了

```
gem uninstall thin 
```

其中列出了已安装的瘦版本。我卸载了 1.5.1 来解决这个问题。

# java - Web 应用程序中的共享会话

> ID：16060390
> 
> 赞同：5
> 
> 时间：2013-04-17T12:43:41.683
> 
> 标签：java, jsp, tomcat, servlets, glassfish

我正在使用`JSP`& `Servlets`(Container: `Tomcat7`, Database: `Oracle10`)开发 Web 应用程序

我开发了一些 Web 应用程序，例如`Profile`, `Reports`, `Leads`. 然后我开发了一个`Login`应用程序。在此应用程序中，我将*USERID*与`Session`更多会话属性一起存储。

用户登录后，将显示包含指向其他应用程序的链接的菜单，例如指向`Profile`应用程序的链接。

所以当我`Session`在用户登录后访问时：

*   如果我尝试使用相同的应用程序（登录）访问会话，那么我将获得具有所有必需属性的会话
*   但是当我尝试从其他应用程序访问会话时， `Profiles`我会得到会话`null`

**检查会话的代码片段**（登录 Web 应用程序中的 Servlet 过滤器）

```
HttpSession session = request.getSession(false);
if(session==null)
{
    System.out.println("Session does not exist... Redirected to LOGIN Page.");
    response.sendRedirect("/ApplicationName/Login.jsp");
} 
```

我正在访问`Profile`应用程序中的会话以检查用户是否已登录。

然后我搜索了一下，发现`Session`出于安全原因不能从其他应用程序访问。（我也发现可以通过设置来完成`crossContext="true"`）

然后我找到了其他选项，例如制作`EAR`所有应用程序然后部署它，但不幸`EAR`的是它不受`Tomcat7`.

我是网络环境的新手，所以如果有人在此之前做过这方面的工作，请告诉我有哪些选择？

提前致谢

**更新1**

现在我决定使用`EAR`，我将在其中打包所有`WAR`文件，然后尝试在它们之间共享会话。由于Tomcat不支持`EAR`我已经安装`Oracle Glassfish`，然后我创建`Enterprise Application Project`了包含两个应用程序`1\. Login`和`2\. Profiles`，然后创建`EAR`文件，并将其部署在`Glassfish`. 所以我想在这两个应用程序之间共享会话（在 Glassfish 上），所以如果有人对此有任何想法，请告诉我。（链接到任何教程也将不胜感激）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T07:29:03.187

如上所述，您所说的要求是单点登录 (SSO)。您可以实现的最简单的 SSO 如下：

1.  认证成功后添加带有加密用户名的cookie（不需要加密密码）
2.  如果您使用用户名 cookie 访问您的任何应用程序并成功解密它，则意味着用户已通过身份验证，您不应显示登录页面。

使用 AES-256 进行加密。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T12:53:11.303

我在商店中看到的做法是将登录凭据填充到加密的 cookie 中并安装代理（java 过滤器、Web 服务器模块等，在需要用户数据的应用程序之前），这些代理将解密 cookie 并通过沿着数据到下游应用程序。如果要跨应用程序共享登录信息，请不要将登录信息存储在 HTTP 会话中。

# opengl-es - glColorMask/glDepthMask 与片段着色器

> ID：16060391
> 
> 赞同：2
> 
> 时间：2013-04-17T12:43:54.417
> 
> 标签：opengl-es, stencil-buffer

在 OpenGL ES 2.0 中，如果使用 glColorMask/glDepthMask 禁用对颜色缓冲区和深度缓冲区的写入（因为我只想更改模板缓冲区），则片段着色器无法写入任何缓冲区。我可以合理地假设在这种情况下不会执行片段着色器吗？

# php - Magento 自定义评级单选按钮

> ID：16060393
> 
> 赞同：0
> 
> 时间：2013-04-17T12:43:58.957
> 
> 标签：php, magento, collections, rating

想要反转单选按钮字段的值：

**现在magento中的默认情况：**
1星=> 6
2星=> 7
3星=> 8
4星=> 9
5星=> 10

**预期定制**：
5 星 => 10
4 星 => 9
3 星 => 8
2 星 => 7
1 星 => 6

我试图把它，`arsort`但徒劳无功。

```
Code : 
```

路径：Mage/review/Block/Form.php

```
public function getRatings()
    {
        $ratingCollection = Mage::getModel('rating/rating')
            ->getResourceCollection()
            ->addEntityFilter('product')
            ->setPositionOrder()
            ->addRatingPerStoreName(Mage::app()->getStore()->getId())
            ->setStoreFilter(Mage::app()->getStore()->getId())
            ->load()
            ->addOptionToItems();
        return $ratingCollection;
    } 
```

路径：form.phtml（模板文件代码）

```
<?php foreach ($this->getRatings() as $_rating): ?>
                        <tr>
                            <th><?php echo $this->escapeHtml($_rating->getRatingCode()) ?></th>
                        <?php foreach ($_rating->getOptions() as $_option): ?>
                            <td class="value"><input type="radio" name="ratings[<?php echo $_rating->getId() ?>]" id="<?php echo $this->escapeHtml($_rating->getRatingCode()) ?>_<?php echo $_option->getValue() ?>" value="<?php echo $_option->getId() ?>" class="radio" /></td>
                        <?php endforeach; ?>
                        </tr>
                    <?php endforeach; ?> 
```

单选按钮中的值：`value="<?php echo $_option->getId() ?>"` 即：按升序排列（默认）：11、12、13、14、15
应为：15、14、13、12、11。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-10T12:01:19.343

有一个 PHP 函数 array_reverse() 来反转评级数组。这将是您的最终结果：

```
<?php foreach ($this->getRatings() as $_rating): ?>
    <tr>
        <th><?php echo $this->escapeHtml($_rating->getRatingCode()) ?></th>
        <?php foreach (array_reverse($_rating->getOptions()) as $_option): ?>
            <td class="value"><input type="radio" name="ratings[<?php echo $_rating->getId() ?>]" id="<?php echo $this->escapeHtml($_rating->getRatingCode()) ?>_<?php echo $_option->getValue() ?>" value="<?php echo $_option->getId() ?>" class="radio" /></td>
        <?php endforeach; ?>
    </tr>
<?php endforeach; ?> 
```

我也尝试过并完成了这项工作。

# apache - 使用 HAProxy 的查询参数强制重定向到 HTTPS

> ID：16060404
> 
> 赞同：2
> 
> 时间：2013-04-17T12:44:15.347
> 
> 标签：apache, https, apache2, haproxy, url-redirection

我正在使用 HaProxy 来平衡传入请求并进行基于子域的重定向。现在我想使用查询参数强制所有传入请求使用 HTTPS。

例如：-

[http://foo.test.com/test_page?person_name=](http://foo.test.com/test_page?person_name=) "Bla"

应该被重定向到：-

[https://foo.test.com/test_page?person_name=](https://foo.test.com/test_page?person_name=) "Bla"

我知道我可以使用 Apache 进行这种重定向：-

```
 RewriteEngine On
   # This will enable the Rewrite capabilities
   RewriteCond %{HTTPS} !=on
   # This checks to make sure the connection is not already HTTPS
   #RewriteRule ^/?(.*) HTTPS_REDIRECTION_LOGIC{SERVER_NAME}/$1 [R,L] 
```

或者我可以使用监听端口 80 的 apache 进行这种重定向，并使重定向的 HA-Proxy 监听 prt 443 上的重定向请求，两者都在同一个盒子上运行？我尝试了这种方法，但每当 Apache 启动时，它都会与端口 80 和 443 绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-17T13:40:13.923

您必须使用 haproxy 版本 1.5.x（截至 2014 年 6 月，它已被宣布为稳定版）。haproxy.cfg 中的一个简单代码片段应该会为您整理好：

```
frontend http-in
        bind *:80
        redirect scheme https code 301 if !{ ssl_fc }

frontend https-in
        bind *:443
        <other configuration>
```

干杯:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-23T15:08:28.210

放入您的虚拟主机：

```
UseCanonicalName on
UseCanonicalPhysicalPort On 
```

并使用 SERVER_PORT 代替 HTTPS 示例：

```
RewriteEngine On
   # This will enable the Rewrite capabilities
   RewriteCond %{SERVER_PORT} !=443
   # This checks to make sure the connection is not already HTTPS
   #RewriteRule ^/?(.*) HTTPS_REDIRECTION_LOGIC{SERVER_NAME}/$1 [R,L] 
```

或者

您可以使用域重定向

```
 RewriteEngine on
    RewriteCond %{HTTP_HOST} ^(www.)?example.com$
    RewriteRule ^(.*)$ https://example.com/$ [R=302,L] 
```

# android - Android：应用程序中的 DayDream

> ID：16060408
> 
> 赞同：3
> 
> 时间：2013-04-17T12:44:25.513
> 
> 标签：android, dreamservice

我正在开发使用 DreamService 的应用程序。但内置选项只能在充电和对接时开始做白日梦。是否有任何解决方案可以在执行应用程序期间调用白日梦（设备处于非活动状态一段时间，例如 5 秒）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-16T14:52:07.353

*答案晚了一年，并没有解决 5 秒不活动的问题，但仍然可能有用......*

将以下***DreamNow.java***文件添加到您的项目中，并使用*DreamNow*类扩展您的 Activity。

```
导入android.app.Activity；
导入android.content.Intent；

/**
 * 要使用，请将您的活动中的“扩展活动”替换为“扩展 DreamNow”。
 *
 * 来自 Google Android 博客 Daydream 示例。
 */
公共类 DreamNow 扩展 Activity {
    @覆盖
    公共无效 onStart() {
        super.onStart();
        最终意图意图 = 新意图（意图.ACTION_MAIN）；

        尝试 {
            // Somnabulator 没有记录——可能在未来的版本中被删除...
            intent.setClassName("com.android.systemui",
                                “com.android.systemui.Somnambulator”）；
            开始活动（意图）；
            结束（）;

        } catch (Exception e) { /* 什么都不做 */ }
    }
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:09:42.307

作为`DreamService`继承`Service`它应该可以使用[startService](http://developer.android.com/reference/android/content/Context.html#startService%28android.content.Intent%29)动态启动它们。

# mysql - 来自带有 FIND_IN_SET 的两个表的 MYSQL 请求

> ID：16060409
> 
> 赞同：5
> 
> 时间：2013-04-17T12:44:27.233
> 
> 标签：mysql, count, request

我有两个表（MySQL）：

1.  table_products: // cid (text) - 逗号分隔的类别列表 // id (int11)

    ```
    id   cid
    1    1,2,3        
    2    5,21,8
    3    2,4,15 
    ```

2.  表类别

    ```
    id   name   parent        
    1    Cat1   0      
    2    Cat2   0
    3    Cat3   0
    4    Cat4   0 
    ```

这是我的要求：

```
SELECT `id`, `name`, `parent`
FROM `table_categories`
ORDER BY `parent` ASC, `id` ASC; 
```

如何执行上述请求并获取每个类别中的产品数量（来自 table_products）。可能正在使用 (FIND_IN_SET)。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-17T12:48:34.460

如果每个类别都存在于 中`table_categories`，那么您可以使用：

```
SELECT table_categories.name, count(table_products.id)
FROM
  table_categories LEFT JOIN products
  ON FIND_IN_SET(table_categories.id, products.cid)
GROUP BY table_categories.name 
```

如果 products.cid 中存在 table_categories.id，则 FIND_IN_SET 将返回一个非零值，并且连接将成功。

# sonarqube - 是否可以在 Sonar 中设置项目级规则设置（opencover）？

> ID：16060412
> 
> 赞同：0
> 
> 时间：2013-04-17T12:44:35.737
> 
> 标签：sonarqube

我最近开始使用 Sonar，我注意到的一件事是 opencover/fxcop 规则适用于在 Sonar 服务器中运行的所有项目。我想知道是否可以对给定项目应用一组规则，而对不同项目应用另一组规则？我的问题有几个原因；

1.  相同的声纳服务器将被不同的团队使用，有些是面向内部的项目，当涉及到面向内部的产品时，我们对规则几乎没有异议。另一方面，对于通用模块和面向客户，我们要遵循严格的规则集。一种选择是运行两组不同的服务器，但想知道是否有替代方案。
2.  我完全同意这样一个事实，我们应该对内部和外部有相同的代码质量标准，但是当我们推出新产品时，那些从未做过代码质量标准的人会被所有低分吓倒，我们想把它们带来以最低限度加入并增加规则检查作为用于声纳结果的组。
3.  最初我认为，我可以在项目级别对这些错误进行分类，然后它将不会在以后的运行中应用，但似乎分类只适用于该运行，所以它也无济于事。
    对此有任何建议或意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:59:46.947

Sonar 显然提供了定义几个不同的质量配置文件（= 规则集）并将特定配置文件应用于特定项目的能力。

您将在文档中找到有关质量配置文件的所有信息：http: [//docs.codehaus.org/display/SONAR/Quality+Profiles](http://docs.codehaus.org/display/SONAR/Quality+Profiles)

# java - Liferay AuthenticationProvider 令牌

> ID：16060414
> 
> 赞同：0
> 
> 时间：2013-04-17T12:44:41.820
> 
> 标签：java, ldap, liferay

我想知道是否有 Liferay 的身份验证提供程序连接到 LDAP（活动目录）的示例。

任何帮助都会很有用。

谢谢洛克什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:24:56.277

以下链接可以在这方面为您提供帮助：

[http://www.liferay.com/community/wiki/-/wiki/Main/LDAP+with+AD+in+Liferay+6.0.5](http://www.liferay.com/community/wiki/-/wiki/Main/LDAP+with+AD+in+Liferay+6.0.5)

[http://www.liferaysavvy.com/2013/02/life-ray-ldap-integration.html](http://www.liferaysavvy.com/2013/02/life-ray-ldap-integration.html)

HTH。

# javascript - 咖啡脚本中的嵌套方法

> ID：16060416
> 
> 赞同：0
> 
> 时间：2013-04-17T12:44:49.563
> 
> 标签：javascript, coffeescript

我目前正在尝试在需要嵌套方法的咖啡脚本中制作一些东西。我想要这样的东西。

```
class test
    constructor: (one, two, three) ->
        #do something with one two and three
    @method1: (one, two) ->
         #do something with vars
         @method2: (one, two, three, four) ->
            #do something with vars
            @method3:() ->
                    #do something 
```

我希望能够运行这样的方法。

```
main = new test(one, two, three)
meth1 = main.method1(four, five)
meth2 = meth1.method2(six, seven, eight, nine)
meth3 = meth2.method3() 
```

例如，我还希望能够返回值。

```
variable = new test(one, two, three).method1(four, five).something 
```

我不想要的一件事是从一个地方都可以访问不同的方法，例如，我不希望这种情况发生：

```
new test(one, two, three).method3() 
```

我不知道这是否会有所帮助，但我想要执行的操作仅与页面上的 HTML 交互。

一段时间以来，我一直在尝试各种方法来做到这一点，但到目前为止，还没有完全奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:17:41.513

这不叫*嵌套*，而是[*链接*](http://en.wikipedia.org/wiki/Method_chaining)。`test`要启用它，您必须从可链接的方法返回实例。这可以是输入实例（您对其进行了变异），也可以是从输入中复制某些属性并更改其他属性（不改变输入）的新实例。

查看[这些问题/答案](https://stackoverflow.com/questions/tagged/method-chaining+javascript)以获取实际示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:32:01.433

如果您希望能够链接您的方法，您可以返回`this`每个方法的返回值。但是，如果您只想按特定顺序访问某些方法，则可以返回`object`仅实现所需接口的 an 而不是返回`this`。

在下面的示例中，only`method1`可以在`Test`实例上访问，但调用的结果`method1`是`object`具有`method2`函数的。此外，每个返回的对象都有一个`getResult`函数，允许您检索链接函数的结果并重置`@result`为初始结果。

还有其他方法可以保留函数调用状态，例如使用[`curried`](http://ejohn.org/blog/partial-functions-in-javascript/)函数。

```
class Test
    constructor: (one, two, three) ->
        @initialResult = @result = one + two + three
        @getResult = =>
            result = @result
            @result = @initialResult
            result
    method1: (four, five) ->
        @result += four + five

        getResult: @getResult
        method2: (six, seven, eigth, nine) =>
            @result += six + seven + eigth + nine
            getResult: @getResult

t = new Test(1, 2, 3)

console.log(t.getResult())

console.log(t.method1(4, 5).method2(6, 7 ,8, 9).getResult())

console.log(t.method1(1, 2).getResult())

console.log(typeof t.method2) #undefined 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T16:20:52.910

虽然已经涵盖了方法链接，但我认为您尝试做的事情可以通过柯里化/部分应用程序来完成。如果你正在写一些更实用的东西，你基本上想要`meth1`接受一些参数和 return `meth2`，这将接受更多的参数和 return `meth3`，这将使用从 传入的所有参数来做一些事情`meth1`。

这是几篇关于柯里化/部分应用程序的博客文章。

[http://ejohn.org/blog/partial-functions-in-javascript/](http://ejohn.org/blog/partial-functions-in-javascript/)

[http://www.drdobbs.com/open-source/currying-and-partial-functions-in-javasc/231001821](http://www.drdobbs.com/open-source/currying-and-partial-functions-in-javasc/231001821)

# image - index.jpg 是否与目录中的 index.php 一样工作？

> ID：16060419
> 
> 赞同：0
> 
> 时间：2013-04-17T12:45:10.710
> 
> 标签：image, indexing

我想知道添加 /images/index.jpg 是否会以与索引页面相同的方式工作：/home/index.php

如果是这样，这意味着我可以使用更离散的图像：`<img src="/images/" alt="index image>`

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:08:04.587

如果您将使用的任何服务器软件配置为默认为该文件，则可以。例如，在 Apache 中，您将使用 mod_dir 中的[DirectoryIndex](http://httpd.apache.org/docs/current/mod/mod_dir.html)选项。

```
<IfModule dir_module>
    DirectoryIndex index.jpg index.jpeg index.png # etc..
</IfModule> 
```

不过，这确实不是一个好主意，而且只会让在不同的服务器配置上设置站点对其他人来说是一件痛苦的事情。最好在代码中保留这样的内容。

# c# - 使用 linq 使用来自两个不同模型的数据填充模型

> ID：16060420
> 
> 赞同：1
> 
> 时间：2013-04-17T12:45:11.900
> 
> 标签：c#, asp.net-mvc, linq

我已经导入了一个数据库，该数据库具有与 Subdata 一对多关系的集合 MainData，生成的代码看起来像这样；

```
 public DbSet<MainData> MainDatas{ get; set; }

 public partial class MainData
    {            
        public string NameOfMainData{ get; set; }           
        public virtual ICollection<SubData> SubDataSet{ get; set; }
    } 
```

SubData 只是有一些不复杂的数据类型，如字符串和整数。

我可以将数据导入视图，因此我知道该部分有效。我想将它合并到一个模型中，以便我在同一模型中拥有“NameOfMainData”和 SubData 的集合，以便在视图中轻松访问，但我没有让它工作，这是我的尝试；

模型;

```
public class DataIWantInAList
{
    public IList<DataIWant> DataList { get; set; }

}
public class DataIWant
{
    public string NameOfMainData{ get; set; }
    public IEnumerable<SubData> SubDataSet{ get; set; }
} 
```

在控制器中，我认为我可以在 DataList 中添加项目，但我没有设法在互联网上找到任何东西或为我自己解决......

```
var DataToView= from p in db.MainData
                        select new DataIWant()
                        {
                            NameOfMainData= p.NameOfMainData,
                            SubDataSet= p.SubDataSet
                        };

return View(DataToView); 
```

不要按预期工作。我在 LINQ 方面不太好，但感觉这很容易，当我不让它工作时，这让我很沮丧。

任何输入都适用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:53:57.757

**免责声明**
- 数据获取是在您使用 EntityFramework 的假设下进行的，因为我不是 LINQ 中最适合的 :( 请随时调整它
- 这只是众多方法之一。当您将模型提供给视图
- 参数应该是“过滤器”的基本占位符
- 您可以以任何您喜欢的方式扩展映射，只需确保在视图中正确引用，否则您将遇到运行时错误

在模型中，您可以执行类似的操作（即使我会将实体获取移至私有函数。在您的类 DataIWant 中，您只需指定所需的数据。如果您想专门映射，那么在启动您的`DataIWantInAList`

```
public class DataIWantInAList
{
    public IList<DataIWant> data;

    //Instanciation & Initialization
    public DataIWantInAList(params customparam)
    {
        using(EntitySet ent = new EntitySet())
        {
        //fetch data from DB
        this.data = (from x in ent.DataTableIWant where param == customparam select x).ToList();
        }
   }
} 
```

在你的控制器中你可能想去：

```
public ActionResult fooBar()
{ 
  DataIWantInAList model = new DataIWantInAList(params);
  return View(model);
} 
```

虽然您可以通过以下方式获取视图中的数据：

```
var List = model.data; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:52:53.423

假设我理解您的问题，您可以使用 .Include(...) 来获取您想要的数据。

```
var DataToView = from p in db.MainData
                        select new DataIWant()
                        {
                            NameOfMainData= p.NameOfMainData.Include(p => p.SubDataSet)
                        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:54:52.653

您可以使用`Include`加载相关实体，然后将它们映射到您的模型类型：

```
var DataToView= from p in db.MainData
                            .Include("ItemTypeReference")
                        select new DataIWant()
                        {
                            NameOfMainData= p.NameOfMainData,
                            SubDataSet= p.SubDataSet
                                         .Select(s => new SubData {
                                                      // map SubData fields here
                                                      })
                                         .ToList()
                        }; 
```

# php - 为什么这行代码中的这个零

> ID：16060421
> 
> 赞同：1
> 
> 时间：2013-04-17T12:45:15.580
> 
> 标签：php, mysql

我在教程中找到了一个参考，这个 0 返回第一行但我“不明白”如果有超过 1 行，例如下面的函数怎么办？（即：我有一个包含 200 个用户的表，而“UsersName”这一列只是其他 10 个用户中的一个，那么为什么是零？）

有人可以说明为什么这个 0 在这行代码中吗？

谢谢

```
function member_count() {
    return mysql_result(mysql_query("SELECT COUNT(`UsersName`) FROM `users` WHERE `Active` = 1"), 0);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T12:47:50.360

你不能查一下 PHP 文档吗？是比较好的...

```
string mysql_result ( resource $result , int $row [, mixed $field = 0 ] ) 
```

> 排
> 
> 正在检索的结果中的行号。行号从 0 开始。

[http://php.net/manual/en/function.mysql-result.php](http://php.net/manual/en/function.mysql-result.php)

想象一下你做了一个`SELECT * FROM users`，其中表包含

```
name  | age
David | 29
John  | 18
Paul  | 26 
```

第 0 行是“David - 29”，第 1 行是“John - 18”，依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:48:01.410

看这个页面

[http://php.net/manual/en/function.mysql-result.php](http://php.net/manual/en/function.mysql-result.php)

```
mysql_result ( resource $result , int $row [, mixed $field = 0 ] ) 
```

从 MySQL 结果集中检索一个单元格的内容。

在处理大型结果集时，您应该考虑使用获取整行的函数之一（在下面指定）。由于这些函数在一个函数调用中返回多个单元格的内容，因此它们比 mysql_result() 快得多。另外，请注意，为 field 参数指定数字偏移量比指定 fieldname 或 tablename.fieldname 参数要快得多。

结果

```
The result resource that is being evaluated. This result comes from a call to `mysql_query().` 
```

排

```
The row number from the result that's being retrieved. Row numbers start at 0. 
```

场地

```
The name or offset of the field being retrieved.

It can be the field's offset, the field's name, or the field's table dot field name (tablename.fieldname). If the column name has been aliased ('select foo as bar from...'), use the alias instead of the column name. If undefined, the first field is retrieved. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:48:04.403

对，它返回第一行。您发布的查询也返回一行。阅读 MySQL 中的函数 COUNT()。

您也可以出于多种原因使用它，即如果第一行也是 users 表中的管理员用户并且您只需要它，无论自动增量 ID 或用户名/密码等是什么。

# sony - 手表处于“待机”状态时，SmartWatch Extension 不显示任何内容

> ID：16060423
> 
> 赞同：0
> 
> 时间：2013-04-17T12:45:17.833
> 
> 标签：sony, sony-smartwatch

我为 Sony 的 SmartWatch 编写了一个控制扩展。我想通过发送一个`CONTROL_START_REQUEST_INTENT`. 当手表处于“活动状态”时，这可以正常工作，例如显示钟面或我的分机。如果手表没有连接到充电器，它最终会暂停我的扩展，即使我用它来明确控制屏幕状态。

发送一个`CONTROL_START_REQUEST_INTENT`将导致`onResume()`被调用，但手表的显示不会改变。扩展的`onTouch()`方法也被调用用于触摸事件，所以我相当确定扩展处于其“正常”工作状态。如何让手表显示我的分机？

更新：我找到了这个问题的“解决方案”，但我无法想象这是正确的方法。在我的`onResume()`方法结束时，我放置了另一个`startRequest()`. 我发现这是通过在扩展暂停后手动发送启动请求来实现的。我无法理解为什么它会这样工作，这就是为什么我宁愿不接受它作为答案。

UPDATE2：结果我的解决方案并不像我预期的那样好。在第二个`startRequest()`出现之后，AHA 才开始第二个控制扩展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:23:31.140

抱歉，我无法重现您的问题。1）当手表处于非活动状态时发送 START_REQUEST 仍然会启动扩展并将其置于前台。并且 2)，当将屏幕状态设置为例如 SCREEN_STATE_ON 时，会将扩展留在前台。

你能更具体一点吗 - 例如

> 它最终会暂停我的扩展

您的扩展程序在前台运行多长时间？

您确定您正在控制屏幕状态，即将状态设置为例如 SCREEN_STATE_ON？SCREEN_STATE_AUTO 不会给你你需要的东西。

还有更多关于在[此处](https://stackoverflow.com/questions/10971674/how-should-i-do-to-start-smartwatch-extension-from-the-program-code/10975125#10975125)正确发送 START_REQUEST 的信息。

# python - 如何在 python 中使用“While()”

> ID：16060425
> 
> 赞同：-5
> 
> 时间：2013-04-17T12:45:22.007
> 
> 标签：python, regex, python-2.7, python-2.x

嗨，我下面的所有代码都允许我从数据中提取一些特定信息，我希望有人可以帮助我通过使用一段时间来更正确地编写这个，所以我可以对很多行执行此操作，现在我只有两行（数据）我我是初学者，所以如果有人可以帮忙请解释一下，这样我就可以学习，而不仅仅是复制和粘贴 =)

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import re 

tableau = []

data = "00:02:12.935 mta         Messages       I Doc O:NVS:FAXG3/ R:NVS:SMTP.0/xxxx@x.fr mid:6499"

result1 = {}
i = re.findall(r"^.[^\ ]*", data ) 
j = re.findall(r"\d+$", data ) 
k = re.findall(r"O:[^\ ]*", data ) 
r = re.findall(r"R:[^\ ]*", data )

result1 = {'Heure':i,'MID':j,'Source':k,'Destination':r} 

data = "00:03:12.935 mta         Messages       I Doc O:NVS:FAXG3/ R:NVS:SMTP.0/xxxxx@xxxxx.fr mid:6599"

result2 = {}
i = re.findall(r"^.[^\ ]*", data ) 
j = re.findall(r"\d+$", data ) 
k = re.findall(r"O:[^\ ]*", data ) 
r = re.findall(r"R:[^\ ]*", data )

result2 = {'Heure':i,'MID':j,'Source':k,'Destination':r} 

tableau.append(result1)
tableau.append(result2)

print tableau 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T12:49:04.107

这实际上用[`for`循环](http://docs.python.org/2/tutorial/controlflow.html#for-statements)做得更好：

```
data1 = "00:02:12.935 mta         Messages       I Doc O:NVS:FAXG3/ R:NVS:SMTP.0/xxxx@x.fr mid:6499"
data2 = "00:03:12.935 mta         Messages       I Doc O:NVS:FAXG3/ R:NVS:SMTP.0/xxxxx@xxxxx.fr mid:6599"
data_list = [ data1, data2 ] #store the data in a list so we can iterate over it
tableau = [] #create a list to hold our output
for data in data_list:  #iterate over the list, getting 1 "data" at a time
    #extract info we want
    i = re.findall(r"^.[^\ ]*", data ) 
    j = re.findall(r"\d+$", data ) 
    k = re.findall(r"O:[^\ ]*", data ) 
    r = re.findall(r"R:[^\ ]*", data )

    #create dictionary and append it to tableau
    tableau.append({'Heure':i,'MID':j,'Source':k,'Destination':r}) 
```

更高级的用户可能会在这里使用一个函数，它将字符串作为输入并返回所需数据的字典：

```
def extract(data):
    i = re.findall(r"^.[^\ ]*", data ) 
    j = re.findall(r"\d+$", data ) 
    k = re.findall(r"O:[^\ ]*", data ) 
    r = re.findall(r"R:[^\ ]*", data )
    return {'Heure':i,'MID':j,'Source':k,'Destination':r} 
```

现在您可以在[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)中使用它：

```
tableau = [extract(data) for data in data_list] 
```

从评论中，您似乎正在从文件中获取数据行。那更好（谁想输入所有这些字符串？）。现在我们可以将其缩短为：

```
with open('filename') as fin:
    tableau = [extract(data) for data in fin] 
```

using`with`引入了另一个 python 结构——（上下文管理器）。这有点复杂，但它是打开文件的首选方式。对于文件对象，它在功能上等同于：

```
fin = open('filename')
tableau = ...
fin.close() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T12:57:04.283

这里。这会以一种更有效的方法解析您的数据，它使用一个函数，您也可以只提供数据列表。如果你想把它变成一个发电机，这也很容易。

```
import re

def parser(data):
    result = []
    for p in data:
        ms = re.match(r'(\S+).*?(O:\S+).*(R:\S+).*mid:(\d+)', p)
        if not ms:
            continue
        result.append({'Heure':ms.group(1), 'Source':ms.group(2), 'Destination':ms.group(3), 'MID':ms.group(4)})
    return result

data = ["00:02:12.935 mta         Messages       I Doc O:NVS:FAXG3/ R:NVS:SMTP.0/xxxx@x.fr mid:6499",
        "00:03:12.935 mta         Messages       I Doc O:NVS:FAXG3/ R:NVS:SMTP.0/xxxxx@xxxxx.fr mid:6599"]

print parser(data) 
```

结果：

```
>>> 
[{'Source': 'O:NVS:FAXG3/', 'Destination': 'R:NVS:SMTP.0/xxxx@x.fr', 'Heure': '00:02:12.935', 'MID': '6499'},
{'Source': 'O:NVS:FAXG3/', 'Destination': 'R:NVS:SMTP.0/xxxxx@xxxxx.fr', 'Heure': '00:03:12.935', 'MID': '6599'}] 
```

* * *

作为生成器：

```
import re

def parser(data):
    for p in data:
        ms = re.match(r'(\S+).*?(O:\S+).*(R:\S+).*mid:(\d+)', p)
        if not ms:
            continue
        yield {'Heure':ms.group(1), 'Source':ms.group(2), 'Destination':ms.group(3), 'MID':ms.group(4)}       

data = ["00:02:12.935 mta         Messages       I Doc O:NVS:FAXG3/ R:NVS:SMTP.0/xxxx@x.fr mid:6499",
        "00:03:12.935 mta         Messages       I Doc O:NVS:FAXG3/ R:NVS:SMTP.0/xxxxx@xxxxx.fr mid:6599"]

for r in parser(data):
    print r 
```

结果：

```
>>> 
{'Source': 'O:NVS:FAXG3/', 'Destination': 'R:NVS:SMTP.0/xxxx@x.fr', 'Heure': '00:02:12.935', 'MID': '6499'}
{'Source': 'O:NVS:FAXG3/', 'Destination': 'R:NVS:SMTP.0/xxxxx@xxxxx.fr', 'Heure': '00:03:12.935', 'MID': '6599'} 
```

* * *

在我的正则表达式中使用[@mgilsons](https://stackoverflow.com/users/748858/mgilson) [回答](https://stackoverflow.com/a/16060507/1561176)想法：

```
def extract(data):
    ms = re.match(r'(\S+).*?(O:\S+).*(R:\S+).*mid:(\d+)', data)
    if not ms:
        raise Exception('Could not extract data')
    return {'Heure':ms.group(1), 'Source':ms.group(2), 'Destination':ms.group(3), 'MID':ms.group(4)}

tableau = [extract(data) for data in data_list] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:51:35.093

我不认为 while 是做你所期望的最好的方法。也许你可以使用

```
for data in dataArray: 
```

dataArray 包含您的数据字符串的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T15:17:48.667

感谢 Wooble 启发了这个`While`功能和示例。这个想法让我思考如何去做。

```
>>> def While(function, *args, **kwargs):
    while function(*args, **kwargs): pass

>>> def unstack(array):
    print(array.pop())
    return array

>>> While(unstack, ['world!', 'there', 'Hello'])
Hello
there
world!

>>> def fib(state):
    state.append(sum(state))
    print(state.pop(0))
    return state[0] < 1000

>>> While(fib, [0, 1])
0
1
1
2
3
5
8
13
21
34
55
89
144
233
377
610
987
>>> 
```

生成器也相当不错，所以`WhileGenerator`也创建了一个来满足我的好奇心。

```
>>> def WhileGenerator(function, *args, **kwargs):
    iterator = iter(function(*args, **kwargs))
    while next(iterator):
        yield next(iterator)

>>> import operator, functools, itertools
>>> for value in WhileGenerator(lambda a, b: functools.reduce(operator.add,
        itertools.zip_longest(a, b)),
        (True, True, True, False),
        'Hello there world!'.split()):
    print(value)

Hello
there
world!
>>> def fib_gen(state, limit):
    while True:
        yield state[0] < limit
        state.append(sum(state))
        yield state.pop(0)

>>> for value in WhileGenerator(fib_gen, [0, 1], 1000):
    print(value)

0
1
1
2
3
5
8
13
21
34
55
89
144
233
377
610
987
>>> 
```

# javascript - 将 JavaScript 对象更改为更数字化

> ID：16060431
> 
> 赞同：0
> 
> 时间：2013-04-17T12:45:47.740
> 
> 标签：javascript

我想改变这个 JS 对象。我目前有：

```
for(var i = 0; i < destination_categories_selected.length; i++)
 {
  destination_categories_obj[i] = { 
                                   "category" : $(destination_categories_selected[i]).data("dkDropdownValue")
                                  }
 } 
```

哪些输出和对象看起来像

```
[0] => "category" : 1,
[1] => "category" : 2,
[2] => "category" : 3 
```

我可以这样做，以便将类别完全删除为：

```
[0] => 1,
[1] => 2,
[2] => 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:48:34.947

如果我正确理解了您的问题，那么只需将值直接分配给有`destination_categories_obj`问题的元素，而不是为其分配对象：

```
for(var i = 0; i < destination_categories_selected.length; i++) {
    destination_categories_obj[i] = $(destination_categories_selected[i]).data("dkDropdownValue");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:48:56.777

```
 for(var i = 0; i < destination_categories_selected.length; i++)
 {
  destination_categories_obj[i] = 
       $(destination_categories_selected[i]).data("dkDropdownValue");

 } 
```

# delphi - 如果关注另一行，TcxGrid 自动发布？

> ID：16060435
> 
> 赞同：1
> 
> 时间：2013-04-17T12:45:51.730
> 
> 标签：delphi, grid, devexpress

我正在使用 Delphi 的 devexpress 组件。我遇到了一个烦人的问题，如果我插入一个新行然后不小心点击了不同的行，网格似乎调用了 postdata。

我不确定 TcxGrid 是否正在这样做，但我想知道是否可以设置一个属性来防止这种情况发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:01:41.143

就这不是网格的问题，而是数据集的问题而言，干预的唯一方法是阻止您必须定义的条件的帖子。

```
procedure TForm.aDatasetBeforePost(DataSet: TDataSet);
begin
   if YourConditionForInvaliddata then
     begin
       Dataset.Cancel;
       Abort;
     end;
end; 
```

# sql - 为什么以及何时在 UPDATE 语句中使用 CROSS JOIN 而不是 INNER JOIN？

> ID：16060437
> 
> 赞同：3
> 
> 时间：2013-04-17T12:46:03.150
> 
> 标签：sql, sql-server, tsql

在 T-Sql 中编码自三个多月以来，我第一次看到在某些代码`CROSS JOIN`中的`UPDATE`语句中使用 a 并且我无法弄清楚这种构造的用例。

有人知道吗？

编辑：这是一个我还不能很好理解的示例代码。

```
UPDATE a
SET a.COL1 = b.COL1
FROM Table1 AS a
CROSS JOIN Table2 AS b 
```

代码中还有其他更新提供了`WHERE`如下子句：

```
UPDATE a
SET a.COL1 = b.COL1
FROM Table1 AS a
CROSS JOIN Table2 AS b
WHERE condition_on_columns_from_a_and_from_b 
```

关键是对于 Table1 的每一行，带有过滤的交叉连接上的选择返回多行。

我对这种行为的理解有点困惑。

PS：表 Table1 占用超过 5 GB 的空间..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:45:45.057

我没有充分的理由可以想象这样做。查询要么写错了，要么只是为了减慢系统速度或使目标表的数据无效（或者只是为了看看它做了什么）。

它可能会将 Table1 中每一行的 COL1 设置为与 Table2 的 COL1 相同的单个随机值（尽管可能是第一个或最后一个这样的值）。但是这样做会*非常*低效（除非 SQL Server 更高版本中的优化器已经优化了这种无用的情况，否则我自己已经很多年没有测试过了）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:00:17.003

交叉连接生成两个表的笛卡尔积。这意味着它将表 A 的每一行与表 B 的每一行组合在一起。当表 A 有 n 行而表 B 有 m 行时，结果集有 n*m 行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:56:53.803

要了解用例，您需要查看数据。如果我是肯定的，我可以很容易地看到使用第一次更新 tableb 将始终并且只包含一条记录。对于一条记录没有要连接到表 A 上的字段的情况尤其如此。在这种情况下，您将使用表 b 中该字段的值更新表 a 中的所有字段。通常这种更新所有记录的事情只会用于重置值。

要查看将更新的内容，请执行以下操作：

```
UPDATE a
SET a.COL1 = b.COL1
--select a.COL1,b.COL1, *
FROM Table1 AS a
CROSS JOIN Table2 AS b
WHERE condition_on_columns_from_a_and_from_b 
```

现在您可以只运行 select 部分来查看 a.col1 将被替换为什么值，并查看表中的其他字段以查看连接是否正确以及 where clasue 是否正确。这将帮助您了解 corss join 的作用。然后，您可以暂时将交叉连接替换为左连接和内连接，以了解它与其他类型的连接不同的行为。玩一会儿选择，直到你真正理解发生了什么。我从来没有在评论中没有选择的情况下编写更新，因此我可以确保在将代码移动到 prod 之前我正在更新我认为应该是的内容。如果您像我一样编写复杂的更新，这可能涉及十或十五个连接和几个 where 条件，则尤其如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T06:16:35.513

好的，使用此查询：

```
UPDATE a
SET COL1 = b.COL1
FROM Table1 AS a
CROSS JOIN Table2 AS b
WHERE condition_on_columns_from_a_and_from_b 
```

如果我们取由`a CROSS JOIN b`（在考虑`FROM`子句之前）形成的集合，那么我们有一个笛卡尔积，其中来自`a`的每一行都与来自的每一行配对`b`。

如果我们现在考虑该`WHERE`子句——*除非*该`WHERE`子句足以保证其中的每一行`a`只表示一次，否则我们将得到一个不确定的结果。也就是说，如果集合中有两行都来自同一行`a`（但来自不同的行`b`），则无法确定这两行中的哪一行将用于计算`SET a.COL1 = b.COL1`分配.

如果我们有以下情况，我认为它甚至不能保证：

```
UPDATE a
SET COL1 = b.COL1, COL2 = b.COL2
FROM --As before 
```

同一行将用于这两个任务*。*`b`

以上所有对于使用 T-SQL子句扩展的*任何* 语句都是正确的- 除非您小心地约束您的连接条件，否则同一行的多个分配是可能的。但是，a just 似乎使它更有可能发生。如果发生这种情况，SQL Server 不会发出*任何*诊断消息。`UPDATE``FROM``CROSS JOIN`

# javascript - 外部调用 jQuery 扩展函数

> ID：16060441
> 
> 赞同：5
> 
> 时间：2013-04-17T12:46:24.890
> 
> 标签：javascript, jquery

我有一个用于比较 2 个图像的 jQuery 扩展。我使用以下方法将其称为“控制图像”：

```
currentCompare = jQuery('#controlImage').imageZoomCompare({
    ...options....
}) 
```

扩展的工作方式完全符合我的预期。扩展内部是一个名为 magnifyImage 的函数。我想为查看鼠标上没有滚轮的工具的人添加一个滑块。所以，我有以下 HTML5 滑块代码：

```
<input type="range" id="imageZoomLevel" name="imageZoomLevel" min="2" max="10" value="2" onchange="javascript:switchZoom(this.value)" /> 
```

目标是当用户移动滑块时，“#controlImage”上主动选择的 imageZoomCompare 内的 magnifyImage 函数将相应地增加和减少。我不明白如何通过文档实现这一点，并希望朝着正确的方向轻推。

小提琴：http: [//jsfiddle.net/d3xt3r/YeP4Y/](http://jsfiddle.net/d3xt3r/YeP4Y/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:24:17.147

我已经实现了滑块的目标：

jsFiddle：http: [//jsfiddle.net/YeP4Y/5/](http://jsfiddle.net/YeP4Y/5/)

**第 230 行：**

```
magnifyexternal: function($tracker, newpower, zoomRange)
{
    var specs=$tracker.data('specs')
    //alert(JSON.stringify(specs));
    var magnifier=specs.magnifier, od=specs.imagesize, power=specs.curpower
    var magnifier2=specs.magnifier2, od=specs.imagesize, power=specs.curpower
    var nd=[od.w*newpower, od.h*newpower] //calculate dimensions of new enlarged image within magnifier
    magnifier.$image.css({width:nd[0], height:nd[1]});
    magnifier2.$image.css({width:nd[0], height:nd[1]});
    //alert(JSON.stringify({width:nd[0], height:nd[1]}));
    specs.curpower=newpower //set current power to new power after magnification
    specs.$statusdiv.html('Current Zoom: '+specs.curpower);

    jQuery("input:radio[name=radioZoomLevel][value="+newpower+"]").attr('checked', true);

    this.showstatusdiv(specs, 0, 500);
    $tracker.trigger('mousemove');
}, 
```

**第 402 行附近：**

```
$("#imageZoomLevel").bind('change', function(){
fiz.magnifyexternal($tracker,$(this).val(), setting.zoomRange)
}); 
```

这不完全是您想要的（因为它没有在外部绑定，仅在内部绑定）但它可以工作。

此外，为了使其在外部工作，我会执行以下操作：

*   找到一种方法来获取插件的实例（例如，通过调用 $('selector').imageZoomCompare('get')
*   在这个实例上调用 magnifyexternal() 方法

# sqlite - Windows 运行时的 SQLite 返回“只读”错误 SQLiteException 对象

> ID：16060446
> 
> 赞同：5
> 
> 时间：2013-04-17T12:46:38.100
> 
> 标签：sqlite, windows-runtime

在我的 SQLite 数据库中插入新记录时，用于 Windows 运行时的 SQLite 返回“只读”错误 SQLiteException 对象。

我不确定是什么原因造成的，但这个“ReadOnly”错误就是我得到的 ![在此处输入图像描述](https://i.stack.imgur.com/rLAYQ.png)

我尝试更新数据库安全性，甚至蹩脚地添加了“每个人”以确保但我仍然收到该错误。知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T19:47:44.387

应用程序文件无法更改，因此您会看到“只读”错误。将文件复制到 LocalFolder 是正确的，应用程序将具有完全的读写访问权限。

如果您最初需要使用数据填充数据库，您可以在将文件添加到 Visual Studio 中的项目之前或在数据库位于 LocalFolder 之后执行此操作。

# php - 检查一个句子是否只包含php中的字母

> ID：16060462
> 
> 赞同：0
> 
> 时间：2013-04-17T12:47:26.383
> 
> 标签：php

我有一句话

> 例如：您好，我是 php 新手。

我想检查包括空格在内的整个句子是否是字母。`ctype_alpha`到目前为止，我已经尝试过使用`regex - preg_match("/^[a-z]+$/i",$val)`但没有为我工作。

有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:50:23.667

你必须在你的正则表达式中至少允许空格

```
preg_match("/^[a-z ]+$/i",$val) 
```

# javascript - 在提交中使用 javascript 和 ajax 调用创建表单

> ID：16060464
> 
> 赞同：0
> 
> 时间：2013-04-17T12:47:31.493
> 
> 标签：javascript

我的ajax调用有一个小问题，我会解释：

我有一个页面（article.php），其中有一个按日期和公司查找项目，我调用了一个 ajax 页面“action / SearchArticle.php”，它返回了我的结果，我在我的页面文章上发布了海报.php。

在结果中，我修改了一个按钮，当我单击时，我在带有要更改的列的 Javascript 弹出窗口中创建另一个按钮，并且存在我的问题：我希望在此弹出窗口中单击提交时对 PHP 页面进行 ajax 调用修改部分，但它不起作用。

我是这样做的

```
$(document).ready(function () {
    $('#result #modifier').click(function () {
        // récuperer le id article
        var popINC = $(this).attr('rel');
        // récuperer commentaire article
        var popComment = $("#result #comment" + popINC).text();
        //créer le commentaire
        var comment = '<label for="comment">Commentaire</label><input type="text" id ="comment" name="comment" value="' + popComment + '"/>';
        //créer une checkbox pour id_article
        var inpInc = "<input type='checkbox' id='flag' name='flag[]' value='" + popINC + "'>" + popINC;
        //construire le formulaire avec le id_article et commentaire
        var contenu = '<form action="" method="post" id="changeFlag"><ul><li>' + inpInc + '</li><li>' + comment + '</li><button type="submit">Chercher</button></ul></form>';
        // Afficher popup
        $('#' + popID).html(contenu).fadeIn().css({
            'width': Number(popWidth)
        });
        var popMargTop = ($('#' + popID).height() + 80) / 2;
        var popMargLeft = ($('#' + popID).width() + 80) / 2;
        $('#' + popID).css({
            'margin-top': -popMargTop,
            'margin-left': -popMargLeft
        });
        $('body').append('<div id="fade"></div>'); //Ajout du fond opaque noir
        //Apparition du fond - .css({'filter' : 'alpha(opacity=80)'}) pour corriger les bogues de IE
        // Cacher la page HTML
        $('#fade').css({
            'filter': 'alpha(opacity=80)'
        }).fadeIn();
        return false;
    });
    $('a.close, #fade').live('click', function () { //Au clic sur le bouton ou sur le calque...
        $('#fade , .popup_block').fadeOut(function () {
            $('#fade, a.close').remove(); //...ils disparaissent ensemble
        });
        return false;
    });
    // Quand je clique sur mon formulaire modifier article crée dans la 1er partie
    $("#changeFlag").submit(function () {
        var dataString = $(this).serialize();
        $.ajax({
            type: "POST",
            url: "../action/test.php",
            dataType: 'html',
            data: dataString,
            success: function (response) {
                if (response) {
                    alert('dede');
                } else {
                    $("#result").text("Errodr");
                }
            }
        });
        return false;
    });
 }); 
```

结果：当我点击提交时弹出页面刷新然后我什么都没有！

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:03:22.387

问题是，提交事件处理程序是在`changeFlag`创建表单之前注册的。因此，您需要更改提交事件注册以使用事件委托模型。

如果使用 jquery < 1.7 使用[.live()](http://api.jquery.com/live/)

```
$("#changeFlag").live('submit', function () {
    var dataString = $(this).serialize();
    $.ajax({
        type: "POST",
        url: "../action/test.php",
        dataType: 'html',
        data: dataString,
        success: function (response) {
            if (response) {
                alert('dede');
            } else {
                $("#result").text("Errodr");
            }
        }
    });
    return false;
}); 
```

如果 jQuery >= 1.7 使用[.on()](http://api.jquery.com/on/)

```
$(document).on('submit', '#changeFlag', function() {
    var dataString = $(this).serialize();
    $.ajax({
                type : "POST",
                url : "../action/test.php",
                dataType : 'html',
                data : dataString,
                success : function(response) {
                    if (response) {
                        alert('dede');
                    } else {
                        $("#result").text("Errodr");
                    }
                }
            });
    return false;
}); 
```

# facebook-graph-api - Facebook api 好友列表

> ID：16060479
> 
> 赞同：1
> 
> 时间：2013-04-17T12:48:05.750
> 
> 标签：facebook-graph-api, facebook-javascript-sdk, runtime-error, client-side, friend

我正在使用 Facebook 的 javascript SDK 来检查在我的应用程序中注册的用户的好友列表。

我有这个电话：

```
 FB.getLoginStatus(function (response) {
        if (response.status == 'connected') {     
           FB.api('me/friends', { fields: 'id, first_name, picture', limit: 6 },function(response){
                  MY CODE TO VIEW FRIENDS PICTURE
           });
        }
        else{
                 CODE TO GET ACCESS_TOKEN
        }
  }); 
```

但在大多数情况下，我会收到这样的 api 错误：

```
response.error = {
message: unkown error,
code: undefined,
type: http,
subcode: undefined
} 
```

我用我的帐户对其进行了测试，它运行良好，即使我将隐私权限更改为朋友的共享。

我的代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:38:12.847

```
FB.api('me/friends', { fields: 'id, first_name,picture', limit: 6 },function(response){

    console.log(response);

  }); 
```

有关更多详细信息，请使用 Facebook 的图形 API 探索：[Facebook Graph aAPI](https://developers.facebook.com/tools/explorer?method=GET&path=me/friends?fields=id,first_name&limit=6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:59:56.583

为什么不使用 FB.api 的 fql 查询？它提供了很好的控制。

以下 FQL 返回（使用该应用程序的朋友的用户 ID、名字和图片）

```
FB.api(
         {
           method: 'fql.query',
           query: 'SELECT uid,first_name,pic FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) and is_app_user limit 6',
           access_token: token
         } 
```

注意：你最好使用这个条件

```
if (response && response.authResponse) { 
```

代替：

```
if (response.status == 'connected') { 
```

问候，

# java - 树节点上的 JPA 并发更新导致事务死锁

> ID：16060481
> 
> 赞同：0
> 
> 时间：2013-04-17T12:48:07.833
> 
> 标签：java, spring, hibernate, jpa, tree

我支持一个真实世界的 Java 应用程序（Web 服务），它为它的客户提供某种文件系统。单个文件系统树的所有元数据都保存在数据库中。现在，当给定树上发生*“太多”*并发更新时，由于隐式行级写锁，底层数据库事务会陷入死锁情况。

我交叉阅读了[Joe Celko 的 Trees and Hierarchies in SQL for Smarties](http://amzn.com/0123877334)，给定实体模型的结果是如何在 SQL 中表示树的最简单情况，称为**邻接表**。尽管我很喜欢 Celko 先生的嵌套集合模式，但我担心这在 JPA 中实现起来并不容易，即便如此频繁的插入也会导致大量的数据重组开销。

使用的数据库是 MySQL，使用的库包括 Spring-Data-JPA 和 Hibernate 4.1.7。

由于原始代码非常复杂，我提取了一个最小的测试用例。看看下面。

这是表示树节点的实体：

```
@Entity
public class Node extends AbstractPersistable<Integer> {

    private static final Logger logger = LoggerFactory.getLogger(Node.class);

    @ManyToOne
    private Node parent;

    @OneToMany(mappedBy = "parent", cascade = CascadeType.ALL, orphanRemoval = true)
    private Set<Node> children = new LinkedHashSet<Node>();

    @Column(nullable = false)
    @Type(type = "org.jadira.usertype.dateandtime.joda.PersistentInstantAsMillisLong")
    private Instant timeStamp = Instant.now();

    @Version
    private Long version;

    public Node addChild(Node child) {
        child.setParent(this);
        children.add(child);
        touch();
        return this;
    }

    public void touch() {
        doTouch(Instant.now());
    }

    private void doTouch(Instant time) {
        logger.info("touching {} to {}", this, time);
        this.timeStamp = time;
        if (parent != null) {
            parent.doTouch(time);
        }
    }
} 
```

这是我在树上模拟并发更新的测试用例：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes = SpringConfig.class)
public class NodeServiceIntegrationTest {

    @Inject
    private NodeRepository repository;

    @Inject
    private NodeService service;

    private Random random;

    @Before
    public void setUp() throws Exception {
        this.random = new Random();
    }

    @Test
    public void testRecursiveUpdate() throws Exception {
        int depth = random.nextInt(10) + 1;
        Node root = new Node();
        final Node leaf = createHierarchy(root, depth);
        root = repository.save(root);

        int threadCount = 50;
        Callable<Node> addChild = new Callable<Node>() {
            @Override
            public Node call() throws Exception {
                return service.addChild(leaf.getId(), new Node());
            }
        };
        List<Callable<Node>> tasks = Collections.nCopies(threadCount, addChild);
        ExecutorService executorService = Executors.newFixedThreadPool(threadCount);
        List<Future<Node>> futures = executorService.invokeAll(tasks);
        List<Node> resultList = new ArrayList<Node>(futures.size());
        for (Future<Node> future : futures) {
            resultList.add(future.get());
        }
        // todo assert something... ;)
    }

    private Node createHierarchy(Node root, int depth) {
        int count = random.nextInt(20) + 1;
        for (int i = 0; i < count; i++) {
            Node child = new Node();
            root.addChild(child);
            if (depth > 0 && random.nextBoolean()) {
                return createHierarchy(child, depth - 1);
            }
        }
        return Iterables.get(root.getChildren(), count - 1);
    }

} 
```

这也会引发我在生产代码中看到的相同错误：

```
org.springframework.dao.CannotAcquireLockException: Deadlock found when trying to get lock; try restarting transaction; SQL [n/a]; nested exception is org.hibernate.exception.LockAcquisitionException: Deadlock found when trying to get lock; try restarting transaction
    at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:639)
    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:104)
    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:516)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:394)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
    at a.e.treetest.service.NodeService$$EnhancerByCGLIB$$98fc01a8.addChild(<generated>)
    at a.e.treetest.service.NodeServiceIntegrationTest$1.call(NodeServiceIntegrationTest.java:54)
    at a.e.treetest.service.NodeServiceIntegrationTest$1.call(NodeServiceIntegrationTest.java:51)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:662) 
```

所以我的问题是是否有更好的方法来表示 SQL 数据库中的树，以及在不引发死锁的情况下支持频繁插入的好方法。还是我必须接受并发更新时可能会发生死锁，我应该考虑自动重试原始操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:27:38.640

尝试使用[嵌套集模型](http://falsinsoft.blogspot.com/2013/01/tree-in-sql-database-nested-set-model.html)- 我从来没有遇到过死锁问题

[休眠实现](http://www.dzone.com/snippets/nested-set-implementation)

# c# - C# 获取/设置不可访问性错误

> ID：16060485
> 
> 赞同：1
> 
> 时间：2013-04-17T12:48:25.387
> 
> 标签：c#, get, set

我收到如下错误：不一致的可访问性：属性类型“AudioDevices.Tracks.track.Time”比属性“AudioDevices.Tracks.track.length”更难访问

我不知道它是什么，或者我该如何解决它。有人可以帮助我吗？

这是我所有的代码，[模板=类库]：

```
namespace AudioDevices.Tracks
{
public class Track
{
    #region STRUCT           
    private int id;
    private string name;
    private string artist;
    private string albumSource;
    private Time length;
    private category style;
    public enum category{
        Ambient, Blues, Country, Disco, Electro, Hardcore, HardRock, HeavyMetal,            Hiphop, Jazz, Jumpstyle,
        Klassiek, Latin, Other, Pop, Punk, Reggae, Rock, Soul, Trance, Techno
    };
    #endregion

    #region GET/SET          
    public int Id{
        get { return id; }
        set { id = value; }
    }
    public string Name{
        get { return name; }
        set { name = value; }
    }
    public string Artist{
        get { return artist; }
        set { artist = value; }
    }
    public string AlbumSource{
        get { return albumSource; }
        set { albumSource = value; }
    }
    public Time Length{
        set { length = value; }
    }

    public string DisplayTime
    {
        get { return length.ToString(); }
    }
    public category Style
    {
        get { return style; }
        set { style = value; }
    }
    #endregion

    #region TIME CONSTRUCTOR 
    struct Time
    {
        int seconds;
        int minutes;
        int hours;

        public Time(int seconds)
        {
            this.seconds = seconds;
            this.minutes = 0;
            this.hours = 0;
        }

        public Time(int seconds, int minutes)
        {
            this.seconds = seconds;
            this.minutes = minutes;
            this.hours = 0;
        }

        public Time(int seconds, int minutes, int hours)
        {
            this.seconds = seconds;
            this.minutes = minutes;
            this.hours = hours;
        }

        public override string ToString()
        {
           return hours + ":" + minutes + ":" + seconds;
        }
    }
    #endregion

    #region TRACK CONSTRUCTOR

    public Track(){     }

    public Track(int id)
    {
        this.id = id;
    }

    public Track(int id, string name)
    {
        this.id = id;
        this.name = name;
    }

    public Track(int id, string name, string artist)
    {
        this.id = id;
        this.name = name;
        this.artist = artist;
    }
    #endregion

    #region GetLength
    public string GetLength()
    {
        return length.ToString();
    }

    public int GetLengthInSeconds(int seconds, int minutes, int hours){
        int SecondsToSeconds = seconds;
        int MinutesToSeconds = minutes * 60;
        int HoursToSeconds = hours * 3600;

        int TotalSeconds = HoursToSeconds + MinutesToSeconds + SecondsToSeconds;
        return TotalSeconds;
    }
    #endregion 

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:50:37.287

你在这里有一个*公共*财产：

```
public Time Length{
    set { length = value; }
} 
```

...但是该属性的类型是`Time`，它是*私有*类型：

```
struct Time {
   ...
} 
```

（它是私有的，因为它是一个嵌套类型；如果它被声明为顶级类型，默认情况下它会是内部的，这仍然会有同样的问题。）

公共成员签名不能在参数类型或返回类型中的任何位置引用私有或内部类型。如果成员在不同的程序集中，则该成员对调用者根本没有意义。

因此，解决方法*是*创建`Time`一个公共类型（我建议同时将其提取为顶级类型）*或*创建`Time`一个私有属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:52:21.280

这可能是因为您使用的是构造时间。

尝试更改您的代码，例如：

```
 public Time Length{
        set { length = new Time(value); }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:58:53.713

来自*[MSDN](http://msdn.microsoft.com/en-us/library/ms173121.aspx)*；

> 默认情况下，类成员和结构成员（包括嵌套类和结构）的访问级别是**私有的。**

所以，你的`Time`结构是`private`默认的。

在这部分；

```
public Time Length
{
    set { length = value; }
} 
```

您正在尝试创建结构`public`类型的属性`private`。你不能那样做。为了修复它，

*   `Length`将您的属性访问修饰符更改`public`为`private`.

或者

*   将您的`Time`结构访问修饰符设置为`public`.

# asp.net-mvc - 使用 api 区域。ASP.NET MVC

> ID：16060487
> 
> 赞同：1
> 
> 时间：2013-04-17T12:48:26.767
> 
> 标签：asp.net-mvc

在我当前的项目中，我将`backbone.js`其用作前端技术。Ans 我应该注意到我仍然在`MVC3`但准备继续前进；）`api`为我的客户端部分创建区域作为数据端点是否合理。当然，我可以避免它，只在我项目的非区域外部部分留下一个普通的控制器。最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:56:22.703

为您的主干模型交互的客户端 API 设置一个单独的区域是一种很好的做法。关注点分离、可读性和所有这些。

不过，我建议您将[WebAPI](http://www.asp.net/web-api)用于您的 API，而不是标准的 MVC 控制器。它很容易通过 nuget 添加，只需最少的配置即可设置，并且可以与 Backbone 的基于 HTTP-Verb 的方法很好地对 CRUD 操作进行建模。

如果你已经打算使用 WebAPI，那么请忽略我！如果你不能出于任何原因，那么我仍然会说一个单独的区域是一个好方法。

# c# - 查看图像列表，如 WP8 中的图像库视图

> ID：16060495
> 
> 赞同：0
> 
> 时间：2013-04-17T12:48:40.307
> 
> 标签：c#, windows-phone-7, windows-phone-8, windows-phone-7.1

我有一个图像列表，我需要将其显示为图像库视图样式。我进行了很多搜索，但没有找到任何答案。我使用列表框进行了尝试，但它看起来不像图库视图样式。如果有人知道如何做到这一点或可以为我提供任何建议或链接将是帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:34:36.820

非常好的文章，有非常详细的描述、示例和源代码。这是关于 WP 中图片库的最佳文章之一。

[Picasa_Image_Gallery_with_JSON_in_WP7](http://www.developer.nokia.com/Community/Wiki/Picasa_Image_Gallery_with_JSON_in_WP7)

# jquery - .slidetoggle() 在 .click() 事件之后频繁切换一次

> ID：16060496
> 
> 赞同：0
> 
> 时间：2013-04-17T12:48:42.580
> 
> 标签：jquery, slidetoggle, scrolltop

这就是我要为我的网站做的事情（还没有上线，或者我会发布链接）：我希望在页面首次加载时隐藏 div（scrolltop() ==0）并在何时上滑或滑动切换用户向下滚动。到目前为止，这有效。但我也希望页面本身滚动到顶部，并让 div 在单击后立即向下滑动。问题：一旦它消失，并且页面向上滚动，就会触发初始的 if-else 并且 div 会向上和向下滑动额外的时间。我该如何解决它，以便它在用户单击后保持隐藏状态，但在他/她决定再次向下滚动时重新出现？作为一个方面：页脚也是一个粘性页脚（我不知道这是否有必要，但它保留在页面底部）。这是我的代码：

```
$(function(){
    if($("#footer").length>0)
    $("#footer").hide();});

$(window).scroll(function() {
    if ($(this).scrollTop() == 0) {
    $("#footer:visible").slideToggle('fast',"swing",function(){});
    }
else {
    $("#footer:hidden").slideToggle('fast',"swing",function(){});
}});

$(document).ready(function(){
$('a.fill-div').click(function(){
    $('#footer').slideToggle('fast',"swing",function(){});
    $('html, body').animate({scrollTop:0}, 'slow');
    $("#footer").die('slideToggle');
    return false;
});
}); 
```

我只编写了几个月的代码，因此将不胜感激。无法获取[jsFiddle](http://jsfiddle.net/mijopabe/5HfNb/6/ "jsFiddle")正常工作以进行演示，但这将有助于说明定位。

编辑：我发现我上面的 slideToggle() 代码不能很好地与 Masonry 配合使用，因为当在脚本标签中为 IE7 浏览器错误消息处理添加新的 jQuery 功能时，会抵消 Masonry，并且上面的 slideToggle() 代码按预期工作。但是，Harsh 在接受的答案中发布的链接适用于 Masonry，并以正确的方式解决了我的问题，pr0-m0de。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:32:40.823

我已尝试检查并解决我理解的问题，请在[此处查看现场演示](http://jsfiddle.net/AHgSW/)

我在您的版本中所做的更改：

1.  更改`slideToggle`为`slideUp`和`slideDown`在`window scroll`事件中分别隐藏和显示。

**代码如下图**

*HTML*

```
<div id="container">
    <a href="#test" class="fill-div">
        Testing Anchor
    </a>
    <div>
        Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    </div>
    <a href="#test" class="fill-div">
        Testing Anchor
    </a>
</div>
<div id="footer">
    Footer content Footer content Footer content Footer content Footer content Footer content
</div> 
```

* * *

*JavaScript*

```
$(function() {
    if($("#footer").length>0)
    $("#footer").hide();
});

$(window).scroll(function() {
    if ($(this).scrollTop() == 0) {
      $("#footer:visible").slideUp('fast',function(){});
    }
    else {
      $("#footer:hidden").slideDown('fast',function(){});
}});

$(document).ready(function(){
 $('a.fill-div').click(function(){
    $('#footer').slideToggle('fast',function(){});
    $('html, body').animate({scrollTop:0}, 'slow');
    $("#footer").die('slideToggle');
    return false;
 });
}); 
```

我希望它对你有用。

## 更新

在查看了您的[jsfildle 示例](http://jsfiddle.net/mijopabe/5HfNb/21/)后，我可以理解您想要 scrollToTop 类型的 jquery 实现，它已经由[许多](https://www.google.co.in/webhp?q=jquery%20scroll%20to%20top%20plugin)人开发，您可以[在这里](http://markgoodyear.com/labs/scrollup/)和[这里](http://markgoodyear.com/2013/01/scrollup-jquery-plugin/)查看一个。并按原样使用插件，或者以这些作为参考来修改您的实现。:D

# javascript - 根据先前的值减少和计数文档

> ID：16060505
> 
> 赞同：1
> 
> 时间：2013-04-17T12:48:57.793
> 
> 标签：javascript, mapreduce, couchdb

假设我有以下格式的 CouchDB 文档：

```
...
{
  player: 'abcde',
  action: 'run'
},
{
  player: 'abcde',
  action: 'jump'
},
{
  player: 'abcde',
  action: 'left'
},
{
  player: 'abcde',
  action: 'right'
},
.... 
```

我的`view`样子是这样的：

```
function(doc) {
  emit(doc.player, doc.action)
} 
```

我如何计算玩家`abcde`有多少次行动`jump` **后立即**行动`run`？`jumps`我不想要and的总数`runs`。甚至可以从一个或函数中的当前文件访问`previous`或文件？`next``map``reduce`

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:53:17.090

不，您不能像这样访问 map/reduce 中的其他文档。对于初学者，我不认为reduce order是明确定义的，所以恐怕'previous'和'next'甚至没有真正意义。

相反，我建议您将每个玩家操作的整个历史记录折叠到一个文档中，例如：

```
{
  "player": "abcde",
  "actions" : [ "right", "run", "jump" ]
} 
```

然后，您可以仅在您的 map 方法中从数组中计算特定的有序操作集，并在您的 reduce 中根据需要简单地聚合它们。

# excel - 通过 JSF 操作方法下载 Excel 文件会导致附加一些奇怪的字符并附加完整的 JSP 页面

> ID：16060513
> 
> 赞同：1
> 
> 时间：2013-04-17T12:49:23.970
> 
> 标签：excel, jsf, download

我正在使用 JSF，并且在其中一个托管 bean（视图范围）中，我有一个方法：

```
public String viewReport() {

        HttpServletResponse response = (HttpServletResponse) FacesContext.getCurrentInstance().getExternalContext().getResponse();

        response.setContentType("application/vnd.ms-excel");
        response.setHeader("Content-Disposition","attachment;filename=book1.xls");

        try {
            File file = new File("C:\\soheb\\book1.xls");
            FileInputStream fileIn = new FileInputStream(file);
            ServletOutputStream out = response.getOutputStream();

            byte[] outputByte = new byte[4096];
            //copy binary contect to output stream
            while(fileIn.read(outputByte, 0, 4096) != -1)
            {
                out.write(outputByte, 0, 4096);
            }
            fileIn.close();
            out.flush();
            out.close();
        }
        catch(IOException e) {
            e.printStackTrace();
        }
        return null;
} 
```

正在检索的 excel 文件已损坏。上面有一些奇怪的字符，下面是整个JSP代码。我什至也尝试了 contenttype 的 application/octet-stream。

我对纯文本文件进行了同样的尝试，并且能够通过它打开它。

请帮我解决这个问题，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:46:52.003

> *上面有一些奇怪的字符*

您需要事先[重置响应。](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html#reset%28%29)

```
response.reset(); 
```

另一个可能的原因是正在保存的文件本身已损坏。例如，使用 a`Writer`而不是`OutputStream`.

* * *

> *以下是JSP的完整代码*

您需要[告诉 JSF 您已经自己完成了响应](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#responseComplete%28%29)，这样它就不会在调用 action 方法后执行其默认导航和呈现响应作业。

```
context.responseComplete(); 
```

### 也可以看看：

*   [如何从 JSF 支持 bean 提供文件下载？](https://stackoverflow.com/questions/9391838/how-to-stream-a-file-download-in-a-jsf-backing-bean/9394237#9394237)

# jquery - 如何在同一区域拥有 div 和 iframe？

> ID：16060514
> 
> 赞同：0
> 
> 时间：2013-04-17T12:49:28.690
> 
> 标签：jquery, iframe

我的页面中有 iframe。我需要`<div>`在我的父页面中显示，但在隐藏我的框架之前我看不到。是否可以强制框架在后台。我不想打开弹出窗口而不是`<div>`.

父.php

```
<script>
    $(document).ready(function() {
        $(".Class1").click(function() {
            var str = "<div>Some content</div>";
            $(".main_frame").hide();
            $(str).appendTo('body');
        });
    });
</script>

<a class='Class1' href='#'>text</a>
<div class='frame_div'>
    <iframe class='main_frame' name='main_frame' src='child.php'></iframe>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:53:50.677

如果你想在点击时将新的“div”语句附加到你的身体，那么你可以做这样的事情......

```
 $(document).ready(function() {
        $(".Class1").click(function() {
            var str = "<div>Some content</div>";
            $('body').append(str);
            //$(".main_frame").hide();
            //$(str).appendTo('body');

        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:18:16.227

我刚刚将以下内容添加到我的 css 中并且它有效。我还删除了 $(".main_frame").hide(); 当然。

```
.main_frame {
    background-color: transparent;
} 
```

# grails - Grails - 我如何计算任何操作所花费的执行时间？

> ID：16060516
> 
> 赞同：2
> 
> 时间：2013-04-17T12:49:36.233
> 
> 标签：grails

我正在尝试衡量我的应用程序的每个操作所花费的时间，因为我正在重建一个遗留系统。

现在我正在控制器级别执行此操作：

```
def actionStart() {
    session.startTime = new Date().getTime()
}
def actionEnd() {
    def endTime = new Date().getTime()
    timeHandler(endTime, session.startTime)
}
def timeHandler(end, start){
    return end - start
} 
```

重要提示：我想将它移动到过滤器并在每个操作的开始和结束时自动执行它。

最好的方法应该是什么？提前致谢。

`System.currentTimeMillis()`PS.：获取和实例化对象有什么区别？表现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T13:30:49.317

您应该能够使用[Grails 过滤器](http://grails.org/doc/latest/ref/Plug-ins/filters.html)来执行此操作：

```
class TimeFilters {
    def filters = {
        timeCheck(controller: '*', action: '*') {
            before = { model ->
                ...
            }
            after = { model ->
                ...
            }
        }
    }
} 
```

如果您查看以下源代码`java.util.Date`：

```
public Date() {
    this(System.currentTimeMillis());
} 
```

所以这只是创建和获取时间的性能开销：`new Date().getTime()`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T12:54:19.057

在动作开始时这样做：

```
long now = System.currentTimeMillis(); 
```

在动作结束时，这样做：

```
System.out.println( (System.currentTimeMillis() - now) + " ms"); 
```

并把你的行动放在这两条线之间

**免责声明：**

我根据java回答了这个问题（在编辑标签之前），所以请澄清你的标签。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-19T11:10:52.097

你可以使用方法 afterInceptor 和 beforeInceptor

```
def actionArray = [:];

def afterInterceptor = {
        def time = System.currentTimeMillis() - actionArray[actionUri]
        println("Used time for action " + actionUri + "is: " + time + " ms");
    }

    def beforeInterceptor = {
        actionArray[actionUri] = System.currentTimeMillis();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T17:13:55.957

今天出现了，在 DZone / GroovyMag 上提到：[GProf 是 Groovy 的分析器](http://nagaimasato.blogspot.com/2013/04/gprof-was-just-born.html)

# php - HTML 未使用 wp_editor() 正确格式化

> ID：16060520
> 
> 赞同：1
> 
> 时间：2013-04-17T12:49:44.200
> 
> 标签：php, wordpress, plugins

### Wordpress WYSIWYG 编辑器无法正确格式化*保存*的HTML 输出

我有一个截图，它准确地解释了发生了什么，我也会发布我的代码片段。

![截图在这里](https://i.stack.imgur.com/WVJq5.png)

我正在制作一个 wordpress 插件，它添加在我的自定义设置页面上调用的所见即所得编辑器中编辑的文本。我已经将保存的输入发布到我想要它去的地方（通过编辑主题模板文件，虽然不是我真正想要的，但它正在工作）但它输出保存的文本而没有选择任何格式通过我的插件页面在 WYSIWYG 中。

我一直在做一些阅读，我想这可能与`esc_html`也许有关？我真的不太确定。

这个片段，是我**真正的 WordPress 插件：**

```
<?php
/*/
Plugin Name: Custom Text Adder
Plugin URI: N/A
Description: Demonstrates how rubbish I am at pretty much everything I want to do
Version: 101
Author: JD
Author URI: N/A
/*/

// create custom plugin settings menu
add_action('admin_menu', 'custom_create_menu');

// Add Font-Size to WYSIWYG Editor
function wp_editor_fontsize_filter( $options ) {
    array_shift( $options );
    array_unshift( $options, 'fontsizeselect');
    array_unshift( $options, 'formatselect');
    return $options;
}
add_filter('mce_buttons_2', 'wp_editor_fontsize_filter');

function custom_create_menu() {

    //create new top-level menu
    add_menu_page('Custom Plugin Settings', 'Custom Settings', 'administrator', __FILE__, 'custom_settings_page',plugins_url('/img/icon.png', __FILE__));

    //call register settings function
    add_action( 'admin_init', 'register_mysettings' );
}

function register_mysettings() {
    //register our settings
    register_setting( 'custom-settings-group', 'new_option_name' );
    register_setting( 'custom-settings-group', 'some_other_option' );
    register_setting( 'custom-settings-group', 'option_etc' );
    register_setting( 'custom-settings-group', 'font_size' );
    register_setting( 'custom-settings-group', 'post_text' );
}

function custom_settings_page() {
?>
<div class="wrap">
<h2>Custom Text</h2>

<?php?>

<form method="post" action="options.php">
    <?php settings_fields( 'custom-settings-group' ); ?>

    <table class="form-table">

        <?php /* Bring the editor onto the page */

wp_editor( '', 'post_text', $settings = array() );

/**
 * 4.
 * Custom buttons for the editor.
 * This is a list separated with a comma after each feature
 * eg. link, unlink, bold, ...
 */

$settings = array(
    'textarea_name' => 'post_text',
    'media_buttons' => true,
    'tinymce' => array(
        'theme_advanced_buttons1' => 'formatselect,|,bold,italic,underline,|,' .
            'bullist,blockquote,|,justifyleft,justifycenter' .
            ',justifyright,justifyfull,|,link,unlink,|' .
            ',spellchecker,wp_fullscreen,wp_adv'
    )
);

submit_button( 'Save everything', 'primary', 'submit' ); ?>
</form>
</div> 
```

而这一个，是主题**home.php 模板文件**中的文本发布位置：

```
<?php if ( get_option('chameleon_quote') == 'on' ) { ?>
    <div id="category-name"> 
        <div id="category-inner">

            <div><?php print esc_html(get_option('post_text')); ?></div>
        <?php if ( get_option('post_text') <> '' ) { ?>
            <h3><?php echo esc_html(get_option('post_text')); ?></h3>
        <?php } ?>
        <?php if ( get_option('chameleon_quote_two') <> '' ) { ?>
            <p><?php echo esc_html(get_option('chameleon_quote_two')); ?></p>
        <?php } ?>  
        </div>
    </div> <!-- end .category-name -->
<?php } ?> 
```

`('post_text')`零件是我做的。如您所见，我基本上复制了底部功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:26:47.433

尝试不使用 esc_html

```
<?php if ( get_option('chameleon_quote') == 'on' ) { ?>
    <div id="category-name"> 
        <div id="category-inner">

            <div><?php print get_option('post_text'); ?></div>
        <?php if ( get_option('post_text') <> '' ) { ?>
            <h3><?php echo get_option('post_text'); ?></h3>
        <?php } ?>
        <?php if ( get_option('chameleon_quote_two') <> '' ) { ?>
            <p><?php echo get_option('chameleon_quote_two'); ?></p>
        <?php } ?>  
        </div>
    </div> <!-- end .category-name -->
<?php } ?> 
```

# actionscript-3 - 我如何在我的所有 mxml 组件中重新使用这个类

> ID：16060524
> 
> 赞同：-1
> 
> 时间：2013-04-17T12:50:00.873
> 
> 标签：actionscript-3, apache-flex, mxml

请我是 Flex 和 Actionscript 3 的新手，但我知道它是一种 OOP 语言，我来自 Java 背景。我有一个类可以帮助我检查我的 AIR 应用程序的用户是否具有 Internet 连接，当直接包含在我的 mxml 类中时它运行良好。想知道是否可以将它插入到 actionscript 类中并在我希望的任何 mxml 组件类中重用它。

编辑

```
package components
{
    import air.net.URLMonitor;

    import flash.events.StatusEvent;
    import flash.net.*;

    public class NetworkChecker
    {
        private var monitor:URLMonitor;
        private var myURL = new URLRequest("http://www.adobe.com");

        public function NetworkChecker()
        {
            myURL.method = "HEAD";
            monitor = new URLMonitor(myURL);
            monitor.start();
            monitor.addEventListener(StatusEvent.STATUS, on_Connection);
        }
        public function on_Connection(event:StatusEvent):void
        {
            if(event.target.available == true)
            {
                trace("Internet Connection is available");
            }
            else
            {
                trace("No internet Connection");
            }
        }
    }
} 
```

请问如何从 mxml 组件调用此代码？当我将它直接包含在 fx:Script 标记中时效果很好。我需要知道在我的 mxml 组件中 event.target.available 是否为真...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:34:39.943

将您的功能更改为：

```
 public function on_Connection(event:StatusEvent):boolean
    {
        if(event.target.available == true)
        {
            trace("Internet Connection is available");
            return true;
        }
        else
        {
            trace("No internet Connection");
            return false;
        }
    } 
```

或者更好：

```
 public function on_Connection(event:StatusEvent):boolean
    {
        return event.target.available;
    } 
```

**注意：**这假设`event.target.available`已定义...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:19:36.853

将公共属性添加到 NetworkChecker 类

```
[Bindable]
public var available:Boolean = false; 
```

然后

```
public function on_Connection(event:StatusEvent):void
        {           
           this.available = event.target.available;
        } 
```

xml

```
<fx:Declarations>
    <components:NetworkChecker id="checker"/>
</fx:Declarations>

<s:Button label="Button" enabled="{checker.available}"/> 
```

以及更多：
您应该在构造函数中的监视器启动之前添加 eventListener

# dart - DartEditor M4 pub 功能被破坏

> ID：16060525
> 
> 赞同：2
> 
> 时间：2013-04-17T12:50:01.360
> 
> 标签：dart, dart-editor, dart-pub

刚刚更新到 DartEditor M4 并且以某种方式与“Pub”相关的功能停止工作:( :(

```
Dart Editor version 0.4.7_r21548
Dart SDK version 0.4.7.1_r21548
Linux alex 3.5.0-27-generic #46-Ubuntu SMP Mon Mar 25 19:58:17 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux 
```

我习惯于右键单击`pubspec.yaml`文件并选择“发布更新”，但现在它只是向我吠叫并报错：

```
Please select a pubspec.yaml before running pub. 
```

![错误截图](https://i.stack.imgur.com/2D3iY.png)

`Tools > Pub update`如果我点击，即使我双击，我也会得到同样的错误（？）`pubspec.yaml`我看到屏幕上的窗口仍然显示“请选择...”

我的 Dart 编辑器有问题吗？我应该重新安装它吗？

* * *

# 更新

* * *

它被固定在：

```
 Dart Editor version 0.4.7_r21658
    Dart SDK version 0.4.7.5_r21658 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:52:34.167

有同样的问题，在飞镖论坛讨论后，我打开了以下问题： [https ://code.google.com/p/dart/issues/detail?id=9974&thanks=9974&ts=1366221062](https://code.google.com/p/dart/issues/detail?id=9974&thanks=9974&ts=1366221062)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T23:01:18.910

如果您执行全新安装，您可能不会收到带有错误的对话框，但 pub 工具实际上并没有运行。删除您的软件包，然后尝试，没有任何更新或安装。它坏得很厉害。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:41:28.133

如果您进行了更新，请全新安装编辑器，看看是否能解决问题。我有一个全新安装的 M4，并且运行 pub 没有任何问题。

# android - Android - 如何设置设备输入 - 触摸屏或鼠标

> ID：16060528
> 
> 赞同：0
> 
> 时间：2013-04-17T12:50:11.673
> 
> 标签：android, touch, kernel, android-4.0-ice-cream-sandwich

我目前正在为设备编译 Android 并且最近升级了 ICS 版本。我遇到了触摸问题。触摸控制器已打开，但屏幕被视为用于鼠标输入的触控板，光标出现在屏幕上。如何使触摸屏输入用作触摸屏而不是鼠标输入。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:30:08.230

这里的问题与 IDC 文件有关。IDC = 输入设备配置文件。我从具有相同硬件的不同设备中借用了触摸驱动程序，但我没有为这个更改获取 idc 文件。

将此添加到产品配置文件中为我修复了它。

# symfony - Symfony2 自定义控制台命令在执行时显示为“未定义”

> ID：16060529
> 
> 赞同：18
> 
> 时间：2013-04-17T12:50:20.270
> 
> 标签：symfony, command

我在 src/CollaboratorsBundle/Command 中创建了一个新类，将其命名为 GenerateFormRemindersCommand.php，并将以下代码放入其中：

```
<?php
namespace Myproject\CollaboratorsBundle\Command;

use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Output\OutputInterface;
use Symfony\Bundle\FrameworkBundle\Command\ContainerAwareCommand;

class GenerateFormRemindersCommand extends ContainerAwareCommand{

    protected function configure() {
        $this->setName("generate:formReminders")
             ->setDescription('Send reminders by email to all collaborators with unanswered forms');
    }

    protected function execute(InputInterface $input, OutputInterface $output) {
        //some code
    }
} 
```

执行后，我收到以下消息：

```
$ php app/console generate:formReminders
[InvalidArgumentException]
Command "generate:formReminders" is not defined. 
```

我检查了我的 AppKernel.php 文件，我的包已在其中注册，并且确实如此。

我试过添加 parent:configure(); 到配置方法，但没有任何结果。

我创建了一些其他可以正常工作的自定义命令。在这种情况下，我不明白我做错了什么。你 ？

提前致谢

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-08-05T03:09:30.433

我遇到了同样的麻烦，因为我命名了没有“命令”后缀的文件。您必须将文件命名为“GenerateFormRemindersCommand.php”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-13T19:14:42.083

我有同样的错误。我遇到的问题是我实现了构造函数来初始化存储库字段而不是`initialize()`方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-18T13:10:09.473

如果您将命令配置为服务（用于依赖注入或其他目的）并且该命令具有自定义构造函数 - 您不应该忘记用 标记它`console.command`，例如

```
 your_service:
    class: Your\Class
    tags:
        - "console.command" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-21T05:19:39.300

您没有将文件放置在正确的位置。

查看您的代码和使用的命名空间以及您已经提到的，您已将文件放在 src/CollaboratorsBundle/Command 中。虽然它必须放在 src/Myproject/CollaboratorsBundle/Command 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-24T15:54:57.280

执行

```
bin/console cache:clear 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-05T09:25:25.493

同样的问题，但因为我忘了`extends ContainerAwareCommand`

# css - @font-face 在本地主机上工作，但不在实时服务器中

> ID：16060531
> 
> 赞同：1
> 
> 时间：2013-04-17T12:50:22.020
> 
> 标签：css

我正在尝试在网站中安装自定义字体，为此我使用了以下代码行：

```
 font-family: 'TradeGothic';
 src: url('../Content/fonts/trade_gothic_oblique-webfont.eot?');
 src: url('../Content/fonts/trade_gothic_oblique-webfont.eot') format('eot'),
      url('../Content/fonts/trade_gothic_oblique-webfont.eot?#iefix') format('embedded-opentype'), 
      url('../Content/fonts/trade_gothic_oblique-webfont.woff') format('woff'), 
      url('../Content/fonts/trade_gothic_oblique-webfont.woff') format('ttf');
 src: url(data:application/x-font-woff;charset=utf-8;base64, Us6SIvwGRglxYAAAAAAFQbB7XAAA) format('woff'), url('../Content/fonts/trade_gothic_oblique-webfont.ttf') format('truetype'); 
```

它在所有浏览器的本地主机上都可以正常工作，但在实时服务器的情况下，这不仅适用于 ie7、ie8 和 safari 5.0，所以让我知道这段代码出了什么问题。

# java - 罐子：没有找到类定义错误

> ID：16060533
> 
> 赞同：0
> 
> 时间：2013-04-17T12:50:24.823
> 
> 标签：java, ant, jar, noclassdeffounderror

我正在尝试使用 Ant Build 构建一个项目，并且我已经引用了几个 jar 来使其工作。现在，当我将 Ant 构建创建的 jar 放入其他机器并运行它时。我收到错误消息`NoClassDefFoundError org/apache... Not found`。无论如何将所有引用的jar放在项目的类路径或清单文件中？
或者无论如何要重新打包项目中的所有jar？我知道有一种使用*jarjar*的方法，但我不知道如何使用它。
请给我一些想法，我已经被这个小问题困扰了很长时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:09:53.910

使用 ANT 构建时，您需要的外部 jar 将由 ANT 工具添加到类路径中。查看您的构建脚本，您很可能在**javac**任务或定义类路径的设置任务中有一个条目。

构建代码后，您的 jar 文件中仅包含您的类，默认情况下，第 3 方 jar 文件（如 Apache）中的类不会添加到您的 jar 文件中。

你需要决定的是你想要一个包含所有需要的类的单个 jar 文件还是你愿意部署多个 jar 文件？如果您愿意将应用程序作为多个 jar 文件交付，您将需要提供批处理文件或 shell 脚本来为构建类路径以包含已部署 jar 的用户启动应用程序。

如果您想要一个 jar 文件，您可以执行以下操作。假设您拥有的所有 3rd 方 jar 都位于由 ANT 属性**lib.dir**标识的目录中：

```
<jar destfile='${build.dir}/lib-jars.jar'>
  <zipgroupfileset dir="${lib.dir}">
    <include name="**/*.jar" />
  </zipgroupfileset>
</jar>
<sleep seconds='1'/>  <!-- avoid timestamp warnings --> 
```

这将在您的**build.dir目录中创建一个名为****lib-jars.jar**的单个 jar 文件，其中包含来自所有 3rd 方 jar 的所有类。请理解，如果等效文件（如 MANIFEST.MF 文件）存在于多个 jar 中并且仅存在最后一个，则会导致它们被覆盖。

一旦你有了这个新的 all-libs jar，你就可以将你的应用程序类和这个 all-libs jar 的内容打包到一个 jar 中：

```
<jar destfile='${jar.file}' basedir='${classes.dir}'>
  <!-- using zipfileset we can filter on entries in the one file -->
  <zipfileset src='${build.dir}/lib-jars.jar'>
    <exclude name="META-INF/MANIFEST.MF"/>
  </zipfileset>
  <manifest>
    <attribute name="Built-By" value="${user.name}"/>
    <attribute name="Main-Class" value="${main.class}"/>
    <section name="common">
      <attribute name="Specification-Title" value="${project.title}"/>
      <attribute name="Specification-Version" value="${release.version}"/>
      <attribute name="Specification-Vendor" value="${vendor}"/>
      <attribute name="Implementation-Title" value="${project.title}"/>
      <attribute name="Implementation-Version" value="${release.version}"/> 
      <attribute name="Implementation-Vendor" value="${vendor}"/>
    </section>
  </manifest>      
</jar> 
```

请注意，我从 all-libs jar 中排除了 MANIFEST.MF 文件并创建了我自己的文件。然后最终结果是一个 jar 文件，其中包含所有库 jar 文件和您的类中的所有类/属性文件/资源​​。

# git - 使用 svn2git 将 svn repo 转换为 git repo 时更改文件夹结构

> ID：16060535
> 
> 赞同：2
> 
> 时间：2013-04-17T12:50:33.633
> 
> 标签：git, svn2git

我正在将 SVN 存储库迁移到 Git。

svn结构如下图

```
Root
  + branches
      + b1
      + b2
      + development_branches
          + d1
          + d2
  + tags
  + trunk 
```

这里的情况是文件夹分支包含另一个子目录 development_branches 又包含几个分支。

当我使用 svn2git 时，将其转换为 git 存储库。文件夹 development_branches 被认为是一个分支。下面是使用 svn2git 的 Git 分支结构

```
Root
   + b1
   + b2
   + development_branches 
```

是否可以让 svn2git 将文件夹“development_branches”的内容视为单独的分支，或者在 Git 中有一种方法可以将文件夹 development_branches 中的文件夹标记为单独的分支？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:12:03.453

我不确定这是否是正确的做法，但它似乎有效。如果这不正确，欢迎您的反馈。

策略是这样的 1.从分支“development_branches”创建分支，每个子文件夹一个 2.查看新创建的分支并使用命令 git filter-branch 将根目录内容替换为子目录的内容

```
git filter-branch  -f --subdirectory-filter <subdirectory_name> HEAD 
```

因此，对于问题中显示的 git 结构，我使用了以下命令

```
$ git checkout development_branches
$ git branch d1
$ git branch d2
$ git checkout d1
$ git filter-branch  -f --subdirectory-filter d1 HEAD
$ git checkout d2
$ git filter-branch  -f --subdirectory-filter d2 HEAD
$ git branch -d development_branches 
```

在此之后，新的 Git 结构是

```
Root
   + b1
   + b2
   + d1
   + d2 
```

# php - 在 php 中以编程方式调整 Google 电子表格中的单元格大小

> ID：16060539
> 
> 赞同：1
> 
> 时间：2013-04-17T12:50:48.770
> 
> 标签：php, google-drive-api

有没有一种方法可以以编程方式调整 Google 电子表格中单元格的高度和宽度，我不确定 Google sdk api 中提供的任何 php 类是否可以满足此要求。我找到了“谷歌电子表格类”，但没有找到在哪里下载该类以及如何在 php 中使用它的功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:11:07.103

电子表格 API 不允许对电子表格进行视觉更改，它是一个数据 API。

# wordpress - 从一个类别中获取所有图像 url - Wordpress

> ID：16060545
> 
> 赞同：0
> 
> 时间：2013-04-17T12:51:12.333
> 
> 标签：wordpress

我想获取我的类别 3 的所有图像附件 ID。有人知道该怎么做吗？

这是我的代码：

```
 $query_images_args = array(
        'post_type' => 'attachment',
        'post_mime_type' =>'image',
        'post_status' => 'inherit',
        'posts_per_page' => -1,     
//      'cat'=> 3, NOT WORKING 
        'orderby' => 'rand', // Order randomly 
    );

    $query_images = new WP_Query( $query_images_args );
    $images_desktop = array();
    $images_tablets = array();
    $images_smartphones = array();

    // WE ARE GETTING ALL IMAGES URLS ACCORDING TO THE DEVICE
    foreach ( $query_images->posts as $image) {

    $attachment_width = wp_get_attachment_image_src($image->ID,'small');
    $attachment_width = $attachment_width[1];
        if($attachment_width<=500)
        {
            $images_smartphones[] = wp_get_attachment_url( $image->ID);
        }
        elseif ($attachment_width<=1000)
        {
            $images_tablets[] = wp_get_attachment_url( $image->ID);
        }
        elseif ($attachment_width>=1000){
            $images_desktop[]= wp_get_attachment_url( $image->ID);
        }
    }
    ?> 
```

我的想法：

如果它们确实有任何图像附件，则获取类别 3 的所有帖子 ID。使用此帖子 ID 列表，我可以获得每个附件 ID 的列表。这个对吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:17:37.847

这是我的工作代码

```
<?php wp_reset_query();

// Init 
    $images_desktop = array();
    $images_tablets = array();
    $images_smartphones = array();

    $args = array( 
        'orderby' => 'rand',
        'post_type' => 'post', 
        'cat' => 3, 
        'posts_per_page' => -1,
     );

    $wp_query = new WP_Query($args);                
// $wp_query->posts returns all posts even childrens

    foreach ( $wp_query->posts as $single_post) {
        $single_post_ID = $single_post->ID;
//      echo ($single_post_ID."<br/>");
        $args = array(
            'orderby' => 'rand', // Order randomly 
            'post_type'      => 'attachment',
            'post_parent'    => $single_post_ID,
            'post_mime_type' => 'image',
            'post_status'    => null,
            'numberposts'    => -1,
        );

        $attachments = get_posts($args);
        if ($attachments) {
            foreach ($attachments as $attachment) {
                $attachment_ID = $attachment->ID;

                $attachment_width = wp_get_attachment_metadata($attachment_ID);
                $attachment_width = $attachment_width["width"];
                if($attachment_width<=500)
                {
                    $images_smartphones[] = wp_get_attachment_url( $attachment_ID);
                }
                elseif ($attachment_width<=1000)
                {
                    $images_tablets[] = wp_get_attachment_url($attachment_ID);
                }
                elseif ($attachment_width>=1000){
                    $images_desktop[]= wp_get_attachment_url($attachment_ID);
                }

            }
        } 
    }

    ?> 
```

# path - Wamp Server : 上传文件的路径

> ID：16060548
> 
> 赞同：0
> 
> 时间：2013-04-17T12:51:22.373
> 
> 标签：path, wamp

嗨，我有一个 WAMP 服务器，其中一些文件上传到特定路径。

> C:\wamp\www\上传\

在这种情况下。但是是否可以将这些文件上传到例如

> D:\文档\用户\上传？

`Upload.php`指定存储文件的路径，但我没有更改到另一个路径的方法。

在此先感谢，凯瑟琳

编辑：upload.php

这是upload_file.php

```
<?php
$target_path  = "c:\\";

$target_path = $target_path . basename( $_FILES['uploadedfile']['name']);
if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
 echo "El fichero ".  basename( $_FILES['uploadedfile']['name'])." ha sido enviado";
} else{
 echo "Hubo un error, inténtalo de nuevo!";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T11:10:20.380

凯瑟琳，

在 WAMP 中，已设置 Apache（出于安全原因应该如此），因此 Apache 将不允许访问 C:\ 的根文件夹

```
<Directory />
    Options FollowSymLinks
    AllowOverride None
    Order deny,allow
    **Deny from all**
</Directory> 
```

这可以阻止成功侵入您网站的黑客被允许造成**真正严重的损害。**

所以我希望在您的 Apache 错误日志或您的 Php 错误日志中看到一条错误消息。除非您禁用了该功能，否则我还希望在 XDEBUG 的屏幕上看到和错误。也许您应该重新启用它，因为这些错误消息在您开发时非常有用！！！

更改 php.ini display_errors = On

现在可以像这样在正常网站文件夹结构之外打开特定文件夹

```
This is an excerpt from the httpd.ini without all the comments
<Directory "d:/wamp/www/">
    Options Indexes FollowSymLinks
    AllowOverride all
#   onlineoffline tag - don't remove
    Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1

    </Directory>
    Alias /my_other_upload_folder_alias "c:/some_other/folder/my_other_upload_folder"
    <Directory "c:/some_other/folder/my_other_upload_folder">
        AllowOverride All
        Order Deny,Allow
        Deny from All
        Allow from 127.0.0.1
    </Directory>
</Directory> 
```

然后，您使用 'my_other_upload_folder_alias' 作为 php 代码中的文件夹名称。

PS。您看起来像是将您的网站放入 c:\wamp\www 这是一个坏主意！像这样为您的网站创建子文件夹

```
c:\wamp\www\site1  
c:\wamp\www\site2 
```

并考虑为每个站点创建一个虚拟主机。

# django - Windows 7 中的 Django 1.5.1 安装问题

> ID：16060550
> 
> 赞同：-3
> 
> 时间：2013-04-17T12:51:23.060
> 
> 标签：django

我想在 Windows 上学习 Django。我已经安装了 python 2.7。我不知道安装 Django。我用谷歌搜索了很多，但没有正确理解。我提到[了这个问题](https://stackoverflow.com/questions/5155317/does-django-have-a-windows-7-installer-i-couldnt-find-one-and-theres-little-me)，但我不理解接受答案中的第三点。我已经在`c:\`.Also django 中安装了 python `c:\`。请帮助我。我已经提取了 django ![在此处输入图像描述](https://i.stack.imgur.com/UJywl.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:06:19.407

我一直使用这个链接，一切都像一个魅力（我没有安装 iPython 也没有完成第 3 步）：
[http ://www.swegler.com/becky/blog/2011/08/27/python- django-mysql-on-windows-7-part-i-getting-started/](http://www.swegler.com/becky/blog/2011/08/27/python-django-mysql-on-windows-7-part-i-getting-started/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:58:37.030

第三点是安装 Django 的地方，如果你卡在那个地方，你还没有安装它。

您需要将 django 解压到一个文件夹中，`cd`然后运行`python setup.py install`

另一个答案的原因`C:\download\Django-1.2.5>`是他们将 django 提取到该目录，并且`c:\Python27\python.exe`因为在 Windows 上，您需要重新启动才能使路径修改生效。因此，他们直接访问 python 可执行文件，无需重新启动。

* * *

要检查您是否已成功安装 django，您可以执行以下操作（是的，适用于 windows）

```
(virtualenv)[root@localhost ~]# python
Python 2.7.4 (default, Apr  8 2013, 14:05:01) 
[GCC 4.4.7 20120313 (Red Hat 4.4.7-3)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import django
>>> django.get_version()
'1.5.1' 
```

打开 cmd，输入`python`（只要将其添加到路径中）然后`import django` 输入`django.get_version()`

如果你成功了，就不会有导入错误，你会看到安装的 django 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:59:07.537

我将为您建议一些额外的步骤，这些步骤从长远来看将是无价的。首先，使用[virtualenv](http://www.virtualenv.org/en/latest/)进行开发。这使您可以在您的机器上保留几个单独的 Python 环境，每个环境都针对它们正在运行的项目进行了调整。将所有项目保存在 virtualenv 中也意味着，如果您执行的操作破坏了该环境的 Python 安装，则其余项目不受影响。我使用 Linux，所以我从未在 Windows 上安装 virtualenv，但[本教程](https://zignar.net/2012/06/17/install-python-on-windows/)似乎很明智。

Virtualenv 有一个名为[`pip`](http://www.pip-installer.org/en/latest/)自动安装的包。Pip 是一个 Python 包安装程序。使用它，安装和设置 Django 就像`pip install Django`在命令提示符下键入一样简单。它还具有许多其他非常有用的功能，可用于控制和备份 Python 环境，您可以在其文档中找到这些功能。

# php - 无法连接php和html文件

> ID：16060553
> 
> 赞同：-2
> 
> 时间：2013-04-17T12:51:27.453
> 
> 标签：php

我添加了动作值注册文件

```
 <body>

<div id="registration">
 <h2><b><i>Electronic Montessori Learning</i><b></h2>

 <form id="RegisterUserForm" action="connect.php" method="post">
    <fieldset>
         <p>
            <label for="name">Name</label>
            <input id="name" name="name" type="text" class="text" value="" />
         </p>
        <p>
            <label for="password">Password</label>
            <input id="password" name="password" class="text" type="password" />
         </p>
       <p>
            <button id="registerNew" name="registerNew" type="submit">Register</button>
         </p>
    </fieldset>

 </form>
</div>
<body> 
```

我没有发布所有registration.html代码，因为它工作正常

连接.php

```
<?php

$db=mysql_connect("localhost", "root", "") or die(mysql_error());
echo "Connected to MySQL<br />";
mysql_select_db("users") or die(mysql_error());
echo "Connected to Database";

$name ='';
$password ='';
if(isset($_POST['registerNew'])){
// Storing form values into PHP variables
$name = $_POST['name']; // Since method=”post” in the form
$password = $_POST['password'];

}

mysql_query("INSERT INTO user_eml(Name, Password) VALUES('$name', '$password' ) ") 
or die(mysql_error());  
echo "Data Inserted!";

echo    'Thank you for submitting your details!';

?> 
```

但它仍然无法正常工作，当我按下注册按钮时，它显示了 connect.php 的 php 代码

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T12:52:58.757

您的表单不知道将其数据发送到何处：

```
<form id="RegisterUserForm" action="" method="post"> 
```

应该

```
<form id="RegisterUserForm" action="connect.php" method="post"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-16T04:39:12.577

如果单击注册按钮时，页面上出现 php 代码，那么很可能它与您的代码无关。请检查您是否直接双击 html 文件进行测试。请改为在浏览器中输入 localhost 页面地址来执行它。

例如：[http://localhost/registration.html](http://localhost/registration.html)

现在 HTML 应该能够执行 PHP 代码了。

-Shazz解码器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:53:53.677

您必须在表单中添加`connect.php`为`action`属性值：

```
<form id="RegisterUserForm" action="connect.php" method="post"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:54:49.150

在`action=""`您的表单中，没有任何内容被提交。你需要告诉它调用`connect.php`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T12:57:05.540

如果你使用与action相同的页面，你应该将action.php中的代码复制到包含form的页面上，或者将**action=""**替换为**action="connect.php"**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-07T14:28:48.643

如果单击注册按钮时，页面上出现 php 代码，那么很可能它与您的代码无关。请检查您是否直接双击 html 文件进行测试。请改为在浏览器中输入 localhost 页面地址来执行它。

例如：[http://localhost/registration.html](http://localhost/registration.html)

现在 HTML 应该能够执行 PHP 代码了。并且您的包含 html 和 php 文件的文件夹应该在 XAMPP->htdocs 中。

# mysql - Rails 将查询限制为多个结果

> ID：16060562
> 
> 赞同：0
> 
> 时间：2013-04-17T12:51:56.530
> 
> 标签：mysql, ruby-on-rails

我想创建一组查询，第一个查找在特定日期之后创建的所有记录，然后第二个显示在该日期之前创建的所有记录。由于有 30,000 条记录，我只想显示最接近我设置的日期的 10 条。

```
 private
def current_scorecards_for_review
  self.where("created_at > ? AND reviewed = ?", Date.new(2013,04,01), false)
end

def historic_scorecards_for_review
  self.where("created_at < ? AND reviewed = ?", Date.new(2013,04,01), false).limit(10)
end 
```

这就是我到目前为止所写的，当我在控制台中尝试它时

```
e = Scorecard.where("created_at < ?", Date.new(2013,04,01)).limit(10) 
```

然后打电话

```
e.count 
```

它将返回 => 30175，我该如何制作才能只返回 10 个？并且有 30,000 行，这很慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:02:21.190

调用[ActiveRecord::Relation](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html)`count`对象将触发计数查询。SQL 限制不会像您对计数查询所期望的那样起作用，因为限制实际上将应用于结果计数本身 - 通常是单行（除非使用 GROUP BY）：

```
SELECT COUNT(*) 
FROM scorecards 
WHERE created_at < '2013-04-01' AND reviewed = false 
LIMIT 10 
```

当您调用`to_a`（或`all`其他任何实际触发查询的方法）时，您正在处理返回的集合 -`count`现在将返回集合的长度。

参见[`here`](https://groups.google.com/forum/?fromgroups=#!topic/rubyonrails-core/zWM_s3mOrQo)有关此的讨论。

# serialization - Gson 对象反序列化

> ID：16060564
> 
> 赞同：0
> 
> 时间：2013-04-17T12:52:03.510
> 
> 标签：serialization, gson

你能告诉我如何使用 Gson 来提取在这个字符串中定义的两个不同的对象：http: [//json.parser.online.fr/](http://json.parser.online.fr/)

我尝试使用

```
gson.fromJson(json, SeedAttribs.class); 
```

和

```
gson.fromJson(json, SettingsAttribs.class); 
```

但两者都不起作用。我很惊讶为什么不。当特定对象时，我还需要一种方法来替换这个 json 字符串，例如。`SeedAttribs`变化。我需要一种方法来重写它，而`SettingsAttribs`根本不会改变。

如何才能做到这一点？

谢谢你的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:16:12.737

确保您的原始 JSON 字符串包含正确的格式。最好的方法是使用 GSON 序列化您的对象。这是代码：

```
public static void main(String[] args)
{
  Gson gson = new Gson();
  SettingsAttribs st = new SettingsAttribs();
  st.setField1("value1");
  st.setField2("value2");
  // report constructed object
  System.out.println("st: " + st);

  // serialize to json
  String json = gson.toJson(st, SettingsAttribs.class);
  System.out.println("json: " + json);

  // deserialize form json
  SettingsAttribs restoredSettings = gson.fromJson(json, SettingsAttribs.class);
  System.out.println("restoredSettings: " + restoredSettings);
} 
```

它编译并运行。它产生的输出：

```
st: SettingsAttribs [field1=value1, field2=value2]
json: {"field1":"value1","field2":"value2"}
restoredSettings: SettingsAttribs [field1=value1, field2=value2] 
```

和 SettingsAttribs 类：

```
 public class SettingsAttribs
  {
    private String field1;
    private String field2;

    public String getField1()
    {
      return field1;
    }

    public void setField1(String field1)
    {
      this.field1 = field1;
    }

    public String getField2()
    {
      return field2;
    }

    public void setField2(String field2)
    {
      this.field2 = field2;
    }

    @Override
    public String toString()
    {
      return "SettingsAttribs [field1=" + field1 + ", field2=" + field2 + "]";
    }
  } 
```

# asp.net - 如何在asp.net中维护session.sessionId而不在url中显示sessionId

> ID：16060565
> 
> 赞同：0
> 
> 时间：2013-04-17T12:52:04.417
> 
> 标签：asp.net, web-applications

我正在开发一个 asp.net web 项目，如果我使用

在网络配置中

然后加密的 sessionId 在 URL 中可见，但如果我将 cookieless 更改为 false，则加密的 sessionID 将从 url 中删除，但我会在每个请求上收到一个新的 session.sessionId

请帮助，以便在 url 中看不到加密的 session.sessionID，并且每个请求都应该有 SINGLE session.sessionId。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:05:12.533

如果您使用基于 cookie 的会话管理 ASP.NET 正在使用一些优化，这会导致每次创建新会话，直到有一些实际的会话数据要存储。`Session_Start`为避免这种情况，您可以通过以下方式将虚拟值放入会话中`Global.asax`：

```
protected void Session_Start(object sender, EventArgs e)
{
    Session["DUMMY_KEY"] = "DUMMY_VALUE";
} 
```

这样，会话 ID 将保持不变，直到发生会话超时。

# c++ - 带有 const 模板和 const 引用模板参数的 std::map

> ID：16060567
> 
> 赞同：1
> 
> 时间：2013-04-17T12:52:08.167
> 
> 标签：c++, templates, compilation

请看下面的代码。我在那里使用了 const 模板类型。第一行编译，其他两行不编译。为什么这两个不编译？第一个编译的 - 可以写吗？`std::map<const int, const bool>`和有什么区别`std::map<int, bool>`？

```
std::map<const int, const bool> mm;
std::map<const int&, const bool> mm;
std::map<const int, const bool&> mm; 
```

我知道这是一个奇怪的问题，但请帮忙澄清一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:57:42.013

为什么`const`看重？`map::value_type`是真的`std::pair<const Key, Value>`。您不能将引用存储在`any`容器中。

标准要求之一。

```
T& operator[](const key_type& x); 
```

> 要求：`key_type`shall be `CopyInsertable`and mapped_type shall be `DefaultInsertable`into *this。

但是，`const reference`不是`CopyInsertable`。

# durandal - JavaScript Durandal 子视图模型

> ID：16060570
> 
> 赞同：0
> 
> 时间：2013-04-17T12:52:13.950
> 
> 标签：durandal

我正在使用 DurandalJS。我的视图`welcome.html`有一个子视图`mymodule`：

```
welcome.html:    
<div>
            <!--ko compose: {model:'viewmodels/mymodule', activate: true}-->
            <!--/ko-->
</div> 
```

正如预期的那样，每次激活视图时都会调用该`activate`函数。但是当被停用时（我导航到另一个视图）功能和`mymodule``welcome.html``welcome.html``canDeactivate``devativate`没有在 mymodule.js 中调用。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:53:10.103

在 compose 绑定上使用 activate:true 不会管理视图模型的整个生命周期，只会使用该方法调用 activate 函数。（如您所见）。

要获取所有生命周期事件，您需要使用激活器来管理视图模型的生命周期。

您有多种选择来执行此操作，请参阅有关此事的 durandal 文档以获取更多信息。 [http://durandaljs.com/documentation/Hooking-Lifecycle-Callbacks/](http://durandaljs.com/documentation/Hooking-Lifecycle-Callbacks/) 具体来说，请查看该页面的“激活器回调”部分。

它基本上归结为使用路由器来激活您的视图模型或自己创建一个激活器。

# rhino - Rhino：检索行号和列号

> ID：16060572
> 
> 赞同：1
> 
> 时间：2013-04-17T12:52:15.260
> 
> 标签：rhino

我正在运行我自己的扩展 org.mozilla.javascript.ScriptableObject 的代理对象。我也有自己的扩展 org.mozilla.javascript.Function 的函数。

我的愿望是让这里抛出的任何异常返回行号，如果可能的话，返回它们在评估脚本中出现的列号。这可能吗？我只能访问上下文和范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T12:12:01.933

每当脚本抛出异常时，Rhino 都会抛出 RhinoException，它已经有行号和列号（以及更多）。但是，当您执行脚本时，您需要提供 Rhino 将使用的行号作为起始行号。发生异常/错误的实际行号将与此数字相关。所以有些东西是这样的：

```
//-- Define a simple test script to test if things are working or not.
String testScript = "function simpleJavascriptFunction() {" +
                    "  this line has syntax error." +
                    "}" +
                    "simpleJavascriptFunction();";
//-- Compile the test script.
Script compiledScript = Context.getCurrentContext().compileString(testScript, "My Test Script", 2, null);
//-- Execute the test script.
compiledScript.exec(Context.getCurrentContext(), anyJavascriptScope); 
```

在上面的代码中，起始行号设置为 2（调用 compileString() 的第三个参数）。执行此操作时，Rhino 将抛出一个 RhinoException，它将 lineNumber 属性设置为值 '3'（第一行被视为我们传递 2 的第二行 b/c）。

希望这可以帮助。

# html - 不同的图像 - 在响应式 Web 应用程序中调整大小、缩放 - 以适应不同的屏幕尺寸

> ID：16060576
> 
> 赞同：1
> 
> 时间：2013-04-17T12:52:22.480
> 
> 标签：html, image, css, resize, responsive-design

我有一个大小不断变化的图像（在每个不同的视图上从数据库中调用不同的图像）。

我想在响应式 Web 应用程序中显示图像。就像这样 - 在智能手机设备中，我希望它适合屏幕的大小 - 但要小一点（例如，下面 30% 的文本将可见，而图像将占据大约 70%屏幕）。

我已经构建了应用程序并且图像就在那里，我只是想确保不同的图像大小都能对各种浏览器做出良好的反应。移动而不是。

我如何缩放图像（显示的任何图像），以便无论调用什么图像，使用什么设备，图像都将适合小型设备、桌面或桌面或平板电脑视图图像将处于其正常大小（即，假设它不是很大且分辨率太高 - 在这种情况下，我希望它在其他视图中也按比例缩小）。

我该怎么办？

我需要使用 ImageMagick、picturefill、css、javascript（jquery？coffeescript？bootstrap）还是可以使用纯 html5？有什么先进的吗？帆布？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:30:44.300

您应该考虑使用[**CSS3 媒体查询**](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)。

您可以使用类似于下面的查询来定位智能手机，您可以根据正在查看您的网站的设备大小将相关图像定义为不同的大小，例如

```
@media screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
  #myImg { 
    width:70%;
  }
} 
```

然后，在您的常规网站的 CSS 文件中，您可以简单地将图像保留为全尺寸（正如我假设您已经完成的那样）。

通常最好将您的媒体查询 CSS 也放入外部样式表本身，因此您`<head>`可以包含以下内容：

```
<link rel="stylesheet" type="text/css" href="desktopStyle.css">
<link rel="stylesheet" media="screen and (min-device-width: 320px) and (max-device-width: 480px)" href="smartphoneStyle.css"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T21:01:02.883

I have used [picturefill](https://github.com/scottjehl/picturefill), and it's pretty cool.

If you need more fine-grained control over your classnames, or need load events for your images, you can also try my [jquery-pikshur](https://github.com/geekytime/jquery.pikshur) plugin.

# php - PHP - 在后台运行脚本

> ID：16060578
> 
> 赞同：1
> 
> 时间：2013-04-17T12:52:34.833
> 
> 标签：php, background

我必须在后台执行一个 php 脚本（test.php）。我试过这个，但它不工作：

```
<?
$cmd = "php /home/megad404/www/prove/test.php &> /dev/null &";
exec('/bin/bash -c "'.$cmd.'"',$output,$return);
if($return===0)
{
    echo 'Successful';
} 
else
{
    echo 'Unsuccessful';
}
?> 
```

它返回“成功”但它不执行 test.php

测试.php：

```
<?
file_put_contents(date("s"),"");
sleep(5);
file_put_contents(date("s"),"");
sleep(5);
file_put_contents(date("s"),"");
?> 
```

test.php 每 5 秒写入一个文件，它工作正常，除非我尝试使用第一个脚本在后台执行它。

会不会是服务器问题？还有另一种在后台运行脚本的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:56:31.707

使用 shell_exec 和 nohup

```
shell_exec("nohup php /home/megad404/www/prove/test.php > /dev/null & echo $!"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-08T09:42:19.357

使用 shell_exec 并给出 php 的绝对路径：

```
$output = shell_exec("nohup /usr/bin/php7.0 -f /home/megad404/www/prove/test.php &> /dev/null &"); 
```

只需确认服务器中 php 的绝对路径即可。例如，我使用的是 php 7.0，绝对路径是 /usr/bin/php7.0

此外，为您从代码运行的 php 文件授予可执行权限。

```
chmod +x /home/megad404/www/prove/test.php 
```

# android - 如何在 WhatsApp 等软键盘上绘制视图？

> ID：16060579
> 
> 赞同：34
> 
> 时间：2013-04-17T12:52:34.970
> 
> 标签：android, view, android-softkeyboard

我想知道如何`View`在 WhatsApp 和 Hangout 等键盘上进行添加。在聊天屏幕中，他们在打开的软键盘顶部插入表情视图。

![示例图像](https://i.stack.imgur.com/VPCyp.png)

有谁知道如何实现这种行为？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-13T13:13:47.173

好吧，我已经创建了一个[在这里](https://github.com/chiragjain/Emoticons-Keyboard)聊天的示例键盘......

在这里，我使用弹出窗口来显示弹出窗口，弹出窗口的高度由键盘高度动态计算

```
// Initially defining default height of keyboard which is equal to 230 dip
        final float popUpheight = getResources().getDimension(
                R.dimen.keyboard_height);
        changeKeyboardHeight((int) popUpheight);

// Creating a pop window for emoticons keyboard
    popupWindow = new PopupWindow(popUpView, LayoutParams.MATCH_PARENT,
            (int) keyboardHeight, false); 
```

使用此函数计算高度：

```
/**
 * Checking keyboard height and keyboard visibility
 */
int previousHeightDiffrence = 0;
private void checkKeyboardHeight(final View parentLayout) {

    parentLayout.getViewTreeObserver().addOnGlobalLayoutListener(
            new ViewTreeObserver.OnGlobalLayoutListener() {

                @Override
                public void onGlobalLayout() {

                    Rect r = new Rect();
                    parentLayout.getWindowVisibleDisplayFrame(r);

                    int screenHeight = parentLayout.getRootView()
                            .getHeight();
                    int heightDifference = screenHeight - (r.bottom);

                    if (previousHeightDiffrence - heightDifference > 50) {                          
                        popupWindow.dismiss();
                    }

                    previousHeightDiffrence = heightDifference;
                    if (heightDifference > 100) {

                        isKeyBoardVisible = true;
                        changeKeyboardHeight(heightDifference);

                    } else {

                        isKeyBoardVisible = false;

                    }

                }
            });

} 
```

使用所有这些东西，我可以制作出完美的重叠键盘......

然后我用 viewpager 和 gridview 为表情符号膨胀弹出窗口。

另外，我使用 spannable string 在列表视图和聊天窗口中显示这些表情符号

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-05-13T10:04:21.780

经过大量的研究和试错后，我找到了另一个类似于上面**Chirag Jain**的解决方案，但使用了自定义对话框。

```
 mDialogKeyboard = new Dialog(this,android.R.style.Theme_NoTitleBar);
    mDialogKeyboard.setContentView(R.layout.your_custom_layout);
    mDialogKeyboard.getWindow().setFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL,WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL);
    mDialogKeyboard.getWindow().setFlags(WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH,WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH);
    mDialogKeyboard.getWindow().setFlags(WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM,WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM);
    mDialogKeyboard.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);

    WindowManager.LayoutParams lp=mDialogKeyboard.getWindow().getAttributes();    
    lp.width=WindowManager.LayoutParams.MATCH_PARENT;
    lp.height=mSoftKeyboardHeight;
    lp.gravity=Gravity.BOTTOM | Gravity.LEFT;
    lp.dimAmount=0; 
```

尽管**Chirag Jain**的回答似乎更干净，但我将在此处发布此内容以获得另一种方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T15:03:02.483

据我所知，您可以利用其他应用程序，是的。我自己设计了这样一个应用程序。至于在诸如键盘之类的应用程序或任何其他特定应用程序上绘图，我想，您必须定义一个高度与键盘完全相同的布局。因此，这会因设备而异。所以，这是不可能的。

我仍然坚持我的观点，即 WhatsApp 只是在按下笑脸按钮时关闭软键盘并将其称为自己的片段。

如果您仍然想追求这一点，这里是您如何在其他应用程序上绘制一个“窗口”。这些应该是它的布局参数。

```
params = new WindowManager.LayoutParams(
                WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY,
                WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN,
                PixelFormat.TRANSLUCENT); 
```

尽管如此，您的宽度将更改为绝对像素值，因为您希望活动仅在键盘上。

如果我误解了这个问题，请纠正我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-29T05:24:19.470

我的想法是他们为微笑创建了自己的键盘，单击微笑图标或键盘图标时，他们会隐藏微笑键盘并显示普通键盘。whats app case 有两种情况 1）如果你不关注第一次editext然后你看不到显示键盘按钮，并且微笑键盘的高度与普通键盘完全相同，我们将只获得键盘高度在我们的视图布局更改后，意味着只有在显示键盘之后，这意味着他们正在创建自己的键盘.. 2）如果您关注编辑文本并单击微笑按钮，那么它将显示显示键盘按钮的选项请纠正我如果我对此不正确

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-09T11:54:34.973

我最近不得不实现一个位于软键盘上方的视图。@Chirag Jain 的解决方案几乎是正确的，但它不计入屏幕底部的系统按钮！这将使 NEXUS 6 等某些设备上的键盘高度不正确。此解决方案应适用于所有设备：

1）创建包含您的视图的布局

```
<RelativeLayout
        android:id="@+id/keyboard_info_container"
        android:layout_width="match_parent"
        android:layout_height="100dp"
        android:layout_alignParentBottom="true"
        android:background="@color/C12"
        android:padding="10dp"
        android:visibility="invisible">

           ....

    </RelativeLayout> 
```

2) 绑定视图

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    View rootview = inflater.inflate(R.layout.notifications_email_settings_fragment, container, false);

    ButterKnife.bind(this, rootview);

    checkKeyboardHeight(rootview); 
```

3) 键盘检查和查看边距设置

```
private void checkKeyboardHeight(final View parentLayout) {

    parentLayout.getViewTreeObserver().addOnGlobalLayoutListener(
            new ViewTreeObserver.OnGlobalLayoutListener() {

                int previousHeightDiffrence = 0;
                int systemBarHigh = 999999;

                @Override
                public void onGlobalLayout() {

                    Rect r = new Rect();
                    parentLayout.getWindowVisibleDisplayFrame(r);

                    int screenHeight = parentLayout.getRootView()
                            .getHeight();
                    int keyboardHeight = screenHeight - (r.bottom);

                    if(systemBarHigh > keyboardHeight) {
                        systemBarHigh = keyboardHeight;
                    }

                    if (keyboardHeight > 250) {

                        int keyboardHightWithoutSystemBar = keyboardHeight - systemBarHigh;
                        // no need to update when the keyboard goes down
                        if (previousHeightDiffrence != keyboardHightWithoutSystemBar) { // if (Math.abs(previousHeightDiffrence - keyboardHeight) > 10) {
                            adjustKeyboard(keyboardHightWithoutSystemBar);
                        }

                        keyboardInfoContainer.setVisibility(View.VISIBLE);
                        isKeyBoardVisible = true;
                        previousHeightDiffrence = keyboardHightWithoutSystemBar;

                    } else {
                        isKeyBoardVisible = false;
                        if (keyboardInfoContainer != null) {
                            keyboardInfoContainer.setVisibility(View.INVISIBLE);
                        }
                    }
                }
            });
}

private void adjustKeyboard(int keyboardHeight) {
    RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams) keyboardInfoContainer.getLayoutParams();
    lp.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
    lp.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
    lp.bottomMargin = keyboardHeight;
    keyboardInfoContainer.requestLayout();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-12T08:13:30.460

@jirkarrr，你为什么不像这样添加keyboardInfoContainer：

```
WindowManager wm = getWindowManager();
WindowManager.LayoutParams lps = new WindowManager.LayoutParams();
lps.x = 0; lps.y = keyboardHeight;
wm.addView(keyboardInfoContainer, lps); 
```

我按照您的代码执行，但它无法显示keyboardInfoContainer。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-01T08:59:55.723

我使用弹出窗口将视图放在键盘上：

```
public void showPopUpKeyboard() {
        mIsPopupVisible = true;
        // Initialize a new instance of LayoutInflater service
        LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);

        // Inflate the custom layout/view
        View customView = inflater.inflate(R.layout.popup_in_keyboard, null);

        mScrollView = (ScrollView) customView.findViewById(R.id.keyboard_layout_view);
        // Initialize a new instance of popup window
        mPopupWindow = new PopupWindow(
                customView,
                RelativeLayout.LayoutParams.MATCH_PARENT,
                RelativeLayout.LayoutParams.MATCH_PARENT
        );

        setSizeForSoftKeyboard();

        // Get a reference for the custom view close button
        Button closeButton = (Button) customView.findViewById(R.id.ib_close);

        // Set a click listener for the popup window close button
        closeButton.setOnClickListener((View view) -> {
                // Dismiss the popup window
                mIsPopupVisible = false;
                mPopupWindow.dismiss();
        });
        mPopupWindow.showAtLocation(mParentLayout, Gravity.CENTER, 0, 0);

    } 
```

然后我尝试知道键盘的高度：

```
mParentLayout.getViewTreeObserver().addOnGlobalLayoutListener(() -> {
                Rect r = new Rect();

                mParentLayout.getWindowVisibleDisplayFrame(r);

                int heightDiff = mParentLayout.getRootView().getHeight() - (r.bottom - r.top);
                if (heightDiff > 100) {
                    //enter your code here
                    if (mIsPopupVisible) {
                        keepKeyboard();
                        mIsPopupVisible = false;
                        mPopupWindow.dismiss();
                    }
                } else {
                    //enter code for hid
                }
        }); 
```

[您可以在 GitHub](https://github.com/thedeveloperworldisyours/AttachViewOverKeyboard)中查看本[教程](http://thedeveloperworldisyours.com/android/view-over-keyboard/)和本示例

# android - Android 自定义字体 - 用于 Actionbar、Toast、Dialogs 等系统组件

> ID：16060583
> 
> 赞同：1
> 
> 时间：2013-04-17T12:52:47.973
> 
> 标签：android, fonts

我正在将应用程序翻译成不受支持的语言 - 设备上缺少字体。所以我在应用程序中添加了字体并更改了所有 TextViews、EditTexts、Buttons 的字体。我还能够更改 WebView 中的字体。但现在我需要更改所有系统组件的字体：

1.  动作栏：

    *   标题下拉
    *   菜单
    *   ShareActionProvider
    *   行动项目
    *   溢出的操作项
2.  对话

3.  吐司
4.  设定画面

有没有办法改变这个组件的字体。可能所有人都有一些 TextView - 只是为了知道他们的 id 来找到他们。

请不要在 TextView 上发布有关更改字体的答案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:30:18.560

使用这样的自定义字体创建视图

**字体管理器.java**

```
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;

import android.content.Context;
import android.content.res.XmlResourceParser;
import android.graphics.Typeface;
import android.view.InflateException;

public class FontManager
{
    //Making FontManager a singleton class
    private static class InstanceHolder
    {
        private static final FontManager INSTANCE = new FontManager();
    }

    public static FontManager getInstance()
    {
        return FontManager.InstanceHolder.INSTANCE;
    }

    private FontManager()
    {
    }

    // Different tags used in XML file.
    private static final String TAG_FAMILY = "family";
    private static final String TAG_NAMESET = "nameset";
    private static final String TAG_NAME = "name";
    private static final String TAG_FILESET = "fileset";
    private static final String TAG_FILE = "file";

    // Different styles supported.
    private static final String STYLE_BOLD = "-Bold.ttf";
    private static final String STYLE_ITALIC = "-Italic.ttf";
    private static final String STYLE_BOLDITALIC = "-BoldItalic.ttf";

    private class FontStyle
    {
        int style;
        Typeface font;
    }

    private class Font
    {
        // different font-family names that this Font will respond to.
        List<String> families;

        // different styles for this font.
        List<FontStyle> styles;
    }

    private List<Font> mFonts;

    //private boolean isFamilySet = false;
    private boolean isName = false;
    private boolean isFile = false;

    // Parse the resId and initialize the parser.
    public void initialize(Context context, int resId)
    {
        XmlResourceParser parser = null;
        try
        {
            parser = context.getResources().getXml(resId);
            mFonts = new ArrayList<Font>();

            String tag;
            int eventType = parser.getEventType();

            Font font = null;

            do
            {
                tag = parser.getName();

                switch ( eventType )
                {
                    case XmlPullParser.START_TAG:
                        if ( tag.equals(TAG_FAMILY) )
                        {
                            // one of the font-families.
                            font = new Font();
                        }
                        else if ( tag.equals(TAG_NAMESET) )
                        {
                            // a list of font-family names supported.
                            font.families = new ArrayList<String>();
                        }
                        else if ( tag.equals(TAG_NAME) )
                        {
                            isName = true;
                        }
                        else if ( tag.equals(TAG_FILESET) )
                        {
                            // a list of files specifying the different styles.
                            font.styles = new ArrayList<FontStyle>();
                        }
                        else if ( tag.equals(TAG_FILE) )
                        {
                            isFile = true;
                        }
                        break;

                    case XmlPullParser.END_TAG:
                        if ( tag.equals(TAG_FAMILY) )
                        {
                            // add it to the list.
                            if ( font != null )
                            {
                                mFonts.add(font);
                                font = null;
                            }
                        }
                        else if ( tag.equals(TAG_NAME) )
                        {
                            isName = false;
                        }
                        else if ( tag.equals(TAG_FILE) )
                        {
                            isFile = false;
                        }
                        break;

                    case XmlPullParser.TEXT:
                        String text = parser.getText();
                        if ( isName )
                        {
                            // value is a name, add it to list of family-names.
                            if ( font.families != null )
                                font.families.add(text);
                        }
                        else if ( isFile )
                        {
                            // value is a file, add it to the proper kind.
                            FontStyle fontStyle = new FontStyle();
                            fontStyle.font = Typeface.createFromAsset(context.getAssets(), text);

                            if ( text.endsWith(STYLE_BOLD) )
                                fontStyle.style = Typeface.BOLD;
                            else if ( text.endsWith(STYLE_ITALIC) )
                                fontStyle.style = Typeface.ITALIC;
                            else if ( text.endsWith(STYLE_BOLDITALIC) )
                                fontStyle.style = Typeface.BOLD_ITALIC;
                            else
                                fontStyle.style = Typeface.NORMAL;

                            font.styles.add(fontStyle);
                        }
                }

                eventType = parser.next();

            }
            while ( eventType != XmlPullParser.END_DOCUMENT );

        }
        catch ( XmlPullParserException e )
        {
            throw new InflateException("Error inflating font XML", e);
        }
        catch ( IOException e )
        {
            throw new InflateException("Error inflating font XML", e);
        }
        finally
        {
            if ( parser != null )
                parser.close();
        }
    }

    public Typeface get(String family, int style)
    {
        for ( Font font : mFonts )
        {
            for ( String familyName : font.families )
            {
                if ( familyName.equals(family) )
                {
                    // if no style in specified, return normal style.
                    if ( style == -1 )
                        style = Typeface.NORMAL;

                    for ( FontStyle fontStyle : font.styles )
                    {
                        if ( fontStyle.style == style )
                            return fontStyle.font;
                    }
                }
            }
        }

        return null;
    }
} 
```

**res/values/Fonts.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="Fonts">
        <!-- using android's -->
        <attr name="android:textStyle" />
        <!-- our custom attribute -->
        <attr name="font" format="string" />
    </declare-styleable>
</resources> 
```

**res/xml/fonts.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<familyset>

    <!-- Arial -->
    <family>
        <nameset>
            <name>Arial</name>
        </nameset>

        <fileset>
            <file>fonts/Arial-Regular.ttf</file>
            <file>fonts/Arial-Bold.ttf</file>
            <file>fonts/Arial-Italic.ttf</file>
            <file>fonts/Arial-BoldItalic.ttf</file>
        </fileset>
    </family>

</familyset> 
```

**在assets/fonts**中添加字体

 **```
Arial-Bold.ttf
Arial-BoldItalic.ttf
Arial-Italic.ttf
Arial-Regular.ttf 
```

创建您的自定义视图***例如***：**FontableTextView.java**

```
import android.content.Context;
import android.content.res.TypedArray;
import android.graphics.Canvas;
import android.util.AttributeSet;
import android.widget.TextView;

public class FontableTextView extends TextView
{
    private static final String TAG = "FontableTextView";

    public FontableTextView(Context context)
    {
        super(context);
    }

    public FontableTextView(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        setCustomFont(context, attrs);
    }

    public FontableTextView(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
        setCustomFont(context, attrs);
    }

    /* 
     * @see android.widget.CompoundButton#onDraw(android.graphics.Canvas)
     */
    @Override
    protected void onDraw(Canvas canvas)
    {
        super.onDraw(canvas);
    }

    private void setCustomFont(Context ctx, AttributeSet attrs)
    {
        // Fonts work as a combination of particular family and the style. 
        TypedArray a = ctx.obtainStyledAttributes(attrs, R.styleable.Fonts);
        String family = a.getString(R.styleable.Fonts_font);
        int style = a.getInt(R.styleable.Fonts_android_textStyle, -1);
        a.recycle();
        // Set the typeface based on the family and the style combination.
        if ( family != null )
        {
            setTypeface(FontManager.getInstance().get(family, style));
        }
    }
} 
```

**在 MainActivity 开始时启动 FontManager 设置自定义字体**

```
FontManager.getInstance().initialize(getApplicationContext(), R.xml.fonts); 
```

**在 Layout XML 中使用自定义视图**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:custom="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <com.package.FontableTextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="20dip"
        android:text="FontableTextView"
        android:textStyle="bold"
        custom:font="Arial" />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:39:39.990

1.  对于操作栏：

使用 actionbar sherlock ( [http://actionbarsherlock.com/](http://actionbarsherlock.com/) ) 并自定义其代码：

在 com.actionbarsherlock.app.Actionbar 添加这两个抽象方法：

```
public abstract void setTitleTypeface(Typeface TF);
public abstract void setSubtitleTypeface(Typeface TF); 
```

并在 com.actionbarsherlock.internal.app.ActionBarImpl 中覆盖这些方法

```
@Override
public void setTitleTypeface(Typeface TF) {
    mActionView.setTitleTypeface(TF);     }

@Override
public void setSubtitleTypeface(Typeface TF) {
    mActionView.setSubtitleTypeface(TF);    } 
```

以及像这样的 com.actionbarsherlock.internal.app.ActionBarWrapper

```
@Override
public void setTitleTypeface(Typeface TF) {}
@Override
public void setSubtitleTypeface(Typeface TF) {} 
```

最后在 com.actionbarsherlock.internal.widget.ActionBarView 添加这些方法：

```
 public void setTitleTypeface(Typeface TF){
    mTitleView.setTypeface(TF);
}

public void setSubtitleTypeface(Typeface TF){
    mSubtitleView.setTypeface(TF);
} 
```

现在像这样在你的 SherlockActivity 中使用它：

```
 Typeface TF = Typeface.createFromAsset(getApplication().getAssets(),
                "Arial.ttf");
    getSupportActionBar().setTitleTypeface(TF); 
```

**确保没有更好的方法！！！**

**2.对于对话框，系统设置，......你应该像这样更改代码！****

# animation - 对于带有动画帧的图像，我该怎么做才能充分利用 png 压缩？

> ID：16060588
> 
> 赞同：0
> 
> 时间：2013-04-17T12:53:02.140
> 
> 标签：animation, compression, png, tiles, clipping

我正在寻找通过图像剪辑做一些 javascript 驱动的动画。这是我所说的一个例子：http: [//www.def-logic.com/_dhtml/freejack/hero1.gif](http://www.def-logic.com/_dhtml/freejack/hero1.gif)

我知道 png 在其压缩中使用了一种预测，那么像上面那样布置图像的最佳方式是什么，以便我从压缩中获得最大收益？当图像非常相似时，我特别感兴趣，比上面的图像更相似，因此由于冗余，压缩的可能性很大。

例如，是否有特定尺寸的瓷砖可以很好地工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:33:52.553

> 例如，是否有特定尺寸的瓷砖可以很好地工作？

并不真地。PNG 预测是严格局部的（它使用 3 个相邻像素），并且可以基于行选择预测（“过滤器”）策略。

这种冗余在 PNG 压缩中不是很容易检测到（实际上不是在 JPG 或几乎任何其他压缩中）。

如果您可以自由选择图块的分布（每行很少或很多），您可以尝试改变它，它可能会产生一些小的影响（拥有许多短线而不是几条长线的图像可以使过滤器更好机会选择不同的过滤器）但是，我再次打赌差异会非常小。

# c - O_NOBLOCK 标志会使文件 write() 失败吗？在什么情况下？

> ID：16060589
> 
> 赞同：1
> 
> 时间：2013-04-17T12:53:03.253
> 
> 标签：c, linux

我将大约 50k 字节的数据写入文件（存储在 USB 磁盘中并安装在 linux 2.6.37\. FAT32 上），该文件每 200 毫秒使用 O_NOBLOCK。write() 函数是否有返回 EAGAIN 的风险。如果是，为什么以及在什么情况下。我运行程序已经半小时了，一直没有报错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:20:19.733

正确但已删除的答案副本：

不会。该`O_NONBLOCK`标志不会影响使用常规文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:26:40.237

一些[参考](http://linux.die.net/man/3/write)，为了完整起见：

这仅适用于管道；对于常规文件，它被忽略。

> 如果 O_NONBLOCK 标志被清除，写入请求可能会导致线程阻塞，但在正常完成时它应返回 nbyte。
> 
> 如果设置了 O_NONBLOCK 标志，则应以不同方式处理 write() 请求，方法如下：
> 
> *   write() 函数不应阻塞线程。
> *   {PIPE_BUF} 或更少字节的写入请求应具有以下效果：如果管道中有足够的可用空间，write() 应传输所有数据并返回请求的字节数。否则，write() 将不传输任何数据并返回 -1，并将 errno 设置为 [EAGAIN]。
> *   超过 {PIPE_BUF} 个字节的写请求将导致以下情况之一：
>     *   当至少可以写入一个字节时，传输它可以传输的内容并返回写入的字节数。当读取之前写入管道的所有数据时，它应至少传输 {PIPE_BUF} 个字节。
>     *   当无法写入数据时，不传输数据，并返回 -1 并将 errno 设置为 [EAGAIN]。

# c# - 从多个项目中获取 SQL Server CE 路径

> ID：16060593
> 
> 赞同：1
> 
> 时间：2013-04-17T12:53:21.053
> 
> 标签：c#, web-config, sql-server-ce, servicestack, ormlite-servicestack

为了学习 ServiceStack，我正在开发一个基于 Northwind 数据库的 API（一个 SQL Server CE sdf 文件）。我的解决方案有 3 个项目：

*   北风数据。*数据库和 POCO 类*
*   Northwind.ServiceModel。*DTO 类*
*   北风.ServiceInstance。*服务等级*

访问数据的最佳方式是什么？目前数据库位于 Northwind.Data /App_Data 文件夹中。我可以从 Web.config 访问数据库路径并在 AppHost 类中读取它以创建 IDbConnection 工厂吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:42:13.290

**访问数据的最佳方式是什么？**
我不认为 OrmLite 支持 SQL Server CE，但是有[这个](https://gist.github.com/slyngelstat/1843193)。最好的方法可能是在您的服务中使用[SqlCeConnection 。](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlceconnection%28v=vs.100%29.aspx)

**我可以从 Web.config 访问数据库路径并在 AppHost 类中读取它以创建 IDbConnection 工厂吗？**
您应该能够将连接字符串添加到 Web.config 文件。

```
<add name="Test" connectionString="Data Source=C:\Northwind.sdf" /> 
```

如果我对 OrmLite 不支持 SQL CE 的看法是正确的，并且您希望 `IDbConnectionFactory`在服务中使用类似的语法，则可以考虑使用[DBProviderFactories](http://msdn.microsoft.com/en-us/library/wda6c36e%28v=vs.100%29.aspx)。

我能想到的最简单（不是最好）的事情就是做下面的事情。

**为 SqlCEConnection 创建一个“基本”工厂。这假设您的 Web.config 文件中有连接字符串**

```
public class SqlCeFactory
{
    public SqlCeConnection OpenConnection()
    {
        var conn = new SqlCeConnection(ConfigurationManager.ConnectionStrings["Test"].ToString());
        try
        {
            conn.Open();
            return conn;
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }
} 
```

**在您的 AppHost 中注册 SqlLCeFactory**

```
public override void Configure(Funq.Container container)
{
    container.Register<SqlCeFactory>(new SqlCeFactory());
} 
```

**将其注入您的服务中**

```
public class SourceService : ServiceStack.ServiceInterface.Service
{
    public SqlCeFactory DbFactory { get; set; }

    public object Get(SomeRequest request)
    {
        using (var con = DbFactory.OpenConnection())
        {
            //use SqlCeConnection()
        }

        //more code
    }
} 
```

# export - Dynamics AX 4.0 导出表单

> ID：16060594
> 
> 赞同：0
> 
> 时间：2013-04-17T12:53:32.393
> 
> 标签：export, axapta, x++

我创建了一个导出 AOT（应用程序对象树）对象的方法。它可以工作，但是当我导出 Forms-Treenodes 时找不到它。

该方法是一种服务器方法，它在 BatchServer 上运行。

我的想法是每 2 小时将对象导出为 xpo 文件。通过备份，我可以跟踪代码更改。

```
void run(str Path)
{
    List                _ValueList = new List(Types::String);
    Counter             _ListCounter;
    ListIterator        _ListIterator;
    str                 _RootFolder;
    str                 _FileName;
    str                 _FolderName;
    TreeNode            _TreeNode;
    TreeNode            _InnerTreeNode;
    TreeNodeIterator    _TreeNodeIt;
    FileIoPermission    _Perm;
    #define.ExportMode("w")
    ;

    _RootFolder = Path;
    //Objektbaum definition
    _ValueList.addEnd("Forms");
    _ValueList.addEnd("Reports");
    _ValueList.addEnd("Queries");
    _ValueList.addEnd("Classes");
    _ValueList.addEnd("Macros");
    _ValueList.addEnd("Jobs");
    _ValueList.addEnd(@"Data Dictionary\Tables");
    _ValueList.addEnd(@"Data Dictionary\Maps");
    _ValueList.addEnd(@"Data Dictionary\Views");
    _ValueList.addEnd(@"Data Dictionary\Extended Data Types");
    _ValueList.addEnd(@"Data Dictionary\Base Enums");

    _ListIterator = new ListIterator(_ValueList);
    info(strfmt("RootExportPath: %1",_RootFolder));

    // durch die zuvor definierte Liste laufen
    while(_ListIterator.more())
    {
        try
        {
            info(strfmt(@"\%1",_ListIterator.value()));
            //Haupttreenode objekt laden
            _TreeNode = TreeNode::findNode(strfmt(@"\%1",_ListIterator.value()));

            if (_TreeNode != null)
            {
                //Splitten des HauptNodes
                _TreeNodeIt = _TreeNode.AOTiterator();
                _InnerTreeNode = _TreeNodeIt.next();
                //Durchlaufen der SubNodes
                info(strfmt("Object found in Node: %1 ",_TreeNode.AOTchildNodeCount()));
                while(_InnerTreeNode)
                {
                    //Pfad und Filename bereitstellen
                    _FolderName = strfmt(@"%1\%2",_RootFolder,strreplace(_ListIterator.value(),@" ","_"));
                    _FileName = strfmt(@"\%1.xpo",strreplace(_InnerTreeNode.AOTname(),@" ","_"));
                    //Fileperms setzen ("w") = Write (OverWrite)
                    _Perm = new FileIoPermission(_FolderName+_FileName , #ExportMode);
                    if (_Perm == null)
                    {
                        return;
                    }

                    _Perm.assert();

                    try
                    {
                        if(!WinApi::pathExists(_FolderName))
                        {
                            if(WinApi::createDirectory(_FolderName))
                            {
                                throw error(strfmt("Pfad konnte nicht erstellt werden %1\n",_FolderName));
                            }
                            if(!WinApi::pathExists(_FolderName))
                            {
                                throw error(strfmt("Fehler beim erstellen des Pfades %1\n",_FolderName));
                            }
                        }
                        //Export in definierten Filename
                        if(WinApi::fileLocked(_FolderName+_FileName))
                        {
                                throw error("File ist ReadOnly\n");
                        }
                        _InnerTreeNode.treeNodeExport(_Foldername+_FileName);
                     }
                     catch
                     {
                        error(strfmt(@"xpo File %1 konnte nicht geschrieben werden\n",_FolderName+_Filename));
                        throw error("Abbruch des Jobs\n");
                     }
                    CodeAccessPermission::revertAssert();

                   _InnerTreeNode = _TreeNodeIt.next();
                }
                // BP deviation documented.
                _TreeNode.treeNodeExport(_FileName);
            }
            else
            {
                error(strfmt("TreeNode empty %1",_ListIterator.value()));
            }
         }
         catch
         {
            throw error("Fehler in der Verarbeitungsroutine\n");
         }
        _ListIterator.next();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T08:05:14.873

Forms 文件夹是否存在于您的导出位置？

您正在尝试在检查文件夹是否存在并创建它之前声明对文件夹的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T13:29:26.120

批处理服务器无法导出表单，因为表单的 ar 不是 loadet。这有点奇怪，但批处理服务器只调用 AOT 中的类层......表单是它的分层顶部，等等不可导出。

# ember.js - Ember.js and CKEDITOR conflict: Cannot read property 'type' of undefined

> ID：16060595
> 
> 赞同：1
> 
> 时间：2013-04-17T12:53:42.987
> 
> 标签：ember.js, ckeditor, wysiwyg

There is a conflict between Ember.JS and CKEDITOR. The toolbar (modal windows) doesn't work if I am using Ember.js. If I try to push e.g. the paste button then I get the following error message and the window is whited out with no modal window.

```
Uncaught TypeError: Cannot read property 'type' of undefined 
```

![ckeditor toolbar not working](https://i.stack.imgur.com/nMjJN.png)

If I remove Ember.Js then CKeditor works fine.

See a live demo of the problem on jsfiddle [http://jsfiddle.net/HEhMq/13/](http://jsfiddle.net/HEhMq/13/)

This is how I'm embedding the CKEDITOR to my ember templates:

```
App.HTMLTextArea = Ember.TextArea.extend({
    didInsertElement: function() {
        this._super();
        var self = this;
        var elementId = self.get('elementId');

        var edit = CKEDITOR.replace( elementId, {
            extraPlugins : 'autogrow',
            autoGrow_maxHeight : 800,
            // Remove the Resize plugin as it does not make sense to use it in conjunction with the AutoGrow plugin.
            removePlugins : 'resize'
        });

        edit.on('blur', function(e) {
                if (e.editor.checkDirty()) {
                        self.set('value', edit.getData() );
                }
        });
    }
}); 
```

With this code the editor loads up fine and the Ember values are updated. It's just the toolbar buttons that are not working.

Anybody had the same problem?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T19:56:22.560

Luckily, it turns out that we've already fixed this issue: [http://dev.ckeditor.com/ticket/10265](http://dev.ckeditor.com/ticket/10265) We did that just few days ago and new version (4.1.1) which is planned for next week will contain this patch. In fact, master on CKEditor repo is already frozen for the release, so you can use it because it's very unlikely that something is going to change.

# html - 背景颜色和子菜单在 IE 中不断切换悬停状态

> ID：16060602
> 
> 赞同：0
> 
> 时间：2013-04-17T12:54:06.980
> 
> 标签：html, css, internet-explorer

这一直是我这一周的祸根。基本上我有一个纯 CSS 下拉菜单，它结合了标准列表和内容框作为子菜单。我在 IE 中遇到了麻烦，其中每个 LI 都有一个显示块标签，所以应该填充父 LI。所以我可以悬停并单击 LI 中的任何位置，链接悬停，活动状态处于打开状态。

如果我将鼠标悬停在文本上，则在 IE 中发生的情况是应用悬停状态样式没有问题，但是如果我将鼠标从文本上移开但仍在 LI 内，悬停会不断应用然后删除（请参阅[dev.altech-英国网站](http://dev.altech-uk.com)）。

这有点烦人，因为子菜单一直在闪烁，而且您可能会错过子菜单。这些都不会发生在 FF、chrome、opera、safari 中。

下面是与此相关的 CSS 代码：

```
div.navBG ul.navMenu {width: 1000px; margin: 0 auto; display: block; padding: 0; height: 35px; text-align: center;}
div.navBG ul.navMenu > li {display: inline-block; list-style: none; position: relative; margin: 0 -4px; padding: 0;}
div.navBG ul.navMenu > li:hover:after {bottom: 0; border: solid transparent; content: " "; height: 0; width: 0; position: absolute; z-index: 999;}
div.navBG ul.navMenu > li:hover:after {border-color: rgba(146, 200, 236, 0); border-bottom-color: #92C8EC; border-width: 10px; left: 50%; margin-left: -10px;}

div.navBG ul.navMenu > li > a {display: block; line-height: 35px; text-align: center; text-decoration: none; font-size: 11px; color: #FFF; height: 100%; width: 100%;}
div.navBG ul.navMenu > li > a:hover {background: -moz-linear-gradient(top,  #162d54 13%, #002d5e 28%, #0f233d 61%); background: -webkit-gradient(linear, left top, left bottom, color-stop(13%,#162d54), color-stop(28%,#002d5e), color-stop(61%,#0f233d)); background: -webkit-linear-gradient(top,  #162d54 13%,#002d5e 28%,#0f233d 61%); background: -o-linear-gradient(top,  #162d54 13%,#002d5e 28%,#0f233d 61%); background: -ms-linear-gradient(top,  #162d54 13%,#002d5e 28%,#0f233d 61%); background: linear-gradient(to bottom,  #162d54 13%,#002d5e 28%,#0f233d 61%); -ms-filter: "progid:DXImageTransform.Microsoft.gradient( startColorstr='#162d54', endColorstr='#0f233d',GradientType=0 )";}
/*div.navBG ul.navMenu > li:hover {background: -moz-linear-gradient(top,  #162d54 13%, #002d5e 28%, #0f233d 61%); background: -webkit-gradient(linear, left top, left bottom, color-stop(13%,#162d54), color-stop(28%,#002d5e), color-stop(61%,#0f233d)); background: -webkit-linear-gradient(top,  #162d54 13%,#002d5e 28%,#0f233d 61%); background: -o-linear-gradient(top,  #162d54 13%,#002d5e 28%,#0f233d 61%); background: -ms-linear-gradient(top,  #162d54 13%,#002d5e 28%,#0f233d 61%); background: linear-gradient(to bottom,  #162d54 13%,#002d5e 28%,#0f233d 61%); -ms-filter: "progid:DXImageTransform.Microsoft.gradient( startColorstr='#162d54', endColorstr='#0f233d',GradientType=0 )";}*/
div.navBG ul.navMenu > li div.subMenuContainer {max-height: 0; overflow: hidden; padding: 0; position: absolute; top: 35px; visibility: hidden; z-index: 999; width: 270px; -webkit-transition: all 0.2s ease-in-out; -moz-transition: all 0.2s ease-in-out; -o-transition: all 0.2s ease-in-out; -ms-transition: all 0.2s ease-in-out; transition: all 0.2s ease-in-out; box-shadow: 0 0 8px rgba(0, 0, 0, 0.3);}
div.navBG ul.navMenu > li .rightout {right: -8px;}
div.navBG ul.navMenu > li div.subMenuContainer > ul {background: #92C8EC; list-style: none; margin: 0; padding: 0; white-space: no-wrap; width: 270px; position: relative;}
div.navBG ul.navMenu > li div.subMenuContainer:after {z-index: 9999; bottom: 0; border: solid transparent; content: " "; height: 0; width: 0; position: absolute; border-bottom-color: #92C8EC; border-width: 15px; left: 50%; margin-left: -15px; border-color: rgba(146, 200, 236, 0);}
div.navBG ul.navMenu > li div.subMenuContainer > ul li {display: block; margin: 0; position: relative; vertical-align: text-top; font-size: 11px;}
div.navBG ul.navMenu > li div.subMenuContainer > ul li h4 {font-weight: 700; background: url(/img/sitewide/icon.png) no-repeat 3px center; color: #003975; font-size: 14px; padding: 7px 0 5px 42px; margin: 0; text-align: left;}
div.navBG ul.navMenu > li div.subMenuContainer > ul li a {color: #FFF; display: block; padding-left: 20px; line-height: 35px; text-decoration: none; -webkit-transition: all 0.2s ease-in-out; -moz-transition: all 0.2s ease-in-out; -o-transition: all 0.2s ease-in-out; -ms-transition: all 0.2s ease-in-out; transition: all 0.2s ease-in-out; font-size: 1em !important; text-align: left;}
div.navBG ul.navMenu > li div.subMenuContainer > ul li a:hover {background: #3C7FAB !important;}
div.navBG ul.navMenu > li:hover div.subMenuContainer {visibility: visible;}
div.navBG ul.navMenu > li:hover .solution {max-height: 300px;}
div.navBG ul.navMenu > li:hover .machines {max-height: 600px;}

/*div.navBG ul.navMenu > li div.navMenuItemPane a.cp, 
div.navBG ul.navMenu > li div.navMenuItemPane a.cp:active, 
div.navBG ul.navMenu > li div.navMenuItemPane a.cp:visited {position: absolute; top: 0; left: 0; bottom: 0; right: 0;}*/
div.navBG ul.navMenu > li:hover div.navMenuItemPaneContainer {max-height: 300px; z-index: 99; height: auto; visibility: visible;}
div.navBG ul.navMenu > li div.navMenuItemPaneContainer {background: #92C8EC; box-shadow: 0 0 8px rgba(0, 0, 0, 0.3); width: 540px; visibility: hidden; left: 0; max-height: 0; overflow: hidden; padding: 0; position: absolute; top: 35px; z-index: 99; -webkit-transition: all 0.2s ease-in-out; -moz-transition: all 0.2s ease-in-out; -o-transition: all 0.2s ease-in-out; -ms-transition: all 0.2s ease-in-out; transition: all 0.2s ease-in-out;} 
div.navBG ul.navMenu > li div.navMenuItemPaneContainer > ul {width: 540px; margin: 0; padding: 0;}
div.navBG ul.navMenu > li div.navMenuItemPaneContainer > ul li {display: inline; float: left; font-size: 11px; vertical-align: text-top; position: relative;}
div.navBG ul.navMenu > li div.navMenuItemPaneContainer > ul li a {color: #FFF; display: block; padding-left: 20px; line-height: 35px; text-decoration: none; -webkit-transition: all 0.2s ease-in-out; -moz-transition: all 0.2s ease-in-out; -o-transition: all 0.2s ease-in-out; -ms-transition: all 0.2s ease-in-out; transition: all 0.2s ease-in-out; font-size: 1em !important; text-align: left;}
div.navBG ul.navMenu > li div.navMenuItemPaneContainer > ul li a:hover {background: #3C7FAB !important;}
div.navBG ul.navMenu > li div.navMenuItemPaneContainer h4 {font-weight: 700; background: url(/img/sitewide/icon.png) no-repeat 3px center; color: #003975; font-size: 14px; padding: 7px 0 5px 42px; margin: 0; text-align: left;}
#double li {width: 50%;} 
```

这里的任何帮助将不胜感激

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:57:10.913

删除过滤器：progid...等。从 div.navBG ul.navMenu >li > a:hover

# java - 如何使用超类调用泛型方法

> ID：16060605
> 
> 赞同：0
> 
> 时间：2013-04-17T12:54:12.957
> 
> 标签：java

我有一些两个子类共有的方法，所以我把它们放在抽象超类中，但是有一种方法使用具有两个不同值的变量，所以我很困惑如何实现该方法，代码如下：

StandardMember 类在开始时得到了这个方法，它有自己不同的值，**residualCredit=30**

```
public void borrowHolding(int holdingId)
            throws InsufficientCreditException, MultipleBorrowingException {
        // TODO Auto-generated method stub

        System.out.println("Hello");
        Holding tempHolding = Library.libCollection.getHolding(holdingId);
        if (Library.libCollection.getHolding(holdingId) != null) {
            if (tempHolding.isOnLoan()) {
                System.out.println("Can not be issued Currently on Load");
            } else {
                System.out.println("Can be issued");
                remainingCredit-=tempHolding.getDefaultLoanFee();
                System.out.println(getRemainingCredit());
                tempHolding.setLoanCheck(true);
                currentlyBorrowedHolding.put(holdingId, tempHolding);
                System.out.println(remainingCredit);
                System.out.println(holdingId);
            }
        } 
```

PremiumMember 类获得了相同的方法，但**剩余信用的值是 45**，而它们共有的所有方法都在实现**Member 接口**的 AbstractMember 类中实现。但是当我尝试从其他类调用这些方法时，我必须像这样在库类中初始化 AbstractMember 的对象

```
Member member = new StandardMember(); 
```

这非常糟糕，因为我不能使用 StandardMember 对象来运行 PremiumMember 对象的相同方法版本。所以，要么我应该创建 PremiumMember 类的新对象，要么我不知道该怎么做。但是如果我创建了两个对象，那么这个成员对象将被用在 borrowHolding 方法中，该方法基本上是 Library Class 中的级联方法，它反过来调用 Member Interface 中的 borrowHolding 方法：

```
public void borrowHolding(int holdingId) throws InsufficientCreditException, MultipleBorrowingException {
        if(libCollection.holdingMap==null){
            System.out.println("Collection is Empty");
        }
        if(libCollection.holdingMap.containsKey(holdingId))
        member.borrowHolding(holdingId);        
    } 
```

问题是我不能创建两个对象，因为在运行时我只能调用一个方法。所以帮我弄清楚如何在抽象类中实现这个方法，这样程序就会检测到它应该创建哪个对象的差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:03:52.763

如果我理解正确，你有一个`Member`抽象类，它的字段`remainingCredit`必须`30`在一个子类和`45`另一个子类中。

使用受保护的构造函数。

```
public abstract class Member {

    private int remainingCredit;
    // Other members
    // getters and setters

    protected Member(String memId, String memName, int remainingCredit) {
        this.memId = memId;
        this.memName = memName;
        this.remainingCredit = remainingCredit;
    }
}

public StandardMember extends Member {

    public StandardMember(String memId, String memName) {
        super(memId, memName, 30);
    }
}

public PremiumMember extends Member {

    public PremiumMember(String memId, String memName) {
        super(memId, memName, 45);
    }
} 
```

# html - 内部 DIV 似乎有更大的底边距

> ID：16060608
> 
> 赞同：0
> 
> 时间：2013-04-17T12:54:18.257
> 
> 标签：html, margin

我不明白为什么在这个简单的代码中，我的 .slot 或 .card 类在底部的边界/距离似乎比在顶部的边界更大。

提前致谢，

JsFiddle：http: [//jsfiddle.net/Tighttempo/LgeAf/](http://jsfiddle.net/Tighttempo/LgeAf/)

```
<div id="hand">
    <div class="card" id="card1"></div>
    <div class="card" id="card2"></div>
    <div class="card" id="card3"></div>
    <div class="card" id="card4"></div>
</div>

<div id="playfield">
    <div class="slot" id="slot1"></div>
    <div class="slot" id="slot2"></div>
    <div class="slot" id="slot3"></div>
    <div class="slot" id="slot4"></div>
</div> 
```

CSS：

```
#hand{
    text-align: center;
    width: 320px;
    border: solid black 3px;
    padding: 5px;
}

.card{
    display: inline-block;
    width: 60px;
    height: 90px;
    border-radius: 5%;
    background: teal;
    margin: 0px 5px 0px 5px;
}

#playfield{
    width: 320px;
    text-align: center;
    border: solid black 3px;
    padding: 5px;

}

.slot{
    display: inline-block;
    width: 60px;
    height: 90px;
    border-radius: 5%;
    border: dashed grey 2px;
    margin: 0px 5px 0px 5px;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:01:06.457

内联块元素很棘手 - 因为在文档流中定位它们时它们不会被视为块元素。它们的位置和间距受控制文本的 CSS 属性的影响，例如行高、字间距、字母间距和字体大小。

如果您在父容器中设置 font-size`#card`和`#playfield`, 为 0，您将删除额外的底部边距。见小提琴 - [http://jsfiddle.net/teddyrised/GwqcV/](http://jsfiddle.net/teddyrised/GwqcV/)

```
#hand, #playfield {
    font-size: 0;
} 
```

这种方法的缺点是，如果您使用相对字体大小（如 ems），则必须在子元素中重新声明字体大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:11:43.060

如果您对设置 font-size:0 感到不满意，那么这是我个人更喜欢的解决方案。

Display:inline-block 很棘手，并且边距有奇怪的问题。我个人所做的是，我使用浮动而不是内联块。看到这个：

```
.card{
    width: 60px;
    height: 90px;
    border-radius: 5%;
    background: teal;
    margin: 0px 10px;
    float:left;
}

.slot{
    width: 60px;
    height: 90px;
    border-radius: 5%;
    border: dashed grey 2px;
    margin: 0px 8px;
    float:left;
} 
```

我所做的是，我将**float:left**添加到您的 .slot 和 .card 中，然后创建一个新类**.cls(clear:both)**并将其应用到 div 结构中。看看这是否有帮助。

[http://jsfiddle.net/LgeAf/3/](http://jsfiddle.net/LgeAf/3/)

# php - 我们如何更改 imagettftext 函数中的字体不透明度和阴影？

> ID：16060613
> 
> 赞同：1
> 
> 时间：2013-04-17T12:54:22.343
> 
> 标签：php

我正在给定模板上创建一个文本图像，其中所有参数都是动态的，它工作正常！并创建图像，我的 php 脚本是，

```
<?php
// To fetch template info from database
$template_query = mysql_query("SELECT * FROM templates WHERE templateID = '".$fetch['templateID']."'");
$temp_data = mysql_fetch_assoc($template_query);
//create and save images
$temp = '../'. $temp_data['blank_templates'];
//check image type
$image_extension = strtolower(substr(strrchr($temp_data['blank_templates'], "."), 1));

    $im = imagecreatefromjpeg($temp);

$black = hexdec($temp_data['font_color']);
// Replacing path by your own font path
$font = '..'.$temp_data['font_file_upload'];

// Break it up into pieces 125 characters long
$no_of_characters_line = $temp_data['no_of_characters_line'];
$lines = explode('|', wordwrap($message, $no_of_characters_line, '|'));
// Starting Y position and X position
$y = $temp_data['position_from_top'];
$x = $temp_data['position_from_left'];
$font_size = $temp_data['font_size'];
$rotation_angle = $temp_data['rotation'];
$line_height = $temp_data['line_height'];

foreach ($lines as $line)
{
    imagettftext($im, $font_size,$rotation_angle, $x, $y, $black, $font, $line);
    // Increment Y so the next line is below the previous line
    $y += $line_height;
}
$id = uniqid();
$save = '../messagesimage/'.$id. '.'.$image_extension;
$path_save = substr($save, 3);
// Using imagepng() results in clearer text compared with imagejpeg()
        imagejpeg($im,$save);

imagedestroy($im); 
```

这正在创造像..的形象！![在此处输入图像描述](https://i.stack.imgur.com/U56f2.jpg)

现在我想添加动态更改字体不透明度和阴影的功能，可以吗？如果是，那么请帮我这样做..

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-17T06:04:16.943

哇，你已经等了一段时间了。

为了使您的文本具有一定的透明度，您需要使用 Alpha 通道定义文本颜色。

```
$black = imageallocatecoloralpha(0,0,0,16); 
```

给你的文字一些阴影

```
$shadow = imageallocatecoloralpha(0,0,0,64); // more transparent
imagettftext($im, $font_size,$rotation_angle, $x+1, $y+1, $shadow, $font, $line);
imagettftext($im, $font_size,$rotation_angle, $x, $y, $black, $font, $line); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-18T17:22:40.523

甚至更晚，但似乎当前的答案是不正确的。

要定义具有透明度的颜色，请使用以下函数[`imagecolorallocatealpha()`](http://php.net/manual/en/function.imagecolorallocatealpha.php)：

```
$black = imagecolorallocatealpha($image, 0, 0, 0, 50); 
```

就像迈克尔指出的那样，阴影非常简单（只需使用正确的函数名称，并确保添加图像对象）。但是，如果您想要一个看起来更阴暗的阴影，请将其模糊一下：

```
$shadow = imagecolorallocatealpha($im, 0, 0, 0, 50);
//Draw shadow text
imagettftext($im, $font_size, 0, $x, $y, $shadow, $fontn, $text);
//Blur
imagefilter($im, IMG_FILTER_GAUSSIAN_BLUR);
//Draw text
imagettftext($im, $font_size, 0, $x, $y, $white, $fontn, $text); 
```

将上述阴影方法应用于图像后，其呈现类似于以下内容：

[![示例图像](https://i.stack.imgur.com/ltZdz.png)](https://i.stack.imgur.com/ltZdz.png)

# c# - 每次打开 pdf 时都会收到“打开方式”提示

> ID：16060624
> 
> 赞同：0
> 
> 时间：2013-04-17T12:54:54.513
> 
> 标签：c#, winforms, itextsharp

C# 2008 Express，Winforms。使用 iTextSharp，每次我从存储在服务器上的模板创建 pdf 时，我都会收到“打开方式”提示，询问我想使用什么程序来打开 pdf ..这显然是 Acrobat 并且是打开任何程序的默认程序.pdf 如果我从存储在本地驱动器上的 pdf 执行相同操作，我不会收到消息，当我打开任何 pdf 时也不会收到此消息。由于我要分发这个程序，我不希望用户每次都收到这个提示。

```
string pdfTemplate = @"\\server\files\Temp\invoice.pdf";
string newFile = @"\\server\files\Temp\completed_invoice";

PdfReader pdfReader = new PdfReader(pdfTemplate);
PdfStamper pdfStamper = new PdfStamper(pdfReader, new FileStream(newFile, FileMode.Create));
AcroFields pdfFormFields = pdfStamper.AcroFields;
pdfFormFields.SetField("Name", invoiceName);
pdfFormFields.SetField("Date", invoiceDate);
pdfFormFields.SetField("Address", invoiceAddress);
pdfFormFields.SetField("City", invoiceCity);
pdfFormFields.SetField("State", invoiceState);
pdfFormFields.SetField("Zip", invoiceZip);
pdfStamper.FormFlattening = false;
pdfStamper.Close();
Process.Start(newFile); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:00:23.810

尝试

```
string pdfTemplate = @"\\server\files\Temp\invoice.pdf";
string newFile = @"\\server\files\Temp\completed_invoice";

PdfReader pdfReader = new PdfReader(pdfTemplate);
PdfStamper pdfStamper = new PdfStamper(pdfReader, new FileStream(newFile, FileMode.Create));
AcroFields pdfFormFields = pdfStamper.AcroFields;
pdfFormFields.SetField("Name", invoiceName);
pdfFormFields.SetField("Date", invoiceDate);
pdfFormFields.SetField("Address", invoiceAddress);
pdfFormFields.SetField("City", invoiceCity);
pdfFormFields.SetField("State", invoiceState);
pdfFormFields.SetField("Zip", invoiceZip);
pdfStamper.FormFlattening = false;
pdfStamper.Close();

ProcessStartInfo start = new ProcessStartInfo(newFile); //or any other file name.
start.ErrorDialog = false;
start.UseShellExecute = false;
Process.Start(start); 
```

# python - Python：通过字符串中的名称访问结构字段

> ID：16060625
> 
> 赞同：11
> 
> 时间：2013-04-17T12:54:56.783
> 
> 标签：python, ip, structure, field, scapy

在 Scapy 中，我想比较任意两个数据包`a`和`b`. 此字段列表是预定义的，例如：

```
fieldsToCompare = ['tos', 'id', 'len', 'proto'] #IP header 
```

通常我会单独做：

```
if a[IP].tos == b[IP].tos:
   ... do stuff... 
```

有没有办法从字符串列表中访问这些数据包字段，包括每个字符串的名称？像：

```
for field in fieldsToCompare:
    if a[IP].field == b[IP].field:
         ... do stuff... 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-17T12:59:08.157

您可以使用[`getattr()`](http://docs.python.org/2/library/functions.html#getattr). 这些行是等效的：

```
getattr(x, 'foobar')
x.foobar 
```

[`setattr()`](http://docs.python.org/2/library/functions.html#setattr)是它的对应物。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T13:00:46.113

我想你正在寻找`getattr()`. 尝试...

```
for field in fieldsToCompare:
    if getattr(a[IP], field) == getattr(b[IP], field):
         ... do stuff... 
```

# java - 外部服务器上 squash TM 中的主机名错误

> ID：16060626
> 
> 赞同：0
> 
> 时间：2013-04-17T12:54:57.500
> 
> 标签：java, squash, server-name

我在 squash TM 中报告错误时遇到问题。这是与我安装了 squash 的服务器名称有关的问题。我在外部服务器上有它。在应用程序的一个地方，我得到了错误的 URL，如下所示：

```
http://localhost:8040/squash/executions/49/info 
```

它应该是：

```
http://**my_server**/squash/executions/49/info 
```

在壁球生成的 stderrout.log 文件中，我发现错误：

```
org.tuckey.web.filters.urlrewrite.utils.ServerNameMatcher DEBUG: looking for hostname match on current server name localhost 
```

如何将此服务器的名称更改为正确的名称，而不是“localhost”。我正在查看壁球的每个配置文件，但找不到。有任何想法吗？

编辑：我不得不承认，当我在 localhost 上安装 squash 时，一切都是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T13:11:05.217

如果这只发生在特定的地方，它可能是一个错误。我建议您将问题发布到[Squash TM 论坛](http://www.squashtest.org/index.php/en/support-99807/forum-squash)。

# javascript - 为什么我的 javascript 参数没有“通过引用”传递？

> ID：16060628
> 
> 赞同：1
> 
> 时间：2013-04-17T12:55:00.157
> 
> 标签：javascript

我确定我在这里遗漏了一些明显的东西，但我希望 changeMe 方法的参数“通过引用”传递 - 换句话说，对函数内部参数的更改将更改函数外部的变量.

以下是在 jsfiddle 中运行的，使用 Chrome 的 F12 开发人员工具来显示控制台输出。[http://jsfiddle.net/fzEpa/](http://jsfiddle.net/fzEpa/)

```
var object1 = { Property1: 'Value1' };
changeMe(object1);
console.log(object1);

function changeMe(refToObject) {
    console.log(refToObject);
    refToObject = { Property1: 'Value2' };
    console.log(refToObject);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T12:56:10.123

它是通过引用传递的，但它是对对象的引用，而不是对`object1`变量的引用（这也是对对象的引用）。

您正在用对新对象的引用覆盖对对象的引用。

这使对原始对象的原始引用保持不变。

要修改对象，您可以执行以下操作：

```
function changeMe(refToObject) {
    refToObject.Property1 = 'Value2';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T12:56:45.350

对对象的引用作为参数值传递。然而：

```
refToObject = { Property1: 'Value2' }; 
```

此时，您将失去对以前引用的对象的引用，`refToObject`因为您正在分配此变量以引用不同的对象。

现在，如果您要编辑`refToObject`的属性而不是丢弃以前的对象引用，您的代码将按预期工作（如@Quentin 的回答中首先解释的那样）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:01:01.543

如果您熟悉 C++，这将等同于执行以下操作：

```
void f(int* ref) {
    ref = new int(3);
}
int* a = new int(5);
f(a);
printf("%d",a); //Prints 5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T13:03:45.407

您正在尝试重新定义属性 1，因此它不起作用。为了使用通过引用传递，ypu 必须`refToObject.Property1='Value2'`在 **ChangeMe()**函数中以这种方式进行。参考this以更好地理解[在Javascript中通过引用传递变量](https://stackoverflow.com/questions/7744611/pass-variables-by-reference-in-javascript)

# asp.net - Export data from database

> ID：16060630
> 
> 赞同：0
> 
> 时间：2013-04-17T12:55:01.953
> 
> 标签：asp.net, .net, sql-server, export

I have few tables in database that are having huge amount of data. My need is

1 : To query data exist for more than one year.

2 : Export and archive them to some file.

3 : At any point of time I can insert those data back to database.

The data may or may not contain COMMA, so not sure if I should export them to csv format.

**Which is the best file format I should go for ??**

**What should be the file size limitation here ??**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:31:07.047

尝试使用`bcp`命令行实用程序，它在处理大型数据集的导入/导出时非常有效：

> bcp "select * from [YourTable]" queryout data.dat -n -S YourServer -d "YourDatabase" -T

-T 表示受信任的身份验证。-n 表示本机格式，因此您无需担心数据类型、逗号等。但是，这确实意味着您无法在编辑器中查看数据；它仅可用于加载回 SQL Server。如果你想要 CSV 格式，你可以使用 -c 代替。

要重新导入：

> bcp "[YourTable]" in data.dat -n -S YourServer -d "YourDatabase" -T

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:23:53.387

此脚本将指定表中的行导出到任何表结构的 INSERT 语句。因此，您只需要复制结果并在 SSMS 的 sql 文档中运行它 -

```
DECLARE 
      @TableName SYSNAME
    , @ObjectID INT
    , @IsImportIdentity BIT = 1

DECLARE [tables] CURSOR READ_ONLY FAST_FORWARD LOCAL FOR 
    SELECT 
          '[' + s.name + '].[' + t.name + ']'
        , t.[object_id]
    FROM (
        SELECT DISTINCT
              t.[schema_id]
            , t.[object_id]
            , t.name
        FROM sys.objects t WITH (NOWAIT)
        JOIN sys.partitions p WITH (NOWAIT) ON p.[object_id] = t.[object_id]
        WHERE p.[rows] > 0
            AND t.[type] = 'U'
    ) t
    JOIN sys.schemas s WITH (NOWAIT) ON t.[schema_id] = s.[schema_id]
    WHERE t.name IN ('<your table name>')

OPEN [tables]

FETCH NEXT FROM [tables] INTO 
      @TableName
    , @ObjectID

DECLARE 
      @SQLInsert NVARCHAR(MAX)
    , @SQLColumns NVARCHAR(MAX)
    , @SQLTinyColumns NVARCHAR(MAX)

WHILE @@FETCH_STATUS = 0 BEGIN

    SELECT 
          @SQLInsert = ''
        , @SQLColumns = ''
        , @SQLTinyColumns = ''

    ;WITH cols AS 
    (
        SELECT 
              c.name
            , datetype = t.name
            , c.column_id
        FROM sys.columns c WITH (NOWAIT)
        JOIN sys.types t WITH (NOWAIT) ON c.system_type_id = t.system_type_id AND c.user_type_id = t.user_type_id
        WHERE c.[object_id] = @ObjectID
            AND (c.is_identity = 0 OR @IsImportIdentity = 1)
            AND c.is_computed = 0
            AND t.name NOT IN ('xml', 'geography', 'geometry', 'hierarchyid')
    )
    SELECT 
          @SQLInsert = 'INSERT INTO ' + @TableName + ' (' + STUFF((
            SELECT ', [' + c.name + ']'
            FROM cols c
            ORDER BY c.column_id
            FOR XML PATH, TYPE, ROOT).value('.', 'NVARCHAR(MAX)'), 1, 2, '') + ')'
        , @SQLTinyColumns = STUFF((
            SELECT ', ' + c.name
            FROM cols c
            ORDER BY c.column_id
            FOR XML PATH, TYPE, ROOT).value('.', 'NVARCHAR(MAX)'), 1, 2, '')
        , @SQLColumns = STUFF((SELECT CHAR(13) +
            CASE 
                WHEN c.datetype = 'uniqueidentifier' 
                    THEN ' + '', '' + ISNULL('''''''' + CAST([' + c.name + '] AS VARCHAR(MAX)) + '''''''', ''NULL'')' 
                WHEN c.datetype IN ('nvarchar', 'varchar', 'nchar', 'char', 'varbinary', 'binary') 
                    THEN ' + '', '' + ISNULL('''''''' + CAST(REPLACE([' + c.name + '], '''''''', '''''''''''' ) AS NVARCHAR(MAX)) + '''''''', ''NULL'')' 
                WHEN c.datetype = 'datetime'
                    THEN ' + '', '' + ISNULL('''''''' + CONVERT(VARCHAR, [' + c.name + '], 120) + '''''''', ''NULL'')' 
                ELSE 
                ' + '', '' + ISNULL(CAST([' + c.name + '] AS NVARCHAR(MAX)), ''NULL'')'
            END
            FROM cols c
            ORDER BY c.column_id
            FOR XML PATH, TYPE, ROOT).value('.', 'NVARCHAR(MAX)'), 1, 10, 'CHAR(13) + '', ('' +')

    DECLARE @SQL NVARCHAR(MAX) = '    
    SET NOCOUNT ON;
    DECLARE 
          @SQL NVARCHAR(MAX) = ''''
        , @x INT = 1
        , @count INT = (SELECT COUNT(1) FROM ' + @TableName + ')

    IF EXISTS(
        SELECT 1
        FROM tempdb.dbo.sysobjects
        WHERE ID = OBJECT_ID(''tempdb..#import'')
    )
        DROP TABLE #import;

    SELECT ' + @SQLTinyColumns + ', ''RowNumber'' = ROW_NUMBER() OVER (ORDER BY ' + @SQLTinyColumns + ')
    INTO #import
    FROM ' + @TableName + ' 

    WHILE @x < @count BEGIN

        SELECT @SQL = ''VALUES '' + STUFF((
        SELECT ' + @SQLColumns + ' + '')''' + '
        FROM #import 
        WHERE RowNumber BETWEEN @x AND @x + 9
        FOR XML PATH, TYPE, ROOT).value(''.'', ''NVARCHAR(MAX)''), 1, 2, CHAR(13) + '' '') + '';''

        PRINT(''' + @SQLInsert + ''')
        PRINT(@SQL)

        SELECT @x = @x + 10

    END'

    EXEC sys.sp_executesql @SQL

    FETCH NEXT FROM [tables] INTO 
          @TableName
        , @ObjectID

END

CLOSE [tables]
DEALLOCATE [tables] 
```

在输出中你会得到这样的东西（AdventureWorks.Person.Address）：

```
INSERT INTO [Person].[Address] ([AddressID], [AddressLine1], [AddressLine2], [City], [StateProvinceID], [PostalCode], [rowguid], [ModifiedDate])
VALUES 
  (1, '1970 Napa Ct.', NULL, 'Bothell', 79, '98011', '9AADCB0D-36CF-483F-84D8-585C2D4EC6E9', '2002-01-04 00:00:00')
, (2, '9833 Mt. Dias Blv.', NULL, 'Bothell', 79, '98011', '32A54B9E-E034-4BFB-B573-A71CDE60D8C0', '2003-01-01 00:00:00')
, (3, '7484 Roundtree Drive', NULL, 'Bothell', 79, '98011', '4C506923-6D1B-452C-A07C-BAA6F5B142A4', '2007-04-08 00:00:00')
, (4, '9539 Glenside Dr', NULL, 'Bothell', 79, '98011', 'E5946C78-4BCC-477F-9FA1-CC09DE16A880', '2003-03-07 00:00:00')
, (5, '1226 Shoe St.', NULL, 'Bothell', 79, '98011', 'FBAFF937-4A97-4AF0-81FD-B849900E9BB0', '2003-01-20 00:00:00')
, (6, '1399 Firestone Drive', NULL, 'Bothell', 79, '98011', 'FEBF8191-9804-44C8-877A-33FDE94F0075', '2003-03-17 00:00:00')
, (7, '5672 Hale Dr.', NULL, 'Bothell', 79, '98011', '0175A174-6C34-4D41-B3C1-4419CD6A0446', '2004-01-12 00:00:00')
, (8, '6387 Scenic Avenue', NULL, 'Bothell', 79, '98011', '3715E813-4DCA-49E0-8F1C-31857D21F269', '2003-01-18 00:00:00')
, (9, '8713 Yosemite Ct.', NULL, 'Bothell', 79, '98011', '268AF621-76D7-4C78-9441-144FD139821A', '2006-07-01 00:00:00')
, (10, '250 Race Court', NULL, 'Bothell', 79, '98011', '0B6B739D-8EB6-4378-8D55-FE196AF34C04', '2003-01-03 00:00:00'); 
```

**更新：**

此脚本在任何表结构的输出窗口中将指定表中的行导出为 CSV 格式。

```
DECLARE 
      @TableName SYSNAME
    , @ObjectID INT

DECLARE [tables] CURSOR READ_ONLY FAST_FORWARD LOCAL FOR 
    SELECT 
          '[' + s.name + '].[' + t.name + ']'
        , t.[object_id]
    FROM (
        SELECT DISTINCT
              t.[schema_id]
            , t.[object_id]
            , t.name
        FROM sys.objects t WITH (NOWAIT)
        JOIN sys.partitions p WITH (NOWAIT) ON p.[object_id] = t.[object_id]
        WHERE p.[rows] > 0
            AND t.[type] = 'U'
    ) t
    JOIN sys.schemas s WITH (NOWAIT) ON t.[schema_id] = s.[schema_id]
    WHERE t.name IN ('<your table name>')

OPEN [tables]

FETCH NEXT FROM [tables] INTO 
      @TableName
    , @ObjectID

DECLARE 
      @SQLInsert NVARCHAR(MAX)
    , @SQLColumns NVARCHAR(MAX)
    , @SQLTinyColumns NVARCHAR(MAX)

WHILE @@FETCH_STATUS = 0 BEGIN

    SELECT 
          @SQLInsert = ''
        , @SQLColumns = ''
        , @SQLTinyColumns = ''

    ;WITH cols AS 
    (
        SELECT 
              c.name
            , datetype = t.name
            , c.column_id
        FROM sys.columns c WITH (NOWAIT)
        JOIN sys.types t WITH (NOWAIT) ON c.system_type_id = t.system_type_id AND c.user_type_id = t.user_type_id
        WHERE c.[object_id] = @ObjectID
            AND c.is_computed = 0
            AND t.name NOT IN ('xml', 'geography', 'geometry', 'hierarchyid')
    )
    SELECT 
          @SQLTinyColumns = STUFF((
            SELECT ', [' + c.name + ']'
            FROM cols c
            ORDER BY c.column_id
            FOR XML PATH, TYPE, ROOT).value('.', 'NVARCHAR(MAX)'), 1, 2, '')
        , @SQLColumns = STUFF((SELECT CHAR(13) +
            CASE 
                WHEN c.datetype = 'uniqueidentifier' 
                    THEN ' + '';'' + ISNULL('''' + CAST([' + c.name + '] AS VARCHAR(MAX)) + '''', ''NULL'')' 
                WHEN c.datetype IN ('nvarchar', 'varchar', 'nchar', 'char', 'varbinary', 'binary') 
                    THEN ' + '';'' + ISNULL('''' + CAST(REPLACE([' + c.name + '], '''', '''''''') AS NVARCHAR(MAX)) + '''', ''NULL'')' 
                WHEN c.datetype = 'datetime'
                    THEN ' + '';'' + ISNULL('''' + CONVERT(VARCHAR, [' + c.name + '], 120) + '''', ''NULL'')' 
                ELSE 
                ' + '';'' + ISNULL(CAST([' + c.name + '] AS NVARCHAR(MAX)), ''NULL'')'
            END
            FROM cols c
            ORDER BY c.column_id
            FOR XML PATH, TYPE, ROOT).value('.', 'NVARCHAR(MAX)'), 1, 10, 'CHAR(13) + '''' +')

    DECLARE @SQL NVARCHAR(MAX) = '    
    SET NOCOUNT ON;
    DECLARE 
          @SQL NVARCHAR(MAX) = ''''
        , @x INT = 1
        , @count INT = (SELECT COUNT(1) FROM ' + @TableName + ')

    IF EXISTS(
        SELECT 1
        FROM tempdb.dbo.sysobjects
        WHERE ID = OBJECT_ID(''tempdb..#import'')
    )
        DROP TABLE #import;

    SELECT ' + @SQLTinyColumns + ', ''RowNumber'' = ROW_NUMBER() OVER (ORDER BY ' + @SQLTinyColumns + ')
    INTO #import
    FROM ' + @TableName + ' 

    WHILE @x < @count BEGIN

        SELECT @SQL = STUFF((
        SELECT ' + @SQLColumns + ' + ''''' + '
        FROM #import 
        WHERE RowNumber BETWEEN @x AND @x + 9
        FOR XML PATH, TYPE, ROOT).value(''.'', ''NVARCHAR(MAX)''), 1, 1, '''')

        PRINT(@SQL)

        SELECT @x = @x + 10

    END'

    EXEC sys.sp_executesql @SQL

    FETCH NEXT FROM [tables] INTO 
          @TableName
        , @ObjectID

END

CLOSE [tables]
DEALLOCATE [tables] 
```

在输出中你会得到这样的东西（AdventureWorks.Person.Person）：

```
1;EM;0;NULL;Ken;J;Sánchez;NULL;0;92C4279F-1207-48A3-8448-4636514EB7E2;2003-02-08 00:00:00
2;EM;0;NULL;Terri;Lee;Duffy;NULL;1;D8763459-8AA8-47CC-AFF7-C9079AF79033;2002-02-24 00:00:00
3;EM;0;NULL;Roberto;NULL;Tamburello;NULL;0;E1A2555E-0828-434B-A33B-6F38136A37DE;2001-12-05 00:00:00
4;EM;0;NULL;Rob;NULL;Walters;NULL;0;F2D7CE06-38B3-4357-805B-F4B6B71C01FF;2001-12-29 00:00:00
5;EM;0;Ms.;Gail;A;Erickson;NULL;0;F3A3F6B4-AE3B-430C-A754-9F2231BA6FEF;2002-01-30 00:00:00
6;EM;0;Mr.;Jossef;H;Goldberg;NULL;0;0DEA28FD-EFFE-482A-AFD3-B7E8F199D56F;2002-02-17 00:00:00 
```

# linux - 无法通过串行 COM 传输数据包

> ID：16060631
> 
> 赞同：0
> 
> 时间：2013-04-17T12:55:03.623
> 
> 标签：linux, ubuntu, serial-port, linux-device-driver

我在 Intel Panel PC 上安装了 Linux Ubuntu。我的代码没有运行，我使用cutecom检查了数据包传输。它确实成功地打开了端口，但没有传输数据。我把串口插到我自己的电脑上，它可以工作。我想到一件事，错误可能来自于检查 BIOS，如何分配 ttyS0-3。Bios 显示 S0 到 11 或更高。在 AVAILABLE 模式下，我将 S3 设置为 RESERVED 并再次通过 cutecom 检查。不得转让！另一方面，我不认为应该安装驱动程序来区分 PC COM，它应该自动识别它们。

```
/input0
[    0.416691] ACPI: Power Button [PWRB]

[    0.416846] input: Power Button as /devices/LNXSYSTM:00/LNXPWRBN:00/input/input1

[    0.416859] ACPI: Power Button [PWRF]

[    0.443708] serial8250: ttyS0 at I/O 0x3f8 (irq = 4) is a 16550A

[    0.557357] serial8250: ttyS1 at I/O 0x2f8 (irq = 3) is a 16550A

[    0.708888] serial8250: ttyS2 at I/O 0x3e8 (irq = 4) is a 16550A

[    0.872588] serial8250: ttyS3 at I/O 0x2e8 (irq = 3) is a 16550A

[    1.015669] 00:06: ttyS0 at I/O 0x3f8 (irq = 4) is a 16550A

[    1.036607] 00:07: ttyS1 at I/O 0x2f8 (irq = 3) is a 16550A

[    1.060599] 00:08: ttyS2 at I/O 0x3e8 (irq = 11) is a 16550A

[    1.084589] 00:09: ttyS3 at I/O 0x2e8 (irq = 10) is a 16550A

[    1.085551] agpgart-intel 0000:00:00.0: detected gtt size: 262144K total, 262144K 

[   14.956323] serio: Serial port ttyS1

[   14.994250] serio: Serial port ttyS1

[   15.032073] input: Elo Serial TouchScreen as /devices/pnp0/00:07/tty/ttyS1/serio2/input 
```

dmesg 显示的内容有什么问题吗？我应该使用 setirq 更改 irqs 吗？如果是，请给我写一个详细信息的例子。

# cookies - Is there any difference between HttpContext.Current.Request and HttpContext.Request?

> ID：16060632
> 
> 赞同：1
> 
> 时间：2013-04-17T12:55:04.233
> 
> 标签：cookies, asp.net-mvc-4, httpcontext

If I want to access Request object in controller action I need to write `HttpContext.Request`, whereas if I want to access the same object in MVC view, I need to write `HttpContext.Current.Request`. Is there any difference between them? The problem I am facing is that, the cookies which I set through `HttpContext.Response.Cookies.Add` in controller action are not being retrieved in `HttpContext.Current.Request.Cookies` collection in an MVC view, though I can see those cookies through javascript.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:25:02.600

您必须`HttpContext.Request`在控制器和`HttpContext.Current.Request`视图中编写的原因是因为您编写的控制器继承了抽象类`Controller`，该抽象类具有名为`HttpContext`type的属性`HttpContextBase`。`HttpContext`然后，该视图使用为您提供当前请求的 httpcontext 对象的密封类。

> 它们之间有什么区别吗？

`HttpRequest`不，因为两者都为您提供当前请求的相同对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:54:32.230

除非我弄错了，否则您会在响应中写入一个 cookie，但是在发出下一个请求之前，该 cookie 在请求中不可用（即，您必须再次加载相同的页面或新页面才能使其读取曲奇饼）。Cookie 不是在控制器和视图之间共享信息的好方法，您应该使用 ViewData 或 ViewBag。

此外，您必须确保在已经输出任何内容后不写入 cookie，这`Response.Write`是不推荐的原因之一。

javascript 工作的原因是它在客户端而不是服务器上读取 cookie。

# flash - ReferenceError：错误 #1056：无法在 mx.messaging.messages.RemotingMessage 上创建属性 [###]

> ID：16060637
> 
> 赞同：1
> 
> 时间：2013-04-17T12:55:21.387
> 
> 标签：flash, apache-flex, blazeds

尝试在 Producer 上发送消息时，我收到 BlazeDS / Flash 的间歇性错误。

```
 ReferenceError: Error #1056: Cannot create property remotePassword on mx.messaging.messages.RemotingMessage.
 ReferenceError: Error #1056: Cannot create property remoteUsername on mx.messaging.messages.RemotingMessage.
 ReferenceError: Error #1056: Cannot create property parameters on mx.messaging.messages.RemotingMessage. 
```

错误不会一直出现我找不到重现它的行为 - 当它出现时，客户端没有收到消息。

这是我发送它的方式

```
 var rm:RemotingMessage = new RemotingMessage();
     rm.body = "some message";
    _producer = new Producer();
    _cs = new ChannelSet();
    _ch = new AMFChannel(config.AMF_ID, config.AMF_URL);
    _cs.addChannel(_ch);

    _producer.channelSet = _cs;
    _producer.destination = config.AMF_FEEDID;
    _producer.subtopic = config.SubTopic;
    _producer.addEventListener(MessageEvent.MESSAGE, processMessage);
    _producer.addEventListener(MessageFaultEvent.FAULT, processMessageFault);
    _producer.send(rm); 
```

如果需要，我可以提供更多信息 - 在此先感谢

# mercurial - How to undo "hg qnew"?

> ID：16060643
> 
> 赞同：9
> 
> 时间：2013-04-17T12:55:48.907
> 
> 标签：mercurial, undo, mercurial-queue, backout

I issued `hg qnew` without realizing that it includes any outstanding changes into the patch. I'd like to back that out and pick only specific changes using `hg qrecord`. How can I undo `qnew`?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T07:28:12.307

您的答案肯定有效——您可以使用较新的 Mercurial`hg strip --keep`来避免执行导入步骤：

```
$ hg strip --keep .
$ hg qdelete patch-name 
```

该`--keep`标志使 strip 在工作时忽略工作副本，也就是说，它会删除提交（就像`hg qpop`会做的那样），但不会撤消对文件的更改。剥离后，您的系列中仍然有补丁（未应用），然后您可以将其删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:09:13.647

我在[这里](http://www.mentby.com/Group/mercurial/how-to-back-out-qnew.html)找到了答案：

```
hg qpop
hg import --no-commit .hg/patches/patch-name
hg qdelete patch-name 
```

如果您知道，请添加更好的方法。

**更新：**根据奥尔多的回答，还有另一种方法：

```
hg qnew test
# We can undo the above qnew as:
hg qrefresh -X '*'
hg qpop -f
hg qdelete test 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T09:05:43.237

如果您只想撤消`qnew`保留所有本地更改的最新内容，一种选择是：

```
qcrefresh 123
hg qpop -f
hg qdelete <name of the patch> 
```

请注意，这`123`只是一个随机字符串：您告诉 mercurial`123`在当前补丁中仅包含（希望不存在）文件。Mercurial 的较新版本在您发出时会发出关于事实`123`文件不存在的警告，但这正是我们想要的。

如果要保留当前路径中的某些更改，可以使用[crecord](https://bitbucket.org/edgimar/crecord/wiki/Home)[扩展](http://mercurial.selenic.com/wiki/CrecordExtension)`qcrefresh`中的命令，它允许以图形方式选择要包含在当前补丁中的更改。您需要从 Bitbucket[下载](http://bitbucket.org/edgimar/crecord/get/tip.zip)它，提取存档并在以下位置进行配置： `.hgrc`

```
[extensions]
crecord = <path/to/crecord/package> 
```

# c# - 使用 InternetExplorerClass 时发生互操作服务错误

> ID：16060645
> 
> 赞同：4
> 
> 时间：2013-04-17T12:55:57.387
> 
> 标签：c#, asp.net, iis, office-interop

我正在尝试将 asp.net Web 服务应用程序部署到 IIS 7.5。该应用程序使用 .Net 框架 3.5。开发机器是win 7 64bit。我使用以下代码片段创建 HTML，然后使用 Amyuni Document Converter 450 将其转换为 pdf。

```
private InternetExplorer internetExplorer = new InternetExplorerClass(); 
```

当我在本地开发服务器中部署应用程序时，它可以完美运行，但是当我使用本地 iis 服务器部署它时，它会出现以下错误。任何原因..我使用了 impersonate='true'

```
System.Runtime.InteropServices.COMException (0x80080005): Retrieving the COM class factory for component with CLSID {0002DF01-0000-0000-C000-000000000046} failed due to the following error: 80080005. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-29T12:47:41.640

您必须更改 DComConfig 中的属性，即。请按照以下步骤操作：

开始->运行->dcomcnfg->组件服务>计算机>我的电脑

右键单击我的电脑并选择属性。在安全 COM 选项卡上设置默认身份验证级别和默认模拟级别。

# mysql - can't make junction and group by

> ID：16060650
> 
> 赞同：0
> 
> 时间：2013-04-17T12:56:10.740
> 
> 标签：mysql, group-by, junction

I have two tables :

```
GererLocationAppart(IdAppartL, MatriculeEmploye)
Employe(MatriculeEmploye, PrenomEmploye, NomEmploye, NumeroTelephoneEmploye) 
```

I would like to get a table wich contains "PrenomEmploye", "NomEmploye" and a column "Id AppartL". This last column should have the number of lines that every "MatriculeEmploye" are referring to. I know that i should do a mixture between

```
Select Distinct PrenomEmploye, NomEmploye, IdAppartL
From Employe E1, GererLocationAppart G1
Where E1.MatriculeEmploye=G1.MatriculeEmploye; 
```

And

```
SELECT MatriculeEmploye, COUNT(IdAppartL)
FROM GererLocationAppart
GROUP BY MatriculeEmploye; 
```

But i don't know how.. I try :

```
Select Distinct PrenomEmploye, NomEmploye
From Employe
Where MatriculeEmploye in
(SELECT MatriculeEmploye, COUNT(IdAppartL)
FROM GererLocationAppart
GROUP BY MatriculeEmploye); 
```

But I get :

```
ERROR 1241 (21000): Operand should contain 1 column(s) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:59:54.397

```
SELECT
 E1.PrenomEmploye
,E1.NomEmploye
,E1.IdAppartL
,COUNT(G1.IdAppartL) as CountMatriculeEmploye
From Employe E1
JOIN GererLocationAppart G1 ON E1.MatriculeEmploye=G1.MatriculeEmploye
GROUP BY E1.MatriculeEmploye; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:01:23.273

之后的子查询`IN`必须只返回 1 列。您要返回`MatriculeEmploye, COUNT(IdAppartL)`2 列。您的查询应该是这样的：

```
Select e.PrenomEmploye, e.NomEmploye, COUNT(g.IdAppartL)
From Employe e 
  INNER JOIN GererLocationAppart g ON g.MatriculeEmploye=e.MatriculeEmploye
GROUP BY 1,2; 
```

请注意，此查询将合并具有相同 (Prenom, Nom) 对的员工，因此您可能还希望将 e.MatriculeEmploye 添加到 SELECT 和 GROUP BY 子句（`GROUP BY 1,2,3`如果您将 select 更改为`SELECT e.MatriculeEmploye, e.Prenom, ...`）。

# asp.net - Adding rounded corners to GridView?

> ID：16060654
> 
> 赞同：1
> 
> 时间：2013-04-17T12:56:17.793
> 
> 标签：asp.net, html, css

I want to make the corners of my GridView curvy. I tried [THIS](https://stackoverflow.com/a/14358761/2064292) but it it gave a border extending towards the right handside. Also it would be just great if i can make each and every cell of the GridView curvy, if its not too hard to achieve. This is my GridView:

```
<asp:GridView  ID="GridView1" runat="server" AutoGenerateColumns="False" 
                        onrowdatabound="GridView1_RowDataBound" BackColor="White" 
                        BorderColor="#CCCCCC" BorderStyle="None" BorderWidth="1px" CellPadding="3" >
....something... </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:58:39.417

这里有三种方法都涉及样式表。

```
.GridView1 {
-moz-border-radius: 15px;
border-radius: 15px;
} 
```

对于 CSS

或在您的对象上

```
style= "-moz-border-radius: 15px;border-radius: 15px;" 
```

或在 JQuery 中

```
$("#GridView1").css("border-radius","15px").css("-moz-border-radius","15px"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:27:56.590

这就像一个魅力.... [http://www.aspforums.net/Threads/749379/How-to-give-GridView-rounded-corners/Replies/1#Replies](http://www.aspforums.net/Threads/749379/How-to-give-GridView-rounded-corners/Replies/1#Replies)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:01:43.497

放`CssClass="round"`一个`GridView1`

```
.round
{
 border: 1px solid black;
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
border-radius: 5px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T13:03:24.980

您好，您可以尝试使用 CSS

```
<div class="corners">
<asp:GridView> </asp:GridView>
</div> 
```

和CSS

```
.corners { border: 1px solid green; -moz-border-radius: 8px; border-radius: 8px;overflow: hidden;-webkit-border-radius: 8px;} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-28T05:51:32.563

这是您可以将圆角添加到 ASP.NET GridView 的方法：

```
<style>
    :root{--gv-border-radius: 7px;}
    .rcgv
    {
        border-radius: var(--gv-border-radius);
        border-width: 0 !important;
    }
    .rcgv th:first-child
    {
        border-top-left-radius: var(--gv-border-radius);
    }
    .rcgv th:last-child
    {
        border-top-right-radius: var(--gv-border-radius);
    }
    .rcgv tr:last-child td:first-child
    {
        border-bottom-left-radius: var(--gv-border-radius);
    }
    .rcgv tr:last-child td:last-child
    {
        border-bottom-right-radius: var(--gv-border-radius);
    }
</style>
<asp:GridView ID="GridView1" CssClass="rcgv" runat="server" ShowFooter="true" ></asp:GridView> 
```

希望这将帮助您为 GridView 添加时尚的边框半径。

# android - What does this Google Play APK publish error message mean?

> ID：16060655
> 
> 赞同：238
> 
> 时间：2013-04-17T12:56:17.797
> 
> 标签：android, google-play

I'm trying to publish a new version of my Android app to Google Play and get the following error?

> This configuration cannot be published for the following reason(s): Version 1 is not served to any device configuration: all devices that might receive version 1 would receive version 4

I don't understand it. What does it mean?

![enter image description here](https://i.stack.imgur.com/1Ma2n.png)

* * *

## 回答 #1

> 赞同：304
> 
> 时间：2013-07-29T22:21:16.507

当我在短时间内发布了两个 APK（版本 3 和版本 4）时，这发生在我身上。单击版本 3 旁边的下拉列表中的“停用”似乎可以修复它。

我的猜测是，这是一条措辞非常糟糕的错误消息，意思是“您的原始 APK 尚未发布到所有更新服务器，因此其中一些可能会完全错过该版本”。但这有点猜测。

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2013-12-03T15:04:55.793

出于某种原因，当您上传新的 APK 而不立即点击“发布”（您可能第一次点击保存草稿）时，**Google 认为您想同时发布 BOTH apk**。

当您有多个用于不同配置的 APK 时，通常需要这样做（例如：一个用于 android 2.x 的版本和另一个用于 3+ 的版本，或者一个用于平板电脑的版本和另一个用于手机的版本等......）

但是，在您的情况下，您只是上传升级，并且希望它替换您以前的 APK。

**解决**：

1.  点击右上角的切换到高级模式
2.  点击*Action -> Move* on the OLD APK 并选择“ *Deactivate* ”
3.  该错误应该会消失，您应该会在“其他 APKS”中看到您的旧 apk，并且新的 apk 已准备好发布。
4.  只需单击发布以使您的更改生效并等待它们传播。

谷歌警告具有误导性。希望这能澄清一下。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-08-14T22:07:04.317

我用我的应用解决了同样的问题。我必须从 1.0 版上传到 2.0 版。- 我已经上传了 Beta 版的 v2.0。- 上传时，我已停用 PROD 中的 v1.0。- 下一步是将 v2.0 从 BETA 移至 PROD。- 然后，PUBLISH 按钮被激活以完成该过程。我希望它有帮助。！

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-01-27T13:01:59.053

@Chris 的解决方案是正确的。但消息的真正含义是：

1.  版本 1 和版本 4 具有相同的配置：相同的 API 级别，相同的屏幕分辨率......基本上清单中的所有内容......

2.  所以这意味着任何可以安装版本的设备也可以安装版本4。

3.  现在一切都清楚了：由于 version4 具有更高的 versionCode，因此每个设备都会收到 version4 而不是 version1。

没有任何意义仍然将版本 1 “投入生产”。在任何情况下，任何设备都不会收到此版本。所以你应该“停用”它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-09T09:05:37.287

这可能是一个 hack，但您可以通过将分阶段部署到 1-50%，然后将其增加到 100% 来解决这个问题。

在这种情况下，错误消息不会阻止发布您的应用程序，您也不必停用任何内容。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-17T13:07:16.093

这纯粹是猜测，但您是否上传了以前的版本？如果是这样，可能是它`marketcode`设置为比您的新版本更高的值，例如 4

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-14T15:22:04.657

我遇到了类似的问题，但是因为我以前的版本有一个较低的最大 andorid api，所以我不允许恢复到以前的版本。

最后对我来说，这是一个 Eclipse 的问题，它没有将更改保存到清单文件中。我重新启动了eclipse，保存了我的项目，制作了一个apk，然后它就可以工作了。如果上述答案失败，也许值得一试。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-08T21:08:54.637

我刚刚切换到基本视图。它会立即用新版本自动替换当前版本。这当然不适合每个应用程序部署场景。但在大多数（简单）情况下应该没问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-11-08T15:38:50.660

我猜控制台告诉你你有两个版本支持相同的设备，所以没有理由同时使用这两个

**解决方案：**删除旧版本...
**或者**
如果您的旧版本支持特定设备，请标记并控制台将接受它

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-09-17T20:34:43.847

您一次只能有一个 APK 在生产中。在上传之前，您必须停用当前的。alpha 和 beta 测试 APK 的组合也是如此 - 您只能发布一个 APK 进行测试。

我同意错误消息的措辞令人震惊！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-06-22T10:30:27.510

我有同样的问题，但我在我的 APK 文件上执行了以下命令

```
jarsigner -verify -verbose -certs Myapp.apk 
```

然后我将新的 APK 上传到 Play 商店并轻松发布。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-09-13T06:43:40.497

我遇到了同样的问题，我只是停用了当前处于活动状态的旧 apk，然后上传新 apk。它解决了我的问题

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-03-29T11:48:45.117

就我而言，旧版本的 apk 已在 beta 测试中发布。当我试图用新的 apk 更新我的应用程序时。

刚刚将我的新 apk 移至 beta 测试，并从 beta 测试中取消发布旧 apk。

然后最后将新的 apk 从 beta 移动到 prod。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-07-28T01:54:42.243

我在第一次上传 APK 时也遇到了这个问题，但在查看 APK 详细信息时我注意到 API 级别 18-17。因此，我将此代码添加到 AndroidManifest.xml 以指定最高 API 级别

```
<uses-sdk android:minSdkVersion="18"
        android:targetSdkVersion="23"
        android:maxSdkVersion="23" /> 
```

这样做之后，问题就解决了：）

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2014-06-26T10:11:05.293

I had the same issue, but I resolved by Block Lint Errors.

See the Lint Error page, right corner packager icon, click there and block package. When you click for leaving lint error, the application make export singed application package.

![enter image description here](https://i.stack.imgur.com/jFubN.png)

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2014-04-23T13:29:59.157

要解决此问题，请执行以下操作：

1.  删除处于草稿模式的新 apk
2.  清除浏览器的历史缓存或使用其他浏览器重新上传apk

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2016-01-18T15:29:32.557

它发生在我身上，当我发布新的 APK 时，不小心关闭了浏览器窗口而没有完成提交。

# java - 如何在数据库中上传照片以及如何在jsp页面中检索

> ID：16060659
> 
> 赞同：0
> 
> 时间：2013-04-17T12:56:22.530
> 
> 标签：java, jsp, liferay

我正在提供`service.xml`包含表格详细信息的文件：

```
<entity name="Testimonial" local-service="true" remote-service="false">
    <!-- PK fields -->
    <column name="TestimonialId" type="long" primary="true" />

    <!-- UI fields -->
    <column name="subject" type="String" />
    <column name="area" type="String" />
    <column name="username" type="String" />
    <column name="email" type="String" />
    <column name="photo" type="String"/>
    <column name="company" type="String" />
    <column name="designation" type="String" />

    <!-- Audit fields -->
    <column name="createdAt" type="Date" /> 
```

这是我的 java 文件，我在其中编写了在数据库中存储数据的逻辑：

```
public void updateTesti(ActionRequest actionRequest,ActionResponse actionResponse) throws IOException, PortletException
{
    String subject = ParamUtil.getString(actionRequest,"subject");
    String area = ParamUtil.getString(actionRequest,"area");
    String username = ParamUtil.getString(actionRequest,"username");
    String email = ParamUtil.getString(actionRequest,"email");
    String company = ParamUtil.getString(actionRequest,"company");
    String designation = ParamUtil.getString(actionRequest,"designation");

    System.out.println("Your inputs ==> " + subject + ", " + area + "," 
    + username + "," + email + "," + company + "," + designation);

    Testimonial T1 = new TestimonialImpl();

    // set primary key
    long TestimonialId = 0L;
    try {
        TestimonialId =
        CounterLocalServiceUtil.increment(
        this.getClass().getName());
    } catch (SystemException e) {
        e.printStackTrace();
    }
    T1.setTestimonialId(TestimonialId);

    UploadPortletRequest uploadRequest = 

    PortalUtil.getUploadPortletRequest(actionRequest);
    String filePath = uploadRequest.getFileName("filePath");

    try{
        java.io.File file = uploadRequest.getFile("filePath");
        //Manage the Upload

    }catch (Exception e) {
        ///
    }
    // set UI fields
    T1.setSubject(subject);
    T1.setArea(area);
    T1.setUsername(username);
    T1.setEmail(email);
    T1.setCompany(company);
    T1.setDesignation(designation);
    T1.setPhoto(filePath);

    // set audit field(s)
    T1.setCreatedAt(new Date());

    // insert the book using persistence api
    try {
        TestimonialLocalServiceUtil.addTestimonial(T1);
    } catch (SystemException e) {
        e.printStackTrace();
    }
} 
```

告诉我我哪里错了，缺少什么？

这是我的 JSP 代码：

```
<aui:form name="fm" method="POST" action="<%= updateTestiURL.toString() %>">
    <aui:input name="subject" label="Subject"/>
    <aui:input type="textarea" name="area" label="your Testimonial" />

    <aui:input name="username" label="Username"/>
    <aui:input name="email" label="Email"/>
    <aui:input type="file" label="upload your file"  name="filePath" />
    <aui:input name="company" label="Company"/>
    <aui:input name="designation" label="Designation"/>

    <aui:button type="submit" value="Save"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:07:49.923

我认为存储图像的路径不是一个好主意。即使您从一台且唯一的计算机上上传了它们，您也可以访问该路径并使用完整路径，这可能不是您的情况。

由于您可以获得 java.io.File，因此您可以检索 InputStream，并使用 bytes[] 并将它们存储为 Text/String 或等效于 Blob 的东西。

你可以查看 Liferay 的 ImageLocalServiceImpl 类的源代码，看看它是如何使用这些资源的

编辑：获取 InputStream 的提示

```
 InputStream str = (InputStream)uploadRequest.getFileAsStream("filePath", false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T07:20:57.400

可以使用 servlet 完成此任务...这是我的 form.jsp 文件

```
html>
<body>  
        <form id="staff_feedbackform"  method="post" action="uploadServlet" enctype="multipart/form-data" class="register">
        Select Photo:<input type="file" name="photo">
        <p><label> NAME:</label><input type="text"  name="name" /></p>
        <p><label>EMPLOYEE ID:</label><input type="text" name="id"/></p>
        <p><label>E-MAIL ID:</label><input type="email" name="email"></p>
        <p><label><input id="gobutton" type="submit" value="SUBMIT" class="submit" />  </label></p>
        </form>
</body> 
```

这是我的 servlet 文件

```
 @WebServlet("/FileUploadDBServlet")
  @MultipartConfig(maxFileSize = 10177215) // upload file's size up to 16MB
  public class FileUploadDBServlet extends HttpServlet {
private static final long serialVersionUID = 1L;   
   /**
   * @see HttpServlet#HttpServlet()
    */
public FileUploadDBServlet() {
    super();
}
private final String dbURL = "jdbc:mysql://localhost:3306/test";
private final String dbUser = "root";
private final String dbPass = "";
protected void doPost(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException {

        String name=request.getParameter("name");
        String id=request.getParameter("id");
        String email=request.getParameter("email");        
        InputStream inputStream = null; // input stream of the upload file        
        // obtains the upload file part in this multipart request
        Part filePart = request.getPart("photo");
    if (filePart != null) {
        // prints out some information for debugging
        System.out.println(filePart.getName());
        System.out.println(filePart.getSize());
        System.out.println(filePart.getContentType());             
        // obtains input stream of the upload file
        inputStream = filePart.getInputStream();
    }        
    Connection conn = null; // connection to the database
    String message = null;  // message will be sent back to client        
    try {
        // connects to the database
        DriverManager.registerDriver(new com.mysql.jdbc.Driver());
        HttpSession session=request.getSession(false);  
        conn = (Connection) DriverManager.getConnection(dbURL,dbUser,dbPass);
        // constructs SQL statement
        Statement st=conn.createStatement();   
        String sql = "INSERT INTO file1(id,name,email,photo) values (?,?,?,?)";
        PreparedStatement statement = conn.prepareStatement(sql);
        statement.setString(1,id);
         statement.setString(2,name );
          statement.setString(3,email );

        if (inputStream != null) {
            // fetches input stream of the upload file for the blob column
            statement.setBlob(4, inputStream);
        } 
        // sends the statement to the database server
        int row = statement.executeUpdate();
        if (row > 0) {
            message = "File uploaded and saved into database";
            out.println("uploades succesfully");
            System.out.println("uploades succesfully");
        }            
    }        
    catch (SQLException ex) {
        System.out.println(ex);           
        message = "ERROR: " + ex.getMessage();
    }
}
} 
```

表文件1的表结构

```
 DROP TABLE IF EXISTS `file1`;
   CREATE TABLE IF NOT EXISTS `file1` (
   `id` varchar(100) NOT NULL,
   `name` varchar(100) NOT NULL,
   `email` varchar(100) NOT NULL,
   `photo` longblob NOT NULL,
    PRIMARY KEY (`id`)
   ) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

这是我的 servlet 映射代码，包括 web.xml

```
 <servlet>
    <servlet-name>uploadServlet</servlet-name>
    <servlet-class>com.servlet.FileUploadDBServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>uploadServlet</servlet-name>
    <url-pattern>/uploadServlet</url-pattern>
  </servlet-mapping> 
```

这是检索图像的一部分，这是我的 show_image.jsp

```
<%
String id="1250";
session.setAttribute("num", id);
%>
  <body>
  <image src="display.jsp" border="0" height="200px" width="200px" alt="NO PIC"/>
  </body> 
```

在这里我通过 dispaly.jsp 文件从外部引用图像

```
 <% Blob image = null;
 String no=(String)session.getAttribute("num"); 
 byte[ ] imgData = null ;
 Statement stmt = null;
 ResultSet rs = null;
 try {
 Class.forName("com.mysql.jdbc.Driver");
 Connection con = (Connection);         DriverManager.getConnection("jdbc:mysql://localhost:3306/test","root","");
 stmt = con.createStatement();
 rs = stmt.executeQuery("select photo from file1 where id = '"+no+"'");
 if (rs.next()) {
 image = rs.getBlob(1);
 imgData = image.getBytes(1,(int)image.length());
 } else {
        out.println("Display Blob Example");
        out.println("image not found for given id");
        return;
        }
  // display the image
 response.setContentType("image/gif");
 OutputStream o = response.getOutputStream();
  o.write(imgData);
 o.flush();
  o.close();
  } catch (Exception e) {
                       out.println("Unable To Display image");
                       out.println("Image Display Error=" + e.getMessage());
                       return;
                      } finally {
                                try {
                                     rs.close();
                                     stmt.close();
                                    } catch (SQLException e) {
                                                             System.out.println(e);
                                                             e.printStackTrace();
                                                             }
                      }
    %> 
```

# transactions - Nested transactions in Mule: are they possible?

> ID：16060662
> 
> 赞同：0
> 
> 时间：2013-04-17T12:56:28.030
> 
> 标签：transactions, mule

I have the following flow in Mule 3.3.2:

```
<flow name="testFlow" processingStrategy="synchronous">
    <vm:inbound-endpoint
            connector-ref="vmConnector"
            path="in">
        <vm:transaction action="ALWAYS_BEGIN"/>
    </vm:inbound-endpoint>

    <transactional action="ALWAYS_BEGIN">
        <jdbc:outbound-endpoint
                connector-ref="jdbcConnector"
                queryKey="insertTest"
        />

        <jdbc:outbound-endpoint
                connector-ref="jdbcConnector"
                queryKey="insertTest2"
        />
        <rollback-exception-strategy/>
    </transactional>

    <vm:outbound-endpoint
            connector-ref="vmConnector"
            path="outErrorQueue">
        <vm:transaction action="ALWAYS_JOIN"/>
    </vm:outbound-endpoint>
 </flow> 
```

What I'm trying to achieve is a jdbc transaction nested into the vm transaction: any exception inside the transactional scope should trigger rollback for the jdbc transaction, propagate to the scope of the transactional flow and trigger the default exception strategy for the vm transaction. Any exception outside of the transactional scope should just trigger the default exception strategy of the flow, of course.

Reading source for e.g. `org.mule.transaction.TransactionCoordination` leads me to believe that that might work, at least if `transactional` would accept `ACTION_NOT_SUPPORTED` as action (which it does not -- can I make it?).

What i get instead is

```
org.mule.transaction.IllegalTransactionStateException: A transaction is not available for this session, but transaction action is "Always Join"
at org.mule.execution.ValidateTransactionalStateInterceptor.execute(ValidateTransactionalStateInterceptor.java:41)
at org.mule.execution.IsolateCurrentTransactionInterceptor.execute(IsolateCurrentTransactionInterceptor.java:44)
at org.mule.execution.ExternalTransactionInterceptor.execute(ExternalTransactionInterceptor.java:52) 
```

at the vm:outbound-endpoint.

Is there any alternative way to get what I want with Mule?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:49:44.650

我认为 VM 连接器不支持嵌套事务。

我会尝试在这个用例中使用 XA，因为 XA 事务可以暂停和恢复，这将发生在`transactional`块的边界：

```
<jbossts:transaction-manager />

<flow name="testFlow" processingStrategy="synchronous">
    <vm:inbound-endpoint
            connector-ref="vmConnector"
            path="in">
        <xa-transaction action="ALWAYS_BEGIN"/>
    </vm:inbound-endpoint>

    <transactional action="ALWAYS_BEGIN">
        <jdbc:outbound-endpoint
                connector-ref="jdbcConnector"
                queryKey="insertTest"
        />

        <jdbc:outbound-endpoint
                connector-ref="jdbcConnector"
                queryKey="insertTest2"
        />
        <rollback-exception-strategy/>
    </transactional>

    <vm:outbound-endpoint
            connector-ref="vmConnector"
            path="outErrorQueue">
        <xa-transaction action="ALWAYS_JOIN"/>
    </vm:outbound-endpoint>
</flow> 
```

# php - update database if value === $_POST value if not value already exist

> ID：16060663
> 
> 赞同：-1
> 
> 时间：2013-04-17T12:56:30.843
> 
> 标签：php, mysql, pdo

Well that's basically what I'm trying to do.

I have a form that saves into the database, now if the email in this case, already exist, it gives me the error message that " user already exist.

and since I am echoing out the values from the database into the form fields it gives me that " user already exist" error every time i push update. If don't echo out the value, when I'm updating the form, it saves an empty email address, or `filter_validate_Email` function tells me that the email is not valid.

I tried and succeed when fixed the problem with check boxes but that's kind of messy and ugly so I am trying if else statement but with no luck. Any tips on how to manage this ?

Ill send you some code.

```
if(email_exists($_POST['email'])===($_POST['email'])){

    } 

    if(email_exists($_POST['email'])){
        $errors[] = 'email already registered';
    } 
```

With that statement i was thinking of, if the $_POST email is equal to $_POST email. do nothing, but if the email exist from email_exist function. `error email already exist.`

```
 if(empty($errors)){ 
        set_profile_info($_POST['firstname'],
        $_POST['lastname'],
        $_POST['username'],
        $_POST['email'],
        $_POST['about']);
    }
} 
```

email_exists query

```
function email_exists($email){
    global $db;
    $st = $db->prepare("SELECT * FROM user WHERE email=?" );
    $st->bindParam(1, $email);
    $st->execute();

    if($st->rowCount() ==1){
        return true;
    }
    else{ 
       return false;
    }
} 
```

There are probably millions of other ways, but i cant figure anything else. thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:02:18.787

您应该在“电子邮件”字段上使用 UNIQUE 索引

```
ALTER TABLE yourtable
ADD UNIQUE INDEX EMAIL_UNIQUE(email); 
```

那么当您尝试使用电子邮件添加用户时，它会给您错误/异常，具体取决于您使用的 sql 引擎。

我注意到你使用全局变量是个坏习惯。最好创建 Registry 或 Singleton 来获取数据库对象。

[http://www.phpeveryday.com/articles/OOP-Pattern-Registry-Introduction-Registry-Pattern-P240.html](http://www.phpeveryday.com/articles/OOP-Pattern-Registry-Introduction-Registry-Pattern-P240.html) [http://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)

你也做了一件奇怪的事情。为什么你使用“===”这意味着具有相同类型的“EXACT”变量，然后你将字符串与布尔值进行比较，它总是返回false。

改变

```
if(email_exists($_POST['email'])===($_POST['email'])){ 
```

至

```
if(email_exists($_POST['email'])==($_POST['email'])){ 
```

或者

```
if(email_exists($_POST['email'])===((bool)$_POST['email'])){ 
```

改变

```
if(email_exists($_POST['email'])===($_POST['email'])){

} 

if(email_exists($_POST['email'])){
    $errors[] = 'email already registered';
} 
```

至

```
$emailExists = email_exists($_POST['email'])
if(emailExists == $_POST['email']){
  //doing your stuff when email exists
} 

if(emailExists){
    //doing other stuff when email exists
    $errors[] = 'email already registered';
} 
```

当您更改它时，调用数据库的函数将只被调用一次。

# iphone - 将点击事件添加到图像

> ID：16060665
> 
> 赞同：0
> 
> 时间：2013-04-17T12:56:34.223
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uiimageview

我是新的目标c我有一张图片，当我点击它时我想显示一些警报消息添加了这样的图片-

```
AHolder = [[UIImageView alloc] initWithFrame:CGRectMake(5, 80, 40, 40)];
    UIImage *imageA = [UIImage imageNamed:@"A.png"];
    AHolder.image = imageA;
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(aPressed:) name:@"aPressed" object:nil];
    [view addSubview:AHolder] 
```

它的事件是这样的——

```
 -(IBAction)aPressed:(id)sender
{
    UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"hello" message:@"a pressed" delegate:self cancelButtonTitle:@"cancle" otherButtonTitles:@"ok",nil];
    [alert show];
    [alert release];
} 
```

它没有给我任何错误，但是当我单击图像时也没有任何反应。请建议我任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:58:01.813

将点击手势添加到图像视图。

```
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapGesture)];
tapGesture.numberOfTapsRequired=1;
[AHolder setUserInteractionEnabled:YES];
[AHolder addGestureRecognizer:tapGesture];
[tapGesture release];

-(void)handleTapGesture{
//do what ever you want here
} 
```

否则，只需使用带有背景图像的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:21:50.310

对于您的问题，非常简单且最受欢迎的解决方案是在您的图像上使用自定义 UIButton。然后只需将选择器设置为您想要在单击按钮时调用的方法。确保 UIButton 和 UIImage 的框架相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:28:41.580

在 xib 文件中添加“圆形矩形按钮”对象。将“Type”属性设置为“custom”，将“Background”属性设置为“nameofyourimage.extension”。

将 aPressed: 方法连接到圆形矩形按钮的 touch up inside 事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T08:03:00.680

不需要把`UIButton`你的形象。只需使用`UIButton`而不是`UIImageView`. 您可以设置`UIButton` `backgroundimage`或`image`属性为您想要的图像。

除此之外，您可以`UITapGestureRecognizer`像这样使用：

将此代码放入`viewDidLoad`

```
UITapGestureRecognizer *rec = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapRecognized:)];
[yourImage addGestureRecognizer:rec];
[yourImage setUserInteractionEnabled:YES]; //!! this is important 
```

并实现这个委托方法

```
#define unused_related_to_gesture
- (void)tapRecognized:(UITapGestureRecognizer *)recognizer
{
    if(recognizer.state == UIGestureRecognizerStateBegan)
    {
        NSLog(@"\nUIGestureRecognizerStateBegan\n");
    }
    if(recognizer.state == UIGestureRecognizerStateCancelled)
    {
        NSLog(@"\nUIGestureRecognizerStateCancelled\n");
    }
    if(recognizer.state == UIGestureRecognizerStateChanged)
    {
        NSLog(@"\nUIGestureRecognizerStateChanged\n");
    }
    if(recognizer.state == UIGestureRecognizerStateEnded)
    {
        NSLog(@"\nUIGestureRecognizerStateEnded\n");
    }
    if(recognizer.state == UIGestureRecognizerStateFailed)
    {
        NSLog(@"\nUIGestureRecognizerStateFailed\n");
    }
    if(recognizer.state == UIGestureRecognizerStatePossible)
    {
        NSLog(@"\nUIGestureRecognizerStatePossible\n");
    }
    if(recognizer.state == UIGestureRecognizerStateRecognized)
    {
        NSLog(@"\nUIGestureRecognizerStateRecognized\n");
        // this section will contain your code of clicking the image.
        UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"hello" message:@"a pressed" delegate:self cancelButtonTitle:@"cancle" otherButtonTitles:@"ok",nil];
        [alert show];
        [alert release];
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T12:59:33.820

使用 tapGestureRecognizer。因此，每当用户点击 iamgeview 时，您都可以随心所欲

```
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(aPressed)];
tapGesture.numberOfTapsRequired=1;
[aHolder setUserInteractionEnabled:YES];
[aHolder addGestureRecognizer:tapGesture];

-(void)aPressed{
//do what ever you want here
} 
```

# linq - Avoid "Parameterless Queries Error" with Linq Let clause

> ID：16060669
> 
> 赞同：1
> 
> 时间：2013-04-17T12:56:48.467
> 
> 标签：linq

I'd like my Linq query to create an additional column in the results on the fly. In this case the column is a Class object I created that will contain image info. I was wondering what the right way is of doing this:

```
var validPics = (from x in db.picsVotesTagsJs let picObj = new CarShowImages(x.picname) where x.enabled == 1 select x).Take(25);
var myArray = validPicSummaries.ToArray(); 
```

Line 2 gerenates the error:

**Only parameterless constructors and initializers are supported in LINQ to Entities.**

This is my first time using the Let clause. My queries are usually pretty simple.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:00:13.990

创建无参数构造函数并使用一些公共属性（例如`PicName`）为您的`CarShowImages`对象设置图片名称：

```
var validPics = (from x in db.picsVotesTagsJs
                 where x.enabled == 1
                 select new CarShowImages { PicName = x.picname }).Take(25);
var myArray = validPics.ToArray(); 
```

# sql - Issue with quoting of IS, NULL, NOT, !, and other reserved strings in ON conditions of JOIN clauses in Zend Framework 2

> ID：16060679
> 
> 赞同：0
> 
> 时间：2013-04-17T12:57:10.913
> 
> 标签：sql, join, zend-framework2, quoting, zend-db-select

I have an SQL statement, that selets sport classes/courses (`courses`) with their trainers (`trainers`) over an association table (`courses_trainers`). Since some courses have multiple trainers, I use the `GROUP_CONCAT(...)` function to get the trainer names into one field. Some trainers rows are empty or `NULL`, so I add a `trainers.name IS NOT NULL` and a `trainers.name != ""` condition to the `ON` clause of the trainers `JOIN`:

**`SQL` statement**

```
SELECT
    courses.id AS id,
    GROUP_CONCAT(DISTINCT trainers.name SEPARATOR "|||") AS trainers
    ...
FROM
    courses
    ...
LEFT JOIN
    courses_trainers ON courses.id = courses_trainers.course_id
LEFT JOIN
    trainers ON trainer_id = trainers.id
    AND trainers.name IS NOT NULL
    AND trainers.name != ""
    ...
...
WHERE `courses`.`id` = '898'
GROUP BY
    courses.id
; 
```

**OO variant in the `CourseTable` class**

```
public function findOnceByID($id) { 
    $concatDelimiter = self::CONCAT_DELIMITER;
    $select = new Select();
    ...
    $select->columns(array(
        'id', ...
    ));
    $select->from($this->tableGateway->getTable());
    $select
        ...
        ->join('courses_trainers', 'courses.id = courses_trainers.course_id', array(), Select::JOIN_LEFT)
        ->join('trainers', 'trainer_id = trainers.id AND trainers.name IS NOT NULL AND trainers.name != ""', array(
            'trainers' => new Expression('GROUP_CONCAT(DISTINCT trainers.name SEPARATOR "' . $concatDelimiter . '")')
            ), Select::JOIN_LEFT)
        ...
    ;
    $where
        ->equalTo('courses.id', $id)
    ;
    $select->where($where, Predicate::OP_AND);
    $select->group('courses.id');
    $resultSet = $this->tableGateway->selectWith($select);
    return $resultSet;
} 
```

The generated `JOIN` code I get looks like this:

```
LEFT JOIN
    `courses_trainers` ON `courses`.`id` = `courses_trainers`.`course_id`
LEFT JOIN
    `trainers` ON `trainer_id` = `trainers`.`id`
    AND `trainers`.`name` `IS` `NOT` `NULL`
    AND `trainers`.`name` `!`= `"``"` 
```

So, here is to much quoted.

How to "explain" to the ZF, that `IS`, `NOT`, `"` etc. should not be quoted?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:58:11.583

该`join`方法接受一个表达式作为`ON`子句的第二个参数

```
->join('trainers', new Expression('trainer_id = trainers.id AND trainers.name IS NOT NULL AND trainers.name != ""'), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:57:10.913

负责引用的是[`Zend\Db\Adapter\Platform\PlatformInterface#quoteIdentifierInFragment(...)`](https://github.com/zendframework/zf2/blob/master/library/Zend/Db/Adapter/Platform/PlatformInterface.php#L93)（或更准确地说是它的实现，在这种情况下是 in [`Zend\Db\Adapter\Platform\Mysql`](https://github.com/zendframework/zf2/blob/master/library/Zend/Db/Adapter/Platform/Mysql.php#L187)），它作为第二个参数获得一个“安全词”数组。`Zend\Db\Sql\Select#processJoins(...)` [传递](https://github.com/zendframework/zf2/blob/master/library/Zend/Db/Sql/Select.php#L751)给它`array('=', 'AND', 'OR', '(', ')', 'BETWEEN', '<', '>')`。因为`IS`,`NOT`等`!`不在列表中，所以它们被引用。

解决方案是扩展`Zend\Db\Sql\Select`并覆盖其[`processJoins(...)`](https://github.com/zendframework/zf2/blob/master/library/Zend/Db/Sql/Select.php#L712)，将所需的额外“安全词”添加到`quoteIdentifierInFragment(...)`调用中第二个参数的列表中：

```
<?php
namespace MyNamespace\Db\Sql;

use Zend\Db\Adapter\Driver\DriverInterface;
use Zend\Db\Adapter\StatementContainerInterface;
use Zend\Db\Adapter\ParameterContainer;
use Zend\Db\Adapter\Platform\PlatformInterface;
use Zend\Db\Sql\Select as ZendSelect;

class Select extends ZendSelect
{

    ...

    protected function processJoins(PlatformInterface $platform, DriverInterface $driver = null, ParameterContainer $parameterContainer = null)
    {
        ...
        // process joins
        $joinSpecArgArray = array();
        foreach ($this->joins as $j => $join) {
            ...
            $joinSpecArgArray[$j][] = ($join['on'] instanceof ExpressionInterface)
                ? $this->processExpression($join['on'], $platform, $driver, $this->processInfo['paramPrefix'] . 'join' . ($j+1) . 'part')
                : $platform->quoteIdentifierInFragment($join['on'], array('=', 'AND', 'OR', '(', ')', 'BETWEEN', '<', '>', '!', 'IS', 'NULL', 'NOT', '"')); // on
            ...
        }

        return array($joinSpecArgArray);
    }

    ...

} 
```

# c# - 从 HTTP 响应中获取结果

> ID：16060681
> 
> 赞同：0
> 
> 时间：2013-04-17T12:57:12.393
> 
> 标签：c#, httpwebrequest, httpwebresponse

我有以下 C# 类，它启动从 Windows Phone 到服务器的 HTTP 请求：

```
public class Request
{
    public string data;
    public string result;

    public Request()
    {

    }

    public void doRequest(string parameters, string URL)
    {
        data = parameters;

        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(URL);
        request.Method = "POST";
        request.ContentType = "application/x-www-form-urlencoded";
        request.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), request);
    }

    public void GetRequestStreamCallback(IAsyncResult callbackResult)
    {
        HttpWebRequest myRequest = (HttpWebRequest)callbackResult.AsyncState;
        Stream postStream = myRequest.EndGetRequestStream(callbackResult);
        byte[] byteArray = Encoding.UTF8.GetBytes(data);

        postStream.Write(byteArray, 0, byteArray.Length);
        postStream.Close();

        myRequest.BeginGetResponse(new AsyncCallback(GetResponsetStreamCallback), myRequest);
    }

    public void GetResponsetStreamCallback(IAsyncResult callbackResult)
    {
        HttpWebRequest request = (HttpWebRequest)callbackResult.AsyncState;
        HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(callbackResult);

        StreamReader httpWebStreamReader = new StreamReader(response.GetResponseStream());
        result = httpWebStreamReader.ReadToEnd();
    } 
```

现在，在我的主类中，我调用 doRequest 方法从 Windows Phone 发出 HTTP 请求：

```
Request req = new Request();
req.doRequest("function=LogIn&username=" + username + "&password=" + password, "http://localhost:4000/Handler.ashx"); 
```

调用此方法时，如何从服务器获取结果（**结果变量**），因为它是在 GetResponsetStreamCallback 方法中而不是在 doRequest 方法中接收的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:08:49.153

你有几种可能性。一种是定义`property`使结果可以在外部访问。定义

```
public class Request
{
    public string Result
    {
      get{ 
           if(result != null && !string.IsNullOrEmpty(result))
                return result;
           return null;
         }
    }
  ...
} 
```

您可能会创建一个事件并让对象订阅它，因此您可以在异步请求结束时注意到它们。或者让你的调用同步，这更容易做，因为你没有同步你的调用和来自其他对象的请求。

# android - Android thread wait until visible

> ID：16060690
> 
> 赞同：12
> 
> 时间：2013-04-17T12:57:32.067
> 
> 标签：android, multithreading, android-animation

I've made a custom pie chart view that I want to animate starting when the pie chart is visible. Currently what I have is the pie chart animating but by the time you can actually see it on the screen the animation is half over. This is what I have:

```
public class SinglePieChart extends SurfaceView implements SurfaceHolder.Callback {
    // Chart setting variables
    private int emptyCircleCol, strokeColor, number, total;

    // Paint for drawing custom view
    private Paint circlePaint;

    private RectF rect;

    private Context context;
    private AnimThread animThread;
    private SurfaceHolder holder;

    // animation variables
    private float speed;
    private float current = 0.0f;
    private boolean percentsCalculated = false;
    private float degree;
    private int viewWidth, viewHeight;

    public SinglePieChart(Context ctx, AttributeSet attrs) {
        super(ctx, attrs);

        context = ctx;

        // Paint object for drawing in doDraw
        circlePaint = new Paint();
        circlePaint.setStyle(Style.STROKE);
        circlePaint.setStrokeWidth(3);
        circlePaint.setAntiAlias(true);
        circlePaint.setDither(true);

        rect = new RectF();

        //get the attributes specified in attrs.xml using the name we included
        TypedArray a = context.getTheme().obtainStyledAttributes(attrs,
            R.styleable.DashboardChartSmall, 0, 0);

        try {
            //get the colors specified using the names in attrs.xml
            emptyCircleCol = a.getColor(R.styleable.DashboardChartSmall_smCircleColor, 0xFF65676E); // light gray is default
            strokeColor    = a.getColor(R.styleable.DashboardChartSmall_smColor, 0xFF39B54A); // green is default

            // Default number values
            total  = a.getInteger(R.styleable.DashboardChartSmall_smTotal,  1);
            number = a.getInteger(R.styleable.DashboardChartSmall_smNumber, 0);
        } finally {
            a.recycle();
        }

        this.setZOrderOnTop(true);

        holder = getHolder();
        holder.setFormat(PixelFormat.TRANSPARENT);

        holder.addCallback(this);
    }

    protected void calculateValues() {
        degree = 360 * number / total;
        percentsCalculated = true;
        speed = 10 * number / total;
        viewWidth  = this.getMeasuredWidth();
        viewHeight = this.getMeasuredHeight();

        float top, left, bottom, right;

        if (viewWidth < viewHeight) {
            left = 4;
            right = viewWidth - 4;
            top = ((viewHeight - viewWidth) / 2) + 4;
            bottom = viewHeight - top;
        } else {
            top = 4;
            bottom = viewHeight - 4;
            left = ((viewWidth - viewHeight) / 2) + 4;
            right = viewWidth - left;
        }

        rect.set(left, top, right, bottom);
    }

    protected void doDraw(Canvas canvas) {
        if (total == 0) {
            // Number values are not ready 
            animThread.setRunning(false);
            return;
        }

        if (!percentsCalculated) {
            calculateValues();
        }

        // set the paint color using the circle color specified
        float last = current;
        float start = -90;

        circlePaint.setColor(strokeColor);
        canvas.drawArc(rect, start, (last > degree) ? degree : last, false, circlePaint);
        start += (last > number) ? number : last;
        last = (last < number) ? 0 : last - number;

        circlePaint.setColor(emptyCircleCol);

        if (current > 360) {
            current = 360;
        }

        canvas.drawArc(rect, start, 360 - current, false, circlePaint);     

        current += speed;

        if (last > 0 || number == 0) {
            // we're done
            animThread.setRunning(false);
        }
    }

    public void setNumbers(int num, int tot) {
        number = num;
        total  = tot;

        invalidate();
        requestLayout();
    }

    public void setColor(int col) {
        strokeColor = col;
    }

    public void redraw() {
        calculateValues();
        animThread.setRunning(true);

        invalidate();
        requestLayout();
    }

    @Override
    public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
    }

    @Override
    public void surfaceCreated(SurfaceHolder arg0) {
        animThread = new AnimThread(holder, context, this);
        animThread.setRunning(true);
        animThread.start();
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder arg0) {
        animThread.setRunning(false);

        boolean retry = true;

        while(retry) {
            try {
                animThread.join();
                retry = false;
            } catch(Exception e) {
                Log.v("Exception Occured", e.getMessage());
            }
        }
    }

    public class AnimThread extends Thread {
        boolean mRun;
        Canvas mcanvas;
        SurfaceHolder surfaceHolder;
        Context context;
        SinglePieChart msurfacePanel;

        public AnimThread(SurfaceHolder sholder, Context ctx, SinglePieChart spanel) {
            surfaceHolder = sholder;
            context = ctx;
            mRun = false;
            msurfacePanel = spanel;
        }

        void setRunning(boolean bRun) {
            mRun = bRun;
        }

        @Override
        public void run() {
            super.run();
            while (mRun) {
                mcanvas = surfaceHolder.lockCanvas();
                if (mcanvas != null) {
                    msurfacePanel.doDraw(mcanvas);
                    surfaceHolder.unlockCanvasAndPost(mcanvas);
                }
            }
        }
    }
} 
```

Also if you see any programming errors, memory leaks, poor performing code, please let me know. I'm new to Android.

Here is the layout that uses the SinglePieChart class:

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android">
    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1">
        <com.davidscoville.vokab.views.elements.SinglePieChart
            android:id="@+id/smallPieChart"
            android:layout_width="match_parent" 
            android:layout_height="match_parent" />

        <TextView
            android:id="@+id/dashSmNumber"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:textSize="25sp"
            android:textColor="#FFFFFF" />

    </RelativeLayout>

    <TextView
        android:id="@+id/dashSmLabel"
        android:layout_width="match_parent"
        android:layout_height="20dp"
        android:textSize="14sp"
        android:gravity="center"
        android:textColor="#FFFFFF" />
</merge> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-26T17:24:25.563

好吧，我要使用我的饼图，它不会自动设置动画，它会有一个新功能，一旦准备好，Activity 将触发开始动画。我希望有一个更简单的方法...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T12:49:19.157

或者，您可以使用[动画框架](http://developer.android.com/guide/topics/graphics/overview.html)（如果您想支持较旧的 API，则可以使用[九个旧机器人）。](http://nineoldandroids.com/)这将允许您为视图上的属性设置动画，在您的情况下是 start 和 current 变量。

我将其设置为在[onAttachedToWindow](http://developer.android.com/reference/android/view/SurfaceView.html#onAttachedToWindow)期间发生。

请注意，如果您在此饼图中没有做很多其他事情，则表面视图可能会超出您的需求。

# javascript - 一个永远不会超过浏览器的“div”

> ID：16060696
> 
> 赞同：1
> 
> 时间：2013-04-17T12:57:52.457
> 
> 标签：javascript, jquery, asp.net, html, css

我正在使用`Visual Studio`, `ASP.net`, `HTML`, `CSS`, `C#`（用于后面的代码）`ADO.net`和`Javascript/Jquery`.

我正在尝试制作一个带有某些块的网页，`div`并且我希望该块永远不会超过浏览器。您知道吗：`div`即使我更改了窗口的分辨率，如何添加高度尺寸？

PS：我是法国人，所以请不要在意我的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:04:54.560

在没有进一步澄清您的情况的情况下，一种方法是执行以下操作：

**HTML**

```
<div id="test">
    My div
</div> 
```

**CSS**

```
html, body {height:100%;margin:0;padding:0}
#test {width:100%; height: 100%;position:absolute;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:05:57.043

将高度设置为 100% 通常有效。注意：有时填充可能会将您推到浏览器之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T05:28:50.073

我以前遇到过屏幕分辨率问题，这解决了我的问题。

*   如果您希望您的网站在屏幕分辨率更改时动态更改，您可以在 CSS 中对所有页面、容器、包装器等使用 % ，以便它可以根据任何屏幕分辨率进行调整。（*问题：当屏幕分辨率很大时，这会破坏您的网页设计*）

*   到目前为止我找到的最好的解决方案，我认为其他专业网站也在做的是让你的宽度静态或固定，让你的页面位于中心。这将保留您在页面上所做的设计，并且所有内容都将保持原样。

    在您的 CSS 中，只需在页面、容器、包装器等上添加这一行。

    **margin:0 auto;**

    并且您的网站将以任何屏幕分辨率为中心。有关更多示例并了解更多相关信息，请查看此参考[How to Center a Website With CSS](http://buildinternet.com/2008/11/how-to-center-a-website-with-css/)。如果您想在不更改实际屏幕分辨率的情况下测试不同的屏幕分辨率，您可以[在此处](http://quirktools.com/screenfly/)尝试。

    希望这可以帮助 ：）

# jquery - 一个接一个水平对齐的可缩放背景图像

> ID：16060700
> 
> 赞同：0
> 
> 时间：2013-04-17T12:58:08.373
> 
> 标签：jquery, css, slideshow

我正在构建一个自定义的水平幻灯片，并且我已经将一个具有完全可缩放图像的理想化——当您调整浏览器窗口的大小时，图像会相应地缩放。

现在，为了实现这一点，我需要`position: fixed`在我的图像 div 容器上放置一个 - 根据本[教程](http://css-tricks.com/perfect-full-page-background-image/)。

我使用了纯 CSS 技术 #1：

```
#imageContainerDiv img {
    min-height: 100%; 
    min-width: 1024px;
    width: 100%; 
    height: auto;
    position: fixed; 
    top: 0;
    left: 0;
} 
```

所以，我需要的是让图像一个接一个地水平对齐（比如浮动）。这是一个[小提琴](http://jsfiddle.net/ZecHS/)（没有按钮）。谢谢。

佩德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:03:27.617

尝试将容器中的图像设置为 display:inline-block 并将尺寸设置为容器本身。您可能还需要将容器本身设置为 display:table。像这样的东西：

```
#imageContainerDiv {
    display:table;
    min-width: 1024px;
    height:auto;
}

#imageContainer Div img {
   display:inline-block;
   width: 100%; 
   height: auto;
   position: fixed; 
   top: 0;
} 
```

# java - 如何使用 JDBC 和 PostgreSQL 获取大数据

> ID：16060703
> 
> 赞同：1
> 
> 时间：2013-04-17T12:58:14.190
> 
> 标签：java, postgresql, jdbc, playframework

我正在尝试从我的表中获取数百万数据，并且我正在使用 Java Play Framework 2.0，但存在一些问题。当我对查询设置限制时，它运行良好，如果我要求所有数据，它会抛出错误，例如

```
Exception in thread "pool-3-thread-1" java.lang.OutOfMemoryError: Java heap space 
```

有人能帮我一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:07:51.300

从手册中引用：

> *默认情况下，驱动程序一次收集查询的**所有**结果。这对于大型数据集可能很不方便，因此 JDBC 驱动程序提供了一种将 ResultSet 基于数据库游标并仅获取少量行的方法*

（强调我的）

该手册详细描述了如何配置驱动程序以不将所有内容加载到内存中：http:
[//jdbc.postgresql.org/documentation/head/query.html#query-with-cursor](http://jdbc.postgresql.org/documentation/head/query.html#query-with-cursor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:19:07.090

java.sql.Statement.setFetchSize 可能会有所帮助，具体取决于您的数据库。我不熟悉 Play Framework，但您可以使用 JDBC 设置获取大小。

请参阅[Statement.setFetchSize(nSize) 方法的真正作用是什么？](https://stackoverflow.com/questions/1318354/what-does-statement-setfetchsizensize-method-really-do)

# c++ - 插入跳过列表

> ID：16060706
> 
> 赞同：1
> 
> 时间：2013-04-17T12:58:24.717
> 
> 标签：c++, templates, memory-leaks, g++, skip-lists

我正在开发自己的跳过列表模板类。以下是它的规格：`Iterator`类保存单个跳过列表的副本。Head 和 Tail 迭代器始终为空，tail 迭代器的 tail 值设置为`TRUE`。

```
class RandomHeight
{
  public:
    RandomHeight(int maxLvl, float prob);
    ~RandomHeight() {}
    int newLevel(void);

  private:
    int maxLevel;
    float probability;
};

RandomHeight::RandomHeight
    (int maxLvl, float prob)
{
  srand (time(NULL));
  maxLevel = maxLvl;
  probability = prob;
}

int RandomHeight::newLevel(void)
{
int tmpLvl = 1;
  // Develop a random number between 1 and
  // maxLvl (node height).
  while ((((rand()%1000000)*1.0/1000000) < probability) &&
         (tmpLvl < maxLevel))
    tmpLvl++;

  return tmpLvl;
}

template <typename Key_T, typename Mapped_T, size_t MaxLevel> class SkipList;
template <typename Key, typename Obj>
class Iterator
{
    typedef std::pair<Key, Obj> ValueType;
    template <typename Key1, typename Obj1, size_t MaxLevel1> friend class SkipList;
    public:
        // Iterator(const Iterator &);
        //virtual Iterator& operator=(const Iterator &);
        Iterator &operator++();
        Iterator operator++(int);
        //virtual ValueType &operator*() const;
        //virtual ValueType *operator->() const;

        Iterator(Key, Obj, int,bool);
        Iterator(int,bool);
        ~Iterator();

        Key getKey(void) {return key;};
        Obj getObj(void) {return obj;};
        int getHgt(void) {return nodeHeight;};
    bool isTail(void) {return tail;};

    private:
        int nodeHeight;
        Key key;
        Obj obj;
    bool tail; // holds non null value
    Iterator<Key,Obj>** fwdNodes;
};

template <typename Key, typename Obj>
Iterator<Key,Obj>::~Iterator()
{
    delete [] fwdNodes;
}

template <typename Key, typename Obj>
Iterator<Key,Obj>::Iterator(Key k,Obj o, int h,bool t = false) : nodeHeight (h) , key (k) , obj (o) , tail(t)
{
    fwdNodes = new Iterator<Key,Obj>* [h+1];
  for ( int x = 1; x <= nodeHeight; x++ )
      fwdNodes[x] = (Iterator<Key,Obj>*) NULL;
}

template <typename Key, typename Obj>
Iterator<Key,Obj>::Iterator(int h,bool t = false) : nodeHeight (h) , key ((Key) NULL) , obj ((Obj) NULL) , tail(t)
{
    fwdNodes = new Iterator<Key,Obj>* [h+1];
  for ( int x = 1; x <= nodeHeight; x++ )
      fwdNodes[x] = (Iterator<Key,Obj>*) NULL;
}
template <typename Key_T, typename Mapped_T, size_t MaxLevel = 5>
class SkipList
{
    typedef std::pair<Key_T, Mapped_T> ValueType;
public:

    SkipList();
  ~SkipList();
    SkipList(const SkipList &);
    SkipList &operator=(const SkipList &);

    size_t size() const;
    Iterator<Key_T,Mapped_T> begin();
    Iterator<Key_T,Mapped_T> end();
    //ConstIterator begin() const;
    //ConstIterator end() const;
    //virtual void clear();

    std::pair<Iterator<Key_T,Mapped_T>, bool> insert(const ValueType &);
    template <typename IT_T>
    void insert(IT_T range_beg, IT_T range_end);

    void erase(Iterator<Key_T,Mapped_T> pos);
    //virtual void erase(Iterator<Key_T,Mapped_T> range_beg, Iterator<Key_T,Mapped_T> range_end);

private:
    Iterator<Key_T,Mapped_T>* head;
    Iterator<Key_T,Mapped_T>* tail;
    float probability;
    size_t maxHeight;
    size_t curHeight;
    RandomHeight* randGen;
};
template <typename Key_T, typename Mapped_T, size_t MaxLevel>
SkipList<Key_T,Mapped_T,MaxLevel>::SkipList() : curHeight (1), maxHeight(MaxLevel) , probability (1.0/MaxLevel)
{
  randGen = new RandomHeight(MaxLevel,probability);

  // Create head and tail and attach them
  head = new Iterator<Key_T,Mapped_T> (maxHeight);
  tail = new Iterator<Key_T,Mapped_T> (maxHeight,true);
  for ( int x = 1; x <= maxHeight; x++ )
      head->fwdNodes[x] = tail;
}

template <typename Key_T, typename Mapped_T, size_t MaxLevel>
SkipList<Key_T,Mapped_T,MaxLevel>::~SkipList()
{
// Walk 0 level nodes and delete all
  Iterator<Key_T,Mapped_T>* tmp;
  Iterator<Key_T,Mapped_T>* nxt;
  tmp = head;
  while ( tmp )
  {
    nxt = tmp->fwdNodes[1];
    delete tmp;
    tmp = nxt;
  }
  delete randGen;
} 
```

我的问题出在下面的插入函数中：

```
template <typename Key_T, typename Mapped_T, size_t MaxLevel>
std::pair<Iterator<Key_T,Mapped_T>, bool>  SkipList<Key_T,Mapped_T,MaxLevel>::insert(const ValueType &input)
{
  Key_T k = input.first;
  Mapped_T o = input.second;
  int lvl = 0, h = 0;
  Iterator<Key_T,Mapped_T>** updateVec = new Iterator<Key_T,Mapped_T>* [maxHeight+1];
  Iterator<Key_T,Mapped_T>* tmp = head;
  Key_T cmpKey;

  // Figure out where new node goes
  for ( h = curHeight; h >= 1; h-- )
  {
    cmpKey = tmp->fwdNodes[h]->getKey();
    while ( !tmp->fwdNodes[h]->isTail() && cmpKey < k )
    {
      tmp = tmp->fwdNodes[h];
      cmpKey = tmp->fwdNodes[h]->getKey();
    }
    updateVec[h] = tmp;
  }

  tmp = tmp->fwdNodes[1];
  cmpKey = tmp->getKey();

  // If dup, return false
  if ( !tmp->isTail() && cmpKey == k )
  {
    delete updateVec;
    return std::pair<Iterator<Key_T,Mapped_T>, bool> ( NULL,false);
  }
  else
  {
    // Perform an insert
    lvl = randGen->newLevel();
    if ( lvl > curHeight )
    {
      for ( int i = curHeight + 1; i <= lvl; i++ )
        updateVec[i] = head;
      curHeight = lvl;
    }
    // Insert new element
    tmp = new Iterator<Key_T,Mapped_T>(k, o, lvl);
    for ( int i = 1; i <= lvl; i++ )
    {
      tmp->fwdNodes[i] = updateVec[i]->fwdNodes[i];
      updateVec[i]->fwdNodes[i] = tmp;
    }

    delete updateVec;
    return std::pair<Iterator<Key_T,Mapped_T>, bool> (*tmp , true);
  }
  delete updateVec;
  return std::pair<Iterator<Key_T,Mapped_T>, bool> ( NULL,false);
} 
```

它有什么问题？调试了很长时间，我想不通。以下代码给出了内存转储错误！

```
 std::pair < Iterator<int,float>,bool> a = s.insert(std::pair<int,int>(1,1));
  s.insert(std::pair<int,int>(2,1));
  s.insert(std::pair<int,int>(3,2)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:27:23.937

您的迭代器实现违反[了规则三](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)。如果您创建或分配迭代器的副本，您将获得 2 个`fwdNodes`指向相同内存位置的迭代器。一旦其中一个被删除，另一个最终将`fwdNodes`指向已经释放的内存。

# jquery - jQuery 通过数组运行以每 5 秒替换一次页面标题

> ID：16060710
> 
> 赞同：0
> 
> 时间：2013-04-17T12:58:45.030
> 
> 标签：jquery, arrays, page-title

我以前使用过此代码，但它使数组随机化。但我似乎无法让这个脚本每 5 秒更改一次页面标题。

```
<script type="text/javascript">
    $(document).ready(function() {
        var helloArray = ["hello", "bonjour", "hola", "konnichiwa", "hujambo", "cześć", "hei", "ciao"];
        $('#page_title').loadText( helloArray, 5000 ); // ( array, interval )
        document.title = $('#page_title').text();
    });
    // custom jquery plugin loadText()
    $.fn.loadText = function( textArray, interval ) {
        return this.each( function() {
            var obj = $(this);
            obj.fadeOut( 'slow', function() { 
                obj.empty().html( random_array( textArray ) );  
                obj.fadeIn( 'fast' );
            });
            timeOut = setTimeout( function(){ obj.loadText( textArray, interval )}, interval );
            $("#text-reload").click( function(){ 
                if( !obj.is(':animated') ) { clearTimeout( timeOut ); obj.loadText( textArray, interval );} // animation check prevents "too much recursion" error in jQuery 
            });
        });
    }
    //public function
    function random_array( aArray ) {
        var rand = Math.floor( Math.random() * aArray.length + aArray.length );
        var randArray = aArray[ rand - aArray.length ];
        return randArray;
    }
</script> 
```

`#page_title`我已经在我的页面中放置了一个 div `display:none`，该 div 上的内容发生了变化，但标题却没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:48:22.823

如果您不关心在动画停止后保留数组的顺序，您可以使用以下命令：

```
// custom jquery plugin loadText()
$.fn.loadText = function( textArray, interval ) {
    return this.each( function() {
        var obj = $(this);
        obj.fadeOut( 'slow', function() {
            var elem = textArray[0];
            obj.empty().html( elem );
            textArray.shift();
            textArray.push(elem);
            obj.fadeIn( 'fast' );
        });
        timeOut = setTimeout( function(){ obj.loadText( textArray, interval )}, interval );
        $("#text-reload").click( function(){ 
            if( !obj.is(':animated') ) { clearTimeout( timeOut ); obj.loadText( textArray, interval );} // animation check prevents "too much recursion" error in jQuery 
        });
    });
};

$(document).ready(function() {
    var helloArray = ["hello", "bonjour", "hola", "konnichiwa", "hujambo", "cześć", "hei", "ciao"];
    $('#page_title').loadText( helloArray, 5000 ); // ( array, interval )
    document.title = $('#page_title').text();
}); 
```

请注意，您 shift() 数组，然后将每个元素 push() 回到数组的末尾，因此如果停止循环，数组可能与发送它的顺序不同。

jsFiddle：http: [//jsfiddle.net/hY2rv/1/](http://jsfiddle.net/hY2rv/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:38:30.250

尝试

```
$(document).ready(function() {
    var helloArray = ["hello", "bonjour", "hola", "konnichiwa", "hujambo",
            "cześć", "hei", "ciao"];
    $('#page_title').loadText(helloArray, 5000); // ( array, interval )
    document.title = $('#page_title').text();
});
// custom jquery plugin loadText()
$.fn.loadText = function(textArray, interval) {
    return this.each(function() {
        var obj = $(this), intervalId;

        function change() {
            obj.fadeOut('slow', function() {
                var text = random_array(textArray);
                obj.html(text).fadeIn('fast');
                document.title = text;
            });
        }

        function start() {
            intervalId = setInterval(change, interval);
        };

        start();

        $("#text-reload").click(function() {
            if (!obj.is(':animated')) {
                clearInterval(intervalId);
                start();
            }
        });
    });
}
// public function
function random_array(aArray) {
    var rand = Math.floor(Math.random() * aArray.length + aArray.length);
    var randArray = aArray[rand - aArray.length];
    return randArray;
} 
```

# java - java.lang.NoSuchMethodError 与 XML

> ID：16060712
> 
> 赞同：0
> 
> 时间：2013-04-17T12:58:56.863
> 
> 标签：java, xml, xml-parsing, jaxb, jax-ws

我有以下 XML

```
@XmlRootElement
@XmlType(propOrder = { "name", "transforms", "qualitycontrols"})
@XmlAccessorType(XmlAccessType.NONE)
public class Process {

@XmlElement
private String name;      

@XmlElement(name = "transform")
private List<Transform> transforms = new ArrayList<Transform>();

@XmlElement(name = "qualitycontrol")
private List<QualityControl> qualitycontrols = new ArrayList<QualityControl>();

public Process() {
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}  

public void add(Transform transform) {
    transforms.add(transform);
}

public List<Transform> getTransforms() {
    return transforms;
}

public List<QualityControl> getQualitycontrols() {
    return qualitycontrols;
}

public void add(QualityControl qualitycontrol) {
    qualitycontrols.add(qualitycontrol);
}
} 
```

转换节点工作得很好，我添加了不工作的质量控制节点。

```
@XmlRootElement(name="qualitycontrol")
@XmlType(propOrder = { "template"})
public class QualityControl {

private String template;

public QualityControl() {
}

public String getTemplate() {
    return template;
}

public void setTemplate(String template) {
    this.template = template;
}

} 
```

当我使用 public static main 测试此代码时，一切正常，但是当它部署到服务器时，我收到以下消息： ERROR [ProcessMDB] java.lang.NoSuchMethodError: model.Process.getQualitycontrols()Ljava/util/List;

我错过了什么？？高度赞赏所有帮助。

谢谢乔伊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:52:28.447

感谢用户714965！我删除了jar，但仍然遇到同样的错误。于是我去找那个罐子，发现它在另一只耳朵的库里。删除那只耳朵后，事情开始破裂。重建耳朵后，方法找到了！！不再有 java.lang.NoSuchMethodError。再次感谢 ！！在这个上花了很多时间。

# algorithm - Mathematic resolution

> ID：16060718
> 
> 赞同：0
> 
> 时间：2013-04-17T12:59:08.040
> 
> 标签：algorithm, math

I just heard something very insteresting but cannot find any ressources.
The story is that when faced with an algorithmic problem that requiered multiple ifs, one student of a friend did answer with a mathematic one liner.

Now I already knew that you could do anyting with math but I want to be able to do it.
From what I know it might be possible to do a loop given the shape of those function, but conditions?

Does someone know how to resolve something like:

```
IF boolean
  THEN expression
  ELSE expression2 
```

in math terms (without Bool algebra)?

Best regards,

Sarfraz

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:03:31.183

假设`boolean`是 0 或 1，并且表达式是数学的：

```
expr = boolean * expression + (1-boolean) * expression2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:03:05.220

假设布尔值为 0 或 1：

```
result = boolean*expression+(1-boolean)*expression2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T13:13:14.817

你指的是[多路复用器](http://en.wikipedia.org/wiki/Multiplexer)吗？

如果布尔值为 S，表达式为 A，表达式 2 为 B，则结果 Z 的公式为

![Z = (A * S) + (B * ^S)](https://i.stack.imgur.com/iYbvu.png)

# c# - Perform some action when tabbing between labels?

> ID：16060721
> 
> 赞同：2
> 
> 时间：2013-04-17T12:59:09.803
> 
> 标签：c#, winforms, textbox, label, transparent

I know that label can't receive focus, it doesn't seem to be responsive to tab switching. But all I need is perform some action when user uses tab consequently on a form which has only labels. For example, each label has an associated textbox but this textbox is hidden when the label is visible and vice-versa. What I want is allowing user to use tab to switch between the hidden textboxes on the form, normally, all the textboxes are hidden while all the labels are shown, the labels are supposed to be focusable so that when using tab, it can know that (as some event) to show the associated textbox and hide itself, when switching to another label, the current label whose the associated textbox is shown will become visible again and its associated textbox will become hidden.

I have to implement this kind of 2 in 1 control (textbox and label in a composited control) because I just want to show only the text (no border and background) as if the textbox has a transparent background and only show the textbox (and hide the label) when user need to edit (start by clicking on the field or using tab). This should have been easier for me if there was a transparent background textbox but there isn't a decent one in the world of windows forms. Please notice that I also know of the **alpha blend transparent textbox presented in an article in codeproject** but it can't meet my need because the text is rendered wrong with ugly border around the text path (some kind of missing antialiasing but it's even worse than that).

I'm really pity if this mechanism can't be implemented, the forms look better when all the fields seem to show info only but a click or tab switch can let user jump in edit mode. I hope there is some solution out there. Thank you in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:16:32.407

我一时兴起找到了这个解决方案。我不认为有这样的解决方案，但它确实有助于解决我的问题（我相信许多其他人会从中受益）。简单地说，我必须创建自己的 Label 继承**UserControl**。我之前没有想到**UserControl**，它非常有帮助。可聚焦性、透明背景、无边框都是**UserControl**可以轻松完成的。我必须自己做的唯一自定义功能是渲染文本，这也很简单，有很多方法可以做。我只是在**UserControl中添加一个 Label 并将 Label 的 Dock 设置为 DockStyle.Fill，正确调整****UserControl**的高度，仅此而已。

感谢上帝在尝试任何其他复杂的解决方案（例如收听 TAB 和 SHIFT + TAB 按键事件）之前帮助我想到了 UserControl。

# php - 访问级别的逻辑

> ID：16060723
> 
> 赞同：0
> 
> 时间：2013-04-17T12:59:11.013
> 
> 标签：php, logic

我把这个想法记下来了，这么简单，我认为这可能是不切实际的，所以我会评论这样一个系统的优点（如果有的话）和缺点。

目的是开发一个简单但实​​用的系统权限。

![在此处输入图像描述](https://i.stack.imgur.com/KAPvs.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/slUiW.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:15:56.943

我可以看到的问题是，如果你想保护一个特定的函数，你必须突然重命名它以具有`conf_`前缀。

我会围绕一个类编写一个代理，该代理在调用方法时检查文档块。只是一个想法：

```
class ArticlesProxy
{
    private $backend;

    public function __construct(articles $backend)
    {
        $this->backend = $backend;
    }

    public function __call($fn, $args)
    {
        $rm = new ReflectionMethod($this->backend, $fn);
        if (strpos($rm->getDocComment(), 'protected') !== false) {
            // this method is protected by whatever
        }
        // perform the proxy call
        return $rm->invokeArgs($args);
    }
}

$proxy = new ArticlesProxy(new articles());
$proxy->create(1, 2, 3); 
```

# python - 补丁 - 为什么相对补丁目标名称不起作用？

> ID：16060724
> 
> 赞同：34
> 
> 时间：2013-04-17T12:59:16.063
> 
> 标签：python, mocking, patch

我已经从一个模块中导入了一个类，但是当我尝试修补类名而不使用它的模块作为前缀时，我得到一个类型错误：

```
TypeError: Need a valid target to patch. You supplied: 'MyClass' 
```

例如，下面的代码给了我上面的错误：

```
import unittest
from mock import Mock, MagicMock, patch
from notification.models import Channel, addChannelWithName, deleteChannelWithName, listAllChannelNames

class TestChannel(unittest.TestCase):
    @patch("Channel")
    def testAddChannelWithNamePutsChannel(self, *args):
        addChannelWithName("channel1")
        Channel.put.assert_called_with() 
```

虽然代码的第二个版本没有给我类型错误：

```
import unittest
from mock import Mock, MagicMock, patch
from notification.models import Channel, addChannelWithName, deleteChannelWithName, listAllChannelNames

class TestChannel(unittest.TestCase):
    @patch("notification.models.Channel")
    def testAddChannelWithNamePutsChannel(self, *args):
        addChannelWithName("channel1")
        Channel.put.assert_called_with() 
```

这是为什么？为什么我可以在其他地方将 Channel 引用为“Channel”，而对于补丁我需要模块前缀才不会出错？另外，我有一种感觉，给出完整的模块前缀也不起作用，因为当我调用 Channel.put.assert_call_with() 时，我得到一个错误，即 assert_call_with 不是 Channel.put 的属性。有人可以解释发生了什么吗？非常感谢！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-17T21:34:38.720

The `patch` decorator requires the target to be a full dotted path, as stated in the [documentation](https://docs.python.org/3/library/unittest.mock.html#patch):

> target should be a string in the form ‘package.module.ClassName’. The target is imported and the specified object replaced with the new object, so the target must be importable from the environment you are calling patch from. The target is imported when the decorated function is executed, not at decoration time.

`"Channel"` is just a string, and `patch` does not have enough information to find the proper class. This is not the same as the name `Channel` you use elsewhere, which is imported at the top of the module.

第二个测试失败，因为 Channel 被导入到测试模块中，**然后**patch 用模拟对象替换了 notification.models 中的 Channel。patch 实际所做的是更改在 notification.models 中使用的**名称**Channel 指向的对象。测试模块中的名称 Channel 已经定义好了，所以不受影响。这实际上在这里得到了更好的解释：[https ://docs.python.org/3/library/unittest.mock.html#where-to-patch](https://docs.python.org/3/library/unittest.mock.html#where-to-patch)

要访问对象的修补版本，您可以直接访问模块：

```
import unittest 
from unittest.mock import patch 
from notification.models import Channel, addChannelWithName  
from notification import models 

class TestChannel1(unittest.TestCase): 
    @patch("notification.models.Channel") 
    def testAddChannelWithNamePutsChannel(self, *args): 
        addChannelWithName("channel1") 
        models.Channel.put.assert_called_with("channel1") 
```

或者使用作为额外参数传递给装饰函数的修补版本：

```
class TestChannel2(unittest.TestCase): 
    @patch("notification.models.Channel") 
    def testAddChannelWithNamePutsChannel(self, mock_channel): 
        addChannelWithName("channel1") 
        mock_channel.put.assert_called_with("channel1") 
```

如果您只想快速修补对象上的单个方法，通常使用`patch.object`装饰器更容易：

```
class TestChannel3(unittest.TestCase):
    @patch.object(Channel, 'put')    
    def testAddChannelWithNamePutsChannel(self, *arg): 
        addChannelWithName("channel1") 
        Channel.put.assert_called_with("channel1") 
```

# java - 使用 Comparator 比较对象内的浮点数列表

> ID：16060726
> 
> 赞同：0
> 
> 时间：2013-04-17T12:59:20.663
> 
> 标签：java

您好，我正在尝试先从 ArrayList 中的最高值排序浮点数列表，然后再到最低值。

CustomObject 持有一个对象，该对象的值为 float。

到目前为止，我正在这样做（失败，没有做任何事情）。

```
Collections.sort(mNaturalResistanceBoxes, new Comparator < PercentageBox > () {
    public int compare(PercentageBox o1, PercentageBox o2) {
        return o1.mCountry.mNaturalResistance 
          < o2.mCountry.mNaturalResistance ? -1 : 
             o1.mCountry.mNaturalResistance > o2.mCountry.mNaturalResistance ? 1 : 0;
    }
}); 
```

谁能让我知道我要去哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T13:30:33.693

您的代码完美运行：

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

public class Snippet {

    static class Country {

        float mNaturalResistance;
    }

    static class PercentageBox {

        Country mCountry = new Country();
    }

    public static void main(final String[] args) {
        List< PercentageBox > mNaturalResistanceBoxes = new ArrayList< Snippet.PercentageBox >();
        for (int i = 0; i < 4; i++) {
            mNaturalResistanceBoxes.add(new PercentageBox());
        }

        mNaturalResistanceBoxes.get(0).mCountry.mNaturalResistance = 3.3f;
        mNaturalResistanceBoxes.get(1).mCountry.mNaturalResistance = 2.2f;
        mNaturalResistanceBoxes.get(2).mCountry.mNaturalResistance = 4.4f;
        mNaturalResistanceBoxes.get(3).mCountry.mNaturalResistance = 1.1f;

        Collections.sort(mNaturalResistanceBoxes, new Comparator< PercentageBox >() {

            @Override
            public int compare(final PercentageBox o1, final PercentageBox o2) {
                return o1.mCountry.mNaturalResistance < o2.mCountry.mNaturalResistance ? -1
                    : o1.mCountry.mNaturalResistance > o2.mCountry.mNaturalResistance ? 1 : 0;
            }
        });

        for (PercentageBox box : mNaturalResistanceBoxes) {
            System.out.println(box.mCountry.mNaturalResistance);
        }
    }
} 
```

输出：

```
1.1
2.2
3.3
4.4 
```

# liferay - Liferay Login Log of Live Users

> ID：16060727
> 
> 赞同：1
> 
> 时间：2013-04-17T12:59:23.043
> 
> 标签：liferay, liferay-6

How to get liferay login concurrent user's log to find how many users online at a time?

How to maintain user's activity log?

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:19:15.517

您只能看到实时用户。如果 portlet 是自定义的，您可以在代码中输入日志以查看活动，但如果您想要 liferay 的 portlets 活动，则需要对代码进行大量更改。要查看用户，首先在 portal-ext.properties 中添加以下内容。它在门户属性中设置为 false。

**live.users.enabled=true**

现在您可以在*控制面板的监控菜单*中看到当前在服务器上的用户。

# php - 覆盖 IIS 上的 php.ini 设置

> ID：16060730
> 
> 赞同：0
> 
> 时间：2013-04-17T12:59:27.663
> 
> 标签：php, windows, iis, web-config

我试图在 Windows 服务器上制作一个 PHP 上传表单，但由于没有临时目录，所以上传不起作用。`upload_temp_dir`我检查了为和设置了`phpinfo()`哪个值`"no value"`。

是否可以覆盖`upload_tmp_dir`IIS 上的 php.ini 设置？我无权访问 php.ini 文件。我寻找在 web.config 文件的帮助下更改它的可能性，但没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:03:47.473

看看功能 `init_set()`

[http://php.net/manual/en/function.ini-set.php](http://php.net/manual/en/function.ini-set.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-10T01:28:42.190

您可以通过创建“.user.ini”文件来更改 PHP 配置。例如，以下将为您的网站启用短打开标记：

> short_open_tag = 开启

将文件上传到站点的根目录。

*   如果 PHP 版本是 5.3 或 5.6 文件名是：user.ini
*   对于任何其他 PHP 版本，文件名是：.user.ini

# javascript - submit ajax request on keyboard ENTER

> ID：16060734
> 
> 赞同：1
> 
> 时间：2013-04-17T12:59:39.587
> 
> 标签：javascript, jquery, ajax

I have on click jquery that submits ajax request.

There are no forms.

I'd like keyboard ENTER to be used also to submit ajax request.

I've allot of these buttons, this confuses me as I cannot simply do:

```
$('#myForm input:text').keypress(function (e) {
  if (e.which == 13) {
    $("#button1").click()
  }
}); 
```

My currect on click event looks like this (how do I extend this to accomodate ENTER?)

```
//Check answer
$("body").on("click", ".unlocked figcaption .check", function(){
    var logo_id = $(this).parent().attr("id");
    var answer = $("#" + logo_id + " input[name=guesslogo]");
    var logo_lang = answer.attr("data-lang");

    answer.removeAttr("class").attr("disabled","true");

        //Submit answer for review
        $.ajax({
            url: "actions.php",
            get: "GET",
            data: "answer=" + answer.val() + "&logo_id=" + logo_id + "&logo_lang=" + logo_lang,
            cache: false,
            success: function (data){
                var response = jQuery.parseJSON(data);
                if (response.result == 1) {
                    answer.addClass("correct").siblings(".clear, .hint").fadeTo("slow","0.4");
                    answer.parent().append('<div class="alert"><h3>Correct!</h3> <p>Score: '+ response.score +'</p></div>');
                    $("#" + logo_id).siblings(".logo").removeClass("logo").addClass("answered").removeAttr("style");
                    snd_correct.play();
                        //update user_score and user_level values in leaderboard and header widgets
                        var this_user = $("header aside").attr("data-usern");
                        if (this_user) {
                            var this_user_score = $("header aside .user_score").text();
                            var this_user_level = $("header aside .user_level").text();
                                $("[data-usern="+ this_user +"] .user_score").empty().append(parseInt(this_user_score) + parseInt(response.score));
                                if (response.level_up == 1) {
                                    var new_level = parseInt(this_user_level) +1;
                                    $("[data-usern="+ this_user +"] .user_level").empty().append(new_level);
                                    update_view(new_level);
                                }
                            //
                            update_level_progress_bar();
                        }
                } else if (response.result == 0) {
                    answer.addClass("wrong").removeAttr("disabled");
                    snd_wrong.play();
                } else if (response.result == 2) {
                    answer.addClass("almost").removeAttr("disabled");
                    snd_wrong.play();
                }
            }
        });

    return false;
}); 
```

I uploaded sample here: [http://gamoicani.es/logo/](http://gamoicani.es/logo/) click on any logo, I'd like to use keyboard ENTER also to submit.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:39:18.683

// 尝试这个！！:)

```
$(document).ready(function(){
  $(this).on('keypress click','.unlocked figcaption .check',function(e){
    if((e.type === 'keypress' && e.keyCode === 13) || e.type === 'click')
    {
       // All your code inside the .on()
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:29:25.580

您可以将 ajax 函数设为外部，然后在单击和按键（输入）事件时调用它，如下所示：

```
$(document).on("click", ".unlocked figcaption .check", ajaxFunction);
$(document).on("keypress", "#myForm input:text", function (e) {
  if (e.keyCode == 13){
      e.preventDefault();
      ajaxFunction();
  }
});

function ajaxFunction(){
    var logo_id = $(this).parent().attr("id");
    var answer = $("#" + logo_id + " input[name=guesslogo]");
    var logo_lang = answer.attr("data-lang");

    answer.removeAttr("class").attr("disabled","true");

        //Submit answer for review
        $.ajax({
            url: "actions.php",
            get: "GET",
            data: "answer=" + answer.val() + "&logo_id=" + logo_id + "&logo_lang=" + logo_lang,
            cache: false,
            success: function (data){
                var response = jQuery.parseJSON(data);
                if (response.result == 1) {
                    answer.addClass("correct").siblings(".clear, .hint").fadeTo("slow","0.4");
                    answer.parent().append('<div class="alert"><h3>Correct!</h3> <p>Score: '+ response.score +'</p></div>');
                    $("#" + logo_id).siblings(".logo").removeClass("logo").addClass("answered").removeAttr("style");
                    snd_correct.play();
                        //update user_score and user_level values in leaderboard and header widgets
                        var this_user = $("header aside").attr("data-usern");
                        if (this_user) {
                            var this_user_score = $("header aside .user_score").text();
                            var this_user_level = $("header aside .user_level").text();
                                $("[data-usern="+ this_user +"] .user_score").empty().append(parseInt(this_user_score) + parseInt(response.score));
                                if (response.level_up == 1) {
                                    var new_level = parseInt(this_user_level) +1;
                                    $("[data-usern="+ this_user +"] .user_level").empty().append(new_level);
                                    update_view(new_level);
                                }
                            //
                            update_level_progress_bar();
                        }
                } else if (response.result == 0) {
                    answer.addClass("wrong").removeAttr("disabled");
                    snd_wrong.play();
                } else if (response.result == 2) {
                    answer.addClass("almost").removeAttr("disabled");
                    snd_wrong.play();
                }
            }
        });

    return false;
}; 
```

[jsfiddle](http://jsfiddle.net/arcm111/yfNQb/)

# jquery - REST and jquery ajax

> ID：16060735
> 
> 赞同：0
> 
> 时间：2013-04-17T12:59:39.483
> 
> 标签：jquery, rest

when I use jquery and ajax am I using REST? Is rest just asynchronous post/get etc?

```
$.ajax({
  type: "POST",
  url: "some.php",
  data: { name: "John", location: "Boston" }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:05:08.810

不，它与服务 url 的形成方式有关。以及访问它们的方法 GET、POST、PUT 等

例子，

> GET /item/all <- 给出所有项目
> 
> GET /item/id <- 给出由 id 标识的项目
> 
> POST /item <- 创建新项目
> 
> PUT /item/id <- 更新由 id 标识的项目
> 
> DELETE /item/id <- 删除由 id 标识的项目

# ruby - 超时和打开超时有什么区别？

> ID：16060743
> 
> 赞同：11
> 
> 时间：2013-04-17T12:59:50.027
> 
> 标签：ruby, rest-client

在 Ruby RestClient gem 中，超时和打开超时功能有什么区别？

[http://www.ruby-doc.org/gems/docs/w/wgibbs-rest-client-1.0.5/RestClient/Resource.html#method-i-open_timeout](http://www.ruby-doc.org/gems/docs/w/wgibbs-rest-client-1.0.5/RestClient/Resource.html#method-i-open_timeout)

我也没有从 gem 的 doc 文件中得到任何东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-17T13:18:47.997

您正在阅读错误的文档（您的是自 2009 年以来未更新的[wgibbs-rest-client ）：](http://rubygems.org/gems/wgibbs-rest-client)[这是正确的](http://rubydoc.info/github/rest-client/rest-client/frames)。但是那个也没有说任何区别，尽管它很简单：

`:open_timeout`是打开连接的超时时间。如果您调用响应时间缓慢或不稳定的服务器，这很有用。

`:timeout`是阅读答案的超时时间。这有助于确保您不会在阅读过程中卡住一半，或者在您期望 5 KB 的`JSON`.

# c# - 如何将类对象转换为字符串？

> ID：16060745
> 
> 赞同：25
> 
> 时间：2013-04-17T12:59:55.617
> 
> 标签：c#, .net, wcf, reflection

我有一个通过 Web 服务 (WCF) 提供的类对象。该类具有字符串类型的属性和一些自定义类类型。

如何获取自定义类类型的属性的属性名称和属性名称。

我尝试使用 GetProperies() 进行反射，但失败了。如果属性类型是字符串类型，GetFields() 给了我一些成功，我还想获取自定义类型属性的属性。

这是我的代码。

```
public static string ToClassString(this object value)
{
    if (value == null)
        return null;
    var builder = new StringBuilder();
    builder.Append(value.GetType().Name + "{ ");
    foreach (var prop in value.GetType().GetFields(
BindingFlags.Public
| BindingFlags.Static | BindingFlags.Instance | BindingFlags.FlattenHierarchy | BindingFlags.GetProperty))
    {
        builder.Append("{ ");
        builder.Append(prop.Name + " , ");
        switch (prop.FieldType.Namespace)
        {
            case "System":
                builder.Append(prop.GetValue(value) + " }");
                break;
            default:
                builder.Append(prop.GetValue(value).ToClassString() + " }");
                break;
        }
    }
    builder.Append("}");
    return builder.ToString();
} 
```

我得到的输出为

> NotifyClass{ { UniqueId , 16175 }{ NodeInfo , **NodeInfo{ }** }{ EventType , SAPDELETE }}

这是我想将其实例转换为字符串的类

```
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0")]
[System.ServiceModel.MessageContractAttribute(WrapperName="NotifyReq", WrapperNamespace="wrapper:namespace", IsWrapped=true)]
public partial class Notify
{

    [System.ServiceModel.MessageBodyMemberAttribute(Namespace="custom:namespace", Order=0)]
    public int UniqueId;

    [System.ServiceModel.MessageBodyMemberAttribute(Namespace="custom:namespace", Order=1)]
    public eDMRMService.NodeInfo NodeInfo;

    [System.ServiceModel.MessageBodyMemberAttribute(Namespace="custom:namespace", Order=2)]
    public string EventType;

    public Notify()
    {
    }

    public Notify(int UniqueId, eDMRMService.NodeInfo NodeInfo, string EventType)
    {
        this.UniqueId = UniqueId;
        this.NodeInfo = NodeInfo;
        this.EventType = EventType;
    }
} 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-04-17T13:02:20.863

无需重新发明轮子。使用[Json.Net](http://json.codeplex.com/)

```
string s = JsonConvert.SerializeObject(yourObject); 
```

就这些。

您还可以使用 JavaScriptSerializer

```
string s = new JavaScriptSerializer().Serialize(yourObject); 
```

# php - Two column ("gap") layout issues

> ID：16060747
> 
> 赞同：0
> 
> 时间：2013-04-17T12:24:14.223
> 
> 标签：php, css, wordpress, loops

I have created a two column layout wordpress loop and it is working *almost* good. The problem is that if I have really long content or image with large height I am getting some layout issues (having a large gap between my post's).

My two column loop looks like this:

```
<?php 
    $show_all_posts = '';
    $col = 1; //Let's create first column
    /*Let's add pagination to post page and static page*/
    if ( get_query_var('paged') ) {
    $paged = get_query_var('paged');
    } elseif ( get_query_var('page') ) {
    $paged = get_query_var('page');
    } else {
    $paged = 1;
    }

    query_posts(array(
     'paged' => $paged, 
     'post__not_in' => $show_all_posts//added blank value variable in order to show posts if template is         
    ));                   //assigned as Front Page!!
    if(have_posts()) : while(have_posts()) : the_post(); 

    ?>
<?php if ($col == 1) echo '<div class="row">';//If column 1 create first row ?>
<?php if ($col == 2) echo '<div class="row2">';//If column 2 create second row ?>
    <div <?php post_class('col'.$col); ?>>
    <h3><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h3>
        <div class="entry"> 
                <div class="featured_img">
                <?php the_post_thumbnail();
      echo '<div class="featured_caption">' . get_post(get_post_thumbnail_id())->post_excerpt . '</div>';?>
     </div><!--/featured_img-->
        <?php  // let's enable more link on pages...
        global $more;
        $more = 0;
        ?>
            <?php the_content(); ?>
            <p class="postmetadata">
            <?php _e('Filed under&#58;'); ?> <?php the_category(', ') ?> <?php _e('by'); ?> <?php  the_author(); ?><br/><?php the_tags(); ?><br/>
            <?php comments_popup_link('No Comments &#187;', '1 Comment &#187;', '% Comments &#187;'); ?> <?php edit_post_link('Edit', ' &#124; ', ''); ?>
            </p>
        </div>
    </div>

    <?php /*Enable Two Column Layout*/
        if($col==1) {
        $col=2;
        echo "</div>";
        }
        else if($col==2)  {
        $col=1;
         echo "</div>";
        }

    endwhile; ?>
    <div class="clear"></div>
    <div class="navigation">

    <?php
    global $wp_query;
    $big = 999999999; // need an unlikely integer

    echo paginate_links( array(
    'base' => str_replace( $big, '%#%', esc_url( get_pagenum_link( $big ) ) ),
    'format' => '?paged=%#%',
    'current' => max( 1, $paged ),
    'total' => $wp_query->max_num_pages
    ) );
        ?>
</div>
<?php endif; ?> 
<?php wp_reset_query();?>       
</div><!--/blogs--> 
</div><!--/blogswrapper--> 
```

CSS looks like this:

```
 /*START styles for two column layout*/
 .row { clear: left; }
 .row2 { clear: right; }
 .col1 { width: 262px;float:left;display:block;position:relative;margin-right:8px;}
 .col2 { width: 262px;float:right;display:block;}
 /*END styles for two column layout*/ 
```

Can someone suggest some kind of a solution for removing a "gap" between my posts?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:32:42.363

恐怕这就是[CSS 浮动](https://developer.mozilla.org/en-US/docs/CSS/float)的工作方式。为了实现您的意图，您可以执行以下操作之一：

*   每个帖子都有一个固定的高度。
*   使用[`column-count`](https://developer.mozilla.org/en-US/docs/CSS/column-count)CSS3 属性，但您必须注意[并非所有浏览器都支持它](http://caniuse.com/#search=column-count)的事实。看看这个[**例子**](http://jsfiddle.net/sunyatasattva/4gXCs/5/)。
*   使用[jQuery 砌体](http://masonry.desandro.com/)

# html - 如何设置高度以填充父节点的高度？

> ID：16060749
> 
> 赞同：0
> 
> 时间：2013-04-17T13:00:01.510
> 
> 标签：html, css, css-tables

我想尝试使用纯 CSS 和`div`/`span`元素制作 HTML 表格。我目前有以下[jsFiddle](http://jsfiddle.net/pAnnN/)。但是表格单元格...

```
 .table .table-cell {
      float: left;
      padding: 0 10px;
      border: 1px solid #000;
      display: table-cell;
 } 
```

...元素不填充父行的高度。

请帮我解决我的问题。

**编辑**：我使用纯 CSS 而不是 table 元素来提高性能。

**EDIT2**：是否可以模拟`colSpan`和`rowSpan`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:10:00.740

表格单元格不能是浮点数。从这个[Fiddle](http://jsfiddle.net/pAnnN/26/)`float: left`中的类似内容中删除：`.table-cell`

```
.table .table-cell {
    /* float: left; */
    padding: 0 10px;
    border: 1px solid #000;
    display: table-cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:16:20.960

试试这个，而不是你的风格：

```
.table .table-cell {
      padding: 0 10px;
      border: 1px solid #000;
      display: table-cell;
 } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-17T13:07:32.193

试试下面的代码

```
.table .table-cell {
    float: left;
    padding: 0 10px;
    border: 1px solid #000;
    display: table-cell;
    height: 100%;
} 
```

# javascript - Set radio button value in javascript

> ID：16060751
> 
> 赞同：1
> 
> 时间：2013-04-17T13:00:12.253
> 
> 标签：javascript, jquery, html, jquery-mobile

I am trying to set the value of the radio button via javascript. But I am not being able to do so. What I tried to do was have 4 radio buttons one of which is already selected. If I select some other radio button and click on Refresh, default radio button should be selected.

[http://jsfiddle.net/ds345/Un8XK/1/](http://jsfiddle.net/ds345/Un8XK/1/)

HTML:

```
<fieldset data-role="controlgroup" data-type="vertical">
    <input type="radio" name="radio" id="x" data-theme="a" />
    <label for="x" style="color: White">X</label>
    <input type="radio" name="radio" id="y" onclick="axisonoff(this)" data-theme="a" />
    <label for="y" style="color: White">Y</label>
    <input type="radio" name="radio" id="z" data-theme="a" />
    <label for="z" >Z</label>
    <input type="radio" name="radio" id="none" data-theme="a" />
    <label for="none" style="color: White">None</label>
</fieldset>

<button id = "Refresh" value="Refresh">Refresh</button> 
```

JS:

```
$(document).ready(function () {
    $("#none").attr("checked", true).checkboxradio("refresh"); // if this line is not present initially then it works for the 1st refresh. 

});

$("#Refresh").click(function(){
        $("#x").attr("checked", false).checkboxradio("refresh");
        $("#y").attr("checked", false).checkboxradio("refresh");
        $("#z").attr("checked", false).checkboxradio("refresh");
    $("#none").attr("checked", true).checkboxradio("refresh");
}); 
```

I am sure that I have missed something very small but not able to figure out why this approach is not working.

Tools used: Javascript,Jquery 1.9 and JQuery mobile 1.3

Thanks,

Deeksha

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T13:03:01.903

在处理布尔属性时应该使用`prop`over 。`attr`

`.attr("checked", false)`将添加`checked="false"`到您的元素。
在 HTML 中，与属性`<input checked="false" .../>`相同`<input checked="true" .../>`或只是`<input checked .../>`简单地需要出现在元素上才能使其处于活动状态。
请参阅此[JSFiddle 示例](http://jsfiddle.net/KmYqn/)。

更改您的代码以使用[`.prop()`](http://api.jquery.com/prop/)：

```
$("#none").prop("checked", false)... 
```

这是您的 JSFiddle 演示的固定版本：http: [//jsfiddle.net/Un8XK/8/](http://jsfiddle.net/Un8XK/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:19:48.050

您错过的是不需要脚本。只需使用带有重置按钮的表单：

```
<form>
  <input type="radio" name="radio" value="0" checked>0<br>
  <input type="radio" name="radio" value="1">1<br>
  <input type="radio" name="radio" value="2">2<br>
  <input type="radio" name="radio" value="3">3<br>
  <input type="reset">
</form> 
```

如果您确实**必须**使用脚本，您可以通过在表单中​​添加一个按钮来简单地将单选按钮恢复为默认值：

```
<input type="button" onclick="reset(this.form.radio);" value="Script reset"> 
```

和一个功能：

```
<script>
function reset(els) {
    for (var i=0, iLen=els.length; i<iLen; i++) {
        els[i].checked = els[i].defaultChecked;
    }
}
</script> 
```

# javascript - unable to move a div to right which is creating dynamically

> ID：16060754
> 
> 赞同：-2
> 
> 时间：2013-04-17T13:00:15.177
> 
> 标签：javascript, jquery

I have 2 buttons in my `div`, left side and right side. When I click on right button it need to move to right and for left button it need to move to left. I used:

```
 $('.left').click(function(e) {
                     $('#votersDetailsTable').animate({
                     'marginLeft': '30px'
                     });                
           }); 
```

can i use like

```
 $('.left').click(function(e) {         

             $('#votersDetailsTable').live("animate",{
            'marginLeft': '30px'
            });                
        }); 
```

Here `maindiv` is also creating dynamically .I am unable to move the div.Please help me.Thanks in advance..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:10:01.120

在动画之前放置警报以检查控件是否进入点击功能。如果不尝试使用`.on()`而不是`.live()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:05:55.453

尝试将 div 的位置`relative`放入您的 css 文件中

```
#mainDiv{
    position:relative;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:06:20.877

我们需要查看更多包含这些按钮的 css 和 html。但是，您的问题是您正在为属性设置动画，该属性仅在定位（或）`left`时才会执行。`#mainDiv``absolute``fixed`

您可以在里面更改的属性`jQuery.animate()`是 css 属性。所以你可能会想要`marginLeft`.

通常，当我必须动态创建元素然后对其进行动画处理时，我会写出前后的 html / css 并找出差异以找出要动画处理的属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T13:16:47.070

[**工作演示**](http://jsfiddle.net/mohammadAdil/zR72r/1/)

[有关左侧 css 属性，请参阅 MDN 文档](https://developer.mozilla.org/en-US/docs/CSS/left)

`left`仅适用于定位元素

```
#mainDiv{
    position:relative;
} 
```

# memory-management - 关于操作系统TCB的一些说明

> ID：16060760
> 
> 赞同：0
> 
> 时间：2013-04-17T13:00:27.980
> 
> 标签：memory-management, operating-system

我是一名计算机本科生，正在学习操作系统课程。对于我的任务，我需要实现一个简单的线程管理系统。

我正在为 TCB 创建一个结构。根据我的讲义，我可以在 TCB 中拥有的是：

寄存器、程序计数器、堆栈指针、线程 ID 和进程 ID

现在根据我的讲义，每个线程都应该有自己的堆栈。我的问题是这样的：

仅仅通过存储堆栈指针，我可以为每个线程保留一个唯一的堆栈吗？如果我这样做了，一个线程堆栈不会覆盖其他堆栈吗？

我怎样才能防止这种情况？限制每个线程的堆栈？？？请告诉我这通常在正常操作系统中是如何完成的。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:01:26.157

操作系统可以通过监视位于地址空间堆栈部分周围的不可访问页面的页面错误来控制堆栈增长。这有助于检测少量堆栈溢出。

但是，如果您将堆栈指针移出地址空间的堆栈区域并使用它来访问内存，您可能会进入全局变量或堆或代码或另一个线程的堆栈并破坏那里的任何内容。

线程在相同的地址空间中运行是有原因的，以便以最小的开销在彼此之间共享代码和数据，并且它们的堆栈通常不会被共享，被访问。

操作系统通常无法做任何事情来防止程序发生堆栈溢出和损坏并帮助它们从中恢复。操作系统根本不知道也不知道任意程序是如何工作的以及它应该做什么，因此它不知道什么时候开始出错以及如何处理它们。操作系统唯一能做的就是终止一个做错事的程序，比如试图访问不可访问的资源（内存、系统寄存器等）或执行无效或不可访问的指令。

# java - 如何在 ubuntu 的 tomcat 上运行网站？

> ID：16060762
> 
> 赞同：-1
> 
> 时间：2013-04-17T13:00:34.397
> 
> 标签：java, tomcat, ubuntu, jboss

好吧，我想在我正在运行的 tomcat 服务器上运行一个使用 eclipse 和 jboss 制作的网站。

应用程序的结构：

应用程序/构建/
应用程序/资源/
应用程序/src/
应用程序/WebContent/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:08:39.473

以下是步骤：

1.  安装 Tomcat。
2.  启动 Tomcat。
3.  为您的应用程序创建一个 WAR 文件。
4.  在 Tomcat /webapps 文件夹中部署 WAR 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:05:07.920

Ubuntu 的文档非常好，您是否真的在寻找解决方案？

[https://help.ubuntu.com/12.04/serverguide/tomcat.html](https://help.ubuntu.com/12.04/serverguide/tomcat.html)

这将引导您完成设置和配置。

# apache-zookeeper - 为什么 ZooKeeper 需要多数才能运行？

> ID：16060763
> 
> 赞同：12
> 
> 时间：2013-04-17T13:00:37.123
> 
> 标签：apache-zookeeper

我一直想知道为什么 ZooKeeper 需要集成中的大多数机器才能工作。假设我们有一个非常简单的 3 台机器集合 - A、B、C。

当 A 失败时，会选出新的领导者——很好，一切正常。当另一个人死了，比如说B，服务不可用。是否有意义？为什么机器 C 不能单独处理所有事情，直到 A 和 B 再次启动？

由于一台机器足以完成所有工作（例如单机合奏工作正常）......

ZooKeeper 以这种方式设计有什么特别的原因吗？有没有办法配置 ZooKeeper，例如，当 N 中的至少一个启动时，集成始终可用？

**编辑：** 也许有一种方法可以应用自定义的领导者选择算法？或者定义法定人数？

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T13:04:31.343

Zookeeper 旨在可靠地分发事物。如果系统网络变得分段，那么您不希望两部分独立运行并可能不同步，因为当故障解决时，它不知道该做什么。如果它在不到多数的情况下拒绝运行，那么您可以放心，当故障解决后，一切都会恢复正常，无需进一步干预。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-19T19:37:08.300

获得多数票的原因是为了避免所谓的“脑裂”问题。

基本上在网络故障中，您不希望系统的两个部分像往常一样继续。您希望一个继续，另一个了解它不是集群的一部分。

实现这一目标的主要方法有两种，一种是持有共享资源，例如领导者持有锁的共享磁盘，如果你能看到锁，你就是集群的一部分，如果你没有，你就退出了。如果你拿着锁，你就是领导者，如果你没有，你就不是。这种方法的问题是您需要该共享资源。

防止脑裂的另一种方法是多数票，如果您获得足够的选票，您就是领导者。这仍然适用于两个节点（法定人数为 3），其中领导者说它是领导者，而充当“见证人”的另一个节点也同意。这种方法更可取，因为它可以在无共享架构中工作，而这正是 Zookeeper 使用的

正如迈克尔所提到的，一个节点无法知道它看不到集群中其他节点的原因是因为这些节点已关闭还是存在网络问题 - 安全的赌注是说没有仲裁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-06T10:23:28.820

让我们看一个示例，该示例说明如果法定人数（正在运行的服务器的大多数）太小，事情会如何出错。

假设我们有五台服务器，法定人数可以是任何两台服务器的集合。现在假设服务器 s1 和 s2 承认他们已经复制了创建 znode /z 的请求。服务返回给客户端说 znode 已经创建。现在假设服务器 s1 和 s2 在有机会将新的 znode 复制到其他服务器之前，与其他服务器和客户端分开了任意长的时间。处于这种状态的服务能够取得进展，因为有三台服务器可用，根据我们的假设实际上只需要两台，但这三台服务器从未见过新的 znode /z。因此，创建 /z 的请求是不持久的。

**这是脑裂场景的一个例子**。为避免此问题，在此示例中，仲裁的大小必须至少为 3，这是 ensemble 中五台服务器中的多数。为了取得进展，整体需要至少三台可用的服务器。为了确认更新状态的请求已成功完成，该集成还要求至少三台服务器确认它们已复制它。

# visual-studio-2012 - TF400324 - 源代码管理资源管理器中的“找不到页面”

> ID：16060766
> 
> 赞同：5
> 
> 时间：2013-04-17T13:00:41.733
> 
> 标签：visual-studio-2012

我们使用 TFS2012 和 VS2012（有些人使用 Update1 和一些 Update2）。）。在某些人的机器中，我们得到：

```
TF400324: Team Foundation services are not available from server vstfps\Protection.
Technical information (for administrator):
    Page not found. 
```

这发生在任何源代码控制访问中，无论是在 VS2012 中还是在运行“tf.exe get”时。但是，其他 TFS 服务可以正常工作，例如工作项查询。

我已经卸载并重新安装了 VS（这次没有 Update2），问题仍然存在。

我发现了一个[类似的问题报告](http://social.msdn.microsoft.com/Forums/en-US/TFService/thread/232de295-1147-42ca-9e2d-281f8462df30)，尽管它有些不同，并且任何一种方式都没有解决方法。

使用 Netmon 进行调试时，我注意到受影响的机器使用不同的 URI：

```
Good: /tfs/Protection/VersionControl/v4.0/repository.asmx
Bad: /tfs/Protection/VersionControl/v5.0/repository.asmx 
```

什么决定了机器使用的 URI？我该如何改变呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-28T12:54:19.310

**解决方法：**关闭 Visual Studio 和相关应用，然后删除`%LocalAppData%\Microsoft\Team Foundation\4.0\Cache`.

**原因：（**根据我的系统管理员的报告重建......）

我的 TFS2012 RTM 服务器是从现有服务器克隆的，保持相同的集合 GUID。效果：

*   旧服务器安装并卸载了 Update1。TFS2012 RTM 仅支持 v4.0 URI，而 TFS2012 Update1 添加了 v5.0。因此，有时，客户端会感到困惑并转到旧服务器，获取 v5.0 URI，并将其缓存在`...\Cache\<guid>\LocationServiceData.config`.
*   我们的 TFS 构建失败并显示“无法复制活动日志”，因为他们试图复制到旧服务器。

**修复：**通过运行以下命令更改新服务器上的集合 GUID：

```
tfsconfig ChangeServerID /sqlinstance:<SQLInstanceName> /databasename:tfs_configuration 
```

之后，人们需要最后一次清理缓存，仅此而已。

# html - 使用 Javascript 从 HTML5 使用 Web 服务方法

> ID：16060771
> 
> 赞同：-2
> 
> 时间：2013-04-17T13:00:57.137
> 
> 标签：html

我正在开发我的第一个 HTML 5 应用程序，它必须从 Web 服务读取数据。谁能告诉我如何使用 JavaScript 从 HTML 5 调用 Web 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:11:14.263

在这个问题中，您有一个答案，为了在 HTML 中调用 Web 方法，您应该输入什么内容。

[如何在不使用 JSON 或任何东西的情况下使用纯 JavaScript/Ajax 调用此 HelloWorld Web 方法？](https://stackoverflow.com/questions/13128736/how-can-i-call-this-helloworld-web-method-with-plain-javascript-ajax-without-us)

它正在使用 ajax，但它应该给你一个例子。也看看答案

# python - 由python中的一维矩阵组成的二维矩阵

> ID：16060790
> 
> 赞同：2
> 
> 时间：2013-04-17T13:01:39.560
> 
> 标签：python, matlab, numpy

一个新手问题和可能的重复：如何使用数组或一维矩阵在 numpy 中组合矩阵？在 matlab 中，我将对由三个被视为行的数组组成的矩阵使用以下语法：

```
A=[1; 1; 1];
B=[2; 2; 2];
C=[3; 3; 3];
D=[A B C] 
```

结果是：

```
D =

 1     2     3
 1     2     3
 1     2     3 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:03:34.143

你应该做

```
import numpy as np
A = np.array([1, 1, 1])
B = np.array([2, 2, 2])
C = np.array([3, 3, 3])
D = np.vstack((A, B, C)) 
```

请参阅[MATLAB 用户的 NumPy](http://mathesaurus.sourceforge.net/matlab-numpy.html)（官方链接似乎已关闭）

# html - Windows 7 中的 VS 2012 HTML5 JS 项目

> ID：16060795
> 
> 赞同：2
> 
> 时间：2013-04-17T13:01:54.690
> 
> 标签：html, windows-7, visual-studio-2012

我有一个新的困境。我的任务是研究将我们的 Silverlight 项目转移到 HTML5 项目中。好的！

好吧，我从下面的链接下载了示例解决方案并尝试将其加载到 VS 2012 中。Services 项目加载正常，但 DataBinding 项目（我相信是一个 JS 项目）没有加载。原因说明我需要 Windows 8 或更高版本。我目前有 Windows 7 SP 1（64 位）。

是否需要修改设置或配置以允许加载此类项目？我感谢任何和所有对此的投入。谢谢！

[http://code.msdn.microsoft.com/windowsapps/Accessing-WCF-in-HTML5-and-0d247ef8](http://code.msdn.microsoft.com/windowsapps/Accessing-WCF-in-HTML5-and-0d247ef8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:39:18.867

该项目使用 WinJS 调用 Windows 8。

[https://stackoverflow.com/a/7437563/2249535](https://stackoverflow.com/a/7437563/2249535)

您始终可以单独打开文件并将 WinJS 调用替换为 jQuery 调用，但仍需要使用不同的项目类型在 Visual Studio 中打开

# java - 在 XStream 中为不在 XML 中的字段设置默认值

> ID：16060804
> 
> 赞同：9
> 
> 时间：2013-04-17T13:02:37.850
> 
> 标签：java, import, xstream

有没有办法创建转换器或在每次转换后执行的某些操作？对于上下文，我正在尝试为不在我的 XML 中的字段填充默认值，以便在我的数据模型发生更改时保持向后兼容性。例如，如果我有这个对象：

```
class A {
    private String b;
    private String c;
    private String d;
} 
```

我的 XML 类似于：

```
<a>
 <b>b</b>
 <d>d</d>
</a> 
```

我希望我的 XML 导入知道该字段有一个默认值，`c`并将`"c"`其设置`A`为这样。这应该是一个通用操作，我可以将默认值添加到非常复杂的图形的任何字段中。如果有某种方法可以在每次转换后触发一个函数，它可以根据我想设置默认值的对象映射检查当前对象。

另请注意，使用 readResolve/readObject 似乎不是一个选项，因为 1\. readObject() 似乎对我根本不起作用 2\. readResolve 会用默认值覆盖该字段，即使它实际上包含在 XML 中. 如果我在这里的假设是错误的，请告诉我。

编辑:: 我在用户邮件列表中找到了这个相关线程：http: [//article.gmane.org/gmane.comp.java.xstream.user/4619/match=default+value](http://article.gmane.org/gmane.comp.java.xstream.user/4619/match=default+value)

似乎唯一建议的解决方案是使用`readResolve()`我已经说过的不是有效的解决方案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-04-20T12:19:54.720

使用[PureJavaReflectionProvider](http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/converters/reflection/PureJavaReflectionProvider.html)

```
XStream xstream = new XStream(new PureJavaReflectionProvider()); 
```

并像往常一样使用默认值初始化您的对象。通过字段初始化或构造函数代码（初始化程序）。

**背景**

如果不指定[`ReflectionProvider`](http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/converters/reflection/ReflectionProvider.html)xstream 会尝试找到最佳反射提供程序。但最`ReflectionProvider`适合 xstream 的可能不是最适合您，因为它通常选择`Sun14ReflectionProvider`.

它[`Sun14ReflectionProvider`](http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/converters/reflection/Sun14ReflectionProvider.html)使用与 java 序列化机制相同的实例化策略，这意味着它跳过构造函数代码或更准确地说是对象初始化程序代码。

因此实例字段初始化像

```
class A {
    private String b = "DEFAULT";
} 
```

不会应用，也不会应用构造函数代码，例如

```
class A {
    private String b;

    public A(){
        b = "DEFAULT";
    }
} 
```

而是使用`PureJavaReflectionProvider`（顾名思义）Java 反射 API 来实例化对象，例如 [`Class.newInstance()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#newInstance())，因此执行对象初始化代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:11:17.810

你需要一个转换器。

这是您的案例的代码示例：

```
public class AConverter implements Converter {

    @Override
public Object unmarshal(HierarchicalStreamReader reader, UnmarshallingContext context) {
    A a = new A();
    String bValue = "b";
    String cValue = "c";
    String dValue = "d";

    while (reader.hasMoreChildren()) {
        reader.moveDown();
        if ("b".equals(reader.getNodeName())) {
            bValue = reader.getValue();
        } else if ("c".equals(reader.getNodeName())) {
            cValue = reader.getValue();
        } else if ("d".equals(reader.getNodeName())) {
            dValue = reader.getValue();
        }
        reader.moveUp();
    }
    a.setB(bValue);
    a.setC(cValue);
    a.setD(dValue);

    return a;
}

@Override
public void marshal(Object object, HierarchicalStreamWriter writer, MarshallingContext context) {
    A a = (A) object;
    writer.startNode("b");
    writer.setValue(a.getB());
    writer.endNode();
    writer.startNode("c");
    writer.setValue(a.getC());
    writer.endNode();
    writer.startNode("d");
    writer.setValue(a.getD());
    writer.endNode();

}

@Override
public boolean canConvert(Class clazz) {
    return clazz == A.class;
} 
```

}

不要忘记注册转换器：

```
XStream xs = new XStream();
xs.registerConverter(new AConverter()); 
```

编辑：修复了转换器代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-18T14:33:27.210

`c``null`当 XML 没有为 . 设置任何值时，将设置为`c`. 然后，您可以检查`null`您的 getter 并返回适当的默认值。

# wpf - WPF/XAML：如何让多个控件/元素对非路由事件使用相同的处理程序

> ID：16060807
> 
> 赞同：2
> 
> 时间：2013-04-17T13:02:55.527
> 
> 标签：wpf, xaml, events

我想对多个控件的标准非路由 .NET 事件使用相同的处理程序。我有以下 xaml。稍后在 xaml 代码中，我用 newton:ConvexBody3D 声明了另一个 ModelVisual3D，并且我希望 ConvexBody3D 对作为非路由事件的 ApplyForce 事件使用相同的处理程序 (BodyApplyForce)。运行应用程序时，仅针对首先声明的 ConvexBody3D 引发 ApplyForce 事件，而不会针对连续的 ConvexBody3D 引发。如何对所有 ConvexBody3D 使用相同的事件处理程序？

```
<ModelVisual3D x:Name="Box1" >
    <newton:World.Body>
        <newton:ConvexBody3D x:Name="blueCube" Mass="0.1" ApplyForce="BodyApplyForce"/>
    </newton:World.Body> 
```

# r - 在 lines() 中设置重复

> ID：16060813
> 
> 赞同：1
> 
> 时间：2013-04-17T13:03:05.137
> 
> 标签：r, plot, lines, repeat

我正在尝试创建一个“前后”折线图，显示手术前后的血液检查结果。我有 307 对数据，因此需要获取 lines 函数来为从术前和术后数据创建的数据矩阵中的 307 列中的每一列绘制一条线（一列：一名患者）。所以我尝试了这个：

```
ylabel<-"Platelet count (millions/ml)"
preoptpk<-c(100,101,102,103,104,105)
postoptpk<-c(106,107,108,109,110,111) 
preoptpk<-t(matrix(preoptpk))
postoptpk<-t(matrix(postoptpk)) 
preoptpk 
postoptpk
beforeandafterdata<-rbind(preoptpk, postoptpk) 
beforeandafterdata
ylimits<-c(0.8*min(beforeandafterdata,na.rm=TRUE),1.15*max(beforeandafterdata, na.rm=TRUE)) 
ylimits
plot(beforeandafterdata[,1], type = "l", col = "black", xlim = c(0.9, 2.1), 
           ylim = ylimits, ann = FALSE, axes = FALSE)
title(ylab=ylabel, cex.lab=1.4)
axis(1,at=1:2,lab=c("Preop.","Postop."),cex.axis=1.5)
axis(2,labels=TRUE) 
x<-c(1*2:6) 
x
lines(beforeandafterdata[,x],type="l",col="black", 
           xlim=c(0.9,2.1),ylim=ylimits,ann=FALSE) 
```

..什么也没发生。

我不明白为什么我不能使用 x<-c(1*2:307) 因为当我手动将 x 定义为 2 然后 3 然后 4 然后 5 然后 6 它工作正常：

```
x <- 2 x
 lines(beforeandafterdata[,x],type="l",col="black",xlim=c(0.9,2.1),ylim=ylimits,ann=FALSE)
x <-3 x
lines(beforeandafterdata[,x],type="l",col="black",xlim=c(0.9,2.1),ylim=ylimits,ann=FALSE)
x <-4 x
lines(beforeandafterdata[,x],type="l",col="black",xlim=c(0.9,2.1),ylim=ylimits,ann=FALSE)
x<-5 x
lines(beforeandafterdata[,x],type="l",col="black",xlim=c(0.9,2.1),ylim=ylimits,ann=FALSE)
x<-6 x
lines(beforeandafterdata[,x],type="l",col="black",xlim=c(0.9,2.1),ylim=ylimits,ann=FALSE)
x<-c(1*2:6) 
```

有什么帮助我可以让它工作吗？由于我有几个变量，并且为每个变量手动绘制 307 条线会很耗时。谢谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:27:33.253

试图靠近您的示例，您需要使用`xy.coords`within `lines`。

```
plot(beforeandafterdata[,1],type="l",col="black",xlim=c(0.9,2.1),ylim=ylimits,
     ann=FALSE,axes=FALSE) 
title(ylab=ylabel, cex.lab=1.4) 
axis(1,at=1:2,lab=c("Preop.","Postop."),cex.axis=1.5)
axis(2,labels=TRUE) 
x<-c(1*2:6) 
x 
lapply(x, function(x){
lines(xy.coords(x=c(1, 2), y=c(beforeandafterdata[,x])), type="l", col="black", 
      xlim=c(0.9,2.1),ylim=ylimits,ann=FALSE)
}) 
```

需要 lapply 以防止一条线连接到下一条线

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:21:06.953

您可以使用 a`for loop`来执行此操作。例如：

```
for (x in 2:6) {
  lines(beforendafterdata[,x], ...)
} 
```

或者你可以使用`reshape2`和`ggplot2`包。首先将您的数据转换为喜欢`melt`的长格式：`ggplot2`

```
library(reshape2)
beforeandafter_melted <- melt(beforeandafterdata) 
```

然后密谋离去。您不需要`color`参数，但`group`强制绘制单条线很重要。

```
library(ggplot2)
ggplot(beforeandafter_melted, aes(x=Var1, y=value, color=factor(Var2), group=Var2)) + 
  geom_line() 
```

`Var1`初始矩阵中的行（1 或 2）和`Var2`列（1 到 6）在哪里`beforeandafterdata`。

还有，你为什么写`x <- c(1*2:307)`？这与`2:307`（除非您尝试强制进行数字转换，但这不是解决方法）没有什么不同。

```
all.equal(c(1*2:307), 2:307)
# [1] TRUE 
```

# java - Fullcalendar：如何使用 JSON 服务提供事件馈送

> ID：16060815
> 
> 赞同：1
> 
> 时间：2013-04-17T13:03:06.900
> 
> 标签：java, json, fullcalendar, jira, jira-rest-java-api

以下是我在速度模板中的日历内容：

```
 $('#calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'User Issues',
            right: 'month,agendaWeek,agendaDay'
        },
        selectable: true,
        selectHelper: true,
        select: function(start, end, allDay) {
                                 ....
                        }
              editable: true,
        events:
 "http://localhost:2990/rest/issuesrestresource/1.0/message/RetrieveAllIssuesForUser"

}); 
```

下面是用于事件提要的 Rest Resource Service 的东西 - JSON - RetrieveAllIssuesForUser 方法：

```
@GET
@AnonymousAllowed
@Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
@Path("/RetrieveAllIssuesForUser")
public Response getAllIssueData()
{   
final List<IssuesRestResourceModel> issuesRestResourceModelList = new     ArrayList<IssuesRestResourceModel>();
final com.atlassian.crowd.embedded.api.User  u =  authenticationContext.getLoggedInUser();
ao.executeInTransaction(new TransactionCallback() // (1)
{           
    @Override
    public List<IssuesRestResourceModel> doInTransaction()
    {
        ///fetching issues from activeobjects and preparing list of 
 IssuesRestResourceModel.
        }
        return null;
    }
});
return Response.ok(issuesRestResourceModelList.toArray()).build();
} 
```

我的 IssueRestResourceModel 具有以下要检索的属性：

```
 @XmlElement(name = "value")
    private String message;

@XmlAttribute
private String key;

@XmlAttribute
private String start;

@XmlAttribute
private String end;

@XmlAttribute
private String issues;

@XmlAttribute
private String user = ""; 
```

上面的代码在通过 Jquery 检索事件时正常工作。但是在提供如上所示的事件 URL 时不提供事件 - 事件：“localhost/.../REstresourcemethod”

你能建议这里有什么问题吗，事件没有提供。

谢谢你

# php - 访问多维数组中的元素

> ID：16060824
> 
> 赞同：0
> 
> 时间：2013-04-17T13:03:25.407
> 
> 标签：php, multidimensional-array

我在 PHP 中有这个多维数组：

```
array(4) { 
["took"]=> int(2) 
["timed_out"]=> bool(false) 
["_shards"]=> array(3) { 
    ["total"]=> int(5)
    ["successful"]=> int(5)
    ["failed"]=> int(0) 
} 
["hits"]=> array(3) { 
    ["total"]=> int(3) 
    ["max_score"]=> float(2.3578677) 
    ["hits"]=> array(1) { 
        [0]=> array(5) { 
            ["_index"]=> string(13) "telephonebook" 
            ["_type"]=> string(6) "person" 
            ["_id"]=> string(22) "M5vJJZasTGG2L_RbCQZcKA" 
            ["_score"]=> float(2.3578677) 
            ["_source"]=> array(8) { 
                ["Mob"]=> string(19) "XXX" 
                ["Title"]=> string(13) "Analyst" 
                ["Department"]=> string(8) "Analysis" 
                ["Country"]=> string(6) "Sweden" 
                ["Tlf"]=> string(0) "" 
                ["Name"]=> string(16) "XXX" 
                ["Email"]=> string(29) "XX@retro.com" 
                ["thumbnailPhoto"]=> string(0) "" 
            } 
        } 
    } 
} 
```

}

该数组在“命中”中有几个“命中”，我想循环并打印出“_source”中的内容。我尝试了几种不同的方法，但我想不出任何方法来做到这一点。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:04:13.817

```
foreach ($array['hits']['hits'][0]['_source'] as $key => $value) {
    //do stuff
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:07:22.447

我想这可能会为你处理。将 $the_array_you_provided 替换为您的“主”数组变量（您没有在帖子中指定它）。

```
$hits = $the_array_you_provided['hits']['hits'];

foreach ($hits as $hit) {
    echo $hit['_source']['Title'];

    //print everything in the array
    //print_r($hit['_source']);
} 
```

任何帮助随时询问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T13:07:25.787

试试这个

```
foreach ($arr['hits']['hits'] as $val) 
{
   echo $val['_source']['Mob'];

} 
```

像这样

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T13:10:08.007

试试这个：

```
 foreach ($array['hits']['hits'] as $hit) {
      foreach ($hit['_source'] as $source) {
         echo $source, '<br>';
      }
   } 
```

# sql - SQL Friendship 表结构和查询

> ID：16060825
> 
> 赞同：2
> 
> 时间：2013-04-17T13:03:25.510
> 
> 标签：sql, database

SQL问题：

**我愿意更改我的表格。如果我应该添加一个 FriendshipRequest tbl 或者 IsActive 是否足以收集所需的信息。或者，如果我应该选择状态：待处理、已接受、已拒绝等。**

得到表用户和表友谊。

对于每个有朋友的用户，或来自他自己或他自己的好友邀请待定，插入 2 行。

```
| UID   | FID   | IsActive |
|  1    |  2    |    1     |
|  2    |  1    |    1     | 
```

^ 在这里，我们收到了一个从 UID 到 FID 的好友邀请。邀请已被接受，他们是朋友。

```
| UID   | FID   | IsActive |
|  1    |  2    |    1     | 
|  2    |  1    |    0     | 
```

^ 在这里，我们收到了一个待处理的邀请，来自 UID 1 > 2 的友谊邀请。另一个用户 (UID:2) 尚未处理邀请。接受/拒绝又名 1/0

```
| UID   | FID   | IsActive |
|  1    |  2    |    0     | 
|  2    |  1    |    0     | 
```

^ 在这里，我们收到了拒绝的请求。ID 为 2 的用户已拒绝邀请。将两列都设置为 False / 0。

问题是，我想为以下内容编写查询：获取所有待处理的请求。(IsActive 1 and IsActive = 0) 获取特定用户的所有好友 (Active Friends IsActive = 1)

我使用的表是：用户列：用户 ID 友谊列：用户 ID、朋友 ID、IsActive

我试过 UNION ALL，问题是我不知道如何处理结果。

```
SELECT 
    u.UserID, u.Username, f.IsActive
FROM Friendship f, [User] u
  WHERE f.UserID = 6 AND f.FriendID = u.UserID AND f.IsActive = 1 

UNION ALL

SELECT 
    u.UserID, u.UserName, f.IsActive
FROM Friendship f, [User] u
  WHERE f.FriendID = 6 AND f.UserID = u.UserID AND f.IsActive = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:25:19.477

要获取所有待处理的请求，您可以将表加入到自身中，只检查其中一个是否处于活动状态。此设置假定 IsActive 是 a `BIT`，如果将其设为整数，则可以对它们求和并检查总数

```
SELECT *
FROM Friendship f1
JOIN Friendship f2
    ON f1.FID = f2.UID
    AND f1.UID = f2.FID
WHERE ((f1.IsActive = 1 AND f2.IsActive = 0)
OR (f1.IsActive = 0 AND f2.IsActive = 1)) 
```

并且要让所有活动都处于活动状态，您可以执行相同的操作，但针对特定用户并且两者都处于活动状态

```
SELECT *
FROM Friendship f1
JOIN Friendship f2
    ON f1.FID = f2.UID
    AND f1.UID = f2.FID
WHERE f1.IsActive = 1 
AND f2.IsActive = 1
AND f1.UID = 5 
```

# php - 新帖子的wordpress动作钩子不起作用

> ID：16060828
> 
> 赞同：0
> 
> 时间：2013-04-17T13:03:30.550
> 
> 标签：php, wordpress

我正在尝试创建一个插件，在文章发布后立即在数据库中插入自定义元，但它似乎不起作用。这是我进入主插件文件的一段代码：

```
function example($post_ID)
{
   ?>

   <!-- testing -->

   <?php

    $friends = 'email@domain.com';
    mail($friends, "Blog Post", 'New blog post has been submitted.');
    return $post_ID;
}
add_filter('publish_post', 'example'); 
```

这不会在文章发布后将我的“测试”评论代码放在页面源代码中，并且我没有收到任何电子邮件。

尝试使用 add_filter 和 add_action，但它们都不起作用。

向'wp-head'添加一个动作，有效。

# visual-studio-2012 - 重复的菜单项 VS 2012

> ID：16060832
> 
> 赞同：6
> 
> 时间：2013-04-17T13:03:37.833
> 
> 标签：visual-studio-2012

有人在 VS 2012 中遇到过这个问题吗？

![重复菜单](https://i.stack.imgur.com/o63su.png)

我尝试将我的开发环境重置为默认值，但这并没有解决任何问题。这真是令人沮丧。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-18T08:01:45.707

我在 Visual Studio 2011 中遇到了同样的问题。我使用 /setup 修复了它。我仍然对原因一无所知。开发快递？锐化？VS命令？组合？

修复：

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE>devenv.exe /safemode /setup 
```

之后我启动了 Visual Studio：

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE>devenv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-03T09:07:17.627

我刚刚通过删除 devenv.CTM 解决了这个问题

从路径 **C:\ProgramData\Microsoft\VisualStudio\12.0\1033**

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-29T21:58:43.183

似乎对此的回答比人们上面所说的要深一些。需要删除注册表项和配置文件并执行应用程序重置以应用可靠修复：

（路径是运行版本的问题，但我相信读过这篇文章的人可以弄清楚他们的安装路径。）

文件：`C:\ProgramData\Microsoft\<version>\12.0\<countrycode>\WDExpress.CTM`

注册表项：`HKEY_CURRENT_USER\Software\Microsoft\<version>\<vernum>_Config\Menus`

表达：`"C:\Program Files\Microsoft Visual Studio <vernum>.0\Common7\IDE\WDExpress.exe" /resetuserdata`

其他版本：`"C:\Program Files\Microsoft Visual Studio <vernum>.0\Common7\IDE\devenv.exe" /resetuserdata`

这似乎永久解决了这个问题（用了 60 分钟，哈哈，真是浪费）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-10-10T12:55:03.693

以管理员模式打开 cmd 将 dir 更改为 dev 安装路径 在命令下方运行。（但它会重置您的初始设置，例如启动时的 c# 首选项设置——我认为这不是一个大问题）

Devenv.exe /resetuserdata

# paypal-ipn - 交付状态已发送但没有 IPN 响应

> ID：16060836
> 
> 赞同：0
> 
> 时间：2013-04-17T13:03:42.207
> 
> 标签：paypal-ipn

我配置了 IPN 侦听器并使用 URL 启用自动响应。我使用 IPN 模拟器进行测试，它运行良好，但自动响应无法正常工作。IPN 历史提供了适当的详细信息，但数据库未更改。

详情如下：

即时付款通知 (IPN) 详细信息

消息 ID20A455865K857272G

创建日期/时间 2013 年 4 月 17 日 04:25 PDT

原件/重发原件

最迟交付尝试日期/时间 2013 年 4 月 17 日 04:25 PDT

通知 URLhttp://testdomain.com/pwo_dev/index.php/user/PaypalIPN

HTTP 响应代码 200

交货状态已发送

重试次数0

交易 ID77S48208XN775144R

IPN 类型进行的交易 ![在此处输入图像描述](https://i.stack.imgur.com/GXbgA.jpg)

但是当我重新发送相同的 IPN 时，它工作正常。

请告诉我有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:42:17.310

您是否检查了服务器的访问日志以查看 PayPal 是否真的在命中您的脚本，或者检查了您的错误日志以查看是否生成了任何错误。首先，您需要确定您是否真的将数据发送到您的系统。然后一旦你确定你需要，确定你的脚本为什么不工作。错误日志可以帮助解决这个问题。您还可以尝试在代码中添加一些调试行，以便您可以单步执行它并查看它在哪里失败。这里还有一些[IPN 故障排除步骤](https://stackoverflow.com/questions/15778567/notify-url-never-call-when-buyer-paid-for-subscription/15788965#15788965)也可能有所帮助。如果要验证这是脚本问题而不是服务器问题，请尝试使用 IPN 脚本的简化版本。让它只给你发一封电子邮件，或者在文本文件中写一些东西。您还可以[在此处找到一些 PayPal 的 IPN 脚本](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)这可能会有所帮助，并为您提供一个可供测试的工作示例。

# ios - -[UIImage 长度]：无法识别的选择器发送到带有图像的 NSMutableArray 的实例错误

> ID：16060840
> 
> 赞同：4
> 
> 时间：2013-04-17T13:03:46.010
> 
> 标签：ios, uiimage, nsmutablearray, uiimagepickercontroller, uicollectionviewcell

我有一个故事板应用程序，它有一个`UIViewController`和一个`UICollectionViewController`. 在视图控制器中，用户从 iPhone 的照片库中选择多张照片（由于 iOS 中没有用于多选的 API，我使用[ELCImagePickerController](https://github.com/elc/ELCImagePickerController)来实现这一点）。并且它与collection view controller 相连，在该控制器中，所选照片应显示在小图像视图中。

图像库出现，我可以选择多张照片。但是当它转到集合视图控制器时，它会在集合视图的事件中抛出**-[UIImage length]: unrecognized selector sent to instance**错误。`cellForItemAtIndexPath`

以下是我到目前为止的代码。

**视图控制器.h**

```
#import <UIKit/UIKit.h>
#import "ELCImagePickerController.h"
#import "ELCAlbumPickerController.h"
#import "ELCAssetTablePicker.h"
#import "GalleryViewController.h"

@interface ViewController : UIViewController

@property (strong, nonatomic) NSMutableArray *cameraImages;

- (IBAction)chooseImages:(id)sender;

@end 
```

**视图控制器.m**

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (IBAction)chooseImages:(id)sender
{
    UIActionSheet *photoSourcePicker = [[UIActionSheet alloc] initWithTitle:nil
                                                                   delegate:self
                                                          cancelButtonTitle:@"Cancel"
                                                     destructiveButtonTitle:nil
                                                          otherButtonTitles:@"Take Photo", @"Choose from Library", nil, nil];
    [photoSourcePicker showInView:self.view];
}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    switch (buttonIndex) {
        case 0:
            if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
                ELCAlbumPickerController *albumController = [[ELCAlbumPickerController alloc] initWithNibName:nil bundle:nil];
                ELCImagePickerController *elcPicker = [[ELCImagePickerController alloc] initWithRootViewController:albumController];
                albumController.parent = elcPicker;
                elcPicker.delegate = self;

                if ([self.view respondsToSelector:@selector(presentViewController:animated:completion:)]){
                    [self presentViewController:elcPicker animated:YES completion:nil];
                } else {
                    [self presentViewController:elcPicker animated:YES completion:nil];
                }
            }
            else {
                UIAlertView *alert;
                alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                   message:@"This device doesn't have a camera"
                                                  delegate:self
                                         cancelButtonTitle:@"Ok"
                                         otherButtonTitles:nil, nil];
                [alert show];
            }
            break;

        case 1:
            if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary]) {
                ELCAlbumPickerController *albumController = [[ELCAlbumPickerController alloc] initWithNibName:nil bundle:nil];
                ELCImagePickerController *elcPicker = [[ELCImagePickerController alloc] initWithRootViewController:albumController];
                albumController.parent = elcPicker;
                elcPicker.delegate = self;

                if ([self.view respondsToSelector:@selector(presentViewController:animated:completion:)]){
                    [self presentViewController:elcPicker animated:YES completion:nil];
                } else {
                    [self presentViewController:elcPicker animated:YES completion:nil];
                }
            }
            else {
                UIAlertView *alert;
                alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                   message:@"This device doesn't support photo libraries"
                                                  delegate:self
                                         cancelButtonTitle:@"Ok"
                                         otherButtonTitles:nil, nil];
                [alert show];
            }
            break;
    }
}

- (void)elcImagePickerController:(ELCImagePickerController *)picker didFinishPickingMediaWithInfo:(NSArray *)info
{
    [self dismissViewControllerAnimated:YES completion:nil];

    self.cameraImages = [[NSMutableArray alloc] initWithCapacity:info.count];

    for (NSDictionary *camImage in info) {
        UIImage *image = [camImage objectForKey:UIImagePickerControllerOriginalImage];
        [self.cameraImages addObject:image];
    }
    /*
     for (UIImage *image in info) {
     [self.attachImages addObject:image];
     }
     */

    NSLog(@"number of images = %d", self.cameraImages.count);
    if (self.cameraImages.count > 0) {
        [self performSegueWithIdentifier:@"toGallery" sender:nil];
    }
}

- (void)elcImagePickerControllerDidCancel:(ELCImagePickerController *)picker
{
    if ([self respondsToSelector:@selector(dismissViewControllerAnimated:completion:)]) {
        [self dismissViewControllerAnimated:YES completion:nil];
    } else {
        [self dismissViewControllerAnimated:YES completion:nil];
    }
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"toGallery"]) {
        GalleryViewController *galleryVC = [segue destinationViewController];
        galleryVC.selectedImages = self.cameraImages;
    }
}

@end 
```

**GalleryViewController.h**

```
#import <UIKit/UIKit.h>
#import "ELCImagePickerController.h"
#import "ELCAlbumPickerController.h"
#import "ELCAssetTablePicker.h"
#import "ImageCell.h"

@interface GalleryViewController : UICollectionViewController <UIImagePickerControllerDelegate, UINavigationControllerDelegate, UICollectionViewDelegate, UICollectionViewDataSource>

@property (strong, nonatomic) NSMutableArray *selectedImages;

@end 
```

**GalleryViewController.m**

```
#import "GalleryViewController.h"

@interface GalleryViewController ()

@end

@implementation GalleryViewController

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return 1;
}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    return self.selectedImages.count;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    ImageCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"imgCell" forIndexPath:indexPath];
    UIImage *image;
    int row = indexPath.row;

    image = [UIImage imageNamed:self.selectedImages[row]]; //This is where it throws the error
    cell.imageView.image = image;

    return cell;
}

@end 
```

为了进一步演示这个问题，我制作了一个演示项目，您可以从[这里](http://www20.zippyshare.com/v/63804660/file.html)下载。

我知道在此之前已经多次问过这个问题。在在这里发布我的问题之前，我尝试了所有但无济于事。

如果有人能告诉我如何摆脱这个错误，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-17T13:19:28.807

嘿，我理解你的问题，你已经有一个图像数组，为什么再次使用 imageNamed: 构造函数。

```
image = [UIImage imageNamed:self.selectedImages[row]];
cell.imageView.image = image;
//This throws a exception because, you have UIImage objects in your array and here imageNamed: takes NSString as an argument , so you are trying to pass a UIImage object instead of a NSString object 
```

直接从数组中取出图像并分配如下：

```
cell.imageView.image = (UIImage*) [self.selectedImages objectAtIndex:row]; 
```

UIImage * 可能不需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:17:52.820

`self.selectedImages[row]`应该是一个`NSString`。似乎它是 a`UIImage`而不是`NSString`. 它试图在`UIImage`实例上调用 length 方法。

# c# - 创建 Com 对象

> ID：16060842
> 
> 赞同：1
> 
> 时间：2013-04-17T13:03:50.827
> 
> 标签：c#, com, wmplib

您好，我收到以下异常。

> 由于以下错误，检索具有 CLSID {6BF52A4F-394A-11D3-B153-00C04F79FAA6} 的组件的 COM 类工厂失败：80040154 未注册类（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）。

当我尝试使用流代码（在 c# 中）创建 o COM 对象时

```
Object instancePlayer = null;
Guid guid_IWMPPlayer = typeof(WMPLib.IWMPPlayer).GUID;
Guid guid_IUnknown = new Guid("00000000-0000-0000-C000-000000000046");
Type type = Type.GetTypeFromCLSID(guid_IWMPPlayer);
instancePlayer = Activator.CreateInstance(type); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:08:08.800

COM 用于`GUIDs`识别类和接口。看起来您正在使用`IID`调用的接口 ID ()`IWMPPlayer`而不是类 ID ( `CLSID`)。看看您是否可以找到播放器对象的相应类并使用`GUID`它。

更新：我为你查了课程。得到`CLSID`这样的...

```
Guid guid_WMPPlayer = typeof(WMPLib.WindowsMediaPlayer).GUID; 
```

...然后将其传递`CLSID`给`Type.GetTypeFromCLSID`.

更新 2：我可以检查一下，您肯定需要使用这些 GUID 吗？为什么不干...

```
instancePlayer = new WMPLib.WindowsMediaPlayer(); 
```

...？

# jsp - 将一组单选按钮中的值传递给 servlet

> ID：16060843
> 
> 赞同：3
> 
> 时间：2013-04-17T13:03:51.780
> 
> 标签：jsp, servlets, for-loop, radio-button

一天的问候！！！

我创建了一个jsp文件如下：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org    /TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<form action="TestAms" method="post">
<%
    for(int i=0; i<5; i++){
        %>
            <input type="radio" name="<%= i%>" value="<%=i %>">
        <%
    }
%>
<input type="submit" value="SUBMIT">
</form>
</body>
</html> 
```

该程序在一个循环中创建 5 个单选按钮，其名称和值与循环变量相同。现在我想获取 servlet 中单选按钮的值。我的 servlet 的代码如下：

```
import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class TestAms extends HttpServlet {

protected void doPost(HttpServletRequest request, HttpServletResponse response)   throws ServletException, IOException {
    PrintWriter out = response.getWriter();
    for (int i=0; i<5; i++){
    String s[] = new String[5];
    s[i] = request.getParameter("<%= i%>"); 
    out.println(s[i]);
    }
}
} 
```

但我只以 5 个“空”值结束。我知道问题出在哪里。但我无法找到将循环变量传递给 request.getParameter() 方法的方法。请帮助我.....提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:08:50.400

在java中，你应该写：

```
s[i] = request.getParameter(Integer.toString(i)); 
```

<%= ... %> 是 JSP scriptlet，不适用于 Java 类。

# c# - 模型内的淘汰赛 JS 绑定数组

> ID：16060848
> 
> 赞同：0
> 
> 时间：2013-04-17T13:04:08.507
> 
> 标签：c#, knockout.js, signalr

我有一个由 observableArray 组成的模型

```
function developmentModel(id, name, town, postcode, selected, developmentAddress) {
    var s = this;
    s.Id = ko.observable(id);
    s.Name = ko.observable(name);
    s.Town = ko.observable(town);
    s.Postcode = ko.observable(postcode);
    s.Selected = ko.observable(selected);
    s.DevelopmentAddress = ko.observableArray(developmentAddress);
    s.DisplayName = ko.computed(function() {
        return s.Name() + ", " + s.Town() + ", " + s.Postcode();
    });
} 
```

这个 observableArray 使用了不同的模型：

```
function developmentAddressModel(id, street1, street2, loc1, loc2, town, postcode) {
    var s = this;
    s.Id = ko.observable(id);
    s.Street1 = ko.observable(street1);
    s.Street2 = ko.observable(street2);
    s.Loc1 = ko.observable(loc1);
    s.Loc2 = ko.observable(loc2);
    s.Town = ko.observable(town);
    s.Postcode = ko.observable(postcode);
    s.DisplayName = ko.computed(function() {
        var result = s.Street1() !== undefined ? s.Street1() + ", " : "";
        result += s.Street2() !== undefined ? s.Street2() + ", " : "";
        result += s.Loc1() !== undefined ? s.Loc1() + ", " : "";
        result += s.Loc2() !== undefined ? s.Loc2() + ", " : "";
        result += s.Town() !== undefined ? s.Town() + ", " : "";
        result += s.Postcode();

        return result;
    });
} 
```

并且正在被映射，完全没有问题：

```
connection.client.developmentList = function(developments) {
        console.log("Returned a total of " + developments.length + " development(s)");
        var mappedDevelopments = $.map(developments, function (development) {
            var addresses = [];
            for (var i = 0; i < development.DevelopmentAddresses.length; i++) {
                var addressObject = development.DevelopmentAddresses[i].Address;
                var address = new developmentAddressModel(addressObject.Id, addressObject.Street1, addressObject.Street2, addressObject.Locality1, addressObject.Locality2, addressObject.Town, addressObject.Postcode);
                addresses.push(address);
            }
            return new developmentModel(development.Id, development.Name, development.DevelopmentAddresses[0].Address.Town, development.DevelopmentAddresses[0].Address.Postcode, false, addresses);
        });

        self.propertyDevelopmentList(mappedDevelopments);
    }; 
```

现在我的页面中有两个选择：

```
<select data-bind="options: propertyDevelopmentList, optionsText: 'DisplayName', value: selectedPropertyDevelopment, visible: propertyDevelopmentList().length > 0"></select

<select data-bind="options: propertyDevelopmentList.DevelopmentAddress, optionsText: 'DisplayName', value: selectedDevelopmentAddress, visible: propertyDevelopmentList().length > 0"></select> 
```

第一个选择框的填充完全没有问题，但我需要使用原始模型填充的可观察数组创建第二个下拉框。我是否以错误的方式处理了这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:50:47.323

您必须从选定的开发中获取`DevelopmentAddress`数组。我建议您按如下方式更新您的代码：

```
<select data-bind="options: propertyDevelopmentList, optionsText: 'DisplayName', value: selectedPropertyDevelopment, visible: propertyDevelopmentList().length > 0"></select

<select data-bind="options: selectedPropertyDevelopment().DevelopmentAddress, optionsText: 'DisplayName', value: selectedDevelopmentAddress, visible: propertyDevelopmentList().length > 0"></select> 
```

# javascript - 按 Z-Index 中确定的位置获取元素 - Javascript

> ID：16060850
> 
> 赞同：1
> 
> 时间：2013-04-17T13:04:12.187
> 
> 标签：javascript, jquery, position

我正在使用以下句子将元素置于某个位置，但他采取了第一个......

```
$(this.cTaskItem[0]).mouseup(function(event){
    var posX = event.clientX, posY = event.clientY;
    var overElem = document.elementFromPoint(posX, posY);
    overElem.style.border = "3px solid red";
}); 
```

我想知道如何在给定位置和 Z-Index 处获取元素。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:02:50.763

As @t.niese suggested above you could do this:

```
$(this.cTaskItem[0]).mouseup(function(event)
{
    var posX = event.clientX, posY = event.clientY;
    var elements = [];
    var elm = document.elementFromPoint(posX, posY);
    while(elm.tagName != "HTML")
    {
        elements.push(elm);
        elm.style.display = "none";
        elm = document.elementFromPoint(posX, posY);
    } 
```

});

Then all you would need to do is go through your `elements` array and select the one you need.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-14T08:46:51.403

如果第一个元素（由 选择的那个`document.elementFromPoint(posX, posY)`）不应该是可点击的，您可以将 css prepoerty 设置`pointer-events: none;`为它，它将不再被选中

# java - 如何在jsoup中获取元素的一级子级

> ID：16060853
> 
> 赞同：9
> 
> 时间：2013-04-17T13:04:14.667
> 
> 标签：java, jsoup

在 jsoup`Element.children()`中返回 Element 的所有子项（后代）。但是，我想要元素的第一级孩子（直接孩子）。

我可以使用哪种方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-28T05:46:10.660

Element.children() 仅返回直接子级。既然你把他们绑在树上，他们也有孩子。

如果您需要没有底层树结构的直接子元素，那么您需要按如下方式创建它们

```
public static void main(String... args) {

    Document document = Jsoup
            .parse("<div><ul><li>11</li><li>22</li></ul><p>ppp<span>sp</span</p></div>");

    Element div = document.select("div").first();
    Elements divChildren = div.children();

    Elements detachedDivChildren = new Elements();
    for (Element elem : divChildren) {
        Element detachedChild = new Element(Tag.valueOf(elem.tagName()),
                elem.baseUri(), elem.attributes().clone());
        detachedDivChildren.add(detachedChild);
    }

    System.out.println(divChildren.size());
    for (Element elem : divChildren) {
        System.out.println(elem.tagName());
    }

    System.out.println("\ndivChildren content: \n" + divChildren);

    System.out.println("\ndetachedDivChildren content: \n"
            + detachedDivChildren);
} 
```

输出

```
2
ul
p

divChildren content: 
<ul>
 <li>11</li>
 <li>22</li>
</ul>
<p>ppp<span>sp</span></p>

detachedDivChildren content: 
<ul></ul>
<p></p> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-19T11:03:49.100

这应该为您提供所需的父节点的直接后代列表：

```
Elements firstLevelChildElements = doc.select("parent-tag > *"); 
```

或者您也可以尝试检索父元素，通过 获取第一个子节点`child(int index)`，然后尝试通过 检索该子节点的兄弟姐妹`siblingElements()`。

这将为您提供不包括已使用子项的第一级子项列表，但是您必须在外部添加子项。

```
Elements firstLevelChildElements = doc.child(0).siblingElements(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T13:09:16.410

您始终可以将 ELEMENT.child(index) 与索引一起使用，您可以选择您想要的孩子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-30T10:35:49.173

在这里可以得到一级children的值

```
 Element addDetails = doc.select("div.container > div.main-content > div.clearfix > div.col_7.post-info > ul.no-bullet").first();
    Elements divChildren = addDetails.children();
    for (Element elem : divChildren) {
       System.out.println(elem.text());
                } 
```

# reporting-services - 过滤数据集或 tablix

> ID：16060857
> 
> 赞同：2
> 
> 时间：2013-04-17T13:04:27.007
> 
> 标签：reporting-services, ssrs-2008

我有两个关于报告的 tablix，以及一个用于向 tablix 提供数据的数据集。我在报告上有一个多选参数，我需要根据该参数中的值过滤结果。

有什么区别吗，如果有，有什么更好的解决方案：

直接在数据集或 Tablix 上创建过滤器？他们都会给我相同的结果，但是什么是正确的或更好的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:40:48.950

如果有疑问，请始终尽可能靠近您的数据源。理想的做法是在 SQL Server 视图或存储过程中过滤事物，因为这可以优化；下一个最好的事情是过滤 SSRS 数据集。

在 tablix 项目中进行过滤应该是最后的手段，并且会涉及到运行速度要慢得多的报表。

那里：那是我的penn'orth！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T13:11:56.337

这个问题没有明确的答案可以适用于所有情况。

在您的情况下，由于两个 Tablix 对象都需要相同的过滤器，我将在数据集级别应用它；这样您就不会在报告中复制代码/逻辑。

或者甚至考虑在生成数据集时应用过滤器，例如，如果它来自存储过程，则实现一个合适的`WHERE`子句在数据库级别进行过滤。这样，不必要地传输的数据就会减少。

我会选择最容易编码和可维护性的东西。在您提供的选项中，数据集过滤似乎是要走的路。

# java - 在 JSP 中显示 JSON 数据时的异常

> ID：16060859
> 
> 赞同：0
> 
> 时间：2013-04-17T13:04:30.757
> 
> 标签：java, json, jsp, servlets, gson

我正在尝试在 JSP 中显示 JSON 数据，并且我第一次尝试在 JSP 中显示 JSON 数据。

数据是从数据库中获取的，我在 Servlet 中有以下代码

```
 Gson gson = new Gson();
        List<Employee> employee = myDAO.getEmpDetails("SMITH");
        JsonElement element = 
            gson.toJsonTree(employee, new TypeToken<List<Employee>>() {
                }.getType());
        JsonArray jsonArray = element.getAsJsonArray();
        response.setContentType("application/json");
        response.getWriter().print(jsonArray); 
```

在 JSP 中我称之为

```
$.get('myservlet',function(responseJson) {
            if(responseJson!=null){
                $("#empTable").find("tr:gt(0)").remove();
                var table1 = $("#empTable");
                $.each(responseJson, function(key,value) { 
                     var rowNew = $("<tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>");
                        rowNew.children().eq(0).text(value['empNo']); 
                        rowNew.children().eq(1).text(value['empName']); 
                        rowNew.children().eq(2).text(value['empAddress']);                          
                        rowNew.appendTo(table1);
                });
                }
            }); 
```

我遇到的问题是当我调用我的 servlet 类时，我得到了以下异常

```
java.lang.RuntimeException: Missing type parameter.
at com.google.gson.reflect.TypeToken.getSuperclassTypeParameter(TypeToken.java:84)
at com.google.gson.reflect.TypeToken.<init>(TypeToken.java:61)
at test.net.MyService$1.<init>(MyService.java)
at test.net.MyService.doPost(MyService.java:101)
at test.net.MyService.doGet(MyService.java:47)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:743)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:856) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:56:50.867

快速的[Google 搜索](https://groups.google.com/forum/#!msg/google-gson/h5ybkIuny0Y/RWWmKfHkh-EJ)`TypeToken`揭示了与使用该类相关的问题的可能来源。如果您使用 ProGuard 或从参数化类中删除类型信息的类似编译器工具，则令牌初始化可能会以所示方式失败。但是，当您追踪并解决该问题时，完全可以在不使用令牌的情况下序列化您的数据列表：

```
List<Employee> employee = myDAO.getEmpDetails("SMITH");

String json = new Gson().toJson(employee);   // Note use of `toJson` method
response.setContentType("application/json");
response.getWriter().print(json); 
```

这应该消除您的 servlet 端的任何错误来源，并且只要您的 Javascript 代码有效，那么您应该一切顺利。

# php - MYSQL查询WHERE php数组

> ID：16060865
> 
> 赞同：-1
> 
> 时间：2013-04-17T13:05:01.027
> 
> 标签：php, mysql

我有一个页面，用户可以在其中选择多个复选框，然后提交表单，在下一页上显示他们检查的内容以及更多详细信息。但我的查询不起作用。如何将复选框数据传递给 mysql 查询以获取其余数据。

这是我的查询：

```
$c=$_POST['select'];

$result=mysqli_query($con, 'SELECT * FROM item WHERE item_number IN ("'.implode('","', $c).'")');

echo "<table border='1'>
<tr>
<th>item name</th>
<th>item number</th>
</tr>";
while($row = mysqli_fetch_array($result))
{
  echo "<tr>";
  echo "<td>" . $row['item_name'] . "</td>";
  echo "<td>" . $row['item_number'] . "</td>";
  echo "</tr>";
 }
  echo "</table>";

mysqli_close($con); 
```

运行查询时出现此错误：

警告：mysqli_fetch_array() 期望参数 1 为 mysqli_result，布尔值

它不返回任何结果，但是如果我回显查询并将粘贴复制到 mysql 中，我会得到结果，但是从 PHP 运行时，我只会得到错误。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-17T13:44:45.667

更新版本的代码以在查询中显示错误消息（如果有）。还清理输入

```
<?php
if (is_array($_POST['select']))
{
    $c = array_map('array_map_callback', $_POST['select']);

    $result = mysqli_query($con, 'SELECT item_name, item_number FROM item WHERE item_number IN ("'.implode('","', $c).'")') OR die(mysqli_error($con));

    echo "<table border='1'>
    <tr>
    <th>item name</th>
    <th>item number</th>
    </tr>";
    while($row = mysqli_fetch_array($result))
    {
        echo "<tr>";
        echo "<td>" . $row['item_name'] . "</td>";
        echo "<td>" . $row['item_number'] . "</td>";
        echo "</tr>";
    }
    echo "</table>";
    mysqli_close($con);
}
else
{
    echo "No items selected";
}

function array_map_callback($a)
{
  global $con;
  return mysqli_real_escape_string($con, $a);
}

?> 
```

希望这应该发出查询有什么问题的消息。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-04-17T13:09:05.273

**$c**好像不是 PHP 数组，所以这里不能内爆

# javascript - Selenium IDE下拉列表框具有某些值循环？

> ID：16060872
> 
> 赞同：0
> 
> 时间：2013-04-17T13:05:19.023
> 
> 标签：javascript, loops, selenium, ide

如何单独使用 selenium IDE 和 JavaScript 测试带有某些项目（不是全部）的下拉框并循环直到列表结束？指点或建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:31:45.650

鉴于您有以下下拉框：

```
<select id="cars">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="opel">Opel</option>
  <option value="audi">Audi</option>
</select> 
```

如果您想测试它是否包含“volvo”和“opel”值，那么您可以在 storeEval selenium 命令中使用以下 JavaScript 代码：

```
(function(document, searchArray) {
    var dropDownBox = document.getElementById('cars');
    var dropDownBoxOptions = dropDownBox.getElementsByTagName('option');

    var valuesFound = 0;
    for(var i in searchArray) {
        for(var y=0; y<dropDownBoxOptions.length; y++) {
            if (dropDownBoxOptions[y].getAttribute('value') == searchArray[i]) {
                valuesFound++;
                break;
            }
        }
    }

    return valuesFound == searchArray.length;
})(selenium.browserbot.getCurrentWindow().document, ['volvo', 'opel']); 
```

这是上面的 Selenium 测试用例来源：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="http://www.google.com.tr/" />
<title>New Test</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">New Test</td></tr>
</thead><tbody>
<tr>
    <td>storeEval</td>
    <td>(function(document, searchArray) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var dropDownBox = document.getElementById('cars');&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var dropDownBoxOptions = dropDownBox.getElementsByTagName('option');&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var valuesFound = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(var i in searchArray) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(var y=0; y&lt;dropDownBoxOptions.length; y++) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (dropDownBoxOptions[y].getAttribute('value') == searchArray[i]) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valuesFound++;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return valuesFound == searchArray.length; })(selenium.browserbot.getCurrentWindow().document, ['volvo', 'opel']);</td>
    <td>result</td>
</tr>
<tr>
    <td>echo</td>
    <td>${result}</td>
    <td></td>
</tr>
</tbody></table>
</body>
</html> 
```

# c# - 没有绑定的 ListView 行号

> ID：16060874
> 
> 赞同：3
> 
> 时间：2013-04-17T13:05:31.103
> 
> 标签：c#, wpf

我一直想知道是否有可能在 WPF 中创建一个`ListView`具有行号而不绑定到`IEnumerable<>`index 属性的？也许制作一个自动增加行号的模板？如何意识到这一点？

在某些情况下它可能很有用（例如，当您使用一个以不愉快的形式返回大量数据的外部类时 - 例如字典或某些自定义类）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T13:37:48.473

![在此处输入图像描述](https://i.stack.imgur.com/TStgR.png)

XAML：

```
 <ListView.View>
     <GridView>
        <!-- This is the column where the row index is to be shown -->
        <GridViewColumn Width="100" Header="No."
        DisplayMemberBinding="{Binding RelativeSource=
             {RelativeSource FindAncestor, AncestorType={x:Type ListViewItem}}, 
              Converter={StaticResource IndexConverter}}" />
        <!-- other columns, may be bound to your viewmodel instance -->
        <GridViewColumn Width="100"
        ...
        </GridViewColumn>
    </GridView>
  </ListView.View> 
```

创建一个转换器类：

```
public class IndexConverter : IValueConverter
{
    public object Convert(object value, Type TargetType, object parameter, CultureInfo culture)
    {
        var item = (ListViewItem) value;
        var listView = ItemsControl.ItemsControlFromItemContainer(item) as ListView;
        int index = listView.ItemContainerGenerator.IndexFromContainer(item) + 1;
        return index.ToString();
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

在窗口或控件的资源部分：

```
<Converter:IndexConverter x:Key="IndexConverter" /> 
```

# .htaccess - 将 index.php 重定向到根目录

> ID：16060876
> 
> 赞同：2
> 
> 时间：2013-04-17T13:05:35.327
> 
> 标签：.htaccess, url

我以前做过，就像一行代码。现在，当我查找它时，只需将 index.php 重定向到`/`.htaccess 中的 root ( ) 就只有 5-10 行。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:08:19.663

这段代码对我有用

```
RewriteCond %{THE_REQUEST} ^.*/index.php 
RewriteRule ^(.*)index.php$ /$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:15:18.870

您正在寻找的可能是这样的：

```
Redirect 301 /index.php http://www.yoursite.com/folder/ 
```

# css - 表单中的下拉按钮

> ID：16060894
> 
> 赞同：1
> 
> 时间：2013-04-17T13:06:30.083
> 
> 标签：css, twitter-bootstrap

我正在尝试以引导形式实现下拉按钮。不幸的是，表格没有提交。它看起来像这样：

```
<form class="form-inline" method="post" action="">
    <fieldset>
        <input type="text"></input>
        <div class="btn-group" data-toggle="dropdown">
            <a class="btn dropdown-toggle pull-right" data-toggle="dropdown" href="">
                Show <span class=caret></span></a>
            <ul class="dropdown-menu">
                <li><input name="_show" class='btn' type="submit" value="Show"></input></li>
                <li><input name="_export" class='btn' type="submit" value="Export"></input></li>
            </ul>
            <button name="_export" class='btn' type="submit">Export</button>        
    </fieldset>
</form> 
```

两个问题：

1.  'div' 容器外的提交按钮有效，其中的两个输入均不执行任何操作。为什么？
2.  下拉按钮没有正确对齐，为什么？

*** 编辑 ***

1.  如果按钮从 ul 中删除，则单击“显示按钮”时会出现一个小的空列表。相同的名称属性并不重要，因为两个按钮的作用相同，应删除 btn-group 之外的按钮. 只要里面的那个工作正常

一个非常奇怪的事情是，如果我把

```
 <div class="btn-group" style="vertical-align: middle" data-toggle="dropdown">
  <a class="btn dropdown-toggle pull-right" data-toggle="dropdown" href="">
    Show <span class=caret></span></a>
    <ul class="dropdown-menu">
      <li><a href="/hello">Interactive</a></li>
      <li><a href="/hello2">Pic</a></li>
    </ul>
</div> 
```

单击下拉菜单条目时没有任何反应。在firefox的按钮上，我可以看到有一个链接，但是点击没有任何效果......

1.  对齐：我发现，twitter bootstrap button-group 存在一个普遍问题，解决方法是：style="vertical-align: middle"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:41:49.077

试试这个代码：

```
<div class="container row-fluid">
  <form method="post" class="form-horizontal " action="">
    <fieldset>
      <input type="text" name="tex"/>
      <button name="_export" class='btn' type="submit">Export</button>   
      <span class="dropdown">
        <a class="btn dropdown-toggle" id="dLabel" data-toggle="dropdown" data-target="#">
          <i class="icon-minus-sign"></i> Anmeld annonce
          <span class="caret"></span>
        </a>
        <ul class="dropdown-menu" >
          <li><a name="_show" href="#">Hello</a></li>
          <li><a name="_export" href="#">Boy</a></li>
        </ul>
      </span>
    </fieldset>    
  </form>
</div> 
```

武术

# .net - Entity Framework 需要 3 秒来执行我有生以来第一次看到的最简单的查询。之后变成瞬间

> ID：16060895
> 
> 赞同：6
> 
> 时间：2013-04-17T13:06:31.530
> 
> 标签：.net, performance, entity-framework

我将实体框架 4.5 与对象上下文一起使用。我的模型有大约 200 个实体类型。我第一次在返回 1 条记录的 10 条记录数据库中进行荒谬的查询时，需要 3 秒。从此，不仅是这个查询，所有的一切都将成为瞬间。如果我关闭 IISExpress 并再次打开它。第一次又会很慢。

必须有一些我可以用实体框架做的事情。[我考虑过预生成视图](https://stackoverflow.com/questions/16060728/pre-generating-views-to-improve-performance-still-have-any-impact-in-net-4-5-en)或[升级到 Entity Framework 5.0](https://stackoverflow.com/questions/16060305/im-using-net-4-5-version-of-entity-framework-if-i-import-entity-framework-5-0)，但我不确定这是否会有所帮助。

任何想法？

**直接在 Management Studio 中执行的编辑** 查询总是很快。查询非常简单。我只是通过用户名获取用户，并且该表有 .. 10 条记录。调试或发布没有太大区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:45:40.833

这是一个已知的问题”。我把它放在引号中是因为这对你和我来说都是一个问题，但微软认为这是正常的，不是问题。 [此 MSDN 页面](http://msdn.microsoft.com/en-us/library/cc853327%28v=vs.100%29.aspx)显示了 EF 各个部分的性能成本。

已经[有很多很多](https://stackoverflow.com/search?q=entity%20framework%20slow%20first%20time)关于这个的问题。我建议探索其中的一些。一两年前有一个特定的问题，其中多人对问题进行了非常详细的分析，但我现在似乎找不到。

特别是对于大型模型和 EDMX 文件，这非常慢，转换为代码优先模型可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:37:13.360

The delay is due to the time Entity Framework takes to fire up.

see [this SO question](https://stackoverflow.com/questions/15507067/entity-framework-codefirst-delay-experienced/15507195#15507195) for more info

# dialog - 从资源实现对话框

> ID：16060896
> 
> 赞同：1
> 
> 时间：2013-04-17T13:06:31.910
> 
> 标签：dialog, c++builder, rc, c++builder-xe2

我目前正在尝试将应用程序从 owl 移植到 vcl。

在我的旧项目文件中，我能够加载类似的对话框

`TBatchAcDialog(TWindow* parent) : TAPDialog(parent, BATCH_DIALOG)`

但是，使用 TTaskDialog 代替它不支持第二个参数。

我为用户界面设计者找到了一个解释，当右键单击菜单时，您可以从 rc 文件加载第一个声明的菜单。

但是，我真的不知道如何在此 IDE 中将这些对话框加载为对话框并将它们再次链接到我的类。

你们中有人知道这一点，或者可以将我链接到关于类似问题的文章吗？尽管实施 rc-dialogs 对我来说似乎是一个常见问题，但我似乎未能找到合适的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:08:54.083

C++Builder 没有任何将资源对话框包装在类中的本机功能。如果需要，您必须在自己的代码中手动设置。否则，只需使用 Win32 API 函数，例如[`CreateDialog()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645434.aspx)处理资源对话框，或者重新设计 UI 以使用 VCL`TForm`窗口而不是资源对话框。

`TTaskDialog`不是你想的那样。它只是 Win32 API[`TaskDialogIndirect()`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760544.aspx)函数（仅限 Vista 及更高版本）的包装器，与您尝试完成的任务无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T06:01:44.827

> 我目前正在尝试将应用程序从 owl 移植到 vcl。

你的确切目标是什么？能够使用 C++ Builder 构建应用程序，还是使用 VCL 代替 OWL？

如果你想为对话框使用 VCL，那么你不能移植它们，你需要从头开始重写所有的 UI，因为 VCL 与标准的 Windows 对话框有很大的不同。

如果您只想使用 C++ Builder 构建应用程序，那么您可以通过升级到 OWLNext 来实现 - 它是 OWL 框架的开源升级，可与 C++ Builder 和 Visual C++ 等现代编译器一起使用。您还可以使用 OWLNext 逐步迁移到 VCL - 因为 VCL 和 OWL 可以在同一个应用程序中共存，因此您可以将旧的 OWL 应用程序迁移到 C++ Builder，在 VCL 中编写任何新 UI，并逐步重写旧 UI在 VCL 中 - 它可能比用 VCL 重写整个应用程序更容易、更安全。

# python - Python中的字母范围

> ID：16060899
> 
> 赞同：568
> 
> 时间：2013-04-17T13:06:49.193
> 
> 标签：python, string, list, alphabet

而不是像这样制作字母字符列表：

```
alpha = ['a', 'b', 'c', 'd'.........'z'] 
```

有什么方法可以将它分组到一个范围或其他东西？例如，对于数字，可以使用`range()`：

```
range(1, 10) 
```

* * *

## 回答 #1

> 赞同：1042
> 
> 时间：2013-04-17T13:07:13.743

```
>>> import string
>>> string.ascii_lowercase
'abcdefghijklmnopqrstuvwxyz' 
```

如果你真的需要一份清单：

```
>>> list(string.ascii_lowercase)
['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'] 
```

并做到这一点`range`

```
>>> list(map(chr, range(97, 123))) #or list(map(chr, range(ord('a'), ord('z')+1)))
['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'] 
```

其他有用`string`的模块功能：

```
>>> help(string) # on Python 3
....
DATA
    ascii_letters = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'
    ascii_lowercase = 'abcdefghijklmnopqrstuvwxyz'
    ascii_uppercase = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'
    digits = '0123456789'
    hexdigits = '0123456789abcdefABCDEF'
    octdigits = '01234567'
    printable = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!"#$%&\'()*+,-./:;<=>?@[\\]^_`{|}~ \t\n\r\x0b\x0c'
    punctuation = '!"#$%&\'()*+,-./:;<=>?@[\\]^_`{|}~'
    whitespace = ' \t\n\r\x0b\x0c' 
```

* * *

## 回答 #2

> 赞同：139
> 
> 时间：2016-06-09T04:26:14.460

```
[chr(i) for i in range(ord('a'),ord('z')+1)] 
```

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2015-08-08T00:02:03.657

在 Python 2.7 和 3 中，您可以使用它：

```
import string
string.ascii_lowercase
'abcdefghijklmnopqrstuvwxyz'

string.ascii_uppercase
'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 
```

正如@Zaz 所说： `string.lowercase`已弃用，不再适用于 Python 3，但`string.ascii_lowercase`适用于两者

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2018-02-09T03:20:50.300

这是一个简单的字母范围实现：

**代码**

```
def letter_range(start, stop="{", step=1):
    """Yield a range of lowercase letters.""" 
    for ord_ in range(ord(start.lower()), ord(stop.lower()), step):
        yield chr(ord_) 
```

**演示**

```
list(letter_range("a", "f"))
# ['a', 'b', 'c', 'd', 'e']

list(letter_range("a", "f", step=2))
# ['a', 'c', 'e'] 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-05-14T15:38:32.183

如果您正在寻找来自 R 的等价物`letters[1:10]`，您可以使用：

```
import string
list(string.ascii_lowercase[0:10]) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-04-28T22:09:16.367

这是我能想到的最简单的方法：

```
#!/usr/bin/python3
for i in range(97, 123):
    print("{:c}".format(i), end='') 
```

因此，97 到 122 是 ASCII 数字，相当于“a”到“z”。注意小写和需要输入 123，因为它不会被包括在内）。

在打印函数中确保设置`{:c}`（字符）格式，在这种情况下，我们希望它一起打印，甚至不让最后一行换行，这样`end=''`就可以了。

结果是这样的： `abcdefghijklmnopqrstuvwxyz`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-03-11T07:42:35.710

使用内置范围函数在 python 中打印大写和小写字母

```
def upperCaseAlphabets():
    print("Upper Case Alphabets")
    for i in range(65, 91):
        print(chr(i), end=" ")
    print()

def lowerCaseAlphabets():
    print("Lower Case Alphabets")
    for i in range(97, 123):
        print(chr(i), end=" ")

upperCaseAlphabets();
lowerCaseAlphabets(); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-03-04T12:38:37.543

以下是我如何实现基于以下的字母范围生成的自定义函数`string.ascii_letters`：

```
from string import ascii_letters

def range_alpha(start_letter, end_letter):
  return ascii_letters[
    ascii_letters.index(start_letter):ascii_letters.index(end_letter) + 1
  ]

print(range_alpha('a', 'z'))
print(range_alpha('A', 'Z'))
print(range_alpha('a', 'Z')) 
```

# php - 在codeigniter web应用程序中使用会话数据（角色）设置用户管理好不好？

> ID：16060905
> 
> 赞同：-3
> 
> 时间：2013-04-17T13:07:03.447
> 
> 标签：php, codeigniter, session

在我使用 codeigniter 的 Web 应用程序中，我存储了之前在会话中从数据库查询的角色数据。

```
$role = $this->session->userdata('role'); 
```

在每个模型或控制器中，我总是使用这个变量 ($role) 来管理我的网络中的用户行为。

如

```
if($role==1)
{
//Behaviour for admin.
}
else if($role==2)
{
//Behaviour for general user
}
else
{
//Do something
} 
```

我的问题：如果有很多用户登录到我的系统，会话数据总是丢失而不点击注销之前。谢谢。

供您参考：我已将角色存储在数据库中，但为了方便我之前获得的角色值，我将其存储在会话中。对于简单的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:16:57.147

将数据库中的角色存储在用户表中。我的申请学生、员工、管理员、总裁有 4 个角色。

然后，您将根据输入的用户名查询数据库，

如果角色 = 1，则发送到相应的页面。

有点像这样：

```
$sql = "SELECT * FROM users WHERE username = :username AND role = 1";
$role = $this->db->conn_id->prepare($sql);
$role->bindParam(':username', $username);
$role->execute();

if ($role) {
    if ($role->rowCount() == 1) {
        return TRUE;
    }
} 
```

然后在控制器中做

```
if ($this->yourmodel->yourfunction($yourvariable)) { // Checks if the query above returns TRUE!
    redirect(to what ever page you want)
} 
```

# actionscript-3 - Flex / AS3 调试器或分析器

> ID：16060907
> 
> 赞同：0
> 
> 时间：2013-04-17T13:07:09.013
> 
> 标签：actionscript-3, apache-flex, air

过去，我使用**[Red Gate ANTS Memory Profiler](https://www.red-gate.com/products/dotnet-development/ants-memory-profiler/)**进行 .NET 调试，特别是我使用它来查找事件侦听器占用的内存。该软件允许开发人员查看当前存在哪些对象，如果它们被标记为 GC，它甚至会显示对象树。

我现在在 flex 中遇到了同样的问题（事件处理程序和垃圾收集），需要找到一个类似的工具来为 AS3 做同样的事情。

有没有类似的工具可用？我已经看到 Flash Builder 中内置了分析器，但这并没有太大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:12:25.410

试试这个 - 矿工。它有很多选项，您可以手动调用 GC...

[http://www.sociodox.com/theminer/](http://www.sociodox.com/theminer/)

# java - JPA 和 MySQL 的并发事务

> ID：16060910
> 
> 赞同：0
> 
> 时间：2013-04-17T13:07:19.307
> 
> 标签：java, mysql, jpa, playframework

我不是数据库专家，所以也许有人可以帮助我解决以下问题。我在 Play 上使用 JPA icm MySQL！框架。

由于我过去在数据收集例程上遇到数据库锁问题，因此我将此例程设为只读。现在，当我需要对此例程进行更改时，我会同时进行。到目前为止工作正常，但现在我遇到了问题。当新用户连接时，会创建一条记录并传回 ID。但我需要获取模型，而不仅仅是 id。

当我在我的测试环境中搜索“id”时，这很好，我只是搜索它（mem db），但是使用 MYSQL，EM 什么也没有返回。在我看来，使用 JPA-MySQL，在事务开始之前没有进行任何更改（即使只是面包）也不会包含在未来的搜索中。

这是正确的，有没有办法解决这个问题？我可以重写该过程以使其再次可读，并查看是否可以对其进行更多优化，以免导致其他线程（或服务器）在获取数据库锁时遇到问题。从长远来看，这可能是最好的，但我目前正在寻找一个更快的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:50:10.260

事务隔离级别设置得太高。改变它解决了这个问题。在剧中！框架（1.2.5）可以这样做：

```
%prod-test.db.isolation=READ_COMMITTED 
```

# php - MySQL选择后没有换行符

> ID：16060911
> 
> 赞同：0
> 
> 时间：2013-04-17T13:07:20.897
> 
> 标签：php, mysql, pdo

我有一个 MySQL 数据库，其中有一些帖子（带有换行符）。

我使用以下语法选择这些：

```
public function getById($id) {
    $stmp = $this->_db->prepare("SELECT `content` FROM `posts` WHERE `id`= ?;");
    $stmp->execute(array($this->id));
    $row = $stmp->fetch(PDO::FETCH_ASSOC);
    $this->content = $row['content'];
} 
```

但是这样我就失去了换行符。有没有办法可以选择包含换行符的内容？

真挚地，

卢克索

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:08:16.997

数据库中的换行符保存为`\n`(newline) 或`\r`(return) 或这两者的组合。在客户端，网络浏览器会忽略这些，这就是为什么你看不到它们，唯一的方法是将它们转换为`<br/>`（中断）

将 ( `\n\r`, `\r\n`, `\n`, `\r`) 转换为`<br/>`

```
nl2br($row['content']); 
```

见 php doc [nl2br 函数](http://php.net/manual/en/function.nl2br.php)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-17T13:14:39.963

HTML 将换行符转换为空格。使用它可以将它们转换为 HTML 中的可见换行符：

```
$this->content = nl2br($row['content']); 
```

# google-analytics - 事件跟踪不起作用

> ID：16060916
> 
> 赞同：2
> 
> 时间：2013-04-17T13:07:31.397
> 
> 标签：google-analytics

我正在尝试使用以下脚本将 Google 的事件跟踪集成到我的应用程序中。我可以在“实时”选项卡中看到事件。但我无法在“内容”选项卡中看到事件。

```
 var _gaq = _gaq || [];
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAccount', 'XXXXX']);
  _gaq.push(['_trackPageview']);
  _gaq.push(['_trackEvent', 'request.fullpath', 'plan_desc', 'plan_code>']); 
```

![实时选项卡下的事件](https://i.stack.imgur.com/Gcj4W.png)

![内容选项卡下的事件](https://i.stack.imgur.com/GksXg.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T00:30:32.343

您是否正在抓取定义 gaq 函数的脚本？

```
var _gaq = _gaq || [];
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAccount', 'XXXXX']);
  _gaq.push(['_trackPageview']);
  _gaq.push(['_trackEvent', 'request.fullpath', 'plan_desc', 'plan_code>']);
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

此外，对于您的事件推送，您推送的值是否应该是 JS 对象？如果是这样，您可能希望去掉引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-03T12:27:29.907

GA 需要一定的时间才能将您实时看到的数据转换为其他部分。

如果您仅在 48 小时内添加了代码，则可能还没有准备好查看结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-03T07:36:49.200

我建议您尝试 Chrome 的 Google Analytics Debugger 扩展程序，以查看跟踪事件是否到达 google。

[https://chrome.google.com/webstore/detail/google-analytics-debugger/jnkmfdileelhofjcijamephohjechhna?hl=en](https://chrome.google.com/webstore/detail/google-analytics-debugger/jnkmfdileelhofjcijamephohjechhna?hl=en)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-03T09:35:31.570

如果您尝试在 JS 中使用 Rails 变量，就像`request.fullpath`看起来那样，您必须确保在模板引擎中将其呈现出来。例如，如果您使用的是 ERB，则必须这样调用它...

```
_gaq.push(['_trackEvent', '<%= request.fullpath %>', 'plan_desc', 'plan_code>']); 
```

显然对其他变量重复，如果它们不是 Ruby 并且是纯 JS 对象，则需要省略它们周围的引号。

# perl - perl 中 STDOUT 的别名文件句柄

> ID：16060919
> 
> 赞同：12
> 
> 时间：2013-04-17T13:07:36.260
> 
> 标签：perl

我有一个 perl 脚本，它打开一个文件并在其中写入一些数据。有时此文件在某些​​机器上具有只读权限。对于这种情况，目前脚本会因为无法打开文件而死掉。我的要求是，在这种情况下，我希望我的脚本继续运行，而不是将内容写入文件，而是将其放入 STDOUT。我将使用`warn`而不是死，但我想知道我可以将我的文件句柄别名`FILE1`为`STDOUT`这样我就不必修改剩余的代码，因为在我的实际代码`print FILE1 <>`中存在于许多地方并且我不可能`if\else`到处设置条件。我希望我将别名`FILE1`为`STDOUT`这样的 print 语句将在 STDOUT 中输出或写入文件，具体取决于设置的值`FILE1`文件句柄。可以使用perl吗？

```
$file = "testfile.txt";
open( FILE1, ">> $file" ) or die "Can not read file $file: $! \n";
print FILE1 "Line1 \n";
print FILE1 "Line2 \n";
print FILE1 "Line3 \n";
print FILE1 "Line4 \n";
close FILE1 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-17T13:10:37.420

您可以使用`*FILE1 = STDOUT;`.

`*`前面有a 的变量称为类型团。[在这里](http://perldoc.perl.org/perldata.html#Typeglobs-and-Filehandles)阅读它们 。

您可能还想开始使用[词法文件句柄](http://www.shlomifish.org/lecture/Perl/Newbies/lecture5/new-features/lexical-filehandles.html)

这就是我将如何解决您的问题：

```
use strict;
use warnings;

my $file = "testfile.txt";
my $succ = open( my $fh , '>>', $file );

$fh = *STDOUT unless $succ;

print $fh "Line1 \n";
print $fh "Line2 \n";
print $fh "Line3 \n";
print $fh "Line4 \n";

close $fh if $succ; # don't close STDOUT 
```

# c# - jquery-ui-autocomplete 如何将 ID 设置到 textBox 中，它将返回文本值

> ID：16060920
> 
> 赞同：0
> 
> 时间：2013-04-17T13:07:39.613
> 
> 标签：c#, jquery, jquery-ui, autocomplete, jquery-autocomplete

我在让 jQuery 的自动完成小部件为我工作时遇到了很多麻烦。我正在使用来自服务器的键/值对列表。

我有以下要求：

1.  如果用户设置了值的 id，就像他知道城市的代码并且输入城市的名称一样，他输入了城市的代码——我希望自动完成将输入城市的名称，并且它没有！
    ***我编辑了我的代码，现在它可以工作了！***
    我添加了这行
    `if (data.d.length == 1 && request.term.match(/\d+/g)) SetValue(textbox, hidden, data.d[0]); else`

和功能
`function SetValue(textbox, hidden, value){ textbox.focus().val(value.Text); hidden.val(value.Semel);}`

1.  另一件事是，如果一个人使用相同的页面进行创建和编辑 - 在编辑时重新加载页面，您必须为值重新创建所有跨度等，我想从服务器发送自动完成的代码，而不是文本值，我想当我将值设置到文本框时，自动完成将开始工作并从服务器获取值
    ***但是这样我仍然卡住：***
    我不知道如何触发“自动完成”事件发送值（请求值）
    这是我的 C# 代码：

    ```
    [WebMethod(EnableSession = true)]
    [ScriptMethod]
    public List<IEntityBase> FetchList(string Text, string Code, string Dspl, int NumRecordes, string TableName)
    {
        Text = Server.UrlDecode(Text);
        List<Tavla> tvListById = null;
        int ignored = 0;
    if (int.TryParse(Text, out ignored))
        tvListById = TvList.GetTvListById(TableName, ignored, Code, Dspl);if (tvListById != null && tvListById.Count != 0)
        return tvListById.Cast<IEntityBase>().ToList();

    var fetchShem = TvList.GetData(TableName, Code, Dspl)
    .Where(m => m.Shem.ToLower().Contains(Text.ToLower()))
    .Take(NumRecordes);
    return fetchShem.Cast<IEntityBase>().ToList(); 
    ```

    }

这是我的 Jquery 代码：

```
enter code here

 textbox.autocomplete({
        source: function (request, response) {
            $.ajax({
                url: "AutoComplete.asmx/" + funcName,
                data: "{ 'Text': '" + escape(request.term) + "','Code':'" + code + "','Dspl':'" + dspl + "','NumRecordes':'" + numrecordes + "','TableName':'" + tablename + "'}",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataFilter: function (data) { return data; },
                success: function (data) {                      
                    if (data.d.length == 1 && request.term.match(/\d+/g))
                            SetValue(textbox, hidden, data.d[0]);
                        else
                        response($.map(data.d, function (item) {
                            return {
                                label: item.Text,
                                value: item.Semel
                            }
                        }));
                    }
                },
                error: function (msg) { alert(msg); }
            });
        },
        minLength: minLength,
        select: function (event, ui) {
            var selectedObj = ui.item;
            if (selectedObj) {
                textbox.val(selectedObj.label);
                hidden.val(selectedObj.value);
            }       return false;   },

    });function SetValue(textbox, hidden, value) {
textbox.focus().val(value.Text);
hidden.val(value.Semel); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:17:24.917

对于您的第一个问题，这完全取决于您尝试过的逻辑，以防万一您有任何国家/地区的 id，那么这应该不难。

第二个查询是关于页面性能的，如果您尝试使用 ajax 根据搜索模式更新元素，这也不应该更难，在这种情况下，您必须只更新实际元素，同时保持页面的其余部分完好无损。

请参阅[http://jquery.com/](http://jquery.com/)以更好地理解相同的内容

# python - Python 修剪/过滤掉点

> ID：16060931
> 
> 赞同：1
> 
> 时间：2013-04-17T13:08:26.510
> 
> 标签：python

我有以下正在稳步增加的点列表，例如：

```
[[0, 0], [9, 4], [18, 19], [25, 34], [48, 48], [54, 53], [61, 65], [69, 82], [73, 86], [87, 99]] 
```

但我碰巧遇到了一些违反这种模式的点，如下表所示：

```
[526, 590], [532, 599], [605, 539], [740, 519], [753, 539], [858, 700], [981, 615], [985, 539], [1105, 700], [1222, 590], [1359, 343], [1456, 86], [1617, 4], [1790, 44], [1885, 1927], [2016, 2008] 
```

所以，我需要找到一种方法来修剪/过滤掉这些违反模式的点，在这种情况下，指向从`[605, 539]`到`[1790, 44]`

我尝试使用以下内容，仅接受 y 坐标位于前一个点的 y 坐标和下一个点的 y 坐标之间的点：

```
for i, pt in enumerate(points[1:-1]):
    x,y=cur_pt=points[i]
    x0,y0=prev_pt=points[i-1]
    x1,y1=next_pt=points[i+1]
    if y<y1 and y>y0:
        print 'acceptable point'
    else:
        print 'pruned' 
```

问题是它修剪了许多有效点并留下了一些需要修剪的点。

点列表在这里：

```
points=[[0, 0], [9, 4], [18, 19], [25, 34], [48, 48], [54, 53], [61, 65], [69, 82], [73, 86], [87, 99], [93, 105], [96, 108], [98, 110], [99, 111], [100, 112], [106, 118], [119, 131], [128, 140], [134, 146], [137, 149], [139, 151], [140, 152], [141, 153], [147, 159], [160, 172], [185, 153], [213, 219], [215, 241], [219, 245], [223, 249], [236, 262], [247, 276], [249, 278], [274, 302], [282, 294], [288, 318], [313, 352], [365, 419], [377, 423], [416, 458], [435, 468], [468, 519], [481, 539], [508, 559], [526, 590], [532, 599], [605, 539], [740, 519], [753, 539], [858, 700], [981, 615], [985, 539], [1105, 700], [1222, 590], [1359, 343], [1456, 86], [1617, 4], [1790, 44], [1885, 1927], [2016, 2008], [2072, 2137], [2186, 2212], [2219, 2477], [2260, 2482], [2425, 2477], [2568, 2460], [2646, 2609], [2816, 2792], [2913, 2686], [2960, 2853], [3072, 2959], [3210, 2925], [3249, 2809], [3359, 2959], [3446, 3057], [3517, 2809], [3809, 2959], [4033, 3190], [4232, 3057], [4439, 2809], [4632, 3057], [4706, 2809], [4715, 1922], [4725, 1596], [5058, 1560], [5066, 1596], [5107, 1560], [5362, 1333], [5432, 1471], [5519, 1560], [5610, 1471], [5693, 249], [5782, 1471], [5968, 1560], [6068, 1471], [6105, 1560], [6298, 1700], [6390, 3765], [6416, 5926], [6446, 6440], [6503, 7300], [6511, 7332], [6522, 7342]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:19:20.343

```
>>> points = [526, 590], [532, 599], [605, 539], [740, 519], [753, 539], [858, 700], [981, 615], [985, 539], [1105, 700], [1222, 590], [1359, 343], [1456, 86], [1617, 4], [1790, 44], [1885, 1927], [2016, 2008]
>>> def prune(points):
        yield points[0]
        last = points[0]
        for point in points[1:]:
            if point[1] > last[1]:
                last = point
                yield point

>>> list(prune(points))
[[526, 590], [532, 599], [858, 700], [1885, 1927], [2016, 2008]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:24:39.930

> 我尝试使用以下内容，仅接受其 y 坐标位于前一个点的 y 坐标和下一个点的 y 坐标之间的点...

用类似的东西检查 x 坐标不是更有意义吗？

```
for i, pt in enumerate(points[1:-1]):
    x,y=cur_pt=points[i]
    x0,y0=prev_pt=points[i-1]
    x1,y1=next_pt=points[i+1]
    if y<y1 and y>y0 and x<x1 and x>x0:
        print 'acceptable point'
    else:
        print 'pruned' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:32:53.953

您可以在第一次迭代中执行第二次迭代，从第一次迭代的索引开始。如果当前检查的变量（在迭代 2 中）小于第一次迭代的变量，您可以将其与布尔变量结合起来，如下所示：

```
#! /usr/bin/env python
points=points=[[0, 0], [9, 4], [18, 19], [25, 34], [48, 48], [54, 53], [61, 65], [69, 82], [73, 86], [87, 99], [93, 105], [96, 108], [98, 110], [99, 111], [100, 112], [106, 118], [119, 131], [128, 140], [134, 146], [137, 149], [139, 151], [140, 152], [141, 153], [147, 159], [160, 172], [185, 153], [213, 219], [215, 241], [219, 245], [223, 249], [236, 262], [247, 276], [249, 278], [274, 302], [282, 294], [288, 318], [313, 352], [365, 419], [377, 423], [416, 458], [435, 468], [468, 519], [481, 539], [508, 559], [526, 590], [532, 599], [605, 539], [740, 519], [753, 539], [858, 700], [981, 615], [985, 539], [1105, 700], [1222, 590], [1359, 343], [1456, 86], [1617, 4], [1790, 44], [1885, 1927], [2016, 2008], [2072, 2137], [2186, 2212], [2219, 2477], [2260, 2482], [2425, 2477], [2568, 2460], [2646, 2609], [2816, 2792], [2913, 2686], [2960, 2853], [3072, 2959], [3210, 2925], [3249, 2809], [3359, 2959], [3446, 3057], [3517, 2809], [3809, 2959], [4033, 3190], [4232, 3057], [4439, 2809], [4632, 3057], [4706, 2809], [4715, 1922], [4725, 1596], [5058, 1560], [5066, 1596], [5107, 1560], [5362, 1333], [5432, 1471], [5519, 1560], [5610, 1471], [5693, 249], [5782, 1471], [5968, 1560], [6068, 1471], [6105, 1560], [6298, 1700], [6390, 3765], [6416, 5926], [6446, 6440], [6503, 7300], [6511, 7332], [6522, 7342]]
accept=[]
for counter,i in enumerate(points): # Iteration 1
    y = i[1]
    flag = 0 # Set boolean to 0, indicating this value is still valid
    for j in points[counter:]: # Iteration2
        if int(j[1]) < y:
             flag = 1 # Set boolean to 1, indicating this value must be omitted
             break # No need to continue with iteration 2
    if flag == 0:
        accept.append(i) 
```

这给出了输出：

```
[[0, 0], [9, 4], [1617, 4], [1790, 44], [5693, 249], [5782, 1471], [6068, 1471], [6105, 1560], [6298, 1700], [6390, 3765], [6416, 5926], [6446, 6440], [6503, 7300], [6511, 7332], [6522, 7342]] 
```

我希望那是你想要的？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T13:54:55.503

感谢大家的帮助，我刚刚发现我可以取平均 y/x 比率（最大 y 坐标）/最大值（x 坐标），在这种情况下约为 1.1 并过滤掉具有 y/x 的点偏离这个比率的比率：

```
valid=[v for v in points if (v[0]>0.9*v[1] and v[0]<1.5*v[1]) or v[0]==v[1]] 
```

# iphone - 自定义对象的超级视图上的 Xcode 错误

> ID：16060932
> 
> 赞同：0
> 
> 时间：2013-04-17T13:08:28.930
> 
> 标签：iphone, ios, objective-c, uitableview, superview

我有一个名为的自定义表格视图控制器`pfTableViewController`和一个名为`customTableViewCell`.

从我的内部我尝试`customTableViewCell`访问：`NSMutableArray``pfTableViewController`

```
- (IBAction)changeEditing:(UITextField *)sender {
    pfTableViewController *pfWin = (pfTableViewController *) self.superview.superview;
    [pfWin.pfFields replaceObjectAtIndex: myId withObject: @"some text"];
} 
```

我使用了 superview 两次，因为第一个调用 the`UITableView`而第二个应该调用 the`pfTableViewController`但它没有发生，我收到此错误：

> 2013-04-17 09:48:38.017 webgopher[21757:907]-[UIViewControllerWrapperView pfFields]：无法识别的选择器发送到实例 0x1d590d90

知道这里发生了什么吗？

如果我再使用一个超级视图，它会访问`UINavigationTransitionView`，我认为这太远了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:23:58.127

您不能直接从其视图访问控制器。您需要通过响应者链寻找第一个控制器。这篇文章可能有用。-

[如何在 iPhone SDK 中获取 UIView 的 superView 的 UIViewController？](https://stackoverflow.com/questions/2309569/how-to-get-uiviewcontroller-of-a-uiviews-superview-in-iphone-sdk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:20:12.050

`superview.superview`在苹果实现的视图上使用类似的东西`UITableViewCell`是一个非常糟糕的主意。您依赖于视图层次结构不变。这种事情很容易在iOS版本之间中断。

您还假设表视图的超级视图是您的视图控制器的一个实例。但是视图控制器实例不是视图，也不是视图层次结构的一部分。相反，您将获得一个包含视图控制器视图的私有苹果视图。

您应该在您的单元上实现某种委托方法，该方法由视图控制器实现。这样，视图控制器可以直接通知您的“changeEditing”事件，而无需爬取私有视图层次结构。

# mysql - 从 MySql 数据库中截断或删除表

> ID：16060948
> 
> 赞同：0
> 
> 时间：2013-04-17T13:09:12.157
> 
> 标签：mysql, truncate, sql-delete, sql-drop

我有一个名为**store**的数据库，它有 100 个表，其中表太多`foreign key references`，有数千条记录。

**问题**：是否有可能像**truncate**一样在单个查询中删除所有表的所有行。

我试过了，但是当我尝试它时我无法找到实现这一目标的确切方法，`TRUNCATE TABLE`它给了我错误：`Cannot delete or update a parent row: a foreign key constraint fails`这也是预期的。

任何人都可以帮助我实现这一目标，或者建议我更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:40:34.083

在删除之前执行此操作：

```
SET FOREIGN_KEY_CHECKS=0; 
```

完成后，将其重置为 1：

```
SET FOREIGN_KEY_CHECKS=1; 
```

# html - 我可以做些什么来使用画布/div而不是图像来创建 Jquery 卷轴效果？

> ID：16060952
> 
> 赞同：4
> 
> 时间：2013-04-17T13:09:24.337
> 
> 标签：html, jquery-mobile

我正在开发一个网络应用程序，我想产生类似“ [http://jquery.vostrel.cz/reel](http://jquery.vostrel.cz/reel) ”的效果。

我想使用画布/div而不是图像来创建这种效果，有没有人尝试过这个？

编辑

我试过的代码如下。

```
<body>
    <canvas width="1280" height="720" id="pageCanvas">
        You do not have a canvas enabled browser
    </canvas>
    <script>
        var context = document.getElementById('pageCanvas').getContext('2d');
        var angle = 0;
        function convertToRadians(degree) {
            return degree*(Math.PI/180);
        }

        function incrementAngle() {
            angle++;
            if(angle > 360) {
                angle = 0;
            }
        }

        function drawRandomlyColoredRectangle() {  
            <!-- clear the drawing surface -->
            context.clearRect(0,0,1280,720);
            <!-- you can also stroke a rect, the operations need to happen in order -->
            incrementAngle();
            context.save();                
            context.lineWidth = 10;  
            context.translate(200,200);
            context.rotate(convertToRadians(angle));
            <!-- set the fill style -->
            context.fillStyle = '#'+Math.floor(Math.random()*16777215).toString(16);
            context.fillRect(-25,-25,50,50);
            context.strokeRect(-25,-25,50,50);                
            context.restore();
        }

        setInterval(drawRandomlyColoredRectangle, 20);
    </script>
</body> 
```

我曾尝试使用一个 Canvas，但我想使用多个 Canvas。

请指导我解决这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T09:34:54.343

尝试这个：

```
<body>

<canvas width="1280" height="720" id="pageCanvas1">
    You do not have a canvas enabled browser
</canvas>
<canvas width="1280" height="720" id="pageCanvas2">
    You do not have a canvas enabled browser
</canvas>
<script>
    var draw = function (canvasid){
         var context = document.getElementById(canvasid).getContext('2d');
         var angle = 0;

        var convertToRadians = function(degree) {
            return degree*(Math.PI/180);
        }

        var incrementAngle = function() {
            angle++;
            if(angle > 360) {
                angle = 0;
            }
        }

        var drawRandomlyColoredRectangle = function(){ 
             <!-- clear the drawing surface -->
            context.clearRect(0,0,1280,720);
            <!-- you can also stroke a rect, the operations need to happen in order -->
            incrementAngle(angle);
            context.save();                
            context.lineWidth = 10;  
            context.translate(200,200);
            context.rotate(convertToRadians(angle));
            <!-- set the fill style -->
            context.fillStyle = '#'+Math.floor(Math.random()*16777215).toString(16);
            context.fillRect(-25,-25,50,50);
            context.strokeRect(-25,-25,50,50);                
            context.restore();
        }
        return {
            'start' : function(){

                setInterval(drawRandomlyColoredRectangle, 20);
            },
            'getContext' :function(){

                return context;
            } 
        };
    } 

    draw("pageCanvas1").start(); 
    draw("pageCanvas2").start();
</script> 
```

# python - Django 表单 - 定义值

> ID：16060955
> 
> 赞同：0
> 
> 时间：2013-04-17T13:09:37.847
> 
> 标签：python, django, django-forms

如何为表单设置定义值？

**型号**：

```
class Record(models.Model):
    user=models.ForeignKey(User)
    foo=models.CharField(max_length=100) 
```

**表格**：

```
class AddForm(forms.ModelForm):
   class Meta:
       model=Record 
```

**查看**：

```
class AddRecord(CreateView):
    template_name="any/any.html"
    form_class=AddForm
    model=Record 
```

`<input type="text" name="user" value="ANY_USER_ID"/>` 如果为任何用户发送和更改记录

如何设置字段用户默认值是：request.session.user

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:15:25.077

您可以覆盖[`get_initial`](https://docs.djangoproject.com/en/1.5/ref/class-based-views/mixins-editing/#django.views.generic.edit.FormMixin.get_initial)表单类以返回初始数据字典：

```
class AddRecord(CreateView):
    def get_initial(self):
        return {'user': self.request.user} 
```

但是您真正想要做的根本不是在表单上显示用户，而是在保存时自动设置它，如[文档所述](https://docs.djangoproject.com/en/1.5/topics/class-based-views/generic-editing/#models-and-request-user)。

# mysql - MySQL join 奇怪的结果

> ID：16060956
> 
> 赞同：1
> 
> 时间：2013-04-17T13:09:38.967
> 
> 标签：mysql, join

谁能帮忙，我认为mysql超出了我的范围！

我有以下表格：

*   火柴
*   团队
*   竞赛

比赛保存了两支球队之间的比赛的细节和相应的比赛。

我想查询给定比赛的所有游戏/装置的数据库，我想返回：

*   队名
*   团队编号
*   团体赛

这是我的查询：

```
SELECT
  matches.match_id,
  teamsh.team_name AS "homeTeam",
  teamsa.team_name AS "awayTeam",
  competition.competition_id,
  competition.name
FROM
  matches, teams teamsh, teams teamsa, competition
WHERE
  matches.home_team_id = teamsh.team_id
AND matches.away_team_id = teamsa.team_id
AND matches.competition_id=2 
```

由于某种原因，此查询正确返回了比赛 2 的所有灯具，但它也返回了灯具的行，但也作为比赛 1。我不明白为什么，因为我有这个条款：

```
AND matches.competition_id=2 
```

我做错了什么，我检查了数据库，并且每个灯具的匹配都正确存储。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:15:54.823

您尚未明确链接到比赛表（因此它正在执行笛卡尔连接） - 尝试添加：

```
and matches.competition_id = competition.competition_id 
```

- 到您的查询结束。

虽然，我建议重写查询以使用显式连接语法 - 如下所示：

```
SELECT m.match_id,
       h.team_name AS "homeTeam",
       a.team_name AS "awayTeam",
       c.competition_id,
       c.name
FROM matches m
JOIN teams h ON m.home_team_id = h.team_id
JOIN teams a ON m.away_team_id = a.team_id
JOIN competition c ON m.competition_id = c.competition_id
WHERE m.competition_id=2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:15:16.540

您忘记了`JOIN`比赛和比赛表之间的条件。

```
WHERE
  matches.home_team_id = teamsh.team_id
  AND matches.away_team_id = teamsa.team_id
  AND matches.competition_id = competition.competition_id
  AND matches.competition_id=2 
```

# sql-server - 如何使用 GETDATE() 仅获取日期(mm/dd/yyyy)？

> ID：16060958
> 
> 赞同：-5
> 
> 时间：2013-04-17T13:09:44.267
> 
> 标签：sql-server, sql-server-2008

大家好，我想通过以下方式选择系统的当前日期：

选择 GETDATE()

它会给你结果

**2013 年 4 月 17 日 06:37:35**

但我只想要**04/17/2013**。因为我不需要时间。

任何人都可以请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T13:11:38.940

您可以将其转换为`DATE`

```
SELECT CONVERT(DATE, GETDATE()) 
```

或将其转换为`VARCHAR`

```
SELECT CONVERT(CHAR(10), GETDATE(), 101) 
```

101 是您要求的格式

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:12:12.623

用这个：

```
SELECT CONVERT(VARCHAR(10), GETDATE(), 101) AS [MM/DD/YYYY] 
```

有关更多类型的日期，请访问[此处。](http://www.sql-server-helper.com/tips/date-formats.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T13:12:39.803

类似于以下内容：

选择转换（varchar（12），GetDate（），1）

convert 函数的第三个参数为日期格式提供了许多不同的格式选项。

# php - jquery日期选择器在php循环中不起作用

> ID：16060968
> 
> 赞同：-4
> 
> 时间：2013-04-17T13:10:22.163
> 
> 标签：php, html, jquery-ui

我有一个通过 php 数组循环运行的 html 表单。它包含一个日期字段，我想放入一个 jquery datepicker，但由于某种原因 datepicker 不起作用。这是表单的标记：

```
$html = '';
$html .= '<td class="main b_width"><strong>Date of Birth:</strong></td>
          <td class="main width2_100">'. tep_draw_input_field('driver_dob', tep_date_short($driver_edit['driver_dob']), 'id="driver_dob"').'&nbsp;' . (tep_not_null(ENTRY_DATE_OF_BIRTH_TEXT)? '<span class="inputRequirement">' . ENTRY_DATE_OF_BIRTH_TEXT . '</span>': '') .'

         <script type="text/javascript">$("#driver_dob").datepicker({dateFormat: '.JQUERY_DATEPICKER_FORMAT.', changeMonth: true, changeYear: true, yearRange: "-100:+0"})</script>
         </td>';

echo $html; 
```

谁能告诉我为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:28:17.137

尝试改变

```
$html .= '<td class="main b_width"><strong>Date of Birth:</strong></td>
          <td class="main width2_100">'. tep_draw_input_field('driver_dob', tep_date_short($driver_edit['driver_dob']), 'id="driver_dob"').'&nbsp;' . (tep_not_null(ENTRY_DATE_OF_BIRTH_TEXT)? '<span class="inputRequirement">' . ENTRY_DATE_OF_BIRTH_TEXT . '</span>': '') .'

         <script type="text/javascript">$("#driver_dob").datepicker({dateFormat: '.JQUERY_DATEPICKER_FORMAT.', changeMonth: true, changeYear: true, yearRange: "-100:+0"})</script>
         </td>'; 
```

到

```
$html .= '<td class="main b_width"><strong>Date of Birth:</strong></td>
          <td class="main width2_100">'. tep_draw_input_field('driver_dob', tep_date_short($driver_edit['driver_dob']), 'id="driver_dob"').'&nbsp;' . (tep_not_null(ENTRY_DATE_OF_BIRTH_TEXT)? '<span class="inputRequirement">' . ENTRY_DATE_OF_BIRTH_TEXT . '</span>': '') .'

         <script type="text/javascript">$("#driver_dob").datepicker({dateFormat: "'.JQUERY_DATEPICKER_FORMAT.'", changeMonth: true, changeYear: true, yearRange: "-100:+0"})</script>
         </td>'; 
```

我认为`dateFormat`'s value 也需要双引号 ( `"`)。

# c# - 实体框架类型初始化程序异常

> ID：16060972
> 
> 赞同：8
> 
> 时间：2013-04-17T13:10:28.897
> 
> 标签：c#, entity-framework, visual-studio-2012

我有一个实体框架项目，它在我的机器上运行良好，但从网络运行时会崩溃。最近对该项目的更改包括添加 Dynamic Linq dll (System.Linq.Dynamic)

当我从网络调试它时，VS 报告： `The type initializer for 'System.Data.Entity.Internal.AppConfig' threw an exception`

内部异常是：“无法加载文件或程序集 'EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自的异常HRESULT: 0x80131040)":"EntityFramework，版本=4.4.0.0，文化=中性，PublicKeyToken=b77a5c561934e089"}

我尝试了通常的技巧：`packages`从项目的根目录中删除目录，从包管理器控制台卸载并重新安装，但无济于事。

我的 app.config：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <section name="LGFinance.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
  </configSections>
  <connectionStrings>
    <add name="LGFinanceEntities" connectionString="metadata=res://*/Model.LGFinanceContext.csdl|res://*/Model.LGFinanceContext.ssdl|res://*/Model.LGFinanceContext.msl;provider=System.Data.SqlClient; provider connection string='data source=lightning;initial catalog=DLGDB;Integrated Security=true;Password=******;multipleactiveresultsets=True;App=EntityFramework'" providerName="System.Data.EntityClient" />
  </connectionStrings>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>
  <applicationSettings>
    <LGFinance.Properties.Settings>
      <setting name="Setting" serializeAs="String">
        <value />
      </setting>
    </LGFinance.Properties.Settings>
  </applicationSettings>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Windows.Interactivity" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-17T13:35:51.137

您的 App.config 文件列出了 Entity Framework 5.0，并且您的代码中的某些项目仍保留 EF 4.4 并希望在 App.config 文件中找到它。

以下是最有可能发生的情况：您在使用 .NET 4.0 构建的项目上安装了 EF 5.0，这使得 EF 4.4 版本而不是 5.0 版本（因为 5.0 仅适用于 .NET 4.5）。如果您稍后尝试将项目升级到 .NET 4.5，您仍然会在该项目上使用 EF 4.4。这将要求您在该项目上再次重新安装 EF，才能正确引用 EF 5.0。

试一试，让我知道它是否有效。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-26T03:47:22.243

所有项目都必须首先安装正确版本的 EF，然后在 App.config 文件中检查以下内容，

1.  确保**connectionStrings**元素位于**configSections**元素之后。
2.  确保**启动**元素位于**connectionStrings**元素之后。

```
<?xml version="1.0" encoding="utf-8"?>
 <configuration>
   <configSections>
         <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.3.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
   </configSections>
   <connectionStrings>
         <add name="SchedulingContext" connectionString="Data Source=XXX\SQL2008R2DEV;Initial Catalog=YYY;Persist Security Info=True;User ID=sa;Password=XXX"   providerName="System.Data.SqlClient"/>
   </connectionStrings>
   <startup>
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>       
 </configuration> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-23T13:05:02.163

我尝试了所有，之后只是删除了以下提供程序，它对我有用

```
<providers>
  <provider invariantName="System.Data.SqlClient" type="System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer" />
</providers> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-11T13:02:48.190

我可以解决这个问题安装： Entity Framework 6 Tools for Visual Studio 2012 & 2013 - [http://www.microsoft.com/en-gb/download/confirmation.aspx?id=40762](http://www.microsoft.com/en-gb/download/confirmation.aspx?id=40762)

问候，上午

# spring - 将 Spring MVC REST 配置为仅返回 xml

> ID：16060973
> 
> 赞同：1
> 
> 时间：2013-04-17T13:10:32.390
> 
> 标签：spring, spring-mvc

我已经配置了一个应用程序，它根据 url 末尾附加的内容返回 json 和 xml 视图。

按照：

[http://pfelitti87.blogspot.co.uk/2012/07/rest-services-with-spring-3-xml-json.html](http://pfelitti87.blogspot.co.uk/2012/07/rest-services-with-spring-3-xml-json.html)

我想重新配置它，但只允许返回 xml。

不知道该怎么做，我所做的一切仍然返回 json，当没有附加到末尾时

```
 @Bean(name = "viewResolver")
        public ContentNegotiatingViewResolver viewResolver() {
            ContentNegotiatingViewResolver contentNegotiatingViewResolver = new ContentNegotiatingViewResolver();
            contentNegotiatingViewResolver.setOrder(1);
            contentNegotiatingViewResolver.setFavorPathExtension(true);
            contentNegotiatingViewResolver.setFavorParameter(true);
            contentNegotiatingViewResolver.setIgnoreAcceptHeader(false);
            Map<String, String> mediaTypes = new HashMap<String, String>();
            mediaTypes.put("xml", "application/xml");
            contentNegotiatingViewResolver.setMediaTypes(mediaTypes);
            List<View> defaultViews = new ArrayList<View>();
            defaultViews.add(xmlView());
            contentNegotiatingViewResolver.setDefaultViews(defaultViews);
            return contentNegotiatingViewResolver;
        } 
```

所以输出是这样的：

```
.../state.json    error no jsp page json

.../state.xml     works fine

.../state         error no jsp page 
```

我想要的是以下两个返回 xml 的 url

```
.../state

.../state.xml 
```

上面的不行。。

这是控制器映射

```
@RequestMapping(value= "/{id}/{ref}/state", method = RequestMethod.GET)
public state getState(...) {...} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:00:10.063

这是通过xml配置的解决方案；- 控制器

```
@Controller 
@RequestMapping("/simpleEntity")
public class SimpleRestController {

    @RequestMapping(method=RequestMethod.GET)
    public @ResponseBody SimpleEntity get() {
        return new SimpleEntity();
    } 
```

}

xml

```
<mvc:annotation-driven>
    <mvc:message-converters>
        <bean class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
            <property name="marshaller" ref="xstream"/>
            <property name="unmarshaller" ref="xstream"/>
            <property name="supportedMediaTypes">
                <list>
                    <value>#{T(org.springframework.http.MediaType).TEXT_XML_VALUE}</value>
                </list>
            </property>
        </bean>
    </mvc:message-converters>
</mvc:annotation-driven>

<context:component-scan base-package="de.incompleteco.spring.web"/>

<bean id="xstream" class="org.springframework.oxm.xstream.XStreamMarshaller"/> 
```

这是一个配置版本

```
@Configuration
@EnableWebMvc
@ComponentScan("de.incompleteco.spring.web")
public class SimpleConfiguration extends WebMvcConfigurerAdapter {

    private XStreamMarshaller marshaller;

    @Override
    public void configureMessageConverters(List<HttpMessageConverter<?>> converters) {
        converters.add(getHttpMessageConverter());
        super.configureMessageConverters(converters);

    }

    public HttpMessageConverter<Object> getHttpMessageConverter() {
        MarshallingHttpMessageConverter converter = new MarshallingHttpMessageConverter();
        converter.setMarshaller(marshaller());
        converter.setUnmarshaller(marshaller());
        return converter;
    }

    @Bean
    public AbstractMarshaller marshaller() {
        if (marshaller == null) {
            return new XStreamMarshaller();
        } else {
            return marshaller;
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:15:03.010

尝试以下

从类路径中删除杰克逊

`<entry key="json" value="application/json" />`从`mediaTypes`中删除条目`ContentNegotiatingViewResolver`。

`<bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />`从`defaultViews`中删除 bean `ContentNegotiatingViewResolver`。

# linux - 匹配模式并使用 sed 在行尾追加

> ID：16060976
> 
> 赞同：0
> 
> 时间：2013-04-17T13:10:39.833
> 
> 标签：linux

例如，我有一堆行：

```
hello.c                                 
Untitled Folder          
Shell.sh          
Linux 
```

等等

我想要的是`/`在不包含`.`使用 sed 的行的末尾附加。IE

```
hello.c                                                                                                                   
Untitled Folder/     
Shell.sh     
Linux/ 
```

有谁能够帮我 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:14:07.693

您可以使用地址：

```
sed -e '/\./!s=$=/=' 
```

这意味着：如果该行不 ( `!`) 包含点 ( `/\./`)，则附加 /。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:17:02.470

类似的东西？

```
files = ['hello.c', 'Untitled Folder', 'Shell.sh', 'Linux']
for i, f in enumerate(files):
    if '.' not in f:
        files[i] = "%s/" % f

print files 
```

输出：

```
['hello.c', 'Untitled Folder/', 'Shell.sh', 'Linux/'] 
```

# jquery - Jquery验证分组的多个选择框

> ID：16060978
> 
> 赞同：0
> 
> 时间：2013-04-17T13:10:46.817
> 
> 标签：jquery, jsfiddle

我正在尝试验证多个多选框。

有一组具有相同名称的多个（多选）框，它们以'sortvalues []'作为名称分组[这些是由mysql表中的php代码生成的]。

现在，每个 sortvalues[] 的任务应该至少选择 1 个值。如果未选择 sortvalues 框，则仅警告说缺少值。

小提琴链接

```
 [http://jsfiddle.net/rvinay/HJ8DK/][1] 
```

期待您的宝贵建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:19:28.137

```
$('select[name="sortvalues[]"]').each(function () {
    if (!$(this).find("option:selected").length) {
        alert('missing value!');
        return false;
    }
}); 
```

[**在这里演示**](http://jsfiddle.net/HJ8DK/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:15:33.293

```
 $.each($("select"), function() {
        if(!$(this).val()) alert('Missing value');
 }); 
```

小提琴：http: [//jsfiddle.net/HJ8DK/1/](http://jsfiddle.net/HJ8DK/1/)

或者，只有一个警报：

```
$.each($("select"), function() {
       if(!$(this).val()) { alert('Missing value'); break; }
}); 
```

# php - PHP/MySQL 多表选择

> ID：16060984
> 
> 赞同：0
> 
> 时间：2013-04-17T13:11:02.997
> 
> 标签：php, mysql, multiple-tables

我正在尝试从一个表中选择多行，具体取决于另一个表中给出的 ID。

我已经使用下面的代码进行了一半的工作，但是根据分配给它的不同标签的数量，它会多次回显每个博客，我该怎么做才能在博客文章的一份副本上显示多个标签？

```
$sqlCommand = "SELECT blogid, blogtitle, content, blogtime, category, blogseourl, author FROM blog ORDER BY blogtime DESC";
    $query = mysqli_query($myConnection, $sqlCommand) or die (mysqli_error());
$blogDisplay = '';
        while ($row = mysqli_fetch_array($query)) {
        $blogid = $row["blogid"];
        $blogtitle = $row["blogtitle"];
        $content = $row["content"];
        $blogtime = $row["blogtime"];
        $category = $row["category"];
        $blogseourl = $row["blogseourl"];
        $author = $row["author"];
        $contentshort =  substr($content, 0, 250);
    $sqlCommand2 = "SELECT tag FROM blogtags WHERE blogid='$blogid'";
    $query2 = mysqli_query($myConnection, $sqlCommand2) or die (mysqli_error());        
        while ($row = mysqli_fetch_array($query2)) {
        $tag = $row['tag'];

$blogDisplay .= '<h1><a href="/blog/'. $blogseourl .'"> ' . $blogtitle . ' </a></h1> ' . $contentshort . '... <a href="/blog/'. $blogseourl .'">Read More...</a><br /><br /> ' . $author . ' posted on ' . $blogtime . ' &#124;  Category: ' . $category . ' &#124;  Tags: ' . $tag . ' &#124; <a href="/blog/'. $blogseourl .'#disqus_thread"></a>'; 
        }
        }
mysqli_free_result($query); 
```

因此，除了为每个标签回显多个 $blogDisplay 之外，一切都正常工作。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:21:20.693

您必须将 blogDisplay 分为两个部分，并列出其间的选项卡。或者您必须缓冲 taglist 并将其作为参数插入到 $blogDisplay

第一个最简单：

```
$sqlCommand = "SELECT blogid, blogtitle, content, blogtime, category, blogseourl, author FROM blog ORDER BY blogtime DESC";
    $query = mysqli_query($myConnection, $sqlCommand) or die (mysqli_error());
$blogDisplay = '';
        while ($row = mysqli_fetch_array($query)) {
        $blogid = $row["blogid"];
        $blogtitle = $row["blogtitle"];
        $content = $row["content"];
        $blogtime = $row["blogtime"];
        $category = $row["category"];
        $blogseourl = $row["blogseourl"];
        $author = $row["author"];
        $contentshort =  substr($content, 0, 250);
    $sqlCommand2 = "SELECT tag FROM blogtags WHERE blogid='$blogid'";
    $query2 = mysqli_query($myConnection, $sqlCommand2) or die (mysqli_error());        

/*first part, all the html before the taglist */
$blogDisplay .= '<h1><a href="/blog/'. $blogseourl .'"> ' . $blogtitle . ' </a></h1> ' . $contentshort . '... <a href="/blog/'. $blogseourl .'">Read More...</a><br /><br /> ' . $author . ' posted on ' . $blogtime . ' &#124;  Category: ' . $category . ' &#124;  Tags: ';

        while ($row = mysqli_fetch_array($query2)) {
        $tag = $row['tag'];
/**add the taglist*/
$blogDisplay .= $tag.' ';
        }

/**last part, all the html after the taglist*/
$blogDisplay .= ' &#124; <a href="/blog/'. $blogseourl .'#disqus_thread"></a>';

        }
mysqli_free_result($query); 
```

# ssis - 从 SQL 读取并将其传递给 C# 方法

> ID：16060986
> 
> 赞同：-1
> 
> 时间：2013-04-17T13:11:06.510
> 
> 标签：ssis

我需要根据某些参数从数据库表中读取一列。如果数据库表有两列，状态和 ID，那么如果状态为真，我必须读取 ID。然后我必须将此 ID 传递给 C# 方法。

如何在 SSIS 中实现这一点？所以基本上我的数据库包将从 SQL Server 读取数据并将其传递给 C# 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:02:40.140

SSIS 是一种用于移动和转换大量数据的 ETL 工具。如果您需要做大量的 C# 工作并且您只有一条或几条记录，那么 SSIS 可能不是用于此目的的正确工具。编写 ASP.NET Web 应用程序或 Windows 应用程序可能会更好。这些应用程序还可以使用 SQL 获取数据以在 C# 中进行处理。

如果您决定在 SSIS 和 C# 中执行此操作，这里有两种可能的方法：

1.  您可以使用[执行 SQL 任务](http://msdn.microsoft.com/en-us/library/ms141003%28v=SQL.105%29.aspx)来执行查询并将行集保存到变量中。然后，您将使用 C#[脚本任务](http://msdn.microsoft.com/en-us/library/ms141752.aspx)来处理变量的内容。

2.  您可以创建一个[数据流任务](http://msdn.microsoft.com/en-us/library/ms141122.aspx)。数据流应具有结构 Source -> Transformation -> Destination，并且可以包含多个转换组件。

例如，您将使用[OLE DB 源组件](http://msdn.microsoft.com/en-us/library/ms141696.aspx)来执行查询。然后，您将使用 C#[脚本组件](http://msdn.microsoft.com/en-us/library/ms137640.aspx)来转换查询返回的每条记录。最后，您将使用[OLE DB 目标组件](http://msdn.microsoft.com/en-us/library/ms141237.aspx)对每条记录的输出进行处理。

# android - 使用 SpannableStringBuilder 时，为什么我的文本没有以样式显示？

> ID：16060991
> 
> 赞同：7
> 
> 时间：2013-04-17T13:11:26.033
> 
> 标签：android, spannablestring

我有一个`SpannableString`对象的问题。

下面是一个简短的例子：

```
SpannableString spanstr = new SpannableString("Bold please!");
spanstr.setSpan(new StyleSpan(Typeface.BOLD), 0, spanstr.length(), 0);

SpannableStringBuilder sb = new SpannableStringBuilder();
sb.append(spanstr);
sb.append("\n"); // A newline
sb.append("The first line is bold. This one isn't.");

CharSequence cq = sb.subSequence(0, sb.length());
// ^There's no such method to return a SpannableString,
// so I try to return a CharSequence instead.

// And then, at last:
TextView contentView = (TextView) findViewById(R.id.some_id);
contentView.setText(cq); 
```

该示例试图做的是显示这一点：

> **请大胆！**
> 第一行是粗体。这个不是。

但问题是：文本的第一行不会以粗体显示。

为什么它没有达到预期的效果？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-17T13:17:51.240

使用可跨字符串生成器在 textview 中设置为文本：

```
contentView.setText(sb); 
```

否则你可以这样做：

```
SpannableStringBuilder spanstr = new SpannableStringBuilder("Bold please!");
spanstr.setSpan(new StyleSpan(Typeface.BOLD), 0, spanstr.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
spanstr.append("\n");
spanstr.append("The first line is bold. This one isn't.");
contentView.setText(spanstr); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:20:12.943

试试下面的。您需要将可扩展字符串设置为文本视图。因此，将可扩展字符串设置为您的文本，如下所示

```
String s= "The first line is bold. This one isn't";
String title="Bold Please!";  
TextView tv = (TextView) findViewById(R.id.some_id);
tv.setText("");
SpannableString ss1=  new SpannableString(title);
ss1.setSpan(new StyleSpan(Typeface.BOLD), 0, ss1.length(), 0);
tv.append(ss1);
tv.append("\n");
tv.append(s); 
```

我尝试了上述方法，您可以在下面看到生成的快照。

![在此处输入图像描述](https://i.stack.imgur.com/VQm5j.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T13:18:54.360

使用 SpannableStringBuilder 实例本身。

```
contentView.setText(sb); 
```

使用您的代码输出：

![在此处输入图像描述](https://i.stack.imgur.com/NpV3b.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-11T12:42:19.170

如果您在设备中使用自定义字体。我认为有这样一个愚蠢的错误。请在您的设备中将您的自定义字体更改为默认字体，然后重试。

# php - 找出添加了哪些数字以得出总和

> ID：16060995
> 
> 赞同：1
> 
> 时间：2013-04-17T13:11:32.587
> 
> 标签：php, sql, math

对不起标题。我不知道怎么问这个问题。

我在一个网站上有一个表格问一个问题。答案是复选框的形式。每个答案都使用“分数”保存到我的数据库中，值如下所示：

```
Allergy 1
Cardiology  2
Chest Disease   4
Dermatology 8
Emergency Room  16
Ambulance Trips 32
Gastroenterology    64
General Medicine    128
Gynecology  256
Hematology  512
Neurology   1024
Obstetrics  2048
Opthamology 4096
Orthopedics 8192
Physical Therapy    16384
Plastic Surgery 32768
Podiatry    65536
Proctology  131072
Psychiatry  262144
Surgery Performed   524288
Thoracic Surgery    1048576
Urology 2097152
Outside X-Rays  4194304
Diagnostic Tests (outside)  8388608 
```

如您所见，分数是前一个值乘以 2。当用户填写表格时，答案将作为一个值保存在数据库中 - 所有答案加在一起。

例如，用户选择了以下值：过敏、普通医学、血液学、产科。在数据库中，此问题的答案保存为`2689`.

有没有办法通过仅获得问题的答案来确定选择了哪些答案？

例如，我会查询我的数据库并提取`2689`值，我需要确定检查了哪些答案。

编辑：我希望在 PHP 中对答案进行逆向工程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T13:19:40.183

是的，这是一种称为[位掩码](http://en.wikipedia.org/wiki/Mask_%28computing%29)的常见模式。对与给定答案对应的值和从表单提交的值使用您的语言的二元 AND 运算符，以查看给定答案是否是选定选项之一。例如，如果提交并保存的答案与`2689`您的示例一样，您可以通过查看是否`2689 & 4`为非零来检查“胸部疾病”是否是所选选项之一。（`&`应该用您选择的语言中的二进制 AND 运算符替换。）

请注意，这仅适用于与个人选择相对应的所有值都是 2 的幂的情况。通常，您的标题中提出的问题是，要找出给定集合中的哪些数字已被添加以得出给定的总和，是所谓的[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)的一个例子，只有通过检查每个可能的组合才能解决，这是*非常*低效的。（特别是NP完全）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T13:27:27.527

您可以通过与 2 的幂进行与运算来找到值。

2 ⁰ = 1
2 ¹ = 2
2 ² = 4
2 ³ = 8
...
2 ^(23) = 8388608

您可以像这样使用二进制移位找出 2 ^n的值： 1 << n

php 之类的代码：

```
$item[] = {"Allergy", "Cardiology", ..., "Diagnostic Tests (outside)"};
$answer = 2689;

for ( $power = 0; $power < count($item); $power++ ) {

   if ( 1 << $power & $answer ) {
       echo $item[$power] . "\n";
   }
} 
```

编辑：使它对 php 更友好

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T13:19:21.060

就在这里。请注意，每个第*k*个“分数”的形式为 2^( *k* - 1)，它对应于仅设置了第*k*个位的位串。如果您知道设置了哪些位，则可以重建总和。

以 2689 为例，我们首先需要将其写成二进制：

```
2689 = 101010000001b 
```

从右边数，我们看到第一个、第八个、第十个和第十二位被设置，所以（你可以验证）

```
2689 = 2^0 + 2^7 + 2^9 + 2^11
     = 1 + 128 + 512 + 2048 
```

可以使用按位运算有效地完成此操作的实际实现。通过`AND`依次获取值和每个“分数”，然后检查它是否给出非零值，我们可以检查哪些分数进入了总和。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-03T11:37:05.117

这将完全符合您的要求：

 **```
<?php
Print bindecValues("2689");

function bindecValues($decimal, $reverse=false, $inverse=false) {

$bin = decbin($decimal);
if ($inverse) {
    $bin = str_replace("0", "x", $bin);
    $bin = str_replace("1", "0", $bin);
    $bin = str_replace("x", "1", $bin);
}
$total = strlen($bin);

$stock = array();

for ($i = 0; $i < $total; $i++) {
    if ($bin{$i} != 0) {
        $bin_2 = str_pad($bin{$i}, $total - $i, 0);
        array_push($stock, bindec($bin_2));
    }
}

$reverse ? rsort($stock):sort($stock);
return implode(", ", $stock);
}
?> 
```* 

*快乐编码*

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T13:18:44.117

请记住，整数以二进制形式存储 - 因此这些标志中的每一个（过敏 = 1）等都将对应于和的二进制表示中的单个位是真还是假。

例如，二进制中的 2689 是`0000 1010 1000 0001`哪个，如果您将其视为一个位数组，其中最低有效位（该数组中的最右边）是最低有效标志（过敏），那么我们可以很容易地看到第一个（过敏)、第八个（gen.medicine）、第十个（血液学）和第十二个（obs）阵列的插槽用 1 标记为真。

标志数组中的最大值是 32 位整数中的第 24 位。在必须使用更大的整数之前，您可以在此系统中定义多达 8 个标志。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T13:20:08.540

由于您所有的数字似乎都是 2 的幂，您只需将输入值存储在一个足够长的整数中以保存它，然后是位掩码。

```
if( value & 1 ) then 1 was part of the selection
if( value & 2 ) then 2 was part of the selection
if( value & 3 ) then 3 was part of the selection
and so on 
```**