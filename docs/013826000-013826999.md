# StackOverflow 问答 13826000-13826999

# android - Android扩展文件不会触发onDownloadStateChanged？

> ID：13826001
> 
> 赞同：1
> 
> 时间：2012-12-11T18:09:52.083
> 
> 标签：android

我正在尝试让我的应用下载扩展文件。到目前为止，这是我的代码。

```
public class main extends Activity implements IDownloaderClient {

TextView tv1;
Button mcButt;

@Override
 public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

  //////////
  tv1 = (TextView)findViewById(R.id.textView1);

  // Check whether the file have been downloaded.
  String mainFileName = Helpers.getExpansionAPKFileName(this, true, 1);
  boolean fileExists = Helpers.doesFileExist(this, mainFileName, 32921796L, false);

  if (!fileExists) {

   Intent launcher = getIntent();
   Intent fromNotification = new Intent(this, getClass());
   fromNotification.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
   fromNotification.setAction(launcher.getAction());

           if (launcher.getCategories() != null) {
                for (String cat : launcher.getCategories())
                { fromNotification.addCategory(cat); }
           }

   PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, fromNotification, PendingIntent.FLAG_UPDATE_CURRENT);

   try {

    int result = DownloaderClientMarshaller.startDownloadServiceIfRequired( this, pendingIntent, ExpansionFileDownloaderService.class);
    if (DownloaderClientMarshaller.NO_DOWNLOAD_REQUIRED != result) {

        // implement Downloading UI.
        tv1.setText("Need to download.");

     return;
    }

   } catch (Exception e) { 
    Log.e("apk-expansion-files", "NameNotFoundException occurred. " + e.getMessage(), e);
   }
  }

  tv1.setText("Downloaded!");

 }

///////////////////////////////////////////////////

@Override
public void onServiceConnected(Messenger m) {
    tv1.setText("onServiceConnected: " + m.toString() );
}

///////////

@Override
public void onDownloadStateChanged(int newState) {
    tv1.setText("onDownloadStateChanged: " + String.valueOf(newState) );
}

////////////

@Override
public void onDownloadProgress(DownloadProgressInfo progress) {
    ProgressBar mPB = (ProgressBar)findViewById(R.id.progressBar1);

    progress.mOverallTotal = progress.mOverallTotal;
    mPB.setMax((int) (progress.mOverallTotal >> 8));
    mPB.setProgress((int) (progress.mOverallProgress >> 8));
    tv1.setText(Long.toString(progress.mOverallProgress * 100 / progress.mOverallTotal) + "%");
    tv1.setText(Helpers.getDownloadProgressString(progress.mOverallProgress,progress.mOverallTotal));

} 
```

}

该文件确实可以正常下载，但在下载期间或之后不会触发 onDownloadProgress 或 onDownloadStateChanged。

想到的是，DownloaderClientMarshaller 需要以某种方式与在活动中实现的 IDownloaderClient 连接......

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:57:01.843

您应该创建和存根并将其连接到上下文。然后，事件将被发送到您的 IDownloaderClient。

```
if (DownloaderClientMarshaller.NO_DOWNLOAD_REQUIRED != result) {
  downloaderClientStub = DownloaderClientMarshaller.CreateStub(this,
                     YourDownloaderServiceClass.class);
  downloaderClientStub.connect(this);       
} 
```

# c++ - CUDA 语法错误'<'

> ID：13826007
> 
> 赞同：11
> 
> 时间：2012-12-11T18:10:01.830
> 
> 标签：c++, visual-studio-2010, cuda

在我的 test.cu 文件中（cu 文件项类型是 CUDA C/C++）

```
__global__ void foo()
{
}

void CudaMain()
{

  foo<<<1,1>>>();
} 
```

在我的 test.cpp 文件中

```
#include "mycuda.cu"

int main()
{

CudaMain();
return 0;

} 
```

和编译器在 test.cu 文件中向我发送错误“错误 c2059 语法错误'<'”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T18:24:10.930

在 C++ 文件中包含 CUDA 源文件不起作用，因为这只会使 CUDA 源代码成为 C++ 程序代码的一部分，而常规 C++ 编译器不理解 CUDA 语法扩展。如果您仍然希望将 CUDA 代码与非 CUDA C++ 代码分开，那么您可能需要考虑单独编译。CUDA 源代码可以编译为常规目标文件，然后可以与其他目标文件链接以生成可执行文件。

修改 C++ 代码为：

```
extern void CudaMain(void);

int main()
{
    CudaMain();
    return 0;
} 
```

使用 C++ 编译器编译 CUDA 文件`nvcc`，然后使用 C++ 代码链接生成的目标文件`nvcc`（您可能还需要在链接命令中指定标准 C++ 库）：

```
$ nvcc -c -o test_cuda.o test.cu
$ g++ -c -o test_cpp.o test.cpp
$ nvcc -o test.exe test_cuda.o test_cpp.o -lstdc++ 
```

编辑：您的问题是关于 VS2010。可能您必须在那里创建自定义构建步骤。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-05-29T12:36:40.590

基于这里的线程：[https ://forums.developer.nvidia.com/t/cuda-build-error/52615/4](https://forums.developer.nvidia.com/t/cuda-build-error/52615/4)

您的测试文件扩展名也应该是 .cu，但如果您使用 MSCV 重命名还不够，您应该在 VS 项目中创建一个新的 CUDA C/C++ 源模块。

此外，您应该在 <> 运算符之间放置空格，例如。

```
foo< < <1,1> > >(); 
```

因为 C++ 无法解析 <<<>>>。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-07T16:00:14.003

我知道这是一个老问题，但我一直在四处寻找，它让我想起了一个没有被提及的解决方案。

该`nvcc`帮助提供：

```
--x {c|c++|cu}                             (-x)
        Explicitly specify the language for the input files, rather than letting
        the compiler choose a default based on the file name suffix.
        Allowed values for this option:  'c','c++','cu'. 
```

因此，尽管它有点生硬，但您可以这样做：

```
nvcc my_source.cpp -x cu ... 
```

它会编译它，`.cpp`就好像它被命名`.cu`（即作为CUDA）。

# asp.net - 如何更改 asp:DropDownList 扩展背景颜色？CSS 类

> ID：13826018
> 
> 赞同：2
> 
> 时间：2012-12-11T18:10:39.233
> 
> 标签：asp.net, css, drop-down-menu, background-color

这里的类和示例

```
 <asp:DropDownList ID="dropDownListZenithYesNo" 
    CssClass="dropDownBox" runat="server"></asp:DropDownList> 
```

这里是那个下拉列表的 CSS 类

```
.dropDownBox
{
    font-size: 13px;
    color: #3b3b3b;
    padding: 5px;
    background: -moz-linear-gradient(
    top,
    #f0f0f0 0%,
    #d6d6d6);
    background: -webkit-gradient(
    linear, left top, left bottom, 
    from(#f0f0f0),
    to(#d6d6d6));
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    border-radius: 3px;
    border: 1px solid #999999;
    -moz-box-shadow: 0px 1px 2px rgba(000,000,000,0.5), inset 0px 1px 0px rgba(255,255,255,1);
    -webkit-box-shadow: 0px 1px 2px rgba(000,000,000,0.5), inset 0px 1px 0px rgba(255,255,255,1); 
    box-shadow: 0px 1px 2px rgba(000,000,000,0.5), inset 0px 1px 0px rgba(255,255,255,1);
     text-shadow: 0px 1px 0px rgba(255,255,255,1), 0px 1px 0px rgba(255,255,255,0);
} 
```

在这里，当您不单击查看元素时，它看起来不错

![在此处输入图像描述](../Images/9236ba4a19e85ad37051fe4916dbe00a.png)

这就是当你点击查看元素时它看起来有多糟糕

![在此处输入图像描述](../Images/cfdfc400ad9d475fb57d93ed5aea4d5b.png)

使用 windows 7 firefox 最新版本进行测试

CSS CSS3 HTML 下拉列表颜色样式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:29:05.217

在您的 css 下方添加以下 css

```
.dropDownBox option
    {
        font-size: 13px;
        color: #3b3b3b;
        padding: 5px;
        background: -moz-linear-gradient(
top,
#f0f0f0 0%,
#d6d6d6);
        background: -webkit-gradient(
linear, left top, left bottom, 
from(#f0f0f0),
to(#d6d6d6));
        -moz-border-radius: 3px;
        -webkit-border-radius: 3px;
        border-radius: 3px;
        border: 1px solid #999999;
        -moz-box-shadow: 0px 1px 2px rgba(000,000,000,0.5), inset 0px 1px 0px rgba(255,255,255,1);
        -webkit-box-shadow: 0px 1px 2px rgba(000,000,000,0.5), inset 0px 1px 0px rgba(255,255,255,1);
        box-shadow: 0px 1px 2px rgba(000,000,000,0.5), inset 0px 1px 0px rgba(255,255,255,1);
        text-shadow: 0px 1px 0px rgba(255,255,255,1), 0px 1px 0px rgba(255,255,255,0);
    } 
```

但是在多个浏览器中测试您的页面，因为它可能有不同的结果。事实上我有不同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:30:49.423

您必须从默认样式继承。我建议为您的选项指定颜色：

```
.dropDownBox option{
    font-size:1.2em;
    background-color:#FF0 !important;
    display:block;
} 
```

[这是小提琴](http://jsfiddle.net/TNCodeMonkey/wzvdE/)

# batch-file - 批处理文件将多个具有日期限制的 .txt 文件从多个目录复制到一个目录

> ID：13826019
> 
> 赞同：1
> 
> 时间：2012-12-11T18:10:41.493
> 
> 标签：batch-file

我正在尝试使用批处理文件将分散在一个主目录的几个子目录中的所有 .txt 文件复制到另一个目录中。我研究了这个网站，并在这个链接上找到了很多答案：[批处理文件将具有某些扩展名的文件从多个目录复制到一个目录](https://stackoverflow.com/questions/1224880/batch-file-copy-files-with-certain-extensions-from-multiple-directories-into-one)中。就像 Jay 下面的代码一样：

```
set dSource=C:\Main directory\sub directory
set dTarget=D:\Documents
set fType=*.doc
for /f "delims=" %%f in ('dir /a-d /b /s "%dSource%\%fType%"') do (
copy /V "%%f" "%dTarget%\" 2>nul 
```

)

我的问题是如何修改此链接上的此代码或其他代码以批量复制带有时间戳的文件，就像我只想复制从 2012 年 1 月 1 日到 2012 年 11 月 1 日创建的 .txt 文件一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-30T22:24:28.547

我的建议是在驱动器的目录树中查找和移动 *.txt 文件，或者整个驱动器，甚至是在特定时间段内具有最后修改日期的多个驱动器：

1.  启动**Windows 资源管理器**。
2.  点击按钮**Search**。
3.  打开用于查找文件和文件夹的高级搜索选项。
4.  选择/输入以按最后修改日期搜索文件。
5.  输入两个日期以指定时间段或选择时间段。
6.  运行搜索。
7.  在搜索结果中选择所有找到的文件，例如使用 Ctrl+A。
8.  按 Ctrl+X 将找到的文件标记为被剪切（移动）。
9.  打开应将文件移动到的文件夹。
10.  按 Ctrl+V 粘贴文件（移动它们）。

而已。

如果不应该使用调度任务定期完成此查找 + 移动文件作业，则无需为此任务编写批处理作业。

使用 Windows 资源管理器在特定时间段内对文件进行此类高级查找的确切步骤取决于 Windows 版本。参见例如计算机提示

*   在Windows 8/7/Vista[中按修改日期查找文件，或](http://www.computerhope.com/tips/tip202.htm)
*   对于 Windows XP：[如何在我的计算机上搜索文件？](http://etc.usf.edu/techease/win/files-sharing/how-do-i-search-for-a-file-on-my-computer/)

当然，还有许多免费软件和共享软件工具，它们还支持根据各种搜索条件（如指定时间段内的最后修改日期）查找文件并移动它们。

好吧，这并不能真正回答这个问题，因为它不包含执行这项工作的批处理代码。所以我用另一个问题来回答这个问题：

如果包括 Windows 资源管理器在内的数十个 GUI 应用程序通过简单的用户输入来执行相同的操作，而无需编码技能，因此非常易于使用，那么为什么要考虑为这样的任务编写批处理文件来适应不同的日期，并且 find +移动必须只进行一次还是不时更改标准？

# iphone - 用 NSLog 或 CCLog 制作的日志是否存储在 iPhone 中？我可以找回它们吗？

> ID：13826022
> 
> 赞同：2
> 
> 时间：2012-12-11T18:10:58.307
> 
> 标签：iphone, objective-c, ios, xcode

在连接到 Xcode 的设备上测试我的 iOS 应用程序时，控制台中的日志`NSLog`或`CCLog`出现在控制台中，这对我进行调试非常有用。

当设备没有连接到 Xcode 时，显然我没有得到这样的日志。当它崩溃时，我根本不知道为什么。

正因为如此，我在这里提出了一个问题：[我的 iPhone 本地是否有类似 Xcode 的输出日志可用？](https://stackoverflow.com/questions/11566066/is-there-an-output-log-like-xcodes-available-locally-in-my-iphone). 但我注意到那些“设备日志”**不是我期望的日志**。事实上，它们与我在 Xcode 控制台中看到的日志有很大的不同，它们都没有反映`NSLog`我`CCLog`在项目中所做的事情。所以我想我找错地方了。

是否`NSLogs`或`CCLogs`存储在我可以检索的地方？我不太了解“设备日志”，但它们似乎并没有告诉我任何有用或具体的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:43:06.237

将您的设备连接到您的计算机，然后在 XCode、windows Organizer 中，您可以看到这些设备。您可以选择您的设备，然后单击控制台。它应该向您显示所有 NSLog 语句

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:27:37.847

您的崩溃记录在您的设备中，因此您可以在将手机连接到 XCode 时检索它们。

1 - 插入

2 - 打开你的 XCode 并转到 Organizer (cmd + shift + 2)

3 - 单击设备，然后在左上角单击设备日志。

![在此处输入图像描述](../Images/ba8f61451dbee68cea1a95826ec9b7b2.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:30:44.943

要为其他（相当标准的）答案添加一些内容，这是一个不需要 Xcode 的解决方案：[libimobiledevice 库](http://www.libimobiledevice.org/)`idevicesyslog`中的实用程序还可以显示所有日志。

奖励：如果您有越狱手机，您可以`syslogd`从 Cydia 安装，所有系统日志都将保存到一个名为`/var/log/syslog`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T22:17:12.933

最好的选择是从连接到真实设备**的 Xcode 运行您的应用程序**并查看控制台输出（Shift-Command-Y 默认显示/隐藏控制台视图）。

第二个最佳选择是之后将设备连接到您的 Mac 并使用**[iPhone 配置实用程序](http://www.apple.com/support/iphone/enterprise/)**查看您的应用程序特定的控制台日志。

第三个最佳选择是使用一些 3rd 方 iPhone 应用程序，它可以**读取设备中的控制台日志**（当你在实地考察时）。警告：我为此目的制作了“[设备上的控制台](https://itunes.apple.com/us/app/console-on-device/id480535348?mt=8)”应用程序，需要在旅行时调试崩溃。它可以显示应用程序特定的日志并允许通过电子邮件发送它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-21T17:08:59.500

根据我的经验，大多数用户从不查看日志，因此它们毫无用处，只会浪费时间、空间和电池。有些人看日志并无缘无故地担心，给你差评（“我看了日志，代码中有很多错误”），这对任何人都没有好处。

所以摆脱NSLogs。最好定义一个在调试版本中执行 NSLog 而在发布版本中不执行任何操作的宏。除了那个宏，你的源代码中不应该有任何 NSLog。

# apache - 如何在 Apache/XAMPP 中使用符号链接？

> ID：13826027
> 
> 赞同：3
> 
> 时间：2012-12-11T18:11:13.120
> 
> 标签：apache, xampp, symlink

我正在尝试从我的 XAMPP 目录中的 htdocs 目录链接到我的主目录（我使用的是 Ubuntu）。我网站目录的权限是drwxrwxr-x。我还在 httpd.conf 中为 htdocs 添加了 FollowSymLinks 选项：

```
<Directory "/opt/lampp/htdocs">

Options Indexes FollowSymLinks ExecCGI Includes

AllowOverride All

Require all granted
</Directory> 
```

尽管如此，当我尝试打开我的网站时，我仍然收到错误 403。这是 error.log 中的消息：

```
[Thu Dec 06 22:53:28.874813 2012] [core:error] [pid 7553] [client 127.0.0.1:32999] AH00037: Symbolic link not allowed or link target not accessible: /opt/lampp/htdocs/benjamin/website-paul 
```

你知道可能是什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:40:37.480

You must identify where you want to allow from -- who is allowed to follow the link. This could be an IP, IP range, domain, or all. Also, even though you are likely to allow from all, it is good practice to set allow order.

```
Order allow,deny
Allow from all 
```

# android - 将图像设置为墙纸时显示强制关闭错误

> ID：13826028
> 
> 赞同：0
> 
> 时间：2012-12-11T18:11:14.697
> 
> 标签：android

[尝试通过放置一个按钮在本教程中将图像设置为墙纸，但单击按钮应用程序后强制关闭](http://www.androidhive.info/2012/02/android-gridview-layout-tutorial/)

```
@Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            WallpaperManager myWallpaperManager = WallpaperManager
                    .getInstance(getApplicationContext());
            try {
                myWallpaperManager.setResource(R.id.full_image_view);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        } 
```

日志猫：

```
12-12 00:39:20.240: I/dalvikvm(687): Could not find method com.google.inject.Injector.getInstance, referenced from method de.dan_nrw.android.scroid.DependencyInjector.getInstance
12-12 00:39:20.310: W/dalvikvm(687): VFY: unable to resolve interface method 3344: Lcom/google/inject/Injector;.getInstance (Ljava/lang/Class;)Ljava/lang/Object;
12-12 00:39:20.310: D/dalvikvm(687): VFY: replacing opcode 0x72 at 0x000e
12-12 00:39:20.320: E/dalvikvm(687): Could not find class 'com.google.inject.Module[]', referenced from method de.dan_nrw.android.scroid.DependencyInjector.init
12-12 00:39:20.370: W/dalvikvm(687): VFY: unable to resolve new-array 684 ([Lcom/google/inject/Module;) in Lde/dan_nrw/android/scroid/DependencyInjector;
12-12 00:39:20.370: D/dalvikvm(687): VFY: replacing opcode 0x23 at 0x0001
12-12 00:39:20.413: W/dalvikvm(687): Unable to resolve superclass of Lde/dan_nrw/android/scroid/ProductiveModule; (472)
12-12 00:39:20.450: W/dalvikvm(687): Link of class 'Lde/dan_nrw/android/scroid/ProductiveModule;' failed
12-12 00:39:20.450: D/dalvikvm(687): DexOpt: unable to opt direct call 0x0d30 at 0x06 in Lde/dan_nrw/android/scroid/DependencyInjector;.init
12-12 00:39:20.471: D/AndroidRuntime(687): Shutting down VM
12-12 00:39:20.471: W/dalvikvm(687): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
12-12 00:39:20.511: E/AndroidRuntime(687): FATAL EXCEPTION: main
12-12 00:39:20.511: E/AndroidRuntime(687): java.lang.NoClassDefFoundError: com.google.inject.Module[]
12-12 00:39:20.511: E/AndroidRuntime(687):  at de.dan_nrw.android.scroid.DependencyInjector.init(DependencyInjector.java:37)
12-12 00:39:20.511: E/AndroidRuntime(687):  at de.dan_nrw.android.scroid.ScroidWallpaperGallery.<init>(ScroidWallpaperGallery.java:84)
12-12 00:39:20.511: E/AndroidRuntime(687):  at java.lang.Class.newInstanceImpl(Native Method)
12-12 00:39:20.511: E/AndroidRuntime(687):  at java.lang.Class.newInstance(Class.java:1319)
12-12 00:39:20.511: E/AndroidRuntime(687):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
12-12 00:39:20.511: E/AndroidRuntime(687):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1870)
12-12 00:39:20.511: E/AndroidRuntime(687):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
12-12 00:39:20.511: E/AndroidRuntime(687):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
12-12 00:39:20.511: E/AndroidRuntime(687):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
12-12 00:39:20.511: E/AndroidRuntime(687):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-12 00:39:20.511: E/AndroidRuntime(687):  at android.os.Looper.loop(Looper.java:137)
12-12 00:39:20.511: E/AndroidRuntime(687):  at android.app.ActivityThread.main(ActivityThread.java:4340)
12-12 00:39:20.511: E/AndroidRuntime(687):  at java.lang.reflect.Method.invokeNative(Native Method)
12-12 00:39:20.511: E/AndroidRuntime(687):  at java.lang.reflect.Method.invoke(Method.java:511)
12-12 00:39:20.511: E/AndroidRuntime(687):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-12 00:39:20.511: E/AndroidRuntime(687):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-12 00:39:20.511: E/AndroidRuntime(687):  at dalvik.system.NativeStart.main(Native Method)
12-12 00:39:23.931: I/Process(687): Sending signal. PID: 687 SIG: 9
12-12 00:44:23.441: I/dalvikvm(728): Could not find method com.google.inject.Injector.getInstance, referenced from method de.dan_nrw.android.scroid.DependencyInjector.getInstance
12-12 00:44:23.491: W/dalvikvm(728): VFY: unable to resolve interface method 3344: Lcom/google/inject/Injector;.getInstance (Ljava/lang/Class;)Ljava/lang/Object;
12-12 00:44:23.491: D/dalvikvm(728): VFY: replacing opcode 0x72 at 0x000e
12-12 00:44:23.491: E/dalvikvm(728): Could not find class 'com.google.inject.Module[]', referenced from method de.dan_nrw.android.scroid.DependencyInjector.init
12-12 00:44:23.491: W/dalvikvm(728): VFY: unable to resolve new-array 684 ([Lcom/google/inject/Module;) in Lde/dan_nrw/android/scroid/DependencyInjector;
12-12 00:44:23.491: D/dalvikvm(728): VFY: replacing opcode 0x23 at 0x0001
12-12 00:44:23.511: W/dalvikvm(728): Unable to resolve superclass of Lde/dan_nrw/android/scroid/ProductiveModule; (472)
12-12 00:44:23.521: W/dalvikvm(728): Link of class 'Lde/dan_nrw/android/scroid/ProductiveModule;' failed
12-12 00:44:23.551: D/dalvikvm(728): DexOpt: unable to opt direct call 0x0d30 at 0x06 in Lde/dan_nrw/android/scroid/DependencyInjector;.init
12-12 00:44:23.551: D/AndroidRuntime(728): Shutting down VM
12-12 00:44:23.561: W/dalvikvm(728): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
12-12 00:44:23.641: E/AndroidRuntime(728): FATAL EXCEPTION: main
12-12 00:44:23.641: E/AndroidRuntime(728): java.lang.NoClassDefFoundError: com.google.inject.Module[]
12-12 00:44:23.641: E/AndroidRuntime(728):  at de.dan_nrw.android.scroid.DependencyInjector.init(DependencyInjector.java:37)
12-12 00:44:23.641: E/AndroidRuntime(728):  at de.dan_nrw.android.scroid.ScroidWallpaperGallery.<init>(ScroidWallpaperGallery.java:84)
12-12 00:44:23.641: E/AndroidRuntime(728):  at java.lang.Class.newInstanceImpl(Native Method)
12-12 00:44:23.641: E/AndroidRuntime(728):  at java.lang.Class.newInstance(Class.java:1319)
12-12 00:44:23.641: E/AndroidRuntime(728):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
12-12 00:44:23.641: E/AndroidRuntime(728):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1870)
12-12 00:44:23.641: E/AndroidRuntime(728):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
12-12 00:44:23.641: E/AndroidRuntime(728):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
12-12 00:44:23.641: E/AndroidRuntime(728):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
12-12 00:44:23.641: E/AndroidRuntime(728):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-12 00:44:23.641: E/AndroidRuntime(728):  at android.os.Looper.loop(Looper.java:137)
12-12 00:44:23.641: E/AndroidRuntime(728):  at android.app.ActivityThread.main(ActivityThread.java:4340)
12-12 00:44:23.641: E/AndroidRuntime(728):  at java.lang.reflect.Method.invokeNative(Native Method)
12-12 00:44:23.641: E/AndroidRuntime(728):  at java.lang.reflect.Method.invoke(Method.java:511)
12-12 00:44:23.641: E/AndroidRuntime(728):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-12 00:44:23.641: E/AndroidRuntime(728):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-12 00:44:23.641: E/AndroidRuntime(728):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:36:47.113

你没有给我们太多的工作，但这是不正确的：

 ~~~~```
myWallpaperManager.setResource(R.id.full_image_view); 
```~~ 

~~您需要从以下`res/drawable`文件夹之一传递资源：~~

 ~~```
myWallpaperManager.setResource(R.drawable.my_wallpaper); 
```~~~~

# html - 由于 Wordpress 网站上预先存在的样式，无法对齐表格中的文本，但无法使用 firebug 找到它

> ID：13826032
> 
> 赞同：2
> 
> 时间：2012-12-11T18:11:50.013
> 
> 标签：html, css, wordpress

我想将“功能”列中的文本左对齐。但是由于一些预先存在的风格，我无法做到。

[这是](http://leadrabbit.com/pricing/)我指的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:14:39.900

尝试`style.css`寻找`#ethernatable td.tableid`. 我看到`text-align: center;`该规则正在使用 Google Chrome 的开发者工具应用。

**编辑：**

使用开发人员工具删除规则会使整个列按照您的指定左对齐。您要么需要编辑样式，要么用您自己的另一个样式覆盖样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:15:08.707

它继承自：

`#ethernatable th.tablecol, #ethernatable td.tableid, #ethernatable td.even, #ethernatable td.odd`

您可以通过添加以下内容来覆盖它：

`#ethernatable td h6`

# iphone - CCAnimation 在 iPod 4G 上显示为黑色矩形

> ID：13826033
> 
> 赞同：0
> 
> 时间：2012-12-11T18:11:51.823
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone, kobold2d

我创建了一个这样的动画：

```
//xxx animation cache
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"mainmenu_xxx.plist"];

//xxx blink    
CCAnimation *animXxx1Anim = [CCAnimation animationWithSpriteSequence:@"char_xxx_loops%@@2x.png" frameSequence:@"02,03,04" delay:1/24.0];    
[animXxx1Anim setRestoreOriginalFrame:NO];
[[CCAnimationCache sharedAnimationCache] addAnimation:animXxx1Anim name:@"xxxBlink"]; 
```

然后像这样运行它：

```
//blink animation
[animatedXxxSprite runAction:[CCAnimate actionWithAnimation:[[CCAnimationCache sharedAnimationCache] animationByName:@"xxxBlink"]]]; 
```

它在模拟器、iPhone 3GS、iPhone 4S 上应有显示，但在 iPod 4G 上显示为黑色矩形。知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T13:13:07.867

问题在于纹理大小。建议纹理尺寸小于 1024x1024 像素。

此外，有时，如果纹理不是 POT 格式，则显示的位置误差非常小（1-2 px）。

# facebook-like - 将 Facebook 点赞从一个网站转移到另一个网站

> ID：13826038
> 
> 赞同：-2
> 
> 时间：2012-12-11T18:12:12.717
> 
> 标签：facebook-like, facebook-likebox

我们最近将我们的网站[http://www.mycheapapartments.com/](http://www.mycheapapartments.com/)更名为 ApartmentList.com。是否可以将我们在 MyCheapApartments 网站上的 7800 个“赞”转移到 ApartmentList.com 上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:23:24.003

你应该联系 Facebook 看看他们是否会帮助你，但我对此表示怀疑。您可以让“mykidssite.com”获得小孩子的 3000 个赞，然后将其更改为“myadultsite.com”并将新内容提供给孩子们。诱饵和转换将是关注点，而不是说您正在这样做，这只是关注点。

# javascript - 是否可以在选择时绑定选择选项而不是在更改时

> ID：13826039
> 
> 赞同：4
> 
> 时间：2012-12-11T18:12:14.353
> 
> 标签：javascript, jquery, html

`<select>` 当用户从默认值更改为不必要的项目时，我正在尝试绑定事件。

`$(select).change();`仅在项目更改时才有效。

我想知道是否有一些东西可以通过选择其中一个选项来工作，即使它是相同的默认选项。

```
$('#page_body').on('select', '.pop_pin_select', function() {
}); 
```

这是我到目前为止所尝试的，但它不会工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:57:16.873

有办法解决这个问题；将索引 0 处的选项设置为默认选择、动态且不可手动选择（即*禁用*）并正常监听*onchange*，但更改为索引 0 时除外。然后*onchange*，设置`.options[0]`为所选*标签*和*值*并将选择更改为它。[这是一个例子](http://jsfiddle.net/Rp7xk/1/)。

示例中的相关 JavaScript

```
document.getElementById('sel')
    .addEventListener('change', function () {
        if (this.selectedIndex === 0) return;
        this.options[0].value = this.value;
        this.options[0].textContent = this.options[this.selectedIndex].textContent;
        this.selectedIndex = 0;
    }, false);​ 
```

*当用户做出相同的选择时， onchange*将触发，因为即使值没有变化，索引也会发生变化。

# android - 在 AndEngine 中重置游戏问题

> ID：13826042
> 
> 赞同：0
> 
> 时间：2012-12-11T18:12:34.083
> 
> 标签：android, andengine

我正在做一个破砖游戏。我编写了代码，当我在游戏中按下返回按钮时，游戏会返回主菜单。当我触摸开始按钮时，我想重新创建游戏。但是在 timer_StartCompletely 传递之后我的球没有移动。换句话说，我的 timer_ball 不工作。我的 onBackPressed 中有这段代码：

```
@Override
public void onBackPressed()
{
    if(status == INGAME) {
        scene.detachChildren();
        moveBall = false;
        status = MENU;
        ballX = (kamera.getWidth()/2)-(32/2);
        ballY = (kamera.getHeight()/2)-(32/2);
        ballSpeed = 3.5f;
        cx = (kamera.getWidth()/2)-(cubukTex.getWidth()/2);
        cy = kamera.getHeight()-25;
        this.mEngine.unregisterUpdateHandler(timer_ball);
        this.mEngine.unregisterUpdateHandler(timer_club);
        timer_ball.reset();
        musicBackground.play();
    }
} 
```

我的计时器声明：

```
 timer_StartCompletely = new TimerHandler(0.5f, new ITimerCallback() {
        @Override
        public void onTimePassed(final TimerHandler pTimerHandler) {
            mEngine.unregisterUpdateHandler(pTimerHandler);
            mEngine.registerUpdateHandler(timer_ball);
        }
    }); 
```

在我的 timer_ball 中，我对球的运动进行了编码（如果调用 timer_ball，球肯定会移动）。

我还有一个触摸事件，我控制触摸按钮并注册 timer_StartCompletely。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:10:49.487

实例化您的时`TimerHandler`，您可以传递一个名为`pAutoReset`(您没有传递它，因此传递了 false 的参数：

```
public TimerHandler(final float pTimerSeconds, final ITimerCallback pTimerCallback) {
   this(pTimerSeconds, false /*pAutoReset*/, pTimerCallback);
} 
```

此参数决定是否`TimerHandler`应该在时间过去后自动重置（这意味着如果您传递 true，则重复回调）。

**这里的问题：**你没有通过，`true`也没有调用`reset`. `TimerHandler`因此，如果我们查看以下相关代码`TimeHandler.java`：

```
if(!this.mTimerCallbackTriggered) {
    this.mTimerSecondsElapsed += pSecondsElapsed;
    if(this.mTimerSecondsElapsed >= this.mTimerSeconds) {
        this.mTimerCallbackTriggered = true;
        this.mTimerCallback.onTimePassed(this);
    }
} 
```

你的回调执行一次，现在`mTimerCallbackTriggered`是`true`，所以它不会再执行了。

**解决方案**`reset`：要么在每次注册之前调用该方法`TimerHandler`，要么使用`pAutoReset = true`.

# java - File.renameTo() 失败

> ID：13826045
> 
> 赞同：8
> 
> 时间：2012-12-11T18:12:58.067
> 
> 标签：java, file

我有 eclipse 插件 jface 应用程序。一个线程通过 BufferedWriter 写入文件。写入完成后，我关闭缓冲区，然后尝试重命名文件。

但有时文件没有重命名！

我试图在两次重试之间添加一些 Thread.Sleep(BIG_NUMBER) 这没有帮助。

看起来文件获得了某种锁定。（当我杀死 jvm 时，我可以重命名文件）。

有什么我可以做的吗？

操作系统：Windows XP、Windows 7 JAVA版本：1.5

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-11T18:17:25.783

File.RenameTo() 依赖于平台，并且需要满足一些条件才能成功重命名文件，更好的选择是使用

```
Path source = currentFile.toPath();
try {
     Files.move(source, source.resolveSibling(formattedName));
} catch (IOException e) {
     e.printStackTrace();
} 
```

[在这里](https://stackoverflow.com/questions/13752645/file-renameto-doesnt-have-any-effect/13752951#13752951)阅读更多。

从javadocs：

> 此方法的行为的许多方面本质上是平台相关的：重命名操作可能无法将文件从一个文件系统移动到另一个文件系统，它可能不是原子的，并且如果具有目标抽象路径名的文件可能不会成功已经存在。应始终检查返回值以确保重命名操作成功。

请注意，Files 类定义了 move 方法以独立于平台的方式移动或重命名文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:17:50.720

为了`File.renameTo()`工作，该文件将需要以某种方式可由外部应用程序写入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T18:48:03.213

您还可以执行以下操作：

```
File o=new File("oldFile.txt");
File n=new File("newFile.txt");
n.delete();
o.renameTo(n); 
```

`n.delete()`：如果存在，我们需要删除文件（new.txt）。

`o.rename(n)`：使文件（old.txt）重命名为new.txt

[如何找出 renameTo() 失败的原因？](https://stackoverflow.com/questions/1325388/how-to-find-out-why-renameto-failed)

[Windows 上可靠的 File.renameTo() 替代方案？](https://stackoverflow.com/questions/1000183/reliable-file-renameto-alternative-on-windows)

[http://www.bigsoft.co.uk/blog/index.php/2010/02/02/file-renameto-always-fails-on-windows](http://www.bigsoft.co.uk/blog/index.php/2010/02/02/file-renameto-always-fails-on-windows)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T19:35:40.933

我们在 Windows 7 下遇到了带有 UAC 和意外文件权限的问题。 `File#canWrite`即使执行文件 I/O 的任何尝试都将失败，也会返回 true。

1.  确保您尝试重命名的文件确实存在
2.  确保您尝试将文件写入（或重命名文件）的位置可访问。在我们尝试任何进一步的 I/O 之前，我们将一个简单的文本文件写入该位置，检查它是否存在以及它的内容是否正确（我们是偏执狂）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-09T23:14:25.723

这对我来说很好。重命名使用两个步骤完成，但不要忘记设置权限`manifest.xml`：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE" />

public boolean RenameFile(String from, String to) { 
  to.replace(" ", ""); // clear all spaces within file name
  File oldfile = new File(from);
  File newfile = new File(to);
  File tempfile = new File(to + ".tmp"); // add extension .tmp
  oldfile.renameTo(tempfile);
  return (tempfile.renameTo(newfile));
} 
```

# lambda - 在 ASP.NET MVC4/EF CodeFIrst 中使用 where 子句编写 Lambda 表达式

> ID：13826046
> 
> 赞同：0
> 
> 时间：2012-12-11T18:13:05.970
> 
> 标签：lambda, asp.net-mvc-4, ef-code-first

这是我的硬件课程的一部分：

```
public class Hardware
    {
        public int Id { get; set; }

        public virtual ICollection<HardwareType> HardwareType { get; set; }
         ....
    } 
```

在播种的示例数据中，硬件是这样更新的（部分）：

```
new Hardware { ... HardwareType = htype.Where(h => h.HType == "PC").ToArray() } 
```

`htype`是一个`List<HardwareType>`具有各种字符串值的`HType`，它是`HardwareType`类中的属性。

在我的控制器中，我试图将 Lambda 表达式分配给一个变量，以便我可以在我的视图中循环遍历它。这是我所拥有的：

```
private Context db = new Context();  

public ActionResult Index() {
    Hardware Pcs = db.Hardware.Where(h => h.HardwareType == "PC");
} 
```

但是编译器告诉我我不能这样做，因为`h.HardwareType`它是一个 iCollection。这是有道理的。但是我如何编写这行代码以便我可以传递`Pcs`给我的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:07:56.377

我只在 ICollection 是字符串类型而不是自定义类型的情况下这样做过，但是相同的解决方案可能对您有用。你没有分享你对 HardwareType 的定义，所以我的语法可能不是 100% 正确，但它应该给你这个想法。

```
public ActionResult Index() {

    HardwareType hwt = new HardwareType { HType = "PC" };

    Hardware Pcs = db.Hardware.Where(h => h.HardwareType.Contains(hwt));
} 
```

这应该为您提供所有与您定义相关的 HardwareTypes 的 Hardware 对象。同样，我只用简单的字符串完成了这个，但我认为它也会以这种方式工作。

这是一个可能有用的类似问题： [How to do an "in" query in entity framework?](https://stackoverflow.com/questions/1137921/how-to-do-an-in-query-in-entity-framework)

# c# - 无法从 WorkflowApplication 中获取 Out 参数

> ID：13826048
> 
> 赞同：0
> 
> 时间：2012-12-11T18:13:17.967
> 
> 标签：c#, workflow-foundation-4

我有一个带有 In/Out 参数的工作流，但我没有在 WorkflowApplicationCompletedEventArgs.Outputs 中取回它。

我有 2 个论点：

```
 DataParams which is In/Out
  ClassParams which is In 
```

我这样称呼工作流程：

```
 IDictionary<string, object> inParams = new Dictionary<string, object>
  {
    {"DataParams", _dataParameters },
    {"ClassParams", _classParameters },
  };

  workflowApp = new WorkflowApplication(new actSendToClient(), inParams);
  workflowApp.Completed = e => SendToClientWorkflowCompleted(e);
  workflowApp.Run(); 
```

一段时间后，如果用户在主机中取消此方法，则会调用：

```
workflowApp.Cancel(); 
```

哪些路由到委托方法：

```
public void SendToClientWorkflowCompleted(WorkflowApplicationCompletedEventArgs e)
{
    var output = e.Outputs;
} 
```

我在 e.Outputs 中一无所获。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T03:03:35.243

请注意，如果您希望输出参数在取消路径中有效，则可以将根活动包装在 CancellationScope 中，该作用域在 CancellationHandler 中设置 OutArguments。

还要注意，OutArgument 的值反映了该参数在工作流中的状态。也就是说，如果您在活动的中途填充 OutArgument，这些值将反映在 OutArgument 中。这与分配给然后该方法随后引发异常的 C# out 参数一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:26:02.043

如果工作流运行良好，您只会获得输出参数。当您取消工作流程时，您是在告诉它不要这样做。如果您需要一种方法在流程中途停止工作流并且它仍然被认为是正常的工作结束，您将需要以某种方式在您的工作流中对此进行建模。通过显式添加逻辑来规避部分活动，或者通过抛出异常并将额外数据添加到抛出的异常中。在后一种情况下，运行时可以检查异常并查看从那里获取数据。

通常，如果这确实是业务流程的一部分，我更喜欢第一种方法。

# web-services - Spring.NET WebServiceProxyFactory - 在运行时交换 ServiceUri 属性？

> ID：13826051
> 
> 赞同：0
> 
> 时间：2012-12-11T18:13:31.077
> 
> 标签：web-services, spring.net

我有一个将 Spring.NET 用于 IOC 的应用程序，以及它提供的许多其他功能。我现在要解决的问题是如何设置类似于 WebServiceProxyFactory 的东西来自动代理我想在应用程序中使用的 Web 服务。此配置非常适用于单个服务端点。

```
 <object id="MyServiceClient" type="Spring.Web.Services.WebServiceProxyFactory, Spring.Services">
<property name="ServiceUri" value="https://my.service1.net/service.asmx"/>
<property name="ServiceInterface" value="Sample.IServiceClient1"/>
<property name="WebServiceProxyBaseType" value="Sample.SecureWebServiceProxy, Sample"/>
<property name="MemberAttributes">
  <dictionary>
    <entry key="*">
      <list>
        <object type="System.Web.Services.Protocols.SoapHeaderAttribute, System.Web.Services">
          <constructor-arg value="ServiceAuthenticationHeader" />
          <property name="Direction" value="In" />
        </object>
        <object type="System.Web.Services.Protocols.SoapHeaderAttribute, System.Web.Services">
          <constructor-arg value="ServiceErrorStatus" />
          <property name="Direction" value="Out" />
        </object>
      </list>
    </entry>
  </dictionary>
</property>
<property name="ProductTemplate">
  <object>
    <property name="ServiceAuthenticationHeader" ref="ServiceAuthenticationHeader" />
    <property name="ServiceErrorStatus" ref="ServiceErrorStatus" />
  </object>
</property> 
```

但是，现在我需要根据应用程序中的配置设置来处理可能无限数量的端点。配置将告诉我有关服务端点的数量和详细信息，这些端点可以托管在各种 URL 上，但实现相同的接口。

我想不通的是如何配置 Spring.NET 以允许我交换**ServiceUri**以便它可以针对工厂生成的每个对象进行更改。我会调用 Factory 的 GetObject 方法，但想以某种方式指定它应该在生成代理对象之前使用哪个**ServiceUri 。**

现在我认为只实现一个自定义的 IFactoryObject 来完成幕后的艰苦工作是最好的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:57:42.070

代理返回一个继承自 SoapHttpClientProtocol 的实例。所以在运行时，你可以使用 SoapHttpClientProtocol.Url 属性来设置 URL。

自定义 IFactoryObject 可以工作，但前提是您在 ProductTemplate 属性中指定它：

```
<property name="ProductTemplate">
  <object>
    <property name="ServiceAuthenticationHeader" ref="ServiceAuthenticationHeader" />
    <property name="ServiceErrorStatus" ref="ServiceErrorStatus" />
    <property name="Url" ref="myFactoryObjectThatReturnsUrl" />
  </object>
</property> 
```

# neo4j - neo4j 服务根不显示关系 URI

> ID：13826053
> 
> 赞同：0
> 
> 时间：2012-12-11T18:13:46.180
> 
> 标签：neo4j

我正在尝试使用其 ID 从 Neo4j 使用 py2neo 获取关系。我遇到了以下链接中描述的问题

[https://github.com/nigelsmall/py2neo/issues/80](https://github.com/nigelsmall/py2neo/issues/80)

基本上，neo4j API 服务根没有列出关系 URI。

那么，通过 REST API 通过 ID 取回关系的首选方式是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T08:06:04.573

此问题已修复并于昨天在 py2neo 1.4.5 中发布。希望这可以帮助！

尼日

# c# - 列表中当前项目之后的项目

> ID：13826054
> 
> 赞同：-4
> 
> 时间：2012-12-11T18:13:56.487
> 
> 标签：c#, linked-list

我目前正在处理项目的链接列表。我知道，`LinkedList<T>()`但出于学习目的，我自己实现了这一点。我创建了一个`Add`将项目附加到列表末尾的函数。现在我正在努力使用我的`Insert`函数，该函数应该在当前指向的项目之后附加一个项目。相反，它在调用时显示错误`Insert();` `Cannot evaluate expression because the current thread is in a stack overflow state`。任何想法如何在当前指向的项目之后插入项目？（我在名为 的标签中显示当前指向的项目`labelSpecificTree`）

**代码**

```
namespace test
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }    
            public FruitTrees Insert(int Position)
            {                    
                FruitTrees current = First;

                for (int i = 0; i < Position && current != null; i++)
                {
                    current = current.Next;
                }
                return current;    
            }                

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:20:56.107

我不确定我明白你在问什么。

但是，如果您需要在给定列表项之后插入一个项目：

```
public Insert(Item newItem, Item refItem) {
  newItem.Next = refItem.Next;
  refItem.Next = newItem;
} 
```

# caroufredsel - 使用 carouFredSel，fx: 'scroll'，使用“divs”的奇怪行为

> ID：13826055
> 
> 赞同：1
> 
> 时间：2012-12-11T18:13:56.487
> 
> 标签：caroufredsel

我正在用 carouFredSel 做一个滑块，但是我对 fx 有一个奇怪的行为：当项目被封装在“div”中时，“滚动”，图像的滚动效果很差。但是如果我只使用“< img >”它会很好。你知道为什么吗？我需要将 div 用于我的幻灯片文本。看看这里[http://kuralmedia.com/_outside/test-Slider/index.html](http://kuralmedia.com/_outside/test-Slider/index.html) 谢谢，

R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:50:12.313

你`float:left`在`.slide`课堂上少了一个。就这些。在这里你可以看到解决方案的工作：[解决方案演示](http://jsfiddle.net/ignaciocorreia/3tAjr/1/)

# asp.net - 需要 ASP.NET 向导控件标头模板帮助

> ID：13826063
> 
> 赞同：2
> 
> 时间：2012-12-11T18:14:31.623
> 
> 标签：asp.net, wizard

我找到了下面给出的链接：

[**点击这里**](http://techbrij.com/798/stylish-asp-net-wizard-control-horizontal-sidebar-on-top)

我必须在 asp.net 应用程序中实现此标头模板，但问题是它在 IE8 中无法正常工作。

有没有办法让它在 IE8 中工作。

**IE8 以外的**

![在此处输入图像描述](../Images/5ef63c6ee0490ef80c8ee62a11d64e5d.png)

**在 IE8 中**

![在此处输入图像描述](../Images/49791ee16ef376ad40d04c7b8d182a9e.png) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:03:30.370

CSS 转换不适用于 IE6、IE7 或 IE8。（歪斜）

您可以使用透明 png 作为背景图像，但这仅适用于 IE8。您必须在 IE<8 中使用 pngfix 来处理透明 png。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T12:26:45.767

在这里查看： [http ://www.emirplicanic.com/css/css-step-by-step-menu-wizard-style](http://www.emirplicanic.com/css/css-step-by-step-menu-wizard-style)

它在 IE 9 和 IE8 上运行良好，在 IE7 上看起来更好。

# iphone - iPhone 在使用 MPMusicPlayerController 播放 iPod 库中的音乐时从麦克风录制音频

> ID：13826065
> 
> 赞同：1
> 
> 时间：2012-12-11T18:14:38.893
> 
> 标签：iphone, audio-recording, mpmusicplayercontroller, audio-player

是否可以使用 MPMusicPlayerController 从 iPod 库中播放音乐，在 iPhone 上录制语音形式的麦克风？如果可能的话，任何示例或代码？

# javascript - javascript内置函数中的循环检测

> ID：13826068
> 
> 赞同：12
> 
> 时间：2012-12-11T18:14:53.920
> 
> 标签：javascript

我从 Chrome 开发人员工具的控制台中获得了以下跟踪：

```
> a = [1]
[1]
> b = [2, a]
[2, Array[1]]
> a.push(b)
2
> a.toString()
"1,2," 
```

似乎`toString()`智能地跳过了对象图的递归部分。这是在某处记录的标准行为吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T18:23:48.340

> `[ECMA-262: 15.4.4.2]:` `Array.prototype.toString ( )`
> 
> 调用该`toString`方法时，将执行以下步骤：
> 
> 1.  让`array`成为调用值的`ToObject`结果`this`。
> 2.  让`func`是调用with argument的`[[Get]]`内部方法的结果。`array``"join"`
> 3.  如果`IsCallable(func)`是`false`，那么让`func`是标准的内置方法`Object.prototype.toString`（15.2.4.2）。
> 4.  返回调用提供作为值和空参数列表的`[[Call]]`内部方法的结果。`func``array``this`
> 
> **注意**该`toString`函数是故意通用的；它不要求它的`this`值是一个`Array`对象。因此，它可以转移到其他类型的对象中用作方法。函数能否`toString`成功应用于宿主对象取决于实现。

所有这些基本上意味着结果是对 的调用`Array.prototype.join()`，它在中定义`15.4.4.5`并且不要求任何递归检测：

> `[ECMA-262: 15.4.4.5]:` `Array.prototype.join (separator)`
> 
> 数组的元素被转换为`String`s，然后将这些`String`s 连接起来，由分隔符的出现来分隔。如果未提供分隔符，则使用单个逗号作为分隔符。
> 
> join 方法接受一个参数 ,`separator`并执行以下步骤：
> 
> 1.  让`O`是调用`ToObject`将`this`值作为参数传递的结果。
> 2.  让`lenVal`是调用with argument的`[[Get]]`内部方法的结果。`O``"length"`
> 3.  让`len`_`ToUint32(lenVal).`
> 4.  如果`separator`是`undefined`，则`separator`设为单字符`String` `","`。
> 5.  让。`sep`_`ToString(separator)`
> 6.  如果`len`是`zero`，则返回空`String`。
> 7.  让`element0`是调用with argument的`[[Get]]`内部方法的结果。`O``"0"`
> 8.  如果`element0`是`undefined`或`null`，则为`R`空`String`；否则，`R`让`ToString(element0)`.
> 9.  设为`k`1。
> 10.  重复，而`k`<`len`
>     1.  让`S`是`String`连接`R`和产生的值`sep`。
>     2.  让`element`是调用with argument的`[[Get]]`内部方法的结果。`O``ToString(k)`
>     3.  如果`element`是`undefined`或`null`，则`next`设为空`String`；否则，`next`让`ToString(element)`.
>     4.  让`R`是`String`通过连接`S`和产生的值`next`。
>     5.  增加`k`1。
> 11.  返回`R`。
> 
> 该方法的`length`属性`join`为 1。
> 
> **注意**该`join`函数是故意通用的；它不要求它的`this`值是一个`Array`对象。因此，它可以转移到其他种类的对象中作为方法使用。函数能否`join`成功应用于宿主对象取决于实现。

那么，这是一种标准保证的行为吗？**不。**

# vb.net - TreeView 的根节点被复制

> ID：13826069
> 
> 赞同：4
> 
> 时间：2012-12-11T18:14:55.070
> 
> 标签：vb.net, treeview, treenode

我有以下问题。我正在通过一个 TreeView 来填充一个 XML 树，其中包含在我的 TreeView 中检查的项目。基本上一切正常，除了每次我完成填充 XML 树时，我都会在 TreeView 中获得我的 TreeView-rootnode 的副本。

奇怪的是，新节点的行为就像第一个节点的幽灵。我无法选中/取消选中复选框，但原始节点中的相应框已选中/取消选中。但我能够扩展或折叠幽灵的节点。

我的 TreeView.Nodes 的计数也保持在 1，因此无法删除重影，因为它不存在。我也尝试刷新 TreeView，但没有任何变化。即使清除 TreeView 也不能消除重影（清除也不是首选选项 ;)）。

这是相关的代码：

```
Private Sub btnSaveReport_Click(sender As System.Object, e As System.EventArgs) Handles btnSaveReport.Click
    Dim newXML As XDocument = XDocument.Load("some.xml")
    Dim xmlTree As XElement = newXML.Root
    buildReportTree(trvMyTree.Nodes(0), xmlTree)
    Console.WriteLine(xmlTree)
End Sub

Private Sub buildReportTree(ByRef treeNode As TreeNode, ByRef currentElement As XElement)
    If treeNode.Checked Then
        Dim newNode As XElement
        newNode = buildReportNode(treeNode)
        currentElement.Add(newNode)
        For Each childNode As TreeNode In treeNode.Nodes
            buildReportTree(childNode, newNode)
        Next
    End If
End Sub

Private Function buildReportNode(treeNode As TreeNode) As XElement
    If treeNode.ToolTipText = "property" Then
        Dim newNode As XElement = New XElement(treeNode.ToolTipText, treeNode.Name)
        Return newNode
    End If
    If treeNode.ToolTipText = "collection" Or treeNode.ToolTipText = "reference" Then
        Dim newNode As XElement = New XElement(treeNode.ToolTipText, _
                                  New XAttribute("name", treeNode.Name))
        Return newNode
    End If
    Return Nothing ' ToDo: handle errors
End Function 
```

一旦 buildReportTree 的第一次调用完成，幽灵就会出现。任何想法可能是什么问题？也许我只是还没有找到正确的搜索词，但到目前为止我还没有找到任何答案。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T18:25:48.180

[来自 OP](https://stackoverflow.com/questions/13826069/root-node-of-treeview-gets-copied#comment19046620_13826069)：

> 大家好，我找到了答案（正确的搜索词是“幻影”）：必须将根节点分配给一个变量，然后它才能工作。作为原始海报，我不知道为什么。这是我找到的原始论坛帖子：[幻象节点](http://www.vbforums.com/showthread.php?654970-RESOLVED-Phantom-nodes-in-a-treeview)

# sql-server - Code First Migrations with Entity Framework - 迁移到测试服务器，如何？

> ID：13826075
> 
> 赞同：1
> 
> 时间：2012-12-11T18:15:14.467
> 
> 标签：sql-server, entity-framework-4, asp.net-mvc-4

我正在开发一个 MVC4 应用程序，并且是数据库迁移概念及其实现方式的完全新手。到目前为止，我们一直在使用 VS2012 的内置 localdb 功能，一切都很好。我的问题是，如何将这些移动到测试环境中的单独 SQL 服务器？我一直无法找到一个好的解释，并希望你们能提示我正确的方法来做到这一点。

我知道可以在本地生成 SQL 脚本并在服务器上手动运行它们，但理想情况下，我真的希望能够在测试服务器上简单地运行迁移（通过 powershell 或 cmd）并让它应用所有需要的更改SQL Server 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:58:23.790

您可以使用 migrate.exe 工具执行此操作，该工具是在将 EF5 nuget 包拉入解决方案时安装的命令行工具。

[这里](http://msdn.microsoft.com/en-us/data/jj618307.aspx)和[这里](http://blog.overridethis.com/blog/post/2012/03/13/Automating-EF-43x-Data-Migrations-in-your-Build.aspx)有一个很好的概述，以及网络上的大量其他资源。

# java - 在 sdcard 中创建一个文件

> ID：13826076
> 
> 赞同：-3
> 
> 时间：2012-12-11T18:15:15.930
> 
> 标签：java, android, file

我正在尝试从一个不实现 Activity 的类创建一个新文件。如果我在实现活动的类上使用相同的代码，则会创建文件，但如果该类没有实现活动，则不会。怎么了？我需要上下文吗？我能怎么做？

```
public class fileInfo {
File filename;
int indexfile;

public filesInfo(){
    indexfile = 0;

    String filepath = Environment.getExternalStorageDirectory().getAbsolutePath().toString() + "/MotionSensors/values.txt";
    filename = new File(filepath);

} 
```

} .. }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:21:03.817

您在上面所做的看起来还不错，但如果仍然不起作用，请尝试以下操作：

```
FileOutputStream fos = context.openFileOutput("filename", Context.MODE_PRIVATE); 
```

这将从非活动类创建一个文件。

# ruby-on-rails - Rails rescue_from 重新引发异常

> ID：13826081
> 
> 赞同：2
> 
> 时间：2012-12-11T18:15:57.157
> 
> 标签：ruby-on-rails

我继承了一个项目，以前的开发人员将它添加到应用程序控制器中：

```
rescue_from Exception, :with => :render_500 
```

我想它是为了捕捉这个并呈现一个动态页面。静态页面是不可接受的，但我现在不确定为什么会这样。无论如何，这会破坏我使用 Exceptional 捕获异常的能力。在呈现动态错误页面后，有什么方法可以重新引发异常？

我试过这个：

```
def rescue_from(exception)
  respond_to |format|
    format.html { #render the page# }
  end
  raise exception
end 
```

然而，这很明显是行不通的。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T18:42:09.957

你可以手动发布到例外——而不是尝试重新加注并获得例外来捕获和发布。

```
def rescue_from(exception)
  ::Exceptional::Catcher.handle(exception)
  respond_to |format|
    format.html { #render the page# }
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:24:12.160

你能在开始或救援中引发异常并在确保中执行respond_to吗？

我在下面提供 b)，因为我不确定 a) 是否有效。显然，您可以在 b) 示例中引发任何异常以进入救援块，然后引发传入的异常。

任何一个：

一个）

```
begin
 raise exception
ensure
  respond_to |format|
    format.html { #render the page }
  end
end 
```

或者

b)

```
begin
  raise exception
rescue Exception => e
  raise e
ensure
  respond_to |format|
    format.html { #render the page }
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T18:25:59.900

像这样的东西应该工作 -

```
rescue_from Exception, :with => :render_500

def rescue_500(exception)
    raise exception
end 
```

查看[文档](http://api.rubyonrails.org/classes/ActiveSupport/Rescuable/ClassMethods.html)，如果这不起作用，那应该可以帮助您找到可行的解决方案。

# bitmap - 如何将另一个 android 应用程序的当前状态作为位图获取？

> ID：13826086
> 
> 赞同：1
> 
> 时间：2012-12-11T18:16:39.517
> 
> 标签：bitmap, application-state

在 android 上是否有可能获取一个表示在后台运行的另一个应用程序的当前状态的 Bitmap 对象（常规大小，而不是缩略图），或者一个表示我们知道的后台活动的当前状态的 Bitmap 对象组件名称？

# css - 背景图像大小，Android

> ID：13826088
> 
> 赞同：3
> 
> 时间：2012-12-11T18:16:44.670
> 
> 标签：css, image

我们已经有 2 个项目存在问题：

在智能手机显示屏的左上角，一个很大的背景图像（填满桌面 PC 的大屏幕）显示得非常小。

这是使用的代码之一：

```
background: #7F7F7F url("../images/hg4.jpg") repeat left top scroll; 
```

也许所有设备都有一个简单的解决方案，或者需要一个检测和 2 个版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:02:17.503

我没有测试，但你可以试试 `background-size: cover;` `background-position: center center;` `background-attachement: fixed;`

# c# - 有没有办法判断映射驱动器是使用 C# 映射为管理员用户还是标准用户？

> ID：13826097
> 
> 赞同：6
> 
> 时间：2012-12-11T18:17:31.120
> 
> 标签：c#, windows, permissions, mapped-drive

据我了解，映射驱动器在由管理员创建时对标准用户不可用，反之亦然。有没有办法以编程方式告诉驱动器是如何映射的？由管理员还是由​​标准用户？我知道注册表项 EnableLinkedConnection，它允许所有人都可以使用映射的驱动器，但我不希望这样做是必要的。

编辑：这是我遇到的一个场景。驱动器被映射为管理员。但是以标准权限运行的程序无法看到该驱动器。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T03:43:34.860

我假设您的代码在 Windows7 或更新的机器上运行。

正如 Sorceri 在他的评论中暗示的那样，您的应用程序可能在标准权限下运行，并且您使用提升的权限来映射驱动器。

如果是这种情况，您有 2 个解决方案：

1.  将程序设置为以更高的权限运行

2.  检查您正在映射的共享上的共享和文件安全性。

希望这会有所帮助。

# oracle - oracle 解析器如何处理序列

> ID：13826105
> 
> 赞同：2
> 
> 时间：2012-12-11T18:17:59.117
> 
> 标签：oracle, sequence

为什么 oracle 总是解析下面的查询？

```
select MY_SEQUENCE_SEQ.nextval
from dual 
```

来自 Quest SQL Optimizer (8.6.0) 的 SGA 统计数据：

> 执行：83630
> 
> Parse_calls：83630

序列详情：

*   最后缓存值：1
*   增量：1
*   缓存大小：20
*   周期：没有
*   订单号

测试场景：

1.  创建音序器：

    ```
    CREATE SEQUENCE MY_SEQUENCE_SEQ
      START WITH 1
      MAXVALUE 999999999999999999999999999
      MINVALUE 1
      NOCYCLE
      CACHE 20
      NOORDER; 
    ```

2.  对有权访问 v$sql 视图的用户执行此查询。

    ```
    select executions, 
           parse_calls 
      from v$sql 
     where sql_text like 'select MY_SEQ%';` 
    ```

3.  以序列 n 次执行查询

4.  从第 2 点执行查询。

结果得到：

```
EXECUTIONS  - n
PARSE_CALSS - n 
```

测试：

数据库：Oracle 数据库 10g 版本 10.2.0.4.0 - 64 位生产

客户端：Toad 版本 11.5.1.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T22:01:02.507

这不是 Oracle 的错误，它只是 TOAD 向 oracle 发送 SQL 的方式。即toad 不会将语句句柄缓存到oracle，它只是在完成时关闭它。

当查询发送到 SQL 引擎时，Oracle 将对查询执行三项主要操作之一。

1.  硬解析它
2.  软解析它
3.  不解析它

即我们想要在案例 3 中，我们当然不想在案例 1 中！那么每个案例什么时候会发生呢？

当 SQL 根本不在共享池中或 SQL 在共享池中但正在使用的绑定变量/文字意味着当前 SQL 不可用时，将发生硬解析。例如，假设我们发布了此 SQL 三次`select MY_SEQUENCE_SEQ.nextval from dual`。这将在 Oracle 第一次看到此 SQL 并将其放入共享池时进行硬解析，并在第 2 次和第 3 次调用时进行软解析。我们可以很容易地看到这种情况发生：

```
SQL> select n.name, s.value from v$mystat s, v$statname n where n.statistic# = s.statistic# and n.name in ('parse count (hard)', 'parse count (total)');

NAME                      VALUE
-------------------- ----------
parse count (total)         522
parse count (hard)          287

SQL> select /* test1 */ MY_SEQUENCE_SEQ.nextval
  2  from dual;

   NEXTVAL
----------
        62

SQL> select /* test1 */ MY_SEQUENCE_SEQ.nextval
  2  from dual;

   NEXTVAL
----------
        63

SQL> select /* test1 */ MY_SEQUENCE_SEQ.nextval
  2  from dual;

   NEXTVAL
----------
        64

SQL> select n.name, s.value from v$mystat s, v$statname n where n.statistic# = s.statistic# and n.name in ('parse count (hard)', 'parse count (total)');

NAME                      VALUE
-------------------- ----------
parse count (total)         526
parse count (hard)          288

SQL> select sql_text, executions, parse_calls from v$sql where sql_text like 'select /* test1 */%';

SQL_TEXT                       EXECUTIONS PARSE_CALLS
------------------------------ ---------- -----------
select /* test1 */ MY_SEQUENCE          3           3
_SEQ.nextval from dual 
```

硬解析增加了 1 个并且 sql 已注册 3 个解析，因此 1 个硬解析（将其放入共享池）和 2 个软解析。

为什么要软解析？为了“不解析”发生​​，客户端代码必须保持语句句柄并重新执行它。即，如果我们用 Java 编写这个，我们会这样写：

```
 public static int getNextSeq(String str)
  throws Exception 
    {
        if (sel == null)
      {
        sel = con.prepareStatement("select MY_SEQUENCE_SEQ.nextval v from dual "+str);
      }
    ResultSet rs = sel.executeQuery();
    int seqVal=0;
    while (rs.next()) 
    {
      seqVal = rs.getInt("V");
    }
    return seqVal;
    } 
```

即，如果我们还没有这样做，我们只会调用 PrepareStatement。如果我们执行这段代码

```
System.out.println(getNextSeq(args[0]));
System.out.println(getNextSeq(args[0]));
System.out.println(getNextSeq(args[0])); 
```

我们可以看到这一点：

```
SQL> host java Prep two
70
71
72

SQL> select sql_text, executions, parse_calls from v$sql where sql_text like 'select %two';

SQL_TEXT                       EXECUTIONS PARSE_CALLS
------------------------------ ---------- -----------
select MY_SEQUENCE_SEQ.nextval          3           1
 v from dual two 
```

现在 oracle 除了第 1 次硬解析外，还没有解析 SQL。如果 Java 代码写得不好，我们会看到：

```
sel = con.prepareStatement("select MY_SEQUENCE_SEQ.nextval v from dual "+str);
ResultSet rs = sel.executeQuery();

SQL> host java Prep three
73
74
75

SQL> select sql_text, executions, parse_calls from v$sql where sql_text like 'select %three';

SQL_TEXT                       EXECUTIONS PARSE_CALLS
------------------------------ ---------- -----------
select MY_SEQUENCE_SEQ.nextval          3           3
 v from dual three 
```

现在我们看到解析计数 = 执行次数。换句话说，我们正在软解析每个不理想的调用。再次不是 Oracle 限制，只是糟糕的客户端实现。

使用 PL/SQL，我们不必担心这一点。为什么？PL/SQL 也不解析，因为它为运行 SQL 优化了很多（不出所料！）。例如：

```
SQL> declare
  2    v_seq number;
  3  begin
  4    for idx in 1..3 loop
  5      select MY_SEQUENCE_SEQ.nextval into v_seq from dual pls_test;
  6    end loop;
  7  end;
  8  /

PL/SQL procedure successfully completed.

SQL> select sql_text, executions, parse_calls from v$sql where sql_text like 'SELECT %PLS_TEST';

SQL_TEXT                       EXECUTIONS PARSE_CALLS
------------------------------ ---------- -----------
SELECT MY_SEQUENCE_SEQ.NEXTVAL          3           1
 FROM DUAL PLS_TEST 
```

现在，pl/sql 为我们做这个优化有一个警告，那就是参数 SESSION_CACHED_CURSORS。在给定的会话中，Oracle 将为我们打开一组游标（即它们是软打开的，也就是说，如果我们需要更多游标，它将关闭它们）。所以如果我们有 SESSION_CACHED_CURSORS=0 并重复上面的测试，我们会看到软解析突然出现：

```
SQL> alter session set session_cached_cursors=0;

Session altered.

SQL> declare
  2    v_seq number;
  3  begin
  4    for idx in 1..3 loop
  5      select MY_SEQUENCE_SEQ.nextval into v_seq from dual pls_test2;
  6    end loop;
  7  end;
  8  /

PL/SQL procedure successfully completed.

SQL> select sql_text, executions, parse_calls from v$sql where sql_text like 'SELECT %PLS_TEST2';

SQL_TEXT                       EXECUTIONS PARSE_CALLS
------------------------------ ---------- -----------
SELECT MY_SEQUENCE_SEQ.NEXTVAL          3           3
 FROM DUAL PLS_TEST2 
```

显然，缓存游标的值越高，我们就越需要避免软解析并达到避免解析的圣杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:23:26.003

这取决于您如何处理客户端的语句。如果您保留相同的变量/处理程序，则不应在每次调用时进行解析。

* * *

如果您在每次调用时创建并释放语句，您可以期望在共享池（软解析）或重新编译（硬解析）中搜索和找到 sql。

* * *

此外，您的下划线平台可以缓存在它的级别 - 以避免软解析。还有服务器参数文件来调整缓存会话游标的大小。

# python - 使用 PyGtk 在屏幕上创建可点击区域

> ID：13826108
> 
> 赞同：0
> 
> 时间：2012-12-11T18:18:33.750
> 
> 标签：python, user-interface, gtk, pygtk, custom-component

嘿伙计们，我遇到了一个我不知道如何解决的问题。我刚刚遇到了一个使用 PyGtk 在 python 中设计 GUI 的团队。

我需要制作一个在屏幕上具有可点击区域的 GUI。我需要将屏幕分成 12 个相等的区域，中间有一个正方形。像这样：http: [//imgur.com/PMT3m](http://imgur.com/PMT3m)

我考虑过使用按钮，但按钮是矩形的。是否可以制作与图片中显示的形状不同的按钮？如果我可以改变窗口的大小，这些按钮会调整大小吗？

我想到的另一个选项是创建一个动作侦听器来侦听鼠标单击，收集有关单击的位置数据，然后根据它所在的区域调用特定方法。在这种方法中，我需要使用静态图像作为背景，这是不可取的。如果可能的话，我想让它具有抵抗力。

有没有人做过这样的事情？如果是这样，您使用了什么方法？我不需要一些人为我编写代码我只需要帮助开始。哪种方法看起来更理智？我没有很多使用其他 python GUI 工具的经验，所以我愿意接受其他建议，例如 pyQt 或 wxPython。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:40:51.500

如果您只需要获得点击的反馈，那么使用 a`GtkDrawingArea`并在那里聆听鼠标点击就足够了。您不需要为此使用静态图像，您可以使用[cairo](http://cairographics.org/)并根据绘图区域的大小自己绘制形状，以便它始终具有您想要的形状。

但是，如果您计划在那里使用大量鼠标交互（拖放形状等），那么使用像[GooCanvas](http://live.gnome.org/GooCanvas)这样的画布将是首选方式。

另请注意，pyGTK 仅适用于 GTK 2，可在 Linux 和 Windows 下使用，但它已被用于 GTK 3 的 pyGObject 淘汰（在 Linux 上，因为目前没有适用于 Windows 的官方多合一安装程序）。

要绘制`GtkDrawingArea`，您将使用`expose-event`GTK 2 上的`draw`信号和 GTK 3 上的信号。

# ruby - Ruby 环境不工作 rbenv

> ID：13826110
> 
> 赞同：2
> 
> 时间：2012-12-11T18:18:37.297
> 
> 标签：ruby, ruby-on-rails-3, rbenv

我决定试一试 rbenv 而不是 rvm。我已经用 Homebrew 安装了它，这很简单。然后我将额外的行添加到我的 .bash_profile 中（垫片、自动完成和 eval 语句）。

```
export PATH="/usr/local/bin:/usr/local/mysql/bin:~/.rbenv/shims:~/.rbenv/completions/rbenv.bash:$PATH"

if which rbenv > /dev/null; then eval "$(rbenv init -)"; fi 
```

然后在重新启动终端后，我尝试运行它，即

```
lee$ rbenv version
system (set by /Users/lee/.rbenv/version)
lee$ rbenv versions
lee$ 
```

如您所见，我没有得到任何版本，也没有当前版本。

有什么我错过的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:43:11.987

不，你没有错过任何东西。您现在需要将一些 Ruby 放入`~/.rbenv/versions`rbenv 中才能看到它们。

你也可以得到一个[插件](https://github.com/sstephenson/ruby-build)，它会下载和编译 Rubies，然后把它们放在那里。

# android - android：在应用程序终止时关闭警报任务

> ID：13826111
> 
> 赞同：0
> 
> 时间：2012-12-11T18:18:44.327
> 
> 标签：android, broadcastreceiver

在我的应用程序上，我想每隔几分钟执行一次任务，为此我添加了一个警报管理器以在经过的时间上运行。代码很简单：

```
 AlarmManager mgr = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
    Intent i = new Intent(this, OnAlarmReceiver.class);
    PendingIntent pi = PendingIntent.getBroadcast(this, 0, i, 0);

    mgr.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
            SystemClock.elapsedRealtime() + 1000 /* Initial run in 1 second */,
            OnBootReceiver.REPEAT_PERIOD, /* 10 minutes */
            pi); 
```

当然我有广播接收器：

```
public class OnBootReceiver extends BroadcastReceiver {
     //implementation here
} 
```

我在我的应用程序的主要活动和广播（OnBootReceiver）中运行此代码，以确保我的代码在应用程序启动和每次启动时运行。

我的问题是操作系统何时关闭 bg 应用程序。如果我转到任务管理器并运行清除内存命令，我的应用程序将关闭并且我没有收到任何警报通知。

**在这种情况下，我如何继续在我的代码上接收警报通知？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:23:38.777

> 如果我转到任务管理器并运行清除内存命令，我的应用程序将关闭并且我没有收到任何警报通知。

由于标准 Android 中不存在“清除内存命令”，因此该功能的精确实现只有您的设备制造商才能知道。

> 在这种情况下，我如何继续在我的代码上接收警报通知？

可能你没有。最有可能的是，设备制造商正在做一些强制停止在“设置”中所做的事情，包括取消安排你的闹钟。您可以通过在“运行清除内存命令”之前和之后运行来确认这个理论，`adb shell dumpsys alarm`以查看警报发生了什么变化。

请注意，即使在缺少“清除内存命令”的设备上，用户也可以从“设置”中强制阻止您，并删除您的警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:25:56.053

尝试这个：

对于您的活动，在清单 xml 中，输入：

```
android:persistent="true" 
```

编辑：

请参阅此链接：[https](https://groups.google.com/forum/#!topic/android-platform/nU0e3aoBlSY) ://groups.google.com/forum/#!topic/android-platform/nU0e3aoBlSY和 [http://developer.android.com/reference/android/app/Service.html#startForeground%28int ,%20android.app.Notification%29](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29)

# objective-c - 您什么时候想在辅助线程上运行 NSURLConnection？

> ID：13826116
> 
> 赞同：2
> 
> 时间：2012-12-11T18:19:20.113
> 
> 标签：objective-c, ios, nsurlconnection

我们正在编写一个大量使用 NSURLConnection 的 SDK。为了管理所有这些连接（例如，批量取消它们），最好它们都运行在单个线程（最好是主线程）上。由于 NSURLConnection 的异步特性，这并不是一个糟糕的想法——在我们的独立应用程序中，我们所有的连接都运行在主线程上，而连接后的繁重工作则在辅助线程（实际上是使用 GCD 或操作队列）上执行取得了结果，没有任何停顿。

所以问题是——在哪些情况下，用户希望在多个线程上运行连接，并且在不是主线程的线程上运行？

编辑：我想我没有正确解释自己。我们以**异步**而不是同步的方式使用 NSURLConnection。这允许我们在主线程上运行所有连接而不会阻塞 UI。问题是：我们的 SDK 用户何时希望在不同线程上异步运行这些连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:23:21.197

当您有一个加载大量数据的请求并且您确定它会很慢并且您有一个需要经常呈现的 GUI 时。
这种情况下，如果 GUI（如在 Cocoa 中，GUI 在主线程中更新）在主线程中更新，请求太慢可能会导致所有视图停止显示，因为它们没有更新。

Apple 文档也这样说 sendSynchronousRequest:returningResponse:error ：

*重要提示：由于此调用可能需要几分钟才能失败（尤其是在 iOS 中使用蜂窝网络时），因此您永远不应从 GUI 应用程序的主线程调用此函数。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:25:56.377

我可以想象在另一个线程上运行异步 NSURLConnection 的唯一充分理由是，如果您的委托方法本身非常耗时。即便如此，我可能仍会在主线程上运行它，并将处理移至后台队列。

编辑：请注意，今天“将处理移至后台线程”非常容易。在 GCD 之前，这有点困难，因此在辅助线程上运行 NSURLConnection 本身在这种情况下可能更有用。当您将 NSURLConnection 嵌入到不在主线程上处理 runloop 的 C++ 应用程序中时，它仍然有些有用（这基本上仅适用于 Mac 应用程序）。

正如我相信你所理解的， NSURLConnection 已经管理了自己的后台线程供其内部使用。

简而言之，我相信您对此的直觉是正确的。答案是“几乎没有”。NSURLConnection 在主线程上最容易管理。

# html - 从 HTML 页面而不是 asp 页面发送邮件

> ID：13826117
> 
> 赞同：0
> 
> 时间：2012-12-11T18:19:22.680
> 
> 标签：html, css, email

我有一个试图用来发送邮件的 HTML 页面。但它不能正常工作。

```
<form name="htmlform" method="post" action="html_form_send.php">
<table width="450px">
</tr>
<tr>
 <td valign="top">
  <label for="first_name">First Name *</label>
 </td>
 <td valign="top">
  <input  type="text" name="first_name" maxlength="50" size="30">
 </td>
</tr>

<tr>
 <td valign="top">
  <label for="telephone">Telephone Number</label>
 </td>
 <td valign="top">
  <input  type="text" name="telephone" maxlength="30" size="30">
 </td>
</tr>
<tr>
 <td valign="top">
  <label for="comments">Comments *</label>
 </td>
 <td valign="top">
  <textarea  name="comments" maxlength="1000" cols="25" rows="6"></textarea>
 </td>

</tr>
<tr>
 <td colspan="2" style="text-align:center">
  <input type="submit" value="Submit">   
 </td>
</tr>
</table>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:20:43.697

简短的回答：根本不可能......即使比尔盖茨也无法做到这一点

如果你想发送电子邮件，学习服务器端编程，HTML 只是一个标记......

*   [PHP](http://en.wikipedia.org/wiki/PHP)

*   [ASP](http://en.wikipedia.org/wiki/Active_Server_Pages)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:23:28.527

HTML 无法发送邮件。您需要某种服务器端语言来完成此操作（PHP、CGI、ASP 等）。否则，您始终可以使用`<a href="mailto:...">Send an e-mail</a>`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T18:23:08.650

`HTML`是客户端脚本。你怎么能从客户端发送邮件？

如果[您](http://wiki.dreamhost.com/PHP_mail%28%29)使用`PHP`.

# asp.net - 来自强类型数据集的数据视图

> ID：13826118
> 
> 赞同：0
> 
> 时间：2012-12-11T18:19:29.167
> 
> 标签：asp.net, vb.net, gridview, dataview, strongly-typed-dataset

我们有一个使用 Visual Studio 中的数据集设计器创建的强类型数据集。

您能否向我们展示从该 DataSet 创建 DataView 所需的编码？

这将在代码隐藏文件中的 ASP.Net VB.Net GridViewSummary.Sorting 处理程序中使用。

这是我们正在尝试但需要帮助的编码：

```
Protected Sub GridViewSummary_Sorting(sender As Object, e As GridViewSortEventArgs) Handles GridViewSummary.Sorting

    ViewState("sortExpr") = e.SortExpression
    GridViewSummary.DataSource = bindgrid()
    GridViewSummary.DataBind()
End Sub

Private Function bindgrid() As DataView

    Dim dv As DataView = New DataView
    Dim dt As DataTable = New DataTable

    dt.TableName = "Classes"
    dv.Table = dt

    If ViewState("sortExpr") IsNot Nothing Then
        dv.Sort = DirectCast(ViewState("sortExpr"), String)
    End If

    Return dv

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:20:30.027

Dataview 可以这样访问： `myDataSet.Tables[0].DefaultView`.
如果要直接对 GridView 进行排序，可以将 GridView 转换为 dataview 并应用排序。

```
(dataGridViewFields.DataSource as DataTable).DefaultView.Sort = .... 
```

我在这里回答了一个类似的问题： [can not bind to datatable with no name error while filtering a gridview](https://stackoverflow.com/questions/13351980/can-not-bind-to-datatable-with-no-name-error-while-filtering-a-gridview/13352049#13352049)

# php - CodeIgniter Active Record：一次加载一行

> ID：13826119
> 
> 赞同：4
> 
> 时间：2012-12-11T18:19:33.697
> 
> 标签：php, codeigniter, mysqli, lazy-loading

文档中描述的正常`result()`方法似乎可以立即加载所有记录。我的应用程序需要加载大约 30,000 行，一次一个，将它们提交给第三方搜索索引 API。显然，一次将所有内容加载到内存中效果不佳（由于内存过多而导致错误）。

所以我的问题是，我怎样才能达到传统 MySQLi API 方法的效果，在循环中一次加载一行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T19:00:59.553

这是您可以做的事情。

```
while ($row = $result->_fetch_object()) {
  $data = array(
    'id'         => $row->id
    'some_value' => $row->some_field_name
  );
  // send row data to whatever api
  $this->send_data_to_api($data);
} 
```

这将得到一排。检查 CodeIgniter 源代码，你会看到当你执行 result() 方法时他们会这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-17T09:03:36.737

对于那些想要在大型结果集上节省内存的人：

从**CodeIgniter 3.0.0 开始**，就有了一个`unbuffered_row`功能，

> 上述所有方法都会将整个结果加载到内存中（预取）。使用 unbuffered_row() 处理大型结果集。

> 此方法返回单个结果行，而不像 row() 那样将整个结果预取到内存中。如果您的查询不止一行，它会返回当前行并将内部数据指针向前移动。

```
$query = $this->db->query("YOUR QUERY");

while ($row = $query->unbuffered_row())
{
    echo $row->title;
    echo $row->name;
    echo $row->body;
} 
```

> 您可以选择传递“对象”（默认）或“数组”以指定返回值的类型：

```
$query->unbuffered_row();               // object
$query->unbuffered_row('object');       // object
$query->unbuffered_row('array');        // associative array 
```

官方文档：[https ://www.codeigniter.com/userguide3/database/results.html#id2](https://www.codeigniter.com/userguide3/database/results.html#id2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T18:53:46.140

好吧，事情是`result()`放弃了查询的整个答复。`row()`只需获取第一个案例并转储其余案例。但是，无论您使用哪个函数，查询仍然可以获取 30 000 行。

适合您的事业的一种设计是：

```
$offset = (int)@$_GET['offset'];

$query = $this-db->query("SELECT * FROM table LIMIT ?, 1", array($offset));
$row = $query->row();

if ($row) {

    /* Run api with values */

    redirect(current_url().'?offset'.($offset + 1));

} 
```

这将占用一行，将其发送到 api，更新页面并使用下一行。它还可以防止页面超时。但是，30 000 条记录和刷新很可能需要一段时间，因此您可能希望将您`LIMIT ?, 1`的数字调整为比`1`go`result()`和`foreach()`每个页面加载多个 api 更高的数字。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-11T18:40:45.233

好吧，有**[row()](http://ellislab.com/codeigniter/user-guide/database/results.html)**方法，它只返回一行作为对象，或者**row_array()**方法，它做同样的事情但返回一个数组（当然）。

所以你可以做类似的事情

```
$sql = "SELECT * FROM yourtable";
$resultSet = $this->db->query($sql);
$total = $resultSet->num_rows();

for($i=0;$i<$total;$i++) {
  $row = $resultSet->row_array($i);
} 
```

这会从整个结果集中循环获取每一行。这与获取所有信息并循环访问我相信的方法调用
大致相同。`$this->db->query($sql)->result()`

如果您一次想要一行，您可以进行 30.000 次调用，或者选择所有结果并一次获取一个，或者您获取所有结果并遍历数组。我现在看不到任何出路。

# ember.js - 无法在 ember.js 中恢复按钮正常工作

> ID：13826123
> 
> 赞同：0
> 
> 时间：2012-12-11T18:19:53.610
> 
> 标签：ember.js

在此示例中无法使返回按钮正常工作。总是返回数据库状态。

```
App.Router = Ember.Router.extend({
  enableLogging: true,
  root: Ember.Route.extend({
    index: Ember.Route.extend({
      route: '/',
      redirectsTo: 'databases'
    })
  }),
  databases: Ember.Route.extend({
    route: '/databases',
    show: Ember.Route.transitionTo('database'),
    connectOutlets: function(router) {
      var applicationController = router.get('applicationController');
      applicationController.connectOutlet('databases');
      App.router.get('databasesController').loadDatabases();
    }
  }),
  database: Ember.Route.extend({
    route: "/databases/:db_name",
    connectOutlets: function(router, db) {
      var applicationController = router.get('applicationController');
      applicationController.connectOutlet('database', db);
    }
  })
}) 
```

链接到动作“显示”：`{{ action show db href=true }}`

```
STATEMANAGER：输入根 ember-1.0.0-pre.2.min.js:18
STATEMANAGER：将事件“navigateAway”发送到状态根。ember-1.0.0-pre.2.min.js:18
STATEMANAGER：将事件“unroutePath”发送到状态根。ember-1.0.0-pre.2.min.js:18
STATEMANAGER：将事件“routePath”发送到状态根。ember-1.0.0-pre.2.min.js:18
STATEMANAGER：输入 root.index ember-1.0.0-pre.2.min.js:18
STATEMANAGER：进入数据库

```

然后我点击“显示”动作

```
STATEMANAGER：将事件“show”发送到状态数据库。ember-1.0.0-pre.2.min.js:18
STATEMANAGER：进入数据库

```

现在按下浏览器的后退按钮

```
STATEMANAGER：将事件“navigateAway”发送到状态数据库。ember-1.0.0-pre.2.min.js:18
STATEMANAGER：将事件“unroutePath”发送到状态数据库。ember-1.0.0-pre.2.min.js:18
STATEMANAGER：将事件“routePath”发送到状态数据库。

```

为什么是状态数据库？我想这是因为`transitionTo('database')`在表演中。成功显示项目列表，单击一个并获取详细视图，而不是单击“返回”并返回列表视图的黄金路径是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:55:35.137

根据 Mehul Kar 的评论，路线应该是嵌套的。

# php - 亚马逊 mws api 中的 submitfeed 错误-属性与有效值列表不匹配

> ID：13826127
> 
> 赞同：2
> 
> 时间：2012-12-11T18:20:06.687
> 
> 标签：php, amazon, amazon-mws

我正在努力弄清楚为什么我的孩子变异测试产品不会被亚马逊 mws api 使用 submitfeed 操作接受。我一遍又一遍地检查了 xsd 文件，但仍然收到以下错误消息

```
 <Result>
            <MessageID>1</MessageID>
            <ResultCode>Error</ResultCode>
            <ResultMessageCode>8105</ResultMessageCode>
            <ResultDescription>The data you provided for an attribute does not match the list of valid values.  Please select a valid value from the Data Definitions and resubmit.</ResultDescription>
            <AdditionalInfo>
                <SKU>TESTSKU-1</SKU>
            </AdditionalInfo>
        </Result> 
```

从这个提交

```
 <Message>
<MessageID>1</MessageID>
<OperationType>Update</OperationType>
<Product>
    <SKU>TESTSKU-1</SKU>
    <StandardProductID>
      <Type>ASIN</Type>
      <Value>B011223344</Value>
    </StandardProductID>
    <ProductTaxCode>A_GEN_NOTAX</ProductTaxCode>
    <ItemPackageQuantity>1</ItemPackageQuantity>
    <NumberOfItems>1</NumberOfItems>
    <DescriptionData>
      <Title><![CDATA[TEST2 Aquarius Star Sign Mens T Shirt - White, 100% Heavy Cotton Mens]]></Title>
      <Brand>StarliteClothing</Brand>
      <Description><![CDATA[TEST2 Aquarius Sign Mens T Shirt, 100% Heavy Cotton Mens & Boys Tee Shirts in All Sizes.  Made with 100% Heavy Cotton either Fruit of the Loom or Gilden T-Shirts.]]></Description>
      <BulletPoint>100% Cotton</BulletPoint>
      <BulletPoint>Everyday Casual Wear</BulletPoint>
      <BulletPoint>Sports Wear</BulletPoint>
      <BulletPoint>100</BulletPoint>
      <ShippingWeight unitOfMeasure="GR">425.0</ShippingWeight>
      <MSRP currency="GBP">9.99</MSRP>
      <Manufacturer></Manufacturer>
      <ItemType>example-item-type</ItemType>
      <RecommendedBrowseNode>116192031</RecommendedBrowseNode>
      <RecommendedBrowseNode>116195031</RecommendedBrowseNode>
    </DescriptionData>
    <ProductData>
      <Clothing>
             <VariationData>
                <Parentage>child</Parentage>
                <Size>Small</Size>
                <Color>White</Color>
                <VariationTheme>SizeColor</VariationTheme>
             </VariationData>
             <ClassificationData>
                <ClothingType>Shirt</ClothingType>
                <Department>Mens</Department>
                <StyleKeywords>Apparel</StyleKeywords>
                <ColorMap>White</ColorMap>
                <InnerMaterial>White</InnerMaterial>
                <OuterMaterial>White</OuterMaterial>
                <Season>All Seasons</Season>
                <CollarType>Crew</CollarType>
                <SleeveType>Short</SleeveType>
                <IsAdultProduct>false</IsAdultProduct>
             </ClassificationData>
      </Clothing>
    </ProductData>
</Product> 
```

错误消息未指定哪个属性不正确。谁能看到哪个值不正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:50:22.773

当我的列标题与亚马逊允许的允许列标题不匹配时，我遇到了同样的错误。有时列标题的规范可能会改变。有时他们会在表格中删除某些字段（如图），因此只需检查所有列标题以匹配您的。还要检查拼写，它必须完全匹配。丹尼尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:21:26.113

您的 XML 已验证，因此无法通过查看 XSD 来定位问题。无论错误消息的“值列表”指的是什么，它肯定不是 XSD。恐怕你必须打电话给亚马逊才能找到问题的原因。

为了完整起见：我确实必须使用以下代码包装您的 XML 以使其有效：

```
<?xml version="1.0"?>
<AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="amzn-envelope.xsd">
  <Header>
    <DocumentVersion>1.01</DocumentVersion>
    <MerchantIdentifier>X</MerchantIdentifier>
   </Header>
   <MessageType>Product</MessageType>
   <Message>
   ... your code here ...
   </Message>
</AmazonEnvelope> 
```

# cuda - 如何在 CUDA 中执行适量的线程

> ID：13826130
> 
> 赞同：0
> 
> 时间：2012-12-11T18:20:13.597
> 
> 标签：cuda

```
dim3 DimGrid((n-1)/256 + 1, 1, 1);
dim3 DimBlock(256, 1, 1);
vecAddKernel<<<DimGrid,DimBlock>>>(d_A, d_B, d_C, n);
__global__
void vecAddkernel(float* A, float* B, float* C, int n)
{
int i = threadIdx.x + blockDim.x * blockIdx.x;
if(i<n) C[i] = A[i] + B[i];
} 
```

在上面的函数中，假设我们有长度为 n=257 的向量，我们将只分配 2 个块。我只是想知道调用 vecAddkernel 函数时第二个块会发生什么。是在第二个块中只执行了一个线程，还是所有 256 个线程都执行了，尽管其中 255 个没有输出。所以基本问题是如何为每个 vecAddKernel 调用固定参数“n”？是每个块 256 个还是第一个块 256 个，第二个块 1 个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T18:47:36.710

块中执行的线程数仅由块的维度决定，因此执行了 256 个线程，尽管其中 255 个没有“输出”。此外，“n”仅定义网格的维度，并且每个网格块中的线程数相同。

# css - 输入密码字体-family

> ID：13826132
> 
> 赞同：1
> 
> 时间：2012-12-11T18:20:18.837
> 
> 标签：css

有没有办法改变字体`input["password"]`？

我创建了一个带有模拟的 webfont ( `WOFF`) 。`squared asterisk``-webkit-text-security: squared`

字体渲染得很好，我已经尝试了一些`<h1>`，`<p>`但我无法在我的`input[type="password"]`：

```
input[type="password"] {
  font-family: "Squared";  
  letter-spacing: 1px;
} 
```

尝试了其他字体，但似乎我无法更改浏览器为密码输入设置的字体。

有没有办法做到这一点？

我也试过了`!important`。

**更新：** [这个问题](https://stackoverflow.com/questions/6859727/styling-password-fields-in-css)提供了涉及密码输入字体的答案。只对我失败吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:28:48.593

这取决于浏览器和可能的操作系统 ..

您可以使用其他属性，但在不使用 JS 的情况下，您可以做的与 font-family 相关的事情并不多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:23:09.900

尝试在完整的声明中传递字体，而不是简单地`font-family`：

```
input[type="password"] {
    font: "Squared";
    font-size: 18px;
    letter-spacing: 1px;
} 
```

# javascript - 手动将 HTML 代码写入网页，还是使用 jQuery（或纯 ol'Javascript）更快？

> ID：13826135
> 
> 赞同：0
> 
> 时间：2012-12-11T18:20:31.727
> 
> 标签：javascript, jquery, html

这是一个示例页面：

```
<html>
    <head>
        <title>WEB PAGE TITLE</title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script src="script.js" type="text/javascript"></script>
    </head>
</html> 
```

像这样写出正文会更好（在性能方面）：

```
<body>
    <div id="element"></div>
</body> 
```

或者让 jQuery 这样做：

```
$(document).ready(){
   $('html').append('<body />');
   $('body').append('<div id="element" />');
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T18:23:25.350

直接编写 HTML 总是 100% 更好，不仅仅是出于性能原因。

严格来说性能，如果您直接编写正文，则加载速度要快得多。如果您使用 JavaScript（jQuery 等），则在读取大部分 HTML 之前不会对其进行处理，等等等等，它会（相对）慢得多。

此外，如果您使用 JavaScript 编写该内容，如果用户禁用了 JavaScript，他们将什么也看不到。不酷。你总是想走渐进式增强路线，这基本上是在没有 JavaScript 的情况下让一切都在基本级别上工作，而不是在可用时添加 JavaScript 来增强该功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:23:29.657

标记方法会更快。你不仅不需要解析 javascript，浏览器也不需要等到 ready() 事件被触发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T18:24:08.983

当然，如果没有 JavaScript/JQuery，渲染速度会更快。数据也少了一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T18:24:11.443

这里不一定有一个“正确”的答案，但我会权衡一下。

避免在 JavaScript 中构建 HTML，除非您的业务模型需要它（例如构建 DOM 元素以响应 Ajax 查询）。主要原因是支持/修改 JavaSCript 中内置的 HTML 更加困难（通常）。另外，如果您的用户出于某种原因禁用了 JavaScript 怎么办？在这种情况下，让您的网站尽可能优雅地降级是一件好事，如果您在 JS 中构建您的核心结构，您的网站将是非操作的。

除此之外，一个简单的 DOM 结构将比内置的 JS 结构更快地呈现。

干杯

# perl - perl FTP 到 z/OS，防止用户 ID 被附加到目标文件名

> ID：13826136
> 
> 赞同：3
> 
> 时间：2012-12-11T18:20:34.097
> 
> 标签：perl, ftp, zos

我正在尝试编写一个 perl 脚本（如下）来自动将源文件从 Windows 上传到 z/OS（又名 MVS 或 OS/390）。put() 方法似乎在 z/OS 上的远程数据集（文件）名称前加上我登录时使用的用户 ID（“JCARTER”）。我要上传到的远程数据集名称是“FSI.V121P01.INSTALL”，它是一个分区数据集 (PDS)。目标数据集名称的前缀为“JCARTER”会导致找不到数据集，并且 put() 失败。我尝试了不同的方法来引用目标文件名，但我的用户 ID 仍然附加在文件名之前。我也尝试使用 cwd() 设置 cwd，使用 quote('SITE', 'QUOTESOVERRIDE') 和 quote('SITE', 'DATASETMODE')，但仍然没有成功。

这是脚本：

```
use strict;
use Net::FTP;

my $HostIP="xxx.xxx.xxx.xxx";
my $ftp;

$ftp = Net::FTP -> new ($HostIP) or die "Cannot connect to zOS: $@";
$ftp->login("userid","pw") or die "Cannot login.", $ftp->message;
$ftp->ascii();

#$ftp->cwd();
#$ftp->quot('SITE', 'QUO');
#$ftp->quot('SITE', 'DATAS');
print $ftp->message;
$ftp->pwd();
print $ftp->message;
$ftp->put('J:\REL122\RPS100\A2WBLIB\C\a2wversn.c', 'FSI.V121P01.INSTALL(A2WVERSN)');
print $ftp->message;
$ftp->quit; 
```

运行上面的程序会产生以下消息：

表示类型是 Ascii NonPrint "'JCARTER.'" 是工作目录。JCARTER.FSI.V121P01.INSTALL(A2WVERSN) 请求一个不存在的分区数据集。使用 MKD 命令创建它。

当我尝试添加 cwd("") 以删除当前工作目录时，我得到：

表示类型是 Ascii NonPrint "'JCARTER.'" 是工作目录。“/”是 HFS 工作目录。存储数据集 /FSI.V121P01.INSTALL(A2WVERSN) 打开 /FSI.V121P01.INSTALL(A2WVERSN) 失败。

看来我已经很接近了。有什么建议么 ？谢谢 - 约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:56:05.557

听起来，当您通过 FTP 连接时，它会将您放入的数据集根据您的用户名命名为“JCARTER”。

您是否尝试过 cdup () 将您从 JCARTER 命名数据集中解脱出来？然后您可以将 cwd() 输入 FSI.V121P01.INSTALL PDS。

如果这不起作用，您可能只想建立连接，运行 dir() 并查看 Net::FTP 为您返回的内容。这可能会使事情在逻辑上更易于导航。

# spring-mvc - Backbone.js save() 与 Jquery ajaxSubmit()

> ID：13826139
> 
> 赞同：1
> 
> 时间：2012-12-11T18:20:46.687
> 
> 标签：spring-mvc, backbone.js

当我在客户端执行 model.save() 时，我在 Spring 框架控制器中得到空值。如果我使用 Jquery ajaxSubmit() 接收的值很好，如何使用 model.save()

我的登录模型和客户端代码中的视图（使用主干）

```
$.ready = function() {

    var LoginModel, LoginView;

    // Login Model
    LoginModel = Backbone.Model.extend({

        // URL to authenticate login.
        url: 'authenticate',

        // Ensure that each todo created has `title`.
        initialize: function() {
            console.log("LoginModel initialized");

            this.bind("change", this.attributesChanged);
        },

        validate: function(attrs) {
            console.log("LoginModel validate");
        },

        attributesChanged: function(){
            console.log("LoginModel attributesChanged");
        }

    });

    // Login View
    LoginView = Backbone.View.extend({
        el: $('#loginform'),

        events: {
            "click #login-button": "performLogin",
            "change #login-username": "setUsername",
            "change #login-password": "setPassword"
        },

        initialize: function() {
            this.username = $("#login-username");
            this.password = $("#login-password");
            this.loginButton = $("#login-button");
        },

        setUsername: function(e){
            this.model.set({username: this.username.val()});
            console.log("LoginView username set = " + this.username.val());
        },

        setPassword: function(e){
            this.model.set({password: this.password.val()});
            console.log("LoginView password set = " + this.password.val());
        },

        performLogin: function(event) {

            event.preventDefault();

            this.model.save();

            return false;
        }
    });

    var loginview = new LoginView({model: new LoginModel()});
} 
```

HTML 表单

```
<form id="loginform" action="authenticate" method="POST">
    <div>
        User Name
        <input name="username" type="text" align="right" id="login-username">
        <br/>
        <br/>
        Password
        <input name="password" type="password" align="right" id="login-password">
    </div>
<button type="submit" id="login-button">Login</button>
</form> 
```

使用 $.ajaxForm 的脚本标签

```
 $('#loginform').submit(function() {

        $(this).ajaxSubmit();

        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:11:07.740

下面的代码有效

```
 Backbone.Model.prototype.sync = function(method, model, options) {
        if (method == "create" || method == "update") {
            var self = this;

            var options = {
                           url: this.url,
                           type: 'POST',
                           success:    function() {
                               alert('Thanks for your comment!');
                           }
                       }; 

            // submit the form
            $(this.el).ajaxSubmit(options);
        }
    }; 
```

在最后一行中，我使用了 $(this.el)，这里的 'el' 表示表单 id（选择器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:32:57.487

您正在使用[`jQuery form plugin`](http://www.malsup.com/jquery/form/#api)，我相信它使用 JQuery`serialize`方法，它将表单参数转换为查询字符串：

```
?username=name&password=pw 
```

与 Backbone 对比，后者使用以下方法序列化模型数据`toJSON`：

```
{ username: name, password: pw } 
```

因此，您似乎有两种选择：

1.  修改 Spring 服务，使其可以接受 JSON 数据
2.  覆盖 Backbone 的[`sync`](http://backbonejs.org/#Sync)（或者它的序列化/反序列化方法`toJSON`和`parse`）

假设您使用 (2)，您可以在单个模型中覆盖该方法，或者通过修改`Backbone.Model`原型来全局覆盖该方法：

```
Backbone.Model.prototype.sync = function(method, model, options) {
    if (method == "create" || method == "update") {
        var self = this;

        // get model in query-string format
        var q = _.keys(this.attributes).map(function(prop) {
            return prop + '=' + self[prop];
        }).join('&');
        // Post data to server
        $.post(this.url, _.extend(options, { data: q }) );
    }
} 
```

# sql - 从字符串中修剪查找表中的数据

> ID：13826140
> 
> 赞同：0
> 
> 时间：2012-12-11T18:20:50.803
> 
> 标签：sql, trim, lookup-tables, city

我有一个脏数据库，我必须清理它，首先从地址中提取城市名称（写有几个变体），然后标准化城市名称的拼写并用标准化城市名称替换所有数据

我制作了一个 Cities_look up 表。其中写了所有可能的城市名称变体，例如，此表有 2 列

```
Standard_City_Name  Dirty_City Name
NEW YORK             NEW
NEW YORK             NY
NEW YORK             newyork
NEW YORK             New york
NEW YORK             ny
NEW YORK             NWYK 
```

现在我必须通过在此表中查找比较 Dirty_City_Name 列中的所有值然后将其修剪掉来从地址中修剪城市名称。然后创建新的城市列并在那里写下 Standard_City_Name

我在叮这个

```
SELECT TRIM(TRIM(TRAILING Cities_lookup.Dirty_City_Name FROM Address) ), Cities_lookup.Dirty_City_Name
from Student left join Cities_lookup 
 on Student.Address like CONCAT('% ',Cities_lookup.Dirty_City_Name) 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:59:23.607

因为您知道地址在字符串的末尾，所以您可以使用技巧来替换它`stuff()`。也就是说，只需将这些位置的字符替换为空字符串即可。

我发现最简单的方法是反转字符串，替换第一个 +1 字符，然后再次反转。在这种情况下，是脏城市名称的长度，“+ 1”是空格：

```
select reverse(stuff(reverse(Address), 1, len(cl.Dirty_City_Name) + 1, '')), cl.Standard_City_Name
from Student s left join
     Cities_lookup cl
     on s.Address like '% '+cl.Dirty_City_Name 
```

# objective-c - 核心数据和n个实体“人”

> ID：13826143
> 
> 赞同：0
> 
> 时间：2012-12-11T18:21:12.673
> 
> 标签：objective-c, ios, core-data

我可以让一个实体与自己有一对多的关系吗？

从我的服务器获取组列表，它可以有 n 个名称和 n 个级别。在顶层，假设我有：

```
Scott
Jason 
```

Scott 和 Jason 手下都有 n 名员工。斯科特有

```
Bryan
Matt 
```

Bryan 和 Matt 手下都有 n 名员工

```
Jill
Lisa 
```

Jill 和 Lisa 下都有 n 名员工。

排序像：

![在此处输入图像描述](../Images/3ea9b58f456cd55b4101378cd7d6648d.png)

但有 n 个子组。

我的列表可以有 n 个级别。它需要是动态的。

我可以把它归结为：

![在此处输入图像描述](../Images/a15e9a30cb03f174ed4d3443d1f7b5d9.png)

我可以只拥有一个与自身具有多对多关系的实体 Person 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:13:15.273

是的，一个实体可以与它自己有一个多对多的关系。您必须定义两个对多的关系，例如

*   `members``Person`从to的 to-many 关系`Person`，
*   `leaders``Person`从to的 to-many 关系`Person`，

并将两者设置为彼此的反向关系。

![在此处输入图像描述](../Images/328ff1a56889d9a45c5d6b72e880d4b0.png)

另请参阅“核心数据编程指南”中[的多对多关系](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdRelationships.html#//apple_ref/doc/uid/TP40001857-SW10)。

# file - 批处理文件移动名称中带有空格的文件。

> ID：13826144
> 
> 赞同：2
> 
> 时间：2012-12-11T18:21:29.100
> 
> 标签：file, batch-file, directory, names

我希望有些人可以帮助我，过去几天我一直在谷歌搜索答案，却一无所获。我有一个两部分代码拳头将所有内容从子文件夹中拉出，然后第二部分按类型将这些文件移动到位于其他位置的其他文件夹中。我可以让代码在测试设置中工作，但它不会在我试图移动的文件上。我认为这与其中包含空格的文件的名称有关，但我不确定。这是代码。多谢你们！

第一部分

```
FOR /R C:\Users\Laptop02\Desktop\Folder 1 Test  %%i IN (*.*) DO MOVE %%i C:\Users\Laptop02\Desktop\Folder 1 Test 
```

第二部分

```
@echooff
set media=C:\Users\Laptop02\Desktop\Foder 2 Test
set jpg=C:\Users\Laptop02\Desktop\Foder 2 Test\mediadata
set xml=C:\Users\Laptop02\Desktop\Foder 2 Test\mediadata

move %dlDir%*.avi %media%
move %dlDir%*/*.avi %meia%
move %dlDir%*.mp4 %media%
move %dlDir%*/*.mp4 %media%
move %dlDir%*.mkv %media%
move %dlDir%*/*.mkv %media%
move %dlDir%*.jpg %jpg%
move %dlDir%**.xml %xml% 
```

再次感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:23:05.720

您需要在名称中可能包含空格的文件周围加上引号，例如

```
move "%dlDir%*.avi" "%media%" 
```

**更新**

对于该`for`部分，添加

```
"delims=" 
```

像这样：

```
FOR /F "delims=" IN (dir /b /s "C:\Users\Laptop02\Desktop\Folder 1 Test") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T21:05:55.733

`robocopy`虽然 move 命令很好并且上述方法有效，但使用以下具有多线程支持的命令应该更快地复制或移动许多文件：

```
@echo off
set "source=C:\Users\Laptop02\Desktop\Folder 1 Test"
set "media=C:\Users\Laptop02\Desktop\Foder 2 Test"
set "jpg=C:\Users\Laptop02\Desktop\Foder 2 Test\mediadata"
set "xml=C:\Users\Laptop02\Desktop\Foder 2 Test\mediadata"
robocopy /s /mov /mt "%source%" "%media%" *.avi
robocopy /s /mov /mt "%source%" "%media%" *.mp4
robocopy /s /mov /mt "%source%" "%media%" *.mkv
robocopy /s /mov /mt "%source%" "%jpg%" *.jpg
robocopy /s /mov /mt "%source%" "%xml%" *.xml
pause 
```

或者，只移动一次文件也会更快：

```
@echo off
set "source=C:\Users\Laptop02\Desktop\Folder 1 Test"
set "media=C:\Users\Laptop02\Desktop\Foder 2 Test"
set "jpg=C:\Users\Laptop02\Desktop\Foder 2 Test\mediadata"
set "xml=C:\Users\Laptop02\Desktop\Foder 2 Test\mediadata"

cd "%source%"
for /r "%~dp0" %%A in (*) do (
    if "%%~xA"==".avi" move "%%~A" "%media%\"
    if "%%~xA"==".mp4" move "%%~A" "%media%\"
    if "%%~xA"==".mkv" move "%%~A" "%media%\"
    if "%%~xA"==".jpg" move "%%~A" "%jpg%\"
    if "%%~xA"==".xml" move "%%~A" "%xml%\"
)
pause 
```

# c# - 编辑 datagridview 时在哪里捕获未处理的异常

> ID：13826148
> 
> 赞同：1
> 
> 时间：2012-12-11T18:21:57.153
> 
> 标签：c#, entity-framework, data-binding, exception-handling, datagridview

我有一个数据网格视图，它数据绑定到实体框架“表”：

```
 public ObjectSet<TEntity> tableData { get; private set; }
    private BindingSource tableBinding;

    public AuxiliaryTableEditor(ObjectSet<TEntity> something)
    {
        InitializeComponent();

        this.tableData = something;
        this.tableBinding = new BindingSource();
        this.tableBinding.DataSource = tableData;

        this.auxiliaryTableEditorGridView.DataSource = tableBinding;
    } 
```

这工作得很好。

**问题是这样的：**如果用户开始编辑/添加一行，如果他们在单元格中进入编辑模式，删除内容，然后制表符或单击它，将引发**未处理**的异常（如大多数 db 列不允许空值）。这是完全正常且可以接受的，但我希望能够捕捉和处理这些异常，但*我不知道在哪里/如何捕捉它们*。

我尝试在 datagridview 上使用几种不同的事件处理程序，例如[.DataError](http://msdn.microsoft.com/en-us/library/t4a23xx4%28VS.80%29.aspx)、[.RowValidating](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rowvalidating.aspx)以及我现在不记得的其他一些事件处理程序……但我似乎无法捕捉到讨厌的异常。

任何建议都非常感谢！

编辑：我应该补充一点，异常通常是这样的：“用户代码未处理 ConstraintException。此属性不能设置为空值”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:27:06.347

尝试`CellEditEnding`or`CurrentCellChanged`事件。

编辑：或者你也可以让你的属性的设置器处理空值..

```
public int Number
{
  get { return _number; }
  set
  {  
      if (null == value)
      {
          // handle here
      }
  }
} 
```

编辑：有关更多信息，请参阅[提交空字段时的实体框架错误](https://stackoverflow.com/questions/1777815/entity-framework-error-when-submitting-empty-fields)。

# linux - 如何在 SSH 命令中同时拥有本地和远程变量

> ID：13826149
> 
> 赞同：31
> 
> 时间：2012-12-11T18:22:03.110
> 
> 标签：linux, bash

如何在 ssh 命令中同时拥有本地和远程变量？例如在以下示例代码中：

```
A=3;
ssh host@name "B=3; echo $A; echo $B;" 
```

我可以访问 A 但无法访问 B。

但在以下示例中：

```
A=3;
ssh host@name 'B=3; echo $A; echo $B;' 
```

我没有 A，只有 B 可以访问。

有什么方法可以同时访问 A 和 B？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-12-11T18:26:43.987

我认为这就是你想要的：

```
A=3;
ssh host@name "B=3; echo $A; echo \$B;" 
```

* * *

**当您使用双引号时**：

您的 shell 会对前缀为 的变量进行自动扩展`$`，因此在您的第一个示例中，当它看到

```
ssh host@name "B=3; echo $A; echo $B;" 
```

bash 将其扩展为：

```
ssh host@name "B=3; echo 3; echo ;" 
```

然后作为参数**传递**给. 这是因为您定义了，但您从未定义，因此在本地解析为空字符串。`host@name "B=3; echo 3; echo ;"``ssh``A``A=3``B``$B`

* * *

**当您使用单引号时**：

单引号括起来的所有内容都被解释为字符串文字，所以当你这样做时：

```
ssh host@name 'B=3; echo $A; echo $B;' 
```

一旦您登录到远程服务器，这些说明`B=3; echo $A; echo $B;`就会运行。您已`B`在远程 shell 中定义，但您从未告诉它是什么`A`，因此`$A`将解析为空字符串。

* * *

**因此，当您使用 时`\$`，如解决方案中所示：**

`\$`意思是按字面意思解释`$`字符，所以我们按字面意思`echo $B`作为指令之一发送远程执行，而不是让 bash`$B`先在本地展开。我们最终告诉`ssh`要做的事情是这样的：

```
ssh host@name 'B=3; echo 3; echo $B;' 
```

# c++ - SDL2 OpenGL3 如何在函数内初始化 SDL

> ID：13826150
> 
> 赞同：7
> 
> 时间：2012-12-11T18:22:19.763
> 
> 标签：c++, opengl, sdl, sdl-2, opengl-3

我正在试验新的 SDL2 beta 和 OpenGL3 上下文，但遇到了一个奇怪的问题：

如果我在 main() 函数中运行 SDL 初始化代码，它可以正常工作，但我想将此代码放在单独的 init_sdl() 函数中。

如果我把初始化代码放在一个单独的init_sdl()函数中，并从main()中调用这个函数，背景颜色永远不会绘制，程序开始疯狂消耗我系统的所有资源。

有人能指出一个工作示例，其中 SDL 在单独的函数中初始化吗？我似乎找不到...也许这是不可能的？我想我隐约记得 SDL 1.2 也有类似的问题，但自从我使用它已经有几年了，我想我还没有找到解决方案。事实上，这可能是我选择改用 SFML 的原因。

我真的很想使用 SDL2 而不是 SFML，因为它可以在更多平台上运行，但不能将事物分成小功能对我来说是个大问题。这应该很容易，我是否遗漏了一些明显的东西？

**编辑：**

这有效：

```
#include <iostream>
#include <GL/glew.h>
#include <SDL.h>
#define PROGRAM_NAME "SDL2 OpenGL3 Example"

int main(int argc, char** argv)
{
    SDL_Window* sdl2_window = 0;
    SDL_GLContext opengl3_context;

    SDL_Init(SDL_INIT_VIDEO);

    // set the opengl context version
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 2);

    // turn on double buffering set the depth buffer to 24 bits
    // you may need to change this to 16 or 32 for your system
    SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);
    SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 24);

    // create the sdl2 window
    sdl2_window = SDL_CreateWindow(PROGRAM_NAME, SDL_WINDOWPOS_CENTERED,
            SDL_WINDOWPOS_CENTERED, 512, 512,
            SDL_WINDOW_OPENGL | SDL_WINDOW_SHOWN);

    // create the opengl3 context
    opengl3_context = SDL_GL_CreateContext(sdl2_window);

    GLenum status = glewInit();
    if (status != GLEW_OK)
    {
        std::cerr << "GLEW Error: " << glewGetErrorString(status) << "\n";
        exit(1);
    }

    // sync buffer swap with monitor's vertical refresh rate
    SDL_GL_SetSwapInterval(1);

    // set background color
    glClearColor( 1.0, 0.0, 0.0, 1.0 );

    while (true)
    {
        int status = 0;

        glClear( GL_COLOR_BUFFER_BIT );

        SDL_GL_SwapWindow(sdl2_window);

        SDL_Event event;

        while (SDL_PollEvent(&event))
        {
            switch (event.type)
            {
            case SDL_KEYDOWN:
                break;
            case SDL_KEYUP:
                // if escape is pressed, quit
                if (event.key.keysym.sym == SDLK_ESCAPE)
                    status = 1; // set status to 1 to exit main loop
                break;
            case SDL_QUIT:
                status = 1;
                break;
            }
        }

        if (status == 1) // if received instruction to quit
            break;
    }

    // delete opengl3 context, destroy sdl2 window, and shut down sdl subsystems
    SDL_GL_DeleteContext(opengl3_context);
    SDL_DestroyWindow(sdl2_window);
    SDL_Quit();

    return 0;
} 
```

这不起作用：

```
#include <iostream>
#include <GL/glew.h>
#include <SDL.h>
#define PROGRAM_NAME "SDL2 OpenGL3 Example"

void init_sdl(SDL_Window* sdl2_window, SDL_GLContext& opengl3_context)
{
    SDL_Init(SDL_INIT_VIDEO);

    // set the opengl context version
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 2);

    // turn on double buffering set the depth buffer to 24 bits
    // you may need to change this to 16 or 32 for your system
    SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);
    SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 24);

    // create the sdl2 window
    sdl2_window = SDL_CreateWindow(PROGRAM_NAME, SDL_WINDOWPOS_CENTERED,
            SDL_WINDOWPOS_CENTERED, 512, 512,
            SDL_WINDOW_OPENGL | SDL_WINDOW_SHOWN);

    // create the opengl3 context
    opengl3_context = SDL_GL_CreateContext(sdl2_window);
}

int main(int argc, char** argv)
{
    SDL_Window* sdl2_window = 0;
    SDL_GLContext opengl3_context;

    init_sdl(sdl2_window, opengl3_context);

    GLenum status = glewInit();
    if (status != GLEW_OK)
    {
        std::cerr << "GLEW Error: " << glewGetErrorString(status) << "\n";
        exit(1);
    }

    // sync buffer swap with monitor's vertical refresh rate
    SDL_GL_SetSwapInterval(1);

    // set background color
    glClearColor( 1.0, 0.0, 0.0, 1.0 );

    while (true)
    {
        int status = 0;

        glClear( GL_COLOR_BUFFER_BIT );

        SDL_GL_SwapWindow(sdl2_window);

        SDL_Event event;

        while (SDL_PollEvent(&event))
        {
            switch (event.type)
            {
            case SDL_KEYDOWN:
                break;
            case SDL_KEYUP:
                // if escape is pressed, quit
                if (event.key.keysym.sym == SDLK_ESCAPE)
                    status = 1; // set status to 1 to exit main loop
                break;
            case SDL_QUIT:
                status = 1;
                break;
            }
        }

        if (status == 1) // if received instruction to quit
            break;
    }

    // delete opengl3 context, destroy sdl2 window, and shut down sdl subsystems
    SDL_GL_DeleteContext(opengl3_context);
    SDL_DestroyWindow(sdl2_window);
    SDL_Quit();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:50:22.987

```
void init_sdl(SDL_Window* sdl2_window, SDL_GLContext& opengl3_context) 
```

你的第一个论点也应该是一个参考。否则当你回来`main()` `sdl2_window`的时候仍然是零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-11T00:44:52.290

你确定上下文没有错吗：

```
int flags = SDL_WINDOW_OPENGL | SDL_WINDOW_BORDERLESS | SDL_WINDOW_SHOWN;
win = SDL_CreateWindow("3Doodle", SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, 1024, 768, flags);
SDL_assert(win != NULL);

context = SDL_GL_CreateContext(win);
SDL_assert(context != NULL); 
```

# sql-server-2008 - 动态 CREATE TABLE 命令仅创建“常规”列数据类型（Excel 连接）

> ID：13826153
> 
> 赞同：2
> 
> 时间：2012-12-11T18:22:28.193
> 
> 标签：sql-server-2008, excel, ssis, oledb, openrowset

我想将数据库中的所有表导出到 Excel 文件。该过程应该是动态的，因为数据库中的表可能会有所不同。

当前进程使用SSIS如下：

1.  生成一个`CREATE TABLE`字符串。
2.  在带有 Excel CM的任务中使用该字符串`Execute Sql`，这将创建一个 Excel 文件。
3.  生成`INSERT INTO OPENROWSET... SELECT FROM ...`命令字符串。
4.  `Execute Sql`在带有 SQL SERVER CM的任务中使用此字符串。

问题是创建的 excel 文件列类型都是“通用的”，即使我的脚本另有说明。

一个示例`CREATE TABLE`脚本：

```
CREATE TABLE `CONTACT1`
(
    [ACCOUNTNO] LongText,
    [COMPANY]   LongText,
    [CREATEON]  datetime,
    [CREATEAT]  LongText,
) 
```

“玩”数据类型没有帮助。例如，使用`VARCHAR(1000)`代替`LongText`等。

我已经尝试生成`xlsx`和`xls`文件。

这个问题阻止我稍后使用`*INSERT INTO OPENROWSET(...) SELECT FROM ...*`命令插入数据。一个示例`INSERT INTO`脚本：

```
INSERT INTO  OPENROWSET('Microsoft.ACE.OLEDB.12.0','Excel 12.0;Database=c:\\junk    \\accountnoWithNoApps.xlsx;HDR=YES;IMEX=1\"',
'SELECT [accountno], [COMPANY], [CREATEON], [CREATEAT] FROM [CONTACT1$]')
SELECT [accountno], [COMPANY], [CREATEON], [CREATEAT] FROM CONTACT1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:52:11.763

也许这些链接会有所帮助（一般来说，似乎没有真正的解决方案，而是解决方法）

*   [SQL Server 2005 OPENROWSET 插入 Excel - 文本到数字格式](https://stackoverflow.com/questions/9349946/sql-server-2005-openrowset-insert-into-excel-text-to-number-formatting)
*   [使用列格式导出到 Excel](http://social.msdn.microsoft.com/Forums/en/transactsql/thread/36b24a60-1e0b-401c-9978-bd8570423fc7)
*   [使用 OpenRowSet 和 FormatFile 选项](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/1714f86b-6742-491e-913e-e15273f86d80)
*   [http://www.sqlservercentral.com/Forums/Topic255083-8-1.aspx](http://www.sqlservercentral.com/Forums/Topic255083-8-1.aspx)

# c# - 应该使用哪个类在 C#.net 中为 Web 浏览器创建代理服务器

> ID：13826161
> 
> 赞同：0
> 
> 时间：2012-12-11T18:23:09.663
> 
> 标签：c#, proxy

我正在尝试创建一个 Web 浏览器。我想给它一个类似 Internet Explorer 的功能，即工具 -> Internet 选项 -> 连接 -> 局域网设置 -> 代理服务器。该代理服务器采用地址和端口号。谁能知道在 C#.net 中应该使用哪个类来实现此目的。我已经阅读了很多关于代理服务器的内容，但我只有一个答案“代理服务器是一种服务器，它充当客户端从其他服务器寻求资源的请求的中介”

我对以下几点感到困惑：-

1.  根据定义，代理服务器是对到达网站的请求提供响应的服务器。那么浏览器如何提供代理服务器设置呢？
2.  浏览器的代理服务器和为网站创建的代理服务器是否不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:27:39.517

代理服务器和网络浏览器是完全不同的东西。

代理服务器从客户端（通常是 Web 浏览器）接收请求，通常是 http 请求，并通过转身并获取所请求的资源来满足该请求。可以说是“中间人”。它位于客户端和真实资源之间。代理服务器通常用于满足网络安全要求、控制对外部资源的访问（想想 Net Nanny）或缓存频繁请求的内容。

另一方面，Web 浏览器从 Web 服务器（通常通过 http 或 https）检索资源并呈现服务器返回的任何内容。

如果您想创建代理服务器，请查看

[http://times.imkrisna.com/2011/08/simple-http-proxy-server-c-source-code/](http://times.imkrisna.com/2011/08/simple-http-proxy-server-c-source-code/)

如果您想从头开始创建 Web 浏览器，那将是一项艰巨的任务。你不会找到一个可以为你做到这一点的课程。

# backbone.js - 基于 HTML5 Canvas 的应用程序的 MVC 框架建议

> ID：13826162
> 
> 赞同：2
> 
> 时间：2012-12-11T18:23:14.163
> 
> 标签：backbone.js, html5-canvas

我正在尝试开发基于 HTML5 Canvas 的应用程序。该应用程序基本上是一个财务数据可视化应用程序，完全在 HTML5 Canvas 上运行，即每个按钮、事件处理、图表一切都在 HTML5 Canvas 中完成。

到目前为止，我已经使用了两个库来管理庞大的代码库：

1.  jCotton 用于绘图和事件处理，我们必须修改并添加广泛的其他功能到 jCotton，它对我们来说工作得很好
2.  用于模块化的 RequireJS 也可以正常工作

然而，由于我们处于原型阶段，我们没有投资一个合适的 MVC 框架，所以关注点分离，即数据模型、独占视图没有得到适当的维护，因为它当时是一个概念验证项目，但现在我我正在考虑重构代码并使用重型 MVC 框架来更好地组织我的代码库。

现在这是我面临的一个问题，我真的很困惑选择什么框架。有 Backbone、EmberJS、SpineJS 等。它们似乎都非常好。但我无法对其中任何一个做出任何最佳决定。我不是 JS 专家，我编写 JS 代码只有 1 年，所以这也是我遇到这些困难的另一个原因。

很多这些框架似乎都非常强调 DOM 操作，这对我的项目来说是不必要的，我们有我们的自定义数据结构来表示 Canvas 中的场景。JS 客户端使用自定义 xml 与后端服务器进行通信和数据传递。我一直在挖掘 Backbone 一段时间。路由器对我没有用，因为应用程序在画布内运行。然而，基于事件的模型似乎很有吸引力。

我想知道你们中是否有人遇到过类似的情况，以及你们为此做了什么。我应该选择 Backbone、EmberJS 等，还是应该更好地设计自己的简约 MVC 框架。如果您建议我使用第三方 MV* 框架，我应该选择哪一个？正如我所说，我一直在挖掘 Backbone 以查看它是否符合我的需求，我想更多地了解这个特定领域中的其他框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:43:09.500

我使用 EmberJS 实现了一个基于画布的“交互式时间趋势图”，并获得了积极的体验。您不需要在 EmberJS 中使用 HTML/Backbone（html 模板）。

EmberJS 的自动传播属性和计算属性非常适合 jCotton 等场景图 API。

我对 jCototn 不熟悉，但快速浏览一下，从 Ember.Object 扩展一个 CottonObject 类似乎很简单，该类会自动修改场景图的子树以响应 Ember 属性更改。

# xcode - 安装 xcode 后的 git push.default 设置

> ID：13826163
> 
> 赞同：5
> 
> 时间：2012-12-11T18:23:16.560
> 
> 标签：xcode, macos, git

我不确定这是由我的 xcode 安装引起的，但这是在 git 停止工作之前在我的计算机上发生的唯一重大变化。我还在 github 上找到了一些信息，表明这可能是问题所在。无论如何，每当我尝试拉取、克隆或推送时，都会收到以下消息：

```
error: Malformed value for push.default: simple
error: Must be one of nothing, matching, tracking or current.
fatal: bad config file line 3 in /Users/mbc/.gitconfig 
```

如果我运行`git --version`，我会得到： git version 1.7.10.2 (Apple Git-33)

我尝试安装最新版本，但即使安装程序声称成功，`git --version`也没有改变。

那么也许 git 安装在两个不同的地方？`which git`给了我`/usr/bin/git`，但我不确定 git 应该在哪里，所以这还不是特别有用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-28T17:07:55.373

这种行为确实可以通过安装 Xcode 来解释。事实上，通过升级到 Mavericks，我的行为非常相似，因为这显然会重新安装或更新 Xcode。

发生的事情是这样的：您安装了一个完整的 git 版本，您已将其配置为`simple`用于它的`push.default`. `simple`Xcode 被安装（或更新），并带来了另一个过时的 git 版本，它还不知道`push.default`. 当您`git`在命令行上键入时，系统`PATH`会搜索要执行的二进制文件。Xcode-git 首先在您的路径上找到，在您更新版本的 git 之前。再次安装 git 并没有帮助，因为它仍然安装在同一位置，并且该位置在 Xcode git 之后的路径上。

正如silent1mezzo 已经建议的那样，一种可能的解决方案是在终端中执行此操作：

```
sudo rm -rf /usr/bin/git
sudo ln -s /usr/local/git/bin/git /usr/bin/git 
```

但是，如果您随后升级 Xcode 并再次重新安装自己的 git，它将覆盖我们刚刚创建的链接。这可能是导致它在我升级到 Mavericks 时中断的原因。

另一种选择是将 /usr/local/git/bin 放在/usr/bin*之前*的路径中。您可以通过在 .bash_profile 中添加这样的一行来做到这一点：

```
export PATH=/usr/local/git/bin:$PATH 
```

（如果您还没有 .bash_profile 文件，只需在您的主目录中创建它）

这将导致更新版本的 git 成为搜索路径时首先找到的版本。一个细节：当您将该行放入 .bash_profile 时已经打开的终端不会立即获得新行为 - 您可以运行`source ~/.bash_profile`以使它们获得新行为，或者只是关闭它们并重新启动它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:43:05.217

我会查看**/Users/mbc/.gitconfig**第 3 行，看看实际存在什么值。

*[编辑...]*

如果您尝试跟踪 GitHub 上的内容，我会尝试将值更改为“跟踪”，看看是否能解决您的问题。错误消息将表明 'simple' 的当前值是完全错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:23:58.347

`default = simple`在 git 1.7.11 中引入，因此您的 git 版本无法识别它：

[http://comments.gmane.org/gmane.comp.version-control.git/200276](http://comments.gmane.org/gmane.comp.version-control.git/200276)

一些适合您的选择：

*   安装较新版本的 git（我喜欢用自制软件来处理这些事情，它目前有 git 1.8.1.1 可用，但请选择让你舒服的东西）
*   如错误消息所示，使用替代配置。（有关一些选项，请参见上面的链接——我不知道哪个值最适合您的情况。）
*   如果您已经安装了另一个版本的 git，但它没有显示，请确保 /usr/local/bin 在您的路径中位于 /usr/bin 的前面。

第三个选项为我解决了这个问题。我的编辑器没有配置为尊重我用户的自定义路径，因此它默认为 Apple 安装的 git 而不是 homebrew 包。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-17T19:43:02.463

我通过在终端中键入以下两行来解决此问题

```
sudo rm -rf /usr/bin/git
sudo ln -s /usr/local/git/bin/git /usr/bin/git 
```

基本上 XCode 命令行工具将它的 git 版本安装到 /usr/bin/git ，当我从他们的网站安装 Git 时，它安装到`/usr/local/git`.

通过删除第一个版本并符号链接下载的版本，一切正常。

# iphone - 在滚动视图效果中出现带有动画的图像

> ID：13826166
> 
> 赞同：0
> 
> 时间：2012-12-11T18:23:23.457
> 
> 标签：iphone, objective-c, ios, uiscrollview, uiimageview

不知道有没有人知道这个效果。但是，我有时在应用程序中看到，如果我向下滚动，`ScrollView`一些图像会通过`alpha`动画出现，而我很少看到图像出现。我有一个`scrollView`大约 30 张图片。

是否有可能对我产生这种影响，`scrollView`因为我不知道它是否也能解决我的问题。

我的问题是`view`一次加载这么多图片，有时会崩溃`iPod touch 4G`。所以我的想法不是给我`scrollview`这个很棒的效果，也许可以减少崩溃的低谷。如果有人可以给我看一个样品，我会很高兴。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:32:06.807

好的，所以首先你应该考虑使用表格视图而不是滚动视图，因为我认为你想要实现的看起来更像是一个图像列表而不是其他任何东西，是的，这是存在的，并且有苹果提供的示例代码向您展示如何做到这一点，称为 TableviewPlayground。

其次，你是如何加载图像的？表格视图基本上是一个“惰性”视图，您加载屏幕上的数据，而不是数据源中的其余数据..

查看 tableview 数据源协议并正确实现方法和

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

尤其。

[UITableViewDatasource 协议参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITableViewDataSource)

# apache - 将 URL 重写为子域

> ID：13826170
> 
> 赞同：0
> 
> 时间：2012-12-11T18:23:34.923
> 
> 标签：apache, rewrite

我有一个 joomla 安装站点。我有很多指向 mysite.com/user/... 的链接我想在 .htaccess 中添加一个规则来重写 mysite.com/user/everything 和 mysite.com/user/everything/.../everything 等等，到 user.mysite.com/everything 等等。在 RewriteEngine On 之后，我在 joomla 的 .htaccess 顶部使用了以下内容。但它不起作用。

`RewriteRule ^user/(.*)$ user.zagrosdata.com/$1 [L]` ]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:02:37.717

如果你想要一个*外部*重定向，你可以在前面加上 http(s)://，使用`R=301/R=302`标志，或者更有可能/干净：两者：

```
RewriteRule ^user/(.*)$ http://user.zagrosdata.com/$1 [L,R=301] 
```

# php - 如何在子 php 页面中显示信息，例如 ?info=ID php 页面

> ID：13826176
> 
> 赞同：0
> 
> 时间：2012-12-11T18:23:51.590
> 
> 标签：php, mysql, sql

我想要做的是显示我目前在我的 Puchase 表中的所有购买。我想要它，以便它显示它所做的购买项目，但是，我试图让它看起来像这样：

购买项目 1

单击以获取更多信息链接到 ?info=ID 并显示其余信息

这是我目前拥有的代码：

```
<?php
$sql="SELECT PurchaseID, FrameNumber, Date From Purchase WHERE Email = '$id'";
$purchases = mysqli_query($con, $sql);
while(list($purchaseid, $framenumber, $date) = mysqli_fetch_row($purchases)){           
                echo "
                <table width=\"100%\">
                <tr>
                <th>PurchaseID:</th>
                <th>Date Of Purchase:</th>
                <th>FrameNumber:</th>
                <th>More Details</th>
                </tr>
                <tr>
                <td>$purchaseid</td>
                <td>$date</td>
                <td>$framenumber</td>
                <td><a href=\"myaccount.php?info=$framenumber\">Click Here</a></td>
                </tr>
                </table>";
$info = $_GET['info'];
if($info){
$fnumber = mysqli_query($con, "SELECT BikeCode FROM BikeStock WHERE FrameNumber = '$info'");
while(list($bikecodes) = mysqli_fetch_row($fnumber)){   

$bikes = mysqli_query($con, "SELECT * From Bike WHERE BikeCode = '$bikecodes' LIMIT 1");
while(list($bikecode, $manufacturer, $model, $subtype, $year, $fmaterial, $desc, $gender, $type, $price, $stock) = mysqli_fetch_row($bikes)) {
    echo "<table><tr><th>BikeCode:</th>
          <th>Manufacturer:</th>
          <th>Model:</th>
                    <th>FrameMaterial:</th>
          <th>Year:</th>
          </tr>
          <tr>
          <td>$bikecode</td>
          <td>$manufacturer</td>
          <td>$model</td>
          <td>$fmaterial</td>
          <td>$year</td>
          </tr>
          <tr><th>Description:</th><td colspan=\"4\">$desc</td></tr>
          <tr><th>Bike Images:</th><td colspan=\"4\">
          <div id=\"gallery\">";

    $sql = "SELECT SourcePath, Description FROM BikeImages where bikecode = '$bikecode'";
    $result = mysqli_query($con, $sql) or die('Query2 failed: ' . mysqli_error($con));
    while(list($sourcepath, $description) = mysqli_fetch_row($result)) {
          echo "<a class=\"gallery\" href=\"$sourcepath\" title=\"$description\"><img src=\"$sourcepath\" width=\"72\" height=\"72\" /></a>";
    }
echo "</div></td></tr></table>";
}
}
}
}
?> 
```

编辑：我目前遇到的问题是，当我点击更多信息时，它会显示所有三个项目的所有信息，而不仅仅是一个。我已将 SQL 限制为仅获取一个产品，但是，即使它不是正确的产品，它也只是在另一个购买 ID 上重复该产品。

我的当前输出如下所示：

购买项目 1：

显示信息

购买项目 2：

信息显示即使我不想显示它，我只想显示购买项目 1 的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:30:40.843

你需要写`if`如下

```
if($info && $info==$framenumber){
...
} 
```

# python - 你如何控制用户通过 Django 应用程序的“路径”？

> ID：13826177
> 
> 赞同：0
> 
> 时间：2012-12-11T18:23:54.160
> 
> 标签：python, django, web-applications

我有一个 Django 应用程序，我想保证一个新注册的用户已经通过并提交了一组 3 页的表单。我想控制他访问任何其他网址的能力，直到他完成这些表格。页面序列是在`User`创建实例之后出现的，因为我使用[django-social-auth](https://github.com/omab/django-social-auth)进行 Facebook 身份验证。

我可以想象创建一个中间件类，其中模型用于记录他已完成的步骤，并在他尝试访问任何其他 url 时将他重定向到下一个所需步骤。如果这 3 个页面上需要任何 ajax 端点的例外 url，则需要一个白名单。这感觉是一种不好的实现方式。有哪些替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:14:10.000

只需将“ `process_completed`”或类似变量存储到`True`一个检查此变量的中间件中并进行布尔检查。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-11T18:48:52.847

我会创建一个 python 装饰器来控制它。

# php - 如何生成区域语言pdf？

> ID：13826187
> 
> 赞同：0
> 
> 时间：2012-12-11T18:24:12.003
> 
> 标签：php, html, pdf-generation

我使用 html 到 PDF php 脚本生成英语 html 到 PDF。但是进入区域语言它显示字符串错误。我只使用 utf-8。是否有任何其他脚本用于区域语言

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:26:02.447

不同的区域语言有多种编码类型。互联网说很难检测到任何给定文档的编码。您最好的选择是相信 Firefox 会告诉您使用哪种编码。我在[搜索时发现](https://www.google.com/webhp?sourceid=chrome-instant&ion=1&ie=UTF-8#hl=en&newwindow=1&safe=off&tbo=d&output=search&sclient=psy-ab&q=how%20to%20find%20out%20encoding%20of%20a%20language&oq=&gs_l=&pbx=1&fp=2c234cd90c8a9f5c&bpcl=39650382&ion=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.1354675689,d.bmk&biw=1920&bih=955)[了这个](http://codeftw.blogspot.in/2009/07/how-to-find-character-encoding-of-text.html)。

# windows - 在 win-bash 中找不到 shopt

> ID：13826189
> 
> 赞同：1
> 
> 时间：2012-12-11T18:24:24.010
> 
> 标签：windows, bash, win-bash

我正在尝试使用 win-bash 来让脚本在 mac 和 windows 上运行，但 shopt 似乎丢失了。我正在尝试运行

```
shopt -s expand_aliases 
```

有没有办法在 win-bash 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T09:05:27.743

win-bash 没有等价的 expand_aliases；因此，当 shell 不是交互式的时，不能使用别名。

您可以使用函数，例如

```
function name { command $* } 
```

代替

```
alias name=command 
```

# google-drive-api - Google Drive Google Doc 文件类型图标

> ID：13826191
> 
> 赞同：1
> 
> 时间：2012-12-11T18:24:34.913
> 
> 标签：google-drive-api

在 Googel Drive SDK 的文档中讨论了 Google Drive 图标，但是显示来自 Google Doc 类型的不同文件类型所需的图标呢？谷歌电子表格图标、谷歌演示图标等？是否可以在我们的 Google Drive Android 客户端中获取并使用它们？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:41:42.917

虽然目前不可用（抱歉），但这些即将推出（耶）！

ps 现在您可能可以从 Drive 客户端 .ico 文件中提取它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:45:50.487

但文件/文件夹元数据还包含*iconLink*字段，您可以在其中下载项目图标。

例如

{

```
 "kind": "drive#file",

 "iconLink": "https://ssl.gstatic.com/docs/doclist/images/icon_10_excel_list.png", 
```

}

# php - 将字符串化的 json 结构转换为 PHP 数组

> ID：13826195
> 
> 赞同：6
> 
> 时间：2012-12-11T18:24:42.777
> 
> 标签：php, arrays, json, serialization, stringify

我正在保存一个带有 json 数据的 cookie。回声示例`$_COOKIE['data']`

> [{\"date\":1355249777,\"title\":\"junior\"},{\"date\":1355249747,\"title\":\"christopher\"},{\"date\ ":1355249139,\"title\":\"melfi\"},{\"date\":1355249123,\"title\":\"tony\"},{\"date\":1355248876,\"标题\":\"卡梅拉\"},{\"日期\":1355248859,\"标题\":\"草地\"}]

数据是纯javascript，然后传递`JSON.stringify`并存储在cookie中。现在我需要将其转换为 php 数组。我尝试了一种`json_decode`方法，但它返回 null。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-11T18:27:33.213

尝试

`json_decode(stripslashes($_COOKIE['data']));`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-06-02T18:42:54.873

对上述答案的一个小修复（尚无法评论）......

```
json_decode(stripslashes($_COOKIE['data']),true); 
```

否则你可能会得到[stdClass](http://php.net/manual/en/reserved.classes.php)错误

# tsql - View 的条件 CASE 语句

> ID：13826198
> 
> 赞同：0
> 
> 时间：2012-12-11T18:24:55.727
> 
> 标签：tsql, case

我需要帮助为视图编写 CASE 语句，该语句根据不同列的值以不同方式转换列。例如：

```
 CASE b.Column1 WHEN 1 THEN 'No' ELSE 'Yes' END AS Yes_or_No 
```

这很棒，它将 Column1 从另一个表转换为名为“Yes_or_No”的列，当 Column1 为 1 时显示“No”，当 Column1 为“0”或 NULL 时显示“Yes”。

问题是，我希望仅当视图中的另一列 Column2 具有名为“Dev”的值时才会发生这种情况。因此，如果 Column2 的值为“Dev”，则上面的 CASE 语句应该生效。如果 Column2 的值为“Test”或“Prod”，那么我希望“Yes_or_No”为 NULL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:28:34.343

```
CASE b.Column1 WHEN column2 <> 'dev' then null 
when 1 THEN 'No' 
ELSE 'Yes' END AS Yes_or_No 
```

[参考](http://msdn.microsoft.com/en-us/library/ms181765.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:30:27.513

一个简单的方法是嵌套 case 语句：

```
CASE WHEN Column2 = 'Dev' THEN
       case b.Column1 when 1 then 'No' else 'Yes' end
     WHEN Column2 in (  'Test', 'Prod' ) THEN 
       Null 
END  AS Yes_or_No 
```

为了提高可读性，我在大写外部`case`和小写内部写了一个。

# c# - 更好的 PixelFormat.ToString 输出

> ID：13826200
> 
> 赞同：-1
> 
> 时间：2012-12-11T18:24:57.370
> 
> 标签：c#, winforms, image, system.drawing, pixelformat

System.Drawing.Imaging 命名空间中的[PixelFormat枚举具有](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.pixelformat.aspx)*Format32bppArgb*或*Format8bppIndexed*等成员，这些成员在调用其*ToString*方法时会显示。

您是否知道将 PixelFormat 值转换为更适合在图形程序中显示的字符串的内置方法或其他方法，例如*24 BPP*或*24bpp*？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:34:44.977

尝试类似我快速拼凑的这种扩展方法：

```
public static string ToFancyString(this PixelFormat format)
{
    switch (format)
    {
        case PixelFormat.Format16bppArgb1555:
            return "16bpp ARGB";
        case PixelFormat.Format16bppGrayScale:
            return "16bpp Gray";
        case PixelFormat.Format16bppRgb555:
            return "16bpp RGB";
        case PixelFormat.Format16bppRgb565:
            return "16bpp RGB";
        case PixelFormat.Format1bppIndexed:
            return "1bpp Indexed";
        case PixelFormat.Format24bppRgb:
            return "24bpp RGB";
        case PixelFormat.Format32bppArgb:
            return "32bpp ARGB";
        case PixelFormat.Format32bppPArgb:
            return "32bpp Premultiplied ARGB";
        case PixelFormat.Format32bppRgb:
            return "32bpp RGB";
        case PixelFormat.Format48bppRgb:
            return "48bpp RGB";
        case PixelFormat.Format4bppIndexed:
            return "4bpp Indexed";
        case PixelFormat.Format64bppArgb:
            return "64bpp ARGB";
        case PixelFormat.Format64bppPArgb:
            return "64bpp Premultiplied ARGB";
        case PixelFormat.Format8bppIndexed:
            return "8bpp Indexed";
        default:
            return format.ToString();
    }
} 
```

# c++ - 使用 .eof() 方法的无限循环

> ID：13826201
> 
> 赞同：-3
> 
> 时间：2012-12-11T18:25:00.957
> 
> 标签：c++, loops, eof, infinite

我正在尝试做关于专辑项目的 C++ 练习。基本上，我需要有 4 个类，即：Duration、Track（持续时间对象 + 曲目标题）、Album（艺术家姓名、专辑标题和我的 Track 对象的集合）和 AlbumCollection（只有专辑对象的集合）是可变的。

我确实通过从键盘分配值或给定值来测试所有类，它们都可以工作。但是，当我尝试让他们读取 txt 文件时。它只是在专辑 collection.app 中不断循环，永不停止。我知道我的问题出在 >> 运算符上，以及我是否对故障位做错了。但是，我真的不知道我应该怎么做才能解决这个问题。

这是我在 Duration 对象中的 >> 运算符

```
inline std::istream& operator >> (std::istream& is, Duration& f)
{
    char c;
    int h,m,s;

if (is >> h >> c >> m >> c >> s){
    if (c==':'){
        f = Duration (h,m,s);
    }
    else{
        is.clear(std::ios_base::failbit);
    }
} else{
    is.clear(std::ios_base::failbit);
}
return is; 
```

}

这是我在 Track 对象中的 >> 运算符

```
istream& operator>>(istream& is, Track& t){
    Duration duration;
    char trackTitle[256];
    char c1;

if (is>>duration>>c1){
        is.getline(trackTitle,256);
        t = Track(duration,trackTitle);

}
    else{
        is.clear(ios_base::failbit);
    }
return is; 
```

}

这是专辑类中的 >> 运算符

```
istream& operator>>(istream& is, Album& album){
    char artistName[256];
    char albumTitle [256];
    vector<Track> trackCollection;
    Track track;

is.getline(artistName, 256, ':');
is.getline(albumTitle, 256);

while ((is>>track) && (!is.fail())){

    trackCollection.push_back(track);
}

album = Album(artistName,albumTitle,trackCollection);

if (is.eof()){
    is.clear(ios_base::failbit);
    is.ignore(256,'\n');
}
else{
    is.clear();
}

    return is; 
```

}

这是我在 AlbumCollection 类中的 >> 运算符

```
std::istream& operator>>(std::istream& is,AlbumCollection& albumCollection){
    Album album;

vector<Album>albums;
    while (is>>album) {

        albumCollection.addAlbum(album);
    }

    return is; 
```

}

```
and the format of the input file .txt is: 
The Jimi Hendrix Experience: Are you Experienced? 
0:03:22 - Foxy Lady
0:03:32 - Highway Chile
Pink Floyd: Dark Side of the Moon
0:01:30 - Speak to Me
0:02:43 - Breathe 
```

你能帮我吗？我确实尽力解决了，但我仍然无法做到这一点:(((((

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:04:26.027

问题出`operator>>`在`Album`. 该操作员尝试读取尽可能多的磁道，直到`Track operator>>`发出读取失败的信号。之后，`Album operator>>`重置流的失败状态。通过不断地重置流的失败状态，即使无法读取艺术家姓名或专辑标题，操作员也无法发出已用尽所有专辑的信号。

由于在文件中存储时通常无法判断“X 集合”的结束位置，因此习惯上将预期数量的项目存储在实际项目之前。为此，您需要将文件格式更改为（例如）：

```
2
The Jimi Hendrix Experience: Are you Experienced? 
2
0:03:22 - Foxy Lady
0:03:32 - Highway Chile
Pink Floyd: Dark Side of the Moon
2
0:01:30 - Speak to Me
0:02:43 - Breathe 
```

如果更改文件格式不是一个选项，如果没有艺术家和/或专辑可供阅读，您还可以更改`operator>>`for`Album`以提早退出。

# python - 初学者python列表补全，查找索引

> ID：13826202
> 
> 赞同：-1
> 
> 时间：2012-12-11T18:25:02.513
> 
> 标签：python, list, indexing

我有以下代码，我想要所有 1 的索引位置：

```
mylist = ['0', '0', '1', '1', '0']

for item in mylist:
    if item is '1':
        print mylist.index(item) 
```

有人可以解释为什么这个程序的输出是 2, 2 而不是 2, 3 吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T18:26:09.447

python builtin [enumerate](http://docs.python.org/2/library/functions.html#enumerate)返回索引和元素的元组。您只需要遍历枚举元组并仅过滤那些与搜索条件匹配的元素

```
>>> mylist = ['0', '0', '1', '1', '0']
>>> [i for i,e in enumerate(mylist) if e == '1']
[2, 3] 
```

现在回到你的代码。你需要了解三个问题

1.  Python list 方法 index 返回干草中第一次出现针的位置。因此在 mylist 中搜索 '1' 将始终返回 2。您需要缓存以前的索引并使用它进行后续搜索
2.  您的缩进不正确，您的打印应该在`if`块内
3.  您的使用`is`不正确。`is`不检查相等性，而只是验证两个元素是否具有相同的引用。虽然在这种情况下它会起作用，但最好避免。

    ```
    >>> index = 0
    >>> for item in mylist:
        if item == '1':
            index =  mylist.index(item, index + 1)
            print index

    2
    3 
    ```

最后，为什么要在枚举时担心使用索引。

```
>>> for index, item in enumerate(mylist):
    if item == '1':
        print index

2
3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T18:27:14.207

这是因为`mylist.index(item)`是一个查找`item`数组中第一次出现的索引的函数；也就是说，您可以调用`mylist.index('1')`并立即获取索引 2，甚至无需将其置于循环中。

您想要执行类似的操作，其中 enumerate 在遍历循环时启动从零开始的索引：

```
mylist = ['0', '0', '1', '1', '0']

for i,item in enumerate(mylist):
    if item == '1':
        print i 
```

# mysql - 从标签中获取相关行（慢查询）

> ID：13826204
> 
> 赞同：4
> 
> 时间：2012-12-11T18:25:19.387
> 
> 标签：mysql, performance

我正在为文章（myisam）使用 2 表标记系统，并且根据当前正在查看的文章的标签和 category_id 获取相关文章的查询太慢：

```
CREATE TABLE `tags` (    
    `article_id` int(11) NOT NULL DEFAULT '0',
    `tag` varchar(99) NOT NULL DEFAULT '',
    PRIMARY KEY (`article_id`,`tag`),
    KEY `tag_ix` (`tag`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1;

CREATE TABLE `articles` ( 
    `article_id` int(11) NOT NULL AUTO_INCREMENT,
    `title` varchar(255) NOT NULL DEFAULT '',
    `content` text NOT NULL,
    `category_id` int(11) NOT NULL,
    `tags` varchar(255) NOT NULL DEFAULT '',
    `status` tinyint(2) NOT NULL DEFAULT '0',
    PRIMARY KEY (`article_id`), 
    KEY `status` (`status`),
    KEY `csd` (`category_id`,`status`,`article_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1; 
```

根据标签和类别 ID 查询获取相关文章：

```
SELECT 
ta.tag, ta.article_id, ar.article_title
FROM 
tags ta 
INNER JOIN tags tb ON ta.tag = tb.tag AND tb.article_id <> ta.article_id
INNER JOIN articles ar ON tb.article_id = ar.article_id
WHERE
ta.article_id = $currentArticleId AND ar.category_id = $currentCategoryId AND ar.status = 1 
```

如果我查找 a​​r.category_id 和 ar.status，查询速度很快（0.001 而不是 0.8 秒）。

有什么办法可以加快这个速度吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T04:25:34.497

为了回答我自己的问题，我通过在文章表上为 category_id 添加索引并在查询中使用索引提示来解决此问题：

```
SELECT 
ta.tag, ta.article_id, ar.article_title
FROM 
tags ta 
INNER JOIN tags tb ON ta.tag = tb.tag AND tb.article_id <> ta.article_id
INNER JOIN articles ar USE INDEX (category_id) ON tb.article_id = ar.article_id
WHERE
ta.article_id = $currentArticleId 
AND ar.category_id = $currentCategoryId 
AND ar.status = 1 
```

现在在 ~0.001 秒内执行。

# python - Python：正则表达式

> ID：13826205
> 
> 赞同：1
> 
> 时间：2012-12-11T18:25:35.583
> 
> 标签：python

我正在尝试使用正则表达式来搜索目录中的所有文件，然后最终它将更改文件的名称。

这是我到目前为止所拥有的。

```
def regExp():
    os.chdir("C:/Users/David/Desktop/Test/Files")
    files = os.listdir(".")
    for x in (files):
        inputFile = open((x), "r")
        content = inputFile.read()
        inputFile.close()
        try:
            regex_txt = ("\(;;\)")
            regex = re.compile(regex_txt)
            print (regex.findall(x)) 
```

收到以下错误消息

```
File "<module1>", line 108
    print (regex.findall(x))
                           ^ 
```

SyntaxError：解析时出现意外的 EOF

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:55:50.060

问题是你的块没有一个`except`或一个`finally`块`try`。一个单独的`try`块是没有意义的，所以 Python 坚持你有

```
try:
    your code
except SomeException:
    handle it 
```

或者

```
try:
    your code
finally:
    clean up 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-11T18:30:58.337

你应该使用：

```
re.findAll(regex,text,flags) 
```

如果你想预编译它，我认为你可以这样做：

```
 my_regex= re.compile(pattern)
 result = my_regex.match(string) 
```

# jquery - 使用 jquery tablesorter 插件，有一个下拉框选择一个项目

> ID：13826207
> 
> 赞同：3
> 
> 时间：2012-12-11T18:25:37.223
> 
> 标签：jquery, ajax, jquery-plugins, tablesorter

我创建了一个表，允许用户编辑/更正数据。该表填充得很好，并且为了使该表尽可能易于使用。我添加了下拉框，他们可以在需要更改任何信息时从中进行选择。

JS文件是：

```
for(y=0;y<data.defect2.length; y++) {
    myselectoptions += '<option value="'+data.defect_id[y]+'"' +
        (data.defect_id[y]==data.defect[y] ? ' selected="selected"' : '') + 
        '>'+data.defect2[y]+'</option>';
}

if (data.isbn2 === null) {
    $("#inventoryUpdate").append('<tr><td>No Records Found</td></tr>');
} else {
    for(var x=0;x<data.isbn2.length;x++) {
        $("#inventoryUpdate").append('<tr><td id="tableSKU">'+data.sku[x]+'</td><td id="tableISBN">'+data.isbn2[x]+
        '</td><td id="tableQuantity">'+data.quantity[x]+
        '</td><td><select id="tableDefect">'+myselectoptions+//'" selected="'+data.defect[x]+'">'+myselectoptions2+
        '"</select></td><td><select id="tableSource">'+sourceoptions+
        '"</select></td><td><select id="tableFeature">'+featureoptions+
        '"</select></td><td><select id="tableWater">'+wateroptions+
        '"</select></td><td><select id="tableLocation">'+locationoptions+
        '"</select></td><td><input type="text" id="tableProcessDate" value="'+data.processDate[x]+
        '"/></td><td><select id="tableBookType">'+bookoptions+
        '"</select></td><td><select id="tableCreatedBy">'+useroptions+
        '"</select></td><td><select id="tableModifiedBy">'+useroptions+
        '"</select></td></tr>');
    }

    $("#inventoryUpdate").trigger("update");
} 
```

这一切都有效，除了我不能让它默认为数据库查询中的选定项目。选择的项目是表中最后一个项目的值。关于如何做到这一点或不可能做到的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:04:22.340

我建议不要在初始渲染期间尝试添加`selected`属性，而是建议在之后运行它。像这样的东西：

```
var selectedValue = 'option[value="'+data.defect_id[y]+'"]';
$('#tableDefect').find(selectedValue).attr("selected",true).end(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T14:53:09.200

您可以使用类似于以下的代码设置该值：

**工作示例：http:** [//jsfiddle.net/fwsyL/](http://jsfiddle.net/fwsyL/)

**HTML**

```
<select id="Options">
    <option value="1">Value 1</option>
    <option value="2">Value 2</option>
    <option value="3">Value 3</option>
    <option value="4">Value 4</option>
    <option value="5">Value 5</option>
</select>
<br />
<input id="TextSet" type="text" value="" style="width:50px;"/> 
<input id="ButtonSet" type="button" value="Set" style="width:50px;"/>​ 
```

**jQuery**

```
$('#ButtonSet').click(function() {
    $('#Options option[value="' + $('#TextSet').val() + '"]').attr("selected",true).end();
}); 
```

这只是您可能找到解决方案的另一种方式。一旦我得到更多信息。从您那里，我可以提供特定于您的代码的答案。​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T14:08:55.740

好吧，它花了一些时间，但我终于想通了。我需要把

```
for(y=0;y<data.defect2.length; y++) {
     myselectoptions += '<option value="'+data.defect_id[y]+'"' +
         (data.defect_id[y]==data.defect[x] ? ' selected="selected"' : '') + '>'+data.defect2[y]+'</option>';
} 
```

在里面

```
if(data.isbn2 === null){
    $("#inventoryUpdate").append('<tr><td>No Records Found</td></tr>');
} else {
    for(var x=0;x<data.isbn2.length;x++) {
        $("#inventoryUpdate").append('<tr><td id="tableSKU">'+data.sku[x]+'</td><td id="tableISBN">'+data.isbn2[x]+
            '</td><td id="tableQuantity">'+data.quantity[x]+
            '</td><td><select id="tableDefect">'+myselectoptions+//'" selected="'+data.defect[x]+'">'+myselectoptions2+
            '"</select></td><td><select id="tableSource">'+sourceoptions+
            '"</select></td><td><select id="tableFeature">'+featureoptions+
            '"</select></td><td><select id="tableWater">'+wateroptions+
            '"</select></td><td><select id="tableLocation">'+locationoptions+
            '"</select></td><td><input type="text" id="tableProcessDate" value="'+data.processDate[x]+
            '"/></td><td><select id="tableBookType">'+bookoptions+
            '"</select></td><td><select id="tableCreatedBy">'+useroptions+
            '"</select></td><td><select id="tableModifiedBy">'+useroptions+
            '"</select></td></tr>');
    }
} 
```

所以最终的产品看起来像这样：

```
if(data.isbn2 === null){
    $("#inventoryUpdate").append('<tr><td>No Records Found</td></tr>');
} else {
    for(var x=0;x<data.isbn2.length;x++) { 
        for(y=0;y<data.defect2.length; y++) {
            myselectoptions += '<option value="'+data.defect_id[y]+'"' +
                (data.defect_id[y]==data.defect[x] ? ' selected="selected"' : '') +
                '>'+data.defect2[y]+'</option>';
        } 

        $("#inventoryUpdate").append('<tr><td id="tableSKU">'+data.sku[x]+'</td><td id="tableISBN">'+data.isbn2[x]+
            '</td><td id="tableQuantity">'+data.quantity[x]+
            '</td><td><select id="tableDefect">'+myselectoptions+//'" selected="'+data.defect[x]+'">'+myselectoptions2+
            '"</select></td><td><select id="tableSource">'+sourceoptions+
            '"</select></td><td><select id="tableFeature">'+featureoptions+
            '"</select></td><td><select id="tableWater">'+wateroptions+
            '"</select></td><td><select id="tableLocation">'+locationoptions+
            '"</select></td><td><input type="text" id="tableProcessDate" value="'+data.processDate[x]+
            '"/></td><td><select id="tableBookType">'+bookoptions+
            '"</select></td><td><select id="tableCreatedBy">'+useroptions+
            '"</select></td><td><select id="tableModifiedBy">'+useroptions+
            '"</select></td></tr>');
    }
} 
```

# android - 找不到android css背景图像

> ID：13826208
> 
> 赞同：3
> 
> 时间：2012-12-11T18:25:40.787
> 
> 标签：android, css

我正在尝试为我的网页正文背景使用图像纹理。我的网页显示在 Android webview 中。

这是我的 CSS ：

```
body
{
    font-family: helvetica;
    font-size: 12px;
    color: #555555;
    padding: 10px;
    /*background-color:#000000;*/
    background-image:url(bg_header_sample.png);
} 
```

css 位于一个名为`Template.html`. 两者`Template.html`都`bg_header_sample.png`在同一个资产文件夹中：`assets/global`。

如果我取消注释这`background-color:#000000;`条线，我的身体会根据需要变成黑色。

但是使用当前的 CSS，我的身体保持透明......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:22:50.273

解决方案是以编程方式进行：

```
webView.setBackgroundResource(R.drawable.backgroundImage); 
```

正如在这个问题中解释的那样： [在 Android 中为 webview 设置背景图像](https://stackoverflow.com/questions/10280406/set-a-background-image-for-a-webview-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:28:27.093

尝试将文件名放在引号中

```
background-image:url('bg_header_sample.png'); 
```

# android - BaseAdapter + ViewHolder 不工作

> ID：13826214
> 
> 赞同：1
> 
> 时间：2012-12-11T18:26:01.043
> 
> 标签：android

嘿伙计们，我有一个视图支架 + 一个基本适配器，但它不起作用

```
public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
    ViewHolder holder;
    // get the selected entry
    AI entry = (AI) mListAppInfo.get(position);

    // inflate new layout if null
    if(v == null) {           
        holder = new ViewHolder();
        v = inflater.inflate(R.layout.list, null);

        holder.position = position;
        holder.title = (TextView)v.findViewById(R.id.tvName);
        holder.icon = (ImageView)v.findViewById(R.id.ivIcon);
        holder.iconimg = entry.icon;

        new ThumbnailTask(position, holder)
        .executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, null);

        v.setTag(holder);   
    }else{
        holder = (ViewHolder) v.getTag();
    }

    holder.title.setText(entry.title);

    // return view
    return v;
} 
```

列表中的项目没有显示任何我做错了什么？

编辑这是全班

```
public class AIAdapter extends BaseAdapter {
    private Context mContext;
    private List<?> mListAppInfo;
    private LayoutInflater inflater;

    public AIAdapter(Context c, List<?> list, PackageManager pm) {
        mContext = c;
        mListAppInfo = list;
        inflater = LayoutInflater.from(mContext);
    }

    @Override
    public int getCount() {
        return mListAppInfo.size();
    }

    @Override
    public Object getItem(int position) {
        return mListAppInfo.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressWarnings("null")
    @Override
    public View getView(int position, View v, ViewGroup parent) {
        ViewHolder holder;
        // get the selected entry
        AI entry = (AI) mListAppInfo.get(position);

        // inflate new layout if null
        if(v == null) {           
            holder = new ViewHolder();
            v = inflater.inflate(R.layout.list, null);

            holder.position = position;
            holder.title = (TextView)v.findViewById(R.id.tvName);
            holder.icon = (ImageView)v.findViewById(R.id.ivIcon);
            holder.iconimg = entry.icon;

            new ThumbnailTask(position, holder)
            .executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, null);

            v.setTag(holder);   
        }else{
            holder = (ViewHolder) v.getTag();
        }

        holder.title.setText(entry.title);

        // return view
        return v;
    }

    @SuppressWarnings("rawtypes")
    private static class ThumbnailTask extends AsyncTask{
        private int mPosition;
        private ViewHolder mHolder;
        private Rect mOldBounds = new Rect();

        public ThumbnailTask(int position, ViewHolder holder) {
            mPosition = position;
            mHolder = holder;
        }

        @Override
        protected Drawable doInBackground(Object... arg0) {
            Drawable icon = mHolder.iconimg;

            int width = 64;
            int height = 64;

            final int iconWidth = icon.getIntrinsicWidth();
            final int iconHeight = icon.getIntrinsicHeight();

            if (icon instanceof PaintDrawable) {
                PaintDrawable painter = (PaintDrawable) icon;
                painter.setIntrinsicWidth(width);
                painter.setIntrinsicHeight(height);
            }

            if (width > 0 && height > 0 && (width < iconWidth || height < iconHeight)) {
                final float ratio = (float) iconWidth / iconHeight;

                if (iconWidth > iconHeight) {
                    height = (int) (width / ratio);
                } else if (iconHeight > iconWidth) {
                    width = (int) (height * ratio);
                }

                final Bitmap.Config c =
                        icon.getOpacity() != PixelFormat.OPAQUE ?
                            Bitmap.Config.ARGB_8888 : Bitmap.Config.RGB_565;
                final Bitmap thumb = Bitmap.createBitmap(width, height, c);
                final Canvas canvas = new Canvas(thumb);
                canvas.setDrawFilter(new PaintFlagsDrawFilter(Paint.DITHER_FLAG, 0));
                mOldBounds.set(icon.getBounds());
                icon.setBounds(0, 0, width, height);
                icon.draw(canvas);
                icon.setBounds(mOldBounds);
                icon = new BitmapDrawable(thumb);
            }

            return icon;
        }

        protected void onPostExecute(Drawable bitmap) {
            if (mHolder.position == mPosition) {
                mHolder.icon.setImageDrawable(bitmap);
            }
        }

    }
}

class ViewHolder{
    public int position;
    public TextView title;
    public ImageView icon;
    public Drawable iconimg;
} 
```

我不知道我做错了什么。所有 entry.title 和 entry.icon 都有数据。虽然列表视图上没有显示任何内容。布局列表确实有一个 imageview 和 textview。这在没有查看器的情况下有效，但是一旦我添加了查看器，它就不会

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:36:41.983

一方面不需要创建“v”对象，你可以直接使用convertView。您是否正确覆盖了 BaseAdapter 类？例如 getCount() 方法...它是否返回 mListAppInfo.size()？

乍一看，您的方法应该有效；你可以复制/粘贴你的整个班级吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:29:39.560

应用 viewHolder 模式时，您的 ViewHolder 类需要是静态的；

现在有点离题了，你应该小心那些你经常发出的异步任务，你可能要考虑使用线程池。同样，尝试考虑 SparseArray 或 HashMap 而不是适配器中的项目列表，它们在检索给定索引处的项目时比 List 更快。

尝试在这一行设置一个刹车点：“ holder.title.setText(entry.title);” 它到达那里了吗？所有信息都正确吗？

# z3 - Z3 SMT 2.0 与 Z3 py 实施

> ID：13826217
> 
> 赞同：1
> 
> 时间：2012-12-11T18:26:20.267
> 
> 标签：z3

我正在尝试对 Z3 中具有恒定无穷大的正实数进行算术编码。我使用以下对编码成功获得了 SMT2 中的结果

```
(declare-datatypes (T1 T2) ((Pair (mk-pair (first T1) (second T2)))))
(declare-const infty (Pair Bool Real))
(assert (= infty (mk-pair true 0.)))
(define-fun inf-sum ((p1 (Pair Bool Real)) (p2 (Pair Bool Real))) (Pair Bool Real)
  ( ite
     (first p1)
     p1
     (ite
       (first p2)
       p2
       (mk-pair false (+ (second p1) (second p2)))
      )
  )
) 
```

其中一对 (true, _) 编码无穷大，而 (false, 5.0) 编码实数 5。这很有效，我可以非常快速地解决对它的约束。

我在以下数据类型上使用 z3 公理尝试了与 Z3py 类似的方法：

```
MyR = Datatype('MyR')
MyR.declare('inf');
MyR.declare('num',('r',RealSort()))

MyR = MyR.create()
inf = MyR.inf
num  = MyR.num
r  = MyR.r

r1,r2,r3,r4,r5 = Consts('r1 r2 r3 r4 r5', MyR)
n1,n2,n3 = Reals('n1 n2 n3')

msum = Function('msum', MyR, MyR, MyR)

s = Solver()

s.add(ForAll(r1, msum(MyR.inf,r1)== MyR.inf))
s.add(ForAll(r1, msum(r1,MyR.inf)== MyR.inf))
s.add(ForAll([n1,n2,n3], Implies(n1+n2==n3, 
  msum(MyR.num(n1),MyR.num(n2))== MyR.num(n3))))
s.add(msum(r2,r4)==MyR.num(Q(1,2)))
print s.sexpr()
print s.check() 
```

我无法让它工作（它超时）。我想问题在于试图证明一致性公理。但是我找不到在 Z3py 中编码我的算术的另一种方法。

有谁知道 z3py 中上述 Z3 SMT2 方法的等价物是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:14:37.200

在 Z3Py 中，您应该定义`msum`为：

```
def msum(a, b):
    return If(a == inf, a, If(b == inf, b, num(r(a) + r(b)))) 
```

这相当于您在 SMT2 前端所做的。在你这样做并删除通用公理之后，Z3Py 也会找到解决方案。

这是完整的示例（可在[http://rise4fun.com/Z3Py/Lu3](http://rise4fun.com/Z3Py/Lu3)在线获取）：

```
MyR = Datatype('MyR')
MyR.declare('inf');
MyR.declare('num',('r',RealSort()))

MyR = MyR.create()
inf = MyR.inf
num = MyR.num
r   = MyR.r

r1,r2,r3,r4,r5 = Consts('r1 r2 r3 r4 r5', MyR)
n1,n2,n3 = Reals('n1 n2 n3')

def msum(a, b):
    return If(a == inf, a, If(b == inf, b, num(r(a) + r(b))))

s = Solver()
s.add(msum(r2,r4) == MyR.num(Q(1,2)))
print s.sexpr()
print s.check()
print s.model() 
```

# android - Android - 如何在指定时间启动和停止我的服务？

> ID：13826218
> 
> 赞同：1
> 
> 时间：2012-12-11T18:26:20.953
> 
> 标签：android, android-intent, service, time, alarmmanager

我是 Android 新手，我正在尝试使用服务制作一个简单的应用程序，当我尝试启动我的服务时遇到了一些问题。我正在使用内置的 Android`TimePicker`来确定开始和结束时间。

```
//Getting start time from timePicker
Time startTime = new Time(startTimePicker.getCurrentHour(), startTimePicker.getCurrentMinute(), 0);
// Creating intent
Intent intent = new Intent(ThisClass.this, ServiceClass.class);
// Setting pendingIntent for alarmManager
PendingIntent pendingIntent = PendingIntent.getService(ThisClass.this, 0, intent, 0);
// Creating new AlarmManager
AlarmManager startAlarm = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
startAlarm.set(AlarmManager.RTC, startTime.getTime(), pendingIntent); 
```

最后一行给出了错误：“无法启动服务 Intent (flg=0x4 cmp=com.example.mainActivity/.ServiceClass (has extras))；未找到”。我不知道这是否重要，但是其中`Intent`有一个包含两个数组的捆绑包，尽管我没有复制那部分代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:40:29.970

发生此错误可能是因为您没有在清单中声明您的服务类。确保它被正确声明（[这里](https://stackoverflow.com/a/5439157/797390)例如它没有在`application`标签中声明，所以它会导致这个错误）

# flash - 操作脚本在菜单上无法正常工作

> ID：13826221
> 
> 赞同：0
> 
> 时间：2012-12-11T18:26:56.193
> 
> 标签：flash, actionscript-2

我一直在为朋友制作基于模板的 Flash 网站，但我在使用菜单时遇到了一些问题，因为当我单击其中一个链接时，有时会起作用，有时却不起作用。

网站： http: [//frrichardsonfeliz.com](http://frrichardsonfeliz.com)

源文件： http: [//frrichardsonfeliz.com/fla/rfelix_test.rar](http://frrichardsonfeliz.com/fla/rfelix_test.rar)

如您所见，即使翻转也无法正常工作。

我已经为此苦苦挣扎了一个星期，我不知道该怎么办了。任何帮助将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:27:43.907

我观察了网页，我的想法是当您在菜单项立即单击后单击菜单项时它不起作用。那么为什么会出现这样的问题呢？

大多数 Flash 模板是逐帧构建的，当您单击菜单项 Flash 播放电影时，您会丢失具有鼠标单击事件侦听器的帧，直到动画停止。因此，您可以将这些事件侦听器手动添加到这些帧中。或者您可以创建包含整个帧的新层，您可以将事件侦听器添加到该帧，但它可能会产生冲突。

# java - 异常：java.security.AccessControlException：访问被拒绝（“java .net.SocketPermission”“127.0.0.1:1099”“connect,resolve”）

> ID：13826223
> 
> 赞同：1
> 
> 时间：2012-12-11T18:27:05.743
> 
> 标签：java, rmi, rpc, corba, access-denied

我正在尝试使用以下代码执行示例 RMI APPLICATION

* * *

```
/* DemoInterface.java*/ //STEP-1  
//Create the remote interface  
import java.rmi.Remote;   
import java.rmi.RemoteException;   
public interface DemoInterface extends Remote  
{  
    public String SayDemo() throws RemoteException;  

} 
```

* * *

```
 import java.rmi.Naming;
    import java.rmi.registry.LocateRegistry;
    import java.rmi.registry.Registry;
    public class DemoClient 
    {
        public static void main (String[] args)
        {
            if (System.getSecurityManager() == null)
            {
                System.setSecurityManager(new SecurityManager());
            }
            try
            {
                Registry reg = LocateRegistry.getRegistry(args[0]);      
                DemoInterface h = (DemoInterface) reg.lookup("f1");
                System.out.println (h.SayDemo());
            }
            catch (Exception e)
            {
                System.out.println ("DemoClient exception: " + e);
            }
        }
    }  

----------

import java.rmi.server.UnicastRemoteObject;
import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;
import java.rmi.RemoteException;
public class DemoServer implements DemoInterface
{
    private String message;
    public DemoServer() 
    {
           super();
    }
    public DemoServer(String msg) throws RemoteException
    {
        message = msg;
    }
    public String SayDemo() throws RemoteException
    {
        return message;
    }
    public static void main (String[] argv) 
    {
        try
        {   DemoInterface h = new DemoServer("Advance jAVA");
            DemoInterface stub = (DemoInterface)   UnicastRemoteObject.exportObject(h, 0);
            Registry reg = LocateRegistry.getRegistry();
            reg.rebind ("f1", stub);
            //System.out.println ("Server is connected and ready for  operation.");
        } 
        catch (Exception e)
        {
          System.out.println("Server not connected: " + e);
        }
    } 
} 
```

* * *

## 客户政策

```
grant codeBase "file:/RMI/DemoWorld/"
{
    permission javsecurity.AllPermission;
}; 
```

* * *

## 服务器策略

```
grant codeBase "file:/RMI/DemoWorld/"
{
    permission javsecurity.AllPermission;
}; 
```

要运行应用程序，我遵循以下给定步骤

1.  -启动 rmiregistry
2.  java -cp D:\RMI\DemoWorld; Djava.rmi.server.codebase=file:/D/RMI/DemoWorld/ -Djava.rmi.server.hostname=127.0.0.1 -Djava.security.policy=server.policy DemoServer

3.  java -cp D:\RMI\DemoWorld; -Djava.rmi.server.codebase=file:/RMI/DemoWorld/ -Djava.security.policy=client.policy DemoClient 127.0.0.1
    但我收到以下错误

DemoClient 异常：java.security.AccessControlException：访问被拒绝（“java .net.SocketPermission”“127.0.0.1:1099”“connect,resolve”）

# ruby-on-rails - 使用 Net/HTTP 创建特定的 cURL

> ID：13826224
> 
> 赞同：0
> 
> 时间：2012-12-11T18:27:07.843
> 
> 标签：ruby-on-rails, ruby, riak

我有这个 cURL 可以从终端正常运行，但我需要它是动态的，所以我需要从我的模型中进行这个调用。

```
curl -XPUT -H "content-type:application/json" http://localhost:8098/riak/demo2 -d '{"props":{"precommit":[{"mod":"riak_search_kv_hook","fun":"precommit"}]}}' 
```

这是我到目前为止得到的，但它不起作用，没有错误并且响应为空。我不希望返回任何东西，但这应该会创建一个新的`Riak`存储桶，但它不会。正如我所说，我已经在我的终端上进行了测试，它工作正常，它按预期创建了存储桶。

```
require "net/http"
require "uri"

uri = URI.parse("http://localhost:8098/riak/dg1_logs")

http = Net::HTTP.new(uri.host, uri.port)

request = Net::HTTP::Post.new(uri.request_uri)
request.content_type = "application/json"
request.body = '{"props":{"precommit":[{"mod":"riak_search_kv_hook","fun":"precommit"}]}}'

response = http.request(request)

p response.body 
```

**更多细节**

我正在使用`Riak`，我需要`Riak Search`在我的客户端存储桶上启用它，并且只能运行这个 cURL。我需要让它动态化，所以当我的客户创建一个新帐户时，我已经让他的存储桶能够`Search`

我正在使用 Ruby 1.9.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:22:40.587

我认为问题可能出在 curl 示例中，您在 ruby​​ 示例中使用了 HTTP *PUT*和*POST 。*

[顺便说一句，如果你使用了像RestClient](https://github.com/archiloque/rest-client)这样的东西，你会省去一些痛苦——比 net/http API 更容易使用。

最后，我认为从模型发出 HTTP 请求不是一个好主意（假设您的意思是 AR 模型），您可能应该创建一个单独的对象来为您处理它。

# iphone - 弹跳按钮

> ID：13826233
> 
> 赞同：1
> 
> 时间：2012-12-11T18:27:46.543
> 
> 标签：iphone, ios, uibutton

我没有在互联网上找到任何解决方案，所以我决定在这里问我的问题。有一个很酷的动画效果，你可以用一个按钮来制作，如果你点击它，它会像弹出一样跳跃和降落。如果你明白我的意思。我的意思是，如果你击中地板一次，按钮会像橡皮球一样弹跳。我在许多不同的游戏应用程序上看到了这种效果，并想在我的应用程序中这样做。这实际上就像让按钮变大，如果被点击，它会立即变小。有人知道怎么做这个吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:34:27.710

查看[此博客](http://danielsaidi.wordpress.com/2012/09/03/ios-bounce-animation/)，该博客描述了图标上的弹跳效果。这应该会引导你走向正确的方向。还[可以查看这个 lantean 博客](http://www.lantean.com.ar/coreanimation-bounce-animation-like-camera-button/)和[这个 cocoanetics 博客。](http://www.cocoanetics.com/2012/06/lets-bounce/)

这是他正在使用的代码，

```
+ (CAKeyframeAnimation*)dockBounceAnimationWithViewHeight:(CGFloat)viewHeight
{
    NSUInteger const kNumFactors    = 22;
    CGFloat const kFactorsPerSec    = 30.0f;
    CGFloat const kFactorsMaxValue  = 128.0f;
    CGFloat factors[kNumFactors]    = {0,  60, 83, 100, 114, 124, 128, 128, 124, 114, 100, 83, 60, 32, 0, 0, 18, 28, 32, 28, 18, 0};

    NSMutableArray* transforms = [NSMutableArray array];

    for(NSUInteger i = 0; i < kNumFactors; i++)
    {
        CGFloat positionOffset  = factors[i] / kFactorsMaxValue * viewHeight;
        CATransform3D transform = CATransform3DMakeTranslation(0.0f, -positionOffset, 0.0f);

        [transforms addObject:[NSValue valueWithCATransform3D:transform]];
    }

    CAKeyframeAnimation* animation = [CAKeyframeAnimation animationWithKeyPath:@"transform"];
    animation.repeatCount           = 1;
    animation.duration              = kNumFactors * 1.0f/kFactorsPerSec;
    animation.fillMode              = kCAFillModeForwards;
    animation.values                = transforms;
    animation.removedOnCompletion   = YES; // final stage is equal to starting stage
    animation.autoreverses          = NO;

    return animation;
}

- (void)bounce:(float)bounceFactor
{
    CGFloat midHeight = self.frame.size.height * bounceFactor;
    CAKeyframeAnimation* animation = [[self class] dockBounceAnimationWithViewHeight:midHeight];
    [self.layer addAnimation:animation forKey:@"bouncing"];
} 
```

# jsf - 由于多部分，JSF Viewscope bean 过早死亡

> ID：13826236
> 
> 赞同：1
> 
> 时间：2012-12-11T18:27:53.837
> 
> 标签：jsf, jsf-2, primefaces, jboss7.x, mojarra

我有一个表单，它是一个多部分表单和一个 ViewScoped 支持 Bean。

当我将多部分表单提交到同一页面时，Backing Bean 被重新创建..

我希望 bean 仍然存在，因为它会处于“正常”形式。

这是一些示例代码：

```
<h:form enctype="multipart/form-data">
    <p:commandButton value="Preview2" ajax="false" />
    <p:inputText id="photolink" size="60" value="#{test.photolink}" />
</h:form> 
```

inputText 被清除。

当我使用这个时：

```
<h:form>
    <p:commandButton value="Preview2" ajax="false" />
    <p:inputText id="photolink" size="60" value="#{test.photolink}" />
</h:form> 
```

输入文本保持原样......

**有没有办法解决这种行为？**

编辑：这是整个 xhtml 不起作用：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:pe="http://primefaces.org/ui/extensions">
<h:head>

</h:head>

<h:body>

<h:form id="editArticle" enctype="multipart/form-data" acceptcharset="UTF-8">
    <p:inputText id="title" value="#{test.photolink}" />
    <p:commandButton ajax="false" value="submit" />
</h:form>
</h:body>
</html> 
```

我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">
    <display-name>atlas</display-name>

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping> 
</web-app> 
```

我的莫哈拉版本：

**Mojarra 2.1.7-jbossorg-1 (20120227-1401)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:14:41.997

我找到了一个对我来说足够好的工作方法，即使我不明白......

解决方案是通过漂亮的网址而不是通过`/faces/something.xhtml`

一个简单的漂亮规则，例如：

```
 <url-mapping id="test2"> 
      <pattern value="/test2"/> 
      <view-id value="/faces/test2.xhtml" />
  </url-mapping> 
```

为我修好了一切！

我希望有人能解释为什么会发生这种情况以及为什么漂亮的时间修复了这种奇怪的行为..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:14:49.707

我找到了我的错误，但由于我的问题不完整，没有人能找到它......

我的问题是我混合了 JSF 范围和 CDI @Named 注释。

所以我的豆子看起来像这样：

```
@Named
@ViewScoped 
```

代替

```
@ManagedBean
@ViewScoped 
```

这导致了这个线程中描述的非常奇怪的行为..

# bash - 在bash中将科学记数法转换为十进制

> ID：13826237
> 
> 赞同：7
> 
> 时间：2012-12-11T18:27:56.657
> 
> 标签：bash, decimal, notation, arithmetic-expressions

我想将一个以科学计数法存储的数字转换为浮点十进制数，这样我就可以对数据进行一些比较。这是在 bash 脚本中完成的 - 这是一小段代码：

```
while read track_id landfall_num gate_id pres_inter
do
  if [[ $landfall_num == 0001 ]]
  then
     start_flag = true
     echo DING DING $start_flag
     if [[ $pres_inter < 97000 ]]
     then
        echo Strong Storm From North $track_id, $gate_id, $pres_inter
     fi
  fi
done < $file 
```

我的问题是我的`<`操作数基本上选择了所有压力值，当我使用时，它们以科学计数法存储，而当我使用时则`<`没有`>`。我正在查看以帕斯卡而不是毫巴为单位的大气压力测量值。

这是示例输出：

```
Strong Storm From North 0039988 0017 1.0074E+05

Strong Storm From North 0037481 0018 9.9831E+04 
```

这些风暴都不应该满足选择标准！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T18:53:40.963

首先，bash 不能使用浮点算术进行算术运算。第二件事，bash 不知道科学记数法（即使是整数）。

如果您绝对肯定所有数字都是整数，您可以尝试的第一件事：将它们转换为十进制表示法：`printf`很乐意为您做到这一点：

```
printf -v pres_inter "%.f" "$pres_inter" 
```

（`%.f`四舍五入到最接近的整数）。

然后使用bash的算术：

```
if (( pres_inter < 97000 )); then .... 
```

这个解决方案很棒，不使用任何外部命令或任何子shell：速度和效率！

现在，如果您正在处理非整数，则最好使用`bc`算术运算：但是由于`bc`迟钝并且不能很好地处理科学记数法，因此无论如何您都必须将数字转换为十进制记数法。因此，应该执行以下操作：

```
printf -v pres_inter "%f" "$pres_inter"
if (( $(bc -l <<< "$pres_inter<97000") )); then ... 
```

当然，这会更慢，因为你正在分叉一个`bc`. 如果您对整数感到满意，请坚持我给出的第一种可能性。

完毕！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-05-22T12:48:56.720

我认为最好的方法是使用 awk。例如，在数字“1.0074E+05”的情况下

`echo "1.0074E+05" | awk -F"E" 'BEGIN{OFMT="%10.10f"} {print $1 * (10 ^ $2)}'`

输出：

```
100740.0000000000 
```

显然你可以使用小于十进制的精度:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T18:44:03.907

对于数字比较，您需要使用：

*   `-eq`代替`==`
*   `-ne`代替`!=`
*   `-lt`代替`<`
*   `-le`代替`<=`
*   `-gt`代替`>`
*   `-ge`代替`>=`

并修复一些语法问题：

```
while read track_id landfall_num gate_id pres_inter
do
  landfall_num=$(printf "%f", "$landfall_num")
  if [[ "$landfall_num" -eq 1 ]]
  then
     start_flag="true"
     echo "DING DING $start_flag"
     if [[ "$pres_inter" -lt 97000 ]]
     then
        echo "Strong Storm From North $track_id, $gate_id, $pres_inter"
     fi
  fi
done < "$file" 
```

**更新：**

这是将科学记数法数字转换为整数的方法：

```
printf "%.0f\n", 1.0062E+05 
```

例如，打印：

```
100620 
```

所以：

```
landfall_num=$(printf "%f", "$landfall_num") 
```

将从`landfall_num`科学记数法转换为正常的十进制整数。

# c - strcmp 不工作？

> ID：13826240
> 
> 赞同：-3
> 
> 时间：2012-12-11T18:28:05.987
> 
> 标签：c, string, strcmp

我有一个 strcmp 函数：

```
if (strcmp(userInput, "Yes") == 0) 
```

由于某种原因，它不会进入 if 语句，即使我确信用户输入肯定等于 Yes。任何人都知道有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:33:50.647

1.  确保您包含正确的标题，即`<string.h>`.
2.  如果您`userInput`来自 eg `fgets()`，请确保最后没有行终止，它会干扰这样编写的比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T18:31:36.840

为避免出现拖尾换行的麻烦，您可以只检查前 3 个字符：

```
if(strncmp(userInput, "Yes", 3) == 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T18:36:28.333

照原样，您的代码很好。那不是问题。

我怀疑你正在这样做：

```
fgets(userInput, sizeof(userInput), stdin);
if(strcmp(userInput, "Yes") == 0) 
```

这给了你一个换行符：

```
['Y']['e']['s']['\n'] 
```

您可以通过多种方式解决此问题：

```
if(strcmp(userInput, "Yes\n") == 0) 
```

应该是最简单的了。或者你可以通过 scaf 获得输入：

```
scanf("%s", userInput); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T18:54:21.023

如果需要帮助，可以进行类型转换。

```
//I am assuming usrInput is a char Array

string str(usrInput);
//string class has a constructor that takes a NULL-terminated C-string
if (str == "Yes")
{
   //do what ever you wanted to in the loop
} 
```

# git - 不要忽略 git sourcetree 中的文件

> ID：13826246
> 
> 赞同：4
> 
> 时间：2012-12-11T18:28:20.537
> 
> 标签：git, version-control, gitignore, atlassian-sourcetree

我正在从源代码树下载一个 Eclipse 项目。.project 和 .classpath 文件未签入。我希望这些签入以成功导入。我没有 gitignore 文件。谁能解释为什么这些文件没有出现？

我还查看了检查这些文件的源计算机，并且文件在那里。在该机器上的 sourcetree 版本中，它不再显示要签入的文件。

```
My exlude file looks like this:
# git ls-files --others --exclude-from=.git/info/exclude
# Lines that start with '#' are comments.
# For a project mostly in C, the following would be a good set of
# exclude patterns (uncomment them if you want to use them):
# *.[oa]
# *~
.DS_Store 
```

这似乎也不是这样。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T13:34:07.533

正如@adam-dymitruk 告诉您的那样，您的文件尚未提交到存储库，或者您忽略了它们。运行此命令：

> $ git config --get core.excludesfile

看看你得到的文件。您可能有一些排除您的 IDE 文件的模式。我知道 PHPStorm 有时会要求您在全球范围内排除他们的文件。可能有人（或 Eclipse）在您的源机器上做了同样的事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T18:32:10.820

除了 repo-local`.gitignore`文件之外，可能还会`.git/info/exclude`在 repo 的文件中指定更多忽略选项，或者在全局级别使用配置。您可能必须在发件人的机器上检查这些东西，因为那是文件所在的地方并且不会被签入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:27:49.560

您可以看到尚未提交或暂存的内容

```
git status 
```

这应该表明这些文件尚未被跟踪。您可以通过将它们添加到索引来开始跟踪它们：

```
git add .project 
```

或添加所有文件（如果您尚未定义正确的 .gitignore 则不推荐）：

```
git add . 
```

或者

```
git add -A 
```

如果您也想进行删除。

这里可能发生的另一件事是您根本看不到 .project 文件在那里。操作系统通常默认隐藏这些。采用

```
ls -A 
```

将这些类型的文件包含在目录列表中。要查看最后一次提交中存储的 git 的内容，您还可以使用

```
git ls-tree HEAD 
```

# javascript - 将成员动态添加到对象

> ID：13826252
> 
> 赞同：1
> 
> 时间：2012-12-11T18:28:50.977
> 
> 标签：javascript, node.js, socket.io

> **可能重复：**
> [循环内的 Javascript 闭包 - 简单的实际示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

我正在尝试做这样的事情：

```
var obj = function(){
    var members = ['a','b','c','d','e'];
    for(var i in members){
       inst[i] = function(){
           console.log(i);
       }
    }
}; 
```

但是当我这样做时：

```
var inst = new obj();
inst.a(); inst.b(); inst.c(); inst.d(); inst.e(); 
```

它打印出 e 5 次！此外，我可能能够引用`this`而不是使用我实例化对象的名称，但我根本无法让它工作。这背后的逻辑是使用 websockets 生成 API 模板客户端。这是一个粗略的演示，基本上完成了相同类型的事情（逻辑上），但我陷入了这个技术问题，它阻碍了我的进步。

谢谢

**编辑**

让我给出完整的问题。我不想让每个人都超载，但这些解决方案不起作用......

```
var SocketClient = function(config){
//platform specific stuff
var self = this;
var count = 0;
var socket = io.connect(config.address+':'+config.port);
var members = [];
socket.on('method',function(data){
    console.log(data.name);
    KovarApp.client[data.name] = addLogicMember(data.name);
    console.log(KovarApp.client[data.name]);
});
var addLogicMember = function(n){
    return function(config){
        var callback = null;
        if(typeof config.callback !== 'undefined'){
            var callback = config.callback;
            delete config.callback;
        }
        call({
            method: n,
            data: config,
            callback: callback
        });
    };
};
var call = function(config){
    var c = count++;
    var timer = null;
    socket.on('reply_'+c,function(data){
        if(typeof config.callback === 'function'){
            if(timer != null){
                timer.clearTimeout();
            }
            config.callback(data);
            timer = setTimeout(function(){
                socket.removeAllListeners('reply_'+c)
            },10000);
        }
    });
    config.data.handle = c; //make sure that the server has the handle for this function call
    socket.emit(config.method,config.data);
}; 
```

};

服务器向客户端发出 5 个函数：login 是第一个函数，getpatientinfo 是最后一个函数。在服务器上，我将其设置为 console.log 每个回复。如果我调用任何函数，它是console.log 的getpatientinfo，因为这是它接收到的字符串，这意味着在客户端上，每个函数都引用最后接收到的字符串(getpatientinfo)。我已经根据一些答案对其进行了更改，但它仍然无法正常工作。套接字在这里应该不是问题。问题显然是我生成成员时的前端逻辑，因为每个成员都反映了最后添加的成员。

***解决了！见下文！（这不是关闭！！！）***

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T18:35:29.020

这被称为“闭包效应”：您的每个函数都*知道*它应该处理变量 named ，但在调用时`i`会取其*当前值。*

为了解决这个问题，范围`i`也是：

```
var makeMeAFunction = function(x) {
  return function() { console.log(x); };
};
for(var i in members){
   inst[i] = makeMeAFunction(i);
} 
```

`for...in`作为旁注，使用:迭代数组通常是一个坏主意，`forEach`或者，如果您只需要支持 IE8，请使用传统`for(init; check; step)`运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:32:24.530

这应该可以解决问题：

```
function Cn () {
    var self = this;
    [ 'a','b','c','d','e' ].forEach(function ( name, i ) {
        self[ name ] = function () {
            console.log( i );
        };
    });
} 
```

*注意：[用于 IE8 的 ES5-shim](https://github.com/kriskowal/es5-shim)*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T18:35:32.180

你有一个与闭包相关的问题 - 看看[这个](http://www.mennovanslooten.nl/blog/post/62)以获得好的文章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T19:15:23.913

发现了问题，我觉得自己像个傻子！

问题出在服务器端。我正在这样做：

```
 for(var i in functions){
            socket.on(i,function(data){functions[i](data,socket,mysql)}); //create socket listeners
        } 
```

当我将其更改为：

```
 socket.on('login',function(data){functions.login(data,socket,mysql);});
        socket.on('logout',function(data){functions.logout(data,socket,mysql);});
        socket.on('getVisitInfo',function(data){functions.getVisitInfo(data,socket,mysql);}); 
```

效果很好。看起来它不喜欢循环遍历一个对象。哦，好吧，我猜是静态套接字声明！

# c - 如何打开临时文件并获取其文件名？

> ID：13826253
> 
> 赞同：5
> 
> 时间：2012-12-11T18:28:49.880
> 
> 标签：c, file, posix, temp

我需要在我的 C 程序中创建一个临时文件，向其中写入一些数据，然后调用一个外部命令（通过 exec 或 system）对我刚刚创建的文件进行一些处理。我没有编写外部命令，也无法将其集成到我的程序中，所以我认为我不能与它共享已经打开的描述符。因此，我需要知道创建的临时文件的名称。

tempname() 函数执行此操作，但不幸的是，由于获取名称和打开文件之间可能存在竞争条件，它建议您不要使用它自己，并且它推荐的函数（tmpfile 和 mkstemp）都没有提供方法找出创建的文件的实际名称。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T18:38:11.377

`mkstemp`不让你知道临时文件名是不对的，自己试试编译执行​​这个程序看看：

```
#include <stdlib.h>
#include <stdio.h>

int main()
{   
    char fn[] = "/tmp/fileXXXXXX";
    int fd = mkstemp(fn);
    char cmd[200];
    int n = snprintf(cmd, sizeof(cmd), "ls -l %s\n", fn);

    printf("snprintf=>%d\n sizeof(fn)=%d\n", n, sizeof(fn)); // extra info, see comments

    printf("%s\n", cmd);
    return system(cmd);
} 
```

`mkstemp`将用实际文件名替换您传递给它的缓冲区中的文件名模板，您可以稍后使用此缓冲区做任何您想做的事情。

# c# - 第一次没有绑定到下拉列表

> ID：13826261
> 
> 赞同：0
> 
> 时间：2012-12-11T18:29:25.813
> 
> 标签：c#, enums

我有一个国家和州的下拉列表。

虽然第一次绑定项目不是添加但在第二次刷新页面中然后它在下拉值中进行选择。

代码：

不是在页面加载一些按钮点击事件触发然后需要显示相应的值。

```
this.BindCountries();
ddlCountry.SelectedItem.Value = objAddressResponse.Country;
this.BindStates(objAddressResponse.Country);
ddlState.SelectedItem.Value = 
          ddlState.Items.Count > 1 ? objAddressResponse.State : ""; 
```

如何在第一次绑定本身？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:53:15.407

很难理解你的代码；以下是将下拉列表绑定到数据源的基本代码。

```
ddl.DataTextField = "fieldName1";  //field name for Text
ddl.DataValueField = "fieldName2"; //field name for Value
ddl.DataSource = yourDataSource; //your data source with above field names
ddl.DataBind(); //bind the data source here

//Edit: Selecting a value.
if(ddl.Items.FindByValue("yourValue") !=null){
   ddl.Items.FindByValue("yourValue").Seleted = true;
} 
```

# c# - 如果 ID 号重复，如何跳过文本文件中的行？

> ID：13826263
> 
> 赞同：1
> 
> 时间：2012-12-11T18:29:35.317
> 
> 标签：c#, file, csv, tabs

我的标准很少，例如只选择今天的记录，而且如果记录包含字母“CA”，现在我想在这两个之前添加一个标准，在其中我跳过任何基于 ID 号重复的记录。

这是我的代码

```
 private void btn_convert_Click(object sender, EventArgs e)
    {
        if ((textBox1.Text == "" )&& (textBox2.Text == ""))
        {
            MessageBox.Show("Please specify input and output");
        }

       StringBuilder csvFile = new StringBuilder();
       string temp = "";      
       // string[] file = File.ReadAllLines(@"C:\Users\Program\Desktop\test.txt");         
       string[] file = File.ReadAllLines(textBox1.Text);
       foreach (string line in file)
        {
            //here I want to add an if condition where only write the unique records based on ID number

          if ((line.Contains(DateTime.Now.ToString("MM/dd/yyyy"))) && (line.Contains("\tAU\t"))){ 
          if (line.Contains("\t"))
                 {
                temp = line.Replace("\t", ",");

                csvFile.Append(temp + "\r\n");

                continue;
                 }
            csvFile.Append(line + "\r\n");
                }
        }

    //File.WriteAllText(@"C:\Users\Program\Desktop\test.csv", csvFile.ToString());
       File.WriteAllText((textBox2.Text + "\\test.csv"), csvFile.ToString());
       MessageBox.Show("CSV file successfully created at the following location :\n" + textBox2.Text);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:35:09.653

从您的示例中，我假设您想完全排除多次出现的记录，而不是只保留它们的第一次出现？

```
file = file.Where(line => line.Contains("\t"))
           .GroupBy(line => line.Substring(0, line.IndexOf('\t')))
           .Where(g => g.Count() == 1)
           .Select(g => g.First())
           .ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T22:02:23.180

试试这个方法

```
 string x = "";
        using (StreamReader sr = new StreamReader(@"d:\test.txt"))
            x = sr.ReadToEnd();

        var mynewlist = (from v in x.Split(new string[] { "\r\n" }, StringSplitOptions.RemoveEmptyEntries)
                         let items = v.Split(new string[] { "\t" }, StringSplitOptions.RemoveEmptyEntries)
                         where items.Count() == 5
                         select new
                         {
                             ID = int.Parse(items[0]),
                             FamilyN = items[1],
                             LastN = items[2],
                             Country = items[3],
                             Date = DateTime.ParseExact(items[4], "MM/dd/yyyy", System.Globalization.CultureInfo.InvariantCulture)
                         }).GroupBy(X => X.ID).Where(X => X.Count() == 1).Select(X => X.First());//add any condition here

        //mynewlist is a strongly typed List
        string output = "";
        foreach (var item in mynewlist)
            output += item.ID + "," + item.FamilyN + "," + item.LastN + "," + item.Country + "," + item.Date.ToString("MM/dd/yyyy") + "\r\n";

        using (StreamWriter sw = new StreamWriter(@"d:\test.csv"))
            sw.Write(output); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T18:40:43.397

这又快又脏，我目前无法测试它，所以我什至不能保证它会按原样工作，但它应该足够接近，可以向你展示一种方法。

```
private void btn_convert_Click(object sender, EventArgs e)
{
    if ((textBox1.Text == "") && (textBox2.Text == ""))
    {
        MessageBox.Show("Please specify input and output");
    }

    StringBuilder csvFile = new StringBuilder();
    string temp = "";
    string[] file = File.ReadAllLines(textBox1.Text);
    List<int> idList = new List<int>();
    foreach (string line in file)
    {
        string[] cols = line.Split('\t');
        if (cols.Length > 0)
        {
            int colId = -1;
            if (int.TryParse(cols[0], out colId))
            {
                if (idList.contains(colId))
                {
                    continue;
                }
                idList.Add(colId);
            }
        }

        if ((line.Contains(DateTime.Now.ToString("MM/dd/yyyy"))) && (line.Contains("\tAU\t")))
        {
            if (line.Contains("\t"))
            {
                temp = line.Replace("\t", ",");

                csvFile.Append(temp + "\r\n");

                continue;
            }
            csvFile.Append(line + "\r\n");
        }
    }

    File.WriteAllText((textBox2.Text + "\\test.csv"), csvFile.ToString());
    MessageBox.Show("CSV file successfully created at the following location :\n" + textBox2.Text);
} 
```

# java - GlassFish 上的 JavaMail 和 Mandril

> ID：13826268
> 
> 赞同：4
> 
> 时间：2012-12-11T18:29:48.500
> 
> 标签：java, glassfish, jakarta-mail

这是我的 glassfish-resources.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE resources PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Resource Definitions//EN" "http://glassfish.org/dtds/glassfish-resources_1_5.dtd">
<resources>
    <mail-resource debug="true"
                   enabled="true"
                   from="foo@bar.com"
                   host="smtp.mandrillapp.com"
                   jndi-name="java:app/mail/mySession"
                   object-type="user"
                   store-protocol="imap"
                   store-protocol-class="com.sun.mail.imap.IMAPStore"
                   transport-protocol="smtp"
                   transport-protocol-class="com.sun.mail.smtp.SMTPTransport"
                   user="foo@bar.com">
        <description/>
        <property name="mail.user" value="foo@bar.com"/>
        <property name="mail.password" value="password"/>
        <property name="mail.host" value="smtp.mandrillapp.com"/>
        <property name="mail.port" value="587"/>
        <property name="mail.smtp.socketFactory.port" value="587"/>
        <property name="mail.smtp.socketFactory.fallback" value="false"/>
        <property name="mail.smtp.auth" value="true"/>
        <property name="mail.smtp.starttls.enable" value="true"/>
    </mail-resource>
</resources> 
```

以及发送电子邮件的方法：

```
public static void sendEmail(final Session session,
                             final String from,
                             final String to,
                             final String subject,
                             final String htmlPart,
                             final String txtPart)
        throws AddressException,
               MessagingException
{
    MimeMessage message = new MimeMessage(session);
    message.setSender(new InternetAddress(from));
    InternetAddress toAddress = new InternetAddress(to);
    message.setRecipient(RecipientType.TO, toAddress);
    message.setSubject(subject);

    // Create a multipart message consisting of a HTML body with an alternate plain text version.
    MimeMultipart mp = new MimeMultipart("alternative");

    // Plain text part.
    MimeBodyPart textPlainPart = new MimeBodyPart();
    textPlainPart.setContent(txtPart, "text/plain");
    mp.addBodyPart(textPlainPart);

    // HTML part.
    MimeBodyPart textHtmlPart = new MimeBodyPart();
    textHtmlPart.setContent(htmlPart, "text/html");
    mp.addBodyPart(textHtmlPart);

    // Put it all together.
    message.setContent(mp);
    message.saveChanges();

    // Send the email.
    Transport tr = session.getTransport("smtp");

    String user = session.getProperty("mail.user");
    String smtpPassword = session.getProperty("mail.password");
    String smtpHost = session.getProperty("mail.host");
    int port = Integer.parseInt(session.getProperty("mail.port"));

    tr.connect(smtpHost, port, user, smtpPassword);
    tr.sendMessage(message, new Address[] { toAddress });
    tr.close();
} 
```

当我调用上述方法时，似乎什么都没有发生。它在没有抛出异常的情况下结束，但我没有收到它的电子邮件。

显然我配置错误，因为我已经能够使用电子邮件客户端通过 Mandrill 发送电子邮件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T15:25:15.103

我已经设法使用 JavaMail 和 Mandrill 发送消息。我使用了一种稍微不同的方法，它暴露了 JavaMail 中的一个错误：也许你遇到了同样的错误？以下代码适用于我

```
mailProperties.setProperty("mail.transport.protocol", "smtp");
mailProperties.setProperty("mail.smtp.host", host);
mailProperties.setProperty("mail.smtp.port", String.valueOf(port));
mailProperties.setProperty("mail.smtp.user", username);

final Session session = Session.getInstance(mailProperties, null);
session.setPasswordAuthentication(
        new URLName("smtp", host, -1, null, username, null),
        new PasswordAuthentication(username, password)
);

final MimeMessage msg = new MimeMessage(session);
// set required message properties

Transport.send(msg); 
```

[您可以在我关于 smtp 身份验证的博客文章](http://www.scarba05.co.uk/blog/2012/12/sending-email-using-smtp-authentication-with-javamail/)中阅读有关该错误的更多信息

# android - 在方向更改中显示当前可见的片段给出空/空视图android

> ID：13826276
> 
> 赞同：0
> 
> 时间：2012-12-11T18:30:36.123
> 
> 标签：android

大家好，我有点卡在某事上，我认为我在方向改变期间处理片段和活动的方式上弄错了一个概念。基本上，我在一个活动中有 3 个片段，通过页脚通过框架布局动态加载。默认情况下，当应用程序启动时，会显示第一个 Fragment，这意味着无论何时销毁和创建 Activity，都会显示第一个 Fragment。现在我想要的是在方向改变之前的当前可见片段在具有不同 UI 布局的方向改变之后可见。但是当我尝试显示片段或任何其他内容时，我得到一个空视图。

在我的活动 onCreate 我有这个：

```
if(savedInstanceState != null){
            switchTag = savedInstanceState.getString(SAVED_CURRENT_FRAGMENT_STATE);
            Log.d(TAG, "fragment after orientation is " + switchTag);   
              displayCurrentFragment(switchTag);        

        }else {

             dashboardfragment = new DashBoardFragment();
              ft.add(R.id.dashboard_fragment_container_id, dashboardfragment, DASHBOARD_FRAG_TAG);
              ft.commit();
        } 
```

我在活动中覆盖 onSaveInstanceState 和 onConfigurationChanged：

```
@Override
public void onSaveInstanceState(Bundle outState) {

    Log.d(TAG, "OnSavedInstance() on dashboard activity");
    outState.putString(SAVED_CURRENT_FRAGMENT_STATE, switchTag);  // to save the current visible fragment

    super.onSaveInstanceState(outState);

}

@Override
public void onConfigurationChanged(Configuration newConfig) {
  super.onConfigurationChanged(newConfig);
  setContentView(R.layout.dashboard_layout);  // same as oncreate
} 
```

我也覆盖了片段中的 OnsaveInstanceState()。

所以我的问题

1.  这是在屏幕方向处理片段和活动的正确方法吗？

2.  如果我在我的片段中覆盖 onsavedInstanceState，活动中会调用什么特定方法？

对不起，如果我的问题到处都是，但这让我很困惑！在方向变化中保持片段状态的实际过程是什么。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:36:13.217

您是否在布局中为您的片段使用 xml？确保水平和垂直布局的布局都定义了片段

# haskell - 在 Haskell 中多次使用相同的随机数

> ID：13826280
> 
> 赞同：1
> 
> 时间：2012-12-11T18:30:53.030
> 
> 标签：haskell, random, monads

我正在尝试使用 Haskell 创建一个纸剪刀石头游戏来练习我对它的理解。

不幸的是，下面的源代码给出了不需要的答案。

例如：

```
>play pStone pRandom 1
1 games were played. Player 1 won 1 and player 2 won 1, making the match a draw. 
```

如果进行 1 场比赛，则应该只有 1 场或 0 场胜利。

```
>play pStone pCopy 100
100 games were played. Player 1 won 1 and player 2 won 1, making the match a draw. 
```

如果进行了 100 场比赛，其中（在第一轮之后）双方都下相同的棋步，那么应该只有 1 或 0 胜。

```
>play pCopy pAntiCopy 100
100 games were played. Player 1 won 31 and player 2 won 37, making player 2 the overall winner. 
```

根据 pCopy 和 pAntiCopy 的预期定义，pAntiCopy 应该赢得 99 或 100，而 pCopy 应该赢得 0 或 1。

我相信这种行为最可能的原因是随机数是在最后评估的，这意味着应该依赖于相同随机数的 2 个值而不是依赖于 2 个单独的随机数。我在上面是正确的吗？

如果我是正确的，请你告诉我我应该如何纠正这个问题？如果我不正确，请你告诉我问题是什么以及应该如何解决？

我已经阅读了一个单独问题的解决方案，它建议生成一个随机数列表，然后使用它们，将它们作为参数从主函数传递给相关函数。不过，我不相信这在这里能很好地工作，因为所需的随机数的数量可能是从 0 到 2*numRounds 的任何值，这取决于正在使用的计划（我打算在这工作时创建更高级的计划）和代码的可读性会进一步降低。

我是 Haskell 和函数式编程的新手，所以我对下面源代码的风格表示歉意。如果您对如何改进它有任何建议，他们也很受欢迎。

```
import System.Random

data Move= Paper|Scissors|Stone deriving Show
type Plan=([IO Move]->[IO Move]->IO Move)

play :: Plan -> Plan -> Integer -> IO ()
play plan1 plan2 numRounds=do p1intwins<-p1wins;p2intwins<-p2wins;putStr(show numRounds ++ " games were played. Player 1 won " ++ show p1intwins ++ " and player 2 won " ++ show p2intwins ++ ", making " ++ (if p1intwins > p2intwins then "player 1 the overall winner." else (if p1intwins < p2intwins then "player 2 the overall winner." else "the match a draw."))) where (_, _, _, _, _, _, p1wins, p2wins)=(playRound (plan1, plan2, numRounds,[],[], 0, return 0, return 0))

playRound :: (Plan, Plan, Integer, [IO Move], [IO Move], Integer, IO Integer, IO Integer) -> (Plan, Plan, Integer, [IO Move], [IO Move], Integer, IO Integer, IO Integer)
playRound (plan1, plan2, numRounds, p1moves, p2moves, elapsedRounds, p1wins, p2wins)=if elapsedRounds==numRounds then (plan1, plan2, numRounds, p1moves, p2moves, elapsedRounds, p1wins, p2wins) else (playRound (plan1, plan2, numRounds, p1moves++[p1move], p2moves++[p2move], elapsedRounds+1, do p1win<-beatsCaller p1move p2move;p1intwins<-p1wins;return (p1intwins+if p1win then 1 else 0), do p2win<-beatsCaller p2move p1move;p2intwins<-p2wins;return(p2intwins+(if p2win then 1 else 0)) )) where p1move=plan1 p1moves p2moves; p2move=plan2 p2moves p1moves

beatsCaller :: IO Move -> IO Move -> IO Bool
beatsCaller iom1 iom2=do m1<-iom1;m2<-iom2;return(beats m1 m2)

beats :: Move -> Move -> Bool
beats Scissors Paper=True
beats Stone Scissors=True
beats Paper Stone=True
beats _ _=False

--                                           ###############Plans###################
pStone :: Plan
pStone _ _ = return Stone

pScissors :: Plan
pScissors _ _ = return Scissors

pPaper :: Plan
pPaper _ _ = return Paper

pUScissors :: Plan
pUScissors [] _ = randomMove
pUScissors _ _ = return Scissors

pCopy :: Plan
pCopy _ []= randomMove
pCopy _ theirMoves= last theirMoves

pRandom :: Plan
pRandom _ _=randomMove

pAntiCopy :: Plan
pAntiCopy [] _ = randomMove
pAntiCopy ourMoves _ = do ourMove<-last ourMoves;return(beaterOf ourMove)

--                                           ##############Plan Logic###############

beaterOf ::  Move -> Move
beaterOf Scissors = Stone
beaterOf Paper = Scissors
beaterOf Stone = Paper

randomMove :: IO Move
randomMove=do x<-genRandom;return (doRMove x)

doRMove:: Int -> Move
doRMove rand
    |rand==1 =Paper
    |rand==2 =Scissors
    |rand==3 =Stone

genRandom :: IO Int
genRandom =getStdRandom (randomR (1,3)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T19:43:08.207

我稍微重新格式化并注释了您的源文件。要点是您应该将类​​型更改`Plan`为 be `[Move] -> [Move] -> IO Move`，如下所述。

```
import System.Random

data Move = Paper | Scissors | Stone
  deriving (Show, Eq, Enum, Bounded)

-- Make Move an instance of Random, so that we can use randomIO
-- in order to pick a random Move rather than a hand-written
-- function. We use the derived Enum instance and integer random
-- numbers to do the hard work for us.
instance Random Move where
  randomR (l, u) g = (toEnum n, g')
    where (n, g') = randomR (fromEnum l, fromEnum u) g
  random = randomR (minBound, maxBound)

-- Unchanged, just realigned.
beaterOf :: Move -> Move
beaterOf Scissors = Stone
beaterOf Paper    = Scissors
beaterOf Stone    = Paper

-- Reimplemented in terms of beaterOf, to avoid unnecessary
-- duplication of error-prone information.
beats :: Move -> Move -> Bool
beats x y = x == beaterOf y

-- Most important change. A plan is a strategy that takes two
-- lists of past moves. These are of type Move, not IO Move, as
-- they have already happened. We then have to determine a new
-- one. Here, to choose the next, we allow IO (such as picking
-- a random number, or asking a human player). I also reverse
-- the order of moves, so that the most recent moves are first,
-- because most strategies access the most recent move, and
-- accessing the head is more efficient in a list.
type Plan =  [Move]  -- my moves, latest move first
          -> [Move]  -- opponent's moves, latest move first
          -> IO Move -- my next move, may involve IO

--
-- Specific plans (slightly renamed, otherwise unchanged):
--

-- Always plays a particular move.
always :: Move -> Plan
always m _ _ = return m

-- Copies the latest move of opponent.
copy :: Plan
copy _ []           = randomIO
copy _ (latest : _) = return latest

randomly :: Plan
randomly _ _ = randomIO

-- Moves to the beater of our previous move.
antiCopy :: Plan
antiCopy []           _ = randomIO
antiCopy (latest : _) _ = return (beaterOf latest)

uScissors :: Plan
uScissors [] _ = randomIO
uScissors _  _ = return Scissors

-- Play wrapper. Interface as before.
play :: Plan    -- my plan
     -> Plan    -- opponent's plan
     -> Integer -- number of rounds to be played
     -> IO ()   -- output is printed as text
play myPlan opPlan rounds = do
  (myWins, opWins) <- playRounds
                        myPlan opPlan rounds
                        [] [] -- initialize with empty move lists
                        0 0   -- and 0 wins each
  -- print statistics
  let overallStatus | myWins > opWins = "Player 1 the overall winner"
                    | opWins > myWins = "Player 2 the overall winner"
                    | otherwise       = "the match a draw"
  putStrLn $ show rounds ++ " games were played. "
          ++ "Player 1 won " ++ show myWins ++ " and "
          ++ "Player 2 won " ++ show opWins ++ ", making "
          ++ overallStatus ++ "."

-- Does all the hard work.
playRounds :: Plan    -- my plan
           -> Plan    -- opponent's plan
           -> Integer -- number of rounds still to be played
           -> [Move]  -- our moves so far, latest first
           -> [Move]  -- opponent's moves so far, latest first
           -> Int     -- my wins
           -> Int     -- opponent's wins
           -> IO (Int, Int)  -- final wins
playRounds _      _      0      _       _       myWins opWins =
  return (myWins, opWins) -- if no rounds are left to play, return the final statistics
playRound myPlan opPlan rounds myMoves opMoves myWins opWins = do
  myMove <- myPlan myMoves opMoves -- here's where a random number might get chosen
  opMove <- opPlan opMoves myMoves -- and here again (but nowhere else)
  let myWin = myMove `beats` opMove -- this works on the already chosen Move, not on IO Move
      opWin = opMove `beats` myMove -- dito
  playRound
    myPlan opPlan      -- as before
    (rounds - 1)       -- one round is played
    (myMove : myMoves) -- adding moves in front of the list is easier
    (opMove : opMoves)
    (fromEnum myWin + myWins) -- update win count, turning True to 1 and False to 0
    (fromEnum opWin + opWins) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T19:08:35.823

> 我相信这种行为最可能的原因是随机数是在最后评估的，这意味着应该依赖于相同随机数的 2 个值而不是依赖于 2 个单独的随机数。我在上面是正确的吗？

你是。由于您实际上并没有在迭代期间玩，而是通过`IO`-actions，所以您的策略没有简单`Move`的 s - 前几轮的结果 - 可以构建，而是生成 a 的配方`Move`，在某些情况下涉及执行`genRandom`以获得一个`Move`。每次在

```
ourMove<-last ourMoves 
```

`last ourMoves`涉及 a `genRandom`，产生一个新的（伪）随机数 - 通常与产生前一个的随机数不同`Move`。

> 如果我是正确的，请你告诉我我应该如何纠正这个问题？

不要在那个 use 周围传递`IO`动作和`IO`-actions列表`genRandom`。您需要纯值来确定策略（除了和`pRandom`中的初始选择）。`pCopy``pAntiCopy`

必要时在每个步骤中运行伪随机数生成，并将`Move`获得的纯 s 传递给下一次迭代。

* * *

此外，使用更短的行、使用空格和使用布局来使代码更具可读性。

~~我打算用更惯用的风格重写它，但我打字速度很慢，所以可能需要一段时间。~~

好的，它仍然有点混乱，因为我保留了很多原始输出和逻辑，但它更容易阅读和遵循，并且它产生了预期的输出：

```
module Rocks where

import System.Random

data Move
    = Paper
    | Scissors
    | Stone
      deriving Show

type Plan = [Move] -> [Move] -> IO Move

play :: Plan -> Plan -> Int -> IO ()
play plan1 plan2 numRounds = do
    (wins1, wins2) <- playRounds plan1 plan2 numRounds [] [] 0 0
    putStrLn $ show numRounds ++ " games were played. Player 1 won "
                ++ show wins1 ++ " and player 2 won " ++ show wins2
                ++ ", making " ++ result wins1 wins2
  where
    result a b
        | a == b    = "the match a draw."
        | otherwise = "player " ++ (if a > b then "1" else "2") ++ " the overall winner."

playRounds :: Plan -> Plan -> Int -> [Move] -> [Move] -> Int -> Int -> IO (Int, Int)
playRounds _     _     0      _      _      wins1 wins2 = return (wins1,wins2)
playRounds plan1 plan2 rounds moves1 moves2 wins1 wins2 = do
    choice1 <- plan1 moves1 moves2
    choice2 <- plan2 moves2 moves1
    let (w1, w2)
            | beats choice1 choice2 = (wins1+1 ,wins2)
            | beats choice2 choice1 = (wins1, wins2+1)
            | otherwise             = (wins1, wins2)
    playRounds plan1 plan2 (rounds-1) (moves1 ++ [choice1]) (moves2 ++ [choice2]) w1 w2

beats :: Move -> Move -> Bool
beats Scissors  Paper       = True
beats Stone     Scissors    = True
beats Paper     Stone       = True
beats _         _           = False

--       ###############Plans###################

pStone :: Plan
pStone _ _ = return Stone

pScissors :: Plan
pScissors _ _ = return Scissors

pPaper :: Plan
pPaper _ _ = return Paper

pUScissors :: Plan
pUScissors [] _ = randomMove
pUScissors _  _ = return Scissors

pCopy :: Plan
pCopy _ []         = randomMove
pCopy _ theirMoves = return $ last theirMoves

pRandom :: Plan
pRandom _ _ = randomMove

pAntiCopy :: Plan
pAntiCopy []       _ = randomMove
pAntiCopy ourMoves _ = return (beaterOf $ last ourMoves)

--       ##############Plan Logic###############

beaterOf ::  Move -> Move
beaterOf Scissors   = Stone
beaterOf Paper      = Scissors
beaterOf Stone      = Paper

randomMove :: IO Move
randomMove = fmap doRMove genRandom

doRMove:: Int -> Move
doRMove rand
    | rand == 1 = Paper
    | rand == 2 = Scissors
    | rand == 3 = Stone
    | otherwise = error "oops"

genRandom :: IO Int
genRandom = getStdRandom (randomR (1,3)) 
```

和

```
*Rocks> play pCopy pAntiCopy 100
100 games were played. Player 1 won 0 and player 2 won 99, making player 2 the overall winner.
*Rocks> play pStone pRandom 100
100 games were played. Player 1 won 33 and player 2 won 34, making player 2 the overall winner.
*Rocks> play pStone pCopy 100
100 games were played. Player 1 won 1 and player 2 won 0, making player 1 the overall winner.
*Rocks> play pStone pAntiCopy 100
100 games were played. Player 1 won 33 and player 2 won 33, making the match a draw. 
```

# ruby - Ruby 上缺少 QStackedWidget

> ID：13826282
> 
> 赞同：1
> 
> 时间：2012-12-11T18:30:59.813
> 
> 标签：ruby, qt, qtruby

我正在尝试让 Qt on Ruby 工作，但我对 QStackedWidget 有疑问 - 它似乎在 Qt4 for Ruby 上丢失了。这段代码：

`self.stacked_widgets = Qt::QStackedWidget.new(self)`

原因：

> 未初始化的常量 Qt::QStackedWidget (NameError)

有什么解决方法吗？我正在使用 qtbindings gem，也许还有其他东西或其他控件可以表现得像小部件的容器并一次显示一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T03:00:02.093

它是 Qt::StackedWidget 而不是 Qt::QStackedWidget （其他类还有 Qt::PushButton、Qt::Label ......）

# php - JSON输出重音问题

> ID：13826283
> 
> 赞同：5
> 
> 时间：2012-12-11T18:31:02.487
> 
> 标签：php, mysql, ios, json, utf-8

我已经搜索了大约 3 个小时，我知道有很多类似这样的问题已经被问过，但是当我尝试输出重音字符时，我没有找到任何适合我的问题的解决方案通过对我的数据库进行 SELECT 查询的结果。

```
 $itemsList = array();
 while($row = mysql_fetch_assoc($res)){
    $itemsList[Items][] = ($row);
 }
 echo json_encode($itemsList); 
```

这将输出：

```
{"Items":  [

{"user_name":"misterP", 

"comment":"\u00c3\u00a9t\u00c3\u00a9",

"image_name":"403885300736874.jpg"}]} 
```

但我需要输出口音，如下所示：

```
{"Items":  [

{"user_name":"misterP", 

"comment":"été",

"image_name":"403885300736874.jpg"}]} 
```

*   我的数据库和表有类间 utf8_general_ci
*   我的数据库中插入的数据是 utf8_encoded
*   我的 php 脚本是 Unicode (UTF-8)
*   我在数据库上的 SELECT 之前做了“mysql_set_charset('utf8');”
*   如果这可以帮助某人：在y数据库中，“été”一词是：“été”

所以我现在真的不知道该怎么办，我真的被口音困住了，我无法让它发挥作用。提前致谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T18:34:03.110

这并不重要。当 json 被解码后，它们又变成了字符。

如果你使用 php 5.4 >=，你可以传递`JSON_UNESCAPED_UNICODE`给`json_encode`：

```
json_encode( $data, JSON_UNESCAPED_UNICODE ) 
```

但同样，unicode 转义也同样有效，并使数据 ascii 安全。

编辑：

看起来你的数据已经被搞砸了，甚至在之前`json_encode`。您似乎已将其“双重编码”为 utf-8。

> 我的数据库中插入的数据是 utf8_encoded

你在使用类似的东西`utf8_encode`吗？当您插入数据库时​​，您不需要在代码中做任何事情。如果您使用 将数据插入数据库`utf8_encode`，那么这就解释了双重编码。您所需要的只是数据是 utf-8 并且`mysql_set_charset( 'utf8' )`在插入之前具有。

* * *

有趣的是，如果您的 json 具有未转义的 unicode，则即使您在 json 包含or时添加括号，该 json[也无法作为 javascript 执行](http://jsfiddle.net/pkeHU/)。[`U+2028`](http://www.fileformat.info/info/unicode/char/2028/index.htm)[`U+2029`](http://www.fileformat.info/info/unicode/char/2029/index.htm)

# node.js - LESSC @font-face 错误

> ID：13826288
> 
> 赞同：0
> 
> 时间：2012-12-11T18:31:15.630
> 
> 标签：node.js, less

我有一些 LESS mixin 来简化字体

```
.fontface(@font){
    @font-face {
        font-family: '@{font}';
        src: url('../fonts/@{font}.eot');
        src: local('☺'), url('../fonts/@{font}.woff') format('woff'), url('../fonts/@{font}.ttf') format('truetype'), url('../fonts/@{font}.svg#webfont5SwbW1jA') format('svg');
        font-weight: normal;
        font-style: normal;
    }
} 
```

在我的本地计算机 (OS/X) 上，运行 lessc

```
.fontface(@font){
    @font-face {
        font-family: '@{font}';
        src: url('../fonts/@{font}.eot');
        src: local('☺'), url('../fonts/@{font}.woff') format('woff'), url('../fonts/@{font}.ttf') format('truetype'), url('../fonts/@{font}.svg#webfont5SwbW1jA') format('svg');
        font-weight: normal;
        font-style: normal;
    }
}

.fontface('MyFont');
.fontface('MyOtherFont'); 
```

返回

```
@font-face {
  font-family: 'MyFont';
  src: url('../fonts/MyFont.eot');
  src: local('☺'), url('../fonts/MyFont.woff') format('woff'), url('../fonts/MyFont.ttf') format('truetype'), url('../fonts/MyFont.svg#webfont5SwbW1jA') format('svg');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'MyOtherFont';
  src: url('../fonts/MyOtherFont.eot');
  src: local('☺'), url('../fonts/MyOtherFont.woff') format('woff'), url('../fonts/MyOtherFont.ttf') format('truetype'), url('../fonts/MyOtherFont.svg#webfont5SwbW1jA') format('svg');
  font-weight: normal;
  font-style: normal;
} 
```

但是在我们的构建服务器（CentOS 6.2）上运行它会返回

```
@font-face {
  font-family: 'MyFont';
  src: url('../fonts/MyFont.eot');
  src: local('☺'), url('../fonts/MyFont.woff') format('woff'), url('../fonts/MyFont.ttf') format('truetype'), url('../fonts/MyFont.svg#webfont5SwbW1jA') format('svg');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'MyFont';
  src: url('../fonts/MyFont.eot');
  src: local('☺'), url('../fonts/MyFont.woff') format('woff'), url('../fonts/MyFont.ttf') format('truetype'), url('../fonts/MyFont.svg#webfont5SwbW1jA') format('svg');
  font-weight: normal;
  font-style: normal;
} 
```

为什么两个 mixin 在我们的构建服务器上返回相同但在本地工作正常？

两台计算机报告相同的较少版本。

```
Sams-MacBook-Pro:Desktop sr$ lessc -v
lessc 1.3.0 (LESS Compiler) [JavaScript]

[sr@egdjnk01 ~]$ lessc -v
lessc 1.3.0 (LESS Compiler) [JavaScript] 
```

我已经`npm -g update less`在两者上运行，但我仍然收到不同的行为。

我认为这与`@font-face`，如果我将其删除并用虚拟类名替换它，则输出很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:50:51.500

@ScottS 在 [此答案](https://stackoverflow.com/questions/11605277#11611715)中建议的解决 方法是将`.fontface`mixin 放入`@font-face`手动定义的块中，如下所示

```
.fontface(@font){
    font-family: '@{font}';
    src: url('../fonts/@{font}.eot');
    src: local('☺'), url('../fonts/@{font}.woff') format('woff'), url('../fonts/@{font}.ttf') format('truetype'), url('../fonts/@{font}.svg#webfont5SwbW1jA') format('svg');
    font-weight: normal;
    font-style: normal;
}

@font-face{
    .fontface('MyFont');
}

@font-face{
    .fontface('MyOtherFont');
} 
```

现在它给出了两个编译器的正确输出。

# python - 估计两个时间序列之间的小时间偏移

> ID：13826290
> 
> 赞同：25
> 
> 时间：2012-12-11T18:31:18.363
> 
> 标签：python, statistics, scipy, signal-processing, correlation

我有两个时间序列，我怀疑它们之间存在时间偏移，我想估计这个时间偏移。

这个问题之前已经被问过： [查找两个（非谐波）波之间的相位差](https://stackoverflow.com/questions/6157791/find-phase-difference-between-two-inharmonic-waves)并[查找两个相似波形之间的时间偏移，](https://stackoverflow.com/questions/4688715/find-time-shift-between-two-similar-waveforms)但在我的情况下，时间偏移小于数据的分辨率。例如，数据以小时分辨率提供，时间偏移只有几分钟（见图）。

其原因是用于测量其中一个系列的数据记录器在其时间上有几分钟的变化。

有什么算法可以估计这种变化，最好不使用插值？

![太阳辐射预报和太阳辐射测量](../Images/b46caf0f7d6e51b1ad889f31f877f0cb.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T20:07:50.593

这是一个相当有趣的问题。这是使用傅立叶变换的部分解决方案的尝试。这依赖于适度周期性的数据。我不确定它是否适用于您的数据（端点处的导数似乎不匹配）。

```
import numpy as np

X = np.linspace(0,2*np.pi,30)  #some X values

def yvals(x):
    return np.sin(x)+np.sin(2*x)+np.sin(3*x)

Y1 = yvals(X)
Y2 = yvals(X-0.1)  #shifted y values

#fourier transform both series
FT1 = np.fft.fft(Y1)
FT2 = np.fft.fft(Y2)

#You can show that analyically, a phase shift in the coefficients leads to a 
#multiplicative factor of `exp(-1.j * N * T_d)`

#can't take the 0'th element because that's a division by 0\.  Analytically, 
#the division by 0 is OK by L'hopital's<sp?> rule, but computers don't know calculus :)
print np.log(FT2[1:]/FT1[1:])/(-1.j*np.arange(1,len(X))) 
```

对打印输出的快速检查表明，功率最大的频率 (N=1,N=2) 给出了合理的估计值，如果您查看绝对值 (np.absolute)，N=3 也可以，尽管我米茫然地解释为什么会这样。

也许更熟悉数学的人可以从这里得到更好的答案......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T23:21:03.053

您提供的链接之一有正确的想法（实际上我在这里做的几乎相同）

```
import numpy as np
import matplotlib.pyplot as plt
from scipy.signal import correlate

a,b, N = 0, 10, 1000        #Boundaries, datapoints
shift = -3                  #Shift, note 3/10 of L = b-a

x = np.linspace(a,b,N)
x1 = 1*x + shift
time = np.arange(1-N,N)     #Theoritical definition, time is centered at 0

y1 = sum([np.sin(2*np.pi*i*x/b) for i in range(1,5)])
y2 = sum([np.sin(2*np.pi*i*x1/b) for i in range(1,5)])

#Really only helps with large irregular data, try it
# y1 -= y1.mean()
# y2 -= y2.mean()
# y1 /= y1.std()
# y2 /= y2.std()

cross_correlation = correlate(y1,y2)
shift_calculated = time[cross_correlation.argmax()] *1.0* b/N
y3 = sum([np.sin(2*np.pi*i*(x1-shift_calculated)/b) for i in range(1,5)])
print "Preset shift: ", shift, "\nCalculated shift: ", shift_calculated

plt.plot(x,y1)
plt.plot(x,y2)
plt.plot(x,y3)
plt.legend(("Regular", "Shifted", "Recovered"))
plt.savefig("SO_timeshift.png")
plt.show() 
```

这具有以下输出：

```
Preset shift:  -3
Calculated shift:  -2.99 
```

![在此处输入图像描述](../Images/7824c52050cc0948a4c7cb621ace81b9.png)

可能需要检查

1.  [Scipy 相关](http://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.correlate.html)
2.  [时延分析](http://en.wikipedia.org/wiki/Cross-correlation#Time_delay_analysis)

请注意，相关性的 argmax() 显示了对齐的位置，它必须按长度`b-a = 10-0 = 10`和 N 进行缩放才能得到实际值。

检查 correlate [Source](https://github.com/scipy/scipy/blob/v0.11.0/scipy/signal/signaltools.py#L55)的来源，从 sigtools 导入的函数的行为并不完全清楚。对于大型数据集，循环相关（通过快速傅立叶变换）比直接方法快得多。我怀疑这是在 sigtools 中实现的，但我不能确定。在我的 python2.7 文件夹中搜索该文件仅返回编译后的 C pyd 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-30T15:09:47.240

确实，有趣的问题，但还没有令人满意的答案。让我们试着改变它...

您说您不喜欢使用插值，但是，正如我从您的评论中了解到的那样，您真正的意思是您希望避免上采样到更高分辨率。一个基本的解决方案是利用最小二乘拟合线性插值函数，但没有上采样到更高分辨率：

```
import numpy as np
from scipy.interpolate import interp1d
from scipy.optimize import leastsq

def yvals(x):
    return np.sin(x)+np.sin(2*x)+np.sin(3*x)

dx = .1
X = np.arange(0,2*np.pi,dx)
Y = yvals(X)

unknown_shift = np.random.random() * dx
Y_shifted = yvals(X + unknown_shift)

def err_func(p):
    return interp1d(X,Y)(X[1:-1]+p[0]) - Y_shifted[1:-1]

p0 = [0,] # Inital guess of no shift
found_shift = leastsq(err_func,p0)[0][0]

print "Unknown shift: ", unknown_shift
print "Found   shift: ", found_shift 
```

样本运行给出了一个非常准确的解决方案：

```
Unknown shift:  0.0695701123582
Found   shift:  0.0696105501967 
```

如果在移位的 Y 中包含噪声：

```
Y_shifted += .1*np.random.normal(size=X.shape) 
```

一个得到不太精确的结果：

```
Unknown shift:  0.0695701123582
Found   shift:  0.0746643381744 
```

当有更多数据可用时，存在噪声时的准确性会提高，例如：

```
X = np.arange(0,200*np.pi,dx) 
```

一个典型的结果是：

```
Unknown shift:  0.0695701123582
Found   shift:  0.0698527939193 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-13T16:34:23.080

这是一个非常有趣的问题。最初，我打算建议一个类似于 user948652 的基于互相关的解决方案。但是，根据您的问题描述，该解决方案存在两个问题：

1.  数据的分辨率大于时移，并且
2.  在某些日子里，预测值和测量值之间的相关性非常低

由于这两个问题，我认为直接应用互相关解决方案实际上可能会增加您的时间偏移，尤其是在预测值和测量值彼此相关性非常低的日子里。

在我上面的评论中，我问你是否有任何事件发生在两个时间序列中，你说你没有。但是，根据您的域，我认为您实际上有两个：

1.  日出
2.  日落

即使信号的其余部分相关性较差，日出和日落也应该有一定的相关性，因为它们将从夜间基线单调增加/减少。因此，这是一个基于这两个事件的潜在解决方案，它既应该最小化所需的插值，又不依赖于相关性差的信号的互相关。

**1\. 寻找大致的日出/日落**

这应该很容易，只需获取高于夜间平线的第一个和最后一个数据点，并将它们标记为大致的日出和日落。然后，我会关注这些数据，以及两边的点，即：

```
width=1
sunrise_index = get_sunrise()
sunset_index = get_sunset()

# set the data to zero, except for the sunrise/sunset events.
bitmap = zeros(data.shape)
bitmap[sunrise_index - width : sunrise_index + width] = 1
bitmap[sunset_index - width : sunset_index + width] = 1
sunrise_sunset = data * bitmap 
```

有几种实施方法`get_sunrise()`，`get_sunset()`具体取决于您在分析中需要多少严格性。我会使用[`numpy.diff`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.diff.html)，将其设置为特定值，然后取高于该值的第一个点和最后一个点。您还可以从大量文件中读取夜间数据，计算平均值和标准偏差，并查找超过`0.5 * st_dev`夜间数据的第一个和最后一个数据点。您还可以进行某种基于集群的模板匹配，特别是如果不同类别的日子（即晴天、部分阴天和非常多云）具有高度刻板的日出/日落事件。

**2\. 重采样数据**

我认为没有一些插值就没有办法解决这个问题。我会使用比移位更高的采样率重新采样数据。如果班次以分钟为单位，则上采样到 1 分钟或 30 秒。

```
num_samples = new_sample_rate * sunrise_sunset.shape[0]
sunrise_sunset = scipy.signal.resample(sunrise_sunset, num_samples) 
```

或者，我们可以使用三次样条对数据进行插值（参见[此处](https://stackoverflow.com/questions/11851770/python-spline-interpolation)）。

**3\. 高斯卷积**

由于有一些插值，所以我们不知道实际日出和日落的预测有多精确。因此，我们可以将信号与高斯进行卷积，以表示这种不确定性。

```
gaussian_window = scipy.signal.gaussian(M, std)
sunrise_sunset_g = scipy.signal.convolve(sunrise_sunset, gaussian_window) 
```

**4\. 互相关**

使用 user948652 的答案中的互相关方法来获得时移。

这种方法有很多悬而未决的问题，需要对数据进行检查和实验才能更具体地确定，例如识别日出/日落的最佳方法是什么，高斯窗口应该有多宽等。但它是我将如何开始解决这个问题。祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T07:15:37.093

我已经成功使用（在 awgn 通道中）匹配滤波器方法，它在索引 n 处给出峰值能量 m[n]；然后将二次多项式 f(n) 拟合到 m[n-1]、m[n]、m[n+1] 并通过设置 f'(n)==0 找到最小值。

响应不一定是绝对线性的，特别是如果信号的自相关在 m[n-1]、m[n+1] 处没有消失。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T17:19:27.677

# 优化以获得最佳解决方案

对于给定的约束，即解的相移比采样方法少一点，简单的下坡单纯形算法效果很好。我已经修改了@mgilson 的示例问题来展示如何做到这一点。请注意，此解决方案是稳健的，因为它可以处理噪声。

**错误函数**：可能有更多优化的东西需要优化，但效果出奇的好：

```
np.sqrt((X1-X2+delta_x)**2+(Y1-Y2)**2).sum() 
```

即，仅通过调整 x 轴（相位）来最小化两条曲线之间的欧几里得距离。

```
import numpy as np

def yvals(x):
    return np.sin(x)+np.sin(2*x)+np.sin(3*x)

dx = .1
unknown_shift = .03 * np.random.random() * dx

X1  = np.arange(0,2*np.pi,dx)  #some X values
X2  = X1 + unknown_shift

Y1 = yvals(X1)
Y2 = yvals(X2) # shifted Y
Y2 += .1*np.random.normal(size=X1.shape)  # now with noise

def err_func(p):
    return np.sqrt((X1-X2+p[0])**2+(Y1-Y2)**2).sum()

from scipy.optimize import fmin

p0 = [0,] # Inital guess of no shift
found_shift = fmin(err_func, p0)[0]

print "Unknown shift: ", unknown_shift
print "Found   shift: ", found_shift
print "Percent error: ", abs((unknown_shift-found_shift)/unknown_shift) 
```

示例运行给出：

```
Optimization terminated successfully.
         Current function value: 4.804268
         Iterations: 6
         Function evaluations: 12
Unknown shift:  0.00134765446268
Found   shift:  0.001375
Percent error:  -0.0202912082305 
```

# charts - 我如何制作这些图表？

> ID：13826291
> 
> 赞同：1
> 
> 时间：2012-12-11T18:31:17.870
> 
> 标签：charts

我希望创建类似于的股票图表；

[http://finviz.com/quote.ashx?t=SPY&ty=c&ta=0&p=d](http://finviz.com/quote.ashx?t=SPY&ty=c&ta=0&p=d)

我一直在寻找：

[http://www.highcharts.com/stock/demo/ohlc](http://www.highcharts.com/stock/demo/ohlc)

我认为这很好，但有人知道我如何创建类似于 Finviz 图表的东西吗？您可以推荐任何开发人员或程序员吗？

谢谢

萨缪尔森

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-11T18:39:03.950

我花了相当多的时间来研究我们的 WPF 应用程序的图表控件。这是一个包含大约 30 个图表的制造应用程序。我发现最好的控制是 Visifire (www.visifire.com)。我已经使用了大约 6-9 个月，对它非常满意。它支持您描述的股票图表。

# xml - 没有定义前缀的 XML 文档的前缀是什么？

> ID：13826295
> 
> 赞同：3
> 
> 时间：2012-12-11T18:31:52.550
> 
> 标签：xml, namespaces, msxml, serverxmlhttp

**更新** 感谢 florent，我现在意识到我在问题中使用了错误的术语（最初：'什么是没有定义命名空间的 XML 文档的命名空间？'）。
另外，我想现在我要问两个问题：
1\. 可以为没有前缀的 XML 文档分配前缀吗？（可能是的，但是如何使用经典 ASP 做到这一点？）
2\. XML 文档中没有定义前缀的节点的 XPath 位置路径是什么？如果这甚至是可能的。

我有经典的 ASP 代码，它使用 MSXML2.ServerXMLHTTP.6.0 对象检索 XML 文档，但 XML 文档没有定义前缀。我无法更改 XML 文档的制作方式。

这是 XML 的外观：

```
<?xml version="1.0" standalone="yes"?>
<SearchResultsResponse xmlns="http://openapi.somesite.com/openapi-3.0.0">
[...]
</SearchResultsResponse> 
```

该文档会通过 .responseXML 属性自动解析和访问。但查找节点：

```
Set objData = obj_http.responseXML.selectSingleNode("//someNodeName")
Response.Write "Data: " & objData.Text 
```

不起作用。（我收到“需要对象”错误消息，表示未找到节点。）并且

```
Response.Write obj_http.responseXML.documentElement.prefix 
```

给我一个空字符串。

完成这项工作的一种方法是使用`.selectSingleNode("//*[local-name() = 'someNodeName']")`，但我想这在较大的 XML 文档中效率不高。（或者我错了吗？）

我读过类似的内容：`.selectSingleNode("//ns:rootNodeName/ns:childNodeName")`，其中 'ns' 是定义的前缀，应该是要走的路，但是如果没有定义前缀，我应该使用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T22:49:11.457

我终于想通了：

```
Dim obj_XML
Set obj_XML = obj_http.responseXML

' this is where the magic happens, 'ns' is defined as the prefix:
obj_XML.setProperty _
    "SelectionNamespaces", _
    "xmlns:ns='http://openapi.somesite.com/openapi-3.0.0' " &_
    "xmlns:xs='http://www.w3.org/2001/XMLSchema'"

Dim obj_node
' now we can get the node with an XPath location path with the 'ns' prefix:
Set obj_node = obj_XML.selectSingleNode("//ns:SearchResultsResponse/ns:SessionId")

If obj_node Is Nothing Then
    Response.Write "# No node found #<br />"
Else
    Response.Write "Node text: " & obj_node.Text & "<br />"
End If 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T10:08:03.397

据我了解“http://openapi.somesite.com/openapi-3.0.0”是文档的命名空间。它只是没有定义前缀，因此这是默认命名空间。

> 我读过类似的内容：.selectSingleNode("//ns:rootNodeName/ns:childNodeName")，其中'ns'是定义的命名空间，应该是要走的路，但是如果没有，我应该为命名空间使用什么被定义为？

这里的“ns”不是命名空间而是命名空间前缀。我不是 ASP 人员，因此我无法对代码提供太多帮助，但您仍然应该能够为您的节点查找定义命名空间。如果您不想使用默认命名空间，您甚至应该能够使用前缀重新定义它。

# django - Django 表单 as_table 新行

> ID：13826296
> 
> 赞同：6
> 
> 时间：2012-12-11T18:32:03.053
> 
> 标签：django, django-forms

我正在从表单创建一个表：

```
<form method="post" action=".">{% csrf_token %}
    {{ form.as_table }}
    <input type="submit" value="register" />
</form> 
```

在我的`forms.py`我有

```
class RegistrationForm(forms.Form):
    username = forms.CharField(label=u'Username', max_length=30)
    first_name = forms.CharField(label=u'First Name', max_length=30)
    last_name = forms.CharField(label=u'Last Name', max_length=30)
    email = forms.EmailField(label=u'Email')
    password1 = forms.CharField(
                                label=u'Password',
                                widget=forms.PasswordInput()
                                )
    password2 = forms.CharField(
                                label=u'Password (Again)',
                                widget=forms.PasswordInput()
                                ) 
```

问题是每个字段都显示在一行中。如何为所有字段设置不同的行？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-11T18:59:39.440

`{{form.as_table}}`仅返回`<tr>...</tr>` 您必须明确地放置`<table></table>`包装器

您可以在[此处阅读文档](https://docs.djangoproject.com/en/dev/ref/forms/api/#as-table)

# iphone - 从核心数据获取请求中排除反向关系

> ID：13826301
> 
> 赞同：0
> 
> 时间：2012-12-11T18:32:13.400
> 
> 标签：iphone, objective-c, ios, cocoa, core-data

父对象与它的自身有很多关系，因为它是子对象。

![核心数据模型](../Images/12011da2010ccbf5233653a6edde8c89.png)

当我获取一个对象的所有子对象时，请求还通过反向关系返回父对象。

在获取请求中是否有办法排除反向关系，以便结果仅包含子对象？

到目前为止，我的解决方案是在自定义 NSManagedObject 类中为 Object 实现一个方法，该方法返回一个过滤后的子数组。

```
-(NSArray *)getChildrenOfObjectWithoutParent:(int)parentId
{
    NSArray *results = [[self.children allObjects] filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"(objId != %d)", parentId]];
    return results;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:58:49.237

一个更干净的解决方案是有两个关系：

*   `children`作为从*Object*到自身*的多对多*关系，
**   `parent`作为从*Object*到自身*的一对一*关系*

 **并将这些定义为相互的逆关系。

然后`self.children`准确地给出子对象，没有任何问题或技巧。

![在此处输入图像描述](../Images/5d1d4fa2f75f96e636f126f7c2759d22.png)

（我从您的描述中假设一个对象只能有一个父对象。如果一个对象有多个父对象，您也可以将其定义`parent`为*一对多*关系。）

此设置的另一个优点是您可以为关系定义不同的核心数据“删除规则”。

一个有用的例子是：

*   删除关系的规则“级联” `children`，以及
*   删除关系的“无效”规则`parent`。

其效果是，如果一个对象被删除，它的所有子对象也被自动删除，并且该对象从父对象子对象中删除。**

# html - 我无法使用 CSS 正确设置 HTML 元素的高度

> ID：13826302
> 
> 赞同：2
> 
> 时间：2012-12-11T18:32:23.060
> 
> 标签：html, css, overflow

我的 CSS：

```
 .reviewRow 
        {    
            clear:both;
            padding-top:0;
            margin-top:0;
        }
        .reviewBlock 
        {
         float:left;
         height:100%;
         padding-top:0;
         margin-top:0;
         border-top: 1px solid #444; 
         border-left: 1px solid #444;
        }
        .reviewCaption
         {
             font: normal normal normal 6pt verdana;padding-left:0.03in;
         }
        .reviewText 
        {
            font: normal normal normal 8pt verdana;  
            height:20px; 
        } 
```

我的 HTML：

```
<body>
<div style="HEIGHT: 30px" class=reviewRow>
    <div style="WIDTH: 125px" class=reviewBlock>
        <div id=reviewBeneficiaryType class=reviewText>This text is too big to fit inside a 30px height cell, so I want it to get bigger.
        </div>
    </div>
</div>
</body> 
```

上面的 HTML 不属于我遇到问题的网页。它是动态生成的，所以里面的文字可能很短也可能很长。通常，我希望这将呈现一个 30 像素高的框，其中包含文本，除非文本太大，在这种情况下，框将扩展以适应文本。

问题是当这个 HTML 出现在另一个页面中时，文本会“溢出”框。我不明白问题是什么。更复杂的是，如果我删除“高度”样式，它实际上会使盒子更高。

我查看了[MDN 文档](https://developer.mozilla.org/en-US/docs/CSS/overflow)。它清楚地表明默认情况下，CSS“溢出”的值是“可见的”，在这种情况下，文本“可能溢出”，但在任何情况下我都不希望出现滚动条。

我已经尝试修改包含元素的“位置”CSS，但这似乎没有任何作用。

什么可能导致这里的问题？

**更新**我发现似乎是什么导致了问题！这是文档类型声明！如果我从摘录的页面中删除 doctype 声明，它将呈现良好！凭什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:44:32.107

尝试`min-height:20px;max-height:400px;`给予`.reviewText`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:36:32.280

您正在为您的 div 指定高度，如果文本变得更明显，它将像一瓶水一样从容器中溢出；不能倒在小尺寸玻璃杯中，因此您需要`overflow: scroll;`也不想使用的你必须让你的`height: auto;`哪一个会根据它包含的文本来增加盒子的大小`min-height: 30px;`..在这里定位元素对你没有帮助..你不想要滚动，你不需要你的容器是自动的调整大小比你实际需要的？

如果你希望你的文字是这样的

```
------------------------------------------
| This is a pretty long long long long...|
------------------------------------------ 
```

不如试试这个

```
text-overflow:ellipsis; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T18:39:12.683

如果您通常看到**normalise.css**或**reset.css**他们将 html 元素的高度设置为 100%.. 做同样的事情就可以了。

```
html{
height:100% /* auto will also do */
} 
```

[http://jsfiddle.net/SwCKU/](http://jsfiddle.net/SwCKU/) ..检查这个小提琴。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T14:46:10.873

我发现问题在于其中一页缺少 DOCTYPE 声明。如果我在两个页面上使用相同的 DOCTYPE 声明，那么 CSS 的解释方式似乎完全相同。

至于如何正确地编写 CSS，如果我需要进一步的帮助，那将是一个单独的问题。

谢谢您的帮助！我对收到的所有答案都投了赞成票。

# c++ - 使用 Visual Studio 2012 初始化 openGL 时遇到问题

> ID：13826312
> 
> 赞同：0
> 
> 时间：2012-12-11T18:33:03.227
> 
> 标签：c++, opengl, visual-studio-2012

对于我的包含，我有以下内容

```
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <cmath>
#include <GL/glut.h>
#include <GL/gl.h>
#include <GL/glu.h> 
```

然而，当我尝试编译时，我得到了一大堆错误，与我正在使用的任何源代码无关。

错误 1 ​​错误 C2825: '_Iter': 必须是类或命名空间后跟 '::' c:\program files (x86)\microsoft visual studio 11.0\vc\include\xutility 364 1 mp4

错误 2 错误 C2039: 'iterator_category' : is not a member of '`global namespace'' c:\program files (x86)\microsoft visual studio 11.0\vc\include\xutility 364 1 mp4

错误 3 错误 C2146：语法错误：缺少 ';' 在标识符“iterator_category”之前 c:\program files (x86)\microsoft visual studio 11.0\vc\include\xutility 364 1 mp4

错误 4 错误 C2602：“std::iterator_traits<_Iter>::iterator_category”不是“std::iterator_traits<_Iter>”c:\program files (x86)\microsoft visual studio 11.0\vc 基类的成员\include\xutility 364 1 mp4

错误 5 错误 C2868: 'std::iterator_traits<_Iter>::iterator_category' : using-declaration 的非法语法；预期的限定名称 c:\program files (x86)\microsoft visual studio 11.0\vc\include\xutility 364 1 mp4

...ETC...

我不确定 xutility 文件是什么，或者编译器为什么抱怨它。我高度怀疑这与我使用 VS 2012 设置 openGL 的方式有关，但我不确定。谁能发现我的包含问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:30:03.447

代替 -

```
#include <GL/glut.h>
#include <GL/gl.h>
#include <GL/glu.h> 
```

只需使用 -

```
#include <GL/GL.h> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:44:54.743

我将使用我的精神力量来查看您的其他代码。;-P

你有这样的东西：

```
#include "myheader.h"
#include <iostream> 
```

在文件中`myheader.h`你有一个类声明 - 或者可能是一个结构 - 但你错过了结束分号 - 或者大括号不匹配。

或者也许你有不匹配的`#ifdef`/`#endif`子句。

然后编译器在读取标准 C++ 头文件并吐出所有这些不可读的错误时都会感到困惑。

根据经验，包含标头应按从最标准到不太标准的顺序排列：

1.  语言文件。
2.  系统文件。
3.  库文件。
4.  本地项目文件。

请记住，包含的文件只是以文本方式连接起来，然后将结果全部编译在一起。因此，一个头文件末尾的错误可能会触发下一个头文件中的编译器错误。

# .htaccess - 如何在 IIS 服务器上不使用 htaccess 或 web.config 进行重定向

> ID：13826314
> 
> 赞同：0
> 
> 时间：2012-12-11T18:33:08.693
> 
> 标签：.htaccess, redirect, iis-7, web-config

我需要将旧的 HTML 页面重定向到 WordPress 页面。该站点托管在 IIS 服务器上，但它似乎没有响应 web.config 文件。不幸的是，虽然我有 FTP 访问权限，但我无权访问主机提供商的控制面板，以防万一解决方案需要这样做。

我在网站根目录的 web.config 中尝试了以下内容

```
<configuration>
  <location path="/direct/path/to/oldpage.html">
    <system.webServer>
      <httpRedirect enabled="true" destination="http://www.mydomain.com/wordpress/path/newpage/" httpResponseStatus="Permanent" />
    </system.webServer>
  </location>
</configuration> 
```

我认为我的语法可能有问题，但即使故意弄乱它也会导致服务器没有响应，所以我猜这不是一个选择。有没有办法调用或启用不需要访问服务器设置的 web.config 文件？

我通常会执行此 PHP，因为新站点运行 WordPress，但这些文件位于单独的目录中，并且客户端已经在旧页面上具有现有的 SEO 目标。因此，最好不要更改文件扩展名。

提前感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:22:33.513

有几种方法可以在不使用重写规则、htaccess 或 web.config 路由的情况下进行重定向。

1.  在标头中包含 html 文件（旧页面）：

    ```
    <meta http-equiv="refresh" content="0;url=http://www.mydomain.com/wordpress/path/newpage/" /> 
    ```

2.  使用 javascript，将其添加到 html 文件（旧页面）的标题中：

    ```
    <script type="text/javascript">
    window.location.href='http://www.mydomain.com/wordpress/path/newpage/';
    </script> 
    ```

就 SEO 而言，这些都不是一个很好的选择。两者都不是永久重定向，也不能保证机器人会遵循。一些客户端可能关闭了 javascript，一些客户端可能会忽略 META HTTP-Equiv 标签。

# java - Groovy 可以与 Spring 共存吗？

> ID：13826315
> 
> 赞同：-1
> 
> 时间：2012-12-11T18:33:19.330
> 
> 标签：java, spring, groovy, coexistence

我最近一直在阅读有关 Groovy 的文章，并注意到 Spring 支持 Groovy？我想知道它们是否可以在同一个 Web 应用程序中共存？如果一个人做的事情比另一个人做得更好，可能会使用两全其美？如果是这样，有人有这方面的好例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:35:40.333

一流的 Web 框架之一（Grails，一种 Groovy on Rails）基于 Groovy、Hibernate 和 ... Spring Framework。所以答案是肯定的。另请注意，对于 Groovy 和 Spring 框架，SpringSource 都是主要的开发公司。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:45:46.093

Groovy 是一种语言，而 Spring 是一种框架。它们分别运行，并且由于 Spring 是一个 Java 框架，Groovy 可以使用它。

# javascript - 我用于加载外部 css 文件的 javascript 不起作用。我究竟做错了什么？

> ID：13826318
> 
> 赞同：0
> 
> 时间：2012-12-11T18:33:30.240
> 
> 标签：javascript, css

```
function loadjscssfile(filename, filetype)
{
if (filetype=="css") 
 {
    var fileref = document.createElement("link");
    fileref.rel = "stylesheet";
    fileref.type = "text/css";
    fileref.href = "filename";
    document.getElementsByTagName("head")[0].appendChild(fileref)
 }
}
loadjscssfile("cssgreen.css", "css") 
```

在我的html中我有

```
<a href="javascript:loadjscssfile('cssgreen.css','css')">Load green</a> 
```

html或js中是否有问题，我对此很陌生，所以我可能会犯一些错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T18:35:08.757

更改`"filename"`为`filename`。您正在发送硬编码字符串作为参数，而不是传递给函数的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:35:53.773

尝试删除“文件名”周围的引号，因为它是一个变量而不是带引号的字符串；

`fileref.href = filename;`

# javascript - 将二维像素数组复制到 Javascript 画布

> ID：13826319
> 
> 赞同：2
> 
> 时间：2012-12-11T18:33:39.957
> 
> 标签：javascript, canvas

使用 Javascript 画布元素，是否可以将 RGB 值的二维数组复制到画布？

```
<html>
<body>
<canvas id="canvas" height="200" width="200"></canvas>
<script type = "text/javascript">

//copy the following array to the canvas:
var arr1 = [
[[255, 255, 255],[200, 200, 0],[200, 200, 200]],
[[200, 0, 0],[200, 200, 0],[200, 200, 0]],
[[200, 200, 0],[200, 0, 0],[200, 200, 0]]
]

<script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:40:16.150

您可以使用`getImageData`/ `putImageData`。只需计算正确的索引（它是一个大数组中的 RGBA 值）：http: [//jsfiddle.net/zjypd/](http://jsfiddle.net/zjypd/)（jsFiddle 有一个放大的画布来显示像素）。

```
var arr1 = [
    [[255, 255, 255],[200, 200, 0],[]],
    [[200, 0, 0],[200, 200, 0],[200, 200, 0]],
    [[200, 200, 0],[200, 0, 0],[200, 200, 0]]
];

var ctx = document.querySelector("canvas").getContext("2d");

var height = arr1.length;
var width = arr1[0].length;

var h = ctx.canvas.height;
var w = ctx.canvas.width;

var imgData = ctx.getImageData(0, 0, w, h);
var data = imgData.data;  // the array of RGBA values

for(var i = 0; i < height; i++) {
    for(var j = 0; j < width; j++) {
        var s = 4 * i * w + 4 * j;  // calculate the index in the array
        var x = arr1[i][j];  // the RGB values
        data[s] = x[0];
        data[s + 1] = x[1];
        data[s + 2] = x[2];
        data[s + 3] = 255;  // fully opaque
    }
}

ctx.putImageData(imgData, 0, 0); 
```

# c# - 错误：System.InvalidOperationException：跨线程操作无效

> ID：13826322
> 
> 赞同：0
> 
> 时间：2012-12-11T18:33:53.263
> 
> 标签：c#, .net, visual-studio-2010, exception

我收到异常“System.InvalidOperationException：跨线程操作无效”我怀疑控件上的数据填充来自另一个线程而不是 UI。有什么理由吗？我看到调用或开始调用可以做一些好的结果，如果是这样，我如何在我的代码中使用它？还是我们有任何其他替代机制。以下是我得到的跟踪

```
 Control control = null;
                object ancestor = Parent; 
```

我可以在哪里使用 InvokeRequired，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:10:15.417

通常，您希望使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)以非阻塞方式更新 UI。

这允许您运行重复或长时间运行的后台操作，该操作可以向 UI 线程报告需要更新的详细信息。

BeginInvoke 是实现相同目的的 .NET 1.1 方式，但在很大程度上被后台工作程序所取代。

如果您使用的是 .net 4.5，您也可以使用[异步](http://msdn.microsoft.com/en-us/library/vstudio/hh156513.aspx)选项。它们可能不是一个足够直接的替代品。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-13T11:05:10.057

只需在表单加载事件中写入即可。

CheckForIllegalCrossThreadCalls =假；

在此之后您的代码正常运行......但请记住，跨线程应该是安全的......

# c# - 确定缓冲区应该有多大

> ID：13826323
> 
> 赞同：0
> 
> 时间：2012-12-11T18:33:59.783
> 
> 标签：c#, .net, windows, tcp

我正在从 tcp 流中读取数据 - 我已经使用“MLSD”命令（检索文件/目录信息）查询了 FTP 服务器。虽然由于响应大小是可变的（取决于文件/目录等的数量），但我不确定“缓冲区”应该设置多少字节。如何确保通过 tcp 流从 FTP 服务器检索所有数据？

```
 private string controlListener(int controlPort)
        {
            try
            {
                // Create a TcpClient. 
                // Note, for this client to work you need to have a TcpServer  
                // connected to the same address as specified by the server, port 
                // combination.
                controlClient = new TcpClient(ftpHost, controlPort);

                // Get a client stream for reading and writing. 
                controlStream = controlClient.GetStream();

                    // Because we don't know how many bytes are incoming for welcome message - we use a 2 second delay to retrieve all bytes within that time frame.
                    // Receive the TcpServer.response. 
                    // Buffer to store the response bytes.
                    Byte[] data = new Byte[4096];

                    // String to store the response ASCII representation.
                    String responseData = String.Empty;

                    // Get Control Stream Responce: Read the first batch of the TcpServer response bytes.
                    Int32 bytes = controlStream.Read(data, 0, data.Length);
                    responseData = System.Text.Encoding.ASCII.GetString(data, 0, bytes);
                    Console.WriteLine(responseData);

                    return responseData;
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T04:22:29.677

在马克的回答中......我使用这种方法，你应该很容易看到如何合并它。

```
 /// <summary>
    /// Read TCP response, this simple method can be re-used elsewhere as needed later.
    /// </summary>
    /// <returns></returns>
    private static string ReadResponse(NetworkStream networkStream)
    {
        // Check to see if this NetworkStream is readable.
        if (networkStream.CanRead)
        {
            var myReadBuffer = new byte[256]; // Buffer to store the response bytes.
            var completeMessage = new StringBuilder();

            // Incoming message may be larger than the buffer size.
            do
            {
                var numberOfBytesRead = networkStream.Read(myReadBuffer, 0, myReadBuffer.Length);
                completeMessage.AppendFormat("{0}", Encoding.ASCII.GetString(myReadBuffer, 0, numberOfBytesRead));
            } while (networkStream.DataAvailable);

            return completeMessage.ToString();
        }
        return null;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T18:55:52.680

读取/接收应该在循环中使用，读取直到您获得 EOF（读取零字节）或您期望的数据量（使用框架 API）。您当前的代码无效：即使发送了 483628 个字节，单个字节也是在一次调用 Read 中返回的合法数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T19:03:38.460

我用这个...

```
 public static byte[] readFullStream(Stream st, Int32 BufferSize)
        {
            try
            {
                Monitor.Enter(_lock);
                byte[] buffer = new byte[BufferSize];
                Int32 bytesRead;
                MemoryStream ms = new MemoryStream();
                bool finished = false;
                while (!finished)
                {
                    bytesRead = st.Read(buffer, 0, buffer.Length);
                    if (bytesRead > 0)
                    {
                        ms.Write(buffer, 0, bytesRead);
                    }
                    else
                    {
                        finished = true;
                    }
                }
                return ms.ToArray();
            }
            finally
            {
                Monitor.Exit(_lock);
            }
        } 
```

# google-chrome - 带有 NaCl 扩展的音频效果

> ID：13826330
> 
> 赞同：2
> 
> 时间：2012-12-11T18:34:37.757
> 
> 标签：google-chrome, audio, google-chrome-extension, google-nativeclient

我刚刚开始研究 NaCl，希望能够制作音频浏览器扩展。文档中有一个正弦波演示，因此制作合成器似乎很简单。

我很想知道是否可以在输出之前捕获浏览器音频流，以便可以应用实时效果。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T19:41:04.667

不仅是可能的。我已经做到了。您创建一个 ScriptProcessorNode，其 onaudioprocess 回调获取输入缓冲区并通过 postMessage 将其传递给等待的 NaCl 模块。一旦 NaCl 模块完成处理，它就会通过 postMessage 将其发送回 JavaScript。ScriptProcessorNode 必须输出一些内容，因此您会引入 1 帧延迟，并且 ScriptProcessorNode 会复制从 NaCl 接收到的最近处理的输出。

流程如下所示：

ScriptProcessorNode -> postMessage 输入缓冲区到 NaCl

ScriptProcessorNode -> 将从 NaCl 接收到的最新缓冲区复制到输出缓冲区。

NaCl -> 接收音频样本缓冲区，对其进行处理并将其发回。

如果您希望我在 GitHub 上发布代码或有其他问题，请告诉我。

HTH，约翰

# string - 如何将不使用空格的泰语句子拆分成单词？

> ID：13826331
> 
> 赞同：14
> 
> 时间：2012-12-11T18:34:42.953
> 
> 标签：string, parsing, split, nlp

如何从泰语句子中拆分单词？英语我们可以用空格分割单词。

示例：`I go to school`, split =`['I', 'go', 'to' ,'school']` 通过仅查看空格来拆分。

但是泰语没有空间，所以我不知道该怎么做。示例将 ฉันจะไปโรงเรียน 吐出 txt 文件到 ['ฉัน' 'จะ' 'ไป' 'โรง' 'เรียน'] = 输出另一个 txt 文件。

是否有任何程序或库可以识别泰语单词边界和拆分？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T18:49:18.107

2006 年，有人为[Apache Lucene](https://issues.apache.org/jira/browse/LUCENE-503)项目贡献了代码来完成这项工作。

他们的方法（用 Java 编写）是使用[BreakIterator](http://docs.oracle.com/javase/7/docs/api/java/text/BreakIterator.html)类，调用`getWordInstance()`以获取泰语的基于字典的单词迭代器。另请注意，对[ICU4J](http://icu-project.org/)项目有明确的依赖关系。我在下面粘贴了他们代码的相关部分：

```
 private BreakIterator breaker = null;
  private Token thaiToken = null;

  public ThaiWordFilter(TokenStream input) {
    super(input);
    breaker = BreakIterator.getWordInstance(new Locale("th"));
  }

  public Token next() throws IOException {
    if (thaiToken != null) {
      String text = thaiToken.termText();
      int start = breaker.current();
      int end = breaker.next();
      if (end != BreakIterator.DONE) {
        return new Token(text.substring(start, end), 
            thaiToken.startOffset()+start,
            thaiToken.startOffset()+end, thaiToken.type());
      }
      thaiToken = null;
    }
    Token tk = input.next();
    if (tk == null) {
      return null;
    }
    String text = tk.termText();
    if (UnicodeBlock.of(text.charAt(0)) != UnicodeBlock.THAI) {
      return new Token(text.toLowerCase(), 
                       tk.startOffset(), 
                       tk.endOffset(), 
                       tk.type());
    }
    thaiToken = tk;
    breaker.setText(text);
    int end = breaker.next();
    if (end != BreakIterator.DONE) {
      return new Token(text.substring(0, end), 
          thaiToken.startOffset(), 
          thaiToken.startOffset()+end,
          thaiToken.type());
    }
    return null;
  } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-05T22:31:35.190

有多种方法可以进行“泰语单词标记化”。一种方法是使用基于字典或基于模式的。在这种情况下，算法将遍历字符，如果它出现在字典中，我们将算作一个单词。

此外，最近还有一些库来标记泰语文本，它训练深度学习来标记[最佳语料库](https://www.nectec.or.th/corpus/index.php?league=pm)上的泰语单词，包括[rkcosmos/deepcut](https://github.com/rkcosmos/deepcut)、 [pucktada/cutkum](https://github.com/pucktada/cutkum)等。

的示例用法`deepcut`：

```
import deepcut
deepcut.tokenize('ฉันจะไปโรงเรียน')
# output as ['ฉัน', 'จะ', 'ไป', 'โรง', 'เรียน'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T12:02:20.000

中文和日文最简单的分割器是使用基于贪心字典的方案。这对于泰语应该也适用——获取泰语单词字典，并在当前字符处匹配字典中存在的该字符的最长字符串。这会让你成为一个相当不错的分割器，至少在中文和日文中是这样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-15T15:59:31.560

这是使用 Kotlin 和 ICU4J 将泰语文本拆分为单词的方法。ICU4J 是比 Lucene 的版本（最后更新 6/2011）更好的选择，因为 ICU4J 不断更新并且有额外的相关工具。`icu4j`在[mvnrepository.com](https://mvnrepository.com)上搜索以查看所有内容。

```
 fun splitIntoWords(s: String): List<String> {
    val wordBreaker = BreakIterator.getWordInstance(Locale("th"));
    wordBreaker.setText(s)
    var startPos = wordBreaker.first()
    var endPos = wordBreaker.next()

    val words = mutableListOf<String>()

    while(endPos != BreakIterator.DONE) {
        words.add(s.substring(startPos,endPos))
        startPos = endPos
        endPos = wordBreaker.next()
    }

    return words.toMutableList()
} 
```

# c++ - 为什么在linux信号事件中未定义静态成员的使用

> ID：13826333
> 
> 赞同：1
> 
> 时间：2012-12-11T18:34:46.307
> 
> 标签：c++, linux, static

我的班级如下所示：

```
AppStart{
static void SignalHandler(int signal){
    std::cout<< log_file_;
}
static void Start(){
//Set log_file_ path 
//Register signal handler 
}
static string log_file_;
} 
```

当第一次通过使用命令发送信号来调用 SignalHandler 时，`kill`它正在打印正确的值。但是当它被多次调用时，它会给出未定义的行为。为什么静态变量在程序执行完成之前就被破坏了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T18:37:58.580

调用`operator<<()`on`std::cout`不是一个[异步信号安全函数](https://www.securecoding.cert.org/confluence/display/seccode/SIG30-C.+Call+only+asynchronous-safe+functions+within+signal+handlers)……因此您不应该在信号处理程序中使用它。对其的任何使用都将调用未定义的或充其量是不确定的行为。`write()`您可以在我提供的链接中看到输出的可能替代候选列表，例如低级等。

# html - mailto商标编码

> ID：13826340
> 
> 赞同：0
> 
> 时间：2012-12-11T18:35:32.123
> 
> 标签：html, encoding, mailto

我正在尝试在正文中设置带有商标符号的 mailto 链接，如下所示：

```
mailto:?body=Starttext PRODUCT <sup>tm</sup> - Award  Logo %0A%0A link%26type=2%26productName=bla%0A%0AEnd 
```

我现在的问题是，`tm`某些电子邮件客户端的格式不正确。我的问题是，我怎样才能像`&`→那样对它进行编码`%26`，或者 TM 在哪里形成良好的格式？

在我的邮件客户端 Outlook 中，它看起来不错，但在客户的客户端中，它看起来像垃圾。

有什么建议么？

我不确定是否可以`tm`在 mailto 链接中填写编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:50:54.637

尝试这个：

```
link.href = "mailto:?body=" + encodeURIComponent("Starttext PRODUCT ™ - Award Logo"); 
```

请注意，缺少一些重要的细节：

*   代码
*   您的源文件的物理编码是什么
*   从您的服务器发送的 http 字符集标头是什么

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-11T18:42:38.640

TM 的 URL 编码是`%99`

这是一个很好的资源供将来参考：

[HTML URL 编码参考](http://www.w3schools.com/tags/ref_urlencode.asp)

# tfs - TFS 2012 仅检索现有文件冲突

> ID：13826342
> 
> 赞同：1
> 
> 时间：2012-12-11T18:35:38.713
> 
> 标签：tfs, visual-studio-2012

当我“获取最新版本”时，我在 Visual Studio 2012 中使用 TFS 时遇到问题。每当发生冲突时，都是“现有文件”类型，唯一的选择是采用服务器版本或本地版本，无法进行合并操作，而且这种情况最近才发生，但我不确定什么时候。

根据我对该主题的一些阅读，这是由文件未绑定到源代码控制引起的。我没有对 Visual Studio 本身之外的文件进行任何编辑。每当服务器具有本地版本的更新版本时，无论是否在本地进行了更改，这些冲突似乎总是会发生。

有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:54:09.947

首先，除非您专门更改了这些文件，否则请始终使用服务器版本并让它自然地解决冲突。我看到这个错误最常发生的地方是在使用门控构建的环境中运行时，或者在执行包含架子集的标准构建并告诉构建是否成功签入时。发生的情况是您在本地签出这些文件，并使用与签入构建服务器相同的更改。如果您使用的是封闭式构建，则可以选择在本地保留您的 chenges。确保在“签入”时**未设置它。**我将 Check In 放在引号中，因为在封闭式构建中，您实际上并没有签入，而是使用您的更改创建了一个架子集，并在构建服务器上的最新代码之上合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-07T11:40:56.983

我的解决方案很简单：我右键单击我的分支，然后单击 Advanced -> Get Specific Version

在类型上选择 Last version，选中两个复选框，然后单击 Get。

希望它有用。请让我知道这对你有没有用。

# linux - SSH 下的 Unix 后台作业

> ID：13826345
> 
> 赞同：1
> 
> 时间：2012-12-11T18:35:47.540
> 
> 标签：linux, process, ssh, amazon-ec2, background-process

我有一个在 EC2 上运行的 Linux 实例，我在该实例上运行了一些服务器（我编写的一些服务器）。我将其作为后台作业运行并退出 SSH。

重新登录后，我在输入“工作”时找不到工作。终止它的唯一方法是使用：找到端口正在运行的进程的PID，`lsof -i :port`然后将其杀死：`kill -9 PID`。

无论如何，我是否可以真正回到 SSH 并找到它在下面运行`jobs`？为什么更改会话时该过程会消失？

我总是使用 GNU Screen，当使用 Screen 时，这个过程仍然会出现。我只是想知道为什么它在不运行屏幕时会“消失”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:39:02.207

`jobs`仅适用于启动作业的 shell。

您应该查看`screen`or `tmux`（或`byobu`作为两者的包装器）。

它们允许你启动一个 shell 会话，当你注销时可以分离它，当你回来时可以重新连接......

# database - 在 Ubuntu 上安装 Informix

> ID：13826347
> 
> 赞同：2
> 
> 时间：2012-12-11T18:35:59.360
> 
> 标签：database, ubuntu, installation, informix

有人可以建议我是否可以在ubuntu上安装informix数据库。

我的 Ubuntu 版本是 11.10

是否免费提供。

如果是，请给我一些友好的安装指南或链接。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T09:40:28.037

是的，您可以在包括 Ubuntu 在内的许多 Linux 发行版上安装 Informix。

您必须拥有 IBM ID（免费提供）才能从[http://www-01.ibm.com/software/data/informix/downloads.html](http://www-01.ibm.com/software/data/informix/downloads.html)下载 Informix 的开发者版本。然后您必须选择您的服务器是 32 位还是 64 位版本的 Linux。下载适当的 tar 文件后，您必须解压缩它，阅读文档 (README.html)，按照其中的描述准备环境并运行安装程序。在 README.html 中有快速安装说明，我觉得很友好 :-)

# jquery - Django 调试工具栏与 jquery UI 冲突

> ID：13826349
> 
> 赞同：1
> 
> 时间：2012-12-11T18:36:14.193
> 
> 标签：jquery, django, jquery-ui, conflict, django-debug-toolbar

在模板中，我导入创建对话框的 jquery、jqueryUI 和 java 脚本代码：

```
<!DOCTYPE html>
<html>
<head>

    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}/css/jquery-ui-1.9.2.custom.css"/>

    <script type="text/javascript" src="{{ STATIC_URL }}/js/jquery-1.8.3.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}/js/jquery-ui-1.9.2.custom.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}/js/my_script.js"></script>
</head>
<body>
<div id="bla" title="Basic dialog">
    <p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized
    and closed with the 'x' icon.</p>
</div>
</body>
</html> 
```

my_script.js 的内容：

```
$(function() {
    $( "#bla" ).dialog();
}); 
```

对话框出现，调试工具栏可见，但是当我单击对话框的“关闭”按钮时，调试工具栏也会消失。此外，当我单击任何面板时，什么也没有发生。

有人能帮忙吗？

# javascript - 带计时器的 OnKeyUp 事件？

> ID：13826351
> 
> 赞同：0
> 
> 时间：2012-12-11T18:36:20.077
> 
> 标签：javascript, jquery

JQuery 对我来说是一种新事物，我使用 ajax 建立了一个搜索建议系统，该系统效果很好，但由于 onKeyUp 限制而运行速度很慢。经过一番阅读，我发现我可以在事件上设置一个计时器。所以我想要做的是在“prod-name-input”输入字段 onKeyUp 事件上设置一个计时器，以便每 2 秒调用一次。我在网上找到了一些示例，但我无法成功地将它们应用到我的代码中，我想知道是否有人可以指导我了解它是如何工作的？提前谢谢了。

我的输入框

```
<input onKeyUp="search(this.value)" type="text" class="prod-name-input"/> 
```

JS

```
function search(searchword) {
        $('.smart-suggestions').load('invoice-get-data.php?searchword=' + searchword);  
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T18:39:33.503

最快的方法实际上是使用 keydown 事件。（它作用于键被按下而不是被释放，这总是更快。）

```
var timer;
$(".prod-name-input").keydown(function(){
    var self = this;
    clearTimeout(timer);
    timer = setTimeout(function(){
        $(".smart-suggestions").load('invoice-get-data.php?searchword=' + self.value);
    },250);
}); 
```

如果用户停止输入超过 1/4 秒，则会加载结果。如果发生的请求过多，请将延迟增加到 500。

我将逐行查看代码并附上注释：

```
// declare a variable that will hold a reference to the timer we create
var timer;
// bind a keydown event to all existing elements that have the prod-name-input class
$(".prod-name-input").keydown(function(){
    // store a reference to the clicked element so we can access it inside of setTimeout()
    var self = this;
    // clear existing timer stored in the timer variable (if any)
    clearTimeout(timer);
    // create a new timer and store it in the timer variable
    timer = setTimeout(function(){
        // load content
        $(".smart-suggestions").load('invoice-get-data.php?searchword=' + self.value);
    // give the timer a 250ms delay (0.25 seconds or 1/4 of a second)
    },250);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:47:00.993

underscore.js 中有一个节流函数可以处理这种情况。你可以看到他们的[注释源](http://underscorejs.org/docs/underscore.html#section-62)代码，或者如果你在你的项目中使用 underscore.js，[这里有一些使用文档](http://underscorejs.org/#throttle)

# python - 为什么我只有最后一个条目写入文件

> ID：13826354
> 
> 赞同：0
> 
> 时间：2012-12-11T18:36:35.383
> 
> 标签：python, string, list

我正在将文件写入磁盘，但在写入之前，我将 QListWidget 中的所有项目收集到文本变量中，每行由“\n”分隔，但我没有得到所有行，而是只得到最后一行：

```
def makeBatFile(self):
    text=""
    for each in xrange(self.listWidget.count()):
        text="echo [Task Id:%s]\n" % each
        text=text+ self.listWidget.item(each).text() +"\n"
        print text
    self.writeBatFile("batch",text) 
```

尽管 for 循环内的 print 打印了所有行，但我无法从 for 循环内调用 writeBatfile 方法，因为当我想要写入所有列表项时，它将尝试将列表中的项目数写入文件在一个文件中...

```
def writeBatFile(self,do="single",task=None):
    self.task=task
    now = datetime.datetime.now()

    buildCrntTime=str(now.hour) +"_" + str(now.minute)
    selected=str(self.scnFilePath.text())
    quikBatNam=os.path.basename(selected).split(".")[0]+"_"+buildCrntTime+".bat"
    if do !="batch":
        self.batfiletoSave=os.path.join(os.path.split(selected)[0],quikBatNam)
        self.task = str(self.makeBatTask())
    else:
        self.batfiletoSave=os.path.join(self.batsDir,buildCrntTime+".bat")
    try:
        writeBat=open(self.batfiletoSave,'w')
        writeBat.write(self.task)
        self.execRender()
    except: pass
    finally: writeBat.close() 
```

在构建要传递给 writeBatFile 方法的内容时我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:47:39.757

您正在重新定义的每次迭代`text`，`text=`因此不再引用上一次循环迭代的值，因此只有`text`循环的最终迭代中的值被传递给`writeBatFile`

一种解决方案是在每次迭代中创建一个列表`makeBatFile`并在其中附加`text`变量。然后可以通过将其传递到`writeBatFile`文件中并将其写入文件`.writelines`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:49:17.433

有一个错误：在你做的每个循环中

```
text="echo [Task Id:%s]\n" % each 
```

它会转储`text`上一次迭代中的任何内容。相反，做

```
text += "echo [Task Id:%s]\n" % each 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T18:50:02.787

您正在 for 循环的每个循环中覆盖您的文本变量。您应该将每一行附加到文本变量：

```
def makeBatFile(self):
    text=""
    for each in xrange(self.listWidget.count()):
        text += "echo [Task Id:%s]\n" % each
        text += self.listWidget.item(each).text() +"\n"
        print text
    self.writeBatFile("batch",text) 
```

+= 运算符是以下操作的快捷方式：

```
text = text + othertext 
```

这样，您将在循环的每次迭代中将字符串附加到文本变量，而不是将变量重新分配给新字符串。

# inheritance - 抽象类的继承

> ID：13826361
> 
> 赞同：0
> 
> 时间：2012-12-11T18:36:54.973
> 
> 标签：inheritance, diagram

在下图中，`AbstractPainter`是一个实现`IPainter`. `ContemporaryPainter`并且`PastPainter`是扩展的类`AbstractPainter`。考虑到这一点，做`PastPainter`和`AbstractPainter`扩展`IPainter`？或者他们只是延长`AbstractPainter`？

谢谢！![图表](../Images/63e8709f4135eea833eab48903fc2d40.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:40:22.427

他们只是扩展`AbstractPainter`。他们确实实施`IPainter`。所以你可以做

```
IPainter painter = new PastPainter();
AbstractPainter otherPainter = new ContemporaryPainter(); 
```

它仍然有效。

但是，当在集合中引用它们时，例如

```
List<? extends IPainter> list = new ... 
```

它仍然使用“扩展”一词。不过，您仍然不称其为“扩展接口”。

唯一的“扩展界面”是如果您制作了类似以下代码段的内容：

```
public interface IPolymath extends IPainter {
    List<String> getOtherProfessions();
} 
```

其他一些接口扩展了原始接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:44:30.313

是的`PastPainter`，并且`ContemporaryPainter`是类型，`IPainter`因为它们扩展`AbstractPainter`了 which implements `IPainter`。

例如：假设`ClassA`implements 或 extends `ClassB`。然后如果`ClassC`extends/implements `ClassA`then 自动`ClassC`也是`ClassB`.

任何子类都是它的超类的类型，也是它的超类继承自的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T18:39:53.587

在 Java 中，正确的思考方式是扩展抽象类并实现接口。

例如，a`LinkedList`实现了`List`接口，而`AbstractSequentialList`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-23T17:50:25.853

从语义的角度来看，您示例中的接口和抽象类是多余的。抽象类的定义就足够了。但是，对您的问题的明确符合 UML 的答案是，AsbtractPainter 不直接实现接口 IPainter，而是专门为您抽象类而不是抽象的类的实例。定义专用类可以替代通用类也很重要。

# r - 如何在 R 中可视化玩家之间的传递流量数据？

> ID：13826363
> 
> 赞同：2
> 
> 时间：2012-12-11T18:37:22.023
> 
> 标签：r, visualization, data-visualization

我有来自篮球比赛的传球数据，我有 100 多行表示同一支球队的球员之间的传球，如下所示：

```
 Player
1  21
2  12
3   5
4  21
5  12
6   2
7  12
8   5
9   3
.. 
```

我想可视化这些数据，如下图所示。在每一行，我想在玩家之间画一条线。例如，在第一排之后，球从“球员 21”移动到“球员 12”，那一刻，我想在“球员 21 和 12”之间画一条线，方向无关紧要。

示例图片：http: [//img5.imageshack.us/img5/9885/samplex.gif](http://img5.imageshack.us/img5/9885/samplex.gif)

我还想为这些线条添加颜色[创建一个颜色图例]，它将说明玩家之间发生了多少次传球。例如，如果“球员 12 和 21”之间的线是“绿色”，这意味着他们之间的传球高于“XXX”，根据“颜色传奇”。

我怎样才能想象这个？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T19:48:13.127

这是一种使用`ggplot2`. 使用[这篇文章](http://dgkontopoulos.wordpress.com/2012/11/22/setting-a-background-image-in-ggplot2/)`*.ppm`中的想法，我们通过使用 ImageMagick将其转换为添加背景图像。球员的位置在`coords`，所以你可能想改变他们，但因为`ylim`他们`xlim`会留在正确的区域。

![在此处输入图像描述](../Images/196d1f285433b2dde3aa5774522075ae.png)

```
library(ggplot2)
library(pixmap)

data <- data.frame(Player = c(2, 12, 21, 5, 3, 21, 5, 12, 3, 12, 21, 5))
p <- data.frame(Pass1 = data[-nrow(data), ], Pass2 = data[-1, ])
p <- apply(p, 1, function(i) paste(sort(i), collapse = " "))
p <- factor(table(p)[p])
coords <- replicate(2, runif(nrow(unique(data))))
xmap <- setNames(coords[,1], unique(data$Player))
ymap <- setNames(coords[,2], unique(data$Player))
plotData <- data.frame(x = xmap[as.character(data$Player)], 
                       y = ymap[as.character(data$Player)],
                       Player = factor(data$Player))
plotData <- plotData[rep(1:nrow(plotData), each = 2),]
plotData <- cbind(plotData[-c(1, nrow(plotData)),], id = rep(p, each = 2))
image <- read.pnm("p.ppm")

as.raster.pixmapRGB <- function(x) {
  nr <- nrow(x@red)
  r <- rgb((x@red), (x@green), (x@blue))
  dim(r) <- x@size
  r
}

ggplot(plotData, aes(x = x, y = y, label = Player)) +
  annotation_raster(image, -Inf, Inf, -Inf, Inf, interpolate = TRUE) + 
  geom_text(vjust = -1, colour = "red") + xlab(NULL) + ylab(NULL) +
  geom_point(size = 5) + geom_path(aes(colour = id)) + xlim(c(-0.1, 1.1)) +
  theme(axis.ticks = element_blank(), axis.text = element_blank()) +
  scale_colour_discrete(name = "Number of passes") + ylim(c(-0.1, 1.1)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:28:01.047

James Kierstead 在[http://www.jameskeirstead.ca/r/slopegraphs-in-r/上有一个使用 R 的坡度图示例](http://www.jameskeirstead.ca/r/slopegraphs-in-r/)

David Ruau 在[https://github.com/bobthecat/codebox/blob/master/table.graph.r有一个坡度图 R 程序](https://github.com/bobthecat/codebox/blob/master/table.graph.r)

Nathan Yau 在他的书*Visualize This*中使用斜率图有一个很好的示例。如果我没记错的话（现在我没有这本书），他使用 R。

不幸的是，我无法使用 R 找到任何和弦图（见下文）。

* * *

**Java 选项**

Ben Fry 有一个[使用 Java/Processing 的斜率图演示](http://benfry.com/salaryper/)

* * *

**JavaScript 选项**

如果你愿意尝试 JavaScript，有几个使用[D3](http://d3js.org/)的选项：

*   和弦图——2个例子：[简单的和弦](http://bl.ocks.org/4062006)或[uberdata](http://bost.ocks.org/mike/uberdata/)
*   斜率图——[示例](http://skedasis.com/d3/slopegraph/)

有关更多示例，请参阅[D3 库。](https://github.com/mbostock/d3/wiki/Gallery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-02T17:37:03.110

在 R 中，可以通过[**circlize**](http://cran.r-project.org/web/packages/circlize/)包使用**和弦图**来实现此目的[](http://cran.r-project.org/web/packages/circlize/)

# linux - Apache 在实时站点上删除本地 IP 192.168.xx

> ID：13826364
> 
> 赞同：0
> 
> 时间：2012-12-11T18:37:25.687
> 
> 标签：linux, web-services, apache, http

我通常使用我的本地 ip`http://192.168.x.x/domain.com`在本地进行测试。如何配置 Apache 以将其更改为`http://domain.com`删除我的本地 IP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:53:49.460

由于您提到它是您的本地 IP，我将假设您在自己的机器或某些个人服务器上工作。我还将假设您的 domain.com dns 指向正确的 IP 地址（如果不是这种情况，您可以通过使用该映射在 /etc/hosts 中添加一行来测试这一点）。

我还假设您希望对您的网络服务器的所有调用都进入 /path/to/website/domain.com。（因为另一张海报涵盖了另一种可能的解释）

为此，您需要在适当的配置文件中设置以下内容（这将取决于您的 linux 发行版）：

```
<VirtualHost *:80>
     ServerAdmin webmaster@domain.com
     ServerName domain.com
     DocumentRoot /path/to/website/domain.com/
</VirtualHost> 
```

我希望这会有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:41:42.187

在相关的 apache 配置文件（例如 apache2.conf 或 000-default）中，您应该会看到类似这样的条目：

```
<VirtualHost *:80>
        ServerAdmin webmaster@domain.com

        DocumentRoot /var/www
        ServerName www.domain.com
        ServerAlias domain.com 
```

您将需要编辑 ServerName 和 ServerAlias 节点以匹配`domain.com`您的案例。

# javascript - 如何使用 Live REST API 创建联系人？

> ID：13826365
> 
> 赞同：0
> 
> 时间：2012-12-11T18:37:33.530
> 
> 标签：javascript, api, rest, live

我在使用 Javascript 的 Live REST API 上有一个真正的问题。

实际上，我正在尝试从用户 id 获取联系人（登录后）并插入新的。但我有一个“标题”问题。

这是我的连接功能：

```
$(window).ready(function() {
    $("#ifConnect").hide();

    WL.login({
        scope: "wl.signin, wl.basic, wl.emails, wl.contacts_create"
    }).then(
        function (response) {
            loadContacts(); //which load properly my contacts
        }
    );
}); 
```

这是我创建的联系方式：

```
var contact = { 
    first_name: "First", 
    last_name: "Last"
};

WL.api({
    path: "me/contacts", 
    method: "POST",
    body: contact
}).then(
    function (response) {
        alert(JSON.stringify(response));
    },
    function (response) {
        alert(JSON.stringify(response));
    }
); 
```

不幸的是，调用了第二个函数，并给我一个标题警报： `{"error":{"code":"request_body_invalid_media_type","message":"The request doesn't include a Content-Type header."}}`

有人可以帮助我吗？非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:56:59.400

错误描述信息量很大。尝试将 Content-Type 设置为*application/json*或将正文放在本例中：

```
 function (response) {
         WL.api({
            path: "me/contacts",
            method: "POST",
            body: {
                "first_name": "First",
                "last_name": "Last"
            } 
```

# oracle - 行数 > 10B 的 Oracle 表

> ID：13826367
> 
> 赞同：0
> 
> 时间：2012-12-11T18:37:49.387
> 
> 标签：oracle, vldb

您在查询具有 >10B 行的 Oracle 表方面有何经验？表被很好地分区可以使用“noraml”机器（集群）来完成，还是 - 它需要一台巨大的机器吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:46:57.820

行数本身不是问题。系统是否符合规范还取决于数据访问模式、存储性能（通常严重不足）、访问它的会话数、是否存在预先计算的摘要等。

所以，我不会说一定需要特殊的硬件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:40:03.393

假设表是分区的并且查询指定了分区键，那么表的大小是无关紧要的。您唯一需要关心的是为了执行查询而需要扫描的分区的大小。这通常只是一个或两个分区，您应该能够用最少的硬件资源来完成。

当然，如果你有 100 亿行数据，这通常意味着你有一个相对较大的公司的数据仓库，这是更大的问题。大公司有大量员工希望能够针对数据仓库进行报告。他们有大量需要进入数据仓库的罐装报告。他们有大量的数据源。他们有大量需要填充的数据集市。它们的加载窗口相对较短。这些需求推动了对更多硬件的需求，有时还需要像 Exadata 盒子这样的专用硬件。

# objective-c - 选择时 UITableViewCell 背景颜色中的目标 c 子视图

> ID：13826368
> 
> 赞同：1
> 
> 时间：2012-12-11T18:37:53.213
> 
> 标签：objective-c, uitableview, addsubview

大家好，我对 ios 还很陌生，所以还有很多东西要学，我将一个具有动态背景颜色的子视图从 web 服务添加到表格单元格，但是在选择子视图时背景颜色正在更改为表格单元格选定的状态颜色，我知道为什么它这样做是因为它改变了视图中的所有子视图背景颜色，我似乎无法弄清楚如何阻止它也改变子视图背景颜色，我希望它保持选择的动态颜色？

```
array = [colors objectAtIndex:indexPath.row];
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        UIView *colorBox = [[UIView alloc] initWithFrame:CGRectMake(10,10,20,20)];
        [colorBox setTag:1];            
        [cell.contentView addSubview:colorBox];
    }

 UIView *box = [cell viewWithTag:1];
 box.backgroundColor = [self colorForBox:array.color];

 return cell; 
```

然后得到颜色

```
- (UIColor *)colorForTransport:(NSString*)Line {

if([Line isEqualToString:@"Brown"])
    return [UIColor colorWithRed:0.682 green:0.38 blue:0.094 alpha:1];

else if([Line isEqualToString:@"Red"])
    return [UIColor colorWithRed:0.894 green:0.122 blue:0.122 alpha:1];

else
    return DefaultBackgroundColor;
} 
```

任何帮助将不胜感激谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:00:53.243

如果您使用的是普通样式表，则需要分配初始化具有所需背景颜色的新 UIView，然后将其分配给 selectedBackgroundView。

或者类似的东西，

```
cell.selectionStyle = UITableViewCellSelectionStyleGray; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T15:42:30.473

您可以创建从 UIView 继承的新子类。然后重写 setBackgroundColor 什么都不做。并添加您自己的方法来设置背景颜色。这样，系统将无法覆盖您的背景颜色，您可以使用新方法设置任何颜色:)

```
-(void) setBackgroundColor:(UIColor *)backgroundColor
{
    //do nothing
}

//System do not know this method :)
-(void) mySetBackgroundColor:(UIColor *)backgroundColor
{
    [super setBackgroundColor:backgroundColor];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T08:39:02.500

UITableViewCell 出于某种原因在选择时更改了所有子视图的背景颜色。

这可能会有所帮助：

[DVColorLockView](https://github.com/DylanVann/DVColorLockView)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T18:45:46.443

您可以尝试更改 tablecellview 的 selectedBackgroundView 子视图以获取您正在寻找的颜色变化。

有关该属性的更多信息，请参阅[http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/occ/instp/UITableViewCell/selectedBackgroundView](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/occ/instp/UITableViewCell/selectedBackgroundView)

# html - 什么 HTML 5 标签最适合分页容器？

> ID：13826374
> 
> 赞同：4
> 
> 时间：2012-12-11T18:38:22.393
> 
> 标签：html, semantic-web, semantic-markup

我有一个 div，里面只有分页相关的内容。什么是最好的元素/标签？

我调查过，`<nav>`但它不适合，因为分页不是主要的导航。

```
<div class="paginationBar">
    <button class="previous">Previous</button>
          <button>1</button>
          <button>2</button>
          <button>3</button>
    <button class="next">Next</button>
</div> 
```

对我来说，外部 div 似乎可以放在一边，因为它与主要部分相关并且在文章元素之外。

非常欢迎任何其他改进/修复我的代码的建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-14T14:21:17.377

`nav` *如果分页是在该*祖先分段元素*（而不是整个页面！）中导航内容的主要方式，则*它是正确的容器。*通过一些示例查看[我的回答（对类似问题的回答）](https://stackoverflow.com/a/27420775/1591669)。*

 *用于分页`aside`可能不是正确的元素。但是，如果它是该内容的主要导航，则*使用*`nav`inside可能是正确的。`aside` *`aside`*

 *您应该使用`a`而不是`button`，因为分页（顾名思义）会导致不同的*页面*/URL。然后你可以使用这些`rel`值`next`和`prev`对应的分页链接。如果您坚持使用`button`但仍然有单独的页面，则可以使用该`link`元素来提供这些`rel`值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T18:45:23.970

我认为你根本不需要那个元素。你的按钮属于一起，应该保持在一起，比如

```
<div class="paginationBar">
    <button class="previous">Previous</button>
    <button>1</button>
    <button>2</button>
    <button>3</button>
    <button class="next">Next</button>
</div> 
```

在后端或前端插入动态按钮非常容易（`.insertAfter()`例如 jQuery）

* * *

如果您不必支持某些旧的 IE，您也可以摆脱按钮上的类并使用`:first-child`-`:last-child`来设置它们的样式：

```
<div class="paginationBar">
    <button>Previous</button>
    <button>1</button>
    <button>2</button>
    <button>3</button>
    <button>Next</button>
</div> 
```

* * *

**更新**

谈到按钮容器，最合适的标签可能是`<nav>`.

> *其他可能的用途`<nav>`*
> 
> 1.  目录
> 2.  **上一个/下一个按钮（或分页）**
> 3.  搜索表格
> 4.  面包屑

[*资源*](http://html5doctor.com/nav-element/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-13T01:08:42.327

正如其他人指出的那样，最好的方法是使用`<nav>`锚标签。这是一个包含 5 页的示例，其中当前页码为 3：

```
<nav>
  <ul class="pagination">
    <li><a href="?page=1" rel="first">First</a></li>
    <li><a href="?page=2" rel="prev">Previous</a></li>

    <li><a href="?page=1">1</a></li>
    <li><a href="?page=2">2</a></li>
    <li class="active"><a href="?page=3">3</a></li>
    <li><a href="?page=4">4</a></li>
    <li><a href="?page=5">5</a></li>

    <li><a href="?page=4" rel="next">Next</a></li>
    <li><a href="?page=5" rel="last">Last</a></li>
  </ul>
</nav> 
```

锚标记如此重要的原因是该`rel`属性使您的页面可抓取。

另请注意，如果您的环境已`bootstrap.css`加载，那么它将自动识别`pagination`和`active`CSS 类。您应该为这些类提供自己的样式，以防万一`bootstrap.css`未加载。结果应如下所示：

![简单的寻呼机](../Images/c4707d0b7d09b428a8f6c5dfddaaf5fd.png)

现在您可以使用 JavaScript 拦截`<a>`元素的`click`事件并使用您喜欢的任何技术获取下一页。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T20:15:41.980

```
<ol class="paginationBar">
    <li><button class="previous">Previous</button></li>
          <li><button>1</button></li>
          <li><button>2</button></li>
          <li><button>3</button></li>
    <li><button class="next">Next</button></li>
</ol> 
```

这有点帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T09:21:55.000

Please have a look at the [XHTML Vocabulary](http://www.w3.org/1999/xhtml/vocab/). It includes link relation types for next, prev etc.

**edit:** [link relation types in HTML 5](http://www.w3.org/TR/html5/links.html#link-type-alternate)**

# iphone - 是否可以将用户定义的 XCode 构建设置导出到环境变量

> ID：13826375
> 
> 赞同：4
> 
> 时间：2012-12-11T18:38:23.403
> 
> 标签：iphone, ios, xcode

我为各种配置做了一些构建设置，例如

![构建设置](../Images/59a3528712e04826a8897560ca201ae4.png)例如

我可以像这样在各种文件（例如 info.plist）中访问它们：

```
${MYTESTSETTING} 
```

但是，是否可以在命令行环境中获取值？例如，在 Jenkins 的 xcodebuild 之后

我努力了

```
echo ${MYTESTSETTING} 
```

和

```
echo $MYTESTSETTING 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-11T19:55:02.943

```
xcodebuild -showBuildSettings 
```

显示所有构建设置，包括用户定义的设置。例子：

```
$ xcodebuild -configuration Debug -showBuildSettings | grep MYTESTSETTING
    MYTESTSETTING = DebugValue
$ xcodebuild -configuration Release -showBuildSettings | grep MYTESTSETTING
    MYTESTSETTING = ReleaseValue 
```

要将这些变量放入当前 shell 的环境中，您必须解析此输出。例如，这可以通过 Perl 脚本（或许多其他脚本语言）来完成。

创建一个包含以下内容的 Perl 脚本“exportsettings.pl”：

```
#!/usr/bin/perl
open(FH, "xcodebuild -configuration Release -showBuildSettings|");
while(<FH>) {
    if (/\s*(\w+)\s*=\s*(.*)$/) { # Search for <key> = <value>
        $key = $1; $value = $2;
        print "export $key='$value'\n";
    }
}
close(FH); 
```

现在您可以运行命令

```
$ eval `perl exportsettings.pl` 
```

从命令行，并且（几乎）所有构建设置都在环境中。（会有一些错误信息，例如“UID: readonly variable”）。

如果您只需要环境中使用的定义设置，则可以使用唯一前缀（例如“MY”）并更改行

```
 if (/\s*(\w+)\s*=\s*(.*)$/) { # Search for <key> = <value> 
```

至

```
 if (/\s*(MY\w+)\s*=\s*(.*)$/) { # Search for MY<key> = <value> 
```

# spring - 如何从属性文件中获取弹簧注释中的属性值

> ID：13826377
> 
> 赞同：1
> 
> 时间：2012-12-11T18:38:38.613
> 
> 标签：spring, properties, annotations

我的实体类中有这段代码

@Table (schema="xyz")

现在我想从一些属性文件中读取这个 xyz。我怎样才能做到这一点？

像这样的东西

@Table(schema= ${property.schema})

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:15:57.493

你不能那样做。java 注释只是添加到源代码中的元数据。一旦 vm 运行，根据注释的保留策略，可以使用或丢弃此信息。您尝试配置的属性必须是常量。有关更多信息，请查看此[链接](http://docs.oracle.com/javase/tutorial/java/javaOO/annotations.html)。

# php - 在页面中的特定时间后插入数据

> ID：13826378
> 
> 赞同：0
> 
> 时间：2012-12-11T18:38:56.897
> 
> 标签：php, mysql, time

我编码了这个：

```
<?php
include("includes/config.php");
if(!empty($_SESSION['LoggedIn']) && !empty($_SESSION['username']))
{

if(is_numeric($_GET['num']) && mysql_real_escape_string($_GET['id'])){
$username=$_SESSION['username'];
$video_id=$_GET['id'];
$video_num=$_GET['num'];
$checknum=mysql_query("select visitedpage.video_id,visitedpage.video_num from visitedpage where video_num='$video_num'");
$num=mysql_num_rows($checknum);

if($num < 1){   
$savepage=mysql_query("insert into visitedpage(username,video_id,video_num) values ('$username','$video_id','$video_num')");
}

if($num < 1 ){
    $get=mysql_query("select users.percent from users where username='$username'");
    $fetch=mysql_fetch_assoc($get);
    $now=$fetch['percent'];
    $add=1;
    $sum=$now + $add;
    $update=mysql_query("update users set percent='$sum' where username='$username'");
}

}}

?> 
```

我希望当用户仍在页面中大约 10 分钟时执行代码

我试过 (sleep()) 但这将停止执行页面的其余部分，我只需要延迟执行这个片段......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:40:52.420

您必须使用客户端脚本 (Javascript) 来执行此操作。事后，您不能让服务器端脚本编辑已经显示在客户端浏览器上的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:41:43.980

您可能需要使用 javascript 来做您想做的事情，因为一旦您渲染页面源并将其发送到浏览器，PHP 就根本不再使用（直到来自客户端浏览器的下一个请求）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T18:49:14.320

我会建议使用 cookie 的基于 javascript 的解决方案，然后执行 AJAX 请求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T18:49:15.247

为什么不在 10 分钟后对这段代码执行 ajax 请求？像这样的东西。...

```
setTimeout(function() {
  // Do the ajax after 10 seconds. 
}, 10000); 
```

优雅地看到这个[Detecting idle time in JavaScript](https://stackoverflow.com/questions/667555/detecting-idle-time-in-javascript-elegantly) 和这个[http://www.jquery4u.com/jquery-functions/settimeout-example/](http://www.jquery4u.com/jquery-functions/settimeout-example/)

# arrays - 我如何将它从常量转换为变量数组？

> ID：13826379
> 
> 赞同：0
> 
> 时间：2012-12-11T18:38:58.593
> 
> 标签：arrays, graph, pascal

```
Uses Graph;
Const Triangle : Array [1..3] Of PointType =
((X: 50; Y: 100),
(X: 100; Y: 100),
(X: 150; Y: 50));
Var Gd, Gm : smallint;
Begin
Gd:=Detect;
InitGraph(Gd, Gm, ''); 
If GraphResult <> grOk Then Halt(1);
SetFillStyle(7,0);
SetColor(14);
FillPoly(SizeOf(Triangle) Div SizeOf(PointType), Triangle);
ReadLn;
CloseGraph;
End. 
```

我希望能够为三角形输入一个值，以便用户可以将其移动，但它是一个常量，因此除非有办法将其转换为变量，否则这是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:50:30.607

**对于 FreePascal：**

只需将“const”替换为“var”即可。您可以初始化全局变量，甚至像这样的复杂变量，通过这种方式，变量将在程序开始时采用该值，直到您更改它。

**对于涡轮帕斯卡：**

常量数组并不是真正的常量，您可以随意修改它们。例如，您可以这样做：

```
Triangle[1].X := 500; 
```

在程序开始时，它会工作得很好。有关更多详细信息，请参阅[此相关问题](https://stackoverflow.com/questions/3240689/why-pascal-const-arrays-arent-actually-constants)。

# google-chrome - chrome.app.getDetails() 返回 null

> ID：13826384
> 
> 赞同：0
> 
> 时间：2012-12-11T18:39:18.580
> 
> 标签：google-chrome, google-chrome-extension

我试图在运行时获取我的扩展版本，`chrome.app.getDetails().version`并注意到`chrome.app.getDetails()`返回`null`. 令人惊讶的是，在线社区中没有谈论这个，谷歌人员甚至没有记录这个功能。我缺少许可吗？我确实`tabs`启用了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-28T14:02:03.997

很老...我知道
但是如果有人正在寻找这个，你可以让你的扩展版本*读取*[`chrome.runtime`](http://developer.chrome.com/extensions/runtime)带有API 和方法的清单文件[`getManifest`](http://developer.chrome.com/extensions/runtime#method-getManifest)。

前任。在您的后台脚本中：

```
var manifest = chrome.runtime.getManifest();
var current_version = manifest.version;

console.info('Current Version: ', current_version); 
```

**返回的对象是完整清单文件的序列化**，因此您可以在`manifest file`

所以..如果你想要例如所有*而且只有*`matches`你的……`content_scripts`说点什么……

```
for(var i in manifest.content_scripts) {
  console.log(manifest.content_scripts[i]['matches']));
} 
```

*注意：自 Chrome 22 起稳定*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T01:48:28.520

它没有记录，因为它们可能正在移动`getDetails`到 API 的不同部分——请参阅[这个错误](http://code.google.com/p/chromium/issues/detail?id=111354)。它目前正在我的 Chrome 副本（测试版通道）上工作，但如果他们在较新的版本中禁用它，我不会感到惊讶。与此同时，您可以通过 AJAX 查询来获取`manifest.json`您的扩展名——您可以使用`chrome.extension.getURL("manifest.json")`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-12T08:30:39.070

这是我用来提取当前版本的内容。

```
 var manifest = new XMLHttpRequest();
    manifest.open("get", "/manifest.json", true);
    manifest.onreadystatechange = function (e) { if (manifest.readyState == 4) {console.log(JSON.parse(manifest.responseText).version)} };
    manifest.send({}); 
```

# ruby-on-rails - 为什么只有在尝试将应用上传到 Heroku 时才会收到 ActionView::Template::Error？

> ID：13826385
> 
> 赞同：1
> 
> 时间：2012-12-11T18:39:24.183
> 
> 标签：ruby-on-rails

我的应用程序在我的本地服务器上运行，但是当我将它上传到 Heroku 时，我得到一个页面，上面写着：`"We're sorry, but something went wrong."`

当我查看 Heroku 日志时，我看到一条错误行：

```
ActionView::Template::Error (/app/app/assets/stylesheets/application.css has already been required) 
```

如果我的应用程序在我的本地环境中运行良好，这意味着什么？有关如何解决此问题的任何建议？

对于它的价值，我的 gemfile 看起来像这样：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'bootstrap-sass'
gem 'bcrypt-ruby', '3.0.1'
gem 'json'
gem 'ruby-fs-stack'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.11.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier',     '1.2.3'
end

gem 'jquery-rails', '2.0.2'

group :test do
  gem 'capybara', '1.1.2'
  gem 'factory_girl_rails', '4.1.0'
end

group :production do
  gem 'pg', '0.12.2'
end 
```

这是 Heroku 日志：

```
2012-12-11T18:10:43+00:00 app[web.1]: Processing by StaticPagesController#home as HTML
2012-12-11T18:10:43+00:00 app[web.1]:   Rendered static_pages/home.html.erb within layouts/application (11.4ms)
2012-12-11T18:10:43+00:00 app[web.1]: Completed 500 Internal Server Error in 131ms
2012-12-11T18:10:43+00:00 app[web.1]: 
2012-12-11T18:10:43+00:00 app[web.1]:     9:    
2012-12-11T18:10:43+00:00 app[web.1]:     11:   <%= javascript_include_tag "application" %>
2012-12-11T18:10:43+00:00 app[web.1]: ActionView::Template::Error (/app/app/assets/stylesheets/application.css has already been required):
2012-12-11T18:10:43+00:00 app[web.1]:     8:    <meta name="author" content="">
2012-12-11T18:10:43+00:00 app[web.1]:     12:   <%= csrf_meta_tags %>
2012-12-11T18:10:43+00:00 app[web.1]: 
2012-12-11T18:10:43+00:00 app[web.1]:   app/views/layouts/application.html.erb:10:in `_app_views_layouts_application_html_erb__2962376498821052289_32805880'
2012-12-11T18:10:43+00:00 app[web.1]: 
2012-12-11T18:10:43+00:00 app[web.1]:     7:    <meta name="description" content="">
2012-12-11T18:10:43+00:00 app[web.1]:     13:   <%= render 'layouts/shim' %>
2012-12-11T18:10:43+00:00 app[web.1]:     10:   <%= stylesheet_link_tag    "application", :media => "all" %>
2012-12-11T18:10:43+00:00 heroku[router]: at=info method=GET path=/ host=obscure-mesa-7065.herokuapp.com fwd=75.165.254.103 dyno=web.1 queue=0 wait=1ms connect=4ms service=257ms status=500 bytes=643 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:15:48.290

我不知道它为什么在 localhost 上工作，但似乎你有一个循环依赖。

转到 app/assets/stylesheets 并检查 application.css.scss 的标头，然后检查它所需的所有文件的标头，以确保它们都没有引用 application.css.scss。

# android - GPS 定位服务 - Android

> ID：13826399
> 
> 赞同：0
> 
> 时间：2012-12-11T18:40:23.167
> 
> 标签：android, service, background, gps

> **可能重复：**
> [requestLocationUpdates 抛出异常](https://stackoverflow.com/questions/13810662/requestlocationupdates-throws-exception)

我正在尝试创建一个服务，当服务器询问我时，发送我的位置。但找不到办法，因为一切都是后台服务。而且我不需要有 UI 界面。当我调用 requestUpdate() 时抛出错误并停止应用程序

```
locManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 15000, 0, locationListener); 
```

**runException 无法在未调用 Looper.prepare() 的线程内创建处理程序**

我如何运行一些东西来更新我的服务中的位置？有人有任何例子或东西可以帮助我吗？我还没有太多经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:43:37.370

好吧，它的著名问题，请参阅您的异常中的响应：

```
 ... that has not called Looper.prepare() 
```

您需要提供应用程序的主循环器。

这是有效的实现：

```
mLocationManager.requestLocationUpdates(
                                        LocationManager.GPS_PROVIDER,
                                        15000,
                                        0,
                                        locationListener,
                                        Looper.getMainLooper()
                                        ); 
```

# video.js - Chrome 停止执行视频

> ID：13826402
> 
> 赞同：5
> 
> 时间：2012-12-11T18:40:31.767
> 
> 标签：video.js

使用 IE 一切顺利（我得到了一个 mp4 视频，在 flash 上设置了优先执行）。当我尝试在 chrome 上查看我的视频时，一切似乎都很好，但在几秒钟内（并非总是但经常）videojs 崩溃。这是日志：

```
错误：媒体错误
    代码：3
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:08:36.550

根据[HTML5 规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#dom-mediaerror-media_err_decode)错误代码`MEDIA_ERR_DECODE = 3`意味着视频无法解码。Chrome 可能会出现断帧，例如视频编码不正确。

根据我的经验，HTML5 视频解码在错误处理方面的支持很差。Flash在这里更防弹。当 Chrome (HTML5) 无法播放视频但它在 FF (flash) 中播放正常时，我得到了一个示例。转换为不同的像素图 ( `yuvj420p`-> `yuv420p`) 解决了我的问题。

这意味着首先您应该尝试使用不同的选项对视频进行编码。作为一个选项，您可以使用`ffmpeg`

# unit-testing - 重写单元测试可以吗？

> ID：13826404
> 
> 赞同：2
> 
> 时间：2012-12-11T18:40:39.790
> 
> 标签：unit-testing

我还在学习 OOP，每天我都会发现一些陌生的东西。因此，在编写单元测试时，函数名称似乎很常见，而且通常的程序设计已经定义。例如， “测试这个*工厂*或那个*依赖容器*，看看它是否按预期工作”。

作为一名学习者，我很确定我想随着时间的推移改变很多东西，从函数名称到代码结构再到函数本身的功能。显然，这意味着重写测试以使其通过。你遇到过这个问题吗？我读到的一些东西说一旦写完触摸测试是禁忌，那么你如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T18:44:42.223

> 测试一旦写好就触碰是禁忌

当然，这完全是胡说八道。时间流逝，事情发生变化，代码不断发展，测试需要被触及。随意修改和重写测试，但要小心不要在此过程中意外丢失功能（当重写版本不测试以前版本所做的用例时）。

对我来说，这个问题根本不存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T19:08:47.640

正如@Sergio 所说，如果被测类发生变化，你当然必须更改测试。

只是要注意一般更改测试：如果被测试的类是错误的，不要忘记确保新测试确实*失败*。当您首先编写新代码并编写测试时，您会在实现新功能和测试通过之前看到测试失败（TDD 的“红/绿”节奏）。当你改变测试时，你需要确保你所做的不仅仅是一个总是通过的测试。

对于您关于更改被测类的内容（名称、行为）的问题，您也可以以测试优先的方式轻松地做到这一点：

1.  更改测试以反映您希望对被测类进行的更改
2.  运行测试以验证它是否失败（或者如果名称更改，可能无法编译）[红色]
3.  更新类，看测试通过【绿】

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T19:44:14.837

要记住的重要一点是，测试代码与生产代码一样重要，如果不是，为什么还要费心呢？考虑到这一点，维护和重构测试与维护和重构生产代码一样重要。

也就是说，我不建议仅仅因为您的知识有所进步并且您不喜欢最初的方式而重写测试。如果一个测试正在测试一些有价值的东西，是可以理解的，并且总是通过，我会不管它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T18:44:47.620

我认为这取决于您的程序。如果您有一个非常庞大的程序，如果您不确定其他函数是否使用该函数，则不应重写您的测试。如果您正在开发中，如果您确定这不会造成麻烦，您可以更改它们。

# eclipse - Tomcat 7 资源不可用

> ID：13826408
> 
> 赞同：0
> 
> 时间：2012-12-11T18:40:51.967
> 
> 标签：eclipse, tomcat, servlets

[我按照此处的说明在 Eclipse](http://www.coreservlets.com/Apache-Tomcat-Tutorial/tomcat-7-with-eclipse.html)中配置Tomcat 7 。正如那里所建议的那样，我将`webapps/ROOT`目录复制到了 eclipse 工作区的`wtpwebapps/`目录中，现在我可以看到 tomcat 欢迎页面。我还能够使测试应用程序项目（可从该链接下载）正常工作。

然后为了看例子，我也把webapps/examples目录复制到了wtpwebapps目录下，然后在eclipse中重启了tomcat。但是当我尝试通过 访问示例时`http://localhost:8080/examples/`，它给了我一个 404 错误。

我还需要做什么才能使上述工作正常进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:42:28.967

`examples`我认为您需要in 的上下文输入`Server.xml`。全新安装 Tomcat 7 的默认应用程序是`ROOT`. 因此，不需要进入。

去`Package Explorer--> Server --> Tomcat v7.0 Server at localhost-config --> server.xml`

`Tomcat v7.0 Server at localhost-config`, 这在您的情况下可能会有所不同。

为Web 应用程序添加`Context`条目。`examples`

这是我的示例条目`server.xml`

我已经将示例目录复制到`wtpwebapps/`并添加了这样的条目

```
 <Context docBase="examples" path="/examples" reloadable="true" source="org.eclipse.jst.jee.server:examples"/> 
```

重新启动 Tomcat 服务器，您应该可以开始`http://localhost:8080/examples`工作了。

另请阅读@BalusC 的答案：[HTTP Status 404 - The requested resource (/) is not available](https://stackoverflow.com/questions/8520267/localhost8080-gives-404-the-requested-resource-is-not-available)

# asp-classic - 将 vb.net 转换为 asp 经典

> ID：13826410
> 
> 赞同：0
> 
> 时间：2012-12-11T18:40:58.897
> 
> 标签：asp-classic

我有以下 VB 代码：

```
 Dim value As Date = Date.Now
    Dim intHour As Integer
    Dim intMinute As Integer
    Dim intSecond As Integer

    intHour = 17
    intMinute = 0
    intSecond = 0

    Dim newdatetime As DateTime = New Date(value.Year, value.Month, value.Day, intHour, intMinute, intSecond)

    If DateTime.Now < newdatetime Then

        If value.DayOfWeek = DayOfWeek.Saturday Then
            value = value.AddDays(2)
            Return value
        End If

        If value.DayOfWeek = DayOfWeek.Sunday Then
            value = value.AddDays(1)
            Return value
        End If

        Return value

    ElseIf DateTime.Now > newdatetime Then
        Do
            value = value.AddDays(1)
        Loop While (value.DayOfWeek = DayOfWeek.Saturday) Or (value.DayOfWeek = DayOfWeek.Sunday)
        Return value
    End If 
```

在 ASP CLassic 中会怎样？

有人可以帮忙吗？

编辑：

```
 Dim CurrentDate
CurrentDate = Date()

Dim intHour
Dim intMinute
Dim intSecond

intHour = 17
intMinute = 0
intSecond = 0

Dim NewDate
Dim NewDate1
Dim NewDate2

NewDate = DatePart("yyyy", CurrentDate)
NewDate1 = DatePart("m", CurrentDate)
NewDate2 = DatePart("d", CurrentDate)

Dim Dates 

Dates = DateSerial(NewDate, NewDate1, NewDate2)

Dim Time 

Time = TimeSerial(intHour, intMonth, intSecond) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:22:24.667

年份：http: [//msdn.microsoft.com/en-us/library/fhzx965c%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/fhzx965c%28v=vs.85%29.aspx)

月份：http: [//msdn.microsoft.com/en-us/library/0eeket2%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/0eeeket2%28v=vs.85%29.aspx)

日期：http: [//msdn.microsoft.com/en-us/library/yyhfe92k%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/yyhfe92k%28v=vs.85%29.aspx)

日期比较：http: [//msdn.microsoft.com/en-us/library/xhtyw595%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/xhtyw595%28v=vs.85%29.aspx)

星期几：http: [//msdn.microsoft.com/en-us/library/t51x9wtx%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/t51x9wtx%28v=vs.85%29.aspx)

递增日期：http: [//msdn.microsoft.com/en-us/library/cb7z8yf9%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/cb7z8yf9%28v=vs.85%29.aspx)

[http://msdn.microsoft.com/en-us/library/d1wf56tt%28v=VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/d1wf56tt%28v=VS.85%29.aspx)是 VBScript/ASP 经典的绝佳参考。

# amazon-web-services - Amazon CloudWatch - 监控 EBS 卷 VolumeReadOps、VolumeWriteOps

> ID：13826413
> 
> 赞同：0
> 
> 时间：2012-12-11T18:41:13.230
> 
> 标签：amazon-web-services, amazon-ec2, amazon-ebs, amazon-cloudwatch

我很感兴趣为几个命名的 EBS 卷上的两个特定统计数据添加 CloudWatch。具体指标是 VolumeReadOps 和 VolumeWriteOps。这些默认情况下不会显示在音量图表下。我的问题如下：

*   是否可以在所有卷图选项卡下默认显示这些图？

*   转到 CloudWatch -> EBS 时是否可以按标签/名称搜索卷？如果我想查看一些指标，我真的必须按卷 ID 记住卷吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:22:47.490

您无法将自定义指标添加到 Cloud Watch。但是您仍然可以使用 munin 监视 VolumeReadIops 和 VolumeWriteIops。我将提供许多其他信息，例如您的应用服务器性能、Web 服务器性能等。

# tortoisehg - 修订历史 Tortoise Hg

> ID：13826414
> 
> 赞同：3
> 
> 时间：2012-12-11T18:41:13.937
> 
> 标签：tortoisehg, revision-history

我知道可以在 Tortoise Hg 中查看单个文件的修订历史。但是，我想查看某个目录中的修订历史记录。TortoiseHg 有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T04:25:23.327

TortoiseHG 工作台 - 主菜单 - `View`-`Filter Toolbar`

将修订条件写入列表框，启用“过滤器”复选框

对于基于路径的修订集，您必须使用`file()`具有所需目录[模式的函数](http://www.selenic.com/mercurial/hg.1.html#file-name-patterns)

![过滤日志](../Images/4e70cb5a29bd51c647f498555ed137ed.png)

PS：对于 CLI，可以更快地构建此日志

`hg log -r "file('lang/UTF-8/*')"`- 只有*这个*目录

`hg log -r "file('lang/**')"`-*这个**带有子目录的*目录

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:39:15.827

如果您在 Windows 上使用 TortoiseHg，您可以导航到您感兴趣的目录的父目录，单击该目录的条目，从其上下文菜单中选择 TortoiseHg，然后单击“修订历史”*

# node.js - 在 ubuntu 上安装 socket.io

> ID：13826425
> 
> 赞同：11
> 
> 时间：2012-12-11T18:41:50.547
> 
> 标签：node.js, ubuntu, socket.io, real-time

我正在开发一个实时应用程序，我正在使用第三方来完成它。但现在我必须使用 node.js 和 socket.io 而不是第三方。

我正确安装了 node.js (v0.4.12) 并使用命令检查它`node -v`。但是当我使用命令安装 socket.io 时，`npm install socket.io`我得到了这个错误。

```
npm ERR! install failed Error: Required package: options(latest) not found. (Found: ["0.0.3"])
npm ERR! install failed (required by: ws@0.4.23)
npm ERR! install failed     at /usr/share/npm/lib/build.js:192:19
npm ERR! install failed     at cb (/usr/share/npm/lib/utils/graceful-fs.js:32:9)
npm ERR! Error: Required package: options(latest) not found. (Found: ["0.0.3"])
npm ERR! (required by: ws@0.4.23)
npm ERR!     at /usr/share/npm/lib/build.js:192:19
npm ERR!     at cb (/usr/share/npm/lib/utils/graceful-fs.js:32:9)
npm ERR! Report this *entire* log at <http://github.com/isaacs/npm/issues>
npm ERR! or email it to <npm-@googlegroups.com>
npm ERR! Just tweeting a tiny part of the error will not be helpful.
npm not ok 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-23T12:34:02.643

我运行了这些命令并且它起作用了：

1.  `sudo npm install -g n`
2.  `sudo n 0.8.15`
3.  `sudo npm install socket.io`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T16:16:56.620

您尝试在没有[package.json](http://package.json.jit.su/)文件的情况下安装它，并且在您的解决方案中全局安装它，这通常不是您想要的 socket.io。

相反，您应该在工作目录中包含一个**package.json文件，然后运行：**

```
> npm install socket.io --save 
```

这将自动将其附加到**package.json**，或者您可以将其物理包含在依赖项中，然后运行：

```
> npm install 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-19T09:15:11.863

有效：

1) sudo npm install -gn
2) sudo n 0.8.15
3) sudo npm install socket.io

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-27T06:17:32.180

在某些情况下，如果您在代理后面并尝试运行：

**sudo npm install socket.io**

你最终可能会出错 -

npm 错误！错误：/tmp/npm-1393245157089/1393245157089-0.6057841922156513/tmp.tgz npm ERR 的 shasum 检查失败！预期：3bab0444e49b55fbbc157424dbd41aa375a51a76 npm 错误！实际：dae95023b71f7d06533f7c35a7d0c3b0cf729f42

然后运行以下

**sudo npm --proxy=http://"your_proxy":"your_port" 安装 socket.io**

# ruby-on-rails - 如何避免 Rails 中的简单竞争条件？

> ID：13826428
> 
> 赞同：3
> 
> 时间：2012-12-11T18:42:17.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

我有一个简单的比赛条件。我有一个网站，人们可以对照片进行投票，但最多允许 10 票。

当用户提交投票时，我会为该特定照片更新照片表中的 num_votes 列。我这样做是为了方便查找票数。

如何确保 vote.save 和 num_votes 更新发生在同一个事务中？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T19:26:05.717

为了实现这一点，您必须使用某种锁定。基本上你有 3 个选项：乐观/悲观的导轨锁定和一些外部锁定后端（如 Redis::Lock）。

如果这里不是真正的高性能，我个人会选择悲观锁定

```
photo = Photo.find(photo_id)
photo.with_lock do
  photo.num_votes += 1
  photo.save!
end 
```

我还应该指出，坚持只包装递增的 num_votes 并保存到一个事务中并不能解决竞争条件。大多数 RDBMS 默认工作在读提交模式。这并不能阻止这种竞争条件。

仅供参考，请参阅[悲观](http://api.rubyonrails.org/classes/ActiveRecord/Locking/Pessimistic.html)和[乐观](http://api.rubyonrails.org/classes/ActiveRecord/Locking/Optimistic.html)锁定参考

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-15T02:47:08.027

如果它是一个简单的竞争条件，那么您应该将它作为一个竞争条件来解决。尝试使用一些锁定机制。Redis 很好用： [redis 为 ruby​​ 加锁](https://github.com/einzige/redis-locker)

```
RedisLocker.new('vote_#{@photo.id}').run! { @photo.vote }

# ... photo model
def vote
  if num_votes <= 10   
    self.num_votes += 1
    save
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T18:53:25.407

好吧，Rails/Postgres 支持事务。您可以在任何 ActiveRecord 模型上简单地声明一个：

```
Photo.transaction do
 Vote.create(:whatever)
 Photo.votes = thing
 Photo.save!
end 
```

如果在事务块期间引发异常（例如，通过调用`.save!`无效模型），事务将回滚，并且不会提交任何可能发生的数据库更改（在这种情况下，投票记录不会插入）。当然，您仍然需要救援和处理异常。

顺便说一句，在记录中存储关联对象的数量以便于查找是一种非常常见的模式，称为计数器缓存，Rails 也支持这些模式 - 您可能希望研究正式制作`num_votes`计数器缓存（默认名称为`photos.votes_count`,但这不是必需的）。不过，您可能仍希望交易检查它是否超出限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T11:10:44.960

你不需要明确的锁

```
Photo.where(:id => photo_id).where('num_votes < 10').update_all('num_votes = num_votes+ 1') 
```

将更新该照片的投票数，但前提是投票数少于 10。您可以检查 的返回值`update_all`以查看是否实际更新了任何内容：返回值是更新的行数。如果更新失败，则不要创建投票（或者如果您已经创建了投票，则回滚事务）。

乐观锁定使用类似的技术来检测并发更新的尝试：它对更新设置一个条件，以确保如果有人在您之前潜入其中，则不会发生任何事情，然后检查更新的行数。

# c# - 如何创建无需用户交互即可自行更新的 Windows 服务

> ID：13826435
> 
> 赞同：2
> 
> 时间：2012-12-11T18:42:54.887
> 
> 标签：c#, windows, installation, auto-update

我已经构建了一个安装 Windows 服务（以 NetworkService 用户身份运行）的 C#、.NET3.5 Web 应用程序。该服务充当网络上任何机器的专用 Web 服务器，用户使用浏览器连接到该服务。

整个过程是使用使用 Visual Studio 2008 构建的 msi 文件安装的。msi 文件安装并运行部署应用程序，该应用程序用于设置用户和权限，以及将 exe 安装为服务。

如果我决定增强应用程序（或查找并修复错误），我可以生成一个新的 msi 文件，并让用户在运行我的应用程序的所有机器上运行它。但我宁愿这自动发生（包括从我的网站下载更新，并部署它们）。

因为它作为服务运行，它不是特定于用户的，所以我理解 Click Once 部署不是一个选项。

我有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T18:45:49.150

如果您真的不希望在此过程中进行任何用户交互，您是否可以拥有第二个服务，即更新看门狗，并识别主服务的新版本何时可用，然后处理下载/停止/安装/启动主要服务？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:28:11.160

这是我最终得到的解决方案：

安装服务时，我授予服务用户启动和停止服务的权限。有关更多详细信息，请参阅[我关于服务权限的问题。](https://stackoverflow.com/questions/15771998)

服务程序检查版本文件的远程 url，并根据当前程序版本检查它。如果版本文件不同，它会下载更新 zip，从中提取更新程序，锁定文件，运行更新程序并立即退出。

更新程序锁定同一个文件，等待几秒钟（只是为了确保服务已停止），解压缩 zip（不包括更新程序本身），最后重新启动服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T18:26:35.773

这是我现在正在尝试的解决方案：

有一个存根服务，它只检查更新程序，运行更新程序，然后运行主服务程序。如果主服务程序以特定的退出代码退出，它会循环并重复（否则它会正常退出）。

主服务程序检查版本文件的远程 url，并根据当前程序版本检查它。如果版本文件不同，它会下载一个更新 zip，从中提取更新程序，并以特殊的退出代码退出。

原始安装程序为运行服务的用户帐户授予程序文件夹的完全权限（因此更新程序可以更新服务程序）。

唯一的缺点是无法更新存根服务。

# ruby-on-rails - 嵌套 Rails 表单字段未呈现

> ID：13826443
> 
> 赞同：1
> 
> 时间：2012-12-11T18:43:28.163
> 
> 标签：ruby-on-rails, nested-forms

我已经阅读了许多关于此的帖子，但我仍然感到困惑。我对 Rails 比较陌生。我在 Rails 3.2.8 和 Ruby 1.9.3 上。

我有一个表单，我想为 2 个不同的表创建记录。这是一个多对多的关系（日志可以有多架飞机，飞机将出现在多个日志中）。

这是我的代码：

```
# ----- Models ----- #
class Logbook < ActiveRecord::Base
  has_and_belongs_to_many :aircrafts
  accepts_nested_attributes_for :aircrafts
end

class Aircraft < ActiveRecord::Base
  belongs_to :logbook
end

# ----- Logbooks Controller ----- #
def my_method
  @logbook = Logbook.new 
  @aircraft = Aircraft.new
end

# ----- View ----- #
<%= form_for @logbook, validate: true, remote: true do |f| %>
  <%= f.label :flight_date, "Flight Date" %>
  <%= f.text_field :flight_date %>  
  ...

  <%= f.fields_for :aircrafts, validate: true, remote: true do |a| %>
    <%= a.label :aircraft_id, "Aircraft ID" %>
    <%= a.text_field :aircraft_id %>
    ...
  <% end %>
<% end %> 
```

日志字段渲染良好，**但飞机字段不渲染**。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:56:19.413

尝试将控制器更改为：

```
def my_method
  @logbook = Logbook.new 
  @aircraft = @logbook.aircrafts.build
end 
```

因为`@aircraft`需要`belongs_to`一个日志，所以nested_form 会知道如何构建表单。

注意：如果您不使用`@aircraft`不需要声明的变量，只需`@logbook.aircrafts.build`在控制器上使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:55:00.523

如果我没记错的话，fields_for 将根据父对象中存在的对象数量生成。由于您的@logbook 没有任何飞机，因此不会出现任何字段。尝试改变动作：

```
def my_method
  @logbook = Logbook.new
  @logbook.aircrafts << Aircraft.new
end 
```

现在，如果您需要在 UI 中添加多个日志，您需要创建一个添加按钮。您可以根据以下内容增加您建立的飞机记录的数量：

```
<%= form_tag new_logbook_path, :method => :get do %>
  <%= hidden_field_tag "amount", @amount %>
  <%= submit_tag "Add" %>
<% end %> 
```

那么行动将是：

```
def my_method
  @amount = params[:amount] || 1
  @logbook = Logbook.new
  @amount.times { @logbook.aircrafts << Aircraft.new }
end 
```

# oracle - EF 使用 Oracle (ODP.NET) 在一台机器上工作，在另一台机器上抛出异常

> ID：13826444
> 
> 赞同：1
> 
> 时间：2012-12-11T18:43:30.100
> 
> 标签：oracle, entity-framework, odp.net

在我的开发盒（Windows 7 64 位）上一切正常，我能够检索记录并保存记录。

当我部署到 Windows Server 2008（32 位）机器时，我能够检索数据并正常查看。当我要么：

1）尝试保存：

```
System.Data.Entity.Infrastructure.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.UpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.ArgumentException: The specified value is not an instance of type 'Edm.Decimal'
Parameter name: value
   at System.Data.Common.CommandTrees.ExpressionBuilder.Internal.ArgumentValidation.ValidateConstant(TypeUsage constantType, Object value)
   at System.Data.Mapping.Update.Internal.UpdateCompiler.GenerateValueExpression(EdmProperty property, PropagatorResult value)
   at System.Data.Mapping.Update.Internal.UpdateCompiler.BuildPredicate(DbExpressionBinding target, PropagatorResult referenceRow, PropagatorResult current, TableChangeProcessor processor, Boolean& rowMustBeTouched)
   at System.Data.Mapping.Update.Internal.UpdateCompiler.BuildUpdateCommand(PropagatorResult oldRow, PropagatorResult newRow, TableChangeProcessor processor)
   at System.Data.Mapping.Update.Internal.TableChangeProcessor.CompileCommands(ChangeNode changeNode, UpdateCompiler compiler)
   --- End of inner exception stack trace ---
   at System.Data.Mapping.Update.Internal.TableChangeProcessor.CompileCommands(ChangeNode changeNode, UpdateCompiler compiler)
   at System.Data.Mapping.Update.Internal.UpdateTranslator.<ProduceDynamicCommands>d__0.MoveNext()
   at System.Linq.Enumerable.<ConcatIterator>d__71`1.MoveNext()
   at System.Data.Mapping.Update.Internal.UpdateCommandOrderer..ctor(IEnumerable`1 commands, UpdateTranslator translator)
   at System.Data.Mapping.Update.Internal.UpdateTranslator.ProduceCommands()
   at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
   at System.Data.EntityClient.EntityAdapter.Update(IEntityStateManager entityCache)
   at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options)
   at System.Data.Entity.Internal.InternalContext.SaveChanges()
   --- End of inner exception stack trace ---
   at System.Data.Entity.Internal.InternalContext.SaveChanges()
   at System.Data.Entity.Internal.LazyInternalContext.SaveChanges()
   at System.Data.Entity.DbContext.SaveChanges()
   at Dashboard.Data.Repository.RepositoryBase`2.OnCompleteSave() 
```

2）或者尝试检索序列中的下一个数字：

```
System.InvalidOperationException: The specified cast from a materialized 'System.Decimal' type to the 'System.Int64' type is not valid.
   at System.Data.Common.Internal.Materialization.Shaper.ErrorHandlingValueReader`1.GetValue(DbDataReader reader, Int32 ordinal)
   at lambda_method(Closure , Shaper )
   at System.Data.Common.Internal.Materialization.Coordinator`1.ReadNextElement(Shaper shaper)
   at System.Data.Common.Internal.Materialization.Shaper`1.SimpleEnumerator.MoveNext()
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at Dashboard.Data.DashboardDbContext.ExecuteScalar[TResult](String query, Object[] parameters) in c:\Builds\1\Exploration Archives\Dashboard (MAIN) (talus test)\Sources\Exploration Archives\Dashboard\Main\Dashboard.Data\Dashboard.contrib.cs:line 23
   at Dashboard.Data.Repository.RepositoryBase`2.GetNextIdFromSequence() 
```

最让我困惑的部分是，在部署到 Windows Server 2008 机器后，部分工作正常（我能够检索数据），但只有在我尝试从序列中检索或保存时才会中断。

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:32:41.257

发现问题。

对于我的 ID 列，在我的 .NET 对象上，我使用了 data type `long`，并带有相应的 oracle data type `number`。在我的机器上运行良好。根据对此问题的其他研究，我尝试将 oracle 数据类型更改为`number(19)`. 还是不行。

似乎`long`支持充其量是片状的。我必须将 .NET 对象的数据类型更改为`int`，并将 oracle 数据类型也更改`int`为。这行得通。

最困扰我的部分是它显然将`number`和`number(19)`视为十进制数据类型，并且对我进行缩小转换到`long`. 仅当我尝试保存时才出现此问题，将非缩小范围转换`long`为`decimal`. 去搞清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T22:51:42.930

在此处添加评论以供将来参考，因为此问题也会影响 Mysql 驱动程序 - EntityFramework v6 和 MySql.Data.Entities.6.8.3.0。无符号 bigint db 列会导致此问题。

“id BIGINT(20) UNSIGNED”导致“指定的值不是有效常量类型的实例。参数名称：类型”异常。更改关联的类属性 ulong 没有帮助。将 db 列“id BIGINT(20)”绑定到...

```
[Key]
[Column("id")]
public long Id { get; set; } 
```

...工作正常。

# c# - 如何从 Dynamics GP 获取信用卡列表？

> ID：13826451
> 
> 赞同：0
> 
> 时间：2012-12-11T18:43:49.327
> 
> 标签：c#, microsoft-dynamics, dynamics-gp, econnect

有没有办法使用 eConnect 获取 GP 中现有信用卡的列表？

当前实现使用 eConnect 文档中提到的 .NET 序列化方法，尽管我无法找到有关如何获取当前现有信用卡列表的任何信息。

存在一些在 GP 中创建新卡的方法，但我真正想获得现有卡的列表（连同它们的名称），以便我可以在新创建的发票上发送信用卡信息（使用 CRCRDAMNT / CCAMPYNM /CARDNAME 标题）。

我在这方面不走运吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:05:52.010

付款信息在 SOP10103 表中，只需根据您的条件进行选择查询。

或者，如果您使用 gp Web 服务，则销售订单对象还会返回有关付款的信息 (salesOrder.Payments)

希望能帮助到你 ！

# css - 将省略号添加到一组跨度的第一个

> ID：13826452
> 
> 赞同：0
> 
> 时间：2012-12-11T18:43:52.090
> 
> 标签：css, html, ellipsis

我有这样的事情：

```
<p id="container">
  <span id="t1">This could be a very long text </span>
  <span id="t2">&#160;suffix 1</span>
  <span id="t3">&#160;suffix 2</span>
</p> 
```

我想做的是，根据#container 可用的空间，在第一个跨度中添加省略号，这样我最终会得到如下内容：

> 这是一个很长的文本 suffix 1 suffix 2 // 如果有足够的空间可用于所有内容。
> 
> 这是一个很长的... suffix 1 suffix 2 // 如果没有足够的空间可用于所有内容。
> 
> 这是一个 v... suffix 1 suffix 2 // 如果可用空间更少。

如您所见，应始终保留后缀的空间，并且仅应将第一个跨度文本应用省略号。

非常感谢您提前提供的帮助！;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:59:39.873

正如我所说，目前我发现的最佳解决方案是基于 Javascript 的。见：http: [//jsbin.com/aregeq/4/edit](http://jsbin.com/aregeq/4/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:50:22.313

您可以使用 CSS 属性完成此操作`text-overflow:ellipsis`

```
#t1 {
  display:inline-block;
  text-overflow: ellipsis;
  width: 200px;
  white-space: nowrap;
  overflow: hidden;
} 
```

您可以在此处找到有关如何使用它的完整参考/教程：http: [//davidwalsh.name/css-ellipsis](http://davidwalsh.name/css-ellipsis)

# hadoop - 蜂巢性能

> ID：13826453
> 
> 赞同：6
> 
> 时间：2012-12-11T18:43:55.740
> 
> 标签：hadoop, hive

我在蜂巢上工作，我是新手。我面临一些关于配置单元查询性能的问题。

1.  即使有数百个可用的映射器，分配给我的工作的映射器数量也非常少。我试过设置 `mapred.map.tasks=200`。但它只需要 20 到 30 个映射器。我了解，映射器的数量取决于输入拆分。有没有其他选择来增加映射器？如果不是，那么为什么要`mapred.map.tasks`引入 parameter()？

2.  是否有任何资源可以让我理解将 hive 查询与 map-reduce 作业相关联，即查询的不同部分在哪里执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:00:09.520

有关设置地图任务的更多信息，请查看此链接：[http](http://wiki.apache.org/hadoop/HowManyMapsAndReduces) ://wiki.apache.org/hadoop/HowManyMapsAndReduces 。基本上， mapred.map.tasks 只是一个提示；它通常不会真正控制任何东西。

要查看 Hive 查询是如何执行的，只需在查询前加上`explain`. 例如：`explain select foo from bar;`。如果您需要更多信息，还有`explain extended`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-17T10:19:23.790

我看到这个问题很久以前就被问过了，我会尝试回答它，即使这里的一些建议在被问到问题时不可用。

要优化 Hive 性能：

*   调整 Hive 请求使用的映射器和减速器的数量；这可以通过调整每个 mapper`mapreduce.input.fileinputformat.split.maxsize`的输入大小和每个 reducer 的输入大小来完成：`hive.exec.reducers.bytes.per.reducer`

请记住，“越多越好”并不总是正确的。因此，您需要根据需要调整这些数字。

*   优化连接，将连接转换为映射连接，如果其中一张表是小表（如果可能）...（[https://cwiki.apache.org/confluence/display/Hive/LanguageManual+JoinOptimization](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+JoinOptimization)）

*   在条件中经常使用的列（WHERE）上对表进行分区。
    例如，如果您经常请求
    `SELECT * from myTable WHERE someColumn = 'someValue'`
    ，建议在“someColumn”列上对表进行分区，
    这将使您的查询仅搜索分区文件 someColumn=SomePartition 而不是搜索整个表文件。

*   在某些情况下，压缩中间结果可能会提高性能（取决于您的硬件配置、网络和 CPU/内存）。这可以通过设置属性来完成：`hive.intermediate.compression.codec`

*   选择正确的压缩编解码器，例如使用 Snappy（[如这里](http://www.cloudera.com/documentation/archive/cdh/4-x/4-3-0/CDH4-Installation-Guide/cdh4ig_topic_23_5.html)）：

    ```
    SET hive.exec.compress.output=true;
    SET mapred.output.compression.codec=org.apache.hadoop.io.compress.SnappyCodec;
    SET mapred.output.compression.type=BLOCK; 
    ```

**在提问时不可用：**

*   使用优化的文件格式来存储您的表格，而不是使用文本文件或序列文件，您可以使用 ORC (hive 0.11 +) 例如 ( [https://cwiki.apache.org/confluence/display/Hive/LanguageManual+ORC](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+ORC) )

*   使用另一个引擎来执行您的查询，而不是 MapReduce，您可以使用 Tez 甚至 Spark [。例如，使用 tez](https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-Tez)：

    ```
    <property>
        <name>hive.execution.engine</name>
        <value>tez</value>
    </property> 
    ```

如需进一步优化，您可以参考[此处](http://hortonworks.com/blog/5-ways-make-hive-queries-run-faster/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-17T22:16:10.937

您可以减少 'mapreduce.input.fileinputformat.split.maxsize' 以增加映射器的数量（更多拆分）。

# javascript - IE7 内容重叠忽略 z-index

> ID：13826454
> 
> 赞同：0
> 
> 时间：2012-12-11T18:43:56.520
> 
> 标签：javascript, html, css, internet-explorer-8, internet-explorer-7

它是一个类似这样的网格结构内容：

```
<div id="gridBlock">
  <div class="list-lot-item">
    <div class="list-lot-item-info">
        <a href="#" class="list-lot-item-col1"></a>
        <div class="list-lot-item-col2"></div>                       
        <div class="list-lot-item-col3"></div>
    </div>
  </div>
  <div class="list-lot-item">....</div>
</div> 
```

像这样的一些 CSS（但更多在 JSFiddle 中）：

```
#gridBlock .list-lot-item{
 float:left;
 position:relative;
 height:25px;
 width:50px;
 border:1px solid #fff;
 padding-left:2px;
}
#gridBlock .list-lot-item-info,
#gridBlock .list-lot-item-info-on{
 display:block;
 position:absolute;
 background-color:#fff;
 border:1px solid #fff;
 width:50px;
}
#gridBlock .list-lot-item-info{
 z-index:199;
}
#gridBlock .list-lot-item-info-on{
 border:1px solid red;
 top:0;
 z-index:200;                            
 position:relative;
 background-color:yellow;
}
#gridBlock .list-lot-item-col2,
#gridBlock .list-lot-item-col3{visibility:hidden;}
#gridBlock .list-lot-item-info-on .list-lot-item-col2,
#gridBlock .list-lot-item-info-on .list-lot-item-col3{visibility:visible;} 
```

对于每个框“悬停”状态，我应用一个具有更高 z-index 的新“on”类：

```
$('#gridBlock .list-lot-item').hover(
  function(){$(this).children(0).removeClass("list-lot-item-info");$(this).children(0).addClass("list-lot-item-info-on");},
  function(){$(this).children(0).removeClass("list-lot-item-info-on");$(this).children(0).addClass("list-lot-item-info");}
); 
```

显然，它在 FF、Chrome、IE8+ 中运行良好，但我们的老朋友 IE7 很弱。请在兼容模式下尝试并查看：

[现场演示](http://jsfiddle.net/MjVDU/2/)

IE7 会在相邻的网格框下方弹出悬停的框，此时它应该是反式的。有什么好的建议如何解决吗？

![在此处输入图像描述](../Images/381c1a07c856a097b04166b67a0f7861.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:01:03.000

当我在 Ubuntu 上工作时，我无权访问任何版本的 IE 来测试这个。

但是，我的理解是，这`z-index`取决于`position:absolute;`

如果这碰巧 破坏了您的设计，您也可以使用边距重新设置它`position:relative;`。`#gridBlock .list-lot-item-info-on`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:08:41.003

添加这个：

```
#gridBlock .list-lot-item:hover {
   z-index:200;   
} 
```

由于 IE7 对 z 索引非常严格。拿你`.list-lot-item`来说，它们都具有相同的 z-index 值（这没什么），所以无论哪个最后出现在前面的值之上。而且他们不能脱离父母的秩序。

以元素 A 和 B 为例，它们的 z-index 分别为 1 和 2，A 的任何子元素，无论 z-index 在 B 下出现多高。IE7/8 对此非常严格。

**[JSFiddle](http://jsfiddle.net/MjVDU/3/)**

# c# - 如何在 DXCore 中获得唯一的 SourceFile 引用？

> ID：13826460
> 
> 赞同：0
> 
> 时间：2012-12-11T18:44:06.233
> 
> 标签：c#, dxcore

我正在开发一个插件来在 Enterprise Architect 和 Visual Studio 2012 之间交换数据。我的插件使用 DXCore 库，到目前为止，我能够做我需要的一切。但是现在我有一个问题，如果我的插件被重命名，我的插件会丢失文件的轨道。

我可以处理来自 DXCore 的 DocumentRenamed 事件，但这不是我想要的方式，因为它会迫使我重命名我为 EA 互操作创建的 XML 文件。

所以，这一切都归结为标题：我怎样才能拥有一个类似于 DXCore 项目中给定文件的唯一标识符的属性？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:13:16.093

我不相信您可以使用任何现有的唯一（且不变的）ID。

如果您需要这样的 id，我建议您自己创建一个并维护各种字典。

您将在唯一 id 之后命名您的 xml 文件，而不是在项目文件之后。

重命名文件时，您将更改与 uniqueid 关联的名称并避免重命名 xml 文件的需要。

# jquery - jquery/javascript 使用 MVC 自定义 BufferedMediaTypeFormatter 启动文件下载

> ID：13826463
> 
> 赞同：1
> 
> 时间：2012-12-11T18:44:24.140
> 
> 标签：jquery, asp.net-mvc, asp.net-web-api, download, mediatypeformatter

我有一个 web api，它根据（目前）一些简单的搜索条件向我返回一个用户列表。

```
 public class UserListAPIController : APIController
{

    public List<UserManagerSearchResult> Get(int siteGroupId)
    {
        return userService.UserManagerSearch(LoggedInUserToken.DefaultSiteID, siteGroupId);
    }
} 
```

这是使用 ajax getJson 请求从客户端 knockoutjs 视图模型调用的，该请求具有基于选择的各种过滤条件动态生成的 url。

```
 self.LoadUsers = function () {

    var SiteGroupID = self.selectedSiteGroup();
    $.getJSON("/API/UserListAPI/?siteGroupId=" + SiteGroupID
        , function (allData) {
        var mappedUsers = $.map(allData, function (item) {
           //mapping code
            return dbu;

        });
        self.Users(mappedUsers);
    });
}; 
```

然后使用敲除模板绑定在网格中很好地显示结果。

我还需要实现“下载到 csv”功能，该功能将返回与为 ui 搜索列表选择的完全相同的结果。

所以我的想法是实现一个自定义的 mediatypeformatter，它允许我执行相同的 web api，但返回一个 csv 响应而不是 json 响应。

我已经在 fiddler 中实现并测试了它，并且按预期工作。所以当我将类型设置为“text/csv”并调用 web api 时，我得到了 csv 结果。

```
public class UserManagerSearchResultCSVFormatter : BufferedMediaTypeFormatter 
{

    public UserManagerSearchResultCSVFormatter()
    {
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/csv"));
    }

    public override bool CanReadType(Type type)
    {
        return false; 
    }

    public override bool CanWriteType(Type type)
    {
        if (type == typeof(UserManagerSearchResult))
        {
            return true;
        }
        else
        {
            Type enumerableType = typeof(List<UserManagerSearchResult>);
            return enumerableType.IsAssignableFrom(type);
        }

    }

    public override void WriteToStream(Type type, object value, Stream writeStream,
                                       System.Net.Http.HttpContent content)
    {
        using (var writer = new StreamWriter(writeStream))
        {
            var results = value as List<UserManagerSearchResult>;
            if (results != null)
            {
                foreach (var result in results)
                {
                    WriteItem(result, writer);
                }
            }
            else
            {
                var result = value as UserManagerSearchResult;
                if (result == null)
                {
                    throw new InvalidOperationException("Cannot serialize type");
                }
                WriteItem(result, writer);
            }
        }
        writeStream.Close();
    }

    // Helper methods for serializing Products to CSV format. 
    private void WriteItem(UserManagerSearchResult result, StreamWriter writer)
    {
        writer.WriteLine("{0},{1},{2}", Escape(result.UserId),
            Escape(result.UserName), Escape(result.Year));
    }

    static char[] _specialChars = new char[] { ',', '\n', '\r', '"' };

    private string Escape(object o)
    {
        if (o == null)
        {
            return "";
        }
        string field = o.ToString();
        if (field.IndexOfAny(_specialChars) != -1)
        {
            return String.Format("\"{0}\"", field.Replace("\"", "\"\""));
        }
        else return field;
    }

} 
```

这就是所有的背景。

我遇到了几个我不知道如何最好地实施的问题。

首先，为了使其工作，我需要能够执行以下操作： 1\. 动态构建 url（如上面的 ajax getjson 示例所示） 2\. 将请求类型设置为 'text/csv' 3\. initite使用请求类型调用 url 并强制下载文件。

这几乎是我被困为实现这一点的最佳方式。我一直在寻找一些 jquery ajax 来尝试实现这一目标，但并没有走得太远，并且可以就实现这一目标的最佳方式提出一些意见。

# ios - 我想全局应用一个设置（到我的应用程序中的所有文本 UIViews）

> ID：13826465
> 
> 赞同：-1
> 
> 时间：2012-12-11T18:44:30.053
> 
> 标签：ios, xcode

我有一堆文本视图，现在我想在所有这些视图中打开自动调整大小。我不想单独突出显示每一个，我只想将更改应用于应用程序中的所有文本视图。所以我不想修改框架。我一定会选择最佳答案。

编辑：我想我之前应该提到我正在使用故事板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:49:37.823

在 iOS 5.0+ 中，您应该能够像这样使用 UITextView 的外观代理：

```
[[UITextView appearance] setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight]; 
```

这将使所有 UITextView 以灵活的宽度和高度响应。这是一个关于如何将代理用于其他 UI 控件的精彩教程：

[http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)

编辑：

这段代码应该可以工作，我已经在模拟器和 iPhone 上直接测试过，即使`autoresizingMask`UIView.h 中的属性没有用`UI_APPEARANCE_SELECTOR`. [这篇文章](https://stackoverflow.com/questions/8257556/ios-5-curious-about-uiappearance)似乎表明一个属性可能没有这个标志，但仍然服从来自外观代理的消息。综上所述，@rmaddy 是对的。长期依赖这个可能是有风险的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:02:03.880

一种选择是子类化`UITextView`并创建一个`CustomTextView`. 在其`init`方法或`layoutSubviews`方法中，设置自动调整掩码，然后`CustomTextView`在您的项目中使用它。使用`init`设置此方法的一个优点是，您可以稍后覆盖此自动调整大小掩码。

# android - 应用程序无法在 android 4.0 及更高版本中运行

> ID：13826468
> 
> 赞同：4
> 
> 时间：2012-12-11T18:44:39.313
> 
> 标签：android, gridview, android-edittext

我正在尝试在编辑文本中显示图像和文本，但它不适用于冰淇淋三明治和软糖。它在以下版本中运行良好。

当活动暂停并再次恢复时，它会在编辑文本中显示图像名称而不是图像以及文本..

请参考图片和相关代码

```
 public class MainActivity extends Activity implements OnClickListener,
        OnItemClickListener {

     String path = Environment.getExternalStorageDirectory().getAbsolutePath()
            + "/Emoticons";

HashMap<String, Integer> emoticons = new LinkedHashMap<String, Integer>();

ArrayList<String> arrayList = new ArrayList<String>();

Bitmap bitmap;

EditText editText;

ImageButton cat_one;

ArrayList<String> name = new ArrayList<String>();

View view;

CharSequence[] namesList = { "Email"};

Dialog dialog;

GridView gridView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    if (Environment.getExternalStorageState().equals(
            Environment.MEDIA_MOUNTED)) {

        File sd = new File(path);

        if (!sd.exists())
            sd.mkdirs();

    }

    addComponents();

    addListeners();
}

private void fillArrayList() {

    Iterator<Entry<String, Integer>> iterator = emoticons.entrySet()
            .iterator();

    Log.d("Iterator", iterator.toString());

    while (iterator.hasNext()) {

        Entry<String, Integer> entry = iterator.next();

        Log.d("Entry", entry.getKey());

        arrayList.add(entry.getKey());

    }
}

private void getCategory(String cat_name) {
    // TODO Auto-generated method stub

    if (name.size() > 0)
        name.clear();

    if (emoticons.size() > 0)
        emoticons.clear();

    if (arrayList.size() > 0)
        arrayList.clear();

    Field names[] = R.drawable.class.getFields();

    for (Field f : names) {

        if (f.getName().contains(cat_name)) {

            name.add(f.getName());

        }

    }

    for (int i = 0; i < name.size(); i++) {

        int id = getResources().getIdentifier(name.get(i), "drawable",
                getPackageName());

        Log.d("Drawable Folder", name.get(i).toString());
        emoticons.put(name.get(i), id);

    }
    fillArrayList();
}

private void addListeners() {
    // TODO Auto-generated method stub

    cat_one.setOnClickListener(this);

    gridView.setOnItemClickListener(this);
}

private void addComponents() {
    // TODO Auto-generated method stub

    editText = (EditText) findViewById(R.id.editText1);

    editText.requestFocus();

    view = getLayoutInflater().inflate(R.layout.popup, null);

    gridView = (GridView) view.findViewById(R.id.gridLayout);

    dialog = new Dialog(this, R.style.DialogSlideAnim);

    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);

    dialog.getWindow().setGravity(Gravity.BOTTOM);

    Window window = dialog.getWindow();

    window.setFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL,
            WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL);

    window.clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);

    dialog.setContentView(view);

    dialog.setCanceledOnTouchOutside(true);

    cat_one = (ImageButton) findViewById(R.id.category_one);

}

public Spannable getSmiledText(Context context, String text) {

    SpannableStringBuilder builder = new SpannableStringBuilder(text);

    int index;

    for (index = 0; index < builder.length(); index++) {

        for (Entry<String, Integer> entry : emoticons.entrySet()) {

            int length = entry.getKey().length();

            if (index + length > builder.length())

                continue;

            if (builder.subSequence(index, index + length).toString()
                    .equals(entry.getKey())) {

                builder.setSpan(new ImageSpan(context, entry.getValue()),
                        index, index + length,
                        Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

                index += length - 1;

                break;

            }
        }
    }
    return builder;
}

class ImageAdapter extends BaseAdapter {

    public int getCount() {
        return arrayList.size();
    }

    public Object getItem(int position) {
        return arrayList.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        convertView = LayoutInflater.from(MainActivity.this).inflate(
                R.layout.row, null);
        ImageView imageView = (ImageView) convertView
                .findViewById(R.id.imageView1);

        imageView.setBackgroundDrawable(getResources().getDrawable(
                emoticons.get(arrayList.get(position))));

        Log.d(getLocalClassName(),
                String.valueOf(emoticons.get(arrayList.get(position))));

        return convertView;
    }
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

    if (v == cat_one) {

        getCategory("good");

        gridView.setAdapter(new ImageAdapter());

    }

}

@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int position,
        long arg3) {
    // TODO Auto-generated method stub

    String value = gridView.getAdapter().getItem(position).toString();

    Spannable spannable = getSmiledText(MainActivity.this, value);

    SpannableStringBuilder ssb = new SpannableStringBuilder(
            editText.getText()).append(spannable).append(" ");

    editText.setText(ssb);
    editText.setSelection(editText.getText().length());
    editText.setCursorVisible(true);
}
  } 
```

![在此处输入图像描述](../Images/1d0d072e4d4e8dc4535d32f4791a8166.png)

![在此处输入图像描述](../Images/7dabd2c3267f0e5af69265def969e831.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T23:13:44.573

我认为我们需要进行一些跟踪才能更好地了解出了什么问题。但是由于您无法加载图像，我想知道是否可能是您无法访问外部存储目录

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T00:15:32.763

我建议在加载图像时使用**[Asynctask](http://developer.android.com/reference/android/os/AsyncTask.html)**，这将解决您的问题，我遇到了同样的问题。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

[http://android-developers.blogspot.mx/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.mx/2010/07/multithreading-for-performance.html)

[使用 AsyncTask 在 ListView 中加载图片](https://stackoverflow.com/questions/7729133/using-asynctask-to-load-images-in-listview)

# wcf-binding - WCF 服务绑定内容类型不匹配 - text/xml 和 application/soap+xml

> ID：13826470
> 
> 赞同：3
> 
> 时间：2012-12-11T18:44:42.340
> 
> 标签：wcf-binding, content-type

几天来，我一直在试图弄清楚为什么我的绑定中出现内容类型不匹配错误。有无数其他人似乎遇到了这个问题，但所有的解决方案都不适用或没有奏效。

我到处寻找，试图弄清楚为什么会出现以下错误：

## “/”应用程序中的服务器错误。

内容类型application/soap+xml；响应消息的 charset=utf-8 与绑定的内容类型不匹配 (text/xml; charset=utf-8)。如果使用自定义编码器，请确保正确实现 IsContentTypeSupported 方法。响应的前 823 个字节是：

`<?xml version="1.0" encoding="UTF-8"?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soapenv:Body><GetQuoteResponse xmlns="http://soap.service.GMO.com"><Quote_Response><errorMessage></errorMessage><return_List><item><errorMessage></errorMessage><monthlyPremiumAmount>6.0</monthlyPremiumAmount><webID>7P3W4Txst</webID><basePer1>1000.0</basePer1><basePer2>0.0</basePer2><baseRate1>0.05</baseRate1><baseRate2>0.0</baseRate2><benefitID>5365</benefitID><coverageAmount>100000</coverageAmount><grossPer1>1000.0</grossPer1><grossPer2>0.0</grossPer2><grossRate1>0.06</grossRate1><grossRate2>0.0</grossRate2></item></return_List></Quote_Response></GetQuoteResponse></soapenv:Body></soapenv:Envelope>`.

我正在使用的 Web 服务未托管在 IIS 中。Web 服务本身似乎工作正常，因为我们使用 SoapUI 并将所有正确的结果返回给我们。您还可以从上面的错误消息中看到，正在从 Web 服务返回值。

我也一直在使用 Fiddler，并且能够确认请求标头内容类型是 text/xml，响应标头内容类型是 application/soap+xml。

我们有一个服务引用所在的数据层。app.config 如下所示：

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="IMSQuoteServiceBinding" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" 
                useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default"  />
                </security>

            </binding>

        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://hostingServerName:81/cgi-bin/jsmdirect?IMSQuote"
            binding="basicHttpBinding" bindingConfiguration="IMSQuoteServiceBinding"
            contract="Quote.IMSQuoteServicePortType" name="IMSQuoteServicePort" />
    </client>
</system.serviceModel> 
```

网站 web.config 如下所示：

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="IMSQuoteServiceBinding" closeTimeout="00:01:00"
        openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
        allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
        maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
        messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
        useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
          maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
            realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>

    </binding>
  </basicHttpBinding>    

</bindings>
<client>
  <endpoint address="http://hostingServerName:81/cgi-bin/jsmdirect?IMSQuote"
      binding="basicHttpBinding" bindingConfiguration="IMSQuoteServiceBinding"
      contract="Quote.IMSQuoteServicePortType" name="IMSQuoteServicePort" />
</client> 
```

任何帮助将不胜感激。我对 WCF 有点陌生，对任何和所有想法都持开放态度。

预先感谢大家的帮助。如果您需要我提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T17:00:43.000

Just as an update.

I changed the service binding from basicHttpBinding to wsHttpBinding. Changing the binding to wsHttpBinding changed the SOAP service to send as a SOAP 1.2 call rather than a SOAP 1.1 call. Once I did this, the content types matched on the send and receive calls which resolved the binding mismatch error.

# visual-c++ - 检测 EXCEPTION_FLT_STACK_CHECK 的原因

> ID：13826472
> 
> 赞同：2
> 
> 时间：2012-12-11T18:44:51.770
> 
> 标签：visual-c++, intel, sse, x87

我有一个复杂的 C 和 C++ 代码，其中包含大量的数学计算。我使用英特尔 C++ - 编译的最新更新。我使用优化，应用程序没有给出预期的答案。很长一段时间后，我设法将问题减少到 EXCEPTION_FLT_STACK_CHECK 0xc0000092。如果我在没有优化的情况下编译 - 程序按预期工作。

它是 Winxp64 上的单线程代码（应用程序是 32 位）。

MSVC 2010 提供与调试或发布版本相同的结果。（我的意思是好=预期结果）

有人可以帮我在哪里看吗？目前我怀疑一个编译器错误 - 因为我没有自己的汇编代码，只有编译器生成的代码。我查看了汇编器，它是 SSE/x87 混合代码。

我正在寻找寻找的方向。由于我在试用版（英特尔编译器），我没有太多时间进行调查。

我将尝试使用 /Qfp-stack-check tommorow 来查看是否可以发现我的代码有问题。

*** 更新 *** 我刚刚在 intel 编译器中发现了一个错误。函数在 st(0) 上返回一个值，但调用函数不会删除它。这样我得到堆栈异常。解决方法是使用返回的值，即使我并不总是需要它。我将尝试使用我可以共享的代码来重现它。

在此解决方法之后，英特尔在相同代码上的速度比 msvc2010 快 35%。- 这是主要结果。

莫迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-29T06:05:46.513

*   更新 * 我刚刚在 intel 编译器中发现了一个错误。函数在 st(0) 上返回一个值，但调用函数不会删除它。这样我得到堆栈异常。解决方法是使用返回的值，即使我并不总是需要它。

# cakephp - 包含在 HABTM 中的 CakePHP

> ID：13826474
> 
> 赞同：2
> 
> 时间：2012-12-11T18:44:54.780
> 
> 标签：cakephp, has-and-belongs-to-many, containable

为了解释我遇到的问题，我将使用一个示例。假设我正在构建一个系统，学生可以在其中注册一个或多个课后课程，但学校官员必须批准注册才能使其有效。所以我有这些模型：

*   课程（属于“老师”，hasAndBelongsToMany“学生”）
*   学生（hasAndBelongsToMany“课程”）
*   老师（有很多“课程”）

现在假设我想查看所有针对九年级学生的未批准注册的列表。这很容易：

```
$this->request->data = $this->Student->CoursesStudent->find('all', array(
    'conditions' => array(
        'CoursesStudent.is_approved' => null,
        'Student.grade' => 9
    )
)); 
```

我正在努力解决的问题是同时提取教师的数据（不仅仅是他们的 ID）。我试过这个：

```
$this->request->data = $this->Student->CoursesStudent->find('all', array(
    'conditions' => array(
        'CoursesStudent.is_approved' => null,
        'Student.grade' => 9
    ),
    'contain' => array(
        'CoursesStudent',
        'Course' => array(
            'Teacher' => array(
                'fields' => array(
                    'Teacher.id',
                    'Teacher.name'
                )
            )
        ),
        'Student'
    )
)); 
```

但它对返回的数组没有任何影响。为了方便您将其放入现有的 CakePHP 项目中进行使用，[这里](http://pastebin.com/11Y0C4ix)是数据库模式和数据，[这里](http://pastebin.com/wEBtWWyQ)是您可以粘贴到现有 CakePHP 项目的随机操作中的内容。这就是我想要得到的（注意老师的数据在那里）：

```
Array
(
    [0] => Array
        (
            [CoursesStudent] => Array
                (
                    [id] => 1
                    [course_id] => 1
                    [student_id] => 1
                    [is_approved] => 
                    [created] => 2012-12-11 00:00:00
                    [modified] => 2012-12-11 00:00:00
                )

            [Course] => Array
                (
                    [id] => 1
                    [teacher_id] => 1
                    [title] => Introduction to Improvisation
                    [start_date] => 2012-12-17
                    [end_date] => 2012-12-21
                    [created] => 2012-12-11 00:00:00
                    [modified] => 2012-12-11 00:00:00
                    [Teacher] => Array
                        (
                            [id] => 1
                            [first_name] => John
                            [last_name] => Doe
                            [created] => 2012-12-11 00:00:00
                            [modified] => 2012-12-11 00:00:00
                        )

                )

            [Student] => Array
                (
                    [id] => 1
                    [first_name] => Bill
                    [last_name] => Brown
                    [grade] => 9
                    [created] => 2012-12-11 00:00:00
                    [modified] => 2012-12-11 00:00:00
                )

        )

) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:23:00.610

您必须在使用前设置`$recursive`为才会起作用。`-1``contain()`

此外，请确保您的模型设置为使用可包含行为。在这种情况下，因为 'Course' 也包含一些东西，所以它也需要使用 Containable 行为。

（您可以考虑`$actsAs`在 AppModel 中设置以下内容，以使每个模型都可以使用 Containable。）

```
//in your CoursesStudent model (and in your Course model)
public $actsAs = array('Containable'); 
```

这是您的发现，但首先设置递归：

```
$this->Student->CoursesStudent->recursive = -1;
$this->request->data = $this->Student->CoursesStudent->find('all', array(
    'conditions' => array(
        'CoursesStudent.is_approved' => null,
        'Student.grade' => 9
    ),
    'contain' => array(
        'CoursesStudent',
        'Course' => array(
            'Teacher' => array(
                'fields' => array(
                    'Teacher.id',
                    'Teacher.name'
                )
            )
        ),
        'Student'
    )
)); 
```

# sql-server - 将数据从 Access 导入 SQL Server 的正确方法？

> ID：13826476
> 
> 赞同：1
> 
> 时间：2012-12-11T18:44:56.413
> 
> 标签：sql-server, tsql, ms-access

我正在寻找正确的方法，在 SQL Server 的 T-SQL（我认为就是这样）代码或使用另一种语言中，将数据从 Microsoft Access MDB 数据库导入新的 SQL Server 数据库。

现在，通常我只是将其导入。问题是我正在编写一个 .SQL 脚本（如果需要，我可以使用其他技术）来完成所有这些腿部工作，因为这需要相当定期地完成。可能每周至少一次，一年中持续约 5 个月。

离题一点，我想实现一个单一的数据库，并使用类似`DatabaseID`字段的东西来区分单独的源数据库，但是在那里的权力推翻了我。

我以前使用 SQL Server Management Studio 2012 和 SQL Server 2008，运行 T-SQL（在生产机器上），效果很好。我现在已经使用 SQL Server 2012（用于开发）迁移到本地 SQL Server Management Studio 2012，并且*以前可以工作*的代码不再可用。

这段代码曾经有效：`SELECT * INTO [dbo].[Controls] FROM OpenDataSource('Microsoft.Jet.OLEDB.4.0', 'Data Source=C:\Show.mdb; Jet OLEDB:Database Password=BobSaget')...[Control]`密码已被混淆以确保安全......

这可能是一个草率的解决方案。理想的方式是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:47:34.547

我建议使用 Microsoft 的 SQL Server Migration Assistant for Access。

> SQL Server 迁移助手 (SSMA) 是 Microsoft 提供的免费支持工具，可简化从 Access 到 SQL Server 的数据库迁移过程。SSMA for Access 自动将 Microsoft Access 数据库对象转换为 SQL Server 数据库对象，将对象加载到 SQL Server，然后将数据从 Microsoft Access 迁移到 SQL Server。
> 
> SSMA for Access v5.2 旨在支持从 Microsoft Access 97 及更高版本迁移到 SQL Server 2005、SQL Server 2008、SQL Server 2008 R2、SQL Server 2012 和 SQL Azure 的所有版本。

你可以在[这里](http://www.microsoft.com/en-us/download/details.aspx?id=28763)找到它。

您可能需要在迁移后修复结构，因为它往往会过度夸大许多数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:10:59.600

您是否在 MSDANITIALIZE 上检查过您的 DCOM 安全性？

移动到 SSMS 2012 的本地实例时，我遇到了这个问题。

[http://blogs.msdn.com/b/dataaccesstechnologies/archive/2011/09/28/troubleshooting-cannot-create-an-instance-of-ole-db-provider.aspx](http://blogs.msdn.com/b/dataaccesstechnologies/archive/2011/09/28/troubleshooting-cannot-create-an-instance-of-ole-db-provider.aspx)

# php - 扩展 stripos($_SERVER['REQUEST_URI'] 以检查更多 URL

> ID：13826478
> 
> 赞同：1
> 
> 时间：2012-12-11T18:45:02.407
> 
> 标签：php, stripos

我`stripos`用来修改一个活动的导航类，

```
<?php if (stripos($_SERVER['REQUEST_URI'],'/members/login') !== false) {echo 'class="active"';} ?> 
```

它就像一个魅力。但是我需要添加另一个`REQUEST_URI`来检查字符串，并且无法弄清楚如何正确格式化代码。

我努力了：

```
, '/members/login | /members/members' 
```

和其他没有成功的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:50:52.740

你只需要做两次：

```
if(
   stripos($_SERVER['REQUEST_URI'],'/members/login') === 0
   ||
   stripos($_SERVER['REQUEST_URI'],'/members/members') === 0){ ... 
```

请注意，`===0`我假设您不希望 '/someotherpartofyoursite/members/members' 匹配，所以我切换到了。如果您希望在 1 次调用中使用它，您可以使用正则表达式（请参阅 参考资料[`preg_match()`](http://www.php.net/preg_match)），但在我看来，这已经足够快速和清晰了。

如果列表变得更长，这取决于这些是否是整个路径，如果是，这样的东西可能更合适：

```
$urls = array('/members/login','/members/members');
if(in_array(parse_url($_SERVER['HTTP_REQUEST_URI'], PHP_URL_PATH),$urls)){.... 
```

...但不知道您的 url 方案这是一个猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:55:28.383

您可以像这样在一次调用[preg_match](http://in1.php.net/manual/en/function.preg-match.php)中做到这一点：

```
if (preg_match('#/members/(?:login|members)#i', $_SERVER['REQUEST_URI'])) {
    // matched
} 
```

# linux - mmap() 熵的 ASLR 位

> ID：13826479
> 
> 赞同：1
> 
> 时间：2012-12-11T18:45:11.367
> 
> 标签：linux, linux-kernel, kernel, mmap, aslr

我正在研究 x86 系统上 mmap() 的 ASLR 随机化。我在很多地方读到过，在使用 mmap() 加载的地址上有 16 位随机化。

但是在源代码中我发现：

```
static unsigned long mmap_rnd(void)
02  {
03          unsigned long rnd = 0;
04   
05         /*
06          *  8 bits of randomness in 32bit mmaps, 20 address space bits
07          * 28 bits of randomness in 64bit mmaps, 40 address space bits
08          */
09          if (current->flags & PF_RANDOMIZE) {
10                  if (mmap_is_ia32())
11                          rnd = (long)get_random_int() % (1<<8);
12                  else 
13                          rnd = (long)(get_random_int() % (1<<28));
14          }
15          return rnd << PAGE_SHIFT;
16  } 
```

所以，那将只是 8 位的随机性。

但实际上，运行一些测试，我得到以下地址 (stack-heap-mmap) bf937000,09a60000,b774b000

bfa86000,090ef000,b76e2000

如果可以是 b77XX000 和 b76XX000 就超过 16 位！！！！

对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:37:13.570

`PAGE_SHIFT`正在将随机性转移到不同的位位置。您的地址之间的区别`mmap`确实是：

```
 b774b000
-b76e2000
---------
    69000 
```

我不知道它的值`PAGE_SHIFT`是多少，但如果它是 12，那么你就有`0x69`完全适合 8 位的差异。

# android - 屏幕关闭时Android唤醒锁不起作用

> ID：13826481
> 
> 赞同：3
> 
> 时间：2012-12-11T18:45:15.960
> 
> 标签：android, service, wakelock

我正在尝试为服务实现唤醒锁和 wifi 锁。关于我的场景的更多信息，例如：[Wakelock implementation in a service](https://stackoverflow.com/questions/13359111/wakelock-implementation-in-a-service)。我在启动期间获取并在服务被破坏时释放。我想监控我的项目的电池消耗，虽然我知道，这种方法不好。但是当我的手机屏幕关闭时，它无法正常工作。我已启用选项：在睡眠期间保持 Wifi 开启。一旦我的屏幕关闭，我的服务就会停止。我正在使用代码段：

```
PowerManager powerManager = (PowerManager)getSystemService(Context.POWER_SERVICE);
wakeLock = powerManager.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "My Lock");
if(!wakeLock.isHeld())
{
wakeLock.acquire();
}
Log.d(TAG,"Acquired Wake lock successfully");
wifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
wifiLock = wifiManager.createWifiLock(WifiManager.WIFI_MODE_FULL_HIGH_PERF , "WiFi LockTag");
if(!wifiLock.isHeld())
{
wifiLock.acquire();
}
Log.d(TAG,"Acquired Wifi lock successfully"); 
```

//释放

```
try{
wifiLock.release(); 
}catch(Exception e){
e.printStackTrace();
Log.d(TAG,"Exception while releasing WakeLock :: Can be ignoredd");
} 
```

知道为什么会这样吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:33:09.203

保护屏幕不被锁定使用这个Spinet

```
public static void unlockTheScreen(Context context) {
    KeyguardManager keyguardManager = (KeyguardManager) context.getSystemService(Context.KEYGUARD_SERVICE); 
    KeyguardLock keyguardLock =  keyguardManager.newKeyguardLock("TAG");
    keyguardLock.disableKeyguard();     
} 
```

在您的唤醒锁中添加以下内容

```
 wakeLock = powermanager.newWakeLock((PowerManager.SCREEN_BRIGHT_WAKE_LOCK | PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP ), "TAG"); 
```

# asp.net-mvc - MVC - 两个具有相同参数的文本框

> ID：13826486
> 
> 赞同：0
> 
> 时间：2012-12-11T18:45:40.363
> 
> 标签：asp.net-mvc

```
@using (Html.BeginForm("Orders1", "Track", FormMethod.Post))
{
         @Html.TextBox("order")<br />
         @Html.TextBox("order")
        <input type="submit" value="Submit" />
} 
```

您好，我如何使用两个文本框并将值传递给同一个参数？第一个文本框工作，但另一个文本框没有。

```
 public ActionResult Orders1(IEnumerable<int> order)
        {
             var query = from   a in context.CM_Checkout_Details
                        where  a.CheckoutDetails_ID == order // my error
                        select a;

            return View(query);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:49:58.693

简单的解决方案是将您的参数从更改`int`为`IEnumerable<int>`

```
public ActionResult Orders1(IEnumerable<int> orders)
{

} 
```

# android - android在没有SD卡的情况下将数据库下载到手机

> ID：13826493
> 
> 赞同：0
> 
> 时间：2012-12-11T18:46:03.147
> 
> 标签：android, database, memory, download, internal

我已经阅读[了](http://www.hassanpur.com/blog/2011/04/android-development-downloading-a-file-from-the-web/)关于将数据库下载到我的 SD 卡的教程，我有一个问题，如果**手机没有 SD 卡会发生什么？** 然后我必须将数据下载到内部存储器。

那么如何检查设备是否有sd卡，然后在下载前设置适当的位置？或者它可能会自动完成，因为它使用：

```
outFile = new File(Environment.getExternalStorageDirectory() + "/" + fileName); 
```

知道的请帮帮我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:53:20.057

我认为它可以是有用的[Android Storage Options](http://developer.android.com/guide/topics/data/data-storage.html)。[对于数据库，您可以使用getExternalStorageState()](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageState%28%29)检查 sd 卡状态，或使用[Android SQL helper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html) -class。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:06:40.643

一些安卓手机没有sdcard插槽，但内部存储器被当作外部sdcard处理和模拟。之前检查一下。

检查 sd 卡状态：`getExternalStorageState()`

如果有 sdcard（或模拟 sdcard）

```
outFile = new File(Environment.getExternalStorageDirectory() + "/" + fileName); 
```

如果在 sdcard 中创建一个文件夹会更好：

```
String sdpath = Environment.getExternalStorageDirectory().getAbsolutePath();

        File dir = new File(sdpath + "/AppFolder");
        dir.mkdir();
        outFile = new File(dir.toString() + "/" + fileName); 
```

如果手机没有模拟 SD 卡：

```
outFile = new File(fileName); 
```

位置是 data/data/mypackage/

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T18:50:09.240

```
public static boolean isSdPresent() {

return android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED);

} 
```

# database - SQLite 外键设计问题

> ID：13826494
> 
> 赞同：0
> 
> 时间：2012-12-11T18:46:19.867
> 
> 标签：database, sqlite, database-design

我有`points`字段表

```
id(primary key), lat, lon 
```

还有`cctv_cams`表

```
 cctv_id(primary key), point_id, name 
```

最后是`speeding_cams`表

```
speeding_id(primary key), point_id_a, point_id_b, name 
```

每个，`cctv_cams`并`speeding_cams`有自己的一套点。他们没有相同的观点。一行`cctv_cams`可以引用多`points`行。`cctv_cams`如果没有对应的 .row 就不能存在`points`。

我尝试设置外键，所以当我删除时`cctv_cams`，所有对应`points`的也会被删除。看起来我必须在所有表中定义外键才能做到这一点？

**更新：**重新设计表的说明

点本身不是一行，而是`points`表中的一系列行。对于一个逻辑点，我插入了许多点，所有这些点都应该被标识为 1 个点。有 3 个来源应该参考这样的一系列观点。

1.  `cctv_cams`桌子
2.  `speeding_cams`**A点**表
***   `speeding_cams`**B点**表**

 ****回到级联 - 例如，当我删除超速凸轮记录时，所有系列的点 A 和 B 也应该从`points`表中删除。cctv cam 记录也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:23:01.110

通常，您需要定义具有外键的表，因此：

```
CREATE TABLE cctv_cams (
cctv_id INTEGER PRIMARY KEY,
point_id INTEGER,
name TEXT,
FOREIGN KEY (point_id) REFERENCES points(id) ON DELETE CASCADE ON UPDATE CASCADE); 
```

这将导致删除`points`导致元素`cctv_cams`被删除。相反，对于删除`cctv_cams`导致相应`points`条目被删除的删除，您应该定义一个触发器：

```
CREATE TRIGGER points_cctv_cams_Trigger AFTER DELETE ON cctv_cams
BEGIN
  DELETE FROM points WHERE id = old.point_id);
END; 
```

至于一行`cctv_cams`有多个条目`points`，您的定义并没有表明这一点。一排就是一排。也许您需要修改您的架构？

* * *

有关外键的更多信息：

要检查是否启用了外键支持，请使用：

```
PRAGMA foreign_keys; 
```

要确保它已启用，请使用：

```
PRAGMA foreign_keys = ON; 
```

每次连接时都需要进行设置。不必每次都这样做的唯一方法是，如果 SQLite 没有使用`SQLITE_OMIT_FOREIGN_KEY`or编译`SQLITE_OMIT_TRIGGER`。因为这可能会根据您从哪里获得副本而改变，请检查您的`foreign_keys`价值。如果您的版本让您开启，它总是会开启。请记住：它不依赖于数据库，而是依赖于引擎。****

# kendo-ui - 无法将重点放在自动完成上

> ID：13826496
> 
> 赞同：1
> 
> 时间：2012-12-11T18:46:22.093
> 
> 标签：kendo-ui

我在 panelBar 中有一个自动完成功能。当 panelBar 被激活时，我想将焦点设置为 autoComplete 输入。我已经尝试了几种方法来让它工作，但找不到方法来做到这一点。

该方法被调用，我可以找到自动完成。但是，我无法设置焦点。

```
 //Kendo PanelBar
        function onPanelBarActivate(e) {
            var $autoComplete = $('input .txtProductText', e);

            $autoComplete.focus();
        }
        var $panelBar = $('#panelbar').kendoPanelBar({ expandMode: "single",  expand: onPanelBarActivate }).data("kendoPanelBar"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:26:23.820

这将返回空的 jQuery 对象：

```
$('input .txtProductText', e); 
```

首先`e`是激活事件的事件参数。它不能用作 jQuery 的上下文。你应该`e.item`改用。第二个“input .txtProductText”表示“类为 txtProductText 的输入的子级”。这可能不是您需要的，因为“输入”元素实际上不能有子元素。

试试这个：

```
$('.txtProductText', e.item); 
```

# php - 来自数据库的不同 get_rows

> ID：13826497
> 
> 赞同：1
> 
> 时间：2012-12-11T18:46:22.217
> 
> 标签：php, database

这是我用来在 index.php 中显示结果的函数，其中 style.css 正确完成了 li´s 和 div´s 所有我只想在每个 li 中显示我想要的价格或服务。示例：`($_GET_ROW['ID'] = '1', $_GET_ROW['ID'] = '2')`。

```
function products() { $get = mysql_query('SELECT id, servico, preco FROM loja');

 if (mysql_num_rows($get)==0) {
    echo "Não existem produtos a serem mostrados!";
} else {
    while ($get_row = mysql_fetch_assoc($get)) {
    echo '<li class="l1 i1 column1">';
    echo '<h2>'.**$get_row["servico"]**. '</h2>';
    echo '<div class="basket"><a href="cart.php?adicionar=' .**$get_row['id']='1'**.'">Adicionar</a></p></div>';
    echo '<div class="preco"><em>Preco:</em><strong>'.number_format($get_row['preco'], 2).'</strong><span>EUR</span>';      
    echo '</div>';
    echo '<li class="l2 i0 column0">';
    echo '<h2>'**.$get_row["servico"].**'</h2>';
    echo '<div class="basket"><a href="cart.php?adicionar=' **.$get_row['id']='2'.**'">Adicionar</a></p></div>';
    echo '<div class="preco"><em>Preco:</em><strong>'.number_format($get_row['preco'], 2).'</strong><span>EUR</span>';      
    echo '</div>'; 
```

**我的数据库：**

```
-----------------------------------
id servico preco 
-----------------------------------
1 Servico Normal 29.5
-----------------------------------
2 Servico Rapido 32.5
----------------------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:50:59.913

似乎您需要一个`while`循环来遍历行，如下所示：

```
if (mysql_num_rows($get)==0) {
    echo "Não existem produtos a serem mostrados!";
} else {
    while($get_row = mysql_fetch_assoc($get)) {
    **echo '<li class="l1 i1 column1">';
    echo '<h2>'.$get_row["servico_normal"].'</h2>';
    echo '<div class="basket"><a href="cart.php?adicionar=' .$get_row['id'].'">Adicionar</a></p></div>';
    echo '<div class="preco"><em>Preco:</em <strong>'.number_format($get_row['preco'], 2).'</strong><span>EUR</span>';      
    echo '</div>';**
    }
} 
```

但是，您应该立即停止使用`mysql_`函数，因为它们已[被弃用](http://www.deprecatedphp.com/mysql)并且容易受到 SQL 注入的影响；并使用`mysqli_`or`PDO`代替。

**更新 1**

`mysql_`功能已[正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。

我最初回答的原则仍然存在。您的数据库中有两行，您想遍历它们。

```
while ($get_row = mysql_fetch_assoc($get)) {
    $liClass = 'l' . $get_row[id];

    echo '<li class="' . $liClass . ' i1 column1">';
    echo '<h2>' . $get_row[servico] . '</h2>';
    echo '<div class="basket"><p><a href="cart.php?adicionar=' . $get_row['id'] . '">Adicionar</a></p></div>';
    echo '<div class="preco"><em>Preco:</em><strong>' . number_format($get_row['preco'], 2) . '</strong><span>EUR</span>';      
    echo '</div>';
} 
```

对于第一行，输出将是：

```
<li class="l1 i1 column1">
<h2>Servico Normal</h2>
<div class="basket"><p><a href="cart.php?adicionar=1">Adicionar</a></p></div>
<div class="preco"><em>Preco:</em><strong>29.50</strong><span>EUR</span></div> 
```

# ios - 重复代码两次 IOS-Dropbox

> ID：13826500
> 
> 赞同：0
> 
> 时间：2012-12-11T18:46:34.743
> 
> 标签：ios, xcode, dropbox

这似乎是一个愚蠢的问题，但我不知道如何解决它。我以这种方式将 2 个文件上传到保管箱：

```
[[self restClient] uploadFile:filename1 toPath:destDir
        withParentRev:nil fromPath:tmpPngName];

[[self restClient] uploadFile:filename2 toPath:destDir
        withParentRev:nil fromPath:tmpPngName]; 
```

问题是，当出现错误时，由于 2 次上传失败，此方法被调用了 2 次：

```
- (void)restClient:(DBRestClient*)client uploadFileFailedWithError:(NSError*)error {

NSLog(@"File upload failed with error - %@", error);

    NSString *filename1 = [NSString stringWithFormat:@"/%@newFile.json", NavBar.topItem.title];
    [[self restClient] loadRevisionsForFile:filename2 limit:2];

    NSString *filename2 = [NSString stringWithFormat:@"/%@Map.json", NavBar.topItem.title];
    [[self restClient] loadRevisionsForFile:filenameMap limit:2];

} 
```

而且我喜欢它只调用一次，因为在这种方法中我执行代码来解决两个文件的问题！我怎样才能做到这一点？

# wpf - 如何将命令绑定到 MenuItem (WPF)？

> ID：13826504
> 
> 赞同：9
> 
> 时间：2012-12-11T18:47:05.073
> 
> 标签：wpf, data-binding, command, menuitem, relaycommand

这是我在 View.xaml.cs 中的代码：

```
private RelayCommand _closeCommand;
public ICommand CloseCommand
{
    get
    {
        if (_closeCommand == null)
        {
            _closeCommand = new RelayCommand(param => this.OnClose());
        }
        return _closeCommand;
    }
}

public void OnClose()
{
    Close();
} 
```

这是我的 View.xaml 中的一些代码：

```
<Window.ContextMenu>
    <ContextMenu>
        <MenuItem Name="menuItem_Close" Header="Close" Command="{Binding CloseCommand}" />
    </ContextMenu> 
</Window.ContextMenu> 
```

当我运行程序并选择关闭菜单项时，没有任何反应。CloseCommand 代码甚至没有被执行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T19:38:03.407

`ContextMenu`不是 VisualTree 的一部分，这就是为什么`DataContext`不会被继承。这[`ContextMenu.PlacementTarget`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup.placementtarget.aspx)是某种继电器来获得`Window`：

```
<MenuItem Name="menuItem_Close" Header="Close"
          Command="{Binding Path=PlacementTarget.DataContext.CloseCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-20T19:23:20.020

老问题，新答案。对我来说，问题是`GalaSoft.MvvmLight.Command.RelayCommand`不支持该操作的闭包。RelayCommand 存储对操作的弱引用，因此闭包几乎立即被释放。该操作必须是模型方法或以其他方式保留。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-08T02:51:12.180

绑定交叉视觉树，参考

[WPF 中 DataGridColumn 的绑定可见性](https://stackoverflow.com/questions/22073740/binding-visibility-for-datagridcolumn-in-wpf)

或者 jsut 尝试搜索 BindingProxy

# java - 在二维表中添加数字

> ID：13826506
> 
> 赞同：0
> 
> 时间：2012-12-11T18:47:13.490
> 
> 标签：java, arrays, multidimensional-array

例如，我得到了二维表 3x2，其中所有元素都有 4x 减：“----”。如果我在程序中编写例如 32。第一个数字告诉我们它是什么数字，第二个数字告诉我们一行中有多少个数字。

它会让我的桌子像这样（32）：

```
---- ----      33-- ----
---- ----   -> ---- ----
---- ----      ---- ---- 
```

然后当我们写另一个（53）时：它将检查表 [0][0] 是否为空，如果不是，则检查表 [1][0] 和表 [0][1] 如果两者都有是空的，在这种情况下，它将选择编号较小的表 [0][1]。

```
33-- ----      33-- 555-
---- ----   -> ---- ----
---- ----      ---- ---- 
```

在那里我们可以输入其他数字：

```
33-- 555-      33-- 555-
---- ----   -> 444- 22--
---- ----      333- 222- 
```

我们在空白处插入数字——当所有地方都不为空时，我们在有更多“-”符号的地方插入数字——我们取数字 42 和 33——在 3344 上更改它

```
33-- 555-      3344 555-
444- 22--   -> 444- 22--
333- 222-      333- 222- 
```

如果我们想在不够的地方插入更多数字“-”-程序结束

我是这样开始的：

```
 import java.util.Scanner;
import java.lang.Math.*;

public class Skladisce2
{
    public static int dolzina;
    public static int sirina;
    public static int enote;
    public static int tabela[][][];
        ////////////////////////////////////
        //// PREGLED VRSTIC
        ////////////////////////////////////

    public static boolean Vstavi(int barva, int visina) {
                int pozdolzina = 0;
                int pozsirina = 0;
                int najbolProsto = 0;
                    for(int j=0; j<dolzina; j++) {
                        for(int i=0; i<sirina; i++) {
                            int prosto=0;
                            for(int k=0;k<enote;k++) {
                                if( tabela[j][i][k]==0){
                                prosto++;

                                }
                                if( prosto>najbolProsto ) {
                                pozdolzina = i;
                                pozsirina = j;
                                najbolProsto = prosto;

                                for (int l=enote-najbolProsto; ((l<enote) &&(visina>0));  l++) {
                                    tabela[pozdolzina][pozsirina][l] = barva;

                                    visina--;}
                                    continue;

                }k++;

                            }
                        }

                    }   

                return true;
        }   

        /////////////////////////////////////
        ////   IZPIS TABELE
       //////////////////////////////////////
        public static void Izpis() {
            for (int i=0; i<dolzina; i++){
                for (int j=0; j<sirina; j++){
                    for (int k=0; k<enote; k++) {
                        if(tabela[i][j][k] == 0) {
                            System.out.print("-");
                            }
                        else{
                            System.out.print(tabela[i][j][k]);
                            }
                    }
                    System.out.print(" ");
                }
                System.out.println();
            }

        }

    public static void main (String[] args) {   

        Scanner vnos_stevila = new Scanner(System.in);
        System.out.print("Insert dimension: ");
        int vnos = vnos_stevila.nextInt();

        // int vnos razdeli na podenote - prva številka je dolžina, druga širina in tretja enota
        dolzina = Integer.parseInt(Integer.toString(vnos).substring(0,1));
        sirina = Integer.parseInt(Integer.toString(vnos).substring(1,2));
        enote = Integer.parseInt(Integer.toString(vnos).substring(2,3));

        // izpis tabele s črtami
        tabela= new int[dolzina][sirina][enote];

            // izriše črtice
            Izpis();

          // VPIS SODOV
         while (true){
            System.out.print("Insert color and number");
            int sod = vnos_stevila.nextInt();
            int dolzinaIzpisa =  (int)(Math.log10(sod)+1);

            int barva = Integer.parseInt(Integer.toString(sod).substring(0,1));
            int visina = Integer.parseInt(Integer.toString(sod).substring(1,2));

            Vstavi(barva,visina);   

            Izpis();
            }}
} 
```

但是当我插入数字 32 时，它写道：

```
33-- 33--     
33-- 33--   
33-- 33-- 
```

我怎样才能让程序在哪里检查最低表和插入编号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:47:00.593

只需搜索最佳空闲插槽并插入其中即可。您可能还会发现更容易将您所拥有的视为 3 维数组，而不是 2 维数组。

```
import java.io.Console;

public class ArrayDemo {
private final int sizeX, sizeY, sizeZ;
private final int[][][] values;

public ArrayDemo() {
    this(2,3,4);
}

public ArrayDemo(int x, int y, int z) {
    values = new int[x][y][z];
    sizeX = x;
    sizeY = y;
    sizeZ = z;

    for(int i=0;i<x;i++) {
        for(int j=0;j<y;j++) {
            for(int k=0;k<z;k++) {
                values[i][j][k]=-1;
            }
        }
    }
}

public boolean insert(int value, int count) {
    // find first slot with enough room
    int posX = -1;
    int posY = -1;
    int bestFree = 0;

    // locate largest available slot
    for(int j=0;j<sizeY;j++) {
        for(int i=0;i<sizeX;i++) {
            int free=0;
            for(int k=0;k<sizeZ;k++) {
                if( values[i][j][k]==-1 ) free++;
            }
            if( free>bestFree ) {
                posX = i;
                posY = j;
                bestFree = free;
            }
        }
    }

    // did we find a slot?
    if( bestFree<count ) return false;

    // found slot, insert data
    for(int k=sizeZ-bestFree;(k<sizeZ) && (count>0);k++) {
        values[posX][posY][k] = value;
        count--;
    }
    return true;
}

public String toString() {
    StringBuilder buf = new StringBuilder();
    for(int j=0;j<sizeY;j++) {
        for(int i=0;i<sizeX;i++) {
            if( i>0 ) buf.append(' ');
            for(int k=0;k<sizeZ;k++) {
                if( values[i][j][k]==-1 ) {
                    buf.append('-');
                } else {
                    buf.append(Character.forDigit(values[i][j][k], 36));
                }
            }
        }
        buf.append('\n');
    }
    return buf.toString();
}

public static void main(String[] args) {
    ArrayDemo array = new ArrayDemo();
    Console cons = System.console();
    while( true ) {
        String in = cons.readLine();
        in = in.trim();
        if( in.length() != 2 ) {
            cons.printf("Please supply two digits: value and number\n");
            continue;
        }
        int inputVal = Character.digit(in.charAt(0),36); 
        int inputNum = Character.digit(in.charAt(1),36);
        if( inputVal==-1 || inputNum==-1 ) {
            cons.printf("Please supply two digits: value and number\n");
            continue;
        }

        if( array.insert(inputVal,inputNum) ) {
            cons.printf("Data inserted OK\n%s\n", array.toString());
        } else {
            cons.printf("Data could not be inserted. Finished. Final array is:\n\n%s\n",array.toString());
            return;
        }
    }
}
} 
```

# java - Java中进程的交互

> ID：13826508
> 
> 赞同：0
> 
> 时间：2012-12-11T18:47:16.163
> 
> 标签：java, process, interaction

假设我有一个 Java 应用程序。我想从当前（不是线程 - 一个单独的应用程序）运行另一个 Java 应用程序来计算一些函数，然后他们将结果传递给我的第一个应用程序以输出它。我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:55:08.603

想到什么：

*   RMI
*   共享内存
*   管道
*   从第 2 次调用第 1 次
*   发送信号
*   套接字编程（REST、SOAP 等）

# c# - 为什么 C# DataTable.remove() 方法会删除通过参数传递的值？

> ID：13826509
> 
> 赞同：0
> 
> 时间：2012-12-11T18:47:20.570
> 
> 标签：c#, asp.net, datatable, dataset

目的是将一行移到 DataTable 中的第一个位置，因此一旦我得到该行，我将其删除，然后将其插入到第一个位置。

```
 DataRow[] dr = DataSet1.Tables[0].Select("field1 = HELLO");

 DataSet2.Tables[0].Rows.Remove(dr[0]); // Here dr[0] is removed. Why?
 DataSet2.Tables[0].Rows.InsertAt(dr[0], 0); // Now a null value is inserted 
```

第二行将值都删除到 de DataTable 中并`dr[0]`作为参数传递，因此我无法在第一个位置插入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:50:55.993

这是因为 dr[0] 只是一个参考，您需要克隆它然后删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:04:30.317

试试下面的逻辑...

```
var row = DataSet2.Tables[0].Select("field1 = HELLO").First();
var oldIndex = DataSet2.Tables[0].Rows.IndexOf(row);
DataSet2.Tables[0].Rows.InsertAt(row, 0);
DataSet2.Tables[0].Rows.RemoveAt(oldIndex); 
```

这只是逻辑..所以忽略了空检查和异常处理

# mysql - 插入 MySQL - IF t1.count(*) < t2.available

> ID：13826510
> 
> 赞同：0
> 
> 时间：2012-12-11T18:47:25.930
> 
> 标签：mysql, select, insert

我有两个 MySQL 表。一张桌子是奖品列表​​，另一张桌子是获奖者列表。可以有多种类型的奖品可用。

**奖**

*   ID
*   姓名
*   可用的

**优胜者**

*   姓名
*   奖品编号

如果有 3 个奖品可用，并且目前只有 2 个获奖者将该奖品列为他们的`prize_id`，我想插入下一个获奖者。

我试过这个查询：

```
INSERT INTO winner (name, prize_id) 
SELECT 'steve', 1
FROM winner, prize
WHERE (select if(count(w.id) < p.available, 1, 0) as `valid` 
       from prize p, winner w 
       where p.id = 1 and w.prize_id = p.id) = 1 
```

`prize`如果我把它修剪成这个，它有点工作，但会插入表中存在的尽可能多的行

```
INSERT INTO prize (name, prize_id)  
SELECT 'steve', 1 
FROM winner   
WHERE 1 = 1; 
```

有没有办法让这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:58:09.147

尝试这个 ：：

```
INSERT INTO winner (name, prize_id) 
SELECT tempwinner.name , tempwinner.prize_id
from
(Select 
column1, column2
    FROM winner inner join prize p on (w.prize_id = p.id)
    WHERE p.id = 1 and count(w.id) < p.available
) tempwinner 
```

# javascript - jqgrid选择中的字符串数字

> ID：13826512
> 
> 赞同：0
> 
> 时间：2012-12-11T18:47:31.593
> 
> 标签：javascript, jquery

```
 gridComplete: function () {
        var ids = jQuery("#grdProgramsEnrolled").jqGrid('getDataIDs');
        for (var i = 0; i < ids.length; i++) {
            var cl = ids[i];
            var rowId = $("#grdProgramsEnrolled").getRowData(cl)
            var PUIC = $("#ctl00_ContentPlaceHolder2_hfldUIC").val();
            be = "<a href='#'>Select</a >";
            be = "<a href='#' onclick='GetEnrollmentByCIP(" + rowId['CIP'] + ")'>Select</a >";
            jQuery("#grdProgramsEnrolled").jqGrid('setRowData', ids[i], { ab: be });
        }   // end of for loop 
```

在 rowID['CIP'] 中，CIP 的值可以是 01.0000 或 19.0000 或 12.9999。如果值为 12.9999，我的 GetEnrollmentByCIP 函数会将传递的值视为 12.9999。如果是 19.0000，函数会将传递的值视为 19。如果是 01.0000，函数将看不到任何传递的值。如何编码 'GetEnrollmentByCIP(" + rowId['CIP'] + ") 以便它将值作为整个字符串传递，如 01.0000？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:59:38.507

将变量作为字符串而不是数字传递：

```
be = "<a href='#' onclick='GetEnrollmentByCIP(\"" + rowId['CIP'] + \"")'>Select</a >";
//                                             ^escaped doublequotes^ 
```

# java - 油漆组件不改变形状

> ID：13826514
> 
> 赞同：1
> 
> 时间：2012-12-11T18:47:33.887
> 
> 标签：java, swing, paintcomponent, jcomponent

有人可以看看我下面的代码并告诉我为什么，当我更改以下两个语句时，我没有看到绘制的矩形发生变化。所以如果我改变：

```
g.setColor(Color.black); 
g.fillRect(l, w, 100, 100); 
```

即使我将颜色更改为黄色或尝试更改尺寸或位置，该程序仍会打印一个具有相同尺寸和相同位置的黑色矩形。我是蓝J。以下是我的完整代码：

```
import java.awt.*;
import javax.swing.*;

public class SwingPaintDemo2 extends JComponent {

public static boolean isWall = true;

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI(); 
        }
    });
}

private static void createAndShowGUI() {
    //System.out.println("Created GUI on EDT? "+
    //SwingUtilities.isEventDispatchThread());
    JFrame f = new JFrame("Swing Paint Demo");
    JPanel MyPanel = new JPanel();
     MyPanel.setBorder(BorderFactory.createEmptyBorder(1000, 1000, 1000, 1000));
     MyPanel.setPreferredSize(new Dimension(250, 200));
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
    f.add(new MyPanel());
    f.pack();
    f.setVisible(true);

}

public void paintComponent(Graphics g) {
    super.paintComponent(g); 
    int l = 10;
    int w = 10;

  g.setColor(Color.black); 
  g.fillRect(l, w, 100, 100);

        }

} 
```

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T18:58:19.533

您的 SSCCE 没有编译`MyPanel`类在哪里，或者您的意思是`new SwingPaintDemo2()`什么？

假设你的意思是`new SwingPaintDemo2()`：

代码确实可以正常工作，但`JFrame`大小非常小：

![在此处输入图像描述](../Images/9c46a5133d34a6ba1c4201efa7381b59.png)

因为您没有给它任何大小，并且它的任何组件都没有大小，因为它们没有添加任何组件，因此我们必须使`JComponent`返回的大小正确，所以当我们调用 pack() 时，我们`JFrame`的大小是正确的

**解决方案**

覆盖`getPreferredSize()`以`JComponent`返回适合所有图纸的宽度和高度。

不过一些建议：

*   不要扩展`JComponent`，而是扩展`JPanel`

这是一个示例（您的代码实现了上述修复）：

![在此处输入图像描述](../Images/ef06ca679712b4f075de477c41c5992e.png)

```
import java.awt.*;
import javax.swing.*;

public class SwingPaintDemo2 extends JPanel {

    public static boolean isWall = true;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }

    private static void createAndShowGUI() {
        //System.out.println("Created GUI on EDT? "+
        //SwingUtilities.isEventDispatchThread());
        JFrame f = new JFrame("Swing Paint Demo");
        JPanel MyPanel = new JPanel();
        MyPanel.setBorder(BorderFactory.createEmptyBorder(1000, 1000, 1000, 1000));
        MyPanel.setPreferredSize(new Dimension(250, 200));
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new SwingPaintDemo2());
        f.pack();
        f.setVisible(true);

    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        int l = 10;
        int w = 10;

        g.setColor(Color.black);
        g.fillRect(l, w, 100, 100);

    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(150, 150);
    }
} 
```

# java - 如果节点制作的时间戳少于或多于五分钟，我应该如何让服务器检查？

> ID：13826517
> 
> 赞同：0
> 
> 时间：2012-12-11T18:47:39.417
> 
> 标签：java, jakarta-ee, timestamp

在我的网络应用服务器中，保存了所有连接到它的节点的列表（在数据库中）。只是为了确保它不再保留未连接到它的节点信息，在一定间隔后它会从数据库中删除该节点。每个节点每 10 秒 ping 一次到服务器，并创建一个条目，表明*该*特定节点此时 ping*服务器*。

*问题 ：*

*   当节点 ping 服务器时，服务器设法存储节点信息，但它（***我***）不知道如何在数据库中制作时间戳，因此在服务器超时（比如说 5 分钟）后它会删除节点信息。

请帮助我输入一些信息，至于我应该如何管理这个？如果我制作时间戳，例如：

```
new GregorianCalendar().getTimeInMillis(); 
```

在服务器上每 10 秒后，服务器应该如何检查时间戳是否为 5 分钟？或者可能有另一种方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:53:02.520

```
boolean isOld = System.currentTimeMillis() = someDate.getTime() > 300000; // 5 mins in ms 
```

# java - 更新数据表

> ID：13826518
> 
> 赞同：1
> 
> 时间：2012-12-11T18:47:41.273
> 
> 标签：java, jsf, primefaces

我正在各种论坛上进行研究，但没有发现任何类似的东西，或者任何可以解决问题的东西。

我有两个领域。在左侧我创建对象。在右侧，这些对象**应**自动出现在表格中。

我没有预期的结果。我必须刷新整个页面。

帮帮我=/

代码 - - - - - - - - - - - - - - - -

```
<p:layoutUnit position="west" size="480" id="layout1">

    <h:form id="form_unidadeCadastro">
        <p:panel id="panelUnidadeCadastro" header="Criar Unidade"
            style="width:473px;">

            <p:messages id="msgs" />
            <p:focus for="nome" />

            <h:panelGrid columns="2">
                <h:outputText value="Nome:" />
                <p:inputText id="nome" size="30"
                    value="#{unidadeBean.unidade.nome}" required="true" label="Nome" />

                <h:outputText value="Endereço:" />
                <p:inputText id="endereco" size="30"
                    value="#{unidadeBean.unidade.endereco}" required="true"
                    label="Endereco" />

                <h:outputText value="Bairro:" />
                <p:inputText id="bairro" value="#{unidadeBean.unidade.bairro}"
                    required="true" label="Bairro" />

                <h:outputText value="Cidade:" />
                <p:inputText id="cidade" value="#{unidadeBean.unidade.cidade}"
                    required="true" label="Cidade" />

                <h:outputText value="Telefone:" />
                <p:inputMask id="telefone" size="15"
                    value="#{unidadeBean.unidade.telefone}" mask="(99) 99999999?9"
                    required="true" label="Telefone" />

                <h:outputText value="E-mail:" />
                <p:inputText id="email" value="#{unidadeBean.unidade.email}"
                    required="true" label="Nome" />

            </h:panelGrid>
            <p:commandButton value="Criar" actionListener="#{unidadeBean.salvar}" update=":form_unidadeCadastradas:tab_unidadeCadastradas"/>

        </p:panel>
    </h:form> 

</p:layoutUnit>

<p:layoutUnit position="center" id="center_center">

    <h:form id="form_unidadeCadastradas">
        <p:dataTable id="tab_unidadeCadastradas" var="u" value="#{unidadeBean.listar}" style="width:657px;border-radius:5px;">
            <p:column headerText="Unidades Criadas" style="border-radius:5px;font-size: 15px;">
                <h:outputText value="#{u.nome}" />
            </p:column>
        </p:dataTable>
    </h:form>

</p:layoutUnit> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:56:42.473

尝试添加`ajax="false"`到 commandButton。（我自己不确定。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:40:08.483

如果您绝对确定 java 实现（您没有发布），我建议只更新表单而不是数据表，内容将自动更新。

```
<p:commandButton value="Criar" actionListener="#{unidadeBean.salvar}" update=":form_unidadeCadastradas"/> 
```

如果这不起作用，然后发布java代码，问题可能就在那里。

# android - Android OCR 强制关闭

> ID：13826520
> 
> 赞同：0
> 
> 时间：2012-12-11T18:47:49.113
> 
> 标签：android, ocr

我正在关注[这里](http://gaut.am/making-an-ocr-android-app-using-tesseract/)的教程。

我已经完成了所有步骤，当我在 eclipse 中单击运行时，它似乎可以在应用程序进入我的手机时工作。

但是，当我单击它时，会出现“强制关闭错误”。

当我从电脑上拔下手机时，我可以拍照，但是当我对它进行 ocr 操作时，我得到了强制关闭错误。

我正在使用 Windows 7，阅读它应该工作的页面上的评论

这是我得到的一些 logcat 错误的打印 -

```
@Override
public void onCreate(Bundle savedInstanceState) {

    String[] paths = new String[] { DATA_PATH, DATA_PATH + "tessdata/" };

    for (String path : paths) {
        File dir = new File(path);
        if (!dir.exists()) {
            if (!dir.mkdirs()) {
                Log.v(TAG, "ERROR: Creation of directory " + path + " on sdcard failed");
                return;
            } else {
                Log.v(TAG, "Created directory " + path + " on sdcard");
            }
        }

    }

    // lang.traineddata file with the app (in assets folder)
    // You can get them at:
    // http://code.google.com/p/tesseract-ocr/downloads/list
    // This area needs work and optimization
    if (!(new File(DATA_PATH + "tessdata/" + lang + ".traineddata")).exists()) {
        try {

            AssetManager assetManager = getAssets();
            InputStream in = assetManager.open("tessdata/eng.traineddata");
            //GZIPInputStream gin = new GZIPInputStream(in);
            OutputStream out = new FileOutputStream(DATA_PATH
                    + "tessdata/eng.traineddata");

            // Transfer bytes from in to out
            byte[] buf = new byte[1024];
            int len;
            //while ((lenf = gin.read(buff)) > 0) {
            while ((len = in.read(buf)) > 0) {
                out.write(buf, 0, len);
            }
            in.close();
            //gin.close();
            out.close();

            Log.v(TAG, "Copied " + lang + " traineddata");
        } catch (IOException e) {
            Log.e(TAG, "Was unable to copy " + lang + " traineddata " + e.toString());
        }
    }

    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    // _image = (ImageView) findViewById(R.id.image);
    _field = (EditText) findViewById(R.id.field);
    _button = (Button) findViewById(R.id.button);
    _button.setOnClickListener(new ButtonClickHandler());

    _path = DATA_PATH + "/ocr.jpg";
    //_path = DATA_PATH + "/shuffledDigits.jpg";

} 
```

错误日志

```
 12-11 18:09:14.097: E/jdwp(926): Failed sending req to debugger: Broken pipe (-1 of 27)
    12-11 18:09:14.097: E/jdwp(926): Failed sending req to debugger: Broken pipe (-1 of 27)
    12-11 18:09:14.097: E/jdwp(926): Failed sending reply to debugger: Broken pipe
    12-11 18:09:14.287: V/SimpleAndroidOCR.java(926): ERROR: Creation of directory /sdcard/SimpleAndroidOCR/ on sdcard failed
    12-11 18:09:14.287: D/AndroidRuntime(926): Shutting down VM
    12-11 18:09:14.287: W/dalvikvm(926): threadid=3: thread exiting with uncaught exception (group=0x40026160)
    12-11 18:09:14.287: E/AndroidRuntime(926): Uncaught handler: thread main exiting due to uncaught exception
    12-11 18:09:14.306: E/AndroidRuntime(926): android.app.SuperNotCalledException: Activity {com.datumdroid.android.ocr.simple/com.datumdroid.android.ocr.simple.SimpleAndroidOCRActivity} did not call through to super.onCreate()
    12-11 18:09:14.306: E/AndroidRuntime(926):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2468)
    12-11 18:09:14.306: E/AndroidRuntime(926):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2519)
    12-11 18:09:14.306: E/AndroidRuntime(926):  at android.app.ActivityThread.access$2200(ActivityThread.java:123)
    12-11 18:09:14.306: E/AndroidRuntime(926):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1870)
    12-11 18:09:14.306: E/AndroidRuntime(926):  at android.os.Handler.dispatchMessage(Handler.java:99)
    12-11 18:09:14.306: E/AndroidRuntime(926):  at android.os.Looper.loop(Looper.java:123)
    12-11 18:09:14.306: E/AndroidRuntime(926):  at android.app.ActivityThread.main(ActivityThread.java:4370)
    12-11 18:09:14.306: E/AndroidRuntime(926):  at java.lang.reflect.Method.invokeNative(Native Method)
    12-11 18:09:14.306: E/AndroidRuntime(926):  at java.lang.reflect.Method.invoke(Method.java:521)
    12-11 18:09:14.306: E/AndroidRuntime(926):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    12-11 18:09:14.306: E/AndroidRuntime(926):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    12-11 18:09:14.306: E/AndroidRuntime(926):  at dalvik.system.NativeStart.main(Native Method)
    12-11 18:09:14.597: D/dalvikvm(915): GC freed 1836 objects / 141248 bytes in 161ms
    12-11 18:09:14.657: W/ActivityManager(1233): Activity pause timeout for HistoryRecord{45b2f140 com.datumdroid.android.ocr.simple/.SimpleAndroidOCRActivity}
    12-11 18:09:14.657: E/SemcCheckin(926): Get crash dump level : java.io.FileNotFoundException: /data/semc-checkin/crashdump
    12-11 18:09:14.657: W/ActivityManager(1233): Unable to start service Intent { act=com.sonyericsson.android.jcrashcatcher.action.BUGREPORT_AUTO cmp=com.sonyericsson.android.jcrashcatcher/.JCrashCatcherService (has extras) }: not found
    12-11 18:09:14.667: I/Process(1233): Sending signal. PID: 926 SIG: 3
    12-11 18:09:14.667: I/dalvikvm(926): threadid=7: reacting to signal 3
    12-11 18:09:14.667: I/dalvikvm(926): Wrote stack trace to '/data/anr/traces.txt'
    12-11 18:09:14.677: I/Process(926): Sending signal. PID: 926 SIG: 9
    12-11 18:09:14.687: E/SemcCheckin(1704): Get Crash Level : java.io.FileNotFoundException: /data/semc-checkin/crashdump

    12-11 18:12:30.927: E/AndroidRuntime(1009): Uncaught handler: thread main exiting due to uncaught exception
    12-11 18:12:30.936: E/AndroidRuntime(1009): java.lang.ExceptionInInitializerError
    12-11 18:12:30.936: E/AndroidRuntime(1009):     at com.datumdroid.android.ocr.simple.SimpleAndroidOCRActivity.onPhotoTaken(SimpleAndroidOCRActivity.java:211)
    12-11 18:12:30.936: E/AndroidRuntime(1009):     at com.datumdroid.android.ocr.simple.SimpleAndroidOCRActivity.onActivityResult(SimpleAndroidOCRActivity.java:135)
    12-11 18:12:30.936: E/AndroidRuntime(1009):     at android.app.Activity.dispatchActivityResult(Activity.java:3835)
    12-11 18:12:30.936: E/AndroidRuntime(1009):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3332)
    12-11 18:12:30.936: E/AndroidRuntime(1009):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3378)
    12-11 18:12:30.936: E/AndroidRuntime(1009):     at android.app.ActivityThread.access$2700(ActivityThread.java:123)
    12-11 18:12:30.936: E/AndroidRuntime(1009):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1900)
    12-11 18:12:30.936: E/AndroidRuntime(1009):     at android.os.Handler.dispatchMessage(Handler.java:99)
    12-11 18:12:30.936: E/AndroidRuntime(1009):     at android.os.Looper.loop(Looper.java:123)
    12-11 18:12:30.936: E/AndroidRuntime(1009):     at android.app.ActivityThread.main(ActivityThread.java:4370)
    12-11 18:12:30.936: E/AndroidRuntime(1009):     at java.lang.reflect.Method.invokeNative(Native Method)
    12-11 18:12:30.936: E/AndroidRuntime(1009):     at java.lang.reflect.Method.invoke(Method.java:521)
    12-11 18:12:30.936: E/AndroidRuntime(1009):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    12-11 18:12:30.936: E/AndroidRuntime(1009):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    12-11 18:12:30.936: E/AndroidRuntime(1009):     at dalvik.system.NativeStart.main(Native Method)
    12-11 18:12:30.936: E/AndroidRuntime(1009): Caused by: java.lang.UnsatisfiedLinkError: Library lept not found
    12-11 18:12:30.936: E/AndroidRuntime(1009):     at java.lang.Runtime.loadLibrary(Runtime.java:489)
    12-11 18:12:30.936: E/AndroidRuntime(1009):     at java.lang.System.loadLibrary(System.java:557)
    12-11 18:12:30.936: E/AndroidRuntime(1009):     at com.googlecode.tesseract.android.TessBaseAPI.<clinit>(TessBaseAPI.java:47)
    12-11 18:12:30.936: E/AndroidRuntime(1009):     ... 15 more
    12-11 18:12:30.946: E/SemcCheckin(1009): Get crash dump level : java.io.FileNotFoundException: /data/semc-checkin/crashdump 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:06:15.150

如我所见，您没有在您的 SimpleAndroidOCRActivity 的 onCreate(Bundle) 方法中调用 super.onCreate(savedInstanceState)

# google-maps-api-3 - 谷歌地图 api v3 从带有 java 代码地址的文件中获取 lat long

> ID：13826522
> 
> 赞同：2
> 
> 时间：2012-12-11T18:47:53.690
> 
> 标签：google-maps-api-3, latitude-longitude, street-address

我正在尝试制作一个绘制热图的应用程序。我有一个包含家庭地址的文件，我将把它放在地图上。每个地址都是此文件中的一个新行。我知道如何在有坐标时创建热图图层。
获取这些地址坐标的最佳方法是什么？
我知道有几种方法可以做到这一点，但我正在寻找的方法是在服务器上做到这一点。我知道我必须向服务器发送请求。您能否提供一个 Java 中的示例代码，该代码为其获取经纬度坐标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:11:01.873

你可以使用这个库：

[http://code.google.com/p/geocoder-java/](http://code.google.com/p/geocoder-java/)

它也记录了示例。

# ruby-on-rails - Rails 3.2.x - ubuntu、nginx、unicorn 设置上没有生产日志条目

> ID：13826525
> 
> 赞同：2
> 
> 时间：2012-12-11T18:48:05.823
> 
> 标签：ruby-on-rails, nginx, unicorn

在 ubuntu、nginx、unicorn 设置上，我看到的唯一生产日志条目来自命令行命令，例如部署和迁移。我根本没有从网站活动中获得任何条目。

我已阅读此错误报告[https://github.com/rails/rails/issues/4277#commit-ref-b332877](https://github.com/rails/rails/issues/4277#commit-ref-b332877)并尝试添加

`Rails.logger.instance_variable_get(:@logger).instance_variable_get(:@log_dest).sync = true if Rails.logger` 到建议的初始化程序，但这只是给我一个错误，表明当我尝试运行任何东西时同步为零

我在 rails v 3.2.1 和 3.2.9 有同样的问题

任何想法如何获得日志输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:43:40.423

终于解决了这个首先我相信（我可能是错的，并且需要对此进行更正）在提出这个问题时，unicorn gem 中存在错误，这意味着日志条目没有被刷新，请参阅此报告以获取更多信息这个特殊问题[https://github.com/rails/rails/issues/4277](https://github.com/rails/rails/issues/4277)

我正在使用最新的 unicorn gem，现在一切都很好，但是关于 unicorn 配置文件的快速说明以及您可能看不到 nGinx/Unicorn 设置的生产日志条目的其他原因

1) 如果 nGinx 无法连接到您的 Web 服务器，它可能会返回 500 错误（如果您已将 nginx 配置设置为执行此操作）。ie unicorn 无法启动。

显然，如果 unicorn 失败了，那么您的 rails 就没有运行，您将寻找不存在的 rails 日志条目。如果是这种情况，请检查您的 unicorn 配置以查看您将 unicorn 错误写入的位置。我的 unicorn.rb 文件与此类似

```
root = "/home/some_user/some_app/current"
pid "#{root}/tmp/pids/unicorn.pid"
stderr_path "#{root}/log/unicorn.log"
stdout_path "#{root}/log/unicorn.log" 
```

请注意，我将错误和正常的独角兽日志条目都指向同一个日志文件。标准是使用不同的日志文件，但我发现只需要查看一个独角兽日志文件对我来说更简单。

您可能会看到 500 个错误页面而不是您的 Web 服务器未运行时通常会看到的错误网关错误的原因是您可能将 nginx.conf 文件设置为从您的应用程序提供静态错误页面，所以您可能有这样的东西

```
server {
  listen 80;
  server_name my_domain_name.com;
  root /path_to_my_app_root/current/public;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://ff1;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

如果您的服务器未运行，该`error_page 500 502 503 504 /500.html;`行告诉 nginx 为您的应用程序提供静态 500.html 页面而不是坏网关 nginx 页面。这很酷，但是如果您不考虑到 rails 500 页面不一定会为您提供生产日志条目，那就会令人​​困惑。

总结一下。如果您看到您的应用程序 500.html 页面并且您在 production.log 中没有看到任何条目来帮助您追踪问题，请记住检查 unicorn.rb 配置中定义的 unicorn 错误日志文件以检查什么，如果任何，正在给出服务器无法启动的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T19:10:39.747

只是一个猜测。您的 ruby​​ 服务器是否可能在无权写入记录文件的用户下运行？检查服务器控制台（如果可用）是否有警告。

# java - Java Swing 不工作

> ID：13826526
> 
> 赞同：1
> 
> 时间：2012-12-11T18:48:06.913
> 
> 标签：java, swing

每当我尝试启动任何显示 gui 的 java 应用程序时，都会出现错误。我尝试过使用 java 6 和 java 7。这些都不起作用，我尝试过较旧和较新的 nvidia 驱动程序。我不确定这是 Java 的问题，还是我们使用的主板没有兼容的视频驱动程序？板载显卡驱动是geforce 520，主板是d2700itx zotac。

这是我在 windows xp 上的这台机器上的所有内部 java 应用程序中得到的错误：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000001fe, pid=3628, tid=3896
#
# JRE version: 6.0_37-b06
# Java VM: Java HotSpot(TM) Client VM (20.12-b01 mixed mode, sharing windows-x86 )
# Problematic frame:
# C  0x000001fe
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#

---------------  T H R E A D  ---------------

Current thread (0x033ef400):  JavaThread "AWT-EventQueue-1" [_thread_in_Java, id=3896, stack(0x03d60000,0x03db0000)]

siginfo: ExceptionCode=0xc0000005, reading address 0x000001fe

Registers:
EAX=0x00000000, EBX=0x00000015, ECX=0x22a2f620, EDX=0x00000000
ESP=0x03db9c3f, EBP=0x03dae65c, ESI=0x36b42f81, EDI=0x03dae688
EIP=0x000001fe, EFLAGS=0x00010216

Top of Stack: (sp=0x03db9c3f)
0x03db9c3f:   0000000b 00000000 00000000 00000000
0x03db9c4f:   23c10100 0023e200 07f40100 c0006be0
0x03db9c5f:   0000026d 6dc70000 6dd00604 00050000
0x03db9c6f:   00000000 00000000 056dd500 006ddd15
0x03db9c7f:   e2002b00 00000004 05c20000 0013c200
0x03db9c8f:   00000000 05e20000 c1000000 08c20012
0x03db9c9f:   0009c200 00000000 00000000 00000000
0x03db9caf:   00000000 00000000 01010100 00000001 

Instructions: (pc=0x000001fe)
0x000001de: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:05:58.020

尝试为整个系统禁用 Java 的硬件加速。

1.  打开 Java 控制面板。
2.  双击 Java 图标。
3.  单击 Java 选项卡。
4.  单击 Java Applet 运行时设置中的查看按钮。
5.  为正在使用的每个 JVM添加`-Dsun.java2d.d3d=false`Java 运行时参数字段。

请注意，这也将具有减少应用程序使用的内存量的附带好处（根据我的经验）。

您还可以使用属性文件和 env 设置 JVM 默认属性。变量（谷歌了解详情）。可能值得首先将该属性添加到您失败的应用程序之一的命令行中，以进行测试。

# memory - Tcl - 在过程中间释放内存

> ID：13826527
> 
> 赞同：2
> 
> 时间：2012-12-11T18:48:10.290
> 
> 标签：memory, tcl

我们有一个在 AOLServer 上运行的 Web 应用程序。我们提供的一项功能要求应用程序处理存储在多个 ns_set 中的大量数据。该过程包括五个步骤。我们注意到，在前 3 个步骤之后内存使用量接近限制，并且在第 4 步中内存不足。我尝试使用“unset”来释放步骤 1-3 中使用的 ns_set，但没有任何成功。所以我的问题是如何正确释放在这 3 个步骤中使用的那些 ns_sets，然后第 4 步和第 5 步可以在有足够可用内存的情况下运行？

非常感谢您的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:05:22.987

您可以`ns_set free`按照上述评论之一中的说明使用，请参阅此处获取文档：

[http://panoptic.com/wiki/aolserver/Ns_set](http://panoptic.com/wiki/aolserver/Ns_set)

您可能需要考虑使用外部存储，例如文件系统或数据库。如果您碰巧正在使用请求线程进行处理，则应考虑使用`ns_thread`或`ns_schedule_proc -thread`执行每个步骤。当一个线程完成时（如果使用加入`ns_thread`），任何`ns_set`由该线程创建的都应该被释放。

# javascript - 使用 ViewBox 在浏览器中调整 SVG 对象的问题

> ID：13826529
> 
> 赞同：3
> 
> 时间：2012-12-11T18:48:14.327
> 
> 标签：javascript, jquery, svg

我有两个 div 容器。第一个包含许多小的 SVG 图像，第二个应该包含您单击的 SVG 图像。

第一个 div 中任何 SVG 图像的“单击”，我想：

1.  克隆 SVG 图像。
2.  将其（克隆）重新缩放到其原始大小的 5 倍。
3.  在第二个 div 容器中查看它。

我做了一些研究，发现我可以使用 viewBox 控制 SVG 图像的缩放和大小。所以我设置了 viewBox 属性。一个小 svg 看起来像这样：

```
 var small svg = div.append("svg:svg")               
                .attr("class", "thumbnail")
                .attr("width", w)
                .attr("height", h)  
                .attr("viewBox", "0 0 " + w + " " + h)
                .attr("preserveAspectRatio", "none")

                .on("click", function(){
                            var projectedGraph = this.cloneNode(true);

            IncreaseSize(projectedGraph);

            }); 
```

现在，在“IncreaseSize”方法中，我完成了以下操作：

```
 projectedGraph.setAttribute("class", "main")
            projectedGraph.setAttribute("width", w*5)
            projectedGraph.setAttribute("height", h*5)
            projectedGraph.setAttribute("viewBox", "0 0 " + (w*5) + " " + (h*5))

            $mainContent.append(projectedGraph); // append to second Div 
```

但大小保持不变（视觉上）。当我在“Chrome”中“检查元素”时。参数已设置。我花了很多时间调整值并试图理解问题，每次我增加“projectedGraph”的 viewBox 宽度和高度，而不重置 svg 的宽度和高度时，图像都会变小

我看到了许多相关的问题，例如：

*   [使用 ViewBox 根据窗口大小调整 svg 的大小](https://stackoverflow.com/questions/13632169/using-viewbox-to-resize-svg-depending-on-the-window-size)

*   [如何缩放 SVG 图像以填充浏览器窗口？](https://stackoverflow.com/questions/5643254/how-to-scale-svg-image-to-fill-browser-window)

还有更多，但我仍然无法解决问题。请问我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:06:00.423

width 和 height 属性控制 SVG 绘图占据的区域大小。viewBox 控制您看到的内容。如果你同时增加它们，那么你会看到更多原本不可见的东西（在绘图区域之外），但每个形状的大小都相同。

如果您希望形状变得更大，即类似缩放效果，请不要更改 viewBox。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:17:56.753

您知道，如果您只想以不同的比例查看 svg，则不必克隆它，对吧？

这是一个[例子](http://xn--dahlstrm-t4a.net/svg/examples/MapWithDynamicMiniView.svg)。

它的作用是它有一个嵌套的 <svg> 元素，其中有一个 <use> 元素，该元素链接到应该以另一个比例查看的 svg。

```
<svg id="mainsvg">
  <g id="map">
    ...
      your unscaled svg here
    ...
  </g>

  <svg id="miniview" viewBox="340 502 100 100" 
   width="200" height="200" x="400" y="60" overflow="hidden">
    <use xlink:href="#map" width="100%" height="100%"/>
  </svg>
</svg> 
```

# objective-c - iOS：从字典中获取矩阵

> ID：13826530
> 
> 赞同：2
> 
> 时间：2012-12-11T18:48:14.450
> 
> 标签：objective-c, ios, nsarray, nsdictionary

我有一个以这种方式组织的字典数组：

```
[0] {@"code", 1} {@"category","drink"} ...and other value that aren't important
[1] {@"code", 2} {@"category","drink"}
[2] {@"code", 3} {@"category","drink"}
[3] {@"code", 4} {@"category","food"}
[4] {@"code", 5} {@"category","food"}
[5] {@"code", 6} {@"category","drink"} 
```

以这种方式获得矩阵（数组数组）的最佳方法是什么......

```
[0] {1,2,3,6}
[1] {4,5} 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:26:54.640

所以如果你有你的字典数组：

```
NSArray *originalArray = @[
    @{@"code": @1, @"category":@"drink"},
    @{@"code": @2, @"category":@"drink"},
    @{@"code": @3, @"category":@"drink"},
    @{@"code": @4, @"category":@"food"},
    @{@"code": @5, @"category":@"food"},
    @{@"code": @6, @"category":@"drink"}
]; 
```

您可以通过以下方式获得所需的内容：

```
NSMutableArray *arrayOfCategories = [NSMutableArray array];
NSMutableArray *arrayOfArrayOfCodes = [NSMutableArray array];

for (NSDictionary *originalArrayEntry in originalArray)
{
    NSString *category = originalArrayEntry[@"category"];
    NSString *code = originalArrayEntry[@"code"];

    NSInteger indexInArrayOfCategories = [arrayOfCategories indexOfObject:category];
    NSMutableArray *arrayOfCodes;
    if (indexInArrayOfCategories == NSNotFound)
    {
        indexInArrayOfCategories = [arrayOfCategories count];
        arrayOfCodes = [NSMutableArray array];
        [arrayOfArrayOfCodes addObject:arrayOfCodes];
        [arrayOfCategories addObject:category];
    }
    else
    {
        arrayOfCodes = arrayOfArrayOfCodes[indexInArrayOfCategories];
    }

    [arrayOfCodes addObject:code];
}

NSLog(@"arrayOfArrayOfCodes = %@", arrayOfArrayOfCodes);
NSLog(@"arrayOfCategories = %@", arrayOfCategories); 
```

请注意，您没有要求类别值数组，但我认为您要求的结果集在没有它的情况下毫无意义。

就个人而言，如果我想完成您的要求（并消除对单独数组的需要）并且顺序并不重要，我可能会倾向于使用具有代码数组值的字典（由类别值键入），例如，源于：

```
NSMutableDictionary *resultDictionary = [NSMutableDictionary dictionary];

for (NSDictionary *originalArrayEntry in originalArray)
{
    NSString *category = originalArrayEntry[@"category"];
    NSString *code = originalArrayEntry[@"code"];

    NSMutableArray *arrayForCategory = resultDictionary[category];
    if (!arrayForCategory)
    {
        arrayForCategory = [NSMutableArray array];
        resultDictionary[category] = arrayForCategory;
    }

    [arrayForCategory addObject:code];
}

NSLog(@"resultDictionary = %@", resultDictionary); 
```

# java - 反正有没有在android上操纵意图的数据？

> ID：13826534
> 
> 赞同：1
> 
> 时间：2012-12-11T18:48:38.993
> 
> 标签：java, android, cordova, streaming

例如，我使用录制视频的操作创建了一个意图，如下所示：

```
Intent takeVideoIntent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
startActivityForResult(takeVideoIntent, ACTION_TAKE_VIDEO); 
```

现在这将打开相机预览并允许用户捕获视频，我的问题是，在操作期间是否可以访问数据。例如，我可以在录制视频的同时获取正在录制的视频流并将数据推送到服务器。因此，一旦视频完成录制，它就已经在服务器上，并且在推送期间，数据可以在服务器上进行编码等......

我正在使用 Apache Cordova 2.2.0 执行此操作，因此我的代码实际上看起来更像这样：

```
Intent intent = new Intent(android.provider.MediaStore.ACTION_VIDEO_CAPTURE);
this.cordova.startActivityForResult((CordovaPlugin) this, intent, 2); 
```

我确实尝试添加一个 MediaStore.EXTRA_OUTPUT，但我确定在录制完成后将其保存到输出位置。

有没有一种方法可以异步找到视频录制到的位置并使用 android 文件系统中的不完整流？

所以我想在不让任何人失望的情况下简化我的问题，是否可以在活动期间对意图数据做任何事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:23:47.810

> 是操作期间可访问的数据

充其量，这将取决于执行该操作的应用程序。

> 有没有一种方法可以异步找到视频录制到的位置并使用 android 文件系统中的不完整流？

编写您自己的录像机，使用`MediaRecorder`.

> 在活动期间是否可以对意图数据做任何事情？

如果您没有编写活动，则无法保证在`onActivityResult()`被调用之前什么是可能的或不可能的。

# java - Tomcat URL 路由到特定类

> ID：13826535
> 
> 赞同：0
> 
> 时间：2012-12-11T18:48:46.827
> 
> 标签：java, macos, tomcat7

我在本地开发环境中的 Tomcat 7 容器中有一个 jsp/java webapp。同一应用程序的生产版本运行良好。开发站点的问题是，这个 URL

```
http://localhost:8081/webapp/servlet/serv.Classname?getparam1=1&getparam2=2 
```

给我“请求的资源不可用”错误，而在生产中（不是我的工作）它以某种方式路由到正确的类文件。

如何在我的本地机器 mac os x 10.7、tomcat 7、apache 2 上完成相同的行为？我已经检查了生产 tomcat 中的所有 conf/*.xml 文件，没有具体指向上述行为。我也检查了 httpd 中的重写，但没有。

我必须在哪里搜索才能找到生产版本中的配置？

# c# - 使用语句和实体框架

> ID：13826536
> 
> 赞同：1
> 
> 时间：2012-12-11T18:48:48.017
> 
> 标签：c#, entity-framework

只要我不使用注释掉的`using`语句，以下代码就可以工作。当我使用`using`我得到`The operation cannot be completed because the DbContext has been disposed`

```
public IQueryable<DTOs.FormQuestionDTO> GetForm(int id, int page = 0)
{
    // FS stores pages starting with 1
    page = page == 0 ? 1 : page;

    //using (var db = new Models.FormEntities())
    //{
        var db = new Models.FormEntities();

        var questions = from fq in db.FormQuestions
                        join q in db.Questions on fq.QuestionId equals q.QuestionId
                        where (fq.FormId == id) && (fq.PageNumber == page) && fq.Disabled == false
                        orderby fq.DisplayOrder
                        select new { q.QuestionId, q.QuestionText, fq.DisplayOrder, fq.PageNumber };

        var dto = questions.Project().To<DTOs.FormQuestionDTO>();

        if (questions == null)
        {
            throw new HttpResponseException(HttpStatusCode.NotFound);
        }
        else 
        {
            return dto;
        }
    //}
} 
```

我最初的预感是 Using 正在处理`DbContext`LINQ 查询之后的右侧，但是在放入块`.Dipose()`内部时我得到了同样的错误`finally`。

这里发生了什么？我有一段时间没有在 C# 中工作了，所以我可能遗漏了一些简单的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T18:50:44.900

Entity Framework LINQ 提供程序使用[延迟执行](http://www.hookedonlinq.com/DeferredExecution.ashx)。这意味着在迭代 IQueryable 之前不会在数据库上执行查询。

发生的事情是，在您的上下文被处理后，某些东西会迭代您的可查询对象，这会导致它尝试执行数据库查询。

您可以通过调用强制它立即执行`ToList()`。

```
var dto = questions.Project().To<DTOs.FormQuestionDTO>().ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:54:09.210

+1 提@jrummell。您收到该错误的*原因*是，当声明的变量`using`离开该范围时，会调用 .Dispose() 来释放 DbContext。

如果您*稍后*尝试执行，则 DbContext 不再存在。

# jquery - 数据表无需点击即可获取行数据

> ID：13826548
> 
> 赞同：4
> 
> 时间：2012-12-11T18:49:36.830
> 
> 标签：jquery, datatables

我正在使用 DataTables 来显示消息列表。

我需要一种方法来根据传递到查询字符串上的页面的 id 获取特定的数据行。

前任。www.webpage.com?id=2

我已经在 jQuery 变量中有 id。现在我只需要访问与该 id 关联的 DataTable 行。

基本上，我需要引用该行，而无需单击它。

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T19:02:03.420

一种方法是使用`fnGetPosition`和`fnGetData`

```
var rowIndex = table.fnGetPosition( $("some selector").closest('tr')[0] );
//some selector = should select some hidden element inside a row that 
//contains the relevant id
var aData = table.fnGetData( rowIndex  );
alert(aData[0]);// will show first column data 
```

****这是一个外部按钮****的工作**[jsfiddle 示例，它选择具有特定 ID 的行](http://jsfiddle.net/vedmack/CMR5Y/)**

 ******另一个在页面加载时选择具有特定 ID 的行的示例（就绪）**[jsfiddle 示例 N#2](http://jsfiddle.net/vedmack/CMR5Y/3/)

看看函数

```
$("#wow").click(function() {

    var rowIndex = table.fnGetPosition($("#example input[value=\'TridentVal\']").closest('tr')[0]);
    alert(rowIndex);
    var aData = table.fnGetData(rowIndex);
    alert(aData[0]); // will show first column data
});​ 
```

这是选择具有相关数据的输入的方法...：

```
$("#example input[value=\'TridentVal\']") 
```

`example`是表 id ，将*TridentVal*替换为所需的 ID

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T19:02:54.950

首先，您必须使用 jQuery 获取表格行。

```
var $rowNode = $('#myTable').find('tbody tr:eq(0)').get(0); 
```

然后你`fnGetData`用来获取行数据。

```
var data = table.fnGetData($rowNode); 
```

`fnGetData`接受行节点或整数，因此您也可以将行索引作为参数传递。

[**演示**](http://live.datatables.net/ituguf/edit#preview)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T19:43:10.350

如果您使用 TableTools 扩展，那么您可以使用 fnSelect()。从[文档](http://www.datatables.net/extras/tabletools/api)：

```
$(document).ready( function () {
    $('#example1').dataTable( {
        "sDom": 'T<"clear">lfrtip',
        "oTableTools": {
            "sRowSelect": "single"
        }
    } );

    // Select the first row in the table automatically
    var oTT = TableTools.fnGetInstance( 'example1' );
    oTT.fnSelect( $('#example tbody tr')[0] );
}); 
```

您当然希望修改选择器，以便它选择具有您的 ID 的行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-10T14:42:06.273

fnGetData 现在已过时。这记录了当前版本 [https://datatables.net/reference/api/cell().data()中的 cell().data() 访问模式](https://datatables.net/reference/api/cell().data())****

# incredibuild - 如何防止其他人使用我的系统但仍使用 incredibuild 分发我的构建？

> ID：13826550
> 
> 赞同：4
> 
> 时间：2012-12-11T18:49:37.620
> 
> 标签：incredibuild

如何防止其他人使用我的系统进行构建，但仍使用 incredibuild 通过网络分发我的构建？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T19:42:30.533

右键单击 incredibuild 托盘图标（incredibuild 代理）并选择禁用作为助手。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-26T06:49:32.610

供您参考，IncrediBuild 将仅使用您机器的空闲 CPU 周期（当您的机器充当 Helper 时）。您作为用户的 CPU 消耗将始终优先。IncrediBuild 的 Build Helper 以“nice 模式”执行，这意味着操作系统只会在空闲 CPU 周期为其提供服务。

在任何方面，为了能够分发您的构建但防止其他人将您的机器用作助手资源，您可以“禁用为助手”。右键单击 IncrediBuild 托盘图标 -> 禁用为助手。

免责声明 - 作者是 IncrediBuild 的 CTO

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T15:17:21.430

防止运行 /Xoreax/IncrediBuild/BuildHelper.exe 例如，只需重命名它。

# visual-c++ - 连接 Digibee：System.AccessViolation 异常？

> ID：13826557
> 
> 赞同：1
> 
> 时间：2012-12-11T18:50:04.047
> 
> 标签：visual-c++, exception, exception-handling, runtime-error

我对 Visual C++ 很陌生……我目前正在从事的项目是使用 VC++ 创建从 Digibee 接受的输入日志。

关于 Digibee 的信息：[http](http://www.pc-control.co.uk/digibee_info.htm) ://www.pc-control.co.uk/digibee_info.htm手册中有加载 DLL、调用函数等的基本代码。

对于一些功能，代码似乎可以正常工作（经过一些修改）......问题是：

1.  Init() - 不接受任何参数，但是当我对其进行编码时，我必须传递一个参数才能使其工作；我通过0

2.  ReadAnalogueInputs() - 应该接受 4 个参数，但是当我传递 4 个时，它说参数太多。当我成功通过一个..builds 但随后给出 System.AccessViolation 异常时工作正常。

请帮我！

```
 // Header file for use with dgb.dll

     typedef bool   (*Type_InitDgb)();                              
     typedef bool   (*Type_ReadInputs)(int *inputs);
     typedef bool   (*Type_SetOutputs)(int outputs);
     typedef bool   (*Type_ReadAnalogueInputs)(int *aip1, int *aip2, int *aip3, int *aip4);
     typedef bool   (*Type_SetSensitivity)(int sensitivity); 
```

//源文件

```
 private: System::Void btn_Click(System::Object^  sender, System::EventArgs^  e) {
    HINSTANCE DgbHandle = LoadLibrary(TEXT("dgb.dll"));
             if (DgbHandle==NULL)
                btn->Text="Error";
             else
             {
             btn->Text="Initialized";
             this->progressBar1->Value=100;
             }

             textBox1->Text="Obtaining pointers\n";
                             TypeInitDgb InitDgb;
             TypeSetOutputs SetOutputs;
             TypeReadInputs ReadInputs;
             TypeReadAnalogueInputs ReadAnalogueInputs;
             TypeSetSensitivity SetSensitivity;
             InitDgb =                   (TypeInitDgb)GetProcAddress(HMODULE(DgbHandle),"InitDgb");
             SetOutputs = (TypeSetOutputs)GetProcAddress(HMODULE(DgbHandle),"SetOutputs");
             ReadInputs = (TypeReadInputs)GetProcAddress(HMODULE(DgbHandle),"ReadInputs");
             ReadAnalogueInputs = (TypeReadAnalogueInputs)GetProcAddress(HMODULE(DgbHandle),"ReadAnalogueInputs");
             SetSensitivity = (TypeSetSensitivity)GetProcAddress(HMODULE(DgbHandle),"SetSensitivity");
             this->progressBar2->Value=100;
             textBox1->Text="Pointers obtained";

             status=InitDgb(0);

             if(status==1)
             {
                 textBox1->Text="Digibee initialized";
                 this->progressBar3->Value=100;
                 SetOutputs(LPCTSTR(0x0001));
                 //SetOutputs(LPCSTR(15));
             }
                             int a1,a2,a3,a4;

             ReadAnalogueInputs(LPCTSTR(&a1)); 
```

}

# java - 从 Main 方法传递参数

> ID：13826560
> 
> 赞同：0
> 
> 时间：2012-12-11T18:50:14.457
> 
> 标签：java, map

这是我的完整代码。我的挑战是在最后 3 行！我无法将参数 (int r) 发送给 findColor(int r)。非常感谢任何帮助。谢谢

```
import java.util.*;
public class NewClass {
private HashMap <Character,HashSet> colorMap ;

public NewClass() {
    colorMap = new HashMap<Character, HashSet>();
}

public void addColor(){
    HashSet a1 = new HashSet();
    a1.add("Yellow");
    a1.add("Blue");
    a1.add("Pink");
    colorMap.put('X', a1);
    HashSet a2 = new HashSet();
    a2.add("White");
    a2.add("Brown");
    a2.add("Blue");
    a2.add("Black");
    colorMap.put('W', a2);
}    

public Set<String> findColor(int r)
{
Set<String> colors = new HashSet<String>();
    {
    for(Character m : colorMap.keySet())

    if(r < colorMap.size())
        {
        Set<String> zone = colorMap.get(m);
        System.out.println("Zone " + zone + " has more than " + r + " colors");
        }        
    }
    return colors;
 }    

 public static void main(String [] args){

    Set<String> colors;
    NewClass a = new NewClass();
    Scanner input = new Scanner(System.in);
    System.out.print("Enter a numbers \n");
    int r = input.nextInt();
    colors = findColor(r);
    a.findColor(r);      
}    
} 
```

非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:51:40.233

我能说的一个问题是：

```
 int r = input.nextInt();
    //colors = findColor(r);
    Set<String> colors = a.findColor(r); 
```

删除第二行

`findColor(int r`) 不是静态方法，因此不能直接在静态方法内部调用，需要使用实例引用（即上面代码中的第 3 行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:56:38.297

看看你的最后 3 行：

```
int r = input.nextInt();
colors = findColor(r);
a.findColor(r); 
```

在第 2 行，您尝试`findColor`从静态方法调用，但`findColor`不是静态的。这是不允许的；非静态方法必须通过非静态方法所属的特定类的实例来调用。

您实际上在您的函数`NewClass`范围内有一个实例，您调用了. 因此，只需通过该实例调用：`main``a``findColor`

```
int r = input.nextInt();
colors = a.findColor(r); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T18:53:49.103

您正在尝试做的是从命令行读取。做这个：

[http://alvinalexander.com/java/edu/pj/pj010005](http://alvinalexander.com/java/edu/pj/pj010005)

最后 3 行中的第二行是错误的。添加一个。在方法调用之前，删除第 3 行。

# java - 带有 Rest API 和 RESTEasy 的嵌入式 Web 服务器

> ID：13826561
> 
> 赞同：1
> 
> 时间：2012-12-11T18:50:15.563
> 
> 标签：java, web-services, rest, resteasy

我想创建一个带有嵌入式 Web 服务器的独立桌面应用程序。这是我第一次编写这样的应用程序。我做了一些研究并决定将 JETTY 用于嵌入式 Web 服务器。我找到了一些很好的教程，我已经开始运行了。

现在我试图弄清楚如何使我的服务可用于 HTML 客户端。我阅读了有关 REST api 的概念。我正在尝试寻找一些好的教程来帮助我为我的应用程序编写 REST api。

到目前为止，我发现的所有优秀教程都在谈论 RESTEasy。RESTEasy 是绝对需要编写 rest api 的吗？为什么我们需要它？它到底是做什么的？我在这里很困惑。另外，如果有人可以在 Web 服务器 API 上发布一些好的教程，我将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:58:35.087

没有什么是绝对需要的。尤其是 REST。绝对不需要使用特定的框架来做 REST 服务。事实上，框架会给你带来什么并不完全清楚。您需要决定使用什么格式将数据传递给您的服务（JSON、XML 或纯文本键值对），然后选择一个库来解析和编码该格式。差不多就是这样。REST 的其余部分（对不起）只是一个约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:54:23.977

我向您推荐这种方法，REST 非常灵活且易于理解。当我做我的第一个 Web 服务时，我读过 Mark Masse 的 REST API 设计规则手册。正如 MK 所说，一旦您了解了基础知识，您就可以使用任何类型的框架或技术。

# windows - VS2012 多个启动项目 - 想要在特定显示器上打开命令提示符

> ID：13826564
> 
> 赞同：1
> 
> 时间：2012-12-11T18:50:23.597
> 
> 标签：windows, visual-studio-2012, command, windows-console

我有一个项目，它打开两个命令提示符作为启动项目。我当前的环境有 3 个监视器，我想在辅助监视器上打开这些命令提示符（中间监视器是主监视器）。有谁知道在 VS 2012 中执行此操作的任何方法或可以执行此操作的任何插件？

我已经通过 Stackoverflow 查看了类似的问题，但似乎找不到任何帮助。请注意，我无法安装其他命令行工具，例如[CMDOW](http://www.commandline.co.uk/cmdow/)或[Console2](http://www.hanselman.com/blog/Console2ABetterWindowsCommandPrompt.aspx)。我想让它与 Visual Studio 2012 中出现的 Windows 7 Pro 中的默认控制台一起工作。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:59:04.467

找到了解决方案。注意：这也适用于 VS 2010。

运行您的项目（在 VS 2012 中开始调试）。这将显示两个命令提示符。

对于每个命令提示符

*   将命令提示符放置在辅助屏幕上
*   打开命令提示符窗口 > 属性 > 布局
*   在“Windows Position”组框部分，取消选中“Let system position window”（见附图）
*   单击确定，然后关闭命令提示符

下次运行项目时，您的窗口将定位到您设置的位置。

![命令提示符属性](../Images/8e24add18bedf729684dcb12d67eddf5.png)

# mediawiki - MediaWiki：Special:AllPages 上的页数

> ID：13826565
> 
> 赞同：3
> 
> 时间：2012-12-11T18:50:23.520
> 
> 标签：mediawiki

在 MediaWiki 将它们分组到 Special:AllPages 上的名称范围之前，是否有任何设置可以更改页面的最大计数限制？

类似的东西，但“从 A 到 Z 都在一页上，无需选择字母范围”。 [http://www.minecraftwiki.net/wiki/Special:AllPages](http://www.minecraftwiki.net/wiki/Special:AllPages)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-14T15:00:26.163

在`includes/specials/SpecialAllPages.php`中，您将在文件顶部看到以下代码：

```
/**
 * Maximum number of pages to show on single subpage.
 */
protected $maxPerPage = 345; 
```

将该数字更改为您想要的任何限制。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T20:55:21.087

不，这是不可能的。你可以试试[wikiteams 的 dumpgenerator](https://code.google.com/p/wikiteam/)或 pywikipediabot 的 pagegenerators。

# sql - 在 Oracle 查询中显示总计、小计、百分比

> ID：13826569
> 
> 赞同：3
> 
> 时间：2012-12-11T18:50:38.230
> 
> 标签：sql, oracle10g

问题，

我有这样的表：

```
PID Category Year
1    AAA     2011
2    AAA     2012
3    BBB     2011
4    CCC     2010
5    CCC     2011
6    CCC     2012 
```

我需要将输出显示为：

```
Subtotal Total Category  Year   Percentage
1         1      CCC      2010    100%
1         2      AAA      2011    50%
1         2      BBB      2011    50%
1         2      AAA      2012    50%
1         2      CCC      2012    50% 
```

其中小计是特定年份该类别的计数。总计是特定年份的计数，包括所有类别。百分比为小计/总计 *100

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T18:54:12.877

```
select subtotal, 
       total,
       category, 
       year,
       subtotal / total * 100 as percentage
from (
  select count(*) over (partition by category, year) as subtotal,
         count(*) over (partition by year) as total,
         category,
         year
  from the_unknown_table
) t
order by year; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T18:53:59.807

您想使用窗口/分析函数：

```
select subtotal,
       sum(subtotal) over (partition by year) as Total,
       category, year,
       (cast(subtotal*100.0/sum(subtotal) over (partition by year)  as varchar(255))+'%'
       ) as Percentage
from (select year, category, count(*) as subtotal
      from t
      group by year, category
     ) t 
```

# android - 将 Neuroph 应用于 Android 视频

> ID：13826572
> 
> 赞同：0
> 
> 时间：2012-12-11T18:50:44.207
> 
> 标签：android, frame

Neuroph 是否可以识别正在运行的相机的每一帧而不仅仅是图片？如何？

Neuroph 接受图像对象进行识别

```
HashMap<String, Double> output = imageRecognition.recognizeImage(image); 
```

这来自这些进口

```
import org.neuroph.contrib.imgrec.ImageRecognitionPlugin;
import org.neuroph.contrib.imgrec.image.Image;
import org.neuroph.contrib.imgrec.image.ImageFactory; 
```

相机的帧是位图格式。如何从位图转换为图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:04:54.573

首先，使用最新版本的 Neuroph 2.7。

然后使用一些 org.neuroph.imgrec.image.ImageFactory.getImage() 来获取 Bitmap 作为图像对象。

图像类用于为 Android 和 J2SE 平台提供相同的 API。Image factory 确定它在哪个平台上运行并使用相应的类并将其包装为 Image 对象。

# dart - Dart 中未处理的异常

> ID：13826578
> 
> 赞同：5
> 
> 时间：2012-12-11T18:50:56.197
> 
> 标签：dart

我在 Dart 中编写了一个网络服务器，并且有一个关于异常的问题。在我的 HttpServer 请求处理程序中，我在整个方法周围添加了一个 try-catch 块：

```
try{
 ...
} catch(e) {
 ...
} 
```

所以我希望这可以防止任何客户端请求使网络服务器崩溃。问题是当从这个块中抛出某些异常时它**可能会崩溃（严重嵌套在其他模块中，但仍然从这个块启动）。**以下是此类异常的示例：

```
Unhandled exception:
FutureUnhandledException: exception while executing Future
  Illegal argument(s)
original stack trace:
  #0      _StringBase._createFromCodePoints (dart:core-patch:1403:3)
  #1      _StringBase.createFromCharCodes (dart:core-patch:1400:33)
  #2      String.String.fromCharCodes (dart:core-patch:1788:43)
  #3      _StringDecoderBase.decoded (dart:io:6485:12)
  #4      _File.readAsString.<anonymous closure> (dart:io:1307:29)
  #5      _FutureImpl.transform.<anonymous closure> (bootstrap:881:37)

 #0      _FutureImpl._complete (bootstrap:844:11)
 #1      _FutureImpl._complete (bootstrap:848:5)
 #2      _FutureImpl._setException (bootstrap:873:14)
 #3      _CompleterImpl.completeException (bootstrap:948:30)
 #4      _FutureImpl.transform.<anonymous closure> (bootstrap:884:36)
 #5      _FutureImpl._complete (bootstrap:840:19)
 #6      _FutureImpl._complete (bootstrap:848:5)
 #7      _FutureImpl._setValue (bootstrap:862:14)
 #8      _CompleterImpl.complete (bootstrap:945:26)
 #9      _File.readAsBytes.<anonymous closure> (dart:io:1281:25)
 #10     _BaseDataInputStream._checkScheduleCallbacks.issueCloseCallback (dart:io:6345:59)
 #11     _Timer._createTimerHandler._handleTimeout (dart:io:6918:28)
 #12     _Timer._createTimerHandler._handleTimeout (dart:io:6926:7)
 #13     _Timer._createTimerHandler.<anonymous closure> (dart:io:6934:23)
 #14     _ReceivePortImpl._handleMessage (dart:isolate-patch:37:92) 
```

为什么这不会在 try-catch 块中被捕获？它被抛出在从它内部调用的代码中（即使它没有显示在堆栈跟踪中）。

我希望我错过了一些关于异常在 Dart 中是如何工作的，所以我希望你能启发我:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T20:47:00.660

使用[Future](https://api.dartlang.org/stable/2.0.0/dart-async/Future-class.html)，您必须使用[catchError](https://api.dartlang.org/stable/2.0.0/dart-async/Future/catchError.html)方法来处理异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T08:17:29.727

一旦你意识到发生了什么，理解这个问题就很简单了。

问题是：传统控制流构造（`if`, `while`, `try/catch/finally`, `return`）的语义是纯*同步*的。他们期望程序的流程就像它的源代码流程一样。看看这个：

```
1      try {
2        while (...) {
3          if (...) {
4            doSomething();
5            doSomethingElse();
6          }
7        }
8      } catch (e) {
9        print('oh no, something wrong happen! error: $e');
10     } finally {
11       print('done!');
12     } 
```

这个程序作为一个序列工作。第 1 行在第 2 行之前执行，在第 3 行之前执行等等。第 5 行在第 4 行之后立即执行。第 11 行在第 7 行之后执行，如果发生异常，第 11 行也会在第 9 行之后执行。就是这样*同步*的意思。

但是，同步程序不再足够好。事件处理自然是*异步*的，您会发现无处不在的事件——从用户界面到高度可扩展的网络服务器。所以如果你写

```
1      try {
2        var text = 'this will be replaced by the content of the file';
3        new File('...').readAsText().then((result) {
4          text = result;
5          doSomethingThatMightCauseAnException(text);
6          print('read file, got $text');
7        });
8        print('invoked file read');
9        return text;
10     } catch (e) {
11       print('error: $e');
12     } 
```

您必须了解您正在调用异步操作（`readAsText`方法）。在这个程序中，第 2 行在第 1 行之后执行，第 3 行在第 2 行之后执行，但第 4 行**不在**第 3 行之后执行。文件读取被异步调用（认为“在后台”）并且程序继续。所以在这种情况下，在第 3 行之后，您将直接进入第 8 行。因此第`return`9 行（在第 8 行之后）的语句总是返回`'this will be replaced by the content of the file'`文本。

然后，程序继续运行，直到完成（退出`main`函数）。但它*并没有停止*，因为有一些代码在“后台”运行，并且有一个为其注册的处理程序（您通过调用该`then`方法注册了处理程序）。一旦系统完成读取文件，它将调用处理程序（您传递给`then`方法的匿名函数）。只有当没有注册某些异步调用的处理程序时，程序才能停止。

现在，你可能明白第 10 行的异常处理程序*只能*捕获第 3 行发生的错误（打开文件时出错）。但是如果第 5 行发生异常，则**无法**在第 10 行捕获它，因为该`catch`处理程序早已不复存在。

剩下的只是正确使用 API 的问题。如果使用回调，则必须传递成功处理程序*和*错误处理程序，如果使用`Future`s，则必须`then`使用成功处理程序调用方法，*并*使用`handleException`错误处理程序调用方法。

# jquery - FancyBox 加载后调用函数

> ID：13826584
> 
> 赞同：6
> 
> 时间：2012-12-11T18:51:24.510
> 
> 标签：jquery, callback, jquery-validate, fancybox

我试图让 FancyBox 加载一个包含表单的文件。我想使用 jQuery Validate 插件进行验证，但是在进行回调之前表单没有被添加到 DOM 中。

afterLoad 选项确实会打开一个警报，但它实际上是在加载 ajax 内容之前打开的。

我可以在加载的文件中添加一个 href，单击该文件会运行 validate()，但有趣的是，它仅在我按 ID 而不是类调用表单时才有效，因为在同一个页面上有另一个表单与该类。

我有以下代码：

```
<a href="/url" class="fancy fancybox.ajax">link</a></li> 

$(".fancy").fancybox({
    maxWidth    : 800,
    maxHeight   : 600,
    fitToView   : false,
    width       : '70%',
    height      : '70%',
    autoSize    : false,
    closeClick  : false,
    openEffect  : 'none',
    closeEffect : 'none',
    afterLoad: function() {
      //$(".validateMe").validate();
      alert(987987);
    }
});

<form id="someId" action="javascript:someFunction();" class="validateMe" method="post"> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T19:00:49.230

尝试将`ajax`选项与它的`complete`事件一起使用：

```
$(".fancy").fancybox({
    // ...
    ajax: {
        complete: function(jqXHR, textStatus) {
            $(".validateMe").validate();
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-04T17:42:20.887

I was in a similar situation where I wanted to do some DOM manipulation after the content loaded, but `afterLoad` did not work. I had to use `afterShow` instead, which seems to be very similar to `onComplete` from Fancybox v1.3.

```
$.fancybox({
            href: '/some/link/here',
            type: 'ajax',
            // Other options like size go here
            afterShow: function() {
                // Code to execute after the pop up shows
            }
        }); 
```

# playframework - 我无法自定义模块securesocial为play2提出的视图，“未找到：输入RequestHeader”

> ID：13826586
> 
> 赞同：3
> 
> 时间：2012-12-11T18:51:28.507
> 
> 标签：playframework, securesocial

我正在尝试使用 play 2 自定义模块“securesocial”提出的视图

我已经做的是：

1/ 在“controllers/SecuresViewsPlugin.scala”下创建一个实现 TemplatesPlugin 的新插件名称 SecureViewsPlugin

```
package controllers

import play.api.mvc.{RequestHeader, Request}
import play.api.templates.Html
import securesocial.controllers.Registration.RegistrationInfo
import securesocial.controllers.TemplatesPlugin
import securesocial.core.{SecuredRequest, SocialUser}
import play.api.data.Form
import securesocial.core.SecureSocial._
import securesocial.controllers.PasswordChange.ChangeInfo

class SecureViewsPlugin(application: App) extends TemplatesPlugin {

  override def getLoginPage[A](implicit request: Request[A], form: Form[(String, String)],
                               msg: Option[String] = None): Html =
  {
    views.html.secure.login(form, msg)
  }

  override def getSignUpPage[A](implicit request: Request[A], form: Form[RegistrationInfo], token: String): Html = {
    views.html.secure.Registration.signUp(form, token)
  } 
```

(..)

2/ 我更新了文件 play.plugins ：

```
1500:com.typesafe.plugin.CommonsMailerPlugin
9996:securesocial.core.providers.utils.DefaultPasswordValidator
9997:controllers.SecureViewsPlugin 
```

3/ 我在“views/secure”文件夹中复制了一个不同的视图

```
/Views
     /secure
         /inputFieldConstructor.scala.html
         /login.scala.html
         /(...) 
```

这是我总是得到的错误的开始

```
not found: type RequestHeader

In app/views/secure/login.scala.html at line 0.

->@(loginForm: Form[(String,String)], errorMsg: Option[String] = None)(implicit request: RequestHeader) 

[error] /Users/clementaubert/Desktop/demo/target/scala-2.9.1/src_managed/main/views/html/secure/login.template.scala:24: not found: type RequestHeader
[error] object login extends BaseScalaTemplate[play.api.templates.Html,Format[play.api.templates.Html]](play.api.templates.HtmlFormat) with play.api.templates.Template3[Form[scala.Tuple2[String, String]],Option[String],RequestHeader,play.api.templates.Html] {
[error]                                                                                                                                                                                                                    ^
[error] /Users/clementaubert/Desktop/demo/target/scala-2.9.1/src_managed/main/views/html/secure/login.template.scala:27: not found: type RequestHeader
[error]     def apply/*1.2*/(loginForm: Form[(String,String)], errorMsg: Option[String] = None)(implicit request: RequestHeader):play.api.templates.Html = {
[error]                                                                                                           ^
[error] /Users/clementaubert/Desktop/demo/app/controllers/SecureViewsPlugin.scala:18: type mismatch;
[error]  found   : play.api.data.Form[(String, String)]
[error]  required: play.data.Form[(java.lang.String, java.lang.String)]
[error]     views.html.secure.login(form, msg)
[error]  
login.scala.html 
```

我试图删除“（隐式请求：RequestHeader）”，但后来我收到了这个错误

```
type mismatch; found : play.api.data.Form[(String, String)] required: play.data.Form[(java.lang.String, java.lang.String)] 
```

我猜我的做法不对。

我不知道为什么我会收到这些错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-18T18:05:20.067

我有同样的问题，或者非常相似。看看这是否可以帮助您：

**错误：**

```
[error] C:\workspace\zenplanning\app\views\index.scala.html:0: not found: type RequestHeader
[error] C:\workspace\zenplanning\app\views\index.scala.html:1: not found: type RequestHeader
[error] @(loginForm: play.api.data.Form[(String,String)], errorMsg: Option[String] = None)(implicit request: RequestHead
er)
[error]                                                                                                     ^

play.PlayExceptions$CompilationException: Compilation error[not found: type RequestHeader] 
```

**原因：**

我认为这是因为securesocial 在你的路由器上使用了scala，而我在我的Play 项目中使用了Java。发送的 RequestHeader 使用 Scala (play.api.mvc.RequestHeader)，但我的模板期望使用 Java (play.mvc.RequestHeader)。

**解决方案**

为了解决这个问题，我在我的自定义 login.scala.html 中进行了更改：

```
@(loginForm: play.api.data.Form[(String,String)], errorMsg: Option[String] = None)(implicit request: RequestHeader) 
```

对此：

```
@(loginForm: play.api.data.Form[(String,String)], errorMsg: Option[String] = None)(implicit request: play.api.mvc.RequestHeader) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T03:30:39.220

您必须执行以下操作：

在所有 Views/secure/...*.scala.html 文件中：

替换：RequestHeader 与 play.api.mvc.RequestHeader Form[String, String] 或 Form[String] 与 play.api.data.Form

例如在 startSignUp.scala.html 文件中，更改原始文件：

@(startForm:Form[String])(隐式请求：RequestHeader)

和

@(startForm:play.api.data.Form[String])(隐式请求：play.api.mvc.RequestHeader)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T09:02:17.273

Abbas 提到了让您自己的模板工作的第一步。

但对我来说，它仍然没有成功。抛出了这个异常：

```
play.api.PlayException: Cannot load plugin [Plugin [controllers.MyTemplatePlugin] cannot been instantiated.]
...
Caused by: java.lang.NoSuchMethodException: controllers.MyTemplatePlugin.<init>(play.Application) 
```

解决此问题的方法是调整模板类的构造函数

`class MyTemplatePlugin(application: Application) extends TemplatesPlugin`

到

`class MyTemplatePlugin(application: play.Application) extends TemplatesPlugin`

此修复由securesocial 维护者jaliss 在[https://github.com/jaliss/securesocial/issues/99上提出](https://github.com/jaliss/securesocial/issues/99)

# vb.net - 无法在 VB.NET 中声明列表？

> ID：13826593
> 
> 赞同：4
> 
> 时间：2012-12-11T18:52:01.170
> 
> 标签：vb.net

```
Dim lstNum As New List(Of Integer)(New Integer() { 3, 6, 7, 9 }) 
```

当我键入上面的代码行时，Visual Studio 会通知我一个错误

> 'Microsoft.Office.Interop.Word.List' 没有类型参数，因此不能有类型参数。

这到底是什么意思，我该如何解决？我似乎无法创建任何类型的列表。我假设我缺少某种导入，但我对 VB.Net 不够熟练，不知道该尝试什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T18:53:50.757

使用 Generic.List 而不仅仅是 List。

```
Dim lstNum As New Generic.List(Of Integer)(New Integer() { 3, 6, 7, 9 }) 
```

由于您已导入 Word 互操作，因此它正在尝试查找 Word.List。指定 Generic.List 将告诉它超出该导入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T18:55:21.817

尝试添加`System.Collections.Generic`

```
 Dim lstNum As New System.Collections.Generic.List(Of Integer)(New Integer() { 3, 6, 7, 9 }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-16T12:02:06.797

要么你使用 Generic.list 而不是 List Dim lstNum As New Generic.List(Of Integer)(New Integer() { 3, 6, 7, 9 }) 或者你只是导入 System.Collections.Generic 命名空间，这两种方法都很好，但如果我必须一次又一次地使用列表，我会选择后者。.

# ruby-on-rails - Coffeescript 访问 current_user

> ID：13826594
> 
> 赞同：7
> 
> 时间：2012-12-11T18:52:02.557
> 
> 标签：ruby-on-rails, coffeescript

我正在编写一个 Rails 应用程序。

在 CoffeeScript 中，我想访问 current_user 以及它与员工的关系。

这是我正在尝试的代码：

```
 $.create "/events/",
      event:
        title: title,
        starts_at: "" + start,
        ends_at: "" + end,
        all_day: allDay,
        hours: hours,
        employee_id: current_user.employee_id
        # pickup the current employee 
```

但是，控制台显示 - Uncaught ReferenceError: current_user is not defined

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T19:06:56.783

如果您**在 Rails 资产管道**中编写 coffescript （我相信您会这样做），**则根本无法**访问 current_user。这里的问题是，当您部署到 prod env（或在 dev env 中的第一次访问时）时，资产会预编译一次。所有后续请求都只是链接到预编译的 js 包。所以所有请求的js代码都是一样的。另一方面， current_user 特定于每个请求。因此，为了从资产管道 js 代码访问 current_user，您必须通过一些 ajax 调用从特定的服务器 api 方法请求它。

另一个可能的选择是您正在编写一个咖啡脚本作为控制器操作视图模板。在这种情况下，您应该添加 .erb 预处理器。你会得到一个像**app/views/controller_name/action_name.js.coffee.erb**这样的文件

```
$.create "/event",
  event:
    employee_id: <%= current_user.employee_id %> 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T19:02:41.190

我猜`current_user`在这个上下文中是一个你试图访问的 Ruby 值（一个控制器实例变量，或者，根据名称，可能是一个返回当前用户对象的 Devise 方法）。这在 JavaScript/CoffeeScript 中是不可见的。您可以在视图中设置它（例如 ERB），然后在其他 JavaScript 函数中访问它。

查看[其他 Stack Overflow 问题](https://stackoverflow.com/questions/8108511/how-to-access-instance-variables-in-coffeescript-engine-inside-a-slim-template)，了解有关如何执行此操作的一些好的建议，包括指向 Railscast 剧集的链接。

简短的回答是，您可能会在 ERB 模板中需要这样的内容：

```
<script>
    employee_id = <%= current_user.employee_id %>
</script> 
```

请注意，您不能只分配`current_user`给 JavaScript 变量，然后从 JS 调用该变量的方法；它只是不那样工作。您无法在 JS 中访问 Ruby/Rails 值；您必须存储 JS 可以理解的值（标量、JSON 等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T18:59:57.010

我建议使用 gem 'gon'，这对于在 rails 应用程序中将数据从 ruby​​ 传递到咖啡非常有用。这是关于 gon 用法[的 Railscast ，这是](http://railscasts.com/episodes/324-passing-data-to-javascript?autoplay=true)['Gon' 的存储库](https://github.com/gazay/gon)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-06T09:18:15.603

我建议3个选项。但它们都不安全：

1.  从咖啡到服务器的一些 AJAX 调用（我还没有尝试过）。
2.  在 HTML 视图中呈现`user_id`为标签的属性，然后通过 jQuery 在咖啡文件中获取它。请参阅[https://www.sitepoint.com/create-a-chat-app-with-rails-5-actioncable-and-devise/](https://www.sitepoint.com/create-a-chat-app-with-rails-5-actioncable-and-devise/)

HTML：

```
<div id="user_id" data-user-id="<%= current_user.id %>"> 
```

咖啡脚本：

```
tag_user_id = $('#user_id')
current_user_id = tag_user_id.data('user-id') 
```

3.  在登录过程中设置`user_id`纯 cookie，并从咖啡文件中读取该 cookie 作为 JS 调用`document.cookie`。如果您使用 Devise，请在此处实现 Warden 挂钩：[https ://rubytutorial.io/actioncable-devise-authentication/](https://rubytutorial.io/actioncable-devise-authentication/)

应用程序/配置/初始化程序/warden_hooks.rb

```
Warden::Manager.after_set_user do |user,auth,opts|
  scope = opts[:scope]
  auth.cookies["#{scope}.id"] = user.id # not signed
end 
```

咖啡师：

```
current_user_id = document.cookie.replace(/(?:(?:^|.*;\s*)user.id\s*\=\s*([^;]*).*$)|^.*$/, "$1"); 
```

# c# - Perforce 命令行：如何在“p4 client -i”中使用 -i 标志？

> ID：13826595
> 
> 赞同：5
> 
> 时间：2012-12-11T18:52:08.887
> 
> 标签：c#, command-line, client, perforce, workspace

我想在命令行上编辑/创建一个工作区，而不弹出任何文本编辑器。文档说使用 -i 标志来使用标准输入。这种用法的语法/格式是什么？

传递文件正常工作： p4 client -i < fileDefiningTheWorkspace.txt

传递定义工作区的实际字符串不起作用： p4 client -i "Root: C:\The\Root\r\nOptions: noallwrite noclobber ....."

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T20:24:08.403

只是输入这样的字符串不会在标准输入中传递它。您需要指导一些输入，就像您传递文件的第一个示例一样。

如果您确实需要将字符串作为命令行的一部分，则需要使用 echo 之类的东西来管道输入适当的文本。但是 echo 不支持换行符，因此您需要分别回显每一行：

（回声线 1 和回声线 2 和回声线 3）| p4 客户端 -i

它很快就会变得非常丑陋。

正如您似乎真的很想知道如何从 c# 中执行此操作，这里有一个非常粗略且现成的示例，用于启动命令行进程并为其提供输入：

```
 ProcessStartInfo s_info = new ProcessStartInfo(@"sort.exe");
        s_info.RedirectStandardInput = true;
        s_info.RedirectStandardOutput = true;
        s_info.UseShellExecute = false;
        Process proc = new Process();
        proc.StartInfo = s_info;
        proc.Start();
        proc.StandardInput.WriteLine("123");
        proc.StandardInput.WriteLine("abc");
        proc.StandardInput.WriteLine("456");
        proc.StandardInput.Close();
        String output = proc.StandardOutput.ReadToEnd();
        System.Console.Write(output); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-19T10:54:57.683

在我处理了这个问题之后，解决方案看起来像这样：

```
P4Process.StartInfo.Arguments="client -i"
StreamWriter myStreamWriter = P4Process.StandardInput;
                String inputText = File.ReadAllText(@"C:\Program Files\Perforce\clientSpec.txt");
                myStreamWriter.Write(inputText);
                P4Process.StandardInput.Close();                  

                P4Process.BeginOutputReadLine();
                P4Process.BeginErrorReadLine();

                P4Process.WaitForExit(); 
```

对我来说，它与以下内容相同：

```
p4 client - i < clientSpec.txt 
```

# c# - 如何为动态创建的文本框添加水印？

> ID：13826599
> 
> 赞同：0
> 
> 时间：2012-12-11T18:52:22.787
> 
> 标签：c#, asp.net

我有一个网页，我可以在其中获得要动态添加的总文本框的计数。我添加了一个 HTML 表格，我在其中添加了行和单元格以放置文本框。

我不希望为每个文本框添加标签控件，但希望在每个文本框中放置水印文本，这些文本框是作为文本框数组动态创建的。

请帮助我实现这一目标。任何代码都会好很多！

下面的代码是我写的，它只在 HTML 表格控件中创建了文本框。

```
//Add row to table
tRow = new TableRow();
tblBokingDet.Rows.Add(tRow);

//Add cell to row
tCell = new TableCell();
tRow.Cells.Add(tCell);

//Add a literal text as control
AddTextBox = new TextBox();
AddTextBox.ID = "txtName" + i;                    
tCell.Controls.Add(AddTextBox); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:27:17.743

尝试 ：

```
 AddTextBox = new TextBox();
        AddTextBox.ID = "txtName" + i;                    
        tCell.Controls.Add(AddTextBox); // add to the cell
        AddTextBox.Attributes.Add("class", "hintTextbox");
        AddTextBox.Attributes.Add("onfocus", "if (this.value=='Name') this.value = '';this.style.color = '#000';");
        AddTextBox.Attributes.Add("onblur", "if (this.value=='') {this.value = 'Name';this.style.color ='#888';}"); 
```

添加CSS：

```
 INPUT.hintTextbox       { color: #888; }
         INPUT.hintTextboxActive { color: #000; }​ 
```

在此处查看示例小提琴：http: [//jsfiddle.net/F5R6Z/3/](http://jsfiddle.net/F5R6Z/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:05:17.010

我不知道是否有办法通过[Ajax 工具包](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/TextBoxWatermark/TextBoxWatermark.aspx)连接某些东西以动态创建文本框，但一种“开放”的方式是使用 JavaScript 将水印附加到每个文本框。（我说“开放”是因为将您的 UI 功能与您用于可移植性/可重用性的任何后端框架分开通常是一种很好的做法。）

这是[jQuery方式](http://www.mkyong.com/jquery/jquery-watermark-effect-on-text-input/)。

这是[香草的javascript方式](https://stackoverflow.com/questions/1911301/javascript-watermarks-for-textboxes)

您正在连接每个文本框的 onfocus() 和 onblur() 事件。当然，您需要创建一个足够通用的 js 函数来遍历每个文本框并连接它们的事件。

示例（对于单个文本框）：

```
<input id="MyTextBox" type="text" value="Search" />

<script>
    var MyTextBox = document.getElementById("MyTextBox");

    MyTextBox.addEventListener("focus", function(){
        if (this.value=='Search') this.value = '';
    }, false);

    MyTextBox.addEventListener("blur", function(){
        if (this.value=='') this.value = 'Search';
    }, false);
</script> 
```

# spring - 如何在 JSP 页面中调用 servlet

> ID：13826604
> 
> 赞同：0
> 
> 时间：2012-12-11T18:52:57.123
> 
> 标签：spring, hibernate, jsp

我是 Spring Java EE 的业余爱好者。这是我的开始。谁能告诉我：可以在不创建 FORM 且不刷新页面的情况下从 JSP 页面中的 servlet 获取一些数据吗？

我正在使用带有 Hibernate 和 JSP 的 Spring Framework。通过 Spring Security 登录后，有加载主页面：index.jsp。在此页面上 - 我将显示登录用户的快速桌面，其中包含使用休眠从数据库获取的一些信息（姓名、姓氏等）。你可以猜到 - 我不会重新加载/重定向这个页面，所以使用 FORM 子句是不可能的。

问题： 1\. 我可以从 JSP 页面调用 servlet 以从数据库中获取用户数据，而无需重新加载/重定向页面吗？只是：简单地调用 servlet 函数并将该函数的结果作为休眠对象获取。2\. 有什么方法可以直接在JSP页面调用Hibernate来获取数据？

或者请告诉我如何使用简单有效的技术解决这个问题。

谢谢你的帮助。对不起我的英语不好。

# zend-framework - Magento 跳过一些电子邮件

> ID：13826605
> 
> 赞同：1
> 
> 时间：2012-12-11T18:52:57.843
> 
> 标签：zend-framework, email, magento, php

我遇到了 Magento 跳过一些问题的问题 - 向客户（用于订单确认）和管理员（使用 New Order Admin 扩展程序）发送名义上的自动电子邮件。我会说大多数电子邮件正在发送，但也有很多电子邮件被跳过。这种行为是零星的，因为它并不一定会发生在一次发送大量电子邮件的情况下，甚至在缓慢的时间内。这一切都是随机的，甚至在某些日子里，所有的电子邮件都会发送出去。

我到处都读到过类似的问题，有些人指出 cron 作业、Zend 邮件功能的问题或服务器配置错误。但没有什么真正有用的。如果有任何区别，用于“销售电子邮件”和管理员通知的电子邮件地址由 Magento 站点托管环境之外的 MS Exchange Server 托管。

谢谢。

# list - 实体框架、列表和 Lambda

> ID：13826613
> 
> 赞同：0
> 
> 时间：2012-12-11T18:53:19.930
> 
> 标签：list, lambda, ef-code-first

我正在使用 EF codefirst，我需要对条目列表进行排序，我尝试过但找不到解决此任务的方法：

可以说我们有表达

```
thelist.orderby(p=> p.Name) 
```

问题是： **例如，如果我想按 p.Age 订购列表，如何传递字符串而不是“p.Name”**

因为有 20 个或更多选项可供排序，所以我试图缩小代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:05:15.257

只需安装 Dynamic LINQ（[NuGet 源](http://nuget.org/packages/DynamicQuery)），包含`using System.Linq.Dynamic;`在您的命名空间中，您就可以调用：

```
thelist.OrderBy("Name");
thelist.OrderByDescending(someStringParameter); 
```

等等

# python - Python - 从大量组合中构建满足某些标准的子列表

> ID：13826615
> 
> 赞同：3
> 
> 时间：2012-12-11T18:53:32.253
> 
> 标签：python, for-loop, itertools

读了很长时间，我第一次找不到我正在做的事情的答案。

我有一个包含 93 个字符串的列表，每个字符串长度为 6 个字符。从这 93 个字符串中，我想确定一组 20 个字符串，它们都符合相对于集合中其他字符串的特定标准。虽然 itertools.combinations 会给我所有可能的组合，但并非所有条件都值得检查。

例如，如果 [list[0], list[1], etc] 因为 list[0] 和 list[1] 不能在一起而失败，那么其他 18 个字符串是什么都没关系，该集合每次都会失败，那是一大堆浪费的检查。

目前我有 20 个嵌套的 for 循环，但似乎必须有更好/更快的方法来做到这一点。：

```
for n1 in bclist:
    building = [n1]
    n2bclist = [bc for bc in bclist if bc not in building]
    for n2 in n2bclist:              #this is the start of what gets repeated 19 times
        building.append(n2)
        if test_function(building): #does set fail? (counter intuitive, True when fail, False when pass)
            building.remove(n2)
            continue
        n3bclist = [bc for bc in bclist if bc not in building]
        #insert the additional 19 for loops, with n3 in n3, n4 in n4, etc
        building.remove(n2) 
```

第 20 个 for 循环中有打印语句来提醒我是否存在一组 20 个。for 语句至少允许我在单个加法失败时尽早跳过集合，但不记得更大的组合何时失败：

例如`[list[0], list[1]]`失败，所以跳到`[list[0], [list[2]]`哪个通过。接下来是`[list[0], list[2], list[1]]`哪个会失败，因为 0 和 1 再次在一起，所以它将移动到`[list[0], list[2], list[3]]`可能通过或不通过的哪个。我担心的是最终它也会测试：

*   `[list[0], list[3], list[2]]`
*   `[list[2], list[0], list[3]]`
*   `[list[2], list[3], list[0]]`
*   `[list[3], list[0], list[2]]`
*   `[list[3], list[2], list[0]]`

所有这些组合都将具有与以前的组合相同的结果。基本上，我交换了 itertools.combinations 的恶魔测试所有我知道失败的集合组合，因为早期值失败了 for 循环的恶魔，当我不关心它们的顺序时，它们将值的顺序视为一个因素。这两种方法都显着增加了我的代码完成所需的时间。

任何关于如何摆脱恶魔的想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:08:52.093

使用您当前的方法，但也要跟踪索引，以便在您的内部循环中您可以跳过您已经检查过的元素：

```
bcenum = list(enumerate(bclist))
for i1, n1 in bcenum:
    building = [n1]
    for i2, n2 in bcenum[i1+1:]:              #this is the start of what gets repeated 19 times
        building.append(n2)
        if test_function(building): #does set fail? (counter intuitive, True when fail, False when pass)
            building.remove(n2)
            continue
        for i3, n3 in bcenum[i2+1:]:
            # more nested loops
        building.remove(n2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:12:21.350

```
def gen(l, n, test, prefix=()):
  if n == 0:
    yield prefix
  else:
    for i, el in enumerate(l):
      if not test(prefix + (el,)):
        for sub in gen(l[i+1:], n - 1, test, prefix + (el,)):
          yield sub

def test(l):
  return sum(l) % 3 == 0 # just a random example for testing

print list(gen(range(5), 3, test)) 
```

`n`这将从`l`中选择基数的子集`test(subset) == False`。

它试图避免不必要的工作。但是，鉴于从 93 个元素中选择 20 个元素有 1e20 种方法，您可能需要重新考虑您的整体方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:50:10.900

您应该基于您的解决方案，`itertools.combinations`因为这将解决订购问题；短路滤波比较容易解决。

### 递归解决方案

让我们快速回顾一下如何实施`combinations`作品；最简单的方法是采用嵌套循环方法并将其转换为递归样式：

```
def combinations(iterable, r):
    pool = tuple(iterable)
    for i in range(0, len(pool)):
        for j in range(i + 1, len(pool)):
            ...
                yield (i, j, ...) 
```

转换为递归形式：

```
def combinations(iterable, r):
    pool = tuple(iterable)
    def inner(start, k, acc):
        if k == r:
            yield acc
        else:
            for i in range(start, len(pool)):
                for t in inner(i + 1, k + 1, acc + (pool[i], )):
                    yield t
    return inner(0, 0, ()) 
```

应用过滤器现在很容易：

```
def combinations_filterfalse(predicate, iterable, r):
    pool = tuple(iterable)
    def inner(start, k, acc):
        if predicate(acc):
            return
        elif k == r:
            yield acc
        else:
            for i in range(start, len(pool)):
                for t in inner(i + 1, k + 1, acc + (pool[i], )):
                    yield t
    return inner(0, 0, ()) 
```

让我们检查一下：

```
>>> list(combinations_filterfalse(lambda t: sum(t) % 2 == 1, range(5), 2))
[(0, 2), (0, 4), (2, 4)] 
```

### 迭代解决方案

[文档](http://docs.python.org/2/library/itertools.html#itertools.combinations)`itertools.combinations`中列出的实际实现使用迭代循环：

```
def combinations(iterable, r):
    pool = tuple(iterable)
    n = len(pool)
    if r > n:
        return
    indices = range(r)
    yield tuple(pool[i] for i in indices)
    while True:
        for i in reversed(range(r)):
            if indices[i] != i + n - r:
                break
        else:
            return
        indices[i] += 1
        for j in range(i+1, r):
            indices[j] = indices[j-1] + 1
        yield tuple(pool[i] for i in indices) 
```

为了优雅地适应谓词，有必要稍微重新排序循环：

```
def combinations_filterfalse(predicate, iterable, r):
    pool = tuple(iterable)
    n = len(pool)
    if r > n or predicate(()):
        return
    elif r == 0:
        yield ()
        return
    indices, i = range(r), 0
    while True:
        while indices[i] + r <= i + n:
            t = tuple(pool[k] for k in indices[:i+1])
            if predicate(t):
                indices[i] += 1
            elif len(t) == r:
                yield t
                indices[i] += 1
            else:
                indices[i+1] = indices[i] + 1
                i += 1
        if i == 0:
            return
        i -= 1
        indices[i] += 1 
```

再次检查：

```
>>> list(combinations_filterfalse(lambda t: sum(t) % 2 == 1, range(5), 2))
[(0, 2), (0, 4), (2, 4)]
>>> list(combinations_filterfalse(lambda t: t == (1, 4), range(5), 2))
[(0, 1), (0, 2), (0, 3), (0, 4), (1, 2), (1, 3), (2, 3), (2, 4), (3, 4)]
>>> list(combinations_filterfalse(lambda t: t[-1] == 3, range(5), 2))
[(0, 1), (0, 2), (0, 4), (1, 2), (1, 4), (2, 4)]
>>> list(combinations_filterfalse(lambda t: False, range(5), 2))
[(0, 1), (0, 2), (0, 3), (0, 4), (1, 2), (1, 3), (1, 4), (2, 3), (2, 4), (3, 4)]
>>> list(combinations_filterfalse(lambda t: False, range(5), 0))
[()] 
```

## 比较

事实证明，递归解决方案不仅更简单，而且速度更快：

```
In [33]: timeit list(combinations_filterfalse_rec(lambda t: False, range(20), 5))
10 loops, best of 3: 24.6 ms per loop

In [34]: timeit list(combinations_filterfalse_it(lambda t: False, range(20), 5))
10 loops, best of 3: 76.6 ms per loop 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T22:00:51.683

您可以利用问题的两个方面：

1.  顺序无关紧要
2.  if `test_function(L)`is `True`then`test_function`的任何子列表`L`will also be`True`

您还可以通过处理索引 0-92 而不是`list[0]`-来简化一些事情`list[92]`- 只有在`test_function`我们可能关心列表的内容是什么的情况下。

下面的代码首先找到可行的对，然后是四组、八组和十六组。最后，它找到了 16 和 4 的所有可行组合来获得 20 的列表。但是有超过 100,000 组 8 组，所以它仍然太慢，我放弃了。可能您可以按照相同的方式做一些事情，但可以加快速度`itertools`，但可能还不够。

```
target = range(5, 25)
def test_function(L):
    for i in L:
        if not i in target:
            return True
def possible_combos(A, B):
    """
    Find all possible pairings of a list within A and a list within B
    """
    R = []
    for i in A:
        for j in B:
            if i[-1] < j[0] and not test_function(i + j):
                R.append(i + j)
    return R
def possible_doubles(A):
    """
    Find all possible pairings of two lists within A
    """
    R = []
    for n, i in enumerate(A):
        for j in A[n + 1:]:
            if i[-1] < j[0] and not test_function(i + j):
                R.append(i + j)
    return R
# First, find all pairs that are okay
L = range(92) 
pairs = []
for i in L:
    for j in L[i + 1:]:
        if not test_function([i, j]):
            pairs.append([i, j])

# Then, all pairs of pairs
quads = possible_doubles(pairs)
print "fours", len(quads), quads[0]
# Then all sets of eight, and sixteen
eights = possible_doubles(quads)
print "eights", len(eights), eights[0]
sixteens = possible_doubles(eights)
print "sixteens", len(sixteens), sixteens[0]

# Finally check all possible combinations of a sixteen plus a four
possible_solutions = possible_combos(sixteens, fours)
print len(possible_solutions), possible_solutions[0] 
```

编辑：我找到了一个更好的解决方案。首先，识别范围 (0-92) 内符合 的所有值对`test_function`，保持对的顺序。大概第一对的第一个值必须是解决方案的第一个值，最后一对的第二个值必须是解决方案的最后一个值（但检查......这个假设是否正确`test_function`？如果这不是一个安全的假设，那么您将需要重复`find_paths` 开始和结束的所有可能值）。然后找到一条从第一个值到最后一个值的路径，该路径的长度为 20 个值，并且也符合`test_function`.

```
def test_function(S):
    for i in S:
        if not i in target:
            return True
    return False

def find_paths(p, f):
    """ Find paths from end of p to f, check they are the right length,
        and check they conform to test_function
    """
    successful = []
    if p[-1] in pairs_dict:
        for n in pairs_dict[p[-1]]:
            p2 = p + [n]
            if (n == f and len(p2) == target_length and
                not test_function(p2)):
                successful.append(p2)
            else:
                successful += find_paths(p2, f)
    return successful

list_length = 93              # this is the number of possible elements
target = [i * 2 for i in range(5, 25)] 
    # ^ this is the unknown target list we're aiming for...
target_length = len(target)   # ... we only know its length
L = range(list_length - 1)
pairs = []
for i in L:
    for j in L[i + 1:]:
        if not test_function([i, j]):
            pairs.append([i, j])
firsts = [a for a, b in pairs]
nexts = [[b for a, b in pairs if a == f] for f in firsts]
pairs_dict = dict(zip(firsts, nexts))
print "Found solution(s):", find_paths([pairs[0][0]], pairs[-1][1]) 
```

# delphi - 通过包含表单的按钮在运行时删除选项卡

> ID：13826623
> 
> 赞同：1
> 
> 时间：2012-12-11T18:53:50.760
> 
> 标签：delphi, lazarus

我在运行时创建标签，如下所示：

```
procedure TForm1.ShowFormOnTab(pProcName:String);
var
  Newform: TForm;
  ClassToUse: TFormClass;

  NewTab: TTabSheet;
  FormName: String;

begin
  NewTab := TTabSheet.Create(PageControl1);
  NewTab.PageControl:= PageControl1;

  PageControl1.ActivePage :=  NewTab;

  if pProcName='ProcfrmSetupItemCategories' then
    ClassToUse := TfrmSetupItemCategories
  else if pProcName='ProcfrmZones' then
    ClassToUse := TfrmZones
  else
    ClassToUse := nil;
  if Assigned(ClassToUse) then
    begin
      NewForm := ClassTouse.Create(NewTab);
      NewTab.Caption := NewForm.Caption;
    end; 
```

现在，选项卡正确显示，表格也显示在它们上面。我需要这样做，因为表单 + 选项卡是在运行时创建的。

但这是我的问题：表单上有一个关闭按钮，单击时会释放表单的资源。但我也希望在单击表单按钮时关闭 TAB。

我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T18:58:23.733

您可以简单地`Free`使用标签页。您不需要单独释放选项卡表的子项。只需`Free`在标签页上调用即可。

但是，如果该按钮位于正在释放的选项卡上，那将不起作用。无法从按钮的`OnClick`事件处理程序中释放按钮的父级。

解决方案是给自己发一条消息。该消息需要包含释放标签页所需的信息。通过发布消息，您允许`OnClick`事件处理程序在处理排队的消息之前运行完成。

```
const
  WM_FREECONTROL = WM_USER;
....
PostMessage(Self.Handle, WM_FREECONTROL, 0, LParam(TabSheet)); 
```

然后将消息的处理程序添加到表单：

```
procedure WMFreeControl(var Message: TMessage); message WM_FREECONTROL; 
```

并像这样实现它：

```
procedure TForm1.WMFreeControl(var Message: TMessage);
begin
  TObject(Message.LParam).Free;
end; 
```

现在，写了这个冗长的回复后，请明确第 2 段以后的建议仅适用于按钮是被释放控件的子控件的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T00:07:15.273

我不喜欢事情变得复杂

## 如何获取选项卡式表单 (PageControl)

```
TForm1 = class( TForm )
  PageControl1 : TPageControl;

  procedure NewTabbedForm;
end;

procedure TForm1.NewTabbedForm;
var
  LForm : TForm;
begin
  // Some code to get a new form instance into LForm

  LForm := TTabForm.Create( Self );

  // now the magic to put this form into PageControl as a TabSheet
  LForm.ManualDock( PageControl1, PageControl1, alClient );
  // Finally
  LForm.Show;
end; 
```

表单的 Caption 将自动用于自动创建的 TabSheet Caption。

## 如何释放/删除选项卡式表单

### 简短而简单

```
TTabForm = class( TForm )
  Close_Button : TButton;
  procedure Close_ButtonClick( Sender : TObject );
end;

procedure TTabForm.Close_ButtonClick( Sender : TObject );
begin
  Self.Release;
end; 
```

### 多一点点

```
TTabForm = class( TForm )
  Close_Button : TButton;
  procedure Close_ButtonClick( Sender : TObject );
  procedure FormClose( Sender : TObject; var Action : TCloseAction );
end;

procedure TTabForm.Close_ButtonClick( Sender : TObject );
begin
  Self.Close;
end;

procedure TTabForm.FormClose( Sender : TObject; var Action : TCloseAction );
begin
  Action := caFree;
end; 
```

# c++ - 使键盘进入睡眠状态，直到按下特殊字符序列

> ID：13826631
> 
> 赞同：0
> 
> 时间：2012-12-11T18:54:16.107
> 
> 标签：c++, c, linux, linux-device-driver

我在戴尔笔记本电脑上使用 Fedora17。我希望我的键盘将被锁定，直到按下一个特殊的字符序列（例如 abcde）......然后它会正常运行......我如何以编程方式实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:29:42.787

如果您可以更改内核（不仅仅是内核模块），我会查看`linux/drivers/tty/vt/`. 警告，这不是万无一失的，我不确定它会如何对密钥重新映射或其他事情做出反应。

实际的内核键码映射是在编译时使用`defkeymap.map`（如果有记忆的话）生成的。但是，这是从中调用的，`int getkeycode`因此您可能可以在那里实现您的功能。在`getkeycode`返回之前，您应该能够执行您可能想要的任何额外操作（例如禁用键盘）。

如果您需要使用内核模块，您也许可以在适当的位置插入您自己的键码处理程序`getkeycode`，但我不能保证。

# c# - 如何在 LayoutAnchorable AvalonDock 2 中放置窗口实例

> ID：13826634
> 
> 赞同：3
> 
> 时间：2012-12-11T18:54:38.750
> 
> 标签：c#, wpf, xaml, avalondock

我正在将 WPF C# 应用程序（不是 MVVM）中的 AvalonDock 从 1.3 升级到 2.0。在 1.3 中，只要使用 DockableContent: XAML，我就可以放置自定义窗口：

```
<!--<Window-->
<ad:DockableContent   x:Class="Test.JournalWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ad="clr-namespace:AvalonDock;assembly=AvalonDock" 
        xmlns:local="clr-namespace:Test"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"

        Loaded="Journal_Loaded" StateChanged="Journal_StateChanged"
        Title="Journal" Icon = "Resources/journalLog.ico" HideOnClose="True" Height="300" Width="Auto">

    <ad:DockableContent.Resources>
      </ad:DockableContent.Resources>

                <Grid>  </Grid>
</ad:DockableContent>
<!--</Window>--> 
```

代码背后：

```
public partial class JournalWindow : DockableContent
    {
        public JournalWindow()
        {
            InitializeComponent();
        } 
```

MainWindow 中显示实例化元素的代码：

```
JournalWindow journalWindow;
 journalWindow = new JournalWindow()
            {
                Name = nameJournalWindow,
                Title = "Journal"
            };

            journalWindow.IsCloseable = true;
            journalWindow.HideOnClose = true;
            journalWindow.Show(dockManager); 
```

如何使用 AvalonDock 2 在 LayoutAnchorable 或其他布局元素（以前为 DockableContent）中放置和显示 JournalWindow 的实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T11:18:35.833

AvalonDock 在新版本中发生了很大变化。在 AD 2.0 中，您有两个选择：1) 最简单的一个是创建一个标准 UserControl（在您的情况下，JournalWindow 从 UserControl 而不是 DockableContent 派生）并将控件放在 LayoutAnchorable 内（作为其内容）。示例代码：

```
<UserControl x:Class="Test.JournalWindow" ...>
...
</UserControl>

<LayoutAnchorable Title="My Journal Window">
   <testNamespace:JournalWindow/>
</LayoutAnchorable> 
```

2) 推荐的方法是使用 MVVM 方法，为此我将向您指出附加到 AvalonDock 库的示例项目 MVVMTestApp：http: [//avalondock.codeplex.com/downloads/get/558780](http://avalondock.codeplex.com/downloads/get/558780)

阿多

# javascript - 使用 requireJS 提供的 javascript 语言文件时如何调整外来字符？

> ID：13826637
> 
> 赞同：0
> 
> 时间：2012-12-11T18:54:55.567
> 
> 标签：javascript, html, utf-8, internationalization, requirejs

我正在尝试使用`requireJS`and构建模板`jquery-mobile`。我正在从离线/在线源中提取数据并通过 requireJS`i18n`插件获取文本文件（[here](http://requirejs.org/docs/api.html) .

除了外来字符，一切都很好。

我的语言文件几乎不包含任何内容。它们看起来像这样：

```
define({
    "tx_sel_choose_retailer":"Händler wählen",
    "tx_sel_delete":"Löschen"
}); 
```

这是通过requireJS拉进来的。

**问题**：使用这个捆绑包时，
如何让角色像我需要的那样显示？`äöü`我是否必须在 Javascript 中声明某些内容，因为一旦我将它们拉入以构建我的元素（在将它们放入页面之前），这些字符就是错误的。

感谢您的一些提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:04:41.397

您需要处理两件事：

*   声称的编码
*   物理编码

声称的编码是您的服务器发送的 http 标头，即 http 标头`Content-Type: text/javascript; charset=utf-8`将声称该文件采用 utf-8 编码。您还可以使用元标记在您的 html 源代码中声明编码，但最好使用真正的 http 标头。

然后在另一边你有文件的实际物理编码，如果你声称文件是 utf-8，但它在物理上是别的东西，你不会得到预期的结果。您需要配置您的文本编辑器以使用您声称该文件的相同编码保存文件。

# java - 在Java中工作的正则表达式在MySql中失败

> ID：13826650
> 
> 赞同：0
> 
> 时间：2012-12-11T18:55:56.060
> 
> 标签：java, mysql

我正在尝试使用正则表达式对提供的字符串进行近似匹配。它在 java 中工作正常，但是当我使用正则表达式支持在 mysql 中尝试近似匹配时，使用在 java 中工作的相同示例，说不匹配。简而言之相同的示例在 java 中工作，但在 mysql 中失败

```
public static void main(String a[]){ 
    if( "Java/myService/1,".matches("[[^,]+,]*Java/.*"))
        System.out.println("Pattern matched");
} 
```

在执行上述代码时，您将获得“模式匹配”。

这是返回不匹配或'0'的MySql查询。

```
select 'Java/myService/1,' regexp '[[^,]+,]*Java/.*'; 
```

我的理解是理想情况下两者都应该为指定的示例提供匹配。你们中的任何人都可以告诉我为什么 MySql 匹配在这里失败吗？非常感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:01:06.847

我猜想

```
"[[^,]+,]*Java/.*" 
```

是指：

```
"([^,]+,)*Java/.*" 
```

# entity-framework - 未使用 EF 迁移创建 SQL Azure 表

> ID：13826651
> 
> 赞同：7
> 
> 时间：2012-12-11T18:55:58.557
> 
> 标签：entity-framework, migration, azure-sql-database

我在我的应用程序中使用 EF 迁移和 SQL Azure 数据库。在我手动删除 SQL Azure 中的表之前，它工作正常。现在，当我发布我的应用程序时，删除的表不是在 SQL Azure 中创建的。这是我得到的错误。

```
Cannot find the object "dbo.TableName" because it does not exist 
or you do not have permissions. 
```

我觉得我在数据库和我的模型之间造成了一些不一致。

我正在使用自动迁移。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T12:31:21.180

为什么一开始就删除表？你希望它被重新创建吗？

在我们进入更棘手的解决方案之前，您是否尝试过使用 -TargetMigration 选项回滚到在其中创建表的迁移之前的迁移？我感觉你会在尝试删除不存在的 fk 的表或索引时遇到 SQL 错误，但值得一试。您可以使用此命令执行此操作`update-database -TargetMigration YourOldMigration`。这将通过运行迁移文件的 Down() 方法中的命令回滚在目标迁移之后应用的所有迁移。如果您遇到 SQL 错误，您可以尝试修改 Down() 方法的内容以避免错误。小心。这可能会导致数据丢失。如果 EF 对此发出警告而您不在乎。尝试将 -Force 添加到命令的末尾。

或者，另外......

您的迁移不仅仅是通过将您的 db 方案与您的 dbcontext/models 进行比较来计算的。如果您在 sql server management studio 中打开 sql azure 数据库，您应该会看到一个名为 __MigrationHistory 的表。它存储通过自动迁移应用到您的数据库的所有迁移。

请在开始之前通读一遍。在开始之前，您需要考虑一些因素。假设您尚未对此进行操作，您应该能够为最初创建表的更改集找到一行。删除该行。现在 EF 自动迁移会认为该更改尚未应用于您的数据库。如果您运行 update-database 它应该尝试重新运行它。

如果您对该迁移文件进行了其他更改，它也会尝试重新运行这些更改。这可能会导致各种 sql 错误。您可能希望手动回滚也是该迁移的一部分的所有更改。担心数据丢失？尝试将数据复制到手动创建的表中进行存储，直到完成为止。完成迁移后，您可以将数据复制回新表/列中。

双重选择。如果您对开发不太感兴趣，并且您对数据丢失没有太多顾虑，那么删除整个数据库并让自动迁移从头开始重新创建它可能会更容易。

希望能让你到达那里

# ffmpeg - ffmpeg 将 4 个视频多路复用为 1 和 drawtext 问题

> ID：13826652
> 
> 赞同：2
> 
> 时间：2012-12-11T18:55:59.763
> 
> 标签：ffmpeg, drawtext

我有四个视频，我想将它们多路复用成一个视频，并将文本放在每个象限的左上角。我可以成功混合视频，使得 vid1 在左上角，vid2 在右上角，vid3 在左下角，vid4 在右下角。

但是，我什至无法使用 drawtext 命令显示简单的文本。

我想将原始视频文件的名称放在每个象限中。

目前我的命令是这样的：

```
ffmpeg.exe -i "vid1.mp4" -i "vid2.mp4" -i "vid3.mp4" -i "vid4.mp4"  -filter_complex "[0:0]scale=iw/2:ih/2,pad=iw*2:ih*2[a];[1:0]scale=iw/2:ih/2[b];[2:0]scale=iw/2:ih/2[c];[3:0]scale=iw/2:ih/2[d];[a][b]overlay=w[x];[x][c]overlay=0:h[y];[y][d]overlay=w:h" -vf [0]drawtext=fontsize=12:fontcolor=white:fontfile="/Windows/Fonts/arial.ttf":text="vid1":x=35:y=35[out] "4UP_Video.mov" 
```

如果我删除 drawtext 命令，我会得到相同的结果：不错的 4-Up 视频，但没有文本。我的假设是，对于其他象限，我会在输入流中添加另一个 drawtext 命令#，例如

```
[1]drawtext ... 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:34:13.480

将`drawtext`过滤器添加到您当前的过滤器链中，而不是创建一个新的过滤器。

```
ffmpeg.exe -i vid1.mp4 -i vid2.mp4 -i vid3.mp4 -i vid4.mp4 -filter_complex "[0:0]scale=iw/2:ih/2,pad=iw*2:ih*2[a];[1:0]scale=iw/2:ih/2[b];[2:0]scale=iw/2:ih/2[c];[3:0]scale=iw/2:ih/2[d];[a][b]overlay=w[x];[x][c]overlay=0:h[y];[y][d]overlay=w:h,drawtext=fontsize=12:fontcolor=white:fontfile=/Windows/Fonts/arial.ttf:text='vid1':x=35:y=35,drawtext=fontsize=12:fontcolor=white:fontfile=/Windows/Fonts/arial.ttf:text='vid2':x=(w/2)+35:y=35,drawtext=fontsize=12:fontcolor=white:fontfile=/Windows/Fonts/arial.ttf:text='vid3':x=35:y=(h/2)+35,drawtext=fontsize=12:fontcolor=white:fontfile=/Windows/Fonts/arial.ttf:text='vid4':x=(w/2)+35:y=(h/2)+35" 4UP_Video.mov 
```

[请在 superuser.com 上询问未来的 ffmpeg 使用问题。Stack Overflow 仅限于编程。]

# sql - 左连接产生的重复值

> ID：13826660
> 
> 赞同：1
> 
> 时间：2012-12-11T18:56:38.057
> 
> 标签：sql, sql-server, sql-server-2008

我有桌子

```
GLId        Id          DonarId
----------- ----------- -----------
1           1           1
2           1           2
3           2          1
4           2          2
5           3          1
6           3          2
7           4          1
8           4          2
9           5          1
10          5          2 
```

现在，我想找到那些不存在于 donarId 列中且 count(donarid) 小于 8 的 id

我写了一个查询

```
SELECT g.id 
FROM   gamestar g 
       LEFT JOIN gamestar gs 
              ON g.id = gs.donarid 
GROUP  BY g.id, 
          g.glid 
HAVING Count(gs.donarid) < 8 
ORDER  BY g.glid 
```

但它会导致重复值。

结果看起来像

```
ID
-----------
1
1
2
2
3
3
4
4 
```

等等。

等待帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:26:57.853

```
;WITH cte AS
 (
  SELECT g.glid, g.id,
         COUNT(1) OVER (PARTITION BY gs.donarid, g.glid) AS cn 
  FROM gamestar g LEFT JOIN gamestar gs ON g.id = gs.donarid
  )
  SELECT Id
  FROM cte
  WHERE cn < 8
  GROUP BY Id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:01:35.407

您似乎正在寻找出现次数少于 8 次的 id，它们在 donar id 列中是 no。

```
select g.id
from gamestar g
where g.donarid not in (select donarid from gamestar)
group by g.id
having count(*) < 8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:24:15.847

尝试这个

```
 SELECT g.id 
 FROM   gamestar g 
    LEFT JOIN gamestar gs 
          ON g.id = gs.donarid 
 GROUP  BY g.id 
 HAVING Count(gs.donarid) < 8 
```

[SQL文件](http://sqlfiddle.com/#!3/b88bc/12)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T18:59:50.737

你可以使用`DISTINCT`：

```
SELECT DISTINCT g.id 
FROM   gamestar g 
       LEFT JOIN gamestar gs 
              ON g.id = gs.donarid 
GROUP  BY g.id, 
          g.glid 
HAVING Count(gs.donarid) < 8 
ORDER  BY g.glid 
```

# android - AlarmManager 和 WakeLock 示例

> ID：13826664
> 
> 赞同：0
> 
> 时间：2012-12-11T18:57:16.160
> 
> 标签：android

我试过这个wakefull示例：[https ://github.com/commonsguy/cw-omnibus/tree/master/AlarmManager/Wakeful](https://github.com/commonsguy/cw-omnibus/tree/master/AlarmManager/Wakeful)

但我有几个问题。

我需要`<action android:name="android.intent.action.BOOT_COMPLETED" />`吗？因为正如我测试的那样，意图始终为空。

而 inScheduledService 是：

```
@Override
    protected void doWakefulWork(Intent intent) {
        Log.d(getClass().getSimpleName(), "I ran!");
    } 
```

但是这种方法永远不会被解雇。

在 WakefulintentService 中有这个方法，它也永远不会被触发：

```
 @Override
    final protected void onHandleIntent(Intent intent) {
        try {
            doWakefulWork(intent);
        } finally {
            PowerManager.WakeLock lock = getLock(this.getApplicationContext());

            if (lock.isHeld()) {
                lock.release();
            }
        }
    } 
```

要改变什么，以便我得到`I ran`输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:03:42.193

> 我需要 ？

仅当您希望在重新启动后再次设置警报时。默认情况下，设备重启时会清除警报。

> 但这种方法永远不会被解雇。

是的。您可以通过运行项目来判断这一点。

> 在 WakefulintentService 中是这个方法，它也永远不会被触发：

是的。您可以通过运行项目来判断这一点。

例如，这是我刚刚执行的运行的输出：

```
12-11 14:03:05.671: D/ScheduledService(3322): I ran!
12-11 14:03:10.671: D/ScheduledService(3322): I ran!
12-11 14:03:15.671: D/ScheduledService(3322): I ran!
12-11 14:03:20.671: D/ScheduledService(3322): I ran! 
```

# php - 自定义号码分配的PHP实现

> ID：13826666
> 
> 赞同：0
> 
> 时间：2012-12-11T18:57:24.997
> 
> 标签：php, math

我正在寻找一个生成随机数的函数`[a,b]`

函数必须接受一个参数——种子并返回随机值`x є [a,b]`。的概率`x = a`最低，但在移动到 b 时会增加。的概率`x = b`应该是最高的。

据我了解，我正在寻找的是累积分布函数的实现，但不能肯定地说。所以我会为直接文学感到高兴。或者也许已经有一个内置的 php 实现？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:40:47.830

首先，您没有指定参数应该是什么。下面的函数不使用累积分布。增加 $n 将导致更可能返回接近 b 的值。

```
function almostRandom() {
    $a = 1;
    $b = 10;
    $n = 2.5;

    $random = rand(0, 1000000) / 1000000;

    $positionInInterval = 1 - pow($random, $n);

    $intervalLength = $b - $a;
    $value = $a + $intervalLength * $positionInInterval;

    return $value;
} 
```

# sql-server - 通过 CASE 语句设置值

> ID：13826671
> 
> 赞同：0
> 
> 时间：2012-12-11T18:57:54.877
> 
> 标签：sql-server, case

我是 t-sql 编程的新手。我有 Java、Javascript 和许多其他编程语言的背景。我正在尝试设置`@notes`变量的值。我的代码如下。

基本上，如果and不为空，我想要做的是设置`@notes`变量。我添加了一个打印语句以确保和是我传入的值。`@minBatch``@maxBatch``@minBatch``@maxBatch`

简而言之，以下代码有什么问题？

```
    设置@notes =
          案子
            当 @minBatch != null 和 @maxBatch != null 然后
                案子
                  当@minBatch != @maxBatch 然后
                    '开始批处理：' + cast(@minBatch as varchar(8)) +' 结束批处理：' + cast(@maxBatch as varchar(8))
                  别的
                    '批处理' + cast(@minBatch as varchar(8))
                结尾
            别的
              空值
          结尾

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:04:19.573

使用`is null`代替`=null`

```
SELECT @notes = 
     CASE 
         WHEN (@minBatch + @maxBatch) is not null --Comment: if any null result is null 
              THEN
                 CASE @minBatch WHEN @maxBatch --@min or @max still can be null
                      THEN 'Batch ' + cast(ISNULL(@minBatch,0) as varchar(8))
                      ELSE 'Start batch: ' + 
                            cast(ISNULL(@minBatch,0) as varchar(8)) + ' End batch: ' + 
                            cast(ISNULL(@maxBatch,0) as varchar(8))
                 END
         ELSE null
     END 
```

**编辑：**简化使用`(@minBatch + @maxBatch) is not null`

```
--Comment: if any null result is null 
```

# mysql - 查询不处理我的日期格式

> ID：13826673
> 
> 赞同：0
> 
> 时间：2012-12-11T18:58:00.397
> 
> 标签：mysql, sql, date, datetime, datetime-format

我一直在尝试`5-Jan-76`用 sql in转换这个日期，`Jan, 05 1976`我尝试了以下方法，但他们返回`null`请告诉我以下查询有什么问题？：

```
select STR_TO_DATE('5-Jan-76', '%M,%d %Y')
select DATE_FORMAT('5-Jan-76','%M,%d %Y') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T19:02:01.740

您的第一种方法是正确的，但您没有使用正确的[格式说明符](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)：

> **`%b`**月份缩写名称 (Jan..Dec)
> **`%d`**日期，数字 (00..31)
> **`%e`**日期，数字 (0..31)
> **`%Y`**年份，数字，四位数
> **`%y`**年份，数字（两位）

这是您需要做的：

```
SELECT DATE_FORMAT(STR_TO_DATE('5-Jan-76', '%e-%b-%y'), '%b, %d %Y'); -- Jan, 05 1976 
```

# erlang - RabbitMQ erlang 客户端，来自 C system() 调用中的 escript

> ID：13826676
> 
> 赞同：0
> 
> 时间：2012-12-11T18:58:17.183
> 
> 标签：erlang, rabbitmq

我将如何能够做到以下几点：

`system.c`

```
#include<stdio.h>

int main()

{
        system("/home/noob/send.erl");

        return(0);
} 
```

来自使用 erlang 客户端[rabbitmq-tutorials/erlang/的 RabbitMQ 教程](https://github.com/rabbitmq/rabbitmq-tutorials/blob/master/erlang/send.erl)

`send.erl`

```
#!/usr/bin/env escript
%%! -pz ./deps/amqp_client ./deps/rabbit_common ./deps/amqp_client/ebin ./deps/rabbit_common/ebin

-include_lib("deps/amqp_client/include/amqp_client.hrl").

main(_) ->
    {ok, Connection} = 
    amqp_connection:start(#amqp_params_network{host = "localhost"}),
    {ok, Channel} = amqp_connection:open_channel(Connection),

    amqp_channel:call(Channel, #'queue.declare'{queue = <<"hello">>}),
    amqp_channel:cast(Channel, 
             #'basic.publish'{
               exchange = <<"">>,
               routing_key = <<"hello">>}, 
              #amqp_msg{payload = <<"Hello World!">>}),
    io:format("[x] Sent 'Hello World!'~n"),
    ok = amqp_channel:close(Channel),
    ok = amqp_connection:close(Connection),
    ok. 
```

然后运行：

`gcc system.c -o system`

`noob$./system`

输出：

```
send.erl:20: can't find include lib "rabbit_common/include/rabbit.hrl"
send.erl:21: can't find include lib "rabbit_common/include/rabbit_framing.hrl"
escript: There were compilation errors. 
```

所以我这样做`amqp_client.hrl`

```
-include_lib("../../rabbit_common/include/rabbit.hrl").
-include_lib("../../rabbit_common/include/rabbit_framing.hrl"). 
```

然后运行`noob$./system`

和繁荣：

```
escript: exception error: undefined function amqp_connection:start/1
  in function  erl_eval:do_apply/6 (erl_eval.erl, line 572)
  in call from erl_eval:expr/5 (erl_eval.erl, line 367)
  in call from escript:eval_exprs/5 (escript.erl, line 836)
  in call from erl_eval:local_func/5 (erl_eval.erl, line 470)
  in call from escript:interpret/4 (escript.erl, line 754)
  in call from escript:start/1 (escript.erl, line 277)
  in call from init:start_it/1 
```

因此，escript 在编译时似乎存在 PATHS 问题，并且它在 C 的 system() 调用中被调用。

知道我将如何实现这一目标吗？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:25:08.253

感谢这个[问题](https://stackoverflow.com/questions/6545416/escript-setting-code-path-relative-to-script-directory)

我能够动态地添加额外的 PATH 目录，以便 escript 找到运行脚本所需的 erlang 客户端代码。

```
true = code:add_pathz(filename:dirname(escript:script_name()) ++ "/deps/amqp_client/ebin"),
true = code:add_pathz(filename:dirname(escript:script_name()) ++ "/deps/rabbit_common/ebin"), 
```

我仍然不太明白为什么从 shell 中使用 -pz 相对路径选项调用 escript 起作用并且在 C 的 system() 中不起作用的原因。

# css - Jquery 移动列表视图和媒体查询

> ID：13826682
> 
> 赞同：0
> 
> 时间：2012-12-11T18:58:34.840
> 
> 标签：css, jquery-mobile, media-queries

我有一个列表视图：

```
<ul data-inset="true" data-role="listview" data-theme="a" id="nav" role="navigation" data-icon="none" data-corners="false">
<li>item</li>
<li>item</li>
<li>item</li>
<li>item</li>
<li>item</li>
</ul> 
```

使用以下 CSS 媒体查询：

```
@media only screen and (max-width: 767px) { 
    .ui-corner-top {
        -moz-border-radius-topleft: 0;
        -webkit-border-top-left-radius: 0;
        border-top-left-radius: 0;
        -moz-border-radius-topright: 0;
        -webkit-border-top-right-radius: 0;
        border-top-right-radius: 0;
    }
    .ui-corner-bottom {
        -moz-border-radius-bottomleft: 0;
        -webkit-border-bottom-left-radius: 0;
        border-bottom-left-radius: 0;
        -moz-border-radius-bottomright: 0;
        -webkit-border-bottom-right-radius: 0;
        border-bottom-right-radius: 0;
    }

} /* end media query */ 
```

*应该*发生的是，当用户在较小的屏幕上查看列表视图时，圆角变成了方角。

然而，这似乎在 Chrome 中运行良好，但不是 Safari 或 iPhone。事实上，如果我在 Safari 上使用 Firebug lite，看起来样式甚至都没有显示（但它显示在 Chrome 开发人员的工具栏中）......？

# jquery - 如何将单选按钮转换为在jquery中选择

> ID：13826693
> 
> 赞同：1
> 
> 时间：2012-12-11T18:59:37.227
> 
> 标签：jquery, html

我需要将单选按钮转换为 jquery 中的选择框。

我有以下代码，但它不会产生我需要的东西：

```
$j('#product_addtocart_form input[type=radio]').each(function(i, checkbox){
var $checkbox = $j(checkbox);
// create a select
var $select = $j('<select></select>');
// set name and value
$select.attr('name', $checkbox.attr('name')).attr('value', $checkbox.val());
$select.append(new Option('test','tet'));
//$checkbox.remove();
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T19:10:27.850

您`$select`每次都在重新创建循环内部。此外，您`$select`的内容永远不会写入浏览器。

尝试这个：

```
var $checkbox = $('#product_addtocart_form input[type=radio]');
var $select = $('<select></select>');    // create a select
$select.attr('name', $checkbox.attr('name'));    // set name and value

$checkbox.each(function(i, checkbox){
    var str = $checkbox.eq(i).val();
    $select.append($('<option>').val(str).text(str));
});

$checkbox.replaceWith($select);​ 
```

[http://jsfiddle.net/mblase75/G9fHG/](http://jsfiddle.net/mblase75/G9fHG/)

# php - 在输入中添加带有 javascript 的随机代码

> ID：13826699
> 
> 赞同：0
> 
> 时间：2012-12-11T19:00:16.777
> 
> 标签：php, javascript, jquery

我有两个输入字段。第一个是用户输入任何文本（例如产品名称）的字段，另一个是产品名称的“别名”字段，当用户写入产品名称时，它会实时自动创建。它是用 javascript 完成的，所以我的问题是如何添加一些 javascript 代码以便在每个别名的末尾添加一些随机代码，例如 (aSDAS55AD546)。

这是代码：

输入字段：

产品名称：

```
<input id="asd" onKeyUp="keypress()" name="editname_<? echo $languages[$i][0]; ?>[<? echo $key; ?>]" type="text" value="<? echo $item['name'][$languages[$i][0]];?>" /> 
```

别名字段：

```
<input name="editalias[<? echo $key; ?>]" id="sdf" onFocus="javascript:stripspaces(this)" readonly="readonly" type="text" value="<? echo $item['alias'];?>" /> 
```

这是javascript代码：

```
<script type="text/javascript"> 

function keypress()
{ 
var txt=document.getElementById('asd').value;
str1 = " \",'!=:;\йцукенгшщзхъжэдлорпавыфячсмитьбюЙЦУКЕНГШЩЗХЪЭЖДЛОРПАВЫФЯЧСМИТЬБЮăîșțĂÎȘȚ"; 
str2 = "00000000icukengsszhijedlorpavifacsmitibuICUKENGSSZHIEJDLORPAVIFACSMITIBUaistAIST";
for(i=0; i<str1.length; i++) 
   { 
 txt = txt.replace(new RegExp(str1[i],"g"), str2[i]); 
} 

document.getElementById('sdf').value=txt;
} 
</script> 

<script type="text/javascript">
$().ready(function(){
    $("input#asd").keyup(removeextra).blur(removeextra);
});
function removeextra() {
    var initVal = $(this).val();
    outputVal = initVal.replace(/[^0-9a-zA-Zа-яА-Я\s'",!ăîșțĂÎȘȚ]/g,"");       
    if (initVal != outputVal) {
        $(this).val(outputVal);
    }
};
</script> 
```

这个 javascript 为我节省了很多时间。我的网站是针对俄罗斯的，它还可以将俄文字母翻译成英文字母。

那么请问我怎样才能为别名制作一个随机代码？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:16:28.740

下划线库具有用于此目的的功能。我强烈推荐这个库，但如果你只想要一个函数的逻辑，它基本上只是：

```
var idCounter = 0;
function uniqueId(prefix) {
    var id = idCounter++;
    return prefix ? prefix + id : id;
}; 
```

有了它，你可以这样做：

```
var aliasOfFoo = uniqueId(originalFoo); 
```

现在，如果您需要后缀是随机的，事情会变得有点棘手。您需要一个 idArray 来存储所有先前生成的随机字符串，而不是使用 idCounter，然后在 uniqueId 中您希望继续生成随机字符串，直到找到一个不在 idArray 中的字符串。

# android - 单击 ListView 时结果不可读

> ID：13826700
> 
> 赞同：0
> 
> 时间：2012-12-11T19:00:19.757
> 
> 标签：android, listview, toast

我在 ListView 中显示人名列表。当我单击一个名称时，我将其设置为显示一条 Toast 消息，其中显示所单击的人的姓名。

然而，吐司显示不可读的数据，我不知道如何让它只显示名称。

以下是吐司消息：

“ **com.example.friends.Person@50db3a 点击了！** ”

我想显示类似的东西

**“乔博客点击了！”。**

该列表从包含 Person 对象的数组列表中获取其数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:02:22.327

覆盖`toString()`Person 类中的方法并返回人名或您想要显示的任何内容。例如：

```
@Override
public String toString() {
    return name;
} 
```

# perl - 使用 Perl，修剪文件前半部分的最佳方法是什么？

> ID：13826702
> 
> 赞同：-2
> 
> 时间：2012-12-11T19:00:26.687
> 
> 标签：perl

对于我的无知，我深表歉意，但我对 Perl 非常陌生，需要一些即时帮助....

我有一个包含“历史”数据的文件，并且我知道这些记录是用逗号分隔的。当然，随着历史的发展，这个文件会不断增长。所以使用 Perl，我想修剪数据文件，因为它是最旧的。这不需要是一门精确的科学。我想我会做如下的事情：

*   计算文件中逗号的个数并除以 2（找到中间点）
*   因此，例如，如果有 100 条记录（因此有 99 个逗号分隔符），则逗号计数为 99
*   然后我会除以 2 得到近似的中点（四舍五入），在这个例子中是 46
*   然后删除第 46 个逗号之前的所有记录（包括逗号，这样文件就不会以逗号开头）。
*   然后保存我新修剪的历史数据文件。

这是一个带有逗号分隔符的非常小的示例文件布局：

```
20121130092403000Server1::RedHat   1.2.3.4(1234),20121130092503000Server2::RedHat   5.6.7.8(1234),20121130092603000Server3::SUSE   9.8.7.6(9876),20121130092703000Server4::WindowsXP   5.6.7.8(6543) 
```

我希望这是有道理的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:33:43.433

什么是“最快、最有效的方式”可能是一个不同的问题。这是执行此类操作的典型方法：

```
use strict;
use warnings;

local $/ = ",";
my @file = <DATA>;
say "Number of records: " . @file;
my $half = int((@file/2)+0.5);
say "Last half of records ($half):";
say @file[$half .. $#file];

__DATA__
20121130092403000Server1::RedHat   1.2.3.4(1234),20121130092503000Server2::RedHat   5.6.7.8(1234),20121130092603000Server3::SUSE   9.8.7.6(9876),20121130092703000Server4::WindowsXP   5.6.7.8(6543), 
```

请注意，此处使用 DATA 文件句柄进行演示。您可以简单地更改`<DATA>`为`<>`使其使用文件参数。

这会稍微降低效率，因为文件被读入内存，并且会消耗内存，这对于大文件来说可能是昂贵的。另一种方法是简单地运行文件并计算记录，然后重新打开文件进行打印。例如：

```
my $file = shift;
local $/ = ",";
open my $fh, "<", $file or die $!;
my $count;
while (<$fh>) { $count++ }
$count = int(($count/2)+0.5);
open $fh, "<", $file or die $!;
while ($count-- > 0) { <$fh> };
while (<$fh>) { print } 
```

当然，这些输出需要重定向，例如：

```
perl script.pl oldfile > newfile 
```

您可能还喜欢该[`Tie::File`](http://search.cpan.org/perldoc?Tie%3a%3aFile)模块。例如：

```
use strict;
use warnings;
use Tie::File;

my $file = shift;
tie @array, 'Tie::File', $file or die $!;
my $half = int((@array/2)+0.5);
splice @array, 0, $half;
untie @array; 
```

请注意，这样做的影响是不可逆的，因此请在尝试之前进行备份。即使对于大文件，它也被认为是有效的，并且不会将文件读入内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:34:23.180

很大程度上取决于将数据添加到文件的方式和时间。数据是否每天添加一次？每小时一次？连续？在手动的基础上？您可以在重新构建数据文件时阻止将新数据添加到文件中吗？文件是在写入过程中持续打开还是每次添加新数据时都重新打开？

更好的方法是将新数据写入新文件。例如，如果您想每天管理数据，请让编写器进程根据当前日期将新数据写入文件。例如，2012-12-11 写入的数据被写入文件`data-2012-12-11`等。

然后，您可以通过简单地删除文件来管理您的数据。要遍历所有数据，您可以使用 perl 的 globbing 功能：

```
@ARGV = glob("data-*");
while (<>) {
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:07:50.423

不可能从文件的开头删除。它仅来自文件的末尾。为了有效地从文件的开头删除，必须重写整个文件（例如，通过创建一个包含要保留的部分的新文件，然后在旧文件上重命名新文件）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T19:36:39.240

这取决于所有记录是在一行中（使您的 .csv 类似于列表）还是多行（使您的 .csv 类似于表）。

如果是前者，那么您概述的方法将可以正常工作。这可以解决问题：

```
use strict;
use POSIX;

my $filename = "somecsvfilename.csv";
open (IN, "<", $filename);
my $fulltext;
while (<IN>) {
    chomp;
    $fulltext .= $_;
}
close IN;

my @data_segments = split(",", $fulltext);
my $num_commas = @data_segments;
my $num_to_delete = floor($num_commas/2);

open (OUT, ">", $filename);
my $i = $num_to_delete;
while ($i < $num_commas) {
    print OUT $data_segments[$i];
    if ($i != ($num_commas - 1)) {print OUT ","}
    $i++;
}
close OUT; 
```

如果您的数据实际上是一个表格，您将需要使用 Text::CSV 之类的东西，并在输出数据之前删除行数组的前半部分。您可能需要考虑保留第一行，因为它可能包含标题数据......没有看到您的输入，很难说什么是最好的。

# web-services - Jersey 1.16：如何在浏览器中查看 xsd？

> ID：13826703
> 
> 赞同：1
> 
> 时间：2012-12-11T19:00:36.923
> 
> 标签：web-services, xsd, jersey

我一直在努力让我的项目的 XSD 显示在浏览器中。我已经创建了 WADL，如果可能的话，我只需要 XSD 来响应和请求。有谁知道如何做到这一点？XSD 与 Web 服务位于单独的项目中，但如果需要，可以位于 Web 服务中。Web 服务依赖于 XSD 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:19:59.433

解决了我的问题。我刚刚使用了 Jersey 生成的 xsd。它没有为我生成 xsd 的原因是 Java 类中的方法传递了一个字符串，而不是由 xsd 创建的 JAXB 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T04:52:23.730

“浏览器”是指现成的 Web 浏览器吗？

如果是这样，一种解决方案是利用 XSD 模式文档是 XML 文档这一事实，通过给它们一个 xml 样式表处理指令和一个样式表使它们显示在 Web 浏览器中。举个例子：W3C XML Schema WG 使用[XSD 测试套件的模式来](http://www.w3.org/XML/2004/xml-schema-test-suite/AnnotatedTSSchema.xsd)做到这一点；[服务建模语言工作组对他们的架构](http://www.w3.org/2008/09/sml-schema.xsd)做了同样的事情。（[两个 WG 使用的样式表](http://www.w3.org/XML/2004/xml-schema-test-suite/xsd.xsl)相同，可在 W3C 文档和软件许可下获得。）

# jquery - 标题为空时如何禁用提示？

> ID：13826704
> 
> 赞同：1
> 
> 时间：2012-12-11T19:00:37.837
> 
> 标签：jquery, cluetip

如果标题为空，则提示提示将显示一个空的“div”。标题为空时如何禁用提示？

**jQuery：**

```
$(document).ready(function () {
        $('a.myClass').cluetip({
            splitTitle: '|',
            showTitle: false,                
            width: 400,
            tracking:true
        });
    }); 
```

**html:**

```
<a class="myClass" title="" >Sample Text</a>
<a class="myClass" title="Samle Title" >Sample Text2</a> 
```

当出现标题时，提示提示正确显示。但是当标题为空时，不应显示线索提示（当前显示一个空的 div）。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:02:33.717

只需绑定到*具有*标题（或非空标题）的锚点：

```
 // with title attribute present
   $('a[title].myClass').cluetip({
        splitTitle: '|',
        showTitle: false,                
        width: 400,
        tracking:true
    });

   // with an non-empty title
   $('a[title!=""].myClass').cluetip({
        splitTitle: '|',
        showTitle: false,                
        width: 400,
        tracking:true
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:08:04.817

使用过滤器功能过滤掉没有标题或空标题的锚点

```
$('a.myClass').filter(function() {
    return this.title !== '';
})​.cluetip({
    splitTitle: '|',
    showTitle: false,                
    width: 400,
    tracking:true
}); 
```

[http://jsfiddle.net/a9ECE/](http://jsfiddle.net/a9ECE/)

# java - 为什么 cglib 调用 MethodInterceptor 回调失败？

> ID：13826705
> 
> 赞同：1
> 
> 时间：2012-12-11T19:00:42.377
> 
> 标签：java, mockito, cglib

在下面显示的 unittest 类中，一个测试失败，另一个测试成功。这两个测试都创建了一个`CGLIB`带有拦截器模拟的对象，并尝试验证拦截器是否与之交互。测试在使用 CGLIB 动态子类化的类上有所不同。成功的测试子类化一个普通的 Java 接口；失败的子类是一个动态子类（使用创建`Mockito`）。为什么第一次测试失败了？

谢谢。

```
public class ATest {

    @Test
    // This test fails.
    public void cannotCallMethodOnMockWrapper() throws Throwable {
        final Class<? extends Bar> c = Mockito.mock(Bar.class).getClass();
        verifyInterceptorIsInvokedOnCallToObjectOfEnhanced(c);
    }

    @Test
    // This test succeeds.
    public void interceptorIsCalled() throws Throwable {
        final Class<? extends Bar> c = Bar.class;
        verifyInterceptorIsInvokedOnCallToObjectOfEnhanced(c);
    }

    private void verifyInterceptorIsInvokedOnCallToObjectOfEnhanced(
            final Class<? extends Bar> c) throws Throwable {
        final MethodInterceptor interceptor = Mockito.mock(
                MethodInterceptor.class);
        final Bar wrapper = (Bar) Enhancer.create(c, interceptor);

        // Here is where the failing test chokes with exception:
        // NoSuchMethodError
        wrapper.foo();

        verifyInterceptIsCalledOn(interceptor);
    }

    private void verifyInterceptIsCalledOn(
            final MethodInterceptor interceptor) throws Throwable {
        verify(interceptor).intercept(any(), any(Method.class), 
                any(Object[].class), any(MethodProxy.class));
    }

    public static interface Bar {
        void foo();
    }

} 
```

**更新：**

失败的堆栈跟踪

```
java.lang.NoSuchMethodError: java.lang.Object.foo()V
    at ATest$Bar$$EnhancerByMockitoWithCGLIB$$2e1d601f.foo(<generated>)
    at ATest.verifyInterceptorIsInvokedOnCallToObjectOfEnhanced(ATest.java:37)
    at ATest.cannotCallMethodOnMockWrapper(ATest.java:19) 
```

此外，关于 Mockito 模拟是否是 CGLIB 增强类，下面的测试（失败）似乎表明它不是：

```
public class ATest {

    @Test
    public void mockitoMockIsCGLIBEnhanced() {
        assertTrue(Enhancer.isEnhanced(Mockito.mock(Bar.class).getClass()));
    }

    public static interface Bar {
        void foo();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:26:02.677

如果没有堆栈跟踪，我会假设你有一个`net.sf.cglib.core.CodeGenerationException`可能的原因，比如`InvocationTargetException`or `ClassFormatError`，

发生这种情况是因为 CGLIB 无法增强它自己创建的已经增强的类。由于 Mockito 在 JVM 内部使用 CGLIB，因此您无法增强 Mockito 类。你需要增强原来的类。*另外，即使回调可能是您需要传递给生成的类的实例，所以通过创建自己的增强器，您没有上层类的 Mockito 回调。所以 mockito 模拟功能甚至不起作用。无论如何，我偏离了这个话题。*

所以基本上你不能用 CGLIB 增强一个增强类，如果这个问题在运行时发生，因为你传递了一个模拟，我相信你应该有这样的代码，检查它是否被增强，如果是，使用超类（原始类）和/或接口：

```
public class CGLIBEnhancerEnhancer implements TypeEnhancer {
    public void Object enhance(Object objectCandidateToEnhance, MethodInterceptor interceptor) {
        Class classCandidateToEnhance = classCandidateToEnhance.getClass();
        if(Enhancer.isEnhanced(classCandidateToEnhance)
           || Mockito.mockingDetails(objectCandidateToEnhance).isMock()) {
            // safe with CGLIB (2.x) enhanced class 
            return (Bar) Enhancer.create(
                    classCandidateToEnhance.getSuperclass(),
                    classCandidateToEnhance.getInterfaces(),
                    interceptor
                );
        } else
            return (Bar) Enhancer.create(classCandidateToEnhance, interceptor);
        }
    }
} 
```

**编辑：**我运行了给定的示例，它确实给了我`CodeGenerationException`，你可以在这个答案的末尾看到。尽管可能取决于环境，但您可以看到与您发布的堆栈跟踪不同的堆栈跟踪。

鉴于您的例外情况，我相信您在运行时可能会遇到如何创建双重增强类的问题。由于堆栈跟踪表明该实例甚至没有 foo 方法，因此该对象（这似乎是一个真正的 mockito 模拟）是从错误的类型生成的。我会查看 Enhancer 的 API 以正确使用类型和接口来创建增强类，您可以使用的新实例`Enhancer`或使用静态方法。

此外，如果您自己证明拦截器，并且您想要执行给定实例的行为（无论是否模拟），您应该制作您的拦截器，使其包含对原始对象的引用。

**编辑 2：**实际上，由于技术原因，Mockito 正在重新打包/jarjar/内联 CGLIB，这意味着`net.sf.cglib.proxy.Enhancer`无法检测到 mockito 模拟。相反，应该使用 1.9.5 中新引入的 API`Mockito.mockingDetails(instance).isMock()`来检测 mockito mock。或者使用 repackaged/jarjared/inlined `org.mockito.cglib.proxy.Enhancer`。最后，您需要在类路径中使用 Mockito 来检测 Mockito 模拟。

希望有帮助

```
org.mockito.cglib.core.CodeGenerationException: java.lang.reflect.InvocationTargetException-->null
    at org.mockito.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:238)
    at org.mockito.cglib.proxy.Enhancer.createHelper(Enhancer.java:378)
    at org.mockito.cglib.proxy.Enhancer.create(Enhancer.java:286)
    at org.mockito.cglib.proxy.Enhancer.create(Enhancer.java:664)
    at ATest.verifyInterceptorIsInvokedOnCallToObjectOfEnhanced(ATest.java:32)
    at ATest.cannotCallMethodOnMockWrapper(ATest.java:18)
    ... removed
    at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    ... removed
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at org.mockito.cglib.core.ReflectUtils.defineClass(ReflectUtils.java:385)
    at org.mockito.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:220)
    ... 31 more
Caused by: java.lang.ClassFormatError: Duplicate method name&signature in class file ATest$Bar$$EnhancerByMockitoWithCGLIB$$58a2468b$$EnhancerByCGLIB$$9232d1df
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    ... 37 more 
```

# javascript - 查找有效的电话号码并将其包装在锚标记中 (JavaScript)

> ID：13826706
> 
> 赞同：0
> 
> 时间：2012-12-11T19:00:43.950
> 
> 标签：javascript, regex

我知道那里有一些类似的问题，但我无法成功调整我从[类似](https://stackoverflow.com/questions/11661408/jquery-how-to-wrap-regex-matched-plain-text-in-an-anchor-tag) [问题](https://stackoverflow.com/questions/9309763/jquery-selector-contains-use-regular-expressions)中看到的代码。

也许最大的不同是我不是在尝试搜索 DOM 中的实际文本节点，而是将字符串存储在一个对象中。我有一个`listings`对象，我正在使用来自分类列表 API 的数据填充该对象。所以我想获取每个`listings[i].body`属性，使用正则表达式查找任何电话号码，然后用`<a href="tel:x">`. 然后，这些相同的数据将用于填充 Google 地图标记和信息窗口。

# ruby - 如何重构 generate_boards 方法以实现所需的输出？

> ID：13826713
> 
> 赞同：0
> 
> 时间：2012-12-11T19:00:58.287
> 
> 标签：ruby

更新：我有答案...我会在几分钟后将其发布...谢谢您的时间。

我正在尝试输出包含一系列其他哈希的哈希。我可以在命令行上单独打印每个哈希值，但我需要将它们放在一个变量中，并通过和索引作为名称值对进行引用。我已经为此工作了好几天，非常感谢任何帮助。

PS我在Ruby中仍然很笨，所以如果你有一个可能的答案，你能否准确地证明我需要在有问题的方法中执行你的答案/线索......也许通过github gist。

这是整个模块......方法'generate_boards'中存在问题......

[https://github.com/thefonso/rubytactoe/blob/minimax_1/lib/TTT_pseudo_code.rb](https://github.com/thefonso/rubytactoe/blob/minimax_1/lib/TTT_pseudo_code.rb)

你可以看到我在这个测试中通过了有问题的方法......

[https://github.com/thefonso/rubytactoe/blob/minimax_1/spec/TTT_pseudo_code_spec.rb](https://github.com/thefonso/rubytactoe/blob/minimax_1/spec/TTT_pseudo_code_spec.rb)

这是我目前得到的输出......

```
 {:a1=>"X", :a2=>"X", :a3=>"O", :b1=>"O", :b2=>"O", :b3=>"O", :c1=>"O", :c2=>"X", :c3=>"X"}
 {:a1=>"X", :a2=>"X", :a3=>"O", :b1=>"O", :b2=>"O", :b3=>"O", :c1=>"O", :c2=>"X", :c3=>" "}
 {:a1=>"X", :a2=>"X", :a3=>"O", :b1=>"O", :b2=>"O", :b3=>"X", :c1=>"O", :c2=>"X", :c3=>"O"}
 {:a1=>"X", :a2=>"X", :a3=>"O", :b1=>"O", :b2=>"O", :b3=>" ", :c1=>"O", :c2=>"X", :c3=>"O"} 
```

我想要的，应该是这样的......

```
 boards = {
   :vb01 => {:a1=>"X", :a2=>"X", :a3=>"O", :b1=>"O", :b2=>"O", :b3=>"O", :c1=>"O", :c2=>"X", :c3=>"X"},
   :vb02 => {:a1=>"X", :a2=>"X", :a3=>"O", :b1=>"O", :b2=>"O", :b3=>"O", :c1=>"O", :c2=>"X", :c3=>" "},
   :vb03 => {:a1=>"X", :a2=>"X", :a3=>"O", :b1=>"O", :b2=>"O", :b3=>"X", :c1=>"O", :c2=>"X", :c3=>"O"},
   :vb04 => {:a1=>"X", :a2=>"X", :a3=>"O", :b1=>"O", :b2=>"O", :b3=>" ", :c1=>"O", :c2=>"X", :c3=>"O"}
 } 
```

这几天我一直在和这件事作斗争……谢谢你的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:48:22.370

所以，我一直在看你的 TTT_pseudo_code.rb 文件，我不得不承认，我现在有点迷路了。一方面，我很困惑为什么你有一个模块，但是你包含了一个初始化方法，你在其中设置类实例变量（@@vars）。为什么不做一门课并完成它呢？

但是，抛开这些不谈，让我们把你现在拥有的东西拿来考虑如何把它变成你想要的东西。据推测，您所拥有的是一个哈希数组。您可以使用 Ruby Enumerable 方法注入将该数组转换为哈希，如下所示：

```
array_of_hashes = [
  {:a1=>"X", :a2=>"X", :a3=>"O", :b1=>"O", :b2=>"O", :b3=>"O", :c1=>"O", :c2=>"X", :c3=>"X"},
  {:a1=>"X", :a2=>"X", :a3=>"O", :b1=>"O", :b2=>"O", :b3=>"O", :c1=>"O", :c2=>"X", :c3=>" "},
  {:a1=>"X", :a2=>"X", :a3=>"O", :b1=>"O", :b2=>"O", :b3=>"X", :c1=>"O", :c2=>"X", :c3=>"O"},
  {:a1=>"X", :a2=>"X", :a3=>"O", :b1=>"O", :b2=>"O", :b3=>" ", :c1=>"O", :c2=>"X", :c3=>"O"}
]

i = 1
hash_of_hashes = array_of_hashes.inject({}) do |hofh, hash|
  hofh["vb0#{i}".to_sym] = hash
  hofh
end 
```

这应该给你一个散列，将你所拥有的东西转换成你在上面的问题中所要求的东西。

希望有帮助。

戴夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:08:33.483

好的，所以答案是这个重构的 generate_boards 方法...注意 @virtual_board_hash[@i] = new_board.grid

```
def generate_boards(board, player)
  virtual_board = board.dup
  new_board_hash = {}
  empty_spaces = virtual_board.grid.select{ |k, v| v == " " }.keys

  empty_spaces.each do |space|

    cloned_board = Board.new
    cloned_board.grid = board.grid.clone

    if player == 'O'
      new_board = move_as_somebody(cloned_board, 'X', space)
      new_player = 'X'
       @virtual_board_hash[@i] = new_board.grid
    else
      new_board = move_as_somebody(cloned_board, 'O', space)
      new_player = 'O'
       @virtual_board_hash[@i] = new_board.grid
    end
    generate_boards(new_board, new_player)

  end
  return @virtual_board_hash
end 
```

这个 move_as_somebody 方法..注意@i

```
def move_as_somebody(board, player, empty_space)      
  board.grid[empty_space] = player
  @i+=1
  return board
end 
```

但也在这个初始化方法中......我知道，我知道......我在模块中使用了一个初始化方法......为什么不把它称为一个类呢？好吧，我这样做只是为了运行测试，并且在测试内部我将此模块提供给一个类。

```
def initialize
  @virtual_board_hash = {}
  @count = 0
  @i = 0
end 
```

在实际的游戏代码中，所有这些都只是作为一个模块调用，所以我将在未来的调用方法“minimax”中初始化这些变量，该方法将作用于生成的输出哈希。

# php - 我无法在 PHP 和 MySQL 中创建我的数据库

> ID：13826716
> 
> 赞同：-4
> 
> 时间：2012-12-11T19:01:02.983
> 
> 标签：php, mysql, database

我正在使用 WAMP 并编写了一个 php 脚本来连接到数据库我不认为这是代码，因为我得到一个错误，`SCREAM: Error suppression ignored for`然后得到几个不同的错误，有人说：

```
Warning: mysql_connect(): MySQL server has gone away in C:\wamp\www\php.php

Warning: mysql_connect(): Error while reading greeting packet. PID=9044 in C:\wamp\www\php.php

Fatal error: Maximum execution time of 30 seconds exceeded in C:\wamp\www\php.php 
```

这是我的代码：

```
<?php
$con = mysql_connect("127.0.0.1:80",'user','');
if(!$con){
    die( 'error:' . mysql_error());
}
$db = 'CREATE DATABASE db_one';
if(mysql_query($db,$con)){
    echo 'data base created';
}
else {
    echo 'Err:' . mysql_error();
}
$table = 'CREATE TABLE persons ( fname varchar (15),lname varchar(15), age int)';
mysql_query($table,$con);
mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:15:01.690

从连接中删除端口声明。

```
$con = mysql_connect("127.0.0.1",'user',''); 
```

或者改成3306（mysql默认）

# ios - 如何在最新的 iOS6 中将地图区域限制在一个国家/地区？

> ID：13826719
> 
> 赞同：5
> 
> 时间：2012-12-11T19:01:07.027
> 
> 标签：ios, ios6, mapkit, limit, region

我正在使用 mapkit为 iOS **6制作应用程序。**我想将地图的边界限制在特定的地区/国家。有没有办法做到这一点？

问题已经在这里讨论过： [如何在 iOS 中将地图区域限制为一个国家/地区？](https://stackoverflow.com/questions/12400062/how-can-i-limit-the-map-area-to-only-one-country-in-ios) 唯一的区别是可能的解决方案适用于 ios **5**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T22:18:52.590

您需要创建一个`CLLocationCorrdinate2D`然后使用它来创建一个区域，然后将您的地图视图设置为该区域。以下是设置为爱尔兰的地图示例：

```
CLLocationCoordinate2D ireland = CLLocationCoordinate2DMake(53.317749,-7.959643);
[self.mapView setRegion: MKCoordinateRegionMakeWithDistance(ireland, 500000, 30000)];
[self.mapView setMapType: MKMapTypeStandard]; 
```

根据您要测试的内容，它看起来像这样： ![在此处输入图像描述](../Images/4905553d2afda33fc4af32e8140c0669.png) 最后 2 个 RegionMakeWithDistance 数字是跨度的纬度/经度，以米为单位。您创建的 CLLocation 是地图的中心点。如果您只想限制在该区域，您需要关闭地图视图的滚动和缩放功能。

# java - Java HashMap 实现在 Entry 类中有“下一个”成员。它有什么用

> ID：13826720
> 
> 赞同：7
> 
> 时间：2012-12-11T19:01:22.033
> 
> 标签：java, hashmap

Java HashMap 实现在 Entry 私有类中具有“下一个”成员。因为，键的新值将覆盖旧值，Entry 类中“下一个”成员的用途是什么。

```
static class Entry<K,V> implements Map.Entry<K,V> {
        final K key;
        V value;
        Entry<K,V> next;
        final int hash;

        /**
         * Creates new entry.
         */
        Entry(int h, K k, V v, Entry<K,V> n) {
            value = v;
            next = n;
            key = k;
            hash = h;
        }
   .....

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T19:03:12.570

`next`指的是同一个桶中的下一个条目。

您可以在每个存储桶中有多个条目 - 一个存储桶包含哈希码等于 some mod 2^n for some的*所有*条目，而不仅仅是一个特定键的条目。`i``n`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T19:03:39.037

如果多个项目散列到同一个存储桶，则存储桶需要能够包含所有项目，因此在许多实现中它将成为某种集合，如列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:04:38.357

它用于将条目链接在一起。

# php - 限制注册新用户名的字母数量

> ID：13826721
> 
> 赞同：-2
> 
> 时间：2012-12-11T19:01:24.000
> 
> 标签：php

我有一个论坛，访问者可以注册超过 20 个字母的用户名，我如何拒绝这些访问者使用（长）用户名注册？

注册表使用PHP语言。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:04:22.190

您可以将`maxlength`属性添加到 HTML 表单作为第一步。

```
<input type="text" name="username" maxlength="20" /> 
```

在 PHP 端，您可以使用`strlen`来检查传递参数的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:04:28.710

做一个条件。

```
if (strlen($_POST['whatever-username-field']) > 20){
   // not allowed to proceed 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:04:36.253

使用`strlen()`应该表示*字符串长度*的函数，如下所示：

```
if(strlen($username) > 20) {echo "You can not enter more than 20 characters";} 
```

或者在您的 html 表单中使用最大长度属性。像：

```
 Username: <input type="text" name="usrname" maxlength="20" /> 
```

# macros - 如何为 Clang 定义具有多个编译指示的宏？

> ID：13826722
> 
> 赞同：21
> 
> 时间：2012-12-11T19:01:30.043
> 
> 标签：macros, clang, pragma

我想添加一些宏来简化（取消）围绕我们在内部弃用的例程设置特定警告。

我想把这个：

```
#pragma clang diagnostic push
#pragma clang diagnostic warning "-Wdeprecated-declarations"

void Foo() __attribute__((deprecated("Warning: deprecated routine")))

#pragma clang diagnostic pop 
```

进入这个：

```
MY_DEPRECATED_BEGIN

void Foo() MY_DEPRECATED

MY_DEPRECATED_END 
```

该`MY_DEPRECATED_BEGIN`宏给我带来了麻烦，因为我必须在一个宏中指定*两个编译指示。*这可以做到吗？

（仅使用 MY_DEPRECATED 宏实现相同效果的解决方案的奖励积分！）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-23T01:43:44.200

```
void Foo() __attribute__((deprecated));

#define MY_DEPRECATED_BEGIN \
    _Pragma("clang diagnostic push") \
    _Pragma("clang diagnostic warning \"-Wdeprecated-declarations\"")

int main()
{
MY_DEPRECATED_BEGIN
    Foo();
#pragma clang diagnostic pop
} 
```

对您的技术问题的简短回答是 C99 提供了`_Pragma("foo")`构造，它相当于`#pragma foo`但稍晚处理，并且不需要单独在线。

你的另一个问题是它`-Wdeprecated-declarations`没有做你认为它做的事情。简单地将函数*声明*为已弃用永远不会给您诊断，因为*应该*使用（通常在头文件中）`__attribute__((deprecated))`。导致诊断的原因是您是否*使用*了不推荐使用的功能 - 并且*此时*设置变得相关。***`-Wdeprecated`***

 ***如果您真的只想弃用`Foo`iff`MY_DEPRECATED`设置，那么正确的方法*是*

```
#ifdef MY_DEPRECATED
 #define ATTRIBUTE_DEPRECATED __attribute__((deprecated))
#else
 #define ATTRIBUTE_DEPRECATED
#endif

void Foo() ATTRIBUTE_DEPRECATED; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-09-11T04:31:37.653

您可以使用此解决方案：

```
#define NS_SUPPRESS_DIRECT_USE(expr)   _Pragma("clang diagnostic push") \
                                       _Pragma("clang diagnostic ignored \"-Wdeprecated-declarations\"")\
                                       expr\
                                       _Pragma("clang diagnostic pop") 
```

然后只需添加它：

```
NS_SUPPRESS_DIRECT_USE(
                      Foo();
                      ); 
```***

# java - 使用 JMS 的主工作者模式

> ID：13826723
> 
> 赞同：2
> 
> 时间：2012-12-11T19:01:32.203
> 
> 标签：java, design-patterns, jms

我们正在开发一个应用程序，该应用程序需要处理存储在多行数据库中的巨大文件。可以将处理拆分到多个 JMS 客户端，以便每个客户端都有自己的共享来使用并独立进行处理。如何确定是否所有 JMS 客户端都完成了他们的部分？一旦所有 JMS 客户端完成其任务，我们需要触发处理流程中的另一个步骤。我们使用 MDB 作为 JMS 客户端。

事实上，我们正在收集数据库上的单个任务状态。但是没有这样的大师。流程看起来像这样。

1.  系统的一部分以块的形式接收文件并保存在数据库中。

2.  下一步将这个文件逻辑拆分为 N 个分区，并将分区的元数据作为 JMS 消息发送。

3.  然后 JMS 客户端处理他们的文件部分，当他们完成时，他们在 DB 中的另一个表上更新任务的状态。

但是怎么可能触发下一步呢？一个 JMS 客户端如何知道所有其他客户端已完成其部分。或者我怎么能在这里雇佣一个大师？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:05:20.833

您可以在应用程序级别执行此操作。每个工作人员都应该在完成任务后创建通知。您可以将通知推送到特殊的 JMS 队列或将其存储在数据库中。这取决于您的应用程序。通知应包含创建任务的我的经理创建的任务 ID。因此其他组件（或管理器）可以检查是否所有创建的任务都已终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:07:04.947

使用 Blackboard 架构模式为所有子流程注册部分解决方案可能很有用。看看这篇[文章](http://www.andypatterns.com/index.php/blog/blackboard_architectural_pattern/)，或谷歌它以获取更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T19:33:44.987

我会让 JMS 客户端尽可能快地处理数据。例如，创建一个名为`FooDataSourceRequest`this 的队列，客户端可以在其中发布消息以请求一些数据，然后创建另一个名为的队列`FoodDataSourceResponse`，其中放置带有数据的响应消息。

您可以使用 jms 回复队列或关联 ID 让数据消费者获取他们的数据。通过这种方式，您可以拥有一个负责跟踪要处理的下一个块的 JMS 生产者。

有趣的部分是跟踪哪些块已处理，哪些未处理，您可能需要使用分布式事务将数据放入队列并更新数据库......等等？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T20:27:53.913

这篇[DZone 发布的文章](http://java.dzone.com/articles/a-simple-clustered-task-distri)概述了如何使用 JGroups 来实现类似的模型。作者的意图是展示使用 JGroups 优于 JMS 实现的一些好处，但作为一种通用模式，它有很好的文档记录，因此您可能会发现它很有用。

# content-security-policy - 当内容安全政策到位时，我如何显示视频内容？

> ID：13826725
> 
> 赞同：5
> 
> 时间：2012-12-11T19:01:35.890
> 
> 标签：content-security-policy

我希望有一个简单的答案。

我正在使用“fancybox”工具在页面上嵌入来自 Vimeo 的视频。Fancybox 本质上创建了一个 iFrame 并嵌入了 Vimeo 播放器。它适用于所有浏览器——直到我打开内容安全策略。然后 ID 工作（因为它没有实现 CSP），但 Chrome 和 Firefox 只是挂起显示的“正在加载”图像。

我试过这个 CSP：

```
<add header="Content-Security-Policy" value="default-src 'self'; media-src 'self' http://player.vimeo.com; frame-src 'self' http://player.vimeo.com; " />
<add header="X-Content-Security-Policy" value="default-src 'self'; media-src 'self' http://player.vimeo.com; frame-src 'self' http://player.vimeo.com; " />
<add header="X-WebKit-CSP" value="default-src 'self'; media-src 'self' http://player.vimeo.com; frame-src 'self' http://player.vimeo.com; " /> 
```

当然，我的想法是我允许媒体和我的 iframe 都来自 vimeo。但它不起作用。有谁知道为什么？

更新：我删除了仅显示视频的页面的 CSP，并使用 Google 的开发人员工具查看了内容。我发现 Vimeo 从其他 Vimeo 子域、vimeocdn.com、conviva.com、lphbs.com 甚至亚马逊的 aws 中引入了大量其他内容。所以 - 如果您使用 Vimeo（和 YouTube？），您要么有很长的外部站点列表，要么只是不使用 CSP？任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T23:28:29.167

是的，最好的选择是添加一长串主机，但不要删除 CSP！

根据您的政策，删除 CSP 意味着以下内容：

*   您允许内联脚本以及对 eval 的危险调用 - 实质上为反射/存储的 XSS 开辟了另一个机会
*   框架可以从任何地方注入
*   图像、样式、小程序等可以从任何地方加载。

通常您需要允许内联脚本/评估，但内容安全策略仍然非常有效。

您还可以将标头的仅报告形式与 report-uri 结合使用，以收集您需要列入白名单的可能地点的列表。

# c# - 关于 XmlSerializer 的问题

> ID：13826733
> 
> 赞同：1
> 
> 时间：2012-12-11T19:02:07.303
> 
> 标签：c#, .net, xsd, xmlserializer

这对我会更有帮助；如果您确实回答了以下问题。

1.  XmlSerializer 是基于顺序的吗？例如）我的班级/ XML 如下所示。属性顺序改变。仍然这样做序列化/反序列化？

    ```
     public class Movie
       {
        public string Title  { get; set; }
        public int Rating    { get; set; }
       } 
    ```

    XML就像

    ```
     <?xml version="1.0" encoding="utf-8"?>
      <Movie xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
                 xmlns:xsd="http://www.w3.org/2001/XMLSchema">
         <Rating>6.9</Rating>
         <Title>Starship Troopers</Title>
      </Movie> 
    ```

2.  反序列化过程中会发生什么；如果我的班级没有属性（例如标题）但 xml 有该元素？

3.  假设我有超类（A）和那个超类（A）的两个子类（B，C）。在运行时，当我得到 xml 响应时，如何确定应该在下面传递哪个对象？因为我不知道 xml 的 RootElement（B 或 C）是什么？

    ```
     XmlSerializer ser = new XmlSerializer(typeof(B or C)); ?? 
    ```

* * *

克服 Q2 的一种**[解决方案](https://stackoverflow.com/questions/13827140/use-of-dom-sax-instead-of-xmlserializer-over-httpwebresponse)**

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:32:19.150

对问题 2 的回答：您将收到 InvalidOperationException。

> 反序列化过程中发生错误。原始异常可使用 InnerException 属性获得。

看这里：[msdn](http://msdn.microsoft.com/en-us/library/tz8csy73.aspx)

对问题 3 的回答：

您的问题的解决方案是实现 IXmlSerializable 接口。这将允许您控制整个序列化过程。看看这篇 codeproject 文章 - 这是一个很好的开始

看这里：[代码项目](http://www.codeproject.com/Articles/8644/XmlSerializer-and-not-expected-Inherited-Types)

# qt - Qt 创建者 + MITK (Linux)

> ID：13826735
> 
> 赞同：2
> 
> 时间：2012-12-11T19:02:15.080
> 
> 标签：qt, qt-creator, vtk, itk, mitk

我正在尝试将**MITK 与 Qt Creator**一起使用。我已经成功编译并使用了带有 ccmake 的 VTK 和 ITK。

我已经在**超级构建模式下**编译了 MITK （它下载 CTK、VTK、ITK 等）。然后我已经配置好了。我用 make 编译（大约两个小时）。

我试过*make install*，但 MITK 不能那样工作。

使用 GDCM、ITK、VTK，我可以在*/usr/local/include中找到头文件并在**/usr/local/lib*中找到共享库，因此我将它们包含在 Qt Creator 项目中的 .pro 文件中并开始工作。

我一直在查看*MITK-superbuild*文件夹-编译后-，但我找不到，例如*QmitkRenderWindow.h*，这是我需要的第一个。

我正在研究 MITK 文档： [http ://docs.mitk.org/nightly-qt4/BuildInstructionsPage.html](http://docs.mitk.org/nightly-qt4/BuildInstructionsPage.html)

我有一个带有 .pro 文件的现有项目，所以我不知道如何继续。

编辑：好的，如下： [http](http://doc.qt.digia.com/qtcreator-2.4/creator-project-cmake.html) ://doc.qt.digia.com/qtcreator-2.4/creator-project-cmake.html 和上一个链接，我创建了一个*CMakeLists.txt*并将构建目录更改为*MITK-build*文件夹。

现在我已经自动完成将 .h 标头添加到代码中。我必须导航到子文件夹。

MITK-build 是要添加的正确文件夹吗？我这样说是因为*QmitkRenderWindow.h*不存在，它在*MITK-src*中，我在编译 MITK 之前已经下载了它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:17:51.323

两个替代建议（我无法尝试，因为我现在坚持使用其他配置的 MITK 构建）基于我过去使用 Creator for ITK 和 VTK 项目制作项目的方式

1.  如果您想使用 .pro 文件使用 MITK，我可以提供一个线索（基于 .pro 的 ITK/VTK 设置）添加所有库的路径和头文件路径，如下所示（我用于 VTK）

    INCLUDEPATH *= E:/DebugLibrary/VTK E:/DebugLibrary/VTK/Common E:/DebugLibrary/VTK/Filtering E:/DebugLibrary/VTK/GenericFiltering E:/DebugLibrary/VTK/Graphics E:/DebugLibrary/VTK/GUISupport/ Qt E:/DebugLibrary/VTK/Hybrid E:/DebugLibrary/VTK/Imaging E:/DebugLibrary/VTK/IO E:/DebugLibrary/VTK/Parallel E:/DebugLibrary/VTK/Rendering E:/DebugLibrary/VTK/Utilities E :/DebugLibrary/VTK/VolumeRendering E:/DebugLibrary/VTK/Widgets E:/DebugLibrary/VTK/Wrapping

    LIBS *= -LE:/DebugLibrary/VTKBin/bin/release -lvtkCommon -lvtksys -lQVTK -lvtkWidgets -lvtkRendering -lvtkGraphics -lvtkImaging -lvtkIO -lvtkFiltering -lvtkDICOMParser -lvtkpng -lvtktiff -lvtkzlib -lvtkjpeg -lvtkexpat -lvtkNetCDF -lvtkexoIIc -lvtkfreetype -lvtkHybrid -lvtkVolumeRendering -lQVTKWidgetPlugin -lvtkGenericFiltering

2.  如果您想使用 Qt Creator + Cmake（在 Qt 中），只需选择 nmake 进行构建，然后选择 CMake 并构建项目（您不能在此处使用 qmake）。

正如我之前所说，我没有尝试过，但上述解决方案正在 Windows 上为我使用 VTK

希望这也可以帮助 [设置包含环境变量值的路径](https://stackoverflow.com/questions/1143354/set-include-path-with-environment-variable-value)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T10:31:19.837

Qt Creator 支持原生 CMake。MITK、VTK 和 ITK 由 CMake 管理。因此，要将 Qt Creator 与 CMake Projekt 一起使用，只需将文件*CMakeLists.txt*作为项目文件打开。（*文件->打开文件或项目...*）。正如您已经提到的，VTK/ITK/MITK 应该被构建为影子构建，因此源文件和构建文件被拆分在不同的目录中。加载 CMakeLists.txt 后，QtCreator 会询问您构建项目的目录。

在 MITK 项目的情况下，您必须区分超级构建和构建 MITK。由于您已经有一个超级构建，只需将构建目录更改为子目录*MITK-build*。要打开 superbuild-project，请选择上面的目录。请注意，在这两种情况下，您都可以使用相同的 CMakeLists.txt

顺便说一句，要配置您的构建，您可以使用非常好的 gui 程序*cmake-gui*，您可以在 linux（基于 apt）的包*cmake-qt-gui*中找到它。

希望对您有所帮助。=)

# android - 自定义 Toast 不适用于 ICS

> ID：13826736
> 
> 赞同：1
> 
> 时间：2012-12-11T19:02:15.767
> 
> 标签：android, android-layout

`Toast`我在一个模块中有一系列消息，`Toast`每次用户按下按钮时都会显示一个。为了减少排队时间，我只是将值传递给方法，以便它在完成预定的持续时间之前不会结束。

像这样：

```
dt("on button press");

private void dt(final String message) {

    TextView text = (TextView) layout.findViewById(R.id.totext);

    toast = new Toast(getApplicationContext());

    toast.setGravity(Gravity.BOTTOM, 0, 0);
    toast.setDuration(Toast.LENGTH_SHORT);
    toast.setView(layout);
    toast.cancel();
    text.setText(message);
    text.setTextSize(16);

    toast.show();

} 
```

我的问题是这段代码在 Gingerbread 和较低版本的 Android 上完美运行。但它不适用于 ICS 和 Jelly Bean？

有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T19:10:01.580

问题在于[`Toast.cancel()`](http://developer.android.com/reference/android/widget/Toast.html#cancel%28%29)你正在打电话。我相信，在 Honeycomb 之前，`cancel()` *只有*当它已经显示时才隐藏它。但是，在以后的实现中，它具有以下行为（重点是我的）：

> 如果它正在显示，请关闭视图，如果它还没有显示，**请不要显示它**。

您需要将调用移至`cancel()`（`new Toast()`当然，检查它是否是`null`第一个）：

```
private void dt(final String message) {

    TextView text = (TextView) layout.findViewById(R.id.totext);

    if (toast != null) {
        toast.cancel(); // Move me here!
    }
    toast = new Toast(getApplicationContext());

    toast.setGravity(Gravity.BOTTOM, 0, 0);
    toast.setDuration(Toast.LENGTH_SHORT);
    toast.setView(layout);
    text.setText(message);
    text.setTextSize(16);

    toast.show();

} 
```

# visual-studio - 日志在 64 位版本中出现在错误目录中 (VC 2012)

> ID：13826737
> 
> 赞同：0
> 
> 时间：2012-12-11T19:02:16.400
> 
> 标签：visual-studio, visual-c++

我目前正在将一些 32 位代码移植到 64 位（以及从 VS 2010 到 VS 2012）。为了能够生成 32 位和 64 位，我将以下内容放入属性文件（包含在所有项目文件中）：

```
<PropertyGroup>
    <CALRoot Condition=" '$(CALRoot)' == '' ">..\..\..</CALRoot>
    <CALBuildSubDir Condition=" '$(Platform)' == 'Win32' ">32bit</CALBuildSubDir>
    <CALBuildSubDir Condition=" '$(Platform)' == 'x64' ">64bit</CALBuildSubDir>
    <CALBuildDir>$(CALRoot)\Build\VC12.0-$(CALBuildSubDir)\</CALBuildDir>
    <OutDir>$(CALBuildDir)$(ExtraBuildDir)$(Configuration)\</OutDir>
    <IntDir>$(CALBuildDir)$(ExtraBuildDir)$(Configuration)\obj\$(TargetName)\</IntDir>
</PropertyGroup> 
```

当我用 构建时，一切 都按我`Platform = Win32`期望的方式工作：in`CALUtils.{dll, exp,ilk,lib,pdb}`和 `Build\VC12.0-32bit\Debug`其他一切（ 包括 `CALUtils.log`in这一个文件放错了位置。`Build\VC12.0-32bit\Debug\obj\CALUtils``Platform = x64``CALUtils.log``CALUtils.log``Build\VC12.0-\Debug\obj\CALUtils``Build\VC12.0-64bit\Debug``Build\VC12.0-64bit\Debug\obj\CALUtils`

我一直无法在项目文件或带有字符串的属性文件中找到任何其他位置`VC12.0-`，但也许还有其他东西在起作用。有没有人知道日志文件的名称中可能涉及哪些额外的变量，或者为什么或如何以不同的方式处理它（并且仅在 64 位版本中）？或者这是某个地方的错误？ect 文件。）

# c# - 如何在程序的 app.config 文件中存储文件路径？

> ID：13826740
> 
> 赞同：15
> 
> 时间：2012-12-11T19:02:24.560
> 
> 标签：c#, app-config, filepath, winapp

我编写了一个用于保存和读取 PDF 文件的 C# 程序。该程序将输出文件保存到本地计算机的 bin 文件夹中。我希望我的程序从另一台计算机访问文件。

我听说过将文件路径存储在`app.config`我的程序中，但我不知道该怎么做。

如何在程序的 app.config 文件中存储文件路径？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-11T20:36:39.510

`app.config`您可以使用以下格式将文件路径存储在文件中：

```
<configuration>
 <appSettings>
  <add key="Path" value="\\ComputerName\ShareName"/>
 </appSettings>
</configuration> 
```

然后，您可以使用`ConfigurationManager`该类读取存储在那里的应用程序设置。您必须`System.Configuration`在项目中添加对的引用，并在代码中引用它。

之后，您可以通过访问来读取您的路径`ConfigurationManager.AppSettings["Path"]`——它将是一个`string`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-04-27T00:02:57.090

我是一个完全的菜鸟，但我最近遇到了同样的问题，所以这就是我想出的。

解决方案是三个独立的步骤：

1.  如上面的答案所述，您将一个键值添加到`app.config`指向您的路径的位置：

    ```
     <configuration>
       <appSettings>
         <add key="Path" value="C:\text.txt"/>
       </appSettings>
     </configuration> 
    ```

2.  您需要 using 语句：

    ```
    using System.Configuration; 
    ```

除了这两个之外，您还需要对程序集的引用。

3.  `References`在中单击鼠标右键`Solution Explorer`。
4.  单击`Add Reference`。
5.  单击`Assemblies`并`Configuration`在搜索框中输入。
6.  打勾`System.Configuration`。

讯息

> 当前上下文中不存在 ConfigurationManager。

应该消失了，你有你的文件路径！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-16T19:56:17.877

首先：在您的解决方案中创建或添加 app.config：

```
<configuration>
   <appSettings>
     <add key="Path" value="C:\text.txt"/>
   </appSettings>
 </configuration> 
```

最后：在您的 winForm 中写入以下代码：

```
string str= System.Configuration.ConfigurationManager.AppSettings["Source"];
            MessageBox.Show(str);
MessageBox.Show(str); 
```

就是这样

# c# - 转换列表 > 加倍[][]

> ID：13826741
> 
> 赞同：2
> 
> 时间：2012-12-11T19:02:26.657
> 
> 标签：c#, linq

有没有办法从 LINQ 转换`List<List<int>>`为`double[][]`使用 LINQ？

我已经想出了如何从`List<List<int>>`到，`int[][]`但我被困在演员阵容上。这是我到目前为止所拥有的：

```
List<List<int>> ints = new List<List<int>>()
{
    new List<int>(){0, 1, 2},
    new List<int>(){0, 1, 2},
    new List<int>(){0, 1, 2},
};

// int[][]
ints.Select(x => x.ToArray()).ToArray(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T19:05:40.527

```
double[][] doubles = ints.Select(x => x.Select(y => (double)y).ToArray())
                         .ToArray(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T19:05:52.807

```
ints.Select(x => x.Select(y => (double)y).ToArray()).ToArray(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T19:07:25.673

你需要转换成双

```
ints.Select(x => x.Select(y => Convert.ToDouble(y)).ToArray()).ToArray() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T19:09:27.953

```
ints.Select(x => x.Select(Convert.ToDouble).ToArray()).ToArray(); 
```

# javascript - 如何启用 Greasemonkey 的“查找更新”上下文菜单

> ID：13826742
> 
> 赞同：4
> 
> 时间：2012-12-11T19:02:29.947
> 
> 标签：javascript, greasemonkey

我正在[编写](http://userscripts.org/scripts/review/153869)的第一个 Greasemonkey 脚本，所以我可能缺少一些非常简单的东西。google了一下，就是找不到。。。

我的脚本的元数据：

```
// ==UserScript==
// @name            Ordens de Batalha - MoD eBrasileiro
// @namespace       http://md-ebrasil.appspot.com/
// @description     Plugin para divulgação das ordens de batalha oficiais do eBrasil
// @include         http://www.erepublik.com/*
// @version         0.3.2
// @updateUrl       https://userscripts.org/scripts/source/153869.meta.js
// @downloadUrl     https://userscripts.org/scripts/source/153869.user.js
// @grant           GM_wait
// @grant           GM_xmlhttpRequest
// ==/UserScript== 
```

根据[文档](http://wiki.greasespot.net/Metadata_Block#.40downloadURL)，添加`@updateUrl`and`@downloadUrl`标签应该可以解决问题。但是 GM 中的“查找更新”上下文菜单没有为脚本启用（它是为我安装的其他人）：

![在此处输入图像描述](../Images/82fdf656e4fe0cc1eab864f32bb0f693.png)

我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T13:28:52.370

起初这看起来像一个错误，但不完全是。

您问题中的脚本使用：

```
// @updateUrl       https ...
// @downloadUrl     https ... 
```

[文档](http://wiki.greasespot.net/Metadata_Block)中没有说明，但 Greasemonkey 指令区分大小写！

因此，为了识别这些值，您必须使用：

```
// @updateURL       https ...
// @downloadURL     https ... 
```

当我更正代码中的情况时，“***查找更新***”菜单项变为活动状态。您*可能*需要卸载脚本，进行更改，然后重新安装。

* * *

在我看来，这对于 Greasemonkey 来说是一个糟糕的设计选择。这当然是一个重要的文档遗漏。您可以提交[功能请求](https://github.com/greasemonkey/greasemonkey/issues)以修复此区分大小写的问题。也许首席开发人员会同意这是一个问题。

# postgresql - 如何为每一列获取日期的最大值

> ID：13826743
> 
> 赞同：0
> 
> 时间：2012-12-11T19:02:29.503
> 
> 标签：postgresql

如何为每一列获取日期的最大值。

你好，对不起我的英语我会做一个简短的简历我的问题。

我正在使用 postgresql，我有一个带有一些列的表，重要的是：A、B、C 和 D，我还有另一个带有日期（F）的表。

我想为每个 a、b 和 c（一起）获取 D 的值，其中日期（F）是 a、b 和 c 的最大值。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:13:20.013

尝试：

```
SELECT GREATEST(A,B,C)
FROM table1 
```

它会给你最大的`A,B,C`。然后：

```
SELECT GREATEST(A,B,C), D
FROM table1
JOIN table2 ON GREATEST(A,B,C) = F 
```

详细信息：[最棒的](http://www.postgresql.org/docs/current/static/functions-conditional.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:10:37.447

试试这个。。

```
with cte as (
  select 1 as A, 1 as B, 1 as C, 'Hello' as D, '12/1/2012'::date as F
  union select 1,2,1,'Hello2','12/2/2012'
  union select 1,1,1,'Hello3','12/5/2012'
)
select a.*
from cte a
join (
    select A,B,C, MAX(F) F
    from cte
    group by A,B,C
) b
  on a.A = b.A
  and a.B = b.B
  and a.C = b.C
  and a.F = b.F 
```

# mysql - 我可以提高这个 mysql 查询的速度吗？

> ID：13826745
> 
> 赞同：-3
> 
> 时间：2012-12-11T19:02:36.300
> 
> 标签：mysql, sql, database

我正在将 testlink 用于我们的内部存储系统进行测试。以下查询耗时近 80 秒，并返回约 11k 行数据。有什么可以改进的地方吗？我假设瓶颈是两个左外连接。

现在的速度：

```
(11,002 total, Query took 82.8888 sec) 
```

这是查询：

```
SELECT UA.build_id AS build_id, 
   UA.feature_id AS feature_id,
   UA.user_id as user_id,   
   TPTCV.testplan_id AS testplan_id,
   TPTCV.tcversion_id AS tcversion_id,
   TPTCV.platform_id AS platform_id,       
   E.status AS status,
   E.id as execution_id,
   E.tester_id as tester_id
FROM user_assignments UA  
LEFT OUTER JOIN testplan_tcversions TPTCV ON UA.feature_id = TPTCV.id  
LEFT OUTER JOIN executions E ON TPTCV.tcversion_id = E.tcversion_id
AND UA.build_id = E.build_id
AND TPTCV.platform_id = E.platform_id
WHERE UA.type = 1 AND UA.build_id = 10
ORDER BY E.id DESC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T19:07:13.937

你在外键列上有索引吗？你需要它们。如果可能，在所有连接列上。同时生成执行计划并查看输出，这对性能分析非常有帮助。如果您不明白，请在此处发布。

[http://dev.mysql.com/doc/refman/5.1/en/execution-plan-information.html](http://dev.mysql.com/doc/refman/5.1/en/execution-plan-information.html)

您的 ORDER BY 子句也可能非常昂贵。躲开它。如果可能的话，在别处排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:16:47.823

考虑添加覆盖索引，这样查询就可以完全从索引块满足，而不需要引用表块。

例如

```
... ON user_assignments (build_id, type, feature_id, user_id)

... ON testplan_tcversions (id, testplan_id, tcversion_id, platform_id)

... ON executions (tcversion_id, platform_id, build_id,  status, tester_id, id) 
```

您还可以尝试在没有 ORDER BY 的情况下运行查询，以消除对排序操作的需要。

# f# - 如何在 F# 中编写查询表达式？

> ID：13826749
> 
> 赞同：21
> 
> 时间：2012-12-11T19:02:45.980
> 
> 标签：f#, computation-expression, query-expressions

我一直在这里查看查询表达式[http://msdn.microsoft.com/en-us/library/vstudio/hh225374.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh225374.aspx)

我一直想知道为什么以下是合法的

```
let testQuery = query {
        for number in netflix.Titles do
        where (number.Name.Contains("Test"))
    } 
```

但你不能真的做这样的事情

```
let christmasPredicate = fun (x:Catalog.ServiceTypes.Title) -> x.Name.Contains("Christmas")
let testQuery = query {
        for number in netflix.Titles do
        where christmasPredicate 
    } 
```

当然 F# 允许像这样的可组合性，因此您可以重用谓词？如果我想要圣诞节标题与特定日期之前的另一个谓词相结合怎么办？我必须复制并粘贴我的整个查询？C# 与此完全不同，它有多种构建和组合谓词的方法

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-11T20:35:06.697

对于需要显式引用的 F# 2.0 版本的查询，这很容易做到（我写了[一篇关于它的博客文章](http://tomasp.net/articles/dynamic-flinq.aspx)）。有一种方法可以在 C#（another [blog post](http://tomasp.net/blog/dynamic-linq-queries.aspx)）中实现类似的东西，我认为类似的技巧可以用 F# 3.0 来玩。

如果您不介意更丑陋的语法，那么您也可以在 F# 3.0 中使用显式引用。当您编写
`query { .. }`编译器时，实际上会生成如下内容：

```
query.Run(<@ ... @>) 
```

其中的代码`<@ .. @>`是引用的 F# 代码 - 即，存储在`Expr`表示源代码的类型中的代码，可以转换为 LINQ 表达式，从而转换为 SQL。

这是我使用`SqlDataConnection`类型提供程序测试的示例：

```
let db = Nwind.GetDataContext()

let predicate = <@ fun (p:Nwind.ServiceTypes.Products) -> 
  p.UnitPrice.Value > 50.0M @>

let test () =
  <@ query.Select
      ( query.Where(query.Source(db.Products), %predicate), 
        fun p -> p.ProductName) @>
  |> query.Run
  |> Seq.iter (printfn "%s") 
```

关键技巧是，当您使用显式引用（使用`<@ .. @>`）时，您可以使用`%`运算符进行引用切片。这意味着将 的引文`predicate`放入查询的引文 (in `test`) 中您所写的地方`%predicate`。

与漂亮的查询表达式相比，该代码非常难看，但我怀疑您可以通过在此基础上编写一些 DSL 或通过预处理引用来使其更好。

**编辑：**通过更多的努力，实际上可以`query { .. }`再次使用该语法。您可以引用整个查询表达式并编写`<@ query { .. } @>`- 这不会直接起作用，但您可以获取引用并提取查询的实际正文并将其`query.Run`直接传递给。这是适用于上述示例的示例：

```
open System.Linq
open Microsoft.FSharp.Quotations
open Microsoft.FSharp.Quotations.Patterns

let runQuery (q:Expr<IQueryable<'T>>) = 
  match q with
  | Application(Lambda(builder, Call(Some builder2, miRun, [Quote body])), queryObj) ->
      query.Run(Expr.Cast<Microsoft.FSharp.Linq.QuerySource<'T, IQueryable>>(body))
  | _ -> failwith "Wrong argument"

let test () =
  <@ query { for p in db.Products do
             where ((%predicate) p)
             select p.ProductName } @>
  |> runQuery
  |> Seq.iter (printfn "%s") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-30T11:12:01.613

天真地，在原始示例中，可以尝试引用谓词，然后将其拼接：

```
let christmasPredicate = <@ fun (x:Catalog.ServiceTypes.Title) -> 
                             x.Name.Contains("Christmas") @>
let testQuery = query {
        for number in netflix.Titles do
        where ((%christmasPredicate) number) 
        select number
    } 
```

（我冒昧地稍微清理了原始示例）

诸如此类的示例（使用简单的一阶 lambda 抽象）通常在 F# 中确实有效，但一般来说，不能保证 F# 的默认 QueryBuilder 将规范化引用术语中 lambda 抽象的结果应用程序。这可能会导致奇怪的错误消息或性能不佳的查询（例如，查询一个表，然后在第一个表的每一行的另一表上生成一个查询，而不是执行单个查询连接）。

我们最近开发了一个库`FSharpComposableQuery`，称为（如果打开）重载`query`运算符以执行规范化（并做一些其他有用的事情）。它为 F# 查询表达式的重要子集生成单个查询提供了强有力的保证。使用`FSharpComposableQuery`的版本`query`，上述简单的组合有效。我们还进行了广泛的测试，以确保`FSharpComposableQuery`不会破坏现有的查询代码。

同样，例如，使用`FSharpComposableQuery`，托马斯的示例不需要特殊`RunQuery`功能。相反，人们可以简单地做：

```
open FSharpComposableQuery

let predicate = <@ fun (p:Nwind.ServiceTypes.Product) -> 
                     p.UnitPrice.Value > 50.0M @>
let test () =
  query { for p in db.Products do
          where ((%predicate) p)
          select p.ProductName }
  |> Seq.iter (printfn "%s") 
```

（警告：我只使用 Northwind 的 OData 版本而不是 SQL 类型提供程序测试了上述代码，但我们已经测试了大量类似且更复杂的示例。OData 版本失败并出现来自 OData 的神秘错误，但是这似乎与手头的事情正交。）

`FSharpComposableQuery`现在可以从 NuGet 获得：[https ://www.nuget.org/packages/FSharpComposableQuery](https://www.nuget.org/packages/FSharpComposableQuery)

更多信息（包括示例和小教程，演示更复杂的组合形式）可以在这里找到：

[http://fsprojects.github.io/FSharp.Linq.ComposableQuery/](http://fsprojects.github.io/FSharp.Linq.ComposableQuery/)

[编辑：更改了上述链接以删除“实验”一词，因为项目名称已更改。]

# python - 将 ExtendedInterpolation 与 Logging.Config.FileConfig 一起使用

> ID：13826757
> 
> 赞同：8
> 
> 时间：2012-12-11T19:03:19.700
> 
> 标签：python, logging, interpolation

我正在寻找一种在将 ini 文件加载到 Logging.config.FileConfig 时使用 configparser lib 中的 ExtendedInterpolation 功能的方法。

[http://docs.python.org/3/library/configparser#configparser.ExtendedInterpolation](http://docs.python.org/3/library/configparser#configparser.ExtendedInterpolation)

因此，如果我有一个如下所示的 ini 文件：

```
[logSettings]
eventlogs=application
logfilepath=C:\Programs\dk_test\results\dklog_009.log
levelvalue=10

[formatters]
keys=dkeventFmt,dklogFmt

[handlers]
keys=dklogHandler

[handler_dklogHandler]
class=FileHandler
level=${logSettings:levelvalue}
formatter=dklogFmt
args=(${logSettings:logfilepath}, 'w')

[logger_dklog]
level=${logSettings:levelvalue}
handlers=dklogHandler 
```

如您所见，我通过使用 ${...} 表示法来引用不同部分中的值来遵循扩展插值语法。当像这样调用文件时`logging.config.fileConfig(filepath)`，模块内的评估总是失败。特别是在本节中对*args*选项的评估`[handler_dklogHandler]`。

有没有办法解决这个问题？谢谢！

**注意：**使用 Python 3.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:14:07.320

决定对文件使用强制插值并将结果保存到另一个临时文件。我将临时文件用于 logconfig。

该函数如下所示：

```
tmpConfigDict           = {}
tmpConfig               = ConfigParser(allow_no_value = True,
                            interpolation = ExtendedInterpolation())
for path in configPaths:
    tmpConfig.read(path)

#Iterate over options and use "get()" to execute the Interpolation
for sec in tmpConfig.sections():
    tmpConfigDict[sec] = {}
    for opt, _ in tmpConfig[sec].items():
        tmpConfigDict[sec][opt] = cleanValue(tmpConfig.get(sec, opt))

#Finished getting values. Write the dict to the configparser
tmpConfig.read_dict(tmpConfigDict)

#Open the file handle and close it when done
with open(pathToTmpFile, 'w') as fp:
    tmpConfig.write(fp, space_around_delimiters = False) 
```

# java - 正则表达式允许除无效字符之外的每个字符

> ID：13826760
> 
> 赞同：1
> 
> 时间：2012-12-11T19:03:32.627
> 
> 标签：java, xml, regex, special-characters

我有一个问题，我想要一个允许每个字符的正则表达式模式，例如字母、数字、特殊字符、元音变音字符，但不允许像箭头符号这样阻止我生成 xml 的无效字符。请帮我解决这个问题，我怎样才能用空格替换那个无效字符。？

我正在使用 java 1.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:08:47.557

您可以只使用 a`character class`并匹配所有有效字符

```
^[a-zA-Z\d]+$ 
```

但是如果你不想允许某些字符，你可以使用`Negated character class`

```
^[^><]+$
   --
    |->your arrow signs go here... 
```

* * *

例如，`regex`like`[^a-zA-Z]`将匹配除字母以外的任何字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:32:07.140

您可能可以删除所有不需要的字符，例如箭头：

```
String cleanXML = xml.replaceAll("[^\u0000-\u00ff]+", " "); 
```

这只是用`\x00-\xFF`空格替换范围外的 1 个或多个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:07:15.667

该`replaceAll`函数将采用正则表达式：

```
String myUnparsedString = "<some-xml-style-node>";
String myParsedString = myUnparsedString.replaceAll("<", " "); 
```

# php - 需要将 MySQL 结果分成每行 3 个

> ID：13826766
> 
> 赞同：3
> 
> 时间：2012-12-11T19:04:03.240
> 
> 标签：php, mysql, limit, rows

我想将数据库中的结果分成每行 3 个结果。这是我的代码：

```
include("connect.php");

$result = mysql_query("SELECT * FROM movies ORDER BY title");
$num = mysql_num_rows ($result);

if ($num > 0 ) {
    $i=0;
    while ($i < $num) {
        $id = stripslashes(mysql_result($result,$i,"id"));
        $title = stripslashes(mysql_result($result,$i,"title"));
        $description = stripslashes(mysql_result($result,$i,"description"));
        $length = stripslashes(mysql_result($result,$i,"length"));
        $link = stripslashes(mysql_result($result,$i,"link"));
        $rating = stripslashes(mysql_result($result,$i,"rating"));
        $cover = stripslashes(mysql_result($result,$i,"icover"));

        $row .= '<tr><td><a href="view.php?id='.$id.'"><img width=130 height=190 src="images/covers/'.$cover.'" /></a></td><td valign="top">'.$title.'<br />'.$rating.'<br />Run Time: '.$length.'</td><td><a href="update.php?id='.$id.'">Update</a></td><td><a href="delete.php?id='.$id.'">Delete</a></td></tr>';

        ++$i; 
    }
} 
else { 
    $row = '<tr><td colspan="2" align="center">Nothing found</td></tr>'; 
}

mysql_close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:12:03.920

正如有人指出的那样，如果您想每 N 次执行一次，您通常需要检查表单：

```
if ( $i > 0 && $i % $N == 0) {
    // Do your Nth something here
} 
```

其中 $i 是您当前的迭代次数，当然 $N 是您想要中断的频率。所以在这种情况下，$N = 3，你的中断逻辑将进入 if 语句的主体。

话虽如此，看起来可能涉及的不仅仅是这些；您的代码已经在您的表中进行了很多操作，因为您每行已经有多个列。你真的想要 3 组这些多列，还是你的意思是别的，比如行分组？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:18:55.700

我认为您忘记在 if 语句上定义 $row ，在这种情况下，您的变量将是 while 内的局部变量

```
include("connect.php");

 $result = mysql_query("SELECT * FROM movies ORDER BY title");
 $num = mysql_num_rows ($result);
 $row = '';

 if ($num > 0 ) {
    $i=0;

   while ($i < $num) {

   $id = stripslashes(mysql_result($result,$i,"id"));
   $title = stripslashes(mysql_result($result,$i,"title"));
   $description = stripslashes(mysql_result($result,$i,"description"));
   $length = stripslashes(mysql_result($result,$i,"length"));
   $link = stripslashes(mysql_result($result,$i,"link"));
   $rating = stripslashes(mysql_result($result,$i,"rating"));
   $cover = stripslashes(mysql_result($result,$i,"icover"));

   $row .= '<tr>
   <td><a href="view.php?id='.$id.'"><img width=130 height=190 src="images/covers/'.$cover.'" /></a></td>
   <td valign="top">'.$title.'<br />'.$rating.'<br />Run Time: '.$length.'</td>
   <td><a href="update.php?id='.$id.'">Update</a></td>
   <td><a href="delete.php?id='.$id.'">Delete</a></td>
  </tr>';

  ++$i; }
 } else { $row = '<tr><td colspan="2" align="center">Nothing found</td></tr>'; }

  mysql_close();

  print($row); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:51:10.773

我认为这可能会帮助您完成您正在尝试做的事情。当然，您需要对表格进行样式设置以满足您的需求。您可以将代码中的列数设置为适合您的任何值。

```
$mysqli = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);
        if ($mysqli->connect_errno)
        {
            echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
            $mysqli->close();
        }

    $values = $mysqli->query("SELECT * FROM movies ORDER BY title");
    $cols = 3;
    $i =1;
    echo "<table>".PHP_EOL;
    echo "<tr>".PHP_EOL;
while($row = $values->fetch_assoc())
    { 
        $id             = $row['id'];
        $title          = $row['title'];
        $description    = $row['description'];
        $length         = $row['length'];
        $link           = $row['link'];
        $rating         = $row['rating'];
        $cover          = $row['icover'];
    if (is_int($i / $cols))
        {
            echo "<td >".PHP_EOL;
            //what ever you want to include goes here
            echo "</td>".PHP_EOL;
            echo "</tr>".PHP_EOL;
            echo "<tr>".PHP_EOL;
        }
        else
            {
                echo "<td >".PHP_EOL;
                //what ever you want to include goes here
                echo "</td>".PHP_EOL;
            }
            $i++;
    }
        echo "</tr>".PHP_EOL; 
        echo "</table>".PHP_EOL; 
```

# mongodb - Mongo 空间查询 $geoNear 与 $near

> ID：13826769
> 
> 赞同：3
> 
> 时间：2012-12-11T19:04:20.877
> 
> 标签：mongodb, mongoose, geospatial

我正在 Mongo 中进行空间查询。我需要找到旧金山 10 英里范围内的所有场地。在命令行中，使用 $geoNear（有效）与 $near（无效）时，我得到了不同的结果。我需要使用 $near，因为我正在使用 Mongoose 并且它使用 $near。

$geoNear 有效。我运行这个命令：

```
db.runCommand({geoNear:"venues",near:[-122.418,37.775], maxDistance:10/69}); 
```

我得到按距离排序的结果，在 10 英里半径范围内。伟大的。

但后来我运行这个 $near 命令，我没有得到任何结果：

```
db.venues.find({loc: {$near: [-122.418,37.775] }, $maxDistance:10/69}) 
```

据我所知，它们是相同的命令。我错过了什么吗？如果我删除 $maxDistance，我确实会返回结果，并且它们按距离正确排序。但是，我也在 10 英里以外的地方得到结果。

```
db.venues.find({loc: {$near: [-122.418,37.77] }}) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T02:53:14.937

您需要在 {$near} JSON 文档中有 $maxDistance : X - 你有它在外面。

改变`db.venues.find({loc: {$near: [-122.418,37.775] }, $maxDistance:10/69})`

成为

`db.venues.find({loc: {$near: [-122.418,37.775], $maxDistance:10/69 } })`

# java - 尝试捕捉 java

> ID：13826773
> 
> 赞同：0
> 
> 时间：2012-12-11T19:04:27.090
> 
> 标签：java, user-interface, try-catch

我一直在制作一个 GUI 程序，我正在调用一个引发异常的方法。我必须使用try and catch，因为我无法编辑代码，因为它的GUI。由于某种原因，代码不起作用。该代码应该获取文件的第一行并在标签中显示数字。这是代码：

```
 try{  
       String inputStr = JOptionPane.showInputDialog(this, "Enter The File Name: ");
       int x= codeReadFile(inputStr);
       String name= String.valueOf(x);
       chipCount.setText(name);
    }
    catch (IOException e) {
         JOptionPane.showMessageDialog(this,"No File");

    } 
```

文件读取程序的代码是：

```
 public static int codeReadFile (String filename) throws IOException, 
      FileNotFoundException {
      String line=null;
      int value=0;
      BufferedReader inputReader = new BufferedReader (new 
            InputStreamReader(new FileInputStream(filename)));
            while (( line = inputReader.readLine()) != null)
                value = Integer.parseInt(line);
                inputReader.close();
                return value; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:45:07.853

你说你想得到文件的第一行，但这段代码显然没有这样做：

```
while (( line = inputReader.readLine()) != null)
  value = Integer.parseInt(line); 
```

它尝试读取整个文件并将每一行解析为`int`，丢弃除最后一个之外的所有值。你可能想说的是

```
line = inputReader.readLine();
return line != null? Integer.parseInt(line) : 0; 
```

**无论您的文件实际上是否只包含一行**，您都应该拥有这样的代码。例如，如果文件包含一个额外的换行符，您将读取一个空行，尝试解析它，并得到一个`NumberFormatException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:19:19.983

GUI 操作应始终在 EDT（事件调度线程）上调用。您可以通过将修改代码包装到某事中来实现这一点。喜欢：

```
SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                chipCount.setText(name);
            }
        }); 
```

否则可能会发生丑陋的事情;）

然后还有一种更简单的方法来检索`BufferedReader`. 只需删除流并使用 a`FileReader`代替。

最后一件事是：如果您的文件只包含一行，则只需读取一行。你正在做的是阅读所有行。如果最后一个为空，则您将得到错误的结果，甚至是 NumberFormatException by `parseInt()`。

作为另一种方法，您可以在设置文本后尝试调用`repaint()`或`invalidate()`在 chipCount 和/或其父级上。 **编辑：** 我刚刚读到你想在标签中显示它......然后重新绘制绝对是要走的路。您也可以只使用 a`JTextField`并使其不可编辑以摆脱它。

# matlab - 内核估计

> ID：13826777
> 
> 赞同：0
> 
> 时间：2012-12-11T19:04:34.853
> 
> 标签：matlab, matrix

我正在做一个项目，在这个项目中我得到了一个 filter `K`。我需要：

> 找到一个矩阵 A，使得矩阵 A 的每一行都是与滤波器 K 对应的像素的串联。

```
K = [ k11 k12 k13 
      k21 k22 k23 
      k31 k32 k33] 
```

我找不到`A`。我正在使用 MATLAB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:31:23.897

当您谈论像素时，我假设您想要进行两个维度内核平滑。

作为`K`一个 3x3 矩阵，我怀疑要确定给定的输入矩阵`Image`，您可以通过以下方式找到 A 的某个点：

```
for i = 2:size(Image,1)-1
    for j = 2:size(Image,2) -1
        A(i,j) = sum(sum( Image(i-1:i+1,j-1:j+1) .* K ))
    end
end 
```

当然，你仍然需要选择如何处理边缘/角落的情况，但我会把它留给你。

# postgresql - NHibernate + Npgsql + PostgreSQL 连接池误区

> ID：13826779
> 
> 赞同：0
> 
> 时间：2012-12-11T19:04:35.860
> 
> 标签：postgresql, nhibernate, connection-pooling, npgsql

我对 NHibernate 和 Npgsql (PostgreSQL DB) 中的池化机制有一些误解。

它实际上是如何工作的？我可以在数据库连接字符串中设置“pooling=true”参数。实际上将在哪一侧进行池化：NHibernate 还是 PostgreSql？据我所知，PostgreSql 9.2 没有自己的池机制，在这种情况下池将如何工作？我还可以在 DB 连接字符串中指定“MinPoolSize”和“MaxPoolSize”参数。这些参数是什么意思？何时实际创建新连接（或在“pooling = true”的情况下从池中获取）？当我打开一个新的 NHibernate 会话或者它不依赖于打开/关闭会话时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:13:25.897

NHibernate 不管理（也不真正关心）连接池。这是一些 ADO.Net 提供程序的功能。服务器也不必参与，因为任何具有足够复杂性的客户端都可以实现自己的连接池。毕竟，这只是保持一些备用连接打开的问题。

我相信这是在 Npgsql 中实现的。

# java - JAVA 扩展 ASCII 表用法

> ID：13826781
> 
> 赞同：3
> 
> 时间：2012-12-11T19:04:37.910
> 
> 标签：java, casting, char, ascii

在我的应用程序中，我需要从图像上显示的扩展 ASCII 表中获取字符。但是当我将十进制值转换为 char 时，我会得到不同的字符。这些字符在 JAVA 中的真正价值是什么。我不在控制台或文件中写入字符，只是写入图像。

```
private void generateAsciiMatrix()
{
    //32 - 255 are visible characters in ascii table
    for(int i = 32; i < 256; i++)
    {
        this.generateAsciiMatrix((char)i);
    }
}

private void generateAsciiMatrix(char letter)
{
    EBufferedImage character = new EBufferedImage(
            ImageClass.charToImage(letter, width, height));
    //...some code
}

public static BufferedImage charToImage(char c, int width, int height)
{
    BufferedImage off_Image = new BufferedImage(width, height,
                BufferedImage.TYPE_BYTE_GRAY);

    Graphics2D g2 = off_Image.createGraphics();
    g2.setColor(Color.black);
    g2.setBackground(Color.WHITE);  
    g2.clearRect(0, 0, width, height);  
    g2.setFont(new Font("Monospaced", Font.PLAIN, 12)); 
    g2.drawString(Character.toString(c), 0, height);
    saveImage(off_Image, "code" + (int)c);
    return off_Image;
} 
```

感谢您的帮助，并为我糟糕的英语感到抱歉:-)

![在此处输入图像描述](../Images/afa066b8013510485aab29246967af54.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:35:23.170

我对这个问题的解决方案是我用我需要的那些字符手动创建了一个 char 数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:08:56.757

将整数值放入字节数组中，然后您可以使用`CharsetDecoder`. 将它们转换为字符串`"Cp437"`。

只是一个简单的例子：

```
Charset oem = Charset.forName("Cp437");
ByteBuffer b = ByteBuffer.allocate(0xFF - 0x20 - 1);
for (int i = 0x20; i < 0xFF; i++) {
    if (i == 0x7F) {
        // skip DEL
        continue;
    }

    b.put((byte) i);
}
b.flip();
CharBuffer c = oem.decode(b);
System.out.println(c.toString()); 
```

# java - 如何保护客户端反作弊

> ID：13826786
> 
> 赞同：13
> 
> 时间：2012-12-11T19:05:16.440
> 
> 标签：java, minecraft, anti-cheat

第一的，

我想表明我知道从客户端发送的任何信息都不能被信任，因为它可以被欺骗。我对通过默默无闻的安全方法来阻止 99.9% 的潜在作弊者以及检测确实绕过安全的程序的能力很感兴趣。

我对此的一些想法包括验证它所保护的游戏以及任何潜在的作弊应用程序的文件和内存校验和，方法是允许客户端根据服务器的请求（通过 TCP）进行扫描，以检测内存注入作弊和/或作弊内存占用。因此，绕过黑客必须侦听通过 SSL 发送给它的所有 TCP 信息，然后通过反汇编加密/解密函数来解密消息以了解它想要什么。同样，客户端本身可能会自行更改，并允许它根据需要随机添加/删除功能（但由服务器保留），这样作弊者就很难学会如何绕过它。这可能毫无意义？

我只发现这对于更有经验的人来说难度适中，因此我对其他可能难以绕过的方法持开放态度。

我只对可能的实现感兴趣，而不是如何不可能有客户端反作弊，我只是想让它变得非常困难。

添加了 minecraft 和 java 标签，它适用于 Minecraft，我知道社区足够大，有人可能会击败我的系统，但我希望通过使用不断的更新和更改，我可以通过独创性和毅力击败他们。

编辑：我发现了这篇文章：[如何防止我们的（多人）游戏中的作弊行为？](https://stackoverflow.com/questions/960499/how-to-prevent-cheating-in-our-multiplayer-games?rq=1)我正在添加他的建议，以免重复，因为我正在寻找比显而易见的想法更多的想法（我不确定他是否不可绕过）

> 1）打开所有其他进程，并hook它们的WriteProcessMemory函数，使它们无法写入您游戏进程中的内存。正确完成这一步将阻止 90% 的所有作弊和作弊引擎。
> 
> 2）做同样的事情，挂钩各种鼠标和键盘仿真功能。这将阻止许多瞄准机器人和其他类型的自动化机器人。
> 
> 3) 在您的游戏自己的进程中挂钩 VirtualProtectEx/VirtualAllocEx/etc 函数，并监控哪些模块正在更改保护级别或分配新的内存块。当您的游戏进行大量分配时，您必须巧妙地处理这一点，以防止它过于占用 CPU，但这是可以做到的。
> 
> 4) 挂钩 LoadLibrary 函数并监视任何动态加载的 DLL，以防止 DLL 注入。
> 
> 5) 在你的游戏连接上使用一些轻量级的多态编码。
> 
> 6) 使用一些反调试技术来防止调试器附加到您的进程。谷歌反调试，你应该能找到很多东西。
> 
> 7) 使用定制的专有 PE 打包程序来防止对您的游戏进行有用的反汇编。
> 
> 8) 连接到处理透明度和 alpha 混合的 OpenGL 或 Direct3D 函数和方法。
> 
> 9）如果使用着色器，校验和你的着色器和着色器常数值。
> 
> 10) 对玩家角色使用额外的遮挡剔除技术，以防止他们在视线被其他几何体阻挡时被渲染。它可能对你的表现也有帮助，也可能没有帮助，但它会防止许多墙黑客。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T19:14:21.390

如果您希望您的客户尊重您和游戏，那么您应该尊重您的客户，并意识到您所看到的游戏客户端机器可能被用来存储有价值的信息。

> 允许客户端扫描服务器随机提供的内存的任何部分
> 
> 客户端本身可能会自行更改，并允许它根据需要随机添加/删除功能

请注意不要在客户端机器中打开攻击向量。阅读“随机给出的任何内存部分”听起来很可怕。您可以通过散列（不小）内存块并检查已知值来减少这种情况。

让服务器发送“随机”代码可能会使您的软件看起来像病毒/僵尸网络，以防病毒/安全工具。它还使客户对潜在的利用敞开了大门。

## 更新：

> 1）打开所有其他进程，并钩住它们的WriteProcessMemory函数

如果你这样做，并且你在注入的代码中有一个错误，你可能会破坏你客户的整个机器的稳定性。这似乎具有侵略性。您在哪个版本的 Windows 上运行？有什么权限？我很确定破解者可以安排从您无权挂钩的进程（例如您在普通用户进程中运行的管理进程）运行他的漏洞利用程序。`GetProcAddress`此外，出于明显的原因，您还需要挂钩。

> 4) 挂钩 LoadLibrary 函数并监视任何动态加载的 DLL，以防止 DLL 注入。

这并不像听起来那么糟糕，因为您只需要在本地进程中执行此操作。

> 6) 使用一些反调试技术来防止调试器附加到您的进程。

当然值得一试（如果你有时间的话），但这对于经验丰富的破解者来说只是一个减速带。请记住，他总是可以从启动时跟踪您的代码并观察或绕过您的反调试。（这需要时间，但一些饼干喜欢这个。）

> 7) 使用定制的专有 PE 打包程序来防止对您的游戏进行有用的反汇编。

这是另一个会让您被防病毒软件注意到的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:10:12.577

我个人认为观察内存等没有意义。我可以想象，当有人实现协议并做出一些废话时，你也需要处理它，这也可能让你的服务器崩溃。

但是您是对的，可以检查内存中是否存在通常由作弊者使用的不良软件，例如 egoshooters 中的 wallhacks。

恕我直言，您需要检查来自客户端的数据是否看起来有效并且对作弊做出反应。

关于您的更新：
请不要挂钩所有其他程序，这有点疯狂，而且它可能会让您的程序被检测为 root 工具包或类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T04:43:14.183

我完全同意这里的其他人所说的——其中一些（打开所有其他进程并挂钩 WriteProcessMemory、鼠标/键盘仿真功能）是疯狂和可笑的——尤其是因为用户可以通过放弃对您的进程的权限来绕过这一点。这样做肯定会激起一些用户的愤怒。

但是，如果你真的想全力以赴做一些疯狂的事情，比如恶意软件，为什么不编写一个内核驱动程序来修补受保护标志（适用于 Windows Vista 及更高版本）或修补 OpenProcess？后者是一种更常见的方法（见于 AV 软件和恶意软件）；先前的不太常见，但仍然可行——如果您可以加载 KMD，则可以修补标志并绕过 Microsoft 签名要求。

# iframe - 如何在 Apex 中自动调整 iframe 的大小？

> ID：13826789
> 
> 赞同：3
> 
> 时间：2012-12-11T19:05:25.310
> 
> 标签：iframe, salesforce, apex-code, autosize

我正在尝试将另一个应用程序可视化到我的 salesforce 页面中。问题是包含其他应用程序的 iframe 的默认高度太短。我正在寻找如何自动调整大小，但我没有发现任何有用的东西。我做了一个解决方法，包括放置一个很大的高度，但这是一个非常糟糕的解决方案。

这是我的顶级代码页：

```
<apex:page controller="CaseManagmentWizard" showHeader="false" sidebar="true" >

<apex:iframe height="3000px" src="{!callCenterAPI}api/start.php?
 apiKey={!apiKey}&
 username={!userIims}&
idCliente={!selectedCustomerId}&
urlOk={!callCenterURLOK}& 
urlError={!callCenterURLError}
"></apex:iframe>

</apex:page> 
```

如果我把 height="100%" 比什么都没有！

[这是它的外观](http://i.stack.imgur.com/LN4BR.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:56:13.887

Calculate the height of the child page and send to parent to set iframe page height.

Following example code using jQuery

Give an ID to IFrame page.

In the child page(IFrame) write a script to calculate the height of the body using

```
$(document).ready(function () {
     window.parent.setFrameStylesFromParent(j$("body").height());
}) 
```

In the Parent page write a script to set the height of frame page.

```
function setFrameStylesFromParent(paramHeight){
    j$("#iFrameId").height(paramHeight);
} 
```

# c# - $.Post asp.net 方法调用

> ID：13826790
> 
> 赞同：0
> 
> 时间：2012-12-11T19:05:39.407
> 
> 标签：c#, asp.net, jquery, post

这一定是一个经典问题，但我在网上找不到任何问题的答案。该页面位于

```
https://localhost/Secured/Report/FileWriterManager.aspx 
```

这是我的 Jquery 代码。

```
 par = 'some data';
    $.post(
            '/Secured/Report/FileWriterManager.aspx/CallAjax',
            { strPar: par },
             function (msg) {
                 $('#lblError').text('Value Returned: ' + msg);
             }
        ); 
```

后面的代码是这样的：

```
[WebMethod]
public static string CallAjax(string strPar)
{

    return 'OK';

} 
```

当我使用 firefox 进行调试时，post 语句每行都经过，执行 lblError 填充。响应是整个 FileWriterManager.aspx html 代码。我做错了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:16:22.670

您可以在 FileWriterManager.aspx 页面上添加`Buffer="true"`指令`<%# Page`，然后在此函数中调用代码`Response.Clear()`以清除生成的 HTML 响应。然后用于`Response.Write`生成结果到浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T22:17:40.733

如果在尝试调用 a 时得到正常的页面响应`[WebMethod]`，则应首先检查 ASP.NET Ajax 是否配置正确。具体来说，检查`<HttpModules>`web.config 中的部分。

对于 ASP.NET 3.5 应用程序，使用 Visual Studio 中的内置 Web 服务器：

```
<system.web>
  <httpModules>
    <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </httpModules>
</system.web> 
```

使用 IIS 时：

```
<system.webServer>
  <modules>
    <remove name="ScriptModule"/>
    <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </modules>
</system.web> 
```

原因是 ScriptModule 实际上“拦截”了 /WebForm.aspx/WebMethod 之类的请求，并处理了静态方法的调用和响应的返回。因此，如果没有发生这种情况，则可能是模块未配置。

如果你已经完成了配置，那么添加一个`<asp:ScriptManager runat="server" EnablePageMethods="true"/>`到页面，并启用页面方法。然后测试是否可以使用 Firebug 调用页面方法：`PageMethods.CallAjax("foo")`。

# proxy-classes - 使用 Javassist 生成的代理类进行自定义序列化

> ID：13826793
> 
> 赞同：0
> 
> 时间：2012-12-11T19:05:46.477
> 
> 标签：proxy-classes, javassist

我有一个由 Javassist`ProxyFactory`为可序列化类生成的代理类。我需要通过RMI发送代理类代表的目标类的实例，但是远程客户端没有代理类代码，所以我只能发送它的目标实例。这意味着只有目标实例应该在没有代理类代码的情况下进行序列化。代理类没有任何状态，除了对其目标的引用。

这可能`ProxyFactory`吗？

# java - 无法解析为一个类型 - .java 文件在包中并且没有被看到

> ID：13826801
> 
> 赞同：0
> 
> 时间：2012-12-11T19:06:16.223
> 
> 标签：java, android, types

这是 Griddler.java：

```
package com.pic2griddler.awesomeness;

public class Griddler
{
    public String id, status, name, diff, rate, info;

    Griddler()
    {

    }

    Griddler(String i, String s, String n, String d, String r, String in)
    {
        this.id = i;
        this.status = s;
        this.name = n;
        this.diff = d;
        this.rate = r;
        this.info = in;
    }

} 
```

我的屏幕截图在 Linux 上不起作用，所以我拍了一张照片： ![https://dl.dropbox.com/u/10165371/IMG_20121211_140403.jpg](../Images/24634fe233acff4d6c164559a9bc8c3f.png)

如您所见，在侧面（我认为这可能暗示了解决方案），它在 Griddler.java 文件上没有显示向下箭头。

一些重要的事情：

*   我已经阅读了之前推荐的内容（项目-> 来源-> 清洁）。
*   我已经遵循了类似问题中概述的许多事情，但都没有奏效。
*   我已经重启了电脑。
*   我已经重新启动了 Eclipse。
*   我已经删除了类文件。
*   我已将项目取出并再次导入。
*   我还没有开始一个新项目，只是复制了我的文件（我想要一个不同的解决方案，但如果没有出现，我将作为最后的手段这样做）。

我确信这是一个简单的问题，但老实说，我不知道如何解决它，也不想使用我一直在使用的解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:10:45.123

在您的屏幕截图中，您会看到第一个可用的快速修复：

导入 Griddle

就这样做吧！（点击第一行：Import Griddler）

这将添加一个导入语句，其中导入了 Griddler
您也可以手动执行此操作：在 File UserGriddlers 添加一行

```
import com.pic2griddler.awesomeness.Griddler 
```

在导入部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:09:36.273

问：您是否在 Java 客户端中执行了“import com.pic2griddler.awesomeness.*”？

问：为什么“Griddler()”构造函数都不是“public”的？

问：您确定“com.pic2griddler.awesomeness”在您的 Eclipse 构建路径中吗（是的，这通常会自动发生。但请仔细检查）？

问：你能发布确切的错误信息吗？

PS：你总是可以使用“GIMP”来截取Linux截图：

*   [http://tips.webdesign10.com/how-to-take-a-screenshot-with-ubuntu-linux](http://tips.webdesign10.com/how-to-take-a-screenshot-with-ubuntu-linux)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T19:14:45.417

尝试右键单击 Griddler.java 并选择 Build Path->Include。我怀疑您无意中从构建中排除了该文件。

# c++ - 从 V8 中的 C++ 回调调用 Javascript 函数

> ID：13826803
> 
> 赞同：13
> 
> 时间：2012-12-11T19:06:38.033
> 
> 标签：c++, multithreading, v8, libuv

我试图在调用 c++ 回调时调用已注册的 JS 函数，但我得到了一个段错误，因为我认为这是一个范围问题。

```
 Handle<Value> addEventListener( const Arguments& args ) {
    HandleScope scope;
    if (!args[0]->IsFunction()) {
        return ThrowException(Exception::TypeError(String::New("Wrong arguments")));
    }

    Persistent<Function> fn = Persistent<Function>::New(Handle<Function>::Cast(args[0]));
    Local<Number> num = Number::New(registerListener(&callback, &fn));
    scope.Close(num);
} 
```

当事件发生时，将调用以下方法。我假设这可能发生在 V8 正在执行 JS 的另一个线程上。

```
void callback(int event, void* context ) {
    HandleScope scope;
    Local<Value> args[] = { Local<Value>::New(Number::New(event)) };
    Persistent<Function> *func = static_cast<Persistent<Function> *>(context);
    (* func)->Call((* func), 1, args);

    scope.Close(Undefined());
} 
```

这会导致分段错误： 11\. 请注意，如果我使用 addEventListener() 中对 Persistent 的引用直接调用回调函数，它会正确执行该函数。

我假设我需要一个储物柜或隔离？看起来 libuv 的 uv_queue_work() 也可以解决这个问题，但是由于我没有启动线程，所以我看不出你会如何使用它。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-16T19:23:06.933

当您`Persistent<Function> fn`在代码中声明时，`fn`是一个堆栈分配的变量。

`fn`是 a `Persistent<Function>`，它是一个*句柄*类，它将包含一个指向某个类型的堆分配值的指针`Function`，但`fn`它本身在堆栈上。

这意味着当您调用 时`registerListener(&callback, &fn)`，`&fn`正在获取句柄（类型`Persistent<Function>`）的地址，而不是`Function`堆上的地址。当您的函数退出时，句柄将被销毁，但其`Function`本身将保留在堆上。

因此，作为修复，我建议传递`Function`句柄的地址而不是句柄的地址，如下所示：

```
Persistent<Function> fn = Persistent<Function>::New(Handle<Function>::Cast(args[0]));
Local<Number> num = Number::New(registerListener(&callback, *fn)); 
```

（请注意，`operator*`在 a`Persistent<T>`返回 a`T*`而不是更传统的`T&`，参见[http://bespin.cz/~ondras/html/classv8_1_1Handle.html](http://bespin.cz/~ondras/html/classv8_1_1Handle.html)）

您还必须进行调整`callback`以考虑到`context`现在是指向 a 的原始指针的事实`Function`，如下所示：

```
Persistent<Function> func = static_cast<Function*>(context);
func->Call((* func), 1, args); 
```

在这里从原始函数指针创建一个`Persistent<Function>`是可以的，因为我们知道它`context`实际上是一个持久对象。

为简洁起见，我也改为`(*func)->Call(...)`了`func->Call(...)`；他们对 V8 手柄做同样的事情。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-02-17T03:17:08.910

我知道这个问题有点老了，但是 nodejs v0.10 到 v0.12 有一个相当大的更新。V8 改变了 v8::Persistent 的行为。v8::Persistent 不再继承自 v8::Handle。我正在更新一些代码，发现以下工作......

```
 void resize(const v8::FunctionCallbackInfo<Value> &args) {
    Isolate *isolate = Isolate::GetCurrent();
    HandleScope scope(isolate);
    Persistent<Function> callback;
    callback.Reset(isolate, args[0].As<Function>())
    const unsigned argc = 2;
    Local<Value> argv[argc] = { Null(isolate), String::NewFromUtf8(isolate, "success") };
    Local<Function>::New(isolate, work->callback)->Call(isolate->GetCurrentContext()->Global(), argc, argv);
    callback.Reset();
  } 
```

我相信这次更新的目的是让内存泄漏更难暴露。在节点 v0.10 中，您将执行以下操作...

```
 v8::Local<v8::Value> value = /* ... */;
  v8::Persistent<v8::Value> persistent = v8::Persistent<v8::Value>::New(value);
  // ...
  v8::Local<v8::Value> value_again = *persistent;
  // ...
  persistent.Dispose();
  persistent.Clear(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-16T04:10:55.407

问题是在 addEventListener 中，`Persistent<Function> fn`分配在堆栈上，然后您将指向它的指针用作回调的上下文。

但是，因为是在栈上分配的，所以退出`fn`时就消失了。`addEventListener`因此，现在回调`context`指向一些虚假值。

您应该分配一些堆空间，并将您需要的所有数据放在`callback`那里。

# escaping - 编码/解码 URL 的推荐方法

> ID：13826808
> 
> 赞同：30
> 
> 时间：2012-12-11T19:07:05.807
> 
> 标签：escaping, go

> **可能重复：**
> [编码/解码 URL](https://stackoverflow.com/questions/13820280/encode-decode-urls)

在 Go 中编码/解码 URL 的推荐方法是什么？我正在寻找JavaScript中的[encodeURIComponent等价物。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-11T19:12:36.167

您正在寻找“net/url”包。

[http://golang.org/pkg/net/url/#QueryEscape](http://golang.org/pkg/net/url/#QueryEscape)

# algorithm - 快速斐波那契递归

> ID：13826810
> 
> 赞同：22
> 
> 时间：2012-12-11T19:07:15.547
> 
> 标签：algorithm, recursion, fibonacci

我试图回忆一个关于斐波那契递归的算法。以下：

```
public int fibonacci(int n)  {
  if(n == 0)
    return 0;
  else if(n == 1)
    return 1;
  else
    return fibonacci(n - 1) + fibonacci(n - 2);
} 
```

不是**我**要找的，因为它很贪婪。这将呈指数级增长（只需查看[Java 递归斐波那契序列](https://stackoverflow.com/questions/8965006/java-recursive-fibonacci-sequence#8965171)- 初始参数越大，进行的无用调用就越多）。

可能有类似“循环参数移位”的东西，调用先前的斐波那契值将检索值而不是再次计算它。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-11T19:11:36.370

也许是这样的：

```
int fib(int term, int val = 1, int prev = 0)
{
 if(term == 0) return prev;
 return fib(term - 1, val+prev, val);
} 
```

这个函数是尾递归的。这意味着它可以非常有效地优化和执行。事实上，它被优化成一个简单的循环..

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-11T19:24:22.617

这类问题是*线性递归*类型，通过*快速矩阵求幂*可以最快地解决。这是[简明扼要](http://fusharblog.com/solving-linear-recurrence-for-programming-contest/)地描述这种方法的博文。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-11T19:12:40.507

[您可以通过使用记忆](https://en.wikipedia.org/wiki/Memoization)化（意思是：存储以前的结果以避免重新计算它们）来做一个非常快速的递归斐波那契版本。例如，这是 Python 中的一个概念证明，其中字典用于保存以前的结果：

```
results = { 0:0, 1:1 }

def memofib(n):
    if n not in results:
        results[n] = memofib(n-1) + memofib(n-2)
    return results[n] 
```

对于通常会阻塞“正常”递归版本的输入值，它会快速返回。请记住，`int`数据类型不足以保存大型结果，建议使用任意精度整数。

完全不同的选择 - 重写这个迭代版本......

```
def iterfib(n):
    a, b = 0, 1
    for i in xrange(n):
        a, b = b, a + b
    return a 
```

...作为尾递归函数，`loop`在我的代码中调用：

```
def tailfib(n):
    return loop(n, 0, 1)

def loop(i, a, b):
    if i == 0:
        return a
    return loop(i-1, b, a+b) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-11T19:11:20.753

假设您想要第 n 个 fib 号码，然后构建一个包含前面数字的数组

```
int a[n];
a[0] = 0;
a[1] =1;
a[i] = n[i-1]+n[n-2]; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-01-03T05:28:55.823

[我发现了关于斐波那契问题的有趣文章](http://www.nayuki.io/page/fast-fibonacci-algorithms)

这里的代码片段

```
# Returns F(n)
def fibonacci(n):
    if n < 0:
        raise ValueError("Negative arguments not implemented")
    return _fib(n)[0]

# Returns a tuple (F(n), F(n+1))
def _fib(n):
    if n == 0:
        return (0, 1)
    else:
        a, b = _fib(n // 2)
        c = a * (2 * b - a)
        d = b * b + a * a
        if n % 2 == 0:
            return (c, d)
        else:
            return (d, c + d)

# added iterative version base on C# example
def iterFib(n):
    a = 0
    b = 1
    i=31
    while i>=0:
        d = a * (b * 2 - a)
        e = a * a + b * b
        a = d
        b = e
        if ((n >> i) & 1) != 0:
            c = a + b;
            a = b
            b = c
        i=i-1
    return a 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-06T17:06:35.230

JavaScript 中使用递归和延迟初始化缓存以提高效率的示例：

```
var cache = {};

function fibonacciOf (n) {
  if(n === 0) return 0;
  if(n === 1) return 1;
  var previous = cache[n-1] || fibonacciOf(n-1);
  cache[n-1] = previous;
  return previous + fibonacciOf(n-2);
}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-02T13:55:57.160

Duedl0r 的算法翻译成 Swift：

```
func fib(n: Int, previous: (Int, Int) = (0,1)) -> Int {
    guard n > 0 else { return 0 }
    if n == 1 { return previous.1 }
    return fib(n - 1, previous: (previous.1, previous.0 + previous.1))
} 
```

工作示例：

```
fib(4)
= fib(4, (0,1) )
= fib(3, (1,1) )
= fib(2, (1,2) )
= fib(1, (2,3) )
= 3 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-15T23:02:50.963

快速斐波那契计算的一个很好的算法是（在 python 中）：

```
def fib2(n):
    # return (fib(n), fib(n-1))
    if n ==  0: return (0,  1)
    if n == -1: return (1, -1)
    k, r = divmod(n, 2) # n=2k+r
    u_k, u_km1 = fib2(k)
    u_k_s, u_km1_s = u_k**2, u_km1**2  # Can be improved by parallel calls
    u_2kp1 = 4 * u_k_s - u_km1_s + (-2 if k%2 else 2)
    u_2km1 = u_k_s + u_km1_s
    u_2k   = u_2kp1 - u_2km1
    return (u_2kp1, u_2k) if r else (u_2k, u_2km1)

def fib(n):
    k, r = divmod(n, 2) # n=2k+r
    u_k, u_km1 = fib2(k)
    return (2*u_k+u_km1)*(2*u_k-u_km1)+(-2 if k%2 else 2) if r else u_k*(u_k+2*u_km1) 
```

如果您需要非常快速的计算，请链接到 libgmp 并使用 mpz_fib_ui() 或 mpz_fib2_ui() 函数。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-03T16:40:06.740

您需要记住计算值以阻止指数增长。

1.  只需使用数组来存储值。
2.  如果您已经计算过数组，请检查它。
3.  如果找到它，请使用它或以其他方式计算并存储它。

这是一个使用内存进行更快递归的工作示例。

[计算斐波那契数](http://softwaredesignprocess.com/index.php/2017/02/02/faster-recursive/)

# c# - 用于查找具有非主键值的实体的存储库方法

> ID：13826814
> 
> 赞同：1
> 
> 时间：2012-12-11T19:07:26.220
> 
> 标签：c#, entity-framework, repository, repository-pattern, dbcontext

所以我不确定标题中的术语是否正确，但我应该能够描述我正在尝试做的事情。

我有一个“GenericRepository”类，我所有的实际存储库类都继承自它，它包含几个通用方法。该类的代码如下

```
public class GenericRepository<TEntity> where TEntity : class
{
    internal ReportsDirectoryEntities context;
    internal DbSet<TEntity> dbSet;

    public GenericRepository(ReportsDirectoryEntities context)
    {
        this.context = context;
        this.dbSet = context.Set<TEntity>();
    }

    /////////////////////////////////////////////////////////////////////

    public virtual IEnumerable<TEntity> GetAll()
    {
        return dbSet.ToList();
    }
    public virtual TEntity GetByID(int id)
    {
        return dbSet.Find(id);
    }
    public virtual void Insert(TEntity entity)
    {
        dbSet.Add(entity);
    }
    public virtual void Delete(object id)
    {
        TEntity entityToDelete = dbSet.Find(id);
        Delete(entityToDelete);
    }
    public virtual void Delete(TEntity entityToDelete)
    {
        if (context.Entry(entityToDelete).State == System.Data.EntityState.Detached)
        {
            dbSet.Attach(entityToDelete);
        }
        dbSet.Remove(entityToDelete);
    }
    public virtual void Update(TEntity entityToUpdate)
    {
        dbSet.Attach(entityToUpdate);
        context.Entry(entityToUpdate).State = System.Data.EntityState.Modified;
    }
} 
```

现在所有这些都很好，我现在要做的是添加一个 GetByName 方法，我可以在其中传递实体的“名称”属性并返回它。

我试过了

```
 public virtual TEntity GetByName(string name)
    {
        return (from e in context.Set<TEntity>()
                where e.Name == name
                select e).SingleOrDefault();
    } 
```

但这强调了 Name 说“TEntity 不包含名称的定义”等等，这是有道理的。

我可以在单个存储库中轻松地做到这一点，但想知道是否有一种方法可以在通用存储库中做到这一点。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:16:01.017

如果您的所有实体类型都有`Name`属性，那么您可以`TEntity`使用`Name`属性扩展接口。

否则，您可以使用带有字符串查询的[SqlQuery()](http://msdn.microsoft.com/en-us/library/system.data.entity.dbset.sqlquery%28v=vs.103%29.aspx)方法`DbSet`作为参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:11:46.467

为了清楚地做到这一点，`TEntity`需要将其限制为具有 Name 属性的类型（或接口）。否则，您正在使用反射（或`dynamic`访问 Name 属性），它允许直到运行时才被捕获的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-21T00:30:44.383

如果您的所有实体都使用 Name 作为属性，您只需创建一个接口并将其用作泛型类的约束。

界面：

```
public interface IStringName
{
    public string Name { get; set; }
} 
```

实体：

```
public partial class MyEntity : IStringName
{
    public String Name { get; set; }
    // Additional properties here.
} 
```

存储库：

```
public class GenericRepository<TEntity> where TEntity : class, IStringName
{
    // Your code here.
} 
```

如果您的实体之一不使用 Name 属性，您有几个选择。您可以将实体中的适当属性名称更改为 Name，并将其适当地映射到原始存储模型名称。或者，您可以继承原始的通用存储库，例如。

命名存储库：

```
public class NamedRepository<TEntity> : GenericRepository<TEntity>
    where TEntity : class, IStringName
{
    public NamedRepository(ReportsDirectoryEntities context) : base(context)
    {
    }

    public virtual TEntity GetByName(string name)
    {
        return (from e in base.context.Set<TEntity>()
                where e.Name == name
                select e).SingleOrDefault();
    }
} 
```

这种方法将允许您在实现新接口的实体上使用 NamedRepository，并为那些没有实现的实体使用原始 GenericRepository。

# c# - 在原始图像上应用差异图像c#

> ID：13826821
> 
> 赞同：0
> 
> 时间：2012-12-11T19:07:59.403
> 
> 标签：c#, image-comparison

假设我有两个具有相同高度和宽度的图像。pic1.jpg 和 pic2.jpg。两个图像看起来非常相似，差异最小。在下面的例程的帮助下，我们可以得到两个图像之间的区别。下面的例程不是我的例程。

```
public class ImageDifferences
{
    private static ILog mLog = LogManager.GetLogger("ImageDifferences");

    public static unsafe Bitmap PixelDiff(Image a, Image b)
    {
        if (!a.Size.Equals(b.Size)) return null;
        if (!(a is Bitmap) || !(b is Bitmap)) return null;

        return PixelDiff(a as Bitmap, b as Bitmap);
    }

    public static unsafe Bitmap PixelDiff(Bitmap a, Bitmap b)
    {
        Bitmap output = new Bitmap(
            Math.Max(a.Width, b.Width),
            Math.Max(a.Height, b.Height),
            PixelFormat.Format32bppArgb);

        Rectangle recta = new Rectangle(Point.Empty, a.Size);
        Rectangle rectb = new Rectangle(Point.Empty, b.Size);
        Rectangle rectOutput = new Rectangle(Point.Empty, output.Size);

        BitmapData aData = a.LockBits(recta, ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);
        BitmapData bData = b.LockBits(rectb, ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);
        BitmapData outputData = output.LockBits(rectOutput, ImageLockMode.ReadWrite, PixelFormat.Format32bppArgb);

        try
        {
            byte* aPtr = (byte*)aData.Scan0;
            byte* bPtr = (byte*)bData.Scan0;
            byte* outputPtr = (byte*)outputData.Scan0;
            int len = aData.Stride * aData.Height;

            for (int i = 0; i < len; i++)
            {
                // For alpha use the average of both images (otherwise pixels with the same alpha won't be visible)
                if ((i + 1) % 4 == 0)
                    *outputPtr = (byte)((*aPtr + *bPtr) / 2);
                else
                    *outputPtr = (byte)~(*aPtr ^ *bPtr);

                outputPtr++;
                aPtr++;
                bPtr++;
            }

            return output;
        }
        catch (Exception ex)
        {

            return null;
        }
        finally
        {
            a.UnlockBits(aData);
            b.UnlockBits(bData);
            output.UnlockBits(outputData);
        }
    }
}
} 
```

在获得差异后，我如何合并第一张图像上的差异。

这下面我们可以合并

```
using (Graphics grfx = Graphics.FromImage(image))
{
    grfx.DrawImage(newImage, x, y)
} 
```

但我们需要知道新图像将在第一张图像上绘制的 x 和 y。谁能告诉我如何从上述称为**PixelDiff()**的例程中获取 x 和 y 位置，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:11:08.670

该例程对两个输入图像使用坐标 0,0，对差异图像使用相同的坐标，因此您将使用相同的坐标来绘制差异图像。

# oracle - 将列名连接到列值

> ID：13826823
> 
> 赞同：1
> 
> 时间：2012-12-11T19:08:03.910
> 
> 标签：oracle

我有一张看起来像这样的桌子

```
col1 | col2
-----------
  1  |  a
  2  |  b
  3  |  c 
```

我想运行一个使它看起来像这样的查询

```
val | colname
-------------
  1 | col1
  2 | col1
  3 | col1
  a | col2
  b | col2
  c | col2 
```

我已经阅读了关于[unpivot](http://www.oracle-developer.net/display.php?id=506)的内容，并且我已经弄清楚了[如何获取列名](https://stackoverflow.com/a/452476/322909)。这是我目前正在使用的查询。

```
SELECT 
     * 
FROM 
    myTable 
UNPIVOT (
            val 
        FOR 
            column_name 
        IN (
               SELECT 
                   column_name 
               FROM 
                   USER_TAB_COLUMNS 
               WHERE 
                   table_name = 'myTable'
           )
        ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:14:28.450

除非我遗漏了什么，否则你为什么不能使用它。`UNPIVOT`要求所有数据都属于同一类型，因此您必须根据需要强制转换数据：

```
select value, colName
from
(
  select to_char(col1) col1,
    col2
  from yourtable
) 
unpivot
(
  value
  for colName in (col1, col2)
) 
order by value 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/05b3b/4)

结果：

```
| VALUE | COLNAME |
-------------------
|     1 |    COL1 |
|     2 |    COL1 |
|     3 |    COL1 |
|     a |    COL2 |
|     b |    COL2 |
|     c |    COL2 | 
```

# scala - java.net.URL 的代理环境变量

> ID：13826833
> 
> 赞同：1
> 
> 时间：2012-12-11T19:08:51.143
> 
> 标签：scala, proxy, playframework

在我的 Play 2 应用程序中，我正在调用围绕 java.net.URL、[Bee Client](http://www.bigbeeconsultants.co.uk/bee-client)的 Scala 包装器。根据文档，`java.net.URL`支持代理，但我找不到有关如何为环境变量设置的详细信息。

我试过了，没有成功，

```
export proxySet=true
export proxyHost=my-proxy-server
export proxyPort=1080 
```

任何帮助都感激不尽。

**更新：** 在进一步挖掘之后，它们不是环境变量，而是 Rick 也指出的 JVM 命令行参数。但是，我尝试了以下也没有成功

```
export JAVA_OPTS="$JAVA_OPTS -Dhttp.proxyHost=my-proxy-server -Dhttp.proxyPort=1080"
sbt -Dhttp.proxyHost=my-proxy-server -Dhttp.proxyPort=1080 test 
```

请注意，我将参数传递给`sbt test`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T21:30:48.517

您要设置的属性是：

```
http.proxyHost
http.proxyPort 
```

如果您需要身份验证，您还可以设置这些：

```
http.nonProxyHosts
http.proxyUser
http.proxyPassword 
```

它们不是您操作系统中的环境变量，因此您可以在启动时通过 -D 将它们传递给 JVM，或者在您的应用程序中使用`System.setProperty`. 这应该允许 URL 通过代理服务器进行连接。

这个页面对属性有一个很好的总结：http: [//docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html](http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T18:48:03.803

我想通了，我还需要通过 socks 代理设置，可能特定于我公司的网络，但这对我有用

```
sbt -Dhttp.proxyHost=my-proxy-server -Dhttp.proxyPort=1080 -DsocksProxyHost=my-socks-proxy-server test 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T10:15:09.117

我在 Bee Client 文档中添加了一个关于如何通过代理发出请求[的新教程页面。](http://www.bigbeeconsultants.co.uk/content/bee-client/making-requests-via-proxies)（感谢您的建议。）

# asp.net - 什么是 MM/DD/YYYY 的有效正则表达式？

> ID：13826835
> 
> 赞同：1
> 
> 时间：2012-12-11T19:08:58.343
> 
> 标签：asp.net, regex, vb.net

我在网上搜索并找到了很多这种格式的表达方式，但都没有奏效。我使用了多个测试站点并且都失败了:(所以我希望我可以通过寻求帮助来解决这个问题！我只需要正则表达式来验证格式范围为 01/01/20XX 到 12/31/ 的日期20XX

也通过了这个

20XX 年 1 月 1 日至 20XX 年 12 月 31 日

一旦我得到这个表达式，我将验证一个常量字符串，我将把它附加到最后，即 12:00:00 AM。希望这种常见格式的谜团能尽快解开！:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T19:12:39.747

你不想要一个正则表达式。真的。您想使用[DateTime.TryParse()](http://msdn.microsoft.com/en-us/library/ch92fbc1.aspx)或[DateTime.TryParseExact()](http://msdn.microsoft.com/en-us/library/ms131044.aspx)（除非这是用于 javascript，在这种情况下，您确实应该将其作为标签包含在内）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:22:55.447

试试这个：

```
^(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)\d\d$ 
```

如果您需要有关单个数字的进一步解释，请参见此处：[正则表达式描述](http://www.regular-expressions.info/regexbuddy/datemmddyyyy.html)

**更新：**

如果您想检查日期和时间，请使用以下正则表达式：

```
^(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)\d\d ([01]?[0-9]|2[0-3]):[0-5][0-9] (am|pm|AM|PM)$ 
```

我用值“02.02.2012 12:00 AM”测试了这个……它对我有用。

# html - 单击时提交表单的单选按钮集

> ID：13826836
> 
> 赞同：0
> 
> 时间：2012-12-11T19:08:59.590
> 
> 标签：html, javascript-events

我有一组 10 个**单选按钮**（例如，在 1 到 10 评级系统中），当您`click`选择时，它会自动提交评级。这是通过以下方式实现的：

```
<td>
    <input type="radio" name="img_rating" value="1" onclick="document.goRate.submit();return false;">
</td>
<td>
    <input type="radio" name="img_rating" value="2" onclick="document.goRate.submit();return false;">
</td>
<td>
    <input type="radio" name="img_rating" value="3" onclick="document.goRate.submit();return false;">
</td>
<td>
    <input type="radio" name="img_rating" value="4" onclick="document.goRate.submit();return false;">
</td>
<td>
    <input type="radio" name="img_rating" value="5" onclick="document.goRate.submit();return false;">
</td>
<td>
    <input type="radio" name="img_rating" value="6" onclick="document.goRate.submit();return false;">               
</td>
<td>
    <input type="radio" name="img_rating" value="7" onclick="document.goRate.submit();return false;">
</td>
<td>
    <input type="radio" name="img_rating" value="8" onclick="document.goRate.submit();return false;">
</td>
<td>
    <input type="radio" name="img_rating" value="9" onclick="document.goRate.submit();return false;">
</td>
<td>
    <input type="radio" name="img_rating" value="10" onclick="document.goRate.submit();return false;">
</td> 
```

有没有办法做到这一点是一种需要更少**代码**的方法？理想情况下，有一些方法可以让我不必包含相同的**onclick** 10 次，但也许这是最好的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:31:50.420

如果你愿意，你可以使用 jQuery。因为它看起来像这样：

```
<form name="gotoRate" id="gotoRate">
    <input type="radio" value="1" name="img_rating">1
    <input type="radio" value="2" name="img_rating">2
    <input type="radio" value="3" name="img_rating">3
    <input type="radio" value="4" name="img_rating">4
    <input type="radio" value="5" name="img_rating">5
    <input type="radio" value="6" name="img_rating">6
    <input type="radio" value="7" name="img_rating">7
    <input type="radio" value="8" name="img_rating">8
    <input type="radio" value="9" name="img_rating">9
    <input type="radio" value="10" name="img_rating">10
</form>​​​​​​​​​​​​​​​​​​​​​​​​ 
```

和 jQuery 部分

```
$(function(){
   $("input:radio").change(
      function(){
         $("form#gotoRate").submit();
      }
   );
}); 
```

# php - 我的 ip 在存储到 mysql 时被转换

> ID：13826837
> 
> 赞同：1
> 
> 时间：2012-12-11T19:09:05.083
> 
> 标签：php, mysql, database, ip

我正在编写一个获取访问者 IP 的脚本，通过爆炸删除它的点，将不带点的 IP 存储在数据库中，然后获取它并回显它。但是，当我将它存储到数据库中时，我的 IP 变得非常混乱。

[这是代码！](http://hastebin.com/hibeteragi.php)

示例：我的 ip 是`178.175.35.205`，没有点：`17817535205`，但是当通过 MYSQL 时，我什至可以在 PhpMyAdmin 上看到它，转换为`2147483647`.

更新：结果一切都很好，但我使用`INT`的是`BIGINT`. 那解决了它。我现在正在使用 ip2long 和 long2ip。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T19:15:04.703

强烈建议：

1）将IP存储为字符串

好处：

2）您可以在“。”中留下。

... 和 ...

3) 您可以容纳 IPv4 和/或 IPv6 地址

恕我直言..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T19:12:29.957

不要重新发明轮子

使用`http://php.net/manual/en/function.ip2long.php`和`http://php.net/manual/en/function.long2ip.php` 函数进行转换。

它还将为您验证它

```
$ipToStore =  ip2long($ip);
if (false !== $ipToStore) {
    // Store your ip
}

// Read DB
echo long2ip($ipFromDB); 
```

确保在 db 中用于`BIGINT`存储它。

[http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html#integer-types](http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html#integer-types)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:15:12.730

您的问题是您使用的整数表示大于可以存储`INT`在 MySQL 中的列中的整数表示。在 PHP 中，您可以使用该`ip2long`函数将 IP 地址转换为适当的 32 位整数。

# html - 如何将 HTML 链接转换为 HTML 表单？

> ID：13826838
> 
> 赞同：1
> 
> 时间：2012-12-11T19:09:15.970
> 
> 标签：html, forms, jsp

我想转换这个 HTML 链接：

```
<a href="UserServlet?action=listLog&firstName=<c:out value="${user.name}"/>"> Shiko Loget </a> 
```

到 HTML 表单，例如：

```
<form name="frmUserPanel" action="UserServlet" method="GET" action="listLog" >
    <input type="submit" value="Logs" value=<%=user %>>
</form> 
```

我不知道这是否可能，但如果有人有任何想法，它将对我非常有帮助！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:12:15.437

在表格内添加：

```
<input name="action" type="hidden" value="listLog" />
<input name="firstName" type="hidden" value="${user.name}" /> 
```

删除当前表单标签中的第二个操作属性

# windows-8 - 如何使用 MediaCapture 类在 Windows 8 中显示 2 个摄像头的预览

> ID：13826839
> 
> 赞同：1
> 
> 时间：2012-12-11T19:09:19.373
> 
> 标签：windows-8

我希望能够使用 MediaCapture 类显示多个相机设备的预览。目前，我使用包含设备 ID 的 MediaCaptureInitializationSettings 对象初始化 MediaCapture。设置对象仅接收 1 个 VideoDeviceId，因此我无法为同一个 MediaCapture 对象设置多个视频源。我尝试的另一件事是创建多个 MediaCapture 对象，每个设备一个。但是，看起来最后一个被初始化的是获得设备访问权限的设备，因此即使有多个媒体设备，每个设备都关联到不同的设备，也只允许其中一个设备的视频显示为预览。

下面是代码，以便您更好地理解。

```
async private void PreviewDevice(string deviceId)
{
    var mediaCapture = new MediaCapture();
    var mediaCaptureSettings = new MediaCaptureInitializationSettings
    {
        VideoDeviceId = deviceId
    };
    await mediaCapture.InitializeAsync(mediaCaptureSettings);
    var previewElement = new CaptureElement
    {
        Source = mediaCapture
    };
    CamerasDisplayGrid.Children.Add(previewElement);
    await mediaCapture.StartPreviewAsync();
} 
```

我想要实现的是同时在屏幕上获得几个摄像头的预览。

请指教。先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:04:36.690

也许这个链接可以帮助：[http ://social.msdn.microsoft.com/Forums/sr-Cyrl-CS/winappswithcsharp/thread/13d2ce8f-de6d-47c0-8992-4d443a49326f](http://social.msdn.microsoft.com/Forums/sr-Cyrl-CS/winappswithcsharp/thread/13d2ce8f-de6d-47c0-8992-4d443a49326f)

> 从应用程序的角度来看，这在理论上是可行的，但也存在硬件限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:39:36.713

我遇到了同样的问题，这就是我所做的：

1.  创建画布对象
2.  在该画布对象中插入我想要的尽可能多的捕获元素
3.  枚举所有可用的相机`DeviceInformation.FindAllAsync(DeviceClass.VideoCapture);`
4.  将我找到的每个相机 ID 与捕获元素相关联。
5.  部署。

但是，当我从 vs 11 开始运行应用程序时，它只显示一个活动摄像头，但是，当我从开始菜单运行它时，它会显示我拥有的所有摄像头。

# mysql - 按列描述中更改的变量值过滤选择的行

> ID：13826842
> 
> 赞同：3
> 
> 时间：2012-12-11T19:09:29.130
> 
> 标签：mysql, variables, select, having

谁能解释以下两个请求之间的区别：

```
SET @foundnow=0;
SELECT id, (@foundnow:=IF(`id`=3,1,0)) as ff
FROM `sometable` 
HAVING @foundnow=0
                                  result is
id  ff
1   0
2   0
3   1 
```

**和**

```
SET @foundnow=0;
SELECT id, (@foundnow:=IF(`id`=3,1,0)) as ff
FROM `sometable` 
HAVING ff=0
                                  result is
id  ff
1   0
2   0
4   0
5   0
... 
```

为什么首先给出id = 3（包括）的所有行，第二个 - 除了id = 3的所有行？

我想与这个问题相关的是以下请求的“意外”行为

```
SET @tot=0;
SELECT @tot:=@tot+1 as `ff`
FROM `anytable`
HAVING (`ff`>10) 
```

给出 ff=12,14,16,18 的行...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:32:41.400

`@foundnow`不是每行变量。它继续存在。创建列`ff`使其成为每行值。另外，从[文档中](http://dev.mysql.com/doc/refman/5.5/en/user-variables.html)：

> 在 SELECT 语句中，每个选择表达式仅在发送到客户端时才被计算。这意味着在 HAVING、GROUP BY 或 ORDER BY 子句中，引用在选择表达式列表中“赋值”的变量不会按预期工作：

这意味着您的第一个示例如下所示：

*   1：需要@foundrow，它是0，所以发送，将@foundrow设置为新值（0）
*   2：需要@foundrow，它是0，所以发送，将@foundrow设置为新值（0）
*   3：需要@foundrow，它是0，所以发送，将@foundrow设置为新值（1）
*   3：有需求@foundrow，为1，不发
*   4：有需求@foundrow，为1，不发
*   5：有需求@foundrow，为1，不发
*   ETC...

你的第二个是这样的：

*   1：需要ff，执行select，设置@foundrow，设置ff（=不再@foundrow）=发送
*   2：需要ff，执行select，设置@foundrow，设置ff（=不再@foundrow）=发送
*   3：有需要ff，执行select，设置@foundrow，设置ff（=不再@foundrow）=不发送
*   4：需要ff，执行select，设置@foundrow，设置ff（=不再@foundrow）=发送

*因此，如果@foundrow!=0，第一个示例根本*不计算表达式，因为@foundrow 是已知的，MySQL 不关心该选择表达式中的内容。第二个引用结果集中的一列，因此必须知道该结果并执行选择。

`HAVING`此外，如果可以使用's，请尽量避免使用子句，`WHERE`它们是*非常*受欢迎的。

# python - Pycassa，线程池，“线程 Thread-3 中的异常（很可能在解释器关闭期间引发）：”

> ID：13826843
> 
> 赞同：1
> 
> 时间：2012-12-11T19:09:34.203
> 
> 标签：python, multithreading, cassandra, threadpool, pycassa

.我正在尝试使用 pycassa 加快插入 Cassandra 的速度。我听说使用多线程和打开多个连接可以大大加快速度。我正在插入大量 json 格式的推文。我的代码在这里工作了一段时间，然后线程开始抛出异常并停止，似乎我拥有的线程越多，它停止工作的速度就越快......我猜问题是与 cassandra 的连接，有点做连接池。有任何想法吗？

编辑：所有线程都抛出“线程 Thread-3 中的异常（很可能在解释器关闭期间引发）：”

```
import time
import pycassa
from pycassa.pool import ConnectionPool
from pycassa.columnfamily import ColumnFamily
from datetime import datetime 
import json
import threadpool
pool = threadpool.ThreadPool(4)
kspool = ConnectionPool('TweetsKS',use_threadlocal = True)

def process_tasks(lines):

    #let threadpool format your requests into a list
    requests = threadpool.makeRequests(insert_into_cfs, lines)

    #insert the requests into the threadpool
    for req in requests:
        pool.putRequest(req) 

def read(file):
    bench = open("bench.txt", "w")
    bench.write(str(datetime.now())+"\n")
    """read data from json and insert into keyspace"""
    json_data=open(file)
    lines = []
    for line in json_data:
        lines.append(line)
    process_tasks(lines)

def insert_into_cfs(line):

    user_tweet_cf = pycassa.ColumnFamily(kspool, 'UserTweet')
    user_name_cf = pycassa.ColumnFamily(kspool, 'UserName')
    tweet_cf = pycassa.ColumnFamily(kspool, 'Tweet')
    user_follower_cf = pycassa.ColumnFamily(kspool, 'UserFollower')

    tweet_data = json.loads(line)
    """Format the tweet time as an epoch seconds int value"""
    tweet_time = time.strptime(tweet_data['created_at'],"%a, %d %b %Y %H:%M:%S +0000")
    tweet_time  = int(time.mktime(tweet_time))

    new_user_tweet(user_tweet_cf,tweet_data['from_user_id'],tweet_time,tweet_data['id'])
    new_user_name(user_name_cf,tweet_data['from_user_id'],tweet_data['from_user_name'])
    new_tweet(tweet_cf,tweet_data['id'],tweet_data['text'],tweet_data['to_user_id'])

    if tweet_data['to_user_id'] != 0:
        new_user_follower(user_follower_cf,tweet_data['from_user_id'],tweet_data['to_user_id'])

"""4 functions below carry out the inserts into specific column families"""     
def new_user_tweet(user_tweet_cf,from_user_id,tweet_time,id):
    user_tweet_cf.insert(from_user_id,{(tweet_time): id})

def new_user_name(user_name_cf,from_user_id,user_name):
    user_name_cf.insert(from_user_id,{'username': user_name})

def new_tweet(tweet_cf,id,text,to_user_id):
    tweet_cf.insert(id,{
    'text': text
    ,'to_user_id': to_user_id
    })  

def new_user_follower(user_follower_cf,from_user_id,to_user_id):
    user_follower_cf.insert(from_user_id,{to_user_id: 0})   

if __name__ == '__main__':
    read('tweets.json') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:04:39.850

好的，这里的问题是我使用线程池。我需要 pool.wait 之后 pool.putRequest(req) （在循环外） 我的主线程在其余线程之前完成，它们不是守护进程。

有了 2 个线程，我的 Cassandra 插入速度大约是原来的两倍……但你猜怎么着！？它仍然比 MySQL 慢！！有 6 个线程，它几乎是一样的......我猜需要更多的修补！

# algorithm - 何时使用 Kruskal 算法与 Prim 算法

> ID：13826846
> 
> 赞同：2
> 
> 时间：2012-12-11T19:09:39.857
> 
> 标签：algorithm, graph, prims-algorithm, kruskals-algorithm

> **可能的重复：**
> [Kruskal vs Prim](https://stackoverflow.com/questions/1195872/kruskal-vs-prim)

你什么时候会使用 Kruskal 算法而不是 Prim 算法来找到最小生成树？哪种输入图和节点更适合每种类型？在什么情况下，在空间和时间方面使用其中一种更有效？

他们的特定输入是否使一个比另一个好得多？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T19:15:26.053

一个重要的区别：如果您的图表断开连接，Prim 对您没有好处（需要连接图表）。另一方面，Kruskal 将适用于连通图或不连通图。在后一种情况下，它会找到*最小生成森林*，即每个连接组件的 MST。

# android - 未找到 Android 活动

> ID：13826849
> 
> 赞同：0
> 
> 时间：2012-12-11T19:10:03.670
> 
> 标签：android

我有一个问题，我今天必须解决。我的程序找不到活动。Activity 文件存在，并且在 manifest 中声明。

我使用以下代码调用活动：

```
Intent intento = new Intent(this, Hide.class);
startActivity(intento); 
```

活动：

```
public class Hide extends Activity{
public void onCreate(Bundle savedInstanceState) {
    PackageManager pm = getApplicationContext().getPackageManager(); 
    pm.setComponentEnabledSetting(getComponentName(),   PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.DONT_KILL_APP);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T19:12:50.653

如果 Activity 在另一个包中，则在 Manifast 中注册 Activity ：

```
<activity
    android:name="teru.SimDetect.TFC.Hide"
    android:label="Hide" >
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:09:14.457

试试这样

```
<activity
android:name=".Hide"
android:label="Hide" >
</activity> 
```

不要使用包名。

并像这样使用来调用活动

```
Intent intento = new Intent(YOUR_PRESENT_CLASS.this, Hide.class);
startActivity(intento); 
```

# java - 错误：“容器类型中的方法 add(Component) 不适用于参数 (Square)

> ID：13826850
> 
> 赞同：2
> 
> 时间：2012-12-11T19:10:04.300
> 
> 标签：java, swing

我有上述问题 - 我想知道是否有任何专家可以提供帮助。

1.  组件是我从 java.awt API 导入的项目

2.  我不知道 Eclipse 从哪里派生出“容器”！！

3.  在我搜索的 Qs 中，它在“参数”之后显示 (Square) 的地方，它在其他人的 Qs 中有一个数据类型 - 在我的 Qs 中，它是一个与下面的相同包中的类，其中错误出现在第 19 行“choras.add(trial);”中，所以我假设该类被检测为一种类型。

代码：

```
package square;

import java.awt.Component;
import javax.swing.JFrame;
import javax.swing.JComponent;
public class SquareTest 
{
    public static void main(String[] args)
    {
        Square trial = new Square(12);
        {
            JFrame choras = new JFrame();

            choras.setSize(300, 430);
            choras.setTitle("Hi iko square yangu");
            choras.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            choras.add(trial);

            choras.setVisible(true);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T19:25:45.800

> Container 类型中的方法 add(Component) 不适用于参数（Square）

[`javax.swing.JFrame`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html)extends [`java.awt.Frame`](http://docs.oracle.com/javase/7/docs/api/java/awt/Frame.html)extends [`java.awt.Window`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html)extends[`java.awt.Container`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html)因此`JFrame`是 的一种`Container`。

[`Container#add`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#add%28java.awt.Component%29)期望从 扩展的对象[`java.awt.Component`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html)。

据推测，`Square`不会从任何继承自（直接或间接）的类扩展`java.awt.Component`，但由于您没有为我们提供该类，我们只能猜测......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-12T02:05:56.260

在你的`Square`课堂上，确保你正在扩展/实现一些东西：

```
public class Square extends JPanel 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:14:42.893

答案是不能将 Shape 添加到 JFrame。[（您可以在此处](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)阅读有关容器的信息）。

[如果您希望在 Swing 中使用自定义形状，这篇文章](https://stackoverflow.com/questions/2483533/java-swing-custom-shapes-2d-graphics)可能对您有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T19:13:43.873

错误非常明显[**Jframe.add(Component)**](http://docs.oracle.com/javase/6/docs/api/java/awt/Container.html#add%28java.awt.Component%29)需要一个[**java.awt.Component**](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html)作为参数，并且您将**Square**传递给它，因此出现错误。

# tsql - 如何从 SQL Server CTE 设置参数值？

> ID：13826851
> 
> 赞同：3
> 
> 时间：2012-12-11T19:10:09.123
> 
> 标签：tsql, sql-server-2008-r2, common-table-expression

给定以下 SQL：

```
;WITH Results AS
    (
        SELECT ItemListID, Title,  
        ROW_NUMBER() OVER(ORDER BY ItemListID DESC) as intRow, 
        COUNT(ItemListID) OVER() AS ActualNumberOfResults 
        FROM ItemData
        WHERE FREETEXT(Title, @FTSSearchTerm)
        AND WebsiteID = @WebsiteID
        AND ContentTypeID = @ContentTypeID
        AND GeoID2 = @GeoID                                 
     )
SELECT * FROM Results
WHERE intRow BETWEEN @intStartRow AND @intEndRow
ORDER BY ItemListID DESC    

SELECT @NumberOfResultsReturned = @@ROWCOUNT 
```

我想将一个参数 @ActualNumberOfResults 设置为从 CTE 返回的 TOP(1) ActualNumberOfResults 的值。

在 CTE 之后，我使用了以下内容，但似乎重复：

```
SELECT @ActualNumberOfResults = COUNT(*)
FROM ItemData
WHERE CONTAINS(Title, @FTSSearchTerm  )
AND WebsiteID=@WebsiteID 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T12:22:22.283

```
;WITH cte AS
 (
  SELECT ItemListID, Title,
         CASE WHEN ROW_NUMBER() OVER(ORDER BY ItemListID DESC) 
                   BETWEEN @intStartRow AND @intEndRow THEN 1
                   END AS NumberOfResultsReturned,      
         COUNT(ItemListID) OVER() AS ActualNumberOfResults          
  FROM ItemData
  WHERE FREETEXT(Title, @FTSSearchTerm)
        AND WebsiteID = @WebsiteID
        AND ContentTypeID = @ContentTypeID
        AND GeoID2 = @GeoID                                 
 )
 SELECT @NumberOfResultsReturned = COUNT(NumberOfResultsReturned), 
        @ActualNumberOfResults = MAX(ActualNumberOfResults)
 FROM cte 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/ca3a5/1/0)上的演示[](http://sqlfiddle.com/#!3/ca3a5/1/0)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:25:50.397

访问在 MSDN 上查看此链接> [http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/c774bb71-84c9-44ce-bfce-a256ecbf56ab](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/c774bb71-84c9-44ce-bfce-a256ecbf56ab)

```
;WITH CTE1
 AS (...)
SELECT * FROM CTE1

;WITH CTE2
AS (...)
SELECT * FROM CTE2 
```

这里是你的代码

```
;WITH Results AS
    (
        SELECT ItemListID, Title,  
        ROW_NUMBER() OVER(ORDER BY ItemListID DESC) as intRow, 
        COUNT(ItemListID) OVER() AS ActualNumberOfResults 
        FROM ItemData
        WHERE FREETEXT(Title, @FTSSearchTerm)
        AND WebsiteID = @WebsiteID
        AND ContentTypeID = @ContentTypeID
        AND GeoID2 = @GeoID                                 
     )
SELECT * FROM Results
WHERE intRow BETWEEN @intStartRow AND @intEndRow
ORDER BY ItemListID DESC   

SELECT @NumberOfResultsReturned = @@ROWCOUNT

;WITH Results1 AS
    (
        SELECT ItemListID, Title,  
        ROW_NUMBER() OVER(ORDER BY ItemListID DESC) as intRow, 
        COUNT(ItemListID) OVER() AS ActualNumberOfResults 
        FROM ItemData
        WHERE FREETEXT(Title, @FTSSearchTerm)
        AND WebsiteID = @WebsiteID
        AND ContentTypeID = @ContentTypeID
        AND GeoID2 = @GeoID                                 
     )

SELECT @ActualNumberOfResults = COUNT(*)
FROM Results1 
```**

# php - 将数据插入 mysql 数据库，从 2.6 版到 5.1 版不再有效

> ID：13826859
> 
> 赞同：0
> 
> 时间：2012-12-11T19:10:30.673
> 
> 标签：php

我最近从 phpmyadmin 2.6 升级到 5.1，还安装了 wamp...我知道要等很久了。我有一个带有简单变量的网络表单，它们不再插入到我的数据库中

```
<form method="POST" action="record.php">

 td style="width: 472px">
    <input type=text name=travel size=40 style="color: black;background-color:#FFFF66; width: 270px;"></td>
    </tr> 
```

和插入 php:::

```
<?
$travel=$_POST['travel'];
$db="xacall";

$link = mysql_connect("localhost", "sql", "sql");
//$link = mysql_connect("localhost",$_POST['username'],$_POST['password']);
if (! $link)
die("Couldn't connect to MySQL");
mysql_select_db($db , $link) or die("Select Error: ".mysql_error());
$result=mysql_query("INSERT INTO ircb (travel) VALUES ('$travel')")or die("Insert Error: ".mysql_error());

//write to file
$fp = fopen("IR_Call_Entries.txt", "a"); 
fwrite($fp, $_POST['travel'] . "\n" . 
close($fp);

?> 
```

我提交，没有收到任何错误消息..但没有任何内容，也没有任何内容...... POST 错误..我应该使用 GET 吗？啊，困惑，谢谢我也回显了变量，但没有显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:41:52.020

将表格用作：

```
<form method="post" action="record.php">

<td style="width: 472px">
<input type="text" name="travel" size="40" style="color: black;background-color:#FFFF66; width: 270px;"></td>
</tr> 
```

并使用以下命令调试 post 变量：`print_r($_POST)`

```
 <?php #Please use full open tag.
    $travel=$_POST['travel'];
    $db='xacall';

    $link = mysql_connect('localhost', 'sql', 'sql') or die("Couldn't connect to MySQL");
    mysql_select_db($db , $link) or die('Select Error: '.mysql_error());
    $result=mysql_query("INSERT INTO ircb (travel) VALUES ('$travel')")or die('Insert Error: '.mysql_error());

   print_r($_POST);

   #write to file
   $fp = fopen('IR_Call_Entries.txt', 'a'); 
   fwrite($fp, $_POST['travel'] . '\n' ; #you had a concat sign here? 
   close($fp);
   ?> 
```

我也尽可能多地使用单引号。

# jpa - Glassfish 中的 LAZY 关系实例化问题

> ID：13826864
> 
> 赞同：2
> 
> 时间：2012-12-11T19:10:49.667
> 
> 标签：jpa, ejb, glassfish-3

我有 Glassfish 3.1 和 oneToMany 关系。不断报错：

```
Exception Description: An attempt was made to traverse a relationship using indirection that had a null Session. This often occurs when a n entity with an uninstantiated LAZY relationship is serialized and that lazy relationship is traversed after serialization. To avoid this issue, ins tantiate the LAZY relationship prior to serialization. 
```

用户实体。

```
@Entity
@Table(name="USERS")
public class User implements Serializable
{
    private static final long serialVersionUID = -8636046618352460140L;
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private long userId;
    private String userName;
    private int userAge;
    private double latitude;
    private double longitude;

    public User() {

    }

// getters & setters
} 
```

集团实体

```
@Entity
@Table(name="USERS_GROUPS")
public class Group implements Serializable
{
    private static final long serialVersionUID = -9124043819358665396L;
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private long groupId;
    private String groupName;
    @OneToMany(cascade=CascadeType.PERSIST, fetch=FetchType.EAGER)
    @JoinTable(name="JOIN_USER_GROUP",
            joinColumns={@JoinColumn(name="groupId")},
            inverseJoinColumns={@JoinColumn(name="userId")})
    private List<User> users = null;

    public Group() {

    }
// getters & setters
} 
```

还有豆子：

```
@PersistenceContext
private EntityManager em;
    ...
public Group searchGroup(String groupName) {
    Query q = em.createQuery("SELECT g FROM Group g " +
            "WHERE g.groupName = :name");
    q.setParameter("name", groupName);
    Group result = (Group) q.getResultList().get(0);
    result.getUsers().size(); // << LAZY instantiation
    return result;
}
// NOT TESTED
public void updateGroup(Group group) 
{
    em.merge(group);
}

    ... 
```

客户端测试驱动程序：

```
public static void main(String[] args) 
{
    try
    {
        Context jndi = new InitialContext();

        GroupManagementService service = (GroupManagementService)
                  jndi.lookup("java:global/GroupsManagement/GroupManagementServiceImp");

        User u = new User("John", 20, 54.04, 0.4);

                    // the group home is already in a database
        Group group = service.searchGroup("home");

                    group.getUsers().add(u); // << ERROR here
                    service.updateGroup(group);

                    /* IF do this */
        List<User> l = group.getUsers();
        if(l == null)
            System.out.println("NULL");
        else {
            System.out.println("SIZE: "+l.size()); // << ERROR here

        }

                    ... 
```

关于代码的任何建议？论坛上发布的类似问题，不幸的是对我不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T19:35:06.693

对 group.getUsers() 的调用导致抛出此异常，因为用户列表从未填充到 JPA 会话中。必须在退出 JPA Session 范围之前遍历惰性关系以避免异常。

在许多情况下，只需在 JPA 会话中对延迟加载的列表调用 size() 即可解决异常。

```
public Group searchGroup(String groupName) {
    Query q = em.createQuery("SELECT g FROM Group g " +
        "WHERE g.groupName = :name");
    q.setParameter("name", groupName);
    Group result = (Group) q.getResultList().get(0);
    result.getUsers().size(); // << LAZY instantiation
    return result;
} 
```

但是，在某些情况下 .size() 本身无法解决问题。我发现它在发生这种情况时与 JOIN FETCH 结合使用。

```
public Group searchGroup(String groupName) {
    Query q = em.createQuery("SELECT g FROM Group g LEFT JOIN FETCH g.users " +
        "WHERE g.groupName = :name");
    q.setParameter("name", groupName);
    Group result = (Group) q.getResultList().get(0);
    result.getUsers().size(); // << LAZY instantiation
    return result;
} 
```

执行 JOIN FETCH 的另一种方法：

```
public Group searchGroup(String groupName) {
    Query q = em.createQuery("SELECT g FROM Group g " +
        "WHERE g.groupName = :name");
    q.setParameter("name", groupName);
    q.setHint("eclipselink.left-join-fetch","g.users"); // << join fetch as hint
    Group result = (Group) q.getResultList().get(0);
    result.getUsers().size(); // << LAZY instantiation
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-09T20:37:15.220

我将获取类型设置为 EAGER，这是我弄清楚如何避免错误的唯一方法：

```
@OneToMany(..., fetch=EAGER, mappedBy = "...") 
```

# ms-access - VBA 从组合框中执行代码

> ID：13826869
> 
> 赞同：4
> 
> 时间：2012-12-11T19:11:08.507
> 
> 标签：ms-access

我有一个非常复杂的过程，包括从不同的共享中下载多个文件，将这些文件连接到工作表中，操作和计算相关信息，然后将特定字段（和计算）作为报告导出到多个 Excel 工作簿中。

我对这个过程进行了编码，以便我可以单击一个按钮，整个过程将端到端执行。我有一系列用作“指标”的文本框（红色 - 这部分失败，绿色 - 这部分成功）。可以想象，整个过程的代码非常庞大（复制到 MSWord 时为 32 页），当我遇到问题时很难清除。

我想到我想把代码放到一个表格中，这样它就更加模块化并且更容易处理。我已经设置了一个组合框，其中包含我要执行的操作，以及第二个组合框，其中包含我要使用的报告/文件/对象（即删除 - 表 2、获取 - 文件 1、导出 - 报告 4）。我已经成功地创建了 SQL 语句来执行简单的事情，例如来自 tbl_test 的 del * 并从组合框中执行它而没有任何问题。

我需要知道的是，是否有一种方法可以将本质上是代码片段的内容放入表（备忘录字段）中，然后在我选择匹配的组合时执行该 vba 代码。

IE 'Acquire - File1' 的代码完全是 VBA 代码；它映射网络驱动器、定位文件、下载文件并将其移动到目录。

IE 'Scrub - tblMain_Part1' 的代码是 vba 和 sql 代码的组合；它检查文件是否存在 (vba)，如果找到它，它会删除主表 (sql) 的一部分并附加它找到的文件 (sql) 的内容，然后更新监视器以指示它已完成（vba）。如果未找到该文件，它将监视器框更改为红色并更新命令按钮标题 (vba)

我不是 vba 的天才，但我有自己的想法。我的思考过程是，如果我基本上可以将代码分解为表​​中可管理的块，如果我想运行整个过程，我可以按顺序调用代码片段，或者我可以重新执行部分代码根据需要选择操作和报告/文件/对象组合。

任何想法/想法表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:23:46.720

我认为最好将代码拆分为 Subs。您循环访问的表将有一个*Sub-Name*字段和一个*blnSuccess*字段。您的代码将遍历运行每个子程序的表，然后根据您收到的任何错误更新*blnSuccess 。*当您尝试查看发生了什么时，这将为您提供可查询的结果集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:33:10.603

考虑使用宏。你不应该需要一张桌子。此外，考虑将硬编码的 SQL 移动到查询中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T19:46:39.537

我认为您不应该使用表格，只需为每个操作创建一个具有不同子项的模块。在您的按钮事件中，在组合选择之后，我会做一个案例陈述。

```
 dim strOperation as string
      strOperation = me!selectionOne
     Select Case strOperation        
    Case "delete": deleteTable(me!selectionTwo)
    Case "export": export(me!selectionTwo)
    case  "acquire": acquire(me!selectionTwo)     
     End Select 
```

当然，您可以在模块中编写获取、删除和导出方法，并在其中为每个操作提供所需的任何参数。

这只是您可以用来解决此问题的许多想法中的一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T22:22:51.283

我打算编辑原始答案，但这似乎采取了不同的策略......

我认为最好将代码拆分为函数，如果出现错误则返回字符串。您循环遍历的表将具有*strFunction、strError*和*strObject*字段。您的代码将循环遍历基于 case 语句运行每个函数的表，同时将*strObject*作为字符串传递，然后根据您收到的任何错误更新*strError 。*您可以在此过程之后查询表以查看哪些记录中有错误。

如果按钮被称为 cmdRunAll 这里是它的代码。

```
Private Sub cmdRunAll_Click()
    On Error GoTo ErrHandler
    Dim rst As DAO.Recordset
    Set rst = CurrentDb.OpenRecordset("tblCode", dbOpenDynaset, dbSeeChanges)
    If Not rst.EOF Then
        With rst
            .MoveFirst
            Do While Not .EOF
                .Edit
                Select Case !strFunction
                    Case "fExport"
                        !strError = fExport(!strObject)
                End Select
                .Update
                .MoveNext
            Loop
        End With
    End If
    rst.Close
    Set rst = Nothing
    MsgBox "Processes complete"
Exit Sub
ErrHandler:
    Debug.Print Err.Description & " cmdRunAll_Click " & Me.Name
    Resume Next
End Sub 
```

这是一个简单的示例函数

```
Public Function fExport(strTable As String) As String
    On Error GoTo ErrHandler
    Dim strError As String
    strError = ""
    DoCmd.TransferText acExportDelim, , strTable, "C:\users\IusedMyUserNameHere\" & strTable & ".txt"
    fExport = strError
Exit Function
ErrHandler:
    strError = Err.Description
    Resume Next
End Function 
```

# java - Java/CSS - Vaadin：添加开关按钮背景

> ID：13826870
> 
> 赞同：1
> 
> 时间：2012-12-11T19:11:12.657
> 
> 标签：java, vaadin

首先，对不起我的英语

我想为我的切换按钮添加一个新背景，但它不起作用。我在 style.css 中创建了一个新规则，如下所示：

```
.v-switch-slider-gruppe {
    position: absolute;
    top: 0;
    left: 0;
    background: url(images/GruppeSingle.png) no-repeat;
    width: 130px;
    height: 20px;
} 
```

比我想说的 .addStyleName(..) 使用这个 css 规则来切换按钮

```
GridLayout grid = new GridLayout();
Switch sw = new Switch();
sw.addStyleName("v-switch-slider-gruppe" );
grid.addComponent( sw);
mainWindow.addComponent( grid ); 
```

但编译器这样说：

Dez 11, 2012 7:55:33 PM com.vaadin.terminal.gwt.server.AbstractApplicationServlet serveStaticResourcesInVAADIN 信息：请求的资源 [VAADIN/widgetsets/com.example.switchtest.widgetset.SwitchtestWidgetset/switch/images/GruppeSingle.png] 不是从文件系统或通过类加载器找到。将小部件集和/或主题 JAR 添加到类路径或将文件添加到 WebContent/VAADIN 文件夹。

谁能告诉我，错在哪里？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:38:00.640

假设 styles.css 是 WidgetSet 的一部分，在`com.example.switchtest.widgetset/public`目录中，则图像 GruppeSingle.png 需要相对于相同的源位置，例如`com.example.switchtest.widgetset/public/images/GruppeSingle.png`

# sql - SUM 直到按列排序的值

> ID：13826872
> 
> 赞同：0
> 
> 时间：2012-12-11T19:11:18.517
> 
> 标签：sql, sql-server, tsql

我有一张包含产品、数量和重量的表格。我需要找到达到一定价值的较重的产品。例子：

桌子：

```
Product     Qty Weight
PEN         100 50
PEN          10 30
PEN          80 20
PEN         250 20
PEN        1000 10
PAPER       150 80
PAPER      1500 20 
```

查询：查找按重量排序的最大数量达到 200 个的 PEN。

结果：

```
PEN         100 50
PEN          10 30
PEN          80 20 
```

**编辑：** 结果是因为：100+10+80 < 200。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T19:24:06.910

如果您使用的是 SQL 2012，则可以使用这种方法来计算总计：

```
Select
  Qty,
  Weight
From (
  Select
    Qty,
    Weight,
    Sum(Qty) Over(Order By Weight Desc Rows Between Unbounded Preceding And Current Row) As RunningQty
  From
    Test
  Where
    Product = 'PEN'
  ) a
Where
   RunningQty <= 200 
```

[http://sqlfiddle.com/#!6/6157b/4](http://sqlfiddle.com/#!6/6157b/4)

# android - ScrollView 中的 ViewPagerIndicator

> ID：13826876
> 
> 赞同：1
> 
> 时间：2012-12-11T19:11:34.310
> 
> 标签：android, android-viewpager, viewpagerindicator

我正在使用 JakeWharton 的 ViewPageIndicator。我希望寻呼机和指示器的高度跨越 300dp 左右，这样我就可以在它下面有更多内容并且它可以滚动。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/scrollView"
    android:fillViewport="true" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="300dp"
            android:orientation="vertical" >

            <android.support.v4.view.ViewPager
                android:id="@+id/pager"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="1"
                android:paddingTop="2dp" />

            <com.viewpagerindicator.CirclePageIndicator
                android:id="@+id/indicator"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:padding="10dip" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="Testing something cool" />
        </LinearLayout>
    </LinearLayout>

</ScrollView> 
```

事情完美。但我无法滑动 Viewpagper，它真的卡住了，不会滑到下一个。有谁知道如何让它在有限的高度工作？

******编辑******

尝试使用[Here](https://stackoverflow.com/questions/2646028/android-horizontalscrollview-within-scrollview-touch-handling)的解决方案。我不太确定它是否是子类滚动视图的正确方法。

```
public class PlaceDetailsFragment extends SherlockFragment {
    PlaceSlidesFragmentAdapter mAdapter;
    ViewPager mPager;
    PageIndicator mIndicator;

    public static final String TAG = "detailsFragment";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_place_details,
                container, false);

        mAdapter = new PlaceSlidesFragmentAdapter(getActivity()
                .getSupportFragmentManager());

        mPager = (ViewPager) view.findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        mIndicator = (CirclePageIndicator) view.findViewById(R.id.indicator);
        mIndicator.setViewPager(mPager);
        // ((CirclePageIndicator) mIndicator).setSnap(true);

        mIndicator
                .setOnPageChangeListener(new ViewPager.OnPageChangeListener() {
                    @Override
                    public void onPageSelected(int position) {
                        Toast.makeText(PlaceDetailsFragment.this.getActivity(),
                                "Changed to page " + position,
                                Toast.LENGTH_SHORT).show();
                    }

                    @Override
                    public void onPageScrolled(int position,
                            float positionOffset, int positionOffsetPixels) {
                    }

                    @Override
                    public void onPageScrollStateChanged(int state) {
                    }
                });

        return view;
    }

    public class CustomScrollView extends ScrollView {
        private GestureDetector mGestureDetector;
        View.OnTouchListener mGestureListener;

        public CustomScrollView(Context context, AttributeSet attrs) {
            super(context, attrs);
            mGestureDetector = new GestureDetector(context, new YScrollDetector());
            setFadingEdgeLength(0);
        }

        @Override
        public boolean onInterceptTouchEvent(MotionEvent ev) {
            return super.onInterceptTouchEvent(ev) && mGestureDetector.onTouchEvent(ev);
        }

        // Return false if we're scrolling in the x direction  
        class YScrollDetector extends SimpleOnGestureListener {
            @Override
            public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
                if(Math.abs(distanceY) > Math.abs(distanceX)) {
                    return true;
                }
                return false;
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:16:30.727

必须创建一个自定义滚动视图并使用它

```
public class VerticalScrollView extends ScrollView {
    View.OnTouchListener mGestureListener;
    private VelocityTracker mVelocityTracker;
    private int mMaximumVelocity;

    public VerticalScrollView(Context context, AttributeSet attrs) {
        super(context, attrs);
        setFadingEdgeLength(0);
        final ViewConfiguration configuration = ViewConfiguration.get(context);
        mMaximumVelocity = configuration.getScaledMaximumFlingVelocity();
    }

    private boolean doNotInterceptUntilUp = false;

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        // System.out.println("onInterceptTouchEvent");
        int action = ev.getAction();
        int index = MotionEventCompat.getActionIndex(ev);
        int mActivePointerId = MotionEventCompat.getPointerId(ev, index);

        if (action == MotionEvent.ACTION_DOWN) {
            if (mVelocityTracker == null) {
                mVelocityTracker = VelocityTracker.obtain();
            }
            mVelocityTracker.addMovement(ev);
        } else if (action == MotionEvent.ACTION_MOVE) {
            if (doNotInterceptUntilUp) {
                return false;
            }
            mVelocityTracker.addMovement(ev);
            mVelocityTracker.computeCurrentVelocity(1000, mMaximumVelocity);
            int initialVelocity = (int) VelocityTrackerCompat.getXVelocity(
                    mVelocityTracker, mActivePointerId);
            int initialYVelocity = (int) VelocityTrackerCompat.getYVelocity(
                    mVelocityTracker, mActivePointerId);
            if (Math.abs(initialVelocity) > 100) {
                // 140 is the minimum threshold it seems.
                if (!(Math.abs(initialYVelocity) > 140))
                    doNotInterceptUntilUp = true;
                return false;
            }
        } else if (action == MotionEvent.ACTION_UP) {
            doNotInterceptUntilUp = false;
            if (mVelocityTracker != null) {
                mVelocityTracker.clear();
            }
        }
        boolean val = super.onInterceptTouchEvent(ev);
        return val;
    }
} 
```

XML

```
<?xml version="1.0" encoding="utf-8"?>
<com.m7.nomad.VerticalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res/com.m7.nomad"
    android:id="@+id/scrollView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:fillViewport="true" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="300dp"
            android:orientation="vertical" >

            <android.support.v4.view.ViewPager
                android:id="@+id/pager"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="1" />

            <com.viewpagerindicator.CirclePageIndicator
                android:id="@+id/indicator"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:paddingBottom="10dip"
                android:paddingLeft="10dip"
                android:paddingTop="1dip" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="Testing something cool" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="Testing something cool" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="Testing something cool" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="Testing something cool" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="Testing something cool" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="Testing something cool" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="Testing something cool" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="Testing something cool" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="Testing something cool" />
        </LinearLayout>
    </LinearLayout>

</com.m7.nomad.VerticalScrollView> 
```

# javascript - 如何使用 jquery/javascript 添加/删除 html 元素？

> ID：13826881
> 
> 赞同：-2
> 
> 时间：2012-12-11T19:12:09.163
> 
> 标签：javascript, jquery, html, css

我想要的是当单击添加元素时，div 中的所有元素都`class="clLeft"`被复制到 div 中`class="clRow"`。

```
<div class="clRow" >
         <div class="clLeft">               
                <label >Question Type </label>
               <select name="selquetypen" class="clsvtext clsvtextempty" id="selquetype"> 
                    <option value="-">Question Type</option>
                    <option value="1">MCQ</option>   
                    <option value="2">True/False</option> 
               </select> 
              <a id="adddivcleft">add</a>                    
          </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:15:53.827

你可以[克隆](http://api.jquery.com/clone/)它。

```
<div class="clRow" >
         <div class="clLeft">               
                <label >Question Type </label>
               <select name="selquetypen" class="clsvtext clsvtextempty" id="selquetype">
                    <option value="-">Question Type</option>
                    <option value="1">MCQ</option>   
                    <option value="2">True/False</option>
               </select>
          </div>
         <a id="adddivcleft">add</a>                    
 </div> 
```

```
$('#adddivcleft').click(function(){
    var $elem = $('.clLeft:last');
    $elem.after($elem.clone())
}) 
```

[http://jsfiddle.net/3n8pz/](http://jsfiddle.net/3n8pz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:16:55.293

如果您使用的是 jQuery，这可以通过`.clone()`单击处理程序中的方法来实现：

```
$('#adddivcleft').on('click', function(){
   $('.clLeft:first').clone().appendTo('.clRow');
}); 
```

# php - PHP 和 MySQL - 在我的查询中绑定变量之前，我应该转义引号吗？

> ID：13826891
> 
> 赞同：0
> 
> 时间：2012-12-11T19:12:41.537
> 
> 标签：php, mysql, zend-framework, bind

仅使用 bindParam 绑定变量还不够吗？我们还需要添加斜线吗？如果我输入`mike's`，它将作为`mike\\'s`. 我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T19:18:04.367

您不需要在绑定变量之前转义引号。只需确保在您的 PHP 配置中禁用了[magic_quotes](http://php.net/manual/en/security.magicquotes.php) - 这可能是导致双重转义的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:18:21.143

没关系，代码中某处有一个额外的 mysql_escape_string，这导致了麻烦:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:30:12.827

您不需要转义它，我建议将您的文本存储为编码的 utf8_encode/decode

# wpf - 在运行时和设计时将 ViewModel 分配给 UserControl

> ID：13826894
> 
> 赞同：8
> 
> 时间：2012-12-11T19:12:57.003
> 
> 标签：wpf, mvvm, wpf-controls, mvvm-light

我正在使用 MVVM Light 在 WPF 中编写一些数据可视化代码。这是一个片段：

```
 <Window x:Class="EventBlockVisualization.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
            xmlns:ignore="http://www.ignore.com"
            Title="MainWindow"
            mc:Ignorable="d ignore"
            DataContext="{Binding Main, Source={StaticResource Locator}}">
        <Window.Resources>
            <ItemsPanelTemplate x:Key="GraphRowItemsPanelTemplate">
                <StackPanel IsItemsHost="True" Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </Window.Resources>
        <Grid IsSharedSizeScope="True">
            <ScrollViewer Margin="8" ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto" ScrollViewer.CanContentScroll="True">
                <ItemsControl x:Name="GraphItemsControl" Margin="8"  ItemsSource="{Binding VibeEvents, Mode=OneTime}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition SharedSizeGroup="NameWidthSizeGroup" Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock x:Name="NameTextBlock" Text="{Binding Name}" Grid.Column="0" Margin="4,0"/>
                                <ItemsControl x:Name="GraphRowItemsControl" ItemsSource="{Binding VibeEventViewModels, Mode=OneTime}" ItemsPanel="{DynamicResource GraphRowItemsPanelTemplate}"  Grid.Column="1" Margin="4,0">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Grid HorizontalAlignment="Left" VerticalAlignment="Center" Height="10">
                                                <TextBlock x:Name="FGTitleTextBox" Text="{Binding FGTitle}" Visibility="Collapsed"/>
                                                <Button Margin="1,0,0,0" Width="{Binding LengthInSeconds}" HorizontalAlignment="Left" Background="{Binding BackgroundColor}" BorderBrush="#FF2186A1">
                                                    <Button.ToolTip>
                                                        <ToolTip>
                                                            <StackPanel>
                                                                <TextBlock FontWeight="Bold" Text="{Binding FGTitle}"/>
                                                                <TextBlock Text="{Binding LengthText}"/>
                                                            </StackPanel>
                                                        </ToolTip>
                                                    </Button.ToolTip>
                                                </Button>
                                            </Grid>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </Grid>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Grid>
    </Window> 
```

我想换掉中央`ItemsControl.ItemTemplate` `DataTemplate`并使其成为用户控件，以便我可以在 Expression Blend 中更轻松地设计它。

我在 MVVM Light 中找不到包含用户控件的简单示例，但有一些教程文章。例如，在[MVVM 实例化方法](http://www.paulstovell.com/mvvm-instantiation-approaches)（选项 6）中，Paul Stovell 建议在 MVVM Light 中的 UserControl 的 ViewModel 中进行绑定，因此：

```
<UserControl ...>
    <UserControl.Resources>
        <ViewModelLocator x:Key="ViewModelLocator"/>
    </UserControl.Resources>
    <TextBox Text="{Binding Source={DynamicResource ViewModelLocator}, Path=CalculatorViewModel...}" /> 
```

当我在 Expression Blend 中设计 UserControl 时，这将非常有用，因为定位器可以提供一个充满虚拟数据的 ViewModel。但是在运行时会发生什么；该绑定如何被主 ViewModel 中的集合提供的 UserControl 的 ViewModel 类的实例覆盖？MainWindow 在设计时也会出现同样的问题。如果我在 MainWindow 的外观和感觉上使用 Expression Blend，该绑定如何被设计时主 ViewModel 中的集合提供的 UserControl 的 ViewModel 类的实例覆盖？

有许多问题和答案已经涉及到这一点：

1.  在[https://stackoverflow.com/a/3334780/575530](https://stackoverflow.com/a/3334780/575530)中，akjoshi 建议主 ViewModel 包含 UserControl 的 ViewModel 的实例；但是当我设计 UserControl 本身时，它是如何工作的？

2.  在[https://stackoverflow.com/a/9910298/575530](https://stackoverflow.com/a/9910298/575530)中，tam 指出“您希望保持数据上下文打开并可用于绑定到您使用此控件的控件”，并且在以下评论中 SoMoS 补充说需要“在 ViewModel 中为绑定的属性创建属性，当有人想要更改控件的一个属性（如启用某些子控件）时，他将不得不通过 View Model”。这是有希望的，但我不确定要做什么来代替 MainViewModel 的 UserControlViewModel 的可绑定集合。

3.  在[https://stackoverflow.com/a/6340668/575530](https://stackoverflow.com/a/6340668/575530)中，Ehsan Ershadi 建议“对 UserControles 使用 MVVM Light ViewModelLocator 不是一个好主意，因为它是一个静态属性，并且当您要实例化用户控件的多个实例时将有相同的通用 ViewModel，因此它们的行为都相同，如果您决定在整个项目中使用一次，这不是我们想要的 UserControl。” 然后声明“要解决这个问题，您需要修改 ViewModelLocator，例如将所有属性设为非静态”。我不确定这对我有什么帮助。

4.  在[https://stackoverflow.com/a/2637830/575530](https://stackoverflow.com/a/2637830/575530)之后的评论中， Jon Mitchell 提到“看起来 MVVM 确实不适合创建用户控件”。我希望那是不对的。

5.  相反，在[什么时候应该使用 UserControl 而不是 Page？](https://stackoverflow.com/q/2622392/575530)dthrasher 提到“许多 WPF MVVM 框架似乎避免使用 NavigationWindow 和 Page 控件，而是使用嵌套的 UserControls 来编写页面”，即 UserControls 是 MVVM 中的常见设备。

6.  在[https://stackoverflow.com/a/1798649/575530](https://stackoverflow.com/a/1798649/575530)中，Reed Copsey 提醒沙箱“UserControls 始终可以通过公开属性和使用 DataBinding 与其包含的控件对话。这非常好，因为它在各个方面都保留了 MVVM 样式。 " 并且“包含控件可以使用属性将两个用户控件上的两个属性链接在一起，再次保持干净的边界”但是当我在 Expression Blend 中设计 UserControl 时，我看不出这有什么帮助。

7.  在[我应该为我的视图使用 UserControls 而不是 DataTemplates 吗？](https://stackoverflow.com/q/6137997/575530)Rachel 提到偶尔会在将代码剪切并粘贴到 DataTemplate 之前使用 Expression Blend 来设计 UserControl：“如果我确实想用它来设计 DataTemplate，我通常会创建一个新的 UserControl，按照我想要的方式设计它，然后将内容复制/粘贴到 DataTemplate"

对不起这个论文长度问题！在设计一个注定要成为 MainWindow 上集合中项目的视觉对象的 UserControl 时，我对如何使用 MVVM Light 感到困惑，尤其是如何设置三个绑定：运行时视图模型、主视图的设计时视图模型窗口及其用户控件的实例化，以及用于隔离用户控件的设计时视图模型。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T09:25:18.247

我认为你把事情复杂化了：

有什么问题：

```
<Grid IsSharedSizeScope="True">
   <ScrollViewer Margin="8" ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto" ScrollViewer.CanContentScroll="True">
      <ItemsControl x:Name="GraphItemsControl" Margin="8"  ItemsSource="{Binding VibeEvents, Mode=OneTime}">
         <ItemsControl.ItemTemplate>
            <DataTemplate>
               <MyShinyUserControl DataContext={Binding}/>
            </DataTemplate>
         </ItemsControl.ItemTemplate>
      </ItemsControl>
   </ScrollViewer>
</Grid> 
```

将每个 VibeEvent 绑定到用户控件的 DataContext。在用户控件本身中，我建议创建一个设计时 DataContext 以使设计更容易。设计时 DataContext 如下所示：

```
<UserControl x:Class="EMC.Windows.AlarmsModule.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:AlarmsModule="clr-namespace:EMC.Windows.AlarmsModule" d:DesignHeight="300"
    d:DesignWidth="300"
             d:DataContext="{d:DesignInstance Type=AlarmsModule:Alarm}"
    > 
```

这将您带到一个可以构建用户控件并在其中包含设计时数据的地方。而且它很简单，不需要太多（如果有的话）脚手架。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T11:53:01.997

基于[Faster Solutions 的回答](https://stackoverflow.com/a/13836554/575530)，这是我能想到的最简单的示例，它使用 UserControl 在 MVVM Light 中显示列表的内容。

为了完整起见，我将包含我试图尽可能缩短的所有代码，同时仍然提供与用户控件的视图模型和主视图模型中的运行时数据不同的设计时数据。

首先是定位器，VMUCExample/ViewModel/ViewModelLocator.cs：

```
using GalaSoft.MvvmLight.Ioc;
using Microsoft.Practices.ServiceLocation;

namespace VMUCExample.ViewModel
{
    public class ViewModelLocator
    {
        static ViewModelLocator()
        {
            ServiceLocator.SetLocatorProvider(() => SimpleIoc.Default);
            SimpleIoc.Default.Register<MainViewModel>();
            SimpleIoc.Default.Register<ASquareViewModel>();
        }

        public ASquareViewModel ASquare
        {
            get
            {
                return ServiceLocator.Current.GetInstance<ASquareViewModel>();
            }
        }

        public MainViewModel Main
        {
            get
            {
                return ServiceLocator.Current.GetInstance<MainViewModel>();
            }
        }

        public static void Cleanup() {}
    }
} 
```

我没有使用 MVVM Light 的数据服务端，部分是为了让事情变得简单。实时数据和设计时数据之间的明显区别在两个视图模型类中处理。

VMUCExample/ViewModel/ASquareViewModel.cs：

```
using System.Windows.Media;
using GalaSoft.MvvmLight;

namespace VMUCExample.ViewModel
{
    public class ASquareViewModel : ViewModelBase
    {
        private Brush _SquareColour;
        public Brush SquareColour
        {
            get
            {
                return _SquareColour ?? (_SquareColour = IsInDesignModeStatic ?
                    new SolidColorBrush(Color.FromArgb(0xFF, 0xFF, 0x78, 0x78)) : // FF7878 (pastel red)
                    new SolidColorBrush(Color.FromArgb(0xFF, 0xFF, 0xBB, 0x78))); // FFBB78 (nectarine)
            }
            set { _SquareColour = value; }
        }
    }
} 
```

因此，查看 Expression Blend 中的用户控件，我看到一个带有柔和红色填充的简单矩形：

![将屏幕截图与打开的用户控件混合以进行编辑](../Images/f5feb289d4c70165d8f996a858f3fe72.png)

主视图模型位于文件 VMUCExample/ViewModel/MainViewModel.cs 中：

```
using System.Collections.Generic;
using System.Windows.Media;
using GalaSoft.MvvmLight;

namespace VMUCExample.ViewModel
{
    public class MainViewModel : ViewModelBase
    {
        private List<ASquareViewModel> _Squares;
        public List<ASquareViewModel> Squares
        {
            get
            {
                if (_Squares == null)
                {
                    _Squares = new List<ASquareViewModel>();
                    var colour = IsInDesignModeStatic ?
                        new SolidColorBrush(Color.FromArgb(0xFF, 0x78, 0xB2, 0xFF)) : // 78B2FF (pastel blue)
                        new SolidColorBrush(Color.FromArgb(0xFF, 0xF9, 0xFF, 0xC7)); // F9FFC7 (eggshell)
                    for (var i = 0; i < 10; i++)
                    {
                        _Squares.Add(new ASquareViewModel {SquareColour = colour});
                    }
                }
                return _Squares;
            }
            set { _Squares = value; }
        }
        public MainViewModel() {}
    }
} 
```

也可以在 Expression Blend 中编辑此视图，但视图模型代码设置设计时颜色数据的方式不同：

![将屏幕截图与打开的主窗口混合以进行编辑](../Images/5011a0e7782f222d23be3a2264bf236b.png)

这是两个 XAML 文件，首先是 VMUCExample/ASquareUC.xaml：

```
<UserControl x:Class="VMUCExample.ASquareUC"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" d:DesignHeight="15" d:DesignWidth="60"
             d:DataContext="{Binding ASquare, Mode=OneWay, Source={StaticResource Locator}}">
    <Grid>
        <Rectangle Fill="{Binding SquareColour}" Margin="2" Width="50" Height="10"/>
    </Grid>
</UserControl> 
```

您可以看到我使用了[Faster Solutions](https://stackoverflow.com/users/890018/faster-solutions)的建议，`d:DataContext`以便在设计用户控件时我需要的 Expression Blend 的设计时绑定不会阻止我在运行时需要的数据上下文，也不会阻止由我在 Expression Blend 中设计主窗口时的父级。不过我对此感到不舒服，这不是 Paul Stovell 的[Option 6: A XAML View Model Locator](http://www.paulstovell.com/mvvm-instantiation-approaches)中描述为 MVVM Light并[得到](http://groups.google.com/d/msg/wpf-disciples/UO4FUY-znhg/QjfvXp9-fQcJ)@LBugnion认可的方法

另一个视图文件是 VMUCExample\MainWindow.xaml：

```
<Window x:Class="VMUCExample.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vmucExample="clr-namespace:VMUCExample"
        Height="200" Width="100"
        DataContext="{Binding Main, Source={StaticResource Locator}}">
    <Grid x:Name="LayoutRoot">
        <ScrollViewer ScrollViewer.CanContentScroll="True">
            <ItemsControl ItemsSource="{Binding Squares}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <vmucExample:ASquareUC/>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl> 
        </ScrollViewer>
    </Grid>
</Window> 
```

示例应用程序本身仅在一列中绘制十个矩形：

![简单测试应用的屏幕截图](../Images/05d9b466bdafaf61ddbd92984cba335b.png)

太简单了，我知道，但希望能展示三个正在使用的潜在数据集：

1.  用户控件的设计时间（#FF7878 柔和的红色），
2.  主窗口设置的用户控件的设计时间（#78B2FF 柔和的蓝色），以及
3.  主窗口设置的用户控件的运行时间（#F9FFC7 eggshell）。

（注意还有另一个数据选项，主窗口未设置用户控件的运行时间。在这种情况下，用户控件的视图模型选择#FFBB78/nectarine，但我不需要它来探索这些绑定。）

为了完整起见，这里是 VMUCExample\App.xaml 文件：

```
<Application x:Class="VMUCExample.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:VMUCExample.ViewModel"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             StartupUri="MainWindow.xaml"
             mc:Ignorable="d">
    <Application.Resources>
        <vm:ViewModelLocator x:Key="Locator" d:IsDataSource="True" />
    </Application.Resources>
</Application> 
```

# c#-4.0 - 如何保持对父控件的关注

> ID：13826895
> 
> 赞同：1
> 
> 时间：2012-12-11T19:12:59.023
> 
> 标签：c#-4.0, silverlight-4.0

我有包含 3 个控件的主用户控件，问题是当我单击任何子控件时，我失去了具有 keydown 行为的父控件的焦点

任何想法如何保持主要控制集中

# django - 如何创建多个自定义用户模型并能够自定义他们的管理表单？

> ID：13826896
> 
> 赞同：1
> 
> 时间：2012-12-11T19:13:00.763
> 
> 标签：django

**编辑我在**[这里](https://stackoverflow.com/q/13837799/326849)重新提出了问题

我想创建几个扩展的自定义用户模型`django.contrib.auth.models.User`，具有以下功能：

*   一些特定领域

*   一个不错的管理员，即，对于每个模型，我可以轻松自定义的管理表单（例如，显示/隐藏一些字段，包括父`django.contrib.auth.models.User`模型和子模型）。

我几乎设法用下面的代码做到了，但我仍然有一个问题：每次我想从管理员修改 MyUser1 或 MyUser2 的实例时都会清除密码。

这是最好的方法吗？如果是这样，我该如何解决这个清除密码问题？

**模型.py**

```
from django.db import models
from django.contrib.auth.models import User

class MyUser1(User):
    #add more fields specific to MyUser1

class MyUser2(User):
    #add more fields specific to MyUser2 
```

**管理员.py**

```
 class MyUser1AdminForm(forms.ModelForm):

        class Meta:
            model = MyUser1

        def __init__(self, *args, **kwargs):
            super(MyUser1AdminForm, self).__init__(*args, **kwargs)
            self.fields['password'].widget = forms.PasswordInput()

        def save(self, commit=True):
            user = super(MyUser1AdminForm, self).save(commit=False)
            user.set_password(self.cleaned_data["password"])
            if commit:
                user.save()
            return user

    class MyUser1Admin(admin.ModelAdmin):
        form = MyUser1AdminForm

    admin.site.register(MyUser1, MyUser1Admin)

# same for MyUser2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:45:24.900

如果您想让用户输入 pass - 为 pass 添加新字段并在提交前检查它

```
class MyUser1AdminForm(forms.ModelForm):

    check_pass = forms.CharField(label="Password",widget = forms.PasswordInput(), required=True)

    class Meta:
        model = MyUser1
        exclude = ('password',)

    def save(self, commit=True):
        user = super(MyUser1AdminForm, self).save(commit=False)
        if commit and user.check_password(self.cleaned_data["check_pass"]):
            user.save()
        return user 
```

# c++ - 为什么不是对临时对象的非常量引用？

> ID：13826897
> 
> 赞同：59
> 
> 时间：2012-12-11T19:13:07.793
> 
> 标签：c++, temporary-objects

> **可能重复：**
> [const 引用是否会延长临时对象的寿命？](https://stackoverflow.com/questions/2784262/does-a-const-reference-prolong-the-life-of-a-temporary)
> [延长临时工的寿命](https://stackoverflow.com/questions/4670137/prolonging-the-lifetime-of-temporaries)

C++ 只允许将临时对象分配给 const 引用。它不允许分配临时对象来引用。

例如：

```
String& a = String("test");         // Error
const String& a = String("test");   // Ok 
```

我到处搜索这个结果，我只看到以下答案

1.  修改临时对象会导致无法识别的问题
2.  修改临时对象是危险的
3.  在某些时候，你会忘记它是一个临时变量

据说，声明后临时对象消失了。所以你不应该修改它。

如果 C++ 如此热衷于阻止修改临时对象，它应该阻止读取临时对象吧？如果临时对象消失了，那么从那里读取内容没有意义吗？可能发生权利的情况也可能涉及读取。

那为什么它一直阻止单独写入并允许读取？

请给我一个可靠的 C++ 代码解释。

请不要通过指出一些替代方案来偏离问题。请用代码给我一个可靠的答案，为什么允许 const int & 并且不允许 int & 用于临时对象。

一个说 && 在那里.. 我的问题不同.. 另一个说，改变不会反映.. 即使它是 const int & 也不会反映。例如：双a；常量 int & i = a; 一个++；不会影响我。。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-11T19:24:47.997

不允许引用临时对象的原始案例是函数参数。假设这是允许的：

```
void inc(double& x)
{ x += 0.1; }

int i = 0;
inc(i); 
```

为什么不`i`改？

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-11T19:39:25.500

> 如果 C++ 如此热衷于阻止修改临时对象，它应该阻止读取临时对象吧？如果临时对象消失了，那么从那里读取内容没有意义吗？

不，阅读对象是完全明智的。仅仅因为它会在未来消失并不意味着*现在*读取数据是没有意义的。

```
open_file(std::string("foo.txt")); 
```

`std::string("foo.txt")`是一个临时的，在调用后将停止存在，`open_file()`但它包含的数据在它确实存在时非常重要。

不允许临时对象绑定到非常量引用的原因实际上并不是写入临时对象的一些基本问题。事实上，在很多地方，C++ 都非常乐意允许修改临时对象：

```
std::string("foo") = "bar"; 
```

只是设计者认为在不启用任何类似值的情况下会导致足够多的问题（可能是由于“输出参数”的常见习语），所以他们只是做出了一个设计决定，禁止临时绑定到非 const参考。

现在使用右值引用，您可以完全执行以前禁止的操作：

```
void foo(int &&output) {
    output = 1;
}

foo(2); 
```

这很好用，只是不是很有用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-11T19:23:21.810

如果您有一个复制起来非常昂贵的临时对象，您可能更愿意将 a`const&`带到该对象（例如函数返回），而不是将其复制到另一个变量中以供以后使用。对临时对象进行持续引用会将该临时对象的生命周期延长到引用的生命周期，从而允许您访问任何可读状态。

不允许写入，因为一旦你想改变一个变量，你就可以拥有一个真实的实例，而不是一个仅作为非常量引用别名的临时实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T19:27:12.700

这有一个合乎逻辑的原因。想一想，您在这一行中实际上想要什么：

```
String& a = String("test");         // Error 
```

你想要一个参考。引用与它所引用的对象有关。就像对象的地址一样（虽然引用不是地址，但这样解释更清楚）。您实际上尝试获取类似`String("test")`. 但是那个对象会在下一行消失，那么如果它指向的对象不存在，它的地址有什么意义呢？`a`现在指向一些毫无意义的东西......

关于你的第二个问题，允许临时对象有什么意义，好吧，这没有错。例如，考虑将一个`String`对象传递给一个函数的情况，该函数返回一个修改后的字符串，该字符串对应于该字符串。让我们调用函数 DoubleString，而不是这样做

```
String s("hello ");
String s2 = DoubleString(s); 
```

您可以使用更短、更方便的表格

```
String s2 = DoubleString(String("hello ")); 
```

看，临时对象`String("hello ")`在整行代码中都存在，这意味着它在发送到它时是完整的`DoubleString`。只有当整条生产线完成后才会被销毁。

# javascript - 循环通过json返回未定义

> ID：13826898
> 
> 赞同：2
> 
> 时间：2012-12-11T19:13:08.360
> 
> 标签：javascript, asp.net, vb.net, json, web-services

我有一个返回 JSON 对象的 web 服务，但是当我尝试遍历它时，每个对象中的每个项目都返回 undefined

这是从 web 服务返回的 JSON 对象

```
[{"result":14,"question":"6 - 7  مرات اسبوعيا","aID":70},{"result":29,"question":"3 - 5 مرات اسبوعيا","aID":71},{"result":41,"question":"مرة واحدة اسبوعيا","aID":72},{"result":14,"question":"1 - 3 مرات شهريا","aID":73}] 
```

以及我如何遍历它：

```
var resultAsJson = data.d;
$.each(resultAsJson, function (index, resObject) {
    $('#pollResults').append('<p><strong>' + resObject.result + ' ' +
                resObject.question + '</strong></p>');
    alert(resObject.question);

}); 
```

**- - - - - - - - - 更新 - - - - - - - - -**

嗨，伙计们，上面的代码运行良好，问题是我从 web 服务返回的 JSON 响应被序列化如下：

```
 Dim m_result As New Data.Objects.ObjectParameter("Result", GetType(Boolean))
            Dim lstofresult As List(Of addPollvote_Result) = Context.addPollvote(para_pid, para_aid, Date.Now, m_UID, Nothing, HttpContext.Current.Request.ServerVariables("REMOTE_ADDR"), Nothing, m_result).ToList
            Dim m_json As New Script.Serialization.JavaScriptSerializer
            Return m_json.Serialize(lstofresult) 
```

当我删除序列化并返回列表时，它运行良好，请参见下面的工作代码。

```
 Dim m_result As New Data.Objects.ObjectParameter("Result", GetType(Boolean))
            Dim lstofresult As List(Of addPollvote_Result) = Context.addPollvote(para_pid, para_aid, Date.Now, m_UID, Nothing, HttpContext.Current.Request.ServerVariables("REMOTE_ADDR"), Nothing, m_result).ToList
            Return lstofresult 
```

它工作得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:31:25.940

确保`resultAsJson`它实际上是一个 JSON 对象，而不是一个字符串，并且它应该可以工作（[参见这个 jsfiddle](http://fiddle.jshell.net/njyvB/)）——用于`resultAsJson = JSON.parse(resultAsJson)`从字符串到 json 对象的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:20:33.420

问题似乎是您的数据源。

我会使用“for”循环进行测试：

```
var resultAsJson = data.d;
var resultAsJsonLength = resultAsJson.length;

for(i=0;i<resultAsJsonLength;i++) {
    $('#pollResults').append('<p><strong>' + resultAsJson[i].result + ' ' +
    resultAsJson[i].question + '</strong></p>');

    alert(resultAsJson[i].question);
 } 
```

您将不得不提供有关如何访问数据的更多信息，这似乎是您问题的基础......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:27:26.930

试一试。我假设您使用的是 jQuery：

```
// The JSON String from the web service
var jsonString = '[{"result":14,"question":"6 - 7  مرات اسبوعيا","aID":70},{"result":29,"question":"3 - 5 مرات اسبوعيا","aID":71},{"result":41,"question":"مرة واحدة اسبوعيا","aID":72},{"result":14,"question":"1 - 3 مرات شهريا","aID":73}]';

// Parse the JSON string into a JS object
var jsonObj = JSON.parse(jsonString);

// Loop through, and pull what you need from it
$(jsonObj).each(function() {
    console.log(this.result + " " + this.question); 
}); 
```

# javascript - 使用 id 更改输入元素的类

> ID：13826903
> 
> 赞同：0
> 
> 时间：2012-12-11T19:13:21.897
> 
> 标签：javascript, jquery, class, types, submit

> **可能重复：**
> [使用 JavaScript 更改元素的 CSS 类](https://stackoverflow.com/questions/195951/change-an-elements-css-class-with-javascript)

如何更改`<input type="submit:>`不使用 id 的类，只使用 Javascript 中的类。我已经尝试过了（没有运气）：

```
function changeClass(){
    document.getElementById("wpsc_buy_button").setAttribute("class", "btn btn-success");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:17:50.017

$('.originalClass').addClass('newClass')

为什么这行不通？

你也可以

$('.originalClass').addClass('newClass').removeClass('originalClass');

# ruby-on-rails - 循环多条记录时，mongoid 明显泄漏

> ID：13826904
> 
> 赞同：0
> 
> 时间：2012-12-11T19:13:30.397
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

我有一个嵌入许多通知的用户模型，我必须遍历用户集合，然后他们遍历每个通知以删除它或不删除它。

首先，我遇到了光标超时错误，然后使用了这个步骤方法（我在某处读过）和“唯一”标准。我的实际循环代码是这样的：

```
per_batch = 20
users_targeted = User.only(:notifications, :slug).where(:notifications_count.gt => 40).asc(:slug)
0.step(users_targeted.count, per_batch) do |offset|
  users_targeted.limit(per_batch).skip(offset).each do |user|
    user.notifications.only(:_id).read.desc(:updated_at).skip(40).each do |n|
      n.destroy
    end
  end
end 
```

*   我正在使用 mongoid 2.4.8
*   用户收集量约为 8k
*   每个用户最多有 300 条通知

现在，当循环在 3k-4k 用户上时，Heroku dyno 的内存超出其限制并且循环停止。

有谁知道这个问题的解决方案？我必须做很多这样的循环，所以这对我来说有点麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:09:23.217

我不确定这是否是内存泄漏，但是您可以通过不迭代用户集合并尝试使用批量更新来删除通知来处理您的内存问题并更快地完成这些工作。您应该使用[$pop](http://docs.mongodb.org/manual/reference/operator/pop/)和[$inc](http://docs.mongodb.org/manual/reference/operator/inc/)的组合。

```
users = User.where(:notifications_count.gt => 40)
while users.count > 0
  User.collection.update(users.selector, 
                         {"$inc" => {notifications_count: -1}, "$pop" => {notifications: 1}} ,
                         multi: true, safe: true)
end 
```

# css - Css ul ul submenu not hovering over each link

> ID：13826906
> 
> 赞同：-2
> 
> 时间：2012-12-11T19:13:34.713
> 
> 标签：css, menu, hover, html-lists, submenu

I would like to have the ul ul sub menu have the ability to hover over each link; not just the first link on the list. I'm not sure where the problem is (i.e w/ my coding or missing a critical code).

HTML Code:

```
 <div align="left">&nbsp;<div align="left">    <div align="left"><div class="menu-main-menu-container"><ul id="menu-main-menu" class="menu"><li id="menu-item-825" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-825"><a href="#">About Us</a>
    <ul class="sub-menu">
    <li id="menu-item-397" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-397"><a href="http://www.itstelecom.com/NewSite/index.php/about-us/corporate-overview/">Corporate Overview</a></li>
    <li id="menu-item-396" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-396"><a href="http://www.itstelecom.com/NewSite/index.php/about-us/customer-testimonial/">Customer Testimonial</a></li>
    <li id="menu-item-395" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-395"><a href="http://www.itstelecom.com/NewSite/index.php/about-us/press-room/">Press Room</a></li>
    </ul>
    </li>
    <li id="menu-item-826" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-826"><a href="#">Products &amp; Services</a>
    <ul class="sub-menu">
    <li id="menu-item-658" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-658"><a href="http://www.itstelecom.com/NewSite/index.php/products-services/voice/">Voice</a>
    <ul class="sub-menu">
    <li id="menu-item-2230" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2230"><a href="http://#">VoIP</a></li>
    <li id="menu-item-2231" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2231"><a href="http://#">Traditional Voice</a></li>
    <li id="menu-item-2232" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2232"><a href="http://#">Other Services</a></li>
    <li id="menu-item-2233" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2233"><a href="http://#">Mobile App</a></li>
    </ul>
    </li>
    <li id="menu-item-646" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-646"><a href="http://www.itstelecom.com/NewSite/index.php/products-services/data/">Data</a>
    <ul class="sub-menu">
    <li id="menu-item-2235" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2235"><a href="http://#">Test</a></li>
    <li id="menu-item-2236" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2236"><a href="http://#">Test</a></li>
    <li id="menu-item-2237" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2237"><a href="http://#" style="
    display: block;
    ">Test</a></li>
    </ul>
    </li>
    <li id="menu-item-656" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-656"><a href="http://www.itstelecom.com/NewSite/index.php/products-services/computers-servers-network-services/">Computers, Servers, &amp; Network Services</a></li>
    <li id="menu-item-655" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-655"><a href="http://www.itstelecom.com/NewSite/index.php/products-services/equipment-infrastructure/">Equipment &amp; Infrastructure</a></li>
    <li id="menu-item-654" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-654"><a href="http://www.itstelecom.com/NewSite/index.php/products-services/other-services/">Other Services</a></li>
    </ul>
    </li>
    <li id="menu-item-827" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-827"><a href="#">Clients</a>
    <ul class="sub-menu">
    <li id="menu-item-486" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-486"><a href="http://www.itstelecom.com/NewSite/index.php/clients/client-center/">Client Center</a></li>
    <li id="menu-item-489" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-489"><a href="http://www.itstelecom.com/NewSite/index.php/clients/terms-of-service/">Terms of Service</a></li>
    <li id="menu-item-634" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-634"><a href="http://www.itstelecom.com/NewSite/index.php/clients/faqs/">FAQs</a></li>
    <li id="menu-item-603" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-603"><a href="http://www.itstelecom.com/NewSite/index.php/clients/referral-program/">Referral Program</a></li>
    </ul>
    </li>
    <li id="menu-item-828" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-828"><a href="#">Channel Partners</a>
    <ul class="sub-menu">
    <li id="menu-item-632" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-632"><a href="http://www.itstelecom.com/NewSite/index.php/clients/program-overview/">Program Overview</a></li>
    <li id="menu-item-412" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-412"><a href="http://www.itstelecom.com/NewSite/index.php/channel-partners/current-channel-partners/">Current Channel Partners</a></li>
    <li id="menu-item-401" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-401"><a href="http://www.itstelecom.com/NewSite/index.php/channel-partners/partnerships/">Vendor Partnerships</a></li>
    <li id="menu-item-404" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-404"><a href="http://www.itstelecom.com/NewSite/index.php/channel-partners/becoming-a-channel-partner/">Become a Channel Partner</a></li>
    </ul>
    </li>
    <li id="menu-item-829" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-829"><a href="#">Community</a>
    <ul class="sub-menu">
    <li id="menu-item-499" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-499"><a href="http://www.itstelecom.com/NewSite/index.php/community/blog/">Blog</a></li>
    <li id="menu-item-502" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-502"><a href="http://www.itstelecom.com/NewSite/index.php/community/newsletter-archive/">Newsletter Archive</a></li>
    <li id="menu-item-508" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-508"><a href="http://www.itstelecom.com/NewSite/index.php/community/hot-tip-archive/">Hot Tip Archive</a></li>
    </ul>
    </li>
    </ul></div>?</div></div></div> 
```

CSS Code:

```
 .menu,
    .menu ul,
    .menu li,
    .menu a {
    margin: 0;
    padding: 0;
    border: none;
    outline: none;
    z-index: 1000;
    }

    /* Menu */
    .menu {    
    position: relative;
    height: 40px;
    width: 555px;

    background: #1b3563;
    background: -webkit-linear-gradient(top, #1b3563 0%,#2c2d33 100%);
    background: -moz-linear-gradient(top, #1b3563 0%,#2c2d33 100%);
    background: -o-linear-gradient(top, #1b3563 0%,#2c2d33 100%);
    background: -ms-linear-gradient(top, #1b3563 0%,#2c2d33 100%);
    background: linear-gradient(top, #1b3563 0%,#2c2d33 100%);

    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    }

    .menu li {
    position: relative;
    list-style: none;
    float: left;
    display: block;
    height: 40px;
    }

    /* Links */

    .menu li a {
    display: block;
    padding: 0 14px;
    margin: 6px 0;
    line-height: 28px;
    text-decoration: none;

    border-left: 1px solid #393942; /* Dashs between links color*/
    border-right: 1px solid #4f5058; /* Dashs between links color*/

    font-family: Helvetica, Arial, sans-serif;
    font-weight: bold;
    font-size: 13px;

    color: #f3f3f3;/* Main text color */
    text-shadow: 1px 1px 1px rgba(0,0,0,.6);

    -webkit-transition: color .2s ease-in-out;
    -moz-transition: color .2s ease-in-out;
    -o-transition: color .2s ease-in-out;
    -ms-transition: color .2s ease-in-out;
    transition: color .2s ease-in-out;
    }

    .menu li:first-child a { border-left: none; }
    .menu li:last-child a{ border-right: none; }

    .menu li:hover > a { color: #acb8bf; }

    /* Sub Menu */

    .menu ul {
    position: absolute;
    top:100%;
    left: 0;
    border-bottom-color:#000000;

    opacity: 0;

    background: #1b3563;
    background: -webkit-linear-gradient(top, #1b3563 0%,#2c2d33 100%);
    background: -moz-linear-gradient(top, #1b3563 0%,#2c2d33 100%);
    background: -o-linear-gradient(top, #1b3563 0%,#2c2d33 100%);
    background: -ms-linear-gradient(top, #1b3563 0%,#2c2d33 100%);
    background: linear-gradient(top, #1b3563 0%,#2c2d33 100%);

    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;

    -webkit-transition: opacity .25s ease .1s;
    -moz-transition: opacity .25s ease .1s;
    -o-transition: opacity .25s ease .1s;
    -ms-transition: opacity .25s ease .1s;
    transition: opacity .25s ease .1s;
    }

    .menu li:hover > ul { opacity: 1; }

    .menu ul li {
    height: 0;
    overflow: hidden;
    padding: 0;

    -webkit-transition: height .25s ease .1s;
    -moz-transition: height .25s ease .1s;
    -o-transition: height .25s ease .1s;
    -ms-transition: height .25s ease .1s;
    transition: height .25s ease .1s;
    }

    .menu li:hover > ul li {
    float:right;
    height: auto;
    overflow: visible;
    padding: 0;
    }

    .menu ul li a {
    width: 150px;
    margin: 0;

    border: none;
    border-bottom: 1px solid #353539;
    }

    .menu ul li:last-child a { border: none; }

    #menu-main-menu .sub-menu .sub-menu > ul {
    display: block;
    }
    #menu-main-menu .sub-menu .sub-menu ul {
    display: none;
    position: absolute;
    left: 100%;
    top: 0;
    }
    #menu-main-menu .sub-menu .sub-menu ul li a {
    background: #528009;
    border-bottom: 1px dotted #97b36b;
    }
    #menu-main-menu .sub-menu .sub-menu ul li a:hover {
    background: #345105;
    }

    .menu ul ul {
    box-shadow: 0px 3px 3px rgba(0,0,0,0.2);
    -moz-box-shadow: 0px 3px 3px rgba(0,0,0,0.2);
    -webkit-box-shadow: 0px 3px 3px rgba(0,0,0,0.2);
    position: absolute;
    top: 0px;
    left: 100%;
    width: 180px;
    z-index: 99999;
    }

    .menu ul ul a:hover {
    display:block; !important
    }? 
```

[Jfiddle - Example](http://jsfiddle.net/Zw8KU/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:07:47.907

Basically your method of showing/hiding nested lists with `opacity` is the root of the issue. The second list is overlapping the first because they have the same `z-index` values, even when it isn't visible.

You'll need to either add styles on hover that rework the `z-index` values so only the current hovered list is on top, or make your nested menu system more manageable by moving the hidden lists off through positioning, so they won't get in the way.

# android-layout - Android圆角和位图重复背景

> ID：13826907
> 
> 赞同：2
> 
> 时间：2012-12-11T19:13:38.747
> 
> 标签：android-layout

我正在尝试为我的 Android 应用程序中的布局设置以下背景：

![在此处输入图像描述](../Images/3f5bce687a66ba06e1a8bb5cec6a2751.png)

所以我需要 2 个圆角和一个重复的方格背景。当然身高和体重不是固定的:)

我试图用这个属性构建一个形状，但我不能使用方格背景......而且由于方格背景，我不能使用 9 路径......

# colors - RGB 到 CMYK 转换是 1:1 吗？

> ID：13826913
> 
> 赞同：0
> 
> 时间：2012-12-11T19:14:14.097
> 
> 标签：colors, rgb, cmyk

*如果我不通过 ICC 配置文件进行过滤*，CMYK 到 RGB 转换是 1:1 吗？[使用像这样的颜色选择器](http://www.dematte.at/colorPicker/#top)时看起来像这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T19:20:41.780

不它不是。CMYK 和 RGB 有很多共同的颜色，但不是全部。两者都包含另一个不包含的颜色。

图解图表： [http ://static.photo.net/attachments/bboard/00Q/00QOnx-61877884.jpg](http://static.photo.net/attachments/bboard/00Q/00QOnx-61877884.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:31:33.577

我发现[这里的理论答案](https://photo.stackexchange.com/a/11049/13984)很有帮助：

> 从理论上讲，毫无疑问，从 RGB 到 CMYK 的转换可以完全无损，因此（例如）您可以进行往返转换（RGB 到 CMYk，然后返回 RGB）并保证结果与原始输入。

# oracle - 是否有一个变量名存储当前运行的存储过程的名称？

> ID：13826918
> 
> 赞同：0
> 
> 时间：2012-12-11T19:14:41.420
> 
> 标签：oracle, plsql

是否有一个变量名存储当前运行的存储过程的名称？类似于 Unix 中的 $0 。

```
CREATE OR REPLACE
PROCEDURE my_sproc(
  param1 IN NUMBER,
  )
  AS      
  BEGIN
    exec other_sproc(XXX);
  END;
END; 
```

XXX <- 存储字符串“my_sproc”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T19:19:46.287

根据 Oracle 版本，您可以使用条件编译和`$$PLSQL_UNIT`

如果`other_sproc`只是打印出传入的值

```
create or replace procedure other_sproc( p_in in varchar2 )
as
begin
  dbms_output.put_line( p_in );
end;
/ 
```

然后在 Oracle 11g 中，您可以`$$PLSQL_UNIT`在调用者中使用

```
SQL> create or replace procedure my_sproc
  2  as
  3  begin
  4    other_sproc( $$PLSQL_UNIT );
  5  end;
  6  /

Procedure created.

SQL> exec my_sproc;
MY_SPROC

PL/SQL procedure successfully completed. 
```

但是，当您使用包时（并且您的存储过程应该几乎总是在包中），这不起作用，因为这`$$PLSQL_UNIT`将是包名称而不是过程名称。

还要注意不要`EXEC`在 PL/SQL 块中使用。 `EXEC`是一个 SQL*Plus 命令。你只需`other_sproc`像我在这里做的那样打电话。

# c++ - 先决条件通常与不变量重叠吗？

> ID：13826930
> 
> 赞同：1
> 
> 时间：2012-12-11T19:15:35.570
> 
> 标签：c++, contract, invariants, preconditions

我很难区分这两者。如果它们通常不重叠，它们有何不同？什么是先决条件但不是不变量的示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:48:43.110

其他一些答案试图定义术语“前提条件”和“不变”。我认为例如 Wikipedia 在这方面做得更好，所以我只是链接到 Wikipedia 以获取定义。无论如何，如果问题只是关于定义，那么这将是一个[RTFM](ftp://rtfm.mit.edu)问题，我会投票关闭它，而不是回答。

* * *

> “如果[前提条件和不变量]通常不重叠，它们有何不同？”

一个**[方法](http://en.wikipedia.org/wiki/Method_%28computer_programming%29)**的前置条件总是可以看作是由各个子条件组合而成的单一**[前置](http://en.wikipedia.org/wiki/Precondition)**条件，因此我们经常说和推理“the”前置条件。

对于*公共方法*，子前提条件之一始终是**[类 invariant](http://en.wikipedia.org/wiki/Class_invariant)**，所以是的，*经常*存在重叠。

考虑内部 (`private`和`protected`) 方法时，事情变得更加棘手。公共方法通常通过暂时破坏类不变量然后恢复它来工作。在类不变量无效期间，它可能会调用一些内部辅助方法，而这些内部辅助方法不能很好地将类不变量包含在其前置条件中。

*当人们试图清楚地区分公共接口*和实现细节时，事情变得更加棘手，而[之前试图](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2004/n1613.pdf)将类似 Eiffel 的**[契约式设计](http://en.wikipedia.org/wiki/Design_by_contract)**( **DBC** ) 断言引入 C++ 的尝试在此问题上搁浅。

不过，实践中很容易，因为对于实践中的人来说，可以避免非常棘手的情况，可以说是围绕它进行设计。

* * *

> “什么是先决条件但不是不变量的例子？”

例如，

```
class Foo
{
public:
    void add( Bar* p )
    {
        assert( p != 0 );    // Precondition unrelated to the class invariant
        // ... whatever
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:32:50.163

先决条件只是之前必须为真但不一定在期间或之后为真的东西。顾名思义，不变量在任何时间点都不会改变。例如，假设我想规范化一个向量。一个先决条件可能是它的当前规范不能为 0（因为 I 会导致除以零）。归一化的操作将改变向量的范数，这意味着它将是一个先决条件而不是一个不变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:19:51.820

不变量通常是您的状态的某些属性。例如，您可能`1 <= x <= 100`总是断言。

前置条件适用于方法调用。例如，如果包含`x`上面的类有一个方法`Foo(int y, int z)`，则前提条件可能是`y < x`并且`z > 10000`函数调用有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T19:25:58.430

简短的回答是肯定的。前置条件、后置条件和不变量本质上是同一事物的不同方面。

前提条件是完成操作之前的“即时”检查。后置条件是完成操作后的“即时”检查。不变量是持续一段时间的检查。

例如，如果您有一个平方根函数，它要求其参数 >= 0，这是一个先决条件，因为它是在操作之前进行的检查。

另一方面，如果您有一个具有成员 x 和 y 的类，使得 x > y 在任何时候，这是一个不变量，因为条件会持续一段时间（在对象的生命周期内）。同样，如果您有一个循环并且某些条件必须在循环的每次迭代中保持不变，那么这也是一个不变量，因为检查会持续一段时间。通常，术语类不变量和循环不变量将用于指定不变量的类型。

# javascript - 如何在 onclick 处停止 jquery 动画？

> ID：13826931
> 
> 赞同：1
> 
> 时间：2012-12-11T19:15:43.653
> 
> 标签：javascript, jquery

我是 jquery 的新手，我不太了解它，但我需要它，因为我正在构建一个模板......这是情况，我有一个 div 我想滑入页面（从外部，顶部）当我单击链接时，以及当我单击页面上的其他任何位置以滑出时...这就是我所拥有的：

```
var tmpl_name = '<?php echo $this->template ?>';
jQuery(document).ready(function() {

  jQuery('#link').click(function() {
    var topy = jQuery('#div');
      topy.delay(0).animate({
      top: parseInt(topy.css('top')) == 0 ? -topy.outerWidth() : 10
    },500, 'easeInOutCirc', function() {jQuery(this);});
  });

}); 
```

...并且效果很好，当我单击链接 div 滑入页面时，但是当我单击页面上的其他任何位置以滑出 div 时，我不知道如何实现，我尝试添加：

```
jQuery('body').click(function() {
    var topy = jQuery('#div');
      topy.delay(0).animate({
      top: parseInt(topy.css('top')) == 0 ? -topy.outerWidth() : -500
    },1000, 'easeInOutCirc', function() {jQuery(this);});
  }); 
```

...但问题是当我单击链接以在 div 中滑动时，div 进出页面（可能是因为链接也在正文中，并且代码的第二部分也会影响它。

谢谢你的时间......最好的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:19:25.273

尝试：

```
jQuery(document).ready(function() {

  jQuery('#link').click(function(e) {
    e.preventDefault();
    var topy = jQuery('#div');
      topy.delay(0).animate({
      top: parseInt(topy.css('top')) == 0 ? -topy.outerWidth() : 10
    },500, 'easeInOutCirc', function() {jQuery(this);});
  });

}); 
```

终止事件传播到文档对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:18:24.250

该`.stop()`函数可以在调用开始时链接，也可以在结束时链接以停止任何动画。

IE `$("#element").stop().bounce().stop();`

# ruby-on-rails - 未初始化的常量设计

> ID：13826937
> 
> 赞同：0
> 
> 时间：2012-12-11T19:16:04.187
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

运行时出现`Uninitialized constant Devise`错误`rake db:migrate`。

在 Gemfile 中：`gem 'devise'`带有成功的`bundle install`.

我尝试将 'require "devise"' 添加到 config/application.rb 但没有成功。在 config/application.rb 中：

```
if defined?(Bundler)  
  Bundler.require(*Rails.groups(:assets => %w(development test)))  
end 
```

堆栈跟踪：

```
uninitialized constant Devise
/Users/cs/.Trash/qa/config/initializers/devise.rb:3:in `<top (required)>'
/Users/cs/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.9/lib/rails/engine.rb:588:in `block (2 levels) in <class:Engine>'
/Users/cs/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.9/lib/rails/engine.rb:587:in `each'
/Users/cs/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.9/lib/rails/engine.rb:587:in `block in <class:Engine>'
/Users/cs/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `instance_exec'
/Users/cs/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `run'
/Users/cs/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.9/lib/rails/initializable.rb:55:in `block in run_initializers'
/Users/cs/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `each'
/Users/cs/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `run_initializers'
/Users/cs/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.9/lib/rails/application.rb:136:in `initialize!'
/Users/cs/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.9/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cs/.Trash/qa/config/environment.rb:5:in `<top (required)>'
/Users/cs/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.9/lib/rails/application.rb:103:in `require_environment!'
/Users/cs/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.9/lib/rails/application.rb:297:in `block (2 levels) in initialize_tasks'
Tasks: TOP => routes => environment
(See full trace by running task with --trace) 
```

宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.9'

## JRUBY GEMS
gem 'activerecord-jdbc-adapter'
gem 'activerecord-jdbcpostgresql-adapter'
gem 'jdbc-postgres'
gem 'jruby-openssl'

## FRONT END/DESIGN GEMS
gem 'jquery-rails'
gem 'bootstrap-sass'
gem 'haml'
gem 'font-awesome-sass-rails'

## ADMINISTRATION
gem 'activeadmin'
gem 'rufus-scheduler'

## AUTHENTICATION
gem 'bcrypt-ruby'
gem 'devise'

## FILE UPLOADS
gem 'paperclip'
gem 'aws-sdk'

## PERFORMANCE
gem 'dalli'
gem "trinidad"

## TESTING
gem "seedbank"

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'therubyrhino'
  gem 'uglifier', '>= 1.0.3'
  gem 'closure-compiler'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-07T07:02:42.050

有点晚了，但我遇到了同样的问题。清理垃圾并重新启动外壳应该是解决方案。

当您将一些文件夹移动到垃圾箱时，终端中存在一个错误，然后引用错误。

# json - mysqlimport 可以接受 JSON 输入吗？

> ID：13826942
> 
> 赞同：0
> 
> 时间：2012-12-11T19:16:31.003
> 
> 标签：json, mysqlimport

我们目前有某些由竖线分隔的文本组成的日志，其格式为

```
field1:value1|field2:value2|...|fieldN:valueN\n
field1:value1|field2:value2|...|fieldN:valueN\n
etc. 
```

我有一个导入器脚本（运行 perl 然后运行 ​​mysqlimport 的 bash），它当前从每行的开头删除几个单词，然后在生成的文本文件上运行 mysqlimport。

我们正在将日志记录升级到输出 JSON 的数据服务。导入器脚本仍会将该 JSON 的内容导入 MySQL 数据库表。采用这种漂亮的 JSON 并将其转换为管道分隔的文件以与 mysqlimport 一起使用感觉像是一种糟糕的形式——但我有什么选择吗？我在 mysql 文档或论坛中找不到任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:30:40.230

**只是一个友好的批评：**对我来说，转换 a 是不好的：

*   json 文本字符串 -> 到管道分隔的数据 -> 到管道分隔的解析器 -> 到数据库或
*   json 文本字符串 -> 到管道分隔的数据 -> 到管道分隔的解析器 -> 到数组 -> 到数据库。

管道分隔的支持比 json 字符串少。

最好的方法是将数据保存在 json 字符串中。

然后，您可以使用任何您熟悉的编程语言对其进行解析。例如，把它放在一个数组中。然后，将每个数组相应地保存在数据库中。

**但是**，如果这是您的公司正在使用的，并且他们已经有一个以管道分隔的解析器，如果他们已经在构建一个，或者您很难提出建议（无论说服他们的不可能的方法是什么）。然后，最好的方法就是坚持一会儿。

如果你有自己的时间，你可以建立自己的

*   json 解析器 -> 到数组 -> 到数据库应用程序。
*   json 解析器 -> 到数据库应用程序。（基于键和值）

这更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:36:44.970

我宁愿将可靠的 JSON 转换为同样可靠的、与 mysqldump 兼容的[SQL 多行`insert`语句](http://dev.mysql.com/doc/refman/5.5/en/insert.html)：

> 使用 VALUES 语法的 INSERT 语句可以插入多行。为此，请包含多个列值列表，每个列表都包含在括号中并用逗号分隔。例子：
> 
> ```
> INSERT INTO tbl_name (a,b,c) VALUES(1,2,3),(4,5,6),(7,8,9); 
> ```

由于无论如何您都在使用 Perl 脚本，因此这不会造成太大问题。

# asp.net - 如何转义 ctl00_ 前缀或修复站点 css

> ID：13826946
> 
> 赞同：-1
> 
> 时间：2012-12-11T19:16:50.633
> 
> 标签：asp.net, web-config

你好男孩和女孩；

我已经发布了一个制作 Asp.net 并发布 MS Server 的网站。我在 4.0 和服务器上的项目也是这样。发布我的网站后，网站不接受我所有的 CSS 类。因为；服务器将前缀作为 ctl00_ 添加到所有 id 的 . 然后我添加了所有 css 类名 ctl00_ 并且其中一些工作得很好但是

我该如何修复/解决任何问题。

我试图添加 clientID="static/predictable/Auto/whatever" 但没有修复它。是的，只有 1 个母版页，我无法修复它。

如果你帮助我，我会非常非常高兴。多谢

```
<pages>
        <controls >
            <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=****************" />
            <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=*****************" /></controls></pages> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:22:35.980

我认为您混淆了课程和ID。ASP 生成 ClientID，但您仍然可以将 a 附加`CssClass`到您的元素。

例如

```
<asp:TextBox ID="MyTextBox" runat="server" CssClass="myClass" /> 
```

ClientID 不会是“MyTextBox”，但附加到元素的类仍然是“myClass”

```
.myClass {
  /* Styling */
} 
```

# android - 是否有任何选项可以实现`LoaderManager.LoaderCallbacks `以及来自`TabActivity`的相应方法？

> ID：13826949
> 
> 赞同：-1
> 
> 时间：2012-12-11T19:16:58.773
> 
> 标签：android, android-fragments, android-tabactivity, android-cursorloader

是否有任何选项可以实现`LoaderManager.LoaderCallbacks<Cursor>`和相应的方法以及`getSupportLoaderManager().initLoader(1, null, this);`来自`TabActivity`？

我知道这已被弃用，但如果不将我的所有内容转换为使用 a ，我`TabActivity`将找不到解决方案，如果可能的话，我需要在我的 上实现一个 CursorLoader （这个[）](https://stackoverflow.com/a/7422343/1365895)。`Aactivities``Fragments``tabs``TabActivitiy`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:51:05.700

不要使用 TabActivity！它已弃用！

使用您将能够使用加载器的操作栏替代方案。

# java - HSQLDB在程序和文件中锁定文件-文件目录写权限

> ID：13826961
> 
> 赞同：0
> 
> 时间：2012-12-11T19:18:30.740
> 
> 标签：java, windows, hibernate, security, hsqldb

我在 JAVA 中有一个应用程序连接到 HSQLDB 并且需要安装，我制作了该应用程序并且工作正常，但是当我将代码放在 Programs and files 文件夹中时，HSQLDB 无法编辑锁定属性并且无法打开软件 = (

我知道这是 Windows 安全性，但是，有没有办法让包含我的数据库的文件夹可编辑？（c:programs and files\mySoftware\database）就像在 PHP 中一样，使用 chmod ...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:30:37.753

您使用了错误的方法。您需要将文件放到 \Users\All users\AppData\yourapplication（在 Windows 7 中）或 \Users\Profilename\AppData\yourapplication 文件夹下的应用程序特定文件夹，而不是使文件夹可编辑。[该文件夹的路径是通过名为SHGetFolderPath](https://stackoverflow.com/questions/138379/shgetfolderpath-32-bit-vs-64-bit)的 Windows API（不知道 Java 提供什么有关 Windows 特定 API 的，抱歉）函数获得。您需要 CSIDL_APPDATA 或 CSIDL_COMMON_APPDATA 路径。

# perl - 无法使用 Email::Simple::Sender 从 Net::Server::Mail::SMTP 发送邮件

> ID：13826962
> 
> 赞同：0
> 
> 时间：2012-12-11T19:18:38.617
> 
> 标签：perl, email, smtp

从我处理 DATA 事件的子中：

```
my $email = Email::Simple->create(
    header => [
      To      => $recipient,
      From    => $sender,
      Subject => $subject,
    ],
    body => $body,
);
sendmail($email); 
```

当我尝试进行测试时，我 telnet 到服务器获取 DATA 并且当我放入 . （触发此事件）我得到了这个：

```
at /usr/local/share/perl5/Net/Server/Mail.pm line 351, <GEN1> line 6.
    Net::Server::Mail::callback('Net::Server::Mail::ESMTP=HASH(0x3a06288)', 'DATA', 'SCALAR(0x3ae0b58)') called at /usr/local/share/perl5/Net/Server/Mail.pm line 233
    Net::Server::Mail::make_event('Net::Server::Mail::ESMTP=HASH(0x3a06288)', 'name', 'DATA', 'arguments', 'ARRAY(0x3ae0df8)', 'success_reply', 'ARRAY(0x3ae0f90)') called at /usr/local/share/perl5/Net/Server/Mail/SMTP.pm line 644
    Net::Server::Mail::SMTP::data_finished('Net::Server::Mail::ESMTP=HASH(0x3a06288)', '') called at /usr/local/share/perl5/Net/Server/Mail/SMTP.pm line 618
    Net::Server::Mail::SMTP::data_part('Net::Server::Mail::ESMTP=HASH(0x3a06288)', '.\x{d}\x{a}') called at /usr/local/share/perl5/Net/Server/Mail.pm line 443
    Net::Server::Mail::tell_next_input_method('Net::Server::Mail::ESMTP=HASH(0x3a06288)', '.\x{d}\x{a}') called at /usr/local/share/perl5/Net/Server/Mail.pm line 516
    Net::Server::Mail::process('Net::Server::Mail::ESMTP=HASH(0x3a06288)') called at /path/to/mail_server.pl line 47 
```

如果我删除 sendmail 呼叫，它工作正常（除了它不发送电子邮件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:32:11.873

此时，我通常开始阅读源代码。看看 N::S::M 的第 351 行发生了什么，然后从那里继续。

另外，请查看您的邮件日志。当程序尝试发送邮件时，可能有问题 - 无论是在本地还是直接发送给远程收件人。

# asp.net - 我可以知道重定向到没有 .svc 扩展名的 Web 服务 url 有什么好处吗？

> ID：13826968
> 
> 赞同：0
> 
> 时间：2012-12-11T19:19:01.040
> 
> 标签：asp.net, wcf, silverlight, rest, redirect

我最近使用 Microsoft WCF 为 Microsoft ASP.NET 应用程序中使用的 Silverlight 模块创建了一个 RESTful 服务

当我调用 Web 服务时，我会得到一个看起来很丑的 url：

[https://www.blahblah.com/blahblahSilverlightServiceblahblah.svc/IblahSilverlightService/retrieveusername](https://www.blahblah.com/blahblahSilverlightServiceblahblah.svc/IblahSilverlightService/retrieveusername)

一些技术文章、博客和论坛建议我使用 Microsoft URL ReWrite 模块来重定向 RESTful 服务，使其使用没有 .svc 扩展名的 url。

除了 url 难以阅读而且很长的事实之外，我能否知道重定向到没有 .svc 扩展名的 Web 服务 url 有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:11:55.947

这是最具有挑衅性的美学，因为在大多数情况下，REST 服务用于计算机与计算机之间的通信。但是为了给这个评论添加一点肉，我会说，而不是使用你使用过的 svc 方法，你可以使用工厂方法来获取我认为你想要的干净的 URL。

[http://msdn.microsoft.com/en-us/library/vstudio/bb412178(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb412178(v=vs.90).aspx)

> “http://localhost:8000/EchoWithGet?s=你好，世界！”

# mysql - 在一个查询中获取两个表字段的计数

> ID：13826969
> 
> 赞同：2
> 
> 时间：2012-12-11T19:19:01.820
> 
> 标签：mysql

我试图在表格的性别字段中计算女性和男性的数量。

有没有办法在一个查询中获取每个的计数？

就像是：

```
select * from table count(where gender = 'm') as total_males, count(where gender = 'f') as total_females; 
```

还是需要两个查询？

```
select count(*) from table where gender = 'm';
select count(*) from table where gender = 'f'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T19:22:29.637

这基本上是一个`PIVOT`. MySQL 没有枢轴，因此您可以使用带有`CASE`语句的聚合函数来执行此操作：

```
select
  sum(case when gender = 'm' then 1 else 0 end) Total_Male,
  sum(case when gender = 'f' then 1 else 0 end) Total_Female
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/57b2d/1)

或使用`COUNT`：

```
select
  count(case when gender = 'm' then 1 else null end) Total_Male,
  count(case when gender = 'f' then 1 else null end) Total_Female
from yourtable; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/57b2d/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T19:21:54.183

像这样的东西会起作用：

```
SELECT SUM(IF(t.gender='m',1,0)) AS total_males
     , SUM(IF(t.gender='f',1,0)) AS total_females
  FROM mytable t 
```

这里的“技巧”是我们使用条件测试为每一行返回 0 或 1，然后将 0 和 1 相加。为了使这一点更清楚一点，我使用`SUM`聚合函数而不是`COUNT`，尽管`COUNT`可以很容易地使用，尽管我们需要返回一个 NULL 来代替零。

```
SELECT COUNT(IF(t.gender='m',1,NULL)) AS total_males
     , COUNT(IF(t.gender='f',1,NULL)) AS total_females
  FROM mytable t 
```

考虑此查询的 SELECT 列表中的两个表达式：

```
SELECT COUNT(1) 
     , SUM(1)
  FROM mytable t 
```

将返回相同的值。

如果要避免使用 MySQL`IF`函数，也可以使用 ANSI SQL`CASE`表达式来完成：

```
SELECT SUM( CASE WHEN t.gender = 'm' THEN 1 ELSE 0 END )) AS total_males
     , SUM( CASE WHEN t.gender = 'f' THEN 1 ELSE 0 END )) AS total_females
  FROM mytable t 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T19:22:02.053

```
select sum(case when gender='m' then 1 else null end) as total_males,  sum(case when gender='f' then 1 else null end) as total_females from ... 
```

应该工作得很好！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T19:23:32.713

如果您唯一的问题是避免两个查询，您总是可以编写两个查询作为一个查询的子选择。

select (select 1 from dual) as one, (select 2 from dual) as two from dual

这也适用于您的场景。

# memory - 使用整数变量在 FORTRAN 上计算阶乘。内存溢出

> ID：13826974
> 
> 赞同：3
> 
> 时间：2012-12-11T19:19:33.923
> 
> 标签：memory, integer, fortran, overflow, factorial

我正在用 FORTRAN 做一个有点特别的程序。我只能使用整数变量，正如您所知，当您尝试计算优于 12 或 13 的阶乘时，您会遇到内存溢出。所以我编写了这个程序来避免这个问题：

[http://lendricheolfiles.webs.com/codigo.txt](http://lendricheolfiles.webs.com/codigo.txt)

但是一些非常奇怪的事情正在发生。程序计算阶乘井 4 或 5 次，然后给出内存溢出消息。我正在使用 Windows 8，我担心这可能是失败的原因，或者只是我做错了什么。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:13:08.603

尝试使用运行时下标检查进行编译。在 Fortran 中，分段错误通常是由下标错误或实际参数和虚拟参数之间的不匹配（即过程调用中的参数与过程中声明的参数之间）引起的。通过查看您的代码，我会做出一个大胆的猜测，即您有一个下标错误——让编译器通过打开运行时下标检查来为您找到它。大多数 Fortran 编译器都将其作为编译选项。

PS 你也可以通过使用已经编写好的包来进行这样的计算，例如，David Bailey 等人的任意精度算术软件，可在[http://crd-legacy.lbl.gov/~dhbailey/mpdist的 Fortran 90 中获得/](http://crd-legacy.lbl.gov/~dhbailey/mpdist/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:03:51.577

MSB 的答案包含您的问题的要点：您的数组索引在几个地方超出了范围。

在三个循环`cifra - 1 == 0`中，超出范围：

```
do cifra=ncifras,1,-1
  factor(1,cifra-1) = factor(1,cifra)/10    ! factor is (1:2, 1:ncifras)
  factor(1,cifra) = mod(factor(1,cifra),10)
enddo 
! :
! Same here:
do cifra=ncifras,1,-1
 factor(2,cifra-1) = factor(2,cifra)/10
 factor(2,cifra) = mod(factor(2,cifra),10)
enddo
!:
do cifra=ncifras,1,-1
  sumaprovisional(cifra-1) = sumaprovisional(cifra-1)+(sumaprovisional(cifra)/10)
  sumaprovisional(cifra) = mod(sumaprovisional(cifra),10)
enddo 
```

在下一种情况下， 的值`cifra - (fila - 1)`超出范围：

```
do fila=1,nfilas
  do cifra=1,ncifras  
    ! Out of bounds for all cifra < fila:
    sumando(fila,cifra-(fila-1)) = factor(1,cifra)*factor(2,ncifras-(fila-1))
  enddo
  sumaprovisional = sumaprovisional+sumando(fila,:)
enddo 
```

如果将前三个循环重写为`do cifra = ncifras, 2, -1`，将另一种情况的内部循环重写为 ，则应该没问题`do cifra = fila, ncifras`。此外，在您发布的示例程序中，您首先必须`resultado`正确分配，然后再将其传递给子例程。

# java - 升级 JDBC 驱动程序后，Postgres 中到整数的隐式类型转换失败

> ID：13826976
> 
> 赞同：2
> 
> 时间：2012-12-11T19:19:42.783
> 
> 标签：java, postgresql, jdbc

我的应用程序目前使用 Postgres 8.2 JDBC 驱动程序（带有 Postgres 8.2 数据库），但我们正在升级到 Java 7 和 JDBC 4 驱动程序，目前是 9.2-1002 版本。最终配置将是带有 Postgres 8.2 数据库的 JDBC 9.2 驱动程序。

在我们的一个触发函数中抛出了一个异常，它只在使用 9.2 驱动程序运行时发生。这是`ON UPDATE`另一个表上的触发器。触发器有效地执行：

```
DECLARE
    mytime bigint;
BEGIN
    SELECT INTO mytime EXTRACT(EPOCH FROM current_timestamp(3))*1000;
    UPDATE resource SET lastmodified=mytime WHERE id=NEW.resource_id;
END 
```

该`resource.lastmodified`列定义为 BIGINT 类型。

发生的 SQL 错误是：

```
ERROR: invalid input syntax for integer: "1355248911435.9998"
    Where: PL/pgSQL function "f_modify_resource" line 4 at SQL statement; 
```

显然错误就在这`SELECT INTO`条线上；这里应该有一个 BIGINT 的演员表。但是，我想知道为什么该语句使用 8.2 JDBC 驱动程序成功，但在没有其他任何更改的情况下使用 9.2 驱动程序失败？既然触发代码在数据库内部运行，这对 JDBC 驱动程序不应该是透明的吗？我以为 PostgreSQL 会继续在这里进行隐式转换，但它似乎已经停止了。

我试过设置`compatible=8.2`JDBC 连接 URL 也没有效果。

**编辑** 这是使用 9.2-1002.jdbc4 驱动程序运行时语句日志中的输出（我可以确认这至少发生在 9.0 驱动程序之前，可能更早）：

```
STATEMENT:  UPDATE message SET hastext='true' WHERE rid='2-1355323570239' AND mid='1-1355329102968'
ERROR:  22P02: invalid input syntax for integer: "1355329102985.0002"
CONTEXT:  PL/pgSQL function "f_modify_resource" line 4 at SQL statement
LOCATION:  scanint8, int8.c:137 
```

该`f_modify_resource`函数由表`ON UPDATE`上的触发器运行`message`，其主体与上面给出的完全相同。第 4 行对应于`SELECT INTO`语句。我可以确认`EXTRACT(EPOCH...)`确实返回 a `double precision`，而且确实应该返回。

使用 8.2（jdbc4 和 jdbc3）驱动程序，不会发生此错误，并且语句可以正确处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:09:12.487

检查 JDBC 驱动程序是否设置了 *extra_float_digits*。发行说明说，从 8.3-dev602 开始，它在连接时设置为“2”，而通常默认为零。我无法重现您的行为（我只有 9.1 和 9.2 可供测试）。但是，我可以这样做：

```
postgres=# set extra_float_digits = 2;
SET
postgres=# select extract(epoch from current_timestamp(3));
     date_part      
--------------------
 1355346251.7550001
(1 row)

postgres=# select extract(epoch from current_timestamp(3));
     date_part      
--------------------
 1355346253.1619999
(1 row) 
```

当乘以 1000 并分配给 BIGINT 时，我不能让它失败，但这可能是特定于 8.2 的东西，因此您必须使用 9.2 驱动程序进行测试并显式运行语句 SET extra_float_digits = 0在您完成连接之后，但在运行失败的查询之前。

# mule - 在将响应发送回请求-响应端点之前在 mule 流中编辑响应

> ID：13826980
> 
> 赞同：1
> 
> 时间：2012-12-11T19:19:54.700
> 
> 标签：mule

我对mule esb有点陌生，我无法解决我遇到的一个问题。以下是发生的情况：我在 mule 3.2.0 中有一个流程，它接收带有对 ws 的请求的对象。我使用 cxf:jaxws-client 将它发送到 ws 和。在这个流程的开始，我有带有请求-响应模式的 vm:inbound 端点。我想要的是将转换应用于从“vmIn 端点”作为响应返回的对象，然后再将其从流的“vm.logService 端点”发送回调用者。我实际上得到了响应，但它是空有效负载。“vm.logService”是我使用 MuleClient.send(url, message, properties) 从 Java 代码发送 MuleMessage 的女巫的端点。我已经读过这应该通过“响应”块来完成，但似乎这没有发生。

这是我的配置

```
<vm:endpoint  name="vmOut"  path="vmOut" exchange-pattern="request-response"/>

<vm:endpoint  name="vmIn"  path="vmIn" exchange-pattern="request-response"/>

<pattern:web-service-proxy 
name="name" 
inboundEndpoint-ref="vmIn" 
transformer-refs="logging" 
responseTransformer-refs="logging"
outboundEndpoint-ref="vmOut" />

<flow name="logService">

<vm:inbound-endpoint path="vm.logService"/>

<vm:outbound-endpoint ref="vmIn">

<cxf:jaxws-client   serviceClass="my.WSClass" operation="operation" 
enableMuleSoapHeaders="false"/>

<object-to-string-transformer/>

</vm:outbound-endpoint>

<response>
<custom transformer name="myTransformer" class="someclass" />
</response>
<flow name="genericTransformer">

    <vm:inbound-endpoint path="vmOut"/>

    <custom-transformer class="mypkg.GenericServiceTransformer">

    </custom-transformer>

</flow> 

 <flow name="import">
<vm:inbound-endpoint path="vm.import" exchange-pattern="request-response"/>

    <http:outbound-endpoint address="${Service}" responseTimeout="${ws.timeout}" exchange-pattern="request-response" />

    <object-to-string-transformer/>
</flow> 
```

好吧，在使用 jaxws-client 发送之后，我处理了这个请求消息的流程很少，但我认为这不是它不起作用的原因。提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:19:13.907

“vm.logService”VM 端点对我来说看起来不像请求响应：由于您没有指定交换模式，因此默认情况下它实际上是单向的。这可以解释为什么你没有得到任何回报。

此外，我们看不到“vmIn”的定义，因此我们无法确定它是正确的请求-响应，这可能是未到达响应块的另一个原因。

实际上：如果您的响应块是流程中的最后一个元素，则不需要它：如果在请求阶段应用“myTransformer”就可以，因为之后没有任何内容。

> 使用 jaxws-client 发送后，我处理此请求消息的流程很少

我真的不明白你的意思。

# iphone - 使用 drawRect 绘制 NSString 并为其设置动画

> ID：13826982
> 
> 赞同：0
> 
> 时间：2012-12-11T19:20:05.417
> 
> 标签：iphone, objective-c, ios, ipad

我正在使用 drawRect 绘制一个 NSString，一旦它被绘制，我是否可以为这个 NSString 设置动画？我希望它在 3.0 秒后淡入/淡出。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:28:00.100

您不能直接淡化绘制的字符串本身。您可以淡化图层，也可以淡化视图。将字符串绘制到其中一个上并淡化图层或视图。这通常使用`UILabel`or最容易完成`CATextLayer`，但如果您愿意，您可以在自己的图层上绘制并淡化它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:30:37.627

制作一个UILabel，然后用动画来实现你的愿望

```
- (void)faceInLabel{
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 100, 50)];
    label.text = @"My String";
    [myView addSubview:label];
    label.alpha = 0;
    [UIView animateWithDuration:0.5 animations:^{
        label.alpha = 1;
    }
    completion:^(BOOL finished)
     {
         [NSTimer timerWithTimeInterval:3 target:self selector:@selector(fadeOutLabel) userInfo:nil   repeats:NO];
      }];
}
- (void)fadeOutLabel
{
    [UIView animateWithDuration:0.5 animations:^{
        label.alpha = 0;
    }];
} 
```

# r - 将矩阵列表逐个元素相加

> ID：13826983
> 
> 赞同：1
> 
> 时间：2012-12-11T19:20:13.437
> 
> 标签：r

我想将列表中的所有矩阵加在一起。这是我正在尝试做的一个例子：

```
## sets up the problem
m1 <- matrix(0,nrow=9,ncol=4)
row.pres <- lapply(1:4,function(x) seq(x,x+2))
m1.l <- lapply(1:4,function(y) {m1[row.pres[[y]],y] <- 1
                        return(m1)}
       ) 
```

我想将 的所有元素相加，`m1.l`得出一个与它们中的每一个具有相同维度的单个矩阵。这是我的解决方案：

```
test <- lapply(1:4,function(x) paste("m1.l[[",x,"]]",sep=''))
add.all <- paste(test,collapse="+")
eval(parse(text=add.all)) 
```

但一定有更好的办法！也许通过`do.call`什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T19:22:40.503

```
 > Reduce("+", m1.l)
      [,1] [,2] [,3] [,4]
 [1,]    1    0    0    0
 [2,]    1    1    0    0
 [3,]    1    1    1    0
 [4,]    0    1    1    1
 [5,]    0    0    1    1
 [6,]    0    0    0    1
 [7,]    0    0    0    0
 [8,]    0    0    0    0
 [9,]    0    0    0    0 
```

这会将前两个相加，然后将结果和第三个矩阵相加。然后它将该结果添加到第四个矩阵等，直到它通过整个列表工作。

# python - Python将一个列表与另一个列表中的dict值匹配

> ID：13826984
> 
> 赞同：0
> 
> 时间：2012-12-11T19:20:22.750
> 
> 标签：python, python-2.7

我有 2 个清单；清单一是：

```
a=[500,1000,1500,2000,2500,3000] 
```

另一个是这样的：

```
z=[{'1':0},{'2':0},{'3':0},{'4':0},{'5':0}] 
```

我已将 dicts 放在一个列表中，因为我希望它们保持有序，因此我运行了一个条件：

```
for elems in a:
    if 2200 < elems:
        NOT SURE? 
```

所以在这种情况下，我想要做的是，因为 2200 小于 2500，我希望列表 z 中的键号 4 的值增加一。

我不知道如何实现这一点，希望得到一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:41:09.773

这是使用 collections.Counter 的替代实现：

```
from collections import Counter

a = [500,1000,1500,2000,2500,3000]

z = Counter(i+1 for i,v in enumerate(a) if v > 2200)
print z

print list({str(a): b} for a, b in z.iteritems()) 
```

`z`已经是我认为比列表中所需的单项字符串键项更有用的形式，但是正如您所看到的，它可以在一行中再次转换为您的首选格式。

输出：

```
Counter({5: 1, 6: 1})
[{'5': 1}, {'6': 1}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:25:50.303

我认为将 z 作为一个简单的整数列表就足以满足您的需求。然后：

```
z = [0, 0, 0, 0, 0]

for i, elem in enumerate(a):
    if elem > 2200:
         z[i] += 1 
```

如果你真的想要一个项目字典列表（假设 z 和 a 的长度相同），那么你可以这样做：

```
for i, elem in enumerate(a):
    if elem > 2200:
         z[i][str(i+1)] += 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T19:26:38.330

我认为这应该可以解决您的问题

```
a = [500,1000,1500,2000,2500,3000]

from collections import defaultdict
z = defaultdict(int)

for i, elems in enumerate(a, 1):
   if 2200 < elems:
       z[i] += 1  # can cast i to str with str(i) to exactly match the keys in the example 
```

编辑，只是注意到您的`z`列表不是基于零的

# php - 获取文件夹项目数量的更好方法

> ID：13826987
> 
> 赞同：0
> 
> 时间：2012-12-11T19:20:32.973
> 
> 标签：php

在文件夹中了解项目数量的更好方法是什么，我用这个

```
 function folderItemsQuantity ($folder_name) {
        $arr = glob($folder_name."/*");
        if ($arr === false) {
            return 0;
        }
        else {
            return count($arr);
        }
     } 
```

有更好的方法还是足够了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:23:40.840

[http://php.net/manual/en/class.directoryiterator.php](http://php.net/manual/en/class.directoryiterator.php) 或[http://php.net/manual/en/class.filesystemiterator.php](http://php.net/manual/en/class.filesystemiterator.php)

应该做的伎俩：

```
$it = new FilesystemIterator('folder/path');
echo iterator_count($it) 
```

# ios - openGL ES 警告

> ID：13826989
> 
> 赞同：1
> 
> 时间：2012-12-11T19:20:46.920
> 
> 标签：ios, opengl-es, opengl-es-2.0

我正在使用 openGL ES 在`UIView`. 我正在关注这个线程（[CADisplayLink OpenGL 渲染会破坏 UIScrollView 行为](https://stackoverflow.com/questions/5944050/cadisplaylink-opengl-rendering-breaks-uiscrollview-behaviour/5956119#5956119)）以实现 30fps。一切似乎都还好。播放流畅。现在我想我通过 Instruments 运行我的应用程序，但我收到了一些警告：

1.  逻辑缓冲区加载 - 摘要 => 缓慢的帧缓冲区加载
2.  GPU 在纹理上等待 - 摘要 => CPU 在纹理上传上等待 GPU
3.  纹理上传非最佳 GPU 利用率 - 摘要 => 中帧纹理上传

在我的回调中，我执行以下操作：

```
[EAGLContext setCurrentContext:_context];
glClear(GL_COLOR_BUFFER_BIT);

// load the color components into OpenGL
glBindTexture(GL_TEXTURE_2D, _textures[TEXTURE_Y]);
glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE, frameWidth, frameHeight, 0, GL_LUMINANCE, GL_UNSIGNED_BYTE, (UInt8*)yuvFrame.luma.bytes);

glBindTexture(GL_TEXTURE_2D, _textures[TEXTURE_U]);
glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE, frameWidth/2, frameHeight/2, 0, GL_LUMINANCE, GL_UNSIGNED_BYTE, (UInt8*)yuvFrame.chromaB.bytes);

glBindTexture(GL_TEXTURE_2D, _textures[TEXTURE_V]);
glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE, frameWidth/2, frameHeight/2, 0, GL_LUMINANCE, GL_UNSIGNED_BYTE, (UInt8*)yuvFrame.chromaR.bytes);

// draw
glDrawElements(GL_TRIANGLE_STRIP, sizeof(indices)/sizeof(indices[0]), GL_UNSIGNED_SHORT, 0);
[_context presentRenderbuffer:GL_RENDERBUFFER]; 
```

在此调用之前，在 的`init`方法中`UIView`，我生成纹理并设置一些参数，如下所示：

```
glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);
glEnable(GL_BLEND);

glGenTextures(NUM_TEXTURES, _textures);

glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, _textures[TEXTURE_Y]);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glUniform1i(_uniformSamplers[SAMPLER_Y], TEXTURE_Y);

glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, _textures[TEXTURE_U]);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glUniform1i(_uniformSamplers[SAMPLER_U], TEXTURE_U);

glActiveTexture(GL_TEXTURE2);
glBindTexture(GL_TEXTURE_2D, _textures[TEXTURE_V]);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glUniform1i(_uniformSamplers[SAMPLER_V], TEXTURE_V); 
```

虽然，就像我说的播放效果似乎不错，但我想尝试修复这些警告。我尝试了几件事但没有成功。我能够删除它们的唯一方法是`glGenTextures(NUM_TEXTURES, _textures)/glDeleteTextures(NUM_TEXTURES, _textures)`在回调的开始/结束时调用，但我认为这不是正确的方法。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:32:52.390

您列表中的第一个警告有时可能是 Instruments 中的误报，因此它可能根本不是真正的问题。但是，这可能表明您没有正确清除帧缓冲区的先前状态，因此您可以检查以确保除了您的`GL_COLOR_BUFFER_BIT`.

另外两个只是告诉您`glTexImage2D()`在每一帧上上传图像数据需要一段时间。如果您在 iOS 5.0 上执行此操作，您可以考虑使用纹理缓存来加速此上传过程（`CVOpenGLESTextureCacheCreate()`和朋友）。它们可能会帮助您挤出一点额外的性能。

# javascript - JQuery：检查元素是否处于正常流程中

> ID：13826992
> 
> 赞同：19
> 
> 时间：2012-12-11T19:21:20.930
> 
> 标签：javascript, jquery, html, css

使用 jQuery 检查元素是否处于正常流程中的最优雅的方法是什么？

根据[CSS3 规范](http://www.w3.org/TR/css3-box)，

> 如果满足以下条件，则框属于流：
> 
> > 其 'display' 的使用值为 'block', 'list-item', 'table' 或*template*。
> > 
> > 它的'float'的使用值为'none'。
> > 
> > 其“位置”的使用值是“静态”或“相对”。
> > 
> > 它要么是流根的子节点，要么是属于流的框的子节点。

我应该检查所有这些条件，还是有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T21:20:03.760

我怀疑有*更好*的方法，但另一种方法是：

1）用包装器包围元素

2) 将包装器的高度和宽度与被包装的元素进行比较

例如：

```
$('#elementToTest').clone().addClass('clone').wrap('<div></div>')
if($('#elementToTest.clone').height()>$('#elementToTest.clone').parent().height()){
    //outside the normal flow
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T07:56:15.557

我认为另一个“流动”要求是`overflow`设置为`visible`.

[来自 CSS2 规范：](http://www.w3.org/TR/CSS2/visuren.html#block-formatting)

> 浮动、绝对定位的元素、不是块框的块容器（例如内联块、表格单元格和表格标题），以及具有“溢出”而不是“可见”的块框（除非该值已被传播到视口）为其内容建立新的块格式化上下文。

*   [对相关问题的非常详细的回答。](https://stackoverflow.com/a/6199172/1888292)
*   [YUI 关于块格式化上下文的博客条目。](http://www.yuiblog.com/blog/2010/05/19/css-101-block-formatting-contexts/)
*   [我发现过去的一篇博客文章很有帮助。](http://colinaarts.com/articles/the-magic-of-overflow-hidden/)

根据您引用的要求和`overflow`要求，这是使用 jquery 执行此操作的一种方法：

```
function isInFlow(elm, ctxRoot) {

    ctxRoot = ctxRoot || document.body;

    var $elm = $(elm),
        ch = -1,
        h;

    if (!$elm.length) {
        return false;
    }

    while ($elm[0] !== document.body) {
        h = $elm.height();
        if (h < ch || !okProps($elm)) {
            return false;
        }
        ch = h;
        $elm = $elm.parent();

        if (!$elm.length) {
            // not attached to the DOM
            return false;
        }
        if ($elm[0] === ctxRoot) {
            // encountered the ctxRoot and has been
            // inflow the whole time
            return true;
        }
    }
    // should only get here if elm
    // is not a child of ctxRoot
    return false;
}

function okProps($elm) {

    if ($elm.css('float') !== 'none'){
        return false;    
    }
    if ($elm.css('overflow') !== 'visible'){
        return false;    
    }
    switch ($elm.css('position')) {
        case 'static':
        case 'relative':
            break;
        default:
            return false;
    }
    switch ($elm.css('display')) {
        case 'block':
        case 'list-item':
        case 'table':
            return true;
    }
    return false;
}
​ 
```

有关测试用例，请参阅此[jsFiddle](http://jsfiddle.net/YnQj4/7/)。

我不确定它是否会更好使用[`window.getComputedStyle()`](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)。

该函数正在检查是否`elm`在`ctxRoot`的流或块格式化上下文中（我认为它以前被称为）。如果`ctxRoot`未提供，它将检查`body`元素。这不会检查以确保`ctxRoot`正在流动。所以，有了这个 HTML

```
<div id="b" style="overflow: hidden;">
    <div id="ba">ba
        <p id="baa">baa</p>
        <span id="bab">bab</span>
        <span id="bac" style="display:block;">bac</span>
    </div>
</div> 
```

测试用例是：

```
var b = $('#b')[0];
console.log('no  ',isInFlow(b));
console.log('no  ',isInFlow('#ba'));
console.log('yes ',isInFlow('#ba', b));
console.log('no  ',isInFlow('#baa'));
console.log('yes ',isInFlow('#baa', b));
console.log('no  ',isInFlow('#bab'));
console.log('no  ',isInFlow('#bab', b));
console.log('no  ',isInFlow('#bac'));
console.log('yes ',isInFlow('#bac', b)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:53:05.130

您可以通过使用数据注释来预先消除对它的需求，而不是追溯地查看它。任何时候创建或定义元素时，将其属性设置`data-flow`为 true 或 false。

例如：

```
var newDiv = document.createElement("div");
newDiv.style.position = "absolute";
newDiv.setAttribute("data-flow","false"); 
```

或者在 html 中

```
<div style="position:absolute;" data-flow="false"></div> 
```

然后您可以使用选择器简单地选择这些元素：

```
$('*[data-flow=false]') 
```

# firefox - 在 Firefox 插件中使用用户首选项

> ID：13826993
> 
> 赞同：5
> 
> 时间：2012-12-11T19:21:38.823
> 
> 标签：firefox, firefox-addon-sdk, add-on, user-preferences

我正在构建一个 Firefox 扩展。它将 CSS 注入一个网站。但我想根据用户偏好注入它。这是我的附加组件中最重要的部分：

```
exports.main = function() {

var pageMod = require("page-mod");

var test = require("preferences-service");

pageMod.PageMod({
  include: "http://example.org/*",
  contentStyle: "something here"
  });
}; 
```

但是 Mozilla Firefox 错误控制台中有一个错误：

> 错误：模块：位于未定义的未定义无权加载：首选项服务

而且我不知道我应该怎么做才能让它发挥作用。有人有什么想法吗？:) 也许还有其他方法？

实际上，我想阅读偏好，然后生成足够的样式。如果这是有用的信息，我在 defaults/preferences/prefs.js 中有用户首选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T06:30:03.037

好的，现在它可以工作了。如果您遇到相同或相似的问题，请编辑harness-options.json 文件。后

```
"page-mod": {
"path": "addon-kit/lib/page-mod.js"
}, 
```

添加：

```
"preferences-service": {
"path": "api-utils/lib/preferences-service.js"
}, /*with or without the comma, as the case may */ 
```

就这样 ：）

# android - 多个市场版本的最佳实践包命名？

> ID：13826994
> 
> 赞同：0
> 
> 时间：2012-12-11T19:21:40.283
> 
> 标签：android

**在包命名**方面，在多个市场上提供 Android 应用程序时，推荐和/或最佳实践是什么？

假设我在 Google Play 上有一个应用程序：
**com.test.sample.pro**

现在我想在其他市场上使用这个应用程序。

1.  我应该使用相同的包名吗？如果没有，为什么不呢？
2.  问题可能是什么？
3.  对于不同的市场，我是否应该总是以不同的方式命名包裹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:34:45.463

我会保持它们不变，没有理由改变。只需让您使用相同的密钥对其进行签名即可。

# postgresql - Postgresql - 选择“投票”计数，但仅包括最新的

> ID：13826995
> 
> 赞同：0
> 
> 时间：2012-12-11T19:21:48.467
> 
> 标签：postgresql

我已经盯着这个看了 20 分钟，无法绕开它。我以前做过，只是不记得在哪个项目中（所以我可以参考代码）。

我有一张这样的桌子：

```
votes [table]
  id - serial , primary
  useraccount_id - id
  object_id - id
  vote - int
  timestamp_vote - timestamp 
```

我需要能够为任何一个对象选择当前的总票数。

但是 - 此表也可用作“时间线”视图。请注意，我使用序列作为 id 列。useraccount_id + object_id 可能有多个记录

不幸的是，这不是我需要的：

```
SELECT 
   vote , count(vote)
FROM 
   votes
WHERE
   object_id = 161 
GROUP BY 
   vote ; 
```

我知道需要使用子查询和不同的，以及“按时间戳顺序排序”，以限制给定用户的最新投票。我只是不记得如何将 SELECT 串在一起。

-- 添加样本数据 --

样本数据

```
 id | object_id  | useraccount_id |     timestamp_created      | vote 
----+------------+----------------+----------------------------+------------
  2 |        153 |             57 | 2012-12-11 18:37:20.421013 |    1
  3 |        153 |             57 | 2012-12-11 18:48:39.963748 |    2
  4 |        153 |             57 | 2012-12-11 18:48:42.869945 |    3
  5 |        153 |             57 | 2012-12-11 18:48:48.991617 |    1
  6 |        153 |             57 | 2012-12-11 19:34:26.701351 |    2
  7 |        153 |             57 | 2012-12-11 19:35:52.449031 |    3
  8 |        153 |             57 | 2012-12-11 19:35:52.986822 |    1
  9 |        153 |             57 | 2012-12-11 19:35:53.850291 |    2
 10 |        153 |             58 | 2012-12-11 19:35:55.884202 |    3
 12 |        153 |             58 | 2012-12-11 19:35:56.803337 |    1
 13 |        153 |             59 | 2012-12-11 19:37:04.563519 |    3
 15 |        153 |             60 | 2012-12-11 19:37:40.618324 |    3
 16 |        153 |             61 | 2012-12-11 19:37:40.618324 |    3
 17 |        153 |             62 | 2012-12-11 19:37:40.618324 |    3
 18 |        153 |             63 | 2012-12-11 19:37:40.618324 |    2 
```

预期的输出是：

```
vote | count
-----+------
1    | 1        # user 58 cast a vote of `3` , then `1`.  only the latest vote of `1` counted.
2    | 2        # user 57 switched votes many times. only their last vote of `2` counted. user 63 cast a vote of `2` as well.
3    | 4        # users 59,60,61,62 all voted `3` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:59:20.373

```
select vote, 
       count(vote) as cnt
from (
   select vote, 
          row_number() over (partition by vote order by timestamp_created desc) as rn
   from votes
)
where rn = 1
group by vote; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:05:52.540

你可以尝试这样的事情：

```
SELECT DISTINCT ON (useraccount_id, object_id) 
       vote, 
       timestamp_vote,
       useraccount_id,
       object_id
FROM votes
WHERE object_id = 161 -- your filter here
ORDER BY useraccount_id, object_id, timestamp_vote DESC 
```

它会给你最后一票`(useraccount_id, object_id)`。

然后：

```
SELECT SUM (CASE WHEN vote THEN 1 ELSE 0 END) as true_vote_sum,
       SUM (CASE WHEN vote THEN 0 ELSE 1 END) as false_vote_sum
FROM (SELECT DISTINCT ON (useraccount_id, object_id) 
             vote
      FROM votes
      WHERE object_id = 161 -- your filter here
      ORDER BY useraccount_id, object_id, timestamp_vote DESC) 
```

得到票数。

详细信息：[DISTINCT ON](http://www.postgresql.org/docs/current/static/sql-select.html) , [CASE WHEN](http://www.postgresql.org/docs/current/static/functions-conditional.html)

# android - 在我的 android 设备上运行应用程序时显示应用程序意外停止错误

> ID：13826996
> 
> 赞同：0
> 
> 时间：2012-12-11T19:21:51.670
> 
> 标签：android

在我的应用程序中，当我尝试在 android 设备上运行我的应用程序时没有编译错误，它显示应用程序意外停止错误。我在 lohcat 中没有找到确切的问题，我正在粘贴 logcat 详细信息，请任何人解释这一点。

```
12-12 00:39:20.240: I/dalvikvm(687): Could not find method com.google.inject.Injector.getInstance, referenced from method de.dan_nrw.android.scroid.DependencyInjector.getInstance
12-12 00:39:20.310: W/dalvikvm(687): VFY: unable to resolve interface method 3344: Lcom/google/inject/Injector;.getInstance (Ljava/lang/Class;)Ljava/lang/Object;
12-12 00:39:20.310: D/dalvikvm(687): VFY: replacing opcode 0x72 at 0x000e
12-12 00:39:20.320: E/dalvikvm(687): Could not find class 'com.google.inject.Module[]', referenced from method de.dan_nrw.android.scroid.DependencyInjector.init
12-12 00:39:20.370: W/dalvikvm(687): VFY: unable to resolve new-array 684 ([Lcom/google/inject/Module;) in Lde/dan_nrw/android/scroid/DependencyInjector;
12-12 00:39:20.370: D/dalvikvm(687): VFY: replacing opcode 0x23 at 0x0001
12-12 00:39:20.413: W/dalvikvm(687): Unable to resolve superclass of Lde/dan_nrw/android/scroid/ProductiveModule; (472)
12-12 00:39:20.450: W/dalvikvm(687): Link of class 'Lde/dan_nrw/android/scroid/ProductiveModule;' failed
12-12 00:39:20.450: D/dalvikvm(687): DexOpt: unable to opt direct call 0x0d30 at 0x06 in Lde/dan_nrw/android/scroid/DependencyInjector;.init
12-12 00:39:20.471: D/AndroidRuntime(687): Shutting down VM
12-12 00:39:20.471: W/dalvikvm(687): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
12-12 00:39:20.511: E/AndroidRuntime(687): FATAL EXCEPTION: main
12-12 00:39:20.511: E/AndroidRuntime(687): java.lang.NoClassDefFoundError: com.google.inject.Module[]
12-12 00:39:20.511: E/AndroidRuntime(687):  at de.dan_nrw.android.scroid.DependencyInjector.init(DependencyInjector.java:37)
12-12 00:39:20.511: E/AndroidRuntime(687):  at de.dan_nrw.android.scroid.ScroidWallpaperGallery.<init>(ScroidWallpaperGallery.java:84)
12-12 00:39:20.511: E/AndroidRuntime(687):  at java.lang.Class.newInstanceImpl(Native Method)
12-12 00:39:20.511: E/AndroidRuntime(687):  at java.lang.Class.newInstance(Class.java:1319)
12-12 00:39:20.511: E/AndroidRuntime(687):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
12-12 00:39:20.511: E/AndroidRuntime(687):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1870)
12-12 00:39:20.511: E/AndroidRuntime(687):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
12-12 00:39:20.511: E/AndroidRuntime(687):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
12-12 00:39:20.511: E/AndroidRuntime(687):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
12-12 00:39:20.511: E/AndroidRuntime(687):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-12 00:39:20.511: E/AndroidRuntime(687):  at android.os.Looper.loop(Looper.java:137)
12-12 00:39:20.511: E/AndroidRuntime(687):  at android.app.ActivityThread.main(ActivityThread.java:4340)
12-12 00:39:20.511: E/AndroidRuntime(687):  at java.lang.reflect.Method.invokeNative(Native Method)
12-12 00:39:20.511: E/AndroidRuntime(687):  at java.lang.reflect.Method.invoke(Method.java:511)
12-12 00:39:20.511: E/AndroidRuntime(687):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-12 00:39:20.511: E/AndroidRuntime(687):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-12 00:39:20.511: E/AndroidRuntime(687):  at dalvik.system.NativeStart.main(Native Method)
12-12 00:39:23.931: I/Process(687): Sending signal. PID: 687 SIG: 9
12-12 00:44:23.441: I/dalvikvm(728): Could not find method com.google.inject.Injector.getInstance, referenced from method de.dan_nrw.android.scroid.DependencyInjector.getInstance
12-12 00:44:23.491: W/dalvikvm(728): VFY: unable to resolve interface method 3344: Lcom/google/inject/Injector;.getInstance (Ljava/lang/Class;)Ljava/lang/Object;
12-12 00:44:23.491: D/dalvikvm(728): VFY: replacing opcode 0x72 at 0x000e
12-12 00:44:23.491: E/dalvikvm(728): Could not find class 'com.google.inject.Module[]', referenced from method de.dan_nrw.android.scroid.DependencyInjector.init
12-12 00:44:23.491: W/dalvikvm(728): VFY: unable to resolve new-array 684 ([Lcom/google/inject/Module;) in Lde/dan_nrw/android/scroid/DependencyInjector;
12-12 00:44:23.491: D/dalvikvm(728): VFY: replacing opcode 0x23 at 0x0001
12-12 00:44:23.511: W/dalvikvm(728): Unable to resolve superclass of Lde/dan_nrw/android/scroid/ProductiveModule; (472)
12-12 00:44:23.521: W/dalvikvm(728): Link of class 'Lde/dan_nrw/android/scroid/ProductiveModule;' failed
12-12 00:44:23.551: D/dalvikvm(728): DexOpt: unable to opt direct call 0x0d30 at 0x06 in Lde/dan_nrw/android/scroid/DependencyInjector;.init
12-12 00:44:23.551: D/AndroidRuntime(728): Shutting down VM
12-12 00:44:23.561: W/dalvikvm(728): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
12-12 00:44:23.641: E/AndroidRuntime(728): FATAL EXCEPTION: main
12-12 00:44:23.641: E/AndroidRuntime(728): java.lang.NoClassDefFoundError: com.google.inject.Module[]
12-12 00:44:23.641: E/AndroidRuntime(728):  at de.dan_nrw.android.scroid.DependencyInjector.init(DependencyInjector.java:37)
12-12 00:44:23.641: E/AndroidRuntime(728):  at de.dan_nrw.android.scroid.ScroidWallpaperGallery.<init>(ScroidWallpaperGallery.java:84)
12-12 00:44:23.641: E/AndroidRuntime(728):  at java.lang.Class.newInstanceImpl(Native Method)
12-12 00:44:23.641: E/AndroidRuntime(728):  at java.lang.Class.newInstance(Class.java:1319)
12-12 00:44:23.641: E/AndroidRuntime(728):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
12-12 00:44:23.641: E/AndroidRuntime(728):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1870)
12-12 00:44:23.641: E/AndroidRuntime(728):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
12-12 00:44:23.641: E/AndroidRuntime(728):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
12-12 00:44:23.641: E/AndroidRuntime(728):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
12-12 00:44:23.641: E/AndroidRuntime(728):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-12 00:44:23.641: E/AndroidRuntime(728):  at android.os.Looper.loop(Looper.java:137)
12-12 00:44:23.641: E/AndroidRuntime(728):  at android.app.ActivityThread.main(ActivityThread.java:4340)
12-12 00:44:23.641: E/AndroidRuntime(728):  at java.lang.reflect.Method.invokeNative(Native Method)
12-12 00:44:23.641: E/AndroidRuntime(728):  at java.lang.reflect.Method.invoke(Method.java:511)
12-12 00:44:23.641: E/AndroidRuntime(728):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-12 00:44:23.641: E/AndroidRuntime(728):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-12 00:44:23.641: E/AndroidRuntime(728):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:41:55.140

可能是您忘记在构建路径中添加必要的 jar

# java - 二叉搜索树与 MultiMap

> ID：13826998
> 
> 赞同：3
> 
> 时间：2012-12-11T19:22:00.397
> 
> 标签：java, data-structures, guava, binary-search-tree, memory-efficient

我必须解决的问题是我必须在树中输入 IP 地址前缀和与它们关联的数据，以便以后可以查询它们。我正在从一个文件中读取这些地址，该文件可能包含多达 1600 万条记录，并且该文件可能有重复项，我也必须存储这些记录。

我编写了自己的二叉搜索树，但了解到`TreeMap`Java 中的 a 是使用红黑树实现的，但 a`TreeMap`不能包含重复项。

我希望查询需要`O(logn)`时间。
数据结构需要在 Ram 中，所以我也不确定如何存储 1600 万个节点。

我想问：使用像番石榴这样的库在多地图中插入 Ips 会不会对性能造成太大影响？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T19:26:29.210

使用经过测试记录和维护良好的内置库*通常是*一种好习惯。
它还将帮助您了解有关番石榴的更多信息。一旦你开始“只为一件事”使用它，你很可能会意识到还有很多东西可以让你的生活变得更轻松。

此外，另一种方法是使用`TreeMap<Key,List<MyClass>>`而不是`TreeMap<Key,MyClass>`作为 Multimap 的自定义实现。

* * *

**关于内存**- 你应该尽量减少你的数据（使用高效的数据结构，不需要“浪费” `String`，例如用于存储 IP，有更便宜的替代品，利用它们。

[另请注意 - 通过使用虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)（实际上对于 64 位机器 - 它很可能已经足够了），操作系统将能够为您提供比您拥有的 RAM 更多的内存。但是，它的效率很可能不如磁盘专用的 DS（例如[B+ 树](http://en.wikipedia.org/wiki/B+_tree)）。

* * *

**替代方案：**
作为替代方案`TreeMap`- 您可能对其他数据结构感兴趣（每种都有其优点和缺点）：

*   [哈希表](http://en.wikipedia.org/wiki/Hash_table)-[`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)在 java 中实现。您的类型将是`HashMap<Key,List<Value>>`. 它允许`O(1)`平均情况查询，但可能衰减到`O(n)`最坏情况。它也不允许有效*的范围查询*。
*   [trie](http://en.wikipedia.org/wiki/Trie)或其更节省空间的版本 -[基数树](http://en.wikipedia.org/wiki/Radix_tree)。允许`O(1)`访问每个密钥，但*通常*空间效率低于其他选项。使用这种方法，您将实现[`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)与 DS 的接口，您的类型将是`Map<Key,List<Value>>`
*   [B+ 树](http://en.wikipedia.org/wiki/B+_tree)，它更适合磁盘 - 如果您的数据太大而无法放入 RAM。