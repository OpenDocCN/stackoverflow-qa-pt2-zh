# StackOverflow 问答 16030000-16030999

# ruby-on-rails - JS文件放在Rails的什么位置？

> ID：16030001
> 
> 赞同：1
> 
> 时间：2013-04-16T06:14:52.137
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我想知道在哪里将 javascript 文件放在 ruby​​ on rails 中。

我在我的应用程序中使用 jQuery 对话框。我放在 assets/javascripts 和 assets/stylesheets 下的所有 jQuery 和 CSS 文件。

现在，我的视图页面中有一些 JavaScript 代码，即“my_event”。把这段 JavaScript 代码放在哪里？

我对此进行了谷歌搜索，并发现了一些建议制作**my_event.js**文件并将此文件放在**views/useraccount**目录中的内容。

寻求您的宝贵建议。

**控制器用户帐户.rb**

**查看 my_event.html.erb**

```
<script>
    $(document).ready(function() {

        $('#calendar').fullCalendar({

            header : {
                left : 'prev,next today',
                center : 'title',
                right : 'month,agendaWeek,agendaDay'
            },
            // US Holidays
            events : '/useraccount/my_event',
            eventClick : function(event) {
                // alert (JSON.stringify(event,null,4)); return false;
                if (event.description) {
                    var a = '<button onclick="addToMycal(' + event.id + ')">UnJoin</button>'
                    $("#Successmes").empty();
                    $('#event-desc').html(event.description);
                    $('#add-to-my-cal').html(a)
                    $("#dialog-modal").dialog({
                        height : 350,
                        width : 600,
                        modal : true,
                        buttons : {
                            Ok : function() {
                                $(this).dialog("close");
                            }
                        }

                    });
                } else {
                    $('#event-desc').html("<h4>Oops!</h4> No Data Available");
                    $("#dialog-modal").dialog({
                        height : 300,
                        width : 363,
                        modal : true,
                        buttons : {
                            Ok : function() {
                                $(this).dialog("close");
                            }
                        }
                        // alert (event.description);
                    });
                }
            },
        });
    });

</script>

<script>
    function addToMycal(val) {
        $.getJSON("/useraccount/delete_event?d=" + val, function(data) {
            // alert (JSON.stringify(data,null,4)); return false;
            $("#Successmes").empty();
            $("#event-desc").html(data.msg)
            $("#add-to-my-cal").remove();

        });

    }

</script>
<style>
    #calendarbody {
        margin-top: 40px;
        text-align: center;
        font-size: 14px;
        font-family: "Lucida Grande", Helvetica, Arial, Verdana, sans-serif;
    }

    #calendar {
        width: 900px;
        margin: 0 auto;
        background-color: #E7EAF6;
    }

</style>
<div id="calendarbody">
    <div id='calendar'></div>
</div>

<div id="dialog-modal" title=" Event Description">
    <p id="event-desc"></p>
    <div id="add-to-my-cal"></div>
    <p id="Successmes"></p>

</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T08:19:06.593

将其保存在 assets/javascripts 文件夹中并交叉检查您是否编写了“require_tree”。而已。

这将在每个页面上可用...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T06:26:23.510

将它放在 assets/javascripts 文件夹中，并在 application.js 文件中要求它。如果您的 application.js 文件有 require_tree .，则无需再次要求您的 js 文件。

# c# - XML 文本编辑器 - 文本框

> ID：16030002
> 
> 赞同：0
> 
> 时间：2013-04-16T06:14:56.193
> 
> 标签：c#, asp.net, .net, xml

我想设计一个 xml 文本编辑器，它基于实现所有 XML 特征的普通文本框（即，它应该实现智能以通过 node_name、attribute_name、attribute_value 区分文本颜色，并且它应该检查是否正确关闭标签）。

谁能告诉我如何处理用户输入的每个字符（通常我们可以在文本框中完全输入文本后调用 TextBox1_TextChanged 事件，但我需要在每个字符输入中调用此事件） ? 我擅长 C#，所以我决定将控件转换为编码页面，因为我已经使用控制台应用程序做了一个编辑器，它从用户那里读取输入字符并更改文本颜色。

我以这种方式处理这个问题可能是错误的，所以请提供您的建议、有价值的参考链接和想法来完成这个编辑器。

如果你知道任何插件来完成这个任务，请告诉我

提前致谢。

问候，

--SJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T06:29:36.687

使用富文本框并处理 KeyDown 事件以进行字符处理。

富文本框将允许您进行语法高亮、文本格式化等。

我还将验证输入的 xml 的正确性，如果验证失败，可能会向用户突出显示不正确的语法。

所有这一切都需要付出努力，我不知道有任何快速解决方案。但是使用我在这里建议的基础知识，如果你付出努力，你可以实现你所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T06:35:33.217

EditArea似乎具有您正在寻找的功能（以及更多）[。](http://www.cdolivet.com/editarea/)

您还可以查看[Javascript 基本源代码编辑器列表](http://en.wikipedia.org/wiki/Comparison_of_JavaScript-based_source_code_editors)

# c++ - 在 SQLite 中迭代一个 select 语句

> ID：16030003
> 
> 赞同：4
> 
> 时间：2013-04-16T06:14:58.953
> 
> 标签：c++, sqlite

我准备了一个选择语句。

```
sqlite3_prepare(db, "SELECT symbol,image FROM test WHERE template=? AND field=?", -1, &stmt, 0);
sqlite3_bind_text16(stmt, 1, pParams->pszFile, -1, SQLITE_STATIC);
sqlite3_bind_text16(stmt, 2, pParams->pszFieldId, -1, SQLITE_STATIC); 
```

如何遍历结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T06:32:43.793

```
int rc = sqlite3_prepare(db, "SELECT symbol,image FROM test WHERE template=? AND field=?", -1, &stmt, 0);
sqlite3_bind_text16(stmt, 1, pParams->pszFile, -1, SQLITE_STATIC);
sqlite3_bind_text16(stmt, 2, pParams->pszFieldId, -1, SQLITE_STATIC);  

 if(rc != SQLITE_OK)
 {
    fprintf(stderr, "SQL error: %s\n", sqlite3_errmsg(db));
    return;
  }
  rc = sqlite3_step(stmt);
  int ncols = sqlite3_column_count(stmt);

  while(rc == SQLITE_ROW)
  {

      for(i=0; i < ncols; i++)
      {
         fprintf(stderr, "'%s' ", sqlite3_column_text(stmt, i));
      }

      fprintf(stderr, "\n");
      rc = sqlite3_step(stmt);
  }

  sqlite3_finalize(stmt); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:16:56.953

[`sqlite3_step()`](http://www.sqlite.org/c3ref/step.html)为此目的使用该功能。

# android - 安卓网络连接代码

> ID：16030009
> 
> 赞同：1
> 
> 时间：2013-04-16T06:15:24.857
> 
> 标签：android

我正在开发一个应用程序。场景是：我的 Android 设备显示连接到互联网，但该设备无法访问互联网。在我的应用程序中，我使用此代码检查互联网连接：

```
private boolean isNetworkAvailable() {
    ConnectivityManager connectivityManager 
          = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
    return activeNetworkInfo != null && activeNetworkInfo.isConnected();
}

<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

但是每次它在我上面解释的场景中崩溃。任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T06:24:20.017

我写了这个方法来处理这个

```
public boolean isOnline(Context con) {
        try {
            connectivityManager = (ConnectivityManager) con
                        .getSystemService(Context.CONNECTIVITY_SERVICE);

        NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();
        connected = networkInfo != null && networkInfo.isAvailable() &&
                networkInfo.isConnected();
        return connected;

        } catch (Exception e) {
            System.out.println("CheckConnectivity Exception: " + e.getMessage());
            Log.v("connectivity", e.toString());
        }
        return connected;
    } 
```

并将这些权限添加到清单文件

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:26:55.290

用这个

公共静态布尔isInternetOn（上下文上下文）{

```
 ConnectivityManager cm = (ConnectivityManager) context
            .getSystemService(Context.CONNECTIVITY_SERVICE);
    // test for connection
    if (cm.getActiveNetworkInfo() != null
            && cm.getActiveNetworkInfo().isAvailable()
            && cm.getActiveNetworkInfo().isConnected()) {
        Log.v(TAG, "Internet is working");
        // txt_status.setText("Internet is working");
        return true;
    } else {
        // txt_status.setText("Internet Connection Not Present");
        Log.v(TAG, "Internet Connection Not Present");
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T06:28:08.913

检查这个：

```
private boolean isNetworkAvailable()
{
  ConnectivityManager conMan = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
  State mobile = conMan.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).getState();
  State wifi = conMan.getNetworkInfo(ConnectivityManager.TYPE_WIFI).getState();

  if (wifi == NetworkInfo.State.CONNECTED || wifi == NetworkInfo.State.CONNECTING)
  {             
      // Wifi connected     
  }
  else if(mobile == NetworkInfo.State.CONNECTED || mobile == NetworkInfo.State.CONNECTING)
  {
      // Mobile network connected
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T06:22:12.520

试试这个代码

```
public boolean isConnected(){
        ConnectivityManager connectivity = (ConnectivityManager) _context.getSystemService(Context.CONNECTIVITY_SERVICE);
          if (connectivity != null)
          {
              NetworkInfo[] info = connectivity.getAllNetworkInfo();
              if (info != null)
                  for (int i = 0; i < info.length; i++)
                      if (info[i].getState() == NetworkInfo.State.CONNECTED)
                      {
                          return true;
                      }

          }
          return false;
    } 
```

# c# - WPF - 如何从视图模型的视图中显示自定义异常

> ID：16030012
> 
> 赞同：1
> 
> 时间：2013-04-16T06:15:48.513
> 
> 标签：c#, wpf, mvvm

我有一个 WPF MMVM 应用程序，我们正在从 viewmodel 方法获取 xml 解析器异常。但问题是我不想从视图模型中显示异常。我想从视图显示消息（从视图`CustomMessageBox.Show()`调用）

根据下面的代码，我`CustomMessageBox.Show()`从视图模型 catch 块中调用。我如何`CustomMessageBox.Show()`从`xaml.cs`or拨打电话`xaml`？

我们如何通知视图并调用`CustomMessageBox.Showfrom`视图？此代码片段在 WPF 命令中调用。

当前实施：

```
try
{
  var xamlReader = XamlReader.Parse(xamlText);
  var gb = modelTemplate.GetGraphicalObject("Icons");
  var strings = new Dictionary<string, string> { { "Default", xamlText } };
  gb.UpdateGraphicalObject(strings, null, null);
  if (xamlReader != null)
  {
    var view = new Viewbox();
    view.Child = (UIElement)xamlReader;
    view.Stretch = Stretch.Uniform;
    modelVM.Icon = view;
    }
  }
  catch (XamlParseException)
  {
    CustomMessageBox.Show("Invalid XAML file specified.", Properties.Resources.NextGenSim, MessageBoxButton.OK, MessageBoxImage.Error);
    //throw new XamlParseException("Invalid XAML file specified");
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:13:48.817

如果您使用信使/事件聚合器（例如 MVVM Light），您可以将包含异常详细信息的消息从视图模型发送到视图，当收到该消息时，可以触发消息框显示。

使用[MVVM Light](http://mvvmlight.codeplex.com/)，它可能如下所示：

视图模型：

```
Messenger.Default.Send(new ErrorMessage("Invalid XAML file specified.",
                       Properties.Resources.NextGenSim)); 
```

看法

```
Messenger.Default.Register<ErrorMessage>(this, message =>
    {
        CustomMessageBox.Show(message.Message, message.Details, 
                              MessageBoxButton.OK, MessageBoxImage.Error);
    } 
```

ErrorMessage 是一个自定义类，包含有关您需要向用户显示的异常的任何详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:24:48.350

您可以创建一个`Popup`具有与 ViewModel 属性的可见性绑定的模式，当给定的源不为 null 或为空时`ErrorMessage`，使用它返回 true。`ValueConverter`

# python - 生成器函数是否比 Python 中相应的 for 循环（（或广义的迭代）更快？

> ID：16030014
> 
> 赞同：3
> 
> 时间：2013-04-16T06:16:01.390
> 
> 标签：python, iterator, generator

我是 Python 初学者，虽然我经常使用生成器（它们简洁明了，但我想了解它们是否比对应的 for 循环（或广泛的迭代）更好）更快：在处理时间和/或调用开销方面，甚至内存。示例-：[这里，数据是字典对象]

```
from math import sqrt

# **Generator** 
sum = sqrt(sum([pow(data[pers1][item] - data[pers2][item], 2) 
                for item in data[pers1] 
                if item in data[pers2]]))

# **For loop Equivalent** 
sum = 0
for item in data[pers1]:
    if item in data[pers2]:
         sum += sqrt(pow(data[pers1][item] - data[pers2][item], 2)) 
```

循环结构是否完全相同，如果不同（在其他情况下），那会是什么时候？我试图扩大输入数据并测量时间（查找代理），但这不是结论性的。我想更直观地理解这一点，即是否有区别。

[我在 python 2.7 上]

代码改编自“编程集体智慧” **相关问题**：[Python 的 [<generator expression>] 至少比 list(<generator expression>) 快 3 倍？](https://stackoverflow.com/questions/4402858/pythons-generator-expression-at-least-3x-faster-than-listgenerator-expres)

# asp.net - 实体框架 WCF IIS 问题

> ID：16030016
> 
> 赞同：0
> 
> 时间：2013-04-16T06:16:12.557
> 
> 标签：asp.net, wcf, entity-framework, iis

我创建了一个 WCF 服务并托管在 IIS 中。在我的实体框架中，当使用 Windows 身份验证获取异常“基础提供程序在打开时失败”。当它是 SQL 身份验证或我在连接字符串中传递用户 ID 和密码时，它工作正常。如果我使用“集成安全 = true”，为什么这个问题仍然存在。此外，如果服务未托管在 IIS 中，则它可以正常工作。

在我的 WCF 服务实体模型中可用。我正在另一个 Web 应用程序中使用我的 wcf 服务。

# jquery - Jquery 加载 - 替换 div

> ID：16030017
> 
> 赞同：0
> 
> 时间：2013-04-16T06:16:13.850
> 
> 标签：jquery, html

可能只是一些格式化问题......我已经从stackoverflow检查了不同的例子......但是我仍然不知道为什么“加载”对我不起作用。这里有两个文件：

文件 1（index.html）：

```
<!doctype html>
<html>
    <head>
        <title>Load remote content into object element</title>
        <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    </head>
    <body>
        <div id="siteloader"></div>​
        <script>
            $('#siteloader').load('test.html #content2');
        </script>
    </body>
</html> 
```

文件2（test.html）：

```
<!doctype html>
<html>
    <div id="content1"><p>Some content1</p></div>​
    <div id="content2"><p>Some content2</p></div>​
    <div id="content3"><p>Some content3</p></div>​
</html> 
```

这两个文件位于同一个文件夹中。如果我用浏览器（Iceweasel(Firefox) 或 Epiphany）打开 index.html，我只会得到一个白页。我正在开发一个 Debian（内核：2.6.32-5-amd64），如果这很重要的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T06:18:10.230

您的选择器字符串不正确。它有太多的引号。另外，我会将您的代码放入`$(document).ready()`回调中：

```
$(document).ready(function() {
    $('#siteloader').load('test.html #content2');
}); 
```

此外，jQuery 的版本为 1.9.1。我会考虑更新。

另外，尝试给你的`test.html`文件一个`<body>`标签。

# jquery - HighCharts（jQuery 饼图）未在 IE 中呈现

> ID：16030022
> 
> 赞同：0
> 
> 时间：2013-04-16T06:16:46.037
> 
> 标签：jquery, highcharts

我的 HighCharts 饼图不仅在 IE 中呈现，而且在 Chrome、FF、Opera 和 safari 中正确呈现。但问题出在我的 IE9 上。我已经阅读了 stackoverflow 中的帖子，并相应地更正了我的代码，即使我没有运气。下面是我的示例 .js 代码

```
$(function () {
    var chart;

    $(document).ready(function () {

        // Build the chart
        $('#Chart').highcharts({
            chart: {
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false
            },
            title: {
                text:'Time-Off Request'
            },
            tooltip: {
                pointFormat: '{series.name}: <b>{point.percentage}%</b>',
                percentageDecimals: 2

            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: false
                    },
                    showInLegend: true

                }
            },
            series: [{
                type: 'pie',
                name: 'Time-Off Request Details',
                data: [
                    ['Vacation', 45.0],
                    ['Time-Off', 26.8],
                    ['Sick Time',12.8],
                    ['Personal', 8.5],
                    ['Bereavement', 6.2],
                    ['Others', 0.7]
                ]
            }]
        });
    });

}); 
```

这是我试图呈现饼图的 Html div

```
<div id="Chart">
</div> 
```

有人可以指出我做错了什么吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:49:24.903

我已经在 jsfiddle 中复制了您的示例，并且一切正常。

[http://jsfiddle.net/z3fZv/](http://jsfiddle.net/z3fZv/) [http://jsfiddle.net/z3fZv/show](http://jsfiddle.net/z3fZv/show)

```
$(function () {
    var chart;

    $(document).ready(function () {

        // Build the chart
        $('#Chart').highcharts({
            chart: {
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false
            },
            title: {
                text:'Time-Off Request'
            },
            tooltip: {
                pointFormat: '{series.name}: <b>{point.percentage}%</b>',
                percentageDecimals: 2

            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: false
                    },
                    showInLegend: true

                }
            },
            series: [{
                type: 'pie',
                name: 'Time-Off Request Details',
                data: [
                    ['Vacation', 45.0],
                    ['Time-Off', 26.8],
                    ['Sick Time',12.8],
                    ['Personal', 8.5],
                    ['Bereavement', 6.2],
                    ['Others', 0.7]
                ]
            }]
        });
    });

}); 
```

你有最新的 highcharts 版本吗？

# c# - 测试功能的通用框架

> ID：16030024
> 
> 赞同：0
> 
> 时间：2013-04-16T06:16:52.347
> 
> 标签：c#, .net

如何编写/开发一个通用框架来自动测试新添加的功能测试。

这就是我们需要的： - 我们的应用程序应该存储所有需要测试的方法名称。应用程序应该选择方法并执行测试。

在表格应用程序中应显示以下内容：-

```
----------------------------------------------------------------
| Functionality | Test Name           | Status | Last Run Date |
|---------------|---------------------|------------------------|
| Login         | Login to the system |  Pass  | 1 Jan 2013    |
|               |---------------------|------------------------|
| Login         | Logout from system  |  Pass  | 1 Jan 2013    |
|---------------|---------------------|------------------------|
| Account       | Debit Money         |  Pass  | 1 Jan 2013    |
|               |---------------------|------------------------|
| Account       | Withdraw Money      |  Fail  | 1 Jan 2013    |
|---------------|---------------------|------------------------| 
```

以上所有细节都应存储在数据库中。我们的应用程序应该定期进行测试并运行测试（基于配置设置）。

假设开发人员已经开发了另一个功能，即（检查余额）。

现在，我们希望开发人员只提供数据库中的信息，并且我们的应用程序应该像往常一样工作。

但问题是我们如何才能实现它？假设开发人员编写了新功能（检查余额），那么仅在数据库中输入一行不足以运行测试......因为我们应该知道如何执行 checkbalance() 方法。等等

有什么建议么？

# javascript - 我不能从 onchange 事件中调用两个函数

> ID：16030030
> 
> 赞同：7
> 
> 时间：2013-04-16T06:17:16.873
> 
> 标签：javascript, function, dom-events

我必须通过将上述文本字段作为输入来调用 ajax 函数以及调用附加函数来获取另一个值。我想从该函数中获得回报。这是我用来调用这两个函数的代码，但只有第一个函数 ajax (this) 才有效，调用 ajax 函数后我得到了返回，而第二个函数没有得到任何返回值。我究竟做错了什么？这是我的代码：

```
<select style="width: 305px;" name="category_id1" id="category_id1" onchange="(function(){ajax('this');return locname('this');})(this)"> 
```

我的职能是：

```
function ajax(control)
{
var loc=document.getElementById('category_id1').value;
//alert(loc);
var req;
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
   req=new XMLHttpRequest();
}
else
{// code for IE6, IE5
   req=new ActiveXObject("Microsoft.XMLHTTP");
}
req.open("POST", "ajax.php?&loc="+loc+"", true);
req.send();

req.onreadystatechange=function(){
   if(req.readyState==4&&req.status==200){
       //$(".error").hide();
       result=req.responseText
       alert(result);
       var items = JSON.parse(result);
       //alert(items.length)
       var html = '<option value="">Select</option>';
       for ( var i = 0; i < items.length; i++ ) {
       html += "<option value='" + items[ i ] + "'>" + items[ i ] + "</option>"
     }
     document.getElementById("Ultra").innerHTML = html;
   }
   }
   }
 function locname(control)
 {
 var locName=control.value;
 //alert(locName)
 var json = <?php echo $response ?>;
 var orgName=document.getElementById("category_id").value;
//alert(json);
var html="<option>Select</option>";
var locations;
//alert(json.length);
for(var i=0; i<json.length; i++)
    {
        var item = json[i].name;
        //alert(item);
        if(orgName===item){
            //alert(item)
            locations=json[i].location;
            for(var j=0;j<locations.length;j++){
                var location=locations[j].name;
                //alert(locName)
       if(locName===location)
           {
               //alert(locName);
               var buildings=locations[j].building
               //alert(buildings)
               for(var k=0;k<buildings.length;k++)
                   {
                       var building=buildings[k];
                       //alert(building);
                html=html+"<option value='"+building+"'>"+building+"</option>";
                   }
           }

            }

}
}
document.getElementById("category_id2").innerHTML=html;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-16T06:20:15.423

只需尝试：

```
onchange="ajax(this);locname(this);" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:20:45.517

不要在周围加上引号`this`。这会传递文字字符串而不是变量的值`this`。

# file - ASP.Net MVC - 从 HttpPostedFileBase 读取文件而不保存

> ID：16030034
> 
> 赞同：68
> 
> 时间：2013-04-16T06:17:42.320
> 
> 标签：file, c#-4.0, file-io, asp.net-mvc-2, stream

我正在使用文件上传选项上传文件。我直接在 POST 方法中将此文件从视图发送到控制器，例如，

```
 [HttpPost]
    public ActionResult Page2(FormCollection objCollection)
    {
        HttpPostedFileBase file = Request.Files[0];
    } 
```

假设，我正在上传一个记事本文件。我如何阅读此文件并将此文本附加到字符串生成器，而不保存该文件....

我知道在`SaveAs`这个文件之后，我们可以读取这个文件。但是我如何在不保存的情况下读取这个文件`HttpPostedFileBase`？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-04-16T06:37:46.127

这可以使用**httpPostedFileBase**类返回**HttpInputStreamObject**来完成，按照[此处指定](http://msdn.microsoft.com/en-us/library/system.web.httppostedfilebase%28v=vs.100%29.aspx)

您应该将流转换为字节数组，然后您可以读取文件内容

请参考以下链接

**[http://msdn.microsoft.com/en-us/library/system.web.httprequest.inputstream.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.inputstream.aspx)** ]

希望这可以帮助

更新 ：

> 您从 HTTP 调用中获得的流是只读的顺序（不可搜索），并且 FileStream 是可读/写可搜索的。您需要首先将 HTTP 调用中的整个流读入一个字节数组，然后从该数组创建 FileStream。

取自[这里](https://stackoverflow.com/questions/13119863/unable-to-cast-object-of-type-system-web-httpinputstream-to-type-system-io-fi)

```
// Read bytes from http input stream
BinaryReader b = new BinaryReader(file.InputStream);
byte[] binData = b.ReadBytes(file.ContentLength);

string result = System.Text.Encoding.UTF8.GetString(binData); 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-09-04T10:54:56.180

另一种方法是使用 StreamReader。

```
public void FunctionName(HttpPostedFileBase file)
{
    string result = new StreamReader(file.InputStream).ReadToEnd();
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-10-28T12:07:26.333

对 Thangamani Palanisamy 答案的轻微更改，允许处理二进制阅读器并更正评论中的输入长度问题。

```
string result = string.Empty;

using (BinaryReader b = new BinaryReader(file.InputStream))
{
  byte[] binData = b.ReadBytes(file.ContentLength);
  result = System.Text.Encoding.UTF8.GetString(binData);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-02T19:57:16.740

字节[] 数据；using(Stream inputStream=file.InputStream) { MemoryStream memoryStream = inputStream as MemoryStream; if (memoryStream == null) { memoryStream = new MemoryStream(); inputStream.CopyTo(memoryStream); } 数据 = memoryStream.ToArray(); }

# css - 媒体查询像素密度和最大宽度一起

> ID：16030041
> 
> 赞同：5
> 
> 时间：2013-04-16T06:17:57.573
> 
> 标签：css, media-queries

我正在尝试创建一个包含/排除基于最大宽度和设备像素比率的规则。例如，如果我希望排除 Kindle Fire @ 600px，但要触发 iPhone5 @640（较小的现实世界屏幕）。

以下是 AND 还是 OR 规则？假设它是一个 OR 规则，我将如何创建一个执行 AND 类型函数的规则（必须同时通过 'device-pixel-ratio of 2' 和 'max-width 749px' 检查才能触发）

```
@media only screen and (min--moz-device-pixel-ratio: 2), 
        only screen and (-o-min-device-pixel-ratio: 2/1), 
        only screen and (-webkit-min-device-pixel-ratio: 2), 
        only screen and (min-device-pixel-ratio: 2),
        only screen and (max-width: 749px){
        } 
```

编辑如下：

好的，这就是我到目前为止所拥有的 - 我猜逗号是 OR 而“and”显然是 AND。它是否正确？我正在尝试制作一组​​更通用的查询，而不仅仅是针对 iPhone/iPad...

```
@media
only screen and (max-device-width : 721px) and (orientation : portrait) and (-webkit-min-device-pixel-ratio: 1.5),
only screen and (max-device-width : 721px) and (orientation : portrait) and (min-device-pixel-ratio: 1.5),
only screen and (max-width: 359px) {
/* All Portrait Phones */
}

@media
only screen and (min-device-width : 360px) and (max-device-width : 999px) and (-webkit-min-device-pixel-ratio: 1.5),
only screen and (min-device-width : 360px) and (max-device-width : 999px) and (min-device-pixel-ratio: 1.5),
only screen and (max-width: 999px) {
/* Small tablets (assume vertical) and landscape phones */
}
/*note - Anything over 999 wide to render fully - desktop, landscape or large tablets */ 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T18:18:44.350

对带有**Retina display的****iPad**使用类似这个示例的媒体查询。

 **```
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait)
and (-webkit-min-device-pixel-ratio: 2) { /* STYLES GO HERE */ } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-12-22T17:21:51.043

或者，也许您可​​以完全跳过媒体查询并使用 Restive.JS ( [http://restivejs.com](http://restivejs.com) ) 之类的东西。

你甚至根本不需要使用传统的断点，你可以只关注**Form-factors**和**Orientation**。

针对您的特定情况安装和设置将是：

```
<!-- Install JQuery version 1.7 or higher -->
<script type="text/javascript" src="jquery.min.js"></script>

<!-- Install Restive Plugin -->
<script type="text/javascript" src="restive.min.js"></script>

<!-- Setup Plugin -->
<script>
$( document ).ready(function() {
    $('body').restive({
        breakpoints: ['10000'],
        classes: ['nb'],
        turbo_classes: 'is_mobile=mobi,is_phone=phone,is_tablet=tablet,is_landscape=landscape'
    });
});
</script> 
```

然后您需要做的就是按照以下几行返回您的 CSS 和标记：

```
/** For Desktops **/
#sidebar {display: block; float: right; width: 320px;}

/** For Phones **/
.mobi.phone #sidebar {display: none;}

/** For Tablets in Landscape Orientation **/
.mobi.tablet.landscape #sidebar {display: block; width: 35%;} 
```

此方法使您可以灵活地以直观的方式调整 CSS，而无需处理令人困惑且有时不准确的 CSS 媒体查询指令。当然，不推荐使用 ID 选择器，但我发现它们在组织我的 CSS 标记时很有用，而且对[性能的影响是无穷小](http://oli.jp/2011/ids/)的。

完全披露：我开发了插件**

# c# - 如何将 Excel 数据导入 Windows 应用程序中的组合框

> ID：16030047
> 
> 赞同：-1
> 
> 时间：2013-04-16T06:18:37.630
> 
> 标签：c#, .net, c#-4.0, combobox

我有一个组合框，因为我想从我拥有的单独的 ms excel 文件中填充组合项。如果我按下保存按钮，从组合框中选择一项后，整个数据应该保存在数据库中。

例如：在组合中我选择产品名称并单击保存意味着产品名称、购买率和销售率等应该保存在数据库中。）....

在此先感谢，抱歉 4 我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:23:18.167

**参考以下代码：**

```
 try
            {

                con.Open();

                str = "select * from [sheet1$]";

                com = new OleDbCommand(str, con);

                oledbda = new OleDbDataAdapter(com);

                ds = new DataSet();

                oledbda.Fill(ds, "[sheet1$]");

                con.Close();

                dt = ds.Tables["[sheet1$]"];

                int i = 0;

                for (i = 0; i <= dt.Rows.Count -1; i++)

                {

                    comboBox1.Items.Add(dt.Rows[i].ItemArray[0]);

                }

            }

            catch (Exception ex)
                {

                MessageBox.Show(ex.Message);

            }

        } 
```

**链接了解更多详情：**

[http://www.c-sharpcorner.com/Blogs/7482/](http://www.c-sharpcorner.com/Blogs/7482/)

另请参阅[此](http://forumarray.com/c-export-import-to-excel-with-combo-box-487357)链接以获取组合框详细信息。

# events - 当某些事件发生时，我如何知道 JavaScript 的哪一部分被执行

> ID：16030052
> 
> 赞同：1
> 
> 时间：2013-04-16T06:18:48.647
> 
> 标签：events, firefox, javascript-events

我如何知道在 Mozilla Firefox 中发生某些事件时执行了 JavaScript 的哪一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:47:14.283

这是一个非常广泛的问题，但我会试一试。我对现在 Firefox 中的本机调试器有点好奇，所以我为你研究了这个。Firebug 仍然是一个不错的工具，但如果您运行的是 Firefox 19 或更高版本，则不需要它来进行调试。我还建议尝试 Chrome 的 DevTools，它们是我个人的最爱。

要在 Firefox 中使用本机调试器，您需要配置两个选项。转到`about:config`（将其粘贴在地址栏中）。继续过去的警告。更新以下设置为真（搜索是你的朋友）：

```
devtools.chrome.enabled: true
devtools.debugger.remote-enabled: true 
```

您需要这样做，以便您可以在代码中设置断点。现在加载调试器，快捷方式是`Ctrl+Shift+S`.

此时，您需要知道在哪里设置断点。如果您编写了 JavaScript，那么您应该不会遇到太多麻烦。如果您正在检查 3rd 方代码，您可能需要浏览源代码以了解从哪里开始。

加载调试器后，在下拉列表中选择一个源文件。它可以是 JavaScript 文件，或任何其他具有 JavaScript 的资源。您应该打开您有兴趣检查的任何文件。

要添加断点，请单击行号左侧。您也可以右键单击给定的行并选择“添加断点”。如果您正在调试页面加载时发生的某些事情，请刷新页面。如果它是事件处理程序，请与页面交互以触发事件。

这些是开始在 Firefox 中进行调试所需的基础知识。这里有一些你可能需要更进一步的资源。

MDN 文章：[调试 JavaScript](https://developer.mozilla.org/en-US/docs/Debugging_JavaScript)

使用 FireBug 的 YouTube 视频：[Firebug DebuggingIntro](http://www.youtube.com/watch?v=Ql7RFkZid_I)

Chrome DevTools：[Chrome 中的断点](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints)

我希望这会有所帮助！

# c++ - 两个应用程序（*.exe）使用来自数据 DLL 的相同数据指针？

> ID：16030062
> 
> 赞同：1
> 
> 时间：2013-04-16T06:19:36.953
> 
> 标签：c++, dll, mfc, wxwidgets, shared

我有一个巨大的程序（A），它使用了大约 30 个（我自己的大部分，一些第 3 方）dll。它使用 ActiveX、ATL 和 MFC 来做不同的事情。现在我想将 wxWidgets 用于一些特殊任务，并将从程序中调用 wxWidgets 对话框。我可以使用一个特殊设计的 DLL 来做到这一点，该 DLL 采用 wxW.. 部分。但是要在有或没有 A 程序的情况下运行特殊任务，我想把 wxW.. 东西放在一个 exe (B) 中，这些 exe 应该处理来自 A 程序的相同数据。据我所知，每个 *.exe 都有自己的进程，所以我不能共享相同的指针地址。

我可以在其中一个 DLL 中放入一些共享数据块。

```
#pragma data_seg("SHARED")  
    CClassA  *g_ClassAPointer=NULL;
#pragma data_seg()  
#pragma comment(linker, "/section:SHARED,RWS") 
```

如果 A 正在运行并启动 B，我可以获得带有 A 内地址的指针 g_ClassAPointer。有没有办法获取地址或获取偏移量以到达 B 内的该地址？

提前致谢，

豪伊

顺便说一句：我们还想使用 wxWidgets 越来越多地淡化所有 MFC 内容以跨平台代码，否则我会坚持使用 MFC 或在包装器 *.exe 中使用 wxW - DLL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:25:07.237

您正在寻找共享内存，通常的创建方法是通过`CreateFileMapping`. 这可以创建由命名文件支持或由分页文件支持的共享内存。（分配的内存`GlobalAlloc` 也由页面文件支持，所以这并不稀奇）。

在任何一种情况下，内存块都被命名，因此另一个进程可以通过使用相同的名称`CreateFileMapping`调用来访问共享内存块。`OpenFileMapping`

请记住，共享内存块可能驻留在内存中的不同偏移量处。此外，如果您放入`CClassA`共享内存，则没有自动机制来确保内部的所有指针都指向`CClassA`同一个共享内存块。例如，将一个`std::string`或 MFC`CString`放在共享内存中不太可能达到您的预期。

# apache - 在 CentOS 6.3 上从 Apache Prefork MPM 切换到 Worker MPM

> ID：16030063
> 
> 赞同：2
> 
> 时间：2013-04-16T06:19:42.983
> 
> 标签：apache, worker

所以我从 prefork 切换到 worker，现在我在尝试访问我的网站时得到 500 个错误：

HTTP/1.0 500 内部服务器错误日期：2013 年 4 月 16 日星期二 05:55:08 GMT 服务器：Apache/2.2.15 (CentOS) X-Powered-By：PHP/5.3.3 缓存控制：max-age=31536000过期：星期三，2014 年 4 月 16 日 05:55:08 GMT 变化：接受编码，用户代理连接：关闭内容类型：文本/html；字符集=UTF-8

任何想法？我错过了什么？

这就是我所做的：

来自 /etc/sysconfig/httpd 的未注释 HTTPD=/usr/sbin/httpd.worker

并安装：yum install php-zts

只有 500 个错误，最糟糕的是，我找不到任何有任何错误的日志......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T14:23:57.330

您应该尝试使用 FastCGI 而不是 PHP ZTS 来使用 Apache MPM Worker。正如[这里](https://newrelic.com/docs/php/php-and-the-apache-worker-mpm)所建议的：

> 有一种方法可以获得使用线程 MPM 的性能优势并且仍然使用 PHP：使用 FastCGI

并且，在[官方文档](http://www.php.net/manual/en/faq.installation.php#faq.installation.apache2)中：

> 如果您想使用线程 MPM，请查看 PHP 在其自己的内存空间中运行的 FastCGI 配置。

# php - php 2D数组的问题

> ID：16030072
> 
> 赞同：0
> 
> 时间：2013-04-16T06:20:35.197
> 
> 标签：php, arrays, multidimensional-array

我想将表单中的数据存储到二维数组中，但将数据插入数组似乎有问题。如果我要回显 $orderArray[0][$count2] 它似乎可以工作，但如果我要回显 $orderArray[1][$count2] 会有错误

```
$dateArray = array();
$orderArray = array(array());
$amountArray = array(array());
$count = 0;
$count2 = 0;
foreach ($_POST['export'] as $date){ 
    $dateArray[$count] =  $date;
    include "/storescript/connect_to_mysql.php"; 
    $sql = mysql_query("SELECT * FROM ordera WHERE orderDate = '$date' ORDER BY     orderid ASC");
    $productCount = mysql_num_rows($sql); // count the output amount
        if ($productCount > 0) {
            while($row = mysql_fetch_array($sql)){ 
                $orderArray[$count][$count2] = $row["orderAmount"];
                $amountArray[$count][$count2] = $row["itemAmount"];
                $count2++;

            }
        }
            $count++;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:39:17.450

我会将代码简化为：

```
// connect here
include "/storescript/connect_to_mysql.php"; 

// make date list safe for querying
$dates = join(',', array_map(function($date) {
    return sprintf("'%s'", mysql_real_escape_string($date));
}, $_POST['export']);

// run query    
$sql = "SELECT * FROM ordera WHERE orderDate IN ($dates) ORDER BY orderid";
$res = mysql_query($sql) or die("Error in query");

// collect results
while ($row = mysql_fetch_array($res)) {
    $orders[$date][] = $row['orderAmount'];
    $amounts[$date][] = $row['itemAmount'];
}

// do stuff with results
foreach ($orders as $date => $orderAmounts) {
    print_r($orderAmounts);
    print_r($amounts[$date]);
} 
```

另外，请了解[`PDO`](http://php.net/pdo)or [`mysqli`](http://php.net/mysqli); 旧`mysql_`功能已弃用。

# javascript - javascript：将相同的键映射到不同的值

> ID：16030073
> 
> 赞同：2
> 
> 时间：2013-04-16T06:20:37.687
> 
> 标签：javascript

我有这个数据集

```
 'Rain':    'severe thunderstorms',
 'Rain':    'thunderstorms',
 'Rain':    'mixed rain and snow',
 'Rain':    'mixed rain and sleet', 
```

我想存储这种关系，尝试制作字典

```
var dict = {
 'Rain':    'severe thunderstorms',
     'Rain':    'thunderstorms',
     'Rain':    'mixed rain and snow',
     'Rain':    'mixed rain and sleet',
} 
```

但是当我遍历这个 dict 时，它只给出一个元素

```
for(item in dict){

        Ti.API.info(item+"...."+ dict[item]))
        } 
```

**输出**雨：混合雨和雨夹雪

然后我意识到 key 必须是唯一的，所以这个 dict 结构不起作用。

是否有任何我可以存储它并可以访问**具有相同密钥的所有映射**。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T06:23:51.863

```
var dict = {};
dict["rain"] = ['severe thunderstorms', 'mixed rain and snow', 'mixed rain and sleet'];

for(var propName in dict) {
    var propValue = dict[propName];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T06:23:33.440

您可以使用数组将多个值分配给一个属性名称：

```
var dict = {
 'Rain': ['severe thunderstorms', 'thunderstorms', 
          'mixed rain and snow', 'mixed rain and sleet']
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-26T12:40:34.140

```
var a=[];
a[0]=1;
a[1]=22;

var b=[];
b[0]=111;
b[1]=222;

var dict = {};
dict['AA']=a;
dict['BB']=b; 
```

// 获取特定键值

```
for(var i=0;i < dict['AA'];i++)
  print (dict['AA'][i]); 
```

//获取字典中的所有值

```
Object.keys(dict).forEach(function(key) {
     print(dict[key]); 
```

});

# java - 如何在文本字段处于焦点时展开文本字段，而当它失焦时它应该折叠？

> ID：16030076
> 
> 赞同：0
> 
> 时间：2013-04-16T06:20:47.447
> 
> 标签：java, swt, jface, tooltip

我想使用一个文本字段，当用户输入一些数据并且用户完成编辑并移出文本字段时它会展开而不是它应该折叠。之后，当用户关注文本字段时，它应该像工具提示一样展开。任何有关此的指针都会对我有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:48:47.853

只需在[`FocusListener`](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/events/FocusListener.html)您的文本字段中添加一个：

```
text.addFocusListener(new FocusListener() {
    @Override
    public void focusGained(FocusEvent e) {
        text.setSize(); // put in the size you want
    }

    @Override
    public void focusLost(FocusEvent e) {
        text.setSize(); // put in the size you want
    }
}); 
```

请注意，为了`setSize`正常工作，父级`text`不能有布局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T11:06:34.450

此代码应该让您了解如何执行此操作：

```
public static void main(String[] args)
{
    Display display = Display.getDefault();
    final Shell shell = new Shell(display);
    shell.setLayout(new GridLayout(1, false));

    final Text text = new Text(shell, SWT.BORDER | SWT.MULTI);
    text.setText("edasdasdas\n\nasdasda\n\nasdasd");

    final GridData data = new GridData(SWT.FILL, SWT.BEGINNING, true, false);
    data.heightHint = 100;

    text.setLayoutData(data);

    text.addListener(SWT.FocusIn, new Listener()
    {
        @Override
        public void handleEvent(Event arg0)
        {
            data.heightHint = 100;
            shell.layout(true);
        }
    });

    text.addListener(SWT.FocusOut, new Listener()
    {
        @Override
        public void handleEvent(Event arg0)
        {
            data.heightHint = 50;
            shell.layout(true);
        }
    });

    Button button = new Button(shell, SWT.PUSH);
    button.setText("Button");

    shell.pack();
    shell.open();
    while (!shell.isDisposed())
    {
        if (!display.readAndDispatch())
            display.sleep();
    }
    display.dispose();
} 
```

它基本上改变了`heightHint`失去`GridData`/获得焦点的时间。之后，您需要重新布局父级。

您必须自己对“聚焦高度”和“未聚焦高度”值进行一些调整。

以下是一些截图：

重点：

![在此处输入图像描述](https://i.stack.imgur.com/fOuSZ.png)

没有焦点：

![在此处输入图像描述](https://i.stack.imgur.com/EtxDG.png)

只需按`Button`即可失去焦点。

# shell - 用于搜索和复制的 Shell 脚本

> ID：16030080
> 
> 赞同：1
> 
> 时间：2013-04-16T06:21:18.267
> 
> 标签：shell, unix, grep

我是 Shell 脚本的新手，这就是我要找的东西-

我需要将目录中的 .gz tar 文件解压缩到该目录内的临时子目录中。我需要在这个临时目录的文件中搜索字符串模式。搜索后，我必须将文件名和出现此字符串的相应行复制到一个新文件中。最后我必须删除临时目录

欢迎任何帮助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:27:41.753

```
grep -r 'foo' /bar > baz.txt 
```

*   递归搜索`/bar`
*   搜索字符串`foo`
*   输出文件名和匹配的行
*   将输出发送到`baz.txt`

为没有读过这个人的[icktoofay](https://stackoverflow.com/users/200291)编辑

```
概要
       grep [选项] 模式 [文件...]

选项
       -R，-r，--递归
              递归读取每个目录下的所有文件；这是
              等效于 -d 递归选项。

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:43:51.597

如果您使用 grep 找到它，则只需将其重定向到某个文件。这就是您所需要的：

```
grep 'string' *.* > output.txt 
```

# c++ - 具有 unique_ptr 的类的复制构造函数

> ID：16030081
> 
> 赞同：130
> 
> 时间：2013-04-16T06:21:30.287
> 
> 标签：c++, c++11, unique-ptr

如何为具有`unique_ptr`成员变量的类实现复制构造函数？我只考虑 C++11。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-04-16T06:24:19.533

由于`unique_ptr`无法共享，您需要深度复制其内容或将其转换`unique_ptr`为`shared_ptr`.

```
class A
{
   std::unique_ptr< int > up_;

public:
   A( int i ) : up_( new int( i ) ) {}
   A( const A& a ) : up_( new int( *a.up_ ) ) {}
};

int main()
{
   A a( 42 );
   A b = a;
} 
```

正如 NPE 所提到的，您可以使用 move-ctor 而不是 copy-ctor，但这会导致类的不同语义。move-ctor 需要通过以下方式使成员显式可移动`std::move`：

```
A( A&& a ) : up_( std::move( a.up_ ) ) {} 
```

拥有一整套必要的运算符也会导致

```
A& operator=( const A& a )
{
   up_.reset( new int( *a.up_ ) );
   return *this,
}

A& operator=( A&& a )
{
   up_ = std::move( a.up_ );
   return *this,
} 
```

如果你想在 a 中使用你的类`std::vector`，你基本上必须决定向量是否应该是对象的唯一所有者，在这种情况下，使类可移动但不可复制就足够了。如果您省略了 copy-ctor 和 copy-assignment，编译器将指导您如何将 std::vector 与仅移动类型一起使用。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2017-04-06T18:47:28.890

在类中拥有 a 的通常情况`unique_ptr`是能够使用继承（否则普通对象通常也会这样做，请参阅 RAII）。对于这种情况，*到目前为止，该线程中没有适当的答案*。

**所以，这里是起点：**

```
struct Base
{
    //some stuff
};

struct Derived : public Base
{
    //some stuff
};

struct Foo
{
    std::unique_ptr<Base> ptr;  //points to Derived or some other derived class
}; 
```

...正如所说，目标是使`Foo`可复制的。

为此，需要对包含的指针进行*深度复制*，以确保正确复制派生类。

**这可以通过添加以下代码来完成：**

```
struct Base
{
    //some stuff

    auto clone() const { return std::unique_ptr<Base>(clone_impl()); }
protected:
    virtual Base* clone_impl() const = 0;
};

struct Derived : public Base
{
    //some stuff

protected:
    virtual Derived* clone_impl() const override { return new Derived(*this); };                                                 
};

struct Foo
{
    std::unique_ptr<Base> ptr;  //points to Derived or some other derived class

    //rule of five
    ~Foo() = default;
    Foo(Foo const& other) : ptr(other.ptr->clone()) {}
    Foo(Foo && other) = default;
    Foo& operator=(Foo const& other) { ptr = other.ptr->clone(); return *this; }
    Foo& operator=(Foo && other) = default;
}; 
```

这里基本上有两件事：

*   首先是添加复制和移动构造函数，它们在`Foo`复制构造函数`unique_ptr`被删除时被隐式删除。移动构造函数可以简单地通过`= default`... 添加，这只是为了让编译器知道不应删除通常的移动构造函数*（*这有效，因为`unique_ptr`已经有一个可以在这种情况下使用的移动构造函数）。

    对于 的复制构造函数`Foo`，没有类似的机制，因为没有 的复制构造函数`unique_ptr`。因此，必须构造一个 new `unique_ptr`，用原始指针的副本填充它，并将其用作复制类的成员。

*   如果涉及继承，必须小心地复制原始指针。原因是在上面的代码中进行简单的复制`std::unique_ptr<Base>(*ptr)`会导致切片，即只有对象的基本组件被复制，而派生部分丢失。

    为避免这种情况，必须通过克隆模式进行复制。这个想法是通过一个在基类`clone_impl()`中返回 a的虚函数来进行复制。`Base*`然而，在派生类中，它通过协变进行扩展以返回 a `Derived*`，并且这个指针指向派生类的新创建的副本。然后，基类可以通过基类指针访问这个新对象`Base*`，将其包装到 a中，并通过从外部调用`unique_ptr`的实际函数返回它。`clone()`

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-11-24T11:50:41.363

尝试使用此助手创建深层副本，并在源 unique_ptr 为空时应对。

```
 template< class T >
    std::unique_ptr<T> copy_unique(const std::unique_ptr<T>& source)
    {
        return source ? std::make_unique<T>(*source) : nullptr;
    } 
```

例如：

```
class My
{
    My( const My& rhs )
        : member( copy_unique(rhs.member) )
    {
    }

    // ... other methods

private:
    std::unique_ptr<SomeType> member;
}; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-16T06:32:34.063

Daniel Frey 提到了复制解决方案，我会谈谈如何移动 unique_ptr

```
#include <memory>
class A
{
  public:
    A() : a_(new int(33)) {}

    A(A &&data) : a_(std::move(data.a_))
    {
    }

    A& operator=(A &&data)
    {
      a_ = std::move(data.a_);
      return *this;
    }

  private:
    std::unique_ptr<int> a_;
}; 
```

它们被称为移动构造函数和移动赋值

你可以像这样使用它们

```
int main()
{
  A a;
  A b(std::move(a)); //this will call move constructor, transfer the resource of a to b

  A c;
  a = std::move(c); //this will call move assignment, transfer the resource of c to a

} 
```

您需要通过 std::move 包装 a 和 c 因为它们有一个名称 std::move 告诉编译器将值转换为右值引用，无论参数是什么在技术意义上，std::move 类似于“标准::右值"

移动后，unique_ptr的资源被转移到另一个unique_ptr

有许多主题记录了右值引用；[这是一个很容易开始的](http://www.cprogramming.com/c++11/rvalue-references-and-move-semantics-in-c++11.html)。

编辑 ：

移动的对象[应保持有效但未指定的状态](https://stackoverflow.com/questions/7930105/does-moving-leave-the-object-in-a-usable-state)。

C++ Primer 5, ch13 也很好地解释了如何“移动”对象

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-07-25T14:13:47.717

我建议使用 make_unique

```
class A
{
   std::unique_ptr< int > up_;

public:
   A( int i ) : up_(std::make_unique<int>(i)) {}
   A( const A& a ) : up_(std::make_unique<int>(*a.up_)) {};

int main()
{
   A a( 42 );
   A b = a;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-22T16:04:00.507

`unique_ptr`不可复制，只能移动。

这将直接影响测试，即在您的第二个示例中，它也只能移动而不能复制。

事实上，你使用`unique_ptr`它来保护你免受大错误是很好的。

例如，您的第一个代码的主要问题是指针永远不会被删除，这非常非常糟糕。说，您可以通过以下方式解决此问题：

```
class Test
{
    int* ptr; // writing this in one line is meh, not sure if even standard C++

    Test() : ptr(new int(10)) {}
    ~Test() {delete ptr;}
};

int main()
{       
     Test o;
     Test t = o;
} 
```

这也很糟糕。如果你复制会发生什么`Test`？将有两个类具有指向相同地址的指针。

当一个`Test`被销毁时，它也会销毁指针。当你的第二个`Test`被销毁时，它也会尝试删除指针后面的内存。但是它已经被删除了，我们会得到一些糟糕的内存访问运行时错误（或者如果我们不走运，会出现未定义的行为）。

所以，正确的做法是要么实现拷贝构造函数，要么实现拷贝赋值运算符，这样行为就清晰了，我们就可以创建一个拷贝了。

`unique_ptr`在我们这里遥遥领先。它具有语义：“**我是`unique`，所以你不能只是复制我。** ”因此，它可以防止我们现在实现手头的运算符的错误。

您可以为特殊行为定义复制构造函数和复制赋值运算符，并且您的代码将起作用。但是你，理所当然地（！），被迫这样做。

故事的寓意：总是`unique_ptr`在这种情况下使用。

# php - 使用 PDO 时的“注意：未定义变量：db”

> ID：16030084
> 
> 赞同：1
> 
> 时间：2013-04-16T06:22:12.507
> 
> 标签：php, mysql, function, pdo

在学习 PDO 的过程中，我编写了以下代码：

```
$sql = 'SELECT * FROM category ORDER BY order_cat DESC';
foreach ($db->query($sql) as $row)
{
    echo "<input type='radio' name='category' value='$row[id]'>$row[name]<br />";
} 
```

然后我将它封装成这样的函数：

```
function GetCategory()
{
    $sql = 'SELECT * FROM category ORDER BY order_cat DESC';
    foreach ($db->query($sql) as $row)
    {
        echo "<input type='radio' name='category' value='$row[id]'>$row[name]<br />";
    }
} 
```

我这样称呼它：

```
echo GetCategory(); 
```

但是，当我这样做时，会出现以下错误：

> **注意：**未定义变量：`db`
> **致命错误：**调用`query()`非对象上的成员函数

我不知道我错过了什么；我`$db`在我的配置文件中声明如下：

```
$db = new PDO("mysql:host=$localhost;dbname=$namedb;charset=utf8", $userdb, $passdb); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T06:25:35.977

您要么需要`$db`作为参数传递给`GetCategory`

```
function GetCategory($db) {
    ...
} 
```

或将其声明为全局变量：

```
function GetCategory($db) {
    global $db;
    ...
} 
```

参数通常是优选的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T06:23:53.693

该`$db`对象不存在于函数的上下文中。您应该将其作为附加参数传递给函数。

```
function GetCategory($db)
{
    $sql = 'SELECT * FROM category ORDER BY order_cat DESC';
    foreach ($db->query($sql) as $row)
    {
        echo "<input type='radio' name='category' value='$row[id]'>$row[name]<br />";
    }
} 
```

并阅读[变量范围](http://php.net/manual/en/language.variables.scope.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T06:24:49.347

在函数内部时使 $db 成为全局变量。

```
function GetCategory()
{
global $db;
...
} 
```

如果它之前已经定义过，当然......

# c - 编写函数以输出分数的直方图

> ID：16030087
> 
> 赞同：-2
> 
> 时间：2013-04-16T06:22:17.837
> 
> 标签：c, file, structure, histogram

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>
    #define FILE_NAME 20
    #define LIST_SIZE 50

    typedef struct
    {
    char *name;
    int score;
    }RECORD;

    float calMean(RECORD list[], int count);
    void sortData(RECORD list[], int count);
    float calMedian(RECORD list[], int size);
    int calMode(RECORD list[], int count);
    int main (void)
{
       // Declarations
         float mean;
         float median;
         int mode;
         FILE *fp;
           char fileName[FILE_NAME];
           RECORD list[LIST_SIZE];
           char buffer[100];
           int count = 0;
           int i;
       // Statements
           printf("Enter the file name: ");
           gets(fileName);
           fp = fopen(fileName, "r");
           if(fp == NULL)
           printf("Error cannot open the file!\n");
           while(fgets(buffer, 100, fp) != NULL)
           {
             if( count >= LIST_SIZE)
             {
                printf("Only the first 50 data will be read!\n");
                 break;
             }
             if( count < LIST_SIZE)
            {
                list[count].name = (char*) malloc(strlen(buffer)*sizeof(char));
                   sscanf(buffer,"%[^,], %d", list[count].name, &list[count].score);
                  printf("name is %s and score is %d\n", list[count].name, list[count].score);
                  count++;
            }
                for( i =0; i < (LIST_SIZE - count); i++)
            {
                list[count + i].name = 0;
                list[count + i].score = 0;
            }
         }
           printf("Read in %d data records\n", count);
           mean = calMean(list, count);
         sortData(list, count);
         mode = calMode(list, count);
           printf("%2.2f\n", mean);
           fclose(fp);
           return 0;
}

float calMean(RECORD list[], int count)
{
       float tempMean;
        int sum = 0;
        int i;
        for(i = 0; i < count; i++)
        sum += list[i].score;
        tempMean = (float) sum/count;
        return tempMean;
}

void sortData(RECORD list[], int count)
{
    int temp;
    int current;
    int walker;
    float median;
    int size = count;
    for(current = 0; current  < count; current++)
    {
       for( walker = count-1; walker > current; walker--)
          if(list[walker].score < list[walker -1].score)
          {
             temp = list[walker].score;
             list[walker].score = list[walker -1].score;
             list[walker -1].score = temp;
          }
          printf("%d\n", list[current].score);
    }
    median = calMedian(list, size);
    printf("%2.2f\n", median);
    return;
}

float calMedian(RECORD list[], int size)
{
    float tempMedian;
    printf("size is: %d\n", size);
    if ( size % 2 == 0) 
       tempMedian = (float) ((list[size/2].score + list[size/2-1].score)/2.0) ;                   
       else                                                    
         tempMedian = (float) list[size/2 - 1].score; 
return tempMedian;
}

int calMode(RECORD list[], int count)
{
    int tempMode = 1;
    int i, j;

    for(i=0;i<10;i++)
    {
       list[list[i].score].score++;
    }
    for(i = 0; i < count; i++)
    {
       printf("\n%d:",list[i].score);
       for(j = 0; j < list[i].score; j++)
       {
          printf("*");
       }
    }
    printf("\n\n");
    return tempMode;
} 
```

嗨，我正在尝试编写一个直方图，列出所有分数和出现频率，然后使用直方图查找所有分数的模式，它们都在 calMode 函数中。

上面的代码是我写这个直方图的尝试，但它不正确

我得到了这个输出：

```
 Enter the file name: in.txt
    name is Ada Lovelace and score is 66
    name is Linus Torvalds and score is 75
    name is Peter Norton and score is 82
    name is Ken Thompson and score is 82
    name is Steve Wozniak and score is 79
    name is Marc Andreessen and score is 60
    name is Donald Knuth and score is 60
    name is Adele Goldberg and score is 71
    name is Grace Hopper and score is 82
    name is Bill Joy and score is 91
    name is Andrew Tanenbaum and score is 71
    name is Brian Kernighan and score is 72
    Read in 12 data records
    60
    60
    66
    71
    71
    72
    75
    79
    82
    82
    82
    91
    size is: 12
    73.50

    60:************************************************************
    60:************************************************************
    66:******************************************************************
    71:***********************************************************************
    71:***********************************************************************
    72:************************************************************************
    75:***************************************************************************
    79:*****************************************************************************
    **
     82:*****************************************************************************
*****
    82:*****************************************************************************
*****
    82:*****************************************************************************
*****
    91:*****************************************************************************
**************

74.25 
```

对这个直方图函数的算法有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:40:23.413

您的代码正在编写正确数量的星号，但您运行此代码的控制台窗口不够宽，无法在不换行的情况下显示该数量的星号。您可以更改控制台窗口的宽度。我不确定您正在运行哪个操作系统，因此我无法指导您完成更改控制台窗口宽度的过程。

不过，更改比例是一个简单的选择。只需更改您的循环，使其以分数除以任何比例结束。例如，如果您希望一个星号代表两个：

```
 for(j = 0; j < list[i].score / 2; j++)
   {
      putchar('*');
   } 
```

现在您遇到的问题是两个的余数未显示在直方图中。也许您可以更改输出`':'`比例以表示两个，以及`'.'`任何余数：

```
 for(j = 0; j < list[i].score / 2; j++)
   {
      putchar(':');
   }

   if (list[i].score % 2 == 1) {
      putchar('.');
   } 
```

# jquery - 在 GWT jsni 中使用 jquery

> ID：16030089
> 
> 赞同：11
> 
> 时间：2013-04-16T06:22:26.640
> 
> 标签：jquery, gwt, jsni, gwtquery

我无法使用

```
$("#"+profileId).offset().top 
```

从我的 gwt jsni 函数内部。我试过这个

```
$wnd.$("#"+profileId).offset().top 
```

但这也行不通。我觉得我在这里缺少语法。有人可以帮忙吗

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-16T07:05:23.773

这个问题的三个解决方案：

1-您的 Jsni 代码看起来不错，除了您必须将其包含在相应的本机函数中并返回一个双精度数（或任何其他数字类型，如果您希望 gwt 进行强制转换）。

```
 native double getTop(String profileId) /*-{
   return $wnd.$("#" + profileId).offset().top;
 }-*/; 
```

如果您想通过您的代码查看错误，您`UncaughExceptionHandler`应该将代码包装在一个`$entry`块中

```
native  double getTop(String profileId) /*-{
  return $entry(function(data) {
    return $wnd.$("#" + profileId).offset().top;
  });
}-*/; 
```

2- 但是，我鼓励您使用[gwt-query](http://code.google.com/p/gwtquery/) aka gQuery，而不是使用 jQuery。因此，您不必在 .html 中加载 jQuery，也无需在应用程序中处理 jsni。

使用 gQquery，你有几乎相同的 jQuery 语法，但在 java 中，所以你有类型安全、重构、测试......而且，你将有几十个实用程序（最简单的 ajax、promise、选择器等），它们不在gwt 核心。

gQuery 是一个轻量级库，在 gwt 中从头开始完全重写。它不是 jQuery 库的包装器（就像在另一个答案中错误地说的那样），您不必在页面中包含 jquery.js。

与任何其他 gwt 库一样，gwt 编译器将摆脱 gquery 中不使用的任何内容。在您的方法中，您的应用程序必须加载所有 jquery 内容。

因此，在您的情况下，并使用 gquery 在您的 .java 类中编写此代码：

```
import static com.google.gwt.query.client.GQuery.*;
... onModuleLoad() {
   int top = $("#"+profileId).offset().top;
} 
```

3- 最后，如果您知道元素的 id，您可以选择使用纯 gwt 代码来获取元素的偏移量：

```
int top = DOM.getElementById(profileId).getOffsetTop(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-13T20:26:31.603

一个简单的方法是使用谦虚的 eval。

```
public static native void eval(String toEval)/*-{
   return $wnd.eval(toEval);     
 }-*/; 
```

然后只需使用您的脚本

```
eval("$('#'" + profileId + ").offset().top" ); 
```

并且因为在您的 GWT 代码中被调用，您可以将其视为安全代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T06:33:26.240

我假设您在主机页面中添加了**jquery 库**。

正确的语法是

```
private native int myJquery() /*-{
    $wnd.$(function() {           //may be you forgot this line
   return   $wnd.$("#"+profileId).offset().top;
    });
}-*/; 
```

假设您刚刚开始在`GWT`.

我强烈建议轻量级第三方库

[**GWT查询**](http://code.google.com/p/gwtquery/)

# c# - C#如何在画布上创建一个标签onClick

> ID：16030090
> 
> 赞同：0
> 
> 时间：2013-04-16T06:22:40.167
> 
> 标签：c#, wpf, drawing, label

我正在寻找的是用户 1\. 单击画布 2\. 出现一个新标签，用户可以输入文本。3\. 当用户点击别处或回车时，标签完成编辑。

这是我目前所拥有的......

```
 private void DrawingCanvas_MouseLeftButtonUp(object sender, MouseButtonEventArgs e) {
        var canvas = (Canvas)sender;
        var point = e.GetPosition(canvas);
        Label lbl = new Label();
        lbl.Content = "start typing";
        //lbl.Left = location.X;
        //lbl.Top = location.Y;
        //lbl.Focus = Boolean.TrueString;
        canvas.Children.Add(lbl);
} 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:46:46.020

像这样试试

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Canvas x:Name="cnvs" PreviewMouseLeftButtonUp="cnvs_MouseLeftButtonUp"  Background="Transparent"></Canvas> 
```

```
 private void cnvs_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        var canvas = (Canvas)sender;
        var point = e.GetPosition(canvas);
        TextBox txtBox = new TextBox() {Width=80,AcceptsReturn=false };
        canvas.Children.Add(txtBox);
        Canvas.SetLeft(txtBox, point.X);
        Canvas.SetTop(txtBox, point.Y);
        txtBox.Focus();
    } 
```

我希望这将有所帮助。

**更新**：

```
var canvas = (Canvas)sender;
        var point = e.GetPosition(canvas);
        TextBox txtBox = new TextBox() {AcceptsReturn=false ,BorderThickness=new Thickness(0)};
        Binding b = new Binding("Text") { RelativeSource = new RelativeSource(RelativeSourceMode.Self) };
        txtBox.SetBinding(TextBox.WidthProperty, b);
        canvas.Children.Add(txtBox);
        Canvas.SetLeft(txtBox, point.X);
        Canvas.SetTop(txtBox, point.Y);
        txtBox.Focus(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:10:01.010

尝试将文本框宽度设置为 Double.NaN。这将为您提供“自动”宽度。要摆脱边框，请将文本框的边框厚度设置为 0。见下文：

```
 private void cnvs_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        var canvas = (Canvas)sender;
        var point = e.GetPosition(canvas);
        var txtBox = new TextBox() { Width=Double.NaN, AcceptsReturn=false }; // auto width
        txtBox.BorderThickness = new Thickness(0); // no border
        canvas.Children.Add(txtBox);
        Canvas.SetLeft(txtBox, point.X);
        Canvas.SetTop(txtBox, point.Y);
        txtBox.Focus();
    } 
```

# sockets - TCP 传输持续时间

> ID：16030091
> 
> 赞同：1
> 
> 时间：2013-04-16T06:22:45.880
> 
> 标签：sockets, tcp

我有两个应用程序通过 TCP 套接字进行通信。第一个接收，第二个发送。

```
First app:
start=clock();
recv();
end=clock(); 
```

当我运行应用程序时，（结束-开始）是 150-200 毫秒。（总是）

第二个应用：

```
while (!stop) {
    start=clock();
    prepare_message();
    send();
    end=clock();
} 
```

当我运行应用程序时，（结束-开始）为 0.00 毫秒。（总是）

消息负载接近 200-300 字节，ping 持续时间 <1ms。那么，为什么接收方等待 200ms 而发送方不等待呢？那么我该如何描述 200 毫秒呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:30:08.093

发送者在消息准备就绪时发送消息。接收者必须等待消息，这就是额外时间的来源。您如何确保在发送消息后调用 recv() ？如果你不这样做，那么 recv() 很可能正在等待输入，而发送者还没有到达这部分代码。

另一件事是，根据您使用的方法，发送方仅将消息保存在缓冲区中，因为 TCP 可以等待更多数据将其合并到一个包中。您应该使用[TCP_NODELAY](http://www.gsp.com/cgi-bin/man.cgi?topic=tcp)选项来避免这种情况。

# ios - iOS应用程序中的排序数组问题

> ID：16030104
> 
> 赞同：1
> 
> 时间：2013-04-16T06:23:42.037
> 
> 标签：ios, arrays, sorting

我有一个像这样的数组：

> ( "8461.86","8468.22","8468.22","8162.59","8164.50","7280.59" )

我尝试按以下顺序对这个数组进行排序：

```
sortedArray = [arr_distance sortedArrayUsingComparator:^(id firstObject, id secondObject) {
    return [((NSString *)firstObject) compare:((NSString *)secondObject) options:NSNumericSearch];
}]; 
```

但我得到了以下数组：

> ( "7280.59","8162.59","8164.50","8461.86","8468.22","8468.22" )

为什么会这样？

我也尝试喜欢

```
return [firstObject compare:secondObject options:NSNumericSearch]; 
```

但没有得到正确的排序数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T06:31:53.103

```
NSSortDescriptor *desc = [[NSSortDescriptor alloc]initWithKey:@"" ascending:NO];
NSMutableArray *yourTempArray = [[NSMutableArray alloc]initWithObjects:@"8459.93",@"8466.28",@"8466.28",@"8160.70",@"8162.61",@"7278.56", nil];
[yourTempArray sortUsingDescriptors:[NSArray arrayWithObject:desc]];
NSLog(@"sotedAr == %@",yourTempArray); 
```

**输出：**

```
sotedAr == (
"8466.28",
"8466.28",
"8459.93",
"8162.61",
"8160.70",
"7278.56" 
```

)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T06:36:36.540

要按**降序**排序，您只需在代码中切换 firstObject 和 secondObject：

```
sortedArray = [arr_distance sortedArrayUsingComparator:^(id firstObject, id secondObject) {
  return [((NSString *)secondObject) compare:((NSString *)firstObject) options:NSNumericSearch];
}]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T06:29:01.207

下面的代码可能对按降序对数组进行排序很有用

```
NSArray *arr = [NSArray arrayWithObjects:@"8459.93",@"8466.28",@"8466.28",@"8160.70",@"8162.61",@"7278.56", nil];
NSMutableArray *yourTempArray = [[NSMutableArray alloc]init];
[yourTempArray addObjectsFromArray:arr];
NSLog(@"before sorting = %@",yourTempArray);
NSSortDescriptor* sort = [NSSortDescriptor sortDescriptorWithKey: @"self" ascending: NO];

[yourTempArray sortUsingDescriptors:[NSArray arrayWithObject:sort]];
NSLog(@"After sorting = %@",yourTempArray); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T06:41:23.353

尝试以下代码： -

```
NSSortDescriptor *frequencyDescriptor = [NSSortDescriptor sortDescriptorWithKey:@""
                                                               ascending:NO
                                                              comparator:^(id obj1, id obj2) {
                                                                  return [obj1 compare:obj2 options:NSNumericSearch];
                                                              }];
NSEnumerator * enumerator = [arr_distance objectEnumerator];
NSArray * descriptors = [NSArray arrayWithObjects:frequencyDescriptor, nil];
NSArray * sortedArray =   [arr_distance sortedArrayUsingDescriptors:descriptors];
enumerator = [sortedArray objectEnumerator];
NSLog(@"sortedArray = %@",sortedArray); 
```

// 使用 sortedArray 进行排序

# css - 全宽 HTML5 视频问题

> ID：16030112
> 
> 赞同：0
> 
> 时间：2013-04-16T06:24:09.177
> 
> 标签：css, html, video, width

我正在寻找一种制作全宽（但不是全高）HTML5 视频的方法。

类似于图像的背景覆盖 CSS 可以让我做的事情。

例子：

[http://photohack.rs.af.cm](http://photohack.rs.af.cm)

标题下方的图像栏将替换为全宽视频背景。

宽度 100% 和设置高度不起作用，因为视频是自动缩放的，而不是全宽。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T15:32:50.643

在大多数情况下，它是一个简单的修复。

```
video {
   max-width: 640px /* cannot exceed this width */
   max-height: 390px /* cannot exceed this height */
   width: 100% /* 640px or less depending on size of viewport */
   height: auto /* automatically calculates height from via above values */
} 
```

总是！在处理全宽视频、响应式设计和移动设备时，请始终使用百分比。唯一可以使用像素是在定义`max-height`和`max-width`属性时。

# iphone - 将对象添加到核心数据太慢

> ID：16030117
> 
> 赞同：0
> 
> 时间：2013-04-16T06:24:17.720
> 
> 标签：iphone, core-data

每次，当我保存我`NSManagedObjectContext`的，它需要**10 秒**或更多。

**这是我的代码：**

```
dispatch_queue_t requestQueue =  dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0);
        dispatch_async(requestQueue, ^{
        NSManagedObjectContext *manageContext = [[NSManagedObjectContext alloc]init];
        [manageContext setPersistentStoreCoordinator:[[OKCoreManager sharedManager] persistentStoreCoordinator]];
        Card *cardObject = (Card *)[NSEntityDescription insertNewObjectForEntityForName:@"Card" inManagedObjectContext:manageContext];
        cardObject.name = self.name;
        cardObject.title = self.title;
        cardObject.email = self.email;
        cardObject.address = self.address;
        cardObject.stacks = self.stackObject;
        cardObject.contact =self.contact;
        NSError *error;
        if (![[OKCoreManager sharedManager]saveManagedObjectContext:manageContext])
        {
             NSLog(@"Problem saving: %@", [error localizedDescription]);
             dispatch_sync(requestQueue, ^{
                     iCallBack(FALSE,selfObject);
             });
        }
        else
        {
             dispatch_sync(requestQueue, ^{
                      iCallBack(TRUE,selfObject);
             });
        }
        manageContext = nil;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:49:32.450

自己整理了一下：

```
dispatch_queue_t requestQueue =  dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0);
    dispatch_async(requestQueue, ^{

        NSManagedObjectContext *manageContext = [[NSManagedObjectContext alloc]init];

        [manageContext setPersistentStoreCoordinator:[[OKCoreManager sharedManager] persistentStoreCoordinator]];

         Card *cardObject = (Card *)[NSEntityDescription insertNewObjectForEntityForName:@"Card" inManagedObjectContext:manageContext];

        cardObject.name = self.name;
        cardObject.title = self.title;
        cardObject.email = self.email;
        cardObject.address = self.address;
        cardObject.stacks = self.stackObject;
        cardObject.contact =self.contact;

    BOOL value = [[OKCoreManager sharedManager]saveManagedObjectContext:manageContext];
    dispatch_sync(dispatch_get_main_queue(), ^{
                iCallBack(value);
            });
            manageContext = nil;

    }); 
```

# gcc - 如何以编程方式编辑二进制文件（x86）？

> ID：16030124
> 
> 赞同：3
> 
> 时间：2013-04-16T06:24:29.767
> 
> 标签：gcc, assembly, compiler-construction, x86, disassembly

我正在开发一个程序来进行编译后优化。因为我注意到有一些特殊情况 gcc 不能很好地优化，即使在 -O3 时也是如此。

是否有一个库可以让我将二进制文件（x86）加载到一些适合编辑的数据结构中，然后再写出来？我还希望它处理更新所有内存偏移量，因为编辑可能会改变二进制文件的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:34:20.040

我假设您正在查看 ELF 可执行格式。如果您更多地考虑 PE 或 Mach-O，请说出来。

实际上，您可以找到几个库或工具来编辑 ELF 格式并对其进行修改。除其他外，以下是此类工具的一小部分：

*   [自尊](http://hg.secdev.org/elfesteem/)
*   [埃雷西](http://www.eresi-project.org/)
*   [补丁精灵](http://nixos.org/patchelf.html)

# php - 查看 paypal API - 什么是 cURL？

> ID：16030126
> 
> 赞同：0
> 
> 时间：2013-04-16T06:24:38.063
> 
> 标签：php, curl, paypal

我一直在看几个利用 paypal 的 API 来开发一个简单的脚本以便能够使用它来结帐的例子，并且在每个例子中我都在运行 cURL，我真的一点也不明白。只是库中的不同 PHP 函数，还是完全不同的东西？更重要的是，我可以将 cURL 命令复制并粘贴到我的文档中并且它会工作，还是我需要下载一些东西才能让它在我的本地服务器和我的实时站点所在的共享托管服务器上工作？最后，我在哪里可以学习这个？我做了一些搜索，但没有找到任何可靠的材料。我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:28:42.950

**PHP手册中对cURL示例的基本理解**

```
<?php

$ch = curl_init("http://www.example.com/");
$fp = fopen("example_homepage.txt", "w");

curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);

curl_exec($ch);
curl_close($ch);
fclose($fp);
?> 
```

[PHP 手册](http://php.net/manual/en/curl.examples-basic.php)

**带有 PayPal API 的 cURL。[在网上找到的]**

```
<?php

$ch = curl_init();
$clientId = "myId";
$secret = "mySecret";

curl_setopt($ch, CURLOPT_URL, "https://api.sandbox.paypal.com/v1/oauth2/token");
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
curl_setopt($ch, CURLOPT_USERPWD, $clientId.":".$secret);
curl_setopt($ch, CURLOPT_POSTFIELDS, "grant_type=client_credentials");

$result = curl_exec($ch);

if(empty($result))die("Error: No response.");
else
{
    $json = json_decode($result);
    print_r($json->access_token);
}

curl_close($ch);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:30:30.587

您可以使用简单的表格进行结帐。要通过 cURL 使用，您需要启用 cURL 并在 PHP 代码中使用它。

以下是简单的方法。

```
<form action="https://paypal.com/cgi-bin/webscr" method="post">  
    <input type="hidden" name="business" value="sandy_1314264698_biz@gmail.com ">  
    <input type="hidden" name="cmd" value="_xclick-subscriptions">  
    <input type="hidden" name="item_name" value="sand bag">  
    <input type="hidden" name="item_number" value="1234">  
    <input type="hidden" name="currency_code" value="USD">  
    <input type="hidden" name="notify_url" value="http://abc.com/xyz.php">
    <input type="hidden" name="return" value="http://google.com">

    <!-- Display the payment button. --> 

<input type="image" name="submit" border="0" src="btn_subscribe_LG.gif" alt="PayPal - The safer, easier way to pay online">  
<img alt="" border="0" width="1" height="1" src="https://www.paypal.com/en_US/i/scr/pixel.gif" > 
```

# java - apache thrift 与 Spring 框架的集成

> ID：16030128
> 
> 赞同：2
> 
> 时间：2013-04-16T06:24:50.767
> 
> 标签：java, spring, thrift

我希望在我的网络服务调用中使用节俭。从到目前为止我从 thrift 文档中阅读的内容来看，我必须编写一个 thrift 文件，其中包含我想要公开的 POJO 和服务。然后需要使用 thrift 编译器编译该文件以生成 Java 类。然后必须使用这些来编写客户端和服务器。

有没有更简单的方法来实现这一点（任何基于注释或 Spring 框架集成可用）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-09T16:04:30.023

我写了一篇关于 Spring Boot 和 Thrift 集成的文章，详细解释了如何将它们组合在一起 :) 你可以在这里找到我的文章：

[Java.DZone：使用 Spring Boot 和 Apache Thrift 构建微服务。](http://java.dzone.com/articles/building-microservices-spring)

通常，您应该像这样创建 Servlet bean：

```
@Bean
public TProtocolFactory tProtocolFactory() {
    return new TBinaryProtocol.Factory();
}

@Bean
public Servlet calculator(TProtocolFactory protocolFactory, CalculatorServiceHandler handler) {
    return new TServlet(new TCalculatorService.Processor<CalculatorServiceHandler>(handler), protocolFactory);
} 
```

其中 TCalculatorService 是您的 Thrift 服务

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T15:33:37.070

不，spring 和 thrift 之间没有自定义绑定。创建`.thrift`文件后，您将生成构成 Thrift 通信层的 Java 类。

例如，我创建了一个 Java 服务器，它通过 hibernate（这是一层）调用 SQL，并通过 thrift（另一层）返回数据。不幸的是，必须有一些 Java 代码来处理将抽象数据从一层移动到另一层的过程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-28T13:35:41.897

您可以使用此项目在 SpringBoot 和 Apache Thrift [https://github.com/aatarasoff/spring-thrift-starter](https://github.com/aatarasoff/spring-thrift-starter)之间进行集成。

正如自述文件中所述，您只需连接启动器并创建处理程序，就像您使用 @RestController 一样：

```
@ThriftHandler("/api")
public class TGreetingServiceHandler implements TGreetingService.Iface {

    @Override
    public String greet(TName name) throws TException {
        // your logic
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-17T16:23:10.310

以下项目似乎正在处理它 [https://github.com/joshlong/spring-advanced-marhshallers-and-service-exporters/](https://github.com/joshlong/spring-advanced-marhshallers-and-service-exporters/)

# c++ - RTBkit TypeError：无法连接“str”和“NoneType”对象

> ID：16030129
> 
> 赞同：0
> 
> 时间：2013-04-16T06:24:52.330
> 
> 标签：c++, ubuntu-12.04, zeromq, apache-zookeeper, rtbkit

我正在尝试从具有 4GB RAM 的 Ubuntu 12.04lts 运行 RTBKit。

我正在按照[**这里的步骤**](https://github.com/rtbkit/rtbkit-preview/wiki/Getting%20Started)

我能够在**sudo make -k all**之前执行步骤。

但是当我执行命令**sudo make -k all**时，一段时间后它给出了错误 -

```
scons: Reading SConscript files ...
TypeError: cannot concatenate 'str' and 'NoneType' objects:
  File "/home/eywa/platform-deps/mongo-cxx-driver/SConstruct", line 71:
    env.Append(CCFLAGS=["-L" + os.getenv("LD_LIBRARY_PATH"),
make: *** [install_mongodb_cxx_driver] Error 2
make: Target `all' not remade because of errors. 
```

我对 RTBkit，Zookeeper 很陌生。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T17:11:55.843

聚会有点晚了，但看起来你缺少环境变量。具体来说，似乎`LD_LIBRARY_PATH`没有设置，因此采购您的[.profile](https://github.com/rtbkit/rtbkit/wiki/Getting-Started#environment-variables)应该可以解决您的问题。您可以使用以下`env | grep 'LD_LIBRARY_PATH'`应该具有`~/local/lib`路径的命令进行验证。

# mysql - 这可以在一个查询中：SELECT x as y1 WHERE y = 1 和 SELECT x as y2 WHERE y = 2？

> ID：16030136
> 
> 赞同：3
> 
> 时间：2013-04-16T06:25:32.303
> 
> 标签：mysql, sql, pivot

给定一张像

```
id   x     y
--  ---   ---
5   200    1
5   3000   2
5   224    3
6   135    1
6   2222   2
6   16     3 
```

我可以得到y = 1的所有x值

```
SELECT x as y1 
WHERE y = 1 
```

我可以得到y = 2的所有x值

```
SELECT x as y2 
WHERE y = 2 
```

但我想在一个查询中选择这些，所以我得到类似的结果

```
id   y1    y2
--  ---   ---
5   200    3000
6   135    2222 
```

这可以在一个查询中完成吗？

我已经尝试了几乎所有我能想到的变化，但所有错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T06:27:42.843

MySQL 没有`PIVOT`像`SQL Server`. 但是您仍然可以使用它来模拟它`MAX()`并`CASE()`连续测试它的值。

```
SELECT  ID,
        MAX(CASE WHEN y = 1 THEN x END) y1,
        MAX(CASE WHEN y = 2 THEN x END) y2
FROM    TableName
GROUP   BY ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b627f/1)

输出

```
╔════╦═════╦══════╗
║ ID ║ Y1  ║  Y2  ║
╠════╬═════╬══════╣
║  5 ║ 200 ║ 3000 ║
║  6 ║ 135 ║ 2222 ║
╚════╩═════╩══════╝ 
```

# c# - 休眠两个事务读取同一张表并插入同一张表使一个事务失败

> ID：16030138
> 
> 赞同：0
> 
> 时间：2013-04-16T06:25:36.587
> 
> 标签：c#, sql-server-2008, nhibernate

用户表结构 Id 用户名（唯一约束）

我有这样的 Nhibernate 和 SqlServer 问题。有两个并发事务试图在用户表中插入数据。两个事务都查询表中的数据以检查要插入的新用户名是否未出现在表中。问题是，让我们说。Transaction1和Transaction2读取User Table，发现User Table中没有用户名embarus。然后 Transaction2 尝试在 User 表中插入 embarus，而 Transaction1 已插入并已在表中提交 embarus。

因此 Transaction2 获得唯一约束的异常。

请帮助我解决这个问题，任何可能有用的想法或文章。

我发现 SqlServer 2008 使用 ReadCommitted 作为默认事务隔离级别。

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:33:08.493

您需要捕获并处理唯一约束违规。最好的方法是创建一个 ISqlExceptionConverter 实现来将 RDBMS 特定异常转换为应用程序中的自定义异常。

```
public class SqlServerExceptionConverter : ISQLExceptionConverter
{
    public Exception Convert(AdoExceptionContextInfo adoExceptionContextInfo)
    {
        var sqlException = adoExceptionContextInfo.SqlException as SqlException;
        if (sqlException != null)
        {
            // 2601 is unique key, 2627 is unique index; same thing: 
            // http://blog.sqlauthority.com/2007/04/26/sql-server-difference-between-unique-index-vs-unique-constraint/
            if (sqlException.Number == 2601 || sqlException.Number == 2627)
            {
                return new UniqueKeyException(sqlException.Message, sqlException);
            }
        }
        return adoExceptionContextInfo.SqlException;
    }
}

public class UniqueKeyException : Exception
{
    public UniqueKeyException(string message, Exception innerException)
        : base(message, innerException)
    { }
} 
```

用法：

```
 using (var txn = _session.BeginTransaction())
            {
                try
                {
                    var user= new User
                        {
                            Name = "embarus"
                        };
                    _session.Save(user);
                    txn.Commit();
                }
                catch (UniqueKeyException)
                {
                    txn.Rollback();
                    var msg = string.Format("A user named '{0}' already exists, please enter a different name or cancel.", "embarus");
                    // Do something useful
                }
                catch (Exception ex)
                {
                    if (txn.IsActive)
                    {
                        txn.Rollback();
                    }
                    throw;
                }
            } 
```

请注意，您不应在异常发生后重用会话。

# python - 图像未显示在 django 管理站点中

> ID：16030139
> 
> 赞同：0
> 
> 时间：2013-04-16T06:25:40.533
> 
> 标签：python, django

我有这个模型：

```
projectDirPath = path.dirname(path.dirname(__file__)) 
storeImageDir = FileSystemStorage(location=projectDirPath + '/couponRestApiApp/stores')

class stores(models.Model):
    """ This is the store model """
    storeName = models.CharField(max_length=15)                                          # Store Name
    storeDescription = models.TextField()                                                # Store Description
    storeURL = models.URLField()                                                         # Store URL
    storePopularityNumber = models.IntegerField(max_length=1)                            # Store Popularity Number  
    storeImage = models.ImageField(upload_to="images",storage=storeImageDir)            # Store Image 
    storeSlug = models.CharField(max_length=400)                                         # This is the text you see in the URL
    createdAt = models.DateTimeField(auto_now_add=True)                                  # Time at which store is created
    updatedAt = models.DateTimeField(auto_now=True)                                      # Time at which store is updated
    storeTags = models.ManyToManyField(tags)                                             # All the tags associated with the store

    def __unicode__(self):
        return unicode(self.storeName)

    def StoreTags(self):
        return '\n'.join([s.tag for s in self.storeTags.all()])
    def StoreImage(self):    
        return '<img src="%s" height="150"/>' % (self.storeImage)
    StoreImage.allow_tags = True 
```

但是管理页面上没有加载图像，图像 URL 是：`http://localhost:8000/admin/couponRestApiApp/stores/static/mcDonalds.jpg/`

正在显示，但正确的路径应该是：`/home/vaibhav/TRAC/coupon-rest-api/couponRestApi/couponRestApiApp/stores/static/mcDonalds.jpg/`

图像必须存储在哪里，以便它们显示在 Django 管理页面上

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T06:43:36.643

正确定义`MEDIA_ROOT`和`MEDIA_URL`在您的设置中。

### 设置.py

```
import os
CURRENT_PATH = os.path.abspath(os.path.dirname(__file__).decode('utf-8'))

MEDIA_ROOT = os.path.join(CURRENT_PATH, 'media').replace('\\','/')

MEDIA_URL = '/media/' 
```

### 模型.py

```
storeImage = models.ImageField(upload_to="images") 
```

### 网址.py

```
from django.conf import settings
urlpatterns += patterns('',
    url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT, 'show_indexes': False}),
) 
```

尝试使用上面的代码。

* * *

回答评论中提出的问题：

's' 被添加到模型名称中，因为会有多个模型实例。要摆脱它，`verbose_name`请为模型定义。

```
class stores(models.Model):
    .....
    storeName = models.CharField(max_length=15) 
    .....

    class Meta:
        verbose_name        = 'Store'
        verbose_name_plural = 'Stores' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-20T03:45:09.750

根据 Django 文档，对于 Django 1.11 及更高版本，您需要重写：

**网址.py**

```
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-17T17:13:09.117

在您的 HTML 代码中调用全局 url，例如 {{name.store.url}} 它应该在您的 HTML 代码上完成

# android - 如何从android中的时间选择器中获取时间？

> ID：16030142
> 
> 赞同：0
> 
> 时间：2013-04-16T06:25:53.773
> 
> 标签：android

我正在为我的应用程序创建一个调度程序，我想从时间选择器中设置时间。我面临的问题是我正在获取日期时间。这里是代码，请建议如何执行此操作。

```
TimePickerDialog.OnTimeSetListener t = new TimePickerDialog.OnTimeSetListener() {
public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
    //etTime.setText(fmtTime.format(myCalendar.getTime()));
    Calendar calNow = Calendar.getInstance();
    Calendar calSet = (Calendar) calNow.clone();

    /*calSet.set(Calendar.HOUR_OF_DAY, hourOfDay);
    calSet.set(Calendar.MINUTE, minute);
    calSet.set(Calendar.SECOND, 0);
    calSet.set(Calendar.MILLISECOND, 0);*/

    if(calSet.compareTo(calNow) <= 0){
        //Today Set time passed, count to tomorrow
        calSet.add(Calendar.DATE, 1);
    }

    setAlarm(calSet);

 }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:34:42.713

你可以这样设置时间..

```
 TimePickerDialog.OnTimeSetListener t = new TimePickerDialog.OnTimeSetListener() {
public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
    textview.settext("Time:"+hourOfDay+":"+minute);

 }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:29:56.260

//int hourOfDay conatins hours of day and int minute 将包含分钟。使用此变量设置时间。

public void onTimeSet(TimePicker view, int hourOfDay, int minute)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T06:34:44.793

尝试这个..

```
String s;
Format formatter;
Calendar calendar = Calendar.getInstance();
calendar.set(Calendar.HOUR_OF_DAY, tp.getCurrentHour());
calendar.set(Calendar.MINUTE, tp.setCurrentMinutes());
formatter = new SimpleDateFormat("hh:mm:ss");
s = formatter.format(calendar.getTime()); 
```

# pointers - 错误：请求成员“机器”不是结构或联合

> ID：16030143
> 
> 赞同：0
> 
> 时间：2013-04-16T06:26:01.723
> 
> 标签：pointers, struct

当我试图编译下面的程序时，我收到错误，因为请求成员“机器”不是结构或联合

```
struct machine
{
    int a;
    int b;
    int c;
};
struct config
{
    struct machine *machine;
    int n;
};
int main()
{
    struct config *conf;
    struct machine *mach;

    mach->a=1;
    mach->b=2;
    mach->c=3;

    conf.machine=mach; /* error in this line */  

return 0;
} 
```

谁能帮我修复这个错误..提前谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:29:54.860

`conf`是一个指针，而不是一个结构，所以你必须取消引用它，就像你对`mach`.

```
conf->machine = mach; 
```

此外，您需要为`conf`和分配内存`mach`。

# jquery - 循环内容轮播删除循环

> ID：16030144
> 
> 赞同：0
> 
> 时间：2013-04-16T06:26:03.543
> 
> 标签：jquery, circular-content-carousel

关于[CIRCULAR CONTENT CAROUSEL WITH JQUERY](http://tympanus.net/codrops/2011/08/16/circular-content-carousel/) by tympanus 的问题

我正在将它实现到一个 Web 项目中，到目前为止它运行良好，但需要它停止循环/左右克隆并在到达最后一个孩子或第一个孩子时停止滚动。基本上是消除无限循环/循环效果。

我认为这是要改变的部分，但太糟糕了，我无法理解逻辑，

请帮忙！

抱歉英语不好，我来自马来西亚

```
// 克隆右边/左边的元素，并根据 dir 和滚动追加/添加它们
                如果（目录=== 1）{
                    $wrapper.find('div.ca-item:lt(' + scroll + ')').each(function(i) {
                        $(this).clone(true).css( 'left', ( cache.totalItems - idxClicked + i ) * cache.itemW * factor + 'px' ).appendTo( $wrapper );
                    });
                }
                别的 {
                    var $first = $wrapper.children().eq(0);

 $wrapper.find('div.ca-item:gt(' + ( cache.totalItems  - 1 - scroll ) + ')').each(function(i) {
                    // insert before $first so they stay in the right order
                    $(this).clone(true).css( 'left', - ( scroll - i + idxClicked ) * cache.itemW * factor + 'px' ).insertBefore( $first );
                });
            }

            // animate the left of each item
            // the calculations are dependent on dir and on the cache.expanded value
            $wrapper.find('div.ca-item').each(function(i) {
                var $item   = $(this);
                $item.stop().animate({
                    left    :  ( dir === 1 ) ? '-=' + ( cache.itemW * factor * scroll ) + 'px' : '+=' + ( cache.itemW * factor * scroll ) + 'px'
                }, opts.sliderSpeed, opts.sliderEasing, function() {
                    if( ( dir === 1 && $item.position().left < - idxClicked * cache.itemW * factor ) || ( dir === -1 && $item.position().left > ( ( cache.totalItems - 1 - idxClicked ) * cache.itemW * factor ) ) ) {
                        // remove the item that was cloned
                        $item.remove();
                    }                       
                    cache.isAnimating   = false;
                });
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T13:57:04.233

我发现该插件并不难阅读，因此我为您编写了一个具有您要求的功能的自定义版本。我认为。如果我读到这篇文章，你会想要它的所有功能，但你不希望它是无限的。因此，我在这个自定义版本中添加了一个选项来提供这样的功能。要关闭无限循环，只需将其设置为 false，如下所示：

```
$('#ca-container').contentcarousel({ infinite: false }); 
```

这将导致轮播在第一帧和最后一帧停止。

# [在此处查看工作演示](http://jsfiddle.net/SpYk3/AWRQc/)

如果您不想自己进行调整，只需将演示中的代码复制并粘贴到您的 JS 文件中即可。用此更新替换旧代码。否则，如果您决定自己进行调整，则并不难。

1.  我只是在“init”方法中添加了选项。此方法从第 139 行开始。我将选项添加到第 149 行。

    ```
    methods = {
        init        : function( options ) {

            if( this.length ) {

                var settings = {
                    sliderSpeed     : 500,          // speed for the sliding animation
                    sliderEasing    : 'easeOutExpo',// easing for the sliding animation
                    itemSpeed       : 500,          // speed for the item animation (open / close)
                    itemEasing      : 'easeOutExpo',// easing for the item animation (open / close)
                    scroll          : 1,            // number of items to scroll at a time
    /*ADDED OPTION! */  infinite: true  //  tells carousel wether or not to clone items and/or continue scroll past first and last
                }; 
    ```

2.  添加此选项后，我们现在回到第 4 行，即“导航”方法。刚刚过去的第一个 if 语句（这允许正确签入所有选项，我们将需要其中的几个），我添加了另外 2 个 if 语句，如果全部为真，则简单地“返回”并将动画变量重置为 false（这是存储的在缓存变量中）。这些 if 语句检查第一个和最后一个元素的方向和位置。

    *   第一个 if 语句非常简单。如果 dir =`-1`那么我们知道用户点击了“prev”。然后我检查`position().left`第一项，如果 = to `0`，那么我们不需要继续。

        ```
        if (dir == -1 && !opts.infinite && $wrapper.find('div.ca-item').first().position().left == 0) { 
            cache.isAnimating = false; 
            return; 
        } 
        ```

    *   第二个有点棘手。它需要知道什么时候离开与预期的动画完全相同。因此，我借用了在第 36 行找到的计算`$wrapper.find('div.ca-item').each`。

        ```
        if (dir == 1 && !opts.infinite && $wrapper.find('div.ca-item').last().position().left == (cache.itemW * factor * scroll)) {  
            cache.isAnimating = false;  
            return;  
        } 
        ```

3.  几乎最后，做一个更简单的修复。最初在第 17 行（不过，如果您按照我的指示到此为止，它将向下几行），您应该找到一个 if 语句开头`if( dir === 1 ) {`。这仍然在“导航”方法中。在这里，我们需要添加一个检查，以确保如果“无限”选项为 false，则不执行此 if 语句。为什么？因为这是“邪恶克隆”的发生，导致物品被“移动”，但这不是旧物品被移除的地方。还有一步。现在，只需将旧的 if 语句包装如下：

    ```
    if (opts.infinite) {
        if( dir === 1 ) {
            $wrapper.find('div.ca-item:lt(' + scroll + ')').each(function(i) {
                $(this).clone(true).css( 'left', ( cache.totalItems - idxClicked + i ) * cache.itemW * factor + 'px' ).appendTo( $wrapper );
            });
        }
        else {
            var $first  = $wrapper.children().eq(0);

            $wrapper.find('div.ca-item:gt(' + ( cache.totalItems  - 1 - scroll ) + ')').each(function(i) {
                // insert before $first so they stay in the right order
                $(this).clone(true).css( 'left', - ( scroll - i + idxClicked ) * cache.itemW * factor + 'px' ).insertBefore( $first );
            });
        }
    } 
    ```

4.  最后！哇！最后一步，如果检查那个邪恶的删除。最初在第 40 行，您会`$item.remove();`在 '$wrapper.find('div.ca-item').each(function(i) {' 中找到仍在“导航”方法中。只需将这一行更改为以下内容：

    ```
    if (opts.infinite) $item.remove(); 
    ```

维奥拉！全部完成！看？一点都不难！希望这可以帮助！

*“一切都很容易……当你不去想它们的时候！”*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-08T07:38:47.897

**我有一个简单的解决方案......**

我只是在 jquery.contentcarousel.js 第 222 行（大约）处添加了 Prev 和 next click 代码。

```
// navigate left

var i = 4;
var itemsLength = $('div.ca-item').length;

$navPrev.bind('click.contentcarousel', function( event ) {                                                    
    if(i == 4) 
    {
        return false;
    }
    else
    {
        if( cache.isAnimating ) return false;
        cache.isAnimating   = true;
        aux.navigate( -1, $el, $wrapper, settings, cache );
        --i;
    }
});

// navigate right

$navNext.bind('click.contentcarousel', function( event ) {                                                  
    if(i == itemsLength) 
    {
        return false;
    }
    else
    {
        if( cache.isAnimating ) return false;
        cache.isAnimating   = true;
        aux.navigate( 1, $el, $wrapper, settings, cache );
        i++;
    }
}); 
```

# sql - 将 sql 视图中的结果值相加为总计

> ID：16030145
> 
> 赞同：0
> 
> 时间：2013-04-16T06:26:04.850
> 
> 标签：sql, subquery

我有三张这样的表 - *Hospital*、*Diagnosstic* 和*Farmacy*。

**医院**

```
HospitalID   int
PatientID    int
Due         float 
```

**诊断**

```
DaignosticID   int
PatientID    int
Due         float 
```

**农场**

```
FarmacyID   int
PatientID    int
Due         float 
```

*患者ID*列是来自*患者*表的**pk**

 *```
PatientId  int
Patient name  var 
```

我有查询以显示来自不同表的患者的所有会费并将它们总计。

我成功检索了患者的所有会费，但我如何将它们相加？

我的查询是：

```
declare @patient int set @patient=1
BEGIN 
  SELECT 
   dbo.Master.Name, 
    dbo.Diagonistic.Due AS DaigiDue, 
    dbo.Farmacy.Due AS FramaDue,            
    dbo.Hospital.Due AS HospiDue 
 FROM dbo.Diagonistic 
 FULL OUTER JOIN dbo.Master ON dbo.Diagonistic.PatientId = dbo.Master.PatientId 
 FULL OUTER JOIN dbo.Farmacy ON dbo.Master.PatientId = dbo.Farmacy.PatientId 
 FULL OUTER JOIN dbo.Hospital ON dbo.Master.PatientId = dbo.Hospital.PatientId 
 where 
   dbo.Master.PatientId= @Patient 
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:47:28.597

试试这个...

```
Declare @Patient Int 
Set @Patient=1
Begin 

    Select 
    dbo.Master.Name, 
    dbo.Diagonistic.Due AS DaigiDue, 
    dbo.Farmacy.Due AS FramaDue,            
    dbo.Hospital.Due AS HospiDue,
    Isnull(dbo.Diagonistic.Due,'0') +  Isnull(dbo.Farmacy.Due,'0') + Isnull(dbo.Hospital.Due,'0') as TotalDue     
    From dbo.Diagonistic 
    Full Outer Join dbo.Master ON dbo.Diagonistic.PatientId = dbo.Master.PatientId 
    Full Outer Join dbo.Farmacy ON dbo.Master.PatientId = dbo.Farmacy.PatientId 
    Full Outer Join dbo.Hospital ON dbo.Master.PatientId = dbo.Hospital.PatientId 
    Where 
        dbo.Master.PatientId= @Patient 

End 
```*

# javascript - 将垂直滚动附加到水平滚动条

> ID：16030147
> 
> 赞同：0
> 
> 时间：2013-04-16T06:26:15.290
> 
> 标签：javascript, jquery, html, css

我一直在尝试做类似的事情，并尝试了各种来自假滚动条和 DOM 欺骗代码的方法。似乎没有什么像我需要的那样干净/有效。

我想要做的是有一个水平滚动的 div（带滚动条），其中嵌套了一个垂直滚动的 div。理想情况下，单个水平滚动条会滚动，并在某个点之后——垂直滚动它旁边的“向上”div。

以下是需要可视化的人的示例图： ![图表](https://i.imgur.com/Av8Ug56.png "示例图") 我认为我有一个可行的解决方案：

基本上我认为水平“场景”可能溢出等于“向上”div的高度。在“场景”的水平宽度通过之后……您可以在 onScroll 上使用 (ScrollLeft) 向右移动“向上”容器并使用 (ScrollTop) 向上移动。

基本上给你一种用水平滚动条控制它的垂直滚动的错觉。

在这里查看代码：http: [//jsfiddle.net/jPzqj/1/](http://jsfiddle.net/jPzqj/1/)

我知道如何在“场景”结束时传递一个函数......目前我正在使用：

```
$('#main').scroll(function(e)
    {
        if($(this).scrollLeft()>1430)
        {

        }
}); 
```

我唯一的问题是我不太确定如何处理允许我移动上升容器的数学。如何将“场景”div 滚动值传递到“向上”的 ScrollLeft 和 ScrollTop 值...

任何人都可以给我任何建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:44:46.887

您*完全*偏离了正确的道路，不涉及垂直滚动条。

那是一个很好的站点（显然不是您在 30 分钟内创建的站点），并且 javascript 被混淆了，但是如果您有兴趣，您可以使用 Firebug 观看源代码以了解发生了什么。

它通过混合一个`javascript`库、一些很酷`CSS3 Transform3D`的效果和一个很好的研究`HTML`来为您提供屏幕向上滚动的效果（实际上，只有图像在移动 - 而不是滚动 - 而屏幕始终处于相同的 Y 位置）。

相同的效果用于创建**深度感知**，通过移动背景中的房屋比前面的慢。

这种效果称为[`PARALLAX SCROLLING`](http://en.wikipedia.org/wiki/Parallax_scrolling)。

`javascript`您可以开始寻找视差效果的一个好的库是[`Stellar.js`](http://markdalgleish.com/projects/stellar.js/)

你可以看看[**一些很棒的网站**](http://webdesign.tutsplus.com/tutorials/complete-websites/create-a-parallax-scrolling-website-using-stellar-js/)，`Stellar.js`尤其是[**Nike**](http://www.nike.com/jumpman23/aj2012/)和[**Saucony**](http://community.saucony.com/kinvara3/)。

希望这个答案为您节省了一些时间，

祝你学业好运；）

* * *

**编辑**

这就是你想要的：[Jquery Parallax Scrolling effect - Multi directional](https://stackoverflow.com/questions/12461710/jquery-parallax-scrolling-effect-multi-directional)

从获得赏金的答案中打开小提琴并按住右箭头键。

# java - Java 泛型和数值类型

> ID：16030157
> 
> 赞同：8
> 
> 时间：2013-04-16T06:27:02.150
> 
> 标签：java, generics

我想创建一个有效地做到这一点的通用方法：

```
class MyClass {

    static <T extends Number> T sloppyParseNumber(String str) {
        try {
            return T.valueOf(str);
        } catch (Exception e) {
            return (T)0;
        }
    }
} 
```

现在上面没有编译有两个原因：没有`Number.valueOf()`方法和 0 不能强制转换为`T`.

示例用法：

```
String value = "0.00000001";

System.out.println("Double: " + MyClass.<Double>sloppyParseNumber(value));
System.out.println("Float: " + MyClass.<Float>sloppyParseNumber(value));

double d = MyClass.sloppyParseNumber(value);
float f = MyClass.sloppyParseNumber(value); 
```

是否可以使用 Java 实现上述通用方法？如果是，如何？如果不是，有什么好的替代方法？

* * *

编辑：似乎有一些可能的重复，但我没有找到一个，它完全涵盖了这一点。我希望有一些技巧可以拉动，这将允许这两个操作：将字符串解析为`Number`子类，并为子类返回 0 值`Number`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T06:41:14.080

Java 泛型仅提供编译时检查，并且类型信息在编译后几乎被丢弃。因此，该语句`T.valueOf`在 Java 中是不可能的。解决方案是采用评论中已经提到的详细方式。此外，您是否有任何理由想要这样做，`MyClass.<Double>sloppyParseNumber(value)`但不是`MyClass.sloppyParseDouble(value)`因为您在编译时指定了类型？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T06:55:41.433

我 100% 同意 TofuBeer。但是，如果您希望避免冗长，也应该这样做：

```
static <T extends Number> T sloppyParseNumber(String str,Class<T> clas) {

    if (clas == null) throw new NullPointerException("clas is null");

    try {

        if(clas.equals(Integer.class)) {
            return (T) Integer.valueOf(str);
        }
        else if(clas.equals(Double.class)) {
            return (T) Double.valueOf(str);
        }
        //so on

    catch(NumberFormatException|NullPointerException ex) {
        // force call with valid arguments
        return sloppyParseNumber("0", clas);
    }

    throw new IllegalArgumentException("Invalid clas " + clas);

} 
```

但纯粹来自`T`，您无法在运行时获取类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T06:46:19.223

静态方法受类型的约束，因为类型充其量是没有方法的，您所追求的`Number`方法是行不通的。`Number``valueOf`

最简单的方法是制作一些静态方法，如`sloppyParseInt`,`sloppyParseFloat`等...

你可以做这样的事情，不确定我是否喜欢它，并且可能可以改进：

```
public class Main 
{
    private static final Map<Class<? extends Number>, NumberConverter> CONVERTERS;

    static
    {
        CONVERTERS = new HashMap<>();
        CONVERTERS.put(Integer.class, new IntegerConverter());
    }

    public static void main(String[] args) 
    {
        Number valueA;
        Number valueB;

        valueA = CONVERTERS.get(Integer.class).convert("42");
        valueB = CONVERTERS.get(Integer.class).convert("Hello, World!");

        System.out.println(valueA);
        System.out.println(valueB);
    }
}

interface NumberConverter<T extends Number>
{
    T convert(String str);
}

class IntegerConverter
    implements NumberConverter<Integer>
{
    @Override
    public Integer convert(String str) 
    {
        try
        {
            return Integer.valueOf(str);
        } 
        catch (NumberFormatException ex) 
        {
            return 0;
        }    
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T07:16:37.670

因此，我决定采用另一种方法：

```
static String trimTo0(String str) {
    if (str == null) return "0";
    str = str.trim();
    if (str.isEmpty()) return "0";
    return str;
} 
```

用法：

```
String value = null;
System.out println("Double value: " + Double.parseDouble(trimTo0(value))); 
```

请注意，这比问题中的方法更受限制，这不会将无效的非数字字符串转换为`"0"`. 完全做到这一点需要两种不同的方法，一种支持小数点，另一种只支持整数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-22T23:04:48.397

你可以试试这个：

```
private <T> T convertToType(Class<T> clazz,String str) throws Exception {
    return clazz.getConstructor(String.class).newInstance(str);
} 
```

这里需要考虑Type必须有一个带String参数的构造函数。

# python - 如何在python的其他窗口中等待执行

> ID：16030166
> 
> 赞同：1
> 
> 时间：2013-04-16T06:27:48.640
> 
> 标签：python, pyqt4, return-value

我有一个程序可以检查几个条件并检查数据是否可用。如果有任何丢失的数据，那么我将弹出另一个窗口，该窗口将在该窗口中收集数据。它将有两个按钮（应用和关闭）。我想在按钮被触发后返回一个值。

两者`program.py`都有`dataEntry.py`自己的用 PyQt Disigner 设计的 UI。

我希望我的程序等待来自其他窗口的返回值。并根据输入我将继续我的其他过程。

假设程序文件是`program.py`，另一个窗口`dataEntry.py`被导入`program.py`

我的`dataEntry.py`样子

```
#imports necessary modules 

class dataEntry(QtGui.QMainWindow,Ui_DataEntry):

    def __init__(self):

        super(dataEntry,self).__init__()
        self.setupUi(self)

        self.Btn_Apply.clicked.connect(self.ApplyChanges)
        self.Btn_Close.clicked.connect(self.CancelChanges)

    def ApplyChanges(self):
        #This will trigger when ApplyButonn is clicked
        #I want to return True value from here
        return True

    def CancelChanges(self):
        #This will trigger when CancelButonn is clicked
        #I want to return False value from here
        return False 
```

我的`program.py`样子

```
from dataEntry import dataEntry

class MainApp(QtGui.QMainWindow,Ui_MainApp):

    def __init__(self):

        super(MainApp,self).__init__()
        self.setupUi(self)

        self.CheckDetails()

    def CheckDetails(self):
        #Here i will check if required data is present else i will take data from dataEntry class

        if checkFails:

            input = dataEntry()
            input.show()

            #Here i want this class to wait until i get the result from dataEntry class
            EntryResult = return value from dataEntry

            if EntryResult:
                #Do some thing when its True    
             else:
                #Do some thing when its False 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:53:49.850

首先在program.py中导入dataentry.py，然后在你的program.py中

```
EntryResult = dataentry.py.Ui_DataEntry() #considering that the UI class in dataentry.py is Ui_DataEntry 
```

这将运行 dataentry.py 并使您的 dataentry.py 返回所需的值。这样，program.py 将等到它从 dataentry.py 中获取值

# python - 使用 Python 为 Qt Designer 自定义 Qt 小部件

> ID：16030170
> 
> 赞同：9
> 
> 时间：2013-04-16T06:28:22.283
> 
> 标签：python, pyqt4, pyside, qt-designer, custom-widgets

我正在尝试仅使用 Python 为 Qt Designer 编写自定义小部件。我正在关注我在网上找到的几个教程，但它们都没有工作或任何接近我称之为最低工作示例的东西。

所以我的问题是：

1.  使自定义小部件出现在 Qt Designer 的小部件框中涉及哪些步骤？
2.  如果您能抽出时间：请提供一个最小的工作示例（例如一个带有标签的小部件，上面写着“一个真正最小的工作 Qt 自定义小部件示例”）。
3.  或者可能根本不可能包含仅使用 python 的自定义小部件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:14:17.627

关于如何在 pyqt 中制作自定义小部件的示例很少。我用一个工作示例写了这篇文章：*[在 PyQt 中制作自定义小部件](http://downloadandlearning.blogspot.in/2013/04/making-custom-widget-in-pyqt.html)*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-21T19:48:55.820

这是您的问题 #3 的答案：*[如何在 pyqt4 的 Qt Designer 中使用提升？](https://stackoverflow.com/questions/19622014)*

我正在使用 PySide，它的工作方式相同。此方法直接适用于您的 Python 自定义小部件代码。您不需要编写任何单独的插件代码。

提升自定义小部件后，您可以右键单击它并使用“更改信号/插槽...”添加您的信号

我建议将所有小部件放在 YourCostumWidgetsPack.UI 文件中，然后当您在 Qt Designer 中加载此文件时，除了您正在工作的 UI 之外。它将加载您所有的自定义小部件信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-20T23:15:55.253

我发现这篇文章是你的答案：[https ://doc.qt.io/archives/qq/qq26-pyqtdesigner.html](https://doc.qt.io/archives/qq/qq26-pyqtdesigner.html)

但是，我无法在 Qt Designer 中安装它：D

# prolog - 二叉搜索树：最小元素

> ID：16030172
> 
> 赞同：3
> 
> 时间：2013-04-16T06:28:29.723
> 
> 标签：prolog

我试图寻找这个但没有运气；如果问题已得到解答，请告诉我！

假设我有一个具有以下形式的键值对的二叉树：

*   `t/0`: 空树
*   `t/4`: 一个树节点`t(Key, Value, Left, Right)`

现在我想获得第一个（最小）元素。显而易见的（对我而言）实现是：

```
min0(t(K,V,t,_), K, V) :- !.
min0(t(_,_,L,_), K, V) :- min0(L, K, V). 
```

然而，SWI-Prolog 中的实现`library(assoc)`是这样的：

```
min(t(K,V,L,_), Key, Val) :- min(L, K, V, Key, Val).
min(t,K,V,K,V).
min(t(E,K,V,_), _, _, Key, Val) :- min(L, K, V, Key, Val). 
```

其他操作类似`max`并`get`显示出相同的方法差异。

为什么？我在这里想念什么？据我所知，我的版本没有创建选择点。但话又说回来，我需要削减基本情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:07:58.103

当考虑执行子句时，您的版本*确实会创建一个选择点。*`!/0`切掉之前创建的选择点。您的版本不允许对第一个参数进行索引，而是依赖于术语中更深层次的统一。您是否已经在大型二叉树上对这两个版本进行了基准测试？除此之外，我发现 SWI 版本更优雅，因为您提到的树术语的两种情况自然出现在其中。

# java - 将用户输入字符串与从文本文件中读取的字符串进行比较

> ID：16030173
> 
> 赞同：0
> 
> 时间：2013-04-16T06:28:30.303
> 
> 标签：java, string, input, compare

我目前正在编写这个程序，我需要从文本文件中读取信息，然后将读取的信息与用户输入进行比较，并输出一条消息，说明它是否匹配。

目前有这个。该程序已成功读取指定的数据，但我似乎无法在最后正确比较字符串并打印结果。

代码低于任何帮助将不胜感激。

```
import java.util.Scanner;      // Required for the scanner
import java.io.File;               // Needed for File and IOException 
import java.io.FileNotFoundException; //Required for exception throw

// add more imports as needed

/**
 * A starter to the country data problem.
 * 
 * @author phi 
 * @version starter
 */
public class Capitals
{
    public static void main(String[] args) throws FileNotFoundException // Throws Clause Added
    {
        // ask the user for the search string
        Scanner keyboard = new Scanner(System.in);
        System.out.print("Please enter part of the country name: ");
        String searchString = keyboard.next().toLowerCase();

        // open the data file
        File file = new File("CountryData.csv");

        // create a scanner from the file
        Scanner inputFile = new Scanner (file);

        // set up the scanner to use "," as the delimiter
        inputFile.useDelimiter("[\\r,]");

        // While there is another line to read.
        while(inputFile.hasNext())
        {
            // read the 3 parts of the line
            String country = inputFile.next(); //Read country
            String capital = inputFile.next(); //Read capital
            String population = inputFile.next(); //Read Population

            //Check if user input is a match and if true print out info.
            if(searchString.equals(country))
            {
                System.out.println("Yay!");
            }
            else
            {
                System.out.println("Fail!");
            }
        }

        // be polite and close the file
        inputFile.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-14T21:24:19.047

您应该尝试从用户输入国家/地区的用户界面（可见窗口）中的文本字段读取输入，并将其作为原始输入缩短代码。（仅当您在屏幕上有可见窗口时）

我没有那个扫描仪的良好体验，因为当我使用它们时，它们往往会使我的应用程序崩溃。但是我用于相同测试的代码只包含一个不会使我的应用程序崩溃的文件的扫描仪，如下所示：

```
 Scanner inputFile = new Scanner(new File(file));

    inputFile.useDelimiter("[\\r,]");
    while (inputFile.hasNext()) {
        String unknown = inputFile.next();
        if (search.equals(unknown)) {
            System.out.println("Yay!");
        }
    }

    inputFile.close(); 
```

我认为将字符串与文件进行比较的最简单方法是添加一个可见窗口，用户在其中键入国家/地区，然后将输入读取到字符串中`String str = textField.getText();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:36:45.520

这里有几个可能的问题。首先，您将转换`searchString`为小写。CSV 中的数据也是小写的吗？如果没有，请尝试`equalsIgnoreCase`改用。此外，在我看来，您应该能够匹配国家名称的部分内容。在这种情况下，`equals`(or `equalsIgnoreCase`) 仅在用户输入完整的国家名称时才有效。如果您希望只能匹配一部分，请`contains`改用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T06:34:14.147

我猜您的比较由于区分大小写而失败。

您的字符串比较不应该区分大小写吗？

# c - 从命令行读取参数时出现分段错误

> ID：16030176
> 
> 赞同：-5
> 
> 时间：2013-04-16T06:28:40.483
> 
> 标签：c, segmentation-fault

我正在尝试在 c 中实现一个重复的 cat 函数。我遇到分段错误，我无法找到原因。

```
 #include <stdio.h>
    #include <stdlib.h>

int main(int argc,char *argv[])
{
    char* s;        /* input string */

    int c;

    if(argc==1){

        while (gets(s)){
            puts(s);
        }
    }

    else{

    FILE *file = fopen( "./argv[1]", "r" );
    while((c=fgetc(file))!=EOF){
        fputc(c,stdout);

    }

    fclose(file);   

    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T06:30:08.533

您正在读取字符`s`而不分配内存：

```
 while (gets(s)){
        puts(s);
    } 
```

首先使用分配一些内存`malloc`（稍后您将不得不这样`free`做）：

```
 char *s = malloc(some_buffer_size); 
```

或使其固定：

```
 char s[some_buffer_size]; 
```

顺便提一下`gets`，因为没有办法限制输入的字符数，这会导致缓冲区溢出。改为使用`fgets(buf, sizeof(buf), stdin)`。

其他人指出了第二个错误，你不能这样调用`fopen`，改用这个，或者使用 H2CO3 的解决方案：

```
 FILE *file = fopen( argv[1], "r" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T06:30:59.653

`gets(s);`- 这里`s`没有初始化指向任何东西。 `fopen( "./argv[1]", "r" );`- 这是错误的。一定是 -`fopen(argv[1], "r" );`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T06:49:20.690

`malloc()`基本上分配内存。最后，您还需要`free()`释放变量以释放分配的空间。

你应该用它`gdb()`来找出错误和调试你的程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T06:31:25.377

```
fopen( "./argv[1]", "r" ); 
```

啊，什么？假设，对吧？

```
char buf[0x1000];
snprintf(buf, sizeof(buf), "./%s", argv[1]);
FILE *f = fopen(buf, "r"); 
```

此外，您正在使用`s`未初始化的指针（您没有为其分配任何内存），因此您的程序也会调用未定义的行为。

# php - 选择列名不等于多个值的行

> ID：16030186
> 
> 赞同：1
> 
> 时间：2013-04-16T06:29:14.987
> 
> 标签：php, mysql

我正在创建好友系统，用户可以在其中添加为好友、接受好友请求等......

表结构

```
userfr_id(AUTO_INCREMENT)
user_id
friend_id
accepted(int 1) 
```

工作功能

```
Friend request
Accept friend request
Display all friends.. 
```

不工作的功能

*   删除好友
*   取消好友请求
*   检查朋友退出

现在我尝试按照以下方法删除用户

*   检查用户 id 和friend_id 可用行
*   获取自动增量
*   使用自动增量运行删除查询

但我的问题是有什么方法可以检查用户 id 和friend_id 可用行吗？

表格行中的示例日期

![http://i.imgur.com/xqZP9oF.png](https://i.stack.imgur.com/M9eTt.png)

我无法使用 where in 因为归档名称不同

任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:34:20.963

Mayby 只需尝试：

```
SELECT *
  FROM table
 WHERE ( ( user_id = 4 AND friend_id = 5 ) OR
         ( user_id = 5 AND friend_id = 4 ) )              
   AND accepted = 1 
```

如果返回一行，则有友谊，否则，他们不是朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:42:07.587

SELECT * FROM table_name WHERE !(ISNULL([columnname]));

试试这个地方你的查询和附加条件

# jquery - twitter bootstrap 崩溃想显示最后两个 li

> ID：16030187
> 
> 赞同：0
> 
> 时间：2013-04-16T06:29:16.683
> 
> 标签：jquery, twitter-bootstrap

我正在使用 twitter bootstrap 进行响应式设计。
我有像 facebook 一样的评论模块。 已经显示了我已经折叠的
所有评论， 我想显示最后两个 li 默认值.. 它折叠所有 li。 现在如何使 我的代码的最后两个 li 可见`<li></li>`
`ul``data-toggle="collapse" data-target="#comm"`

```
 <a data-toggle="collapse" data-target="#comm"> Comments</a>  
 <ul id="comm" class="comentbox collapse">
<li>
this is first comment   
</li>
<li>
this is 2 comment   
</li>
<li>
this is first comment   
</li>
<li>
this is 3 comment   
</li>
<li>
this is 4 comment   
</li>
</ul> 
```

我需要显示最后两个 li 默认值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:57:53.803

您可以将类添加`in`到您的`ul`，使其`li`默认显示所有内容：

```
<ul id="comm" class="comentbox collapse in"> 
```

然后您可以使用 jQuery 隐藏前 3 个`li`并在单击超链接时切换它：

```
$('#comm li').slice(0,3).hide();

var click = 0;
$("a").click(function() {
    click++;
    if (click == 2) {
        $('#comm li').slice(0,3).show();
    }           
}); 
```

`**[Working Demo](http://jsfiddle.net/MgcDU/3349/)**`

# iphone - 存储在地址簿中的对象的潜在泄漏

> ID：16030192
> 
> 赞同：0
> 
> 时间：2013-04-16T06:29:38.680
> 
> 标签：iphone, objective-c, memory-management, ios6, core-foundation

我遇到了存储在通讯簿中的对象的潜在泄漏问题，如何解决它。

**我在本地**创建通讯录，然后将ArrayofAllpeople 复制到 people1 数组。people1 数组在方法之外使用。那么我应该在哪里发布**addressbookref**。请提出建议。

这是我的代码

```
 ABAddressBookRef addressBook = ABAddressBookCreate();
    people1 = (__bridge NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:38:07.097

使用 `CFRelease()`方法。

```
 ABAddressBookRef addressBook = ABAddressBookCreate();
 people1 = (__bridge NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook);
  CFRelease(addressBook); 
```

我想这会对你有所帮助。

# javascript - 如何将字符串添加到变量 json 字符串中以在 highstock 图表中添加标志

> ID：16030193
> 
> 赞同：0
> 
> 时间：2013-04-16T06:29:39.023
> 
> 标签：javascript, json, highstock

我在将字符串添加到变量 json 字符串时遇到问题，脚本是这样的：

```
 var  myNewData4 =[];
    for (var i = 0, l = row; i < l; i++) {
      myNewData4 = [{
            x: datatime[i],
            y: 44,
            title: datalayer[i],
            obj: 'fff'
        }];

    } 
```

当我运行该脚本时，担架总是失败。我使用该脚本在 highstock 图表中添加数据标志，

这是为添加标志创建 highstock 图表的脚本的一部分：

```
 {
            type: 'flags',
            name: 'Flags on series',
            data: myNewData4,
            onSeries: 'dataseries',
            shape: 'squarepin',
            tooltip: {
                valueDecimals: 2
            }
        } 
```

如果我像下面的脚本一样使用该脚本而没有 for 循环成功，则可以读取 highstock 图表。

```
 var  myNewData4 =[]       
      myNewData4 = [{
            x: 1360774800000,
            y: 44,
            title: 'BRF',
            obj: 'fff'
        }]; 
```

如何使用循环将字符串添加到变量 json 字符串中以在 highstock 图表中添加标志？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:34:48.510

你的意思是这样的：

```
var  myNewData4 =[];
for (var i = 0, l = row; i < l; i++) {
    //since myNewData4 is an array, push a new object into it.
    myNewData4.push({
        x: datatime[i],
        y: 44,
        title: datalayer[i],
        obj: 'fff'
    });
} 
```

**编辑：**

由于您的设置数组的代码直接有效，因此想到以下内容：尝试访问 datatime[i] 或 datalayer[i] 时，您的 javascript 引擎中是否出现引用/越界错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:34:57.120

我认为这可能会更好：

```
var  myNewData4 =[];
for (var i = 0, l = row; i < l; i++) {
  myNewData4.push({
        x: datatime[i],
        y: 44,
        title: datalayer[i],
        obj: 'fff'
    });
} 
```

这将为您提供一个`row`对象数组，而不是单个对象的数组。

# cakephp - cake php 表单验证对我不起作用

> ID：16030195
> 
> 赞同：0
> 
> 时间：2013-04-16T06:29:41.943
> 
> 标签：cakephp, validation

我有一个表格，它在 cakephp 中添加了用户的名字和姓氏。这是代码

视图代码 ( `add.ctp`)

```
<?php 
echo $this->Form->create('User');
echo $this->Form->input('first_name',array('label'=>'First Name'));
echo $this->Form->input('last_name',array('label'=>'Last Name'));           
echo $this->Form->end('Add User');
?> 
```

UserController ( `UsersController.php`)的代码

```
<?php
     public function add(){
          if($this->request->is('post')){
               $addData = $this->request->data;
               $this->User->create();       
               if($this->User->save($addData)){
                  $this->Session->setFlash('User has been added successfully');
                  $this->redirect(array('action'=>'index'));            
               }            
          }
     }    
?> 
```

查看用户模型的代码 ( `UserModel.php`)

```
<?php
  class UserModel extends AppModel{
   public $validate = array(
     'first_name' => array(
          'rule'    => 'notEmpty',
          'message' => 'first name should not be empty.'
      ),
     'last_name' => array(
         'rule'    => 'notEmpty',
         'message' => 'last name should not be empty.'
      )
   );   
}
?> 
```

这是我正在使用的代码，我也在 cakebook 上看到并使用了各种其他规则，但没有验证适用于我的表单。有人可以帮我看看可能是什么原因吗？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T06:38:58.067

您的模型文件名不正确。应该`User.php`不是`UserModel.php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T08:58:31.950

请将您的文件名更改为`user.php`如果您在 mysql 中使用表名作为用户而不是`UserModel.php`

并且您的班级名称必须如下所示

```
<?php
  class User extends AppModel{

    var $name = 'User';

   public $validate = array(
     'first_name' => array(
          'rule'    => 'notEmpty',
          'message' => 'first name should not be empty.'
      ),
     'last_name' => array(
         'rule'    => 'notEmpty',
         'message' => 'last name should not be empty.'
      )
   );   
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T06:40:57.983

您的模型名称应该是用户（因为您的表名称和控制器名称是用户）。所以在你的模型文件（User.php）中试试这个

```
<?php
App::uses('AppModel', 'Model');
class User extends AppModel{
public $validate = array(
 'first_name' => array(
      'rule'    => 'notEmpty',
      'message' => 'first name should not be empty.'
  ),
 'last_name' => array(
     'rule'    => 'notEmpty',
     'message' => 'last name should not be empty.'
  ) 
```

);
}

# c# - Linq C# 到 VB.net

> ID：16030196
> 
> 赞同：0
> 
> 时间：2013-04-16T06:29:47.360
> 
> 标签：c#, vb.net, linq, group-by

我尝试将以下 linq 代码从 c# 转换为 vb.net。

```
var groupedPhotos = from photo in photos
                    orderby photo.TimeStamp
                    group photo by photo.TimeStamp.ToString("y") into photosByMonth
                    select new KeyedList<string, Photo>(photosByMonth); 
```

当我按以下方式转换时，我收到一条错误消息，提示“范围变量名称只能从不带参数的简单名称或限定名称中推断出来”。我必须在哪里改变？

```
 Dim groupedPhotos = From photo In photos
                     Order By photo.TimeStamp
                     Group photo By photo.TimeStamp.ToString("y") Into Group 
                     Select New KeyedList(Of String, Photo) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:35:37.177

试试那个：

```
Dim groupedPhotos = From photo In photos
                    Order By photo.TimeStamp
                    Group photo By Key = photo.TimeStamp.ToString("y") Into g = Group 
                    Select New KeyedList(Of String, Photo)(g) 
```

# android - 流音频 Android - PC

> ID：16030198
> 
> 赞同：1
> 
> 时间：2013-04-16T06:29:51.967
> 
> 标签：android, audio, stream

我正在尝试将麦克风输入数据流式传输到将在其扬声器上输出流的 PC。流应该被压缩然后加密。

我尝试了以下方法：

安卓手机：

```
AudioGroup audioGroup = new AudioGroup();
audioGroup.setMode(AudioGroup.MODE_NORMAL);
AudioStream audioStream = new AudioStream(InetAddress.getLocalHost());
int port = audioStream.getLocalPort();
// tell other side which port to use (this works)
daos.writeInt(port);

audioStream.setCodec(AudioCodec.PCMU);
audioStream.setMode(RtpStream.MODE_SEND_ONLY);
audioStream.associate(adr, port);
audioStream.join(audioGroup);
AudioManager Audio = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
Audio.setMode(AudioManager.MODE_IN_COMMUNICATION); 
```

接收方的 Java 程序。如何使用 UDP 套接字进行传输？

```
DatagramSocket datagramSocket = new DatagramSocket(port);
System.out.println("Waiting for audio data...");  
source = AudioSystem.getAudioInputStream(????.getInputStream());
AudioSystem.getAudioInputStream(AudioFormat.Encoding.ULAW, source);
byte[] audioData = new byte[4096];
source.read(audioData, 0, 4096);
toSpeaker(audioData); 
```

我希望有人能帮助我。当然，任何其他想法都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:45:08.720

试试这个代码。

公共类 StreamAudioDemo 扩展 Activity 实现 OnClickListener、OnPreparedListener、OnCompletionListener、OnErrorListener{

```
private MediaPlayer mp;
private ProgressDialog pd;
private Button btnplay;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btnplay=(Button)findViewById(R.id.play);
    btnplay.setOnClickListener(this);
}
@Override
public void onPrepared(MediaPlayer mp) {
      Log.i("StreamAudioDemo", "prepare finished");
      pd.setMessage("Playing.....");
      mp.start();
}

@Override
public void onClick(View v) {
    try
    {
        pd = new ProgressDialog(this);
        pd.setMessage("Buffering.....");
        pd.show();
        mp = new MediaPlayer();
        mp.setAudioStreamType(AudioManager.STREAM_MUSIC);
        mp.setOnPreparedListener(this);
        mp.setOnErrorListener(this);  //http://www.youtube.com/watch?v=pj-T_LxSCng
        mp.setDataSource("http://www.robtowns.com/music/blind_willie.mp3");
        //mp.setDataSource("http://www.youtube.com/watch?v=pj-T_LxSCng");
        mp.prepareAsync();
        mp.setOnCompletionListener(this);
    }
    catch(Exception e)
    {
        Log.e("StreamAudioDemo", e.getMessage());
    }

}

@Override
public void onCompletion(MediaPlayer arg0) {
    pd.dismiss();
    Toast.makeText(getApplicationContext(), "Completed", Toast.LENGTH_LONG).show();     

}
@Override
public boolean onError(MediaPlayer mp, int what, int extra) {
    // TODO Auto-generated method stub
    pd.dismiss();
    return false;
} 
```

}

# java - 无法使用 JDO 映射 1:N 单向关系

> ID：16030202
> 
> 赞同：0
> 
> 时间：2013-04-16T06:29:56.250
> 
> 标签：java, rdbms, jdo, datanucleus

我需要使用 JDO Annotation (DataNuecles) 映射**1:N 单向**关系。我有一个预定义的数据库。

关系是，“用户”可以有一组“用户描述”。我已经有两个名为“User”和“UserDescription”的表。这两个表之间没有定义的外键。表结构如下。我只会输入必填字段

```
**User**
-----
Id (pk) (int)
Name
---
---

**UserDescription**
-------------------
UserId (pk) (int)
LangId (pk) (varchar)
---
--- 
```

以下是我尝试在两个表上映射的代码。

```
@PersistenceCapable(detachable = "true")
public class User implements Serializable { 
   @PrimaryKey
   @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
   @Column(jdbcType = "INTEGER", length = 11)
   private long id;
       -----
       -----
   @Element(column="USERID")
   private Set<UserDescription> userDescriptions;
}

@PersistenceCapable(objectIdClass = UserDescriptionPrimaryKey.class, detachable = "true")
public class UserDescription implements Serializable {

    private static final long serialVersionUID = 740988314686349952L;

    @PrimaryKey
    @Column(jdbcType = "INTEGER", length = 11)
    private long userId;
    @PrimaryKey
    @Column(jdbcType = "VARCHAR", length = 2)
    private String langCode;
} 
```

然后我执行了一个单元测试以插入新的“UserDescription”，它因抛出和异常而失败。

```
org.datanucleus.exceptions.NucleusDataStoreException: Insert of object "org.service.entity.db.UserDescription@2f6a23cf" using statement "INSERT INTO `USERDESCRIPTION` (`DESCRIPTION`,`CREATEDATE`,`UPDATEDATE`,`DELETEFLAG`,`LANGCODE`,`USERID`,`USERID`) VALUES (?,?,?,?,?,?,?)" failed : Column 'USERID' specified twice 
```

上面的注释还将创建一个名为“USERDESCRIPTIONS_ID_OWN”的额外列，并为新字段设置外键。但我想为“UserDescription”表中现有的“UserId”列创建外键。

我按照以下 URL 进行映射。 [http://www.datanucleus.org/products/datanucleus/jdo/orm/one_to_many_set.html#fk_uni](http://www.datanucleus.org/products/datanucleus/jdo/orm/one_to_many_set.html#fk_uni)

我该怎么做？

# ml - 以毫升为单位的圆度误差

> ID：16030207
> 
> 赞同：0
> 
> 时间：2013-04-16T06:30:17.477
> 
> 标签：ml

我正在尝试运行一个函数 subst(tr, v1, v2) 返回一个新的 ntree，其中 v1 的所有值都被输出树中的 v2 替换。

```
datatype 'a ntree = leaf of 'a | node of 'a ntree list;

fun map(f, []) = [] | map(f,x::t)=f(x) :: map(f,t);

fun subst(leaf(d), v1, v2) = if d=v1 then v2 else d
  | subst(node(q), v1, v2) = let fun w(k) =
  if k=v1 then subst(v2, v1, v2) else subst(k, v1, v2)
  in map(w, q)
  end; 
```

但我得到一个循环错误 b/c 我的 rhs of 子句不同意函数结果类型。我的表达式是 ''Z 列表，我的结果类型是 ''Z

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:45:42.533

您忘记再次`subst`使用适当的`ntree`构造函数包装结果，因此，类型系统试图将类型等同于`d`列表。此外，`w`鉴于您将其映射到 ntree 列表（即，`k`是一个 ntree，并且您无法将其与 比较`v1`），您的函数并没有多大意义。

一般提示：如果您有奇怪的类型错误，一开始无法理解，通常可以通过添加类型注释来缩小它们的范围，例如在函数参数或结果上。

以下代码应该可以工作（未经测试）：

```
fun subst(leaf d, v1, v2) = leaf(if d = v1 then v2 else d)
  | subst(node q, v1, v2) = node(map(fn k => subst(k, v1, v2), q)) 
```

使用适量的柯里化，并使用标准`map`函数，它可以更简单：

```
fun subst v1 v2 (leaf d) = leaf(if d = v1 then v2 else d)
  | subst v1 v2 (node q) = node(map (subst v1 v2) q) 
```

此外，作为风格上的 nit，最好将构造函数 (`Leaf`和`Node`) 大写，以便将它们与模式中的变量区分开来。

# sed - SED 命令删除尾随空格

> ID：16030209
> 
> 赞同：2
> 
> 时间：2013-04-16T06:30:19.947
> 
> 标签：sed

是否有`sed`删除尾随空格的命令？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T06:47:11.283

使用以下命令：

```
sed 's/\s*$//g' your_file 
```

# sql - 服务器主体“sa”无法在当前安全上下文下访问数据库

> ID：16030214
> 
> 赞同：0
> 
> 时间：2013-04-16T06:30:40.117
> 
> 标签：sql, sql-server-2008, stored-procedures

我相信有很多与此错误相关的 StackOverflow 帖子，但似乎没有一个有我正在寻找的简单解决方案。如果你们中的任何人能调查一下，我将不胜感激。

问题：我正在使用一个动态 sql 存储过程，它在 cte 表达式中使用 FundTransfer 数据库表，然后与 WebbnkDb 数据库连接。

但是，我遇到了上面标题中提到的异常。如果我删除`WITH EXECUTE AS SELF`命令一切正常，但不幸的是我无法摆脱它，因为它用于某些安全原因。请用简单的话建议我解决方案。

```
USE [WebBank]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[usp_naSearchV2_20131504]   
@Debug    BIT = 0,   
@UserName   varchar(50)=NULL,   --This will be used to potentially limit the results per user & also for logging  
@SSN    char(9) = NULL,   
@FName    varchar(25) = NULL,   
@LName    varchar(30) = NULL, 
@dtApplicationStart datetime = NULL,  
@dtApplicationEnd datetime = NULL,  
@CompanyName  varchar(50) = NULL,  
@DaysInTask   int = NULL,   --This will be how many days it's been in the current task...  
@AcctNum   varchar(11) = NULL,  
@BranchNums   varchar(1500) = NULL, --This will be passed to an IN.  Don't enclose each in single quotes - for example, '45, 145, 1, 15'  
@WorkflowID   int = NULL,   --1 = HSA, 2 = Personal, 3 = SEI
@OriginationID  tinyint = NULL,   --This comes from the Applicant record.  
@QueueID   int = NULL,      
@TaskStageIDs  varchar(500) = NULL, --Will be passed to an IN, so multiple TaskStageIDs can be passed.              
@TaskIDs VARCHAR(1500)=NULL,  
@DaysAged   int = NULL,   --Days since application was entered  (not including time spent in approved/declined/open states)              
@LastActivityStart datetime=NULL,              
@LastActivityEnd datetime=NULL, 
@SOAApplID   int = NULL,   --SEI ID  
@Market VARCHAR(50) = NULL,   --from luAffinityMarket               
@IncludeSecondary bit=0,  
@IncludeAliasName bit=0,               
@EmailTypeIDs varchar(500) = NULL

WITH EXECUTE AS SELF --This is needed because we're using dynamic SQL & don't want to grant access to underlying tables.  
AS
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED

/*               
** New Account - Search.
**  
** This will be done in dynamic SQL.  The reason is because when searching on multiple optional parameters,
** SQL cannot use indexes without using dynamic SQL.  This makes the proc sssssslllllooooooooowwwwwwwwwww (when not using dynamic sql).
** See http://www.sommarskog.se/dyn-search-2005.html
** 
** In addition to the basics (name, social, branch, product, "workflow"), also show Task, Queue, Check-Out info, etc
** 
*/               

/*              
I have to create new version of this store procedure since we continue making changes to resolve helpdesk tickets and               
for AOT Part 2\. Some tables that we are going to use for AOT project part 2 will not be moved to production until 12/05/10\.              
New version will be called usp_naSearchV2 and will contain new tables for AOT Part 2                
*/ 

--CAST(ROUND(ISNULL(cteAge.Age + 1, 0), 2) AS DECIMAL(8, 2)) AS DaysAged,
DECLARE @SQL  nvarchar(max),@paramlist nvarchar(max)   
DECLARE @SOASQL nvarchar(MAX)     

SET @FName = '%' + @FName + '%'
SET @LName = '%' + @LName + '%'  
SET @CompanyName = '%' + @CompanyName + '%'  

SELECT @SQL = '  
WITH 
cteAutoApprove (AcctID, AutoApproved)
AS (
SELECT awt.AcctID, MIN(CAST(awt.autoEnter AS SMALLINT)) AS AutoApproved
FROM dbo.AccountWorkflowTask awt JOIN dbo.WorkflowTask wt ON awt.WorkflowTaskID = wt.WorkflowTaskID
WHERE (wt.TaskID IN (9, 17) AND ReasonIDExit = 1)
OR (wt.TaskID IN (209, 309, 409, 509, 609, 709, 809, 909) AND ReasonIDExit = 40)
--OR ReasonIDExit IN(216,202) OR ReasonIDEnter=215
or(wt.TaskID=201 and ReasonIDExit is NULL) GROUP BY awt.AcctID),
cteAge (AcctID, Age)
AS (SELECT AcctID, SUM(CASE WHEN t.TaskStageID IN (2, 3, 4) OR t.TaskID = 1 THEN 0 '--don''t count Pending Completion, Open, Approved, or Declined in age
+ 'ELSE DATEDIFF(minute, dtEnter, ISNULL(dtExit, GETDATE())) END) / 60 / 24.0 Age
FROM dbo.AccountWorkflowTask awt JOIN WorkflowTask wt ON awt.WorkflowTaskID = wt.WorkflowTaskID           JOIN Task t ON wt.TaskID = t.TaskID
GROUP BY AcctID),  
**cteFundingStatus(AcctID,FundingStatus,SourceAccountTypeDescription)
AS
(SELECT TransferStaging.AcctID,luTransferStatus.TransferStatusDesc, luAcctType.AcctTypeDesc  from 
FundsTransfer.dbo.TransferStaging 
JOIN FundsTransfer.dbo.luTransferType ON  luTransferType.TransferTypeID = TransferStaging.TransferTypeID    
JOIN FundsTransfer.dbo.luAcctType ON luTransferType.SourceAcctTypeID = luAcctType.AcctTypeID      
JOIN FundsTransfer.dbo.luTransferStatus ON luTransferStatus.TransferStatusID = TransferStaging.TransferStatusID),**                
cteFulfillment(AcctID, Request, TemplateName)
AS
(SELECT ful.AcctID, CAST(Request AS NVARCHAR(max))Request, lt.TemplateName  FROM dbo.fulfillment ful left join LetterRequest lr on lr.LetterID = ful.LetterID  
LEFT JOIN luLetterTemplate lt ON lt.TemplateID = lr.TemplateID  
WHERE (Request IS NOT NULL OR ful.LetterID IS NOT NULL) AND FulfillmentID=(SELECT MAX(FulfillmentID) FROM fulfillment  sub WHERE ful.AcctID=sub.AcctID AND (Request IS NOT NULL OR LetterID IS NOT NULL))  ),              
cteNote(AcctID,userEntered,dtEntered,Note,NoteReasonDesc,ReasonCode,NoteReasonID)              
as              
(SELECT AcctID,userEntered,dtEntered,Note,NoteReasonDesc,ReasonCode,n.NoteReasonID FROM note n JOIN              
dbo.luNoteReason lu ON lu.NoteReasonID=n.NoteReasonID WHERE '  

IF @EmailTypeIDs IS NOT NULL                
SELECT @SQL=@SQL+'  n.NoteReasonID IN (' + @EmailTypeIDs + ') AND '    

SELECT @SQL=@SQL+ ' dtEntered=(SELECT MAX(dtEntered)FROM note sub WHERE sub.AcctId=n.AcctID '  

IF @EmailTypeIDs IS NOT NULL                
SELECT @SQL=@SQL+ ' AND sub.NoteReasonID IN (' + @EmailTypeIDs + ')'  

SELECT @SQL=@SQL+')) '    

SELECT @SQL=@SQL+'SELECT a.ApplID, acct.AcctID, acct.dtApplication, ai.FName, ai.MName, ai.LName, ai.SSN, a.Email, ao.CompanyName,'
SELECT @SQL=@SQL+'ao.DBAName, ao.TaxID, acct.AcctNum, acct.AcctAffinityNum, luA.AffinityNum, luA.AffinityName, t.TaskDesc, awt.dtEnter,'
SELECT @SQL=@SQL+'DATEDIFF(day, awt.dtEnter, GETDATE()) + 1 DaysInTask, q.QueueDesc, w.WorkflowID, w.WorkflowDesc,'
SELECT @SQL=@SQL+'luO.OriginationID, luO.OriginationDesc, aco.dtCheckOut, aco.UserCheckOut, aco.GUIDCheckout, lts.TaskStageDesc,'
SELECT @SQL=@SQL+'DATEDIFF(day, acct.dtApplication, GETDATE()) + 1 DaysAgedOld,CAST(ROUND(ISNULL(cteAge.Age + 1, 0), 2) AS int) AS DaysAged,' 
SELECT @SQL=@SQL+'asa.SOAApplID, case when (w.WorkflowID=1 and luO.OriginationID=4) then ''Low''when  luO.OriginationID=9 then ''Low'''                 
SELECT @SQL=@SQL+'else''High'' end as RiskType, awt.userEnter, awt.dtEnter, case when cteAutoApprove.AutoApproved=1 then ''Automated'''              
SELECT @SQL=@SQL+'when cteAutoApprove.AutoApproved=0 then ''Manual'' else '''' end as DecisionType,acctLam.Market,ful.Request,ful.TemplateName,fun.SourceAccountTypeDescription,fun.FundingStatus, acct.BrokerCode,              
COALESCE(ai.SSN, ao.TAXID) as TIN, case when bup.BusPurposeDesc like ''%Other%'' then ao.BusPurposeOther else bup.BusPurposeDesc end as BusPurpose           
,note.Note,note.NoteReasonDesc,note.ReasonCode,aa.RelationshipCode,luRel.RelationshipCodeDesc, Addr.Address1, Addr.Address2, Addr.City, Addr.State, Addr.Zip FROM   dbo.Applicant a JOIN dbo.APPLICANTACCOUNT aa ON a.ApplID = aa.ApplID '              

IF @IncludeSecondary=0               
SELECT @SQL=@SQL+' AND aa.RelationshipCode = ''000'' '

SELECT @SQL=@SQL+'LEFT JOIN dbo.ApplicantIndiv ai ON a.ApplID = ai.ApplID  LEFT JOIN dbo.ApplicantOrg ao ON a.ApplID = ao.ApplID JOIN dbo.AFFINITYGROUP ag ON a.AffGroupID = ag.AffGroupID JOIN dbo.luAffinity luA ON ag.AffinityID = luA.AffinityID          

JOIN dbo.Account acct ON aa.AcctID = acct.AcctID JOIN dbo.AccountWorkflowTask awt ON acct.AcctID = awt.AcctID AND awt.dtExit IS NULL --join to current AccountWorkflowTask 
JOIN dbo.WorkflowTask wt ON awt.WorkflowTaskID = wt.WorkflowTaskID JOIN dbo.Task t ON wt.TaskID = t.TaskID 
JOIN dbo.Workflow w ON wt.WorkflowID = w.WorkflowID JOIN dbo.luTaskStage lts ON t.TaskStageID = lts.TaskStageID
LEFT JOIN dbo.Queue q ON t.QueueID = q.QueueID LEFT JOIN dbo.luOrigination luO on a.OriginationID = luO.OriginationID 
LEFT JOIN dbo.accountCheckOut aco ON acct.AcctID = aco.AcctID AND aco.dtCheckIn IS NULL LEFT JOIN AccountSOAApplication asa ON acct.AcctID = asa.AcctID
LEFT JOIN cteAutoApprove on cteAutoApprove.AcctID = acct.AcctID LEFT JOIN cteAge ON cteAge.AcctID = acct.AcctID 
LEFT JOIN luAffinityMarket lam ON CAST(luA.AffinityNum AS INT) = CAST(lam.BRNCH_NBR AS INT) LEFT JOIN luAffinityMarket acctLam ON acct.AcctAffinityNum = CAST(acctLam.BRNCH_NBR AS INT) 
LEFT JOIN cteFulfillment ful on acct.AcctID=ful.AcctID 
left Join **cteFundingStatus** fun on  fun.AcctID=acct.AcctID               
left Join luBusPurpose bup on bup.BusPurposeID=ao.BusPurposeID               
Left join cteNote note on acct.AcctID=note.AcctID              
left join luRelationshipCode luRel on aa.RelationshipCode=luRel.RelationshipCode   
LEFT JOIN Address Addr ON Addr.ApplID = aa.ApplID AND Addr.AddrTypeID = 1  
WHERE  1 = 1 ' --this is in here so that the following statements in the WHERE clause can start with "AND (...)". 
-- IF @debug = 1 PRINT LEN(@SQL)  v_AOTInitialAccountFunding                
--SELECT @SQL = REPLACE(@SQL, CHAR(9), '') --remove tabs to save string size
IF @debug = 1 PRINT LEN(@SQL)

IF @SSN IS NOT NULL 
SELECT @sql = @sql + ' AND (ai.SSN = @xSSN OR REPLACE(ao.TaxID, ''-'', '''') = @xSSN)'     
IF @IncludeAliasName  <>1 AND @FName IS NOT NULL     
SELECT @sql = @sql + ' AND (ai.FName LIKE @xFName)'     
IF @IncludeAliasName  <>1 AND @LName IS NOT NULL     
SELECT @sql = @sql + ' AND (ai.LName LIKE @xLName)'   
IF @IncludeAliasName  <>0 AND @FName IS NOT NULL  
SELECT @sql = @sql + ' AND (ai.AliasFName LIKE @xFName OR ai.FName LIKE @xFName)'     
IF @IncludeAliasName  <>0 AND @LName IS NOT NULL     
SELECT @sql = @sql + ' AND (ai.AliasLName LIKE @xLName OR ai.LName LIKE @xLName)'     
IF @dtApplicationStart IS NOT NULL     
SELECT @sql = @sql + ' AND (CONVERT(char(10), acct.dtApplication, 101) >= @xdtApplicationStart)'     
IF @dtApplicationEnd IS NOT NULL     
SELECT @sql = @sql + ' AND (CONVERT(char(10), acct.dtApplication, 101) <= @xdtApplicationEnd)'     
IF @CompanyName IS NOT NULL  
SELECT @sql = @sql + ' AND (ao.CompanyName LIKE @xCompanyName)'     
IF @DaysInTask IS NOT NULL  
SELECT @sql = @sql + ' AND (DATEDIFF(day, awt.dtEnter, GETDATE()) >= @xDaysInTask)'   
IF @AcctNum IS NOT NULL  
SELECT @sql = @sql + ' AND (acct.AcctNum LIKE @xAcctNum)'  
IF @BranchNums IS NOT NULL  
--Can't use a parameter of the executesql for the list of affinity numbers.  
SELECT @sql = @sql + ' AND (acct.AcctAffinityNum IN (' + @BranchNums + ') OR luA.AffinityNum IN (' + @BranchNums + '))'  
IF @WorkflowID IS NOT NULL  
SELECT @sql = @sql + ' AND (w.WorkflowID = @xWorkflowID)'  
IF @OriginationID IS NOT NULL  
SELECT @sql = @sql + ' AND (a.OriginationID = @xOriginationID)'  
IF @QueueID IS NOT NULL  
SELECT @sql = @sql + ' AND (t.QueueID = @xQueueID)'  
IF @TaskStageIDs IS NOT NULL  
--Can't use a parameter of the executesql for the list of affinity numbers.  
SELECT @sql = @sql + ' AND (lts.TaskStageID IN (' + @TaskStageIDs + '))'               
IF @TaskIDs IS NOT NULL  
--Can't use a parameter of the executesql for the list of affinity numbers.  
SELECT @sql = @sql + ' AND (t.TaskID IN (' + @TaskIDs + '))'  
IF @DaysAged IS NOT NULL
SELECT @sql = @sql + ' AND ISNULL(cteAge.Age + 1, 0)  <= @xDaysAged'   
--SELECT @sql = @sql + ' AND (DATEDIFF(day, acct.dtApplication, GETDATE()) + 1 = @xDaysAged)'              
IF @LastActivityStart IS NOT NULL              
SELECT @sql = @sql + ' AND (CONVERT(char(10), awt.dtEnter, 101) >= @xLastActivityStart)'              
IF @LastActivityEnd IS NOT NULL              
SELECT @sql = @sql + ' AND (CONVERT(char(10), awt.dtEnter, 101) <= @xLastActivityEnd)'
IF @Market IS NOT NULL
SELECT @sql = @sql + ' AND (lam.Market = @xMarket OR acctLam.Market = @xMarket)'              
IF @EmailTypeIDs IS NOT NULL
SELECT @sql = @sql + ' AND (note.NoteReasonID IN (' + @EmailTypeIDs + '))' 
IF @SOAApplID IS NOT NULL   
SELECT @sql = @sql + ' AND asa.SOAApplID = @xSOAApplID UNION               
SELECT NULL ApplID, NULL AcctID, sa.dtAdded dtApplication, sap.FName, sap.MName, sap.LName, sap.SSN, sap.Email, NULL CompanyName,NULL DBAName,   
NULL TaxID, NULL AcctNum, 145 AcctAffinityNum, ''145'' AffinityNum, luA.AffinityName, NULL TaskDesc, NULL dtEnter,
NULL DaysInTask, NULL QueueDesc, NULL WorkflowID, ''SEI Online App''  WorkflowDesc,NULL OriginationID, NULL OriginationDesc, NULL dtCheckOut,   
NULL UserCheckOut, NULL GUIDCheckout, NULL TaskStageDesc, 
0, DATEDIFF(day, sa.dtAdded, GETDATE()) + 1 DaysAged, sa.SOAApplID,'' '',  '' '', '' '' dtEnter,  '' ''DecisionType,'' '' Market,  
'' ''Request,'' ''SourceAccountTypeDescription,'' ''FundingStatus,'' ''BrokerCode, '' ''TIN,'' ''BusPurpose,'' ''Note,'' ''t,  
'' ''t1,'' '' RelationshipCode, '' '' RelationshipCodeDesc  FROM SOAApplication sa LEFT JOIN AccountSOAApplication asa   
ON sa.SOAApplID = asa.SOAApplID  JOIN SOAApplicant sap ON sa.SOAApplID = sap.SOAApplID JOIN luAffinity luA ON luA.AffinityNum = ''145''   
WHERE asa.SOAApplID IS NULL AND sa.SOAApplID = @xSOAApplID AND sap.PrimaryContact = 1' 

IF @debug = 1
PRINT @sql

IF @debug = 1
PRINT @sql

SELECT @paramlist = 
'@xSSN    char(9),
@xFName   varchar(25),
@xLName   varchar(30),
@xdtApplicationStart datetime,
@xdtApplicationEnd  datetime,
@xCompanyName  varchar(50),
@xDaysInTask  int,
@xAcctNum   varchar(11),
@xWorkflowID  int,
@xOriginationID tinyint,
@xQueueID   int,
@xDaysAged  int,
@xMarket   varchar(50),
@xSOAApplID  int,  
@xLastActivityStart datetime,
@xLastActivityEnd datetime'

IF @Debug = 1 PRINT LEN(@SQL)

EXEC sp_executesql @sql, @paramlist,
@SSN,
@FName,
@LName,
@dtApplicationStart,
@dtApplicationEnd,
@CompanyName,
@DaysInTask,
@AcctNum,
@WorkflowID,
@OriginationID,  
@QueueID,  
@DaysAged,
@Market,
@SOAApplID,
@LastActivityStart,
@LastActivityEnd 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:58:08.323

因此，当您将[EXECUTE AS SELF](http://msdn.microsoft.com/en-us/library/ms188354%28v=sql.100%29.aspx)添加到过程中时，就相当于说“执行此过程，就好像创建它的人正在运行它一样”。因此，无论谁部署该程序（在任何主要帐户下），都将成为该程序使用的基础。

我假设您的部署策略是让管理员使用 sa 帐户运行 CREATE/ALTER 步骤。您的 DBA 可能遵循最佳实践并且没有 sa 帐户拥有服务器上的数据库（并且可能根本没有读取访问权限），因此您会收到安全错误。

鉴于所有这些，在您目前的情况下，您可能不会使用`EXECUTE AS SELF`，或者至少我怀疑是这样。就您何时希望在更一般的意义上使用它而言，很难给出一个笼统的答案。简短版本是，如果您（“您”是可以登录的主体）需要以**您**的权限级别运行对象，而不是调用者拥有的任何权限。

# android - 我们可以使android图标不可点击的android吗？

> ID：16030220
> 
> 赞同：0
> 
> 时间：2013-04-16T06:30:59.387
> 
> 标签：android, launcher, clickable

我正在尝试创建一个启动器应用程序，我希望其中一些图标不可点击。这在android中可能吗？

# jquery - jQuery：html（数据）不清除现有元素

> ID：16030226
> 
> 赞同：0
> 
> 时间：2013-04-16T06:31:29.077
> 
> 标签：jquery

我有`div`以下三个要素

```
<div id='branch-1'>
   <ul>
     <li><span>Parent-1</span></li>
     <li><span>Parent-2</span></li>
     <li><span>Parent-3</span></li>
   </ul>
</div>
<div id='branch-2'></div>
<div id='branch-3'></div> 
```

第一个`div`元素将与页面一起加载，如果用户单击，`Parent-1`则其子元素将在第二个加载`div`，类似地`Parent-2 and Parent-3`，使用`ajax`如下。

```
$("div#branch-1 ul li span").click(function () {
    $.ajax({
        type: 'POST',
        url: url,
        data: data,
        dataType: 'html',
        async: false,
        success: function (data) {
            $("div#branch-2").html(data);
            $("div#branch-3").empty();
        }
    });
}); 
```

同样，如果用户单击第二个`div`元素，那么我将`div`使用`ajax`如下方式在第三个中加载其子元素

```
$(document).on("click", "div#branch-2 ul li span"function () {
    $.ajax({
        type: 'POST',
        url: url,
        data: data,
        dataType: 'html',
        async: false,
        success: function (data) {
            $("div#branch-3").html(data);
        }
    });
}); 
```

**实际问题：**有时`$("div#branch-3").html(data);`不会清除现有数据，因此我之前尝试过以下语句`$("div#branch-3").html(data);`

```
 $("div#branch-3").html(""); // Not worked
 //OR
 $("div#branch-3").empty(); // Not worked
 //OR
 $("div#branch-3").contents().remove(); // Not worked 
```

如果我将以上内容`selector`从`div#branch-3`to`div#branch-3 ul`或`div#branch-3 li`or更改为以上`div#branch-3 span`所有语句都可以正常工作，

1.  为什么`html(data)`不能替换现有数据？
2.  在更改`selector`了为什么它清除现有元素之后，尽管我传递`parent element id`为`selector`

**添加附加信息：**正如我上面所说，**有时** `.html(data)`不会清除现有数据，以下是这种情况

假设`Parent-1`有两个孩子让我们说`Child-1,Child-2`，再`Child-1`有两个孩子`A,B`和`Child-2`三个孩子。`X,Y,Z`想想如果用户点击`Child-2`然后`X,Y,Z`显示在`branch-3 div`它的罚款，如果用户点击`Child-1`然后`X,Y`被替换`A,B`但`Z`仍然存在。如果我尝试在萤火虫中指向它的（Z）位置，那么它就会消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:46:37.567

尝试这个-

```
$("div#branch-3").html(markUp).trigger("create"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:09:47.630

实际上，正如我所想，您的问题是 -`success`未调用函数。要检查这个想法是否正确，请向您添加 alert("I'm in!") 您的成功：

```
 success: function (data) {
        alert("I'm in!");
        $("div#branch-3").html(data);
    } 
```

# javascript - Javascript - 动态添加的复选框在 Kendo 面板栏标题中未按预期工作

> ID：16030227
> 
> 赞同：2
> 
> 时间：2013-04-16T06:31:30.067
> 
> 标签：javascript, jquery, css, kendo-grid, panelbar

*我有这个在添加静态复选框时有效的[小提琴。](http://jsfiddle.net/5nX8r/45/)* 我正在为手风琴面板创建复选框，如下所示：

```
liID = "tab" + x;
$("<li id = '"+ liID +"' class='k-item k-last k-state-default' aria-expanded='false'><input type='checkbox' id='c" + x + "' class='cbSelect' /><label for='c" + x + "'><span  id='cbSelect" + x + "'></span>" + liID + "</label></li>").appendTo("#panelbar"); 
```

上面的 x 值是`for`循环`variable`。

我在复选框上使用了以下样式：

```
input[type="checkbox"]
{
    display:none;
}

input[type="checkbox"] + label span
{
    display:inline-block;
    width:14px;
    height:14px;
    margin:-1px 4px 0 0;
    vertical-align:middle;
    background:url('../images/checkBox.png') right top no-repeat;
    cursor:pointer;
    float:right;
    margin-top:10px;
    margin-right:10px;
}

input[type="checkbox"]:checked + label span 
{
    background:url('../images/checkBox.png') -1px top no-repeat;
} 
```

上面的 checkbox.png 图片如下： ![在此处输入图像描述](https://i.stack.imgur.com/CE1Wp.png)

它显示复选框，但在单击时不允许检查事件，因为它在允许之前首先打开选项卡。

我尝试过使用以下内容：

```
$("#panelbar").on("click", "input.cbSelect", function(evt) 
{
    evt.stopPropagation();
}); 
```

但我不确定我是否正确链接它，因为它与我使用隐藏的普通复选框链接`display:none;`

当普通复选框与新样式的复选框一起显示时，当单击原始复选框时，它会按预期工作。*我希望能够单击新创建的复选框并在其上使用 stopPropagation，而不是单击原始复选框*。

这是第一个问题，下一个是我正在为这样的网格创建一个复选框：

```
var chkBox =  "<input type='checkbox' id='cUpload1' class='cbSelect' /><label for='cUpload1'><span  id='cbSelectUpload'></span>test1</label>"; 
```

然后尝试将其添加到一个简单的 dataSourse 中，如下所示：

```
var uploadedFiles = 
[
    { 
        facility: "Sunrise medical Laboratories", 
        documentName:  "Lab Results",
        documentType: "PDF",
        selected: chkBox
    }
]; 
```

用于上述复选框的样式未应用于该复选框，因为没有显示任何内容。

任何想法为什么它不起作用？

顺便说一句，我正在尝试将上述所有内容实现到这个[小提琴](http://jsfiddle.net/OnaBai/rQZNr/21/)中。*上面的编码目前不在小提琴中。*

**任何帮助将不胜感激！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:41:16.383

您的第一个问题主要是由于与剑道的互动。选择器`"input.cbSelect"`不正确，因为您正在用仅标签的复选框替换原始复选框。所以实际上你点击的是标签而不是复选框本身。正确的是，`"li label span"`但即使那样它也行不通，因为您无法阻止剑道选择面板。

甚至

```
$("#panelbar").on("click", "label span", function(evt) {
    evt.stopImmediatePropagation();
    return false;
}) 
```

不会阻止剑道选择。

但是您实际上可以做的是使用 html 操作将子项与父项解除绑定，因此 kendo 处理程序不会触发：

**解决方案：**

在您的模板中替换

```
<span  id='cbSelect" + x + "'></span> 
```

和

```
<a href="#" id='cbSelect" + x + "'></a> 
```

并在您的输入 css 中`span`使用`a`.

a-Element 触发一个单独的动作，所以现在你可以停止剑道处理程序

```
$("#panelbar").on("click", "label a", function(evt) {
    evt.stopImmediatePropagation();
}); 
```

现在的问题是，通过单击标签来检查复选框也不起作用。所以我们必须通过扩展上面的处理程序来手动完成：

```
$("#panelbar").on("click", "label a", function(evt) {
    var chkbx = $(this).closest('li').find('input');
    chkbx.prop('checked', !chkbx.prop('checked'));
    evt.stopImmediatePropagation();
}) 
```

**工作示例：http:**
[//jsfiddle.net/Nitro3k/5nX8r/47/](http://jsfiddle.net/Nitro3k/5nX8r/47/)

**选择：**

如果您不希望标签内的链接，您还可以：

1.  完全删除跨度，直接设置标签样式并调用`return false;`而不是`evt.stopImmediatePropagation();`
2.  构建一个自定义复选框，因为`js`无论如何您都必须触发它：

删除标签，改为样式块（例如`.checkbox`）以及检查的类（例如`.checkbox.checked`）。围绕复选框构建块：

```
<div class="checkbox"><input type='checkbox' id='c1' class='cbSelect' /></div> 
```

并添加处理程序：

```
$(document).on('click', '.checkbox', function(){
    var chkbx = $(this).find('input');
    chkbx.prop('checked', !chkbx.prop('checked'));
    $(this).toggleClass('checked');
}) 
```

# javascript - div 向右浮动在 IE 中不起作用

> ID：16030230
> 
> 赞同：2
> 
> 时间：2013-04-16T06:31:52.010
> 
> 标签：javascript, html

我必须在一行中放置两个 div，一个 div 放在左边，另一个放在右边。下面是我使用的代码。

```
var sendDate = document.createElement('div');
sendDate.style.width = "40%";
sendDate.style.cssFloat = "left";

var dueDate = document.createElement('div');
dueDate.style.width = "40%";
dueDate.style.cssFloat = "right"; 
```

但这在 FF 和 Chrome 中可以正常工作，但在 IE 中不行。在 IE 中，到期日期位于发送日期下方，而不是与发送日期右侧对齐。我花了足够的时间试图找到解决方案，但没有运气。我也尝试清除 senddate 的浮动，但它不起作用。请让我知道如何在 IE 中实现这一点。

蒂亚...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:00:53.050

尝试这样的事情

CSS

```
.left { float:left; }
.right { float:right; } 
```

JAVASCRIPT代码

```
var sendDate = document.createElement('div');
sendDate.style.width = "40%";
sendDate.className = "left"; 
```

或者使用[jquery](http://jquery.com/)来管理你的浏览器兼容性

# sql-server - 加权标准差

> ID：16030235
> 
> 赞同：0
> 
> 时间：2013-04-16T06:32:12.360
> 
> 标签：sql-server, tsql, standard-deviation

您好我想计算 SQL Server 2012 中的加权标准差。

SQL Server 中是否有任何内置函数作为标准偏差或如何在 SQL Server 中构建用户定义函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:25:47.553

没有内置函数（[顺便问过](https://stackoverflow.com/questions/10947180/weighted-standard-deviation-in-sql-server-without-aggregation-error)一个类似的问题，虽然没有公认的答案）。您最明显的选择是：

*   编写自己的 TSQL 代码
*   使用 .NET编写[用户定义的聚合函数](http://msdn.microsoft.com/en-us/library/ms190678.aspx)
*   使用客户端应用程序而不是数据库进行计算

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T18:04:49.057

有 - 查看[MSDN上的文档](http://msdn.microsoft.com/en-us/library/ms190474.aspx)

来自 MSDN 的示例：

```
USE AdventureWorks2012;
GO
SELECT STDEV(Bonus)
FROM Sales.SalesPerson;
GO 
```

这是另一个让您入门的方法 [http://blog.sqlauthority.com/2008/01/20/sql-server-introduction-to-statistical-functions-var-stdevp-stdev-varp/](http://blog.sqlauthority.com/2008/01/20/sql-server-introduction-to-statistical-functions-var-stdevp-stdev-varp/)

# blackberry - 如何在使用 Eclipse 插件的 Blackberry 项目中动态创建类？

> ID：16030236
> 
> 赞同：1
> 
> 时间：2013-04-16T06:32:14.783
> 
> 标签：blackberry

如何在使用 Eclipse 插件的 Blackberry 项目中动态创建类？

我的要求：假设单击一个按钮，应该创建一个具有给定名称的新类。应该添加方法和字段，然后我应该使用该类对象。这在黑莓中可能吗？

以下是我已经完成的步骤。

1.  获取第三方 jars，如 ASM、javassist
2.  尝试在项目中使用它们

但是，部署到设备时出现验证错误。那么，RIM 中是否有本机 api 或任何其他替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:19:40.760

BlackBerry Java 不支持您在标准 Java (J2SE) 中所期望的全套反射功能。

因此，您将无法动态创建类、添加方法然后调用它们。

在大多数情况下，黑莓是 Java 1.3。如果您调整您的开发环境，您可以*在编译时*访问一些更新的功能。但是，就运行时代码而言，您仅限于 1.3。

[Javassist](https://source.jboss.org/browse/Javassist)基于 BlackBerry 所拥有的 1.3 运行时中不存在的 Java API，因此它不会有太大帮助:(

希望其他人能加入进来，但我不知道这在 BlackBerry Java 上是否可行。

# c# - Knockout.js 加解密前端模型数据

> ID：16030238
> 
> 赞同：0
> 
> 时间：2013-04-16T06:32:15.960
> 
> 标签：c#, asp.net-mvc-3, razor, knockout.js, knockout-mapping-plugin

在使用 knockout.js 和 knockout.mapping 时，我将模型数据传递到视图并使用“@Html.Raw(Json.Encode(Model));”将其存储为 Javascript 变量。我的问题是，加密和解密模型数​​据数组的最有效方法是什么，防止用户通过前端查看它？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:42:43.350

如果其敏感数据不发送到客户端，则将其放在服务器端用户会话中

如果将其发送给客户端非常重要，则使用 cookie，加密 cookie 并将其保存在客户端，在收到请求后，提取、解密 cookie。

现在，如果您真的真的希望您当前的代码能够正常工作，那么请加密您的模型属性，例如

```
public class Sensitive{
 public String Name{  
   set{
    this.Name= YourEncryptionFunc(value)
   }
  get{
   return DecryptFunc(this.Name);
  }
  }
} 
```

序列化此类并将其发送给客户端

# ios - 合并uilabel和uiimageview

> ID：16030240
> 
> 赞同：1
> 
> 时间：2013-04-16T06:32:19.640
> 
> 标签：ios, merge, uiimageview, uilabel

我从相册中挑选了一张图片并将其放入`UIImageView`名为 imageView 的图片中，然后在图片上添加了一些文本，`UITextView`用作输入源，并`UILabel`在 uiimageview 顶部添加了一些文本以显示文本。

到目前为止，一切都很好。

现在我正在尝试合并标签和图像视图，以便用它做其他事情，但我没有让它工作。我已经尝试了一些针对类似问题的解决方案，但它们对我不起作用。

我试过这个

```
UIGraphicsBeginImageContextWithOptions(_imageView.bounds.size, NO, 0.0); //retina res
[self.imageView.layer renderInContext:UIGraphicsGetCurrentContext()];
[_displaylabel.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext(); 
```

它告诉我收到的类型“`CAlayer`例如消息是前向声明”。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-15T07:45:00.143

```
 UIImageView *imgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background.png"]];
 UIView *tempView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, imgView.frame.size.width, imgView.frame.size.height)];
    [tempView addSubview:imgView];

UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(tempView.frame.size.width/2, 0, 200, tempView.frame.size.height/2)];
[label setText:@"Hello... You there"];
[label setTextColor:[UIColor blackColor]];
[label setTextAlignment:NSTextAlignmentLeft];
[label setBackgroundColor:[UIColor clearColor]];
[tempView addSubview:label];

 UIGraphicsBeginImageContext(tempView.bounds.size);
    [tempView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *finalImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:05:18.067

尝试这个：

```
UIGraphicsBeginImageContextWithOptions(_imageView.bounds.size, NO, 0.0); //retina res
[self.imageView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

确保 UILabel 是 UIImageView 的子视图，以便渲染层将包括所有子层（包括 UILabel）。好像你忘了包括 UIGraphicsEndImageContext(); 也是，这可能是问题所在

# google-glass - 我如何在 Google API 控制台上查看 Google Mirror API

> ID：16030245
> 
> 赞同：3
> 
> 时间：2013-04-16T06:32:43.407
> 
> 标签：google-glass, google-mirror-api, google-api-console

我关注了这篇文章：[https](https://developers.google.com/glass/quickstart/java) ://developers.google.com/glass/quickstart/java 并尝试创建一个 Google API 控制台项目。

但是在“服务”选项卡中，我没有看到 Google Mirror API 来启用它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-22T21:55:34.513

再试一次。在您提出问题时，Mirror API 位于白名单后面，但该白名单已被删除。现在任何人都可以启用 Mirror API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:53:49.703

似乎并非所有人都可以使用。按照这个线程，它变得清晰。 [https://plus.google.com/+GoogleDevelopers/posts/cwWuUY6xYKW](https://plus.google.com/+GoogleDevelopers/posts/cwWuUY6xYKW)

但是，您似乎可以在[https://developers.google.com/glass/playground](https://developers.google.com/glass/playground)上尝试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-12T01:01:44.150

我今天刚拿起我的 Glass，一旦你拿起，他们就会手动启用 Mirror 控制台。即使他们将我的 API 列入白名单，我的帐户也需要大约 3 个小时才能激活。

# wordpress - Fancybox - Wordpress 图片说明

> ID：16030249
> 
> 赞同：0
> 
> 时间：2013-04-16T06:32:49.110
> 
> 标签：wordpress, fancybox

我试图弄清楚如何使用fancybox打开图像，但我需要在图像旁边有一个带有一些文本的div。我需要加载的文本是图像的标题，因此它不是内联文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:47:31.990

你至少应该先尝试。

首先，下载 Fancybox 并添加到 WordPress 主题头（`index.php`或者`header.php`，取决于您的主题结构）。

然后，调用 Fancybox 函数添加链接以弹出 Fancybox。标题可以通过以下方式找到：

```
$args = array( 
    'post_type'     => 'attachment', 
    'numberposts'   => -1, 
    'post_status'   => null, 
    'post_parent'   => $post->ID 
); 
// get all attachments
$attachments = get_posts($args);
foreach($attachments as $attachment) {
  $caption = $attachment->post_excerpt;
  $title = $attachment->post_title;
  // use these information in Fancybox with your logic
} 
```

# sql - SQL 在 SELECT 中生成缺失记录

> ID：16030250
> 
> 赞同：1
> 
> 时间：2013-04-16T06:32:59.390
> 
> 标签：sql, sql-server-2000, temp-tables

使用 MS SQL Server 8.0.760 (2000)

我有一个这样的表：

```
Table A
Day       | Hour | Value
2012-10-01| 12   | 780
2012-10-01| 14   | 678
2012-11-02| 08   | 123
2012-11-02| 09   | 473 
```

预期结果应该是：

```
Day       | Hour | Value
2012-10-01| 00   | 0
2012-10-01| 01   | 0
2012-10-01| 02   | 0
2012-10-01| ..   | ..
2012-10-01| 12   | 780
2012-10-01| 13   | 0
2012-10-01| 14   | 678
2012-10-01| ..   | ..
2012-10-01| 22   | 0
2012-10-01| 23   | 0
2012-10-01| 24   | 0
2012-11-02| 00   | 0
2012-11-02| 01   | 0
2012-11-02| 02   | 0
2012-11-02| ..   | ..
2012-11-02| 08   | 123
2012-11-02| 09   | 473
2012-11-02| ..   | ..
2012-11-02| 22   | 0
2012-11-02| 23   | 0
2012-11-02| 24   | 0 
```

所以缺少的时间是用零值生成的。

任何想法？

**编辑 1**

试过这个：

```
DECLARE @tmpHours TABLE
(
tmpHour varchar(2)
)

INSERT INTO @tmpHours VALUES ('00')
INSERT INTO @tmpHours VALUES ('01')
...
INSERT INTO @tmpHours VALUES ('23')
INSERT INTO @tmpHours VALUES ('24')

SELECT * FROM [A]
  FULL JOIN @tmpHours tmp ON tmp.[tmpHour] = [A].[Hour]
  ORDER BY [Day], [Hour], [tmpHour] 
```

但这会产生：

```
Day Hour    Value   tmpHour
NULL    NULL    NULL    00
NULL    NULL    NULL    01
NULL    NULL    NULL    02
NULL    NULL    NULL    03
NULL    NULL    NULL    04
NULL    NULL    NULL    05
NULL    NULL    NULL    06
NULL    NULL    NULL    07
NULL    NULL    NULL    10
NULL    NULL    NULL    11
NULL    NULL    NULL    13
NULL    NULL    NULL    15
NULL    NULL    NULL    16
NULL    NULL    NULL    17
NULL    NULL    NULL    18
NULL    NULL    NULL    19
NULL    NULL    NULL    20
NULL    NULL    NULL    21
NULL    NULL    NULL    22
NULL    NULL    NULL    23
NULL    NULL    NULL    24
2012-10-01 00:00:00.000 12  780 12
2012-10-01 00:00:00.000 14  678 14
2012-11-02 00:00:00.000 08  123 08
2012-11-02 00:00:00.000 09  473 09 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:42:33.293

您可以创建一个名为 container your hours 的表（可能是临时表）（您的示例显示从 00 到 24 的 25 小时，但我想您想要 24 小时）。`Table A`然后，您可以在HOURS 表之间进行外部连接。这将生成`NULL`值而不是 0 值。如果需要，您可以使用函数将 NULL 值转换为 0。

*编辑*将答案重构为单个 SQL 查询：

```
SELECT X.*, A.VALUE
FROM  A
RIGHT OUTER JOIN
(
SELECT *
FROM
       (SELECT DISTINCT A.DAY FROM A) DAYS,
       (SELECT 0 HOUR
        UNION ALL SELECT 1 HOUR
        UNION ALL SELECT 2 HOUR
        UNION ALL SELECT 3 HOUR
        UNION ALL SELECT 4 HOUR
        UNION ALL SELECT 5 HOUR
        UNION ALL SELECT 6 HOUR
        UNION ALL SELECT 7 HOUR
        UNION ALL SELECT 8 HOUR
        UNION ALL SELECT 9 HOUR
        UNION ALL SELECT 10 HOUR
        UNION ALL SELECT 11 HOUR
        UNION ALL SELECT 12 HOUR
        UNION ALL SELECT 13 HOUR
        UNION ALL SELECT 14 HOUR
        UNION ALL SELECT 15 HOUR
        UNION ALL SELECT 16 HOUR
        UNION ALL SELECT 17 HOUR
        UNION ALL SELECT 18 HOUR
        UNION ALL SELECT 19 HOUR
        UNION ALL SELECT 20 HOUR
        UNION ALL SELECT 21 HOUR
        UNION ALL SELECT 22 HOUR
        UNION ALL SELECT 23 HOUR
        ) HOURS
) X
ON X.DAY = A.DAY AND X.HOUR = A.HOUR 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:49:37.457

尝试以下步骤。这将是一个非常动态的。（注意：同一日期 00 和 24 不会出现）

```
--Create Table :
Create Table #Table
(
    Day Date,
    Hour Int,
    Value Int
)
Go

-- Insert Values :
Insert into #Table Values('2012-10-01','12','780')
Insert into #Table Values('2012-10-01','14','678')
Insert into #Table Values('2012-10-02','08','123')
Insert into #Table Values('2012-10-02','09','473')
Go

--View Data :
Select * from #Table

Declare @TempTable as Table
(Day Date,Hour Int,Value Int)

Declare @Date Date
Declare @i Int
Set @i = 0

--Using Cursor :
Declare cur  Cursor
for
Select Distinct Day from #Table 

Open cur
Fetch Next From cur Into  @Date

While @@Fetch_status = 0
BEGIN
      While (@i <=23)
      Begin
            If not exists (Select 1 from #Table Where Day =@Date and Hour = @i )
            Begin
                    Insert into @TempTable Values (@Date,@i,0)      
            End 
            Else
            Begin
                Insert into @TempTable 
                Select Day,Hour,Value from #Table Where Day =@Date and Hour = @i                    
            End         

            Set @i = @i + 1         
        End
        Fetch Next From cur Into @Date
End      
Close cur
Deallocate cur

--Results :
Select * from @TempTable

--Clean Up :
Drop Table #Table 
```

# php - PHP：使用 Golang 处理 websocket 连接

> ID：16030251
> 
> 赞同：5
> 
> 时间：2013-04-16T06:33:00.270
> 
> 标签：php, websocket, go

我有一个相当大的 Web 应用程序构建，使用 SproutCore 和 PHP 作为后端。我现在想要的是使用 websockets 来实时更新我的​​客户端应用程序。据我所知，PHP 处理持久连接真的很糟糕。所以我一直在想，我可以使用 Go 来处理 websockets 连接，并在每次收到请求时调用我的 PHP 脚本（这个[包](https://github.com/mikespook/goemphp)似乎使它成为可能）。

所以我的第一个问题是，你们认为这是一个好主意（也是一个可行的主意，我找不到这样做的人）还是我应该坚持使用 PHP？

如果我使用 Go 来处理 websockets 连接，我也一直在想我可以逐步从 PHP 转移到只使用 Go（因为它比 PHP 快得多）。如果我这样做，我将不得不能够从 PHP 调用一些 Go 包。这可以用 PHP`exec`函数完成吗？有没有更好的办法 ？再说一遍，这是个好主意吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T06:37:32.553

Go 非常适合 websocket 服务器。我已经在 Go 中构建了 websocket 服务器，并且对它的运行方式非常满意。我有一项服务每月在 Go websocket 服务器上处理 30 万用户，它几乎不使用亚马逊 AWS 微实例 1% 的 CPU。再高兴不过了。

Websockets 确实需要像 Go 和 Node.js 这样的事件驱动框架来最大化服务器资源。像 PHP 这样的分叉 Web 进程比事件驱动框架消耗更多的资源。

如果您需要在某些时候从 PHP 调用 Go，我建议使用 API 调用。虽然`exec`也可以。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-13T17:41:24.540

这是一个老问题，但我在这个问题上的两分钱......

有一个非常好的 php 库可以完全满足您的要求 - websockets。它被称为[棘轮](http://socketo.me/)。我不会使用 node.js（过度炒作）或者当 php 可以做完全相同的事情并且它是我最熟悉的语言时去。在大多数情况下，与 websockets 相比几乎没有性能提升是不值得切换堆栈的。

如果您打算使用 Ratchet，其他有用的链接：

*   后端 -[棘轮示例](https://github.com/cboden/Ratchet-examples)
*   前端 -[高速公路 WS](http://autobahn.ws/js/)

# c# - Linq 替换 dataTable 值

> ID：16030257
> 
> 赞同：0
> 
> 时间：2013-04-16T06:33:24.963
> 
> 标签：c#, asp.net, linq

我有一个如下所示的数据表：

```
 ID Name FKID1 FKID2
 1  ABC  -1    -1
 2  ABD  -1    -1
 3  ABE  -1     2
 4  BCD   1     3 
```

我如何使用 linq 替换数据表值，如下所示

```
 ID Name FKID1 FKID2
 1  ABC        
 2  ABD  
 3  ABE         2
 4  BCD   1     3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:37:38.303

试试这个

```
IEnumerable<DataRow> rows = from row in DataTableObj.AsEnumerable()
                              select row;
foreach (DataRow row in rows)
{
   if(Convert.ToInt32(row["FKID1"])==-1)
    row["FKID1"] = DBNull.Value;
   if(Convert.ToInt32(row["FKID2"])==-1)
    row["FKID2"] = DBNull.Value;
} 
```

# java - Java 方法按值传递问题

> ID：16030261
> 
> 赞同：0
> 
> 时间：2013-04-16T06:33:33.947
> 
> 标签：java

当我`bar(Map map)`从当前`foo(...)`方法调用我的方法时，我遇到了以下行为，其中 bar() 表示 map 为空。

```
private void foo() {
  Map map = new Map(); // pseudocode
  // add (key, value)'s to map
  printMap(map); // prints key and values
  Map newMap = bar(map);
  ...
  System.out.println(newMap.size()); // returns 0  
} // end foo();

private Map bar(Map map) {
  printMap(map); // return empty
  ...
} 
```

**编辑**：可能是这个打印方法的`it.remove()`调用吗？当我删除这个电话时，我不再有问题了。

```
private void printMap(Map mp) {
    Iterator it = mp.entrySet().iterator();
    while (it.hasNext()) {
        Map.Entry pairs = (Map.Entry)it.next();
        logger.info(pairs.getKey() + " = " + pairs.getValue());
        it.remove(); // avoids a ConcurrentModificationException
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T06:51:06.817

您明确删除项目：

```
 it.remove(); 
```

然后你将有一个空列表。因为您`map`通过引用传递给该方法。

要处理异常，请使用`try/catch`块或`throw`异常输出。

为避免并发修改，您应该使用同步机制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T06:55:30.280

一个常见的混淆是将其`Map`视为一个对象，就像在 C++ 中一样。它不是。它是对对象的引用。这意味着当您通过*value 传递引用*时，只会复制引用。如果将此引用更改为另一个 Map，则不会影响调用者。但是，如果您访问引用并更改对象的内容，调用者可以看到此更改。

在您的情况下，您正在删除地图的条目，因此当您返回调用者时会看到一个空地图。

顺便说一句，打印地图你需要做的就是

```
private void logMap(Map<?,?> map) {
    for(Map.Entry<?,?> entry : map.entrySet())
        logger.info(entry); // logs; key = value
} 
```

# c - 如何在 C 函数中使某些参数可选

> ID：16030268
> 
> 赞同：0
> 
> 时间：2013-04-16T06:34:17.843
> 
> 标签：c, parameters, default-value

我有一种情况，我希望函数的参数之一是可选的。我想知道如何实现它..？

```
 int mapgw_cm_trace(int trapLog, char *pcMsgId, ...) 
```

我希望*traplog*参数是可选的。

或者换个角度来看，如果在函数调用中未发送此参数，我将此参数设置为默认值（例如 1）...否则使用在函数调用中发送的值。是否有可能实现这一目标..？我不想使用*va_args()*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T06:40:56.090

VA 列表不好的原因有很多，最明显的是它们的类型安全性很差。避开他们。

在 C 中执行此操作的常用方法是记录函数，说如果`trapLog`具有 this 或 that 的值，则不会使用它。如果它可能具有任何值，那么您可以将函数重写为：

```
int mapgw_cm_trace (const int* trapLog, char *pcMsgId) 
```

并记录`trapLog == NULL`它是否不会被使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:32:32.477

除了可选参数的语言功能（在这里不起作用，因为他们希望您将这些参数放在最后）之外，总是有可能编写另一个函数。

```
int mapgw_cm_trace(int trapLog, char *pcMsgId)

int mapgw_cm_trace_with_default_traplog(char *pcMsgId)
{
    // put your default as first parameter
    return mapgw_cm_trace(0, pcMsgId)
} 
```

# c# - 将位图的内容粘贴到 PictureBox 中

> ID：16030269
> 
> 赞同：0
> 
> 时间：2013-04-16T06:34:17.557
> 
> 标签：c#, bitmap, copy, picturebox, paste

我目前正在编写一个小绘图应用程序，用户可以在其中绘制面板。我正在使用选择工具，希望能够选择面板的某个区域，然后将此选定区域直接粘贴到我在面板右侧的 PictureBox 中。

我的问题是我的代码目前无法正常工作，当我尝试粘贴从面板创建的位图时，我在 PictureBox 中得到一个大的红色 X 而不是实际图像。我知道图像正在正确地复制到位图，因为我尝试在其周围放置一些代码以将其作为 jpeg 保存到磁盘，然后查看图像，并且一切正常。

这是我的代码：

```
private void tbCopy_Click(object sender, EventArgs e)
{
    int width = selectList[0].getEnd().X - selectList[0].getInitial().X;
    int height = selectList[0].getEnd().Y - selectList[0].getInitial().Y;

    using (Bitmap bmp = new Bitmap(width, height))
    {
        pnlDraw.DrawToBitmap(bmp, new System.Drawing.Rectangle(
                                      selectList[0].getInitial().X,
                                      selectList[0].getInitial().Y, 
                                      width, height));
        pbPasteBox.Image = bmp;             
    }
} 
```

宽度和高度只是我要复制的区域的尺寸，而 selectList 是一个列表，其中包含一个对象，其中包含我要复制的区域的坐标。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T06:47:39.417

您的问题是，`using(){}`当使用大括号内的代码完成时， () 内的对象被丢弃，因为它被认为不再需要。

只需卸下支架即可`Bitmap bmp = new Bitmap(width, height)`解决您的问题

# batch-file - 从在线存储 xcopy

> ID：16030271
> 
> 赞同：0
> 
> 时间：2013-04-16T06:34:20.437
> 
> 标签：batch-file, xcopy

有没有办法通过在 Windows XP 上使用 *.bat 文件将一些文件从内部在线存储复制到本地驱动器？
由于一些奇怪的内部限制，我只能使用 *.bat 文件来执行此操作。要复制的文件的路径有点像“ [http://files.in-house/section/linkages](http://files.in-house/section/linkages) ”

所以我尝试了 xcopy (xcopy goto.in-house/section/linkages U:\linkages) 的任何变体，带引号，不带等，但它不起作用
a) 有没有办法做到这一点？
b) 怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:55:07.293

非常类似于在 SuperUser.com 上提出的问题，请[点击此处](https://superuser.com/questions/59465/is-it-possible-to-download-using-the-windows-command-line)。接受的[答案](https://superuser.com/a/59489)使用 vbscript，它并非安装在所有 WinXP 系统中。要检查您是否拥有它，只需`cscript`在命令行提示符处键入。如果你需要下载它，它在[这里](http://www.microsoft.com/en-us/download/details.aspx?id=8247)。

第二个答案依赖于`bitsadmin`，它不是 XP 的一部分，但可以通过[Windows XP Service Pack 2 Support Tools](http://www.microsoft.com/en-us/download/details.aspx?id=18546)获得。

# batch-file - 批处理脚本变量是这样打印的

> ID：16030275
> 
> 赞同：1
> 
> 时间：2013-04-16T06:34:29.210
> 
> 标签：batch-file

我编写了一个创建文件夹的批处理脚本。路径作为输入参数给出，文件夹名称是今天的日期。

```
for /f "tokens=2-4 delims=/ " %%a in ('date /T') do set year=%%c
for /f "tokens=2-4 delims=/ " %%a in ('date /T') do set month=%%a
for /f "tokens=2-4 delims=/ " %%a in ('date /T') do set day=%%b
set TODAY=%day%_%month%_%year%
mkdir %1% %TODAY% 
```

我得到的输出如下：

```
arvind_test.bat C:\Users\M1015807\Desktop\logs\ C:\Users\M1015807\Desktop\logs\

C:\Users\M1015807\Desktop\zip\test>for /F "tokens=2-4 delims=/ " %a in ('date /T') do set year=%c

C:\Users\M1015807\Desktop\zip\test>set year=2013

C:\Users\M1015807\Desktop\zip\test>for /F "tokens=2-4 delims=/ " %a in ('date /T') do set month=%a

C:\Users\M1015807\Desktop\zip\test>set month=04

C:\Users\M1015807\Desktop\zip\test>for /F "tokens=2-4 delims=/ " %a in ('date /T') do set day=%b

C:\Users\M1015807\Desktop\zip\test>set day=16

C:\Users\M1015807\Desktop\zip\test>set TODAY=16_04_2013

C:\Users\M1015807\Desktop\zip\test>mkdir C:\Users\M1015807\Desktop\logs\TODAY
A subdirectory or file C:\Users\M1015807\Desktop\logs\TODAY already exists.
>> was unexpected at this time. 
```

任何人都可以帮助请..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T06:40:46.703

数字`%`变量不应该被包围`%`，它们只是有一个前导`%`。表达方式：

```
mkdir %1% %TODAY% 
```

具有以下要素：

*   `mkdir`;
*   `%1`（注意，*不*使用以下`%`符号）；
*   `% %`（最有可能是一个空字符串）；
*   TODAY（*文字*字符串`TODAY`）；和
*   最后是一个裸`%`（根据记忆，它也给你一个空字符串）。

您可以在以下脚本中看到这一点：

```
@echo off
set TODAY=blah
echo mkdir %1% %TODAY% 
```

如果您将其称为`myscript.cmd hello`，它将为您提供：

```
mkdir helloTODAY 
```

将脚本更改为：

```
@echo off
set TODAY=blah
echo mkdir %1 %TODAY% 
```

`%`（在之后立即删除`1`）会让您更像您想要的（尽管您的*实际*代码可能具有`\`分隔路径和目录，而不是根据您的示例的空格）：

```
mkdir hello blah 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T17:35:28.033

关于您的代码的一些观察，以及最后的重要一点。

`%date%`变量显示`date /t`命令的相同信息，但前者效率更高。在 FOR 中执行命令需要 cmd.exe 的副本和临时文件的创建。变量值的替换是立即的：

```
for /f "tokens=2-4 delims=/ " %%a in ("%date%") do ... 
```

`tokens=2-4`*在同一个 FOR 命令中*提供对三条信息的访问，因此不需要执行三次：

```
for /f "tokens=2-4 delims=/ " %%a in ("%date%") do (
   set year=%%c
   set month=%%a
   set day=%%b
) 
```

如果您使用三个先前的变量仅用于组装 TODAY 变量，则不需要这些变量：

```
for /f "tokens=2-4 delims=/ " %%a in ("%date%") do set TODAY=%%b_%%a_%%c 
```

如果您使用 TODAY 变量的唯一目的是创建文件夹，那么也没有必要：

```
for /f "tokens=2-4 delims=/ " %%a in ("%date%") do mkdir %1 %%b_%%a_%%c 
```

现在重要的一点：

`mkdir`如果它们被空格分隔，命令会创建分隔文件夹。此命令创建*两个*文件夹：`mkdir one two`. 您应该消除路径和文件夹名称之间的空格：`mkdir %1%%b_%%a_%%c`. 但是，如果第一个参数中给出的路径可能包含空格，则必须将其括在引号中：`arvind_test.bat "C:\Users\Joe Doe\M1015807\Desktop\logs"`，但必须以这种方式从参数中删除引号`%~1`：并且完整的文件夹名称必须括在引号中：

```
for /f "tokens=2-4 delims=/ " %%a in ("%date%") do mkdir "%~1%%b_%%a_%%c" 
```

# android - 如何在内存中创建文件夹

> ID：16030277
> 
> 赞同：-2
> 
> 时间：2013-04-16T06:34:33.620
> 
> 标签：android

这是我的应用程序内存路径`/data/data/com.myexample.folder/files` ，它工作正常，但是当我创建一个这样的新目录时 `/data/data/com.myexample.folder/files/photos`，它没有被创建，我想知道怎么了？如何在应用程序中创建一个新文件夹。

```
public void loadFeed();
String file paths="data/data/com.myapplication.myfolder/files";
File outputFiles= new file(filePaths);
File files1=outputFile1.listFiles(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-11T19:44:10.173

对于您自己的文件存储目录：

```
FileOutputStream outStream = null;
File sdCard = Environment.getExternalStorageDirectory();
File dir = new File(sdCard.getAbsolutePath() + "/camtest");
dir.mkdirs();
String fileName = String.format("%d.jpg", System.currentTimeMillis());
File outFile = new File(dir, fileName);
outStream = new FileOutputStream(outFile);
bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outStream);
outStream.flush();
outStream.close();
Intent intent = new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);
intent.setData(Uri.fromFile(file));
sendBroadcast(intent); 
```

为了保存在 android 公共文件夹中的子目录中，请说 DCIM：

使用文件文件 = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);

主要是确保你的应用开启了存储权限：

转到设备设置>设备>应用程序>应用程序管理器>“您的应用”>权限>启用存储权限！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:41:22.810

使用文件名和操作模式调用[openFileOutput() 。](http://developer.android.com/reference/android/content/Context.html#openFileOutput%28java.lang.String,%20int%29)

```
 String FILENAME = "hello_file";
    String string = "hello world!";

    FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
    fos.write(string.getBytes());
    fos.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T06:42:40.723

只需使用这种方式：

```
public void createFile(Context c) throws IOException{
     String FILENAME = timeStamp();
     String string = "hello world!";

     FileOutputStream fos = c.openFileOutput(FILENAME, Context.MODE_PRIVATE);
    fos.write(string.getBytes());
    fos.close();

} 
```

# integration - 什么是交通工具

> ID：16030279
> 
> 赞同：0
> 
> 时间：2013-04-16T06:34:44.237
> 
> 标签：integration, wso2esb

假设有一个已经实现的消息传递协议连接器。这使我们能够使用各种场景发送消息，例如，（无加密，无签名），（无加密，签名），（加密，无签名），（MDN over HTTP，无签名），（基于 HTTP 的 MDN，签名）等我们是否必须在为 wso2Esb 编写的自定义传输中处理这些场景？我们可以将这些连接器与传输集成并从中提取消息吗？这是正常的做法吗？请帮忙 。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:28:47.563

使用非常高级的传输，您将传入的消息/信息传输到 XML 信息集，然后将其传递给处理引擎。在 ESB 内部，我们仅处理 XML 消息，因此在传输 Listner 内部，我们将传入消息转换为该公共 XML 信息集SOAP 然后注入到处理引擎。在 Transport Sender 中，我们转换回 Sender Transports Message 模型或协议。对于您提到的一些高级用例，您可以参考 FIX 传输 [1] 作为起点。

请参阅此 [2] 以获取完整的传输目录，这将使您了解此类类似传输是如何可用的。

[1] [http://wso2.org/library/3837#fix_implementation](http://wso2.org/library/3837#fix_implementation)

[2] [http://docs.wso2.org/wiki/display/ESB460/WSO2+Carbon+Transports](http://docs.wso2.org/wiki/display/ESB460/WSO2+Carbon+Transports)

# stack - PInvoke 不平衡堆栈

> ID：16030292
> 
> 赞同：0
> 
> 时间：2013-04-16T06:35:08.797
> 
> 标签：stack, pinvoke

我有一个 c++ 函数要导出为 .dll 以使用：

```
static __declspec(dllexport) void DiagEncrypt(
    UCHAR              * ptrDataByte, 
    size_t               numBytes, 
    ACCESS_LEVEL         accLevel);
void DiagnosticCrypto::DiagEncrypt(UCHAR * ptrDataByte, size_t numBytes, ACCESS_LEVEL accLevel) 
```

我将它导入到我的 C# 程序中：

```
[DllImport("DiagnosticCryptoDll.dll", EntryPoint = "?DiagEncrypt@DiagnosticCrypto@DiagnosticCryptoDll@@SAXPAEIW4ACCESS_LEVEL@12@@Z", SetLastError = true, CallingConvention = CallingConvention.StdCall)]
static extern void DiagEncrypt(
    //[MarshalAs(UnmanagedType.LPArray)] byte[] data,
    IntPtr  data,
    uint    numBytes, //UintPtr numBytes,
    ACCESS_LEVEL accLevel); 
```

当我执行它时，会出现堆栈不平衡的错误。

有人可以帮我找出错误在哪里吗？

标记的部分是我尝试过的，但失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:12:32.727

您的 C++ 代码使用`cdecl`调用约定，但您的 p/invoke 使用`stdcall`. 更改或其他以匹配。

例如，您可以将 p/invoke 更改为使用`CallingConvention.Cdecl`.

我要发表的其他评论是：

*   最好使用它`extern "C"`来抑制 C++ 名称修改。尽管在评论中，汉斯主张修改。
*   您已映射`size_t`到`uint`. 这在 32 位上可以正常工作，但在 64 位上不行，64`size_t`位宽。我建议你`UIntPtr`在这里使用。
*   您确定该函数调用了 SetLastError。它不是 Windows 功能，所以我猜它不是。

# java - Alfresco 社区版的扫描功能？

> ID：16030296
> 
> 赞同：3
> 
> 时间：2013-04-16T06:35:23.167
> 
> 标签：java, alfresco, scanning, alfresco-share

我正在为 alfresco 4.2 社区添加工作。现在我必须使用某种扫描功能来扫描文档的硬拷贝并上传。

我用谷歌搜索但没有找到任何好的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T06:00:07.567

除了 Alfresco，您还需要一个所谓的捕获软件来处理扫描、转换为 PDF、OCR 和归档到 Alfresco。市场上有几种不同质量和不同概念的解决方案。

这是我知道的按成本顺序排列的（不完整的）工作解决方案列表：

*   [Quikdrop](https://addons.alfresco.com/addons/quikdrop-alfresco)（客户端安装）：带有扫描客户端、PDF 转换、OCR 和有限元数据支持的简单 .NET 客户端
*   [Kofax-Express 与来自 ic-solution 的 Alfresco-Connector](http://www.ecm-market.de/scan-client-fur-alfresco.html)（客户端安装）：专业的 Capture Client 支持条形码、扫描优化、引导式元数据提取、验证、交付到 Alfresco 支持文档类型和元数据
*   [Ephesoft](http://www.alfresco.com/products/integrations/ephesoft)（服务器安装）：基于 Web 的捕获解决方案，可作为社区、云和商业版本使用
*   Abbyy Flexicapture（服务器安装）：具有中央捕获/转换和提取服务的本地捕获客户端
*   带有 Alfresco-Kofax-Connector 的 Kofax（服务器安装）：具有中央捕获/转换和提取服务的本地捕获客户端

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T06:44:28.810

您的问题的答案可能与 Alfresco 没有直接关系。Alfresco 非常擅长管理文档，但除非您将它们放入 Alfresco。

所以首先你必须用扫描仪和任何扫描软件来扫描文件。完成后，您可以使用以下方式上传文档：

1.  CIFS - 您只需将 Alfresco 中的一个文件夹安装到您的桌面上，就像任何其他网络驱动器一样，然后将扫描的文档移动到该文件夹​​中。通常，您会在该文件夹上创建一个 Alfresco 规则，以将文档移走、向某人发送电子邮件、启动工作流程或其他任何事情。

2.  您可以使用 Explorer 或 Share 上传文档。如果您有很多文件要上传，它可能效率不高。

3.  您可以使用另一个应用程序使用上传 API 连接到 Alfresco 并发送文档。

4.  您将扫描的文档通过电子邮件发送到 Alfresco（前提是您已在 Alfresco 上配置了接收邮箱）。

5.  使用 Alfrescos 内置的 FTP 服务器上传文件。

有更多方法可以获取文件，我认为这些是常见的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-28T11:07:47.743

您可以使用 ChronoScan ( [http://www.chronoscan.org](http://www.chronoscan.org) ) 有一个 CMIS 模块来扫描/ocr 并以 PDF 文本或其他格式直接发送到 Alfresco、SharePoint 等，

该软件是免费的，不可用于商业用途，带有一个唠叨屏幕，与 x10 价格解决方案（Kofax Express 等）非常相似。

问候

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T06:59:22.867

除了@zladuric:s 的回答，我想补充一点，例如 Ephesoft 和 Kofax 等软件可以帮助从扫描的文档中提取元数据。

# jquery - jQuery 验证库

> ID：16030300
> 
> 赞同：-1
> 
> 时间：2013-04-16T06:35:40.823
> 
> 标签：jquery, jquery-validate

```
remote: {
        url: 'ajax_php/admin/checking.php',
        type: "post",
        data: {
            username: function() {
                return $("#username").val();
            }
        }
    } 
```

当触发 ajax fn 时，在我的 fire bug 中，我可以看到 post 值，我的控制台将 url 状态显示为 200 然后它将 url 变成红色。

第一次，它触发，但从下一次开始，它不会向我的 PHP 发布值。

这是在 jquery validate 中使用远程的方式吗？我哪里错了？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-16T09:06:06.173

使用遥控器时不要使用最大值和最小值。

# sql - 如何在 UPDATE 语句中使用 LIKE 查询？*提供示例*

> ID：16030302
> 
> 赞同：5
> 
> 时间：2013-04-16T06:35:50.737
> 
> 标签：sql, ms-access

我刚开始学习 SQL，所以我还没有那么熟练，我不确定如何对这个问题进行研究，因为我无法正确地表达这个问题，所以我决定自己问一个问题。

好的，这就是我在特定情况下尝试做的事情： **我使用 Microsoft Access 2010。**在我的名为“MEMBERS”的表中，我有一个名为“Address”的字段。这个专栏的条目真的很乱，所以我正在努力整理它。一些条目包含“Road”，而其他条目包含“Rd”。我想要做的是更新其中包含“Road”的列，并将该单词仅更改为“Rd”而不影响地址的其余部分。

*因此，如果其中一个条目是“7 Example Road”，我想创建一个查询以将其更改为“7 Example Rd”。*

这是我尝试使用的查询：

```
UPDATE MEMBERS
SET 'Rd'
WHERE Address LIKE '*Road' 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T06:38:27.740

尝试使用`REPLACE()`功能。

```
UPDATE MEMBERS
SET Address = REPLACE(Address, 'Road', 'Rd')
WHERE Address LIKE '*Road' 
```

# iphone - iOS 我可以在应用程序处于前台时使用本地通知播放声音吗

> ID：16030305
> 
> 赞同：2
> 
> 时间：2013-04-16T06:36:17.890
> 
> 标签：iphone, ios5, ios6

当应用程序处于前台时，本地通知声音未播放：我使用了以下代码

```
UILocalNotification *notif = [[cls alloc] init];
notif.fireDate = [datePicker date];         
notif.timeZone = [NSTimeZone defaultTimeZone];
notif.alertBody = @"Did you forget something?";
notif.alertAction = @"Show me";
notif.soundName = @"step.mp3";//UILocalNotificationDefaultSoundName;
notif.applicationIconBadgeNumber = 1;

NSDictionary *userDict = [NSDictionary dictionaryWithObject:reminderText.text
                                                                 forKey:kRemindMeNotificationDataKey];
notif.userInfo = userDict;

[[UIApplication sharedApplication] scheduleLocalNotification:notif];
[notif release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T06:39:11.253

```
UILocalNotification *localNotification = [[UILocalNotification alloc]init];

   // Set the notification time.
    localNotification.fireDate = [NSDate dateWithTimeIntervalSinceNow:10];

   // You can specify the alarm sound here.
   localNotification.soundName = UILocalNotificationDefaultSoundName;
   //OR
   localNotification.soundName = @"sound.caf";

   // Set the alertbody of the notification here.
    localNotification.alertBody = @"Test Alert";

   // Create the buttons on the notification alertview.
    localNotification.alertAction = @"View";

   // You can also specify custom dictionary to store informations
    NSDictionary *infoDict = [NSDictionary dictionaryWithObject:@"alarm#2" forKey:@"notifiKey"];
    localNotification.userInfo = infoDict;

    //Repeat the notification.
    localNotification.repeatInterval = NSDayCalendarUnit;

// Schedule the notification
[[UIApplication sharedApplication]scheduleLocalNotification:localNotification]; 
```

# android - Mercurial Repository 不显示 Eclipse 对象装饰

> ID：16030306
> 
> 赞同：0
> 
> 时间：2013-04-16T06:36:19.757
> 
> 标签：android, eclipse, mercurial, warnings, mercurialeclipse

在标准`Android`项目中，如果有任何警告，则会有一个相应的[警告图标](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/ref-icons.htm)以及带下划线的文本，以清楚地说明潜在问题。

但是，如果您选择克隆现有`Mercurial`存储库，则不再显示这些警告图标。有没有办法在通过克隆`Mercurial`存储库创建的项目中显示警告和错误？

![在此处输入图像描述](https://i.stack.imgur.com/SYMxq.png)

左侧的文件来自本地`Android`项目。右侧的文件是从存储库克隆的项目`Mercurial`。请注意，右侧的文件中没有波浪线下划线警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:12:00.817

比较两种情况下的 .project 文件。.project 文件位于 Eclipse 项目的根目录，它确定为项目启用了哪些插件和构建器。最有可能的修复是提交正确配置的项目文件，以便新克隆具有相同的配置。

# java - Java：变量持有者及其价值？

> ID：16030311
> 
> 赞同：3
> 
> 时间：2013-04-16T06:36:37.323
> 
> 标签：java, variables, int

我很难从书中的一个练习中理解一些东西（完全初学者）。

示例代码是用三个玩家制作一个猜谜游戏，它为所有三个玩家生成一个随机 int，它必须与游戏随机生成的 int 相同。

该代码包含三个类，但这是我有问题的最重要的一个。另外两个只是 GameLauncher 类和 Player（与其他三个玩家对战的那个）类。

```
public class GuessGame {

Player p1;
Player p2;
Player p3;

public void startGame(){
    p1 = new Player();
    p2 = new Player();
    p3 = new Player();

    int guessp1 = 10;
    int guessp2 = 0;
    int guessp3 = 0;

    boolean p1isRight = false;
    boolean p2isRight = false;
    boolean p3isRight = false;

    int targetNumber = (int) (Math.random() * 10);
    System.out.println("I'm thinking of a number between 0 and 9...");

    while(true){
        System.out.println("Number to guess is "+targetNumber);

        p1.guess();
        p2.guess();
        p3.guess();

        guessp1 = p1.number;
        System.out.println("Player one has guessed " + guessp1);
        guessp2 = p2.number;
        System.out.println("Player two has guessed " + guessp2);
        guessp3 = p3.number;
        System.out.println("Player three has guessed " + guessp3);

        if (guessp1 == targetNumber) {
            p1isRight = true;

        }if (guessp2 == targetNumber){
            p2isRight=true;

        }if (guessp3 == targetNumber){
            p3isRight=true;
        }
        if (p1isRight||p2isRight||p3isRight){
            System.out.println("We have a winner!");
            System.out.println("Player one got it right? " + p1isRight);
            System.out.println("Player two got it right?" + p2isRight);
            System.out.println("Player three got it right? " + p3isRight);
            System.out.println("The game is over.");
            break;
        }else{
            System.out.println("None of you got it right! Try again!");
        }
    }
}

} 
```

从上面的代码：

```
 int guessp1 = 10;
    int guessp2 = 0;
    int guessp3 = 0; 
```

是我不明白的那个。最初，它们都被分配了值 0。我试图分配 10 以查看会发生什么，但没有任何改变。比赛的结果是一样的。

我的问题是，如果有的话，分配给声明整数的值有什么意义？尤其是在这种情况下。

排除正常用途，例如打印它或用数学操作它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T06:40:22.740

稍后在您的例程中，您将在以下代码行中覆盖分配的值：

```
 guessp1 = p1.number;
 System.out.println("Player one has guessed " + guessp1);
 guessp2 = p2.number;
 System.out.println("Player two has guessed " + guessp2);
 guessp3 = p3.number;
 System.out.println("Player three has guessed " + guessp3); 
```

所以基本上分配的值根本没有被使用，但通常一个好的做法意味着为变量设置默认值，以便以后使用您可以确定是否分配了值或变量仍然具有其默认值。

定义默认值有助于避免意外情况，在某些编程语言中，创建的未分配或设置为 null 的对象可能会根据它们引用的内存地址包含任何垃圾数据。

有些人使用像 -1 这样的值，其中只需要正数，并通过询问默认值是否仍然存在来捕获没有分配值的情况。在您的情况下，默认值为 0。

# c# - 如何比较两个列表并获得不匹配的项目 - 不使用 LINQ

> ID：16030312
> 
> 赞同：-4
> 
> 时间：2013-04-16T06:36:43.533
> 
> 标签：c#, list

我正在使用 2 个列表，

```
List<string> localfiles = new List<string>();

List<string> remotefiles = new List<string>(); 
```

我需要在远程文件中找到本地文件中不存在的所有新项目。使用 LINQ 更容易，但我不能使用 Linq，因为我的应用程序在 .net 2.0 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T06:42:49.330

```
Dictionary<string, bool> files = new Dictionary<string, bool>();
foreach (var file in localfiles)
    if (!files.ContainsKey(file))
        files.Add(file, false);

List<string> result = new List<string>();
foreach (var file in remotefiles)
    if (!files.ContainsKey(file))
        result.Add(file); 
```

`Dictionary`如果您有超过 3 个项目，则查找效率[更高：](http://www.dotnetperls.com/dictionary-time)`List`

![在此处输入图像描述](https://i.stack.imgur.com/OkU4x.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:41:29.790

```
var temp = new List<string>();
foreach(var item in remoteFiles){
  if(localfiles.Contains(item) == false){
     temp.Add(item);
  }
} 
```

//temp 现在包含 remoteFiles 中本地文件中不存在的所有项目

# ruby-on-rails - RefineryCMS + TinyMCE + 将tinymce 3.5.6 与refinery 2.0.2 集成

> ID：16030315
> 
> 赞同：1
> 
> 时间：2013-04-16T06:36:54.350
> 
> 标签：ruby-on-rails, tinymce, refinerycms

我正在通过修改炼油厂来开发 CMS，但我不想使用默认编辑器，而是想使用 TinyMCE 编辑器，但我在将其与炼油厂集成时遇到了麻烦。编辑器标签不会出现在我指定要使用的编辑器的文本区域中。

提前致谢

# c++ - 第三方（保证有效）代码中的编译时错误

> ID：16030320
> 
> 赞同：0
> 
> 时间：2013-04-16T06:37:24.350
> 
> 标签：c++, compilation

我`QuickFAST`在我的项目中使用。当我尝试编译时，我在`QuickFAST`. 但是`QuickFAST`代码保证是有效的（当我单独打开它时，我可以编译它）。

为什么我会在有效代码中收到此编译时错误以及如何修复它？

```
typedef boost::shared_ptr<ValueMessageBuilder> ValueMessageBuilderPtr;

Error   3   error C4430: missing type specifier - int assumed. Note: C++ does not support default-int   e:\quickfast\quickfast_1_4_0\src\messages\ValueMessageBuilder_fwd.h 14  1   FastNativeAdapter

typedef boost::uint16_t uint16;

Error   15  error C4430: missing type specifier - int assumed. Note: C++ does not support default-int   E:\quickfast\quickfast_1_4_0\src\Common\Types.h 23  1   FastNativeAdapter

typedef boost::shared_ptr<ValueMessageBuilder> ValueMessageBuilderPtr;

Error   1   error C2653: 'boost' : is not a class or namespace name e:\quickfast\quickfast_1_4_0\src\messages\ValueMessageBuilder_fwd.h 14  1   FastNativeAdapter

void setValue(const uint64 value)

Error   255 error C2535: 'void QuickFAST::Value::setValue(const int)' : member function already defined or declared E:\quickfast\quickfast_1_4_0\src\Common\Value.h 99  1   FastNativeAdapter

virtual void addValue(FieldIdentityCPtr & identity, ValueType::Type type, const uint64 value) = 0;

Error   45  error C2535: 'void QuickFAST::Messages::ValueMessageBuilder::addValue(QuickFAST::Messages::FieldIdentityCPtr &,QuickFAST::ValueType::Type,const int)' : member function already defined or declared E:\quickfast\quickfast_1_4_0\src\Messages\ValueMessageBuilder.h 42  1   FastNativeAdapter

void setValue(const int8 value)
{
  class_ = SIGNEDINTEGER;
  cachedString_ = false;
  signedInteger_ = value;
}

Error   310 error C2065: 'value' : undeclared identifier    E:\quickfast\quickfast_1_4_0\src\Common\Value.h 147 1   FastNativeAdapter 
```

`boost`include 和 lib 文件被添加到项目中。

**更新：**

我发现只包含`QuickFAST`文件就足够了，就像`#include "Messages/ValueMessageBuilder.h"`. 之后，尽管我从未实例化或使用任何`QuickFAST`类，但我仍收到上述编译错误。

如果我删除`#include "Messages/ValueMessageBuilder.h"`错误就会消失（因为在整个程序中我从不引用任何`QuickFAST`文件。

所以重点是 - 只包含文件就足够了。所以可能以某种方式`QuickFAST`将资源与我的项目错误地链接在一起？我刚刚在项目属性中添加了包含和 lib 文件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:48:03.280

在[QuickFAST 的常见问题解答中发现](https://code.google.com/p/quickfast/wiki/FAQ#I%27m_having_trouble_building_my_application_when_I_include_Q)它有帮助：

要解决此问题，大多数应用程序应设置`$QUICKFAST_HOME/src`为包含目录*并`<Application/QuickFAST.h>`在包含任何其他 QuickFAST 标头之前包含。*使用预编译头文件的应用程序应该在他们的预编译头文件中包含这个头文件。

只需要`Application/QuickFAST.h`在任何其他包含之前包含。

# unix - Solaris unix, c-shell, 重定向 xargs 执行的命令输出

> ID：16030330
> 
> 赞同：0
> 
> 时间：2013-04-16T06:37:58.747
> 
> 标签：unix, redirect, solaris, xargs

对c-shell别无选择。这就是我们在这里使用的。

因此，我想解析当前目录和所有子目录，以查找 *.utv 和 egrep 形式的文件，以查找文件中的特定帐号。

我试过这样的事情：

```
egrep -l "ACCOUNT NO: +700 " `find . -name "*.utv" ` | more 
```

`但收到“来自``的字数过多的消息。`

 `所以使用 xargs 因为显然我将太多的文件名传递回 egrep 命令行。

当我这样做时：

```
find . -name "*.utv" | xargs -n1 egrep -i -l '"ACCOUNT NO: +700 "' {} >&! /home/me/output.txt 
```

“ps -ef”命令显示：

```
% ps -ef | egrep -i "myuserid"  
myuserid 20791 22549   0 18:19:38 pts/20      0:00 find . -name *.utv  
myuserid 20792 22549   0 18:19:38 pts/20      0:00 xargs -n1 egrep -i -l "ACCOUNT NO: +700 "  
myuserid 22774 20792   1 18:21:13 pts/20      0:04 egrep -i -l "ACCOUNT NO: +700 " ./01/130104_reportfile.utv  
% 
```

但是我在“output.txt”文件中没有输出。

如果我在同一目录中手动运行 egrep 部分，我会得到一个包含帐户 700 字符串的文件名列表。

我确信这只是分组、正确引用和/或在正确的位置进行重定向的问题，但是经过大量的反复试验（并在此处搜索），我仍然没有得到任何结果。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:51:42.143

您只需要在搜索周围使用单引号或双引号（但不能同时使用），就像在原始命令中一样：

```
find . -name "*.utv" | xargs -n1 egrep -i -l "ACCOUNT NO: +700 " {} >&! /home/me/output.txt
find . -name "*.utv" | xargs -n1 egrep -i -l 'ACCOUNT NO: +700 ' {} >&! /home/me/output.txt 
```

我也会丢失命令行中的`-n1`、 the`-i`和 the `{}`。始终列出文件名的一个技巧是指定`/dev/null`一个名称，但`-l`也可以完成这项工作：

```
find . -name "*.utv" | xargs egrep -l 'ACCOUNT NO: +700 ' >&! /home/me/output.txt 
```

您需要了解 C shell 不适合编程的能力。而且您可以随时添加`exec /bin/bash -l`到您的`.login`脚本（或使用`/bin/ksh`代替`/bin/bash`）。我根本不会有任何带有“你不能使用理智、文明的外壳”规则的卡车。`

# uiview - UISwipeGestureRecognizer 控制亮度

> ID：16030333
> 
> 赞同：0
> 
> 时间：2013-04-16T06:38:07.613
> 
> 标签：uiview, uiswipegesturerecognizer

我正在寻找一个`UISwipeGestureRecognizer`附加到我的 UIView 的。我想要实现的是允许用户在屏幕上滑动手指并设置屏幕的亮度。

这是我尝试过的：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    CGPoint currentPosition = [touch locationInView:self.view];

    CGFloat deltaXX = (startPoint.x - currentPosition.x);

    float brightVal;

    if (deltaXX > 0) {
        brightVal = [[UIScreen mainScreen] brightness] / ((startPoint.x / deltaXX) * 1.0);
    } else {
        brightVal = [[UIScreen mainScreen] brightness] - ((startPoint.x / deltaXX) * 1.0);
    }

    NSLog(@"%f", brightVal);
    [[UIScreen mainScreen] setBrightness:brightVal];
} 
```

但是，这似乎无法正常工作。在屏幕的右侧边缘，用户可以快速调整亮度。

我认为问题是我无法弄清楚如何标准化`1.0`左侧和`0.0`右侧的值。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:19:18.177

除非您有总数，否则您无法标准化。在这种情况下，这将取决于您的屏幕宽度。如果您从右侧开始更多，则让屏幕更快变亮是违反直觉的。最好确定亮度标度的任何点的等效值：

```
CGFloat width = self.view.bounds.size.width;
brightVal = position.x / width; 
```

现在，如果`startVal`大于亮度，则亮度应该在移动开始后跳到刻度上的点。这几乎就是 a 的`UISlider`工作方式。您甚至不需要计算到起点的增量。

只有在`deltaXX`超过某个阈值后才能触发此操作。

# c++ - 安装新的 C++ 重新分发包后，C++ 运行时的行为出乎意料

> ID：16030334
> 
> 赞同：1
> 
> 时间：2013-04-16T06:38:14.353
> 
> 标签：c++, windows-runtime

我的 C++ 应用程序使用共享运行时程序集版本 9.0.30729.1 在 Windows XP 上运行。但最近我安装了新的 C++ 重新分发包，它部署了更新版本的运行时程序集版本 9.0.30729.6161。

在 Winsxs\policies 目录中，这个新的策略文件也由新的 C++ 重新分发包部署。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!-- Copyright (c) Microsoft Corporation.  All rights reserved. -->
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
<assemblyIdentity type="win32-policy" name="policy.9.0.Microsoft.VC90.ATL" version="9.0.30729.6161" processorArchitecture="x86" publicKeyToken="1fc8b3b9a1e18e3b"/>
<dependency>
<dependentAssembly>
<assemblyIdentity type="win32" name="Microsoft.VC90.ATL" processorArchitecture="x86" publicKeyToken="1fc8b3b9a1e18e3b"/>
<bindingRedirect  oldVersion="9.0.20718.0-9.0.21022.8" newVersion="9.0.30729.6161"/>
<bindingRedirect  oldVersion="9.0.30201.0-9.0.30729.6161" newVersion="9.0.30729.6161"/>
</dependentAssembly>
</dependency>
</assembly> 
```

在这个新的 Visual C++ 2008 Redistributable 安装后，我的程序显示“由于应用程序配置不正确，此应用程序无法启动”错误。但是，如果我删除上面的策略文件，它就可以正常工作。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T11:47:03.510

您的应用程序清单可能包含多个版本的 CRT。如果您可以发布应用程序的清单（在资源编辑器中打开已编译的二进制文件并使用剪贴板将其复制出来），它将为我提供更多信息。

# ios - 为什么每当我使用搜索显示控制器时都会显示底层 UIViewTable

> ID：16030336
> 
> 赞同：0
> 
> 时间：2013-04-16T06:38:21.883
> 
> 标签：ios, objective-c, xcode, uitableview, searchdisplaycontroller

我有一个`UIViewController`包含 a`UITableView`和 a的类`SearchDisplayController`。我面临的问题是，每当我单击搜索栏并键入查询时，它都会显示搜索结果并出于某种原因显示底层 UITableView。

例如，如果我在运行搜索时运行此代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (tableView == self.searchDisplayController.searchResultsTableView) {
        ..
        NSLog(@"constructing a search result table view cell ");            
    } else
    {
        ..
        NSLog(@"::: constructing a mail box  table view cell");
    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (tableView == self.searchDisplayController.searchResultsTableView) {
        NSLog(@"searchDisplayController: number of rows: %d", [queryResultData count]);
    } else {
        NSLog(@"mailbox: NUMBER OF ROWS: %d", [self.emailData count]);
    }
} 
```

日志将如下所示：

```
[5033:c07] performing search with query hi
[5033:c07] ftSearch started with query = hi dbNum = 0
[5033:c07] mailbox: NUMBER OF ROWS IN SECTION: 19
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] mailbox: NUMBER OF ROWS IN SECTION: 19
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] searchDisplayController: number of rows are 1
[5033:c07] ::: constructing a search result table view cell 
[5033:c07] searchDisplayController: number of rows are 2
[5033:c07] ::: constructing a search result table view cell 
[5033:c07] searchDisplayController: number of rows are 3
[5033:c07] ::: constructing a search result table view cell 
[5033:c07] searchDisplayController: number of rows are 4
[5033:c07] ::: constructing a search result table view cell 
[5033:c07] searchDisplayController: number of rows are 5
[5033:c07] mailbox: NUMBER OF ROWS IN SECTION: 19
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] mailbox: NUMBER OF ROWS IN SECTION: 19
[5033:c07] searchDisplayController: number of rows are 6
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] mailbox: NUMBER OF ROWS IN SECTION: 19
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] mailbox: NUMBER OF ROWS IN SECTION: 19
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] mailbox: NUMBER OF ROWS IN SECTION: 19
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] mailbox: NUMBER OF ROWS IN SECTION: 19
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell
[5033:c07] ::: constructing a mail box  table view cell 
```

这就是 IB 的样子：

![在此处输入图像描述](https://i.stack.imgur.com/9yNtN.png)

和

![在此处输入图像描述](https://i.stack.imgur.com/DTLvi.png)

要清楚.. 显示的 UI 正是我想要的.. 但我只是对为什么另一个表正在执行所有这些渲染计算感到困惑.. 这后来成为一个真正的问题 b/c 它给了我一些线程/asynchronous 代码令人头疼，在这种背景和不必要的活动发生时很难调试。

**注意：**我还尝试了 IB 的不同布局。我注意到的一件事是，如果我将搜索栏设置为 tableView 的相邻子视图 .. 基础表将被调用更多！

我还考虑过创建一个标志并检查搜索栏当前是否正在使用，然后基本上阻止底层的 UITableView 做任何工作..但这还不够好..它不应该首先被调用.

有人可以告诉我在使用搜索时如何防止基础表出现/呈现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:24:54.690

这并没有直接解决我的担忧..但它在一定程度上限制了损害。我创建了一个存储搜索是否处于活动状态的局部变量：

```
- (void)searchDisplayControllerWillBeginSearch:(UISearchDisplayController *)controller {
    isSearchViewDisplayed = YES;
}

- (void)searchDisplayControllerDidEndSearch:(UISearchDisplayController *)controller {
    isSearchViewDisplayed = NO;
} 
```

经过进一步[检查](http://mobile.tutsplus.com/tutorials/iphone/table-view-basics/)，我注意到tableview 询问它的第一件事`UITableViewDataSource`是节数..一切（即每节的行数和单元格的渲染）都在此之后发生..所以我只是在节检查部分返回 0：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    if (tableView == self.searchDisplayController.searchResultsTableView 
           || !isSearchViewDisplayed) {
        return 1;
    } else {
        return 0;
    }
} 
```

我不会将此标记为正确.. 只是等待看看是否有更好的答案。

# css - CSS 特异性混淆

> ID：16030340
> 
> 赞同：1
> 
> 时间：2013-04-16T06:38:31.890
> 
> 标签：css, css-specificity

我有以下标记：

```
<div class="breadcrumbs">
    <span id="links">
      <a href="/home.html" class="pointer">home</a>
      <span>&gt;</span>
      <a href="/module/users.html">users</a>
    </span>
</div> 
```

我的样式是这样定义的：

```
.breadcrumbs{/*styles for breadcrumbs div*/}
.breadcrumbs span a{cursor:default/*other styles for breadcrumbs links*/}

a.pointer{cursor:pointer;} 
```

在我的页面上，链接显示默认光标（箭头），并且`a.pointer`在 IE10 控制台和萤火虫中显示样式。

我的困惑是，当`pointer`类直接应用于锚元素时，它不应该覆盖从`.breadcrumbs span a`匹配中挑选的那个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T06:41:20.703

不，当然不应该。具体规则说，选择器越具体，它的优先级就越高。因此，在您的情况下，当您创建一个适用于所有锚标记的类，然后创建另一个适用于某个其他 html 标记（div）中的锚标记的类时，第二个类将具有更高的优先级，因为它的范围更窄瞄准。

您可以查看 Smashing 杂志上的这篇精彩文章，以了解具体规则。[http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

# mysql - 使用同一表中另一行的数据更新一行

> ID：16030341
> 
> 赞同：0
> 
> 时间：2013-04-16T06:38:38.680
> 
> 标签：mysql, sql, sql-update

```
UPDATE user SET 
                tw_oauth_token=(SELECT tw_oauth_token FROM user WHERE id=27),
                tw_oauth_token_secret = (SELECT tw_oauth_token_secret FROM user WHERE id=27),
                tw_user_id = (SELECT tw_user_id FROM user WHERE id=27),
                handler = (SELECT handler FROM user WHERE id=27),
                merged=1 WHERE id=26 
```

这个想法是从 id = 27 的用户表中选择数据并更新 id = 26 的同一个表。

我有以下错误：

```
#1093 - You can't specify target table 'user' for update in FROM clause 
```

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:42:32.427

```
UPDATE  user a
        CROSS JOIN user b
SET     a.tw_oauth_token = b.tw_oauth_token,
        a.tw_oauth_token_secret = b.tw_oauth_token_secret,
        a.tw_user_id = b.tw_user_id,
        a.handler = b.handler,
        a.mrged = 1
WHERE   a.ID = 26 AND
        b.ID = 27 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T06:44:53.000

您为什么不尝试根据您的表创建一个虚拟表，然后使用该视图上的语句更新该`user`表。`SELECT`像这样的东西：

```
CREATE VIEW view_user AS
SELECT *
FROM user; 
```

然后在更新中使用 view_user。

# ios - 打印说明时更改日期格式

> ID：16030342
> 
> 赞同：0
> 
> 时间：2013-04-16T06:38:41.787
> 
> 标签：ios, nsdate, nsdateformatter

我正在以这种格式“04/11/13 19:37:00”获取一些日期，我想将此日期转换为本地时区，下面是我正在使用的代码。

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
dateFormatter.dateFormat = @"MM/dd/yy HH:mm:ss";

NSTimeZone *gmt = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
[dateFormatter setTimeZone:gmt];

NSDate *date = [dateFormatter dateFromString:dateString];
NSLog(@"date value %@",date); 
```

我面临的问题是，当我将鼠标放在显示“ **2013-04-12 01:07:00 IST** ”的“日期”变量上时，我正在使用调试器，这是我需要的正确输出。但是当我使用 NSLog 打印相同的“日期”变量时，我得到“2013-04-11 19:37:00 +0000”。我怎样才能得到正确的格式，任何人都可以显示，我需要更改**dateformat**吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T06:47:00.127

`NSLog``NSDate`以固定格式显示对象。如果要以特定格式记录日期，请使用 an转换`NSDate`为an ，然后记录字符串。`NSString``NSDateFormatter`

请记住，记录日期仅用于调试目的。日志中的格式真的无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:21:04.490

如果要将 UTC 中的 dateString 转换为本地时区，则需要分两步进行。

1.首先将对应的TimeZone设置为dateFormatter形成日期

2.设置Local TimeZone为dateFormatter，从date形成dateString

```
NSString *dateString = @"04/16/13 11:12:00";

NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init];
NSLocale *enUSPOSIXLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
[dateFormatter setLocale:enUSPOSIXLocale];
dateFormatter.dateFormat = @"MM/dd/yy HH:mm:ss";

NSTimeZone *gmt = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
[dateFormatter setTimeZone:gmt];

NSDate* date = [dateFormatter dateFromString:dateString];

[dateFormatter setTimeZone:[NSTimeZone localTimeZone]];

NSString *localDateString = [dateFormatter stringFromDate:date];

NSLog(@"%@",localDateString); 
```

# jquery - 使用 find() 和 end() 函数链接代码会更好吗？

> ID：16030343
> 
> 赞同：2
> 
> 时间：2013-04-16T06:38:45.050
> 
> 标签：jquery

假设我的 HTML 代码如下：

```
<div class="body">
    <div class="head">xxx</div>
    <div class="menu">xxx</div>
    <div class="content">
        <div class="main">xxx</div>
    </div>
</div> 
```

**脚本 A**

```
$('.body')
  .find('.head').show().end()
  .find('.menu').show().end()
  .find('.content .main').show().end() 
```

**脚本 B**

```
$('.body .head').show()
$('.body .menu').show()
$('.body .content .main').show() 
```

我已经编写了脚本**A**和**B**来显示所有元素，但是哪个更好或者各自的优势是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T06:43:05.623

这是主观的，我发现`end`可读性较差，有些人可能不同意。
**没有正确或错误的答案。**

我更喜欢缓存风格，因为它更具可读性，甚至更快。

**脚本 C**

```
var $body = $('.body');
$body.find('.head').show();
$body.find('.menu').show();
$body.find('.content .main').show(); 
```

注意：

```
$body.find('.head').show();
$body.find('.menu').show(); 
```

可以缩短组合为：

```
$body.find('.head, .menu').show(); 
```

> end() 方法主要在利用 jQuery 的链接属性时很有用。当不使用链接时，我们通常可以通过变量名调用前一个对象，因此我们不需要操作堆栈。但是，使用 end()，我们可以将所有方法调用串在一起。

[从文档](http://api.jquery.com/end/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T06:46:50.483

如果 里面没有其他元素`.body`，我会调用`.show()`or `.hide()`on `.body`。

```
$('.body').show(); 
```

或者如果只有部分`.body`div 的孩子，你可以只写一行：

```
$('.body').find('.head,.menu,.content .main').show();

// or provide the second parameter as the context
$('.head,.menu,.content .main', '.body').show(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T06:44:45.257

建议在此处缓存 的值，`$('.body')`方法是将其存储在变量中或使用`.end()`.

此代码还将`'.head'`and`'.menu'`选择器组合在一个`.find()`:

```
$('.body')
    .find('.head,.menu')
        .show()
        .end()
    .find('.content .main')
        .show(); 
```

*事实证明，这比选项 A 慢约 5%。*

当然你也可以原生`querySelectorAll()`直接使用：

```
[].forEach.call(document.body.querySelectorAll('.head, .menu, .content .main'), function(node) {
    node.style.display = 'block';
}); 
```

*这不适用于所有浏览器，但性能提升是巨大的。*

[**jsperf 结果**](http://jsperf.com/find-end-vs-newquery)

# r - 覆盖内置 is.na 函数

> ID：16030344
> 
> 赞同：1
> 
> 时间：2013-04-16T06:38:51.687
> 
> 标签：r, overriding, na

作为我上一个问题的后续 -[使用 na.rm=TRUE 时删除了 NaN](https://stackoverflow.com/questions/16028446/unexpected-behaviour-using-na-rm)，我正在寻找一种对我的（大型）代码库进行最小更改的解决方法。

我试过这个，它有效，但是

```
my.is.na <- function(x)
{
   ifelse(is.na(x) & !is.nan(x), TRUE, FALSE)
} 
```

但我想覆盖内置`is.na`函数。将我的函数重命名为`is.na`显然会导致无限递归。我有哪些选择？

PS：在所有代码中都假定`is.na(NaN)`返回`FALSE`，所以我更愿意覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:49:56.353

我不确定这是否合法，但是：

```
old.na <- is.na
is.na <- function(x)
{
   ifelse(old.na(x) & !is.nan(x), TRUE, FALSE)
} 
```

这可能会违反 R 中的某些规则，并且可能会产生其他一些不良后果，但至少它的行为方式与您的想法一致......

# ios - 如何保留可变数字？

> ID：16030351
> 
> 赞同：0
> 
> 时间：2013-04-16T06:39:00.793
> 
> 标签：ios, objective-c

我构建了一个由许多多维数组组成的数据系统，这些数组由我存储的索引访问，但可以由用户更改。我天真地认为 NSNumber 可以修改，但这显然不是它的目的，所以我有点卡住了。我根本无法保留整数，因为当我跨越视图时我会丢失它们。

必须有一种简单的方法来存储持久整数，但我的调查让我有点担心。做什么？

我的系统的工作方式很简单：

```
@property (nonatomic, strong) NSMutableArray *data;
@property NSInteger *index; // this needs to be persistent across views

...

int index = *(_dataStorage.index);
NSSomeObject something;
[_dataStorage.data replaceObjectAtIndex:index withObject:something]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:41:13.203

`NSInteger *index;`- 为什么？为什么不`NSInteger index`呢？为什么需要保留它？如果您有索引，请将其设为读写属性，使用您的对象的任何人都可以写入

```
theObject.index = newIndex; 
```

# java - 将文本文件内容设置为数组

> ID：16030353
> 
> 赞同：-1
> 
> 时间：2013-04-16T06:39:10.990
> 
> 标签：java, arrays

嗨，我是java的新手。这是我的java代码：

```
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.BufferedReader;

public class readw {
 public static void main(String[] args) throws IOException {
    List<String> lines = new ArrayList<String>();
    BufferedReader reader = null;
    try {
        reader = new BufferedReader(new FileReader("C:\\run\\input.txt"));
        String line = null;
        while ((line = reader.readLine()) != null) {
            lines.add(line);
        }
    } finally {
        reader.close();
    }
    String[] array = lines.toArray();
}
} 
```

当我试图编译它时，我得到了这种类型的错误：

```
line 8: can not find symbol List (L)and ArrayList(A) 
```

我正在尝试获取我的文本文件的内容并希望将其设置为数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:54:09.117

添加

```
import java.util.ArrayList;
import java.util.List; 
```

* * *

> 是的，它的工作现在我想看看数组结果。如何？

和

```
System.out.println(lines); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T06:56:22.283

您需要导入您使用的所有类。

```
import java.util.ArrayList;
import java.util.List; 
```

# jquery - 在 `div` 元素的左右放置两个箭头（以图像的形式）

> ID：16030354
> 
> 赞同：2
> 
> 时间：2013-04-16T06:39:11.203
> 
> 标签：jquery, html, css

我有`div`一个盒子形式的元素。我需要在它的两侧放置两个图像（箭头）。

我想要类似的东西：

![箭头和框](https://i.stack.imgur.com/2jQ2B.png)

我只为盒子编写了以下代码。我有两个名为`red.jpg`and的箭头图像`green.jpg`，但我应该如何定位它们？

```
<div id="result">   
</div>

<script>
$('<div id="box" class="boxed ">').text("a").appendTo("#result");

// Add to right
$("#result").prepend('<img id="red" src="Images/red.jpg" />');

//Add to left
$("#result").prepend('<img id="green" src="Images/green.jpg" />');
</script>

<style>
.boxed 
{
    font-size: 20px;
    border: 1px solid green ;
    height: 100px;
    width: 100px;

    padding-top:75px;
    padding-left:10px;
    padding-bottom: 10px;
    padding-right: 50px;

    margin-top: 50px;
    margin-right: 40px;
    margin-bottom: 10px;
    margin-left: 500px;
    background: blue;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T06:59:25.493

HTML/CSS 解决方案怎么样：

html:

```
<div class="box">
    <img class="green" src="Images/green.jpg" alt="green">
    <img class="red" src="Images/red.jpg" alt="red">
</div> 
```

CSS：

```
.box {
    height: 100px;
    width:  100px;
    position: relative;
    background: blue;
}
.green,
.red {
    width: 100px;
    height: 60px;
    display: block;
    top: 50%;
    margin-top: -30px; /* img height/2 */
    position: absolute;
}
.green {
    left: -100px; /* img width */
    background: green;
}
.red {
    right: -100px; /* img width */
    background: red;
} 
```

**[演示](http://jsfiddle.net/aH2zt/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T06:49:04.933

尝试使用 jQuery [before](http://api.jquery.com/before/)和[after](http://api.jquery.com/after/)在`div`.

此外，由于在最后 - 即在添加之前和之后之后 - 您将拥有三个元素，您需要制作它们`display: inline;`或`float: left;`出现在一条水平线上。

看到这个：

```
var div = $('<div id="box" class="boxed left"></div>');
div.appendTo('.parent');
div.before('<a href="#" class="left" >
                  <img src="imageUrl" width="50px" height="50px" />
            </a>'
          );

div.after('<a href="#" class="left" >
              <img src="imageurl" width="50px" height="50px" />
           </a>'
         ); 
```

这里`.parent`指的是容器，要装这三个。

看到这个[小提琴](http://jsfiddle.net/VZeps/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T06:53:20.450

如果你不知道箭头图像的大小，你可以用一些像这样的 jQuery 来放置它们（如果你知道大小直接设置 css）。

## 摘要 - 这是我添加的

**CSS**：

```
.boxed {
    position: relative;
}

#red,#green {
    position: absolute;
    top: 0;
} 
```

**JS**：

```
$('#red').css({'right', -$('#red').width()});
$('#green').css({'left', -$('#green').width()}); 
```

## 你的完整代码

我已经允许自己缩短你的一些 CSS ......

**网页**：

```
<div id="result"></div> 
```

**CSS**：

```
.boxed {
    /*Place absolute positioned images relative to this box*/
    position: relative;

    font-size: 20px;
    border: 1px solid green;

    height: 100px;
    width: 100px;

    padding: 75px 50px 10px 10px; /*Syntax: Top, right, bottom, left*/
    margin: 50px 40px 10px 500px;
    background: blue;
}

#red,#green {
    /*Position absolute (they won't fill out space). The positions are set in js*/
    position: absolute;
    top: 0;
} 
```

**JS**：

```
$('<div id="box" class="boxed ">').text("a").appendTo("#result");

// Add arrows
$("#result").prepend('<img id="red" src="images/red.jpg" />');
$("#result").prepend('<img id="green" src="images/green.jpg" />');

//Position arrows by css
$('#red').css({'right', -$('#red').width()});
$('#green').css({'left', -$('#green').width()}); 
```

[CSS](http://api.jquery.com/css/) jQuery 文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T06:47:21.897

修改您的插入顺序

```
$('<img id="red" src="Images/red.jpg" />').appendTo("#result");
$('<div id="box" class="boxed ">').text("a").appendTo("#result");
$('<img id="green" src="Images/green.jpg" />').appendTo("#result"); 
```

# html - tinymce 文本对齐问题

> ID：16030358
> 
> 赞同：1
> 
> 时间：2013-04-16T06:39:18.093
> 
> 标签：html, json, tinymce

我在tinymce中用空格和html（换行符和其他等）编写文本描述。然后我将它保存到mysql数据库。当我再次得到它并提醒它时，它显示我和它一样。所以直到现在它是美好的。当我再次将其添加到 tinymce 进行编辑时，所有 html 和空格都消失了..可能是什么问题？这是我的代码

```
 $('#description').tinymce({
                // Location of TinyMCE script
                script_url : 'tinymce/jscripts/tiny_mce/tiny_mce.js',
                // General options
                width : "825",
                height: "300",
                theme : "advanced",
                theme_advanced_toolbar_align : "left",
                theme_advanced_statusbar_location : "bottom",
                theme_advanced_toolbar_location : "top",
                theme_advanced_buttons1 : "bold,italic,underline,strikethrough,bullist,numlist,spellchecker",
                theme_advanced_buttons2 : "",
                theme_advanced_buttons3 : "",
                theme_advanced_buttons4 : "",
                force_br_newlines : true,
                force_p_newlines : false,
                gecko_spellcheck : true,  
                forced_root_block : '', // Needed for 3.x

                plugins : "paste,spellchecker",
                spellchecker_languages : "+English=en,Russian=ru",
                // encoding : "xml",
                // Example content CSS (should be your site CSS)
                content_css : "tinymce/examples/css/content.css",

                //
                apply_source_formatting : true,

                // Replace values for the template plugin
                template_replace_values : {
                    username : "Some User",
                    staffid : "991234"
                }   
            }); 
```

这就是我如何获得价值

```
alert(json.description_demo);//this is ok
 $("#description").val(json.description_demo);
 alert($("#description").val());//now this is not ok..here is issue 
```

也试过这个

```
alert(json.description_demo);//ok
tinyMCE.get('description').setContent(json.description_demo);
alert(tinyMCE.get('description').getContent());//issue not ok 
```

图片 ![在职的](https://i.stack.imgur.com/Z2p9w.png) ![不工作](https://i.stack.imgur.com/186y5.png) ![后价值](https://i.stack.imgur.com/gnvzV.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:58:13.680

您将不得不使用 tinyMce 功能来获取和设置值。

尝试使用

tinyMCE.get('description').getContent() 获取值

tinyMCE.get('description').setContent(value from db) 设置值。

查看 tinymce 文档[http://www.tinymce.com/wiki.php/API3:method.tinymce.Editor.getContent](http://www.tinymce.com/wiki.php/API3:method.tinymce.Editor.getContent)

# java - 有没有办法使用图像切换器和画廊制作自动幻灯片？

> ID：16030359
> 
> 赞同：-2
> 
> 时间：2013-04-16T06:39:24.657
> 
> 标签：java, android, slideshow, imageswitcher

我在考虑如何使用 ImageSwitchers 和 Gallery 制作自动幻灯片时遇到了麻烦。我唯一了解的是当您从图库中选择图片时过渡图片之间的动画，例如它们淡入淡出或从左到右移动的方式。

**编辑**

我的目的是在创建图库并选择每张图片然后使用 imageswitcher 在底部布局上显示所选图片时尝试以相同的方式制作幻灯片。就在这一次，而不是实际点击，我希望图片自动移动（最后一张之后的下一张），就像在 Powerpoints 上一样，显然还有一个计时器。

这是整个类： package project.CaseStudy;

```
public class Slideshow extends Activity implements ViewFactory {
    //---the images to display---
    Integer[] imageIDs = {
            R.drawable.pic1,
            R.drawable.pic2,
            R.drawable.pic3,
            R.drawable.pic4,
            R.drawable.pic5,
            R.drawable.pic6,
            R.drawable.pic7
    };

    TextView legend;
    TextView imageID;

    CheckBox repeat;
    CheckBox image;
    CheckBox text;

    public int picture;
    public int pictureCurrentlySelected;

    private ImageSwitcher imageSwitcher;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.slideshow);

        legend = (TextView) findViewById(R.id.legend);
        imageID = (TextView) findViewById(R.id.imagenum);

        repeat = (CheckBox) findViewById(R.id.repeat);
        image = (CheckBox) findViewById(R.id.number);
        text = (CheckBox) findViewById(R.id.text);

        //text.setEnabled(true);
        //image.setEnabled(true);
        //repeat.setEnabled(true);

        imageSwitcher = (ImageSwitcher) findViewById(R.id.switcher1);
        imageSwitcher.setFactory(this);

        imageSwitcher.setInAnimation(AnimationUtils.loadAnimation(this,
                android.R.anim.fade_in));
        imageSwitcher.setOutAnimation(AnimationUtils.loadAnimation(this,
                android.R.anim.fade_out));

        /*imageSwitcher.setInAnimation(AnimationUtils.loadAnimation(this,
                android.R.anim.slide_in_left));
        imageSwitcher.setOutAnimation(AnimationUtils.loadAnimation(this,
                android.R.anim.slide_out_right));

        */
        pictureCurrentlySelected = -1;
        Gallery gallery = (Gallery) findViewById(R.id.gallery1);
        gallery.setAdapter(new ImageAdapter(this));
        gallery.setOnItemClickListener(new OnItemClickListener()
        {
            public void onItemClick(AdapterView<?> parent,
            View v, int position, long id)
            {
                imageSwitcher.setImageResource(imageIDs[position]);
                picture = position;
                pictureCurrentlySelected = picture;
                check();
            }
        });
    }

    public View makeView()
    {
        ImageView imageView = new ImageView(this);
        imageView.setBackgroundColor(0xFF000000);
        imageView.setScaleType(ImageView.ScaleType.FIT_CENTER);
        imageView.setLayoutParams(new
                ImageSwitcher.LayoutParams(
                        LayoutParams.FILL_PARENT,
                        LayoutParams.FILL_PARENT));
        return imageView;
    }

    public class ImageAdapter extends BaseAdapter
    {
        private Context context;
        private int itemBackground;

        public ImageAdapter(Context c)
        {
            context = c;

            //---setting the style---
            TypedArray a = obtainStyledAttributes(R.styleable.Gallery1);
            itemBackground = a.getResourceId(
                    R.styleable.Gallery1_android_galleryItemBackground, 0);
            a.recycle();
        }

        //---returns the number of images---
        public int getCount()
        {
            return imageIDs.length;
        }

        //---returns the item---
        public Object getItem(int position)
        {
            return position;
        }

        //---returns the ID of an item---
        public long getItemId(int position)
        {
            return position;
        }

        //---returns an ImageView view---
        public View getView(int position, View convertView, ViewGroup parent)
        {
            ImageView imageView = new ImageView(context);

            imageView.setImageResource(imageIDs[position]);
            imageView.setScaleType(ImageView.ScaleType.FIT_XY);
            imageView.setLayoutParams(new Gallery.LayoutParams(150, 120));
            imageView.setBackgroundResource(itemBackground);

            return imageView;
        }
    }

    public void onCheckBoxClickListener(View v)
    {
        boolean checked = ((CheckBox) v).isChecked();

        switch(v.getId()){

        case R.id.repeat:
            /*if(checked)
            {
                return;
            }*/
            break;

        case R.id.text:
            if(!checked)
                legend.setText("");
            else
            {
                if(pictureCurrentlySelected == -1)
                {
                    legend.setText("");
                }
                else
                    check();
            }

            break;

        case R.id.number:
            if(!checked)
                imageID.setText("");
            else
            {
                if(pictureCurrentlySelected == -1)
                {
                    legend.setText("");
                }
                else
                    check();
            }

            break;

        }
    }

    private void check()
    {
        if(text.isChecked())
        {
            if(picture == 0)
                legend.setText("This is San Fransisco's Bridge. A beautiful Sight!");
            else if(picture == 1)
                legend.setText("This is the train used to pick up the bitches around town.");
            else if(picture == 2)
                legend.setText("The outstanding lake of San Fransisco");
            else if(picture == 3)
                legend.setText("A beautiful view of the city!");
            else if(picture == 4)
                legend.setText("Beauty at its limit.");
            else if(picture == 5)
                legend.setText("Town at sunset.");
            else
                legend.setText("Bridge during within a beautiful sight.");

        }
        /*else
            legend.setText("");*/

        if(image.isChecked())
        {
            if(picture == 0)
                imageID.setText("Image number 1");
            else if(picture == 1)
                imageID.setText("Image number 2");
            else if(picture == 2)
                imageID.setText("Image number 3");
            else if(picture == 3)
                imageID.setText("Image number 4");
            else if(picture == 4)
                imageID.setText("Image number 5");
            else if(picture == 5)
                imageID.setText("Image number 6");
            else
                imageID.setText("Image number 7");

        }
        //else
            //legend.setText("");

        if(repeat.isChecked())
        {
        }
        //else;

    }

} 
```

如果它太复杂而无法理解，请忽略最后两种方法我只是在草绘我的程序，并且最终会在以后修复冗余。

这是 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Images of San Francisco" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <CheckBox
            android:id="@+id/repeat"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="onCheckBoxClickListener"
            android:text="Repeat" />

        <CheckBox
            android:id="@+id/number"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="onCheckBoxClickListener"
            android:text="Image ID" />

        <CheckBox
            android:id="@+id/text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="onCheckBoxClickListener"
            android:text="Text" />

    </LinearLayout>

    <Gallery
        android:id="@+id/gallery1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.50" >

        <ImageSwitcher
            android:id="@+id/switcher1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >
        </ImageSwitcher>
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Image number: " />

        <TextView
            android:id="@+id/imagenum"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/legend"
            android:layout_width="match_parent"
            android:layout_height="57dp"
            android:text="" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:05:18.977

我不确定您要实现的确切目标，但我所知道的创建**小型**幻灯片的最佳（阅读：最简单）方法是将您的 imageViews 和/或 textViews 放入框架布局中。然后在您的代码中，您将使用一个 switch 语句来设置每个图像的可见性。

例如。案例0：

image1.setVisibility (View.VISIBLE);

image2.setVisibility (View.INVISIBLE);

ETC....

# ant - 查找遗留 ANT 项目的模块之间的依赖关系以迁移到 IVY

> ID：16030369
> 
> 赞同：0
> 
> 时间：2013-04-16T06:40:01.080
> 
> 标签：ant, ivy, dependency-management

我正在处理一个使用 ANT 将源代码构建到 EAR 中的项目。几年来，该项目已经发展到庞大的规模，超过五十个模块，毫不奇怪，构建源代码需要 2 个小时。

我做出的明显决定是将其迁移到模块化构建，使用 IVY 进行 EAR 子模块之间的依赖关系管理，因此我只构建已更改的模块，然后每次打包一个新的 EAR。我一直在努力寻找一种找出这些子模块之间依赖关系的好方法。请注意，第 3 方依赖项很容易破解。我只是将这些子模块的 lib 文件夹中的所有内容移动到 IVY。但是，前者是我卡住的地方。这就是他们所做的：

1.  将所有模块的源代码复制到目录
2.  将“一切”编译成 global.jar
3.  将此 global.jar 添加到类路径
4.  此后构建每个单独的模块

现在我如何弄清楚例如模块 C 依赖于模块 A 和 B ，所以 A 和 B 应该作为前者的常春藤依赖？一种方法是在eclipse中一次添加一个模块并尝试构建，然后消除由于缺少类而导致的失败；但是必须有比这更好的方法，我无法想象在接下来的一个月的生活中弄清楚这一点:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:02:02.703

首先，您需要创建常春藤存储库。我不知道该怎么做。尝试在常春藤网站上找到它。之后，您需要创建`build.xml`并`ivy.xml`归档。

示例 build.xml 构建一些依赖于的产品`module1`

```
<project name="ivy.test" xmlns:ivy="antlib:org.apache.ivy.ant">

    <target name="resolve">
        <!-- this line tells ivy to use ${ivy.settings.file} where are ivy repositories; more info http://ant.apache.org/ivy/history/latest-milestone/settings.html -->
        <ivy:configure file="${ivy.settings.file}"/>
        <!-- resolve ivy dependencies from ivy.xml and put them in ivy cache dir -->
        <ivy:resolve file="${build.dir}/ivy.xml" transitive="false" />
        <!-- finally copy resolved dependencies to ${ivy.lib.dir} -->
        <ivy:retrieve conf="default" pattern="${ivy.lib.dir}/[artifact].[ext]" />
    </target>

</project> 
```

用于解决依赖关系的示例 ivy.xml（将尝试`module1`在 ivysettings 文件中定义的常春藤存储库之一中查找）

```
<ivy-module version="2.0">
    <info organisation="your.organisation" module="modulename">
        <ivyauthor name="yourname" />
    </info>
    <configurations>
        <conf name="default" description="default conf" />
    </configurations>
    <dependencies>
        <dependency name="module1" org="your.organisation" rev="latest.release" conf="default->default" />
    </dependencies>
</ivy-module> 
```

项目使用的示例 ivy.xml `module1`（此项目依赖于`module2`和`module3`；`module1`也发布在存储库中）

```
<ivy-module version="2.0">
    <info organisation="your.organisation" module="module1"> <!-- module name is used in dependency -->
        <ivyauthor name="yourname"/>
    </info>
    <configurations>
        <conf name="default" description="default configuration"/>
    </configurations>
    <publications>
        <artifact name="module" ext="dll" type="dll" conf="default"/>
    </publications>
    <dependencies>
        <dependency name="module2" org="your.organisation" rev="latest.release" conf="default->default" />
        <dependency name="module3" org="your.organisation" rev="latest.release" conf="default->default" />
    </dependencies>
</ivy-module> 
```

# python - 有没有像 GitLab 这样用 Python 编写的程序？

> ID：16030371
> 
> 赞同：9
> 
> 时间：2013-04-16T06:40:12.363
> 
> 标签：python

我想使用托管在我们的 Web 服务器上的私有 git 存储库，为此我正在寻找一个用 Python 编写的程序，比如 GitLab。我正在寻找一个用 python 而不是其他语言编写的程序。如果该程序可以提供类似于 Github 或 Gitlab 的 UI，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:18:48.047

有[克劳斯](https://github.com/jonashaag/klaus)，但我不知道它的功能有多丰富

![克劳斯 1](https://i.stack.imgur.com/fQIx3.gif) ![克劳斯 2](https://i.stack.imgur.com/LNyWz.gif)

您也可以将 Trac 与 git 一起使用，但我不确定您是否喜欢它。

您对 ruby​​（或 java/.net/php/etc.）有什么顾虑？您是否打算自己大幅扩展这些应用程序？您以前在托管 ruby​​ 网络应用程序时遇到过问题吗？您是否担心特定于 rails 的安全问题（不仅发生在 rails 中），因为一些 ruby​​ git 前端是用 sinatra 而不是 rails 编写的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T06:44:14.540

看看这个专为 python 制作的很棒的模块

[https://github.com/gpocentek/python-gitlab](https://github.com/gpocentek/python-gitlab)

这是相当新的，所以更新很快就会到来。

**编辑：**

看看这个网站，有很多替代品也可以在 python 中使用。

[http://alternativeto.net/software/gitlab/](http://alternativeto.net/software/gitlab/)

# google-drive-api - 驱动器共享弹出窗口打不开

> ID：16030374
> 
> 赞同：2
> 
> 时间：2013-04-16T06:40:22.097
> 
> 标签：google-drive-api

我正在尝试按照以下方法将“驱动器共享”弹出窗口集成到我的应用程序中：[https ://developers.google.com/drive/manage-sharing#launching_the_google_drive_sharing_dialog_in_your_app](https://developers.google.com/drive/manage-sharing#launching_the_google_drive_sharing_dialog_in_your_app)

一切都运行良好，直到我有效地打开它。几秒钟后，我收到一条错误消息：

控制台包含此错误：“拒绝在框架中显示 ' [https://drive.google.com/share?id=0BzH05IFzFfzuZWdXYzZPZHRkaUk&foreignServi](https://drive.google.com/share?id=0BzH05IFzFfzuZWdXYzZPZHRkaUk&foreignServi) ...tr.apps.googleusercontent.com&embedOrigin=http%3A%2F%2Fvideo.unishared.com'因为它将“X-Frame-Options”设置为“SAMEORIGIN”。”

我想它与此要求有关：“启动对话框的页面的 URL 必须与为应用程序注册的打开 URL 具有相同的来源。” 但这里就是这种情况。

我无法弄清楚这里出了什么问题。谢谢你的帮助。

**编辑**

我们的一些用户报告了这个在不同浏览器上随机发生的问题。它没有完全解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T01:46:01.840

好的，我刚刚弄清楚我的实施出了什么问题。

我正在使用您可以在 API 控制台“API 访问”选项卡（类似于 ...apps.googleusercontent.com）中为您的客户端找到的 App ID

我刚刚在标题下方的“Drive SDK”选项卡中找到了另一个 ID。使用它时，弹出窗口终于出现了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:53:44.223

有多个约束：

*   JS 源需要匹配 Drive SDK 设置中的打开或创建 URL
*   需要安装该应用程序。

通过尝试您的演示，问题似乎在于它没有安装。错误（隐藏在其中一个响应的正文中）是：

```
'errorMessage': "No application with ID \x22107160330549\x22 is installed.", 
```

添加安装范围后：

```
'errorMessage': "Sorry, the item(s) you requested are not available." 
```

第二个错误可能来自 ID 被硬编码为不属于我的东西的事实。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:47:16.473

[您应该在API Console](https://code.google.com/apis/console/b/0/)上允许您的嵌入源作为列入白名单的 Javascript 源。很抱歉，我不能给你一个直接的链接，但它在 API 访问选项卡下。

# mysql - MySql：来自两个选择的计数（*）

> ID：16030378
> 
> 赞同：2
> 
> 时间：2013-04-16T06:40:28.080
> 
> 标签：mysql, sql, select, count

我有 2 张桌子：

```
t_job
 - id
 - name

t_person:
 - id
 - name
 - job_id (fk t_job->id)

t_other_jobs
 - person_id (fk t_person->id)
 - job_id (fk t_job->id) 
```

所以基本上我有一些人有主要工作和0个或更多的次要工作。我想要做的是创建给我这样的查询：

```
PERSON NAME | ALL JOBS COUNT 
```

和

```
JOB NAME | HOW MANY PEOPLE HAVE THEM 
```

因此，如果一个人有主要工作（它是一个外键，所以他必须拥有它）和其他 2 个工作。结果将是：

```
Jorge | 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T06:46:51.147

既然你说他们总是有工作，你可以数他们的其他工作并加 1：

```
SELECT
  p.id,
  p.name,
  count(o.job_id)+1 as Jobs
FROM
  t_person p
LEFT JOIN 
  t_other_jobs o
ON
  p.id=o.person_id
GROUP BY
  p.id, p.name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:52:57.213

这个 qwery 会给你你的第一个结果。

```
select 
    person.id,
    count(distinct (person.job_id)) + count(other_jobs.job_id) as All_job
from
    person
        Inner JOin
    other_jobs
where
    person.id = other_job.person_id
group by person.id 
```

这会给你第二个。

```
select 
    job.name, count(distinct (person.id)) as no_of_people
from
    person
        INNER JOIN
    job ON person.job_id = job.id
group by job_id 
UNION select 
    job.name, count(distinct (person_id)) as no_of_people
from
    other_job
        INNER join
    job ON job.id = other_job.job_id
group by job_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:13:34.277

尝试

第一个查询 ( `PERSON NAME | ALL JOBS COUNT`)

```
SELECT name PersonName, maincount + Count(o.Job_Id) AS AllJobsCount
FROM (
  SELECT p.Id, p.name, COUNT(m.Id) AS MainCount
  FROM  t_person p
  LEFT JOIN t_job m ON  p.job_id = m.Id
  GROUP BY P.Id
) a
Left Join t_other_jobs o ON A.Id = o.person_id
GROUP BY a.Id 
```

第二个查询 ( `JOB NAME | HOW MANY PEOPLE HAVE THEM`)

```
SELECT j.Name JobName, 
       (SELECT COUNT(1) FROM t_person WHERE job_id=j.Id) +
       (SELECT COUNT(1) FROM t_other_jobs WHERE job_id=j.Id) AS Count
FROM t_job j 
```

# java - 使用 @Component 提供属性名称/值

> ID：16030382
> 
> 赞同：2
> 
> 时间：2013-04-16T06:40:54.333
> 
> 标签：java, spring, components, autowired

请处理这个基本问题。

我曾经使用@Autowired 注释，其中可以使用该类的键/值格式为属性（类变量）赋予一个值。

```
<bean id="class" class="a.b.c.Class" lazy-init="true">
        <property name="var1" value="${var1}" />
</bean> 
```

我将 Class 更改为带有不需要自动装配的组件扫描选项的 @Component。我现在如何添加属性变量？

另外，我不想在编写 Junits 时遇到麻烦。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T06:46:00.027

如果您正在考虑属性文件中的属性，请签出[`@PropertySource`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/annotation/PropertySource.html)和[`@Value`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/annotation/Value.html)注释。

```
@Component
@PropertySource("classpath:myProps.properties")
public class MyComponent {

    @Value("${some.property}")
    private String valueFromProperty;

    // You can also use environment
    @Autowired
    private Environment env;

    public void someMethod() {
        String prop = env.getProperty("some.property");
        MyBean bean = new MyBean();
        bean.setProp(prop);
        return bean;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:45:30.260

查看参考中的 Spring 的 @Value 注释（[第 4 章。IoC 容器](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html)）。

应加载属性：

```
<beans>
   <context:property-placeholder location="classpath:/com/acme/your.properties"/>
</beans> 
```

# django - Django 1.5 事务中间件：你需要使用它吗？

> ID：16030384
> 
> 赞同：2
> 
> 时间：2013-04-16T06:40:56.880
> 
> 标签：django, django-middleware

我们有这个超级奇怪的问题发生在 postgres 上，它只发生在随机请求上。我们得到一个 InterfaceError: connection already closed 这似乎是由 TransactionMiddleware 抛出的。这导致最终用户随机访问 500 个页面。

删除 TransactionMiddleware 似乎解决了我们所有的问题，但是我很害怕这实际上会做什么。如果您删除 TransactionMiddleware，它是否会通过脏读/写危及数据完整性或导致任何其他问题？

我在谷歌上搜索了一下，试图找出 TransactionMiddleware 抛出这个错误的原因，但似乎没有什么太相关。

谢谢，

麦克风

# android - 解析数组列表时出错

> ID：16030392
> 
> 赞同：1
> 
> 时间：2013-04-16T06:41:14.863
> 
> 标签：android

![在此处输入图像描述](https://i.stack.imgur.com/FOdEN.jpg)

```
 package com.bpi.gears;

    public class TodayDetails {

        private String location;
        private String weather;
        private int temp_c;
        private String relative_humidity;
        private String wind_dir;
        private int wind_kph;
        private int wind_gust_kph;
        private String pressure_mb;
        private int dewpoint_c;
        private String heat_index_c;
        private String visibility_km;
        private String precipitation;
        private String daily_precipitation;
        private String sunrise;
        private String sunset;
        private String icon_url;

        public String getLocation() {
            return location;
        }
        public void setLocation(String location) {
            this.location = location;
        }
        public String getWeather() {
            return weather;
        }
        public void setWeather(String weather) {
            this.weather = weather;
        }
            public int getTemp_c() {
            return temp_c;
        }
        public void setTemp_c(int temp_c) {
            this.temp_c = temp_c;
        }

        public String getRelative_humidity() {
            return relative_humidity;
        }
        public void setRelative_humidity(String relative_humidity) {
            this.relative_humidity = relative_humidity;
        }
        public String getWind_dir() {
            return wind_dir;
        }
        public void setWind_dir(String wind_dir) {
            this.wind_dir = wind_dir;
        }
        public int getWind_kph() {
            return wind_kph;
        }
        public void setWind_kph(int wind_kph) {
            this.wind_kph = wind_kph;
        }
        public int getWind_gust_kph() {
            return wind_gust_kph;
        }
        public void setWind_gust_kph(int wind_gust_kph) {
            this.wind_gust_kph = wind_gust_kph;
        }
        public String getPressure_mb() {
            return pressure_mb;
        }
        public void setPressure_mb(String pressure_mb) {
            this.pressure_mb = pressure_mb;
        }
        public int getDewpoint_c() {
            return dewpoint_c;
        }
        public void setDewpoint_c(int dewpoint_c) {
            this.dewpoint_c = dewpoint_c;
        }
        public String getHeat_index_c() {
            return heat_index_c;
        }
        public void setHeat_index_c(String heat_index_c) {
            this.heat_index_c = heat_index_c;
        }
        public String getVisibility_km() {
            return visibility_km;
        }
        public void setVisibility_km(String visibility_km) {
            this.visibility_km = visibility_km;
        }
        public String getPrecipitation() {
            return precipitation;
        }
        public void setPrecipitation(String precipitation) {
            this.precipitation = precipitation;
        }
        public String getDaily_precipitation() {
            return daily_precipitation;
        }
        public void setDaily_precipitation(String daily_precipitation) {
            this.daily_precipitation = daily_precipitation;
        }
        public String getSunrise() {
            return sunrise;
        }
        public void setSunrise(String sunrise) {
            this.sunrise = sunrise;
        }
        public String getSunset() {
            return sunset;
        }
        public void setSunset(String sunset) {
            this.sunset = sunset;
        }
        public String getIcon_url() {
            return icon_url;
        }
        public void setIcon_url(String icon_url) {
            this.icon_url = icon_url;
        }

    }
this is what your saying that is missing?this is my detail file i hope you can find my problem.this activity saves all strings and integer files in my activity.its all here so i know i didnt miss a thing

    package com.bpi.gears;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONObject;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.Toast;
public class WeatherToday extends Activity {
    ListView list_view_main;
    ProgressDialog pd=null;
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_weathertoday);
        this.pd = ProgressDialog.show(this, "Weather Today", "Please wait while fetching data...");
        GetAllToday();
    }
    private void GetAllToday() {
        (new fetchTodaysWeather(this)).execute();
    }
    private class fetchTodaysWeather extends AsyncTask<Void, ArrayList<TodayDetails>, ArrayList<TodayDetails>> {
        @SuppressWarnings("unused")
        Context mContext;
        public fetchTodaysWeather(Context context) {
            super();
            mContext = context;
         }
        ArrayList<TodayDetails> search_results = new ArrayList<TodayDetails>();
        TodayDetails today_details;
        @Override
        protected ArrayList<TodayDetails> doInBackground(Void... params) {

                        // Execute the request in the client
                        HttpResponse httpResponse = defaultClient.execute(httpGetRequest);
                        // Grab the response
                        BufferedReader reader = new BufferedReader(new InputStreamReader(httpResponse.getEntity().getContent(), "UTF-8"));
                        String json = reader.readLine();
                        JSONArray jsonArray = new JSONArray(json);
                        for(int i = 0; i < jsonArray.length(); i++) {
                            JSONObject row = jsonArray.getJSONObject(i);
                            today_details = new TodayDetails();
                            today_details.setLocation(row.getString("location"));
                            today_details.setWeather(row.getString("weather"));
                            today_details.setTemp_c(row.getInt("temp_c"));
                            today_details.setRelative_humidity(row.getString("relative_humidity"));
                            today_details.setWind_dir(row.getString("wind_dir"));
                            today_details.setWind_kph(row.getInt("wind_kph"));
                            today_details.setWind_gust_kph(row.getInt("wind_gust_kph"));
                            today_details.setWind_gust_kph(row.getInt("wind_gust_kph"));
                            today_details.setPressure_mb(row.getString("pressure_mb"));
                            today_details.setDewpoint_c(row.getInt("dewpoint_c"));
                            today_details.setHeat_index_c(row.getString("heat_index_c"));
                            today_details.setVisibility_km(row.getString("visibility_km"));
                            today_details.setPrecipitation(row.getString("lrecipitation"));
                            today_details.setDaily_precipitation(row.getString("daily_precipitation"));
                            today_details.setSunrise(row.getInt("hour")+row.getInt("minutes"));
                            today_details.setSunset(row.getInt("hour")+row.getInt("minutes"));
                            search_results.add(today_details);
                        }
                    } catch(Exception e){
                       e.printStackTrace();
                    }
                    return search_results;
                }
                protected void onPostExecute(ArrayList<TodayDetails> search_results) {
                    if(WeatherToday.this.pd != null){
                        WeatherToday.this.pd.dismiss();
                    }
                    ArrayList<TodayDetails> today_details = search_results;
                    list_view_main = (ListView)findViewById(R.id.todaylist);
                    list_view_main.setAdapter(new TodayListAdapter(getApplicationContext(), today_details));
                    }
                };
        } 
```

我正在制作一个列表视图，我遇到了这个问题，它说不匹配，但我没有不匹配，它还说 json 数组错误认为没关系，那么我的错误在哪里？我回收了这个代码，第一个活动工作正常这个活动不工作所以我想知道我在哪里犯了错误..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T06:44:13.543

你的 json 返回数据`JSONObject`不是 `JSONArray`，

更改您的代码，

```
JSONArray jsonArray = new JSONArray(json); 
```

更改`JSONArray`为`JSONObject`,

```
 JSONObject jsonobj = new JSONObject(json);

                today_details = new TodayDetails();
                today_details.setLocation(jsonobj.getString("location"));
                today_details.setWeather(jsonobj.getString("weather"));
                today_details.setTemp_c(jsonobj.getInt("temp_c"));
                today_details.setRelative_humidity(jsonobj.getString("relative_humidity"));
                today_details.setWind_dir(jsonobj.getString("wind_dir"));
                today_details.setWind_kph(jsonobj.getInt("wind_kph"));
                today_details.setWind_gust_kph(jsonobj.getInt("wind_gust_kph"));
                today_details.setWind_gust_kph(jsonobj.getInt("wind_gust_kph"));
                today_details.setPressure_mb(jsonobj.getString("pressure_mb"));
                today_details.setDewpoint_c(jsonobj.getInt("dewpoint_c"));
                today_details.setHeat_index_c(jsonobj.getString("heat_index_c"));
                today_details.setVisibility_km(jsonobj.getString("visibility_km"));
                today_details.setPrecipitation(jsonobj.getString("lrecipitation"));
                today_details.setDaily_precipitation(jsonobj.getString("daily_precipitation"));
            JSONObject  sunrise = jsonobj.getJSONObject("sunrise");
    today_details.setSunrise(String.valueOf(sunrise.getInt("hour"))+String.valueOf(sunrise.getInt("minutes")));
            JSONObject  sunset = jsonobj.getJSONObject("sunset");
                   today_details.setSunset(String.valueOf(sunset.getInt("hour"))+String.valueOf(sunset.getInt("minutes")));                    
                search_results.add(today_details); 
```

**更新**

对于参考， `JSONObject`由 覆盖`{}`和`JSONArray`覆盖`[]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:53:32.967

```
 use this way...

        JSONObject row = new JSONObject (json);

       today_details.setLocation(row.getString("location"));
       today_details.setWeather(row.getString("weather"));
       today_details.setTemp_c(row.getInt("temp_c"));
       today_details.setRelative_humidity(row.getString("relative_humidity"));
       today_details.setWind_dir(row.getString("wind_dir"));
         today_details.setWind_kph(row.getInt("wind_kph")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:07:38.843

我看到您的 url 不是数组 json，因此将您的代码固定为数组的一个元素。我放置了代码的正确部分：

```
 JSONObject row = new JSONObject(json);
        String s = row.getString("location");

        JSONObject inlineRow = row.getJSONObject("sunrise");
        int t1 = inlineRow.getInt("hour") + inlineRow.getInt("minute");
        Log.i("Location:",s + " Sunrise[hour:" + inlineRow.getInt("hour") + ", minute:" + inlineRow.getInt("minute") + "] = " + t1); 
```

# jquery - 使用内联js替换当前标签中的文本

> ID：16030394
> 
> 赞同：1
> 
> 时间：2013-04-16T06:41:19.553
> 
> 标签：jquery

是否可以像这样使用 jquery 替换当前标签中的字符串：

```
<td class="price"><script>$(this).text(accounting.formatMoney(parseFloat({{ product.price }}).toFixed(2), "€ ", 2, ".", ","));</script></td> 
```

实际上这不起作用。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T06:47:25.393

您可以将其设置为要执行的函数，但要等到页面加载后……您正在寻找类似这样的东西……首先，更改您的 HTML：

```
<td class="price">{{ product.price }}</td> 
```

那么这个脚本应该适合你：

```
$(function(){
    $('.price').each(function(){
        var price = $(this).text()
        $(this).text(accounting.formatMoney(parseFloat(price).toFixed(2), "€ ", 2, ".", ","))
    });
}); 
```

# javascript - 在 Objective-C 中从 javascript-rich 网站解析 HTML

> ID：16030396
> 
> 赞同：2
> 
> 时间：2013-04-16T06:41:21.750
> 
> 标签：javascript, objective-c, xcode, macos, html-parsing

如何从**使用 JavaScript**获取某些信息的网站**解析 HTML 数据。**（一些 JavaScript 代码构建了我想要使用的 HTML 代码。）

 **我找不到一种方法来获取 HTML 数据，包括由 JavaScript 在大约一秒的加载时间内加载的 HTML 数据。在*FireBug Lite*浏览器插件中，我可以看到*所有的 HTML 代码，包括那些 JavaScript 部分*，所以它*应该*以某种方式成为可能。

**如何在 Mountain Lion XCode 项目中做到这一点**？

（我想获取的带有 JavaScript 数据的示例站点： [http](http://www.scorespro.com/basketball/) ://www.scorespro.com/basketball/ ）**

# highcharts - pi-chart 的每个图例下方都有一个超链接

> ID：16030403
> 
> 赞同：1
> 
> 时间：2013-04-16T06:41:33.633
> 
> 标签：highcharts

```
legend: {
                enabled: true,
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'middle',
                labelFormatter: function () {
                    return this.y + ' ' + this.name;
                } 
```

你好

我有一个特殊要求。我需要在每个 pi 图表图例下方有一个超链接。

在每个图例下都应该出现一个超链接。

目前我正在通过更新 labelFormatter 来管理它，如下所示。

```
return this.y + ' ' + this.name+ '<br /> <a href="google.com/">' + this.x + '…. </a>' 
```

有没有更好的方法呢？

[http://www.highcharts.com/](http://www.highcharts.com/) [http://www.highcharts.com/demo/pie-basic](http://www.highcharts.com/demo/pie-basic)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T21:39:22.913

这是@Sebastian Bochan 所说的最好的方法。但是，如果您愿意，可以执行以下操作：

```
var urlData = ['Google','Bing','Yahoo','Other']; 
```

然后（与href相同）：

```
return this.y + ' ' + this.name+ '<br /> <a href="google.com/">' + urlData[this.x] + '</a>' 
```

[http://jsfiddle.net/uWAvP/3745/](http://jsfiddle.net/uWAvP/3745/)

# android - ScrollView VerticalFadingEdge 内的 Android WebView 失败 alfa

> ID：16030406
> 
> 赞同：1
> 
> 时间：2013-04-16T06:41:56.473
> 
> 标签：android, android-webview, scrollview

安卓4.0

```
<ScrollView requiresFadingEdge>
<LinearLayout>
<TextView/>
<TextView/>
<TextView/>
<WebView/>
</LinearLayout>
</ScrollView> 
```

如果 web 视图没有填满屏幕，这会很好地工作。如果发生这种情况，scrollView 的淡入淡出边缘将绘制成实线，留下一个空的上下边距。如果我删除 requiresFadingEdge，效果很好。

有没有人知道任何解决方案？谢谢

# javascript - 页面重定向后使用 touchstart 触发点击事件

> ID：16030407
> 
> 赞同：2
> 
> 时间：2013-04-16T06:42:00.680
> 
> 标签：javascript, events, touch, dom-events, touch-event

我有一个正确触发的 touchstart 事件，但在事件内部，有一个重定向到另一个页面。在该页面上，在与被触摸的按钮相同的位置，还有一个链接也被触发。

该事件触发一个成功重定向的 ajax 调用。除了幽灵 touchstart 的问题外，一切都正常工作。有没有简单的方法来处理这个问题？或者可能是一个不容易的方法来处理它？

# javascript - 如何在html中将var值显示为小数点后两位

> ID：16030418
> 
> 赞同：-4
> 
> 时间：2013-04-16T06:42:47.473
> 
> 标签：javascript, html

我在 html 中有两个 var 我希望当我将第一个 var 与第二个相除时，它会显示像 19.30 而不是 19.3 这样的数据

```
var a =20;
var b=386;
var c=b/a 
```

所以 c 应该在 html java 脚本中显示 19.30 而不是 19.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:45:18.857

```
var c_formatted = c.toFixed(2);
console.log(c_formatted); // 19.30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:07:46.933

正如@Barmar 所建议的那样，我也会提出同样的建议。但请确保 the`toFixed()`将返回 a`string`而不是 a ，因此我们必须通过在开头插入或使用函数`number`来手动转换它。`+ operator``Number()`

```
var a =20;
var b=386;
var c= +(b/a).toFixed(2); 
```

# ios - 错误：原因：'-[UITableViewCellSelectedBackground setImage:]

> ID：16030421
> 
> 赞同：0
> 
> 时间：2013-04-16T06:43:02.060
> 
> 标签：ios, xcode, ipad, uitableview, master-detail

我在我的应用程序中使用 SplitViewController。在主 ViewController 中，我使用的是 Custom table 。 ![这是主视图控制器的图像](https://i.stack.imgur.com/MNvqK.png)

这是代码： 在 ViewDidload 中：

```
self.items = [NSMutableArray arrayWithObjects:@"About Company", @"Contact Us", @"Nearest Center",  nil];

[self.tableView selectRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] animated:NO scrollPosition:UITableViewScrollPositionMiddle];

self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
    self.tableView.rowHeight = 100;
    self.tableView.backgroundColor = [UIColor purpleColor];

#pragma mark - UITableViewDataSource

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.items count];

}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return @" " ;
}

- (UITableViewCell *)tableView:(UITableView *)atableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
#if USE_CUSTOM_DRAWING
    const NSInteger TOP_LABEL_TAG = 1001;
    const NSInteger BOTTOM_LABEL_TAG = 1002;
    UILabel *topLabel;
    UILabel *bottomLabel;
#endif
    static NSString *CellIdentifier = @"Cell"; // <-- Make sure this matches what you have in the storyboard

    UITableViewCell *cell = [atableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
#if USE_CUSTOM_DRAWING
        UIImage *indicatorImage = [UIImage imageNamed:@"indicator.png"];
        cell.accessoryView =  [[UIImageView alloc]initWithImage:indicatorImage];

        const CGFloat LABEL_HEIGHT = 20;
        UIImage *image = [UIImage imageNamed:@"imageA.png"];

        //
        // Create the label for the top row of text
        //
        topLabel =[[UILabel alloc]initWithFrame:CGRectMake(image.size.width + 2.0 * cell.indentationWidth,
                       0.5 * (atableView.rowHeight - 2 * LABEL_HEIGHT),
                     atableView.bounds.size.width -
                     image.size.width - 4.0 * cell.indentationWidth
                     - indicatorImage.size.width,
                     LABEL_HEIGHT)] ;
        [cell.contentView addSubview:topLabel];

        //
        // Configure the properties for the text that are the same on every row
        //
        topLabel.tag = TOP_LABEL_TAG;
        topLabel.backgroundColor = [UIColor clearColor];
        topLabel.textColor = [UIColor colorWithRed:0.25 green:0.0 blue:0.0 alpha:1.0];
        topLabel.highlightedTextColor = [UIColor colorWithRed:1.0 green:1.0 blue:0.9 alpha:1.0];
        topLabel.font = [UIFont systemFontOfSize:[UIFont labelFontSize]];

        //
        // Create the label for the top row of text
        //
        bottomLabel =[[UILabel alloc]initWithFrame:CGRectMake(image.size.width + 2.0 * cell.indentationWidth,
                     0.5 * (atableView.rowHeight - 2 * LABEL_HEIGHT) + LABEL_HEIGHT,
                     atableView.bounds.size.width -
                     image.size.width - 4.0 * cell.indentationWidth
                     - indicatorImage.size.width, LABEL_HEIGHT)];
                [cell.contentView addSubview:bottomLabel];

        //
        // Configure the properties for the text that are the same on every row
        //
        bottomLabel.tag = BOTTOM_LABEL_TAG;
        bottomLabel.backgroundColor = [UIColor clearColor];
        bottomLabel.textColor = [UIColor colorWithRed:0.25 green:0.0 blue:0.0 alpha:1.0];
        bottomLabel.highlightedTextColor = [UIColor colorWithRed:1.0 green:1.0 blue:0.9 alpha:1.0];
        bottomLabel.font = [UIFont systemFontOfSize:[UIFont labelFontSize] - 2];

        //
        // Create a background image view.
        // 
        cell.backgroundView = [[UIImageView alloc] init];

        cell.selectedBackgroundView =[[UIImageView alloc] init];
      //  cell.selectionStyle = UITableViewCellSelectionStyleNone;
#endif
    }

#if USE_CUSTOM_DRAWING
    else
    {
        topLabel = (UILabel *)[cell viewWithTag:TOP_LABEL_TAG];
        bottomLabel = (UILabel *)[cell viewWithTag:BOTTOM_LABEL_TAG];
    }

    topLabel.text = [self.items objectAtIndex:indexPath.row];
    bottomLabel.text = [self.items objectAtIndex:indexPath.row];

    //
    // Set the background and selected background images for the text.
    // Since we will round the corners at the top and bottom of sections, we
    // need to conditionally choose the images based on the row index and the
    // number of rows in the section.
    //
    UIImage *rowBackground;
    UIImage *selectionBackground;
    NSInteger sectionRows = [atableView numberOfRowsInSection:[indexPath section]];
    NSInteger row = [indexPath row];
    if (row == 0 && row == sectionRows - 1)
    {
        rowBackground = [UIImage imageNamed:@"topAndBottomRow.png"];
        selectionBackground = [UIImage imageNamed:@"topAndBottomRowSelected.png"];
    }
    else if (row == 0)
    {
        rowBackground = [UIImage imageNamed:@"topRow.png"];
        selectionBackground = [UIImage imageNamed:@"topRowSelected.png"];
    }
    else if (row == sectionRows - 1)
    {
        rowBackground = [UIImage imageNamed:@"bottomRow.png"];
        selectionBackground = [UIImage imageNamed:@"bottomRowSelected.png"];
    }
    else
    {
        rowBackground = [UIImage imageNamed:@"middleRow.png"];
        selectionBackground = [UIImage imageNamed:@"middleRowSelected.png"];
    }
    ((UIImageView *)cell.backgroundView).image = rowBackground;
    ((UIImageView *)cell.selectedBackgroundView).image = selectionBackground;

    //
    // Here I set an image based on the row. This is just to have something
    // colorful to show on each row.
    //

    switch ([indexPath row]) {
        case 0:
            cell.imageView.image = [UIImage imageNamed:@"imageA.png"];
            break;
        case 1 :
            cell.imageView.image = [UIImage imageNamed:@"imageB.png"];
            break;
        default:
            break;
    }

#else
    //cell.text = [NSString stringWithFormat:@"Cell at row %ld.", [indexPath row]];

    // Configure the cell.
    cell.textLabel.text = [self.items objectAtIndex:indexPath.row]; // Set the MasterViewController's tableView row "Cell" to display selected  array element
   #endif

    return cell;
} 
```

这是我得到的错误：

> -[UITableViewCellSelectedBackground setImage:]：无法识别的选择器发送到实例 0x7616300 2013-04-16 11:41:40.841 ICare[1144:c07] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[UITableViewCellSelectedBackground setImage:]：无法识别的选择器发送到实例 0x7616300' ***First throw call stack: (0x1532012 0x1357e7e 0x15bd4bd 0x1521bbc 0x152194e 0xa3da 0x7358fb 0x7359cf 0x71e1bb 0x71c872 0x7275d4 0x72a1c4 0x72a546 0x85ab 0x75c1c7 0x75c232 0x75c4da 0x7738e5 0x7739cb 0x773c76 0x773d71 0x77489b 0x7749b9 0x774a45 0x87a20b 0x6cb2dd 0x136b6b0 0x19ffc0 0x19433c 0x19feaf 0x76a2bd 0x6b2b56 0x6b166f 0x6b1589 0x6b07e4 0x6b061e 0x6b13d9 0x6b42d2 0x75e99c 0x6ab574 0x6ab76f 0x6ab905 0x6b4917 0x67896c 0x67994b 0x68acb5 0x68bbeb 0x67d698 0x2629df9 0x2629ad0 0x14a7bf5 0x14a7962 0x14d8bb6 0x14d7f44 0x14d7e1b 0x67917a 0x67affc 0x7bbd 0x2995 0x1) libc++abi.dylib: terminate called throwing an exception (lldb)

我错过了一些东西。但我无法解决它，因为我是 IOS 开发的新手。

任何帮助或建议应不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:59:01.763

那是因为您将图像设置为 UIView 而不是 UIImageView 。和排队一样

```
((UIImageView *)cell.selectedBackgroundView).image = selectionBackground; 
```

您正在尝试将图像设置为 selectedBackgroundView 但它是一个视图，因此您可以将图像视图作为子视图添加到它，或者您可以使用背景颜色的图案图像。

所以你可以复制你的代码

**1.**

```
UIImageView *imgView =  [[UIImageView alloc] initWithFrame:cell.selectedBackgroundView.frame];
[imgView setImage:selectionBackground];
[cell.selectedBackgroundView addSubview:imgView]; 
```

**2.**

```
[cell.selectedBackgroundView setBackgroundColor:[UIColor colorWithPatternImage:selectionBackground]]; 
```

它不会给你这个错误并且可以正常工作。希望它可以帮助你。

# c# - C#：将对象添加到列表中 动态分类

> ID：16030428
> 
> 赞同：-7
> 
> 时间：2013-04-16T06:43:26.757
> 
> 标签：c#, list

我想将所有对象动态添加到列表中，而无需任何硬编码。

代码：

```
static void Main(string[] args)
    {
        Item objA = new Item();
        Item objB = new Item();
        int count = Item.getCount();// count = 2

        List<Item> cont1 = new List<Item>();
        while (count > 0)
        {
            for (int i = 0; i < count; i++)
            {
                cont1.Add();
                //I missing an instance to get the objA and objB into cont1
                //I dont want hard code it, e.g: cont1.Add(objA).
            }

        }
   } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T08:39:13.847

根据您的评论：

如果您多次创建 'static Item objA = new Item()'，最终得到：

```
static Item objA = new Item();
static Item objB = new Item();
....
static Item objZ = new Item(); 
```

然后将它们全部放入列表中，您**几乎**别无他法：

```
list = new List<Item>;
list.Add(objA);
list.Add(objB);
...
list.Add(objZ); 
```

这是因为您已经创建了这些项目，并且已经将它们放入了几十个不同的变量中，并且要将它们放入列表中，您只需告诉编译器**应该从哪里获取它们**。这意味着，您必须告诉他从 objA 变量、objB 变量和 (...) 等中获取它。这是因为您将它们放在不同的变量中。

关键是你一开始就应该选择错误的方式。首先，您不应该创建“objA、objB、objC、....、objZ”。它应该是一个列表或数组或字典或任何集合，以便您可以轻松地一次访问所有项目。不应将它们放入单独的变量中。

如果可以，请不要创建可能的变量。例如，使用字典：

```
Dictionary<string, Item> items = new Dictionary<string, Item>();
items["A"] = new Item();
items["B"] = new Item();
...
items["Z"] = new Item(); 
```

现在，您可以轻松地创建一个项目：

```
items["F"].Something = 321;
items["O"].Something = 123; 
```

您也可以轻松访问**所有项目**：

```
var number = items.Values.Count;

itemList = new List<Item>( items.Values ); 
```

当然，有时你只是没有这样的选择。例如，WinForms Designer 会为您创建变量，如果您在表单上放置 100 个标签，您几乎总是会拥有 100 个变量（尽管绝不是静态的）。

尽管如此，所有这些变量都将属于某个类。如果您的项目设置允许您使用反射，那么您可以检查该类并获取名称/属性列表，并且您可以读取它们的值：

```
class X
{
    public static Item objA = new Item();
    ..., objB, objC, ..... ,.....,
}

...

List<Item> items = new List<Item>();
foreach (var field in typeof(ListaUczniow).GetFields(BindingFlags.Static | BindingFlags.Public))
    if (field.Name.StartsWith("obj") && field.FieldType == typeof(Item))
        items.Add( (Item) field.GetValue(null) ); 
```

这可能对您有用，但总的来说，这是一种非常脆弱的方法：您必须注意正确的 BindingFlags、正确的字段名称、正确的字段类型，并且编译器无法自动检查对 Item 的强制转换，甚至可能会出现一些安全问题如果您在 Silverlight 上编写 ie 并且您的字段是私有的，则会出现这种情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T06:50:20.423

```
int count = Item.getCount();// count = 2 
```

在我看来，当调用构造函数并且您想在循环中访问此类的每个实例时，您的 Item 类“在后台”增加了一个计数器？

如果是这样，您最好的选择似乎是将 List 作为（私有）静态属性直接添加到 Item 类本身，并让构造函数 Add(this) 到此列表中。然后可以通过静态`ReadOnlyCollection<Item>`集合来公开它。

# java - 符合 Grabage 收集条件的对象

> ID：16030434
> 
> 赞同：0
> 
> 时间：2013-04-16T06:43:55.693
> 
> 标签：java, garbage-collection

```
interface Animal { void makeNoise(); } 

class Horse implements Animal {
  Long weight = 1200L; 
  public void makeNoise() { System.out.println("whinny"); } 
} 

public class Icelandic extends Horse {

  public void makeNoise() { System.out.println("vinny"); } 
  public static void main(String[] args) { 
    Icelandic i1 = new Icelandic(); 
    Icelandic i2 = new Icelandic(); 
    Icelandic i3 = new Icelandic(); 
    i3 = i1; 
    i1 = i2;
    i2 = null;
    i3 = i1; 
    //<-- HERE
  } 
} 
```

到达 HERE 时，有多少对象符合条件`garbage collector`？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:00:36.677

可以清理四个对象。有两个`Icelandic`不再引用的对象和两个`Long`对象。一个冰岛语和一个 Long 和 String[] 仍然可以被引用。

注意：Java 的未来版本可能会像 1200L 这样自动装箱 Long，在这种情况下，答案将只是 2，因为 Long 仍会被引用。例如，您将示例更改`Integer`为答案将取决于命令行参数。

顺便说一句：我不知道[冰岛语](https://www.google.de/search?q=icelandic)是一种马。也许[IcelandicHorse](http://en.wikipedia.org/wiki/Icelandic_horse)会不那么令人困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:00:56.880

在以下情况下，对象可以在 Java 中进行垃圾回收：

*   对象的引用设置为*null*。
*   对象是在块内创建的，一旦控制退出该块，引用就会超出范围。

一般来说，如果一个对象不能从*任何活动线程*或*任何静态引用*中访问，它就有资格进行 GC 。

现在，在澄清这一点之后，您应该能够进行计算并回答问题。

```
 ____________________________________
     |            ___              ___    |
     |  x------->|:) |    y------>|:) |   |
     |           |_X_|            |_Y_|   |
     |____________________________________| 
```

现在让我们说`x`设置为*null*：

```
 _____________________________________
    |            ___              ___     |
 null<------ x  |:( |     y----->|:) |    |
    |           |_X_|            |_Y_|    |
    |_____________________________________| 
```

然后不再有指向 的引用`X`，因此它有资格进行 GC。

请注意，如果有另一个变量（例如`x2`）指向`X`，则在将其设置为*null后它将**不*符合 GC 条件，因为仍将指向它。`x`*`x1`*

 *在澄清后告诉我们您的想法，我们将讨论您的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:20:55.077

可以收集 2 个冰岛实例，因为仍然引用了第二个实例。长重量也是如此。您可以使用 VisualVM 监控对象分配，手动激活 GC 并查看剩下的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T07:39:26.697

**通过考虑您仍在该范围内的事实，**两个对象有资格进行垃圾回收。****

 ****i1** & **i3**创建的对象符合垃圾回收条件。**i2**
创建的对象不符合条件。

 **```
System.out.println(i3 == i1); 
```

打印**true**。两个引用都指向同一个对象。其他两个对象有资格进行垃圾回收。*****

# sql-server-2008 - SSIS 不读取行和列分隔符

> ID：16030437
> 
> 赞同：0
> 
> 时间：2013-04-16T06:44:02.463
> 
> 标签：sql-server-2008, ssis

我有一个带有列分隔符的文本文件 | （管道）和行分隔符作为 CRLF（新行字符）。输出是一个 SQL 表。如果文件中的数据有更多管道（|）或更多 CRLF 字符，那么我的连接管理器如下所示：-

1.  文件中的数据。格式正确。那么表中的输出是对的。

    ```
    [Global Unique Identifier]|[KPI Name]|[KPI Description]|[Process Impacted]|
    [Objective]|[Strategy ID]|[KPI Category]|[KPI Measure Type]
    A26|name|Desc|TPI|YYY|12|CAT|MT
    A27|name|Desc|TPI|YYY|12|CAT|MT
    A28|name|Desc|TPI|YYY|12|CAT|MT 
    ```

2.  文件中的数据在第二行中具有更多列分隔符，如下所示

    ```
    A26|name|Desc|TPI|YYY|12|CAT|MT
    A27|name|Desc|TPI|YYY|12|CAT|MT|||||||||
    A28|name|Desc|TPI|YYY|12|CAT|MT 
    ```

    文件中的输出也如上。即第二行的最后一列的所有管道也被视为数据。

3.  文件中的数据如下。即第一行只有一列，我们不会给出其他列分隔符并给出行分隔符。

    ```
     A26
     A27|name|Desc|TPI|YYY|12|CAT|MT
     A28|name|Desc|TPI|YYY|12|CAT|MT 
    ```

然后文件中的输出如下。我们将第一列合并到第二行的第一列。

```
A26 A27|name|Desc|TPI|YYY|12|CAT|MT
A28|name|Desc|TPI|YYY|12|CAT|MT 
```

SSIS 需要正确的分隔符，然后才会给出正确的输出。否则输出表中的数据不正确。这可以以任何方式处理吗？

如果对此问题有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:16:27.477

这对您来说是一个很好的起点。

1.  我使用以下文件作为源。将其保存到 C:\Temp\1.TXT

> [全局唯一标识符]|[KPI 名称]|[KPI 描述]|[流程受影响]|[目标]| 策略 ID]|[KPI 类别]|[KPI 度量类型]
> 
> ```
> A26|name1|Desc|TPI|YYY|12|CAT|MT
> A27|name2|Desc|TPI|YYY|12|CAT|MT
> A28|name3|Desc|TPI|YYY|12|CAT|MT
> B26|name4|Desc|TPI|YYY|12|CAT|MT
> B27|name5|Desc|TPI|YYY|12|CAT|MT|||||||||
> B28|name6|Desc|TPI|YYY|12|CAT|MT
> C26
> C27|name7|Desc|TPI|YYY|12|CAT|MT
> C28|name8|Desc|TPI|YYY|12|CAT|MT 
> ```

1.  在控制流表面上放置一个 DFT。
2.  将脚本组件作为源放在 DFT 上

    3.1。转到输入和输出部分

    3.2\. 添加输出。将其命名为 GoodRow。

    ```
     3.2.1 Add the following output columns - GUID, KPIN, KPID, PI, Obj, SID, KPIC, KPIMT 
    ```

    3.3 添加另一个输出。将其命名为 BadRow。3.3.1 只添加一个输出列：AllFields

3.  现在转到脚本//编辑脚本。把下面的代码。确保添加

> 使用 System.IO；

到命名空间区域。

```
public override void CreateNewOutputRows()
{

    string[] lines = File.ReadAllLines(@"C:\temp\1.txt");

    int iRowCount = 0;
    int iFieldCountHeader = 0;
    string[] fields = null;

    foreach (string line in lines)
    {
        if (iRowCount == 0)
        {
            iFieldCountHeader = line.Split('|').Length;
            iRowCount++;
        }
        else
        {
            fields = line.Split('|');

            if (fields.Length == iFieldCountHeader) // good row
            {
                GoodRowBuffer.AddRow();

                GoodRowBuffer.GUID = fields[0];
                GoodRowBuffer.KPIN = fields[1];
                GoodRowBuffer.KPID = fields[2];
                GoodRowBuffer.PI = fields[3];
                GoodRowBuffer.Obj = fields[4];
                GoodRowBuffer.SID = fields[5];
                GoodRowBuffer.KPIC = fields[6];
                GoodRowBuffer.KPIMT = fields[7];
            }
            else // bad row
            {
                BadRowBuffer.AddRow();

                BadRowBuffer.AllFields = line;
            }

        }
    }
} 
```

1.  测试您的代码：在您放置 Script 组件的正下方添加两个 Union All 组件。将一个命名为 GoodRows，另一个命名为 BadRows。将 Script 组件的两个输出连接到这些 Union All 组件。放置数据查看器。

希望这对您有所帮助。请告诉我们。

PS：当你添加一个 Script 组件作为 Source 时，有一个默认输出。删除它，然后创建上面提到的两个输出。我知道你会那样做，但只是为了确保...

# c# - 在asp.net MVC视图c#中显示DICOM MPR图像

> ID：16030438
> 
> 赞同：1
> 
> 时间：2013-04-16T06:44:07.957
> 
> 标签：c#, asp.net-mvc, dicom

我的应用程序是asp.net MVC3；目前我可以使用图像处理程序显示 DCIOM MPR 图像并使用以下方法将图像存储在会话中：

```
objImage = im.Bitmap(outputSize, System.Drawing.Imaging.PixelFormat.Format24bppRgb, m);
context.Response.ContentType = "image/png";
objImage.Save(context.Response.OutputStream,     
System.Drawing.Imaging.ImageFormat.Png); 
```

它工作正常，但是当我旋转图像时，响应非常慢！！我正在尝试使用以下命令将 DICOM MPR 作为会话变量存储在控制器中：

```
............
DicomImageMPR mpr1 = new DicomImageMPR(volume);
mpr1.SetViewPlane(new Point3D(), new Vector3D(0, 1, 0), new Vector3D(0, 0, -1));
mpr1.Interpolation = InterpolationType3D.Trilinear;
MySession.Current.mpr1 = mpr1; 
```

我的问题是如何将图像放入视图包中以显示在视图中？我会很感激你的建议，并在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T17:34:43.240

我通过使用以下方法解决了它：

```
 public ActionResult GenerateImage()
            {
                FileContentResult result;
                System.Drawing.Image objImage = null;
              ....
                mpr = MySession.Current.mpr2;
                im = mpr;
               ...
                objImage = im.Bitmap(outputSize,  
                System.Drawing.Imaging.PixelFormat.Format24bppRgb, m);
                using (var memStream = new MemoryStream())
                {
                    objImage.Save(memStream, System.Drawing.Imaging.ImageFormat.Png);
                    result = this.File(memStream.GetBuffer(), "image/png");
                }

                return result;
            } 
```

在视图中：

```
<img src='<%=Url.Action("GenerateImage")%>' alt="" id="dImage"/> 
```

希望这可以帮助某人。

# twitter-bootstrap - 将 Twitter Bootstrap 不可关闭模式转换为可关闭模式

> ID：16030448
> 
> 赞同：7
> 
> 时间：2013-04-16T06:44:59.350
> 
> 标签：twitter-bootstrap

我正在使用 Twitter Bootstrap 创建一个无法关闭的模式。这是故意的。但是，十秒钟后，我希望用户能够通过按退出键或在其外部单击来关闭模式。这可以做到吗？这是示例代码：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title></title>
        <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
    </head>
    <body>
        <!-- Button to trigger modal -->
        <a href="#myModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>

        <!-- Modal -->
        <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
            <div class="modal-header">
                <h3 id="myModalLabel">A Modal That Can't Be Closed</h3>
            </div>
            <div class="modal-body">
                <p>There is no way to close this modal. I would like to make it so that after ten seconds, pressing the escape key or clicking outside the modal causes the modal to close.</p>
            </div>
        </div>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
        <script>
            $('#myModal').on('shown', function() {
                setTimeout(function() {
                    alert('The modal has been open for 10 seconds.');
                }, 10000);
            });
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T15:17:22.890

不幸的是，最简洁的方法是调用**模态**对象的一些方法，这些方法不一定是公共 API 的一部分，即使这些方法在技术上在其范围内是公共的。这意味着，如果您将此代码投入生产，则每次升级时都必须小心检查**bootstrap-modal.js实现中的更改。**这是如何做到的：

## JS

```
$('#myModal').on('shown', function() {
  // hold a ref to the modal object
  var mdl = $(this).data('modal')

  setTimeout(function() {
    console.log('The modal has been open for 10 seconds.');

    // enable keyboard escaping
    mdl.options.keyboard = true
    mdl.escape()

    // but re-disable it for future show events ;)
    mdl.options.keyboard = false

    // replace refocus handler with hide() invocation
    mdl.$backdrop.off('click')
    mdl.$backdrop.click($.proxy(mdl.hide, mdl))

  }, 10000); // ten seconds
}); 
```

## [普朗克](http://plnkr.co/edit/Eh8XqJT3hlZGyQD3ya2s?p=preview)

相关代码在live example的**script.js**中，默认为3秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T08:53:58.017

这是我的解决方案：http: [//jsfiddle.net/g5bDC/1/](http://jsfiddle.net/g5bDC/1/)

只需添加一个禁用按钮（在页脚中）并在 X 秒后启用它

HTML：

```
<div class="modal-footer"> 
    <a href="#" class="btn" disabled=disabled id="closeBtn" aria-hidden="true">Close</a>
</div> 
```

JS：

```
$('#myModal').on('shown', function () {
    setTimeout(function () {
        $('#closeBtn').removeAttr('disabled').attr('data-dismiss', 'modal');
    }, 5000);
}); 
```

编辑：根据 MartinHN，这里是更新版本：http: [//jsfiddle.net/g5bDC/2/](http://jsfiddle.net/g5bDC/2/)

JS 现在是：

```
$('#myModal').on('show', function() {
    $('#closeBtn').attr('disabled', 'disabled');
});

$('#myModal').on('shown', function() {
    setTimeout(function() {
        $('#closeBtn').removeAttr('disabled').attr('data-dismiss', 'modal');
    }, 2000);
}); 
```

# javascript - 检查是否设置了变量的最佳方法是什么？

> ID：16030449
> 
> 赞同：1
> 
> 时间：2013-04-16T06:45:00.903
> 
> 标签：javascript

在我看来，Javascript 有很多奇怪的怪癖。这是其中之一

```
var a;
!a //true, a is not set
a = null
!a //true, a is not set
a = 1
!a //false, a is set!
a = 0
!a//true, a is not set! 
```

我发现所有这些值都非常合理，除了 a = 0 的情况，这对我来说是完全错误的。有没有任何合理的方法可以规避这个问题，而不必在我的代码中添加大量内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:46:44.930

[使用typeof](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FOperators%2FSpecial_Operators%2Ftypeof)检查它

```
if(typeof(a) != "undefined") {
     //code goes here
} 
```

这里有一些相关的问题。

[如何检查 JavaScript 中是否定义了变量？](https://stackoverflow.com/questions/519145/how-can-i-check-whether-a-variable-is-defined-in-javascript)

[测试是否在javascript中定义了变量？](https://stackoverflow.com/questions/7578917/test-if-a-variable-is-defined-in-javascript/7578941#7578941)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:55:09.813

```
if (typeof a !="undefined")
{
 //write your code here
} 
```

# android - android中表情符号的自定义键盘

> ID：16030450
> 
> 赞同：2
> 
> 时间：2013-04-16T06:45:01.680
> 
> 标签：android, keyboard, emoticons

我想为我的聊天应用程序使用表情符号的自定义键盘和默认键盘。对于编写消息，用户可以在这两个键盘之间切换。

在 android 中实现此功能的最佳方法是什么？

# mysql - 红帽mysql失败

> ID：16030453
> 
> 赞同：1
> 
> 时间：2013-04-16T06:45:11.300
> 
> 标签：mysql, linux, redhat

```
Linux xxxxxx 2.6.32-131.0.15.el6.x86_64 #1 SMP Tue May 10 15:42:40 EDT 2011 x86_64 x86_64 x86_64 GNU/Linux

 '#'rpm -qa | grep mysql

    mysql-server-5.1.52-1.el6_0.1.x86_64
    mysql-connector-odbc-5.1.5r1144-7.el6.x86_64
    mysql-5.1.52-1.el6_0.1.x86_64
    mysql-libs-5.1.52-1.el6_0.1.x86_64
    qt-mysql-4.6.2-17.el6.x86_64 
```

我尝试`chmod`并`chown`与.`'/var/lib/mysql/mysql.sock'``/tmp/mysql.sock`

当我启动 Mysql 时，它指出：

> 错误 2002 (HY000): 无法通过套接字'/var/lib/mysql/mysql.sock' (40) 连接到本地 MySQL 服务器

我尝试`mysql`两者`mysqld`：

```
 service mysql status 
```

它回来了。

我也无法启动mysql my `/etc/init.d/mysql start`and`/etc/init.d/mysqld start`

> /etc/init.d/mysql start -bash: /etc/init.d/mysql: 没有那个文件或目录
> 
> mysql：无法识别的服务

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T08:23:17.433

我找到了解决方案：我需要安装`php`、`mysql`和包。 `mysqld``php-mysql`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-04T10:27:42.583

`Package mysql is obsoleted by MySQL-server, trying to install MySQL-server-5.1.48-1.glibc23.x86_64 instead Package MySQL-server-5.1.48-1.glibc23.x86_64 already installed and latest version`

看起来您从主页下载了 MySQL-server 软件包并使用 rpm -ivh 安装。验证：

`$ rpm -qa | grep MySQL`

如果要从存储库（base、epel、...）安装 mysql-server，则必须首先通过执行以下命令卸载 MySQL-server：

`# yum remove MySQL-*`

然后

`# yum install mysql mysql-server mysql-devel`

*MySQL-server*包中的 init 脚本是**mysql**而不是 mysql-server 中的**mysqld**。提示您输入一些字符 (/etc/init.d/mysq) 并按*Tab 或 Tab Tab*。

# extjs - Adobe CQ | 有没有办法通过拖放自定义多字段组件以拥有多个图像？

> ID：16030455
> 
> 赞同：1
> 
> 时间：2013-04-16T06:45:18.940
> 
> 标签：extjs, aem

我试图开发一个组件，其中一个可以在一个选项卡下的单个对话框中拖动任意数量的图像。我试图编辑多字段组件但没有成功。有没有办法通过拖放自定义多字段组件以拥有多个图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T03:37:07.623

smartimage xtype 是在它自己的 TabPanel 上。[http://dev.day.com/docs/en/cq/5-4/widgets-api/index.html?class=CQ.form.SmartImage](http://dev.day.com/docs/en/cq/5-4/widgets-api/index.html?class=CQ.form.SmartImage) 因为它想填满整个面板，你会有显示问题。

在尝试将 smartimage 小部件添加到多字段时，我遇到了很多问题。其他主要问题之一是 smartimage 拖放事件不会触发。多字段需要考虑每种类型的组件以及每个可能触发的所有不同事件。它根本不能很好地处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T19:07:50.610

你可以试试[http://experience-aem.blogspot.com/2013/12/aem-cq-56-adding-images-in-multifield.html](http://experience-aem.blogspot.com/2013/12/aem-cq-56-adding-images-in-multifield.html)它有必要的扩展逻辑在多字段中添加图像

# iphone - 如何用多种颜色填充 CircularProgressBar

> ID：16030464
> 
> 赞同：1
> 
> 时间：2013-04-16T06:45:46.637
> 
> 标签：iphone, ios, quartz-core

我已经使用本教程[链接实现了 CircularProgress Bar](http://www.turnedondigital.com/2011/quartz-tutorial-how-to-draw-in-quartz/)

但我想用两种或三种颜色填充这个 CircularProgress Bar，而不是只有一种颜色。我该怎么做，请帮帮我。

提前致谢

# mysql - 从 Mysql 表中删除重复的行并只保留一行

> ID：16030470
> 
> 赞同：1
> 
> 时间：2013-04-16T06:46:08.443
> 
> 标签：mysql

我想从 Mysql 表中删除所有重复的行。
但问题是我不知道哪些行是重复的。
这个 Mysql 表包含大约 500000 行的大数据。
其中一些行是重复的。
请指导我如何做到这一点。

**更新：**

我需要在 phpMyAdmin 中运行的 SQL 查询。
这是一个粗略的表格，可以理解。
假设表名是**foo**。

```
+---------------------------------------------------------------------+
| id |   link  |     title              |  description                |
+---------------------------------------------------------------------+
| 1  |  google |     search engine      |  search here free           |  
| 2  |  yahoo  |    also search engine  | findout web easily          |  
| 3  | Facebook|  connect with world    | meet with world             |  
| 4  | google  |  search engine         |  search here free           |
| 5  | msn     | Microsoft network      | network by MS               |
| 6  | google  | search engine          |  search here free           |
| 7  | msn     | Microsoft network      | network by MS               |
| 8  | yahoo   |  also search engine    | findout web easily          |
| 9  | myweb   |  my website            | ideal website               |
|... | ....    | .....continue....      | ..... ... .....             |
+---------------------------------------------------------------------+ 
```

这是一张粗略的表，我无法完全定义我的表，因为它大约有 500000
行。希望这能理解你我想要什么。
我这样粗略查询。

```
DELECT all duplicate rows FROM foo 
```

**编辑**
我看到这个 questoin 被标记为重复。但我认为它是唯一的。与这个链接你比较它是重复的。我看到这个链接并且有一个答案标记为对小尺寸表有用它会更改索引并制作唯一索引。这是那个的代码

```
 ALTER IGNORE TABLE jobs ADD UNIQUE INDEX idx_name (site_id, title, company ); 
```

如果您在添加任何数据时运行此查询，Mysql 检查它是否已经存在或不存在，如果存在它会停止添加。
我已经告诉过您，如果使用此查询，我的表包含大量数据，然后我在表中添加一个结果，它会检查我的整个表，其中大约 500000 行使其唯一，这使它变慢。它只有一个如果这是 10 条新记录，或者如果我想输入 100000 条新记录，你的想法是什么，它太慢了。
而且我看到其他答案中的大多数都包含类`HAVING`。它已经很慢了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T07:29:55.660

您可能可以在 DELETE 中使用 JOIN 来连接子选择。

需要更多细节才能提供更多帮助，但对于一个粗略的想法：-

```
DELETE result 
FROM result
INNER JOIN (SELECT SomeField, COUNT(*) AS RecCount, MAX(DateAddded) AS MaxDateAdded FROM result GROUP BY SomeField) b
ON result.SomeField = b.SomeField AND a.DateAdded != b.MaxDateAdded 
```

这是查找**SomeField**的每一次出现，并添加了相应的最大日期，并删除在添加的最大日期不匹配的任何地方。

我假设你想保持最新的记录。

请注意，像这样的大规模删除有点令人担忧，因为如果您弄错了，您可能会删除所有记录。

编辑 - 与您现在给出的表格一起使用的版本。这将删除重复项，只留下第一个相同的（即对于 Google，您只剩下 id 为 1 的行）

```
DELETE foo 
FROM foo
INNER JOIN (SELECT link, title, description, MIN(id) AS MinId FROM foo GROUP BY link, title, description ) b
ON foo.link = b.link
AND foo.title = b.title 
AND foo.description = b.description
AND foo.id != b.MinId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:09:19.047

使用脚本语言，例如 perl 或 python

1）做一个查询来加载每一行

2) 计算所有应该唯一的字段的校验和。例如，如果 name 和 cost 每个唯一值应该只有一个条目，请计算校验和。像 md5 这样的散列算法将是理想的

3) 使用“id”或某种方式存储每个校验和，以便可以识别该行以供以后删除

4) 有一套规则系统来解决允许一组非唯一记录中的哪一个记录

5）一旦查询处理完成并找到所有重复项，使用规则和 id / checksums 集生成 SQL 删除命令（或删除命令集）

6) 执行删除命令

7）改变你的数据库结构，所以有一个独特的约束来防止这种情况再次发生

该数据库只有 500 000 行，因此存储 id 信息和校验和在大多数脚本语言的能力范围内

# c# - 读取xml属性

> ID：16030476
> 
> 赞同：2
> 
> 时间：2013-04-16T06:46:26.453
> 
> 标签：c#, xml, linq, linq-to-xml

我很困惑......我再也没有什么想法了......我需要从这种类型中读取每个属性`xmldocument`

```
<party_list>
   <party currency="BAM" id="330-159210014235851" />
   <party currency="EUR" id="330-153990008540078" />
</party_list> 
```

我有这个......但无济于事

```
XDocument doc = XDocument.Load(@"e:\input\partylist.xml");
XElement root1 = doc.Element("party_list");
foreach (XElement element in root1.Elements())
{
   MessageBox.Show(element.Element("party").Value);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T06:49:59.417

代替

```
MessageBox.Show(element.Element("party").Value); 
```

和

```
MessageBox.Show((string)element.Attribute["currency"]); 
```

因为您的元素已经是`party`元素。

* * *

完整代码：

```
XDocument doc = XDocument.Load(@"e:\input\partylist.xml");
foreach (var party in doc.Descendants("party"))
   foreach (var attr in party.Attributes())
        MessageBox.Show(attr.ToString()); 
```

此代码使用重写`ToString()`的方法，`XAttribute`该方法返回属性名称及其值，如下所示：

```
currency="BAM" 
```

如果需要，您可以仅使用值：`MessageBox.Show(attr.Value);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:48:44.883

```
XmlNodeList elemList = doc.GetElementsByTagName(...);
    for (int i = 0; i < elemList.Count; i++)
    {
        string attrVal = elemList[i].Attributes["id"].Value;
    } 
```

试试上面的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T06:53:10.057

你可以试试这个吗？

```
XDocument doc = XDocument.Load(@"e:\input\partylist.xml");
foreach (var partyList in doc.Descendants("party"))
{
   string currency= partyList .Attribute("currency").Value;
   string id= partyList .Attribute("id").Value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T06:58:24.800

输入xml文件

```
<?xml version='1.0' encoding='utf-16'?>
<party_list>
  <party currency='BAM' id='330-159210014235851' />
  <party currency='EUR' id='330-153990008540078' />
</party_list> 
```

获取属性值的 C# 代码

```
 XDocument doc = XDocument.Load(@"e:\input\partylist.xml");
        var eles = doc.Element("party_list").Elements("party");

        foreach (XElement ele in eles)
        {
            Console.WriteLine (ele.Attribute("currency").Value);
            Console.WriteLine(ele.Attribute("id").Value);

        }
        Console.ReadLine(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T07:04:08.267

```
string body = @"<?xml version='1.0' encoding='utf-16'?><party_list>
                    <party currency='BAM' id='330-159210014235851' />
                    <party currency='EUR' id='330-153990008540078' />
                </party_list>";
XmlDocument bodyDoc = new XmlDocument();
bodyDoc.LoadXml(body);
XmlNodeList xnList = bodyDoc.SelectNodes("/party_list/party");
foreach (XmlNode item in xnList)
{
    var id =  item.Attributes["id"].Value;
    var currency = item.Attributes["currency"].Value;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T07:09:27.050

另外的选择：

```
XElement xml = 
  XElement.Parse (@"<party_list>
                      <party currency='BAM' id='330-159210014235851' /> 
                      <party currency='EUR' id='330-153990008540078' />
                    </party_list>");

xml.Elements()
     .SelectMany(element => element.Attributes().Select(attrib => attrib.Value))
       .ToList()
         .ForEach(text => MessageBox.Show(text)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-16T08:10:41.533

尝试这个

```
XDocument doc = XDpcument.Load("your xml location");

var parties = from p in doc.Descendants("party")
              select new 
              { 
                      currency = p.Attribute("currency").Value;
                      Id =       p. Attribute("id").Value;
              } 
```

# wpf - WPF：绑定到自定义结构

> ID：16030478
> 
> 赞同：3
> 
> 时间：2013-04-16T06:46:29.783
> 
> 标签：wpf, data-binding

我创建了`Date`内部使用`DateTime`的自定义结构，但它阻止存储当前时间：

```
 public struct Date
    {
        private readonly DateTime _dateTime;
        public Date(int year, int month, int day)
        {
            _dateTime = new DateTime(year, month, day, 0, 0, 0, DateTimeKind.Utc);
        }
        public override string ToString()
        {
            return _dateTime.ToString();
        }
        public static Date Parse(string input)
        {
            return new Date(DateTime.Parse(input));
        }
        //other class members
    } 
```

这个解决方案对我来说很好，但是当我想`Date`从用户那里获取时我被卡住了。当我将此类型绑定到 DatePicker 时，我无法在绑定属性中设置或获取值：

```
<DatePicker SelectedDate="{Binding Date}"/> 
```

财产：

```
public Date Date
 {
     get { return _date; }
     set
     {
         _date = value;
         OnPropertyChanged("Date");
     }
 } 
```

有没有一些聪明的方法来拥有“可绑定的自定义结构”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T06:51:45.737

这不起作用，因为 DatePicker 控件的属性[SelectedDate](http://msdn.microsoft.com/en-us/library/system.windows.controls.datepicker.selecteddate%28v=vs.95%29.aspx)是类型`Nullable<DateTime>`，并且运行时无法将您的 Date 结构隐式转换为 DateTime 结构。

您可以做的是实现`IValueConverter`将 DateTime 转换为 Date 结构。

对我来说，我不会使用我自己的结构来表示 Date 值。如果您只对 Date 值感兴趣，则应将属性更改为 DateTime 并使用 DateTime 的[Date属性。](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)

```
public DateTime Date
 {
     get { return _date; }
     set
     {
         _date = value.Date;
         OnPropertyChanged("Date");
     }
 } 
```

如果要保留 Date 结构，请使用 IValueConverter，将其分配给绑定以将 Date 转换为 DateTime，反之亦然。

```
public class DateToDateTimeConverter : IValueConverter{

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
      // convert Date to DateTime
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
      //convert DateTime to Date
    }

  } 
```

XAML：

```
<DatePicker SelectedDate="{Binding Date, Converter={StaticResource dateToDateTimeConverter}}"/> 
```

# php - 发送邮件并在本地为 php 项目进行测试

> ID：16030479
> 
> 赞同：0
> 
> 时间：2013-04-16T06:46:30.343
> 
> 标签：php, email-client

我正在为我的 php 项目进行电子邮件验证，因为我已经编写了代码，但问题是如何检查我的邮件是否会发送到所需的位置。有没有办法发送任意邮件来检查我在本地主机上的代码。基本上我想在本地主机上看到我发送的邮件。我已经安装了 xammp。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:48:33.530

默认情况下，mail() 函数通常不适用于 WAMP 之类的东西。您需要将 SMTP 服务器的详细信息添加到 php.ini 文件中。

这是一个很好的教程：[http ://roshanbh.com.np/2007/12/sending-e-mail-from-localhost-in-php-in-windows-environment.html](http://roshanbh.com.np/2007/12/sending-e-mail-from-localhost-in-php-in-windows-environment.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:58:08.593

**php.ini 文件：** 在该文件中搜索邮件功能并替换其内容如下。[邮件功能]

; 仅适用于 Win32。

; [http://php.net/smtp](http://php.net/smtp)

SMTP = 您的服务器的主机名。（例如 mail.test.com）

; [http://php.net/smtp-port](http://php.net/smtp-port)

smtp_port = 25

; 仅适用于 Win32。

; [http://php.net/sendmail-from](http://php.net/sendmail-from)

sendmail_from = 发件人电子邮件 ID。（例如 testing@gmail.com

保存 php.ini 文件。编写代码发送邮件。

测试信息

嘿，它的工作原理！......

'; // 要发送 HTML 邮件，必须设置 Content-type 标头 $headers = 'MIME-Version: 1.0' . ”\r\n”; $headers .= '内容类型：文本/html；字符集=iso-8859-1' 。”\r\n”; // 附加标题 $headers .= 'To: Receiver name ' . ”\r\n”; $headers .= '发件人：发件人姓名' . ”\r\n”; // 邮寄 mail($to, $subject, $message, $headers); ?>

# vbscript - VBS 脚本问题

> ID：16030480
> 
> 赞同：0
> 
> 时间：2013-04-16T06:46:34.427
> 
> 标签：vbscript

我正在尝试我的第一个程序编码以在启动时打开一组程序

我有一个程序的这个脚本，但我得到一个 VBS 编译错误

```
Dim objShell
Set objShell = WScript.CreateObject( "WScript.Shell" )
objShell.Run("""C:\Program Files (x86)\servicecentser\Run\scguiw32.exe" -

express:dvla.servicecenter.fs.fujitsu.com.12680""")
Set objShell = Nothing

objwindow.document.getElementByID("username").value = "EXAMPLE"
objwindow.document.getElementByID("password").value = "EXAMPLE" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:06:49.167

字符串文字中的双引号必须通过加倍进行转义；不允许在文字中换行；调用子时没有参数列表（）；尝试：

objShell.Run """C:...\scguiw32.exe"""-express:dvla.servicecenter.fs.fujitsu.com.12680"""

# datepicker - 如何从日期选择器表单中检索数据？

> ID：16030494
> 
> 赞同：0
> 
> 时间：2013-04-16T06:47:14.193
> 
> 标签：datepicker, zurb-foundation

我使用 zurb Foundation datepicker 来获取我的约会日期。教程在[这里](http://foundation-datepicker.peterbeno.com/example/example.html)。但我的问题是，如何从`<input type="text" class="span2" id="dp1">`mm-dd-yyyy 中检索数据？所以我可以得到 mm=? dd=? yyyy=？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T23:05:51.893

当您使用仅包含字符串值的输入文本时，您可能无法直接检索拆分为日、月、年变量的信息。您必须自己解析该值以获取该信息。以下是 javascript 中的示例：

```
var data = dp1.val();
var day = data.substr(0,2);
var month = data.substr(3,5);
var year = data.substr(6,10); 
```

# android - 在android中为html字符串的子字符串设置对齐方式

> ID：16030496
> 
> 赞同：2
> 
> 时间：2013-04-16T06:47:14.517
> 
> 标签：android, android-webview, text-justify

我正在开发一个需要对齐 html 字符串的子字符串的应用程序。

问题：我使用 webview 通过以下代码设置 html 文本的对齐方式

```
String htmlText = "<html><body style=\"text-align:justify\"> %s </body></Html>";
WebView webView = new WebView(SubProducts.this);
webView.loadData(String.format(htmlText, description), "text/html", "utf-8"); 
```

但是当我为这样的子字符串设置相同的想法时：

```
String htmlText = "<html><body style=\"text-align:justify\"> %s </body></Html>";
WebView webView = new WebView(SubProducts.this);
webView.loadData(String.format(htmlText, description.substring(1,170)), "text/html", "utf-8"); 
```

在我的输出文本中 html 文本（

```
<html><body style=\"text-align:justify\"> %s </body></Html>) 
```

也是可见的。如何实现这一点。有人可以帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:51:38.077

找到 Substring 并在 WebView 中加载，这对我来说很好。为了证明现成的代码如下所示

```
 public static void loadHtmlContentForAboutUs(WebView view, String appendText) {
    String s = "<html><head><style type='text/css'>body {margin:0px;color:707070;"
            + "text-align: justify;}</style></head><body>"
            + appendText
            + "</body></html>";

    view.loadDataWithBaseURL("", s, "text/html", "utf-8", null);
    view.setBackgroundColor(Color.TRANSPARENT);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:56:48.970

这解决了我的问题：

最初我的描述包含 HTML 标签，所以我做了以下想法：

```
WebView webView = new WebView(SubProducts.this);
Spanned sub=Html.fromHtml(description);
String s = "<html><head><style type='text/css'>body {margin:0px;color:707070;"
        + "text-align: justify;}</style></head><body>"
        + sub.subSequence(1, 150)
        + "</body></html>";

webView.loadDataWithBaseURL("", s, "text/html", "utf-8", null); 
```

# jenkins - Jenkins 从本地分支自动构建

> ID：16030498
> 
> 赞同：1
> 
> 时间：2013-04-16T06:47:22.033
> 
> 标签：jenkins, jenkins-plugins

我已经设置了 jenkins，每次构建被触发时都会获取 git repo。现在我们的要求是开发人员希望将开发的代码推送到詹金斯服务器并在将其推送到中央仓库之前对其进行测试。我用谷歌搜索，发现如果更改被推送到中央仓库，我们可以 jenkins 触发构建。但是，我无法弄清楚如何设置从本地分支到詹金斯服务器的推送并触发构建。

# linux - du -h --max-depth=1 需要很长时间

> ID：16030499
> 
> 赞同：19
> 
> 时间：2013-04-16T06:47:22.717
> 
> 标签：linux, du

当我尝试计算目录中文件和目录的大小时，需要更长的时间。我使用的命令是`du -ch --max-depth=1`.

还有其他方法可以计算文件和文件夹的总大小吗？

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-16T07:20:22.723

该命令`du`默认检索目录和所有子目录中所有文件的磁盘使用情况（递归）。因此花费的时间`du`与分析的文件数量有关。选项`-s`or`--summarize`和`--max-depth`仅影响命令的输出（而不是扫描本身）。

一些`du`限制文件扫描的选项是--one-file-system、--exclude 和--exclude-from。

如果您不想递归到子目录，您可以使用 find 代替，这样您就可以更好地控制要分析的文件。但它不能递归地总结磁盘使用情况。

```
find /path/to/dir -maxdepth 1 -printf  "%k\t%p\n" 
```

请注意，`%k`总是以 1k 块为单位返回磁盘使用情况，并且报告的稀疏文件的磁盘使用情况可能小于或略大于命令返回的文件`%s`大小`ls`。因此 '%k' 的行为类似于`du`单个文件的命令。

如果您想结合 和 的功能，`find`可以`du`通过类似的方式将它们结合起来。

```
find . -maxdepth 1 -name "xyz*" -print0 | du --files0-from=- 
```

# session - 从 HttpAdapter 获取会话到基于 Java 的适配器

> ID：16030502
> 
> 赞同：0
> 
> 时间：2013-04-16T06:47:30.947
> 
> 标签：session, https, adapter, ibm-mobilefirst

有什么方法可以将在 httpAdapter 中创建的会话转换为适配器中的 java 类？我正在使用 httpadapter 连接到[https://jazz.net/](https://jazz.net/)，但我现在想使用一些 java 代码连接到适配器中的相同 url。所以我不知道如何访问已经创建的会话。

这是我的连接代码：

```
In javaScript, 
function login(){
var lpath = getLoginPath();
var input = {
    method : 'post',
    returnedContentType : 'html',
    path : lpath,
    parameters : {
        j_password : passwd,
        j_username : username
    }

};

var request = WL.Server.getClientRequest();
UserSession = request.getHeader("Cookie"); // here i am setting the value for a global variable UserSession.
return WL.Server.invokeHttp(input);
}

function getConnection(){
var instance = new com.worklight.customcode.PostRequest();

var rspath = getRootServicesPath();

var input = {
    method : 'get',
    returnedContentType : 'xml',
    path : rspath
};
return {
    result : instance.getXml(UserSession) // Here i am passing the value of session cookie into the java class 
};} 
```

在 Java 类中，

```
class PostRequest{
 public String getXml(String cookieString){
    String params = "?offlineData={'projectAreaItemId':'_iTuLUmxfEeKR3t32SVbLKQ','executables':[{'terItemId':'_TNoyQW6qEeKR3t32SVbLKQ','scriptItemId':'_DF89AW6qEeKR3t32SVbLKQ'}]}";
    String url = "https://jazz.net/sandbox02-qm/secure/service/com.ibm.rqm.execution.common.service.IOfflineExecutionRestService"
            + params;
URLConnection connection = new URL(url).openConnection();
connection = new URL(url).openConnection();
    connection.setRequestProperty("User-Agent", "yes");
    connection.setRequestProperty("Content-Type",
            "application/x-www-form-urlencoded");
    connection.setRequestProperty("Accept-Encoding", "gzip");
    connection.setRequestProperty("Accept", "application/xml");
    connection.setRequestProperty("Cookie", cookieString);
    connection.setDoInput(true);
    connection.setDoOutput(true);
    ((HttpURLConnection) connection).setRequestMethod("POST");
    connection.setDoOutput(true);
String result = "";
        InputStream resp = connection.getInputStream();
        StringBuilder s = inputStreamToString(resp);
return s;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:12:28.357

您不需要访问会话 ID，因为您已经“拥有它”。您编写的 Java 类是适配器会话或范围的一部分。

您需要做的是在适配器中声明您的类。像这样的东西：

**班上**

```
Class myHTTPClient
// implementation code goes here - the java code to connect to the same URL as in the adapter XML. 
```

**适配器**

```
var httpClient = new com.myHTTPClient
// your adapter code 
```

这样，Java 与适配器在同一范围内，因此无需“获取”会话 ID。

为了在 Java 代码的 POST 中也传递 JSESSIONID，请[遵循 WL.Server.invokeHttp API](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/index.jsp?topic=/com.ibm.worklight.help.doc/apiref/r_method_wl_server_invokehttp.html)（页面底部）中提供的示例。在适配器 JavaScript 中，实现示例... response.responseHeader 包含一个“Set-Cookie”标头，您可以从中提取 JSESSIONID、传递它并使用它。

# javascript - 简单模态 iframe 动画

> ID：16030508
> 
> 赞同：2
> 
> 时间：2013-04-16T06:47:44.420
> 
> 标签：javascript, jquery, html, simplemodal

我正在使用 SimpleModal（[http://www.ericmmartin.com/projects/simplemodal/](http://www.ericmmartin.com/projects/simplemodal/)）。我正在尝试让动画与 iframe 窗口一起使用。

我有 iframe 部分工作：

```
// Load dialog on click
    $('#clicky').click(function (e) 
    {
        $.modal('<iframe src="' + src + '" height="450" width="800" style="border:0">', 
        {
                closeHTML:"",
                containerCss:{
                                backgroundColor:"#fff", 
                                borderColor:"#fff", 
                                height:450, 
                                padding:0, 
                                width:800
                                },
                overlayClose:true
        });
    }); 
```

但我不知道如何将它连接到动画片段：

```
$("#sample").modal({onOpen: function (dialog) 
    {
            dialog.overlay.fadeIn('slow', function (){
                dialog.data.hide();dialog.container.fadeIn('slow', function () {
                    dialog.data.slideDown('slow')
                    });

    }); 
```

所以我希望学习如何将 iframe 模态连接到淡入/淡出动画。任何人都可以帮助我或指导我到我可以学习的网站吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:07:54.317

嗯，我想通了。这是对我有用的代码：

```
$('#clicky').click(
    function (e) 
    {
        $.modal('<iframe src="' + src + '" height="450" width="1800" style="border:0">', 
        {

                    closeHTML:"",
                    containerCss:
                    {
                                    backgroundColor:"#fff", 
                                    borderColor:"#fff", 
                                    height:450, 
                                    padding:0, 
                                    width:800
                    },
                    overlayClose:true,
                    //below adds a open animation
                    onOpen: function (dialog){
                    dialog.overlay.fadeIn('slow');
                    dialog.data.show();
                    dialog.container.fadeIn('slow');},
                    //below adds a close animation
                    onClose: function (dialog){
                    dialog.data.fadeOut('slow');
                    dialog.container.hide('slow');
                    dialog.overlay.slideUp('slow', function () {$.modal.close();});
                    }
        });
    }); 
```

不要忘记为 src 变量放置一个网站 :)

# php - 如何用图像更新文本表单

> ID：16030509
> 
> 赞同：0
> 
> 时间：2013-04-16T06:47:45.957
> 
> 标签：php, forms

如何用图像更新文本表单

我正在尝试用图像更新文本，现在这段代码可以很好地处理文本，也可以完美地更新图像

但图像未在编辑中显示

示例编辑表单

*   名称：演示
*   父亲姓名：demo
*   地址：演示

    照片 - 选择文件 - 我想要这里的图像名称，如 photo.jpg

图像也存在于数据库中，但未在此处以编辑形式显示

我该怎么做请告诉我解决这个问题谢谢

这是表单代码

```
<form action="" method="post" enctype="multipart/form-data">
     <input type="hidden" name="id" value="<?php echo $id; ?>"/>
     <div>
     <p><strong>ID:</strong> <?php echo $id; ?></p>
    <div>
       <p><span class="style9"><strong>Teacher No:</strong></span><strong>  *</strong>
         <input name="teacherno" type="text" value="<?php echo $teacherno; ?>" size="50" />
       </p>
       <p><span class="style9"><strong>Teacher Name:</strong></span><strong>  *</strong>
         <input name="name" type="text" value="<?php echo $name; ?>" size="50" />
       </p>
       <p><span class="style9"><strong>Education:</strong></span><strong>  *</strong>
         <input name="education" type="text" value="<?php echo $education; ?>" size="50" />
       </p>
       <p><span class="style9"><strong>Father Name:</strong></span><strong>  *</strong>
         <input name="fathername" type="text" value="<?php echo $fathername; ?>" size="50" />
       </p>
          <p><span class="style9"><strong>Salary:</strong></span><strong>  *</strong>
         <input name="salary" type="text" value="<?php echo $salary; ?>" size="50" />
        </p>
        <p><span class="style9"><strong>Date Of Birth :</strong></span><strong>  *</strong>
          <input name="age" type="text" value="<?php echo $age; ?>" size="50" />
       </p>
          <p><span class="style9"><strong>Teach Class :</strong></span><strong>  *</strong>
            <input name="classteacher" type="text" value="<?php echo $classteacher; ?>" size="50" />
       </p>
       <p><span class="style9"><strong>Phone No :</strong></span><strong>  *</strong>
         <input name="phone" type="text" value="<?php echo $phone; ?>"/>
       </p>
       <p><span class="style9"><strong>Date Of Join :</strong></span><strong>  *</strong>
         <input id="fullDate" name="dateofjoin" type="text" value="<?php echo $dateofjoin; ?>" size="50" />
       </p>
        <p><span class="style9"><strong>Home Address :</strong></span><strong>  *</strong>
           <textarea name="address" cols="50"><?php echo $address; ?></textarea>
       </p>
        <p><span class="style9"><strong>N.I.C No:</strong></span><strong>  *</strong>
          <input name="nic" type="text" value="<?php echo $nic; ?>" size="50" />
       </p>
        <span class="style9"><strong>Branch:</strong></span><strong> *</strong>
        <input name="branch" type="text" value="<?php echo $branch; ?>" size="50">
    <span class="style9"><strong>Photo:</strong></span><strong> *</strong>
                 <input type="hidden" name="size" value="<?php echo $photo; ?>" size="50">
                <input type="file" name="photo"> 
        <br/>
       <p class="style1">* required</p>
     <input type="submit" name="submit" value="Submit">
     </div>
     </form> 
```

这是php代码

```
<?php
 }

 //This is the directory where images will be saved
$target = "images/";
$target = $target . basename( $_FILES['photo']['name']);

//This gets all the other information from the form

$photo=($_FILES['photo']['name']);
//Writes the photo to the server
if(move_uploaded_file($_FILES['photo']['tmp_name'], $target))
{

//Tells you if its all ok
echo "The file ". basename( $_FILES['uploadedfile']['name']). " has been uploaded, and your information has been added to the directory";
}

 // connect to the database
 include('connect-db.php');

 // check if the form has been submitted. If it has, process the form and save it to the database
 if (isset($_POST['submit']))
 { 
 // confirm that the 'id' value is a valid integer before getting the form data
 if (is_numeric($_POST['id']))
 {
 // get form data, making sure it is valid
 $id = $_POST['id'];
 $teacherno = mysql_real_escape_string(htmlspecialchars($_POST['teacherno']));
 $name = mysql_real_escape_string(htmlspecialchars($_POST['name']));
 $education = mysql_real_escape_string(htmlspecialchars($_POST['education']));
 $salary = mysql_real_escape_string(htmlspecialchars($_POST['salary']));
 $classteacher = mysql_real_escape_string(htmlspecialchars($_POST['classteacher']));
 $dateofjoin = mysql_real_escape_string(htmlspecialchars($_POST['dateofjoin']));
 $nic = mysql_real_escape_string(htmlspecialchars($_POST['nic']));
 $address = mysql_real_escape_string(htmlspecialchars($_POST['address']));
 $age = mysql_real_escape_string(htmlspecialchars($_POST['age']));
 $fathername = mysql_real_escape_string(htmlspecialchars($_POST['fathername']));
 $phone = mysql_real_escape_string(htmlspecialchars($_POST['phone']));
 $branch = mysql_real_escape_string(htmlspecialchars($_POST['branch']));
 $photo = mysql_real_escape_string(htmlspecialchars($_FILES['photo']['name']));

 // check that firstname/lastname fields are both filled in
 if ($teacherno == '' || $name == '')
 {
 // generate error message
 $error = 'ERROR: Please fill in all required fields!';

 //error, display form
 renderForm($id, $teacherno, $name, $education, $salary, $classteacher, $dateofjoin, $nic, $address, $age, $fathername, $phone, $branch, $photo, $error);
 }
 else
 {
 // save the data to the database
 mysql_query("UPDATE teacher SET teacherno='$teacherno', name='$name', education='$education', salary='$salary', classteacher='$classteacher', dateofjoin='$dateofjoin', nic='$nic', address='$address', age='$age', phone='$phone', branch='$branch', photo='$photo' WHERE id='$id'")
 or die(mysql_error()); 

 // once saved, redirect back to the view page
 header("Location: view.php"); 
 }
 }
 else
 {
 // if the 'id' isn't valid, display an error
 echo 'Error!';
 }
 }
 else
 // if the form hasn't been submitted, get the data from the db and display the form
 {

 // get the 'id' value from the URL (if it exists), making sure that it is valid (checing that it is numeric/larger than 0)
 if (isset($_GET['id']) && is_numeric($_GET['id']) && $_GET['id'] > 0)
 {
 // query db
 $id = $_GET['id'];
 $result = mysql_query("SELECT * FROM teacher WHERE id=$id")
 or die(mysql_error()); 
 $row = mysql_fetch_array($result);

 // check that the 'id' matches up with a row in the databse
 if($row)
 {

 // get data from db
 $teacherno = $row['teacherno'];
 $name = $row['name']; 
 $education = $row['education']; 
 $salary = $row['salary']; 
 $classteacher = $row['classteacher']; 
 $dateofjoin = $row['dateofjoin']; 
 $nic = $row['nic']; 
 $address = $row['address']; 
 $age = $row['age']; 
 $fathername = $row['fathername']; 
 $phone = $row['phone']; 
 $branch = $row['branch']; 
 $photo = $row['photo']; 

 // show form
 renderForm($id, $teacherno, $name, $education, $salary, $classteacher, $dateofjoin, $nic, $address, $age, $fathername, $phone, $branch, $photo, '');
 }
 else
 // if no match, display result
 {
 echo "No results!";
 }
 }
 else
 // if the 'id' in the URL isn't valid, or if there is no 'id' value, display an error
 {
 echo 'Error!';
 }
 }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:17:58.407

我不会调整你所有的代码。我认为，有了这些台词，您就足以理解它了！查看并告诉我们！:)

**形式**

```
<?
// You've to pass a parameter to get if is a form for edit teacher or for new teacher
$edit = $_POST['edit'];
?>
<form action="" method="post" enctype="multipart/form-data">
    <input type="hidden" name="id" value="<?php echo $id; ?>"/>
    <input type="hidden" name="edit" value="<? $edit ?>"/>

    <div>
        <p><strong>ID:</strong> <?php echo $id; ?></p>
    <div>
    <p>
        <span class="style9"><strong>Teacher No:</strong></span><strong>  *</strong>
        <input name="teacherno" type="text" value="<?php echo $teacherno; ?>" size="50" />
    </p>
    <p>
        <span class="style9"><strong>Teacher Name:</strong></span><strong>  *</strong>
        <input name="name" type="text" value="<?php echo $name; ?>" size="50" />
    </p>
    <p>
        <span class="style9"><strong>Education:</strong></span><strong>  *</strong>
        <input name="education" type="text" value="<?php echo $education; ?>" size="50" />
    </p>
    <p>
        <span class="style9"><strong>Father Name:</strong></span><strong>  *</strong>
        <input name="fathername" type="text" value="<?php echo $fathername; ?>" size="50" />
    </p>
    <p>
        <span class="style9"><strong>Salary:</strong></span><strong>  *</strong>
        <input name="salary" type="text" value="<?php echo $salary; ?>" size="50" />
    </p>
    <p>
        <span class="style9"><strong>Date Of Birth :</strong></span><strong>  *</strong>
        <input name="age" type="text" value="<?php echo $age; ?>" size="50" />
    </p>
    <p>
        <span class="style9"><strong>Teach Class :</strong></span><strong>  *</strong>
        <input name="classteacher" type="text" value="<?php echo $classteacher; ?>" size="50" />
    </p>
    <p>
        <span class="style9"><strong>Phone No :</strong></span><strong>  *</strong>
        <input name="phone" type="text" value="<?php echo $phone; ?>"/>
    </p>
    <p>
        <span class="style9"><strong>Date Of Join :</strong></span><strong>  *</strong>
        <input id="fullDate" name="dateofjoin" type="text" value="<?php echo $dateofjoin; ?>" size="50" />
    </p>
    <p>
        <span class="style9"><strong>Home Address :</strong></span><strong>  *</strong>
        <textarea name="address" cols="50"><?php echo $address; ?></textarea>
    </p>
    <p>
        <span class="style9"><strong>N.I.C No:</strong></span><strong>  *</strong>
        <input name="nic" type="text" value="<?php echo $nic; ?>" size="50" />
    </p>
    <span class="style9"><strong>Branch:</strong></span><strong> *</strong>
    <input name="branch" type="text" value="<?php echo $branch; ?>" size="50">

    <span class="style9"><strong>Photo:</strong></span><strong> *</strong>
    <?
    if ($edit) {
        // This will show a image that we have on the ddbb
        ?><img src="$path_images.$img" /><?
    }
    ?>
    <input type="file" name="photo" /> 

    <br/>
    <p class="style1">* required</p>

    <input type="submit" name="submit" value="Submit">
    </div>
</form> 
```

**PHP**

```
// connect to the database
include('connect-db.php');

//This is the directory where images will be saved
$target = "images/";

// check if the form has been submitted. If it has, process the form and save it to the database
if (isset($_POST['submit']))
{ 
    // confirm that the 'id' value is a valid integer before getting the form data
    if (is_numeric($_POST['id']))
    {
        // get form data, making sure it is valid
        $id = $_POST['id'];
        $teacherno = mysql_real_escape_string(htmlspecialchars($_POST['teacherno']));
        $name = mysql_real_escape_string(htmlspecialchars($_POST['name']));
        $education = mysql_real_escape_string(htmlspecialchars($_POST['education']));
        $salary = mysql_real_escape_string(htmlspecialchars($_POST['salary']));
        $classteacher = mysql_real_escape_string(htmlspecialchars($_POST['classteacher']));
        $dateofjoin = mysql_real_escape_string(htmlspecialchars($_POST['dateofjoin']));
        $nic = mysql_real_escape_string(htmlspecialchars($_POST['nic']));
        $address = mysql_real_escape_string(htmlspecialchars($_POST['address']));
        $age = mysql_real_escape_string(htmlspecialchars($_POST['age']));
        $fathername = mysql_real_escape_string(htmlspecialchars($_POST['fathername']));
        $phone = mysql_real_escape_string(htmlspecialchars($_POST['phone']));
        $branch = mysql_real_escape_string(htmlspecialchars($_POST['branch']));
        $photo = mysql_real_escape_string(htmlspecialchars($_FILES['photo']['name']));

        // check that firstname/lastname fields are both filled in
        if ($teacherno == '' || $name == '')
        {
        // generate error message
        $error = 'ERROR: Please fill in all required fields!';

        //error, display form
        renderForm($id, $teacherno, $name, $education, $salary, $classteacher, $dateofjoin, $nic, $address, $age, $fathername, $phone, $branch, $photo, $error);
    }else{
         // save the data to the database
         mysql_query("UPDATE teacher SET teacherno='$teacherno', name='$name', education='$education', salary='$salary', classteacher='$classteacher', dateofjoin='$dateofjoin', nic='$nic', address='$address', age='$age', phone='$phone', branch='$branch', photo='$photo' WHERE id='$id'")
         or die(mysql_error()); 
         // once saved, redirect back to the view page
         header("Location: view.php"); 
     }
}else{
    // if the 'id' isn't valid, display an error
    echo 'Error!';
}

if ($_POST['edit'])
{
    if (($_FILES["img"]["error"] != 0) or if($_FILES["img"]["error"] != 4))
    {
        // we update everyting without the image!!
        mysql_query("UPDATE teacher SET teacherno='$teacherno', name='$name', education='$education', salary='$salary', classteacher='$classteacher', dateofjoin='$dateofjoin', nic='$nic', address='$address', age='$age', phone='$phone', branch='$branch' WHERE id='$id'") or die(mysql_error()); 

    }else{
        // we update everyting without the image!!
        $target = $target . basename( $_FILES['photo']['name']);
        $photo = ($_FILES['photo']['name']);
        if(move_uploaded_file($_FILES['photo']['tmp_name'], $target))
        {   
             mysql_query("UPDATE teacher SET teacherno='$teacherno', name='$name', education='$education', salary='$salary', classteacher='$classteacher', dateofjoin='$dateofjoin', nic='$nic', address='$address', age='$age', phone='$phone', branch='$branch', photo='$photo' WHERE id='$id'")
            or die(mysql_error()); 
        }
    }
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:24:09.510

***只需尝试以下操作：***

```
<p>
   <span class="style9"><strong>Photo:</strong></span><strong> *</strong>
   <input type="hidden" name="size" value="<?php echo $photo; ?>" size="50">
   <input type="file" name="photo"><img src="users_photo/<?php ($photo ? $photo : 'default.jpg');?>" border="0"> 
</p> 
```

我认为这可以帮助您解决问题。

# java - 使用 OpenSSL 密钥进行 Java 加密

> ID：16030513
> 
> 赞同：3
> 
> 时间：2013-04-16T06:47:52.037
> 
> 标签：java, encryption, aes, rsa

我有一种情况，我按照他们网站上列出的说明，使用 OpenSSL 生成了一个用于[gdcmanon](http://gdcm.sourceforge.net/html/gdcmanon.html)的公钥/私钥对。具体来说，我使用以下命令为 gdcmanon 生成密钥

```
$ openssl genrsa -out CA_key.pem
$ openssl req -new -key CA_key.pem -x509 -days 365 -out CA_cert.cer 
```

然后我能够按照他们的指示使用

```
gdcmanon -c CA_cert.cer -e original.dcm original_anonymized.dcm 
```

并使用 decrpyt 文件

```
gdcmanon -k CA_key.pem -d original_anonymized.dcm orginal_deanonymized.dcm 
```

然后，我想使用该密钥来解码 Java 中相应 DICOM 文件中的一些信息。在努力获得 Java 中的密钥之后，我找到[了这个](http://pro-programmers.blogspot.com/2009/05/javasecurityinvalidkeyexception.html)页面，并且能够通过以下调用创建一个不会导致我的 Java 程序崩溃的密钥

```
openssl pkcs8 -topk8 -inform PEM -outform DER -in CA_key.pem -out CA_key.pkcs8.pem -nocrypt 
```

毕竟，经过大量阅读，我已经生成了以下 Java 代码

```
public static String decode(byte[] encryptedData) {
    Key key = readPEMKey(new File("CA_key.pkcs8.pem"));
    //Key key = readPEMKey(new File("CA_key.pem"));
    try {
        Cipher c = Cipher.getInstance("RSA");
        c.init(Cipher.DECRYPT_MODE, key);
        byte[] decValue = c.doFinal(encryptedData);
        String decryptedValue = new String(decValue);
        return decryptedValue;
    }
    catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}

private static Key readPEMKey(File key) {
    DataInputStream dis = null;
    BufferedReader reader = null;
    try {
        /*
        reader = new BufferedReader(new FileReader(key));
        String privKeyPEM = "";
        String line;
        while ((line = reader.readLine()) != null) {
            if (!line.equals("-----BEGIN RSA PRIVATE KEY-----") && !line.equals("-----END RSA PRIVATE KEY-----"))
            privKeyPEM += line + "\n";
        }
        byte[] encoded = new BASE64Decoder().decodeBuffer(privKeyPEM);
        */

        dis = new DataInputStream(new BufferedInputStream(new FileInputStream(key)));
        byte[] encoded = new byte[(int) key.length()];
        dis.readFully(encoded);

        // PKCS8 decode the encoded RSA private key
        PKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(encoded);
        KeyFactory kf = KeyFactory.getInstance("RSA");
        PrivateKey privKey = kf.generatePrivate(keySpec);
        return privKey;
    }
    catch (Exception e) {
        e.printStackTrace();
    }
    finally {
        if (reader != null) {try {reader.close();} catch (Exception e) {e.printStackTrace();}}
        if (dis != null) {try {dis.close();} catch (Exception e) {e.printStackTrace();}}
    }
    return null;
} 
```

我尝试了多种方法来读取和处理用于以各种方式解码的私钥（从注释掉的部分可以看出），但是，我还没有找到可以通过 encryptedData 解密的解决方案。如果我将密码与 RSA 算法一起使用，我会得到以下堆栈跟踪

```
javax.crypto.IllegalBlockSizeException: Data must not be longer than 256 bytes
at com.sun.crypto.provider.RSACipher.a(DashoA13*..)
at com.sun.crypto.provider.RSACipher.engineDoFinal(DashoA13*..)
at javax.crypto.Cipher.doFinal(DashoA13*..)
at my.app.decode(Application.java:124) 
```

这在 byte[] decValue = c.doFinal(encryptedData); 行失败。

如果我使用带有 AES 算法的密码，我会得到以下堆栈跟踪

```
java.security.InvalidKeyException: No installed provider supports this key: sun.security.rsa.RSAPrivateCrtKeyImpl
at javax.crypto.Cipher.a(DashoA13*..)
at javax.crypto.Cipher.init(DashoA13*..)
at javax.crypto.Cipher.init(DashoA13*..)
at my.app.Application.decode(Application.java:123) 
```

这在 c.init(Cipher.DECRYPT_MODE, key); 行失败。

我已经安装了 Java 6 的 JCE（我正在使用）。我不知道我做错了什么。有人可以指出我正确的方向。

谢谢

更新

我一直在努力解决这个问题，也尝试过 Bouncy Castle，但还没有结果。这是我在使用 Bouncy Castle 时的第一次尝试。

```
BufferedReader reader = new BufferedReader(new FileReader(new File("CA_key.pem")));
PEMParser parser = new PEMParser(reader);
PEMKeyPair keyPair = (PEMKeyPair)parser.readObject();
AsymmetricKeyParameter privKeyParams = PrivateKeyFactory.createKey(keyPair.getPrivateKeyInfo());
AsymmetricKeyParameter publicKeyParams = PublicKeyFactory.createKey(keyPair.getPublicKeyInfo());
parser.close();

RSAEngine e = new RSAEngine();
e.init(false, publicKeyParams);
byte[] decValue = e.processBlock(encryptedData, 0, encryptedData.length); 
```

我再次遇到 processBlock 方法 org.bouncycastle.crypto.DataLengthException: input too large for RSA cipher 的异常。我认为这与我之前遇到的问题相同。我在这里真的不知所措，因为 gdcmanon 工具可以仅使用 CA_key.pem 文件清楚地解密此字符串，因为这是唯一的输入（要解密的文件除外）。我一直在 gdcmanon 源代码中四处寻找，看起来它以某种方式使用 AES 256 密钥，但我只是不知道如何从我生成的 RSA 密钥中获得它。有人可以指出我正确的方向吗？

编辑

我一直在浏览 gdcmanon 源代码，看起来他们使用加密消息语法 (CMS)。这对我来说是全新的，但看起来 BC 有一堆与 CMS 相关的类。具体来说，gdcmanon 使用称为 PKCS7_dataDecode 的 OpenSSL 方法来解密数据。我还没有找到关于如何在 Java 中做到这一点的好例子。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:12:42.887

经过大量的挣扎，我终于有了以下似乎可以工作的代码。如果有人能告诉我一种没有 BC 的方法，那就太棒了，但现在我很高兴它可以工作。

```
public static String decode(byte[] encryptedData, String keyFile) {
    BufferedReader reader = null;
    try {
        reader = new BufferedReader(new FileReader(new File(keyFile)));
        PEMParser parser = new PEMParser(reader);
        PEMKeyPair keyPair = (PEMKeyPair)parser.readObject();
        AsymmetricKeyParameter privKeyParams = PrivateKeyFactory.createKey(keyPair.getPrivateKeyInfo());
        parser.close();

        CMSEnvelopedData data = new CMSEnvelopedData(encryptedData);
        RecipientInformationStore recipients = data.getRecipientInfos();

        Iterator it = recipients.getRecipients().iterator();

        if (it.hasNext()) {
            RecipientInformation recipient = (RecipientInformation)it.next();
            byte[] recData = recipient.getContent(new BcRSAKeyTransEnvelopedRecipient(privKeyParams));
            String decryptedValue = new String(recData);
            return decryptedValue;
        }
    }
    catch (Exception e) {
        e.printStackTrace();
    }
    finally {
        if (reader != null) {try {reader.close();} catch (Exception e) {e.printStackTrace();}}
    }
    return null;
} 
```

# php - 选择谁接收自动电子邮件

> ID：16030515
> 
> 赞同：0
> 
> 时间：2013-04-16T06:48:14.690
> 
> 标签：php

我正在尝试在管理页面中向公司网站添加“切换”功能。基本上，这家公司向许多订阅者发送月度报告。他们使用数据库来存储所有公司和订阅者信息，并且在他们网站的管理页面中，他们可以添加新公司和订阅者。当订阅日期快要结束时，订阅者会收到一封自动到期提醒电子邮件。但是，他们希望能够选择订阅者是否收到到期电子邮件。所以在他们可以编辑订阅者信息的管理页面上，我想放置一个开关，可以设置他们是否收到它。我正在尝试找出最好的方法来做到这一点以及哪些 php 页面需要更改。

如果您想从可能的 php 页面（例如 admin/index.php 等）中查看一些代码，请告诉我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:12:13.810

实际上`query`，正如我所料，您正在检查将在某个日期到期的用户

```
"SELECT name, email, datetime_expire FROM subscriber WHERE datetime_expire = '".$expiry."'" 
```

我认为您应该`integer`在表中添加一个字段，`subscriber`例如`not_expiring`默认设置为`0`. 所以你应该把你的查询改成这个

```
"SELECT name, email, datetime_expire FROM subscriber WHERE datetime_expire = '".$expiry."' and not_expiring = '0'" 
```

现在您必须修改管理页面并在订阅者表单中添加一个复选框来控制这个新的数据库字段，并能够将 = 设置`1`为您不想向其发送电子邮件的客户。在更新表的管理文件中必须有另一个查询`subscribers`，您也应该更改它。

# python - 如何让 Sikuli 与 VMware 来宾操作系统交互？

> ID：16030519
> 
> 赞同：3
> 
> 时间：2013-04-16T06:48:33.673
> 
> 标签：python, jython, sikuli

我的问题是我不能在文本字段中“输入”（或发送字符）。

VMware 具有这样的行为，即第一次鼠标单击将焦点放在主窗口上，而第二次鼠标单击将焦点放在来宾 VM 上。Sikuli 似乎失去了第一次点击的焦点。

```
click('mywindow.png')
click('mywindow.png')
type('guest') 
```

是否有使 Sikuli 与 VMware 来宾操作系统交互的解决方法？当我将 VMware 配置为接受 VNC 连接时，我可以通过 VNC 查看器进行交互，但这有点麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:37:48.497

Sikuli 控制主机操作系统上的鼠标和键盘移动。一旦您单击来宾 VM，鼠标单击就不再向主机注册。Sikuli 不再控制键盘和鼠标，您的脚本将失败。@Raceyman 是正确的，您可以在 VM 中运行 Sikuli，但不能同时控制主机和来宾。VNC 之所以有效，是因为您在主机操作系统上本地查看屏幕截图。它在本地主机 VNC 程序中显示来宾操作系统的“图片”。

# flash - 闪光灯没有出现

> ID：16030526
> 
> 赞同：1
> 
> 时间：2013-04-16T06:48:53.783
> 
> 标签：flash

所以我有这个基本的 html 页面，里面有 flash。当我点击发布选项时，这个页面是由 flash 软件生成的。

如果我在 chrome 中打开页面，我可以看到正在播放的 flash 视频。 ![我打开文件时的图像](https://i.stack.imgur.com/KO7qX.png)

但是，如果我使用 localhost 或我的托管服务提供商，它不会呈现 flash 文件。我仔细检查了所有 src 文件，但似乎找不到问题。请在此处查看实际文件[http://www.iamvishal.com/pureecn/assets/slide/test.html](http://www.iamvishal.com/pureecn/assets/slide/test.html)

我的 swf 文件位于

[http://www.iamvishal.com/pureecn/assets/slide/test.swf](http://www.iamvishal.com/pureecn/assets/slide/test.swf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:48:31.740

我检查了 html 页面和 test.swf 链接。它们看起来都一样 - 空白的白色。所以他们出现了，但没有任何内容。我认为您的问题是图像未加载-查看图像的链接是否正确。如果需要，可以为 swf 或其他绘图对象添加一些背景颜色来测试它。

```
this.graphics.beginFill(0x333366);
this.graphics.drawRect(0,0,100,100);
this.graphics.endfill(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:51:47.107

使用[SWFObject](https://code.google.com/p/swfobject/)将 swf 嵌入到您的网页中：其他方式存在很多问题。

# python - 元素 ' ' 在父视图 'base.view_users_form' 中找不到

> ID：16030528
> 
> 赞同：0
> 
> 时间：2013-04-16T06:49:04.753
> 
> 标签：python, xml, openerp

当我尝试将用户菜单添加到 mu 模块并使用继承其表单视图时，出现以下错误。请建议我对这个问题进行排序。我的整个源代码上传[到这里@GitHub](https://github.com/priyankahdp/openerp.git)

```
AttributeError: View definition error for inherited view 'bpl.view_users_inherit_form' on model 'res.users': Element '<tree string="My view">' not found in parent view 'base.view_users_form' 
```

下面显示了我的 Eclipse 控制台中的整个错误

```
2013-04-16 06:44:21,114 2922 INFO bellvantage openerp.modules.loading: loading 1 modules...
2013-04-16 06:44:21,250 2922 INFO bellvantage openerp.modules.loading: loading 33 modules...
2013-04-16 06:44:21,343 2922 INFO bellvantage openerp.modules.module: module bpl: creating or updating database tables
2013-04-16 06:44:22,095 2922 INFO bellvantage openerp.modules.loading: module bpl: loading bpl_worker_registration_sequence.xml
2013-04-16 06:44:22,104 2922 INFO bellvantage openerp.modules.loading: module bpl: loading bpl_view.xml
2013-04-16 06:44:22,613 2922 WARNING bellvantage openerp.addons.base.ir.ir_ui_view: Setting the `type` field is deprecated in the `ir.ui.view` model.
2013-04-16 06:44:23,445 2922 INFO bellvantage openerp.modules.loading: module bpl: loading security/bpl_security.xml
2013-04-16 06:44:23,532 2922 ERROR bellvantage openerp.addons.base.ir.ir_ui_view: Can't render view base.user_groups_view for model: res.users
Traceback (most recent call last):
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/addons/base/ir/ir_ui_view.py", line 125, in _check_render_view
    fvg = self.pool.get(view.model).fields_view_get(cr, uid, view_id=view.id, view_type=view.type, context=context)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/osv/orm.py", line 2235, in fields_view_get
    arch=apply_view_inheritance(cr, user, source, sql_res['id']),
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/osv/orm.py", line 2193, in apply_view_inheritance
    source = apply_inheritance_specs(source, view_arch, view_id)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/osv/orm.py", line 2177, in apply_inheritance_specs
    raise_view_error("Element '%s' not found in parent view '%%(parent_xml_id)s'" % tag, inherit_id)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/osv/orm.py", line 2070, in raise_view_error
    %  (child_view.xml_id, self._name, error_msg))
AttributeError: View definition error for inherited view 'bpl.view_users_inherit_form' on model 'res.users': Element '<tree string="My view">' not found in parent view 'base.view_users_form'
2013-04-16 06:44:23,534 2922 ERROR bellvantage openerp.tools.convert: Parse error in /home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/addons/bpl/security/bpl_security.xml:9: 
<record id="group_checkroll_user" model="res.groups">
            <field name="name">Checkroll_User</field>
            <field name="category_id" ref="module_checkroll_category"/>
        </record>
Traceback (most recent call last):
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/tools/convert.py", line 847, in parse
    self._tags[rec.tag](self.cr, rec, n)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/tools/convert.py", line 814, in _tag_record
    id = self.pool.get('ir.model.data')._update(cr, self.uid, rec_model, self.module, res, rec_id or False, not self.isnoupdate(data_node), noupdate=self.isnoupdate(data_node), mode=self.mode, context=rec_context )
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/addons/base/ir/ir_model.py", line 937, in _update
    model_obj.write(cr, uid, [res_id], values, context=context)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/addons/mail/res_users.py", line 190, in write
    write_res = super(res_groups_mail_group, self).write(cr, uid, ids, vals, context=context)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/addons/base/res/res_users.py", line 660, in write
    self.update_user_groups_view(cr, uid, context)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/addons/base/res/res_users.py", line 694, in update_user_groups_view
    view.write({'arch': xml_content})
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/osv/orm.py", line 374, in function_proxy
    return attr(self._cr, self._uid, [self._id], *args, **kwargs)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/addons/base/ir/ir_ui_view.py", line 207, in write
    return super(view, self).write(cr, uid, ids, vals, context)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/osv/orm.py", line 4201, in write
    self._validate(cr, user, ids, context)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/osv/orm.py", line 1544, in _validate
    raise except_orm('ValidateError', '\n'.join(error_msgs))
except_orm: ('ValidateError', u'Error occurred while validating the field(s) arch: Invalid XML for View Architecture!')
2013-04-16 06:44:23,535 2922 ERROR bellvantage openerp.netsvc: ValidateError
Error occurred while validating the field(s) arch: Invalid XML for View Architecture!
Traceback (most recent call last):
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/netsvc.py", line 293, in dispatch_rpc
    result = ExportService.getService(service_name).dispatch(method, params)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/service/web_services.py", line 614, in dispatch
    security.check(db,uid,passwd)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/service/security.py", line 40, in check
    pool = pooler.get_pool(db)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/pooler.py", line 49, in get_pool
    return get_db_and_pool(db_name, force_demo, status, update_module)[1]
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/pooler.py", line 33, in get_db_and_pool
    registry = RegistryManager.get(db_name, force_demo, status, update_module)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/modules/registry.py", line 192, in get
    update_module)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/modules/registry.py", line 218, in new
    openerp.modules.load_modules(registry.db, force_demo, status, update_module)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/modules/loading.py", line 344, in load_modules
    processed = load_marked_modules(cr, graph, states_to_load, force, status, report, loaded_modules, update_module)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/modules/loading.py", line 259, in load_marked_modules
    loaded, processed = load_module_graph(cr, graph, progressdict, report=report, skip_modules=loaded_modules, perform_checks=perform_checks)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/modules/loading.py", line 191, in load_module_graph
    load_data(module_name, idref, mode)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/modules/loading.py", line 76, in <lambda>
    load_data = lambda *args: _load_data(cr, *args, kind='data')
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/modules/loading.py", line 127, in _load_data
    tools.convert_xml_import(cr, module_name, fp, idref, mode, noupdate, report)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/tools/convert.py", line 954, in convert_xml_import
    obj.parse(doc.getroot())
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/tools/convert.py", line 847, in parse
    self._tags[rec.tag](self.cr, rec, n)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/tools/convert.py", line 814, in _tag_record
    id = self.pool.get('ir.model.data')._update(cr, self.uid, rec_model, self.module, res, rec_id or False, not self.isnoupdate(data_node), noupdate=self.isnoupdate(data_node), mode=self.mode, context=rec_context )
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/addons/base/ir/ir_model.py", line 937, in _update
    model_obj.write(cr, uid, [res_id], values, context=context)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/addons/mail/res_users.py", line 190, in write
    write_res = super(res_groups_mail_group, self).write(cr, uid, ids, vals, context=context)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/addons/base/res/res_users.py", line 660, in write
    self.update_user_groups_view(cr, uid, context)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/addons/base/res/res_users.py", line 694, in update_user_groups_view
    view.write({'arch': xml_content})
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/osv/orm.py", line 374, in function_proxy
    return attr(self._cr, self._uid, [self._id], *args, **kwargs)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/addons/base/ir/ir_ui_view.py", line 207, in write
    return super(view, self).write(cr, uid, ids, vals, context)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/osv/orm.py", line 4201, in write
    self._validate(cr, user, ids, context)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/osv/orm.py", line 1544, in _validate
    raise except_orm('ValidateError', '\n'.join(error_msgs))
except_orm: ('ValidateError', u'Error occurred while validating the field(s) arch: Invalid XML for View Architecture!')
2013-04-16 06:44:23,540 2922 INFO bellvantage werkzeug: 127.0.0.1 - - [16/Apr/2013 06:44:23] "POST /web/dataset/call_button HTTP/1.1" 200 - 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:25:35.787

问题在 bpl_view.xml 的第 804 行：

```
<record model="ir.ui.view" id="view_users_inherit_form">
    <field name="name">res.users.form.inherit</field>
    <field name="inherit_id" ref="base.view_users_form" />
    <field name="model">res.users</field>
    <field name="type">form</field>
</record> 
```

删除了上面的视图并更新了我的模块。

错误由此解决。

@Arya help.openerp.com 非常感谢您的建议

# php - 下拉选择仅编辑页面上的第一项

> ID：16030530
> 
> 赞同：-1
> 
> 时间：2013-04-16T06:49:22.143
> 
> 标签：php

我有两页 ABC.PHP 和 XYZ.PHP.On ABC.PHP 我正在创建一个表单，在表单一个下拉列表中，值是 A、B、C、D、E、F 所有下拉值都出现在数据库表中。保存所有数据后，页面在 XYZ.PHP 上重定向以更新表单。如果我在 ABC.PHP 页面上选择下拉值 E，在 XYZ.PHP 上选择页面重定向，则显示下拉值为 A，但数据库表值为当前。我想当页面将 ABC.PHP 重定向到 XYZ.PHP 然后显示下拉值是 E 而不是 A。

感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:56:10.730

在重定向上做一件事

```
header('location: XYZ.php?selectdd=value'); 
```

注意：值可能是 A,B,C,D,E 取决于选择

并在 XYZ.php 文件上`$_GET['selectdd']`使用带有下拉值的条件检查检索此值`if`，并选择匹配的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:00:29.583

这是您需要遵循的流程。

在 abc.php

从您的数据库中接收 selectedValue 的值

让我们考虑将该值存储在变量中`$value;`

```
<form action="xyz.php">
<select name="selectedValue">
<?php if($value == 'a')  
echo '<option value="a" selected="selected">a</option>';
 else
    echo  '<option value="a">a</option>';
 if($value == 'b')
    echo '<option value="b" selected="selected">b</option>';
 else
    echo  '<option value="b">b</option>';
 if($value == 'c')
    echo '<option value="c" selected="selected">c</option>';
 else
    echo  '<option value="c">c</option>';
 if($value == 'd')
    echo '<option value="d" selected="selected">d</option>';
 else
    echo  '<option value="d">d</option>';
 if($value == 'e')
    echo '<option value="e" selected="selected">e</option>';
 else
    echo  '<option value="e">e</option>';
?>
</select>
</form> 
```

您的操作页面将保持原样，您可以获得新值并存储在您的数据库中。

# entity-framework - 实体框架，代码优先外键映射错误

> ID：16030532
> 
> 赞同：0
> 
> 时间：2013-04-16T06:49:39.447
> 
> 标签：entity-framework, poco, fluent-interface

我很难确定将外键“类别”映射到我的“产品”表的正确配置。生成模型时（代码优先），我收到此内部异常消息。

{“无法确定 'DataLayer.Product_Category' 关系的主体端。多个添加的实体可能具有相同的主键。”}

我的 POCO 产品类别：

```
 public partial class Product
    {
        public Product()
        {
            this.Carts = new List<Cart>();
            this.OrderLines = new List<OrderLine>();
        }

        public int Id { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
        public string Measure { get; set; }
        public decimal Price { get; set; }
        public int ScheduleId { get; set; }
        public int CategoryId { get; set; }
        public virtual ICollection<Cart> Carts { get; set; }
        public virtual Category Category { get; set; }
        public virtual ICollection<OrderLine> OrderLines { get; set; }
        public virtual Schedule Schedule { get; set; }

        public ObjectState ObjectState { get; set; }
    } 
```

我的类别类 POCO：

```
 public partial class Category
    {
        public Category()
        {
            this.Products = new List<Product>();
        }

        public int Id { get; set; }
        public string Name { get; set; }
        public virtual ICollection<Product> Products { get; set; }

        public ObjectState ObjectState { get; set; }
    } 
```

我的 Fluent API 产品：

```
 public class ProductMap : EntityTypeConfiguration<Product>
    {
        public ProductMap()
        {
            // Primary Key
            this.HasKey(x => x.Id);

            // Properties
            this.Property(x => x.Id)
                .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);

            this.Property(x => x.Name)
                .IsRequired()
                .HasMaxLength(100);

            this.Property(x => x.Description)
                .IsRequired()
                .HasMaxLength(250);

            this.Property(x => x.Measure)
                .IsRequired()
                .HasMaxLength(30);

            // Table & Column Mappings
            this.ToTable("Products");
            this.Property(x => x.Id).HasColumnName("Id");
            this.Property(x => x.Name).HasColumnName("Name");
            this.Property(x => x.Description).HasColumnName("Description");
            this.Property(x => x.Measure).HasColumnName("Measure");
            this.Property(x => x.Price).HasColumnName("Price");
            this.Property(x => x.ScheduleId).HasColumnName("ScheduleId");
            this.Property(x => x.CategoryId).HasColumnName("CategoryId");

            // Relationships
            this.HasRequired(x => x.Category)
                .WithMany(x => x.Products)
                .HasForeignKey(d => d.CategoryId);
            this.HasRequired(x => x.Schedule)
                .WithMany(x => x.Products)
                .HasForeignKey(d => d.ScheduleId);

            this.Ignore(x => x.ObjectState);
        }
    } 
```

我的流利 API 到类别：

```
public class CategoryMap : EntityTypeConfiguration<Category>
{
    public CategoryMap()
    {
        // Primary Key
        this.HasKey(x => x.Id);

        // Properties
        this.Property(x => x.Id)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);

        this.Property(x => x.Name)
            .IsRequired()
            .HasMaxLength(20);

        // Table & Column Mappings
        this.ToTable("Categories");
        this.Property(x => x.Id).HasColumnName("Id");
        this.Property(x => x.Name).HasColumnName("Name");

        this.Ignore(x => x.ObjectState);
    }
} 
```

这些关系是： 计划是一对多到产品类别是一对多到产品

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:54:49.417

你的问题在这里：

```
this.Property(x => x.Id)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None); 
```

您应该将其设置为`DatabaseGeneratedOption.Identity`.

在您的情况下，它将记录添加到具有相同 ID 的表中。

# converter - 如何将 MIDI 文件转换为字符串？

> ID：16030538
> 
> 赞同：-1
> 
> 时间：2013-04-16T06:49:59.367
> 
> 标签：converter, midi

我是一个编码新手（虽然我在一个名为 Garry's Mod 的游戏中编写了表达式 2），我需要一些帮助。我正在尝试将 MIDI 转换为名为 Expression 2 的米老鼠编码语言的字符串。这种“表达式 2”是一款名为 Garry's Mod 的游戏中的编码语言。我的表达式 2 代码允许我编写代码来播放歌曲。

```
#|  2  3     5  6  7     9  0     =  a  s     f  g     j  k  l     '
#| |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
#| |C#|D#|  |F#|G#|A#|  |C#|D#|  |F#|G#|A#|  |C#|D#|  |F#|G#|A#|  |C#|
#| |__|__|  |__|__|__|  |__|__|  |__|__|__|  |__|__|  |__|__|__|  |__|
#|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | 
#|C |D |E |F |G |A |B |C |D |E |F |G |A |B |C |D |E |F |G |A |B |C |  |                                                            
#|__|__|__|__|__|__|__|__|__|__|__|__|__|__|__|__|__|__|__|__|__|__|__|
# q  w  e  r  t  y  u  i  o  p  [  ]  z  x  c  v  b  n  m  ,  .  / 
```

这是 E2 代码的寄存器。如果我在 e2 中输入字符串“qwertyu”，芯片将播放音符 CDEFGAB。很长一段时间以来，我不得不手动输入相应的字母键来制作歌曲。

这就是播放 Pachelbel 的歌曲“Canon”的代码的样子

```
if (first()) {
    TrackSounds[1,string] = "synth/sine.wav"
    TrackVolume[1,number] = 0.8
    TrackStrings[1,string] =

"]]]]]]]]]pppp[[[[]]]]]]]]]pppp[[[[]]]]]ttttyyyyuuuuiiiioooopppp[[[["+
"pppppppiiiiooooppppppppeeeerrrrttttyyyyttttrrrrtttttttttt"+
"iiiiuuuuiiiiiiiiyyyyiiiiuuuuyyyyttttrrrrttttttt" 
```

如果你想知道为什么字母会重复这么多，那是因为（这个）表达式 2 读取每个字母并播放相关的音符 50 个滴答声。不要介意这一点。这都是相对的。如果音符之间有停顿，则停顿长度（停顿是字符串中的空格）与音符长度相关，反之亦然。

我想制作一个程序（或找到一个程序），可以将一个简单的 MIDI 文件转换为我的 e2 代码可识别的字符串。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:55:52.480

不太确定问题，但是您是否尝试过[base64 编码和解码](http://en.wikipedia.org/wiki/Base64)？应该有很多图书馆。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-28T09:40:20.850

好的，我知道这个答案迟了一年多，但我只是通过谷歌偶然发现了这个问题，事实证明，我已经在 2009 年制定了一个程序来做到这一点。我在关于其他人转换器的[Wiremod 论坛主题。](http://www.wiremod.com/forum/finished-contraptions/15019-midi-e2-converter-2.html#post143368)

来自论坛帖子：

> 注意：将 MIDI 拖到应用程序上进行转换。它将在与 midi 相同的文件夹中输出表达式 2。不支持 midi type 0，这是出于懒惰。不支持音高混合。这在 NES 上的第一级魂斗罗中经常使用（使用我能找到的唯一 NSF2MIDI 转换器）。默认情况下，所有曲目都播放 synth/tri.wav，但您可以轻松更改它。您必须将 interval() 更改为 20，歌曲才能以正确的速度播放。

[您可以在此处](https://drive.google.com/file/d/0B40Xy8VSKqoOZjEyck1lc1JJZk0/view?usp=sharing&resourcekey=0-9hsdfCW28j0H6fArUb8j2Q)下载此转换器。

我可能可以制作一个更好的转换器，但它非常适合我使用它的用途（将 NES 音乐转换为 midi，然后转换为 Expression 2）

# wordpress - 自定义archive.php页面中的分页

> ID：16030541
> 
> 赞同：3
> 
> 时间：2013-04-16T06:50:05.667
> 
> 标签：wordpress, pagination

我`archive.php`通过添加一些额外的代码到默认页面创建了一个自定义页面`archive.php`。我想在该页面中进行分页，但我不知道为什么它不起作用。

我使用`wp-pagenavi`插件进行分页。`page not found`当我单击第二页时，它显示错误。为了更容易理解，我发布了正在发生的事情的图像。

下图是页面加载时发生的情况。您可以看到我用红色标记的站点地址： ![在此处输入图像描述](https://i.stack.imgur.com/X0ZHX.jpg)

接下来是当我单击“2”导航到第二页时发生的情况的图像。如您所见，网址是`../?m=201303&paged=2`.

![在此处输入图像描述](https://i.stack.imgur.com/CuCr5.jpg)

以下是我用于自定义存档页面的代码：

```
<?php

get_header(); ?>

<div class="archive_page">

<?php 
    $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
    $args = array_merge( $wp_query->query, 
        array( 'cat' =>'-1,-8,-9',
        'posts_per_page'=>'2',
        'paged' =>$paged));
      query_posts( $args );
     ?>
<?php if ( have_posts() ) : ?>

 <header class="page-header">
 <h1 class="page-title">
 <?php if ( is_day() ) : ?>
 <?php printf( __( 'Daily Archives: %s', 'twentyeleven' ), '<span>' . get_the_date() . '</span>' ); ?>
<?php elseif ( is_month() ) : ?>
<?php printf( __( 'Monthly Archives: %s', 'twentyeleven' ), '<span>' . get_the_date( _x( 'F Y', 'monthly archives date format', 'twentyeleven' ) ) . '</span>' ); ?>
    <?php elseif ( is_year() ) : ?>
<?php printf( __( 'Yearly Archives: %s', 'twentyeleven' ), '<span>' . get_the_date( _x( 'Y', 'yearly archives date format', 'twentyeleven' ) ) . '</span>' ); ?>
<?php else : ?>
<?php _e( 'Blog Archives', 'twentyeleven' ); ?>
    <?php endif; ?>
</h1>
    </header>
<div id="navig">
    <?php if (function_exists('wp_pagenavi')){wp_pagenavi();}?>
</div>
<?php while ( have_posts() ) : the_post(); ?>
<div id="all_posts">
    <div id="auth_ava">
    <?php echo get_avatar( get_the_author_email(), '65');?>
    </div>
    <div class="post_title_archive">
    <?php 
    the_title();
    ?>
    </div>
       <div id="name_date_coment_tag">
           <div id="auth_dis_name">
        <?php the_author_posts_link();?>
       </div>
    <div class="border">|</div>
    <div id="posted_date_archive">
        <?php 
        the_time('F j, Y');
         ?> 
    </div>
    <div class="border">|</div>
    <div class="categories">
        Categories: <?php the_category(', '); ?> 
    </div>
    <div class="border">|</div>
    <div id="tags_archive">
        <?php 
            the_tags('Tags: ', ', ', '<br />'); 
        ?> 
    </div>
    </div>
    </div>
        <div class="excerpt_archive">
    <?php 
        the_excerpt();
    ?>
    </div>
    <?php endwhile; ?>
    <div id="navig">
       <?php if (function_exists('wp_pagenavi')){wp_pagenavi();}?>
    </div>
    <?php else : ?>
    <article id="post-0" class="post no-results not-found">
        <header class="entry-header">
    <h1 class="entry-title"><?php _e( 'Nothing Found', 'twentyeleven' ); ?></h1>
    </header>
    <div class="entry-content">
         <p><?php _e( 'Apologies, but no results were found for the requested archive. Perhaps searching will help find a related post.', 'twentyeleven' ); ?></p>
        <?php get_search_form(); ?>
        </div>
    </article>
        <?php endif; ?>
    </div>
<?php get_footer(); ?> 
```

我真的很抱歉问了一个很长的问题。我希望很清楚我想要实现的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:11:59.107

***只需尝试以下操作：***

```
<?php
//the query using arguments above
        $wp_query = new WP_Query( $args );

        //use the query for paging
        $wp_query->query_vars[ 'paged' ] > 1 ? $current = $wp_query->query_vars[ 'paged' ] : $current = 1;

        //set the "paginate_links" array to do what we would like it it. Check the codex for examples http://codex.wordpress.org/Function_Reference/paginate_links
        $pagination = array(
            'base' => @add_query_arg( 'paged', '%#%' ),
            //'format' => '',
            'showall' => false,
            'end_size' => 4,
            'mid_size' => 4,
            'total' => $wp_query->max_num_pages,
            'current' => $current,
            'type' => 'plain'
        );

        //build the paging links
        if ( $wp_rewrite->using_permalinks() )
            $pagination[ 'base' ] = user_trailingslashit( trailingslashit( remove_query_arg( 's', get_pagenum_link( 1 ) ) ) . 'page/%#%/', 'paged' );

        //more paging links
        if ( !empty( $wp_query->query_vars[ 's' ] ) )
            $pagination[ 'add_args' ] = array( 's' => get_query_var( 's' ) );

        //run the query
        if ( $wp_query->have_posts() ) : while ( $wp_query->have_posts() ) : $wp_query->the_post();
?> 
```

***另请参阅以下位置：***

[https://wordpress.stackexchange.com/questions/32100/pagination-on-a-custom-page-template](https://wordpress.stackexchange.com/questions/32100/pagination-on-a-custom-page-template)

和

[http://wordpress.org/support/topic/custom-post-type-archive-page-pagination-isnt-working](http://wordpress.org/support/topic/custom-post-type-archive-page-pagination-isnt-working)

我认为这可以帮助您解决问题。

# javascript - 第二个菜单在导航时不添加 .active 类

> ID：16030551
> 
> 赞同：0
> 
> 时间：2013-04-16T06:50:49.967
> 
> 标签：javascript, css, joomla2.5

大家好，我正在 Joomla 2.5 上建立一个网站，其中我有 2 个菜单，一个是主菜单，另一个是仅出现在某些页面上的第二个菜单。主菜单效果很好，它在导航时添加了 .active 类，例如：如果单击：

```
<li class="item111 active root "> 
```

如果没有点击

```
<li class="item111 root "> 
```

但第二个默认情况下不应用此功能我不知道为什么：

```
<ul id="slide-menu" class="menu menu-sidebar">
  <li class="level1 item187">
    <a class="level1" href="/plastikovye-okna-i-dveri/other/plastikovye-okna-i-dveri">
     <span>Пластиковые окна</span>
    </a>
  </li>
  <li class="level1 item188">
    <a class="level1" href="/plastikovye-okna-i-dveri-2/uncategorised/okna-rehau">
     <span>Входные двери</span>
    </a>
  </li>
</ul> 
```

我试图用javascript添加这个类，但它也不起作用，对此有什么想法吗？

```
<script>
$(function(e){

  $("#slide-menu > li ").click(function(){
    e.preventDefault();
    $("#slide-menu > li ").addClass("current").not(this).removeClass("current");
  });

});

</script> 
```

[网站链接](http://profsystem.md)，您可以看到滑块旁边的菜单

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T06:58:10.767

试试这个：

```
$(function(){
  $("#slide-menu > li ").click(function(e){
    e.preventDefault();
    $("#slide-menu > li ").addClass("current").not(this).removeClass("current");
  });
}); 
```

# ember.js - 如何将按钮连接到另一个控制器

> ID：16030553
> 
> 赞同：0
> 
> 时间：2013-04-16T06:51:02.827
> 
> 标签：ember.js

在模板中，我遍历所有`Users`. 从每个`User`我想将一个按钮连接到（singluar）`xyz`中的一个功能。`UserController`我必须如何使用`{{action}}`才能做到这一点？现在我所有的尝试都以`UsersController`.

**索引.html**

```
<script type="text/x-handlebars" data-template-name="users">
  <table>
    {{#each model}}
      <tr>
        <td>{{lastName}}</td>
        <td><button {{action "xyz" this}}>Xyz</button></td>
      </tr>
    {{/each}}
  </table>
</script> 
```

**应用程序.js**

```
App = Ember.Application.create();

App.Store = DS.Store.extend({
  revision: 12,
  adapter: 'DS.FixtureAdapter'
})

App.Router.map(function() {
  this.resource('about');
  this.resource('users', function() {
    this.resource('user', { path: ':user_id' })
  })
});

App.UsersRoute = Ember.Route.extend({
  model: function() {
    return App.User.find();
  }
});

App.UserController = Ember.ObjectController.extend({
  xyz: function() {
    console.log('Bingo!')
  }  
})

App.User = DS.Model.extend({
  lastName: DS.attr('string'),
})

App.User.FIXTURES = [{
  id: 1,
  lastName: "Clinton"
}, {
  id: 2,
  lastName: "Obama"
}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:06:33.333

一种解决方案可能是使用助手的`itemController="user"`属性。`each`这样，目标控制器应该是每个用户的 UserController 实例。

```
{{#each model itemController="user"}}
  <tr>
    <td>{{lastName}}</td>
    <td><button {{action "xyz" this}}>Xyz</button></td>
  </tr>
{{/each}} 
```

# iphone - 当用户按下按钮显示日期选择器视图并选择日期然后显示为按钮标题并进一步关闭日期选择器视图

> ID：16030559
> 
> 赞同：1
> 
> 时间：2013-04-16T06:51:19.410
> 
> 标签：iphone, ios, ios5, uibutton, uidatepicker

我写了这段代码。但不工作...

是的 NSLog 是正确的日期。

Datepicker 还查看并选择日期。但是，当我选择日期时，我的按钮标题和日期选择器不会发生任何变化，而日期选择器仍会保留在屏幕上。当用户选择日期时，我也想隐藏...

实际上，当用户按下按钮然后选择日期并将标题设置为按钮并释放选择器视图时，我会显示日期选择器视图。我用的是ios 5...

```
[datePicker setHidden:NO];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
[dateFormatter setDateFormat:@"MM/dd/yyyy"];

NSString *dateString = [dateFormatter stringFromDate:[self.datePicker date]];

   NSLog(@"\n"
      "theDate: |%@| \n"
       , dateString);
[self.DOBbutton setTitle:dateString forState:UIControlStateNormal]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T06:59:55.120

在您的按钮操作中编写此代码

```
UIActionSheet *dateActionSheet = [[UIActionSheet alloc] initWithTitle:@"" delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:@"Done", nil];
        [dateActionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];
        [dateActionSheet showInView:self.view];
        [dateActionSheet setFrame:CGRectMake(0, 200, 320, 383)];
        UIDatePicker *dp = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 80, 100, 116)];
        dp.datePickerMode = UIDatePickerModeTime;
//        NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
//        [dateFormat setDateFormat:@"HH:mm:ss"];
        NSDate *eventDate = dp.date;
        NSDateFormatter *timeFormat = [[NSDateFormatter alloc] init];
        [timeFormat setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"]];
        [timeFormat setDateFormat:@"HH:mm"];
        timeString = [timeFormat stringFromDate:eventDate];
        [ dp addTarget: self action:
         @selector(dateChanged:)
      forControlEvents:UIControlEventValueChanged
         ];

        [ self.view addSubview: dp ];

     //   txtProposeTime.font = [ UIFont fontWithName: @"Arial" size: 9.0 ];
     //   txtProposeTime.textColor = [ UIColor blackColor ];

        txtProposeTime.text = timeString;

        [dp setDatePickerMode:UIDatePickerModeTime];
        [dateActionSheet addSubview:dp]; 
```

外部按钮编写此代码

```
-(void) dateChanged: (id)sender
{
    UIDatePicker *control = (UIDatePicker *) sender;
    control.datePickerMode=UIDatePickerModeDate;
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
//    [dateFormat setDateFormat:@"MM/dd/yyyy HH:mm:ss a"];
    NSDate *eventDate = control.date;
    NSDateFormatter *timeFormat = [[NSDateFormatter alloc] init];
    [timeFormat setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"]];
    [timeFormat setDateFormat:@"dd/MM/yyyy"];
    NSString *dateString = [timeFormat stringFromDate:eventDate];
    txtMeetingDate.text=dateString;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:06:23.363

尝试这个

代替它

```
 [self.DOBbutton setTitle:dateString forState:UIControlStateNormal]; 
```

和

```
 DOBbutton.titleLabel.text =dateString; 
```

并确保按钮是否与您的 xib 连接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:07:36.650

设置标题为 Done 的按钮，当用户选择 Done 时调用波纹管方法...

```
-(IBAction)btnDone_Clicked:(id)sender
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    NSString *dateString =[[yourDatePicker date] stringFromDateWithFormat:@"MM/dd/yyyy"];
    [yourButton setTitle:dateString forState:UIControlStateNormal];
    [yourDatePicker setHidden:YES];
    [UIView commitAnimations];
} 
```

这是我的自定义方法，可用于更改日期的格式并将其转换为字符串..

```
-(NSString*)stringFromDateWithFormat:(NSString*)strDateFormat{
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
     //[formatter setTimeZone:[NSTimeZone systemTimeZone]];
    [formatter setDateFormat:strDateFormat];
    NSString *str = [formatter stringFromDate:self];
    [formatter release];
    return str;
} 
```

# android - 应用程序崩溃：Logcat 说您必须为 TextView 提供资源 ID

> ID：16030561
> 
> 赞同：0
> 
> 时间：2013-04-16T06:51:29.987
> 
> 标签：android, listview

我已尽一切努力使我的代码正常工作，但我无法弄清楚问题出在哪里。应用程序在首次运行时崩溃。

这是我的代码：

```
package com.example.smsTest;

import java.util.List;

import android.app.ListActivity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Toast;

public class Messages extends ListActivity {
    Button btnNew;
    private SQLiteAdapter mySQLiteAdapter;

    private BroadcastReceiver mIntentReceiver;
    ListView listview;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.messages);

        btnNew = (Button) findViewById(R.id.btnNew);

        mySQLiteAdapter = new SQLiteAdapter(this);
        mySQLiteAdapter.openToRead();

        List<Message> values = mySQLiteAdapter.getAllMessages();

        ArrayAdapter<Message> adapter = new ArrayAdapter<Message>(this,
                    R.layout.messages, values);

        setListAdapter(adapter);

        btnNew.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent myIntent = new Intent(Messages.this, SMSTest.class);
                startActivity(myIntent);
            }

        });

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        String item = (String) getListAdapter().getItem(position);
        Toast.makeText(this, item + " selected", Toast.LENGTH_LONG).show();
    }

    @Override
    protected void onResume() {
        super.onResume();

        IntentFilter intentFilter = new IntentFilter("SmsMessage.intent.MAIN");
        mIntentReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                @SuppressWarnings("unchecked")
                ArrayAdapter<Message> adapter = (ArrayAdapter<Message>) getListAdapter();
                Message message = null;

                String msg = intent.getStringExtra("get_msg");

                // Process the sms format and extract body & phoneNumber
                msg = msg.replace("\n", "");
                String body = msg.substring(msg.lastIndexOf(":") + 1,
                        msg.length());
                String sender = msg.substring(0, msg.lastIndexOf(":"));

                message = mySQLiteAdapter.createMessage(sender, body);
                // adapter.add(message);
                adapter.notifyDataSetChanged();
            }
        };

        this.registerReceiver(mIntentReceiver, intentFilter);
    }

    @Override
    protected void onPause() {
        super.onPause();
        this.unregisterReceiver(this.mIntentReceiver);
    }
} 
```

Messages.xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/btnNew"
        android:layout_width="120dp"
        android:layout_height="wrap_content"
        android:text="New" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="wrap_content"
        android:layout_height="435dp" />

</LinearLayout> 
```

这是logcat：

```
04-16 06:46:48.442: D/dalvikvm(773): GC_CONCURRENT freed 69K, 8% free 2749K/2960K, paused 70ms+12ms, total 122ms
04-16 06:46:48.672: E/ArrayAdapter(773): You must supply a resource ID for a TextView
04-16 06:46:48.672: D/AndroidRuntime(773): Shutting down VM
04-16 06:46:48.672: W/dalvikvm(773): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-16 06:46:48.702: E/AndroidRuntime(773): FATAL EXCEPTION: main
04-16 06:46:48.702: E/AndroidRuntime(773): java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:386)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.widget.AbsListView.obtainView(AbsListView.java:2159)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.widget.ListView.makeAndAddView(ListView.java:1831)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.widget.ListView.fillDown(ListView.java:674)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.widget.ListView.fillFromTop(ListView.java:735)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.widget.ListView.layoutChildren(ListView.java:1652)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.widget.AbsListView.onLayout(AbsListView.java:1994)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.view.View.layout(View.java:14008)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.view.ViewGroup.layout(ViewGroup.java:4373)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1663)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1521)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1434)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.view.View.layout(View.java:14008)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.view.ViewGroup.layout(ViewGroup.java:4373)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.view.View.layout(View.java:14008)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.view.ViewGroup.layout(ViewGroup.java:4373)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1663)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1521)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1434)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.view.View.layout(View.java:14008)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.view.ViewGroup.layout(ViewGroup.java:4373)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.view.View.layout(View.java:14008)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.view.ViewGroup.layout(ViewGroup.java:4373)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:1892)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1711)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.view.Choreographer.doCallbacks(Choreographer.java:562)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.view.Choreographer.doFrame(Choreographer.java:532)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.os.Handler.handleCallback(Handler.java:725)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.os.Looper.loop(Looper.java:137)
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.app.ActivityThread.main(ActivityThread.java:5041)
04-16 06:46:48.702: E/AndroidRuntime(773):  at java.lang.reflect.Method.invokeNative(Native Method)
04-16 06:46:48.702: E/AndroidRuntime(773):  at java.lang.reflect.Method.invoke(Method.java:511)
04-16 06:46:48.702: E/AndroidRuntime(773):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-16 06:46:48.702: E/AndroidRuntime(773):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-16 06:46:48.702: E/AndroidRuntime(773):  at dalvik.system.NativeStart.main(Native Method)
04-16 06:46:48.702: E/AndroidRuntime(773): Caused by: java.lang.ClassCastException: android.widget.LinearLayout cannot be cast to android.widget.TextView
04-16 06:46:48.702: E/AndroidRuntime(773):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:379)
04-16 06:46:48.702: E/AndroidRuntime(773):  ... 42 more
04-16 06:46:51.462: I/Process(773): Sending signal. PID: 773 SIG: 9 
```

请帮助我为什么它会崩溃。

更新：

新的Logcat：

```
04-16 13:18:06.314: E/Trace(804): error opening trace file: No such file or directory (2)
04-16 13:18:06.724: D/dalvikvm(804): GC_CONCURRENT freed 69K, 8% free 2773K/2988K, paused 15ms+54ms, total 149ms
04-16 13:18:06.864: D/(804): HostConnection::get() New Host Connection established 0x2a1609e8, tid 804
04-16 13:18:20.764: D/AndroidRuntime(804): Shutting down VM
04-16 13:18:20.764: W/dalvikvm(804): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-16 13:18:20.784: E/AndroidRuntime(804): FATAL EXCEPTION: main
04-16 13:18:20.784: E/AndroidRuntime(804): java.lang.ClassCastException: com.example.smsTest.Message cannot be cast to java.lang.String
04-16 13:18:20.784: E/AndroidRuntime(804):  at com.example.smsTest.Messages.onListItemClick(Messages.java:53)
04-16 13:18:20.784: E/AndroidRuntime(804):  at android.app.ListActivity$2.onItemClick(ListActivity.java:319)
04-16 13:18:20.784: E/AndroidRuntime(804):  at android.widget.AdapterView.performItemClick(AdapterView.java:298)
04-16 13:18:20.784: E/AndroidRuntime(804):  at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
04-16 13:18:20.784: E/AndroidRuntime(804):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
04-16 13:18:20.784: E/AndroidRuntime(804):  at android.widget.AbsListView$1.run(AbsListView.java:3423)
04-16 13:18:20.784: E/AndroidRuntime(804):  at android.os.Handler.handleCallback(Handler.java:725)
04-16 13:18:20.784: E/AndroidRuntime(804):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-16 13:18:20.784: E/AndroidRuntime(804):  at android.os.Looper.loop(Looper.java:137)
04-16 13:18:20.784: E/AndroidRuntime(804):  at android.app.ActivityThread.main(ActivityThread.java:5041)
04-16 13:18:20.784: E/AndroidRuntime(804):  at java.lang.reflect.Method.invokeNative(Native Method)
04-16 13:18:20.784: E/AndroidRuntime(804):  at java.lang.reflect.Method.invoke(Method.java:511)
04-16 13:18:20.784: E/AndroidRuntime(804):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-16 13:18:20.784: E/AndroidRuntime(804):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-16 13:18:20.784: E/AndroidRuntime(804):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T06:55:45.903

ArrayAdapter 适配器 = new ArrayAdapter(this, R.layout.messages, values);

第二个参数（布局）应该是 TextView。请检查：http: [//developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter%28android.content.Context,%20int,%20java.util.List%3CT%3E%29](http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter%28android.content.Context,%20int,%20java.util.List%3CT%3E%29)

包含在实例化视图时使用的 TextView 的布局文件的资源 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:21:45.597

你在给listview提供id时在你的xml文件中遇到了问题。在你的代码中检查这个

```
<ListView
        android:id="@android:id/list"  //change it to android:id="@android:@+id/list"
        android:layout_width="wrap_content"
        android:layout_height="435dp" /> 
```

# ajax - html.ts 文件在我的 moovweb 项目中运行了两次

> ID：16030565
> 
> 赞同：4
> 
> 时间：2013-04-16T06:51:42.083
> 
> 标签：ajax, moovweb

我遇到了一个问题，即 html.ts 文件在某些​​页面上运行了两次，即使在浏览器中关闭了 AJAX 也是如此。这似乎不是映射问题，因为即使我注释掉所有映射，它也会这样做。该页面在 Chrome 浏览器中看起来不错。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T07:33:46.527

如果 AJAX 或其他任何东西都没有插入页面，那么这可能是由于 html 格式不正确。如果`<head>`,`<body>`或之外的源代码中有任何内容，则`<html>`Gokogiri 会将外围标记包装在单独的`<html>`标记中。然后由于有两个开始和结束`<html>`标签，html.ts 将运行两次。解决方案是在我们告诉 Gokogiri 如何处理它之前捕获传入的页面，并通过确保所有内容都包含在`<body>`标签中来修复损坏的 html。

在项目文件夹的 scripts/main.ts 中，之后

```
match($content_type) {
  with(/html/) { 
```

添加这个，它会删除`</body>`and`</html>`标记并将它们附加到末尾：

```
 # wrap markup that is outside the body so tritium doesn't get applied twice
  replace(/\<\/body\>/,"")
  replace(/\<\/html\>/,"")
  append("</body> </html>") 
```

这应该确保只有一个打开的结束`<html>`标签被传递给 Gokogiri 并且 html.ts 只运行一次，因为我们想要它！

源代码在 Chrome 中看起来不错的原因是，当 Tritium 代码处理页面时，它将两个`<html>`标签中的内容移动到第一个标签中，当 Chrome 接收到页面时，它将擦除第二个空`<html>`标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T17:04:34.533

也可能是有两个`<html>`标签开头！这些正在您的 html.ts 文件中被选中。由于 html.ts 文件以 selector 开头`$("/html") {`，如果是这种情况并且有两个`<html>`标签，那么代码将运行两次。

检查页面上可能导致此问题的 iframe！

# actionscript-3 - 用循环声明变量

> ID：16030569
> 
> 赞同：0
> 
> 时间：2013-04-16T06:52:02.767
> 
> 标签：actionscript-3, flash

如何声明这个变量。像这样

```
for (var a:int=1; a<=9; a++)
{
var ori_[a]_b1:Number = shuffledLetters[a].split("_")[0];
}
trace(ori_1_b1); 
```

我试过这样，但没有成功。

```
for (var a:int=1; a<=9; a++)
{
this["var ori_"+a+"_b1:Number"] = shuffledLetters[a].split("_")[0];
}
trace(ori_1_b1); 
```

之前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:55:42.473

```
this["ori_"+a+"_b1"] = shuffledLetters[a].split("_")[0]; 
```

当您通过创建的字符串分配属性时，您只需指定名称，而不是类型。

# java - 将相对布局转换为位图并将其与子元素一起保存到手机图库

> ID：16030570
> 
> 赞同：0
> 
> 时间：2013-04-16T06:52:03.830
> 
> 标签：java, android, android-layout, bitmap, android-relativelayout

我正在尝试转换`RelativeLayout`为位图并希望将其与子元素一起保存到电话库中。但是当我保存它时，只有一张图像保存在画廊中，而另一个孩子没有保存。

```
public class Result extends Activity implements android.view.View.OnClickListener{
    private MaskAdjuster mIV;
    private Bitmap mBitmap,b;
    private Bundle getValues;
    private Button save,moreApp;
    private ImageView mask;
    private BitmapDrawable d;
    private static File APP_FILE_PATH = new File("/sdcard/rISHABH/");
    private int x,y;
    private int []epx=null;
    private int []epy=null;
    private int []lpx=null;
    private int []lpy=null;
    private float eyedistance;
    private int count;
    public String filename;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    mIV=new MaskAdjuster(this);
    setContentView(R.layout.result);
    initialize();
    b=getIntent().getParcelableExtra("bitmap");
    mBitmap=b.copy(Bitmap.Config.RGB_565, true);
    getValues=getIntent().getBundleExtra("bundle");
    epx=getValues.getIntArray("eyelocationX");
    epy=getValues.getIntArray("eyelocationY");
    lpx=getValues.getIntArray("liplocationX");
    lpy=getValues.getIntArray("liplocationY");

    eyedistance=getValues.getFloat("eyedistance");
    count=getValues.getInt("count");
    mIV=(MaskAdjuster)findViewById(R.id.iv_resultface);
    mIV.setImageBitmap(mBitmap);
    mIV.setDisplayPoints(epx, epy,lpx,lpy, count * 2, eyedistance);
    mIV.invalidate();
    mask.setImageBitmap(MaskAdjuster.getFace());
    save.setOnClickListener(this);
    moreApp.setOnClickListener(this);
    }

    private void initialize() {
    save=(Button)findViewById(R.id.btn_save);
    moreApp=(Button)findViewById(R.id.btn_more_app);
    mask=(ImageView)findViewById(R.id.iv_mask);
    }

    @Override
    protected void onPause() {
    // TODO Auto-generated method stub

    super.onPause();

    b.recycle();
    finish();

    }

    @Override
    public void onClick(View v) {
    switch (v.getId()) {
    case R.id.btn_save:

    try{
    saveandforward();

    Toast.makeText (getApplicationContext(), 
    "Image has been saved to Gallery(SD card) by name : " + APP_FILE_PATH +            filename, Toast.LENGTH_LONG).show ();

    }catch (Exception e) {
    e.printStackTrace();
    }

    break;
    case R.id.btn_more_app:

    break;

    default:
    break;
    }
    }

    void saveandforward(){
    Bitmap bm=null;
    try {
    Calendar cal = Calendar.getInstance();
    SimpleDateFormat sdf = new SimpleDateFormat ("yyyyMMddHHmmss");
    filename = sdf.format(cal.getTime());

    final FileOutputStream out = new FileOutputStream(new File      (APP_FILE_PATH     +filename+".png"));
    try{
    View vs = (View)findViewById(R.id.Frame_layout);
    bm = loadBitmapFromView(vs);

    }
    catch(Exception e)
    {
    Log.e("meesge",e.getMessage()); 

    }
    bm.compress(Bitmap.CompressFormat.PNG, 90, out);
    out.flush();
    out.close();

    }catch (Exception e) {
    e.printStackTrace();
    }

    }
    public static Bitmap loadBitmapFromView(View v) {
    Bitmap b = Bitmap.createBitmap(320,480, Bitmap.Config.RGB_565);
    Canvas c = new Canvas(b);
    v.draw(c);
    return b;

         }
    } 
```

xml在这里

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/bg">
<FrameLayout
android:id="@+id/Frame_layout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_centerHorizontal="true"
android:layout_centerVertical="true"
>
<com.shagun.agemyface.MaskAdjuster
android:id="@+id/iv_resultface"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
/>
<ImageView
android:id="@+id/iv_mask"
android:layout_width="wrap_content"
android:layout_height="wrap_content"

/>
</FrameLayout>
<Button 
android:id="@+id/btn_save"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentBottom="true"
android:layout_alignParentLeft="true"
android:background="@drawable/save"/>

<Button 
android:id="@+id/btn_more_app"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentBottom="true"
android:layout_alignParentRight="true"
android:text="More App"/>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:09:18.020

我猜你喜欢创建布局的屏幕截图请尝试使用它。

```
RelativeLayout layout = (RelativeLayout)findViewById(R.id.x);
layout.setDrawingCacheEnabled(true);
bitmap = Bitmap.createBitmap(layout.getDrawingCache());
layout.setDrawingCacheEnabled(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:06:00.350

问题是您实际上是在保存`FrameLayout`代码。这是您的问题所在：

```
View vs = (View)findViewById(R.id.Frame_layout); 
```

为您添加一些 id`RelativeLayout`并将行更改为：

```
View vs = findViewById(R.id.Id_Of_Relative_Layout); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-01T12:31:45.643

```
 RelativeLayout rlMain = (RelativeLayout)findViewById(R.id.abc);

    rlMain.setDrawingCacheEnabled(true);
    Bitmap bitmap = rlMain.getDrawingCache();

    String file = getFilename();

    try {

        FileOutputStream ostream = new FileOutputStream(file);
        bitmap.compress(Bitmap.CompressFormat.PNG, 100, ostream);
        ostream.close();
        rlMain.invalidate();

    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        rlMain.setDrawingCacheEnabled(false);
    }

    private String getFilename() {
    File file = new File(IMAGE_PATH);
    if (!file.exists()) {
        file.mkdirs();
    }
    String uriSting = (file.getAbsolutePath() + "/"
            + System.currentTimeMillis() + ".jpg");
    return uriSting;
} 
```

# android - Android - AsyncTask 未按预期更新活动

> ID：16030573
> 
> 赞同：0
> 
> 时间：2013-04-16T06:52:17.213
> 
> 标签：android, android-asynctask

我有一个按钮，它运行 AsyncTask 以从 Web 下载一些信息，并将该信息放入活动中的局部变量中，可以通过按另一个按钮来查看。此外，我在 UI 中更新了一个视图，以说明同步是否正在运行或准备就绪。

出于某种原因，有时 onPostExecute 不会按预期更新 UI 和局部变量，但有时会。我使用调试器进行了检查，更新变量 (handleDownloadComplete) 的代码正在运行，但 UI 和显示数据按钮仍然没有正确更新。注意：问题主要发生在连接超时时，但我仍然使用调试器看到返回值是正确的 - “连接超时”，但活动没有更新。

谢谢！

AsyncTask 类：

```
public class DownloadDataTask extends AsyncTask<String, Integer, String> {
    public interface DownloadCompleteHandler
    {
        void handleDownloadComplete(String result);
    }

    private DownloadCompleteHandler handler;

    @Override
    protected String doInBackground(String... urls) {

        try {
            return downloadUrl(urls[0]);
        } catch (IOException e) {
            return "Unable to retrieve web page. URL may be invalid.";
        }
    }

    @Override
    protected void onPostExecute(String result) {
        handler.handleDownloadComplete(result);
    }

    private String downloadUrl(String urlStr) throws IOException
    {
        InputStream is = null;
        String result = new String();

        try {
            URL url = new URL(urlStr);
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            conn.setReadTimeout(10000);
            conn.setConnectTimeout(15000);
            conn.setRequestMethod("GET");
            conn.setDoInput(true);

            conn.connect();
            int response = conn.getResponseCode();
            is = conn.getInputStream();

            BufferedReader in = new BufferedReader(new InputStreamReader(is));
            String inputLine;
            while ((inputLine = in.readLine()) != null) {
                result += inputLine;            
            }       
        }
        catch (MalformedURLException ex) {
            result = "Malformed URL: " + urlStr;
        }
        catch (SocketTimeoutException ex) {
            result = "Connection timed out";
        }
        finally {
            if (is != null)
                is.close();
        }

        return result;
    }

    public void setHandler(DownloadCompleteHandler handler) {
        this.handler = handler;
    }   
} 
```

活动：

```
public class MainActivity extends Activity implements DownloadDataTask.DownloadCompleteHandler{

    private String downloadResult = "";
    private Boolean isSyncing = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public void onResume() {
        super.onResume();
        checkNetworkConnection();
    }

    @Override
    protected void onSaveInstanceState(Bundle savedInstanceState) {
        savedInstanceState.putString(KEY_DOWNLOAD_RESULT, downloadResult);
        savedInstanceState.putBoolean(KEY_IS_SYNCING, isSyncing);

        super.onSaveInstanceState(savedInstanceState);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);

        downloadResult = savedInstanceState.getString(KEY_DOWNLOAD_RESULT);
        isSyncing = savedInstanceState.getBoolean(KEY_IS_SYNCING);
        updateAppDataView();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.action_settings:
                settingsMenu();
                return true;
            case R.id.action_show_result:
                showUrlResultDialog();
                return true;
            case R.id.action_sync:
                getHttpData();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }

    void settingsMenu() {
        Intent intent = new Intent(this, SettingsActivity.class);
        startActivity(intent);
    }

    private void checkNetworkConnection() {
        ConnectivityManager connMgr = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
            if (networkInfo != null && networkInfo.isConnected()) {
                // test app connection
            } else {
                AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setMessage(R.string.titleNoNetwork).setMessage(R.string.msgNoNetwork);
                builder.setCancelable(false);

                builder.setNegativeButton("Ok", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {
                        Intent intent = new Intent(Intent.ACTION_MAIN);
                        intent.addCategory(Intent.CATEGORY_HOME);
                        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                        startActivity(intent);
                    }
                });

                AlertDialog dialog = builder.create();
                dialog.show();
            }
    }

    private void getHttpData()
    {
        if (isSyncing) return;

        isSyncing = true;

        TextView view = (TextView)findViewById(R.id.textWebResult);
        view.setText("Syncing");

        String serverId = PreferenceManager.getDefaultSharedPreferences(this).getString(getString(R.string.keyServerIp), "");
        String url = "https://" + serverId;
        DownloadDataTask downloader = new DownloadDataTask();
        downloader.setHandler(this);
        downloader.execute(url);
    }

    public void handleDownloadComplete(String result)
    {
        downloadResult = result;
        TextView view = (TextView)findViewById(R.id.textWebResult);
        view.setText("Ready");
        isSyncing = false;
    }

    private void showUrlResultDialog()
    {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage(R.string.titleUrlResultData).setMessage(downloadResult);

        builder.setNeutralButton("Ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                dialog.cancel();
            }
        });     

        AlertDialog dialog = builder.create();
        dialog.show();
    }
} 
```

编辑：我注意到我缺少`onSaveInstanceState`和`onRestoreInstanceState`实现，并认为这可能是原因，因为问题仅在连接超时时发生，这可能导致活动因某种原因重新启动。所以我添加了它们（也在上面的代码中），但问题仍然存在......

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:17:19.083

我错了，

但我认为它不是连接超时问题。可能是当您更改设备的方向时。因为当方向改变时，活动被重新创建，并且有一个具有不同文本视图的新活动对象。

但情况就是这样，那么你应该尝试将 android:configChanges="orientation|keyboardHidden|screenSize" 添加到你的 mainfest。

这篇文章很好地描述了手头的问题：

[后台任务、进度对话框、方向更改 - 是否有任何 100% 可行的解决方案？](https://stackoverflow.com/questions/3821423/background-task-progress-dialog-orientation-change-is-there-any-100-working/3821998#3821998)

**已编辑**

onSaveInstanceState 只会保存该活动使用的数据，而不是视图。将重新创建视图。由于您正在通过 downloader.setHandler(this); 传递您的活动的引用；所以下载完成后处理程序将指向旧活动而不是新活动，并且文本视图将属于旧活动。因此，新活动不会获得下载完成的事件。

如果你确定 handler.handleDownloadComplete(result); 正在被调用，那么这可能只是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:19:47.963

您必须调用 runOnUiThread 以正确更新 ui 线程上的小部件，如下所示：

```
public void handleDownloadComplete(final String result)
{
     runOnUiThread(new Runnable() {
         public void run() {
             downloadResult = result;
             TextView view = (TextView)findViewById(R.id.textWebResult);
             view.setText("Ready");
             isSyncing = false;
         }    
     }); 
} 
```

# java - JAX-WS 在不同的 URL 中有 XSD 模式

> ID：16030574
> 
> 赞同：6
> 
> 时间：2013-04-16T06:52:24.580
> 
> 标签：java, web-services, xsd, wsdl, jax-ws

我使用 JAX-WS 创建了一个小型 Web 服务。WSDL 文件具有这样的 TYPES 元素。

```
<types>
  <xsd:schema>
  <xsd:import namespace="http://ws.poc.mawia/" schemaLocation="http://localhost:777/ws/hello?xsd=1"/>
  </xsd:schema>
</types> 
```

Web 服务的 URL 是`http://localhost:777/ws/hello?wsdl`，XSD 是`http://localhost:777/ws/hello?xsd=1`. 不同位置的 XSD Schema 文件具有这样的数据类型定义。

```
...
 ...
    <xs:complexType name="student">
     <xs:sequence>
     <xs:element name="name" type="xs:string" minOccurs="0"/>
     <xs:element name="rollNo" type="xs:int"/>
     </xs:sequence>
    </xs:complexType>
  ...
 ... 
```

我见过的大多数 WSDL 文件通常在 WSDL 文件本身内都有完整的 XSD 定义，但 JAX-WS 将它放在不同的位置。

这是应该的吗？如何配置 JAX-WS 以将所有 XSD 定义放在一个 WSDL 文件中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T08:56:56.133

> 这是应该的吗？

将 XSD 与 WSDL 分离是 JAX-WS 中的默认行为，您不必太担心它。最新的 WS 框架（包括 WCF）通常能够处理这个问题。根据 XSD 的大小，导入它可能会使 WSDL 对人类来说更具可读性。对于小型 Web 服务，嵌入模式当然更容易，但导入它也不是什么大问题。

> 如何配置 JAX-WS 以将所有 XSD 定义放在一个 WSDL 文件中？

我不知道使运行时将模式嵌入 WSDL 的直接方法，但是有一种解决方法可以实现此目的：

1.  发布您的端点并保存 WSDL 和 XSD
2.  手动将 XSD 的内容复制到`types`WSDL 部分并替换那里的模式导入
3.  将合并的 WSDL 文件保存在您的应用程序可以将其作为资源访问的位置
4.  让您的 Web 服务加载合并的 WSDL。这将停止动态生成，但是，您必须在每次更改界面时手动更新 WSDL

您可以通过自定义`@WebService`注释来实现 4.。这可能看起来像这样：

```
@WebService( wsdlLocation = "MyWebService.wsdl")
public class MyWebService { .... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:59:48.593

你的方法没有任何问题。使用 URL 指向另一个 wsdl 的 WSDL 很好。

如果您不想要它，请使用 @WebService 注释的 wsdlLocation 属性提及 wsdl 位置。但是再次使用这种方法，您将不得不手动修改 wsdl。

# javascript - 在 Chrome 中配置 JavaScript？

> ID：16030575
> 
> 赞同：2
> 
> 时间：2013-04-16T06:52:33.297
> 
> 标签：javascript, jquery, performance, google-chrome, profiling

很抱歉问这个问题。我是我办公室里第一个尝试这样做的人`profile java script`。所以对我没有指导。

该问题可能已经存在于堆栈溢出中。但是这些答案并不让我满意。这就是我创建一个新线程的原因。

谁能告诉我`how to profile the Java Script in my java application in chrome`。

我发现了如何分析的链接`Java Script`。但这对我来说还不清楚`start up`。链接是，

[http://coding.smashingmagazine.com/2012/06/12/javascript-profiling-chrome-developer-tools/](http://coding.smashingmagazine.com/2012/06/12/javascript-profiling-chrome-developer-tools/)和[https://developers.google.com/chrome-developer-tools/](https://developers.google.com/chrome-developer-tools/)

任何人都可以建议我一个好的`tutorial`或`blog`更好的启动，或者你可以`your own way to profile Java Script`用 chrome 说。

好的答案绝对值得赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:58:11.640

令人惊讶的是，我测试了一些分析工具，我发现**IE 分析器**（在内置开发工具中）是最好的开始。它很容易，相当可靠。好处是 IE 引擎比 Chrome 慢很多，因此更容易查明缓慢和繁重的代码（因为您将有几秒钟而不是几毫秒的执行时间）。

如果您想要更多的硬核，那么我会建议[**Ajax DynaTrace**](http://www.compuware.com/application-performance-management/ajax-performance-testing.html) 它是功能齐全的软件（虽然不是免费的）。在我看来，Chrome 分析器很奇怪，虽然很多人可能成功使用它，但我从来没有从中得到任何令人满意的信息。

要启用 IE Profiler：

1.  打开IE浏览器。
2.  按 F12（显示开发者工具）
3.  转到*Profiler 选项卡*。
4.  点击*开始分析器*（我的浏览器是波兰语，但它会说类似的话）。
5.  在你的页面上做一些事情。
6.  点击*停止分析器*。

现在您可以将结果显示为所有*函数*或*执行树*

树是您想要使用的很酷的东西，因为它会向您显示所有单独的（在上下文中）执行堆栈（比如让我们说一个 REST 调用）。现在您可以展开树并一直深入查看该堆栈上的哪些函数占用的时间最多。

请注意，像 .apply 之类的某些功能（本机）无法扩展以查看内部内容（分析器会告诉您）。

函数视图将只显示探查器找到的所有函数、它们的执行时间和计数（这样您就可以知道哪个函数被调用的时间最长以及它所花费的总时间）。

# javascript - document.querySelectorAll('a:visited') 不起作用

> ID：16030576
> 
> 赞同：5
> 
> 时间：2013-04-16T06:52:38.430
> 
> 标签：javascript, css, google-chrome, css-selectors, selectors-api

`document.querySelectorAll('a:visited')`总是返回空的 NodeList，即使 DOM 有一些访问过的链接。

我已经在 Chrome 中尝试过。是否有任何已知的错误或预期的行为？

如果我在样式表中使用它而不是 querySelectorAll，虽然`:visited`效果很好。

```
a:visited{
    color:yellow;
} 
```

我认为伪类可以作为`querySelectorAll()`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T07:00:01.523

我找不到任何专门针对 Chrome 引用此行为的来源，但通常会这样做以防止页面上的代码能够访问用户历史记录，这是一个隐私问题。

Selectors API 有[一个](http://www.w3.org/TR/selectors-api/#privacy)专门讨论这个问题的部分。这是一个相关的小片段：

> 历史盗窃是一个潜在的隐私问题，因为`:visited`选择器中的伪类允许作者查询哪些链接被访问过。
> ...
> 正如选择器...中定义的那样，**用户代理可以将所有链接视为未访问的链接**。

# html - 边框半径未出现在 CSS 中

> ID：16030577
> 
> 赞同：-4
> 
> 时间：2013-04-16T06:52:43.240
> 
> 标签：html, css, stylesheet

我有一个 CSS 文件，其中声明了一个表格，我想添加弯曲的边缘。如果我尝试边界半径，它根本不会出现。这是代码

```
table.display {
    margin: 0 auto;
    clear: both;
    width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T06:57:40.410

试试这个 CSS

```
table.display {
    margin: 0 auto;
    clear: both;
    width: 100%;
    border :1px solid #000;
    border-radius :5px;
    -moz-border-radius :5px; 
    -o-border-radius :5px;
    -webkit-border-radius :5px;
} 
```

这是jsfiddle [LINK](http://jsfiddle.net/ZsC7T/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T06:55:36.400

应该有边框颜色或背景颜色来应用半径

**HTML**

```
<table class="display">
    <tr>
        <td>table</td>
    </tr>
    </table> 
```

**CSS**

```
table.display {
    margin: 0 auto;
    clear: both;
    width: 100%;;
    color:white;
    background:green;
    border-radius:6px
} 
```

**[演示](http://jsfiddle.net/Cup5Y/17/)**

# java - 子类化 java.util.logging.Formatter 不起作用

> ID：16030578
> 
> 赞同：4
> 
> 时间：2013-04-16T06:52:45.607
> 
> 标签：java, logging

我正在使用`java.util.logging`日志记录（我不想使用 log4j 或其他任何东西）。

这是我完整的私人 logging.properties：

```
handlers= java.util.logging.FileHandler
.level= INFO
java.util.logging.FileHandler.pattern = my.log
java.util.logging.FileHandler.limit = 500000
java.util.logging.FileHandler.count = 40
java.util.logging.FileHandler.formatter = java.util.logging.SimpleFormatter 
```

这是我程序中的代码：

```
public static Logger log = Logger.getLogger(MyClass.class.getName());
// Is there anything else to be init'ed here? 
// I don't. I just start using log directly in the code.

log.severe("something");
log.info("something else"); 
```

因为这在 2 行上给出了每条日志消息，所以我尝试了这个

[如何让 java 日志输出显示在一行上？](https://stackoverflow.com/questions/194765/how-do-i-get-java-logging-output-to-appear-on-a-single-line)

准确地复制了第一个回复中的 LogFormatter 类。

在我的 logging.properties 中更改了一行

```
java.util.logging.FileHandler.formatter = com.mycomp.myproj.LogFormatter; 
```

现在我的日志已经开始出现在 XML 中。我有一种强烈的感觉，`FileHandler`不喜欢我的`com.mycomp.myproj.LogFormatter`，因此默认为 default `XMLFormatter`。我如何弄清楚为什么`FileHandler`不使用我的 LogFormatter 类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T14:37:34.040

> How do I figure out why FileHandler isn't using my LogFormatter class?

Start the program in a debugger and step through the code. Set a breakpoint in `LogManager.getLogger()` and/or `LogManager.readConfiguration()`

Or forget about `java.util.logging` and use a framework like [logback](http://logback.qos.ch/) that is easy to configure and gives you useful error messages when something is wrong.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T23:41:26.613

您可以在 FileHandler 实例上的代码本身中设置格式化程序。

```
import java.util.logging.FileHandler;
import java.util.logging.Level;
import java.util.logging.Logger;

// please change name of your own choice
Logger log = Logger.getLogger("CustomLogger"); 
log.setUseParentHandlers(false);
log.setLevel(Level.ALL);

FileHandler handler = new FileHandler("[log_file_location]");
handler.setFormatter(new CustomFormatter()); // set formatter
log.addHandler(handler);

log.info("test message");

handler.close(); // close the handler at some later point in your application. 
```

CustomFormatter 类定义如下。

```
import java.util.logging.Formatter;
import java.util.logging.LogRecord;

public class CustomFormatter extends Formatter {

    @Override
    public String format(LogRecord record) {
        StringBuffer buffer = new StringBuffer();
        buffer.append(record.getMessage());
        return buffer.toString();
    }

} 
```

您可以在 CustomFormatter 中编码，以您想要的任何格式输出消息。希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-27T13:18:20.913

好吧，这也让我很生气，让我发疯，我不停地检查拼写，做谷歌搜索等——这就是我到这里的方式——我知道这已经一岁了，但你会踢自己。我很确定这是您的答案。

为了 ：

```
java.util.logging.FileHandler.formatter = com.mycomp.myproj.LogFormatter; 
```

那应该是：

```
java.util.logging.FileHandler.formatter = com.mycomp.myproj.LogFormatter 
```

删除训练“;”。它似乎需要与我看到其他人抱怨他们有尾随空格字符的类名***完全匹配——这就是我的问题所在。***更好的错误消息会有所帮助。

干杯 - 马克

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-31T13:53:47.367

com.mycomp.myproj.LogFormatter 不在您的系统类路径中。

LogManager 将执行以下调用来加载您的类：

```
Formatter getFormatterProperty(String name, Formatter defaultValue) {
        String val = getProperty(name);
        try {
            if (val != null) {
                Class<?> clz = ClassLoader.getSystemClassLoader().loadClass(val);
                return (Formatter) clz.newInstance();
            }
        } catch (Exception ex) {
            // We got one of a variety of exceptions in creating the
            // class or creating an instance.
            // Drop through.
        }
        // We got an exception.  Return the defaultValue.
        return defaultValue;
} 
```

您需要确保您的类 LogFormatter 在系统的类路径中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-13T09:49:56.747

我发现除非您通过配置设置格式，否则它不会应用格式化程序。我在 JDK 11 上对此进行了测试。

```
handlers= java.util.logging.FileHandler
.level= INFO
java.util.logging.FileHandler.pattern = my.log
java.util.logging.FileHandler.limit = 500000
java.util.logging.FileHandler.count = 40
java.util.logging.FileHandler.formatter = com.mycomp.myproj.LogFormatter
com.mycomp.myproj.LogFormatter.format = %n 
```

即添加最后一行`com.mycomp.myproj.LogFormatter.format = %n`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-18T12:32:07.953

可能这在这一点上无关紧要，但最近我发现了一个问题，格式中的***$***给我带来了问题，它无法解析并回退到默认格式。本来我有

```
[%1$tF %1$tT] [%4$-7s] %5$s %n 
```

在***logging.properties***文件中没有按预期工作，但是

```
[%1\$tF %1\$tT] [%4\$-7s] %5\$s %n 
```

这与`\$`. 将来可能会对其他人有所帮助。

# dart - 如何在 Dart 中异步读取文件？

> ID：16030581
> 
> 赞同：1
> 
> 时间：2013-04-16T06:52:54.053
> 
> 标签：dart

上面的问题是在 Dart Google+ 社区提出的，并没有给出明确的答案，所以我想我会在这里重复这个问题，因为，我真的很想知道。这是 Dart 社区的帖子：

[https://plus.google.com/u/0/103493864228790779294/posts/U7VTyX5h7HR](https://plus.google.com/u/0/103493864228790779294/posts/U7VTyX5h7HR)

那么，无论有无错误处理，正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:02:25.283

您链接到的问题是关于异步读取多个文件的内容，这是一个更难的问题。我认为弗洛里安的解决方案没有问题。简化它，这似乎成功地异步读取了一个文件：

```
import 'dart:async';
import 'dart:io';

void main() {
  new File('/home/darshan/so/asyncRead.dart')
    .readAsString()
    ..catchError((e) => print(e))
    .then(print);

  print("Reading asynchronously...");
} 
```

这输出：

```
异步读取...
导入“飞镖：异步”；
导入“飞镖：io”；

无效的主要（）{
  新文件（'/home/darshan/so/asyncRead.dart'）
    .readAsString()
    ..catchError((e) => print(e))
    .then（打印）；

  print("异步读取...");
}

```

作为记录，这是 Florian Loitsch 对初始问题的（稍作修改）解决方案：

```
import 'dart:async';
import 'dart:io';

void main() {
  new Directory('/home/darshan/so/j')
    .list()
    .map((f) => f.readAsString()..catchError((e) => print(e)))
    .toList()
    .then(Future.wait)
    .then(print);

  print("Reading asynchronously...");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T15:09:04.623

Florian 解决方案的一个缺点（或没有）是它并行读取所有文件，并且仅在读取所有内容后才处理内容。在某些情况下，您可能希望一个接一个地读取文件，并在读取下一个文件之前处理一个文件的内容。

为此，您必须将期货链接在一起，以便下一个 readAsString 仅在前一个完成后运行。

```
Future readFilesSequentially(Stream<File> files, doWork(String)) {
  return files.fold(
      new Future.immediate(null), 
      (chain, file) =>
        chain.then((_) => file.readAsString())
             .then((text) => doWork(text)));
} 
```

对文本所做的工作甚至可以是异步的，并返回一个 Future。

如果流返回文件 A、B 和 C，然后完成，则程序将：

```
run readAsString on A
run doWork on the result
when doWork finishes (or the future it returns completes) run readAsString on B
run doWork on the result
when doWork finishes (or the future it returns completes) run readAsString on C
run doWork on the result
when doWork finishes, complete the future returned by processFilesSequentially. 
```

我们需要使用折叠而不是监听，以便我们获得一个在流完成时完成的 Future，而不是让 onDone 处理程序运行。

# objective-c - 为什么我在 NSCollectionViewItem'view 中的 NSImageView 为零？

> ID：16030585
> 
> 赞同：1
> 
> 时间：2013-04-16T06:53:04.693
> 
> 标签：objective-c, macos, nscollectionview, nscollectionviewitem

在 IB 中，我创建了一个`NSCollectionView`和它的`NSCollectionViewItem`和`NSView`属于的一个。`NSCollectionViewItem`我`NSCollectionItem`由一个`NSImageView`和一个组成`NSTextField`。我使用可可绑定设置它们的值。我想更改选择`NSImageView`时的边框颜色。我`NSCollectionItem`为所有这些创建自己的类和在 IB 中设置他们的自定义类。在`NSCollectionViewItem`类中我重写了它的 `setSelected:(BOOL)flag`功能。代码是

```
 - (void)setSelected:(BOOL)flag
{
   [super setSelected:flag];

   [[self view] setSelected:flag];
   [[self view] setNeedsDisplay:YES];
} 
```

我想在`NSView`调用它的绘图函数时更改边框颜色。在`NSView`我创建的类`IBOutlets`中`NSImageView`，`NSTextField`将它们与 IB 连接起来。但是当调用绘图函数时，我使用代码

```
if(selected){
    NSLog(@"self.imageView = %@",self.imageView);
} 
```

结果为nil。为什么我无法获取所选NSCollectionViewItem 的imageView？我在哪里犯了错误？帮帮我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:25:01.897

`NSCollectionViewItem`是的子类。`NSViewController`所以，在 ib 中，我将 的`NSImageView` 与`NSView`的imageView 连接起来`NSCollectionViewItem`，并将 NSImageView 的类设置为我自己的类，它是 的子类`NSImageView`。在 的绘制函数中`NSImageView`，结果`NSLog`不是 nil，我可以画一些我自己。

# ruby-on-rails - 如何解决此错误：_.mixin({ (s3_multipart upload gem)

> ID：16030588
> 
> 赞同：0
> 
> 时间：2013-04-16T06:53:17.703
> 
> 标签：ruby-on-rails

我正在使用[http://rubygems.org/gems/s3_multipart](http://rubygems.org/gems/s3_multipart)上传多个上传，但加载页面时出现错误。像这样

![错误jacascript](https://i.stack.imgur.com/byFdO.png)

[https://github.com/maxgillett/s3_multipart/issues/6](https://github.com/maxgillett/s3_multipart/issues/6)

那么，有谁知道如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T00:57:39.240

通常，`_.function()`语法来自' [underscore.js](http://underscorejs.org/) '。

你需要'underscore.js'库吗？'s3_multipart' gem 要求您将以下内容添加到您的 'application.js' 文件中（假设您使用的是 'jquery-rails' 和 'underscore-rails' gems）：

**应用程序/资产/javascripts/application.js**

```
//= require underscore
//= require jquery
//= require s3_multipart/lib 
```

这是 Github 上 s3_multipart README.md 中的一行，他在其中谈到了下划线依赖项（[https://github.com/maxgillett/s3_multipart](https://github.com/maxgillett/s3_multipart)）：

> 如果您使用的是 sprocket，请将以下内容添加到您的 application.js 文件中。确保在此行之前需要最新的下划线和 jQuery 库。目前不支持 Lodash。

# java - Android - 节省用户操作步骤

> ID：16030589
> 
> 赞同：0
> 
> 时间：2013-04-16T06:53:18.290
> 
> 标签：java, android, design-patterns, refactoring

在我的应用程序中，有一些用户操作具有严格的步骤。例如

1 - 输入您的姓名和姓氏

2 - 输入您的信用卡号

3 - 输入您的地址

.

.

我们将步骤保存到本地数据库中，以便用户以后可以继续。因为用户可以随时取消它。

我想知道我可以在这个脚本中使用哪种模式。

（我在问软件架构）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:59:16.810

只是一个建议。如果可能，请使用[Preferences](http://developer.android.com/reference/android/preference/Preference.html)作为用户输入。这将自动保留最后一个状态。这样您就不需要在每一步都存储在数据库中。然后仅在最后一步保存数据。

另一个个人意见是，您不应该在最后一步之前保留信用卡信息等重要数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:01:16.473

不确定您正在寻找什么样的模式。

如果您希望用户完成这些步骤，最好的 UI 设计可能是 Roman Nurik 所描述的向导：https: [//plus.google.com/+RomanNurik/posts/6cVymZvn3f4](https://plus.google.com/+RomanNurik/posts/6cVymZvn3f4)

# javascript - 使用构造函数模式和插件原型时如何在jquery中触发函数？

> ID：16030599
> 
> 赞同：0
> 
> 时间：2013-04-16T06:53:43.103
> 
> 标签：javascript, jquery, jquery-plugins, jquery-events

问题如下（批评者赞赏）：我正在编写一个 jquery 插件，如下面的示例代码所示：

```
;(function($, document, window, undefined) {
    $.fn.myPlugin = function(params) {
        return this.each(function() {
            $(this).data('my', new MyPlugin(params));
        }
    }

    function MyPlugin(params) {
        // do something
    }

    MyPlugin.prototype = {
        init: function() { ... },
        update: function() { ... }
    }

})(jQuery, document, window); 
```

现在我想**在 MyPlugin 的原型中调用更新函数**，比如在 $(window).onresize 上。如果可能，请有人解释（也欢迎解决方法）。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:15:23.107

不需要使用原型方法。[如用于编写 JQuery 插件](http://docs.jquery.com/Plugins/Authoring)的文档中所述，您返回插件对象的实例。假设您的插件对象是自定义的，则不需要使用原型方法。

话虽如此，当您初始化插件时可以访问您的更新功能，您可以在其中绑定到窗口调整大小事件（假设您希望插件在窗口调整大小时始终更新）：

```
$(window).resize(function(){
  //if not a local function, then you can use $this.update()
   update();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T22:32:19.880

data jquery 保存创建的对象，因此您可以使用它来调用这样的原型函数

```
$(window).resize(function(){
 $('element_selector_here').data('my').update();
} 
```

# c# - sqlite无法打开数据库文件是加密还是不是数据库？

> ID：16030601
> 
> 赞同：17
> 
> 时间：2013-04-16T06:53:49.573
> 
> 标签：c#, winforms, visual-studio-2010, sqlite

我正在使用 sqlite 数据库开发 Windows 应用程序 .net 2.0，我的连接字符串保留在 app.config 中，例如

```
<connectionStrings>
<add name="SQLiteDB" 
     connectionString="Data Source=|DataDirectory|database.s3db;version=3;password=mypassword;" 
     providerName="System.Data.Sqlite"/>
</connectionStrings> 
```

在连接字符串中，如果我删除此密码，我将密码定义为“mypassword”，一切正常，但是当我使用密码子句时，它在 connection.open() 语法中出现错误

```
File opened that is not a database file
file is encrypted or is not a database 
```

我在网上搜索并发现了一些版本问题，但我只使用版本 3，正如我在连接字符串中所述，我也尝试删除“版本 = 3”，但问题仍然存在。

我是第一次这样做，有什么解决办法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-16T07:41:18.283

当您在连接字符串中指定密码并且数据库已经存在时，SQLite 假定数据库已加密并尝试使用所述密码对其进行解密。如果您尚未在数据库上设置密码，这将导致“文件已加密”错误，因为提供的密码不能用于解密未加密的数据库。

您可以删除数据库，SQLite 将使用连接字符串中的密码创建一个新的加密数据库。或者，您可以使用以下`ChangePassword()`方法加密现有数据库：

```
// Opens an unencrypted database    
SQLiteConnection cnn = new SQLiteConnection("Data Source=c:\\test.db3");    
cnn.Open();    

// Encrypts the database. The connection remains valid and usable afterwards.    
cnn.ChangePassword("mypassword"); 
```

参考：[加密、解密和附加到加密数据库](http://sqlite.phxsoftware.com/forums/t/130.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-03T21:45:11.063

2Toad 的回答大部分是正确的，但我想添加自己的答案，因为需要进行一些澄清。正如 2Toad 所说，这是正确的：

> 当您在连接字符串中指定密码并且数据库已经存在时，SQLite 假定数据库已加密并尝试使用所述密码对其进行解密。如果您尚未在数据库上设置密码，这将导致“文件已加密”错误，因为提供的密码不能用于解密未加密的数据库。

`conn.SetPassword("something")`但是，如果您在连接字符串中已有另一个之后尝试使用，也会发生此错误。或者，如果您这样做`conn.ChangePassword("somethingelse")`，但仍然`Password=something`在连接字符串中。

有几种情况需要考虑：

1.  数据库已应用密码，并且在连接字符串中。
2.  您在连接字符串中有密码，但数据库没有应用密码，或者字符串中的密码与数据库不匹配。
3.  数据库从未有过密码，而您想更改它。
4.  数据库有密码，您想更改它。

**决议：**

1.  所以 2Toad 提供的执行代码`conn.ChangePassword("somethingelse")`只有一半正确，并且没有考虑到你在哪里，你还做了什么，以及你将来想做什么。如果您有一个现有的密码并且想要更改它，这是正确的，但您还必须确保之后更新连接字符串，否则后续连接将失败并出现`file is encrypted`错误。

2.  如果您使用空白密码`conn.SetPassword("")`然后尝试在没有连接字符串`conn.ChangePassword("somethingelse")`的情况下先连接到数据库，则会发生这种情况。`Password=something`这`Password=something`必须从连接字符串中删除，因为密码已从数据库中以编程方式删除，并且数据库将尝试与之连接。如果它没有在以编程方式从数据库中删除的同时从连接字符串中删除，您将收到相同的`file is encrypted`错误。

3.  因为我一开始`conn.SetPassword("something")`就在没有应用密码的时候做了 a （我相信这是这样做的方法），所以如果不创建另一个 SQLite DB，我无法验证以下内容，但我不相信你`conn.ChangePassword("something")`如果您一开始就没有密码，可以打电话。您应该`conn.SetPassword("something")`为初始设置做，然后放入`Password=something`您的连接字符串。

4.  我更改密码的方式是我在完成并从连接字符串中清除`conn.ChangePassword("somethingelse")`之后才这样做的：`conn.SetPassword("")``Password=something`

    ```
    // Changes an encrypted database to unencrypted and removes password
    string connString = "Data Source=c:\\test.db3;Password=something";    
    SQLiteConnection conn = new SQLiteConnection(connString);
    conn.SetPassword("");
    //conn.Open();    // doesn't work because connString hasn't been updated

    // Update connString
    connString = "Data Source=c:\\test.db3;";    
    conn = new SQLiteConnection(connString);
    conn.Open();  // we've opened the DB without a password

    // Re-encrypts the database. The connection remains valid and usable afterwards until closed - then the connection string needs updating.    
    conn.ChangePassword("somethingelse");
    conn.Close();

    // Update connString
    connString = "Data Source=c:\\test.db3;Password=somethingelse";   
    conn = new SQLiteConnection(connString); // must re-instantiate!
    conn.Open();  // we've opened the DB with our new password 
    ```

这很好。我想您也不能从连接字符串中清除它，只需执行`conn.ChangePassword("somethingelse")`，然后添加`Password=somethingelse`到您的字符串中，然后：

```
 // Opens an encrypted database   
    string connString = "Data Source=c:\\test.db3;Password=something";    
    SQLiteConnection conn = new SQLiteConnection(connString);
    conn.Open();    

    // Encrypts the database. The connection remains valid and usable afterwards until closed - then the connection string needs updating.    
    conn.ChangePassword("somethingelse");
    conn.Close();

    // Update connString
    connString = "Data Source=c:\\test.db3;Password=somethingelse";   
    conn = new SQLiteConnection(connString);
    conn.Open();     // we've opened the DB with our new password 
```

就个人而言，我将密码以加密形式存储在应用程序（Web）.config 文件中，并将其调用到我的应用程序 onload 中的变量中，并从中动态构建我的连接字符串。

据我所知，如果您删除 SQLite DB 并尝试调用它，您只会收到一个错误 - 不是使用连接字符串中的新密码重新创建的 SQLite DB - 至少在使用和调用它时从 C# .NET 应用程序。

**更新**如果您需要一个在您已经拥有密码后用于更新密码的功能，您不想拥有`.SetPassword()`, 但是`.ChangePassword()`. 我发现最好总是把它清空，然后改变它，就像我在#4中的第一个例子一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-22T21:22:56.203

检查 SQLite 的版本。有些数据库只能通过 sqlite3 打开。

# c# - 是否可以将字符串转换为定义为正则表达式模式的自定义格式？

> ID：16030608
> 
> 赞同：0
> 
> 时间：2013-04-16T06:54:30.043
> 
> 标签：c#, regex, string-formatting

使用正则表达式仅匹配不转换的字符串，所以也许问题会很愚蠢，但无论如何：

假设我有一个电话号码：`+7771234567` 我有一个正则表达式模式： `^[+][0-9]\d{2}-\d{3}-\d{4}$` 如何使电话号码看起来像：`+777-123-4567`？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:00:10.523

假设您的字符串**始终**是一个`+`符号后跟 10 位数字，您可以使用如下内容：

```
String str = @"+7771234567";
            System.Console.WriteLine(new Regex(@"^([+])(\d{3})(\d{3})(\d{4})$").Replace(str, "$1$2-$3-$4")); 
```

将产生：

> +777-123-4567

我正在做的是将您的数字组捕获到正则表达式组中，然后通过`$`操作员访问它们。

# .net - 在.Net中运行时加载dll并创建一个类

> ID：16030610
> 
> 赞同：0
> 
> 时间：2013-04-16T06:54:31.987
> 
> 标签：.net, c#-4.0

我想在运行时从另一个应用程序加载一个 dll，但同时，我需要创建一个在 dll 中实现的类的实例。能做到吗？我可以在运行时加载 dll，并且有一些示例，但是我如何在没有加载 dll 的情况下调用一个类？不会编译，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:03:33.213

它会编译。最简单的方法是与您的应用程序和加载的 dll 具有通用接口。您可以在此处找到热执行此操作：[C# - 加载程序集、查找类和调用 Run() 方法的正确方法](https://stackoverflow.com/questions/1137781/c-sharp-correct-way-to-load-assembly-find-class-and-call-run-method)。

但是如果你没有通用接口仍然可以`CreateInstance`，然后找到你需要的所有方法（下面的例子是所有方法）：

```
MethodInfo[] methodInfos = Type.GetType(selectedObjcClass) .GetMethods(BindingFlags.Public | BindingFlags.Instance); 
```

然后像这样调用选定的一个`Invoke`：

```
method.Invoke(selectedObjcClass, params...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:03:56.730

您可以在运行时加载 dll。

像这样：

```
//load assembly
var ass = Assembly.LoadFile("ADll.dll");

//get types from assemblt
var typesInAssembly = ass.GetTypes();

var type = typesInAssembly.First(/*select one*/);

//create instance
var object = Activator.CreateInstance(type, new object [] { "arguments" }); 
```

# c++ - c ++分段错误（核心转储）

> ID：16030614
> 
> 赞同：-1
> 
> 时间：2013-04-16T06:54:57.620
> 
> 标签：c++, error-handling

我真的没有看到分段错误发生在哪里。下面是我的代码。

```
#include <iostream>
#include <stdlib.h>
#include <string>
#include <fstream>
#include <list>
#include <iomanip>
#include <stdexcept>
using namespace std;

class isbn
{
    private:
        string *code;
        int digit;
        isbn *current, *next;

    public:

    //constructor
    isbn(): code(NULL), digit(0) { }

    //copy constructor
    isbn(const isbn &other):
        code(new string[other.digit]),
        digit(other.digit)
        {
        for(int i=0; i < digit; i++)    
            code[i] = other.code[i];
        }
    //destructor
    ~isbn()
    {
        if(digit>0) delete [] code;
    }
    //set up the private values 
    void setCode(char *temp, int num);
    void setDigit(const int &num);

    //return the value of the pointer character 
    const string &getCode(int num) const;
    const unsigned int getDigit() const;

    //assignment operator
    isbn operator = (const isbn &other)
    {
        code = new string[other.digit];
        digit = other.digit;
        for(int i=0; i < digit; i++)    
            code[i] = other.code[i];
        return *this;
    }
    //equal operator for a digit
    bool operator == (const isbn &other) const
    {
        return code == other.code;
    }

};

const string& isbn::getCode(int num) const
{
    return code[num];
}
const unsigned int isbn::getDigit() const
{
    return digit;
}
void isbn::setCode(char *temp, int num) 
{
    if (num<0 || num >= digit)
    {
        throw out_of_range("error occurred from setCode");
    }
    code[num] = temp;
}
void isbn::setDigit(const int &num)
{
    digit = num;
}

void extIsbn_in_file(list<isbn> &isbns, const string &filename)
{
    ifstream filein;
    filein.clear();
    filein.open(filename.c_str());
    if(!filein)
    {
        cout << "Unable to open file to read \n";
        exit(0);
    }
    cout << "\n file : " << filename << "\n";
    cout << "\n";

    char *contents;
    isbn aisbn;
    list<isbn>::iterator isbnitr;
    isbnitr = isbns.begin();
    int count = 0;

    while(!filein.eof())
    {
        filein.getline(contents, '\n');
        cout << contents << '\n';
        aisbn.setCode(contents, count);
        aisbn.setDigit(count);
        isbns.push_back(aisbn);
        count++;
    }
    filein.close();
}

int main(int argc, char *argv[])
{
    if(argc > 0)
    {
        if(argc != 2)
        {
            cout << "Error: the num of arguments should be 2";
            exit(0);
        }
    list<isbn> code;
    extIsbn_in_file(code, argv[1]);
    }
    else
    {
        cout << "invalid number of argument!! \n";
        exit(0);
    }
    return 0;
} 
```

只需猜测下面的代码拖动分段错误错误。并且不确定我设置的构造函数是否正确。如果错了，我该如何解决？

```
 while(!filein.eof())
    {
        filein.getline(contents, '\n');
        cout << contents << '\n';
        aisbn.setCode(contents, count);
        aisbn.setDigit(count);
        isbns.push_back(aisbn);
        count++;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:19:48.963

您需要初始化 char *contents; 到堆上分配的一些内存。或使用 std:: 字符串。谢谢@Jaochim

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:01:46.080

提示：`filein.getline(contents, '\n');`不做你期望它做的事情。我不是故意给出完整的解决方案，它不会帮助你学习，而是阅读：[http ://www.cplusplus.com/reference/istream/istream/getline/](http://www.cplusplus.com/reference/istream/istream/getline/)

# jquery - 选择特定选择值时显示隐藏输入

> ID：16030618
> 
> 赞同：1
> 
> 时间：2013-04-16T06:55:21.573
> 
> 标签：jquery, html, forms, select, paypal

我正在制作一个自定义表单，以使用隐藏的 HTML 变量向 PayPal 发送信息。这比 PayPal 更像是一个 jQuery 问题。我有一个下拉菜单，我希望仅在为菜单`<select>`选择某个值时才显示隐藏的输入。`<select>`例如：

```
<form class="test_form">
    <select class="test_select">
        <option value="test1">Test 1</option>
        <option value="test2">Test 2</option>
    </select>
    <input type="submit" value="submit" />
</form> 
```

比方说，如果我选择“test2”，我希望隐藏的输入出现在表单中。这是我使用的代码，但它似乎不起作用：

```
<script>
$('.test_form').change(function(){
if ($(".test_select").val() == 'test2'){
     $("#test_form").html("<input type="hidden" name="weight" value="0.22" />");
}
});
</script> 
```

当我选择某个值时，我该怎么做才能让它出现在我的代码中？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:06:57.030

看看这个[FIDDLE](http://jsfiddle.net/rajesh007/apjtd/)，不要只是复制和使用，检查你的错误

```
$(function(){
    $('.test_select').change(function(){
        if ($(".test_select").val() == 'test2'){
            $(".test_form").append($('<input type="hidden" name="weight" value="0.22" />'));
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:03:36.500

最好的办法是将输入保留在 html 中，但将其隐藏。然后在您喜欢时使其淡入

```
<input type="text" style="display:none" id="hiddeninput">
....
....
<script>
function disp(){
    $('#hiddeninput').fadeIn(1000);
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:04:26.737

将您的代码更改为此

```
$('.test_select').change(function(){ 
    if ($(".test_select").val() == 'test2'){ 
        $('<input>').attr({
            type: 'hidden',
            value: '0.22',
            name: 'weight'
        }).appendTo('form');
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T07:11:40.137

将此添加到表单内的代码中

```
<div id="test2" class="tests" style="display: none;">
 <input type="text" name="yourname"/>
</div> 
```

将您的脚本更改为

```
$('.test_select').change(function() {
  $('.tests').slideUp("slow");
  $('#' + $(this).val()).slideDown("slow");
}); 
```

因此，如果您选择 test2 它将显示文本字段，否则它将隐藏文本字段

# python - 将matlab代码翻译成python（scipy）

> ID：16030620
> 
> 赞同：1
> 
> 时间：2013-04-16T06:55:23.390
> 
> 标签：python, matlab, scipy, sparse-matrix

我正在尝试将此 matlab 代码转换为 python：

```
T = length(z);
lambda = 10;
I = speye(T)
D2 = spdiags(ones(T-2,1)*[1 -2 1],[0:2],T-2,T);
z_stat = (I-inv(I + lambda^2*D2'*D2))*z; 
```

我现在得到的：

```
T = len(signal)
lam = 10;
I  = np.identity(T)
D2 = scipy.sparse.spdiags(np.ones((T-2,1),dtype=np.int)*[1,-2,1],(range(0,3)),T-2,T); 
```

目前我收到此错误

> "scipy.sparse.sp...ge(0,3)),T-2,T)" ValueError: 对角线数 (298) 与偏移数 (3) args 元组不匹配: ('对角线数(298) 与偏移数不匹配 (3)',)

查看文档时，matlab函数和python函数非常相似。尽管我可能遗漏了一些差异。我现在的问题是：我做错了什么？

**编辑**： z 是一个长度为 300 的数组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:41:35.530

如果您将过滤器数据转置为 spdiags，那么您会在两个包中得到相同维度的答案：

```
# numpy/scipy
filt = [1,-2,1]* np.ones((1,T-2),dtype=np.int).T
D2 = scipy.sparse.spdiags(data.T, (range(0,3)),T-2,T)
np.shape(D2)
>>> (298, 300)

% matlab check
D2 = spdiags(ones(T-2,1)*[1 -2 1],[0:2],T-2,T)
size(D2)
ans =
  298   300 
```

# windows - PDB 文件未加载

> ID：16030621
> 
> 赞同：2
> 
> 时间：2013-04-16T06:55:25.307
> 
> 标签：windows, debugging, add-on, pdb, dbghelp

我们的应用程序在嵌套目录中有一些 DLL 形式的附加组件。我们正在使用在后台运行的 DbgView 实例运行测试，通过该实例获取日志。问题是我们在与我们构建构建的计算机不同的计算机上运行测试。这会导致 PE 标头（通过 Dumpbin 工具提取）中的调试目录条目非常无效。

我们没有类似的符号服务器。然而，所有 PDB 文件都放置在调试版本中的二进制文件旁边，并具有正确的名称，因此我们希望可以毫无问题地找到它们。

加载项通过 LoadLibrary Windows 函数加载，然后使用 SymLoadModule64 函数加载符号表。根据返回值是正确的，但是当我们使用 SymGetModuleInfo64 检查实际加载的 PDB 时，它显示实际上什么都没有。这从导致我们深入修复应用程序的这一部分的原始问题也很明显，即上述调试日志中的调用堆栈，更准确地说是它们处理附加组件的部分被搞砸了。

尝试了各种版本的功能，并检查了 DbgHelp 库的版本，但无济于事。

从 VS 附加显示 VS 确实可以找到 PDB，而我们的符号加载机制和输出窗口中的日志仍然显示有问题的行为。VS 可以修复的只是混乱的调用堆栈。

DbgHelp 的符号加载使用应用程序的根目录初始化为“SymSearchPath”并启用了 DEFERRED_LOAD。后者我们需要删除，前者被设置为包含附加组件的目录。另一种解决方案是将 PDB 文件移至此根目录。

根据[MSDN 上 SymInitialize](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681351%28v=vs.85%29.aspx)的参考，递归搜索“SymSearchPath”以查找 PDB 文件，但实际上并非如此。另一件事是，每次我在网上浏览订单时，如何找到 PDB 文件的方法，它读取为第 1 或第 2 行，即从加载二进制文件的目录中搜索 PDB 文件，但作为我在上面已经解释过，这种情况也不会发生。

总而言之，虽然问题似乎解决了，但这里有很多令人困惑的事情。

所以..
1\. 如果有人知道加载 PDB 文件的正确方式，那将会很有启发性。.. ?
2\. DbgHelp 从根本上来说有问题吗？
3.为什么MSDN上说“SymSearchPath”没有递归搜索？

另外，如果您还有其他要添加的内容，也将受到欢迎。
感谢您阅读这么长的帖子。

# sql-server - 迁移后 SQL Server Reporting Services 非常慢

> ID：16030633
> 
> 赞同：3
> 
> 时间：2013-04-16T06:56:06.797
> 
> 标签：sql-server, ssrs-2008, reporting-services

**更新：对不起！由于旧的描述，我可能误导了你。迁移后问题不存在，迁移后 1 周开始出现**

我们最近将我们的数据库和报表服务器迁移到一个新的数据库服务器和一个新的报表服务器。

**之前的配置：**

*   数据库服务器：2008 Enterprise，DB01/NamedInstance
*   报表服务器：与数据库服务器相同的服务器，本机模式，数据库凭据为 NT AUTHORITY\NETWORK SERVICE

**现在的配置：**

*   数据库服务器：2012 Enterprise，DC01（默认实例，未命名实例）
*   Reporting Services：移至 RP01（本机模式），数据库凭据为 SQL Account(sa)

迁移遵循 MSDN 迁移说明并最终工作（尽管我们必须手动删除冗余的横向扩展部署服务器（与旧服务器同名）以使其工作，我认为这是 SSRS 错误）。

**迁移 1 周后**，报表开始在新报表服务器上运行极其缓慢。

于是我做了以下分析：

1.  在旧报表服务器（报表的数据库连接指向新数据库服务器）和新报表服务器中执行报表，旧报表服务器运行速度和以前一样快（1秒），但新报表服务器运行速度极慢（31第二）。

2.  直接执行报表调用的存储过程，和以前一样快（50毫秒）。

3.  诊断 [ReportServer$Instance].[dbo].[ExecutionLog] 数据库，TimeDataRetrival 在旧服务器中为 50 毫秒，但在新服务器中为 30050 毫秒。

4.  运行 SQL Server Profiler，在旧服务器上执行报告，一切正常。在新服务器上执行报告，引起了我的注意。在每批的最后一个事件之后，它会“挂起”（运行）很长时间，然后才会生成“审计注销”。下面的示例实际运行了 10 秒，但所有语句实际上运行了不到 1 秒。

5.  我怀疑：a）。某些配置（例如帐户访问权限）已在未经我确认的情况下更改。乙）。新的报表服务器正在尝试对没有适当访问权限的用户进行身份验证，并在替代解决方案之前“挂起”几秒钟。

**探查器输出的开始：**

* * *

审核登录——网络协议：TCP/IP 设置quoted_identifier on set arithabort off set numeric_roundabort off set ansi_warnings on set ansi_padding on set ansi_nulls on set concat_null_yields_null on set cursor_close_on_commit off set implicit_transactions off set language us_english set dateformat mdy set datefirst 7 set transaction isolation level读已提交

报告服务器 sa 1440 100 2013-04-16 16:10:14.393 0X2000002838F4010000000000

* * *

SQL:BatchStarting
声明 @BatchID 唯一标识符

```
 set @BatchID = NEWID()

                                        UPDATE [Event] WITH (TABLOCKX)
                                            SET [BatchID] = @BatchID,
                                            [ProcessStart] = GETUTCDATE(),
                                            [ProcessHeartbeat] = GETUTCDATE()
                                        FROM (
                                            SELECT TOP 8 [EventID] FROM [Event] WITH (TABLOCKX) WHERE [ProcessStart] is NULL ORDER BY [TimeEntered]
                                            ) AS t1
                                        WHERE [Event].[EventID] = t1.[EventID]

                                        select top 8
                                            E.[EventID],
                                            E.[EventType],
                                            E.[EventData]
                                        from
                                            [Event] E WITH (TABLOCKX)
                                        where
                                            [BatchID] = @BatchID
                                        ORDER BY [TimeEntered] 
```

报告服务器 sa 1440 100 2013-04-16 16:10:14.393

* * *

SQL:BatchCompleted
声明 @BatchID 唯一标识符

```
 set @BatchID = NEWID()

                                        UPDATE [Event] WITH (TABLOCKX)
                                            SET [BatchID] = @BatchID,
                                            [ProcessStart] = GETUTCDATE(),
                                            [ProcessHeartbeat] = GETUTCDATE()
                                        FROM (
                                            SELECT TOP 8 [EventID] FROM [Event] WITH (TABLOCKX) WHERE [ProcessStart] is NULL ORDER BY [TimeEntered]
                                            ) AS t1
                                        WHERE [Event].[EventID] = t1.[EventID]

                                        select top 8
                                            E.[EventID],
                                            E.[EventType],
                                            E.[EventData]
                                        from
                                            [Event] E WITH (TABLOCKX)
                                        where
                                            [BatchID] = @BatchID
                                        ORDER BY [TimeEntered]
                                            Report Server       sa  0   7   0   0   1440    100 2013-04-16 16:10:14.393 2013-04-16 16:10:14.393 
```

* * *

SQL:BatchStarting
声明 @BatchID 唯一标识符

```
 set @BatchID = newid()

                                UPDATE [Notifications] WITH (TABLOCKX)
                                    SET [BatchID] = @BatchID,
                                    [ProcessStart] = GETUTCDATE(),
                                    [ProcessHeartbeat] = GETUTCDATE()
                                FROM (
                                    SELECT TOP 8  [NotificationID] FROM [Notifications] WITH (TABLOCKX) WHERE ProcessStart is NULL and
                                    (ProcessAfter is NULL or ProcessAfter < GETUTCDATE()) ORDER BY [NotificationEntered]
                                ) AS t1
                                WHERE [Notifications].[NotificationID] = t1.[NotificationID]

                                select top 8
                                        -- Notification data
                                        N.[NotificationID],
                                        N.[SubscriptionID],
                                        N.[ActivationID],
                                        N.[ReportID],
                                        N.[SnapShotDate],
                                        N.[DeliveryExtension],
                                        N.[ExtensionSettings],
                                        N.[Locale],
                                        N.[Parameters],
                                        N.[SubscriptionLastRunTime],
                                        N.[ProcessStart],
                                        N.[NotificationEntered],
                                        N.[Attempt],
                                        N.[IsDataDriven],
                                        SUSER_SNAME(Owner.[Sid]),
                                        Owner.[UserName],
                                        -- Report Data
                                        O.[Path],
                                        N.[ReportZone],
                                        O.[Type],
                                        SD.NtSecDescPrimary,
                                        N.[Version],
                                        Owner.[AuthType]
                                    from 
                                        [Notifications] N with (TABLOCKX) inner join [Catalog] O on O.[ItemID] = N.[ReportID]
                                        inner join [Users] Owner on N.SubscriptionOwnerID = Owner.UserID
                                        left outer join [SecData] SD on O.[PolicyID] = SD.[PolicyID] AND SD.AuthType = Owner.AuthType
                                    where 
                                        N.[BatchID] = @BatchID
                                ORDER BY [NotificationEntered] 
```

报告服务器 sa 1440 100 2013-04-16 16:10:14.393

* * *

SQL:BatchCompleted
声明 @BatchID 唯一标识符

```
 set @BatchID = newid()

                                UPDATE [Notifications] WITH (TABLOCKX)
                                    SET [BatchID] = @BatchID,
                                    [ProcessStart] = GETUTCDATE(),
                                    [ProcessHeartbeat] = GETUTCDATE()
                                FROM (
                                    SELECT TOP 8  [NotificationID] FROM [Notifications] WITH (TABLOCKX) WHERE ProcessStart is NULL and
                                    (ProcessAfter is NULL or ProcessAfter < GETUTCDATE()) ORDER BY [NotificationEntered]
                                ) AS t1
                                WHERE [Notifications].[NotificationID] = t1.[NotificationID]

                                select top 8
                                        -- Notification data
                                        N.[NotificationID],
                                        N.[SubscriptionID],
                                        N.[ActivationID],
                                        N.[ReportID],
                                        N.[SnapShotDate],
                                        N.[DeliveryExtension],
                                        N.[ExtensionSettings],
                                        N.[Locale],
                                        N.[Parameters],
                                        N.[SubscriptionLastRunTime],
                                        N.[ProcessStart],
                                        N.[NotificationEntered],
                                        N.[Attempt],
                                        N.[IsDataDriven],
                                        SUSER_SNAME(Owner.[Sid]),
                                        Owner.[UserName],
                                        -- Report Data
                                        O.[Path],
                                        N.[ReportZone],
                                        O.[Type],
                                        SD.NtSecDescPrimary,
                                        N.[Version],
                                        Owner.[AuthType]
                                    from 
                                        [Notifications] N with (TABLOCKX) inner join [Catalog] O on O.[ItemID] = N.[ReportID]
                                        inner join [Users] Owner on N.SubscriptionOwnerID = Owner.UserID
                                        left outer join [SecData] SD on O.[PolicyID] = SD.[PolicyID] AND SD.AuthType = Owner.AuthType
                                    where 
                                        N.[BatchID] = @BatchID
                                ORDER BY [NotificationEntered] 
```

报表服务器 sa 0 7 0 0 1440 100 2013-04-16 16:10:14.393 2013-04-16 16:10:14.393

* * *

审核注销
报告服务器 sa 0 3836 6 10140 1440 100 2013-04-16 16:10:14.393 2013-04-16 16:10:24.533

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:49:31.710

好的，我想我想出了如何解决它。我修改了报告文件（.rdl）并上传到新的报告服务器以覆盖现有的，它运行速度如预期的那样快。

我怀疑是因为我们使用数据库备份/恢复将 SSRS 2008 迁移到 SSRS 2012，而 SSRS 2012 没有自动升级文件格式，这导致了问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T00:19:01.610

您是否从方程式中消除了参数嗅探？

> [快速查询在 SSRS 中运行缓慢](https://stackoverflow.com/questions/2283943/fast-query-runs-slow-in-ssrs)

尝试将匹配的假参数添加到存储过程中，然后在开始时为它们提供相应参数传入的值。看看报告是否以这种方式运行得更快。

# python - python中二进制文件的异或加密

> ID：16030637
> 
> 赞同：2
> 
> 时间：2013-04-16T06:56:24.520
> 
> 标签：python, python-2.7, binary, xor

我正在尝试在 python 中做一个简单的加密脚本。我只想对二进制文件使用 XOR 加密。我的脚本基本上看起来像：

```
def xor_c ( a ):
    v=''
    for p in a:
        v += chr((ord(p) ^ 0xA8))
    return v 
```

这样做的目的只是单独加密每个字节。这应该可行，但我所做的所有尝试都失败了。

我第一次尝试：

```
handler = open("file",'r')
handler2 = open("output",'w')
contents = handler.read()
handler2.write(xor_c(xor_c(contents))) 
```

但执行后这两个文件`file`又`output` 不同了。由于输入文件是二进制文件（我想要的），我已将脚本更改为：

```
handler = open("file",'rb')
handler2 = open("output",'wb')
contents = handler.read()
handler2.write(xor_c(xor_c(contents))) 
```

但这并没有改变任何东西。从它的样子来看，一些字节在输出中仅转换为一个字节（可能是因为字符不是 ascii，但这不应该在二进制模式下发生......）。此外，输出的最后一个字节是`0xA8`（逻辑上来自`\0`输入文件末尾的转换。考虑到这一点，我还将`xor_c` 函数更改为：

```
def xor_c ( a ):
    v=''
    for p in a:
        v += chr((ord(p) ^ 0xA8))
    return v[:-1]+'\0' 
```

确保最后一个字符始终是 a`\0`但这也不起作用。

有什么建议么 ？评论 ？提示 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:35:17.443

如果你只想做异或，你不需要`chr()`，`ord()`如果你使用`bytearray`.

实际上，您的功能将变成单线；

```
def xor_c(a):
    return bytearray([b^0xA8 for b in bytearray(a)]) 
```

它工作正常

```
In [4]: xor_c('Test')
Out[4]: bytearray(b'\xfc\xcd\xdb\xdc')

In [5]: r1 = xor_c('Test')

In [6]: r2 = xor_c(r1)

In [7]: r2
Out[7]: bytearray(b'Test') 
```

你的例子有问题。这是输入： ![输入图像](https://i.stack.imgur.com/9KuSf.png)

这是双异或后的输出： ![输出](https://i.stack.imgur.com/19qfA.png)

请注意，在某些地方，“'”会转换为 an`i` *或*a `j`。这对于普通的双异或是不可能的*。*

你确定你使用了我上面提供的代码吗？因为如果我在二进制文件上运行它，两次异或数据等于原始数据：

```
In [1]: def xor_c(a, c=0xA8):
   ...:     return bytearray([b^c for b in bytearray(a)])
   ...: 

In [2]: with open('foo.gz', 'rb') as inf:
    data = inf.read()
   ...:     

In [3]: data2 = xor_c(xor_c(data))

In [4]: cmp(data, data2)
Out[4]: 0 
```

当我将数据写入磁盘并进行比较时，文件也是相同的：

```
In [5]: with open('foo2.gz', 'wb') as outf:
    outf.write(data2)
   ...:     

> ll foo*
-rw-r--r--  1 rsmith  rsmith  - 4049792 Apr 16 13:15 foo2.gz
-rw-r--r--  1 rsmith  rsmith  - 4049792 Apr 16 12:39 foo.gz
> diff foo* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T06:58:56.670

（对不起，我一开始看错了问题）

我认为问题可能在于`v`初始化：`v`不应该是 a `string`，而是 a[`bytearray`](http://docs.python.org/3.1/library/functions.html#bytearray)

```
v = bytearray() 
```

我没有工具可以在这里验证。

# vim - Vim 格式选项-=或

> ID：16030639
> 
> 赞同：8
> 
> 时间：2013-04-16T06:56:51.020
> 
> 标签：vim

我的 vimrc 中有以下几行：

```
" Don't add the comment prefix when I hit enter or o/O on a comment line.
set formatoptions-=or 
```

它曾经在某个时候起作用。我不知道我做了什么，但现在不知道了，创建换行符时我仍然会收到评论。什么可以禁用它？这是我的 vimrc： http: [//pastebin.com/kVWWeQWW](http://pastebin.com/kVWWeQWW)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-04-27T17:17:32.990

@mm2703 的解决方案对我不起作用，尤其是对于 java 文件，但是这种更改确实有效。我还将它包装在`augroup`, 声明中，因此资源`.vimrc`不会重新注册`autocmd`：

```
augroup Format-Options
    autocmd!
    autocmd BufEnter * setlocal formatoptions-=c formatoptions-=r formatoptions-=o

    " This can be done as well instead of the previous line, for setting formatoptions as you choose:
    autocmd BufEnter * setlocal formatoptions=crqn2l1j
augroup END 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-16T11:25:31.467

如果您发现标志在启动`o`后被重新插入`formatoptions`，您应该找出发生这种情况的原因并修复它。这似乎比总是执行 更干净`autocmd`，即使在删除选项之后也是如此。

您可以使用以下命令检查选项的设置位置：

```
:5verbose set fo?
:5verbose setl fo? 
```

* * *

**编辑：**

如果您的问题`ftplugin`在于位于 Vim 目录 ( `$VIMRUNTIME/ftplugin`) 中的文件，则不应更改该文件，因为更新 Vim 时该更改将被撤消。更改它的正确方法是在您的`after`目录中，如`:h after-directory`.

假设文件类型出现问题`c`，请创建`~/.vim/after/ftplugin/c.vim`包含您的`setlocal formatoptions-=`命令的文件。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-16T08:40:06.193

如果您`'formatoptions'`包含不同顺序的选项，例如`ro`，那么`-=or`将不起作用。尝试

```
set formatoptions-=o
set formatoptions-=r 
```

来自`help remove-option-flags`：

> 请注意，您应该一次添加或删除一个标志。如果 'guioptions' 的值为 "ab"，使用 "set guioptions-=ba" 将不起作用，因为字符串 "ba" 不会出现。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-16T09:13:07.193

我意识到`:set formatoptions?`虽然该`o`标志在启动时被禁用，但在打开文件时它又回来了。这在我的 vimrc 中修复了它：

```
" Don't add the comment prefix when I hit enter or o/O on a comment line.
autocmd FileType * setlocal formatoptions-=c formatoptions-=r formatoptions-=o 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-18T19:56:41.090

谢谢，这对我有用 - 但我正在禁用烦人的格式化功能......

```
autocmd!
autocmd BufEnter * setlocal formatoptions-=c formatoptions-=q formatoptions-=n formatoptions-=r formatoptions-=o formatoptions-=l
```

似乎 vimrc 只是忽略了组合语法，例如。格式选项-=cqn

# android - 无法启动活动 ComponentInfo...NullPointerException

> ID：16030640
> 
> 赞同：3
> 
> 时间：2013-04-16T06:56:53.407
> 
> 标签：android, listview

我正在尝试使用 textview 填充单个列表视图，但我在第 60 行收到以下错误

```
 listView.setAdapter(adapter); 
```

这是我的完整日志。

```
04-16 10:51:38.953: E/AndroidRuntime(3068): FATAL EXCEPTION: main
04-16 10:51:38.953: E/AndroidRuntime(3068): java.lang.RuntimeException: Unable to start activity ComponentInfo{}: java.lang.NullPointerException
04-16 10:51:38.953: E/AndroidRuntime(3068):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
04-16 10:51:38.953: E/AndroidRuntime(3068):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-16 10:51:38.953: E/AndroidRuntime(3068):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
04-16 10:51:38.953: E/AndroidRuntime(3068):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-16 10:51:38.953: E/AndroidRuntime(3068):     at android.os.Looper.loop(Looper.java:130)
04-16 10:51:38.953: E/AndroidRuntime(3068):     at android.app.ActivityThread.main(ActivityThread.java:3687)
04-16 10:51:38.953: E/AndroidRuntime(3068):     at java.lang.reflect.Method.invokeNative(Native Method)
04-16 10:51:38.953: E/AndroidRuntime(3068):     at java.lang.reflect.Method.invoke(Method.java:507)
04-16 10:51:38.953: E/AndroidRuntime(3068):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
04-16 10:51:38.953: E/AndroidRuntime(3068):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
04-16 10:51:38.953: E/AndroidRuntime(3068):     at dalvik.system.NativeStart.main(Native Method)
04-16 10:51:38.953: E/AndroidRuntime(3068): Caused by: java.lang.NullPointerException
04-16 10:51:38.953: E/AndroidRuntime(3068):     at s..onCreate(Urgence.java:60)
04-16 10:51:38.953: E/AndroidRuntime(3068):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-16 10:51:38.953: E/AndroidRuntime(3068):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
04-16 10:51:38.953: E/AndroidRuntime(3068):     ... 11 more 
```

这是我的列表类

```
public class ListClass extends Activity 
{

    // Array of strings storing country names
    String[] countries = new String[] {
            "Services opposition", "Service Carte bancaire a l'etranger"
    };

    // Array of integers points to images stored in /res/drawable-ldpi/
    int[] flags = new int[]{
            R.drawable.arrow,
            R.drawable.arrow
    };

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.urgence);

        // Each row in the list stores country name, currency and flag
        List<HashMap<String,String>> aList = new ArrayList<HashMap<String,String>>();        

        for(int i=0;i<2;i++){
            HashMap<String, String> hm = new HashMap<String,String>();
            hm.put("txt", countries[i]);
            hm.put("flag", Integer.toString(flags[i]) );            
            aList.add(hm);        
        }

        // Keys used in Hashmap
        String[] from = { "txt","flag"};

        // Ids of views in listview_layout
        int[] to = { R.id.single_text,R.id.single_image};        

        // Instantiating an adapter to store each items
        // R.layout.listview_layout defines the layout of each item
        SimpleAdapter adapter = new SimpleAdapter(getBaseContext(), aList, R.layout.listview_layout, from, to);

        // Getting a reference to listview of main.xml layout file
        ListView listView = ( ListView ) findViewById(R.id.list);

        // Setting the adapter to the listView
        listView.setAdapter(adapter);                                
    }

} 
```

任何人都知道为什么我的适配器为空

**更新：** 这是我的 xml 文件中的列表视图

```
<ListView 
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:00:46.730

不是你的适配器`null`；它是`listView`。（null`adapter`不会立即在该行生成异常。）您的布局`layout/urgence.xml`— — 没有定义具有 id 的视图`list`。修复您的布局，然后该行应该可以工作。

**编辑**根据您的更新，问题是您正在尝试查找带有 id 的视图，`R.id.list`而您应该尝试查找带有 id 的视图`android.R.id.list`。`R`和`android.R`是两个不同的东西。

或者，您可以更改布局以使用您自己的`id/list`：

```
<ListView 
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:16:51.357

当活动 xml 中的 id 与 java 类中引用的不同时，会出现此错误。

更改以下行

```
android:id="@android:id/list" 
```

至

```
android:id="@+id/list" 
```

在您的 XML 文件中。

# php - 使用 curl 和 ajax 发送帖子数据

> ID：16030642
> 
> 赞同：1
> 
> 时间：2013-04-16T06:57:04.247
> 
> 标签：php, ajax, json, proxy, cross-domain

我正在尝试使用代理脚本发送帖子数据以执行跨域 ajax。

```
var data = "url=http://www.fhm.com.ph/templates/100sexiestwomen2013/ajax/set.php&id=13&index=0&action=add";
$.ajax({
    url: "proxy.php",
    data: data,
    type: "POST",
    success: function(data, textStatus, jqXHR) {
        console.log('Success ' + data);

    },
    error: function(jqXHR, textStatus, errorThrown) {
        console.log('Error ' + jqXHR);
    }
}); 
```

然后我尝试解析数据以用作代理脚本中的 url 和参数。

```
<?php
    //set POST variables
    $url = $_POST['url'];
    unset($_POST['url']);
    $fields_string = "";
    //url-ify the data for the POST
    foreach($_POST as $key=>$value) {
            $fields_string .= $key.'='.$value.'&';
    }
    $fields_string = rtrim($fields_string,'&');
    //open connection
    $ch = curl_init();
    //set the url, number of POST vars, POST data
    curl_setopt($ch,CURLOPT_URL,$url);
    curl_setopt($ch,CURLOPT_POST, 1);
    curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    //execute post
    $result = curl_exec($ch);
    //close connection
    curl_close($ch); 
```

但事实证明它没有正确发布数据。

尝试使用邮递员，一个 chrome 扩展[POSTMAN](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?hl=en)。并给出正确的键值对，如`data`.

它会`null`在第一次提交和`selected`第二次提交时为您提供。

我错过了什么。

**编辑**

```
<?php
    //set POST variables
    $url = $_POST['url'];
//    unset($_POST['url']);
//    $fields_string = "";
//    //url-ify the data for the POST
//    foreach($_POST as $key=>$value) {
//            $fields_string .= $key.'='.$value.'&';
//    }
//    $fields_string = rtrim($fields_string,'&');
    //open connection
    $ch = curl_init();
    //set the url, number of POST vars, POST data
    curl_setopt($ch,CURLOPT_URL,$url);
    curl_setopt($ch,CURLOPT_POST, 1);
    curl_setopt($ch,CURLOPT_POSTFIELDS,$_POST);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    //execute post
    $result = curl_exec($ch);
    //close connection
    curl_close($ch); 
```

如编辑所示，我删除了手动构建，而是使用了 POST 数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:04:27.033

在 Javascript 中使用一个对象`data`，以便 jQuery 对其进行正确编码：

```
var data = {
   url: "http://www.fhm.com.ph/templates/100sexiestwomen2013/ajax/set.php&id=13",
   index: 0,
   action: "add"
}; 
```

在 PHP 中，使用数组`CURLOPT_POSTFIELDS`：

```
curl_setopt($ch,CURLOPT_POSTFIELDS,$_POST); 
```

PHP 会正确编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:00:18.143

您必须正确编码您的数据

```
var data = "url=" + encodeURIComponent("http://www.fhm.com.ph/templates/100sexiestwomen2013/ajax/set.php")+"&id=13&index=0&action=add"; 
```

由于您的 url 参数包含在 url 中具有特殊含义的字符。

# linux - 如何检测 epoll 中所有先前注册的事件何时被注销？

> ID：16030643
> 
> 赞同：2
> 
> 时间：2013-04-16T06:57:13.727
> 
> 标签：linux, events, epoll

假设我在某个函数中使用 epoll_ctl 注册了有限数量的事件。现在，在对同一个函数的重复调用中，我使用以下方法一次取消注册这些事件中的每一个：

```
epoll_ctl(epfd, EPOLL_CTL_DEL, fd, event); 
```

我如何知道所有已注册的实例何时已注销？我需要为此维护一个单独的列表吗？

**编辑：**

我想我需要为我的问题添加更多上下文。假设我能够检测到没有注册事件，那么我需要在上面提到的同一函数中执行某个其他基本任务，而不是 epoll_wait()。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:38:42.127

是的，您需要考虑您的文件描述符。

如果你想注销*所有*事件，你可以直接关闭 epoll fd，让内核释放整个数据结构（我没有尝试过，但我敢打赌这个解决方案也更快）。

# c# - 如何在 C#.net windows 应用程序中擦除使用 Graphics 绘制的线

> ID：16030644
> 
> 赞同：0
> 
> 时间：2013-04-16T06:57:17.783
> 
> 标签：c#, winforms

我们需要构建一个记录我们桌面的应用程序。我们在桌面上画线以通知用户我们正在记录他/她的桌面。我们希望在记录完成后擦除这些线。我们使用 C#.net 中的图形绘制线。请检查下面的代码，

```
IntPtr desktop = GetDC(IntPtr.Zero);
using (Graphics g1 = Graphics.FromHdc(desktop))
 {
   Pen blackPen = new Pen(Color.Orange, 10); 
   Point pleftTop = new Point(2, 1);
   Point pleftBottom = new Point(2, 765);
   g1.DrawLine(blackPen, pleftTop, pleftBottom); 
   Point pTopLeft = new Point(1, 3);
   Point pTopRight = new Point(1356, 3);
   g1.DrawLine(blackPen, pTopLeft, pTopRight); 
   Point pRight1 = new Point(1356, 1356);
   Point pRight2 = new Point(1358, 1);
   g1.DrawLine(blackPen, pRight1, pRight2); 
   Point pBottom1 = new Point(1, 765);
   Point pBottom2 = new Point(1356, 765);
   g1.DrawLine(blackPen, pBottom1, pBottom2);

   string text = string.Empty;
   int screenHeight = Screen.GetWorkingArea(this).Height;
   int screenWidth = Screen.GetWorkingArea(this).Width;
   text = "Recording your screen & audio";
   int centerWidth = ((screenWidth / 3));
   int opacity = 255; 
   g1.PixelOffsetMode = PixelOffsetMode.HighQuality;
   g1.DrawString(text, new Font("Arial", 15), new SolidBrush(Color.FromArgb(opacity,    Color.WhiteSmoke)), centerWidth, 0); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T07:01:22.687

`Graphics.Draw...`函数替换像素。除非您也没有办法撤消它

*   存储正在更改的像素，以便您可以反转绘图或
*   在桌面副本上绘制像素，以便您可以恢复到实际桌面或
*   用透明表面覆盖桌面并在其上绘制并在不再需要时移除表面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T17:35:44.177

除了存储所有像素，您还可以只广播一条消息，通知桌面及其所有子窗口（即一切）重新绘制。这可能比我之前的建议要好得多，因为你可以在桌面上绘制任何你喜欢的东西。

```
const int RDW_INVALIDATE = 0x0001;
const int RDW_ALLCHILDREN = 0x0080;
const int RDW_UPDATENOW = 0x0100;
[DllImport("User32.dll")]
static extern bool RedrawWindow(IntPtr hwnd, IntPtr rcUpdate, IntPtr regionUpdate, int flags);
...
// Redraw the desktop and its children
RedrawWindow(IntPtr.Zero, IntPtr.Zero, IntPtr.Zero, RDW_INVALIDATE | RDW_ALLCHILDREN | RDW_UPDATENOW); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:13:10.807

您可以使用的另一种选择是使用`ControlPaint.DrawReversibleFrame`. 它更古怪，您不能绘制文本，但实现此方法很快。您甚至不需要桌面的句柄。

基本上，它使用 XOR 操作绘制一个矩形，因此如果您在同一位置再次调用它，则该矩形将被擦除。请注意，如果在第一次调用和第二次调用之间修改了矩形的任何像素，那么您将获得将持续存在的伪影，直到底层窗口重新绘制自身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-04T18:59:40.603

```
bool change = false;
private void timer1_Tick(object sender, EventArgs e)
{
    try
    {
        if (change)
        {
             InvalidateRect(IntPtr.Zero, IntPtr.Zero, true);
            change = false;
        }
        else
        {
            PaintLineToScreen();
            change = true;
        }

    }
    catch (System.Exception caught)
    {

        MessageBox.Show(caught.Message);
    }
} 
```

# c# - 在linq中按时间分组（仅小时部分）

> ID：16030649
> 
> 赞同：0
> 
> 时间：2013-04-16T06:57:42.477
> 
> 标签：c#, linq, time, datatable

我有一个包含以下列的数据表

```
CallTime   CallType

15:45:00    Voice
15:30:54    Voice
00:12:14    SMS
01:13:47    Voice
05:48:23    SMS
12:00:47    Voice 
```

现在我想要像这样使用 Linq 结果

```
Hrs   Count
00    1
01    1
05    1
12    1
15    2 
```

我尝试过使用 Linq 进行 Group，但没有得到正确的结果。

我使用了以下代码

```
 var groupQuery = from table in Foundrows.AsEnumerable()
                         group table by table["Call Time"] into groupedTable
                         select new
                         {
                             CallTime = groupedTable.Key,
                             CallCount = groupedTable.Count()
                         }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T06:59:55.140

```
var groupQuery = from r in Foundrows.AsEnumerable()
                 group r by r.Field<TimeSpan>("CallTime").Hours into g
                 select new {
                    Hrs = g.Key,
                    CallCount = g.Count()
                 }; 
```

如果您的类型列，`string`则只需将其值解析为`TimeSpan`：

```
var groupQuery = from r in Foundrows.AsEnumerable()
                 let time = TimeSpan.Parse(r.Field<string>("CallTime"))
                 group r by time.Hours into g
                 select new {
                    Hrs = g.Key,
                    CallCount = g.Count()
                 }; 
```

* * *

```
Foundrows.AsEnumerable()
         .Select(r => {
             TimeSpan time;
             return new {
                Row = r,
                Time = TimeSpan.TryParse(r.Field<string>("CallTime"), out time) ?
                       time : (TimeSpan?)null
             };
         })
         .Where(x => x.Time.HasValue)
         .GroupBy(x => x.Time.Value.Hours)
         .Select(g => new {
             Hrs = g.Key,
             CallCount = g.Count()
         }); 
```

或者您可以使用`TryParse`which 将返回可空`TimeSpan`方法，如下所示：

```
public static TimeSpan? TryParse(string s)
{
    TimeSpan time;
    if (TimeSpan.TryParse(s, out time))
       return time;

    return null;
} 
```

并在原始查询中使用它：

```
var groupQuery = from r in Foundrows.AsEnumerable()
                 let time = TryParse(r.Field<string>("CallTime"))
                 where time.HasValue
                 group r by time.Value.Hours into g
                 select new {
                    Hrs = g.Key,
                    CallCount = g.Count()
                 }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T07:04:04.797

如果您想按小时分组并且“呼叫时间”字段是一个`DateTime`字段：

```
var groupQuery = from row in Foundrows.AsEnumerable()
                 let hour = row.Field<DateTime>("Call Time").Hour 
                 group row by hour into hourGroup
                 select new {
                    CallHour = hourGroup.Key,
                    CallCount = hourGroup.Count()
                 }; 
```

如果要按`Date`+的组合进行分组`Hour`：

```
var groupQuery = from row in Foundrows.AsEnumerable()
                 let date = row.Field<DateTime>("Call Time")
                 let hour = date.Hour
                 group row by new{ date, hour } into dateHourGroup
                 select new {
                     CallDate = dateHourGroup.Key.date,
                     CallHour = dateHourGroup.Key.hour,
                     CallCount = dateHourGroup.Count()
                 }; 
```

**编辑**：如果它实际上是一个`TimeSpan`（看起来是这样），请使用lazyberezovsky的方法:)

> 您的[评论](https://stackoverflow.com/a/16030676/284240)：如果我想使用`TryParse`而不是`Parse`，我需要在代码中进行哪些更改？

我建议创建一个允许返回 a 的扩展`Nullable<TimeSpan>`，然后您可以检查是否`HasValue==true`：

```
public static TimeSpan? TryGetTimeSpan(this string tsString, string format = null)
{
    TimeSpan ts;
    bool success;
    if (format == null)
        success = TimeSpan.TryParse(tsString, out ts);
    else
        success = TimeSpan.TryParseExact(tsString, format, null, TimeSpanStyles.None, out ts);
    return success ? (TimeSpan?)ts : (TimeSpan?)null;
} 
```

现在此查询有效地工作并且不使用未记录的副作用（作为`TimeSpan`您在查询中使用的局部变量`TimeSpan.TryParse`）：

```
var groupQuery = from r in Foundrows.AsEnumerable()
                 let time = r.Field<string>("CallTime").TryGetTimeSpan()
                 where time.HasValue
                 group r by time.Value.Hours into g
                 select new
                 {
                     Hrs = g.Key,
                     CallCount = g.Count()
                 }; 
```

# php - How can I delete a line from a file if it contains a certain string using PHP?

> ID：16030660
> 
> 赞同：0
> 
> 时间：2013-04-16T06:58:19.760
> 
> 标签：php, file, csv

I have a Delete link in my profile page which links to `"delete.php?snum=" . $snum`. I have a `$snum=$_GET['snum'];` in delete.php. I have a file named `"SLBrecords.csv"` which looks like

12345 Barney
67890 Stinson

and I would like to create a script that would search for `$snum` in the file and delete the line that contains it. I think this is easy but I keep messing with implode, strpos, and other functions now but I'm still not able to make it work.

EDIT: Here is my code.

```
<?php

$snum=$_GET['snum'];

$filePath = './SLBrecords.csv';

$fileArr = file( $filePath );

foreach($fileArr as $line)
    if (strpos($line,$snum) !== false) {
        unset($line);
    }
$success = FALSE;
if ( file_put_contents( $filePath, implode( '', $fileArr ), LOCK_EX ) )
{
    $success = TRUE;
}

?> 
```

**Edit: How can I delete the line and also delete the newline that comes with it?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:11:33.740

`unset($line)` is wrong. Try

```
foreach($fileArr as $k=>$line) {
    if (strpos($line,$snum) !== false) {
        unset($fileArr[$k]);
    }
} 
```

# java - Java中的isprint等价物

> ID：16030661
> 
> 赞同：4
> 
> 时间：2013-04-16T06:58:20.087
> 
> 标签：java, c

我正在迁移 Java 代码中的 C 代码，我需要一些字符处理内置功能，这些功能在字符处理中可用

```
What I'm looking for,
isprint -> ??? 

Other I got in java.lang.Character
isalnum -> isLetterOrDigit 
isalpha -> isLetter 
```

有人可以帮我找到等效的 isprint 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T07:05:36.343

[字符#isISOControl(char ch)](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#isISOControl%28char%29)

> 确定指定字符是否为 ISO 控制字符。如果字符的代码在 '\u0000' 到 '\u001F' 范围内或在 '\u007F' 到 '\u009F' 范围内，则该字符被视为 ISO 控制字符。
> 
> **注意：**此方法不能处理补充字符。要支持所有 Unicode 字符，包括补充字符，请使用 [Character#isISOControl(int)](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#isISOControl%28int%29)方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T07:07:02.133

尝试：

```
Character.isISOControl (char ch) 
```

来自[http://www.tutorialspoint.com/java/lang/character_isisocontrol.htm](http://www.tutorialspoint.com/java/lang/character_isisocontrol.htm) 它返回一个字符是否是一个 ISO 控制字符。如果字符的代码在 '\u0000' 到 '\u001F' 范围内或在 '\u007F' 到 '\u009F' 范围内，则该字符被视为 ISO 控制字符。

例子

以下示例显示了 lang.Character.isISOControl() 方法的用法。包 com.tutorialspoint；

```
import java.lang.*;

public class CharacterDemo {

   public static void main(String[] args) {

      // create 2 char primitives ch1, ch2
      char ch1, ch2;

      // assign values to ch1, ch2
      ch1 = ':';
      ch2 = '\u0013';

      // create 2 boolean primitives b1, b2
      boolean b1, b2;

      // assign isISOControl results of ch1, ch2 to b1, b2
      b1 = Character.isISOControl(ch1);
      b2 = Character.isISOControl(ch2);

      String str1 = ch1 + " is an ISO control character is " + b1;
      String str2 = "ch2 is an ISO control character is " + b2;

      // print b1, b2 values
      System.out.println( str1 );
      System.out.println( str2 );
   }
} 
```

让我们编译并运行上面的程序，这将产生以下结果：

```
: is an ISO control character is false
ch2 is an ISO control character is true 
```

在此之后，您可以使用`false`打印字符:)

# spring-mvc - 我可以在 Web 应用程序中使用 Spring Integration 而不是 Spring MVC 吗？

> ID：16030664
> 
> 赞同：0
> 
> 时间：2013-04-16T06:58:33.087
> 
> 标签：spring-mvc, web, spring-integration

我是 Spring Integration 框架的新手。

我们正在开发提供基于移动金融服务的 Web 应用程序，并使用 Spring MVC 来实现它。

我们在 REST、SOAP、WEB 等不同渠道上公开我们的服务，并使用 Spring MVC 提供所有这些服务。

我听说过 Spring Integration 但不太了解，我只知道它被用来轻松集成不同的应用程序。

Q - 1 : 根据我的要求，我可以使用 Spring Integration 代替 Spring MVC 吗？

Q - 2 : 根据我的要求，我可以使用 Spring Web Flow 代替 Spring MVC 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:21:07.603

如果你去spring集成页面

> Spring Integration 提供了 Spring 编程模型的扩展，以支持众所周知的企业集成模式。它在基于 Spring 的应用程序中启用轻量级消息传递，并支持通过声明性适配器与外部系统集成。这些适配器在 Spring 对远程处理、消息传递和调度的支持之上提供了更高级别的抽象。

因此，如果您使用上面描述的任何模式，您可以将 Spring 集成放在那里。您可以使用 spring 集成来创建一个发送数据的服务端点，但当然您的移动应用程序必须有一个专门为使用它而构建的客户端。如果您的移动客户端在用户访问应用程序时从您的应用程序中提取数据，对我来说这是 GET 请求的情况，并且可以由控制器处理。但是，如果您的系统需要该级别的分布，您可以为了可扩展性将控制器和业务层之间的通信放在队列中；那就是将使用 Spring 集成的地方。

关于Webflow；最简单的说法是“如果您有一个用例，其中用户通过不同屏幕控制的多个步骤，是的，您可以将它放在 Spring Webflow 上”。

但是，它们都没有相互取代。

# c# - 在 c 中加载给定两种形式的主要形式

> ID：16030665
> 
> 赞同：0
> 
> 时间：2013-04-16T06:58:34.817
> 
> 标签：c#

有没有办法让我的主表单 form1 在表单 2 加载后显示？自动加载这是表格 2 代码

```
 private void button1_Click(object sender, EventArgs e)
        {
            string username1 = "Richard";
            string password1 = "Peugeot";

            if (this.textBox1.Text == username1 && this.textBox2.Text == password1)
                MessageBox.Show("Welcome Richard!", "Welcome");
            else
                MessageBox.Show("Incorrect username or password", "Bad credentials");
        } 
```

这是form1代码

```
 private void Form1_Load(object sender, EventArgs e)
        {
            StringBuilder sb = new StringBuilder(String.Empty);

            sb.AppendLine("Operation System Information");
            sb.AppendLine("----------------------------");
            sb.AppendLine(String.Format("Name = {0}", OSVersionInfo.Name));
            sb.AppendLine(String.Format("Edition = {0}", OSVersionInfo.Edition));
            if (OSVersionInfo.ServicePack!=string.Empty)
                sb.AppendLine(String.Format("Service Pack = {0}", OSVersionInfo.ServicePack));
            else
                sb.AppendLine("Service Pack = None");
            sb.AppendLine(String.Format("Version = {0}", OSVersionInfo.VersionString));
            sb.AppendLine(String.Format("ProcessorBits = {0}", OSVersionInfo.ProcessorBits));
            sb.AppendLine(String.Format("OSBits = {0}", OSVersionInfo.OSBits));
            sb.AppendLine(String.Format("ProgramBits = {0}", OSVersionInfo.ProgramBits));

            textBox1.Text = sb.ToString();
        } 
```

这是 program.cs 代码

```
static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form2());
        }
    } 
```

我希望表格 1 在表格 2 之后自动加载 在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:08:10.840

验证登录凭据并且正确后，您可以使用以下内容：

```
Hide();
Form1 mainForm = new Form1();
mainForm.Show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:04:43.380

哦，我想这就是你需要的

```
private void button1_Click(object sender, EventArgs e)
        {
            string username1 = "Richard";
            string password1 = "Peugeot";

            if (this.textBox1.Text == username1 && this.textBox2.Text == password1)
             {
                MessageBox.Show("Welcome Richard!", "Welcome");
                Form1 frm = new Form1();
                frm.Show();
                this.Hide(); //If you want to hide the log in form after form1 has loaded
             }
            else
                MessageBox.Show("Incorrect username or password", "Bad credentials");
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:09:12.313

我怀疑您在这里追求的是一种仅在用户经过验证时才显示 form1 的方式？
如果是这样，只需在此处显示表格：

```
if (this.textBox1.Text == username1 && this.textBox2.Text == password1)
{
    Form1 form1 = new Form1();
    form1.Show();
    // close form2?  
}
else
 ... 
```

您可能想要保留一个计数器，如果用户在 x 次尝试中没有正确获得密码/用户名组合，只需卸载 form2（即从 else 中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T07:10:24.190

如果`Form1`是您的主要选项，则首先加载并显示为对话框`Form`可能是一个更好的选择，如果从不退出应用程序，则继续。`Form1``Form2``DialogResult``Form2``OK`

```
public Form1()
{
    if (new Form2().ShowDialog() != System.Windows.Forms.DialogResult.OK)
    {
        Close();
    }
    InitializeComponent();
} 
```

Form2 按钮事件

```
private void button1_Click(object sender, EventArgs e)
{
    string username1 = "Richard";
    string password1 = "Peugeot";

    if (this.textBox1.Text == username1 && this.textBox2.Text == password1)
    {
        MessageBox.Show("Welcome Richard!", "Welcome");
        DialogResult = System.Windows.Forms.DialogResult.OK;
    }
    else
    {
        MessageBox.Show("Incorrect username or password", "Bad credentials");
        DialogResult = System.Windows.Forms.DialogResult.No;
    }
} 
```

# android - 在旧 android 上显示卡片翻转动画

> ID：16030667
> 
> 赞同：25
> 
> 时间：2013-04-16T06:58:54.550
> 
> 标签：android, api, flip, nineoldandroids

我们都知道[这篇](http://developer.android.com/training/animation/cardflip.html)关于如何`"card filp"`使用`new api`. 但是我该怎么做`on apis < 3.0`呢？

*更新：*

只要有像[android-FlipView](https://github.com/emilsjolander/android-FlipView)这样好的且易于使用的库，我认为你真的不需要自己做这样的动画。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-04-16T18:13:29.687

找到了答案。如果你想在 上做翻转动画`ALL ANDROID VERSIONS`，使用这个：

活动布局文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/main_activity_root"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@android:color/transparent" >

<RelativeLayout
android:id="@+id/main_activity_card_face"
android:layout_width="300dp"
android:layout_height="407dp"
android:layout_centerHorizontal="true"
android:layout_centerVertical="true"
android:background="@drawable/front"
android:clickable="true"
android:onClick="onCardClick"
android:padding="5dp" >
</RelativeLayout>

<RelativeLayout
android:id="@+id/main_activity_card_back"
android:layout_width="300dp"
android:layout_height="407dp"
android:layout_centerHorizontal="true"
android:layout_centerVertical="true"
android:background="@drawable/back"
android:clickable="true"
android:onClick="onCardClick"
android:visibility="gone" >
</RelativeLayout>

</RelativeLayout> 
```

当布局文件翻转两个视图组时，您可以在视图组中放置任何其他内容，它应该可以工作。现在让我们看看 Activity 中处理调用翻转动画代码的方法：

```
public void onCardClick(View view)
{
      flipCard();
}

private void flipCard()
{
    View rootLayout = findViewById(R.id.main_activity_root);
    View cardFace = findViewById(R.id.main_activity_card_face);
    View cardBack = findViewById(R.id.main_activity_card_back);

    FlipAnimation flipAnimation = new FlipAnimation(cardFace, cardBack);

    if (cardFace.getVisibility() == View.GONE)
    {
        flipAnimation.reverse();
    }
    rootLayout.startAnimation(flipAnimation);
} 
```

最后是`FlipAnimation`课程：

```
public class FlipAnimation extends Animation
{
    private Camera camera;

    private View fromView;
    private View toView;

    private float centerX;
    private float centerY;

    private boolean forward = true;

    /**
     * Creates a 3D flip animation between two views.
     *
     * @param fromView First view in the transition.
     * @param toView Second view in the transition.
     */
    public FlipAnimation(View fromView, View toView)
    {
        this.fromView = fromView;
        this.toView = toView;

        setDuration(700);
        setFillAfter(false);
        setInterpolator(new AccelerateDecelerateInterpolator());
    }

    public void reverse()
    {
        forward = false;
        View switchView = toView;
        toView = fromView;
        fromView = switchView;
    }

    @Override
    public void initialize(int width, int height, int parentWidth, int parentHeight)
    {
        super.initialize(width, height, parentWidth, parentHeight);
        centerX = width/2;
        centerY = height/2;
        camera = new Camera();
    }

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t)
    {
        // Angle around the y-axis of the rotation at the given time
        // calculated both in radians and degrees.
        final double radians = Math.PI * interpolatedTime;
        float degrees = (float) (180.0 * radians / Math.PI);

        // Once we reach the midpoint in the animation, we need to hide the
        // source view and show the destination view. We also need to change
        // the angle by 180 degrees so that the destination does not come in
        // flipped around
        if (interpolatedTime >= 0.5f)
        {
            degrees -= 180.f;
            fromView.setVisibility(View.GONE);
            toView.setVisibility(View.VISIBLE);
        }

        if (forward)
            degrees = -degrees; //determines direction of rotation when flip begins

        final Matrix matrix = t.getMatrix();
        camera.save();
        camera.rotateY(degrees);
        camera.getMatrix(matrix);
        camera.restore();
        matrix.preTranslate(-centerX, -centerY);
        matrix.postTranslate(centerX, centerY);
    } 
```

这是原始帖子的链接： [Displaying card flip animation on old android](http://2cupsoftech.wordpress.com/2012/09/18/3d-flip-between-two-view-or-viewgroup-on-android/)

**来自@FMMobileFelipeMenezes 的**更新。****

 **如果你想要平滑缩放的动画翻转，将这部分代码更改为 (applyTransformation) ：

```
final Matrix matrix = t.getMatrix();
camera.save();
camera.translate(0, 0, Math.abs(degrees)*2);
camera.getMatrix(matrix);
camera.rotateY(degrees);
camera.getMatrix(matrix);
camera.restore();
matrix.preTranslate(-centerX, -centerY);
matrix.postTranslate(centerX, centerY); 
```

**来自@Hesam 的更新**我推荐阅读它的好教程。尽管它不如基于 Fragment 的 Android 教程那么好，但如果您想将动画分配给布局和视图以及在旧 API 上使用它，那么它值得一读并很有用。

[使用 Android 的缩放动画模拟 3D 翻转](http://www.techrepublic.com/blog/android-app-builder/use-androids-scale-animation-to-simulate-a-3d-flip/)

[@LenaBru 改进了 github 上的项目](https://github.com/pikaboo/CardFlipView)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-07T19:52:00.887

我在下面使用了 Flextra 代码，如果你想要平滑缩放的动画翻转，请将这部分代码更改为 (applyTransformation) ：

```
 final Matrix matrix = t.getMatrix();
    camera.save();
    camera.translate(0, 0, Math.abs(degrees)*2);
    camera.getMatrix(matrix);
    camera.rotateY(degrees);
    camera.getMatrix(matrix);
    camera.restore();
    matrix.preTranslate(-centerX, -centerY);
    matrix.postTranslate(centerX, centerY); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-11T14:38:15.663

我玩了一天，终于达到了终极目标——两个视图的流畅的翻牌式旋转动画！

我把演示项目[放在这里](https://github.com/pikaboo/CardFlipView)

```
public class FlipAnimation extends Animation {
    private Camera camera;

    private View fromView;
    private View toView;

    private float centerX;
    private float centerY;

    private boolean forward = true;

    /**
     * Creates a 3D flip animation between two views.
     * 
     * @param fromView
     *            First view in the transition.
     * @param toView
     *            Second view in the transition.
     */
    public FlipAnimation(View fromView, View toView) {
        this.fromView = fromView;
        this.toView = toView;

        setDuration(1500);
        setFillAfter(false);
        // setInterpolator(new AccelerateDecelerateInterpolator());
        setInterpolator(new LinearInterpolator());
    }

    public void reverse() {

        if (forward) {
            View switchView = toView;
            toView = fromView;
            fromView = switchView;
        }
        forward = false;
    }

    @Override
    public void initialize(int width, int height, int parentWidth, int parentHeight) {
        super.initialize(width, height, parentWidth, parentHeight);
        centerX = width / 2;
        centerY = height / 2;
        camera = new Camera();
    }

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        // Angle around the y-axis of the rotation at the given time
        // calculated both in radians and degrees.
        final double radians = Math.PI * interpolatedTime;
        float degrees = (float) (180.0 * radians / Math.PI);

        //scale down the views a bit, so that they would look nice when the rotation begins

        if (interpolatedTime <= 0.05f) {
            fromView.setScaleX(1 - interpolatedTime);
            fromView.setScaleY(1 - interpolatedTime);
            toView.setScaleX(1 - interpolatedTime);
            toView.setScaleY(1 - interpolatedTime);
        }

        // Once we reach the midpoint in the animation, we need to hide the
        // source view and show the destination view. We also need to change
        // the angle by 180 degrees so that the destination does not come in
        //It is very important to call "toView.bringToFront()" and not play with the
        // visibility of the views, because if you apply this animation more than once,
        //the subsequent calls may fail
        if (interpolatedTime >= 0.5f) {
            degrees -= 180.f;
            toView.bringToFront();
          //these two lines force a layout redraw
          ((View)toView.getParent()).requestLayout();
          ((View)toView.getParent()).invalidate();

        }

        //scale the views back to their original size (Assuming original size was 1)
        if (interpolatedTime >= 0.95f) {
            fromView.setScaleX(interpolatedTime);
            fromView.setScaleY(interpolatedTime);
            toView.setScaleX(interpolatedTime);
            toView.setScaleY(interpolatedTime);
        }

        if (forward)
            degrees = -degrees; // determines direction of rotation when flip
                                // begins

        final Matrix matrix = t.getMatrix();
        camera.save();
        camera.translate(0, 0, Math.abs(degrees) * 2);
        camera.getMatrix(matrix);
        camera.rotateY(degrees);
        camera.getMatrix(matrix);
        camera.restore();
        matrix.preTranslate(-centerX, -centerY);
        matrix.postTranslate(centerX, centerY);
    }
} 
```

并这样称呼它

```
import android.content.Context;
import android.os.Bundle;
import android.os.Handler;
import android.support.v4.app.FragmentActivity;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Toast;

public class MainActivity extends FragmentActivity {

private boolean showingBack;
private FragmentLeft left = new FragmentLeft();
private FragmentRight right = new FragmentRight();
private Context context;
private Handler handler;
private FlipAnimation flipAnimation;
private FlipAnimation backFlip;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    context = this;
    handler = new Handler(getMainLooper());

    getSupportFragmentManager().beginTransaction().add(R.id.fragment_container, right, "fragmentRight").commit();
    getSupportFragmentManager().beginTransaction().add(R.id.fragment_container, left, "fragmentLeft").commit();
    findViewById(R.id.flip).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            flipAnimation = new FlipAnimation(left.getView(), right.getView());
            backFlip = new FlipAnimation(left.getView(), right.getView());
            handler.removeCallbacks(rotate);
            handler.postDelayed(rotate, 100);
        }

    });
}

    private Runnable rotate = new Runnable() {

        @Override
        public void run() {
           //put a variable showingBack, do not rely on view properties to flip
            if (!showingBack) {
                //very important to flip both views, so that when the
                //left view goes to back and right view goes to front,
                //the right view finishes the rotation
                left.getView().startAnimation(flipAnimation);
                right.getView().startAnimation(flipAnimation);
                Toast.makeText(context, "flip", Toast.LENGTH_LONG).show();
                showingBack = true;
            } else {
                showingBack = false;
                backFlip.reverse();
                Toast.makeText(context, "backflip", Toast.LENGTH_LONG).show();
                //very important to flip both views, so that when the
                //right view goes to back and right view goes to front,
                //the left view finishes the rotation
                left.getView().startAnimation(backFlip);
                right.getView().startAnimation(backFlip);

            }
        }
    };

} 
```

这些是碎片

```
import android.os.Bundle;
import android.support.annotation.Nullable;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class FragmentRight extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        return inflater.inflate(R.layout.fragment_right, container,false);
    }
}

import android.os.Bundle;
import android.support.annotation.Nullable;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class FragmentLeft extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        return inflater.inflate(R.layout.fragment_left, container,false);
    }
} 
```

最后是视图本身

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    android:background="#ff151515"
    tools:context="com.example.flipviewtest.MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

    <FrameLayout
        android:id="@+id/fragment_container"
        android:layout_width="200dp"
        android:layout_height="200dp"
        android:layout_centerInParent="true" >
    </FrameLayout>

    <Button
        android:id="@+id/flip"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="flip" />

</RelativeLayout> 
```

片段左.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="#ffff0000"
     >

    <View
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#ff0ffff0"
        android:layout_margin="20dp" />

</LinearLayout> 
```

fragment_right.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ff00ff00"
    android:orientation="vertical" >

    <View
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_margin="10dp"
        android:background="#ff0000ff" />

</LinearLayout> 
```

注意一些取自 Flextra 和 @FMMobileFelipeMenezes 答案的代码

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-14T16:43:52.703

我建议阅读它的好教程。尽管它不如基于 Fragment 的 Android 教程那么好，但如果您想将动画分配给布局和视图以及在旧 API 上使用它，那么它值得一读并且很有用。

[使用 Android 的缩放动画模拟 3D 翻转](http://www.techrepublic.com/blog/android-app-builder/use-androids-scale-animation-to-simulate-a-3d-flip/)**

# magento - 如何在 Magento 中为显示目的和交易目的保留不同的货币？

> ID：16030670
> 
> 赞同：3
> 
> 时间：2013-04-16T06:59:11.277
> 
> 标签：magento, currency

我需要以英镑显示商店货币。但是对于支付网关 authorize.net，我需要以美元进行在线交易。所以我们决定设置显示货币英镑和基础货币美元。

我做了如下的事情，

标签 ：`General / Currency setup`

`Base Currency`： 美元

`Default Display Currency`: 英镑

`Allowed Currencies`: 美元、英镑

但在前端显示美元。

我只有一家店。那么可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T13:35:39.300

**您可以在 magento 中使用英语。**

> 打开 lib/Zend/Locale/Data/en.xml

寻找

> <货币类型="美元" >

添加代码：

> <符号>£</符号>

收盘前</货币>

# android - 意图和编辑文本问题

> ID：16030681
> 
> 赞同：4
> 
> 时间：2013-04-16T07:00:03.280
> 
> 标签：android, android-emulator

我基本上是在尝试创建一个包含 2 个活动的应用程序。在活动 1 中，用户可以在 2 个单独的编辑文本字段中输入 2 个值，我提供了一个微调器下拉项，用户可以使用它选择 2 个值中的任何一个。

如果用户选择选项为 1 并单击提交按钮，用户将显示第二个活动，其值将根据在先前活动中微调对象中选择的 id 显示。

就像如果用户选择 1 ，则显示第一个编辑文本框中的值，如果他选择 2 ，则显示第二个编辑文本框的值。

此外，当用户单击第二个活动中的提交按钮时，根据他在第二个活动的编辑文本字段中输入的值，它将显示在上一个活动的编辑文本框 1 或编辑文本框 2 中。

我无法理解为什么我的应用程序显示出奇怪的行为。请指导我。

第一个活动文件：

```
package spinnner.intents.understand;

    import android.app.Activity;
    import android.content.Context;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.View;
    import android.view.inputmethod.InputMethodManager;
    import android.widget.AdapterView;
    import android.widget.ArrayAdapter;
    import android.widget.EditText;
    import android.widget.Spinner;
    import android.widget.TextView;
    import android.widget.Toast;
    import android.widget.AdapterView.OnItemSelectedListener;

    public class TwoAppsActivity extends Activity {
        /** Called when the activity is first created. */
        String [] items = {"1","2"}; 
        //String ch;
        TextView tv;
        EditText et1,et2;
        Spinner spinner;    
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

             tv=(TextView) findViewById(R.id.txt);
            et1=(EditText) findViewById(R.id.edittxt1); // value 1
            et2=(EditText) findViewById(R.id.edittxt2); // value 2
            spinner=(Spinner) findViewById(R.id.spin1); // select

            // 

            Intent i3 = getIntent();
            if(i3.getStringExtra("spinner.intents.understand.value1")!=null)
            {
                et1.setText(i3.getStringExtra("spinner.intents.understand.value1"));
            }
            else if(i3.getStringExtra("spinner.intents.understand.value2")!=null)
            {
                et2.setText(i3.getStringExtra("spinner.intents.understand.value2"));
            }
            else
            {
                Toast.makeText(getApplicationContext(), "Enter some text ", Toast.LENGTH_LONG).show();
            }

         // spinner logic
            ArrayAdapter<String> as1 = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_spinner_dropdown_item, items);
            as1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            spinner.setAdapter(as1);
            spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

                public void onItemSelected(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {
                    // TODO Auto-generated method stub
                    tv.setText(items[arg2]);
                    Toast.makeText(getApplicationContext(), " You selected : "+items[arg2],Toast.LENGTH_LONG).show();
                }

                public void onNothingSelected(AdapterView<?> arg0) {
                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(), "You selected nothing", Toast.LENGTH_LONG).show();
                }
            });

            //
        }

        public void Submit(View v)
        {
            Intent i = new Intent(this,Second.class);
            startActivity(i);

            //str1 = et1.getText().toString();
            //Toast.makeText(getApplicationContext(), str1, Toast.LENGTH_LONG).show();

        //  str2 = et2.getText().toString();
            //Toast.makeText(getApplicationContext(), str2, Toast.LENGTH_LONG).show();

            //

            if(spinner.getSelectedItem().toString()=="1")
            {
                Toast.makeText(getApplicationContext(), "I am in 1st option", Toast.LENGTH_LONG).show();
                i.putExtra("spinner.intents.understand.value1", et1.getEditableText().toString()); 
                i.putExtra("spinner.intents.understand.Id1", "1");
            }
            else if(spinner.getSelectedItem().toString()=="2")
            {
                Toast.makeText(getApplicationContext(), "I am in 2nd option", Toast.LENGTH_LONG).show();
                i.putExtra("spinner.intents.understand.value2", et2.getEditableText().toString());
                i.putExtra("spinner.intents.understand.Id2", "2");
            }
            else
            {
                Toast.makeText(getApplicationContext(), "You selected nothing!!!", Toast.LENGTH_LONG).show();
            }

        }
    } 
```

第二个活动文件

```
 package spinnner.intents.understand;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.EditText;
    import android.widget.TextView;
    import android.widget.Toast;

    public class Second extends Activity{
          /** Called when the activity is first created. */
            TextView Tv;
            EditText Et;
            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.second);
                //
                Tv=(TextView) findViewById(R.id.txtS1);
                Et=(EditText) findViewById(R.id.edittxtS1);
                //

                Intent i1 = getIntent();                               

                if((i1.getStringExtra("spinner.intents.understand.Id1"))=="1")
                {
                    Toast.makeText(getApplicationContext(), "I am in value 1", Toast.LENGTH_LONG).show();               
                    Et.setText(i1.getStringExtra("spinner.intents.understand.value1"));             
                }           
                else if((i1.getStringExtra("spinner.intents.understand.Id2"))=="2")
                {
                    Toast.makeText(getApplicationContext(), "I am in value 2", Toast.LENGTH_LONG).show();
                    Et.setText(i1.getStringExtra("spinner.intents.understand.value2"));
                }
                else
                {
                    Toast.makeText(getApplicationContext(), "Some mismatch", Toast.LENGTH_SHORT).show();
                }

            }

            public void submit(View v)
            {
                Intent i2 = new Intent(this,TwoAppsActivity.class);
                startActivity(i2);
                if(i2.getStringExtra("Id1")=="1")
                {
                    i2.putExtra("spinner.intents.understand.value1", Et.getEditableText().toString());

                }
                else if(i2.getStringExtra("Id2")=="2")
                {
                    i2.putExtra("spinner.intents.understand.value2", Et.getEditableText().toString());

                }
                else
                {
                    Toast.makeText(getApplicationContext(), "No data to display", Toast.LENGTH_LONG).show();
                }
            }
    } 
```

主文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/txt"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <TextView
        android:id="@+id/txt1"
        android:text="Enter value 1:"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <EditText 
        android:id="@+id/edittxt1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

    <TextView
        android:id="@+id/txt2"
        android:text="Enter value 2:"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <EditText 
        android:id="@+id/edittxt2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

    <TextView 
        android:id="@+id/txt3"
        android:text="Select"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

    <Spinner 
        android:id="@+id/spin1"        
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <Button 
        android:id="@+id/btnsubmit1"
        android:text="Submit"
        android:onClick="Submit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

第二个活动 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView 
        android:id="@+id/txtS1"
        android:text="Value:"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

    <EditText 
        android:id="@+id/edittxtS1"        
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

    <Button 
        android:id="@+id/btnsubmit2"
        android:text="Submit"
        android:onClick="submit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

安卓清单 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="spinnner.intents.understand"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".TwoAppsActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity 
            android:name=".Second">            
        </activity>
    </application>

</manifest> 
```

如果我的代码看起来太乱了，我也愿意邮寄我的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:27:00.370

您不应该使用 == 或 != 来比较两个字符串。改用等于：

```
if(spinner.getSelectedItem().toString().equals("1")) 
```

问候。

# mysql - 更新Mysql中的数据

> ID：16030684
> 
> 赞同：-1
> 
> 时间：2013-04-16T07:00:14.907
> 
> 标签：mysql, ruby-on-rails, helpers

我的代码是这个

```
Profile.update_all(["is_active = ?, name = ?, geo_lat = ?, geo_long = ?, radius = ?, search_option = ?", 1, params[:profile_name],'null','null','null','st']) 
```

但它分配

> geo_lat=0

和

> geo_long=0

在我的数据库结构中，两者的默认值为 null，我想分配 null 请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:09:10.800

这里的问题是字符串'null'。

尝试以下操作：

```
Profile.update_all(["is_active = ?, name = ?, geo_lat = ?, geo_long = ?, radius = ?, search_option = ?", 1, params[:profile_name], nil, nil, nil, 'st']) 
```

还要检查您的迁移以查看默认值是否未设置为字符串“null”。

# image - 如何从产品详细信息页面获取自定义选项的图像到购物车页面

> ID：16030697
> 
> 赞同：0
> 
> 时间：2013-04-16T07:00:54.573
> 
> 标签：image, magento, xpath, cart

如何从产品详细信息页面获取自定义选项的图像到购物车页面。我当然可以获取图片下载链接、图片名称及其大小..但我无法获取图片路径以在购物车页面上显示图片。

尝试通过管理员为任何产品添加自定义选项图像然后浏览图像然后按添加到购物车您可以看到可下载链接但看不到图像..请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:49:59.703

```
Find this code on default.phtml on /app/design/frontend/base/default/template/checkout/cart/item/default.phtml

and replace with below code

<?php if ($_options = $this->getOptionList()):?>
        <dl class="item-options" style="width: 452px;">
            <?php foreach ($_options as $_option) :  ?>
            <?php $_formatedOptionValue = $this->getFormatedOptionValue($_option) ?>
            <dt><?php echo $this->htmlEscape($_option['label']) ?></dt>
             <?php if($_option['label'] == 'Photo'){
              $photo = $_option['value'];
              $photo = str_replace("<a", "<img width='100' height='100'  style='float: right;'", $photo);
              $photo = str_replace("target", "", $photo);
              $photo = str_replace("href", "src", $photo);
              echo $photo."<br>";
                ?>
                <?php  }else{  ?>
            <dd<?php if (isset($_formatedOptionValue['full_view'])): ?> class="truncated"<?php endif; ?>><?php echo $_formatedOptionValue['value'] ?>
                <?php if (isset($_formatedOptionValue['full_view'])): ?>
                <div class="truncated_full_value">
                    <dl class="item-options">
                        <dt><?php echo $this->htmlEscape($_option['label']) ?></dt>
                        <dd><?php echo $_formatedOptionValue['full_view'] ?></dd>
                    </dl>
                </div>
                <?php endif; ?>
            </dd>
            <?php } ?>
            <?php endforeach; ?>
        </dl>
        <?php endif;?> 
```

# java - 如何删除 Jar 文件中的文件夹？

> ID：16030704
> 
> 赞同：0
> 
> 时间：2013-04-16T07:01:16.260
> 
> 标签：java, jar, io, zip

我正在做有关操作 JAR 文件的作业。我可以删除 JAR 文件中的文件，但文件夹仍在其中。

如何删除它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-05-28T07:09:39.083

*   要删除 jar 文件中的文件夹（确保不需要的文件夹上有斜杠）：

```
zip -d file.jar unwanted_folder/ 
```

*   要删除文件夹和其中的所有文件：

```
zip -d file.jar unwanted_folder/\* 
```

[信息来源](https://fabianlee.org/2018/10/30/linux-using-zip-unzip-to-add-update-and-remove-files-from-a-java-jar-war/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:06:36.177

我没有代码来做这件事，但基本的想法很简单，应该以同样的方式翻译成几乎任何语言。jar 文件布局只是代表文件的一系列块（一个标头后面是压缩数据），最后是一个包含所有元数据的中央目录。这是过程：

在文件中向前扫描，直到找到要删除的第一个文件。在文件中向前扫描，直到找到您不想删除的第一个文件或点击中央目录。在文件中向前扫描，直到找到要删除的第一个文件或点击中央目录。将您在步骤 3 中找到的所有数据复制回您在步骤 2 中跳过的数据，直到您找到要删除的另一个文件或您点击中央目录。除非您已点击中央目录，否则请转到第 2 步。将中央目录复制到您停止复制的位置，省略已删除文件的条目并更改偏移量以反映您移动每个文件的程度。有关 ZIP 文件结构的所有详细信息，请参见[http://en.wikipedia.org/wiki/ZIP_%28file_format%29](http://en.wikipedia.org/wiki/ZIP_%28file_format%29)。

正如 bestsss 建议的那样，您可能希望将其复制到另一个文件中，以防止在发生故障时丢失数据。

# templates - 如何在play2.1的模板中有条件地在scala中赋值

> ID：16030708
> 
> 赞同：0
> 
> 时间：2013-04-16T07:01:23.747
> 
> 标签：templates, playframework

我在 scala 模板中做一些条件编码。告诉我如何将以下 java 逻辑写入 scala.html 模板。

```
String temp = "";
 if(!cityName.equals(temp)){
         temp=cityName;
    }
 else{
        //do something.. 
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:53:57.463

Scala 视图允许您使用[`@defining`块](http://www.playframework.com/documentation/2.1.1/JavaTemplates)定义一些变量（请参阅可重用值），但是它不允许您这样`re-assignate`做，因此您的伪代码将无法按预期工作。

在这种情况下，您需要在模型中编写自定义 getter，这将返回一个有效值，而不是在视图中使用临时值。您还可以访问任何静态 Java 方法，该方法将根据某些条件处理您的传入字符串。

我必须说，我不知道你到底想达到什么目标，但*我认为*，可以通过上面提出的解决方案来解决。

# android - 打开共享对话框以使用 ACTION_SEND 共享文件

> ID：16030711
> 
> 赞同：2
> 
> 时间：2013-04-16T07:01:31.397
> 
> 标签：android

我知道如何使用 ACTION_SEND 分享 A 文本。

```
Intent sendIntent = new Intent();
sendIntent.setAction(Intent.ACTION_SEND);
sendIntent.putExtra(Intent.EXTRA_TEXT, "Download Link https://play.google.com/store/apps/details?id=com.mtracker2051");
sendIntent.setType("text/plain");
startActivity(Intent.createChooser(sendIntent, "Share This App")); 
```

我想使用 ShareDialog 共享一个文本文件。我该怎么做。

我在这里读到了这个 [http://developer.android.com/training/sharing/send.html](http://developer.android.com/training/sharing/send.html) 但从这个链接中得到的信息不多。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T09:31:16.227

```
String fileName = ...
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 
emailIntent.setType("*/*");
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[] {"Share File"}); 
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "File Name");   
emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new File(fileName)));
startActivity(Intent.createChooser(emailIntent, "Share File")); 
```

# html - 如何使用 createJS 将播放头的控制权从影片剪辑发送回父时间轴？

> ID：16030713
> 
> 赞同：0
> 
> 时间：2013-04-16T07:01:39.693
> 
> 标签：html, flash, actionscript, createjs

我正在为游戏制作一个多部分的介绍性动画。它在我在 Flash 中预览时有效，但在我使用 CreateJS 工具包导出以获取 HTML5 输出时无效。

在我场景的时间线上，我有 this.stop(); 在第一帧上，以及一个包含几秒钟动画的影片剪辑（随着我们的发展，它的长度可能必须改变）。

我的第二帧被标记为“sc2”，我希望动画在第一个动画剪辑完成时在那里播放。为了做到这一点，我进入了第一个电影剪辑并将其放在最后一帧：

```
_parent.gotoAndPlay("sc2"); 
```

这在 Flash 中工作正常，但也许我不能在 JS 中使用 _parent 对象？是否有另一种方法来访问控制流或另一种方法来实现这一点？我的目标是避免在主时间轴上制作动画，并通过在那里编写脚本来控制流程，这样如果动画各个部分的长度发生变化，我就不必在几个部分中更改各个部分的开始和结束帧地方。

# testing - TestLink 安装期间的数据库访问错误

> ID：16030715
> 
> 赞同：1
> 
> 时间：2013-04-16T07:01:40.750
> 
> 标签：testing, installation, testlink

我是 testlink 的新手。我只是在我的本地主机上使用 xampp 创建 testlink 安装。在安装 testlink 期间。我收到以下错误

```
 ============================================================================== 
     DB Access Error - debug_print_backtrace() OUTPUT START 
     ============================================================================== 
    #0  database->exec_query() called at [C:\xampp\htdocs\testlink\lib\functions\logger.class.php:852]
    #1  tlEvent->writeToDB() called at [C:\xampp\htdocs\testlink\lib\functions\logger.class.php:986]
    #2  tlDBLogger->writeEvent() called at [C:\xampp\htdocs\testlink\lib\functions\logger.class.php:548]
    #3  tlTransaction->writeEvent() called at [C:\xampp\htdocs\testlink\lib\functions\logger.class.php:469]
    #4  tlTransaction->add() called at [C:\xampp\htdocs\testlink\lib\functions\logging.inc.php:68]
    #5  tLog() called at [C:\xampp\htdocs\testlink\lib\functions\database.class.php:208]
    #6  database->exec_query() called at [C:\xampp\htdocs\testlink\lib\functions\logger.class.php:705]
    #7  tlEventManager->deleteEventsFor() called at [C:\xampp\htdocs\testlink\lib\functions\logger.class.php:132]
    #8  tlLogger->deleteEventsFor() called at [C:\xampp\htdocs\testlink\login.php:215]
    #9  renderLoginScreen() called at [C:\xampp\htdocs\testlink\login.php:198]
    #10 doBlockingChecks() called at [C:\xampp\htdocs\testlink\login.php:34]
     ============================================================================== 
     ============================================================================== 
     DB Access Error - debug_print_backtrace() OUTPUT START 
     ============================================================================== 
    #0  database->exec_query() called at [C:\xampp\htdocs\testlink\lib\functions\logger.class.php:705]
    #1  tlEventManager->deleteEventsFor() called at [C:\xampp\htdocs\testlink\lib\functions\logger.class.php:132]
    #2  tlLogger->deleteEventsFor() called at [C:\xampp\htdocs\testlink\login.php:215]
    #3  renderLoginScreen() called at [C:\xampp\htdocs\testlink\login.php:198]
    #4  doBlockingChecks() called at [C:\xampp\htdocs\testlink\login.php:34]
     ============================================================================== 
```

我用谷歌搜索了很多，但我找不到合适的答案。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-30T07:29:38.763

我使用以下步骤解决了这些问题。为 mysql 使用了正确的凭据（用户名、密码），并为 testlink 安装使用了相同的凭据。

如果您的凭证是正确的，并且直到您遇到相同的问题，请执行以下步骤。

1.  导航到 \testlink-code-testlink_1_9\install\sql\mysql 文件夹并打开文件“testlink_create_tables.sql”
2.  将 creation_ts datetime NOT NULL default 'CURRENT_TIMESTAMP' 修改为 creation_ts datetime NOT NULL default '2016-11-30 11:26:36'。
3.  不应有两列默认为“CURRENT_TIMESTAMP”。如果可用，请更改默认值“2016-11-30 11:26:36”而不是“CURRENT_TIMESTAMP”
4.  提供适当的数据库凭据并继续。希望它会奏效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:07:36.457

这得到了解决。当我使用相同的凭据使用 xampp 安装 testlink 时，我安装了带有凭据 username:"root" 和 password: (blank) 的 mysql 。收到此错误“数据库访问错误”。最后我卸载了 mysql 和 xampp 。

使用 mysql 的有效凭据（而不是使用“空白”作为密码）并使用相同的凭据进行使用 xampp 的 testlink 安装。

所以这是由于“数据库登录凭据”引起的

# sql-server - 如何在 SSAS 多维数据集中找到“错误”的计算成员

> ID：16030718
> 
> 赞同：0
> 
> 时间：2013-04-16T07:01:53.540
> 
> 标签：sql-server, ssas

有谁知道让 BIDS 或 SSAS 自动检查已声明的任何计算成员的正确性的方法？我们有很多，并且度量名称已经过一些重命名，现在我们在运行时不断收到错误，名称不再匹配。

我很惊讶似乎没有检查正在计算的成员的正确性。有谁知道强制这种检查的方法，或者我们可以用来预先检查的通用策略？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-21T11:36:56.033

Silvere 提供了一个简单的控制台应用程序解决方案，用于[在此处检查分区大小](http://slhermite.blogspot.co.uk/2012/01/get-size-of-every-partition-of-ssas.html)

# asp.net - ASP.Net 上的报告查看器

> ID：16030720
> 
> 赞同：0
> 
> 时间：2013-04-16T07:01:59.023
> 
> 标签：asp.net, visual-studio-2010

我有一个 ASP 网页有两个文本框用于用户名和密码以及登录按钮和报告查看器

当用户输入正确的用户名和密码（由数据库检查）时，需要显示报告。

我试图让报告查看器的可见性一开始是错误的，并在用户名和密码正确时使其为真，但它显示没有报告的报告查看器

报告必须在页面加载时显示是正确的

我想知道两件事，如果我能做出我想要的，那么如何>？

如果不是，我如何告诉按钮用户名和密码是否正确转到另一个页面？

# paging - 将加载更多对齐到底部 sencha touch 2.1

> ID：16030721
> 
> 赞同：0
> 
> 时间：2013-04-16T07:01:59.337
> 
> 标签：paging, vertical-alignment, sencha-touch-2.1

我需要将**负载更多**地对齐到底部。请看下面我的屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/BtQaK.png)

CoupoonListView.js

```
 Ext.define('bluebutton.view.BlueButton.CouponList', {
        extend: 'Ext.dataview.DataView',
        xtype: 'couponlistcard',
        requires: [
            'Ext.field.Select',
            'Ext.field.Search',

            'Ext.plugin.ListPaging',
            'Ext.plugin.PullRefresh',
            'bluebutton.store.BlueButton.CouponList1'

        ],
        config: {

            styleHtmlContent: true,
            scrollable: 'vertical',

             store : { xclass : 'bluebutton.store.BlueButton.CouponList1'},

            id :'couponlist',
              masked: {
                xtype: 'loadmask',
                message: 'loading...'
            }, // masked
               plugins: [

//                            { xclass: 'Ext.plugin.PullRefresh',
//                                pullRefreshText: 'Pull down for more updates!',
//                                refreshFn:function(loaded, arguments){
//                                 
//                                   

//                                }
//                             
//                    
//                            },

                          { 
                               xclass: 'Ext.plugin.ListPaging',
//                                 autoPaging: true,

                          },

               ],

            itemTpl: Ext.create(
                'Ext.XTemplate',
                  '<div style="float:left;width=33%;margin:2px;"><div class="demo-weather">',
                            '<tpl for=".">',
                                '<div class="day">',
                                      '<div style="width:100%;font-weight: bold; text-decoration: underline;">{couponId}</div>',
                                          '<div style="margin-bottom: 40px; margin-left: 5px;">',
//                                            '<img src="{imgUrl}"  height= "100px" width="100%"/>',
                                         '</div>',
                                         '<div style="width:100%;font-weight: bold;">{couponName}</div>',
                                          '<div style="width:100%;font-weight: bold;">Point: {amount}</div>',
                                         '<input type="button" name="{couponId}" value="Purchase" ' +
                                            'style="padding:13px;"/>' ,

                                '</div>',
                            '</tpl>',
                        '</div></div>'

            ),

        },

    }); 
```

应用程序.Scss

```
//--GroupBy List  --
.tweet-wrapper {

  h2 { font-weight: bold; padding-bottom: 3px; }
  img { border-radius: 5px; float: left; }
  .tweet {
    font-size: 63%;
    margin-left: 60px;
    min-height: 40px;

  }
  .posted { float: right; }
}

//--Coupon List--
.demo-weather {
  text-align: center;
}
.day {
  display: inline-block;
  background-color: #f9f9f9;
  color: rgba(0, 0, 0, .6);
  text-shadow: #fff 0 1px 0;
  width: 12em;
  text-align: center;
  @include border-radius(15px);
  @include box-shadow(inset 0 0 4px #888);
  box-shadow: inset 0 0 4px #888;
  padding: 1em;
  margin: .5em;

  .x-android & {
    @include box-shadow(none);
  }
}
.date {
  font-size: .8em;
}
.icon img {
  @include border-radius(10px);
  margin: .6em;
  width: 5em;
}
.temp {
  margin-top: .2em;
  display: block;
  font-size: 2.2em;
  line-height: .5em;
}
.temp_low {
  display: inline;
  font-size: .5em;
  color: rgba(30, 30, 30, .5);
}

.x-tabbar.x-docked-top .x-tab .x-button-label, .x-tabbar.x-docked-top .x-tab .x-hasbadge .x-badge, .x-hasbadge .x-tabbar.x-docked-top .x-tab .x-badge {
font-size: .99em;

} 
```

请指导我解决方案。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T07:26:32.250

弄清楚了。

你错过了这个： **`infinite: true`**

只需包含它，它就会正常工作。加载更多按钮将移至底部。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:31:39.127

您是否尝试将 ListPaging 插件的停靠配置设置为底部？例如：

```
{
    xclass: 'Ext.plugin.ListPaging',
    docked:'bottom'
} 
```

# r - 如何命名 data.frame 的未命名的第一列

> ID：16030728
> 
> 赞同：16
> 
> 时间：2013-04-16T07:02:36.773
> 
> 标签：r, dataframe

我有一个看起来像这样的数据框：

```
> mydf
                   val1     val2
hsa-let-7a         2.139890 -0.03477569
hsa-let-7b         2.102590  0.04108795
hsa-let-7c         2.061705  0.02375882
hsa-let-7d         1.938950 -0.04364545
hsa-let-7e         1.889000 -0.10575235
hsa-let-7f         2.264296  0.08465690 
```

请注意，从 3 列中，只有第 2 和第 3 列是名称。我想要做的是命名第一列（加上重命名第二和第三）。

但是为什么这个命令失败了？

```
colnames(mydf) <- c("COL1","VAL1","VAL2"); 
```

正确的方法是什么？

它给了我：

```
Error in `colnames<-`(`*tmp*`, value = c("COL1", "VAL1", "VAL2" :
  'names' attribute [3] must be the same length as the vector [2] 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-16T07:19:49.003

您可以将行名称加入数据框，如下所示：

```
mydf <- cbind(rownames(mydf), mydf)
rownames(mydf) <- NULL
colnames(mydf) <- c("COL1","VAL1","VAL2") 
```

或者，一步：

```
setNames(cbind(rownames(mydf), mydf, row.names = NULL), 
         c("COL1", "VAL1", "VAL2"))
#         COL1     VAL1        VAL2
# 1 hsa-let-7a 2.139890 -0.03477569
# 2 hsa-let-7b 2.102590  0.04108795
# 3 hsa-let-7c 2.061705  0.02375882
# 4 hsa-let-7d 1.938950 -0.04364545
# 5 hsa-let-7e 1.889000 -0.10575235
# 6 hsa-let-7f 2.264296  0.08465690 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-05-14T15:11:30.280

这也可能适用于您的情况，

```
mydf <- cbind(rownames(mydf),mydf)
rownames(mydf) <- NULL
colnames(mydf) <- c(names(mydf)) #to not write all the column names

colnames(mydf)[1] <- "name.of.the.first.column" 
names(mydf) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-14T15:19:15.057

如果有人想`tidyverse`在他/她的管道中使用解决方案，这可行

```
rownames_to_column(mydf, var = "var_name") 
```

该功能包含在`tibble`包中

# javascript - 在jquery中包含html标签

> ID：16030730
> 
> 赞同：-5
> 
> 时间：2013-04-16T07:02:39.693
> 
> 标签：javascript, jquery, html

我正在尝试使用 jquery 添加嵌套的 html 标签...如何在 jquery 样式中为以下代码包含带有 span 的 html 标签？

```
<adiv>               
    <bdiv id="9" class="class1">
        <span class="class2"> jquery CSS<span>
    </bdiv>     
</adiv> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:32:33.030

没有名为 adiv 和 bdiv 的标签，但如果你真的想将它们添加到你的 html 中，你可以这样做；

```
var adiv = $('<adiv>')
var bdiv = $('<bdiv>',{id:9, class:'class1'})
var span = $('<span>',{class:'class2', text:'jquery CSS'})

span.appendTo(bdiv);
bdiv.appendTo(adiv); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:07:21.347

我认为你的意思是这样的：

```
$(".class1").find("span.class2").html("<strong>HTML</strong> added to the inner <em>span</em>"); 
```

但是`adiv`and`bdiv`不是语义标记，只需使用`div`.

# ruby-on-rails - 安装 spree_mail gem 时出错。spree_mail (= 0.40.0.4) 红宝石取决于

> ID：16030736
> 
> 赞同：0
> 
> 时间：2013-04-16T07:02:54.467
> 
> 标签：ruby-on-rails, spree, gemfile

我正在尝试将 spree_mail gem 添加到我的 Spree 项目中。

& 当我运行“捆绑安装”时

我收到这条消息：

Bundler 找不到 gem "devise" 的兼容版本：在 Gemfile：spree_mail (= 0.40.0.4) ruby​​ 依赖于 devise (= 1.2.rc) ruby

```
spree_auth_devise (>= 0) ruby depends on
  devise (2.2.3) 
```

Bundler 找不到 gem "spree_core" 的兼容版本：在 Gemfile：spree_mail (= 0.40.0.4) ruby​​ 取决于 spree_core (= 0.30.1) ruby

```
spree_mail (= 0.40.0.4) ruby depends on
  spree_core (1.3.2) 
```

我的宝石文件

```
source 'http://rubygems.org'

gem 'spree_i18n', :git => "git://github.com/spree/spree_i18n.git"

gem 'rails', '3.2.13'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger'
gem 'spree', '1.3.2'
gem 'spree_gateway', :github => 'spree/spree_gateway', :branch => '1-3-stable'
gem 'spree_auth_devise', :github => 'spree/spree_auth_devise', :branch => '1-3-stable'
gem 'spree_mail', '0.40.0.4' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:30:01.377

虽然扩展指定`spree_core >= 0.30.1`为依赖项，但如果不进行修改，这几乎肯定不会与 spree 1.3.2 一起使用。

如果你查看这个 gem 的[github 网络](https://github.com/citrus/spree_mail/network)，可能会有一个更新的 fork 你可以使用。或者，我建议将[Mailchimp 之](http://mailchimp.com/)类的产品用于您的邮件列表，至少还有一个最新的[扩展名](https://github.com/sbeam/spree-mail-chimp)。

# android - Android - 从 Webview 调用 Java

> ID：16030737
> 
> 赞同：3
> 
> 时间：2013-04-16T07:03:02.570
> 
> 标签：android, android-webview

我想从 Webview 调用 Java。

我有`JavaScriptInterface`以下：

```
class JavaScriptInterface{

    private Activity activity;

    public JavaScriptInterface(Activity activiy) {
        this.activity = activiy;
    }

    public void open(String message){
        //do something
    }

} 
```

我加`JavaScriptInterface`

```
JavaScriptInterface jsInterface = new JavaScriptInterface(this);
webView.getSettings().setJavaScriptEnabled(true);
webView.addJavascriptInterface(jsInterface, "JSInterface"); 
```

在我的 HTML 中，我有这个 onclick 事件：

```
onclick="window.JSInterface.open('hi');" 
```

我也试过：

```
onclick="JSInterface.open('hi');" 
```

我在 logcat 中有这个错误：

```
04-16 14:55:15.829: W/dalvikvm(721): JNI WARNING: jarray 0x4050cf68 points to non-array object (Ljava/lang/String;)
04-16 14:55:15.829: I/dalvikvm(721): "WebViewCoreThread" prio=5 tid=9 NATIVE
04-16 14:55:15.829: I/dalvikvm(721):   | group="main" sCount=0 dsCount=0 obj=0x40521218 self=0x1f6cf8
04-16 14:55:15.829: I/dalvikvm(721):   | sysTid=729 nice=0 sched=0/0 cgrp=default handle=2059824
04-16 14:55:15.839: I/dalvikvm(721):   | schedstat=( 5717972154 3300872155 567 )
04-16 14:55:15.839: I/dalvikvm(721):   at android.webkit.WebViewCore.nativeTouchUp(Native Method)
04-16 14:55:15.839: I/dalvikvm(721):   at android.webkit.WebViewCore.nativeTouchUp(Native Method)
04-16 14:55:15.839: I/dalvikvm(721):   at android.webkit.WebViewCore.access$3300(WebViewCore.java:53)
04-16 14:55:15.839: I/dalvikvm(721):   at android.webkit.WebViewCore$EventHub$1.handleMessage(WebViewCore.java:1158)
04-16 14:55:15.863: I/dalvikvm(721):   at android.os.Handler.dispatchMessage(Handler.java:99)
04-16 14:55:15.869: I/dalvikvm(721):   at android.os.Looper.loop(Looper.java:130)
04-16 14:55:15.869: I/dalvikvm(721):   at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:629)
04-16 14:55:15.869: I/dalvikvm(721):   at java.lang.Thread.run(Thread.java:1019)
04-16 14:55:15.869: E/dalvikvm(721): VM aborting 
```

如何解决？或者另一种方式来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:18:41.157

1.  您需要通过设置在您的 WebView 中启用 Javascript

    ```
    final WebView myWebView = (WebView) findViewById(R.id.webview);
    myWebView.setVerticalScrollBarEnabled(false);
    myWebView.setHorizontalScrollBarEnabled(false);
    WebSettings webSettings = myWebView.getSettings();
    webSettings.setJavaScriptEnabled(true);
    webSettings.setJavaScriptCanOpenWindowsAutomatically(true); 
    ```

2.  您需要在 HTML DOM 中加载 JS。

    ```
    JsInterface jsInterface = new JsInterface();
    jsInterface.wordDef = content;
    myWebView.addJavascriptInterface(jsInterface, "interfaces");
    myWebView.loadUrl("file:///android_asset/some.html"); 
    ```

3.  从 HTML/JS 调用你的界面

    ```
    /**JAVA CODE **/
    public class JsInterface {
     public String someString;
     Context mContext;

     public void JsInterface(Context c){
       mContext = c;
     }

     public String someFunction(){
      Log.v("JSInterface", ""+someString);
      return someString;
     }
    }

    /* JS Code */
    function addData(){
        var data = interfaces.someFunction();
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T02:51:40.237

也许有点晚了，但是...

如果您正在使用 Gingerbread（就像我正在做的那样），由于该操作系统版本中的 MEGAFAIL（错误），您会遇到此错误。请阅读这个解释如何解决这个问题 [http://www.jasonshah.com/handling-android-2-3-webviews-broken-addjavascriptinterface/](http://www.jasonshah.com/handling-android-2-3-webviews-broken-addjavascriptinterface/)

简而言之，您不能在 Android 2.3 中使用本机界面。相反，您需要在航班上注入 JavaScript 以使用 window.location = "native://somemethod" 提供本机调用桥接，然后覆盖 WebClient 类的 ShouldOverrideUrlLoading 以处理本机调用。

# multithreading - 在 Windows 上启动单独的核心任务过程需要多少时间？

> ID：16030749
> 
> 赞同：0
> 
> 时间：2013-04-16T07:03:38.517
> 
> 标签：multithreading, winapi

假设我有一个程序需要一毫秒来运行和完成。我想在 Windows 上的一个单独的核心上启动它——在一个单独的线程上启动这样的例程需要多少时间——这个延迟是 0.001 毫秒吗？0.1 毫秒，? 1 毫秒？需要多长时间

# java - 有什么方法可以在android中强制执行命名标准？

> ID：16030751
> 
> 赞同：0
> 
> 时间：2013-04-16T07:03:45.867
> 
> 标签：java, android, xml, naming-conventions

我知道[http://omnidroid.googlecode.com/svn/tools/Eclipse_Formatter-ITP_Conventions.xml](http://omnidroid.googlecode.com/svn/tools/Eclipse_Formatter-ITP_Conventions.xml)可以导入我的 Android 项目 Formatter ，但它不强制执行命名约定标准。我知道每个项目有很多标准可用，但我宁愿有规则来确保它。是否可以将另一个 XML 文件导入我的格式化程序以确保这样？[https://github.com/iamshanedoyle/Android-CodingConvention](https://github.com/iamshanedoyle/Android-CodingConvention)页面末尾的资源样式规则之类的东西会很棒，但我真的不知道如何将其编码到 XML 文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:37:58.080

Formatter 只能帮助您保持格式化。

还要检查项目配置的代码样式部分，如变量前缀和后缀；这些有助于将 Content Assist 与 getter 一起使用：如果您有一个名为的成员`m_x`并且前缀设置为您在按下 时`m_`会得到一个建议；没有它，你会得到一个有趣的 getM_x() 建议。`getX()/setX(T)``Ctrl+Space`

您的问题的最佳解决方案可能是为您的项目设置 PMD/Checkstyle，如果提交了无效代码，则在 CI 中构建失败。

我有时会将所有这些设置在一起，因此 Formatter/Code Style 有助于编写符合 PMD/Checkstyle 规则的代码。此外，我在 Eclipse 中设置了 Save Actions，这样我就不必反复按`Ctrl+Shift+F`and`Ctrl+Shift+O`等，只需一个简单`Ctrl+S`的工作即可。

# java - java中的简单迷宫游戏

> ID：16030753
> 
> 赞同：0
> 
> 时间：2013-04-16T07:04:02.557
> 
> 标签：java, maze

我正在用java创建一个简单的迷宫游戏。该代码读取数据文件并将其分配给`String array`. 玩家输入他或她想要进入的方向，每个位置包含一定数量的`points (0, 1, or 2)`对应于`obstacleNumber (0, 1, or 2)`. 我想跟踪分数以及玩家移动的次数，但我不知道在哪里调用我的方法以确保计数正确。如果这是一个非常愚蠢的问题，我很抱歉，但我是 Java 新手！

*数组已正确填充，但我无法计算移动和点数。*

```
 import java.util.*; 
    import java.io.File;

    public class Program12
     {

 static public void main( String [ ] args ) throws Exception
 {

     if(args.length != 1) {
         System.out.println("Error -- usage is: java Lab11 roomData.txt"); 
         System.exit(0); 
     }

    File newFile = new File(args[0]); 
    Scanner inputFile = new Scanner(newFile);       

    int numberOfRows = inputFile.nextInt();
    int numberOfColumns = inputFile.nextInt();  

    Room[][] game; 

    game = new Room[numberOfRows][numberOfColumns]; 
    int rowNumber = 0; 
    int columnNumber = 0; 

    int moves = 0;
    int points = 0;

    for(int i = 0; i < numberOfRows; i++) 
    {
        for (int j = 0; j < numberOfColumns; j++) 
        {
            String obstacle = inputFile.nextLine(); 
            int obstacleNumber = inputFile.nextInt(); 

            Room room = new Room(obstacle, obstacleNumber); 

            game[i][j] = room;

        }
        System.out.println(); 
        countPoints(obstacleNumber, points);

    }

    while(true) 
    {
        printPlayerLocation(numberOfRows, numberOfColumns, rowNumber, columnNumber);

        System.out.println();
        System.out.print("Enter up, down, left, or right to move:  ");
        Scanner userInput = new Scanner(System.in);
        String in = userInput.nextLine();
        if(in.equals("left") || in.equals("right") || in.equals("up") || in.equals("down"))
        {
            if (in.equalsIgnoreCase("up"))  
            { 
                rowNumber = rowNumber - 1; 
            } 

            if (in.equalsIgnoreCase("down")) 
            {           
                rowNumber = rowNumber + 1; 
            } 

            if (in.equalsIgnoreCase("left"))  
            {   
                columnNumber = columnNumber - 1;  
            } 

            if (in.equalsIgnoreCase("right"))  
            {   
                columnNumber = columnNumber + 1; 
            }
        }
        else
        {
            System.out.println("Input invalid! Please enter up, down, left, or right.");
        }

        try 
        {
            System.out.println(game[columnNumber][rowNumber].toString());
        }

        catch (ArrayIndexOutOfBoundsException e)
        {
            System.out.println("You cannot leave the boardwalk during the hunt! Please start over.");
            System.exit(0);     
        }

        countMoves(in, moves);
        //countPoints(obstacleNumber, points);
    }        
}

    public static void printPlayerLocation(int numberOfRows, int numberOfColumns, int rowNumber, int columnNumber)
    {
        System.out.println();
        System.out.print("***** PLAYER LOCATION *****");
        String[][] game = new String[numberOfRows][numberOfColumns];
        for (int i = 0; i < numberOfRows; i++)
        {
            for (int j = 0; j < numberOfColumns; j++)
            {
                game[i][j] = "*";
            }   
        }

        game[rowNumber][columnNumber] = "P";

        for (int i = 0; i < numberOfRows; i++)
        {
            System.out.println();
            for (int j = 0; j < numberOfColumns; j++)
            {
                System.out.printf("%-5s", game[i][j]);
            }   
        }
        System.out.println();
    }

    //doesn't correctly count the moves
    public static void countMoves(String in, int moves)
    {
        if(in.equals("left") || in.equals("right") || in.equals("up") || in.equals("down"))
        {
            moves++;
        }
        System.out.println("You have used " + moves + " moves.");
    }

    //doesn't correctly count the points
    public static void countPoints(int obstacleNumber, int points)
    {
        if(obstacleNumber == 0)
        {
            points = points;
        }
        if(obstacleNumber == 1)
        {
            points++;
        }
        if(obstacleNumber == 2)
        {
            points = points + 2;
        }
        System.out.println("You have obtained " + points + " points so far. Keep hunting!");
    } 
```

数据文件有数组的大小（4 4）和一个障碍物编号和障碍物

```
 0 this obstacleNumber would award 0 points
    1 this obstacleNumber would award 1 point
    2 this obstacleNumber would award 2 points 
```

16 次填充数组。

我希望示例输出打印玩家位置（它正确），要求用户输入一个方向（它正确），打印数据文件中的文本（再次已经完成），然后打印已经使用的动作以及玩家到目前为止获得的点数。

您如何正确计算用户输入“ `up, down, right, or left`”的次数以及用户到目前为止获得了多少分？提前感谢您的帮助，我真诚地感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:52:53.150

移动计数不正确，因为 countMoves 不会增加变量从主函数移动。如果你这样做：

```
System.out.println(moves);
countMoves(in, moves);
System.out.println(moves); 
```

您会看到该值没有改变。因此，您可以向 countMoves 添加一个返回值并使用它进行 assingn 移动：

```
moves = countMoves(in,moves); 
```

或者你可以在这里增加动作：

```
if(in.equals("left") || in.equals("right") || in.equals("up") || in.equals("down"))
    {
        moves++;
        if (in.equalsIgnoreCase("up"))  
        {

            rowNumber = rowNumber - 1; 
        } 

        if (in.equalsIgnoreCase("down")) 
        {           
            rowNumber = rowNumber + 1; 
        } 

        if (in.equalsIgnoreCase("left"))  
        {   columnNumber = columnNumber - 1;  
        } 

        if (in.equalsIgnoreCase("right"))  
        {   columnNumber = columnNumber + 1; 
        }
    } 
```

我认为与积分相同。线

```
points = points; 
```

只有当您有一个可以获取点值但分配一个具有自己值的变量的类变量才有意义时才有意义。

所以也许添加一个返回到 countPoints 并用它分配点：

```
points = countPoints(obstacleNumber, points); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:56:49.140

在 Java 中，方法的参数**总是** [按值传递](http://en.wikipedia.org/wiki/Pass_by_value#Call_by_value)。但是，它可能会[与对象混淆](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)。但是对于像这样的原始类型，`int`它非常简单。对于函数`countMoves`，`countPoints`您仅分别给出`moves`and的值`points`，而不是它们的引用。也就是说，这些方法实际上与另一个变量一起工作。该变量被初始化为您提供的值，您可以根据需要更改它，*但对该变量所做的更改仅对方法可见*。因此，为了使更改对外部变量可见，您必须重置它们的值。例如，您可以这样做：

```
public static int countMoves(String in, int moves) {
       //... change the value of moves as you want
       return moves; //return the new value
} 
```

然后使用如下方法：

```
moves = countMoves(in, moves); 
```

其中 set 变量是您在 main.xml 中定义的变量。类似地对于`countPoints`. 另一种可能性是在类中定义`moves`and并使方法方法直接修改这些变量而不传递它们，例如：`points``Program12``count`

```
public static void countMoves(String in) {
    moves = ...
} 
```

在这种情况下，`moves`定义的移动对`Program12`是可见的`countMoves`，因此您可以直接更改所需的变量；无需重置它。

--

不过大不过。您拥有的代码相当[意大利面条](http://en.wikipedia.org/wiki/Spaghetti_code)。您应该考虑如何更好地将代码结构化和划分为密切相关的逻辑单元。在面向对象编程中，您使用类来完成。例如，您可以定义一个名为的类`GameState`来保存变量`moves`或`points`您需要的任何其他内容，并在其中定义`count`方法或其他方法来修改游戏的统计信息。不要让`main`方法定义程序的逻辑。它应该仅用于读取输入以初始化某种类`Game`并写入以输出`Game`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T07:48:22.403

我可能在这里错了（一大早......）但我猜你总是得到相同的*动作*和*积分*值？这是因为您没有增加实际*move*和*points*的值。当您将 Int 作为参数发送给方法时，您不会发送指向 Int 的指针，而是发送它的副本，该副本将由该方法使用，然后在离开它时将其删除。您需要在增加值后返回*移动*和*点数*或将它们作为静态属性。尝试这样做：

```
...
moves = countMoves(String in, int moves);
...

public static int countMoves(String in, int moves) {
    if(in.equals("left") || in.equals("right") || in.equals("up") || in.equals("down")) {
        moves++;
    }
    System.out.println("You have used " + moves + " moves.");
    return moves;
} 
```

或者您可以在识别移动方向时增加它们（这更有效，因为您不必重新检查移动是否有效）：

```
if (in.equalsIgnoreCase("up")) { 
    rowNumber = rowNumber - 1; 
    moves++;
}
... 
```

**编辑**
点问题：
由于您没有发布 Room 是如何实现的，我只是即兴创作，但我认为它应该看起来像这样：

```
...  
points = countPoints(game[rowNumber][columnNumber].getObstacleNumber(), points);
... 
```

并将 countPoints() 更改为：

```
public static int countPoints(int obstacleNumber, int points) {
        if(obstacleNumber == 0) points = points;
        if(obstacleNumber == 1) points++;
        if(obstacleNumber == 2) points += 2;

        System.out.println("You have obtained " + points + " points so far. Keep hunting!");
        return points;
    } 
```

或者只是（只要您知道输入是正确的）：

```
public static int countPoints(int obstacleNumber, int points) {
        points += obstableNumber;
        System.out.println("You have obtained " + points + " points so far. Keep hunting!");
        return points;
    } 
```

# javascript - 如何使这样的 jquery 声明更紧凑？

> ID：16030759
> 
> 赞同：0
> 
> 时间：2013-04-16T07:04:23.170
> 
> 标签：javascript, jquery, refactoring, jeditable

我对大约 30-40 个不同类型的字段使用 jeditable，这就是为什么我必须编写一些块

```
$(".editable-...type of element...").editable(method, {parameters}) 
```

对于我在表单中拥有的不同类型的元素（字符串、整数、不同的下拉菜单）。例如，这是字符串的一个：

```
$(".editable-jedit-string").editable("/Controller/Method",
    {
        submitdata: {
            ItemId: '@ViewData["ItemId"]'
        },
        cssclass: 'inherit',
        indicator: 'wird gespeichert...',
        style: 'display:inline',
        height: '15px',
        width: '150px',
        placeholder: '<span class="muted">Zum Bearbeiten doppelklicken...</span>',
        tooltip: 'Zum Bearbeiten doppelklicken...',
        event: 'dblclick',
        submit: '<button class="btn btn-mini btn-primary btn-forced-margin" type="submit" >OK</button>'
    }); 
```

和下拉

```
**$(".editable-jedit-string-welle")**.editable("/Controller/Method",
    {
        submitdata: {
            ItemId: '@ViewData["ItemId"]'
        },
        **data: " {'A':'A','B':'B','C':'C'}",**
        type: "select",
        cssclass: 'inherit',
        indicator: '<span class="muted">wird gespeichert...</span>',
        style: 'display:inline',
        height: '15px',
        **width: '15px',**
        placeholder: '<span class="muted">Zum Bearbeiten doppelklicken...</span>',
        tooltip: 'Zum Bearbeiten doppelklicken...',
        event: 'dblclick',
        submit: '<button class="btn btn-mini btn-primary btn-forced-margin" type="submit" >OK</button>'
    }); 
```

因此，大多数参数一直重复，而有些参数（我在这里尝试将它们加粗，但它们用星号表示......）是不同的。

我的问题是，如何使代码更紧凑？我有大约 6 个这样的声明，我认为可以重构代码以使其看起来更好。

我可以为所有可重复元素（按钮声明、标签、样式）创建参数，但是我仍然必须声明 .editable() 六次...我想知道是否可以声明 $(.class).editable () 一次然后改变里面的参数吗？这样，我可以先声明所有可重复的参数，然后遍历元素并添加额外的数据......

任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:06:29.417

您可以先使用所有默认选项创建一个对象，然后用于`$.extend()`合并更改/新属性。

```
var myDefaults = {
    submitdata: {
        ItemId: '@ViewData["ItemId"]'
    },
    cssclass: 'inherit',
    indicator: 'wird gespeichert...',
    style: 'display:inline',
    height: '15px',
    width: '150px',
    placeholder: '<span class="muted">Zum Bearbeiten doppelklicken...</span>',
    tooltip: 'Zum Bearbeiten doppelklicken...',
    event: 'dblclick',
    submit: '<button class="btn btn-mini btn-primary btn-forced-margin" type="submit" >OK</button>'
};

$(".selector").editable("/Controller/Method", $.extend(true, {}, myDefaults, {
    data: " {'A':'A','B':'B','C':'C'}",
    width: '15px'
}); 
```

$.extend() 语法有点棘手，所以你可以使用[.bind()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)来滚动你自己的。

```
// create a function with your default parameters for $.extend()
var editableParams = $.extend.bind({}, true, {}, myDefaults); 

// usage
$(".selector").editable("/Controller/Method", editableParams({
    data: " {'A':'A','B':'B','C':'C'}",
    width: '15px'
}); 
```

演示在[http://jsfiddle.net/6GQ9Y/](http://jsfiddle.net/6GQ9Y/)

`$.extend()`[http://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)上的文档

`.bind()`参考（和垫片）：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

* * *

### 更新

上面的 .bind() 方法基本上只是一种创建新函数的奇特方式。然而，它似乎在**IE 8 和更早版本**中不受支持。使用以下代码可以实现相同的“快捷方式”：

```
function editableParams(options) {
    return $.extend(true, {}, myDefaults, options);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:09:00.963

您可以将公共属性提取到公共对象中。

```
var defaultEditableConfig = {
    width: 15px,
    height: 15px,
    ...
} 
```

进而

```
$('.editable-class').editable($.extend({}, defaultEditableConfig, {
    data: { 'A' : 'a', 'B' : 'b' }
}); 
```

当然，您可以将其包装在实用方法或其他东西中，以便使用以下签名更轻松地调用：

```
makeEditable(jQueryElementString, options); 
```

# oracle - 如何在 Oracle CRM On Demand 中跨父对象字段和子对象字段构建查询？

> ID：16030760
> 
> 赞同：0
> 
> 时间：2013-04-16T07:04:25.893
> 
> 标签：oracle, crm, ondemand

作为集成要求的一部分，我需要查询在特定日期和时间之后已修改的商机记录？

现在，Opportunity 有一个名为 ProductRevenue 的子对象，具有一对多的关系。无论如何，我是否可以构建一个查询页面，该页面将获取在特定日期和时间之后其机会字段“或”其子 ProductRevenue 字段已被修改的记录？

我曾尝试使用 SearchSpec 参数，但它不允许我跨子对象字段进行查询。

例如：

`ObjOpptyQueryPageInput.ListOfOpportunity.Opportunity.searchspec = "([ModifiedDate] > '01/01/2013 00:00:00') OR ([ProductRevenueData.ModifiedDate] >= '01/01/2013 00:00:00')";`

 `[上面这段用 C# 编写的代码给我一个错误提示 - 对象 Opportunity 没有一个名为 - ProductRevenueData.ModifiedDate 的集成组件。]

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-12T22:20:04.480

我自己一直在寻找答案，虽然不是解决方案，但这是我的理解。

在 Web 服务 2.0 中，Oracle 表示“所有匹配父条件的父记录，并且只返回匹配子条件的子记录”。

您实际上可以在父级和子级上定义“searchspec”，它确实按照 Oracle 定义的方式工作。但是，这可能不是您正在寻找的行为。当你这样做时，你会得到所有匹配 parent.searchspec 的父母，不管它的孩子是否匹配 child.searchspec。但是，这些父母只会在查询结果中拥有与您的 child.searchspec 匹配的孩子。因此，如果您想要的只是“有这些孩子的父母”或“这些孩子”，那么您就不走运了。因为你得到的是“许多父母和他们的一些孩子”。

因此，即使您对两个查询进行后处理，您也必须花费一些时间。:(

顺便说一句，您的两个单独的查询必须看起来像这样：

查询1。 `ObjOpptyQueryPageInput.ListOfOpportunity.Opportunity.searchspec = "([ModifiedDate] > '01/01/2013 00:00:00')";`

查询2。 `ObjOpptyQueryPageInput.ListOfOpportunity.Opportunity.ListOfProductRevenue.ProductRevenue.searchspec = "([ModifiedDate] >= '01/01/2013 00:00:00')";`

然后对查询 2 进行后处理，取出所有没有孩子的父母。然后将其与查询 1 的结果结合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T20:34:46.713

根据我的经验，您将无法使用他们的 V2.0 api（即 searchspec）来执行此操作。您可以使用 V1.0 api 执行此操作，但这将返回与您的条件匹配的所有父记录以及所有相关的 ProductRevenue 记录，无论它们是否符合条件。我做了类似的事情，然后根据 xpath 谓词过滤器对数据进行后处理。我认为，唯一的其他选择是 2 个单独的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-25T08:49:59.170

我遇到了同样的问题，我尝试了很多方法来解决问题，但现在你应该处理返回的结果：你可以使用`DOM`,`XPath`或`regular expressions`为返回的结果提取你想要的信息。

就我而言，我使用了 XPath，因为它非常快速且更容易。这是我发布的带有正确答案的问题的链接： [Xpath solution for the parent-child query result](https://stackoverflow.com/questions/33871368/get-elements-by-attribute-value)

我希望这能解决问题。`

# javascript - 如何在提交时进行 ajax 调用，并确保 html5 验证也发生

> ID：16030763
> 
> 赞同：1
> 
> 时间：2013-04-16T07:04:30.060
> 
> 标签：javascript, html, jquery

如何在提交时进行 ajax 调用，并确保 html5 验证也发生

```
<form action="someurl" method="post" class="form-horizontal" >
  <input type="text" id="name" required placeholder="Name" pattern="[a-zA-Z]+">
  <input type="text" id="description" required placeholder="Description">
  <button type="submit" class="btn btn-primary">Edit Category</button>
</form> 
```

我知道如何进行 ajax 调用。我只想知道应该如何处理提交按钮，以便进行验证以及 ajax 函数

就像我不在这里使用哪种 jquery 方法一样。我在 twitter 引导模式中显示这些表单。

我得到了我实际尝试做的参考材料——http [://albertbori.com/ajax-form-validation-with-html5——](http://albertbori.com/ajax-form-validation-with-html5)但我做了同样的事情，但仍然没有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:11:28.557

作为基础，您可以使用`inputElement.checkValidity()` [http://docs.jquery.com/Plugins/WebForms/checkValidity](http://docs.jquery.com/Plugins/WebForms/checkValidity)

也许你正在寻找这个

```
$("#form1").submit(function() {
         $.ajax({
             ...
             }
         });
         return false;
     }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:08:59.800

您在寻找：

```
$('form').submit(function(e){
    e.preventDefault();
    //code goes here
}); 
```

它在提交时运行此功能，其中包括您的验证和 ajax 调用

# charts - Html 文件未从 javascript 文件中读取数组作为输入

> ID：16030765
> 
> 赞同：0
> 
> 时间：2013-04-16T07:04:44.157
> 
> 标签：charts, titanium

这是我的 app.js 文件

```
var earn=[' ',' ',' ',' ',' '];
var lost=['50','60','100','40','20'];
var Break=['40','30','90','90','40'];

var win = Titanium.UI.createWindow({
    backgroundColor: 'white'
});

var lbl1 = Ti.UI.createLabel({
    backgroundColor: '#CED8F6',
    height:'5%',
    width:'10%',
    top:0,
    left:0,
    borderWidth: 2,
    borderColor: 'black',
});

var lbl2 = Ti.UI.createLabel({
    backgroundColor: 'white',
    text:'Earn',
    height:'5%',
    width:'10%',
    top:'5%',
    left:0,
    color: 'black',
    borderWidth: 2,
    borderColor: 'black',
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
}); 
win.add(lbl2);

var lbl3 = Ti.UI.createLabel({
    backgroundColor: '#CED8F6',
    text:'Lost',
    height:'5%',
    width:'10%',
    top:'10%',
    left:0,
    color: 'black',
    borderWidth: 2,
    borderColor: 'black',
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
});
win.add(lbl3);

var lbl4 = Ti.UI.createLabel({
    backgroundColor: 'white',
    text:'Break',
    height:'5%',
    width:'10%',
    top:'15%',
    left:0,
    color: 'black',
    borderWidth: 2,
    borderColor: 'black',
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
});
win.add(lbl4);

var lbl5 = Ti.UI.createLabel({
    backgroundColor: 'white',
    text:'Jan',
    height:'5%',
    width:'10%',
    top:0,
    left:'10%',
    color: 'black',
    borderWidth: 2,
    borderColor: 'black',
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
});
win.add(lbl5);

var textfield1 = Ti.UI.createTextField({
    backgroundColor: '#CED8F6',
    value:earn[0],
    height:'5%',
    width:'10%',
    top:'5%',
    left:'10%',
    color: 'black',
    borderWidth: 1,
    borderColor: 'black',
    keyboardType: Titanium.UI.KEYBOARD_NUMBER_PAD, 
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
});
win.add(textfield1);

var lbl7 = Ti.UI.createLabel({
    backgroundColor: 'white',
    text:lost[0],
    height:'5%',
    width:'10%',
    top:'10%',
    left:'10%',
    color: 'black',
    borderWidth: 1,
    borderColor: 'black',
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
});
win.add(lbl7);

var lbl8 = Ti.UI.createLabel({
    backgroundColor: '#CED8F6',
    text:Break[0],
    height:'5%',
    width:'10%',
    top:'15%',
    left:'10%',
    color: 'black',
    borderWidth: 1,
    borderColor: 'black',
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
});
win.add(lbl8);

var lbl9 = Ti.UI.createLabel({
    text:'Feb',
    backgroundColor: '#CED8F6',
    height:'5%',
    width:'10%',
    left:'20%',
    top:'0%',
    color:'black',
    borderWidth: 2,
    borderColor: 'black',
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
});
win.add(lbl9);

var textfield2 = Ti.UI.createTextField({
    backgroundColor: 'white',
    value:earn[1],
    height:'5%',
    width:'10%',
    top:'5%',
    left:'20%',
    color: 'black',
    borderWidth: 1,
    borderColor: 'black',
    keyboardType: Titanium.UI.KEYBOARD_NUMBER_PAD,
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
}); 
win.add(textfield2);

var lbl11 = Ti.UI.createLabel({
    backgroundColor: '#CED8F6',
    text:lost[1],
    height:'5%',
    width:'10%',
    top:'10%',
    left:'20%',
    color: 'black',
    borderWidth: 1,
    borderColor: 'black',
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
});
win.add(lbl11);

var lbl12 = Ti.UI.createLabel({
    backgroundColor: 'white',
    text:Break[1],
    height:'5%',
    width:'10%',
    top:'15%',
    left:'20%',
    color: 'black',
    borderWidth: 1,
    borderColor: 'black',
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
});
win.add(lbl12);

var lbl13 = Ti.UI.createLabel({
    backgroundColor: 'white',
    text:'March',
    height:'5%',
    width:'10%',
    top:0,
    left:'30%',
    color: 'black',
    borderWidth: 2,
    borderColor: 'black',
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
});
win.add(lbl13);

var textfield3 = Ti.UI.createTextField({
    backgroundColor: '#CED8F6',
    value:earn[2],
    height:'5%',
    width:'10%',
    top:'5%',
    left:'30%',
    color: 'black',
    borderWidth: 1,
    borderColor: 'black',
    keyboardType: Titanium.UI.KEYBOARD_NUMBER_PAD, 
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
});
win.add(textfield3);

var lbl15 = Ti.UI.createLabel({
    backgroundColor: 'white',
    text:lost[2],
    height:'5%',
    width:'10%',
    top:'10%',
    left:'30%',
    color: 'black',
    borderWidth: 1,
    borderColor: 'black',
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
});
win.add(lbl15);

var lbl16 = Ti.UI.createLabel({
    backgroundColor: '#CED8F6',
    text:Break[2],
    height:'5%',
    width:'10%',
    top:'15%',
    left:'30%',
    color: 'black',
    borderWidth: 1,
    borderColor: 'black',
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
});
win.add(lbl16);

var lbl17 = Ti.UI.createLabel({
    text:'Apr',
    backgroundColor: '#CED8F6',
    height:'5%',
    width:'10%',
    left:'40%',
    top:'0%',
    color:'black',
    borderWidth: 2,
    borderColor: 'black',
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
});
win.add(lbl17);

var textfield4 = Ti.UI.createTextField({
    backgroundColor: 'white',
    value:earn[3],
    height:'5%',
    width:'10%',
    top:'5%',
    left:'40%',
    color: 'black',
    borderWidth: 1,
    borderColor: 'black',
    keyboardType: Titanium.UI.KEYBOARD_NUMBER_PAD, 
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
}); 
win.add(textfield4);

var lbl19 = Ti.UI.createLabel({
    backgroundColor: '#CED8F6',
    text:lost[3],
    height:'5%',
    width:'10%',
    top:'10%',
    left:'40%',
    color: 'black',
    borderWidth: 1,
    borderColor: 'black',
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
});
win.add(lbl19);

var lbl20 = Ti.UI.createLabel({
    backgroundColor: 'white',
    text:Break[3],
    height:'5%',
    width:'10%',
    top:'15%',
    left:'40%',
    color: 'black',
    borderWidth: 1,
    borderColor: 'black',
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
});
win.add(lbl20);

var lbl21= Ti.UI.createLabel({
    backgroundColor: 'white',
    text:'May',
    height:'5%',
    width:'10%',
    top:0,
    left:'50%',
    color: 'black',
    borderWidth: 2,
    borderColor: 'black',
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
});
win.add(lbl21);

var textfield5 = Ti.UI.createTextField({
    backgroundColor: '#CED8F6',
    value:earn[4],
    height:'5%',
    width:'10%',
    top:'5%',
    left:'50%',
    color: 'black',
    borderWidth: 1,
    borderColor: 'black',
    keyboardType: Titanium.UI.KEYBOARD_NUMBER_PAD, 
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
});
win.add(textfield5);

var lbl23 = Ti.UI.createLabel({
    backgroundColor: 'white',
    text:lost[4],
    height:'5%',
    width:'10%',
    top:'10%',
    left:'50%',
    color: 'black',
    borderWidth: 1,
    borderColor: 'black',
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
});
win.add(lbl23);

var lbl24 = Ti.UI.createLabel({
    backgroundColor: '#CED8F6',
    text:Break[4],
    height:'5%',
    width:'10%',
    top:'15%',
    left:'50%',
    color: 'black',
    borderWidth: 1,
    borderColor: 'black',
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
});
win.add(lbl24);

var btn = Ti.UI.createButton({
title: 'Bar Chart',
bottom: '5%',
left: '2%',
width: '10%'
});
btn.addEventListener('click', function(e)
{
win.remove(layer);
win.add(webview);
});

//win.add(webview);

var btn1 = Ti.UI.createButton({
title: 'Pie Chart',
bottom: '12%',
left: '2%',
width: '10%'
});
btn1.addEventListener('click', function(e)
{
earn[0] = textfield1.value;
earn[1] = textfield2.value;
earn[2] = textfield3.value;
earn[3] = textfield4.value;
earn[4] = textfield5.value;
alert(earn[0]);
win.add(layer);
win.remove(webview);    
});

var webview = Titanium.UI.createWebView({
    url:'chart.html',
    top: '25%',
    left: '12%',
});
webview.addEventListener('beforeload',function(e)
{
     earn[0] = textfield1.value;
    earn[1] = textfield2.value;
    earn[2] = textfield3.value;
    earn[3] = textfield4.value;
    earn[4] = textfield5.value;

   wbv1.evalJS("var earn[0] ='"+earn[0]+"';");
   wbv1.evalJS("var earn[1] ='"+earn[1]+"';");
   wbv1.evalJS("var earn[2] ='"+earn[2]+"';");
   wbv1.evalJS("var earn[3] ='"+earn[3]+"';");
   wbv1.evalJS("var earn[4] ='"+earn[4]+"';");
});

var layer = Ti.UI.createView({
    top: '25%',
    left: '12%',
    bottom: '0%',

});
//win.add(layer);

var wbv1 = Ti.UI.createWebView({
    url:'pie1.html',
    top: '0%',
    left: '0%',
    right:'67%',
    //bottom: 0,
});
wbv1.addEventListener('afterload',function(e)
{
earn[0] = textfield1.value;
earn[1] = textfield2.value;
earn[2] = textfield3.value;
earn[3] = textfield4.value;
earn[4] = textfield5.value;

wbv1.evalJS("var earn[0] ='"+earn[0]+"';");
wbv1.evalJS("var earn[1] ='"+earn[1]+"';");
wbv1.evalJS("var earn[2] ='"+earn[2]+"';");
wbv1.evalJS("var earn[3] ='"+earn[3]+"';");
wbv1.evalJS("var earn[4] ='"+earn[4]+"';");

});

layer.add(wbv1);

var wbv2 = Ti.UI.createWebView({
    url:'pie2.html',
    top: '0%',
    left: '33%',
    right:'33%',
    //bottom: 0,
});
layer.add(wbv2);

var wbv3 = Ti.UI.createWebView({
    url:'pie3.html',
    top: '0%',
    left: '67%',
    right:'0%',
    //bottom: 0,
});
layer.add(wbv3);

win.add(btn1);
win.add(btn);
win.add(lbl1);
win.open(); 
```

这是我的 pie1.html

```
<html>
<head>
<title> Earn </title>
<script language="javascript" src="http://www.google.com/jsapi"></script>
<script language="javascript" src="app.js"  type="text/javascript"></script>
<meta name="viewport" content="user-scalable=0">
</head>
<body>

<div id="chart"></div>

<script type="text/javascript">

document.ontouchmove = function(event){
event.preventDefault();
}

  var queryString = '';
  var dataUrl = '';

  function onLoadCallback() {
    if (dataUrl.length > 0) {
      var query = new google.visualization.Query(dataUrl);
      query.setQuery(queryString);
      query.send(handleQueryResponse);
    } else {
      var dataTable = new google.visualization.DataTable();
      dataTable.addRows(5);

      dataTable.addColumn('number');
      dataTable.setValue(0, 0, +earn[0]);
      dataTable.setValue(1, 0, +earn[1]);
      dataTable.setValue(2, 0, +earn[2]);
      dataTable.setValue(3, 0, +earn[3]);
      dataTable.setValue(4, 0, +earn[4]);

      draw(dataTable);
    }
  }

  function draw(dataTable) {
    var vis = new google.visualization.ImageChart(document.getElementById('chart'));
    var options = {
      chxs: '0,000000,11.5', //size of the pie
      chxt: 'x',
      chs: '360x265', //size of pie
      cht: 'p',
      chco: 'FF9900', //color of the pie
      chd: 's:9flxY',
      chdl: earn[0]+'|'+earn[1]+'|'+earn[2]+'|'+earn[3]+'|'+earn[4],
      chl: 'Jan|Feb|March|Apr|May',
      chma: '25',
      chtt: 'Earn',
      chts: '000000,14.5',
      bottom: '0', //word size of the pie
    };
    vis.draw(dataTable, options);
  }

  function handleQueryResponse(response) {
    if (response.isError()) {
      alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
      return;
    }
   draw(response.getDataTable());
  }
    /* document.body.addEventListener('touchmove', function(e) {
    // This prevents native scrolling from happening.
    we e.preventDefault();
    }, false);*/

  google.load("visualization", "1", {packages:["imagechart"]});
  google.setOnLoadCallback(onLoadCallback);
</script>
</body>
</html> 
```

我尝试将我的第一个饼图作为表格上的输入数据并将数组传递给 html 文件，以便饼图可以检测数组并自行绘制，但现在的问题是它没有显示我输入的正确数据。它只会将全局变量跟踪为 (' ') nothing 而不是 i 输入的那个。抱歉编码太长了，我还是新手，这是我知道如何创建表格的唯一方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:41:40.323

我没有仔细阅读您的所有代码（太多了），但我确实注意到您这样做了：

```
webview.addEventListener('beforeload',function(e)
{
     earn[0] = textfield1.value;
    earn[1] = textfield2.value;
    earn[2] = textfield3.value;
    earn[3] = textfield4.value;
    earn[4] = textfield5.value;

   wbv1.evalJS("var earn[0] ='"+earn[0]+"';");
   wbv1.evalJS("var earn[1] ='"+earn[1]+"';");
   wbv1.evalJS("var earn[2] ='"+earn[2]+"';");
   wbv1.evalJS("var earn[3] ='"+earn[3]+"';");
   wbv1.evalJS("var earn[4] ='"+earn[4]+"';");
}); 
```

**在**事件被触发之前，您不能在 webview 上调用 evalJS `load`，evalJS 仅在有一个带有 DOM 的页面首先加载时才有效，所以这不会做任何事情。您只需要在事件上调用 evalJS `load`。

# iphone - 使用 CLPlaceMark 和 CLGeocoder 获取位置信息

> ID：16030769
> 
> 赞同：0
> 
> 时间：2013-04-16T07:05:12.563
> 
> 标签：iphone, mkmapview, mapkit, mkannotation, ios6-maps

我已经完成了在 ios 6 的地图上使用 ClLocationCoordinate2D 动态绘制两个地方之间的路线。任何人都可以帮助我使用 CLPlacemark 和 CLGeocoder 获取位置名称，因为反向地理编码器在 ios 6 中已被弃用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:15:33.890

您可以使用其 Delegate 方法获取如下信息。

**更新：**

首先在文件中定义这个变量，`.h`如下所示..

```
NSString *postcode,*locationName; 
```

并在下面的方法中使用它......

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    CLGeocoder * geoCoder = [[CLGeocoder alloc] init];
    [geoCoder reverseGeocodeLocation:newLocation completionHandler:^(NSArray *placemarks, NSError *error) {
        for (CLPlacemark * placemark in placemarks) {
            postcode = [placemark postalCode];
            [postcode retain];
            locationName = [placemark name];
            [locationName retain];

            NSLog(@"\n placemark %@",placemarks);
        }    
    }];
    [geoCoder release];
    NSLog(@"\n Location Name ==> %@  ----> GotPostCode:%@",locationName,postcode);
} 
```

在这里，您还可以使用`CLGeocoder`like `locality`,`location`等的其他属性...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:14:41.477

CLPlacemark 对象存储给定纬度和经度的地标数据。地标数据包括与指定坐标相关的国家、州、城市和街道地址等信息。

[检查链接](https://stackoverflow.com/questions/12399220/name-of-a-clplacemark)

# c++ - Microsoft Visual C++ 6.0 破坏项目

> ID：16030775
> 
> 赞同：1
> 
> 时间：2013-04-16T07:05:33.587
> 
> 标签：c++, visual-studio, visual-c++

我有一个用 VC++ 6.0 编写的旧应用程序，我必须维护它。该应用程序非常大，需要大量时间才能将其转换为更新的 VC++（如 VS2005）。

问题是，每次我对代码进行最小的更改时，解决方案（.dsw 文件）都会被破坏。

我使用运行 Windows XP 32 位的 VMware 虚拟机作为开发环境。

有没有其他人在使用 Microsoft Visual C++ 6.0 时遇到过同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:29:33.397

很难给出建议，VS6 自发破坏项目文件并不为人所知。您可以在 .dsw 文件上任意设置只读属性，当执行此操作的任何代码发现它不能再删除该文件时，您应该得到某种消息。

我必须添加一些不受欢迎的建议。使用严重过时的 Visual Studio 版本是可以的，但随着时间的推移，不便和怪癖越来越多。它永远不会变得更好。直到您花时间更新项目（不要选择严重过时的 VS2005）与您浪费的时间保持旧项目竞争。听起来D日已经到来。是时候放弃它了。

# azure - 如何打开另存为对话框以从云端下载

> ID：16030780
> 
> 赞同：0
> 
> 时间：2013-04-16T07:05:49.323
> 
> 标签：azure, save, cloud, download, filestream

我正在制作项目，其中包括从云（Azure）存储下载文件。我想打开另存为对话框但没有得到它。我使用了以下代码。

```
enter code here // Retrieve reference to a blob named "myblob".
        CloudBlockBlob blockBlob = container.GetBlockBlobReference("myblob1");
        string FileName = "a3.jpg";
        string Filename = FileName.Substring(0, FileName.LastIndexOf("."));``
        Response.AppendHeader("Content-Disposition", "attachment; filename=" FileName);
        Response.TransmitFile(Server.MapPath("~/blockBlob/myblob1/" + Filename));
        Response.End();

        /* to download file from cloud 
```

使用(var fileStream =System.IO.File.OpenWrite(@"C:\Users\prak\Pictures\ppp.JPG")) { blockBlob.DownloadToStream(fileStream); Response.Write("
"); Response.Write("下载成功！"); }*/

请帮助...在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:43:54.013

您需要将表单重定向到 ashx 处理程序，该处理程序将文件内容直接写入输出流。这并不特定于 Azure，但如果从 blob 访问文件，则可能需要将其临时移动到 Web 服务器，以便您可以在“附件；文件名”中引用本地路径。

```
Response.Clear();
Response.ContentType = "image/jpeg";
Response.AddHeader( "Content-Disposition", "attachment;filename=\"myfile.jpg\"" );
// write file data to output stream here
Response.End(); 
```

另一种方法是`HttpWebRequest`按照以下帖子中的说明使用：

[从 URL 下载/流式传输文件 - asp.net](https://stackoverflow.com/questions/5596747/download-stream-file-from-url-asp-net)

# php - php中用于电子邮件检查功能的通配符

> ID：16030781
> 
> 赞同：1
> 
> 时间：2013-04-16T07:05:55.487
> 
> 标签：php, email, wildcard

我目前正在我的本地机器上开发登录和注册系统以进行测试，现在，我正处于电子邮件检查功能的阶段。如您所知，您可以为此使用 php 内置函数，这不是 100% 正确的。否则，我希望只接受@gmail.com、@hotmail.*、@yahoo.* 和类似的电子邮件，而不是其他人（即@somemail.net）。

所以我想开发看起来像这样的代码：

```
 <?

    ...

    require_once 'emailformcheck.php';

    if ($email === '@gmail.com' || $email === '@yahoo.com'...) {

        require_once 'emaildbcheck.php';

        require_once 'passwordchecker.php';

}

...

?> 
```

但我不想输入 @gmail.com 或 @yahoo.* ，而是想使用一些通配符来代替，例如：

*@gmail.com 或 *@yahoo.com 。谁能告诉我我需要如何格式化，真的，我在 php 编程方面并不是真正的新手，但我仍然在学习。有人知道一些用于替换 php 文件中的字符串数据的通配符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:25:15.590

用于`regular expressions`字符串中的此类模式搜索。PHP 带来了`preg`扩展。它有据可查，因此我建议您查看[文档](http://php.net/manual/de/function.preg-match.php)以及您在网络上找到的数百万个示例：

使用它，您可以将条件编写为：

```
if ( preg_match($email, '^[^@]+@((gmail\.com)|(yahoo\.com))$') ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:25:38.483

首先运行此函数以检查电子邮件是否有效：

```
$isValid = filter_var($email, FILTER_VALIDATE_EMAIL); 
```

然后检查域运行以下：

```
list ($user, $domain) = explode('@', $email);
list ($domain, $tld) = explode('.', $domain); 
```

其中$user 包含@ 之前的数据，domain 包含不包括TLD 的域（例如`gmail`），而$tld 包含TLD 的第一部分（例如`com`）。

然后，您可以使用以下条件检查 gmail.com：

```
if($domain == "gmail" && $tld == "com") 
```

并检查诸如 hotmail 之类的通配符使用：

```
if($domain == "hotmail") 
```

显然使用通配符会遇到子域问题，例如某人创建域：`hotmail.mywebsite.com`并且他们的电子邮件是`myname@hotmail.mywebsite.com`.

# javascript - 在谷歌地图上创建事件动画

> ID：16030788
> 
> 赞同：2
> 
> 时间：2013-04-16T07:06:24.463
> 
> 标签：javascript, google-maps, google-maps-api-3

**`google.maps.Circle`**我正在尝试在谷歌地图上创建一个事件动画方法。

我所说的事件动画是什么意思：假设当有人从网站购买商品时，我正在尝试在地图上创建一个小的扩展圆圈动画。一个事件与纬度，经度一起发布，脚本应该能够在该位置显示一个扩大圆圈的小动画。

到目前为止，我已经能够 使用以下命令在随机位置**模拟1000 个动画：**

```
function animate(map, lat, lon) {
    var counter = 0;
    var arrayObj = new Array();
    var count = 1;
    for (var counter = 0;counter < 10 ; counter++) {
    setTimeout(function() {
      var myCity = new google.maps.Circle({
          center: new google.maps.LatLng(lat, lon),
          strokeColor:"#160EB3",
          strokeOpacity:0.2,
          strokeWeight:2,
          fillColor:"#160EB3",
          fillOpacity:0.5
        });
        myCity.setRadius((count++ * (21 - map.getZoom()) * 10) * (21 - map.getZoom()) * 2);
        myCity.setMap(map);
        if(arrayObj.length > 0)
            arrayObj[0].setVisible(false);
        arrayObj[0] = myCity;
        if(count == 11)
            arrayObj[0].setVisible(false);
    }, counter * 60);
  }
} 
```

调用脚本：

```
google.maps.event.addListener(map, "click", function(overlay) {
    for(var k = 0; k < 1000; k++) {
        setTimeout(function(){animate(map, overlay.latLng.jb + Math.random() * 3, overlay.latLng.kb + Math.random()* 4)}, k * 1000);
    }
}); 
```

问题：

*   动画不流畅。

*   它将 CPU 利用率提高到异常水平。

*   无法在不同的缩放级别上使半径保持不变。

有没有其他方法可以做同样的事情？

# java - 奇怪的内存不足异常

> ID：16030792
> 
> 赞同：3
> 
> 时间：2013-04-16T07:06:29.363
> 
> 标签：java, jersey, out-of-memory, tomcat6

我们的网络应用程序出现了非常奇怪的情况。它使用 Tomcat 6，Web 服务是用 Jersey 实现的。下面的服务调用旨在返回 JSON 数据。

以下抛出 OOM 异常：

```
http://mywebservices/get/some/data/for/1
http://mywebservices/get/some/more/data/for/12345
http://mywebservices/get/some/other/data/for/abc 
```

但是，以下工作正常：

```
http://mywebservices/get/some/data/for/12345
http://mywebservices/get/some/more/data/for/1 
```

这些只是为了显示正在发生的事情而编造的电话。我们有实时监控服务，可显示约 5 GB 的 JVM 可用内存。**我们认为 Tomcat 向我们抛出的 OOM 是虚假/不正确的响应。**有趣的是，即使对于完全不同的 Web 服务，浏览器上显示的堆栈跟踪也保持不变。我们非常确定我们看到了与 Web 服务请求完全无关的跟踪。所以我们正在弄清楚我们是否真的有泄漏。

同时，很高兴知道是否有人以前遇到过这种情况。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:55:34.820

好的，所以我们相信我们已经找到了这个问题的根本原因。由于使用了 ObjectOutputStream 和 ObjectInputStream，确实存在泄漏。

现在 ObjectOutputStream 有一个 reset() 方法可以清除引用，但 ObjectInputStream 没有类似的东西。

这个链接帮助了我们： [Java out of heap space during serialization](https://stackoverflow.com/questions/7495155/java-heap-space-out-of-memory)

# php - 将 SQL 日期格式化为英国格式

> ID：16030793
> 
> 赞同：0
> 
> 时间：2013-04-16T07:06:29.933
> 
> 标签：php, mysql, date

我有以下 SQL 查询，我想以英国 (dd/mm/yyyy) 格式输出**ageOnLastSeptember**日期。谁能告诉我如何实现这一目标？

```
$sql="select ( if(month(now()) < 9, year(now()) - 1, year(now())) - year(dob) - if(month(dob)<9, 0, 1)  ) as ageOnLastSeptember,first_name,last_name,dob,school,contact_no,family_id,contact_id from members_family where contact_id = '$contact_id' "; 
```

我尝试了以下但它什么也没做

```
$sql="select date_format(( if(month(now()) < 9, year(now()) - 1, year(now())) - year(dob) - if(month(dob)<9, 0, 1)  ), '%d/%m/%Y') as ageOnLastSeptember,first_name,last_name,dob,school,contact_no,family_id,contact_id from members_family where contact_id = '$contact_id' "; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:11:26.073

您不需要在数据库级别进行格式化。如果您将日期存储为日期（正确的方法），只需获取记录并将其发送给客户。应该在您用来显示这些日期的控件上进行格式化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T07:47:11.350

我认为使用 PHP 格式化日期比使用 MySQL 格式化更容易和更好。从 MySQL 检索数据后，您可以使用 PHP 进行格式化，例如

```
$date = date("d/m/Y", strtotime('2002-05-18')); 
```

输出将是：`18/05/2002`

所以你的 PHP 代码将是：

```
<td>". date("d/m/Y", strtotime($rows['dob'])) ."</td> 
```

有关 PHP 日期及其格式的更多信息，请参见：http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

希望这可以帮助你:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:54:42.363

不确定如何将年龄格式化为 DD/MM/YYYY 日期。似乎不合逻辑

要获得以天为单位的年龄，您可以使用以下内容

```
SELECT FLOOR(NOW(), DATE_ADD(dob, INTERVAL (ABS(DATEDIFF(CONCAT(YEAR(DATE_ADD(NOW(), INTERVAL -8 MONTH)),':09:01'), NOW())) * -1) DAY)) AS Age
FROM members_family 
WHERE contact_id = '$contact_id' 
```

可以定制以给出一个年龄（对于闰年来说要 100% 准确会有点棘手，特别是如果你想处理每 100 年不是闰年但每 400 年是闰年）

# regex - 正则表达式继续匹配数字，直到它击中某个字符

> ID：16030794
> 
> 赞同：0
> 
> 时间：2013-04-16T07:06:31.183
> 
> 标签：regex

有人可以帮我写一个正则表达式，它开始匹配字符串中的任何数字 0 到 9、逗号、句点或括号，只要它们匹配到空格或以下符号之一：+、-、*、或者 /？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T07:09:55.310

使用[积极的前瞻](http://www.regular-expressions.info/lookaround.html)表达式：

```
[\d,.()]+($|(?=[-+*/\s])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:29:55.987

*直到它碰到一个空格或这些符号之一*通常是`[^ */+-]+`.

# c# - VisualStyleRenderer 到位图

> ID：16030798
> 
> 赞同：5
> 
> 时间：2013-04-16T07:06:37.647
> 
> 标签：c#, gdi+

我需要通过`VisualStyleRenderer`. `Graphics`如果我使用方法，一切都很好`OnPaint`。但是由于我想将它保存在硬盘中，我需要在`Bitmap`对象中渲染进度条然后保存它。

这是示例代码

```
protected override void OnPaint(PaintEventArgs e)
{
    base.OnPaint(e);
    e.Graphics.DrawImage(RenderProgressbarImage(), new Point(5, 5));

    //following code works good
    progressRenderer.SetParameters("PROGRESS", 11, 2);
    progressRenderer.DrawBackground(e.Graphics, new Rectangle(125, 5, 100, 13));
}
VisualStyleRenderer progressRenderer = new VisualStyleRenderer(VisualStyleElement.ProgressBar.Bar.Normal);
Bitmap RenderProgressbarImage()
{
    Bitmap bmp = new Bitmap(100, 13);
    using (Graphics g = Graphics.FromImage((Image)bmp))
    {
        progressRenderer.SetParameters("PROGRESS", 11, 2);
        progressRenderer.DrawBackground(g, new Rectangle(0, 0, bmp.Width, bmp.Height));                
    }
    return bmp;
} 
```

但是如果我在位图中绘制它，它有黑角而不是透明的。但是，如果它使用`Graphics`，`OnPaint`一切都很好。

![截屏](https://i.stack.imgur.com/mJEYa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:22:41.963

使用`Bitmap`，您将按照您的方式使用 GDI+ 制作一个矩形对象。

[创建带圆角的图像](https://stackoverflow.com/questions/1758762/how-to-create-image-with-rounded-corners-in-c) 可能会帮助您根据需要创建圆角位图图像。

**编辑**- 修改`RenderProgressbarImage`为将`Graphics`对象作为输入

```
protected override void OnPaint(PaintEventArgs e)
{
    base.OnPaint(e);
    e.Graphics.DrawImage(RenderProgressbarImage(e.Graphics), new Point(5, 5));

    //Test to Check for Output
    RenderProgressbarImage(e.Graphics).Save(@"C:\Bitmap.bmp");;

    //following code works good
    progressRenderer.SetParameters("PROGRESS", 11, 2);
    progressRenderer.DrawBackground(e.Graphics, new Rectangle(125, 5, 100, 13));
}
Bitmap RenderProgressbarImage(Graphics g)
{
    Bitmap bmp = new Bitmap(100, 13, g);
    progressRenderer.SetParameters("PROGRESS", 11, 2);
    progressRenderer.DrawBackground(g, new Rectangle(0, 0, bmp.Width, bmp.Height));

    return bmp;
} 
```

**Edit2：**根据下面的 OP 评论进行了修改以简化解决方案

```
protected override void OnPaint(PaintEventArgs e)
{
    base.OnPaint(e);

    Bitmap bmp = new Bitmap(100, 13, e.Graphics);
    bmp.Save(<SomefilePath.png>);

    //following code works good
    progressRenderer.SetParameters("PROGRESS", 11, 2);
    progressRenderer.DrawBackground(e.Graphics, new Rectangle(125, 5, 100, 13));
} 
```

关于这一点的注意事项：`Bitmap`在`OnPaint`事件中保存 将对渲染产生明确的性能影响。也许只是更新`Bitmap`你班级中的一个变量，并`Bitmap`定期从不同的`Thread`/一些`Timer`/等中保存它；这一切都取决于您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-28T09:20:59.203

我知道它很旧，但我遇到了同样的问题，经过大量研究，我找到了解决方案，我希望它对某人有所帮助。

```
// Created by: Motaz Alnuweiri

// Reference:
// URL1: https://www.autoitscript.com/forum/topic/181956-drawthemebackground-bitmap-alpha/
// URL2: https://gist.github.com/wavescholar/11297223#file-gdi-bitmap-conversion-L71
// URL3: https://www.experts-exchange.com/questions/20872978/BITMAPINFOHEADER-from-NET-Bitmap.html

using System;
using System.Drawing;
using System.Drawing.Imaging;
using System.Runtime.InteropServices;
using System.Windows.Forms;
using System.Windows.Forms.VisualStyles;

public class Helper
{
    #region Win32 Native APIs
    internal class NativeMethods
    {
        // CreateDIBSection funcation iUsage value
        internal const int DIB_RGB_COLORS = 0x00;
        internal const int DIB_PAL_COLORS = 0x01;
        internal const int DIB_PAL_INDICES = 0x02;

        [DllImport("gdi32.dll", CharSet = CharSet.Unicode)]
        internal static extern bool DeleteObject(IntPtr hObject);

        [DllImport("user32.dll", CharSet = CharSet.Unicode)]
        internal static extern int InvalidateRect(IntPtr hwnd, IntPtr rect, int bErase);

        [DllImport("user32.dll", CharSet = CharSet.Unicode)]
        internal static extern IntPtr GetDC(IntPtr hwnd);

        [DllImport("gdi32.dll", CharSet = CharSet.Unicode)]
        internal static extern IntPtr CreateCompatibleDC(IntPtr hdc);

        [DllImport("user32.dll", CharSet = CharSet.Unicode)]
        internal static extern int ReleaseDC(IntPtr hwnd, IntPtr hdc);

        [DllImport("gdi32.dll", CharSet = CharSet.Unicode)]
        internal static extern int DeleteDC(IntPtr hdc);

        [DllImport("gdi32.dll", CharSet = CharSet.Unicode)]
        internal static extern IntPtr SelectObject(IntPtr hdc, IntPtr hgdiobj);

        [DllImport("gdi32.dll", CharSet = CharSet.Unicode)]
        internal static extern IntPtr CreateDIBSection(IntPtr hdc, ref BITMAPINFO bmi, uint iUsage,
            out IntPtr bits, IntPtr hSection, uint dwOffset);

        [DllImport("kernel32.dll", CharSet = CharSet.Unicode)]
        internal static extern void CopyMemory(IntPtr dest, IntPtr src, uint count);

        [StructLayout(LayoutKind.Sequential)]
        internal struct BITMAPINFO
        {
            public Int32 biSize;
            public Int32 biWidth;
            public Int32 biHeight;
            public Int16 biPlanes;
            public Int16 biBitCount;
            public Int32 biCompression;
            public Int32 biSizeImage;
            public Int32 biXPelsPerMeter;
            public Int32 biYPelsPerMeter;
            public Int32 biClrUsed;
            public Int32 biClrImportant;
        }
    }
    #endregion

    public static Image VisualStyleRendererToImage(VisualStyleElement element, Rectangle bounds)
    {
        if (ToolStripManager.VisualStylesEnabled && VisualStyleRenderer.IsElementDefined(element))
        {
            VisualStyleRenderer renderer = new VisualStyleRenderer(element);

            using (Bitmap bit = new Bitmap(bounds.Width, bounds.Height, PixelFormat.Format32bppArgb))
            {
                NativeMethods.BITMAPINFO bmi = new NativeMethods.BITMAPINFO();

                bmi.biWidth = bit.Width;
                bmi.biHeight = bit.Height;
                bmi.biPlanes = 1;
                bmi.biBitCount = 32;
                bmi.biXPelsPerMeter = (int)bit.HorizontalResolution;
                bmi.biYPelsPerMeter = (int)bit.VerticalResolution;
                bmi.biSize = Marshal.SizeOf(typeof(NativeMethods.BITMAPINFO));

                IntPtr bits;
                IntPtr bmp = NativeMethods.CreateDIBSection(IntPtr.Zero, ref bmi,
                    NativeMethods.DIB_RGB_COLORS, out bits, IntPtr.Zero, 0);

                IntPtr dc = NativeMethods.GetDC(IntPtr.Zero);
                IntPtr hdc = NativeMethods.CreateCompatibleDC(dc);
                NativeMethods.SelectObject(hdc, bmp);

                using (Graphics g = Graphics.FromHdc(hdc))
                {
                    renderer.DrawBackground(g, bounds);
                }

                Bitmap image = new Bitmap(bounds.Width, bounds.Height, PixelFormat.Format32bppPArgb);

                using (Bitmap tempImage = new Bitmap(bounds.Width, bounds.Height, bounds.Width * 4,
                    PixelFormat.Format32bppPArgb, bits))
                {
                    BitmapData tempBitmapData = tempImage.LockBits(bounds, ImageLockMode.ReadOnly,
                        PixelFormat.Format32bppPArgb);
                    BitmapData bitmapData = image.LockBits(bounds, ImageLockMode.WriteOnly,
                        PixelFormat.Format32bppPArgb);

                    NativeMethods.CopyMemory(bitmapData.Scan0, tempBitmapData.Scan0,
                        (uint)tempBitmapData.Stride * (uint)tempBitmapData.Height);

                    tempImage.UnlockBits(tempBitmapData);
                    image.UnlockBits(bitmapData);
                }

                NativeMethods.DeleteObject(bmp);
                NativeMethods.DeleteDC(hdc);
                NativeMethods.ReleaseDC(IntPtr.Zero, dc);

                return image;
            }
        }
        else
        {
            return new Bitmap(bounds.Width, bounds.Height);
        }
    }
} 
```

**参考：**
URL1：[https](https://www.autoitscript.com/forum/topic/181956-drawthemebackground-bitmap-alpha/)
://www.autoitscript.com/forum/topic/181956-drawthemebackground-bitmap-alpha/ URL2：[https ://gist.github.com/wavescholar/11297223#file-gdi-bitmap-conversion- L71](https://gist.github.com/wavescholar/11297223#file-gdi-bitmap-conversion-L71)
URL3：[https ://www.experts-exchange.com/questions/20872978/BITMAPINFOHEADER-from-NET-Bitmap.html](https://www.experts-exchange.com/questions/20872978/BITMAPINFOHEADER-from-NET-Bitmap.html)

# node.js - 如何使用 NodeJS / Express 以编程方式向浏览器提供 css 和 js 文件

> ID：16030800
> 
> 赞同：0
> 
> 时间：2013-04-16T07:06:48.263
> 
> 标签：node.js, express

我喜欢将存储在单独文件夹中的 css 和 js 文件（或将它们组合成一个缩小文件）提供服务器，该文件夹不位于公共目录中。

我发现了这个： [node.js 发送 css 文件](https://stackoverflow.com/questions/3304517/node-js-sending-css-files)

如何渲染包含动态添加的 css / js 文件的 express 玉模板？

# xcode - 如何使用 XCode 命令行工具

> ID：16030802
> 
> 赞同：1
> 
> 时间：2013-04-16T07:06:50.267
> 
> 标签：xcode

我是 iPad 开发新手。谁能告诉如何启动 XCode 命令工具（使用 xcode 或终端中的任何其他命令）并在设备应用程序上使用它触发命令？

# java - android中的密码验证确认

> ID：16030806
> 
> 赞同：3
> 
> 时间：2013-04-16T07:07:06.710
> 
> 标签：java, android, string-comparison

我有这个活动，我想验证确认密码字段。这是我的代码-：

```
nt.setOnClickListener(new OnClickListener() { 

    public void onClick(View v) { 

         if(email.getText().toString().equals("")){
            AlertDialog alertDialog = new AlertDialog.Builder(Registration.this).create();
            alertDialog.setTitle("oops!");
            alertDialog.setMessage("E-mail field is empty");
            alertDialog.setButton("Ok",
            new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                      //dismiss the dialog  
                    }
                });
            alertDialog.show();
        }
        else if(pass.getText().toString().equals("")){

            AlertDialog alertDialog = new AlertDialog.Builder(Registration.this).create();
            alertDialog.setTitle("oops!");
            alertDialog.setMessage("Password  field is empty");
            alertDialog.setButton("Ok",
            new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                      //dismiss the dialog  
                    }
                });

            alertDialog.show();
        }

        else if(conpass.getText().toString()!= pass.getText().toString() ){
            AlertDialog alertDialog = new AlertDialog.Builder(Registration.this).create();
            alertDialog.setTitle("oops!");
            alertDialog.setMessage("Passwords do not match");
            alertDialog.setButton("Ok",
            new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                      //dismiss the dialog  
                    }
                });
            alertDialog.show();
        }
        else if(name.getText().toString().equals("")){
            AlertDialog alertDialog = new AlertDialog.Builder(Registration.this).create();
            alertDialog.setTitle("oops!");
            alertDialog.setMessage("Name field is empty");
            alertDialog.setButton("Ok",
            new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                      //dismiss the dialog  
                    }
                });
            alertDialog.show();
        }
        else if(dob.getText().toString().equals("")){
            AlertDialog alertDialog = new AlertDialog.Builder(Registration.this).create();
            alertDialog.setTitle("oops!");
            alertDialog.setMessage("Date of birth field is empty");
            alertDialog.setButton("Ok",
            new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                      //dismiss the dialog  
                    }
                });
            alertDialog.show();
        }
        else if(address.getText().toString().equals("")){
            AlertDialog alertDialog = new AlertDialog.Builder(Registration.this).create();
            alertDialog.setTitle("oops!");
            alertDialog.setMessage("Address field is empty");
            alertDialog.setButton("Ok",
            new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                      //dismiss the dialog  
                    }
                });
            alertDialog.show();
        }
        else if(city.getText().toString().equals("")){
            AlertDialog alertDialog = new AlertDialog.Builder(Registration.this).create();
            alertDialog.setTitle("oops!");
            alertDialog.setMessage("City field is empty");
            alertDialog.setButton("Ok",
            new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                      //dismiss the dialog  
                    }
                });
            alertDialog.show();
        }
        else if(zip.getText().toString().equals("")){
            AlertDialog alertDialog = new AlertDialog.Builder(Registration.this).create();
            alertDialog.setTitle("oops!");
            alertDialog.setMessage("Zip field is empty");
            alertDialog.setButton("Ok",
            new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                      //dismiss the dialog  
                    }
                });
            alertDialog.show();
        }
        else if(phone.getText().toString().equals("")){
            AlertDialog alertDialog = new AlertDialog.Builder(Registration.this).create();
            alertDialog.setTitle("oops!");
            alertDialog.setMessage("Phone No. field is empty");
            alertDialog.setButton("Ok",
            new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                      //dismiss the dialog  
                    }
                });
            alertDialog.show();
        }
        else if(mobile.getText().toString().equals("")){
            AlertDialog alertDialog = new AlertDialog.Builder(Registration.this).create();
            alertDialog.setTitle("oops!");
            alertDialog.setMessage("Mobile No field is empty");
            alertDialog.setButton("Ok",
            new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                      //dismiss the dialog  
                    }
                });
            alertDialog.show();
        }

        else{

            String mail = email.getText().toString();

            String pas = pass.getText().toString();

            String fname = name.getText().toString();

            String dateob = dob.getText().toString();

            String add12 = address.getText().toString();

            String tow = city.getText().toString();

            String zip1 = zip.getText().toString();

            String mob = mobile.getText().toString();

            String phn = phone.getText().toString();

            Intent per = new Intent(getApplicationContext(), Register2.class);
            per.putExtra("email", mail);
            per.putExtra("name", fname);
            per.putExtra("password", pas);
            per.putExtra("mobile", mob);
            per.putExtra("phone", phn);
            per.putExtra("address", add12);
            per.putExtra("zip", zip1);
            per.putExtra("city", tow);
            per.putExtra("dateofbirth", dateob);
            startActivity(per);
        }

    }
}); 
```

现在，即使我的两个edittext字段都相同，它仍然向我显示密码不匹配的警报对话框。请在这里帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T07:09:41.617

您不能使用`=`or比较字符串`!=`，`equals`而是使用

```
else if(!conpass.getText().toString().equals(pass.getText().toString()) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-06T14:14:22.643

试试这个功能：

```
public boolean isPasswordMatching(String password, String confirmPassword) {
    Pattern pattern = Pattern.compile(password, Pattern.CASE_INSENSITIVE);
    Matcher matcher = pattern.matcher(confirmPassword);

    if (!matcher.matches()) {
        // do your Toast("passwords are not matching");

        return false;
    }

    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-20T12:06:38.137

参考这个以获得处理这个的线索

它的简单过滤

在`if`条件下它检查`old password`和`new password`不是`null`或`empty`和检查两者都不相同在否则如果`new password`和`old password`不是`null`或`empty`和检查两个长度相等并验证两个字符串相等

如果您喜欢简单验证，可以选择此选项

```
 @Override
    public void afterTextChanged(Editable s) {

        System.out.println(s.toString());
        String oldPass = oldPassword.getText().toString();
        String newPass = newPassword.getText().toString();
        String confirmPass = confirmPassword.getText().toString();
        if (!oldPass.equals("") && !newPass.equals("") && oldPass.equals(newPass)) {
            Toast.makeText(getContext(), "Choose Different Password than Old Password", Toast.LENGTH_SHORT).show();
        }
        else if (!newPass.equals("") && !confirmPass.equals("") && !newPass.equals(confirmPass) && newPass.length()==confirmPass.length())
        {
            Toast.makeText(getContext(), "Choose same as New Password", Toast.LENGTH_SHORT).show();
        }
    } 
```

# linux - 在什么情况下线程会退出或停止运行

> ID：16030807
> 
> 赞同：0
> 
> 时间：2013-04-16T07:07:06.887
> 
> 标签：linux, multithreading, networking, client-server

我正在编写一个服务器应用程序，其中部署了一个线程来读取/写入许多连接到客户端的套接字。我的经理告诉我这不是一个好的设计，因为如果线程由于未知原因中止，那么所有读/写工作将永远停止。

所以我想知道在什么情况下线程会中止，除了我们从线程的 Run() 函数返回的情况。我们是否需要考虑线程异常停止运行的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:09:01.983

> 我正在编写一个服务器应用程序，其中部署了一个线程来读取/写入许多连接到客户端的套接字。

不是一个好的设计。*每个客户端*至少应该有一个线程，在某些情况下是两个：一个用于读取，一个用于写入。如果您正在处理阻塞 I/O，则为一个客户端提供服务可能会阻塞所有其他客户端。（如果您正在处理非阻塞 I/O，则根本不需要线程。）

> 我的经理告诉我这不是一个好的设计，因为如果线程由于未知原因中止，那么所有读/写工作将永远停止。

他是对的，原因比他前进的原因更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:34:21.017

这取决于。每个客户端一个线程在可扩展性方面可能是一件坏事，特别是如果线程没有为每个客户端做那么多工作。在这种情况下，最好有一个线程来处理多个客户端，这是在线程数量和让它们完成大量工作之间取得良好平衡的想法。

另一方面，如果每个线程为每个客户端做大量工作，那么一个线程并不是一个坏主意，与工作负载相比，线程的开销并不显着。

因此，撇开这一点不谈，如果您编写的代码使线程返回或自行终止，则线程将中止。如果您程序中的另一个线程知道该线程的句柄/ID，那么您正在使用的库可能有一个名称类似于 thread_kill() 的函数。这将允许其他线程杀死该线程，尽管这几乎总是一个坏主意。

因此，就我而言，如果您故意编写代码以使其发生，您的线程只会中止并消失。

处理异常可能最好在出现异常的线程中全部完成。我从来没有尝试过其他方式（仍然用纯 C 语言编写），但是很难在线程之外处理它们。不管每个线程是否处理一个或多个客户端，您仍然必须处理线程内的所有错误和事件。

如果您编写 I 以便线程处理处理单个客户端，则可能更容易获得正确。弄错可能会导致线程进入停滞状态（例如，等待正在侦听的客户端）并且随着时间的推移累积这些最终会杀死您的整个系统。

# c# - 在 C# windows 窗体中使用 XML 文件生成 HTML 文件

> ID：16030813
> 
> 赞同：1
> 
> 时间：2013-04-16T07:07:26.697
> 
> 标签：c#, html, xml

我正在尝试生成可以从 XML 文件生成 HTML 代码的类。它确实会生成 HTML 代码，但是当我的 XML 文件中有多个标签时，它的值会被重置。

我希望你能帮助我。

这是我在 C# 中的代码：

```
public class GenerateHTMLClass
{
    public string htmlstringbegin = "<HTML><HEADER><title>My Web-page</title></HEADER><BODY><form>\r\n";
    public string htmlstringend = "</form></BODY></HTML>";
    public string htmlstring = "";

    public GenerateHTMLClass(string xmlfileaddress, string htmlfilenaddress)
    {
        string id = "";
        string name = "";
        string type = "";
        string value = "";
        string htmlstring = "";
        XmlTextReader reader = new XmlTextReader(xmlfileaddress);            
        while (reader.Read())
        {
            switch (reader.Name)
            {
                case "GUID":
                    id = reader.ReadString();
                    break;
                case "Title":
                    name = reader.ReadString();
                    break;
                case "Type":
                    type = reader.ReadString();
                    break;
            }              
        }
        htmlstring += "<" + type + " id=" + id + " value=" + name + "/>" + name + "</" + type + ">";
        using (FileStream fs = new FileStream(htmlfilenaddress, FileMode.Create))
        {
            using (StreamWriter writer = new StreamWriter(fs, Encoding.UTF8))
            {
                writer.Write(htmlstringbegin + htmlstring + htmlstringend);
            }
        }
    }
} 
```

我的 xml 文件：

```
<Groups>
<Group1>
    <Item1>
        <Type>Button</Type>     
        <GUID>124342345</GUID>
        <Title>Name</Title>
    </Item1>
</Group1>
<Group2>
    <Item2>
        <Type>textarea</Type>   
        <GUID>1243dsfs42345</GUID>
        <Title>Name</Title>     
    </Item2>
</Group2>
</Groups> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:14:27.130

试试把 HTML 添加代码

```
 htmlstring += "<" + type + " id=" + id + " value=" + name + "/>" + name + "</" + type + ">"; 
```

进入`while`循环。这样，它将为每个标签附加，而不是在读取所有标签后只附加一次。

* * *

**编辑**：抱歉，它稍微复杂一些。像这样更改您的 XML：

```
<Groups>
    <Group>
        <Item>
            <Type>Button</Type>     
            <GUID>124342345</GUID>
            <Title>Name</Title>
        </Item>
    </Group>
    <Group>
        <Item>
            <Type>textarea</Type>   
            <GUID>1243dsfs42345</GUID>
            <Title>Name</Title>     
        </Item>
    </Group>
</Groups> 
```

然后加载它，为每个`Item`标签创建一个新行。我使用了`XElement`解析器而不是`XmlTextReader`为了易于使用。

```
var reader = XElement.Load(xmlfileaddress);

foreach (var item in reader.Descendants("Item"))
{
    var id = item.Element("GUID").Value;
    var name = item.Element("Title").Value;
    var type = item.Element("Type").Value;

    htmlstring += "<" + type + " id=" + id + " value=" + name + "/>" + name + "</" + type + ">";    
} 
```

这将获取您的所有`<Item>`标签，读取它们的 3 个属性，并为它们创建一个新行。如果您打算以这种方式创建大型文档，建议将您的替换`string htmlstring;`为[`StringBuilder`](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx), 以提高性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:52:46.163

尝试这个：

```
public void GenerateHTMLClass(string xmlfileaddress, string htmlfilenaddress)
        {
            List<string> id = new List<string>();
            List<string> name = new List<string>();
            List<string> type = new List<string>();
            List<string> value = new List<string>();
            string htmlstring = "";
            XmlTextReader reader = new XmlTextReader(xmlfileaddress);

            while (reader.Read())
            {
                switch (reader.Name)
                {
                    case "GUID":
                        id.Add(reader.ReadString());
                        break;
                    case "Title":
                        name.Add(reader.ReadString());
                        break;
                    case "Type":
                        type.Add(reader.ReadString());
                        break;
                }
            }
            int i=0;
            foreach (var item in id)
            {
                htmlstring += "<" + type[i] + " id=" + item + " value=" + name[i] + "/>" + name[i] + "</" + type[i] + ">";
                i++;
            }
            using (FileStream fs = new FileStream(htmlfilenaddress, FileMode.Create))
            {
                using (StreamWriter writer = new StreamWriter(fs, Encoding.UTF8))
                {
                    writer.Write(htmlstringbegin + htmlstring + htmlstringend);
                }
            }
        } 
```

但最好使用[XElement](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.aspx)类

# java - 生成 JavaAbstractMethod 异常

> ID：16030814
> 
> 赞同：-3
> 
> 时间：2013-04-16T07:07:35.230
> 
> 标签：java, mysql, servlets

我已经编写了将照片添加到数据库的代码，我对 Web 应用程序不太感兴趣，所以请帮帮我

```
 // obtains input stream of the upload file
        inputStream = filePart.getInputStream();
    }
    Connection conn = null; // connection to the database
    String message = null;  // message will be sent back to client
    try {
         // connects to the database
        DriverManager.registerDriver(new com.mysql.jdbc.Driver());
        conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/opmdb", "root", "sourabh");

        // constructs SQL statement
        String sql = "INSERT INTO photos (userId, photo) values (?, ?)";
        PreparedStatement statement = conn.prepareStatement(sql);
        statement.setString(1, userName);
        statement.setBinaryStream(2, inputStream); 
```

在这里它告诉错误我也使用过 setBlob 但错误仍然相同 异常和堆栈跟踪是

```
java.lang.AbstractMethodError:com.mysql.jdbc.PreparedStatement.setBinaryStream(ILjava/io/InputStream;)V
at org.onlinepicturemanager.addphotoservlet.AddPhotoServlet.doPost(AddPhotoServlet.java:81)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:947)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1009)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:35:06.833

将您的代码更改`statement.setBinaryStream(2, inputStream);` 为

`statement.setBinaryStream(2, inputStream,file.length);`

'setBinaryStream' 方法需要 3 个参数，在这个方法中添加你的文件长度

# java - 打印树组件

> ID：16030816
> 
> 赞同：4
> 
> 时间：2013-04-16T07:07:38.320
> 
> 标签：java

我是 java 新手，我想创建一个非常*简单*的“单词完成”程序。我将阅读字典文件并递归地将单词添加到节点数组（大小为 26）中。我相信我已经成功地做到了这一点，但我不知道如何通过和打印比赛。为了测试，我现在只是通过调用函数来插入 2 个单词。一旦一切正常，我将添加读取文件并从单词中删除垃圾的方法。

例如：如果“test”和“tester”这两个词在树内，用户输入“tes”，它应该显示“test”和“tester”。

如果有人能告诉我如何通过和打印比赛（如果有的话），我将非常感激。完整代码如下。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:10:58.350

您实施[的称为](http://en.wikipedia.org/wiki/Trie) ["trie"](http://code.google.com/p/trie/)。您可能想查看现有的实现。

您用来存储子节点的东西称为哈希表，您可能希望使用标准实现并避免自己实现它，除非您有非常非常具体的理由这样做。您的实现有一些限制（例如字符范围）。

* * *

我认为，您的代码在方法中有一个错误`has`：

```
...
else if (letter[val].flag==true || word.length()==1) {
    return true;
} 
```

如果该方法打算在字符串以`word`then 开头的情况下返回 true，则不应检查`flag`. 如果仅在完全匹配的情况下必须返回 true，则不应检查`word.length()`.

最后，解决您的问题：不是最佳但最简单的解决方案是创建一个方法，该方法接受一个字符串并返回一个与该字符串匹配的节点以及一个由节点中的所有单词组成的方法。像这样的东西（未经测试）：

```
class Tree {

    ...
    public List<String> matches(CharSequence prefix) {
        List<String> result = new ArrayList<>();
        if(r != null) {
            Node n = r._match(prefix, 0);
            if(n != null) {
                StringBuilder p = new StringBuilder();
                p.append(prefix);
                n._addWords(p, result);
            }
        }
        return result;
    }
}

class Node {

    ...
    protected Node _match(CharSequence prefix, int index) {
        assert index <= prefix.length();
        if(index == prefix.length()) {
            return this;
        }
        int val = prefix.charAt(index) - 'a';
        assert val >= 0 && val < letter.length;
        if (letter[val] != null) {
            return letter[val].match(prefix, index+1);
        }
        return null;
    }

    protected void _addWords(StringBuilder prefix, List<String> result) {
        if(this.flag) {
            result.add(prefix.toString());
        }    
        for(int i = 0; i<letter.length; i++) {
            if(letter[i] != null) {
                prefix.append((char)(i + 'a'));
                letter[i]._addWords(prefix, result);
                prefix.delete(prefix.length() - 1, prefix.length());
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T07:20:55.930

也许这里有点远，但你为什么不在这里尝试正则表达式呢？据我了解，您希望将单词与单词列表匹配：

```
List<String> getMatches(List<String> list, String regex) {

  Pattern p = Pattern.compile(regex);
  ArrayList<String> matches = new ArrayList<String>();

  for (String s:list) {
    if (p.matcher(s).matches()) {
      matches.add(s);
    }
  }

  return matches
} 
```

# android - Android 在 pre ICS 中使用 switch 选项

> ID：16030818
> 
> 赞同：3
> 
> 时间：2013-04-16T07:07:41.933
> 
> 标签：android

我有一个询问用户的问题

> 你会参加活动吗？

有以下选项

> 是/否

我正在为 android 4.0 及更高版本使用 Switch 小部件，这是 4.0 之前版本的最佳方式。

![在此处输入图像描述](https://i.stack.imgur.com/CFfuZ.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:10:29.020

可以有多个选项

1.  [切换按钮](http://developer.android.com/reference/android/widget/ToggleButton.html)
2.  2 [RadioButton](https://www.google.com.bd/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CCwQFjAA&url=http://developer.android.com/reference/android/widget/RadioButton.html&ei=fflsUbL4OeutiQel7IGQAw&usg=AFQjCNGgAbD-WvB0H3N65IZfwNJBnfNoxg&bvm=bv.45175338,d.aGc)正如@Ascorbin 建议的那样
3.  单个[复选框](https://www.google.com.bd/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC8QFjAA&url=http://developer.android.com/reference/android/widget/CheckBox.html&ei=g_lsUZf2H8-iiAfwmoHADw&usg=AFQjCNHmQTsWzJlodW7qW9drxrFM_gQSGw&bvm=bv.45175338,d.aGc)

最好的事情取决于你的设计

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:09:13.567

使用 2 个单选按钮，[本教程](http://www.mkyong.com/android/android-radio-buttons-example/)几乎涵盖了它。

# javascript - 需要点击 2 次才能失去焦点

> ID：16030820
> 
> 赞同：1
> 
> 时间：2013-04-16T07:07:54.037
> 
> 标签：javascript, focus, onblur

在我的表单中，我有一些我已经应用`onblur`事件的字段。问题是如果我在输入某些字段后直接单击保存，则不会调用保存。我需要点击两次。有关更多说明，请参阅以下步骤，并附上代码片段。

1）在输入框中输入一些值
2）通过标记或单击屏幕上的其他位置来失去焦点
3）它工作正常并且函数 triggerOnBlur 被调用
4）现在再次在输入框中输入一些值
5）立即点击保存按钮，无需单击其他任何地方
6) 函数 triggerOnBlur 被调用，但为了单击保存按钮，我需要单击保存。

我想一键搞定。。

```
 <!DOCTYPE html>
<html>
<head>
<script>
function triggerOnBlur()
{
alert("onblur event triggered");
}

function triggerSaveButton()
{
alert("save button");
}
</script>
</head>
<body>

<form>
<input type = "text" onblur = "triggerOnBlur()" />
<input type = "submit" value = "Save" onclick = "triggerSaveButton()" />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:16:47.310

你总是可以做类似的事情：

```
function triggerSaveButton()
{
    var inputs = document.getElementsByTagName("input"), input = null;
    for(var i = 0, len = inputs.length; i < len; i++) {
        input = inputs[i];
        if(input.type == "text" && input == document.activeElement) {
            input.blur();
        }
    }
    // onblur triggered, now continue with function
    alert("save button");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:00:30.947

因为你`alert()`打破`click`事件，`click event`需要你在按钮上释放鼠标键，如果你必须使用`alert()`，你可以使用`onmousedown`事件，看这个例子

[http://jsfiddle.net/3w8VM/](http://jsfiddle.net/3w8VM/)

# ruby-on-rails - Rails 3.2 - 不明确的列名：title_es: - 什么是正确的语法？

> ID：16030821
> 
> 赞同：0
> 
> 时间：2013-04-16T07:07:57.747
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, sqlite

在尝试处理我的搜索表单时，我反复遇到同样的错误。看一下互联网似乎很清楚，我的查询需要更具体，以便 Rails 随时知道要查看哪一列。从错误中我了解到问题来自属于 Headers 的“title_es”列。但是，我尝试了许多不同的方法，但我无法获得正确的语法来使其工作。任何帮助都感激不尽！谢谢

事件模型

```
scope :with_timetable, joins(:header).where(headers: {weekly: true}) 
```

事件控制器

```
def search
    @events_weekly = Event.with_timetable.where((["CAST(title_es as varchar(255)) LIKE ?", "%#{params[:query]}%"] || ["CAST(title_en as varchar(255)) LIKE ?", "%#{params[:query]}%"] || ["CAST(title_eu as varchar(255)) LIKE ?", "%#{params[:query]}%"] || ["CAST(title_fr as varchar(255)) LIKE ?", "%#{params[:query]}%"])).includes(:header)

if @time.wday == 1
      @events = @events_weekly.joins(:timetable).where(timetables: {mon: true})
elsif @time.wday == 2
       .........
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:21:46.207

您应该指定表名，类似于`"CAST(events.title_es as varchar(255))"`或`"CAST(headers.title_es as varchar(255))"`取决于您的需要。

我想你也必须指定表名`title_eu`。

# javascript - 使用 javascript 在现有的 div 类中追加

> ID：16030822
> 
> 赞同：0
> 
> 时间：2013-04-16T07:07:57.997
> 
> 标签：javascript, jquery, html

如何在下面的现有 div 类 3 中追加？

例子：

```
<div id="A" class="1">
   <div class="2">
      <div class="3">
      </div>
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:14:50.230

尝试这个

```
$('.3').append('your text/element here'); 
```

# wordpress - 一张图片在页面其余部分之前加载

> ID：16030836
> 
> 赞同：1
> 
> 时间：2013-04-16T07:09:04.273
> 
> 标签：wordpress, loading

我创建了一个 Wordpress 主题，但页面加载有问题。当我在页面之间移动时，当所有其他元素都已卸载时，页眉中有一个表格（带有 2 个图像）留在页面后面。有什么想法可以解决这个问题，以便该图像仅与页面的其余部分一起显示？

请参阅[http://thetaonline.co.za/newWeb/](http://thetaonline.co.za/newWeb/)并单击每个菜单项以查看剩余的图像（在页面其余部分之前加载）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:19:58.530

你的 HTML 代码搞砸了。它`<table>`在 the 之前打开 a`<html>`并在 之后关闭`</html>`。这些东西应该进入该`<body>...</body>`区域。

这基本上就是为什么它在页面完成加载之前显示的原因，因为外部资源被调用`<script src=...`或`<link href=...`将在此时挂起页面渲染，直到它们被加载。这就是为什么通常在所有内容之前调用这些东西的原因，`<head>...</head>`在没有（或应该）仍然没有为显示定义的块内。

如果您做错了，它将显示准备好渲染的内容-基本上只是该图像-直到加载其余部分。

至于将外部资源调用放在`<head>`块内，这似乎是正确的，因此基本上您只需将该表带到正确的位置即可使页面正确显示。

我看到还有一些拼写错误可能会导致问题，比如最后`<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"`错过了`>`等等。你应该检查你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:21:07.347

尝试使用 jquery 并执行以下操作：

```
 $(function() {
    $.preload(["image1.png", "image2.png"]);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:21:31.037

编辑：你应该看看哈弗纳德的答案！

我不知道，如果这是一个好主意（我猜不是！），但实际上您可以先隐藏这些图像，然后在页面完全加载后用 jquery 显示它们：

```
<table width="35" border="0" cellspacing="0" cellpadding="0" style="display:none" id="specialimages">
<!-- your 2 images in here -->
</table>

<script type="text/javascript">
$(document).ready(function() {
    $('#specialimages').show();
});
</script> 
```

# javascript - IE浏览器打开时如何显示消息？

> ID：16030845
> 
> 赞同：2
> 
> 时间：2013-04-16T07:09:37.067
> 
> 标签：javascript, html, internet-explorer

我有一个问题，也许它在这个网站上是重复的，但我找不到它！

我想显示此消息

`"Please open this website in firefox and you can download Mozilla Firefox from here"`

当用户在 IE 中打开我的网站时。

怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:13:52.443

你可以使用条件检查

```
<!--[if IE]>
please open this web in firefox and you can download Mozilla Firefox from <a href='here'>here</a>
<![endif]--> 
```

或者您可以尝试添加 js/编程检查

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T17:54:57.650

如果您更喜欢 Javascript，可以检查 userAgent。

```
if (navigator.userAgent.indexOf('MSIE')>0) {
    document.write('do something');
}; 
```

MSIE 是 Microsoft Internet Explorer 的指标

# asp.net - 结束日期的验证应大于或等于 asp.net 中的开始日期

> ID：16030848
> 
> 赞同：1
> 
> 时间：2013-04-16T07:09:50.183
> 
> 标签：asp.net, validation

我正在使用此代码验证两个日期，但是当我输入相同日期或在开始日期之后验证不起作用

```
 <asp:CompareValidator ID="dateCompareValidator" runat="server" 
        ControlToValidate="EndDate"
        ControlToCompare="StartDate" 
        Operator="GreaterThanEqual" Type="Date"
        ErrorMessage="The second date must be after the first one.<br /><br />">
        </asp:CompareValidator> 
```

我需要使用硬代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:25:30.873

.aspx 文件：

```
 <tr>
                        <td align="right">
                            Start Date:
                        </td>
                        <td align="left">
                            <telerik:RadDatePicker ID="RadDtpFromDate" runat="server" Calendar-EnableShadows="true" AutoPostBack="true"
                                Culture="en-IN" DateInput-DateFormat="dd-MMM-yyyy" DateInput-EmptyMessage="DD-MMM-YYYY"
                                ShowPopupOnFocus="true" ToolTip="Input Date" ZIndex="30001" 
                                onselecteddatechanged="RadDtpFromDate_SelectedDateChanged" />
                            <asp:RequiredFieldValidator runat="server" ID="rfvFromDate" Display="None" ControlToValidate="RadDtpFromDate"
                                InitialValue="" ValidationGroup="FinalSave" ErrorMessage="From Date is Mandatory"
                                ForeColor="Red"></asp:RequiredFieldValidator>
                            <ajaxToolkit:ValidatorCalloutExtender ID="vceFromDate" TargetControlID="rfvFromDate"
                                runat="server">
                            </ajaxToolkit:ValidatorCalloutExtender>
                            <asp:CustomValidator ID="cvFromDate" runat="server" ControlToValidate="RadDtpFromDate"
                                Display="None"></asp:CustomValidator>
                            <ajaxToolkit:ValidatorCalloutExtender ID="vceRadFromDate" runat="server" TargetControlID="cvFromDate">
                            </ajaxToolkit:ValidatorCalloutExtender>
                        </td>
                        <td align="right">
                            End Date:
                        </td>
                        <td align="left" colspan="2">
                            <telerik:RadDatePicker ID="RadDtpToDate" runat="server" Calendar-EnableShadows="true" AutoPostBack="true"
                                Culture="en-IN" DateInput-DateFormat="dd-MMM-yyyy" DateInput-EmptyMessage="DD-MMM-YYYY"
                                ShowPopupOnFocus="true" ToolTip="Input Date" ZIndex="30001" 
                                onselecteddatechanged="RadDtpToDate_SelectedDateChanged" />
                            <asp:RequiredFieldValidator runat="server" ID="rfvToDate" Display="None" ControlToValidate="RadDtpToDate"
                                InitialValue="" ValidationGroup="FinalSave" ErrorMessage=" To Date is Mandatory"
                                ForeColor="Red"></asp:RequiredFieldValidator>
                            <ajaxToolkit:ValidatorCalloutExtender ID="vceToDate" TargetControlID="rfvToDate"
                                runat="server">
                            </ajaxToolkit:ValidatorCalloutExtender>
                            <asp:CustomValidator ID="cvToDate" runat="server" ControlToValidate="RadDtpToDate"
                                Display="None"></asp:CustomValidator>
                            <ajaxToolkit:ValidatorCalloutExtender ID="vceRadToDate" runat="server" TargetControlID="cvToDate">
                            </ajaxToolkit:ValidatorCalloutExtender>
                        </td>
                    </tr> 
```

Cs 文件：

```
 if (RadDtpFromDate.SelectedDate > RadDtpToDate.SelectedDate)
            {
              dateCompareValidator.IsValid = False;
                return;
            } 
```

现在试试这个......

# entity-framework - 使用 Code First Entity Framework 为数据库播种 - 外键语法

> ID：16030850
> 
> 赞同：15
> 
> 时间：2013-04-16T07:09:50.703
> 
> 标签：entity-framework, code-first, seeding

我正在尝试找到正确的语法来为数据库播种测试数据。我的产品表有一个外键。它是类别。我已经在数据库中植入了类别的值，但坚持如何将这种关系添加到产品中。我试过这种方法无济于事。

```
context.Categories.AddOrUpdate(x => x.Name,
    new Category
    {
        Name = "Fruit"
    });

context.Products.AddOrUpdate(x => x.Name,
    new Product
    { 
       Name = "Cherries",
       Description = "Bing Cherries",
       Measure = "Quart Box",
       Price = 1.11M,
       Category = context.Categories.FirstOrDefault(x => x.Name == "Fruit")
    }
}); 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-19T03:54:56.683

我发现为了完成Category的外键是对上下文进行保存更改。然后我能够查询 categoryId 的上下文并将其保存到产品上的 CategoryId。

```
context.Categories.AddOrUpdate(x => x.Name,
    new Category
    {
        Name = "Fruit"
    });

context.SaveChanges();

context.Product.AddOrUpdate(x => x.Name,
    new Product 
    { 
        Name = "Cherries",
        Description = "Bing Cherries",
        Measure = "Quart Box",
        Price = 1.11M,
        CategoryId = context.Categories.FirstOrDefault(x => x.Name == "Fruit").Id
    }); 
```

# android - 带有 2.2 开发者选项的旧 Moto Droid？

> ID：16030851
> 
> 赞同：4
> 
> 时间：2013-04-16T07:09:53.727
> 
> 标签：android, hardware, motorola

我想用 2.2 froyo 将我正在开发的东西推到我的旧摩托罗拉 Droid 上，但是我找不到任何开发者选项或解锁它们的方法（如果它们被隐藏）。

是否有其他方法可以让 Eclipse 使用这种旧硬件查看手机？

# angularjs - 单元测试 angularjs 指令

> ID：16030854
> 
> 赞同：7
> 
> 时间：2013-04-16T07:09:59.420
> 
> 标签：angularjs, karma-runner

我想开始为我的 angularjs 项目进行单元测试。这远非直截了当，我觉得这真的很难。我正在使用业力和茉莉花。对于测试我的路线和应用程序依赖项，我很好。但是您将如何测试这样的指令呢？

```
angular.module('person.directives', []).
directive("person", function() {
return {
    restrict: "E",
    templateUrl: "person/views/person.html",
    replace: true,
    scope: {
        myPerson: '='
    },
    link: function (scope, element, attrs) {

    }        
} 
```

});

例如，我将如何测试是否找到了模板？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-16T12:46:19.047

这是要走的路[https://github.com/vojtajina/ng-directive-testing](https://github.com/vojtajina/ng-directive-testing)

基本上，您使用`beforeEach`创建*、*编译*和*公开*元素*及其作用域，然后模拟作用域更改和事件处理程序，并查看代码是否做出反应并适当地更新元素和作用域。这是一个非常简单的例子。

假设：

```
scope: {
  myPerson: '='
},
link: function(scope, element, attr) {
  element.bind('click', function() {console.log('testes');
    scope.$apply('myPerson = "clicked"');
  });
} 
```

我们期望当用户点击带有指令的元素时，`myPerson`属性变为`clicked`. 这是我们需要测试的行为。所以我们将编译后的指令（绑定到一个元素）暴露给所有规范：

```
var elm, $scope;

beforeEach(module('myModule'));

beforeEach(inject(function($rootScope, $compile) {
  $scope = $rootScope.$new();
  elm = angular.element('<div t my-person="outsideModel"></div>');
  $compile(elm)($scope);
})); 
```

然后你就断言：

```
it('should say hallo to the World', function() {
  expect($scope.outsideModel).toBeUndefined(); // scope starts undefined
  elm.click(); // but on click
  expect($scope.outsideModel).toBe('clicked'); // it become clicked
}); 
```

戳[这里](http://plnkr.co/edit/jKbrCp)。你需要 jQuery 来进行这个测试，来模拟`click()`.

# regex - 正则表达式 - 公司名称

> ID：16030856
> 
> 赞同：0
> 
> 时间：2013-04-16T07:10:01.913
> 
> 标签：regex

我有纯文本，需要提取公司名称。这是一个巨大的文件，包括公司名称、财务报告和大量文本。以下是公司名称的**示例**：

*   大洗衣房，如
*   阿维拉, sro
*   Airoflot 航空公司，如

甚至可以像这样制作正则表达式吗？我是正则表达式的初学者，不知道如何创建这个。谢谢你的帮助。

文本示例：

`AVERA的竞争对手很多，sro主要是Airflot Airlines，as和Big洗衣店，sro这些组织占据了主要的市场份额。其他公司：

一个。大公司，如

湾。较小的公司，sro

C。巨大的公司，如`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:24:27.600

就目前的问题而言，不，不可能为公司名称创建正则表达式。

如果您能够创建 PATTERN，那将是可能的。

表示例如公司名称总是：

*   以大写字母开头
*   有逗号
*   在逗号之后总是有“as”或“sro”之一

所以，我在这里看到的困难是：

*   逗号前有多少个单词属于这个名字？
*   以下缩写总是有逗号吗？

**名称总是难以匹配，因为名称几乎可以代表所有内容，尤其是公司名称。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:24:43.317

您提供的示例遵循此模式：`([A-Z][A-Za-z]+ ?)+, (\w\.)+`

匹配操作将取决于您使用的工具。

例如在 JavaScript 中：

```
var line = "some name is Airoflot Airlines, a.s. in this line";
var m = line.match(/([A-Z][A-Za-z]+ ?)+, (\w\.)+/);
if (m.length) console.log(m[0]); 
```

这记录

```
"Airoflot Airlines, a.s." 
```

但这不是一个非常可靠的解决方案：许多真实的公司名称不适合，更重要的是，这可能会匹配不是公司名称的句子。因此，这只能用作解决方案中的帮助，该解决方案还包含某种验证（基于人工或字典）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-13T14:29:27.587

我用这个

```
(?:\s*[a-zA-Z0-9,_\.\077\0100\*\+\&\#\'\~\;\-\!\@\;]{2,}\s*)* 
```

它匹配所有 az、AZ、0-9 和 Quickbook 支持的一些特殊字符。 [https://community.intuit.com/articles/1146006-acceptable-characters-in-the-company-name-in-quickbooks-online](https://community.intuit.com/articles/1146006-acceptable-characters-in-the-company-name-in-quickbooks-online)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-16T07:14:10.063

根据您给定的示例，此正则表达式将匹配

```
Big laundry, a\.s\.|AVERA, s\.r\.o\.|Airoflot Airlines, a\.s\. 
```

诀窍是使用交替运算符 | 在一组字符串上

您不妨考虑在公司名称中缺少标点符号和空格

# flash - 无需反编译即可加入 2 个 Flash 横幅？

> ID：16030857
> 
> 赞同：0
> 
> 时间：2013-04-16T07:10:02.537
> 
> 标签：flash, actionscript

我的网站上有 2 个横幅在刷新时会发生变化，客户希望 1 个横幅一个接一个地开始，有没有办法在不反编译的情况下做到这一点？取消编译是不可能的，因为这两个横幅都使用不公开的字体（公司字体），并且横幅在 Flash 中打开后会被破坏。我尝试直接在 Flash 中导入 swf 文件，但字体仍然存在同样的问题。有人知道我该怎么做吗？

# java - 为什么在 finally 块中更改返回的变量不会更改返回值？

> ID：16030858
> 
> 赞同：148
> 
> 时间：2013-04-16T07:10:11.477
> 
> 标签：java, try-finally

我有一个简单的 Java 类，如下所示：

```
public class Test {

    private String s;

    public String foo() {
        try {
            s = "dev";
            return s;
        } 
        finally {
            s = "override variable s";
            System.out.println("Entry in finally Block");  
        }
    }

    public static void main(String[] xyz) {
        Test obj = new Test();
        System.out.println(obj.foo());
    }
} 
```

这段代码的输出是这样的：

```
Entry in finally Block
dev 
```

为什么`s`没有在`finally`块中覆盖，而是控制打印输出？

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2013-04-16T07:13:40.503

`try`块随着语句的执行而完成，`return`语句执行`s`时`return`的值是方法返回的值。`finally`子句稍后更改`s`（在语句完成后）的值这一事实（`return`此时）不会更改返回值。

请注意，上面处理的`s`是块中自身值的更改`finally`，而不是`s`引用的对象。如果`s`是对可变对象的引用（`String`不是）并且对象的*内容*在`finally`块中发生了更改，那么这些更改将在返回值中看到。

所有这些操作的详细规则可以在[Java 语言规范的第 14.20.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.20.2)中找到。请注意，`return`语句的执行算作`try`块的突然终止（“*如果 try 块的执行由于任何其他原因突然完成 R...* ”的部分开始适用）。请参阅[JLS 的第 14.17 节，](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.17)了解为什么`return`语句是块的突然终止。

通过进一步的细节：如果语句的`try`块和`finally`块都`try-finally`因为语句而突然终止`return`，则适用第 14.20.2 节中的以下规则：

> 如果`try`块的执行由于任何其他原因突然完成 R [除了抛出异常]，则`finally`执行该块，然后有一个选择：
> 
> *   如果`finally`块正常完成，那么`try`语句会因为原因 R 突然完成。
> *   如果`finally`块由于原因 S 突然完成，那么`try`语句由于原因 S 突然完成（并且原因 R 被丢弃）。

结果是块中的`return`语句`finally`决定了整个`try-finally`语句的返回值，而`try`块中的返回值被丢弃。类似的事情发生在`try-catch-finally`语句中，如果`try`块抛出异常，它被`catch`块捕获，并且`catch`块和`finally`块都有`return`语句。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-04-16T07:12:59.470

因为返回值是在调用 finally 之前放入堆栈的。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2013-04-16T10:08:28.163

如果我们查看字节码内部，我们会注意到 JDK 进行了重大优化，**foo()**方法如下所示：

```
String tmp = null;
try {
    s = "dev"
    tmp = s;
    s = "override variable s";
    return tmp;
} catch (RuntimeException e){
    s = "override variable s";
    throw e;
} 
```

和字节码：

```
0:  ldc #7;         //loading String "dev"
2:  putstatic   #8; //storing it to a static variable
5:  getstatic   #8; //loading "dev" from a static variable
8:  astore_0        //storing "dev" to a temp variable
9:  ldc #9;         //loading String "override variable s"
11: putstatic   #8; //setting a static variable
14: aload_0         //loading a temp avariable
15: areturn         //returning it
16: astore_1
17: ldc #9;         //loading String "override variable s"
19: putstatic   #8; //setting a static variable
22: aload_1
23: athrow 
```

java在返回之前保留了“dev”字符串不被更改。事实上，这里根本没有 finally 块。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-04-16T07:16:26.727

这里有两点值得注意：

*   字符串是不可变的。当您将 s 设置为“覆盖变量 s”时，您将 s 设置为引用内联字符串，而不是将 s 对象的固有字符缓冲区更改为“覆盖变量 s”。
*   您将 s 的引用放在堆栈上以返回调用代码。之后（当 finally 块运行时），更改引用不应该对已经在堆栈上的返回值做任何事情。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-04-16T07:22:19.490

我稍微更改了您的代码以证明 Ted 的观点。

正如您在输出中看到的那样，`s`确实发生了变化，但是在返回之后。

```
public class Test {

public String s;

public String foo() {

    try {
        s = "dev";
        return s;
    } finally {
        s = "override variable s";
        System.out.println("Entry in finally Block");

    }
}

public static void main(String[] xyz) {
    Test obj = new Test();
    System.out.println(obj.foo());
    System.out.println(obj.s);
}
} 
```

输出：

```
Entry in finally Block 
dev 
override variable s 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-04-16T07:23:48.043

从技术上讲，`return`如果定义了一个块，try 块中的 将不会被忽略`finally`，除非该 finally 块还包含一个`return`.

这是一个可疑的设计决定，回想起来可能是一个错误（就像引用默认为空/可变，并且根据某些检查异常）。在许多方面，这种行为与对含义的通俗理解完全一致`finally`——“无论`try`块中预先发生什么，总是运行这段代码。” 因此，如果您从`finally`块中返回 true，则整体效果必须始终为 to `return s`，不是吗？

一般来说，这很少是一个好的习惯用法，你应该`finally`自由地使用块来清理/关闭资源，但很少从它们返回值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-16T07:15:34.653

试试这个：如果你想打印 s 的覆盖值。

```
finally {
    s = "override variable s";    
    System.out.println("Entry in finally Block");
    return s;
} 
```

# jquery - 在表单操作中传递文本框值

> ID：16030859
> 
> 赞同：-4
> 
> 时间：2013-04-16T07:10:21.070
> 
> 标签：jquery, html

```
<form method="post" action="http://xyz.com/?value="+textBox1.val+"&area="+textBox2.val>
    <input type="text" name="textBox1"></input>
    <input type="text" name="textBox2"></input>
    <div>Click here</div>
</form> 
```

单击 div.text “单击此处”时，必须执行表单操作。

文本框值应该填充到 url 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:13:48.330

使用表单属性而不是 javascript 或 jquery

```
 <form method="get" action="http://xyz.com/">
   <input type="text" name="value" />
   <input type="text" name="area" />
   <input type="submit" value="Click here"/>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:16:50.263

由于您缺少`id`或`class`属性，我将根据您的代码回答。强烈建议您改用类。

```
$('form div').on( 'click', function( e ) {
    e.stopPropagation();
    $.ajax( {
        url: "http://xyz.com/",
        type: 'get',
        data: {value: $('input[name=textBox1]').val(), area: $('input[name=textBox2]').val()},
        success: function( data ) {
            console.log( data );
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:17:10.537

您的表单方法是 post .. 因此无需将 textBox1 附加到 url。如果需要将 appendinmg 附加到 url .. 使用 get 方法（form method="get"）。

```
<form name="myForm" method="post" action="http://xyz.com">
    <input type="text" name="textBox1"></input>
    <input type="text" name="textBox2"></input>
    <div onclick="document.myForm.submit()">Click here</div>
</form> 
```

# c# - C# & LinkedIn：从桌面应用程序验证用户？

> ID：16030865
> 
> 赞同：1
> 
> 时间：2013-04-16T07:10:36.150
> 
> 标签：c#, wpf, linkedin

我必须从桌面应用程序 (WPF) 中对 LinkedIn 用户进行身份验证。

[这里](http://developer.linkedin.com/documents/authentication)的官方指南建议：

> 将用户重定向到 LinkedIn 的授权对话框

（显然，在 Web 应用程序的上下文中）

但是我究竟如何在桌面应用程序中解决这个问题？

我是否打开客户端浏览器并将用户重定向到链接？

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-16T07:16:01.077

查看这些链接：

[领英开发者帮助](http://developer.linkedin.com/thread/1190)

[WordPress 邮政](http://scatteredcode.wordpress.com/2011/12/01/dotnetopenauth-oauth-and-mvc-for-dummies/)

[领英工具包帮助](http://linkedintoolkit.codeplex.com/)

[领英 Windows 客户端](https://github.com/fyasar/LinkedIn-Windows-Client)

# environment - 在使用 suPHP 时访问 PHP 脚本中的环境变量

> ID：16030866
> 
> 赞同：1
> 
> 时间：2013-04-16T07:10:44.353
> 
> 标签：environment, suphp

我能够成功设置 suPHP 并且运行良好。但是我在访问我在 /etc/init.d/httpd 中设置的环境变量时遇到了问题。在使用 suPHP 之前，我可以使用可变顺序 EGPCS 选项在我的 PHP 脚本中访问它们。

我不想在我的脚本中使用 setEnv() 因为我有很多变量并且在所有脚本中更改它们并不是我喜欢的。

请建议访问这些变量的方法。

谢谢莫塔西姆

# android - 当软件键盘显示时，活动“上移” - 只是有时。为什么？

> ID：16030877
> 
> 赞同：1
> 
> 时间：2013-04-16T07:11:17.870
> 
> 标签：android, android-activity, android-softkeyboard

问题很简单 - 我有一个活动，里面有一个 textview 或 edittext，当我专注于它时，软件键盘显示。没关系。但有时（我在这里看不到任何逻辑）是整个活动布局，比如向上移动或怎么说。这种情况很少见，但有时会发生。

当然，我们中的许多人都有相同的经历，我在问为什么会发生这种不可预测的行为以及如何强制软件键盘始终以相同的方式运行？有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:22:48.037

添加 `android:windowSoftInputMode="adjustResize"`到您`Activity` 的`AndroidManifest.xml`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:18:42.027

您可以通过在清单文件中设置活动的属性 android:windowSoftInputMode 来控制它。

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:23:12.447

添加`android:windowSoftInputMode="adjustPan"`到`Manifest.xml`文件中的活动。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-16T07:18:28.780

您应该看一下[`android:windowSoftInputMode`](http://developer.android.com/guide/topics/manifest/activity-element.html)标志，您可以`<activity>`在`AndroidManifest.xml`. 也许你应该使用`adjustPan`.

# java - GraphicsProgram 弹跳球程序不动

> ID：16030881
> 
> 赞同：0
> 
> 时间：2013-04-16T07:11:29.287
> 
> 标签：java

我正在尝试编写一个程序，该程序可以在一个窗口内连续弹跳一个球以进行家庭作业。这是我正在尝试做的一个简短的[youtube 视频。](http://www.youtube.com/watch?v=18GSNaSwgHs)由于现在正在编写程序，所以球没有移动，我不明白为什么。

我有两个问题：

1.  为什么球不动，我做错了什么？
2.  我应该使用 >= 和 <= 运算符而不是我在 IF（条件）中使用的 > 和 < 运算符吗？

* * *

```
import acm.program.*;
import acm.graphics.*;

publc class BallBouncing extends GraphicsProgram{
public void run(){

   GOval ball = new GOval(getWidth() / 2, getHeight() / 2, OVAL_SIZE, OVAL_SIZE);
   ball.setFilled(true);
   add(ball);

   double dx = getWidth() / N_STEPS;
   double dy = getHeight() / N_STEPS;

   while(true){
       ball.move(dx, dy);
       pause(PAUSE_TIME);

        if (ball.getY() > getHeight() - OVAL_SIZE) { dy = dy * -1;}
        if (ball.getX() > getWidth() - OVAL_SIZE) { dx = dx * -1;}
        if (ball.getY() < 0 + OVAL_SIZE) { dy = dy * -1;}
        if (ball.getX() < 0 + OVAL_SIZE) { dx = dx * -1;}

      }
    }  

 private static final int STEPS = 1000;
 private static final int PAUSE_TIME = 5;
 private static final int OVAL_SIZE = 25;

 } 
```

# sql - 更新多个列时，包含 .WRITE 子句的 UPDATE 是原子的吗？

> ID：16030886
> 
> 赞同：3
> 
> 时间：2013-04-16T07:11:48.810
> 
> 标签：sql, sql-server

以下语句是原子操作吗？

```
UPDATE [table1]
SET column1=@val1, column2.WRITE(@val2, NULL, 0) WHERE table1_id=@id 
```

还是应该将其放置在事务中以确保在出现错误情况时不更新任何列或两列？

列定义为：

```
column1 int not null, 
column2 varbinary(max) not null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T18:37:41.123

这是一种说法。在 SQL Server 中，每条语句都带有一个隐含事务。如果您想了解更多详细信息，这是另一个答案。

[围绕单个语句的事务有什么作用？](https://stackoverflow.com/questions/1171749/what-does-a-transaction-around-a-single-statement-do)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T19:12:57.927

[这是关于Autocommit Transactions](http://msdn.microsoft.com/en-us/library/ms187878%28v=sql.105%29.aspx)的 MSDN 参考，其中指出：

> 自动提交模式是 SQL Server 数据库引擎的默认事务管理模式。每个 Transact-SQL 语句在完成时都会提交或回滚。如果语句成功完成，则提交；如果遇到任何错误，则回滚。

[在 ADO.NET 中使用 UPDATE .WRITE 修改大值（最大值）数据](http://msdn.microsoft.com/en-us/library/bb399384.aspx)未记录影响 UPDATE 语句事务。

# python - 如何在 Python 中重新分配列表中的项目？

> ID：16030891
> 
> 赞同：3
> 
> 时间：2013-04-16T07:11:59.013
> 
> 标签：python, list, iteration

我想重新分配 Python 列表中的每个项目。

```
In [20]: l = [1,2,3,4,5]
In [21]: for i in l:
   ....:     i = i + 1
   ....:     
   ....: 
```

但这份名单根本没有改变。

```
In [22]: l
Out[22]: [1, 2, 3, 4, 5] 
```

我想知道为什么会这样。任何机构都可以详细解释列表迭代吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T07:14:58.857

你不能那样做，你只是改变绑定到 name 的值`i`。在循环的每次迭代中`for`，`i`都绑定到列表中的一个值。从某种意义上说，它不是一个指针，即通过更改`i`您的值正在更改列表中的值。相反，正如我之前所说，它只是一个名称，您只是更改名称所指的值。在这种情况下，`i = i + 1`, 绑定`i`到值`i + 1`。所以你实际上并没有影响列表本身，要做到这一点，你必须按索引设置它。

```
>>> L = [1,2,3,4,5]
>>> for i in range(len(L)):
        L[i] = L[i] + 1

>>> L
[2, 3, 4, 5, 6] 
```

一些 pythonistas 可能更喜欢这样迭代：

```
for i, n in enumerate(L): # where i is the index, n is each number
    L[i] = n + 1 
```

但是，您可以通过列表推导轻松获得相同的结果：

```
>>> L = [1,2,3,4,5]
>>> L = [n + 1 for n in L]
>>> L
[2, 3, 4, 5, 6] 
```

欲了解更多信息：[http ://www.effbot.org/zone/python-objects.htm](http://www.effbot.org/zone/python-objects.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:13:58.267

这是因为 Python 如何处理变量及其引用的值。

您应该修改列表元素本身：

```
for i in xrange(len(l)):
  l[i] += 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T07:28:21.050

```
>>> a = [1, 2, 3, 4, 5]
>>> a = [i + 1 for i in a]
>>> a
[2, 3, 4, 5, 6] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T07:21:47.023

最初 i 是指向列表内项目的指针，但是当您重新分配它时，它将指向新编号，这就是列表不会更改的原因。

对于可变对象列表，它将起作用：

```
class Number(object):
    def __init__(self,n):
        self.n=n
    def increment(self):
        self.n+=1
    def __repr__(self):
        return 'Number(%d)' % self.n

a = [Number(i) for i in xrange(5)]

print a
for i in a:
    i.increment()
print a 
```

但是 int 是不可变的，当你对它们进行操作时，你会得到一个新的 int 对象，这就是为什么它在你的情况下不起作用的原因。

# qt - 如何在 PyQt 中创建交互式平铺分组列表？

> ID：16030893
> 
> 赞同：0
> 
> 时间：2013-04-16T07:12:00.463
> 
> 标签：qt, pyqt, pyqt4, pyside

我需要创建这样的东西：

![http://i.stack.imgur.com/md5yW.png](https://i.stack.imgur.com/md5yW.png)

分组的平铺列表。组中的元素按每行中所需的元素数量自动排列。您可以选择或输入每个元素，也可以隐藏某些组。但我目前发现的只是`QListView`和`QTableView`。

# javascript - 从 Spotify API 检索匹配的歌曲 URI

> ID：16030895
> 
> 赞同：0
> 
> 时间：2013-04-16T07:12:05.793
> 
> 标签：javascript, api, uri, spotify

我一直在使用 Javascript 尝试使用以下代码从 Spotify WEB API 检索歌曲的 URI：

```
<script type='text/javascript'>
var xhr = new XMLHttpRequest();
xhr.open("GET", "http://ws.spotify.com/search/1/track.json?q=foo", false);
xhr.send();
var uri = (xhr.track);
</script> 
```

我想输入一个歌曲名称作为“q”参数，并将顶部结果的 uri 存储在一个变量中。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T19:54:52.447

您需要将响应解析为 JSON，然后选择曲目列表中第一个对象的 href 属性。

在代码中，按照您的示例，它可能如下所示：

`var uri = JSON.parse(xhr.response).tracks[0].href;`

# bluetooth - 摩托罗拉 XT910 从蓝牙低功耗标签 ticc2540、ticc2541、蓝色无线电标签读取 rssi 等于 0

> ID：16030896
> 
> 赞同：0
> 
> 时间：2013-04-16T07:12:06.040
> 
> 标签：bluetooth, motorola, rssi, energy

我开发了一个在摩托罗拉 RAZR XT910 上运行的 Android 应用程序，操作系统版本为 4.0.4。

此应用程序使用 Motorola_ICS_R2_sdkaddon_100 BluetoothGattService.jar 和 BluetoothGatt.jar 库并与蓝牙低功耗传感器标签（TI CC2540、TI CC2541、Blue Radios 传感器标签）进行通信。

在发现过程中，我总是读取等于 0 的 rssi 值。我使用以下代码在接收 Intent BluetoothDevice.ACTION_FOUND 时读取 rssi 值：

短 rssi = intent.getShortExtra(BluetoothDevice.EXTRA_RSSI,(short) 0);

同样对于非蓝牙低功耗设备，我读取的 rssi 值还可以（不等于 0）。

谁能帮我？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T19:37:52.633

我在 TI 讨论网站上发现了一个类似的问题，用于使用 Vender Specific query for RSSI。它似乎适用于经典 BT，但为 BLE 返回错误代码 2。

[http://e2e.ti.com/support/low_power_rf/f/660/t/289391.aspx](http://e2e.ti.com/support/low_power_rf/f/660/t/289391.aspx)

您无法获得价值可能是一个基本限制。在您的情况下，`getShortExtra`可能不会返回错误代码 (2)，而只返回 0 作为 RSSI。

# android - 如果我想让应用程序与平板电脑和移动设备兼容

> ID：16030897
> 
> 赞同：1
> 
> 时间：2013-04-16T07:12:12.807
> 
> 标签：android

如果我想让一个应用程序与平板电脑和移动设备兼容，我应该为移动设备创建一个项目，另一个为平板电脑使用相同的屏幕项目吗？感谢您的答复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T07:14:17.630

绝对为两者使用一个项目，除非它们具有完全不同的功能。通过为不同的屏幕尺寸提供不同的布局文件，您可以针对该项目中的每种设备类型调整您的应用程序的外观。看看[这篇](http://developer.android.com/guide/practices/screens_support.html)文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T07:17:00.893

您可以为手机和平板电脑创建一个 apk。

看看下面的链接

[http://developer.android.com/google/play/publishing/multiple-apks.html](http://developer.android.com/google/play/publishing/multiple-apks.html)

上面的链接中有引用说 **我们鼓励您开发和发布一个支持尽可能多的设备配置的单个 APK，这样做有时是不可能的**

因此，制作一个支持尽可能多设备的应用程序。仅在需要时考虑使用多个 apk。

[http://developer.android.com/guide/topics/manifest/supports-screens-element.html](http://developer.android.com/guide/topics/manifest/supports-screens-element.html) 例如，下面是一个应用程序中的资源目录列表，它为不同的屏幕尺寸和不同的位图drawables提供了不同的布局设计适用于中、高和超高密度屏幕。

为不同的屏幕尺寸设计不同的布局

```
res/layout/my_layout.xml             // layout for normal screen size ("default")  
res/layout-small/my_layout.xml       // layout for small screen size
res/layout-large/my_layout.xml       // layout for large screen size
res/layout-xlarge/my_layout.xml      // layout for extra large screen size
res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape orientation

res/drawable-mdpi/my_icon.png        // bitmap for medium density
res/drawable-hdpi/my_icon.png        // bitmap for high density
res/drawable-xhdpi/my_icon.png       // bitmap for extra high density 
```

手机和平板电脑的 main_activity.xml

```
res/layout/main_activity.xml           # For handsets
res/layout-sw600dp/main_activity.xml   # For tablets 
```

还可以查看下面的链接以了解多版本

[http://www.youtube.com/watch?v=amZM8oZBgfk](http://www.youtube.com/watch?v=amZM8oZBgfk)

[http://gargengineer.blogspot.in/2012/02/creating-android-phone-tablet.html](http://gargengineer.blogspot.in/2012/02/creating-android-phone-tablet.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T07:31:30.737

是的，您必须为要支持的所有设备创建一个项目。为了支持不同的屏幕尺寸和分辨率，您必须遵循一些指导方针。您已经知道应用程序开发过程中最大的问题之一是设备碎片。所以你可以在 res/layout 目录下实现不同的布局。您必须至少设计布局，布局小，布局大，布局-xlarge。请记住，显示方向可能会发生变化，因此您还应该实现 layout-land 等。关于图像，您必须为不同的设备屏幕密度创建不同的图像。 **您可以使用新的选择器，例如 layout-swxxxdp，其中 xxx 是分辨率。** 特别是在 res/drawable res/drawable-mdpi res/drawable-ldpi res/drawable-hdpi 下。您也可以支持更多的屏幕密度。 **使用不同的布局可能不足以满足您的应用程序。所以你可以考虑使用给你更多自由的片段，你可以重用你的代码。** 您可以混合布局和片段以更好地控制布局。特别是如果您想支持平板电脑和智能手机，我建议您使用片段。有关更多信息，您可以[在此处](http://www.survivingwithandroid.com/2012/07/how-to-support-multiple-screen-in.html)和[此处](http://www.survivingwithandroid.com/2013/03/android-fragment-tutorial-webview-example.html)查看片段。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T09:28:45.107

为不同的屏幕尺寸使用不同的资源/布局文件夹。他们不需要为平板电脑和移动设备创建单独的项目。利用 android 中根据设备屏幕尺寸自动调整大小的九补丁图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T07:24:37.283

不同功能的[设备支持同一应用程序的不同 APK](http://developer.android.com/google/play/publishing/multiple-apks.html)。

关键问题是，你能想出一种方法来让你的应用在小屏幕和大屏幕上使用相同或模块化的用户界面看起来不错。此外，您可能想要提供仅在功能更强大的设备上运行的高端版本。

在*某些*情况下，您可能希望拥有不同的 APK，但您必须了解成本。

但是，实际上，如果您查看市场上的许多应用程序，开发人员根本不知道如何优雅地处理不同的屏幕尺寸。

关于您上面的评论，*如果它具有相同的功能*：如果您问我，这*不是关键问题。*尽管这取决于您所说的*功能*。

# php - FOSJSRoutingBundle：“路由 xxx 不存在”

> ID：16030900
> 
> 赞同：21
> 
> 时间：2013-04-16T07:12:22.717
> 
> 标签：php, javascript, symfony

我在 FOSJSRoutingBundle 面临一个非常奇怪的问题：

首先，这是我的配置：我正在使用 Symfony 2.0.23 和 JQuery，在带有 WAMP（Apache 2.4.2 和 PHP 5.4.3）的 Windows 7 64 位上工作。我已经完成了 FOSJSRoutingBundle 的 github 上的所有设置，并公开了我的路线（我可以通过谷歌搜索找到的几乎所有相关问题（在 FOSJSRoutingBundle 的 github、here 和不同的论坛上）都是因为人们没有公开他们的路线，但我试过了php app/console fos:js-routing:debug 并且我确实看到了我的路由）。将js添加到布局中（最后的布局代码）。

尝试在 js 中为路由生成 url，一开始我想生成两个不同的路由，但为了测试，我创建了下面的 js 代码：

```
 //Code inside this function is working
    $("select").change(function () {
      param=this.options[this.selectedIndex].value;
      test1=Routing.generate('myBundle_step3', { myParam: param });
      alert(test1);
      window.location=Routing.generate('myBundle_step2');
    });
    //Code inside this one is also working
    $('input[type="checkbox"]').change(function() {
      test=Routing.generate('myBundle_step2');
    }).change();
    //This is not working
    test=Routing.generate('myBundle_step2');
    alert(test); 
```

使用此代码，我收到 javaScript 错误“路径 myBundle_step2 不存在”。虽然第一部分仍然有效（警报给了我创建的链接并且重定向顺利）。如果我删除第二个函数，我不会再收到 Javascript 错误。

如果在第二个函数中我将 step2 替换为 step3，则错误变为“路由 myBundle_step3 不存在”。我试图清除缓存并再次运行 php app/console asset:install --symlink，但没有结果。

这是控制器对应的代码（实际代码有点长，我认为它不相关，如果你这么认为，我可以把它反正：

```
 namespace my\Bundle\Controller;
    class IndividuController extends Controller
    {
      public function step2Action() {
        Some code
      }
      public function step3Action($myParam) {
        Some code
      }
    } 
```

相对于 bundle 的 routing.yml 配置文件：

```
 myBundle_step2:
      pattern: /step/2
      defaults: {_controller: myBundle:Individu:step2}
      options:
        expose: true
    myBundle_step3:
      pattern: /step/3/{myParam}
      defaults: {_controller: myBundle:Individu:step3}
      options:
        expose: true 
```

app/config/routing.yml 文件：

```
 fos_js_routing:
      resource: "@FOSJsRoutingBundle/Resources/config/routing/routing.xml"

    myBundle:
      resource: "@myBundle/Resources/config/routing.yml"
      prefix:   / 
```

布局的相关信息：

```
 <!-- jQuery via Google + local fallback, see h5bp.com -->
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">    </script>
        <script>window.jQuery || document.write('<script src="js/jquery-1.7.1.min.js"><\/script>')</script>
           {% javascripts 'bootstrap/js/bootstrap.js'
                        'bundles/fosjsrouting/js/router.js'
                        'bundles/crrisuaps/js/suaps.js' %}
               <script type="text/javascript" src="{{ asset_url }}"></script>
           {% endjavascripts %}
        <script src="{{ path('fos_js_routing_js', {"callback": "fos.Router.setData"}) }}"></script>
       </body>
    </html> 
```

php app/console router:debug 的结果（我只留下了相关信息 + 我留下了未定义的变量通知以防万一，这是我添加这个库后收到的通知，但该库仍然有效，我认为问题不会从这里来：

> C:\wamp\www\suapsRepo\suaps>php 应用程序/控制台路由器：调试
> 
> 注意：未定义变量：第 80 行 C:\wamp\www\suapsRepo\suaps\vendor\html2 pdf_class\tcpdfConfig.php 中的 kPathUrl
> 
> 调用堆栈：0.0070 231536 1\. {main}() C:\wamp\www\suapsRepo\suaps\app\console:0 0.0209 685656 2\. require_once('C:\wamp\www\suapsRepo\suaps\app\bootstr ap .php.cache') C:\wamp\www\suapsRepo\suaps\app\console:10 0.0212 701752 3.require_once('C:\wamp\www\suapsRepo\suaps\app\autoloa d.php') C: \wamp\www\suapsRepo\suaps\app\bootstrap.php.cache:3 0.1335 2998152 4.require_once('C:\wamp\www\suapsRepo\suaps\vendor\html 2pdf\html2pdf.class.php') C: \wamp\www\suapsRepo\suaps\app\autoload.php:51 0.1379 3361792 5.require_once('C:\wamp\www\suapsRepo\suaps\vendor\html 2pdf_class\myPdf.class.php') C:\wamp \www\suapsRepo\suaps\vendor\html2pdf\html2p df.class.php:19 0.1385 3393792 6.require_once('C:\wamp\www\suapsRepo\suaps\vendor\html 2pdf_class\tcpdfConfig.php') C:\wamp\www\suapsRepo\suaps\vendor\html2pdf_class \myPdf.class.php:12

[路由器] 当前路线

```
 Name                                            Method Pattern
    _assetic_55f0319                                ANY    /css/55f0319.css
    _assetic_55f0319_0                              ANY    /css/55f0319_bootstrap_1.
    css
    _assetic_55f0319_1                              ANY    /css/55f0319_bootstrap-re
    sponsive_2.css
    _assetic_55f0319_2                              ANY    /css/55f0319_style_3.css
    _assetic_3608a04                                ANY    /js/3608a04.js
    _assetic_3608a04_0                              ANY    /js/3608a04_bootstrap_1.j
    s
    _assetic_3608a04_1                              ANY    /js/3608a04_router_2.js
    _assetic_3608a04_2                              ANY    /js/3608a04_suaps_3.js

    fos_js_routing_js                               ANY    /js/routing.{_format}
    myBundle_homepage                        ANY    /

    myBundle_inscription_etape1              ANY    /inscription/etape/1
    myBundle_inscription_etape2              ANY    /inscription/etape/2
    myBundle_inscription_etape3              ANY    /inscription/etape/3/{dis
    ciplineSelection} 
```

php app/console fos:js-routing:debug 的结果（我删除了 PHP 通知，但它发生在我制作的每个命令上）：

```
 C:\wamp\www\suapsRepo\suaps>php app/console fos:js-routing:debug
    [router] Current routes
    Name                               Method Pattern
    crrisuapsBundle_inscription_etape2 ANY    /inscription/etape/2
    crrisuapsBundle_inscription_etape3 ANY    /inscription/etape/3/{disciplineSelect
    ion} 
```

编辑：另外，不知道它是否相关，但是当我尝试 'php app/console fos:js-routing:debug myBundle_step2' 时，我收到以下 php 错误：

> [错误异常] 警告：缺少 Symfony\Bundle\FrameworkBundle\Command\RouterDebugCommand:outputRoute() 的参数 3，在第 62 行的 C:\symfonyDirectory\vendor\bundles\FOS\JsRoutingBundle\Command\RouterDebugExposedCommand.php 中调用并在C:\serverDirectory\vendor\symfony\src\Symfony\Bundle\FrameworkBundle\Command\RouterDebugCommand.php 第 98 行

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2014-03-13T12:58:14.643

我也有这个问题。`options.expose`在路由配置上设置参数为我解决了这个问题。

**路由.yml**

```
cart_edit:
    pattern:  /Cart/edit
    defaults: { _controller: CartCartBundle:Default:cart_edit }
    options:
        expose: true 
```

**我的.js**

```
var url = Routing.generate('cart_edit');
$.post(url, function(data) {
      //do somthing
}); 
```

根据需要进行更改。希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-28T13:15:30.213

我有同样的问题，问题出在我的配置文件中。尝试检查这一点：

```
# app/config/config.yml
fos_js_routing:
    routes_to_expose: [ myBundle_step2, myBundle_step3, ... ] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-10-30T16:39:46.150

仅出于完整性考虑：也可以按照[文档](https://symfony.com/doc/master/bundles/FOSJsRoutingBundle/usage.html#generating-uris)`options={"expose"=true}`中的说明使用注释 () ：

```
// src/AppBundle/Controller/DefaultController.php

/**
 * @Route("/foo/{id}/bar", options={"expose"=true}, name="my_route_to_expose")
 */
public function indexAction($foo) {
    // ...
} 
```

这也适用于控制器级别的路由集（来自我的一个控制器的示例）：

```
/**
 * Channel controller.
 *
 * @Route("account/{account}/todos", options={"expose"=true})
 * @ParamConverter("account", class="AppBundle:Account", options={
 *     "repository_method" = "findOneById",
 *     "mapping": {"account": "id"},
 *     "map_method_signature" = true
 * })
 */
class TodoListController extends Controller
{ 
```

# c# - 在 UI 线程上执行长任务

> ID：16030901
> 
> 赞同：2
> 
> 时间：2013-04-16T07:12:47.893
> 
> 标签：c#, wpf, xaml, user-interface, binding

我正在开发一个简单的自定义控件，它应该充当菜单系统。它由 2 个按钮组成：返回和主页以及上面的菜单项。ControlTemplate 看起来像这样：

```
 <ControlTemplate x:Key="FancyColorPickerTemplate">
        <menu:BusyDecorator x:Name="BusyDecorator"  Style="{StaticResource BusyDecoratorStyle}">
            <menu:BusyDecorator.IsBusyIndicatorShowing>
                <PriorityBinding>
                    <Binding Path="IsBusy" RelativeSource="{RelativeSource AncestorType={x:Type CustomControls:Menu}}"/>
                </PriorityBinding>
            </menu:BusyDecorator.IsBusyIndicatorShowing>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="0.70*"/>
                    <RowDefinition Height="0.30*"/>
                </Grid.RowDefinitions>

                <ItemsControl Grid.Row="0" Name="Part_ItemControl" 
                        ItemTemplateSelector="{StaticResource imgStringTemplateSelector}"
                          HorizontalAlignment="Center" VerticalAlignment="Center">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel Orientation="Horizontal"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
                <Button  Grid.Row="1" Name="PART_BackButton"  FontSize="20" Content="Back" HorizontalAlignment="Left" />
                <Button  Grid.Row="1" Name="PART_HomeButton"  FontSize="20" Content="Home" HorizontalAlignment="Center" />
            </Grid>
        </menu:BusyDecorator>
    </ControlTemplate> 
```

在 ItemsControl 上有一个 ItemTemplateSelector 用于选择显示元素的 DataTemplate（可以是按钮或用户控件）。例子 ：

```
 <DataTemplate x:Key="ButtonTemplate">
        <Grid Margin="10,0,10,0">
            <Button Content="{Binding Title}" ></Button>
          </Grid>
    </DataTemplate>

    <DataTemplate x:Key="UserControlTemplate">
        <Grid Margin="10,0,10,0">
            <CustomControls:ColorPickerUserControl Width="200"   Height="200"/>
        </Grid>
    </DataTemplate> 
```

在 Codebehind 中，如果需要，我检查单击了哪个元素并加载子菜单（通过设置 ItemsControl 的 ItemsSource 属性）：

```
 void Menu_PreviewMouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        ItemsControl itemsControl = GetTemplateChild("Part_ItemControl") as ItemsControl;
        object item = GetElementFromPoint(itemsControl, e.GetPosition(itemsControl));

        if (item != null && item is MenuItem2)
        {
            MenuItem2 mi = item as MenuItem2;
            if (mi.SubMenu != null)
            {
                IsBusy = true;
                Dispatcher.BeginInvoke(DispatcherPriority.Background, new Action(() =>
                 {
                     MenuItems = new ObservableCollection<MenuItem2>(mi.SubMenu.Items);
                     IsBusy = false;
                 }));
                m_MenuStack.Push(mi.SubMenu);
            }
            else
            {
                if (!IsBusy)
                {
                    ExecuteAction(mi.Ac);
                }
            }
        }
        else
            Console.WriteLine("no item found");
    } 
```

上面代码中的 MenuItems 绑定到 ItemsSource 属性，该属性会重新评估 ItemsControl 并根据 DataTemplateSelector 应用相应的 DataTemplate。我的代码中的问题在于上面的 IsBusy 属性，它应该显示 BusyDecorator（参见 xaml），而 DataTemplate 是一个需要很长时间才能显示的 UserControl。它不起作用，因为我猜 UserControl 正在 UI 线程上加载，并且 IsBusy 属性会触发 UI 线程上的操作。

我是否采用了错误的方法？有什么办法可以使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:43:13.433

您始终可以设置繁忙标志并在繁忙集的渲染完成后安排 UI 线程上的其余工作。

这里的神奇之处在于线程使用优先级进行调度，`System.Windows.Threading.DispatcherPriority.Render`这使得任务与渲染同时运行。

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Button Click="Button_Click_1">LongTask</Button>
        <TextBlock Grid.Row="1" Text="{Binding IsBusy}"/>
    </Grid>
</Window> 
```

和背后的代码

```
using System;
using System.Threading;
using System.Windows;

namespace WpfApplication1
{
    public partial class MainWindow : Window
    {
        public bool IsBusy
        {
            get { return (bool)GetValue(IsBusyProperty); }
            set { SetValue(IsBusyProperty, value); }
        }

        public static readonly DependencyProperty IsBusyProperty = DependencyProperty.Register("IsBusy", typeof(bool), typeof(MainWindow), new PropertyMetadata(false));

        public MainWindow()
        {
            InitializeComponent();
        }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            IsBusy = true;
            this.Dispatcher.BeginInvoke(new Action(() =>
            {
                Thread.Sleep(2000);

                IsBusy = false;
            }), System.Windows.Threading.DispatcherPriority.Render, null);
        }
    }
} 
```

# asp.net-mvc-4 - 在 ASP.NET MVC 4 的调试模式下启用捆绑和缩小

> ID：16030905
> 
> 赞同：117
> 
> 时间：2013-04-16T07:13:02.363
> 
> 标签：asp.net-mvc-4

我不敢相信我找不到关于此的其他问题，但是：如何在调试模式下*启用*捆绑？我知道它是如何启用发布模式的，但在调试模式下我找不到启用捆绑的方法。

这甚至可能还是我错过了什么？

* * *

## 回答 #1

> 赞同：223
> 
> 时间：2013-04-16T07:16:27.493

您可以通过添加启用此功能

```
BundleTable.EnableOptimizations = true; 
```

在您的 RegisterBundles 方法中（App_Start 文件夹中的 BundleConfig 类）。

检查[http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)了解更多信息

您还可以更改您的 web.config：

```
<system.web>
    <compilation debug="false" />
</system.web> 
```

但这会完全禁用调试模式，所以我会推荐第一个选项。

最后，为了两全其美，使用 #if 编译器指令，如下所示：

```
#if DEBUG
            BundleTable.EnableOptimizations = false;
#else
            BundleTable.EnableOptimizations = true;
#endif 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-16T07:16:31.823

添加 文件`BundleTable.EnableOptimizations = true;`的`Application_Start()`方法`Global.asax`

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-09-02T12:42:06.953

在 Global.asax 添加`BundleConfig.RegisterBundles(BundleTable.Bundles);`

```
 protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            WebApiConfig.Register(GlobalConfiguration.Configuration);
            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);
            BundleConfig.RegisterBundles(BundleTable.Bundles); // add this
        } 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-04-16T07:19:53.893

[MS 官方网站](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)在调试时指出无法启用它。我认为原因是，在禁用时更容易调试。如果要测试对应用程序的影响，您必须`<compilation debug="true" />`在 Web.config 中设置

@Hebe：引用 MS 页面

> 在开发环境中调试 JavaScript 很容易（其中 Web.config 文件中的编译元素设置为 debug="true" ），因为 JavaScript 文件没有捆绑或缩小。

# python - 使用 py2app 部署使用 opencv for Mac 的应用程序

> ID：16030908
> 
> 赞同：3
> 
> 时间：2013-04-16T07:13:30.467
> 
> 标签：python, opencv, deployment, static-linking, py2app

我在 python 中完成了一个严重依赖于 opencv 的计算机视觉算法的脚本。我希望能够部署一个独立的应用程序以在 Mac OS 下工作，您不必为其预安装任何依赖项。

在网上搜索了几个小时后，我发现人们投票支持 py2app，但是关于如何包含用于构建的 opencv 库的细节并不多。

*   如果你成功部署了类似的应用程序，请告诉我你做了什么？

# database - 如何使用 IBM Data Studio 在 db2 10.1 中创建新实例

> ID：16030914
> 
> 赞同：1
> 
> 时间：2013-04-16T07:13:46.797
> 
> 标签：database, db2

如何使用带有示例的命令行 db2icrt 命令或使用 Data Studio 客户端在 db2 10.1 中创建新实例。

请任何人回复。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T09:02:09.393

您使用的是哪个操作系统。

**在 Lunix/UNIX/OS X 中**

你有两个选择：

*   实例的专用用户

您需要在 OS (useradd) 中创建一个具有文件系统的用户

```
useradd -m db2inst2
/opt/db2/10.1/instance/db2icrt -u db2inst1 db2inst1 
```

*   你自己的用户

您在家中安装 DB2，然后您的用户名将是实例的名称（非 root 安装）

**在 Windows 中**

该命令不需要实例的专用用户。

# jsf - FullAjaxExceptionHandler 在会话无效后不会重定向到错误页面

> ID：16030922
> 
> 赞同：3
> 
> 时间：2013-04-16T07:14:08.117
> 
> 标签：jsf, jsf-2, primefaces, weblogic12c, omnifaces

我遇到了 Omnifaces FullAjaxExceptionHandler ( [http://showcase.omnifaces.org/exceptionhandlers/FullAjaxExceptionHandler](http://showcase.omnifaces.org/exceptionhandlers/FullAjaxExceptionHandler) ) 的问题。会话失效后，它不会重定向到指定的错误页面。

我的 faces-config 中有以下内容：

```
<factory>
    <exception-handler-factory>org.omnifaces.exceptionhandler.FullAjaxExceptionHandlerFactory</exception-handler-factory>
</factory> 
```

我的 web.xml 中有以下内容：

```
<error-page>
    <exception-type>javax.faces.application.ViewExpiredException</exception-type>
    <location>/pages/error/viewExpired.html</location>
</error-page> 
```

在我使会话无效后，从用户的角度来看，似乎什么都没有发生。该应用程序只是“死”了。在我的控制台中，我看到以下 Ajax 请求：

*   对原始 facelet 页面的 POST 响应代码为 302
*   使用代码 200 获取登录页面（但没有任何反应，因为它是通过 Ajax 请求的）

我在 WebLogic 12c 上运行 MyFaces 2.1.10、Primefaces 3.5、Primefaces Extension 0.6.3 和 Omnifaces 1.4.1

任何人都可以帮助我朝着正确的方向前进吗？如何让 FullAjaxExeptionHandler 正常工作？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:06:29.250

> *对原始 facelet 页面的 POST 响应代码为 302*

这个不对。JSF ajax 请求上的重定向必须具有 200 的响应代码和一个特殊的 XML 响应，其属性中包含一个`<redirect>`带有目标 URL 的元素。`url`

因此，这表明您`HttpServletResponse#sendRedirect()`在 JSF 有机会处理`ViewExpiredException`.

也许您在某个地方有一个 servlet 过滤器，它检查某些会话属性并根据其存在/状态发送重定向？然后应该根据以下答案操作该过滤器：[JSF Filter not redirecting After Initial Redirect](https://stackoverflow.com/questions/13366936/jsf-filter-not-redirecting-after-initial-redirect/13369719#13369719)以识别 JSF ajax 请求并返回特殊的 XML 响应而不是 302 响应。

例如

```
if ("partial/ajax".equals(request.getHeader("Faces-Request"))) {
    response.setContentType("text/xml");
    response.getWriter()
        .append("<?xml version=\"1.0\" encoding=\"UTF-8\"?>")
        .printf("<partial-response><redirect url=\"%s\"></redirect></partial-response>", loginURL);
} else {
    response.sendRedirect(loginURL);
} 
```

这一切都与`FullAjaxExceptionHandler`. JSF 没有任何机会抛出 a `ViewExpiredException`，因为您自己已经提前发送了重定向。

# python - 用于排列的递归列表理解。Python

> ID：16030923
> 
> 赞同：3
> 
> 时间：2013-04-16T07:14:08.587
> 
> 标签：python, recursion, list-comprehension

我在 python 中有一个函数，它是在列表理解中递归编程的。但我不清楚它到底发生了什么！

```
def permut(s,l):
    if l == []: return [[s]]
    return [ e + [l[0]] for e in permut(s, l[1:])] + [l+[s]] 
```

该函数有两个参数，第一个是字符串，第二个是列表，它返回列表中字符串的排列。

```
permut('a', [1,2,3])
[['a', 3, 2, 1], [3, 'a', 2, 1], [2, 3, 'a', 1], [1, 2, 3, 'a']] 
```

有人可以解释一下，列表理解中会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:21:39.617

如果列表推导语法让您失望，您可以按如下方式重写此函数并添加一些 debug `print()`：

```
def permut(s,l):
    print("Entering function permut()")
    print("Parameters:\ns: {}\nl: {}".format(s,l))
    if l == []: 
        print("End of recursion reached, returning {}".format([[s]]))
        return [[s]]
    result = []
    for e in permut(s, l[1:]):
        result.append(e + [l[0]])
    result += [l + [s]]
    print("Returning {}".format(result))
    return result 
```

这是你得到的输出：

```
>>> permut('a', [1,2,3])
Entering function permut()
Parameters:
s: a
l: [1, 2, 3]
Entering function permut()
Parameters:
s: a
l: [2, 3]
Entering function permut()
Parameters:
s: a
l: [3]
Entering function permut()
Parameters:
s: a
l: []
End of recursion reached, returning [['a']]
Returning [['a', 3], [3, 'a']]
Returning [['a', 3, 2], [3, 'a', 2], [2, 3, 'a']]
Returning [['a', 3, 2, 1], [3, 'a', 2, 1], [2, 3, 'a', 1], [1, 2, 3, 'a']]
[['a', 3, 2, 1], [3, 'a', 2, 1], [2, 3, 'a', 1], [1, 2, 3, 'a']] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T07:42:36.133

首先，你有`a`而不是`s`递归`permut`调用。

```
return [ e + [l[0]] for e in permut(a, l[1:])] + [l+[s]] 
```

首先，它计算`permut(s, l[1:])`，即：尝试置换`s`列表中没有第一个元素的部分。只要有任何元素，它就会丢弃第一个元素，然后递归调用返回 [[s]]。

现在，在调用中倒退，`s`被“添加”到递归创建的列表的每个元素中，然后`l`附加给定，结果是：

```
# l == []
return [['a']]

# e == ['a']
# l == [3], l[0] == 3
return [['a'] + [3]] + [[3] + [a]]
# equals [['a', 3], [3, 'a']]

# e == ['a', 3] then [3, 'a']
# l == [2, 3], l[0] == 2
return [['a', 3] + [2], [3, 'a'] + [2]] + \
        [[2, 3] + [a]]
# equals [['a', 3, 2], [3, 'a', 2], [2, 3, 'a']]

# e == ['a', 3, 2] then [3, 'a', 2] then [2, 3, 'a']
# l == [1, 2, 3], l[0] == 1
return [['a', 3, 2] + [1], [3, 'a', 2] + [1], [2, 3, 'a'] + [1]] + \
        [[1, 2, 3] + ['a']]
# equals [['a', 3, 2, 1], [3, 'a', 2, 1], [2, 3, 'a', 1], [1, 2, 3, 'a']] 
```

也许它读起来并不漂亮，但它确实有效。您可以看到它`e`被提取为上一级返回的列表的单个元素。

你也可以试试：

```
def tee(parm):
    print parm
    return parm 
```

并重新定义`permut`为：

```
def permut(s,l):
    if l == []: return [[s]]
    return [ e + [l[0]] for e in tee(permut(s, l[1:]))] + [l+[s]] 
```

我的输出：

```
[['a']]
[['a', 3], [3, 'a']]
[['a', 3, 2], [3, 'a', 2], [2, 3, 'a']]
[['a', 3, 2, 1], [3, 'a', 2, 1], [2, 3, 'a', 1], [1, 2, 3, 'a']] 
```

其中包括递归调用。

# vb.net - VB.NET：获取程序集的命名空间

> ID：16030924
> 
> 赞同：1
> 
> 时间：2013-04-16T07:14:09.773
> 
> 标签：vb.net, namespaces, embedded-resource, .net-assembly

我有一个嵌入式资源（包含在执行程序集中），可以使用以下命令获取它：

```
Assembly.GetExecutingAssembly().GetManifestResourceStream("<MyNamespace>.<File>") 
```

如果程序集的名称空间发生变化，我必须找到字符串中包含的所有位置。为避免这种情况，我想动态获取命名空间。是否有可能获得程序集的命名空间或让我使用固定值？

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T16:55:35.480

您可以在该命名空间中定义一个虚拟类型，并从该类型中提取命名空间：

```
public class TestType
{
}

var obj = new TestType();
var ns = obj.GetType().Namespace; 
```

编辑：当然，如果命名空间是您现有程序集的一部分并且您可以访问它的源代码，那么这是一个很好的解决方案

# java - Java 强制转换是如何工作的？

> ID：16030927
> 
> 赞同：1
> 
> 时间：2013-04-16T07:14:14.210
> 
> 标签：java, casting

我正在将`byte`（8 位）类型转换为`short`（16 位）类型，在我看来，Java 正在转换我的原始 var 的值而不是转换位。

我通过对生成的 var: 应用 8 位掩码来解决它`short t = data & 0xFF`。

Java 是根据 var 的值还是在它的位上进行转换？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T07:19:27.497

`byte`,`short`并且`int`都是有符号的（就像 long、float 和 double 一样）。这意味着当您有一个 -128 到 127 的字节时，它在 short、int、long、float 或 double 中保持为 -128 到 127。

如果您想映射范围 -128 到 127 到 0 到 255，我建议您使用`int`在 Java 中更容易使用的 an。

```
 byte b = -128;
 int i = b & 0xFF; // i == 128 
```

由于您有 32 位或 64 位寄存器，因此使用`short`局部变量并不能像您想象的那样帮助您，除非您有很多（我的意思是数百万）顺便说一句，字节码只允许两种大小局部变量，一个槽（boolean、byte、short、float、int、reference）和两个槽（long 和 double） 注意：即使在 64 位 JVM 上，引用也使用一个“槽”。

唯一的无符号类型是 char。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T07:16:55.107

Java 转换该值。数据类型本身负责任何位表示；该值确实假设^*甚至不需要是引擎盖下的位模式。

^(* 如果您构建一台不使用位的计算机)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T07:18:04.930

Java将[一些原始类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)视为有符号值，要将值视为无符号，您需要屏蔽符号位

# ios - 缓冲区为空时处理 AVQueuePlayer

> ID：16030934
> 
> 赞同：0
> 
> 时间：2013-04-16T07:14:46.450
> 
> 标签：ios, audio-streaming, avqueueplayer

我想知道当缓冲区为空时如何使用 AVQueuePlayer 从服务器播放音频文件。我通过 KVO 接收到的缓冲区是空的，我不确定我应该做什么。当设备连接到低带宽时会发生这种情况。一旦带宽良好，我能否在缓冲区中获取音频数据？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:55:08.113

如果互联网连接没有中断，它将继续缓冲您有足够的数据开始播放。

当您通过 KVO 获得缓冲区空消息时，您只需要向用户显示一条消息，说明它正在缓冲，播放器将在它满时播放。

# google-chrome - 用于 chrome 的谷歌云消息接收错误代码 403 被禁止

> ID：16030935
> 
> 赞同：0
> 
> 时间：2013-04-16T07:14:47.713
> 
> 标签：google-chrome, google-chrome-extension, messaging, google-cloud-messaging

我正在开发一个 Chrome 扩展程序，该程序具有谷歌云消息传递功能，用于 chrome 将消息推送到我的 Chrome 扩展程序的实例。

当尝试将消息推送到 GCM 服务器时，我收到以下不成功的响应，如下所示；

```
> POST /gcm_for_chrome/v1/messages HTTP/1.1
> User-Agent: curl/7.26.0
> Host: www.googleapis.com
> Accept: */*
> Content-Type: application/json
> Content-Length: 133
>
* upload completely sent off: 133 out of 133 bytes
< HTTP/1.1 403 Forbidden
< Content-Type: application/json; charset=UTF-8
< Date: Mon, 15 Apr 2013 19:49:24 GMT
< Expires: Mon, 15 Apr 2013 19:49:24 GMT
< Cache-Control: private, max-age=0
< X-Content-Type-Options: nosniff
< X-Frame-Options: SAMEORIGIN
< X-XSS-Protection: 1; mode=block
< Server: GSE
< Transfer-Encoding: chunked
<
{
 "error": {
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "accessNotConfigured",
    "message": "Access Not Configured"
   }
  ],
  "code": 403,
  "message": "Access Not Configured"
 }
} 
```

有谁知道如何解决这个问题？

先感谢您。布林·H。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T18:46:24.327

此问题的一个潜在原因是未将 API 设置为启用。

为确保您的 API 已启用，您可以登录[https://code.google.com/apis/console](https://code.google.com/apis/console)，单击左侧导航栏中的“服务”并检查 Google Cloud Messaging for Chrome 的服务状态。如果您发现它被设置为“关闭”，这将解释问题，您可以通过将其设置为“打开”来修复它。

# jquery - 谷歌机器人会读取通过 jquery 事件 -doucument.ready 获取的数据吗

> ID：16030940
> 
> 赞同：1
> 
> 时间：2013-04-16T07:15:20.013
> 
> 标签：jquery, asp.net, ajax, callback, seo

我们有一个由 asp.net 提供支持的在线书店。由于显示了许多类别的特色书籍，因此首页对资源的要求更高。

我们使用 3 个列表视图来显示 3 个选定类别的书籍。没有问题，除了页面加载时有点滞后。

将列表视图的数量增加到大于 6 会导致较大的延迟时间。

我可以选择使用回调，以便在页面加载后获取数据。因为我是回调和 jquery 搜索网络的新手，所以我遇到了许多漂亮的旋转木马，这些旋转木马会吸引用户的眼球。

我已经实现了它们，但在上线之前我想知道，这会对我们的页面排名产生负面影响吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T03:58:52.403

**如果您对 Javascript 和 SEO 有疑问，请使用纯 HTML 拳头，如果确实需要，请使用 Javascript 进行改进**。

*   如果您的页面速度很慢，请努力使其变快。
*   如果要加载的内容太多而您必须选择，请尝试优先考虑您的 HTML 和 CSS，然后再做其余的事情。
*   如果您真的想通过 AJAX UI 改善用户体验，至少要让您的网站在没有 javascript 的情况下工作，并且如果通过 Javascript 创建的某些页面可以访问相同的界面，请使用元标记规范来表示纯 HTML 页面，所以即使 Google阅读您的页面不会有重复的内容。

上述提示比冒险制作依赖于 Javascript 的界面更有保障。如果您想做一些不同的事情，您必须在投入生产之前停止并进行测试。

* * *

编辑：

如果你真的想要，有一种方法可以使严重依赖 AJAX 的网站仍然可以在[使 AJAX 应用程序可抓取方面工作](https://developers.google.com/webmasters/ajax-crawling/)

# css - 元素内的文本在应用锚标记时向下移动

> ID：16030946
> 
> 赞同：1
> 
> 时间：2013-04-16T07:15:38.093
> 
> 标签：css

我有一个以前从未遇到过的奇怪问题：当我将锚标记添加到 a `<h1>`or`<li>`元素中的文本时，文本会向下（在此元素内）移动几个像素。

添加锚点后，包含元素的填充和边距**不会**改变。

锚本身具有零填充和零边距。

`<li>`实际上，在 Google Chrome 控制台中，我看不到包含或不包含“锚定”文本的元素之间的任何样式差异。然而，在将锚点应用到它之后，文本会向下移动一点。

作为额外检查，我在 Firefox 和 Google Chome 中查看了该页面（以防万一，禁用和禁用 JavaScript）但行为是持久的。

我在这里想念什么？

[更新：我在这里](http://www.spss-tricks.com)创建了一个实时版本的框架，以便更清楚地展示问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:22:56.383

它与`vertical-alignment:middle`链接从您的“重置”格式中获取有关 - 在 Firebug 中将其关闭（您的第 9 行`style.css`），您会注意到链接的文本和菜单中的文本位于同一行列表。

使用 覆盖菜单中元素的`vertical-alignment`属性，或将这些链接设置为。`a``top``display:block`

# jquery-mobile - 取消绑定在 JQuery Mobile 中不起作用

> ID：16030947
> 
> 赞同：0
> 
> 时间：2013-04-16T07:15:40.807
> 
> 标签：jquery-mobile, jquery-plugins, jquery

这是我的代码：

```
$("#infoButton").unbind('click');
                $("#infoButton").click(
                    function(event) {
                        try {
                            bla bla bla....
                        } catch (e) {
                            alert(e);
                        }
                    }
                ); 
```

我发现那个事件已经解除了所有事件的绑定，但是“bla bla bla”还在累积！

该事件不能解除绑定。

jQuery 版本 1.8.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T07:21:11.907

## 防止多个事件绑定/触发

由于有趣的 jQM 加载架构，多事件触发是一个持续存在的问题。例如，看一下这段代码：

```
$(document).on('pagebeforeshow','#index' ,function(e,data){    
    $(document).on('click', '#test-button',function(e) {
        alert('Button click');
    });    
}); 
```

工作 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/CCfL4/](http://jsfiddle.net/Gajotres/CCfL4/)

每次访问页面**#index**点击事件都会绑定到按钮**#test-button**。有几种方法可以防止此问题：

**解决方案1：**

> 在这种情况下，您应该使用 function on 而不是 bind。它更快，旨在取代绑定和委托。

在绑定之前删除事件：

```
$(document).on('pagebeforeshow','#index',function(e,data){    
    $(document).off('click', '#test-button').on('click', '#test-button',function(e) {
        alert('Button click');
    });    
}); 
```

工作 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/K8YmG/](http://jsfiddle.net/Gajotres/K8YmG/)

如果您有不同的事件绑定到一个对象：

```
$('#index').on('pagebeforeshow',function(e,data){    
    $(document).off('click tap', '#test-button').on('click tap', '#test-button',function(e) {
        alert('Button click');
    });    
}); 
```

**解决方案2：**

使用 jQuery 过滤器选择器，如下所示：

```
$('#carousel div:Event(!click)').each(function(){
    //If click is not bind to #carousel div do something
}); 
```

因为事件过滤器不是官方 jQuery 框架的一部分，所以可以在这里找到：http: [//www.codenothing.com/archives/2009/event-filter/](http://www.codenothing.com/archives/2009/event-filter/)

简而言之，如果速度是您主要关心的问题，那么**解决方案 2**比解决方案 1 好得多。

**解决方案3：**

一个新的，可能是最简单的。

```
$(document).on('pagebeforeshow', '#index', function(){       
    $(document).on('click', '#test-button',function(e) {
        if(e.handled !== true) // This will prevent event triggering more then once
        {
            alert('Clicked');
            event.handled = true;
        }
    }); 
}); 
```

工作 jsfiddle 示例：http: [//jsfiddle.net/Gajotres/Yerv9/](http://jsfiddle.net/Gajotres/Yerv9/)

Tnx 到 [sholsinger][2] 以获得此解决方案：[http ://sholsinger.com/archive/2011/08/prevent-jquery-live-handlers-from-firing-multiple-times/](http://sholsinger.com/archive/2011/08/prevent-jquery-live-handlers-from-firing-multiple-times/)

# haskell - 管道中的 IO 操作？

> ID：16030954
> 
> 赞同：2
> 
> 时间：2013-04-16T07:16:07.687
> 
> 标签：haskell, conduit

这可能是一个非常晦涩的案例，但请多多包涵。

我正在编写一个需要下载网页并将其保存到本地磁盘的网络爬虫。同时，作为爬虫，它需要在每个页面上找到超链接并下载这些链接的页面。

现在我正在查看[此页面](http://www.yesodweb.com/book/http-conduit)上给出的第一个示例代码。我正在尝试编写这种类型的管道：

```
processLink :: Conduit S.ByteString IO S.ByteString 
```

然后我将替换示例代码中的这一行：

```
responseBody res $$+- sinkFile "foo.txt" 
```

用这条线：

```
responseBody res $= processLinks $$+ sinkFile 
```

所以我要做的是实现一个名为 processLink 的管道，它处理一个 ByteString，从中提取链接，然后将原始 ByteString 传递给 sinkFile 以便可以保存页面。然后我可以递归地调用这些链接上的函数来下载这些链接的页面。

但是，由于 processLink 是一个纯函数，我似乎无法在 processLink 中执行任何 IO 操作，因此无法执行我需要的操作，例如下载这些链接页面。或者我可以吗？我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T07:32:15.957

好吧，我想通了....我想我需要的只是 liftIO 哈哈。抱歉，我对 Haskell 有点陌生：P

# xcode - 在调试 xcode 期间获取函数的值

> ID：16030971
> 
> 赞同：0
> 
> 时间：2013-04-16T07:17:16.503
> 
> 标签：xcode, function, debugging, methods

我是 xcode/ios 开发的新手。我需要知道我们可以在调试过程中获取函数的值吗？喜欢

```
[super getUserName]; 
```

在eclipse中，我们可以通过选择文本然后从菜单中选择显示选项来获取返回值。

在xCode中如何处理？

PS：我使用的是 xcode 4.6.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:36:46.613

我假设你的意思是方法。使用其中任何一个

```
po [x method]
po x.variable 
```

其中 x 是一个类或实例，例如：

```
[NSThread callStackSymbols] 
```

如果返回的值是原始类型，请`p`改为使用`po`。

要打印功能，请使用

```
expr (void)printf("hi"); 
```

要更改变量：

```
expr (void) [gift setName:@"PS3"]; 
```

如果您暂停执行并调用`super`，例如：

```
po [super description] 
```

Xcode 可能会崩溃，因为它不是世界上最稳定的 IDE。

# javascript - Parameters not found in cypher query executed via rest in javascript

> ID：16030972
> 
> 赞同：0
> 
> 时间：2013-04-16T07:17:27.607
> 
> 标签：javascript, rest, neo4j, cypher

Good morning, I have a Neo4j Database with Maven Dependencies build via a Java programm. Now I want to create a Webinterface to access the data. When executing a cypher POST via jQuery.ajax I get a bad request error. In details:

```
var query2 = '{"query":"start n = node(*) where n.groupId! = {groupId} and n.artifactId! = {artifactId} return n.version","params":{"groupId":"junit","artifactId":"junit"}}'; 
```

When I send this via rest to the server I get a 400 Bad Request error:

> { "message" : "Expected a parameter named groupId", "exception" : "BadInputException", "stacktrace" : [ "org.neo4j.server.rest.repr.RepresentationExceptionHandlingIterable.exceptionOnHasNext(RepresentationExceptionHandlingIterable.java:51)", "org.neo4j.helpers.collection.ExceptionHandlingIterable$1.hasNext(ExceptionHandlingIterable.java:61)", "org.neo4j.helpers.collection.IteratorWrapper.hasNext(IteratorWrapper.java:42)", "org.neo4j.server.rest.repr.ListRepresentation.serialize(ListRepresentation.java:58)", "org.neo4j.server.rest.repr.Serializer.serialize(Serializer.java:75)", "org.neo4j.server.rest.repr.MappingSerializer.putList(MappingSerializer.java:61)", "org.neo4j.server.rest.repr.CypherResultRepresentation.serialize(CypherResultRepresentation.java:50)", "org.neo4j.server.rest.repr.MappingRepresentation.serialize(MappingRepresentation.java:42)", "org.neo4j.server.rest.repr.OutputFormat.format(OutputFormat.java:170)", "org.neo4j.server.rest.repr.OutputFormat.formatRepresentation(OutputFormat.java:120)", "org.neo4j.server.rest.repr.OutputFormat.response(OutputFormat.java:107)", "org.neo4j.server.rest.repr.OutputFormat.ok(OutputFormat.java:55)", "org.neo4j.server.rest.web.CypherService.cypher(CypherService.java:68)", "java.lang.reflect.Method.invoke(Unknown Source)" ] }

I also tried to build the query via a JS object like so:

```
 var query = {};
    query["query"] = text;
    query["params"] = JSON.parse("{" + params + "}"); 
```

Where text is the query string and params the parameters with right syntax. ("param1":"value1", ...)

Until now this seems like I mistyped something somewhere. Interestingly the whole thing works when omitting the parameters and writing a request with just a "query" property.

Also

```
JSONObject jObject = new JSONObject();
        Map<String, Object> params = new HashMap<String, Object>();
        params.put("groupId", "junit");
        params.put("artifactId", "junit");
        String query = "start n = node(*) where n.groupId! = {groupId} and n.artifactId! = {artifactId} return n.version";
        jObject.put("query", query);
        jObject.put("params", params); 
```

and then sending jObject.toString() to the database in Java works like a charm... Well, I have to say I'm at my wit's end with this. Hope you guys can help me :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:32:15.500

Are you providing `content-type:application/json` and `accept:application/json` request headers?

# responsive-design - 如何在 Zurb Foundation 4 中使用断点？

> ID：16030973
> 
> 赞同：5
> 
> 时间：2013-04-16T07:17:31.747
> 
> 标签：responsive-design, sass, zurb-foundation

我想有3个断点。从广义上讲，我想为小型、中型和大型窗格配置我的网格。

查看基础网格的文档，为“小”和“大”提供了示例类名。

但是，我怀疑基础可以更灵活。所以我查看了文件_foundation-global.scss。果然，它似乎具有适用于各种窗格大小的数学函数和变量。

在网格文档中，我可以看到像“small-12”和“large-3”这样的类名。

理想情况下，我想做一些类似'medium-3'的事情。我可以用基金会的网格做这样的事情吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-12T15:25:18.837

在 Zurb Foundation 4 中，我在网格列中添加了以下内容。只需在您的基础全局变量和网格的@import 之后添加它。

```
@if $include-html-grid-classes != false {

  /* Styles for screens that are atleast 768px and max width 1024px */
  @media #{$small} and (max-width: 1024px) {

    @for $i from 1 through $total-columns {
      .medium#{-$i} { @include grid-column($columns:$i,$collapse:null,$float:false); }
    }

    @for $i from 0 through $total-columns - 1 {
      .row .medium-offset-#{$i} { @include grid-column($offset:$i, $collapse:null,$float:false); }
    }

    @for $i from 1 through $total-columns - 1 {
      .push#{-$i} { @include grid-column($push:$i, $collapse:null, $float:false); }
      .pull#{-$i} { @include grid-column($pull:$i, $collapse:null, $float:false); }
    }

    .column.medium-centered,
    .columns.medium-centered { @include grid-column($center:true, $collapse:null, $float:false); }

    .column.medium-uncentered,
    .columns.medium-uncentered {
      margin-#{$default-float}: 0;
      margin-#{$opposite-direction}: 0;
      float: $default-float !important;
    }

    .column.medium-uncentered.opposite,
    .columns.medium-uncentered.opposite {
      float: $opposite-direction !important;
    }

  }

} 
```

现在您可以像使用小型和大型网格一样使用介质。

[https://gist.github.com/poeticninja/5985220](https://gist.github.com/poeticninja/5985220)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-29T12:28:41.977

[中等网格](http://foundation.zurb.com/docs/v/4.3.2/components/grid.html#medium-grid)的新实验功能，这是[CSS 文件](https://gist.github.com/ghaida/6030528)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T14:26:07.150

也许我来晚了，但我不同意 lolmaus 反对 Foundation 的总体论点（除非你真的需要超级骗子网格颗粒化）。

对于多年来一直使用自己的本土 CSS 网格系统的人来说，我发现 Foundation 3（我尝试的第一个版本）非常擅长让我始终以响应式方式为桌面 -> 平板电脑 -> 手机构建网站让我控制图形密集型设计和布局。（而且我想我刚刚读到 F4 已经为不同的格式实现了小型和大型网格系统。）

我无法与任何其他系统交谈，因为我没有尝试过它们（除了 Bootstrap，它比我需要的更全面），但如果你是一个动手设计的设计师，在 HTML5/CSS3 方面有一些好的印章，你'与Foundation一起会做得很好。

如果有帮助，我在 F3 中的断点设置为 1200 或更多、1199-768 和 767 或更少（仅在手机上水平浏览网站）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-11T17:44:44.910

Foundation 的流体网格是围绕 768 像素的单个断点构建的，因此基本上是移动设备和桌面/平板电脑。一切都围绕着这个概念，这就是为什么你有像`hide-for-small`和这样的类`show-for-small`。

任何额外的断点都必须使用媒体查询自定义完成，但是由于 Foundation 是一个流体网格，因此实现起来并不像您想象的那样烦人。这个想法是，您的站点的“大型”（例如桌面）版本应该合理地扩展到“中”（平板电脑）视口，而不需要对 CSS 进行太多广泛的重构。

我在 F3 中构建的大多数网站都在 768px 断点处显着转换，然后我编写了一些其他媒体查询来调整高于该断点所需的任何内容（所以通常我有一些 CSS 调整，用于更多取决于依赖的任意断点在设计上，但例如在一个行宽为 1150 像素的网站上可能是 900 像素和 1050 像素）。如今的平板电脑具有相当高的分辨率，并且在大多数情况下倾向于显示桌面风格的布局。

lolmaus 确实有一点，Foundation 不仅仅是一个响应式网格工具。还有其他更轻量级的框架提供了更精细和更方便的方式来自定义您的网格大小和行为，而 Foundation 是一个完整的前端框架，旨在基于单断点概念进行快速原型设计。

您还可以添加一个辅助（例如平板电脑/台式机）断点而不会太麻烦，但这需要一些工作。但是，我建议您尝试使用 Foundation 并问自己是否真的需要 3 组不同的样式而不是 2 组。我之前已经建立了针对桌面/平板电脑/移动三合会的响应式网站，老实说，我从来没有回头看大约六个月前，我开始使用 Foundation。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T06:06:08.920

粉底有两种口味。

您熟悉**非语义 CSS 版本**。它有一个预构建的 CSS 文件，其中包含所有可能的类组合的规则。当然，它们不能仅仅因为它们不是心灵感应者就预先满足你的所有需求。他们只为两种网格尺寸制作了课程。

另一种风格是**语义 SASS 版本**。它不使用预构建的 CSS 文件。使用 SASS 版本，您只需创建所需的样式并将它们语义应用到站点的元素中。

[本页](http://foundation.zurb.com/docs/components/grid.html)底部描述了如何用 SASS 做网格。

使用 SASS 版本的 Foundation，您无需预设媒体查询，您可以根据需要设置自己的媒体查询。

Foundation 不提供任何处理媒体查询的工具，因此您必须手动设置它们。它还缺乏用于定义多个网格的工具。为了对不同的屏幕尺寸或站点的不同部分进行不同的网格设置，您必须为每次使用重新定义 Foundation 网格设置，这相当麻烦。

很可能，Foundation 根本不是创建响应式网格的最佳工具。相反，请尝试使用[Breakpoint Slicer的](https://github.com/lolmaus/breakpoint-slicer)[Singularity——](https://github.com/Team-Sass/Singularity)它们正是为此目的而创建的，在 StackOverflow 上有大量的文档和来自开发人员的体面支持。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-11T17:27:57.113

[可以在 Zurb Foundation 4 上设置中等列吗？](https://stackoverflow.com/questions/17592251/can-you-set-medium-columns-on-zurb-foundation-4/17599690#17599690) [http://adioso.com/blog/](http://adioso.com/blog/)

# javascript - jQuery 在 AJAX 插入的 DOM 元素上失败

> ID：16030976
> 
> 赞同：0
> 
> 时间：2013-04-16T07:17:36.873
> 
> 标签：javascript, jquery

我在名为`close`.

```
$(function () {
    $(".close").click(function () {
        $(this).parent().fadeTo(400, 0, function () { // Links with the class "close" will close parent
            $(this).slideUp(400);
        });
        return false;
    });
}); 
```

它运行良好，但如果我使用 AJAX 插入新的 DOM 元素，此功能会失败吗？为什么会这样？虽然我知道在通过 AJAX 响应插入的页面上编写相同功能的解决方案。我做到了，它正在工作。为什么它不能在全球范围内运行？

我试图用替换`$(".close").click(function () {`，`$(".close").on("click", function(event){`但它没有给我我的问题的确切解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T07:19:59.220

那是因为点击事件工作的元素应该出现在文档中......使用 `on`委托事件

```
$(document).on("click",".close",function () {
    $(this).parent().fadeTo(400, 0, function () { // Links with the class "close" will close parent
        $(this).slideUp(400);
    });
    return false;
}); 
```

在ajax成功功能起作用后添加您的点击事件，但我更喜欢使用`on`委托事件（因为`on`在jquery中为此目的引入了）..

我建议您使用最接近的静态父级，而不是`document`本身以获得更好的性能......

[链接](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)以阅读有关事件委托的更多信息

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T07:20:17.593

`click`因为当 DOM 准备好时jQuery将事件绑定到元素。它不会监视匹配选择器的新元素，因此之后添加的任何元素**都不**会将click 事件绑定到您的函数。为此，您必须`$('.close').click(...)`在 AJAX 请求完成后进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:20:11.843

使用[`on`](http://api.jquery.com/on/)和[`fadeOut`](http://api.jquery.com/fadeOut/)：

```
$("body").on('click', '.close', function() {
    $(this).parent().fadeOut();
    return false;
}); 
```

*   另外，你不需要在淡出后滑动，因为元素**已经隐藏了**。
*   其次，默认的淡入淡出持续时间已经是 400，您无需再次声明速度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T08:27:13.113

您是否尝试过使用“实时”方法。

```
$(".close").live('click',function () {
    $(this).parent().fadeTo(400, 0, function () { // Links with the class "close" will close parent
        $(this).slideUp(400);
    });
    return false;
}); 
```

# google-maps - Google Map Image API Ajax 调用

> ID：16030977
> 
> 赞同：0
> 
> 时间：2013-04-16T07:17:43.337
> 
> 标签：google-maps, google-maps-markers

我的问题是

1.  我们能否对 Google 地图图像 API 进行 Ajax Post 调用，我们可以在其中发送 n 号。标记详细信息并获得结果作为地图图像，显示地图上的所有标记。
2.  如果我们无法对 Google 地图图像 API 进行 Ajax 发布调用，那么我们可以使用任何替代方式来保存带有 n 号的 Google 地图。其上的标记为 image(png/jpeg) 。

请帮我 。

感谢和问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:29:19.403

听起来您想使用静态地图 API： [https ://developers.google.com/maps/documentation/staticmaps/](https://developers.google.com/maps/documentation/staticmaps/)

# c - 类型从 char * 转换为 int

> ID：16030978
> 
> 赞同：1
> 
> 时间：2013-04-16T07:17:48.273
> 
> 标签：c, type-conversion

如何将 char 指针指向的值存储到整数变量中？我有以下代码：

```
main ()
{
  int i;
  char *tmp = "10";
  i = (int)tmp;
  printf("value of i is %d",i);
} 
```

我的代码对给定任务最有效吗？我正在使用 Visual Studio 2008。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:24:53.707

C 中的字符串只是一个字符数组，`tmp`指向字符串中的第一个字符。您的代码将此指针值（内存地址）转换为整数并将其存储在`i`.

你真正想做的是[`strtol`](http://en.cppreference.com/w/c/string/byte/strtol)在stdlib中使用：

```
#include <stdlib.h>
main ()
{
  int i;
  char *tmp = "10";
  i = (int) strtol(tmp, 0, 10);
  printf("value of i is %d",i);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:22:49.273

您可能应该查看[atoi](http://www.cplusplus.com/reference/cstdlib/atoi/)以进行字符串到 int 的转换。

请注意，[atoi 不进行错误检查](https://stackoverflow.com/questions/2729460/why-do-i-get-this-unexpected-result-using-atoi-in-c)，因此只有在您确切知道输入是什么时才使用它（例如您在示例中使用的常量字符串）。否则使用 E​​mil Vikström 的答案。

# java - 为 WCF 服务生成 Java REST 代理

> ID：16030980
> 
> 赞同：0
> 
> 时间：2013-04-16T07:17:54.413
> 
> 标签：java, android, json, wcf, rest

我正在为 WCF Web 服务开发 Android 客户端。我必须生成客户端代理，并且我需要它发出 REST 请求并处理 REST 响应。我的 Web 服务公开了一个 JSON 端点：

```
<service behaviorConfiguration="TRISUser.UserServiceBehavior"
    name="TRISUser.UserService">
    <endpoint address="JSON" behaviorConfiguration="JSONEndpointBehavior"
      binding="webHttpBinding" bindingConfiguration="" name="RESTEP"
      contract="TRISUser.IUserService" />
    <endpoint address="" binding="basicHttpBinding" contract="TRISUser.IUserService">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service> 
```

我正在尝试使用 JDK 中包含的 wsimport 工具生成代码。问题是：公开 JSON 端点就足以制作和处理 JSON 请求/响应，还是我必须使用其他工具？

# php - 根据其他表从表中获取所有值

> ID：16030983
> 
> 赞同：0
> 
> 时间：2013-04-16T07:18:07.830
> 
> 标签：php, mysql

用户将为每个问题选择单选按钮。值：是 = 1，否 = 0

我已经从这段代码中获得了解决方案 ID：

$query = "SELECT solutionid FROM rule WHERE Q1='$ptptn' AND Q2='$parent' AND Q3='$house'";

* * *

表规则

```
id | Q1 | Q2 | Q3 |solution_id

1  |  1 |  1 |  1 | 1
2  |  0 |  0 |  1 | 2
3  |  1 |  0 |  0 | 3 
```

* * *

表解决方案

```
id |  S1  |  S2  | S3 

1  |  0.1 |  0.1 |  0.1
2  |  0.5 |  0.5 |  0.1
3  |  0.1 |  0.5 |  0.5 
```

* * *

我想如何根据 table rule 中的 solution_id = id 编写代码以获取表解决方案中的所有值（S1、S2、S3）？

例如输出：

用户选择所有问题和结果显示规则 1。

解决方案：0.1、0.1、0.1

tqvm 的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:21:45.220

一个查询怎么样？使用连接：

```
SELECT tb1.s1, tb1.s2, tb1.s3

    FROM solution AS tb1
    INNER JOIN rule AS tb2

    ON tb1.id = tb2.solution_id

    WHERE tb2.q1 = '$ptptn'
    AND tb2.q2 = '$parent'
    AND tb2.q3 = '$house'; 
```

或者，在 PHP 代码中使用 solution_id 作为变量并放入另一个查询。假设您已经在 $row 变量中获取了查询，那么您现在有了 $row['solution_id'];

```
$query = "SELECT s1, s2, s3 FROM solution WHERE id = $row['solution_id'];"; 
```

# python - cmake、swig 和 python：如何覆盖冲突的符号

> ID：16030994
> 
> 赞同：1
> 
> 时间：2013-04-16T07:18:55.687
> 
> 标签：python, cmake, swig

我正在使用 cmake 创建一个带有 swig 的 python 包装器。问题是，在 lapack 和 python 中有冲突的符号。我有一个简单的脚本来在编译之前取消定义冲突的符号，我可以编写一个可以工作的 makefile。我想知道，使用 cmake 时最好的方法是什么。

这个makefile有效：

```
tools_wrap.cc toolspy: tools.i ../libtools.a
    swig -I../ -c++ -python $(PYFLAGS) -shadow -o tools_wrap_tmp.cc tools.i 
    # A terrible hack to override conflicting function names in python and lapack
    python ./fix_undefs.py < tools_wrap_tmp.cc > tools_wrap.cc

_tools.so: tools_wrap.cc ../libtools.a
     $(CXX) $(CXXFLAGS) $(LDFLAGS) -shared $(PYTHONINC) $(INCLUDES) -I../ tools_wrap.cc $(LIBS) -o _tools.so 
```

谢谢你的帮助！

维萨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:28:21.693

在浏览了 cmake swig-generator 之后，我得出了以下解决方案：

```
add_custom_target(TmpCWrap mv ${swig_generated_file_fullname} tmp.cxx 
    DEPENDS "${swig_generated_file_fullname}")

add_custom_target(FixDefs python ${CMAKE_CURRENT_SOURCE_DIR}/add_undefs.py < tmp.cxx > ${swig_generated_file_fullname}
    DEPENDS TmpCWrap
    COMMENT "Fixing defs for conflicting symbols in lapack and python")

add_dependencies(${SWIG_MODULE_PPToolbox_REAL_NAME} FixDefs) 
```

# encoding - ESAPI.encoder().canonicalize(query) 无法正常工作

> ID：16030995
> 
> 赞同：0
> 
> 时间：2013-04-16T07:18:59.027
> 
> 标签：encoding, input, owasp, esapi

我有一个这样的输入标签

```
<input class="textBox" type="text" value="<%=ESAPI.encoder().canonicalize(query) %>" autocomplete="off" /> 
```

我尝试使用 ESAPI canonicalize 函数进行查询，`"><script>alert(1);</script>` 但它不起作用，我在浏览器中收到警报。我做对了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:59:35.683

您为上下文使用了错误的编码。您处于常规属性上下文中，因此您应该使用[`encodeForHTMLAttribute`](http://owasp-esapi-java.googlecode.com/svn/trunk_doc/latest/org/owasp/esapi/Encoder.html#encodeForHTMLAttribute%28java.lang.String%29).

顺便说一句，对于 Java，有一种模板语言具有上下文相关的自动转义[https://code.google.com/p/hapax2/](https://code.google.com/p/hapax2/)所以你不必

1.  手动确定您所处的环境
2.  为该上下文手动选择正确的编码
3.  手动编写代码以进行转义，在这种情况下，这很拗口，使模板更难阅读

这很容易出错，并且可以与手动转义 SQL 相媲美，但难度更大。

# gcc - 如何使可执行文件仅在一个特定目录中执行（可执行源代码可用）

> ID：16030996
> 
> 赞同：0
> 
> 时间：2013-04-16T07:19:07.330
> 
> 标签：gcc, compiler-construction, executable, main

如何防止工具（可执行文件）从指定目录以外的任何其他目录执行？可以编辑工具源代码并重新编译。基于 Linux 的操作系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:26:40.143

调用`getcwd()`查看目录是否为指定目录。

```
#define ALLOWED_DIR "/foo/bar/baz"
char dir[BUFSIZ];
getcwd(dir, BUFSIZ);
if (strcmp(dir, ALLOWED_DIR) != 0) {
  /* complain and exit */
} 
```

编辑

从您的评论来看，您似乎不是在寻找用户正在执行的目录，而是在寻找包含可执行文件本身的目录。没有完全可靠的方法可以做到这一点，请参阅[http://www.linuxquestions.org/questions/programming-9/how-do-i-get-the-application-path-in-c-426517/](http://www.linuxquestions.org/questions/programming-9/how-do-i-get-the-application-path-in-c-426517/)

检查可执行位置并不能提供任何真正的安全性。如果有人复制了该程序，他们可以简单地删除检查它所在位置的部分。

如果要确保用户只使用官方安装的程序版本，则需要使其依赖于访问普通用户无法访问的东西。然后制作程序 setuid 或 setgid，以便它可以访问它。如果他们尝试运行他们的副本，它将无法工作，因为它不会以适当的权限运行。

# umbraco - Umbraco 4.11 中的surfaceController 入门

> ID：16030997
> 
> 赞同：0
> 
> 时间：2013-04-16T07:19:12.970
> 
> 标签：umbraco

我想通过 SurfaceController 和 Umbraco 4.11 中的视图读取/写入/编辑/搜索数据。

我知道 SurfaceController。但是我找不到任何描述如何将 SurfaceController 添加到我的 Umbraco 的资源？

请给我一些链接或步骤以将 SurfaceController 添加到 Umbraco 以及在 Umbraco 项目中存储此文件的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:39:59.597

首先创建 1 个项目并使用 Nuget 包管理器控制台 (Install-Package UmbracoCms -Version 6.0.3) ( [Nuget 包](http://nuget.org/packages/UmbracoCms/6.0.3)) 添加 Umbraco。

然后将新项目添加到您的解决方案（MVC3 或 MVC4 项目）。在新项目中添加您的表面控制器，并将生成的 DLL 和控制器的视图复制（在构建之后）到第一个项目。

您可以使用构建后事件来自动执行复制过程。

如果您想使用 MVC 创建新的前端页面，可以查看[http://blog.bartdemeyer.be/2013/01/using-mvc-frontend-pages-in-umbraco-4-11-1/ 。](http://blog.bartdemeyer.be/2013/01/using-mvc-frontend-pages-in-umbraco-4-11-1/)该帖子是关于 Umbraco 4.11 的，但对 Umbraco 6.0.x 仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:45:22.670

[Umbraco Docs](http://our.umbraco.org/documentation/)对[Surface 控制器](http://our.umbraco.org/documentation/Reference/Mvc/surface-controllers)有很好的参考。您可以创建本地声明或基于插件的控制器。以下是本地声明的表面控制器文档中的示例：

```
public class MySurfaceController : Umbraco.Web.Mvc.SurfaceController
{
    public ActionResult Index() 
    {
        return Content("hello world");
    }
} 
```

> 所有本地声明的控制器都被路由到：
> 
> /umbraco/surface/{controllername}/{action}/{id}

基本上，工作流程是创建一个新的类库，添加一个继承自 的类`SurfaceController`，然后构建 dll 并将其部署到 Umbraco 站点的 bin 目录。

# android - 对话框getlocationonscreen

> ID：16030999
> 
> 赞同：3
> 
> 时间：2013-04-16T07:19:19.563
> 
> 标签：android, dialog, keyboard

我有一个带有 EditText 的对话框，当用户单击它时，会出现软键盘并将对话框向上推。当键盘关闭时，EditText 恢复其原始位置。这是标准行为。EditText 已明显移动，但调用`getLocationOnScreen()`，在 rom 4.0.x 或更低版本下对两个位置返回相同的结果；例如，使用设备 720*1280 将对话框设置为 100,1100，当显示键盘时，在 4.0.x 获取两个 (100,1100)，但在 4.1 设备获取 (100,1100),(100,679)

任何人都知道软键盘显示时修改了哪些参数以及对话框的editText；我已经这样做了。

```
dialog.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE); 
```