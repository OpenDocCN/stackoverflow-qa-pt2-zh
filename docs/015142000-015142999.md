# StackOverflow 问答 15142000-15142999

# xaml - WinRT 运行时自定义背景颜色

> ID：15142001
> 
> 赞同：0
> 
> 时间：2013-02-28T17:35:38.040
> 
> 标签：xaml, colors, visual-studio-2012, windows-runtime

我试图弄清楚如何在 WinRT 中为整个应用程序使用自定义背景颜色。本质上，我想给用户一个更改背景颜色代码的选项。选择和存储它很容易。我没有看到的是如何设置它，以便它：

A) 当用户改变颜色时立即改变。B) 使用资源字典设置背景颜色

最初，我只是通过将每个基本网格的背景颜色设置为我静态设置的颜色来设置每个框架/页面的背景颜色。我尝试使用绑定来绑定颜色，但这似乎不起作用。

因此，我尝试将背景颜色分解为资源字典，以查看是否可以将一个设置应用于应用程序，但即使这样似乎也不起作用（无法编译）。像这样：

```
<ResourceDictionary>
    <Page.Background>
        <SolidColorBrush Color="Black"/>
    </Page.Background>
</ResourceDictionary> 
```

我也尝试将它应用于框架而不是页面，但这似乎也无法编译。首先，我似乎无法编译任何东西来设置一种常见的应用颜色。

第二个是一旦工作，如何动态更改 ResourceDictionary 以应用新的背景颜色。

我搜索了互联网和多个站点，试图找到示例，但甚至没有任何好的示例。

第一个也是最简单的问题的答案会很棒。帮助设置背景将是锦上添花！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:06:09.727

这在 WinRT/XAML 中会有点困难，因为它没有`{DynamicResource}`WPF 的概念，所以即使你以编程方式修改资源字典（这应该是可行的） - 你仍然需要以某种方式触发重新加载整个 UI 树。也许通过在你的根框架中来回导航（假设你使用一个）？

# oracle-adf - 负载在 ADF 中的上下文事件上下文中是什么意思？

> ID：15142004
> 
> 赞同：1
> 
> 时间：2013-02-28T17:35:49.387
> 
> 标签：oracle-adf

从[上下文事件](http://www.oracle.com/technetwork/issue-archive/2011/11-may/o31adf-352561.html)的 Oracle 文档中：

> 上下文事件有两个部分：
> 
> 发布者（或制作者），例如引发命名事件的按钮，带有或不带有自定义有效负载
> 
> 侦听特定命名事件或通配符事件以处理该事件的处理程序（或使用者）

这里的术语究竟是什么意思`custom payload`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T07:37:42.013

只是发布者和订阅者之间通信的“数据”。所以上下文事件不仅仅是一个事件，它还可以在双方之间携带数据。

例如，考虑一个购物车应用程序，其中您有两个单独的区域/BTF，一个显示总成本，另一个显示要购买的实际商品。如果用户增加了购物车项目之一的数量，您可能希望将总项目的成本传达给总成本区域。因此，成本是有效载荷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T04:43:15.643

有效负载是任何类型的字符串、映射、用户定义类等事件发布者发送给事件订阅者的数据。有效载荷是可选的。

谢谢，
佩迪

# extjs4.1 - Extjs：在商店加载时呈现数据

> ID：15142009
> 
> 赞同：1
> 
> 时间：2013-02-28T17:36:11.893
> 
> 标签：extjs4.1

我将我的 extjs4 应用程序设计为 mvc。有时，在某些不清楚的情况下，当我从控制器将远程数据加载到存储中时，视图不会反映更改；这发生在组合框和网格中。就像我错过了关于 extjs 设计的一些东西，我希望通过这个问题让事情变得更清楚。

考虑这个对我不起作用的例子：

*控制器：*

```
...
init: function() {
    this.control({
        // * This is the alias of a grid panel. 
        // * When I dbl-click a record, I want to display it in a modal window
        'w_fares_index': {
            itemdblclick: function(grid, record) {
                var view = Ext.widget('w_fares_edit');
                view.down('form').loadRecord(record);

                var store = this.getStore('StoreBillsModels');
                store.load({
                    params: {
                        'where': {
                            "id_fare": record.get('id')
                        }
                    }
                });
            }
        },
... 
```

*观点*：

```
...
extend: 'Ext.window.Window',
alias : 'widget.w_fares_edit',
...
items[{
    xtype: 'form',
    ...
}, {
    xtype: 'gridpanel',
    store: 'StoreBillsModels',
    columns: [{
        header: 'Id',
        dataIndex: 'id',
        flex: 1
    }, ...]
}] 
```

使用此代码，将打开新的模式窗口，并将单击的记录加载到表单中。但是，即使商店 StoreBillsModels 已填充（我可以看到它正在分析网络请求），新窗口内的网格面板也不会显示任何记录。

另外，我注意到一些奇怪的事情：

*   如果 StoreBillsModels 的大小为 1，则网格显示空白白线
*   如果存储大小为 0，则网格仅显示标题并且没有高度

我在组合框上遇到了或多或少相同的问题。就像我在实现视图的相同函数中填充商店，那么商店消费者不会反映商店的变化。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:12:22.563

解决方案：

我的商店有这个属性：

```
buffered: true 
```

我不知道为什么，但是如果商店被缓冲，我会遇到上面提到的问题。我通过设置解决了这个问题：

```
buffered: false 
```

# javascript - 重叠格式

> ID：15142013
> 
> 赞同：0
> 
> 时间：2013-02-28T17:36:23.500
> 
> 标签：javascript, jquery, debugging, overlap, graphical-interaction

我有一个函数 isOverlap 告诉两个对象是否重叠，这里是源代码：

```
 function isOverlap(idOne,idTwo){
    var objOne=$("#"+idOne),
        objTwo=$("#"+idTwo),
        offsetOne = objOne.offset(),
        offsetTwo = objTwo.offset(),
        topOne=offsetOne.top,
        topTwo=offsetTwo.top,
        leftOne=offsetOne.left,
        leftTwo=offsetTwo.left,
        widthOne = objOne.width(),
        widthTwo = objTwo.width(),
        heightOne = objOne.height(),
        heightTwo = objTwo.height();
    var leftTop = leftTwo > leftOne && leftTwo < leftOne+widthOne 
            && topTwo > topOne && topTwo < topOne+heightOne,
        rightTop = leftTwo+widthTwo > leftOne && leftTwo+widthTwo < leftOne+widthOne 
            && topTwo > topOne && topTwo < topOne+heightOne,
        leftBottom = leftTwo > leftOne && leftTwo < leftOne+widthOne 
            && topTwo+heightTwo > topOne && topTwo+heightTwo < topOne+heightOne,
        rightBottom = leftTwo+widthTwo > leftOne && leftTwo+widthTwo < leftOne+widthOne 
            && topTwo+heightTwo > topOne && topTwo+heightTwo < topOne+heightOne;
    return leftTop || rightTop || leftBottom || rightBottom;
} 
```

我需要的主要是如何格式化调用函数，有什么帮助吗？这是我这样做的失败尝试：

```
 if($(document).isOverlap("#mario", ".block")) {
       $(".block").hide("explode", { pieces: 16 }, 100);
   }); 
```

[你可以在这里](http://jsfiddle.net/Zeaklous/NpKgc/23/)找到我正在尝试制作的程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T04:16:29.307

```
isOverlap("#mario", ".block") 
```

您传递给此函数的字符串是完整的 jQuery 选择器。

因此，`"#"+idOne`函数内部变成`"##mario"`，这显然是错误的。

此外，如果这些选择器中的任何一个匹配多个元素，您的代码将无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:27:35.367

我发现问题在于，`)`当我尝试将`.click`线路更改为`.isOverlap`

# css - Primefaces 的 gmap 自动调整大小

> ID：15142015
> 
> 赞同：0
> 
> 时间：2013-02-28T17:36:23.687
> 
> 标签：css, google-maps, jakarta-ee, primefaces, autoresize

我在使用**gmap**组件时遇到了一个小问题：当我尝试使组件可调整大小（即借助 CSS 将地图的高度和宽度都设置为 100%）时，组件会缩小并且地图本身变得不可见。但是，如果设置了固定高度/宽度，则组件可以正常工作。有没有办法为gmap自动调整大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:46:30.013

只是一个快速的想法。您正在将大小应用于实际的#map 或#map_content（或其他）持有的div 在您的页面上，而不是地图本身？

如果您只是调整地图的大小而不是包含的 div，那么 0 的 100% 仍然是 0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T11:24:58.363

问题可能出在 CSS 样式上。如果有人仍然有兴趣解决这个问题，下面的代码对我有用：

CSS：

```
html, body, form {
    height: 100%;
    margin: 0;
}

.mapClass {
    width: 100%;
    height: 100%; 
```

}

XHTML：

```
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui">

<h:head>
    <link href="./resources/css/style.css" rel="stylesheet" type="text/css" />
    <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
</h:head>
<h:body>
    <h:form> 
        <p:gmap widgetVar="gmtls" center="41.381542, 2.122893" zoom="15" type="hybrid" styleClass="mapClass"/>
    </h:form>  
</h:body>
</html> 
```

# javascript - javascript：私有成员和只读属性

> ID：15142022
> 
> 赞同：1
> 
> 时间：2013-02-28T17:36:38.073
> 
> 标签：javascript, oop, design-patterns, clone

**设想**

我有这门课：

```
var AssocArray = function(){
    var collection = new Object();

    this.add = function(id, o){
        collection[id] = o;
    }

    this.remove = function(id){
        delete collection[id];
    }

    this.getById = function(id){
        return collection[id];
    }

    this.get = function(){
        var res = collection;
        return res;
    }
}

var myAssoc = new AssocArray();
myAssoc.add("11",{ "packageId": "11", "machineId": "1", "operationType": "Download"});
myAssoc.add("12",{ "packageId": "12", "machineId": "1", "operationType": "Download"});
myAssoc.add("14",{ "packageId": "14", "machineId": "1", "operationType": "Download" });

if(myAssoc.getById("20")) myAssoc.remove("20");
if(myAssoc.getById("11")) myAssoc.remove("11");

console.log(myAssoc.get());  //returns Object {12: Object, 14: Object} 
```

**问题**

一切正常。但如果我这样做：

```
(myAssoc.get())[10] = {};
console.log(myAssoc.get());  //returns Object {10: Object, 12: Object, 14: Object}!! 
```

私有成员`collection`最终被修改。这是出乎意料的（也是不受欢迎的！）。

*   怎么了？
*   如何`get()`返回成员的*副本*，`collection`而不是成员本身？

**编辑**

我读过这个[问题](https://stackoverflow.com/q/728360/1083946)。所以克隆`collection`成员可以完成这项工作。设计模式中是否有另一种方法来管理私有成员和相关的只读属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:47:51.327

没有错，这应该是标准的 Javascript 行为（我认为它与这个 JS 闭包有关）。:)

你必须手动克隆对象（我认为），如果你不想使用 jQuery 和其他东西......并且浅拷贝就足够了

```
function clone(obj)
{
    var cloneObj = {};
    for(var prop in obj )
    {
        cloneObj [prop] = obj[prop];
    }
    return cloneObj;
} 
```

for DeepCopies and stuff you would have to clone those Properties or write a Function, which you could attach to the object prototype, and call clone on properties and so on.... In my opinion for Deepcopies its probaly better to go with jQuery, and even more so if you are using it in your Page/Project/...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:45:10.050

看到[这个](https://stackoverflow.com/questions/122102/what-is-the-most-efficient-way-to-clone-a-javascript-object#answer-122704)答案。

```
this.get = function() {
   return jQuery.extend({}, collection);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T17:45:26.367

在 javascript 中，对象应该通过引用传递，而不是通过值传递。所以，有一个参考。您将如下修改 get 函数以将对象序列化为 JSON 字符串，然后将其反序列化回对象以克隆对象。`JSON.stringify`并且`JSON.parse`在没有任何 3rd 方库的所有浏览器中都受支持。

```
this.get = function(){
 var s = JSON.stringify(collection);
 return JSON.parse(s);
} 
```

如果您在您的网站中包含 jquery，您将使用该`$.extend`功能。
参考：[http ://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)

```
this.get = function(){
 return $.extend({}, collection);
} 
```

# php - xpath 1 中不区分大小写的搜索

> ID：15142023
> 
> 赞同：0
> 
> 时间：2013-02-28T17:36:38.310
> 
> 标签：php, regex, xpath, case-insensitive

我正在通过 HTML 搜索“myfunc”。但是，大小写是不确定的。不幸的是，PHP 与 XPath 1 一起工作，因此所有搜索都区分大小写。

如何更新以下代码以搜索“myfunc”、“MyFunc”、“myFunc”等？

```
foreach($domxpath->query('//*[@*[contains(.,"myfunc")]]') as $node) { 
```

以下不起作用。我也没有尝试实现[translate() work-around](https://stackoverflow.com/questions/625986/how-can-i-use-xpath-to-perform-a-case-insensitive-search-and-support-non-english)。

```
foreach($domxpath->query('//*[@*[matches(.,"[mM][yY][fF][uU][nN][cC]")]]') as $node) { 
```

如果无法使用正则表达式，我如何搜索字符串数组（即“myfunc”、“MyFunc”、“myFunc”等）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:07:03.990

matches 是 XPath 2 函数，在 XPath 1 中，您必须使用 translate 将其转换为规范化大小写：

```
 //*[@*[contains(translate(., "MYFUNC", "myfunc"),"myfunc")]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:39:52.427

使用不[区分大小写选项](http://www.w3.org/TR/xpath-functions/#flags)进行匹配：

```
foreach($domxpath->query('//*[@*[matches(.,"myfunc","i")]]') as $node) { 
```

要比较一系列值，只需使用`=`进行节点集比较：

```
(. = ("myfunc", "MyFunc", "myFunc")) 
```

如果左序列中有任何东西在右序列中，则将返回 true。来自[XPath 规范](http://www.w3.org/TR/xpath/)：

> 如果要比较的两个对象都是节点集，那么当且仅当在第一个节点集中有一个节点并且在第二个节点集中有一个节点使得对两个节点的字符串值都为真。

# ruby-on-rails - 新建 Rails 项目时出现 SSL 错误

> ID：15142024
> 
> 赞同：2
> 
> 时间：2013-02-28T17:36:44.050
> 
> 标签：ruby-on-rails, ruby, ssl

当我使用 制作一个新的 rails 项目（在 Windows 上）时`rails new projectname -d mysql`，它会创建所有文件，然后在尝试执行时返回`bundle install`：

```
C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/vendor/net/http/pe
rsistent/ssl_reuse.rb:70:in `connect': SSL_connect returned=1 errno=0 state=SSLv
3 read server certificate B: certificate verify failed (OpenSSL::SSL::SSLError)
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/vendo
r/net/http/persistent/ssl_reuse.rb:70:in `block in connect'
        from C:/Ruby193/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
        from C:/Ruby193/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/vendo
r/net/http/persistent/ssl_reuse.rb:70:in `connect'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:750:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/vendo
r/net/http/persistent.rb:628:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/vendo
r/net/http/persistent.rb:570:in `connection_for'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/vendo
r/net/http/persistent.rb:930:in `request'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/fetch
er.rb:195:in `fetch'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/fetch
er.rb:169:in `use_api'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/sourc
e/rubygems.rb:223:in `block in remote_specs'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/sourc
e/rubygems.rb:223:in `select'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/sourc
e/rubygems.rb:223:in `remote_specs'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/sourc
e/rubygems.rb:162:in `fetch_specs'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/sourc
e/rubygems.rb:66:in `specs'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/defin
ition.rb:192:in `block (2 levels) in index'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/defin
ition.rb:189:in `each'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/defin
ition.rb:189:in `block in index'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/index
.rb:9:in `build'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/defin
ition.rb:185:in `index'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/defin
ition.rb:179:in `resolve'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/defin
ition.rb:114:in `specs'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/defin
ition.rb:109:in `resolve_remotely!'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/insta
ller.rb:83:in `run'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/insta
ller.rb:14:in `install'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/cli.r
b:247:in `install'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/vendo
r/thor/task.rb:27:in `run'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/vendo
r/thor/invocation.rb:120:in `invoke_task'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/vendo
r/thor.rb:344:in `dispatch'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/vendo
r/thor/base.rb:434:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/bin/bundle:20:in
`block in <main>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/frien
dly_errors.rb:4:in `with_friendly_errors'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/bin/bundle:20:in
`<main>'
        Unfortunately, a fatal error has occurred. Please see the Bundler
        troubleshooting documentation at http://bit.ly/bundler-issues. Thanks! 
```

我在使用 Ruby 2.0 时遇到了同样的错误，并认为这可能是问题所在，但 Ruby 1.9.3（我用于此的版本）也发生了同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:02:25.653

经过一番谷歌搜索后，我发现了一个指南，它向您展示了如何添加正确的 SSL 证书文件（原来是问题所在）：

[https://gist.github.com/fnichol/867550](https://gist.github.com/fnichol/867550)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T10:30:56.630

我遇到了问题。我更改了gem源，然后问题就解决了。首先，使用以下命令检查 gem 源：

`gem sources -l`

它应该是“ [https://rubygems.org/](https://rubygems.org/) ”。

其次，使用以下命令删除 gem 源：

`gem sources --remove https://rubygems.org/`

第三，使用以下命令添加新的 gem 源：

`gem sources -a http://rubygems.org/`

如果您在中国，您还可以使用淘宝宝石资源：

`gem sources -a http://ruby.taobao.org/`

最后，没关系。

* * *

当你创建一个新项目时，如果你遇到了这个问题。您可以在 Gemfile 文件中更改 gem 源。

更改宝石来源

从

`source 'https://rubygems.org/'`

到

`source 'http://rubygems.org/'`

如果您在中国，您还可以使用淘宝宝石资源：

`source 'http://ruby.taobao.org/'`

那么你应该运行以下命令：

`bundle install`

祝你好运！

* * *

我英语不好。所以，对不起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T17:46:54.977

如果在 linux 上，请尝试安装`libssl-dev`，然后`openssl`从源代码重新编译。

`sudo apt-get install libssl-dev`

如果您从源代码编译 ruby​​，请导航到您的 ruby​​ 源代码并进入`ext/openssl`目录。

在那里，做`./configure && make && make install`

看看您是否能够创建新的 Rails 应用程序。

![在此处输入图像描述](../Images/312b225052b9debb65897c46fba9ec03.png)

# php - curl 从外部网站获取价值需要用户 名和密码

> ID：15142025
> 
> 赞同：0
> 
> 时间：2013-02-28T17:36:48.487
> 
> 标签：php, curl

我正在尝试在需要用户名和密码的网站之外获取一些价值形式。通常我需要先去登录页面（[https://xxx.xxx.xxx/HomeAccess](https://xxx.xxx.xxx/HomeAccess)），然后去[https://xxx.xxx.xxx/xxx.aspx](https://xxx.xxx.xxx/xxx.aspx)。但是如果没有登录就进入页面xxx.aspx，我会得到错误“页面无法显示，因为发生了内部服务器错误。”；

在 PHP 中我正在尝试使用此代码

```
<?php

$ch = curl_init();
$url = 'https://xxx.xxx.xxx/xxx.aspx';
$username ='uuuuu';
$password ='ppppp';
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
$output = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch);

print $output;

?> 
```

我得到了空白页。

任何想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:41:03.283

我不确定该站点上的授权是如何设置的，但通常，当您登录时，他们会提供某种访问令牌作为 cookie，您可以使用该访问权限访问站点中的任何其他页面。因此，使用 curl 使用用户名和密码访问登录页面，获取 cookie，然后再次 curl 到您想要的页面。

同样，这一切都取决于您尝试访问的站点。您必须进行一些挖掘才能找出登录发生的位置以及他们如何进行身份验证/授权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:49:56.467

卷曲可以通过这样做给你一个很好的提示：

```
if(curl_exec($ch) === false)
{
    echo 'Curl error: ('.curl_error($ch).'): '.curl_error($ch);
} 
```

我的猜测是您遇到了 SSL 证书验证问题。但它真的可以是 20 种不同的东西。如果您可以在最初的问题中包含您的 $info 值，那也会很有帮助。

# vba - 如何停止报告提示查询中未提供的字段？

> ID：15142026
> 
> 赞同：2
> 
> 时间：2013-02-28T17:36:59.120
> 
> 标签：vba, ms-access

我有一份可多次使用的报告，但有时查询不包括报告中的所有字段。发生这种情况时，报告会在弹出窗口中询问缺少的字段值。我想隐藏这些窗口并默认设置“”或不设置。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:48:35.343

我建议重组报告以考虑多个记录源，而不是隐藏您当前看到的错误。有几种方法可以做到这一点。

在不了解您的报告的情况下很难提供太多细节，但您可以考虑以下几点：

1) 使用未绑定报表并根据查询记录集根据需要动态填充字段。您可以根据用作数据源的查询来改变填充哪些字段，而其他字段将留空和/或隐藏。但是，如果您需要将此数据库分发给其他用户或将数据库编译为可执行版本，这可能会导致问题。

2) 创建一个动态创建或修改报表对象的 VBA 例程。在这种情况下，您将根据多个报告配置文件动态创建新的报告对象（以及其中的控件）（无需重新创建现有报告）。您可以指定控制位置、定义等，并且仅根据需要进行更改。根据您的报告，这可能很容易通过使用所有字段从头开始创建报告，然后只需删除您在给定报告中未使用的字段所需的步骤。

3) 继续使用绑定到一个查询的报表，但根据需要修改查询定义，通过在 VBA 中动态构建 SQL 字符串，根据需要删除字段值。因此查询将始终包含所有报告字段，但在某些情况下会返回真实数据，而在其他情况下会返回虚拟结果，即“”。您还可以更改哪些字段具有 GROUP BY 或 WHERE 子句。

我希望这会有所帮助——祝你好运！

# android - 导出到签名的 APK 后 Web 视图未加载页面

> ID：15142027
> 
> 赞同：2
> 
> 时间：2013-02-28T17:37:04.250
> 
> 标签：android, google-maps, google-maps-api-3

我有一个 android 应用程序，它使用 web 视图加载一个网页，该网页有一个谷歌地图和一些 javascript，android 应用程序可以与之交互以绘制图钉并在信息框点击等时执行操作。

我通过 https 在实时生产服务器上托管我的页面。

所以我让我的网络视图像这样加载页面：

```
String mapViewUrl = "https://mywebsite.com/mywebsite/MyMapApp/Default.html";

in OnCreate:

    webMapView = (WebView) findViewById(R.id.webMapView);

    webMapView.getSettings().setJavaScriptEnabled(true);
    webMapView.addJavascriptInterface(new JavaScriptInterface(this), "android");
    webMapView.getSettings().setPluginsEnabled(true);
    webMapView.getSettings().setDomStorageEnabled(true);
    webMapView.getSettings().setBuiltInZoomControls(true);
    webMapView.getSettings().setSupportZoom(true);
    webMapView.getSettings().setAllowFileAccess(true);
    webMapView.getSettings().setGeolocationEnabled(true);

        final String centerURL = "javascript:centerAt(" + lat + "," + lon + ")";

          //Wait for the page to load then send the location information
          webMapView.setWebViewClient(new WebViewClient(){
            @Override
            public void onPageFinished(WebView view, String url){
                webMapView.loadUrl(centerURL);
            }
          });
          webMapView.loadUrl(mapViewUrl); 
```

现在，当我通过 eclipse 运行应用程序时，使用和不使用 degu，它可以工作。Web 视图加载地图。互动作品。好的。

然后我导出一个签名的 APK。将 APK 复制到我的设备。安装它。运行。没有地图。我的 android 控件只是一个空白的白色 web 视图。是什么赋予了？任何人都可以提供任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:11:06.457

通过注释掉 ProGuard 来修复！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T17:46:12.627

嗨，我遇到了同样的问题，但现在我解决了您需要使用新的密钥库生成一个新密钥，您从中签署 APK 以进行调试，您必须使用您的 android debug.keystore 但对于生产，您有自己的 .keystore 文件，转到 android 文档以“如何生成地图 api 密钥。

请参阅此帖子以获取更多详细信息**[单击此处](https://stackoverflow.com/questions/7296467/google-map-signed-api-key-errors-in-android)**

# bash - 使用 find 和 xargs grep 一些归档日志

> ID：15142030
> 
> 赞同：1
> 
> 时间：2013-02-28T17:37:21.990
> 
> 标签：bash, xargs

我有一个 csv 文件中的 IP 列表，我需要在一大堆存档日志中搜索任何遇到此 IP 的情况，但仅限于 1 月份的文件。

我首先尝试了这个：

```
for i in `cat /tmp/ips.csv`; do zgrep -rHc $i /webstats/2010/some_dir/*/*.2010-01*.access.gz ; done 
```

但这不起作用。我得到：

```
bash: /usr/bin/zgrep: Argument list too long 
```

但是我认为使用 find + xargs 但我不确定应该如何构建我的表达式。我在想这个：

```
find /logs/2010/some_dir/ -name *.2010-01*.access.gz -type f -print0 | xargs zgrep -rHc `/tmp/ips.csv` {} 
```

但是有些东西看起来不太好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:43:00.380

尝试这个 ：

```
find /logs/2010/some_dir -name '*.2010-01*.access.gz' -type f -print0 | xargs -0 zgrep -Hc -f /tmp/ips.csv 
```

# matlab - 在 Matlab 中复制数组内容

> ID：15142032
> 
> 赞同：0
> 
> 时间：2013-02-28T17:37:24.497
> 
> 标签：matlab

假设我有一个数组 X=[1,2,3,4,5] 并且我想以以下格式复制数组两次：

[1,1,2,2,3,3,4,4,5,5]

什么是最简单的选择？

谢谢~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T18:42:56.973

kron命令完全符合您的需要[。](http://www.mathworks.com/help/matlab/ref/kron.html)

```
X = [1,2,3,4,5];
kron(X, [1 1]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T17:41:53.370

简单地使用矩阵乘法：

```
Y = [1; 1] * X;
Y = Y(:)'; 
```

您可以使用 RESHAPE 功能在一行中完成：

```
Y = reshape([1; 1] * X,1,[]); 
```

或者，您可以使用 REPMAT 功能：

```
Y = reshape(repmat(X,2,1), 1,[]); 
```

# asp.net-mvc-3 - 模型变量无法识别 ASP MVC3 DropDownListFor 中的模型属性

> ID：15142033
> 
> 赞同：2
> 
> 时间：2013-02-28T17:37:32.220
> 
> 标签：asp.net-mvc-3, entity-framework, asp.net-mvc-2, model

以下是我的视图中的代码。无论出于何种原因，模型属性（即`.TableName`）都没有被识别为这样。以下是错误消息：

`CS1061: 'PagedList.IPagedList<Monet.Models.FollowUpItems>' does not contain a definition for 'TableName' and no extension method 'TableName' accepting a first argument of type 'PagedList.IPagedList<Monet.Models.FollowUpItems>' could be found (are you missing a using directive or an assembly reference?)`

这是视图索引页面的代码。此页面需要返回 SQL 表中的项目列表`FollowUpItems`：

```
@model PagedList.IPagedList<Monet.Models.FollowUpItems>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using PagedList.Mvc; 
@using PagedList;

<h2>Follow Up Items</h2>

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <span id="searchBox" class="boxMe" >
            <form method="post">
              @Html.DropDownListFor(model => model.TableName, (SelectList)ViewBag.tableID)
              @Html.DropDownListFor(m => m.IssueType, (SelectList)ViewBag.issueID)
              @Html.DropDownListFor(m => m.Status, (SelectList)ViewBag.statusID)

            <input type="image" src="@Url.Content("~/Content/Images/Filter.bmp")" alt="Filter" style="padding-top: 0px;" />
            <a href="#" style="padding-left: 30px;"></a>
            </form>
        </span>
        <br />
        <br />
        <span id="programExplanation" style="width: 500px; float:left; padding: 5px; margin-left: 25px;"></span>

    <span class="error" style="clear: both;">
        @ViewBag.ErrorMessage
    </span>
    <span class="msg">
        @ViewBag.Message
    </span>
    <br />
    <br />
    <br />
} 
```

有问题的下拉列表用作原始项目列表的排序标准。可选择的下拉项目不会反映在数据库中，但是每个代表的特定属性都存在。为了很好的衡量，这里是`FollowUpItems`模型

```
public partial class FollowUpItems
{
    public int Id { get; set; }
    public string TableName { get; set; }
    public string IssueType { get; set; }
    public string Status { get; set; }
    public string Message { get; set; }
    public string CreatedBy { get; set; }
    public System.DateTime CreatedOn { get; set; }
    public string LastUpdateBy { get; set; }
    public Nullable<System.DateTime> LastUpdateOn { get; set; }
    public string Key1 { get; set; }
    public string Key2 { get; set; }
    public string Notes { get; set; }
} 
```

这是来自控制器的代码：

```
 //Sort info
        string table = String.IsNullOrWhiteSpace(dropDownSelection["Table"]) ? "%" : dropDownSelection["Table"];
        string issue = String.IsNullOrWhiteSpace(dropDownSelection["IssueType"]) ? "%" : dropDownSelection["IssueType"];
        string status = String.IsNullOrWhiteSpace(dropDownSelection["Status"]) ? "%" : dropDownSelection["Status"];

        //Set dropdown list items based on previous values
        var tableOptions = new[] { new { Text = "--Table Name--", Value = "%" }, new { Text = "CE", Value = "AgentContEd" }, new { Text = "AgentProductTraining", Value = "C" } };
        var issueOptions = new[] { new { Text = "--Issue Type--", Value = "%" }, new { Text = "Warning", Value = "W" }, new { Text = "Error", Value = "E" } };
        var statusOptions = new[] { new { Text = "--Status Type--", Value = "%" }, new { Text = "Open", Value = "O" }, new { Text = "Under Review", Value = "U" } };

        ViewBag.tableID = new SelectList(tableOptions, "Value", "Text", table);
        ViewBag.issueID = new SelectList(issueOptions, "Value", "Text", issue);
        ViewBag.statusID = new SelectList(statusOptions, "Value", "Text", status); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T17:53:53.230

您的问题是您正在尝试访问不在实际模型中的属性。TableName、IssueType 和 Status 是列表中项目的一部分，而不是列表本身。当您发布表单时，您将如何检索过滤器信息？下拉菜单实际上并不是您的项目的一部分，而是您要应用的过滤器。

你应该让 viewmodel 来处理你所有的 UI 信息——这实际上是你想要访问的。

```
public class YourViewModel
{
  public PagedList.IPagedList<Monet.Models.FollowUpItems> itemList {get;set;}
  public string TableName {get;set;}
  public string IssueType {get;set;}
  public string Status {get;set;}

} 
```

然后您将您的视图模型发布到您的控制器操作，并根据选择处理过滤器。

当您在那里时，您还可以将您的选择列表保存在视图模型中，而不是视图包，从长远来看，它可能会让生活更轻松一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:08:04.837

以更简单的方式考虑您的情况，以便更好地理解。

你有一个对象列表。

列表中的每个对象都有一组属性。

```
public class ModelObject
{
  public string ModelProperty {get; set}
}
var myModels = new List<ModelObject>(); 
```

现在，您可以使用点运算符来访问对象的属性。这没问题：

```
 ModelObject.ModelProperty 
```

但是您不能在*列表*上使用点运算符。

您需要*迭代*列表，或使用类似`First()`或`FirstOrDefault()`之前的内容，然后才能通过点运算符访问列表*成员的属性。*

# java - 为 Mac 捆绑的 Java 应用程序无法启动

> ID：15142034
> 
> 赞同：8
> 
> 时间：2013-02-28T17:37:37.993
> 
> 标签：java, macos, bundle

我正在使用其他答案所建议的 jarbundler 2.2.0，因为该应用程序应该在 Apple 的 JRE 1.6 上运行。

捆绑包似乎是正确的，显示有适当的图标，但单击它没有任何作用。如果我进入它的内容并尝试双击带有指定主文件的 jar 工作正常。

有没有办法看看发生了什么？我可以看到某种错误或日志？

**编辑** 请求的 Info.plist。由于代码是私有的，我用应用程序替换了一些东西：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<plist version="1.0">
  <dict>
    <key>CFBundleName</key>
    <string>Application</string>
    <key>CFBundleShortVersionString</key>
    <string>2.2.0</string>
    <key>CFBundleGetInfoString</key>
    <string>Application version</string>
    <key>CFBundleAllowMixedLocalizations</key>
    <string>false</string>
    <key>CFBundleInfoDictionaryVersion</key>
    <string>6.0</string>
    <key>CFBundleExecutable</key>
    <string>JavaApplicationStub</string>
    <key>CFBundleDevelopmentRegion</key>
    <string>English</string>
    <key>CFBundlePackageType</key>
    <string>APPL</string>
    <key>CFBundleSignature</key>
    <string>????</string>
    <key>CFBundleVersion</key>
    <string>beta</string>
    <key>CFBundleIconFile</key>
    <string>SynamicD.icns</string>
    <key>CFBundleIdentifier</key>
    <string>net.sourceforge.javydreamercsw</string>
    <key>Java</key>
    <dict>
      <key>MainClass</key>
      <string>net.sourceforge.javydreamercsw.Main</string>
      <key>JVMVersion</key>
      <string>1.6.*</string>
      <key>ClassPath</key>
      <array>
        <string>$JAVAROOT/Application.jar</string>
        <string>$JAVAROOT/lib\lib1.jar</string>
        <string>$JAVAROOT/lib\lib2.jar</string>
      </array>
      <key>Properties</key>
      <dict>
        <key>apple.awt.textantialiasing</key>
        <string>true</string>
        <key>apple.awt.brushMetal</key>
        <string>true</string>
        <key>apple.laf.useScreenMenuBar</key>
        <string>true</string>
        <key>apple.awt.showGrowBox</key>
        <string>true</string>
      </dict>
    </dict>
  </dict>
</plist> 
```

PkgInfo 的内容：

```
APPL???? 
```

在 Application.app/Contents/MacOS 我有来自 Mac 机器的 JavaApplicationStub。

结果文件结构：

```
Application.app
|
---Contents
      |
      ---Info.plist
      ---PkgInfo
      ---MacOS
            |
      |      ---JavaApplicationStub
      ---Resources
            |
             ---Java
                  |
                   ----lib
                        |
                         ---lib1.jar
                        |
                         ---lib2.jar
                  |
                   ---Application.jar
            |
             ---Application.icns 
```

请求的命令输出：

```
~ $ java -version
java version "1.7.0_17"
Java(TM) SE Runtime Environment (build 1.7.0_17-b02)
Java HotSpot(TM) 64-Bit Server VM (build 23.7-b01, mixed mode)
~ $ sw_vers -productVersion
10.8.2
~ $ /usr/libexec/java_home -V
Matching Java Virtual Machines (4):
    1.7.0_17, x86_64:   "Java SE 7" /Library/Java/JavaVirtualMachines/jdk1.7.0_17.jdk/Contents/Home
    1.7.0_15, x86_64:   "Java SE 7" /Library/Java/JavaVirtualMachines/jdk1.7.0_15.jdk/Contents/Home
    1.6.0_43-b01-447, x86_64:   "Java SE 6" /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
    1.6.0_43-b01-447, i386: "Java SE 6" /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home

/Library/Java/JavaVirtualMachines/jdk1.7.0_17.jdk/Contents/Home
~ $ /usr/libexec/java_home
/Library/Java/JavaVirtualMachines/jdk1.7.0_17.jdk/Contents/Home
~ $ echo $JAVA_HOME

~ $ echo $JAVA_ARCH

~ $ /Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java -version
java version "1.7.0_17"
Java(TM) SE Runtime Environment (build 1.7.0_17-b02)
Java HotSpot(TM) 64-Bit Server VM (build 23.7-b01, mixed mode)
~ $ ls /Library/Java/JavaVirtualMachines
jdk1.7.0_15.jdk jdk1.7.0_17.jdk
~ $ /System/Library/Frameworks/JavaVM.framework/Commands/java -version
java version "1.6.0_43"
Java(TM) SE Runtime Environment (build 1.6.0_43-b01-447-11M4203)
Java HotSpot(TM) 64-Bit Server VM (build 20.14-b01-447, mixed mode)
~ $ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:38:45.560

那些反斜杠肯定是错误的，因为 Mac OS 是 Unix。应该：

```
 <array>
    <string>$JAVAROOT/Application.jar</string>
    <string>$JAVAROOT/lib/lib1.jar</string>
    <string>$JAVAROOT/lib/lib2.jar</string>
  </array> 
```

既然您说您是在 Windows 上执行此操作的，那么我要检查的另一件事是文件权限。这些文件尤其是：

*   MacOS/JavaApplicationStub (rwxrwxr-x)
*   资源/Java/Application.jar (-rw-rw-r--)
*   资源/Java/lib/lib1.jar (-rw-rw-r--)
*   资源/Java/lib/lib2.jar (-rw-rw-r--)

[最后，不推荐](http://developer.apple.com/library/mac/#documentation/Java/Reference/Java_InfoplistRef/Articles/JavaDictionaryInfo.plistKeys.html)JVMVersion 1.6* 。尝试改用 1.5+ 或 1.6+，因为它可能更兼容。

排除上述所有情况，问题一定出在 JavaApplicationStub 上。注意，来自 JarBundler 页面：

> 在 Windows 或 Linux 下使用 JarBundler ANT 任务时，开发人员必须提供 JavaApplicationStub 的副本。这不能从源代码构建，但必须从 Mac OS X 系统获得。

**Java 启动存根的一个已知问题**

> 2006 年初，Apple 升级到 Quicktime (7.0.4) 导致旧版本的“JavaApplicationStub”无法启动。这些旧副本来自开发人员，他们首先将应用程序包创建为一个目录，然后通过替换包中的 JAR 文件而不是用更新的副本替换“JavaApplicationStub”来创建新应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T19:13:53.540

您是否尝试过使用终端通过终端启动您的应用程序`open`？

```
open Application.app 
```

这应该为您提供有关应用程序无法执行 jar 的原因的更多信息。

更新：通过`open`收益率运行：

> 文件 /Users/MacBookPro/NetBeansProjects/SynamicD/dist/SynamicD.app 的 LSOpenURLsWithRole() 失败并出现错误 -10810

参考[https://developer.apple.com/library/mac/documentation/Carbon/Reference/LaunchServicesReference/LaunchServicesReference.pdf](https://developer.apple.com/library/mac/documentation/Carbon/Reference/LaunchServicesReference/LaunchServicesReference.pdf)（第69页）显示错误描述为：

> kLSUnknownErr -10810 发生未知错误。在 OS X v10.0 及更高版本中可用。

# commit - Tower 不会回滚提交

> ID：15142035
> 
> 赞同：18
> 
> 时间：2013-02-28T17:37:45.750
> 
> 标签：commit, git-tower

我正在尝试使用带有 Mac 0SX v 10.6.8 的 Tower v 1.4.16 回滚到特定提交。当我右键单击提交时，“回滚到此提交”选项显示为灰色。为什么会这样？

![在此处输入图像描述](../Images/76386901ff2c569210c56aed5e730c06.png)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-01T15:53:59.443

问题解决了 - 我没有在左侧列中选择（头部）。一旦我点击“主人（头）”。可以使用回滚到此提交和还原此提交的选项。

# c++ - Windows 上的 C11 线程

> ID：15142036
> 
> 赞同：6
> 
> 时间：2013-02-28T17:37:53.137
> 
> 标签：c++, windows, multithreading, c11

我正在 Windows 上的 Visual Studio 2012 express 中创建跨平台软件。由于显而易见的原因，我不能使用 .NET 的`System::Threading::Thread`. 我希望在使用 VS2012 时可以使用 C11 的新线程特性（`threads.h`不是`pthread.h`），因为我创建了一个基于 .NET 表单的抽象框架。我开始相信 Windows 是不可能的。有人有想法吗。如果这些是我唯一的选择，我只会使用 C++ 库（boost 和 std）。

有没有人知道该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T17:46:38.317

Visual Studio 2012 不支持 C11 的线程（微软一再声明它对与 C 保持同步没有兴趣，更愿意专注于 C++），但它*确实*支持 C++11 的[std::thread 和相关工具](http://en.cppreference.com/w/cpp/thread)。如果您正在编写 C++，则可以说无论如何都应该使用它们而不是 C 的线程库。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-02-20T17:12:03.527

Visual Studio 2017 包含一个`xthreads.h`与`threads.h`. 例如：

来自[https://en.cppreference.com/w/c/thread/thrd_sleep](https://en.cppreference.com/w/c/thread/thrd_sleep)

```
#include <threads.h>
#include <time.h>
#include <stdio.h>

int main(void)
{
    printf("Time: %s", ctime(&(time_t){time(NULL)}));
    thrd_sleep(&(struct timespec){.tv_sec=1}, NULL); // sleep 1 sec
    printf("Time: %s", ctime(&(time_t){time(NULL)}));
} 
```

将会

```
#include <thr/xthreads.h>
#include <time.h>
#include <stdio.h>

int main(void)
{
    struct xtime stoptime;
    xtime_get( &stoptime, 1);
    stoptime.sec += 1;
    printf("Time: %s", ctime(&(time_t){time(NULL)}));
    _Thrd_sleep( &stoptime ); 
    printf("Time: %s", ctime(&(time_t){time(NULL)}));
} 
```

*** 注意：`xthreads.h`不是标准的，因此可能会发生变化。***

[https://gist.github.com/yohhoy/2223710](https://gist.github.com/yohhoy/2223710)上还有一个仿真库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T19:27:08.823

C11 线程接口主要是从 Dikumware 在其专有线程库中的线程接口复制而来的。AFAIR 他们的东西在不同的平台上运行，并且他们创建了该接口作为 Windows 线程和 POSIX 线程功能的交集。

我不知道他们现在是否将其作为“官方”C11 线程库，但应该不会太远。

# java - 在 if-else 块中找不到符号错误

> ID：15142041
> 
> 赞同：-4
> 
> 时间：2013-02-28T17:37:58.340
> 
> 标签：java

我无法弄清楚我的代码哪里出错了，我在第一行不断收到“找不到符号”错误，我似乎无法发现错误。这是我的代码的一部分。帮助？！

```
if (Array.getlength(args) == 0)
{
    for (int i = 0; i < args.length; i++)
    {
        while (Text.thereAreMoreLinesIn(fileName))
        {
            String line = Text.readNextLineFrom((fileName));
            Text.splitAtSpaces(line);
            ICAO = Text.toDouble(args[i+0]);
            t = Text.toDouble(args[i+1]);
            v = Text.toDouble(args[i+2]);
            windChill = Weather.windChillNA(t,v);
            Map.setTemperature(args[i+0],windChill);
        } 
    }
}
else {System.out.print("Help");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T17:44:16.753

它应该是 Array.getLength，而不是 Array.getlength Java 区分大小写，您应该使用 Eclipse 之类的 IDE 来获取有关此类问题的警告。

除此之外，您的循环将不会运行，您的 if 语句必须是这样的

```
if (Array.getLength(args) > 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:48:25.187

我猜你的意思是`if(args.length>0)`or `if(args.length!=0)`，因为我找不到`Array`. 如前所述，使用您当前的语句，即使没有错误，您的循环也不会运行。

# c# - 修改现有的 c# 文件

> ID：15142042
> 
> 赞同：-8
> 
> 时间：2013-02-28T17:37:58.473
> 
> 标签：c#, metaprogramming

我需要将一些类/属性级别的属性添加到许多 c# 文件中，因此我认为不是手动添加它们，而是以编程方式进行。

我的问题基本上是如何以编程方式编辑 ac# 文件，我的意思是将 c# 文件加载为 codedom 或 AST 并对其进行编辑并重写到磁盘。

任何 API 都可用于此类工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T17:50:33.673

查看[CodeDom](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)。您可以加载现有的类，修改它们的对象图，并生成 C# 文件（甚至 JIT 编译和使用）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T17:48:27.840

如果它们都具有相同的属性...

创建一个具有所有属性的类；假设你`FarmingObjectBase` 用属性调用它：

```
FarmName{get;set;}
TractorCount{get;set;} 
```

让你的所有类扩展`FarmingObjectBase`，以便它们获得它们的属性，它们都将具有这两个属性，

# netbeans - 如何恢复netbeans中修改过的文件？

> ID：15142052
> 
> 赞同：0
> 
> 时间：2013-02-28T17:38:47.417
> 
> 标签：netbeans, revision-history

我正在做一个重要的项目。我修改了一些 php 和 css 文件并上传了主题。然后，我删除了缓存并且该项目不起作用。我想首先修改恢复文件。有办法吗？对不起我的英语。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T05:01:07.453

您没有说您使用的是哪个版本的 Netbeans，但如果它是最近的版本，您可以尝试使用“*本地历史*”功能。

该功能在最近的版本中发生了一些变化，但如果它可用，应该有一个*历史* 选项，使用右键单击*项目*浏览器中的文件。或者，从菜单*Team* > *Local History*中。

再次右键单击历史记录中的正确版本应显示恢复到该版本的选项。

# python - 如何在嵌入式解释器中分析 Python 程序？

> ID：15142056
> 
> 赞同：1
> 
> 时间：2013-02-28T17:39:03.633
> 
> 标签：python, profiling, plasma

我正在用 Python 编写 Plasma (Qt) 小部件。它的工作方式是我编写一个实现某个接口的类，在一个函数中实例化它，首先由 Plasma 调用工厂函数，然后在事件发生时调用类中的某些方法。

我如何分析这样的代码？我不能使用 cProfile 或 yappi，因为没有单一的 main() 函数（主要函数在 Plasma 的 C++ 代码中）。我已经没有想法了，我宁愿避免在每个方法中添加 start()/stop()。

# c# - 哪些 DateTime 格式适用于元素？

> ID：15142059
> 
> 赞同：2
> 
> 时间：2013-02-28T17:39:18.363
> 
> 标签：c#, datetime, string-formatting

该[元素的](http://www.w3.org/html/wg/drafts/html/master/single-page.html#the-time-element)[HTML5 规范`<time>`](http://www.w3.org/html/wg/drafts/html/master/single-page.html#the-time-element)列出了许多对元素的“日期时间值”有效的格式。

哪些字符串格式可用于格式化`DateTime`对象，使其成为有效的“日期时间值”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T17:39:18.363

## 有效的月份字符串

*   2011-11
    `"yyyy-MM"`

## 有效的日期字符串

*   2011-11-12
    `"yyyy-MM-dd"`

## 有效的无年日期字符串

*   11-12
    `"MM-dd"`

## 有效的时间字符串

*   14:54
    `"H:mm"`
*   14:54:39
    `"H:mm:ss"`
*   14:54:39.929
    `"H:mm:ss.fff"`

## 有效的本地日期和时间字符串

*   2011-11-12T14:54
    `"yyyy-MM-ddTH:mm"`
*   2011-11-12T14:54:39
    `"yyyy-MM-ddTH:mm:ss"`
*   2011-11-12T14:54:39.929
    `"yyyy-MM-ddTH:mm:ss.fff"`
*   2011-11-12 14:54
    `"yyyy-MM-dd H:mm"`
*   2011-11-12 14:54:39
    `"yyyy-MM-dd H:mm:ss"`
*   2011-11-12 14:54:39.929
    `"yyyy-MM-dd H:mm:ss.fff"`

## 有效的时区偏移字符串

*   Z
    `"K"`
*   +0000
*   +00:00
    `"zzz"`
*   -0800
*   -08:00
    `"zzz"`

## 有效的全局日期和时间字符串

*   2011-11-12T14:54Z
    `"yyyy-MM-ddTH:mmK"`
*   2011-11-12T14:54:39Z
    `"yyyy-MM-ddTH:mm:ssK"`
*   2011-11-12T14:54:39.929Z
    `"yyyy-MM-ddTH:mm:ss.fffK"`
*   2011-11-12T14:54+0000
*   2011-11-12T14:54:39+0000
*   2011-11-12T14:54:39.929+0000
*   2011-11-12T14:54+00:00
    `"yyyy-MM-ddTH:mmzzz"`
*   2011-11-12T14:54:39+00:00
    `"yyyy-MM-ddTH:mm:sszzz"`
*   2011-11-12T14:54:39.929+00:00
    `"yyyy-MM-ddTH:mm:ss.fffzzz"`
*   2011-11-12T06:54-0800
*   2011-11-12T06:54:39-0800
*   2011-11-12T06:54:39.929-0800
*   2011-11-12T06:54-08:00
    `"yyyy-MM-ddTHH:mmzzz"`
*   2011-11-12T06:54:39-08:00
    `"yyyy-MM-ddTHH:mm:sszzz"`
*   2011-11-12T06:54:39.929-08:00
    `"yyyy-MM-ddTHH:mm:ss.fffzzz"`
*   2011-11-12 14:54Z
    `"yyyy-MM-dd H:mmK"`
*   2011-11-12 14:54:39Z
    `"yyyy-MM-dd H:mm:ssK"`
*   2011-11-12 14:54:39.929Z
    `"yyyy-MM-dd H:mm:ss:fffK"`
*   2011-11-12 14:54+0000
*   2011-11-12 14:54:39+0000
*   2011-11-12 14:54:39.929+0000
*   2011-11-12 14:54+00:00
    `"yyyy-MM-dd H:mmzzz"`
*   2011-11-12 14:54:39+00:00
    `"yyyy-MM-dd H:mm:sszzz"`
*   2011-11-12 14:54:39.929+00:00
    `"yyyy-MM-dd H:mm:ss.fffzzz"`
*   2011-11-12 06:54-0800
*   2011-11-12 06:54:39-0800
*   2011-11-12 06:54:39.929-0800
*   2011-11-12 06:54-08:00
    `"yyyy-MM-dd HH:mmzzz"`
*   2011-11-12 06:54:39-08:00
    `"yyyy-MM-dd HH:mm:sszzz"`
*   2011-11-12 06:54:39.929-08:00
    `"yyyy-MM-dd HH:mm:ss.fffzzz"`

## 有效的星期字符串

*   2011-W46

## 四个或更多 ASCII 数字，至少有一个不是“0”（U+0030）

*   2011
    `"yyyy"`

## 有效的持续时间字符串

*   PT4H18M3S
*   4h 18m 3s

# ruby - 如何干燥 if else Ruby 函数？

> ID：15142060
> 
> 赞同：0
> 
> 时间：2013-02-28T17:39:20.443
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

如何重构这段 Ruby 代码以使其不那么难看：

```
def default_item_price(user)
  if project.present?
    if project.hourly_rate?
      project.hourly_rate
    elsif project.person.hourly_rate?
      project.person.hourly_rate
    elsif project.person.organisation && project.person.organisation.hourly_rate?
      project.person.organisation.hourly_rate
    else
      user.preference.hourly_rate     
    end
  else
    user.preference.hourly_rate
  end
end 
```

我没有做过很多 Ruby 编程，我想知道最后 6 行是否可以以某种方式干掉。谢谢你的帮助！

这些是我的模型：

```
class User
  has_many :people
end

class Person
  belongs_to :user
  has_many :projects

  def real_hourly_rate
    hourly_rate || organisation.real_hourly_rate
  end    
end

class Project
  belongs_to :person
  has_many :invoices

  def real_hourly_rate
    hourly_rate || person.real_hourly_rate
  end
end

class Invoice
  belongs_to :project

  def default_item_price(user)
    project.real_hourly_rate || user.preference.hourly_rate    
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T17:56:31.667

我认为你需要重新考虑你的设计。你有至少四个不同课程的小时费率，这有点混乱。我了解您正在尝试根据可以被更本地化的关联覆盖的关联分配默认值，但是您正在执行所有覆盖的任何类（几乎肯定不是应该负责的类）。

采取`person`：如果一个人有特定的小时费率，则获取该值，否则，获取该人所在组织的小时费率。这个逻辑属于`Person`类，在公共接口中有一个方法，可以让你一步来查询这个，比如说`person.real_hourly_rate`。你可以用`project`.

最终，如果你的类有很好的、定义明确的 api，你应该能够将这个方法定义为：

```
def default_item_price(user)
  project_hourly_rate || user.preference_hourly_rate
end 
```

在这里，意图很明确，繁重的工作分布在它需要的类中，并且任何拿起你的代码的人都可以阅读和理解该方法。

有一个方便的 rails 方法`delegate`可以帮助您解决其中的一些问题：

```
class Project
  delegate :hourly_rate, to: :person, prefix: true, allow_nil: true

  def real_hourly_rate
    hourly_rate || person_hourly_rate
  end 
```

此`real_hourly_rate`方法（也许这不是它的最佳名称）如果存在，将给您每小时费率，如果不存在，它将询问相关人员的每小时费率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T17:59:45.367

我同意扎克的观点。无论如何，这是一个烘干机重写！

```
def hourly_rate_from anything
  anything.hourly_rate? ? anything.hourly_rate : nil
end

def default_item_price user
  if project.present?
    rate = hourly_rate_from project
    rate ||= hourly_rate_from project.person
    if project.person.organisation
      rate ||= hourly_rate_from( project.person.organisation ) 
    end
    return rate if rate
  end
  hourly_rate_from user.preference
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T18:46:44.520

与 Java 等人不同，在 Ruby 中`&&`并`||`返回他们的一个或另一个参数。这可用于使具有一系列空值检查的代码非常简洁：

```
def default_item_price(user)
  if project.present?
    project.hourly_rate ||
    project.person.hourly_rate ||
    (project.person.organisation && project.person.organisation.hourly_rate) ||
    user.preference.hourly_rate
  else
    user.preference.hourly_rate
  end
end 
```

# javascript - 是否可以加载脚本文件以在另一个函数中间运行

> ID：15142068
> 
> 赞同：1
> 
> 时间：2013-02-28T17:39:46.153
> 
> 标签：javascript, jquery

如果我知道当某个条件为真时，我需要运行不同的脚本，是否可以将脚本动态加载到我正在运行的函数中？

```
$("#container").on("click", "#submit", function(){
    var prodID = $("#productSelect").find(".selected_option").data("product_id");

    //somehow load a script like "validation_" + prodId;

}); 
```

或者我应该手动将所有代码放入一个函数中

```
$("#container").on("click", "#submit", function(){
    var prodID = $("#productSelect").find(".selected_option").data("product_id");

    switch (prodID){
       case 1:
       //code for prodID 1
       break;

       case 2:
       //code for prodID 2
       break;

       case 3:
       //code for prodID 3
       break;

    }

}); 
```

这只是试图让事情看起来更干净一些。我不知道这是不是个好主意。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:46:41.340

我建议一起去

```
$("#container").on("click", "#submit", function(){
  var prodID = $("#productSelect").find(".selected_option").data("product_id");

  switch (prodID){
   case 1:
   functionForCase1();
   break;

   case 2:
   functionForCase2();
   break;

   case 3:
   functionForCase3();
   break;

  }
});

function functionForCase1(){
   //code for prodID 1
}

function functionForCase2(){
   //code for prodID 2
}

function functionForCase1(){
   //code for prodID 3
} 
```

# vbscript - 确定哪个脚本最后完成

> ID：15142070
> 
> 赞同：1
> 
> 时间：2013-02-28T17:39:59.380
> 
> 标签：vbscript

我有几个在目录中运行的脚本。它们都是同时执行的。我无法确定哪个脚本最后完成。有没有办法找到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:52:46.170

使用主脚本通过 .Exec 启动（子）脚本；监控 exec 对象的状态属性；记录/显示 exec 对象的状态更改为 WshFinished 的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T21:40:10.807

基本日志记录将完成这项工作，在脚本开始和结束时写入日志条目，您还可以记录持续时间。您可以将结果写入日志文件。结果以秒为单位。

```
startTime=timer
wscript.echo "started at " & startTime
'do your stuff'
wScript.sleep 500
stopTime=timer
wscript.echo "stopped at " & StopTime & " duration was " & stopTime - startTime

'started at 81558,17
'stopped at 81558,67 duration was 0,5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T21:14:33.400

我的建议是基于 WMI。（向下滚动以获得新想法）

```
Option Explicit

Dim objWMIService, colProcesses, objProcess
Dim iCount, iLoop, sFileName

Set objWMIService = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}!\\" _
    & ".\root\cimv2")

' wait all scripts to finish
Do While True
    WScript.Sleep 200
    ' snapshot running scripts
    Set colProcesses = objWMIService.ExecQuery( _
        "Select * From Win32_Process " _
        & "Where Name = 'WScript.exe' " _
        & "OR Name = 'CScript.exe'", , 48)

    iCount = 0
    For Each objProcess In colProcesses
        ' skip current "monitor" script, test the rest
        If InStr (objProcess.CommandLine, WScript.ScriptName) = 0 Then
            sFileName = Split(objProcess.CommandLine, """")(3)
            iCount = iCount + 1
        End If
    Next
    If iCount < 1 Then Exit Do
    iLoop = iLoop + 1
Loop

' and show what we get
If iLoop > 0 Then
    WScript.Echo "LastOne:" & vbNewLine & sFileName
Else
    WScript.Echo "No other .vbs running except Me"
End If 
```

[编辑] 好吧，我现在想到了一个新想法，也许你会觉得它很有趣，或者至少试一试。

```
' do your work here...
WScript.Sleep 3000

Call SelfLogged

Sub SelfLogged()
    Const ForAppending = 8
    With CreateObject("Scripting.FileSystemObject")
        With .OpenTextFile(WScript.ScriptFullName, ForAppending)
            .Write Chr(0)
        End With
    End With
End Sub 
```

这个想法是通过将字符附加到文件来更改文件`DateLastModified`属性。

# php - 在哪里可以找到从 PHP 5.4 中删除的函数？

> ID：15142072
> 
> 赞同：0
> 
> 时间：2013-02-28T17:40:16.883
> 
> 标签：php

我正在使用一个非常旧的代码库，我需要知道在 PHP 5.4 中删除了哪些函数，以便在升级之前解决它们。谁能告诉我在哪里可以找到已删除的功能列表？我查看了变更日志，但似乎没有列出它们。例如，我知道 session_is_registered() 已被删除，但除了该函数的文档页面外，我找不到任何提及它的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:42:01.243

你确定你看过更新日志吗？[http://php.net/ChangeLog-5.php#5.4.0](http://php.net/ChangeLog-5.php#5.4.0)

```
[[...snip...]]
Version 5.4.0
01-Mar-2012
...
 - Removed Legacy Features
     ....
     - session_is_registered(), ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T17:41:24.453

您可以在此处找到已弃用的功能：

*   [http://php.net/manual/en/migration54.deprecated.php](http://php.net/manual/en/migration54.deprecated.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T17:43:35.190

这里有一个脚本[http://www.typofree.org/article/archive/2011/may/title/check-your-php-code-for-deprecated-ini-directives-and-functions/](http://www.typofree.org/article/archive/2011/may/title/check-your-php-code-for-deprecated-ini-directives-and-functions/)

它适用于 PHP 5.3，但 5.3+ 很容易手动检查或简单地添加到脚本的参数中。它是为 TYPO3 设计的，但它基本上检查目录中的所有脚本，因此它应该可用于 PHP 中的各种 Web 应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T17:44:45.943

您正在寻找的是 PHP 的折旧函数列表。

根据您要转换的原始 PHP 版本，您可以浏览每个 PHP 版本直到最新版本，以确保您的所有函数都可以有效使用。

您可以在官方 php.net 站点上找到每个 PHP 版本的折旧函数，该站点位于此处：[http](http://www.php.net/manual/) ://www.php.net/manual/通过搜索其文档。

例如，要获取 PHP 5.4 的折旧函数列表，我会使用 google 搜索`PHP 5.4 depreciated functions`结果，其中一个最好的结果应该来自官方 PHP 文档。

PHP 5.4 弃用函数： http: [//php.net/manual/en/migration53.deprecated.php](http://php.net/manual/en/migration53.deprecated.php)

还值得注意的是，他们有一个 PHP 迁移指南，从 PHP 4 迁移到 PHP 5：[http ://www.php.net/migration5](http://www.php.net/migration5)

# wordpress - WordPress - 使用奇/偶系统列出用户

> ID：15142073
> 
> 赞同：1
> 
> 时间：2013-02-28T17:40:18.230
> 
> 标签：wordpress

标题可能具有误导性，因为我不完全确定如何表达我想要完成的内容。

我想在 Meet the Team 页面上列出 WordPress 运行网站的用户，并且我发现这是该工作的最佳代码：

```
function contributors() {
global $wpdb;

$authors = $wpdb->get_results("SELECT ID, user_nicename from $wpdb->users ORDER BY display_name");

foreach($authors as $author) {
echo "<li>";
echo "<a href=\"".get_bloginfo('url')."/?author=";
echo $author->ID;
echo "\">";
echo get_avatar($author->ID);
echo "</a>";
echo '<div>';
echo "<a href=\"".get_bloginfo('url')."/?author=";
echo $author->ID;
echo "\">";
the_author_meta('display_name', $author->ID);
echo "</a>";
echo "</div>";
echo "</li>";
}
} 
```

这很好用，并根据需要列出用户。但是，我的客户希望用户的布局如下：

[名称] [图片]
[描述]

[图片] [名称]
[描述]

[名称] [图片]
[描述]

等等。因此，奇数的图像在右侧，偶数的图像在左侧。这个想法是稍微打破设计，让它看起来不那么僵硬。（希望这是有道理的）

关于如何使用开头给出的代码实现这一点的任何想法？

非常感谢 ：）

（注意 - 我知道给出的香草代码没有任何图像调用或类似的东西，我只知道这是起点，它是 PHP 函数的术语。我将添加图像调用、描述和之后的名字）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:52:00.847

对我来说，你有两个选择。

**选项1**

使用变量将奇数/偶数类添加到图像中，然后您可以使用 css 定位并将图像浮动到适当的一侧

这是一个例子。

```
<?php
function contributors() {
    global $wpdb;

    $authors = $wpdb->get_results("SELECT ID, user_nicename from $wpdb->users ORDER BY display_name");

    $count = 1;
    $class = "odd";
    foreach( $authors as $author ) : ?>
        <li class="<?php echo $class; ?>">
            <a href="<?php echo get_author_posts_url( $author->ID ); ?>">
                <?php echo get_avatar( $author->ID ); ?>
            </a>
            <div>
                <a href="<?php echo get_author_posts_url( $author->ID ); ?>">
                    <?php echo get_the_author_meta( 'display_name', $author->ID ); ?>
                </a>
            </div>
        </li>
        <?php 
        $count = $count * -1;

        if( $count == 1) {
            $class = "even";
        } else {
            $class = "odd";
        }

    endforeach;
}
?> 
```

和CSS

```
.odd img {
    float: right;
}

.even img {
   float: left;
} 
```

**选项 #2**

使用 nth-child() css 选择器来控制图像浮动到哪一侧。

例子：

```
ul li:nth-child(odd) img {
    float: right;
}

ul li:nth-child(even) img {
   float: left;
} 
```

此外，您可能想查看内置的作者函数 [https://codex.wordpress.org/Template_Tags#Author_tags](https://codex.wordpress.org/Template_Tags#Author_tags)

# ios - 如何使用 Interface Builder 在 iPhone 5 上扩展 UITableView 以填充全屏？

> ID：15142074
> 
> 赞同：8
> 
> 时间：2013-02-28T17:40:24.143
> 
> 标签：ios, uitableview, interface-builder, autolayout

是否可以使用静态单元格扩展 a`UITableView`以自动调整到 4" iPhone 5 屏幕并相应地扩展每个单元格的高度`UITableViewCell`？如果我在 IB 中创建一个`UITableView`具有 3 个静态行的简单单元格，当我在 iPhone 3.5" 上查看它时显示它看起来不错，但在 iPhone 4" 显示屏上，底部有额外的空白。我尝试使用自动布局（我只对 iOS6 感兴趣）、设置自动调整大小选项等，但无济于事。

顺便说一句 - 我知道我可以在代码中设置高度，例如`heightForRowAtIndexPath:`将边界或框架高度除以行数（即 3 行）。但我正在寻找更有活力的东西。

![iPhone 在 3.5 上调整大小问题的示例](../Images/28d4d235b9045054e6cd18c4034b2c2d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-22T10:07:38.240

该问题已通过在 TableView 上设置 AutoLayout 属性得到解决。一旦我这样做了，表格就会相应地调整大小。我随后还发现我可以通过设置 AutoSizing 掩码来调整大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-01T12:10:20.090

我有一个类似的问题。在 Xcode 6.4 中，我在情节提要中为我的 UITableView 添加了约束。

[![在此处输入图像描述](../Images/b27a51003aafdd92fbe0e04141b7c5d9.png)](https://i.stack.imgur.com/sWB3y.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-19T13:46:46.453

另一种解决方法（这对我有用）是单击 Apply 4-inch form factor 按钮并将 UITableView 扩展到屏幕底部。

![在此处输入图像描述](../Images/d4c68bdda59263c604a0dc812af48c3a.png)

# cassandra - 使用 Cassandra 的稀疏非规范化关系 - CQL3/2/1 还是 thrift？

> ID：15142076
> 
> 赞同：0
> 
> 时间：2013-02-28T17:40:28.587
> 
> 标签：cassandra

*或者...*

**如何使用 cassandra 记录我们的审计跟踪？**

我有以下关系模型，我用它作为实验的基础，看看我们是否可以使用 Cassandra 来存储数亿可查询的行。

```
| datetime | planet | continent | country | state | <...> | street | who_id | who_name | msg | p1 | p2 | p3 | 
```

这些实体中的任何一个都可以生成审计日志条目。此外，一个低级条目将存储其祖先的所有参考资料；因此，基于高级实体的查找将返回其下方发生的所有内容。[1] 使用 PostgreSQL，我们将有大量空的密集行：Cassandra 的一个好处是稀疏行。（基于大陆的日志条目没有街道列 NULL）。目前有 25 个实体具有各种排列的关系。

我们还希望在事件发生时保留对象图中实体的名称。

我以为我必须掌握数据模型，并认为我会像这样对其进行建模。

*对关系链接使用任意复合列。*

```
| (row key)        | planet:1 | continent:101 | country:44 | who:4 | msg             | p1 | p2 | p3   |  
| COUNTRY:TimeUUID | ---------+---------------+------------+-------+-----------------+----+----+------| 
|                  |  "earth" | "europe"      | " UK"      | "Rob" | "*it happnzd!!" | 1  | 5  | true | 
```

我的目标是能够搜索 who:4 并获取他们的所有更改。同样，抓取具有 planet:1 的行 - 显示地球上发生的所有变化。

实体链接列是动态的（或者至少我是这么认为的）它们将用于奇怪而奇妙的组合。它认为不必预先指定它们是一个福音，并且通过使用复合类型的列名，可以查询。

*   答：我仍然不确定这是否适用于任何口味的 cassandra。
*   B. 我不知道如何在 CQL3 中解决这种情况。任何帮助将不胜感激。
*   C. 我应该使用/关心 CQL 吗？(3)？CQL3 是未来还是节俭/pelops 仍然是面向未来的方式？

12 个月前 - 我读到了有关 Cassandra 的文章并买了几本关于该主题的书。当我阅读它们并开始一个可能受益的项目时，世界已经发生了变化，我在精神上挣扎的东西被抛弃了，转而使用看起来像 SQL 的东西。所以现在我也很困惑。

[1] 这里的非规范化是有意义的，因为实际上审计日志是一个历史快照，因此它记录了“*事件发生时*”的确切对象图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T23:22:11.483

我相信空值在 Cassandra 中是免费的。也就是说，如果一行中的一列是 NULL，则*不是*通过记录某种“空标志”来存储的。相反，该列根本没有存储任何内容。因此，具有许多大部分为空的列的非规范化模式并不昂贵。

# ios - 用于管理对其实例化可能尚未完成的单例的访问的 Objective C 设计模式 (iOS)

> ID：15142084
> 
> 赞同：1
> 
> 时间：2013-02-28T17:40:50.663
> 
> 标签：ios, objective-c, ios5, ios6

我有一个关于管理对单例的访问的问题，此时它的初始化可能尚未完成，它是第一次使用。我创建了一个名为 StoriesModel 的单例，其中包含一些用于打开或创建其数据库文件的 Core Data 初始化代码。初始化后，这个单例使其 ManagedObjectContext 可用于应用程序中的各种屏幕，用于创建对象、显示对象表等。

我第一次打电话：

[StoriesModel sharedModel].context

它显然会失败。在 Objective C 中，解决这个问题的好模式是什么？我知道我可以在使用模型类之前对其进行第一次调用，但这并不总是有效。我以前的语言使用事件和数据绑定之类的东西来解决这个问题。我是多线程的新手。

这是标题的一些代码：

```
@interface StoriesModel : NSObject
+ (StoriesModel *)sharedModel;
@property (nonatomic,strong) NSManagedObjectContext *context;
@end 
```

和实施：

```
@implementation StoriesModel

+ (StoriesModel *)sharedModel
{
    static StoriesModel *sharedSingleton;

    @synchronized(self)
    {
        if (!sharedSingleton)
        {
            sharedSingleton = [[StoriesModel alloc] init];
            [sharedSingleton doInit];
        }
        return sharedSingleton;
    }
}
- (void)doInit
{
    // do some stuff that results in the context property being set in a few seconds
}
@end 
```

谢谢，

格里

-- 修改后的上下文获取器示例：

```
- (NSManagedObjectContext *)context
{
    if (!self.storyDatabase)
    {
        NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
        url = [url URLByAppendingPathComponent:@"StoryDatabase"];
        self.storyDatabase = [[UIManagedDocument alloc] initWithFileURL:url];

        // if file doesn't exist create it
        if (![[NSFileManager defaultManager] fileExistsAtPath:[self.storyDatabase.fileURL path]])
        {
            [self.storyDatabase saveToURL:_storyDatabase.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success)
             {
                 _context = self.storyDatabase.managedObjectContext;
                 [self populateSampleStories];
             }];
        }
        // if file exists but is closed open it
        else if (self.storyDatabase.documentState == UIDocumentStateClosed)
        {
            [self.storyDatabase openWithCompletionHandler:^(BOOL success)
             {
                 _context = self.storyDatabase.managedObjectContext;
             }];
        }
        // if file exists and is open use it
        else if (self.storyDatabase.documentState == UIDocumentStateNormal)
        {
            _context = self.storyDatabase.managedObjectContext;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T17:55:02.977

您可以使用`pthread_once`or`dispatch_once`来确保您的单例初始化程序只执行一次。

`dispatch_once`示例：[在 Objective C 中使用 GCD 的 dispatch_once 创建单例](https://stackoverflow.com/questions/5720029/create-singleton-using-gcds-dispatch-once-in-objective-c?rq=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T17:57:38.687

Cocoa samurai 在他的博客中讨论了这个问题，这段代码应该可以快速创建单例，并适用于多线程应用程序。

```
 +(MyClass *)singleton {
  static dispatch_once_t pred;
  static MyClass *shared = nil;

  dispatch_once(&pred, ^{
    shared = [[MyClass alloc] init];
  });
  return shared;
  } 
```

查看此链接
[http://cocoasamurai.blogspot.com/2011/04/singletons-your-doing-them-wrong.html](http://cocoasamurai.blogspot.com/2011/04/singletons-your-doing-them-wrong.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T18:46:48.653

这里的基本设计问题是：在创建单例 StoriesModel 时，你能做有用的事情吗？做这些会使你的代码复杂化吗？

我的偏好是

```
 [StoriesModel sharedModel].context 
```

进行初始化并仅在准备好时返回。

```
 NSBlockOperation *op=[NSBlockOperationWithBlock:(^{
      StoryContext *context=[StoriesModel sharedModel].context;
      [context doSomething];
 }; 
```

将其转至另一个线程并继续执行其他任务。

* * *

例如，您的 getter 可能非常简单：

```
- (NSManagedObjectContext *)context
{
    if (self.storyDatabase) return self.storyDatabase;
    self.storyDatabase=[self spendSomeTimeAt: theLibrary];  // slow!
    return self.storyDatabase;
} 
```

你的初始化代码可能是这样的：

```
 NSBlockOperation *op=[NSBlockOperationWithBlock:(^{
  StoryContext *context=[StoriesModel sharedModel].context;
        [context doSomething];
  };
  NSOperatorQueue *q=[self workQueue];
  [q addOperation: op];
  // proceed to do some other things while visiting the library
  [self initializeGraphics];
  [self cook: dinner];
  [self refactor: yourCode]; 
```

但是所有这些都带有一些过早的优化。如果您不确定第一次设置上下文是否会成为瓶颈，请以直接的方式进行，并在下雨的下午再回来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T20:56:01.550

这实际上取决于您是否可以阻止尝试访问单例的线程。如果你是，你可以尝试使用`dispatch_semaphore`. 基本上它可以让你说“直到完成一些工作，阻止这个调用”（还可以让你管理一组资源，但这与此无关）。或者只是有一个布尔值`done`ivar 和`while(!done){}`.

您还可以让您的 sharedModel 和 doInit 采用完成块或发布和`NSNotification`.

# java - 专门针对双精度和浮点精度的 java 类

> ID：15142085
> 
> 赞同：5
> 
> 时间：2013-02-28T17:40:58.967
> 
> 标签：java, performance, oop, double, precision

我想知道有人可以帮我提供一个类的双精度和浮点精度选项吗？

我正在使用 Java3D，并且根据 Point3d 和 Point3f 的 API 规范，据我了解，该实现有效地复制了 Point3f 类，在必要时将 float 替换为 double。这是因为泛型不能与原始数据类型一起使用吗？效率？

我正在编写一个 Curve 类，我想知道我是否应该以类似的方式提供 Curved 和 Curvef 。这是最好的选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T17:47:01.593

是的，不幸的是，Java 泛型不适用于原始类型。

不过，您可以进行代码生成，从一个模板生成多个 java 文件。

Java 8 将引入许多专门的函数式接口的原始版本，例如`IntFunction`. 它会非常难看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:05:09.240

我认为这里主要关注的是性能。泛型类型参数必须是 的子类型`Object`，然后泛型实现应该使用`Double`和`Float`包装器（因为泛型机制无法使用原始类型）。

在这种情况下，每个实例`Curve`都会实例化多个对象，每个对象对应一个 double/float 值。实际值将由方法调用读取，例如`doubleValue()`和`floatValue()`。此外，由于原始包装器是不可变的，因此涉及包装器的任何操作的结果都必须存储在新实例中。这似乎不可接受，因为`Curve`可能会用于繁重的计算。

# android - 如何在 Google Maps for Android API v2 上显示我的位置

> ID：15142089
> 
> 赞同：62
> 
> 时间：2013-02-28T17:41:17.990
> 
> 标签：android, geolocation, google-maps-android-api-2

我一直在寻找答案，在任何论坛问题中都没有人能够提供帮助。我已经搜索了教程。[API指南](https://developers.google.com/maps/documentation/android/interactivity)说：

> 仅当启用 My Location 图层时，My Location 按钮才会出现在屏幕的右上角。

所以我一直在寻找这个 My Location 图层，但一直找不到任何东西。如何在 Google 地图上显示我的位置？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2013-02-28T17:41:17.990

API 指南完全错了（真的是谷歌吗？）。使用 Maps API v2，您无需启用图层来显示自己，只需调用您使用地图创建的 GoogleMaps 实例即可。

[谷歌文档](http://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.html#setMyLocationEnabled(boolean))

Google 提供的实际文档可以为您提供答案。你只需要

### 如果你使用 Kotlin

```
// map is a GoogleMap object
map.isMyLocationEnabled = true 
```

### 如果您使用的是 Java

```
// map is a GoogleMap object
map.setMyLocationEnabled(true); 
```

并观看魔术发生。

只需确保您拥有位置权限并在 API 级别 23 (M) 或更高版本[的运行时请求它](https://developer.android.com/training/permissions/requesting)

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-03-01T05:32:56.487

Java代码：

```
public class MapActivity extends FragmentActivity implements LocationListener  {

    GoogleMap googleMap;
    LatLng myPosition;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_map);

        // Getting reference to the SupportMapFragment of activity_main.xml
        SupportMapFragment fm = (SupportMapFragment)
        getSupportFragmentManager().findFragmentById(R.id.map);

        // Getting GoogleMap object from the fragment
        googleMap = fm.getMap();

        // Enabling MyLocation Layer of Google Map
        googleMap.setMyLocationEnabled(true);

        // Getting LocationManager object from System Service LOCATION_SERVICE
        LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

        // Creating a criteria object to retrieve provider
        Criteria criteria = new Criteria();

        // Getting the name of the best provider
        String provider = locationManager.getBestProvider(criteria, true);

        // Getting Current Location
        Location location = locationManager.getLastKnownLocation(provider);

        if (location != null) {
            // Getting latitude of the current location
            double latitude = location.getLatitude();

            // Getting longitude of the current location
            double longitude = location.getLongitude();

            // Creating a LatLng object for the current location
            LatLng latLng = new LatLng(latitude, longitude);

            myPosition = new LatLng(latitude, longitude);

            googleMap.addMarker(new MarkerOptions().position(myPosition).title("Start"));
        }
    }
} 
```

活动地图.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:map="http://schemas.android.com/apk/res-auto"
  android:id="@+id/map"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  class="com.google.android.gms.maps.SupportMapFragment"/> 
```

您将在蓝色圆圈中获得当前位置。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-02-10T09:17:52.450

从 android 6.0 你需要检查用户权限，如果你想使用`GoogleMap.setMyLocationEnabled(true)`你会得到`Call requires permission which may be rejected by user`错误

```
if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION)
            == PackageManager.PERMISSION_GRANTED) {
   mMap.setMyLocationEnabled(true);
} else {
// Show rationale and request permission.
} 
```

如果您想了解更多信息，请查看[谷歌地图文档](https://developers.google.com/maps/documentation/android-api/location)

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-02-28T18:17:22.660

要显示“我的位置”按钮，您必须致电

```
map.getUiSettings().setMyLocationButtonEnabled(true); 
```

在您的 GoogleMap 对象上。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-11-26T16:47:33.787

调用`GoogleMap.setMyLocationEnabled(true)`您的`Activity`，并在以下代码中添加这 2 行代码`Manifest`：

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-03T17:02:05.760

> 在启用我的位置图层之前，您必须向用户请求位置权限。此示例不包括位置许可请求。

为了简化，就代码行而言，可以使用库[EasyPermissions](https://github.com/googlesamples/easypermissions)来请求位置许可。

然后按照[The My Location Layer](https://developers.google.com/maps/documentation/android-sdk/location#the_my_location_layer)的官方文档示例，我的代码适用于所有包含 Google 服务**的 Android 版本。**

1.  创建一个包含地图并实现接口`OnMyLocationClickListener`y的活动`OnMyLocationButtonClickListener`。
2.  在 app/build.gradle 中定义`implementation 'pub.devrel:easypermissions:2.0.1'`
3.  将结果转发到方法内的 EasyPermissions`onRequestPermissionsResult()`

    `EasyPermissions.onRequestPermissionsResult(requestCode, permissions, grantResults, this);`

4.  请求权限并根据用户的响应进行操作`requestLocationPermission()`

5.  调用`requestLocationPermission()`并将侦听器设置为`onMapReady()`.

## MapsActivity.java

```
public class MapsActivity extends FragmentActivity implements 
    OnMapReadyCallback,
    GoogleMap.OnMyLocationClickListener,
    GoogleMap.OnMyLocationButtonClickListener {

    private final int REQUEST_LOCATION_PERMISSION = 1;

    private GoogleMap mMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_maps);
        // Obtain the SupportMapFragment and get notified when the map is ready to be used.
        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()
            .findFragmentById(R.id.map);
        mapFragment.getMapAsync(this);
    }

    @Override
    public void onMapReady(GoogleMap googleMap) {
        mMap = googleMap;

        requestLocationPermission();
        mMap.setOnMyLocationButtonClickListener(this);
        mMap.setOnMyLocationClickListener(this);
    }

    @Override
    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {
        super.onRequestPermissionsResult(requestCode, permissions, grantResults);
        // Forward results to EasyPermissions
        EasyPermissions.onRequestPermissionsResult(requestCode, permissions, grantResults, this);
    }

    @SuppressLint("MissingPermission")
    @AfterPermissionGranted(REQUEST_LOCATION_PERMISSION)
    public void requestLocationPermission() {
        String[] perms = {Manifest.permission.ACCESS_FINE_LOCATION};
        if(EasyPermissions.hasPermissions(this, perms)) {
            mMap.setMyLocationEnabled(true);
            Toast.makeText(this, "Permission already granted", Toast.LENGTH_SHORT).show();
        }
        else {
            EasyPermissions.requestPermissions(this, "Please grant the location permission", REQUEST_LOCATION_PERMISSION, perms);
        }
    }

    @Override
    public boolean onMyLocationButtonClick() {
        Toast.makeText(this, "MyLocation button clicked", Toast.LENGTH_SHORT).show();
        return false;
    }

    @Override
    public void onMyLocationClick(@NonNull Location location) {
        Toast.makeText(this, "Current location:\n" + location, Toast.LENGTH_LONG).show();
    }
} 
```

[来源](https://stackoverflow.com/a/51350622/5279996)

# grails - Grails集成测试setUp和junit注解

> ID：15142094
> 
> 赞同：2
> 
> 时间：2013-02-28T17:41:25.967
> 
> 标签：grails, integration-testing

我在复杂的 group by/having 子句的代码中有一些 executeQuery，所以我需要一个集成测试用例来测试它。使用了 Grails 2.1.1。

但是，我发现了几个问题： 1\. 测试前没有自动调用setUp方法。2.所以我在setUp方法中添加了@Before注解，现在就可以调用了。但是现在不能使用 executeQuery 语句。

```
java.lang.UnsupportedOperationException: String-based queries like [executeQuery] are currently not supported in this implementation of GORM. Use criteria instead. 
```

看来我不能在集成测试中使用任何注释。否则就变成了单元测试用例？如果我不使用任何注释，则测试通过。

这是代码示例。

```
class JustTests extends GroovyTestCase {

    void setUp() {
        log.warn "setup"
    }

    void tearDown() {
        log.warn "cleanup"
    }

    void "test something"() {
        // Here is the code to invoke a method with executeQuery
    }
} 
```

谢谢。

# c# - 表单加载工具提示

> ID：15142097
> 
> 赞同：1
> 
> 时间：2013-02-28T17:41:32.860
> 
> 标签：c#, winforms, tooltip

我有一个登录表单。该表单有 2 个文本框和 3 个按钮。一个按钮显示“学生”。

我想要做的是在表单打开时在这个按钮上显示一个工具提示。我不想必须转到按钮并将鼠标悬停在其上才能显示。我希望表单加载，显示工具提示，然后工具提示应在 5 秒后消失。这是我到目前为止所尝试的：

```
private void Form1_Load(object sender, EventArgs e)
        {
            toolTip.IsBalloon = true;
            toolTip.ToolTipIcon = ToolTipIcon.Info;
            toolTip.ShowAlways = true;
            toolTip.UseFading = true;
            toolTip.UseAnimation = true;
            toolTip.ToolTipTitle = "Student Mode";
            toolTip.Show("You don't have to log in if you are a student. Just click here to go to the questions.", btnStudent);
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T18:06:21.683

表单的 Load 事件经常被误用。在这里，事件在窗口变得可见*之前触发。*因此，您的工具提示也不可见。

将您的代码移动到 Shown 事件处理程序。顺便说一句，支持重写 OnShown()，让一个类监听它自己的事件是没有意义的。

```
 protected override void OnShown(EventArgs e) {
        base.OnShown(e);
        // Your code here
        //...
   } 
```

# tcl - 错误：[eof $FILE_NAME]

> ID：15142098
> 
> 赞同：0
> 
> 时间：2013-02-28T17:41:35.380
> 
> 标签：tcl

我正在尝试在 TCL 中编写脚本，

我收到一条错误消息：`![eof $logfile_fd]`

错误是：`invalid command name "!0"`

什么可能导致这种情况，我该如何解决？

```
if {[file exists $logfile] != 1} {
    puts "Error existence of $logfile"
    return -1
}

if {[catch {set logfile_fd [open "$logfile" r]} err]} {
    puts "Error opening \"$logfile\" $err"
    return -1
}   
seek $logfile_fd 0

![eof $logfile_fd] 
```

我尝试使用另一种解决方案：

```
while {[gets $logfile_fd line] >= 0} {
   ...do something with $line... 
} 
```

但我得到了另一个错误：

```
list element in quotes followed by ")\nindexRecordsRead:" instead of space 
```

同时

> )\nindexRecordsRead:

里面是一些文本`$logfile_fd`......我认为TCL试图执行它或其他东西......它在这一行之前对彼此的行都很好......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:35:07.833

我不确定您要做什么。eof 正在测试文件结束条件 - 像那样“裸”使用它不会做任何事情。Tcl 将 [eof $logfile_fd] 评估为 0，然后尝试执行不存在的命令 !0。

如果你有类似的东西，它确实有效：

```
if {![eof $logfile_fd]} {
  //do something
} 
```

或者，如果您想存储结果以备后用，您可以执行以下操作：

```
set isEndOfFile [expr {![eof $logfile_fd]}] 
```

但是，像你一样执行，我不知道在不使用返回值的情况下你可能想要获得的任何副作用（如果文件描述符无效则抛出错误除外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:53:53.253

只需要把这个，在使用之前`$line`

```
set bugfree_line [regexp -all -inline {\S+} $line] 
```

# pcap - pcap2har 用于由 tshark 生成的 pcap（-w 选项）

> ID：15142100
> 
> 赞同：1
> 
> 时间：2013-02-28T17:41:39.457
> 
> 标签：pcap, har

我的 pcap 文件是通过以下命令生成的：

```
cmd = """tshark -r "%s" -R "frame.time_relative >= %f" -w "%s" """ % (pcap_name, first_dns_query_time, normalized_pcap_name)
subprocess.Popen(cmd) 
```

并且将标准化的 pcap 输入到[pcap2har](https://github.com/andrewf/pcap2har)。我收到此错误：

```
Traceback (most recent call last):
  File "main.py", line 65, in <module>
    dispatcher = pcap.EasyParsePcap(filename=inputfile)
  File "/path/to/pcap2har/pcap2har/pcap.py", line 80, in EasyParsePcap
    ParsePcap(dispatcher, filename=filename, reader=reader)
  File "/path/to/pcap2har/pcap2har/pcap.py", line 27, in ParsePcap
    pcap = ModifiedReader(f)
  File "/path/to/pcap2har/pcap2har/pcaputil.py", line 105, in __init__
    raise ValueError, 'invalid tcpdump header'
ValueError: invalid tcpdump header 
```

引发错误的部分`pcaputil.py`是：

```
 elif self.__fh.magic != dpkt.pcap.TCPDUMP_MAGIC:
        raise ValueError, 'invalid tcpdump header' 
```

对于我的 pcap（以及任何由 tshark 命令生成的 pcap），`self.__fh.magic`is`168627466`和`dpkt.pcap.TCPDUMP_MAGIC`is `2712847316`。

我评论了引发异常的行，`pcaputil.py`但之后我得到了这个：

```
Traceback (most recent call last):
  File "main.py", line 65, in <module>
    dispatcher = pcap.EasyParsePcap(filename=inputfile)
  File "/path/to/pcap2har/pcap2har/pcap.py", line 80, in EasyParsePcap
    ParsePcap(dispatcher, filename=filename, reader=reader)
  File "/path/to/pcap2har/pcap2har/pcap.py", line 27, in ParsePcap
    pcap = ModifiedReader(f)
  File "/path/to/pcap2har/pcap2har/pcaputil.py", line 108, in __init__
    self.dloff = dpkt.pcap.dltoff[self.__fh.linktype]
KeyError: 4294967295L 
```

我已经[在github上提交了issue](https://github.com/andrewf/pcap2har/issues/21)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:49:49.730

从 Wireshark 1.8 开始，默认输出文件格式是 pcap-ng，而不是 pcap。如果 pcap2har 使用了 libpcap 的 Python 包装器之一，并且您在具有 libpcap 1.0 或更高版本的系统上运行（这也意味着“不在 Windows 上运行”，因为没有基于 libpcap 1.0 或更高版本的 WinPcap 版本），它将自动能够读取许多 pcap-ng 文件，因为 libpcap 可以读取它们，但它可能使用自己的代码来读取 libpcap 文件。

尝试使用“-F pcap”运行 tshark 以使其生成 pcap 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-07T20:18:15.417

您可以使用 editcap 更改“.pcapng”文件的格式：

```
editcap teste.pcapng teste.pcap -F pcap 
```

# android - 如何更改向下 ActionBar 的样式？

> ID：15142101
> 
> 赞同：1
> 
> 时间：2013-02-28T17:41:40.457
> 
> 标签：android, actionbarsherlock

我正在使用 ActionBarSherlock，我的应用程序将安装在多种智能手机上，对于小型智能手机，我将操作栏划分为：

```
android:uiOptions="splitActionBarWhenNarrow" 
```

拆分栏时出现我的问题，因为样式仅保留在顶部栏（绿色）上，而不是按钮栏（灰色）上：P

这是一个屏幕截图：

![在此处输入图像描述](../Images/16b9f05b122f920633c2656aa56e1d65.png)

还有我现在的风格：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

<!--
    Base application theme, dependent on API level. This theme is replaced
    by AppBaseTheme from res/values-vXX/styles.xml on newer devices.
-->
<style name="AppBaseTheme" parent="android:Theme.Light">
    <!--
        Theme customizations available in newer API levels can go in
        res/values-vXX/styles.xml, while customizations related to
        backward-compatibility can go here.
    -->
</style>

<!-- Application theme. -->
<style name="AppTheme" parent="Theme.Sherlock.Light">
    <!-- All customizations that are NOT specific to a particular API-level can go here. -->
    <item name="android:textViewStyle">@style/label</item>
    <item name="android:checkboxStyle">@style/checkbox</item>
    <item name="android:buttonStyle">@style/boton</item>
    <item name="android:starStyle">@style/star</item>
    <item name="actionBarStyle">@style/Widget.Styled.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.Styled.ActionBar</item>

    <!-- Agregamos algunos estilos para ver como cambiar los colores de la barra -->
    <item name="android:actionDropDownStyle">@style/Widget.Styled.ActionBar</item>
    <item name="actionDropDownStyle">@style/Widget.Styled.ActionBar</item>
    <item name="actionBarSplitStyle">@style/Widget.Styled.ActionBar</item>
    <item name="android:actionBarSplitStyle">@style/Widget.Styled.ActionBar</item>
</style>

<style name="label" parent="android:style/Widget.TextView">
    <item name="android:padding">4dp</item>
    <item name="android:textColor">#DF0101</item>
    <item name="android:textSize">20sp</item>
</style>

<style name="checkbox" parent="android:style/Widget.CompoundButton.CheckBox">
    <item name="android:textColor">#DF0101</item>
    <item name="android:textSize">20sp</item>
</style>

<style name="boton" parent="android:style/Widget.Button">
    <item name="android:background">@drawable/btn_form</item>
    <item name="android:textColor">#ffffff</item>
    <item name="android:textSize">20sp</item>
</style>

<style name="star" parent="android:style/Widget.CompoundButton.Star">
    <item name="android:textColor">#DF0101</item>
    <item name="android:textSize">20sp</item>
</style>

<style name="Widget.Styled.ActionBar"
       parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
    <item name="background">@drawable/background</item>
    <item name="android:background">@drawable/background</item>
    <item name="android:backgroundStacked">@drawable/background</item>
    <item name="android:backgroundSplit">@drawable/background</item>
    <item name="android:actionButtonStyle">@drawable/background</item>
</style>

</resources> 
```

这个组件的名称是什么，以便将其添加到样式表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:57:32.690

我的问题是我忘了把这个参数：

```
<item name="backgroundSplit">@drawable/background</item> 
```

只放了这个：

```
<item name="android:backgroundSplit">@drawable/bg_actionbar</item> 
```

对不起：P

# android - Android Drive API：如果我将代码合并到其他项目，则会获取 Sys.err UserRecoverableAuthIOException

> ID：15142108
> 
> 赞同：6
> 
> 时间：2013-02-28T17:42:04.460
> 
> 标签：android, android-manifest, google-drive-api

我按照[https://developers.google.com/drive/quickstart-android](https://developers.google.com/drive/quickstart-android)下的所有步骤收听 它的工作原理！但是如果我要将给定的代码/包合并到另一个项目，我会得到

```
 W/System.err(793): com.google.android.gms.auth.UserRecoverableAuthException: NeedPermission
 W/System.err(793): at com.google.android.gms.auth.GoogleAuthUtil.getToken(Unknown Source)
 W/System.err(793): at com.google.android.gms.auth.GoogleAuthUtil.getToken(Unknown Source)
 W/System.err(793): at com.drive.main.MainActivity$GetToken.doInBackground(MainActivity.java:139)
 W/System.err(793): at com.drive.main.MainActivity$GetToken.doInBackground(MainActivity.java:1)
 W/System.err(793): at java.util.concurrent.FutureTask.run(FutureTask.java:234)
 W/System.err(793): at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
 W/System.err(793): at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
 W/System.err(793): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
 W/System.err(793): at java.lang.Thread.run(Thread.java:856)
 I/System.out(793): An error occurred: com.google.api.client.googleapis.extensions.android.gms.auth.UserRecoverableAuthIOException 
```

我在清单中做错了什么还是应该在 Api 控制台中更改某些内容？

在stackoverflow下发现只有一个线程没有任何答案 [Google Drive Authentication Exception - Needs Permission？(v2)](https://stackoverflow.com/questions/14615182/google-drive-authentication-exception-needs-permission-v2)

任何想法都会有所帮助。谢谢你。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-28T18:30:40.070

您应该在 catch 块中捕获 and ，通过调用从异常中`UserRecoverableAuthException`恢复. 启动该意图以将用户带到您的应用程序的权限页面。`Intent``UserRecoverableAuthException#getIntent()``OAuth2`

示例代码 -

```
try {
    Drive service = Drive.Builder(AndroidHttp.newCompatibleTransport(), new GsonFactory(), credential)
        .build();
    // Do whatever you want with the Drive service
} catch (UserRecoverableAuthIOException e) {
    startActivityForResult(e.getIntent(), REQUEST_AUTHORIZATION);
} 
```

# actionscript-3 - 将 sha512 as3 与 vb.net 进行比较时出现错误、错误值

> ID：15142110
> 
> 赞同：0
> 
> 时间：2013-02-28T17:42:06.843
> 
> 标签：actionscript-3, cryptography

我一直在测试一个 sha512 类。我需要从 flash cs5 中的字符串生成散列，但我需要它来匹配由 asp.net(vb) 生成的散列。它似乎在字符串的某处添加了一个零，我不知道为什么。

这些是我正在使用的文件：[Porting SHA512 Javascript implementation to Actionscript](https://stackoverflow.com/questions/1267873/porting-sha512-javascript-implemention-to-actionscript)。

在此示例中，散列字符串是名称“Karla”

示例 (asp.net)// ** 括号显示差异在哪里 ** C4DB628AD520AFF7308ED19E91635E8E24A6C7CFD4DB2F71BBE2FA6CD63770B315A839143037BB9DB16784C0BDCEB622ECAA4077D4D8(17747486)

(as3)

C4DB628AD520AFF7308ED19E91635E8E24A6C7CFD4DB2F71BBE2FA6CD63770B315A839143037BB9DB16784C0BDCEB622ECAA4077D4D8(17087)D5023E86734748

下面在我提供的链接中添加了信息，但我认为它与我需要的内容无关，我认为我不使用 hmac，只是一个直字符串哈希，但是，当我在 vb.net 中执行此操作时，我得到了字节从字符串首先 i 有字节。

我有一种感觉，as3 代码在 sha512 类中自动转换了字符串？

希望有人也遇到过这个问题。

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:31:43.257

这些哈希中的任何一个都不正确。字符串“Karla”的正确 SHA512 哈希是：

```
C4DB628AD520AFF7308ED19E91635E8E24A6C7CFD4DB2F71BBE2FA6CD63770B315A839143037BB9DB16784C0BDCEB622ECAA4077D4D817087D5023E867347408 
```

但是，我敢打赌，AS3 哈希实际上是正确的——javascript 版本会生成正确的哈希，[请参见此处](http://jsbin.com/ulatax/1)——只是粘贴不正确。

在计算哈希的两个地方，它包含 byte `0x08`，但在 ASP.NET 版本中，字节的高 4 位正在丢失，并且它被附加到输出字符串中，只是`"8"`not `"08"`。

基本上，您的 ASP.NET 哈希生成器丢弃的数字小于`0x10`- 忽略前导零 - 并为您提供格式错误的哈希..

另一种判断 ASP.NET 哈希有问题的方法是它只有 126 个字符（504 个十六进制编码位）长。

# jquery - Jquery 使用图像更改链接

> ID：15142114
> 
> 赞同：-2
> 
> 时间：2013-02-28T17:42:14.573
> 
> 标签：jquery, url, replace

例如，我有以下代码：

```
<table class="catsTable" width="100%" cellspacing="1" cellpadding="0" border="0">
  <tbody><tr>
    <td style="width:25%" class="catsTd" id="cid5" valign="top">
        <a href="/load/prison_break_online/sezonul_1/5" >Sezonul 1</a> <span class="catNumData" style="unicode-bidi:embed;">[6]</span>
    </td>
    <td style="width:25%" class="catsTd" id="cid6" valign="top"><a href="/prison_break_online/sezonul_2/6" class="catName">Sezonul 2</a> <span class="catNumData" style="unicode-bidi:embed;">[0]</span></td>
    <td style="width:25%" class="catsTd" id="cid7" valign="top"><a href="/prison_break_online/sezonul_3/7" class="catName">Sezonul 3</a> <span class="catNumData" style="unicode-bidi:embed;">[0]</span></td>
    <td style="width:25%" class="catsTd" id="cid8" valign="top"><a href="/prison_break_online/sezonul_4/8" class="catName">Sezonul 4</a> <span class="catNumData" style="unicode-bidi:embed;">[0]</span></td>
  </tr></tbody>
</table> 
```

我想改变这个：

```
 <a href="/load/prison_break_online/sezonul_1/5" >Sezonul 1</a> <span class="catNumData" style="unicode-bidi:embed;">[6]</span> 
```

变成类似的东西：

```
<img src="/images/pris5.png"> <br> 
     <a href="/load/prison_break_online/sezonul_1/5" >Sezonul 1</a> <span class="catNumData" style="unicode-bidi:embed;">[6]</span> 
```

`pris5.png`== 来自系列 jail_break_online (pris) 的前 4 个字母和系列 sezonul_1/5(5) 的 ID .. 我通过下一个公式得到 ID => .. 如果来自 url <10 的最后 2 个字符 => 从 url 获取最后一个字符从 url 获取最后 2 个字符）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:17:51.850

有几种方法可以做到这一点，但[这里有一种](http://jsfiddle.net/MhQw3/)

一个简单的 jQuery 函数`TD`通过类名获取每个，然后解析`href`属性。

```
$(function(){
   $(".catsTd").each(function( index ) {
       var tmp1 = $(this).children("a").attr('href').split('/');
       $(this).prepend("<img src='/images/" + tmp1[1].substring(0, 4) + tmp1[3] + ".png'> <br>")      
    }); 
}); 
```

您的原始 HTML 已重新格式化：

```
<table class="catsTable" width="100%" cellspacing="1" cellpadding="0" border="0">
  <tbody><tr>
    <td style="width:25%" class="catsTd" id="cid5" valign="top"><a href="/prison_break_online/sezonul_1/5" class="catName">Sezonul 1</a> <span class="catNumData" style="unicode-bidi:embed;">[0]</span></td>
    <td style="width:25%" class="catsTd" id="cid6" valign="top"><a href="/prison_break_online/sezonul_2/6" class="catName">Sezonul 2</a> <span class="catNumData" style="unicode-bidi:embed;">[0]</span></td>
    <td style="width:25%" class="catsTd" id="cid7" valign="top"><a href="/prison_break_online/sezonul_3/7" class="catName">Sezonul 3</a> <span class="catNumData" style="unicode-bidi:embed;">[0]</span></td>
    <td style="width:25%" class="catsTd" id="cid8" valign="top"><a href="/prison_break_online/sezonul_4/8" class="catName">Sezonul 4</a> <span class="catNumData" style="unicode-bidi:embed;">[0]</span></td>
  </tr></tbody>
</table> 
```

# plone - 如何注销以前注册的实用程序？

> ID：15142121
> 
> 赞同：1
> 
> 时间：2013-02-28T17:42:39.093
> 
> 标签：plone, zope

我想从我的产品中删除以前注册的实用程序，特别是由collective.indexing 注册的门户目录实用程序。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:30:51.210

看看[z3c.unconfigure](http://pypi.python.org/pypi/z3c.unconfigure)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:02:39.870

如果您确实有需要删除的本地实用程序，请查看：

[http://plone.org/documentation/kb/manually-removing-local-persistent-utilities/](http://plone.org/documentation/kb/manually-removing-local-persistent-utilities/)

# wpf - 在自定义控件库的 Generic.xaml 文件中使用应用级资源

> ID：15142122
> 
> 赞同：2
> 
> 时间：2013-02-28T17:42:42.757
> 
> 标签：wpf, wpf-controls

我在自定义控件上有一个按钮，我试图在其上显示一个图像，该图像在我的 App.xaml 文件中定义为资源，如下所示：

```
<Application.Resources>
    <BitmapImage x:Key="PlusSymbol" UriSource="Resources/PlusSymbol.png" />
</Application.Resources> 
```

由于某种原因，我不能在 Themes\Generic.xaml 文件中定义的自定义控件模板中将其用作静态资源，它在运行时使我的应用程序崩溃，说它找不到请求的资源。这是我用来绑定到资源的 xaml 代码：

```
<Button Grid.Row="0" Grid.Column="1" Margin="3">
     <Image Source="{StaticResource PlusSymbol}"/>
</Button> 
```

如果我以完全相同的方式但在 Generic.xaml 文件中定义资源，它确实在运行时工作，但是它给了我一个预编译器警告它找不到该文件，因为它现在正在主题/资源/中寻找它而不仅仅是在 /Resources/ 中。所以我在设计时收到警告，但它在运行时工作正常。

那么为什么它在 App.xaml 中定义时找不到我的资源？我在常规 WPF 项目中以完全相同的方式执行此操作，并且它完美地工作，但在这个自定义控件库中，它让我很头疼。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:46:39.583

如果您切换`StaticResource`到，这应该可以工作，`DynamicResource`以便在运行时动态而不是静态地评估资源。如果切换到`DynamicResource`.

```
<Button Grid.Row="0" Grid.Column="1" Margin="3">
   <Image Source="{DynamicResource PlusSymbol}"/>
</Button> 
```

我相信这是因为如何处理基于主题的样式和模板，而不是标准资源。 [这个答案](https://stackoverflow.com/questions/4974122/wpf-whats-the-difference-between-app-xaml-and-generic-xaml)和[这个答案](https://stackoverflow.com/questions/1228875/what-is-so-special-about-generic-xaml)专门针对 Generic.xaml 以及它与其他 .xaml 的不同之处`ResourceDictionaries`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T19:09:07.013

所以我最终让它工作的方式是在 Generic.xaml 文件中定义 BitmapImage 并使用 Pack URI 来获取文件（[这是关于 Pack URIs 的 MSDN 文章](http://msdn.microsoft.com/en-us/library/aa970069%28v=vs.85%29.aspx)，坦率地说，这让我感到困惑）。这样，它使用文件的相对路径，并指定它来自的程序集（文件位于 MyCustomControlLibrary 项目中的 \Resources\PlusSymbol.png 并具有资源的构建操作）：

```
<BitmapImage x:Key="PlusSymbol" UriSource="pack://application:,,,/MyCustomControlLibrary;component/Resources/PlusSymbol.png" /> 
```

然后在 Generic.xaml 的控制模板中，我使用如下资源：

```
<Button Grid.Row="0" Grid.Column="1" Margin="3" Height="25" Width="25" 
      <Image Source="{StaticResource PlusSymbol}"/>
</Button> 
```

请注意，我误以为我可以像这样使用较短版本的 Pack URI：

```
<BitmapImage x:Key="PlusSymbol" UriSource="pack://application:,,,/Resources/PlusSymbol.png" /> 
```

但是，这仍然导致程序在运行时崩溃。我认为这是一个自定义控件库，并且图像的最终消费者是我的 UI 项目这一事实，使得指定实际包含图像的程序集的更长版本是必要的。

希望对遇到类似问题的其他人有所帮助。

**注意**我不认为这在技术上回答了我使用 Generic.xaml 中的应用级资源（又名在自定义控件库的 App.xaml 文件中定义）指定的原始问题。在那里定义 PlusSymbol 资源仍然会使程序崩溃。但是，我实际上并不关心在 App.xaml 中执行此操作，我只是想让它在设计时和运行时都能正常工作。这个解决方案对我有用，相当简单，从我的研究中可以看出是最佳实践。

# javascript - 在 Replace() 方法中使用变量 - Javascript

> ID：15142123
> 
> 赞同：0
> 
> 时间：2013-02-28T17:42:43.163
> 
> 标签：javascript, variables, methods, replace

我正在尝试替换标签中 alt="" 属性的内容。

替换文本来自分配给 var alttext 的 textarea 输入

var oldtext 包含带有用于替换的占位符的标签，例如：

```
<img alt="placeholder" scr="pic.jpg" /> 
```

占位符需要替换为 var alttext 的内容。

到目前为止，我已经尝试过：

```
function replacer() {
    var alttext = document.myform.alttext.value; 
    var oldtext = document.myform.oldtext.value;
    var replacedtext = oldtext.replace("placeholder", 'alttext' )
    document.myform.outputtext.value = replacedtext;        
} 
```

但它不起作用。

如何使用 alttext 变量内容来替换占位符？

非常感谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T17:45:47.957

```
function replacer() {
   var alttext = document.myform.alttext.value; 
   var oldtext = document.myform.oldtext.value;
   var replacedtext = oldtext.replace("placeholder", alttext);
   document.myform.outputtext.value = replacedtext;        
} 
```

您试图`replace`在变量（alttext）周围加上引号，使其成为字符串文字

# c# - 如何列出来自运行我的程序的主机的所有 http 当前连接？

> ID：15142126
> 
> 赞同：0
> 
> 时间：2013-02-28T17:42:47.443
> 
> 标签：c#, .net, sockets

我想列出来自主机的所有 http 活动连接，我正在使用下面的代码，它列出了所有 tcp 连接，但我想从这个 tcp 列表中专门找到 http 连接。

```
Console.WriteLine("Active TCP Connections");
IPGlobalProperties properties = IPGlobalProperties.GetIPGlobalProperties();
TcpConnectionInformation[] connections = properties.GetActiveTcpConnections();
foreach (TcpConnectionInformation c in connections)
{
    Console.WriteLine("{0} <==> {1}",
                      c.LocalEndPoint.ToString(),
                      c.RemoteEndPoint.ToString());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:35:49.260

端口`80`是标准的 HTTP 端口，端口`443`是标准的 HTTPS 端口。您可能想要同时过滤两者。

将循环更改`foreach`为以下内容：

```
foreach (TcpConnectionInformation c in connections)
{
    if ((c.RemoteEndPoint.Port == 80) || (c.RemoteEndPoint.Port == 443))
    {
        Console.WriteLine("{0} <==> {1}:{2}",
                          c.LocalEndPoint.ToString(),
                          c.RemoteEndPoint.ToString(),
                          c.RemoteEndPoint.Port);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:31:57.203

仅仅因为 TCP 端口是打开的，并不意味着只有 HTTP 流量会通过它。除非您有一些其他标准可用于将 TCP 连接识别为“HTTP”连接，否则过滤端口 80 可能与您将获得的一样接近。

# asp.net - 如何在 asp.net 中使用 SendAsync() 重新发送电子邮件

> ID：15142128
> 
> 赞同：0
> 
> 时间：2013-02-28T17:42:50.650
> 
> 标签：asp.net, system.net.mail

我正在使用 SendAsync 发送电子邮件。我使用异步的原因只是为了释放 UI 而不是发送多封电子邮件。

我创建了以下回调事件：

```
 static void SendCompletedCallback(object sender, AsyncCompletedEventArgs e)
    {
        var client = sender as SmtpClient;
        var message = e.UserState as MailMessage;

        if (e.Error.IsNotNull())
        {
            if (e.Error is SmtpFailedRecipientException)
            {
                var status = ((SmtpFailedRecipientException)(e.Error)).StatusCode;

                if (status == SmtpStatusCode.MailboxBusy ||
                    status == SmtpStatusCode.MailboxUnavailable ||
                    status == SmtpStatusCode.TransactionFailed)
                {
                    // a new message!
                }
                else
                {
                    // TODO: Log other uncaught recipient failures
                }
            }
            else
            {
                // TODO: Log all other failure reasons
            }
        }

        client.Dispose();
        message.Dispose();
    } 
```

如您所见，我正在尝试捕获一些收件人失败。如果我发现这样的异常，我想尝试重新发送电子邮件。

我正在尝试弄清楚如何安全地重新发送电子邮件。我正在考虑创建一个新的 SmtpClient 而不是重用现有的，但老实说，我对 .net 还很陌生，我不太确定其中的含义。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T16:59:18.933

在不延迟响应客户端（UI）的情况下异步发送电子邮件需要 .Net 中的 Backgroundworker。我在我的[网站](http://www.metrodroid.com)上实现了这一点， 并将与您分享课程源代码。

```
using System;
using System.Collections.Generic;
using System.Web;
using System.ComponentModel;    //Background worker namespace
using System.Net.Mail;

/// <summary>
/// Summary description for ClassName
/// </summary>
/// 

public class postmail
{
    BackgroundWorker bw = new BackgroundWorker();
    string email1, subject1, message1, failedemails;
    public postmail(string email, string subject, string message)
    {
            bw.WorkerReportsProgress = false;
            bw.WorkerSupportsCancellation = false;
            bw.DoWork += new DoWorkEventHandler(bw_DoWork);
            bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_RunWorkerCompleted);
            email1 = email;
            subject1 = subject;
            message1 = message;
    }

    public postmail()
    {
        // TODO: Complete member initialization
    }

    public void startsending() {
       bw.RunWorkerAsync();
       HttpContext.Current.Response.Buffer = true;
       HttpContext.Current.Response.Flush();  // send all buffered output to client
       HttpContext.Current.Response.End();
    }

    private void bw_DoWork(object sender, DoWorkEventArgs e)
    {
       var finalemail = email1.Split(new[] { ',' }, StringSplitOptions.None);
//loop through the email addresses and send individually
       for (int c = 0; c < finalemail.Length; c++) { 
           try
           {

               MailMessage mailMessage = new MailMessage();

               // Sender Address
               mailMessage.From = new MailAddress("emailaddress");

               // Recepient Address
               mailMessage.To.Add(finalemail[c].ToString());

               // Subject 
               mailMessage.Subject = subject1.ToString();

               // Body
               mailMessage.Body = message1.ToString();

               // format of mail message
               mailMessage.IsBodyHtml = true;

               // new instance of Smtpclient
               SmtpClient mailSmtpClient = new SmtpClient("mail server");
               //mailSmtpClient.EnableSsl = true;
               mailSmtpClient.Credentials = new System.Net.NetworkCredential("emailaddress", "password");
               // mail sent
               Object userState = mailMessage;
               mailSmtpClient.SendAsync(mailMessage, userState);

           }
           catch (Exception exc)
           {
            //fix for you
            var ext = exc.ToString(); //catch exception for failed message
            failedemails = failedemails + finalemail[c] + ","; //create a string of failed emails

           }       
       }

    }
    private void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    { 
              //called when the background process is done working
             if(failedemails != null){
                postmail(failedemails, subject1, message1); //resend the failed email
                startsending();
             }
    }
} 
```

您的概念可能与我的不完全相同，但关键方法是： 为 BackgroundWorker 创建一个事件处理程序。

```
BackgroundWorker bw = new BackgroundWorker();
bw.WorkerReportsProgress = false;
            bw.WorkerSupportsCancellation = false;
            bw.DoWork += new DoWorkEventHandler(bw_DoWork);
            bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_RunWorkerCompleted);

bw.RunWorkerAsync();  

    private void bw_DoWork(object sender, DoWorkEventArgs e)
    {
           try
           {
               //Send your mail

           }
           catch (Exception exc)
           {
               //Catch exception here and call the resend method
           }       
       }

private void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{ 
    //do something after completion
} 
```

我为您所做的修复是构建所有失败地址的字符串，然后在后台工作人员完成工作后重新发送它们。干杯！！

# php - 在线服务经常以半随机名称存储图像是否有特殊原因

> ID：15142133
> 
> 赞同：0
> 
> 时间：2013-02-28T17:43:06.467
> 
> 标签：php, image, image-processing

在实际操作中，我们看到用户上传的图片名称为 84b222882da311e284b222000a1fbcf6_7.jpg

将图像存储为 /username/101.jpg /username/102.jpg 是不是更容易和结构化（例如，您可以拥有一个用于图像的数据库表，然后您可以简单地使用索引作为文件名。）

这里的实际考虑是什么？我想每次都必须检查新生成的随机名称是否不在数据库中？是否担心混淆？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:49:49.543

通常这样做有两个原因。

1.  拥有唯一的文件名。
2.  使猜测图像文件名变得困难（阻止人们在 URL 中输入下一个图像并查看图像）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T17:56:23.093

> 将图像存储为 /username/101.jpg /username/102.jpg 是不是更容易和结构化

一点也不。这种方式需要目录列表来获得使用的最高数量，并且会出现删除问题 - 您是否重复使用 ID？101.jpg 和 102.jpg*至少*与 84b222882da311e284b222000a1fbcf6.jpg一样任意，这可能是文件内容的哈希值或数据库中文件的 ID。

# latex - Pandoc 中带列的幻灯片

> ID：15142134
> 
> 赞同：32
> 
> 时间：2013-02-28T17:43:07.017
> 
> 标签：latex, markdown, beamer, pandoc

我想在 Beamer 幻灯片中并排放置代码和图像。

在 LaTeX 中，我会使用列来执行此操作。我想在列结构中使用降价。

```
\begin{columns}
\column{.5\textwidth}

~~~~~~~~Python
>>> some python code
~~~~~~~

\column{.5\textwidth}

![](A_generated_image.pdf)

\end{columns} 
```

不幸的是，Pandoc 不处理 \begin{columns} 和 \end{columns} 语句中的降价。有没有解决的办法？

*   有没有办法在内联 LaTeX 中使用降价？
*   有纯粹的降价解决方案吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2018-09-02T18:48:22.493

pandoc 的当前版本（即 pandoc 2.0 及更高版本）支持[围栏 div](https://pandoc.org/MANUAL.html#fenced-divs)。以幻灯片格式为目标时，特殊命名的 div 将转换为列：

```
# This slide has columns

::: columns

:::: column
left
::::

:::: column
right
::::

::: 
```

Pandoc 将其翻译成以下 LaTeX 投影仪代码：

```
\begin{frame}{This slide has columns}
\protect\hypertarget{this-slide-has-columns}{}

\begin{columns}[T]
\begin{column}{0.48\textwidth}
left
\end{column}

\begin{column}{0.48\textwidth}
right
\end{column}
\end{columns}

\end{frame} 
```

这很简单，并且具有在针对其他表示格式（如reveal.js）时提供类似结果的额外优势。

Beamer 输出开箱即用的列不止两列。然而，Powerpoint 只支持两列。对于reveal.js，必须明确给出三列或更多列的宽度：

```
::: columns

:::: {.column width=30%}
left
::::

:::: {.column width=30%}
middle
::::

:::: {.column width=30%}
right
::::

::: 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-09-26T23:35:37.380

问题是`pandoc`如果找到一个`\begin{}`. 另一种方法是编辑投影仪模板并添加以下内容：

```
\newcommand{\columnsbegin}{\begin{columns}}
\newcommand{\columnsend}{\end{columns}} 
```

并这样写：

```
\columnsbegin
\column{.5\textwidth}

~~~~~~~~Python
>>> some python code
~~~~~~~

\column{.5\textwidth}

![](A_generated_image.pdf)

\columnsend 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-06-04T14:23:56.457

希望还是有价值的。我在 Python 中制作了一个[Pandoc 过滤器](https://github.com/jgm/pandocfilters)，以便轻松放置列，因此您可以这样编写演示文稿：

```
# Hello World

[columns]

[column=0.5]

~~~python
    if __name__ == "__main__":
        print "Hello World"
~~~

[column=0.5]

This is how a "Hello World" looks like in Python

[/columns] 
```

过滤器会将每个标记转换为 \begin{columns} 和 \column{.5\textwidth}，因此，上面的文档将打开

```
\begin{frame}[fragile]{Hello}

\begin{columns}

\column{0.5\textwidth}

\begin{Shaded}
\begin{Highlighting}[]
    \NormalTok{some python code}
\end{Highlighting}
\end{Shaded}

\column{0.5\textwidth}

Hello World

\end{columns}

\end{frame} 
```

代码过滤器在这里

```
import pandocfilters as pf

def latex(s):
    return pf.RawBlock('latex', s)

def mk_columns(k, v, f, m):
    if k == "Para":
        value = pf.stringify(v)
        if value.startswith('[') and value.endswith(']'):
            content = value[1:-1]
            if content == "columns":
                return latex(r'\begin{columns}')
            elif content == "/columns":
                return latex(r'\end{columns}')
            elif content.startswith("column="):
                return latex(r'\column{%s\textwidth}' % content[7:])

if __name__ == "__main__":
    pf.toJSONFilter(mk_columns) 
```

`columnfilter.py`如果您从不使用 pandoc 过滤器，只需将过滤器保存到与（或您想要的其他名称）相同的文档位置并运行

```
pandoc -t beamer --filter columnfilter.py yourDocument.mkd 
```

享受！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-03-17T12:57:20.127

**Beamer 具体答案。**尝试在常规文档中为 Pandoc 添加多个列时，我遇到了一个解决方案。它也可以在这里工作，尽管它确实将您限制在 Beamer 上；虽然那是你的用例。

在幻灯片中，插入一次：

```
---
header-includes:
- \newcommand{\hideFromPandoc}[1]{#1}
- \hideFromPandoc{
    \let\Begin\begin
    \let\End\end
  }
--- 
```

然后添加内容：

```
\Begin{columns}
\Begin{column}{0.3\textwidth}

Res ipsum loquiter, sed in inferno decit?

\End{column}

\Begin{column}{0.3\textwidth}

Res ipsum loquiter, sed in inferno decit?

\End{column}
\Begin{column}{0.3\textwidth}

Res ipsum loquiter, sed in inferno decit?

\End{column}
\End{columns} 
```

创建“hideFromPandoc”命令可以让您在整个过程中插入开始/结束语句，而不会剥夺您在块中的降价。

**围栏分区答案。**上面有一个答案是指围栏 div。我评论说答案只适用于两列。它随着更多而崩溃。以下是该答案如何与多个 div 一起使用：

```
::: {.columns}
:::: {.column width=0.3}
Test
::::
:::: {.column width=0.3}
Test
::::
:::: {.column width=0.3}
Test
::::
::: 
```

为了得到这个答案，我必须查看[专门添加列功能的提交](https://github.com/jgm/pandoc/commit/892a4edeb1c9b9810c8386e639d8e457bbae7e86)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-03T19:32:53.830

当您附上 Pandoc 命令时，您可以在 Pandoc 中使用 MultiMarkDown 注释（“<!-- Your LaTeX Code inside -->”），在该命令中，您使用两个 sed 命令将 Markdown 转换为 LaTeX。

在第一次 sed 运行中，您将 MultiMarkDown 注释更改为“\verb+AAAAAAALaTeX-StuffZZZZZZ+”。然后像往常一样使用 Pandoc 转换为 LaTeX，"\verb+AAAAAAALaTeX-StuffZZZZZZZ+" 中的所有内容都将被保留。然后在 TeX 文件上运行 sed 并删除展开 LaTeX 代码的“\verb+AAAAAAA”和“ZZZZZZ+”。

Pandoc 转换之前的第一个 sed 命令行可能如下所示：

```
 sed -E -e "s/<\\!--(.+)--\\>/\\\\verb\+AAAAAAA\1ZZZZZZZ\+/g " \
     source.md > source.i.md 
```

然后像往常一样在 source.i.md 上使用 Pandoc 来创建 source.tex。第二次 sed 像这样运行：

```
 sed -E -e "s/\\\\verb\+AAAAAAA(.+)ZZZZZZZ\+/\1/g" -i "" source.tex 
```

我自动化了 Makefile 中的所有内容，以便我可以在一步中进行更多更改，例如对表定义进行更改。乍一看，这种方法效果很好（使用 beamer 类在列定义上进行了测试）。

通过这个小 sed 脚本，您可以使用 Pandoc 中的所有好东西。您只需要 mmd 注释那些被转义或包含 Markdown 较大部分的 TeX 和 LaTeX 命令。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-24T15:00:59.257

您可以使用 FletcherPenney MultiMarkdown，它可以将降价处理为 LaTeX/Beamer。与 Pandoc 相比，MultiMarkdown 没有那么多功能。然而，特别是在使用 LaTeX 时，它的优势在于您可以将 LaTeX 代码直接嵌入到 HTML 注释中的 Markdown 中。

您的代码如下所示：

```
<!-- \begin{columns} -->
<!-- \column{.5\textwidth} -->

        >>> some python code

<!-- \column{.5\textwidth} -->

![](A_generated_image.pdf)

<!-- \end{columns} --> 
```

对我来说，这个解决方案很好用。使用好的编辑器（例如 Scrivener、Sublime Text），您可以编写没有所有注释的乳胶代码，并在编辑后查找/替换它们。此外，Multimarkdown 中的元数据支持更加灵活，因此更容易自定义演示文稿。

同时，我希望 Pandoc 团队提供解决这个问题的方法。我认为有些用户希望在他们的降价文档中嵌入小的 LaTex 代码颗粒，而不需要对其进行转换/转义。

# c# - 如何在c#中引用交错数组中对象数组的属性？

> ID：15142135
> 
> 赞同：0
> 
> 时间：2013-02-28T17:43:09.900
> 
> 标签：c#, arrays, object, properties, jagged-arrays

这个问题可能会有点令人困惑，因为我刚刚开始 c# 和一般的面向对象编码，但我会尽力解释清楚！对于上下文，我正在尝试为游戏项目制作一个随机地牢生成器。

我有一个锯齿状数组“Dungeon”，我已经这样声明了它：

```
public Level[][,] Dungeon; 
```

澄清一下，地牢是一维“关卡”数组。关卡是它自己的对象，它有一些我在其构造函数中定义的独特属性。

每个级别都是“mazePieces”的二维数组，它们也是对象。

我已经想出了如何引用整个 Dungeon 数组来执行诸如查看地牢中有多少级别之类的事情：

```
Dungeon[x].Length 
```

我还可以参考给定级别中的单个 mazePieces：

```
Dungeon[i][x,y].mobAmount 
```

但是，我不知道如何引用整个关卡的属性。如果我输入

```
Dungeon[i].numberOfRooms 
```

“numberOfRooms”不被识别为关卡的属性。但是，我发现如果我输入它会被识别

```
Dungeon[i][,].numberOfRooms 
```

我遇到的问题是第二组括号标有语法错误，表示需要一个值。

我可以在第二组括号中添加什么，以便我可以参考整个关卡，而不仅仅是关卡的特定部分？

希望这至少可以理解，请告诉我，我会尽力澄清！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T17:56:20.473

你可以在你的设计中使用更多的构图。也许是这样的：

```
class Dungeon {
    public Level[] Levels { get; private set; }

class Level {
    public int NumberOfRooms
        { get { return Maze.GetUpperBound(0) * Maze.GetUpperBound(1); }
    public MazePiece[,] Maze { get; private set; }
}

class MazePiece {
    private List<Mob> _mobs = new List<Mob>();
    public IEnumerable<Mob> Mobs { get { return _mobs; } }
    public int MobCount { get { return _mobs.Count; } }
}

class Mob {
    public string Name { get; private set; }
} 
```

那么你就可以更自然地引用事物了：

```
var mobsAtTenTenOfLevelThree = dungeon.Levels[2].Maze[9, 9].Mobs; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:55:58.190

我会说迷宫的碎片应该是`Level`课堂的一部分，

所以你会有

```
public Levels[] Dungeon. 
```

你的`Level`班级也有索引器：

```
public SomeReturnType this[int x, int y]
{
   get
   {
      // return maze piece
   }
} 
```

在这种情况下，您将能够通过 访问任何级别的属性`Dungeon[i].numberOfRooms`。你仍然可以访问你想要的迷宫碎片`Dungeon[i][x,y].mobAmount`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T17:57:38.717

假设`numberOfRooms`是 的一个属性`MazePiece`，如果您想找到地牢的*总数*，您可以使用`SelectMany`：

```
int totalRooms = dungeon.SelectMany(p=>p.numberOfRooms).Sum(); 
```

# scip - SCIP 无法读取我的输入

> ID：15142136
> 
> 赞同：2
> 
> 时间：2013-02-28T17:43:12.493
> 
> 标签：scip

我正在尝试使用 SCIP 求解器（[http://scip.zib.de/](http://scip.zib.de/)）。我的输入 ( `1.lp`) 是`lpsolve`格式。它看起来像这样：

```
max:  +2 x_0_0;
 +x_0_0 <= 1;
 +x_0_0 <= 1;
 -3x_0_0 <= 0;
0 <= x_0_0 <= 1;
int x_0_0; 
```

我像这样运行 SCIP：

```
"c:\Program Files\SCIP\scip.exe" -f 1.lp -l 1.lp.out 
```

但是，SCIP 会生成以下输出：

```
SCIP version 3.0.0 [precision: 8 byte] [memory: block] [mode: optimized] [LP solver: SoPlex 1.7.0] [GitHash: c95600b]
Copyright (c) 2002-2012 Konrad-Zuse-Zentrum fuer Informationstechnik Berlin (ZIB)

External codes: 
  SoPlex 1.7.0         Linear Programming Solver developed at Zuse Institute Berlin (soplex.zib.de) [GitHash: 657dfe5]
  cppad-20120101.3     Algorithmic Differentiation of C++ algorithms developed by B. Bell (www.coin-or.org/CppAD)
  Ipopt 3.10.2         Interior Point Optimizer developed by A. Waechter et.al. (www.coin-or.org/Ipopt)

user parameter file <scip.set> not found - using default parameters

read problem <[...]1.lp>
============

  input: 
         ^
error reading file <[...]1.lp> 
```

我想这意味着它在空白处窒息......我做错了什么？

**编辑：**

有关详细信息，请参阅我的答案。以 CPLEX 格式提供输入后，一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:36:13.357

答案是 SCIP 显然无法读取 lpsolve 输入文件。[他们在此可读文件格式概述](http://scip.zib.de/doc/html/group__FILEREADERS.php)中所指的 LP 格式实际上是 CPLEX LP 格式。

# delphi - 有谁知道，Delphi 7 在哪里缓存 DCU 文件？

> ID：15142138
> 
> 赞同：3
> 
> 时间：2013-02-28T17:43:19.777
> 
> 标签：delphi, caching, delphi-7, dcu

我安装了旧版本的 Eldos SecureBlackBox。现在我卸载了它并安装了最新版本。不幸的是，Delphi 缓存了旧的 DCU 文件，所以我不能使用新 dcu 文件中的新属性。

有谁知道，Delphi 7 在哪里缓存 DCU 文件？我必须清楚的是，新的 DCU 文件已加载？

我曾尝试使用 CCLeaner 进行清理，但没有成功。谢谢

沃尔特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:30:08.207

Delphi 不会在编译时“缓存 DCU 文件”，除非在内存中。

如果您在新组件中有无法访问的新属性，则说明您没有正确卸载旧组件，并且 IDE 正在从旧的设计时/运行时包中获取其信息。

您需要在安装新软件包之前正确删除旧软件包和 dcus，然后将新软件包正确安装到 IDE 中。默认情况下，DCU 在安装`SecureBlackBox\Sources`后安装在文件夹中（它们是在编译和安装软件包时创建的）。

在安装新的包文件之前，您可能还需要从计算机中删除已编译的包文件 (.dpc)。在您的计算机上搜索`*.dcp`文件；`My Documents`您应该在您的文件夹中找到其中几个与 SecureBlackBox 相关的内容。它们也应该在安装新版本之前被删除。

# php - 反向布尔求值

> ID：15142139
> 
> 赞同：2
> 
> 时间：2013-02-28T17:43:28.647
> 
> 标签：php, coding-style, boolean, evaluation, operator-precedence

为什么在下面的 PHP 代码中反向进行布尔求值，而不是在末尾放置“false”？

```
while (false !== ($obj = readdir($dh))) {
    // do something
} 
```

[（来自http://php.net/manual/en/function.unlink.php](http://php.net/manual/en/function.unlink.php)中的用户示例之一）

我在其他地方看到过这种写评估的方式，但从来没有真正理解为什么会这样。我从来没有学过计算机科学，所以这可能是一个真正的 101 问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T17:45:46.163

个人偏好，因此您不会错误地分配值而不是进行比较。

例如

```
// doesn't generate an error, hard to track
if($value = false)
... 
```

但

```
// fatal error, you know that you did = instead of ==
if(false = $value) 
```

# c# - 如何编写 Console.Writeline(" \|\/ \| /"); 并忽略“无法识别的转义序列”错误？

> ID：15142141
> 
> 赞同：3
> 
> 时间：2013-02-28T17:43:34.040
> 
> 标签：c#, console-application, console.writeline

例如，我不希望这行代码：`Console.Writeline(" \|\/ \| /");`干扰程序，因为目前我收到错误 Unrecognized escape sequence 但我不想使用转义序列，我只希望这些字符本身出现在控制台上。有没有办法做到这一点？感谢您花时间阅读。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T17:44:36.080

在我看来，您想要一个*逐字字符串文字*，它不会将反斜杠视为转义字符，并且还允许使用多行文字：

```
Console.Writeline(@" \|\/ \| /"); 
```

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/vstudio/362314fe.aspx)或[我关于字符串的文章的“文字”部分](http://csharpindepth.com/Articles/General/Strings.aspx#literals)。请注意，对于双引号，您*仍然*需要做一些工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T17:44:23.913

```
Console.Writeline(@" \|/ \| /"); 
```

[MSDN 字符串（C# 参考）](http://msdn.microsoft.com/en-us/library/vstudio/362314fe.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T17:44:30.433

利用

```
Console.Writeline(@" \|/ \| /"); 
```

该`@`字符告诉编译器不要处理转义序列。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-28T17:45:40.087

写成`Console.WriteLine(@" \|/ \| /")`. 该`@`符号告诉 Visual Studio 完全按照所写的方式使用字符串。

或者，将每个替换`\`为`\\`，这是显示 的转义序列`\`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-28T17:44:49.023

您可以使用`@`调用[`verbatim string literal`](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)

```
Console.Writeline(@" \|/ \| /"); 
```

> 逐字字符串文字由一个 @ 字符后跟一个双引号字符、零个或多个字符以及一个结束双引号字符组成。一个简单的例子是@"hello"。在逐字字符串文字中，分隔符之间的字符被逐字解释，唯一的例外是引号转义序列。特别是，简单的转义序列以及十六进制和 Unicode 转义序列不会在逐字字符串文字中进行处理。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-28T17:44:50.827

> 我只希望这些角色本身出现在控制台上。

然后你要么必须使用转义序列，要么使用[*逐字字符串文字*](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)：

```
Console.Writeline(@" \|/ \| /"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-28T17:44:44.837

在字符串前面加上一个“@”，比如

```
@" \|/ \| /" 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-02-28T17:48:38.590

或者，您实际上可以正确使用（并理解）转义序列。要`\`在您的字符串中使用，您需要对它们进行转义。请参阅[http://msdn.microsoft.com/en-us/library/h21280bw.aspx](http://msdn.microsoft.com/en-us/library/h21280bw.aspx)以供参考

所以，你的实际命令是

```
// Escaped characters make this show up as "\|/ \| /"
Console.Writeline(" \\|/ \\| /"); 
```

但输出将是`\|/ \| /`

# html - 带有圆角和渐变背景的 HTML 表格

> ID：15142145
> 
> 赞同：1
> 
> 时间：2013-02-28T17:43:56.783
> 
> 标签：html, css, html-table

我有一个带有一些 CSS 的表格，可以在第一行（用于列标题）中设置带有圆角和渐变背景的表格，但是尽管我指定了渐变，但它还是溢出了圆角之外`overflow: hidden`；

HTML：

```
<table id="tblIncidentQueue" class="DataTable">
        <tr class="TableHeaderFooter">
            <td colspan="5">
                <strong>Show </strong>
                <asp:DropDownList ID="drpNumOfResults" runat="server">
                    <asp:ListItem Text = "10" Value="10" ></asp:ListItem>
                    <asp:ListItem Text = "20" Value="20" ></asp:ListItem>
                    <asp:ListItem Text = "50" Value="50" ></asp:ListItem>
                    <asp:ListItem Text = "100" Value="100" ></asp:ListItem>
                    <asp:ListItem Text = "All" Value="All" ></asp:ListItem>
                </asp:DropDownList>
                <strong> entries</strong>
            </td>
            <td align="right">
                <img src="../images/Icons/Refresh.png" border="0" />
                <img src="../images/Icons/Down.png" border="0" />
            </td>
        </tr>
     </table> 
```

CSS：

```
 .DataTable
{
    margin: 10px;

    -moz-border-radius : 10px; /* Firefox */
    -webkit-border-radius : 10px; /* Safari & Chrome */
    -khtml-border-radius : 10px; /* Linux browsers */
    border-radius : 10px; /* CSS3 compatible browsers */

    border-style: solid;
    border-width: 1px;
    border-color: #cccccc;
    padding: 0px;
    border-spacing: 0px;
    overflow: hidden;
}

.TableHeaderFooter
{
    background: #eeeeee; /* Old browsers */
        background: -moz-linear-gradient(top,  #eeeeee 0%, #cccccc 100%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#eeeeee), color-stop(100%,#cccccc)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top,  #eeeeee 0%,#cccccc 100%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top,  #eeeeee 0%,#cccccc 100%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top,  #eeeeee 0%,#cccccc 100%); /* IE10+ */
        background: linear-gradient(to bottom,  #eeeeee 0%,#cccccc 100%); /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#cccccc',GradientType=0 ); /* IE6-9 */
        overflow: hidden;
} 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:53:29.340

将 .TableHeaderFooter 中的所有背景代码放入 .DataTable。边缘会消失。

```
.DataTable {
    margin: 10px;
    -moz-border-radius : 10px; /* Firefox */
    -webkit-border-radius : 10px; /* Safari & Chrome */
    -khtml-border-radius : 10px; /* Linux browsers */
    border-radius : 10px; /* CSS3 compatible browsers */
    border-style: solid;
    border-width: 1px;
    border-color: #cccccc;
    padding: 0px;
    border-spacing: 0px;
    overflow: hidden;
    background: #eeeeee; /* Old browsers */
    background: -moz-linear-gradient(top,  #eeeeee 0%, #cccccc 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#eeeeee), color-stop(100%,#cccccc)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #eeeeee 0%,#cccccc 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #eeeeee 0%,#cccccc 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #eeeeee 0%,#cccccc 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #eeeeee 0%,#cccccc 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#cccccc',GradientType=0 ); /* IE6-9 */
}

.TableHeaderFooter {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T01:07:49.803

您必须`border-radius`在 TableHeaderFooter 中为那些 td 元素设置属性。

```
.TableHeaderFooter td:first-child {
     border-radius : 10px 0px 0px 10px; /* rounds the top and bottom left corner */
}

.TableHeaderFooter td:last-child {
     border-radius : 0px 10px 10px 0px; /* rounds the top and bottom right corner */
} 
```

现在你不应该看到任何溢出的背景，例如渐变（注意溢出属性在这种情况下是无用的）

我希望它有帮助

# pdf - 高图。在右侧添加文本并全部导出为 PDF

> ID：15142153
> 
> 赞同：3
> 
> 时间：2013-02-28T17:44:29.460
> 
> 标签：pdf, text, highcharts

我正在尝试在图表的右侧添加文本。这工作正常。但我想将该文本导入由导出库生成的 pdf 和/或图像文件，但现在这不起作用。这是我的代码：http: [//jsfiddle.net/mrocha/TQ54c/](http://jsfiddle.net/mrocha/TQ54c/)

```
$(function () {

    /**
     * Create the data table
     */

    Highcharts.drawTable = function() {

        // user options
        var tableTop = 420,
            colWidth = 60,
            tableLeft = 20,
            rowHeight = 20,
            cellPadding = 2.5,
            valueDecimals = 1,
            valueSuffix = ' C';

        // internal variables
        var chart = this,
            series = chart.series,
            renderer = chart.renderer,
            cellLeft = tableLeft;

        // draw category labels
        $.each(series, function(serie_index, serie) {
            renderer.text(
                serie.name, 
                cellLeft + cellPadding, 
                tableTop + (serie_index + 2) * rowHeight - cellPadding
            )
            .css({
                fontWeight: 'bold'
            })       
            .add();
        });

        $.each(chart.xAxis[0].categories, function(category_index, category) {
            cellLeft += colWidth;

            // Apply the cell text
            renderer.text(
                    category,
                    cellLeft - cellPadding + colWidth, 
                    tableTop + rowHeight - cellPadding
                )
                .attr({
                    align: 'right'
                })
                .css({
                    fontWeight: 'bold'
                })
                .add();

            $.each(series, function(i) {

                renderer.text(
                        Highcharts.numberFormat(series[i].data[category_index].y, valueDecimals) + valueSuffix, 
                        cellLeft + colWidth - cellPadding, 
                        tableTop + (i + 2) * rowHeight - cellPadding
                    )
                    .attr({
                        align: 'right'
                    })
                    .add();

            });

        });

    }

    /**
     * Draw a single line in the table
     */
    Highcharts.tableLine = function (renderer, x1, y1, x2, y2) {
        renderer.path(['M', x1, y1, 'L', x2, y2])
            .attr({
                'stroke': 'silver',
                'stroke-width': 1
            })
            .add();
    };

    /**
     * Create the chart
     */
     window.chart = new Highcharts.Chart({

        chart: {
            renderTo: 'container',
            events: {
                load: Highcharts.drawTable
            },
            height: 600,
            width: 800,
            marginBottom: 250
        },

        title: {
            text: 'Average monthly temperatures'
        },

        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },

        yAxis: {
            title: {
                text: 'Temperature (C)'
            }
        },

        legend: {
            y: -170
        },

        series: [{
             name: 'Tokyo',
             data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
          }, {
             name: 'New York',
             data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]
          }, {
             name: 'Berlin',
             data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]
          }, {
             name: 'London',
             data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
          }]
    });

    chart.renderer.text('This text should be at the right side of the chart.  And should be exported into pdf or image file',
            680, 80 ).
        css({
          width: 100,
          color: 'green',
          textAlign: 'left'
        }).attr({
        zIndex: 999
    }).add();
}); 
```

任何想法？难道我做错了什么？提前致谢！

哦，顺便说一句，我还包括一个表格，该表格可以很好地导出为 pdf 和图像文件。我也只需要包含我的绿色文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:03:11.613

这是因为您通过渲染器添加文本，但在导出图表期间再次生成而没有您添加的“动态”内容。所以解决方案是使用渲染器在图表中加载事件。在您的情况下，它是功能 drawTable。

看例子：

[http://jsfiddle.net/mrocha/TQ54c/](http://jsfiddle.net/mrocha/TQ54c/)

```
 Highcharts.drawTable = function() {

        //custom text
        this.renderer.text('This text should be at the right side of the chart.  And should be exported into pdf or image file',
            680, 80 ).
        css({
          width: 100,
          color: 'green',
          textAlign: 'left'
        }).attr({
        zIndex: 999
    }).add();

    //...

}; 
```

# c# - 匹配c#中不同格式句子的正则表达式

> ID：15142156
> 
> 赞同：2
> 
> 时间：2013-02-28T17:44:42.337
> 
> 标签：c#, regex

文件格式

```
POS ID         PosScore NegScore    SynsetTerms                          Gloss
a   00001740    0.125   0           able#1"                              able to swim"; "she was able to program her computer";
a   00002098    0       0.75        unable#1                            "unable to get to town without a car"; 
a   00002312    0       0           dorsal#2 abaxial#1                  "the abaxial surface of a leaf is the underside or side facing away from the stem"
a   00002843    0       0           basiscopic#1                         facing or on the side toward the base
a   00002956    0       0.23        abducting#1 abducent#1               especially of muscles; drawing away from the midline of the body or from an adjacent part
a   00003131    0       0           adductive#1 adducting#1 adducent#1   especially of muscles; 
```

在这个文件中，我想提取**（ID、PosScore、NegScore 和 SynsetTerms）**字段。( **ID,PosScore,NegScore)**字段数据提取很容易，我对这些字段的数据使用以下代码。

```
Regex expression = new Regex(@"(\t(\d+)|(\w+)\t)");

var results = expression.Matches(input);
foreach (Match match in results)
{

    Console.WriteLine(match);
}
Console.ReadLine(); 
```

它给出了正确的结果，但是归档的**SynsetTerms 会**产生问题，因为有些行有两个或多个单词，所以如何组织单词并反对它 PosScore 和 NegScore。

**例如**，在第五行有两个单词`abducting#1`，`abducent#1`但两个单词的分数相同。

那么，获取 Word 及其分数的行的正则表达式是什么，例如：

```
 Word                PosScore          NegScore 
  abducting#1         0                 0.23
  abducent#1          0                 0.23 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T18:00:29.717

非正则表达式，字符串拆分版本可能更容易：

```
var data =
   lines.Split(new[] {Environment.NewLine}, StringSplitOptions.RemoveEmptyEntries)
        .Skip(1)
        .Select(line => line.Split('\t'))
        .SelectMany(parts => parts[4].Split().Select(word => new
            {
                ID = parts[1],
                Word = word,
                PosScore = decimal.Parse(parts[2]),
                NegScore = decimal.Parse(parts[3])
            })); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:03:37.617

你可以使用这个正则表达式

```
^(?<pos>\w+)\s+(?<id>\d+)\s+(?<pscore>\d+(?:\.\d+)?)\s+(?<nscore>\d+(?:\.\d+)?)\s+(?<terms>(?:.*?#[^\s]*)+)\s+(?<gloss>.*)$ 
```

您可以创建这样的列表

```
var lst=Regex.Matches(input,regex)
             .Cast<Match>()
             .Select(x=>
             new 
             {
                 pos=x.Groups["pos"].Value,
                 terms=Regex.Split(x.Groups["terms"].Value,@"\s+"),
                 gloss=x.Groups["gloss"].Value
             }
        ); 
```

现在你可以迭代它

```
foreach(var temp in lst)
{
    temp.pos;
    //you can now iterate over terms
    foreach(var t in temp.terms)
    {
    }
} 
```

# javascript - 在按钮中获取图像的 src

> ID：15142157
> 
> 赞同：0
> 
> 时间：2013-02-28T17:44:44.667
> 
> 标签：javascript, html

我有一个带有图像的按钮。如何`src`在 JavaScript 中的按钮上获取该图像的？

这是 HTML：

```
<button id="A8" name="B_Rook" type="button" style="background-color:#FFE4C4" onClick="check(this.id)">
    <a href="" onclick="getImgId(this.id)"><img id="B_Rook" src="B_Rook.jpg" HEIGHT=80 width=80/></a>
</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:51:42.120

我真的不确定您要做什么，但是...

要在按钮标签中获取图像的 src，请执行此操作

```
<button id="A8" name="B_Rook" type="button" style="background-color:#FFE4C4">
    <img id="B_Rook" src="B_Rook.jpg" HEIGHT=80 width=80 onclick="getImgId(this.src)">
</button> 
```

要获取该 img 元素的 id，请执行此操作

```
<button id="A8" name="B_Rook" type="button" style="background-color:#FFE4C4">
    <img id="B_Rook" src="B_Rook.jpg" HEIGHT=80 width=80 onclick="getImgId(this.id)">
</button> 
```

一个基本的点击处理程序看起来像这样

```
<script>
    function getImgId(id){
        alert(id)
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:48:37.747

你真的很接近，只需将元素`onclick`从`a`元素移动到`img`元素。

您可能希望`a`完全删除该元素，因为它是无效的 HTML（`button`元素不能包含任何[交互式内容](http://www.w3.org/TR/html5/dom.html#interactive-content-0)元素）。

`/`此外，除非您正在编写 XHTML（而且您几乎肯定不会） ，否则标签`>`末尾不应该有 a 。`img`（这是无害且允许的，只是毫无意义。）

# php - Safari 6 ajax 请求获取新的会话 ID

> ID：15142167
> 
> 赞同：1
> 
> 时间：2013-02-28T17:45:15.650
> 
> 标签：php, javascript, zend-framework, session, safari

**情况：**

我有一个与 PHP/MySQL/Zend Framework 1.12 后端通信的 Javascript/jQuery Web 应用程序。Web 应用程序在 iFrame 内运行（在 iframe 模式下使用 jQuery fancybox 加载）。

应用程序在后端创建一个对象并用它保存当前会话 ID。然后它在前端显示对象的属性，并在用户与应用程序交互时通过 ajax 调用在后端修改对象。会话 ID 用于检查 ajax 请求是否来自同一用户（用户未登录，因此这是检查的唯一方法）。

我使用 jQuery 进行 ajax 调用，使用 Zend_Session 处理 PHP/Zend 中的会话。

**问题：**

现在，问题是在 safari 6 中，这些 ajax 请求具有不同的会话 ID，因此它们与存储在后端模型对象中的会话 ID 不匹配，并且访问被拒绝。

只有在 iframe 中运行时才会发生这种情况，而不是在任何其他浏览器上，而不是在其他版本的 safari（5 或更低版本）上

有谁知道什么会导致这种情况以及如何处理它？

**更多信息：**

整个应用程序在 iframe 中运行，会话 ID 也存储在后端模型中。所以我认为所有这些调用都具有相同的会话 ID。

另一件事：一旦我在单独的选项卡中运行应用程序，然后再次在 iframe 中运行，问题就消失了：从那时起，直到我终止浏览器会话，我每次都得到相同的会话 ID，正如我所期望的那样。坦率地说，这对我来说就像一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:03:48.663

关键问题是 iFrame。作为 Safari 安全模型的一部分，在 iFrame 中运行的请求与其他页面请求分开处理。这是他们的 3rd 方 cookie 保护的一部分。据我了解，Firefox22 将开始做同样的事情，但没有那么严格。

如果您确定您真的想解决这个问题，请将 PHP 的 Session Id cookie 拉出并将其放在 iFrame 请求的查询字符串中。然后，您可以从查询字符串中提取会话 ID 并使用它。（如果你这样做，你最终不会在 cookie 数据中得到一个。）

# visual-studio-2010 - 如何启用vs2010布局工具栏？

> ID：15142170
> 
> 赞同：1
> 
> 时间：2013-02-28T17:45:28.777
> 
> 标签：visual-studio-2010, layout, reporting-services, toolbar

我最近安装了 VS 2010 高级版。我的问题是它们似乎禁用了一些功能，特别是布局工具栏，例如对齐、间距等。我想我缺少使它们启用的东西。我将不胜感激任何建议。谢谢

# python - tkinter 给窗口焦点

> ID：15142186
> 
> 赞同：1
> 
> 时间：2013-02-28T17:46:21.847
> 
> 标签：python, tkinter

我有一个 tkinter python 2.x 程序。我有几个窗口出现在屏幕上。我使用按钮从一个导航到另一个，但我正在努力关闭一个窗口并重新关注当前打开的窗口。我可以打开新窗口就好了！

```
#code for main window
def frmMain():
  app = Tk()
  app.title("TWS: XML Options")
  app.geometry("200x100")
  bn1 = Button(app,text="Add", command=frmAdd)
  bn1.grid(row = 2,column = 2, stick = W)
  bn2 = Button(app,text="Edit", command=frmEdit)
  bn2.grid(row = 2,column = 3, stick = W)
  bn3 = Button(app,text="Delete", command=frmDelete)
  bn3.grid(row = 2,column = 4, stick = W)
  bn4 = Button(app,text="Back",command=frmMenu)
  bn4.grid(row = 3,column = 2, stick = W)
  app.mainloop()

#code for button on sub window
....
bn1 = Button(app,text="Back", command=back)
...

def back():
   #Code to close current window and reopen frmMain 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:24:56.633

只需调用[`destroy()`](http://effbot.org/tkinterbook/toplevel.htm)小部件的父级。

```
bn1 = Button(app, text="Back", command=app.destroy) 
```

我想你并没有破坏父窗口，所以一旦 Toplevel 被破坏，焦点会自动返回到之前打开的窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:04:25.993

可以使用其方法激活TopLevel窗口 *。*[`deiconify()`](http://effbot.org/tkinterbook/wm.htm#Tkinter.Wm.deiconify-method)

使用基本的*Widget*方法[`focus_set()`](http://effbot.org/tkinterbook/widget.htm#Tkinter.Widget.focus_set-method)将键盘焦点设置到特定的小部件。

# database - Zend Framework 2 tableGateway 模式与其他表的工作流

> ID：15142189
> 
> 赞同：0
> 
> 时间：2013-02-28T17:46:30.617
> 
> 标签：database, zend-framework2

我刚刚开始掌握 Zend Framework 2 数据库理论，已经使用版本 1 很长时间了。当业务逻辑需要一个表对象将操作推迟到另一个表对象时，我试图辨别使用许多表的“正确”方式。

在现有网关类中实例化不同的表类似乎是一个漫长而费力的过程。如果我使用与服务管理器工厂相同的流程，例如

```
$yourData = $myData['thisPart'];
$dbAdapter = $this->_myTableGateway->getAdapter();
$resultSetPrototype = new ResultSet();
$resultSetPrototype->setArrayObjectPrototype(new TestObject());
$tbl = new TestTable(new TableGateway('tbl_name', $dbAdapter, null, $resultSetPrototype));
$tbl->insertSomeData($yourData); 
```

...然后我想它会起作用，但服务管理器不应该在表类中可用。我可以使用工厂定义注入它，但这似乎不是一个好主意。

所以我想我的问题是，一个类（表示一个表并使用这种模式）使用不同的网关类将它的一些数据插入另一个表的最佳方式是什么。还是上面的方法是唯一/“正确”的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:52:45.717

似乎解决此问题的最佳方法是在需要与其他表网关类交互的每个模型中实现 ServiceLocatorAwareInterface 接口。然后，您可以定义 setServiceLocator(ServiceLocatorInterface $sl) 方法，该方法自动传递对服务定位器的引用。

# c++ - SDL_BlitSurface 不起作用 - 我在表面上看不到图像

> ID：15142191
> 
> 赞同：1
> 
> 时间：2013-02-28T17:46:37.213
> 
> 标签：c++, image, window, sdl

再次坚持一些我无法弄清楚如何工作的代码。我正在尝试创建一个 SDL 表面，加载位图图像并显示它。我的代码是这样的：

```
struct Image {
    string       Name;
    SDL_Surface* Surface;
};

int WinMain(HINSTANCE hInstance, HINSTANCE hPrevInst, PSTR lpCmdL, INT nCmdS) {
    // Will store our bitmap
    Image NewImage;

    // Initialization
    SDL_Init(SDL_INIT_EVERYTHING);

    // Create main window
    SDL_Surface *Window = SDL_SetVideoMode(640,480,32,SDL_HWSURFACE|SDL_DOUBLEBUF);
    SDL_WM_SetCaption("MyApp", "MyApp");

    // Load image and make it compatible
    SDL_Surface* Surf_Temp = NULL;
    if((Surf_Temp = SDL_LoadBMP("myimage.bmp")) != NULL) {
        NewImage.Name = "MyImage";
        NewImage.Surface = SDL_DisplayFormat(Surf_Temp);
        SDL_FreeSurface(Surf_Temp);
    }

    // Draw image over the window
    if (NewImage.Surface != NULL && Window  != NULL) {
        SDL_Rect DestR;
                 DestR.x = 0;
                 DestR.y = 0;
        if (SDL_BlitSurface(NewImage.Surface, NULL, Window, &DestR) == -1) {
            MessageBox(NULL, "Error", "Alert", MB_OK);
        }
    }

    // Run
    SDL_Event Event;
    while(!End) {
        while(SDL_PollEvent(&Event)) {
            EventsHandler(&Event);
        }
    }
    return 0;
} 
```

好吧，图像已正确加载。我通过获取 NewImage.Surface->w (width) 来验证它，这是正确的位图宽度。我没有收到任何错误消息（SDL_BlitSurface 返回 0），所以我不知道为什么窗口仍然是黑色的，没有显示图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T17:55:05.450

您需要调用[SDL_Flip](http://sdl.beuc.net/sdl.wiki/SDL_Flip)来更新屏幕后，您会看到它。

```
SDL_Flip(Window); 
```

也阅读[双缓冲](http://en.wikipedia.org/wiki/Multiple_buffering)。

# c# - 如何使用 C# 互操作传递 dbFailOnError 参数？

> ID：15142192
> 
> 赞同：3
> 
> 时间：2013-02-28T17:46:36.913
> 
> 标签：c#, ms-access, office-interop

我正在使用 DAO 在 Access 数据库上执行 SQL 语句。如果我使用的是 VBA，`dbFailOnError`如果更新查询失败，我可以使用它来引发错误，如下所示：

```
function updateTable(db as DAO.Database) as boolean

 on error goto errHandler
 db.execute "update testTable set name='xyz' where name='abc'",dbFailOnError
 updateTable=true
 exit function

 errhandler:
  updateTable=false
  on error goto 0

end function 
```

如何`dbFailOnError`使用 .NET 互操作通过？似乎等价的是：

```
using Dao = Microsoft.Office.Interop.Access.Dao;
namespace DatabaseFunctions
{
    public class Updater
    {
        public bool updateTable(Dao.Database db)
        {
            try
            {
             db.Execute("update testTable set name='xyz' where name='abc'",
                         dbFailOnError);
             return true;
            }
            catch
            {
             return false;
            }
        }
    }
} 
```

但是我在什么命名空间中找到`dbFailOnError`？它不在`Dao`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:56:40.193

`dbFailOnError`是`DAO`枚举的成员，`RecordsetOptionEnum`...所以试试`DAO.RecordsetOptionEnum.dbFailOnError`

# java - 在 Java 中将 JList 选择存储在数组 String[] 中

> ID：15142199
> 
> 赞同：0
> 
> 时间：2013-02-28T17:46:58.647
> 
> 标签：java, arrays, swing, jlist

我正在创建一个 GUI，但不知道如何将`JList`用户选择存储在一个数组中。我试过了`List<<Sting>>`，`Object[]`等等……`JRadioButtons`其他的图形用户界面都很好，只是`JList`不工作……

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Test extends JFrame {

    private JTextField num3;
    private JLabel label3;
    private JButton button;
    private JRadioButton radio2;
    private JRadioButton radio3;
    private ButtonGroup radioGroup;

    private JList statesList;

    String[] states = {"Alabama",   "Alaska",   "Wyoming"};
    String expression;
    String frequency;

    // no args constructor
    public Test() {
        createUI();
    }
    private void createUI() {
        Container contentPane = getContentPane();
        contentPane.setLayout(null);

        label3 = new JLabel();
        label3.setText("Search Expression");
        label3.setBounds(16, 120, 200, 21);
        contentPane.add(label3);
        num3 = new JTextField();
        num3.setText("(any expression)");
        num3.setBounds(16, 144, 150, 21);
        num3.setHorizontalAlignment(JTextField.LEFT);
        contentPane.add(num3);

        button = new JButton("Start!");
        button.setBounds(90,430,126,24);
        contentPane.add(button);
        button.addActionListener(
                new ActionListener() {
                public void actionPerformed(ActionEvent event)
                {
                    buttonActionPerformed(event);
                }
                }
                );
        // States Selection
        statesList = new JList(states);
        statesList.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
        statesList.setVisibleRowCount(5);
        statesList.setBounds(400, 16, 100, 50);
        JScrollPane statesScroll = new JScrollPane(statesList);
        statesScroll.setBounds(180, 16, 135, 400);
        contentPane.add(statesScroll);

        // Radio Buttons
        radio2 = new JRadioButton();
        radio3 = new JRadioButton();
        radio3.setSelected(true);

        radioGroup = new ButtonGroup();
        radioGroup.add(radio2);
        radioGroup.add(radio3);

        radio2.setText("Quarterly");
        radio3.setText("Yearly");

        radio2.setBounds(16,360,90,23);
        radio3.setBounds(16,385,75,23);

        contentPane.add(radio2);
        contentPane.add(radio3);

        // set the content Pane window
        setTitle("Search Engine");
        setSize(750,500);
        setVisible(true);

        }

    // Getting the user's TextField and JRadioButton input
    private void buttonActionPerformed(ActionEvent event) {
        expression = num3.getText();
        if (radio2.isSelected())
                frequency = "quarterly";
        else frequency = "yearly";
        System.out.println(expression+","+frequency);

    // The above "expression" and "frequency" work fine. But JList does not 
    // work. What am I doing wrong? I tried Object[] instead of List<String>...

        List<String> values = statesList.getSelectedValues();
        return values==null ? null : values.toArray(new String[values.size()]);
        }

    // main thread
    public static void main(String[] args) {
        Test application = new Test();
        application.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:53:50.050

此变体迭代`Object[]`返回的 by`getSelectedValues()`以在控制台中显示预期值。接下来要修复的是布局。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

//public class Test extends JFrame {
public class Test {

    private JTextField num3;
    private JLabel label3;
    private JButton button;
    private JRadioButton radio2;
    private JRadioButton radio3;
    private ButtonGroup radioGroup;

    private JList statesList;

    String[] states = {"Alabama",   "Alaska",   "Wyoming"};
    String expression;
    String frequency;

    // no args constructor
    public Test() {
        createUI();
    }

    private void createUI() {
        JFrame f = new JFrame("Search Engine");
        Container contentPane = f.getContentPane();
        // This needs fixing NEXT!
        contentPane.setLayout(null);

        label3 = new JLabel();
        label3.setText("Search Expression");
        label3.setBounds(16, 120, 200, 21);
        contentPane.add(label3);
        num3 = new JTextField();
        num3.setText("(any expression)");
        num3.setBounds(16, 144, 150, 21);
        num3.setHorizontalAlignment(JTextField.LEFT);
        contentPane.add(num3);

        button = new JButton("Start!");
        button.setBounds(90,430,126,24);
        contentPane.add(button);
        button.addActionListener(
            new ActionListener() {
                public void actionPerformed(ActionEvent event) {
                    buttonActionPerformed(event);
                }
            });
        // States Selection
        statesList = new JList(states);
        statesList.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
        statesList.setVisibleRowCount(5);
        statesList.setBounds(400, 16, 100, 50);
        JScrollPane statesScroll = new JScrollPane(statesList);
        statesScroll.setBounds(180, 16, 135, 400);
        contentPane.add(statesScroll);

        // Radio Buttons
        radio2 = new JRadioButton();
        radio3 = new JRadioButton();
        radio3.setSelected(true);

        radioGroup = new ButtonGroup();
        radioGroup.add(radio2);
        radioGroup.add(radio3);

        radio2.setText("Quarterly");
        radio3.setText("Yearly");

        radio2.setBounds(16,360,90,23);
        radio3.setBounds(16,385,75,23);

        contentPane.add(radio2);
        contentPane.add(radio3);

        // set the content Pane window
        f.setSize(750,500);
        //f.pack();
        f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        f.setLocationByPlatform(true);
        f.setVisible(true);
    }

    // Getting the user's TextField and JRadioButton input
    private void buttonActionPerformed(ActionEvent event) {
        expression = num3.getText();
        if (radio2.isSelected())
            frequency = "quarterly";
        else frequency = "yearly";
        System.out.println(expression+","+frequency);

        Object[] values = statesList.getSelectedValues();
        for (Object state : values) {
            System.out.println(state);
        }
    }

    // main thread
    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                Test application = new Test();
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

## 尖端

*   不要扩展框架，只需使用实例。
*   应该在 EDT 上创建和更新 J2SE GUI（Swing 和 AWT）。请参阅[Swing 中的并发 -](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)尤其是初始线程。
*   `contentPane.setLayout(null);` 这在现实世界中行不通（可能将下一台 PC 读作“现实世界”）。使用布局管理器获得强大的 GUI。有关详细信息，请参阅[在容器内布局组件](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)，以及根据需要对布局进行分组的[嵌套布局示例。](https://stackoverflow.com/a/5630271/418556)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:56:54.860

根据[文档](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JList.html#getSelectedValues%28%29)， getSelectedValues 返回一个对象数组。

```
Object[] values = statesList.getSelectedValues(); 
```

如果您确定它们都是字符串，则只需键入 cast 即可。

```
String[] values = (String[]) statesList.getSelectedValues(); 
```

编辑：试试这个：

```
Object[] values = statesList.getSelectedValues();
String[] strings = new String[values.length];
for(int i = 0; i < values.length; i++) {
  if(values[i] instanceof String) {
    strings[i] = ((String) values[i]);
  }
} 
```

# unit-testing - 有没有办法延迟 QUnit 测试套件的启动？

> ID：15142200
> 
> 赞同：2
> 
> 时间：2013-02-28T17:46:59.183
> 
> 标签：unit-testing, maven, phantomjs, qunit

我正在尝试解决单元测试问题。

我曾经有一个大部分工作的 Maven -> PhantomJS -> Qunit 设置，但它是不可预测的，所以我把它拆开来尝试修复它。

我升级了软件：

```
Qunit: 1.11.0
PhantomJS: 1.8
Phantom Qunit Runner Latest: https://github.com/jquery/qunit/tree/master/addons/phantomjs 
```

我看到 Web GUI 工作正常。它运行并通过了所有 102 项测试。控制台打印这个：

```
$ phantomjs --disk-cache=false runner.js http://localhost/ui/dcx/test.html
$ Took 16ms to run 0 tests. 0 passed, 0 failed. 
```

如果我在运行程序中注释掉 exit 命令，它会多次打印 QUnit.done 的控制台输出。

```
$ phantomjs --disk-cache=false runner.js http://localhost/ui/dcx/test.html
$ PhantomJS successfully loaded a page
$ QUnit.done callback fired
$ Took 15ms to run 0 tests. 0 passed, 0 failed.
$ QUnit.done callback fired
$ Took 1840ms to run 102 tests. 102 passed, 0 failed.
$ QUnit.done callback fired
$ Took 1841ms to run 102 tests. 102 passed, 0 failed.
$ QUnit.done callback fired
$ Took 1842ms to run 102 tests. 102 passed, 0 failed.
$ QUnit.done callback fired
$ Took 1848ms to run 102 tests. 102 passed, 0 failed.
$ ^C
$ 
```

在我看来，Qunit.done 回调执行得太快了，然后执行了多次。

有人知道为什么回调会触发吗？

我的测试内容和登录延迟可能是相关的。我使用 AMD 模块来定义测试并使用 curl.js 来引入它们。在安全登录之前什么都不会发生：

```
curl(['dolla'], function($){
        $.ajax({
        type: 'POST',
        url: '/svc/j_spring_security_check',
        data: {
            j_username: '7',
            j_password: '7'
        },
        success: function() {
            loadTests()
        }
    });
})
var loadTests = function () {
    curl([
        // Unit tests
         'dcx/dataControls/activity.test'
        , 'dcx/dataControls/eventList.test'
        , 'dcx/dataControls/mapViewer.view.test'
        , 'dcx/pages/deviceDetails.view.test'
        , 'dcx/pages/login.test'
        , 'dcx/pages/nodeProfiles.test'
        , 'dcx/pages/settings.view.test'
    ], function() {},  function(ex) { throw new Error(ex) })
}) 
```

编辑：我认为，我认为这是根本原因。如果您在空白页上包含 QUnit，它会立即调用 QUnit.begin 和 QUnit.done。我需要延迟 Qunit 的执行，直到安全登录成功并且 curl 引入了我的单元测试。有没有办法延迟 QUnit 的启动，但仍然保持 Qunit 对象可用？我不能使用 stop()，因为有很多异步测试会调用 start()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:46:46.777

找到了答案。您可以将 QUnit 配置为不启动，然后在加载所有测试时手动启动它。这可以防止 Qunit.done 的重复调用，这是此问题的根本原因。

[http://forum.jquery.com/topic/are-qunit-and-requirejs-compatible#14737000001967123](http://forum.jquery.com/topic/are-qunit-and-requirejs-compatible#14737000001967123)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:03:51.117

这是一种方法——如果没有测试结果，则修改运行器以不退出。 [https://gist.github.com/SimpleAsCouldBe/5059623](https://gist.github.com/SimpleAsCouldBe/5059623)

但这不起作用——只要清除测试堆栈，就会触发 Qunit.done。在像 Curl/Require.js 这样的异步加载环境中，这可能随时发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-19T17:15:04.023

这是如果您不想使用`require`. 例如，可能在浏览器上下文中。

花了很长时间找到一种方法将脚本（和样式表）的加载转换为`Promise`s（见[这里](https://stackoverflow.com/a/45218814/595305)），然后我发现 QUnit 测试套件在所有这些加载之前就开始运行的大问题。通常，在开始时，少数测试会抱怨某个变量或类未定义，尽管后来的测试没有那么困难。

您可以通过以下方式停止自动启动：

```
QUnit.config.autostart = false; 
```

...似乎只需将其放在几个文件之一中就足够了。

那么，要开始 QUnit 测试，你必须去`QUnit.start();`. 但是，也许可以理解，您不能从 QUnit 测试运行的任何代码中执行此操作。这变得复杂了。最后，我在我的应用程序启动代码中做到了这一点：

```
await this.loadInjectedFile( GLOBAL_SCRIPT );
await this.loadInjectedFile( DBFORM_SCRIPT );
await this.loadInjectedFile( UDV_SCRIPT );
await this.loadInjectedFile( REACTIVITY_SCRIPT );
console.log( '... injected files loaded' );
// to allow QUnit to start testing
window.QUnitGreenLight = true; 
```

...严格来说是一件很淘气的事情（允许与测试相关的代码潜入您的应用程序代码中）。可能会找到一种更细分的方法。

然后，在您启动测试的 HTML 文件中内联：

```
<script>
    const tryToStartTesting = function(){
        setTimeout( function(){
            if( window.QUnitGreenLight ){
                QUnit.start();
            }
            else {
                console.log( 'QUnit green light not yet given!' );
                tryToStartTesting();
            };
        }, 10 );
    };
    tryToStartTesting();
</script> 
```

...实际上，在发出绿灯之前似乎需要百分之几秒。

也许有点斗志昂扬，但它似乎有效。

# .net - 跨不同服务编写数据库查询

> ID：15142202
> 
> 赞同：0
> 
> 时间：2013-02-28T17:47:05.080
> 
> 标签：.net, wcf, web-services, software-distribution

```
SELECT
    *
FROM
    tbl_order o
INNER JOIN
    tbl_contact c
ON
    c.ContactId = o.BillingContactId 
```

上面对电子商务商店的查询既好又简单。

如果我要将我的所有联系人数据移动到 CRM 中，以便将其存储在不同的数据库中，并且电子商务数据库通过 guid 引用联系人并通过 WCF 服务获取他们的数据，我将如何创建等效查询？

这会不会太慢，我应该在电子商务数据库中保留一份联系人数据的副本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:52:22.093

如果没有非常有创意，就没有办法在 SQL Server 中查询 WCF 服务。另外你是对的，它会非常慢。

我建议将所有数据放在一个地方，然后查询很快。

如果能把联系方式复制到电商里面就最好了。如果数据库技术相同，您可以使用复制来完成此操作。

如果它们不同，那么您将不得不编写一些自定义软件来完成它，但这将是值得的。

# node.js - 未调用 socket.io 回调

> ID：15142203
> 
> 赞同：0
> 
> 时间：2013-02-28T17:47:10.107
> 
> 标签：node.js, socket.io

做一些 socket.io 工作。好像我的发出回调没有被触发。我做对了吗？

```
this.logger.debug("joining room " + roomId);      
callback = function() {
  return this.logger.debug('finished emitting join for socket');
};
// this.config.ioTypes.join resolves to "j"
this.socket.emit(this.config.ioTypes.join, { 
  user: this.config.user,
  room: roomId
}, callback); 
```

我的日志看起来是正确的（请注意，上面的代码不包括会生成这些日志的所有内容）：

```
DEBUG: joining room 1245 <-- first line from code above
DEBUG: join event for socket etQIXGAm59DYkCPk1_gj 
DEBUG: data: { user: 1, room: '1245' }             
DEBUG: received join event for 1, data: { user: 1, room: '1245' } 
```

这就是结束。看起来 socket.io 没有调用我的回调。但是文档很清楚：

> 有时，您可能希望在客户端确认消息接收时获得回调。
> 
> 为此，只需将函数作为`.send`or 的最后一个参数传递`.emit`。更重要的是，当您使用 时`.emit`，确认由您完成，这意味着您还可以传递数据：

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:14:12.953

我自己想出来的。将把它留在这里，因为文档对这个不是很清楚。

我曾经在服务器端（coffeescript） `util.inspect(arguments)`看到进入我的处理程序的内容：`on`

```
 @logger.debug "onJoin args: " + util.inspect(arguments) 
```

结果是：`... '2': [Function: ack]`这看起来像我需要的。所以我将它添加到`on`处理程序的签名中。然后我添加`callback() if callback?`到处理程序的末尾。到目前为止看起来不错。

# matlab - 使用 Matlab GUI 进行并行处理

> ID：15142205
> 
> 赞同：0
> 
> 时间：2013-02-28T17:47:14.533
> 
> 标签：matlab, user-interface, parallel-processing, matlab-guide

我有一个主窗体 GUI，它生成子 GUI，它们都是模块化的，并且独立于生成它的主 GUI，只接受输入参数，但没有输出参数或数据依赖性，因为它们执行单独的非相关任务。

当前的设置是，通过按下主 GUI 上的按钮，创建一个子 GUI，并执行一个计算时间长的算法，并将一直持续到完成，然后 GUI 被销毁。

问题是我希望能够在孩子已经存在的情况下从主 GUI 打开多个不同的模块。例如，按下一个按钮来运行 GUI 1，返回到主 GUI 并按下另一个按钮来运行 GUI 2，等等。我遇到的问题是 GUI 1 然后被中断并暂停，直到 GUI 2 完成执行，然后 GUI 1 从它停止的地方返回，我希望它们同时运行。

编辑：我解决了我的问题，结果发现有一种丑陋的方法可以做到这一点，即使那样，它也不会弹出 GUI，而是做我需要它做的事情。只需要使用 parfor 迭代作为索引号来告诉 matlab 在循环内运行哪个函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:00:15.047

您可以使用 pause 命令进行基本的并行处理以产生执行，但这有点侵入性，因为您的长算法需要定期调用 pause。

```
function [ output_args ] = BackgroundTask( srcTimer,~, hObject )
%BackgroundTask - Test background task

fprintf(1,'Background\n');

end

 hObject = 'Some relevant Object';
 feedbackTimer = timer('Period',1,'TimerFcn', {@BackgroundTask, hObject}, 'ExecutionMode','FixedRate' );
 start(feedbackTimer); 
```

长时间运行的任务

```
 fprintf(1,'Start\n'); 
 for i=1:200000; factorial(100); 
        if mod(i,1000) == 0
            pause(0.001); 
        end
 end
 fprintf(1,'Finish\n'); 
```

如果您启动后台任务，然后运行长时间运行的代码，您应该会看到：

```
Background
Background
Start
Background
Background
Background
Background
Background
Finish
Background
Background 
```

它也可能值得研究 Matlab[并行计算工具箱](http://www.mathworks.com/products/parallel-computing/)。

# php - 将 mysql 转换为新的 mysqli API

> ID：15142206
> 
> 赞同：-1
> 
> 时间：2013-02-28T17:47:16.783
> 
> 标签：php, html, sql

我正在尝试转换我的 mysql 命令以适应 mysqli 的新标准，我将发布脚本，然后发布问题。我已经在数据库中创建了表。

配置.php：

```
$dbhost="databasehost";
$dbusername="username";
$dbpassword="password";
$dbname="databasename";

$connect = mysql_connect($dbhost, $dbusername, $dbpassword);
mysql_select_db($dbname,$connect) or die ("Could not connect to database");

?> 
```

插入.php：

```
include("config.php");

if (isset($_POST[firstname]) && isset($_POST[lastname]) && isset($_POST[age])) {
    $sql = "INSERT INTO Persons (FirstName, LastName, Age) VALUES ('$_POST[firstname]','$_POST[lastname]','$_POST[age]')";
    mysql_query($sql, $connect); 
    header("Location: add.htm");
    // "1 record added";
}
else {
    echo "no record added";
}

if (!mysql_query($sql,$connect))
  {
  die('Error: ' . mysql_error());
  }

mysql_close($connect);
?> 
```

视图.php：

```
<?php
include("config.php");

$sql = mysql_query("SELECT * FROM Persons");
if ($sql) {
    while($results = mysql_fetch_array($sql)) {
        echo $results['FirstName'] . ', ' . $results['LastName'] . ', ' . $results['Age'] .     '<br/>';
    }
} else {
    die('Error: ' . mysql_error());
}

mysql_close($connect);
?> 
```

*   首先，如何修改脚本以使用 mysqli 而不是 mysql？
*   其次，当使用上面的脚本时，当我从
    表单中添加一些东西时，它总是添加重复的条目。我该如何防止呢？
*   三、为了防止sql注入，我可以在代码中添加什么？我知道对于 php attach 我可以使用 "$firstname = trim(strip_tags(stripslashes($_POST['firstname'])));" 由于我正在清理输入，这是否也包括 sql 注入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:48:35.470

请仔细阅读迁移的官方手册：

[https://wikis.oracle.com/display/mysql/Converting+to+MySQLi](https://wikis.oracle.com/display/mysql/Converting+to+MySQLi)

# c# - 将 Texture2d 圆转换为 Farseer circleBody

> ID：15142213
> 
> 赞同：0
> 
> 时间：2013-02-28T17:47:51.683
> 
> 标签：c#, xna, texture2d, farseer

我以前可能问过类似的问题，但相信我，我在网上搜索了很多。我对 farseer 和 xna 很陌生，我想做的就是将现有的一组 texture2d 圆圈转换为 farseer circleBody？有没有办法在不对现有代码进行太多修改的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:19:31.013

您需要做的是创建您的 Farseer 对象，然后使用它在您的世界空间中的位置在其上绘制纹理。

请记住，Farseer 不处理纹理的绘制代码，您需要自己处理。

示例绘制代码：

```
batch.Draw(Body.Texture, ConvertUnits.ToDisplayUnits(Body.Position), null, Color.White, Body.Rotation, Body.Origin, 1f, SpriteEffects.None, 0f); 
```

# .net - 需要帮助从 SQL 转换为 LINQ

> ID：15142218
> 
> 赞同：2
> 
> 时间：2013-02-28T17:48:04.283
> 
> 标签：.net, linq

我有以下 SQL 语句

```
select RegionBoundaryID, RegionBoundary.lat, RegionBoundary.long, RegionID
from RegionBoundary join Region_Boundary on RegionBoundary.RegionBoundaryID = Region_Boundary.BoundaryID
order by RegionID, RegionBoundaryID 
```

这是它对 LINQ 的翻译

```
 var context = new DataClassesRegionDataContext();
 var regionBoudaries = from boundaryID in context.Region_Boundaries
                       join boundariesDetail in context.RegionBoundaries on boundaryID.BoundaryID equals boundariesDetail.RegionBoundaryID
                       select new RegionViewModel { ID = boundariesDetail.RegionBoundaryID, Latitude = boundariesDetail.lat.Value, Longitude = boundariesDetail.@long.Value, RegionID = boundaryID.RegionID };
 regionBoudaries.OrderBy(region => region.RegionID).ThenBy(region => region.ID); 
```

但是，我从 LINQ 得到的结果与 SQL 语句的结果不同。我在 LINQ 语句中哪里错了？谢谢你。

**编辑**：不同之处在于我的结果出现的顺序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:52:29.403

这应该产生相同的查询：

```
var context = new DataClassesRegionDataContext();
var regionBoudaries = from rb in context.Region_Boundaries
                      join b in context.RegionBoundaries 
                           on rb.BoundaryID equals b.RegionBoundaryID
                      orderby rb.RegionID, b.RegionBoundaryID // ordering here
                      select new RegionViewModel { 
                           ID = b.RegionBoundaryID, 
                           Latitude = b.lat.Value, // what if null?
                           Longitude = b.@long.Value, // what if null?
                           RegionID = rb.RegionID 
                      }; 
```

顺便说一句，表名和变量名很糟糕。仅下划线不同的两个表！变量boundaryID 的名称看起来像某个整数（或其他身份类型）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T17:52:45.740

一个问题是*返回*`OrderBy`有序枚举，它们不会*修改*底层枚举，所以你应该使用：`ThenBy`

 **```
var regionBoudaries = from boundaryID in context.Region_Boundaries
                       join boundariesDetail in context.RegionBoundaries on boundaryID.BoundaryID equals boundariesDetail.RegionBoundaryID
                       select new RegionViewModel { ID = boundariesDetail.RegionBoundaryID, Latitude = boundariesDetail.lat.Value, Longitude = boundariesDetail.@long.Value, RegionID = boundaryID.RegionID };
regionBoudaries = regionBoudaries.OrderBy(region => region.RegionID).ThenBy(region => region.ID); 
```**

# tcp - 找出TCP断开后的点（最新发送的字节）

> ID：15142220
> 
> 赞同：0
> 
> 时间：2013-02-28T17:48:08.737
> 
> 标签：tcp, network-programming, xml-rpc, xmlrpclib

我想知道是否有可能找出服务器使用 TCP 连接发送给客户端的最后一个字节。详细地说，我有一个客户端和一个服务器，都是用 C++ 编写的。他们正在使用 XMLRPC 进行通信，并且连接是 TCP。客户端可以向服务器发送一个大请求，由于一些计算，服务器可能需要一些时间来回复。在连接的任何部分，如果断开连接，整个过程都应该从头开始，这会导致服务器容易受到 DoS 攻击。

我的问题是我是否可以弄清楚连接断开的位置，以便在重新建立连接后（对于使用某些标识的同一客户端），服务器可以发送前一个请求的剩余字节，而不是再次处理请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:51:38.323

您应该将该支持编码到您的协议中。例如，将响应分成 4096 字节的块；然后客户端可以重新连接并说：“我收到了前 19 个块，请继续第 20 个块！”

# c# - Win RT 将 XML 反序列化为对象

> ID：15142223
> 
> 赞同：0
> 
> 时间：2013-02-28T17:48:19.227
> 
> 标签：c#, xml, windows-8, windows-runtime, xml-deserialization

我有一堂课可以为顾问提供一些详细信息：

```
namespace MortgageApp_2
{
[KnownType(typeof(MortgageApp_2.AdviserDetails))]
[DataContractAttribute]
public class AdviserDetails
{
    [DataMember()]
    public string Consultant { get; set; }

    [DataMember()]
    public string Company { get; set; }

    [DataMember()]
    public string AddressOne { get; set; }

    [DataMember()]
    public string AddressTwo { get; set; }

    [DataMember()]
    public string City { get; set; }

    [DataMember()]
    public string County { get; set; }

    [DataMember()]
    public string Postcode { get; set; }

    [DataMember()]
    public string Telephone { get; set; }

}
} 
```

以下代码将 AdviserDetails 消毒为 XML：

```
 StorageFolder folder = ApplicationData.Current.LocalFolder;
        string fileName = "AdviserDetails.xml";
        CreationCollisionOption options = CreationCollisionOption.ReplaceExisting;

        try
        {
            var file = await folder.CreateFileAsync(fileName, options);

            using (var stream = await file.OpenStreamForWriteAsync())
            {
                var ser = new DataContractSerializer(typeof(AdviserDetails));
                ser.WriteObject(stream, adDetails);
            }
        }
        catch (Exception ex)
        {
            System.Diagnostics.Debug.WriteLine(ex.ToString());

            if (Debugger.IsAttached)
                Debugger.Break();

            throw;
        } 
```

创建的 XML 文件如下所示：

```
<AdviserDetails xmlns="http://schemas.datacontract.org/2004/07/MortgageApp_2" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><AddressOne>242 Office Block</AddressOne><AddressTwo>32 Hill Street</AddressTwo><City>Birmingham</City><Company>Best Mortgages</Company><Consultant>Bill Jones</Consultant><County>West Midlands</County><Postcode>B1 1AB</Postcode><Telephone>05100021300</Telephone></AdviserDetails> 
```

然后使用以下代码将 XML 反序列化为 AdviserDetails 类型的对象：

```
 StorageFolder folder = ApplicationData.Current.LocalFolder;
        string fileName = "AdviserDetails.xml";
        string location = folder.Path + "\\" + fileName;
        var file = await StorageFile.GetFileFromPathAsync(location).AsTask().ConfigureAwait(false);
        var stream = await file.OpenStreamForReadAsync().ConfigureAwait(false);

        var serializer = new XmlSerializer(typeof(AdviserDetails));
        var loadAdviser = (AdviserDetails)serializer.Deserialize(stream.AsInputStream().AsStreamForRead()); 
```

但是，最后一行：

```
var loadAdviser = (AdviserDetails)serializer.Deserialize(stream.AsInputStream().AsStreamForRead()); 
```

抛出异常：

> XML 文档 (1, 2) 中存在错误。

有谁知道出了什么问题，以及如何让我的应用程序创建一个它可以读取的 XMl 文件？

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:05:42.613

试试这样：

**序列化器：**

```
 static async private Task SaveAsync<T>()
    {
        StorageFile sessionFile = await ApplicationData.Current.LocalFolder.CreateFileAsync(filename, CreationCollisionOption.ReplaceExisting);
        IRandomAccessStream sessionRandomAccess = await sessionFile.OpenAsync(FileAccessMode.ReadWrite);
        IOutputStream sessionOutputStream = sessionRandomAccess.GetOutputStreamAt(0);
        var sessionSerializer = new DataContractSerializer(typeof(List<object>), new Type[] { typeof(T) });
        sessionSerializer.WriteObject(sessionOutputStream.AsStreamForWrite(), _data);
        await sessionOutputStream.FlushAsync();
    } 
```

**解串器：**

```
 static async private Task RestoreAsync<T>()
    {
        StorageFile sessionFile = await ApplicationData.Current.LocalFolder.CreateFileAsync(filename, CreationCollisionOption.OpenIfExists);
        if (sessionFile == null)
        {
            return;
        }
        IInputStream sessionInputStream = await sessionFile.OpenReadAsync();
        var sessionSerializer = new DataContractSerializer(typeof(List<object>), new Type[] { typeof(T) });
        _data = (List<object>)sessionSerializer.ReadObject(sessionInputStream.AsStreamForRead());
    } 
```

工作示例：[这里](http://www.irisclasson.com/2012/07/09/example-metro-app-winrt-serializing-and-deseralizing-objects-to-storagefile-and-localfolder-using-generics-and-asyncawait-threading/)

# php - 从文件内容返回索引位置

> ID：15142229
> 
> 赞同：0
> 
> 时间：2013-02-28T17:48:36.810
> 
> 标签：php, python, python-3.x

我正在尝试从 WAV 文件返回索引位置。

如果在大海捞针中找到针内容，那么我需要返回大海捞针中针的索引位置。

```
haystack = open("haystack.wav",'r').read()
needle = open("needle.wav",'r').read()

print(haystack.index(needle[:46])); 
```

我收到一个错误：

```
Traceback (most recent call last):
  File "test.py", line 1, in <module>
    haystack = open("haystack.wav",'r').read()
  File "C:\Python33\lib\encodings\cp1252.py", line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 5: character maps to <undefined> 
```

当我在 PHP 中执行此操作时，它可以工作：

```
$needle = file_get_contents("needle.wav", false, null, 46);
$haystack = file_get_contents("haystack.wav");
echo strpos($haystack,$needle); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:54:12.430

如果您在 Python 3 下使用*二进制*文件读取文件，您将获得对象。然后你可以使用：`'rb'``bytes``.index`

```
haystack = open("haystack.wav", 'rb').read()
needle = open("needle.wav", 'rb').read()

print(haystack.index(needle[:46])) 
```

例子：

```
>>> b'hello world'.index(b'world')
6
>>> b'hello world'.index(b'goodbye')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: substring not found 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:58:22.083

这有点混乱，因为 python 将字节与整数交换的方式取决于它们在对象中的访问方式。 [这里有一点](http://mail.python.org/pipermail/python-bugs-list/2010-May/099292.html)。我通过将 mp3 文件两次写入新文件来测试这一点。一项观察是，如果您的针中有元数据，则需要在与更长的文件进行比较之前将其剥离。在我的例子中，needle 已经“用蹩脚的 #... 编码”。如果您要将整个 mp3 与更长的 mp3 匹配，则不会匹配。

```
def findneedle(bin1, bin2):
  with open(bin2,'rb') as haystack:
    with open(bin1,'rb') as needle:
      n = needle.read()
      h = []
      EOF = None
      while EOF != b'':
        EOF = haystack.read(1000)
        h.append(EOF)
        if (n in b''.join(h)):
          h = h[:-1]
          haystack.seek(haystack.tell() - 1000)
          while EOF != b'':
            EOF = haystack.read(1)
            h.append(EOF)
            if (n in b''.join(h)):
              return haystack.tell() - len(n)

index = findneedle('a.mp3','b.mp3') 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T18:18:58.230

`haystack = open("haystack.wav",'rb').read()`就足够了。但是，我从未尝试在 php 中读取 .wav 文件，所以我不知道 python 和 php 是否具有相同的二进制编码结构。

```
>>> a = open("A24.wav", "rb").read()
>>> a[:100]
'RIFF\xf4\xe9\x01\x00WAVEfmt \x10\x00\x00\x00\x01\x00\x01\x00D\xac\x00\x00\x88X\x01\x00\x02\x00\x10\x00data\xd0\xe9\x01\x00\xff\xff\x01\x00\xff\xff\x01\x00\xff\xff\x01\x00\xff\xff\x01\x00\xff\xff\x01\x00\xfe\xff\x04\x00\xfc\xff\x04\x00\xfc\xff\x02\x00\x00\x00\xfe\xff\x04\x00\xfb\xff\x05\x00\xfc\xff\x02\x00\xff\xff\x00\x00\x01\x00\xfe\xff\x04\x00'
>>> 
```

并且您想在“haystack”中找到与“needle”中的字符串匹配的字符串索引，您可以使用正则表达式来做到这一点：

```
import re

haystack = open("haystack.wav", "rb").read()
needle = open("needle.wav", "rb").read()

regex = re.compile(needle[:46])
match = regex.search(haystack)

if match:
    print match.start() 
```

# ios - 在对象“我创建的类的名称”上找不到属性，并且视图控制器无法识别其中定义的方法

> ID：15142233
> 
> 赞同：0
> 
> 时间：2013-02-28T17:48:45.520
> 
> 标签：ios, objective-c

我在计算器应用程序中使用 Xcode 4.6 时遇到三个错误，您能解释一下可能导致它们的原因吗？

这是3个错误

> 在对象类型“CalculatorBrain”上找不到属性“pushElement”，
> 
> 在对象类型 CalculatorviewController 上找不到属性“按下输入”
> 
> 在对象类型“CalculatorBrain”上找不到属性“执行操作”

这是我在其中遇到错误的代码的一部分`CalculatorviewController.m`

```
- (IBAction)enterPressed:(UIButton*)sender {
    [_Brain.pushElement :self.display.text];       ......first error ....
    userIntheMiddleOfEnteringText= NO; 
}

- (IBAction)operationPressed:(UIButton *)sender {
    if (userIntheMiddleOfEnteringText)
        self.enterPressed;                     ........second error.....

    else {
        double result = [_Brain.performOperation];        ... third error...
        self.display.text=[NSString   stringWithFormat:@"%g",result];
    }

} 
```

`CalculatorBrain.m`代码是

```
#import "CalculatorBrain.h"

@implementation CalculatorBrain

-(void)pushElement:(double)operand {
    NSNumber *operandObject=[NSNumber numberWithDouble:operand];

    [self.stack addObject:operandObject];
}

-(double) popElement {
    NSNumber *popedNumber=[self.stack lastObject];
    if (popedNumber)
    {
        [_stack removeLastObject];
    }

    return [popedNumber doubleValue];
}

-(double)performOperation:(NSString*)operation {
    double  result = 0;
    if( [operation isEqualToString: @"+"]){
        result  =self. popElement + self.popElement;
    }
    else if ([operation isEqualToString:  @"*"]){
        result=self.popElement*self.popElement;
    }
    else if ([operation isEqualToString:@"-" ]) {
        double operand=self.popElement;
        result=self.popElement - operand ;
    }
    else if ([operation isEqualToString:@"/"]) {
        double divisor =self.popElement;
        result= self.popElement/ divisor;
    }

    return result;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:02:18.777

所有三个错误都是简单的错误，表明您还不了解 Objective-C 的基础知识。你需要先学习语言。学习如何调用方法和传递参数。

第一个错误：

```
[_Brain.pushElement :self.display.text]; 
```

这应该是：

```
[_Brain pushElement:self.display.text]; 
```

在这里，您要调用对象`pushElement:`上的方法`_Brain`。

第二个错误：

```
self.enterPressed; 
```

这表明您正在尝试访问名为`enterPressed`on的属性`self`。但是没有这样的属性。有一个名为的方法`enterPressed:`，它以 a`UIButton`作为参数。所以你需要这样称呼它：

```
[self enterPress:sender]; 
```

第三个错误：

```
double result = [_Brain.performOperation]; 
```

在这里，您想调用该`performOperation`方法，但没有。有一个名为 的方法`performOperation:`。这需要一个类型的参数`NSString`。它必须像这样调用：

```
double result = [_Brain performOperation:@"some operation"]; 
```

这里缺少的部分是您希望通过的操作。没有明显的迹象表明它来自哪里。也许是按钮标题。

# objective-c - 如何在可可中创建和使用包？

> ID：15142235
> 
> 赞同：0
> 
> 时间：2013-02-28T17:48:49.073
> 
> 标签：objective-c, macos, cocoa, bundle

我有一个使用外部 unix 可执行文件编写的应用程序。它需要运行此文件以获取进一步处理所需的一些数据。

现在这个可执行文件位于我的项目文件夹中，为了在我的应用程序中使用它，我已经硬编码了它的路径（这很糟糕）。

我听说要避免这种硬编码路径问题，可以使用捆绑包。

任何人都可以向我解释这是否是实现我想要的最佳方式，并指导我如何做到这一点？！

我已经查看了关于 stackoverflow 的类似问题并通过了这个： [https ://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFBundles/Introduction/Introduction.html#//apple_ref/doc/uid/ 10000123i](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFBundles/Introduction/Introduction.html#//apple_ref/doc/uid/10000123i)

到目前为止它并没有真正帮助我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:24:44.923

您使用 NSBundle 对象来定位您的可执行文件。您首先使用`[NSBundle mainBundle]`. 根据您放置 Unix 工具的位置，您可以使用 NSFundle`pathForAuxiliaryExecutable:`或`pathForResource:ofType:`找到可执行文件。

例如，如果您的 Unix 工具位于应用程序包的 Resources 文件夹中，您可以执行以下操作：

```
 NSString* toolPath = [[NSBundle mainBunble] pathForResource:@"toolname" ofType:nil] 
```

# c# - EntityFramework 不刷新导航属性

> ID：15142237
> 
> 赞同：0
> 
> 时间：2013-02-28T17:49:06.817
> 
> 标签：c#, .net, entity-framework-4

我有一个简单的关系

![在此处输入图像描述](../Images/62d23366e19ff8e3422b0b206edbff5e.png)

我用上面的模型创建了一个简单的应用程序。每次 DB 更改时，都必须更新应用程序中的模型。我可以通过调用 GetDBChanges 存储过程来获取最新的更改。（见方法 T1Elapsed）

这是应用程序：

```
class Program
{
    private static int? _lastDbChangeId;
    private static readonly MASR2Entities Model = new MASR2Entities();
    private static readonly Timer T1 = new Timer(1000);
    private static readonly Timer T2 = new Timer(1000);
    private static Strategy _strategy = null;

    static void Main(string[] args)
    {
        using (var ctx = new MASR2Entities())
        {
            _lastDbChangeId = ctx.GetLastDbChangeId().SingleOrDefault();
        }
        _strategy = Model.Strategies.FirstOrDefault(st => st.StrategyId == 224);

        T1.Elapsed += T1Elapsed;
        T1.Start();

        T2.Elapsed += T2Elapsed;
        T2.Start();

        Console.ReadLine();
    }

    static void T2Elapsed(object sender, ElapsedEventArgs e)
    {
        Console.WriteLine("All rules: " + Model.StrategyRules.Count());
        Console.WriteLine("Strategy: name=" + _strategy.Name + " RulesCount=" + _strategy.StrategyRules.Count);
    }

    private static void T1Elapsed(object sender, ElapsedEventArgs e)
    {
        T1.Stop();
        try
        {
            using (var ctx = new MASR2Entities())
            {
                var changes = ctx.GetDBChanges(_lastDbChangeId).ToList();
                foreach (var dbChange in changes)
                {
                    Console.WriteLine("DbChangeId:{0} {1} {2} {3}", dbChange.DbChangeId, dbChange.Action, dbChange.TableName, dbChange.TablePK);
                    switch (dbChange.TableName)
                    {
                        case "Strategies":
                            {
                                var id = Convert.ToInt32(dbChange.TablePK.Replace("StrategyId=", ""));
                                Model.Refresh(RefreshMode.StoreWins, Model.Strategies.AsEnumerable());
                            }
                            break;
                        case "StrategyRules":
                            {
                                var id = Convert.ToInt32(dbChange.TablePK.Replace("StrategyRuleId=", ""));
                                Model.Refresh(RefreshMode.StoreWins, Model.StrategyRules.AsEnumerable());
                            }
                            break;
                    }
                    _lastDbChangeId = dbChange.DbChangeId;
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine("ERROR: " + ex.Message);
        }
        finally
        {
            T1.Start();
        }
    }
} 
```

当我运行它时，这是一个示例输出：

```
All rules: 222
Strategy: name=Blabla2 RulesCount=6 
```

然后我在子表中添加一行（策略规则），

```
DbChangeId:1713 I StrategyRules StrategyRuleId=811
All rules: 223
Strategy: name=Blabla2 RulesCount=7 
```

最后，我从 StrategyRules 中删除该行

```
DbChangeId:1714 D StrategyRules StrategyRuleId=811
All rules: 222
Strategy: name=Blabla2 RulesCount=7 
```

为什么 RulesCount 还是 7？如何强制 EF 刷新“导航属性”？

我在这里缺少什么？

**---编辑---**涵盖Slauma的答案

```
case "StrategyRules":
{
   var id = Convert.ToInt32(dbChange.TablePK.Replace("StrategyRuleId=", ""));
   if (dbChange.Action == "I")
   {
       //Model.Refresh(RefreshMode.StoreWins, Model.StrategyRules.AsEnumerable());       
   }
   else if (dbChange.Action == "D")
   {
      var deletedRule1 = Model.StrategyRules.SingleOrDefault(sr => sr.Id == id); 
      //the above one is NULL as expected

      var deletedRule2 = _strategy.StrategyRules.SingleOrDefault(sr => sr.Id == id);
      //but this one is not NULL - very strange, because _strategy is in the same context
      //_strategy = Model.Strategies.FirstOrDefault(st => st.StrategyId == 224);
   }  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:05:04.027

`ObjectContext.Refresh`刷新您传递给方法的实体的标量属性[以及引用相关实体的任何键](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/3d9e5d1f-18fb-4c71-a304-7ef9e25339f6/)。如果您传递给该方法的实体在数据库中不再存在，因为它同时已被删除，则`Refresh`对附加的实体没有任何作用，只是忽略它。（这是我的猜测，但我无法解释为什么您 1）没有出现异常`Refresh`（例如“无法刷新实体，因为它已被删除”）和 2）实体显然仍附加到上下文.)

您的 Insert 案例不起作用，因为您调用`Refresh`了它，但它起作用了，因为您在这一行将整个`StrategyRules`表加载到内存中：

```
Model.Refresh(RefreshMode.StoreWins, Model.StrategyRules.AsEnumerable()) 
```

`Refresh`在内部枚举第二个参数中的集合。通过开始迭代，它会触发只是`Model.StrategyRules`= 加载整个表的查询。`AsEnumerable()`只是从 LINQ-to-Entities 到 LINQ-to-Objects 的切换，也就是说，您将应用的每个 LINQ 运算符都`AsEnumerable()`在内存中执行，而不是在数据库中执行。由于您不应用任何内容，`AsEnumerable()`因此实际上对您的查询没有影响。

因为您加载了整个表格，所以最近插入的表格也`StrategyRule`将被加载，并且将一起加载`_strategy`实体的键。的`ObjectContext`自动 关系 修复 建立 与 导航 集合`_strategy`的`_strategy.StrategyRules.Count`关系`7`. （您可以删除`Refresh`呼叫并直接呼叫`Model.StrategyRules.ToList()`，结果仍然是`7`。）

现在，这一切都不适用于删除案例。您仍会运行查询以从数据库加载整个`StrategyRules`表，但 EF 不会再从上下文中删除或分离不在结果集中的实体。（据我所知，没有强制这种自动删除的选项。）被删除的实体仍在上下文中，其键引用`strategy`并且计数将保持不变`7`。

我想知道的是，为什么您不利用您的一组`DBChanges`明显知道该属性中已删除的确切内容`dbChange.TablePK`。`Refresh`你不能使用类似的东西，而不是使用：

```
case "StrategyRules":
{
    switch (dbChange.Action)
    {
        case "D":
        {
            var removedStrategyRule = _strategy.StrategyRules
                .SingleOrDefault(sr => sr.Id == dbChange.TablePK);
            if (removedStrategyRule != null)
                _strategy.StrategyRules.Remove(removedStrategyRule);
        }
        break;

        case ...
    }
}
break; 
```

# r - Rstem和sentiment包安装问题

> ID：15142243
> 
> 赞同：1
> 
> 时间：2013-02-28T17:49:30.397
> 
> 标签：r, twitter, sentiment-analysis

似乎没有`Rstem`和`sentiment`包装的 twitter 情绪分析是困难的。我正在尝试`Rstem`使用 tar.gz 文件安装这个和情感包（因为在 omegahat 或 Timothy P. Jurka 的 github 中没有可用的 Windows 二进制文件），但它给出了一个错误：

> 软件包“Rstem”的安装具有非零退出状态

我什至尝试了命令提示符。这给出了以下错误。任何线索如何解决它？我的系统是 Windows 7，R 2.15，Rstudio。

```
 D:\R Projects>R CMD INSTALL Rstem_0.4-1.tar.gz
* installing to library 'D:/R-Econometrics/R-2.15.1/library'
* installing *source* package 'Rstem' ...
** libs

*** arch - i386
D:/R-Econometrics/R-2.15.1/etc/i386/Makeconf:194: warning: overriding recipe for
 target `.m.o'
D:/R-Econometrics/R-2.15.1/etc/i386/Makeconf:187: warning: ignoring old recipe f
or target `.m.o'
gcc  -I"D:/R-Econometrics/R-2.15.1/include" -DNDEBUG -I. -I../Snowball/q
 -O3 -Wall  -std=gnu99 -mtune=core2 -c api.c -o api.o
gcc  -I"D:/R-Econometrics/R-2.15.1/include" -DNDEBUG -I. -I../Snowball/q
 -O3 -Wall  -std=gnu99 -mtune=core2 -c danish_stem.c -o danish_stem.o
gcc  -I"D:/R-Econometrics/R-2.15.1/include" -DNDEBUG -I. -I../Snowball/q
 -O3 -Wall  -std=gnu99 -mtune=core2 -c dutch_stem.c -o dutch_stem.o
gcc  -I"D:/R-Econometrics/R-2.15.1/include" -DNDEBUG -I. -I../Snowball/q
 -O3 -Wall  -std=gnu99 -mtune=core2 -c english_stem.c -o english_stem.o
english_stem.c: In function 'r_prelude':
english_stem.c:376:5: warning: label 'lab1' defined but not used
gcc  -I"D:/R-Econometrics/R-2.15.1/include" -DNDEBUG -I. -I../Snowball/q
 -O3 -Wall  -std=gnu99 -mtune=core2 -c finnish_stem.c -o finnish_stem.o
finnish_stem.c: In function 'r_case':
finnish_stem.c:448:21: warning: unused variable 'm'
gcc  -I"D:/R-Econometrics/R-2.15.1/include" -DNDEBUG -I. -I../Snowball/q
 -O3 -Wall  -std=gnu99 -mtune=core2 -c french_stem.c -o french_stem.o
french_stem.c: In function 'french_stem':
french_stem.c:951:25: warning: unused variable 'm'
gcc  -I"D:/R-Econometrics/R-2.15.1/include" -DNDEBUG -I. -I../Snowball/q
 -O3 -Wall  -std=gnu99 -mtune=core2 -c german_stem.c -o german_stem.o
gcc  -I"D:/R-Econometrics/R-2.15.1/include" -DNDEBUG -I. -I../Snowball/q
 -O3 -Wall  -std=gnu99 -mtune=core2 -c mytest.c -o mytest.o
mytest.c: In function 'S_stemWords':
mytest.c:76:3: warning: pointer targets in passing argument 1 of 'Rf_mkChar' dif
fer in signedness
D:/R-Econometrics/R-2.15.1/include/Rinternals.h:628:6: note: expected 'const cha
r *' but argument is of type 'symbol *'
gcc  -I"D:/R-Econometrics/R-2.15.1/include" -DNDEBUG -I. -I../Snowball/q
 -O3 -Wall  -std=gnu99 -mtune=core2 -c norwegian_stem.c -o norwegian_stem.o
gcc  -I"D:/R-Econometrics/R-2.15.1/include" -DNDEBUG -I. -I../Snowball/q
 -O3 -Wall  -std=gnu99 -mtune=core2 -c portuguese_stem.c -o portuguese_stem.o
gcc  -I"D:/R-Econometrics/R-2.15.1/include" -DNDEBUG -I. -I../Snowball/q
 -O3 -Wall  -std=gnu99 -mtune=core2 -c russian_stem.c -o russian_stem.o
gcc  -I"D:/R-Econometrics/R-2.15.1/include" -DNDEBUG -I. -I../Snowball/q
 -O3 -Wall  -std=gnu99 -mtune=core2 -c spanish_stem.c -o spanish_stem.o
gcc  -I"D:/R-Econometrics/R-2.15.1/include" -DNDEBUG -I. -I../Snowball/q
 -O3 -Wall  -std=gnu99 -mtune=core2 -c swedish_stem.c -o swedish_stem.o
gcc  -I"D:/R-Econometrics/R-2.15.1/include" -DNDEBUG -I. -I../Snowball/q
 -O3 -Wall  -std=gnu99 -mtune=core2 -c utilities.c -o utilities.o
process_begin: CreateProcess(NULL, basename Rstem.dll .dll, ...) failed.
process_begin: CreateProcess(NULL, basename Rstem.dll .dll, ...) failed.
process_begin: CreateProcess(NULL, basename Rstem.dll .dll, ...) failed.
"zapi.o danish_stem.o dutch_stem.o english_stem.o finnish_stem.o french_stem.o g
erman_stem.o mytest.o norwegian_stem.o portuguese_stem.o russian_stem.o spanish_
stem.o swedish_stem.o utilities.o" was unexpected at this time.
make: *** [Rstem.dll] Error 255
ERROR: compilation failed for package 'Rstem'
* removing 'D:/R-Econometrics/R-2.15.1/library/Rstem' 
```

# r - 优化 r 中函数的函数

> ID：15142246
> 
> 赞同：6
> 
> 时间：2013-02-28T17:49:33.473
> 
> 标签：r, optimization, minimize

我想最小化建模和观察到的价差之间的均方误差（可能使用包中`mse()`的）。`hydroGOF`函数定义为：

```
 KV_CDS <- function(Lambda, s, sigma_S){
     KV_CDS = (Lambda * (1 + s)) / exp(-s * sigma_S) - Lambda^2)
} 
```

目标是`mse`通过在 KV_CDS 函数中为 Lambda 保留一个自由参数来最小化 KV_CDS 和 C 之间的值。

```
df <- data.frame(C=c(1,1,1,2,2,3,4),
                 Lambda=c(0.5),s=c(1:7),
                 sigma_S=c(0.5,0.4,0.3,0.7,0.4,0.5,0.8),
                 d=c(20,30,40,50,60,70,80), 
                 sigma_B=0.3, t=5, Rec=0.5, r=0.05) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:46:23.843

您需要编写一个函数来最小化计算这种特殊情况的均方误差，例如：

```
calcMSE <- function (Lambda) 
{
        d <- df # best not to use -df- as a variable because of confusion with
                # degrees of freedom
        err <- d$C - KV_CDS(Lambda, d$s, d$sigma_S, d$d, d$sigma_B, d$t, d$Rec, d$r)
        sum(err^2) / length(err)
} 
```

...然后您可以使用`optimize()`，例如这样（您需要指定可能值的范围`Lambda`-- 顺便说一句，这不是一个理想的名称，因为它暗示它实际上只是一个变量时可能是一个函数）：

```
optimize(calcMSE,c(0,1)) 
```

我无法完成完整的测试，因为我没有`pbivnorm`安装，但这应该为你完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:42:57.037

感谢西蒙，我找到了一个解决方案：

```
 d <- df

  TestMSE <- function(LR)
    {

     D <- KV_CDS(LR, d$s, d$sigma_s, d$D, d$sigma_B, d$t, d$Rec, d$r)
      mse(d$C, D)
     }

  optimize(TestMSE,lower = 0.1, upper =1.5) 
```

或者：

```
TestMSE2 <- function(LR)
    {
 D <- KV_CDS(LR, d$s, d$sigma_s, d$D, d$sigma_B, d$t, d$Rec, d$r)
      mean((d$C- D)^2)
     }

  optimize(TestMSE2,lower = 0.1, upper =1.5) 
```

谢谢你们的帮助！

# ios - RegexKitLite - iOS：无法识别的选择器

> ID：15142254
> 
> 赞同：-1
> 
> 时间：2013-02-28T17:50:19.257
> 
> 标签：ios, objective-c, cocoa-touch, uikit, regexkitlite

我有一个必须使用正则表达式的项目，所以我决定使用**RegexKitLite**，我下载了它，将*RegexKitLite.m*添加到“编译源”中，并将*RegexKitLite.h 添加*到“复制文件”部分。**将 libicucore.A.dylib**添加到项目库中。*将 RegexKitLite.h*导入我的班级，并编写代码（仅用于测试）：

```
 NSString *str = @"testing string";
        if ([str isMatchedByRegex:@"[^a-zA-Z0-9]"])
        {
            NSLog(@"Some message here");
        } 
```

之后我有错误消息：

```
-[__NSCFString isMatchedByRegex:]: unrecognized selector sent to instance 0x1ed45ac0
2013-02-28 19:46:20.732 TextProject[8467:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString isMatchedByRegex:]: unrecognized selector sent to instance 0x1ed45ac0' 
```

我错过了什么？请帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:38:04.217

经过一番挖掘，实际上在 iOS4 之前没有任何 Cocoa API 可以使用正则表达式，因此程序员正在使用像 RegexKitLite 这样确实可以用于 iOS 的外部库。

如果您使用的是 iOS4 或更高版本，则没有任何理由不使用 NSRegularExpression。类参考描述可以在[这里](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009708-CH1-SW48)找到。

例如，`NSRegularExpression`您的代码片段将如下所示：

```
NSString *str = @"testing string";   
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"[^a-zA-Z0-9]" options:NSRegularExpressionCaseInsensitive error:nil];
NSTextCheckingResult *match = [regex firstMatchInString:str options:0 range:NSMakeRange(0, [str length])];
NSRange range = [match rangeAtIndex:0];
if (range.location != NSNotFound)
{
    NSString* matchingString = [str substringWithRange:range];
    NSLog(@"%@", matchingString);
} 
```

# javascript - 如何在soundcloud javascript api中暂停流式传输

> ID：15142255
> 
> 赞同：3
> 
> 时间：2013-02-28T17:50:19.307
> 
> 标签：javascript, jquery, api, soundcloud, soundmanager2

我想允许声音文件播放和暂停。该文档显示了如何播放流文件：

```
 $("#stream").live("click", function(){      
          SC.stream("/tracks/{'track-id'}", function(sound){
             sound.play();
          }; 
```

它使用声音管理器进行流式传输并使用它的一些对象和方法……比如 .pause()！

所以这是我认为应该工作的代码：

```
 var is_playing="false";

    $("#stream").live("click", function(){

        SC.stream("/tracks/{'track-id'}", function(sound){
            if (is_playing==="true")
                {
                    sound.pause();
                    is_playing = "false";
                    console.log(is_playing);
                }
            else if (is_playing === "false")
                {
                    sound.play();
                    is_playing = "true";
                    console.log(is_playing);
                }

            }); 
```

但是，它会继续播放曲目而不会暂停。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-31T19:12:43.427

```
SC.stream("/tracks/13680213", function(sound) {
    SC.sound = sound;
}); 
```

这意味着您没有在 SC.stream 构造函数中编写事件侦听器，然后您可以随意访问以下（以及更多）：

`SC.sound.play(); SC.sound.pause(); SC.sound.stop(); SC.sound.pause(); SC.sound.playState;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T01:22:05.847

您必须使用`sound.stop();` 还有一个内置功能来切换声音的播放/暂停。用来`sound.togglePause();`做那个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-25T00:14:45.477

```
var is_playing = false;
soundManager.setup({
    url: '/swf/soundmanager2.swf',
    preferFlash: false,
    onready: function() {
        var mySound = soundManager.createSound({
            id: 'aSound',
            url: 'sonidos/sonido1.mp3' ,
            autoplay: false
        });

        $("#stream").live("click", function(){    
            if (is_playing==false){
                    mySound.play();
                    is_playing = true;
                }else if (is_playing== true) {
                    mySound.stop();
                    is_playing = false;
             }
        });
    },
    /*    ontimeout: function() {
    // Hrmm, SM2 could not start. Missing SWF? Flash blocked? Show an error, etc.?
    }*/
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-06T05:39:00.937

只需将您想要触发暂停函数的事件链接到传递给 SC.stream() 回调函数的“声音”对象。

以下代码中的表单接受一个声音云链接，例如这个：[https](https://soundcloud.com/djalmix-1/living-in-stereo-dj-almix) ://soundcloud.com/djalmix-1/living-in-stereo-dj-almix （所以一旦应用程序上线就将其粘贴到表单中并单击加载）。此外，您还必须提供您自己的 client_id，这是 soundcloud 在您注册应用程序时为您提供的，这只需一分钟左右。

```
<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <script src="http://connect.soundcloud.com/sdk.js"></script>
        <script>
            function load_sound() {             
                var track_url = document.getElementById("sc_url").value;
                    SC.initialize({
                        client_id: 'client_id'
                            });
                            SC.get('/resolve', {url: track_url}, function(track) {
                                console.log("the track id is: " + track.id);
                                SC.stream("/tracks/" + track.id, function(sound) {
                                    var is_playing = true;
                                    sound.play();
                                    document.getElementById("stream").onclick = function(){  
                                        if(is_playing === false){
                                            sound.resume();
                                            is_playing = true;
                                        } else if(is_playing === true){
                                            sound.pause();
                                            is_playing = false;
                                        }   
                                    };                                  
                                });
                            });
                        }              
        </script>
        <form>
            <input id="sc_url" type="url">
            <input type="button" onclick="load_sound();" value="load">
        </form>
        <button id="stream">pause/resume</button>
    </body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T20:22:04.880

由于关于这个主题的答案很少，我想我会回答我自己的问题。

我继续下载了 Sound Manager 2 并将必要的文件放在需要的位置（您可以在 Sound manager2 页面的基本教程部分找到它。）

[http://www.schillmania.com/projects/soundmanager2/demo/template/](http://www.schillmania.com/projects/soundmanager2/demo/template/)

诀窍是找到与我想嵌入的用户相关联的 SoundCloud mp3。为此，我必须使用 RESTClient 并输入适当的 api url。它看起来像这样。

[http://api.soundcloud.com/tracks/12758186.json?client_id=](http://api.soundcloud.com/tracks/12758186.json?client_id=) {MyClient_ID_number}

[http://api.soundcloud.com/tracks/](http://api.soundcloud.com/tracks/)是指向音轨 id="12758186" 的通用指针。接下来是我的个人 client_id 的 JSONP 包含，以验证我对 soundcloud 服务器的请求。

获得此网址后，我在浏览器中尝试了它，它使用 HTML5 mp3 播放器将我重定向到**另一个网址**，该播放器会自动播放歌曲。

我从这个 soundcloud 文档中得到了这样做的想法：http: [//developers.soundcloud.com/docs#playing](http://developers.soundcloud.com/docs#playing)

然后，我复制了这个 url，并将原始问题中的代码混合到上面提到的基本教程中（[http://www.schillmania.com/projects/soundmanager2/demo/template/](http://www.schillmania.com/projects/soundmanager2/demo/template/)）。

最终代码：

```
 var is_playing = false;

            $("#stream").live("click", function(){
                soundManager.setup({
                  url: './swf/soundmanager2.swf',
                  onready: function() {
                    var mySound = soundManager.createSound({
                      id: 'aSound',
                      url: {**another url**},
                      autoplay: false
                    });
                    if (is_playing===false)
                        {
                            mySound.play();
                            is_playing = true;
                        }
                    else if (is_playing=== true)    
                        {
                            mySound.stop();
                            is_playing = false;
                        }

                  },
                  ontimeout: function() {
                    // Hrmm, SM2 could not start. Missing SWF? Flash blocked? Show an error, etc.?
                  }
                });
            }); 
```

# html - 防止在移动网站上缩放不起作用

> ID：15142257
> 
> 赞同：1
> 
> 时间：2013-02-28T17:50:27.060
> 
> 标签：html, ios, mobile, zooming

我在[Isotope Labs](http://isotopelabs.co.uk/)有我的网站。

它使用媒体查询来检测移动设备并设置正文宽度为 100% 的移动设备样式表 (mobile.css)。

scripts.js 文件也禁用了移动设备的 jQuery 脚本。

一切正常，除了我似乎无法正确禁用移动设备上的缩放。

我在我的 HTML 头中使用了以下内容（在尝试了很多替代方案之后）来禁用移动缩放：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimum-scale=1" /> 
```

在 iOS 和适用于 Android 的 Chrome Mobile 上，它仍然允许缩放。它确实应用了移动样式表，但看起来不太正确（文本显得太小）。

它实际上适用于 Android 的股票浏览器，尽管每次点击刷新时，它都会在看起来正确和行为与 Chrome 和 iOS 完全相同之间交替。

我已经浏览并删除了头部的所有内容，但即使我去掉了所有的 javascript 和 CSS，它仍然允许缩放。

这让我发疯。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:06:16.377

您似乎在子框架中设置元标记，而不是根页面。直接查看整页框架 url 时，会阻止缩放。

# vb.net - 我可以通过 FTP 使用后台智能传输服务吗？

> ID：15142258
> 
> 赞同：1
> 
> 时间：2013-02-28T17:50:32.993
> 
> 标签：vb.net, http, ftp, sftp

我正在编写一个从许多小型服务器获取数据的应用程序（“服务器”是数据记录器，应用程序使用来自记录器的数据）。数据作为文件存在于服务器上，我一直在使用 SSH FTP 来获取文件。具体来说，我正在[为 WinSCP 使用 .NET 包装器](http://winscp.net/eng/docs/library)

我遇到了一些问题，一些传输失败（而 Filezilla 成功）并且它不报告进度。此外，由于服务器的带宽有限，下载可能会很长。所以我想使用 BITS 进行传输，但似乎这只适用于 HTTP。我可以切换到 HTTP，但我目前通过比较服务器和本地缓存上的文件大小和日期来检查需要下载的内容。使用 HTTP 似乎不可能。

有没有办法使用 BITS 和 FTP？或者有没有办法用 HTTP 检查需要下载的内容？

我可以完全控制服务器。他们目前运行 Linux 和 OpenSSH 以促进传输。我正在为应用程序使用 VB 和 .NET 框架 4.0。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:56:10.883

您可以将 System.Net.HttpWebRequest 用于请求方法为“HEAD”的 Web URL。然后，您可以获取 System.Net.HttpWebResponse 并检查响应的 ContentLength 和 LastModified 属性以与本地缓存进行比较。例如

```
dim request as System.Net.HttpWebRequest
request=System.Net.HttpWebRequest.Create("http://...")
request.Method="HEAD"
dim response as System.Net.HttpWebResponse=request.GetResponse
dim fileLength as integer=response.ContentLength
dim fileDate as datetime=response.LastModified 
```

显然，您需要捕获异常，因为如果文件不存在或服务器不可用等，GetResponse 可能不喜欢它。

希望这会有所帮助，问候，丹佛

# android - Android：LinearLayout 未出现在 ScrollView 下方

> ID：15142261
> 
> 赞同：0
> 
> 时间：2013-02-28T17:50:44.100
> 
> 标签：android, xml, scrollview, android-linearlayout

尝试让一些按钮出现在我正在组合的应用程序中的 srcollview 下方时遇到了一些问题。

带有按钮的底部 LinearLayout 根本不会出现在屏幕上，这无疑是显而易见的，但我现在被难住了。我认为通过使用 RelativeLayout 作为主页的父级，然后使用 android:layout_below 属性，我可以很容易地定位它们？

```
<?xml version="1.0" encoding="utf-8"?>
 <!-- ViewFlipper -->
        <ViewFlipper
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/ViewFlipper01"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            >
<!-- Page 1 (Splash) -->
     <LinearLayout
          android:id="@+id/splashPage"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:orientation="vertical" >
           <TextView
           android:id="@+id/splash"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent" 
           android:text="Display Splash Image"/>
     </LinearLayout>
<!-- Page 2 (Main) -->
    <RelativeLayout
        android:id="@+id/mainPage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical">
        <LinearLayout
        android:id="@+id/header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" 
        android:layout_below="@+id/mainPage"
        >
                <TextView
               android:id="@+id/date"
               android:layout_width="fill_parent"
               android:layout_height="wrap_content" 
               android:gravity="center_horizontal" />
        </LinearLayout>
        <ScrollView
        android:id="@+id/scrollView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:layout_below="@+id/header"
        >
              <TableLayout
               android:id="@+id/tableHolder"
               android:layout_width="fill_parent"
               android:layout_height="wrap_content" >
                    <!-- Dynamic TextViews Will Go In Here -->
              </TableLayout>
        </ScrollView>
        <LinearLayout
        android:id="@+id/buttonHolder"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_below="@+id/scrollView" 
        >
          <Button
           android:id="@+id/previous"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="Previous" />
          <Button
           android:id="@+id/next"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="Next" />
        </LinearLayout>
    </RelativeLayout>   
 </ViewFlipper> 
 <!-- End of ViewFlipper --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:56:00.987

添加`android:layout_alignParentBottom="true"`到底部`LinearLayout`。可能是您的滚动视图正在消耗所有可用空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:58:54.637

现在就试试

```
 <?xml version="1.0" encoding="utf-8"?>
     <!-- ViewFlipper -->
            <ViewFlipper
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/ViewFlipper01"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                >
    <!-- Page 1 (Splash) -->
         <LinearLayout
              android:id="@+id/splashPage"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:orientation="vertical" >
               <TextView
               android:id="@+id/splash"
               android:layout_width="fill_parent"
               android:layout_height="fill_parent" 
               android:text="Display Splash Image"/>
         </LinearLayout>
    <!-- Page 2 (Main) -->
        <RelativeLayout
            android:id="@+id/mainPage"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical">
            <LinearLayout
            android:id="@+id/header"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" 
            android:layout_below="@+id/mainPage"
            >
                    <TextView
                   android:id="@+id/date"
                   android:layout_width="fill_parent"
                   android:layout_height="wrap_content" 
                   android:gravity="center_horizontal" />
            </LinearLayout>
            <ScrollView
            android:id="@+id/scrollView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
    android:layout_above="@+id/buttonHolder"
            android:layout_below="@+id/header"
            >
                  <TableLayout
                   android:id="@+id/tableHolder"
                   android:layout_width="fill_parent"
                   android:layout_height="wrap_content" >
                        <!-- Dynamic TextViews Will Go In Here -->
                  </TableLayout>
            </ScrollView>
            <LinearLayout
            android:id="@+id/buttonHolder"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
            android:orientation="horizontal"
            android:layout_below="@+id/scrollView" 
            >
              <Button
               android:id="@+id/previous"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:text="Previous" />
              <Button
               android:id="@+id/next"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:text="Next" />
            </LinearLayout>
        </RelativeLayout>   
     </ViewFlipper> 
     <!-- End of ViewFlipper --> 
```

# django-cms - django cms + zinnia / 在 cms 页面中显示 zinnia 条目

> ID：15142265
> 
> 赞同：1
> 
> 时间：2013-02-28T17:50:57.313
> 
> 标签：django-cms, zinnia

我设置了 Django CMS 和 Zinnia，工作正常。现在我想在首页显示最新的 Zinnia 帖子的内容。

```
{% get_recent_entries 1 %} 
```

将以上内容添加到我的模板将显示链接到内容页面的帖子的标题。但我希望内容本身立即显示出来，我不关心完整条目的链接。有没有办法在模板中做到这一点，如果有，怎么做？还是我需要编写自己的代码？

这是我的第一个 Django 项目，所以请放轻松，好的 =)

# c++ - 如何在 C++ 中生成中断处理程序的编译时数组？

> ID：15142266
> 
> 赞同：5
> 
> 时间：2013-02-28T17:51:04.500
> 
> 标签：c++

我希望能够在一个地方编写我的 ISR：

```
some_collection TimerHandlers;    

// added to ISR table in linker script
void rawTimerIRQHandler() {
    call_each_handler_in(handlers);
} 
```

这样我就可以在其他文件中注册处理程序

```
// file1.cpp
void ledTimerHandler1() {

}
register(ledTimerHandler1); //or in an init function if not possible here 
```

```
// file2.cpp
void ledTimerHandler2() {

}
register(ledTimerHandler2); //or in an init function if not possible here 
```

当硬件跳转到 时，`rawTimerIRQHandler`它会以任意顺序执行。`ledTimerHandler1``ledTimerHandler2`

* * *

显然，我可以使用类似于 a 的东西来实现它`vector<void(*)()>`，但是由于这些处理程序的数量在编译时是已知的，有什么方法可以在编译时生成数组（或模板链表）？我想避免`vector`.

我愿意使用`template<>`、`#define`甚至 GCC 特定的属性来实现这个目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T18:30:33.037

脚手架有点乏味，但一旦完成，使用就再简单不过了：

```
// example.h:
#include "Registered.h"
struct example : Registered<example> {}; 
```

```
// main.cc:
#include <iostream>
#include "example.h"

int main ()
{
    for ( auto p = example::registry; p; p=p->chain )
        std::cout << p << '\n';
} 
```

```
// Registered.h : 
template<class registered>
struct Registered {
     static registered *registry;
     registered *chain;
     Registered() : chain(registry) {registry=static_cast<registered*>(this);}
}; 
```

```
// example.cc:
#include "example.h"
template<> example *Registered<example>::registry = 0;

static struct example first, second, third;  // these can be defined anywhere w/ static duration 
```

编辑：移动`first,second,third`声明/定义以满足我内心的迂腐

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T17:53:53.193

绝对。如果我理解正确，您只需要一个指向处理程序的固定函数指针数组。使用 C++11 语法，并假设 3 个处理程序只是为了示例，

```
#include <array>

const std::array<HandlerPtr, 3> handlers= {&ledTimerHandler1, &ledTimerHandler2, &ledTimerHandler3}; 
```

或者使用更经典的 C/C++ 语法

```
const HandlerPtr handlers[] = {&ledTimerHandler1, &ledTimerHandler2, &ledTimerHandler3}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T18:48:17.517

根据 jthill 的回答，这就是我最终可能会使用的（因为我不需要通用形式）：

```
struct timer_handler {
    static timer_handler *first = 0;
    timer_handler *next;
    void (*f)();
public:
    timer_handler(void (*f)()) : next(first), f(f) { first = this;}

    // connect this to the interrupt vector
    static inline void executeAll() {
        auto p = first;
        while(p) {
            p->f();
            p = p->next;
        }
    }
}; 
```

```
//a.cpp
void foo() {

}
timer_handler tfoo = foo; 
```

```
//b.cpp
void bar() {

}
timer_handler tbar = bar; 
```

# python - 警告：'' 不是有效的包名；请仅在 setup.py 中使用 .-separated 包名

> ID：15142272
> 
> 赞同：2
> 
> 时间：2013-02-28T17:51:37.603
> 
> 标签：python, django

我遇到了一个 github 项目，我正在尝试安装并运行它，但我遇到了一些问题（[https://github.com/andrewschoen/django-cms-demo](https://github.com/andrewschoen/django-cms-demo)）。我也将此作为一个问题提出[https://github.com/andrewschoen/django-cms-demo/issues/2](https://github.com/andrewschoen/django-cms-demo/issues/2)。

如果我理解正确，问题似乎与安装 PIL 有关：

```
Running setup.py egg_info for package PIL
WARNING: '' not a valid package name; please use only.-separated package na
es in setup.py 
```

我尝试通过将 requirements.txt 中的行更改为：Pillow==1.7.8 来“插入”枕头

```
$ pip install -r requirements.txt

............
copying PIL\XVThumbImagePlugin.py -> build\lib.win32-2.7\PIL

running build_ext

building '_imaging' extension

f:\python27\Lib\distutils\dist.py:267: UserWarning: Unknown distribution option:
 'use_2to3'

  warnings.warn(msg)

error: Unable to find vcvarsall.bat

----------------------------------------
Command f:\django-cms-demo\env\Scripts\python.exe -c "import setuptools;__file__
='f:\\django-cms-demo\\env\\build\\Pillow\\setup.py';exec(compile(open(__file__)
.read().replace('\r\n', '\n'), __file__, 'exec'))" install --record c:\users\dni
r\appdata\local\temp\pip-cjnff6-record\install-record.txt --single-version-exter
nally-managed --install-headers f:\django-cms-demo\env\include\site\python2.7 fa
iled with error code 1 in f:\django-cms-demo\env\build\Pillow
Storing complete log in m:/pip\pip.log 
```

我刚从 python 和 django 开始，来自 php。我正在尝试将此项目设置在 USB 驱动器上，并且正在使用 win7。

提前感谢您的想法，

账单

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:25:18.633

PIL 未正确包装；有一些叉子可以解决这个问题。

从[使用 virtualenv 或 buildout 安装 PIL 的问题中](https://stackoverflow.com/q/2485295)，您目前最好的选择是安装[Pillow](https://pypi.python.org/pypi/Pillow/)；它是 PIL 的直接替代品。

对于 Windows，请改用[Christoph Gohlke 的预编译安装程序](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pil)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-03T12:06:40.230

PIL 未正确打包。

它不是一个严重错误，算了..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T19:02:45.947

您需要重命名项目文件夹/目录。将名称更改为`django_cms_demo`.

我会说：

```
mv django-cms-demo django_cms_demo 
```

但好像你在窗户上。

所以，作为一个完全不相关的话题，我建议你尝试 Linux。我无法想象在 windows 下开发一个 django 项目。

# jquery - 基于图像颜色过滤图像的库或方法

> ID：15142275
> 
> 赞同：0
> 
> 时间：2013-02-28T17:51:50.013
> 
> 标签：jquery

我对一种根据图像颜色过滤图像的方法感兴趣。例如，当我选择“绿色”时，会出现在其调色板内具有绿色的图像。这应该是自动完成的，之前不应该有照片的“标记”。是否有任何 jquery 或 php 库可以做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:55:47.260

jQuery 无法执行图像分析。

要执行您想要的操作，您必须将每个图像加载到 Canvas 中，并对位图数据执行某种统计分析。这可能太慢而无法在多于几张图像上使用。

# r - qqline() 等效于 edf 的正态概率图

> ID：15142276
> 
> 赞同：0
> 
> 时间：2013-02-28T17:51:54.973
> 
> 标签：r, plot, ecdf

我使用 plot.ecdf(x, ...) 绘制了经验分布函数 (EDF) 图。为了可视化正常性，我在 r 中寻找一个 qqline，相当于在我的图中绘制一条简单的对角线。MATLAB 中的 normplot() 函数正在做同样的事情（请参阅此链接上图中的红线：http: [//www.mathworks.de/de/help/stats/normplot.html](http://www.mathworks.de/de/help/stats/normplot.html)）。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-17T21:19:57.823

如评论中所述，只需致电`qqline()`：

```
x <- ecdf(rnorm(10))
plot.ecdf(x)
qqline(x) 
```

![在此处输入图像描述](../Images/eec1935d93283cd5df09fbed28e971ee.png)

# javascript - 单击时更改引导图标位置

> ID：15142277
> 
> 赞同：0
> 
> 时间：2013-02-28T17:51:55.533
> 
> 标签：javascript, jquery, css, twitter-bootstrap

首先，我对 bootstrap 很陌生，所以请尽量忍受这个。我一直在一个网站上工作，该网站有一个引导侧边栏，我正在努力让工作正常。我见过其他例子，但我不知道该怎么做。

在侧边栏上，我`<i>`在每个项目之前使用了一个元素图标，在这种情况下是`toggle icon-chevron-right`. 我想要做的是当有人点击侧边栏上的一个项目时，显示子项目，图标将变为切换`icon-chevron-right`到`toggle icon-chevron-down`。

我玩过一些 JavaScript 试图让它工作但无济于事。任何见解都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:00:30.543

您可以使用带有向右和向下箭头的精灵，然后使用 CSS 通过调整背景位置在两者之间切换。

喜欢：

```
element {
    background: url(images/whatever.png) no-repeat;
}

 element:active {
    background: url(images/whatever.png) no-repeat 10px 10px;
} 
```

玩弄这个位置，直到你做对了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:01:36.513

单击时，您可以更改图标上的类`<a>`：

```
$('a').click(function () {
   var icon = $(this).find('i');
   if (icon.hasClass('icon-chevron-down')) {
      icon.removeClass('icon-chevron-down').addClass('icon-chevron-right');
   }
   else {
      icon.removeClass('icon-chevron-right').addClass('icon-chevron-down')
   }
}); 
```

# ios - 如何在我的 AppDelegate 上设置多个本地通知？

> ID：15142283
> 
> 赞同：0
> 
> 时间：2013-02-28T17:52:18.150
> 
> 标签：ios, uilocalnotification

我想在我的 AppDelegate 上设置多个本地通知，就像这段代码中显示的一样。这可能吗？

另外，我已经在下面的代码中设置了这个通知，但是我怎样才能从周一到周五重复呢？

这是我的代码：

**AppDelegate.m**

```
- (void)applicationDidEnterBackground:(UIApplication *)application {
/*
 Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
 If your application supports background execution, called instead of applicationWillTerminate: when the user quits.
 */

NSCalendar *gregCalendar = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *dateComponent = [gregCalendar components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSWeekdayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit fromDate:[NSDate date]];

[dateComponent setWeekday:5];
[dateComponent setHour:11];
[dateComponent setMinute:26];

UIDatePicker *dd = [[UIDatePicker alloc]init];
[dd setDate:[gregCalendar dateFromComponents:dateComponent]];

UILocalNotification *notification = [[UILocalNotification alloc]init];
[notification setAlertBody:@"Let the Music Play"];
[notification setFireDate:dd.date];
[notification setTimeZone:[NSTimeZone defaultTimeZone]];
[application setScheduledLocalNotifications:[NSArray arrayWithObject:notification]]; 
```

}

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:03:04.200

将通知的 repeatInterval 属性设置为 NSWeekdayCalendarUnit。

# apache - 如果我有 `Options -FollowSymLinks`，为什么在查看受 Apache RewriteRule 影响的文件时会出现 403 Forbidden？

> ID：15142285
> 
> 赞同：0
> 
> 时间：2013-02-28T17:52:20.783
> 
> 标签：apache, mod-rewrite, symlink, http-status-code-403

我想将 .xhtml 文件作为

*   `application/xhtml+xml`如果浏览器说它接受它。
*   `text/html`否则

然后，我有这个代码：

```
<Files "*.xhtml">
    RewriteEngine on
    RewriteCond %{HTTP:Accept} !application/xhtml\+xml 
    RewriteRule .* - [T=text/html]
</Files> 
```

而且效果很好。

问题是，禁用后`FollowSymLinks`（我不使用符号链接），而不是 .xhtml 文件，我得到 403 Forbidden 错误。

为什么？是`RewriteRule .* - [T=text/html]`符号链接吗？

# javascript - 加载页面时如何展开树面板 - EXTJS 4

> ID：15142286
> 
> 赞同：3
> 
> 时间：2013-02-28T17:52:28.093
> 
> 标签：javascript, ajax, extjs, extjs4

```
var tree = Ext.create('Ext.tree.Panel', {
        store: store,
        rootVisible: false,
        //useArrows: true,
        frame: true,
        title: 'Vehicle List',
        region:'west',
        width: 200,
        root: {
        expanded: true
        },
        checked : false,
        height: 250,
        dockedItems: [{
            xtype: 'toolbar',
            items: {
                text: 'Get checked nodes',
                handler: function(){
                    var records = tree.getView().getChecked(),
                        names = [];

                    Ext.Array.each(records, function(rec){
                        names.push(rec.get('MainID'));
                    });

                    Ext.MessageBox.show({
                        title: 'Selected Nodes',
                        msg: names.join('<br />'),
                        icon: Ext.MessageBox.INFO
                    });
                }
            }
        }]
    }); 
```

我怎样才能让树扩大？我试过了

```
root: {
        expanded: true
        } 
```

但它仍然不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T18:09:36.243

将此添加到您的模型中：

```
{ name: 'expanded', type: 'boolean', defaultValue: true, persist: false }, 
```

或者`expanded`，为从服务器返回的每个节点设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:16:55.317

```
root: {
        expanded: true
      } 
```

这应该在您商店的定义范围内。

像下面这样的东西。

```
var store = Ext.create('Ext.data.TreeStore', {
    root: {
        expanded: true,
        children: [
            { text: "a", leaf: true },
            { text: "b", expanded: true, children: [
                { text: "c", leaf: true },
                { text: "d", leaf: true}
            ] }
        ]
    }
}); 
```

# angularjs - AngularJS - 从部分 in 指令中获取 html

> ID：15142288
> 
> 赞同：4
> 
> 时间：2013-02-28T17:52:34.443
> 
> 标签：angularjs, partial-views, angularjs-directive

我在角度创建了一个自定义指令，以便我可以在提交时淡出表单并将其替换为带有自定义消息的模板。所需的工作流程如下：

*   用户完成表单并单击提交。
*   控制器使用新对象更新模型并发出带有一些参数的“formSubmitted”事件。
*   该指令监听事件并淡出表单。
*   该指令加载一个部分 html，其中填充了事件中的 args。

我解决了前 3 个步骤，但无法绕过最后一步（我不想将 html 硬编码为字符串，如果可能的话，我想从另一个文件中提取它）。

如何做呢？

编辑：*一些示例代码（简化）：*

这是表格：

```
<section class="hero-unit {{containerClass}}" tk-jq-replace-children>
    <h2>{{formTitle}}</h2>
    <form class="form-search" name="solform" novalidate>
        <fieldset>
        ... 
```

这是控制器：

```
if( formWasSavedOk ){
    $scope.formSubmittedMsg = msg;
//Here emits the custom event
    $scope.$emit( 'solicitud:formSubmitted' );
} 
```

这是指令：

```
.directive( 'tkJqReplaceChildren', function( $compile ){
    return {
        link: function( $scope, $iElement/*, $iAttrs*/ ){
            //The directive listens for the event
            $scope.$on( 'solicitud:formSubmitted', function( /*event*/ ){
                $iElement
                    .children()
                    .fadeOut(1000)
                    .promise()
                    .done(function(){
                        var $detachedElments = $(this).detach();
                        //The html is compiled and added to the DOM
                        $iElement.html( $compile( "<h2>{{formSubmittedMsg}}</h2>" )($scope) );
                        $scope.$apply();
                      });
            });
        }
    };
}); 
```

`<h2>{{formSubmittedMsg}}</h2>`是我想从 app/partials/create/createdOk.html 中提取的代码（它不仅仅是一个标题，这就是我想从文件中加载它的原因）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:41:57.613

我相信获取外部 html 片段的“Angular 方式”是使用[ng-include 指令](http://docs.angularjs.org/api/ng.directive:ngInclude)：

```
<ng-include
       src="{string}"
       [onload="{string}"]
       [autoscroll="{string}"]>
</ng-include> 
```

至于为什么您的指令不起作用，我的猜测是您在指令的 **链接**阶段而不是**编译**阶段获取 html。关于[这个答案](https://stackoverflow.com/questions/12164138/what-is-the-difference-between-compile-and-link-function-in-angularjs)的差异有一个很好的解释，但它几乎是这样的：

> 如果要进行 DOM 转换，如果要添加一些特性是行为更改，则应该编译，它应该在链接中。

我建议将大部分逻辑从指令移到控制器：使用 $resource 或 $http 服务获取数据，然后将结果传递到新创建的 ng-directive 范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T02:57:57.433

我不确定您是否正在寻找这项`$http`服务。我创建了一个 plunker [http://plnkr.co/edit/13kFLh9RTsIlO4TaFIFQ?p=preview](http://plnkr.co/edit/13kFLh9RTsIlO4TaFIFQ?p=preview)，它不涵盖前三个步骤，但涵盖了您需要的第四步。

在 plunker 中单击文本“单击此处提交表单”，并注意插入了新文本。此新文本来自名为`tmpl.html`. 在 firebug 控制台中，您可以在单击文本后看到一个 get 调用，以获取`tmpl.html`

# javascript - 使用按钮打开和关闭嵌套弹出窗口

> ID：15142290
> 
> 赞同：0
> 
> 时间：2013-02-28T17:52:42.277
> 
> 标签：javascript, popup, nested

我正在尝试使用两个 jquery 函数在一个页面中有多个弹出窗口。其中之一是打开弹出窗口的按钮（它嵌套在按钮本身内，以便于将弹出窗口定位在按钮旁边）。另一个功能是应该关闭弹出窗口的按钮（位于嵌套 div 内）。

问题是，构成第一个按钮的 div 将其功能扩展到打开的弹出窗口，有效地使它每次我想关闭弹出窗口时，它都会再次打开。（或者至少我认为它是这样做的，因为在我从弹出窗口中取消嵌套打开按钮后，事情就开始工作了）

这是javascript的代码

```
jQuery(document).ready(function(){

$(".button_open").click(function()
{
$(this).children().css("display","inline");
});

$(".button_close").click(function()
{
$(".pop-up").css("display","none");
});

}); 
```

html

```
<div class="button_open">
 <div class="pop-up">
  <div class="button_close">X</div>
Text
 </div>
</div> 
```

该页面将有多个弹出窗口，每个弹出窗口都包含不同的内容，如果可能的话，我希望这两个函数执行所有打开/关闭的内容，而不是拥有大量的函数。

所以基本上我想知道是否有任何方法可以在嵌套 div 内制作关闭按钮功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:58:47.320

如果您单击关闭按钮 - 您也会单击父级。尝试使您的代码：

```
$(".button_close").click(function(event)
{
    $(".pop-up").css("display","none");
    event.stopPropagation();
}); 
```

stopPropagation 函数防止事件冒泡到父级。然后它不应该冒泡到父级，也不应该导致触发点击父级。如果没有帮助，请告诉我。

# spring - 在 Quartz JDBC 支持的集群的每个节点上运行作业

> ID：15142294
> 
> 赞同：2
> 
> 时间：2013-02-28T17:52:52.893
> 
> 标签：spring, cluster-computing, quartz-scheduler

我有一个运行 Spring Web 应用程序的两个 Tomcat 节点集群。我为 Quartz 配置了 a`RAMJobStore`并且正在切换以`LocalDataSourceJobStore`提供集群，以便每个作业最多在一个节点上运行。大多数作业（包括一些新作业）都在数据库上运行并受益于此功能。

不幸的是，我有一份工作在 RAM 中的数据上运行，并且没有设置同步。我能看到的最简单的解决方案是让一个作业简单地在所有节点上运行而无需协调，就像`RAMJobStore`.

**有没有办法将作业配置为在 LocalDataSourceJobStore 下的所有节点上运行？**

精确的时间并不重要，但作业必须每 30 分钟在每个节点上运行一次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:42:58.950

我还没有尝试过，但我认为您可以配置 2 个调度程序，一个用于集群作业，一个用于 RAM 作业存储。如果使用 spring 你会像这样配置。

对于集群存储

```
<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="configLocation" value="classpath:quartz.properties" />
    ...... configure your clustered triggers here 
</bean> 
```

然后为 RAM Store 设置另一个具有不同 quartz.properties 文件的调度程序。

```
<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="configLocation" value="classpath:quartz_ram.properties" />
    ...... configure your RAM store triggers here 
</bean> 
```

# java - android中用于照明解决的位图归一化

> ID：15142296
> 
> 赞同：1
> 
> 时间：2013-02-28T17:53:11.077
> 
> 标签：java, android, image-processing, bitmap, normalization

我开发了一个用于颜色比较的安卓应用程序。除了解决照明问题之外，我已经成功完成了该应用程序。我的参考图表在 sdcard 中作为 jpeg 图像，我需要将这些图像与我从相机拍摄的图像进行比较。我得到了输出，但这取决于照度。所以现在我打算不规范化位图。如何规范化位图。？我正在使用朴素的相似性方法比较图像
，请建议我一个解决照明问题的好主意。最近两周开始搜索方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-26T05:39:03.477

尝试使用[Catalano 框架](https://code.google.com/p/catalano-framework/)。这里包含您可以学习如何使用的[文章。](http://www.codeproject.com/Articles/656059/Catalano-Framework)

[我使用这种方法](http://www.ccis2k.org/iajit/PDF/vol.4,no.4/12-Qader.pdf)实现了图像标准化。

```
FastBitmap fb = new FastBitmap("image.jpg");
fb.toGrayscale();

ImageNormalization in = new ImageNormalization();
in.applyInPlace(fb); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:27:18.353

[这是一个链接，询问有关 luminosity 的类似问题](https://stackoverflow.com/questions/14960408/light-measuring-in-andoid)，所以我不会重复所有内容。

颜色是感性的，不是绝对的。开一辆红色的车，把它停在路灯下，这辆车看起来是橙色的。显然油漆的颜色没有改变，只是你对颜色的感知发生了变化。

每当您拍摄彩色照片时，用于照亮图像的光线都会改变您获得的结果。大多数相机都有光平衡控制，大多数人使用自动。自动控制看起来可以称为白色，然后移动图像以使白色看起来是白色的。这并不意味着其余的颜色都是正确的。

拿一个彩色毛绒动物（或几只）之类的东西，然后在阳光下、白炽灯泡下、荧光灯下和带相机闪光灯的黑暗房间里拍摄它的照片。颜色有多相似？如果您有 Photoshop，请查看 Photoshop 中的颜色曲线。

要匹配颜色，您需要一个[客观标准](http://us.123rf.com/400wm/400/400/vlue/vlue1101/vlue110100078/8573763-a-man-holds-up-an-18--gray-white-balance-card-with-test-colors-on-it-to-calibrate-the-colors-perfect.jpg)，例如照片中包含的色卡。然后软件亮度和颜色校正已知卡，然后测量其他颜色到已知标准。

# java - Java中线性系统的符号解

> ID：15142310
> 
> 赞同：3
> 
> 时间：2013-02-28T17:54:29.307
> 
> 标签：java, math, symbolic-math

考虑一个典型的方程组，如下所示：

```
p x + 3 y = 0
2 x + q y = 0 
```

其中 p 和 q 是符号（它们不带值）。我想用符号表达式求解系统，对于 x 和 y，包含 p 和 q。

我尝试了[How to Solve Equations with Java](https://stackoverflow.com/questions/1431885/how-to-solve-equations-with-java)和[How to Solve algebraic equations](https://stackoverflow.com/questions/9154990/java-how-to-solve-algebraic-equations)问题，但这些问题只对查找 x 和 y 的算术（而非符号）值感兴趣。

我想知道是否有 Java 包可以处理符号计算来解决此类系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:18:07.747

查看另一个问题：[https](https://stackoverflow.com/questions/2574949/is-there-something-like-sympy-for-java) ://stackoverflow.com/questions/2574949/is-there-something-like-sympy-for-java ，它的响应指向可在 Java 中使用的有用的符号数学库。您还可以在[JAS](http://krum.rz.uni-mannheim.de/jas/related.html)相关资源页面中找到有用的指针。

# sharepoint - 测试用户是否有权访问 SharePoint 中的项目

> ID：15142311
> 
> 赞同：1
> 
> 时间：2013-02-28T17:54:31.040
> 
> 标签：sharepoint

我有一个项目，我有一个用户名（但没有密码），需要检查用户是否可以访问项目。这必须在项目级别而不是 Web 级别，因为权限可能不会被继承。

我知道 SPWeb.CheckPermissions 但认为它只会测试用户是否可以访问实际的 spweb。

谢谢

== 编辑 ==

我能够通过这样做来实现这一点

```
var item = properties.ListItem;
SPUser user = SPContext.Current.Web.EnsureUser(@"domain\logonname");
item.DoesUserHavePermissions(user, SPBasePermissions.OpenItems); 
```

我的问题仍然有点。这可以通过网络服务 api 来实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:02:17.447

借助 SharePoint 2013，您可以使用 REST API 来查询静态方法。一个有趣的方法是[`SPUtility.GetPrincipalsInGroup`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.utilities.sputility.getprincipalsingroup.aspx). 当然你不能要求“有开放的权限”，但你可以要求一个特定的组。要查询静态方法，请参阅：[使用 SharePoint 2013 REST 服务进行编程](http://msdn.microsoft.com/en-us/library/fp142385.aspx)，查找将*静态方法和属性指定为 REST 服务 URI*部分。当然，您必须使用经过身份验证的用户调用 Web 服务，并且需要启用该组才能被所有用户枚举。

# haskell - Haskell 中的高阶函数 - “没有...的实例”

> ID：15142312
> 
> 赞同：0
> 
> 时间：2013-02-28T17:54:32.657
> 
> 标签：haskell

map2 接受两个列表，ls1 和 ls2 以及一个函数 F，并返回一个与 ls1 和 ls2 中最短的长度相同的列表，其中第 i 个元素是将 F 应用于 ls1 和 ls2 的第 i 个元素的结果（以该顺序）

```
module Map2 where

map2 lst1 lst2 f = map2_iter lst1 lst2 f len 0 []
    where len = (min (length lst1), (length lst2))
map2_iter (x:lst1) (y:lst2) f len i acc = if (i == len)
                      then acc
                      else let res = (f x y) in
                      map2_iter (lst1) (lst2) (f) (len) (i+1) ((res):acc)
map2_iter [] [] f len i acc = [] 
```

**我收到以下错误**

```
Map2.hs:3:20:
No instances for (Eq (Int -> Int), Num (Int -> Int, Int))
  arising from a use of `map2_iter'
Possible fix:
  add instance declarations for
  (Eq (Int -> Int), Num (Int -> Int, Int))
In the expression: map2_iter lst1 lst2 f len 0 []
In an equation for `map2':
    map2 lst1 lst2 f
      = map2_iter lst1 lst2 f len 0 []
      where
          len = (min (length lst1), (length lst2)) 
```

我不太确定这个错误是什么意思。任何人都可以提供任何帮助吗？

此外，这不是硬件，而是测试准备。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T18:06:35.733

错误消息告诉您无法比较`Int -> Int`函数是否相等，并且`(Int -> Int, Int)`元组不是数字。为什么要告诉你这个？因为`len`在您的代码中是一个`(Int -> Int, Int)`元组，并且您正在尝试比较它是否相等并将其视为一个数字。

那么`len`最终是如何成为一个数字的呢？`(,)`用于在 Haskell 中创建元组。写作`(x,y)`创建一个元组，其第一个元素是`x`，第二个元素是`y`。所以`(min (length lst1), (length lst2))`创建一个元组，其第一个元素是`min (length lst1)`，第二个元素是`length lst2`。所以你最终得到一个包含一个函数（因为`min (length lst1)`计算为一个函数）和一个数字的元组。

PS：我还应该指出，像你一样递归地编写这个函数并不是一个好主意。按照您编写的方式，在生成整个结果之前，您将无法访问结果的第一个元素（结果列表的顺序也会错误）。以更“天真”的非尾递归方式编写它会更懒惰，因此性能更好。它也会更简单。

# sql - 当前月份和年份的特定日期

> ID：15142316
> 
> 赞同：5
> 
> 时间：2013-02-28T17:54:47.357
> 
> 标签：sql, sql-server, tsql, datetime

我在返回当前月份和年份的特定日期时遇到问题。我需要例如第 15 天。到目前为止，我在 FB/IB 中使用了现有功能：

```
IB_EncodeDate(EXTRACT(YEAR FROM Current_Date),EXTRACT(Month FROM Current_Date),15) 
```

是否存在一种将其转换为 MSSQL 数据库的简单方法？

编辑。我需要 OLE 格式的输出（例如 41,348）来将日期与另一个日期进行比较。我将数据库中的日期与当月的第 15 天进行比较。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T18:26:42.603

对于当月的第 15 天：

```
SELECT DATEADD(DAY, 14, DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0)); 
```

要根据这个“神奇”日期 1899-12-30 获得愚蠢的 OLE 表示：

```
SELECT DATEDIFF(DAY, -2, DATEADD(DAY, 14, 
  DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0))); 
```

答案（3 月 11 日，当我针对更改的要求更新此答案时）：

```
-----
41348 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T18:09:10.177

那么，你有一个日期，并想返回同月的第 15 天？好吧，假设 SQL Server 2008，你可以这样做：

```
SELECT CONVERT(DATE,CONVERT(VARCHAR(6),GETDATE(),112)+'15',112) 
```

对于 SQL Server 的早期版本：

```
SELECT CONVERT(DATETIME,CONVERT(VARCHAR(6),GETDATE(),112)+'15',112) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-02T20:59:21.300

这似乎是一个快速的答案。

```
declare @OLEDate int 
declare @currentDate as datetime
set @currentDate = DATEADD(DAY, 14, DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0))
set @OLEDate = convert(float, @currentdate) 
-- PRINT @OLEDate 
```

基于 Aaron Bertrand 的回答和您对整数转换的需要

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-17T05:19:35.827

获取当天的第 10 天

```
declare @cur_month int,@cur_yr int,@tenth_dt date
    set @cur_month=month(getdate())
    set @cur_yr=YEAR(getdate())
    set @tenth_dt=convert(date,'10/'+convert(varchar(5),@cur_month)+'/'+convert(varchar(5),@cur_yr),103)
    select @tenth_dt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T18:12:16.560

`Current_Date`在 SQL Server 中将是`getdate()`.

要获得 OLE 自动化格式的第 15 天，请尝试：

```
select datediff(day, '18991230', dateadd(day, -day(getdate()) + 15, getdate())) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T19:43:58.367

不知道你是在之后`Day`还是`Date`。这为任何文化提供了 dayOfWeek 和 specificDate

```
declare @myDay int = 15

select convert(date,myday) specificDate, datename(dw,myday) dayOfWeek
from (
   select convert(varchar(6),getdate(),112) + convert(varchar, @myDay) myday
) x 
```

**[小提琴演示在这里](http://sqlfiddle.com/#!3/d41d8/9964)**

```
| SPECIFICDATE | DAYOFWEEK |
----------------------------
|   2013-02-15 |    Friday | 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-30T19:20:30.090

更直接的方法：

```
CAST(FORMAT(GETDATE(), 'yyyy-MM-15') AS DateTime) 
```

# php - 没有从数据库中获取数据

> ID：15142331
> 
> 赞同：2
> 
> 时间：2013-02-28T17:55:27.087
> 
> 标签：php, sql

我正在尝试为一个学校项目开发一个登录系统，但我遇到了这个错误，我不知道如何修复它。

在我的数据库上，我将密码`spy123`存储在 sha256 哈希中，但是当我尝试在 php 中获取它时，我什么也得不到。

当前代码：

```
// checks if the user/password combination works.
// $username | String - the username of the user to login
// $password | 32byteHash - the hashed password of the user
// return | Boolean - Returns true if the password works for that user.
function forumLib_checkLogin($username, $password){
    $goodLogin = false; //Assume the password is wrong.

    $obtainUserPassword_query = "SELECT password FROM forum_users WHERE username = '$username'";

    $dbc = forumLib_connectToDB();
    $results = mysqli_query($dbc, $obtainUserPassword_query);
    forumLib_closeConnectionToDB($dbc);

    echo "query: $obtainUserPassword_query <br />";
    echo "results: ".mysqli_fetch_array($results)."<br />";
    $row = mysqli_fetch_array($results);
    echo "row[0]: ".$row[0]."<br />";
    echo "password: $password <br />";
    echo "DBpassword: $passwordOnDB <br />";

    //if user exists
    if($results != false){
        //get password from DB
        $row = mysqli_fetch_array($results);
        $passwordOnDB = $row['password'];

        //check password
        if($password == $passwordOnDB){
            //successfull login
            $goodLogin = false;
        }
    }

    return $goodLogin;
} 
```

输出：

```
change password request detected 
query: SELECT password FROM forum_users WHERE username = 'SpyMaster356' 
results: Array
row[0]: 
password: 7d9519224964c72a90b342c565fab1e4582d0e974043798f940b471304db0e24 
DBpassword:
Current password does not match records. 
```

sql查询没有错，因为我`7d9519224964c72a90b342c565fab1e4582d0e974043798f940b471304db0e24`在手动输入时返回。

这真的让我很困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T17:58:19.117

一旦您进行了第一次调用，`mysqli_fetch_array`您就已经使用了第一行数据。随后，当您尝试将其捕获到`$row`变量中时，该行已被使用且未保存：

```
// Prints  'Array'. Did not save the result
echo "results: ".mysqli_fetch_array($results)."<br />";

// Doesn't get anything because the row has been previously fetched
$row = mysqli_fetch_array($results); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:01:30.627

更改以下细分

```
echo "query: $obtainUserPassword_query <br />";
echo "results: ".mysqli_fetch_array($results)."<br />";
$row = mysqli_fetch_array($results);
echo "row[0]: ".$row[0]."<br />";
echo "password: $password <br />";
echo "DBpassword: $passwordOnDB <br />"; 
```

首先填充`$row`数组，并将其用于进一步的`echo`.

```
echo "query: $obtainUserPassword_query <br />";
$row = mysqli_fetch_array($results);
echo "results: ". print_r($row) ."<br />";
echo "row[0]: ".$row[0]."<br />";
echo "password: $password <br />";
echo "DBpassword: {$row[0]} <br />"; 
```

# c# - 简单的自定义 Web 控件

> ID：15142332
> 
> 赞同：2
> 
> 时间：2013-02-28T17:55:27.620
> 
> 标签：c#, asp.net, .net, web-controls

您好，我正在设计一个继承自 aspx 下拉列表的自定义 .net Web 控件。这个想法是有一个下拉列表，它将显示直到当前年份的年份值。我希望能够设置控件可以开始的“StartYear”属性，或者使用默认日期。我能够创建此控件，但它始终使用默认日期。看来我无法在后面的代码中使用aspx代码中的属性设置。我的前端代码是....

```
<customControls:YearDropDownList StartYear="2000" ID="ddlYear" runat="server"/> 
```

后面的代码是

```
using System;
using System.ComponentModel;
using System.Globalization;
using System.Web.UI;
using System.Web.UI.WebControls;

    namespace customControls {
    [ToolboxData("<{0}:ServerControl1 runat=server></{0}:ServerControl1>")]
    [DefaultProperty("StartYear")]
    public class YearDropDownList : DropDownList
    {
        public YearDropDownList() {
            for (int i = Int32.Parse(StartYear); i <= DateTime.Now.Year; i++)
            {
                this.Items.Add(new ListItem(i.ToString(), i.ToString()));
            }
        }
        public string StartYear {
            get{
                String s = (String)ViewState["StartYear"];
                return ((s == null) ? "2009":s);
            }
            set{
                ViewState["StartYear"] = value;
            }
        }
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:27:55.800

在我看来，在构造函数中重新生成列表是没有意义的。在控件被实例化的时候，ViewState 可能还不会被填充（虽然我不确定），因此你总是会使用你的默认值。

这是我要做的：

```
[ToolboxData("<{0}:ServerControl1 runat=server></{0}:ServerControl1>")]
[DefaultProperty("StartYear")]
public class YearDropDownList : DropDownList
{
    public string StartYear
    {
        get
        {
            String s = (String)ViewState["StartYear"];
            return ((s == null) ? "2009" : s);
        }
        set
        {
            ViewState["StartYear"] = value;
            RegenerateList();
        }
    }

    // Defer regenerating the list until as late as possible    
    protected void OnPreRender(EventArgs e)
    {
        RegenerateList();
        base.OnPreRender(e);
    }

    public void RegenerateList()
    {
        // Remove any existing items.
        this.Items.Clear();
        for (int i = Int32.Parse(StartYear); i <= DateTime.Now.Year; i++)
        {
            this.Items.Add(new ListItem(i.ToString(), i.ToString()));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:00:26.057

像这样设置属性时，您需要重新生成列表；

```
[ToolboxData("<{0}:YearDropDownList runat=\"server\" StartYear=\"[StartYear]\"></{0}:YearDropDownList>")]
[DefaultProperty("StartYear")]
public class YearDropDownList : DropDownList
{
    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        RegenerateList();
    }
    public string StartYear
    {
        get
        {
            String s = (String)this.ViewState["StartYear"];
            return s ?? "2009";
        }
        set
        {
            ViewState["StartYear"] = value;
            RegenerateList();
        }
    }
    public void RegenerateList()
    {
        Items.Clear();
        for (int i = Int32.Parse(this.StartYear); i <= DateTime.Now.Year; i++)
        {
            this.Items.Add(new ListItem(i.ToString(), i.ToString()));
        }
    }
} 
```

我已经测试并验证了上面的代码，它绝对*有效*。我注意到的一件有趣的事情是，我能够在一段时间内重现您的问题，因为属性设置器没有被击中。我通过右键单击解决方案并单击清理解决了这个问题。清理解决方案后，我再次右键单击解决方案，但这次选择了重建。这似乎解决了属性设置器问题。

# java - 如何在测验中正确或错误答案后加载主题活动？

> ID：15142333
> 
> 赞同：0
> 
> 时间：2013-02-28T17:55:27.650
> 
> 标签：java, android, android-sqlite

好的，有人建议我为我的问题创建一个新线程。我正在使用导入的 SQLite 数据库。无论如何，我已经为正确和错误答案制作了两个主题对话框，我想在点击正确或错误答案时显示它们。这是我活动中的代码，删去部分：

```
private class Answer {
        public Answer(String opt, boolean correct) {
            option = opt;
            isCorrect = correct;
        }

        String option;
        boolean isCorrect;
    }

    final OnClickListener clickListener = new OnClickListener() {

        public void onClick(View v) {
            Answer ans = (Answer) v.getTag();
            if (ans.isCorrect) {
                Toast toastT = Toast.makeText(Kviz.this, "Correct!", Toast.LENGTH_SHORT);
                toastT.show();
                finish();
            }else{
                Toast toastP = Toast.makeText(Kviz.this, "Wrong!", Toast.LENGTH_SHORT);
                toastP.show();
                }
                startActivity(getIntent());
            }
    }; 
```

当我像上面那样使用 Toast 时，它可以正常工作，但是当我尝试像这样使用我的主题活动时，它不会，而是直接进入下一个问题，当我按下手机上的后退按钮时，我会得到那个主题弹出活动：

```
final OnClickListener clickListener = new OnClickListener() {

        public void onClick(View v) {
            Answer ans = (Answer) v.getTag();
            if (ans.isCorrect) {
                Intent t = new Intent("rs.androidaplikacijekvizopstekulture.TACANODGOVOR");
                startActivity(t);
                finish();
            }else{
                    Intent p = new Intent("rs.androidaplikacijekvizopstekulture.POGRESANODGOVOR");
                    startActivity(p);
                }
                startActivity(getIntent());
            }
    }; 
```

重复一遍，当我按下后退按钮时，我得到了主题活动，当我往回走时，我得到了错误的和正确的。我只想显示该对话框，然后加载下一个问题，就像 Toast 一样。只是提到这个活动加载在我的其他活动中工作正常，只是在简单的按钮点击之后，没有问题和答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:08:38.487

原因是在调用任何 (right/wrong)`startActivity`之后，它会继续调用`startActivity(getIntent());`方法。一种方法是通过在清单文件中为这些活动添加以下标签/值来制作您的 TACANODGOVOR 和 POGRESANODGOVOR 对话活动，`android:theme="@android:style/Theme.Dialog"`例如

```
<activity ... android:theme="@android:style/Theme.Dialog" /> 
```

它将显示 TACANODGOVOR 和 POGRESANODGOVOR 作为对话框，除非用户按下后退按钮（或任何退出按钮活动可能有），否则它不会进入下一行。

# jquery-ui - Datepicker 不能在 2/28 上正确减去？

> ID：15142334
> 
> 赞同：0
> 
> 时间：2013-02-28T17:55:28.890
> 
> 标签：jquery-ui, datepicker

我不认为我产生了幻觉，因为我已经尝试了十几次。这是我的代码：

```
 $('#teo_prep_due').change(function() {
        var ber = $('#ber_rcvd');
        var tpd = $('#teo_prep_due');
        var brDate = ber.datepicker('getDate');
        var tpDate = tpd.datepicker('getDate');
        var s1Date = new Date();
        var s2Date = new Date();
        var sdDate = new Date();
        s1Date.setDate(brDate.getDate() + 5);
        console.log(s1Date);
        s2Date.setDate(tpDate.getDate() - 3);
        console.log(s2Date);
        if (s1Date < s2Date) {
            sdDate.setDate(s1Date.getDate());
        } else {
            sdDate.setDate(s2Date.getDate());
        }
        $('#survey_due').datepicker('setDate', sdDate);
    }); 
```

在我的日期表格中，我输入`February 28, 2013`了 for`ber_rcvd`和`March 14, 2013`for `teo_prep_due`。按照代码，我的结果应该是`March 5, 2013`. 但是，**s2Date**会导致`February 11, 2013`，好像减去了整整一个月和 3 天，而不是仅仅 3 天。有没有其他人遇到过这个？

使用`jquery-1.9.1.min.js`：`jquery-migrate-1.1.1.js`和`jquery-ui-1.10.1.min.js`。

[http://jsfiddle.net/devlshone/veP7b/](http://jsfiddle.net/devlshone/veP7b/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:20:05.057

问题是`.setDate()`没有设置日期，它设置了月份中的日期。它接受一个整数作为参数。当您创建`s2Date`它时，它默认为今天，即 2 月。当你加上`tpDate.getDate()// equals 14`-3 时，你得到 11，因此是 2 月 11 日。

# unicode - 这个 unicode 隐形字符是什么？

> ID：15142338
> 
> 赞同：4
> 
> 时间：2013-02-28T17:55:37.183
> 
> 标签：unicode, character, invisible

在尝试解析一些 unicode 文本字符串时，我遇到了一个我找不到任何定义的不可见字符。如果我将它粘贴到文本编辑器并显示不可见的内容，我可以看到它看起来像一个项目符号 (• alt-8)，通过复制/粘贴它们，我可以看到它具有类似于空格或制表符的效果，但这些都不是。

我需要对其进行测试，例如...

```
 if(uniChar == L'\t') 
```

但当然我需要提供一些匹配的东西。

它在 UTF-8 中有字节 0xc2 0xa0。

如果没有人有定义，是否有任何迂回的方法来测试我无法定义的东西！？

（我碰巧在 Objective-C、OSX、Xcode 中使用 NSStrings，但我认为这没有任何影响。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T10:38:14.887

UTF-8 中的字节 C2 A0 编码[U+00A0 ɴᴏ-ʙʀᴇᴀᴋ sᴘᴀᴄᴇ](http://www.fileformat.info/info/unicode/char/00a0/index.htm)，例如，可用于单独显示组合标记。它是`&nbsp;`一个命名的 HTML 实体。它与 U+0020 sᴘᴀᴄᴇ 几乎相同，只是它防止在它之前或之后换行，并充当双向布局的数字分隔符。

当您要求文本编辑器显示不可见时，您看到的点恰好是文本编辑器选择显示空格的字形。这并不意味着有问题的字符是 U+00B7 ᴍɪᴅᴅʟᴇ ᴅᴏᴛ，这绝对不是隐形的。

在代码中，如果您将其作为`unichar`，您可以将其与`L'\x00A0'`.

# linux - 检查域是否在服务器上处于活动状态

> ID：15142343
> 
> 赞同：0
> 
> 时间：2013-02-28T17:55:47.463
> 
> 标签：linux, bash, cpanel, whm

我正在尝试检查服务器上的域是否处于活动状态。到目前为止，我得到了错误。

```
list=/root/domainlist.txt
for i in $(cat $list)
do
  echo "checking " $i
  $ip = host $i |grep -o -m 100 '[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}'
  if [[ $ip == "xx.xx.xx.xx" ]]; then
    $i >> /root/activedomains.txt
  fi
done 
```

输出：

```
activedomains: line 4: =: command not found 
```

这是我得到的当前错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:58:43.453

*   前后没有空格`=`
*   作业中没有美元符号
*   您可能想要命令的结果，因此将其包含在`$(` `)`

    ```
    ip=$(host $i |grep -o -m 100 '[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}') 
    ```

像这样写入文件

```
echo "$i" >> /root/activedomains.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T18:02:54.120

您的行有语法错误

```
$ip = host $i |grep -o -m 100 '...' 
```

你应该改用：

```
ip=$(host $i |grep -o -m 100 '...') 
```

* * *

使用*布尔逻辑*的更好方法（不需要`grep`，如果`host $ip`失败，它将返回*FALSE*）：

```
list=/root/domainlist.txt

while read ip; do
    echo "checking $ip"
    host "$ip" &>/dev/null && echo "$ip" >> /root/activedomains.txt
done < "$list" 
```

它相当于

```
list=/root/domainlist.txt

while read ip; do
    echo "checking $ip"
    if host "$ip" &>/dev/null; then
        echo "$ip" >> /root/activedomains.txt
    fi
done < "$list" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T17:58:34.957

对于初学者，您不应该分配给`$ip`...`ip`但可能会有更多错误。

我的猜测是你想要的（第 4/5 行）：

```
ip=$(host $i |grep -o -m 100 '[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}') 
```

另请阅读 user000001 的答案。`echo`获取输出时的缺失*是*另一个问题。

# file-upload - 在 dokuwiki 中使用 curl 命令行上传文件

> ID：15142344
> 
> 赞同：0
> 
> 时间：2013-02-28T17:55:49.663
> 
> 标签：file-upload, curl, upload, dokuwiki

我正在尝试找到一种方法来做到这一点。到目前为止，由于 cookie 参数，我已经能够访问页面：

```
 curl -v --cookie cookies.txt --cookie-jar cookies.txt --user-agent Mozilla/4.0 --data "u=login&p=passwd" http://wiki/doku.php?id=start&do=login 
```

接着

```
 curl --cookie  cookies.txt  http://wiki/doku.php?id=info 
```

要上传文件，我应该在 php 页面上获取表单参数。我不完全知道我在寻找什么：

```
curl --form "file=@z.xml" --cookie cookies.txt "http://wiki/doku.php?id=start&tab_files=upload&do=media" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:27:30.523

我让它以不同的方式工作。我创建了一个 upload.php 文件（[源](http://www.dzone.com/snippets/very-simple-php-file-upload)）

```
<?php

$uploaddir = '/var/www/html/dokuwiki/upload/';
$uploadfile = $uploaddir . basename($_FILES['upload']['name']);

echo "<p>";

if (move_uploaded_file($_FILES['upload']['tmp_name'], $uploadfile)) {
  echo "File is valid, and was successfully uploaded.\n";
} else {
   echo "Upload failed";
}

echo "</p>";
echo '<pre>';
echo 'Here is some more debugging info:';
print_r($_FILES);
print "</pre>";

?> 
```

和 curl 命令（[source](http://curl.haxx.se/docs/httpscripting.html)）

```
curl --form upload=@file --form press=OK http://wiki/upload/upload.php 
```

最后，我允许了一些主机`httpd.conf`

```
<Directory "/var/www/html/dokuwiki/upload">
Order allow,deny
Allow from 192.168.1 
```

# java - 如何从私有访问变量返回数据？

> ID：15142345
> 
> 赞同：0
> 
> 时间：2013-02-28T17:55:52.460
> 
> 标签：java, return

这是一个要求用户输入 1 来存储名称的程序。然后程序会提示用户输入他/她的名字。之后，程序将数据存储在一个数组中。然后我必须使用一种方法来进行存储。但是，我有一个 getter 和 setter 方法，但我收到一个错误“错误：名称在 className 中具有私有访问权限”。

我想从我的“className”构造函数中返回名称。

感谢您的帮助。谢谢。

主类“ReturnName”

```
import javax.swing.JOptionPane;

   public class ReturnName
    {
  public static void main (String[] args)
    {

className x = new className();

int menu = Integer.parseInt(JOptionPane.showInputDialog("Choose an option:" + "\n" + 
                                                        "Enter 1 to store name"));

if(menu == 1){
String[] input1 = new String[1];

for(int i = 0; i < input1.length; i ++){

String str1 = JOptionPane.showInputDialog("Enter your name");

input1[i] = str1;

} 
method(input1);

}

}public static void method(String [] input1){ 

String Name = "";

for(int i = 0; i < input1.length; i++){

    Name = input1[i];

}   
className HoldName = new className();
System.out.println(HoldName.Name);

   }

   } 
```

班级名称

```
class className{

private int Menu;
private String Name;

public className(){  

   Menu = 0;
   Name = "";

}

public className(String n, int m){

   Menu = m;
   Name = n;

}
public String getName(){

    return Name;
}

public int getMenu(){

    return Menu;
}

public void setName(String n){

    Name = n;
}

public void setMenu(int m){

    Menu = m;
}

     } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T17:58:00.540

是的，因为访问修饰符`Name`是私有的，不能这样访问，所以不要直接调用`HoldName.Name`use getter方法`HoldName.getName()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T17:59:42.807

问题是`ReturnName`试图读取私有变量的值`Name`。请记住，私有变量就是：**私有**，即只能从声明该变量的对象中读取和写入。如果其他对象想要访问该变量，它们必须通过 getter 方法。

编辑：没有打印名称，因为该方法`setName`从未被调用。for 循环`method`也是错误的。

做：

```
 public static void method(String name){ 
  className holdName = new className();
  className.set(name);
  System.out.println(holdName.getName());
 } 
```

并将其称为：

```
 String str1 = JOptionPane.showInputDialog("Enter your name");
 method(str1); 
```

# android - 如何使用 ActivityInstrumentationTestCase2 测试捏合手势

> ID：15142348
> 
> 赞同：1
> 
> 时间：2013-02-28T17:56:01.050
> 
> 标签：android, junit

我想使用 ActivityInstrumentationTestCase2 在我的主要活动上测试捏合手势 我在我的主要活动中测试了许多其他功能，但我仍然不知道如何测试捏合手势，我该怎么做？

# c - strncpy 中的 SEGMENTATION FAULT - 从字典中加载

> ID：15142349
> 
> 赞同：2
> 
> 时间：2013-02-28T17:56:06.870
> 
> 标签：c, load, segmentation-fault, strcpy, strncpy

我有这个函数“加载”，我从字典中读取单词并将它们放入链接列表的哈希表中。当我尝试读取一行并将其保存在我的 new_node->text 中时，编译器返回 SEGMENTATION FAULT 我不知道为什么。当我使用 strncpy 时出现错误。

```
#define HASHTABLE_SIZE 76801

typedef struct node
{
        char text[LENGTH+1];
        //char* text;
        //link to the next word
        struct node* next_word;
}
node;

    node* hashtable[HASHTABLE_SIZE];

    bool load(const char* dictionary)
    {
        FILE* file = fopen(dictionary,"r");
        unsigned long index = 0;
        char str[LENGTH+1];

        if(file == NULL)
        {
            printf("Error opening file!");
            return false;
        }

        while(! feof(file))
        {
            node * new_node = malloc(sizeof(node)+1000);

            while( fscanf(file,"%s",str) > 0)
            {
                printf("The word is %s",str);
                strncpy(new_node->text,str,LENGTH+1);
                //strcpy(new_node->text,str);

                new_node->next_word = NULL;
                index = hash( (unsigned char*)new_node->text);

                if(hashtable[index] == NULL)
                {
                    hashtable[index] = new_node;
                }
                else
                {
                    new_node->next_word =  hashtable[index];
                    hashtable[index] = new_node;
                }

                n_words++;

            }
            //free(new_node);

        }
        fclose(file);
        loaded = true;

        return true;    
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T18:30:45.730

让我们逐行查看您的代码，好吗？

```
 while(! feof(file))
    { 
```

这不是正确的使用方式`feof`——查看帖子[为什么“while (!feof (file))”总是错误的？](https://stackoverflow.com/questions/5431941/while-feof-file-is-always-wrong/)就在 StackOverflow 上。

```
 node * new_node = malloc(sizeof(node)+1000); 
```

嗯。。好。我们为一个节点和 1000 字节分配空间。这有点奇怪，但是嘿... RAM 很便宜。

```
 while( fscanf(file,"%s",str) > 0)
        { 
```

嗯...*另一个*循环？好的...

```
 printf("The word is %s",str);
            strncpy(new_node->text,str,LENGTH+1);
            //strcpy(new_node->text,str);

            new_node->next_word = NULL;
            index = hash( (unsigned char*)new_node->text); 
```

嘿！等一下……在第二个循环中，我们不断`new_node`重复覆盖……

```
 if(hashtable[index] == NULL)
            {
                hashtable[index] = new_node;
            }
            else
            {
                new_node->next_word =  hashtable[index];
                hashtable[index] = new_node;
            } 
```

**假设两个词散列到同一个桶：**

好的，所以第一次通过循环，`hashtable[index]`将指向`NULL`并设置为指向`new_node`。

第二次通过循环，`hashtable[index]`is not `NULL`so`new_node`将指向任何`hashtable[index]`指向 (hint: `new_node`) 并将`hashtable[index]`指向`new_node`)。

你知道[衔尾蛇](http://en.wikipedia.org/wiki/Ouroboros)是什么吗？

**现在假设它们不散列到同一个桶：**

现在其中一个桶包含错误的信息。如果您首先在存储桶 1 中添加“hello”，然后在存储桶 2 中添加“再见”，当您尝试遍历存储桶 1 时，您可能（仅因为链接代码被破坏）找到不属于存储桶 1 的“再见”全部。

*您应该为要添加的每个*单词分配一个*新*节点。不要重复使用同一个节点。

# applescript - applescript 将 2 种文件移动到不同的文件夹

> ID：15142350
> 
> 赞同：0
> 
> 时间：2013-02-28T17:56:07.617
> 
> 标签：applescript

嗨，我正在尝试创建一个 Applescript 来执行以下操作：

一周以来，我的硬盘上有几个 jpg 和 eps 文件。我有两个文件夹：矢量和图像。几天后，我得到了几十个这样的混合文件，我必须手动选择并移动到其各自的文件夹中。

如何将 .eps 移至 VECTOR 文件夹，将 jpg 移至 IMAGES 文件夹。我对applescripting一无所知，所以我复制了其他脚本的一部分并将其放在一起：

在运行 {输入，参数} - 复制

```
if theExtension is "eps" then
    set destination to ~/user/Desktop/VECTO
end if
    tell application "Finder"
        move anItem to destination
if theExtension is "jpg" then
    set destination to ~/user/Desktop/IMAGO
end if
    tell application "Finder"
        move anItem to destination 
```

结束运行

当然这是错误的，但希望有人能帮我把这个直说Thnx！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:07:40.137

我假设您从问题的措辞方式将其整合到 Automator 工作流程中。

```
on run {input, parameters} -- copy
    repeat with aFile in input
        tell application "Finder"
            if name extension of aFile is "eps" then
                move aFile to folder ((path to desktop as text) & "VECTO")
            else if name extension of aFile is "jpg" then
                move aFile to folder ((path to desktop as text) & "IMAGO")
            end if
        end tell
    end repeat 
end run 
```

如果没有，您可以使用：

```
set myFiles to (choose file with multiple selections allowed)
repeat with aFile in myFiles
    tell application "Finder"
        if name extension of aFile is "eps" then
            move aFile to folder ((path to desktop as text) & "VECTO")
        else if name extension of aFile is "jpg" then
            move aFile to folder ((path to desktop as text) & "IMAGO")
        end if
    end tell
end repeat 
```

# sql-server - 如何使用 SQL Server 截断字符串

> ID：15142356
> 
> 赞同：127
> 
> 时间：2013-02-28T17:56:21.410
> 
> 标签：sql-server, tsql

我在 SQL Server 中有大字符串。我想将该字符串截断为 10 或 15 个字符

原始字符串

```
this is test string. this is test string. this is test string. this is test string. 
```

所需字符串

```
this is test string. this is ...... 
```

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2013-02-28T17:58:06.283

如果您只想返回长字符串的几个字符，您可以使用：

```
select 
  left(col, 15) + '...' col
from yourtable 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!18/59b71/1)。

这将返回字符串的前 15 个字符，然后将 连接`...`到它的末尾。

如果你想确保小于 15 的字符串不会得到，`...`那么你可以使用：

```
select 
  case 
    when len(col)>15
    then left(col, 15) + '...' 
    else col end col
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!18/d81eb3/1)

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-02-28T18:24:05.047

您可以使用

```
LEFT(column, length) 
```

或者

```
SUBSTRING(column, start index, length) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-25T09:14:36.750

您还可以使用 Cast() 操作：

```
 Declare @name varchar(100);
set @name='....';
Select Cast(@name as varchar(10)) as new_name 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-24T23:38:51.387

我认为这里的答案很好，但我想添加一个场景。

有几次我想从字符串前面去掉一定数量的字符，而不用担心它的长度。使用 RIGHT() 和 SUBSTRING() 有几种方法可以做到这一点，但它们都需要知道字符串的长度，这有时会减慢速度。

我改用 STUFF() 函数：

```
SET @Result = STUFF(@Result, 1, @LengthToRemove, '') 
```

这将用空字符串替换不需要的字符串的长度。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-31T21:11:04.747

您也可以使用以下内容，iif 避免了 case 语句，仅在需要时添加省略号（仅适用于 SQL Server 2012 及更高版本），并且 case 语句更符合 ANSI（但更冗长）

```
SELECT 
  col, LEN(col), 
  col2, LEN(col2), 
  col3, LEN(col3) FROM (
  SELECT 
    col, 
    LEFT(x.col, 15) + (IIF(len(x.col) > 15, '...', '')) AS col2, 
    LEFT(x.col, 15) + (CASE WHEN len(x.col) > 15 THEN '...' ELSE '' END) AS col3 
  from (
      select 'this is a long string. One that is longer than 15 characters' as col
      UNION 
      SELECT 'short string' AS col
      UNION 
      SELECT 'string==15 char' AS col
      UNION 
      SELECT NULL AS col
      UNION 
      SELECT '' AS col
) x
) y 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-03T13:19:05.817

```
 CASE
     WHEN col IS NULL
        THEN ''
     ELSE SUBSTRING(col,1,15)+ '...' 
     END AS Col 
```

# e-commerce - OpenCart：重命名欢迎模块上的选项卡

> ID：15142360
> 
> 赞同：0
> 
> 时间：2013-02-28T17:56:31.053
> 
> 标签：e-commerce, opencart

我正在使用“欢迎”模块在我网站的不同部分插入自定义 html。是否可以重命名选项卡以便我可以更轻松地找到我的模块？

现在，当我查看我的欢迎模块时，内容被组织为“模块 1”、“模块 2”、“模块 3”等。我想给这些标签自定义名称，以便我可以更快地找到我的内容。诸如“首页Facebook公告”、“产品运输信息”等。

使用的版本：v1.5.5.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:27:52.120

这并不容易，目前这些名称没有存储在数据库中，这个模块 1 ，模块 2 的名称来自welcome.tpl 文件，有一个变量`$module_row`像foreach模块一样递增`$module_row++`，名称就像`echo $tab_module . ' ' . $module_row;`

如果你真的想要它，你可以在表中添加一个新列`setting`并将你的模块名称存储在那里，但是你也必须编辑你的`getSetting()`函数......

如果你不做你正在做的事情，它有点复杂而且不可取......

# asp.net - 避免 Windows 身份验证网站的登录提示

> ID：15142365
> 
> 赞同：0
> 
> 时间：2013-02-28T17:57:00.710
> 
> 标签：asp.net, image, windows-authentication

我的网站有 Windows 身份验证，并且只允许我在 web.config 文件中提到的那些用户。其余用户应该无法访问该网站，所以我有一个 denied.html 页面，我希望其他用户在尝试访问时获得access.Following 是我的代码。

在 web.config

```
<authentication mode="Windows">
</authentication>    
<authorization>
  <allow users="domain\user1, domain\user2" />
  <deny users="*"/>
</authorization> 
```

在 Global.asax 的 Application_EndRequest 方法中

```
 protected void Application_EndRequest(Object sender, EventArgs e)
{
    HttpContext context = HttpContext.Current;
    if (context.Response.Status.Substring(0, 3).Equals("401"))
    {
        context.Response.ClearContent();
        Server.Execute("~/Denied.html");
    }
} 
```

在 Denied.html 中

```
<img src="Images/Access_Denied.jpg" /> 
```

现在我有 2 个问题，我已经尝试过并用谷歌搜索但找不到解决方案。

1) 无权访问的用户会收到一个对话框，要求他们输入 LAN 凭据，只有在 3 次尝试后，他们才会被重定向到 denied.html。有没有办法避免登录提示直接获取denied.html？

2) 我试图在 denied.html 中加载的图像显示在页面设计中，但没有出现在运行时，我就是不知道为什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:53:06.370

我无法回答 #1，但 #2 发生是因为您拒绝访问配置文件的资源。您可以在 web.config 中覆盖它...

```
...
...
</system.web>
  <location path="Images">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location> 
```

# c# - 如何检查用户是否评价了我的应用

> ID：15142367
> 
> 赞同：2
> 
> 时间：2013-02-28T17:57:04.547
> 
> 标签：c#, windows-8, microsoft-metro

我为 Windows 8 商店开发了一个简单的免费游戏，现在我想请我的用户给游戏打分，并可能给它写评论。

我如何检查他们是否已经这样做了（即对游戏进行评分或写了评论），所以我不再问了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T18:49:46.410

您可以访问如下所述的商店信息，包括评论和有关撰写评论的用户的数据。然后，您可以尝试将该信息与通过 Live SDK 为当前用户提供的用户信息进行匹配。您将只能匹配 FirstName LastName，没有可用的通用唯一 ID，或者可能存在，用户图像图标 URL 可能在两者之间匹配，但我尚未验证。

[https://services.apps.microsoft.com/4R/6.2.9200-1/1/en-US/m/US/Apps/f514d64b-8705-43b7-a400-c4f4f3dedfc0/Reviews/all/s/date/ 1/pn/1](https://services.apps.microsoft.com/4R/6.2.9200-1/1/en-US/m/US/Apps/f514d64b-8705-43b7-a400-c4f4f3dedfc0/Reviews/all/s/date/1/pn/1)

[http://jasonthomascarter.blogspot.com/2013/08/the-friendly-developers-guide-to.html](http://jasonthomascarter.blogspot.com/2013/08/the-friendly-developers-guide-to.html)

今天，我收到了一位开发人员对我的一个 Windows 应用商店应用程序轮盘赌的支持电子邮件的询问。这非常令人耳目一新，而且我非常愿意与其他开发人员分享信息。我更兴奋的是看到他们将创造什么，而不是担心竞争的潜力。所以在这里和大家分享一下。无论如何，这位开发人员想知道如何获取此应用程序信息，我将解释我如何访问该信息以及您也可以如何访问。

首先是一点自我宣传，除了 App Roulette，我在其他一些应用程序中使用了这些信息。Developer Dashboard 一站式商店，可查看来自所有国家/地区的所有应用程序评论，只需轻按一下即可翻译每条评论，Windows Store Developers Windows 商店中所有开发人员（超过 10000 名）及其应用程序的目录，最活跃Reviewers 最多产的应用程序评论者及其评论的目录，在我自己的投资组合应用程序软件开发人员中列出了我在 Windows 应用商店中发布的所有其他应用程序，请尝试其中的一些。

开始了！首先，我们将从 Windows Store 网站的 Robots.txt 文件开始。[http://apps.microsoft.com/robots.txt](http://apps.microsoft.com/robots.txt)

网站使用 robots.txt 来指导网络爬虫如何表现、他们希望他们看到什么以及他们不希望他们看到什么。

[http://www.robotstxt.org/](http://www.robotstxt.org/)

Web 机器人（也称为 Web Wanderers、Crawlers 或 Spiders）是自动遍历 Web 的程序。谷歌等搜索引擎使用它们来索引网络内容，垃圾邮件发送者使用它们来扫描电子邮件地址，它们还有许多其他用途。

在这种情况下，我们感兴趣的是 Sitemaps.xml 索引文件。[http://apps.microsoft.com/windows/sitemap_index.xml](http://apps.microsoft.com/windows/sitemap_index.xml)

[http://www.sitemaps.org/](http://www.sitemaps.org/)

站点地图是网站管理员通知搜索引擎有关其网站上可供抓取的页面的一种简便方法。在最简单的形式中，站点地图是一个 XML 文件，其中列出了站点的 URL 以及有关每个 URL 的附加元数据（上次更新时间、更改频率以及相对于站点中其他 URL 的重要性） ) 以便搜索引擎可以更智能地抓取网站。

站点地图索引文件列出了每个单独的站点地图 XML 文件。在撰写本文时，apps.microsoft.com 网站有 141 个单独的站点地图 XML 文件。

在各个文件中包含数千个指向 Windows 应用商店应用网页的 URL。例如 PlayTo Receiver 应用程序的 URL：http: [//apps.microsoft.com/windows/en-us/app/playto-receiver/72a6ba17-2d4e-4a1c-bcfb-cdc5d4b32d0e](http://apps.microsoft.com/windows/en-us/app/playto-receiver/72a6ba17-2d4e-4a1c-bcfb-cdc5d4b32d0e)

这些应用程序的网页确实包含一些我们可以从 HTML 中抓取的信息，但我们可以做得更好......我们在这里获得的关键信息是应用程序 ID 以及这些应用程序 ID 发布到的地理区域店铺。例如：72a6ba17-2d4e-4a1c-bcfb-cdc5d4b32d0e 和 en-us 等...

现在到了好东西，我们可以使用我们新发现的 App Id 和地理信息调用一些 Web 服务。

[https://services.apps.microsoft.com/browse/6.2.9200-1/615/en-US_en-US/c/US/cp/10005001/Apps/72a6ba17-2d4e-4a1c-bcfb-cdc5d4b32d0e](https://services.apps.microsoft.com/browse/6.2.9200-1/615/en-US_en-US/c/US/cp/10005001/Apps/72a6ba17-2d4e-4a1c-bcfb-cdc5d4b32d0e)

通过此 Web 服务可以获得大量信息，但元素名称并没有清楚地说明这些信息。这是我对其中许多（不是全部）的解释，以帮助您入门。

sSubCategoryName = rawXML.getElementsByTagName('Sc')[0].getElementsByTagName('N')[0].childNodes[0].nodeValue; sSubCategoryId = rawXML.getElementsByTagName('Sc')[0].getElementsByTagName('I')[0].childNodes[0].nodeValue; sHasTrial = rawXML.getElementsByTagName('Try')[0].childNodes[0].nodeValue; sDescription = rawXML.getElementsByTagName('D')[0].childNodes[0].nodeValue; sDeveloper = rawXML.getElementsByTagName('Dev')[0].childNodes[0].nodeValue; sWebsite = rawXML.getElementsByTagName('Ws')[0].childNodes[0].nodeValue; sSupport = rawXML.getElementsByTagName('Sws')[0].childNodes[0].nodeValue; sPrivacy = rawXML.getElementsByTagName('Pu')[0].childNodes[0].nodeValue; sCategoryName = rawXML.getElementsByTagName('C')[0].getElementsByTagName('N')[0].childNodes[0]。节点值；sCategoryId = rawXML.getElementsByTagName('C')[0].getElementsByTagName('I')[0].childNodes[0].nodeValue; sPrice = rawXML.getElementsByTagName('P')[0].childNodes[0].nodeValue; sForegroundColor = rawXML.getElementsByTagName('Fg')[0].childNodes[0].nodeValue; sBackgroundColor = rawXML.getElementsByTagName('Bg')[0].childNodes[0].nodeValue; sAppIcon = rawXML.getElementsByTagName('Ico')[0].childNodes[0].nodeValue; sAppName = rawXML.getElementsByTagName('T')[0].childNodes[0].nodeValue; sPackageFamilyName = rawXML.getElementsByTagName('Pfn')[0].childNodes[0].nodeValue; sResourceId = rawXML.getElementsByTagName('R')[0].childNodes[0].nodeValue; sId = rawXML.getElementsByTagName('I')[0].childNodes[0].nodeValue; sCapabilities = sCapabilities + arrCapabilities[k]。childNodes[0].nodeValue+","; sUpdate = rawXML.getElementsByTagName('Ud')[0].childNodes[0].nodeValue; sFeatures1 = rawXML.getElementsByTagName('Dbp')[0].childNodes[0].nodeValue; sFeatures2 = rawXML.getElementsByTagName('Dbp')[1].childNodes[0].nodeValue; sFeatures3 = rawXML.getElementsByTagName('Dbp')[2].childNodes[0].nodeValue; sFeatures4 = rawXML.getElementsByTagName('Dbp')[3].childNodes[0].nodeValue; sFeatures5 = rawXML.getElementsByTagName('Dbp')[4].childNodes[0].nodeValue; sFeatures6 = rawXML.getElementsByTagName('Dbp')[5].childNodes[0].nodeValue; sFeatures7 = rawXML.getElementsByTagName('Dbp')[6].childNodes[0].nodeValue; sFeatures8 = rawXML.getElementsByTagName('Dbp')[7].childNodes[0].nodeValue; sFeatures9 = rawXML.getElementsByTagName('Dbp')[8]。childNodes[0].nodeValue; sScreenshot1 = rawXML.getElementsByTagName('Ss')[0].getElementsByTagName('U')[0].childNodes[0].nodeValue sScreenshot2 = rawXML.getElementsByTagName('Ss')[1].getElementsByTagName('U') [0].childNodes[0].nodeValue sScreenshot3 = rawXML.getElementsByTagName('Ss')[2].getElementsByTagName('U')[0].childNodes[0].nodeValue sScreenshot4 = rawXML.getElementsByTagName('Ss') [3].getElementsByTagName('U')[0].childNodes[0].nodeValue sScreenshot5 = rawXML.getElementsByTagName('Ss')[4].getElementsByTagName('U')[0].childNodes[0].nodeValue sScreenshot6 = rawXML.getElementsByTagName('Ss')[5].getElementsByTagName('U')[0].childNodes[0].nodeValue sScreenshot7 = rawXML.getElementsByTagName('Ss')[6].getElementsByTagName('U') [0]。

Windows 应用商店不仅仅是应用程序，还有评论，而且还有很多。目前，Windows 应用商店中有超过 210,000 条应用评论。这些评论来自世界各地，所以你需要一些国家代码，你方便的花花公子 App Id 并注意最后的 pn/1，你会发现这个服务每页只返回 10 条评论，只是增加将此值设置为 pn/2、pn/3 等。直到您的评论用完。

var arrCountryCodes = [“AE”、“AR”、“AT”、“AU”、“BE”、“BG”、“BH”、“CA”、“CH”、“CL”、“CN”、“CO "、"CR"、"CY"、"CZ"、"DE"、"DK"、"DZ"、"EE"、"EG"、"ES"、"FI"、"FR"、"GB"、 “GR”、“HK”、“HR”、“HU”、“ID”、“IE”、“IL”、“IN”、“IQ”、“IT”、“JO”、“JP”、“KW” "、"KZ"、"LB"、"LK"、"LT"、"LU"、"LV"、"LY"、"MA"、"MT"、"MX"、"MY"、"NL"、 “否”、“新西兰”、“OM”、“PE”、“PH”、“PK”、“PL”、“QA”、“RO”、“RS”、“RU”、“SA”、“SE”、“SG”、“SI”、“SK” "、"TH"、"TN"、"TR"、"TT"、"UA"、"US"、"UY"、"VE"、"VN"]；

[https://services.apps.microsoft.com/4R/6.2.9200-1/1/en-US/m/US/Apps/f514d64b-8705-43b7-a400-c4f4f3dedfc0/Reviews/all/s/date/ 1/pn/1](https://services.apps.microsoft.com/4R/6.2.9200-1/1/en-US/m/US/Apps/f514d64b-8705-43b7-a400-c4f4f3dedfc0/Reviews/all/s/date/1/pn/1)

这个对元素名称的描述性更强，所以我认为不需要进一步解释。您可以看到全名、显示名称、用户选择用来代表自己的图像。

接下来我们可以做一些搜索...... [https://services.apps.microsoft.com/search/6.2.9200-1/615/en-US_en-US/m/US/c/US/il /en-US/cp/10005001/query/cid/0/pf/1/pc/0/pt/x64/af/0/lf/0/s/0/2/pn/0?phrase=软件](https://services.apps.microsoft.com/search/6.2.9200-1/615/en-US_en-US/m/US/c/US/il/en-US/cp/10005001/query/cid/0/pf/1/pc/0/pt/x64/af/0/lf/0/s/0/2/pn/0?phrase=Software)开发人员

在这里它再次变得有点神秘，但现在你应该已经习惯了。您可以从 I 元素获取 App ID 并将其从那里带回浏览服务*f514d64b-8705-43b7-a400-c4f4f3dedfc0*

至此，您已经掌握了从 Windows 应用商店中提取大量信息的基础知识，然后您就可以随心所欲了。如果您发现这很有用和/或利用这些信息制作了一些应用程序，请分享一些额外的信息，否则请在评论中告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:35:40.660

似乎没有 API 可以执行此操作。如果有的话，它可能是[CurrentApp](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.store.currentapp.aspx)类的一部分，它会告诉你应用程序是否已被购买等信息。

如果您想提示用户填写评分（他们可能已经完成），您可以按照此线程中概述的说明进行操作：

[http://social.msdn.microsoft.com/Forums/en-SG/winappswithcsharp/thread/3cba0db4-c2f6-4c79-98a9-0f740dfacf61](http://social.msdn.microsoft.com/Forums/en-SG/winappswithcsharp/thread/3cba0db4-c2f6-4c79-98a9-0f740dfacf61)

我喜欢最后一条消息，它向您展示了如何直接链接到评论选项卡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T22:29:29.320

贾里德几乎已经做到了。我不认为你可以，除非有一个 Windows Store API 为你的应用程序提供该信息。用户信息和他/她的评分和评论状态和数据存储在您的应用程序之外，因此您必须查询外部数据源（在本例中为 Windows 应用商店）以了解他或她是否已经对您的应用程序进行了评分和评论。当前版本的[Windows 应用商店 API](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.store)不提供对该信息的直接访问。

这是一种简单但不那么准确的解决方法。如果用户没有提供反馈，您可以提醒他们提供反馈，方法是提供一个链接到评论网页的按钮，并在您的应用程序中提供一个快速是/否问题并将答案存储在本地。在一个完美的世界里，用户已经完成了审查并且他/她对您的问题回答是，并且他们不会被另一个提醒所困扰。

# php - 如何使用未转义的 & 符号解析 XML

> ID：15142371
> 
> 赞同：0
> 
> 时间：2013-02-28T17:57:10.083
> 
> 标签：php, xml, xmlreader

我必须阅读大型（大约 200MB）XML 文件，我正在使用 xmlreader 和 PHP。节点 URL 中包含未转义的 & 符号。解析总是在第一个 url 节点上停止。我使用的编码 windows-1250 与 XML 文件的 xml 标记中指定的相同。

我收到错误：`parser error : EntityRef: expecting ';' in`

是否可以解析带有 & in NODE 值的 XML？

感谢您的任何提示，如果您需要，我可以分享代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-17T00:47:12.910

@hakre 是正确的。为了解析任何 XML，您必须首先预处理数据。原因是在 XML 中，“&”仅用于实体。例如，如果您使用的是 XML，则开头的 '<' 和关闭的 '>' 非常重要，以下节点对解析器没有任何意义：

```
<object>This object is > than the other object</object> 
```

解析器认为文本中间的“>”试图在某处关闭标签，但没有匹配的开始标签，所以会混淆。为此，您需要键入以下内容：

```
<object>This object is &gt; than the other object</object> 
```

其他实体包括：`&lt;`和`&amp;`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:00:07.753

> 是否可以解析带有 & in NODE 值的 XML？

不，这意味着该文件根本不是格式良好的 XML，因此不能真正成为 XML 文件，并且没有 XML 文件解析器可以处理它，否则它不会是 XML 解析器。

但是，您可以在将数据传递给 XML 解析器之前对其进行预处理并自己解决问题 ( `&`-> `&amp;`)。

# android - Phonegap (Cordova)、Android、Admob：AdView 与 WebView 重叠

> ID：15142372
> 
> 赞同：2
> 
> 时间：2013-02-28T17:57:15.040
> 
> 标签：android, cordova, admob, adview

我正在使用 Phonegap（现在也称为 Apache Cordova）为 Android 开发一个应用程序，并且我计划从 Google Admob 获得广告。我有以下代码：

```
public void onCreate(Bundle savedInstanceState)
    {
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/index.html");

    adView = new AdView(this, AdSize.BANNER, AdMob_Ad_Unit); 
    adView.setMinimumHeight(75);
    adView.setMinimumWidth(320);
    LinearLayout layout = super.root;
    layout.addView(adView);
    layout.setHorizontalGravity(android.view.Gravity.CENTER_HORIZONTAL);              //This centers the ads in landscape mode.
    adView.loadAd(new AdRequest()); 
```

}

这成功地在我的页面底部显示了一个广告，但 AdView 覆盖了我的 WebView 的一部分......我尝试解决问题，但我在 phonegap 的 java 部分的技能非常有限：-/

# r - 在 R 中绘制重叠的横向图

> ID：15142374
> 
> 赞同：4
> 
> 时间：2013-02-28T17:57:16.657
> 
> 标签：r, normal-distribution

我在 R 中有以下代码。

```
x = c(rep(2,10),rep(4,10))
y1 = c(5.1,3,4.2,4.1,4.8,4.0,5,4.15,3,4.5)
y2 = c(9.1,8,9.2,8.2,7,9.5,8.8,9.3,10,10.4)
y = c(y1,y2)
plot(x,y,pch=16,cex=0.9,xlim=c(0,6),ylim=c(0,13)) 
```

此代码生成带有两个点的图。我已经使用 powerpoint 在这些波段上横向覆盖了正常曲线。如何使用实际均值和 sd 值在 R 中执行此操作（绘制横向正态曲线）？**注意**：我再说一遍，正态曲线不是情节的一部分。上面的代码只生成原始图。

![在此处输入图像描述](../Images/df56034600460eb5d0d449b6afd5b14d.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T18:25:00.460

首先，计算 和 的均值和标准`y1`差`y2`。

```
m1<-mean(y1)
s1<-sd(y1)
m2<-mean(y2)
s2<-sd(y2) 
```

然后制作了两个数据框（为方便起见），其中包含 y 值作为数字序列（比实际值`y1`和`y2`值更宽）。然后计算密度值以`x`使用`dnorm()`并计算平均值和标准偏差值。然后添加`2`或`4`将值移动到所需位置。

```
df1<-data.frame(yval=seq(1,7,0.1),xval=(dnorm(seq(1,7,0.1),m1,s1)+2))
df2<-data.frame(yval=seq(6,12,0.1),xval=(dnorm(seq(6,12,0.1),m2,s2)+4)) 
```

添加了具有功能的密度线`lines()`。

```
plot(x,y,pch=16,cex=0.9,xlim=c(0,6),ylim=c(0,13))
with(df1,lines(xval,yval))
with(df2,lines(xval,yval)) 
```

![在此处输入图像描述](../Images/fbbb1baf35917373cde7a05d908a465d.png)

# jquery - jQuery backgroundPosition css sprites 不能一起工作？

> ID：15142375
> 
> 赞同：0
> 
> 时间：2013-02-28T17:57:16.690
> 
> 标签：jquery, css, sprite, background-position

我已经开始为我的照片制作网络作品集。我不是网页设计师，它只是让我感兴趣。这是页面： jsfiddle中的[http://jsfiddle.net/RhjJZ/1/](http://jsfiddle.net/RhjJZ/1/)。我制作了 CSS 精灵来为`<a>`链接制作背景。我希望它们在鼠标悬停在它们上方时进行更改，所以我用 jQuery 制作了该脚本，它似乎确实有效，我无法想象为什么，尝试了很多不同的方式......搜索了很多类似的问题互联网，但他们无法帮助我。如果有人指出我做错了什么，我会很高兴！我的菜单图片是 1x296 像素的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:24:31.977

问题是`menu()`由于 jQuery，您的函数不在正常范围内，因此您收到 Javascript 错误：`menu(xx) is not a function`.

解决方案是使用`data-`前缀属性方案设置这些硬编码值，然后使用 jQuery处理`mouseover`和事件。`mouseout`

HTML：

```
<body>
    <header id="menu">
            <h1>dawe's portfolio</h1>

        <nav>   <a id="m_portf" data-one="0" data-two="-37" href="#portfolio"
            width="1px">portfolio</a>
    <a id="m_music" data-one="-72" data-two="-111"
            href="#music">music</a>
    <a id="m_about" data-one="-148" data-two="-185"
            href="#about">about</a>
    <a id="m_contact" data-one="-222" data-two="-259"
            href="#contact">contact</a>

        </nav>
    </header>
</body> 
```

Javascript：

```
$('a').on('mouseover',function(){
    $(this).animate({'background-position': '0px ' +$(this).attr('data-one')+'px';}, 1500);
});

$('a').on('mouseout',function(){
    $(this).animate({'background-position': '0px ' +$(this).attr('data-two')+'px';}, 1500);
}); 
```

# modeling - 企业架构师显示奇怪的符号。这是什么意思？

> ID：15142386
> 
> 赞同：4
> 
> 时间：2013-02-28T17:58:03.577
> 
> 标签：modeling, enterprise-architect

有时，在开始更详细的 UML 工作和开发之前构建的一些（不是全部！）需求工件上会出现一个红色三角形。

我不知道是什么原因造成的，也不知道它要表达什么。更重要的是，我无法摆脱它。;)

![这个三角形告诉我什么？](../Images/f0e77f9a12199dcafce96a2992f4e151.png)

据我所知，这与 UML 或 SysML 规范无关——是吗？

谁能解释一下？

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T17:11:44.420

它与 UML 或 SysSML 无关。所说的是有人为该元素添加了书签。您可能不小心按了 shift-空格键。

如果您在帮助文件中搜索“管理书签”，您将获得完整的说明。

# c# - 如何从工作线程轮询取消

> ID：15142388
> 
> 赞同：0
> 
> 时间：2013-02-28T17:58:16.893
> 
> 标签：c#, multithreading, cancellation

我有一个 UI，它产生一个后台工作线程，该线程执行一个复杂的任务树和子任务，大约需要一分钟才能完成。

一个要求是后台工作任务必须能够在它开始后被取消。

目前我的解决方案很幼稚，使代码变得一团糟。在 UI 中按下取消按钮时，将设置取消令牌。工作线程定期（在任务之间）轮询此令牌，如果已设置，则退出：

```
void ThreadWorkerHandler(CancelToken cancelToken)
{
    DoTask1(cancelToken);
    if (cancelToken.IsSet)
        return;
    DoTask2(cancelToken);
    if (cancelToken.IsSet)
        return;
    DoTask3(cancelToken);
    if (cancelToken.IsSet)
        return;
    DoTask4(cancelToken);
}

void DoTask2(CancelToken cancelToken)
{
    DoSubTask2a();
    if (cancelToken.IsSet)
        return;
    DoSubTask2b();
    if (cancelToken.IsSet)
        return;
    DoSubTask2c();
    if (cancelToken.IsSet)
        return;
} 
```

有更好的解决方案吗？我正在玩类似 SoLongAs 语句的东西，它会自动插入检查并在满足条件时自动引发内部异常，这将在循环结束时在内部被捕获，例如：

```
void ThreadWorkerHandler(CancelToken cancelToken)
{
    SoLongAs (canelToken.IsSet == false)
    {
        DoTask1(cancelToken);
        DoTask2(cancelToken);
        DoTask3(cancelToken);
        DoTask4(cancelToken);
    }
} 
```

但我想由于某种原因这行不通，更重要的是我怀疑这样的事情是否真的存在。如果没有，有没有比我目前使用的更好的方法来处理这种情况？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:02:17.070

如果您有一组代表您的工作的代表，您可以获得看起来非常接近您的代码片段的东西。它比您的意图语法有*更多*的开销，但关键是它是一个*恒定*的开销，而不是每行的开销。

```
List<Action> actions = new List<Action>()
{
    ()=> DoTask1(cancelToken),
    ()=> DoTask2(cancelToken),
    ()=> DoTask3(cancelToken),
    ()=> DoTask4(cancelToken),
};

foreach(var action in actions)
{
    if (!cancelToken.IsSet)
        action();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:06:05.090

您可以使用`CancellationToken.ThrowIfCancellationRequested()`. 如果设置了令牌，这将引发异常。

也考虑使用`TPL` `Tasks`. 所有子任务都可以一个接一个地用 same 链接起来`CancellationToken`，这将简化你的代码，因为框架会在调用延续之前`TPL`检查状态。`Token`

您的代码如下所示：

```
Task.Factory.StartNew(DoTask1, cancelationToken)
            .ContinueWith(t => DoTask2(), cancelationToken)
            .ContinueWith(t => DoTask3(), cancelationToken)
            .ContinueWith(t => DoTask4(), cancelationToken) 
```

**请注意**此解决方案，假设`DoTask<i>`不会引发除`OperationCanceledException`.

**注意 2您不必`ThrowIfCancellationRequested()`在 Tasks/subTasks 正文**中调用。**`TPL`将在调用任何延续之前自动检查令牌状态。但是您***可以***使用此方法中断任务/子任务的执行。**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T18:44:16.127

Servy的想法非常好。我只是在偷它（归功于他！）并演示如何将它与`List<Action>`. 我会完全理解任何认为这“太可爱”的人，但我认为它具有一定的优雅。

这是一段展示如何使用扩展方法的摘录。根据 Servy 的想法，该扩展需要一个 Action 委托列表并依次运行每个委托，直到完成或取消。

```
private static bool test(CancellationToken cancelToken)
{
    return new List<Action> 
    { 
        doTask1,
        doTask2,
        doTask3,
        doTask4,
        () => Console.WriteLine("Press a key to exit.")
    }
    .Run(cancelToken);
} 
```

这是整个示例：

```
 using System;
    using System.Collections.Generic;
    using System.Threading;
    using System.Threading.Tasks;

    namespace ConsoleApplication2
    {
        internal class Program
        {
            private static void Main(string[] args)
            {
                CancellationTokenSource cancelSource = new CancellationTokenSource();

                Console.WriteLine("Press any key to interrupt the work.");
                var work = Task<bool>.Factory.StartNew(() => test(cancelSource.Token));
                Console.ReadKey();
                cancelSource.Cancel();
                Console.WriteLine(work.Result ? "Completed." : "Interrupted.");
            }

            private static bool test(CancellationToken cancelToken)
            {
                return new List<Action> 
                { 
                    doTask1,
                    doTask2,
                    doTask3,
                    doTask4,
                    () => Console.WriteLine("Press a key to exit.")
                }
                .Run(cancelToken);
            }

            private static void doTask1()
            {
                Console.WriteLine("Task 1 Working...");
                Thread.Sleep(1000);
                Console.WriteLine("...did some work.");
            }

            private static void doTask2()
            {
                Console.WriteLine("Task 2 Working...");
                Thread.Sleep(1000);
                Console.WriteLine("...did some work.");
            }

            private static void doTask3()
            {
                Console.WriteLine("Task 3 Working...");
                Thread.Sleep(1000);
                Console.WriteLine("...did some work.");
            }

            private static void doTask4()
            {
                Console.WriteLine("Task 4 Working...");
                Thread.Sleep(1000);
                Console.WriteLine("...did some work.");
            }
        }

        public static class EnumerableActionExt
        {
            public static bool Run(this IEnumerable<Action> actions, CancellationToken cancelToken)
            {
                foreach (var action in actions)
                {
                    if (!cancelToken.IsCancellationRequested)
                    {
                        action();
                    }
                    else
                    {
                        return false;
                    }
                }

                return true;
            }
        }
    } 
```**

# asp.net - A: 如何在 asp.net 中的标签上设置新位置

> ID：15142396
> 
> 赞同：0
> 
> 时间：2013-02-28T17:58:36.337
> 
> 标签：asp.net

我正在使用此代码..但它给出了错误，我该如何解决它

lb1[a].Location = new Point(b, 50);

在这里，我想使用 ASP.net 设置标签位置。ASP.net 不支持“位置”关键字吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:13:08.170

使用 css 设置位置（看起来好像您使用的是绝对定位）：

```
.classname {    
    position: absolute;  
    top: 20px;  
    left: 50px;
} 
```

如果要动态添加类：

```
lb1.Attributes.Add("classname", "3"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:00:57.343

如果您尝试设置标签的位置，您可能想要使用 CSS。

```
<asp:Label ID="lblTest" CssClass="labellocation" />

.labellocation { position: absolute; top: 500px; } 
```

# javascript - 如何以 dd.mm.yyyy 格式显示？

> ID：15142400
> 
> 赞同：0
> 
> 时间：2013-02-28T17:58:48.500
> 
> 标签：javascript

```
alert(end); //Wed Oct 22 2014 00:00:00 GMT+0200 (CEST) 
```

如何以 dd.mm.yyyy 格式显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:03:34.267

在 Date 对象上使用[内置方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/prototype#Methods)

```
alert(end.getDate() + "." + (end.getMonth() + 1) + "." + end.getFullYear()); 
```

*注意：我将月份加 1，因为 javascript 返回 0-11 范围内的月份，其中 1 月为 0，2 月 1 日等。*

*附加说明：我在那个加法周围加上括号，否则它只会做另一个字符串连接，所以 2013 年 7 月 6 日将变成 6-61-2013 没有括号*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:00:26.813

如果你不介意额外的依赖，你可以使用 Moment.js [http://momentjs.com](http://momentjs.com)。

# php - PHP 电子邮件 SMTP 服务器响应：554

> ID：15142403
> 
> 赞同：0
> 
> 时间：2013-02-28T17:59:00.043
> 
> 标签：php

伙计们，我有这个 php 代码：

```
$emailTo = 'proyectogoyapatrimonio@gmail.com';
$subject = "Firma // Salvemos el Goya";
$name=$_REQUEST['nombre'];
$apellido=$_POST['apellido'];
$dni=$_POST['dni'];
$email=$_POST['mail'];
$msg=$_POST['msg'];

$ask = "INSERT INTO firmas(nombre,apellido,dni,email,created_at) VALUES('".htmlentities($name)."','".htmlentities($apellido)."','".$dni."','".$email."','".date("Y-m-d H:i:s")."')";
if(mysql_query($ask,$conn)){
    $body = "<html>\n";
    $body .="<head></head>\n";
    $body .="<body>\n";
    $body .="<h4>Firma ProyectoGoya</h4><br/>\n";
    $body .="<h5>Datos:</h5>\n";
    $body .="<b>Nombre Completo:</b> ".$name." ".$apellido." <br/>\n";
    $body .="<b>E-mail:</b> ".$email." <br/>\n";
    $body .="<b>DNI:</b> ".$dni." <br/>\n";
    $body .="</body>\n";
    $body .= "</html>\n";

    $headers = "From: \"".$name."\" <$email>\n";
    $headers .= "To: \"Proyecto Goya\" <".$emailTo.">\n";
    $headers .= "Return-Path: <".$email.">\n";
    $headers .= "MIME-Version: 1.0\n";
    $headers .= "Content-Type: text/HTML; charset=ISO-8859-1\n"; 

    echo $headers."<br/>";

    mail($emailTo, $subject, $body, $headers);
}else{
    echo "Imposible salvar registro en DB.\n Intente nuevamente. \n Si el error persiste, contacte al proovedor del servicio.";
} 
```

现在，问题是，当我向这个 php 发送一个包含所有变量的 POST 请求时，我收到了这个错误：

```
Warning: mail() [function.mail]: SMTP server response: 554 Debe utilizar como remitente una cuenta de correo vï¿½lida. in \\hmfsw\web\DTC001\proyectogoya.org\public_html\send.php on line 36 
```

我回应了 $headers，我得到了这个：

```
From: "Pablo" To: "Proyecto Goya" Return-Path: MIME-Version: 1.0Content-Type: text/HTML; charset=ISO-8859-1 
```

如您所见，我没有收到标题上打印的“发件人”电子邮件。知道为什么会发生这种情况吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:31:44.300

让你的代码更好：

确保您发送的电子邮件具有标题和转换器返回路径。

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'Return-Receipt-To: '.$email.'\r\n'; 

$headers .= 'To: Proyecto Goya <'.$emailTo.'>\r\n';
$headers .= 'From: '.$name.' <'.$email.'>' . '\r\n'; 
```

对于错误 554，尝试更改 php.ini 文件：

```
[mail function]
; For Win32 only.
SMTP = localhost
smtp_port = 25

; For Win32 only.
;sendmail_from = admin@localhost 
```

或者试试

```
[mail function]
; For Win32 only.
SMTP = smtp.srv.net
smtp_port = 25

; For Win32 only.
;sendmail_from = from@srv.net 
```

# geoserver - 是否可以在 sysspatial 以外的模式中创建 Tessellation 表

> ID：15142404
> 
> 赞同：1
> 
> 时间：2013-02-28T17:59:03.000
> 
> 标签：geoserver

根据 geoserver teradata 文档，仅在 sys 空间模式中需要细分表。

我的问题是 - 是否可以配置 geoserver 以从不同的模式中选择镶嵌表？有没有人尝试过成功？

我尝试在创建数据存储时更改曲面细分表模式名称，但 geoserver 仍然仅在 syssptial 模式中查找此表。

有什么输入吗？

# c# - 获取aspx后面的字符串？

> ID：15142405
> 
> 赞同：0
> 
> 时间：2013-02-28T17:59:09.740
> 
> 标签：c#, asp.net

说我输入：

```
blah.com/page.aspx/Touch?test=2 
```

我怎样才能在 Page_Load 中获得“触摸”？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:13:04.460

我认为您想要 Request 对象的[PathInfo](http://msdn.microsoft.com/en-us/library/system.web.httprequest.pathinfo.aspx)属性。

从链接页面：

> 对于 URL `Http://www.contoso.com/virdir/page.html/tail`，PathInfo 值为 /tail。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:03:44.603

你需要`Request.Querystring`. 看看这个 msdn 文档页面： http: [//msdn.microsoft.com/en-us/library/ms524784 (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms524784(v=vs.90).aspx)

# java - JUnit 在 play framework 2.0.4 中测试 Akka actor - scala.concurrent.duration.Duration 上的 JAVA ClassNotFoundException

> ID：15142407
> 
> 赞同：1
> 
> 时间：2013-02-28T17:59:29.060
> 
> 标签：java, playframework, playframework-2.0, junit4, akka

我正在尝试实现一个 JUnit 测试来测试一个演员。

我有这个 ActorTest ：

```
import org.junit.Test;

import play.libs.Akka;
import playtests.PlayFrameworkTest;
import akka.actor.Actor;
import akka.actor.Props;
import akka.actor.UntypedActorFactory;
import akka.testkit.TestActorRef;

public class ActorTest {

    public static FakeApplication dummy;

    @BeforeClass
    public static void startApp() {
        dummy = Helpers.fakeApplication(Helpers.inMemoryDatabase());
        Helpers.start(dummy);
    }

    @AfterClass
    public static void stopApp() {
        Helpers.stop(dummy);
    }

    @Test
    public void test() throws Exception {
        final String myParameter = "someParameter";
        @SuppressWarnings("serial")
        TestActorRef<MyActor> actorRef = TestActorRef.create(Akka.system(), new Props(new UntypedActorFactory() {
            @Override
            public Actor create() {
                return new MyActor(myParameter);
            }
        }), "testActor");
        MyActor actor = actorRef.underlyingActor();

        String message = "message";
        actor.apply(message);
        actor.receive();

    }
} 
```

当我尝试运行它时（无论是在 eclipse 上还是使用“play test”命令行），我都会在 TestActorRef.create() 的行中抛出这个异常

```
java.lang.NoClassDefFoundError: scala/concurrent/duration/Duration
    at persistence.actors.ActorTest.test(ActorTest.java:45)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.ClassNotFoundException: scala.concurrent.duration.Duration
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 26 more 
```

我看过[http://doc.akka.io/docs/akka/snapshot/java/testing.html](http://doc.akka.io/docs/akka/snapshot/java/testing.html) 和 [http://doc.akka.io/docs/akka/snapshot/scala/testing.html](http://doc.akka.io/docs/akka/snapshot/scala/testing.html) 和所有我能在播放框架页面上找到。

我错过了什么？为什么它不运行？如果我从 Akka.system() 和 ActorSystem.apply() 获取我的系统，我会得到同样的异常......当我将它传递给我的 fakeApplication 时，同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:55:50.367

（总结上面的评论……）该类`scala.concurrent.duration.Duration`首先包含在 Scala 2.10 中。在撰写本文时，Akka 2.1 和 Play 2.1 是与 Scala 2.10 配合使用的最佳版本。

# javascript - 如何使页面保持虚假加载状态

> ID：15142408
> 
> 赞同：1
> 
> 时间：2013-02-28T17:59:32.350
> 
> 标签：javascript, html, browser, loading

如何通过 javascript 将页面保持在虚假加载状态？

我有一个页面设置为 $('body').hide()，直到它完成加载 AJAX 请求，之后页面设置为 $('body').show()。在此期间（大约 2 秒）页面保持空白并且浏览器图标停止加载，然后它显示内容或重定向到另一个页面（根据返回的 AJAX 变量）。

有什么方法可以让浏览器保持在加载状态，即使它没有加载任何东西？只是看起来它仍在加载东西。

我已经尝试过创建类似的东西：

```
while(page_loading())
    var l = 1; 
```

但是随后浏览器崩溃了。我怎样才能强制这种“假”状态？

编辑：

对不起，我之前忘了提：我想像往常一样保持页面空白，不加载任何 gif 或类似的东西，而是强制浏览器处于加载状态。当浏览器加载页面时，浏览器选项卡上会出现一个加载图标或状态栏上会出现一条消息。我知道这些特定状态不能直接使用 javascript 更改，所以我认为有一种方法可以使用一些无限循环 HTML 请求或类似的东西使浏览器保持在这种加载状态。如果我设置“光标：等待”，浏览器选项卡仍会变为“完成状态”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:03:02.093

处理这个问题的标准方法是创建一个出现和消失的加载 gif。您可以[创建自己的 GIF](http://www.ajaxload.info/)并下载它。然后当页面开始加载时：`$("#mygif").show();`完成后，`$("#mygif").hide();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:06:17.190

使用你的开发者朋友建议的加载动画*可能*是要走的路。但是，您*可以*使用以下方法估算页面加载`cursor: wait`：

```
html,
body {
    cursor: wait;
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
    background: #555;
    color: white;
    text-align: center;
}

setTimeout(function unwait() {
    document.body.style.cursor = 'default';
    document.body.innerHTML = 'Loaded.';
}, 3000); 
```

[http://jsfiddle.net/8cxA7/](http://jsfiddle.net/8cxA7/)

显然，这只是一个演示。在我看来，标签图标应该被单独留下，因为一些浏览器会缓存他们第一次看到的内容，并为宝贵的生命而保留该图标。

# c# - 图像不会在仅从 WPF 中的按钮继承的自定义控件中更新

> ID：15142409
> 
> 赞同：1
> 
> 时间：2013-02-28T17:59:34.183
> 
> 标签：c#, .net, wpf, custom-controls, .net-4.5

我目前正在尝试为我在 WPF 中编写的骰子游戏构建自定义按钮控件。一切正常，除了运行时 UI 中的图像在 die 值更改时不会更改。我可以通过我的调试会话确认图像源正在按预期更改，并且所有值都按预期更改，但图像似乎不想更新。我试过查看许多类似的问题，但似乎没有一个问题适用于我的特定情况。我是 WPF 的新手，不太确定我在这里做错了什么……我当前的代码如下：

```
using BluffersDice.GameEngine;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;
using System.Windows.Media.Imaging;

namespace BluffersDice.Interface.CustomControls
{
    public class DieButton : Button
    {  
        private Die _DieValue;
        private readonly BitmapImage ONE_IMAGE = new BitmapImage(new  Uri("/res/dice/1.png",UriKind.Relative));
        private readonly BitmapImage TWO_IMAGE = new BitmapImage(new Uri("/res/dice/2.png", UriKind.Relative));
        private readonly BitmapImage THREE_IMAGE = new BitmapImage(new Uri("/res/dice/3.png", UriKind.Relative));
        private readonly BitmapImage FOUR_IMAGE = new BitmapImage(new Uri("/res/dice/4.png", UriKind.Relative));
        private readonly BitmapImage FIVE_IMAGE = new BitmapImage(new Uri("/res/dice/5.png", UriKind.Relative));
        private readonly BitmapImage SIX_IMAGE = new BitmapImage(new Uri("/res/dice/6.png", UriKind.Relative));
        private const string HELD_LABEL_TEXT = "Held";
        //private bool initcompleted = false;
        private Label HoldLabel { get; set; }       

        public DieButton() : this(new Die())
        {}

        public DieButton(Die dieValue)
        {
            Background = Brushes.Transparent;
            BorderBrush = new SolidColorBrush(Colors.Transparent);
            BorderThickness = new Thickness(6);
            HoldLabel = new Label() { MinHeight = 15 };

            Click += This_OnClick;
            DieValueChanged += DieValueChangedHandler;
            dieValue.IsHeldChanged += DieValue_IsHeldChanged;
            dieValue.DieValueChanged += DieValueChangedHandler;
            _DieValue = dieValue;

            Panel = new StackPanel()
            {
                Orientation = Orientation.Vertical,
                Margin = new Thickness(8)
            };

            DieImage = new Image() { Source = GetDieImageSource() };
            Panel.Children.Add(DieImage);           
            Panel.Children.Add(HoldLabel);
            Content = Panel;

            UpdateButtonContent();
            //initcompleted = true;
        }

        private void This_OnClick(object sender, RoutedEventArgs e)
        {
            DieValue.ToggleHold();
        }

        public event EventHandler DieValueChanged;

        public Die DieValue
        {
            get
            {
                return _DieValue;
            }
            set
            {
                _DieValue = value;
                if (DieValueChanged != null)
                {
                    DieValueChanged(this, new EventArgs());
                }
            }
        }

        private Image DieImage { get; set; }

        private StackPanel Panel { get; set; }

        private void DieValue_IsHeldChanged(object sender, EventArgs e)
        {
            var d = (Die)sender;

            if (d.IsHeld)
            {
                BorderBrush = new SolidColorBrush(Colors.Yellow);
            }
            else
            {
                BorderBrush = new SolidColorBrush(Colors.Transparent);
            }

            HoldLabel.Content = DieValue.IsHeld ?  HELD_LABEL_TEXT : string.Empty;
        }
        private void DieValueChangedHandler(object sender, EventArgs e)
        {
            DieImage.Source = GetDieImageSource();
            UpdateButtonContent();

        }
        private ImageSource GetDieImageSource()
        {
            switch (DieValue.Value)
            {
                case 1:
                    return ONE_IMAGE;

                case 2:
                    return TWO_IMAGE;

                case 3:
                    return THREE_IMAGE;

                case 4:
                    return FOUR_IMAGE;

                case 5:
                    return FIVE_IMAGE;
                case 6:
                    return SIX_IMAGE;

                default:
                    return null;
            }
        }
        private void UpdateButtonContent()
        {
            (Panel.Children[0] as Image).Source = GetDieImageSource();   
        }
    }
} 
```

**窗口正在用于：**

```
using BluffersDice.GameEngine;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;
using BluffersDice.Interface.CustomControls;

namespace BluffersDice.Interface
{
    /// <summary>
    /// Interaction logic for UserTurn.xaml
    /// </summary>
    public partial class PlayerTurn : Window
    {
        public Turn TurnState { get; set; }
        private Roll CurrentRoll { get; set; }

        public PlayerTurn()
        {
            CurrentRoll = new Roll();
            InitializeComponent();
            btn_Die1 = new DieButton(CurrentRoll.Dice[0]);
            btn_Die2 = new DieButton(CurrentRoll.Dice[1]);
            btn_Die3 = new DieButton(CurrentRoll.Dice[2]);
            btn_Die4 = new DieButton(CurrentRoll.Dice[3]);
            btn_Die5 = new DieButton(CurrentRoll.Dice[4]);
            GameState.Caller.StartNewTurn();

            TurnState = GameState.Caller.StartNewTurn();

            lbl_PlayerTitle.Text = string.Format(lbl_PlayerTitle.Text, GameState.Caller.Id);
        }

        private void btn_DieValuechanged(object sender, EventArgs ea)
        {
            var d = (Die)sender;
            MessageBox.Show(String.Format("Die Button {0} Value Changed To {1}", d.Id, d.Value));
        }
        private void DieValueChanged(object sender, EventArgs e)
        {
            var d = (Die)sender;
            //MessageBox.Show(String.Format("Die {0} Value Changed To {1}", d.Id, d.Value));
        }

        private void RollDice_btnClick(object sender, RoutedEventArgs e)
        {
            CurrentRoll.RollDice();           
        }    
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:55:13.827

每次您想更改图像时，请尝试执行以下操作 = new BitmapImage(new Uri(...

我已经阅读了通常有效的方法，或者您可以按照此处讨论的解决方案 [http://social.msdn.microsoft.com/Forums/en/wpf/thread/976e8d89-aafd-4708-9e4f-87655a5da558](http://social.msdn.microsoft.com/Forums/en/wpf/thread/976e8d89-aafd-4708-9e4f-87655a5da558)

# php - PHP中的嵌套'for'循环以创建分层无序列表

> ID：15142411
> 
> 赞同：0
> 
> 时间：2013-02-28T17:59:42.120
> 
> 标签：php, html

我正在尝试使用 php 循环创建嵌套的无序列表。我尝试了不同的方法，但我需要您的帮助来改进我的代码。假设在这个例子中我想要四个级别。

这是我的 PHP 代码：

```
<ul>
<?php
for($i = 0; $i < 1; $i++): ?>
<li>
    <ul>
    <?php for($j = 0; $j <2; $j++): ?>
        <li>
            <ul>
                <?php for($k = 0; $k <2; $k++): ?>
                <li>
                    <ul>
                        <?php for($l = 0; $l <2; $l++): ?>
                        <li></li>
                        <?php endfor; ?>
                    </ul>
                </li>
                <?php endfor; ?>
            </ul>
        </li>
    <?php endfor; ?>
    </ul>
</li>
<?php
endfor;
?>
</ul> 
```

这是我的 HTML 输出：

```
<ul>
<li>
    <ul>
        <li>
            <ul>
                <li>
                    <ul>
                        <li></li>
                        <li></li>
                    </ul>
                </li>
                <li>
                    <ul>
                        <li></li>
                        <li></li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>
            <ul>
                <li>
                    <ul>
                        <li></li>
                        <li></li>
                    </ul>
                </li>
                <li>
                    <ul>
                        <li></li>
                        <li></li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</li>
</ul> 
```

有更聪明的方法吗？但愿如此。我想知道，因为我的目标是动态定义级别数，而我所做的根本不是动态的！:)

非常感谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:33:01.407

如果您有特定格式的数组，则可以使用[递归函数。](http://php.net/manual/en/functions.user-defined.php#example-150)

### 1\. 示例数组

```
$arr = array(
    'Lorem ipsum dolor sit amet, consectetur adipiscing elit.',
    'Aenean id erat et justo eleifend dapibus iaculis non diam.',
    array(
        'Donec viverra mauris sit amet nulla semper sit amet venenatis urna elementum.',
        'Aliquam bibendum arcu metus, vitae pellentesque felis.',
        'Etiam eu erat est, sit amet mollis justo.',
        array(
            'Cras luctus nulla vitae turpis bibendum rutrum.',
            'Donec vel sem mi, eu viverra magna.',
            'Aliquam non leo vitae turpis commodo malesuada.',
            'Suspendisse congue nulla nec justo molestie convallis sodales dolor tincidunt.',
            array(
                'Etiam blandit dictum metus, eget ullamcorper odio commodo eu.',
                'Integer congue eros a mauris feugiat volutpat.',
                'Sed nec diam sem, ac sollicitudin libero.',
                'Phasellus vulputate tincidunt risus, vitae convallis nisi feugiat id.',
                'Donec vehicula lobortis magna, sed euismod massa tristique sed.',
            ),
        ),
        'Fusce vel sem sem, non volutpat nisi.',
        'Pellentesque molestie ipsum vitae orci sodales iaculis.',
    ),
); 
```

### 2.递归函数

```
function list_it($data_array, $list_tag = 'ul') {
    // enforce valid list tag
    if ($list_tag != 'ul' && $list_tag != 'ol')
        $list_tag = 'ul';

    // we need an array with data
    if (!is_array($data_array) || empty($data_array))
        return;
    echo '<',$list_tag,'>';

    foreach ($data_array as $element) {
        if (is_array($element)) {
            list_it($element);
        }
        else {
            echo '<li>',$element,'</li>';
        }
    }
    echo '</',$list_tag,'>';
}

list_it($arr, 'ul'); 
```

### 3.输出（我添加的HTML缩进，不是函数）

```
<ul>
    <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</li>
    <li>Aenean id erat et justo eleifend dapibus iaculis non diam.</li>
    <ul>
        <li>Donec viverra mauris sit amet nulla semper sit amet venenatis urna elementum.</li>
        <li>Aliquam bibendum arcu metus, vitae pellentesque felis.</li>
        <li>Etiam eu erat est, sit amet mollis justo.</li>
        <ul>
            <li>Cras luctus nulla vitae turpis bibendum rutrum.</li>
            <li>Donec vel sem mi, eu viverra magna.</li>
            <li>Aliquam non leo vitae turpis commodo malesuada.</li>
            <li>Suspendisse congue nulla nec justo molestie convallis sodales dolor tincidunt.</li>
            <ul>
                <li>Etiam blandit dictum metus, eget ullamcorper odio commodo eu.</li>
                <li>Integer congue eros a mauris feugiat volutpat.</li>
                <li>Sed nec diam sem, ac sollicitudin libero.</li>
                <li>Phasellus vulputate tincidunt risus, vitae convallis nisi feugiat id.</li>
                <li>Donec vehicula lobortis magna, sed euismod massa tristique sed.</li>
            </ul>
        </ul>
        <li>Fusce vel sem sem, non volutpat nisi.</li>
        <li>Pellentesque molestie ipsum vitae orci sodales iaculis.</li>
    </ul>
</ul> 
```

# ios - 带有变音符号的 xcodebuild 目标名称

> ID：15142414
> 
> 赞同：1
> 
> 时间：2013-02-28T17:59:47.800
> 
> 标签：ios, xcode, shell, jenkins, xcodebuild

我正在尝试通过 xcodebuild 命令使用 Jenkins 构建 iOS 应用程序。

问题是 xcodebuild 没有检测到带有德语变音符号 ü 的目标。

```
$ /usr/bin/xcodebuild -target AppNameWithUmlautü -configuration Debug clean build 
```

给我以下错误：

```
xcodebuild: error: The project 'AppNameWithUmlautü.xcodeproj' does not contain a target named 'AppNameWithUmlautü'. 
```

我使用以下命令检查了目标的存在：

```
xcodebuild -list

Information about project "AppNameWithUmlautü":
    Targets:
        AppNameWithUmlautü
        AppNameWithOutUmlaut

    Build Configurations:
        Debug
        Release
        Ad Hoc

    If no build configuration is specified and -scheme is not passed then "Release" is used. This project contains no schemes. 
```

没有变音符号的目标有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T18:15:13.100

Xcode 在目标名称中使用 Umlauts 的“分解”UTF-8 表示：“ü”表示为`75 CC 88`. `75`是 "u"，并且`CC 88`是 "COMBINING DIAERESIS" 的 UTF-8 序列。

另一方面，shell 使用`C3 BC`“ü”的“复合”UTF-8 表示。

因此，您在命令行中提供的目标与 Xcode 项目中的目标名称不匹配（有人可能会认为这是 Xcode 中的一个错误）。

我对 Jenkins 一无所知，但如果你能以某种方式使用`xcodebuild -list`命令的输出来获取分解的 UTF-8 目标名称并将其复制到你的 Makefile、shell 脚本或你拥有的任何东西中，那么这应该会有所帮助。

# javascript - 获取数组值并使用 for 循环将它们放入不同的 div 中？

> ID：15142415
> 
> 赞同：0
> 
> 时间：2013-02-28T17:59:47.940
> 
> 标签：javascript, jquery, html

我正在努力自己学习 javascrip+jquery，并且也在努力学习它。因此试图执行 DRY 规则。

我发现自己遇到了一个问题，我有一个数组，

```
var animals = [4]; 
```

一个函数，

```
var legs = function(amount){
    this.amount = amount;
    this.body = Math.floor(Math.random()*amount)+1;
} 
```

和一个邪恶的 for 循环。我还有 5 个 div，称为 printAnimal1、printAnimal2 等等。我希望将数组中的每个值打印到其中。

```
for(i = 0; i < animals.length; i++){
        animals[i] = new legs(6);
        $(".printAnimal"+i).append("animals[i]");
} 
```

我觉得好像我接近正确的事情，但我似乎无法弄清楚。我也尝试过这样的事情：

```
for(i = 0; i < animals.length; i++){
        animals[i] = new legs(6);
            $this = $(".printAnimal");
            $(this+i).append("animals[i]");
} 
```

但是其中一个问题似乎是“+i”，我无法从中得出正面或反面。

我也知道我可以简单地做：

```
 $(".printAnimal1").append("animals[i]");
 $(".printAnimal2").append("animals[i]");
 $(".printAnimal3").append("animals[i]");
... 
```

但这会打破 DRY 规则。尝试使用 for 循环执行此操作是否完全错误，或者可以完成吗？或者有没有更好的方法来做到这一点！谁能澄清一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:01:31.093

您的第一次尝试应该没问题，只要您在通话`"animals[i]"`中去掉引号( )`append()``$(".printAnimal"+i).append(animals[i])`

另外，我假设您`var i;`在 for 循环之外声明？如果没有，您需要在 for 循环 ( `for(var i=0....`)中声明它

编辑：你的小提琴有问题

1.  你从不打电话`startGame()`
2.  你没有包括 jQuery
3.  你不能（据我所知）附加任何不是 html 的东西——在你的情况下，你试图附加一个 js 对象。您希望最终结果是什么样的？

[http://jsfiddle.net/SjHgh/1/](http://jsfiddle.net/SjHgh/1/)是一个有效的小提琴，它表明 append() 可以按照您的想法工作。

编辑：忘记更新小提琴。现在更正链接。

编辑：重新阅读您对其他答案的回复，了解您想要什么。[http://jsfiddle.net/SjHgh/3/](http://jsfiddle.net/SjHgh/3/)是您想要的工作小提琴。更多注释：

1.  `new`你打电话时没有声明`DICE`
2.  你必须引用你想要的字段，（因此`dices[i].roll`），而不仅仅是对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:50:36.480

根据您的评论添加另一个答案

```
var i, dicesThrown = [];

function throwDice(){
    return Math.ceil(Math.random() * 6);
}

//Throw 5 dices
for (i=0 ; i<5 ; i++){
    dicesThrown.push( throwDice() );
}

//Show the results
for (i=0 ; i<5 ; i++){
    $("body").append("<div>Dice " + (i+1) + ": " + dicesThrown[i] +"</div>");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T18:08:57.920

只是一些评论：

这是声明一个只有一个项目的数组，该项目是数字 4

```
var animals = [4]; 
```

如果您仍然需要该数组，您应该执行以下操作：

```
var animals = []; // A shiny new and empty array 
```

然后在 for 循环中添加项目，如下所示：

```
animals.push(new legs(6)); //This will add a new legs object to the end of the array 
```

另外，将其添加到 div 后，您期望出现的内容是什么？

如果你想要腿的数量，你应该将它附加到元素（而不是直接腿对象）。

```
for(i = 0; i < animals.length; i++){
    animals.push(new legs(6));
    $(".printAnimal"+i).append(animals[i].body);
} 
```

# objective-c - 在 NSButton 上获取悬停事件以显示图像

> ID：15142420
> 
> 赞同：2
> 
> 时间：2013-02-28T18:00:15.517
> 
> 标签：objective-c, macos, cocoa, hover, nsbuttoncell

因此，我正在尝试制作一个具有按钮（不一定是按钮）的应用程序，当您将鼠标悬停在它上面时，会出现一个弹出窗口。当我将鼠标悬停在按钮上时，我已经能够在日志中打印一条消息，但我不知道如何将图像的 Hidden 属性设置为 NO。我尝试给 NSButtonCell （接收悬停事件的类）一个委托，但调用

```
[myButtonCell setDelegate:delegateObject] 
```

不给对象一个委托。如果我能找到一种让 buttonCell 和图像进行通信的方法（它们都在同一个 xib 中）或者让 buttonCell 调用其中一个类中的函数，其中一个类将它作为实例，那么弄清楚这将是一件容易的事其余的部分。

我的解释有点分散，所以我会尝试更好地解释：我有一个窗口对象，有一个视图对象，它有一个 NSButtonCell 对象 (IBOutlet) 的子类。在 NSButtonCell 的子类（我们称之为 MyButtonCell）中，我有一个方法，当调用需要通知视图或窗口时，该方法已被调用。

我觉得我到处寻找，但找不到解决方案。我以为我会使用委托，但我无法为 buttonCell 设置委托，所以我被卡住了……</p>

**编辑：**

下面是 NSButtonCell 和 Delegate 的代码：

```
@interface MyView : NSView <MyButtonCellDelegate>
    {

    }
@property (assign) IBOutlet MyButtonCell *buttonCell1;
    - (void)toggleField:(int)fieldID;
@end

@implementation MyView

- (void)toggleField:(int)fieldID
{
    if (fieldID == 1) {
        [self.field1 setHidden:!buttonCell1.active];
    }
    NSLog(@"toggling");
}
@end 
```

我的按钮单元：

```
@protocol MyButtonCellDelegate

- (void)toggleField:(int)fieldID;

@end

@interface MyButtonCell : NSButtonCell
{
    id <MyButtonCellDelegate> delegate;
}

@property BOOL active; //Used to lett the view know wether the mouse hovers over it
@property (nonatomic, assign) id  <DuErButtonCellDelegate> delegate;

-(void)_updateMouseTracking; //mouse tracking function, if you know a better way to do it that would be lovely

@end

@implementation MyButtonCell

@synthesize delegate;
@synthesize active;

- (void)mouseEntered:(NSEvent *)event
{
    active = YES;
    [[self delegate] toggleField:1];
    NSLog(@"entered");
}

- (void)mouseExited:(NSEvent *)event
{
    active = NO;
    [[self delegate] toggleField:1];
}

- (void)_updateMouseTracking {
    [super _updateMouseTracking];
    if ([self controlView] != nil && [[self controlView] respondsToSelector:@selector(_setMouseTrackingForCell:)]) {
        [[self controlView] performSelector:@selector(_setMouseTrackingForCell:) withObject:self];
    }

}

@end 
```

希望这足够清楚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:35:42.770

我不确定你真正在寻找什么，但如果我明白你在这里问什么：

> 我有一个带有视图对象的窗口对象，它有一个 NSButtonCell 对象（IBOutlet）的子类。在 NSButtonCell 的子类（我们称之为 MyButtonCell）中，我有一个方法，当调用需要通知视图或窗口时，该方法已被调用。

正确，一种可能性是您的 NSButtonCell 将 NSNotification 发布到默认通知中心，并让您的视图或窗口或任何需要知道的人成为该通知的观察者。您可以自由定义自己的自定义通知。

另一种可能性是您的 NSButtonCell 子类使用：

```
- (void)performSelectorOnMainThread:(SEL)aSelector withObject:(id)arg waitUntilDone:(BOOL)wait 
```

并且从您的 NSCell 方法中，该方法在调用时需要通知它的视图或窗口，可以执行以下操作：

```
[[self controlView] performSelectorOnMainThread:@selector( viewMethodToInvoke: ) withObject:anObject waitUntilDone:YES] 
```

或者

```
[[[self controlView] window] performSelectorOnMainThread:@selector( windowMethodToInvoke: ) withObject:anObject waitUntilDone:YES] 
```

第三种可能性是按照您的建议进行操作，并为您的 NSButtonCell 提供一个可以直接向其发送消息的对象，但这与在 controlView 或 controlView 的窗口上使用 performSelectorOnMainThread 相同，但需要更多工作。

至于您的鼠标跟踪代码，我假设您使用的是 NSTrackingArea。您可以在此处找到有关它们的文档：[Using Tracking-Area Objects](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/TrackingAreaObjects/TrackingAreaObjects.html)

# vb6 - 运行时 VB6 窗体不会调整大小

> ID：15142421
> 
> 赞同：0
> 
> 时间：2013-02-28T18:00:23.000
> 
> 标签：vb6

我必须对我多年未接触过的 VB6.0 项目进行一些修改，所以我的记忆变得有点老了。

我有一个表格，然后我在 IDE 中将表格变大。当我运行程序时，虽然在 IDE 中看起来非常好，但大小的增加并没有显示出来。

这可能是什么原因造成的？

如果我在同一个表单上更改其他内容，则更改会在我运行时显示。唯一发生这种情况的是大小。

这种形式比主窗口小很多，因此有空间可以展开。

我项目中的其他表单没有这种相同的行为。

我还能检查什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T18:19:36.447

寻找在***运行时***在代码中设置高度和宽度的东西。专门使用 IDE 的搜索来查找“.Height”、“.Width”和“.Move”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T12:47:02.967

我认为一个更简单的解决方案可能是在 form_load 事件中设置表单的高度和宽度，因此它最初会变得像需要的那样大。

# php - php代码在xampp上不起作用

> ID：15142426
> 
> 赞同：1
> 
> 时间：2013-02-28T18:00:35.537
> 
> 标签：php

我是php领域的新手。我正在使用 xampp 并且它已打开。和 php 也被激活。

我写了这段代码

```
<!DOCTYPE html>
<html>
<body>

<?php
$x=5;
$y=6;
$z=$x+$y;
echo $z;
?>

</body>
</html> 
```

输出窗口为空。我不知道错误是什么。有谁知道解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T18:35:15.890

根据评论回答。

PHP 文件必须由 Web 服务器解释（在您的情况下 -**具有 php 扩展名的 apache**，它是 XAMPP 的一部分），它执行 PHP 代码并通过 http 协议将脚本输出/结果发送到 Web 浏览器。

要执行 PHP 脚本并显示其结果，您必须使用 HTTP，如下所示：`http://localhost/doctrinetest/welcome.php`.

`c:\xampp\htdocs`目录在`http://localhost/`URL 处“提供”。

通过文件系统（不使用 apache 服务器）打开该文件将输出空白页，因为浏览器不应该执行 PHP。但是，该空白页面将包含您的静态 HTML 部分代码。

看起来，你不明白 PHP 是如何工作的。**你需要阅读一些关于网络基础的书籍。**

最终您可以访问[http://thenewboston.org](http://thenewboston.org)或[http://phpacademy.org](http://phpacademy.org) - 他们有非常好的教育视频。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:02:49.023

该文件似乎没有被解释为 PHP。确保该文件具有扩展名 php.ini。

您看不到 php 代码的原因是标签阻止了这种情况，但您应该在源代码中找到它们。

您应该检查您是否通过 http 而不是直接通过浏览器访问该文件。所以你的地址栏中应该有类似`http://localhost/script.php`的东西。

还要确保你的 apache 配置中有这样的行：

```
#
# PHP-Module setup
#
LoadFile "C:/Program Files (x86)/www/php/php5ts.dll"
LoadModule php5_module "C:/Program Files (x86)/www/php/php5apache2_2.dll"

<FilesMatch "\.php$">
    SetHandler application/x-httpd-php
</FilesMatch>
<FilesMatch "\.phps$">
    SetHandler application/x-httpd-php-source
</FilesMatch> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T18:43:01.717

请谷歌：如何安装 XAMPP。完成后，在浏览器中打开

```
http://localhost/ 
```

看看它是否工作。

这不是一个真正的问题，在问一些东西之前你应该学习一些东西。

# python - numpy 数组元素会自动舍入吗？

> ID：15142432
> 
> 赞同：7
> 
> 时间：2013-02-28T18:00:45.837
> 
> 标签：python, numpy

我在 Python 中有一个 numpy 浮点数组。

当我打印数组时，第一个值为：

```
[7.14519700e+04, .... 
```

但是，如果我只打印出它自己的第一个值，则打印出的内容如下：

```
71451.9699799 
```

显然这些数字应该是相同的，所以我只是想知道，数组是否只是向我展示了元素的圆形版本？这里的第二个数字有 12 位有效数字，而第一个数字只有 9。

我想我只是想知道为什么这些数字不同？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T18:12:25.697

它只是在打印中，而不是在存储中。唯一的混淆可能是因为第一个示例使用 numpy 的打印精度设置，第二个示例使用通用 python 的打印设置。

您可以调整 numpy 精度并通过以下方式打印

```
numpy.set_printoptions(precision=20)
print myarray` 
```

（根据您的需要调整精度），或在标准 python 格式打印中选择有效数字的数量：

```
print ('%.20f' % myarray[0]) 
```

数字的内部表示总是相同的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T18:03:52.573

numpy 数组中的类型定义明确。`numpy.dtype`您可以通过检查数组的属性来了解它们的存储方式。

例如：

```
import numpy
a = numpy.zeros(10)
print a.dtype 
```

将显示`float64`，这是一个 64 位浮点数。

您可以使用通常接受的 dtype 参数或 dtype`type`对象（即构成 dtype 的东西）显式指定数组的类型。

```
a = numpy.zeros(10, dtype='complex32') # a 32-bit floating point
b = numpy.longdouble(a) # create a long-double array from a 
```

关于打印，这只是一个格式问题。您可以使用以下方法来调整 numpy 如何打印数组[`numpy.set_printoptions`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.set_printoptions.html)：

```
>>> a = numpy.random.randn(3) # for interest, randn annoyingly doesn't support the dtype arg
>>> print a
[ 0.12584756  0.73540009 -0.17108244 -0.96818512]
>>> numpy.set_printoptions(precision=3)
>>> print a
[ 0.126  0.735 -0.171 -0.968] 
```

# objective-c - 瞬态属性的“索引”复选框

> ID：15142433
> 
> 赞同：0
> 
> 时间：2013-02-28T18:00:46.387
> 
> 标签：objective-c, cocoa, core-data

在 Core Data 中，瞬态属性不存储在数据库中。然而，在 Xcode 的模型编辑器中有它们的*Indexed*复选框。它有什么作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:14:51.597

该属性将被索引，您可以对此执行更快的搜索，并在此之后对其进行排序。nsfetchrequest 与此结合起来会快得多。

# jquery - 带有jquery ajax结果null的asp .net点击事件

> ID：15142435
> 
> 赞同：0
> 
> 时间：2013-02-28T18:01:04.320
> 
> 标签：jquery, ajax

这是我的设计代码->

```
<script type="text/javascript" src="Scripts/jquery-1.4.1.js"></script>
<script type="text/javascript" src="Scripts/jquery-1.4.1.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("input[id$='Button1']").click(function () {
            $.ajax({
                type: "GET",
                url: "Default.aspx",
                data:'{ a: 2, b: 3 }',
                contentType: "application/json; charset=utf-8",
                dataType: "json",

                success: function (data, textStatus, request) {
                   alert(data);

                   $("#weather-temp").html(data[0]);
                }
            });
        });
    });
</script>
<asp:TextBox ID="test" runat="server" Text="hi"></asp:TextBox>
<asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" /> 
```

结果：它在警报框中显示 Null ......谁能解决我的问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:45:09.260

在问这里之前你有没有尝试过解决这个问题？每个现代浏览器中都有开发人员工具，可以让您查看 httprequests 并准确查看失败的位置。您还可以在其中放置断点和观察表达式，以便查看发生了什么以及原因。我敢打赌，一旦您查看开发工具，这个问题将在几分钟内得到解决。

在许多情况下，服务器没有返回任何内容，这是因为您的 ajax 调用未正确触发、文件路径不正确、您发送的数据不是有效的 json，或者后端脚本在语法上不正确或不正确正常运作。您可以轻松缩小问题源于使用开发人员工具的范围。知道错误在哪里是成功的一半。

关于您的代码的几件事：

只调用一次 jquery 库。通常人们在开发过程中使用未缩小的版本，并将其换成生产中的缩小版本。

为什么在脚本中使用 jquery 的 .click 时将 Button1_Click 分配给标记中的 onclick 事件？（除非这是我不知道的 aspx 约定，因为我是 mvc4 开发人员而不是 aspx）

json 无效（删除 's 并用“”包围字符串（值））。

如果要向服务器发送数据，则应该使用 post 方法而不是 get 方法。这不是必需的，但许多人认为这是最佳实践，尤其是在试图保持平静时。

# javascript - 使用正则表达式解释不同类型的变量并使用 jquery 进行查找和替换

> ID：15142437
> 
> 赞同：1
> 
> 时间：2013-02-28T18:01:14.177
> 
> 标签：javascript, jquery, regex

好的，我很难理解rejex 以及它是如何工作的，我尝试为一个网站做一个基本的词典/词汇表，我已经花太多时间在上面了。

那里有我的代码：

```
// MY MULTIPLE ARRAY
var myDictionnary = new Object();
myDictionnary.myDefinition = new Array();

myDictionnary.myDefinition.push({'term':"*1", 'definition':"My description here"});
myDictionnary.myDefinition.push({'term':"word", 'definition':"My description here"});
myDictionnary.myDefinition.push({'term':"my dog doesn't move", 'definition':"My description here"});

// MY FUNCTION
$.each(myDictionnary.myDefinition, function(){
    var myContent = $('#content_right').html();
    var myTerm = this.term;
    var myRegTerm = new RegExp(myTerm,'g');

    $('#content_right').html(myContent.replace(myRegTerm,'<span class="tooltip" title="'+this.definition+'"> *'+this.term+'</span>'));
}); 
```

我创建了我的数组，并为每个结果在我的 div#content_right 中搜索相同的内容，并将其替换为带有标题和工具提示的 span。我把我的正则表达式空了，以免与我之前尝试过的混淆。

在我的数组“术语”中，您可以看到我将研究什么样的文本。它适用于搜索“单词”等普通文本。

但是对于像'asterix'这样的正则表达式它有错误，当我找到一种方法来超越它时，他将它添加到文本中，我尝试了很多方法来解释我的'asterix'就像一个正常的字符但它不起作用。

我想要的是：无论我的 var 'myTerm' 中的文本如何，都可以从字面上解释变量。这可能吗？如果不是，我应该使用哪种解决方案。

提前感谢，PS 对不起我的英语不好...（我是法语）亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:04:27.103

`*`是正则表达式中的特殊字符，意思是“前一个字符的 0 个或多个”。因为它是第一个字符，所以它是无效的，你会得到一个错误。

考虑[`preg_quote`从 PHPJS](http://phpjs.org/functions/preg_quote/)实现以转义此类特殊字符并使它们在正则表达式中有效。

* * *

但是，您这样做的方式非常糟糕。不仅因为你使用`innerHTML`了多次，而且因为如果你遇到这样的事情怎么办？

`Blah blah blah <img src="blah/***word***/blah.png" />`

您的结果输出将是：

`Blah blah blah <img src="blah/<span class="tooltip" title="My description here"> *word</span>/blah.png" />`

做你正在尝试的唯一真正的方法是专门扫描文本节点，然后`.splitText()`在文本节点上使用以提取单词匹配，然后将其放入自己的`<span>`标签中。

* * *

这是上述解释的示例实现：

```
function definitions(rootnode) {
    if( !rootnode) rootnode = document.body;
    var dictionary = [
        {"term":"*1", "definition":"My description here"},
        {"term":"word", "definition":"My description here"},
        {"term":"my dog doesn't move", "definition":"My description here"}
    ], dl = dictionary.length, recurse = function(node) {
        var c = node.childNodes, cl = c.length, i, j, s, io;
        for( i=0; i<cl; i++) {
            if( c[i].nodeType == 1) { // ELEMENT NODE
                if( c[i].className.match(/\btooltip\b/)) continue;
                // ^ Exclude elements that are already tooltips
                recurse(c[i]);
                continue;
            }
            if( c[i].nodeType == 3) { // TEXT NODE
                for( j=0; j<dl; j++) {
                    if( (io = c[i].nodeValue.indexOf(dictionary[j].term)) > -1) {
                        c[i].splitText(io+dictionary[j].term.length);
                        c[i].splitText(io);
                        cl += 2; // we created two new nodes
                        i++; // go to next sibling, the matched word
                        s = document.createElement('span');
                        s.className = "tooltip";
                        s.title = dictionary[j].definition;
                        node.insertBefore(s,c[i]);
                        i++;
                        s.appendChild(c[i]); // place the text node inside the span
                        // Note that now when i++ it will point to the tail,
                        // so multiple matches in the same node are possible.
                    }
                }
            }
        }
    };
    recurse(rootnode);
} 
```

现在您可以调用`definitions()`替换文档中的所有匹配项，或者`definitions(document.getElementById("myelement"))`仅替换某个容器中的匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T01:29:35.680

通过添加另一个变量，它将解决问题：

```
 for( j=0; j<dl; j++) {
                  debutI =i;
                  if((io =c[i].nodeValue.indexOf(dictionary[j].term)) != -1) {
                        c[i].splitText(io+dictionary[j].term.length);
                        c[i].splitText(io);
                        cl += 2; // we created two new nodes
                        i++; // go to next sibling, the matched word
                        s = document.createElement('span');
                        s.className = "tooltip";
                        s.title = dictionary[j].definition;
                        node.insertBefore(s,c[i]);
                        i++;
                        s.appendChild(c[i]); // place the text node inside the span
                        // Note that now when i++ it will point to the tail,
                        // so multiple matches in the same node are possible.
                    }
                    i = debutI;
                } 
```

Comme ça, on n'aura pas à metre tous les spans partout dans le site à la main。> *_* >

# iphone - 在 iphone 的库目录中创建文件

> ID：15142447
> 
> 赞同：3
> 
> 时间：2013-02-28T18:01:44.513
> 
> 标签：iphone, ios, nsfilemanager

我正在尝试在我的应用程序库目录中的子目录中创建文件。首先，我得到这样的图书馆路径：

```
- (NSURL*) getLibraryDirectory
{
    NSFileManager* manager = [NSFileManager defaultManager];
    NSArray* paths = [manager URLsForDirectory:NSLibraryDirectory inDomains:NSUserDomainMask];

    if ([paths count] > 0)
    {
        return [paths objectAtIndex:0];
    }
    return nil;
} 
```

然后我使用以下代码创建子文件夹：

```
- (NSURL*) getDirectory:(NSString*)subdirName
{
    NSFileManager* sharedFM = [NSFileManager defaultManager];
    NSURL* libraryDirectory = [self getLibraryDirectory];

    if (libraryDirectory)
    {
        NSURL* subdir = [libraryDirectory URLByAppendingPathComponent:subdirName isDirectory:YES];
        if (![sharedFM fileExistsAtPath:[subdir absoluteString] isDirectory:YES])
        {
            NSError* error;
            if ([sharedFM createDirectoryAtURL:subdir withIntermediateDirectories:YES attributes:nil error:&error])
            {
                return subdir;
            } 
            else 
            {
                NSLog(@"Error occured while trying to create subdirectory \"%@\". Code - %d, desc - %@", subdirName, [error code], [error localizedDescription]);
            }
        }
    }
    return nil;
} 
```

最后一件事我试图在这个文件夹中创建一些文件，如下所示：

```
NSString* filePath = [[self getDirectory:DIR_COMMANDS] absoluteString];
if (filePath)
{
    filePath = [filePath stringByAppendingPathComponent:@"test_file.tst"];       

    NSFileManager* manager = [NSFileManager defaultManager];
    if ([manager createFileAtPath:filePath contents:[[NSData alloc] initWithBytes:[[@"string" dataUsingEncoding:NSUTF16LittleEndianStringEncoding] bytes] length:12] attributes:nil])
    {
        NSLog(@"YES");
    }
    else
    {
        NSLog(@"NO");
    }
} 
```

但不幸的是，我每次都得到“不”，不明白为什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T18:07:58.453

要从文件 URL 获取路径，您必须使用`path`而不是`absoluteString`.

```
NSString *filePath = [[self getDirectory:DIR_COMMANDS] path]; 
```

*旁注：*您应该采用 Cocoa 的方法命名风格：`libraryDirectory`而不是`getLibraryDirectory`，甚至更好：`libraryDirectoryURL`。仅当`get`通过引用传递返回值时才使用前缀。

另外：您的用法`fileExistsAtPath:isDirectory:`不正确。`BOOL`参数通过引用传递：

```
BOOL isDir;
if ([sharedFM fileExistsAtPath:[subdir path] isDirectory:&isDir]) {
    if (! isDir) {
        NSLog(@"There's a plain file at my path");
        return nil;
    }
} 
```

# amazon-s3 - 如何在 S3 上构建一个守护进程来编码视频文件？

> ID：15142448
> 
> 赞同：0
> 
> 时间：2013-02-28T18:01:45.863
> 
> 标签：amazon-s3, ffmpeg, celery, video-encoding

我有兴趣运行一个守护程序来检查用户上传的视频文件并以最佳格式对其进行编码（并添加一些水印）。

我正在考虑诸如 Zencoder、Encoding.com、亚马逊的编码服务之类的服务，但有些缺乏覆盖能力，有些对于我们的（大）容量来说太贵了。

我想构建一个守护程序，一旦用户上传它们，它就会对位于 S3 上的视频进行编码。

我想到的解决方案是 Python Heroku 服务器使用 Celery 作为任务队列来跟踪编码文件和 ffmpeg 来完成实际工作。但是，我在为 Heroku 编译 ffmpeg 时遇到了麻烦（有 libass 支持，所以基本的 ffmpeg 箱是不够的）。

您会为这个迷你项目考虑什么方法/技术堆栈？

谢谢！尤瓦尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:16:05.817

您是否尝试过[ffencoderd](http://ffencoderd.sourceforge.net)，它是一个使用 ffmpeg 的基本 perl 守护程序，它通过肥皂接口接受编码作业或在服务器目录下以 xml 格式本地创建文件。它通过 http 服务器启用多媒体存储库。

希望有所帮助，

（顺便说一句，我是开发人员，:P，但很严肃，只是想帮忙）

# java - 稀疏矩阵内存

> ID：15142453
> 
> 赞同：1
> 
> 时间：2013-02-28T18:02:10.110
> 
> 标签：java, matrix, sparse-matrix

我需要在 Java 中尽可能高效地实现一个稀疏矩阵。我收到一个比其他值有更多 0 的矩阵，我需要有效地保存它。我正在考虑使用一个包含值和位置的对象的数组由 line*max nr of columns + the column 组成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:12:45.220

Guava[表](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Table.html)可以是稀疏的。

[Colt](http://acs.lbl.gov/software/colt/api/cern/colt/matrix/package-summary.html)库也有稀疏矩阵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:15:32.097

完全取决于您在所述矩阵上执行的操作，哪种实现将适合您的需求。

例如，如果您所做的只是更新值并检索它们，`Map<Point, Value>`则将起作用。加法也很容易，但乘法变得非常困难。

# jquery - 使用 jquery mobile 设置 RSS 提要样式

> ID：15142454
> 
> 赞同：0
> 
> 时间：2013-02-28T18:02:14.557
> 
> 标签：jquery, cordova, mobile, rss, jfeed

我正在用 PhoneGap 编写一个 iPhone 应用程序。我正在尝试解析 Facebook RSS Feed 并使用 jFeed 来执行此操作。我得到了提要，我可以将它显示给用户。然而，当涉及到 RSS 提要的样式以使其看起来不错时（使用 JQuery Mobile CSS 属性），它没有考虑属性（ul 和 li 标记）。有没有办法使用 JQuery Mobile 设置 RSS 提要的样式？这是我正在使用的代码（index.html）：

```
<!DOCTYPE html> 
<html> 
<head> 
<title>BDA Audencia</title> 
<meta charset="utf-8" />
<meta content="yes" name="apple-mobile-web-app-capable">
<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1,
minimum-scale=1, width=device-width, height=device-height, 
target-densitydpi=device-dpi" />
<!-- JQUERY CSS -->
      <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
     <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />

<!-- CORDOVA - PHONE GAP -->
<script type="text/javascript" src="cordova-2.4.0.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<link rel="stylesheet" href="style/site.css">

<!-- RSS FEED -->
<script type="text/javascript" src="js/jquery.jfeed.pack.js"></script>
      <script>

          jQuery(function() {

                 jQuery.getFeed({
                                url: 'http://www.facebook.com/feeds/page.php?id=360453900718092&format=atom10',
                                success: function(feed) {

                                var html = '';

                                for(var i = 0; i < feed.items.length && i < 5; i++) {

                                var item = feed.items[i];

                                html += '<li data-role="list-divider"><span style=" right: 45px;position: absolute; font-size: 11px; font-weight: bold; padding: .2em .5em; top: 50%; margin-top: -.95em;; right: 10px;">'
                                + item.updated
                                + '</span></li>'
                                + '<li>'
                                + item.description
                                + '</li>';

                                }
                                html += html + '';
                                jQuery('#result').append(html);
                                }    
                                });
                 });

        </script>
    <!-- Changing the position of this code will not make $.mobile.defaultPageTransition work. DO NOT CHANGE IT -->
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
</head> 
<body>

<div data-role="page" id="index">
<div data-role="header" data-position="fixed">
<h1>Test RSS</h1>
</div>

<div data-role="content">   
        <div class="content-primary">
            <ul data-role="listview" data-theme="d" data-divider-theme="d">
            <div id="result"></div>
                </ul>
                </div>
</div>

<div data-role="footer" data-theme="d">
</div>
</div><!-- /page one --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:20:33.263

`div`直接在里面`ul`是不正确的 HTML 结构。

```
<ul data-role="listview" data-theme="d" data-divider-theme="d">
  <div id="result"></div>
</ul> 
```

请按以下方式更改

```
<ul id="result" data-role="listview" data-theme="d" data-divider-theme="d">
</ul> 
```

然后在`jQuery('#result').append(html);`此代码之后，添加代码以刷新列表视图。因为 jquery mobile 标记是在 pagecreate 时生成的。在您的情况下，您是动态获取数据并构建列表视图。因此，您必须通过 uisng 刷新列表视图`.listview( "refresh" )`

修改后的代码应如下：

```
$('#result').append(html);
$('#result').listview("refresh"); 
```

更多关于 jquery mobile 中的列表视图。
参考：http: [//jquerymobile.com/demos/1.2.0/docs/lists/lists-methods.html](http://jquerymobile.com/demos/1.2.0/docs/lists/lists-methods.html)

# php - 获取 X-CSRF 令牌以使用 php/curl 登录

> ID：15142463
> 
> 赞同：1
> 
> 时间：2013-02-28T18:02:45.220
> 
> 标签：php, curl

我正在尝试通过使用 X-CSRF 令牌进行身份验证的 php/curl 登录网站。查看带有 LiveHttpHeaders 的 Firefox 中的标头，我看不到任何 GET 请求中通过 cookie 传递的令牌……它似乎只出现在 POST 登录请求的标头以及 POST 登录字段中。关于如何通过使用这些令牌的 php/curl 登录网站的任何想法？如何获取令牌并将其与我的用户名和密码一起包含在 post_fields curl_setopt 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:23:32.443

我在这里发现了我的问题......令牌是通过 html 元标记而不是通过标题或 cookie 传递的。通过 preg_replace 解析 html 以获取令牌就可以了！

# c++ - “预定义”和使用命名空间和 std::shared_ptr 的正确方法是什么？

> ID：15142465
> 
> 赞同：1
> 
> 时间：2013-02-28T18:02:45.993
> 
> 标签：c++, class, namespaces, shared-ptr

我一直很难找到与这个问题类似的东西，所以我会在这里问。

我有一个包含十几个源/头文件的项目。我遇到的主要问题是预定义我在命名空间中创建的类。代码如下：

“全球包括.h”

```
/*include dependencies and library headers...*/

/*[Note 1]How would I predefine the classes inside namespaces?*/

typedef std::tr1::shared_ptr<Class1> ClassPtr1;//[Note 2]
typedef std::tr1::shared_ptr<Class2> ClassPtr2;//[Note 2]

/*[Note 2]What is the correct way to predefine the shared_ptr's?*/

#include "Class1.h"
#include "Class2.h" 
```

“类 1.h”

```
namespace myNamespace
{
    class Class1
    {
        /*variables and functions*/
        void doSomething(...);
        Class2 exampleObject;
    };
} 
```

“Class2.h”

```
namespace myNamespace
{
    class Class2
    {
        /*variables and functions*/
    };
} 
```

如果这听起来有点令人困惑，我提前道歉......基本上我想知道是否可以预定义其中的类`namespace myNamespace`并同时声明`shared_ptr`'s. 如果这是可能的，我将如何做到这一点并在源代码中正确使用它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T18:07:55.767

如果您希望类型定义与类属于同一命名空间（我建议）：

```
namespace my_namespace
{
    class Class1;
    class Class2;

    typedef std::tr1::shared_ptr<Class1> ClassPtr1;
    typedef std::tr1::shared_ptr<Class2> ClassPtr2;
}

#include "Class1.h"
#include "Class2.h" 
```

否则，如果您希望指针类型定义成为全局命名空间的一部分

```
namespace my_namespace
{
    class Class1;
    class Class2;
}

typedef std::tr1::shared_ptr<my_namespace::Class1> ClassPtr1;
typedef std::tr1::shared_ptr<my_namespace::Class2> ClassPtr2;

#include "Class1.h"
#include "Class2.h" 
```

可能，您可以使用宏（相同的命名空间）使事情更紧凑：

```
#define DECLARE_PTR_ALIAS(N, C, P) \
    namespace N { class C; 
    typedef std::tr1::shared_ptr<C> P; } \ 
```

或（不同的命名空间）：

```
#define DECLARE_PTR_ALIAS(N, C, P) \
    namespace N { class C; } \
    typedef std::tr1::shared_ptr<N::C> P; 
```

这将使为多个类定义指针别名变得更简单：

```
DECLARE_PTR_ALIAS(my_namespace, Class1, ClassPtr1)
DECLARE_PTR_ALIAS(my_namespace, Class2, ClassPtr2)
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:36:11.320

要在命名空间中预先声明类（或函数等），请执行以下操作：

```
namespace myNamespace
{
    class myClassA;
    class myClassB;
} 
```

如果我只是预先声明一个类，我喜欢把它放在一行：（只是个人喜好）

```
namespace myNamespace { class myClassA; } 
```

但是，在您的示例中， Class1 已经在命名空间中，因此您不妨这样做：

```
namespace myNamespace
{
    class Class2;

    class Class1
    {
        /*variables and functions*/
        void doSomething(...);
        Class2 exampleObject;
    };
} 
```

唯一的问题是 Class1 有 Class2 作为成员变量。您不能使用预先声明的对象作为成员，因为编译器需要知道对象的大小才能将其嵌入到类中。您只能将预先声明的对象用作引用或指针，因为它们具有固定的大小。

如果您将 Class2 设为智能指针，则可以这样做：

```
namespace myNamespace
{
    class Class2;

    typedef std::shared_ptr<Class2> Class2ptr;

    class Class1
    {
        /*variables and functions*/
        void doSomething(...);
        Class2ptr exampleObject;
    };
} 
```

但是 shared_ptr 必须完全包含并且不能预先声明，因为 shared_ptr 现在是成员变量并且类需要知道*它们的*完整大小。

# c++ - C++ 预处理器/宏在函数定义后自动添加行

> ID：15142471
> 
> 赞同：4
> 
> 时间：2013-02-28T18:03:06.820
> 
> 标签：c++, macros, c-preprocessor

在 C++ 中，我想让函数在声明时作为函数指针自动添加到映射（或向量，在这种情况下并不重要），并在以后自动调用。例如，如果我正在编写单元测试框架并且我只想让用户像这样声明他们的每个单元测试，这将很有用：

```
UNIT_TEST_FUNCTION(function_name){

// do something 

} 
```

相反，像这样的东西被调用

```
void function_name(){
  //do something
}
int temp = register_function("function_name", function_name); 
```

例如， register_function() 在函数指针映射中添加用户定义的函数。所以基本上，我需要一种机制，在函数定义之后添加额外的代码行，以便在定义的函数上自动执行一些操作。这可能使用宏吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T18:13:43.503

宏只能生成连续的文本块。它无法按照您在问题中显示的方式进行布局。

但是，如果您愿意重新安排一点，则可以完成。

```
#define UNIT_TEST_FUNCTION(function_name) \
    void function_name(); // forward declaration \
    int temp##function_name = register_function(#function_name, function_name); \
    void function_name() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:14:53.800

单个预处理器宏无法执行您想要的操作，因为它只能生成单个连续的文本块。预处理器宏在某种意义上是愚蠢的，因为它们对语言一无所知——因此是“*预*处理器宏”中的预处理器。

您可以做的是使用一对宏或宏元组来分隔测试用例映射的开始和结束，并为每个单独的测试用例使用一个宏。这些方面的东西：

```
TEST_CASES_BEGIN

UNIT_TEST_FUNCTION(function_name){

// do something 

}

TEST_CASES_END 
```

Boost 单元测试工具使用与此非常相似的机制。您甚至可能（最终）发现这种设计比您试图实现的设计更具表现力。

# php - iframe 网址搜索

> ID：15142472
> 
> 赞同：-1
> 
> 时间：2013-02-28T18:03:10.747
> 
> 标签：php, javascript, html, iframe

我想为带有 HTML（可能还有 JS）的 iframe 进行 url 搜索输入。我搜索了很多网站，但没有找到。

有谁知道怎么做？

我想我需要使用类似的东西

```
<form action="http://" method="get" target="myiframe">
 <input id="search" type="text">
</form> 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:18:03.923

```
<!DOCTYPE html>
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <title>Update iframe</title>
  <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
 </head>

 <body id='body'>
 <div><form action="" method="get" id="myform"> <input id="search" type="text" /><input type="submit" value="go" /> </form></div>
 <div align="center"><iframe name="MyIframe" id="myiframe" src="" width="980" height="500" scrolling="yes"  frameborder="0"></iframe><div>
 <script>
 // Send search form data
   $("#myform").submit(function(event) {
    // stop form from submitting normally
    event.preventDefault(); 
    // get search form input field value
    var s = $('#search').val();
    // update iframe url
    $('#myiframe').attr('src', 'http://jquery.com/?s='+s);
     }
    );
 </script>
 </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:22:51.807

您可以使用[jQuery](http://jquery.com)：

```
 // Send search form data
   $("#searchFormId").submit(function(event) {
    // stop form from submitting normally
    event.preventDefault(); 
    // get search form input field value
    var s = $('#inpuFieldId').val();
    // update iframe url
    $('#iframeid').attr('src', 'http://example.com?formvalue='+s);
     }
    ); 
```

# php - WP-Foundation (by 320press) 带背景图像的轨道滑块

> ID：15142473
> 
> 赞同：0
> 
> 时间：2013-02-28T18:03:13.447
> 
> 标签：php, wordpress, wordpress-theming, zurb-foundation

我想在这里做的事情是将博客帖子的缩略图作为背景图像添加到 320press WP-Foundation Wordpress 主题内的内置 Orbit 滑块中。首先要说的是，我不知道如何编写 PHP 代码。我只是想做这个小调整，让设计看起来更好。我的代码：

```
<?php
  global $post;
  $tmp_post = $post;
  $args = array( 'numberposts' => 5 );
  $myposts = get_posts( $args );
  foreach( $myposts as $post ) : setup_postdata($post); 
    $post_thumbnail_id = get_post_thumbnail_id();
    $featured_src = wp_get_attachment_image_src( $post_thumbnail_id, 'wpf-home-featured');
?>

<div style="background-color: #F2F2F2; background-size:cover; background-image: url(<?php echo wp_get_attachment_image_src($post_thumbnail_id); ?>);">
  <h3><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h3>
  <?php the_excerpt(); ?>
  <p><a href="<?php the_permalink(); ?>" class="button nice radius">Read More »</a></p>
</div>
<?php endforeach; ?> 
```

这就是整个代码，现在到我遇到问题的部分：

```
`<div style="background-color: #F2F2F2; background-size:cover; background-image: url(<?php echo wp_get_attachment_image_src($post_thumbnail_id); ?>);">` 
```

如您所见，我尝试获取图像源并将其设置为背景图像。我不知道如何解决这个问题，所以，提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:13:28.500

尝试将其更改为

```
background-image: url('<?php echo $featured_src; ?>') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:22:06.777

[wp_get_attachment_image_src](http://codex.wordpress.org/Function_Reference/wp_get_attachment_image_src)的文档揭示了这个问题。此函数返回一个数组，其中包含图像的 url、宽度和高度。此外，它接受的第二个参数是图像的输出大小。由于您将它与 background-size:cover 一起使用，我认为您希望图像是全分辨率的。

为了输出正确的 background-url 而不是 array()，将背景 div 中的 echo 更改为`$featured_src[0]`：

```
<div style="background-color: #F2F2F2; background-size:cover; background-image: url(<?php echo $featured_src[0]; ?>);"> 
```

要使背景图像全分辨率，请将 $featured_src 行上的第二个参数更改为`'full'`：

```
$featured_src = wp_get_attachment_image_src( $post_thumbnail_id, 'full'); 
```

# cocoa - 根据其他属性设置 Core Data 属性

> ID：15142476
> 
> 赞同：0
> 
> 时间：2013-02-28T18:03:23.483
> 
> 标签：cocoa, core-data

我试图了解 Core Data 是如何工作的。为此，我尝试使用以下属性实现一个名为“Color”的简单实体：

*   value -> 一个 NSColor 来处理颜色本身，绑定到一个 NSColorWell
*   red -> 一个浮点值，用于处理颜色的红色分量，绑定到 NSSlider
*   绿色 -> 与红色相同，但用于绿色组件，绑定到 NSSlider
*   blue -> blue 组件，绑定到 NSSlider

为此，我使用了一个名为 Color 的类，并覆盖了 - (id)value 以根据组件获取颜色：

```
 @implementation Color

@dynamic blue;
@dynamic green;
@dynamic name;
@dynamic red;
@dynamic value;

- (id)value
{
    return [NSColor colorWithCalibratedRed:self.red.floatValue green:self.green.floatValue blue:self.blue.floatValue alpha:1.0];
}

+ (NSSet *)keyPathsForValuesAffectingValue
{
    return [NSSet setWithArray:@[@"red", @"green", @"blue"]];
} 
```

每次我更改滑块值时，颜色都会自行适应组件。

我想做的是逆操作，当我设置颜色（拖放或 NSColorWell 的颜色选择器）时，组件会自行调整。我试图实现这一点，但它从来没有奏效。我已经尝试了太多东西来将它们粘贴在这里（这无关紧要，因为它不起作用）。我怎样才能做到这一点 ？理解这一点可以帮助我理解 Core Data 是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:43:30.657

所以这是使它工作的一段代码：

```
@implementation Color

@dynamic blue;
@dynamic green;
@dynamic name;
@dynamic red;
@dynamic value;

- (id)value
{
    return [NSColor colorWithCalibratedRed:self.red.floatValue green:self.green.floatValue blue:self.blue.floatValue alpha:1.0];
}

- (void)setValue:(id)value
{
    [self willChangeValueForKey:@"value"];
    [self setPrimitiveValue:value forKey:@"value"];
    [self didChangeValueForKey:@"value"];
    [self setRed:@([(NSColor *)value redComponent])];
    [self setGreen:@([(NSColor *)value greenComponent])];
    [self setBlue:@([(NSColor *)value blueComponent])];
}

+ (NSSet *)keyPathsForValuesAffectingValue
{
    return [NSSet setWithArray:@[@"red", @"green", @"blue"]];
} 
```

现在我可以处理 HSB 滑块了。

# javascript - 如何将 Javascript 的 window.find 限制为特定的 DIV？

> ID：15142485
> 
> 赞同：11
> 
> 时间：2013-02-28T18:03:53.827
> 
> 标签：javascript, google-chrome, firefox, safari

是否可以在 Safari/Firefox/Chrome 中使用 Javascript 在特定 div 容器中搜索给定的文本字符串。我知道您可以使用它`window.find(str)`来搜索整个页面，但是否可以将搜索区域仅限于 div？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T18:06:34.740

一旦你查找了你的`div`（你可以通过[`document.getElementById`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-getElBId)或任何其他 DOM 函数，[这里的各种规格](http://www.w3.org/DOM/DOMTR)），你可以使用[`textContent`](http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#Node3-textContent)或[`innerText`](http://msdn.microsoft.com/en-us/library/ie/ms533899%28v=vs.85%29.aspx)来查找`div`. 然后你可以用它`indexOf`来查找字符串。

或者，在较低级别，您可以使用递归函数搜索窗口中的所有文本节点，这*听起来*比实际复杂得多。基本上，从你的目标`div`（这是一个[`Element`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-745549614)）开始，你可以遍历它[`childNodes`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1451460987)并搜索它们的`nodeValue`字符串（如果它们是[`Text`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1312295772)s）或递归到它们（如果它们是`Element`s）。

`"foo"`诀窍是在这个标记中找不到一个简单的版本：

```
<p><span>fo</span>o</p> 
```

...因为两个`Text`节点都没有`nodeValue`with `"foo"`（其中一个有`"fo"`，另一个`"o"`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-04T03:25:07.183

根据您要执行的操作，有一种有趣的方法可以做到这一点（确实需要一些工作）。

首先，搜索从用户最后点击的位置开始。因此，要获得正确的上下文，您可以强制单击 div。这会将内部指针放在 div 的开头。

然后，您可以像往常一样使用 window.find 来查找元素。它将**突出显示**并移至找到的下一个项目。您可以创建自己的对话框并处理 find 返回的 true 或 false，以及检查位置。所以举个例子，你可以保存当前的滚动位置，如果下一个返回的结果在 div 之外，你就恢复滚动。此外，如果它返回 false，那么您可以说没有找到结果。

您还可以显示默认搜索框。在这种情况下，您可以指定起始位置，但不能指定结束位置，因为您失去了控制。

一些示例代码可帮助您入门。如果有足够的兴趣，我也可以尝试放置一个 jsfiddle。

句法：

```
window.find(aStringToFind, bCaseSensitive, bBackwards, bWrapAround, bWholeWord, bSearchInFrames, bShowDialog); 
```

例如，要开始在 myDiv 中搜索，请尝试

```
document.getElementById("myDiv").click(); //Place cursor at the beginning
window.find("t", 0, 0, 0, 0, 0, 0); //Go to the next location, no wrap around 
```

您可以设置一个模糊（失去焦点）事件处理程序，让您知道何时离开 div，以便停止搜索。

要保存当前滚动位置，请使用 document.body.scrollTop。如果它试图跳出 div，您可以将其设置回来。

希望这可以帮助！〜技术老兄

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-28T17:19:21.363

根据其他答案，您将无法为此使用该`window.find`功能。好消息是，您不必完全自己编写程序，因为现在有一个名为 rangy 的库在这方面有很大帮助。因此，由于代码本身有点太多，无法将粘贴复制到此答案中，因此我将仅参考可以[在此处找到](http://rangy.googlecode.com/svn/trunk/demos/textrange.html)的 rangy 库的代码示例。查看代码你会发现

```
 searchScopeRange.selectNodeContents(document.body); 
```

你可以用它代替

```
 searchScopeRange.selectNodeContents(document.getElementById("content")); 
```

仅在内容 div 中专门搜索。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-10T07:48:11.293

如果您仍在寻找某些东西，我想我找到了一个不错的解决方案；

这是：[https ://www.aspforums.net/Threads/211834/How-to-search-text-on-web-page-similar-to-CTRL-F-using-jQuery/](https://www.aspforums.net/Threads/211834/How-to-search-text-on-web-page-similar-to-CTRL-F-using-jQuery/)

我正在努力删除 jQuery (wip)：codepen.io/eloiletagant/pen/MBgOPB 希望还不算太晚:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-04T05:30:09.097

这是我对 jquery 的处理方式：

```
var result = $('#elementid').text().indexOf('yourtext') > -1 
```

它将返回 true 或 false

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-03T06:19:58.343

```
var elements = [];
$(document).find("*").filter(function () {
  if($(this).text().contains(yourText))
    elements.push($(this));
});
console.log(elements); 
```

I didn't try it, but according the jQuery documentation it should work.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-24T12:41:15.043

您可以使用`Window.find()`搜索页面中的所有匹配项并`Node.contains()`过滤掉不合适的搜索结果。
以下是如何查找和突出显示特定元素中所有出现的字符串的示例：

```
var searchText = "something"
var container = document.getElementById("specificContainer");
// selection object
var sel = window.getSelection()
sel.collapse(document.body, 0)
// array to store ranges found
var ranges = []
// find all occurrences in a page
while (window.find(searchText)) {
    // filter out search results outside of a specific element
    if (container.contains(sel.anchorNode)){
        ranges.push(sel.getRangeAt(sel.rangeCount - 1))
    }
}   
// remove selection
sel.collapseToEnd()

// Handle ranges outside of the while loop above.
// Otherwise Safari freezes for some reason (Chrome doesn't).
if (ranges.length == 0){
    alert("No results for '" + searchText + "'")
 } else {
    for (var i = 0; i < ranges.length; i++){
        var range = ranges[i]
        if (range.startContainer == range.endContainer){
            // Range includes just one node
            highlight(i, range)
        } else {
            // More complex case: range includes multiple nodes
            // Get all the text nodes in the range
            var textNodes = getTextNodesInRange(
                                range.commonAncestorContainer,
                                range.startContainer,
                                range.endContainer) 

            var startOffset = range.startOffset
            var endOffset = range.endOffset
            for (var j = 0; j < textNodes.length; j++){
                var node = textNodes[j]
                range.setStart(node, j==0? startOffset : 0)
                range.setEnd(node, j==textNodes.length-1? 
                                       endOffset : node.nodeValue.length)
                highlight(i, range)
            }
        }
    }
}

function highlight(index, range){
    var newNode = document.createElement("span")
    // TODO: define CSS class "highlight"
    // or use <code>newNode.style.backgroundColor = "yellow"</code> instead
    newNode.className = "highlight"
    range.surroundContents(newNode)
    // scroll to the first match found
    if (index == 0){
        newNode.scrollIntoView()
    }
}

function getTextNodesInRange(rootNode, firstNode, lastNode){
    var nodes = []
    var startNode = null, endNode = lastNode
    var walker = document.createTreeWalker(
            rootNode,
            // search for text nodes
            NodeFilter.SHOW_TEXT,
            // Logic to determine whether to accept, reject or skip node.
            // In this case, only accept nodes that are between
            // <code>firstNode</code> and <code>lastNode</code>
            {
                acceptNode: function(node) {
                    if (!startNode) {
                        if (firstNode == node){
                            startNode = node
                            return NodeFilter.FILTER_ACCEPT
                        }
                        return NodeFilter.FILTER_REJECT
                    }

                    if (endNode) {
                        if (lastNode == node){
                            endNode = null
                        }
                        return NodeFilter.FILTER_ACCEPT
                    }

                    return NodeFilter.FILTER_REJECT
                 }
            },
            false
        )

    while(walker.nextNode()){
        nodes.push(walker.currentNode);
    }
    return nodes;
} 
```

对于`Range`对象，请参阅[https://developer.mozilla.org/en-US/docs/Web/API/Range](https://developer.mozilla.org/en-US/docs/Web/API/Range)。
有关`TreeWalker`对象，请参阅[https://developer.mozilla.org/en-US/docs/Web/API/TreeWalker](https://developer.mozilla.org/en-US/docs/Web/API/TreeWalker)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-02-28T18:47:08.747

也许你试图不使用 jquery ......但如果没有，你可以使用它`$('div:contains(whatyouarelookingfor)')`，唯一的问题是它可以返回也包含匹配的子 div 的父元素。

# java - 如果我选择了正确的功能，有人可以告诉我吗？

> ID：15142486
> 
> 赞同：-1
> 
> 时间：2013-02-28T18:04:18.247
> 
> 标签：java

我被要求找到这个功能：

“允许用户在不移动鼠标进入下一个文本字段的情况下为电话号码添加数字的代码在哪里/是什么？要具体。”

我相信该函数是 nextFocusableComponent 并且在此类中，但我只是想在提交之前确定：

[https://gist.github.com/anonymous/5058644](https://gist.github.com/anonymous/5058644)

PhoneFoucusListener 类和 PhoneDocumentListener 类：

[https://gist.github.com/anonymous/5058913](https://gist.github.com/anonymous/5058913)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:08:51.617

这些函数将 u 从区号移动到前缀，再到后缀

你需要探索 phonefocuslistener 和 phonedocumentlistener 看看如何

```
areaCodeField.addFocusListener(new PhoneFocusListener());
areaCodeField.getDocument().addDocumentListener(new PhoneDocumentListener(areaCodeField, 3));

prefixField.addFocusListener(new PhoneFocusListener());
prefixField.getDocument().addDocumentListener(new PhoneDocumentListener(prefixField, 3));

suffixField.addFocusListener(new PhoneFocusListener());
suffixField.getDocument().addDocumentListener(new PhoneDocumentListener(suffixField, 4)); 
```

具体来说，这段代码转移了phonedocumentlistener中的焦点

```
 public void insertUpdate(DocumentEvent dEvent) {
    if(dEvent.getDocument().getLength() == numsAllowed)
        txtField.transferFocus();
} 
```

# android - 当我使用 GridView 时在 android 中跳过帧？

> ID：15142488
> 
> 赞同：0
> 
> 时间：2013-02-28T18:04:23.270
> 
> 标签：android, android-gridview

当我使用 GridView 并向 GridView 添加自定义布局时，我看到了这个错误，我的应用程序运行很慢

```
 02-28 18:39:59.252: I/Choreographer(5586): Skipped 263 frames!  The application may be doing too much work on its main thread. 
```

我的代码：

```
 public View getView(int position, View convertView, ViewGroup parent) {

        View vi1=convertView;
        if(convertView==null){

            vi1 = inflater.inflate(R.layout.my_layout, null);

            ImageView imv = (ImageView) vi1.findViewById(R.id.Image);
            ImageView imv2 = (ImageView) vi1.findViewById(R.id.imageView2);
            TextView tw1 = (TextView) vi1.findViewById(R.id.lName);
       //     TextView tw2 = (TextView) vi1.findViewById(R.id.County);
         //   TextView tw3 = (TextView) vi1.findViewById(R.id.user);
//          imageLoader.DisplayImage(null, imv);
    //        imageLoader.DisplayImage(null, imv2);
            tw1.setText("AZ");
        }

          return vi1;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:18:18.790

你的实现`getView()`效率很低。搜索“ViewHolder”或“RowWrapper”策略进行改进。一个很好的起点是Android 开发网站上的[这个资源](http://developer.android.com/training/improving-layouts/smooth-scrolling.html#ViewHolder)，但我绝对推荐阅读[Romain Guy 的 Google I/O 2010 关于这个主题的演示文稿](http://dl.google.com/googleio/2010/android-world-of-listview-android.pdf)。如果您愿意的话，也有一段关于他的会议的 YouTube 视频。

您的结果最终应该看起来像这样：

```
@Override public View getView(int position, View convertView, ViewGroup parent) { 
    ViewHolder holder; 
    if (convertView == null) { 
        convertView = mInflater.inflate(R.layout.my_layout, parent, false);
        holder = new ViewHolder(); 
        holder.text = (TextView) convertView.findViewById(R.id.lName); 
        holder.img1 = (ImageView) convertView.findViewById(R.id.Image); 
        holder.img2  = (ImageView) convertView.findViewById(R.id.imageView2); 
        convertView.setTag(holder); 
    } else { 
        holder = (ViewHolder) convertView.getTag(); 
    } 
    holder.text.setText("AZ"); 
    holder.img1.setImageBitmap(...); 
    holder.img2.setImageResource(...); 
    return convertView; 
}

static class ViewHolder { 
    TextView text; 
    ImageView img1, img2; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:17:21.650

编写您的 getView 代码时存在问题。每次都会为每一行创建您的视图。请在下面找到使用 getView 方法的正确方法。您需要创建一个 ViewHolder 类。

```
 static class ViewHolder {
    ImageView img1;
    ImageView img2;
    TextView tvTitle;

}

      @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                View row = convertView;
                ViewHolder holder;

                if (row == null) {
                    holder = new ViewHolder();
                    LayoutInflater inflater = ((Activity) context).getLayoutInflater();
                    row = inflater.inflate(R.layout.my_layout, parent, false);
                    holder.play = (Button) row.findViewById(R.id.btn_list_play);
                    holder.img1 = (ImageView) row.findViewById(R.id.img1_id);
                    holder.img2 = (ImageView) row .findViewById(R.id.img2_id);
                    holder.tvTitle = (TextView) row.findViewById(R.id.tvTitle_id);
                    row.setTag(holder);
            }
        else
        {
                        holder = (ViewHolder ) row.getTag();

        }
                    holder.tvTitle.setText("AZ");

                return row;
            } 
```

# javascript - 以优雅的方式停止 jQuery 链接

> ID：15142493
> 
> 赞同：0
> 
> 时间：2013-02-28T18:04:57.647
> 
> 标签：javascript, jquery

首先，我有点困惑，我无法在 SO 上立即找到答案。问题是关于代码样式。

考虑一个例子：

```
$('input[type=text]').on('click', doSomething); 
```

如果页面上没有输入会发生什么？这个选择器的结果似乎是`null`，我们得到一个错误。

所以，我们必须让代码更大更丑：

```
var inputs = $('input[type=text]');

if (inputs) {
    inputs.on('click', doSomething);
} 
```

我喜欢 jQuery，并且期待这个解决方案的更优雅和更简短的形式。

* * *

**更新**

此问题的原因是`prototype.js`页面上的 3 方脚本包含。道歉，我应该在发帖之前在沙箱中测试问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T18:06:19.687

一个 jQuery 选择器总是返回一个 jQuery 对象，你永远不会得到 null。

```
$('#Not exist!').attr('foo', 'foo'); //no error, returns jQuery 
```

不像`document.getElementById`：

```
document.getElementById('Not exist!') == null 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T18:11:37.550

如果没有找到匹配项，则选择器实际上不会返回`null`，这是故意的，因此链接不会中断。这符合 jQuery 的“少写，多做”的座右铭。

我做了一个[jsFiddle 来说明这一点](http://jsfiddle.net/YFcjy/1/)。在浏览器上打开开发人员工具并查看控制台。

```
var doSomething = function(){};
$('input[type=text]').on('click', doSomething); //No error

//...because this:

var obj = $('input[type=text]'); //is a jQuery object, even 
                                 //though there are no <input> elements

console.dir(obj); //Inspect the console. you get: jQuery.fn.jQuery.init[0] 
```

我希望这是有道理的。您可以在示例中简单地执行前者：

```
$('input[type=text]').on('click', doSomething); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T18:08:08.110

没有错误，只是一个空对象。你可以去

```
$('input[type=text]').on('click', doSomething); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T18:26:22.680

我希望这有效...

```
$('input[type="text"]').on('click', doSomething); 
```

# php - WordPress JSON API

> ID：15142494
> 
> 赞同：0
> 
> 时间：2013-02-28T18:04:58.883
> 
> 标签：php, json, wordpress, api

嘿伙计们，到目前为止，我一直很幸运使用我喜欢的 JSON API，但是我遇到了这个小问题，它涉及在同一个自定义函数中进行多个查询。

```
 global $json_api;
            $result = array();

            $category = $json_api->introspector->get_categories();

            foreach($category as $value){

                    if($value->id !== 1 && $value->id !== 69 && $value->id !== 68 && $value->id !== 66){

                            $search_args = array(
                                    'cat' => $value->id,
                                    'order' => 'DESC',
                                    'post_status' => 'publish'
                            );

                            $search_limits = array(
                                    10 => array(
                                            'limit' => 4
                                    ),
                                    5 => array(
                                            'limit' => 2
                                    ),
                                    3 => array(
                                            'limit' => 3
                                    )
                            );

                            $json_api->query->count = ($search_limits[$value->id]['limit'] === null ? 1 : $search_limits[$v$
                            $result['posts'][$value->id] = $json_api->introspector->get_posts($search_args,true);
                    }
            }  

            return $result; 
```

我硬编码了一些值只是为了让它更直接，问题是当我进行一个查询时，我会根据我正在寻找的类别说 [10330][10218][10202] 的值 ID。然后我进行同样的查询，但使用另一个类别 ID。但同样的结果也会发生。所以我想知道是由于 API 中的某种缓存，如果可以，我可以为这个查询关闭它吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:48:13.727

那么你认为问题是我显然没有重置我的查询。

```
wp_reset_query(); 
```

成功了。

# asp.net-mvc - 构建单页应用程序 - MVC 是正确的工具吗？

> ID：15142498
> 
> 赞同：1
> 
> 时间：2013-02-28T18:05:08.283
> 
> 标签：asp.net-mvc, prototypejs

根据另一个问题的答案：

[DTO 如何适应 MVC 应用程序的 Repository+Service 模式？](https://stackoverflow.com/questions/15126899/how-to-dtos-fit-into-the-repositoryservice-pattern-of-mvc-applications)

MVC 为单页应用程序提供了哪些好处？与 ASP .NET MVC 相比，使用 WebAPI/原型堆栈何时会变得更好？

# intuit-partner-platform - 尝试使用 IPP.NET 插入 QBO Credit Memo

> ID：15142500
> 
> 赞同：0
> 
> 时间：2013-02-28T18:05:11.777
> 
> 标签：intuit-partner-platform, quickbooks-online

我正在使用 IPP.Net 尝试将单个 CreditMemo 插入 Quickbooks Online。我已成功插入具有类似代码的发票。我插入 CreditMemo 的代码如下：

```
Try
                        Dim qboCreditMemo As New Intuit.Ipp.Data.Qbo.CreditMemo
                        Dim qboCreditMemoHdr As New Intuit.Ipp.Data.Qbo.CreditMemoHeader
                        Dim qboCreditMemoLine As Intuit.Ipp.Data.Qbo.CreditMemoLine
                        Dim CreditMemoLines As New List(Of Intuit.Ipp.Data.Qbo.CreditMemoLine)
                        Dim CreditMemoItemAttributes As Qbo.ItemChoiceType2()
                        Dim CreditMemoItemValues As Object()

                        For Each row In tblTrans.Rows
                            If bFirstRow Then
                                'Set CreditMemo header
                                qboCreditMemoHdr.DocNumber = "SMA" & CStr(row("batch_id"))
                                qboCreditMemoHdr.TxnDate = Format(row("acct_date"), "yyyy-MM-dd")
                                qboCreditMemoHdr.Msg = row("batch_descr")
                                qboCreditMemoHdr.CustomerId = New Intuit.Ipp.Data.Qbo.IdType
                                qboCreditMemoHdr.CustomerId.Value = row("iface_owner_id")
                                qboCreditMemo.Header = qboCreditMemoHdr

                                bFirstRow = False 'only do this once
                            End If

                            'Lines
                            qboCreditMemoLine = New Qbo.CreditMemoLine
                            qboCreditMemoLine.Desc = row("descr")
                            qboCreditMemoLine.Amount = row("amount_owner")
                            qboCreditMemoLine.AmountSpecified = True
                            CreditMemoItemAttributes = {Qbo.ItemsChoiceType2.ItemId, Qbo.ItemsChoiceType2.UnitPrice, Qbo.ItemsChoiceType2.Qty}
                            CreditMemoItemValues = {New Qbo.IdType With {.idDomain = Qbo.idDomainEnum.QBO, .Value = row("iface_item_id")}, row("unitPrice"), row("quantity")}
                            qboCreditMemoLine.ItemsElementName = CreditMemoItemAttributes
                            qboCreditMemoLine.Items = CreditMemoItemValues
                            qboCreditMemoLine.ClassId = New Intuit.Ipp.Data.Qbo.IdType
                            qboCreditMemoLine.ClassId.Value = row("iface_class_id")
                            CreditMemoLines.Add(qboCreditMemoLine) 'Add line to list of lines
                        Next row

                        qboCreditMemo.Line = CreditMemoLines.ToArray  'Add CreditMemo lines to CreditMemo lines property
                        resultCreditMemo = commonService.Add(qboCreditMemo)           'Add CreditMemo to request
                        Return "OK"

                        'Catch exID As Intuit.Ipp.Exception.IdsException
                        'Return exID.Message
                    Catch ex As Exception
                        Return ex.Message

                    End Try 
```

我收到一条错误消息“内部服务器错误”。这似乎是一个 IdsException。正如我在另一篇文章中所指出的，我能够通过 Fault 和 Error 对象获取 BatchRequest 的详细信息。但是，我不明白如何使用 Dataservices 获取有关此错误的详细信息。

我认为我可能需要更好的错误处理，假设有更多信息可用于此错误。而且，我需要帮助弄清楚为什么我为发票设置的相同属性不适用于 CreditMemo。不幸的是，Intuit 网站中列出所需属性的文档不包括 CreditMemo（尽管它包括发票）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T18:44:26.237

QBO 不支持 CreditMemo：

[https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/0500_Supported_Entities_and_Operations](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/0500_Supported_Entities_and_Operations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T11:01:50.140

我几乎有同样的问题，问题是数量和金额不应该是负数。我在我的 creditmemoLine 上更改了它并且它有效

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-17T10:06:05.583

如果您使用的是 qbo v3，您可以执行以下代码示例，

```
CreditMemo objInvoice = new CreditMemo();
            if (qbLog.OperationID != (int)MyEnums.QBOperations.Create)
            {
                var qboId = _iQBLogRepository.GetFromNewContext(x => (x.ReferenceID == qbLog.ReferenceID && x.ActionID == qbLog.ActionID && x.QboId != null)).QboId;
                QueryService<CreditMemo> invoiceQueryService = new QueryService<CreditMemo>(context); 
                objInvoice = invoiceQueryService.ExecuteIdsQuery("Select * From CreditMemo Where Id='" + qboId + "'", QueryOperationType.query).FirstOrDefault();
                if (qbLog.OperationID == (int)MyEnums.QBOperations.Deleted)
                {
                    commonService.Delete<CreditMemo>(objInvoice);
                    return objInvoice.Id;
                }
            }

            objInvoice.CustomerRef = new ReferenceType()
            {
                name = objCustomer.DisplayName,
                Value = objCustomer.Id
            };

            #region Account in transaction

            objInvoice.ARAccountRef = new ReferenceType()
            {
                type = Enum.GetName(typeof(objectNameEnumType), objectNameEnumType.Account),
                name = objAccount.Name,
                Value = objAccount.Id
            };
            #endregion

            #region Items in transaction
            QueryService<Item> itemQueryService = new QueryService<Item>(context);
            Item objItem = itemQueryService.ExecuteIdsQuery("Select * From Item  Where Name = '" + myname + "'", QueryOperationType.query).FirstOrDefault();

            if (objItem == null)
            {
                objItem = new Item();
                objItem.IncomeAccountRef = new ReferenceType()
                {
                    type = Enum.GetName(typeof(objectNameEnumType), objectNameEnumType.Account),
                    name = objAccount.Name,
                    Value = objAccount.Id
                };
                objItem.Name = "name";
                objItem.Description = "description";
                objItem = commonService.Add<Item>(objItem);
            }
            #endregion

            Class objClass = new Class();
            QueryService<Class> classQueryService = new QueryService<Class>(context);
            objClass = classQueryService.ExecuteIdsQuery("Select * From Class  Where Id='" + properties.QboId + "'", QueryOperationType.query).FirstOrDefault();

            #region Sales Line items
            List<Line> lineList = new List<Line>();
            Line line = new Line();
            line.Description = "description";
            line.Amount = "amount";
            line.AmountSpecified = true;
            line.DetailType = LineDetailTypeEnum.SalesItemLineDetail;
            line.AnyIntuitObject = new SalesItemLineDetail
            {
                AnyIntuitObject = _objReceivables.Amount,
                ClassRef = (objClass != null && objClass.Id != null) ? new ReferenceType
                {
                    type = Enum.GetName(typeof(objectNameEnumType), objectNameEnumType.Class),
                    name = objClass.Name,
                    Value = objClass.Id
                } : null,
                InventorySiteRef = null,
                ItemAccountRef = null,
                ItemElementName = ItemChoiceType.UnitPrice,
                ItemRef = new ReferenceType
                {
                    type = Enum.GetName(typeof(objectNameEnumType), objectNameEnumType.Item),
                    name = objItem.Name,
                    Value = objItem.Id
                },
                MarkupInfo = null,
                Qty = 1,
                QtySpecified = true,
            };
            line.Id = "1";
            line.LineEx = null;
            line.LineNum = "1";
            line.LinkedTxn = null;
            line.DetailTypeSpecified = true;
            lineList.Add(line);
            objInvoice.Line = lineList.ToArray();
            #endregion

            #region Cash Account in transaction
            QueryService<Account> accountsQueryService = new QueryService<Account>(context);
            objCashQbAccount = accountsQueryService.ExecuteIdsQuery("Select * From Account   Where Id='" + MyAccountQboId + "'", QueryOperationType.query).FirstOrDefault();
            objInvoice.DepositToAccountRef = new ReferenceType()
            {
                type = Enum.GetName(typeof(objectNameEnumType), objectNameEnumType.Account),
                name = objCashQbAccount.Name,
                Value = objCashQbAccount.Id
            };
            #endregion

            objInvoice.DueDate = DateTime.Now;
            objInvoice.DueDateSpecified = true;

            objInvoice.TxnDate =DateTime.Now;
            objInvoice.TxnDateSpecified = true;

            objInvoice.PrivateNote ="Description";

            objInvoice.GlobalTaxCalculation = GlobalTaxCalculationEnum.TaxExcluded;
            objInvoice.GlobalTaxCalculationSpecified = true;

            objInvoice.TotalAmt = _objReceivables.Amount;
            objInvoice.TotalAmtSpecified = true;

            objInvoice.ApplyTaxAfterDiscount = false;
            objInvoice.ApplyTaxAfterDiscountSpecified = true;

            objInvoice.PrintStatus = PrintStatusEnum.NotSet;
            objInvoice.PrintStatusSpecified = true;
            objInvoice.EmailStatus = EmailStatusEnum.NotSet;
            objInvoice.EmailStatusSpecified = true;

            objInvoice.Balance = "Balance amount if any"
            objInvoice.BalanceSpecified = true;

            objInvoice.Line = lineList.ToArray();

            if (qbLog.OperationID ==  (int)MyEnums.QBOperations.Create)
                objInvoice = commonService.Add<CreditMemo>(objInvoice);
            else if (qbLog.OperationID ==  (int)MyEnums.QBOperations.Update)
                commonService.Update<CreditMemo>(objInvoice);
            return objInvoice.Id; 
```

# rgba - 查看 RGBA 图像

> ID：15142502
> 
> 赞同：1
> 
> 时间：2013-02-28T18:05:13.573
> 
> 标签：rgba

有人可以告诉我如何查看 RGBA 图像吗？我只想要一个可以显示 RGBA 图像的工具！我写了一个代码，它只输出 RGBA 格式。我只是想验证我的代码是否有效，并且只想找到一个简单的工具来查看此图像。我无法找到能够显示 RGBA 图像的软件。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:33:02.703

RGBA 文件仅包含原始通道数据。二进制数据将没有足够的信息来显示图像（即宽度、高度、深度等）。

如果您知道每个`.rgba`文件的图像尺寸，您应该能够处理这些数据。这是在 javascript 中查看原始日期的示例。

```
var fr       = new FileReader(),
    myWidth  = 200,
    myHeight = 200;

fr.onload = function(frEvent) {
 var canvasElement = document.getElementById("myCanvas"),
     ctx           = canvasElement.getContext("2d"),
     blob          = ctx.createImageData(myWidth,myHeight),
     index         = 0;

 while(index < frEvent.target.result.length) 
   blob.data[index] = frEvent.target.result.charCodeAt(index++);

 ctx.putImageData(blob,0,0);  
} 
```

[Imagemagick](http://www.imagemagick.org/script/index.php)将能够显示原始 RGBA 数据。假设每个颜色样本为 8 位。

```
display -size 200x200 -depth 8 mySimpleData.rgba 
```

# html - CSS导航栏不是水平的

> ID：15142506
> 
> 赞同：1
> 
> 时间：2013-02-28T18:05:21.550
> 
> 标签：html, css

我正在尝试使导航栏水平，但目前它是垂直的。任何帮助都会很棒。问题在于它是垂直的。我已经在 html 中制作了列表，然后使用我在 css 中的其他文件对其进行了编辑。

HTML：

```
<html>
<head>
    <link rel="stylesheet" href="Style/style.css" type="text/css"/>
</head>
<body>
<div class="horizontal">
<ul>
<li><a href="#">Home</a></li>
<li><a href="#">News</a></li>
<li><a href="#">Articles</a></li>
</ul>
</div>

</body>
<html> 
```

CSS：

```
div.horizontal
{
width:100%;
height:63px;
}
div.horizontal ul
{
list-style-type:none;
margin:0;
padding:0;
}
div.horizontal li
{
float:left;
}
div.horizontal a
{
display:block;
width:86px;
}
div.horizontal a:link,div.horizontal a:visited
{
font-weight:bold;
color:#FFFFFF;
background-color:#98bf21;
text-align:center;
padding:4px;
text-decoration:none;
text-transform:uppercase;
}
div.horizontal a:hover,div.horizontal a:active
{
background-color:#7A991A;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:09:25.490

就个人而言，我总是用这样的 CSS 设置我的水平导航栏（使用你当前的 CSS 作为起点）：

```
div.horizontal li {
    width:86px;
    height:inherit;
    display:inline-block;

    /* Fix bug in IE7 and below */
    zoom:1;
    *display:inline;
}

div.horizontal li a {
    display:block;
    width:100%;
    height:100%;
} 
```

将让它水平放置，并声明它的宽度/高度会`inline-block`为. 然后从容器继承高度/宽度。缺乏也消除了清除任何东西的需要。`li``a``a``li``float:left`

编辑：更新以显示 IE7 及以下不尊重 inline-block 的解决方法；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:10:08.780

尝试：

div.horizo​​ntal a { 显示：块；宽度：86px；向左飘浮; }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T08:16:09.313

利用

```
display:inline-block; 
```

您不能使用当前的水平方法，因为块在流中垂直定位。但是这个属性会覆盖流，并使其将自己视为内联/块混合体。

# c# - 结合应用程序域远程处理和任务时出现死锁

> ID：15142507
> 
> 赞同：15
> 
> 时间：2013-02-28T18:05:23.027
> 
> 标签：c#, task-parallel-library, deadlock, appdomain

我的应用程序需要将插件加载到单独的应用程序域中，然后在其中异步执行一些代码。我编写了一些代码来包装可`Task`编组类型：

```
static class RemoteTask
{
    public static async Task<T> ClientComplete<T>(RemoteTask<T> remoteTask,
                                                  CancellationToken cancellationToken)
    {
        T result;

        using (cancellationToken.Register(remoteTask.Cancel))
        {
            RemoteTaskCompletionSource<T> tcs = new RemoteTaskCompletionSource<T>();
            remoteTask.Complete(tcs);
            result = await tcs.Task;
        }

        await Task.Yield(); // HACK!!

        return result;
    }

    public static RemoteTask<T> ServerStart<T>(Func<CancellationToken, Task<T>> func)
    {
        return new RemoteTask<T>(func);
    }
}

class RemoteTask<T> : MarshalByRefObject
{
    readonly CancellationTokenSource cts = new CancellationTokenSource();
    readonly Task<T> task;

    internal RemoteTask(Func<CancellationToken, Task<T>> starter)
    {
        this.task = starter(cts.Token);
    }

    internal void Complete(RemoteTaskCompletionSource<T> tcs)
    {
        task.ContinueWith(t =>
        {
            if (t.IsFaulted)
            {
                tcs.TrySetException(t.Exception);
            }
            else if (t.IsCanceled)
            {
                tcs.TrySetCancelled();
            }
            else
            {
                tcs.TrySetResult(t.Result);
            }
        }, TaskContinuationOptions.ExecuteSynchronously);
    }

    internal void Cancel()
    {
        cts.Cancel();
    }
}

class RemoteTaskCompletionSource<T> : MarshalByRefObject
{
    readonly TaskCompletionSource<T> tcs = new TaskCompletionSource<T>();

    public bool TrySetResult(T result) { return tcs.TrySetResult(result); }
    public bool TrySetCancelled() { return tcs.TrySetCanceled(); }
    public bool TrySetException(Exception ex) { return tcs.TrySetException(ex); }

    public Task<T> Task
    {
        get
        {
            return tcs.Task;
        }
    }
} 
```

它的用法如下：

```
sealed class ControllerAppDomain
{
    PluginAppDomain plugin;

    public Task<int> SomethingAsync()
    {
        return RemoteTask.ClientComplete(plugin.SomethingAsync(), CancellationToken.None);
    }
}

sealed class PluginAppDomain : MarshalByRefObject
{
    public RemoteTask<int> SomethingAsync()
    {
        return RemoteTask.ServerStart(async cts =>
        {
            cts.ThrowIfCancellationRequested();
            return 1;
        });
    }
} 
```

但我遇到了障碍。如果你看一下`ClientComplete`，有一个`Task.Yield()`我已经插入。如果我评论此行，`ClientComplete`将永远不会返回。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T12:27:33.967

我最好的猜测是，由于包含**await的****async 方法**，您正面临这些问题，这是通过**ThreadPool**管理的，它可以分配一些**回收的 Thread**。

 ******参考 [为所有服务器端代码调用 ConfigureAwait 的最佳实践](https://stackoverflow.com/a/13494570/2260573)

> 实际上，只需执行 await 就可以做到这一点（**让您进入不同的线程**）。一旦您的异步方法遇到等待，该方法就会被阻塞，但线程会返回到线程池。当方法准备好继续时，从线程池中抢夺任何线程并用于恢复该方法。

尝试简化代码，为基线案例生成线程，性能是最后的。******

# javascript - Sencha Touch：如何使用 Sencha Touch 实现 xForms？

> ID：15142514
> 
> 赞同：1
> 
> 时间：2013-02-28T18:05:48.937
> 
> 标签：javascript, extjs, sencha-touch, sencha-touch-2, xforms

我们的 WEB 应用程序使用 xForms 来验证和显示不同国家的不同模板。我必须使用 Sencha Touch 来实现同样的事情。我在各种论坛上搜索，但找不到任何明确的答案。

WEB/ioS/Android 应用程序使用的 xForms 如下所示。

```
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:xf="http://www.w3.org/2002/xforms" 
      xmlns:xs="http://www.w3.org/2001/XMLSchema" 
      xmlns:xrsi="http://www.westernunion.com/schema/xrsi" 
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
      xmlns:xxforms="http://orbeon.org/oxf/xml/xforms"> 
  <head> 
    <title>Bank Account details</title> 
    <xf:model>
      <xf:instance xmlns=""> 
        <bank_account> 
          <bank_name/>
          <swift_code/> 
          <account_number/> 
        </bank_account> 
      </xf:instance> 
      <xf:bind nodeset="bank_name" 
           type="xs:string" 
           required="true()" 
           constraint="string-length(.) &lt; 31"/> 
      <xf:bind nodeset="bank_code" 
           type="xrsi:alphanum" 
           required="true()" 
           constraint="string-length(.) &lt; 12"/> 
      <xf:bind nodeset="account_number" 
           type="xrsi:alphanum" 
           required="true()" 
           constraint="string-length(.) &lt; 25"/>
    </xf:model> 
  </head>
  <body> 
    <section> 
      <dl>
    <dt>Bank Name*:</dt> 
    <dd> 
      <xf:input ref="bank_name" 
                incremental="true" 
                xxforms:maxlength="30"> 
        <xf:alert>Bank Name is required</xf:alert>
        <xf:hint>Bank Name</xf:hint> 
      </xf:input> 
    </dd> 
    <dd> 
      <xf:input ref="bank_code" 
                incremental="true" 
                xxforms:maxlength="11"> 
        <xf:alert>AlphaNumeric</xf:alert> 
        <xf:hint>BIC</xf:hint> 
      </xf:input>
    </dd>

    <dd> 
      <xf:input ref="account_number" 
                incremental="true" 
                xxforms:maxlength="24">
        <xf:alert>IBAN is AlphaNumeric</xf:alert>
        <xf:hint>IBAN</xf:hint>
      </xf:input> 
    </dd> 
      </dl> 
    </section>
  </body>
</html> 
```

我想在我的 sencha touch 应用程序中实现类似的功能。有什么好的方法可以实现吗？任何指针都会有很大帮助。

以下是 2 个有用的链接。

[有人在他们的 Web 应用程序中使用 XForms 吗？](https://stackoverflow.com/questions/80940/is-anyone-using-xforms-in-their-web-applications) [http://www.sencha.com/forum/archive/index.php/t-26497.html](http://www.sencha.com/forum/archive/index.php/t-26497.html)

谢谢 Gendaful

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T11:07:53.017

在我看来，您应该能够使用[XSLTFORMS](http://www.agencexml.com/xsltforms)，它是 xforms 的客户端实现，并将其集成到您的 sencha touch 应用程序中。

我自己没有尝试过，但前一段时间我做了一些研究，XSLTFORMS 似乎运行良好。

# ios - 如何在故事板或 xib 中选择背景视图

> ID：15142515
> 
> 赞同：19
> 
> 时间：2013-02-28T18:05:49.327
> 
> 标签：ios, xcode, uikit, interface-builder, uistoryboard

如果我在故事板或 xib 中用鼠标选择视图，Xcode 将选择最前面的视图。我知道我可以选择文档大纲中的其他视图，但是如果我想用鼠标抓取背景视图来移动它，当我在情节提要中单击时，最前面的视图会再次被选中。

我认为有一种方法可以循环浏览视图并通过按住某些键来选择后面的视图，但我找不到它是什么。有人知道吗？

我正在使用 Xcode 4.6。我知道我也可以使用尺寸检查器移动背景视图，但我正在寻找一种用鼠标定位它们的方法。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-01T21:53:25.927

一种方法是使用编辑器顶部的跳转栏。它是显示通向当前选择的对象路径的控件。

另一种方法是按**control+shift 并左键单击**（或**shift 右键单击**​​）一个项目。这会在菜单中向您显示鼠标下的所有对象，并允许您消除要选择的对象的歧义。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-01T23:19:42.457

好消息：将鼠标放在重叠的图像上，按住 shift 并右键单击鼠标。您应该看到对象列表，在后面选择您的对象。您可以根据需要调整大小。

坏消息：如果你想移动它，你只能使用光标箭头！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T18:13:33.470

从界面生成器左侧的菜单中选择视图。

![在此处输入图像描述](../Images/567452f8f935d3f91ee3c806161eabdb.png)

# java - Java，.setBackground 到数组中的值

> ID：15142517
> 
> 赞同：-5
> 
> 时间：2013-02-28T18:05:52.543
> 
> 标签：java, swing

我试图将按钮背景设置为数组中保存的值，但我得到错误？

一、二、三是JButton。（这只是我稍后必须扩展的一些代码）

```
 public void actionPerformed( ActionEvent event ) {
        String[] colors = {"GREEN","WHITE","ORANGE"};
        if(event.getSource() == one){
            String text = "Clicks = " + ++ clicks1 + ". ";
            one.setText( text );           
            one.setBackground(Color.colors[0]);
            two.setBackground(Color.colors[1]);
            three.setBackground(Color.colors[2]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:09:33.930

问题是 setBackground 采用颜色。所以你想要做的是：

```
Color[] colors = {Color.GREEN, Color.RED, Color.ORANGE}; 
```

然后设置背景：`one.setBackground(colors[0]);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:10:53.790

您应该向 setBackground 方法提供类似 Color.RED 的内容，但您使用的语法错误。定义一个 Color 数组，而不是 String 数组；像这样的东西

```
public void actionPerformed( ActionEvent event ) {
    Color[] colors = {Color.GREEN,Color.WHITE, Color.ORANGE};
    if(event.getSource() == one){
        String text = "Clicks = " + ++ clicks1 + ". ";
        one.setText( text );           
        one.setBackground(colors[0]);
        two.setBackground(colors[1]);
        three.setBackground(colors[2]); 
```

# excel - 创建用于将 XML 导出到某个文件夹的 Excel 宏

> ID：15142523
> 
> 赞同：1
> 
> 时间：2013-02-28T18:06:11.217
> 
> 标签：excel, excel-2010, export-to-xml, vba

我需要创建一个宏（我以前从未做过），如果你们能引导我走上正确的道路，我将不胜感激。

我目前在做什么：我创建了一个映射 XML，并将其导入 Excel。将其导入 Excel 后，用户将继续在其中粘贴一些数据并将其导出以接收 XML 数据文件，然后用户可以将其拖放到 FTP，作业将其拾取并将其导入数据库。

这是问题所在：导出有以下节点，我不想要：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
 <Root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
```

相反，我想用以下内容替换它：

```
<?xml version="1.0" ?>
<Root xmlns="http://tempuri.org/CourseImport.xsd"> 
```

我该如何自动化呢？Excel中是否有某种设置可以实现它？

基本上，我希望导出具有我的根而不是默认根，并且我希望能够自动将文件拖放到指定路径：例如：\development\school\course import

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:00:11.820

我的同事实际上帮助我解决了这个问题。我想我应该分享我的所作所为

```
Sub ExportXML()
'
' Export XML Macro exports the data that is in Excel to XML.
'
Const ForReading = 1
Const ForWriting = 2

Set objFSO = CreateObject("Scripting.FileSystemObject")

'
newFileName = Application.GetSaveAsFilename("out.xml", "XML Files (*.xml), *.xmls")
If newFileName = False Then
Exit Sub
End If
If objFSO.FileExists(newFileName) Then
objFSO.DeleteFile (newFileName)
End If
ActiveWorkbook.XmlMaps("Root_Map").Export URL:=newFileName

Set objFile = objFSO.OpenTextFile(newFileName, ForReading)

Dim count
count = 0
Do Until objFile.AtEndOfStream
 strLine = objFile.ReadLine
 If count = 0 Then
    strNewContents = strNewContents & "<?xml version=""1.0"" ?>" & vbCrLf
ElseIf count = 1 Then
    strNewContents = strNewContents & "<Root xmlns=""http://tempuri.org/import.xsd"">" & vbCrLf
Else
    strNewContents = strNewContents & strLine & vbCrLf
End If
count = count + 1

Loop

objFile.Close

Set objFile = objFSO.OpenTextFile(newFileName, ForWriting)
 objFile.Write strNewContents

objFile.Close
End Sub 
```

# regex - 如何在 Apache 中转义斜杠符号 `/` ` 指令的正则表达式？

> ID：15142532
> 
> 赞同：13
> 
> 时间：2013-02-28T18:06:28.067
> 
> 标签：regex, apache, if-statement, escaping, slash

我想将 .xhtml 文件作为

*   `application/xhtml+xml`如果浏览器说它接受它。
*   `text/html`除此以外

我尝试使用它，`mod_rewrite`但它不起作用`Options -FollowSymLinks`（请参阅[如果我有 `Options -FollowSymLinks`，查看受 Apache RewriteRule 影响的文件时为什么会出现 403 Forbidden？](https://stackoverflow.com/questions/15142285/why-i-do-i-get-403-forbidden-when-viewing-files-affected-by-apache-rewriterule-i)）。

然后，我尝试了

```
<Files "*.xhtml">
    <If "%{HTTP:Accept} !~ /application\/xhtml\+xml/">
        ForceType text/html
    </If>
</Files> 
```

但我得到一个语法错误：*Failed to compile regular expression*。

同时，我使用此代码...

```
<Files "*.xhtml">
    <If "%{HTTP:Accept} !~ /xhtml\+xml/">
        ForceType text/html
    </If>
</Files> 
```

...这行得通，但我想匹配正确的 MIME 类型。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T18:29:37.873

您可以使用转义码`\x2F`代替`/`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-31T17:32:52.140

从 Apache 2.4 开始，它看起来仍在改进中。Apache 团队成员“covener”[建议](http://httpd.apache.org/docs/2.4/expr.html#comment_3455) `m#regexp#`改为。

所以你的代码看起来像这样......

```
<If "%{HTTP:Accept} !~ m#application/xhtml\+xml#"> 
```

# java - AtomicInteger 实现和代码重复

> ID：15142546
> 
> 赞同：18
> 
> 时间：2013-02-28T18:07:30.077
> 
> 标签：java, performance, jvm

*警告：问题有点长，但分隔线下方的部分仅供参考。*

[Oracle 的AtomicInteger](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicInteger.html)的 JDK 7 实现包括以下方法：

```
public final int addAndGet(int delta) {
    for (;;) {
        int current = get();
        int next = current + delta;         // Only difference
        if (compareAndSet(current, next))
            return next;
    }
}

public final int incrementAndGet() {
    for (;;) {
        int current = get();
        int next = current + 1;             // Only difference
        if (compareAndSet(current, next))
            return next;
    }
} 
```

很明显，第二种方法可以写成：

```
public final int incrementAndGet() {
    return addAndGet(1);
} 
```

该类中还有其他几个类似代码重复的示例。除了性能考虑（*）之外，我想不出任何理由这样做。而且我很确定作者在确定该设计之前进行了一些深入的测试。

**为什么（或在什么情况下）第一个代码会比第二个代码执行得更好？**

* * *

(*) 我忍不住写了一个快速的微型基准测试。它显示（在 JIT 之后）有 2-4% 的系统性能差距有利于`addAndGet(1)`vs `incrementAndGet()`（诚然很小，但非常一致）。老实说，我也无法真正解释这个结果......

输出：

> incrementAndGet(): 905
> addAndGet(1): 868
> incrementAndGet(): 902
> addAndGet(1): 863
> incrementAndGet(): 891
> addAndGet(1): 867
> ...

代码：

```
public static void main(String[] args) throws Exception {
    final int size = 100_000_000;
    long start, end;
    AtomicInteger ai;

    System.out.println("JVM warmup");
    for (int j = 0; j < 10; j++) {
        start = System.nanoTime();
        ai = new AtomicInteger();
        for (int i = 0; i < size / 10; i++) {
            ai.addAndGet(1);
        }
        end = System.nanoTime();
        System.out.println("addAndGet(1): " + ((end - start) / 1_000_000));
        start = System.nanoTime();
        ai = new AtomicInteger();
        for (int i = 0; i < size / 10; i++) {
            ai.incrementAndGet();
        }
        end = System.nanoTime();
        System.out.println("incrementAndGet(): " + ((end - start) / 1_000_000));
    }

    System.out.println("\nStart measuring\n");

    for (int j = 0; j < 10; j++) {
        start = System.nanoTime();
        ai = new AtomicInteger();
        for (int i = 0; i < size; i++) {
            ai.incrementAndGet();
        }
        end = System.nanoTime();
        System.out.println("incrementAndGet(): " + ((end - start) / 1_000_000));
        start = System.nanoTime();
        ai = new AtomicInteger();
        for (int i = 0; i < size; i++) {
            ai.addAndGet(1);
        }
        end = System.nanoTime();
        System.out.println("addAndGet(1): " + ((end - start) / 1_000_000));
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T19:23:23.847

我会给出新的假设。如果我们查看字节码，`AtomicInteger`我们会看到，它们之间的主要区别在于`addAndGet`使用`iload_`指令和`incrementAndGet`使用`iconst_`指令：

```
public final int addAndGet(int);
   ...
   4:   istore_2
   5:   iload_2
   6:   iload_1
   7:   iadd

public final int incrementAndGet();
   ...
   4:   istore_1
   5:   iload_1
   6:   iconst_1
   7:   iadd 
```

看来，`iconst_`+`iadd`翻译为`INC`指令，因为`iload_`...`iadd`作为`ADD`指令。`ADD 1`这都与关于vs等的众所周知的问题有关`INC`：

[x86 inc 与 add 指令的相对性能](https://stackoverflow.com/questions/5993326/relative-performance-of-x86-inc-vs-add-instruction)

[ADD 1 真的比 INC 快吗？x86](https://stackoverflow.com/questions/13383407/is-add-1-really-faster-than-inc-x86?rq=1)

这可能是答案，为什么`addAndGet`比`incrementAndGet`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T19:48:50.873

出于好奇，这里是 JIT 生成的汇编代码。总而言之，主要区别在于：

*   `incrementAndGet`

    ```
    mov    r8d,eax
    inc    r8d                ;*iadd 
    ```

*   `addAndGet`

    ```
    mov    r9d,r8d
    add    r9d,eax            ;*iadd 
    ```

其余代码基本相同。这证实了：

*   这些方法不是内在的，并且不会在后台相互调用
*   唯一的区别是`INC`vs`ADD 1`

我不擅长阅读汇编，不知道为什么会有所作为。这并不能真正回答我最初的问题。

完整列表（incrementAndGet）：

```
 # {method} 'incrementAndGet' '()I' in 'java/util/concurrent/atomic/AtomicInteger'
  #           [sp+0x20]  (sp of caller)
  0x00000000026804c0: mov    r10d,DWORD PTR [rdx+0x8]
  0x00000000026804c4: shl    r10,0x3
  0x00000000026804c8: cmp    rax,r10
  0x00000000026804cb: jne    0x0000000002657b60  ;   {runtime_call}
  0x00000000026804d1: data32 xchg ax,ax
  0x00000000026804d4: nop    DWORD PTR [rax+rax*1+0x0]
  0x00000000026804dc: data32 data32 xchg ax,ax
[Verified Entry Point]
  0x00000000026804e0: sub    rsp,0x18
  0x00000000026804e7: mov    QWORD PTR [rsp+0x10],rbp  ;*synchronization entry
                                                ; - java.util.concurrent.atomic.AtomicInteger::incrementAndGet@-1 (line 204)
  0x00000000026804ec: mov    eax,DWORD PTR [rdx+0xc]  ;*invokevirtual compareAndSwapInt
                                                ; - java.util.concurrent.atomic.AtomicInteger::compareAndSet@9 (line 135)
                                                ; - java.util.concurrent.atomic.AtomicInteger::incrementAndGet@12 (line 206)
  0x00000000026804ef: mov    r8d,eax
  0x00000000026804f2: inc    r8d                ;*iadd
                                                ; - java.util.concurrent.atomic.AtomicInteger::incrementAndGet@7 (line 205)
  0x00000000026804f5: lock cmpxchg DWORD PTR [rdx+0xc],r8d
  0x00000000026804fb: sete   r11b
  0x00000000026804ff: movzx  r11d,r11b          ;*invokevirtual compareAndSwapInt
                                                ; - java.util.concurrent.atomic.AtomicInteger::compareAndSet@9 (line 135)
                                                ; - java.util.concurrent.atomic.AtomicInteger::incrementAndGet@12 (line 206)
  0x0000000002680503: test   r11d,r11d
  0x0000000002680506: je     0x0000000002680520  ;*iload_2
                                                ; - java.util.concurrent.atomic.AtomicInteger::incrementAndGet@18 (line 207)
  0x0000000002680508: mov    eax,r8d
  0x000000000268050b: add    rsp,0x10
  0x000000000268050f: pop    rbp
  0x0000000002680510: test   DWORD PTR [rip+0xfffffffffdbafaea],eax        # 0x0000000000230000
                                                ;   {poll_return}
  0x0000000002680516: ret    
  0x0000000002680517: nop    WORD PTR [rax+rax*1+0x0]  ; OopMap{rdx=Oop off=96}
                                                ;*goto
                                                ; - java.util.concurrent.atomic.AtomicInteger::incrementAndGet@20 (line 208)
  0x0000000002680520: test   DWORD PTR [rip+0xfffffffffdbafada],eax        # 0x0000000000230000
                                                ;*goto
                                                ; - java.util.concurrent.atomic.AtomicInteger::incrementAndGet@20 (line 208)
                                                ;   {poll}
  0x0000000002680526: mov    r11d,DWORD PTR [rdx+0xc]  ;*invokevirtual compareAndSwapInt
                                                ; - java.util.concurrent.atomic.AtomicInteger::compareAndSet@9 (line 135)
                                                ; - java.util.concurrent.atomic.AtomicInteger::incrementAndGet@12 (line 206)
  0x000000000268052a: mov    r8d,r11d
  0x000000000268052d: inc    r8d                ;*iadd
                                                ; - java.util.concurrent.atomic.AtomicInteger::incrementAndGet@7 (line 205)
  0x0000000002680530: mov    eax,r11d
  0x0000000002680533: lock cmpxchg DWORD PTR [rdx+0xc],r8d
  0x0000000002680539: sete   r11b
  0x000000000268053d: movzx  r11d,r11b          ;*invokevirtual compareAndSwapInt
                                                ; - java.util.concurrent.atomic.AtomicInteger::compareAndSet@9 (line 135)
                                                ; - java.util.concurrent.atomic.AtomicInteger::incrementAndGet@12 (line 206)
  0x0000000002680541: test   r11d,r11d
  0x0000000002680544: je     0x0000000002680520  ;*ifeq
                                                ; - java.util.concurrent.atomic.AtomicInteger::incrementAndGet@15 (line 206)
  0x0000000002680546: jmp    0x0000000002680508 
```

完整列表（addAndGet）：

```
 # {method} 'addAndGet' '(I)I' in 'java/util/concurrent/atomic/AtomicInteger'
  # this:     rdx:rdx   = 'java/util/concurrent/atomic/AtomicInteger'
  # parm0:    r8        = int
  #           [sp+0x20]  (sp of caller)
  0x0000000002680d00: mov    r10d,DWORD PTR [rdx+0x8]
  0x0000000002680d04: shl    r10,0x3
  0x0000000002680d08: cmp    rax,r10
  0x0000000002680d0b: jne    0x0000000002657b60  ;   {runtime_call}
  0x0000000002680d11: data32 xchg ax,ax
  0x0000000002680d14: nop    DWORD PTR [rax+rax*1+0x0]
  0x0000000002680d1c: data32 data32 xchg ax,ax
[Verified Entry Point]
  0x0000000002680d20: sub    rsp,0x18
  0x0000000002680d27: mov    QWORD PTR [rsp+0x10],rbp  ;*synchronization entry
                                                ; - java.util.concurrent.atomic.AtomicInteger::addAndGet@-1 (line 233)
  0x0000000002680d2c: mov    eax,DWORD PTR [rdx+0xc]  ;*invokevirtual compareAndSwapInt
                                                ; - java.util.concurrent.atomic.AtomicInteger::compareAndSet@9 (line 135)
                                                ; - java.util.concurrent.atomic.AtomicInteger::addAndGet@12 (line 235)
  0x0000000002680d2f: mov    r9d,r8d
  0x0000000002680d32: add    r9d,eax            ;*iadd
                                                ; - java.util.concurrent.atomic.AtomicInteger::addAndGet@7 (line 234)
  0x0000000002680d35: lock cmpxchg DWORD PTR [rdx+0xc],r9d
  0x0000000002680d3b: sete   r11b
  0x0000000002680d3f: movzx  r11d,r11b          ;*invokevirtual compareAndSwapInt
                                                ; - java.util.concurrent.atomic.AtomicInteger::compareAndSet@9 (line 135)
                                                ; - java.util.concurrent.atomic.AtomicInteger::addAndGet@12 (line 235)
  0x0000000002680d43: test   r11d,r11d
  0x0000000002680d46: je     0x0000000002680d60  ;*iload_3
                                                ; - java.util.concurrent.atomic.AtomicInteger::addAndGet@18 (line 236)
  0x0000000002680d48: mov    eax,r9d
  0x0000000002680d4b: add    rsp,0x10
  0x0000000002680d4f: pop    rbp
  0x0000000002680d50: test   DWORD PTR [rip+0xfffffffffdbaf2aa],eax        # 0x0000000000230000
                                                ;   {poll_return}
  0x0000000002680d56: ret    
  0x0000000002680d57: nop    WORD PTR [rax+rax*1+0x0]  ; OopMap{rdx=Oop off=96}
                                                ;*goto
                                                ; - java.util.concurrent.atomic.AtomicInteger::addAndGet@20 (line 237)
  0x0000000002680d60: test   DWORD PTR [rip+0xfffffffffdbaf29a],eax        # 0x0000000000230000
                                                ;*goto
                                                ; - java.util.concurrent.atomic.AtomicInteger::addAndGet@20 (line 237)
                                                ;   {poll}
  0x0000000002680d66: mov    r11d,DWORD PTR [rdx+0xc]  ;*invokevirtual compareAndSwapInt
                                                ; - java.util.concurrent.atomic.AtomicInteger::compareAndSet@9 (line 135)
                                                ; - java.util.concurrent.atomic.AtomicInteger::addAndGet@12 (line 235)
  0x0000000002680d6a: mov    r9d,r11d
  0x0000000002680d6d: add    r9d,r8d            ;*iadd
                                                ; - java.util.concurrent.atomic.AtomicInteger::addAndGet@7 (line 234)
  0x0000000002680d70: mov    eax,r11d
  0x0000000002680d73: lock cmpxchg DWORD PTR [rdx+0xc],r9d
  0x0000000002680d79: sete   r11b
  0x0000000002680d7d: movzx  r11d,r11b          ;*invokevirtual compareAndSwapInt
                                                ; - java.util.concurrent.atomic.AtomicInteger::compareAndSet@9 (line 135)
                                                ; - java.util.concurrent.atomic.AtomicInteger::addAndGet@12 (line 235)
  0x0000000002680d81: test   r11d,r11d
  0x0000000002680d84: je     0x0000000002680d60  ;*ifeq
                                                ; - java.util.concurrent.atomic.AtomicInteger::addAndGet@15 (line 235)
  0x0000000002680d86: jmp    0x0000000002680d48 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T18:27:43.560

为了扩展@AlexeiKaigorodov 的答案，如果这是真正的Java 代码，它会更快，因为它会消除调用堆栈上的额外帧。这使得它运行得更快（为什么不呢？），并且可能意味着对循环的多个并发调用不太可能失败，从而导致循环重复运行。（不过，我想不出任何这样的理由。）

但是，通过您的微基准测试，代码可能不是真实的，并且该`incrementAndGet()`方法以您指定的方式在本机代码中实现，或者两者都只是内在指令（`lock:xadd`例如委托给 x86）。但是，通常很难预测 JVM 一直在做什么，并且可能还有其他原因导致了这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T01:20:46.520

为了完成讨论，在**[Concurrency-interest -- JSR-166](http://g.oswego.edu/dl/concurrency-interest/)**邮件列表的讨论列表中也提出**了相同的问题，几乎与此处同时进行。**

这是线程的开始 - **[[concurrency-interest] AtomicInteger 实现](http://cs.oswego.edu/pipermail/concurrency-interest/2013-February/010892.html)**讨论 AtomicInteger 实现。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-02-28T18:24:20.327

原因是他们更喜欢以牺牲代码大小为代价使代码更快。

我敢肯定，消息来源是真实的。如果它们是内在函数，它们将被标记为原生。

# iphone - 如何使用 armv6、armv7 和 armv7s 创建胖二进制文件

> ID：15142548
> 
> 赞同：1
> 
> 时间：2013-02-28T18:07:31.043
> 
> 标签：iphone, xcode, cocoa-touch, xcode4.5

我想在所有旧版本的 iOS 以及新版本中支持我的应用程序。在最近的 Xcode 版本中，不再支持 armv6。如何构建我的应用程序以支持 armv6 ？我是否需要包含 armv7s 才能支持所有较新版本的 iOS？是否可以创建一个包含对所有 3 种架构的支持的二进制文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:20:22.597

做不到。您要么使用较新版本的 Xcode 并获得 armv7/armv7s 以及 iOS 6.x 支持（并支持回到 iOS 4.3），或者您使用旧版本的 Xcode 来获得 armv6/armv7 但不是 iOS 6.x API（但支持回到 iOS 3.1.3)。

在 4.3 之前仍然使用 iOS 的设备非常少，因此没有合理的理由支持这些旧版本。

如果您真的必须支持所有内容，请创建两个版本的应用程序。一种具有较新的支持，另一种具有较旧的支持。然后观察您的下载比率为 1,000:1。

在不久的某个时候，Apple 很可能会放弃对使用旧版本 Xcode 创建的新应用程序的支持。苹果喜欢继续前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:54:31.043

只是一个链接...我没有尝试过..

“您可以使用 Xcode 4.5 创建跨越 armv6 - armv7s 的 iOS 二进制文件，但这需要一些额外的工作......您需要安装多个版本的 Xcode......”

**[XCODE 4.5 支持 ARMV6](http://cefaedfe.com/blog/2013/1/27/z8k2s46y4lvyv00scntkeyggoudlk5)**

# c# - C# 中的 Instagram 实时 API

> ID：15142549
> 
> 赞同：2
> 
> 时间：2013-02-28T18:07:32.010
> 
> 标签：c#, api, real-time, instagram

是否有任何支持 Instagram 实时 API 的 C# 包装器？我想在我的应用程序中订阅和接收更新。

我检查过 InstaSharp，但它似乎没有实时功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:14:02.283

我以前研究过一次，我没有看到任何与您的想法非常相似的东西。我认为你几乎必须从头开始创造一切。不过我不太确定。如果我发现任何东西，我会尝试对此进行一些研究并回帖。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-10T22:37:18.973

我正在开发一个与 Instagram API 交互的应用程序，并且也在寻找某种包装器，但我没有找到适合我需要的包装器。所以，我开始开发自己的 Instagram 包装器。不是一个完整的包装器，但正在工作，并且可以向您展示如何继续......我正在使用它来订阅我的实时更新，并请求将 json 转换为 .Net 对象的数据（主要是媒体）。从这里下载：[https ://www.dropbox.com/sh/3y0e0srx5rm1g88/AAB48GJKNTUAK_BniH5Cvf7ua?dl=0](https://www.dropbox.com/sh/3y0e0srx5rm1g88/AAB48GJKNTUAK_BniH5Cvf7ua?dl=0)

# python - 为什么一个在另一个之后生成的日期在 Python 中会出现在前一个日期之前？

> ID：15142553
> 
> 赞同：2
> 
> 时间：2013-02-28T18:07:47.983
> 
> 标签：python, timestamp

我得到以下代码

```
 timestamp = datetime.utcfromtimestamp(float(timestamp))
    now = datetime.utcnow()

    if now < timestamp:
        return False 
```

有时，它会返回`False`。但只是有时。

就在`print`条件检查中给了我这个：

```
now 2013-02-28 18:02:57.015817
timestamp 2013-02-28 18:02:57.020000 
```

因此，时间戳似乎正在播放“回到未来”几毫秒。

时间戳是从`(datetime.utcnow() - datetime(1970, 1, 1)).total_seconds()`先前调用中的 a 生成的。

我在最近的 Ubuntu 上的 Django 项目中得到了 py.test 运行的单元测试结果。

我目前的解决方案是将所有内容都设置为时间戳，调整毫秒并进行比较。我可以这样做。我只是想知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:18:38.303

猜测一下：a`datetime`是精确的，并将微秒数存储为一个单独的整数。但是 a`float`是模糊的；它存储为二进制分数，您可能会得到轻微的四舍五入。

但是您不应该使用它`total_seconds`来转换为时间戳。改为这样做：

```
import calendar
timestamp = calendar.timegm(datetime.utcnow().timetuple()) 
```

无论如何，这将很方便地只返回一个整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:54:17.917

核心原因是`float -> str`您的问题中未显示的转换（时间戳到字符串）。例子：

```
from datetime import datetime
from itertools import count

def main():
    for i in count():
        timestamp = (datetime.utcnow() - datetime(1970, 1, 1)).total_seconds()
        s_timestamp = str(timestamp)
        dt_from_str = datetime.utcfromtimestamp(float(s_timestamp))
        now = datetime.utcnow()
        if now < dt_from_str:
            dt = datetime.utcfromtimestamp(timestamp)
            for o in [now, dt_from_str, dt, timestamp, s_timestamp, i]:
                print(repr(o))
            break

main() 
```

输出：

```
datetime.datetime(2013, 3, 17, 15, 52, 38, 355006)
datetime.datetime(2013, 3, 17, 15, 52, 38, 360000)
datetime.datetime(2013, 3, 17, 15, 52, 38, 355003)
1363535558.355003
'1363535558.36'
688 
```

请注意，`dt`( `datetime(2013, 3, 17, 15, 52, 38, 355003)`) 应该小于`now`( `datetime(2013, 3, 17, 15, 52, 38, 355006)`)，并且四舍五入发生在`str(timestamp)`表达式 ( `'1363535558.36'`) 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T18:19:05.820

你正在`timestamp`用`float`- 这个舍入操作偶尔向上舍入，所以你打了`now < timestamp`条件？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T18:21:45.257

编辑：其他人在从浮点数投射日期时谈论舍入问题可能有正确的答案。

我怀疑问题是您在代码中混淆了变量名范围。代替：

```
timestamp = (datetime.utcnow() - datetime(1970, 1, 1)).total_seconds()
timestamp = datetime.utcfromtimestamp(float(timestamp ))
now = datetime.utcnow() 
```

尝试重构为这样的东西：

```
ts = (datetime.utcnow() - datetime(1970, 1, 1)).total_seconds()
timestamp = datetime.utcfromtimestamp(float(ts))
now = datetime.utcnow() 
```

看看会发生什么。确实没有充分的理由进行`timestamp`这样的不同转换，并且更容易准确地调试这种方式正在发生的事情。

# mysql - 我不应该立即看到多个插入吗？

> ID：15142562
> 
> 赞同：0
> 
> 时间：2013-02-28T18:08:24.357
> 
> 标签：mysql, sql, phpmyadmin

我正在尝试在 Table2 中插入具有来自 Table1 的多列的多行，但是在这样做的同时，我正在编辑进入 Table2 的一些值。两者都是大表（数百万行）。这是查询：

```
insert into table2 (board_id,title,content,domainurl)
select (id, replace(title, '_', ' '), description, CONCAT("http://somesite.com/", title))
from table1 
```

运行此查询时，插入是否应该立即开始（因为我没有进行连接）？几分钟前我已经开始查询（phpmyadmin 仍然显示“正在加载”），但我没有看到任何行被添加到 table2...？

编辑：查询刚刚停止并显示消息“#1241 - 操作数应包含 1 列”。我不知道那是什么意思！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:14:35.343

尝试这个：

```
INSERT INTO table2 (board_id,title,content,domainurl)
SELECT 
  id AS board_id, 
  REPLACE(title, '_', ' ') AS title, 
  description AS content, 
  CONCAT("http://somesite.com/", title) AS domainurl 
FROM table1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:18:22.753

根据[这里，](https://stackoverflow.com/questions/456644/mysql-syntax-error-message-operand-should-contain-1-columns)我所要做的就是从 SELECT 子句中删除括号。

```
select id, replace(title, '_', ' '), description, CONCAT("http://somesite.com/", title) 
```

完美而快速地工作！

# ember.js - 使用 ember-data 强制加载单个属性

> ID：15142563
> 
> 赞同：1
> 
> 时间：2013-02-28T18:08:24.530
> 
> 标签：ember.js, ember-data

我正在尝试找到一种方法来更新模型的单个属性而不会变脏。就像`Store.load`但只有一个属性。

用例是我想上传一个头像图像（这不能用当前适配器的语义 AFAIK 来完成）。我针对特定的 API 端点执行此操作，然后我想使用生成的 URL 更新用户（因此他的所有头像外观都会更新）。

我在配置文件版本的上下文中，所以如果我只加载整个用户，我会丢失表单的所有更改（因为值被覆盖）。

有什么办法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:51:42.867

您可以单独为“阿凡达”建模，将其作为模型本身而不是属性。然后，可以通过 store 更新该模型，而不必担心与 User 模型的其余部分发生冲突的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:34:35.717

我可以想到两种方法，但我没有尝试过。（它们都只是解决方法）

您可以设置不是 DS.attr 的用户属性。如果它是一个正常的财产，它不应该弄脏记录。

如果 url 是数据库属性，则创建一个侦听 URL 的计算属性并在模板中使用它。

```
App.User = Em.extend({
  url: DS.attr('string'),
  URL: function() {
    return this.get('url');
  }.property('url')
}); 
```

进而`user.set('URL', imageUrl)`

另一种方法可能是将记录转换为`clean`状态。

`user.get('stateManager').send('becameClean');`

第二种方法虽然是一个丑陋的黑客。

# facebook-graph-api - 如何使用 javascript 通过 FB api 将视频上传到 facebook？

> ID：15142569
> 
> 赞同：2
> 
> 时间：2013-02-28T18:08:51.820
> 
> 标签：facebook-graph-api

如何使用 FB api 将视频文件上传到 Facebook？我环顾了stackoverflow，但只有当视频/图片已经在线某处时才能找到答案，但我想让用户通过我的应用程序直接将文件上传到facebook。

可以上传到 facebook 的一种解决方案是[https://stackoverflow.com/a/8195849/364938](https://stackoverflow.com/a/8195849/364938)，但它假设我在某处有在线图片。

这甚至可能吗？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-16T19:48:00.973

这是我从客户端使用 javascript 上传视频的代码。我使用 axios 进行 http 请求，但您可以使用自己的。

* * *

```
function uploadVideo(adaccount, access_token, file) {
  return axios({
    method: 'POST',
    url: `${adaccount}/advideos`,
    params: {
      access_token,
      upload_phase: 'start',
      file_size: file.size
    }
  })
    .then(res => {
      return new Promise(resolve => {
        resolve(transferVideo(
          adaccount,
          access_token,
          res.data.upload_session_id,
          res.data.start_offset,
          res.data.end_offset,
          file,
          1
        ))
      })
    })
    .catch(err => {
      // Note: you can handle your error here
      console.log(err)
    })
}

function transferVideo(adaccount, token, sessionId, start, end, file, number) {
  if (start === end) {
    return new Promise(resolve => {
      resolve(postVideo(adaccount, token, sessionId, file.name))
    })
  }
  const blob = new Blob([file], {
    type: file.type
  })
  const chunk = blob.slice(start, end, file.type)
  const formData = new FormData()
  formData.append(
    'video_file_chunk',
    chunk,
    `@chunk${number}.${file.type.split('/')[1]}`
  )
  return new Promise(resolve => {
    resolve(uploadVideoChunk(
      adaccount,
      token,
      start,
      sessionId,
      formData
    ))
  })
    .then(res => {
      return new Promise(resolve => {
        resolve(transferVideo(
          adaccount,
          token,
          sessionId,
          res.start_offset,
          res.end_offset,
          file,
          number++
        ))
      })
    })
    .catch(err => {
      throw new Error(JSON.stringify(err))
    })
}

function uploadVideoChunk(adaccount, access_token, start_offset, upload_session_id, formData) {
  return axios.post(`${adaccount}/advideos`, formData, {
    headers: {
      'content-type': 'multipart/form-data'
    },
    params: {
      access_token,
      upload_phase: 'transfer',
      start_offset,
      upload_session_id
    }
  })
    .then(res => res.data)
    .catch(err => {
      throw new Error(JSON.stringify(err))
    })
}

function postVideo(adaccount, access_token, upload_session_id, title) {
  return axios({
    method: 'POST',
    url: `${adaccount}/advideos`,
    params: {
      access_token,
      upload_phase: 'finish',
      upload_session_id,
      title
    }
  })
    .then(res => res.data)
    .catch(err => {
      throw new Error(JSON.stringify(err))
    })
} 
```

# javascript - Jquery 插件与 javascript

> ID：15142574
> 
> 赞同：0
> 
> 时间：2013-02-28T18:09:10.157
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

有人可以解释下面的利弊。

我有一个函数来获取 url 查询字符串参数，但我需要知道哪个是编写函数的最佳方法。例如：如果我使用 jquery 插件样式创建函数，那么每次我需要使用目标元素来访问函数，如下所示

```
$("#targetDom").getQueryString("name"); 
```

但是，如果我使用 javascript 类或 javascript 设计模式创建函数，它将是

```
getQueryString("name"); 
```

这是一个小例子，但考虑到大型应用程序，哪种方法最好？使用 jquery 插件方式有什么缺点吗？

问候，

纳文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:33:42.270

前段时间我发现了这句话：

> 不要学习 jQuery。就用它吧。

我认为这是对新手最好的建议之一。

jQuery 只是对 javascript 的补充。它简化了 DOM 遍历/操作，简化了事件处理等等，但在你了解 vanilla Javascript 之前，你不应该开始学习它。

关于您的示例，它不是 jQuery 插件的最佳思想示例。

您建议的语法（`$("#targetDom").getQueryString("name");`）意味着您将 URL 查询字符串视为以某种方式附加到 HTML 元素，这是错误的......

# java - 使用带有证书路径（证书链）的 bouncycastle 创建 x.509 证书

> ID：15142577
> 
> 赞同：12
> 
> 时间：2013-02-28T18:09:33.693
> 
> 标签：java, ssl-certificate, x509certificate, bouncycastle, x509

嗨伙计们！我正在尝试使用 bouncycastle 创建 x.509 证书，该证书应由另一个证书签名并将其存储为 PEM base 64 格式。

我已经有自签名证书（公钥和私钥）。现在我想创建一个新的并使用现有的自签名证书对其进行签名。

```
KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance("RSA", "BC");
keyPairGenerator.initialize(1024, new SecureRandom());
KeyPair keyPair = keyPairGenerator.generateKeyPair();

X509V3CertificateGenerator certGen = new X509V3CertificateGenerator();
X500Principal dnName = new X500Principal("CN=Sergey");
certGen.setSerialNumber(BigInteger.valueOf(System.currentTimeMillis()));
certGen.setSubjectDN(dnName);
certGen.setIssuerDN(caCert.getSubjectX500Principal());
certGen.setNotBefore(validityBeginDate);
certGen.setNotAfter(validityEndDate);
certGen.setPublicKey(keyPair.getPublic());
certGen.setSignatureAlgorithm("SHA256WithRSAEncryption");

certGen.addExtension(X509Extensions.AuthorityKeyIdentifier, false, new AuthorityKeyIdentifierStructure(caCert));
certGen.addExtension(X509Extensions.SubjectKeyIdentifier, false, new SubjectKeyIdentifierStructure(keyPair.getPublic()));

X509Certificate cert = certGen.generate(caCertPrivateKey, "BC"); 
```

验证无一例外地通过，这意味着从我的角度来看，它已被 caCert 成功签名：

```
cert.verify(caCert.getPublicKey()); 
```

然后我将其解码为 PEM base 64：

```
PEMWriter pemWriter = new PEMWriter(new PrintWriter(System.out));
pemWriter.writeObject(cert);
pemWriter.flush(); 
```

我在输出中得到类似的东西：

-----开始证书-----

MIIDDjCCAnegAwIBAgIBFDAN........

-----结束证书-----

当我打开它时，我看到了下一个：

![在此处输入图像描述](../Images/25207f15af6a687e4ffa6543f67e7ad3.png)

caCert签名成功为什么没有认证链？

需要在我的代码中进行哪些更改才能按预期查看认证链？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T10:19:26.463

我能够找到解决方案。实际上代码按预期工作。我没有看到证书链，因为我的 caRoot 证书没有添加到受信任的存储中。在我将我的自签名证书添加到受信任的根认证中心后，我看到了我预期的整个认证链。

# c++ - print 语句引起的总线错误

> ID：15142584
> 
> 赞同：0
> 
> 时间：2013-02-28T18:10:08.810
> 
> 标签：c++

好的，所以我有一个简单的函数，可以从 5 张牌扑克手中返回最高的非对子牌。但我遇到的问题很奇怪。随机出现这个随机总线错误，不知道是什么原因。我以为这是我使用的打印语句，但现在我不确定。我知道它看起来一团糟，但是如果您查看下面我打印“测试打印”字样的行，有人可以告诉我为什么在此行之后立即出现总线错误并且没有到达第二个“测试打印” “ 陈述。我的程序可能内存不足吗？？？这可能没有意义，但我真的想不出其他任何东西（请排除稍微令人困惑的代码）：

```
int Hand::highestNonPair(int *face_array_exclude, int size)
{
    int highest = 0;
    int contains_excludable = 0;
    int i = 0;

    if(this->hasAnother(i) == false)
            highest = cards[i]->getFace();

    for(i= 0;i<cards.size();i++)
    {
        if((cards[i+1]->getFace() > cards[i]->getFace()) &&
        (this->hasAnother(i) == false)){
            if(size>0){
                for(int c = 0;c<size;c++){
                    if(cards[i]->getFace() == face_array_exclude[c])
                            contains_excludable = 1;
                    }
             }

                 if(!contains_excludable)
            highest = cards[i+1]->getFace();

        cout<<\nTEST PRINT"<<endl;
        contains_excludable = 0;
        cout<<\nTEST PRINT"<<endl;
        }
    }

    return highest;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:15:45.750

该位可以解决问题：

```
if((cards[i+1]->getFace() > cards[i]->getFace()) && 
```

作为 的最高值`i`可能是`cards.size() - 1`。这意味着这`cards[i+1`将是一个无效的条目。

改变循环：

```
for(i= 0;i<cards.size();i++) 
```

至

```
for(i= 0;i<cards.size() - 1;i++) 
```

也许

# rest - WSO2 esb：如何使用数字操作名称代理 REST 服务

> ID：15142586
> 
> 赞同：0
> 
> 时间：2013-02-28T18:10:10.587
> 
> 标签：rest, soap, wso2, wso2esb

我们正在尝试在 WSO2 ESB 上实现基本的 SOAP-to-REST 代理服务。我们的第 3 方 REST 服务接受以下格式的请求：

```
http://<MYURL>/simpleQuery/16783484?oslc.select=value1 
```

问题是操作名称只有数字格式——在我们的例子中是“16783484”。payloadFactory 调解器不允许将 <16783484> 作为 XML 元素，因为 XML 规范限制只有数字的元素名称。

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="CQProxy" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <payloadFactory>
            <format>
               <16783484>
                  <oslc.select>$1</oslc.select>
               </16783484>
            </format>
            <args>
               <arg value="myvalue1"/>
            </args>
         </payloadFactory>
         <send>
            <endpoint>
               <address uri="http://<MYURL>/simpleQuery" format="get"/>
            </endpoint>
         </send>
         <drop/>
      </inSequence>
      <outSequence>
         <log level="full"/>
         <send/>
      </outSequence>
   </target>
</proxy> 
```

如何克服？

感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:06:27.910

WSO2 支持团队提出了以下解决方案。谢谢桑达帕！

在这种情况下，您必须将端点格式设置为“休息”。如果是 GET 请求，您必须将“HTTP_METHOD”设置为 GET。请参考下面给出的示例。

例子：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="CQProxy" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <property name="REST_URL_POSTFIX" value="/getSimpleQuote?symbol=IBM" scope="axis2" type="STRING"/>
         <property name="HTTP_METHOD" value="GET" scope="axis2" type="STRING"/>
         <send>
            <endpoint>
               <address uri="http://localhost:9000/services/SimpleStockQuoteService/" format="rest"/>
            </endpoint>
         </send>
         <drop/>
      </inSequence>
      <outSequence>
         <log level="full"/>
         <send/>
      </outSequence>
   </target>
   <description></description>
</proxy> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T05:04:59.827

尽管此评论不会为您提供解决方案，但我可以说这是一个坏主意 :-) 您可以尝试使用 XSLT 而不是 PayloadFactory 进行转换，但这可能会再次阻塞 XML 解析器。问题是 WSO2 产品使用的许多开源项目/库，您可能会在其他地方碰到会遵守规范。从长远来看，当您与其他外部工具/系统集成时，遵守规范将减少您的麻烦。是否可以更改您的休息服务，以便服务名称前面至少有一个下划线？

# linux - 基于 linux 的操作系统上的一般保护错误

> ID：15142590
> 
> 赞同：1
> 
> 时间：2013-02-28T18:10:29.060
> 
> 标签：linux, interrupt

运行二进制文件时出现一般保护错误。但是没有核心转储。如何调试问题？

这是我正在使用的“ld”的问题吗？

> 内核：testbin[24879] 一般保护 ip:7fd7271585e0 sp:7fff1ef55070 error:0 in ld-2.14.so[7fd727142000+20000]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:27:09.260

在调试之前，使用调试符号（选项）重新编译您的程序`-g`，否则您将没有足够的详细信息来有效快速地调试它（如文件名、函数、行）。

还有更多用于调试程序的程序，但现在我建议您使用 valgrind。

所以通过 valgrind 运行你的程序：

```
valgrind /path/to/your/program 
```

然后重现导致您的程序出现[General Protection Fault](http://en.wikipedia.org/wiki/General_protection_fault#Technical_causes_for_faults)的步骤。

* * *

如果该软件不是您的，您必须联系作者并获得支持。

# php - 删除 PDO PHP 后填充表

> ID：15142591
> 
> 赞同：-3
> 
> 时间：2013-02-28T18:10:30.873
> 
> 标签：php, pdo

当用户登录时，他将转到一个有表格的页面，该表格被很好地填充，每一行都有删除链接。如果我单击删除链接，它将删除记录，但是当它刷新页面时，表格不会加载此消息。

```
Warning: mysql_query(): Access denied for user ''@'host' (using password: NO)
Warning: mysql_query(): A link to the server could not be established in 
Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given 
```

为什么它会让我第一次填充表格然后再填充它不会。这是我的删除代码。

```
$id_actividades = $_GET['idactividades'];

$stmt = $dbh->prepare("DELETE FROM guaynabodb.actividades WHERE idactividades=:id_actividades");

$stmt -> bindParam(':id_actividades', $id_actividades);
     try{
      $stmt->execute();
     }
     catch (PDOException $ex) {
    echo $ex->getMessage(),'Cannot delete',"\n";

      }
      header('Location: actividades.php');//To redirect
      exit; 
```

这是我有表格的页面的代码。它在您登录后加载，但如果我删除一条记录，它将不会加载。

```
 include('../includes/dbschema.php');
      $stmt = $dbh->prepare("SELECT * FROM actividades");
          $stmt->execute();
     print " <h1 id=\"h2title\">Calendario de Actividades</h1><br/><br/>";//Print the title header

           echo "<table id=\"premiacionguaynabo\"> <tr> <th> No. </th> <th> Fecha </th> <th> Torneo </th> <th> Lugar </th> <th> Organizador </th> <th> Opciones </th> </tr>"; //The table and the headers are created  

             $tno = 0;

              $result = $stmt->fetchall(PDO::FETCH_ASSOC);

              foreach($result as $line){
                $tno = $tno + 1;
     $id = $line["idactividades"];
    print "<tr class=\"alt2\">"; 

    print "<td id=\"idtorneo\">  $tno  </td>";
    print "<td class=\"fechatorneo\"> " . $line['fecha_inicial'] . " al " . $line['fecha_final'] .  "</td>";
    print "<td> <a id=\"plinks\"  href=\"$picture\" rel=\"lightbox\" target=\"_top\" title=\"Flyer del Torneo\"> " . $line['ntorneo'] . " </a></td>";
    print "<td>" . $line['ltorneo'] . "</td>"; 
    print "<td>" . $line['otorneo'] . "</td>"; 

    print "<td id=\"idtorneo\"> <a id=\"udlinks\"  href=\"uactividades.php?idactividades=$id\">  Edit  </a>   <a id=\"udlinks\" onclick=\"return confirmDelete()\"  href=\"dactividades.php?idactividades=$id\">  Delete  </a></td>";
    print "</tr>"; 

        }

    print "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:25:38.250

您发布的代码中缺少的错误消息提及`mysql_query()`功能。
因此，这些函数要么意外留在代码中，要么您只是发布了错误的代码。
请阅读您收到的错误消息。他们信息量很大。

# ios - xcode - pageviewcontroller 覆盖gestureRecognizers

> ID：15142593
> 
> 赞同：0
> 
> 时间：2013-02-28T18:10:46.670
> 
> 标签：ios, xcode, cocoa-touch, uigesturerecognizer, uipageviewcontroller

我使用 xcode 附带的基于页面的应用程序示例来构建我的应用程序。页面视图控制器工作正常，但是，我有这样的问题：

在代表页面数据的每个视图控制器中，我都有一些按钮，单击它会导致另一个视图控制器的视图。我使用它来添加视图以查看层次结构：

```
[self.view addSubview: self.articleViewController.view]; 
```

`articleViewController`里面只有一个滚动视图并显示一些文本数据。问题是，如果我滑动视图以向上/向下滚动，当它到达结束页面时，视图控制器会采用此手势并移动到上一页/下一页，这不是我想要的。我希望`articleViewController`不接收来自页面视图控制器的手势，而只接收滚动本身。

希望我描述得足够好..

如何禁用我的手势`articleViewController`？我试图研究这篇文章：[UIPageViewController Gesture Recognizers](https://stackoverflow.com/questions/7788780/uipageviewcontroller-gesture-recognizers)但还没有想出解决我的问题。

一个说明问题的示例项目：[https ://dl.dropbox.com/u/43017476/PageTest.zip](https://dl.dropbox.com/u/43017476/PageTest.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:21:19.757

我知道你引用了同样的问题，但我不喜欢接受的答案。看看[这个答案](https://stackoverflow.com/a/10467686/1103584)，它在同一篇文章的后面有点远。我遇到了同样的问题，并将该答案中的代码块添加到我的 UIPageViewController 中的 viewDidLoad 的末尾解决了我遇到的问题。

基本上发生的事情是 UIPageViewController 正在消耗所有的触摸事件，因此您需要从 UIPageViewController 中删除某些 UIGestureRecognizers 以便它不会响应这些事件。它可能比我发布的示例要复杂一些，因为它只是删除了 UITapGestureRecognizer，但它是相同的基本概念。您需要确保 UIPageViewController 仅以向右->向左滑动手势前进到下一页，而不是向上->向下滑动手势。

查看[UISwipeGestureRecognizerDirection 文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UISwipeGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UISwipeGestureRecognizer)。

# php - 如果页面不存在，htaccess 会导致 500

> ID：15142595
> 
> 赞同：1
> 
> 时间：2013-02-28T18:10:54.223
> 
> 标签：php, .htaccess

我目前正在使用此代码在我的 apache Web 服务器上删除我的文件的 .php 扩展名。

```
Options -Multiviews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f    
RewriteCond %{REQUEST_FILENAME} !-d   
RewriteRule ^(.*)$ $1.php [L] 
```

两个问题：

1：当有人请求一个不存在的页面时，我的 Web 服务器返回 500 错误而不是 404。我该如何解决这个问题？

2：如果有人请求 .php 扩展名，我该如何强制执行 404？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:04:31.643

不存在页面的 500 错误正在发生，因为 mod_rewrite 进入无限循环，试图重写您的请求并最终终止。

像这样重写规则以确保具有 PHP 扩展名的文件确实存在：

```
Options -Multiviews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f    
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ $1.php [L] 
```

仅当“file.php”存在时，该`RewriteCond %{REQUEST_FILENAME}.php -f`行才会导致重写发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:22:54.677

example.com/about-us.php 转到 example.com/about-us.html

```
RewriteEngine on
RewriteRule ^(.*)\.html$ $1.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T18:51:20.987

这不是完整的答案。

如果您不完全了解 htaccess 功能，我将尝试解释 RewriteEngine 的工作原理。

Apache 服务器从您的浏览器“接收”一些“不真实”的 URL。然后它读取 .htaccess，并通过使用该文件中的信息将“非真实”url 转换为指向服务器上物理文件的“真实”url。

**错误详细信息始终保存到 apache (httpd) 错误日志中。您必须阅读它，如果它没有告诉您任何信息 - 将其粘贴到此处 - 我们将提供帮助。**

在这种情况下，强制 404 错误是个坏主意。您应该修复错误，而不是覆盖它。

# java - 付款方式：通过预付卡付款

> ID：15142597
> 
> 赞同：1
> 
> 时间：2013-02-28T18:11:07.560
> 
> 标签：java, payment-gateway, payment, credit-card

我想将不同的支付选项集成到我的网站中，例如，我想让客户通过预付卡付款（贝宝已经集成）。

我有两个问题：

如何将预付卡支付与jsp集成？

如何轻松整合其他支付方式，例如：信用卡、借记卡、谷歌结账、亚马逊支付？

真的很感谢你的回答！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:00:02.807

我正在使用支付提供商 www.shareit.com 进行信用卡支付。他们提供了一个简单的按钮支付解决方案

问候

# wordpress - Wordpress 运行分类广告？一个好主意？

> ID：15142599
> 
> 赞同：0
> 
> 时间：2013-02-28T18:11:18.030
> 
> 标签：wordpress, tags

我正在为我的所有产品建立一个库存/分类到一个 wordpress 网站。这是一个好主意吗？我的问题是如何将它们全部分开。

我有大约 50 个产品类别（不适合菜单）。我需要找到一种方法来查询并将每个类别的项目显示在独立页面上。

例如。我有引擎、轮胎、轮辋、引擎盖。我需要一个页面来显示所有引擎而不是其他引擎。

提前谢谢，我希望问题很清楚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:52:23.667

Wordpress 很好，我在一家公司工作，我使用 wordpress 来创建拍卖。它有大量的类别和产品。我创建了一个自定义帖子，以允许用户为拍卖创建物品。添加了我用来过滤产品的类别，即：所有、艺术与娱乐、体育、餐饮、高尔夫等。我创建了分页，以便在多个页面上显示产品

在此处了解有关自定义帖子类型的更多信息自[定义帖子类型](http://codex.wordpress.org/Post_Types#Custom_Types)

希望这会有所帮助-大卫

# java - 如何从for循环依次显示每个值

> ID：15142600
> 
> 赞同：0
> 
> 时间：2013-02-28T18:11:23.270
> 
> 标签：java, android, for-loop

该程序为每个 i 值提供一个 Htm 值。我想通过反复按下计算按钮来依次显示每个值。我希望它显示 i=0 的值，然后当我按下按钮时它变为 i=1 并显示由此计算的值。我知道我的问题有点含糊，但您的帮助将不胜感激.. 问候

**我的 main.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/main"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="Optimum Tilt Angle Calculator"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="Calculate" />

<TextView
    android:id="@+id/beta"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="Beta = "
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/rad"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="H = "
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

* * *

**我的 Tilt.java：**

```
 package com.ned.tilt;

    import android.app.Activity;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.TextView;

    public class Tilt extends Activity implements android.view.View.OnClickListener {
private static final double PI = 3.142;
private static final double PHI = 24.8508 * (PI / 180);
private static final double Gsc = 1367;
private static final double RO = 0.2;
int i, beta, ang;

double delta, ws, wss, Rb, Rb_num, Rb_den, Ra,
        Htm, Ht;
    double Hd[] = new double[12];
double Kt[] = new double[12];
double Gon[] = new double[12];
double Hom[] = new double[12];
int nbar[] = { 17, 47, 75, 105, 135, 162, 198, 228, 258, 288, 318, 344 };
int N[] = { 31, 28, 31, 30, 31, 30, 31, 30, 31, 30, 31, 30 };
double Hm[] = { 4.38, 5.18, 5.93, 6.65, 6.67, 6.40, 5.44, 5.27, 5.62, 5.24,
        4.5, 4.11 };
Button cal;
TextView radiation, angle;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    initialize();
    cal.setOnClickListener(this);

}

private void initialize() {
    // TODO Auto-generated method stub
    cal = (Button) findViewById(R.id.button1);
    radiation = (TextView) findViewById(R.id.rad);
    angle = (TextView) findViewById(R.id.beta);
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    for (i = 0; i <= 11; i++) {
        Htm = 0;
        delta = 23.45 * (Math.sin((0.986301369) * (PI / 180)
                * (284 + (nbar[i]))));

        ws = Math.acos(-(Math.tan(PHI)) * (Math.tan(delta * (PI / 180))));
        ws = ws * (180 / PI);

        Gon[i] = Gsc
                * (1 + (0.033 * Math.cos(0.986301369 * (nbar[i])
                        * (PI / 180))));

        Hom[i] = (86400 / PI)
                * Gon[i]
                * (((Math.cos(PHI)) * (Math.cos(delta * (PI / 180))) * (Math
                        .sin(ws * (PI / 180)))) + ((ws * (PI / 180)) * (Math
                        .sin(PHI) * (Math.sin(delta * (PI / 180))))));
        Hom[i] = Hom[i] / 3600000;

        Kt[i] = Hm[i] / Hom[i];

        Hd[i] = (0.96268) - ((1.45200) * (Kt[i]))
                + ((0.27365) * (Kt[i]) * (Kt[i]))
                + ((0.04279) * (Kt[i]) * (Kt[i]) * (Kt[i]))
                + ((0.000246) * (ws))
                + ((0.001189) * (90 - (PHI * (180 / PI)) + delta));
        Hd[i] = Hd[i] * Hm[i];
        for (beta = 0; beta <= 90; beta++) {
            wss = Math.acos(-(Math.tan((PHI) - (beta * (PI / 180))) * (Math
                    .tan(delta * (PI / 180)))));
            wss = wss * (180 / PI);
            if (wss > ws) {
                wss = ws;
            }

            Rb_num = ((Math.cos((PHI) - (beta * (PI / 180))))
                    * (Math.cos(delta * (PI / 180))) * (Math.sin(wss
                    * (PI / 180))))
                    + (((PI / 180) * wss)
                            * ((Math.sin((PHI) - (beta * (PI / 180))))) * ((Math
                                .sin(delta * (PI / 180)))));
            Rb_den = ((Math.cos(PHI)) * (Math.cos(delta * (PI / 180))) * (Math
                    .sin(ws * (PI / 180))))
                    + (((PI / 180) * (ws) * (Math.sin(PHI)) * (Math
                            .sin(delta * (PI / 180)))));
            Rb = Rb_num / Rb_den;
            Ra = ((1 - (Hd[i] / Hm[i])) * (Rb))
                    + ((Hd[i] / (2 * Hm[i])) * (1 + (Math.cos(beta
                            * (PI / 180)))))
                    + ((RO / 2) * (1 - (Math.cos(beta * (PI / 180)))));

            Ht = Ra * Hm[i];
            if (Ht > Htm) {
                Htm = Ht;
                ang = beta;
            }
        }

        break;
    }
    radiation.setText("H = " + Htm);
    angle.setText("Beta =" + ang);

}
 } 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:17:19.497

你想如何显示它们？只是将它们附加到 TextView 的字符串上？

```
textView.setText(someString); 
```

TextView 的 ListView 每个都代表一个新的计算？

```
private List<String> mCalculations = new LinkedList<String>();

private Adapter mAdapter;

@Override
public onCreate(Bundle instance) {
    mAdapter = new ArrayAdapter(getContext(), android.R.layout.simple_list_item_1, mCalculations);
    ((ListView) findViewById(R.id.my_list_view)).setAdapter(mAdapter);
}

@Override
public void onClick(View v) {
    new AsyncTask<Void, Void, Double>() {
        public Double doInBackground(Void... values) {
            /* perform calculation */
            return value;
        }

        public void onPostExecute(Double... values) {
            if(values.length <= 0) return;
            String text = String.valueOf(values[0]);
            mCalculations.add(String.valueOf(value));
            mAdapter.notifyDataSetChanged();
        }
    }.execute();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:18:46.353

据我从你的问题中了解到，你不应该使用你的 for 循环

```
for (i = 0; i <= 11; i++) 
```

删除此 for 循环，声明一个变量，并将“i”设置为它，退出 onClick 时增加您的变量。

```
private int counter=0;

public void onClick(View v) {
    int i=counter;
    //everything continues, just remove the for loop
    angle.setText("Beta =" + ang);
    counter++;
    if(counter==12) counter=0;//your arrays are fixed, so we are turning back
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T18:17:48.053

只需删除当前循环，因为无论如何您在一次迭代后都会调用 break：

 ~~~~```
for (i = 0; i <= 11; i++) { 
```~~  ~~然后创建`i`一个字段变量并在每次按下按钮时递增它：

```
private int i = 0;

@Override
public void onClick(View v) {
    // Do all your calculations and call setText() like above...

    i++;
    if(i == Hm.length)  // Start over 
        i = 0;
} 
```

（这假设每个 Array 都等于或大于 Hm……这是危险的。您应该执行更彻底的检查。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T18:21:38.650

在你的 onClick 下，你从一个 for 循环开始

```
 for (i = 0; i <= 11; i++) { 
```

这是将 i 设置为每次单击按钮时从零开始。然后在循环结束时，您使用 break 来跳出循环。这使这个循环变得无用，你不需要这部分的循环。

在您的初始化函数中，您应该将 i 设置为零。然后在你的 onClick 函数中取出第一个 for 循环和你有中断的地方，取出它并用 i++ 替换它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T18:17:58.533

不要使用 for 循环，而是创建一个全局变量 i 并在每次单击按钮时增加它~~~~

# java - 有没有办法设置Xstream序列化的顺序

> ID：15142601
> 
> 赞同：1
> 
> 时间：2013-02-28T18:11:25.580
> 
> 标签：java, android, xstream

我需要从 Android 上的 java 对象生成 XML。XML 节点必须有明确的顺序。由于XML 节点的[XStream 文档](http://xstream.codehaus.org/manual-tweaking-output.html)顺序匹配对象的字段定义。当我使用 java classes(String, Date...) 作为字段时没有问题。但是当我需要将我的对象序列化为字段时就会出现问题。

这是我的代码：

```
final XStream x = new XStream();

x.autodetectAnnotations(true);

SecondEntity secondEntity = new SecondEntity();
secondEntity.setSecondaryDate(new Date());
secondEntity.setSecondaryString("Secondary String");

InnerEntity innerEntity = new InnerEntity();
innerEntity.setInnerDate(new Date());
innerEntity.setInnerString("Inner String");

SomeEntity someEntity = new SomeEntity();
someEntity.setInnerEntity(innerEntity);
someEntity.setSecondEntity(secondEntity);
someEntity.setSomeDate(new Date());
someEntity.setSomeString("Some string");

x.toXML(someEntity) 
```

某实体：

```
@XStreamAlias("SomeEntity")
public class SomeEntity {
    @XStreamAlias("innerEntity")
    private InnerEntity innerEntity;
    @XStreamAlias("secondEntity")
    private SecondEntity secondEntity;
    @XStreamAlias("someString")
    private String someString;
    @XStreamAlias("someDate")
    private Date someDate;

    public InnerEntity getInnerEntity() {
        return innerEntity;
    }

    public void setInnerEntity(InnerEntity innerEntity) {
        this.innerEntity = innerEntity;
    }

    public SecondEntity getSecondEntity() {
        return secondEntity;
    }

    public void setSecondEntity(SecondEntity secondEntity) {
        this.secondEntity = secondEntity;
    }

    public String getSomeString() {
        return someString;
    }

    public void setSomeString(String someString) {
        this.someString = someString;
    }

    public Date getSomeDate() {
        return someDate;
    }

    public void setSomeDate(Date someDate) {
        this.someDate = someDate;
    }
} 
```

内部实体：

```
@XStreamAlias("InnerEntity")
public class InnerEntity {
    @XStreamAlias("innerString")
    private String innerString;
    @XStreamAlias("innerDate")
    private Date innerDate;

    public String getInnerString() {
        return innerString;
    }

    public void setInnerString(String innerString) {
        this.innerString = innerString;
    }

    public Date getInnerDate() {
        return innerDate;
    }

    public void setInnerDate(Date innerDate) {
        this.innerDate = innerDate;
    }
} 
```

第二实体：

```
@XStreamAlias("SecondEntity")
public class SecondEntity {
    @XStreamAlias("secondaryString")
    private String secondaryString;
    @XStreamAlias("secondaryDate")
    private Date secondaryDate;

    public String getSecondaryString() {
        return secondaryString;
    }

    public void setSecondaryString(String secondaryString) {
        this.secondaryString = secondaryString;
    }

    public Date getSecondaryDate() {
        return secondaryDate;
    }

    public void setSecondaryDate(Date secondaryDate) {
        this.secondaryDate = secondaryDate;
    } 
} 
```

我明白了

```
<SomeEntity>
    <innerEntity>
        <innerDate>2013-02-28 18:04:24.184 UTC</innerDate>
        <innerString>Inner String</innerString>
    </innerEntity>
    <secondEntity>
        <secondaryDate>2013-02-28 18:04:24.183 UTC</secondaryDate>
        <secondaryString>Secondary String</secondaryString>
    </secondEntity>
    <someDate>2013-02-28 18:04:24.184 UTC</someDate>
    <someString>Some string</someString>
</SomeEntity> 
```

当我需要时：

```
<SomeEntity>
    <innerEntity>
        <innerString>Inner String</innerString>
        <innerDate>2013-02-28 18:04:24.184 UTC</innerDate>
    </innerEntity>
    <secondEntity>
        <secondaryString>Secondary String</secondaryString>
        <secondaryDate>2013-02-28 18:04:24.183 UTC</secondaryDate>
    </secondEntity>
    <someDate>2013-02-28 18:04:24.184 UTC</someDate>
    <someString>Some string</someString>
</SomeEntity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T09:10:19.167

请为 InnerEntity 和 SecondEntity 实现此接口[FieldKeySorter](http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/converters/reflection/FieldKeySorter.html)。

# c++ - std::string(itr, itr) 应该做什么？

> ID：15142603
> 
> 赞同：0
> 
> 时间：2013-02-28T18:11:38.450
> 
> 标签：c++, iterator, language-lawyer, stdstring

std::string 构造函数的[网站 cplusplus 文档](http://www.cplusplus.com/reference/string/basic_string/basic_string/)部分采用两个输入迭代器状态：

> 以相同的顺序复制 [first,last) 范围内的字符序列。
> 
> first, last：输入迭代器到一个范围内的初始和最终位置。使用的范围是[first,last)，包括first和last之间的所有字符，包括first指向的字符但不包括last指向的字符。

这在退化的情况下意味着什么`first == last`？一方面`first`包含，另一方面`last`排除？官方 C++ 标准说在这种情况下应该发生什么？是否应该抛出异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T18:17:39.990

我不知道您正在阅读什么文档，但*标准*说（§21.4.2/15）：

> [..] 从范围内的值构造一个字符串`[begin, end)`，如序列要求表中所示

序列要求表（表 100）将`X a(i, j)`有效范围定义`[i, j)`为：

> 构造一个与范围相等的序列容器`[i, j)`

当第二个迭代器可以从第一个迭代器到达时（通过递增），范围是*有效的。*对于两个相等的迭代器，范围为空。见§24.2.1/7：

> *范围*是一对指定计算开始和结束的迭代器。范围`[i,i)`是一个空范围；一般来说，范围`[i,j)`是指数据结构中的元素，从 指向的元素开始，`i`直到但不包括 指向的元素`j`。`[i,j)`当且仅当`j`可从 到达时，范围才有效`i`。将库中的函数应用于无效范围的结果是未定义的。

因此，如果`first == last`，如您所说，您将得到一个空字符串。如果`last`无法从 访问`first`，则您的行为未定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T18:16:56.343

范围为空，因此没有可复制的内容。结果是一个空字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T18:17:05.267

> 在 first == last 的退化情况下，这意味着什么？

这意味着输入范围为空，因此字符串将为空。

> 标准说在这种情况下应该发生什么？

C++11 24.2.1/7 说：

> 范围`[i,i)`是一个空范围

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T18:18:34.513

我已经多次使用它的一件事是`std::string`从大型 C 风格字符串 ( `const char*`) 中的子字符串构造 a。您可以将两个`const char*`指针传递给它，它将从第一个指针开始并在第二个指针之前结束的字符构造一个字符串。

如果`first == last`，则结果为空字符串。如果`first > last`，则行为未定义（感谢 Mooing Duck）

# ssrs-2008 - 如何将父列值作为参数传递给 SSRS 中的子报表？

> ID：15142613
> 
> 赞同：0
> 
> 时间：2013-02-28T18:12:21.103
> 
> 标签：ssrs-2008

我已经从 SSRS 创建了主/详细信息报告。是否可以将父列值作为参数传递给子报表。例如

如果我有一个主报告 A 和详细报告 B。从下图中，我如何将 Master_Report_A 的 col_1 的值作为 Details_Report_A 的参数传递![在此处输入图像描述](../Images/642f34d088a6ef909fb8d72df503b26a.png)

任何输入将不胜感激。

# c++ - 在 linux 上加载多个类似的共享库

> ID：15142614
> 
> 赞同：4
> 
> 时间：2013-02-28T18:12:25.360
> 
> 标签：c++, linux, gcc, ld

我正在研究创建“模型”的代码。模型是从 XML 文件创建的，其部分表示是动态生成的 C 代码。这段 C 代码被即时编译成一个动态加载的共享库（使用 POCO 共享库类）。共享库主要包含小函数，模型创建的一部分是填充指向这些函数的函数指针。这一切都很好。但是，同时创建多个模型会导致问题。

我相信这与动态加载在 Linux 上的工作方式有关，以及每个共享库都包含具有相同名称的函数这一事实。PIC会导致这个吗？这些问题毫无意义地表现在从共享库函数中检索数据。

所以问题是，如何在 linux 上加载多个（数千个）包含相同函数名的共享库？

以上在 Windows 上运行良好，似乎动态加载的库数据/函数彼此完全隔离。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:31:08.193

首先，您可以`dlopen`拥有数十万个共享对象。我的[manydl.c](http://starynkevitch.net/Basile/manydl.c)证明了这一点。

然后，您还可以生成 C 代码、编译它和`dlopen`共享对象，所有这些都来自同一个进程。我的（2017 年过时）[MELT 插件](http://starynkevitch.net/Basile/gcc-melt/)（对于 GCC，MELT 提供了一种高级语言来扩展 GCC）（我的`manydl.c`示例也是如此）。

但是，我认为您不应该在其中保留相同的（定义的）函数名称。我建议避免这种情况。你可以

1.  生成唯一名称（由于生成了 C 代码，这是最好、最便携、最简单的解决方案）

2.  将这些名称的一些`-D`标志编译`#define`为唯一名称，因此源代码显然可能包含重复的名称；也就是说，如果您生成的代码定义了`foo`函数，则将 a `-Dfoo=foo_123`（具有`foo_123`全局唯一性）传递给`gcc`编译它的命令。（当然你那么`dlsym`为`"foo_123"`）。

3.  在生成的代码中添加[可见性（“隐藏”）](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)函数属性。您也可以将`-fvisibility=hidden` [选项](http://gcc.gnu.org/onlinedocs/gcc/Code-Gen-Options.html)传递给`gcc`.

4.  只有静态函数（然后，名称并不重要，所以可以重复），并且有一个`constructor`以某种方式绑定函数的函数（例如将它们的指针存储在某个地方，例如在某个全局表中）。

5.  您可以考虑传递`RTLD_LOCAL`给[dlopen(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/dlopen.3.html)。我不确定这是一个好主意（而且 POCO 可能不知道该怎么做）。

PS。我不认为它与[位置无关代码](http://en.wikipedia.org/wiki/Position-independent_code)有关（在共享对象中这是可取的，但不是绝对必需的；如果没有`-fPIC`，`dlopen`将不得不做很多低效的重定位）。它与 Linux 共享对象链接和加载有关。有关详细信息，请阅读[Levine 的 Linkers & Loaders 书](http://www.iecc.com/linker/)。

另请参阅[此问题](https://stackoverflow.com/q/2222162/841108)，并阅读[Drepper 关于*如何编写共享库*](http://www.akkadia.org/drepper/dsohowto.pdf)的论文。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T20:46:50.380

Poco SharedLibrary 打开函数接受链接器标志。默认为 Poco::SharedLibrary::SHLIB_GLOBAL，对应 dlopens RTLD_GLOBAL 和 Poco::SharedLibrary::SHLIB_LOCAL，对应 RTLD_LOCAL。有关更多信息，请参见[http://linux.die.net/man/3/dlopen](http://linux.die.net/man/3/dlopen)。

传递 Poco::SharedLibrary::SHLIB_LOCAL 标志解决了这个问题。

# java - 使用 Java (GSM Dongle) 发送短信

> ID：15142616
> 
> 赞同：1
> 
> 时间：2013-02-28T18:12:29.837
> 
> 标签：java, api, sms

我正在尝试开发一个应用程序，让我使用连接在 USB 端口上的 GSM 加密狗发送短信。我已经下载了 javaxcomm api 并将文件放在适当的文件夹中。由于我的操作系统是 Windows 7（64 位），所以我下载了 jdk 的 32 位版本。但是，我仍然无法继续前进。目前我遇到了 NoSuchPortException。

错误出现在这一行周围：

```
portId = CommPortIdentifier.getPortIdentifier(parameters.getPortName()); 
```

这是完整的代码。

```
public class SMSClient implements Runnable{

  public final static int SYNCHRONOUS=0;
  public final static int ASYNCHRONOUS=1;
  private Thread myThread=null;

  private int mode=-1;
  private String recipient=null;
  private String message=null;

  public int status=-1;
  public long messageNo=-1;

  public SMSClient(int mode) {
      this.mode=mode;
    }

  public int sendMessage (String recipient, String message){
    this.recipient=recipient;
    this.message=message;
    //System.out.println("recipient: " + recipient + " message: " + message);
    myThread = new Thread(this);
    myThread.start();
//    run();
    return status;
    }
    public void run(){

    Sender aSender = new Sender(recipient,message);

    try{
      //send message
          aSender.send ();

         // System.out.println("sending ... ");

      //in SYNCHRONOUS mode wait for return : 0 for OK,
      //-2 for timeout, -1 for other errors
      if (mode==SYNCHRONOUS) {
          while (aSender.status == -1){
            myThread.sleep (1000);
          }
      }
      if (aSender.status == 0) messageNo=aSender.messageNo ;

    }catch (Exception e){

        e.printStackTrace();

    }

    this.status=aSender.status ;

    aSender=null;

  }
} 
```

# vim - 基于文件类型的自动硬标签与软标签缩进？

> ID：15142619
> 
> 赞同：3
> 
> 时间：2013-02-28T18:12:42.113
> 
> 标签：vim, tabs, vi

我想默认为软制表符，缩进两个空格（但对于 Makefile，硬制表符显示为两个空格），并让 vim 在保存时适当地重新缩进。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T18:36:48.540

看到[这个问题](https://stackoverflow.com/questions/158968/changing-vim-indentation-behavior-by-file-type)。对于您的情况，您希望在您的`.vimrc`:

```
set tabstop=2
set softtabstop=2
set expandtab 
```

这在`~/.vim/after/ftplugin/make.vim`：

```
setlocal noexpandtab 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T18:40:02.323

您可以使用`autocmd`它，因此它几乎可以成为您的单线器`.vimrc`

```
autocmd Filetype jade setlocal ts=2 sw=2 expandtab
autocmd Filetype yaml setlocal ts=2 sw=2 expandtab 
```

其他一切仍将使用全局默认值。

# ruby-on-rails - Rails ActiveRecord，在 Postgres 中插入默认字段值

> ID：15142625
> 
> 赞同：1
> 
> 时间：2013-02-28T18:12:54.617
> 
> 标签：ruby-on-rails, postgresql, activerecord

这应该是一个简单的，但我用谷歌搜索了一下。

我正在尝试为我的 rails 应用程序创建数据库日志。日志是一个 postgres 表，它有一个`timestamp`字段，我给出`DEFAULT`了`current_timestamp`. 这在原始 SQL 中完美运行，如果我将`timestamp`字段排除在`INSERT`查询之外，它会正确获取当前时间戳。

在铁轨上我有；

```
entry = LogTable.new :fieldA => 'valA', :fieldB => 'valB'
entry.save 
```

*（LogTable 扩展 ActiveRecord::Base）*

这会导致`INSERT`查询包含*所有*字段，包括`timestamp`设置为 的字段`NULL`，这是数据库不允许的，因此会出错。

我尝试过设置`:timestamp => 'current_timestamp'`，`:timestamp => 'DEFAULT'`但最终都尝试将其设置为`NULL`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:31:18.597

您的 current_timestamp 只是当前日期/时间吗？如果是这样，您可以保持简单并执行以下操作：

```
entry = LogTable.new :fieldA => 'valA', :fieldB => 'valB', :timestamp => Time.now 
```

如果它更复杂，并且您真的想使用 DB 端默认值，此页面可能会有所帮助：[http](http://drawohara.com/post/6677354/rails-activerecord-default-values) ://drawohara.com/post/6677354/rails-activerecord-default-values 。

# vba - VBA：从字符串中的列表中查找变量

> ID：15142626
> 
> 赞同：3
> 
> 时间：2013-02-28T18:12:58.930
> 
> 标签：vba, excel

我试图查看列表中的某个单词（或数字）是否在某个字符串中。

例如，我有以下短语：“2012 年 1 月 20 日和 2011 年”。
而且我正在尝试查看句子中是否包含月份，但是只要有一个月，句子中出现的月份就无关紧要。（所以“2012 年 2 月 20 日和 2011 年”也会过去）

我在想类似的事情：

```
Sub Run_Find()
Dim Month As String, Number, Year, Splitmonth As Variant
Dim ii As Integer

Month = "January, February, March, April, May, June, July, August, September, October, November, December"
Number = "1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 28, 29, 30, 31"
Year = "2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015"

Splitmonth = VBA.Split(Month, ",")
For ii = 0 To 12
    If VBA.InStr(1, "January 30, 2012 and 2011", Splitmonth(ii)) > 0 Then
        MsgBox "Found it!"
    Else
        MsgBox "Nop!"
    End If
Next ii

End Sub 
```

这行得通。但有替代方案吗？浏览一个列表，如果列表中的任何单词出现在字符串中，它应该通过。

最终我试图看到`If`它包含一个月，`And`一天（数字），`And`一年，`Then`..
使用这种方法似乎变得“过于复杂”。

在此先感谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T18:35:07.847

[正则表达式](http://msdn.microsoft.com/en-us/library/yab2dx62.aspx)在这里可能会有所帮助。正则表达式是一个广泛的主题（[regex](/questions/tagged/regex "显示标记为“正则表达式”的问题")），但这里有几个与您的问题相关的示例。

```
Public Sub example1()
  Dim re As Object
  Set re = CreateObject("vbscript.regexp")
  re.Pattern = "January|February|March|April|May|June|July|August|September|November|December"
  If re.test("January 30, 2012 and 2011") Then
      Debug.Print "match found"
  End If
End Sub

'=> match found

Public Sub example2()
  Dim re As Object
  Dim matches As Object, match As Object, submatch

  Set re = CreateObject("vbscript.regexp")
  re.Pattern = "(January|February|March|April|May|June|July|August|September|November|December) (\d+), (\d{4})"
  Set matches = re.Execute("January 30, 2012 and 2011")
  For Each match In matches
    Debug.Print "match: " & match
    Debug.Print "submatches: ",
    For Each submatch In match.submatches
        Debug.Print submatch,
    Next
    Debug.Print ""
  Next
End Sub

'=> match: January 30, 2012
'=> submatches:   January       30            2012 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T21:59:17.823

不比正则表达式好，但这是使用过滤器功能的另一种方式

```
Sub Run_Find()

    Dim sMonth As String
    Dim vaMonth As Variant
    Dim vaDate As Variant
    Dim i As Long

    sMonth = "January, February, March, April, May, June, July, August, September, October, November, December"

    vaMonth = Split(sMonth, "," & Space(1))
    vaDate = Split("July 30, 2012 and 2011", Space(1))

    For i = LBound(vaMonth) To UBound(vaMonth)
        If UBound(Filter(vaDate, vaMonth(i))) >= 0 Then
            Debug.Print vaMonth(i)
            Exit For
        End If
    Next i

End Sub 
```

# ruby-on-rails-3 - 删除与销毁 Rails 中的会话

> ID：15142631
> 
> 赞同：1
> 
> 时间：2013-02-28T18:13:17.373
> 
> 标签：ruby-on-rails-3

我不明白其中的区别。我一直在关注 Michael Hartl 的 Rails 教程，在我的路线文件中，我有以下内容：

```
 resources :sessions, only: [:new, :create, :destroy]

  match '/signin', to: "sessions#new"
  match '/signout', to: "sessions#destroy", via: :delete 
```

该网站在有和没有`via: :delete`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:01:55.473

该`via`选项将路由限制到该 HTTP 动词。在这种情况下，请求可能是使用`DELETE`动词发出的，因此限制或不限制这一点没有任何区别。

注意，`destroy`是动作的名称，`delete`是指 HTTP 动词。

# git - Git 服务器镜像

> ID：15142638
> 
> 赞同：0
> 
> 时间：2013-02-28T18:13:43.593
> 
> 标签：git, github

你如何设置一个 git 服务器来从另一个 git 服务器拉取？我有一个更新后挂钩，它作为异地备份推送到 github，但我也希望它从 github 拉取。我怎样才能做到这一点？

编辑：

让我重新表述一下。我希望完成的是拥有 2 个相互镜像的独立遥控器，一个在我公司的 WAN 上，另一个在 github 上。我已经有一个更新后挂钩，可以将所有更新从 WAN 推送到 github，但我需要它来双向工作。谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:25:23.163

在一般情况下，您不能；拉动可能需要合并，如果没有工作树，您就无法合并，而您的服务器可能没有。（即使确实如此……无人看管的合并是个坏主意。）

如果你想彻底覆盖一个分支，你可以用`git fetch github master:master`. 但听起来您希望两个存储库都能看到新的提交？如果 GitHub 在这里只是充当备份，那你为什么需要从中提取呢？

# iphone - 用于浏览和管理文档或文件的 Objective C 框架

> ID：15142639
> 
> 赞同：0
> 
> 时间：2013-02-28T18:13:48.280
> 
> 标签：iphone, ios, objective-c

就这样我不会碰巧重新发明轮子，并且至少查看一些示例，目标 C 中是否有一个众所周知的框架，它将允许我查看和管理文件夹内的文档：

*   浏览文件夹文档/文件
*   将文档显示为缩略图或列表
*   允许我管理文件：删除、移动等。

我不是真的在寻找照片查看器或 PDF 查看器，只是一个文件管理器或只是查看器。谢谢。

# c - 取消引用从另一个函数传递到 main() 的指针

> ID：15142641
> 
> 赞同：1
> 
> 时间：2013-02-28T18:13:49.617
> 
> 标签：c, arrays, pointers, parameter-passing, pass-by-reference

我正在尝试使用单独的函数来输入数据`scanf()`（在 之外`main`）。这个新功能应该打印一行，然后接收用户的输入。然而，函数`scanf`中的函数和我正在测试它的函数之间似乎出现了问题。`printf()``main`

我相信我收到了来自函数的指针，但某些编译器警告让我怀疑我对指针的假设是否正确。

我对这段代码的输出感到困惑：

```
#include <stdio.h>
void set_Info(void);

int main()
{
int scanNum = 0;
set_Info();

printf("%d", &scanNum);
return 0;
}

void set_Info(void)          /* start of function definition */

{
int scanNum;

printf("Scan test, enter a number");
scanf("%d",&scanNum);
} 
```

如果我提供一个数字，比如 2，main() 中 printf 语句的结果是：

```
2665560 
```

现在，据我所知，输出在我看来就像一个内存地址，所以我试图解决这个问题是取消引用 main 中的指针，如下所示：

```
int scanNum = 0;
int scanNumHolder;

set_Info();

scanNumHolder = *scanNum;
printf("%d", &scanNumHolder); 
```

我相信这段代码会使`scanNum`变量分配给`scanNum`. 但是，当我这样做时，我会得到与上面相同的输出。这使我相信两件事之一。要么我没有正确取消引用`scanNum`，要么`scanNum`在这种情况下实际上根本不是指针。

我从编译器收到的最常见错误是：

```
error: invalid type argument of unary ‘*’ (have ‘int’) 
```

我想，如果我试图将`int`值视为指针，这是有道理的。

如果`scanNum`是没有正确取消引用的情况，我该如何实现？

感谢您的帮助

*****更新****

 **谢谢您的帮助。

只是回顾一下

我的 set_info 函数需要传递一个地址参数。必须使用地址参数的原因是函数的本地内存在函数调用结束后被擦除。因此，为了完成在主函数中声明的变量，我传递了相关变量的地址，以便在函数结束时不会丢失更改。

在主函数内部，当使用 &scanNum 作为参数调用 set_info 时，它会传递一个引用 tp 变量，以便可以为其分配函数中 scanf 语句生成的值。

我意识到我做错了什么，正如 SO 的真棒人正确指出的那样，我试图调用 set_info 就像它返回一个值一样，但实际上改变了我真正想要的变量。

再次感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:16:57.823

这个功能：

```
void set_Info(void)
{
    int scanNum;
    scanf("%d", &scanNum);
} 
```

从标准输入中读取整数并将其存储到`scanNum`变量中，该变量是具有自动存储持续时间的局部变量，仅存在于该函数的范围内。

还有你的身体`main`：

```
int scanNum = 0;
set_Info();

printf("%d", &scanNum); 
```

定义一个名为 的局部变量`scanNum`，然后调用一个`set_Info()`不会以任何方式影响`scanNum`定义的函数，`main`然后打印`scanNum`变量的地址。

* * *

这就是你想要做的：

```
void set_Info(int* num)
{
    // read an integer and store it into int that num points to:
    scanf("%d", num);
}

int main()
{
    int scanNum = 0;
    // pass the address of scanNum to set_Info function so that
    // changes to scanNum are visible in the body of main as well:
    set_Info(&scanNum);
    printf("%d", scanNum);
    return 0;
} 
```

我还建议您在继续编程之前花更多时间阅读一些有关 C 基础知识的书 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T18:25:22.410

我会将变量传递到您的 set_Info 函数中，以便它知道将数据保存在哪里。然后，这将允许您扫描多个值，并且您将简单地增加指针。确保使用 &variableName 将变量地址传递给 set_Info()，因为该函数需要一个指针

```
#include <stdio.h>
void set_Info(int *pScanNum);

int main()
{
    int scanNum = 0;
    set_Info(&scanNum);

    printf("%d", scanNum);
    return 0;
}

//Pass in the pointer to scanNum
void set_Info(int *pScanNum)
{
    printf("Scan test, enter a number");
    scanf("%d",pScanNum);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T18:16:55.347

摆脱你的＆符号！Printf 想要一个整数而不是指针。

```
printf("%d", scanNum); 
```

正如 liho 所说，您需要从 set_info 返回 scanNum ，以便您可以在函数之外获取它。

```
int scanNum = set_Info(); 
```**

# scripting - 批处理文件复制脚本在 for 循环中给出错误

> ID：15142652
> 
> 赞同：0
> 
> 时间：2013-02-28T18:14:33.847
> 
> 标签：scripting, batch-file

我正在编写一个批处理脚本，它将一堆小文件从一个位置复制到另一个位置，验证该文件是否存在于新目录中，删除原始文件，然后继续。我已经实现了一个 FOR 循环来做到这一点，但我似乎无法让它工作。有任何想法吗？

```
::Copying files-
::For loop copies file, verifies file was copied,
::and removes file from source.
for %%f in (Q:%source%\*) do (
:recopy
copy %%f %dest%\%%f
if not exist %dest%\%%f goto recopy
set /a count+=1
del %source%\%%f
echo copied !count! of %total%
ping -n 1 -w 500 1.1.1.1 >nul
) 
```

变量的输入如下：

```
set /P source=Enter path to files on P:(Temp) drive (EX: jdoe\copy)

set dest=D:Temp\Copy 
```

如果网络共享的脚本添加如下：

```
net use Q: \\SERVER\Temp 
```

给出的错误是：

> 该系统找不到指定的文件

并重复错误，直到屏幕填满。

完整的 pastebin 在[http://pastebin.com/yjXP7H6U](http://pastebin.com/yjXP7H6U)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:40:58.417

如果有记忆，您不能在 for 循环或 if 语句中使用标签。您应该移出`:recopy`循环。像这样的东西：

```
::Copying files-
::For loop copies file, verifies file was copied,
::and removes file from source.
for %%I in (Q:\%source%\*) do (
    call :recopy "%%~fI" "%dest%\%%~nxI"
    set /a count+=1
    del "%%~fI"
    echo copied !count! of %total%
    ping -n 1 -w 500 1.1.1.1 >nul
)
goto :EOF

:recopy source dest
copy "%~1" "%~2"
if not exist "%~2" call :recopy "%~1" "%~2"
goto :EOF 
```

# c# - 我是否必须使用 CopyTo 将自定义集合放入可枚举中？

> ID：15142656
> 
> 赞同：3
> 
> 时间：2013-02-28T18:14:44.580
> 
> 标签：c#, .net, linq, ienumerable

考虑以下代码：

```
var results = searcher.FindAll();

SearchResult[] srList = new SearchResult[results.Count];
results.CopyTo(srList, 0); 
```

哪里`searcher.FindAll()`返回一个[`System.DirectoryServices.SearchResultCollection`](http://msdn.microsoft.com/en-us/library/system.directoryservices.searchresultcollection.aspx)。

**我是否必须使用 将`CopyTo`它们变成一个可枚举的对象，以便以后在 a 中使用`Parallel.ForEach`？** *如果是这样，为什么？*

我有`using System.Linq`，但没有`ToList`弹出方法。

谢谢大家！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T18:17:21.080

您可以使用[`Cast<T>()`](http://msdn.microsoft.com/en-us/library/bb341406.aspx)将 a`SearchResultCollection`转换为`IEnumerable<T>`，并[`ToArray<T>()`](http://msdn.microsoft.com/en-us/library/bb298736.aspx)创建一个数组。

```
SearchResult[] results = searcher.FindAll().Cast<SearchResult>().ToArray(); 
```

确保包含 System.Linq 命名空间：

```
using System.Linq; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T18:25:43.020

您可以使用`Cast<T>`扩展方法从非泛型`IEnumerable`变为`IEnumerable<SearchResult>`：

```
var results = searcher.FindAll().Cast<SearchResult>(); 
```

# html - 为什么列表项不会在包含元素的底部对齐？

> ID：15142657
> 
> 赞同：1
> 
> 时间：2013-02-28T18:14:49.087
> 
> 标签：html, css

我试图让一些链接在其包含元素的底部对齐。我在包含元素中添加了垂直对齐文本底部。我什么都得不到。

这是主 html 文件中的内容。

```
 <div class="mainHeader">

 <li><a class="mainHeaderLink" href="book.html">BOOK A ROOM</a></li>
 <li><a class="mainHeaderLink" href="promotions.html">PROMOTIONS</a></li>
 <li><a class="mainHeaderLink" href="meetings.html">MEETINGS & EVENTS</a></li>
 <li><a class="mainHeaderLink" href="about.html">ABOUT STIL</a></li>

 </div> 
```

这是我的css文件。（CSS 有效，只是不是 align 属性）

```
@charset "UTF-8";
/* CSS Document */

body 
{
margin-left: 0px;
margin-top: 0px;
margin-right: 0px;
margin-bottom: 0px;
}

div.mainHeader
{
background-color: #006;
background: solid;
height:100px;
text-align: center;
vertical-align: text-bottom;
 }

 a.mainHeaderLink:link
 {
text-decoration: none;
font-weight: bold;
color: #FFF;
font-size: 16px;
font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
 }

 a.mainHeaderLink:visited
 {
text-decoration: none;
font-weight: bold;
color: #FFF;
font-size: 16px;
 }

 a.mainHeaderLink: active
 {
text-decoration: none;
font-weight: bold;
color: #CCC;
font-size: 16px;
 }

 a.mainHeaderLink:hover
 {
text-decoration: none;
font-weight: bold;
color: #CCC;
font-size: 16px;
 }

 li
 {
display:inline;
margin-left: 50px;

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:19:38.383

`<li>`没有`<ul>`父母是无效的。修复它。

此外，我只会添加几个简单的样式以使其与底部“对齐”，而不是与`vertical-align`我认为被[诅咒](http://phrogz.net/css/vertical-align/index.html)的 .

```
.mainHeader {
    position: relative;
}
.mainHeader ul {
    position: absolute;
    bottom: 0;
} 
```

[http://jsfiddle.net/d3SFz/](http://jsfiddle.net/d3SFz/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T19:20:04.383

正如其他人所说，将您的`<li>`物品放在`<ul>`标签内。鉴于上面的 css，您可以通过对 css 的更改来“居中”您的菜单项：

```
li
 {
    display:inline-block;
    margin-left: 50px;
    margin-top:37px;
 } 
```

[在这里查看](http://jsfiddle.net/KTfj3/)

# r - 如何按日期对 data.frame 进行分组？

> ID：15142660
> 
> 赞同：5
> 
> 时间：2013-02-28T18:14:57.810
> 
> 标签：r, aggregate

我有以下格式的 .csv 文件：

```
Date       ,     Time  , Value
1899-01-01 ,  4:00:00  ,    1
1899-01-01 ,  4:01:00  ,    2
1899-01-01 ,  4:02:00  ,    3
1899-01-01 ,  4:03:00  ,    4
1899-01-01 ,  4:04:00  ,    5
1900-08-22 , 22:00:00  ,  101
1900-08-22 , 22:01:00  ,  102
2013-08-29 ,  4:00:00  , 1000
2013-02-29 ,  4:02:00  , 1001
2013-02-29 ,  4:03:00  , 1002 
```

是否可以`group by date`生成`data.table`以下格式的 a：

```
Date      , Vector(variable length)
1899-02-28, c(1,2,3,4,5)
1900-08-22, c(101,102)
1900-08-22, c(1000,1001,1002) 
```

这是我迄今为止最好的（经过一天的尝试）：

```
raw <- read.csv(pathName, header = TRUE, stringsAsFactors = FALSE)
groupedByDate <- split(raw, raw$Date) 
```

但是，这似乎会生成一个非常宽的表格，每个日期有一列，这与我想要的不太接近。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T18:18:52.623

`aggregate`在命名的“mydf”上使用`data.frame`如下：

```
> temp <- aggregate(Value ~ Date, mydf, as.vector) 
> temp
         Date         Value
1 1899-01-01  1, 2, 3, 4, 5
2 1900-08-22       101, 102
3 2013-02-29     1001, 1002
4 2013-08-29           1000 
```

“值”列现在是`list`包含您的向量的列。

```
> temp$Value
$`0`
[1] 1 2 3 4 5

$`1`
[1] 101 102

$`2`
[1] 1001 1002

$`3`
[1] 1000 
```

您可能正在寻找的`split`是：

```
> split(mydf$Value, mydf$Date)
$`1899-01-01 `
[1] 1 2 3 4 5

$`1900-08-22 `
[1] 101 102

$`2013-02-29 `
[1] 1001 1002

$`2013-08-29 `
[1] 1000 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T18:19:48.210

使用`aggregate`和`paste0`

```
> aggregate(Value ~ Date, data=DF, FUN=paste0 )
         Date         Value
1 1899-01-01  1, 2, 3, 4, 5
2 1900-08-22       101, 102
3 2013-02-29     1001, 1002
4 2013-08-29           1000 
```

# ios - 自定义 UIView 和 loadNibNamed 不起作用

> ID：15142664
> 
> 赞同：0
> 
> 时间：2013-02-28T18:15:10.240
> 
> 标签：ios, ios6

我正在尝试创建一个自定义 UIView 并将其加载到 xib 文件中。自定义 UIView 称为 JtView，代码如下：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    NSLog(@"initWithFrame was called");  // this was called
    if (self) {
        // Initialization code
        [[NSBundle mainBundle] loadNibNamed:@"MyView" owner:self options:NULL];
        [self addSubview:self.view];
    }
    return self;
}

-(void)awakeFromNib
{
  [super awakeFromNib];
  [self addSubview:self.view];
} 
```

在创建 xib 文件（文件 -> 新建 -> 文件 -> 用户界面 -> 视图）时，我删除了主窗口并从 Xcode 的对象调色板中拖动了一个视图。我尝试将 alt 拖动到 JtView 的标题，但这不起作用。我需要在这里创建一个关联，还是应该将 XCode 创建的内容留在原处？（编辑 - 请参阅下面的评论以获得进一步说明）

我还在 xib 中添加了一个 UILabel。

但是，当我在模拟器中运行并将背景颜色设置为红色时，标签没有显示出来。我是否需要在自定义 UIView 中创建 UILabel 作为参考？我应该删除它还是保留它？![在此处输入图像描述](../Images/8871f3bef7ab6ca73444957d8fb366a4.png)

谢谢

**编辑 1** 这是连接和头文件的屏幕截图：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T15:02:18.703

我解决了它向 UIView 添加一个类方法：

* * *

```
+ (id)customView; 
```

* * *

```
+ (id)customView
{
    CustomView *customView = [[[NSBundle mainBundle] loadNibNamed:@"CustomView" owner:nil options:nil] lastObject];

    // make sure customView is not nil or the wrong class!
    if ([customView isKindOfClass:[CustomView class]])
        return customView;
    else
        return nil;
} 
```

* * *

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    CustomView *customView = [CustomView customView];
    //And where you gonna use it add this line:
    //this self.view refers to any view (scrollView, cellView...)
    [self.view addSubview:customView];
} 
```

* * *

我希望它会有所帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T22:43:41.860

尝试这个：

```
-(void)awakeFromNib {
    NSArray *obj = [[NSBundle mainBundle] loadNibNamed:@"MyView" owner:self options:nil];
    [self addSubview:obj[0]];
} 
```

或者，如果您有一个名为“nibview”的@property IBOutlet，您可以这样做：

```
-(void)awakeFromNib {
    [[NSBundle mainBundle] loadNibNamed:@"MyView" owner:self options:nil];
    [self addSubview:self.nibview];
} 
```

# php - centos Apache "Child pid *** exit signal Segmentation fault (11)" in error_log

> ID：15142667
> 
> 赞同：0
> 
> 时间：2013-02-28T18:15:15.407
> 
> 标签：php, python, apache, gdb, centos

我在我的 apache 日志文件中收到很多“Child pid XXXX exit signal Segmentation fault (11)” 我尝试了从[这里](https://stackoverflow.com/questions/7745578/notice-child-pid-xxxx-exit-signal-segmentation-fault-11-in-apache-error-lo)开始的解决方案，但无济于事。

请帮助我理解这个错误，它与 python 2.4 有关

编辑：我只想指出生成此错误的网站完全在 php.ini 中。

这是 gdb 的结果：

```
Continuing.

Program received signal SIGSEGV, Segmentation fault.
PyErr_Restore (type=0x2b8ef0870aa0, value=0x2b8ee5d92d40, traceback=0x0) at Python/errors.c:39
39      Python/errors.c: No such file or directory.
        in Python/errors.c
(gdb) backtrace full
#0  PyErr_Restore (type=0x2b8ef0870aa0, value=0x2b8ee5d92d40, traceback=0x0) at Python/errors.c:39
        tstate = 0x0
        oldtype = <value optimized out>
        oldvalue = <value optimized out>
        oldtraceback = <value optimized out>
#1  0x00002b8ef05b9537 in PyErr_SetString (exception=0x2b8ef0870aa0, string=<value optimized out>) at Python/errors.c:70
        value = 0x2b8ee5d92d40
#2  0x00002b8ef05c91b3 in PyModule_AddObject (m=0x2b8efb47ac20, name=0x2b8ef4b25890 "accept2dyear", o=0x2b8efba963d8)
    at Python/modsupport.c:598
        dict = <value optimized out>
#3  0x00002b8ef05c9227 in PyModule_AddIntConstant (m=0x2b8efb47ac20, name=0x2b8ef4b25890 "accept2dyear", value=<value optimized out>)
    at Python/modsupport.c:628
        o = 0x2b8efba963d8
#4  0x00002b8ef4b25767 in inittime () from /usr/lib64/python2.4/lib-dynload/timemodule.so
No symbol table info available.
#5  0x00002b8ef269a02d in _PyImport_LoadDynamicModule () from /usr/lib64/libpython2.4.so.1.0
No symbol table info available.
#6  0x00002b8ef269853d in ?? () from /usr/lib64/libpython2.4.so.1.0
No symbol table info available.
#7  0x00002b8ef2698a5b in ?? () from /usr/lib64/libpython2.4.so.1.0
No symbol table info available.
#8  0x00002b8ef2698bc7 in PyImport_ImportModuleEx () from /usr/lib64/libpython2.4.so.1.0
No symbol table info available.
---Type <return> to continue, or q <return> to quit---
#9  0x00002b8ef26793a3 in ?? () from /usr/lib64/libpython2.4.so.1.0
No symbol table info available.
#10 0x00002b8ef26217e0 in PyObject_Call () from /usr/lib64/libpython2.4.so.1.0
No symbol table info available.
#11 0x00002b8ef267c32d in PyEval_CallObjectWithKeywords () from /usr/lib64/libpython2.4.so.1.0
No symbol table info available.
#12 0x00002b8ef267e00a in PyEval_EvalFrame () from /usr/lib64/libpython2.4.so.1.0
No symbol table info available.
#13 0x00002b8ef26826d5 in PyEval_EvalCodeEx () from /usr/lib64/libpython2.4.so.1.0
No symbol table info available.
#14 0x00002b8ef2682722 in PyEval_EvalCode () from /usr/lib64/libpython2.4.so.1.0
No symbol table info available.
#15 0x00002b8ef269702a in PyImport_ExecCodeModuleEx () from /usr/lib64/libpython2.4.so.1.0
No symbol table info available.
#16 0x00002b8ef269756c in ?? () from /usr/lib64/libpython2.4.so.1.0
No symbol table info available.
#17 0x00002b8ef269853d in ?? () from /usr/lib64/libpython2.4.so.1.0
No symbol table info available.
#18 0x00002b8ef26989bc in ?? () from /usr/lib64/libpython2.4.so.1.0
No symbol table info available.
#19 0x00002b8ef2698c01 in PyImport_ImportModuleEx () from /usr/lib64/libpython2.4.so.1.0
No symbol table info available.
#20 0x00002b8ef26793a3 in ?? () from /usr/lib64/libpython2.4.so.1.0
---Type <return> to continue, or q <return> to quit---
No symbol table info available.
#21 0x00002b8ef26217e0 in PyObject_Call () from /usr/lib64/libpython2.4.so.1.0
No symbol table info available.
#22 0x00002b8ef2622433 in PyObject_CallFunction () from /usr/lib64/libpython2.4.so.1.0
No symbol table info available.
#23 0x00002b8ef2698fd8 in PyImport_Import () from /usr/lib64/libpython2.4.so.1.0
No symbol table info available.
#24 0x00002b8ef2699185 in PyImport_ImportModule () from /usr/lib64/libpython2.4.so.1.0
No symbol table info available.
#25 0x00002b8ef23d3b71 in ?? () from /etc/httpd/modules/mod_python.so
No symbol table info available.
#26 0x00002b8ef23d403d in ?? () from /etc/httpd/modules/mod_python.so
No symbol table info available.
#27 0x00002b8ee72e869d in ?? () from /usr/lib64/libapr-1.so.0
No symbol table info available.
#28 0x00002b8ee72e8cce in apr_pool_destroy () from /usr/lib64/libapr-1.so.0
No symbol table info available.
#29 0x00002b8ee5a2bf0e in ?? ()
No symbol table info available.
#30 0x00002b8ee5a2c3bb in ?? ()
No symbol table info available.
#31 0x00002b8ee5a2c57a in ?? ()
No symbol table info available.
---Type <return> to continue, or q <return> to quit---
#32 0x00002b8ee5a2cddd in ap_mpm_run ()
No symbol table info available.
#33 0x00002b8ee5a06fd8 in main ()
No symbol table info available. 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:22:15.130

我的服务器团队通过重新编译 Apache 解决了这个问题

SSH /脚本/easyapache

它工作。

在此之前，我的网站是空白的

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T19:31:47.870

今天我发现我的问题的解决方案是因为 Python 模块。我删除了它，问题就消失了。

不知道是旧版还是什么，反正现在已经解决了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-23T20:30:14.300

检查您的 PHP-FPM 和 PHP 版本是否匹配。确保有一个（正确的）PHP-FPM 配置分别对应于您的 PHP 和 PHP-FPM 版本。

PHP-FPM (config in `/etc/php/7.0/fpm`) 和 PHP 版本可能在更新时不同步。更新的 PHP( `/etc/php/7.3/`) 可能会导致 apache 子段错误，因为`/etc/php/7.3/`.

另请参阅[apache error.log 中的“[notice] child pid XXXX exit signal Segmentation fault (11)”](https://stackoverflow.com/q/54841259/10050838)。

# android - 如何为android应用程序设置静态dpi

> ID：15142670
> 
> 赞同：-2
> 
> 时间：2013-02-28T18:15:25.873
> 
> 标签：android, dpi

我希望我的应用在任何设备上都以相同的方式显示视图。我想确定 PIXELS 中的大小。我可以做吗？我可以关闭那个 dpi 调整大小功能，或者为我的应用程序设置自定义 dpi 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:13:26.863

您可以使用“px”、“in”、“mm”等来指定绝对尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:48:32.380

使用“dp”（与密度无关的像素）进行所有坐标和测量。例如，如果您要指定布局的边距，它将是...

android:layout_margin="5dp"

使用 dp 将自动使您的布局适合任何屏幕尺寸。

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T18:49:41.227

DPI 是设备的像素密度。您无法更改设备的像素密度。同样，以像素定义所有内容也行不通，因为不同的设备在不同尺寸的屏幕上具有不同数量的像素。

我意识到这并不是你的真正意图，但这基本上就是你要问的。

Android 提供了相当多的功能，您可以利用这些功能来确保您的应用程序在所有屏幕上看起来都不错。您可以在 Android 开发者指南的[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)页面上了解它们。

如果您对如何获得特定布局或功能以在不同设备上工作有疑问，我鼓励您发布另一个问题，其中包含屏幕截图和代码，说明它没有达到您的期望。

# python - Eclipse 重新安装后找不到库

> ID：15142673
> 
> 赞同：1
> 
> 时间：2013-02-28T18:15:36.373
> 
> 标签：python, eclipse, google-app-engine, ide, reinstall

我不得不重新安装我的操作系统，现在我无法在 Eclipse IDE 上加载我的旧项目。起初它没有找到 GAE 源文件夹，因为它不在我创建项目时所在的同一位置，所以我只是将变量 $GOOGLE_APP_ENGINE 更改为它的实际位置。

但现在看来，在新版本的 GAE 源中，库文件夹的名称不同，Eclipse 找不到它们。

如何让 Eclipse 修改旧项目的信息，以便更新库文件夹名称？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:10:10.673

如果您使用的是 python，则需要在 Project -> Properties -> External Libraries 上设置正确的路径或编辑 .pydevproject 文件。我前几天做了，把找不到的换成下面的就行了。

```
<pydev_project>
....
<pydev_variables_property name="org.python.pydev.PROJECT_VARIABLE_SUBSTITUTION">
<key>GOOGLE_APP_ENGINE</key>
<value>/usr/Local/google_appengine</value>
</pydev_variables_property>
<pydev_pathproperty name="org.python.pydev.PROJECT_EXTERNAL_SOURCE_PATH">
<path>${GOOGLE_APP_ENGINE}/lib/antlr3</path>
<path>${GOOGLE_APP_ENGINE}/lib/enum</path>
<path>${GOOGLE_APP_ENGINE}/lib/fancy_urllib</path>
<path>${GOOGLE_APP_ENGINE}/lib/google-api-python-client</path>
<path>${GOOGLE_APP_ENGINE}/lib/graphy</path>
<path>${GOOGLE_APP_ENGINE}/lib/grizzled</path>
<path>${GOOGLE_APP_ENGINE}/lib/httplib2</path>
<path>${GOOGLE_APP_ENGINE}/lib/ipaddr</path>
<path>${GOOGLE_APP_ENGINE}/lib/oauth2</path>
<path>${GOOGLE_APP_ENGINE}/lib/prettytable</path>
<path>${GOOGLE_APP_ENGINE}/lib/protorpc</path>
<path>${GOOGLE_APP_ENGINE}/lib/python-gflags/tests</path>
<path>${GOOGLE_APP_ENGINE}/lib/simplejson</path>
<path>${GOOGLE_APP_ENGINE}/lib/sqlcmd</path>
<path>${GOOGLE_APP_ENGINE}/lib/yaml/lib</path>
<path>${GOOGLE_APP_ENGINE}/lib/django-1.4</path>
<path>${GOOGLE_APP_ENGINE}/lib/webapp2-2.5.2</path>
<path>${GOOGLE_APP_ENGINE}/lib/markupsafe-0.15</path>
<path>${GOOGLE_APP_ENGINE}/lib/jinja2-2.6</path>
<path>${GOOGLE_APP_ENGINE}/lib/webob-1.1.1</path>
<path>${GOOGLE_APP_ENGINE}</path>
</pydev_pathproperty>
</pydev_project> 
```

# java - 使 JRadioButton 不可点击

> ID：15142674
> 
> 赞同：1
> 
> 时间：2013-02-28T18:15:38.587
> 
> 标签：java, swing, jradiobutton

我想知道是否可以使 JRadioButton 不可点击？我已经在应用程序中实现了一些功能，但我仍然想显示尚未实现的功能的名称。用户从 JRadioGroup 中进行选择，所以我想将所有功能添加为单选按钮，然后使其中一些功能无法点击，但到目前为止我还无法弄清楚如何操作。

问候杰斯珀

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T18:23:23.687

使用以下代码禁用 JRadioButton

示例代码

```
 JRadioButton butt = new JRadioButton( "Button 1: " );
    butt.setEnabled( false ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T18:21:07.730

尝试使用：[`setEnabled`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/AbstractButton.html#setEnabled%28boolean%29)

这可以启用/禁用任何组件。

# php - 通过与 PHP 的相关性对结果进行排序

> ID：15142676
> 
> 赞同：0
> 
> 时间：2013-02-28T18:15:47.917
> 
> 标签：php, arrays, sorting, text

我有一个搜索引擎，根据用户输入的内容，按 viewCount、uploadDate 和 rating 的顺序显示数组中的元素，但相关性让我很恼火；我不知道从哪里开始。

首先，从多个 xml/json 提要中检索数据。

```
 $url1 = "http://api.site1.com/?q=$userinput";
 $url2 = "http://api.site2.com/?q=$userinput";
 $url3 = "http://api.site3.com/?q=$userinput";

 //get_and_decode is a function that gets and decodes data from the xml/json feed
 get_and_decode($url1);
 get_and_decode($url2);
 get_and_decode($url3); 
```

其次，所有数据都存储在一个数组中。

最后，数组中的元素会显示给用户，并按查看次数、上传日期或评分排序。

有人可以指出我正确的方向吗？我正在尝试学习如何计算相关性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:25:57.140

您的问题与特定的编程语言无关，更确切地说与所使用的算法有关。首先，尝试确定一个好的算法来将相关性表示为一个数字。例如，您可以尝试从[排名](http://www.lextek.com/manuals/onix/ranking.html)或[相关性](http://www.google.com/enterprise/relevancy.html)开始。

# python - Python - 未能更新 90% 的行

> ID：15142678
> 
> 赞同：1
> 
> 时间：2013-02-28T18:15:51.303
> 
> 标签：python, mysql

```
cur.execute("""SELECT match_own_goals.game_id, home_team, away_team, team, time 
                 FROM football.match_own_goals 
                 JOIN football.match_info 
                 ON match_own_goals.game_id = match_info.game_id""")
e = cur.fetchall()

for game in e:
    print game
    time = game[4]
    print type(time)
    if game[3] == 1:
        team_id = game[1]
    else:
        team_id = game[2]
    cur.execute("""UPDATE football.match_own_goals 
                   SET team_id = %s 
                   WHERE time = %s AND game_id = %s""", (team_id, time, game[0]))
db.commit() 
```

这已经更新了大约 10% 的行，不知道为什么。时间实际上是一个浮点数（它不代表时间，更多的是足球比赛中的一个时间点，例如 87 分钟、54 分钟）。

时间绝对是问题，因为当我删除它时它工作正常，但我真的需要它在那里用于其他表。

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:18:51.300

`time = %s`这绝对是一个问题（您无法正确比较浮点数和方程式运算符，请[在此处](http://dev.mysql.com/doc/refman/5.0/en/problems-with-float.html)阅读更多相关信息）。

# c++ - 是否可以创建在 DLL 中定义的静态成员函数的线程？

> ID：15142681
> 
> 赞同：0
> 
> 时间：2013-02-28T18:16:12.253
> 
> 标签：c++, windows, multithreading, class, dll

假设我有以下用于 DLL 的 .h 和 .cpp 文件：

* * *

`.h`

```
#ifdef BLAH_EXPORTS
#define BLAH_API __declspec(dllexport)
#else
#define BLAH_API __declspec(dllimport)
#endif

class BLAH_API MyClass
{
public:
    static void SomeFunction();
}; 
```

* * *

`.cpp`

```
#include ".h" //you get the picture

void MyClass::SomeFunction()
{
    //blah blah blah
} 
```

* * *

现在将此 DLL 的 .dll 和 .lib 导入另一个程序。

**是否可以创建 MyClass::SomeFunction() 的线程，因为它隐藏在 DLL 中？**

# networking - NS2 安装

> ID：15142683
> 
> 赞同：0
> 
> 时间：2013-02-28T18:16:13.440
> 
> 标签：networking, cygwin, ns2

我想询问有关在 Windows 上安装 NS2 的问题，我为此使用了 cygwin。我已经正确安装了 cygwin，但是当我尝试安装 NS2 时出现问题：创建 Makefile

```
creating dltest/Makefile
sed: can't read ./dltest/Makefile.in: No such file or directory
creating tclConfig.sh
make: *** No rule to make target `/home/me/ns-allinone-2.28/tcl8.4.5/unix/dltest/Makefile.in', needed by `Makefile'.  Stop.
tcl8.4.5 make failed! Exiting ...
For problems with Tcl/Tk see http://www.scriptics.com 
```

我用谷歌搜索了这个问题，但没有找到有用的结果。请我为这个问题寻求帮助。谢谢大家，我很抱歉我的英语......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-26T05:18:57.927

使用 VMware 在 Windows 中安装 ns2 的最佳方法。您可以为此使用 oracle VMware，然后在 VM 上安装 ubundu，最后在其中安装 ns2，它非常简单且更有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-10T09:53:57.443

确保您已安装所有必需的软件包：mingw-w32api、gcc4、gcc4-g++、w32api、perl、xorg-servers、xinit、libx11-devel、libXmu-devel

# django - 多用户实例使用 django 从一个系统同时记录

> ID：15142687
> 
> 赞同：0
> 
> 时间：2013-02-28T18:16:35.960
> 
> 标签：django, logging, django-models, django-views, django-users

我是 django 的新手，在该领域的经验非常有限，所以我想你可以帮助我。

我正在尝试构建一个患者健康记录 (PHR) 系统，其中有两种类型的用户 Owner 和 Doctor ，它们都是 User 类的实例。我想创建一个医生登录的应用程序，用户必须输入他的凭据才能允许医生向他的 PHR 添加一个条目。

如果您能帮助我处理带有用于身份验证的模型和视图的双重日志记录部分，我将非常高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:48:54.140

您可以使用 Django 1.5 的新可配置用户模型来完成此操作。[您可以在此处](https://docs.djangoproject.com/en/dev/releases/1.5/#configurable-user-model)查看文档。

为了给您一个总体思路，您可以扩展您的用户模型`AbstractUser`并添加其他字段以创建医生和患者之间的链接关系。如果患者只能有一个医生，而一个医生可以有很多患者，则可以使用 ForeignKey 关系；如果患者可以有很多医生，则可以使用多对多关系。我下面的例子是使用 ForeignKey：

```
class PHRUser(AbstractUser):
    phr_relate = models.ForeignKey(settings.AUTH_USER_MODEL, null=True, blank=True)
    token = models.EmailField(null=True, blank=True)
    USER_CHOICES = (
        ('1', 'Doctor'),
        ('2', 'Patient')
    )
    user_type = models.CharField(choices=USER_CHOICES, max_length=10) 
```

然后在您的注册中，您可以实现以下内容：

```
def UserRegistration(request):
    if request.method == 'POST':
        form = UserCreateForm(request.POST)
        if form.is_valid():
            data = request.POST.copy()
            # if user that is registering is a doctor, token is their own email. otherwise their token is their doctor's email and
            # their relation is their doctor
            if data.__getitem__('user_type') == '1':
                data.__setitem__('token', data.__getitem__('email'))
            else:
                doctor = PHRUser.objects.get(email=data.__getitem__('token'))
                data.__setitem__('phr_relate', staker.id)
                data.__setitem__('token', '')
            new_user = form.save(data)
        return HttpResponseRedirect('/') 
```

然后在您的视图中，您可以实现一个实用功能，例如：

```
def user_relation(request, owner):
    if (request.user.email == owner.email) or (request.user.email == owner.token):
        return True 
```

传入记录所有者的用户对象 as `owner`，函数将：

*   如果登录的用户是医生并且他们正在尝试查看授权的患者记录，则返回 True
*   如果登录用户是患者并且他们正在尝试查看自己的记录，则返回 True
*   否则返回 False

你可以使用这个函数来检查你应该在你的视图中为这个请求显示什么。

您可能需要进行一些修改才能使您的实现正确，但这应该可以帮助您入门。

# node.js - varnish、nginx 和 node.js：带有 node.js 后备的静态 nginx html 页面

> ID：15142692
> 
> 赞同：0
> 
> 时间：2013-02-28T18:16:56.427
> 
> 标签：node.js, nginx, varnish

我在 nginx 前面的 EC2 上运行 varnish，它路由到 node.js。

我想要的是通过 nginx 从某些路由（例如`/`for `index.html`）提供特定的静态 HTML 页面，但所有其他路由都由 node.js 处理。

例如，`/`将由 nginx 以静态 HTML 页面的形式发送，而任何不匹配的内容，例如`/dynamic_stuff`or `/dynamic_stuff2`，将由 node.js 处理。

在其他在线线程中，其他人将 node.js 完全放在单独的目录中，`/node/dynamic_stuff`但我不想为我的路由设置单独的目录。

现在我已经`/`像其他所有东西一样由 node.js 提供服务，但如果我只是测试我的 node.js 服务器并将其关闭，我想`/`回退到`index.html`. 在这种情况下，如果我的 node.js 服务器被关闭，那么我会得到一个 502 Bad Gateway。

我不太担心通过 nginx 与 node.js 提供文件的性能，我只是想如果 node.js 由于某种原因出现故障，我想让 nginx 处理基本页面。

相关脚本：

```
location = / {
    index index.html
    root /path/to/public
    try_files $uri $uri/ index.html;
}

location / {
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_set_header X-NginX-Proxy true;
    proxy_pass node_js;
} 
```

如果我使用上面的代码，所有请求仍会发送到 node.js，包括`/`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:26:35.797

如果只是 index.html，我认为最简单的方法是将 index 设置为

```
index index.html
root /path/to/public 
```

现在应该从 nginx 提供公共目录中的所有文件。

现在把这个 index.html 放在你的节点应用程序的公共目录中。其余的将从 nginx 代理到节点实例。

当然，如果需要，您可以简单地将其他静态 html 放在子目录中：

```
public/about(index.html
public/faq/index.html
... 
```

# iphone - 转到背景时强制返回给定视图

> ID：15142702
> 
> 赞同：0
> 
> 时间：2013-02-28T18:17:39.083
> 
> 标签：iphone

我的应用程序有一个初始视图询问密码，当密码有效时，通过 segue 进入视图控制器。

当应用程序移到后台时，我想强制返回到初始视图。

我猜想必须将相应的代码插入到 app delagate applicationWillResignActive 方法中，但是经过大量尝试后，我找不到合适的代码。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:07:35.887

您需要确保您的控制器嵌入在导航控制器中，然后只需使用

```
popToRootViewControllerAnimated: 
```

如果目标控制器是第一个控制器，或者

```
popToViewController:animated: 
```

如果目标视图控制器不是第一个。两种方法都被调用`self.navigationController`。

# javascript - parent.opener 在 webview Android 中不起作用

> ID：15142707
> 
> 赞同：1
> 
> 时间：2013-02-28T18:17:55.500
> 
> 标签：javascript, android, webview, parent

我有个问题。`Url`我需要从在 Android 中打开的 Frame返回父级`Webview`。

`Webview`顺序是：在新框架内打开。选择框架选项和参数。调用框架`javascript`函数，如 _"javascript: *parent.opener.jsfunction* "_. 父 Web 无法打开...我无法访问 Web。我只在 Android 方面工作。

我在适用于 Android 的 Firefox 中测试 Web 并且可以正常工作。

需要帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:57:05.977

默认情况下，`WebView`不支持多个窗口。如果您检查，我相信该`parent`字段实际上没有设置并且不指向父窗口（或任何东西）。这同样适用于其他类似字段，如`opener`和`top`。

您可以通过[启用对多个窗口](http://developer.android.com/reference/android/webkit/WebSettings.html#setSupportMultipleWindows%28boolean%29)的支持然后[`onCreateWindow`](http://developer.android.com/reference/android/webkit/WebChromeClient.html#onCreateWindow%28android.webkit.WebView,%20boolean,%20boolean,%20android.os.Message%29)在您的`WebChromeClient`. 我认为你还需要做一些事情，但已经有一段时间了，我不记得细节了。

我过去解决这个问题的一种方法是使用[setJavascriptInterface](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29)并将名称设置为`parent`您想要的任何字段。根据需要在您的 Java 对象上实施适当的方法。这可能会有点混乱，但它确实有效。

# scala - 为什么 Buffer 不是 IndexedSeq 的子类？

> ID：15142708
> 
> 赞同：2
> 
> 时间：2013-02-28T18:17:57.097
> 
> 标签：scala, scala-collections

在 scala 集合库中`Buffer`继承自`Seq`：

```
Buffer[A] extends Seq[A] with GenericTraversableTemplate[A, Buffer] with BufferLike[A, Buffer[A]] with scala.Cloneable 
```

并且`Buffer`文档说：

> 缓冲区用于通过追加、前置或插入新元素来增量创建元素序列。也可以通过当前序列中元素的索引以**随机访问方式访问和修改元素。**

而`IndexedSeq`文档说：

> 索引序列的基本特征。
> 
> 索引序列支持恒定时间或接近恒定时间的元素访问和长度计算。它们是根据抽象方法定义的，适用于索引和长度。
> 
> 索引序列不会向 Seq 添加任何新方法，但承诺有效实现随机访问模式。

由于`Buffer`已经扩展`Seq`并且`IndexedSeq`没有向`Seq` Buffer 添加任何方法，因此必须已经实现了`IndexedSeq`接口，并且根据文档，它应该满足`IndexedSeq`. 那么为什么`Buffer`不是`IndexedSeq`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T18:25:21.120

`Buffer`不是`IndexedSeq`因为它不能保证接近恒定时间的元素访问和长度计算。例如，`ListBuffer`两者都不支持，正如您在[Scala 集合的性能特征的描述中](http://docs.scala-lang.org/overviews/collections/performance-characteristics.html)看到的那样。

# asp.net - 什么情况下会清除“Temporary ASP.Net Files 文件夹”？

> ID：15142712
> 
> 赞同：4
> 
> 时间：2013-02-28T18:18:09.070
> 
> 标签：asp.net, performance, webforms

我正在尝试调试我们的 ASP.Net 应用程序中的一个问题，其中第一页访问可能需要长达五分钟。这个站点运行在.Net 3.5 中，有100 个ascx 控件和25 个aspx 页面，所以它并不小。

我注意到的是，当站点加载速度非常慢时，临时 ASP.Net 文件夹正在重新填充。完全加载并运行该文件夹的总大小约为 50 到 70 MB，其中包含 2000-3000 个文件。

我对如何以及何时清除该文件夹感到有些困惑？使用空文件夹从头开始加载该站点需要 5 分钟。但是在定期重新编译时，可能会更改一两个文件，该站点会在重建后 30 秒内出现。

我不明白的是文件夹何时被清除——有时即使我在解决方案上运行干净并重建所有内容，并为很好的措施投入了 iisreset 和 web.config 更改，该文件夹的数量几乎相同网站重新加载时的文件数量与以前一样，只需 30 秒即可启动。（我们在 web.config 中使用了 'optimizeCompilations' 标志）

其他时候，在我无法解释的其他构建情况下，我们回到了 5 分钟的加载时间，因为文件夹完全重建了自己。

这个文件夹什么时候被清除，当它需要从头开始时，我能做些什么来加快它的重新填充时间？（5 分钟 70 兆似乎有点慢？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:00:03.307

您确定您在启动时没有做任何令人神往的事情，例如预编译整个站点吗？

在您的代码库中搜索如下内容：

aspnet_compiler -p

还要检查你的 global.asax 文件，看看你在启动时做了什么？

# c++ - 无法使用自定义比较器功能对列表进行排序

> ID：15142716
> 
> 赞同：0
> 
> 时间：2013-02-28T18:18:23.203
> 
> 标签：c++, list, sorting

当我尝试使用自定义比较器对成分进行排序时，出现此编译器错误。

```
kitchen.cpp: In member function ‘void Kitchen::printContents(std::ofstream&)’:
kitchen.cpp:172: error: no matching function for call to ‘std::list<Ingredient, std::allocator<Ingredient> >::sort(<unresolved overloaded function type>)’
/usr/include/c++/4.2.1/bits/list.tcc:271: note: candidates are: void std::list<_Tp, _Alloc>::sort() [with _Tp = Ingredient, _Alloc = std::allocator<Ingredient>]
/usr/include/c++/4.2.1/bits/list.tcc:348: note:                 void std::list<_Tp, _Alloc>::sort(_StrictWeakOrdering) [with _StrictWeakOrdering = bool (Kitchen::*)(const Ingredient&, const Ingredient&), _Tp = Ingredient, _Alloc = std::allocator<Ingredient>] 
```

这是导致它的代码：

```
bool sortFunction(const Ingredient a, const Ingredient b)
{
    if (a.getQuantity() < b.getQuantity())
        return true;
    else if (a.getQuantity() == b.getQuantity())
    {
        if (a.getName() < b.getName()) return true;
        else return false;
    }
    else return false;
}

void Kitchen::printContents(std::ofstream &ostr)
{
    ostr << "In the kitchen: " << std::endl;

    ingredients.sort(sortFunction);

    std::list<Ingredient>::iterator itr;
    for (itr = ingredients.begin(); itr != ingredients.end(); ++itr)
    {
        ostr << std::setw(3) << std::right << itr->getQuantity() << " " 
        << itr->getName() << std::endl;

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:22:11.373

可能有另一个`sortFunction`地方（例如 in `Kitchen`）导致上述错误。

尝试

```
ingredients.sort(::sortFunction); 
```

类似于[这个问题](https://stackoverflow.com/questions/7531866/unresolved-overloaded-function-type-c)。

此外，为了获得良好的编码习惯，您可能需要更改

```
bool sortFunction(const Ingredient a, const Ingredient b) 
```

至

```
bool sortFunction(const Ingredient &a, const Ingredient &b) 
```

第一个是传递对象的副本，第二个只是传递对它的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T18:27:02.907

看起来您在 Kicthen 中有一个名为 sortFunction 的方法，编译器无法选择合适的方法。你可以试试这个：

```
list.sort( ::sortFunction ); 
```

要解决它，或者如果您提供的功能假设是 Kitchen 类的方法，您需要修复它。

顺便提一句：

```
if (a.getName() < b.getName()) return true;
else return false; 
```

是相同的：

```
return a.getName() < b.getName(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T18:31:47.943

我的猜测是你声明了一个成员函数`Kitchen::sortFunction`。在另一个成员函数（例如`printContents`）中，将隐藏您要使用的非成员函数。

错误消息表明是这种情况；它正在尝试`sort`为成员函数类型实例化`bool (Kitchen::*)(const Ingredient&, const Ingredient&)`。

如果成员函数不应该存在，则删除声明。如果是，则重命名其中一个函数，或将非成员函数称为`::sortFunction`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T18:42:09.263

您的排序功能是：

```
bool sortFunction(const Ingredient a, const Ingredient b) 
```

但它可能应该是：

```
bool sortFunction(const Ingredient &a, const Ingredient &b) 
```

（注意参考文献）

此外，正如已经提到的，您的 Kitchen 类已经有一个名为 sortFunction() 的函数并且它具有优先权，因此请使用 ::sortFunction() 或为每个函数指定一个唯一且更具描述性的名称。

如果 Kitchen::sortFunction()*是*您想要的，它需要是一个静态成员函数。

# python - 连接被拒绝 FTP python 2.7

> ID：15142717
> 
> 赞同：1
> 
> 时间：2013-02-28T18:18:27.550
> 
> 标签：python

我正在使用 ftplib 模块并想在我的本地主机上连接到 FTP。我正在使用以下代码示例：

```
import ftplib
f = ftplib.FTP()
f.connect("localhost")
f.login()

ls=[]
f.retrlines('MLSD',ls.append)
for entry in ls:
    print entry 
```

它给了我一个`socket.error: [Errno 61] Connection refused`

我如何连接到我的本地主机，我做错了什么？最终，我想使用 ftplib 将文件从客户端代码发送到服务器代码，两者都在同一台机器上运行。这是一个项目，我知道实际上你不会在同一台机器上同时拥有两者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:24:33.520

我猜 socket.error 异常发生在第 3 行，你有`connect()`.

`Connection refused`表示操作系统或防火墙拒绝了连接。最可能的原因是您的本地计算机上实际上没有运行 FTP 服务器。

你没有说你是否这样做，你也没有说你正在使用什么操作系统。但默认情况下，操作系统没有安装和运行 FTP 服务器。所以你需要安装一个[兼容的FTP服务器](http://en.wikipedia.org/wiki/List_of_FTP_server_software)。[FileZilla](http://filezilla-project.org/) Server是一个值得考虑的好方法。

# macos - OS X 10.8、llvm、带有 CMake 的 OpenMP

> ID：15142725
> 
> 赞同：7
> 
> 时间：2013-02-28T18:18:50.003
> 
> 标签：macos, gcc, llvm, openmp

我刚刚升级到 OS X 10.8 “Mountain Lion”，我开始后悔这样做了。

我不再能够构建使用 OpenMP 的（简单）并行代码。

通过到处查看，我了解到 Apple 不再使用“gcc”而是“llvm”——很可能是由于与许可证相关的问题。不幸的是，'llvm' 不（还？）支持 OpenMP。

我不敢相信许多基于 OpenMP 的程序将不再在 OS X 上运行，所以我的问题是：如何在 Mountain Lion 中启用 OpenMP？

* * *

在阅读了 Hristo Iliev 的出色回答后，我想我错过的比我最初想象的要多。

我没有使用 XCode。该建筑基于 CMake 和 make/gcc。昨天我通过 macports 安装了 gcc 4.2，但是 - 截至今天 - 我的代码仍然是源代码形式，因为 - 由于一些奇怪的原因 - 我无法将编译切换到 gcc（与 OpenMP 相关的相同错误）。

现在的问题是 CMake 一直在使用 llvm 编译器。在根 CMakeLists.txt 我添加了以下两行：

```
set(CMAKE_C_COMPILER "/opt/local/bin/gcc-apple-4.2")  
set(CMAKE_CXX_COMPILER "/opt/local/bin/gcc-apple-4.2") 
```

我还添加了两个环境变量：

```
export CXX=/opt/local/bin/gcc-apple-4.2
export CC=/opt/local/bin/gcc-apple-4.2 
```

当 CMake 尝试查找 OpenMP ( FIND_PACKAGE(OpenMP) ) 时，我得到以下输出：

```
-- The compiler is /opt/local/bin/gcc-apple-4.2
-- Try OpenMP C flag = [-fopenmp]
-- Performing Test OpenMP_FLAG_DETECTED
-- Performing Test OpenMP_FLAG_DETECTED - Failed
[...]
CMake Error at /opt/local/share/cmake-2.8/Modules/FindPackageHandleStandardArgs.cmake:97 (message):
Could NOT find OpenMP (missing: OpenMP_C_FLAGS OpenMP_CXX_FLAGS)
Call Stack (most recent call first):
/opt/local/share/cmake-2.8/Modules/FindPackageHandleStandardArgs.cmake:291    (_FPHSA_FAILURE_MESSAGE)
/opt/local/share/cmake-2.8/Modules/FindOpenMP.cmake:159 (find_package_handle_standard_args)
demo/CMakeLists.txt:8 (FIND_PACKAGE) 
```

我尝试`/opt/local/bin/gcc-apple-4.2`手动运行，但由于缺少 libgomp 而失败。

问候

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T20:59:36.853

LLVM 是 Apple 在 OS X 中广泛使用的编译器框架（尤其是在 OpenGL 实现中），而不是编译器本身。Xcode 中有两个可用的 LLVM 前端——旧的基于 GCC 的前端`llvm-gcc`（支持 OpenMP 2.5）和新的`clang`（不支持 OpenMP）。`clang`具有广泛的静态代码分析功能和更好的错误报告，尤其是 C++ 代码。这主要是 Apple 投资它并远离 GCC 的原因（另一方面，FreeBSD 项目出于纯粹与许可证相关的原因，正在寻求用 clang 替换 GCC）。有一个正在进行的项目`clomp`（不要与英特尔的 Cluster OpenMP 混淆）试图创建一个支持 OpenMP 的版本`clang`，但它还远未成熟。

如果您不需要像显式任务这样的新 OpenMP 结构并且可以忍受一些[错误](https://stackoverflow.com/questions/12932107/compilation-fails-with-openmp-on-mac-os-x-lion-memcpy-and-sse-intrinsics)，您仍然可以使用旧的 GCC 前端。只需将项目设置中的编译器套件切换到 LLVM GCC 4.2：

![编译器套件选择器](../Images/fa3d830d27d54b51b41048f2bb4fc3fa.png)

这个基于真正古老的 GCC 4.2.1，似乎不再开发。如果您需要更新版本的 GCC，只需[构建一个](http://solarianprogrammer.com/2012/07/21/compiling-gcc-4-7-1-mac-osx-lion/). 不幸的是，我无法为您提供有关如何将其集成到 Xcode 中的信息。它适用于我在 GCC 4.7.1 和 OS X 10.8.2 的命令行上（而且我不太使用 Xcode）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T05:59:32.800

只需在 Hristo 的优秀答案中添加几句话：您可以通过 MacPorts 安装 gcc。这比手动编译所有东西要简单得多（并且由于依赖关系等原因，从头开始编译 gcc 可能真的很重要）。

所以，安装 MacPorts，执行“sudo port install gcc47”，等待几个小时，你会得到 gcc-mp-4.7，它能够编译你的 OpenMP 代码。

# jquery - IE 使用 Bootstrap 手风琴报告未定义的位置。为什么？

> ID：15142728
> 
> 赞同：1
> 
> 时间：2013-02-28T18:18:53.837
> 
> 标签：jquery, internet-explorer, twitter-bootstrap, accordion

我在一个用 Bootstrap 构建的网站上有一堆手风琴。我正在尝试添加一种行为，一旦手风琴折叠完成，页面将滚动到打开的面板。它适用于除 IE 之外的所有浏览器（当然！）。这是我写的函数：

```
$('.accordion').on('hidden', function() {
    $('.accordion .current').removeClass('current');
    $(this).find('.in').prev().find('a').addClass('current');
    $('html,body').animate({'scrollTop':$('.accordion-toggle.current').position().top},500);
}) 
```

IE 表示新创建的“当前”项目的 position() 属性未定义。我知道该对象在那里，因为我在 $('.current') 上运行了一个警报，它报告了 [object Object]，但它似乎无法找到它的位置。和这个函数的执行队列有关系吗？它是在寻找一个还不存在的物体的位置吗？我在这里扯头发！

**HTML：**

```
<div id="accordion" class="accordion"> 
    <div class="accordion-group"> 
        <div class="accordion-heading"> 
            <a class="accordion-toggle" href="#collapseOne" data-parent="#accordion" data-toggle="collapse">Panel 1</a>
        </div> 
        <div id="collapseOne" class="accordion-body collapse"> 
            <div class="accordion-inner"> 
            <!-- Content goes here --> 
            </div> 
        </div> 
   </div> 
</div> 
```

@克里斯·霍勒贝克...

我希望它滚动到当前打开的窗格。Bootstrap 中没有自动提供该功能。它不会将类添加到标题中，而是添加到其下方的窗格中。我也希望标题在窗口中可见。我可能做错了，但这就是我正在尝试做的事情，并且冒着重复自己的风险，它适用于除 IE 之外的所有其他浏览器。

[这是一个小提琴，它显示了我正在尝试做的事情](http://jsfiddle.net/9R97A/)。在 IE 中运行它，你会发现它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:22:16.413

问题是这里的这部分。

```
$(this).find('.in').prev().find('a').addClass('current'); 
```

它不起作用的原因是因为`.prev()`在 IE 中不起作用。因此，它无法识别您正在使用的选择器`scrollTop`：

这就是您收到此错误的原因。

```
SCRIPT5007: Unable to get value of the property 'top': object is null or undefined 
```

[http://bugs.jquery.com/ticket/2590](http://bugs.jquery.com/ticket/2590)

这个错误很老了，但它被设置为不会修复，所以我假设他们从未修复它。

我的建议是找到一种不同的方式来获取该选择器。我个人会为父容器设置一个类`accordion-heading`。

就像是：

```
$('.accordion-toggle').click(function(){
   $(this).parent('.accordion-heading').addClass('open');
}); 
```

然后使用：

```
 $('html,body').animate({'scrollTop':$('.accordion-heading.open').position().top},500); 
```

# mysql - 多个左连接的值不正确（MySQL）

> ID：15142732
> 
> 赞同：0
> 
> 时间：2013-02-28T18:19:08.667
> 
> 标签：mysql

我正在尝试做一个报告。它应该给我一份特定客户的机器清单以及投入该机器的时间和材料的总和。

在下面的例子中，我选择了不同领域的材料和时间的总和，以使问题更清楚。但我真的想把材料加起来一个小时，然后按机器字段对它们进行分组。

我可以毫无问题地查询机器列表和工时成本。

```
SELECT CONCAT(`customer`.`PREFIX`, `wo`.`machine_id`) AS `machine`, 
       ROUND(COALESCE(SUM(`wohours`.`length` * `wohours`.`price`), 0), 2) AS `hours`

FROM `wo`
JOIN `customer` ON `customer`.`id`=`wo`.`customer_id`
LEFT JOIN `wohours` ON `wohours`.`wo_id`=`wo`.`id` AND `wohours`.`wo_customer_id`=`wo`.`customer_id` 
                    AND `wohours`.`wo_machine_id`=`wo`.`machine_id` AND `wohours`.`date`>=(CURDATE() - INTERVAL DAY(CURDATE() - INTERVAL 1 DAY) DAY) - INTERVAL 11 MONTH

WHERE `wo`.`customer_id`=1
GROUP BY `wo`.`machine_id`; 
```

这给了我几个小时的正确值。但是当我添加这样的材料时：

```
SELECT CONCAT(`customer`.`PREFIX`, `wo`.`machine_id`) AS `machine`, 
       ROUND(COALESCE(SUM(`wohours`.`length` * `wohours`.`price`), 0), 2) AS `hours`,
       ROUND(COALESCE(SUM(`womaterial`.`multiplier` * `womaterial`.`price`), 0), 2) AS `material`

FROM `wo`
JOIN `customer` ON `customer`.`id`=`wo`.`customer_id`
LEFT JOIN `wohours` ON `wohours`.`wo_id`=`wo`.`id` AND `wohours`.`wo_customer_id`=`wo`.`customer_id` 
           AND `wohours`.`wo_machine_id`=`wo`.`machine_id` AND `wohours`.`date`>=(CURDATE() - INTERVAL DAY(CURDATE() - INTERVAL 1 DAY) DAY) - INTERVAL 11 MONTH
LEFT JOIN `womaterial` ON `womaterial`.`wo_id`=`wo`.`id` AND `womaterial`.`wo_customer_id`=`wo`.`customer_id` 
           AND `womaterial`.`wo_machine_id`=`wo`.`machine_id` AND `wohours`.`date`>=(CURDATE() - INTERVAL DAY(CURDATE() - INTERVAL 1 DAY) DAY) - INTERVAL 11 MONTH

WHERE `wo`.`customer_id`=1
GROUP BY `wo`.`machine_id`; 
```

那么小时和材料值都不正确。

我读过其他线程，有类似问题的人可以通过将其拆分为多个查询或子查询来解决此问题。但我认为在这种情况下这是不可能的。

任何帮助表示赞赏。

//约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:19:28.017

您的其他阅读是正确的。您需要将它们放入自己的“子查询”中以进行连接。您可能获得无效值的原因是材料表每台机器有多个记录，因此导致原始基于小时的笛卡尔结果。而且您不知道哪个有很多而不是只有一个，这使它看起来不正确。

所以，我已经写了，每个用于预聚合 woHours 和 woMaterial 的最内层查询都会为每个“wo_id 和 machine_id”生成一条记录，以便在完成后连接回 wo 表。这些查询中的每一个都具有您尝试为其运行的单个客户 ID 的条件。

然后，当重新加入工作订单 (wo) 表时，它会抓取所有记录并应用 ROUND() 和 COALESCE()，以防不存在此类时间或材料。所以这是类似的回归

```
WO    Machine ID    Machine   Hours   Material
1     1             CustX 1   2       0
2     4             CustY 4   2.5     6.5
3     4             CustY 4   1.2     .5
4     1             CustX 1   1.5     1.2 
```

最后，您现在可以将所有这些条目的 SUM() 汇总到每个机器 ID 的一行中

```
Machine   Hours   Material
CustX 1   3.5     1.2
CustY 4   3.7     7.0

SELECT
      AllWO.Machine,
      SUM( AllWO.Hours ) Hours,
      SUM( AllWO.Material ) Material
   from
      ( SELECT
              wo.wo_id,
              wo.Machine_ID, 
              CONCAT(customer.PREFIX, wo.machine_id) AS machine, 
              ROUND( COALESCE( PreSumHours.MachineHours, 0), 2) AS hours,
              ROUND( COALESCE( PreSumMaterial.materialHours, 0), 2) AS material
           FROM 
              wo
                 JOIN customer 
                    ON wo.customer_id = customer.id

                 LEFT JOIN ( select wohours.wo_id,
                                    wohours.wo_machine_id,
                                    SUM( wohours.length * wohours.price ) as machinehours
                                from
                                   wohours 
                                where
                                       wohours.wo_customer_id = 1
                                   AND wohours.date >= ( CURDATE() - INTERVAL DAY( CURDATE() - INTERVAL 1 DAY) DAY) - INTERVAL 11 MONTH
                                group by
                                   wohours.wo_id,
                                   wohours.wo_machine_id ) as PreSumHours
                    ON wo.id = PreSumHours.wo_id 
                    AND wo.machine_id = PreSumHours.wo_machine_id 

                 LEFT JOIN ( select womaterial.wo_id,
                                    womaterial.wo_machine_id,
                                    SUM( womaterial.length * womaterial.price ) as materialHours
                                from
                                   womaterial
                                where
                                       womaterial.wo_customer_id = 1
                                   AND womaterial.date >= ( CURDATE() - INTERVAL DAY( CURDATE() - INTERVAL 1 DAY) DAY) - INTERVAL 11 MONTH
                                group by
                                   womaterial.wo_id,
                                   womaterial.wo_machine_id ) as PreSumMaterial
                    ON wo.id = PreSumMaterial.wo_id 
                    AND wo.machine_id = PreSumMaterial.wo_machine_id 
           WHERE 
              wo.customer_id = 1 ) AllWO
   group by
      AllWO.Machine_ID 
```

# visual-studio-2010 - ASP.NET MVC 4 开发：什么是正确的工具选择？

> ID：15142734
> 
> 赞同：1
> 
> 时间：2013-02-28T18:19:11.750
> 
> 标签：visual-studio-2010, asp.net-mvc-4

我将开始一些 ASP.NET MVC4 开发，有可能将 MVC4 部分混合到我们现有的大型 ASP 和 ASP.NET（Web 窗体）应用程序中。我们的小团队目前使用 Visual Studio 2010（我们订阅了 MSDN），开发机器是 Windows 7，测试机器是 MS Windows Server 2003 R2，生产托管在 MS Windows Server 2008 R2 上。

1.  是否可以在这样的环境中开发和托管 MVC4 页面？
2.  我可以在 Visual Studio 2010 上安装 MVC4 吗？
3.  如果我必须迁移到 VS 2012，是否可以通过我们的 Team Foundation Server 与坐在 VS 2010 上的其他团队共享项目？
4.  我可以在同一台机器上同时使用 VS 2010 和 VS 2012 吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:23:30.490

1.  是的，mvc4 甚至应该在 iis6 上运行[http://haacked.com/archive/2010/12/22/asp-net-mvc-3-extensionless-urls-on-iis-6.aspx](http://haacked.com/archive/2010/12/22/asp-net-mvc-3-extensionless-urls-on-iis-6.aspx)
2.  是[http://www.asp.net/mvc/mvc4](http://www.asp.net/mvc/mvc4)（见安装部分）
3.  没必要。并且 vs2012 将升级您的项目文件，但它应该与 vs2010sp1 兼容（条件适用）[http://blogs.msdn.com/b/visualstudio/archive/2012/03/28/round-tripping-with-visual-studio- 11.aspx](http://blogs.msdn.com/b/visualstudio/archive/2012/03/28/round-tripping-with-visual-studio-11.aspx)
4.  是的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:23:30.390

1.  是的，有可能
2.  [是的，您可以在 Visual 2010 http://www.asp.net/mvc/mvc4](http://www.asp.net/mvc/mvc4)中毫无问题地安装 MVC4
3.  如果您不想迁移，则无需迁移。
4.  是的，我已经在我的电脑上安装了这两个，并且都可以正常工作。

# css - 在 css 文件中查找重复的十六进制值的正则表达式

> ID：15142735
> 
> 赞同：0
> 
> 时间：2013-02-28T18:19:15.480
> 
> 标签：css, regex, colors, hex

我有大量的 CSS 文件，我从中提取了十六进制颜色值。我现在想做的是去掉uniq找不到的任何重复项。例如，我有：

```
#ccc
#cccccc
#eee
#eeeeee 
```

我想做的是对文件运行正则表达式以识别 #cccccc 和 #eeeeee （或任何其他类似）字符串，删除最后三个字符，然后我可以对它们运行 uniq 以删除新的重复项.

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:25:43.130

你可以匹配（确保它不区分大小写）：

```
#([\da-f])\1([\da-f])\2([\da-f])\3\b 
```

并将其替换为：

```
#$1$2$3 
```

例如在 Perl 中写成：

```
s/#([\da-f])\1([\da-f])\2([\da-f])\3\b/#$1$2$3/gi 
```

示例输入：

```
#ccc
#cccccc
#123
#112233
#123123 
```

输出：

```
#ccc
#ccc
#123
#123
#123123 
```

# css - Chrome 浏览器：禁用圆形选择菜单周围的方形轮廓？

> ID：15142740
> 
> 赞同：0
> 
> 时间：2013-02-28T18:19:33.970
> 
> 标签：css, google-chrome

平方轮廓/边缘（图像）我正在尝试删除（Chrome）：

![在此处输入图像描述](../Images/498c86e20ada92f936971c1cff60c379.png)

目标...（火狐浏览器）：

![在此处输入图像描述](../Images/c45ef4fae6fe9d01c6824296135bd814.png)

CSS：

```
.wide5 {
    width: 28%;
    height:32px;
    font-size: 16px;
    border-radius: 7px 7px 7px 7px;
    border: 3px solid #D2D2CD;
    padding: 4px 8px 4px 6px;
    outline:none;
    margin-bottom:4px;
}

.wide5:focus {
    border: 3px solid #00AEEF;
    outline:none;

} 
```

的HTML：

```
<select class="wide5">
<option value="1">1 Unit</option>
<option value="2">2 Units</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:53:29.147

在选择菜单上添加`-webkit-appearance: none;`可以让您在 chrome 中获得所需的行为 ..**但**摆脱了选择箭头 .. 不确定您是否会介意。

无论哪种方式，我认为没有 Javascript 是你最好的选择 .. 除非你重新设计`<select>`菜单 ..

# c# - 如何修复注册页面中的 if 语句？

> ID：15142742
> 
> 赞同：0
> 
> 时间：2013-02-28T18:19:36.477
> 
> 标签：c#, events, if-statement, login

当用户尝试使用已经存在的用户名注册时，如何修复 IF 语句。目前，如果用户名已经存在，我的程序将不接受输入的数据，但它仍会进入下一页（即使数据未保存在数据库中）。我需要知道的是如何消除这个问题，所以当用户输入一个存在的“用户名”时，它只会给出错误的消息框，而不是移动到下一页。

谢谢！

```
private void btnSignupNew_Click(object sender, EventArgs e)
{    
   if (txtUsername.Text == "")
   {
      errorUsername.SetError(txtUsername, "Enter A Username");
   }

   else if (txtPassword.Text == "")
   {
      errorPassword.SetError(txtPassword, "Enter A Valid Password");
   }

   else
   {
      using (SqlConnection con = new SqlConnection("Data Source=etc"))
      {
         con.Open();
         bool exists = false;

         // create a command to check if the username exists
         using (SqlCommand cmd = new SqlCommand("select count(*) from [User] where UserName = @UserName", con))
         {
            cmd.Parameters.AddWithValue("UserName", txtUsername.Text);
            exists = (int)cmd.ExecuteScalar() > 0;
         }

         // if exists, show a message error
         if (exists)
         {
            MessageBox.Show("Username: " + txtUsername.Text + "  already Exists");
            //errorPassword.SetError(txtUsername, "This username has been using by another user.");
         }    

         else
         {
            // does not exists, so, persist the user
            using (SqlCommand cmd = new SqlCommand("INSERT INTO [User] values (@Forename, @Surname, @Username, @Password)", con))
            {
               cmd.Parameters.AddWithValue("Forename", txtForename.Text);
               cmd.Parameters.AddWithValue("Surname", txtSurname.Text);
               cmd.Parameters.AddWithValue("UserName", txtUsername.Text);
               cmd.Parameters.AddWithValue("Password", txtPassword.Text);
               cmd.ExecuteNonQuery();
            }
          }
          con.Close();

          MessageBox.Show("Sucessfully Signed Up");
          Form1 signin = new Form1();
          signin.Show();
          this.Close();
       }
   }      
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:24:02.707

无论用户名是否已经存在，您的代码总是会关闭表单并启动登录表单，因为执行登录表单的逻辑是*在*您测试唯一性之后执行的。只有在唯一性测试成功时才会发生这种情况。

将您的逻辑更改为如下所示：

```
// if exists, show a message error
if (exists)
{
    MessageBox.Show("Username: " + txtUsername.Text + "  already Exists");
           //errorPassword.SetError(txtUsername, "This username has been using by another user.");
}
else
{
    // does not exists, so, persist the user
    using (SqlCommand cmd = new SqlCommand("INSERT INTO [User] values (@Forename, @Surname, @Username, @Password)", con))
    {
         cmd.Parameters.AddWithValue("@Forename", txtForename.Text);
         cmd.Parameters.AddWithValue("@Surname", txtSurname.Text);
         cmd.Parameters.AddWithValue("@UserName", txtUsername.Text);
         cmd.Parameters.AddWithValue("@Password", txtPassword.Text);

         cmd.ExecuteNonQuery();
    }
    MessageBox.Show("Sucessfully Signed Up");
    Form1 signin = new Form1();
    signin.Show();
    this.Close();
}
con.Close(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T18:27:09.853

将参数更改为如下所示我还建议在必要时向编辑框添加某种验证，以防有人添加不正确的值以防止任何`SQL Injectection`人亲自为编辑框创建属性值并传入属性值。只是一个建议

您的代码中第一个让我印象深刻的问题是以下行

```
cmd.Parameters.AddWithValue("UserName", txtUsername.Text); 
```

应该

```
cmd.Parameters.AddWithValue("@UserName", txtUsername.Text);

// if exists, show a message error
if (exists)
{
    MessageBox.Show("Username: " + txtUsername.Text + "  already Exists");
           //errorPassword.SetError(txtUsername, "This username has been using by another user.");
}
else
{
    // does not exists, so, persist the user
    using (SqlCommand cmd = new SqlCommand("INSERT INTO [User] values (@Forename, @Surname, @Username, @Password)", con))
    {
         cmd.Parameters.AddWithValue("@Forename", txtForename.Text);
         cmd.Parameters.AddWithValue("@Surname", txtSurname.Text);
         cmd.Parameters.AddWithValue("@UserName", txtUsername.Text);
         cmd.Parameters.AddWithValue("@Password", txtPassword.Text);

         cmd.ExecuteNonQuery();
    }
    MessageBox.Show("Sucessfully Signed Up");
    Form1 signin = new Form1();
    signin.Show();
    this.Close();
}
con.Close(); 
```

# xcode - UIImagePickerController 奇怪的状态栏

> ID：15142745
> 
> 赞同：1
> 
> 时间：2013-02-28T18:19:38.130
> 
> 标签：xcode, uiimagepickercontroller, presentmodalviewcontroller

有谁知道 UIImagePickerController 顶部的这个奇怪的白条是什么？我从我的 EditProfileViewController 中展示它，当它以模态方式出现时，它带有导航栏顶部的那个奇怪的白条。

我设法拍摄了下面的打印屏幕：

![在此处输入图像描述](../Images/ed4a7154898d149aa08061f6bf6b7833.png)

我怎样才能摆脱它？

它与 UIImagePickerController 状态栏有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:17:41.137

该条白色条是屏幕顶部状态栏的背景。这有点粗糙，但我发现最好的解决方法是在我展示我的视图之前禁用状态栏，然后在用户选择图像并且图像选择器再次消失后再次启用它。

这是您隐藏/显示它的方式：

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationSlide]; 
```

# vb.net - 添加到我的数组列表而不在 vb 中覆盖它

> ID：15142751
> 
> 赞同：-1
> 
> 时间：2013-02-28T18:19:54.640
> 
> 标签：vb.net

我刚刚问了一个问题，并相应地修改了我的代码。我写我的页面加载的方式有问题。我的目标是仅第一次初始化数组，然后继续递增它。你能帮我吗？这是我使用的代码：

```
Imports AjaxControlToolkit
Imports System.Data.SqlClient
Imports System.Configuration

Partial Class Shtick

    Inherits System.Web.UI.Page
    Dim conn As SqlConnection
    Dim comm As SqlCommand
    Dim reader As SqlDataReader
    Dim purimConnection As String = ConfigurationManager.ConnectionStrings("Purim").ConnectionString
    Dim ItemSelect As New ArrayList()

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        If ItemSelect.Count >  0 Then
            ItemSelect = New ArrayList()
            Session("itemInCart") = ItemSelect
        End If

        If Not IsPostBack Then
            FillShtickList()

        End If

    End Sub

    Protected Sub FillShtickList()

        Dim conn As SqlConnection
        Dim comm As SqlCommand
        Dim reader As SqlDataReader
        Dim purimConnection As String = ConfigurationManager.ConnectionStrings("Purim").ConnectionString
        conn = New SqlConnection(purimConnection)
        comm = New SqlCommand("SELECT RTRIM(ProductPrice) AS Price, ProductName, ProductImage, ProductID, ProductDescription FROM Products", conn)

        Try
            conn.Open()
            reader = comm.ExecuteReader()
            ShtickDataList.DataSource = reader
            ShtickDataList.DataBind()
            reader.Close()

        Finally
            conn.Close()

        End Try
    End Sub

    'Protected Sub ShtickDataList_ItemCreated(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.ListViewItemEventArgs) Handles ShtickDataList.ItemCreated
    '    'If e.Item.ItemType = ListItemType.Item Then
    '    '    Dim pce As ModalPopupExtender = e.Item.FindControl("PopupControlExtender1")
    '    '    Dim behaviorID As String
    '    '    behaviorID = "pce_" & e.Item.DataItemIndex
    '    '    pce.BehaviorID = behaviorID
    '    '    Dim img As Image = e.Item.FindControl("PI")

    'item select = which item was selected

    Dim Quantities As New ArrayList()
    Dim itemQtyOrdered As Integer

    Public Sub ShtickDataList_ItemCommand(ByVal source As Object, ByVal e As System.Web.UI.WebControls.ListViewCommandEventArgs) Handles ShtickDataList.ItemCommand

        If e.CommandName = "ViewCart" Then
            Response.Redirect("~/ShoppingCart.aspx")
        End If

        If e.CommandName = "addToCart" Then
            Dim itemQuantity As DropDownList = e.Item.FindControl("QuantityDropDown")
            itemQtyOrdered = itemQuantity.SelectedValue
            ItemSelect.Add(e.CommandArgument)
            Quantities.Add(itemQtyOrdered)

            Session("itemInCart") = ItemSelect
            Session("quantities") = Quantities

            viewInvoice()

        End If

    End Sub

    Protected Sub viewInvoice()

        Dim itemSelected As ArrayList = DirectCast(Session("itemInCart"), ArrayList)
        Dim QuantityofItem As ArrayList = DirectCast(Session("quantities"), ArrayList)

        Dim conn As SqlConnection
        Dim comm As SqlCommand
        Dim reader As SqlDataReader
        Dim purimConnection2 As String = ConfigurationManager.ConnectionStrings("Purim").ConnectionString
        conn = New SqlConnection(purimConnection2)

        comm = New SqlCommand("SELECT ProductName FROM Products WHERE ProductID = @ProductID", conn)

        'Dim i As Integer
        'For i = 0 To ItemSelect.Count - 1
        comm.Parameters.Add("@ProductID", Data.SqlDbType.Int)
        comm.Parameters("@ProductID").Value = (ItemSelected.Count - 1)

        'Next

        Try
            conn.Open()
            reader = comm.ExecuteReader()
            ViewCartlink.Text = "View Cart: (" & ItemSelected.Count & ")"

        Finally
            conn.Close()
        End Try
    End Sub

End Class

 End Try
    End Sub

End Class

 = CType(Session("itemInCart"), ArrayList)
            'al.Add(SS)
            'Session.Add("itemInCart", al)

            viewInvoice()

        End If

    End Sub

    Protected Sub viewInvoice()

        'Dim itemSelected As ArrayList = DirectCast(Session("itemInCart"), ArrayList)
        'Dim QuantityofItem As ArrayList = DirectCast(Session("quantities"), ArrayList)

        Dim conn As SqlConnection
        Dim comm As SqlCommand
        Dim reader As SqlDataReader
        Dim purimConnection2 As String = ConfigurationManager.ConnectionStrings("Purim").ConnectionString
        conn = New SqlConnection(purimConnection2)

        comm = New SqlCommand("SELECT ProductName FROM Products WHERE ProductID = @ProductID", conn)

        Dim i As Integer
        For i = 0 To ItemSelect.Count - 1
            comm.Parameters.Add("@ProductID", Data.SqlDbType.Int)
            comm.Parameters("@ProductID").Value = ItemSelect(i)

        Next

        Try
            conn.Open()
            reader = comm.ExecuteReader()
            ViewCartlink.Text = "View Cart: (" & ItemSelect.Count & ")"

        Finally
            conn.Close()
        End Try
    End Sub

End Class

M(ProductPrice) AS Price, ProductID, ProductName FROM Products WHERE ProductID = @ProductID", conn)
        comm = New SqlCommand("Insert into orders (UserID, ProductID, quantity) values (1, @ProductID, @Quantity)", conn)
        comm.Parameters.Add("@ProductID", Data.SqlDbType.Int)
        comm.Parameters("@ProductID").Value = item
        comm.Parameters.Add("@Quantity", Data.SqlDbType.Int)
        comm.Parameters("@Quantity").Value = qty

        'Dim i As Integer
        'For i = 0 To ItemSelect.Length - 1                                           
        '    comm.Parameters.Add("@ProductID", Data.SqlDbType.Int)
        '    comm.Parameters("@ProductID").Value = ItemSelect(i)
        'Next
        Try
            conn.Open()
            comm.ExecuteNonQuery()
            'reader = comm.ExecuteReader()
            'ShoppingList.DataSource = reader
            'ShoppingList.DataBind()
            'reader.Close()
        Finally
            conn.Close()
        End Try
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:23:10.203

在代码中：

```
If ItemSelect.Count >  0 Then
    ItemSelect = New ArrayList()
    Session("itemInCart") = ItemSelect
End If 
```

你有一个大于你应该有一个小于的地方。数组列表仅在数组中有项目时才初始化。所以你只有在初始化后才初始化数组。你需要的是：

```
If ItemSelect.Count >  0 Then
    ItemSelect = New ArrayList()
    Session("itemInCart") = ItemSelect
End If 
```

# ruby-on-rails - 在生产环境中运行 Rails 控制台

> ID：15142752
> 
> 赞同：111
> 
> 时间：2013-02-28T18:19:55.653
> 
> 标签：ruby-on-rails

我刚刚上线了我的第一个 Rails 站点，但现在我遇到了问题。当我在 IDE 上以开发模式运行项目时，我可以将控制台运行为：

`User.first.name='whatever'`更改用户名。

如何在生产模式下在实时站点上完成相同的任务？

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2013-06-05T17:57:18.153

如果您正在运行 rails 3.0 或更高版本，您还可以使用

```
rails console production 
```

生产当然可以用`development`or代替（默认`test`值为）`development`

添加该选项`--sandbox`后，您在控制台中对数据库所做的任何更改都将在您退出后回滚

如果这对您不起作用，您可能需要尝试

```
bundle exec rails console production 
```

如果您实际上是在尝试在生产服务器上运行 rails 控制台，请尝试使用谷歌搜索“run rails console [您的云托管提供商]”，例如“run rails console heroku”

***从 Rails 6 开始，您需要使用***

```
RAILS_ENV=production bundle exec rails c 
```

或者

```
RAILS_ENV=production rails c 
```

取决于您的设置

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2013-02-28T18:38:06.000

相当容易：

```
RAILS_ENV=production rails console 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-09-26T23:37:43.853

如果您已经将站点部署到服务器，您还可以使用：

```
bundle exec rails console production 
```

...在您的 rails 应用程序的 webroot 中。也就是说，如果您尚未直接在服务器上安装 rails 包，或者您想在 Web 应用程序的上下文中运行控制台。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-07-18T06:13:17.453

试试下面的命令。

```
 rails c -e production 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-02-28T18:22:57.903

注意：此答案假设您使用 Heroku 作为您的托管服务。

这取决于您使用的托管服务。对于 Heroku，您可以转到终端并输入

```
heroku run rails console 
```

这将为您的生产站点加载 Rails 控制台，并允许您为实时站点创建记录。

您还可以考虑为[数据库播种，](https://gist.github.com/thejourneydude/02f8831e640aa3270a9b)但这通常用于测试。RailsCasts 有一些关于这个主题的视频，但它们有点过时了。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-05-11T01:15:28.500

今天在控制台中运行 rails 6`RAILS_ENV=production rails console`

# iis - 防止 VS2012 将我的项目转换为 Web 应用程序

> ID：15142753
> 
> 赞同：0
> 
> 时间：2013-02-28T18:19:55.737
> 
> 标签：iis, visual-studio-2012, web-application-project

我们有一个大的解决方案，我们最近刚刚迁移到 Visual Studio 2012。在这个解决方案中，一个项目是 IIS 中的主要 Web 应用程序，其他项目是这个 Web 应用程序内的文件夹。每次我们打开解决方案时，VS2012 都会将这些文件夹转换为 Web 应用程序并破坏站点。有什么办法可以避免这种转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:08:19.873

我们找到了解决方案。我们将项目属性更改为不使用 IIS，而是使用带有本地 url 的自定义服务器。

# android - 创建对话框时崩溃

> ID：15142754
> 
> 赞同：0
> 
> 时间：2013-02-28T18:19:57.840
> 
> 标签：android, dialog

我有一个在按下按钮时启动时间选择器对话框的活动。但是，当按下按钮时，对话框不会出现并且应用程序崩溃。我在下面显示了我所有的相关代码。

如果有人可以帮助我解决这个问题，将不胜感激。

感谢您的帮助。

**活动代码**

```
 public class SecondActivity extends Activity implements TimePickerFragment.OnCompleteListener 

    {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_second);

        }

        public void showTimePickerDialog(View v) {
            DialogFragment newFragment = new TimePickerFragment();
            newFragment.show(getFragmentManager(), "timePicker");
        }

           public void onComplete(String time) {

                Button btn = (Button) findViewById(R.id.start_time_button);
                btn.setText(time);

            }
        } 
```

**对话片段**

```
public class TimePickerFragment extends DialogFragment
implements TimePickerDialog.OnTimeSetListener {

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
// Use the current time as the default values for the picker
final Calendar c = Calendar.getInstance();
int hour = c.get(Calendar.HOUR_OF_DAY);
int minute = c.get(Calendar.MINUTE);

// Create a new instance of TimePickerDialog and return it
return new TimePickerDialog(getActivity(), this, hour, minute,
DateFormat.is24HourFormat(getActivity()));
}

public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
// Do something with the time chosen by the user

    String time =Integer.toString(hourOfDay)+" : " +Integer.toString(minute);
    this.mListener.onComplete(time);

}

        public static interface OnCompleteListener {
            public abstract void onComplete(String time);
}

            private OnCompleteListener mListener;

            // make sure the Activity implemented it
            public void onAttach(Activity activity) {
                try {
                    this.mListener = (OnCompleteListener)activity;
    }
                catch (final ClassCastException e) {
                    throw new ClassCastException(activity.toString() + " must implement OnCompleteListener");
    }
}

} 
```

**XML**

```
<LinearLayout 
    android:id="@+id/timeinput"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="0"
    android:layout_marginTop="20dp"
    android:orientation="horizontal" >

        <Button
        android:id="@+id/start_time_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:layout_marginLeft="30dp"
        android:padding="10dp"
        android:onClick="showTimePickerDialog"  />

 </LinearLayout> 
```

**日志猫**

```
02-28 18:16:11.429: D/AbsListView(23796): Get MotionRecognitionManager
02-28 18:16:11.479: D/libEGL(23796): loaded /system/lib/egl/libEGL_mali.so
02-28 18:16:11.484: D/libEGL(23796): loaded /system/lib/egl/libGLESv1_CM_mali.so
02-28 18:16:11.489: D/libEGL(23796): loaded /system/lib/egl/libGLESv2_mali.so
02-28 18:16:11.494: D/(23796): Device driver API match
02-28 18:16:11.494: D/(23796): Device driver API version: 10
02-28 18:16:11.494: D/(23796): User space API version: 10 
02-28 18:16:11.494: D/(23796): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Tue Oct 16 15:37:13 KST 2012 
02-28 18:16:11.524: D/OpenGLRenderer(23796): Enabling debug mode 0
02-28 18:16:13.054: E/SensorManager(23796): thread start
02-28 18:16:13.054: D/SensorManager(23796): registerListener :: handle = 0  name= LSM330DLC 3-axis Accelerometer delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41cb53d8
02-28 18:16:13.204: E/SpannableStringBuilder(23796): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
02-28 18:16:13.204: E/SpannableStringBuilder(23796): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
02-28 18:16:14.224: D/AndroidRuntime(23796): Shutting down VM
02-28 18:16:14.224: W/dalvikvm(23796): threadid=1: thread exiting with uncaught exception (group=0x410122a0)
02-28 18:16:14.229: E/AndroidRuntime(23796): FATAL EXCEPTION: main
02-28 18:16:14.229: E/AndroidRuntime(23796): android.app.SuperNotCalledException: Fragment TimePickerFragment{41cc4718 #0 timePicker} did not call through to super.onAttach()
02-28 18:16:14.229: E/AndroidRuntime(23796):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:789)
02-28 18:16:14.229: E/AndroidRuntime(23796):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1035)
02-28 18:16:14.229: E/AndroidRuntime(23796):    at android.app.BackStackRecord.run(BackStackRecord.java:635)
02-28 18:16:14.229: E/AndroidRuntime(23796):    at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1397)
02-28 18:16:14.229: E/AndroidRuntime(23796):    at android.app.FragmentManagerImpl$1.run(FragmentManager.java:426)
02-28 18:16:14.229: E/AndroidRuntime(23796):    at android.os.Handler.handleCallback(Handler.java:615)
02-28 18:16:14.229: E/AndroidRuntime(23796):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-28 18:16:14.229: E/AndroidRuntime(23796):    at android.os.Looper.loop(Looper.java:137)
02-28 18:16:14.229: E/AndroidRuntime(23796):    at android.app.ActivityThread.main(ActivityThread.java:4898)
02-28 18:16:14.229: E/AndroidRuntime(23796):    at java.lang.reflect.Method.invokeNative(Native Method)
02-28 18:16:14.229: E/AndroidRuntime(23796):    at java.lang.reflect.Method.invoke(Method.java:511)
02-28 18:16:14.229: E/AndroidRuntime(23796):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
02-28 18:16:14.229: E/AndroidRuntime(23796):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
02-28 18:16:14.229: E/AndroidRuntime(23796):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T18:22:52.067

尝试向 onAttach() 方法添加超级调用：

```
public void onAttach(Activity activity) {
    super.onAttach(activity); 
```

# jquery - 带有“farbtastic”颜色选择器的jquery ui对话框

> ID：15142760
> 
> 赞同：1
> 
> 时间：2013-02-28T18:20:07.740
> 
> 标签：jquery, jquery-ui, css

如何修复将位于 jquery ui 对话框顶部的选择器“div”，并​​且在它之外可以这样做吗？什么是最好的解决方案？

这是我想看到的： [1 http://img6.imageshack.us/img6/4866/74030613.png](http://img6.imageshack.us/img6/4866/74030613.png)

[http://jsfiddle.net/gt4Ry/2/](http://jsfiddle.net/gt4Ry/2/)

html:

```
<div id="settingsDialogWindow" title="Settings" style="display:none;">
  <label for="color">Color:</label>
  <input type="text" id="color" name="color" value="#123456" maxlength="7" />
  <div id="picker" style="position: absolute;
  left: 50px;
  border: 1px solid #aaa;
  background-color: #fff;
  -webkit-border-radius: 4px !important;
  border-radius: 4px !important;
  z-index: 99999999;"></div>
</div> 
```

js：

```
$(function () {
    $("#settingsDialogWindow").dialog({
        modal: true,
        draggable: true,
        height: 'auto',
        width: 300,
        minWidth: 300,
        minHeight: 60,
        resizable: false,
        position: { at: "center middle" }
    });

    $('#picker').farbtastic('#color');

    $("#color").focus(function () {
        $("#picker").show();
    });
    $("#color").focusout(function () {
        $("#picker").hide();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:12:50.867

我认为这可以解决您的问题！

[http://jsfiddle.net/gt4Ry/15/](http://jsfiddle.net/gt4Ry/15/)

html:

```
 <div id="settingsDialogWindow" title="Settings" style="display:none;">
<label for="color">Color:</label>
<input type="text" id="color" name="color" value="#123456" maxlength="7" />
</div>
 <div id="picker" style="position: absolute;
 display:none;
left: 50px;
border: 1px solid #aaa;
background-color: #fff;
-webkit-border-radius: 4px !important;
border-radius: 4px !important;
z-index: 99999999;">
</div> 
```

JS：

```
$(function () {
        $("#settingsDialogWindow").dialog({
            modal: true,
            draggable: true,
            height: 'auto',
            width: 300,
            minWidth: 300,
            minHeight: 60,
            resizable: false,
            position: { at: "center middle" },
            drag: function( event, ui ) {  
              $("#picker").css({top:ui.position.top+115,left:ui.position.left+30});
            }
        });

        $('#picker').farbtastic('#color');

        $("#color").focus(function () {
            $("#picker").show();
        });
        $("#color").focusout(function () {
            $("#picker").hide();
        });
    }); 
```

# android - 如何在我的应用程序中编辑通过相机拍摄的照片？

> ID：15142761
> 
> 赞同：2
> 
> 时间：2013-02-28T18:20:07.733
> 
> 标签：android, editor, photo

在我的应用程序中，我使用相机拍照。
我使用此代码启动相机活动：

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
timeStamp = new SimpleDateFormat("yyyyMMddHHmmss").format(new Date());
File file = new File(directory, timeStamp+".png"); //name 
Uri outputFileUri1 = Uri.fromFile(file);
intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri1);
startActivityForResult(intent, CAMERA_RESULT); 
```

此代码正在运行，但如何在我的主 Activity 获取数据之前编辑预览图像（裁剪、旋转、...）`onActivityResult()`？
或者如何从我的应用程序中为我的图像启动照片编辑器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:38:34.427

您应该从图像中创建一个[Bitmap](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeFile%28java.lang.String)对象，然后您可以对其进行操作。

```
String fooFile = "PATH TO FILE";
Bitmap bmp = BitmapFactory.decodeFile(fooFile); 
```

这是一个作物[示例](https://stackoverflow.com/questions/9619032/how-to-crop-a-bitmap-with-a-minimum-usage-of-memory)。有关更多示例，请参见 Google 的“位图操作 android”

# sql - 多个表的多个外键

> ID：15142762
> 
> 赞同：2
> 
> 时间：2013-02-28T18:20:12.367
> 
> 标签：sql, postgresql, foreign-keys

我的数据库设计看起来像这样。简写：

```
CREATE TABLE LANDSLIDE (
      LNUMBER SERIAL NOT NULL,
      PRIMARY KEY (LNUMBER)
      ... 
```

有 4 张桌子（部分滑坡）

```
CREATE TABLE SCARP (
      SCPNUM CHAR(7) NOT NULL, 
      LNUMBER SMALLINT NOT NULL, 
      FOREIGN KEY (LNUMBER) REFERENCES LANDSLIDE (LNUMBER) ON DELETE CASCADE,
      ...
                   ); 
```

例如 scpnum = scp0001

```
CREATE TABLE ACCUMULATION (
      ACCUNUM CHAR(8) NOT NULL,
      LNUMBER SMALLINT NOT NULL,
      FOREIGN KEY (LNUMBER) REFERENCES LANDSLIDE (LNUMBER) ON DELETE CASCADE,
      ...
                          ); 
```

例如 accumum = accu0001

```
CREATE TABLE FRONT (
      FRNUM CHAR(6) NOT NULL,
      LNUMBER SMALLINT NOT NULL, 
      FOREIGN KEY (LNUMBER) REFERENCES LANDSLIDE (LNUMBER) ON DELETE CASCADE,
      ...
                    ); 
```

例如 frnum = fr0001

```
CREATE TABLE OTHER (
      OTHERNUM CHAR(9) NOT NULL,
      LNUMBER SMALLINT NOT NULL,
      FOREIGN KEY (LNUMBER) REFERENCES LANDSLIDE (LNUMBER) ON DELETE CASCADE,
      ...
                   ); 
```

例如 othernum = other0001

还有另一张表，称为材料（不同的石头，不同部分的土壤）。

```
CREATE TABLE MATERIAL (
     MATNUMBER VARCHAR(9) NOT NULL,
     ROCK,
     DISTRIBUTION,
     ...
     PRIMARY KEY(MATNUMBER,ROCK,DISTRIBUTION,...),
     CONSTRAINT material_matnumber_scarp_fkey FOREIGN KEY 
     (MATNUMBER) REFERENCES SCARP (SCPNUM) ON DELETE CASCADE,
     CONSTRAINT material_matnumber_accumulation_fkey FOREIGN KEY 
     (MATNUMBER) REFERENCES ACCUMULATION (ACCUNUM) ON DELETE CASCADE,
     CONSTRAINT material_matnumber_front_fkey FOREIGN KEY 
     (MATNUMBER) REFERENCES FRONT (FRNUM) ON DELETE CASCADE,
     CONSTRAINT material_matnumber_other_fkey FOREIGN KEY 
     (MATNUMBER) REFERENCES OTHER (OTHERNUM) ON DELETE CASCADE
                      ); 
```

当我将数据插入到材料中时（在其他表中输入后），它返回一个错误。错误：在表“material”上插入或更新违反了外键约束“material_matnumber_accumulation_fkey”详细信息：表“accumulation”中不存在键（matnumber）=（scp0001）

表格材料应如下所示：

```
MATNUMBER | ROCK | DISTRIBUTION | ...
----------+------+--------------+------
scp0001   |   A  |    lateral   | ...
scp0001   |   B  |    lateral   | ...
accu0001  |   B  |    central   | ...
scp0002   |   C  |    NULL      |
accu0002  |   A  |    lateral   |
fr0002    |   A  |    NULL      |
scp0003   |   B  |    cantral   |
accu0003  |   B  |    lateral   |
other0003 |   C  |    NULL      | 
```

每个条目都是独一无二的，因为 matnumber！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:16:38.393

如果我理解正确，这是一个可以通过超类型/子类型模式解决的常见问题。您还可以在表中有 4 个可为空的 FK 列，`Material`但这是我的建议：

```
CREATE TABLE Landslide  (                  --- no change here
      LNumber SERIAL NOT NULL,
      PRIMARY KEY (LNumber)
      ... 
```

你说：*“有 4 张桌子（滑坡的一部分）”*

因此，我们创建了一个附加`LandslidePart`表（这是我们的“超类型”表）：

```
CREATE TABLE LandslidePart (
      PartType CHAR(1) NOT NULL, 
      PartNumber INT NOT NULL, 
      LNumber SMALLINT NOT NULL,
      PRIMARY KEY (PartType, PartNumber),
      CHECK (PartType IN ('S', 'A', 'F', 'O')),       --- the 4 subtypes
      FOREIGN KEY (LNumber) REFERENCES Landslide (LNumber) ON DELETE CASCADE,
      ...                                             --- other columns that are
                                                      --- common in all 4 tables
                   ); 
```

然后我们有 4 个（“子类型”）表，稍作改动：

```
CREATE TABLE Scarp (
      PartType CHAR(1) NOT NULL, 
      PartNumber INT NOT NULL, 
      PRIMARY KEY (PartType, PartNumber),
      CHECK (PartType = 'S'), 
      FOREIGN KEY (PartType, PartNumber) 
          REFERENCES LandslidePart (PartType, PartNumber) 
          ON DELETE CASCADE,
      ...                           --- columns that are related to Scarp
                   );

CREATE TABLE Accumulation (
      PartType CHAR(1) NOT NULL, 
      PartNumber INT NOT NULL, 
      PRIMARY KEY (PartType, PartNumber),
      CHECK (PartType = 'A'), 
      FOREIGN KEY (PartType, PartNumber) 
          REFERENCES LandslidePart (PartType, PartNumber) 
          ON DELETE CASCADE,
      ...                           --- columns that are related to Accumulation 
                   );

 --- We define in a similar way the other 2 tables: "Front" and "Other" 
```

现在我们可以定义**引用“超类型”** ( ) 表的`Material`表，而不是四个表中的任何一个：**`LandslidePart`**

 **```
CREATE TABLE Material (
     PartType CHAR(1) NOT NULL, 
     MatNumber INT NOT NULL,
     Rock,
     Distribution,
     ...
     PRIMARY KEY(PartType, MatNumber, Rock, Distribution, ...),
     CONSTRAINT material_matnumber_landslidepart_fkey 
     FOREIGN KEY (PartType, MatNumber) 
         REFERENCES LandslidePart (PartType, PartNumber) 
         ON DELETE CASCADE,
                      ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:00:24.993

检查您的外键长度和数据类型。

以下所有参考`MATNUMBER VARCHAR(9) NOT NULL`，在`MATERIAL`

```
SCPNUM CHAR(7) NOT NULL, *should be* SCPNUM VARCHAR(9) NOT NULL,
ACCUNUM CHAR(8) NOT NULL *should be* ACCUNUM VARCHAR(9) NOT NULL
FRNUM CHAR(6) NOT NULL, *should be* FRNUM VarCHAR(9) NOT NULL, 
```**

# proxy - 从 Domino 8.5.3 到 Connections 的代理

> ID：15142770
> 
> 赞同：1
> 
> 时间：2013-02-28T18:20:35.010
> 
> 标签：proxy, xpages, lotus-domino

我正在尝试在开发 853 多米诺服务器上设置代理配置，因此我可以从 XPage（使用 java）连接到开发连接服务器。

这是一个 SSO 环境，domino 服务器和连接服务器都受 WebSEAL 保护。我想在 java 中进行服务器端调用（使用 Apache HTTP 客户端），所以我的 XPages 应用程序可以调用 Connections 服务器。

我遵循了我在 Niklas Heidloff 的 Social Enabler 文档中找到的一些信息：[http](http://www.openntf.org/Projects/pmt.nsf/DA2F4D351A9F15B28625792D002D1F18/%24file/SocialEnabler111006.pdf) ://www.openntf.org/Projects/pmt.nsf/DA2F4D351A9F15B28625792D002D1F18/%24file/SocialEnabler111006.pdf 以及此处： [http://www.ibm。 com/developerworks/lotus/library/inotes-full/index.html](http://www.ibm.com/developerworks/lotus/library/inotes-full/index.html)

我这样设置代理：

```
Context:    /xsp/proxy/BasicProxy/
URL:        https://connectionsserver.acompany.com
Actions:    GET,HEAD,POST,DELETE,PUT
Cookies:    -List of cookies-
Mime-types: *
Headers:    User-Agent,Accept*,Content*,Authorization*,Set-Cookie 
```

当我尝试调用时，它给了我以下错误：

```
2/28/13 12:34 PM: Exception Thrown
javax.servlet.ServletException: com.ibm.jsse2.util.g: No trusted certificate found
at com.ibm.domino.servlets.proxy.BasicProxy.throwServletException(BasicProxy.java:765)
at com.ibm.domino.servlets.proxy.BasicProxy.service(BasicProxy.java:357)..
...
Caused by: javax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.g: No trusted certificate found 
```

我认为以这种方式传递 cookie 应该可以工作（cookie 应该在 domino-webseal 和 connections-webseal 环境之间工作）。

该错误表明我需要导入证书。我无权访问 domino 服务器以允许我导入证书，因此在我提出请求之前，我想检查一下我没有从其他地方遗漏任何东西。

还有什么我想念的吗？或者有什么建议以不同的方式做这件事？

谢谢，帕姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:00:30.437

如果证书不存在，您必须导入证书。这就是错误消息所指示的内容。[IBM 技术说明 21588966](http://www-01.ibm.com/support/docview.wss?uid=swg21588966)描述了必要的步骤。

此外（在您解决 SSL 之后，这可能会成为下一个热门话题）您必须仔细查看 WebSeal 的配置方式。这里的挑战：WebSeal 旨在适应任何可能的后端，并且很容易让它几乎工作 - 几乎就像：通过浏览器直接访问但在 server-2-server 或 Ajax 等上失败。超级高度推荐Connections/Domino 的 -ignore-on-your-own-risk 设置是使用 WebSeal 的 LTPA 功能，而不是一些可笑的代码注入。

Hth

# ruby-on-rails - 如何使用 Google Maps For Rails 获得 20 多个地点？

> ID：15142771
> 
> 赞同：1
> 
> 时间：2013-02-28T18:20:38.380
> 
> 标签：ruby-on-rails, google-maps, google-maps-api-3, ruby-on-rails-3.2, gmaps4rails

目前，我正在将这个令人难以置信的宝石用于 RoR 中的地图（感谢 Benjamin），并且一切正常。我唯一的问题是，当我想使用该函数获得 20 多个位置时`Gmaps4rails.places_for_address(...)`，我总是得到相同的 20 个位置作为响应。稍微研究了一下，我发现 google API 是这样工作的，如果你想要超过 20 个地方，你必须使用 pagetoken [https://developers.google.com/places/documentation/search](https://developers.google.com/places/documentation/search)对结果进行分页。有没有办法用函数对这些结果进行分页`places_for_address`？或者有另一种方法来完成这个任务？

提前致谢。

# javascript - 选项卡处于非活动状态时，jQuery setInterval 太快

> ID：15142773
> 
> 赞同：0
> 
> 时间：2013-02-28T18:20:48.533
> 
> 标签：javascript, jquery, firefox

当我的网站所在的选项卡处于非活动状态时，我的幻灯片开始切换图片太快，把整个事情搞砸了。

有没有办法解决这个问题？

```
var img_src = ["1.png", "2.png", "3.png", "4.png"];
var delay = 8000;
var first_run = true;

function switch_pic(position){
  $("#show").attr("src", img_src[position]).fadeOut(0).fadeIn(4000).fadeOut(4000);
}

$(document).ready(function(){
  var i = 0;
  if(first_run){
    switch_pic(i);
    first_run = false;
    i++;
  }
  window.setInterval(function(){
    switch_pic(i);
    delay += 8000;
    i++;
    if(i > 3){   
      i = 0;
      window.clearInterval();
    }
  }, delay);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:10:34.327

我不确定为什么事情会加速。通常，后台选项卡上的计时器将减慢到至少一秒钟，但这不应该影响您的方案。我建议使用 console.log() 来跟踪对您的函数的调用。

此外，您可以稍微简化主循环：

```
$(document).ready(function(){
  var i = 0;
  window.setInterval(function(){
    switch_pic(i++); // increase i after call
    if(i > 3) i = 0; // reset i
  }, 8000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:26:30.850

可以将代码包装在：

```
$(document).ready(function(){
    $([window, document]).focusin(function(){
       //code run when tab is selected
    }).focusin(function(){
       //code to stop all animation
    });
}); 
```

这只会让幻灯片在用户查看您的网站时运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-10T13:09:17.703

我认为适合实际版本的 jQuery 的答案应该是这样的：

```
 var intervalId;

    $([window, document]).on('focusin', function(){
        intervalId = setInterval(function() {
            // Action in interval
        }, 3000);
    }).on('focusout', function(){
        if (intervalId) {
            clearInterval(intervalId);
        }
    }); 
```

请记住，第一次`'focusin'`加载页面时您不是跳闸，因此您应该为此使用此构造：

```
intervalFunction();

$([window, document]).on('focusin', function(){
    if (!intervalId){
        intervalFunction();
    }
}).on('focusout', function(){
    if (intervalId) {
        clearInterval(intervalId);
        intervalId = undefined;
    }
});

function intervalFunction() {
    // Your function hire
} 
```

# android - 如何删除 imageView 上方和下方的额外空间？

> ID：15142780
> 
> 赞同：77
> 
> 时间：2013-02-28T18:21:08.573
> 
> 标签：android, imageview

我在 a 中有一个非常简单的图像`RelativeLayout`，由于某种原因，我在顶部和底部获得了无法删除的额外间距。我怎样才能清除它？

这是它的样子：

![来自 Eclipse 预览的图像](../Images/6f8a10caaae998cd2fd04148790378e1.png)

这是代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/slice11pp" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：274
> 
> 时间：2014-03-03T10:34:01.213

试试这个

`android:adjustViewBounds="true"`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-28T08:38:34.727

在您的上面`imageView`添加`android:scaleType="fitXY"`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-28T07:55:35.283

您的问题可能是您没有设置比例类型...将其添加到 ImageView 的 XML 中，“fitCenter”应该是正确的，但还有其他的，请检查：[ScaleType](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html "XML语法也在那里")。

```
<ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/slice11pp"
            android:scaleType="fitCenter" /> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-01-29T00:35:42.307

必须足够添加属性：

```
android:adjustViewBounds="true" 
```

例如：

```
 <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/slice11pp"
        android:adjustViewBounds="true" /> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-02-14T10:50:43.057

如果您的图像视图高度为 match_parent，即使您设置了 android:adjustViewBounds="true" ImageView 也会在顶部和底部添加一些额外的空白空间。因此，将 ImageView 高度更改为 wrap_content 并设置 android:adjustViewBounds="true"

例如

```
<ImageView
  android:id="@+id/img_view"
  android:layout_width="match_parent"
  android:layout_height="wrap_content"
  android:adjustViewBounds="true"/> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-04-17T22:19:22.733

如果对图像没有特定要求，请使用**drawable-nodpi文件夹。**然后`android: adjustViewBounds = "true"`作为默认值。

如果你使用**drawable-nodpi**你不需要设置`android:adjustViewBounds = "true"`.

我认为这是最轻松的方法。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-08-20T19:57:02.433

android:scaleType="centerCrop" 通过添加这个

```
<ImageView
    android:id="@+id/image"
    android:layout_width="200dp"
    android:layout_height="200dp"
    android:src="@drawable/temp_image"
    android:adjustViewBounds="true"
    android:scaleType="centerCrop"/> 
```

为我工作前后图像 [![之前和之后的图像](../Images/034ad0b21adf6c011a3a6c2651566aad.png)](https://i.stack.imgur.com/ViT6X.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-01T12:52:00.247

只需在 Image 视图中添加 ScaleType="fitxy"

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-06T07:23:24.433

试试这个

```
<ImageView
     (...)
     android:adjustViewBounds="true" /> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-03-03T10:25:56.693

这是完美的解决方案

```
 <ImageView
android:id="@+id/imageView"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:adjustViewBounds="true"
android:scaleType="fitXY"
/> 
```

它不会在任何一侧留下任何额外的单个 dp。但是，如果不是纵向图像，图像会失真。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-16T08:10:20.550

这行代码就能解决问题

```
android:adjustViewBounds="true" 
```

不要忘记旋转图像

# git - 来自在 master 上运行的分支的代码

> ID：15142784
> 
> 赞同：1
> 
> 时间：2013-02-28T18:21:24.827
> 
> 标签：git

当我在 Rails 中开发应用程序时，我第一次尝试使用 git（在参加了关于 git 的在线课程之后）。我检查了一个分支来开发一个功能，但是当事情开始出错时，我想在检查那个分支之前通过查看应用程序来重新考虑事情，但是，我还没有准备好放弃那个分支。因此，我检查了主分支。但是，当我在主分支上运行应用程序时，我在功能分支中所做的一切仍然存在。第一次尝试时，我没有从功能分支添加或提交任何文件。然后，当我看到 master 上的更改时，我回到功能分支并执行了“git add”。希望在切换回master之前可以将它们保留在功能分支中。结果相同。当我在主分支上时，我在功能分支中添加的损坏代码正在应用程序中运行。当我在 master 分支上执行 git status 时，它列出了所有`Changes to be committed:`，这与我在功能分支上执行 git status 时所说的相同。

我对 git 的（也许是有缺陷的）理解是，如果我在没有合并我在分支上开发的代码的情况下签出 master，那么分支上的代码将不会在 master 上运行。你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:22:37.707

在切换到 master 之前，您需要实际提交对分支的更改以“将它们保留在那里”。

未提交的更改将跟随您从一个分支到另一个分支（尽管如果它们与分支上的更改冲突，您会收到错误消息）

旁注：如果您还没有准备好将代码提交到分支，但又想保留它，则可以运行`git stash`，这会将所有未提交的更改推送到堆栈中。然后，稍后，您可以说`git stash pop`让他们回来。但是请注意，您的存储堆栈也会跟随您，所以不要跳到错误的分支上。

# ruby-on-rails - CanCan - 用户帐户的密钥持有者访问

> ID：15142785
> 
> 赞同：0
> 
> 时间：2013-02-28T18:21:29.890
> 
> 标签：ruby-on-rails, cancan

我正在使用 CanCan 和 Devise 进行用户身份验证和权限。

用户可以为其帐户指定一个密钥持有者，他们将拥有不同的权限。密钥持有者有一个名为“access_id”的属性，与他们可以访问的帐户的 id 相同。我想要实现的是以下内容：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user

    if user.admin?
      can :manage, :all
    elsif user.keyholder?
      can :read, Folder do |folder|
        folder.try(:user) == user.access_id
      end 
    else
      can :create, :all
      can :manage, :all do |all|
        all.try(:user) == user
      end
    end

  end
end 
```

但是使用此代码，密钥持有者无法访问他们被指定访问的帐户。如何纠正代码以实现这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:39:43.667

你可以试试

```
folder.user_id == user.access_id 
```

假设密钥持有人已登录。

以便

```
user.keyholder? => true
user => keyholder
user.access_id => id of user who did nominate current_user
folder.user_id => id of folder owner 
```

* * *

**编辑**

如果您还希望该密钥持有人也可以访问他/她的文件夹：

```
( folder.user_id == user.access_id ) || ( folder.user_id == user.id ) 
```

但是这个更好，把它放在你的 if / else 语句中，这样任何人（密钥持有者或普通用户）都可以访问他/她自己的文件夹。

```
def initialize(user)
user ||= User.new # guest user

# every one reads his own folder.. or you can copy this to wherever you want
can :read, Folder do |folder|
  folder.user_id == user.id
end 

if user.admin?
  can :manage, :all
elsif user.keyholder?
  can :read, Folder do |folder|
    # but keyholder accesses even more
    folder.user_id == user.access_id
  end 
else
  can :create, :all
  can :manage, :all do |all|
    all.try(:user) == user
  end
end
end 
```

另外，您也可以定义 can :read for keyholder 多次。像：

```
elsif user.keyholder?
  can :read, Folder do |folder|
    folder.user_id == user.access_id
  end 
  can :read, Folder do |folder|
    folder.user_id == user.id
  end 
else 
```

# model-view-controller - 了解 Ember 视图

> ID：15142788
> 
> 赞同：8
> 
> 时间：2013-02-28T18:21:41.903
> 
> 标签：model-view-controller, ember.js, ember-data

我正在寻找有关 Ember.js 中视图的一些说明

来自 Rails 背景，我试图忽略任何成见。根据我对 ember 框架的理解，有 5 个组件：

*   Routes：这是我们定义应用程序状态的地方。状态反映在 URL 中。我们也可以在这里定义数据加载。路由类被定义，并且在启动时 ember 创建在应用程序期间持续的路由对象。
*   模型：这是定义对象数据的地方。还可以定义计算属性。为从服务器返回的每个 json 对象创建一个模型对象。
*   控制器：这调解模型和模板/视图之间的交互。控制器类被定义，并且在启动时 ember 创建控制器对象，这些对象在应用程序的持续时间内持续存在。每个控制器类只有一个实例。
*   模板：这些描述生成的标记。
*   视图：这些是与模型相关的特定模板或 dom 元素。这些用于定义接口事件并将它们发送到控制器进行处理。不确定何时创建这些。

例如，假设我有一个 EventsController，它在 applicationRoute 上加载了数据：

```
ScheduleApp.EventsController = Ember.ArrayController.extend();

ScheduleApp.ApplicationRoute = Ember.Route.extend({
  setupController: function() {
    this.controllerFor('events').set('content', ScheduleApp.Event.find());
  }
}); 
```

现在在我的模板中，而不是遍历每个并显​​示我想要遍历每个并创建关联视图的信息，以便我可以向每个事件添加交互。我想我需要为每个事件创建一个新视图并将其显示在我的模板中。但是，我不确定我在哪里创建这些视图。我是否定义了一个视图类，然后每次我使用视图助手调用它时，ember 都会创建一个新的视图对象？最终我想在视图上使用 appendTo 将我的事件注入到 dom 中的不同位置。这将在哪里定义？

我已经尝试阅读 ember.js 视图指南，但它描述了创建单个视图的上下文。我想我想为每个事件制作许多视图，然后与这些对象动态交互。

到目前为止，ember 已经非常聪明，所以我认为有一个内置的方法可以生成这些视图。毕竟，大多数用户界面都充满了需要交互的列表。问题是我试图制作的列表然后我想根据它的属性分布在 dom 上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T19:21:58.357

根据您的代码，`App.EventsController`有一个事件列表，现在让我们说我们希望 UI 显示一个事件列表，并且对于每个事件说我们希望视图有一个删除按钮，该按钮在用户单击时删除事件

完成的一种方法是使用`Ember.CollectionView`，顾名思义，集合视图是针对此类需求量身定制的，在许多 Ember 示例中，未定义视图的使用，因为 ember 会为您自动生成它，但在某些情况下我们可能需要明确定义一个视图来满足我们的要求

```
App.EventsView = Ember.CollectionView.extend({
  // It needs a list of data to iterate upon
  // We are binding it to the controllers content data which
  // is a list of events
  contentBinding: "controller.content",
  appendSpan: function(){
    view = Ember.View.create({tagName: 'span'});
    this.get("childViews").forEach(function(child){
      view.appendTo(child);
    });
  },
  // Now we need to also define a view template that will be
  // generated for all the elements in the content array
  // This could in turn be another collection view if required
  // I am going to keep it simple for now
  itemViewClass: Ember.View.extend({
    templateName: "event",
    deleteEvent: function(){
      // Implement Delete
      this.get("content").deleteRecord();
    },
    notifyUser: function(){
      // The record doesn't get deleted as soon as user clicks, the request goes to
      // server and server deletes the record and sends back the response to the
      // client, Hence I'm using an observer here on isDeleted property of the record
      if(this.get('content.isDeleted')){
        alert("Record deleted Successfully");
      }
    }.observes('content.isDeleted')
  })
}) 
```

**重要说明***CollectionView*定义`this.get("content")`中指的是事件数组，而itemViewClass中指*的* `this.get("content")`是单个事件对象

```
//Defining the template
//Assuming the event model has a name property
<script type="text/x-handlebars" data-template-name="event">
  Name: {{view.content.name}}
  <a {{action deleteEvent target="view"}} href="#">Delete Event</a> 
</script> 
```

现在，当您点击 application_url/events 时，您将看到一个事件列表，每个事件都有一个删除按钮，我希望这可以清除一些概念

有关[CollectionView的更多信息](http://emberjs.com/api/classes/Ember.CollectionView.html)

**根据评论更新：**

如果要为每个子视图附加另一个视图，可以通过编辑 itemViewClass 的模板来实现，如下所示

```
<script type="text/x-handlebars" data-template-name="event">
  Name: {{view.content.name}}
  <a {{action deleteEvent target="view"}} href="#">Delete Event</a> 
  {{ view App.SomeOtherView }}
</script> 
```

它也可以是部分的，如下所示

```
<script type="text/x-handlebars" data-template-name="event">
  Name: {{view.content.name}}
  <a {{action deleteEvent target="view"}} href="#">Delete Event</a> 
  {{ partial "somePartial" }}
</script> 
```

或者，如果您想以编程方式执行此操作，请单击 EventsView 模板中的一个按钮，然后单击所有子视图必须附加一个 span 标签（我不擅长举例）

```
//This is the template for App.EventsController, 
//template-name = "events" => view is App.EventsView and controller App.EventsController
<script type="text/x-handlebars" data-template-name="events">
   <a {{action appendSpan target="view"}} href="#"> Append </a>
</script> 
```

`appendSpan`在 CollectionView 中定义

# tinymce - TinyMCE - 全屏模式查找调用编辑器

> ID：15142792
> 
> 赞同：2
> 
> 时间：2013-02-28T18:21:56.950
> 
> 标签：tinymce

我在一页上有多个 tinyMCE 编辑器，我正在使用：

```
 setup : function(ed) {
      ed.onKeyPress.add(function(ed, e) {
          //do stuff with ed.id
      });
   } 
```

无论我是否处于全屏模式，这都会注册事件，这就是我想要的。

但是，ed.id 似乎会有所不同，具体取决于全屏模式是否处于活动状态。我想知道的是，当这个按键事件运行时，我怎样才能获得对*CALLING tinyMCE 编辑器的引用。*

例如，

在按键编辑器 id = "TinyMCE_editor1" - 单击全屏模式和 ed.id = "mce_fullscreen"。我想参考“TinyMCE_editor1”。

目前，如果不参考打开“全屏模式”编辑器的 tinyMCE 编辑器，我无法充分遍历 DOM 中的正确位置来执行我需要的操作。

任何想法/帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:13:15.450

您必须使用传递给插件的参数“fullscreen_editor_id”，然后检测您是否处于全屏状态，您可以使用 OR 运算符（如下所示）。

```
setup : function(ed) {
    ed.onKeyPress.add(function(ed, e) {
        var editorId = ed.getParam("fullscreen_editor_id") || ed.id;
        // Do your stuff
    });
}, 
```

希望能帮助到你！

# javascript - 在谷歌地图上画线（自由形式）？

> ID：15142794
> 
> 赞同：1
> 
> 时间：2013-02-28T18:22:00.840
> 
> 标签：javascript, google-maps

嗨，我想在谷歌地图上画一条线（自由形式，Photoshop 铅笔/画笔风格）。

最好的方法是什么？

这样做并保持缩放选项会有多复杂（以便在缩放地图时线条缩放/消失）？

哪个是最好的库（canvas？svg？其他东西）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:35:55.270

您可以使用内置的[绘图工具](https://developers.google.com/maps/documentation/javascript/overlays#drawing_tools)，但如果我没记错的话，您需要单击很多才能获得自由格式线。

[这是](http://jsfiddle.net/SaCLg/2/)另一个相当粗略的想法。捕获地图容器的鼠标坐标，从 google.maps.MapCanvasProjection 获取 latLng 并将坐标推送到折线路径。

```
var map;
var elevator;
var myOptions = {
    zoom: 6,
    center: new google.maps.LatLng(46.87916, -3.32910),
    mapTypeId: 'terrain'
};
map = new google.maps.Map($('#map')[0], myOptions);
var markers = [];

var isDrawing = false;
var overlay = new google.maps.OverlayView();
overlay.draw = function () {};
overlay.setMap(map);

// Add a listener for idle event and call getElevation on a random set of marker in the bound
google.maps.event.addListener(map, 'click', function () {
    var polyLine = new google.maps.Polyline({
        map: map
    });
    $("#map").mousemove(function (e) {
        var pageX = e.pageX;
        var pageY = e.pageY;
        var point = new google.maps.Point(parseInt(pageX), parseInt(pageY));

        var latLng = overlay.getProjection().fromDivPixelToLatLng(point);

        polyLine.getPath().push(latLng);
    });

}); 
```

# oracle - 将一个模式导入另一个新模式 - Oracle

> ID：15142798
> 
> 赞同：9
> 
> 时间：2013-02-28T18:22:14.767
> 
> 标签：oracle

`exp`我有一个使用命令行实用程序从一个模式 user1 导出的数据 dmp 文件。

`imp` 我想使用命令行实用程序将此转储导入另一个新创建的（空）模式用户 2 。

我尝试了一些方法，例如：

```
imp system/password@tesdb fromuser=user1 touser=user2 file=E:\Data\user1.dmp log=E:\Data\user1.log 
```

我收到一个错误

```
IMP-00002: failed to open user1.dmp for read
Import file: EXPDAT.DMP > 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-28T21:05:25.683

在更正可能的 dmp 文件问题后，这是一种确保正确重新映射和导入架构的方法。如果需要，这也将确保表空间也会发生变化：

```
impdp system/<password> SCHEMAS=user1 remap_schema=user1:user2 \
            remap_tablespace=user1:user2 directory=EXPORTDIR \
            dumpfile=user1.dmp logfile=E:\Data\user1.log 
```

EXPORTDIR 必须在 oracle 中定义为系统用户的目录

```
create or replace directory EXPORTDIR as 'E:\Data';
grant read, write on directory EXPORTDIR to user2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T20:16:54.333

问题在于 dmp 文件本身。我不得不重新导出文件并且命令工作正常。谢谢@贾斯汀洞穴

# android - ListView getCheckedItemCount 和 getCheckPositions.size

> ID：15142800
> 
> 赞同：1
> 
> 时间：2013-02-28T18:22:25.517
> 
> 标签：android, android-listview, spinner, android-spinner, onclicklistener

我收到了一个奇怪的屁股错误，我似乎无法弄清楚为什么。我有一个“保存”按钮和一个带有两个选项 {select1 和 select2} 的下拉微调器。当用户按下按钮时，列表视图应该保存复选框的状态。如果用户更改为“select1”或“select2”，则应恢复保存的检查。

问题是，例如在“select1”下，当我取消选择一个复选框（所以 3 个中的 2 个）并保存（使用按钮）时，这两个函数给了我两个不同的结果。

```
ListView lv;
**Log.w(TAG,"saveResourceSettings. count: "+lv.getCheckedItemCount());**  <--- "count: 2"
SparseBooleanArray checked =lv.getCheckedItemPositions();

**Log.w(TAG,"saveResourceSettings. checked count: "+checked.size());** <----"checked count: 3" **?????????** 
```

有谁知道出了什么问题？当我取消选中一个复选框时，就好像 SparseBooleanArray 没有被更新。例如，如果我取消选择“com.android.gesture.builder”，它仍会显示在数组中。

[![在此处输入图像描述](../Images/2ac697223088d12ead005e85fe49e92e.png)](https://i.stack.imgur.com/koZ2c.png)

顺便说一句，我正在使用自定义数据结构来保存复选框的状态，这工作正常。

只是为了确保您知道上下文和方法，请发布部分代码：

```
packageListView=(ListView) findViewById(R.id.ListView01);

packageListView.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_multiple_choice,appNames ));

packageListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

spinner = (Spinner) findViewById(R.id.my_spinner);

ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.s_p_array, android.R.layout.simple_spinner_item);

adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

spinner.setAdapter(adapter);

spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {

                       String selected = parent.getItemAtPosition(position).toString();

                       ListView temp=null;

                       if(selected.equalsIgnoreCase("select1")){

                             temp= Utils.restoreChecks(packageListView,profile , resource,thisActivity, State.SELECT1);

                        }

                        else if(selected.equalsIgnoreCase("select2")){

                             temp= Utils.restoreChecks(packageListView,profile , resource,thisActivity, State.SELECT2);

                         }

                        packageListView=temp;

                        Log.w(TAG,"REFRESHING");

                      //packageListView.invalidate();

                      ArrayAdapter adapt= (ArrayAdapter) packageListView.getAdapter();

                     adapt.notifyDataSetChanged();

                   }

           });

Button save = (Button) findViewById(R.id.save);

save.setOnClickListener(new OnClickListener() {

             public void onClick(View v) {

                        String spinnerSelected =spinner.getSelectedItem().toString();

                        if(spinnerSelected.equalsIgnoreCase("select1")){

                                Log.w(TAG,"onCreate. count: "+packageListView.getCheckedItemCount());

                             AccessFileCmds.saveResourceSettings( packageListView, installedPackageNames, profile, resource,thisActivity, State.SELECT1);

                        }

                        else if(spinnerSelected.equalsIgnoreCase("select2")){

                              Log.w(TAG,"onCreate. count: "+packageListView.getCheckedItemCount());

                             AccessFileCmds.saveResourceSettings( packageListView, installedPackageNames, profile, resource,thisActivity, State.SELECT2);

                        }

         }

}); 
```

解决方案：

```
public static int[] getItemPositions(ListView lv){
    List<Integer> indexes=new ArrayList<Integer>();

    SparseBooleanArray checkedItems = lv.getCheckedItemPositions();
    if (checkedItems != null) {
        for (int i=0; i<checkedItems.size(); i++) {
            if (checkedItems.valueAt(i)) {
                String item = lv.getAdapter().getItem(checkedItems.keyAt(i)).toString();
                Log.i(TAG,item + " was selected. index: "+checkedItems.keyAt(i));
                indexes.add(checkedItems.keyAt(i));
            }
        }
    }
    int[] ret=new int[indexes.size()];

    for(int i=0;i<indexes.size();i++){
        ret[i]=indexes.get(i);
    }
    return ret;
} 
```

# xtk - xtk 网格加载错误

> ID：15142801
> 
> 赞同：0
> 
> 时间：2013-02-28T18:22:29.353
> 
> 标签：xtk

我正在尝试加载几个 freesurfer 文件（.pial、.inflated）并且 javascript 控制台正在记录这些错误：

```
 Uncaught RangeError: ArrayBuffer length minus the byteOffset is not a multiple of the element size. 
```

其他内容加载正常，例如 dicom、nifti、.smoothwm、一些 .pial 等。我使用的是 Chrome 25.0.1364.97

# html - 整体 html5 视频失败：图像/ogg 错误？

> ID：15142804
> 
> 赞同：0
> 
> 时间：2013-02-28T18:22:37.827
> 
> 标签：html, video, ogg

除 Chrome 外，每个浏览器都无法正确显示我的 HTML5 视频。 [http://cordeck.ba.lightburncloud.com/test-video](http://cordeck.ba.lightburncloud.com/test-video)

这是我的标记：

```
<video class="video-js vjs-default-skin" controls="" autoplay="" preload="auto" data-setup="{}">
    <source type="video/ogg" src="/files/videos/sample.ogg">
</video> 
```

例如，Firefox 在我的视频框中显示以下消息：

```
No video with supported format and MIME type found 
```

在错误控制台中，我收到以下消息：

```
HTTP "Content-Type" of "image/ogg" is not supported. Load of media resource http://http://cordeck.ba.lightburncloud.com//files/videos/sample.ogg failed. 
```

据我所知，图像/ogg 类型不存在，我也不会在我的站点中使用它。是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:09:48.853

此问题已解决。显然，提供图像的 CMS 附加了自己的 MIME 类型，并将它们与文件一起存储在数据库中。

Web 服务器发送了正确的类型，但被第三方应用程序覆盖。

# mysql - 使用 SELECT LEFT JOIN 插入

> ID：15142814
> 
> 赞同：0
> 
> 时间：2013-02-28T18:23:06.313
> 
> 标签：mysql

在我尝试将结果插入新表之前，我的查询执行得很好。在到处搜索并在这里和那里更改与我的原始查询没有太大区别的东西之后，我希望这里有人能弄清楚发生了什么。

```
INSERT INTO new_table(col1, col2, col3, col4)
SELECT t1.col1, t2.col2, t1.col3, t1.col4
FROM table1 t1 LEFT JOIN table2 t2 ON (t1.col1=t2.col1)
WHERE (t2.col1 IS NOT NULL) 
```

当我运行这个查询时，新表被填满，就好像我刚刚说过 INSERT INTO new_table SELECT * FROM table1，这显然会从 table2 中删除任何匹配的值。正如我所说，在没有 INSERT 语句的情况下运行此查询会返回准确的结果。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:26:15.553

为什么不只是

```
CREATE TABLE new_Table as SELECT t1.col1, t2.col2, t1.col3, t1.col4
FROM table1 t1 LEFT JOIN table2 t2 ON (t1.col1=t2.col1)
WHERE (t2.col1 IS NOT NULL) 
```

你的索引不会在那里，但这看起来像一个基于左连接的汇总表......

# node.js - 带有 Bouncy 和 Lactate 的 Node.js 简单服务器

> ID：15142818
> 
> 赞同：1
> 
> 时间：2013-02-28T18:23:13.900
> 
> 标签：node.js

我在下面设置了这个简单的节点服务器：

### 服务器.js

```
'use strict';

var lactate = require('lactate'),
    http = require('http'),
    port = 8001,
    root = '/var/www/apps';

var options = {
    root: root,
    from: '',
    not_found: root + '/404.html',
    subdirs: true,
    debug: true
};

var files = lactate.dir(root, options);

var server = new http.Server();

server.addListener('request', function(req, res) {
    if (req.url === '/') {
        files.serve('index.html', req, res);
    } else {
        files.serve(req, res);
    }
});

server.listen(port); 
```

### 路由.js

```
'use strict';

var bouncy = require('bouncy');

var server = bouncy(function (req, res, bounce) {
    if (req.headers.host === 'my-app') {
        bounce(8001);
    }
    else {
        res.statusCode = 404;
        res.end('no such host');
    }
});
server.listen(8000); 
```

*节点服务器.js*

*节点路由.js*

如果一个 RUN 只是**server.js** ALL 工作正常，但如果我通过**route.js**运行它，应用程序保持循环试图下载一些源（图像）并且永远不会完成它。

我可以用有弹性的乳酸吗？我究竟做错了什么？

*Lactate.js 来源：[https](https://github.com/Weltschmerz/Lactate)* ://github.com/Weltschmerz/Lactate *Bouncy.js 来源：[https](https://github.com/substack/bouncy) ://github.com/substack/bouncy *

非常感谢！

# javascript - 动态创建的文本框的值没有得到更新

> ID：15142824
> 
> 赞同：1
> 
> 时间：2013-02-28T18:23:23.243
> 
> 标签：javascript, jquery

我正在使用此代码创建动态行，但文本框的值在我键入时没有得到更新。那就是当我键入时，我可以在文本框中看到文本，但是当我获取/检查该值时，它是空的。

我曾尝试对此进行探索，但我无法理解发生了什么，有什么线索吗？

```
$('#add_ans').click(function(){
var rowCount = $('table tbody tr').length + 1;
var rowString = '<tr>\
                    <td><div class="span_5"><span class="badge badge-success">'+rowCount+'</span></div></td>\
                    <td><div class="span3"><input type="text" class="input-large" value="" /></div></td>\
                    <td><div class="span2 pull-right"><b>0</b></div></td>\
                    <td><div class="span2"><button class="btn btn-success" id="vote'+rowCount+'"><b>Vote!</b> <i class="icon-thumbs-up"></i></button></div></td>\
                    <td><div class="span2"><button class="btn btn-info" disabled><b>Reviews</b> <i class="icon-ok-circle"></i></button></div></td>\
                </tr>'
$('tbody').append(rowString);
$('tbody').on("click","#vote"+rowCount,voteOption); 
```

});

并且事件处理程序是

```
function voteOption(){            
    var rowCount = $('tr').index($(this).closest('tr'));
    alert(rowCount);
    var ans = $('tr:eq('+rowCount+') .input-large').attr('value');
    alert(ans); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:25:50.607

您没有`value`在 HTML 中设置属性，因此它将保持为空。只需使用`val()`而不是`attr('value')`：

```
var ans = $('tr:eq('+rowCount+') .input-large').val(); 
```

或者，您可以`value`在生成的 HTML 中设置属性，然后使用您现在的方法检索它。

这是一个正常工作的 jsFiddle：http: [//jsfiddle.net/Rjrpy/](http://jsfiddle.net/Rjrpy/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T18:26:13.460

使用[.val()](http://api.jquery.com/val/)而不是`.attr('value')`

# symfony - 用关系创建 slug

> ID：15142832
> 
> 赞同：1
> 
> 时间：2013-02-28T18:23:40.973
> 
> 标签：symfony, slug

我想用外部表的关系组合创建一个 slug。我想从一个表中取 2 个值，从 un'atra 表中取另一个值。我试图这样做，但我不明白如何添加两个值和另一个表..并且需要字段（在我的情况下为空）？

```
 /**
 * @ORM\OneToOne(targetEntity="Acme\UserBundle\Entity\User", inversedBy="profile")
 * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 * */
private $utente;

/**
 * @Gedmo\Slug(handlers={
 *      @Gedmo\SlugHandler(class="Gedmo\Sluggable\Handler\RelativeSlugHandler", options={
 *          @Gedmo\SlugHandlerOption(name="relationField", value="utente"),
 *          @Gedmo\SlugHandlerOption(name="relationSlugField", value="nickname"),
 *          @Gedmo\SlugHandlerOption(name="separator", value="-")
 *      })
 * }, separator="-", updatable=true, fields={"empty"})
 * @ORM\Column(length=64, unique=true)
 */
private $slug; 
```

我还会发送电子邮件以及用户名字段，并添加另一个关系字段

# c# - 尝试在 CompositionContainer 中查找导出

> ID：15142833
> 
> 赞同：1
> 
> 时间：2013-02-28T18:24:00.427
> 
> 标签：c#, mef

我在我的 WPF 应用程序中使用 MEF，我不确定我的导出是否因为我导出它们的方式或者因为我查询容器的方式而没有进入容器。

这是我的对象层次结构：

```
public interface ICommonInterface
{ }

[InheritedExport]
public abstract class CommonBaseClass<T> : ICommonInterface 
{ }

public Class1 : CommonBaseClass<Class1>
{ }

public Class1 : CommonBaseClass<Class2>
{ } 
```

由于问题范围之外的原因，我在基类中使用 T 的实现；这就是它存在的原因。如果我摆脱 CommonBaseClass 上的泛型，并且它是继承的类，我可以从我的容器中获取导出，如下所示：

```
var container = new CompositionContainer(new AssemblyCatalog(Assembly.GetExecutingAssembly()));
var exports = container.GetExportedValues<CommonBaseClass>(); 
```

我想要做的是获得导出的泛型版本：

```
var exports = container.GetExportedValues<CommonBaseClass<ICommonInterface>>(); 
```

没有任何错误，只是没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:40:47.953

MEF 与 IoC 容器并不完全相同。MEF 不进行继承导出。您需要添加一个属性

```
[Export(type(CommonBaseClass<ICommonInterface>))] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:29:44.753

MEF 不提供开箱即用的“开放泛型”支持。有一个 MefContrib 项目可以帮助您解决[http://mefcontrib.codeplex.com/wikipage?title=Generic%20Catalog](http://mefcontrib.codeplex.com/wikipage?title=Generic%20Catalog)

在这种情况下我会做的是使用`[InheritedExport]`你的属性`ICommonInterface`而不是`CommonBaseClass<T>`. 像这样：

```
[InheritedExport]
interface ICommonInterface {}

public abstract class CommonBaseClass<T> : ICommonInterface { }

public class Class1 : CommonBaseClass<Class1> { }

public class Class2 : CommonBaseClass<Class2> { } 
```

然后你可以这样做：

```
var exports = container.GetExportedValues<ICommonInterface>(); 
```

假设您有另一个类也实现了`ICommonInterface`并且您不想将其拉入您的容器中。在这种情况下，您可以使用以下`[PartNotDiscoverable]`属性：

```
[PartNotDiscoverable]
public class Class3 : ICommonInterface {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T00:10:09.287

您的代码无法编译。

如果你的意思是：

```
public interface ICommonInterface
{ }

[InheritedExport]
public abstract class CommonBaseClass<T> : ICommonInterface 
{ }

public class Class1 : CommonBaseClass<Class1>
{ }

public class Class2 : CommonBaseClass<Class2>
{ } 
```

然后你可以得到一个出口：

```
var exports = container.GetExportedValues<CommonBaseClass<Class1>>(); 
```

# c# - 我可以从 .NET 4.0 (VS2010) 项目中针对 .NET 1.1 中的 API 做些什么？

> ID：15142836
> 
> 赞同：2
> 
> 时间：2013-02-28T18:24:03.240
> 
> 标签：c#, interop, integration, ipc

我使用 .NET 4.0 中的 3d 方库在 C# .NET 4.0 中开发程序，现在我被要求针对仅在 .NET 1.1 中具有 API 的 3d 方程序

我忽略了一些先前的讨论，告诉我这是不可能的：

*   适用于 Visual Studio 2010 的MSDN [.NET Framework 多目标包](http://msdn.microsoft.com/en-US/hh487282.aspx)
*   所以[我仍然可以在 VisualStudio 2010 中以 .NET Framework 1.1 为目标吗？](https://stackoverflow.com/questions/8336817/can-i-still-target-net-framework-1-1-in-visualstudio-2010)
*   等等

这很奇怪，我无法从 .NET (4.0) 访问以前的 .NET。

文章：

*   [在 Visual Studio 2008 和 Team Server 中使用 .NET 1.1](http://devlicio.us/blogs/ziemowit_skowronski/archive/2008/08/22/working-with-net-1-1-in-visual-studio-2008-and-team-server.aspx)

告诉：

> “这里是如何使用最新的 IDE 来处理 .NET 1.1 应用程序。”

它适用于VS2010（和VS2012）吗？

从 .NET 4.0 (VS2010) 项目中以 .NET 1.1 为目标的 API 有哪些可能性？
进程间通信？

**更新：**
@HighCore，
这是一个程序（终端），提供对西方交易证券交易所的访问，需要登录和密码才能通过互联网获取数据并提交订单（购买、出售等）。
我的程序是 .NET 4.0 中的 algotrading 机器人，但终端本质上也总是从 Windows/GUI 手动使用
我无法直接访问证券交易所或干预提供它的程序和库:) 或者更确切地说:(

**Update2：**
我什至在我的 Windows XP SP3 机器上都找不到 .NET 1.1。
没有看到 Windows 更新得到它。
我还记得上次在其上安装 .NET 1.1 时，我不得不重新安装 VS2005、VS2008、VS2010 以及 Service Pack 和所有依赖项......

也就是，我的感觉是以后的版本之前需要安装.NET 1.1吗？..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:29:09.257

You can't directly. 1.1 runs on the 1.0+ CLR and this is not supported directly in VS2010+.

From the brief requirements you've mentioned, I would investigate some form of architectural/API boundary to compartmentalise the 1.1 API within 4+ CLR code if you can.

I'm pretty sure that you can't load the 1.1 CLR and the 4.0 CLR into the same process so, perhaps this will need you have some process separation.

If the 1.1 level code needs use your code, then you need to rewrite a version for that CLR and chances are it's not a trivial task due the great number of features in clr 2.0+ above 1.1\. Again you need to define precisely what each side needs and isolate them appropriately. This is not something VS2010+ will do out of the box.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:45:34.947

您需要更改 app.config 文件：

```
<startup useLegacyV2RuntimeActivationPolicy="true">
  <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
</startup> 
```

启动节点必须包含[`useLegacyV2RuntimeActivationPolicy="true"`](http://msdn.microsoft.com/en-us/library/bbx34a2h%28v=vs.100%29.aspx).

# asp.net - 关闭面板的问题

> ID：15142837
> 
> 赞同：-1
> 
> 时间：2013-02-28T18:24:04.303
> 
> 标签：asp.net

我有一个在顶部保存 DGV 的 asp.net 页面，以及带有 CollapsiblePanelExtender 的面板，在这个面板中我保存文本框、按钮等'..当我的一个功能（更新/删除/插入）完成时，我想要那个面板将自动关闭。我在javascript中有函​​数：

```
 function hidePanel() {
        $get("<%= Panel1.ClientID%>").style.display = 'none';
        return false;
    } 
```

我尝试将其用于：

```
ScriptManager.RegisterStartupScript(this, typeof(string), "Hide", "hidePanel();", true); 
```

它关闭了包含 DGV 的页面的上侧，而不是关闭面板，有什么建议为什么不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:00:04.330

当您在服务器端代码调用中更新页面时

```
 Panel1.ClientState = True 
```

这将扩展回发面板和

```
Panel1.ClientState = False 
```

应该隐藏面板。

# xpages - 从托管 bean 中导入的 jar 访问方法

> ID：15142840
> 
> 赞同：1
> 
> 时间：2013-02-28T18:24:10.277
> 
> 标签：xpages

我确定我错过了一些东西，但我根本没有看到它。

我正在使用 iText 创建 PDF，我想在 bean 中执行此操作。我已经创建了一个，但它一直在出错。我通常在 Java 中使用的一些方法似乎在这个 bean 中不起作用。

例如，这一行：

```
com.itextpdf.text.Document document1 = new com.itextpdf.text.Document(); 
```

将抛出错误 java.lang.NoClassDefFoundError: com.itextpdf.text.Document，即使在构建路径中导入了 jar，并且在 bean 中导入了 com.itextpdf.text.Document。

如果你把它改成这样：

```
com.itextpdf.text.Document document1; 
```

或者

```
com.itextpdf.text.Document document1 = null; 
```

错误消失了。我不明白为什么一种方法有效而另一种方法无效，但这是一个相当容易做出的改变。

现在我需要设置页面大小。这将在 Eclipse 中工作：

```
 document1.setPageSize(PageSize.LETTER); 
```

但这是我得到的错误：

java.lang.NoClassDefFoundError: com.itextpdf.text.PageSize

这可能是因为我已将其设置为 null 以对其进行初始化。但

```
document1 = new Document(); 
```

和

```
document1 = new com.itextpdf.text.Document(); 
```

都抛出 java.lang.NoClassDefFoundError: com.itextpdf.text.Document

奇怪的是，（iText）文档的导入语句警告我它从未使用过。

```
document1.open(); 
```

也会给出错误 java.lang.NoClassDefFoundError: com.itextpdf.text.Document 。

那么，我是否在 bean 的语法中遗漏了一些东西？我已经创建了可以工作的 Notes Java 代理、XAgent 和直接 Java Eclipse 项目，但是我无法让这些方法在 8.5.3 Java Bean 中工作。我将 iText jar 导入到 WebContent\WEB-INF\lib 中，然后将这些（通过添加 jar，而不是添加外部 jar）添加到构建路径中。我已经得到了最新的 jars 并且我正在使用它们，我已经构建和清理过，bean 在 faces-config 中。但是我做错了什么，我看不到。

如果有人能指出我正确的方向，我将不胜感激。

干杯，布赖恩

编辑：许可证不是问题，但即使使用类加载器我仍然无法加载类：

```
 Thread currentThread = Thread.currentThread();
ClassLoader clCurrent = currentThread.getContextClassLoader();
        //ClassLoader clCurrent=com.ibm.domino.xsp.module.nsf.NotesContext.getCurrent().getModule().getModuleClassLoader();
        try {
            currentThread.setContextClassLoader(Activator.class.getClassLoader());
            DebugToolbar.get().info("after setting up FileOutputStream");
            com.itextpdf.text.Document document1 = new com.itextpdf.text.Document();
            //com.itextpdf.text.Document document1;
            //com.itextpdf.text.Document document1 = null;
            //document1 = new com.itextpdf.text.Document();
            //document1.open();
            document1.setPageSize(PageSize.LETTER); 
```

我仍然得到 java.lang.NoClassDefFoundError: com.itextpdf.text.Document

我已经把豆子切掉了，清理了，建造了，贴回去了，清理了建造，仍然是错误。

我感谢您的帮助。布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:09:06.650

很可能你有一个[类加载器](http://guedebyte.wordpress.com/2013/02/21/the-odyssey-of-loading-a-class-in-a-eclipse-plugin-or-how-we-integrated-docx4j-in-poi4xpages/)问题。除非您的应用程序严格供内部使用，否则您可能会重新考虑使用 iText，因为它是 GPL。[Apache PDFBox](http://pdfbox.apache.org/)是 Apache 许可的替代品（我特别喜欢）或 Apache FOP（我将完成 2 篇缺失的文章）（[http://www.wissel.net/blog/htdocs/DominoXSLT](http://www.wissel.net/blog/htdocs/DominoXSLT)），承诺）。当然，OpenNTF 的[POI4XPages](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=POI%204%20XPages)可能正是您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:56:49.300

我打电话给 Lotus/ICS 支持。似乎对于 8.5.3，如果您将 jar 放在 ~Lotus\Notes\jvm\lib\ext 中，它们将加载。我在我的本地测试这个，但相同的路径应该在服务器上工作。我会在那个星期一测试。我研究过，如果提到，我没有找到。Jars 将是 9 中的一个设计元素，将它们放在这样的目录中对于那个版本应该是不需要的，但现在以这种方式添加它们似乎更加一致。这些罐子已经为我制作的一些应用程序正确加载，所以这让我有点困惑。

Stephan 和 Panu，感谢您的回复。

布赖恩

# mysql - 找不到“MySql.Data.MySqlClient”ADO.NET 提供程序的实体框架提供程序

> ID：15142841
> 
> 赞同：33
> 
> 时间：2013-02-28T18:24:10.450
> 
> 标签：mysql, entity-framework

我正在尝试将实体框架与 MySQL 一起使用，但出现上述错误。我安装了最新的 MySQL 连接器。

完整的错误如下：

```
No Entity Framework provider found for 'MySql.Data.MySqlClient' ADO.NET provider. Make sure the provider is registered in the 'entityFramework' section of the application config file. 
```

但是，我找不到任何建议您如何在“entityFramework”部分注册它的信息。

其他一些帖子（[示例](https://stackoverflow.com/questions/14355659/entityframework-6-alpha-2-mysql-connector-net-6-6-4)）建议将提供程序添加到该`system.Data` `DbProviderFactories`部分，如下所示：

```
<DbProviderFactories>
  <add 
    name="MySQL Data Provider"
    invariant="MySql.Data.MySqlClient"
    description=".Net Framework Data Provider for MySQL"
    type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, 
    Version=6.2.3.0, Culture=neutral, 
    PublicKeyToken=c5687fc88969c44d" />
</DbProviderFactories> 
```

但这不起作用，因为它声称该`invariant`名称是重复的。而且，如果我真的遍历了，`System.Data.Common.DbProviderFactories`我可以看到最后一个是 MySQL 提供程序：

```
MySQL Data Provider
.Net Framework Data Provider for MySQL
MySql.Data.MySqlClient
MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.6.5.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d 
```

所以提供者在那里，但 EF 拒绝使用它。有任何想法吗？

我的完整配置如下所示：

```
<configuration>
    <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
        <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </configSections>

   <system.data>
   <!--<DbProviderFactories>
   <add 
    name="MySQL Data Provider"
    invariant="MySql.Data.MySqlClient"
    description=".Net Framework Data Provider for MySQL"
    type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, 
    Version=6.2.3.0, Culture=neutral, 
    PublicKeyToken=c5687fc88969c44d" />
   </DbProviderFactories>-->
</system.data>

<connectionStrings>
    <add name="myContext" connectionString="server=****;User Id=****;password=****;Persist Security Info=True;database=myDb"
  providerName="MySql.Data.MySqlClient" />
</connectionStrings>
<startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
</startup>

<entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>

</entityFramework>

</configuration> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-03-04T08:23:03.087

在 EF5 或更低版本中，一切正常。在 EF6 中，您需要使用 mysql 连接器 6.8.x，并将 DbConfigurationTypeAttribute 添加到您的 DbContext：

```
[DbConfigurationType(typeof(MySql.Data.Entity.MySqlEFConfiguration))]
public class DemoContext : DbContext{} 
```

MySqlEFConfiguration 在 6.8.x 中的 MySql.Data.Entity.EF6.dll 中。试试！

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-11-11T04:36:15.543

您需要在 config (EF 5) 中创建此部分：

```
<entityFramework>
  <!-- ... -->
  <providers>
    <provider invariantName="MySql.Data.MySqlClient"
              type="MySql.Data.MySqlClient.MySqlProviderServices, MySql.Data.Entity" />
  </providers>
</entityFramework> 
```

**更新：**将此定义用于 EF 6：

```
<entityFramework>
  <!-- ... -->
  <providers>
    <provider invariantName="MySql.Data.MySqlClient"
              type="MySql.Data.MySqlClient.MySqlProviderServices, MySql.Data.Entity.EF6" />
  </providers>
</entityFramework> 
```

感谢**elcool**。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-11-26T16:30:47.993

在尝试使用 MySQL、ADO.NET（数据库优先）和 EF6 配置 Visual Studio Professional 2017 环境时，我遇到了同样的情况。

在经历了每个可用的连接器/NET 的地狱之后，我让它与连接器/NET v6.9.10 一起工作，并按照以下步骤操作。

1.  如果已安装，请卸载/删除“Connector/NET”和“MySQL for Visual Studio”。

2.  安装“MySQL for Visual Studio”v2.0.5 CTP（[MySQL for Visual Studio](https://dev.mysql.com/downloads/file/?id=470092)）。注意：在 Connector/NET 之前安装 MySQL for Visual Studio。

3.  安装“连接器/网络”v6.9.10（[连接器/网络](https://dev.mysql.com/downloads/file/?id=474110)）。 [https://i.stack.imgur.com/XOT1I.jpg](https://i.stack.imgur.com/XOT1I.jpg)注意：我首先尝试使用 Connector/NET v6.8、v6.10 和 v8，但它们都不起作用在[这里您可以找到所有连接器版本和与 Visual 的兼容性Studio IDEs](https://dev.mysql.com/doc/connector-net/en/connector-net-versions.html)，但到目前为止这个列表是不准确的。

4.  通过 NuGet 下载并安装“EntityFramework”v6.2.0。

5.  添加对`C:\Program Files (x86)\MySQL\Connector.NET 6.9.10\Assemblies\v4.5\MySql.Data.dll` 和 的引用`C:\Program Files (x86)\MySQL\Connector.NET 6.9.10\Assemblies\v4.5\MySql.Data.Entity.EF6.dll`。

6.  在实体框架提供者下的 App.config 中添加 MySQL EF6 提供者信息，如下所示：

```
<entityFramework>
       <providers>
         <provider invariantName="MySql.Data.MySqlClient"
              type="MySql.Data.MySqlClient.MySqlProviderServices, MySql.Data.Entity.EF6" />
       </providers>
</entityFramework>
```

7.  重建项目。

就是这样。VS2017 已经为我准备好了。希望这对每个人都有效，就像今天对我一样。

**参考资料**：

1.  [无法创建实体数据模型 - 使用 MySql 和 EF6](https://stackoverflow.com/a/38619052/3802757)

2.  [找不到“MySql.Data.MySqlClient”ADO.NET 提供程序的实体框架提供程序](https://stackoverflow.com/a/19898907)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-17T22:42:12.070

只需添加版本摘要（因为我看到您正在尝试 6.2，这太旧了）

*   对于 EF4，使用 Connector/NET 6.6.x（当前 GA 为 6.6.6）
*   对于 EF5，使用 Connector/NET 6.7.x（当前 GA 为 6.7.4）或 Connector/NET 6.8.x（当前 GA 为 6.8.3）。
*   对于 EF6，使用 Connector/NET 6.8.x（当前 GA 为 6.8.3）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-04-17T17:19:27.700

我已经从 EntityFramework 5.0 更新到 6.1 和 MySQL 连接器 6.8.3，只需要添加属性就可以让事情再次发生。在添加属性之前，一切都可以正常编译，但在运行时会崩溃。

```
[DbConfigurationType(typeof(MySql.Data.Entity.MySqlEFConfiguration))]
public class DemoContext : DbContext{} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-25T01:15:41.947

我尝试了配置字符串和设置的每种不同组合，但我终于弄明白了。我的解决方案在一个项目中有源代码，在另一个项目中有测试。我使用的是 Entity Framework 6.1.1 并安装了 MySql Connector 6.8.3 和 MySql for Visual Studio 1.2.3。

问题是我让 NuGet 管理这些包，但只将它们包含在主项目中。解决方案是

1.  右键单击解决方案（解决方案资源管理器中的顶层）
2.  管理 Nuget 包以获取解决方案
3.  转到已安装选项卡
4.  对于所有与 EntityFramework 相关的包（MySql.Data、MySql.Data.Entities、MySql.ConnectorNET.Entity 和 MySql.ConnectorNET.Data），选择它们，然后选择“管理”按钮。
5.  为所有项目启用每个包。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-23T11:46:24.737

为了将来参考，这里是使用 MySQL Connector/Net 和 EF 6 的官方指南，其中包括所有必要的步骤（程序集、配置等）： [第 10 章 EF 6 支持](https://dev.mysql.com/doc/connector-net/en/connector-net-entityframework60.html "第 10 章 EF 6 支持")

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-08-31T14:24:06.300

从 nuget [https://www.nuget.org/packages/MySql.Data.Entity/安装最新版本](https://www.nuget.org/packages/MySql.Data.Entity/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-01-17T14:37:40.330

就我而言，这是一个缺失的参考。升级到 EntityFramework 6 时，需要添加对程序集的引用

> 系统.数据.实体

我认为这是因为 MySql.Data.Entity.EF6 继承了这个程序集中的一堆东西，它不适用于以前版本的 EF。

当您的 app.config 良好并且您的所有参考资料看起来都很好时，这是一个值得检查的解决方案。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-28T20:13:03.570

没关系。我注意到我安装了 EF 6。我删除了它并尝试了 EF 5（NuGet 说它是最新的稳定版本），它开始工作了。

不过，更有用的错误消息会很好！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-07-13T13:03:05.740

可能只是 MySql 提供程序安装在机器配置中（例如通过 .net 连接器安装程序？默认连接工厂也应该类似于“MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.7.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" 我猜...

# actionscript-3 - 动作脚本3；使动态文本框在悬停时显示文本

> ID：15142849
> 
> 赞同：1
> 
> 时间：2013-02-28T18:24:38.947
> 
> 标签：actionscript-3, actionscript, mouseover, dynamic-text

我正在尝试创建我的第一个 actionscript3s...我想制作一个动态文本框 (dynText) 来描述悬停按钮 (stopButton) 的作用。

当我悬停按钮时没有显示任何文字，也没有收到错误消息。为什么？

这是我的代码

```
dynText.addEventListener( MouseEvent.MOUSE_OVER, myInfoHandler )
function myInfoHandler( event ){
    if(event.target.name == "stopButton"){
    dynText.text = "Stop animation!";
    }
} 
```

只是为了确保不是文本字段错误：要制作动态文本字段，我是否只需创建一个文本字段并在下拉列表中选择“动态文本”？

我也尝试过谷歌并阅读其他答案，但我想我太菜鸟了，无法理解......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:33:50.130

尝试更改此行：

```
dynText.addEventListener(MouseEvent.MOUSE_OVER, myInfoHandler); 
```

对此：

```
stopButton.addEventListener(MouseEvent.MOUSE_OVER, myInfoHandler); 
```

您希望在鼠标悬停时触发侦听器，而不是文本字段，因此您需要将侦听器添加到按钮本身。

# iphone - AppDelegate 未被调用

> ID：15142850
> 
> 赞同：0
> 
> 时间：2013-02-28T18:24:46.727
> 
> 标签：iphone, ios, xcode, breakpoints, appdelegate

我似乎根本无法调用我的 appdelegate。使用断点，它甚至不像是第一个被调用的。

这就是我在 main.m 中的内容

```
int main(int argc, char *argv[]) {
NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
int retVal = UIApplicationMain(argc, argv, nil, @"AppDelegatename");
[pool release];
return retVal;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:27:24.677

假设您的`AppDelegate`is ，在and`MyAppDelegate`中定义。`MyAppDelegate.h``MyAppDelegate.m`

试试这个：

```
#import <UIKit/UIKit.h>
#import "MyAppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool
    {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([MyAppDelegate class]));
    }
} 
```

编辑：这当然适用于启用 ARC 的应用程序。如果你不使用 ARC，你应该考虑取消它。如果您坚持使用非 ARC 方法，则只需替换您的行：

```
int retVal = UIApplicationMain(argc, argv, nil, @"AppDelegatename"); 
```

和

```
int retVal = UIApplicationMain(argc, argv, nil, NSStringFromClass([MyAppDelegate class])); 
```

在这两种情况下，您都必须替换`MyAppDelegate`为应用程序委托类的真实名称。

编辑2：

根据您的附加命令，您的 main.m 应如下所示：

```
#import <UIKit/UIKit.h>
#import "Radio99AppDelegate.h"

int main(int argc, char *argv[])
{
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([Radio99AppDelegate class]));
    [pool release];
    return retVal;
} 
```

我不确定您使用的是 radio99AppDelegate 还是 Radio99AppDelegate - 最后一个是“标准”。如果这是一个新项目，明智的做法是考虑将其“翻译”为 ARC。内存管理的麻烦要少得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:27:45.497

```
int retVal = UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-07T05:31:06.500

我正在将旧版应用程序迁移到 iOS 9.2 并遇到了这个问题。在我的 main 方法中，我必须将 AppDelegate 的类名作为 principalClassName 参数以及 UIApplicationMain 的 delegateClassName 参数传递。

```
int main(int argc, char * argv[]) {
    @autoreleasepool {
        return UIApplicationMain(argc, argv, NSStringFromClass([AppDelegate class]), NSStringFromClass([AppDelegate class]));
    }
} 
```

# php - Concrete5 Pagination - 限制输出的页数

> ID：15142855
> 
> 赞同：1
> 
> 时间：2013-02-28T18:25:04.427
> 
> 标签：php, pagination, concrete5

这个问题与 Concrete5 CMS 直接相关。

我在我的一种页面类型中使用内置的分页助手，我想限制它使用以下代码呈现的页面数量：`<?php echo $paginator->getPages(); ?>`

这是我在模板中使用的整个代码：

```
if ($paginate && $num > 0 && is_object($pl)): ?>
<div class="pagination">
    <?php
    $summary = $pl->getSummary();
    if ($summary->pages > 1):
        $paginator = $pl->getPagination();
    ?>
        <span class="page-prev"><?php echo $paginator->getPrevious('Prev'); ?></span>
        <span class="pages"><?php echo $paginator->getPages(); ?></span>
        <span class="page-next"><?php echo $paginator->getNext('Next'); ?></span>
    <?php endif; ?>
</div>
endif; 
```

现在，我将页面列表设置为每页显示 5 个项目。我有 35 个项目，因此我的分页看起来像这样：

上一页 [1] 2 3 4 5 6 7 下一页

（1 周围的括号代表活动页面）

我想将分页限制为一次仅显示 5 页。所以它看起来像这样：

上一页 [1] 2 3 4 5 下一页

如果你在第 5 页，它看起来像这样：

上一页 3 4 [5] 6 7 下一页

等等。它不需要完全像这样工作。我主要关心的是限制 $paginator->getPages(); 输出的页面数量；

我搜索了高低，但我找不到任何关于如何实现这一目标的信息。谁能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-19T11:25:55.707

对我来说，答案是改变*$proximity*数字的值。**Number 定义显示在活动页码**旁边的页码数。我的 view.php 中的代码示例

```
<div class="ccm-pagination-outer-wrapper">
    <?php
        $showPagination = true;
        $options = array(
            'prev_message'        => t('← Previous page'),
            'next_message'        => t('Next page →'),
            'proximity'           => 0
        );
        echo $pagination->renderDefaultView($options);
    ?>
</div> 
```

# ruby-on-rails - 更改资源的路由变量

> ID：15142856
> 
> 赞同：1
> 
> 时间：2013-02-28T18:25:06.053
> 
> 标签：ruby-on-rails

我刚刚决定我的“用户”控制器的“显示”操作不应再呈现页面，而是应该由 ajax 调用使用一些 json。 **编辑：我已经实现了这部分。我的控制器只有**

```
def show
    render :json => myobject
end 
```

我在视图中的 javascript 生成执行 AJAX 的 url，一切正常。至于我的问题：我只是想走一条捷径；而不是通过我在视图中链接到此操作的所有位置，例如

```
<%= link_to "Foobar" user_path(@user) %> 
```

并将其替换为

```
<a href='javascript:blahblah'>Foobar</a> 
```

`user_path`如果只是吐出我的javascript URI，我会喜欢它。诚然，这听起来像一个可怕的黑客，但可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:33:55.617

您可以指定格式：

```
user_path( user, format: :json ) 
```

如果您希望您的助手抛出错误，只需在以下位置覆盖它`application_helper.rb`：

```
def user_path( *args, options = {} )
  raise MyException
end 
```

...或者只是使用您最喜欢的 IDE / shell 来查找助手的所有出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:20:14.747

作为一个黑客，你可以去 helpers/application_helper.rb 并在那里插入

```
def user_path(*args)
  "javascript:..."
end 
```

这会成功的。但我不建议将其作为长期解决方案，仅作为一种快速解决方法来检查您的新代码如何工作，可能。

此外，如果您想为正确的用户构建链接，您需要解析 user_path 参数的所有可能组合。如果您只以`user_path(@user)`格式调用它，那么它相对容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T21:46:45.037

您可以在以下位置指定路由的默认格式`config/routes.rb`：

```
resources :user, defaults: { format: 'json' } 
```

如果您只想这样做`show`：

```
resources :user, only: [:show], defaults: { format: 'json' } 
```

# java - Java String.split() - NumberFormatException

> ID：15142857
> 
> 赞同：1
> 
> 时间：2013-02-28T18:25:09.757
> 
> 标签：java, string, numberformatexception

所以，事情就是这样，我有这个代码：

```
public static void main(String[] args) {
    try {
        FileInputStream fstream = new FileInputStream("test.txt");
        // Use DataInputStream to read binary NOT text.
        BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
        String strLine = br.readLine();
        String[] split = strLine.split(" ");

        System.out.println(Integer.parseInt(split[0]));
        in.close();
    }
    catch (Exception e) {//Catch exception if any
        System.err.println("Error: " + e);
    }
} 
```

假设我有一个名为**test.txt**的文件，只有“ **6 6** ”。因此，它读取第一行并将该行拆分为两个字符串。问题是我可以将 Integer.parseInt 用于 split[1]，但我不能将该方法用于`split[0]` （`System.out.println(split[0])`打印“ **6** ”），这会输出以下错误：

```
Error: java.lang.NumberFormatException: For input string: "6" 
```

更新：这可能是 Eclipse 的问题，因为如果我在终端中使用 javac 编译我的 .java 文件，我不会得到任何异常！:))

更新2：解决了。与凯特一起保存时出了点问题。不知道是什么，但 gedit 效果更好：D 谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:31:35.517

试试看： hexdump -C test.txt 如果你有 linux，你可以看到你拥有的不可打印的字符。

trim() 回答也很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:36:23.780

文件开头的这个问题通常是由于[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)，某些软件（实际上主要是记事本）喜欢将其放在 Unicode 文件的开头。

在一个好的文本编辑器中打开文件并将其配置为在没有 BOM 的情况下保存文件。

如果您无法更改文件，请在阅读时跳过第一个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T18:37:02.117

我会尝试以下方法来排除虚假/意外字符：

```
.. setup/read code in main method...
String[] split = strLine.split(" ");
for (String s : split) {
      System.out.println(String.format("[%s] => integer? %b", s, isInteger(s)));
}
... the rest of the main method....

private static boolean isInteger(String n) {
    try {
        Integer.parseInt(n);
    } catch(NumberFormatException e) {
        return false;
    }
    return true;
} 
```

如果您在方括号之间看到任何不是数字或整数的东西？返回 false 那可能是问题所在

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T18:51:03.143

如果您能够确定您正在阅读的文件的实际编码，则可以显式设置它，以便将任何额外的字节正确转换为字符。

`new InputStreamReader(new FileInputStream(...), <encoding>)`

# java - 我想从存储在字符串中的日期获取日期名称、日期、月份、年份，例如“Wed，2013 年 2 月 27 日”

> ID：15142860
> 
> 赞同：0
> 
> 时间：2013-02-28T18:25:17.843
> 
> 标签：java, spring-mvc

“JAVA”我将日期存储在字符串中，例如“2013 年 12 月 27 日，星期三”我想从字符串日期中提取日期名称、日期、月份、年份，我正在使用 spring MVC，如果有人知道解决方案，请指导我。或者如果有其他方法，那么也请建议我..提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T18:29:59.243

这会做到的。没有 JODA 依赖：

```
DateFormat formatter = new SimpleDateFormat("EEE, dd MMM yyyy");
formatter.setLenient(false);
String dateStr = "Fri, 27 Dec 2013";
Date date = formatter.parse(dateStr);
Calendar calendar = Calendar.instance();
calendar.setTime(date);
// Get values from calendar. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T18:57:45.010

```
 DateFormat formatter = new SimpleDateFormat("EEE, dd MMM yyyy");
    String dateStr = "WED, 27 Dec 2013";
    Date date = formatter.parse(dateStr);
    Calendar calendar = Calendar.getInstance();
    calendar.setTime(date);
    // Get values from calendar.
    System.out.println(calendar.get(Calendar.DAY_OF_WEEK));//1 indexed starting from Sunday
    System.out.println(calendar.get(Calendar.DAY_OF_MONTH));//0 indexed
    System.out.println(calendar.get(Calendar.MONTH));//0 indexed
    System.out.println(calendar.get(Calendar.YEAR)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T18:26:28.010

看看乔达时间。它提供了许多解析日期的方法，并在解析完成后从中获取数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T18:53:51.940

由于星期几与表示的日期不一致，我们将剪切字符串，并删除星期几，使用`substring()`.

```
public static void main(String argsp[]) {
    DateFormat formatter = new SimpleDateFormat("dd MMM yyyy");
    formatter.setLenient(false);
    String dateStr = "Wed, 27 Dec 2013";
    String sub = dateStr.substring(4);
    try {
        Date date = formatter.parse(sub);
        System.out.println(date);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

# video - 使用视频标签进行自动加载的 Angular 指令

> ID：15142862
> 
> 赞同：2
> 
> 时间：2013-02-28T18:25:19.987
> 
> 标签：video, angularjs

该指令通过使用链接函数来控制视频标签，以观看 src 属性（其本身由具有 tutorialNumber 索引的绑定数组控制，如此 videos[tutorialNumber]）然后重新加载视频并播放。它还在“结束”上附加了一个事件侦听器，以便视频在完成时自动加载下一个。然而，scope.tutorialNumber++ 似乎并没有像我使用 ng-click 事件手动触发它时那样在“结束”时触发指令中的 $watch。如何确保“结束”事件按应有的方式加载下一个视频？

```
.directive('videoLoader', function(){
    return function (scope, element, attrs){
        scope.$watch(attrs.videoLoader, function(){
            element[0].load();
            element[0].play()
            video.hasPlayed = true;
            $(video).bind('ended', function(){
                $(this).unbind('ended');
                if (!this.hasPlayed) {
                    return;
                }
                scope.tutorialNumber++;
                scope.loadFromMenu();
            });
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:26:46.070

如果您确定事件正在被触发，请尝试将 a 添加`scope.$apply()`到您的事件处理程序中：

```
.directive('videoLoader', function(){
    return function (scope, element, attrs){
        scope.$watch(attrs.videoLoader, function(){
            element[0].load();
            element[0].play()
            video.hasPlayed = true;
            $(video).bind('ended', function(){
                $(this).unbind('ended');
                if (!this.hasPlayed) {
                    return;
                }
                scope.tutorialNumber++;
                scope.loadFromMenu();
                scope.$apply();
            });
        });
    }
}); 
```

# javascript - 在 HotTowel SPA 中使用 Durandal 定义模块的 jQuery 依赖项

> ID：15142868
> 
> 赞同：5
> 
> 时间：2013-02-28T18:25:35.923
> 
> 标签：javascript, jquery, requirejs, durandal, hottowel

我正在兜圈子，试图理解 RequireJS 以及如何使用它来加载当我尝试在模块中使用它们时不显示为未定义的依赖项。

我从 John Papa 的 Pluralsight“带有 HTML5 的 SPA”课程开始。我从来不明白的是，为什么需要在脚本标签中指定每个库，而我认为 AMD 在 requireJS 中的全部意义在于您将责任移交给它及其 data-main 属性以异步加载需要什么。该课程中提出的解决方案令人倍感困惑的是，它没有遵循 RequireJS 文档中记录的整个数据主设置。

再过几个月，我们现在有了带有 Durandal 的“热毛巾”模板、一个示例“服务”模块、一个遵循 RequireJS 文档的设置和一个相当容易理解的入门应用程序。唯一能敲响警钟的是，大多数库都位于通常的“脚本”文件夹中，而 Durandal 与应用程序逻辑一起位于完全独立的“应用程序”文件夹中。如果我从pluralsight SPA 课程中学到一件事并使用requireJS，那就是将东西从单个文件夹中移出，事情很快就会变得非常混乱。

无论如何，新模板工作正常。模块依赖关系很好，视图和视图模型是绑定的，并且有一个示例记录器模块，其模块依赖于 Durandal 模块（即在应用程序文件夹中），效果很好。根据 Hot Towel 模板中的代码添加另一个使用 jQuery 和 mockJson 的简单模块应该很简单，对吧？呃，不，不是真的。

这是一个非常简单的声明，用于在“app/services”文件夹中启动我的模块“dataservice.js”

```
define(['jquery'],
function ($) {
    var init - function.... 
```

当我尝试在我的代码块中访问它时，我当然会为 $ 得到“未定义”。因此，在阅读了太多令人困惑的文献之后（其中大部分最终都以评论说“这在 jquery xxxx 中发生了变化，因此不再相关”），我有以下问题：

1.  当我监控网络流量时，我可以看到 jQuery 库正在正确下载，如果我将其添加到 BundleConfig.cs 中定义的“供应商”捆绑包中，mockJSON 也是如此，所以 jQuery 在那里并在我的浏览器中等待，即使我没有我自己没有给它一个模块定义。要摆脱模块文档中的“未定义”引用似乎意味着我需要添加如下内容：

    ```
    require.config({
        paths: {
            'text': 'durandal/amd/text',
            jquery: '../Scripts/jquery-1.9.1'
        }
    }); 
    ```

    （“文本”声明已经存在。我刚刚添加了 jquery 别名）这导致我的模块有一个函数而不是“未定义”，它解决了部分问题，除了它导致我已经复制的脚本的第二个副本由于 Hot Towell 模板“供应商”捆绑包而下载。出于明显的原因，我不想下载两份 jQuery，那么我该如何解决这个问题？

2.  我已将 mockJSON 库添加到我的“供应商”捆绑包中，这通常使用 $.mockJSON 来引用，我无法做任何事情来使其有效。即使我使用与 jquery 相同的过程对脚本的引用进行了破解，我使用 'require.config({paths:' 声明我得到了未定义，更不用说已经提到的'库被下载了两次'的问题. 如何获得定义的库依赖项，以便在模块中使用该库？

3.  我猜所有这些痛苦都与 requireJS 是关于下载异步模块的事实有关，但 jQuery 和 mockjson 是同步的，所以我必须通过其他方式下载它们（捆绑硬编码参考）但这仍然意味着我的 requireJS模块需要一种将它们声明为依赖项的方法，而我尝试过的任何方法都不起作用。我关于这是一个同步/异步问题的假设是否正确？我曾希望在 Durandal 中找到至少一个使用 jQuery 的示例应用程序，最好是一个 jquery 插件，但我只能看到使用 Durandal 模块而不是其他任何东西的模块代码。所有这些库都在 requireJS 的主根之外的事实可能会加剧问题，因为我不得不求助于其中包含“../”字符串的路径来获取引用。

4.  我知道 requireJS 在定义命令上使用“约定优于配置”，因此如果我错过了模块 ID，那么它会根据模块源文件名和使用 data-main 指定的已定义根文件夹的路径假定一个 ID。然而，Durandal 在其代码中引用了一个名为“入口”的模块。这个模块不在根文件夹中，而是在一个名为“Durandal/transitions/entrance.js”的文件夹中，所以我很困惑为什么对它的任何引用都是“入口”而不是“Durandal/transitions/entrance”。它在哪里被别名？

5.  最后（hoorah）我还没有掌握将依赖项指定为定义语句的第一个参数（字符串数组）与省略这些依赖项之间的细微差别，但是在模块工厂中，它成为第一个参数，指定类似 var system = require('../system') - 为什么我会优先使用一种形式而不是另一种形式。我看到这两种类型在示例应用程序中混合在一起，但不明白为什么。

**PS**：当我编辑此条目时，我看到编号为 1 到 5 的五个问题。当我查看它时，我看到它被渲染为 1，然后是 1 到 4。一些奇怪的 HTML 编辑器与渲染错误，无论我尝试什么格式，我都没有'无法修复，所以请发表任何评论，就好像有五个问题编号为 1 到 5 而不是 2 个编号为 1 和三个编号为 2 到 4！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:51:03.250

哇，这是很多问题！

查看 durandal 谷歌组上的这篇文章： [https ://groups.google.com/forum/#!searchin/durandaljs/papa/durandaljs/Ku1gwuvqPQQ/gupgNqGIK1MJ](https://groups.google.com/forum/#!searchin/durandaljs/papa/durandaljs/Ku1gwuvqPQQ/gupgNqGIK1MJ)

该线程中有趣的一点是，Hot Towel 模板的作者 John Papa 建议使用脚本标签或捆绑包预先加载所有第三方库，然后仅对您自己的模块使用 require/AMD 方法。然后，您自己的模块应该引用 jquery ($) 和 knockout (ko) 的全局属性。

我认为，如果您预先加载第三方模块，然后通过 require/AMD 加载，那么您可能会遇到不可预知的错误，其中一些代码使用全局代码，一些代码使用 AMD 版本。（这似乎在淘汰赛中尤其常见）。

我承认，这种方法在架构上并不那么干净，但是我自己已经在 durandal 上埋头苦干了 5 天，我开始更喜欢预先加载已知的第三方库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T02:10:37.710

哦，看在皮特的份上！我无法涉足这一切。

如果您一心想要注入 jQuery 和淘汰赛等，请将其放入您的 main.js 中，在第 6 行附近，然后再进行定义。

```
var根=这个；// 全局命名空间，窗口

// 以下内容已经通过包加载
// 将它们放在根对象中。将它们添加为服务。
define('jquery', [], function () { return root.jQuery; });
define('ko', [], function () { return root.ko; });
define('breeze', [], function () { return root.breeze; });
define('Q', [], function () { return root.Q; });
定义（'时刻'，[]，函数（）{返回root.moment；}）；
define('sammy', [], function () { return root.Sammy; });
define('toastr', [], function () { return root.toastr; });

```

使满意？:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T07:36:16.460

快速代码答案如下。某处（大概在 Durandal 中）使 jQuery 可用，而没有任何使用它的模块必须将其声明为依赖项（我猜在 Durandal 代码中的某处有一个定义语句，但没有特定示例很难实现这一点。我猜很少人们正在使用 jQuery 或插件（讽刺））。希望 John Papa 即将推出的“热毛巾”课程能够解决其中一些问题/问题。不仅是 jQuery 本身，还有插件。

**解决 jQuery 插件问题的技巧，这是我的团队提出的所有问题背后的真正问题，是 main.js 文件开头的以下命令，该命令由对 requireJS 的脚本引用指向：

```
require.config({
paths: {
    'text': 'durandal/amd/text',
    'mockjson': '../Scripts/jquery.mockjson.js'
},
shim: {
    'mockjson': {
        deps: ['jquery'],
        exports: ['mockJSON']
    }
} 
```

});

请注意，mockJSON 库需要添加到一个包中（我使用了“供应商”，但您可以添加一个新包），这里的关键点是，由于它是一个 jQuery 插件，您不应该将其声明为任何依赖项您需要它的模块（或者至少这对我有用）。

很抱歉原始问题的长度，但现实是我有一个团队想要这些问题的答案，在网络上找不到它们，在撰写本文时只有 John Papa 的 Code Camper 应用程序可以继续 -如果您想编写大量管道代码以将各种库连接在一起，那么它是一个很好的课程并且是一个很好的起点的应用程序（我们没有。我们需要高效，尽管代码是理解什么的好方法Durandal 等较新的框架正在通过更简单的“约定优于编码”方法为您编码）。对于我们团队而言，该课程的问题在于，当您深入研究代码时，您最终会遇到比找到答案更多的问题（例如“ 为什么当我将库移动到它们自己的子文件夹而不是一个大文件夹中的所有内容时，requireJS 会抛出一个错误，上面写着“你在我背后加载库。让我来做，不要在我背后做” , “为什么代码似乎可以使用一些不在捆绑包中的库，并且搜索仅显示在'more.info.txt'文件中，其用法/意图从未被解释过？”；“为什么模块命名约定在点分隔符和斜杠分隔符之间没有明显的原因（或至少从未解释过？” “为什么捆绑包中引用了解决方案中不存在的脚本文件（是它只是在应用程序的演变过程中未移除的未使用的碎片）？" "

很抱歉，沃德显然不认为试图理解这些东西是如何组合在一起并发挥作用的很重要（这就是为什么我问了我所做的五个问题——我的整个团队都在问的问题，但在任何一个问题中都没有解释围绕 jquery 的“剪切和粘贴”答案和我们在网上找到的要求）。作为一名培训师，我希望他能够理解“给我一些 Pluralsight 课程中的一些删减和过去的代码，这些代码并不真正相关。我不需要理解这不是我在这里想要做的，有时如果可用的材料不能回答一大堆问题，那么整个群体都在努力解决，那么尝试和解释是有意义的你不明白的是什么。我的错！

我想这里有机会让某人写一门像样的 requireJS 课程；-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-07T11:44:21.533

对于后来者来说什么是值得的。Durandal 改进了有关此问题的文档。下面页面中的“配置依赖项”部分解释了使用 define(alias, globalVariable) 注册模块与使用路径和 shim 策略之间的区别。

两者都可以，但如果你使用 path 和 shim，所有依赖项都必须以类似的方式注册。对于使用“jQuery.fn.extend...”的插件来说尤其如此。

[http://durandaljs.com/documentation/Conversion-Guide/](http://durandaljs.com/documentation/Conversion-Guide/)

# java - Full GC后，年轻代收集减少10倍

> ID：15142875
> 
> 赞同：1
> 
> 时间：2013-02-28T18:25:50.730
> 
> 标签：java, garbage-collection

这里有我的 gc.log 的摘录：

2013-02-28T12:02:13.209+0100: 1486457.849: [GC 1486457.850: [ParNew 3483368K->96838K(3774912K), **0.2273030 secs** ] 8085678K->4710336K(49912256K), 0.2278070 secs] [Times: user=1.54 sys= 0.01，实数=0.23 秒]

2013-02-28T12:02:26.551+0100: 1486471.191: [GC 1486471.191: [ParNew 3452358K->125528K(3774912K), **0.2386800 secs** ] 8065856K->4748772K(49912256K), 0.2392150 secs] [Times: user=1.64 sys= 0.01，实数=0.24 秒]

2013-02-28T12:02:27.398+0100: 1486472.038: [ **Full GC** 1486472.039: [CMS: 4623244K->3323834K(46137344K), 3.0873920 secs] 5034629K->3323834K(49912256K), [CMS Perm : 97619K->54323K( 98304K)], 3.0878880 secs] [Times: user=3.04 sys=0.01, real=3.08 secs]

2013-02-28T12:02:42.758+0100: 1486487.398: [GC 1486487.399: [ParNew 3355519K->50321K(3774912K), **0.0289980 secs** ] 6679353K->3374156K(49912256K), 0.0295550 secs] [Times: user=0.20 sys= 0.00，实数=0.03 秒]

2013-02-28T12:02:59.045+0100: 1486503.685: [GC 1486503.685: [ParNew 3405841K->71853K(3774912K), **0.0316570 secs** ] 6729676K->3395688K(49912256K), 0.0321860 secs] [Times: user=0.22 sys= 0.00，实数=0.03 秒]

在 Full GC 之后（由于 perm 空间耗尽），年轻代收集时间从 0.23 秒减少到 0.03 秒（10 次）。

我要找出perm空间变满的原因，但是我不明白的是为什么年轻代收集时间会因为Full GC而减少10倍。

有谁能够帮我？

谢谢，琼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:03:26.590

有了提到的日志，我可以说几点。

原因可能是：

随着程序的运行，分配发生并且引用发生。短暂的对象死亡和休息被提升到幸存者空间或永久空间。

可能的引用情况如下。

1) eden 空间（年轻一代）中的对象和 perm 空间和tenured 空间中的幸存者空间参考对象，使它们的寿命更长。

2）有时perm空间和tenured空间中的对象引用年轻一代对象（在eden空间和survivor空间）。

由于tenured 和 perm 空间中的垃圾收集不如年轻代频繁。

可能存在这样的情况，即永久空间或永久空间中的对象说**obj1**不再被引用并准备好被 GC 声明，所以这个**obj1**正在等待 GC，这种情况很少发生。同样，这个**obj1**可能已经引用了幸存者中的对象和伊甸园空间。因此**obj1**引用的伊甸园空间和幸存者空间中的对象不符合垃圾回收条件。因此，在伊甸园空间和幸存者空间中可能有很多这样的对象，这些对象被永久空间中的**obj1**等对象引用，这导致伊甸园和幸存者空间中的对象数量更多。因此，次要 GC 需要更多时间。

在full GC中，像**obj1这样的对象被收集，所以像****obj1**这样的对象引用的eden和survivor中的对象也没有被GC声明，导致eden和survivor空间中的对象更少。由于对象数量较少，所以次要 GC 花费的时间更少。如果您观察到更多日志慢慢地小 Gc 时间再次增加（0.0289980 秒，0.0316570 如您的日志中所述），它可能会增加直到下一次 FULL GC 。

您还可以在 Full GC 之前观察 GC 时间的模式，它正在增加。（0.2273030 秒，0.2386800 秒，如您的日志中所述）

# html - 在wordpress中将所有引号更改为html实体？

> ID：15142876
> 
> 赞同：0
> 
> 时间：2013-02-28T18:25:51.617
> 
> 标签：html, wordpress

是否可以在 Wordpress 中的 functions.php 中添加字符串或函数，以便如果帖子中有 "，它会将其转换为`&quot;`- 用于引用的 html 实体代码。

我发现如果我正在写一篇包含一些我想要复制的代码的帖子，当我只需要标准引号时，WordPress 插入的默认引号是打开和关闭的。我试图在网上研究这个问题，但关于用 WordPress 替换文本的问题并不多。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:33:16.510

看一下[esc_html](http://codex.wordpress.org/Function_Reference/esc_html)，Wordpress 的新版本，相当于 htmspecialchars。

# php - 在 PHP 中从“Java Escape”转换为索引

> ID：15142878
> 
> 赞同：6
> 
> 时间：2013-02-28T18:25:57.313
> 
> 标签：php, unicode, utf-8

是否有任何形式可以将 Java Escape 中的字符串转换为 PHP 中的索引 unicode？

我有这个字符串：

```
$ str = "\ud83d\ude0e"; 
```

我需要获得 U+ 之后的部分：

```
U+1F60E 
```

或者python代码：

```
u'\U0001f60e' 
```

对应代码： http: [//www.charbase.com/1f60e-unicode-smiling-face-with-sunglasses](http://www.charbase.com/1f60e-unicode-smiling-face-with-sunglasses)

谢谢你。

==== 编辑 09/03 ====

对不起，我的延误，感谢您的回复，但我无法做我需要的。

我需要用图像替换字符，所以我这样做：

```
$src = "Hello "."\ud83d\ude0e";

$replaced = preg_replace("/\\\\u([0-9A-F]{1,8})/i", "&#x$1;", $src);

$replaced = str_replace('&#x1f60e', '<img src="data/emoji_new/1F60E.png">', $replaced);

$result = mb_convert_encoding($replaced, "UTF-8", "HTML-ENTITIES"); 
```

但是，不起作用..结果是：

```
"Hello ��" 
```

还有什么想法吗？？

再次感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:18:35.010

非常类似于[PHP：Convert unicode codepoint to UTF-8](https://stackoverflow.com/questions/1805802/php-convert-unicode-codepoint-to-utf-8)

如果可以的话，直接从 4 字节字符开始。

```
$src = "Hello \u0001f60e";

$replaced = preg_replace("/\\\\u([0-9A-F]{1,8})/i", "&#x$1;", $src);

$result = mb_convert_encoding($replaced, "UTF-8", "HTML-ENTITIES");

echo "Result is [$result] and string length is ".mb_strlen($result); 
```

输出几乎可以肯定不会在大多数人的浏览器中正确显示的内容。

```
Result is [Hello ] and string length is 10 
```

或者来自两个 UTF-16 代码：

```
$src = "Hello "."\ud83d\ude0e";

$replaced = preg_replace("/\\\\u([0-9A-F]{1,4})/i", "&#x$1;", $src);

$result = mb_convert_encoding($replaced, "UTF-16", "HTML-ENTITIES");

$result = mb_convert_encoding($result, 'utf-8', 'utf-16');

echo "Result is [$result] and string length is ".mb_strlen($result)."\n";

$resultInHex = unpack('H*', $result);

$resultInHex = $resultInHex[1];

$resultSeparated = implode(', ', str_split($resultInHex, 2));

echo "in hex: ".$resultSeparated; 
```

输出：

```
Result is [Hello ] and string length is 10
in hex: 48, 65, 6c, 6c, 6f, 20, f0, 9f, 98, 8e 
```

对于想知道“什么是 Java 转义？”的每个人，Java 在内部将所有字符编码为 UTF-16。

# c# - 从方法名称字符串动态调用方法？

> ID：15142885
> 
> 赞同：0
> 
> 时间：2013-02-28T18:26:26.377
> 
> 标签：c#, asp.net, reflection

我有以下代码：

```
 public string GetResponse()
    {
        string fileName = this.Page.Request.PathInfo;
        fileName = fileName.Remove(0, fileName.LastIndexOf("/") + 1);

        switch (fileName)
        {
            case "GetEmployees":
                return GetEmployees();
            default:
                return "";
        }
    }

    public string GetEmployees()
    { 
```

我会有很多这样的。他们都会返回一个字符串，并想知道是否有办法避免 switch case。如果有，如果方法不存在，有没有办法返回“未找到”？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:29:42.830

使用反射获取方法：

```
public string GetResponse()
{
    string fileName = this.Page.Request.PathInfo;
    fileName = fileName.Remove(0, fileName.LastIndexOf("/") + 1);

    MethodInfo method = this.GetType().GetMethod(fileName);
    if (method == null)
        throw new InvalidOperationException(
            string.Format("Unknown method {0}.", fileName));
    return (string) method.Invoke(this, new object[0]);
} 
```

这假定您正在调用的方法将始终有 0 个参数。如果它们具有不同数量的参数，则必须相应地调整传递给 MethodInfo.Invoke() 的参数数组。

GetMethod 有几个重载。此示例中的一个将仅返回公共方法。如果要检索私有方法，则需要调用 GetMethod 的重载之一，该方法接受 BindingFlags 参数并传递 BindingFlags.Private。

# asp.net - 部署升级到 .net 4.0 的 asp.net 项目

> ID：15142894
> 
> 赞同：0
> 
> 时间：2013-02-28T18:26:36.680
> 
> 标签：asp.net, .net-4.0, .net-2.0

我最近升级了 asp.net (framework 2.0) 项目以放入一个新的框架；4.0。我是否必须再次部署整个站点以捕获它指向新框架，或者是否有我需要解散的特定文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:28:45.810

虽然您可以在 web.config 中更改目标框架，但我建议您在进行更改后重新构建/重新部署。

> `<compilation debug="true" targetFramework="4.0">`

# ruby-on-rails - NoMethodError：未定义的方法`redirected_to？

> ID：15142895
> 
> 赞同：0
> 
> 时间：2013-02-28T18:26:37.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3

```
require 'spec_helper'

describe MachineGamesController do
  describe 'GET search' do
    it 'blah blah' do`
      get :search, name: 'some_machine_games'
      expect(response).to be_redirected_to(machine_game_path('some_machine_games'))
    end
  end 
```

以上是我用来测试控制器的 rspec。它也被放置在 /spec/controllers/ 目录中。我得到一个

```
NoMethodError:
       undefined method `redirected_to?' for #<ActionController::TestResponse:0x007fce065ba640> 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:41:30.253

我认为是因为匹配器**be_redirected_to**在 Rspec 中不存在。尝试这样做：

```
response.should redirect_to(machine_game_path('some_machine_games')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:42:49.087

redirected_to 不是 rspec 匹配器。你需要重写：

```
describe MachineGamesController do
  describe 'GET search' do
    it 'blah blah' do
     get(:search, name: 'some_machine_games').should redirect_to(machine_game_path('some_machine_games'))
    end
  end
end 
```

结尾

# facebook - Facebook 订阅实时更新

> ID：15142898
> 
> 赞同：0
> 
> 时间：2013-02-28T18:26:50.280
> 
> 标签：facebook, real-time

我计划对我的应用程序的付款订阅使用实时更新。由于每个月都会收到付款，因此我希望为用户提供我们游戏的奖励积分。

然而，我担心如果在处理请求时发生 mysql 错误或其他错误，用户将无法获得他们的硬币。

我们正在使用与贝宝相同的系统，但是对于贝宝，我们必须发送特定的响应消息，如果我们不使用贝宝将继续发送实时更新。Facebook 只要求网络服务器做出响应。

如果我在处理此更新时检测到 mysql 错误，PHP 中是否有办法使 Facebook 重新发送此实时更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:04:17.713

实时更新的[文档](https://developers.facebook.com/docs/reference/api/realtime/)说：

> 如果向您的服务器发送更改通知失败，Facebook 将立即重试，然后在随后的 24 小时内重试几次，频率逐渐降低。

如果您在处理数据期间遇到异常，您可以向 Facebook 返回失败响应。任何 400 及以上都应该工作。

# php - 如果屏幕是特定大小，则 php echo 语句

> ID：15142902
> 
> 赞同：2
> 
> 时间：2013-02-28T18:26:59.973
> 
> 标签：php, jquery, screen-size

我的网站上有一系列 jQuery 脚本，我只想在用户屏幕宽度大于 960 像素时运行这些脚本。我知道您无法使用 php 检测屏幕大小，但是有没有办法创建一些东西来达到这种效果：

```
<? php 
if [METHOD TO DETECT SCREEN SIZE] > 960px {
echo '<script src="js/nbw-parallax.js" type="text/javascript"></script>';
}
?> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T18:34:26.963

PHP 是服务器端，无法获取您的屏幕宽度和高度。

你必须使用javascript。

### jQuery

```
if( $(window).width() > 960 ) {
     $.getScript('js/nbw-parallax.js');
} 
```

### JavaScript

```
if( window.innerWidth > 960 ) {
    //Your Code
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T18:31:25.017

为什么不使用 jQuery？

```
if( $(window).width() > 960 )
{
  $.ajax({
    url: 'js/nbw-parallax.js',
    dataType: "script",
    success: function() {
        //success
    }
  });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-27T10:42:34.793

```
<?php
    if ( stristr($ua, "Mobile" )) {
        $DEVICE_TYPE="MOBILE";
    }

    if (isset($DEVICE_TYPE) and $DEVICE_TYPE=="MOBILE") {
        echo '<script src="js/nbw-parallax.js" type="text/javascript"></script>';
    }
?> 
```

这是更详细脚本的链接： [PHP Mobile Detect](https://gist.github.com/dcondrey/11342487)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T18:30:12.750

您将不得不使用 javascript（或 jQuery）函数来根据屏幕大小生成新的脚本标签。您可能会发现这个[http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)很有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T18:30:16.047

您应该让 JS 检测分辨率并自行选择是否应该运行某些代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T18:32:18.870

您可以使用 javascript 设置包含用户屏幕大小的 cookie。（当然它不会对第一个请求起作用，但每个后续请求都会起作用）。然后在php中你可以得到cookie的值。

# javascript - 这个 QUnit 库代码是关于什么的？

> ID：15142909
> 
> 赞同：-1
> 
> 时间：2013-02-28T18:27:21.363
> 
> 标签：javascript, prototype, qunit

```
(function() {
    function F() {}
    F.prototype = QUnit;
    QUnit = new F();
    // Make F QUnit's constructor so that we can add to the prototype later
    QUnit.constructor = F;
}()); 
```

我不明白 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:45:52.227

简而言之，这会将 QUnit 全局引用更改为使用原型继承来扩展原始 QUnit 对象的新对象。这样您就可以在不破坏原始对象的情况下扩展/更改 QUnit。检查此以获取更多详细信息：http: [//javascript.crockford.com/prototypal.html](http://javascript.crockford.com/prototypal.html)

# c# - 如何从 ASP.NET MVC 项目中的输入类型“文件”获取文件名？

> ID：15142912
> 
> 赞同：0
> 
> 时间：2013-02-28T18:27:30.803
> 
> 标签：c#, asp.net-mvc, entity-framework, razor, dbcontext

我是 ASP.NET 的新手，如果有人能提供帮助，我将不胜感激。我有我的文件输入：

```
<form action="NewProject.cshtml" method="post" enctype="multipart/form-data">
<fieldset>
  <legend> Upload Image </legend>
  <label for="Image">Image</label>
  <input type="file" name="Image" id ="filename"/>
  <br/>
  <input type="submit" value="Upload" id="Add" />
</fieldset> 
```

要上传图片，我使用：

```
@{  WebImage photo = null;
var newFileName = "";
var imagePath = "";

if(IsPost){
    photo = WebImage.GetImageFromRequest();
    if(photo != null){
        newFileName = Guid.NewGuid().ToString() + "_" +
            Path.GetFileName(photo.FileName);
        imagePath = @"Images\" + newFileName;

        photo.Save(@"~\" + imagePath);
//an attempt
       PoleInvestProject.Models.Project project = new PoleInvestProject.Models.Project();
            project.Image = imagePath; //storing in model property Image

        }
    }
} 
```

现在我需要从那里获取图像的路径并将其与具有属性的模型相关联`public string Image { get; set; }`。我想将此文件路径存储在我的数据库中`DBContext context`。

```
 context.Projects.Add(new Project()
            {

                Image = model.Image

            });
            context.SaveChanges(); 
```

但这给了我 NULL，我的数据库表中没有`Projects`. 我究竟做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:24:03.857

通过字符串的值在模型中创建一个新属性并将其命名为 FileName。现在在您的视图中，创建一个具有相同名称的隐藏文件

```
<input type="hidden" id="FileName" value="" /> 
```

向文件输入添加更改句柄

```
<input type="file" onchange="document.getElementById('FileName').value = this.value;" /> 
```

每次更改文件名时，这都会使用文件名的值更新隐藏文件。当您进行回发时，模型绑定器将完成其余的工作，您将在 model.FileName 中获得文件的名称

希望这可以帮助

# parallel-processing - CUDA 并行线程

> ID：15142913
> 
> 赞同：0
> 
> 时间：2013-02-28T18:27:42.587
> 
> 标签：parallel-processing, cuda

运行 CUDA 程序时遇到以下问题：

1.  我用一个有 2 个线程的块调用一个简单的内核

    `CUDAkernel<<<1,2>>>`

2.  在内核内部，我执行以下操作：

    `int i = threadIdx.x;` `if (i==0){ waitabit(); }`

    `if (i==1){ waitabit(); }`

因此，两个内核线程都调用相同的函数`waitabit()`，这几乎浪费了一些时钟周期：

```
__device__ void waitabit(){
    clock_t start = clock();
        clock_t now;
        for (;;) {
        now = clock();
        clock_t cycles = now > start ? now - start : now + (0xffffffff - start);
            if (cycles >= 10000000  ) 
            {break;}
        }           
} 
```

现在的问题是：该函数`waitabit()`将线程延迟 0.008 秒。我很自然地假设线程是并行运行的，所以它们都会*并行*停止0.008 秒（大约），整个内核的延迟大约是 0.008 秒。

然而，这种情况并非如此。内核*串行*执行，延迟为0.016，即2*0.008

并行性是否不正确？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:42:37.290

这是一台 SIMT 机器。在任何给定时间，warp 只处理一条指令。在控制流发散的情况下，if 路径和 else 路径的处理是顺序处理的，而不是并行处理的。当 warp 的所有线程都到达您的第一个 if 语句时，线程 0 处理 if 路径，而所有其他线程*什么都不做*。然后，warp 在 if 构造结束时重新同步并开始并行处理。然后他们点击第二个 if 语句，只有线程 1 继续，而其他线程等待。然后它们在第二个 if 构造结束时再次重新同步，并开始同步处理。

因此，您的示例的最终效果是两个 if 语句是按顺序处理的。这是意料之中的。

# c# - 从不同的程序集中动态加载类（具有自定义行为）？

> ID：15142917
> 
> 赞同：4
> 
> 时间：2013-02-28T18:27:51.067
> 
> 标签：c#, .net, dynamic-loading

我们正在为少数客户构建一个应用程序，每个客户都有自己的要求以及类似的要求。我们还希望将所有代码保留在同一个应用程序中，而不是对其进行分支，并且 IF 不是一个好的选择，因为它会遍布各处。

我计划为所有人提供基类。然后每个客户都有自己的类，覆盖方法将在其中执行特殊逻辑。

我们如何在编译时加载程序集而不是这样做

```
public class BaseClass {
    public string getEventId()
}

public class ClassForJohn:BaseClass {
    [override]
    public string getEventId()
}

public class ClassForAdam:BaseClass {
    [override]
    public string getEventId()
}

void UglyBranchingLogicSomewhere() {
   BaseClass  eventOject;
   if("John"==ConfigurationManager.AppSettings["CustomerName"]){
        eventOject = new ClassForJohn();

   }else if("Adam"==ConfigurationManager.AppSettings["CustomerName"]){
        eventOject = new ClassForAdam();

   }else{
        eventOject = new BaseClass ();

   }
  eventId = eventOject.getEventId();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T18:52:22.917

这就是我将插件（加载项）加载到我的一个项目中的方式：

```
const string PluginTypeName = "MyCompany.MyProject.Contracts.IMyPlugin";

/// <summary>Loads all plugins from a DLL file.</summary>
/// <param name="fileName">The filename of a DLL, e.g. "C:\Prog\MyApp\MyPlugIn.dll"</param>
/// <returns>A list of plugin objects.</returns>
/// <remarks>One DLL can contain several types which implement `IMyPlugin`.</remarks>
public List<IMyPlugin> LoadPluginsFromFile(string fileName)
{
    Assembly asm;
    IMyPlugin plugin;
    List<IMyPlugin> plugins;
    Type tInterface;

    plugins = new List<IMyPlugin>();
    asm = Assembly.LoadFrom(fileName);
    foreach (Type t in asm.GetExportedTypes()) {
        tInterface = t.GetInterface(PluginTypeName);
        if (tInterface != null && (t.Attributes & TypeAttributes.Abstract) !=
            TypeAttributes.Abstract) {

            plugin = (IMyPlugin)Activator.CreateInstance(t);
            plugins.Add(plugin);
        }
    }
    return plugins;
} 
```

我假设每个插件都实现`IMyPlugin`. 您可以根据需要以任何方式定义此接口。如果您遍历插件文件夹中包含的所有 DLL 并调用此方法，则可以自动加载所有可用插件。

通常你至少会有三个程序集：一个包含接口定义，主程序集引用这个接口程序集，至少一个程序集实现（当然也引用）这个接口。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T18:48:22.600

每个客户都有自己的 exe 和 config 文件，并且有共享的 dll 吗？还是有共享的exe，每个客户都有自己的dll？

您可以将完整的类型名称放在配置中，如下所示：

*Shared.exe.config：*

```
<appSettings>
  <add key="CustomerType" value="NamespaceForJohn.ClassForJohn, AssemblyForJohn"/>
</appSettings> 
```

并将*AssemblyForJohn.dll放在与**Shared.exe*相同的文件夹中。

然后你可以像这样在代码中动态加载它：

*共享的.exe：*

```
var typeString = ConfigurationManager.AppSettings["CustomerType"];
var parts = typeString.Split(',');
var typeName = parts[0];
var assemblyName = parts[1];
var instance = (BaseClass)Activator.CreateInstance(assemblyName, typeName).Unwrap(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-24T12:44:49.940

也许这个例子会有所帮助

```
public MyInterface GetNewType() { 
       Type type = Type.GetType( "MyClass", true ); 
       object newInstance = Activator.CreateInstance( type ); 
       return newInstance as MyInterface; 
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T18:38:20.307

[这是使用Unity](http://msdn.microsoft.com/en-us/library/hh237493.aspx)使用 DI 处理它的一种方法。

```
IUnityContainer container = new UnityContainer();
string customerNamespace = ConfigurationManager.AppSettings["CustomerNamespace"];
container.RegisterType(typeof(ISomeInterface), 
                       Type.GetType(customerNamespace+".SomeImplementation"));

// ...

ISomeInterface instance = conainer.Resolve<ISomeInterface>(); 
```

`ISomeInterface`每个客户在客户特定的命名空间中都有自己的实现。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T18:40:00.797

您可以通过以下方式从程序集中创建外部类型的实例：

```
object obj = Activator.CreateInstance( 
    "External.Assembly.Name", "External.Assembly.Name.TypeName");
BaseClass b = (BaseClass) obj;
b.getEventId(); 
```

您将存储程序集的名称并在配置文件或其他适当的位置键入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T20:11:24.650

我会使用 Unity，但作为一个简单的工厂。

[Unity Framework：如何从同一个接口实例化两个类？](https://stackoverflow.com/questions/644501/unity-framework-how-to-instantiate-two-classes-from-the-same-interface/14709597#14709597)

你可以存储你的

我正在使用 Unity.2.1.505.2（以防万一）。

```
 <configSections>
    <section name="unity" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration"/>
  </configSections>

      <unity>
        <container>
          <register type="IVehicle" mapTo="Car" name="myCarKey" />
          <register type="IVehicle" mapTo="Truck" name="myTruckKey" />
        </container>
      </unity> 
```

这是 DotNet 代码。

```
UnityContainer container = new UnityContainer();

UnityConfigurationSection section = (UnityConfigurationSection)ConfigurationManager.GetSection("unity");
                section.Configure(container);

string myKey = "John";  /* read from config file */ /* with this example, the value should be "myCarKey" or "myTruckKey"  */

IVehicle v1 = container.Resolve<IVehicle>(myKey); 
```

看：

[http://msdn.microsoft.com/en-us/library/ff664762(v=pandp.50).aspx](http://msdn.microsoft.com/en-us/library/ff664762(v=pandp.50).aspx)

和

[http://www.sharpfellows.com/post/Unity-IoC-Container-.aspx](http://www.sharpfellows.com/post/Unity-IoC-Container-.aspx)

# php - 可选的命名组

> ID：15142920
> 
> 赞同：0
> 
> 时间：2013-02-28T18:27:51.317
> 
> 标签：php, regex

目前我有`#([A-Z]+)\>*(.*)#`正则表达式。这是它的工作原理：

```
URL>{B>{A>a}}

Array
(
    [0] => URL>{B>{A>a}}
    [1] => URL
    [2] => {B>{A>a}}
) 
```

我需要在捕获结束时创建一个可选的命名组，例如：

```
URL>{B>{A>a}}:value

Array
(
    [0] => URL>{B>{A>a}}
    [1] => URL
    [2] => {B>{A>a}}
    [name] => value
)

URL>{B>{A>a}}

    Array
    (
        [0] => URL>{B>{A>a}}
        [1] => URL
        [2] => {B>{A>a}}
    ) 
```

这该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:37:13.437

您可以使用语法*命名*捕获。`(?P<name>group)`

例如：

```
/([A-Z]+)\>([^:]*)(?::(?P<name>\w+))?/ 
```

**注意：**这假设所有*值*都以冒号开头，然后只包含*单词字符*。调整以满足您的需求。

# c# - 如何在 Xaml 中的文本中包含电子邮件链接？

> ID：15142924
> 
> 赞同：3
> 
> 时间：2013-02-28T18:28:01.143
> 
> 标签：c#, xaml, windows-phone-8, windows-phone

我在 Windows phone 8 应用程序中有一些大文本，我希望里面有电子邮件链接，类似于 mailto 功能。这是代码的一部分：

```
<phone:PivotItem Header="μέλη ΔΕΠ">
    <ScrollViewer>
        <StackPanel>
            <TextBlock TextWrapping="Wrap">                     
            <Run Text="John Doe"/>
            <LineBreak/>
            <Run Text="503 (Building DS 126)"/>
            <LineBreak/>
            <Run Text="tel.:  +30 210-1234567"/>
            <LineBreak/>
            <Run Text="e-mail:  johndoe@uni.gr"/>
            </TextBlock>
        </StackPanel>
    </ScrollViewer>
</phone:PivotItem> 
```

我希望“电子邮件：johndoe@uni.gr”可以点击并在手机上打开邮件应用程序。在我的代码中有很多这样的情况，电子邮件的文本要大得多，这就是我使用这种`<TextBlock><Run Text=".."/><LineBreak/>...`格式的原因。

现在我知道我不能在里面使用超链接按钮，`<Run Text=".."/>`所以有什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T00:56:21.970

HyperlinkButton is good if you want a hyperlink in your UI, but if you want a hyperlink embedded in a run of text you should use **RichTextBox** with a **Hyperlink**:

```
<RichTextBox TextWrapping="Wrap">
    <Paragraph>
        <Run Text="John Doe" />
        <LineBreak />
        <Run Text="503 (Building DS 126)" />
        <LineBreak />
        <Run Text="tel.:  +30 210-1234567" />
        <LineBreak />
        <Hyperlink Click="Hyperlink_OnClick">e-mail:   johndoe@uni.gr</Hyperlink>
    </Paragraph>
</RichTextBox> 
```

And then use the handler from Julien's answer:

```
 private void Hyperlink_OnClick(object sender, RoutedEventArgs e) {
        EmailComposeTask emailComposeTask = new EmailComposeTask();
        emailComposeTask.Subject = "message subject";
        emailComposeTask.Body = "message body";
        emailComposeTask.To = "johndoe@uni.gr";
        emailComposeTask.Show();
    } 
```

Good luck!

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-26T09:28:44.537

You could also do the following:

Overload MapUri() as it is done for URI-Associations of an App and never worry about handling any click events anymore.

XAML:

```
<Hyperlink NavigateUri="tel:0800-555-1234'}">call 0800-555-1234</Hyperlink>
<Hyperlink NavigateUri="mailto:you@your-domain.com'}">e-Mail you@your-domain.com</Hyperlink> 
```

C# App.xaml.cs

```
 private void InitializePhoneApplication() { 
```

...

```
 //get ready for URI association
 RootFrame.UriMapper = new AssociationUriMapper(); 
```

}

C#

```
class AssociateioniMapper : UriMapperBase
{
public override Uri MapUri(Uri uri)
{
    tempUri = System.Net.HttpUtility.UrlDecode(uri.ToString());

    Uri retUri = uri;
    //handle known uri schemes
    if (uriUsesKnownScheme(uri))
    { 
        Debug.WriteLine("Known Uri scheme: " + uri.Scheme);
        NavigateConsideringKnownScheme(uri);
        retUri = null;
    }
}

private bool uriUsesKnownScheme(Uri uri)
{
        try
        {
            switch (uri.Scheme)
            {
                case "http":
                case "https":
                case "mailto":
                case "tel":
                    return true;

                default:
                    return false;
            }
        }
        catch (Exception)
        {
            //uri does not have a scheme
            return false;
        }

} 

private void NavigateConsideringKnownScheme(Uri uri)
    {
        try
        {
            switch (uri.Scheme)
            {
                case schemeHttp:
                case schemeHttps:
                    //open URI in IE
                    WebBrowserTask webBrowserTask = new WebBrowserTask();
                    webBrowserTask.Uri = uri;
                    webBrowserTask.Show();
                    break;
                case schemeMailto:
                    //initiate eMail task
                    if (! string.IsNullOrWhiteSpace(uri.Query))
                        handleMailtoUrl_Query(uri.Query);
                    else
                        handleMailtoUrl_To(uri.OriginalString.Replace("mailto:", string.Empty));
                    break;
                case schemeTel:
                    //initiate phonecall task
                    handleTel(uri.PathAndQuery);
                    break;
                default:
                    break;
            }
        }
        catch (Exception ex)
        {
            Debug.WriteLine(ex.Message);
        }
    }   

    private void handleTel(string parameter)
    {
        try
        {
            string p = parameter as string;

            string number = p;
            string displayName = string.Empty;

            number = Regex.Replace(number, "[^+0-9]", "");

            startPhoneCall(number, displayName);
        }
        catch (Exception e)
        {
            throw e;
        }
    }

    private void startPhoneCall(string number, string displayName)
    {
        try
        {
            PhoneCallTask phoneCallTask = new PhoneCallTask();

            phoneCallTask.PhoneNumber = number;
            if (!string.IsNullOrWhiteSpace(displayName))
            {
                phoneCallTask.DisplayName = displayName;
            }

            phoneCallTask.Show();
        }
        catch (Exception e)
        {
            MessageBox.Show(LocalizationHelper.GetString("ContactPhonecallError"));
        }
    }

    private void handleMailtoUrl_Query(string query)
    {
       //handle subject, to, body and other parameters if required
    }

    private void handleMailtoUrl_To(string to)
    {
        try
        {
            EmailComposeTask emailComposeTask = new EmailComposeTask();

            emailComposeTask.To = to;

            emailComposeTask.Show();
        }
        catch (Exception e)
        {
            Debug.WriteLine(e.Message);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T19:31:54.927

添加一个 HyperLinkBut​​ton ：

```
<HyperlinkButton Name="emailLink" Content="johndoe@uni.gr" Click="EmailLink_Click" /> 
```

在 EmailLink_Link 中，您可以启动 EmailComposeTask ( [http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394003(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394003(v=vs.105).aspx) )

```
private void EMailLink_Click(object sender, RoutedEventArgs e)
{
  EmailComposeTask emailComposeTask = new EmailComposeTask();
  emailComposeTask.Subject = "message subject";
  emailComposeTask.Body = "message body";
  emailComposeTask.To = emailLink.Content;
  emailComposeTask.Show();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-01T07:06:29.210

Even easier:

XAML:

```
<HyperlinkButton Content="yourname@yourdomain.com" Click="HyperlinkButton_Click"/> 
```

Click event handler:

```
private void HyperlinkButton_Click(object sender, RoutedEventArgs e)
{
    Windows.System.Launcher.LaunchUriAsync(new Uri("mailto:yourname@yourdomain.com"));
} 
```

Besides opening your email app, there's a lot more you can do with the Launcher: [http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662937(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662937(v=vs.105).aspx)

# ios - UITableView Header 显示其背后的内容

> ID：15142926
> 
> 赞同：5
> 
> 时间：2013-02-28T18:28:05.690
> 
> 标签：ios, uitableview

我有一个带有纹理背景顶部的标题的 UITableView。我希望标题贴在顶部，他们这样做，但我不希望单元格在它们经过时显示在它后面。这是一个例子：

![UITableView 图片](../Images/06913c913a20985b40f89630dbc452d6.png)

新内容是标题。当它们滚动时，您可以看到它下面的数据行。我无法设置标题的背景，因为它必须从它后面的窗口显示纹理。如何不显示标题下方的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:30:33.893

基本上，你不能 - 不能不使标题不透明。单元格*是*标题后面的内容，因此如果您使标题透明，则单元格就是您将在它们后面看到的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-29T15:18:39.453

它对我有用。

```
 func tableView(_ tableView: UITableView, willDisplay cell: UITableViewCell, forRowAt indexPath: IndexPath) {
        // bring first cell to front
        if indexPath.row == 0 {
            tableView.bringSubviewToFront(cell)
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T15:57:49.997

您可以使标题的背景图像与 UITableCell 的纹理相同。您还可以使下边框有阴影。单元格将出现在表格标题下方。

实施

`(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section`

并返回一个带有`UIImageView`背景的视图。您将不得不在 Photoshop 中稍微处理一下这张图片，以获得您正在寻找的效果。

# php - PHP获取表单发送的输入字段（不知道提交了哪个字段）

> ID：15142930
> 
> 赞同：0
> 
> 时间：2013-02-28T18:28:13.390
> 
> 标签：php, forms, post, input

我有一个包含大约 15 个输入字段的表单，每个字段都有一个默认值，每个字段都来自一个 db 表。Javascript 在提交时检查字段是否已被修改。

然后我的问题来了：

如何仅获取提交的值，以便可以使用它们来更新数据库中的表？

这是我的代码的一部分：

形式：

```
<form method="post" action="controlPanel.php">
<input name="color_base2" value="<?php echo $info['color_base2']; ?>"></span>
<button type="submit" name="updateItem" value="<?php echo $info['id_item']; ?>" class="updateButton" />UPDATE</button> 
```

我确定只有更新的值会被提交，但我不知道哪些是那些并且需要获取它们并将它们中的每一个放在一个 PHP 变量中，该变量的调用方式与输入字段的调用方式相同......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:36:56.557

如果我理解正确，您可以让您的 javascript 函数将修改后的数据放入一个 json 对象并将该对象发送到您的 php 函数。在您的 php 函数中，您可以使用对象而不是每个字段的单个变量。

# c++ - 为什么用指针调用GetWindowRect会导致异常但地址不会

> ID：15142931
> 
> 赞同：1
> 
> 时间：2013-02-28T18:28:16.480
> 
> 标签：c++, c++builder

我在 dll 中有一个实用程序函数，可将我的表单置于主机应用程序屏幕的中心。我正在使用 RAD Studio XE2。我必须手动完成，因为主机应用程序是非 VCL 并且 TForm 的表单放置参数无法正常工作。下面的代码有效。这两个函数都声明为静态的，并且我之前已将 Application 句柄属性设置为主机应用程序。

```
 void MyClass::GetAppCenter(POINT * pos) {
      RECT Rect;
      GetWindowRect(Application->Handle, &Rect);
      pos->x = (Rect.left + Rect.right) / 2;
      pos->y = (Rect.top + Rect.bottom) / 2;
   }

   void MyClass::PlaceForm(TForm * f) {
      POINT pos;
      GetAppCenter(&pos);
      for (int i = 0; i < Screen->MonitorCount; i++) {
         TRect r = Screen->Monitors[i]->WorkareaRect;
         if (r.Contains(pos)) {
            f->Left = (r.Left + r.Right) / 2 - f->Width / 2;
            f->Top = (r.Top + r.Bottom) / 2 - f->Height / 2;
            return;
         }
      }
   } 
```

我最初的 GetAppCenter 代码改用了 Rect * 并返回了正确的值，但是当我设置 f->Left 时抛出了访问冲突异常。谁能解释为什么？

```
 // original version
   void OasisUtils::GetOasisCenter(POINT * pos) {
      RECT *Rect;
      GetWindowRect(Application->Handle, Rect);
      pos->x = (Rect->left + Rect->right) / 2;
      pos->y = (Rect->top + Rect->bottom) / 2;
      delete Rect; // tried with and without this
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T18:30:53.973

```
 RECT *Rect;
  GetWindowRect(Application->Handle, Rect);
  //Rect->left 
```

这是不正确的。`GetWindowRect`需要一个有效的`RECT*`参数，以便它填充此指针指向的内存。相反，您传递的是一个未初始化的指针，期望一些魔法会使它有效。相反，您会遇到访问冲突。你需要：

```
 RECT Rect;
  GetWindowRect(Application->Handle, &Rect); // <<--- Note &
  //Rect.left 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T18:32:37.950

[GetWindowRect](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633519%28v=vs.85%29.aspx)期望调用者拥有矩形结构。

在您的原始版本中，您`*Rect`没有指向任何有效的内存。因此，当您尝试使用它时，您正在访问一些您不拥有的随机内存块。操作系统否认这一点。我只是惊讶于调用`GetWindowRect`不会导致崩溃。

另一方面，您的更新版本声明`RECT Rect`，它在堆栈上分配内存。调用函数时会自动分配该内存，并在函数完成时清理该内存。

澄清一下，这个问题与指针和引用之间的差异无关。问题完全是由于内存分配/所有权。

# php - Percentage and Sticky

> ID：15142932
> 
> 赞同：0
> 
> 时间：2013-02-28T18:28:17.387
> 
> 标签：php, loops, percentage, sticky

I'm working on this project and I keep running into some issues. First off, it's a quiz that needs to calculate the percentage correct and out put it (all the code will be at the end). The issue with it right now is that it's always calculating 0%, even with right answers and a variable is defined for it. My second issue is that it's not sticky and it needs to be. I don't know what's going on with that. I have only one line done right now and it's not sticky. Help?

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
</head>

<body>
<form method="post">
<?php
    $score = 0;
$percent = 0;

//checking submit button
if(isset($_POST['submit'])){ 
}

//multi-dimensional arrays for questions, selections, and answers
$questions = array(
    'q1' => array('question' => 'Which is optional to making Easy Fudge?', 
        'choice 1' => 'Nuts', 
        'choice 2' => 'Condensed Milk', 
        'choice 3' => 'semi-sweet morsels', 
        'choice 4' => 'bakers chocolate <br />', 
        'answer' => 'nuts 
'),
        'q2' => array('question' => 'One square of bakers chocolate is optional to help enhance the flavor and texture?',
        'choice 1' => 'Yes',
        'choice 2' => 'No',
        'choice 3' => 'I do not know what this bakers chocolate is.',
        'choice 4' => 'Maybe. <br />',
        'answer' => 'Yes', ),
    'q3' => array('question' => 'Between prepration time, cooking time, and cooling time, how long does it take to make Easy Fudge?',
        'choice 1' => '130 minutes',
        'choice 2' => '131 minutes',
        'choice 3' => '132 minutes',
        'choice 4' => '133 minutes <br />',
        'answer' => '131 minutes',),
    'q4' => array('question' => 'If divided into 48 pieces, 2 pieces of this fudge is how many calories?',
        'choice 1' => '140 calories',
        'choice 2' => '150 calories',
        'choice 3' => '160 calories',
        'choice 4' => '170 calories <br />',
        'answer' => '160 calories'),
    'q5' => array('question' => 'You combine your morsels and sweetend condensed milk in a medium sauce pan over which heat?',
        'choice 1' => 'low',
        'choice 2' => 'medium-low',
        'choice 3' => 'medium',
        'choice 4' => 'high <br />',
        'answer' => 'low'),
        );

 //radio buttons and selectability
foreach($questions as $key => $question){
echo $question['question'] . '<br />';  

// TODO: check the POST value and compare to this value (ie. "one")
echo '<input type="radio" name = "'.$key.'" value="one"> '  . $question['choice 1'] . '<br />'; 
    //echo (isset($_POST['radio'] and $_POST['radio']== "one") )? "checked" : "";

echo '<input type="radio" name = "'.$key.'" value="two" >' . $question['choice 2'] . '<br />';
echo '<input type="radio" name = "'.$key.'" value="three"> ' . $question['choice 3'] . '<br />';
echo '<input type="radio" name = "'.$key.'" value="four"> ' . $question['choice 4'] . '<br />';

}

//looping through the questions with nested loops

    if (isset($_POST["submit"])) {
foreach($questions as $key => $question){
    if ( $question['answer']== $_POST[$key]){
        $score++;   
    }else{ $score = $score;
    }
}echo $score;
}//= ($score/5)*100 . "%";

?>
<input name="submit" type="submit" />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:01:43.010

你的问题在这里

```
echo '<input type="radio" name = "'.$key.'" value="one"> '  . $question['choice 1'] . '<br />'; 
```

（和其他 3 行类似）。单选按钮的“值”是“一”，因此，如果选择它，作为 POST 变量发送的内容是 q1=one。

然后，稍后，您在线比较它：

```
if ( $question['answer']== $_POST[$key]){ 
```

这相当于：

```
if ( "nuts" = $_POST['q1'] ) 
```

我们知道 $_POST['q1'] 将是“一”，因此即使您选择了正确的答案，它也不会被计算在内。

有2种方法可以治愈这个

1.  将数组中的所有答案更改为“一”、“二”等...
2.  更改单选按钮的值，在那里也输出 $question['choice 1']

希望这有助于您走上正确的道路；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:55:30.860

不知道为什么你会期望 "$question['answer']" (low) 匹配 $_POST[$key] "one" ？

不仅您的处理逻辑不正确（因为您将单选按钮的值设置为“一”、“二”……等等。而且您用于创建单选按钮的逻辑也不正确。

返回并在您的问题数组上打印_r，然后一旦您看到您正在处理的内容，请弄清楚您将如何适当地循环它以构建您的单选按钮。

接下来，您需要在 $_POST 数据上 print_r 并查看 THAT 是如何返回的。

这是一个好的开始：

```
echo '<input type="radio" name = "'.$key.'" value="' . $question['choice 1'] . '"> '  . $question['choice 1'] . '<br />'; 
```

# java - Implementing a video in Spring MVC

> ID：15142933
> 
> 赞同：1
> 
> 时间：2013-02-28T18:28:23.530
> 
> 标签：java, spring, video

I was wondering how we can implement a video feature in a Spring MVC application. Would I have to use another technology, such as jQuery, or does Spring support a Video feature?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-13T16:36:25.023

[Spring Content](https://paulcwarren.github.io/spring-content/)支持开箱即用的视频流（字节范围）。它支持各种后备存储。使用 Spring Content FS（即文件系统的 Spring Content），您可以自己创建一个由文件系统支持的“视频存储”，并通过 HTTP 将视频存储到客户端。

通过 start.spring.io 或您的 IDE spring 项目向导（在撰写本文时为 Spring Boot 1.5.10）创建一个新的 Spring Boot 项目。添加以下 Spring Boot/Content 依赖项，以便最终获得这些：-

```
<dependencies>
    <!-- Spring Boot -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter</artifactId>
    </dependency>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.3</version>
    </dependency>

    <!-- Spring Content -->
    <dependency>
        <groupId>com.github.paulcwarren</groupId>
        <artifactId>spring-content-fs-boot-starter</artifactId>
        <version>0.0.9</version>
    </dependency>
    <dependency>
        <groupId>com.github.paulcwarren</groupId>
        <artifactId>spring-content-rest-boot-starter</artifactId>
        <version>0.0.9</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-test</artifactId>
        <scope>test</scope>
    </dependency>
</dependencies> 
```

然后在您的 Spring Boot Application 类中，创建一个 VideoStore。将其注释为`StoreRestResource。这有两件事；它会导致 Spring Content 注入此接口的实现（用于文件系统），以及在此接口之上注入 REST 端点 - 使您不必自己编写任何这些：-

```
 @SpringBootApplication 
    public class DemoApplication {

        public static void main(String[] args) {        
           SpringApplication.run(DemoApplication.class, args);  
        }

        @StoreRestResource(path="videos")   
        public interface VideoStore extends Store<String> {} 
    } 
```

默认情况下，Spring Content（用于文件系统）将在 java.io.tmpdir 下创建一个存储。因此，您还需要设置 SPRING_CONTENT_FS_FILESYSTEM_ROOT 环境变量或系统属性来为您的“存储”设置一个稳定的根位置，这样当您的应用程序/服务重新启动时，它可以再次找到视频。

将您的视频复制到此“根”位置。启动应用程序，您的视频将从以下位置流式传输：-

> /videos/some-video.mp4

Spring Content 也支持其他存储；目前是 S3、Mongo 的 GridFS 和 JPA（即 BLOB）。

它也可以在没有 Spring Boot 的情况下使用。如果对这种替代方案感兴趣，请告诉我，我可以为您更新答案。

# java - 有颜色时 XSSFColor.getRgb() 返回 null

> ID：15142934
> 
> 赞同：0
> 
> 时间：2013-02-28T18:28:26.767
> 
> 标签：java, xlsx

我正在使用 poi.apache 阅读 xslx 工作簿，我想获取单元格的 rgb 颜色代码。当我尝试从 XSSFColor 中获取 rgb 代码时，即使我知道那里有颜色，它也会返回 null。

```
for(int k = 0; k < r.getLastCellNum(); k++) {
    XSSFCellStyle ce = (XSSFCellStyle) r.getCell(k, Row.RETURN_NULL_AND_BLANK).getCellStyle();
    XSSFColor col = ce.getFillBackgroundXSSFColor();
    byte[] rgb = col.getARgb(); //null
} 
```

获取内部 CTColor 对象也无济于事。它也返回空值。

```
 byte[] ctRgb = col.getCTColor().getRgb(); // null 
```

有没有其他人遇到过这个问题和/或有解决方案？

**编辑**

正如 Creakazoid 指出的那样，切换背景和前景解决了我的很多问题。但现在我遇到的问题是灰色渐变。

例如，深灰色返回黑色 (FF000000)，浅灰色返回白色 (FFFFFFFF)。我可以得到实际的灰色代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:13:33.633

我不知道为什么会这样，但你想要的是填充*前景*，而不是填充*背景*。

代替：

```
XSSFColor col = ce.getFillBackgroundXSSFColor(); 
```

和：

```
XSSFColor col = ce.getFillForegroundXSSFColor(); 
```

我使用 Excel 2010 进行了测试，这可以按预期工作以报告“背景”颜色。尽管措辞似乎表明它报告了文本颜色，但实际上是使用*org.apache.poi.ss.usermodel.Font*的 color 属性控制的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T07:07:46.180

> 现在的问题是，当我的颜色是“深灰色”时，我会变成黑色（FF000000），而当我的颜色是浅灰色时，我会变成白色（FFFFFFFF）。有没有办法获得更具体的颜色代码？

我找到了解决方法：

```
XSSFColor color = ce.getFillForegroundXSSFColor();
byte[] rgb = color.getRgbWithTint();
if (rgb == null) {
     rgb = color.getRgb();
} 
```

# javascript - Twitter API to Count Hashtag occurrences

> ID：15142935
> 
> 赞同：1
> 
> 时间：2013-02-28T18:28:27.620
> 
> 标签：javascript, api, twitter, webserver, hashtag

I need a way to cound occurrences of a given Hashtag on Twitter, so that i know exacly how many was found on the twitter.

The main idea was to use the simple "search" API, but, i would need to iterate trough many pages to know exacly how many, and also, there is a "limit" for the page (which is 1500 tweets), so, if there are more than 1500 tweets, i would read it as 1500.

Is there any other "inteligent" and emproved way to do this?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:34:16.107

一句话，没有。从[1.1 API 文档](https://dev.twitter.com/docs/api/1.1/get/search/tweets)：

> 请注意，Twitter 的搜索服务以及扩展的搜索 API 并不意味着是推文的详尽来源。并非所有推文都会被索引或通过搜索界面提供。

您可以做的最好的事情是搜索允许的最大推文并遍历页面。然后，您可以使用下一批 1500 条的参数启动另一个搜索`since_id`。通过这种方式，您可以在时间上倒退，一次 1500 条推文，只要您愿意（或者只要 Twitter 提供推文可用）。

祝你好运

# python - 如何知道我有哪个 python 版本以及如何在它们之间切换以及如何知道哪个版本有 PyObjC

> ID：15142936
> 
> 赞同：0
> 
> 时间：2013-02-28T18:28:30.987
> 
> 标签：python, macos, installation, pyobjc

去年我安装了不同版本的python。当我打开 python 解释器时，我可以看到我当前正在运行哪个版本，但我想知道我拥有的所有版本。

我也想在不同的python版本之间切换。我使用的是 OS X 10.7.5，这应该内置 PyObjC。我怎么知道我当前的 python 版本（运行版本）是否支持 PyObjC。是否有一些特定的模块要导入并查看 PyObjC 是否在当前版本中工作。

如果当前版本（Python 2.7.3）不访问 PyObjC 但如果安装了 PyObjC，如何更改我的当前版本以链接它

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:49:25.970

您在哪里安装了这些不同的版本？

10.7 附带 python 2.5、2.6、2.7。我个人使用 fink，但也有 macports 和其他用于安装库的。如果你想在不同版本的 python 之间切换（除非我遗漏了什么）你必须调用那个不同的 python。所以你可以使用`/usr/bin/python2.5`or`/usr/bin/python2.6`或`/usr/bin/python2.7`。

我做了一个快速的谷歌搜索，当我打开一个内置的 python 并运行`import PyObjCTools`它似乎工作（而不是在我预期的 fink python 中工作）。如果您有自定义安装的 python 环境并且想要 PyObjC，我建议您阅读手册或更确切地说是 RTFM。快速浏览一下看起来你就可以做到`easy_install PyObjC`。

**编辑以回答您的评论：**

要将 PyObjC 添加到您的 2.7.3，您只需安装它：[http ://pythonhosted.org/pyobjc/install.html](http://pythonhosted.org/pyobjc/install.html)

它看起来并不复杂，但我以前从未做过。另外，请注意页面下方的包依赖项。

在 python 版本之间共享 python 模块......这可能不是一个好主意。除非它们是您的模块和纯 python 并且在 2.5、2.6 和 2.7 之间使用兼容的语法，否则您不应该这样做。一些安装程序仅适用于特定版本的 python，或者可能会根据所安装的版本以不同的方式安装东西。您始终可以使用 easy_install 和 pip 为每个环境安装相同的软件包，这一点也不难。但是，如果您真的想要，我想您可以做一个共享的 python 安装目录并将其添加到您的`PYTHONPATH`：

```
mkdir ~/my_shared_python
# Add the following line to your .bash_profile or equivalent
export PYTHONPATH=$HOME/my_shared_python:$PYTHONPATH
# You can install packages into there by doing (not sure on the pip syntax):
easy_install -d ~/my_shared_python a_package_im_installing 
```

然后你可以运行任何你想要的python，它会尝试使用这些模块，但我不建议这样做。

# java - What happened to my exception when unmarshalling in jaxb?

> ID：15142943
> 
> 赞同：2
> 
> 时间：2013-02-28T18:28:50.253
> 
> 标签：java, jaxb

I need to run some validation code after my JAXB object is unmarshalled. My unmarshaller's event handler is set to the `DefaultValidationEventHandler`.

Before I added an `afterUnmarshal()` method, when my code threw an Exception, it came out like this:

```
DefaultValidationEventHandler: [ERROR]: com.example.ExceptionClass Error message
     Location: line 3 
```

Now, however, I'm getting

```
DefaultValidationEventHandler: [ERROR]: null
     Location: line 3 
```

My `afterUnmarshal()`

```
void afterUnmarshal(final Unmarshaller unmarshaller, final Object parent) {
    //validation code that may throw a runtime exception
} 
```

Is there something I'm supposed to put into my `afterUnmarshal()` method to keep the exception details? What am I missing?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:11:24.653

我无法重现您在问题中描述的内容。以下是我尝试过的。

**JAVA模型**

**富**

```
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Foo {

    private Bar bar;

} 
```

**酒吧**

该类`Bar`只包含一个`afterUnmarshal`抛出`RuntimeException`.

```
import javax.xml.bind.Unmarshaller;

public class Bar {

    void afterUnmarshal(final Unmarshaller unmarshaller, final Object parent) {
        throw new RuntimeException("Hello World");
    }

} 
```

**演示代码**

在下面的演示代码中，我们将解组一个将触发类`afterUnmarshal`上的方法的文档`Bar`。

```
import java.io.StringReader;

import javax.xml.bind.*;
import javax.xml.bind.helpers.DefaultValidationEventHandler;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Foo.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        unmarshaller.setEventHandler(new DefaultValidationEventHandler());

        StringReader xml = new StringReader("<foo><bar/></foo>");
        Foo foo = (Foo) unmarshaller.unmarshal(xml);
    }

} 
```

**输出**

我们抛出的`RuntimeException`显示在堆栈跟踪中。

```
Exception in thread "main" javax.xml.bind.UnmarshalException
 - with linked exception:
[java.lang.reflect.InvocationTargetException]
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:642)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleError(UnmarshallingContext.java:671)
    at com.sun.xml.bind.v2.runtime.JaxBeanInfo.invokeUnmarshallCallback(JaxBeanInfo.java:555)
    at com.sun.xml.bind.v2.runtime.JaxBeanInfo.invokeAfterUnmarshalMethod(JaxBeanInfo.java:546)
    at com.sun.xml.bind.v2.runtime.unmarshaller.Loader.fireAfterUnmarshal(Loader.java:225)
    at com.sun.xml.bind.v2.runtime.unmarshaller.StructureLoader.leaveElement(StructureLoader.java:271)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.endElement(UnmarshallingContext.java:506)
    at com.sun.xml.bind.v2.runtime.unmarshaller.SAXConnector.endElement(SAXConnector.java:156)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:606)
    at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(AbstractXMLDocumentParser.java:183)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:353)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2715)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:211)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:184)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:157)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:214)
    at forum15142943.Demo.main(Demo.java:17)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.xml.bind.v2.runtime.JaxBeanInfo.invokeUnmarshallCallback(JaxBeanInfo.java:551)
    ... 22 more
Caused by: java.lang.RuntimeException: Hello World
    at forum15142943.Bar.afterUnmarshal(Bar.java:8)
    ... 27 more 
```

# jquery - read list and animate new item at the top with fadein

> ID：15142946
> 
> 赞同：0
> 
> 时间：2013-02-28T18:29:17.857
> 
> 标签：jquery, html, jquery-animate

I have a XML file that I need to read with jQuery and then parse it into a list, and each new item that I'll read should show at the top with fadeIn and all the others items should be animate down. like http://medihack.github.com/fiji/demos/ticker/ticker.html

I have that XML file that I'll retrieve the data

XML:

```
<?xml version="1.0" encoding="utf-8" ?>
   <RecentTutorials>
      <Tutorial author="The Reddest">
         <Title>Silverlight and the Netflix API</Title>
         <Date>1/13/2009</Date>
      </Tutorial>
      <Tutorial author="The Hairiest">
         <Title>Cake PHP 4 - Saving and Validating Data</Title>
         <Date>1/12/2009</Date>
      </Tutorial>
      <Tutorial author="The Tallest">
         <Title>Silverlight 2 - Using initParams</Title>
         <Date>1/6/2009</Date>
      </Tutorial>
      <Tutorial author="The Fattest">
         <Title>Controlling iTunes with AutoHotkey</Title>
         <Date>12/12/2008</Date>
      </Tutorial>
   </RecentTutorials> 
```

and I have that code jQuery and style

CSS:

```
#output {
   width: 400px;
   height: 140px;
   margin: 0 auto;
   overflow: hidden;
   border-color: #000000;
   background-color: #C0C0C0;
   border-style: solid;
   border-width: 2px;
}
ul {
   list-style: none;
}
li {
   float: left;
   width: 270px;
   height: 20px;
   top:-10px;
   position:relative;
   overflow: hidden;
   background-color: #999999;
   border-color: blue;
   border-style: solid;
   border-width: 1px;
} 
```

JS:

```
$(document).ready(function() {
   $.ajax({
      type : "GET",
      url : "jquery_slashxml.xml",
      dataType : "xml",
      success : parseXml2
   });
});

function parseXml2(xml) {
   //print the date followed by the title of each tutorial
   var arr = [];
   $(xml).find("Tutorial").each(function(idx, v) {
      arr[idx] = [];
      $(v).find("Title").each(function(i, vi) {
         arr[idx].push($(vi).text());
      });
      $(v).find("Date").each(function(i, vi) {
         arr[idx].push($(vi).text());
      });
   });
   //console.log(arr.length);
   //$("#output ul").append("<li>" + arr[0][0] + "</li><li>" + arr[0][1] + "</li>" );
   var i = 0;
   var t = setInterval(function() {
      if (i >= arr.length) {
         //clearInterval(t);
         i = 0;
      }
      $('#output ul').prepend("<li>" + arr[i][0] + "-" + arr[i][1] + "</li>").children(':first').hide().fadeIn(2000);   
      //$('#output ul li').animate({"marginTop": "+=5px"}, "2000");
      //  $('#output ul li').animate({ top: '+=22px' }, 2000);
      // $('#output ul').prepend("<li>" + arr[i][0] + "-" + arr[i][1] + "</li>").children(':first').hide().slideDown(2000);
      //$('#output ul li').prev().animate({ top: '+=22px' }, 1000);
      //$("#output ul li:not(" + i + ")").animate("2000");
      //$("#output ul:first-child").prepend("<li>" + arr[i][0] + "</li><li>" + arr[i][1] + "</li>" ).hide().fadeIn(1000);
      i++;
   }, 4000);
} 
```

HTML:

```
<div id="output">
   <ul></ul>
</div> 
```

I have tried many things that you can see in the code sample.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:23:48.000

好的，所以我已经通过两种方式解决了第一个很棘手的问题，我一直在使用 slideDown 函数来使列表显示为滑动

```
 $('#output ul').prepend("<li>" + arr[i][0] + "-" + arr[i][1] + "</li>").children(':first').hide().slideDown(1000).fadeIn(3000); 
```

和第二个答案

```
 $('#output ul li').animate({'marginTop' : "+=20px"}, 1000);
      $('#output ul').prepend("<li>" + arr[i][0] + "-" + arr[i][1] + "</li>").children(':first').hide().fadeIn(4000); 
```

我将`ul`css更改为`position: absolute;`

现在它工作了:)

# asp.net-mvc-3 - 数据注释 MVC3 必需属性

> ID：15142947
> 
> 赞同：4
> 
> 时间：2013-02-28T18:29:27.780
> 
> 标签：asp.net-mvc-3, model, data-annotations, modelstate

我有下面的模型（用户），我用它来添加新用户和更新现有用户。添加新用户时需要输入用户名和密码，更新时只需要输入用户名，因为不允许更改密码。这是问题，添加一个新用户一切正常，因为我输入了名称和密码值，所以 ModelState.IsValid 返回 true，但是在更新用户时没有输入密码，所以它总是有 null 值是什么使得ModelState.IsValid 一直返回 false。即使在“添加视图”中需要密码而在“更新视图”中不需要密码，有没有办法使用相同的模型？请问，有什么建议吗？

```
 public class User {

        public int ID { get; set; }

        [Display(Name = "Nome do Usuário")]
        [Required(ErrorMessage = "Digite o Nome do Usuário.")]
        public string name { get; set; }

        [Display(Name = "Senha")]
        [Required(ErrorMessage = "Digite a Senha.")]
        public string password { get; set; }

    }

public ActionResult Add()
        {
            return View();
        }

      [HttpPost]
            public ActionResult Add(User user)
            {
                UsuariosViewModel viewModel = new UsuariosViewModel();

                if (ModelState.IsValid)
                {
                    viewModel.Msg = new AdmUsuarios().CadastraUsuario(user);
                }
                return View(viewModel);
            }

    public ActionResult Update(int id)
            {
                UsuariosViewModel viewModel = new UsuariosViewModel();

            using (var dataContext = new DBEntities()) 
            {
                Repository<User> repository = new Repository<User>(dataContext);
                viewModel.User = repository.GetById(id);
            }

                return View(viewModel);
            }

        [HttpPost]
        public ActionResult Update(User user, int id)
        {          
            UsuariosViewModel viewModel = new UsuariosViewModel();

            if (ModelState.IsValid)
            {
                viewModel.Msg = new AdmUsuarios().AlteraUsuario(user, id);
            }
            return View();
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T18:35:35.327

您应该使用视图模型。

然后，您的数据注释将属于正在传递给视图的视图模型

```
public class CreateViewModel
{
  public int ID { get; set; }

  [Display(Name = "Nome do Usuário")]
  [Required(ErrorMessage = "Digite o Nome do Usuário.")]
  public string name { get; set; }

  [Display(Name = "Senha")]
  [Required(ErrorMessage = "Digite a Senha.")]
  public string password { get; set; }
} 
```

和编辑

```
 public class EditViewModel
    {
      public int ID { get; set; }

      [Display(Name = "Nome do Usuário")]
      [Required(ErrorMessage = "Digite o Nome do Usuário.")]
      public string name { get; set; }

      //perhaps you don't need the password at all in the edit view
    } 
```

将这些类传递给您的视图，而不是您的域模型（`User`），然后，在控制器中，将视图模型属性映射回模型，然后再持久化到您的数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-25T13:46:26.620

我通常在我`BaseViewModel`的隐藏元素中指定，然后使用 jQuery 来隐藏它们。但是，如果您使用比我通常的从上到下基于列的布局更多的“花哨”布局，它可能会弄乱您的布局。隐藏`form-group`每个要隐藏的元素，它下面的元素只是向上移动。

我的主要工作是 LOB 内网应用程序，所以我大部分时间都会跳过所有花哨的事情。

# ios - getPath url 中的值

> ID：15142953
> 
> 赞同：-1
> 
> 时间：2013-02-28T18:29:43.723
> 
> 标签：ios, objective-c, api, afnetworking

我使用 AFnetworking 在我的 iOS 应用程序的第一个视图中加载位置

```
LocationTableViewController.m

 [[LocationApiClient sharedInstance] getPath:@"locations.json" parameters:nil
                                     success:^(AFHTTPRequestOperation *operation, id response) {
                                         NSLog(@"Response: %@", response);
                                         NSMutableArray *results = [NSMutableArray array];
                                         for (id locationDictionary in response) {
                                             Location *location = [[Location alloc] initWithDictionary:locationDictionary];
                                             [results addObject:location];

                                         }
                                         self.results = results;
                                         [self.tableView reloadData];
                                     }
                                     failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                         NSLog(@"Error fetching locations!");
                                         NSLog(@"%@", error);

                                     }]; 
```

来自api的响应是

```
 {

        "created_at" = "2013-02-23T19:17:37Z";
        id = 1;
        lat = "51.463842";
        long = "-0.6504559999999628";
        name = Legoland;
        "street_address" = "Winkfield Road, Windsor, United Kingdom";
        "updated_at" = "2013-02-23T19:17:37Z";
    }, 
```

我显示名称和 street_address

![在此处输入图像描述](../Images/38e0935bd8770dd6579066af8d0a6b37.png)

当用户单击某个位置时，iOS 应用程序会转到 BeerTableViewController。我想使用类似这个请求的东西来检索点击的位置啤酒列表。

```
BeerTableViewController.m

NSString *path = [NSString stringWithFormat:@"locations/%@/beers.json",
    [dictionary objectForKey:@"location_id"]];

  [[LocationApiClient sharedInstance] getPath:path parameters:nil
                                        success:^(AFHTTPRequestOperation *operation, id response) {
                                            NSLog(@"Response: %@", response);
                                            NSMutableArray *results = [NSMutableArray array];
                                            for (id beerDictionary in response) {
                                                Beer *beer = [[Beer alloc] initWithDictionary:beerDictionary];
                                                [results addObject:beer];

                                            }
                                            self.results = results;
                                            [self.tableView reloadData];
                                        }
                                        failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                            NSLog(@"Error fetching beers!");
                                            NSLog(@"%@", error);

                                        }]; 
```

我不确定当用户单击它时如何从 LocationTableViewController 单元格传递 location_id 值，以便它用适当的值填充 getPath url。单击位置 1 会将 BeerTableViewController 中的 getPath url 设置为`@"locations/1/beers.json`

我从这个请求中得到的响应是

```
{
        "created_at" = "2013-02-23T19:27:10Z";
        description = Awesome;
        id = 2;
        "location_id" = 1;
        name = Pliny the Elder;
        price = "3.50";
        style = IPA;
        "updated_at" = "2013-02-23T19:27:10Z";
    } 
```

现在我`Unknown receiver 'dictionary' No known class method for selector 'objectForKey'`的 BeerTableViewController.m 请求中出现错误

```
NSString *path = [NSString stringWithFormat:@"locations/%@/beers.json",
        [dictionary objectForKey:@"location_id"]]; 
```

我应该设置这个

```
LocationTableViewController.m
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:38:29.390

怎么样：

```
NSString *path = [NSString stringWithFormat:@"locations/%@/beers.json",
    [dictionary objectForKey:@"location_id"]];

[[LocationApiClient sharedInstance] getPath:path //.... 
```

# android - Circular dependency error in relative layout.

> ID：15142954
> 
> 赞同：2
> 
> 时间：2013-02-28T18:29:47.233
> 
> 标签：android, android-layout, runtime-error, android-relativelayout

I am trying to use custom buttons in a relative layout, but on runtimr I am facing this circular dependency error from relative layout, Can someone guide me on this? When I use Linear Layout (after code alterations) it works fine.

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

<ImageView
    android:id="@+id/logo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/logo2" />

<Button
    android:id="@+id/playBtn"
    android:layout_width="80dip"
    android:layout_height="wrap_content"
    android:layout_above="@+id/settingsBtn"
    android:layout_below="@id/logo"
    android:background="@drawable/button_selector"
    android:paddingBottom="5dip"
    android:paddingTop="5dip"
    android:text="Play"
    android:textColor="#ffffff" />

<Button
    android:id="@id/settingsBtn"
    android:layout_width="80dip"
    android:layout_height="wrap_content"
    android:layout_above="@+id/rulesBtn"
    android:layout_below="@id/playBtn"
    android:background="@drawable/button_selector"
    android:paddingBottom="5dip"
    android:paddingTop="5dip"
    android:text="Settings"
    android:textColor="#ffffff" />

<Button
    android:id="@id/rulesBtn"
    android:layout_width="80dip"
    android:layout_height="wrap_content"
    android:layout_above="@+id/exitBtn"
    android:layout_below="@id/settingsBtn"
    android:background="@drawable/button_selector"
    android:paddingBottom="5dip"
    android:paddingTop="5dip"
    android:text="Rules"
    android:textColor="#ffffff" />

<Button
    android:id="@id/exitBtn"
    android:layout_width="80dip"
    android:layout_height="wrap_content"
    android:layout_below="@id/rulesBtn"
    android:background="@drawable/button_selector"
    android:paddingBottom="5dip"
    android:paddingTop="5dip"
    android:text="Exit"
    android:textColor="#ffffff" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:31:48.037

由于在另一个上方的按钮意味着第二个在第一个下方，因此您无需同时指定两者。

消除：

```
android:layout_below="@id/playBtn" 
```

还

```
 android:layout_below="@id/settingsBtn" 
```

和

```
android:layout_below="@id/rulesBtn" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:34:28.443

`RelativeLayout`使用上面、下面、toLeftOf、toRightOf 之类的东西。你可以从逻辑上说“X 在 Y 的左边；Y 在 X 的右边”。这是有道理的，但它并没有准确说明一个结束和另一个开始的地方。当您这样做时，解析器不知道如何布置这些值。因此，您只需说“X 在 Y 的左侧”。然后它将首先布局 Y（占用配置为占用的任何空间而不考虑 X），并将 X 放在它的左侧。

简短的回答：使用`layout_above`or`layout_below`来定义关系，但不要同时使用两者。

# java - encrypt file or string secure android

> ID：15142960
> 
> 赞同：1
> 
> 时间：2013-02-28T18:30:06.313
> 
> 标签：java, android, security, encryption, aes

I'm currently stuck with the security in my app. My application records the GPS location of the user every 10 minutes and after 12 hours it sends the data to a server. I'm currently saving the location of the user in a *.txt file in the internal memory. Now, I need to secure this file so it can only be edited my application so the user cannot hack it and change the gps locations recorded.

I've read about encrypting the strings or the file itself but here is my question. All over stackoverflow people do not recommend to hardcode the password even with code obfuscation. How else can I secure the data on this file? Using ProGuard + code obfuscation by myself (bit shifting, mathematical operations, etc) isn't enough to save the password in my code? Any comments appreciated, I need this to be secure as the data must remain untouched. Thanks!!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:38:58.940

如果密码在内存中，即使未加密/混淆，如果用户知道他们在做什么，它也可以被恢复和/或滥用。

要解决此问题，您应该让应用程序从服务器请求密钥以用于加密。密钥本身应该使用 SSL 加密/签名，这样您就可以保证您的服务器发送了密钥，并且在此过程中密钥不会被截获。立即从内存中清除密钥，使其不再保留在设备上。

这个解决方案仍然不是万无一失的。用户可以对应用程序进行逆向工程并告诉它使用任何旧密钥。只要您将坐标存储在设备上，它们就会以某种方式受到攻击。使用我刚刚描述的技术，攻击者仍然可以欺骗 GPS 源，或者使用重放攻击。为了防止这种情况，您需要为每次保存使用不同的密钥，并在服务器上跟踪应用密钥的顺序。

更安全的方法是根本不在设备上存储位置。一旦它们可用，就立即上传它们，使用加密/签名 SSL 方法来防止篡改。在服务器上对其进行健全性检查，以排除不良的欺骗工作。当信任来自设备的数据（例如 GPS 坐标）时，您就有被聪明的攻击者操纵的风险。

# asp.net - Does smtpfailedrecipientsexception work for CC and BCC

> ID：15142961
> 
> 赞同：1
> 
> 时间：2013-02-28T18:30:05.823
> 
> 标签：asp.net, system.net.mail

I'm trying to get my head round the System.Net.Mail class but I'm having trouble finding decent documentation.

First query - Say I have an email with a CC and a BCC email, do I need to catch SmtpFailedRecipientsException instead of SmtpFailedRecipientException (note the singlular Recipient) or is it intended for sending to multiple TO recipients?

Second query - when I iterate through the exceptions using the method below, will the inner exceptions relate to the email addresses that have failed, such as the BCC but not the TO or CC. If this is the case will the resend then go to all 3 again?

```
 static void CheckExceptionAndResend(SmtpFailedRecipientsException ex, SmtpClient client, MailMessage message)
    {
        var status = ex.StatusCode;

        for (int i = 0; i < ex.InnerExceptions.Length; i++)
        {
            if (status == SmtpStatusCode.MailboxBusy ||
                status == SmtpStatusCode.MailboxUnavailable ||
                status == SmtpStatusCode.TransactionFailed)
            {
                System.Threading.Thread.Sleep(3000);
                client.Send(message);
            }
            else
            {
                // TODO: Log delivery failure
            }
        }
    } 
```

All advice appreciated. Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:57:22.247

我不知道也无法回答您的第一个查询，但要回答第二个查询，如果您没有在除此方法之外的任何地方发送消息，我不明白该消息将如何再次或两次发送给收件人..

但是，如果您在由于异常而调用此方法之前使用 smtpclient 实例发送消息，那么是的，消息会再次发送到所有 3 个，即 TO、BCC 和 CC，而不仅仅是发送给失败的收件人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T21:23:25.057

对于您的第一个查询，请查看[SmtpTransport.SendMail()](http://referencesource.microsoft.com/System/net/System/Net/mail/SmtpTransport.cs.html#eb69bd2f50005459)的源代码，该代码由[SmtpClient.Send()](http://referencesource.microsoft.com/System/R/cca069628a6b9b57.html)调用。如果只有一个收件人（无论是收件人、抄送还是密件抄送）被拒绝，则生成的异常将是 SmtpFailedRecipientException，但如果多个收件人被拒绝，则将是 SmtpFailedRecipientsException。不方便的是，我相信这意味着你需要尝试捕捉这两种类型。

# java - 码头返回 403 Forbidden

> ID：15142962
> 
> 赞同：4
> 
> 时间：2013-02-28T18:30:11.757
> 
> 标签：java, jetty

嗨，我正在将我的 web 应用程序从 tomcat 移植到 Jetty。我正在使用 Jetty runner 来启动它。我正在使用以下命令来启动 Jetty：

> java -jar jetty-runner.jar --port --path url-path path-to-war

但是，当我尝试从浏览器浏览到时，出现以下错误：

> HTTP 错误 403
> 
> 访问问题。原因：
> 
> ```
> Forbidden 
> ```

在日志中，我看到以下警告：

> 警告：oejs.SecurityHandler：没有身份验证器：{RoleInfo,C[*, all_auth_users]}

我正在尝试开箱即用地使用 Jetty，并且没有在任何地方自定义任何配置。是否需要任何其他配置才能完成这项工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T14:00:34.247

可能的原因：您的 war/webapp 定义了安全约束，但您没有指定在服务器端使用什么身份验证类型。

任何一个：

*   `<security-constraint>`在你的 war/webapp`WEB-INF/web.xml`文件中删除你的。或者..
*   在服务器端添加身份验证方案。查看`etc/jetty-testrealm.xml`使用 HashLoginService 身份验证器的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-14T15:22:22.723

就我而言，我忘记了粘贴 index.html 示例页面。它的全部。

# c - 识别 C 中的趋势 - 微控制器采样

> ID：15142970
> 
> 赞同：0
> 
> 时间：2013-02-28T18:30:22.397
> 
> 标签：c, microcontroller, sampling

我正在研究一个 MC68HC11 微控制器，并有一个模拟电压信号输入，我已经对其进行了采样。该场景是一台称重机，当物体撞击传感器然后它稳定（这是我想要的样本）然后在物体角色关闭之前再次达到峰值时，会出现大峰值。

我遇到的问题是想办法让程序检测到这个稳定点并对其进行平均以产生整体权重，但无法弄清楚如何：/。我考虑过的一种方法是比较以前的值，看看它们之间是否有很大的差异，但我没有取得任何成功。下面是我正在使用的**C代码：**

```
#include <stdio.h>
#include <stdarg.h>
#include <iof1.h>

void main(void)
{
/* PORTA, DDRA, DDRG etc... are LEDs and switch ports */

unsigned char *paddr, *adctl, *adr1;
unsigned short i = 0;
unsigned short k = 0;
unsigned char switched = 1; /* is char the smallest data type? */

unsigned char data[2000];

DDRA = 0x00; /* All in */
DDRG = 0xff;
adctl = (unsigned char*) 0x30;
adr1 = (unsigned char*) 0x31;

*adctl = 0x20; /* single continuos scan */

while(1)
{
    if(*adr1 > 40)
    {
        if(PORTA == 128) /* Debugging switch */
        {
            PORTG = 1;
        }
        else
        {
            PORTG = 0;      
        } 
        if(i < 2000)
        {
            while(((*adctl) & 0x80) == 0x00);
            {
                data[i] = *adr1;
            } 
                            /* if(i > 10 && (data[(i-10)] - data[i]) < 20) */
            i++;
        } 
        if(PORTA == switched)
        {   
            PORTG = 31;
            /* Print a delimeter so teemtalk can send to excel */
            for(k=0;k<2000;k++)
            {
                printf("%d,",data[k]);
            }
            if(switched == 1) /*bitwise manipulation more efficient? */
            {
                switched = 0;
            }
            else
            {
                switched = 1;
            }
            PORTG = 0;
        }
        if(i >= 2000)
        {
            i = 0;
        }
    }
}
} 
```

期待听到任何建议:)

（下图显示了这些值的外观，红色框是我要识别的区域。

![结果](../Images/9117b3350c04446fa6d3754932cbcae2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T01:20:35.553

当您的采样序列出现故障（短暂的瞬变）时，请尝试改进硬件，即更改布局、添加去耦、添加过滤等。

如果该方法失败，那么一个中值滤波器 [1] 说五个位置长，它获取最后五个样本，对它们进行排序并输出中间的一个，因此瞬态的两个样本对其输出没有影响。（七处……三瞬）

然后是计算效率高的指数平均低通滤波器 [2]

```
 y(n) = y(n–1) + alpha[x(n) – y(n–1)] 
```

选择 alpha（1/2^n，右移除法）以产生小于基础响应（~50 个样本）的时间常数 [3]，但仍滤除噪声。增加有效小数位将避免量化问题。

通过这种改进的采样序列、阈值和循环计数，可用于检测静止持续时间。

此外，如果静止期结束后总是伴随着大的突然变化，那么使用采样延迟“阵列”，可以检测到突然变化，但仍然有最后一个静止样本可用于记录。

[1] [http://en.wikipedia.org/wiki/Median_filter](http://en.wikipedia.org/wiki/Median_filter)

[2] [http://www.dsprelated.com/showarticle/72.php](http://www.dsprelated.com/showarticle/72.php)

[3] [http://en.wikipedia.org/wiki/Time_constant](http://en.wikipedia.org/wiki/Time_constant)

注意为上述过滤操作添加代码将降低最大可能的采样率，但 printf 可以替换为更快的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:39:47.980

连续存储当前值和与前一个值的差值。

注意 delta 何时随着重量应用到秤的开始而减小 注意当 delta 何时随着重量应用到秤
的结束而增加
取 X 个具有小 delta 的值并将它们平均

顺便说一句，我确信这已经完成了 100 万次，我在想搜索`scale PID`或`weight PID`会找到很多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T19:01:27.313

如果您要与前一个值进行比较，请不要忘记在读数值之间的某个位置使用 ___delay_ms(XX) 函数。如果代码不断循环，每一步的差异显然很小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T18:14:11.090

看看你漂亮的图表，我会说你应该只寻找下降沿，它比前沿更一致。

换句话说，让样本累积，以预定义的窗口大小一直计算运行平均值，记住以前值的偏差仅供参考，检查值中是否存在较大的负值（例如绝对值比当前值小十倍）运行平均值），您的运行平均值就是您的价值。您可以稍微返回一点（忽略平均值中的最后几个值，然后重新计算）以补偿每个负凹凸之前图片中可见的小的正凹凸......这里不需要繁重的数学，你无法更好地模拟现实那么你的图片就显示出来了，只要确保你的代码检测到每个样本的结尾。您必须以足够快的速度使用样本以确保没有遗漏任何负面影响（否则您的数据平均会出现很大的时间错误）。

而且您不需要那么大的阵列，在您检测到负碰撞时，基于较小的窗口大小，较小的残余误差，运行平均值会更好。

# android - 由同一个类的意图创建的活动是同一个活动吗？

> ID：15142971
> 
> 赞同：3
> 
> 时间：2013-02-28T18:30:25.733
> 
> 标签：android, android-intent, android-activity, android-lifecycle

如果我`Intent`每次单击按钮时都创建一个新的相同类，那么创建的活动是否相同？

每次单击按钮时，我都希望在其中显示一个带有滑块的对话框，并且在更改它之后，我希望保存状态，以便下次打开对话框时滑块的状态是相同的。

我的按钮代码是这样的：

```
button.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        Intent intent = new Intent(v.getContext(), Slider_Logic.class);
        v.getContext().startActivity(intent);               
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:34:21.403

我认为“相同”是指相同的对象实例。答案是不。通常，当您启动一个新活动时，它会创建该活动的一个新实例并将其推送到现有活动前面的堆栈中。

我说“一般”是因为活动的[启动模式](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)会影响这种行为。例如，如果您设置`launchMode`为`singleTop`，如果目标任务中尚不存在活动实例，它将创建一个新的活动实例。请参阅文档以获取更多信息。

# python - python重新匹配组

> ID：15142975
> 
> 赞同：0
> 
> 时间：2013-02-28T18:30:39.213
> 
> 标签：python, regex

我想从字符串中提取一些字段，但是我不确定它们有多少。我使用了正则表达式，但是有一些我不明白的问题。

例如：

```
 199  -> (199)
  199,200  -> (199,200)
  300,20,500 -> (300,20, 500) 
```

我试过了，但是有点我无法让它工作。希望有人能给我一些建议。我会感激的。

我试过的正则表达式：

```
>>> re.match('^(\d+,)*(\d+)$', '20,59,199,300').groups()
('199,', '300')
// in this, I do not really care about ',' since I could use .strip(',') to trim that. 
```

我做了一些谷歌：并尝试使用 re.findall，但我不知道如何得到这个：

```
>>> re.findall('^(\d+,)*(\d+)$', '20,59,199,300')
[('199,', '300')] 
```

-------------------------------------------------- - - 更新

我意识到，如果不讲整个故事，这个问题可能会令人困惑。基本上我想验证在 crontab （或类似）中定义的语法

我为 _VALID_EXPRESSION 创建了一个数组：它是一个嵌套元组。

```
 (field_1,
  field_2,
 ) 
```

对于每个 field_1，它有两个元组，

```
 field_1:   ((0,59),        (r'....', r'....'))
            valid_value   valid_format 
```

在我的代码中，它看起来像这样：

```
_VALID_EXPRESSION =  \
 12     (((0, 59), (r'^\*$', r'^\*/(\d+)$', r'^(\d+)-(\d+)$',
 13                 r'^(\d+)-(\d+)/(\d+)$', r'^(\d+,)*(\d+)$')),   # second
 14      ((0, 59), (r'^\*$', r'^\*\/(\d+)$', r'^(\d+)-(\d+)$',
 15                 r'^(\d+)-(\d+)/(\d+)$', r'^(\d+,)*(\d+)$')),   # minute
 16        .... ) 
```

在我的解析函数中，我所要做的就是提取所有组并查看它们是否在有效值范围内。

我需要的正则表达式之一是它能够正确匹配这个字符串 '50,200,300' 并在这种情况下提取所有数字。（我当然可以使用 split()，但是，它会背叛我的初衷。所以，我不喜欢这个想法。）

希望这会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:36:20.397

为什么不直接使用 string.split？

```
numbers = targetstr.split(',') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:35:35.410

使用正则表达式的最简单解决方案是：

```
r"(\d+,?)" 
```

您可以使用`findall`来获取您想要的`300,`、`20,`和`500`。或者，如果您不想要逗号：

```
r"(\d+),?" 
```

这匹配一组 1 个或多个数字，后跟 0 或 1 个逗号（不在组中）。

无论哪种方式：

```
>>> s = '300,20,500'
>>> r = re.compile(r"(\d+),?")
>>> r.findall(s)
['300', '20', '500'] 
```

但是，正如 Sahil Grover 指出的那样，如果这些是您的输入字符串，则这相当于只调用`s.split(',')`. 如果您的输入字符串可能包含非数字，那么这将确保您只匹配数字字符串，但即使这样也可能更简单，因为`filter(str.isdigit, s.split(','))`.

如果你想要 a `tuple`of `int`s 而不是 a `list`of `str`s：

```
>>> tuple(map(int, r.findall(s)))
(300, 20, 500) 
```

`map`如果您发现推导式/生成器表达式比/`filter`调用更容易阅读：

```
>>> tuple(int(x) for x in r.findall(s))
(300, 20, 500) 
```

或者，更简单地说：

```
>>> tuple(int(x) for x in s.split(',') if x.isdigit())
(300, 20, 500) 
```

如果你想要 string `(300, 20, 500)`，虽然你当然可以通过调用`repr`来做到这一点`tuple`，但有一种更简单的方法来获得它：

```
>>> '(' + s + ')'
'(300, 20, 500)' 
```

* * *

你原来的正则表达式：

```
'^(\d+,)*(\d+)$' 
```

... 将准确返回两个组，因为模式中有两个组。而且，由于你明确地将它包装在`^`and`$`中，它必须匹配整个字符串，所以`findall`在这里不会帮助你——它会找到与`match`.

# kerberos - 在 JGSS 中建立上下文期间禁用重放缓存

> ID：15142976
> 
> 赞同：2
> 
> 时间：2013-02-28T18:30:39.697
> 
> 标签：kerberos, jgss

我想在 Kerberos ( JGSS ) 中建立上下文期间禁用重播缓存以避免`Request is a replay (34)`异常。JGSS 提供了在发起端调用的方法 requestReplayDet() 但这仅用于检测在上下文建立之后传递的令牌的重放（而不是在上下文建立期间）。

在 CGSS 中，我们有环境变量 KRB5RCACHENAME 可以设置为 none，但在 Java GSS 中它不起作用。

**（编辑）Java 8 中添加的支持：[https](https://docs.oracle.com/javase/8/docs/technotes/guides/security/enhancements-8.html) : //docs.oracle.com/javase/8/docs/technotes/guides/security/enhancements-8.html -> "-Dsun.security.krb5.rcache=none"**

# python - python2.7有在线内存分析器吗？

> ID：15142978
> 
> 赞同：2
> 
> 时间：2013-02-28T18:30:41.173
> 
> 标签：python

[推荐使用哪种 Python 内存分析器？](https://stackoverflow.com/questions/110259/python-memory-profiler)

[Python3 是否有任何工作内存分析器](https://stackoverflow.com/questions/7758699/is-there-any-working-memory-profiler-for-python3) 我已经检查过这些帖子

但我很想知道是否有任何在线工具可以发布代码并完成工作？

# java - servlet 的默认超时是多少？

> ID：15142979
> 
> 赞同：1
> 
> 时间：2013-02-28T18:30:44.597
> 
> 标签：java, servlets, web, weblogic

[http://docs.oracle.com/javaee/1.3/api/javax/servlet/Servlet.html](http://docs.oracle.com/javaee/1.3/api/javax/servlet/Servlet.html) “销毁......仅在 servlet 的服务方法中的所有线程都退出或超时时间过后才调用”

destroy 方法的默认超时时间是多少？我该如何改变它？我正在运行 weblogic，并且在管理控制台中，每个部署模块都有配置。上面提到的超时是 weblogic 管理控制台调用的 Session Invalidation Interval 还是 Session Timeout？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:38:08.800

实际上，destroy() 方法只会在应用程序服务器卸载您的 Web 应用程序时调用。这是关闭服务器或取消部署应用程序的时间。

请注意，会话超时是完全不同的。它指定用户会话在没有用户交互的情况下保持活动的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:37:18.693

servlet 没有超时。它一直存在到 Web 应用程序还活着。是的，每个会话都有一个默认超时，请参阅您的服务器文档以了解默认会话超时。你可以覆盖它。

# php - 连接时出现错误

> ID：15142982
> 
> 赞同：0
> 
> 时间：2013-02-28T18:30:48.070
> 
> 标签：php, concatenation

这是我的代码...

```
<?php

$j = 1;
$imgClass = "cname";
$imgSet = 'imgSet'.$j;
$setClass = $imgSet.' '.$imgClass;

$divHtml = '<div class=' . $setClass . '>' .'some text'. '</div>';

echo $divHtml;

?> 
```

期望的输出是：

```
<div class="imgSet1 cname">some text</div> 
```

当前输出为：

```
<div class="imgSet1" cname="">some text</div> 
```

不明白我哪里错了...

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:33:50.803

你实际上并没有`class`用引号括起来。否则，您的代码非常好。

改变这个：

```
$divHtml = '<div class=' . $setClass . '>' .'some text'. '</div>'; 
```

对此：

```
$divHtml = '<div class="' . $setClass . '">' .'some text'. '</div>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:35:22.723

缺少双引号：

```
$divHtml = '<div class="' . $setClass . '">some text</div>'; 
```

'some text' 周围的单引号不是必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T18:36:33.090

让我们分解你的代码：

```
$j = 1;
$imgClass = "cname";
$imgSet = 'imgSet'.$j; // "imgSet1"
$setClass = $imgSet.' '.$imgClass; // "imgSet1 cname"

$divHtml = '<div class=' . $setClass . '>' .'some text'. '</div>'; // "<div class=imgSet1 cname>some text</div>" 
```

特别仔细观察变量的真正含义。

我会建议：

```
$divHtml = "<div class='$setClass'>some text</div>"; // or use =\"..\" in class 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T18:39:53.853

报价容易出现人为错误。将它与串联结合起来更糟。尝试`"`使用变量插值，

```
 $divHtml = "<div class='$setClass'>some text</div>"; 
```

或`HEREDOC`语法（通常用于较长的字符串），

```
$divHtml = <<<EOD
    <div class='$setClass'>some text</div>;
EOD; 
```

这样可以避免在代码中分散小的、容易混淆的标记。

# java - 如何为json对象编写正则表达式？

> ID：15142985
> 
> 赞同：0
> 
> 时间：2013-02-28T18:30:58.667
> 
> 标签：java, regex

我是正则表达式的新手，并且已经要求编写一些复杂的表达式（好吧，它们可能很简单，但对我来说它们不是:)）。
我尝试了很多变化，但从未成功。我要写的表达式是：
1\. {"d":{"results":SOME_JSON_OBJECT}}
2\. {"d":{"results":{"JSON_KEY_AS_STRING":SOME_JSON_ARRAY/OBJECT}}}
3\. {"d":{"results":[SOME_JSON_OBJECTS]}}
4\. {"d":SOME_JSON_ARRAY/OBJECT_OR_AN_PRIMITIVE}

注意，ANY_VALUE 可以是任何东西。唯一重要的是所有不是 ANY_VALUE 的字符，包括所有“特殊”字符，例如“、{、}、[、]、: 等......

有人可以帮忙吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:37:30.767

Java 正则表达式风格不支持正则表达式中的递归模式（PCRE 和 .NET 具有允许递归模式的扩展）。

因此，您不能让正则表达式正确解析对象，因为它们可以具有任意深度。你需要的是一个 JSON 解析器，如果你想自己写，我建议你看看 ANTLR 或 GOLD 等解析器工具，它们可以帮助你完成这个过程（你为解析编写一个语法，然后工具为您创建实际的解析代码）。

[这](https://code.google.com/p/bsn-goldparser/wiki/JsonGrammar)是我前段时间为 GOLD 编写的 JSON 语法。

# java - 为什么我的代码中不断出现找不到符号方法错误？

> ID：15142986
> 
> 赞同：0
> 
> 时间：2013-02-28T18:30:59.100
> 
> 标签：java

我正在为这个类的 Zuul Game 工作，我必须将 currentRoom 变量从 Game 类重构为 Player 类。我对大部分代码都很有信心，但是当我尝试编译时，Cannot Find Symbol - Method 错误不断出现。请帮忙。

这是游戏类：

```
class Game {
    private Parser parser;
    private Scenario scenario;

    /**
     * Create the game and initialise its internal map.
     */
    public Game() {
        scenario = new Scenario();
        parser = new Parser();
    }

    /**
     *  Main play routine.  Loops until end of play.
     */
    public void play() {
        printWelcome();

        // Enter the main command loop.  Here we repeatedly read commands and
        // execute them until the game is over.

        boolean finished = false;
        while (!finished) {
            Command command = parser.getCommand();
            finished = processCommand(command);
        }
        System.out.println("Thank you for playing.  Good bye.");
    }

    /**
     * Print out the opening message for the player.
     */
    private void printWelcome() {
        System.out.println();
        System.out.println("Welcome to the world of Zuul!");
        System.out.println("Zuul is a new, incredibly boring adventure game.");
        System.out.println("Type 'help' if you need help.");
        System.out.println();
        System.out.println(getCurrentRoom().getLongDescription());
    }

    /**
     * Given a command, process (that is: execute) the command.
     * If this command ends the game, true is returned, otherwise false is
     * returned.
     */
    private boolean processCommand(Command command) {
        boolean wantToQuit = false;

        if (command.isUnknown()) {
            System.out.println("I don't know what you mean...");
            return false;
        }

        String commandWord = command.getCommandWord();
        if (commandWord.equals("help"))
            printHelp();
        else if (commandWord.equals("go"))
            goRoom(command);
        else if (commandWord.equals("quit")) {
            wantToQuit = quit(command);
        }
        return wantToQuit;
    }

    // implementations of user commands:

    /**
     * Print out some help information.
     * Here we print some stupid, cryptic message and a list of the 
     * command words.
     */
    private void printHelp() {
        System.out.println("You are lost. You are alone. You wander");
        System.out.println("around at the university.");
        System.out.println();
        System.out.println("Your command words are:");
        parser.showCommands();
    }

    /** 
     * Try to go to one direction. If there is an exit, enter the new
     * room, otherwise print an error message.
     */
    private void goRoom(Command command) {
        if (!command.hasSecondWord()) {
            // if there is no second word, we don't know where to go...
            System.out.println("Go where?");
            return;
        }

        String direction = command.getSecondWord();

        // Try to leave current room.
        Room nextRoom = getCurrentRoom().getExit(direction);

        if (nextRoom == null)
            System.out.println("There is no door!");
        else {
            getCurrentRoom() = nextRoom;
            System.out.println(getCurrentRoom().getLongDescription());
        }
    }

    /** 
     * "Quit" was entered. Check the rest of the command to see
     * whether we really quit the game. Return true, if this command
     * quits the game, false otherwise.
     */
    private boolean quit(Command command) {
        if (command.hasSecondWord()) {
            System.out.println("Quit what?");
            return false;
        } else
            return true; // signal that we want to quit
    }
} 
```

这是播放器类：

```
public class Player {
    private Room currentRoom;

    /**
     * Constructor for objects of class Player
     */
    public Player() {
        currentRoom = getBeginRoom();
    }

    /**
     * Sets the current room that the player is in.
     */
    public void setCurrentRoom(Room room) {
        currentRoom = room;
    }

    /**
     * Returns the current room that the player is in.
     */
    public Room getCurrentRoom() {
        return currentRoom;
    }
} 
```

这是场景类：

```
public class Scenario {
    private List rooms; // List of all rooms in the game
    private Room beginRoom;
    private Random random;

    /**
     * Create a complete scenario (with all rooms).
     */
    public Scenario() {
        Room outside, theatre, pub, lab, office, transporter;

        // create the rooms
        outside = new Room("outside the main entrance of the university");
        theatre = new Room("in a lecture theatre");
        pub = new Room("in the campus pub");
        lab = new Room("in a computing lab");
        office = new Room("in the computing admin office");
        transporter = new TransporterRoom("in a dark place", this);

        // initialise room exits
        outside.setExit("east", theatre);
        outside.setExit("south", lab);
        outside.setExit("west", pub);

        theatre.setExit("west", outside);
        theatre.setExit("north", transporter);

        transporter.setExit("south", theatre);

        pub.setExit("east", outside);

        lab.setExit("north", outside);
        lab.setExit("east", office);

        office.setExit("west", lab);

        beginRoom = outside; // start game outside

        rooms = new ArrayList();
        rooms.add(outside);
        rooms.add(theatre);
        rooms.add(pub);
        rooms.add(lab);
        rooms.add(office);
        rooms.add(transporter);

        random = new Random();
    }

    /**
     * Return the room where players start the game.
     */
    public Room getBeginRoom() {
        return beginRoom;
    }

    /**
     * Return a random room in this game.
     */
    public Room getRandomRoom() {
        return (Room) rooms.get(random.nextInt(rooms.size()));
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:41:12.810

您的`Game`类正在调用`getCurrentRoom`自身（或静态导入的静态方法）而不是 Player 的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:38:24.177

确保您的类路径具有这些文件的路径！

# c# - 尝试从 asp.net Web API 帖子中获取正确的 JSON 格式

> ID：15142987
> 
> 赞同：0
> 
> 时间：2013-02-28T18:31:03.690
> 
> 标签：c#, asp.net, json, asp.net-web-api

我需要我的响应看起来像这样（对象内的 JSON 数组）：

```
{"files":[
 {
"name":"3992wp_ss_20130215_0001.jpg","size":102,"url":"/Files/3992wp_ss_20130215_0001.jpg","thumbnail_url":"","de    lete_url":"/Files/3992wp_ss_20130215_0001.jpg","delete_type":"DELETE"
} 
  ]} 
```

但我得到了这个（对象周围的 JSON 数组）：

```
[{"files":  
{"name":"3992wp_ss_20130215_0001.jpg","size":102,"url":"/Files/3992wp_ss_20130215_0001.jpg","thumbnail_url":"","delete_url":"/Files/3992wp_ss_20130215_0001.jpg","delete_type":"DELETE"}}
] 
```

这是我的代码：

```
public IEnumerable<allFiles> Post()
{
    // read data

    List<DocFile> files = new List<DocFile>();

    DocFile file1 = new DocFile();
    file1.name = _fileName;
    file1.size = _lengh;
    file1.url = "/Files/" + _fileName;
    file1.thumbnail_url = "";
    file1.delete_url = "/Files/" + _fileName; 
    file1.delete_type = "DELETE";

    files.Add(file1);

    allFiles fileCont = new allFiles();
    fileCont.files = files;

    return fileCont;
}

public class allFiles
{
    public IEnumerable<DocFile> files { get; set; }
}

public class DocFile
{
    public string name { get; set; }
    public long size { get; set; }
    public string url { get; set; }
    public string thumbnail_url { get; set; }
    public string delete_url { get; set; }
    public string delete_type { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:41:04.187

我认为您的问题在于返回，尝试返回`allFiles`实例。

就像是：

```
public allFiles Post()
{
     //read data

    List<DocFile> files = new List<DocFile>();

    DocFile file1 = new DocFile();
    file1.name = _fileName;
    file1.size = _lengh;
    file1.url = "/Files/" + _fileName;
    file1.thumbnail_url = "";
    file1.delete_url = "/Files/" + _fileName; 
    file1.delete_type = "DELETE";

    files.Add(file1);

    allFiles fileCont = new allFiles();
    fileCont.files = files;

    return fileCont;
} 
```

# autocomplete - 未导入/引用的类型的 ReSharper AutoCompletion？

> ID：15142989
> 
> 赞同：2
> 
> 时间：2013-02-28T18:31:10.523
> 
> 标签：autocomplete, namespaces, resharper

我有一个类 UserTools {}，当我想在导入/引用其命名空间之前使用它时，我必须输入确切的名称作为“UserTools”。如果我键入“usertools”，ReSharper 不会弹出自动完成或命名空间引用对话框。

有没有办法让 ReSharper 区分大小写，或者在未导入相关命名空间时更好地理解“usert”？

（好吧，如果它会显示所有命名空间中的所有类型，它会很慢，但是它可以很好地显示我当前项目中的命名空间而没有任何开销，因为我没有一个庞大的项目。）

# entity-framework - 实体框架。查询具有多对多关系的实体

> ID：15142990
> 
> 赞同：1
> 
> 时间：2013-02-28T18:31:14.113
> 
> 标签：entity-framework

我有两个实体：

```
public class Banner {
  public Int32 Id { get; set; }
  public String Name { get; set; }
  public virtual ICollection<Role> Roles { get; set; }
} // Banner

public class Role {
  public Int32 Id { get; set; }
  public String Name { get; set; }
  public virtual ICollection<Banner> Banners { get; set; }
} // Role 
```

我有一个角色 ID 列表：

```
List<Int32> roles; 
```

我需要在我的列表中找到至少包含一个角色的所有横幅：

```
context.Banners.Where(x => x.Roles.Contains(????)) 
```

我怎样才能做到这一点？

谢谢你，米格尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:34:47.563

```
context.Roles.Where(r => roles.Contains(r.Id)).SelectMany(r=>r.Banners) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T19:46:05.597

你很接近：

```
context.Banners.Where(x => x.Roles.Any(r => roles.Contains(r.Id))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T18:37:06.437

您需要运行嵌套的 Anys：

```
context.Banners.Where(x => roles.Any(roleId => x.Roles.Any(BannerRole => roleId == BannerRole.Id) 
```

# excel - 如何跨多行多列连接数据和删除列？

> ID：15142991
> 
> 赞同：0
> 
> 时间：2013-02-28T18:31:19.993
> 
> 标签：excel, vba, iteration, concatenation

我有一个宏，旨在检查字符串“Doc1”和“Doc2”是否出现在第一行（标题）的连续列中。
然后，对于所有后续行，宏应将 Doc1 列中的信息与 Doc2 列中的信息连接起来，并用逗号分隔响应。然后它应该删除整个 Doc2 列。
使用我拥有的代码，这适用于并排的 Doc1 和 Doc2 的第一个实例。对于其余部分，它只是删除 Doc2 列，而不将信息连接到 Doc1 框中。对此的任何帮助将不胜感激。

这是*代码*：

```
Sub test()

Dim CurrCol As Integer
Dim NewValue As String
Dim CurrRow As Integer

CurrCol = 1
RowNum = 1

'set last cell
While Cells(1, CurrCol).Address <> "$HOK$1"

    'MsgBox Cells(1, CurrCol).Address & " " & Cells(1, CurrCol).Value

        If InStr(Cells(1, CurrCol).Value, "Doc1") > 0 Then
            ' look at next cell
            If InStr(Cells(1, CurrCol + 1).Value, "Doc2") > 0 Then
                For i = RowNum + 1 To 10
                    If Trim(Cells(RowNum + 1, CurrCol + 1).Value) <> "" Then
                        NewValue = Cells(RowNum + 1, CurrCol).Value & ", " & Cells(RowNum + 1, CurrCol + 1).Value
                    '   MsgBox "New Value is " & NewValue
                        Cells(RowNum + 1, CurrCol).Value = NewValue
                        RowNum = RowNum + 1
                    End If

                Next

            End If

            'now delete currCol+1
            Range(Columns(CurrCol + 1), Columns(CurrCol + 1)).Select
            Selection.Delete Shift:=xlToLeft

        End If

    'Advance the counter
    CurrCol = CurrCol + 1
Wend

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:36:10.433

您遇到的问题似乎与 line 有关`RowNum = RowNum + 1`。此行是不必要的，并导致您的 RowNum 变量在第一列之后关闭。相反，使用 i 变量来引用您当前所在的行。如果您只想从第 2 行循环到第 10 行（看起来就是这种情况），则需要进行以下调整：

改变这个：

```
If InStr(Cells(1, CurrCol + 1).Value, "Doc2") > 0 Then
    For i = RowNum + 1 To 10
        If Trim(Cells(RowNum + 1, CurrCol + 1).Value) <> "" Then
            NewValue = Cells(RowNum + 1, CurrCol).Value & ", " & Cells(RowNum + 1, CurrCol + 1).Value
        '   MsgBox "New Value is " & NewValue
            Cells(RowNum + 1, CurrCol).Value = NewValue
            RowNum = RowNum + 1
        End If

    Next

End If 
```

对此：

```
If InStr(Cells(1, CurrCol + 1).Value, "Doc2") > 0 Then
    For i = 2 To 10
        If Trim(Cells(i, CurrCol + 1).Value) <> "" Then
            NewValue = Cells(i, CurrCol).Value & ", " & Cells(i, CurrCol + 1).Value
        '   MsgBox "New Value is " & NewValue
            Cells(i, CurrCol).Value = NewValue
        End If
    Next i
End If 
```

# c# - 使用kinect sdk c#在xna中围绕z轴旋转

> ID：15142993
> 
> 赞同：0
> 
> 时间：2013-02-28T18:31:31.723
> 
> 标签：c#, sdk, xna, kinect

我首先使用 kinect sdk、c# 语言开发游戏我想进行一些测量我需要帮助找到可以找到右肩绕 z 轴旋转角度的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T12:34:15.723

您可以使用 SDK 的 BoneOrientation 类并使用 y 和 x 移除旋转，留下 z 的旋转。您可以选择右肩来获取方向并删除矩阵的其他位置，使其仅代表 z 旋转。如果您不知道如何执行此操作，请回复。我假设您对此感到手足无措。

干杯。

# ssrs-2008 - SSRS 2008 R2 在生产中的权限

> ID：15142998
> 
> 赞同：0
> 
> 时间：2013-02-28T18:31:42.483
> 
> 标签：ssrs-2008

我们正在 2008 Server 上升级到 SSRS 2008 R2。我们有一个生产环境，阻止我们拥有帐户的本地管理员权限。有人告诉我们，我们只能拥有一个批处理级别的服务帐户。我假设 [d] 内容管理员和系统管理员角色可以在此帐户下运行，但是我们似乎无法在没有本地管理员的情况下运行 ReportManager。SSRS 数据库安装在一个单独的盒子上。

我希望有人有一组步骤或参考我们如何配置它以在没有本地管理员的情况下工作。

谢谢马蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:40:52.390

默认情况下安装 SSRS 时，没有地方可以输入 ssrs 管理器或 ssrs 凭据。只需设置端点、数据库、电子邮件和低级别帐户。您最初需要一个管理员帐户才能访问报告管理器一次。在此期间，可以创建其他系统级帐户，以满足您的管理员批量用户要求。我会为 SSRS 框提出两个帐户。1\. 报告用户 - 可以运行报告可以查看 2\. 报告管理员 - 可以更新 Defs。可以运行报告

然后使用 ReportAdmin 部署报告并使用 ReportUser 请求报告。