# StackOverflow 问答 16049000-16049999

# c++ - 在c ++中查找文件中的特定文件

> ID：16049007
> 
> 赞同：0
> 
> 时间：2013-04-16T23:36:14.920
> 
> 标签：c++, file

我有一个名为 mama 的文件。此文件包含名为 child1 child2 和 child3 的 3 个文件。child1 包含 5 个 txt，child2 包含 7 个 txt，child3 包含 4 个 txt。妈妈的路径是 C:\Users\John\Desktop\mama 。对不起我的写作方式，但我试图准确地解释我的情况。我的目标是找到所有这些 txt（16 个）的路径，这样我就可以用它们做事了。所以我认为一个函数可以找到这个路径并将它们放在一个链表中

```
struct paths
{
   string pathName;
   paths *next;
}; 
```

正是我需要一一使用它们的。我找到了一些关于 FindFirstFile() 和 FindNextFile() 的示例，我还尝试运行一些代码，以便通过一些测试来了解它是如何工作的，但是错误不断出现，禁止进行测试和理解的机会。顺便说一句，我使用 Visual Studio 2008（这是他们说我们应该使用的，所以我想我无法更改它）。如果有人可以帮助我理解或获得任何可以提供一些好的且易于理解的示例的链接，我将非常感激。

编辑：

例如使用此代码

```
#include <windows.h>
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

    int main()
    {
        WIN32_FIND_DATA fData;
        void * handle = FindFirstFile( "C:/Users/John/Desktop/*", &fData );//<~~~error
        cout << fData.cFileName;
        system("pause");
    } 
```

有 1 个错误：错误 1 ​​错误 C2664：“FindFirstFileW”：无法将参数 1 从“const char [24]”转换为“LPCWSTR”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:43:36.757

首先，您应该声明一个 WIN32_FIND_DATA 结构

然后在目录中找到第一个文件（即 C:/Users/John/Desktop/* ）

```
paths * head;
WIN32_FIND_DATA fData;
void * handle = FindFirstFile( "C:/Users/John/Desktop/*", &fData ); 
```

检查它是否是您要使用的文件：

```
fData.cFileName // the file name is stored here ( ie C:/Users/John/Desktop/child2.txt ) 
```

您可以循环执行此操作：

```
while( !CheckFileNameHere( fData.cFileName, head->pathname ) ) FindNextFile( handle, &fData ); 
```

增加列表：

```
head = head->next; 
```

或完成：

```
CloseHandle( handle ); 
```

如何获得路径取决于您。如果您已将它们存储在文件中，请使用 stdio.h、iostream 或 windows.h 中的函数。如果你把它写成一个函数，你可以将它重用于你拥有的任何文件名。

如果您在使用这些方法时遇到运行时错误，您应该发布确切的错误，以便我们找出它们不起作用的原因。编译错误也是如此。

# ios - UIView autoresizingMask 用于固定左右边距和灵活宽度

> ID：16049009
> 
> 赞同：9
> 
> 时间：2013-04-16T23:36:21.927
> 
> 标签：ios, objective-c, xcode

我不知道如何用固定的左右边距调整宽度。![自动调整 xCode](https://i.stack.imgur.com/DmF1P.png)

我没有找到任何固定的 LED/右边距 API。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-16T23:52:24.640

在代码中，要使视图具有固定的左右边距以及灵活的宽度，您可以执行以下操作：

```
UIView *parentView = self.view; // adjust as needed
CGRect bounds = parentView.bounds; // get bounds of parent view
CGRect subviewFrame = CGRectInset(bounds, 20, 0); // left and right margin of 20
UIView *subview = [[UIView alloc] initWithFrame:subviewFrame];
subview.autoresizingMask = UIViewAutoresizingFlexibleWidth;
[parentView addSubview:subview]; 
```

根据需要进行调整以创建您的实际子视图。调整`subviewFrame`以匹配您想要的边距。

正如回答的那样，这将为您的子视图提供固定的左右边距，每个边距为 20 点，宽度灵活。设置 时`autoresizingMask`，任何未设置为灵活的组件都会自动固定（几乎）。这意味着上边距和高度也是固定的（因为它们没有设置）。由于上边距和高度是固定的，所以下边距隐含地灵活。出于显而易见的原因，不能同时修复跨越或向上/向下的所有三个值。

# documentation - Doxygen：如何在源代码之外创建额外的类文档？

> ID：16049010
> 
> 赞同：2
> 
> 时间：2013-04-16T23:36:23.150
> 
> 标签：documentation, markdown, doxygen

我想添加有关我的核心类的详细信息，而不是将其全部嵌入源文件中的这些类之上。

例如，我想创建一个单独的文件，其中包含大量关于 class 的信息`Foo`，可能在 markdown 或 html 中。然后，当我`Foo`在 doxygen 创建的输出中查看 class 时，我希望 class 页面`Foo`在其详细信息部分包含我所有大量且标记精美的文档以及我在 class 上方放置的任何*其他*评论`Foo`。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T11:53:56.900

如果您当前有一个文件 Foo.h

```
/**
A short description of class Foo.
*/
class Foo
{
} 
```

您可以在扩展名为 .dox 的文件中添加其他文档（我们称之为 Foo.dox）

```
/**
More details about Foo.

Maybe you only want to distribute this to your nicer customers.

@class Foo Foo.h
*/ 
```

不要忘记将 .dox 文件添加到配置文件的 INPUT 行

```
INPUT = \
Foo.h Foo.dox 
```

# visual-studio - Visual Studio 2012 默认调试 IE 浏览器版本

> ID：16049013
> 
> 赞同：1
> 
> 时间：2013-04-16T23:36:40.100
> 
> 标签：visual-studio, internet-explorer, debugging

细节第一：使用VS2012、IE10、Windows 8、IIS 7.5 express、ASP.NET webforms应用。

问题：当我调试 ASP.NET Web 表单应用程序时，IE10 按预期打开，但它处于使用 IE7 文档标准的 IE10 兼容模式下。我宁愿这不会发生，因为我必须记住打开开发人员工具并更改调试中使用的浏览器版本。很多时候我都忘记了，假设布局和 CSS 是正确的，然后记得稍后检查该设置并找出非 IE7 版本中的所有内容都已损坏。

这很令人沮丧，我在 IE10 和 VS2012 中找不到任何配置文件或设置来更改它。而且我根本找不到 IIS 7.5 的任何配置文件。而且，事实上，我尝试了 VS2012 开发服务器，它以相同的方式打开 IE10，所以很可能不是 IIS express 问题。

我应该注意：IE10 以非兼容模式打开以进行正常浏览。它仅在从 VS2012 调试 Web 应用程序时默认采用这种方式。

有人知道如何更改此默认设置吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T09:44:14.053

我有同样的问题。

1.  打开 IE
2.  在 IE 菜单栏中按下`Alt`并单击`Tools`
3.  选择`Compatibility View Settings`
4.  `localhost`从中删除`Websites you added to Compatibility View`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T00:30:11.827

您可以添加`X-UA-Compatibility`元标记以强制 IE 作为特定版本运行，一般来说您希望强制它为`edge`，这会强制它作为标准版本运行：

```
<meta http-equiv="x-ua-compatible" content="IE=edge"> 
```

您可以在此处了解有关[元标记](http://msdn.microsoft.com/en-us/library/jj676915%28v=vs.85%29.aspx)的更多信息。

# java - 如何在 Java 中创建 Silverlight 将读取的压缩 XAP 文件？

> ID：16049019
> 
> 赞同：0
> 
> 时间：2013-04-16T23:37:24.510
> 
> 标签：java, silverlight, zip

我有一个基于 Java 的 Web 服务，它采用 Visual Studio 构建 Silverlight XAP 文件并根据传入的 URL 将内容整合到其中。如果我将压缩方法设置为`STORED`：

`ZipOutputStream zipStream = new ZipOutputStream(os) zipStream.setMethod(ZipOutputStream.STORED)`

但是，这会生成一个未压缩的文件。我想提供一个类似于 Visual Studio 生成的压缩文件。执行此操作的正常方法是将压缩方法更改为`DEFLATED`：

`zipStream.setMethod(ZipOutputStream.DEFLATED)`

这在代码中运行良好，生成的 XAP 文件使用标准工具（Windows 资源管理器，7zip）检出为有效的 zip 文件。但是，Silverlight 插件拒绝加载它。控制台中没有错误消息或浏览器中的异常，只是一个空白屏幕。

我需要做什么来告诉 Java Deflater 创建 Silverlight 将接受的压缩 XAP 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T08:38:36.890

Silverlight 不支持某些压缩方法/级别。不确定这是否有效，但尝试将压缩级别设置为 3（请参阅[setLevel](http://docs.oracle.com/javase/7/docs/api/java/util/zip/Deflater.html#setLevel%28int%29)）

# php - isset() 是如何工作的？

> ID：16049020
> 
> 赞同：-1
> 
> 时间：2013-04-16T23:37:37.000
> 
> 标签：php, isset

我是 PHP 的初学者。在我的代码中，我希望仅在单击（设置）提交按钮时才执行 php 脚本。所以当页面被刷新时，isset() 函数应该返回 false。这是 test.php 的代码

```
<html>
<head>
<title>A BASIC HTML FORM</title>
<?PHP
if (isset($_POST['Submit1'])) {
    $username = $_POST['username'];

    if ($username == "letmein") {
        print ("Welcome back, friend!");
    }
    else {
        print ("You're not a member of this site");
    }
}

else{
$username = "";
}
?>
</head>
<body>
<Form name ="form1" Method ="POST" Action ="test.php">
    <Input Type = "text" Value ="<?php print $username?>" Name ="username">
    <Input Type = "Submit" Name = "Submit1" Value = "Login">
</form>
</body>
</html> 
```

单击登录按钮后，脚本被执行，输出为“你不是会员”，但是当我刷新页面时，来自脚本的消息仍然保留在屏幕上。我相信 isset() 应该返回 false 直到我再次单击该按钮？代码有什么问题。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:41:18.873

意识到我的评论真的是一个答案......

当您“刷新”时，您会刷新包含 POST 数据的页面（因为这是最后一次“请求”）。您必须重新输入页面地址才能清除它。有时您会看到“您真的要再次发送此表单吗？” 刷新时提示 - 这就是为什么...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T23:43:36.453

Isset() 用于检查变量示例： $variable 实际上是“设置”并且不为空。此外，在进行刷新时，您还会刷新已提交的操作和已传递的表单数据。你可以这样想：

如果你去一个购物网站，他们告诉你在处理订单时不要刷新，这意味着如果你刷新你的帖子数据会再次提交，这意味着你买了 2 个微波炉而不是 1 个 :)

所以在编码中它看起来像这样：

```
if (isset('$_POST['username']')) {
    $username = $_POST['username'];

    if($username == 'letmein') {
         echo ("welcome back, friend!");
    }
} 
```

希望这会有所帮助。祝你好运！此外，如果您曾经在“John”上并需要阅读材料，请查看[php 手册页！](http://php.net/manual/en/function.isset.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T23:41:24.197

刷新页面将再次发布已发布的表单变量，因此每次刷新页面时，您都在重新提交表单，并且您将始终满足`isset`条件为真 :)

如果您需要更多解释，请告诉我:)

# arrays - 使用 STL 列表和向量、链表和数组的优缺点

> ID：16049025
> 
> 赞同：1
> 
> 时间：2013-04-16T23:38:27.123
> 
> 标签：arrays, list, data-structures, vector, linked-list

我想知道 STL:list、STL:vector、数组和链表在基本层面上的区别是什么。

我的理解是，通常，链表允许可增长的列表，插入和删除要容易得多，但直接访问链表中的单个元素需要更长的时间，因为您需要遍历每个元素。

我可能遗漏了许多其他关键差异，因此您也可以指出一些更明显的差异。

比较起来，列表和向量是如何发挥作用的？你什么时候选择一个而不是另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-08T14:35:45.013

以下是列表和向量之间的一些区别。

1.  **插入所需的时间：**列表需要恒定的时间才能将元素插入其中，如果向量的容量等于向量中存在的元素数量，则向量内部需要重新定位向量中存在的数据，然后再插入新值。这需要处理器和时间的开销。
2.  **访问数据所花费的时间**：Vectors 在这方面优于列表。Vector 需要恒定的时间来访问位于中间的元素。其中列表需要遍历列表才能到达所需的元素。
3.  **容器占用的内存：** vector 的容量和大小不一定相同。向量的容量呈指数增长，消耗的内存比容器实际需要的更多。列表占用存储元素所需的完全相同的内存，因此在分配期间不会分配额外的内存，可以节省内存。

# css - 使用显示表属性垂直居中 div 内的图像

> ID：16049026
> 
> 赞同：-2
> 
> 时间：2013-04-16T23:38:27.233
> 
> 标签：css, vertical-alignment, css-tables

我试图在 div 内垂直居中图像。我在 stackoverflow 上阅读了一些其他类似的问题，并决定使用这个解决方案：

```
<div id="wrapper">
    <div id="cell">
        <img />
    </div>
</div>

#wrapper {display:table;}
#cell {display:table-cell; vertical-align:middle;} 
```

这对于小于视口大小的图像非常有用。当图像的高度大于视口时会出现问题。在这种情况下，包装器 div 只是成为图像的高度。它溢出了页面。我该如何避免这种情况。

这个包装器 div 是视口 div 的一部分。视口 div 具有固定高度和 100% 宽度定位绝对

```
#view-port{ height: 600px; width:100% } 
```

* * *

编辑：我想我对这个问题造成了一些混乱。我创建了 JSfiddle 来解释我的意思

这是一个链接：http: [//jsfiddle.net/sublime/fgTtj/](http://jsfiddle.net/sublime/fgTtj/)

我想在#outer 内垂直居中图像我没有图像尺寸，正如您在小提琴上看到的那样，它工作得很好，但是当#outer divs 高度小于图像高度时，比如 200 它会剪切图像。我想缩小该图像以适应外部 div

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:53:49.140

有什么意义`display:table`？您可以将其留空（或使用`display:inline-block`），然后添加一个`overflow`属性。

```
#wrapper{
  overflow:hidden;
  } 
```

如果您希望能够滚动查看图像的其余部分：

```
 #wrapper{
  overflow:scroll;
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T00:01:01.547

此答案已被截断和编辑以满足 OP 的需求。

使用 jQuery，这是我的建议。您可以摆脱几个 div，只使用包装器和图像。上面代码的问题是您给外部 div 设置了 300px 的高度。这意味着它永远不会收缩得比这更小。我还编写了一个小脚本来说明窗口大小

[http://jsfiddle.net/fgTtj/40/](http://jsfiddle.net/fgTtj/40/)

我已经像这样设置了您的 HTML：

```
<div class="wrapper">
    <img src='http://s13.postimg.org/b7hmfvhyv/css.jpg'></img>
</div> 
```

像这样的CSS：

```
.wrapper {
    position:relative;
    width:100%;
    height:300px;
    background-color:blue;
    overflow:hidden;
}

.wrapper img{
    position:absolute;
    max-width:100%;
    max-height:100%;
} 
```

新的 jQuery 看起来像这样：

```
function center(){
    var imgW = $('img').width();
    var imgH = $('img').height();
    var half_imgW = imgW / 2;
    var half_imgH = imgH / 2;
    $('img').css({
        left: "50%",
        top: "50%",
        margin: "-" + half_imgH + "px 0 0 -" + half_imgW + "px"
    });
}

$(document).ready(function(){
    var wrapper_Height = $('.wrapper').height();
    center();
    $(window).resize(function(){
        console.log(wrapper_Height);
        var winH = $(this).height();
        var wrapH = $('.wrapper').height();
        if(winH <= wrapH){
            $('.wrapper').height(winH);    
        } else {
            if(wrapH <= wrapper_Height){
                $('.wrapper').height(winH); 
            }
        }
        center();
    });    
}); 
```

您可以在任何方向调整此窗口的大小，图像将保持居中且不会被截断。目前这只适用于一个窗口，因此您必须调整脚本以适应更多。

令人敬畏的是，它几乎可以在所有浏览器中运行，而`display:table-cell`在 IE6 和我认为 IE7 等旧浏览器中不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T00:17:51.353

如果您不希望图像扩展视口高度，请设置`max-height`：

```
#cell img { max-height: 600px; } 
```

# php - 创建后台 PHP 进程

> ID：16049030
> 
> 赞同：0
> 
> 时间：2013-04-16T23:38:48.973
> 
> 标签：php, tidesdk

我想运行一个做一些工作的后台 php 进程。我想到了两种方法来做到这一点，我想知道使用 TideSDk 哪个更好，哪个更有可能

1) 我曾想过在 js 文件中使用 Ti.Process.createProcess() 来生成一个进程。我面临的问题是，如果不将其写入文件，就无法访​​问此过程记录的信息。由于 Ti 对象在 php 脚本文件中不可用，我使用了 fopen() 和 fwrite() 但这些方法似乎不起作用。有什么方法可以在不尝试写入文件的情况下访问此过程中的信息？

2）我想到的另一种方法是使用javascript setInterval（）并以某种方式将其连接到应用程序并定期调用php函数。这可以从js文件调用php函数吗？

我想分别维护 js 和 php 文件，并且在 html 文件中没有任何内联脚本。请让我知道我是否可以使用上述任何方法或以任何不同的方式做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T20:33:07.317

回复：选项 1 - 您可以在您的应用程序和您的进程之间打开一个套接字。这就是我的做法（在我的情况下运行 bg ruby​​ 脚本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:44:12.050

要么使用[cron 作业](http://www.adminschoice.com/crontab-quick-reference/)。或[php exec()](http://php.net/manual/en/function.exec.php)函数。

# php - php站点开发期间的SSL

> ID：16049033
> 
> 赞同：2
> 
> 时间：2013-04-16T23:39:12.830
> 
> 标签：php, ssl, ssl-certificate, laravel

我即将开发一个新网站，并且在将网站推送到生产服务器时需要 EV SSL 证书。我的问题是在开发过程中我不会拥有 EV SSL 证书（尽管如果需要我可以拥有自签名证书）。如果我在没有 SSL 证书的情况下开发我的 PHP 站点，然后将其推送到我的生产服务器，它可能会工作还是会出现大量问题？

此外，如果我确实使用自签名 SSL 证书在本地开发，然后推送到将具有 EV SSL 的生产服务器，这会导致任何问题吗？

我只是想在潜入并得意忘形之前澄清这几点。关于如何在本地开发最终获得 SSL 证书的站点，是否有任何行业标准或最佳实践？

注意：如果这对回答这个问题有任何影响，我将使用 Laravel 框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T03:37:43.603

如果你使用 Laravel 3，你可以在 application/config/application.php 中找到一个用于`'ssl'`. 如果你将此设置为 false （最好在你的开发或等效配置中），那么当你使用任何 URL 辅助方法（URL::to_secure 等）生成安全路由的 URL 时，Laravel 会自动将这些链接转换为http 在那个环境中。

我不知道 L4 中的配置选项，但您可以为它定义自己的配置变量并在您的助手 URL::to('foo', null, null, Config::get( 'app.ssl'，真））。这样，您可以在配置中将 'ssl' 设置为 false 以像 L3 一样使用它。

编辑：我刚刚在 IRC 中遇到了 Taylor，他对 L4 中 SSL 配置遗漏的解释是因为他建议按照您的建议在您的开发环境中实际设置 SSL。出于开发目的，自签名证书应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T06:55:26.500

通常你不应该有任何问题，从 HTTP 切换到 HTTPS 服务器。不过，使用自签名证书进行开发肯定是一个好主意。

有两个主要点可能会出错：

1.  您的应用程序构建以“http://”开头的绝对链接。您可以防止使用自签名证书或仅构建相对 URL 来防止此问题。
2.  会话的安全设置需要 SSL（例如，cookie 应仅限于 SSL）。这将是开发环境中的更多问题，并且可以使用自签名证书再次防止此问题。

# vb.net - 在 VB.net 中使第二种形式返回输入焦点到第一种形式

> ID：16049035
> 
> 赞同：0
> 
> 时间：2013-04-16T23:39:15.237
> 
> 标签：vb.net, forms

我在网上搜索了这个问题的答案，但找不到。这似乎是一个很常见的问题，我很困惑找不到任何东西。

我有 3 个表格 A 表格，用户将使用该表格；表格 B 用于选择要显示的表格 C 的菜单；表格 C 数据库中的数据“快速列表”，以帮助输入表格 A。这些表格 C 中有几个可以在会话期间显示。

*   用户在表单 A 上工作时可以按 control-Q，这将显示表单 B 菜单。

*   控制自动传递到表单 B，用户按下一个键，所需的表单 C 弹出，表单 B 关闭。

*   控制权传递给表单 C，它是“活动”表单。

表格 C 上没有要填写的内容，所以我想自动返回表格 A 上的最后一个活动控件。

一切正常，但我最终以表格 C 作为活动表格。

如何强制控制回到表单 A 上的最后一个活动控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:39:07.603

OK I got it. And there were several issues to solve. Not sure if this is the best way but it does work.

The first problem is to be able to refer to the form you want to have focus from some other form. I overloaded the ‘show’ event for both Form B and Form C to be able to pass the original calling form. When I called Form B from Form A, I supplied a reference to Form A. Then when I called Form C I passed the reference to Form A again. At that point both Form B and Form C knew who the originator was.

I tried to set the focus back to Form A within Form C. So in both Form B and Form C, I would set a variable (Dim ‘callingform’ as Form). In each of Form B and C I used the following:

Dim callingform as Form

Overloads Sub Show(ByVal f1 As Form)

Callingform = f1

So each of Form B and Form C had a reference to the original Form A that was to eventually get the focus.

But you can’t refer to the form with that variable. The following is a proper reference to the form and ‘focus’ is the method to change focus.

CType(callingform, windows.forms.form).focus()

That statement seems straightforward enough but I was trying to use it in the wrong place. I was using that statement at the end of the ‘Load’ event for Form C. The problem there is that Form C hasn’t yet gotten focus so executing that statement would be subsequently overridden as Form C was actually displayed. I didn’t know then but do now, Focus isn’t transferred to the new form until AFTER the load event. So if you put that statement in the Form C ‘GotFocus’ event it works like a charm.

After considering things for awhile, I’ve decided that Form C might be called from anywhere and it shouldn’t be deciding where focus should be set. It should be decided by whoever decided to Display Form C.

So I have put the following in the end of Form B’s Menu selection code:

FormC.Show(formA) ‘Display Form C and pass the originating form)

CType(formA, windows.forms.form).focus() ‘Change focus to FormA, the originating form

formB.Close (actually - me.close) - ‘ Close up the menu form, FormB

(Aside: I don’t really understand why the ‘ctype’ is necessary. I passed the form as a ‘form’ and defined the variable ‘callingform’ as a form. I expected to be able to just say callingform.focus(). )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:11:27.450

这是我的答案的相关代码。

部分代码：在表格 A 中（原始调用表格）

```
If CurMode = Browse Then

  'Check for Quick List menu CRTL-Q
  If e.Control AndAlso e.KeyCode = Keys.Q Then

   ' Call the 'Menu form, FormB
    CType(Me.MdiParent, frmRECORDmain).ShowQuickListMenu(Me, Me.ActiveControl)
    Exit Sub
  End If 
```

在 QuickList Menu 表单中（原始表单 B）

```
Public Class frmQuickListMENU
Dim CallingForm As Form
Dim CallingControl As Control
Dim Selection As String

' This is so that Form B will know who Form A was.
Overloads Sub Show(ByVal f As Form,
                 ByVal c As Control,
                 Optional PreSelection As String = "")
CallingForm = f
CallingControl = c
Selection = PreSelection
Show()
End Sub

Private Sub frmQuickListMENU_KeyDown(sender As Object, e As System.Windows.Forms.KeyEventArgs) Handles Me.KeyDown
Select Case e.KeyCode
  Case Keys.D1, Keys.NumPad1
  . .       
  Case Keys.D3, Keys.NumPad3
  . . .
  Case Keys.D6, Keys.NumPad6
  . . .
  ' One of 12 Menu choices which will open 1 of 12 Form C's
  Case Keys.D7, Keys.NumPad7
    Dim frmquickListPHD1 As New frmQuickListPHD()
    frmquickListPHD1.MdiParent = MasterParentForm
    frmquickListPHD1.StartPosition = FormStartPosition.Manual
    frmquickListPHD1.Location = New Point(QLPHD.Left, QLPHD.Top)
    ' Show Form C  
    frmquickListPHD1.Show(CallingForm, CallingControl, Me)
End Select
'    ************************
'    ************************
'    THE NEXT LINE IS THE 'MAGIC' I WAS LOOKING FOR
'    This line returnbs focus back to the original Form A
'    ************************
CType(CallingForm, Windows.Forms.Form).Focus()
Me.Close()
End Sub

Private Sub frmQuickListMENU_Load(sender As Object, e As System.EventArgs) Handles Me.Load
  Dim x1 As Integer
  x1 = Me.Width
End Sub
End Class 
```

最后是“快速列表”的代码 - 表格 C 但是，由于我决定更改表格 B 代码而不是表格 C 代码中的焦点，因此表格 C 代码都无关紧要。我只表明它与我的原始帖子一致。

```
 Dim callingform As Form
  Dim callingcontrol As Control
  Dim MenuForm As Form

' The following was initially required so that the change of focus could be made within this 
' Class but I have since changed my mind and the Overload is unnecessary.  I only left 
' this here  so the code would be consistent with my original note.  I'll  be removing
' thisOverload of the 'Show' event. 
Overloads Sub Show(ByVal f1 As Form,
                   ByVal c As Control,
                   ByVal f2 As Form)
  callingform = f1
  MenuForm = f2
  callingcontrol = c
  Show()
End Sub

Private Sub frmQuickListPHD_Load(sender As Object, e As System.EventArgs) Handles Me.Load
Try
  conn.Open()
  DA.SelectCommand = New SqlCommand(SQL, conn)
  ' 
'
'
Catch ex As Exception
  Console.WriteLine("Error" & ex.ToString)
Finally
  conn.Close()
End Try
Me.Height = QLPHD.Height
Me.Width = QLPHD.Width
'
'
'  More form layout code
'
' 
'
 End Sub
End Class 
```

# asp.net - 调试 Web 应用程序时，Windows 8 上的 VS2008 单步执行需要很长时间

> ID：16049036
> 
> 赞同：0
> 
> 时间：2013-04-16T23:39:18.070
> 
> 标签：asp.net, .net, debugging, visual-studio-2008

当我尝试在 Windows 8 Pro 上运行的 VS2008 中通过 F10 键单步执行 Web 应用程序时，每一步完成大约需要 3 秒。

在运行 VS2008 的 windows XP 和 windows 7 上调试不会发生的同一个项目。

如果有人知道为什么这只会在 Windows 8 上发生，请分享。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:46:40.830

你使用的是什么浏览器？这曾经是 FireFox 和 IPv6 的问题。如果您使用的是 FireFox，请尝试以下步骤：

1.  打开火狐浏览器。
2.  在地址栏中输入“about:config”（不带单引号）。
3.  在出现的搜索栏中输入：Ipv6
4.  您应该会看到“network.dns.disableIPv6”属性并单击切换。重启火狐浏览器。
5.  再次调试，看看现在调试是否更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T00:49:13.747

在调试过程中，我已经从 Watch 1 窗口中删除了很多观察变量，现在单步执行基本上是实时发生的，没有延迟。

奇怪的是，这不需要在 Windows 7 或 XP 上完成。

我想这是 Windows 8 怪癖列表中的另一个档次。

# c++ - 关于调用继承函数

> ID：16049040
> 
> 赞同：0
> 
> 时间：2013-04-16T23:40:11.260
> 
> 标签：c++, class, inheritance, methods

我有一个名为 account 的基类。三个类从帐户继承。这些类别是储蓄、支票和信用卡。在我的 main() 中，我试图创建一个切换菜单，以便当用户选择 1 时，它将调用 makeDeposit()，它是帐户的一部分，但通过储蓄来实现。这样当用户选择 3 时，它将调用 makeDeposit()，但通过检查来完成。这是我写的代码。我已声明对象保存 sa；当我调用 makeDeposit 时，我试图将其写为 sa.makeDeposit()。这是代码：

```
int main ()
{
    saving sa;
    creditCard cca;
    checking ca;

    string n;
    int option;
    int exit = 1;
    cout << endl;
    cout << "Checking Balance:" << " " << "          " << "Savings balance:" << " " << "          " << "Credit Card balance:" << " " << endl;
    cout << endl;
    cout << " (1) Savings Deposit " << endl;
    cout << " (2) Savings withdrawel " << endl;
    cout << " (3) Checking Deposit " << endl;
    cout << " (4) Write A Check " << endl;
    cout << " (5) Credit Card Payment " << endl;
    cout << " (6) Make A Charge " << endl;
    cout << " (7) Display Savings " << endl;
    cout << " (8) Display Checkings " << endl;
    cout << " (9) Display Credit Card " << endl;
    cout << " (0) Exit " << endl;
    cin >> option;

    do{

    switch ( option )

    {
        case 1 : double amtD;
                 cout << " Please enter how much you would like to deposit into savings " << endl;
                 cin >> amtD;
                 double sa.makeDeposit(double amtD);
                 break;
        case 2 : double makeWithdrawel();
                 break;
        case 3 : double makeDeposit();
                 break;
        case 4 : 
                 break;
        case 5 : 
                 break;
        case 6 : double makeWithdrawel();
                 break;
        case 7 : int display();
                 break;
        case 8 : int display();
                 break;
        case 9 : int display();
                 break;
        case 0 : exit = 0;
                 break;
        default : exit = 0;
                 cout << " ERROR ";
    }
    }
    while(exit==1);
    return 0;
} 
```

这是我的班级储蓄：

```
#include "stdafx.h"
#include "iostream"
#include "Account.h"
#include <string>
#include <sstream>
using namespace std;

class saving: public account
{
public :

    double doWithdraw(double amount);
    saving();
    saving(string itsName, long itsTaxID, double itsBalance);
} 
```

和我的帐户课程：

```
#include "stdafx.h"
#include <string>
#include <sstream>
using namespace std;
class account {

public :
    void setName(string name); void setTaxID(long taxID); void setBalance(double balance);
    string getName(); long getTaxID(); double getBalance();
    double makeDeposit( double amount );
    account();
    account(string itsName, long itsTaxID, double itsBalance);
    int display();

private :
    string itsName;
    long itsTaxID;
    double itsBalance;

protected :
    double last10withdraws[10];
    double last10deposits[10];
    int numdeposits;
    int numwithdraws;

}; 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:07:52.803

您错误地调用了函数。您不需要包含返回值和参数的类型。

```
case 10: int function(); break; 
```

实际上是在声明一个本地函数——**没有**`function`像你期望的那样调用。

您的 switch 语句应如下所示。注意函数调用中没有类型

```
switch ( option )
{
case 1 : double amtD;
    cout << " Please enter how much you would like to deposit into savings " << endl;
    cin >> amtD;
    sa.makeDeposit(amtD);
    break;
case 2 : makeWithdrawel();
    break;
case 3 : makeDeposit();
    break;
case 4 : 
    break;
case 5 : 
    break;
case 6 : makeWithdrawel();
    break;
case 7 : display();
    break;
case 8 : display();
    break;
case 9 : display();
    break;
case 0 : exit = 0;
    break;
default : exit = 0;
    cout << " ERROR ";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T00:08:34.613

下面的代码看起来有点奇怪。

```
cin >> amtD;
double sa.makeDeposit(double amtD);
break; 
```

您正在尝试使用**double**关键字声明一个变量，但我认为您想做以下两件事之一：

1.  无需使用 makeDeposit() 返回的 double 进行存款即可。在这种情况下，只需编写这样的行（使用返回的双精度是可选的）：

    sa.makeDeposit(amtD);

2.  您想进行存款，但也要保存一些退货信息。然后你可能会做这样的事情（并在以后使用新变量）。

    双 justMadeDeposit = sa.makeDeposit(amtD);

这是一些猜测。也许您根本不希望 makeDeposit() 函数返回任何内容，然后您可以将其声明为**void**。

# objective-c - 使用 BLWebSocketsServer 写入 websocket

> ID：16049042
> 
> 赞同：0
> 
> 时间：2013-04-16T23:40:16.467
> 
> 标签：objective-c, c, websocket, wrapper

不确定你们中有多少人熟悉 BLWebsocketsServer。可在：[https](https://github.com/benlodotcom/BLWebSocketsServer) ://github.com/benlodotcom/BLWebSocketsServer 获得。

它是 LibWebSocket 的 Objective-C 包装器（用 C 编写）。它基本上只提供基于从客户端接收到的回调的功能。

我正在尝试将数据异步发送到打开的 Web 套接字，而不使用已经写入包装器的回调（因为它不会响应任何内容）。我认为这必须写入包装器，但我不知道如何！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T08:17:10.953

我在最新版本的 BLWebSocketsServer 中添加了对异步消息（推送）的支持。要将消息推送到所有连接的客户端，您需要执行以下操作：

```
//Start the server
[[BLWebSocketsServer sharedInstance] startListeningOnPort:9000 withProtocolName:@"my-protocol-name" andCompletionBlock:^(NSError *error) {
    if (!error) {
        NSLog(@"Server started");
    }
    else {
        NSLog(@"%@", error);
    }
}];
//Push a message to every connected clients
[[BLWebSocketsServer sharedInstance] pushToAll:[@"pushed message"     dataUsingEncoding:NSUTF8StringEncoding]]; 
```

# xml - Coldfusion XML 输出注入文档头信息

> ID：16049043
> 
> 赞同：2
> 
> 时间：2013-04-16T23:40:22.197
> 
> 标签：xml, coldfusion, xml-parsing, httprequest

最近几个小时我一直在看东西，我无法弄清楚这个！最终，我有一些来自 HTTPheader 的 xml 数据：

```
<cfset xmlPOST = GetHTTPRequestData().content>
<cfset xmlDOM = XmlParse(xmlPOST)>
<cfset BCsetup = xmlDOM.cXML.Request.PunchOutSetupRequest.BuyerCookie> 
```

我正在尝试获取 BuyerCookie、使用它并将其放入新的 xml 文档中。如果我现在 cfoutput BCsetup，它会给我正确的值（比如说 12345）。

第二次我将它作为输出放入 XML 中，它抛出`<xml version="1.0" encoding="UTF-8"?><BuyerCookie>12345</BuyerCookie`> 而不是 12345。

我已经尝试了从 toString() 到 cfsavecontent 的所有方法来尝试重新保存变量 down 和直接文本等。我​​终其一生都无法弄清楚如何使这项工作。

更新：这是如上所述执行的代码：

```
<cfset BCsetup = xmlDOM.cXML.Request.PunchOutSetupRequest.BuyerCookie> 

<!DOCTYPE cXML SYSTEM "http://xml.cxml.org/schemas/cXML/1.2.020/cXML.dtd">
<cXML payloadID="2009-11-02T13:27:53+10:00" timestamp="2009-11-02T13:27:53+10:00">
  <Response>
    <Status code="200" text="OK"/>
    <PunchOutSetupResponse>
      <StartPage>
        <URL>https://mysite.com/testpost.cfm?BuyerCookie=<cfoutput>#BCsetup#</cfoutput></URL>
      </StartPage>
    </PunchOutSetupResponse>
  </Response>
</cXML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:32:00.967

```
<cfset BCsetup = xmlDOM.cXML.Request.PunchOutSetupRequest.BuyerCookie> 
```

拉入整个 XML 元素，而不是一个特定的值。如果您将其更改为拉入`xmlText`它应该可以解决您的问题

```
<cfset BCsetup = xmlDOM.cXML.Request.PunchOutSetupRequest.BuyerCookie.xmlText> 
```

我建议`<cfdump var="#BCSetup#" abort>`在设置后运行以确保获得所需的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:05:38.993

您的代码正在获取 xmldom 元素而不仅仅是它的值，只需将 .xmltext 添加到末尾以仅获取文本而不是元素。

# ios - NSXMLParser - 只需要从 parser:foundCharacters: 中读取某些元素

> ID：16049048
> 
> 赞同：1
> 
> 时间：2013-04-16T23:40:51.853
> 
> 标签：ios, objective-c, xml, macos, cocoa

这是我第一次使用 XML，但我正在尝试使用 NSXMLParser 来解析我学校的日历 XML（可以在[这里](http://whs.wayland.k12.ma.us/syndication/rss.aspx?serverid=1036540&userid=5&feed=calendarevents&key=2RHXqHYKF8vPbqQ7RCDPfuU7gMLJdOA%2f%2fLmSBT0aaMvR1GAWYpIQBnxFytIxnWKRTs7jT%2fY5T%2brtDb0SJQxJuA%3d%3d&calendar_id=1062637&v=2.0)看到）。

出于我的目的，我只需要获取项目的标题和描述标签之间的文本。

通过我在 mac 开发人员库中阅读的内容，似乎解析器每次遇到元素（使用`parser:didStartElement:namespaceURI:qualifiedName:attribute:`方法）和遇到文本（使用`parser:foundCharacters:`方法）时都会向委托发送通知。虽然我可以看到如何使用 didStartElement... 方法仅对某些元素执行操作，但我看不到如何使用 foundCharacters: 方法获取文本，仅用于我想要的某些元素。有什么办法可以做到这一点，还是我走错了路？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:43:55.567

您不能停止被调用，但是如果是您关心的两个元素之一，`foundCharacters`您可以`didStartElement`设置一些类属性，然后查看该类属性以确定它是否应该对这些字符执行某些操作，或者是否它应该立即返回并有效地丢弃它收到的字符。`elementName``foundCharacters`

例如，这是我的解析器的简化版本：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict
{
    // if the element name is in my NSArray of element names I care about ...

    if ([self.elementNames containsObject:elementName])
    {
        // then initialize the variable that I'll use to collect the characters.

        self.elementValue = [[NSMutableString alloc] init];
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    // if the variable to collect the characters is not nil, then append the string

    if (self.elementValue)
    {
        [self.elementValue appendString:string];
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    // if the element name is in my NSArray of element names I care about ...

    if ([self.elementNames containsObject:elementName])
    {
        // step 1, save the data in `elementValue` here (do whatever you want here)

        // step 2, reset my elementValue variable

        self.elementValue = nil;
    }
} 
```

希望这能给你这个想法。

# svg - D3 在两个移动的 SVG 元素之间连接一条线

> ID：16049051
> 
> 赞同：0
> 
> 时间：2013-04-16T23:41:01.387
> 
> 标签：svg, d3.js

有没有办法使用 D3 在两个移动元素之间连接一条线，并确保即使元素移动（动态移动或手动拖动）它们也保持连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:03:03.817

是的。这样的点之间没有连接的概念，因此确保它们保持连接的方法是将线的端点与元素一起移动。您只需在更新元素位置的代码中更新相应端点的位置。

# logging - Neo4j 服务器未加载：未找到 Logback.xml 文件

> ID：16049056
> 
> 赞同：0
> 
> 时间：2013-04-16T23:41:22.010
> 
> 标签：logging, neo4j

我正在尝试在 Mac Lion 上使用自制的 neo4j 将小型 neo4j db 连接到前端 Web 界面 Linkurious。该图最初工作正常，可以从网络服务器访问，但在将其连接到 Linkurious 的过程中，出现了问题。

当我尝试启动 neo4j 时，服务器现在挂起，我得到以下输出：

```
Starting Neo4j Server...19:31:30,507 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
19:31:30,507 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
19:31:30,508 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [jar:file:/usr/local/Cellar/neo4j/community-1.8.1-unix/libexec/system/lib/neo4j-server-1.8.1.jar!/logback.xml]
19:31:30,536 |-INFO in ch.qos.logback.core.joran.spi.ConfigurationWatchList@33d6f122 - URL [jar:file:/usr/local/Cellar/neo4j/community-1.8.1-unix/libexec/system/lib/neo4j-server-1.8.1.jar!/logback.xml] is not of type file
19:31:30,632 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
19:31:30,646 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
19:31:30,650 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
19:31:30,670 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
19:31:30,737 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to INFO
19:31:30,737 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[ROOT]
19:31:30,740 |-ERROR in ch.qos.logback.core.joran.action.IncludeAction - Could not find resource corresponding to [custom-logback.xml]
19:31:30,742 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@647109c4 - Registering current configuration as safe fallback point

WARNING: not changing user
process [2350]... waiting for server to be ready...... OK.
Go to http://localhost:7475/webadmin/ for administration interface. 
```

localhost:7475 然后继续挂断。我*认为*这是路径的问题，所以我将 NEO4J_HOME 附加到 neo4j 文件中，如下所示：[https](https://groups.google.com/forum/#!msg/neo4j/NMVHoflUrHo/warnQUInGCgJ) ://groups.google.com/forum/#!msg/neo4j/NMVHoflUrHo/warnQUInGCgJ （Bhargava 的解决方案）。

尽管如此，问题仍然存在。想法？我不知道日志文件的作用以及为什么需要它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:33:15.550

如果你不关心这个 logback，你可以排除它的库。在 Maven 中，您可以按以下方式执行此操作：

```
<dependency>
    <groupId>org.neo4j.app</groupId>
    <artifactId>neo4j-server</artifactId>
    <version>${neo4j.version}</version>
    <exclusions>
        <exclusion>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-classic</artifactId>
        </exclusion>
        <exclusion>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-access</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:04:53.653

讯息

```
19:31:30,740 |-ERROR in ch.qos.logback.core.joran.action.IncludeAction - Could not find resource corresponding to [custom-logback.xml] 
```

表示找不到文件 custom-logback.xml。

# java - 图像没有在正确的时刻出现在屏幕上 - Java

> ID：16049060
> 
> 赞同：1
> 
> 时间：2013-04-16T23:41:55.640
> 
> 标签：java, drawing, awt, paint

我正在开发一个小程序，我没有这方面的经验。我想绘制两个对象，插入一个图像并将背景颜色更改为黑色。如果我不改变颜色，一切正常，当我决定改变背景颜色时问题就来了。我得到的是没有图纸和图片的黑屏。如果我最小化或重新调整窗口大小，那么我会得到一切。下面是我的代码，一个简化版本。

```
import javax.swing.*;
import java.applet.*;  
import java.awt.*;
import java.awt.event.*;  

public class JAlienHunt extends JApplet implements ActionListener {

private JButton button = new JButton();
JLabel greeting = new JLabel("Welcome to Alien Hunt Game!");
JLabel gameOverMessage = new JLabel(" ");
JPanel displayPanel = new JPanel(new GridLayout(2, 4));
private int[] alienArray = new int[8];
int countJ = 0, countM = 0; 
private ImageIcon image = new ImageIcon("earth.jpg");
private int width, height;

Container con = getContentPane();
Font aFont = new Font("Gigi", Font.BOLD, 20);       

public void init() {

    /** Setting the Layout and adding the content. */  

    width = image.getIconWidth();
    height = image.getIconHeight();

    greeting.setFont(aFont);
    greeting.setHorizontalAlignment(SwingConstants.CENTER);
    con.setLayout(new BorderLayout());
    con.add(greeting, BorderLayout.NORTH);
    con.add(displayPanel, BorderLayout.CENTER);

    /** Add Buttons to the Applet */

        displayPanel.add(button);
        String text = Integer.toString(i+1);     // convert button # to String adding 1.
        buttons.setText(text);
        buttons.addActionListener(this);
} 

public void actionPerformed(ActionEvent event) {

    /** Shows the Alien representing the selected button and deactivate the button. */
    if(event.getSource() == buttons) 
                button.setText("Jupiterian");

            else 
                buttons[i].setText("Martian");

            button.setEnabled(false);
        con.remove(greeting);
        displayPanel.remove(button);
        displayPanel.setLayout(new FlowLayout());
        gameOverMessage.setHorizontalAlignment(SwingConstants.CENTER);
            con.add(gameOverMessage, BorderLayout.NORTH);
            repaint();
    }

public void paint(Graphics gr) {

    super.paint(gr);

    /** Condition when user loses the game. Two Jupiterians will be painted on the screen*/
    Jupiterian jupit = new Jupiterian();
    displayPanel.setBackground(Color.BLACK);
    gameOverMessage.setFont(new Font ("Calibri", Font.BOLD, 25));
    gameOverMessage.setText("The Earth has been destroyed!");
    jupit.draw(gr, 250, 120);   
    gr.copyArea(190, 40, 465, 300, 500, 0); 
    gr.drawImage(image.getImage(), 400, 400, width, height, this);  //+ 

}   
} 
```

---------------- Jupiterian 类的方法 draw()

```
public void draw(Graphics g, int x, int y) {

    g.setColor(Color.WHITE);
    g.drawOval(x, y, 160, 160);                         // Body of the alien
    g.drawLine(x, y + 80, x - 40, y + 170);             // Left hand
    g.drawLine(x - 40, y + 170, x - 40, y + 180);       // Left hand fingers
    g.drawLine(x - 40, y + 170, x - 55, y + 180); 
    Font aFont = new Font ("Chiller", Font.BOLD, 30);  // Description text.
g.setFont(aFont);
g.drawString(toString(), 230, 60); 
} 
```

--- 抽象类

```
public abstract class Aliena {

protected String name;
protected String planet;

/** Constructor for the class. Creates the Alien object with the parameters provided */

public Aliena(String nam, int eyes, String hair, String plan){

    name = nam;
    planet = plan;
}

/** Method that returns a String with a complete description of the Alien. */

public String toString(){

    String stringAlien = "I am " + name + " from " + planet;
    return stringAlien;
}
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:27:23.723

不要在任何方法中调用`displayPanel.setBackground(Color.BLACK);`、或任何更新任何其他 UI 组件。`gameOverMessage.setFont(new Font("Calibri", Font.BOLD, 25));``gameOverMessage.setText("The Earth has been destroyed!");``paint`

这只会导致`repaint`重新安排时间，并且将开始恶性循环，这将消耗您的 CPU 并将世界吸入厄运的黑洞……

相反，在调用之前更改组件的状态`repaint`

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Container;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.ImageIcon;
import javax.swing.JApplet;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingConstants;

public class JAlienHunt extends JApplet implements ActionListener {

    private JButton button = new JButton();
    JLabel greeting = new JLabel("Welcome to Alien Hunt Game!");
    JLabel gameOverMessage = new JLabel(" ");
    JPanel displayPanel = new JPanel(new GridLayout(2, 4));
    private int[] alienArray = new int[8];
    int countJ = 0, countM = 0;
    private ImageIcon image = new ImageIcon("earth.jpg");
    private int width, height;
    Container con = getContentPane();
    Font aFont = new Font("Gigi", Font.BOLD, 20);

    public void init() {

        /**
         * Setting the Layout and adding the content.
         */
        width = image.getIconWidth();
        height = image.getIconHeight();

        greeting.setFont(aFont);
        greeting.setHorizontalAlignment(SwingConstants.CENTER);
        con.setLayout(new BorderLayout());
        con.add(greeting, BorderLayout.NORTH);
        con.add(displayPanel, BorderLayout.CENTER);

        /**
         * Add Buttons to the Applet
         */
        displayPanel.add(button);
//        String text = Integer.toString(i + 1);     // convert button # to String adding 1.
        button.setText("!");
        button.addActionListener(this);
    }

    public void actionPerformed(ActionEvent event) {

        /**
         * Shows the Alien representing the selected button and deactivate the
         * button.
         */
//        if (event.getSource() == buttons) {
//            button.setText("Jupiterian");
//        } else {
////            buttons[i].setText("Martian");
//        }

        button.setEnabled(false);
        con.remove(greeting);
        displayPanel.remove(button);
        displayPanel.setLayout(new FlowLayout());
        gameOverMessage.setHorizontalAlignment(SwingConstants.CENTER);
        con.add(gameOverMessage, BorderLayout.NORTH);
        displayPanel.setBackground(Color.BLACK);
        gameOverMessage.setFont(new Font("Calibri", Font.BOLD, 25));
        gameOverMessage.setText("The Earth has been destroyed!");
        repaint();
    }

    public void paint(Graphics gr) {

        super.paint(gr);

        /**
         * Condition when user loses the game. Two Jupiterians will be painted on
         * the screen
         */
        Jupiterian jupit = new Jupiterian();
//        displayPanel.setBackground(Color.BLACK);
//        gameOverMessage.setFont(new Font("Calibri", Font.BOLD, 25));
//        gameOverMessage.setText("The Earth has been destroyed!");
        jupit.draw(gr, 250, 120);
//        gr.copyArea(190, 40, 465, 300, 500, 0);
        gr.drawImage(image.getImage(), 400, 400, width, height, this);  //+ 

    }

    public class Jupiterian {

        public void draw(Graphics g, int x, int y) {

            g.setColor(Color.WHITE);
            g.drawOval(x, y, 160, 160);                         // Body of the alien
            g.drawLine(x, y + 80, x - 40, y + 170);             // Left hand
            g.drawLine(x - 40, y + 170, x - 40, y + 180);       // Left hand fingers
            g.drawLine(x - 40, y + 170, x - 55, y + 180);
            Font aFont = new Font("Chiller", Font.BOLD, 30);  // Description text.
            g.setFont(aFont);
            g.drawString(toString(), 230, 60);
        }
    }
} 
```

# asp.net-mvc - 如何正确处理 System.Web.HttpRequestValidationException

> ID：16049061
> 
> 赞同：0
> 
> 时间：2013-04-16T23:42:01.407
> 
> 标签：asp.net-mvc

> System.Web.HttpRequestValidationException：从客户端检测到潜在危险的 Request.Form 值

当上面出现异常时，通常建议使用以下属性禁用验证请求

```
 [ValidateInput(false)]
    public ActionResult Save(string content)
    {
        System.IO.File.WriteAllText(fileName, content);
        return View();
    } 
```

那为什么还要提出这个验证呢？如何正确处理此异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T04:39:56.757

当 URL 请求（您的示例：）`string content`包含危险关键字时：“>、?、< 等...”。如果你想处理这个异常（例如：允许这些），你可以按照示例代码：

```
using System;
using System.Web.Mvc;

namespace Custom {
    public class CustomValidateInput : FilterAttribute, IAuthorizationFilter {
        /// <summary>
        /// Called when authorization is required.
        /// </summary>
        /// <param name="filterContext">The filter context.</param>
        /// <exception cref="System.ArgumentNullException">filterContext</exception>
        public void OnAuthorization(AuthorizationContext filterContext) {
            if (filterContext == null) {
                throw new ArgumentNullException("filterContext");
            }

            //Set disable validation request
            filterContext.Controller.ValidateRequest = false;

            //----------Your code handle here------------//

        }
    }
} 
```

和

```
[CustomValidateInput]
public ActionResult Save(string content)
{
    System.IO.File.WriteAllText(fileName, content);
    return View();
} 
```

# java - 自定义锁屏实现技术

> ID：16049062
> 
> 赞同：5
> 
> 时间：2013-04-16T23:42:12.517
> 
> 标签：java, android, android-layout, homescreen, lockscreen

因此，我一直在跨网站探索许多类似的问题（[this](https://stackoverflow.com/questions/13403149/custom-lock-screen-delay-when-wake)、[this](https://stackoverflow.com/questions/7318457/android-lock-screen)和[this](https://stackoverflow.com/questions/4116001/android-lock-screen-widget)等等）。想要实现自己的自定义锁屏的人（不是在谈论小部件）。到目前为止，用户正在使用两种实现技术。

1.  **主屏幕更换**。在这种技术中，它建议创建一个主屏幕应用程序，在解锁逻辑之后会显示默认屏幕。我相信在这种情况下，开发人员必须在锁定屏幕可见时禁用 Home、Search、Menu 和 Back 按钮，并实现 Screen off-on 逻辑。

2.  **一个应用程序**。在这种技术中，创建了一个普通的应用程序，在解锁逻辑之后显示默认屏幕。我相信在这种情况下，开发人员必须在锁定屏幕可见时禁用 Home、Search、Menu 和 Back 按钮，并实现 Screen off-on 逻辑。

现在，我不明白这两种方法有什么区别？StackOverflow 社区似乎更强调主屏幕替换技术。我对 Android 开发非常陌生，所以我可能会遗漏一些方面。请建议我应该使用哪种方法，为什么？（另外，这很容易吗？）。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T00:22:02.587

我会使用第一种方法，但仅出于可用性原因。因为它为用户提供了一个选择，如果他选择不将新主屏幕设置为默认选择，则可以轻松恢复到原始主屏幕/锁定屏幕。

恐怕您描述的两种策略都非常困难（取决于您希望它工作的 api 级别范围）。困难不在于它们的区别，困难在于覆盖按钮（因为谷歌通过关闭较新 api 级别的安全漏洞使其变得更加困难）。

**PS：**请注意，Jellybean 有一个新的 Daydream 功能。如果您只需要自定义锁屏。这可能是要走的路，因为 Jellybean 在这方面比以前的 api 级别更安全，并且更难使用。

此外，请考虑为 HTC 设备使用 HTC screenlock api。这样，您的解决方案至少对于他们的新设备来说不会太老套。也许，也可以为已获得 root 权限的设备制作一个版本，因为对于已经在其设备上获得 root 权限的用户来说，这也应该很容易。不要低估根市场，拥有根访问权限的用户确实会在 Google Play 中的应用程序上花费不成比例的钱。如果您只看一下 Google Play 为您提供的付费应用程序的一些粗略下载数量（仅适用于 root），这一点就很明显了。

# php - php SQL如何保留数据，也许是自动增量而不是替换字段中的记录

> ID：16049065
> 
> 赞同：0
> 
> 时间：2013-04-16T23:42:47.653
> 
> 标签：php, mysql, auto-increment

具有表“患者”的 sql 数据库“测试”和表内是数据类型 varchar（最大长度 200）的字段“处方”，当前托管输入的文本和数字。

我能够从表中获取处方记录并显示它，然后能够通过一个文本框更新它，该文本框恰好覆盖了“处方”字段中的记录。

为了保存处方领域的记录，我应该怎么做，但要写新的/新的处方？顺便说一句，表行有一个“id”字段作为主键。

我正在考虑保留以前的处方，同时编写新的处方，并始终按照当前的方式获取最新的一种。稍后我将不得不查看显示所有可用处方的选项，以显示不同的“id”。

这是用户使用输入“id”来获取表字段的代码：http: [//pastebin.com/gNv881kR](http://pastebin.com/gNv881kR)

以下链接显示了更新处方字段的代码：http: [//pastebin.com/6sq7ZEtp](http://pastebin.com/6sq7ZEtp)

谢谢大家的回复，但是同桌其他病人的处方呢？因为当前表有列'id'、full_name、'address、'email'、...'prescription'。另外我忘了告诉 id 是一个字母数字值，例如：232987M 这是政府 ID。我是否应该创建另一个表，包括当前 id 用作主键以在新表中搜索使用它的记录，并具有处方列和“id2”，它会自动递增并复制患者的实际“id”以分配处方并稍后获取所有的 'id' 都与递增的 'id2' 无关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:05:32.810

更新时，获取该行的最大 id 并将其添加 1，或递增 1，然后使用递增的 ID 更新详细信息，以便将其另存为新行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:33:21.927

解决方案是创建一个仅包含必填字段的新表：“id”、“id2”（具有自动增量）、“日期”类型的“日期”和“处方”

每当我更新处方时，它实际上会在原始表中的当前设置中进行更新，该原始表仅托管一个处方字段，而另一个副本保存在新创建的表中，政府 ID 和日期随处方修改，使我能够稍后获取新表中的“id”字段显示所有以前的处方。

'id2' 是必不可少的，因为它使主键能够发生，以便使每个条目彼此唯一/不同。

感谢大家！谢谢迈克尔！伊恩

# java - 消除内存泄漏和性能是否足够？

> ID：16049069
> 
> 赞同：1
> 
> 时间：2013-04-16T23:43:47.083
> 
> 标签：java, android, performance, memory-leaks

为对象设置一个`null`值是否足以让垃圾收集在 Java (Android) 中收集和清理内存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T23:46:00.697

如果对一个对象的所有引用都设置为 null，那么它最终会被垃圾收集器清理掉。这是否足够取决于对象拥有的其他资源（例如可能泄漏的文件句柄或数据库句柄）以及垃圾收集器是否足够频繁地运行以在您需要内存之前释放它。像位图这样的大对象经常有一个函数可以被调用来提前释放内存以避免这个问题（位图的 recycle() 就是一个例子）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T23:45:02.677

是的。这就是在 Java 中释放对象的方式。一旦它们被释放，它们就有资格进行垃圾收集，并在稍后的某个时间被收集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T04:35:11.643

The garbage colletor does mark and sweep.

When using mark-and-sweep, unreferenced objects are not reclaimed immediately. Instead, garbage is allowed to accumulate until all available memory has been exhausted. When that happens, the execution of the program is suspended temporarily while the mark-and-sweep algorithm collects all the garbage. Once all unreferenced objects have been reclaimed, the normal execution of the program can resume.

[http://www.brpreiss.com/books/opus5/html/page424.html](http://www.brpreiss.com/books/opus5/html/page424.html). The link has details regarding how mark and sweep works.

[http://chaoticjava.com/posts/how-does-garbage-collection-work/](http://chaoticjava.com/posts/how-does-garbage-collection-work/)

[Technical details of Android Garbage Collector](https://stackoverflow.com/questions/4818869/technical-details-of-android-garbage-collector)

If you set your variable to null. the variable will be available for garbage collection. However it depends on the virtual machine (dalvik) to decide when to garbage collect. It also depends on the heap size. More the heap size more frequent garbage collection. [http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk). The guy in the video gives a big warning about using large heap since it leads to more frequent garbage collection there causing your application to pause.

If the current running operation requires more memory and the memory is not available, the garbage collector kicks in to free memory.( even after which required memory space is not avaialable you will get memory leaks).

[http://developer.android.com/training/articles/perf-tips.html](http://developer.android.com/training/articles/perf-tips.html).

A quote from the above link. As you allocate more objects in your app, you will force a periodic garbage collection, creating little "hiccups" in the user experience.

# vb.net - 读取自定义程序集属性

> ID：16049081
> 
> 赞同：1
> 
> 时间：2013-04-16T23:45:21.077
> 
> 标签：vb.net, attributes, .net-assembly

我为 DLL 定义了以下程序集属性，但我无法在不同的项目中读取它。你有什么建议吗？

装配属性：

```
 Namespace Extensions.CustomAttributes

    <AttributeUsage(AttributeTargets.All, Inherited:=True, AllowMultiple:=True)>

    Public Class DeveloperNoteAttribute
        Inherits System.Attribute

        Protected strName, strComment As String
        Protected blnBug As Boolean

        Public Sub New(ByVal Name As String, ByVal Comment As String, ByVal DateRecorded As String)
            MyBase.New()
            strName = Name
            strComment = Comment
        End Sub

        Public Property Name As String
            Get
                Return strName
            End Get
            Set(ByVal value As String)
                strName = value
            End Set
        End Property

        Public Property Comment As String
            Get
                Return strComment
            End Get
            Set(ByVal value As String)
                strComment = value
            End Set
        End Property

        Public Property Bug As Boolean
            Get
                Return blnBug
            End Get
            Set(ByVal value As Boolean)
                blnBug = value
            End Set
        End Property

    End Class

End Namespace 
```

装配信息.vb：

```
<Assembly: Extensions.CustomAttributes.DeveloperNoteAttribute("Test1", "Test2", "Test3")> 
```

获取另一个项目中的属性（通过变量：文件名）

```
Dim oAssem As System.Reflection.Assembly = System.Reflection.Assembly.LoadFrom(Filename)

' Get any assembly-level attributes
Dim oAttribs() As Attribute = Attribute.GetCustomAttributes(oAssem)
For Each att In oAttribs
   Try
        Dim at As Extensions.CustomAttributes.DeveloperNoteAttribute = CType(att, Extensions.CustomAttributes.DeveloperNoteAttribute)
        Debug.WriteLine(at.Name.ToString)
    Catch ex As Exception

    End Try
Next 
```

在调试器中，我得到了很多“System.InvalidCastException”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:17:26.510

**未来访客问题**的解决方案：****

 **1.  您可以像我在上面的问题中所做的那样定义自定义程序集属性。

2.  要读出自定义属性，您可以使用 System.Attribute.GetCustomAttributes() 获取所有定义属性的数组。但是您也可以使用 System.Attribute.GetCustomAttribute() 来获取您传递的类型的特定属性。

**信息：**

*   System.Attribute：http: [//msdn.microsoft.com/en-us/library/system.attribute.aspx](http://msdn.microsoft.com/en-us/library/system.attribute.aspx)
*   GetCustomAttribute()：http: [//msdn.microsoft.com/en-us/library/k7s8054x.aspx](http://msdn.microsoft.com/en-us/library/k7s8054x.aspx)

**非常感谢**@DanVerdolino 的帮助！**

# xslt - xsl:apply-templates with params - 如何保存格式？

> ID：16049082
> 
> 赞同：0
> 
> 时间：2013-04-16T23:45:25.680
> 
> 标签：xslt, formatting, apply-templates

XSLT 用作模板引擎。我有一些模板结构，它们使用参数相互传输数据：

```
<xsl:template match="/" mode="common-page">
    <xsl:param name="page-content"/>
    …
    <xsl:copy-of select="$page-content"/>
    …
</xsl:template> 
```

并调用该模板：

```
<xsl:template match="/">
    <xsl:apply-templates select="." mode="common-page">
        <xsl:with-param name="page-content">
        <!--some html content with formatting-->
        <html>
            <body>
                <h1>Header</h1>
                <div>
                    <p>Text</p>
                </div>
            </body>
        </html>
        </xsl:with-param>
    </xsl:apply-templates>
</xsl:template> 
```

在这种情况下，html 内容中的格式仍然存在，输出为：

```
<html>
    <body>
        <h1>Header</h1>
        <div>
            <p>Text</p>
        </div>
    </body>
</html> 
```

但是，如果我尝试指定`match`或`select`以`<xsl:apply-templates>`（`/result/page`而不是`/`）格式清除。参数`page-content`相同：

```
<html><body><h1>Header</h1><div><p>Text</p></div></body></html> 
```

XML 示例：

```
<result xmlns:xlink="http://www.w3.org/TR/xlink" module="content" method="content" system-build="21199" lang="ru" header="Main page" title="Main page" request-uri="/.xml" pageId="2">
    <meta>
        <keywords/>
        <description/>
    </meta>
    <user id="42" status="auth" login="admin" xlink:href="uobject://42" type="sv"/>
    <parents/>
    <page id="2" parentId="0" link="/" is-default="1" is-active="1" object-id="313" type-id="50" type-guid="content-page" update-time="1364964725" alt-name="index">
        <basetype id="27" module="content">Content page</basetype>
        <name>Main page</name>
        <properties>
            <group id="65" name="common">
                <title>Params</title>
                <property id="117" name="h1" type="string">
                    <title>H1</title>
                    <value>Main page</value>
                </property>
            </group>
        </properties>
    </page>
</result> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:15:23.580

如果您使用的是 XSLT 2.0 并且您正在尝试获得一个缩进的结果文档（每个 XML 内部级别都有一个制表符缩进），那么您应该能够将一个[xsl:output](http://www.w3.org/TR/xslt20/#element-output)元素添加到您的 xsl:stylesheet元素，并指定应该启用缩进。

例如，在 xsl:stylesheet 元素的开头，您可以添加以下内容：

```
<xsl:stylesheet>
    <xsl:output indent="yes" />
    <!-- rest of document -->
</xsl:stylesheet> 
```

另请参阅`method`xsl:output 元素的属性，该属性设置常见输出类型的默认值，例如“xml”、“html”和“xhtml”。

# php - 为每个最终的可配置选项动态创建添加到购物车块，$this 的 Helper

> ID：16049087
> 
> 赞同：5
> 
> 时间：2013-04-16T23:45:47.623
> 
> 标签：php, javascript, ajax, magento

我正在做一个项目，在产品页面而不是正常的可配置选项上，有一些可配置选项，然后查询数据库以查看特定供应商是否携带该产品。然后它通过 javascript 显示供应商列表，如下所示。

![在此处输入图像描述](https://i.stack.imgur.com/am2hP.jpg)

我希望添加到购物车块显示在每个供应商旁边。因为这都是动态创建的，所以我必须将供应商 ID 传递给我创建的“添加到购物车”脚本。我采用了原始的 app/design/frontend/base/default/template/catalog/product/view/addtocart.phtml 并制作了我自己的，如下所示。以下 php 文件通过 ajax 调用。原来的 addtocart.phtml 有一堆 $this 变量。我需要模拟 $this （无论模型，它所指的助手），以便这个块工作。我没有多少成功。有人可以看到我做错了什么或者我可以做些什么不同的事情吗？非常感谢！

```
<?php

require_once('/var/www/Staging/public_html/app/Mage.php');
umask(0);
Mage::app();

//ensure that the value is legitimate
if($_POST && is_numeric($_POST['value'])){
    $value = $_POST['value'];
}

//pass this in your ajax call for the add button
if($_POST && is_numeric($_POST['product_id'])){
    $product_id = $_POST['product_id'];
}

$helper = Mage::helper('core'); //for translation
$block = new Mage_Catalog_Blockproduct_View(); // not best practice, but neither are standalones
$product =  Mage::getModel('catalog/product')->load($product_id); // no need to use the _ here, it's not protected/private; additonally Mage::registry won't work because you're technically not on a product detail page

$buttonTitle = ''; //you are using this, but it isn't set

?>
<div class="add-to-cart">
    <label for="qty"><?php echo $helper->__('Qty:') ?></label>
    <input type="text" name="qty" id="qty" maxlength="12" value="<?php echo $block->getProductDefaultQty($product) * 1 ?>" title="<?php echo $helper->__('Qty') ?>" class="input-text qty" />
    <button onclick="window.location = '<?php echo Mage::helper('checkout/cart')->getAddUrl($product);?>'" type="button" title="<?php echo $buttonTitle ?>" class="button btn-cart" id='$value'><span><?php echo $buttonTitle ?></span></button>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:52:19.550

`Mage_Catalog_Blockproduct_View`是您当前遇到的错误。记住 Magento 类名反映了目录结构。

我相信你想要`Mage_Catalog_Block_Product_View`

但是，从技术上讲，您不想在这里启动一个块，但我意识到这是为了绕过`$this->`引用。我也不会再次重新初始化整个堆栈。更好的方法是创建一个新模块并使用自定义控制器进行添加到购物车操作。

```
<?php
require_once Mage::getModuleDir('controllers', 'Mage_Checkout') . DS . 'CartController.php';

class NS_AjaxCart_CartController extends Mage_Checkout_CartController
{
    public function addAction()
    {
        $params = $this->getRequest()->getParams();
... 
```

然后，您将使用简单的构造函数在模块中创建一个新块，以设置您将在块中使用的模板。如同：

```
public function __construct()
{
        parent::__construct();
        $this->setTemplate('catalog/vendoraddtocart.phtml');
} 
```

要动态创建一个块，`$this`可以访问：

`$this->getLayout()->createBlock('cms/block')->setBlockId('vendor_add_to_cart')->toHtml()`

考虑阅读并更好地理解该`toHtml`方法，以及块和布局如何工作：

*   [http://codemagento.com/2011/03/how-blocks-and-phtml-work-together/](http://codemagento.com/2011/03/how-blocks-and-phtml-work-together/)
*   [http://adeptasoftware.co.uk/blog/magento-ajax-add-cart-extension/](http://adeptasoftware.co.uk/blog/magento-ajax-add-cart-extension/)
*   [http://store.pulsestorm.net/products/no-frills-magento-layout](http://store.pulsestorm.net/products/no-frills-magento-layout)
*   [http://www.excellencemagentoblog.com/magento-add-product-to-cart-ajax](http://www.excellencemagentoblog.com/magento-add-product-to-cart-ajax)
*   [Magento 覆盖控制器](https://stackoverflow.com/questions/11349530/magento-override-controller/11358733)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T20:13:16.403

```
$this->getProduct() return a product loaded from Mage_Catalog_Model_Product
So it not a registry So cant be used as Mage::registry('current_product') 
```

使用某事作为

```
$_product = Mage::getModel('catalog/product')=>load(prodid) 
```

你的方法似乎是错误的:(

# python - 使用 Python wxWidgets wxlistbox 时字符串中选项卡的替代方案

> ID：16049091
> 
> 赞同：1
> 
> 时间：2013-04-16T23:45:58.790
> 
> 标签：python, wxpython, wxwidgets

如此处所述：http: [//docs.wxwidgets.org/trunk/classwx_list_box.html](http://docs.wxwidgets.org/trunk/classwx_list_box.html)

> 请注意，当前列表框项目文本中的 TAB 字符在所有平台下的处理方式不一致，因此应将它们替换为空格以在任何地方正确显示字符串。列表框根本不支持任何其他控制字符。

到目前为止，根据我在 Windows 7 中使用 Python 2.7 32 位的经验，在 wxListBox 选择的字符串中使用 \t 无效；正如预期的那样

我有一堆来自数据库的行，我有多个列，我想在 wxListBox 的一行中显示（并最终用于选择一个或多个行）。现在我使用推荐的空格作为字符串中值之间的分隔符。但是，这并不理想，因为列是可变长度的。

**是否有替代不是简单分隔符的 \t 的替代方法？**这里的重点是整齐地呈现每一行的所有列，即

```
 column1        value1            value2
    column442142   values24234234    val2 
```

而不是

```
 column1        value1        value2
   column442142        values24234234        val2 
```

wxGrid 浮现在脑海，但我不认为这对我有用，因为我不想能够在一行中选择特定的单元格（我似乎找不到禁用它的功能），我只想要用户能够选择一行或多行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:40:52.207

如果您需要更多功能，我的建议是使用[wxListCtrl](http://docs.wxwidgets.org/trunk/classwx_list_ctrl.html)进行简单的多列数据显示或[wxDataViewCtrl 。](http://docs.wxwidgets.org/trunk/classwx_data_view_ctrl.html)

FWIW 您可以使用带有参数的[wxGrid::SetSelectionMode()](http://docs.wxwidgets.org/trunk/classwx_grid.html#a9da14b2045b0292cecc8e91b65993d29)`wxGridSelectRows`来禁用单元格选择，但`wxGrid`可以说仍然不是用于此类操作的最佳控件。

请参阅[我讲座中的这张幻灯片，](http://www.tt-solutions.com/img/slides/tables_comp.pdf)了解不同控件的简要摘要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:48:18.933

```
print "    4 whitespaces replace a tab"

print "%20s"%some_string_padded_to_20_chars 
```

# c# - MemoryStream CopyTo 仅部分写入

> ID：16049093
> 
> 赞同：4
> 
> 时间：2013-04-16T23:46:08.243
> 
> 标签：c#, compression, gzip, memorystream

我快要失去我该死的头脑了。在过去的一个小时里，我一直试图让 GzipStream 压缩一个字符串，但无论出于何种原因，它都拒绝将整个字节数组写入内存流。起初我认为它与 using 语句有关，但即使在删除它们之后，它似乎也没有什么不同。

**初始配置：**

```
var str = "Here is a relatively simple string to compress";
byte[] compressedBytes;
string returnedData;

var bytes = Encoding.UTF8.GetBytes(str); 
```

**正常工作（写入 64 长度字节数组）：**

```
using (var msi = new MemoryStream(bytes))
using (var mso = new MemoryStream()) {
   using (var gs = new GZipStream(mso, CompressionMode.Compress)) {
       msi.CopyTo(gs);
   }

   compressedBytes = mso.ToArray();
} 
```

**失败（写入 10 个长度的字节数组）：**

```
using(var mso = new MemoryStream())
using(var msi = new MemoryStream(bytes))
using(var zip = new GZipStream(mso, CompressionMode.Compress))
{
    msi.CopyTo(zip);
    compressedBytes = mso.ToArray();
} 
```

**也失败（写入 10 个长度字节数组）：**

```
var mso = new MemoryStream();
var msi = new MemoryStream(bytes);
var zip = new GZipStream(mso, CompressionMode.Compress);

msi.CopyTo(zip);
compressedBytes = mso.ToArray(); 
```

有人可以解释为什么第一个有效，但在另外两个中我得到这些不完整的数组？有什么东西从我下面被处理掉了吗？就此而言，有没有办法让我避免使用两个内存流？

谢谢，Zoombini

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T00:19:45.670

`System.IO.Compression.GZipStream`必须先关闭（处置）才能使用基础流，因为

1.  它面向块工作
2.  它必须编写页脚，包括校验和（参见[Wikipedia 上的文件格式描述](http://en.wikipedia.org/wiki/Gzip#File_format)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T00:15:34.963

您正在尝试在`GZipStream`关闭之前获取压缩数据。如您所见，这不会返回完整数据。第一个有效的原因是因为您在处理`compressedBytes = mso.ToArray();` *后* `GZipStream`调用。因此，未经测试但理论上，您应该能够像这样稍微修改您的第二个代码以使其正常工作。

```
using(var mso = new MemoryStream())
{
   using(var msi = new MemoryStream(bytes))
   using(var zip = new GZipStream(mso, CompressionMode.Compress))
   {
       msi.CopyTo(zip);
   }
   compressedBytes = mso.ToArray();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T00:26:12.250

正如其他人所说，您需要关闭`GZipStream`才能获得完整数据。一条`using`语句将导致在`Dispose`块末尾的流上调用该方法，如果流尚未关闭，它将关闭流。如果您放置`zip.Close();`在`msi.CopyTo(zip);`.

如果您以这种方式编写它，则可以消除其中一个 MemoryStream：

```
using (MemoryStream mso = new MemoryStream())
{
    using (GZipStream zip = new GZipStream(mso, CompressionMode.Compress))
    {
        zip.Write(bytes, 0, bytes.Length);
    }
    compressedBytes = mso.ToArray();
} 
```

# php - 使用 XSLTProcessor 从 HTML 中提取一个表

> ID：16049094
> 
> 赞同：1
> 
> 时间：2013-04-16T23:46:20.807
> 
> 标签：php, xslt

我正在尝试以 XML 格式获取具有粘性类的表的内容。

我的 PHP 代码是：

```
<?php

// Load the XML source
$xml = new DOMDocument;
$out = $xml->load("collection.html");

$xsl = new DOMDocument;
$xsl->load('collection.xsl');

// Configure the transformer
$proc = new XSLTProcessor;
$proc->importStyleSheet($xsl); // attach the xsl rules

$xml = $proc->transformToXML($xml);

$xml = simplexml_load_string($xml);

print_r($xml);

?> 
```

而 collection.html HTML 是：

```
<table>
    <thead>
        <tr>
            <th>A</th>
        </tr>
        <tbody>
        <tr>
            <td>B</td>
        </tr>
        </tbody>
    </thead>
</table>

<table class="sticky-enabled">
 <thead><tr><th>Date</th><th>Time</th><th>Location</th><th>Tracking Event</th> </tr></thead>
<tbody>
 <tr class="odd"><td>16-04-2013</td><td>19:20</td><td>International Hub</td><td>Forwarded for export</td> </tr>
 <tr class="even"><td>16-04-2013</td><td>18:53</td><td>International Hub</td><td>Received and processed</td> </tr>
 <tr class="odd"><td>15-04-2013</td><td>17:28</td><td>Manchester Piccadilly Depot</td><td>Collected from customer</td> </tr>
 <tr class="even"><td>15-04-2013</td><td>00:00</td><td>WDM Online</td><td></td> </tr>
</tbody>
</table>

<table>
    <thead>
        <tr>
            <th>A</th>
        </tr>
        <tbody>
        <tr>
            <td>B</td>
        </tr>
        </tbody>
    </thead>
</table> 
```

最后 collection.xsl 是：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="/">
  <output>
    <xsl:for-each select="table[@class='sticky-enabled']/tbody/tr">
      <tracking>
        <date><xsl:value-of select="td[1]" /></date>
        <time><xsl:value-of select="td[2]" /></time>
        <event><xsl:value-of select="td[3]" /></event>
        <extra><xsl:value-of select="td[4]" /></extra>        
      </tracking> 
    </xsl:for-each>
  </output>    
  </xsl:template>
</xsl:stylesheet> 
```

如果我运行它，则 $xml 为空。如果我编辑 collection.html 并删除第一个和最后一个表（即只留下我试图访问的那个），那么它就可以工作。因此，我怀疑问题出在：

```
<xsl:for-each select="table[@class='sticky-enabled']/tbody/tr"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T00:20:57.040

您的“XML”格式不正确。因此，不能使用 XSLT 对其进行解析和转换。XML 文档必须有一个文档元素。您有三个`<table>`兄弟元素。删除其他表会生成一个可以转换的格式良好的 XML 文件。

尝试使用 XML 元素包装表格。

例如：

```
<doc>
  <table>
    <thead>
        <tr>
            <th>A</th>
        </tr>
        <tbody>
        <tr>
            <td>B</td>
        </tr>
        </tbody>
    </thead>
</table>

<table class="sticky-enabled">
 <thead><tr><th>Date</th><th>Time</th><th>Location</th><th>Tracking Event</th> </tr></thead>
<tbody>
 <tr class="odd"><td>16-04-2013</td><td>19:20</td><td>International Hub</td><td>Forwarded for export</td> </tr>
 <tr class="even"><td>16-04-2013</td><td>18:53</td><td>International Hub</td><td>Received and processed</td> </tr>
 <tr class="odd"><td>15-04-2013</td><td>17:28</td><td>Manchester Piccadilly Depot</td><td>Collected from customer</td> </tr>
 <tr class="even"><td>15-04-2013</td><td>00:00</td><td>WDM Online</td><td></td> </tr>
</tbody>
</table>

<table>
    <thead>
        <tr>
            <th>A</th>
        </tr>
        <tbody>
        <tr>
            <td>B</td>
        </tr>
        </tbody>
    </thead>
  </table>
<doc> 
```

然后调整样式表以适应结构的变化，匹配文档元素而不是根节点：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
        <output>
            <xsl:for-each select="table[@class='sticky-enabled']/tbody/tr">
                <tracking>
                    <date><xsl:value-of select="td[1]" /></date>
                    <time><xsl:value-of select="td[2]" /></time>
                    <event><xsl:value-of select="td[3]" /></event>
                    <extra><xsl:value-of select="td[4]" /></extra>        
                </tracking> 
            </xsl:for-each>
        </output>    
    </xsl:template>
</xsl:stylesheet> 
```

# javascript - jsonpatch 数组中的所有元素

> ID：16049095
> 
> 赞同：8
> 
> 时间：2013-04-16T23:46:21.733
> 
> 标签：javascript, json

下面的帖子让我评估了使用 jasonpatch 进行 json 到 json 转换：

[JSON 到 JSON 转换器](https://stackoverflow.com/questions/13068267/json-to-json-transformer)

该项目可以在这里找到：

[https://github.com/bruth/jsonpatch-js](https://github.com/bruth/jsonpatch-js)

我目前正在尝试更改数组中所有元素的名称，但没有看到这是怎么可能的。我目前的尝试是：

```
var transformations = [
{ op: 'move', from:'/hits/1/_id', path: '/hits/1/pizza'}
]; 
```

这交换了第一个元素，但我如何进行“*”卡片类型的操作？就像是：

```
var transformations = [
{ op: 'move', from:'/hits/*/_id', path: '/hits/*/pizza'}
]; 
```

我可以看到可能为每个元素调用转换 N 次，但这似乎是一个 hack。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T00:54:26.547

最终使用了一种方法，我将调用包装在一个循环中：

```
 for(i=0;i<json.hits.length;i++) {
    var transformations = [{ op: 'move', from:'/hits/'+i+'/_id', path:'/hits/'+i+'/pizza'}];
    var result = jsonpatch.apply(json,transformations);             
 } 
```

也许 jsonpatch 可以使用通配符功能？

# c#-4.0 - 加密和解密对象

> ID：16049096
> 
> 赞同：0
> 
> 时间：2013-04-16T23:46:25.633
> 
> 标签：c#-4.0

我有两个字符串的类

我想使用 RC4 解密和加密，我知道如何为一个字符串执行此操作

[http://tofuculture.com/blog/post/RC4-Encryption-in-C.aspx](http://tofuculture.com/blog/post/RC4-Encryption-in-C.aspx)

我可以应用于整个对象吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:15:03.070

序列化为复杂格式的最简单方法是首先序列化为简单格式（在本例中为字符串），然后执行从简单到复杂的已知转换。

因此，在您的示例中，您想要序列化两个字符串，因此决定一个不会出现在数据中的分隔字符或字符串，并使用它来分隔两个字符串。这允许您创建一个您已经知道如何处理的字符串。然后，当您想要反序列化时，您会做相反的事情，找到分离并将字符串再次拆分成一个新对象。

# php - 如何测试与外键链接的表？

> ID：16049097
> 
> 赞同：5
> 
> 时间：2013-04-16T23:46:35.683
> 
> 标签：php, mysql

我正在使用 redbean ORM 使用 mysql 和 codeigniter。在为多对多关联实现外键后，运行时出现以下错误：

```
drop TABLE IF EXISTS `temp`

Integrity constraint violation: 1217 Cannot delete or update a parent row: a foreign key constraint fails thrown 
```

然后我将 SHOW ENGINE INNODB STATUS 输入到 phpmyadmin。输出包括：

```
LATEST FOREIGN KEY ERROR------------------------:  Cannot drop table `db1`.`temp`because it is referenced by `db1`.`temp_workers`. 
```

换句话说，另一个表引用了 FK。出于测试目的，我认为最好的做法是删除所有关联的表并使用我正在测试的控制器重新创建它们。这是最好的方法吗？我试过了：

```
drop TABLE IF EXISTS `temp` `temp_workers` 
```

，但我仍然收到上述错误，并且 drop 命令不起作用。还：

```
truncate TABLE `temp`, `temp_workers` 
```

给出：

```
You have an error in your SQL syntax 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T00:51:47.973

如评论中所述，您必须首先将具有 FK 约束的任何表删除到其他表，然后您可以删除链接到的表。

例子：

```
User
  id: 1
  name: Mike

Address 
  id: 1
  user_id: 1 (FK constraint to User.id table.column)
  address_1: 555 Main Street 
```

此设置是 1:1 关系（[更多关于数据规范化](https://stackoverflow.com/questions/1258743/normalization-in-mysql)），其中一个用户行可以引用一个地址行，并且由于地址行取决于用户行的存在，如果您尝试删除用户行，您会看到你提到的错误。

但是，如果您首先删除 Address 表，那么一切都会按预期进行，因为 User 表不是任何其他表的 FK。

确保架构中的[引用完整性](http://en.wikipedia.org/wiki/Referential_integrity)可确保您不会以孤立行结束，这将渗透到整个数据驱动的应用程序中。

您还可以发出以下命令：

```
SET foreign_key_checks = 0;
# Do Stuff
SET foreign_key_checks = 1; 
```

但我强烈建议不要这样做，因为您可能会破坏数据的引用完整性，并最终陷入混乱。我见过有人在企业环境中这样做，他们花了数周时间来清理它。但是，如果您出于测试目的而**严格执行此操作；**就像编写单元测试，或者只是学习，你不想每次都丢表，你可以这样做：

```
# Because we remove the foreign key check, we can truncate in any order
SET foreign_key_checks = 0;
TRUNCATE TABLE user;
TRUNCATE TABLE address;
SET foreign_key_checks = 1; 
```

使用外键约束的正确模式设计有助于为任何数据驱动的应用程序构建良好的基础。了解何时使用以及如何构建外键约束需要时间，但随着时间的推移，您将开始理解。开始的一个好方法是下载一个开源项目，如[magento](http://www.magentocommerce.com/)、[wordpress](http://wordpress.org/)或[vbulletin](http://www.vbulletin.com/)，并查看它们的模式。您甚至可以使用[MySQL 工作台](http://dev.mysql.com/downloads/tools/workbench/)内省这些模式并查看它们的[实体关系图](http://en.wikipedia.org/wiki/Entity-relationship_diagram)(ERD)，这将直观地展示表之间的链接。

# python - 自定义对象列表的深层副本

> ID：16049099
> 
> 赞同：2
> 
> 时间：2013-04-16T23:47:03.220
> 
> 标签：python, list, deep-copy

假设我有一个应用程序列表，描述为自定义对象。我决定对原始应用程序列表进行深度复制，这样我就可以拥有一个充当可用应用程序池的列表。为了分配应用程序，我随机选择池的一个子集，然后在原始列表中找到这些应用程序，以便我可以更新它们的信息。然后，从池中删除分配的应用程序。但是，由于某种原因，这些应用程序永远无法在原始列表中找到：

```
list1 = [App1,App2,App3,App4,App5]
pool = copy.deepcopy(list1)
num_apps = rand.randrange(0,5)
random.shuffle(pool)
selected_apps = copy.deepcopy(pool[:num_apps])
for app in selected_apps:
    locn = list1.index(app)
    print locn 
```

上面的代码实际上会返回一个 ValueError ，表示找不到 selected_apps 中的项目。错误是因为我正在制作包含非 Python 原生对象的列表的深层副本，还是其他原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-13T20:16:52.833

使用`list.index`它时，使用比较运算符 ( `==`) 来检查项目是否相同，然后使用[`__eq__`](https://docs.python.org/3/reference/datamodel.html#object.__eq__)方法，[来自文档](https://docs.python.org/3/reference/datamodel.html#object.__hash__)：

> 用户定义的类默认有`__eq__()`和`__hash__()`方法；与它们相比，**所有对象都比较不相等（除了它们自己）**并`x.__hash__()`返回一个适当的值，这样就`x == y`意味着`x is y`和`hash(x) == hash(y)`。

您可以通过以下方式证明这一点：

```
>>> class A(object):
...     def __init__(self):
...         self.x = 0
... 
>>> a = A()
>>> a.x = 5
>>> b = a
>>> b == a
True
>>> c = copy.deepcopy(a)
>>> c == a
False 
```

在 CPython`id()`中返回对象的内存地址，因此`__eq__`如果 id 匹配则返回 true：

```
>>> id(a) 
140389541757224
>>> id(b)
140389541757224
>>> id(c)
140389541757336 
```

所以你只需要实现`__eq__`方法和`__ne__`：

> 比较运算符之间没有隐含的关系。的真理`x==y`并不意味着它`x!=y`是错误的。因此，在定义 时`__eq__()`，还应该定义`__ne__()`操作符的行为与预期一致。

```
>>> class A(object):
...     def __init__(self):
...         self.x = 0
...     def __eq__(self, o):
...         return self.x == o.x
...     def __ne__(self, o):
...         return self.x != o.x
... 
>>> a = A()
>>> a.x = 5
>>> b = a
>>> c = copy.deepcopy(a)
>>> d = A()
>>> d.x = 4
>>> a == b
True
>>> a == c
True
>>> a is b
True
>>> a is c
False
>>> a == d
False 
```

还要注意这一点：

> 如果一个类没有定义一个`__eq__()`方法，它也不应该定义一个`__hash__()`操作；如果它定义`__eq__()`但未定义`__hash__()`，则它的实例**将不能用作可散列集合中的项目**。

# testing - 在 Windows 8 上进行浏览器测试？

> ID：16049101
> 
> 赞同：1
> 
> 时间：2013-04-16T23:47:21.323
> 
> 标签：testing, windows-7, windows-8, cross-browser

我有一台 Mac，我正在决定是在[Boot Camp](http://en.wikipedia.org/wiki/Boot_Camp_%28software%29)上安装 Windows 7 还是 8 。

是否可以使用 Windows 8 在 IE6+ 和旧版 Firefox/Chrome/Opera 浏览器的实际窗口中测试网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:53:19.080

大约一年前，我尝试使用 Windows 8 训练 Core 2 Duo iMac，但它会导致经常性崩溃。看起来有更新到 Bootcamp（我运行的是以前的版本 4），它支持 Windows 8，因此您可以使用任一选项。

如果您使用 Windows 7（像我一样），您可以使用不同版本的 Windows 和 IE 安装和运行 Windows Virtual PC。很酷的是，Virtual PC 具有称为集成功能的功能，它允许您从虚拟机启动特定应用程序（如 IE），而无需在虚拟机中。（想想虚拟应用程序）

我这样做。我有一台带 XP 和 IE6 的 Virtual PC。我克隆了它，将它升级到 IE7，然后用 IE8 做了同样的事情。现在我有一台装有 IE9 的 Windows 7 机器和 IE8、7 和 6 的虚拟浏览器。我还在那些克隆的 XP 机器上运行旧版本的 Firefox。

如果您使用 Windows 8，您可以做同样的事情，只是过程略有不同（请参阅下面的评论），因为 Windows 8 使用 Hyper-V 而不是 Virtual PC。由于集成功能，我更喜欢 Virtual PC，在 Windows 8 中，您必须使用 Hyper-V 控制台，但您可以做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T23:54:19.953

您需要在 Windows 8 中运行任何早于 IE10 的虚拟机，因为 Windows 8 仅从 IE10 开始。有一些技巧可以让页面表现得有点“像”IE6（或其他浏览器），但我怀疑它们是否会很好地工作，现在你从 IE10 一路回来。

Firefox/Chrome/Opera 可以正常工作，因为它们没有集成到操作系统中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T07:36:46.917

有几个选项可能比在 bootcamp 上安装 Windows 7 或 8 更适合您：

1.  使用诸如 BrowserStack 之类的服务。这需要花钱，但微软通过[Modern.ie提供 3 个月的免费试用期](http://www.modern.ie/virtualization-tools#browserstack)
2.  在 Mac 上安装虚拟机。微软也通过[Modern.ie免费提供这些](http://www.modern.ie/en-us/virtualization-tools#downloads)

# c# - 如何首先将 DbEntities 对象分配给我在 EF 数据库中的模型对象

> ID：16049102
> 
> 赞同：0
> 
> 时间：2013-04-16T23:47:25.500
> 
> 标签：c#, asp.net-mvc-3, entity-framework, entity-framework-4, ado.net-entity-data-model

我正在为我的课程工作做一个项目，我正在使用数据库优先实体框架并将我的 DBContext 类作为

```
public partial class StudentDBEntities : DbContext
    {
         public DbSet<LoginDetail> LoginDetails { get; set; }
        public DbSet<StudentDetail> StudentDetails { get; set; }
        public DbSet<UserFriend> UserFriends { get; set; }
} 
```

现在我创建了一个如下的模型对象来使用这个模型来传递视图。

```
public class ViewStudentDetail
    {    
        public StudentDetail Student { get; set; }
        public UserFriend Friends { get; set; }

    } 
```

这是我的 StudentDetail 类创建的默认值

```
public partial class StudentDetail
    {
        public StudentDetail()
        {
            this.UserFriends = new HashSet<UserFriend>();
        }
        public string StudentName { get; set; }
        public string UnivName { get; set; }
        public string City { get; set; }
        public string Username { get; set; }
        public string Password { get; set; }
        public string EmailId { get; set; }

        public virtual ICollection<UserFriend> UserFriends { get; set; }
    } 
```

在我的视图中，我找到了一个朋友场景，传递的文本框值是 ViewStudentDetail.Friends.username.to post 方法

我的问题是我想将具有给定用户名的 StudentDetails 从 DbContext 对象（注册期间已保存在数据库中）分配给模型对象在我的控制器中我有这样的

```
 StudentDBEntities DbAccess = new StudentDBEntities();
 ViewStudentDetail Studentdetails = new ViewStudentDetail();
    Studentdetails.Student = DbAccess.StudentDetails .Find(username); 
```

此分配不起作用并且分配为空。您能否告诉我如何将 db 中的值获取到模型对象。另外，如果我需要将每个属性分配给模型，请帮助我使用从 db 对象中获取的语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T00:18:55.593

DbSet.Find [()](http://msdn.microsoft.com/en-us/library/gg696418%28v=vs.103%29.aspx)方法仅搜索 PRIMARY KEY 匹配项，它不会搜索实体上的所有/任何属性。

我想你正在寻找这样的东西：

```
ViewStudentDetail.Student = DbAccess.StudentDetails.FirstOrDefault(student => student.Username == username); 
```

如果没有，请在您的问题中提供更多源代码。具体来说，请包括生成的实体类。

# r - 将分类均值转移到新表

> ID：16049106
> 
> 赞同：1
> 
> 时间：2013-04-16T23:47:38.397
> 
> 标签：r, histogram, mean, categories

我对**R**相当陌生，但我已经解决了比我目前的问题更大的挑战，这使得它特别令人沮丧。我搜索了论坛并找到了一些相关主题，但没有一个可以解决这种情况。

我有一个包含 14 个变量的 184 个观察值的数据集：

```
> head(diving)
   tagID ddmmyy Hour.GMT. Hour.Local.  X0  X3 X10  X20  X50 X100 X150 X200 X300 X400
1 122097 250912         0           9 0.0 0.0 0.3 12.0 15.3 59.6 12.8  0.0    0    0
2 122097 260912         0           9 0.0 2.4 6.9  5.5 13.7 66.5  5.0  0.0    0    0
3 122097 260912         6          15 0.0 1.9 3.6  4.1 12.7 39.3 34.6  3.8    0    0
4 122097 260912        12          21 0.0 0.2 5.5  8.0 18.1 61.4  6.7  0.0    0    0
5 122097 280912         6          15 2.4 9.3 6.0  3.4  7.6 21.1 50.3  0.0    0    0
6 122097 290912        18           3 0.0 0.2 1.6  6.4 41.4 50.4  0.0  0.0    0    0 
```

这是标记数据，每个日期都有一个或多个 6 小时时间段（由于传输中断而不是连续数据集）。在每个 6 小时的垃圾箱中，动物潜水的深度按百分比分为 10 个垃圾箱。所以 X0 = 0-3m 之间花费的时间百分比，X3 = 3-10m 之间花费的时间百分比，依此类推。

我想为初学者做的是获取每个深度箱中花费的平均时间百分比并绘制它。首先，我做了以下事情：

```
avg0<-mean(diving$X0)
avg3<-mean(diving$X3)
avg10<-mean(diving$X10)
avg20<-mean(diving$X20)
avg50<-mean(diving$X50)
avg100<-mean(diving$X100)
avg150<-mean(diving$X150)
avg200<-mean(diving$X200)
avg300<-mean(diving$X300)
avg400<-mean(diving$X400) 
```

在这一点上，我不确定如何绘制结果均值，所以我将它们列了一个列表：

```
divingmeans<-list(avg0, avg3, avg10, avg20, avg50, avg100, avg150, avg200, avg300, avg400) 
```

boxplot(divingmeans) 之类的作品，在 X 轴上提供 1:10，在 y 轴上提供 % 0-30。但是，我更喜欢直方图，以及提供分类 bin 名称（例如 avg3 或 X3）的 x 轴，而不仅仅是 1:10 的排名。

hist() 和 plot() 提供以下内容：

```
> plot(divingmeans)
Error in xy.coords(x, y, xlabel, ylabel, log) : 
  'x' is a list, but does not have components 'x' and 'y'
> hist(divingmeans)
Error in hist.default(divingmeans) : 'x' must be numeric 
```

我也试过：

```
> df<-as.data.frame(divingmeans)
> df
  X3.33097826086957 X3.29945652173913 X8.85760869565217 X17.6461956521739 X30.2614130434783
1          3.330978          3.299457          8.857609           17.6462          30.26141
  X29.3565217391304 X6.44510869565217 X0.664130434782609 X0.135869565217391 X0.0016304347826087
1          29.35652          6.445109          0.6641304          0.1358696         0.001630435 
```

和

```
> df <- data.frame(matrix(unlist(divingmeans), nrow=10, byrow=T))
> df
   matrix.unlist.divingmeans...nrow...10..byrow...T.
1                                        3.330978261
2                                        3.299456522
3                                        8.857608696
4                                       17.646195652
5                                       30.261413043
6                                       29.356521739
7                                        6.445108696
8                                        0.664130435
9                                        0.135869565
10                                       0.001630435 
```

两者都没有提供我正在寻找的那种表。

我知道必须有一个非常基本的解决方案可以将其转换为合适的表格，但我无法为我的生活弄清楚。我希望能够制作一个基本的直方图，显示每个潜水箱平均花费的时间百分比。用于此目的的数据的最佳格式似乎是包含两列的表格：col1=bin（类别；例如 avg50）和 col2=%（数字；在该类别中花费的平均时间百分比）。

您还会注意到数据被分解为不同的时间段；最终，我希望能够按一天中的时间分离出数据，例如，看看平均潜水深度是否在白天/黑夜之间转移，等等。我认为，一旦我完成了最初的代码，我就可以通过选择例如`X0[which(Hour.GMT.=="6")]`. 对此的提示也将非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T00:02:17.523

我认为您会发现处理长格式数据要容易得多。

您可以`reshape`使用`reshape`. 我将使用 data.table 来展示如何轻松地按组计算平均值。

```
library(data.table)
DT <- data.table(diving)

DTlong <- reshape(DT, varying = list(5:14), direction = 'long', 
  times = c(0,3,10,20,50,100,150,200,300,400), 
  v.names = 'time.spent', timevar = 'hours')

timeByHours <- DTlong[,list(mean.time = mean(time.spent)),by=hours]

# you can then plot the two column data.table

plot(timeByHours, type = 'l') 
```

![在此处输入图像描述](https://i.stack.imgur.com/QbhbL.png)

您现在可以通过深度的日期/小时/时间的任意组合进行分析

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:54:32.557

你想如何绘制它们？

```
# grab the means of each column
diving.means <- colMeans(diving[, -(1:5)])

# plot it
plot(diving.means)

# boxplot
boxplot(diving.means) 
```

如果你想从列名中获取区间的下限，只需去掉 X

```
lowerIntervalBound <- gsub("X", "", names(diving)[-(1:5)])

# you can convert these to numeric and plot against them 
lowInts <- as.numeric(lowerIntervalBound)
plot(x=lowInts, y=diving.means)

# ... or taking log
plot(x=log(lowInts), y=diving.means)

# ... or as factors (similar to basic plot)
plot(x=factor(lowInts), y=diving.means) 
```

不要将潜水装置放在 a 中`list`，而是尝试将它们放在 a 中`vector`（使用`c`）。

如果你想把它组合成一个data.frame：

```
data.frame(lowInts, diving.means)

# or adding a row id if needed. 
data.frame(rowid=seq(along=diving.means), lowInts, diving.means) 
```

# php - 多语言数据库：哪种方法更好？

> ID：16049110
> 
> 赞同：6
> 
> 时间：2013-04-16T23:47:56.847
> 
> 标签：php, mysql, database, multilingual

我有一个 3 种语言的网站。

哪种是构建数据库的最佳方式？

1) 创建 3 个表，每个表对应一种语言（例如 Product_en、Product_es、Product_de），并使用标识符从表中检索数据：

例如在 php 页面上我有一个字符串：

```
$language = 'en' 
```

所以我只得到数据

```
SELECT FROM Product_$language 
```

2）创建1个表：

```
ID  LANGUAGE   NAME    DESCR 
```

并仅在页面上发布

```
WHERE LANGUAGE = '$language' 
```

3）创建1个表：

```
ID  NAME_EN   DESCR_EN   NAME_ES   DESCR_ES   NAME_DE   DESCR_DE 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T23:56:13.017

我宁愿选择**第二个选项**。

对我来说，第一个选项似乎不够灵活，无法搜索记录。如果您需要搜索两种语言怎么办？你可以做的最好的方法是`UNION`两个`SELECT`语句的结果。第三个似乎有数据冗余。感觉就像你需要在每个名字上都有一种语言。

第二个非常灵活和方便。除非您想透视记录，否则您可以执行任何您想要的操作而无需添加一些特殊方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T23:52:28.793

我会选择选项一或二。哪一个真正取决于您的应用程序以及您计划如何访问数据。当我过去做类似的本地化时，我使用了单表方法。

我对这种方法的偏好是，如果您添加额外的本地化，您根本不需要更改数据库架构。在这种情况下，您也不需要更改相关代码，因为语言标识符只是成为查询中使用的另一个值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T23:52:59.200

这样，您将立即杀死数据库。

做一个像这样的表：

```
TABLE languages with fields:

-- product name
-- product description
-- two-letter language code 
```

这将使您不仅拥有一个结构更好的数据库，而且您甚至可以拥有只有一种翻译的产品。如果您愿意，您甚至可以在未指定其他语言的情况下显示默认语言。你当然会以编程方式进行，但我认为你明白了。

# javascript - 如何在 Windows Metro 应用程序中使用使用 .Net Framework 4.0 编译的 dll

> ID：16049112
> 
> 赞同：3
> 
> 时间：2013-04-16T23:48:09.477
> 
> 标签：javascript, c#-4.0, dll, dllimport, winjs

我是 Windows 8 应用程序开发和专业 C# 开发的新手。我遇到了一个问题，客户希望我与打印机（DYMO 450 Turbo）交互，而 SDK 只附带一个使用 .net 4.0 编译的 dll。示例显示从应用程序中引用 dll，因为该应用程序是使用 WinJS 以 Javascript 编写的，所以我无法做到这一点。Metro 应用程序使用 NETCore，而 dll 使用 NETFramework。到目前为止，我最好的解决方案是编写代码以作为 .NET 4.0 中的服务器与打印机接口，该服务器侦听通过 XMLHttpRequest 从 Javascript 发送的请求。我的直觉告诉我必须有更好的方法，但要么我还没有弄清楚，要么我只是还没有足够的知识来弄清楚。任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:54:42.857

您不能在 Windows 应用商店应用程序中使用标准 .NET 4.0 程序集。您只能使用 WinRT 组件。也就是说，您现有的组件可能不容易转换为 WinRT 组件。如果您只是为您的 .NET 4.0 组件包含项目，然后将输出类型（在项目属性下）更改为 Windows 运行时组件，您可以查看所有抛出的编译器错误并了解有多大一件苦差事，它将是转换它。[本文](http://msdn.microsoft.com/en-us/library/windows/apps/hh441572.aspx)将让您了解 WinRT 组件的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:46:26.880

建议使用项目模板 c# - windows 运行时组件添加一个项目，以在 c# 中构建一个可以使用您的 sdk dll 的 winrt 组件。winrt 组件可以暴露一个包装的 impl。winrt组件可以在winjs项目中引用。

我已将其用于简单的 utils 功能，但未用于与第三方 sdk 集成。建议你试一试。

# sql - 如何使用多种 where 方法改进 LIKE 查询

> ID：16049117
> 
> 赞同：0
> 
> 时间：2013-04-16T23:48:27.567
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, activerecord

我有这个疑问，

```
User.where('name LIKE ?', "%#{term}%").where(group: "student").limit(10) 
```

我有这种偷偷摸摸的怀疑，我可以以某种方式改进它，主要是允许一个 where 方法而不是两个，但是任何尝试都会导致 sql 查询无法识别 group 字段。到目前为止，上述方法有效，但我想知道这是否可以改进以及如何改进。

另外，除了美观之外，我是否应该担心查询中有多个 where 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:51:26.123

多个 where 不会对性能产生任何明显影响。DB只被击中一次。

带有“LIKE”的查询本来就很慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:58:14.023

您拥有的当前代码很好，并且比组合对`where`. 正如其他评论者/答案所指出的，多次调用`where`不会影响数据库查询的总速度。

如果您想知道如何将查询更改为单个`where`调用，请尝试以下操作

```
User.where('name LIKE ? AND group = ?', "%#{term}%", 'student').limit(10) 
```

# sql - 数据挖掘预测服务器操作已取消

> ID：16049123
> 
> 赞同：1
> 
> 时间：2013-04-16T23:49:16.383
> 
> 标签：sql, sql-server, sql-server-2008, visual-studio-2008, data-mining

如果有人以前遇到过问题或知道如何解决问题，我会给予帮助。我正在尝试使用 Visual Studio 2008 创建数据挖掘。我快要结束了。

![在此处输入图像描述](https://i.stack.imgur.com/SpemE.png)

当我按下运行按钮时，出现以下错误。我尝试了从（本地）到 SQL Server 2008R2 系统分析服务器的不同版本的服务器名称 ![在此处输入图像描述](https://i.stack.imgur.com/eVzXU.png)

如果有人可以帮助我，那就太好了。谢谢大家。

# javascript - 向气泡图/高图添加自定义工具提示

> ID：16049126
> 
> 赞同：3
> 
> 时间：2013-04-16T23:49:29.243
> 
> 标签：javascript, charts, highcharts, jsfiddle, bubble-chart

我正在尝试在 highcharts 气泡图中自定义工具提示。我想添加基于 x、y 和 z 标题的上下文（例如，“50 人死亡，100 人受伤，150 名受害者”而不是当前的“（50,150）大小: 150" 显示屏）。我可以使用以下方法在散点图中实现这一点，但气泡中没有骰子。有任何想法吗？谢谢。:)

```
tooltip: {
                    headerFormat: '<b>{series.name}</b><br>',
                    pointFormat: '{point.x} fatalities, {point.y} injured, {point.z}  total'
                } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T03:27:39.967

希望我正确理解您的问题，这就是您要找的。

```
$(function () {
    $('#container').highcharts({

        chart: {
            type: 'bubble',
            zoomType: 'xy'
        },
        plotOptions: {
            bubble: {
                tooltip: {
                    headerFormat: '<b>{series.name}</b><br>',
                    pointFormat: '{point.x} fatalities, {point.y} injured, {point.z}  total'

                }
            }
        },
        title: {
            text: 'Highcharts Bubbles'
        },

        series: [{
            data: [
                [97, 36, 79],
                [94, 74, 60],
                [68, 76, 58],
                [64, 87, 56],
                [68, 27, 73],
                [74, 99, 42],
                [7, 93, 87],
                [51, 69, 40],
                [38, 23, 33],
                [57, 86, 31]
            ]
        }, {
            data: [
                [25, 10, 87],
                [2, 75, 59],
                [11, 54, 8],
                [86, 55, 93],
                [5, 3, 58],
                [90, 63, 44],
                [91, 33, 17],
                [97, 3, 56],
                [15, 67, 48],
                [54, 25, 81]
            ]
        }, {
            data: [
                [47, 47, 21],
                [20, 12, 4],
                [6, 76, 91],
                [38, 30, 60],
                [57, 98, 64],
                [61, 17, 80],
                [83, 60, 13],
                [67, 78, 75],
                [64, 12, 10],
                [30, 77, 82]
            ]
        }]

    });

}); 
```

**[演示](http://jsfiddle.net/vCMpT/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:19:05.620

您应该使用工具提示`formatter` [http://api.highcharts.com/highstock#tooltip.formatter](http://api.highcharts.com/highstock#tooltip.formatter)

编辑：http: [//jsfiddle.net/7nqB5/](http://jsfiddle.net/7nqB5/)

# php - 从路径中删除 .jpg 扩展名

> ID：16049129
> 
> 赞同：0
> 
> 时间：2013-04-16T23:49:54.443
> 
> 标签：php

例如，从路径中删除“.jpg”扩展名的更便宜的解决方案是什么

```
lib/img/img.jpg  > lib/img/img 
```

我将循环使用它 6 次，这就是为什么我需要一个轻量级的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T23:52:48.717

本`pathinfo`机方法可能是您最好的选择。输出是一个包含组件的数组，然后您可以将它们拼凑在一起：

```
$parts = pathinfo("lib/img/img.jpg");
$result = $parts['dirname'] . '/' . $parts['filename']; 
```

`$result`现在包含您的按摩文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T23:52:59.030

老实说，六个并不多。当你有一个至少运行一千次的循环时开始优化。

话虽如此，您正在寻找[pathinfo](http://www.php.net/manual/en/function.pathinfo.php)功能。

# python - 从启动时使用管理员权限从 .bat 文件运行应用程序？

> ID：16049131
> 
> 赞同：0
> 
> 时间：2013-04-16T23:49:57.773
> 
> 标签：python, windows, batch-file, startup, administrator

我正在尝试使用批处理文件从启动时运行程序列表。Windows 会自动登录到标准帐户。如何在启动时以管理员权限运行 .bat，而无需每次都提示输入密码？

.bat 在启动文件夹中：

```
@echo off
cd C:\Program Files (x86)\program.exe
cd C:\C:\Program Files (x86)\program.exe
cd C:\Users\M\desktop\folder\

TIMEOUT 60
startscript.py

exit 
```

我找到了这个命令：

```
runas.exe /savecred /user:administrator "defrag c:" 
```

但不能让它工作。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:33:03.570

是的，这是一个错字。它只会拒绝启动程序，msi afterburner，而不提示管理员通行证。

# google-app-engine - 更新到 appengine 1.7.7 后出现 HTTP 500 错误

> ID：16049132
> 
> 赞同：0
> 
> 时间：2013-04-16T23:50:17.103
> 
> 标签：google-app-engine

我们正在尝试将我们的（Java + Maven）项目更新到 appengine 1.7.7，但是当我们现在运行 devserver 请求时，即使对于小的静态内容，也需要大约 10 秒并以 HTTP 500 错误结束，并显示消息“得到请求服务器 -1.default 但实例很忙”。此消息似乎源自 BackendServersFilter.java（AppEngine 类之一），但有点奇怪，因为此时我们没有请求后端。是否有其他人在他们的应用程序更新到 appengine 1.7.7 时看到这种行为？如果是这样，有没有人找到解决方案？

顺便说一句，我在项目中为产生这种行为而进行的唯一更改是我的 Maven POM 文件中的 appengine 版本从 1.7.6 到 1.7.7。

# haskell - 为什么我的两个代码的工作方式如此不同？（Haskell，归并排序）

> ID：16049138
> 
> 赞同：6
> 
> 时间：2013-04-16T23:51:00.183
> 
> 标签：haskell, mergesort

我正在为合并排序（Haskell）编写代码。

我对根据顺序将两个列表放在一起的功能有疑问。

（即 [1,4,7] [2,5,6] -> [1,2,4,5,6,7]）

这是我的原始代码。（xs, ys 是参数，zs 是累加器。）

```
msort4 [] ys zs = zs ++ ys
msort4 xs [] zs = zs ++ xs
msort4 allx@(x:xs) ally@(y:ys) zs 
 | x <= y = msort4 xs ally (zs ++ [x])
 | otherwise = msort4 allx ys (zs ++ [y]) 
```

这是我在参考网上找到的代码后编写的第二个代码。

```
msort4 [] ys = ys
msort4 xs [] = xs
msort4 allx@(x:xs) ally@(y:ys)
 | x <= y = x :msort4 xs ally 
 | otherwise = y :  msort4 allx ys 
```

只是有了这个小小的区别，我的代码改进了很多。

我正在对大约 500 个单词的列表进行排序，我的原始代码需要大约 2.5 秒，但新代码的排序平均在 0.4 秒内。

我想知道为什么我的速度这么慢，而在线的速度要快得多，尽管它们看起来很相似。（我什至认为我的会更快，因为我的不需要来回走动。）

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T23:58:29.723

在列表前添加 (:) 是 O(1)，(++) 是 O(n)，其中 n 是左列表的长度

随着 zs 变大，您每次都必须遍历整个列表才能添加一个元素 [x]

# java - 检查数组是否包含整数并生成没有重复元素的整数数组

> ID：16049141
> 
> 赞同：-1
> 
> 时间：2013-04-16T23:51:15.600
> 
> 标签：java, arrays

我将如何做到这一点，以使所说的行`array.equals(guess)`有效，以及如何将加载值方法更改为不允许重复数字？

```
import java.util.Arrays;
import java.util.Random;
import javax.swing.JOptionPane;

public class Assignment {

    private static int[ ] loadValues(){
        int[] groupOfValues = new int[5];
        Random randomized = new Random();

        for (int index = 0; index < 5; index++) {
          groupOfValues[index] = randomized.nextInt(39) + 1;
        }
        return groupOfValues;
    }
    private static void displayOutcome(int [ ] array, int guess){
          if(array.equals(guess)){
          JOptionPane.showMessageDialog(null, "Congrats, your guess of " + guess + " was one of these numbers:\n" 
                  + Arrays.toString(array));
          }
          else{
          JOptionPane.showMessageDialog(null, "Sorry, your guess of " + guess + " was not one of these numbers:\n" 
                  + Arrays.toString(array));
          }

    }

    public static void main(String[] args) {

          int guessedConvert;
          String guess;

          do{
          guess = JOptionPane.showInputDialog("Guess a number from 1-39");
          guessedConvert = Integer.parseInt(guess);     
          }while(guessedConvert < 1 || guessedConvert > 39);

          displayOutcome(loadValues(), guessedConvert);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T23:56:37.883

搜索数组需要一个循环：

```
boolean found = false;
for (int i = 0 ; !found && i != array.length ; i++) {
    found = (array[i] == guess);
}
if (found) {
    ...
} 
```

要确定是否存在重复项，请在外循环*中*`loadValues`添加类似的代码段：

 *```
for (int index = 0; index < 5; index++) {
    boolean found = false;
    int next = randomized.nextInt(39) + 1;
    // Insert a loop that goes through the filled in portion
    ...
    if (found) {
        index--;
        continue;
    }
    groupOfValues[index] = next;
} 
```*

# excel - 将报表创建为 Crystal 和 Excel

> ID：16049145
> 
> 赞同：1
> 
> 时间：2013-04-16T23:51:23.580
> 
> 标签：excel, crystal-reports, oracle11g, business-objects, crystal-reports-xi

我们有一个查询Oracle 并使用Crystal Reports 制作报表的报表。用户希望输出既是 Crystal Report 又是 Excel。是的，我知道他们可以将报告结果输出到 Excel。是否有任何（合理的）方法可以自动提供两种输出格式？报告在 Business Objects Enterprise 中运行。

我看到输出格式是在 BOE 中央管理控制台中为计划/格式下的报告设置的。这使它看起来像是一个选项，而不是两者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:39:18.420

您可以创建一个新的出版物并添加此报告，它将允许您在电子邮件中同时拥有水晶报告和excel格式作为京东方的附件。希望这可以帮助。

问候特蕾西

# sql-server - 如何在没有源集的情况下使用 SQL MERGE 根据 Id 插入单行

> ID：16049147
> 
> 赞同：0
> 
> 时间：2013-04-16T23:51:41.767
> 
> 标签：sql-server, merge, sql-server-2008-r2

`MERGE`在 SQL Server 中正确使用语句存在许多问题。他们都使用表/集引用进行合并。这个表参考是必要的吗？

在我的情况下，我有一个带有两个参数的 sproc`@myId`和`@myValue`

`MyTable`我只是想要一个基于列的 UPSERT`[MyId]`

我必须创建一个集合似乎很奇怪

```
USING (SELECT @myId AS myId) AS source 
```

继续`MERGE`（更新插入）。这是唯一的方法吗？

**编辑：**投票结束我自己的问题，因为完全重复......但我认为另一个问题的标题很难找到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:12:13.630

您还可以使用以下语法：

```
merge into MyTable mt
using (values (@myId, @myValue)) t(id, value) on mt.Id = t.id
when not matched then insert /* ... */ 
```

你总是需要某种东西。

# hibernate - 同一实体上的 OneToMany 复合主键

> ID：16049154
> 
> 赞同：0
> 
> 时间：2013-04-16T23:52:40.940
> 
> 标签：hibernate, jpa, annotations, one-to-many

我想做以下事情：

```
@Entity
@Table(name="things")
public class Thing
{
    @Id
    private String id;

    @OneToMany(cascade=CascadeType.ALL, fetch=FetchType.LAZY)
    private Set<Thing> alreadyMatchedThings;

    //getters and setters
} 
```

正如预期的那样，这会创建表 things_things，并且因为有时两列会重复相同的值，所以我真正想要的是将这两列（id 和外键）视为复合主键。

不出所料，我收到错误重复条目 '1165f4a1-c369-41ea-888c-0e3798deb04f' for key 'alreadyMatchedThings_id'

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:01:46.970

好吧，我想我可以简单地选择：

```
@Entity
@Table(name="things")
public class Thing
{
    @Id
    private String id;

    @OneToMany(cascade=CascadeType.ALL, fetch=FetchType.LAZY)
    @JoinColumn(name="sourcethingid")
    private Set<MatchedThing> matchedThings;

    //getters and setters
} 
```

在哪里

```
@Entity
public class MatchedThings
{
    @Id
    private String id;

    private Thing matchedThing;

    //getters and setters
} 
```

干得好，我。

# ios - 下载 pdf 文件

> ID：16049162
> 
> 赞同：1
> 
> 时间：2013-04-16T23:53:42.457
> 
> 标签：ios, objective-c

我正在尝试将 pdf 文件从服务器下载到设备。这是我正在使用的代码

```
- (id)initwithURL:(NSString*)remoteFileLocation andFileName:(NSString*)fileName{

    //Get path to the documents folder
    NSString *resourcePathDoc = [[NSString alloc] initWithString:[[[[NSBundle mainBundle]resourcePath]stringByDeletingLastPathComponent]stringByAppendingString:@"/Documents/"]];
    localFilePath = [resourcePathDoc stringByAppendingString:fileName];

    BOOL fileExists = [[NSFileManager defaultManager]fileExistsAtPath:localFilePath];
    if (fileExists == NO) {
        NSURL *url = [NSURL URLWithString:remoteFileLocation];
        NSData *data = [[NSData alloc] initWithContentsOfURL: url];

        //Write the data to the local file
        [data writeToFile:localFilePath atomically:YES];
    }
    return self;
} 
```

其中 remoteFileLocation 是一个 NSString 并且具有值[http://topoly.com/optimus/irsocial/Abs/Documents/2009-annual-report.pdf](http://topoly.com/optimus/irsocial/Abs/Documents/2009-annual-report.pdf) 在运行应用程序时崩溃，只是在 NSData 上给出一个 SIGABRT 错误。它提供的唯一有用信息是

**由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[NSURL 长度]：无法识别的选择器已发送到实例 0xc87b600”**

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T04:33:20.907

由于您的 PDF 文件太大，所以如果您进行同步下载，下载时间会太长，所以我坚持您创建一个异步下载器并使用它。我已经放了相同的代码。

第 1 步：创建文件“FileDownloader.h”

```
#define FUNCTION_NAME   NSLog(@"%s",__FUNCTION__)

#import <Foundation/Foundation.h>

@protocol fileDownloaderDelegate <NSObject>

@optional
- (void)downloadProgres:(NSNumber*)percent forObject:(id)object;

@required

- (void)downloadingStarted;
- (void)downloadingFinishedFor:(NSURL *)url andData:(NSData *)data;
- (void)downloadingFailed:(NSURL *)url;

@end

@interface FileDownloader : NSObject
{

@private
    NSMutableURLRequest *_request;
    NSMutableData *downloadedData;
    NSURL *fileUrl;

    id <fileDownloaderDelegate> delegate;

    double totalFileSize;
}

@property (nonatomic, strong) NSMutableURLRequest *_request;
@property (nonatomic, strong) NSMutableData *downloadedData;
@property (nonatomic, strong) NSURL *fileUrl;

@property (nonatomic, strong) id <fileDownloaderDelegate> delegate;

- (void)downloadFromURL:(NSString *)urlString;

@end 
```

第 2 步：使用 FileDownloader.m 创建一个 .m 文件

```
#import "FileDownloader.h"

@implementation FileDownloader

@synthesize _request, downloadedData, fileUrl;
@synthesize delegate;

- (void)downloadFromURL:(NSString *)urlString
{
    [self setFileUrl:[NSURL URLWithString:[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]];

    self._request = [NSMutableURLRequest requestWithURL:self.fileUrl cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:60.0f];
    NSURLConnection *cn = [NSURLConnection connectionWithRequest:self._request delegate:self];
    [cn start];
}

#pragma mark - NSURLConnection Delegate
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    if([delegate respondsToSelector:@selector(downloadingStarted)])
    {
        [delegate performSelector:@selector(downloadingStarted)];
    }

    totalFileSize = [response expectedContentLength];    
    downloadedData = [NSMutableData dataWithCapacity:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [downloadedData appendData:data];

    if([delegate respondsToSelector:@selector(downloadProgres:forObject:)])
    {
        [delegate performSelector:@selector(downloadProgres:forObject:) withObject:[NSNumber numberWithFloat:([downloadedData length]/totalFileSize)] withObject:self];
    }
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    if([delegate respondsToSelector:@selector(downloadingFailed:)])
    {
        [delegate performSelector:@selector(downloadingFailed:) withObject:self.fileUrl];
    }    
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    if([delegate respondsToSelector:@selector(downloadingFinishedFor:andData:)])
    {
        [delegate performSelector:@selector(downloadingFinishedFor:andData:) withObject:self.fileUrl withObject:self.downloadedData];
    }
}

@end 
```

第 3 步：导入文件`#import "FileDownloader.h"`并`fileDownloaderDelegate`在您的 viewController 中

第 4 步：在 viewCONtroller 的 .m 文件中定义以下委托方法

```
- (void)downloadingStarted;
- (void)downloadingFinishedFor:(NSURL *)url andData:(NSData *)data;
- (void)downloadingFailed:(NSURL *)url; 
```

第 5 步：创建 FileDownloader 的对象并将 URL 设置为下载它。

```
FileDownloader *objDownloader = [[FileDownloader alloc] init];
[objDownloader setDelegate:self];
[objDownloader downloadFromURL:@"Your PDF Path URL here]; 
```

第 6 步：将文件保存在 `- (void)downloadingFinishedFor:(NSURL *)url andData:(NSData *)data;`方法中所需的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T00:04:02.017

看来您的`remoteFileLocation`参数值实际上是一个`NSURL`对象而不是`NSString`. 仔细检查您如何获取/创建`remoteFileLocation`并验证它确实是`NSString`.

此代码还有其他几个问题。创建 Documents 目录路径的正确方法如下：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = paths[0];
NSString *localFilePath = [resourcePathDoc stringByAppendingPathComponent:fileName];

BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:localFilePath];
if (!fileExists) {
    NSURL *url = [NSURL URLWithString:remoteFileLocation];
    NSData *data = [[NSData alloc] initWithContentsOfURL:url];

    //Write the data to the local file
    [data writeToFile:localFilePath atomically:YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T08:17:14.850

GCD 可用于处理大量文件。如果您愿意，您可以在第二个线程上同步下载文件并回发到主线程。您还可以使用操作队列。

您确实也可以使用 NSURLConnection 中的委托方法，允许您处理主线程上的回调。然而，定义自己的委托已经过时了，因为您可以只从 NSURLConnection 本身实现委托。

# mysql - 如何从基于单个列的 SQL 查询中删除重复项

> ID：16049171
> 
> 赞同：1
> 
> 时间：2013-04-16T23:54:26.470
> 
> 标签：mysql, sql, duplicates

我需要修改一个查询。查询当前所做的是根据 Ad Title 和 Ad Description 返回搜索结果（广告）。如果在广告标题或广告描述中找到任何搜索词，则会返回这些结果

我想修改查询，以便每个广告在给定广告标题的搜索结果中只出现一次...因此，如果在搜索中找到 5 个广告与给定单词的广告标题相同，它应该只返回 1 个广告对于那个广告标题...

```
$sql = "SELECT a.*, UNIX_TIMESTAMP(a.createdon) AS timestamp, ct.cityname,
                    COUNT(*) AS piccount, p.picfile,
                    scat.subcatname, cat.catid, cat.catname $xfieldsql
                FROM t_ads a
                    INNER JOIN t_cities ct ON a.cityid = ct.cityid
                    INNER JOIN t_subcats scat ON a.subcatid = scat.subcatid
                    INNER JOIN t_cats cat ON scat.catid = cat.catid
                    LEFT OUTER JOIN t_adxfields axf ON a.adid = axf.adid
                    LEFT OUTER JOIN t_adpics p ON a.adid = p.adid AND p.isevent = '0'
                    LEFT OUTER JOIN t_featured feat ON a.adid = feat.adid AND feat.adtype = 'A'
                WHERE $where
                    AND $visibility_condn
                    AND (feat.adid IS NULL OR feat.featuredtill < NOW())
                    $loc_condn
                GROUP BY a.adid
                ORDER BY a.createdon DESC
                LIMIT $offset, $ads_per_page"; 
```

编辑： $where 包含搜索表达式...如果打开正则表达式搜索，则使用正则表达式，否则不... $sqlsearch 包含用户输入的搜索词...

```
if ($regex_search) {
                $where = "(a.adtitle RLIKE '[[:<:]]{$searchsql}[[:>:]]' OR a.addesc RLIKE '[[:<:]]{$searchsql}[[:>:]]')";
            } else {
                $where = "(a.adtitle LIKE '$searchsql' OR a.addesc LIKE '$searchsql')"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T19:52:26.270

执行此操作的“正确”方法是通过首先找出重复出现的原因来解决路由原因。这将与 JOIN 有关，但如果不查看数据，我无法回答这个问题。但是，如果您想要一种快速（ish）且肮脏的方法来删除重复项，则可以尝试以下方法。

**免责声明：**这完全未经测试，因此这里更有可能出现一两个错误 - 但希望不会破坏交易。

```
SELECT a2.*, UNIX_TIMESTAMP(a.createdon) AS timestamp, ct2.cityname,
       COUNT(*) AS piccount, p2.picfile,
       scat2.subcatname, cat2.catid, cat2.catname $xfieldsql
FROM
   (SELECT subq1.title, MIN(subq1.adid) AS adid
    FROM 
           (SELECT a.*, UNIX_TIMESTAMP(a.createdon) AS timestamp, ct.cityname,
                COUNT(*) AS piccount, p.picfile,
                scat.subcatname, cat.catid, cat.catname
            FROM t_ads a
                INNER JOIN t_cities ct ON a.cityid = ct.cityid
                INNER JOIN t_subcats scat ON a.subcatid = scat.subcatid
                INNER JOIN t_cats cat ON scat.catid = cat.catid
                LEFT OUTER JOIN t_adxfields axf ON a.adid = axf.adid
                LEFT OUTER JOIN t_adpics p ON a.adid = p.adid AND p.isevent = '0'
                LEFT OUTER JOIN t_featured feat ON a.adid = feat.adid AND feat.adtype = 'A'
            WHERE $where
                AND $visibility_condn
                AND (feat.adid IS NULL OR feat.featuredtill < NOW())
                $loc_condn
            GROUP BY a.adid) subq1
    GROUP BY subq.title) subq2
INNER JOIN t_ads a2 ON a2.adid = subq2.adid
INNER JOIN t_cities ct2 ON a2.cityid = ct2.cityid
INNER JOIN t_subcats scat2 ON a2.subcatid = scat2.subcatid
INNER JOIN t_cats cat2 ON scat2.catid = cat2.catid
LEFT OUTER JOIN t_adxfields axf2 ON a2.adid = axf2.adid
LEFT OUTER JOIN t_adpics p2 ON a2.adid = p2.adid AND p2.isevent = '0'
LEFT OUTER JOIN t_featured feat2 ON a2.adid = feat2.adid AND feat2.adtype = 'A'
ORDER BY a2.createdon DESC
LIMIT $offset, $ads_per_page 
```

这可以大大简化和整理，例如通过从子查询中删除一些东西，但我只是给出一个总体思路（希望）让你启动并运行......

## 解释

`subq2`只需按标题分组并`adid`从每个组中挑选一个（选择在`MIN`此处使用，但可以`MAX`改为使用）。

`subq1`是原始查询，但删除了排序和限制，因为这些是由外部查询应用的。

外部查询连接到重复数据删除的 ID 并连接回广告和其他表（给它们不同的别名），以便从原始查询中选择字段。

# java - 在对象上设置属性会重置 ArrayList 中类似对象的相同属性

> ID：16049173
> 
> 赞同：0
> 
> 时间：2013-04-16T23:54:29.943
> 
> 标签：java, collections

在下面的代码部分，我应该有一个具有不同 xValue 的 Objs 的 ArrayList。相反，当我在第四行设置 Obj n 的 xValue 时，ArrayList 中所有同名的 Objs 都会将 xValue 设置为相同的值。

```
Obj n = new Obj();
n = getObj(event.getX(), event.getY(), view.getHeight(), view.getWidth(), view);

n.setXValue(view.getWidth());

if (currentMode == AppMode.MODE.code && n != null) {
    if (event.getAction() == MotionEvent.ACTION_MOVE) {
        arraylist.add(n);
    } // end if (event.getAction
} 
```

我究竟做错了什么？是否有一个集合允许我设置对象的属性而不会弄乱集合中其他对象的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:59:52.070

当涉及到对象时，Java 是一种“按引用传递”的语言。当您将同一个对象放在两个不同的集合中时，您只是将指向内存中相同位置的指针传递给每个集合，因此您对一个引用所做的任何更改都会影响另一个引用。

如果您不希望这种行为，则必须使用 Object.clone() 在将对象放入新集合之前制作对象的副本，或使用其他类似的复制技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:58:53.630

我猜你写了 Obj 并且在 Obj 中你有一个名为 XValue 之类的静态变量。

当您将变量指定为静态时，您将获得该变量的唯一实例，该实例在该类的所有实例中共享，因此：这种行为。

或者，torquestomp 说的是什么（他是对的）

# ios - 从 NSArrays 收集数据，具有莫名其妙的行为

> ID：16049179
> 
> 赞同：1
> 
> 时间：2013-04-16T23:55:35.363
> 
> 标签：ios, objective-c, cocoa

我的 Cocoa 项目中有一组对象。如果对象具有与传入值匹配的属性，则应将对象保存到新数组中，该数组是方法的返回值。这看起来很简单，但我看到了一些奇怪的行为。这是方法：

```
- (NSMutableArray*)tagAttributeRectsForID:(NSString*)nodeID
{
    NSMutableArray * resultArray = [NSMutableArray array];
    for (NSDictionary * line in self.lineInfoForTap) {

        NSMutableArray * glyphRects = [line valueForKey:@"GlyphRects"];

        for (NSDictionary * rectDict in glyphRects) {
            if ([rectDict valueForKey:nodeID]) {
                CGRect thisRect = CGRectFromString([rectDict valueForKey:nodeID]);
                if (thisRect.size.width > 0) {
                    [resultArray addObject:NSStringFromCGRect(thisRect)];
                }

            }
        }
        glyphRects = nil;
    }
    return resultArray;
} 
```

发生的情况是，取决于导致一组匹配的行对象的数量，这就是我在返回数组中获得完整结果集的次数。换句话说，我希望样本结果如下所示：

```
2013-04-16 19:38:37.665 Vorpal[18523:c07] (
"{{0, 486.5}, {38.44, 13.5}}",
"{{100, 486.5}, {27.12, 13.5}}",
"{{140, 483.34}, {86.54, 16.66}}",
"{{0, 508.86}, {58.62, 14.14}}"
) 
```

但相反，我得到了这个：

```
2013-04-16 19:38:37.665 Vorpal[18523:c07] (
"{{0, 486.5}, {38.44, 13.5}}",
"{{100, 486.5}, {27.12, 13.5}}",
"{{140, 483.34}, {86.54, 16.66}}",
"{{0, 508.86}, {58.62, 14.14}}",
"{{0, 486.5}, {38.44, 13.5}}",
"{{100, 486.5}, {27.12, 13.5}}",
"{{140, 483.34}, {86.54, 16.66}}",
"{{0, 508.86}, {58.62, 14.14}}"
) 
```

如果有三行的匹配结果，我将返回三组数据。

我不禁认为我错过了一些关于我编写此方法的方式的非常基本的内容，但经过数小时的凝视之后，我已经准备好认输并问朋友了。你是那个朋友，匿名的 SO 读者吗？我可以用一个朋友。:-(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T19:52:28.940

如果您的结果有重复（确实如此），那么我们应该推断您的源数据有重复。您可以使用 NSSet 过滤重复项。

如果您愿意的话，您可以大量压缩此代码。然后你就不需要显式地创建一个集合。

首先在 NSString 上创建一个类别：

```
@interface NSString (ValidStringRect)
- (BOOL)validRect { return CGRectFromString(self).size.width > 0; }
@end 
```

然后将您的方法替换为：

```
- (NSMutableArray*)tagAttributeRectsForID:(NSString*)nodeID
{
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"validRect = YES"];
    // I might have the @distinctUnionOfArrays operator at the wrong point in the keypath
    id array = [self valueForKeyPath:[NSString stringWithFormat:@"lineInfoForTap.GlyphRects.@distinctUnionOfArrays.%@", nodeID]];
    return [[array filteredArrayUsingPredicate:pred] mutableCopy];
} 
```

键“@distinctUnionOfArrays”是一个数组运算符，没有它您将拥有一个数组数组。有关更多信息，请参阅[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/CollectionOperators.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/CollectionOperators.html)。

# java - Intellij IDEA 新手，不知道如何设置项目（svn）以在 tomcat 中运行

> ID：16049180
> 
> 赞同：0
> 
> 时间：2013-04-16T23:55:37.347
> 
> 标签：java, eclipse, tomcat, intellij-idea

我已经使用这些说明在 Eclipse 中工作了：

> 在首选项窗口（窗口>首选项）Tomcat
> 
> *   指定 Tomcat 主目录（例如：E:\work\development\apache-tomcat-6.0.26）
> *   指定使用 server.xml 上下文声明模式和配置文件路径（例如： E:\work\development\apache-tomcat-6.0.26\conf\server.xml ） Tomcat > Advanced
> *   指定 Tomcat 基本目录（例如： E:\work\development\apache-tomcat-6.0.26 ） Tomcat JVM 设置
> *   指定 JRE（如果没有列出，请在 Java > Installed JREs 下搜索 JRE）
> *   添加以下 JVM 参数 o -XX:PermSize=128m o -XX:MaxPermSize=128m o -Dtomcat.cluster.node=
>     
>     > 名称> o -Xmx1024m o -Xms128m Tomcat > 源路径
>     
>     
> *   选择 Java 项目到源路径 在 Project Navigator > Project > Properties Java Build Path > Source 中选择项目
>     
>     
> *   在构建路径上添加 CESWeb/src 作为源文件夹
>     
>     
> *   将 CESWeb/WEB-INF/classes 设置为默认输出文件夹 Java Build Path > Libraries
> *   在 CESWeb/WEB-INF/lib 中添加罐子
> *   在 %TOMCAT_HOME%/lib 中添加外部 JAR 您还需要配置 %TOMCAT_HOME%/conf/catalina/localhost/cesweb.xml 上下文 docBase 和 workDir 属性以分别指向您的项目和项目/工作目录。

我正在学习如何使用 IDEA，但我无法终生复制这个过程。

是否有人对如何在 IDEA 中设置此类现有项目有一个粗略的大纲/点？

# c - 如何处理 MacOS/X 10.8.x 中已弃用的 Carbon 函数？

> ID：16049181
> 
> 赞同：5
> 
> 时间：2013-04-16T23:55:49.523
> 
> 标签：c, osx-mountain-lion, deprecated, macos-carbon

我有一个已经存在一段时间（10 年以上）的 C++ 代码库，它可以编译并运行良好，但我注意到当我在 OS/X 10.8.x（Mountain Lion）下编译它时，编译器会发出关于的弃用警告它调用的一些 Carbon 函数：

```
../system/SetupSystem.cpp:575:44: warning: 'UpTime' is deprecated: first
  deprecated in OS X 10.8 [-Wdeprecated-declarations]
../system/SetupSystem.cpp:575:22: warning: 'AbsoluteToNanoseconds' is
  deprecated: first deprecated in OS X 10.8 [-Wdeprecated-declarations]
../system/SystemInfo.cpp:249:25: warning: 'MPProcessors' is deprecated: first deprecated in OS X 10.7 [-Wdeprecated-declarations] 
```

我想将此代码库升级为 Apple 批准的新做事方式（从而避免在 Apple 最终删除这些功能时出现警告和未来的痛苦），但我无法弄清楚新标准是什么。我查看了 developer.apple.com 上的 OS/X 文档，但要么是我缺乏搜索技能，要么是他们的文档，因为我几乎没有发现这些功能，也没有发现它们的替代品。

我的具体问题：

1.  为什么不推荐使用这些功能？
2.  我应该调用哪些函数？
3.  是否有一些我不知道的秘密文档库可以为我回答这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T00:32:01.767

我找到了上面列出的功能的可用替代品：

1.  UpTime() 可以替换为对 mach_absolute_time() 的调用，详见[此处](https://stackoverflow.com/a/4753909/131930)。
2.  AbsoluteToNanoseconds() 可以用一点数学来代替，如上面的链接所示。
3.  MPProcessors 可以通过调用 host_info() 来替换，如下所示：

```
#include <mach/mach_host.h>

mach_msg_type_number_t infoCount = HOST_BASIC_INFO_COUNT;
host_info(gHostPort, HOST_BASIC_INFO, (host_info_t)&hostInfo, &infoCount);
int numProcessors = hostInfo.avail_cpus;

```

# php - 我应该如何制作特定国家/地区的年龄门？

> ID：16049198
> 
> 赞同：-1
> 
> 时间：2013-04-16T23:57:09.540
> 
> 标签：php, gate

我使用 PHP 为一家酒类公司创建了一个年龄验证启动页面，但没有考虑全球不同的合法饮酒年龄。让我的年龄门检查输入国家的饮酒年龄的最简单方法是什么？

此外，不是让用户输入他们的国家，有没有办法从 IP 地址中提取它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T00:00:58.167

为所有客户获取准确的位置数据将具有挑战性，并且可能成本高昂。GeoIP API 并不总是正确的，而且在免费或低成本搜索中，您通常会被限制为每小时一定数量的查询。此外，您还需要准确且可维护的饮酒年龄数据集，并且需要考虑对不同类型饮料具有不同饮酒年龄的国家/州。您还需要考虑完全禁止饮酒的国家。

我会说你过度设计了这个。

与其询问年龄，不如让他们勾选一个框，说明他们已超过当前所在位置的最低饮酒年龄？

例如：

> 选中此框，即表示您同意您已达到您所在国家或州规定的购买和饮用酒精饮料的最低年龄。

或者更一般地说，以涵盖酒精非法性的方式：

> 选中此框，即表示您同意您在当前所在州或居住国家/地区拥有合法购买酒精饮料的权利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T00:02:02.377

存在 GeoIP 设施，但请记住，免费版本非常不准确，甚至付费订阅也有错误。检查这个网站： http: [//www.maxmind.com/en/geolocation_landing](http://www.maxmind.com/en/geolocation_landing)

解析一个国家后，一个简单的 DB 表应该足以存储法定饮酒年龄。不过，我认为您将其复杂化了-年龄问题很容易被愚弄，所以为什么要尝试使其过于严格。不妨将其替换为“您是否允许在您的国家饮酒”问题，这同样容易被愚弄，并且具有相同的法律价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T00:01:18.623

[您可以尝试使用 GeoIP。](http://dev.maxmind.com/geoip/geolite)它们甚至提供了一个非常好的 IP 范围列表，您可以使用这些列表来检测访问者的位置。

可能，您需要指定每个国家/地区的法定饮酒年龄，可能在数组上，然后您将询问用户他的出生日期。他回答后，你用数组检查值（总是对应国家），然后你或允许他进入与否。

# batch-file - 使用 appcmd 列出网站时出现批处理文件错误

> ID：16049200
> 
> 赞同：0
> 
> 时间：2013-04-16T23:57:25.600
> 
> 标签：batch-file

在批处理文件中使用以下语句时出现某种错误：

```
FOR /F %f IN ('C:\Windows\System32\inetsrv\appcmd list site /text:name /bindings:') DO rmdir /s/q "D:\Websites\%f" 
```

在 cmd 窗口中手动运行时，相同的代码可以正常工作。

即使我在最后使用暂停，窗口也不会保持打开状态以查看错误。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:16:02.707

`%`每次提及元变量时，您都需要加倍`%f`。Single-`%`直接在提示符下工作，在批处理文件中加倍。

# javascript - 我可以为 Javascript 的 replace() 传递多个参数（模式）吗？如果没有，有什么好的选择吗？

> ID：16049201
> 
> 赞同：0
> 
> 时间：2013-04-16T23:57:34.183
> 
> 标签：javascript

我正在使用以下前 URL [https://support.dev.mysite.com/batch/](https://support.dev.mysite.com/batch/)并删除所有内容，但环境（例如开发）。下面的代码工作正常。

```
var env = endPoint.replace("https://support.", "\n");
var envClean = env.replace(".mysite.com/batch/", "\n"); 
```

我不喜欢重复自己。我想在字符串中查找这两种模式并一次将它们全部删除。MDN 在这里对 replace() 进行了很好的细分 - [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)但它没有提及有关多个参数的任何内容。

我试过这个：

```
var env = endPoint.replace("https://support." && ".mysite.com/batch/", "\n"); 
```

但它只是解析第二个 arg 而忽略第一个。

有没有人有更清洁的方法来做到这一点？我假设我可以通过 REGEX 搜索多种模式，那里有任何 REGEX 大师愿意提供帮助吗？

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T00:02:21.457

您可以为此使用正则表达式：

```
var environment  = 'https://support.dev.mysite.com/batch/'
    .replace(/^https:\/\/support\.|\.mysite\.com\/batch\/$/g, ''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T00:00:51.407

您可以链接您的方法：

```
var envClean = endPoint.replace("https://support.", "\n").replace(".mysite.com/batch/", "\n"); 
```

或者你可以使用正则表达式：

```
var envClean = endPoint.replace(/https:\/\/support\.|\.mysite\.com\/batch\//, "\n"); 
```

**还有另一种解决**方案`dev`：

```
var envClean = endPoint.match(/^https:\/\/support\.([^.]*)\.mysite\.com\/batch\/$/)[1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T00:11:10.893

对于这个特定的 URL 模式，为什么不让它变得非常简单并使用`.split()`：

```
var url = 'https://support.dev.mysite.com/batch/';

var name = url.split('.')[1]; 
```

如果我使用正则表达式，我可能会这样做：

```
var match = url.match( /support\.(.*)\.mysite.com/ );
var name = match && match[1]; 
```

请注意，您不必担心这种方式的整个 URL，只需进行匹配即可。

如果您*知道*URL 将匹配，则可以将其简化为：

```
var name = url.match( /support\.(.*)\.mysite.com/ )[1]; 
```

# xcode - 将 XCode 项目产品包含到另一个项目中

> ID：16049205
> 
> 赞同：0
> 
> 时间：2013-04-16T23:58:05.457
> 
> 标签：xcode, build, include, product

在 XCode 项目中，我创建了一个新的 ColorPicker (MyCustomPicker.colorPicker)。然后我有第二个项目，我想在其中使用该颜色选择器。

构建完成后，我可以手动将 colorPicker 复制到应用程序包中的适当位置，并在启动应用程序时使用它。

如何在第二个项目的构建时实现 colorPicker 自动传输到正确的文件夹？

我需要自动化这个过程，而且一旦我签署了应用程序，colorPicker 应该已经存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:28:55.280

解决了。我将整个 colorPicker XCode 项目拖到主项目中，然后编辑以下内容：

*   在构建阶段我标记了依赖项
*   我删除了“编译源”列表中的 colorPicker 文件
*   我添加了一个构建阶段“复制文件”，选择了“资源”，子路径“ColorPickers”并添加了 colorPicker 产品

# html - 多列的 css 属性命令仅适用于 Opera 和 IE，不适用于 firefox、chrome 或 safari

> ID：16049212
> 
> 赞同：0
> 
> 时间：2013-04-16T23:58:38.413
> 
> 标签：html, css

下面的 html 代码在 Opera 和 IE10 中显示为两列，但在 Chrome、Safari 和 firefox 中只有一列。有谁知道为什么？样式代码 [ body{column-count: 2} ] 似乎只适用于 Opera 和 IE10。

[

041613-1-html-列

正文{列数：2}

这是一个用英文写的html文档。这是一个用英文写的html文档。这是一个用英文写的html文档。这是一个用英文写的html文档。

这是一个用英文写的html文档。这是一个用英文写的html文档。这是一个用英文写的html文档。这是一个用英文写的html文档。

这是一个用英文写的html文档。这是一个用英文写的html文档。这是一个用英文写的html文档。这是一个用英文写的html文档。

这是一个用英文写的html文档。这是一个用英文写的html文档。这是一个用英文写的html文档。这是一个用英文写的html文档。

这是一个用英文写的html文档。这是一个用英文写的html文档。这是一个用英文写的html文档。这是一个用英文写的html文档。

]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T00:00:48.577

您需要供应商前缀。（例如，`-webkit-column-count: 2`和`-moz-column-count: 2`）见[http://caniuse.com/#feat=multicolumn](http://caniuse.com/#feat=multicolumn)

# c# - 如何将枚举转换为 ViewModel

> ID：16049213
> 
> 赞同：0
> 
> 时间：2013-04-16T23:58:46.007
> 
> 标签：c#, enums, asp.net-web-api

我正在使用 Web Api 来构建基于 Enum 的 ViewModel。此视图模型将发送 id 和名称。基本上我想用这个viewModel来使用dropdownList。

**这是我的代码：工作正常，但我不想在 Web Api 中使用 ListItem。**

```
// GET api/values
    public List<DropdownViewModel> Get()
    {
        List<DropdownViewModel> ddlList = new List<DropdownViewModel>();

        foreach (int r in Enum.GetValues(typeof(CountryEnum)))
        {
            ListItem item = new ListItem(Enum.GetName(typeof(CountryEnum), r), r.ToString());
            ddlList.Add(new DropdownViewModel
            {
                id = item.Value,
                name = item.Text                    
            });
        }

        return ddlList;
    } 
```

任何人都可以在不使用 ListItem 的情况下重构此代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:09:54.343

Linq *Select*方法应该可以工作。

**编辑：这只是表明，如果它没有经过测试，它就不起作用。这是经过测试的。它应该工作。**

```
public List<DropdownViewModel> Get()
{
    return Enum.GetValues(typeof (CountryEnum)).Cast<int>()
        .Select(id => new DropdownViewModel
        {
            id = id,
            name = Enum.GetName(typeof (CountryEnum), id)
        }).ToList();
} 
```

# magento - 如何在管理员中获取订单商店配置变量

> ID：16049215
> 
> 赞同：1
> 
> 时间：2013-04-16T23:58:55.227
> 
> 标签：magento, config, store, payment

我创建了一个模块，它通过 xml 返回 Magento 管理订单页面中的付款详细信息。它适用于单个商店配置数据。

但是，如果我对 Store Id 1 和 Store Id 2 [pe for backoffice key 1111-1111-1111-1111（store 1）和其他 2222-2222-2222-2222（store 2）有不同的支付凭证，我只能退回具有此功能的管理视图的默认值...

```
$subent_id = Mage::getStoreConfig('payment/multibancopayment/subentidade'); 
```

有人知道我如何根据订单商店 ID 获取商店特定数据吗？示例：在管理订单页面详细信息中，如果订单是在商店 1 下的，我需要 1111-1111-1111-1111，但如果是在商店 2 下的，我需要 2222-2222-2222-2222。现在我只是用上面的函数获取默认值。

![MB 支付](https://i.stack.imgur.com/mxdQg.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T00:06:13.743

你试过了吗

```
$subent_id = Mage::getStoreConfig('payment/multibancopayment/subentidade', $storeIdHere); 
```

见 /app/Mage.php

```
/**
 * Retrieve config value for store by path
 *
 * @param string $path
 * @param mixed $store
 * @return mixed
 */
public static function getStoreConfig($path, $store = null)
{
    return self::app()->getStore($store)->getConfig($path);
} 
```

[全班在这里](http://freegento.com/doc/d8/dcb/class_mage.html#39fabcc2c75f6dcf35459ad632775c85)

# excel - 复制粘贴不会触发 worksheet_change

> ID：16049217
> 
> 赞同：6
> 
> 时间：2013-04-16T23:58:58.660
> 
> 标签：excel, vba, macos

这是我需要做的：当我在工作表的单元格中写入内容时，我的`Worksheet_Change`代码应该检查单元格是否包含某些字符，然后替换这些字符。这部分代码工作正常。

但是，有一个稍微奇怪的行为。这是到目前为止的代码：

```
 Private Sub Worksheet_Change(ByVal Target As Range)
        Target.Value = Replace(Target.Value, "ÃŸ", "ß")

        MsgBox "This is the value: " & Target.Value
    End Sub 
```

发生的事情是，当我的剪贴板中有需要更改的字符时（使用`Ctrl`+ `C`）。当我双击单元格时，使用`Ctrl`+将字符粘贴到单元格中`V`，然后按 Enter，代码工作正常，字符已更改。（注意：不双击是看不到光标的。）

但是，如果我只是用箭头键转到单元格并粘贴到单元格中的任何其他内容上，则不会发生任何事情。我怀疑`Worksheet_Change`甚至没有触发，否则它至少会显示我的`MsgBox`.

（我不知道它是否与此相关，但我在 Mac 中使用 Excel 2010）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-21T16:56:15.760

您可以在触发表上使用 Worksheet_Calculate。

*   创建一个新工作表，其中仅包含指向您要观看的范围的链接（即 =Sheet1!A1:B3）
*   将名为 Worksheet_Calculate 的宏添加到触发表
*   现在，每当链接范围内的任何日期发生更改时，都会触发重新计算触发表，从而触发宏

当用户在相应的单元格中输入公式并且其中一个前任发生更改时，这也适用。

通过手动计算，触发表和宏的重新计算仅在用户按下 F9 时发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T00:56:33.637

处理 Worksheet_Change 事件时始终使用 EnableEvents 属性。更多详情 [链接](http://www.ozgrid.com/forum/showthread.php?t=37042)

```
 Private Sub Worksheet_Change(ByVal Target As Range)

 On Error GoTo err_rout

    Application.EnableEvents = False

    If Target.Count > 1 Then Exit Sub

    Target.Value = Replace(Target.Value, "ÃŸ", "ß")

    MsgBox "This is the value: " & Target.Value

err_rout:
    Application.EnableEvents = True
End Sub 
```

![在此处输入图像描述](https://i.stack.imgur.com/AyT4s.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-20T14:24:58.323

```
If Target.Column = 3 Then
    Dim startRow As Integer
    Dim endRow As Integer
    startRow = Target.Row
    endRow = Target.Row + Target.Count - 1

    For i = startRow To endRow
        ' blah blah blah 
```

也许它有帮助

# php - 编码风格 - 如何格式化长 if 条件以使其可读

> ID：16049220
> 
> 赞同：2
> 
> 时间：2013-04-16T23:59:33.567
> 
> 标签：php, coding-style

我有一个很长的 if 条件如下。有两个条件都必须不满足，才能评估语句。我确实将它作为一个带有很多 && 和 ！但它变得不可读。我尝试将它拆分为一个`if elsif else`，它更具可读性但读起来不太好，因为第一个`if elsif`块中没有代码。

整理此代码块的最佳做法是什么？

```
if ($instructionObject->instruction=='nesting_grammar' && $instructionObject->match=='>'){ //if instruction is a '>' child indicator
   //don't change the child depth
}else if ($instructionObject->instruction=='selector' && is_object($this->instructions[$key+1]) && $this->instructions[$key+1]->instruction == 'nesting_grammar' && $this->instructions[$key+1]->match == '>'){ //if instruction is a selector followed by a '>'
   //don't change the child depth
}else{
   $insertOffset += $childDepth;
   unset($childDepth);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T00:17:12.353

您可以使用“[提取方法](http://sourcemaking.com/refactoring/extract-method)”重构。将您的条件替换为新方法。

```
if ($this->isInstructionNestingGrammar($instructionObject)){ 
   //don't change the child depth
}else if ($this->isIntructionSelect($instructionObject)){ 
   //don't change the child depth
}else{
   $insertOffset += $childDepth;
   unset($childDepth);
} 
```

在新方法中，将每个比较放在单独的行中。

PS 不要害怕方法名称太长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T00:11:06.500

不是直接回答你的问题，而是像这样的：

```
if (my_check($instructionObject) || $instructionObject->instruction=='selector' && my_check($this->instructions[$key+1])) {
} else {
   $insertOffset += $childDepth;
   unset($childDepth);
}

function my_check($obj) {
    return is_object($obj) && $obj->instruction == 'nesting_grammar' && $obj->match == '>';
} 
```

——你基本上做了两次同样的事情，是时候考虑一​​个函数了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T00:05:56.543

只需否定条件并跳过`if`and`else if`部分，因为两个初始条件不做任何事情......

```
if (
     !($instructionObject->instruction=='nesting_grammar' && 
       $instructionObject->match=='>') 
    || !($instructionObject->instruction=='selector' 
        && is_object($this->instructions[$key+1]) 
        && $this->instructions[$key+1]->instruction == 'nesting_grammar' 
        && $this->instructions[$key+1]->match == '>')
 ) {
   $insertOffset += $childDepth;
   unset($childDepth);
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T00:12:08.337

将子表达式拉出到变量中。伪示例：

```
flibjit = FlibjitManager.FlibjitInstance(this);
isFrob = 
    (flibjit.Froblocity >= FlibjitManager.FrobThreshold) &&   
    (flibjit.Type == FlibjitTypes.Frobby);

if (isFrob) {
   // ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T00:06:27.573

就我个人而言，如果我要跨越多行检查，我将其布局类似于我布局 JavaScript 对象的方式；

```
if (
    great big long check line goes in here &&
    another really long ugly check line goes in here too
) {
   // Do this code
}
else if (
    check 3 &&
    check 4
) {
    //Do this code
} 
```

# java - 将不透明度从 0.0 0.1 .. 更改为 1.0 以创建动画效果

> ID：16049221
> 
> 赞同：1
> 
> 时间：2013-04-16T23:59:39.950
> 
> 标签：java, swing

我正在尝试将我的框架的不透明度从 0 更改为 10 (0.0,0.1,0.2..1.0)，以便创建动画效果。

我在构造函数的末尾尝试了这段代码，但它只产生了不透明度的最后一个值：

```
for(float k=0;k<=10;k++)
    {
        try {
            Thread.sleep(200);
        } catch (InterruptedException ex) {
        }
        setOpacity(k/10);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T00:02:22.733

Swing 是单线程的。调用阻止更新`Thread.sleep`。请改用[摇摆计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)。`EDT``UI`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T00:03:21.927

当需要初始化动画时，将一些布尔变量设置为 true，然后在渲染函数中检查该布尔变量是否为 true，如果是，则添加 .1，当达到 1 时将布尔变量设置为 false。

# ios - iOS 应用程序因未知原因崩溃

> ID：16049228
> 
> 赞同：7
> 
> 时间：2013-04-17T00:00:55.310
> 
> 标签：ios, xcode, crash, crash-reports

我正在使用最新版本的 XCode 并为 iOS 6.0 及更高版本构建。以下是我得到的崩溃日志。它似乎根本没有帮助。我唯一注意到的是，对于我的应用程序，它说“[per-process-limit]”。这意味着什么吗？还有什么可能导致这次崩溃？如果这很重要，我正在使用 ARC。谢谢

```
Incident Identifier: B3FF81F3-FE14-46B2-A4C6-0931917D87C0
CrashReporter Key:   e64be3b78430ea913edf711ceb553d83ad760b10
Hardware Model:      iPhone5,1
OS Version:          iPhone OS 6.1.3 (10B329)
Kernel Version:      Darwin Kernel Version 13.0.0: Wed Feb 13 21:40:10 PST 2013; root:xnu-2107.7.55.2.2~1/RELEASE_ARM_S5L8950X
Date:                2013-04-16 18:57:49 -0400
Time since snapshot: 952 ms

Free pages:        1490
Active pages:      15836
Inactive pages:    7532
Throttled pages:   68031
Purgeable pages:   48
Wired pages:       165666
Largest process:   Stevens Book Tra

Processes
 Name                    <UUID>                       rpages       recent_max       [reason]          (state)

       timed <13d1143a8d7433cdbec64d4279aee1fe>          445              445         [vm]         (daemon) (idle)
   Bejeweled <ac11f9265d6634cc8ccb70757a223325>        14984            14984         [vm]         (suspended)
    AppStore <ffde258b8ad532398989bdd281fac800>        17866            17866         [vm]         (suspended)
         lsd <fe3afa7c718c30e591f1324f09d08c4f>          631              631                      (daemon) (idle)
       gamed <7954b1514d88384ca3f1f506b29d0812>         1510             1510                      (daemon) (idle)
    installd <4da1ba8fb7cd3c6690edf3e2a3c24269>          447              447                      (daemon) (idle)
webbookmarksd <d241794687e23138a14c7a5ad4371181>          651              651                      (daemon) (idle)
itunesstored <be14ada6a4d836f0aac6cf104f600c64>         2325             2325                      (daemon) (idle)
networkd_privile <20292830d8d53949b82495c145d0a379>          131              131                      (daemon) (idle)
softwareupdatese <1e626439b28f3e778f6a90c15b355c5d>          559              559                      (daemon) (idle)
   accountsd <6255c4bbbe953cc990fbeb8bc8d3ba86>         1141             1141                      (daemon) (idle)
  MobileMail <aed39adc22ee334c90bca672f578f1c0>         8775             8775                      (continuous)
   MobileSMS <afeef1d46f00323395b58b14f8803a82>         1726             1726                      (background)
 MobilePhone <872761e082c831a8a9090c8660347d5a>         1736             1736                      (resume) (continuous)
        tccd <e6dbe43518593da19ff55a9f3f15b3de>          325              325                      (daemon)
         kbd <47657f4dd979300a840367905786eccc>          782              782                      (daemon)
My App <29f36b70932433febcb1123b2b6c534b>       151118           151118  [per-process-limit] (frontmost) (resume)
     Pandora <6596910eed9532aca40f1ee3d6558334>         8775             8775                      (audio) (background)
     syslogd <42cd10099569364f811f66ad6f6dea46>          177              177                      (daemon)
   locationd <2d8cb2921fb538d4bb4aed62af98b4d2>         1988             1988                      (daemon)
mediaserverd <221fa80d17503fc7aa86f1041bdcc0be>         2189             2189                      (daemon)
       wifid <71a35a9968a4358a8569e6de843ad1aa>          859              859                      (daemon)
  calaccessd <d4096f0836003ac8a5ef4cea07e382d1>          730              730                      (daemon)
 dataaccessd <7b294c10f04f36af8086f4ccb5606fae>         1778             1778                      (daemon)
  aosnotifyd <44b37f0df5c932e39b30230611981071>          737              737                      (daemon)
iaptransportd <30bda0eeebb73681939e4223845ff0de>          378              378                      (daemon)
 SpringBoard <b0713272db793942ac49d8d3c84c2c2e>        11389            11389                     
  backboardd <d9997ef1b2bc3015862615abf37ebb1b>         5874             5874                      (daemon)
 UserEventAgent <d19ebe160ed536c8b18c89f066b758a6>          943              943                      (daemon)
   securityd <eda98353705c34578e9b09867d3c96f6>          269              269                      (daemon)
    sandboxd <bbb7e05047a937159530525e2657928a>          277              277                      (daemon)
syncdefaultsd <9c9a6da6f6993bb2be6ba01b851dc3e9>          698              698                      (daemon)
 mediaremoted <0279c54f0b2d30f6866036eea881cce1>          412              412                      (daemon)
    recentsd <99746b2acfdc3654881ad4fc961e2c89>          925              925                      (daemon)
   absinthed <a0bbaeb03c47300a9d5a7f6ce6468aab>          175              175                      (daemon)
    SCHelper <1ba907829bfa3e479f071e61c531331f>          227              227                      (daemon)
filecoordination <44b0075fbc5b3af5b403fc3bcb6603b0>          350              350                      (daemon)
   distnoted <4b2b2984057b3df2a7e5c7d1d79a099b>          239              239                      (daemon)
        apsd <9ba45b14c44d340da1c3a41f28b46f65>          578              578                      (daemon)
    networkd <26c89c34e3e031fdb46bea7bed9df0ff>          324              324                      (daemon)
  aggregated <a2d209b4577a3697a10c288fd542e501>          126              126                      (daemon)
   fseventsd <b148ac55dd67325e822695755023a16e>          336              336                      (daemon)
    BTServer <e6eb89b2fe7b3b219a2d90e6735b166d>          424              424                      (daemon)
     imagent <e61401f9f6303ae189c517add142b837>          839              839                      (daemon)
fairplayd.N41 <7d6161c8bf4633f7b62b9dbbd78ff990>          388              388                      (daemon)
     configd <d2cd8bc6ed643fa69392c80fc416cd8b>          795              795                      (daemon)
   lockdownd <f960236277c33ac78488eeea78661347>          333              333                      (daemon)
      powerd <fde6e83ab5f63bfeb5313e4cd86b25cc>          276              276                      (daemon)
mDNSResponder <b9aedd3c47f43627af9b55c3d0844f16>          479              479                      (daemon)
  CommCenter <3fbedab9761b3733a3fc0cd58ab00055>         1702             1702                      (daemon)
     notifyd <bbd1f04dd7163c93bc9eb6e5a7b14ab7>          231              231                      (daemon)
 ReportCrash <3f296f612faa36d687fb3bb40a4648eb>          355              355                      (daemon)

**End** 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T00:13:40.460

嗯，MyApp 有 151118 个常驻内存页面，大约是 590 MB（iOS 下的一个页面是 4 KB）。所以内存太多了。尝试使用 Instruments 中的分配工具运行，看看你的内存在哪里。

**编辑，以实际回答问题：** 系统正在杀死您的应用程序，因为它使用了太多内存。要修复崩溃，您需要减少内存使用量（在这种情况下非常显着）。我怀疑您有一个导致内存使用量激增的错误，因为根据您发布的日志，您的应用程序不太可能真的需要与它显然使用的内存一样多的内存。

# javascript - 如果将其定义为var，如何调用函数调用？

> ID：16049231
> 
> 赞同：1
> 
> 时间：2013-04-17T00:01:04.873
> 
> 标签：javascript, jquery

我正在使用 JQuery 和 JSON 从服务器获取数据。我定义`getBooksDoneFunc` 为变量，因为我不仅需要能够调用此函数一次（何时`getBooks`完成）。不幸的是，我无法`getBooksDoneFunc`从`signInOK`as内部调用`window["getBooksDoneFunc"]();`。为什么？调用此函数的最佳方法是什么？

```
function getBooks(){     return $.getJSON( "bookstore.json" );             }

var getBooksDoneFunc = function(json) { 
         $.each(json.books, function(i, json){ .......... });

}

getBooks().done(getBooksDoneFunc);

function signInOK(){
         window["getBooksDoneFunc"]();
} 
```

PS。的想法`window["getBooksDoneFunc"]();`取自[SO answer](https://stackoverflow.com/questions/1723287/calling-a-javascript-function-named-in-a-variable)

更新：

```
var booksJSON = {};
window["getBooksDoneFunc"](booksJSON); 
```

`getBooksDoneFunc`必须使用参数调用，但调用`getBooksDoneFunc`失败。`signInOK`在外部定义`$(document).ready(function(){ });`但在内部调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T00:09:35.900

尝试：

```
function getBooks(){
  return $.getJSON( "bookstore.json" );
}

window.getBooksDoneFunc = function(json) { 
  $.each(json.books, function(i, json){ .......... });
}

getBooks().done(getBooksDoneFunc);

$(document)ready(function() {
  function signInOK(){
    var booksJSON = {};
    window.getBooksDoneFunc(booksJSON);
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T00:13:34.107

如果`window["getBooksDoneFunc"]();`有效，则有效`getBooksDoneFunc()`，使用的想法`window`是当您想要访问全局函数但您不知道存储在变量中的函数名称时。

在您的情况下，放置一个硬编码字符串意味着更少，只是做`getBooksDoneFunc()`是相同的，因为您已经将函数自身（而不是函数名称的字符串）存储在变量中。

不起作用的是，如果变量不是全局变量，请检查范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T00:31:00.860

尽管我并不真正了解 signInOK() 函数，但我会以不同的方式执行此操作。它将如何接收“json”数据。我将重构 getBooks 函数并重新考虑 signInOk 函数。这是一个开始：

```
function getBooks() {
    $.getJSON("bookstore.json").done(function (json) {
        getBooksDoneFunc(json);
    });
}

var getBooksDoneFunc = function(json) { 
     $.each(json.books, function(i, json){ .......... });

};

...

getBooks();

function signInOK(){
     getBooksDoneFunc("some json data");
} 
```

# javascript - 如何让两个控制器在 Angular 中执行相同的操作，但改变站点的视觉方面？

> ID：16049234
> 
> 赞同：4
> 
> 时间：2013-04-17T00:01:16.887
> 
> 标签：javascript, html, angularjs, single-page-application

我想在 Angular 中复制 Google 的主页功能，这让我很伤心。我浏览了 Egghead 的视频并阅读了整个 API，但没有具体的例子说明这种确切的行为。我想做的是以下几点：

*   用户来到主页，出现主搜索栏和通用黑色标题栏
*   用户搜索某些东西，只有当他按下“搜索”时，主搜索栏才会消失，url 变为 mysite.com/q/searchTerm 并且一个新的子标题出现在黑色标题栏下方，就像谷歌的主页一样，删除主搜索字段并放置在主标题栏下方的灰色栏中（如果您关闭了即时搜索）
*   搜索结果出现在现在消失的主搜索栏的位置，就像谷歌一样，但这部分我可以处理路线和视图。两个相同控制器之间的布局切换让我很困扰。

到目前为止，我尝试过的是：

*   为两个 MainCtrl 子控制器创建一个父控制器，并设置其 scope.data = {searchHeaderDisplay: false}
*   让两个子控制器共享相同的名称 (MainCtrl)，因为它们共享完全相同的功能
*   在标题栏中制作一个 ng-show="data.searchHeaderDisplay" 和主要的 ng-hide="data.searchHeaderDisplay" 然后尝试在搜索按钮的 ng-click 上切换 data.searchHeaderDisplay。这不起作用 - 没有产生任何效果。

我还在接受 AngularJS，所以我确信它很简单，我只需要一个或两个实际示例来学习。

编辑：将辅助标题（具有较小的搜索字段）与搜索结果一起推入单独的视图模板会更好吗，并且只将根视图作为主要搜索字段？该文档对有关视图和路由的最佳实践非常松懈，尤其是将有多个控制器执行某些操作的路由。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:29:57.593

而不是 AppCtrl （本质上类似于 $rootScope），而 using （这是一个脆弱的解决方案，因为更改 HTML 结构可能会导致其中断 - 例如，如果添加中间 ng- `$parent`，您可能会发现需要使用`$parent.$parent...`控制器），我建议存储与您的标头相关的模型数据的服务。让我们称之为`searchService`。

需要影响此模型的控制器可以注入服务。这具有额外的优势，即依赖关系清晰（与控制器 $scope 继承相比，依赖关系不清晰）。例如，当用户按下“搜索”时，控制器可以调用服务上定义的通知方法： `searchService.newSearchTerm(searchTerm)`。现在，所有正在观察模型变化的视图（如标题视图）都会注意到变化并可以相应地更新。

您可以考虑将 ng-view 用于页面的主要内容区域。

另请参阅[https://stackoverflow.com/a/14619122/215945](https://stackoverflow.com/a/14619122/215945)，其中讨论了非常相似的布局。在那个 SO 帖子中，标题中有一个带有项目计数的购物篮。项目计数需要由多个控制器更新，因此我们将其放入服务中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T00:21:00.920

如果我理解正确，您设置`scope.data = {searchHeaderDisplay: false}`了两个`MainCtrl`控制器的父控制器，目的是使`MainCtrl`控制器能够共享相同的模型数据。没关系。

在没有看到您的代码的情况下，我的猜测是问题在于您如何打开`data.searchHeaderDisplay`ng-click。当您应该将值分配给它们的父范围级别时，您可能已经`data.searchHeaderDisplay`在子范围级别（即与控制器对应的范围）进行了设置。`MainCtrl`如果您需要我详细说明，请告诉我。

**更新：**

查看提供的代码后，问题确实如我之前所怀疑的那样（上图）。

`mainProductSearch()`是需要改变的。代替`scope.data.searchHeaderVisible = true;`，您需要`scope.$parent.data.searchHeaderVisible = true`前面简要解释的原因。如果您仍然不清楚背后的基本原理，那么您可能需要熟悉**AngularJS 范围（和/或一般的 Javascript 对象）的原型继承链**。范围原型继承是 AngularJS 的重要组成部分。[这是一篇关于该主题的精彩文章](https://github.com/angular/angular.js/wiki/The-Nuances-of-Scope-Prototypal-Inheritance)。

# prolog - swi prolog 中的咨询文件

> ID：16049236
> 
> 赞同：1
> 
> 时间：2013-04-17T00:01:33.093
> 
> 标签：prolog

我是 Prolog 的新手，使用咨询谓词时遇到问题。我已经更改了我的 SWI Prolog 开始所在的文件夹（类似于我对 ML 所做的）并将我的文件保存在该文件夹中。但是，当我`consult(filename)`在这个例子中使用 which 时`consult(chapter9)`- 我得到一个文件不存在错误。

我已经用谷歌搜索，看看是否有一个特定的地方可以保存它，但没有找到答案。然后我尝试指定 a`pathname`如下`consult(C:\chapter9)`：但是，这也不起作用。我很迷茫。

# actionscript-3 - AS3 如何通过计时器在舞台上添加班级？

> ID：16049237
> 
> 赞同：0
> 
> 时间：2013-04-17T00:01:34.707
> 
> 标签：actionscript-3, timer, addchild

你们的很多帮助:)。我的下一个问题在这里:)。

我在 MyTimer.as 和 Thief1_mc.as 影片剪辑类中有计时器。如何从 MyTimer 在舞台上添加Child(Thief1_mc)？一切看起来都很简单，唯一的问题是“舞台”属性。MyTimer 类不能发送“舞台”作为参数，因为它本身不在舞台上。我尝试在主类的舞台上添加 MyTimer，如 addChild (MyTimer)，跟踪显示 MyTimer 在舞台上，但我仍然无法将舞台参数传递给 Thief1_mc。我需要发送这个参数，因为类 Thief1_mc 必须使用属性“stage”将自己添加到舞台上。

编码：

```
public class Thief1_mc extends MovieClip
{

    //this variable type Stage will contain stage
    private var stageHolder:Stage;

    public function Thief1_mc()
    {
        //constructor
    }

    //function that creates this object with passed "stage" argument from the caller
    public function createItself(st):void
    {
        //variable that contain the stage so I can use this argument anywhere in the class 
        stageHolder = st;
        //i have to refer to the stage by passed "st" parameter to create this object
        stageHolder.addChild(this);
        //initial position
        this.x = 380;
        this.y = 230;
    }

} 
```

}

MyTimer 类和带有舞台参数的“_thief1.createItself(stage)”调用者

```
public class MyTimer extends Sprite
{
    private static var nCount:Number = 120;
    private static var currentCount:Number;
    private static var _timer:Timer = new Timer(1000,nCount);

    private static var _timerDispather:Timer;
    private static var _thief1:Thief1_mc = new Thief1_mc ;

    public function MyTimer()
    {
        // constructor code
    }

    //another timer
    private static function increaseInterval(interval:int):void
    {
        _timerDispather = new Timer(interval);
        _timerDispather.addEventListener(TimerEvent.TIMER, onUpdateTimeAnotherTimer);
        _timerDispather.start();
    }
    //another timer;
    private static function onUpdateTimeAnotherTimer(e:Event):void
    {

        _thief1.createItself(stage);//the most important part
    }

    public static function activateTimer():void
    {
        currentCount = nCount;
        _timer.addEventListener(TimerEvent.TIMER, onUpdateTime);
        _timer.start();
    }

    public static function deactivateTimer():void
    {
        _timer.removeEventListener(TimerEvent.TIMER, onUpdateTime);
        _timer.stop();
        _timer.reset();
        currentCount = nCount;

        //another timer
        _timerDispather.removeEventListener(TimerEvent.TIMER, onUpdateTimeAnotherTimer);
        _timerDispather.stop();
        _timerDispather.reset();
    }

    private static function onUpdateTime(e:Event):void
    {
        currentCount--;

        if (currentCount == 0)
        {
            _timer.removeEventListener(TimerEvent.TIMER, onUpdateTime);
            _timer.stop();
            _timer.reset();

        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:58:30.827

您的代码在一些地方是倒退的。它的流程不是很好，您现在遇到的问题将在您项目的某个阶段增加十倍。

首先，你的`MyTimer`类不应该扩展 Sprite。它不会被渲染，也不会以图形方式表示任何东西。

其次，你的计时器课比它应该承担的更多。我将对其进行修改以仅管理您的计时器和计时器事件。在您的计时器类中创建一个列表，该列表将包含一些其他元素，这些元素可以具有方法触发器来执行其他操作，例如创建和添加`Thief1_mc`。

其简化版本可能如下所示：

```
public class Updater
{

    private var _timer:Timer;
    private var _toUpdate:Vector.<IUpdatable> = new Vector.<IUpdatable>();

    public function Updater()
    {
        _timer = new Timer(60);
        _timer.start();
        _timer.addEventListener(TimerEvent.TIMER, _notifyUpdatables);
    }

    private function _notifyUpdatables(e:TimerEvent):void
    {
        for each(var i:IUpdatable in _toUpdate)
        {
            i.update(this);
        }
    }

    public function addUpdatable(updatable:IUpdatable):void
    {
        _toUpdate.push(updatable);
    }

    public function removeUpdatable(updatable:IUpdatable):void
    {
        var index:int = _toUpdate.indexOf(updatable);
        if(index >= 0) _toUpdate.splice(index, 1);
    }

} 
```

从这里我们需要创建一个接口，我们将在我们希望能够`update()`在每次`Updater`计时器滴答时调用的类上实现该接口：

```
public interface IUpdatable
{
    function update(updater:Updater):void;
} 
```

现在，在您的情况下，我要做的是拥有一个扩展 Sprite 并管理应用程序/游戏图形的类。它将`IUpdatable`像我描述的那样实现接口，并且还可以处理添加您的`Thief1_mc`：

```
public class View extends Sprite implements IUpdatable
{

    public function update(updater:Updater):void
    {
        // Create a Thief.
        var thief:Thief = new Thief();

        updater.addUpdatable(thief);
        addChild(thief);
    }

} 
```

您`Thief`可以利用`IUpdatable`我们拥有的接口，并在创建更新队列时将其添加到更新队列中，就像我在上面所做的那样。举一个完整的例子，这是 Thief 类：

```
public class Thief extends Sprite implements IUpdatable
{

    public function update(updater:Updater):void
    {
        // Make this Thief so some stuff.
        //
    }

} 
```

以下是如何在文档类中将它们联系在一起的方法：

```
public class App extends Sprite
{

    private var _updater:Updater;
    private var _view:View;

    public function App()
    {
        _updater = new Updater();
        _view = new View();

        _updater.addUpdatable(_view);

        stage.addChild(_view);
    }

} 
```

起初这可能有点让人不知所措，而且看起来工作量很大，但你现在有了一个干净的基础，可以轻松添加更多元素。

我们没有像最初那样让您的一个班级尝试管理计时器并添加盗贼，而是将职责分开并稍微收紧了流程。这些`Updater`处理纯粹是存储实例并在每次运行时`IUpdatable`调用它们的方法。该类管理图形，并且每次通过. 最初被添加到舞台上，所以您需要做的就是将小偷添加到自身中以让他们出现。`update()``Timer``View``Thief``Updater``View`

如果您采用此方法并重新构建计时器在其中的工作方式`Updater`，我认为您将在您想要的地方，但具有更好的理解和结构。

# php - 在活动行数组中执行查询

> ID：16049239
> 
> 赞同：-1
> 
> 时间：2013-04-17T00:01:52.583
> 
> 标签：php, mysqli

基本上，我使用的是我在网上找到的 mySQLi 包装器，在尝试使用它时遇到了一个我无法解决的问题，基本上，我正在执行此操作。

```
<?php 
    $res = $DB->Query("SELECT * FROM `table`");
    while($row = $DB->Fetch()) {
?>
<tr>
    <td><?php echo $row['id']; ?></td>
    <td><?php echo $functions->checkStatus($row['arowhere']); ?></td>
</tr>
<?php 
      }
?> 
```

因此，当我尝试执行此操作时，它会在我的表行的`$functions->checkStatus($row['arowhere']);` **此函数内执行一个新查询****，**它正在更改用于`while($row = $DB->Fetch()) {`

```
public function Query($SQL) {
        $this->SQL = $this->mysqli->real_escape_string($SQL);
        $this->Result = $this->mysqli->query($SQL);

        if ($this->Result == true) {
            return true;
        } else {
             die('Problem with Query: ' . $this->SQL);
        }
}

public function Fetch() {
    return mysqli_fetch_assoc($this->Result);
} 
```

有没有解决方案，或者有人指出我正确的方向，所以我可以避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:58:52.090

我不敢相信这样的包装可以在网上找到。事实上，它**完全，最终无法使用。**

做`mysqli->real_escape_string($SQL);`是完全没有意义的。它不会保护您的查询免受注入，但它会破坏任何复杂的查询。只要您尝试使用 WHERE 条件运行查询，它就会因错误而死。

而且下面这行也是错误的

```
die('Problem with Query: ' . $this->SQL); 
```

因为它既没有显示错误，也没有显示文件和行号。

*至少*这个包装器的问题是你面临的一个问题——它使用内部*变量*来保存结果，而它应该只**返回**它。

[一个真正的 mysqli 包装器是 SafeMysql](https://github.com/colshrapnel/safemysql#safemysql)，它允许您通过占位符添加任何动态数据。

使用 SafeMysql，您的代码可以工作：

```
<?php 
    $res = $DB->query("SELECT * FROM `table`");
    while($row = $db->fetch($res)) {
?>
<tr>
    <td><?php echo $row['id']; ?></td>
    <td><?php echo $functions->checkStatus($row['arowhere']); ?></td>
</tr>
<?php 
      }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T02:55:20.970

您可以遍历行并将它们添加到临时数组中。然后，您可以在进行其他查询后通过此数组引用这些行。如果查询返回的行太多，这可能会影响内存，所以要小心。

```
<?php 
$res = $DB->Query("SELECT * FROM `table`");

$rows = array();
while($row = $DB->Fetch()) {
    array_push( $rows, $row );
}

foreach( $rows as $row ){
?>
    <tr>
        <td><?php echo $row['id']; ?></td>
        <td><?php echo $functions->checkStatus($row['arowhere']); ?></td>
    </tr>
<?php 
}
unset( $rows ); // destroys the temporary array, freeing the memory it consumed
?> 
```

# mysql - 如何比较 2 个不同表中的行：mySQL - 有什么不同

> ID：16049241
> 
> 赞同：1
> 
> 时间：2013-04-17T00:02:03.533
> 
> 标签：mysql, sql, join

```
SELECT pid,cid,product_id,thickness FROM products WHERE thickness <> "";
SELECT cid,level,thickness FROM catalog WHERE thickness <> ""; 
```

所有 pid 都映射到 cid。我只对 2 级映射感兴趣。

目标，我想知道哪些产品在两个目录产品中的厚度值不同。请注意，产品通过 cid 附加到一个类别，所有产品都附加到 2 级类别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:05:30.063

```
SELECT  a.pid, a.product_ID
FROM    products a
        INNER JOIN catalog b
            ON  a.cid = b.cid AND
                b.level = 2
WHERE   a.thickness <> b.thickess 
```

# python - Urllib 密码和用户名输入

> ID：16049243
> 
> 赞同：1
> 
> 时间：2013-04-17T00:02:07.627
> 
> 标签：python, http, urllib2, urllib

我正在制作一个程序来获取我的成绩并将它们作为我的背景，但是我从中获取我的成绩信息的网站是受密码保护的有没有办法使用 urllib 进入我的帐户并打印源代码

这是 HTML

```
<label>Username</label>
          <input type="text" id="fieldAccount" name="account" value="" size="39"  />
<label>Password</label>
          <input type="password" name="pw" value="" size="39"  /> 
```

这是我试图使用的代码

```
import urllib2
import urllib

url = 'https://ps.rsd.edu/public/home.html'
values = {'account':'my_username', 'pw':'my_password'}
data = urllib.urlencode(values)
opener = urllib2.build_opener( urllib2.HTTPCookieProcessor() )
req = urllib2.Request(url,data)
res = urllib2.urlopen(req).read()
print(res) 
```

我究竟做错了什么！？

# ruby - 如果我在 mongoid2 中有一个 pool_size 为 1 并且我正在运行带有 3 个 worker_processes 的独角兽，会发生什么？

> ID：16049244
> 
> 赞同：1
> 
> 时间：2013-04-17T00:02:12.953
> 
> 标签：ruby, mongodb, mongoid

我遇到了连接超时。在我的 pool_size 1 场景中，这是否意味着池中最多的连接是 1（即 pool_size = max_pool_size）？

另外，当我运行 3 个独角兽进程时会发生什么？他们是否都使用相同的连接并且事情实际上比预期的要慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:57:37.653

> 我遇到了连接超时。在我的 pool_size 1 场景中，这是否意味着池中最多的连接是 1（即 pool_size = max_pool_size）？

在**Mongoid 2**中，池大小是永远打开的最大连接数，并且可能一直打开。

**Mongoid 3**不使用连接池（尽管它在切换到 Moped 驱动程序之前使用了）。

> 另外，当我运行 3 个独角兽进程时会发生什么？他们是否都使用相同的连接并且事情实际上比预期的要慢？

如果你在 Rails 中使用 Mongoid 3，当 Unicorn fork 一个 worker 时，Mongoid 会自动重新连接。如果您使用 Mongoid 2 或不使用 Rails，您应该在 Unicorn 的钩子中调用`Mongoid.default_session.disconnect`（在 Mongoid 3 中，不确定在 2.x 中究竟要调用什么） 。[`before_fork`](http://unicorn.bogomips.org/Unicorn/Configurator.html#method-i-before_fork)

# collections - ZF2 - 访问视图中的集合值

> ID：16049248
> 
> 赞同：0
> 
> 时间：2013-04-17T00:02:22.397
> 
> 标签：collections, zend-framework2

我想访问已在我的字段集中填充的值数组。

在控制器中，我在调用 .phtml 之前填充和排列并将其添加到我的模型中。我知道数据在那里（print_r/var_dump 显示它）但我不知道如何访问它。

var_dump 示例：

```
 ["object":protected]=>
    object(Instrument\Model\EFMultiEquip)#337 (5) {
      ["iadid"]=>
        string(7) "ABI3130"
      ["featureset"]=>
        NULL
      ["availfeatures"]=>
        array(1) {
          ["availfeatureset"]=>
            array(10) {
             [0]=>
               array(4) {
                 ["ibacode"]=>
                 string(3) "C3I"
                 ["ibadesc"]=>
                 string(16) "Jouan centrifuge"
                 ["ibacost"]=>
                 string(4) "5.00"
                 ["ibafeatime"]=>
                 string(1) "0"
               } 
```

我需要访问“availfeatureset”数组。我已经尝试过各种获取，但这些数据让我无法理解。如果你们中的任何人对如何访问数据有任何想法，我将不胜感激。

沃恩

# asp.net - ASP.NET 饼图未显示

> ID：16049251
> 
> 赞同：-2
> 
> 时间：2013-04-17T00:02:51.990
> 
> 标签：asp.net, vb.net, datatable, pie-chart

我有一个从数据表中获取值的饼图。

这是我的代码：

**ASP.NET 代码：**

```
<asp:Chart ID="Chart1" runat="server" EnableViewState="True">
                            <Series>
                                <asp:Series ChartType="Pie" Legend="% Completed" Name="Series1" XAxisType="Secondary" XValueType="Double" YValueType="Double">
                                </asp:Series>
                            </Series>
                            <ChartAreas>
                                <asp:ChartArea BorderWidth="5" Name="ChartArea1">
                                    <Area3DStyle Enable3D="True" WallWidth="15" />
                                </asp:ChartArea>
                            </ChartAreas>
                            <Legends>
                                <asp:Legend Name="% Completed" Title="% Completed">
                                </asp:Legend>
                            </Legends>
                            <Titles>
                                <asp:Title Name="Completed" Text="Completed">
                                </asp:Title>
                                <asp:Title Name="Title1">
                                </asp:Title>
                            </Titles>
                        </asp:Chart> 
```

**VB.NET 代码：**

设置会话变量 `GetTable()`

```
 Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load, Chart1.Load

        Dim ProjectID As Integer = Session("project_id")
        Session("ProjectID") = ProjectID

        lblProjNameHeading.Text = "[ " + ProjectID.ToString + " ]"

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim projComm As String = "SELECT project_id, project_start, project_finish, project_budget, project_cost FROM projects WHERE project_id=@parameter"

        Dim projSQL As New SqlCommand

        conn.Open()

        projSQL = New SqlCommand(projComm, conn)
        projSQL.Parameters.AddWithValue("@parameter", ProjectID.ToString)

        Dim datareader As SqlDataReader = projSQL.ExecuteReader()

        While datareader.Read

            lblProjectCode.Text = datareader("project_id").ToString
            lblProjectStart.Text = datareader("project_start").ToString
            lblProjectStart2.Text = datareader("project_start").ToString
            lblProjectEnd.Text = datareader("project_finish").ToString
            lblProjectEnd2.Text = datareader("project_finish").ToString
            lblProjectBudget.Text = datareader("project_budget").ToString
            lblProjectBudget2.Text = datareader("project_budget").ToString
            lblProjectCost.Text = datareader("project_cost").ToString
            lblProjectCost2.Text = datareader("project_cost").ToString
            ' lblProjectLeader.Text = datareader("project_cost").ToString
            'lblProjectExpenditures.Text = agdgssag

            Dim StartDate As DateTime = datareader("project_start")

            Dim FinishDate As DateTime = datareader("project_finish")

            Dim today As DateTime = DateTime.Now

            Dim sumDays = (FinishDate - StartDate).TotalDays
            Dim daysToNow = (today - StartDate).TotalDays

            Dim percentage = daysToNow / sumDays * 100

            Dim percentageLeft = 100 - percentage

            Session("PercentageCompleted") = percentage
            Session("PercentageLeft") = percentageLeft

            GetTable()

            lblProjectPercentage.Text = percentage.ToString("N2") + "%"

        End While

        datareader.Close()
        conn.Close()

        If Not Page.IsPostBack Then
            BindData()
        End If

    End Sub 
```

问题是当我运行代码时，饼图没有显示。

有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:32:46.297

我认为问题在于您没有为图表设置 XvalueMember 和 YvalueMember。

```
<Series>
<asp:Series ChartType="Pie" Legend="% Completed" Name="Series1" XAxisType="Secondary" XValueType="Double" YValueType="Double" XValueMember="yourXValue" YValueMember="YourYvalue">
</asp:Series>
</Series> 
```

看看下面的例子。

[http://itzonesl.blogspot.com/search/label/Charts](http://itzonesl.blogspot.com/search/label/Charts)

# ruby - 限制块循环？

> ID：16049255
> 
> 赞同：0
> 
> 时间：2013-04-17T00:04:02.077
> 
> 标签：ruby, loops, block

我有以下代码...

```
parser = AppleEpf::Parser.new('tmp/incremental/itunes20130410/application')
parser.process_rows { |app|
  Resque.enqueue(AddApp, app)
} 
```

现在，该文件 ( `tmp/incremental/itunes...`) 中有超过 90,000 行。出于测试目的，最好限制`process_rows`块调用限制为几行（例如...100）。

有没有办法限制块中的循环？

作为参考，这是`process_rows`gem 中的方法：

```
def process_rows(&block)
  File.foreach( @filename, RECORD_SEPARATOR ) do |line|
    unless line[0].chr == COMMENT_CHAR
      line = line.chomp( RECORD_SEPARATOR )
      block.call( line.split( FIELD_SEPARATOR, -1) ) if block_given?
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:20:28.470

您可能正在寻找`break`命令。

在任何 Ruby 循环中，您都可以使用此指令停止执行并返回（或不返回）某些内容，因此您可以像这样使用它：

```
loop do
  do_something_great
  break if some_condition
end 
```

控制你的执行。

一个始终受欢迎的 ruby​​-doc 链接：[http ://ruby-doc.org/docs/keywords/1.9/Object.html#method-i-break](http://ruby-doc.org/docs/keywords/1.9/Object.html#method-i-break)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T00:24:32.133

我认为您正在寻找`break`关键字。

# google-app-engine - user_required 装饰器默认对用户、公司和分支进行身份验证

> ID：16049258
> 
> 赞同：0
> 
> 时间：2013-04-17T00:04:41.563
> 
> 标签：google-app-engine, authentication, handler, middleware, webapp2

每个公司的每个分支机构都有自己的仪表板。用户访问其分支的仪表板（但`/dashboard/<company>/<branch>/login`如果他们未登录，则会被重定向到）。

这意味着我将有很多处理程序，其中包含`<company>/<branch>`例如：

```
_auth_routes = [
    RedirectRoute('/dashboard/<company>/<branch>/signup', SignupHandler, name="user-signup", strict_slash=True),
    RedirectRoute('/dashboard/<company>/<branch>/<type:v|p>/<user_id:\d+>-<signup_token:.+>',
                  handler=VerificationHandler, name='verification', strict_slash=True),
    RedirectRoute('/dashboard/<company>/<branch>/password', SetPasswordHandler),
    RedirectRoute('/dashboard/<company>/<branch>/login', LoginHandler, name='login'),
    RedirectRoute('/dashboard/<company>/<branch>/logout', LogoutHandler, name='logout'),
    RedirectRoute('/dashboard/<company>/<branch>/forgot', ForgotPasswordHandler, name='forgot'),
    RedirectRoute('/dashboard/<company>/<branch>/authenticated', AuthenticatedHandler, name='authenticated')
] 
```

然后每个处理程序都需要 get(company, branch, ..) 和 post(company, branch, ..)

此外，大多数方法都需要使用以下装饰器进行装饰。

```
def user_and_company_and_branch_required(handler):
    def check_company(self, company, branch, *args, **kwargs):
        auth = self.auth
        if not auth.get_user_by_session():
            self.redirect(self.uri_for('login', company=company,
                                               branch=branch), abort=True)
        elif company != self.user_info['company_name']:
            self.redirect(self.uri_for('login', company=company,
                                        branch=branch), abort=True)
        elif branch != self.user_info['branch_name']:
            self.redirect(self.uri_for('login', company=company,
                                        branch=branch), abort=True)
        else:
            return handler(self, company, *args, **kwargs)

    return check_company 
```

最后，每次我使用 self.uri_for 时，我都需要添加公司和分支机构。

我想抽象出公司和分支机构，这样我就不必到处打字了。

我正在考虑制作第二个 basehandler：

```
class BaseHandler2(BaseHandler):
    def get(self,company, branch):
        #sget meaning secure_get
        sget = user_and_company_and_branch_required(self.sget)
        sget(self)
    def post(self,company, branch):
        spost = user_and_company_and_branch_required(self.spost)
        spost(self) 
```

用法：

```
class LoginHandler(BaseHandler2):
     def get():
         self.render_template("login_form.html")

class SecureDashboardHanlder(BaseHandler2):
     def sget():
         self.render_template("this is the secure page
                               for your company & username &branch") 
```

**这会是解决此类问题的推荐架构吗？**

其他选项可能是以某种方式使用 app.yaml 正则表达式，或自定义路由器类？

请注意，用户在 user_attributes 下有一个 company_name 和 branch_name：

```
config = {
    'webapp2_extras.auth': {
        'user_model': 'dashboard_auth_models.User',
        'user_attributes': ['name', 'company_name']
    },
    'webapp2_extras.sessions': {
        'secret_key': 'f02fajgt9a309ga30gfbnxz252mn3b459082'
    }
} 
```

**或者也许在任何地方都使用装饰器会更好？并在每个处理程序的 get 和 post 方法的参数中包含公司、分支**

# r - rstudio 命令行 R 的不同库路径（`$R_LIBS_USER`）

> ID：16049259
> 
> 赞同：11
> 
> 时间：2013-04-17T00:04:44.227
> 
> 标签：r, rstudio

我试图弄清楚为什么我`.libPath`在命令行 R 和 RStudio **Desktop**之间有所不同（注意：这**不是**[这个问题](https://stackoverflow.com/questions/7129213/r-libpaths-difference-between-rstudio-and-command-line-r)的重复，因为修复涉及特定于 RStudio **Server的东西**我没有的

当我在命令行（linux）上使用 R 时：

```
> .libPaths()
[1] "/home/mathematicalcoffee/R/library"  "/usr/local/lib/R/site-library"
[3] "/usr/lib/R/site-library"             "/usr/lib/R/library" 
```

当我使用 RStudio **Desktop**（linux，同一台机器）时：

```
[1] "/usr/local/lib/R/site-library" "/usr/lib/R/site-library"       "/usr/lib/R/library"            "/usr/lib/rstudio/R/library" 
```

现在我已经设置`$R_LIBS_USER`为`~/R/library`，所以 R-command-line 将它作为我首选的 libPath。

当我这样做时，问题出在 RStudio Desktop 中：

```
Sys.getenv('R_LIBS_USER')
# "~/R/x86_64-pc-linux-gnu-library/2.15" 
```

那么为什么 RStudio Desktop 改变了我的`R_LIBS_USER`? 我怎样才能把它改回来？（我不使用 .Rprofile 文件）。（在我上面链接的问题中，RStudio Server 的解决方案是修改`/etc/rstudio/rsession.conf`，但我没有，因为我有 RStudio Desktop。另外，我相信 RStudio 应该尊重我的`R_LIBS_USER`环境变量。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T01:14:11.343

你写：

> 现在我在我的 bash 配置文件中将 $R_LIBS_USER 设置为 ~/R/library，

您是否偶然从 gui 图标调用 RStudio，即不调用您的`~/.bash_profile`? 也许您可以尝试调用包装器来设置它？

对于它的价值，`.libPaths()`在 RStudio 桌面和服务器下返回相同的东西（尽管服务器附加了它的内部目录），在命令行上和通过 ESS 为我返回相同的东西。

*编辑：*一般来说，请阅读`help(Startup)`哪些时间会花费时间。@flodel 的评论非常恰当。如果您在系统级别始终无法处理这个问题，您可以随时转向 R，无论是在其系统级别（通过`Renviron`和`Renviron.site`）还是通过`~/R/`目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-02T16:46:50.883

只是在这里记录以防有人发现它有用，根据[ArchWiki](https://wiki.archlinux.org/index.php/R#Rstudio_IDE) ，我们可以在 ~/.Renviron 中定义 R_LIBS_USER，我觉得这是为 R 定义特定变量的更方便的方法。

# android - Android 共享 Google Map V2 行程 (Facebook)

> ID：16049262
> 
> 赞同：1
> 
> 时间：2013-04-17T00:05:07.207
> 
> 标签：android, facebook, sharing, google-maps-android-api-2

我开发了一个Android应用程序，可以实时跟踪用户在地图上制作的课程（Google Map Android V2），我接下来要做的就是在课程结束后我想给用户例如，有机会在 Facebook 上分享此行程，我不知道这是否可能，如果可以，我需要您的帮助，因为经过我的研究，唯一的方法是通过地图的屏幕截图，但我已经看到应用程序做这种分享，结果不是一张图片，而是一张地图（如果是Facebook，请带上）行程。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:17:11.460

您需要通过 Open Graph 来完成，并为您的路线创建一个包含一组 GeoPoints 的对象。

对于 StackOverflow 的答案来说，确切的细节太密集了，但我鼓励你阅读这里的文档[https://developers.facebook.com/docs/opengraph/](https://developers.facebook.com/docs/opengraph/)，更具体地说，比如[https://developers.facebook.com /docs/opengraph/guides/fitness/](https://developers.facebook.com/docs/opengraph/guides/fitness/)更符合您的需求。

# database - 实现：字符串到字符串的数据库

> ID：16049265
> 
> 赞同：0
> 
> 时间：2013-04-17T00:05:27.037
> 
> 标签：database, algorithm, data-structures, nosql, storage

就像`std::unordered_map<std::string, std::string>`但所有数据都应该存储**在磁盘上**而不是内存中。

据我了解，应该做两部分：索引和存储。我已经学习了一些关于索引的数据结构，例如 Linear-Hash 或 B-Tree，并且编写磁盘上的 int->int 数据库并不太难。问题是存储。

对于整数，所有记录的大小相同。一旦我们通过索引获得要记录的位置，我们就可以轻松地提取、修改或延迟删除。但是对于字符串，记录的大小是灵活的。它应该（至少）有以下问题：

1.  put() 更长的字符串：我们不能简单地覆盖旧记录，我们敢于执行 del() 和 put() 并且旧记录的空间被浪费了。

2.  del()：旧记录的空间也被浪费了，不能再使用了。（也许我们可以用垃圾收集器收集已删除的空间，但它会花费额外的空间并产生碎片）

3.  对于 int->int 数据库，为几个整数浪费空间并不是什么大问题。但是一个字符串更长，它会浪费更多的空间。

我需要一些建议/提示来解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:34:28.713

您可以以文件系统如何管理可变大小的文件为例。

它们以大约几千字节的固定大小块分配文件空间，并将这些块链接在一起以形成任意长度的整个文件。

如果你需要增加你的文件，你分配和链接更多的块。如果您需要缩小或删除它，您可以取消链接并释放一个或多个块。

这里唯一明显的碎片是内部的，即每个文件最后一块中浪费的空间。

如果您使用文件来实现这一点，其中每个块要么是潜在大文件的一部分，要么是它自己的文件，您不需要立即删除/释放它。您可以在您的控制/元数据中将其标记为免费，然后再重复使用。您可以将压缩（删除所有空闲块）作为不经常执行的单独操作来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T00:21:31.783

首先实现一个映射器。每当您获得新字符串时，将它们按顺序存储在文件中，并将它们的位置存储在地图上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:51:21.833

对我来说，这听起来像是键/值存储的定义。你可以使用任何你喜欢的系统。从 Oracle 的 Berkeley DB 到 Cassandra 或 Riak。

# java - 当调试器中没有发生崩溃时，如何调试可运行的 jar？

> ID：16049267
> 
> 赞同：4
> 
> 时间：2013-04-16T16:06:53.030
> 
> 标签：java, slick2d

当我在eclipse中调试游戏时，游戏运行良好。但是，当我用它制作可运行的 jar 时，当敌人被击中时游戏会崩溃，除了那部分之外，游戏的其余部分都可以正常工作。我该怎么做，如何调试可运行的 jar？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T16:14:07.553

在敌人被击中的函数周围放置一个[try/catch 。](http://docs.oracle.com/javase/tutorial/essential/exceptions/try.html)在 catch 语句中，让它打印堆栈跟踪和有关捕获的异常的信息。

就像是：

```
try {
   enemyHit();
} catch (Exception e) {
    System.out.print("RuntimeException: ");
    System.out.println(e.getMessage());
    e.printStackTrace();
} 
```

从命令行运行 jar，以便 jar 崩溃时打印输出仍然存在。或者，将错误信息写入文件。

如果没有捕获任何内容，您可以将 try/catch 放在堆栈的更上方。如果您没有在其他任何地方捕获异常，则可以将此 try catch 一直放在围绕主循环的堆栈顶部。

如果您相当确定该错误已解决，我不建议您将 try/catch 保留在您的发布代码中。与 try/catch 相关的性能问题会降低您的游戏速度，如果您将它们放在经常访问的函数周围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:37:09.413

创建一个新项目并将可运行的 jar 添加到外部 jar 中，然后使用运行配置，您可以选择它的主要方法并从那里调试

您还可以将jar的源文件夹设置为另一个项目的源文件夹（请记住，热代码替换不再起作用）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T22:00:28.317

当我遇到与您类似的问题时，发现它是由于调试器花费了一些额外的时间（尤其是断点），然后是编译的程序。

当我尝试异步加载纹理时发生此问题，它可以在调试器中正常工作但在编译时崩溃，我会查看任何线程（如果有的话）或任何其他更长时间运行的项目

# sql-server - SQL Server：更新包含 URL 的记录以删除查询字符串

> ID：16049271
> 
> 赞同：-1
> 
> 时间：2013-04-17T00:05:36.237
> 
> 标签：sql-server, string, url, dns

我试图想出一种方法来更新包含网站访问的表，包括域和查询字符串。由于我无法更新将这些数据发送到我们的 Web 服务的应用程序（也无法更新它），我能想到的唯一选择是通过每天运行多次的代理作业来处理此更新。

我一直以编程方式处理这个过程，我目前的解决方法是简单地使用子字符串。但如果可能的话，最好的选择是简单地删除查询字符串，以便只`http://domain.com/`保留。

基本上我知道我需要计算完整字符串的字符，从左到第三个反斜杠（`http://something.com/`）计算字符，然后从右-左字符串中删除所有字符。

有没有人有一些我可以尝试的想法，到目前为止我所有的尝试都是令人尴尬的失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T00:30:59.000

IMO，而不是为此运行 SQL 作业，您可以在每次更新时触发的表上编写触发器；当然，如果该表上没有大量更新。在触发器中，您可以获得类似于以下示例的域部分：

```
declare @url varchar(max), @index int
set @url = 'http://myurl.com/?q1=dummy&q2=dummy2&q3=dummy3'

set @index = case 
                when patindex('%?%', @url) = 0 then LEN(@url) 
                else patindex('%?%', @url) 
             end
select LEFT(@url, @index - 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T00:32:10.467

为什么不只是创建一个视图，而不是不断更新数据呢？没有理由必须不断地运行一项作业来去除无关信息 - 然后对它的查询只会在作业运行后立即进行。

```
CREATE TABLE dbo.example(URL NVARCHAR(2048));
GO

INSERT dbo.example(URL) 
           SELECT 'http://somesite.com/foo.asp?id=1'
 UNION ALL SELECT 'http://someothersite.com/';
GO

CREATE VIEW dbo.view_example
AS
  SELECT URL, StrippedURL = LEFT(URL, pos+1) + 
    SUBSTRING(URL, pos+2, CHARINDEX('/', URL, pos+2)-pos-1)
  FROM 
  (
    SELECT URL, CHARINDEX('//', URL) AS pos
      FROM dbo.example
  ) AS x;
GO

SELECT URL, StrippedURL FROM dbo.view_example; 
```

结果：

```
URL                               StrippedURL
--------------------------------  -------------------------
http://somesite.com/foo.asp?id=1  http://somesite.com/
http://someothersite.com/         http://someothersite.com/ 
```

（请注意，当前的计算假设您的 URL 总是有第三个`/`。）

# c# - 读取相同的元素但不同的值

> ID：16049274
> 
> 赞同：0
> 
> 时间：2013-04-17T00:05:48.947
> 
> 标签：c#, xml

我是 C# 新手，我想知道是否可以这样做：

我有多个名称相同但值不同的元素，我想一一比较它们。

示例：（本地）file.txt 散列与（URL）file.text 散列。

我尝试了一些代码，但找不到/创建任何好的东西。这是我尝试过的：

```
XmlDocument doc = new XmlDocument(); 
doc.Load("sample.xml");
XmlElement root = doc.DocumentElement;
XmlNodeList nodes = root.SelectNodes("FileName");
foreach (XmlNode node in nodes)
{
  MessageBox.Show(node.ToString());
} 
```

大约有 13,000 条 XML 记录。

我有这个 XML：

```
<File FileName="file.txt" FileHash="1C395F6D2AA729A607E69DCA73F8205CEFD26AA4" FileSize="2337488" />
<File FileName="file2.txt" FileHash="B313285D73CA635EB76B8082737BDCF82481DCD0" FileSize="640000" />
<File FileName="file3.txt" FileHash="2D797F6840FB00D86B560290DD0A2A76E3FA90D8" FileSize="157" />
<File FileName="file4.txt" FileHash="D7AC7873B2A00B27451E485C65BF8562237A2562" FileSize="4702208" />
<File FileName="file5.txt" FileHash="8D89AC439D8FD44C9D9EF57D27A160BDB056D63D" FileSize="1052" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T00:26:55.203

我仍然不确定我是否理解您正在尝试执行的“比较”，但以下内容应该可以帮助您开始访问您感兴趣的 File 元素属性。

```
using System.Xml;
using System.IO;
using System.Text;
using System;

 public class Example
{
   public static void Main()
   {
        XmlDocument xmlDoc= new XmlDocument(); 

        try {
            xmlDoc.Load("files.xml"); 
        }catch(System.Xml.XmlException e){
            Console.WriteLine(e);   
        }

        XmlNodeList defs = xmlDoc.GetElementsByTagName("File");

        for (int i = 0; i < defs.Count; i++)
        {
            string fn = defs[i].Attributes["FileName"].Value;
            string fh = defs[i].Attributes["FileHash"].Value;
            Console.WriteLine("File:  " + fn + "\tHash:  " + fh);
        }  
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T00:27:23.200

您必须从节点中提取属性

```
MessageBox.Show(node.Attributes["FileName"].Value); 
```

# python - 从列表python中删除所有空行

> ID：16049275
> 
> 赞同：0
> 
> 时间：2013-04-17T00:05:52.610
> 
> 标签：python

我将以下结果设置为变量。我需要先删除所有空白行，然后才能将其制成字典。什么是我可以在变量上运行以删除该变量中可能包含的所有空行的简单命令。下面是我的变量的输出示例：

```
DeviceName = device1
ClientName = myclient
RegionName = west
PrimaryIP = 1.1.1.1
OsVersionName = Microsoft Windows 7 Enterprise
AccessMethod = None
AccessIP = None
Port = None

DeviceName = device2
ClientName = myclient
RegionName = None
PrimaryIP = 1.1.1.2
OsVersionName = Microsoft Windows 7 Enterprise
AccessMethod = None
AccessIP = None
Port = None 
```

开头也有空格。我尝试了几种不同的方法，但它们似乎只删除了第一个空行。我需要删除结果中可能出现的所有空白行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T00:06:47.130

我不确定，但这可能是你想要的：

```
>>> text = '''DeviceName = device1
ClientName = myclient
RegionName = west
PrimaryIP = 1.1.1.1
OsVersionName = Microsoft Windows 7 Enterprise
AccessMethod = None
AccessIP = None
Port = None

DeviceName = device2
ClientName = myclient
RegionName = None
PrimaryIP = 1.1.1.2
OsVersionName = Microsoft Windows 7 Enterprise
AccessMethod = None
AccessIP = None
Port = None'''
>>> text = '\n'.join(line for line in text.splitlines() if line) 
```

但是最好在创建字典时忽略空白行，使用生成器表达式：

```
>>> lines = (line for line in text.splitlines() if line) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T00:10:03.080

```
txt = """DeviceName = device1
ClientName = myclient
RegionName = west
PrimaryIP = 1.1.1.1
OsVersionName = Microsoft Windows 7 Enterprise
AccessMethod = None
AccessIP = None
Port = None

DeviceName = device2
ClientName = myclient
RegionName = None
PrimaryIP = 1.1.1.2
OsVersionName = Microsoft Windows 7 Enterprise
AccessMethod = None
AccessIP = None
Port = None"""

print('\n'.join([i for i in txt.split('\n') if i])) 
```

输出：

```
DeviceName = device1
ClientName = myclient
RegionName = west
PrimaryIP = 1.1.1.1
OsVersionName = Microsoft Windows 7 Enterprise
AccessMethod = None
AccessIP = None
Port = None
DeviceName = device2
ClientName = myclient
RegionName = None
PrimaryIP = 1.1.1.2
OsVersionName = Microsoft Windows 7 Enterprise
AccessMethod = None
AccessIP = None
Port = None 
```

# java - 填充 2d int 数组 int[][] 一定次数

> ID：16049277
> 
> 赞同：0
> 
> 时间：2013-04-17T00:05:55.397
> 
> 标签：java, arrays

我正在开发一款战舰游戏，在该游戏中，我根据特定尺寸放置某些船只。出于某种原因，我放置船只的方法不起作用。

用于参考具有 2 种方法的代码（我认为我会粘贴整个类，因为它只有 2 个我正在讨论的重要方法）

```
public class Board {

    public static final int ID_EMPTY = 0;
public static final int ID_BATTLESHIP = 1;
public static final int ID_AIRCRAFT_CARRIER = 2;
public static final int ID_DESTORYER_1 = 3;
public static final int ID_DESTORYER_2 = 4;
public static final int ID_PT_BOAT = 5;

private static final int ROW_COUNT = 10;
private static final int COLUMN_COUNT = 10;

private static final int SHIPS_PER_FLEET = 5;

private Ship[] fleet;
private int[][] gridCells;

private Random randomizer = new Random();

public Board() {

     this.fleet = new Ship[SHIPS_PER_FLEET];
     this.gridCells = new int[ROW_COUNT][COLUMN_COUNT];
     // Fill the grid cells with OPEN WATER -1s.
        int i = 0;
        while (i < ROW_COUNT) {
            int j = 0;
            while (j < COLUMN_COUNT) {
                this.gridCells[i][j] = Ship.openWater;
                j++;
            }

            i++;
        }

  }

/*
 * add a ship to the grid.
 */
    public  void placeShips(Ship newShip){
             int row = newShip.getRow();
                int column = newShip.getColumn();
                int orientation = newShip.getOrientation();
                int i = 0;

                // Add the ship to the fleet array.
                this.fleet[newShip.getshipType()] = newShip;

                if (orientation == Ship.orientationUp) {
                    while (i < newShip.getShipLenght()) {
                        this.gridCells[row - i][column] = newShip.getshipType();
                        i++;
                    }
                }
                else if (orientation == Ship.orientationRight) {
                    while (i < newShip.getShipLenght()) {
                        this.gridCells[row][column + i] = newShip.getshipType();
                        i++;
                    }
                }
                else if (orientation == Ship.orientationDown) {
                    while (i < newShip.getShipLenght()) {
                        this.gridCells[row + i][column] = newShip.getshipType();
                        i++;
                    }
                }
                else {
                    // Orientation must be LEFT. Only one left =]
                    while (i < newShip.getShipLenght()) {
                        this.gridCells[row][column - i] = newShip.getshipType();
                        i++;
                    }
                }

    }
public void placeShipsRandomly(){

        int [] shipType = {Ship.aircraftCarrier,
            Ship.battleship,
            Ship.Destoryer_1,
            Ship.Destoryer_2,
            Ship.PtBoat};

        int[] shipLength = {5, 4, 3, 3, 2};

             int i = 0;

                do {
                    int row;
                    int col;
                    int orientation;

                    // Randomly generate a row, column, and orientation.

                    row = randomizer.nextInt(ROW_COUNT);
                    col = randomizer.nextInt(COLUMN_COUNT);
                    orientation = randomizer.nextInt(4);

                    boolean bFitsOnBoard = false;

                    // Check to see if the ship fits on the board at the given row and column.

                    int testLength = shipLength[i] -1;

                    if (orientation == Ship.orientationUp) {
                        if (row >= testLength) {
                            bFitsOnBoard = true;
                        }
                    }
                    else if (orientation == Ship.orientationRight) {
                        if (COLUMN_COUNT - col > testLength) {
                            bFitsOnBoard = true;
                        }
                    }
                    else if (orientation == Ship.orientationDown) {
                        if (row - ROW_COUNT > testLength) {
                            bFitsOnBoard = true;
                        }
                    }
                    else if (orientation == Ship.orientationLeft) {
                        if (col >= testLength) {
                            bFitsOnBoard = true;
                        }

                    boolean bHitsOtherShips = false;

                    // Check to see if the ship hits any other ships on the board.

                    if (bFitsOnBoard == true) {
                        int j;
                        if (orientation == Ship.orientationUp) {
                            j = 0;
                            while (j < shipLength[i]) {
                                if (this.gridCells[row - j][col] != Ship.openWater) {
                                    bHitsOtherShips = true;
                                    break;
                                }

                                j++;
                            }
                        }
                        else if (orientation == Ship.orientationRight) {
                            j = 0;
                            while (j < shipLength[i]) {
                                if (this.gridCells[row][col + j] != Ship.openWater) {
                                    bHitsOtherShips = true;
                                    break;
                                }

                                j++;
                            }
                        }
                        else if (orientation == Ship.orientationDown) {
                            j = 0;
                            while (j < shipLength[i]) {
                                if (this.gridCells[row + j][col] != Ship.openWater) {
                                    bHitsOtherShips = true;
                                    break;
                                }

                                j++;
                            }
                        }
                        else if (orientation == Ship.orientationLeft) {
                            j = 0;
                            while (j < shipLength[i]) {
                                if (this.gridCells[row][col - j] != Ship.openWater) {
                                    bHitsOtherShips = true;
                                    break;
                                }

                                j++;
                            }
                        }
                    }
                    if ((bFitsOnBoard == true) && (bHitsOtherShips == false)) {
                             // Place this ship on the board.
                        Ship newShip = new Ship(shipType[i], orientation, row, col, shipLength[i]);

                        this.placeShips(newShip);

                        // Go on to the next ship.
                        i++;
                            }
                    }
            }
                while (i < SHIPS_PER_FLEET);
}
    /*
     * returns the grid cell
     */
    public int[][] getGridCell()
    {
   return this.gridCells;
    }

} 
```

它有2个问题。

主要问题是，在程序的某些运行中，它会产生一个越界错误，并试图将一艘船放在不存在的第 10 行，因为 int[10][10] 的数组当然最多只能达到 9因为它们从 0 等开始。

第二个问题是我试图根据它们的大小放置船只，但它似乎是放置所有船只并给他们所有大小为 3 的船只。

例如，假设这是数组输出。

```
[0] [0] [3] [3] [3] [0] [0] [0] [0] [0] 
[0] [0] [0] [0] [0] [0] [0] [0] [0] [0] 
[0] [0] [0] [0] [0] [4] [0] [0] [0] [0] 
[0] [0] [0] [0] [0] [4] [0] [0] [0] [0] 
[0] [0] [0] [0] [0] [4] [0] [0] [0] [0] 
[0] [0] [0] [0] [0] [0] [0] [0] [0] [0] 
[0] [0] [0] [0] [1] [1] [1] [0] [0] [0] 
[0] [0] [0] [0] [0] [0] [0] [0] [2] [0] 
[0] [0] [0] [0] [0] [0] [0] [0] [2] [0] 
[0] [0] [0] [0] [0] [0] [0] [0] [2] [0] 
```

这是错误的，因为我已经将船的长度设为 int[] shipLength = {5, 4, 3, 3, 2};

因此，根据它在 placeships 方法中经历的循环，它应该每次都放置不同大小的船，除了第 3 艘和第 4 艘船，它们都是驱逐舰并且具有相同的尺寸。

我的大脑冻结了，无法弄清楚发生了什么，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T00:35:12.577

你有两个简单的错误，我可以看到：

```
else if (orientation == Ship.orientationLeft) {
    if (col >= testLength) {
        bFitsOnBoard = true;
    }
// ED: Where's the '}'?

boolean bHitsOtherShips = false;

// Check to see if the ship hits any other ships on the board. 
```

这里没有括号来关闭 else if - 你的代码没有做你认为它正在做的事情。只有随机滚动方向 == Ship.orientationLeft 的船只才会真正进行碰撞测试，然后才有可能被放置。

其次，您的 Ship() 构造函数（不应该在评论中隐藏的外部链接中！），具有以下签名：

```
public Ship(int shipType, int shipLength, int row, int column, int orientation) { 
```

但是，当您宣布您的新船要放置时：

```
Ship newShip = new Ship(shipType[i], orientation, row, col, shipLength[i]); 
```

方向和shipLength 变量被交换了！由于仅实例化了方向类型为 Ship.orientationLeft 的船，并且由于 Ship.orientationLeft = 3，因此所有正在绘制的船的长度都是 3。

至于索引越界，这很容易。由于您将 shipLength 作为方向提交，因此代码前面的边界检查都没有任何意义，并且很容易发生超出范围的情况。

# lisp - Audacity - 如何设置 Nyquist Prompt 控制速率以匹配音频速率？

> ID：16049279
> 
> 赞同：0
> 
> 时间：2013-04-17T00:05:59.773
> 
> 标签：lisp, waveform, piecewise, audacity, nyquist

我希望使用 Audacity 中的 Nyquist Prompt 插件来构建长度为 2048 个样本的分段线性波形。例如，我可以通过从 2048 个无声（零）样本开始，选择所有样本，然后调用 Nyquist Prompt 来生成一个方脉冲波：

```
(sum s (pwl
  0 1
  0.5 1
  0.5)) 
```

这使用分段线性 (pwl) 函数创建一个波形，该波形从时间 0 开始，级别 1.0，然后线性插值到时间 0.5（选择中途），级别 1.0，然后立即跳到级别 0.0，并继续在 0.0 直到时间 1.0。

这是可行的，但是生成的波形在时间 0.5 处没有尖锐的单样本过渡（阶跃），而是在约 40 个样本上具有 1.0 和 0.0 之间的线性斜坡。在这种情况下这是不可接受的。

[这里](http://forum.audacityteam.org/viewtopic.php?f=39&t=53408)的转换表明，在 Audacity 中，奈奎斯特插件实际上以远低于音频速率的控制速率运行，因此产生了斜坡。

我实际上希望创建一个比方波更复杂的波形，所以一旦这个问题得到解决，我就可以继续构建完整的波形。

我的问题是：

*   是否可以调整控制速率以匹配音频采样率，以便我可以对 pwl 功能进行精确采样控制，以及
*   如何将其合并到也称为“pwl”的 Nyquist Lisp 表达式中 - 我对 Lisp 一点也不熟悉，也不明白如何顺序执行两个语句。我的猜测是有一个功能可以做到这一点......

如果这更有意义的话，我很乐意在 Audacity 之外使用 Nyquist。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:10:45.527

我链接到的线程包含我需要的答案。我会在此处发布此内容，以防将来对某人有所帮助：

```
(progv '(*control-srate*) (list *sound-srate*)
  (sum s (pwl
  0 1
  0.5 1
  0.5))
) 
```

这将控制速率设置为等于声音采样率，从而允许 pwl 函数在单个样本中直接绘制到目标电平。

此外，通过简单地将下一条语句作为前一条语句的最后一个参数，Lisp 中的语句似乎是连续的。例如，此处调用“sum”的语句位于作为 progv 的第三个参数的块中。这是正确和普遍的吗？

# android - Android：getOrientation() 是否需要连续重新映射？

> ID：16049284
> 
> 赞同：0
> 
> 时间：2013-04-17T00:06:36.233
> 
> 标签：android, orientation, sensors

我一直在尝试使用 getOrientation() 方法获取航向值。

```
boolean success = SensorManager.getRotationMatrix(rot, incl, accel, magnet);
if (success) {
    // Compute orientation
    float orientation[] = new float[3];
    SensorManager.getOrientation(rot, orientation);

} 
```

即使我保持手机稳定并以稳定的位置行走，这些值也会有很大差异。

然后我尝试将加速度值的参考从手机更改为世界轴：

```
 // Compute world acceleration
        float wAccel[] = new float[4];
        float newAccel[] = new float[]{accel[0],accel[1],accel[2], 0};
        android.opengl.Matrix.multiplyMV(wAccel, 0, rot, 0, newAccel, 0);
        magnetLine += "W" + LOGSEPARATOR +
                tsString + LOGSEPARATOR +
                wAccel[0] + LOGSEPARATOR +
                wAccel[1] + LOGSEPARATOR +
                wAccel[2] + "\n";
    } 
```

然后，我使用 atan2 函数上 X 和 Y 轴的值来确定向量的角度。即使以不同的方式变化，这些值仍然显示出奇怪的行为（有时该值是恒定的，有时它会显示周期性的行为，就像跟随脚步一样）。

我见过一些人在与此类似的情况下调用 remapCoordinate 系统。这是我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:42:50.950

以下是您可以做的几件事：

1.  首先，除非您使用的是旧版本的 Android API，否则请`Sensor.TYPE_GRAVITY`使用`Sensor.TYPE_ACCELEROMETER`. `Sensor.TYPE_GRAVITY`旨在尝试过滤掉运动，只留下重力矢量。
2.  `onAccuracyChanged(Sensor sensor, int accuracy)`使用接口的方法监控传感器的准确性`SensorEventListener`。我遇到了同样的问题，就我而言，它发生`Sensor.TYPE_MAGNETIC_FIELD`在`SensorManager.SENSOR_STATUS_UNRELIABLE`.

这`remapCoordinateSystem()`与在您的坐标系中进行 90 度旋转有关，例如将 x 与 z 轴交换等。如果您正在制作一个显示真北方向的指南针，那么您需要考虑您的设备是处于纵向还是横向模式等。但是，传感器的测量值不依赖于纵向/横向，因此如果它们变化很大，那么您的问题就出在其他地方。

另请注意， [android compass 似乎不可靠](https://stackoverflow.com/questions/6256256/android-compass-seems-unreliable)，有些人发现 Android 设备中的 compass 不是很好。但是，那篇文章大约是 2 年前发布的，所以希望现在情况会好转 :-)。

# javascript - insertXY() 到新草图 - Openlayers

> ID：16049286
> 
> 赞同：1
> 
> 时间：2013-04-17T00:06:49.020
> 
> 标签：javascript, android, openlayers

我在 Android 手机上运行 OpenLayers.js?mobile。

我希望能够从 GPS 绘制线条和多边形，以及单击屏幕添加功能。如果我在屏幕上单击以开始使用新顶点绘制草图，那么我可以调用 insertXY(lat,lon) 或单击以添加顶点，并且它按预期工作。

但是，在尝试通过在激活的 OpenLayers.Control.DrawFeature 上调用 insertXY(lat,lon) 来开始一个新草图时，在我调用 finishSketch() 之前什么都没有发生，这会引发此错误 - “TypeError: Cannot read property 'geometry' of null ”。

如何使用 insertXY() 开始草图？

这应该像在此示例中一样工作：http: [//openlayers.org/dev/examples/editing-methods.html#](http://openlayers.org/dev/examples/editing-methods.html#)

这是相关的javascript：

```
var map;
var draw;

map = new OpenLayers.Map({
    div: "map",
    layers: [
        var roads = new OpenLayers.Layer.Vector()
    ],
    center: new OpenLayers.LonLat(0, 0),
    zoom: 1
});

draw = new OpenLayers.Control.DrawFeature(roads, OpenLayers.Handler.Path);
map.addControl(draw);

draw.activate()

function add_GPS_Line_vertex(lon,lat) {
    /* this function only works if sketch has been manually started */
    var lat = parseFloat(lat);
    var lon = parseFloat(lon);
    var point = new OpenLayers.Geometry.Point(lon, lat);
    lon = point.x;
    lat = point.y;
    draw.insertXY(lon,lat);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T10:07:35.650

如果**鼠标从不悬停在地图上**[，](http://openlayers.org/dev/examples/editing-methods.html#)并且您只通过坐标添加点然后调用draw.finishSkech() 方法。

 **我通过仅在鼠标在地图上时才开始绘图来解决此问题：

```
map.events.register('mousemove', map, function (e) {

   //make sure it only runs once (with a flag or something)
   if (mouseFlag == true) {
     mouseFlag = false;

     // do your drawing
     draw.insertXY(lon,lat);

     draw.finishSketch();
  }
}); 
```

或者，如果您只需要绘制一个形状，您可以随时使用：

```
draw.drawFeature(geometry); 
```**

# c++ - 如何在 C++ 中解释以下错误消息

> ID：16049291
> 
> 赞同：8
> 
> 时间：2013-04-17T00:07:08.683
> 
> 标签：c++, debugging, error-handling, compiler-errors, runtime-error

我没有使用 C++ 的经验，并且得到了一个应该能够在没有任何调试的情况下运行的代码，但是，当我尝试编译它时出现了一堆错误。我只需要一些关于如何开始调试它的指导，任何帮助将不胜感激。这是错误消息：

```
mpicc -c -O3 curvilinear_grid.cpp
In file included from parameters.h:12:0,
                 from curvilinear_grid.h:13,
                 from curvilinear_grid.cpp:6:
parameter_file_parser.h: In member function ‘int PARAMETER_FILE_PARSER<T>::Parse_Parameter_File()’:
parameter_file_parser.h:86:13: error: invalid use of incomplete type ‘std::ifstream {aka struct std::basic_ifstream<char>}’
/usr/include/c++/4.6/iosfwd:113:11: error: declaration of ‘std::ifstream {aka struct std::basic_ifstream<char>}’
parameter_file_parser.h:92:29: error: no matching function for call to ‘getline(std::ifstream&, std::string&)’
parameter_file_parser.h:92:29: note: candidates are:
/usr/include/c++/4.6/bits/basic_string.tcc:1070:5: note: template<class _CharT, class _Traits, class _Alloc> std::basic_istream<_CharT, _Traits>& std::getline(std::basic_istream<_CharT, _Traits>&, std::basic_string<_CharT, _Traits, _Alloc>&, _CharT)
/usr/include/c++/4.6/bits/basic_string.h:2734:5: note: template<class _CharT, class _Traits, class _Alloc> std::basic_istream<_CharT, _Traits>& std::getline(std::basic_istream<_CharT, _Traits>&, std::basic_string<_CharT, _Traits, _Alloc>&)
parameter_file_parser.h:95:21: error: no match for ‘operator>>’ in ‘tokens >> std::ws’
parameter_file_parser.h:95:21: note: candidates are:
/usr/include/c++/4.6/bits/basic_string.tcc:998:5: note: template<class _CharT, class _Traits, class _Alloc> std::basic_istream<_CharT, _Traits>& std::operator>>(std::basic_istream<_CharT, _Traits>&, std::basic_string<_CharT, _Traits, _Alloc>&)
/usr/include/c++/4.6/bits/istream.tcc:957:5: note: template<class _CharT2, class _Traits2> std::basic_istream<_CharT, _Traits>& std::operator>>(std::basic_istream<_CharT, _Traits>&, _CharT2*)
/usr/include/c++/4.6/bits/istream.tcc:925:5: note: template<class _CharT, class _Traits> std::basic_istream<_CharT, _Traits>& std::operator>>(std::basic_istream<_CharT, _Traits>&, _CharT&)
/usr/include/c++/4.6/istream:709:5: note: template<class _Traits> std::basic_istream<char, _Traits>& std::operator>>(std::basic_istream<char, _Traits>&, unsigned char&)
/usr/include/c++/4.6/istream:714:5: note: template<class _Traits> std::basic_istream<char, _Traits>& std::operator>>(std::basic_istream<char, _Traits>&, signed char&)
/usr/include/c++/4.6/istream:756:5: note: template<class _Traits> std::basic_istream<char, _Traits>& std::operator>>(std::basic_istream<char, _Traits>&, unsigned char*)
/usr/include/c++/4.6/istream:761:5: note: template<class _Traits> std::basic_istream<char, _Traits>& std::operator>>(std::basic_istream<char, _Traits>&, signed char*)
parameter_file_parser.h:95:51: error: no matching function for call to ‘getline(std::istringstream&, std::string&, char)’
parameter_file_parser.h:95:51: note: candidates are:
/usr/include/c++/4.6/bits/basic_string.tcc:1070:5: note: template<class _CharT, class _Traits, class _Alloc> std::basic_istream<_CharT, _Traits>& std::getline(std::basic_istream<_CharT, _Traits>&, std::basic_string<_CharT, _Traits, _Alloc>&, _CharT)
/usr/include/c++/4.6/bits/basic_string.h:2734:5: note: template<class _CharT, class _Traits, class _Alloc> std::basic_istream<_CharT, _Traits>& std::getline(std::basic_istream<_CharT, _Traits>&, std::basic_string<_CharT, _Traits, _Alloc>&)
parameter_file_parser.h:96:14: error: no match for ‘operator>>’ in ‘tokens >> std::ws’
parameter_file_parser.h:96:14: note: candidates are:
/usr/include/c++/4.6/bits/basic_string.tcc:998:5: note: template<class _CharT, class _Traits, class _Alloc> std::basic_istream<_CharT, _Traits>& std::operator>>(std::basic_istream<_CharT, _Traits>&, std::basic_string<_CharT, _Traits, _Alloc>&)
/usr/include/c++/4.6/bits/istream.tcc:957:5: note: template<class _CharT2, class _Traits2> std::basic_istream<_CharT, _Traits>& std::operator>>(std::basic_istream<_CharT, _Traits>&, _CharT2*)
/usr/include/c++/4.6/bits/istream.tcc:925:5: note: template<class _CharT, class _Traits> std::basic_istream<_CharT, _Traits>& std::operator>>(std::basic_istream<_CharT, _Traits>&, _CharT&)
/usr/include/c++/4.6/istream:709:5: note: template<class _Traits> std::basic_istream<char, _Traits>& std::operator>>(std::basic_istream<char, _Traits>&, unsigned char&)
/usr/include/c++/4.6/istream:714:5: note: template<class _Traits> std::basic_istream<char, _Traits>& std::operator>>(std::basic_istream<char, _Traits>&, signed char&)
/usr/include/c++/4.6/istream:756:5: note: template<class _Traits> std::basic_istream<char, _Traits>& std::operator>>(std::basic_istream<char, _Traits>&, unsigned char*)
/usr/include/c++/4.6/istream:761:5: note: template<class _Traits> std::basic_istream<char, _Traits>& std::operator>>(std::basic_istream<char, _Traits>&, signed char*)
parameter_file_parser.h:96:41: error: no matching function for call to ‘getline(std::istringstream&, std::string&)’
parameter_file_parser.h:96:41: note: candidates are:
/usr/include/c++/4.6/bits/basic_string.tcc:1070:5: note: template<class _CharT, class _Traits, class _Alloc> std::basic_istream<_CharT, _Traits>& std::getline(std::basic_istream<_CharT, _Traits>&, std::basic_string<_CharT, _Traits, _Alloc>&, _CharT)
/usr/include/c++/4.6/bits/basic_string.h:2734:5: note: template<class _CharT, class _Traits, class _Alloc> std::basic_istream<_CharT, _Traits>& std::getline(std::basic_istream<_CharT, _Traits>&, std::basic_string<_CharT, _Traits, _Alloc>&)
parameter_file_parser.h:107:8: error: invalid use of incomplete type ‘std::ifstream {aka struct std::basic_ifstream<char>}’
/usr/include/c++/4.6/iosfwd:113:11: error: declaration of ‘std::ifstream {aka struct std::basic_ifstream<char>}’
make: *** [curvilinear_grid.o] Error 1 
```

与错误消息相关的代码：

```
 // File: parameter_file_parser.h
// Desc: Parser of the parameter input file to change default parameter values

#ifndef __PARAMETER_FILE_PARSER__
#define __PARAMETER_FILE_PARSER__

#include <iostream>
#include <map>
#include <string>
#include <algorithm>

template<class T=double>
class PARAMETER_FILE_PARSER
{
 public:
  PARAMETER_FILE_PARSER(string filename) : parameter_filename(filename)
  {param_map=NULL;}

  ~PARAMETER_FILE_PARSER() {if(param_map) delete param_map;}

  int Parse_Parameter_File();

  bool Get_Value(string key, int& value) 
  {
    if(!param_map) return false;
    map<string,string>::iterator i = (*param_map).find(key);
    if(i != (*param_map).end()){
      value = atoi(i->second.c_str());
      return true;
    }else return false;
  }

  bool Get_Value(string key, double& value) 
  {
    if(!param_map) return false;
    map<string,string>::iterator i = (*param_map).find(key);
    if(i!=(*param_map).end()){
      value = atof(i->second.c_str());
      return true;
    }else return false;
  }

  bool Get_Value(string key, string& value) 
  {
    if(!param_map) return false;
    map<string,string>::iterator i = (*param_map).find(key);
    if(i!=(*param_map).end()){
      string raw_val = i->second;
      size_t ip1,ip2;
      ip1 = raw_val.find('"');
      ip2 = raw_val.find('"',ip1+1);
      if(ip1!=string::npos && ip2!=string::npos){
    value = raw_val.substr(ip1+1,ip2-ip1-1);
    return true;
      }else return false;
    }else return false;
  }
 /*
  bool Get_Value(string key, bool& value) 
  {
    if(!param_map) return false;
    map<string,string>::iterator i = (*param_map).find(key);
    if(i!=(*param_map).end()){
      switch(i->second){ //make lowercase
      case "true": value = true;break;
      case "false": value = false;break;
      }
      return true;
      }else return false;
    }else return false;
  }
 */
  bool Processed() {return param_map!=NULL;}

 private:
  map<string, string> *param_map;
  string parameter_filename;
};
//*****************************************************************************
// Parsing parameter_filename and populating the parameters map
//*****************************************************************************
template<class T>
int PARAMETER_FILE_PARSER<T>::Parse_Parameter_File()
{
  ifstream pfile(parameter_filename.c_str());
  if (!pfile.is_open())
  {cout << "Unable to open parameter file:parameter_filename"<<endl;return 0;}

  param_map = new map<string, string>();

  string line,key, value;
  while (getline(pfile, line))
  {
    istringstream tokens(line);
    while(tokens >> ws && getline(tokens, key, '=') && 
      tokens >> ws && getline(tokens, value)){
      key.erase(remove(key.begin(),key.end(),' '),key.end());
      size_t i = value.find("//");
      if(i!=string::npos) {
    value = value.substr(0,i-1);
    value.erase(remove(value.begin(),value.end(),' '),value.end());
      }
      (*param_map)[key] = value;
    }
  }

  pfile.close();
  return 1;
}
//*****************************************************************************
#endif 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T00:51:26.983

如果您阅读了第一条错误消息：

```
invalid use of incomplete type ‘std::ifstream’ 
```

您会看到类型`std::ifstream`尚未定义。它在 header 中定义`<fstream>`，因此您需要包含它。

该代码还使用`std::istringstream`，这需要`<sstream>`.

大多数其他错误应该通过它来修复。

此外，虽然它不会导致错误，但您应该避免使用保留名称，例如`__PARAMETER_FILE_PARSER__`. 一般来说，不要使用前导或双下划线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T00:42:13.350

我相信您需要在标题中包含 fstream 才能访问 ifstream。

# mongodb - MongoDB 是否会过期连接？

> ID：16049294
> 
> 赞同：0
> 
> 时间：2013-04-17T00:07:23.020
> 
> 标签：mongodb

我在我的应用程序中遇到了一些过时的连接，我想知道 Mongo 是否会过期我​​的连接池中可能存在的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:18:19.537

是的，MongoDB 可能会超时，尤其是如果您的驱动程序设置了超时。查看有关超时的驱动程序文档是个好主意。有些人通过在进行查询之前测试连接来解决这个问题，但是您的驱动程序应该处理这样的事情。

过去有一个关于这个的讨论： [How to handle stale connections in MongoDB](https://stackoverflow.com/questions/10432145/how-to-handle-stale-connections-in-mongodb)

# wxpython - 在 pyinstaller 中创建的 wxPython 二进制文件在 Fedora/RHEL 上创建了丑陋的输出

> ID：16049298
> 
> 赞同：0
> 
> 时间：2013-04-17T00:08:05.753
> 
> 标签：wxpython, rhel, pyinstaller, pango

我已经搜索了两个星期来试图解决我的问题，但没有什么做得很好，所以我在这里结束了我的字符串！我用 Python 为我的工作场所创建了一个自定义打印机选择应用程序，并使用 pyinstaller 制作了一个可执行文件，我打算将其分发到我们所有的机器上。问题是我使用 Linux Mint，但实验室机器是 RHEL 6.3。我尝试了几个虚拟机，包括 Centos 6.3 和 Fedora 17，都给了我同样的问题。问题是我在控制台中收到一堆“Pango-WARNING **”错误，然后我的应用程序出现了方框而不是文本。

运行“测试”应用程序时我的控制台输出：

```
>(test:22258): Gtk-WARNING **: Unable to locate theme engine in module_path: "pixmap",
>Gtk-Message: Failed to load module "pk-gtk-module"
>Gtk-Message: Failed to load module "canberra-gtk-module"
>
>./d00087.ps
>
>(test:22258): Pango-WARNING **: failed to choose a font, expect ugly output. engine-type='PangoRenderFc', script='latin'
>
>(test:22258): Pango-WARNING **: failed to choose a font, expect ugly output. engine-type='PangoRenderFc', script='common' 
```

[输出图像](http://i781.photobucket.com/albums/yy93/radial_2/Screenshotfrom2013-04-16180205_zps9f61e1db.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:31:15.467

我猜你打包时没有包含它想要的字体文件。告诉 PyInstaller 包含这些或手动复制它们。或者告诉 wxPython 使用普通字体。查找这些错误表明开罗存在问题。可能 RHEL 没有安装 Cairo，或者正在使用不同版本的 Cairo。

# java - Play 应用程序显示编译单元不在构建路径上

> ID：16049299
> 
> 赞同：0
> 
> 时间：2013-04-17T00:08:09.830
> 
> 标签：java, eclipse, playframework

我最近买了一台新电脑。我从 Heroku 中提取了包含我的 Play 应用程序的 git 存储库，但是现在每当 eclipse 尝试自动完成时，我都会弹出一个警报说

> 编译单元不在 Java 项目的构建路径上。

我进入项目>属性>资源>链接资源并将路径添加到我的播放文件夹但无济于事。

如何将 Play 添加到 Eclipse？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:31:08.070

您是否尝试过使用`eclipse`(I think play 2.1+) 或`eclipsify`(play <=2.0) play 命令来创建您的 Eclipse 项目文件？

例如：

```
play! 2.1.0 (using Java 1.7.0_17 and Scala 2.10.0), http://www.playframework.org

> Type "help play" or "license" for more information.
> Type "exit" or use Ctrl+D to leave this console.

[mpapi] $ eclipse
[info] About to create Eclipse project files for your project(s).
[info] Successfully created Eclipse project files for project(s): 
```

# c# - 防止 SQL 注入

> ID：16049300
> 
> 赞同：2
> 
> 时间：2013-04-17T00:08:14.987
> 
> 标签：c#, sql, ado.net, sql-injection

我正在尝试防止 sql 注入：例如 1=1 等。第一次这样做，我不确定我是否做得对？

这是代码：连接字符串在那里我只是为了这个问题而删除了它。

```
 public void btnSubmit_Click(object sender, EventArgs e)
    {

        String login = txtUser.Text;
        String pass = txtPass.Text;

            string connString = "";
            SqlConnection conn = new SqlConnection(connString);
            conn.Open();

            SqlCommand cmd = new SqlCommand("Select Users,Pass from logintable where Users='" + txtUser.Text + "' and Pass='" + txtPass.Text + "'", conn);

            cmd.Parameters.Add("@Users", SqlDbType.VarChar, 20).Value = login;

            SqlDataReader dr=cmd.ExecuteReader();
            if(dr.Read())
            {
                new Login().Show();
            }
            else
            {
                 lblFail.Text="Invalid username or password";
           }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T00:11:01.770

您直接将值传递给您的查询。它会导致 Sql 注入。所以你需要使用 Sql 参数来避免它。这是给你的一个想法

```
SqlCommand cmd = new SqlCommand("Select Users,Pass from logintable where Users=@user and Pass=@password", conn);
cmd.Parameters.AddWithValue("@user", txtUserName.Text);
cmd.Parameters.AddWithValue("@password", txtPassword.Text);
reader = cmd.ExecuteReader(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T00:10:02.800

请注意您在以下位置使用字符串连接：

```
"Select Users,Pass from logintable where Users='" + txtUser.Text + "' and Pass='" + txtPass.Text + "'" 
```

这就是使您的代码容易受到注入的原因。您需要参数占位符：

```
"Select Users, Pass from logintable where Users=@Users and Pass=@Pass", conn); 
```

[您可以在此处](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)找到有关如何正确使用参数的完整示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T00:10:47.750

不，这是完全错误的。您仍然可以通过`txtUser.Text`and注入`txtPass.Text`，因为您使用的是字符串连接。

您需要在查询中为这两个值使用参数，然后`.Text`在执行前将这两个属性绑定到查询上。

```
 SqlCommand cmd = new SqlCommand("Select Users,Pass from logintable where Users=@username and Pass=@password", conn);
        cmd.Parameters.AddWithValue("@username", txtUser.Text);
        cmd.Parameters.AddWithValue("@password", txtPass.Text); 
```

当然，您永远不应该像这样直接以明文形式存储密码。您应该研究[正确的密码存储做法！](https://security.stackexchange.com/questions/211/how-to-securely-hash-passwords)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T00:11:31.037

您正在使用`Command`对象，但您没有参数化违背其目的的值，您可以使用`AddWithValue()`命令对象上的方法来定义其参数，

```
string query = "Select Users,Pass from logintable where Users=@user and Pass=@pass";
SqlCommand cmd = new SqlCommand(query, conn);
cmd.Parameters.AddWithValue("@user", txtUser.Text);
cmd.Parameters.AddWithValue("@pass", txtPass.Text); 
```

此外，您可以使用`ExecuteScalar()`from the `Command`object 而不是使用`DataReader`object 来获取结果的单个值。

试试这个代码片段：

```
string connStr = "connection string here";
string sqlStatement = @"SELECT COUNT(*) TotalCount
                        FROM logintable 
                        WHERE Users=@user and Pass=@pass";
using (SqlConnection conn = new SqlConnection(connStr))
{
    using(SqlCommand comm = new SqlCommand())
    {
        comm.Connection = conn;
        comm.CommandText = sqlStatement;
        comm.CommandType = CommandType.Text;

        comm.Parameters.AddWithValue("@user", txtUser.Text);
        comm.Parameters.AddWithValue("@pass", txtPass.Text);

        try
        {
            conn.Open();
            int _result = Convert.ToInt32(comm.ExecuteScalar());
            if (_result > 0)
            {
                new Login().Show();
            }
        }
        catch(SqlException e)
        {
            // do something with the exception
            // do not hide it
            // e.Message.ToString()
        }
    }
} 
```

为了正确编码

*   `using`用于 propr 对象处理的use语句
*   使用`try-catch`块来正确处理对象

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T00:18:07.997

您永远不应该使用字符串连接构造 SQL 语句，始终使用参数化查询。请尝试以下代码：

```
SqlCommand cmd = new SqlCommand("Select Users, Pass from logintable where Users= @Users  AND Pass=@Pass", conn);
cmd.Parameters.Add("@Users", SqlDbType.VarChar, 20);
cmd.Parameters.Add("@Pass", SqlDbType.VarChar, 20);
cmd.Parameters["@Users"].Value = login;
cmd.Parameters["@Pass"].Value = pass;

conn.Open();

SqlDataReader reader = cmd.ExecuteReader();
if (reader.Read()) 
{
   new Login().show();
}
else
{
   lblFail.Text = "Invalid username and password";
}
reader.Close();
reader.Dispose();

conn.Close();
conn.Dispose(); 
```

希望这可以帮助。您应该在 try-catch 块中使用上述代码，并在 finally 块中使用 Close/Dispose 调用。

# javascript - 不需要额外服务器的 Javascript (TCP) 套接字 API

> ID：16049305
> 
> 赞同：0
> 
> 时间：2013-04-17T00:08:52.480
> 
> 标签：javascript, ajax, sockets

我知道现在可以使用几个 Javascript/浏览器套接字 API，例如 websockets、socket.io 等。但据我所知，所有这些 API/技术除了 HTTP 服务器外，还需要额外的服务器进程，例如 websockets 或 sockets.io 服务器。这很重要，因为（我假设）大多数网络主机不提供开箱即用的此类服务器，而我希望避免昂贵的托管选项 - 如果可能的话。

有这样的套接字API吗？如果浏览器具有本机套接字 API，我愿意将自己限制在浏览器中。

PS：出于安全原因，在我的卧室托管服务器不是一种选择。

# c++ - 错误 LNK2001：未解析的外部符号“私有：静态类

> ID：16049306
> 
> 赞同：19
> 
> 时间：2013-04-17T00:09:02.830
> 
> 标签：c++, visual-c++, linker-errors, static-members

> 错误 LNK2001：无法解析的外部符号“私有：静态类 irrklang::ISoundEngine * GameEngine::Sound::_soundDevice”(?_soundDevice@Sound@GameEngine@@0PAVISoundEngine@irrklang@@A)

我无法弄清楚为什么我会收到此错误。我相信我正在正确初始化。任何人都可以伸出援助之手吗？

声音.h

```
class Sound
{
private:
    static irrklang::ISoundEngine* _soundDevice;
public:
    Sound();
    ~Sound();

    //getter and setter for _soundDevice
    irrklang::ISoundEngine* getSoundDevice() { return _soundDevice; }
//  void setSoundDevice(irrklang::ISoundEngine* value) { _soundDevice = value; }
    static bool initialise();
    static void shutdown(); 
```

声音.cpp

```
namespace GameEngine
{
Sound::Sound() { }
Sound::~Sound() { }

bool Sound::initialise()
{
    //initialise the sound engine
    _soundDevice = irrklang::createIrrKlangDevice();

    if (!_soundDevice)
    {
        std::cerr << "Error creating sound device" << std::endl;
        return false;
    }

}

void Sound::shutdown()
{
    _soundDevice->drop();
} 
```

我在哪里使用声音设备

```
GameEngine::Sound* sound = new GameEngine::Sound();

namespace GameEngine
{
bool Game::initialise()
{
    ///
    /// non-related code removed
    ///

    //initialise the sound engine
    if (!Sound::initialise())
        return false; 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-17T00:17:02.380

将其放入`sound.cpp`：

```
irrklang::ISoundEngine* Sound::_soundDevice; 
```

**注意：**您可能还想初始化它，例如：

```
irrklang::ISoundEngine* Sound::_soundDevice = 0; 
```

`static`，但非`const`数据成员应在类定义之外和包含该类的命名空间内定义。通常的做法是在翻译单元 ( `*.cpp`) 中定义它，因为它被认为是一个实现细节。只有`static`和`const`整型可以同时声明和定义（在类定义中）：

```
class Example {
public:
  static const long x = 101;
}; 
```

在这种情况下，您不需要添加`x`定义，因为它已经在类定义中定义。但是，在您的情况下，这是必要的。摘自**C++ 标准的第 9.4.2 节**：

> 静态数据成员的定义应出现在包含该成员的类定义的命名空间范围内。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-03T02:58:02.000

最终，@Alexander 给出的答案在我自己的代码中解决了一个类似的问题，但并非没有经过几次试验。为了下一位访问者的利益，当他说“将其放入 sound.cpp”时，要非常清楚，这是对 sound.h 中已经存在的内容的补充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-14T14:49:54.710

我对堆栈数组定义有同样的问题。所以，让我在这里简要解释一下。

在头文件中：

```
class MyClass
{
private:
    static int sNums[55]; // Stack array declaration
    static int* hNums;    // Heap array declaration
    static int num;       // Regular variable declaration
} 
```

在 C++ 文件中

```
int MyClass::sNums[55] = {};          // Stack array definition
int MyClass::hNums[55] = new int[55]; // Heap array definition
int MyClass::num = 5;                 // Regular variable Initialization 
```

# python - VAR模型：IndexError：元组索引超出范围

> ID：16049307
> 
> 赞同：0
> 
> 时间：2013-04-17T00:09:05.810
> 
> 标签：python, pandas, var, statsmodels

我正在尝试使用 statsmodels 运行 VAR 算法来预测一些未来值，但我被卡住了。

我有一个这样的值数组：

```
php_resp_time = [349.70448833, 304.32462033000002, 228.08079499999999, 245.03481033, 268.90133700000001, 275.58803332999997, ......, etc.] 
```

我所做的是：

```
>>> mdata = DataFrame(php_resp_time)
>>> output:
                        0
                        0   349.704488
                        1   304.324620
                        2   228.080795
                        3   245.034810
                        4   268.901337
                        5   275.588033
                        etc.

>>> dates = sm.tsa.datetools.dates_from_range('1961', length=len(php_resp_time))  #create a range of random dates
>>> output:                       [datetime.datetime(1961, 12, 31, 0, 0), datetime.datetime(1962, 12, 31, 0, 0), datetime.datetime(1963, 12, 31, 0, 0), datetime.datetime(1964, 12, 31, 0, 0), etc.]

>>> mdata.index = pandas.DatetimeIndex(dates) #assign dates as indexes
>>> data = np.log(mdata).diff().dropna()
>>> output:
                           0
                         1962-12-31 -0.138994
                         1963-12-31 -0.288395
                         1964-12-31  0.071700
                         1965-12-31  0.092944
                         1966-12-31  0.024563                                          
                         1967-12-31  0.047386
                         1968-12-31 -0.048385
                         1969-12-31  0.071730
                         etc.

#now when I am trying to call the VAR model I get this error:
>>>model = sm.tsa.VAR(data)
>>>output:               File "/usr/local/lib/python2.7/dist-packages/statsmodels/tsa/vector_ar/var_model.py", line 345, in __init__
                                self.neqs = self.endog.shape[1]
                         IndexError: tuple index out of range 
```

有谁知道如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:37:30.180

重复[这个](https://stackoverflow.com/questions/15778753/var-model-with-pandas-statsmodels-in-python)。[当您在邮件列表中](https://groups.google.com/forum/?fromgroups=#!topic/pystatsmodels/pwG73C4ErgE)询问时，在那里回答并回答。

我们不允许使用一个变量运行 VAR。根据定义，熊猫系列只有一个变量，当您有多个内生变量时使用 VAR。

**编辑**：为了更具建设性，这里有更多文档的链接。[http://statsmodels.sourceforge.net/devel/vector_ar.html#var](http://statsmodels.sourceforge.net/devel/vector_ar.html#var)

# python - postgres plpy.execute 与 hstore 字符串文字失败

> ID：16049313
> 
> 赞同：4
> 
> 时间：2013-04-17T00:09:55.490
> 
> 标签：python, postgresql, escaping, plpython

我正在使用 postgresql 9.2 编写一个 plpython 函数。假设代码已经执行了一个返回 hstore 字符串的查询。然后我想发出一个查询：

```
SELECT hstore_to_matrix('hstorestring') 
```

假设它是一个包含 hstore 字符串的字符串：`A=>B`

```
create or replace function testfreq() 
returns text
as $$
hstorestring = '"GT"=>"thing","HS"=>"[-0.1,-0.2]"'
rv2 = plpy.execute("SELECT hstore_to_matrix(%s)" % (plpy.quote_literal(hstorestring)))
plpy.log("Hstore:",rv2[0])
return("done")
$$ LANGUAGE plpythonu; 
```

运行方式

```
select testfreq(); 
```

退货

```
testdb=# select testfreq();
ERROR:  plpy.Error: unrecognized error in PLy_spi_execute_fetch_result
CONTEXT:  Traceback (most recent call last):
PL/Python function "testfreq", line 3, in <module>
rv2 = plpy.execute("SELECT hstore_to_matrix(%s)" % (plpy.quote_literal(hstorestring)))
PL/Python function "testfreq": 
```

如果您在上面的代码中替换为 hstore_to_array，则输出为：

```
testdb=# select testfreq();
LOG:  ('Hstore:', {'hstore_to_array': ['GT', 'thing', 'HS', '[-0.1,-0.2]']})
CONTEXT:  PL/Python function "testfreq"
testfreq 
----------
done
(1 row) 
```

我还尝试使用 hstore 运算符而不是函数，并且我已经在 pgsql 终端中尝试了这些函数，以确保它们在未嵌入 python 时工作。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T00:36:26.930

看起来 PL/Python 不能正确处理多维数组：

```
create or replace function testarray()
returns text
as $$
rv2 = plpy.execute("SELECT ARRAY[ ARRAY['1','2','3'], ARRAY['a','b','c'] ];" )
$$ LANGUAGE plpythonu; 
```

结果：

```
craig=# select testarray();
ERROR:  plpy.Error: unrecognized error in PLy_spi_execute_fetch_result
CONTEXT:  Traceback (most recent call last):
  PL/Python function "testarray", line 2, in <module>
    rv2 = plpy.execute("SELECT ARRAY[ ARRAY['1','2','3'], ARRAY['a','b','c'] ];" )
PL/Python function "testarray" 
```

（在 Pg 9.2.4、Python 2.7.3 上测试）。

hstore 文本有效：

```
craig=# SELECT '"GT"=>"thing","HS"=>"[-0.1,-0.2]"'::hstore;
               hstore               
------------------------------------
 "GT"=>"thing", "HS"=>"[-0.1,-0.2]"
(1 row) 
```

并且查询在 PL/Python 之外工作：

```
craig=# select hstore_to_matrix('"GT"=>"thing","HS"=>"[-0.1,-0.2]"');
        hstore_to_matrix         
---------------------------------
 {{GT,thing},{HS,"[-0.1,-0.2]"}}
(1 row) 
```

进一步表明这是一个 PL/Python 问题。

您可以通过转换为`text`然后`text[]`在返回结果后转换回来解决此问题，尽管它效率低下：

```
create or replace function testfreq() 
returns text
as $$
hstorestring = '"GT"=>"thing","HS"=>"[-0.1,-0.2]"'
rv2 = plpy.execute("SELECT hstore_to_matrix(%s)::text" % (plpy.quote_literal(hstorestring)))
plpy.log("Hstore:",rv2[0])                                                                                                                                                     
return("done")                                                                                                                                                                 
$$ LANGUAGE plpythonu; 
```

结果：

```
craig=# SELECT testfreq();
 testfreq 
----------
 done
(1 row) 
```

# javascript - Angular 场景 e2e 测试能否集成外部资源工作流

> ID：16049319
> 
> 赞同：14
> 
> 时间：2013-04-17T00:10:58.127
> 
> 标签：javascript, angularjs, karma-runner

您如何使用 Karma Runner（ex-Testacular）e2e 场景运行器在 e2e 测试中集成异地/应用外/外部资源工作流？

基本场景：

1.  应用程序有一个按钮。
2.  单击按钮将数据发送到服务提供商 X（例如提交到`http://service/submit`或其他）。
3.  提供商 X 需要在此 URL 处**单击/提交/操作。**
4.  Provider X 然后将一些东西发送回我们的应用程序。

我不是在问“你如何存根提供者 X”。我在问您如何*实际*进行端到端测试——所以我们的测试实际上可以捕捉到第 3 方服务 API 的重大更改。我基本上希望能够驱动一个应用外网站，类似于您使用[Selenium 的 Webdriver 之](http://docs.seleniumhq.org/projects/webdriver/)类的东西。

目前我的问题是`element( ref ).click()`用于尝试第 2 步，它似乎没有加载所需的站点，因此没有 DOM 可操作，无法完成 e2e。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-21T21:02:01.347

使用 Karma 可能无法执行此场景。我将介绍我对 Karma 的工作原理、它与 Webdriver 的比较以及实现此场景所需的条件的理解。

首先，重要的是要记住 Karma 和 angular-scenario 不是一回事。Karma 是用于运行基于浏览器的测试的通用 shell。它启动浏览器进程，启动节点以提供包含测试工具的网页，通过在 websocket 上发送命令来运行测试，然后收集结果。它与运行测试的实际线束/框架无关。它有 Angular 场景运行器（用于 Angular e2e 测试）、Jasmine（通常用于 Angular 单元测试）和其他流行的 JavaScript 测试框架的适配器。

像 Jasmine 这样的测试运行器在与被测代码相同的窗口上下文中执行，这就是它对单元测试有用的原因。相比之下，Angular 场景运行器与被测系统有一定的关系。它在 iframe 中加载整个应用程序，然后在大多数情况下模拟用户事件并测试可见暴露的 DOM 元素上的断言。

因为场景运行器通过 iframe 边界与应用程序交互，所以它受到浏览器的同域策略的约束。不可能在 上提供场景运行器`http://localhost:8000`，然后加载`http://yourapp`到 iframe，然后在该 iframe 内触发事件。

解决此问题的一种方法是将场景运行器简单地托管在与您的应用程序相同的服务器上。这是一个简单的例子：

[http://plnkr.co/edit/rfqpSq?p=preview](http://plnkr.co/edit/rfqpSq?p=preview)

但是，将测试运行程序塞进应用程序并不是很令人满意。Karma 通过内置的 HTTP 代理为您提供了一种解决方法。您可以将 Karma 配置为代理任意数量的不同服务器，以使它们看起来都来自同一来源。只需将它们添加到`proxies`配置文件的部分：

```
proxies = {
  '/': 'http://yourapp/',
  '/service/': 'http://service/'
} 
```

这允许您的 e2e 测试跨域，但要注意的是，当通过表单提交或重定向发生域转移时，*它必须是代理 URL*。否则场景运行器将失去对 iframe 的控制，将无法继续测试。

请注意，Selenium Webdriver 没有此限制。它在单个浏览器窗口的级别*之上*运行，因此不受相同域策略的约束。

所以让我们看看你的具体情况。就实际的 HTTP 请求和响应而言，我假设这是您要练习的流程：

1.  从加载您的应用程序`http://yoursite/yourapp.html`
2.  用户提交的表单如下所示：

```
<form method="POST" action="http://service/remotesubmission">
  ...your form...
  <input type="submit">
</form> 
```

1.  提供者 X 处理远程 POST，然后重定向到以下位置的表单：

```
<form method="POST" action="http://service/nextsubmission">
  ...provider's form...
  <input type="submit">
</form> 
```

1.  Provider X 处理表单 POST，然后重定向回您的应用程序。

如果这是实际场景，那么我认为您可以使用 Karma 和 angular 场景运行器进行这项工作的唯一方法是：

1.  条件化表单中的操作 URL，使其在测试时指向外部服务的代理 URL。
2.  确保提供程序流中的重定向和操作 URL 保留在代理路径中。我认为目前不可能，但也许可以通过为代理内容设置替换模式的方法来修补 Karma。

# c++ - 只写指针类型

> ID：16049329
> 
> 赞同：53
> 
> 时间：2013-04-17T00:12:12.427
> 
> 标签：c++, c, pointers, readonly, const-correctness

我正在为嵌入式系统编写软件。

我们使用指针来访问 FPGA 设备的寄存器。
一些寄存器是只读的，而另一些是只写的。

只读寄存器在读取时将产生未定义的值。

我想定义一个指针类型，它允许编译器检测何时从只写寄存器读取值（也称为取消引用）。

只能使用 C 语言语法创建只写指针吗？
（我们正在使用 C 开发第一个原型，但在第二代转向 C++。）

如何在 C++ 中创建高效的只写指针？（请记住，这不是跟踪动态内存中的项目，而是访问硬件地址。）

此代码用于安全和质量最受关注的嵌入式系统。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-17T00:31:08.717

我可能会为每个编写一个小包装类：

```
template <class T>
class read_only {
    T volatile *addr;
public:
    read_only(int address) : addr((T *)address) {}
    operator T() volatile const { return *addr; }
};

template <class T>
class write_only { 
    T volatile *addr;
public:
    write_only(int address) : addr ((T *)address) {}

    // chaining not allowed since it's write only.
    void operator=(T const &t) volatile { *addr = t; } 
}; 
```

至少假设您的系统有一个合理的编译器，我希望这两个都得到优化，因此生成的代码与使用原始指针没有区别。用法：

```
read_only<unsigned char> x(0x1234);
write_only<unsigned char> y(0x1235);

y = x + 1;         // No problem

x = y;             // won't compile 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-17T00:56:18.193

我将使用结构组合来表示寄存器和一对函数来处理它们。

在一个`fpga_register.h`你会有类似的东西

```
#define FPGA_READ = 1; 
#define FPGA_WRITE = 2;
typedef struct register_t {
    char permissions;
} FPGARegister;

FPGARegister* fpga_init(void* address, char permissions);

int fpga_write(FPGARegister* register, void* value);

int fpga_read(FPGARegister* register, void* value); 
```

在 xor 中使用 READ 和 WRITE 来表示权限。

比在`fpga_register.c`你会定义一个新的结构

```
typedef struct register_t2 {
    char permissions;
    void * address;
} FPGARegisterReal; 
```

以便您返回指向它的指针而不是指向`FPGARegister`on的指针`fpga_init`。

然后，`fpga_read`你`fpga_write`检查权限和

*   如果允许操作，`FPGARegister`则将参数从参数转换回 a `FPGARegisterReal`，执行所需的操作（设置或读取值）并返回成功代码
*   如果不允许操作，则返回错误码

这样，包括头文件在内的任何人都无法访问该`FPGARegisterReal`结构，因此它无法直接访问寄存器地址。显然，可以破解它，但我很确定这种故意破解不是您真正关心的问题。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-17T01:11:22.753

我使用过很多硬件，其中一些具有“只读”或“只写”寄存器（或不同的功能，具体取决于您是读取还是写入寄存器，当有人决定这样做时会很有趣） reg |= 4;" 而不是记住它应该具有的值，而是设置位 2 并写入新值，就像你应该的那样。没有什么比尝试调试具有随机位出现和消失的硬件的硬件了，你无法读取！; ) 到目前为止，我还没有看到任何实际阻止从只写寄存器读取或写入只读寄存器的尝试。

顺便说一句，我是否说过拥有“只写”的寄存器是一个非常糟糕的主意，因为您无法回读以检查软件是否正确设置了寄存器，这使得调试非常困难 - 并且人们编写驱动程序不喜欢调试可以通过两行 VHDL 或 Verilog 代码变得非常容易的难题。

如果您对寄存器布局有一定的控制权，我建议您将“只读”寄存器放在 4KB 对齐的地址中，将“只写”寄存器放在另一个 4KB 对齐的地址中[超过 4KB 也可以]。然后您可以对硬件的内存控制器进行编程以防止访问。

或者，如果正在读取不应该读取的寄存器，或者写入不应该写入的寄存器，则让硬件产生中断。我认为硬件确实会为其他目的产生中断？

使用各种 C++ 解决方案提出的其他建议很好，但它并没有真正阻止打算直接使用寄存器的人，所以如果这真的是一个安全问题（而不是“让我们让它变得尴尬”），那么你应该有硬件，以防止硬件被滥用。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-17T05:46:46.390

在 C 中，您可以使用指向不完整类型的指针来防止所有取消引用：

* * *

```
/* writeonly.h */
typedef struct writeonly *wo_ptr_t; 
```

* * *

```
/* writeonly.c */
#include "writeonly.h"

struct writeonly {
  int value 
};

/*...*/

   FOO_REGISTER->value = 42; 
```

* * *

```
/* someother.c */
#include "writeonly.h"

/*...*/

   int x = FOO_REGISTER->value; /* error: deref'ing pointer to incomplete type */ 
```

* * *

只有`writeonly.c`或通常任何具有定义的代码`struct writeonly`才能取消引用指针。当然，该代码也可能意外读取该值，但至少可以防止所有其他代码一起取消引用指针，同时能够传递这些指针并将它们存储在变量、数组和结构中。

`writeonly.[ch]`可以提供写入值的函数。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-04-17T01:16:33.437

我在 C 中看不到优雅的方式。但是我确实看到了一种方式：

```
#define DEREF_PTR(type, ptr) type ptr; \
typedef char ptr ## _DEREF_PTR;

#define NO_DEREF_PTR(type, ptr) type ptr; \

#define DEREFERENCE(ptr) \
*ptr; \
{ptr ## _DEREF_PTR \
attempt_to_dereference_pointer_ ## ptr;}

int main(int argc, char *argv[]) {
    DEREF_PTR(int*, x)
    NO_DEREF_PTR(int*, y);

    DEREFERENCE(x);
    DEREFERENCE(y); // will throw an error
} 
```

这样做的好处是为您提供静态错误检查。当然，使用这种方法，您将不得不修改所有指针声明以使用宏，这可能不是很有趣。

**编辑：** 如评论中所述。

```
#define READABLE_PTR(type, ptr) type ptr; \
typedef char ptr ## _READABLE_PTR;

#define NON_READABLE_PTR(type, ptr) type ptr; \

#define GET(ptr) \
*ptr; \
{ptr ## _READABLE_PTR \
attempt_to_dereference_non_readable_pointer_ ## ptr;}

#define SET(ptr, value) \
*ptr = value;

int main(int argc, char *argv[]) {
    READABLE_PTR(int*, x)
    NON_READABLE_PTR(int*, y);

    SET(x, 1);
    SET(y, 1);

    int foo = GET(x);
    int bar = GET(y); // error
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-10T02:45:54.190

Dan Saks 有一个 Youtube 演示文稿，我无法找到他在哪里介绍嵌入式设备的只写寄存器。

幸运的是他写了一篇更容易搜索的文章，在这里：[https ://www.embedded.com/how-to-enforce-write-only-access/](https://www.embedded.com/how-to-enforce-write-only-access/)

这是文章中的代码，针对 C++11 更新

```
class write_only_T{
public:
    write_only_T(){}
    write_only_T(T const& v) : m(v){}
    write_only_T(T&& v) : m(std::move(v)){}
    write_only_T& operator=(T const& v){
        m = v;
        return *this;
    }
    write_only_T& operator=(T&& v){
        m = std::move(v);
        return *this;
    }
    write_only_T(write_only_T const&) = delete;
    write_only_T(write_only_T&&) = delete;
    write_only_T& operator=(write_only_T const&) = delete;
    write_only_T& operator=(write_only_T&&) = delete;
private:
    T m;
}; 
```

如果您使用它，我认为您不需要特殊的指针类型，因为只写是值的属性，但我可以想象一个跳过值类型的合成指针类型。您可能需要引入只写引用类型等。

# php - 将css数据存储在数据库中并将其称为类似于css文件的最佳方式是什么

> ID：16049330
> 
> 赞同：-2
> 
> 时间：2013-04-17T00:12:18.663
> 
> 标签：php, mysql, css

我正在尝试将 css 文件存储在数据库中，并使用 PHP 以最有效的方式调用它们。我知道我可以包含一个 style.php 文件，然后进行查询以获取数据；但是，不确定这是否是最好的方法。我宁愿没有

```
<style>
#blah { }
#blah 2 { }
etc.
</style> 
```

出现在每一页。我试图使这项工作类似于典型的 css 文件的工作方式，它只是一个类似于下面方式的链接。我读过有关使用 html 页面的人的信息：

```
<link rel="stylesheet" type="text/css" href="style.php" /> 
```

style.php 页面：

```
header("Content-Type: text/css"); 
```

但是，也看到这不适用于 IE。

那么有人对我如何以最佳方式为所有浏览器执行此操作有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T00:24:27.990

我在这里发布我的建议作为答案。

如果没有，请尝试添加一个 .htaccess 文件。包括以下行：

```
RewriteEngine on
RewriteBase /
RewriteRule ^style\.css$ style.php [T=application/x-httpd-php,L] 
```

这将重写`style.css`为服务器`style.php`并将其正确地视为可执行脚本。请记住保留标题，以便返回的文件与静态 css 文件相同。另请注意，css 保留在浏览器缓存中，因此要实际重新加载 css，您需要更改 htaccess 中的缓存设置、更改文件名或告诉访问者手动重新加载页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T07:23:50.690

我会创建一个 javascript 类并使用 JQuery。每个查询都将使用 addClass 设置正确的类。您要添加的类将在 javascript-class 中动态创建。

# rubygems - cocoaPods pod install 权限被拒绝

> ID：16049335
> 
> 赞同：56
> 
> 时间：2013-04-17T00:13:07.670
> 
> 标签：rubygems, cocoapods

这是简短的版本：

当我跑

```
pod install 
```

在我得到的 Xcode 项目中

> [!] Pod::Executable pull error: cannot open .git/FETCH_HEAD: Permission denied

如果我跑

```
sudo pod install 
```

我没有收到任何错误，但我安装的文件归 root 所有，无法编译，我必须将`chown`这些文件提供给普通用户才能使用 Xcode 编译器。

我正在运行 Lion OSX。

我使用安装了 cocoaPods

```
sudo gem install cocoaPods 
```

我不得不使用`sudo`，因为没有它我得到

> 错误：执行 gem 时 ... (Gem::FilePermissionError)
> 
> 您没有对 /Library/Ruby/Gems/1.8 目录的写入权限。

所以现在我有一个 root 安装版本的 cocoaPods，它可以下载 root 拥有的 Xcode 库。

`sudo`安装 cocoaPods 是错误的方式还是正常的方式？

如果正常，有没有办法解决 pod install 问题？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-07-09T07:52:16.777

我通过运行以下命令解决了这个问题：

```
sudo chown -R $USER ~/Library/Caches/CocoaPods 
```

和

```
sudo chown -R $USER ~/.cocoapods 
```

请将`username`和替换`groupname`为您的 Mac 登录用户名/组名。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-09-05T13:43:51.357

我只用过（`username`你的 Mac 登录用户名在哪里）

```
sudo chown -R username ~/Library/Caches/CocoaPods 
```

和

```
sudo chown -R username ~/.cocoapods 
```

当我尝试使用 groupname 参数时，我得到了

```
chown: username.groupname: illegal user name 
```

当然，我使用了自己的用户名和组名 :)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-01-31T10:09:03.380

删除目录对我有用：

```
sudo rm -R  ~/Library/Caches/CocoaPods
sudo rm -R  ~/.cocoapods/repos 
```

如果还有其他问题。

删除 Pods 目录和 podFile.lock 文件。

Cocoapods 只是再次添加目录。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-17T00:34:27.780

问题在于 Mac OS X 的默认安装 Ruby。Ruby/Gems 安装在您指定的位置归 root 所有。

这是正常行为*，除非*您安装了 Ruby 管理器。我会推荐[rbenv](https://github.com/sstephenson/rbenv/)但[RVM](https://rvm.io/)也很受欢迎。

这些将您的Ruby安装安装在您的`$HOME`文件夹中。这样，您的用户就拥有了 Ruby 和 gem 可执行文件。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-12T23:17:48.460

由于我在一些项目中安装 CocoaPods 时遇到的所有错误，我终于成功地找到了它的模式。这里是：

1.  从终端访问您的项目文件夹：

    ```
    $ cd /Users/username/Downloads/MessagesTableViewController-master 
    ```

2.  创建一个 podfile：

    ```
    $ touch podfile
    $ open -e podfile 
    ```

3.  创建 podfile 后，通过 Finder 访问它并在除 TextEdit 之外的任何其他文本编辑器中对其进行编辑，因为 TextEdit 有时会混淆 pod 文件中的撇号。我使用了 textWrangler。在 pod 文件中写入以下内容；（请注意，这些依赖项适用于支持 iOS 6.0 及更高版本的项目）

    ```
    platform :ios, '6.0'
    pod 'AFNetworking' 
    ```

4.  保存文件并关闭它。

5.  返回终端并查看您的 pod 版本：

    ```
    $ pod --version 
    ```

    根据您的 pod 版本，如果需要更新，请运行以下命令：

    ```
    $ sudo gem update 
    ```

6.  更新完成后，或者说它已经是最新的，你应该安装 cocoapods：

    ```
    $ sudo gem install cocoapods 
    ```

7.  最后，只需运行以下命令：

    ```
    $ sudo pod setup
    $ sudo pod install 
    ```

还有维奥拉！它完成了。您将在项目文件夹中看到一个名为 Pods 的文件夹，并且您在 pod 文件中声明的依赖项将在 Pods 文件夹中作为子文件夹显示。

快乐编码:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-03T01:15:12.870

快速，简单，hacky的解决方案：

```
sudo chmod -R 777 ~/.cocoapods
sudo chmod -R 777 ~/Library/Caches/CocoaPods 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-02T11:57:56.973

回答原来的问题：

```
Is sudo installation of cocoaPods the wrong way or normal way? 
```

当我这样做时，`pod install`我得到：

```
Analyzing dependencies
CocoaPods 0.36.0.beta.1 is available.
To update use: `sudo gem install cocoapods --pre` 
```

所以我认为没`sudo`问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-22T17:56:02.977

这是一个已知的问题。[CocoaPods 官方网站](https://github.com/CocoaPods/CocoaPods/issues/3692)上还有更多内容。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-05T20:07:32.170

我通过安装最新版本的 Ruby 解决了这个问题。此处的说明：[https](https://gorails.com/setup/osx/10.12-sierra) ://gorails.com/setup/osx/10.12-sierra 然后我能够成功运行 sudo gem update sudo gem install cocoapods

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-22T22:52:27.450

只需要添加权限标志`--user-install`
更新使用：
`sudo gem update --user-install`
安装使用：
`sudo gem install --user-install cocoapods`

# javascript - Xcode Javascript JSON 解析

> ID：16049336
> 
> 赞同：1
> 
> 时间：2013-04-17T00:13:16.520
> 
> 标签：javascript, ios, xcode, json, parsing

我目前正在创建一个本机 Web 应用程序，该应用程序从 UIWebView 拦截 JavaScript 事件，并通过修改后的 url 字符串来回转换数据，类似于此处描述的方法 ( [http://adoptioncurve.net/archives/2012/09/calling-objective -c-methods-from-javascript-in-a-uiwebview/](http://adoptioncurve.net/archives/2012/09/calling-objective-c-methods-from-javascript-in-a-uiwebview/)）。在其中一个拦截点，我得到了一组我需要解析的 JSON 对象，在搜索了几个小时后我不知所措。

将 JSON 对象解析为字符串是我需要在注入的 javascript 文件中执行的操作，还是有某种方法可以将对象传回（使用此实现）到我的 Objective-c 类并在那里处理解析？如果需要在 javascript 文件中完成，我将如何完成？由于这不是一个真正的网络浏览器，我不能简单地调用 JSON.parse() 因为没有必要的库。

```
for (var i = 0; i < jsonData.length; i++)
{
    var jsonString = jsonData[i];
    alert('jsonData :' + jsonString);
}

execute('communicateWithApp://event=' + jsonData); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:34:38.890

如果要将 JSON 对象转换为字符串，请尝试[http://www.json.org/js.html 。](http://www.json.org/js.html)

* * *

您可以直接使用 javascript 解析 JSON，不需要额外的库。

`var myJSONObject = eval('(' + myJSONtext + ')');`

您还可以使用 NSJSONSerialization 在 Objective-C 中解析 JSON 字符串。您可以先使用 NSString 的方法 dataUsingEncoding: 或其他方法将字符串覆盖到 NSData。

# android - 从 Activity 中清除 Intent 标志，使其恢复其原始启动行为

> ID：16049340
> 
> 赞同：2
> 
> 时间：2013-04-17T00:14:04.593
> 
> 标签：android, android-intent, android-pendingintent, flags

我的应用程序有一个定义为 launchMode="singleTop" 的活动，用作根活动。

```
<activity 
    android:name="com.package.LauncherActivity"
    android:launchMode="singleTop" 
    <intent-filter>
         <action android:name="android.intent.action.MAIN" />
         <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

应用程序创建通知，单击该通知时，将使用 PendingIntent 来“重新启动”此根活动，该 PendingIntent 包含带有标志 Intent.FLAG_ACTIVITY_CLEAR_TOP 的 Intent。

```
Intent newIntent = new Intent(context, LauncherActivity.class);
newIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

PendingIntent pi = PendingIntent.getActivity(
    context, 
    (int)System.currentTimeMillis(), 
    newIntent, 
    PendingIntent.FLAG_CANCEL_CURRENT | PendingIntent.FLAG_ONE_SHOT); 
```

这个想法是，无论该人当前在应用程序中的何处，当他们单击通知时，它将清除活动堆栈并从该根活动“从头开始”。

这一切都按预期正常工作。我总是只有一个任务，当通知的 PendingIntent 被执行时，它会正确地清除堆栈。

我的问题发生在这些通知之一“重新启动”之后。如果活动随后被放置在后台，然后使用各种启动器之一（最近的应用程序、设置->应用程序（请参阅下面的更新，不完全是）等）重新启动，则通知使用的 Intent 用于启动**包括 Intent.FLAG_ACTIVITY_CLEAR_TOP**的活动。

**更新：**实际上，我的问题仅适用于尝试使用“最近的应用程序”启动器将应用程序带到前台。如果我使用设置-> 应用程序启动器，它会完全从头开始启动应用程序。它仍然没有像在我覆盖默认启动意图之前那样“恢复”应用程序。另请注意，如果我使用 longpress-Home 简历，该应用程序会按预期恢复。 **“最近的应用程序”启动器有什么不同，使它不断重复使用该意图？**

因此，在这一点上，每次他们通过启动器恢复应用程序时，它都会“清除顶部”并从头开始，而不是像使用通知的意图之前那样简单地恢复应用程序。发生这种情况是因为它是 Activity 的同一个实例，并且该 Activity 继续使用启动它的意图启动。在这种情况下，这意味着它每次都有 FLAG_ACTIVITY_CLEAR_TOP 标志。

[这篇文章](https://groups.google.com/forum/#!topic/android-developers/vrLdM5mKeoY)几乎是一针见血，但我的特殊问题没有解决。在这篇文章中，他们解决了如何正确忽略（或使用）这个重用意图的捆绑包中的附加内容。但是我想不出一种方法来清除该意图上的*标志*，以便它停止使用 CLEAR_TOP 标志启动。

我只希望它在按下通知时使用 CLEAR_TOP 标志启动一次。我希望应用程序的后续启动以与按下通知之前相同的方式执行，这只是在用户所在的任何地方恢复应用程序/活动堆栈（而不是每次都从头开始）。

我理解为什么活动会重复使用意图。我只需要找到一种方法来阻止它这样做，或者以某种方式从该意图中清除 CLEAR_TOP 标志，以便它像 PendingIntent 使用 FLAG_ACTIVITY_CLEAR_TOP 标志重新启动活动之前那样恢复工作。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T03:01:58.060

事实证明我的问题的根源是我完成（）我的根活动（在堆栈上没有留下任何活动），因此当用户按下后退按钮时关闭应用程序。

相反，当他们按下根活动时调用**moveTaskToBack(true)**，当用户“重新启动”应用程序时，我获得了我想要的一致“恢复”功能。而且由于我当时没有完全关闭并且必须重新打开/重新创建应用程序，因此我能够绕过 Intent 被重新用于 Launcher 活动的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:32:02.333

你尝试使用finish(); 然后再次调用活动？

# java - 扫描仪和数组列表

> ID：16049341
> 
> 赞同：0
> 
> 时间：2013-04-17T00:14:07.163
> 
> 标签：java

我被困在本学期最后一个项目的家庭作业上。我必须创建一个带有 Song 类和 MP3_Player 类的程序。我遇到的问题是从用户那里获取输入并将其放入 arrayList 并打印出来。有人可以帮助我朝着正确的方向前进。

```
package program3;

import java.util.Scanner;

/**
 *
 * @author Seth
 */
 public class Main {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    // TODO code application logic here

    Scanner sc = new Scanner(System.in);

    System.out.print("Enter the song's title:");
        String title = sc.nextLine();
    System.out.print("Enter the song's artist:");
        String artist = sc.nextLine();
    System.out.print("Enter the song's duration:");
        float duration = sc.nextFloat(); 
    System.out.print("Enter the size of the songs file: "); 
        int fileSize = sc.nextInt(); 

    Song song = new Song(title, artist, duration, fileSize);
        song.add(song);

    for (int i = 0; i<song.length; i++){
        System.out.println("Song " + i + " title is: " + 
            song.getTitle() + ", the artist is " + 
            song.getArtist() + " and the duration is " + 
            String.valueOf(song.getDuration()) + ".");
    }

}

}

package program3;

import java.util.ArrayList;

 /**
 *
 * @author Seth
 */
public class MP3_Player {

private int freeSpace;
private int storageCapacity;

ArrayList<Song> songList = new ArrayList<Song>(); 

public MP3_Player( )
{ 
   storageCapacity = 10;
   freeSpace = storageCapacity; 

}

public MP3_Player(int storage)
{
    storageCapacity = storage; 
    freeSpace = storageCapacity;

}    

public String toString()
{
    return "MP3 player with capacity " + storageCapacity + 
            ", " + freeSpace + " left, contains:\n" + 
    songList.toString().replace("[","").replace("]","").replace(",","\n");
}

public int getFreeSpace()
{
    return freeSpace; 
}

public int getStorageCapacity()
{
    return storageCapacity; 
}

public ArrayList<Song> getSongList()
{
    return songList; 
}

public void setStorageCapacity(int newStorageCapacity)
{
    storageCapacity = newStorageCapacity; 
}

public void setFreeSpace(int newFreeSpace)
{
    if (newFreeSpace >= 0) {
        freeSpace = newFreeSpace; 
    }
}

public void addSong(Song s)
{
     if(s.getFileSize() <= freeSpace)
     {
         songList.add(s);
         System.out.println(s.getTitle() + " added to the MP3 player."); 
         freeSpace -= s.getFileSize(); 
     }
     else
     {
         System.out.println("Cannot add " + s.getTitle() + 
                 " not enough free space.");
     }

}

public void removeSong(Song s)
{
    boolean songRemoval = false; 
    for (Song i : songList)
    {
        if(s.equals(i))
        {
            freeSpace += s.getFileSize(); 
            songRemoval = true; 
            System.out.println(s.getTitle() + 
                    " is removed from the MP3 Player."); 
        }
        else if(s.equals(i))
        {
            System.out.println("This song isn't stored in the MP3 Player."); 
        }
    }
    if(songRemoval)
    {songList.remove(s); 
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:52:37.597

所以这是您问题的解决方案……（据我说）:-)

1.  首先询问用户，他想添加多少首歌曲。说 N.
2.  现在循环N次并重复以下步骤
3.  让用户输入歌曲的详细信息说歌曲有 4 件事要添加标题、艺术家、一些详细信息、大小
4.  让声音类添加所有细节，所以现在在这个循环之后你将拥有 N 个歌曲对象。
5.  那么如何打印所有歌曲及其信息。
6.  这是代码：

    ```
    //loop through the arraylist like this 
    for (Song s:arraylistofobjcts){
       s.o.p("Songs"+s.getTitle()+s.getArtist()+s.getWriter()+s.getFileSize())
    } 
    ```

    //而已..

    ```
    **So this the song class** 
    ```

**公开课宋{

```
private String title,writer,artist;
    private int size;

public Song(String title,String writer, String artist,int size){

    this.setTitle(title);
    this.setWriter(writer);
    this.setArtist(artist);
            this.setSize(size); 
}
public int getSize() {
    return this.size;
}
public void setSize(int size) {
    this.size = size;
}
public String getTitle() {
    return this.title;
}
public void setTitle(String title) {
    this.title = title;
}
public String getArtist() {
    return this.artist;
}
public void setArtist(String artist) {
    this.artist = artist;
}
public String getWriter() {
    return this.writer;
}
public void setWriter(String writer) {
    this.writer = writer;
} 
```

}**

干杯

# jquery - 如何使用 jQuery 删除最后一个 从一个 ?

> ID：16049349
> 
> 赞同：-3
> 
> 时间：2013-04-17T00:14:51.403
> 
> 标签：jquery, html

我有一个这样的无序列表：

```
<ul id="myList">
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
    <li>Item 4</li>
</ul> 
```

我可以使用什么 jQuery 选择器来选择要删除的最后一个 li 标签？这是我到目前为止所拥有的：

$('#myList').remove();

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T00:17:45.607

用于`:last-child`选择最后一个 li 元素并将其删除。

```
$('#myList li:last-child').remove(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T00:17:25.827

我会说`$('li', ul).last().remove()`。这首先选择其中的所有`li`元素`ul`（预计是对实际元素的引用，或对选择了您要在其中查看的元素`ul`的 jQuery 对象的引用）。`ul`然后调用`.last()`只选择上一个选择中的最后一个元素，然后显然`.remove()`将其删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T00:18:09.567

```
$('ul li:last-child') 
```

这将选择作为无序列表的孩子的最后一个 li，并且可以从那里删除

# mysql - 在 MySQL 中，我可以在 TIMESTAMP 函数上创建索引吗

> ID：16049350
> 
> 赞同：2
> 
> 时间：2013-04-17T00:14:58.177
> 
> 标签：mysql, indexing

我有一个包含数百万行的表，包括一个 DATE 和一个 TIME 列。

更改表结构不是一种选择，但可以添加新索引。

考虑到这个查询：

```
SELECT * FROM Table WHERE TIMESTAMP(Date, Time) BETWEEN 'X' AND 'Y'; 
```

我在日期和时间列上有索引，在日期和时间列上也有索引，但是当我使用 TIMESTAMP 函数时，查询不使用索引。

问题是，我可以创建一个使用 TIMESTAMP 函数（不是数据类型）的索引。如果没有，有没有办法可以更改上面的查询以使用索引？

我试图保持查询的简洁和简短，并尽可能避免遍历每个日期。

**编辑：**

那么，由于 MySQL 不支持表达式索引，有没有办法可以更改此查询以使用日期或（日期，时间）索引？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T00:19:13.580

这称为*表达式索引*，但并非所有 RDBMS 品牌都支持这一点。

你不能在 MySQL 中做到这一点。

最接近的是[持久虚拟列](https://kb.askmonty.org/en/virtual-columns/)，它在 MySQL 的一个分支 MariaDB 中得到支持。但是如果你不能改变你的模式，我想切换到另一个 RDBMS 包也是不可能的。

PostgreSQL 是一个[支持表达式索引](http://www.postgresql.org/docs/9.2/static/indexes-expressional.html)的 RDBMS 示例。

* * *

作为一种解决方法，我建议仅在您的日期列上进行过滤，如果您在该列上有索引，这应该会显着缩小搜索范围。

```
SELECT * FROM Table WHERE Date BETWEEN 'Xdate' AND 'Ydate' 
  AND CASE WHEN Date = 'Xdate' THEN TIMESTAMP(Date, Time) >= 'X' 
           WHEN Date = 'Ydate' THEN TIMESTAMP(Date, Time) <= 'Y'
           ELSE 1 END; 
```

然后 TIMESTAMP() 表达式只需要针对数据的子集进行评估，而不是整个表中的每一行。在我上面显示的示例中，它只会评估 TIMESTAMP() 如果日期匹配日期范围的开始或结束。如果 Xdate 和 Ydate 之间的日期范围很长并且会匹配很多行，这可能会很有用。无需为中间的所有日期运行该函数。

我没有测试过上面的表达，所以如果我有什么不对劲，我很抱歉，我认为你应该明白这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T00:49:35.943

我的建议是重写查询以反转函数以仅从 X 和 Y 时间戳生成日期和时间：

```
SELECT * 
FROM Table 
WHERE (Date, Time) >= ('Xdate', 'Xtime') 
  AND (Date, Time) <= ('Ydate', 'Ytime') ; 
```

正如@BillKarwin 在评论中所解释的那样，这不会从索引中受益。所以，然后重写它，以便`(Date, Time)`可以使用索引：

```
SELECT * 
FROM Table 
WHERE 'Xdate' = 'Ydate'
          AND Date = 'Xdate' AND Time >= 'Xtime' AND Time <= 'Ytime'
   OR 'Xdate' < 'Ydate'
          AND ( Date = 'Xdate' AND Time >= 'Xtime'
             OR Date > 'Xdate' AND Date < 'Ydate'
             OR Date = 'Ydate' AND Time <= 'Ytime'
              ) ; 
```

这样，根本不需要调用`TIMESTAMP()`函数。

# android - openSAML 对核心类（java.* 或 javax.*）的不明智或错误使用

> ID：16049353
> 
> 赞同：1
> 
> 时间：2013-04-17T00:15:11.333
> 
> 标签：android, maven, opensaml

如果我将 opensaml 添加到我的 Android 应用程序的 pom.xml 中，则会导致此错误。

不明智或错误地使用核心类（java.* 或 javax.*）

我知道这个错误的潜在原因是与核心库发生冲突。一个冲突是 xcerces 所以我为此添加了一个例外

```
 <dependency>
        <groupId>org.opensaml</groupId>
        <artifactId>opensaml</artifactId>
        <version>2.5.3</version>
        <exclusions>
            <exclusion>
                <groupId>xerces</groupId>
                <artifactId>xercesImpl</artifactId>                    
            </exclusion>
        </exclusions>
    </dependency> 
```

但是仍然会出现同样的错误。

# python - 结合DNA线

> ID：16049355
> 
> 赞同：1
> 
> 时间：2013-04-17T00:15:19.630
> 
> 标签：python

首先我要说我是一个 Python 新手！我正在为我的班级做作业，我们要靠自己做一些事情，我们要做一些没有教过的事情。那说：

我正在尝试将多行合并为一行。我需要这个：

```
>taxon1
ACCGTGGATC
CCTATTGATT
GGATATTATC 
```

看起来像这样：taxon1 ACCGTGGATCCCTATTGATTGGATATTATC

我正在编写一个 python 脚本并从以下开始：

```
#!/usr/bin/python

import sys

if len(sys.argv) < 2:
    print "usage: finalmyscript.py infile.txt"
    sys.exit(1)

fname = sys.argv[1]

handle = open(fname, "r")

for line in handle:
    handle.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:46:11.023

好的，我现在有这个：

```
#!/usr/bin/python

import sys

if len(sys.argv) < 2:
print "usage: finalmyscript.py infile.txt"
sys.exit(1)

fname = sys.argv[1]                                                
handle = open(fname, "r")
list = handle.readlines()

for line in list:
parts = line.rstrip().split('\n')
print "".join(parts) 
```

它摆脱了换行符，但它仍然不会把所有东西都放在一行上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T20:21:12.037

试试这个代码：

```
 result=""
    for line in fname.readlines():
        if line[0]!=">": #does not import the first line with name of sequence
            result+=line.strip()
    fname.close()

    print result 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T01:59:50.143

我认为这会做你想要的：

```
#!/usr/bin/python

import os
import sys

if len(sys.argv) < 2:
    print "usage: %s <input file>" % os.path.split(sys.argv[0])[1]
    sys.exit(1)

with open(sys.argv[1]) as input_file:
    print(''.join([input_file.next().rstrip()[1:]+' '] +
                  [line.rstrip() for line in input_file])) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T01:02:18.637

对于此示例，您可能只处理一个序列，因此此解决方案将适用于您正在寻找的内容：

```
#!/usr/bin/python

import sys

if len(sys.argv) < 2:
    print "usage: finalmyscript.py infile.txt"
    sys.exit(1)

fname = sys.argv[1]
handle = open( fname )

for line in handle:
  # Only the lines that are identifier lines(Aka, start with >)
  if line[0] == '>':
    # We could use print, but sys.stdout.write is just as easy to
    #  write to the terminal without a newline at the end
    sys.stdout.write( line.replace( '\n', ' ' ) )
  else:
    sys.stdout.write( line.replace( '\n', '' ) )

handle.close() 
```

我留给你弄清楚如何修改上面的代码来处理单个文件中的多个序列。

如果您稍后要进行更多的生物信息学处理，您应该查看[Biopython](http://biopython.org/wiki/Main_Page)项目，这将使事情变得更容易。

这是一个使用 Biopython 的 SeqIO 模块很容易解决上述问题的示例

```
#!/usr/bin/python

from Bio import SeqIO
import sys

if len(sys.argv) < 2:
    print "usage: finalmyscript.py infile.txt"
    sys.exit(1)

fname = sys.argv[1]

for seq in SeqIO.parse( fname, 'fasta' ):
    print ">" + seq.id + " " + str(seq.seq) 
```

# c# - 寻找正则表达式

> ID：16049364
> 
> 赞同：0
> 
> 时间：2013-04-17T00:16:46.843
> 
> 标签：c#, regex, string

我正在寻找以下条件的正则表达式：

输入 - 任意长度的字符串

输出 - 如果字符串包含正好 2 个大写字符或字符串包含正好 2 个数字，则返回 true。

真实案例

SS22

S5834534P

1ffgdfjdfS2

虚假案件

123SSS

SSSSSS

+++1++++1++++3

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:30:28.247

```
egrep '^(([^A-Z]*[A-Z][^A-Z]*[A-Z][^A-Z]*)|([^0-9]*[0-9][^0-9]*[0-9][^0-9]*))$' test.txt 
```

这个想法是，如果你想找到恰好两个字符的匹配项，你需要找到具有以下内容的字符串：

*   开始
*   0 个或多个*错误*字符（例如，不是数字）
*   正好一个需要的字符（数字）
*   0 个或多个*错误*字符（不是数字）
*   正好一个需要的字符（数字）
*   0 个或多个*错误*字符（不是数字）
*   结尾

**编辑**

较短的形式：

```
egrep '^(([^A-Z]*([A-Z][^A-Z]*){2})|([^0-9]*([0-9][^0-9]*){2}))$' test.txt 
```

# css - 调整窗口大小/无法使用水平滚动条时，div会改变位置

> ID：16049369
> 
> 赞同：0
> 
> 时间：2013-04-17T00:17:47.997
> 
> 标签：css, html, scrollbar, overflow

我的布局有问题。我有一个全宽的导航栏，上面有一些 div，但是当页面调整大小时，这个导航栏中的 div 会改变它们的位置，我只能在页面底部看到一个滚动条，可能是因为页脚。
我在布局上保留的唯一百分比是导航栏，100%，因为我不知道如何在不使用百分比的情况下使其成为全页大小。我也尝试`overflow: auto;`在两者中使用`body`and `container`，它们似乎都不起作用。这是页面的小提琴链接：http: [//jsfiddle.net/Drp55/4/](http://jsfiddle.net/Drp55/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T00:20:50.060

设置`min-width: 1300px;`在身体上。

[更新小提琴](http://jsfiddle.net/Drp55/5/)

# javascript - 如果另一个输入组输入了数据，则禁用输入组

> ID：16049375
> 
> 赞同：0
> 
> 时间：2013-04-17T00:18:11.073
> 
> 标签：javascript, jquery, html, web-deployment

我正在系统地尝试为我的应用程序提供一种方法来禁用和启用输入组，具体取决于输入组中是否输入了任何内容。我开始在 jFiddle 中尝试如何做到这一点，但我目前被卡住了。

问题是我无法让它在多个组上工作..在一个组上工作正常。

这是我的 jFiddle 和代码：

[http://jsfiddle.net/3t5RL/5/](http://jsfiddle.net/3t5RL/5/)

```
<div class="one_or_other">
    <h1>Some Input Group</h1>
    <p class="ooo_group_1">
        <input type="text" data-disable='["ooo_group_2","ooo_group_3"]' /> 
        <input type="text" data-disable='["ooo_group_2","ooo_group_3"]' /> 
    </p>
    OR
    <p class="ooo_group_2">
        <input type="text" data-disable='["ooo_group_1","ooo_group_3"]' /> 
        <input type="text" data-disable='["ooo_group_1","ooo_group_3"]' /> 
    </p>
    OR
    <p class="ooo_group_3">
        <input type="text" data-disable='["ooo_group_1","ooo_group_2"]' /> 
        <input type="text" data-disable='["ooo_group_1","ooo_group_2"]' /> 
    </p>
</div>

<div class="one_or_other">
    <h1>Some Other Input Group</h1>
    <p class="ooo_group_1">
        <input type="text" data-disable='["ooo_group_2","ooo_group_3"]' /> 
        <input type="text" data-disable='["ooo_group_2","ooo_group_3"]' /> 
    </p>
    OR
    <p class="ooo_group_2">
        <input type="text" data-disable='["ooo_group_1","ooo_group_3"]' /> 
        <input type="text" data-disable='["ooo_group_1","ooo_group_3"]' /> 
    </p>
    OR
    <p class="ooo_group_3">
        <input type="text" data-disable='["ooo_group_1","ooo_group_2"]' /> 
        <input type="text" data-disable='["ooo_group_1","ooo_group_2"]' /> 
    </p>
</div> 
```

和

```
$('.one_or_other').each(function() {

    block = $(this);    
    block.find('input').keyup( function() {       
        if(this.value.length !== 0) {
            json = $(this).data('disable');
            $.each(json, function(i,item) {
                block.find('.' + item + ' input').prop('disabled',true).addClass('disabled');
            });
        } else {
            block.find('input').prop('disabled',false).removeClass('disabled');
        }
    });  

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:20:55.343

我玩了一会儿，决定用它创建一个 jquery 插件，它似乎可以处理我的问题：

[http://jsfiddle.net/8pyF2/9/](http://jsfiddle.net/8pyF2/9/)

我确实添加了它也可以使用选择的功能，还添加了一个清除按钮。让我知道这是否应该重构。

**html:**

```
<div class="grouped_choice">
     <h1>Some Input Group</h1>
    <p>
        <input type="text" rel="group_1" />
        <input type="text" rel="group_1" />
        <a href="#" class="clear_group" rel="group_1">clear</a>
    </p>OR
    <p>
        <input type="text" rel="group_2" />
        <input type="text" rel="group_2" />
        <a href="#" class="clear_group" rel="group_2">clear</a>
    </p>OR
    <p>
        <input type="text" rel="group_3" />
        <input type="text" rel="group_3" />
        <a href="#" class="clear_group" rel="group_3">clear</a>
    </p>
</div>
<div class="grouped_choice">
     <h1>Some Other Input Group</h1>
    <p>
        <input type="text" rel="group_1" />
        <input type="text" rel="group_1" />
        <a href="#" class="clear_group" rel="group_1">clear</a>
    </p>OR
    <p>
        <input type="text" rel="group_2" />
        <input type="text" rel="group_2" />
        <a href="#" class="clear_group" rel="group_2">clear</a>
    </p>OR
    <p>
        <input type="text" rel="group_3" />
        <input type="text" rel="group_3" />
        <a href="#" class="clear_group" rel="group_3">clear</a>
    </p>
</div> 
```

**Javascript：**

```
(function ($) {
    $.fn.groupedChoice = function () {
        this.each(function () {

            var parent = $(this);

            // handle change
            parent.on('change', 'input,select', function () {

                var field, group;

                field = $(this);
                group = field.attr('rel');

                if (field.val().length !== 0) {
                    parent.find('input[rel!="' + group + '"],select[rel!="' + group + '"]').prop('disabled', true).addClass('disabled');
                } else {
                    var empty = true
                    parent.find('input[rel='+group+'],input[rel='+group+']').each( function() {                        
                        if($(this).val().length !== 0) empty = false
                    });
                    if(empty) parent.find('input,select').prop('disabled', false).removeClass('disabled');
                }

            });

            // handle group clear
            parent.find('.clear_group').click( function(e) {
                e.preventDefault();    
                group = $(this).attr('rel');  
                disabled = false;
                parent.find('input[rel='+group+'],select[rel='+group+']').each( function() {
                    if( $(this).prop('disabled') ) disabled = true
                }) 
                if(!disabled) {
                    parent.find('input[rel='+group+'],select[rel='+group+']').val('');
                    parent.find('input,select').prop('disabled', false).removeClass('disabled');
                }
            });
        });

    };
})(jQuery);

$('.grouped_choice').groupedChoice(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:27:29.463

我想[这](http://jsfiddle.net/jVAeU/)就是你想要的。

```
$('.one_or_other').on('keyup', 'input', function () {
    var selector = $(this).parent().attr('class');
    $('p[class="' + selector + '"] input').attr('disabled', false);
    $('p[class!="' + selector + '"] input').attr('disabled', true);
}); 
```

或者，如果您想保持更细粒度的控制，您可以对块的[parent](http://jsfiddle.net/AMpbs/)进行操作。

# c# - 下拉列表上的 System.NullReferenceException

> ID：16049376
> 
> 赞同：0
> 
> 时间：2013-04-17T00:18:18.343
> 
> 标签：c#, asp.net, nullreferenceexception

我正在创建一个网上商店，当我添加产品时一切正常，当我尝试编辑我的产品时，我在它们所属的类别上出现错误。

这是我的代码：

```
@model WorkshopASPNETMVC_III_Start.ViewModels.ProductViewModel

//somecode

{
//view other text boxes
    <div class="editor-field">
        @Html.DropDownListFor(model => model.SelectedSubcatID, Model.Subcats)
        @Html.ValidationMessageFor(model => model.SelectedSubcatID)       
    </div> 
```

现在，当我实际更改它们时会发生此错误，而不是当我获得更改它们的视图时。它说我的 selectedSubcatID 或 Model.Subcats 为空。

但其中没有一个是：

```
ProductViewModel viewModel = new ProductViewModel();
Product product = productDBController.getProduct(productId);
viewModel.Product = product;
viewModel.SelectedSubcatID = product.Subcat.subcat_id;
viewModel.Subcats = getSelectListSubcats();
return View(viewModel);

private SelectList getSelectListSubcats()
{
    List<SubCategorie> subcats = subcatDBController.GetSubCats();
    SubCategorie emptySubcat = new SubCategorie();
    emptySubcat.subcat_id = -1;
    emptySubcat.naam = "";
    subcats.Insert(0, emptySubcat);

    return new SelectList(subcats, "subcat_id", "Naam");
} 
```

**编辑**

```
[HttpPost]
public ActionResult WijzigProduct(ProductViewModel viewModel, HttpPostedFileBase file)
{
    if (file == null)
    {
        MessageBox.Show("Product niet gewijzigd, geen plaatje geselecteerd!");
        return RedirectToAction("NieuwProduct", "Beheer");
    }
    else
    {
        String path = "/Content/Images";
        DirectoryInfo info = new DirectoryInfo(Server.MapPath(path));
        if (!info.Exists)
        {
            info.Create();
        }

        String fullName = String.Format("/Content/Images/{0}", file.FileName);
        file.SaveAs(Server.MapPath(fullName));

        try
        {
            if (ModelState.IsValid)
            {
                viewModel.Product.Subcat = subcatDBController.getSubCat(viewModel.SelectedSubcatID);
                productDBController.UpdateProduct(viewModel.Product, fullName);
                return RedirectToAction("beheerPagina", "Beheer");
            }
            else
            {
                viewModel.Subcats = getSelectListSubcats();
                return View(viewModel);
            }

        }
        catch (Exception e)
        {
            ViewBag.FoutMelding = "Er is iets fout gegaan: " + e;
            return View();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:20:09.657

我发现了这个问题，不确定发生了什么，但是当你有一天遇到这个问题时可能值得一试。

在我放入所有新属性的文件中，例如价格、名称等。我在模型中进行了验证。对价格的一项验证不正确。我把它注释掉了，它起作用了：

检查验证：

```
@model WorkshopASPNETMVC_III_Start.ViewModels.ProductViewModel
//somecode
{
//view other text boxes
<div class="editor-field">
    @Html.DropDownListFor(model => model.SelectedSubcatID, Model.Subcats)
    @Html.ValidationMessageFor(model => model.SelectedSubcatID)       
</div> 
```

我不知道为什么我得到这个 nullreferenceexception 但我真的很高兴它得到了修复！感谢你们的支持。

# zend-framework - 扩展 Zend 请求对象 getParams() 方法以清理用户输入

> ID：16049379
> 
> 赞同：0
> 
> 时间：2013-04-17T00:18:29.860
> 
> 标签：zend-framework, blacklist, centralized, input-sanitization

我试图通过过滤用户输入（将标签等用户数据列入黑名单）来确保我们在我们的网络应用程序中清理用户输入。基本上，Zend 建议开发人员在任何认为需要的地方专门执行此操作，因此如果页面 A 有表单，则应在检索表单数据后在其 pageAaction() 中完成过滤。我的应用程序中的所有表单数据都是这样检索的：

```
$this->_request->getParams(); 
$this->_request->getParam('specificParamName'); // to return specific param 
```

好吧，在我的网络应用程序中，用户输入的所有内容都需要针对列入黑名单的字段进行清理。我显然希望将我的代码集中在一个地方，而不是与每个表单的黑名单进行比较。我的理解是，这应该/必须在 _request 对象的 getParams() 或 getParam() 方法中完成，因为我们总是从中检索表单数据。

如果是，我该怎么做？我不想触及核心 Zend 类并添加我自己的修改。

如果不是，那么集中我们的代码的最佳策略是什么？

**免责声明：我们没有使用 Zend 表单，而是自定义编写我们自己的表单**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T06:57:18.823

**您可以扩展控制器类以实现自定义功能来清理输入**

```
 class UserController extends Custom_Controller_Abstract
    {

        $user = $this->getSafeParam('userid');
    } 
```

**在库/自定义/控制器/Abstract.php**

```
 class Custom_Controller_Abstract extends Zend_Controller_Action
    {

        public function getSafeParam($paramName)
        {
            return sanitize($this->getRequest()->getParam($key));
        }

        protected function sanitize($value)
        {
            return $value;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:32:38.547

Zend makes us perform our own sanitation of data because the requirements change so much from field to field.

You are apparently not using Zend_Form to build you form or you would use the standard filters and validators included with `Zend_Form`.

You do have access to the same validators and filters Zend_Form uses when not using Zend_form. These are available when you use `Zend_Filter_Input`.

Zend_Filter_Input is designed specifically to filter and validate information contained in an assiciated array like the ones supplied buy a `$_GET` or a `$_POST` array.

Basic usage is all in the controller/action:

```
$filters = array(
    //month is the array key, Digits is the name of the filter class
    'month'   => 'Digits',
    //account is the array key, Digits is the name of the filter class
    'account' => 'StringTrim'
);

$validators = array(
    //account is the array key, Digits is the name of the validator class
    'account' => 'Alpha',
    //* is a valid wildcard for validators and filters
    '*' => 'NotEmpty'
);

$data = $this->getRequest()->getPost();

//everything in the constructor
$input = new Zend_Filter_Input($filters, $validators, $data);

//or
$input = new Zend_Filter_Input($filters, $validators);
$input->setData($data); 
```

There is a lot more that can be done with filters and validators, check out [Zend_Filter_Input](http://framework.zend.com/manual/1.12/en/zend.filter.input.html) for more info.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:49:58.250

使用`getParams`or`getParam`不会清理表单中的数据，您应该改用`$form->getData($post)`or `$form->getValidData($post)`。

但是，我不久前也问过这个问题[zend framework sanitizing data](https://stackoverflow.com/questions/4086852/zend-framework-sanitizing-data)，并且那里有一些很好的答案 - 其中一个声明不要按照你的意愿去做（和我一样）。

# session - GNU 屏幕使用 screen -x 自动调整大小

> ID：16049380
> 
> 赞同：20
> 
> 时间：2013-04-17T00:18:42.287
> 
> 标签：session, shared, gnu-screen

有没有办法自动调整屏幕窗口的大小以及 screen -x 选项？我知道一旦共享屏幕会话打开，我们可以使用 screen fit 命令来做到这一点，但是有没有办法自动做到这一点？（就像 screen -r -d 一样，窗口会自动调整大小）。我正在尝试自动打开一个共享屏幕会话，当打开一个新的 ssh 会话时（通过使用 .bash_profile 中的 screen -x 命令），这是可行的；但窗口没有调整大小。任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-07-03T17:15:08.503

来自[http://www.gnu.org/software/screen/manual/screen.html](http://www.gnu.org/software/screen/manual/screen.html)

> Ca F (fit) 将窗口大小调整为当前区域大小。请参见窗口大小。

注意这是大写的 F，所以对我来说，它是 ctrl+a shift+f

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-25T07:43:16.917

我自己没有尝试过，但是查看[http://www.gnu.org/software/screen/manual/screen.html](http://www.gnu.org/software/screen/manual/screen.html)我建议从`screen`option开始`-A`。

# c++ - 我可以从模板访问结构/类成员吗？

> ID：16049381
> 
> 赞同：6
> 
> 时间：2013-04-17T00:18:50.690
> 
> 标签：c++, templates, member

我想要做的是创建一个接受任何类或结构（通过模板）的函数，但也让函数假设传入的类或结构中总是有一个特定的成员。

在可能不正确的代码中，它看起来像这样：

```
template <class inputType>
int doSomething(inputType voxel)
{
    return voxel.density;
} 
```

我希望它假设`density`成员将永远存在并且它将永远是一个`int`（或其他）。我可以这样做吗？如果是这样，如果`density`不存在会发生什么？它会简单地引发编译器错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T00:23:11.737

这是完全合法的，C++ 中的模板无法与通过保留类型变量来检查泛型方法或类的不同方法（想想 Java）相提并论。

C++ 模板会使用您正在使用的每种可能的类型进行编译，因此每种特定类型的每个实例都会被编译和类型检查。如果您尝试访问不包含在您使用的类型中的字段`doSomething`，那么您将收到编译器错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T00:35:38.370

您绝对可以这样做，模板将在编译时实例化，如果类型没有该成员，它将无法编译，您将收到错误消息。模板功能基本上是合同，只要您使用的类型符合合同，它就可以工作。

在这种情况下，我还建议您尝试一下，像[C++ Shell](http://cpp.sh/)和[onlinegbd.com](https://www.onlinegdb.com/)这样的网站使您在任何地方都可以轻松轻松地尝试 C/C++，并且它们支持最新版本。通过尝试这样的事情，你会学到更多。

# java - Android ListView 不配合

> ID：16049382
> 
> 赞同：0
> 
> 时间：2013-04-17T00:18:54.110
> 
> 标签：java, android, listview, arraylist, android-arrayadapter

我最近一直在研究 Android ListViews，但遇到了一些问题。我看了一些教程，让最基本的 ListViews 工作得很好。但现在我想做一个显示一系列对象的 ListView。我以为我做的一切都是正确的。我的代码没有产生任何错误，但我希望创建的列表根本不显示。显然，我不确定为什么。

此应用程序的目的是编译气象站和机场列表并显示信息（例如名称、ID#、坐标等） - 所有这些都从 XML 文档中解析并包含在 Arraylist 中（由单独的具有适当构造函数/getter/setter 的类）。基本上我得到一个站列表 - 然后从该列表中 - 一个设置为适配器的站名称列表。我的 ListView 应该只显示每个站的名称，但无济于事。

我已经测试了我的解析器和我的数组。一切正常，只是没有显示。根据所有教程，我的逻辑应该正确到我的适配器。有没有人有什么建议？我觉得我正在用尽所有解决方案。我的代码发布在下面：

```
public class MainActivity extends Activity {

//local variables
    String station_id;
    String state;
    String station_name;
    double latitude;
    double longitude;
    String html_url;

//ArrayList<String> stationList = new ArrayList<String>();
public ArrayList<Station> stationList = new ArrayList<Station>();

 private ListView stationName;
 private ArrayAdapter<String> arrayAdapter;

 //Method for DOM Parser
  public void readXML(){

    try {

        //new xml file and Read
        File file1 = new File("src/fl_wx_index3.xml");
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(file1);
        doc.getDocumentElement().normalize();

        NodeList nodeList = doc.getElementsByTagName("station");

        for (int i = 0; i < nodeList.getLength(); i++) {

            Node node = nodeList.item(i);

            if(node.getNodeType() == Node.ELEMENT_NODE){

                final Element first = (Element) node;

                station_id = first.getElementsByTagName("station_id").item(0).getTextContent();
                state = first.getElementsByTagName("state").item(0).getTextContent();
                station_name = first.getElementsByTagName("station_name").item(0).getTextContent();
                latitude = Double.parseDouble(first.getElementsByTagName("latitude").item(0).getTextContent());
                longitude = Double.parseDouble(first.getElementsByTagName("longitude").item(0).getTextContent());
                html_url = first.getElementsByTagName("html_url").item(0).getTextContent();

                //iterate thru list, returning names of each airport
                stationList.add(new Station(station_id, state, station_name, latitude, longitude, html_url));

            }

        }
        } catch (Exception e) {
        System.out.println("XML Pasing Excpetion = " + e);
        }

}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // Initialize the UI components
    stationName = (ListView) findViewById(R.id.listView1);

    //object for method call to read XML document
        MainActivity activity1 = new MainActivity();
        activity1.readXML();

    //List to contain Weather station Names
     final ArrayList<String> nameList = new ArrayList<String>();

     for (int i = 0; i < stationList.size(); ++i) {
          nameList.add(stationList.get(i).getStationName());
        }

    arrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, nameList);

    // By using setAdapter method, you plugged the ListView with adapter
    stationName.setAdapter(arrayAdapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

}

这是一个 XML 示例：

```
 <?xml version="1.0" encoding="UTF-8"?>
<wx_station_index>
    <credit>NOAA's National Weather Service</credit>
    <credit_URL>http://weather.gov/</credit_URL>
    <image>
            <url>http://weather.gov/images/xml_logo.gif</url>
            <title>NOAA's National Weather Service</title>
            <link>http://weather.gov</link>
    </image>
    <suggested_pickup>08:00 EST</suggested_pickup>
    <suggested_pickup_period>1140</suggested_pickup_period>

<station>
    <station_id>NFNA</station_id>
    <state>FJ</state>
    <station_name>Nausori</station_name>
    <latitude>-18.05</latitude>
    <longitude>178.567</longitude>
    <html_url>http://weather.noaa.gov/weather/current/NFNA.html</html_url>
    <rss_url>http://weather.gov/xml/current_obs/NFNA.rss</rss_url>
    <xml_url>http://weather.gov/xml/current_obs/NFNA.xml</xml_url>
</station>

<station>
    <station_id>KCEW</station_id>
    <state>FL</state>
            <station_name>Crestview, Sikes Airport</station_name>
    <latitude>30.79</latitude>
    <longitude>-86.52</longitude>
            <html_url>http://weather.noaa.gov/weather/current/KCEW.html</html_url>
            <rss_url>http://weather.gov/xml/current_obs/KCEW.rss</rss_url>
            <xml_url>http://weather.gov/xml/current_obs/KCEW.xml</xml_url>
</station> 
```

活动主要 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/hello_world" />

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="115dp"
    android:layout_toRightOf="@+id/textView1" >
</ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:19:02.077

第一：深呼吸，放松一下，你不是唯一的（这对我自己来说也是一种解脱），我对 ListViews 最失望，你真正需要的，叫做自定义列表适配器。我花了很长时间才弄明白，最后感谢上帝，我掌握了它。

1-如前所述，您不想创建一个新活动来调用`readXML()`它与您的活动在同一类中，因此只需调用它。

2- 更改`public ArrayList<Station> stationList = new ArrayList<Station>();`为`private List<Station> stationList = new ArrayList<Station>();`。无需宣传，`List`是比 . 更好的变量`ArrayList()`。

3-您可以发布您的“main_activity.xml”文件吗？

4-你说你的解析器工作，所以你是 100% 在调用`readXML()`变量后`stationList`包含你的 dataXML 中的所有值，对吗？

然后告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:16:06.907

由于您的 OnCreate，您的应用程序正在崩溃

代替

```
MainActivity activity1 = new MainActivity();
activity1.readXML(); 
```

你真的应该打电话

```
readXML(); 
```

# windows-8 - Windows 8 应用程序能否在 iPad 上运行

> ID：16049385
> 
> 赞同：-5
> 
> 时间：2013-04-17T00:19:02.777
> 
> 标签：windows-8

我正在开发一个需要在 Windows 8 Surface 平板电脑上运行的业务应用程序。我打算使用 HTML5 CSS 和 Javascript 进行开发。

我的问题是，Windows 8 的相同应用程序是否可以在 iPad 和/或 android 上运行而无需任何修改？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:23:10.440

不，Windows 8 应用程序默认无法在 iPad 或 Android 设备上运行，无需进行任何修改。如果要编写原生应用程序，则需要使用 Objective-C 进行 iPad 开发，使用 Java 进行 Android 开发。

但是，这里有一些选择。

*   您可以使用 HTML5 和 JavaScript 对 Windows 8 应用程序进行修改，该应用程序在 Web 浏览器中作为 HTML5 和 JavaScript 中的普通网站运行。但这些将是两个不同的代码库（一个用于 Windows 8，一个用于 Web，包括 HTML5 和 JavaScript……主要区别在于 Windows 8 应用程序可能会调用一些 WinRT API 和其他 Windows 8 特定功能）。
*   您可以使用[Xamarin](http://xamarin.com/)之类的工具/技术（它允许您使用 C# 编写代码并导出为各种应用程序格式）。

# c++ - 如何使用 memset 初始化动态二维数组？

> ID：16049387
> 
> 赞同：2
> 
> 时间：2013-04-17T00:19:08.730
> 
> 标签：c++

这个小程序有什么问题？我无法得到正确答案。我只是使用 m[1][1] 进行测试，但它始终为 0！

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
int main()
{
    int **m;
    m = new int*[5];
    for( int i = 0 ; i < 5; i++ )
    {
        m[i] = new int[5];
        memset(m[i],1,sizeof(int)*5);   
    }

    printf("%f",*(*(m+1)+1));
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T00:29:52.903

这不是“C++”。是的，它是一个 C++ 代码，但它没有使用合理的 C++ 习惯用法——你混合了 C 风格`memset`和指针追逐`operator new`（这是你唯一愿意使用的 C++ 功能）。因此，我假设您有理由使用这样的代码。如果您没有，请认真考虑使用一些 STL 类，如 a`vector`并避免指针操作。

如果您使用了合理的编译器并添加了合理的警告，您将立即收到错误：

```
$ g++ -Wall pwn.cpp
pwn.cpp: In function ‘int main()’:
pwn.cpp:14:28: warning: format ‘%f’ expects argument of type ‘double’, but argument 2 has type ‘int’ [-Wformat] 
```

打印整数的正确参数`printf`是`%d`. 改了之后怎么样？

```
$ ./a.out 
16843009 
```

怎么不打印`1`？该`memset`函数设置内存，它不初始化整数。确实，`0x01010101 == 16843009`. 这不是便携式的，很可能不是您想要做的。只是不要这样做，认真的。

# python - 在 python 中绘制轨道轨迹

> ID：16049390
> 
> 赞同：4
> 
> 时间：2013-04-17T00:19:30.020
> 
> 标签：python, numpy, matplotlib, scipy, differential-equations

如何在 python 中设置三体问题？如何定义求解 ODE 的函数？

这三个方程是
`x'' = -mu / np.sqrt(x ** 2 + y ** 2 + z ** 2) * x`、
`y'' = -mu / np.sqrt(x ** 2 + y ** 2 + z ** 2) * y`和
`z'' = -mu / np.sqrt(x ** 2 + y ** 2 + z ** 2) * z`。

写成 6 first order 我们有

`x' = x2`,

`y' = y2`,

`z' = z2`,

`x2' = -mu / np.sqrt(x ** 2 + y ** 2 + z ** 2) * x`,

`y2' = -mu / np.sqrt(x ** 2 + y ** 2 + z ** 2) * y`， 和

`z2' = -mu / np.sqrt(x ** 2 + y ** 2 + z ** 2) * z`

我还想添加地球轨道和火星的路径，我们可以假设它是圆形的。地球`149.6 * 10 ** 6`距离太阳公里，火星`227.9 * 10 ** 6`公里。

```
#!/usr/bin/env python                                                             
#  This program solves the 3 Body Problem numerically and plots the trajectories      

import pylab
import numpy as np
import scipy.integrate as integrate
import matplotlib.pyplot as plt
from numpy import linspace

mu = 132712000000  #gravitational parameter
r0 = [-149.6 * 10 ** 6, 0.0, 0.0]
v0 = [29.0, -5.0, 0.0]
dt = np.linspace(0.0, 86400 * 700, 5000)  # time is seconds 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T00:59:44.623

正如您所展示的，您可以将其编写为六个一阶 ode 的系统：

```
x' = x2
y' = y2
z' = z2
x2' = -mu / np.sqrt(x ** 2 + y ** 2 + z ** 2) * x
y2' = -mu / np.sqrt(x ** 2 + y ** 2 + z ** 2) * y
z2' = -mu / np.sqrt(x ** 2 + y ** 2 + z ** 2) * z 
```

您可以将其保存为矢量：

```
u = (x, y, z, x2, y2, z2) 
```

从而创建一个返回其导数的函数：

```
def deriv(u, t):
    n = -mu / np.sqrt(u[0]**2 + u[1]**2 + u[2]**2)
    return [u[3],      # u[0]' = u[3]
            u[4],      # u[1]' = u[4]
            u[5],      # u[2]' = u[5]
            u[0] * n,  # u[3]' = u[0] * n
            u[1] * n,  # u[4]' = u[1] * n
            u[2] * n]  # u[5]' = u[2] * n 
```

给定一个初始 state`u0 = (x0, y0, z0, x20, y20, z20)`和一个变量 times `t`，可以这样输入`scipy.integrate.odeint`：

```
u = odeint(deriv, u0, t) 
```

`u`上面的列表在哪里。或者您可以`u`从头开始解包，忽略 、 和 的值`x2`（`y2`您`z2`必须先用 转置输出`.T`）

```
x, y, z, _, _, _ = odeint(deriv, u0, t).T 
```

# mysql - 在 Cloud Foundry 上部署 Redmine：libmysqlclient.so.16：无法打开共享对象文件：没有这样的文件或目录

> ID：16049392
> 
> 赞同：0
> 
> 时间：2013-04-17T00:19:34.790
> 
> 标签：mysql, redmine, cloud-foundry

我正在尝试推送 Redmine 2.3.0 版本，但出现以下错误。

```
Running rake assets:precompile
[2013-04-16 23:37:08] Assets precompilation failed: rake aborted!
[2013-04-16 23:37:08] libmysqlclient.so.16: cannot open shared object file: No such file or directory - 
/var/vcap/data/stager/tmp/d20130416-26326-n1cta5/rubygems/ruby/1.9.1/gems/mysql2-0.3.11/lib/mysql2/mysql2.so

.......

[2013-04-01 07:38:32] (See full trace by running task with --trace)[23-04-01 07:38:32] Turning on live assets compilation
[2013-04-01 07:38:32] Creating droplet
[2013-04-01 07:38:34] Uploading droplet
[2013-04-01 07:38:36] Done!

The error messages from the console, it says failed to start instances.

Uploading redmine_... O
Stopping redmine_... OK

Starting redmine_... OK
Checking redmine_...
0/1 instances: 1 starting
0/1 instances: 1 down
0/1 instances: 1 down
0/1 instances: 1 down
0/1 instances: 1 down
0/1 instances: 1 down 
```

有谁知道原因吗？

我正在使用 Mac OSX Snow Leopard、Redmine 2.3.0、ruby 1.9.2p320 和 Rails 3.2.13

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T08:51:06.693

我根据[http://blog.cloudfoundry.com/2013/01/10/cloud-foundry-now-supports-rails-assets-pipeline/](http://blog.cloudfoundry.com/2013/01/10/cloud-foundry-now-supports-rails-assets-pipeline/)解决了这个问题 运行这个：

```
 RAILS_ENV=production bundle exec rake assets:precompile 
```

# python - 持续时间未知的事件的进度条 (PySide)

> ID：16049395
> 
> 赞同：2
> 
> 时间：2013-04-17T00:19:56.887
> 
> 标签：python, qt, pyside

我有一个使用 PySide 开发的 GUI。我有一个很长的操作要从界面执行，但无法预测操作将持续多长时间。我想向用户显示一些东西告诉他：操作正在进行中，请稍候。类似于无限进度条或旋转轮之类的东西。Qt 中是否有用于此类操作的小部件？我找到了 QProgressDialog（和 QProgressBar），但它不合适，因为我无法预测要执行的工作量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-30T14:11:13.250

[最后，我在QProgressBar](http://srinikom.github.io/pyside-docs/PySide/QtGui/QProgressBar.html)文档中找到了答案：

> 如果最小值和最大值都设置为 0，则条形图显示忙碌指示符，而不是步数百分比。这很有用，例如，当使用 PySide.QtNetwork.QFtp 或 PySide.QtNetwork.QNetworkAccessManager 在无法确定正在下载的项目的大小时下载项目时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:46:34.910

如果您想要一个无限的进度条或旋转轮，只需播放它，然后当您完成该过程时，停止和/或从屏幕上删除进度条/图标。

# sql - Postgres 按周分区

> ID：16049396
> 
> 赞同：8
> 
> 时间：2013-04-17T00:20:13.010
> 
> 标签：sql, postgresql, partitioning, week-number

我可以想象按日期（特别是日志）的表分区是广泛使用的东西，但我无法找到我的问题的好答案。

我想按周创建一个表分区（记录数很大，每月都要创建）。它是每周一次的原因是我需要算法的数据，该算法将在过程中寻找日期。

我的问题是我希望它考虑一周来创建分区并使用“典型”方法我必须手动创建它。像这样的东西。

```
 CREATE TABLE measurement_y2013w01 (
CHECK ( logdate >= DATE '2013-01-07' AND logdate < DATE '2013-01-14' ) 
    ) INHERITS (measurement);

    CREATE TABLE measurement_y2006w02 (
CHECK ( logdate >= DATE '2013-01-14' AND logdate < DATE '2013-01-21' ) 
    ) INHERITS (measurement);

... 
```

但我希望它自动生成。我不想为每个星期一个一个地创建一个分区。

我的命名规则将是 yYYYYwWW 用于分区的命名或开始 datadYYYYMMDD。

我想在使用这样的东西插入时检查分区：

```
 SELECT
    nmsp_parent.nspname AS parent_schema,
    parent.relname      AS parent,
    nmsp_child.nspname  AS child,
    child.relname       AS child_schema
FROM pg_inherits
    JOIN pg_class parent        ON pg_inherits.inhparent = parent.oid
    JOIN pg_class child         ON pg_inherits.inhrelid   = child.oid
    JOIN pg_namespace nmsp_parent   ON nmsp_parent.oid  = parent.relnamespace
    JOIN pg_namespace nmsp_child    ON nmsp_child.oid   = child.relnamespace 
```

如果分区不存在，则在插入之前创建它，但考虑到插入的记录数量，这会效率低下。

我的另一种选择是每周运行一个外部进程来创建这个分区，但我试图避免这种情况。

是否有一个我缺少的更有效的解决方案，例如用于每月检查？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-23T22:14:13.530

好的，让我们自己创建一个函数来处理它！

```
CREATE OR REPLACE FUNCTION create_partition_measurement( DATE, DATE )
returns void AS $$
DECLARE
create_query text;
BEGIN
    FOR create_query IN SELECT

        'CREATE TABLE measurement_' || TO_CHAR( d, 'YYYY_WW' ) || ' (
        CHECK ( EXTRACT(YEAR FROM logdate) = EXTRACT(YEAR FROM TIMESTAMP ''' || d || ''') AND EXTRACT(WEEK FROM logdate) = EXTRACT(WEEK FROM TIMESTAMP ''' || d || ''') )
        ) INHERITS (measurement);'

        FROM generate_series( $1, $2, '1 week' ) AS d LOOP

        EXECUTE create_query;

    END LOOP;
END;
$$
language plpgsql; 
```

有了这个，你现在可以调用类似的东西

```
SELECT create_partition_measurement ('2015/02/08','2015/03/01'); 
```

并创建您的分区。自动化的第一步，完成。

我使用以下测试表在我自己的数据库中测试了所有这些：

```
CREATE TABLE measurement (id INT NOT NULL PRIMARY KEY, id_user INT NOT NULL, logdate TIMESTAMP NOT NULL); 
```

使用上面的函数创建分区后，我能够：

*   将数据插入正确的分区；
*   尝试将一周的数据插入另一周的分区时出错；
*   自动创建分区数周，并且；
*   如果我尝试在一个已经存在的分区中创建一个一周的分区，则会出现错误。

这应该足够了=）

现在，关于自动化创建过程。我每个月都使用一个简单的 cron 脚本为我调用这个函数，并使用几个监控脚本来确保一切正常运行。cron 看起来像这样：

```
0 0 1 * * /var/lib/postgresql/create_partitions.sh 
```

该脚本将使用当前日期和当前日期 + 1 个月运行命令。它看起来像这样：

```
startDate=`date "+%Y/%m/%d"`
endDate=`date -u -d "+1 month -$(date +%d) days" "+%Y/%m/%d"
psql -U "$dbUser" -w -c "SELECT create_partition_measurement('$startDate','$endDate');" 
```

如果您需要在表中包含索引、PK、FK，或帮助触发器完成所有这些工作，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T01:36:37.987

您可以使用**date_trunc**函数将数据值四舍五入到一周的第一天。对于分区命名，您可以使用年份**YYWW**中的年份和周数：

```
CREATE TABLE measurement_1301 (
    CHECK ( date_trunc( 'week', logdate )::date = DATE '2013-01-07') )
    INHERITS (measurement);

CREATE TABLE measurement_1302 (
    CHECK ( date_trunc( 'week', logdate )::date = DATE '2013-01-14') )
    INHERITS (measurement);

CREATE TABLE measurement_1303 (
    CHECK ( date_trunc( 'week', logdate )::date = DATE '2013-01-21') )
    INHERITS (measurement);

-- Default partition:
CREATE TABLE measurement_default () INHERITS (measurement); 
```

对于分区名称生成使用`to_char( logdate::date, 'YYWW')`，如果您喜欢**yYYYYwWW**：`to_char( logdate::date, '"y"YYYY"w"WW')`

要检查现有分区，您可以使用非常简单的查询：

```
SELECT relname FROM pg_class
WHERE relname ~ '^measurement_[0-9]{4}$'
ORDER BY RIGHT(relname,4) DESC 
```

如果给定周没有分区，则数据路由触发器插入适当的分区并回退到默认值。

```
CREATE OR REPLACE FUNCTION measurement_insert_trigger()
RETURNS TRIGGER AS $$
BEGIN

    IF to_char( NEW.logdate::date, 'YYWW') = '1301' THEN
        INSERT INTO measurement_1301 VALUES (NEW.*);
    ELSIF to_char( NEW.logdate::date, 'YYWW') = '1302' THEN
        INSERT INTO measurement_1302 VALUES (NEW.*);
    ELSIF to_char( NEW.logdate::date, 'YYWW') = '1303' THEN
        INSERT INTO measurement_1303 VALUES (NEW.*);
    -- ...
    ELSE
      INSERT INTO measurement_default VALUES (NEW.*);
    END IF;
    RETURN NULL;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER measurement_insert_tr BEFORE INSERT ON measurement
FOR EACH ROW EXECUTE PROCEDURE measurement_insert_trigger() 
```

您将提前创建所有分区。或者您可以使用默认分区并不时重新分区存储在那里的数据，创建新分区并调整插入触发器。

PS你可以在这里找到基于触发器的分区解决方案的脚本[http://hg.nowitworks.eu/postgresql-triggers-and-partitions](http://hg.nowitworks.eu/postgresql-triggers-and-partitions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-20T14:52:27.400

如果有帮助，我编写了一个 postgres 触发器来创建一个按天自动分区的表。创建继承表会自动发生。要按周进行分区，您必须更改 day->string 映射，仅此而已。

[https://github.com/bitdivine/pg_day_partitions](https://github.com/bitdivine/pg_day_partitions)

# android - 果冻豆中的android setAdapter和刷新操作栏

> ID：16049398
> 
> 赞同：2
> 
> 时间：2013-04-17T00:20:26.413
> 
> 标签：android, android-fragments, android-4.2-jelly-bean

在果冻豆之前的android片段生命周期（可能是一个错误[https://code.google.com/p/android/issues/detail?id=39721）onCreateOptionsMenu](https://code.google.com/p/android/issues/detail?id=39721)将在onCreate之后调用，这个错误onCreateOptionsMenu被调用在 onResume 之后。我的问题是我在 onCreateOptionsMenu 上设置了一个刷新操作菜单项，如果我将 loadItemsToAdapter 放在该函数中，它不会在 JB 之前工作，因为尚未调用 onCreateView。有没有一种解决方案，我不必在 onCreateOptionsMenu 和 onCreateView 上都放置标志 isCalled 并将 loadItemsToAdapter 放置？

# bash - 用于更改 postgresql 用户密码的 bash 脚本

> ID：16049399
> 
> 赞同：25
> 
> 时间：2013-04-17T00:20:28.470
> 
> 标签：bash, postgresql, shell, command

我可以通过这种方式更改 postgresql 用户密码（2个步骤）：

```
$ su - postgres -c 'psql -U postgres -d postgres'
# Alter user postgres with password 'password'; 
```

现在我想使用单行命令（1步）来更改密码，例如：

```
su - postgres -c 'psql -U postgres -d postgres -c "alter user postgres with password ''password'';"' 
```

我听说使用双单引号来转义一个单引号，所以我添加了双引号`'`。但是显示错误消息：

```
ERROR:  syntax error at or near "password"
LINE 1: alter user postgres with password password; 
```

有人可以让我知道如何使用一行命令来做到这一点吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-17T04:17:39.253

如果你使用更容易`sudo`：

```
sudo -u postgres psql -U postgres -d postgres -c "alter user postgres with password 'password';" 
```

但是 su 也可以，这应该有效：

```
su - postgres -c "psql -U postgres -d postgres -c \"alter user postgres with password 'password';\"" 
```

我使用了外部双引号并对内部双引号进行了转义，因此它们作为单个调用参数的一部分传递给shell，`su`并且不会被 shell 转义，因此实际的查询文本作为单个 arg 传递给 psql，包括单引号密码.

sudo 更容易做到这一点的原因之一是它使用一种更智能的方式来执行子进程，而不是运行第二个 shell 实例来执行它。您需要少一层 shell 元字符转义。

# vb.net - 库存多种形式（运费）

> ID：16049401
> 
> 赞同：0
> 
> 时间：2013-04-17T00:20:46.383
> 
> 标签：vb.net, visual-studio-2012, inventory, multiple-forms

我正在制定一个库存计划。我在设置替代表单来运送库存时遇到问题。

我认为我下面的代码将获取用户输入的数字，从存储在数组中的数字中减去它，然后将新数字保存到数组中。

您在网上知道的任何资源都会很棒。

```
Public Class Ship

  Private Sub btnSave_Click(sender As Object, e As EventArgs) Handles btnSave.Click

    If VBProj2.cbInventory.SelectedIndex <> -1 Then
      'VBProj2.cbInventory.Items.RemoveAt(VBProj2.cbInventory.SelectedIndex)
      VBProj2.txtQuantity.Clear()

      Dim intX As Integer = VBProj2.cbInventory.Items.Count
      If txtQuantityNew.Text <= 200 Then
        VBProj2.iquantity(intX) = txtQuantityNew.Text - VBProj2.iquantity(intX)

        MessageBox.Show(VBProj2.iquantity(intX))
        VBProj2.cbInventory.SelectedIndex = VBProj2.cbInventory.Items.Count - 1
      Else
        MessageBox.Show("Please only ship 200 or less")
      End If
      Me.Close()
    Else
      MessageBox.Show("Something fed up")
    End If

  End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:38:14.973

在您的代码中

```
VBProj2.iquantity(intX) = txtQuantityNew.Text - VBProj2.iquantity(intX) 
```

您实际上是从新数量中减去初始数量，这与您所说的想要做的相反，这将是

```
VBProj2.iquantity(intX) = VBProj2.iquantity(intX) - val(txtQuantityNew.Text) 
```

# javascript - 如何在点击时触发 JavaScript 像素

> ID：16049403
> 
> 赞同：1
> 
> 时间：2013-04-17T00:20:51.140
> 
> 标签：javascript, image

我正在尝试获取 Javascript 像素

```
<script language='JavaScript1.1' src='http://pixel.tag.com/event/js?mt_id=123456789&mt_adid=123456&v1=&v2=&v3=&s1=&s2=&s3='></script> 
```

*单击提交按钮后*触发，类似于您可以在此[页面](http://www.keplergrp.com/contact/)上找到的内容。（我知道这可能需要构建一个简单的“谢谢”页面，这没关系，但像素无法触发 onClick。

此外，我需要传递给 v1、v2 等变量的不同字段中的文本以被像素捕获。

```
<p>First Name <span class="orng">*</span><br />
<span class="wpcf7-form-control-wrap first-name"><input type="text" name="first-name" value="" class="wpcf7-form-control wpcf7-text wpcf7-validates-as-required" size="40" /></span> </p> 
```

我对此有点陌生，不是开发人员，但了解它在概念上的工作原理，因此非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T00:39:50.387

从以前使用像素开始，这是我推荐的广泛解决方案。从一个 JavaScript 字符串变量开始，该变量收集适当的信息以配合 ?mt_id=123456789&mt_adid=123456&v1=&v2=&v3=&s1=&s2=&s3=。如果你已经建好了，那就太好了。

```
<script type='text/javascript'>
    var track = new Image();
    track.src="http://pixel.tag.com/event/js?self=" + dataString;
</script> 
```

如果看到另一个解决相同问题的人的例子会有所帮助。尝试阅读[此论坛帖子](http://forums.site-reference.com/topic/6378/Javascript-Tracking-Pixel/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T02:34:05.877

这里的技巧不在于“跟踪像素”，而在于填充参数的值。

您将在这里遇到的问题是您现在必须构建一个指向 .js 文件的字符串，然后将参数和值构建为字符串，将它们全部连接起来，构建一个脚本标签和将 url 指向您构建的值，因此丑陋的（按 JS-purist 标准）解决方案可能如下所示：

```
<form id="ContactForm">
    <input name="first-name">
    <input name="last-name">
    <button id="my-button" type="submit">sign up</button>
</form>

<script>

    // the button you want to listen to
var button = document.getElementById("my-button"),
    // assuming your form has the id "ContactForm"
    contact = window.ContactForm,

    // create a <script> tag, like the one that's hard-coded now
    script = document.createElement("script"),
    // find whatever element contains the first <script> on the page -- usually <head> or <body>
    parent = document.getElementsByTagName("script")[0],

    // as much of the tracking URL that you know will NEVER change
    url = "//analytics.tag.com/event/tracking.js?mt_id=123456&mt_adid=123abc";

button.onclick = function () {

    var full_url = "",
        v1,
        v2;

    v1 = contact["first-name"];
    v2 = contact["last-name"];

    full_url = url + "&v1=" + v1 + "&v2=" + v2;

    script.src = full_url;
    parent.appendChild(script);

};

</script> 
```

单击按钮时，将从表单中收集值，将它们添加到 URL 中，并将脚本添加到页面中。

这是下一个问题：

如果这是 a 并且您正在捕获将您带到下一页的点击，默认情况下，您必须取消表单提交，否则，对 JS 文件的请求将被忽略（为什么要加载新的东西当您告诉浏览器您要转到下一页时？）。

因此，您需要将其修改为`button.onclick`：

```
button.onclick = function (e) {
    // IE < 9 supports "window.event", instead of an event-object as a parameter
    e = e || window.event;

    if (e.preventDefault) {
        e.preventDefault();
        e.stopPropagation();
    } else {
        // IE < 9
        e.cancelBubble = true;
        e.returnValue  = false;
    }

    /*  DO ALL OF YOUR DATA-COLLECTION AND STRING-BUILDING HERE
        ie: most of the first version of this function (all before `script.src =...`)
     */

    // after the script loads, fire contact.submit
    script.onload = contact.submit;
    // if the script errors out (404/etc) fire contact.submit
    script.onerror = contact.submit;
    // GhettoIE fix, for when scripts don't support "onload"
    script.onreadystatechange = function () {
        if (script.readyState === 4) { contact.submit(); }
    };

    /* SET THE SCRIPT URL HERE */
    script.src = full_url;
    parent.appendChild(script);
}; 
```

现在，当您单击按钮时，它将阻止表单提交（将您带到下一页），直到您收集所有表单值，将它们填充到脚本的 URL 中，将脚本放在页面上，然后等待服务器获取请求并响应。

这是以非常非常丑陋的跨浏览器 (IE6+/Safari3+) 兼容格式完成的。
如果你那里有一个像样的 JS 人，让他做得比这更好，否则我会哭...

如果您需要在下一页收集数据（例如，您需要在服务器处理付款后计算您的实际销售利润），您最好使用服务器的语言进行此操作：

```
// php
"<script src=\"....?v1=$profit&v2=$product_id\"></script>"; 
```

希望有帮助。

# python - 如何为 Django 项目创建模拟 LDAP 服务器？

> ID：16049407
> 
> 赞同：6
> 
> 时间：2013-04-17T00:21:03.370
> 
> 标签：python, django, mocking, ldap, django-auth-ldap

我正在使用[django-auth-ldap](http://pythonhosted.org/django-auth-ldap/index.html)并且想知道创建 python 模拟 ldap 服务器的最简单方法是什么。当我远离 ldap 服务器所在的网络进行开发时，就会出现问题。测试是另一种情况。我想避免在本地创建实际 ldap 服务器的实例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T21:33:19.677

django-auth-ldap 的 tests.py 包含一个简单的模拟 ldap 用于自己的测试。这是由其他人分拆到[fakeldap](https://pypi.python.org/pypi/fakeldap)包中的，尽管我没有关注进展。正确的答案可能是从 fakeldap 开始，并在必要时做出贡献。

更新：目前正在进行一项[更严肃的努力](https://bitbucket.org/psagers/mockldap)来剥离模拟 LDAP 层。

# c# - 如何在开始渲染之前修改 C# 4.5 WPF webbrowser 元素

> ID：16049408
> 
> 赞同：2
> 
> 时间：2013-04-17T00:21:08.557
> 
> 标签：c#, wpf, browser, webbrowser-control, dom-events

我想在 head 元素下方注入 Javascript 代码。例如下面的代码：

```
<script src="C:\jquery-1.9.1.min.js" type="text/javascript"></script>
<script type="text/javascript">

    $(document).ready(function () {           
        alert('all successfull');
    });

</script> 
```

它必须在 webbrowser 对象开始渲染页面之前完成。否则不会加载脚本。

现在我已经走到了下面，但找不到在下面注入这个脚本的方法。帮助表示赞赏。

```
 private void Button_Click(object sender, RoutedEventArgs e)
    {
        wbScreen1.LoadCompleted += wbScreen1_LoadCompleted;
        wbScreen1.Navigate("http://www.monstermmorpg.com");
    }

    void wbScreen1_LoadCompleted(object sender, NavigationEventArgs e)
    {

    } 
```

C# 5 , WPF 应用程序

# javascript - js导致firefox崩溃

> ID：16049409
> 
> 赞同：2
> 
> 时间：2013-04-17T00:21:13.797
> 
> 标签：javascript, firefox, crash

我为这个模糊的问题道歉，但我不知道如何更好地描述正在发生的事情。

我正在开发一个到目前为止严格用 js 编码的网络应用程序（还没有服务器端代码）。我正在使用 HTML 5 画布绘制一种布局图，其中包含点击事件、颜色编码和对象选择等。

我正在开发它以严格与 Firefox 一起使用（我正在使用 moz 特定的 css 东西和我必须使用的 IE 版本不支持的存储。）

今天在我的项目上工作时，我开始遇到奇怪的行为。加载网页时会出现一些内容（按钮、div 等），然后 Firefox 会弹出一个对话框，说明“Firefox 已停止工作”并询问我是否要“在线检查解决方案并关闭程序”或只需“关闭程序”。以下是在“更多详细信息”窗格中：

```
> Problem signature:   Problem Event Name:  APPCRASH   Application
> Name: firefox.exe   Application Version:  17.0.4.4814   Application
> Timestamp:    5138e84f   Fault Module Name:   mozjs.dll   Fault Module
> Version:  0.0.0.0   Fault Module Timestamp:   5138d295   Exception
> Code: c0000005   Exception Offset:    0002171f   OS
> Version:  6.1.7601.2.1.0.256.4   Locale ID:   1033   Additional
> Information 1:    0a9e   Additional Information
> 2:    0a9e372d3b4ad19135b953a78882e789   Additional Information 3:    0a9e  
> Additional Information 4: 0a9e372d3b4ad19135b953a78882e789
> 
> Read our privacy statement online:  
> http://go.microsoft.com/fwlink/?linkid=104288&clcid=0x0409

If the online privacy statement is not available, please read our privacy statement offline:
  C:\Windows\system32\en-US\erofflps.txt 
```

我在我的代码中添加了一些警告语句，并将问题追溯到某个代码块。但是，如果我单步执行该块（在 for 循环的每次迭代中放置一条警告语句），代码将按预期执行，并且 Firefox 不会崩溃。Firebug 也没有发现代码有任何问题。如果我取消警报，那么突然 Firefox 又会窒息。

如果我打破这部分代码并通过单击按钮运行它，那么代码也会正确执行，但是我的用户必须单击按钮才能使其工作是不切实际的。

我需要帮助找出我应该尝试将问题归零。

一些可能（我不知道）相关的事情：

我正在从大约 12 个不同的 xml 文档中加载数据，一个有 600KB 大，其余的大约 20KB。

我还导入了 15 个不同的 js 库——我可以减少这个数量，但是这些文件的功能在逻辑上被分解了，所以如果我必须将它们连接在一起，开发起来会有点困难。

我没有使用 jQuery 或 MooTools 或任何其他类似的库。

关于如何解决正在发生的事情的任何想法？

**编辑：**

这是它死掉的函数的代码。我没有发布实际代码的原因是，正如我所说，代码本身在不与页面的其余代码一起运行时可以正确执行。不过，如果它有帮助，它就在这里。

```
function GetSeatPaths(Seats){
    // fills the SeatPath, ArmrestPath and SimpleSeatPath for the seat instance (used for cango drawing)

    for (var i =0; i<Seats.length; i++){
        var ThisSeat = Seats[i];

        var SeatPath = ThisSeat.SeatPath;

        //alert("SeatCollection.prototype.GetSeatPaths: " + i);

        if (typeof(SeatPath) === "undefined" || SeatPath == null){

            var Column = ThisSeat.Column;
            var Dims = ThisSeat.Dims;

            if (Column != "Left"){
                BL = -1;
            } else {
                BL = 1;
            }

            var SeatRad = 2;

            try{
                var seat_pax = parseInt(Dims.Seat_PAX); 
            } catch(err){
                var seat_pax = 3;
            }

            if (isNaN(seat_pax)){
                var seat_pax = 3;
            }

            //Make an armrest and cushion set var SeatRad = 2; //this is the radius of the seat cushions
            //alert("getSeatPaths");

            var CTS = 2.25;
            var TAR = 16;
            var CRP = 16.2;
            var BA = 18;
            var FOA = -2;
            var SBT2 = 23.2;
            var ACO = 45;

            if (Dims.hasOwnProperty('CTS')){
                CTS = parseFloat(Dims.CTS.Value);
            } 

            if (Dims.hasOwnProperty('TAR')){
                TAR = parseFloat(Dims.TAR.Value);
            } 

            if (Dims.hasOwnProperty('CRP')){
                CRP = parseFloat(Dims.CRP.Value);
            } 

            if (Dims.hasOwnProperty('BA')){
                BA = parseFloat(Dims.BA.Value);
            } 

            if (Dims.hasOwnProperty('FOA')){
                FOA = parseFloat(Dims.FOA.Value);
            } 

            if (Dims.hasOwnProperty('SBT2')){
                SBT2 = parseFloat(Dims.SBT2.Value);
            } 

            if (Dims.hasOwnProperty('ACO')){
                ACO = parseFloat(Dims.ACO.Value);
            } 

            SeatGeometryArr = [];
            ArmrestGeometryArr = [];

            var SeatOffset = 0
            for (var j=0; j<seat_pax; j++){
                var CW = 17;
                var q = 4;

                if (Dims.hasOwnProperty('CW' + (j+1))){
                    CW = parseFloat(Dims['CW' + (j+1)].Value);
                }

                if (Dims.hasOwnProperty('q' + (j+1))){
                    CW = parseFloat(Dims['q' + (j+1)].Value);
                }

                SeatGeometryArr.push(['M',-CTS+SeatRad,-TAR+q/2 + SeatOffset]);
                SeatGeometryArr.push(['A',SeatRad,SeatRad,0,0,1,-CTS,-TAR+q/2+SeatRad + SeatOffset]);
                SeatGeometryArr.push(['L',-CTS,-TAR+q/2+CW-q/2-SeatRad + q/2 + SeatOffset]);
                SeatGeometryArr.push(['A',SeatRad,SeatRad,0,0,1,-CTS+SeatRad,-TAR+CW+q/2 + SeatOffset]);
                SeatGeometryArr.push(['L',CRP-SeatRad, -TAR+q/2+CW + SeatOffset]);
                SeatGeometryArr.push(['A',SeatRad,SeatRad,0,0,1,CRP, -TAR+q/2+CW-SeatRad + SeatOffset]);
                SeatGeometryArr.push(['L',CRP, -TAR+q/2+SeatRad + SeatOffset]);
                SeatGeometryArr.push(['A',SeatRad,SeatRad,0,0,1,CRP-SeatRad, -TAR+q/2 + SeatOffset]);
                SeatGeometryArr.push(['L',-CTS+SeatRad,-TAR+q/2 + SeatOffset]);
                SeatGeometryArr.push(['Z']);

                SeatGeometryArr.push(['M',CRP+SeatRad,-TAR+q/2 + SeatOffset]); 
                SeatGeometryArr.push(['A',SeatRad,SeatRad,0,0,1,CRP,-TAR+q/2+SeatRad + SeatOffset]);
                SeatGeometryArr.push(['L',CRP,-TAR+q/2+CW-SeatRad + SeatOffset]);
                SeatGeometryArr.push(['A',SeatRad,SeatRad,0,0,1, CRP+SeatRad, -TAR+q/2+CW + SeatOffset]);
                SeatGeometryArr.push(['L',SBT2 - SeatRad ,-TAR+q/2+CW + SeatOffset]);
                SeatGeometryArr.push(['A',SeatRad,SeatRad,0,0,1, SBT2, -TAR + q/2 + CW - SeatRad + SeatOffset]);
                SeatGeometryArr.push(['L',SBT2,-TAR + q/2 + SeatRad+ SeatOffset]);
                SeatGeometryArr.push(['A',SeatRad,SeatRad,0,0,1, SBT2 - SeatRad,-TAR+q/2 + SeatOffset]);
                SeatGeometryArr.push(['L',CRP+SeatRad,-TAR+q/2 + SeatOffset]);
                SeatGeometryArr.push(['Z']);
                SeatOffset += CW;
            }
            //alert("Out of Cushions");
            var SeatPath = FlipGeoArr(SeatGeometryArr,-BL); // Note: BL is flipped here because the geometry for the seat is defined for a RH seat

            // Create Armrest Geometry
            ArmrestGeometryArr = [];
            SeatOffset = 0
            for (var j=0; j<seat_pax+1; j++){
                var CW = 17;
                var q = 4;

                if (Dims.hasOwnProperty('CW' + (j+1))){
                    CW = parseFloat(Dims['CW' + (j+1)].Value);
                }

                if (Dims.hasOwnProperty('q' + (j+1))){
                    CW = parseFloat(Dims['q' + (j+1)].Value);
                }

                ArmrestGeometryArr.push(['M',-FOA,-TAR + SeatOffset]);
                ArmrestGeometryArr.push(['L',-FOA,-TAR+q + SeatOffset]);
                ArmrestGeometryArr.push(['L',BA,-TAR+q + SeatOffset]);
                ArmrestGeometryArr.push(['L',BA,-TAR + SeatOffset]);
                ArmrestGeometryArr.push(['L',-FOA,-TAR + SeatOffset]);
                ArmrestGeometryArr.push(['Z']);
                SeatOffset += CW;
            }
            //alert("Out of Armrests");
            var ArmrestPath = FlipGeoArr(ArmrestGeometryArr,-BL); // Note: BL is flipped here because the geometry for the seat is defined for a RH seat

            //alert("Into Simple");
            // create geometry for the simplified seat
            SimpleSeatGeometryArr = [];
            SimpleSeatGeometryArr.push(['M',-CTS,-TAR]);
            SimpleSeatGeometryArr.push(['L',-CTS,ACO]);
            SimpleSeatGeometryArr.push(['L',SBT2,ACO]);
            SimpleSeatGeometryArr.push(['L',SBT2,-TAR]);
            SimpleSeatGeometryArr.push(['Z']);
            //alert("Out of Simple");
            var SimpleSeatPath = FlipGeoArr(SimpleSeatGeometryArr,-BL); // Note: BL is flipped here because the geometry for the seat is defined for a RH seat

            // stick these values in for all seat instances with this part number
            for (var j=0; j<Seats.length; j++){
                if (Seats[j].PartNumber == Seats[i].PartNumber){
                    Seats[j].SeatPath = SeatPath;
                    Seats[j].ArmrestPath = ArmrestPath;
                    Seats[j].SimpleSeatPath = SimpleSeatPath;
                }
            }

        }
    }
} 
```

我认为这也可能是一种竞争条件，所以我厌倦了使用`window.setTimeout(functionThatBreaks,1)`它来确保它在加载依赖项时执行，但无济于事。弹出相同的错误并且FF死了。除了用户交互来尝试确定它是否是竞争条件之外，我还能做些什么吗？

**编辑 4-17-2013，太平洋标准时间下午 2:00** 我修改了上面的代码以显示根据 lib3d 和 TheBrain 的建议所做的更改。我还尝试将其设为常规函数而不是对象原型，但行为仍然没有变化。

我也刚刚发现了一些奇怪的东西。如果我为该网站启用了 FireBug，它运行良好。如果我禁用 FireBug，那么 FireFox 就会崩溃。我现在完全糊涂了。

**编辑 2013 年 4 月 17 日 4:05 PST** 事实证明我错了 FireBug 导致的问题。我可以关闭浏览器，通过从计算机上的文件夹打开 html 页面重新打开它，它会失败。我只能在 Firefox 失败对话框中单击“关闭窗口”，然后打开同一个 html 页面，然后它就可以正常工作了。

什么可能导致这种行为？

# html - Django中的文件上传

> ID：16049417
> 
> 赞同：1
> 
> 时间：2013-04-17T00:21:57.507
> 
> 标签：html, django, forms

我正在寻找一种从使用 Django 构建的网页上传文件的方法，但*不*使用 django 表单，即`from django import forms`.

为什么？只是因为我无法理解为什么我们需要这样的东西。我很确定可以处理通过表单上传的文件，就像我们可以处理通过表单提交的其他 POST 数据一样。

作为旁注，如果有人能告诉我使用 django 表单背后的逻辑，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:09:12.670

每个文档：[https ://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.FILES](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.FILES)

如果请求包含文件上传，request.FILES 将包含 UploadedFile 类的实例，允许您读取从客户端收到的数据。

* * *

通常，您应该使用 Django Forms，因为它们使维护依赖它们的表单和视图变得更简单。当然，如果您的表单将只包含一个字段，一开始它可能看起来有点矫枉过正，但不用担心，最终，在视图中自定义表单验证和清理的两行代码要小得多（因此更容易维护）永远是。

最大的好处是关注点分离：因为你的表单是独立的类，它可以被多个视图重用，也可以使用 Python 的继承轻松扩展，并且可以与视图分开测试。

这也以相反的方式起作用，因为所有表单的创建和验证逻辑都位于其他地方，从而使您的视图更易于理解。

一旦你学会了表单 API，用 Django 方式编写表单最终会比直接从视图中处理 request.POST 更快、更简单。Django 表单为您处理传入数据并执行基本的清理和验证以及类型强制。如果没有它们，您将不得不自己花时间编写用于表单清理、验证和错误处理的样板。

Django Forms 还提供了“钩子”，用于在验证和清理数据时将额外代码挂接到表单，从而允许您在字段接收值时做额外的事情。甚至还有 model.Form 允许您从模型生成表单，从而为您节省更多时间。

感谢 Django Forms，您可以专注于

当我们在这里时，您还应该阅读以下内容： [https://docs.djangoproject.com/en/dev/ref/contrib/csrf/](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/) [https://docs.djangoproject.com/en/dev/topics /http/decorators/#django.views.decorators.http.require_POST](https://docs.djangoproject.com/en/dev/topics/http/decorators/#django.views.decorators.http.require_POST)

这些是必须知道的，以保护您的表单免受基本类型的攻击。

# php - 从 wordpress 的帖子页面中获取 Youtube 嵌入代码

> ID：16049420
> 
> 赞同：0
> 
> 时间：2013-04-17T00:22:50.413
> 
> 标签：php, wordpress, youtube

我需要以某种方式从帖子页面中获取嵌入代码，以便我可以在存档页面中包含一个小视频版本。基本上，我不想显示典型的特色图像和摘录，而是想包含一个小版本的视频，加上摘录。类似于 Youtube 搜索结果页面。问题是，我相信视频代码在 get_the_content();

这是在filters.php

```
function ar2_add_embed_container( $html ) {

    return '<div class="entry-embed">' . $html . '</div>';

}

add_filter( 'embed_oembed_html', 'ar2_add_embed_container' ); 
```

我该如何使用它？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:08:08.493

谢谢brasolfilo，您的建议使我朝着正确的方向前进。

我认为嵌入是自动的自定义“视频”字段。不是这种情况。对于希望为视频存档页面获取视频的任何人，您首先需要在您的帖子上创建此自定义字段

**第 1 步：**阅读此 [http://codex.wordpress.org/Custom_Fields](http://codex.wordpress.org/Custom_Fields)

基本上你正在创建你的自定义字段（我命名了我的视频，你可以随便命名）

**第 2 步：**在您的循环中

```
 while ( have_posts() ) : the_post();

        $id = $post->ID;

        $video_url = get_post_meta($id, 'video', true);

        echo wp_oembed_get( $video_url, array( 'width' => 400 ) );

    endwhile; 
```

这是 wp_oembed_get 的法典

[http://codex.wordpress.org/Function_Reference/wp_oembed_get](http://codex.wordpress.org/Function_Reference/wp_oembed_get)

这应该为您提供一个整合到您的模板或其他内容的起点。:)

# git - 目录更改后不会提交

> ID：16049427
> 
> 赞同：0
> 
> 时间：2013-04-17T00:23:22.113
> 
> 标签：git

我在运行 rails 服务器时遇到问题，它没有连接到我的本地主机。我更改了目录的位置，这似乎解决了问题。

现在虽然我似乎无法 git 提交该项目。命令后出现错误： git push origin master

```
fatal: 'origin' does not appear to be a git repository
fatal: Could not read from remote repository

Please make sure you have the correct access rights and the repository exists. 
```

在搜索并尝试了人们列出的多种解决方法后，他们都没有工作，我决定只删除存储库。

现在，当尝试再次发布项目时，我得到了这个：

```
# On branch master
nothing to commit (working directory clean) 
```

在 git init git add 之后。git commit -m "等"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:50:40.147

在您的情况下，消息

```
# On branch master
nothing to commit (working directory clean) 
```

方法：

*   `git init`您在当前目录 ( )中创建了一个全新的 git 存储库
*   您将所有文件（除了 中的文件`.gitignore`）添加到 INDEX ( `git add .`)
*   您已提交添加到 INDEX ( `git commit -m "etc"`)的所有文件

现在您没有任何平移更改，您可以继续修改您的项目。新的更改将被 git ( `git status`) 检测和显示，并且可以以相同的方式提交到存储库

*   `git add .`（或`git add -A .`添加已删除的文件）
*   `git commit -m "..."`

# highcharts - Highcharts 带有间隔的垂直块，如日历

> ID：16049436
> 
> 赞同：0
> 
> 时间：2013-04-17T00:25:04.230
> 
> 标签：highcharts, highstock

是否可以创建一个类似于 iCal 周视图的图表，带有垂直条但根据它们的从/到值在它们之间有一些空间？

我目前在错误的轴上有一个实验性的 jsfiddle，我想颠倒一下：在 x 轴上有工作日，在 y 轴上有小时。然后你每天都会得到一些垂直块，它们之间有间隔。但是将值从 y 轴映射到 x 轴（反之亦然）不起作用。有人有建议来实现这一目标吗？

看看我的[Jsfiddle](http://goo.gl/5mW1l)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:36:43.003

如果您使用 Highcharts 而不是 HighStock，您可以为图表选项指定 'inverted:true'：

```
var chart = new Highcharts.Chart({

chart: {
    renderTo: 'container',
    inverted:true
}, 
```

[http://jsfiddle.net/4Vcn9/](http://jsfiddle.net/4Vcn9/)

不过，这不适用于 highstock，因此如果您需要底部的范围选择器，我认为您将不得不自己反转您的数据。

# python - 以类似字典的方式将新项目添加到某个结构化数组

> ID：16049437
> 
> 赞同：4
> 
> 时间：2013-04-17T00:25:11.150
> 
> 标签：python, numpy

我想在 numpy 中扩展结构化数组对象，以便我可以轻松添加新元素。

例如，对于一个简单的结构化数组

```
>>> import numpy as np
>>> x=np.ndarray((2,),dtype={'names':['A','B'],'formats':['f8','f8']})
>>> x['A']=[1,2]
>>> x['B']=[3,4] 
```

我想轻松地添加一个新元素`x['C']=[5,6]`，但随后出现与未定义名称相关的错误`'C'`。

只需添加一个新方法即可`np.ndarray`：

```
import numpy as np
class sndarray(np.ndarray):
    def column_stack(self,i,x):
        formats=['f8']*len(self.dtype.names)
        new=sndarray(shape=self.shape,dtype={'names':list(self.dtype.names)+[i],'formats':formats+['f8']})
        for key in self.dtype.names:
            new[key]=self[key]

        new[i]=x

        return new 
```

然后，

```
>>> x=sndarray((2,),dtype={'names':['A','B'],'formats':['f8','f8']})
>>> x['A']=[1,2]
>>> x['B']=[3,4]
>>> x=x.column_stack('C',[4,4])
>>> x
sndarray([(1.0, 3.0, 4.0), (2.0, 4.0, 4.0)], 
  dtype=[('A', '<f8'), ('B', '<f8'), ('C', '<f8')]) 
```

有什么方法可以像字典一样添加新元素？例如

```
>>> x['C']=[4,4]
>>> x
sndarray([(1.0, 3.0, 4.0), (2.0, 4.0, 4.0)], 
  dtype=[('A', '<f8'), ('B', '<f8'), ('C', '<f8')]) 
```

更新：

通过使用`__setitem__`，我离理想的解决方案还有一步之遥，因为我不知道如何：

> 更改 self 引用的对象

```
import numpy as np

class sdarray(np.ndarray):
    def __setitem__(self, i,x):
    if i in self.dtype.names:
        super(sdarray, self).__setitem__(i,x)
    else:
        formats=['f8']*len(self.dtype.names)
        new=sdarray(shape=self.shape,dtype={'names':list(self.dtype.names)+[i],'formats':formats+['f8']})
        for key in self.dtype.names:
           new[key]=self[key]

        new[i]=x

        self.with_new_column=new 
```

然后

```
>>> x=sndarray((2,),dtype={'names':['A','B'],'formats':['f8','f8']})
>>> x['A']=[1,2]
>>> x['B']=[3,4]
>>> x['C']=[4,4]
>>> x=x.with_new_column #extra uggly step!
>>> x
sndarray([(1.0, 3.0, 4.0), (2.0, 4.0, 4.0)], 
  dtype=[('A', '<f8'), ('B', '<f8'), ('C', '<f8')]) 
```

**更新 2** 在选择的答案中正确实施后，我发现问题已经被`pandas` `DataFrame`对象解决了：

```
>>> import numpy as np
>>> import pandas as pd
>>> x=np.ndarray((2,),dtype={'names':['A','B'],'formats':['f8','f8']})
>>> x=pd.DataFrame(x)
>>> x['A']=[1,2]
>>> x['B']=[3,4]
>>> x['C']=[4,4]
>>> x
   A  B  C
0  1  3  4
1  2  4  4
>>> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T22:57:12.087

改用`numpy.recarray`，在我的子类中，`numpy 1.6.1`你会得到一个额外的方法`field`，当你从`numpy.ndarray`.

[这个问题](https://stackoverflow.com/questions/1201817/adding-a-field-to-a-structured-numpy-array)或[这个问题（如果使用 numpy 1.3）](https://stackoverflow.com/questions/5288736/adding-a-field-to-a-structured-numpy-array-2)还讨论了将字段添加到`structured array`. 从那里你会看到使用：

```
import numpy.lib.recfunctions as rf
rf.append_fields( ... ) 
```

可以大大简化你的生活。乍一看，我认为这个函数会附加到原始数组，但它创建了一个新实例。下面`class`显示的是使用您的解决方案`__setitem__()`，效果很好。

您发现的导致您找到丑陋解决方案的问题已[在另一个问题中报告](https://stackoverflow.com/questions/5149269/subclassing-numpy-ndarray-problem)。问题是当你这样做时，`self=...` 你只是将`new`对象存储在一个变量中，但实体`sdarray`没有被更新。也许可以直接`class`从其方法内部销毁和重建，但基于[该](https://stackoverflow.com/questions/5149269/subclassing-numpy-ndarray-problem)讨论`class`可以创建以下内容，其中`ndarray`不是子类，而是在内部存储和调用。添加了一些其他方法以使其工作并看起来像您直接使用`ndarray`. 我没有详细测试它。

对于自动调整大小，[这里提出了一个很好的解决方案](https://stackoverflow.com/questions/6405342/automatically-resizing-numpy-recarray)。您也可以将其合并到您的代码中。

```
import numpy as np

class sdarray(object):
    def __init__(self, *args, **kwargs):
        self.recarray =  np.recarray( *args, **kwargs)

    def __getattr__(self,attr):
        if hasattr( self.recarray, attr ):
            return getattr( self.recarray, attr )
        else:
            return getattr( self, attr )

    def __len__(self):
        return self.recarray.__len__()

    def __add__(self,other):
        return self.recarray.__add__(other)

    def __sub__(self,other):
        return self.recarray.__sub__(other)

    def __mul__(self,other):
        return self.recarray.__mul__(other)

    def __rmul__(self,other):
        return self.recarray.__rmul__(other)

    def __getitem__(self,i):
        return self.recarray.__getitem__(i)

    def __str__(self):
        return self.recarray.__str__()

    def __repr__(self):
        return self.recarray.__repr__()

    def __setitem__(self, i, x):
        keys = []
        formats = []
        if i in self.dtype.names:
            self.recarray.__setitem__(i,x)
        else:
            for name, t in self.dtype.fields.iteritems():
                keys.append(name)
                formats.append(t[0])
            keys.append( i )
            formats.append( formats[-1] )
            new = np.recarray( shape = self.shape,
                              dtype = {'names'  : keys,
                                       'formats': formats} )
            for k in keys[:-1]:
                new[k] = self[k]
            new[i] = x
            self.recarray = new 
```

# javascript - 未捕获的类型错误：对象 [对象对象] 没有方法“提交”

> ID：16049441
> 
> 赞同：1
> 
> 时间：2013-04-17T00:25:25.993
> 
> 标签：javascript, jquery

当我尝试将 ajaxSubmit 添加到我的表单时，我收到错误“Uncaught TypeError: Object [object Object] has no method 'submit'”。

jQuery代码：

```
 $(document).ready(function() {
    var options = {
        beforeSubmit:  showRequest,
        success:       showResponse
    };

    $('#bform').submit(function() {
        $(this).ajaxSubmit(options);
        return false;
    });
});

function showRequest(formData, jqForm, options) {
    var queryString = $.param(formData);
    alert('About to submit: \n\n' + queryString);
    return true;
}

function showResponse(responseText, statusText, xhr, $form)  {
    alert('status: ' + statusText + '\n\nresponseText: \n' + responseText +
            '\n\nThe output div should have already been updated with the responseText.');
} 
```

表单 HTML：

```
<form id="bform" action="/rest/submit_byte" method="post">
    <label for="submitted_byte">Submit a Byte:</label>
    <textarea id="submitted_byte" name="submitted_byte" style="margin: 2px; width: 385px; height: 201px;"></textarea>
    <input type="submit" id="submit_button" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T00:40:09.033

您的代码对我有用... [http://dev.orangedigital.com.au/test/stack/2013-04-17/](http://dev.orangedigital.com.au/test/stack/2013-04-17/)

我还必须为 ajaxSubmit 方法添加 jQuery Form 插件：http: [//jquery.malsup.com/form/](http://jquery.malsup.com/form/)

# ios - iOS导航栏中的多个按钮通过Interface Builder？

> ID：16049442
> 
> 赞同：10
> 
> 时间：2013-04-17T00:25:26.727
> 
> 标签：ios

我知道 iOS 5 增加了设置多个左右按钮的功能，但是这可以通过 Interface Builder 来完成吗？每当我尝试将一个条形按钮项拖动到导航栏时，它只允许一个在右侧，一个在左侧。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T01:18:41.953

更新：Xcode 7 添加多按钮支持。

只需将栏按钮项拖到导航栏，如果视图控制器没有导航项，您可能需要先添加一个导航项。

[![演示](https://i.stack.imgur.com/AvEmx.gif)](https://i.stack.imgur.com/AvEmx.gif)

* * *

您可以将 UIView 拖到导航栏，然后将两个 UIButton 添加到该视图。

无法通过界面生成器直接添加两个 UIBarButtonItem。但是你可以通过代码来实现。喜欢`[UINavigationItem setRightBarButtonItems:animated:]`。

# ruby-on-rails - 由于在我的工厂中使用“序列”，如何避免使用“FactoryGirl.reload”？

> ID：16049443
> 
> 赞同：0
> 
> 时间：2013-04-17T00:25:39.483
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, factory-bot, rspec-rails

必须使用`FactoryGirl.reload`可能会增加运行所有测试所需的时间（当存在许多测试时），并且它也被描述为[Anti-Pattern](http://robots.thoughtbot.com/post/10983530140/getting-sequential-a-look-into-a-factory-girl)。

如何继续使用唯一字段的排序，同时测试正确的值？

你可以在我的代码中看到...

*   我必须打电话`FactoryGirl.reload`，以便增量开始，`1`以防任何先前的测试已经运行。

*   我必须说明，`:count => 1`因为该值只会有一个实例。

**规格/工厂/clients.rb**

```
FactoryGirl.define do
  factory :client do
    name                "Name"
    sequence(:email}    { |n| "email#{n}@example.com" }
    sequence(:username) { |n| "username#{n}" }
  end
end 
```

**规范/客户端/index.html.erb_spec.rb**

```
require 'spec_helper'

describe "clients/index" do
  before do
    FactoryGirl.reload
    (1..5).each do
      FactoryGirl.create(:client)
    end
    @clients = Client.all
  end

  it "renders a list of clients" do
    render
    # Run the generator again with the --webrat flag if you want to use webrat matchers
    assert_select "tr>td", :text => "Name".to_s, :count => 5
    assert_select "tr>td", :text => "email1@example.com".to_s, :count => 1
    assert_select "tr>td", :text => "username1".to_s, :count => 1
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:13:38.747

为这个特定的测试传递特殊名称怎么样？

```
require 'spec_helper'

describe "clients/index" do
  before do
    (1..5).each do |num|
      FactoryGirl.create(:client, username: "special#{num}")
    end
    @clients = Client.all
  end

  it "renders a list of clients" do
    render
    assert_select "tr>td", :text => "special1".to_s, :count => 1
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:05:35.647

添加到 mind.blank 的答案...如果您希望测试增量值，请将它们也放在增量循环中。

```
 it "renders a list of clients" do
    render
    (1..5).each do |num|
      assert_select "tr>td", :text => "special#{num}".to_s, :count => 1
    end
  end 
```

# tcp - TCP 握手失败

> ID：16049448
> 
> 赞同：0
> 
> 时间：2013-04-17T00:26:19.977
> 
> 标签：tcp, gridgain

我正在尝试在 gridgain 2.1.1 上连接 500 个节点。和 Windows Server 2008 R2 标准，但拓扑仅识别 100 个左右的节点，并出现以下错误。有什么建议么？

```
13/04/16 19:01:01.472 [INFO ] [main] [***GridTcpCommunicationSpi] Failed to bind to local port (will try next port within range) [port=20000, localHost=***calc007/10.***.19.77]
13/04/16 19:01:01.472 [INFO ] [main] [***GridTcpCommunicationSpi] Failed to bind to local port (will try next port within range) [port=20001, localHost=***calc007/10.***.19.77]
13/04/16 19:01:01.472 [INFO ] [main] [***GridTcpCommunicationSpi] Failed to bind to local port (will try next port within range) [port=20002, localHost=***calc007/10.***.19.77]
13/04/16 19:01:01.472 [INFO ] [main] [***GridTcpCommunicationSpi] Failed to bind to local port (will try next port within range) [port=20003, localHost=***calc007/10.***.19.77]
13/04/16 19:01:01.472 [INFO ] [main] [***GridTcpCommunicationSpi] Failed to bind to local port (will try next port within range) [port=20004, localHost=***calc007/10.***.19.77]
13/04/16 19:01:01.472 [INFO ] [main] [***GridTcpCommunicationSpi] Failed to bind to local port (will try next port within range) [port=20005, localHost=***calc007/10.***.19.77]
13/04/16 19:01:01.472 [INFO ] [main] [***GridTcpCommunicationSpi] Failed to bind to local port (will try next port within range) [port=20006, localHost=***calc007/10.***.19.77]
13/04/16 19:01:01.472 [INFO ] [main] [***GridTcpCommunicationSpi] Failed to bind to local port (will try next port within range) [port=20007, localHost=***calc007/10.***.19.77]
13/04/16 19:01:01.472 [INFO ] [main] [***GridTcpCommunicationSpi] Failed to bind to local port (will try next port within range) [port=20008, localHost=***calc007/10.***.19.77]
13/04/16 19:01:01.472 [INFO ] [main] [***GridTcpCommunicationSpi] Successfully bound to TCP port: 20009
13/04/16 19:01:01.472 [INFO ] [main] [***GridTcpCommunicationSpi] Using parameter [localAddr=null]
13/04/16 19:01:01.472 [INFO ] [main] [***GridTcpCommunicationSpi] Using parameter [msgThreads=5]
13/04/16 19:01:01.472 [INFO ] [main] [***GridTcpCommunicationSpi] Using parameter [localPort=20000]
13/04/16 19:01:01.472 [INFO ] [main] [***GridTcpCommunicationSpi] Using parameter [localPortRange=9999]
13/04/16 19:01:01.472 [INFO ] [main] [***GridTcpCommunicationSpi] Using parameter [idleConnTimeout=30000]
13/04/16 19:01:01.472 [INFO ] [main] [***GridTcpCommunicationSpi] Using parameter [directBuf=true]
13/04/16 19:01:01.487 [INFO ] [main] [***GridTcpCommunicationSpi] SPI started ok [startMs=15, spiMBean=org.gridgain:group=SPIs,name=***GridTcpCommunicationSpi]
13/04/16 19:01:01.597 [INFO ] [main] [***GridMulticastDiscoverySpi] Using parameter [mcastGroup=239.***.201.1]
13/04/16 19:01:01.597 [INFO ] [main] [***GridMulticastDiscoverySpi] Using parameter [mcastPort=30000]
13/04/16 19:01:01.597 [INFO ] [main] [***GridMulticastDiscoverySpi] Using parameter [tcpPort=30001]
13/04/16 19:01:01.597 [INFO ] [main] [***GridMulticastDiscoverySpi] Using parameter [localPortRange=9999]
13/04/16 19:01:01.597 [INFO ] [main] [***GridMulticastDiscoverySpi] Using parameter [beatFreq=3000]
13/04/16 19:01:01.597 [INFO ] [main] [***GridMulticastDiscoverySpi] Using parameter [maxMissedBeats=10]
13/04/16 19:01:01.597 [INFO ] [main] [***GridMulticastDiscoverySpi] Using parameter [leaveAttempts=10]
13/04/16 19:01:01.597 [INFO ] [main] [***GridMulticastDiscoverySpi] Using parameter [localHost=10.***.19.77]
13/04/16 19:01:01.597 [INFO ] [main] [***GridMulticastDiscoverySpi] Using parameter [ttl=8]
13/04/16 19:01:01.597 [INFO ] [main] [***GridMulticastDiscoverySpi] Failed to bind to local TCP port (will try next port within range): 30001
13/04/16 19:01:01.597 [INFO ] [main] [***GridMulticastDiscoverySpi] Failed to bind to local TCP port (will try next port within range): 30002
13/04/16 19:01:01.597 [INFO ] [main] [***GridMulticastDiscoverySpi] Failed to bind to local TCP port (will try next port within range): 30003
13/04/16 19:01:01.597 [INFO ] [main] [***GridMulticastDiscoverySpi] Failed to bind to local TCP port (will try next port within range): 30004
13/04/16 19:01:01.597 [INFO ] [main] [***GridMulticastDiscoverySpi] Failed to bind to local TCP port (will try next port within range): 30005
13/04/16 19:01:01.597 [INFO ] [main] [***GridMulticastDiscoverySpi] Failed to bind to local TCP port (will try next port within range): 30006
13/04/16 19:01:01.597 [INFO ] [main] [***GridMulticastDiscoverySpi] Failed to bind to local TCP port (will try next port within range): 30007
13/04/16 19:01:01.597 [INFO ] [main] [***GridMulticastDiscoverySpi] Failed to bind to local TCP port (will try next port within range): 30008
13/04/16 19:01:01.597 [INFO ] [main] [***GridMulticastDiscoverySpi] Failed to bind to local TCP port (will try next port within range): 30009
13/04/16 19:01:01.597 [INFO ] [main] [***GridMulticastDiscoverySpi] Successfully bound to TCP port: 30010
13/04/16 19:01:01.721 [INFO ] [main] [***GridMulticastDiscoverySpi] Successfully bound to Multicast port: 30000
13/04/16 19:01:01.737 [INFO ] [main] [***GridMulticastDiscoverySpi] Local node: GridMulticastDiscoveryNode [id=b8136fca-19db-4b81-8b91-317fea516aba, state=READY, lastHeartbeat=1366106461721, addr=***calc007/10.***.19.77, tcpPort=30010, startTime=1366106461597]
13/04/16 19:01:01.737 [INFO ] [main] [***GridMulticastDiscoverySpi] Waiting for initial heartbeat timeout (3000 milliseconds)
13/04/16 19:01:02.782 [WARN ] [grid-mcast-disco-tcp-handshake-sender-#37%null] [***GridMulticastDiscoverySpi] Failed to connect to node (did the node stop?) [addr/10.***.19.118, port=30004, error=Connection refused: connect]. Make sure that destination node is alive and has properly configured firewall that allows GridGain incoming traffic (especially on Windows Vista).
java.net.ConnectException: Connection refused: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.(Socket.java:425)
    at java.net.Socket.(Socket.java:319)
    at org.gridgain.grid.spi.discovery.multicast.GridMulticastDiscoverySpi$TcpHandshakeSender.body(GridMulticastDiscoverySpi.java:1364)
    at org.gridgain.grid.spi.GridSpiThread.run(GridSpiThread.java:96)
13/04/16 19:01:02.798 [WARN ] [grid-mcast-disco-tcp-handshake-sender-#42%null] [***GridMulticastDiscoverySpi] Failed to connect to node (did the node stop?) [addr/10.***.19.80, port=30007, error=Connection refused: connect]. Make sure that destination node is alive and has properly configured firewall that allows GridGain incoming traffic (especially on Windows Vista).
java.net.ConnectException: Connection refused: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.(Socket.java:425)
    at java.net.Socket.(Socket.java:319)
    at org.gridgain.grid.spi.discovery.multicast.GridMulticastDiscoverySpi$TcpHandshakeSender.body(GridMulticastDiscoverySpi.java:1364)
    at org.gridgain.grid.spi.GridSpiThread.run(GridSpiThread.java:96) 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:53:53.347

“addr/10\. *** .19.118, port=30004”上有另一个节点吗？如果该节点已正确启动，请检查您的防火墙设置。首先，请确保禁用软件防火墙。还要确保硬件防火墙允许多播。

# python - Python：如何获得子集排列的列表？

> ID：16049452
> 
> 赞同：3
> 
> 时间：2013-04-17T00:27:07.470
> 
> 标签：python, permutation, combinations

假设我有以下列表：

```
L = [1, 2, 3] 
```

我想得到以下输出：

```
[[1], [2],[3]]
[[1], [2, 3]]
[[2], [1, 3]]
[[3], [1, 2]] 
```

除了我什至不确定我是否正确地表达了这个问题。它基本上就像不重复的排列组？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-17T00:33:16.463

我不清楚您是如何得出输出的（另一个示例或更好的描述可能会有所帮助），但答案可能在于[`itertools`](http://docs.python.org/3/library/itertools.html)，其中包含许多用于处理组合和排列的工具：

```
>>> data = [1, 2, 3]
>>> list(zip(reversed(data), itertools.combinations(data, 2)))
[(3, (1, 2)), (2, (1, 3)), (1, (2, 3))] 
```

# javascript - 如何在 MongoDB 中查找和使用最近的未使用字段名称？

> ID：16049453
> 
> 赞同：0
> 
> 时间：2013-04-17T00:27:10.990
> 
> 标签：javascript, mongodb

我有一个用户文档，用户可以将自己的字段添加到该文档中。默认情况下，这些字段是未命名的（因为用户只需单击一个按钮即可创建它们），但用户可以在创建后通过单独的操作对其进行重命名。

如果我想找到拥有的最近的未命名密钥：（在这种情况下它将是 unnamed-4）并将其插入到文档中，我该怎么做？

或者我应该为此使用更好的数据模型/方法吗？

```
Users.update( id, {
    $set: {
        profile: {
            userfields: {
                owned: {
                  unnamed-1 : "field1",
                  unnamed-2 : "field1",
                  unnamed-3 : "field3",
                  mynamedfield : field 4
            }
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T00:31:33.660

只需使用数组而不是地图来拥有，并在更新时使用 $push 命令，以防您需要添加另一个。

```
Users.update( id, {
$set: {
    profile: {
        userfields: {
            owned: {
              unnamed: [
                "field1",
                "field1",
                "field3" ], 
              named: "field 4"
        }
    }
} 
```

});

```
 db.Users.update(
                { id: id },
                { $push: { 'profiles.userfields.owned.unnamed': 'field4' } }
              ) 
```

# sql-server-2008 - 如何在不重复 group by 子句中的第一列的情况下获得聚合计数？

> ID：16049456
> 
> 赞同：1
> 
> 时间：2013-04-17T00:27:35.880
> 
> 标签：sql-server-2008, tsql, group-by, pivot, i2b2

这个查询迫使我将 f.CONCEPT_CD 放在 group by 子句中，因为我在 select 子句的 case 语句中使用了它。如何在结果集中保留计数，而不用相同的 f.PATIENT_NUM 重复记录？请注意在下面的屏幕截图中如何重复 PATIENT_NUM = 5。如果 PATIENT_NUM = 5，我只想显示一条记录。

```
SELECT 
    f.PATIENT_NUM,  
    CASE WHEN f.CONCEPT_CD = 'BIO|HGT' THEN COUNT(NVAL_NUM) ELSE 0 END AS 'HEIGHT', 
    CASE WHEN f.CONCEPT_CD = 'BIO|WGT' THEN COUNT(NVAL_NUM) ELSE 0 END AS 'WEIGHT', 
    CASE WHEN f.CONCEPT_CD = 'BIO|BMI' THEN COUNT(NVAL_NUM) ELSE 0 END AS 'BMI', 
    CASE WHEN f.CONCEPT_CD = 'BIO|DIA' THEN COUNT(NVAL_NUM) ELSE 0 END AS 'DIA', 
    CASE WHEN f.CONCEPT_CD = 'BIO|SYS' THEN COUNT(NVAL_NUM) ELSE 0 END AS 'SYS' 
  FROM [HIMC_I2B2_LZ-PROD].[dbo].[I2B2_OBSERVATION_FACT] f
  JOIN [HIMC_I2B2_LZ-PROD].[dbo].[I2B2_CONCEPT_DIMENSION] d ON f.CONCEPT_CD = d.CONCEPT_CD 
  GROUP BY f.PATIENT_NUM, f.CONCEPT_CD 
```

![在此处输入图像描述](https://i.stack.imgur.com/j23s6.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T00:31:01.590

```
SELECT  f.PATIENT_NUM,  
        COUNT(CASE WHEN f.CONCEPT_CD = 'BIO|HGT' THEN 1 END) AS 'HEIGHT', 
        COUNT(CASE WHEN f.CONCEPT_CD = 'BIO|WGT' THEN 1 END) AS 'WEIGHT', 
        COUNT(CASE WHEN f.CONCEPT_CD = 'BIO|BMI' THEN 1 END) AS 'BMI', 
        COUNT(CASE WHEN f.CONCEPT_CD = 'BIO|DIA' THEN 1 END) AS 'DIA', 
        COUNT(CASE WHEN f.CONCEPT_CD = 'BIO|SYS' THEN 1 END) AS 'SYS' 
FROM    [HIMC_I2B2_LZ-PROD].[dbo].[I2B2_OBSERVATION_FACT] f
        INNER JOIN [HIMC_I2B2_LZ-PROD].[dbo].[I2B2_CONCEPT_DIMENSION] d 
            ON f.CONCEPT_CD = d.CONCEPT_CD 
GROUP   BY f.PATIENT_NUM 
```

您也可以使用`PIVOT()`sql server 支持的，

```
SELECT  PATIENT_NUM,
        [BIO|HGT] AS 'HEIGHT',
        [BIO|WGT] AS 'WEIGHT',
        [BIO|BMI] AS 'BMI',
        [BIO|DIA] AS 'DIA',
        [BIO|SYS] AS 'SYS'
FROM
    (
        SELECT  f.PATIENT_NUM, f.CONCEPT_CD
        FROM    [HIMC_I2B2_LZ-PROD].[dbo].[I2B2_OBSERVATION_FACT] f
                INNER JOIN [HIMC_I2B2_LZ-PROD].[dbo].[I2B2_CONCEPT_DIMENSION] d 
                    ON f.CONCEPT_CD = d.CONCEPT_CD 
    ) org
    PIVOT
    (
        COUNT(*)
        FOR PATIENT_NUM IN ([BIO|HGT],[BIO|WGT],[BIO|BMI],
                            [BIO|DIA],[BIO|SYS])
    ) pvt 
```

* * *

**更新 1**

```
SELECT  f.PATIENT_NUM,  
        COUNT(CASE WHEN f.CONCEPT_CD = 'BIO|HGT' THEN 1 END) AS 'HEIGHT', 
        COUNT(CASE WHEN f.CONCEPT_CD = 'BIO|WGT' THEN 1 END) AS 'WEIGHT', 
        COUNT(CASE WHEN f.CONCEPT_CD = 'BIO|BMI' THEN 1 END) AS 'BMI', 
        COUNT(CASE WHEN f.CONCEPT_CD = 'BIO|DIA' THEN 1 END) AS 'DIA', 
        COUNT(CASE WHEN f.CONCEPT_CD = 'BIO|SYS' THEN 1 END) AS 'SYS' 
FROM    [HIMC_I2B2_LZ-PROD].[dbo].[I2B2_OBSERVATION_FACT] f
        INNER JOIN [HIMC_I2B2_LZ-PROD].[dbo].[I2B2_CONCEPT_DIMENSION] d 
            ON f.CONCEPT_CD = d.CONCEPT_CD 
GROUP   BY f.PATIENT_NUM
HAVING  COUNT(CASE WHEN f.CONCEPT_CD = 'BIO|HGT' THEN 1 END) >  0 AND
        COUNT(CASE WHEN f.CONCEPT_CD = 'BIO|WGT' THEN 1 END) >  0 AND 
        COUNT(CASE WHEN f.CONCEPT_CD = 'BIO|BMI' THEN 1 END) >  0 AND 
        COUNT(CASE WHEN f.CONCEPT_CD = 'BIO|DIA' THEN 1 END) >  0 AND 
        COUNT(CASE WHEN f.CONCEPT_CD = 'BIO|SYS' THEN 1 END) >  0 
```

# android - 日期范围 Android 应用滑块的最小差异

> ID：16049457
> 
> 赞同：2
> 
> 时间：2013-04-17T00:28:03.290
> 
> 标签：android, slider

我正在使用[Range Seek Bar](https://code.google.com/p/range-seek-bar/)，并且我已经有效地初始化了一个日期范围滑块。如何将滑块设置为具有 10 年的最小范围差异？我的滑块是 1950 年至今的。我只想允许具有最小年差的范围。

这就是我最终所做的：

```
@Override
public void onRangeSeekBarValuesChanged(RangeSeekBar<?> bar, Long minValue, Long maxValue) {

    SimpleDateFormat formatter = new SimpleDateFormat("yyyy", Locale.US);
    int minYear = Integer.parseInt(formatter.format(minValue));
    int maxYear = Integer.parseInt(formatter.format(maxValue));
    //Log.i(getClass().getName(), "User selected new range values: MIN=" + minYear + ", MAX=" + maxYear);

    if ((maxYear - minYear) < 10) {
    //range is less than 10 years so we have to manually set it back.
        if (minValue != previousMin){
            //min is what changed
            mDateRangeSeekBar.setSelectedMinValue(previousMin);
        } else if (maxValue != previousMax) {
            //max is what changed
            mDateRangeSeekBar.setSelectedMaxValue(previousMax);
        }
    } else {
        //range was big enough so set previous values for next time.
        previousMin = minValue;
        previousMax = maxValue;
    }
    mMinDateTemp = new Date(mDateRangeSeekBar.getSelectedMinValue());
    mMaxDateTemp = new Date(mDateRangeSeekBar.getSelectedMaxValue());
    refresh();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:29:51.930

您应该能够使用 onChanged() 回调来检查您的范围的值，如果它太小，则将任何一个值设置回之前的值。

像这样的东西（我没有编译，所以你可能需要修复错字或小逻辑错误对不起）：

```
//declare these in your activity
private int previousMin = -1;
private int previousMax = -1;

seekBar.setOnRangeSeekBarChangeListener(new OnRangeSeekBarChangeListener<Integer>() {
    @Override
    public void onRangeSeekBarValuesChanged(RangeSeekBar<?> bar, Integer minValue, Integer maxValue) {
        // handle changed range values
        Log.i(TAG, "User selected new range values: MIN=" + minValue + ", MAX=" + maxValue);
        if((maxValue - minValue) < 10){
            //range is less than 10 so we have to manually set it back.
            if(minValue != previousMin){
                //min is what changed
                seekBar.setSelectedMinValue(previousMin);
            }
            else if(maxValue != previousMax){
                //max is what changed
                seekBar.setSelectedMaxValue(previousMax);
            }
        }else{
            //range was big enough so set previous values for next time.
            previousMin = minValue;
            previousMax = maxValue;
        }
    }
}); 
```

# breeze - 使用相同的主键删除 1 到（0..1）“子”记录的问题？

> ID：16049458
> 
> 赞同：2
> 
> 时间：2013-04-17T00:28:03.913
> 
> 标签：breeze

例如我们有一个*父*表：

*   ParentID（主键）
*   父类型

...并且根据 ParentType 有一些其他详细信息表，例如*ParentType1Detail*：

*   ParentID（主键）
*   更多特定于类型 1 父级的字段

*Parent*和*ParentType1Detail*都具有相同的 ParentID 主键，形成 1 到 (0..1) 的关系。

现在考虑 Breeze 中的一种情况，我们在缓存中有一个现有的*Parent*和*ParentType1Detail*。用户将*Parent*更改为“Type2”，因此我们要删除*ParentType1Detail*记录。当我们调用 parentType1Detail.entityAspect.setDeleted() 时，Breeze 似乎也返回并将*Parent*实体上的 ParentID 属性清零，从而杀死了父母的主键！

这对于一个正常的关系是有意义的，在这种关系中，*Parent*有 ChildID 属性，详细信息表是键控的，但如果加入属性也是父级主键的一部分，则该属性不起作用。

如果不清楚或已经讨论过，我深表歉意，但我很感激有关如何处理上述问题的任何建议（无需过多地重构数据库）。或者也许 Breeze 可以处理这种情况，而我们的 EF 配置在某种程度上是错误的？

* * *

**更新：破解问题（希望如此）**

埋在*defaultPropertyInterceptor*有以下代码：

```
// update fk data property
if (property.relatedDataProperties) {
    if (!entityAspect.entityState.isDeleted()) {
        var inverseKeyProps = property.entityType.keyProperties;
        inverseKeyProps.forEach(function(keyProp, i ) {
            var relatedDataProp = property.relatedDataProperties[i];
            var relatedValue = newValue ? newValue.getProperty(keyProp.name) : relatedDataProp.defaultValue;
            that.setProperty(relatedDataProp.name, relatedValue);
        });
    }
} 
```

如果相关属性是实体键的一部分，我们插入了一个测试来抑制更改：

```
// update fk data property
if (property.relatedDataProperties) {
    if (!entityAspect.entityState.isDeleted()) {
        var inverseKeyProps = property.entityType.keyProperties;
        inverseKeyProps.forEach(function(keyProp, i ) {
            var relatedDataProp = property.relatedDataProperties[i];

            // Do not trash related property if it is part of that entity's key
            if (newValue || !relatedDataProp.isPartOfKey) {
                var relatedValue = newValue ? newValue.getProperty(keyProp.name) : relatedDataProp.defaultValue;
                that.setProperty(relatedDataProp.name, relatedValue);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:49:09.377

抱歉花了这么长时间才看这个。我喜欢你的修复建议。我将尝试将其合并到 Breeze 的下一个版本中，并在它进入时发回此处。感谢您的贡献:)

# cassandra - 在 Cassandra CQL 3 表定义中，我对静态和动态列混合有多少控制？

> ID：16049461
> 
> 赞同：0
> 
> 时间：2013-04-17T00:28:17.360
> 
> 标签：cassandra, cql3

我试图更好地了解我可以在 CQL3 中实际混合静态和动态列的级别。我在 CQL 3 中创建了一个表来存储用户订阅数据，但我也在测试在表中存储一个tenant_id（带有二级索引）的方法，以便我可以快速识别哪些用户属于哪些租户（租户是用户所属的更高级别的实体）。

我的创建表语句如下，然后是一些虚拟数据插入：

```
cqlsh:demodb> CREATE TABLE subscription_by_user (
              user_id text,
              tenant_id uuid,
              subscription_id int,
              type text,
              distribution int,
              PRIMARY KEY (user_id, subscription_id) );

cqlsh:demodb> CREATE INDEX subscription_ids ON subscription_templates_by_user (tenant_id);

cqlsh:demodb> INSERT INTO subscription_by_user (user_id, tenant_id, subscription_id, type, distribution) VALUES ('user1', f81d4fae-7dec-11d0-a765-00a0c91e6bf6, 2, 'MESSAGE', 4);

cqlsh:demodb> INSERT INTO subscription_by_user (user_id, tenant_id, subscription_id, type, distribution) VALUES ('user2', f81d4fae-7dec-11d0-a765-00a0c91e6bf6, 3, 'TOPIC', 5);

cqlsh:demodb> INSERT INTO subscription_by_user (user_id, tenant_id, subscription_id, type, distribution) VALUES ('user1', f81d4fae-7dec-11d0-a765-00a0c91e6bf6, 3, 'USER', 4); 
```

这一切都很好，我得到了使用 cql 3 API 的期望：

```
cqlsh:demodb> SELECT * FROM subscription_by_user  ;

 user_id | subscription_id | distribution | tenant_id                            | type
---------+-----------------+--------------+--------------------------------------+------------
   user2 |               3 |            5 | f81d4fae-7dec-11d0-a765-00a0c91e6bf6 | TOPIC
   user1 |               2 |            4 | f81d4fae-7dec-11d0-a765-00a0c91e6bf6 | BOARD
   user1 |               3 |            4 | f81d4fae-7dec-11d0-a765-00a0c91e6bf6 | USER 
```

但是，行的底层存储会导致 Cassandra 为每个新订阅复制tenant_id：

```
[default@demodb] list subscription_templates_by_user;
Using default limit of 100
Using default column limit of 100
-------------------
RowKey: user2
=> (column=3:, value=, timestamp=1366150799244000)
=> (column=3:distribution, value=00000005, timestamp=1366150799244000)
=> (column=3:tenant_id, value=f81d4fae7dec11d0a76500a0c91e6bf6, timestamp=1366150799244000)
=> (column=3:type, value=746573742d7479706532, timestamp=1366150799244000)
-------------------
RowKey: user1
=> (column=2:, value=, timestamp=1366150764854000)
=> (column=2:distribution, value=00000004, timestamp=1366150764854000)
=> (column=2:tenant_id, value=f81d4fae7dec11d0a76500a0c91e6bf6, timestamp=1366150764854000)
=> (column=2:type, value=746573742d74797065, timestamp=1366150764854000)
=> (column=3:, value=, timestamp=1366151741325000)
=> (column=3:distribution, value=00000004, timestamp=1366151741325000)
=> (column=3:tenant_id, value=f81d4fae7dec11d0a76500a0c91e6bf6, timestamp=1366151741325000)
=> (column=3:type, value=746573742d74797065, timestamp=1366151741325000) 
```

我的问题是：有没有办法让我（使用 CQL 3）以每行仅列出一次 subscription_id 的方式构造表？如果没有，是否可以使用较旧的 cassandra-cli API 来执行此操作？看起来这将是一个可行的用例，实际上是一个将静态数据与动态数据（即订阅位）混合的问题，但我很可能是错的。我知道 map 和其他 CQL 3 集合类型是这样做的一种方式，但是我必须一次检索整个集合的事实让我有点紧张，我宁愿不将一些复杂的对象序列化到 map 值槽中，如果我可以帮助它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:19:00.573

如果您不需要通过订阅执行范围查询，或者查询“用户X的所有订阅是什么”，那么您可以将其作为分区键的一部分：

```
CREATE TABLE subscription_by_user (
     user_id text,
     tenant_id uuid,
     subscription_id int,
     type text,
     distribution int,
     PRIMARY KEY ((user_id, subscription_id))
); 
```

如果您确实需要其中任何一个，那就把它收起来并承担存储空间的损失；其中大部分将被压缩掉。无论您使用的是 CQL 还是 Thrift，这都是正确的。

# php - 在 PHP 中将“04-17-2013” 转换为“2013-04-17”的最佳方法？

> ID：16049462
> 
> 赞同：2
> 
> 时间：2013-04-17T00:28:28.057
> 
> 标签：php, date, datetime

我有以下内容：

```
$order_date = '04-17-2013';
echo $order_date . "\n";

$order_date = date_create($order_date);
$order_date = date_format($order_date, 'Y-m-d');

echo $order_date; 
```

输出是：

```
before = 04-17-2013
after  = 
```

我以为我有那个工作，但一定是弄错了，因为它现在不工作！

**使用解决方案更新**

```
$date = DateTime::createFromFormat('m-d-Y', $order_date);
$new_date = $date->format('Y-m-d'); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T00:29:16.373

~~$new_date = date('Ymd', strtotime($order_date));~~

这行不通。`m/d/y`或格式中的日期`d-m-y`通过查看各个组件之间的分隔符来消除歧义：如果分隔符是斜杠 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式。[（资源）](http://us3.php.net/manual/en/function.strtotime.php)

```
$new_date = date_create_from_format('m-d-Y', $order_date); 
```

或者

```
$date = DateTime::createFromFormat('m-d-Y', $order_date);
$new_date = $date->format('Y-m-d'); 
```

[看到它在行动](http://codepad.viper-7.com/VlvcNr)

或 PHP 5.5+

```
$new_date = (DateTime::createFromFormat('m-d-Y', $order_date))->format('Y-m-d'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T00:30:11.150

```
date('Y-m-d', strtotime($order_date)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T00:44:51.147

你可以做一个简单的[explode()](http://php.net/manual/en/function.explode.php)：

```
$order_date = '04-17-2013';
list($m, $d, $y) = explode('-', $order_date);
$order_date = $y.'-'.$m.'-'.$d;
echo $order_date; // 2013-04-17 
```

[在线演示](http://codepad.viper-7.com/LGRNgn)。

* * *

一个班轮？

```
$order_date = '04-17-2013';
$order_date = preg_replace('/(\d{2})-(\d{2})-(\d{4})/', '$3-$1-$2', $order_date);
echo $order_date; // 2013-04-17 
```

[在线演示](http://codepad.viper-7.com/tssnRp)。

# c# - Windows Phone 8 的全局页面外观

> ID：16049464
> 
> 赞同：1
> 
> 时间：2013-04-17T00:29:18.623
> 
> 标签：c#, windows-phone-7, xaml, windows-phone-8

无论如何在给定的命名空间（例如，，，`color`等`brush`）`image`中为`windows phone 8`in设置全局页面外观`c#`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:39:23.223

是的。你用`ResourceDictionary`它。在这篇文章中阅读更多关于它们的信息：[关于 WP7 中的 ResourceDictionary 的所有信息](http://www.geekchamp.com/articles/all-about-resourcedictionary-in-wp7)。

通常，这是您用于主题化的内容。看看Jeff Wilcox 的[PhoneThemeManager](http://www.jeff.wilcox.name/2012/01/phonethememanager/)。

# javascript - How can I use contact listener in Box2D with Cocos2D-Javascript?

> ID：16049473
> 
> 赞同：0
> 
> 时间：2013-04-17T00:30:29.793
> 
> 标签：javascript, cocos2d-iphone, listener, box2d

I already implemented all the objects, their velocity, etc. but the Box2D functions are within a Cocos2D inherit function. I can't find a way to create a listener class within this. Does anyone have any idea on how to do this? I can't seem to find the solution in Google. Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:34:03.273

Found it. I can just create a listener inside the function and override its own functions/attributes.

```
var listener = new b2ContactListener    
listener.BeginContact = function (contact) {
  //console.log(contact.GetFixtureA().GetBody().monster);
}
listener.EndContact = function (contact) {
  //console.log(contact.GetFixtureA().GetBody().GetUserData());
}
listener.PostSolve = function (contact, impulse) {

}
listener.PreSolve = function (contact, oldManifold) {

} 
```

Source: [http://blog.sethladd.com/2011/09/box2d-collision-damage-for-javascript.html](http://blog.sethladd.com/2011/09/box2d-collision-damage-for-javascript.html)

# android-ndk - 无法使用 Vitamio Android ffmpeg 库：找不到“__aeabi_llsl”

> ID：16049480
> 
> 赞同：0
> 
> 时间：2013-04-17T00:31:11.267
> 
> 标签：android-ndk, ffmpeg

我完全[按照 vitamio 的指示在 Android 上构建 ffmpeg 库](https://github.com/yixia/FFmpeg-Android)。

编译成功，我得到了 libffmpeg.so，以及几个静态库，如 libavcodec.a、libavformat.a 等。我复制了 libffmpeg.so，以及其他 lib*.a（以防我将使用 lib *.a 稍后）在 jin 文件夹中。

然后我在我的 Android ffmpeg 应用程序的 jni 部分使用它。jni 部分在 C++ 中独立工作。

在 Android.mk 中，我尝试了不同的设置，但总是有错误。Android.mk 设置为：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
include /android-opencv/OpenCV-2.4.2-android-sdk/sdk/native/jni/OpenCV.mk

LOCAL_MODULE    := native_sample
LOCAL_SRC_FILES := jni_part.cpp

LOCAL_C_INCLUDES += $(LOCAL_PATH)/include

LOCAL_LDLIBS += -L$(NDK_PLATFORMS_ROOT)/$(TARGET_PLATFORM)/arch-arm/usr/lib  -L$(LOCAL_PATH)

LOCAL_LDLIBS += -lffmpeg
LOCAL_LDLIBS += -llog -ljnigraphics -lm -lz -ldl -lgcc 
```

错误是：

```
04-16 19:16:46.998: E/AndroidRuntime(10375): FATAL EXCEPTION: main
04-16 19:16:46.998: E/AndroidRuntime(10375): java.lang.UnsatisfiedLinkError: Cannot load library: link_image[1963]:    69 could not load needed library 'libffmpeg.so' for 'libnative_sample.so' (load_library[1105]: Library 'libffmpeg.so' not found) 
```

但是 libffmpeg.so 在文件夹中。

然后我使用另一个设置：

```
LOCAL_LDLIBS += -lavformat  -lavcodec -lswscale -lavutil  -lswresample
LOCAL_LDLIBS += -lgcc -llog -ljnigraphics -lm -lz -ldl 
```

现在错误不同了，是：

```
04-16 19:19:29.777: D/dalvikvm(10419): Trying to load lib /data/data/com.example.andrvideoprocess/lib/libnative_sample.so 0x4051cb60
04-16 19:19:29.787: E/AndroidRuntime(10419): FATAL EXCEPTION: main
04-16 19:19:29.787: E/AndroidRuntime(10419): java.lang.UnsatisfiedLinkError: Cannot load library: reloc_library[1312]:    69 cannot locate '__aeabi_llsl'... 
```

我尝试了这些库的几种不同顺序，它输出相同的错误信息。

我转到文件夹：$(NDK_PLATFORMS_ROOT)/$(TARGET_PLATFORM)/arch-arm/usr/lib（即/usr/src/android-ndk-r8b/platforms/android-14/arch-arm/usr/lib）发现没有libgcc.a

我去一个工具链文件夹（我根据halfninja Android + ffmpeg指令构建），“android-ffmpeg-x264/Project/jni/toolchain/lib/gcc/arm-linux-androideabi/4.6.x-google/armv7-a” ，输入命令：

```
$ nm libgcc.a > output.txt 
```

我在以下信息中找到了 __aeabi_llsl：

```
_ashldi3.o:
00000000 t $a
0000000c N $d
00000000 T __aeabi_llsl
00000000 T __ashldi3 
```

那么我在 Android.mk 中包含以下内容：

```
LOCAL_LDLIBS += -L/android-ffmpeg-x264/Project/jni/toolchain/lib/gcc/arm-linux-androideabi/4.6.x-google/armv7-a 
```

再次编译。同样的错误：无法加载库：

```
reloc_library[1312]:    69 cannot locate '__aeabi_llsl'... 
```

帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:01:01.727

我想我想通了。出于某种原因，此处不能使用 lib*.a。（虽然我找到了churnalbs 使用的版本，但我猜他使用了不同的ndk，可能是ndk5rc）

所以我将 *.o 编译为 libffmpeg.so，并在 Android.mk 中使用 PREBUILT_SHARED_LIBRARY（如何使用，请参见 ndk doc）

```
include $(CLEAR_VARS)
LOCAL_MODULE := ffmpeg_VITAMIO_prebuilt
LOCAL_SRC_FILES := libffmpeg_VITAMIO.so
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/include
include $(PREBUILT_SHARED_LIBRARY)

LOCAL_SHARED_LIBRARIES := ffmpeg_VITAMIO_prebuilt 
```

而且我还需要在java中添加以下内容。

```
System.loadLibrary("ffmpeg_VITAMIO_prebuilt"); 
```

现在，编译工作。

# ruby-on-rails - 回形针不调整图像大小或创建样式目录

> ID：16049482
> 
> 赞同：3
> 
> 时间：2013-04-17T00:31:18.817
> 
> 标签：ruby-on-rails, paperclip

我安装了回形针并正常工作，只是它只保存原始图像，而不是任何调整大小的版本。这不是长宽比保持在命令大小上的问题，Stackoverflow 上有几个修复程序。

我不知道我的代码哪里错了。

模型：

```
has_attached_file :image, styles: { medium: "450x450" },
                            path: ":rails_root/public/system/:attachment/:id/:style/:filename",
                            url: "/system/:attachment/:id/:style/:filename" 
```

迁移文件：

```
class AddAttachmentToPhotos < ActiveRecord::Migration
  def change
    add_attachment :photos, :image
  end
end 
```

第一张图片上传时创建的目录链如下：

`public/system/images/1/original`

这是正确的，除了还应该有一个`public/system/images/1/medium`

我究竟做错了什么？

**编辑：**我正在使用 ruby​​ 1.9.2、rails 3.2 和回形针 3.4.1 是否有任何其他信息可以帮助解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-28T13:23:33.467

从文档（[http://rdoc.info/gems/paperclip/file/README.md#Requirements](http://rdoc.info/gems/paperclip/file/README.md#Requirements)）：

> 必须安装 ImageMagick 并且 Paperclip 必须可以访问它。要确保它确实如此，请在您的命令行上运行`which convert`（ImageMagick 实用程序之一）。这将为您提供安装该实用程序的路径。例如，它可能会返回`/usr/local/bin/convert`.

还要确保将它安装在您的部署机器上，而不仅仅是在您的开发机器上。

如果您安装了它，当您尝试将图像附加到模型时，我们可能需要您的日志片段，如下所示`rails console`：

```
model.image = File.open('image.png')
model.save 
```

# php - 在页面加载时获取用户 ip 并存储在数据库中？

> ID：16049483
> 
> 赞同：1
> 
> 时间：2013-04-17T00:31:27.470
> 
> 标签：php, ip

嗨，我想知道是否有人可以帮忙，我想在我的网站主页的标题标签中包含这段代码，让我了解谁在使用我的网站以及使用频率等。

我想收集用户的 IP 地址并将其存储在数据库中。我正在尝试使用以下 php 和 mysql 代码执行此操作：

```
<?php
//Test if it is a shared client
if (!empty($_SERVER['HTTP_CLIENT_IP'])){
  $ip=$_SERVER['HTTP_CLIENT_IP'];
//Is it a proxy address
}elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])){
  $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
}else{
  $ip=$_SERVER['REMOTE_ADDR'];
}
//The value of $ip at this point would look something like: "192.0.34.166"
$ip = ip2long($ip);
//The $ip would now look something like: 1073732954 

$sql = "INSERT INTO ptb_sessions(user_ip) VALUES('$ip')";
$dbQuery = mysql_query($sql,$dbLink);

?> 
```

这是我的桌子的样子：

ptb_sessions

```
session_id  |  user_id  |  user_ip  | session_start |  session_destroyed 
```

由于某种原因，它不起作用，并且没有值被插入到表中，任何人都可以解释一下我哪里出错了，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T00:46:51.520

**错误报告**

在您的 php 文件顶部添加以下内容：

```
error_reporting(E_ALL);
mysql_error(); 
```

再次运行您的脚本，看看是否出现任何错误。

**字段类型**

如果`user_ip`是`INT`，则从 中删除单引号`('$ip')`：

```
$sql = "INSERT INTO ptb_sessions(user_ip) VALUES($ip)"; 
```

有引号意味着您试图将 存储`ip`为字符串，但实际上数据库需要一个整数。

**笔记**

Using已被弃用，如果您使用[PHP: PDO](http://php.net/manual/en/book.pdo.php)代替`mysql`，您将不会遇到此类问题。

# php - fputcsv 在没有要导出的数据时导出 HTML

> ID：16049486
> 
> 赞同：0
> 
> 时间：2013-04-17T00:31:33.823
> 
> 标签：php, html, csv, fputcsv

我有将数据导出到 CSV 的 SQL 查询。一切正常，直到我在导出中低于一定数量的数据。

当我低于此阈值时，将导出记录，然后是页面的 html。

如果我在 header.html 上添加更多字符，问题就解决了。我已经对此进行了测试和重新测试，html 页面上任何地方的一个文本字符是导出整个 html 或仅导出记录之间的区别。

这听起来太奇怪了，我希望有人经历过类似的事情，并且可以告诉我在哪里看或我应该在这里粘贴代码的哪个特定部分：

这是 fputcsv 部分：

```
if(isset($_SESSION['query_file']))
{
$query = $_SESSION['query_file'];
unset($_SESSION['query_file']);

$stmt = $dbh->query($query);

$results = $stmt->fetchAll();

$link = 'csv/'. Utils::rand_code(10).'.csv' ;

$fp = fopen(SITE_ROOT.$link,'w');
$first_row = array(
    'Name',
    'ID',
    'Email',
    'Response',
    'Phone'
);

fputcsv($fp, $first_row);

foreach($results as $key=>$value)
{

    $array_add = array(
        $value['user_last_name'].''.$value['user_first_name'],
        $value['user_id'],$value['user_email'],$value['user_response'],
        $value['user_phone']
    );

    fputcsv($fp, $array_add);

};

fclose($fp);

header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-Length: ". filesize(SITE_ROOT.$link).";");
header("Content-Disposition: attachment; filename=".$link);
header("Content-Type: application/octet-stream; "); 
header("Content-Transfer-Encoding: binary");

readfile(SITE_ROOT.$link);

unlink(SITE_ROOT.$link);
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:45:39.857

`die();`在调用之后添加一个`unlink(SITE_ROOT.$link);`应该可以防止页面的其余部分执行，从而用 HTML 破坏你的 CSV。

# jquery - 重用现有的 jQuery UI 对话框

> ID：16049489
> 
> 赞同：1
> 
> 时间：2013-04-17T00:31:49.550
> 
> 标签：jquery, jquery-ui, google-chrome-extension

我正在编写一个 chrome 扩展，当用户单击上下文菜单时，它会向页面添加一个弹出窗口。我正在使用 activeTab 权限执行此操作，将脚本注入到获取所选文本的页面上，对其进行一些处理，并将信息添加到页面上的浮动 div 中。这个 div 是一个 jQuery UI 对话框。

问题是，由于 activeTab 的工作方式，我的脚本无法保持任何状态 - 每次单击上下文菜单时，脚本都会重新注入并重新运行。如果我不关闭对话框，我可以毫无困难地向其中添加内容。但是如果我关闭对话框，我希望能够重用已经创建的对话框，但我不知道该怎么做。

这是一些代码：

```
// Creating the dialog
function createDialog() {
  if (!$('#language_study_dialog').exists()) { // exists() just checks length>0
    console.log("Dialog not created; creating now");
    $('body').append('<div id="language_study_dialog" title="Language Study">'
        + '</div>');
    $('#language_study_dialog').dialog({position:
        {my: "left top", at: "left top"}
    });
  }
  $('#language_study_dialog').dialog("open");
}

// Because I don't have any state, I need to call this every time; I don't
// know if the dialog has been created already or not.
// `selection` is defined elsewhere
createDialog();
$('#language_study_dialog').append("<p>Word: " + selection + "</p>"); 
```

如果我运行这个脚本两次，中间没有关闭对话框，一切正常——文本按预期附加，现在额外的元素被添加到 DOM。但是，如果我在此脚本的连续执行之间关闭对话框，则会收到错误 ( `cannot call methods on dialog prior to initialization`)。

另一方面，如果我调用`$('#language_study_dialog').dialog();`而不是上面`dialog("open")`的`createDialog`方法，大多数情况下都可以正常工作，但是每次调用该函数都会将 jQuery UI 对话框内容添加到 DOM，并且有时会因为多个对话框而变得混乱。

是否有一个函数调用来重新初始化现有的 jQuery 对话框？我想我的替代方法是在关闭时删除除内部文本之外的所有内容，并保存一个隐藏的 div，每次运行脚本时我都会将它重新制作成一个对话框。有更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:25:02.523

好的，我想通了，至少有一种方法可以做到。可能还有更好的方法，但这有效。

我不能保留任何本地状态，因为每次单击上下文菜单时都会重新执行脚本。因此，诸如`var dialog = $('#language_study_dialog').dialog()`不起作用之类`dialog`的事情-每次运行脚本时都会重置。但是，我可以将东西存储在`window`. 所以工作代码如下所示：

```
function createDialog() {
  if (window['dialog'] == undefined) {
    console.log("Dialog not created; creating now");
    $('body').append('<div id="language_study_dialog" title="Language Study">'
        + '</div>');
    window['dialog'] = $('#language_study_dialog').dialog({position:
        {my: "left top", at: "left top"}
    });
  }
  window['dialog'].dialog("open");
} 
```

# visual-c++ - 使用 fstream 合并两个已排序的文件

> ID：16049490
> 
> 赞同：1
> 
> 时间：2013-04-17T00:31:50.187
> 
> 标签：visual-c++, merge, ifstream, getline, ofstream

我正在尝试获取两个已排序的文件，每个文件包含 5000 个整数，并将它们组合成一个包含 10000 个已排序整数的文件。我让它工作，除非程序完成一个文件，打印出另一个文件的其余部分。

这是我合并两个文件的方法

```
void mergeFiles(string inFile1, string inFile2, string outFile) {
        ifstream fin(inFile1);
        ifstream fin2(inFile2);
        ofstream fout(outFile);

        string line;
        int i = 1;
        int in2 = 0, in1 = 0;
        if(fin) {
            getline(fin,line);
            in1 = atoi(line.c_str());
        }
        if(fin2) {
            getline(fin2,line);
            in2 = atoi(line.c_str());
        }
        bool first = true;
        while(fin || fin2) {
            if(fin && fin2) {
                if(in2 <= in1) {
                    fout << i++ << ": " << in2 << endl;
                    getline(fin2, line);
                    in2 = atoi(line.c_str());
                }
                else {
                    fout << i++ << ": " << in1 << endl;
                    getline(fin, line);
                    in1 = atoi(line.c_str());
                }
            }
            else {
                            // This is the part giving me trouble
                            // Code Snippets below go here
            }
        }
    } 
```

取决于我使用这个：

```
fout << i++ << ": " << line << endl;
if(fin)
     getline(fin, line);
else if(fin2) 
     getline(fin2, line); 
```

我的输出文件的最后 5 行如下所示：

```
9996: 99933
9997: 99943
9998: 99947
9999: 99947
10000: 99993 
```

或者

```
if(fin)
     getline(fin, line);
else if(fin2) 
     getline(fin2, line);
fout << i++ << ": " << line << endl; 
```

我文件的最后 5 行如下所示：

```
9996: 99933
9997: 99943
9998: 99947
9999: 99993
10000: 99993 
```

我文件的最后 5 行应该是这样的：

```
9996: 99933
9997: 99943
9998: 99947
9999: 99957
10000: 99993 
```

我知道这与从文件中获取下一行和我的算法过程有关。关于如何修复它的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:29:33.937

我解决了这个问题。当文件到达末尾时，我没有输出文件的最后一个整数。我将另一个文件的整数复制了两次，一次是第一个文件结束时，第二次是文件为假时。这是我解决它的方法：

```
 void mergeFiles(string inFile1, string inFile2, string outFile) {
    // Open Files
    ifstream fin(inFile1);
    ifstream fin2(inFile2);
    ofstream fout(outFile);

    string line;                // string to hold line from file
    int i = 1;                  // line counter
    int in2 = 0, in1 = 0;       // ints to hold ints from each file
    if(fin) {                   // if file is open
        getline(fin,line);      // get first line
        in1 = atoi(line.c_str());   // convert to int
    }
    if(fin2) {                  // if file is open
        getline(fin2,line);     // get first line
        in2 = atoi(line.c_str());   // convert to int
    }
    bool first = true;          // bool to catch when a file closes
    while(fin || fin2) {        // if either file is still open
        if(fin && fin2) {       // if both files are still open
            if(in2 <= in1) {    // file 2 has the smaller int
                fout << i++ << ": " << in2 << endl; // print file 2 int to output file
                getline(fin2, line);        // get next line from file 2
                in2 = atoi(line.c_str());   // convert to int
            }
            else {              // file 1 has smaller int
                fout << i++ << ": " << in1 << endl; // print file 1 int to output file
                getline(fin, line);         // get next line from file 1
                in1 = atoi(line.c_str());   // convert to int
            }
        }//endif
        else {      // if one of the files has finished
            if(first) {     // first time through the else
                if(!fin)        fout << i++ << ": " << in2 << endl;     // Depending on which file closed
                else if(!fin2)  fout << i++ << ": " << in1 << endl;     // print the int before printing lines
            }//endif
            else
                fout << i++ << ": " << line << endl;    // don't need to convert just print at this point

            // get the next line from the file that is open
            if(fin)         getline(fin, line); 
            else if(fin2)   getline(fin2, line);

            first = false;  // only print line from now on, don't print in1 or in2
        }// endelse
    }//endwhile
}//endmethod 
```

# javascript - 骨干循环并从嵌套集合中获取价值

> ID：16049492
> 
> 赞同：0
> 
> 时间：2013-04-17T00:32:03.717
> 
> 标签：javascript, jquery, backbone.js, underscore.js, backbone-model

我在访问主干集合中的嵌套值时遇到问题。到目前为止，我已经设法获得了一些价值。这是 html 和 javascript 代码以及我的结果： 代码：http: [//jsfiddle.net/mM2Mk/4/](http://jsfiddle.net/mM2Mk/4/) 结果： [http ://tinypic.com/r/2qn3amu/6](http://tinypic.com/r/2qn3amu/6)

但是，此解决方案中的集合不遵循我实际 api 的结构。我试图开始工作的结构如下所示：

```
teamsCollection = new Standings.Collections.TeamsCollection([
{
    credit: {
        message: "Provided by ",
        link: "",
        logoUrl: ""
    },
    metadata: { },
    groups: [
        {
            labels: [ ],
            standings: [
                {
                    team: {
                        id: 9369,
                        name: "IF Elfsborg",
                        shortName: "Elfsborg",
                        link: ""
                    },
                    stats: [
                        {
                            name: "gp",
                            value: 30
                        },
                        {
                            name: "w",
                            value: 18
                        },
                        {
                            name: "d",
                            value: 5
                        },
                        {
                            name: "l",
                            value: 7
                        },
                        {
                            name: "gf",
                            value: 48
                        },
                        {
                            name: "ga",
                            value: 29
                        },
                        {
                            name: "gd",
                            value: 19
                        },
                        {
                            name: "pts",
                            value: 59
                        }
                    ]
                },
      {
                    team: { 
                        id: 19740,
                        name: "BK Häcken",
                        shortName: "Häcken",
                        link: ""
                    },
                    stats: [
                        {
                            name: "gp",
                            value: 30
                        },
                        {
                            name: "w",
                            value: 17
                        },
                        {
                            name: "d",
                            value: 6
                        },
                        {
                            name: "l",
                            value: 7
                        },
                        {
                            name: "gf",
                            value: 67
                        },
                        {
                            name: "ga",
                            value: 36
                        },
                        {
                            name: "gd",
                            value: 31
                        },
                        {
                            name: "pts",
                            value: 57
                        }
                    ]
                }, 
```

此代码为我们提供了一些运动结果，例如比赛次数、获胜次数、净胜球数等。这只是集合中其他几支球队中的一支。我现在的问题是如何循环嵌套值并显示它们，就像我在我的示例中所做的那样（上面的小网址）。我的目标是获取团队名称以及统计数据并将它们显示在 html 中。以此类推其他团队。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:50:53.623

只需使用模板并使用 foreach 循环遍历您的数组，即可将您的手风琴 HTML 放置到位。

您可以使用已经包含的 Underscore[模板](http://underscorejs.org/#template)，因为 Underscore 是 Backbone 的依赖项。
或者您可以使用其他模板引擎，例如 Handlebars: [source](http://handlebarsjs.com/#iteration)。

两者都给出了如何循环对象的示例。

**编辑：**
让我们做一个随机模板（带下划线，更难）：

```
<script id="myTemplate">
<% _.each(standings, function(standing) { %>
  <a href="<%= standing.team.link %>"><%= standing.team.name %></a><br/>
  <ul>
  <% _.each(standing.stats, function(stat) { %>
    <li><%= stat.name %>: <%= stat.value %></li>
  <% } %>
  </ul>
<% } %>
</script> 
```

然后编译它并用你的 groups[0] 或类似的东西调用它。

```
_.template($('#myTemplate').html(), groups[0]); 
```

或者

```
var myTemplate = _.template($('#myTemplate').html());
myTemplate(groups[0]); 
```

当然，您必须调整这些值，但这就是问题所在。

# php - 没有正确返回 PHP 函数的值？

> ID：16049495
> 
> 赞同：0
> 
> 时间：2013-04-17T00:32:10.817
> 
> 标签：php, mysql, validation

我正在使用一个函数来验证表单的每个部分。对于此特定表格，电话号码是可选条目。所以我想出了以下功能：

```
if(isset($_POST['phone'])) { $phone = $_POST['phone']; }

//Call phone validation function
$phone = validPhone($phone);
if (strlen($phone) == 0) {
    $mistakes[] = 'Your phone number must contain only NUMERIC characters.';
}

    function validPhone($phone) {
        if ($phone != '') {
            $phone = trim($phone);
            if (!ctype_digit(str_replace(' ', '', $phone))) {
                $phone = '';
            } else {
                //accept phone entry and sanitize it
                $phone = mysql_real_escape_string(stripslashes($phone));
            }
        } else {
            $phone = 'not specified';
        }
        return $phone;
    } 
```

我的问题是，当您不为 $phone 输入某些内容时，这一点：

```
else {
    $phone = 'not specified';
} 
```

似乎被跳过了，因为数据库中没有输入任何内容。

以下是相应的数据库PHP：

```
//Insert Into Database
$sql="INSERT INTO signups (phone)
VALUES
(''".$phone."')";

if (!mysql_query($sql)) {
  die('Error: ' . mysql_error());
} 
```

我的意图是每当用户没有输入任何内容时，数据库的条目将是“未指定”的。我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T00:39:00.703

```
if (!empty(trim($phone)) 
```

将匹配 $phone = 0, "", null, false 所以这将是一个包罗万象的

更重要的是，您应该考虑进行测试驱动开发，因为它将提高您的开发速度并减少错误。结帐 PHPUnit - [https://github.com/sebastianbergmann/phpunit/](https://github.com/sebastianbergmann/phpunit/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T00:37:22.153

更改`if ($phone != '') {`为`if (trim($phone) != '') {`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T01:01:47.980

问题的出现是因为比较器松散`==`。

如果`$phone`= `null`（就像没有发布值一样），`$phone == ''`评估为真。因为`''`大致相当于`null`。您要么需要使用严格的比较`===`，要么最好使用`empty()`. 在初始化变量时，我个人会预先处理所有这些事情（包括清理输入值，因为将不安全的数据进一步传递到您的应用程序中是没有意义的。这是我可能建议的：

```
$phone = '';
if (!empty($_POST['phone'])) {
    $phone = mysql_real_escape_string(stripslashes(trim($_POST['phone'])));
}

$phone = validPhone($phone);
if ($phone === '') {
    $mistakes[] = 'Your phone number must contain only NUMERIC characters.';
}

function validPhone($phone) {
    if ($phone === '') {
        return 'not specified';
    } else if (!ctype_digit(str_replace(' ', '', $phone))) {
        return '';
    } else {
        return $phone;
    }
} 
```

此外，您应该真正考虑`mysql_*`用 mysqli 或 PDO 等效项替换代码中已弃用的函数。请注意，您还需要将代码更改为 populate `$mistake`，因为对于 'not specified' 的返回值`$phone`，您不会触发该条件。

# java - 从MDB调用时如何调用具有特定角色的会话bean方法？

> ID：16049496
> 
> 赞同：2
> 
> 时间：2013-04-17T00:32:11.423
> 
> 标签：java, jakarta-ee, ejb, java-ee-6, jaas

我的 Session bean 定义了几个方法。有些只能由 ADMIN 角色访问，有些也可以由 USER 角色访问。

```
@Stateless
@DenyAll
public class MyBean {
  ...
  @RolesAllowed({"ADMIN"})
  public void foo() { ... }

  @RolesAllowed({"ADMIN", "USER"})
  public void bar() { ... }
} 
```

此会话 bean 由消息驱动 bean 调用。

```
@MessageDriven(...)
public class MyListener implements MessageListener {
    public onMessage(Message message) {
        MapMessage msg = (MapMessage) message;
        String role = msg.getString("role");
        String action = msg.getString("action");

        if ("ADMIN".equals(role)) {
            if ("foo".equals(action)) {
                // TODO: call as ADMIN role!
                myBean.foo();
            }
            else if ("bar".equals(action)) {
                // TODO: call as ADMIN!
                myBean.bar();
            }
        }
        else if (role.equals("USER")) {
            if ("foo".equals(action)) {
                // TODO: call as USER role!
                myBean.foo();
            }
            else if ("bar".equals(action)) {
                // TODO: call as USER!
                myBean.bar();
            }                
        }
    }

    @EJB
    MyBean myBean;
} 
```

由于 MDB 没有与之关联的凭据，因此我无法将安全性传播到会话 bean。现在我将用户的角色作为消息的一部分传递。但是我如何执行我指定的角色呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:54:11.447

您可以通过在 MDB 上声明`@RunAs`注释来传播安全上下文。不幸的是，一旦您声明了一个`@RunAs`角色，就不可能以编程方式更改它。这是一个例子：

```
@MessageDriven(...)
@DeclareRoles("ADMIN")
@RunAs("ADMIN")
public class MyListener implements MessageListener {
} 
```

从 MDB 调用会话 bean 的用户必须映射到预期的角色：

```
 <security-role-mapping>
        <role-name>ADMIN</role-name>
        <principal-name>userCallingFromMDB</principal-name>
    </security-role-mapping> 
```

如果您绝对需要传递具有多个角色的用户，您可以尝试使用这些用户创建一个组并使用`@RunAs("GROUP")`（我没有尝试过，但从文档中似乎可以。）

另请参阅这两个链接：

*   [传播安全身份](http://docs.oracle.com/cd/E19226-01/820-7627/bnbyr/index.html)
*   [将角色映射到用户](http://docs.oracle.com/cd/E19226-01/820-7627/bnbxv/index.html)

# python - 清理从文件 python 中读入的字符串

> ID：16049497
> 
> 赞同：1
> 
> 时间：2013-04-17T00:32:46.093
> 
> 标签：python, file-io

我正在尝试读取包含大量值行和相关错误的数据文件，例如：

```
(-5.63150902306 +/- 0.549562002684) * (9.62647766508 +/- 1.00395610402)
(5.92097311289 +/- 0.79652553075) * (5.62917665811 +/- 0.772898764928) / (3.2342 +/- 2.4235) 
```

我已经使用以下内容成功阅读了“片段”：

```
FileSegments = [lin.split( ) for line in File.readlines()] 
```

但我也想同时删除花括号'（''）'......我试过了

```
FileSegments = str([lin.split( ) for line in File.readlines()]).translate(None, ')(') 
```

但是，`[`当我尝试打印它时，它会随机返回！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:37:41.977

你只是把订单有点混杂（也不需要`File.readlines()`

```
[line.translate(None, ')(').split() for line in File] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T00:37:53.333

您可以按照以下方式做一些事情：

```
st='''\
(-5.63150902306 +/- 0.549562002684) * (9.62647766508 +/- 1.00395610402)
(5.92097311289 +/- 0.79652553075) * (5.62917665811 +/- 0.772898764928) / (3.2342 +/- 2.4235)'''

for line in st.splitlines():
    print 'line:',line
    print line.replace('(','').replace(')','') 
```

印刷：

```
line: (-5.63150902306 +/- 0.549562002684) * (9.62647766508 +/- 1.00395610402)
-5.63150902306 +/- 0.549562002684 * 9.62647766508 +/- 1.00395610402
line: (5.92097311289 +/- 0.79652553075) * (5.62917665811 +/- 0.772898764928) / (3.2342 +/- 2.4235)
5.92097311289 +/- 0.79652553075 * 5.62917665811 +/- 0.772898764928 / 3.2342 +/- 2.4235 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T00:41:59.173

如果你想替换括号，你可以简单地调用`.replace()`一个字符串。

```
file_segments = [line.replace('(','').replace(')','').split() for line in fh.readlines()] 
```

有关 的详细信息`replace`，请参阅[字符串替换](http://docs.python.org/2/library/string.html#string.replace)。

你也可以使用`re.sub()`

```
file_segments = [re.sub('[\(|\)]','', line).split() for line in fh.readlines()] 
```

但请注意，这不仅仅是`.split()`.

有关更多信息，请参阅[re.sub](http://docs.python.org/2/library/re.html#re.sub)。

# c# - 画在字面上的一切之上

> ID：16049499
> 
> 赞同：2
> 
> 时间：2013-04-17T00:32:49.983
> 
> 标签：c#, wpf, windows, winforms, opengl

我想为在后台运行的游戏玩家创建一个实用程序。我需要做的是**在游戏中显示可见消息**在某些情况下所以我的窗口不需要一直可见，但是在某些事件上（组合键，我有注册全局键的工具）它应该弹出。

我开始在 WPF 中进行开发，如果我将 Window 属性 Topmost 设置为 true，只要我不启动另一个想要成为最顶层的应用程序，它将保持在最前面。当然，游戏确实想成为最顶级的，所以我的窗口将不可见。我应该如何在 WPF 中解决这个问题（如果它甚至可以解决）？

如果 Winforms 中有一个简单的解决方案，我也欢迎。即使是 C++ OpenGL 解决方案或技巧也会派上用场。

我知道这不是一项微不足道的任务，但肯定是可以做到的。一个很好的例子是 Xfire，用户可以在玩游戏的同时聊天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T04:43:29.717

我认为使用通常的窗口是不可能的，但我没有什么建议和一种解决方案。

1) 让游戏开始，然后设置您的 Topmost 属性。请记住，理论上设置 Topmost 的最后一个窗口获胜。请注意，您可能需要使用[SetWindowPos](http://msdn.microsoft.com/en-us/library/ms633545%28v=vs.85%29.aspx)函数将 Topmost 删除/添加到游戏/您的窗口。

2) 一个实际的解决方案包括将自己连接到 DirectX，假设大多数游戏都使用 DirectX 运行。有关 DIrect9X Base hook 示例，请参阅[此](http://www.rohitab.com/discuss/topic/35950-directx9-base-hook/)线程。然后，您可以自定义绘制游戏 UI。你需要做很多工作来支持 Direct9/10/11，这也可能很危险，因为注入游戏是一种安全风险。

# c# - 无法绑定到 DependencyObject 的 DependencyProperty 子项

> ID：16049500
> 
> 赞同：0
> 
> 时间：2013-04-17T00:32:56.860
> 
> 标签：c#, wpf, binding

我不知道如何绑定我的图像：

```
<Image Source="{ Binding  Path=ViewModel.MainViewModel.ProcessedImage }" Name="image1"/> 
```

到 DependencyProperty **ProcessedImage**，这是我从 DependencyObject 派生的自定义类的子元素：

```
class ViewModel : DependencyObject
{
    public static ViewModel MainViewModel { get; set; }

    [...]

    public BitmapImage ProcessedImage
    {
        get { return (BitmapImage)this.GetValue(ProcessedImageProperty); }
        set { this.SetValue(ProcessedImageProperty, value); }
    }
    public static readonly DependencyProperty ProcessedImageProperty = DependencyProperty.Register(
      "ProcessedImage", typeof(BitmapImage), typeof(ViewModel), new PropertyMetadata());
} 
```

我希望你能帮助我解决这个问题。我尝试了不同的方法，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T04:15:02.787

您如何设置数据上下文？我复制了您的代码并添加了另一个属性 - ProcessedImageName，默认值为“Hello World”

```
public static readonly DependencyProperty ProcessedImageNameProperty = DependencyProperty.Register(
        "ProcessedImageName", typeof(string), typeof(ViewModel), new PropertyMetadata("Hello World"));

    public string ProcessedImageName {
get { return (string)this.GetValue(ProcessedImageNameProperty); }
set { this.SetValue(ProcessedImageNameProperty, value); }} 
```

我将数据上下文设置如下：

```
 public MainWindow()
    {
        InitializeComponent();
        ViewModel.MainViewModel = new ViewModel();
        DataContext = ViewModel.MainViewModel;
    } 
```

我将绑定路径设置为：

```
<TextBlock Text="{Binding Path=ProcessedImageName }"/> 
```

就个人而言，我不会继续使用静态 MainViewModel 属性，而是像这样新建一个 ViewModel 实例

```
 public MainWindow()
    {
        InitializeComponent();
        DataContext = new ViewModel();
    } 
```

属性的路径是相对于数据上下文的，因此如果属性是 Class.PropertyName 而数据上下文是 Class，那么绑定路径就是 PropertyName。

# python - 带类的 Python 线程

> ID：16049502
> 
> 赞同：1
> 
> 时间：2013-04-17T00:33:31.870
> 
> 标签：python, multithreading

我打算发布一个示例，但我说搞砸了，我只是发布我所拥有的。对我放轻松。我习惯了红宝石。Python 对我来说是全新的。

我有一个名为 que 的文件，其中包含一堆歌曲。我想创建一个后台线程，不断检查 que 中是否有任何歌曲。如果其中有歌曲，则在第一行播放歌曲，然后删除第一行。（.que.swp）。

现在的问题是，我不知道如何在后台完成这一切。我有另一个类允许用户将歌曲添加到 que 文件中。所以它们需要同时运行。

```
class MusicPlayer(threading.Thread):

    def __init__(self):
        super(MusicPlayer, self).__init__()
        self.que_file = "que"
        self.playQue()

    def playQue(self):

        while 1:
            try:
                f = open(self.que_file, "r")
                songUp = f.readline()
                songUp = songUp.rstrip()
                cmd = "cvlc \"%s\" vlc://quit &>/dev/null" % (songUp)
                os.system(cmd)
                data="".join(open(self.que_file).readlines()[1:-1])
                open(".que.swp","wb").write(data)
                os.remove(self.que_file)
                os.rename(".que.swp", self.que_file)
                print "\n%s added %s to the que" % (self.user, self.dir)
            except:
                print "No Que File Exists"
                time.sleep(1)

#main#          
if __name__ == '__main__':
    player = MusicPlayer()
    player.start()
    print "helloWorld" 
```

“helloworld”从不打印到终端。它只是不断循环我的课程。ps - 如果它让你感觉更好，你可以清理我的任何丑陋的命令。记住我是新人。我已经在这几个小时了，并求助于询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:38:08.650

循环不是从`player.start()`您可能猜到的那行开始，而是从以下行开始：

```
player = MusicPlayer() 
```

这是因为您调用`self.playQue()`. `__init__`如果删除该行并将方法名称更改`playQue`为`run`，则线程应单独运行。

有关和的描述，请参见[threading 包](http://docs.python.org/2/library/threading.html#threading.Thread.start)的说明：`start``run`

> 开始（）
> 
> 启动线程的活动。
> 
> 每个线程对象最多只能调用一次。它安排在单独的控制线程中调用对象的 run() 方法。

# python - 使用 Machanize 访问受密码保护的站点

> ID：16049503
> 
> 赞同：0
> 
> 时间：2013-04-17T00:34:06.170
> 
> 标签：python, browser, login, mechanize

我试图使用 machanize 进入一个站点，但是当我运行我的脚本时，它仍然只是给我主页的源代码，而不是实际站点的源代码

这是代码

```
from mechanize import Browser

USERNAME = "my username"
PASSWORD = "my pass"
LOGIN_PAGE = "https://ps.rsd.edu/public/"

browser = Browser()
browser.open( LOGIN_PAGE )

browser.select_form( nr=0 ) 
browser['pw'] = PASSWORD
response = browser.submit()
print response.read() 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:40:23.033

您忘记输入用户名。它应该与密码输入相同。例子：

```
from mechanize import Browser

USERNAME = "my username"
PASSWORD = "my pass"
LOGIN_PAGE = "https://ps.rsd.edu/public/"

browser = Browser()
browser.open( LOGIN_PAGE )

browser.select_form( nr=0 ) 
browser['account'] = USERNAME
browser['pw'] = PASSWORD
response = browser.submit()
print response.read() 
```

# javascript - javascript 不适用于所有浏览器

> ID：16049505
> 
> 赞同：1
> 
> 时间：2013-04-17T00:34:25.717
> 
> 标签：javascript, button, input

我到处查看并尝试了各种脚本，但我一直遇到同样的问题。

我正在尝试禁用或隐藏提交按钮，直到选中复选框。

我遇到的问题是，除非我打开了兼容性，否则在 IE10 中什么都不起作用，而且它们大多数时候在 FF 20.0.1 中不起作用。

这是我到目前为止所尝试的。

* * *

```
 <input type="checkbox" name="agree" value="yes" onclick="agreed.disabled = !this.checked" />Do you Agree? &nbsp;
    <input type="submit" name="agreed" id="agreed" value="{L_AGREE}" class="button1" disabled="disabled" /> 
```

* * *

```
<script type="text/javascript">
function checkSubmit(ele, id) {
    x = document.getElementById(id);
    if (ele.checked == true) x.disabled = false;
    else x.disabled = true;
}
</script>

<input type="checkbox" name="myCheck" onclick="checkSubmit(this, 'agreed')" value="y" />Do you Agree? &nbsp;
<input type="submit" name="agreed" id="agreed" value="{L_AGREE}" class="button1" disabled="disabled" /> 
```

* * *

```
<script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script>
<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
$("#terms").click(function() {
    if ($(this).is(':checked')) {
        $('#agreed').removeAttr('disabled');
    } else {
        $('#agreed').attr('disabled', 'disabled');
    }
});

});//]]>  

</script>

            <input type="checkbox" class="required" id="terms"/>Do you Agree? &nbsp;
            <input type="submit" name="agreed" id="agreed" value="{L_AGREE}" class="button1" disabled="disabled" /> 
```

* * *

我尝试了许多其他方法来做到这一点，但仍然遇到 IE10 或 FF 的问题。

我需要的是帮助让某些东西在所有浏览器中都能正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T00:41:01.543

第一个示例更可能适用于某些浏览器，而不适用于其他浏览器，具体取决于它们是否通过其 ID将元素放在`window`或对象上。`document`

要修复它，请使用`document.getElementById()`.

```
<input type="checkbox" name="agree" value="yes" onclick="document.getElementById('agreed').disabled = !this.checked" />Do you Agree? &nbsp;
<input type="submit" name="agreed" id="agreed" value="{L_AGREE}" class="button1" disabled="disabled" /> 
```

* * *

只要函数是全局的，第二个应该可以在任何浏览器中工作，尽管你可以缩短它。

```
function checkSubmit(ele, id) {
    document.getElementById(id).disabled = !ele.checked;
} 
```

# c# - 设置纹理时的内存泄漏 = new Texture2D(...)

> ID：16049508
> 
> 赞同：0
> 
> 时间：2013-04-17T00:34:42.680
> 
> 标签：c#, performance, xna, garbage-collection, xna-4.0

我有以下代码作为游戏的一部分：

```
 protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.Black);

        spriteBatch.Begin();

        terrainSprite.Draw(spriteBatch);

        if (resourceMap.pixels.IsDisposed == false)
        {
            resources.Draw(spriteBatch, spriteFont);
        }

        spriteBatch.End();

        base.Draw(gameTime);

       //Disposes the texture here:
        resources.pixels.Dispose();
    }

    //In the resources class
    public void Update()
    {       
        //gD = graphics device
        pixels = new Texture2D(gD, 800, 353);

        //big update method
        //manipulate the pixels texture
    } 
```

当我打开任务管理器并查看资源监视器时，“myGame.exe”的内存使用量不断增加约 8 KB（我意识到这很小，但我的游戏拥有大量数据，所以我节省了每一点can 很重要，而且它建立起来相当快）。这是在所有其他代码被注释掉之后，除了这里显示的内容。然后，当我注释掉代码：“pixels = new Texture2D(gD, 800, 353);”时，内存使用量保持不变。我也尝试了 GC.Collect()，但没有骰子。

我还能做些什么来阻止它吗？（对不起，摆脱代码不是一种选择：p，更新纹理比我遇到的任何其他使纹理变为空白的方法要快得多）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T03:53:32.930

取决于您的`Game`配置，实际上还有许多其他因素，例如一切运行速度有多慢等，`Update`并且`Draw`彼此之间并不完全同步，并且*不能保证*以以下方式运行：

```
Update
Draw
Update
Draw
Update
Draw
Update
Draw
.... 
```

因此，既然你`Dispose`在其中一个并在另一个中创建一个*全新*的，那么肯定会发生这样的事情：

```
Update: create new
Update: create new //PREVIOUS ONE LEAKED!
Draw: disposes only current
Update: create new
Update: create new //AGAIN LEAK
Draw: disposes only current
... 
```

因此，不要`Dispose`以这种方式分开；`Dispose`无论如何，每个新创建一次。

我还应该补充一点，纹理以及其他一些 XNA 类（声音和音乐，以及`Effect`s 等等）都是*非托管*资源，这意味着 GC 根本看不到它们。你必须调用`Dispose`这些。

正如 Andrew 在他的评论中指出的那样，避免这些陷阱的最佳方法是不要经常重新创建纹理 - 只需重复使用相同的纹理并根据需要对其进行修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-28T10:54:56.733

垃圾收集器似乎没有完全处理 Texture2D。

因此，当您停止使用它时（在重用引用它的变量时，例如此处，或在 OnDestroy 回调期间），您必须手动销毁纹理。这里 ：

```
if(pixels != null) {
  Destroy(pixels);
}
pixels = new Texture2D(gD, 800, 353); 
```

# javascript - 将 PushState 与 Ajax 页面一起使用

> ID：16049515
> 
> 赞同：0
> 
> 时间：2013-04-17T00:35:28.017
> 
> 标签：javascript, ajax, pushstate

我最近开始使用带有 ajax 页面加载的 pushState，它可以很好地加载新页面内容，并使用后退和前进按钮......

我的问题是，如果我离开页面，然后单击后退按钮，则显示的页面只是 ajax 页面内容，没有周围的页眉和页脚。

离开页面后使用返回按钮时如何保持页面布局？

# c# - 我需要在两个代码优先实体之间创建一个复杂的关系，但我很难将我的大脑包裹在它周围

> ID：16049518
> 
> 赞同：0
> 
> 时间：2013-04-17T00:35:51.930
> 
> 标签：c#, .net, entity-framework, ef-code-first, entity-framework-5

我有两个实体，这两个实体之间有两种不同的关系。第一个关系是一对多关系，第二个关系是多对多关系。请参阅下面的实体。

```
public class User
{
    public int Id { get; set; }
    public string Password { get; set; }
    public string Name { get; set; }

    // Collection that represent this user's attached social providers.
    public virtual ICollection<SocialProvider> SocialProviders { get; set; }
    // Collection representing this user's friends from her attached social providers.
    public virtual ICollection<SocialProvider> SocialContacts { get; set; }
}

public enum Provider
{
    Google,
    Facebook,
    Twitter
}

public class SocialProvider
{
    public int Id { get; set; }
    public Provider Provider { get; set; }
    // Granted access token for talking to the provider API on user's behalf.
    public string AccessToken { get; set; }
    // User's unique ID at the social provider.
    public string ProviderId { get; set; }

    // The user that this SocialProvider belongs to.
    public virtual User User { get; set; }
    // The users that have this social provider as a contact.
    public virtual ICollection<User> Contacts { get; set; }
} 
```

工作流程如下：

1.  我在应用程序中注册。这将创建一个`User`.
2.  我附上社交服务提供商（谷歌、Facebook 等）。这会创建一个或多个`SocialProvider`并将其添加到`user.SocialProviders`.
3.  我从我附属的社交提供商那里导入我的联系人/朋友。这会拉下社交联系人列表并`SocialProvider`为每个人创建一个（如果它尚不存在）并将它们添加到`user.SocialContacts`. 在这种情况下，`SocialProvider`不会有父用户“拥有”它，也不会有父用户，`AccessToken`直到用户注册应用程序并添加与之匹配的社交提供者，在这种情况下，这些东西将被填充。

这行得通吗？我有一种感觉 EF 即将变得非常困惑。我对 fluent API 甚至大部分数据注释都不是很熟悉。关于我可以做些什么来完成这项工作的任何建议，或者我应该只是`SocialContacts`成为一个名为的新实体`SocialContact`，主要看起来`SocialProvider`只是为了避免任何令人困惑的关系内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:31:49.923

尝试这个：

**用户**

```
public class User
{
   public int Id { get; set; }
   ublic string Password { get; set; }
   public string Name { get; set; }

   // Collection that represent this user's attached social providers.
   public virtual ICollection<SocialProvider> SocialProviders { get; set; }

   // Collection representing this user's friends from her attached social providers.
   public virtual ICollection<SocialProvider> SocialContacts { get; set; }
} 
```

**社交提供者**

```
public class SocialProvider
{
   public int Id { get; set; }        

   public string AccessToken { get; set; }       

   [ForeignKey("Provider"), DatabaseGenerated(DatabaseGeneratedOption.None)]
   public string ProviderId { get; set; }

   public Provider Provider { get; set; }

   [ForeignKey("User"), DatabaseGenerated(DatabaseGeneratedOption.None)]
   public string UserId { get; set; }

   // The user that this SocialProvider belongs to.
   public virtual User User { get; set; }

   // The users that have this social provider as a contact.
   public virtual ICollection<User> Contacts { get; set; }
} 
```

然后在你的 DbContext 类

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<User>()
          .HasMany<SocialProvider>(r => r.SocialContacts)
          .WithMany(u => u.Contacts)
          .Map(m =>
          {
              m.ToTable("UsersInSocialContacts");
              m.MapLeftKey("UserId");
              m.MapRightKey("ProviderId");//If not ProviderId  try Id
          });
    } 
```

我不能也没有测试这个，所以让我知道结果，以便我改进它。理想情况下，您可能必须分离此设计并将其重组为一个或多个实体。

# java - 从其他主机读取图像

> ID：16049522
> 
> 赞同：2
> 
> 时间：2013-04-17T00:36:53.437
> 
> 标签：java, swing, file, url, javax.imageio

我正在尝试从另一台主机读取图像，但失败了。这是我尝试过的：

```
ImageIO.read(new File("http://199.231.95.45:8081/images/bg.png")); 
```

我怎样才能做到这一点？甚至可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T00:38:26.000

A`File`是对文件系统（或网络驱动器）上的本地文件的引用，它与 Web 服务器上的资源无关。

`URL`改为使用

```
ImageIO.read(new URL("http://199.231.95.45:8081/images/bg.png")); 
```

# java - 需要了解Hibernate配置的transaction.factory_class

> ID：16049526
> 
> 赞同：8
> 
> 时间：2013-04-17T00:37:28.397
> 
> 标签：java, xml, hibernate

在我的 hibernate.cfg.xml 文件中，属性之一是 -

```
<property name = "transaction.factory_class"> <!--1-->
org.hibernate.transaction.JDBCTransactionFactory <!--2-->
</property> <!--3--> 
```

其他属性很容易理解。但是，当我看到上述房产时，我想到了很多问题。

**第 1 行 -**这指定了实现 Transaction* *Factory* * 接口的类。

**Q1 -**我看到了 TransactionFactory 的 java 文档，但不明白它到底是什么。这个“工厂”是什么意思？他们为什么不按照行将其称为 TransactionGenerator -

> 用于生成 Hibernate Transaction 实例的合约。

**Q2 -** TransactionFactory 引导我到 Transaction。这与数据库事务完全相同吗？

**Q3 -**

> 单个会话可能跨越多个事务，因为会话（应用程序和数据存储之间的对话）的概念比事务的概念粒度更粗。但是，在任何时候，最多有一个与特定会话相关联的未提交事务。

*...会话的概念比事务的概念粒度更粗。*

用简单的话来说是什么意思？

--

> 但是，在任何时候，最多有一个与特定会话相关联的未提交事务。

你为什么要这样做？

我不认为 API 文档很清楚。让n00b的生活变得悲惨。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T04:54:36.557

**Q1** - 推理很清楚。事务创建遵循工厂模式。例如，在应用服务器（如 JBOSS、WebSphere 等）通过 JTA API 管理事务创建的环境中，您将使用 JTA 事务工厂来创建事务，并且该事务将被 hibernate 进一步使用。在纯 Spring 管理的环境中，可以将 Spring 配置为使用 HibernateTransactionFactory。简而言之，它将遵循类似的方式：

```
IFactory f= FactoryCreatorForYourEnvironment.create();
Transaction t = f.create(); 
```

**Q2 和 Q3** - 是的，休眠事务工厂在底层数据库上创建数据库事务。请注意，一个会话可能跨越多个事务——休眠会话抽象了一个数据库连接。在同一个连接上，多个开始事务、提交事务周期是可能的。示例：如果参与 bean（EJB 或 SPRING bean），则需要 REQUIRE_NEW 属性。因此会话是文档中提到的更广泛（更粗略）的术语。

任何写入、删除、受保护的读取都需要事务。所以会话持有一个隐式事务。[您可以在此处](https://stackoverflow.com/questions/3085095/should-i-be-using-sql-transactions-while-reading-records)阅读相关的堆栈溢出文章。

HTH。

# javascript - 如何从发布响应中更新backbone.js 中的集合？

> ID：16049527
> 
> 赞同：0
> 
> 时间：2013-04-17T00:37:37.857
> 
> 标签：javascript, post, backbone.js, server-response

我基本上是在用 JavaScript 编写一个文件夹浏览器，它从我服务器上的某个文件夹开始，每次你单击一个文件时，我希望服务器向我发回该目录中所有文件夹的列表......但问题是当我执行 this.model.save() 时，我似乎无法弄清楚如何使用服务器返回的新数据更新我的骨干集合...我在我的网络检查器中看到正在发送响应，那么如何我要更新收藏吗？清除所有旧数据并使用服务器返回的新数据更新它？

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:50:30.327

你的意思是collection.fetch。要进行服务器调用：

```
this.collection.fetch(); 
```

要在视图中收听更改：

```
this.collection.on('add', this.newModel); 
```

同样在以前的 bakcbone 版本中，您可以收听重置事件而不是添加。你可以在这里获得更多关于使用的信息：http: [//backbonejs.org/#Collection-fetch](http://backbonejs.org/#Collection-fetch)

# c# - 在 C#/WPF 应用程序中使用 MVVM Light 时确定数据绑定的正确属性返回类型？

> ID：16049528
> 
> 赞同：0
> 
> 时间：2013-04-17T00:37:41.030
> 
> 标签：c#, wpf, data-binding, telerik, mvvm-light

我有一个使用 MVVM Light 工具包的 C# Windows Phone 7.1 项目。在应用程序的一个应用程序页面上，我有一个 Telerik 数据绑定列表框，它绑定到我的视图模型中的一个属性。起初，该属性的返回类型为：

```
List<string> 
```

对于该返回类型，当我激活“*创建数据绑定*”对话框以分配列表框的**ItemsSource**属性时，该属性未显示在“*路径*”列表框中的候选元素列表中。但是，当我将该属性的返回类型更改为：

 ***```
ObservableCollection<string> 
```

它立即出现了。将来，如何确定特定控件的 ItemsSource 或其他数据可绑定属性的正确返回类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T04:52:04.770

你的问题有点令人困惑。两者都完全可以，并且适用于不同的场景。当您不打算更改集合时使用 list<string> ，否则使用 ObservableCollection 。

现在，您可以使用[MSDN（请参阅 ItemsSource 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemssource.aspx)以查看需要什么属性。从文档中可以看到，ItemsSorce 必须是 IEnumerable，这意味着可以使用从它派生的所有类型。

现在至于真正的问题，为什么您的属性没有出现在 IDE 中，我只能猜测微软希望您始终使用 ObservableCollection，但我不同意这一点。这就是为什么最好通过 Xaml 手动绑定到属性的原因。***

# python - 如何使用 python 以漂亮的格式打印 sqlite 值？

> ID：16049536
> 
> 赞同：0
> 
> 时间：2013-04-17T00:39:01.613
> 
> 标签：python, sqlite

好的，所以我从 sqlite 数据库中提取一些数据，但在向用户显示时我无法弄清楚如何正确格式化它们......我使用的是 python 2.5。

```
 studentid = raw_input("Enter your student ID: ")
cur.execute('SELECT APP_DECISION FROM APP_STATUS WHERE STUDENTID = ?', (studentid,))
appdecision = cur.fetchall()
cur.execute('SELECT GRANT FROM FINAID WHERE STUDENTID = ?', (studentid,))
grant = cur.fetchall()
if (appdecision == 'ACCEPTED'):
print 'congratulations'
else:
    print 'sorry'

print (appdecision)
print (grant) 
```

结果是这样打印的，

```
Enter your student ID: 100006
[(u'ACCEPTED',)]
[(9500,)] 
```

我希望能够打印它，例如 Accepted 和 $9500 ....。如何检查特定值以便祝贺已被接受的用户？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:40:58.943

将其打印为：

```
print (appdecision[0][0])
print (grant[0][0]) 
```

这是因为`[(u'ACCEPTED',)]`是一个列表，其中包含一个包含字符串的元组`"ACCEPTED"`。同样，您必须检查如下值：

```
if appdecision[0][0] == "ACCEPTED":
    print "Congratulations!" 
```

# sql - 从 SQL Server 列中删除 HTML

> ID：16049537
> 
> 赞同：2
> 
> 时间：2013-04-17T00:39:25.867
> 
> 标签：sql, regex, sql-server-2008-r2

我们曾经使用 WYSIWYG 编辑器，并且在 SQL Server 2008 R2 表中有四个文本类型列。我想删除所有的 HTML 标签。这在 ASP（经典 ASP）页面中使用时有效：

```
Function RemoveHTML(strText )
  Dim RegEx

  Set RegEx = New RegExp

  RegEx.Pattern = "<[^>]*>"
  RegEx.Global = True

  RemoveHTML = RegEx.Replace(strText, "")
End Function 
```

但是我想要一个不同的解决方案，也许是 SQL 驱动的。非常希望得到一些帮助。正则表达式可以这样用在 SQL 语句中吗？任何帮助建议都会很棒？我想我想保留中断标签，但其余的都可以。

TYIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T01:23:53.680

让我们创建一个示例表以供讨论

```
create table #tmp (id int identity primary key, sometext varchar(max));
insert #tmp values ('This <has some> HTML in it <and some more> yeah>');
insert #tmp values ('No HTML here');
insert #tmp values ('This is > than that');
insert #tmp values ('And This is < than that');
insert #tmp values ('');
insert #tmp values ('I have many        blanks. Don''t lose them <y>');
insert #tmp values (null);
insert #tmp values ('<b>This is bold</b> and <i>this is in italics</i>');
insert #tmp values ('I <<<<stttuttter> a lot <>');
GO 
```

接下来，如果您的数据库中还没有 Numbers（又名 Tally）表，请创建一个。

```
create table Numbers (number int identity primary key);
GO
insert Numbers default values
GO 1000 
```

最好使用多语句 TSQL 来解决这个问题，它可以利用索引并实现中间结果。这里的第一步是收集所有没有被`<`and`>`标签包围的字符。

```
create table #tmp2 (id int, number int, primary key(id,number), char char(1));

insert #tmp2
select u.id, N.Number, substring(u.sometext, N.number, 1) char
from #tmp u
join Numbers N on N.number <= len(u.sometext)
left join
    (
        select t.id, N.number lt, charindex('>', t.sometext, N.number+1) gt
        from #tmp t
        join Numbers N on substring(t.sometext, N.number, 1) = '<'
    ) exclusions on u.id = exclusions.id and n.number between exclusions.lt and exclusions.gt
where exclusions.id is null
GO 
```

下一步只是使用`FOR XML`.

```
update #tmp
set sometext = (select char+''
            from #tmp2 b
            where b.id = #tmp.id
            order by Number
            for xml path(''), type).value('/','nvarchar(max)')
where sometext like '%<%>%' 
```

再次检查我们的桌子

```
select * from #tmp

id          sometext
----------- --------------------------------------------------
1           This  HTML in it  yeah>
2           No HTML here
3           This is > than that
4           And This is < than that
5           
6           I have many        blanks. Don't lose them 
7           NULL
8           This is bold and this is in italics
9           I  a lot 
```

* * *

对于一个小表，在单个查询（如上）中执行排除就足够了。对于较大的表，CTE 方法似乎更有效，因为它只遍历数据一次。上面代码中的表可以通过在创建后对表运行这些来扩大：

```
-- replicate the table data to about 20K records
insert #tmp select sometext from #tmp
GO 11

-- expand each string by 8 times the original length
update #tmp set sometext = sometext + sometext
GO 3 
```

并使用它来创建#tmp2 表

```
;with cte(id, pos, sometext, size, char, flag) as (
    select id, 1, sometext, len(sometext), substring(sometext, 1, 1),
        case when substring(sometext, 1, 1) = '<' then 1 else 0 end
    from #tmp
    where sometext like '%<%>%'
    union all
    select id, pos+1, sometext, size, substring(sometext, pos+1, 1),
        case when substring(sometext, pos+1, 1) = '<' then 1 -- starts a new html tag section
             when char = '>' then 0 -- closed in prior iteration
             else flag end -- continue flag
    from cte
    where pos < len(sometext)
)
insert #tmp2 (id, Number, char)
select id, pos, char
from cte
where flag = 0
option (maxrecursion 500)
GO 
```

这导致时间

*   62 秒创建#tmp2
*   使用 #tmp2 更新 #tmp 需要 1 秒

该算法具有线性复杂性，因此如果您的字符串较短，或者您的记录较少，只需进行近似缩放以了解该过程需要多长时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T23:59:07.560

我最终使用了从这里[https://www.simple-talk.com/sql/t-sql-programming/tsql-regular-expression-workbench/](https://www.simple-talk.com/sql/t-sql-programming/tsql-regular-expression-workbench/)获得的解决方案。它工作得非常好，这对我有用。在数据库中创建函数：

```
IF OBJECT_ID(N'dbo.RegexReplace') IS NOT NULL 
   DROP FUNCTION dbo.RegexReplace
GO
CREATE FUNCTION dbo.RegexReplace
(
  @pattern VARCHAR(255),
  @replacement VARCHAR(255),
  @Subject VARCHAR(MAX),
  @global BIT = 1,
 @Multiline bit =1
)
RETURNS VARCHAR(MAX)

AS BEGIN
DECLARE @objRegexExp INT,
    @objErrorObject INT,
    @strErrorMessage VARCHAR(255),
    @Substituted VARCHAR(8000),
    @hr INT,
    @Replace BIT

SELECT  @strErrorMessage = 'creating a regex object'
EXEC @hr= sp_OACreate 'VBScript.RegExp', @objRegexExp OUT
IF @hr = 0 
    SELECT  @strErrorMessage = 'Setting the Regex pattern',
            @objErrorObject = @objRegexExp
IF @hr = 0 
    EXEC @hr= sp_OASetProperty @objRegexExp, 'Pattern', @pattern
IF @hr = 0 /*By default, the regular expression is case sensitive. Set the IgnoreCase property to True to make it case insensitive.*/
    SELECT  @strErrorMessage = 'Specifying the type of match' 
IF @hr = 0 
    EXEC @hr= sp_OASetProperty @objRegexExp, 'IgnoreCase', 1
IF @hr = 0 
    EXEC @hr= sp_OASetProperty @objRegexExp, 'MultiLine', @Multiline
IF @hr = 0 
    EXEC @hr= sp_OASetProperty @objRegexExp, 'Global', @global
IF @hr = 0 
    SELECT  @strErrorMessage = 'Doing a Replacement' 
IF @hr = 0 
    EXEC @hr= sp_OAMethod @objRegexExp, 'Replace', @Substituted OUT,
        @subject, @Replacement
 /*If the RegExp.Global property is False (the default), Replace will return the @subject string with the first regex match (if any) substituted with the replacement text. If RegExp.Global is true, the @Subject string will be returned with all matches replaced.*/   
IF @hr <> 0 
    BEGIN
        DECLARE @Source VARCHAR(255),
            @Description VARCHAR(255),
            @Helpfile VARCHAR(255),
            @HelpID INT

        EXECUTE sp_OAGetErrorInfo @objErrorObject, @source OUTPUT,
            @Description OUTPUT, @Helpfile OUTPUT, @HelpID OUTPUT
        SELECT  @strErrorMessage = 'Error whilst '
                + COALESCE(@strErrorMessage, 'doing something') + ', '
                + COALESCE(@Description, '')
        RETURN @strErrorMessage
    END
EXEC sp_OADestroy @objRegexExp
RETURN @Substituted
END
Go 
```

现在简单地运行这个：

```
--replace all the HTML in a field example
update TableName set fieldName=dbo.RegexReplace('<(?:[^>''"]*|([''"]).*?\1)*>',
 '',fieldName,1,1) 
```

它工作得非常好

# svg - 如何将 d3.js 图形转换/保存为 pdf/jpeg

> ID：16049538
> 
> 赞同：33
> 
> 时间：2013-04-17T00:39:46.883
> 
> 标签：svg, d3.js, pdf-generation

我正在开发一个客户端/javascript 函数来将现有的 D3-SVG 图形保存或转换为文件。我搜索了很多，发现了一些建议，主要是使用`canvas.toDataURL()`.

我的页面中没有`<canvas>`，而是使用：`d3.select("body").append("svg")....` 我也尝试将 SVG 附加到`<canvas>`但没有任何反应。

你能帮我解决这个异常吗：

```
Uncaught TypeError: Object #<SVGSVGElement> has no method 'toDataURL' 
```

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-17T02:25:43.610

要在画布中显示您的 svg，您首先必须使用解析器/渲染器实用程序进行转换，例如[http://code.google.com/p/canvg/](http://code.google.com/p/canvg/)

（代码改编自：[Convert SVG to image (JPEG, PNG, etc.) in the browser](https://stackoverflow.com/questions/3975499/convert-svg-to-image-jpeg-png-etc-in-the-browser)，未测试）

```
// the canvg call that takes the svg xml and converts it to a canvas
canvg('canvas', $("#my-svg").html());

// the canvas calls to output a png
var canvas = document.getElementById("canvas");
var img = canvas.toDataURL("image/png"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-20T02:47:09.490

只是提醒一下，我将这个概念变成了一个小型 JavaScript 库：[https ://github.com/krunkosaurus/simg](https://github.com/krunkosaurus/simg)

它只是将任何 SVG 转换为图像以换出或触发下载。取自这里的想法：http: [//techslides.com/save-svg-as-an-image/](http://techslides.com/save-svg-as-an-image/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-05T11:47:30.820

正如@Premasagar 在对此问题的评论中所指出的，[将 SVG 转换为浏览器中的图像（JPEG、PNG 等）](https://stackoverflow.com/questions/3975499/convert-svg-to-image-jpeg-png-etc-in-the-browser#comment28332332_3976034)

如果浏览器同时支持 SVG 和画布，您可以使用此技术[https://svgopen.org/2010/papers/62-From_SVG_to_Canvas_and_Back/index.html](https://svgopen.org/2010/papers/62-From_SVG_to_Canvas_and_Back/index.html)

```
function importSVG(sourceSVG, targetCanvas) {
    // https://developer.mozilla.org/en/XMLSerializer
    svg_xml = (new XMLSerializer()).serializeToString(sourceSVG);
    var ctx = targetCanvas.getContext('2d');

    // this is just a JavaScript (HTML) image
    var img = new Image();
    // http://en.wikipedia.org/wiki/SVG#Native_support
    // https://developer.mozilla.org/en/DOM/window.btoa
    img.src = "data:image/svg+xml;base64," + btoa(svg_xml);

    img.onload = function() {
        // after this, Canvas’ origin-clean is DIRTY
        ctx.drawImage(img, 0, 0);
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-19T14:44:28.877

上面 Mauvis Ledford 创建和建议的 Simg 库非常适合下载我使用 Dimple 创建的 svg 图表。

然而，我确实需要更改代码的一个方面以使其工作。在 toString() 原型内部，在 forEach 循环内部（第 37 行），如果将“svg.setAttribute(..)”更改为“svg[0].setAttribute”，它将缓解“setAttribute(..) 不函数”错误。类似地，需要在 return 语句的正下方执行相同的操作，在 svg 之后附加“[0]”（第 39 行）。

我还必须手动编辑 toCanvas() 原型中的“canvas.width”和“canvas.height”（第 48 和 49 行）分配，以使下载的图像尺寸更正确（以前只是图表左上角的静态 300x150 正方形）。

# c# - 线程阻塞问题

> ID：16049540
> 
> 赞同：0
> 
> 时间：2013-04-17T00:39:52.307
> 
> 标签：c#, multithreading, blocking

我有线程问题或 BeginInvoke 阻塞了我的数据操作的整个过程，我启动线程或像这样调用

```
private void StartRetweetMarch(string twStatusId)
{
    foreach (var line in _emailBox.Lines)
    {

        //new Action<object>(Hashtags).BeginInvoke(new Email { twStatus = twStatusId, login = line.Split(':')[0], password = line.Split(':')[1] }, null, null);
        new Thread(new ParameterizedThreadStart(Hashtags)).Start(new Email { twStatus = twStatusId, login = line.Split(':')[0], password = line.Split(':')[1] });
        //_threads.Add(new Action<object>(Hashtags).BeginInvoke(new Email { login = line.Split(':')[0], password = line.Split(':')[1] }, null, null));
        //Thread.Sleep(40000);w
        // new Thread(new ParameterizedThreadStart(Hashtags)).Start(new Email { login = line.Split(':')[0], password = line.Split(':')[1] });
    }
} 
```

但只有这个 foreach 调用的第一个调用，其他的正在等待或类似的东西，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T04:16:37.313

在 Hashtags 方法内部，它看起来不是线程安全的。比如 _proxies 变量，我不确定这个类型，但是如果你只是使用 List<string> 类型，那么你必须使用排他锁来编写。

```
//Outside of Method...
//Create lock Object
private static object _lock = new Object();

//Inside of Hashtags Method...
//exclusive lock. Inside of code block is thread safe. 
lock (_lock) {
    prox = _proxies[new Random().Next(0, _proxies.Count)];
    _proxies.Remove(prox);
} 
```

# wordpress - 显示类别和相关文章的页面模板

> ID：16049541
> 
> 赞同：0
> 
> 时间：2013-04-17T00:40:04.340
> 
> 标签：wordpress

我正在构建一个模板，该模板将显示一个分类法，其中包含相关的子分类法和下面的帖子。自定义分类法像类别一样设置，因此视图将如下所示：

定义：自定义帖子类型 = 称谓自定义分类 = 名称

职称 - 职称的子级 *按职称分类的职称 *按职称分类的职称职位

这是我[在 pastebin](http://pastebin.com/xEuCYasP) 中的页面模板，用于完成此操作，它大部分都有效，但我无法让帖子显示在指定名称下。如果我删除第 73 行，那么我会在每个名称下显示每个称谓帖子......我猜我只是没有正确抓住这些帖子，但在这一点上被难住了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:12:15.240

由于您尝试从自定义分类中查询术语，因此您需要更改第 73 行

从`'category' => $category->term_id`

到`'CUSTOM_TAXONOMY'`=>`'TERM_SLUG'`

将 CUSTOM_TAXONOMY 替换为自定义分类名称，将 TERM_SLUG 替换为术语 slug。

进一步阅读：[http ://codex.wordpress.org/Taxonomies](http://codex.wordpress.org/Taxonomies)

# php - 我需要在我的网络服务器上安装 javascript 吗？

> ID：16049547
> 
> 赞同：1
> 
> 时间：2013-04-17T00:40:49.067
> 
> 标签：php, javascript, installation, webserver

首先，服务器是运行 IIS 的 Windows Server 2012。

现在，这可能是一个非常愚蠢的问题，但我似乎找不到答案。

我基本上负责我们办公室的网络服务器，我只是边走边学。

现在我只使用纯 HTML/CSS 制作网站供内部使用，但我需要添加一些额外的功能，最好是 PHP 和 Javascript。

我找到了一个 PHP 的安装，看起来很简单，但是我需要在我们的网络服务器上安装任何东西才能使用 Javascript 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T00:43:57.313

在大多数情况下，JavaScript 是一种客户端脚本语言。这意味着代码在浏览器中运行，因此您无需在服务器上执行任何操作即可启用它。

例外情况是安装某种用[Node.js](http://nodejs.org/)编写的 Web 服务器，这是可能的，但在您的情况下完全没有必要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T00:42:07.737

网页上下文中的 JavaScript 代码与服务器无关，由浏览器直接执行。每个浏览器都有自己的 JavaScript 引擎（例如 Chrome 的 V8、IE 的 Chakra、FireFox 的 SpiderMonkey）。但是，可以使用基于 V8的[Node.js等平台将 JavaScript 用作服务器端语言。](http://nodejs.org/)

# javascript - 在 javascript 上出现错误。创建文字游戏

> ID：16049549
> 
> 赞同：-4
> 
> 时间：2013-04-17T00:40:57.083
> 
> 标签：javascript

```
var feedback = prompt("rate the game 1-10");

if (feedback < 8) {
  console.log("This is just the beginning of my game empire. Stay tuned for more!");
} else (feedback > 8) {
  console.log("I slaved away at this game and you gave me that score?! The nerve! Just you wait!");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T00:43:14.493

else 后面不应该有条件 :) 而且你的比较似乎倒退了 ;) 10 我认为通常是高分！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T00:45:06.067

应该是`else if(feedback > 8)`！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T00:44:48.297

如果要在 if-then-else 块中测试另一个条件，则需要另一个 if。

```
if (feedback < 8) {
  console.log("This is just the beginning of my game empire. Stay tuned for more!");
} else {
  if (feedback > 8) {
    console.log("I slaved away at this game and you gave me that score?! The nerve! Just you wait!");
  } else {
    // What about feedback == 8?
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T01:07:18.590

您需要放置另一个 if 或 delete de 第二个条件。检查插入值也很好。

这个

```
if (feedback < 8) {/* Stuff */}
else {/* other stuff */} 
```

或者

```
if (feedback < 8) {/* Stuff */}
else if (feedback > 8) {/* other stuff */} 
```

您还应该检查输入值

```
function feedback () {
    checkFeedback(prompt('rate the game 1-10'))
}

function checkFeedback (fdb) {
    parsed = parseInt(fdb);

    if (typeof(parsed) != 'number' || parsed < 1 || parsed > 10) {
        alert('Number between 1 and 10 needed');
        feedback();
    }

    else logMessage(parsed);
}

function logMessage(feedback) {
    if (feedback<8)
        console.log('This is just the beginning of my game empire. Stay tuned for more!')
    else
        console.log('I slaved away at this game and you gave me that score?! The nerve! Just you wait!')
}

feedback(); 
```

# python - python 的哪个统计模块支持单向方差分析和事后测试（Tukey、Scheffe 或其他）？

> ID：16049552
> 
> 赞同：21
> 
> 时间：2013-04-17T00:41:04.950
> 
> 标签：python, statistics, scipy, ipython, statsmodels

我曾尝试查看 Python 的多个统计模块，但似乎找不到任何支持`one-way ANOVA`事后测试的模块。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-01-17T04:17:02.087

ANOVA可以像这样使用的一种方式

```
from scipy import stats
f_value, p_value = stats.f_oneway(data1, data2, data3, data4, ...) 
```

这是一种方差分析方法，它返回 F 值和 P 值。
如果 P 值低于您的设置，则存在显着差异。

Tukey-kramer HSD 测试可以像这样使用

```
from statsmodels.stats.multicomp import pairwise_tukeyhsd
print pairwise_tukeyhsd(Data, Group) 
```

这是多重比较。输出就像

```
Multiple Comparison of Means - Tukey HSD,FWER=0.05
================================================
group1 group2 meandiff   lower    upper   reject
------------------------------------------------
  0      1    -35.2153 -114.8741 44.4434  False 
  0      2     46.697   -40.4993 133.8932 False 
  0      3    -7.5709    -87.49  72.3482  False 
  1      2    81.9123    5.0289  158.7956  True 
  1      3    27.6444   -40.8751  96.164  False 
  2      3    -54.2679 -131.4209 22.8852  False 
------------------------------------------------ 
```

请参阅**[此](http://jpktd.blogspot.jp/2013/03/multiple-comparison-and-tukey-hsd-or_25.html)**站点如何设置参数。
statsmodels 的 tukeyhsd 不返回 P 值。
因此，如果您想知道 P 值，请根据这些输出值计算或使用 R。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-13T14:29:59.530

我认为[Pyvttbl](https://pypi.python.org/pypi/pyvttbl)库返回一个 ANOVA 表，包括事后测试（即 TukeyHSD）。事实上，Pyvttbl 的巧妙之处在于您还可以对重复测量进行 ANOVA。

[在此处](https://github.com/rogerlew/pyvttbl/blob/master/doc/Anova1way.rst)查看 Anova1way 的文档

# haskell - vim haskell 模式的视频或教程

> ID：16049563
> 
> 赞同：10
> 
> 时间：2013-04-17T00:42:32.100
> 
> 标签：haskell, vim, ide

我正在寻找一个好主意来编写我的 Haskell 程序，我选择了 vim。现在，我需要一个好的教程才能开始。

你知道有什么好的教程吗？还是视频？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T03:43:59.720

这并不是关于如何将 vim 用于 haskell 的教程，但它们是在 vim 中使用 haskell 的精彩视频。他确实在第 2 集中解释了他是如何设置环境的。

[第一集](http://youtu.be/ScS8Q32lMxA)

[第二集](http://youtu.be/6KkF5-_erns)

这也是我一直致力于在 vim 中使用 Haskell 编写 Sed 实现的系列。

[播放列表](http://www.youtube.com/playlist?list=PLUQzXLQ6jvHL_k3QOMKXehVoZdk-sKtHd)

# spring-jdbc - 来自类路径资源的 XML 文档

> ID：16049565
> 
> 赞同：-2
> 
> 时间：2013-04-17T00:42:52.767
> 
> 标签：spring-jdbc

我收到此错误。我正在关注一个在线示例。在我添加 Spring.xml 以从 xml 文件中获取 jdbc 登录值之前，它运行良好。

我的 XML 文件在 src 文件夹下

主要代码：

```
ApplicationContext ctx = new ClassPathXmlApplicationContext("spring.xml");, 
JdbcImpl daoImpl = ctx.getBean("jdbcImpl", JdbcImpl.class);, 
IdpTpgInputFile idpInputFile = daoImpl.getInputFile(1);, 
System.out.println(idpInputFile.getFileName()); 
```

错误：

```
Apr 16, 2013 5:24:36 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@b61d36b:
    startup date [Tue Apr 16 17:24:36 PDT 2013];
    root of context hierarchy
Apr 16, 2013 5:24:36 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [spring.xml]
    Exception in thread "main" org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: 
    Line 18 in XML document from class path resource [spring.xml] is invalid;
    nested exception is org.xml.sax.SAXParseException:
        Open quote is expected for attribute "{1}" associated with an  element type  "name".
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396),
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334),
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302),
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143),
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178),
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149),
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:212)
        ,at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:126),
        at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:92),
        at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130),
        at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467),
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397),
        at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139),
        at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83),
        at com.amar.jdbc.JdbcMain.main(JdbcMain.java:21) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-04T05:50:23.733

看起来您错过了 ApplicationContext.xml 文件中的以下语句。检查一次。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:19:26.333

原因是在 spring.xml 的第 18 行缺少元素类型“名称”的开放引号。请检查。祝你好运：）

# c# - XNA 平台游戏背景不再改变

> ID：16049568
> 
> 赞同：0
> 
> 时间：2013-04-17T00:43:24.493
> 
> 标签：c#, xna, side-scroller

所以我正在开发一个横向滚动平台游戏。我更改了一些代码以允许滚动背景，效果很好；但是现在当我的水平提高时，背景保持不变。

这是图层的类

```
class Layer
{
    public Texture2D[] Textures { get; private set; }
    public float ScrollRate { get; private set; }

    public Layer(ContentManager content, string basePath, float scrollRate)
    {
        // Assumes each layer only has 3 segments.
        Textures = new Texture2D[3];
        for (int i = 0; i < 3; ++i)
            Textures[i] = content.Load<Texture2D>(basePath + "_" + i);

        ScrollRate = scrollRate;
    }

    public void Draw(SpriteBatch spriteBatch, float cameraPosition)
    {
        // Assume each segment is the same width.
        int segmentWidth = Textures[0].Width;

        // Calculate which segments to draw and how much to offset them.
        float x = cameraPosition * ScrollRate;
        int leftSegment = (int)Math.Floor(x / segmentWidth);
        int rightSegment = leftSegment + 1;
        x = (x / segmentWidth - leftSegment) * -segmentWidth;

        spriteBatch.Draw(Textures[leftSegment % Textures.Length], new Vector2(x, 0.0f), Color.White);
        spriteBatch.Draw(Textures[rightSegment % Textures.Length], new Vector2(x + segmentWidth, 0.0f), Color.White);
    }
} 
```

这是类级别加载部分的级别构造函数

```
 public Level(IServiceProvider serviceProvider, Stream fileStream, int levelIndex)
    {
        // Create a new content manager to load content used just by this level.
        content = new ContentManager(serviceProvider, "Content");

        timeRemaining = TimeSpan.FromMinutes(2.0);

        LoadTiles(fileStream);

        // Load background layer textures. 
        layers = new Layer[3];

        layers[0] = new Layer(Content, "Backgrounds/Layer0", 0.2f);
        layers[1] = new Layer(Content, "Backgrounds/Layer1", 0.5f);
        layers[2] = new Layer(Content, "Backgrounds/Layer2", 0.8f);

        // Load sounds.
        exitReachedSound = Content.Load<SoundEffect>("Sounds/ExitReached");
    } 
```

在我更改它以允许滚动之前它看起来像这样

```
 layers = new Texture2D[3];
for (int i = 0; i < layers.Length; ++i)
{
  // Choose a random segment if each background layer for level variety.
  int segmentIndex = random.Next(3);
  layers[i] = Content.Load<Texture2D>("Backgrounds/Layer" + i + "_" + segmentIndex);
} 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:27:00.087

我在这里没有得到你想要的东西：

```
spriteBatch.Draw(Textures[leftSegment % Textures.Length], new Vector2(x, 0.0f), Color.White);
spriteBatch.Draw(Textures[rightSegment % Textures.Length], new Vector2(x + segmentWidth, 0.0f), Color.White); 
```

更准确地说，这两件事：

```
leftSegment % Texture.Length
rightSegment % Textures.Length 
```

您是否尝试过手动绘制插入索引？喜欢...

```
spriteBatch.Draw(Textures[0]...
spriteBatch.Draw(Textures[1]...
... 
```

因为那些*leftSegment*和*rightSegment*都依赖于segmentWidth，对吧？

```
int segmentWidth = Textures[0].Width; 
```

那个宽度总是一样的吗？如果是，则无需对 draw 方法的纹理索引执行此操作，因为它始终是相同的索引...

我不太明白你在那里尝试了什么（对不起，我有点笨），但这听起来......对我来说很奇怪......我不知道，也许我只是在胡说八道东西...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T00:54:22.733

好的，我注意到几点：

1.  当您将其更改为允许滚动时，您的图层从 1 段变为 3 段。
2.  每个单段图层的图像是随机选择的（从三个中选择），现在每个层都按顺序包含所有三个段，由 for 循环加载。
3.  您不会在选择纹理时考虑级别索引。

所以，在过去，每个级别都会给你一个随机选择的背景，现在你每次都得到相同的选择，因为你在 for 循环中加载了第 1 段，然后是 2 段，然后是 3 段。

建议：

*   重新引入随机性
*   绘制更多背景，并将您的等级指数纳入背景选择

# regex - 如果第一个空格是 2 个空格，则在文件中将其设为 1

> ID：16049575
> 
> 赞同：0
> 
> 时间：2013-04-17T00:44:30.497
> 
> 标签：regex, linux, bash, shell, unix

我有一个文本文件，在某些行中，左边的第一个空格是 2 个空格长，我希望它是 1 个空格长。bash 中的脚本是什么？

```
123  2  5//problem
1 2  5
1 2  5
1  32  5//problem 
```

我想要的是

```
123 2  5
1 2  5
1 2  5
1 32  5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T00:56:32.053

`tr`方式：

```
cat test.txt | tr -s ' ' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T00:51:05.800

使用 sed：

```
sed 's/^\([^ ][^ ]*[ ]\)[ ]*/\1/' input 
```

从左边开始

```
^ 
```

匹配并捕获非空格字符和空格

```
\([^ ][^ ]*[ ]\) 
```

和任意数量的额外空格：

```
[ ]*   # remove the star if you only care about exactly 2 spaces 
```

并将这些替换为捕获的部分：

```
 \1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T00:53:15.290

*编辑：我意识到大卫的回答几乎是正确的。*

您可以使用 sed。

```
cat x | sed -e 's/ \+/ /' 
```

这用一个空格替换了第一次出现的一个或多个空格。

但是您也可以纯粹在 bash 中执行此操作：

```
cat x | while read a b ; do echo "$a" "$b" ; done 
```

这会在第一个单词处拆分每一行，并回显第一个单词和该行的其余部分。结果是第一个单词和该行的其余部分之间只有一个空格。

# ios - 在 UiTableView 之上创建一个按钮

> ID：16049576
> 
> 赞同：3
> 
> 时间：2013-04-17T00:44:40.440
> 
> 标签：ios, uiview, uiviewcontroller, uiscrollviewdelegate

我试图了解 Facebook Messenger 如何在屏幕按钮上创建一个按钮，该按钮位于顶部`UITableView`并跟随滚动？

![图片取自 iTunes Store](https://i.stack.imgur.com/6eEQu.jpg)

我想实现右下角的蓝色按钮。我应该用什么方法来实现这样的目标？

任何朝着正确方向的推动都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T00:52:48.633

添加叠加视图时，有几种方法可供选择：

*   作为 wrapping 的子视图`UINavigationController`，这意味着它不会随着表格的内容滚动

*   作为`UITableView`只有 1 个部分的普通样式的部分页脚

*   作为 and 的子视图，当用户滚动表格时`UITableView`，使用`UIScrollViewDelegate`'s`scrollViewDidScroll:`不断更新视图的框架（这使它看起来保持不动）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T00:47:21.717

在您的 UIViewController 子类中执行以下操作：

```
[self.view insertSubview:myButton aboveSubview:self.tableView]; 
```

注意：如果你的 UIViewController 是 UITableViewController，这段代码可能不起作用，因为 UITableViewController 将它的表视图作为它的根视图，这使得很多程序员远离它，因为这意味着限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-04T14:48:13.813

您可以轻松地在 UITableViewController 中执行此操作

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[appDelegate.window addSubView:myButton]; 
```

我试过这个，它对我有用。祝你好运！:)

# asp.net - 在asp.net（vb）中控制ajax工具包自动完成的高度

> ID：16049581
> 
> 赞同：0
> 
> 时间：2013-04-17T00:45:17.973
> 
> 标签：asp.net, css, vb.net, ajaxcontroltoolkit, autocompleteextender

我有文本框，当我开始输入时我想要它，自动完成将显示建议。这是我的 html 代码

```
<tr>
    <td valign="top" align="right">
      <asp:Label ID="labelPayableAccount" runat="server" CssClass="ItemTitle" Text="Payable Account"></asp:Label>
    </td>
    <td valign="top" align="center" class="style2">
      <asp:Label ID="labelPayableAccountColon" runat="server" CssClass="ItemTitle" Text=":"></asp:Label>
    </td>
    <td valign="top" align="left">
      <asp:TextBox ID="txtPayableAccount" runat="server" Width="400px" CssClass="textBoxString"></asp:TextBox>
    <div id="divwidth1">
    </div>

<ajaxToolkit:AutoCompleteExtender ID="autoComplete1" runat="server" EnableCaching="true"
    BehaviorID="AutoCompleteEx" MinimumPrefixLength="1" TargetControlID="txtPayableAccount"
    CompletionListElementID="divwidth1" CompletionListCssClass="AutoExtender" CompletionListItemCssClass="AutoExtenderList"
    CompletionListHighlightedItemCssClass="AutoExtenderHighlight" ServicePath="AutoComplete.asmx"
    ServiceMethod="GetCompletionListPayableAccount" CompletionSetCount="20" CompletionInterval="1"
    DelimiterCharacters=";, :" ShowOnlyCurrentWordInCompletionListItem="false">
</ajaxToolkit:AutoCompleteExtender>

<asp:RequiredFieldValidator ID="RequiredFieldValidatortxtPayableAccount" runat="server"
    ErrorMessage="Required !" ControlToValidate="txtSupplierType">
</asp:RequiredFieldValidator>
</td>
</tr> 
```

这是自动完成布局的css代码

```
.AutoExtender
{
    font-family: Verdana, Helvetica, sans-serif;
    font-size: .8em;
    font-weight: normal;
    border: solid 1px #006699;
    line-height: 20px;
    padding: 10px;
    background-color: White;
    margin-left: 10px;
    max-height:180px;
}
.AutoExtenderList
{
    border-bottom: dotted 1px #006699;
    cursor: pointer;
    color: Maroon;
}
.AutoExtenderHighlight
{
    color: White;
    background-color: #006699;
    cursor: pointer;
}
#divwidth1
{
    width: auto !important;
    height:180px !important;
}
#divwidth1 div
{
    width: auto !important;
} 
```

我已经设计了布局，使自动完成框架的高度为 180px，但列表不会这样做，这是快照

![在此处输入图像描述](https://i.stack.imgur.com/cE4VF.jpg)

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:24:17.280

也许尝试添加溢出 css 属性？

```
#divwidth1
{
    width: auto !important;
    height:180px !important;

    **overflow: hidden;**
} 
```

# css - Twitter Boostrap 中的样式复选框蓝色悬停

> ID：16049584
> 
> 赞同：0
> 
> 时间：2013-04-17T00:45:44.107
> 
> 标签：css, forms, twitter-bootstrap, firebug, google-chrome-devtools

我似乎无法定位 Twitter Bootstrap 中复选框的蓝色悬停背景。我的项目在本地开发中，但只需查看此页面上的任何复选框[http://twitter.github.io/bootstrap/base-css.html#forms](http://twitter.github.io/bootstrap/base-css.html#forms) - 当我使用 Firebug 将它们设置为悬停时，它们不会像正常悬停。我也尝试过 Chrome 开发工具。我也刚刚尝试使用

```
input[type="checkbox"] {

} 
```

达到目标。我试过影响`background-color`和`box-shadow`（插图），似乎没有什么能摆脱蓝色。

有没有人有这方面的经验？

**我不是在问[如何设置复选框的样式](https://stackoverflow.com/questions/4148499/how-to-style-checkbox-using-css)，如果该答案包含并回答我道歉，请指出。我要问的是特定于 Bootstrap 的。我在问蓝色色调来自哪个属性（在 bootsrap 中）。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T00:59:16.190

没有 Twitter Bootstrap 属性。这只是取决于浏览器。在这里，看看这个简单的复选框。它在悬停时与在 Bootstrap 中具有相同的蓝色。

```
<input type="checkbox"/> 
```

[http://jsfiddle.net/gjVm7/](http://jsfiddle.net/gjVm7/)

# html - css资源有类型text/html如何修复？

> ID：16049585
> 
> 赞同：-1
> 
> 时间：2013-04-17T00:45:47.273
> 
> 标签：html, css, mime-types

这是网址：[现已隐藏]

如果您单击右上角的“登录”，则会出现一个弹出窗口，您会注意到其中没有 css。但是，如果您加载 iframe 的源代码并查看网络选项卡，则 css 文件的类型为 text/html。我该如何解决？这是 IIS 设置吗？

使用这个 url: [now hidden] 进行测试。

这是我们生产网站上的有效网址！[现已隐藏]

*** 编辑 *** 抱歉，我必须隐藏 URL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:00:42.060

解决了主题文件夹未标记为“忽略 SSL”的 web.config 问题

# c# - Linq 查询连接 4 个表

> ID：16049586
> 
> 赞同：0
> 
> 时间：2013-04-17T00:45:54.973
> 
> 标签：c#, asp.net, linq, join

我有一个名为deliveries 的表，其中包含id、shiftid、occurrence、delfee 列）。我还有另外三个表 delcash、delcc、delsplit。del cash 有列 (id,cost,paid)，delcc 有列 (id,cccost,ccpaid,cashtip)，delsplit 有列(id,cashcost,cashpaid,cccost,ccpaid)。id 根据付款类型将交付条目链接到其他三个表之一。我正在尝试获取一个列表，其中表格以某种方式连接在一起，以便我可以遍历列表并在视图中获取一个表格，该表格按发生顺序显示每个交付以及每个交付的小费和交付费用。知道是否可以这样做吗？还是我应该只使用 SQL？

```
SELECT deliveries.occurrence, deliveries.delfee,delcash.cost,delcash.paid,delcc.cost,delcc.paid,delcc.cashtip,
delsplit.cashcost,delsplit.cashpaid,delsplit.cccost,delsplit.ccpaid
FROM deliveries
LEFT JOIN delcash
ON deliveries.id = delcash.id
LEFT JOIN delcc
ON deliveries.id = delcc.id
LEFT JOIN delsplit
ON deliveries.id = delsplit.id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:03:41.763

您可以创建一个新类并让三个成本表从该类继承，然后您可以应用每个具体类型的表策略来映射表。

请参阅： [http ://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy- tph.aspx](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)

或重新设计您的数据库并按类型策略应用表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:15:07.497

尝试这样的事情：

```
var joinedDel = from delivery in tblDeliveries
                join delC in tblDelCash on delivery.id equals delC.id
                join delCC in tblDelCreditCard on delivery.id equals delCC.id
                join delSplit in tblDelSplit on delivery.id equals delSplit.id
                select new {
                      //Then create a new instance of Anonymous object where you will set all values of its properties
                      //For example, you can set ShiftID = delivery.ShiftID
                }; 
```

我还建议先规范化您的表格（请参阅此[链接](http://en.wikipedia.org/wiki/Database_normalization)以供参考）。这将使您更了解如何正确连接这些表。

# php - 能够使用 $_GET 但不能接收数据 $_POST

> ID：16049591
> 
> 赞同：0
> 
> 时间：2013-04-17T00:46:20.610
> 
> 标签：php, ajax, post, get

使用 Ajax 与服务器通信，

我正在尝试使用 AJAX 将一个值传递给 dat.php 并从 dat.php 返回另一个值。下面的代码在我使用 GET 时工作正常，但不适用于 POST。我需要使用 POST，因为这是我试图传递的敏感信息。知道为什么会这样。

这是我在 test.php 上的代码

```
<html>
<body>

<form action="<?php echo $_SERVER['$PHP_SELF'];?>" method="post">

<input type="text" name="value" onchange="ch_email1(this.value)"></input>

</form>

<script>
function ch_email1(str){
    var ajaxRequest;    
    try{
        ajaxRequest = new XMLHttpRequest();
    } catch (e){
        try{
        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
        try{
        ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e){
        // Something went wrong
                var xl=xmlhttp.responseText
        alert("Something Went wrong");
        return false;
            }
        }
    }
    ajaxRequest.onreadystatechange = function(){
        if(ajaxRequest.readyState == 4){
            var xl=ajaxRequest.responseText;
alert (xl);

        }
    }
    ajaxRequest.open("POST","dat.php?q="+str, true);
    ajaxRequest.send(null); 
}

</script> 
</body>
</html> 
```

这是 dat.php

```
<?php

$q=$_POST['q'];

echo $q;

?> 
```

请注意，当我用 GET 替换 POST 时，上面的代码可以正常工作。任何想法为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T00:52:01.393

这可能会有所帮助：

```
 ajaxRequest.open("POST","dat.php", true);
 ajaxRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
 ajaxRequest.send("q="+str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T00:51:52.833

看看这个页面。
[http://www.openjs.com/articles/ajax_xmlhttp_using_post.php](http://www.openjs.com/articles/ajax_xmlhttp_using_post.php)

现在，您正在发送一个没有任何内容的发布请求。附加到 url 只会更改 $_GET 变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T00:52:08.813

您正在将`POST`Ajax 调用与`GET`方式混合

当您使用 POST 发送 AJAX 调用时，您不必在 URL 上放置参数，但您必须使用该`.send()`方法发送参数。

例子：

```
ajaxRequest.open("POST","dat.php",true);
ajaxRequest.send("q=" + str); 
```

您应该使用像 jQuery 或其他这样的 JS 库，这将为您完成，而不是重新发明轮子并遇到常见问题。

# asp.net - asmx Web 服务无法通过 FineUploader 文件上传返回 JSON

> ID：16049592
> 
> 赞同：1
> 
> 时间：2013-04-17T00:46:28.323
> 
> 标签：asp.net, ajax, json, web-services, jquery

我知道在这个主题上有很多与我类似的问题，但这些问题并不能解决我的问题。我知道 Web 服务自然地将我的对象解析为 json 作为框架的一部分。我已手动将请求标头标头 Accept 设置为 'application/json, text/javascript, */* ; q=0.01'。我已将其添加`<ScriptMethod(ResponseFormat:=ResponseFormat.Json)>`到我的网络服务中。

很明显，我的 Web 服务正在使用文本/纯文本响应响应文件上传请求标头，并且解析我的简单 FineUploaderResponse 对象失败。请记住，对同一 Web 服务的常规 jQuery AJAX 调用可以正常工作。我不希望使用 Web API 或通用处理程序来代替我的 Web，因为多个网站都依赖于我的框架并期望这个标准。

提前致谢！

编码：

```
Public Class FineUploaderResponse
        Property Success As Boolean
    End Class

 <WebMethod(EnableSession:=True)> _
<ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
Public Function UploadPhotos()
    'next three lines are pointless, didn't help
    'HttpContext.Current.Response.Clear()
    'HttpContext.Current.Response.ContentType = "application/json"
    'HttpContext.Current.Response.Charset = "utf-8"

    Dim response As New FineUploaderResponse()
    response.Success = True

    Return response

End Function 
```

现在当然，如果我这样做，这个网络服务就可以工作：

```
 $(document).ready(function () {
            $.ajax(
            {
                url: "/Services/PhotosService.asmx/UploadPhotos",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    console.log(data.d);
                }

            });

        }); 
```

标准的jQuery请求头是

```
POST http://localhost:3066/Services/PhotosService.asmx/UploadPhotos HTTP/1.1
Host: localhost:3066
Proxy-Connection: keep-alive
Content-Length: 0
Cache-Control: no-cache
Pragma: no-cache
Origin: http://localhost:3066
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.64 Safari/537.31
Content-Type: application/json; charset=utf-8
Accept: application/json, text/javascript, */*; q=0.01
X-Requested-With: XMLHttpRequest
Referer: http://localhost:3066/Test.aspx
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

但我正在使用 FineUploader，它正在发布 Content-Type:multipart/form-data; 请注意，尽管 jQuery AJAX 和 FineUploader 请求的 Accept 标头是相同的：

```
POST http://localhost:3066/Services/PhotosService.asmx/UploadPhotos HTTP/1.1
Host: localhost:3066
Proxy-Connection: keep-alive
Content-Length: 110634
Cache-Control: no-cache
Pragma: no-cache
Origin: http://localhost:3066
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.64 Safari/537.31
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary449tHPTKEpuO5jOR
Accept: application/json, text/javascript, */*; q=0.01
X-Requested-With: XMLHttpRequest
Referer: http://localhost:3066/Sellers/photos/?pid=37344
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

来自标准 Jquery ajax 调用的 Web 服务响应是：

```
HTTP/1.1 200 OK
Server: ASP.NET Development Server/10.0.0.0
Date: Wed, 17 Apr 2013 00:12:21 GMT
X-AspNet-Version: 4.0.30319
Cache-Control: private, max-age=0
Content-Type: application/json; charset=utf-8
Content-Length: 22
Connection: Close 
```

来自 FineUploader 发布文件请求的 Web 服务响应是：

```
HTTP/1.1 500 Internal Server Error
Server: ASP.NET Development Server/10.0.0.0
Date: Wed, 17 Apr 2013 00:18:26 GMT
X-AspNet-Version: 4.0.30319
Cache-Control: private
Content-Type: text/plain; charset=utf-8
Content-Length: 1936
Connection: Close 
```

内部服务器 500 错误错误消息详细信息是：

```
System.InvalidOperationException: There was an error generating the XML document. ---> System.InvalidOperationException: The type Kazork.AppCode.PhotosService+FineUploaderResponse was not expected. Use the XmlInclude or SoapInclude attribute to specify types that are not known statically.
   at System.Xml.Serialization.XmlSerializationWriter.WriteTypedPrimitive(String name, String ns, Object o, Boolean xsiType)
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriter1.Write1_Object(String n, String ns, Object o, Boolean isNullable, Boolean needType)
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriter1.Write3_anyType(Object o)
   at Microsoft.Xml.Serialization.GeneratedAssembly.ObjectSerializer1.Serialize(Object objectToSerialize, XmlSerializationWriter writer)
   at System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces, String encodingStyle, String id)
   --- End of inner exception stack trace ---
   at System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces, String encodingStyle, String id)
   at System.Xml.Serialization.XmlSerializer.Serialize(TextWriter textWriter, Object o, XmlSerializerNamespaces namespaces)
   at System.Web.Services.Protocols.XmlReturnWriter.Write(HttpResponse response, Stream outputStream, Object returnValue)
   at System.Web.Services.Protocols.HttpServerProtocol.WriteReturns(Object[] returnValues, Stream outputStream)
   at System.Web.Services.Protocols.WebServiceHandler.WriteReturns(Object[] returnValues)
   at System.Web.Services.Protocols.WebServiceHandler.Invoke() 
```

而且，如果您好奇，这是我的 FineUploader 调用：

```
 var uploader = new qq.FineUploader({
            element: document.getElementById('bootstrapped-fine-uploader'),
            request: {
                endpoint: "/Services/PhotosService.asmx/UploadPhotos",
                forceMultipart: true,
                params: { propertyId:<%=PropertyId %>},
                customHeaders: { Accept: 'application/json, text/javascript, */*; q=0.01' }
            },
            text: {
                uploadButton: '<i class="icon-upload icon-white"></i>Upload nice images.'
            },
            template: '<div class="qq-uploader">' +
                        '<pre class="qq-upload-drop-area"><span>{dragZoneText}</span></pre>' +
                        '<div class="qq-upload-button btn btn-success" style="width: auto;">{uploadButtonText}</div>' +
                        '<span class="qq-drop-processing"><span>{dropProcessingText}</span><span class="qq-drop-processing-spinner"></span></span>' +
                      '</div>' +
                      '<ul class="qq-upload-list" style="margin-top: 10px; text-align: center;"></ul>' +
                      '',
            classes: {
                success: 'alert alert-success',
                fail: 'alert alert-error'
            },
            debug: false,
            callbacks: {
//                onComplete: function (id, fileName, responseJson) {
//                    $.when(loadThumbs()).done(function () {
//                        $(".qq-upload-list > .alert-success").remove();
//                    });
//                    toastr.success("Success!");
//                },
                 onComplete: function(id, fileName, responseJSON) {
                      if (responseJSON.success) {
                        $('#file-' + id).removeClass('alert-info')
                                        .addClass('alert-success')
                                        .html('<i class="icon-ok"></i> ' +
                                              'Successfully saved ' +
                                              '“' + fileName + '”' +
                                              '<br><img src="/images/message_ok.png" alt="' + fileName + '">');

                          $.when(loadThumbs()).done(function () {
                                $(".qq-upload-list > .alert-success").remove();
                            });
                          toastr.success("Success!");
                      } else {
                        $('#file-' + id).removeClass('alert-info')
                                        .addClass('alert-error')
                                        .html('<i class="icon-exclamation-sign"></i> ' +
                                              'Error with ' +
                                              '“' + fileName + '”: ' +
                                              responseJSON.error);
                      }
                },
                onError: function (id, fileName, errorReason) {
                    toastr.error("Failed! Try again.");
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:29:03.153

好吧，很容易解决，但令人沮丧的是，Web 服务浪费了我很多时间来尝试维护现代 Web 应用程序。但是此时我不需要迁移到 Web API，主要是因为我的 Web 应用程序依赖于会话（您可以将会话引入 Web API，但这显然不是 RESTful）。

所以我用我自己格式化的 JSON 响应替换了 FineUploaderResponse 类：

```
<WebMethod(EnableSession:=True)> _
<ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
Public Sub UploadPhotos()

    Context.Response.Write(New ResultData().GetResultDataJSON("success", "true"))

End Sub

    Public Function GetResultDataJSON(key As String, value As String) As String
        Dim oBuilder As StringBuilder = New StringBuilder()
        oBuilder.Append("{")
        oBuilder.AppendFormat("""{0}"" : {1}", key, value)
        oBuilder.Append("}")
        Return oBuilder.ToString()
    End Function 
```

这是我的 FineUploader Javascript：

```
/*=================================================*/
//fineUploaderInitialize
/*=================================================*/
    function createUploader() {
        var uploader = new qq.FineUploader({
            element: document.getElementById('bootstrapped-fine-uploader'),
            request: {
                endpoint: "/Services/PhotosService.asmx/UploadPhotos",
                forceMultipart: true,
                params: { propertyId:$('#hiddenPropertyIdUploadPhotosUserControl').val()},
                customHeaders: { Accept: 'application/json, text/javascript, */*; q=0.01' },
                allowedExtensions: ['gif', 'jpeg', 'jpg', 'png'],
            },
            text: {
                uploadButton: 'Drag & drop photos into this area or CLICK HERE to upload photos'
            },
            template: '<div class="qq-uploader text-center" style="height:70px;background-color:white;border-radius:6px;">' +
                        '<div class="qq-upload-button btn btn-success col-lg-12">{uploadButtonText}</div>' +
                        '<span class="qq-drop-processing"><span>{dropProcessingText}</span><span class="qq-drop-processing-spinner"></span></span>' +
                        '<pre class="qq-upload-drop-area"><span>{dragZoneText}</span></pre>' +
                      '</div>' +
                      '<ul class="qq-upload-list" style="margin-top: 10px; text-align: center;"></ul>' +
                      '',
            classes: {
                success: 'alert alert-success',
                fail: 'alert alert-error'
            },
            debug: false,
            callbacks: {
                onComplete: function(id, fileName, responseJSON) {
                    if (responseJSON.success) {
                        $('#file-' + id).removeClass('alert-info')
                                        .addClass('alert-success')
                                        .html('<i class="glyphicon glyphicon-ok"></i> ' +
                                              'Successfully saved ' +
                                              '“' + fileName + '”' +
                                              '<br><img src="/images/message_ok.png" alt="' + fileName + '">');
                        $.when(loadThumbs()).done(function () {
                            $(".qq-upload-list > .alert-success").remove();
                        });
                        toastr.success("Success!");
                    } else {
                        $('#file-' + id).removeClass('alert-info')
                                        .addClass('alert-error')
                                        .html('<i class="glyphicon glyphicon-exclamation-sign"></i> ' +
                                              'Error with ' +
                                              '“' + fileName + '”: ' +
                                              responseJSON.error);
                    }
                },
                onError: function (id, fileName, errorReason) {
                    if(errorReason == 'XHR returned response code 0'){
                        toastr.error('File Size Cannot Exceed 20 Megabytes');
                    }else{
                        toastr.error(errorReason);
                    }
                }
            }
        });
    }
/*=================================================*/ 
```

# ruby-on-rails - ActiveRecord 加入时分组

> ID：16049594
> 
> 赞同：4
> 
> 时间：2013-04-17T00:46:40.977
> 
> 标签：ruby-on-rails, activerecord

当我不得不加入另一张桌子时，真的很难让一群人工作。当我不加入时，我可以让 group by 工作，但是当我想按另一张表上的列分组时，我开始遇到问题。

```
Tables:
Book
id, category_id

Category
id, name

ActiveRecord schema:

class Category < ActiveRecord::Base
  has_many :books
end

class Book < ActiveRecord::Base
  belongs_to :category
end 
```

我正在尝试根据类别计数来分组。IE 我想知道每个类别有多少本书。

我尝试了很多东西，这是最新的，

```
books = Book.joins(:category).where(:select => 'count(books.id), Category.name', :group => 'Category.name') 
```

我希望得到类似的东西

```
[{:name => fiction, :count => 12}, {:name => non-fiction, :count => 4}] 
```

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:04:18.947

如果您只是在计算每个类别中的书籍数量，那么您从关联中获得的关联方法`has_many`可能就足够了（查看[关联基础指南](http://guides.rubyonrails.org/association_basics.html#has_many-association-reference)）。您可以使用以下方式获取属于特定类别的书籍数量

```
@category.books.size 
```

如果您想构建您描述的数组，您可以自己构建它：

```
array = Categories.all.map { |cat| { name: cat.name, count: cat.books.size } } 
```

另外一点，如果您可能经常查找某个类别中的图书数量，您可能还需要考虑使用计数器缓存，以便获取某个类别中的图书数量不需要额外访问数据库。为此，您需要在您的图书模型中进行以下更改：

```
# books.rb
belongs_to :category, counter_cache: true 
```

并创建一个迁移以添加和初始化计数器缓存要使用的列：

```
class AddBooksCountToCategories < ActiveRecord::Migration
  def change
    add_column :categories, :books_count, :integer, default: 0, null: false

    Category.all.each do |cat|
      Category.reset_counters(cat.id, :books)
    end
  end
end 
```

* * *

**编辑**：经过一些实验，以下内容应该让您接近您想要的：

```
counts = Category.joins(:books).count(group: 'categories.name') 
```

这将返回一个散列，其中类别名称作为键，计数作为值。然后，您可以使用`.map { |k, v| { name: k, count: v } }`它来完全按照您在问题中指定的格式。

不过，我会留意类似的事情——一旦你有足够多的书，加入可能会稍微减慢速度。using`counter_cache`总是性能最高的，对于足够多的书籍，使用两个单独的查询进行预加载也可能会给您带来更好的性能（这就是`includes`在 Rails 2.1 中使用连接进行预加载更改为多个查询的原因）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-20T21:53:04.083

怎么样： `Category.joins(:books).group("categories.id").count` 它应该返回一个键/值对数组，其中键代表类别 id，值代表与该类别关联的书籍数量。

# jquery - 当 dateFormat 不包含它时，如何告诉 jQuery UI datepicker 年份？

> ID：16049599
> 
> 赞同：1
> 
> 时间：2013-04-17T00:47:21.223
> 
> 标签：jquery, jquery-ui

我正在尝试创建两个日期输入，而不是在日期字段中显示年份。我希望格式更容易阅读 - 所以“Fri, Apr 19”而不是“2013/4/19”。我将更传统的格式存储在同时更新的备用字段中。这很好用，除了当我选择未来一年的日期然后返回点击相同的日期输入时。它会加载当前年份的日期。这是一些测试代码，用于显示情况以及我试图解决该行为的尝试。

```
<form>
    <input type="text" name="from" id="ff_from" class="date" value=""  />
    <input type="text" name="to" id="ff_to" class="date" value="" />
    <div class="extra">
        <p>Formatted version of dates</p>
        <input type="text" disabled id="ff_from_formatted" value="" />
        <input type="text" disabled id="ff_to_formatted" value="" />
    </div>
</form>

<script>
// add n number of days
Date.prototype.addDays = function(n) {
    this.setDate(this.getDate()+n);
    return this;
};

$("#ff_from").datepicker({ 
    dateFormat: "D, M dd",
    altField:$("#ff_from_formatted"),
    altFormat: "yy/mm/dd",
    minDate:0,
    onClose:function(){
        $("#ff_to").focus();
    }
}).change(function(){
    var fromDate=new Date($("#ff_from_formatted").val());
    var toDate=new Date($("#ff_to_formatted").val());
    minToDate=fromDate.addDays(1);
    if (fromDate >= toDate) {
        $("#ff_to").datepicker("setDate", minToDate);
    }
    $("#ff_to").datepicker("option","minDate", minToDate);
});
$("#ff_to").datepicker({ 
    dateFormat: "D, M dd",
    altField:$("#ff_to_formatted"),
    altFormat: "yy/mm/dd",
    minDate:+1
});
</script> 
```

在这里测试：http: [//jsfiddle.net/ZpfAB/9/](http://jsfiddle.net/ZpfAB/9/)

重现问题

1.  在第一个字段中选择 2014 年的日期
2.  再次单击输入字段。它将改为加载当前日期。

* * *

编辑：下面的最终解决方案感谢@clav 的帮助 - 这涉及删除 altFields 并改用隐藏的输入字段。我使用了 opacity:0 而不是 display:none，因为在使用 display:none 时我在 ff_to 字段上遇到了奇怪的错误。

[http://jsfiddle.net/ZpfAB/33/](http://jsfiddle.net/ZpfAB/33/)

```
<form>
    <input type="text" id="ff_from_display" class="date"/>
    <input type="text" name="from" id="ff_from" class="date" style="opacity:0;width:0;"/>
    <input type="text" id="ff_to_display" class="date"/>
    <input type="text" name="to" id="ff_to" class="date" style="opacity:0;width:0;" />
</form>

<script>
// add n number of days
Date.prototype.addDays = function(n) {
    this.setDate(this.getDate()+n);
    return this;
};

$('#ff_from_display').focus(function() {
    $("#ff_from").datepicker('show');
});

$('#ff_to_display').focus(function() {
    $("#ff_to").datepicker('show');
});

$("#ff_from").datepicker({ 
    dateFormat: "yy/mm/dd",
    minDate:0,
    onClose:function(){  
        $("#ff_to_display").focus();
    }
}).change(function(){
    var fromDate = $("#ff_from").datepicker('getDate');
    $('#ff_from_display').val($.datepicker.formatDate('D, M dd', fromDate));
    var toDate=new Date($("#ff_to_formatted").val());
    minToDate=fromDate.addDays(1);
    if (fromDate >= toDate) {
        $("#ff_to").datepicker("setDate", minToDate);
    }
    $("#ff_to").datepicker("option","minDate", minToDate);
});

$("#ff_to").datepicker({ 
    dateFormat: "yy/mm/dd",
    minDate:+1
}).change(function(){
    var toDate = $("#ff_to").datepicker('getDate');
    $('#ff_to_display').val($.datepicker.formatDate('D, M dd', toDate));
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:53:59.267

日期选择器似乎有一个错误，即使在`beforeShow`函数中手动将日期设置为正确的日期，年份仍然显示不正确。一种有点hack的解决方法是将格式设置为包含年份的格式，然后隐藏日期选择器输入字段，创建不同的文本字段以显示日期并在用户单击“显示”字段时显示日期选择器. 然后在`onClose`回调中，您可以通过使用格式化所选日期来设置显示字段的值`$.datepicker.formatDate('D, M dd', date)`。像这样的东西：

```
<!-- new display field that will show the selected date in "D, M dd" format -->
<input type="text" id="ff_display" class="date"/> 
<!-- hide the real datepicker text field -->
<input type="text" name="from" id="ff_from" class="date" style="display: none;"/>

// show the datepicker when the user clicks the visible "display" date field
$('#ff_display').click(function() {
    $("#ff_from").datepicker('show');
});

$("#ff_from").datepicker({ 
    dateFormat: "yy/mm/dd", // date format contains year so it won't get lost
    gotoCurrent: true,
    altField:$("#ff_from_formatted"),
    altFormat: "yy/mm/dd",
    onClose:function(){  
        // get the selected date, put it in nice format and set value of display field
        var date = $("#ff_from").datepicker('getDate');
        $('#ff_display').val($.datepicker.formatDate('D, M dd', date));
        $("#ff_to").focus();
    }
.... rest of datepicker init code 
```

这是一个更新的[小提琴](http://jsfiddle.net/ZpfAB/29/)，我刚刚做了第一次约会，但您可以看到如何将相同的逻辑应用于其他日期字段。

# python - 关于python中的迭代器

> ID：16049601
> 
> 赞同：4
> 
> 时间：2013-04-17T00:47:37.050
> 
> 标签：python, loops, iterator

如果我有以下列表：

```
a = [1, 2, 3] 
```

我运行以下代码：

```
for x in a:
  x += 1 
```

看来这并没有改变列表`a`。

但是，如果我执行以下操作：

```
for i in range(0, len(a)):
  a[i] += 1 
```

这将修改“a”的内容。

所以我猜想`x`并以不同的方式`a[i]`指代元素。`a`究竟是什么导致了这种差异？它们各自是如何引用的元素的`a`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T00:55:21.767

当你遍历一个列表时，每个元素都会依次产生。但是，有不同种类的对象。 *可变*和*不可变*。当您执行以下操作时：

```
a += 1 
```

对于不可变对象，它大致转换为：

```
a = a + 1 
```

现在在这种情况下，您通过 获取对象引用`a`，将 1 添加到它以创建一个**新对象**。然后为该新对象分配名称`a`。请注意，如果我们在迭代时这样做，我们根本不会触及列表——我们只是不断地创建新对象并将它们分配给 name `a`。

这对于*可变*对象是不同的。然后`a += 1`居然*就地*改变了对象。因此，列表将看到更改，因为它所持有的对象已更改（突变）。（对于不可变对象，列表中包含的对象没有改变，因为它不可能）。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/15376509/when-is-i-x-different-from-i-i-x-in-python)。

这也使您在按索引迭代时更清楚地知道发生了什么。您构造了一个新整数并将其放入列表中（忘记之前该插槽中的任何内容）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T00:59:16.993

当你说，

```
for x in [1,2,3]:
    x+=1 
```

您是说，暂时将 x 保存为变量，然后在该临时保存中添加一个。当您进行下一次迭代时，垃圾人会破坏该变量，因为它是临时的。x 不是列表中的位置。它是列表中该位置的值。

编辑：当我说它被删除时，我并不清楚我的话。发生的情况是，每次通过循环时，x 都会被另一个值替换，所以之前发生的事情就消失了（除非你用它做了其他事情）。但是，使用您正在使用的操作，您不会更改列表中任何元素的值。我对混乱不好。

当你以另一种方式做时，

```
for x in range(len(lst)):
    lst[x] += 1 
```

然后你在谈论列表的值。x 是变量的索引，因此可以在该位置更改列表值的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T01:09:40.077

这里重要的概念是**引用**的概念。在 Python 中，变量是对位于内存某处的对象的引用。让我们使用箭头 → 来表示引用。变量→对象。左边是变量，右边是对象。

可以将数组可视化为*引用*三个整数对象的三个变量。

```
a[0] → int(1)
a[1] → int(2)
a[2] → int(3) 
```

现在，整数对象是不可变的。它们不能改变。当您更改整数变量时，您不会更改变量所引用的对象。你不能，因为`int`s 是不可变的。您可以做的是使变量引用不同的对象。

### 直接更新

让我们先看看第二个循环，因为它更简单。如果直接更新数组会发生什么？

```
for i in range(0, len(a)):
  a[i] += 1 
```

首先让我们展开循环：

```
a[0] += 1
a[1] += 1
a[2] += 1 
```

对于整数，`a[0] += 1`等价于`a[0] = a[0] + 1`。首先，Python 评估`a[0] + 1`并获得结果`int(2)`。然后它更改`a[0]`为 reference `int(2)`。第二个和第三个语句的评估类似。

```
a = [1, 2, 3]  # a[0] → int(1)
               # a[1] → int(2)
               # a[2] → int(3)

a[0] += 1      # a[0] → int(2)
a[1] += 1      # a[1] → int(3)
a[2] += 1      # a[2] → int(4) 
```

### 间接更新

那我称之为“间接”更新呢？

```
for x in a:
  x += 1 
```

展开循环会产生这一系列等效的语句：

```
x = a[0]
x += 1
x = a[1]
x += 1
x = a[2]
x += 1 
```

每一步会发生什么，为什么数组没有改变？

```
x = a[0] 
```

这使得`x`引用任何对象`a[0]`引用。两者`a[0]`和都`x`引用同一个`int(1)`对象，但`x`不直接连接到`a[0]`. 它指的是所指的东西`a[0]`，而不是`a[0]`它本身。

```
x += 1 
```

这改变了`x`所指的内容。它对 没有影响`a[0]`。

第二个和第三个作业也会发生同样的事情。结果是`x`不断变化，而元素`a`只是被读取但从未被修改。所以当循环终止时`a`是不变的。

```
a = [1, 2, 3]  # a[0] → int(1)
               # a[1] → int(2)
               # a[2] → int(3)

x = a[0]       # x → int(1)
x += 1         # x → int(2)
x = a[1]       # x → int(2)
x += 1         # x → int(3)
x = a[2]       # x → int(3)
x += 1         # x → int(4) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T00:52:18.133

把它想象成在你的第一个循环中，x 只是 a 中每个元素的替代品。它不是实际的元素`a`（尽管`id()`这是因为它们都引用了同一个对象）。当你这样做`x += 1`时，你只是在改变`x`列表中的值而不是值。

在您的第二个 for 循环中，您实际上是通过执行`a[i] += 1`.

# c# - 为什么这段代码不能检测页面更新？

> ID：16049605
> 
> 赞同：0
> 
> 时间：2013-04-17T00:48:07.930
> 
> 标签：c#, http-headers, httpwebresponse

好吧，这个问题几乎解释了它。我知道在 String.equals 期间代码很脏，但我只是想看看我是否理解标题响应。显然我没有，因为我在浏览器中观看，当添加新问题时，我的程序从不输出“是的，它改变了”为什么会这样？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Web;
using System.IO;
using System.Net;

namespace ConsoleApplication4
{
    class Program
    {
        static void Main(string[] args)
        {

            Uri myUri = new Uri("http://stackoverflow.com/questions?sort=newest");

            HttpWebRequest myHttpWebRequest = (HttpWebRequest)WebRequest.Create(myUri);

            HttpWebResponse myHttpWebResponse = (HttpWebResponse)myHttpWebRequest.GetResponse();
            string org = myHttpWebResponse.Headers.GetValues("Date")[0];
            string newone = "";

            while (true) //STRICTING FOR TESTING. THIS WOULD BE A Dos ATTACK AS IT NEVER HAS A DELAY BETWEEN REQUESTS.
            {

                myHttpWebResponse = (HttpWebResponse)myHttpWebRequest.GetResponse();
                newone = myHttpWebResponse.Headers.GetValues("Date")[0];

                if (!newone.Equals(org))
                    break;
            }

            Console.WriteLine("Yep it changed");
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:51:10.860

您的代码`HttpWebResponse`一遍又一遍地检查相同的内容。它不是发出新请求，它只是查看第一个（也是唯一一个请求）的响应。

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.getresponse.aspx)：

> 多次调用 GetResponse 返回相同的响应对象；请求不会重新发出。

您必须将发出请求的所有代码放入循环中，以重新启动整个请求/响应过程。

另请注意，如果您在我的网站上运行此代码，我会非常沮丧。

# c++ - 这个 boost-asio UDP 广播代码应该如何仅与 localhost 一起使用？

> ID：16049607
> 
> 赞同：1
> 
> 时间：2013-04-17T00:48:36.237
> 
> 标签：c++, networking, boost-asio

boost-asio 超时的服务器示例有 3 个命令行参数。我需要知道第二个和第三个是什么以及如何测试服务器（在哪里`Usage: server <listen_port> <bcast_address> <bcast_port>`）。它说它们是广播端口和地址，但如果我在一台机器上作为本地主机（例如 127.0.0.1）测试它，那么会发生什么？

这是代码

```
#include <algorithm>
#include <cstdlib>
#include <deque>
#include <iostream>
#include <set>
#include <boost/bind.hpp>
#include <boost/shared_ptr.hpp>
#include <boost/enable_shared_from_this.hpp>
#include <boost/asio/deadline_timer.hpp>
#include <boost/asio/io_service.hpp>
#include <boost/asio/ip/tcp.hpp>
#include <boost/asio/ip/udp.hpp>
#include <boost/asio/read_until.hpp>
#include <boost/asio/streambuf.hpp>
#include <boost/asio/write.hpp>

using boost::asio::deadline_timer;
using boost::asio::ip::tcp;
using boost::asio::ip::udp;

//----------------------------------------------------------------------

class subscriber
{
public:
  virtual ~subscriber() {}
  virtual void deliver(const std::string& msg) = 0;
};

typedef boost::shared_ptr<subscriber> subscriber_ptr;

//----------------------------------------------------------------------

class channel
{
public:
  void join(subscriber_ptr subscriber)
  {
    subscribers_.insert(subscriber);
  }

  void leave(subscriber_ptr subscriber)
  {
    subscribers_.erase(subscriber);
  }

  void deliver(const std::string& msg)
  {
    std::for_each(subscribers_.begin(), subscribers_.end(),
        boost::bind(&subscriber::deliver, _1, boost::ref(msg)));
  }

private:
  std::set<subscriber_ptr> subscribers_;
};

//----------------------------------------------------------------------

//
// This class manages socket timeouts by applying the concept of a deadline.
// Some asynchronous operations are given deadlines by which they must complete.
// Deadlines are enforced by two "actors" that persist for the lifetime of the
// session object, one for input and one for output:
//
//  +----------------+                     +----------------+
//  |                |                     |                |
//  | check_deadline |<---+                | check_deadline |<---+
//  |                |    | async_wait()   |                |    | async_wait()
//  +----------------+    |  on input      +----------------+    |  on output
//              |         |  deadline                  |         |  deadline
//              +---------+                            +---------+
//
// If either deadline actor determines that the corresponding deadline has
// expired, the socket is closed and any outstanding operations are cancelled.
//
// The input actor reads messages from the socket, where messages are delimited
// by the newline character:
//
//  +------------+
//  |            |
//  | start_read |<---+
//  |            |    |
//  +------------+    |
//          |         |
//  async_- |    +-------------+
//   read_- |    |             |
//  until() +--->| handle_read |
//               |             |
//               +-------------+
//
// The deadline for receiving a complete message is 30 seconds. If a non-empty
// message is received, it is delivered to all subscribers. If a heartbeat (a
// message that consists of a single newline character) is received, a heartbeat
// is enqueued for the client, provided there are no other messages waiting to
// be sent.
//
// The output actor is responsible for sending messages to the client:
//
//  +--------------+
//  |              |<---------------------+
//  | await_output |                      |
//  |              |<---+                 |
//  +--------------+    |                 |
//      |      |        | async_wait()    |
//      |      +--------+                 |
//      V                                 |
//  +-------------+               +--------------+
//  |             | async_write() |              |
//  | start_write |-------------->| handle_write |
//  |             |               |              |
//  +-------------+               +--------------+
//
// The output actor first waits for an output message to be enqueued. It does
// this by using a deadline_timer as an asynchronous condition variable. The
// deadline_timer will be signalled whenever the output queue is non-empty.
//
// Once a message is available, it is sent to the client. The deadline for
// sending a complete message is 30 seconds. After the message is successfully
// sent, the output actor again waits for the output queue to become non-empty.
//
class tcp_session
  : public subscriber,
    public boost::enable_shared_from_this<tcp_session>
{
public:
  tcp_session(boost::asio::io_service& io_service, channel& ch)
    : channel_(ch),
      socket_(io_service),
      input_deadline_(io_service),
      non_empty_output_queue_(io_service),
      output_deadline_(io_service)
  {
    input_deadline_.expires_at(boost::posix_time::pos_infin);
    output_deadline_.expires_at(boost::posix_time::pos_infin);

    // The non_empty_output_queue_ deadline_timer is set to pos_infin whenever
    // the output queue is empty. This ensures that the output actor stays
    // asleep until a message is put into the queue.
    non_empty_output_queue_.expires_at(boost::posix_time::pos_infin);
  }

  tcp::socket& socket()
  {
    return socket_;
  }

  // Called by the server object to initiate the four actors.
  void start()
  {
    channel_.join(shared_from_this());

    start_read();

    input_deadline_.async_wait(
        boost::bind(&tcp_session::check_deadline,
        shared_from_this(), &input_deadline_));

    await_output();

    output_deadline_.async_wait(
        boost::bind(&tcp_session::check_deadline,
        shared_from_this(), &output_deadline_));
  }

private:
  void stop()
  {
    channel_.leave(shared_from_this());

    boost::system::error_code ignored_ec;
    socket_.close(ignored_ec);
    input_deadline_.cancel();
    non_empty_output_queue_.cancel();
    output_deadline_.cancel();
  }

  bool stopped() const
  {
    return !socket_.is_open();
  }

  void deliver(const std::string& msg)
  {
    output_queue_.push_back(msg + "\n");

    // Signal that the output queue contains messages. Modifying the expiry
    // will wake the output actor, if it is waiting on the timer.
    non_empty_output_queue_.expires_at(boost::posix_time::neg_infin);
  }

  void start_read()
  {
    // Set a deadline for the read operation.
    input_deadline_.expires_from_now(boost::posix_time::seconds(30));

    // Start an asynchronous operation to read a newline-delimited message.
    boost::asio::async_read_until(socket_, input_buffer_, '\n',
        boost::bind(&tcp_session::handle_read, shared_from_this(), _1));
  }

  void handle_read(const boost::system::error_code& ec)
  {
    if (stopped())
      return;

    if (!ec)
    {
      // Extract the newline-delimited message from the buffer.
      std::string msg;
      std::istream is(&input_buffer_);
      std::getline(is, msg);

      if (!msg.empty())
      {
        channel_.deliver(msg);
      }
      else
      {
        // We received a heartbeat message from the client. If there's nothing
        // else being sent or ready to be sent, send a heartbeat right back.
        if (output_queue_.empty())
        {
          output_queue_.push_back("\n");

          // Signal that the output queue contains messages. Modifying the
          // expiry will wake the output actor, if it is waiting on the timer.
          non_empty_output_queue_.expires_at(boost::posix_time::neg_infin);
        }
      }

      start_read();
    }
    else
    {
      stop();
    }
  }

  void await_output()
  {
    if (stopped())
      return;

    if (output_queue_.empty())
    {
      // There are no messages that are ready to be sent. The actor goes to
      // sleep by waiting on the non_empty_output_queue_ timer. When a new
      // message is added, the timer will be modified and the actor will wake.
      non_empty_output_queue_.expires_at(boost::posix_time::pos_infin);
      non_empty_output_queue_.async_wait(
          boost::bind(&tcp_session::await_output, shared_from_this()));
    }
    else
    {
      start_write();
    }
  }

  void start_write()
  {
    // Set a deadline for the write operation.
    output_deadline_.expires_from_now(boost::posix_time::seconds(30));

    // Start an asynchronous operation to send a message.
    boost::asio::async_write(socket_,
        boost::asio::buffer(output_queue_.front()),
        boost::bind(&tcp_session::handle_write, shared_from_this(), _1));
  }

  void handle_write(const boost::system::error_code& ec)
  {
    if (stopped())
      return;

    if (!ec)
    {
      output_queue_.pop_front();

      await_output();
    }
    else
    {
      stop();
    }
  }

  void check_deadline(deadline_timer* deadline)
  {
    if (stopped())
      return;

    // Check whether the deadline has passed. We compare the deadline against
    // the current time since a new asynchronous operation may have moved the
    // deadline before this actor had a chance to run.
    if (deadline->expires_at() <= deadline_timer::traits_type::now())
    {
      // The deadline has passed. Stop the session. The other actors will
      // terminate as soon as possible.
      stop();
    }
    else
    {
      // Put the actor back to sleep.
      deadline->async_wait(
          boost::bind(&tcp_session::check_deadline,
          shared_from_this(), deadline));
    }
  }

  channel& channel_;
  tcp::socket socket_;
  boost::asio::streambuf input_buffer_;
  deadline_timer input_deadline_;
  std::deque<std::string> output_queue_;
  deadline_timer non_empty_output_queue_;
  deadline_timer output_deadline_;
};

typedef boost::shared_ptr<tcp_session> tcp_session_ptr;

//----------------------------------------------------------------------

class udp_broadcaster
  : public subscriber
{
public:
  udp_broadcaster(boost::asio::io_service& io_service,
      const udp::endpoint& broadcast_endpoint)
    : socket_(io_service)
  {
    socket_.connect(broadcast_endpoint);
  }

private:
  void deliver(const std::string& msg)
  {
    boost::system::error_code ignored_ec;
    socket_.send(boost::asio::buffer(msg), 0, ignored_ec);
  }

  udp::socket socket_;
};

//----------------------------------------------------------------------

class server
{
public:
  server(boost::asio::io_service& io_service,
      const tcp::endpoint& listen_endpoint,
      const udp::endpoint& broadcast_endpoint)
    : io_service_(io_service),
      acceptor_(io_service, listen_endpoint)
  {
    subscriber_ptr bc(new udp_broadcaster(io_service_, broadcast_endpoint));
    channel_.join(bc);

    start_accept();
  }

  void start_accept()
  {
    tcp_session_ptr new_session(new tcp_session(io_service_, channel_));

    acceptor_.async_accept(new_session->socket(),
        boost::bind(&server::handle_accept, this, new_session, _1));
  }

  void handle_accept(tcp_session_ptr session,
      const boost::system::error_code& ec)
  {
    if (!ec)
    {
      session->start();
    }

    start_accept();
  }

private:
  boost::asio::io_service& io_service_;
  tcp::acceptor acceptor_;
  channel channel_;
};

//----------------------------------------------------------------------

int main(int argc, char* argv[])
{
  try
  {
    using namespace std; // For atoi.

    if (argc != 4)
    {
      std::cerr << "Usage: server <listen_port> <bcast_address> <bcast_port>\n";
      return 1;
    }

    boost::asio::io_service io_service;

    tcp::endpoint listen_endpoint(tcp::v4(), atoi(argv[1]));

    udp::endpoint broadcast_endpoint(
        boost::asio::ip::address::from_string(argv[2]), atoi(argv[3]));

    server s(io_service, listen_endpoint, broadcast_endpoint);

    io_service.run();
  }
  catch (std::exception& e)
  {
    std::cerr << "Exception: " << e.what() << "\n";
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:21:39.503

Boost.Asio 的[超时服务器](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/example/timeouts/server.cpp)示例执行以下操作：

*   用作 TCP 服务器，侦听`listen_port`第一个命令行参数。
*   强制 TCP 客户端的输入和输出期限。如果截止日期到期，则服务器将关闭连接。
*   当 TCP 客户端发送消息时，服务器将向每个连接的客户端和第二个和第三个命令行参数 and 指定的 UDP 端点发送相同的`bcast_address`消息`bcast_port`。
*   服务器只向 UDP 套接字发送数据。服务器不从 UDP 套接字读取数据。

尽管代码中使用了命名约定，但它不执行 UDP 广播。该功能是通过[`socket_base::broadcast`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/socket_base/broadcast.html)套接字选项启用的。

程序的连接图可以表示如下：

```
.--------------.    listen_port     .----------------.                  
|              |<---TCP--o )---+--->|  TCP Client A  |                       
|              |               |    '----------------'                        
|    Boost     |               |    .----------------.   
|    Asio      |               `--->|  TCP Client B  |     
|    Server    |                    '----------------'                      
|              | bcast_address:
|              | bcast_port         .----------------.
|              |----UDP--( o------->|  UDP Listener  |
'--------------'                    '----------------' 
```

*   Boost Asio 服务器“连接”到 UDP 侦听器。UDP 侦听器驻留在`bcast_address`端口上并侦听`bcast_port`。
*   Bost.Asio 服务器接受端口上的 TCP 连接`listen_port`。
*   服务器可以将数据写入所有连接。但是，服务器只会从 TCP 客户端读取数据。

例如，如果 TCP Client A 写“hello”，那么 Server 将向 TCP Client A、TCP Client B 和 UDP Listener 发送“hello”。但是，如果 UDP Listener 写“再见”，那么没有人会收到它。

* * *

下面是一些使用[netcat](http://en.wikipedia.org/wiki/Netcat)运行超时服务器示例的终端。

启动服务器，监听 TCP 端口 12345 并在端口 54321 上向 UDP 127.0.0.1 发送消息。

### 设置

```
$ ./a.out 12345 127.0.0.1 54321
```

UDP 侦听器（将侦听端口 54321 上的 UDP）：

```
$ nc -l -u 54321
```

启动 TCP 客户端 A：

```
$ 数控 127.0.0.1 12345
```

启动 TCP 客户端 B：

```
$ 数控 127.0.0.1 12345
```

### 发信息

从 TCP 客户端 A 发送“hello”：

```
$ 数控 127.0.0.1 12345
你好Enter
你好
```

TCP 客户端 B 收到消息：

```
$ 数控 127.0.0.1 12345
你好
```

以及 UDP 侦听器：

```
$ nc -l -u 54321
你好
```

# javascript - 如何使 WinRT JScript RDP 示例适应 XAML？

> ID：16049611
> 
> 赞同：0
> 
> 时间：2013-04-17T00:49:19.480
> 
> 标签：javascript, windows-8, winrt-xaml

WinRT JScript 示例“远程桌面应用程序容器客户端示例”运行 RDP activeX 组件。此示例类似于从 Windows 应用商店下载的 RDP 应用程序。该示例包含在[MSDN Windows-8-Modern-Style-App-Samples](http://code.msdn.microsoft.com/windowsapps/Windows-8-Modern-Style-App-Samples)中。从代码中可以看出，JScript 在 WinRT 应用程序中执行 ActiveX ！！！有谁知道如何将此示例适应 XAML ？

```
 createClientControl: function (desktopWidth, desktopHeight) {
        // Initialize RDP client control.
        // Create object element.
        var clientControlObject = document.createElement("object");

        // Register for ActiveX events.
        clientControlObject.addEventListener("readystatechange", function (e) {
            if (clientControlObject.readyState !== 4) {
                WinJS.log && WinJS.log("Error: ActiveX control readyState is not 4\. ReadyState: " + clientControlObject.readyState, "sample", "error");
            }
        }, false);

        clientControlObject.addEventListener("error", function (e) {
            WinJS.log && WinJS.log("Error in loading the ActiveX control", "sample", "error");
        }, false);

        // Set object's classid to RDP client control's s CLSID.
        clientControlObject.classid = "CLSID:EAB16C5D-EED1-4E95-868B-0FBA1B42C092";

        clientControlObject.id = "clientControl";

        // Set object's height and width.
        clientControlObject.width = desktopWidth;
        clientControlObject.height = desktopHeight;

        // Add the element to  DOM.
        var clientControlRegion = document.getElementById("clientControlRegion");
        clientControlRegion.appendChild(clientControlObject);

        return clientControlObject;
    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:30:12.797

我认为最简单的方法是下载 C# 示例并查看他们是如何做到的（而不是翻译 JS 版本）[http://code.msdn.microsoft.com/windowsapps/Windows-8-Modern-Style-App-Samples /file/60705/34/Windows%208%20app%20samples.zip](http://code.msdn.microsoft.com/windowsapps/Windows-8-Modern-Style-App-Samples/file/60705/34/Windows%208%20app%20samples.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T14:33:19.577

该[文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh974571.aspx)说，这种情况下的远程桌面服务是为 Javascript 设计的：

> **开发者受众**
> 
> Windows 应用商店应用程序的远程桌面服务对象旨在供使用 JavaScript 的 Windows 应用商店应用程序使用。

据我所知，没有可用的 C# 示例，这可能是您的问题。

因为 XAML 与 RDP 的实现无关。

# c# - 在 KeyValuePair 列表中查找重复键

> ID：16049614
> 
> 赞同：3
> 
> 时间：2013-04-17T00:49:30.920
> 
> 标签：c#, key, duplicates

我的项目中有一个键值对列表。我想搜索`List<KeyValuePair<String,object>>`并找到任何重复的键，并使用 C# lambda 表达式获取该键和值。有人知道该怎么做吗？

这是我的示例代码

```
list = List<KeyValuePair<string, Object>> 
```

我需要搜索此列表并`KeyValuePair<string, Object>`使用重复键（字符串）获取任何项目。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T01:44:59.387

```
IEnumerable<IGrouping<string, KeyValuePair<string, object>>> duplicateKVPsByKey = list.GroupBy(kvp => kvp.Key).Where(g => g.Count() > 1); 
```

这会按键对 KVP 列表进行分组，然后将其过滤到仅具有大于 1 的 KVP 组。

从那里您可以遍历列表并查看每个重复键并查看关联的对象。

这将打印出所有的键和与之关联的对象

```
foreach (var group in duplicateKVPsByKey)
{
    Console.WriteLine(group.Key);
    foreach (var kvp in group)
    {
        Console.WriteLine(kvp.Value.ToString());
    }
} 
```

# playframework-2.0 - play framework 2.0 反向路由

> ID：16049617
> 
> 赞同：5
> 
> 时间：2013-04-17T00:50:27.070
> 
> 标签：playframework-2.0

我是 Java 的新手，我正在为一个项目使用 play framework 2.0，并且想知道如何使用反向路由功能。我们有以下内容：

在路由文件中

```
GET /                controllers.Application.index()
GET /myapp/storage   controllers.myapp.AnotherController.index() 
```

所以要使用反向路由：

```
controllers.routes.ref.Application.index() 
```

但是呢`AnotherController`？

如果我`controllers.routes.ref.AnotherController.index()`在测试中使用，播放框架会抛出错误“找不到符号”。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T07:59:22.940

尝试删除`ref`元素。我在 play-2.0.4 应用程序中使用以下结构进行反向路由：

```
<full-package-name>.routes.<controller>.<action> 
```

因此，您的第二个行动的反向路线将是：

```
controllers.myapp.routes.AnotherController.index() 
```

鉴于您的操作不带参数，我想您也可以去掉括号：

```
controllers.myapp.routes.AnotherController.index 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-11T15:01:43.327

这种方式对我有用。我不知道为什么：

```
activator clean
activator run 
```

# ios - GdataXML（Ray Wenderlich 的 iPhone RSS 阅读器教程）

> ID：16049631
> 
> 赞同：3
> 
> 时间：2013-04-17T00:52:34.680
> 
> 标签：ios, rss, gdata, gdataxml

我正在关注[Ray Wenderlich](http://www.raywenderlich.com/2636/how-to-make-a-simple-rss-reader-iphone-app-tutorial)关于创建简单 RSS 提要应用程序的教程。到目前为止它很棒，但我发现了一个问题。

在他告诉您下载 GDataXML 时，他给了您一个似乎不起作用的链接，或者具有所需的库。

这是教程部分的屏幕截图：

[图片由 ImageShack.us 托管 http://imageshack.us/a/img35/8381/screenshot20130416at541.png](http://imageshack.us/a/img35/8381/screenshot20130416at541.png)

这是链接将您带到的页面的屏幕截图：

[图片由 ImageShack.us 托管 http://imageshack.us/a/img9/6524/screenshot20130416at542.png](http://imageshack.us/a/img9/6524/screenshot20130416at542.png)

我真的不知道该怎么办。该链接上的 zip 文件用于日历的某些插件。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:17:18.687

如果单击[源](https://code.google.com/p/gdata-objectivec-client/source/checkout)选项卡/链接，您将看到一个页面，其中包含只读源的位置。只读源的位置显示在该页面上：

```
# Non-members may check out a read-only working copy anonymously over HTTP.
svn checkout http://gdata-objectivec-client.googlecode.com/svn/trunk/ gdata-objectivec-client-read-only 
```

# django - 表单的cleaned_data 为空，但formset 的clean_data 不是？

> ID：16049632
> 
> 赞同：2
> 
> 时间：2013-04-17T00:52:42.367
> 
> 标签：django, forms, django-forms, formsets, cleaned-data

我试图在表单集的每种形式中使用 CharField 中的字符串值，但是由于某种原因，每个表单的 clean_data 总是显示为空，而表单集的清理数据不是。这是我的views.py中的代码：

```
 TagsFormSet = formset_factory(TagsForm, formset=TagFormSet, extra=applicantQuery.count())
    if request.method == 'POST':
        tags_formset = TagsFormSet(request.POST, request.FILES, prefix='tags', applicants=applicantQuery)
        if tags_formset.is_valid():
            for tagForm in tags_formset.forms:
                tagForm.saveTags() 
```

我的表格如下所示：

```
class TagFormSet(BaseFormSet):

def __init__(self, *args, **kwargs):
    applicants = kwargs.pop('applicants')
    super(TagFormSet, self).__init__(*args, **kwargs)
    #after call to super, self.forms is populated with the forms

    #associating first form with first applicant, second form with second applicant and so on
    for index, form in enumerate(self.forms):
        form.applicant = applicants[index]

class TagsForm(forms.Form):
    tags = forms.CharField()
    def __init__(self, *args, **kwargs):
        super(TagsForm, self).__init__(*args, **kwargs)
        self.fields['tags'].required = False;

    def saveTags(self):
        Tag.objects.update(self.applicant, self.cleaned_data['tags']) 
```

正如我之前所说，tags_formset.cleaned 数据包含在页面上输入的正确信息，但是表单的清理数据是空的。这段代码给了我一个 KeyValue 错误，说“标签”不在已清理的数据中，因为它没有任何内容（在 saveTags 函数中引发错误）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:06:45.480

好的，我刚刚弄清楚发生了什么（哇，我很愚蠢）。发生错误是因为我将 tags.required 设为 False 但调用 saveTags 时不知道该特定表单是否有任何输入值。简单的解决方法是检查cleaned_data dict是否为空：

```
if tags_formset.is_valid():
    for tagForm in tags_formset.forms:
        #check if cleaned_data is non-empty
        if tagForm.cleaned_data:
            tagForm.saveTags() 
```

# mysql - 在 mysql 中，如何仅选择每一列中具有相同值但在另一列中具有不同值的每一行？

> ID：16049635
> 
> 赞同：3
> 
> 时间：2013-04-17T00:52:54.067
> 
> 标签：mysql

我不是真正的后端开发人员，所以我对 sql 的经验很少。我需要从表中过滤“每月购买”，客户将购买相同的交易产品以在不同的日期发货。

假设我在桌子上有这个：

```
transactionID |   deliveryDate  
------------- |   ------------
  1           |    2013-11-24  
  1           |    2013-11-24  
  2           |    2013-11-26   
  3           |    2013-11-10  
  3           |    2013-11-17  
  3           |    2013-11-24  
  4           |    2013-11-10  
  4           |    2013-11-10  
  4           |    2013-11-17  
  4           |    2013-11-17 
```

我想要这个结果：

```
transactionID |   deliveryDate  
------------- |   ------------
  3           |    2013-11-20  
  3           |    2013-11-22  
  3           |    2013-11-24  
  4           |    2013-11-10  
  4           |    2013-11-10  
  4           |    2013-11-17  
  4           |    2013-11-17 
```

交易 3 和 4 是唯一符合我标准的交易，因为交易 1，而同一交易中有多个购买，交货日期是相同的。交易 2 也不适合我需要购买多件商品。所以，基本上我需要选择transactionID的计数不止一个的每一行，但只有在还有不止一个不同的deliveryDate的地方。

到目前为止，我尝试的是：

```
SELECT *
FROM myTable
WHERE `transactionID` IN
    (     SELECT `transactionID`
          FROM `myTable`
          GROUP BY `transactionID`
          HAVING COUNT(*) > 1
    )
ORDER BY `transactionID` 
```

我知道我只是在同一笔交易中有多个购买时进行过滤，但我真的不知道如何遵循这一点。此外，由于有更多的列，这个查询非常慢，所以我认为可能有一个更好的方向，你们中的一些人可以指出我。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T00:55:49.037

你很亲密。您需要计算不同的日期：

```
SELECT *
FROM myTable
WHERE `transactionID` IN
    (     SELECT `transactionID`
          FROM `myTable`
          GROUP BY `transactionID`
          HAVING COUNT(distinct DeliveryDate) > 1
    )
ORDER BY `transactionID` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:42:18.233

我想这会更快，并且它还会删除重复的行（具有相同 id 和日期的行）

```
SELECT 
   a.transactionID,
   a.deliveryDate,
count( b.transactionID )
FROM 
    temp a
    JOIN temp b ON ( a.transactionID = b.transactionID AND a.deliveryDate <> b.deliveryDate )
GROUP BY
   a.transactionID,
   a.deliveryDate
HAVING
   count( b.transactionID ) > 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-19T07:11:25.283

使用这个也可以。

```
SELECT *
    FROM myTable GROUP BY `transactionID`HAVING COUNT(DeliveryDate) > 1 ORDER BY `transactionID` 
```

# c++ - 错误：'void* (Thread::)(void*)' 类型的参数不匹配'void* (*)(void*)'

> ID：16049640
> 
> 赞同：0
> 
> 时间：2013-04-17T00:53:45.680
> 
> 标签：c++, pthreads

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T00:59:44.143

Exactly what the compiler is telling you.

pthread_create is expecting a function with the signature :

`void* (*)(void*)`

Which is a function pointer.

However, you are providing something with this signature:

`void* (Thread::)(void*)`

Which is *not* a function pointer, but a pointer to member function. There is a difference : a pointer to member function needs an instance of an object in order to work properly (here, it would need an instance of Thread).

A usual solution would be to make your function `run` `static` : it would not be a member function anymore - it doesn't NEED an instance of Thread in order to work properly anymore, and you could pass your current instance as the last parameter of `pthread_create` in order to act on it once the thread is launched. You would just need to save the parameters in the class itself.

```
public:
 void start(void *params)
 {
  this->my_thread_params = params;
  pthread_create (&threadId, 0, run, static_cast<void*>(this));
 }

private:
  static void *run(void *my_object)
  {
    // here, my_object already contains the params you passed to the function start
    static_cast<Thread*>(my_object)->my_member_function();
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T00:59:52.657

The error message is telling you that a pointer to a member function in `Thread` that takes and returns a `void*` (`void* (Thread::*)(void*)`) is not convertible to a pointer to function taking and returning the same `void*`.

While the declaration of the member function may look similar to the type that you need, there is an implicit `this` pointer of type `Thread` that needs to be injected on any call to `Thread::run`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T01:02:42.383

`pthread_create` is a C function, and knows nothing of C++ member functions. You'll need to give it a static or non-member function, and pass a pointer to your `Thread` object via the final argument of `pthread_create`; something like:

```
class Thread
{
    virtual void* run(void *params) = 0;

    void start(void * params)
    {
        this->params = params;
        pthread_create(&threadId, 0, &Thread::static_run, this);
    }

    static void * static_run(void * void_this)
    {
         Thread * thread_this = static_cast<Thread*>(void_this);
         return thread_this->run(thread_this->params);
    }

private:
    pthread_t threadId;
    void *params;
}; 
```

Of course in modern C++, this is rather more straightforward:

```
std::thread thread;

void start(void * params)
{
    thread = std::thread([this]{run(params);});
} 
```

(Although of course you shouldn't be using `void*` to pass your parameters, and there's probably no good reason to wrap the thread up in a class in the first place.)

# c++ - boost asio tcp 收发教程

> ID：16049641
> 
> 赞同：5
> 
> 时间：2013-04-17T00:53:51.793
> 
> 标签：c++, boost, boost-asio

我正在寻找一个很好的教程或使用 tcp boost asio 创建可以发送和接收字符串消息的服务器的示例。

[这个例子](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/example/echo/async_tcp_echo_server.cpp)似乎是一个很好的起点，但是没有文档，这让我迷失了方向。

还有其他更好的例子吗？或者有人可以向我解释示例中发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T01:17:21.710

你应该检查这个：

[Boost C++ 库 / 第 7 章：异步输入和输出](http://en.highscore.de/cpp/boost/asio.html)

# ios - CFUserNotificationDisplayAlert CFOptionFlags 不工作？

> ID：16049642
> 
> 赞同：2
> 
> 时间：2013-04-17T00:53:53.917
> 
> 标签：ios, objective-c, core-foundation

我有这样的 CFUserNotificationDisplayAlert 设置：

```
CFOptionFlags cfRes;

            CFUserNotificationDisplayAlert(5, kCFUserNotificationNoteAlertLevel,
                                           NULL, NULL, NULL,
                                           CFSTR("Okay"),
                                           CFSTR("Stop!"),
                                           &cfRes);

            switch (cfRes)
            {
                case kCFUserNotificationDefaultResponse:
                    strTest = CFSTR("Default response");
                    break;
                case kCFUserNotificationAlternateResponse:
                    strTest = CFSTR("Alternate response");
                    break;
            } 
```

使用此代码，我收到此错误： **使用未声明的标识符 kCFUserNotifactationDefualtResponce** (和其他 kCF*'s) 有
什么想法吗？我导入了以下内容：

```
#import <CoreFoundation/CoreFoundation.h>
#import <CoreData/CoreData.h>
#import <UIKit/UIKit.h> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:16:51.150

> CFUserNotification API 在 iOS 上不可用。在我看来，您从 Mac 应用程序中复制了那段代码。

*从上面[CodaFi 的评论](https://stackoverflow.com/questions/16049642/cfusernotificationdisplayalert-cfoptionflags-not-working#comment22902155_16049642)中引用，因此可以将问题标记为已回答：[https ://meta.stackexchange.com/questions/54718/how-should-i-handle-questions-which-are-answered-in-the-comments](https://meta.stackexchange.com/questions/54718/how-should-i-handle-questions-which-are-answered-in-the-comments)*

# php - 在页面退出/导航离开页面时执行mysql查询？

> ID：16049643
> 
> 赞同：4
> 
> 时间：2013-04-17T00:54:05.953
> 
> 标签：php, mysql

谁能告诉我是否可以运行一个 mysl 查询，如果用户导航离开或退出该页面，该查询将运行？

例如，我有一个名为会话的表，我正在使用“session_start”和“session_end”来尝试跟踪我网站上的用户。因此，为了实现“session_end”时间戳，我想知道是否可以在用户离开网站时更新此列？

还有其他我没有想到的实现这一目标的方法，我非常感谢任何人的建议，

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T01:03:51.820

如果此站点有登录脚本/注销脚本，您可以

1.  当用户结束会话（注销）时，您可以运行查询以使用用户会话用户名和时间戳进行更新
2.  如果用户会话超时（可能他离开网站但没有注销），您可以使用用户名和时间戳运行查询，以获取有关用户会话何时超时以及会话存在多长时间的数据。
3.  如果用户登录，则使用该会话用户名/输入的用户名将会话数据存储在数据库中。

这些只是一些方法（想到的前两种方法）。查看[有关 PHP 的会话以](http://www.php.net/manual/en/book.session.php)获取更多帮助。同样对于查询内容，请再次查看[PHP PDO](http://php.net/manual/en/book.pdo.php)，我只想重申这是我想到的前两件事，并且根据提供的信息，我提出了以下建议。希望这是某种帮助/“啊 - 哈哈！” 片刻。欣赏先生。

> > 编辑 1

如果您有任何机会尝试在浏览器关闭后运行查询/用户点击指向外部域的链接，那么正如 deceze 评论的那样，您不应该信任浏览器来通知服务器。但是就像我在编辑上方发布的那样，您可以使用上述方法来接近您的要求。

也不要忘记阅读[OWAPS 的 PHP 会话安全备忘单](https://www.owasp.org/index.php/Session_Management_Cheat_Sheet).. 这和 PHP 用户手册应该是你最好的朋友 :D

再次希望这对你有用！

快乐编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:42:13.270

1：用户登录和注销 - 存储页面 ID（访问过的页面）和跟踪用户的时间 - 注销（会话结束）

2：每个页面上的 Ajax 脚本 - 每隔几秒或几分钟更新一次页面 ID 和时间戳，如果没有更新意味着用户不可用/left

3：每个页面上的php代码，存储IP地址，页面ID和每次访问的时间戳（如果没有新条目，用户不可用）

# python-2.7 - 使用 Python 和 NumPy 查看一系列图像

> ID：16049645
> 
> 赞同：3
> 
> 时间：2013-04-17T00:54:20.133
> 
> 标签：python-2.7, numpy, scipy, python-imaging-library, multimedia

我正在使用 python 的 pil 库来显示图像。现在我有一系列帧显示为视频内容。我有一个`np.array`包含所有帧的 RGB 值。找不到类似于 Mathlabs 的方法`implay`来显示这些帧。我可以`imshow`循环使用，但这会很慢，因为我需要提到帧率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T04:21:12.297

**Matplotlib 动画**效果很好，并且易于使用。对于合理尺寸的图像，它们通常以 30fps 或大约 30fps 运行。Matplotlib 1.1+ 有一个不错的新动画界面：这里有一些[示例](http://matplotlib.org/examples/animation/index.html)和[教程](http://jakevdp.github.io/blog/2012/08/18/matplotlib-animation-tutorial/)。

旧版本的 matplotlib 动画也不难（您基本上只是直接设置数据并刷新绘图），但动画更多地依赖于后端，因此您需要寻找合适的示例。

对于一个具体的例子，如果`images`是你想要动画的 matplotlib 图像列表，你可以简单地做：

```
animation.ArtistAnimation(fig, images, interval=50, blit=True, repeat_delay=1000) 
```

顺便说一句，如果您还想查看生成测试图像的代码，则取自[此示例。](http://matplotlib.org/examples/animation/dynamic_image2.html)动画代码就是上面的那一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-10T06:31:04.233

我已经实现了一个方便的脚本，正好适合您的需要。[在这里](https://github.com/bilylee/videofig)试试

显示目录中图像列表的示例将是

```
import os
import glob
from scipy.misc import imread

img_dir = 'YOUR-IMAGE-DIRECTORY'
img_files = glob.glob(os.path.join(video_dir, '*.jpg'))

def redraw_fn(f, axes):
    img_file = img_files[f]
    img = imread(img_file)
    if not redraw_fn.initialized:
        redraw_fn.im = axes.imshow(img, animated=True)
        redraw_fn.initialized = True
    else:
        redraw_fn.im.set_array(img)
redraw_fn.initialized = False

videofig(len(img_files), redraw_fn, play_fps=30) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T01:37:36.630

# python-3.x - 计算机器人路径（python）

> ID：16049650
> 
> 赞同：-1
> 
> 时间：2013-04-17T00:55:23.237
> 
> 标签：python-3.x

我不知道如何开始。

让我们想象一个 5x5 的正方形。

机器人从左上角开始，然后在右下角开始。

我们想让一个机器人从左上角的开始方块到右下角的结束方块。

在每个方格，机器人只有两个动作之一：

它可能向右走一格，也可能向下一格。

编写一个程序来确定有多少种方法可以做到这一点？换句话说，从“开始”到“结束”有多少条路径，每一步的移动都像上面那样受到限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T00:59:49.170

这由递归树遍历表示。您可以编写一个递归方法来执行此操作，例如：

traverse_moves，获取棋盘状态（在本例中为机器人所在的位置）并返回一个整数

计算你可以采取的下一步行动 - 从 0 到 2 总数。如果为 0，则返回整数`1`。如果为 1 或 2，则为每个有效移动创建棋盘状态并使用您创建的状态调用此方法，将所有调用的返回值相加并返回您得到的总和。

例如，对于 2x2 板，创建机器人位于左上角的状态。这个状态有两种可能的移动，所以它会用机器人左下角和机器人右上角来调用自己。这些状态中的每一个都有一个可能的移动，并且会用右下角的机器人来称呼自己。遍历树的这两个“叶子”都将返回 1，这些 1 将被返回并传播并总结递归，从而为您提供 2 作为正确答案。

```
Caller
  | 2
  TL calls itself with BL and TR
/ 1 \ 1
BL  TR call themselves with BR, their only valid move
| 1  | 1
BR   BR return 1s each for being leaf nodes, the 1s are returned and summed 
```

编辑：伪代码

```
int traverseMoves(BoardState state)
{

    List<BoardState> nextMoves = possibleMovesFrom(state);
    if (nextMoves.Length == 0)
    {
        return 1;
    }

    int returnValue = 0;
    foreach (BoardState move in nextMoves)
    {
        returnValue += traverseMoves(move);
    }
    return returnValue;
} 
```

# java - 是否存在独立的 Java WebSocket 服务器库？

> ID：16049651
> 
> 赞同：3
> 
> 时间：2013-04-17T00:55:24.733
> 
> 标签：java, html, playframework, websocket

我需要将 WebSocket 服务器集成到我现有的 Java 桌面应用程序中。因此，我需要一个包含 Web 服务器的实现。即使是[戏剧！对于这种情况，框架](http://www.playframework.com/documentation/2.1.0/JavaWebSockets)似乎有点矫枉过正。我还有其他选择吗？

# email - 我如何让媒体查询调整我的三星 Galaxy S/三星 Galaxy SII/三星 Galaxy SIII 的电子邮件图像大小

> ID：16049656
> 
> 赞同：1
> 
> 时间：2013-04-17T00:56:02.727
> 
> 标签：email, samsung-mobile

我正在使用媒体查询为移动设备屏幕调整电子邮件中图像的大小（宽度：100%）。它在 iphone ipad 中看起来不错，但在 Samsung Galaxy/SI/SII/SIII Android 中似乎没有调整大小。任何人都可以让我知道如何调整图像大小以适应这些设备的屏幕。

谢谢， 斯里希达

# java - 安卓文件选择器

> ID：16049659
> 
> 赞同：-1
> 
> 时间：2013-04-17T00:56:23.350
> 
> 标签：java, android

我正在制作一个 android 相册应用程序，我可以在其中创建相册并添加照片并从相册中删除照片。添加照片有点棘手，我需要一个带有文件路径的照片文件名。在 java 中使用 JFileChooser 非常容易，但这是 android，我不知道获取文件名和文件路径。android api中是否有任何东西可以让我获得与JFileChooser相同的功能。

我正在寻找使用某种文件选择器或全新方法来解决此问题的方法。任何帮助表示赞赏..

或者我可以实施任何其他方法来添加照片...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:17:08.377

您可以使用`Intent.ACTION_PICK`来调用图像选择器。此意图可能会被默认图库应用程序或设备上安装的某些其他应用程序捕获。

```
private static final int REQUEST_PICKER = 1;

private void invokePicker() {
    Intent intent = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
    intent.setType("image/*");
    startActivityForResult(Intent.createChooser(intent, "Complete action using"), REQUEST_PICKER);
} 
```

然后收到结果`onActivityResult`。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode != RESULT_OK)
        return;
    if (requestCode == PICK_FROM_FILE) {
        // Get Uri of the file selected,
        Uri theImageUri = data.getData();
        // Or if you want a Bitmap,
        Bitmap theBitmap = MediaStore.Images.Media.getBitmap(getContentResolver(), theImageUri);
    }
} 
```

**编辑：**

虽然通过这种方式您不需要真正的文件路径，[但如果需要，您可以从 MediaStore 获取它。](https://stackoverflow.com/questions/3401579/get-filename-and-path-from-uri-from-mediastore)

# c# - 将字符串转换为 int 然后乘以另一个 int

> ID：16049664
> 
> 赞同：1
> 
> 时间：2013-04-17T00:57:12.420
> 
> 标签：c#, asp.net, string, int

我正在使用其他人的代码，而我一点也不擅长 C#！

我需要乘以`total1`和`total2`。下面的代码给了我`answer = 0`，这是不对的。这里有什么问题？！此外，`total1`如果重要，值将作为 int 保存在 MS SQL 数据库中。当我在最后一行设置断点时，我注意到它的读取`total2`方式为 as`9`和`total1`as `"15"`（带引号）。

```
System.Data.OleDb.OleDbConnection pcn;
System.Data.OleDb.OleDbCommand pcm;
System.Data.OleDb.OleDbDataReader prs;
pcn = new System.Data.OleDb.OleDbConnection("");
pcm = new System.Data.OleDb.OleDbCommand();
pcn.Open();
pcm.Connection = pcn;
var tableSql = String.Format(@"select sum(TicSold) as total1 from BusTickets where TicketType = '9'");
pcm.CommandText = tableSql;
prs = pcm.ExecuteReader();
var rowcount = 0;
while (prs.Read())
{
    rowcount++;
    total1 = prs["total1"].ToString();
}
prs.Close();
pcn.Close();

int total2 = 9;
int answer = total2 * Convert.ToInt32(total1); 
```

**更新：**通过使用下面贾斯汀的方法，我能够得到显示正确数字而不是 0 的答案，但现在我想在 .aspx 页面上显示“答案”。以前，我会将其公开（public int answer），然后在我的 html 中放入 <%= answer %> 以显示金额。但它仍然显示0。上面的代码是我的代码，下面的代码是我的主页。再次，抱歉缺乏这方面的知识，我正在学习。

```
Total Ticket Profit: <strong><%= answer %></strong></p>
        </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T01:03:42.990

该值应该已经是来自数据库的整数，因此，在读取该值时，您应该只需要转换该值：

```
int total1 = (int)prs["total1"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T01:30:47.570

查看`Convert.ToInt32`帮助页面，您有返回值显示：

```
Type: System.Int32
A 32-bit signed integer that is equivalent to the number in value, or 0 (zero) if value is null. 
```

因此，作为 total1 的值的“15”必须从该`Convert`方法返回 0，在乘法之后为您提供总零 (0)。

我建议使用

```
int answer = 0;
int myTotal = 0;

if(int.TryParse(total1, System.Globalization.NumberStyles.Any, System.Globalization.CultureInfo.CurrentCulture,out myTotal))
{
     answer = myTotal * total2;
} 
```

**更新**

您更新的问题看起来可以通过查看[这篇文章](https://stackoverflow.com/a/7406983/2145211)来回答。它将变量定义为公共属性，然后以类似于您的方式调用它`<%=answer%>`

```
public string Answer { get { return answer.ToString(); } } 
```

或返回您正在显示的计算答案的方法的结果（假设其返回值为答案）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T01:08:14.553

总计1 ISNULL ？

```
int iTotal1 = answer  = 0;
if(int.TryParse(total1,out iTotal1 ))
{
     answer = total2 * Convert.ToInt32(total1);
}else{
    // total1 Not Int
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T01:08:47.960

除了其他人在对您的原始问题的评论中已经提出的问题之外，我建议您改为查看[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)方法，因为当只返回一个结果时，您实际上并不需要遍历记录集。

但是，要回答你的问题，从哪里来`total2`？变量`total1`本身肯定会返回一个字符串，因为当您设置它时，您会将 DB 结果转换为字符串。（这个变量在哪里被声明？例如，`string total1`？）尝试改为 delcaring as `int total1`and then 当得到结果时，`total1 = Convert.ToInt32(prs["total1"]);`. 我希望这对您有所帮助并祝您好运！

# ios - “运行目标 iOS 设备对运行方案无效”

> ID：16049665
> 
> 赞同：108
> 
> 时间：2013-04-17T00:57:25.417
> 
> 标签：ios, xcode

我一直在 iPhone 5 /iOS 6 上运行我的应用程序，但是当我尝试在 iPhone 4S / iOS6 上运行它时，我得到“运行目标 iOS 设备对于运行方案 NN 无效。方案不包含可构建的可以为运行指定设备支持的架构构建”。

我已经查看了以前的帖子，但它们涉及部署目标的问题。在我的例子中，我将 Base SDK 设置为 6.1，并将 Deployment Target 设置为 5.0。

iPhone 4 的 iOS 版本为 6.0.1。

* * *

## 回答 #1

> 赞同：280
> 
> 时间：2013-04-17T03:12:37.100

这是 XCode 中的一个错误，我关闭并重新打开 Xcode 并开始工作。

我现在已经多次注意到这种事情，Xcode 还有其他问题，令人沮丧的是该工具如此狡猾。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-01-28T06:44:56.633

我有同样的问题。我发现的问题是，我错误地选择了 iPad 作为部署目标，因为 XCode 显示 iPhone 5 是无效设备。[![在此处输入图像描述](https://i.stack.imgur.com/oB7TW.png)](https://i.stack.imgur.com/oB7TW.png). 希望能帮助到你。然后我只是将目标更改为 iPhone 并且它起作用了。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-11-20T09:50:05.360

运行目标 iPhone 对运行方案无效。

*   退出 Xcode
*   打开 Xcode
*   清洁项目
*   运行项目

它会工作

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2018-08-28T15:46:01.437

有时这是某种内存问题。关闭一些应用程序并重试。

也关闭 Xcode 并重新打开。为我工作。

干杯。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-09-24T02:35:37.127

`Quit and Reset Xcode`可以解决大多数问题。另一个原因是`Device`不支持iPhone，你可以

`Target`-> 选择方案 -> `General`-> `Deployment Info`-> `Device`-> 选择`Universal`或您想要的当前设备。

[![在此处输入图像描述](https://i.stack.imgur.com/Er6iQ.jpg)](https://i.stack.imgur.com/Er6iQ.jpg)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-10-20T14:23:36.293

在我的情况下，问题是缺少在 Scheme -> Profile -> Executable 中选择的可执行值（e 从下拉构建配置调试中选择并可执行“application”.app）。

[![在此处输入图像描述](https://i.stack.imgur.com/noKYQ.png)](https://i.stack.imgur.com/noKYQ.png)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-07-28T08:55:42.140

一个简单的解决方案。

1) 强制退出 X-Code

2）强制退出iTunes

3) 重新连接 iPhone

4) 打开 X 代码

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-09-11T09:38:29.277

转到项目信息集开发目标为 4.3 或 5.1.1，目标也相同。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-06-19T13:34:52.600

只需转到设备->您要运行的预期设备（我是 iPhone6 模拟器）-> 选择设备（我选择的是 iPhone6）-> 右键单击​​-> 确保启用“显示运行目标菜单”。

对我来说，它已启用。我做到了，它奏效了。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-10-18T17:33:20.760

我在 XCode 9.0.1 中遇到了这个问题。

XCode 似乎没有刷新已连接设备的列表。

您可能会注意到，在断开设备连接后，您仍然可以选择它作为目标。所以 XCode 可能实际上是在尝试连接到一个伪造的设备。

要解决这个问题：

1.  编辑方案。
2.  重新选择方案的可执行文件。
    *   这似乎迫使 XCode 更新已连接设备的列表。

如果这不起作用，请在执行此操作之前尝试重新连接您的设备（电缆）。

* * *

或者，可能是断开设备、连接设备和重新选择方案的可执行文件的其他组合。

作为一种绝望的措施，您也可以尝试更换将移动设备连接到 PC 的电缆。

但理想情况下... Xcode 应该是固定的。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-01-30T07:01:14.837

我在 XCode 9 中遇到了这个问题，但后来意识到由于某些原因我在“设备和模拟器”窗口中未选中运行目标

[![在此处输入图像描述](https://i.stack.imgur.com/4mTd8.png)](https://i.stack.imgur.com/4mTd8.png)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-04-17T01:09:24.363

选择您的项目，在 Targets 下，选择您的主要目标，然后在 Build Settings 选项卡上，有一个字段显示“Valid Architectures”。确保“armv7”也在那里。您现在可能只有 armv7。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-07-06T09:27:18.530

其他解决方案可能适用于其他场景，但如果使用 Xcode 11，我进入测试目标的“构建设置”并在“部署”->“目标设备系列”下更改为通用

[![在此处输入图像描述](https://i.stack.imgur.com/hO6N9.png)](https://i.stack.imgur.com/hO6N9.png)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-10-06T12:05:10.897

我正在使用**XCode 8.2.1**有同样的问题。

**解决方案：**

- >转到设备

-> 添加额外的模拟器

- >您正在使用的右键单击模拟器

->**在运行目标菜单中显示**<-启用此选项

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-09-26T23:02:58.283

在我的情况下，这个问题已解决，将架构（构建设置 --> 架构）更改为**标准架构 - $(ARCHS_STANDARD)**

确保在有效架构上有**arm64 armv7 armv7s**。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-12-16T08:42:06.247

对于我的情况，检查目标-> 构建设置-> 搜索“Mach-O 类型”并检查值，它应该是可执行/动态库/静态库。对于其他类型值，无法构建和运行目标。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-10-07T09:26:57.607

**Swift 3 或 4 Xcode 8 或 9** 您可以做的一件事是单击项目文件以打开常规设置、功能等。

1.  选择构建设置
2.  搜索基础 SDK
3.  确保调试和发布具有相同的构建类型。

我将调试设置为 ios 11.0 并将发布设置为 macOS 10.13 它们必须相同才能存档

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-08-07T17:48:44.693

对我来说，由于磁盘空间不足，Xcode 无法为连接的设备复制符号。首先检查下是否有符号连接设备`/Users/$USERNAME/Library/Developer/Xcode/iOS\ DeviceSupport/`。

因为我的设备上安装了 iOS 8.3 (12F70)，所以我的路径是`/Users/$USERNAME/Library/Developer/Xcode/iOS DeviceSupport/8.3 (12F70)/Symbols`这个目录的大小应该在 2.5GB 左右。当我收到此问题时，大小为 484 KB。

为了解决它，我

1.  释放大约 3GB 的磁盘空间。您可以删除 /Users/$USERNAME/Library/Developer/Xcode/iOS\DeviceSupport/ 下可能拥有的任何不受支持的设备的文件夹
2.  从 Xcode 断开设备并关闭 Xcode。
3.  删除了上述路径中的文件夹（8.3（12F70）下的所有内容。
4.  启动 Xcode 并连接设备。
5.  Xcode 应该开始复制符号，一旦完成，文件夹的大小应该在 2.5GB 左右

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-05-21T21:59:01.727

这与 Kunal Gupta 的评论类似，但在实际 iPad 上运行 Xcode 项目后出现此错误（部署目标更改为 iPad，我想在我的 iPhone 模拟器上运行它）。请记住在使用实际设备/模拟器后更改部署信息，尤其是从 iPad 切换到 iPhone 时。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-02-20T22:03:17.187

切换到不同的 USB 端口并重新启动 Xcode 解决了这个问题。每当我尝试将任何 iOS 设备连接到一个特定的 USB 端口时，都会在运行 Xcode 9.1 的 iMac 上遇到此问题。如果您的 USB 端口停止工作，[请检查此](http://osxdaily.com/2015/08/09/mac-usb-ports-not-working-fix/)。

*   打开 Apple 菜单 > 关于本机 > 更多信息 > 系统报告 > USB 并检查设备是否出现在 USB 设备树中。如果它不在此处，请尝试使用另一根 USB 电缆。

[![在此处输入图像描述](https://i.stack.imgur.com/eCNY7.png)](https://i.stack.imgur.com/eCNY7.png)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-02-25T00:08:11.240

这发生在我身上，因为我在源代码控制中使用非共享方案切换了分支。

我的`xcuserdata`文件夹被 git 忽略了，它包含一个我忘记分享的方案。这意味着我试图使用来自完全不同的代码分支的方案。

我重新制定了解决问题的方案，并将其标记为共享，以便它将位于`xcshareddata`文件夹中并签入源代码管理。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-01-01T03:33:27.667

对于 iOS 13.x - 对我有用的是取消手表与手机的配对并将其修复到我的 iPhone。我不会只是通过蓝牙取消配对——我重复了整个循环，就好像我有一块新手表一样。整个过程花了10分钟。当我再次运行我的应用程序时，它起作用了。从那里，确保您的所有目标都具有相同的身份登录。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-12-08T16:04:23.113

就我而言，给出的答案都不适合我。

我试图为我的项目设置 TravisCI，这就是我所做的：

选择目标 > 编辑方案 > 构建

[![在此处输入图像描述](https://i.stack.imgur.com/xWBQz.png)](https://i.stack.imgur.com/xWBQz.png)

检查测试目标中的“运行”选项，问题消失了，我希望这对某人有所帮助，我花了 2 天时间试图解决这个问题。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-09-15T17:05:46.517

设备 iOS 版本缺少设备支持文件。将其添加到 XCode App Content 路径中。

应用内容路径为“contents/Developer/platform/iPhoneOS.platform/DeviceSupport”

通过在应用程序内容路径中创建设备版本号文件夹，从[此处](https://github.com/filsv/iPhoneOSDeviceSupport)下载支持文件并通过它们过去。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2018-01-05T13:20:27.710

**在我的情况下，**

我在这里打开我的 iPhone 是我的 iPhone 中出现的信任和不信任的警报。我点击信任。它工作正常。

[![在此处输入图像描述](https://i.stack.imgur.com/DxeXz.jpg)](https://i.stack.imgur.com/DxeXz.jpg)

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2018-07-12T08:29:38.690

我注意到某些电缆+设备组合（可能接触不良）时会出现这种情况，重新启动 XCode 只会帮助运行一两次，然后它会再次出现。更换电缆/设备是唯一对我有用的长期解决方案。

* * *

## 回答 #27

> 赞同：-2
> 
> 时间：2021-10-27T06:27:38.693

**确保您的 Xcode 是最新的。**

这听起来很明显。我尝试了此威胁中提出的所有答案，但没有任何帮助。我使用 Xcode 12.0。升级到 13.1 后，一切正常。

# twitter-bootstrap - 如何将 span10 细分为 12 列

> ID：16049672
> 
> 赞同：0
> 
> 时间：2013-04-17T00:58:54.910
> 
> 标签：twitter-bootstrap, fluid-layout

我无法在另一列中创建流畅的行。我的理解是我应该能够将 span10 分成 12 个以上的列，但我没有任何运气。第四个 span3 不合适。谢谢你的帮助。

```
 <div class="container-fluid">
    <div class="row-fluid">
      <div class="span2"></div>
      <div class="span10">
        <div class="row-fluid">
          <div class="span3"></div>
          <div class="span3"></div>
          <div class="span3"></div>
          <div class="span3"></div>
        </div>
      </div>
    </div
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:46:14.223

你在第二个 div 上有一个类名“row fluid”

```
<div class="row fluid"> 
```

应该是

```
<div class="row-fluid"> 
```

并且“span10”缺少对“>”。

```
<div class="span10" 
```

它应该是

```
<div class="span10"> 
```

顺便说一句，你还需要一个

```
</div> 
```

在底部与 class="container-fluid" 匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T23:47:28.153

代码片段是正确的，我使用完全相同的构造。我的经验是，如果 spanX 不适合，那么我尝试放入的内容对于可用空间来说太大了。试试它是否可行，例如：

```
<div class="container-fluid">
    <div class="row-fluid">
      <div class="span2"></div>
      <div class="span10">
        <div class="row-fluid">
          <div class="span3"></div>
          <div class="span3"></div>
          <div class="span2"></div>
          <div class="span4"></div>
        </div>
      </div>
    </div
</div> 
```

想知道这是否是问题所在。希望有帮助。

# scheme - 计划车通过不正确的类型？

> ID：16049674
> 
> 赞同：0
> 
> 时间：2013-04-17T00:59:10.997
> 
> 标签：scheme

我的任务是制作一个接收两个文件的方案函数，一个“mainfile”和一个“wordfile”。然后该函数计算主文件中的行数、单词数和字符数。单词由换行符/制表符/空格分隔。该函数还必须使用 wordfile（包含一组单词）并计算 wordfile 中的单词在 mainfile 中出现的次数。然后它打印出行数、单词数和字符数……然后是 wordfile 遇到的从大到小排序。这是它应该做什么的示例输入/输出：

```
1 ]=> (load "ws")
;Loading "ws.scm"... done
;Value: filestatistics

1 ]=> (filestatistics "aa" "word0")
8 10 51

Word usage:
aaaa 4
1234 3
;Value: () 
```

这是我当前的代码。它没有排序（还），并包含一些额外`display`的用于调试的 s：

```
(define wc
  (lambda (srcf l w c)
    (if (eof-object? (peek-char srcf))
      (begin ;; end of file
        (close-port srcf)
        (display l)(display " ")
        (display w)(display " ")(display c))
      (case (read-char srcf) ;; find a word?
        ((#\space #\tab) (wc srcf l w (+ c 1)))
        ((#\newline) (wc srcf (+ l 1) w (+ c 1))) ;; new line, increment
        (else ;; found a word
          (let loop ((i 2)) ;; eat word, 2 for both read-chars
            (if (eof-object? (peek-char srcf))
              (wc srcf l (+ w 1) (+ c 1))
              (case (read-char srcf) ;; end of word?
                ((#\space #\tab) (wc srcf l (+ w 1) (+ c i)))
                ((#\newline) (wc srcf (+ l 1) (+ w 1) (+ c i)))
                (else (loop (+ i 1)))))))))))

(define countw
  (lambda (mfile cfile)
    (procw mfile '() (mklist cfile '() '()))))

(define procw
  (lambda (file word wset)
    (if (eof-object? (peek-char file))
      (if (null? word)
        (for-each (lambda (w n)
                    (display w)(display " ")(display n)(newline)))
        (procw file '() (addword word wset '())))
      (case (peek-char file)
        ((#\space #\tab #\newline)
         (read-char file)
         (display ".")
         (if (null? word)
           (procw file word wset)
           (procw file '() (addword word wset '()))))
        (else
          (display "?")
          (if (null? word)
            (procw file (string (read-char file)) wset)
            (procw file (string-append word (string (read-char file))) wset)))))))

(define addword ;; returns new list
  (lambda (word wset nset)
    (if (null? wset)
      nset
      (if (eq? (car (car wset)) word) ;; comparing to front of list in list
        (begin
          (display "|")
        (append nset (append ((car(car(wset))) (+ (cadr(car(wset))) 1)) (cdr wset))))
        (addword word (cdr wset) (append nset (car wset)))))))

(define mklist ;; make word list
  (lambda (file word wset)
    (if (eof-object? (peek-char file))
      (begin
        (close-port file)
        (if (null? word)
          wset
          (append wset '((word 0)))))
      (case (peek-char file)
        ((#\space #\tab #\newline)
         (read-char file)
         (if (eq? word '())
           (mklist file word wset)
           (mklist file '() (append wset '((word 0))))))
        (else
          (if (eq? word '())
            (mklist file (string (read-char file)) wset)
            (mklist file (string-append word (string (read-char file))) wset)))))))

(define filestatistics
  (lambda (src1 src2)
    (begin
      (wc (open-input-file src1) 0 0 0)(newline)(newline)
      (countw (open-input-file src1) (open-input-file src2))))) 
```

这是我得到的输出：

```
1 ]=> (load "ws")

;Loading "ws.scm"... done
;Value: filestatistics

1 ]=> (filestatistics "aa" "word0")
8 10 51

????.????.
;The object word, passed as the first argument to car, is not the correct type.
;To continue, call RESTART with an option number:
; (RESTART 2) => Specify an argument to use in its place.
; (RESTART 1) => Return to read-eval-print level 1. 
```

我不明白为什么我会收到这个错误。因为`word`甚至应该是`car`. 奇怪的是，代码在出现错误之前一直运行到第二个单词，并且正在运行的第一个单词没有显示“|” （在`addword`.

我忘了添加输入文件，它们是：

啊：

```
1234
5678
9000
1234
1234
aaaa aaaa 9000 aaaa
aaaa 
```

字0：

```
aaaa 1234 
```

## 更新 1

所以我改成`(eq? (car (car wset)) word)`因为`(string=? (car (car wset)) word)`我在比较字符串，这是我的新错误。

```
;The object word, passed as an argument to string=?, is not a string. 
```

不过，单词应该是一个字符串。调试输出也是`????.`在发生错误之前。

## 更新 2

所以我发现了我真正的问题。我正在制作（成对的）列表，`'((word 0))`它只是在字面上制作成对`word`。但是当我将其更改为时，`(cons (word 0))`我得到一个`aaaa`不适用的错误。有没有办法制作成对的字符串和数字列表？像哈希？对不起，我对计划很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:08:20.640

这条线看起来很可疑：

```
(append nset (append ((car(car(wset))) (+ (cadr(car(wset))) 1)) (cdr wset)))) 
```

首先，`append`是非破坏性的。它不会改变 的值或内容`nset`，它只是返回一个带有附加内容的新列表。您似乎没有对 的返回值做任何事情`append`，这意味着它是无操作的。

其次，`((car(car(wset)))`向我暗示您正在考虑其他语言的语法，而您可能是想`(car (car wset))`代替。（括号在Scheme中很重要。你不能比要求的多或少。）与你的同上`(cadr(car(wset)))`，我认为你的意思是`(cadr (car wset))`。

# c++ - XAudio2 Access Violation Exception when Unloaded

> ID：16049677
> 
> 赞同：1
> 
> 时间：2013-04-17T00:59:27.283
> 
> 标签：c++, windows, exception, directx, access-violation

I am trying to use the XAudio2 audio system to play a looping sound asynchronously. It functions, but when the DLL is unloaded (the code here is inside of a DLL loaded by another program), I get an access violation exception in the parent application.

I have noticed that I receive no error until I add the mastering voice into the mix, but I don't know what I could be doing wrong with it.

The code is below:

In soundengine.h

```
#include <Windows.h>
#include <xaudio2.h>
#include <fstream>
#define SAFE_DELETE(p) if(p) {delete p; p = NULL;}
#define SAFE_DELETE_ARRAY(p) if(p) {delete[] p; p = NULL;}
#define DXTRACE_ERR(str,hr) DXTrace(__FILE__,(DWORD)__LINE__,hr,str, FALSE)
using namespace std;

#define XA2SE_PLAY_LOOP 1
#define XA2SE_PLAY_STD  0
#define XA2SE_ERROR_NOTPLAYING  -1
#define XA2SE_ERROR_COULD_NOT_OPEN_FILE -2
#define XA2SE_ERROR_NOT_WAVE_FILE   -3
#define XA2SE_ERROR_COULD_NOT_SEEK  -4
#define XA2SE_ERROR_COULD_NOT_DESCEND   -5
#define XA2SE_ERROR_COULD_NOT_RESET -6
#define XA2SE_ERROR_RIFF_ERROR  -7
#define XA2SE_ERROR_SIZE_ERROR  -8
#define XA2SE_ERROR_COULD_NOT_READ  -9
#define XA2SE_ERROR_UNEXPECTED_NULL_VALUE   -10
#define XA2SE_ERROR_COULD_NOT_ASCEND    -11
#define XA2SE_ERROR_COULD_NOT_GET_INFO  -12
#define XA2SE_ERROR_COULD_NOT_ADVANCE   -13
#define XA2SE_ERROR_COULD_NOT_READEND   -14
#define XA2SE_ERROR_COULD_NOT_SET_INFO  -15
#define XA2SE_ERROR_COULD_NOT_CREATE_VOICE  -16
#define XA2SE_COULD_NOT_SUBMIT_BUFFER   -17
#define WAVEFILE_READ   0x001

class XA2SoundEngine {
public:
    IXAudio2MasteringVoice* mv;
    IXAudio2SourceVoice* sv;
    IXAudio2* pXA2; 
    XA2SoundEngine();
    ~XA2SoundEngine();
    BOOL Play(LPWSTR file, int mode);   
};

class WaveFile {
public:
    WAVEFORMATEX* m_pwfx;        // Pointer to WAVEFORMATEX structure
    HMMIO m_hmmio;       // MM I/O handle for the WAVE
    MMCKINFO m_ck;          // Multimedia RIFF chunk
    MMCKINFO m_ckRiff;      // Use in opening a WAVE file
    DWORD m_dwSize;      // The size of the wave file
    MMIOINFO m_mmioinfoOut;    
    BYTE* m_pbData;
    BYTE* m_pbDataCur;
    ULONG m_ulDataSize;
    CHAR* m_pResourceBuffer;

protected:
    HRESULT ReadMMIO();
    HRESULT WriteMMIO( WAVEFORMATEX* pwfxDest );

public:
            WaveFile();
            ~WaveFile();

    HRESULT Open( LPWSTR strFileName);    
    HRESULT Close();

    HRESULT Read( BYTE* pBuffer, DWORD dwSizeToRead, DWORD* pdwSizeRead );
    HRESULT Write( UINT nSizeToWrite, BYTE* pbData, UINT* pnSizeWrote );

    DWORD   GetSize();
    HRESULT ResetFile();
    WAVEFORMATEX* GetFormat() {
        return m_pwfx;
    };
};

extern XA2SoundEngine* soundengine; 
```

In soundengine.cpp

```
#include "soundengine.h"
struct async_play_params {
    LPWSTR file;        
    int mode;
};
DWORD _stdcall async_play_routine(void* param);

XA2SoundEngine::XA2SoundEngine() {      
    HRESULT hr;
    CoInitializeEx(NULL,COINIT_MULTITHREADED);
    pXA2 = NULL;    
    sv = NULL;  
    if(FAILED(hr = XAudio2Create(&pXA2))) {
        MessageBoxW(NULL,L"The TFDi 737 Extreme Sound system failed to initialize the XAudio2 engine.\r\n\r\nError: FAILED(hr = XAudio2Create(&pXA2, flags))",L"TFDi 737XS Sound Error",MB_OK + MB_ICONERROR);
        return;
    }   
    if(FAILED(hr = pXA2->CreateMasteringVoice(&mv))) {
        MessageBoxW(NULL,L"The TFDi 737 Extreme Sound system failed to initialize the XAudio2 mastering voice.\r\n\r\nError: FAILED(hr = pXA2->CreateMasteringVoice(&mv))",L"TFDi 737XS Sound Error",MB_OK + MB_ICONERROR);
        return;
    }   
}

XA2SoundEngine::~XA2SoundEngine() {
    if(sv)
        sv->DestroyVoice();
    if(mv)
        mv->DestroyVoice();
    if(pXA2)
        pXA2->Release();
    CoUninitialize();
}

BOOL XA2SoundEngine::Play(LPWSTR file, int mode) {
        HRESULT hr;
        WaveFile wf;
        if(FAILED(hr = wf.Open(file)))
            return XA2SE_ERROR_COULD_NOT_OPEN_FILE; 
        WAVEFORMATEX* pwfx = wf.GetFormat();
        DWORD wavesize = wf.GetSize();
        BYTE* wavedata = new BYTE[wavesize];    
        if(FAILED(hr = wf.Read(wavedata, wavesize, &wavesize)))
            return XA2SE_ERROR_COULD_NOT_READ;
        if(soundengine->sv != NULL) {
            soundengine->sv->FlushSourceBuffers();
            soundengine->sv->DestroyVoice();            

        }

        if(FAILED(hr = soundengine->pXA2->CreateSourceVoice(&soundengine->sv,pwfx))) {
            SAFE_DELETE(wavedata);
            return XA2SE_ERROR_COULD_NOT_CREATE_VOICE;
        }

        XAUDIO2_BUFFER buffer = {0};
        buffer.pAudioData = wavedata;
        buffer.Flags = XAUDIO2_END_OF_STREAM;
        buffer.AudioBytes = wavesize;
        buffer.LoopBegin = 0;
        double nos = (double)wavesize / ((pwfx->wBitsPerSample * pwfx->nChannels) / pwfx->nSamplesPerSec);
        buffer.LoopLength = (unsigned int)nos;

        buffer.LoopLength = 0;

        buffer.LoopCount = (mode == XA2SE_PLAY_LOOP ? XAUDIO2_LOOP_INFINITE : 0);

        if(FAILED(hr = soundengine->sv->SubmitSourceBuffer(&buffer))) {                     
            SAFE_DELETE_ARRAY(wavedata);
            return XA2SE_COULD_NOT_SUBMIT_BUFFER;
        }

        hr = soundengine->sv->Start(0);     
        //SAFE_DELETE_ARRAY(wavedata);
    return TRUE;
}

WaveFile::WaveFile() {
    m_pwfx = NULL;
    m_hmmio = NULL;
    m_pResourceBuffer = NULL;
    m_dwSize = 0;    
}
WaveFile::~WaveFile() {
    Close();
    SAFE_DELETE_ARRAY(m_pwfx);
}

HRESULT WaveFile::Open( LPWSTR strFileName)
{
    HRESULT hr;

    if( strFileName == NULL )
        return E_INVALIDARG;
    SAFE_DELETE_ARRAY(m_pwfx);

    m_hmmio = mmioOpenW( strFileName, NULL, MMIO_ALLOCBUF | MMIO_READ );

    if( NULL == m_hmmio ) {
        return XA2SE_ERROR_COULD_NOT_OPEN_FILE;
    }

    if(FAILED(hr = ReadMMIO())) {
        // ReadMMIO will fail if its an not a wave file
        mmioClose( m_hmmio, 0 );
        return XA2SE_ERROR_NOT_WAVE_FILE;
    }

    if( FAILED( hr = ResetFile() ) )
        return XA2SE_ERROR_COULD_NOT_RESET;

    // After the reset, the size of the wav file is m_ck.cksize so store it now
    m_dwSize = m_ck.cksize;

    return hr;
}
HRESULT WaveFile::ReadMMIO()
{
    MMCKINFO ckIn;           // chunk info. for general use.
    PCMWAVEFORMAT pcmWaveFormat;  // Temp PCM structure to load in.

    memset( &ckIn, 0, sizeof(ckIn) );

    m_pwfx = NULL;

    if((0 != mmioDescend(m_hmmio,&m_ckRiff,NULL,0)))
        return XA2SE_ERROR_COULD_NOT_DESCEND;

    // Check to make sure this is a valid wave file
    if((m_ckRiff.ckid != FOURCC_RIFF) || (m_ckRiff.fccType != mmioFOURCC('W','A','V','E')))
        return XA2SE_ERROR_RIFF_ERROR;

    // Search the input file for for the 'fmt ' chunk.
    ckIn.ckid = mmioFOURCC( 'f', 'm', 't', ' ' );
    if( 0 != mmioDescend( m_hmmio, &ckIn, &m_ckRiff, MMIO_FINDCHUNK ) )
        return XA2SE_ERROR_COULD_NOT_DESCEND;

    // Expect the 'fmt' chunk to be at least as large as <PCMWAVEFORMAT>;
    // if there are extra parameters at the end, we'll ignore them
    if( ckIn.cksize < ( LONG )sizeof( PCMWAVEFORMAT ) )
        return XA2SE_ERROR_SIZE_ERROR;

    // Read the 'fmt ' chunk into <pcmWaveFormat>.
    if( mmioRead( m_hmmio, ( HPSTR )&pcmWaveFormat,
        sizeof( pcmWaveFormat ) ) != sizeof( pcmWaveFormat ) )
        return XA2SE_ERROR_COULD_NOT_READ;

    // Allocate the waveformatex, but if its not pcm format, read the next
    // word, and thats how many extra bytes to allocate.
    if( pcmWaveFormat.wf.wFormatTag == WAVE_FORMAT_PCM )
    {
        m_pwfx = ( WAVEFORMATEX* )new CHAR[ sizeof( WAVEFORMATEX ) ];
        if( NULL == m_pwfx )
            return XA2SE_ERROR_UNEXPECTED_NULL_VALUE;

        // Copy the bytes from the pcm structure to the waveformatex structure
        memcpy( m_pwfx, &pcmWaveFormat, sizeof( pcmWaveFormat ) );
        m_pwfx->cbSize = 0;
    }
    else
    {
        // Read in length of extra bytes.
        WORD cbExtraBytes = 0L;
        if( mmioRead( m_hmmio, ( CHAR* )&cbExtraBytes, sizeof( WORD ) ) != sizeof( WORD ) )
            return XA2SE_ERROR_COULD_NOT_READ;

        m_pwfx = ( WAVEFORMATEX* )new CHAR[ sizeof( WAVEFORMATEX ) + cbExtraBytes ];
        if( NULL == m_pwfx )
            return XA2SE_ERROR_UNEXPECTED_NULL_VALUE;

        // Copy the bytes from the pcm structure to the waveformatex structure
        memcpy( m_pwfx, &pcmWaveFormat, sizeof( pcmWaveFormat ) );
        m_pwfx->cbSize = cbExtraBytes;

        // Now, read those extra bytes into the structure, if cbExtraAlloc != 0.
        if( mmioRead( m_hmmio, ( CHAR* )( ( ( BYTE* )&( m_pwfx->cbSize ) ) + sizeof( WORD ) ),
            cbExtraBytes ) != cbExtraBytes )
        {
            SAFE_DELETE( m_pwfx );
            return XA2SE_ERROR_COULD_NOT_READ;
        }
    }

    // Ascend the input file out of the 'fmt ' chunk.
    if( 0 != mmioAscend( m_hmmio, &ckIn, 0 ) )
    {
        SAFE_DELETE( m_pwfx );
        return XA2SE_ERROR_COULD_NOT_ASCEND;
    }

    return S_OK;
}

DWORD WaveFile::GetSize() {
    return m_dwSize;
}
HRESULT WaveFile::ResetFile() {
    if( m_hmmio == NULL )
        return CO_E_NOTINITIALIZED;
    // Seek to the data
    if( -1 == mmioSeek( m_hmmio, m_ckRiff.dwDataOffset + sizeof( FOURCC ),
        SEEK_SET ) )
        return XA2SE_ERROR_COULD_NOT_SEEK;

    // Search the input file for the 'data' chunk.
    m_ck.ckid = mmioFOURCC( 'd', 'a', 't', 'a' );
    if( 0 != mmioDescend( m_hmmio, &m_ck, &m_ckRiff, MMIO_FINDCHUNK ) )
        return XA2SE_ERROR_COULD_NOT_DESCEND;

        return S_OK;
}

HRESULT WaveFile::Read( BYTE* pBuffer, DWORD dwSizeToRead, DWORD* pdwSizeRead ) {

    MMIOINFO mmioinfoIn; // current status of m_hmmio

    if( m_hmmio == NULL )
        return CO_E_NOTINITIALIZED;
    if( pBuffer == NULL || pdwSizeRead == NULL )
        return E_INVALIDARG;

    *pdwSizeRead = 0;

    if( 0 != mmioGetInfo( m_hmmio, &mmioinfoIn, 0 ) )
        return XA2SE_ERROR_COULD_NOT_GET_INFO;

    UINT cbDataIn = dwSizeToRead;
    if( cbDataIn > m_ck.cksize )
        cbDataIn = m_ck.cksize;

    m_ck.cksize -= cbDataIn;

    for( DWORD cT = 0; cT < cbDataIn; cT++ )
    {
        // Copy the bytes from the io to the buffer.
        if( mmioinfoIn.pchNext == mmioinfoIn.pchEndRead )
        {
            if( 0 != mmioAdvance( m_hmmio, &mmioinfoIn, MMIO_READ ) )
                return XA2SE_ERROR_COULD_NOT_ADVANCE;

            if( mmioinfoIn.pchNext == mmioinfoIn.pchEndRead )
                return XA2SE_ERROR_COULD_NOT_READEND;
        }

        // Actual copy.
        *( ( BYTE* )pBuffer + cT ) = *( ( BYTE* )mmioinfoIn.pchNext );
        mmioinfoIn.pchNext++;
    }

    if( 0 != mmioSetInfo( m_hmmio, &mmioinfoIn, 0 ) )
        return XA2SE_ERROR_COULD_NOT_SET_INFO;

    *pdwSizeRead = cbDataIn;

    return S_OK;

}

HRESULT WaveFile::Close() {

    if ( m_hmmio != NULL ) {
        mmioClose( m_hmmio, 0 );
        m_hmmio = NULL;
    }
    SAFE_DELETE_ARRAY( m_pResourceBuffer );

    return S_OK;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:33:23.903

I happen to be using XAudio for certain things, and I checked my code. Strangely enough, I had a comment saying not to use `CoUninitialize();` in the AudioDevice destructor itself, and I remembered why:

You're initializing COM with `CoInitializeEx( NULL, COINIT_MULTITHREADED );`. This means that there's other threads (specifically, other XAudio threads) running besides your application partially out of your control. When you co CoUninitialize() in the destructor of your XA2SoundEngine, that thread might not have exited or finished cleaning up its resources. Essentially, you're asking COM to do some killing that it's probably not ready to do (this is my best guess, because I kept getting Access Violations myself).

The way I fixed it was just *not* having `CoUninitialize()`. Microsoft, in newer versions of XAudio2, realized how dumb it was to not tell you when the threads it was using were being spawned or dying, and so XAudio2 (2.8, I believe, on Windows 8) did `CoInitializeEx` and `CoUninitialize` for you. If you're in that env, you shouldn't be calling these methods in the first place.

If this happens to be in a DLL, you can safely call your CoUninitialize and CoInitializeEx when your DLL attaches itself. It will run without error:

```
BOOL APIENTRY DllMain ( HANDLE hModule, DWORD dwReason, LPVOID lpReserved ) {

    switch (dwReason) {

    case DLL_PROCESS_ATTACH:
        CoInitializeEx(NULL, COINIT_MULTITHREADED);
        break;
    case DLL_THREAD_ATTACH:
        CoInitializeEx(NULL, COINIT_MULTITHREADED);
        break;
    case DLL_THREAD_DETACH:
        CoUninitialize();
        break;
    case DLL_PROCESS_DETACH:
        CoUninitialize();
        break;
    default:
        // Wat...
        break;
    }

    return TRUE;

} 
```

Maybe a COM expert can tell me if I'm doing it wrong, but so far the above has been working for me.

Good luck!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:18:57.837

The problem ended up being a bunch of things, including the fact that I was using the Windows 8 version of XAudio2 in DirectX9 based environment, my misuse of the CoInitialize() functions, and the fact that I never explicitly called 'delete soundengine'. I have modified the class a bit since this, and it works beautifully now.

Thanks guys!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-07T13:00:25.920

Had the same problem (or at least, a strikingly similar one), my solution was to properly free my two instances of `IXAudio2*` as the very last in the shutdown process, like this:

```
SafeRelease(&m_musicEngine);
SafeRelease(&m_soundEffectEngine); 
```

where `SafeRelease` is this utility:

```
template <class T> void SafeRelease(T **ppT)
{
    if (*ppT)
    {
        (*ppT)->Release();
        *ppT = NULL;
    }
} 
```

with just a `delete m_musicEngine;` in the wrong order, my game kept throwing the access violation exception in the XAudio_N.dll - this is on Windows 10 platform SDK version 10.0.17134.0

Now it exits cleanly. It is notable that MS themselves include an exception handler for DirectX audio in their official SDK samples, which looks like this:

```
void  _stdcall AudioEngineCallbacks::OnCriticalError(HRESULT Error) 
```

and which is given the following explanation:

```
// This [...] used to tell when the audio system
// is experiencing critial errors.
// XAudio2 gives a critical error when the user unplugs
// the headphones and a new speaker configuration is generated. 
```

So this kind of error is apparently to be expected even when the audio engine lifetime is otherwise properly maintained.

# c# - 私有集，并获取返回空/空？

> ID：16049678
> 
> 赞同：-1
> 
> 时间：2013-04-17T00:59:30.047
> 
> 标签：c#

我无法检索结果`ReturnName`

```
//
private string testName;
public string ReturnName
{
    private set { testName = "MyName"; }
    get { return testName; }
}

//
string i = data.ReturnName; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T01:01:27.223

你应该这样做：

```
public string ReturnName
{
    get { return "MyName"; }
}

//
string i = data.ReturnName; 
```

如果您只是返回硬编码值，则不需要该集合。更重要的是，您收到错误的原因是因为您可能从未调用 set。如果你想要一个默认值，那么你应该做更多这样的事情：

```
private string testName = "MyName";
public string ReturnName
{
    private set { testName = value; }
    get { return testName; }
}

//
string i = data.ReturnName; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T01:02:02.897

您的代码永远不会设置`ReturnName`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T01:02:47.123

如果您从其他类调用，`ReturnName`则始终为空，因为您无法从中设置值。它返回的唯一时间`MyName`是当您在同一类的属性上设置任何值但返回的值是`MyName`.

考虑以下示例，

```
public Class SampleClass
(
    private string testName;
    public string ReturnName
    {
        private set { testName = "MyName"; }
        get { return testName; }
    }

    public void MethodName()
    {
        ReturnName = "hello";
        Console.WriteLine(ReturnName);
    }
)

public class Main
{
    SampleClass _x = new SampleClass();
    Console.WriteLine(_x.ReturnName);     // will output EMPTY
    _x.MethodName();                      // will output MyName
} 
```

# php - 通过 AJAX 上传文件

> ID：16049685
> 
> 赞同：0
> 
> 时间：2013-04-17T01:00:17.030
> 
> 标签：php, javascript, jquery, ajax, file-upload

我希望能够使用 AJAX 上传文件。

我试过使用（JavaScript）：

```
 $("input[type='file']").change(function(){
        var file = document.getElementById("uploadelement").files[0];
        $.ajax({
            url: "upload.php",
            type: "POST",
            beforeSend: function(xhr){
                xhr.setRequestHeader("X_FILENAME", file.name); 
            },
            success: function(data){
                console.log(data);
            }
        });
    }); 
```

使用（PHP）：

```
<?php

    $fn = (isset($_SERVER['HTTP_X_FILENAME']) ? $_SERVER['HTTP_X_FILENAME'] : false);
    if ($fn) {
        // AJAX call
        file_put_contents(
            'uploads/' . $fn,
            file_get_contents('php://input')
        );
        echo "$fn uploaded";
        exit();
    }

?> 
```

但是，我遇到了问题，文件内容没有显示出来。我不确定出了什么问题。我在[教程](http://www.sitepoint.com/html5-ajax-file-upload/)上找到了这段代码，所以我认为它应该可以工作。

文件已上传到文件夹，但没有内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:01:46.603

我不知道 jQuery`$.ajax()`调用，但这可以通过使用 来实现`XMLHttpRequest`，如下所示：

```
var file = document.getElementById("uploadelement").files[0];
var form_data = new FormData();
form_data.append("userfile", file);

var xmlhttp = new XMLHttpRequest();
xmlhttp.open("POST", "upload.php");
xmlhttp.send(form_data); 
```

然后在您的 PHP 上传处理程序中（此处为 upload.php）：

```
move_uploaded_file($_FILES["userfile"]["tmp_name"], "path/to/uploads/" . $_FILES["userfile"]["name"]); 
```

然后文件应该已经保存到所需的目录。

# iphone - 如何在 MKMapView 中正确定位天气雷达图像（取自 Met Office DataPoint API）？

> ID：16049686
> 
> 赞同：1
> 
> 时间：2013-04-17T01:00:21.720
> 
> 标签：iphone, ios, mapping, mkmapview

这里[http://www.metoffice.gov.uk/datapoint/product/precipitation-forecast-map-layer](http://www.metoffice.gov.uk/datapoint/product/precipitation-forecast-map-layer)它说我试图在 MKMapView 中叠加的图像图块是：

> 在没有地图的情况下，此图像的边界框为北纬 48° 至 61°，西经 12° 至东经 5°。

鉴于我如何正确使用 MKOverlay 绘制图像。

同样，当用户滚动和缩放时，我必须重新绘制/重新渲染图像。

非常感谢任何帮助。

# wpf - 在 WPF 中复制 XAML 属性

> ID：16049688
> 
> 赞同：1
> 
> 时间：2013-04-17T01:00:43.720
> 
> 标签：wpf, visual-studio-2012

在 Visual Studio 2012 中，有没有办法将 XAML 属性从一个控件快速复制到另一个控件？如果按钮是某种颜色并使用某种字体，有没有办法快速将其复制到另一个已经创建的按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:25:28.827

如何使用**模板、资源和样式**？
并且 Ctrl+C 和 Ctrl+V 也有效。

# visual-studio-2012 - 是否可以从 EF5 数据库优先转换为代码优先？

> ID：16049689
> 
> 赞同：0
> 
> 时间：2013-04-17T01:00:53.870
> 
> 标签：visual-studio-2012, ef-code-first, entity-framework-5, ef-database-first

我即将开始一个新项目，虽然我团队的大部分经验是直接在数据库上使用 VS 数据库项目和 SSMS，但我们希望改用 EF。但是，时间限制不允许我们在实施之前花时间充分学习 EF。

乍一看，EF Code-first 中的代码优先迁移似乎是一个非常有价值的工具，但是以代码为中心的数据库优先（它们似乎没有一个好名字）代码迁移没有似乎是一个特点。相反，似乎只有以代码优先开始的项目才支持这一点。

是否可以从数据库开始，然后（在开发过程中的某个时刻）以某种方式转换为代码优先，以便利用代码优先迁移？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T00:30:19.997

您可以尝试[EF Power Tools](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)（不是“答案”，而是要尝试并牢记的东西）。

**它有`Reverse Engineer Code First`**哪些应该为您创建 POCO-s 等。

然而，它是一个实验性工具（在 Beta 版中），并且在设置上有一些问题 - 但你可以试一试。

除此之外 - 这可能很棘手，所以最好“早点”开始 -
**但 IMO 没有任何东西是你不能手动传输**的 - 在任何时候 - 只要你的数据库没有使用太多的“复杂”功能”并依赖于一些高级场景。

> 请记住 CF 施加的一些限制（例如，对于复杂的场景，必须求助于“播种”和手动 SQL，不支持 UDF，存储过程 - 但您仍然可以手动指定它......） - 这样您就可以避免将 Db 设计基于此类东西 - 而是以“代码优先方式”工作 - 并可能在需要时添加一些额外的手动修复。

并看看这篇文章（链接）：
[实体框架 - 逆向工程师代码优先 - 覆盖更改](https://stackoverflow.com/questions/12826673/entity-framework-reverse-engineer-code-first-overwriting-changes)

[http://romiller.com/2012/05/09/customizing-reverse-engineer-code-first-in-the-ef-power-tools/](http://romiller.com/2012/05/09/customizing-reverse-engineer-code-first-in-the-ef-power-tools/)

# c# - 将 XML 转储到 MySQL

> ID：16049690
> 
> 赞同：0
> 
> 时间：2013-04-17T01:00:54.790
> 
> 标签：c#, mysql, sql, xml, sql-server-2008

我有一个来自某些 Windows 应用程序的 XML 数据库转储。我相信它的 SQL Server 2008 数据是通过 C# 转储到 XML 中的，尽管我无法访问源代码。我只有垃圾场。

XML 文件匹配此格式： [MSDN DataTable::WriteXmlSchema](http://msdn.microsoft.com/en-us/library/yb6w5k4e.aspx?cs-save-lang=1&cs-lang=cpp#code-snippet-1)

有没有一种已知/方便的方法可以将它导入 MySQL？VisualStudio 或 MySQL Workbench 中有什么可以帮助的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:08:36.547

MySQL（从 5.5 版开始）具有 LOAD XML 语法，请参阅此链接：[https ://dev.mysql.com/doc/refman/5.5/en/load-xml.html](https://dev.mysql.com/doc/refman/5.5/en/load-xml.html)

如果您的数据不适合该架构，您可以将其转换为该架构。

否则，您可以使用 ODBC .NET Managed Provider 从 C# ( [http://support.microsoft.com/kb/310988](http://support.microsoft.com/kb/310988) ) 与 MySQL 对话，尽管我不知道它是否已经过测试，或者是否受支持对于 MySQL。

从那里您可以解析 XML 并创建插入语句等。

或者，如果您无法让 ODBC 提供程序正常工作，您可以编写一个程序来解析 XML，并编写适当的 SQL 语句来插入所有数据。

简而言之，您可以从中获得乐趣。

# android - 如何让我的 PC 鼠标光标从它停止的地方继续，通过 Android 手机控制？

> ID：16049692
> 
> 赞同：0
> 
> 时间：2013-04-17T01:01:17.533
> 
> 标签：android, cursor, mapping, mouse, coordinates

我可以用我的安卓手机控制我的电脑鼠标。我希望鼠标光标从它停止的地方继续它的运动。就像普通的鼠标一样。当我继续在手机屏幕上移动手指时，鼠标应该继续向前移动，其他方向也是如此。

举个例子：假设我将光标移动到 40, 50，这将转换为 PC 400, 500。现在当我将手指放在设备上说 10, 5 时，PC 上的光标将跳转到 100, 50！但我希望它从 400、500 继续。

我正在编造这些数字。但是手机的坐标转换为 PC 的坐标是这样的：

```
PC_COORDS = MOBILE_COORDS * FACTOR;
where FACTOR = PC_MAX_DIMENSION / MOBILE_MAX_DIMENSION; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:51:20.823

似乎您在要求一些逻辑解释，也许您正在寻找的是这样的：

```
PC_COORDS = getCurrentPcCoords() + ( MOBILE_COORDS * FACTOR ); 
```

当然`getCurrentPcCoords()`不是真正的函数，只是为了填补例子背后的思想。

请记住，这将添加新坐标，因此您可能真正想要的是在 android 设备中获取“运动变化”并将其乘以因子，然后将其添加到 PC 的当前坐标。

# python - 试图解析来自 wiki 的所有链接文本

> ID：16049693
> 
> 赞同：0
> 
> 时间：2013-04-17T01:01:26.180
> 
> 标签：python, parsing, python-3.x, wiki

我正在尝试在[这里](http://yugioh.wikia.com/wiki/Card_Tips%3aBlue-Eyes_White_Dragon)解析一个 wiki 页面，但我只想要某些部分。主要文章中的那些链接，我想全部解析。有没有关于如何做的文章或教程？我假设我会使用BS4。任何人都可以帮忙吗？

具体来说；页面中所有主要标题下的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:54:18.703

好吧，这实际上取决于您所说的“解析”是什么意思，但这里有一个完整的工作示例，说明如何使用 BeautfulSoup 从主要部分中提取所有链接：

```
from bs4 import BeautifulSoup
import urllib.request

def main():
    url = 'http://yugioh.wikia.com/wiki/Card_Tips%3aBlue-Eyes_White_Dragon'
    page = urllib.request.urlopen(url)
    soup = BeautifulSoup(page.read())
    content = soup.find('div',id='mw-content-text')
    links = content.findAll('a')
    for link in links:
        print(link.get_text())

if __name__ == "__main__":
    main() 
```

此代码应该是不言自明的，但以防万一：

*   首先，我们打开页面`urllib.reauest.urlopen`并将其内容传递给 BS
*   然后我们通过 id 提取主要内容 div。（id`mw-content-text`可以在页面的源代码中找到）
*   我们继续提取主要内容中的所有链接
*   在一个`for`循环中，我们打印所有链接。

其他方法，您可能需要解析链接：

*   `link.get('href')`提取目标网址
*   `link.get('title')`提取链接的替代标题

由于您要求资源：[http](http://www.crummy.com/software/BeautifulSoup/bs4/doc/) ://www.crummy.com/software/BeautifulSoup/bs4/doc/是您应该开始的第一个地方。

# java - 如果不需要那么多，是否应该限制 Java 堆大小？

> ID：16049700
> 
> 赞同：3
> 
> 时间：2013-04-17T01:02:00.797
> 
> 标签：java, garbage-collection, jvm, heap-memory

假设我在生产 Unix 机器上有足够的内存。而且我有一个不使用那么多堆的 Java 后端应用程序。初步测试表明 100MB 看起来还不错。但是，当不设上限时，内存会增长到 1GB 及以上。如果不是因为应用程序所属的处理流不时出现阻塞，我可能不会在意。一种可能的（非常模糊的）解释是罪魁祸首是提到的 Java 应用程序。

**问题**：是否将堆放在不必要的高位会使垃圾收集延迟很长时间，以至于当它最终启动时，它“要做的事情太多”以至于明显影响性能？

我可能应该提到我们仍在运行 Java 1.4（相当旧的系统）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T01:10:14.483

如果您不需要它，请盖上它。是的，您是正确的，为 Java 程序提供过多的堆空间“可能”会导致垃圾收集器线程运行更长的时间。什么是“太多”取决于您的程序的要求。我没有确凿的数据来支持这一点，我过去曾在基于 Java 的生产级服务器中看到过这种情况。Java 1.7（最新版本）可能不会出现与 Java 1.4 相同的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T05:20:46.367

**GC 时间随着堆的大小而增长**是正确的。更大的堆意味着更多的 GC 工作。但是，即使有几个 GB 的堆，您也应该看到 Full GC 周期大约需要 2-3 秒。你看到这样的“扼流圈”还是你的扼流圈更长？

一般来说，**GC 时间小于**应用程序总运行时间的5% 是**可以容忍**的。

 **此外，GC 也很难怪，如果您能向我们展示一些 GC 日志将会很有帮助。**

# php - 显示 MySQL 查询的组标题

> ID：16049703
> 
> 赞同：-1
> 
> 时间：2013-04-17T01:02:20.143
> 
> 标签：php, mysql

我有一个列出主题公园的页面。按“公园名称”排序时，将显示第一个字母，然后显示以该字母开头的公园。像这样：

```
-A-
a park 1
a park 2

-B-
b park 1
b park 2 etc 
```

我还有一个按“州”排序的查询，但不是显示每个新字母的第一个，而是希望 php 代码将州名显示为标题，然后列出该州的公园。像这样：

```
 -Florida-
    park 1
    park 2

    -Ohio-
    park 1 
    park 2 
-New York-
park 1

-North Carolina-
park 1
park 2
park 3 etc 
```

用于显示第一个字母的代码是从此处发布的其他问题拼凑而成的。我是 php 的新手，我希望有人可以帮助调整代码以显示完整的状态名称。

这是按状态排序的 MySQL 查询：

```
$sql = 'SELECT park_id, name, town, state, country
FROM tpf_parks WHERE country = "USA" AND type = "tp" ORDER BY state ASC, name ASC';
$result = $pdo->query($sql); 
```

这是当前显示每个新字母的第一个需要以某种方式调整以显示完整状态名称的 php：

```
<?php
$name = '';

foreach($result as $key=>$row){
    if(substr($row['state'],0,1)!=$name) echo '<br /><br />
<p class="indexletters">-<a name="'.substr($row['state'],0,1).'">'.substr($row['state'],0,1).'</a>-</p>';
    $name = substr($row['state'],0,1);

    echo "<a href='park.php?park_id=".$row['park_id']."'>

<h2>".$row['name']."</h2>
<h3>".$row['town'].", ".$row['state'].", ".$row['country']."</h3></a><hr>";

}

?> 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:10:51.720

代码`substr($row['state'],0,1)`采用状态的第一个字母。如果您想按实际状态名称对它们进行分组，只需将 all 替换`substr($row['state'],0,1)`为 just `$row['state']`。

# html - 使用一个 org-mode 文件创建多页网站

> ID：16049709
> 
> 赞同：18
> 
> 时间：2013-04-17T01:03:25.047
> 
> 标签：html, emacs, org-mode

将 org 文件导出为 html 时，似乎将一个 org 文件转换为一个 html 文件。是否可以将某些标题导出为单独的文件，以便我们最终得到一个主页和许多子页面，全部来自一个 org 文件？例如，[组织指南](http://orgmode.org/guide/index.html)看起来可以在逻辑上布局在单个文件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-04-07T12:23:03.297

如果您仍在寻找解决方案（5 年后），并且您愿意使用[Hugo](https://gohugo.io)生成静态站点，[`ox-hugo`](https://ox-hugo.scripter.co)则可以选择。

`ox-hugo`是一个 Org 导出器后端，可将 Org 文件导出到带有前端的 Hugo 兼容的 Markdown 文件。可以组织内容，以便您可以将 Org 子树导出为单独的内容文件，或者每个导出的文件只有一个 Org 文件，或者您可以混合使用。

如果您查看上面链接的`ox-hugo`站点，它是从单个 Org 文件生成的；您将在该站点的页脚中找到链接的组织源。

*免责声明：我是`ox-hugo`作者。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-19T04:14:35.047

对的，这是可能的。但是，不，当前的 (8.0.x) HTML 导出器没有生成多个文件的能力。

一种方法是使用 texinfo 导出器生成一个 texi 文件，然后将 texi 文件转换为带有`makeinfo --html`. 由于组织指南似乎是通过这种方式生成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-23T18:13:03.247

```
(defun my-org-export-each-level-1-headline-to-html (&optional scope)
(interactive)
 (org-map-entries
  (lambda ()
    (let* ((title (car (last (org-get-outline-path t))))
           (dir (file-name-directory buffer-file-name))
           (filename (concat dir title ".html")))
  (org-narrow-to-subtree)
      (org-html-export-as-html)
        (write-file filename)
        (kill-current-buffer)
  (widen)))
  "LEVEL=1" scope)) 
```

它为每个标题级别 = 1 生成 html 文件。基于[https://emacs.stackexchange.com/questions/54937/split-every-single-org-headline-in-a-org-file-to-separate-md-org-files](https://emacs.stackexchange.com/questions/54937/split-every-single-org-headline-in-a-org-file-to-separate-md-org-files)

# nginx - 安装后如何为nginx配置附加模块？

> ID：16049717
> 
> 赞同：52
> 
> 时间：2013-04-17T01:04:59.613
> 
> 标签：nginx

我已经使用 rpm 在我们的 redhat 机器上安装了 Nginx。现在我们要添加 nginx-rtmp 模块，但是为了根据文档添加新模块，我需要通过下载 tar 球来构建它。这是否意味着我必须删除 rpm 并按照文档进行安装。

参考：[https ://github.com/arut/nginx-rtmp-module/wiki/Getting-started-with-nginx-rtmp](https://github.com/arut/nginx-rtmp-module/wiki/Getting-started-with-nginx-rtmp)

```
./configure --add-module=/usr/build/nginx-rtmp-module
make
make install 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2016-06-08T16:12:16.977

使用 nginx 1.9.11，不需要重新编译服务器，因为它们添加了对动态模块的支持。看看这里： [https ://www.nginx.com/blog/dynamic-modules-nginx-1-9-11/](https://www.nginx.com/blog/dynamic-modules-nginx-1-9-11/)

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-04-17T02:37:00.813

与 Apache 不同，所有模块，包括 3rd 方模块，都将被编译到 nginx 中。所以每次你想添加一个新模块时，你都必须重新编译nginx。

所以是的，你必须按照文档安装它。以任何方式在同一台服务器上保留 2 个 nginx 运行时都没有多大价值。所以你可能还想删除之前的 nginx。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-11-30T20:57:59.953

我有一个类似的问题，升级后 auth-pam 模块坏了。这是为我解决的问题（debian stretch/sid，nginx 1.10.2）：

```
apt install libnginx-mod-http-auth-pam
ln -s /usr/share/nginx/modules-available/mod-http-auth-pam.conf /etc/nginx/modules-enabled/50-mod-http-auth-pam.conf 
```

配置文件包含一个“load_module”指令，它告诉 nginx 在启动时动态加载模块。正如[jekennedy 所](https://stackoverflow.com/users/1019384/jekennedy)提到的，这仅适用于支持动态模块加载的较新版本的 nginx。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-03T12:09:02.603

是的，您必须卸载 nginx（通过 rpm 安装）并根据源文件中提到的文档重新安装它。使用源代码安装 nginx 有一些缺点，例如不能将 nginx 用作服务。[**在这里**](https://jee-appy.blogspot.com/2016/05/add-module-to-nginx.html)，您可以找到使用操作系统相关软件包安装 nginx 时获得的所有功能的说明。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-09T08:06:36.680

按照 nginx 博客页面[“为 NGINX Plus 编译动态模块”](https://www.nginx.com/blog/compiling-dynamic-modules-nginx-plus/)的这篇文章中的步骤，我可以编译 RTMP 模块，`nginx-rtmp-module`从[Github](https://github.com/arut/nginx-rtmp-module)下载并将其导入我的网络服务器。

问候。

# task-parallel-library - I/O 性能 - 异步 vs TPL vs Dataflow vs RX

> ID：16049718
> 
> 赞同：22
> 
> 时间：2013-04-17T01:05:00.257
> 
> 标签：task-parallel-library, system.reactive, async-await, conceptual, tpl-dataflow

我有一段 C# 5.0 代码可以生成大量的网络和磁盘 I/O。我需要并行运行此代码的多个副本。以下哪项技术可能会给我带来最佳性能：

*   带有等待的异步方法

*   直接使用 TPL 中的 Task

*   TPL 数据流 nuget

*   反应式扩展

我不太擅长这种并行的东西，但是如果使用较低的杠杆，比如 Thread，可以给我更好的性能，我也会考虑这一点。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-04-17T04:25:51.483

这就像试图通过询问最快的方法来解开安全带来优化跨大西洋飞行的长度。

## 好的，一些真正的建议，因为我有点像个混蛋

让我们给出一个有用的答案。将性能视为活动的“类” - 每个活动都*慢一个数量级*（至少！）：

1.  只访问 CPU，很少使用内存（即将非常简单的图形渲染到非常快的 GPU，或者计算 Pi 的位数）
2.  只访问 CPU 和内存中的东西，磁盘上什么都没有（即一个写得很好的游戏）
3.  访问磁盘
4.  访问网络。

如果您**甚至**执行活动 #3 中的一项，那么进行活动 #1 和 #2 的典型优化（例如优化线程库）毫无意义——它们完全被磁盘命中所掩盖。CPU 技巧也是如此 - 如果您经常发生 L2/L3 缓存未命中，那么通过手写汇编节省几个 CPU 周期是不值得的（这就是为什么如今[循环展开](http://en.wikipedia.org/wiki/Loop_unrolling)之类的事情通常是个坏主意）。

那么，我们可以从中得到什么？有两种方法可以让你的程序更快，或者从 #3 提升到 #2（这通常是不可能的，这取决于你在做什么），或者*减少 I/O*。I/O 和网络速度是大多数现代应用程序中*的*速率限制因素，*这*就是您应该尝试优化的因素。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-17T01:35:37.750

面对“大量的网络和磁盘 I/O”，这些选项之间的任何性能差异都将是无关紧要的。

一个更好的问题是“哪个选项最容易学习和开发？” 或者“从现在起五年内维护此代码的最佳选择是什么？” 为此，如果您的逻辑更好地表示为流，我建议`async`首先使用 Dataflow 或 Rx。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-12-19T16:41:59.080

这是一个较老的问题，但是对于阅读此书的任何人...

这取决于。如果您尝试使用 50B 消息使 1Gbps 链路饱和，即使通过原始套接字进行简单的非阻塞发送，您也会受到 CPU 的限制。另一方面，如果您对 1Mbps 的吞吐量感到满意，或者您的消息大于 10KB，那么这些框架中的任何一个都可以完成这项工作。

对于低带宽的情况，我建议按易用性优先，即按此顺序排列异步/等待、Dataflow、Rx、TPL。请注意，高带宽应用程序应该像低带宽应用程序一样进行原型设计，并在以后进行优化。

对于真正的高带宽应用程序，我可以推荐 Dataflow over Rx，因为 Rx 不是为高并发设计的。原始 TPL 是底层，如果您可以处理复杂性，它可以保证最低的开销。如果您可以有效地使用专用线程，那将会更快。Async/await 与 Dataflow IMO 没有任何性能差异。开销似乎相当，所以选择一个更合适的。

# java - 有符号左移行为

> ID：16049720
> 
> 赞同：0
> 
> 时间：2013-04-17T01:05:06.760
> 
> 标签：java, int, bit-shift, signed

```
public class Shift {

    public static void main(String[] args) {
        for(int i = 0; i < 32; ++i){
            System.out.println(-0x55555555 << i);
        }
    }

} 
```

运行上面的代码会得到以下输出

```
-1431655765
1431655766
-1431655764
1431655768
-1431655760
1431655776
-1431655744
1431655808
-1431655680
1431655936
-1431655424
1431656448
-1431654400
1431658496
-1431650304
1431666688
-1431633920
1431699456
-1431568384
1431830528
-1431306240
1432354816
-1430257664
1434451968
-1426063360
1442840576
-1409286144
1476395008
-1342177280
1610612736
-1073741824
-2147483648 
```

使用其他值 (64) 进行测试时，结果更符合预期

```
public class Shift {

    public static void main(String[] args) {
        for(int i = 0; i < 32; ++i){
            System.out.println(-0x40 << i);
        }
    }

} 
```

输出

```
-64
-128
-256
-512
-1024
-2048
-4096
-8192
-16384
-32768
-65536
-131072
-262144
-524288
-1048576
-2097152
-4194304
-8388608
-16777216
-33554432
-67108864
-134217728
-268435456
-536870912
-1073741824
-2147483648
0
0
0
0
0
0 
```

在[规范（§15.19）](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.19)中说：

***`The value of n << s is n left-shifted s bit positions; this is equivalent (even if overflow occurs) to multiplication by two to the power s.`***

有人可以解释第一个输出的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T01:07:46.740

> n << s 的值是 n 个左移 s 位位置；这等效于（即使发生溢出）乘以 s 的 2 次方。

这是真的：由于溢出，这正是你乘以`-0x55555555`2 的幂得到的结果。`s`特别是，`0x55555555`具有交替的 0 和 1，因此您将交替的 0 和 1 移入符号位，因此符号每次都在翻转。

# javascript - 如何使用同步器令牌模式来防止 CSRF 安全？

> ID：16049721
> 
> 赞同：30
> 
> 时间：2013-04-17T01:05:06.637
> 
> 标签：javascript, security, web, csrf

我一直在阅读有关使用同步器令牌模式来防止 CSRF（CSRF 表示跨站点请求伪造。）的信息，但我不明白它实际上是如何安全的。

假设我有一个假银行网站 fakebank.com 有两个网址：

*   `fakebank.com/withdrawForm.html`- 显示提款表格的 GET 请求
*   `fakebank.com/doWithdraw`- 发布到此 url 以进行提款

我对安全漏洞的理解是，它`maliciousSite.com`可以欺骗 POST 请求`fakebank.com/doWithdraw`，如果您当前登录到 fakebank，则 POST 将成功。

假设我们实现了一个同步器令牌模式，它将在`fakebank.com/withdrawForm.html`. 不能`maliciousSite.com`仅仅欺骗该表单的 GET 请求，解析 html 结果，获取令牌，然后使用该令牌创建 POST 请求吗？

这是假设 fakebank.com 没有检查 HTTP Referrer 或 Origin 或`maliciousSite.com`成功欺骗 Referrer/Origin 是 fakebank.com。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-17T02:25:52.250

这是安全的，`maliciousSite.com`不能简单地做 a `GET`，窃取令牌，然后做 a`POST`的原因是请求是由用户的浏览器完成的，而不是由服务器完成的`maliciousSite.com`。从返回的所有数据`fakebank.com`都返回*到用户的浏览器*，而不是返回到服务器`maliciousSite.com`。如果`maliciousSite.com`确实执行了 GET 来检索令牌，那么它将是与颁发给用户不同的令牌。 由于同域限制， `maliciousSite.com`无法将此 cookie 设置到要提交的用户浏览器中。`fakebank.com`

CSRF`POST`攻击通过欺骗用户的浏览器`fakebank.com/withdrawForm.html`直接使用格式正确的请求进行`POST`请求。服务器在`fakebank.com`愉快地执行请求`POST`，从而使用正文中提供的参数转移资金`POST`（其中包括属于攻击者的目标帐户`maliciousSite.com`）。服务器`maliciousSite.com`不需要查看返回的数据，因为已经采取了行动（除非`fakebank.com`使用这些 CSRF 令牌，`maliciousSite.com`除非它以某种方式泄露，否则不可能知道。它不能要求它） . 如果`fakebank.com`正在使用 CSRF 令牌，`maliciousSite.com`则将提交`POST`缺少令牌的请求，从而表明潜在的 CSRF 攻击正在进行中。

此方法的漏洞包括使用未充分保密并以某种方式泄露的 CSRF 令牌。此外，如果 CSRF 令牌不够随机，则`maliciousSite.com`可能能够猜到它。此外，如果浏览器在执行相同域策略时存在弱点，则可能会被利用。一般来说，现代浏览器不易受此影响。

如果这是一个不充分的解释，请告诉我，我会尝试为您更好地表达它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T01:13:42.780

这正是重点。浏览器中的[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)不允许对其他站点的*GET*请求。因此，任何站点都无法仅在浏览器中使用 Javascipt 从另一个站点获取 CSRF 令牌。

# php - PHP exec 与 nohup

> ID：16049725
> 
> 赞同：0
> 
> 时间：2013-04-17T01:05:38.683
> 
> 标签：php, linux, command-line, exec, nohup

我目前使用 nohup 运行一个长的 php 脚本并使用这个命令将实时结果重定向到一个文件

```
nohup php long_file.php >logs 2>&1 & 
```

所以我只是去`logs`不断访问文件以查看结果

现在我想使用另一个 php 文件执行相同的操作来执行上述命令，
我用 php 尝试了上述命令，`exec` **但**重定向输出似乎不起作用，

我知道我可以使用 php 检索输出并使用任何文件写入函数存储它，但问题是 .. 输出太长这就是为什么我让它在服务器的后台运行

一个类似的问题： [Shell_exec php with nohup](https://stackoverflow.com/questions/4929827/shell-exec-php-with-nohup)，但没有答案

任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-10T09:40:54.703

请尝试使用 -q

```
nohup php -q long_file.php >logs 2>&1 & 
```

[http://ubuntuforums.org/showthread.php?t=977332](http://ubuntuforums.org/showthread.php?t=977332)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:13:12.520

您是否尝试过[passthru](http://php.net/manual/en/function.passthru.php)而不是 exec？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-17T11:51:45.907

您正在使用将 STDOUT 重定向到文件`>`

这将在每次运行脚本时截断文件。如果两个脚本同时将它们的输出重定向到同一个文件，最后启动的脚本将截断第一个脚本的输出。

如果您真的想正确附加到具有多个并发运行脚本的日志文件，请考虑使用`>>`以避免日志文件被截断。

然而，副作用是日志文件永远不会截断并不断扩展，因此如果文件变得非常大，您可以考虑将其包含在 logrotate 方案中。

# c++ - 使用 cygwin 在 Windows 上安装 GMP

> ID：16049726
> 
> 赞同：2
> 
> 时间：2013-04-17T01:05:45.243
> 
> 标签：c++, makefile, cygwin, autotools, gmp

我是 C++ 新手，我必须处理大整数，所以我必须通过 Cygwin 安装 GMP。

我在安装它时能找到的任何文档都假设你知道你在说什么，而我真的不知道。

无论如何，我得到了正确的`.tar`或其他任何东西，正确提取了它，现在我看到的任何网站都说要运行`./configure --prefix=${gmp_install}`......

世界到底是`gmp_install`什么？我`configure`从哪个目录运行？嗯？我可以从我的小 Cygwin 终端运行它，但它只是说没有这样的文件。

接下来，我应该输入`make`. 从哪里？

帮助...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T01:20:57.297

欢迎来到 StackOverflow (SO)。

GMP 的源目录应该可能包含名为`configure`. 这是您必须执行以在您的环境中*“配置”*构建系统的脚本。这意味着在配置期间[Autotools](http://en.wikipedia.org/wiki/GNU_build_system)（用于构建 GMP 的构建系统）将收集有关您的环境的信息并生成适当的`makefile`. 收集信息包括：了解您在 Windows 上，了解您正在使用 Cygwin，了解您的编译器是[GCC](http://en.wikipedia.org/wiki/GNU_Compiler_Collection)并且它的版本是 xyz 等等。所有这些步骤对于成功构建都很重要。

您可以为此脚本指定许多不同的选项`configure`来调整配置过程。在您的情况下，您指定`prefix`确定安装目录的选项，即您希望构建和准备好使用的 GMP 发行版驻留的目录。例如：

```
./configure --prefix=/D/Libraries/GMP 
```

将配置构建系统以将 GMP 二进制文件安装到`D:\Libraries\GMP`目录。

假设 GMP 源目录（您从中提取的目录`*.tar`）位于 say `D:\Users\Me\Downloads\GMP`，为了构建和安装 GMP，您应该执行以下操作：

```
cd /D/Users/Me/Downloads/GMP
./configure --prefix=/D/Libraries/GMP
make
make install 
```

**注意：**该`make`命令将实际执行我之前提到的`makefile`（由脚本生成）。`configure`该文件描述了在您的系统上构建和安装 GMP 的过程。

**注意：** `${gmp_install}`什么都不是，而是一个环境变量。例如，您可以这样做：

```
export gmp_install=/D/Libraries/GMP
./configure --prefix=${gmp_install} 
```

这可能很有用，例如，当您必须在多个地方使用相同的路径并且不想每次都键入它时。在其他情况下，这很有用，但为此您必须了解有关[环境变量](http://en.wikipedia.org/wiki/Environment_variable)、它们的用途以及一般[Bash](https://en.wikipedia.org/wiki/Bash_%28Unix_shell%29)脚本的更多信息。然而，这一切远远超出了你的问题的答案。

您将不得不花费相当多的时间来理解所有这些东西以及它们如何组合在一起，并且您可能不得不在这里提出更多关于 SO 的问题，因为仅对初学者来说理解所有这些东西可能非常具有挑战性。

# iphone - 我的应用程序的 .pch 文件在哪里？

> ID：16049728
> 
> 赞同：-3
> 
> 时间：2013-04-17T01:05:50.260
> 
> 标签：iphone, objective-c, stackmob

我正在关注如何在 StackMob 中设置 iPhone 应用程序项目的教程。这是指令：

“在您项目的某处，例如您项目的 .pch 文件，导入 SystemConfiguration 和 MobileCoreServices 框架。”

StackMob 提供了一组基础文件，一种示例应用程序。我应该在这些文件的哪个位置查找这个 .pch 文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T01:34:16.087

只需在 Xcode 的 GUI 中搜索它：
![在此处输入图像描述](https://i.stack.imgur.com/l5r2h.png)

# javascript - HTML 文件图像不会显示

> ID：16049730
> 
> 赞同：0
> 
> 时间：2013-04-17T01:06:14.467
> 
> 标签：javascript, html, html5-filesystem

我正在尝试获取基本的预览图像，并且我一直在做一些研究并遵循其他一些人的代码，但由于某种原因我的图像不会出现，谁能告诉我为什么它不会出现？

**HTML 代码**

```
<input type="file" accept="image/*;capture=camera" id="myfile" name="myfile">
<output name="image" id="list"> </output> 
```

**JavaScript**

```
<script>
function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object, files[0] is your file
    var f = files[0];
    var reader = new FileReader();

    reader.onload = (function(theFile) {
       return function(e) {
           document.getElementById('list').innerHTML = ['<img src="', e.target.result,'" title="', theFile.name, '" width="50" />'].join('');
       };
    })(f);

    reader.readAsDataURL(f);
    }

    document.getElementById('myfile').addEventListener('change', handleFileSelect, false);
    </script> 
```

如果有人能告诉我我做错了什么，将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:48:33.110

您的代码看起来工作正常。看看：http: [//jsbin.com/atekeh](http://jsbin.com/atekeh)

也许您使用的是没有文件 API 的浏览器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T02:32:21.287

显然，放置 javascript 的位置很重要。我所要做的就是将 javascript 移到输出下方，它现在可以正常工作了！

# jetty - 使用 GuiceFilter 和 Jetty WebAppContext.setParentLoaderPriority(true)

> ID：16049731
> 
> 赞同：2
> 
> 时间：2013-04-17T01:06:20.453
> 
> 标签：jetty, guice

我`GuiceFilter`在 Jetty 下使用。通常一切正常，但是当我突然启用`WebAppContext.setParentLoaderPriority(true)`一个 HTTP 请求时，会导致同一个过滤器被调用两次。更糟糕的是，第二次调用使用与第一次相同的请求范围，所以我收到异常，告诉我我正在尝试使用已经关闭的数据库连接。到底是怎么回事？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T01:06:20.453

我将此归结为人为错误。

我曾经注册`GuiceFilter`过一次，`WebAppContext.addFilter(GuiceFilter.class, "/*", EnumSet.allOf(DispatcherType.class))`但我忘记了我的项目还包含一个`WEB-INF/web.xml`文件。Jetty 正在解析这个文件并注册第二个`GuiceFilter`实例。所以第一个错误是注册`GuiceFilter`了两次。

为什么这个问题只有在`WebAppContext.setParentLoaderPriority(true)`被调用时才可见？好吧，通常 Jetty`WEB-INF/web.xml`从 webapp 中解析。因为每个 webapp 都有一个私有的 ClassLoader，所以你最终会得到`GuiceFilter`该类的两个实例。每一个都被单独初始化，这意味着您的过滤器被添加到单独的`GuiceFilter.pipeline`实例中。

调用时`WebAppContext.setParentLoaderPriority(true)`，只有一个 GuiceFilter 类的实例，并且您的过滤器会两次添加到**同一**管道中。这意味着现在您的过滤器将在每个请求范围内多次调用。

要解决此问题，只需删除`WEB-INF/web.xml`.

# c# - Microsoft 标准计算器中使用的变量类型

> ID：16049736
> 
> 赞同：3
> 
> 时间：2013-04-17T01:06:52.010
> 
> 标签：c#, c++, winforms, calculator, variable-types

我对编程相当陌生，最近使用 C#（winforms）重新制作了微软的“标准”计算器，但想问一个关于微软在他们的“标准计算器”中使用的变量类型的问题。

为了确定使用的变量类型，我在微软标准计算器中输入了一个计算：

88888888/9（八个 8）。

结果为：9876543.111111111（小数点后 9 位）

然后，我创建了一个简单的 C# 控制台应用程序，该应用程序除以 2 个数字。

我首先使用“int”类型，如预期的那样，结果是 9876543。然后我使用“double”类型并且非常接近，结果是 9876543.11111111（8 位小数）我使用十进制和输出（再次，正如预期的那样) 有太多的小数位！我使用了float，输出与int类型（9876543）的输出相同。

```
float a = 88888888F;
float b = 9F;
float c = 0F;
Console.WriteLine("a / b is: {0}", c = a / b);
Console.ReadLine(); 
```

根据以上信息，我会说微软使用类型“double”，因为它在小数位方面最接近。

但是.. 我不确定我是否在浮点类型的代码中做错了什么。（如果上面的代码有问题，你们能告诉我吗？我故意将casted float 输入为float，以防万一，但最初并没有，最后仍然得到相同的结果）

我已经尝试了此链接以获取有关浮点类型的一些信息，但并没有太大帮助：http: [//msdn.microsoft.com/en-gb/library/b1e65aza (v=vs.100).aspx](http://msdn.microsoft.com/en-gb/library/b1e65aza(v=vs.100).aspx)

然后我尝试了 C++，得到了类似的结果。

```
float a = 88888888;
float b = 9;
float c = a / b;
cout <<  c;

double aa = 88888888;
double bb = 9;
double cc = aa / bb;
cout << cc; 
```

如果我遗漏了一些非常明显的东西，请原谅我！最好的答案是告诉我微软在他们的标准计算器中使用什么变量类型，并提供某种形式的证据来支持这一点。另外，如果我在上面的代码中犯了任何错误，我们将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T01:19:38.560

[双](http://msdn.microsoft.com/en-gb/library/678hzkk9%28v=vs.100%29.aspx)精度为15-16 位。这就是为什么当你使用双精度时，你只有 8 位小数。[小数](http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.80%29.aspx)精确到 28-29 位有效数字，这就是为什么你得到的小数位数比你想要的多。如果要匹配 Windows 计算器并有 9 位小数，可以使用`decimal`类型并使用[Decimal.Round()](http://msdn.microsoft.com/en-GB/library/6be1edhb.aspx)将其设置为 9 位小数。

```
decimal a = 88888888;
decimal b = 9;
decimal c = 0;
Console.WriteLine("a / b is: {0}", Decimal.Round(c = a / b, 9) );
Console.ReadLine(); 
```

编辑 -

Windows 计算器显示不同程度准确度的原因是因为它使用`arbitrary-precision arithmetic library`. 来自[维基百科](http://en.wikipedia.org/wiki/Calculator_%28Windows%29#History)。

> 在 Windows 95 及更高版本中，它使用任意精度的算术库，取代了标准的 IEEE 浮点库。它为基本运算（加法、减法、乘法、除法）提供 bignum 精度，为高级运算（平方根、超越运算符）提供 32 位精度。

C# 编译器不使用可能解释结果差异的相同任意精度库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T01:17:40.710

如果你看 MSDN：<a href="http://msdn.microsoft.com/en-us/library/b1e65aza.aspx" rel="nofollow">http://msdn.microsoft.com/en-us /图书馆/b1e65aza.aspx。你会知道浮点数只有 7 位精度，在你的例子中是 9876543。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T01:19:07.243

[这就是你想要的](https://compilify.net/2jx)

```
 Decimal.Divide(88888888,9); 
```

[此外，任何新开发人员（或任何相关人员）都应该阅读有关浮点运算的其他内容](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

# java - 平均班级不工作

> ID：16049738
> 
> 赞同：1
> 
> 时间：2013-04-17T01:07:02.703
> 
> 标签：java, class

这里有什么问题？它不是按降序打印考试成绩，我也没有得到平均值。显示 0.0

她是给我的指示：

此类将允许用户将 5 个分数输入到数组中。然后它将按降序重新排列数据并计算数据集的平均值。

属性：

• data[]——将包含分数的数组

• mean——分数的算术平均值

方法：

• 平均——构造函数。它将为数组分配内存。使用 for 循环重复向用户显示提示，提示用户应输入分数 1、分数 2 等。注意：计算机从 0 开始计数，但人从 1 开始计数，您的提示应该考虑为了这。例如，当用户输入分数 1 时，它将被存储在索引变量 0 中。然后构造函数将调用 selectionSort 和 calculateMean 方法。

• calculateMean — 这是一种使用 for 循环访问数组中的每个分数并将其添加到运行总计的方法。总分除以分数个数（使用数组的长度），结果存入均值。

• toString——返回一个包含降序数据和平均值的字符串。

• selectionSort——他的方法使用选择排序算法将数据集从最高到最低重新排列。

```
import java.util.Scanner;

public class Average
{
    private int[] data;
    private double mean;
    private int total = 0;

    public Average()
    {

        data = new int[5];
        Scanner keyboard = new Scanner(System.in);

        for(int i = 0; i < data.length; i++)
        {
            System.out.print("Enter score number " + (i + 1) + ": ");
            data[i] = keyboard.nextInt();
        }
    }

    public void calculateMean()
    {

        int i, s = 0;
        for(i = 0; i < data.length; i++)
        {
            s = s + data[i];
        }

        mean = (double)s / (data.length);

    }

    public void selectionSort()
    {
        int maxIndex;
        int maxValue;

        for(int startScan = 0; startScan < data.length - 1; startScan++)
        {
            maxIndex = startScan;
            maxValue = data[startScan];
            for(int index = startScan + 1; index < data.length; index++)
            {
                if(data[index] > maxValue)
                {
                    maxValue = data[index];
                    maxIndex = index;
                }
            }
            data[maxIndex] = data[startScan];
            data[startScan] = maxValue;
        }
    }

    public String toString()
    {
        String output;
        output = "The test scores in descending order are \n";

        for(int i = 0; i < data.length; i++)
        {
            output = output + data[i] + " ";
        }
        output = output + "\nThe average is " + mean;
        return output;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T01:31:12.123

看起来您没有`calculateMean()`像这样首先执行方法调用：

```
public static void main(String[] args) {
    Average average = new Average();
    average.calculateMean();
    average.selectionSort();
    System.out.println(average.toString());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T01:32:31.140

所有你需要的是

```
public static void main(String[] args){
       Average avg = new Average();
       avg.selectionSort();
       avg.calculateMean();    
       System.out.println(avg);
    } 
```

一切就绪。我第二个@HeatfanJohn

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T01:15:28.297

您需要使用您的方法*返回*和*接收*值的方法。这是您的程序的一个小模型，以说明我的意思：

```
public static void main(String... args)
{
    System.out.println(calculateMean(getData()));
}

public static int[] getData()
{
    data = new int[5];
    Scanner s = new Scanner(System.in);

    for (int i = 0; i < data.length; i++)
    {
        System.out.print("Enter score number " + (i++) + ": ");
        data[i] = Integer.parseInt(s.nextLine());
    }
    s.close();
    return data;
}

public static double calculateMean(int[] data)
{

    int s = 0;
    for (int i = 0; i < data.length; i++)
    {
        s += data[i];
    }
    return mean = (double) s / (data.length);
} 
```

该`getData()`方法从用户那里获取我们需要的所有信息，然后我们获取该数据并将其直接传递给该`calculateMean()`方法。反过来，这会为我们吐出所有分数的平均值。然后我们所做的就是打印它。我会把剩下的留给你，因为这看起来像家庭作业。

* * *

**试运行**：

输入：（`4, 67, 3, 7, 3`逗号表示换行）

输出：`16.8`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T01:15:15.183

您永远不会调用`calculateMean()`，这就是平均值为零的原因。在您的 main 或您创建 Average 实例的任何地方，您需要`calculateMean()`在引用之前调用`Average.toString()`。

# c# - WCF REST 服务返回 JSONP 没有错误但也没有数据

> ID：16049743
> 
> 赞同：1
> 
> 时间：2013-04-17T01:07:23.283
> 
> 标签：c#, javascript, jquery, wcf

我可以在 Chrome 的 Sources 选项卡中看到数据，其中显示 json?callback=jQuery1324235... 如果单击该项目，我可以看到我的 JSON 字符串。

我没有收到跨域错误或 Chrome 中的任何错误。我的 ajax 如下，错误部分只是返回 Success 作为状态。但是，调试器永远不会在成功块中停止。

```
 $.ajax({
  cache:false,
  type: 'GET',
  async: false,
  timeout: 60000,
      data: "{}",
  contentType: "application/json",
  url: 'http://urlsvc/json',
  dataType: 'jsonp',
  success: function(data) {   
var test = data;
    $.each(data,function(i,j){
    list += "<h2 class='name'>" + j.TraitName + "</h2><p class='category'>" + j.Category + "</p><p class='desc'>" + j.Description + "</p>";
    });                     
},
  error: function (xhr) {
         err += xhr.statusText;
  },
  complete: function(){
     $('#list1').html(list);
  }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:32:26.973

我知道了！这是我的服务，我错过了 web.config 中的 bindingConfiguration 属性。感谢大家！

# github-for-windows - GitHub for Windows 显示旧的 README 文本

> ID：16049744
> 
> 赞同：2
> 
> 时间：2013-04-17T01:07:29.433
> 
> 标签：github-for-windows

右侧有一个面板，应该显示 README.MD 的当前内容。但是，我注意到更改 REAMDE.MD 的内容后并没有更新面板中的文本。有没有办法强制刷新？

我拥有的适用于 Windows 的 GitHub 版本是 1.0.41.2 (fd3fd236ac85e622194e88f248576b9fe25d28d4)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T01:31:09.797

是的，对此感到抱歉。这是一个错误，我们正在努力解决。它目前缓存了 30 分钟，有时它不会过期。

当前强制刷新的唯一方法是删除整个文件夹`%LocalAppData%\GitHub\BlobCache.api.github.com`或在该文件夹中找到包含 README 内容的文件（例如，通过查找将出现在 README 中的关键字）并将其删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T01:07:29.433

在 \AppData\Local\GitHub 文件夹中快速搜索后，我发现 README.MD 中的旧值存储在 BlobCache.api.github.com 中的一个文件中。删除整个文件夹并重新启动应用程序解决了这个问题。

仍然想知道是否有适当的方法可以从 UI 中做到这一点？它不应该自动发生吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-03T14:13:11.893

这来自 GitHub 工作人员。它告诉您如何清除缓存。

> **警告**：这将删除 GH4W 对您的本地存储库和登录帐户的引用。您必须再次登录并让 GH4W 重新扫描您的计算机以查找存储库。

如果您在将存储库添加到 GitHub for Windows 之后添加自述文件，我们会缓存“无自述文件”视图，这是一个已知错误。

如果您想尝试显示 README，可以删除缓存：

以下是删除缓存所需执行的步骤：

1.  关闭 GitHub for Windows
2.  打开 Git 外壳
3.  运行 'github —delete-cache' 以清除我们的 GitHub for Windows 缓存
4.  重启 GitHub for Windows——你需要再次登录并添加你的仓库

# asp.net-mvc - 在 POST Edit 中保存表单的正确方法？

> ID：16049750
> 
> 赞同：2
> 
> 时间：2013-04-17T01:08:31.237
> 
> 标签：asp.net-mvc, asp.net-mvc-4, entity-framework-4

一般来说，我对 asp .net 和 mvc 很陌生。我正在实现控制器的 GET 编辑和 POST 编辑方法。我正在使用强类型视图来编辑表单。我将模型传递回 POST 编辑方法，但我不知道如何保存它。这是我到目前为止所拥有的......我知道的并不多。

```
 [HttpPost]
    public ActionResult ModifyContract(ModContract mod)
    {
        // submit modified contract
        if (ModelState.IsValid)
        {
            OutlookMediaEntities1 db = new OutlookMediaEntities1();
            db.ObjectStateManager.ChangeObjectState(mod, EntityState.Modified);

            // save changes
            db.SaveChanges();

            return RedirectToAction("ContractDetails", "Contract", new { id = (int) ViewData["contractid"] });
        }
        else
        {
            ModelState.AddModelError("", "Missing necessary information");
            return View();
        }
    } 
```

我在 db.ObjectStateManager... 行上收到 InvalidOperationException。我看到一些东西说这可能是因为我没有分配主键并注意到我的 ModAds 类（如下）不包含主键。添加了它，但我得到了同样的错误。这是堆栈跟踪：

```
 [InvalidOperationException: The ObjectStateManager does not contain an ObjectStateEntry with a reference to an object of type 'oulookmediaweb.Models.ModContract'.]
   System.Data.Objects.ObjectStateManager.ChangeObjectState(Object entity, EntityState entityState) +278
   oulookmediaweb.Controllers.ContractController.ModifyContract(ModContract mod) in C:\Users\georgiev.1\Outlook4\oulookmediaweb\Controllers\ContractController.cs:1113
   lambda_method(Closure , ControllerBase , Object[] ) +163
   System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +205
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
   System.Web.Mvc.Async.c__DisplayClass42.b__41() +28
   System.Web.Mvc.Async.c__DisplayClass8`1.b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +57
   System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult) +50
   System.Web.Mvc.Async.c__DisplayClass39.b__33() +58
   System.Web.Mvc.Async.c__DisplayClass4f.b__49() +237
   System.Web.Mvc.Async.c__DisplayClass37.b__36(IAsyncResult asyncResult) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +57
   System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult) +50
   System.Web.Mvc.Async.c__DisplayClass2a.b__20() +24
   System.Web.Mvc.Async.c__DisplayClass25.b__22(IAsyncResult asyncResult) +126
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +57
   System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +45
   System.Web.Mvc.c__DisplayClass1d.b__18(IAsyncResult asyncResult) +14
   System.Web.Mvc.Async.c__DisplayClass4.b__3(IAsyncResult ar) +25
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +61
   System.Web.Mvc.Async.c__DisplayClass4.b__3(IAsyncResult ar) +25
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +49
   System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10
   System.Web.Mvc.c__DisplayClass8.b__3(IAsyncResult asyncResult) +28
   System.Web.Mvc.Async.c__DisplayClass4.b__3(IAsyncResult ar) +25
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +49
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970141
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

这也是模型：

```
public class ModContract
{
    public int contract_id;
    public string contract_name { get; set; }
    public List<ModAds> ads;

    public string print_product_id { get; set; }
    public string print_ad_option_id { get; set; }
}

public class ModAds
{
    public int contr_ad_id;
    public string name;
    public string product_name;
    public string adv_product;
    public List<string> editions;
    public double freq_disc;
    public double other_dis_dol;
    public double? other_dis_per;
    public string non_cash_note;
    public double non_cash_cons;
} 
```

我不知道如何保存通过的模型。我看过的所有教程都有非常简单的模型，并且保存是通过类似的方式完成的，

```
db.Entry(model).State = EntityState.Modified;
db.SaveChanges(); 
```

当我把第一行放在我的代码中时，它甚至没有编译；它说没有方法入口。模型如何从表单字段中获取新值？视图如何知道将该模型作为参数传递？是因为视图是强类型的吗？如果不是，会发生什么？视图是否会汇总所有输入并选择表单元素中的内容并将它们放入模型中？我只是对这一切如何运作感到困惑。最重要的是，如何保存模型？

任何帮助或帮助链接表示赞赏！提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T01:33:16.493

> 当我把第一行放在我的代码中时，它甚至没有编译；它说没有方法入口。

这很可能是因为您使用的是旧版本的 EF。4.1 EF 之前使用的`ObjectContext`是没有`Entry`方法的。EF 4.1+ 使用具有该`Entry`方法的 DbContext。另外，您有一个名为的参数`mod`，并且正在保存一个名为 的变量`model`，这是拼写错误吗？这里有[一个很棒的关于 EF 和 MVC 的教程](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application)。

> 模型如何从表单字段中获取新值？视图如何知道将该模型作为参数传递？

它被称为[模型绑定，在这里有很大的解释](http://msdn.microsoft.com/en-us/magazine/hh781022.aspx)。

> 是因为视图是强类型的吗？

是的

> 如果不是，会发生什么？

只要正确命名 HTML 元素，您仍然可以利用模型绑定。例如，您有一个控制器方法声明为：

```
[HttpPost]
ActionResult Product(int id, string name) {
} 
```

如果您命名与参数名称匹配的元素，模型绑定器可以完成它的工作：

```
<input type="hidden" name="id"/>
<input type="text" name="name" id="name"/> 
```

> 视图是否会汇总所有输入并选择表单元素中的内容并将它们放入模型中？

请参阅模型绑定。

> 最重要的是，如何保存模型？

```
[HttpPost]
public ActionResult ModifyContract(ModContract mod)
{
    // do some validation or anything else you need to do here
    // then save your entity
    db.Entry(mod).State = EntityState.Modified;
    db.SaveChanges();
} 
```

# matlab - 如何使用 randperm 生成 n×2 矩阵

> ID：16049752
> 
> 赞同：0
> 
> 时间：2013-04-17T01:08:32.243
> 
> 标签：matlab, matrix

我想编写一个名为`matchUp`using的 MATLAB 函数`randperm`，它返回一个*n* ×2 矩阵。如果输入是奇数，则函数应退出并显示解释性消息。

这是 n=24 的示例输出：

```
matchUp(24)

ans = 
     6    18
    19    10
    20     4
     5     3
    11    15
    23    12
    13     1
    21    24
     2    22
     9    16
     7    17
    14     8 
```

但是，当我这样做时，`randperm(24)`我会得到一个向量。我该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T04:59:04.703

我不确定您是在问题标题中还是在问题正文中提出问题，因为它们有点不同。话虽如此，你可以做

```
nrows = 2;
ncols = 2;
reshape(randperm(ncols*nrows), [nrows ncols]) 
```

从中获取您的`2x2`矩阵`randperm`。这是可行的，因为`randperm`它将生成一个 n 元素向量，其中 n 是它的第一个参数（这里，由 给出`ncols*nrows`）。然后通过函数将该列向量重新整形为矩阵`reshape`，其中它的第二个参数`[nrows ncols]`告诉它将向量转换为 [nrows x ncols] 矩阵。另外，我应该假设这是家庭作业吗？

# ruby - Ruby 新手：编写一种从文件中读取多个数组的方法？

> ID：16049755
> 
> 赞同：2
> 
> 时间：2013-04-17T01:08:42.133
> 
> 标签：ruby, arrays, methods

我有一个文件，其中包含十个单独的数据列，由空格分隔。我已经编写了以下代码（并且它有效），但我觉得有一种更简洁的方法来做我在这里所做的事情：

```
#Generate ten separate arrays in which to store the columns
c0 = []; c1 = []; c2 = []; c3 = []; c4 = []; 
c5 = []; c6 = []; c7 = []; c8 = []; c9 = [];

#Append each item in each line to its own array
File.open(filename, 'r').each_line do |line|
  line = line.strip.split(' ')
  c0 << line[0]; c1 << line[1]; c2 << line[2]; c3 << line[3]; c4 << line[4]; 
  c5 << line[5]; c6 << line[6]; c7 << line[7]; c8 << line[8]; c9 << line[9]; 
end 
```

我试图编写一种方法来完成这项任务，但我基本上不知道从哪里开始。我想有一种更简洁的方法来初始化 n 个数组，而不是我所做的......这样做的“红宝石”方式是什么？是否可以用一个返回 10 个数组的方法来完成我在这里所做的所有事情？非常感谢有关如何完成此操作的帮助/提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T01:17:25.880

也许这段代码有帮助：

```
 c = []
   File.open(filename, 'r').each_line do |line|
      line = line.strip.split(' ')
      columns = Hash.new
      index=0
      line.each do |column|
        columns[index] = column
        index+=1
      end 
      c.push(columns)
    end 
```

其中每列是一个哈希，按行部分索引，所有行都存储在一个数组中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T01:28:39.670

```
File.open(filename, 'r') do |infile|
  c = infile.lines.map(&:split).transpose
end 
```

现在`c`是一个二维数组，其中每一行都是一个数组，表示原始文件中的一列`c[0] = c0`，依此类推。

编辑：这可能有点密集。一些解释：

`infile.lines`是一个数组，其中每个元素都是文件中的一行。

`infile.lines.map(&:split)`是 的缩写`infile.lines.map { |line| line.split }`。

`' '`是要拆分的默认字符。

`transpose`将列转换为行。

# html - 通过 Sandbox Manifest 2 打包的 Chrome 应用程序本地根 html 链接

> ID：16049763
> 
> 赞同：3
> 
> 时间：2013-04-17T01:09:37.833
> 
> 标签：html, google-chrome, google-chrome-app

当我点击它所说的应用程序内的任何本地 url 时，我收到一个红色错误。

```
Can't open same-window link to "chrome-extension://nmajpganl/options.html"; try target="_blank". index.html:1 
```

有没有办法在本地链接权限？还是我必须重写所有内容才能在一页上？

我认为这与 Chrome Manifest Sandbox .. 需要包含您将链接到的所有页面有关？谁能证实这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T02:35:17.593

打包的应用程序不是网站。应用程序和网站之间的主要区别是没有导航。你有几个选择：

1.  以与主窗口相同的方式为您的选项创建一个窗口。

2.  正如您所说，重写应用程序以操作主窗口的 DOM，而不是“用新位置的 DOM 替换 DOM”（一种说导航的奇特方式）。

3.  使用 <webview>。这不太可能是您想要的（假设选项意味着类似首选项页面）。但你可以做到。

4.  正如错误消息所说，使用 target=_blank 并找出一种方法让普通的 Chrome 选项卡打开它（例如，将其托管在网站上）。对于您的应用程序，这种方法将是疯狂的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T14:37:12.197

正确的答案在这里，但它似乎已被驳回，所以让我扩展它。iframe 不允许访问其他网站，但您可以使用一个包装器来包装所有本地内容。像这样的东西：

```
<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, user-scalable=no, maximum-scale=1, minimum-scale=1" />
    <style>
html, body, iframe {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  margin: 0;
  border: none;
  overflow: hidden;
}
    </style>
  </head>
  <body><iframe src="index.html"></iframe></body>
</html> 
```

可能不需要这些元标记，但我在任何地方都使用它们。

这似乎解决了多 html 页面本地应用程序中的导航问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:41:03.663

新的 Chrome 打包应用程序不支持导航。您可以创建新窗口或替换正文中的内容或使用应用程序的 webview 标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T17:27:17.267

你可以`<iframe>`在你的`main.html`.

# xml - XML 模式约束

> ID：16049768
> 
> 赞同：1
> 
> 时间：2013-04-17T01:09:56.607
> 
> 标签：xml, xsd

我有一个包含以下行的 XML 模式。

```
<Customer Customer_Id = "c5" Age = "24" Years_Of_Membership = "26"> 
```

我是否可以限制 Years_Of_Membership 的值必须小于 Age 的值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:41:07.187

无法使用 XSD 1.0 指定这些类型的约束。

在 XSD 1.1 中应该可以使用“断言”：

```
<xs:element name="Customer">
  <xs:complexType>
    . . .
    <xs:assert test="@Years_Of_Membership lt @Age" />
  </xs:complexType>
</xs:element> 
```

（我说“应该”是因为我没有 XSD 1.1 处理器来测试它）。

其他模式技术（如 Schematron）可能是可能的。

# javascript - 源代码更改不会在将它们上传到我的虚拟主机后立即反映出来

> ID：16049770
> 
> 赞同：5
> 
> 时间：2013-04-17T01:10:02.157
> 
> 标签：javascript, google-chrome, web-hosting

这本身不是一个编程问题。我正在使用一个名为[getfreehosting](http://getfreehosting.co.uk/)的免费网络主机。我正在使用他们的在线文件管理器来传输文件。有时，我对源代码所做的更改不会在我上传后立即反映出来。即当我在 Chrome 上运行我的应用程序，然后去查看页面源代码时，我意识到运行的 JavaScript 仍然是旧版本！在大多数情况下，这不会发生，但一旦发生，就会非常令人沮丧。我试过清除浏览器的缓存。我什至尝试直接在他们的服务器上编辑文件。有时它可以解决问题，但有时却不能。

这是将文件传输到网络主机时遇到的常见问题吗？或者这可能是使用免费网络主机的缺点之一？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T01:13:12.637

您可以尝试清除浏览器的缓存，或者使用 CTRL+F5 刷新技巧。否则，托管服务提供商可能会使用缓存层来帮助缓解资源使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T01:21:23.357

服务器有责任向浏览器指示脚本文件在提供给浏览器时的可缓存生命周期（1 小时、1 天、1 个月等）。这是服务器端设置。

缓存对于服务器端效率和客户端性能都非常重要，因此您不想完全打败它。

您可以缩短缓存生命周期的服务器端设置，也可以在脚本文件中使用版本号（就像 jQuery 一样），这样当您修改脚本文件时，可以给它们一个新的文件名，例如“myscript-v12\. js”并更新相应的 HTML 文件以引用新的文件名。然后，一旦浏览器得到新的 HTML 文件，就保证得到新的 JS 文件，因为新的文件名不可能在浏览器缓存中。

如果这只是您个人在开发和修改网站时遇到的问题，那么只需在上传新文件后清除浏览器缓存，然后当您的浏览器加载该页面时，缓存中不会有任何版本，并且将被强制执行从服务器获取新版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T01:12:36.947

现代浏览器中有一个缓存系统。在浏览您的网站之前尝试清除缓存。

# java - 将现有的多个对象添加到 JFrame

> ID：16049771
> 
> 赞同：0
> 
> 时间：2013-04-17T01:10:07.617
> 
> 标签：java, swing, object, jframe

您好我想创建不同的对象并将它们放在一个 JFrame 中。将有相同类型的对象和不同类型的对象。他们随着时间改变他们的位置和存在。您对此有任何示例或文档吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:14:56.377

[请在此处](http://docs.oracle.com/javase/tutorial/uiswing/)查看 Java Swing 教程。

尝试更具体地说明您的问题'将有相同类型的对象和不同类型的对象。它们会随着时间改变他们的位置和存在'对于习惯于编程并且他们的日常工作涉及编写代码的人来说没有多大意义。

# c# - 查找任务栏的 IntPtr

> ID：16049772
> 
> 赞同：0
> 
> 时间：2013-04-17T01:10:12.217
> 
> 标签：c#, intptr, taskbar

以前，我问过[这个](https://stackoverflow.com/questions/16048088/returning-to-window-previously-selected-before-clicking-notification-area-icon/16049684#16049684)关于将用户返回到他们正在使用的上一个窗口的问题，但我找到了解决方案，但这又产生了另一个问题。确定前一个窗口的函数有时会起作用（如果发生了一组我无法随意重新创建的事件，而是随机发生）。在某些时候，它会退回 2 个窗口，有时会退回 1 个窗口。这样做是因为任务栏先挡道，然后是窗口。

所以，为了解决这个问题，我决定我应该继续浏览以前的窗口，直到我到达一个不是任务栏的窗口，但是，我不知道如何确定任务栏的 IntPtr。

我努力了：

```
IntPtr taskBarWnd = FindWindow("Shell_TrayWnd", null); 
```

但这似乎不起作用。如果我打电话`MessageBox.Show(taskBarWnd.ToInt64().ToString())`，我会得到 131258，但是当我这样做时：

```
IntPtr thisWnd = GetForegroundWindow();
IntPtr lastWnd = GetWindow(thisWnd, 2); 
```

它正在引用任务栏，但是当我调用上面相同的 MessageBox 函数时，它返回 131260（如果图标在隐藏图标区域内，则返回 65774）。

有谁知道我是否可以尝试确定`lastWnd`我计算的是否是任务栏？我不希望有一些东西来检查 IntPtr 是否彼此接近而不是相等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:32:12.023

我现在无法检查，因为这是我的 iPad，但我很确定任务栏窗口都使用自定义窗口类，所以你应该能够调用[GetClassName](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633582%28v=vs.85%29.aspx)并从结果中找出你的句柄指的是什么。

# python - 从 matplotlib 中的 x 轴时间标签中删除秒数

> ID：16049778
> 
> 赞同：4
> 
> 时间：2013-04-17T01:10:57.283
> 
> 标签：python, matplotlib

我想从我的 x 轴标签中删除秒，因为它们是不必要的。

此外，我想将刻度标签居中对齐，而不是将它们定位在刻度线的左侧。

关于如何做到这一点的任何建议？

如果这有帮助，这是我使用的一些代码

```
fig=plt.figure()
ax=fig.add_subplot(111)
line1 = plot(table.index,table[data],color=colors[0])

fig.autofmt_xdate(rotation=0)   

tickFormat =  matplotlib.ticker.LinearLocator(numticks=5)
ax.xaxis.set_major_locator(tickFormat) 
```

![在此处输入图像描述](https://i.stack.imgur.com/UpoxR.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T02:16:03.250

```
from matplotlib.dates import DateFormatter
formatter = DateFormatter('%H:%M')
plt.gcf().axes[0].xaxis.set_major_formatter(formatter) 
```

# heap-memory - 这两个“堆”之间有什么关系？

> ID：16049779
> 
> 赞同：0
> 
> 时间：2013-04-17T01:11:10.470
> 
> 标签：heap-memory, heap, concept

计算机科学中有两个名为“堆”的概念。一个是内存管理中使用的内存池，另一个是算法。

我知道它们是不同的，但它们之间的关系是什么？或者他们只是碰巧有相同的名字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:16:48.263

据我所知，他们只是碰巧有相同的名字。

一个“堆”是在其头部包含集合的最大元素的数据结构。因为它的子元素必须比它小，所以它是一个半分类集合。这比在某些情况下维护完全排序的列表更有效，例如当您通常只对最大元素感兴趣时。[http://en.wikipedia.org/wiki/Heap_(data_structure)](http://en.wikipedia.org/wiki/Heap_(data_structure))

另一个“堆”是内存中除了可以存储堆栈数据的地方。存储在堆栈中的数据的问题在于，当函数返回时，它会被释放，因此会丢失，而且在溢出之前堆栈只能容纳这么多。堆的“结构”通常是空闲数据段的链表 - malloc 寻找满足大小要求的数据段，将其标记为正在使用并返回它，而 free 在堆，将其标记为未使用并将其放回空闲数据段的链表中。（其他优化包括为某些块大小设置专用链表。）

如您所见 - 根本不相关！

# jquery - 当孩子被赋予绝对位置时，引导跨度崩溃

> ID：16049780
> 
> 赞同：0
> 
> 时间：2013-04-17T01:11:10.957
> 
> 标签：jquery, css, twitter-bootstrap, css-position

我正在使用引导行，并为其提供更多应具有的跨度子项，因为我发现这有助于使网格正常工作，同时保持响应能力。

每个元素都有一个子元素，以及一个使用 jQuery 显示的元素，如下所示：

```
<div class="row">

<div class="span2">
    <div class="inner-element">
         Content here
         <div class="hidden-element">
               More content here
         </div>
    </div>
</div>
...

</div> 
```

当点击内部的某个按钮时`.span2`，`.hidden-element`div 会随之增长，`slideDown();`并且内部元素会获得一个`position:absolute`CSS，因此它会越过下面的跨度并且不会改变网格。

`.row`当它在一个不在页面最右角（在's 角）的 .span2 元素中完成时，此设置工作得非常好

[您可以在这个jsFiddle](http://jsfiddle.net/kcX7v/)示例中看到这个问题。您可以看到单击“Example #1”可以正常工作，不会折叠父元素，而单击“Example #2”会使`.span2`元素折叠，使下一个`.span2`元素跳上一行。

这是什么原因，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:44:14.173

显然问题在于`.span2`元素的`height`属性崩溃。在动画之前通过 JavaScript 综合设置高度就可以了，如[这个 jsFiddle 示例](http://jsfiddle.net/kcX7v/1/)所示。因此，制作动画的正确方法是：

```
var box = item.closest('.span2'); 
```

打开时：

```
box.css("height", box.height()+"px"); 
```

关闭时：

```
box.css("height", "auto"); 
```

这会强制父元素具有固定的高度并且不会折叠。

# javascript - 通过将每个值与匹配字符串匹配来更改选择选项？

> ID：16049781
> 
> 赞同：0
> 
> 时间：2013-04-17T01:11:13.127
> 
> 标签：javascript, jquery

我有一个字符串`c="a"`。我想将我的选择选项更改为具有匹配字符串的选项。

例如，我的字符串 C 的值为“a”

我想过滤我的选择元素中的每个选项，并选择与我的字符串 C 匹配的选项

```
$(document).ready(function () { 
```

[http://jsfiddle.net/sdavadi/NKUyh/3/](http://jsfiddle.net/sdavadi/NKUyh/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:16:40.193

您可以使用 jQuery 的[.val()](http://api.jquery.com/val/)方法来执行此操作：

```
var c = "a";
$("#dropdown").val(c); 
```

# mysql - 如何选择或区分同一个表中的两行在一个字段上具有相同值但在另一个字段上不同

> ID：16049784
> 
> 赞同：1
> 
> 时间：2013-04-17T01:11:32.957
> 
> 标签：mysql, sql

我知道这个问题太长了，但我不能简单地描述它。所以这是我的情况：

我想在 mysql 的同一个表中选择两行或多行，其中一个字段具有相同的值，但在另一个字段上会有所不同。

例子：

```
mainthread |  category

1234             1
1234             1
1234             3
1234             3
5643             4
4322             6
3123             9 
```

现在我希望当它们具有相同的主线程值时，1 的所有类别都将更新为 3。我要更改的类别始终是从 1 到 3。主线程会有所不同，因为有成千上万个不同的主线程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:20:33.193

如果要更新表，将 的值设置为`category`在具有相同值的所有行上相同`mainthread`，然后

```
UPDATE mytable t
  JOIN ( SELECT mainthread
              , MAX(category) AS max_category
           FROM mytable
          GROUP BY mainthread
       ) s
    ON s.mainthread = t.mainthread
  SET t.category = s.max_category 
```

如果您只想返回具有相同主线程值和两个或多个不同类别值的行，那么：

```
SELECT t.*
  FROM mainthread t
  JOIN ( SELECT mainthread
           FROM mytable
          GROUP BY mainthread
         HAVING COUNT(DISTINCT category) > 1
       ) s
    ON s.mainthread = t.mainthread
 ORDER
    BY t.mainthread
     , t.category 
```

（您的问题并不完全清楚您要完成什么。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:16:40.277

也许我误解了这个问题，但这不仅仅是：

```
Update mytable
Set category = 3
Where mainthread = 1234 
```

# python - 应用引擎查询

> ID：16049791
> 
> 赞同：0
> 
> 时间：2013-04-17T01:12:33.283
> 
> 标签：python, django, google-app-engine, django-nonrel

模型.py

```
from django.db import models
from google.appengine.ext import db

class ligas(models.Model):
    llave = models.TextField()
    liga = models.TextField() 
```

视图.py

```
from django.http import Http404, HttpResponse
from google.appengine.ext import db
from models import ligas

def liga(request, offset):
    dt = get_url(offset)
    html = "<html><body>la liga para %s es %s</body></html>" % (offset, dt)
    return HttpResponse(html)

def get_url(valor):
    direc = ''
    q = ligas.objects.all()
    q.filter("llave=", valor)
    direc = q.get()
    return direc.liga 
```

我是使用 django 和谷歌应用引擎的新手。我无法查询数据库。我收到此错误：

```
Exception Type: ValueError
Exception Value: too many values to unpack 
```

直接在shell中进行查询我得到这个：

```
>>> uno = ligas.objects.all()[0]
>>> uno.liga
u'www.yahoo.com'
>>> uno.llave
u'yahoo' 
```

我无法弄清楚我做错了什么。请提供任何帮助。

```
traceback:
Environment:

Request Method: GET
Request URL: http://localhost:8080/sake/as/

Django Version: 1.3.7
Python Version: 2.7.2
Installed Applications:
['django.contrib.admin',
 'django.contrib.contenttypes',
 'django.contrib.auth',
 'django.contrib.sessions',
 'djangotoolbox',
 'autoload',
 'dbindexer',
 'polls',
 'djangoappengine']
Installed Middleware:
('autoload.middleware.AutoloadMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware') 
```

追溯：

```
File "/Users/alex_gmoca/kl-panel/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/alex_gmoca/kl-panel/sake/views.py" in liga
  6\.     dt = get_url(offset)
File "/Users/alex_gmoca/kl-panel/sake/views.py" in get_url
  13\.   q.filter("llave=", "as")
File "/Users/alex_gmoca/kl-panel/django/db/models/query.py" in filter
  552\.         return self._filter_or_exclude(False, *args, **kwargs)
File "/Users/alex_gmoca/kl-panel/django/db/models/query.py" in _filter_or_exclude
  570\.             clone.query.add_q(Q(*args, **kwargs))
File "/Users/alex_gmoca/kl-panel/django/db/models/sql/query.py" in add_q
  1192\.                             can_reuse=used_aliases, force_having=force_having)
File "/Users/alex_gmoca/kl-panel/django/db/models/sql/query.py" in add_filter
  1022\.         arg, value = filter_expr

Exception Type: ValueError at /sake/as/
Exception Value: too many values to unpack 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:11:35.140

这个

```
q.filter("llave=", valor) 
```

应该

```
q.filter(llave=valor) 
```

有关更多信息，请参阅[文档](https://docs.djangoproject.com/en/1.3/topics/db/queries/#field-lookups-intro)

# android - 菜单项放置、滑动功能等

> ID：16049794
> 
> 赞同：0
> 
> 时间：2013-04-17T01:12:46.487
> 
> 标签：android, menu, menuitem, slidingmenu

有这样的设计：

![在此处输入图像描述](https://i.stack.imgur.com/wTdmg.jpg)

如何将滑动菜单图标放在左上角？另外，我确实想在屏幕上添加滑动功能：

![在此处输入图像描述](https://i.stack.imgur.com/OH5cq.jpg)

到目前为止，我的代码被分解为`activity_main`.xml 布局、`FlyOutContainer`实现飞越/滑动菜单的`MainActivity`.java 文件，最后是作为应用程序本身主干的 .java 文件。

**活动主**

```
<com.example.btshome.FlyOutContainer xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#444488"
        android:orientation="vertical" >

        <Button
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:onClick="toggleMenu"
            android:text="Button 1" />

        <Button
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:onClick="toggleMenu"
            android:text="Button 2" />

        <Button
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:onClick="toggleMenu"
            android:text="Button 3" />
    </LinearLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#888888"
        android:orientation="vertical"
        android:gravity="center">

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="this is some text that you will see" />

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="toggleMenu"
            android:text="Toggle Menu" />
    </LinearLayout>

</com.example.btshome.FlyOutContainer> 
```

**FlyOutContainer**

```
public class FlyOutContainer extends LinearLayout{

    private View menu;
    private View content;

    protected static final int menuMargin =100;
    public enum MenuState{
        CLOSED,OPEN
    };

    protected int currentContentOffset = 0;
    protected MenuState menuCurrentState = MenuState.CLOSED;

    public FlyOutContainer(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        // TODO Auto-generated constructor stub
    }

    public FlyOutContainer(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
    }

    public FlyOutContainer(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    protected void onAttachedToWindow(){
        super.onAttachedToWindow();
        this.menu = this.getChildAt(0);
        this.content = this.getChildAt(1);
        this.menu.setVisibility(View.GONE);
    }

    protected void onLayout(boolean changed, int left, int top, int right, int bottom){
        if(changed)
            this.calculateChildDimensions();
        this.menu.layout(left, top, right - menuMargin, bottom);

        this.content.layout(left + this.currentContentOffset, top, right + this.currentContentOffset, bottom);

    }

    public void toggleMenu(){
        switch(this.menuCurrentState){
        case CLOSED:
            this.menu.setVisibility(View.VISIBLE);
            this.currentContentOffset = this.getMenuWidth();
            this.content.offsetLeftAndRight(currentContentOffset);
            this.menuCurrentState = MenuState.OPEN;
            break;
        case OPEN:
            this.content.offsetLeftAndRight(-currentContentOffset);
            this.currentContentOffset = 0;
            this.menuCurrentState = MenuState.CLOSED;
            this.menu.setVisibility(View.GONE);
            break;
        }
        this.invalidate();
    }

    private int getMenuWidth() {
        // TODO Auto-generated method stub
        return this.menu.getLayoutParams().width;
    }

    private void calculateChildDimensions() {
        // TODO Auto-generated method stub
        this.content.getLayoutParams().height = this.getHeight();
        this.content.getLayoutParams().width = this.getWidth();

        this.menu.getLayoutParams().width = this.getWidth()-menuMargin;
        this.menu.getLayoutParams().height = this.getHeight();
    }
} 
```

**主要活动**

```
public class MainActivity extends Activity {
FlyOutContainer root;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        this.root = (FlyOutContainer) this.getLayoutInflater().inflate(R.layout.activity_main, null);

        this.setContentView(root);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void toggleMenu(View v){
        this.root.toggleMenu();
    }

} 
```

基本上，`FlyOutContainer`扩展`LinearLayout`并利用了现有的`LinearLayout`放置功能。我确实尝试让内容屏幕对`onClick`事件做出反应，但这显然不起作用。谁能帮我得到我想要的设计？和滑动屏幕功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T05:30:19.173

这些链接将对其他会来这里的人有所帮助。

[http://www.youtube.com/watch?v=N0HNMK8xewE](http://www.youtube.com/watch?v=N0HNMK8xewE)

[http://www.dreamincode.net/forums/topic/270319-how-to-create-a-slide-in-menulist-like-in-facebook-app/](http://www.dreamincode.net/forums/topic/270319-how-to-create-a-slide-in-menulist-like-in-facebook-app/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T02:50:33.947

您可以使用带有自定义图像的搜索栏来看起来像您想要的那样

将您的布​​局包装在垂直线性布局中，具有滑块和当前布局

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T01:34:03.903

也许您需要将以下代码添加到您的 onCreat() 方法中？

```
setSlidingActionBarEnabled(false); 
```

# android - 使用小部件进行布局缩放

> ID：16049798
> 
> 赞同：1
> 
> 时间：2013-04-17T01:13:24.610
> 
> 标签：android

我正在尝试使用图像背景和文本视图等小部件来缩放布局。我已经通过搜索和遵循一些教程实现了捏缩放。但问题是缩放布局时不平滑（闪烁）。

那么有没有人有关于这个问题的解决方案？或者有不同的方法如何平滑地缩放布局？

任何想法将不胜感激。

这是我的代码：

```
public class ZoomActivity extends Activity {

    View mainView = null;
    PointF start = new PointF();
    PointF mid = new PointF();
    float oldDist = 1f;
    PointF oldDistPoint = new PointF();

    public static String TAG = "ZOOM";

    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.landingpage);
        mainView = (LinearLayout) findViewById(R.id.linear);

        mainView.setOnTouchListener(new OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                Log.d(TAG, "mode=DRAG");
                switch (event.getAction() & MotionEvent.ACTION_MASK) {
                case MotionEvent.ACTION_DOWN:
                    start.set(event.getX(), event.getY());
                    Log.d(TAG, "mode=DRAG");
                    mode = DRAG;

                    break;
                case MotionEvent.ACTION_POINTER_DOWN:
                    oldDist = spacing(event);
                    oldDistPoint = spacingPoint(event);
                    Log.d(TAG, "oldDist=" + oldDist);
                    if (oldDist > 10f) {
                        midPoint(mid, event);
                        mode = ZOOM;
                        Log.d(TAG, "mode=ZOOM");
                    }
                    System.out.println("current time :"
                            + System.currentTimeMillis());
                    break;// return !gestureDetector.onTouchEvent(event);
                case MotionEvent.ACTION_UP:
                case MotionEvent.ACTION_POINTER_UP:
                    Log.d(TAG, "mode=NONE");
                    mode = NONE;
                    break;
                case MotionEvent.ACTION_MOVE:
                    if (mode == DRAG) {

                    } else if (mode == ZOOM) {
                        PointF newDist = spacingPoint(event);
                        float newD = spacing(event);
                        Log.e(TAG, "newDist=" + newDist);
                        float[] old = new float[9];
                        float[] newm = new float[9];
                        Log.e(TAG, "x=" + old[0] + ":&:" + old[2]);
                        Log.e(TAG, "y=" + old[4] + ":&:" + old[5]);
                        float scale = newD / oldDist;
                        float scalex = newDist.x / oldDistPoint.x;
                        float scaley = newDist.y / oldDistPoint.y;
                        zoom(scale, scale, start);
                    }
                    break;
                }
                return true;
            }
        });
    }

    /**
     * zooming is done from here
     */
    public void zoom(Float scaleX, Float scaleY, PointF pivot) {
        mainView.setPivotX(pivot.x);
        mainView.setPivotY(pivot.y);
        mainView.setScaleX(scaleX);
        mainView.setScaleY(scaleY);
    }

    /**
     * space between the first two fingers
     */
    private float spacing(MotionEvent event) {
        // ...
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return FloatMath.sqrt(x * x + y * y);
    }

    private PointF spacingPoint(MotionEvent event) {
        PointF f = new PointF();
        f.x = event.getX(0) - event.getX(1);
        f.y = event.getY(0) - event.getY(1);
        return f;
    }

    /**
     * the mid point of the first two fingers
     */
    private void midPoint(PointF point, MotionEvent event) {
        // ...
        float x = event.getX(0) + event.getX(1);
        float y = event.getY(0) + event.getY(1);
        point.set(x / 2, y / 2);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:29:48.403

你可以试试这个 zoomview -> [https://code.google.com/p/android-zoom-view/](https://code.google.com/p/android-zoom-view/)

他们使用矩阵和画布来缩放您的视图。使用它非常简单，您可以将 java 文件从存储库复制到您的项目，然后您可以像这样将它添加到您的 xml 视图中

```
<yourpackagename.ZoomvView>
     //place your view that want to be zoomed here
</yourpackagename.ZoomvView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T15:06:17.847

很抱歉提出问题，但如果您遇到此错误“自定义视图 ZoomView 未使用 2 或 3 参数视图构造函数；XML 属性将不起作用”

只需在 java 类 ZoomView 中添加这些

公共 ZoomView（上下文上下文，AttributeSet 属性集）

{ 超级（上下文，属性集）；

```
//TODO: 
```

}

# javascript - this.$el.html 与 this.$el.append

> ID：16049802
> 
> 赞同：4
> 
> 时间：2013-04-17T01:13:43.070
> 
> 标签：javascript, jquery, backbone.js, underscore.js

渲染模板时 this.$el.html 和 this.$el.append 有区别吗？我对 js、backbone 等完全陌生。在我正在进行的当前项目中，我看到了类似的东西

```
this.$el.append(Project.Templates["template-library"](this.model)) 
```

在外观上。在这种情况下，此模板用于模态视图。然后说模态视图中的每个项目都有一行显示在模态视图中。然后对于这些行中的每一行，模板将呈现如下：

```
this.$el.html(this.template({ libraries: libraries.toJSON() })); 
```

两者有什么区别吗？以及为什么`append()`应该在某些情况下使用，而`html()`在其他情况下使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T03:00:32.267

对我来说，这真的归结为你如何使用你的观点的`render`方法。

有些人喜欢将其`render`用作 的扩展`initialize`，因为他们只使用一次，当视图第一次出现在页面上时，并且经常从`initialize`. 使用这种样式，您可以安全地使用`append`，而不必担心意外添加元素两次，因为渲染不会运行两次。

或者，当视图的元素需要以某种方式更改时，您可以设计`render`为一遍又一遍地使用。Backbone 很好地支持这种风格，例如。`this.model.on('change', this.render, this);`. 对于这种风格，`append`会很烦人，因为您必须经常检查元素是否已经存在，然后才能使用`append`它们。相反`html`，它更有意义，因为它消除了之前存在的任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-05T06:00:51.537

使用`.append()`将允许您向现有对象添加或附加某些内容。而是使用`.html()`，它将整个对象更改为新对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T01:15:45.883

使用[append](http://api.jquery.com/append/)会在 中插入一个新元素`$el`，而[html](http://api.jquery.com/html/)会更改`$el`.

# java - 在 Java 中遇到动态绑定问题

> ID：16049803
> 
> 赞同：0
> 
> 时间：2013-04-17T01:13:46.380
> 
> 标签：java, arrays, dynamic, binding, polymorphism

所以我遇到了一个问题，两天来一直在绞尽脑汁想弄清楚，所以我想是时候寻求帮助了。

所以在这里我的问题是我有一个抽象类 B 扩展抽象类 A，我没有覆盖 B 中的任何方法或任何东西，而是指定更专业的行为、变量等。

现在这是我的问题所在，我有第三个类，比如说 C 类，它实现了所有正确的方法，可能覆盖了一些（我使用了@Override 符号，所以我知道它做得对），并且可能添加一些它自己的方法和变量。

现在这很好，但是当我尝试创建一个我想使用动态绑定的 A 类型数组时，我可以添加 C 类型的对象，或者像这样返回 A 的任何其他对象。

```
A[] AObjects = new A[3];
Aobject[0] = new C();
so on and so forth 
```

现在可以说我有一个像 getNum(); 这样的方法。在只有 C 的 C 内部，它一直告诉我 getNum(); 当我尝试使用它时，它没有在类型 A 中定义。我错过了什么吗？因为据我了解，方法只在运行时绑定，所以我应该能够获取 A 类型的引用变量，并将其分配给 C 类型的对象，并能够调用 C 中的所有公共成员，正确的？还是数组的规则不同？

ps 我对变量使用protected，对我的方法使用public。

任何帮助将不胜感激！：） 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:25:16.450

如果该类具有该方法的定义，则只能在该类上调用该方法，因此如果`A`未定义`getNum()`，则无法调用`getNum()`它。这些是编译器的规则，而不是运行时的规则；`A a`实际上可能是 a `C`，但编译器无法知道这一点。如果你想调用's 方法，你需要告诉编译器那`a`是 a ，例如，如果事实证明这实际上不是 a那么你会得到一个 run-time 。为了防止这种情况，您可以使用运算符，`C``C``((C)a).getNum();``a``C``ClassCastException``instanceof`

```
if(a instanceof C)
    ((C)a).getNum();
else 
    // do something else 
```

但像这样的演员表通常表明设计不佳。但是如果你真的想这样做，使用它`instanceof`比 catch `ClassCastException`s 快得多（大约快一个数量级）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:45:27.207

如果您有一个类型的数组`A[]`并向其中添加一个类型的对象`C`，那么您实际上是将其向上转换为`A`. 所以当你做这样的事情时

```
A[] aObjects = new A[3];
aObjects[0] = new C();
aObjects[0].someMethodOnlyDefinedForC(); // <-- Compile error 
```

您可以认为编译器将其解释为：

```
C objectOfTypeC = new C();
A objectCastToTypeA = (A) objectOfTypeC; // Upcasting to A
A[] aObjects = new A[3];
aObjects[0] = objectCastToTypeA;
objectCastToTypeA.someMethodOnlyDefinedForC(); // <-- Compile error 
```

通过将它添加到数组中`A[]`，您告诉编译器只关心类中定义的公共接口`A`，而不关心任何子类中定义的方法。

当然，如果您可以保证某个索引处的项目将始终是 type `C`，您可以将其降级，`((C) aObjects[0]).methodOnlyDefinedForC()`但以这种方式欺骗类型系统有点代码味道。确定这些类是否真的应该相互继承，或者您是否可以更好地利用多态性来实现您所需要的。

如果您确实需要对数组中的项目执行不同的操作，具体取决于它们的类型`A`是 ,`B`还是`C`，那么您可以查看[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。

# angularjs - 角度指令 - 在链接方法中定义的模板函数的属性中调用函数时的插值问题

> ID：16049804
> 
> 赞同：2
> 
> 时间：2013-04-17T01:13:53.190
> 
> 标签：angularjs, angularjs-directive

好的，目前正在学习角度指令，但遇到了一个问题。

我有一个指令，其中在链接函数中创建了一个函数，该函数链接到在模板函数上作为 html 元素中的属性调用的范围。它也被称为在 html 标记之间。两个标签都没有更新。我怀疑它还没有编译或什么的。但是，我无法理解文档，因为它似乎一次谈论太多事情并且没有多大意义。或者他们遗漏了一些关键信息。

下面的任何一种方式都是我的代码的快照。

{{labelText()}} 不更新/插值。任何有关解决方案的帮助都会很棒！

```
var app = angular.module('mmApp', []);
app.directive('mmField', function(){

    return {
        'restrict': 'E',
        'priority': 5,
        'replace': true,
        'scope': {
            'path': '@',
            'label': '@',
            'type': '@',
            'editable': '@'
        },
        'template': '<div class="mm-field">' +
            '<label for="{{inputId()}}" ng-show="labelText()">{{labelText()}}</label> ' +
            '</div>',

        'link': function (scope, element, attrs) {
            var query = null;
//this is where the labelText() function is defined
            scope.labelText = function () {
                var labelAttrValue = (scope.label || attrs['withLabel'] || '');
                // cater for custom labels specified via the label or with-label attribute
                if (labelAttrValue && labelAttrValue.toLowerCase() !== 'true' && labelAttrValue.toLowerCase() !== 'false') {
                    return (labelAttrValue || '') + ':';
                } else if (labelAttrValue.toLowerCase() !== 'false' && scope.field) {
                    return (scope.field['name'] || 'FIELD_NAME_NOT_DEFINED') + ':';
                } else if (labelAttrValue.toLowerCase() == 'false') {
                    return '';
                } else {
                    return 'Loading...';
                }
            };
        }
}
]) 
```

我的测试功能如下。使用 mocha 和 chai 测试套件。

```
describe('LabelText', function () {
            it('should compile and run the directive and interpolate labelText()', function () {
                var element = $($compile('<div id="#test">' +
                    '<mm-field with-label="MONKEY" editable="false" path="`enter something.name"></mm-field>' +
                    '</div>')($scope));
                $scope.$digest();
                expect(element.find('label').attr('ng-show')).to.not.equal(labelText()); //test fails and equals labelText()
            });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T03:36:40.490

我认为这只是某处的语法问题。

我复制了您的代码并在本地运行它。我让它工作，但只有在修复了一些不匹配的大括号并删除了你放在那里的所有依赖注入之后，因为它们都没有在链接函数中使用。

```
directive('mmField', function () {
  return {
    'restrict': 'E',
    'priority': 5,
    'replace': true,
    'scope': {
      'path': '@',
      'label': '@'
    },
    'template': '<div class="mm-field">' +
    '<label for="{{inputId()}}" ng-class="labelClass()" ng-show="labelText()">{{labelText()}}</label> ' +
    '<span class="field-value" ng-class="spanClass()" ng-click="handleSpanClick($event)" ng-show="!error">{{displayValue}}  <span class="units" ng-show="getUnits()">{{getUnits()}}</span></span> ' +
    '</div>',
    'link': function (scope, element, attrs) {
      var query = null;

      scope.labelText = function () {
        var labelAttrValue = (scope.label || attrs['withLabel'] || '');

        if (scope.error) return scope.error;

        // cater for custom labels specified via the label or with-label attribute
        if (labelAttrValue && labelAttrValue.toLowerCase() !== 'true' && labelAttrValue.toLowerCase() !== 'false') {
          return (labelAttrValue || '') + ':';
        } else if (labelAttrValue.toLowerCase() !== 'false' && scope.field) {
          return (scope.field['name'] || 'FIELD_NAME_NOT_DEFINED') + ':';
        } else if (labelAttrValue.toLowerCase() == 'false') {
          return '';
        } else {
          return 'Loading...';
        }
      };
      scope.inputId = function () {
        return scope.path.replace(/[^a-z0-9]/gi, '_');
      };
    }
  }
}); 
```

# c# - 如何通过在 C# 中提供凭据从远程计算机查看事件日志？

> ID：16049805
> 
> 赞同：2
> 
> 时间：2013-04-17T01:14:06.580
> 
> 标签：c#, impersonation, event-viewer

您好我正在尝试使用 c# 查看远程计算机中的事件日志。我只想使用 Source Enterprise Library Logging 获取日志。下面的代码在本地机器上运行良好。要连接到远程机器，我需要模拟或提供一些凭据，这些凭据将使代码通过远程服务器进行身份验证。我如何在这里进行模拟：

```
 var log = new EventLog("Application", "hostname", "Enterprise Library Logging");

   var entries = log.Entries.OfType<EventLogEntry>().Where(o => o.Source == "Enterprise Library Logging");

   Console.WriteLine("Total Entries: " + log.Entries.Count);
   EventLogEntry last = log.Entries[log.Entries.Count - 1];
   Console.WriteLine("Index: " + last.Index);
    Console.WriteLine("Index: " + last.EntryType);
   Console.WriteLine("Index: " + last.TimeWritten); 
```

# php - 基本的 PHP 上传脚本没有产生预期的结果

> ID：16049809
> 
> 赞同：1
> 
> 时间：2013-04-17T01:14:43.317
> 
> 标签：php

我现在的目标不是完美，而是功能。我稍后会添加视觉效果和安全性，但现在我想做的只是将上传限制为 .mp3 文件，并在上传后生成文件的 URL。

目前，PHP 显示预期的回显结果，但文件不在 中`/var/www/html/upload`，因为它应该是。

# HTML（至少有问题的部分。）

上传.html

```
<form action="upload_file.php" method="post" enctype="multipart/form-data">
<label for="file"><strong>File:</strong></label>
<input type="file" name="file" id="file"><br>
<input type="submit" name="submit" value="SUBMIT">
</form> 
```

# PHP（它的每一点。）

上传文件.php

```
<?php
if ($_FILES["file"]["type"] == "audio/mp3")
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
      }
    }
  }
else
  {
  echo "Invalid file";
  }
?> 
```

# PHP 结果

检查`upload/`，目录为空。

```
Upload: hintro.mp3
Type: audio/mp3
Size: 390.0947265625 kB
Temp file: /tmp/phpnMYOou
Stored in: upload/hintro.mp3 
```

任何和所有的帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:56:05.880

假设您的目录结构如下所示

```
parent-folder/
    |-upload/
    |-upload.html
    |-upload_file.php 
```

试试这个

```
<?php
// Remove these two lines when you've finished development
error_reporting(E_ALL);
ini_set('display_errors', 'On');

if (!($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_FILES['file']))) {
    throw new Exception('Only accepting file uploads via POST');
}

$file = $_FILES['file'];
if ($file['error'] > 0) {
    throw new Exception('File upload error', $file['error']);
}
if ($file['type'] != 'audio/mp3') {
    throw new Exception('Invalid file');
}

$dest = __DIR__ . '/upload/' . $file['name'];

if (file_exists($dest)) {
    throw new Exception(sprintf('%s already exists', basename($dest)));
}
if (!is_writable(dirname($dest))) {
    throw new Exception(sprintf('%s is not writable', dirname($dest)));
}

if (!move_uploaded_file($file['tmp_name'], $dest)) {
    throw new Exception(sprintf('Error moving uploaded file from %s to %s',
        $file['tmp_name'], $dest));
}

echo 'Upload: ',    $file['name'],     '<br>',
     'Type: ',      $file['type'],     '<br>',
     'Size: ',      $file['size'],     '<br>',
     'Temp file: ', $file['tmp_name'], '<br>',
     'Stored in: ', $dest; 
```

# struts2 - Struts2 addActionError 设置结果自动输入重定向结果

> ID：16049813
> 
> 赞同：1
> 
> 时间：2013-04-17T01:15:15.510
> 
> 标签：struts2, struts

我有一个 struts2 操作，它使用`addActionError`如下所示设置了一些错误

```
 public String del() {
        if (new OrdersService().get(idorder) == null) {
            addActionError("Order not found");
        } else {
            new OrdersService().remove(idorder);
            addActionMessage("Order deleted successfully");
        }
        return SUCCESS;
    } 
```

所以上述方法无所谓总是返回“成功”结果。

但是在 struts.xml 中，我使用了重定向结果类型来重定向到另一个操作，并且该操作从未执行，而是我得到了结果“输入”，我无法理解出了什么问题？

是不是类似于如果一个动作设置了一个`actionError`，则无法执行另一个动作，并且会立即抛出“输入”结果。但这没有意义（至少对我来说）！

[编辑] 包括 struts.xml 的某些部分

```
<action name="/order/{idorder:[0-9]+}/del" class="actions.OrderAction" method="del">
    <interceptor-ref name="store">
        <param name="operationMode">AUTOMATIC</param>
    </interceptor-ref>
    <interceptor-ref name="defaultStack" />

    <result name="success" type="redirect">orders</result>
</action> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T01:39:45.470

默认堆栈包括“工作流”拦截器。

如果存在操作或字段错误，此拦截器将返回“输入”结果，因为存在错误。

阅读一些文档将为您指明正确的方向。请注意，您的错误无论如何都会在重定向中丢失，除非您专门保存它们。

此外，如果您想重定向到某个操作，请使用“actionRedirect”结果类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-13T09:24:52.603

```
public String del() {
    if (new OrdersService().get(idorder) == null) {
        addActionError("Order not found");
        return ERROR;
    } else {
        new OrdersService().remove(idorder);
        addActionMessage("Order deleted successfully");
        return SUCCESS;
    }
} 
```

还包括返回类型“错误”，就像您在 struts.xml 中的操作映射中为返回类型“成功”所做的那样

# c++ - 在线程和内存管理之间传递消息

> ID：16049814
> 
> 赞同：9
> 
> 时间：2013-04-17T01:15:23.890
> 
> 标签：c++, multithreading, memory-management

我正在编写一个带有两个线程的 C++ 应用程序。线程 A 将向线程 B 发送消息。消息类型可以是：

```
struct MyMessageType
{
  int a;
  enum MyEnum b;
  bool someFlag;
} 
```

A`std::queue<MyMessageType> messageQueue`在线程之间共享，用于传递消息。

在发送线程中，我会有类似的东西：

```
struct MyMessageType newMessage;
newMessage.a = 14;
newMessage.b = someEnumeratedValue;
newMessage.someFlag = false;
GrabTheMutexProtectingTheQueue();
messageQueue.push(newMessage);
ReleaseTheMutexProtectingTheQueue(); 
```

我的问题是关于内存管理的，有两个方面：

A）如何确保`newMessage`接收线程收到消息时指向的指针有效？例如，如果创建的函数在接收线程处理消息之前`newMessage`结束并`newMessage`因此超出范围，会发生什么？

B）一旦我可以确保`newMessage`在接收线程处理它时指针是有效的，我如何释放结构使用的内存？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T01:20:01.497

该`std::queue` `push()`函数存储您提供的任何内容的*副本（请参见*[此处](http://www.cplusplus.com/reference/queue/queue/push/)），因此您不必担心它超出范围。

队列中的副本将一直存在，直到您使用 删除它`pop()`。

因此，在发送方，这是一个简单的问题（例如）：

```
lock_mutex();
myqueue.push (something);
unlock_mutex();
// Do whatever you want with something, the queue has a copy 
```

并且，在接收端：

```
lock_mutex();
while (myqueue.empty()) {
    unlock_mutex();
    // possibly yield to another thread
    lock_mutex();
}
something = myqueue.front();
weaveMagicWith (something);
myqueue.pop();
unlock_mutex(); 
```

当然，您可以重新设计它以最小化接收端互斥锁的持续时间（例如，如果编织魔法需要很长时间），这只是一个粗略的示例，展示了一种方法。

# android - 关于在 Linux 上为 USB 设备供电：Android 相机应用程序可以识别 USB 相机，但 Ubuntu 不能

> ID：16049818
> 
> 赞同：0
> 
> 时间：2013-04-17T01:15:57.533
> 
> 标签：android, ubuntu, camera, usb

在我的笔记本上，我有一个 USB 摄像头，在 SD 卡上运行 32 位 Ubuntu 10.04，在闪存上运行 Android Jelly Bean。

Ubuntu 无法识别相机（甚至是 USB 端口），因为出于某种原因，它不为其提供任何电源。如果我在通电的 USB 端口和相机 USB 端口之间连接一根线，则 dmesg 会识别我的 USB 端口和相机。

但是，如果我移除我的 SD 卡，我的笔记本电脑会启动 Android JB。它也无法识别连接相机的 USB 端口。但是当我启动相机应用程序时，USB 以某种方式获得电源并开始工作！为 USB 端口供电的 Android 相机服务有一些技巧。

有人对这个有了解吗？

（如果可能，我在哪里可以找到包含相机应用程序执行的操作的源代码？）

编辑：

## 这是 USB 摄像头端口通过我连接的电线供电时的 lsusb 输出

```
$ lsusb
Bus 003 Device 002: ID 04d9:2ba0 Holtek Semiconductor, Inc. 
Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 001 Device 013: ID 1e4e:0102  
Bus 001 Device 004: ID 0bda:8176 Realtek Semiconductor Corp. 
Bus 001 Device 002: ID 05e3:0608 Genesys Logic, Inc. USB-2.0 4-Port HUB
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub 
```

## 这是正常的 lsusb 输出，没有识别 USB 摄像头/端口

```
$ lsusb
Bus 003 Device 002: ID 04d9:2ba0 Holtek Semiconductor, Inc. 
Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 001 Device 004: ID 0bda:8176 Realtek Semiconductor Corp. 
Bus 001 Device 002: ID 05e3:0608 Genesys Logic, Inc. USB-2.0 4-Port HUB
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub 
```

## 这是我连接电线时的 dmesg。请注意，它会断开连接，因为握住电线并不容易站着不动：P

```
$ dmesg | tail    
[  483.790202] uvcvideo: Found UVC 1.00 device USB2.0 Camera (1e4e:0102)    
[  483.797666] input: USB2.0 Camera as /devices/pci0000:00/0000:00:04.0/usb1/1-1/1-1:1.0/input/input4    
[  484.608278] usb 1-1: USB disconnect, device number 8    
[  486.123368] usb 1-1: new high speed USB device number 9 using ehci_hcd
[  486.258975] usb 1-1: device descriptor read/all, error -71    
[  486.320237] hub 1-0:1.0: unable to enumerate USB device on port 1    
[  486.896696] usb 1-1: new high speed USB device number 11 using ehci_hcd    
[  487.040213] uvcvideo: Found UVC 1.00 device USB2.0 Camera (1e4e:0102)    
[  487.047682] input: USB2.0 Camera as /devices/pci0000:00/0000:00:04.0/usb1/1-1/1-1:1.0
/input/input5    
[  491.890035] usb 1-1: USB disconnect, device number 11 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:14:43.950

相机的源代码可以在[https://android.googlesource.com/platform/packages/apps/Camera/](https://android.googlesource.com/platform/packages/apps/Camera/)找到。

# android - WallpaperService.Engine.onTouchEvent 没有收到 ACTION_MOVE 事件

> ID：16049823
> 
> 赞同：1
> 
> 时间：2013-04-17T01:16:28.370
> 
> 标签：android, live-wallpaper

使用动态壁纸时，WallpaperService.Engine.onTouchEvent 不会收到 ACTION_MOVE 事件，但事件在预览时效果很好。

有人有类似的问题并知道如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T05:53:12.247

尝试在 Engine 构造函数中调用 setTouchEventsEnabled(true)。

[我在尝试做 Vogella 的教程](http://www.vogella.com/articles/AndroidLiveWallpaper/article.html)时遇到了同样的问题，这为我解决了。

# oracle - 在 2 个日期之间开票

> ID：16049828
> 
> 赞同：0
> 
> 时间：2013-04-17T01:16:53.890
> 
> 标签：oracle, plsql, oracle11g

我正在尝试查找在 2012 年 5 月 1 日至 2012 年 5 月 30 日之间开放的开放票。

所以，我应该得到：5 月 1 日：0，5 月 2 日 0，3 日：2

但我目前得到的是 5 月 1 日：2、2 日：2、3 日：2，然后每 3 天开始上涨

数据 ：

```
CREATE TABLE bugs
(
    BUG_ID          NUMBER PRIMARY KEY,
    REPORTED_DATE   DATE NOT NULL,
    DESCRIPTION     VARCHAR2(20),
    PRIORITY        NUMBER(2),
    ASSIGNED_TO     VARCHAR2(10),
    CLOSED_DATE     DATE,
    NOTE            VARCHAR2(20)
);

INSERT INTO BUGS VALUES (1230, '25-APR-12', NULL, 3, 'Team 3', '28-APR-12', NULL); 
INSERT INTO BUGS VALUES (1231, '29-APR-12', NULL, 1, 'Team 1', '29-APR-12', NULL); 
INSERT INTO BUGS VALUES (1232, '03-MAY-12', NULL, 1, 'Team 1', '03-MAY-12', NULL); 
INSERT INTO BUGS VALUES (1233, '03-MAY-12', NULL, 1, 'Team 3', '08-MAY-12', NULL);
INSERT INTO BUGS VALUES (1234, '04-MAY-12', NULL, 2, 'Team 5', '15-MAY-12', NULL);
INSERT INTO BUGS VALUES (1235, '04-MAY-12', NULL, 2, 'Team 1',  NULL,       NULL);
INSERT INTO BUGS VALUES (1236, '05-MAY-12', NULL, 1, 'Team 2', '06-MAY-12', NULL);
INSERT INTO BUGS VALUES (1237, '05-MAY-12', NULL, 3, 'Team 3', '10-MAY-12', NULL);
INSERT INTO BUGS VALUES (1238, '09-MAY-12', NULL, 4, 'Team 5', '16-MAY-12', NULL);
INSERT INTO BUGS VALUES (1239, '09-MAY-12', NULL, 5, 'Team 6',  NULL,       NULL);
INSERT INTO BUGS VALUES (1240, '12-MAY-12', NULL, 5, 'Team 2', '30-MAY-12', NULL);
INSERT INTO BUGS VALUES (1241, '12-MAY-12', NULL, 1, 'Team 1', '12-MAY-12', NULL);
INSERT INTO BUGS VALUES (1242, '13-MAY-12', NULL, 4, 'Team 4', '20-MAY-12', NULL);
INSERT INTO BUGS VALUES (1243, '15-MAY-12', NULL, 4, 'Team 3', '01-AUG-12', NULL);
INSERT INTO BUGS VALUES (1244, '15-MAY-12', NULL, 2, 'Team 4', '20-MAY-12', NULL);
INSERT INTO BUGS VALUES (1245, '20-MAY-12', NULL, 2, 'Team 4',  NULL,       NULL);
INSERT INTO BUGS VALUES (1246, '22-MAY-12', NULL, 2, 'Team 4', '23-MAY-12', NULL);
INSERT INTO BUGS VALUES (1247, '25-MAY-12', NULL, 2, 'Team 1', '29-MAY-12', NULL);
INSERT INTO BUGS VALUES (1248, '30-MAY-12', NULL, 1, 'Team 1', '01-JUN-12', NULL);
INSERT INTO BUGS VALUES (1249, '05-JUN-12', NULL, 1, 'Team 2', '07-JUN-12', NULL);
COMMIT; 
```

到目前为止我的代码：

```
DECLARE
  v_date bugs.closed_date%type     := '01-may-12';
  v_end_date bugs.closed_date%type := '20-may-12';
  v_openbugs NUMBER(10);
BEGIN
  WHILE v_date <= v_end_date
  LOOP
    SELECT COUNT(bug_id)
    INTO v_openbugs
    FROM bugs
    WHERE bugs.reported_date < v_date
    AND v_date > bugs.closed_date;
    DBMS_OUTPUT.PUT_LINE (v_date ||'   '|| v_openbugs);
    v_date := v_date + 1;
  END LOOP;
END; 
```

我需要在 PL/SQL 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:24:23.033

您可以只使用 SQL 来管理它：

```
WITH DAYS AS
    (SELECT 
        TO_DATE('06/01/2012', 'MM/DD/YYYY') - ROWNUM D
    FROM
        DUAL
    WHERE ROWNUM < 32)
SELECT
    DAYS.D,
    SUM(CASE 
        WHEN B.REPORTED_DATE IS NULL THEN 
            0 
        ELSE 
            1 
        END)
FROM
    DAYS 
    LEFT OUTER JOIN BUGS B
    ON (DAYS.D BETWEEN B.REPORTED_DATE AND NVL(CLOSED_DATE, DAYS.D))
GROUP BY DAYS.D
ORDER BY DAYS.D ASC 
```

如果您要使其成为自动报告，那么我会将日期作为参数传递并将结果存储在游标中，并让调用过程根据需要格式化输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T19:20:34.790

这是我得到的答案

```
DECLARE
  v_date bugs.closed_date%type     := '01-may-12';
  v_end_date bugs.closed_date%type := '31-may-12';
  v_openbugs NUMBER(10);
  v_maxbug number(10):=0;
BEGIN
DBMS_OUTPUT.PUT_LINE ('Date' ||'   '|| 'Open bugs');
  WHILE v_date <= v_end_date
  LOOP
    SELECT COUNT(bug_id)
    INTO v_openbugs
    FROM bugs
    WHERE bugs.reported_date <= to_date(v_date)
    AND nvl(bugs.closed_date,'31-may-12') >= to_date(v_date);
   if v_maxbug < v_openbugs then v_maxbug:=v_openbugs; end if;
    DBMS_OUTPUT.PUT_LINE (v_date ||'   '|| v_openbugs);
    v_date := v_date + 1;
  END LOOP;
   DBMS_OUTPUT.PUT_LINE ('===========================');
   DBMS_OUTPUT.PUT_LINE ('the max number of open bugs is:'|| v_maxbug);
END; 
```

# javascript - 具有高分辨率智能手机和平板电脑的响应式 CSS

> ID：16049829
> 
> 赞同：4
> 
> 时间：2013-04-17T01:16:55.143
> 
> 标签：javascript, html, css, responsive-design

当我尝试使 Web 应用程序响应屏幕尺寸时遇到问题。

我有我想用于智能手机（iPhone、Andriod、黑莓、Windows Phone）的 CSS，还有我想用于平板电脑的 CSS。

我的测试设备是 iPad 3 (768 x 1024) 和 blackberry 10 (768 x 1280)。并且宽度相同是一个问题，因为我的 css 以：

```
@media screen and (max-width:768px){
    //enter code here`code here
} 
```

因为黑莓的分辨率稍好一些，所以它呈现了我不想使用的 CSS。我想还有另一种方法来检查媒体类型吗？我想知道是否有办法以可测量的距离（厘米或英寸）检查宽度。不知道如何解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T01:40:10.443

CSS 声明中使用的“像素”以及当浏览器报告客户端设备的屏幕尺寸时，与设备屏幕上的实际像素无关。CSS 中使用的“像素”本质上是专门为我们 Web 开发人员创建的抽象结构。对于大多数 Web 应用程序来说，关注高分辨率移动屏幕上真实像素的实际数量是完全没有必要的，只会让你发疯。

您可以通过检查`navigator.userAgent`JavaScript 中的属性来确定浏览器和设备类型。例如，要测试（实际上）任何移动设备：

```
 // if mobile === true, 99% chance the device is mobile.
var mobile = (/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase())); 
```

您当然可以检查`navigator.userAgent`以确定用户是否使用您特别关注或遇到问题的特定类型的设备或浏览器。

但同样，以我个人的经验，聪明、简单、**灵活**的响应式 CSS 设计（当然也支持媒体查询和 JavaScript）将在 99% 的设备/浏览器组合上呈现精美，而无需借助检查`navigator.userAgent`来创建不同的单个设备的样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T01:19:12.757

您还可以将样式限制为高度：

```
@media screen and (max-width:768px) and (max-height:1024px){
    // iPAD
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-11T11:59:52.257

您应该在 html 标头中添加元标记视口：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

总结一下 ：

> 宽度 = 设备宽度 x 像素密度

（银河 S4：1080 = 360 x 3）

此元标记允许您捕获设备宽度而不是“伪造的宽度”（360 而不是 1080）

一些很好的阅读：

*   [https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag)
*   [http://screensiz.es/电话](http://screensiz.es/phone)
*   [http://www.html5rocks.com/en/mobile/mobifying/#toc-meta](http://www.html5rocks.com/en/mobile/mobifying/#toc-meta)

# android - 查找行距的高度

> ID：16049841
> 
> 赞同：3
> 
> 时间：2013-04-17T01:17:44.417
> 
> 标签：android, text, textview, paint, font-size

我有以下代码来查找屏幕尺寸计算屏幕上适合多少文本。

现在我需要知道屏幕上有多少行。我有从上升到下降的文本大小。我需要知道行距的高度。getFontSpacing 还给出了从上升到下降的值。

有谁知道是否有办法找到行距的值？

```
 //Code for Getting screen Dimensions
    Display display = getWindowManager().getDefaultDisplay();
    Point size = new Point();
    display.getSize(size);
    int width = size.x;
    int height = size.y;

    //Breaking Text When Width Is Filled
    Paint p = new Paint();
    p.setTextSize(60);
    int textNum = p.breakText(sText, 0, 20, forOrBack, width, null);

    //Working Out How Many Lines Can Be Entered In The Screen
    float fHeight = p.descent() - p.ascent();
    int tHeight = (int) fHeight;
    int numLines = height/tHeight; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-20T05:06:53.897

对于行距，使用 textView.getLineHeight();

参考： http: [//developer.android.com/reference/android/widget/TextView.html#getLineHeight()](http://developer.android.com/reference/android/widget/TextView.html#getLineHeight())

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-12T08:26:18.173

以下将返回推荐的行距

```
textView.getPaint().getFontSpacing() 
```

您可以通过多种方式获取文本的高度。我更喜欢paint的getTextBounds方法，只需将两个值相加

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T01:40:10.393

```
Paint.FontMetrics fm = paint.getFontMetrics();
float fullHeight = fm.top - fm.bottom; 
```

据我记得，fm.bottom < 0，因此通过减去你实际上得到

```
Math.abs(fm.top) + Math.abs(fm.bottom) 
```

这个值比 ascent-descent 大，而且，我猜，它是实际的线大小。

您可以考虑在设置 TextSize 后使用 TextView.getLineHeight() 并在布局完成后优先使用（例如在 OnWindowFocusChanged 中）。

# java - Java简单数学异常

> ID：16049843
> 
> 赞同：3
> 
> 时间：2013-04-17T01:18:20.927
> 
> 标签：java

考虑简单的代码

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

public class Main {

    public static void main(String args[]){
        System.out.println(isFresh("2013-03-26 06:25:34"));
    }

    private static boolean isFresh(String ts){

        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); 
        Date date = new Date();
        try {
            date = sdf.parse(ts);

            if(( new Date().getTime() - date.getTime())>(24*40*60*60*1000)){ //Ignore events before 40 days. 
                return true;
            }
        } catch (ParseException e) {
            e.printStackTrace();
        }
        return false;
    }
} 
```

现在，如果我运行它，程序会打印 True。但是如果我用 3456000000.0 替换 24*40*60*60*1000，它会返回 False。请注意，我在末尾附加了一个 .0，以便 Java 将其视为 double 而不是 int。int 不能取那么大的数字，但 double 可以。

这是为什么 ？我怀疑这与数字在内部表示的方式有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T01:20:29.710

您正在使用`24*40*60*60*1000`. 当您使用`3456000000.0`时，没有溢出，因为正如您所说，它是双倍的。因此结果不同。

我们可以使用双打来避免溢出：

```
24.0 * 40.0 * 60.0 * 60.0 * 1000.0 
```

或多头：

```
24L * 40L * 60L * 60L * 1000L 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:25:00.043

int 范围是 -2,147,483,648 到 2,147,483,647 [http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

# mysql - 如何从带有内部连接的选择中更新归档值？

> ID：16049845
> 
> 赞同：0
> 
> 时间：2013-04-17T01:18:39.197
> 
> 标签：mysql, sql, database, sql-update

我正在尝试使用带有内部连接的选择查询来更新 mysql 数据库中的字段值

我目前得到

# 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的“AS cc WHERE cc.account_id = na.account_id”附近使用正确的语法

```
UPDATE accounts AS na
SET na.pdm_id = (
SELECT cp.person_id FROM `temp_accounts` AS ta INNER JOIN call_managment_system.accounts AS a ON ta.company_code = a.company_code
INNER JOIN contact_personal AS cp ON cp.name = ta.FSM AND contact_link = 'PDM' 
) 
WHERE a.account_id = na.account_id 
```

如何修复此查询以使其正常工作？我想更新名为 pdm_id 的字段以将其设置为等于 cp.person_id

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:26:48.330

```
UPDATE  accounts na
INNER JOIN call_managment_system.accounts a
ON      a.account_id = na.account_id
INNER JOIN temp_accounts ta 
ON     ta.company_code = a.company_code
INNER JOIN contact_personal cp 
ON cp.name = ta.FSM        
SET     na.pdm_id = cp.person_id
WHERE   contact_link = 'PDM' 
```

# windows - Windows 分片集群上的 MongoDB 身份验证

> ID：16049848
> 
> 赞同：1
> 
> 时间：2013-04-17T01:18:43.770
> 
> 标签：windows, mongodb, authentication

我的任务是在 windows 环境中准备一个 Sharded MongoDB Cluster。这是我第一次使用这个产品。我一直在尝试在 MongoDB 2.4 上进行身份验证以在此 windows Sharded Cluster 环境中工作，但它不工作。在 3 个配置服务器上启用 auth 选项后，MongoS 实例无法启动，当我删除 auth 选项时，MongoS 实例可以正常工作。

有人可以阐明如何使身份验证起作用吗？文档中提到了“KeyFile”选项，但我尝试在 Windows 中使用它，但无法识别该选项。

感谢大家。

海梅·冈萨雷斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T19:11:59.173

注意 在 Windows 系统上不检查密钥文件权限。

[http://docs.mongodb.org/manual/tutorial/generate-key-file/](http://docs.mongodb.org/manual/tutorial/generate-key-file/)

# c++ - 连接 MySQL 的 C++ 程序

> ID：16049859
> 
> 赞同：0
> 
> 时间：2013-04-17T01:20:10.067
> 
> 标签：c++, mysql, qt

现在这纯粹是假设性的（我希望这不会导致问题被关闭。这个问题有可能帮助访问者，我想这样做。）因为我几乎没有使用过像 C++ 这样的真正的编程语言两年。然而，我正在重新开始使用 C++，而且我一直是一个直接进入项目的人。

我有我的网站 www.gracepensacola.com，我正在设计一些表格来接收用户信息。这些信息将存储在我们的 MySQL 数据库中。

我需要我的 C++ 程序连接到数据库，检索所需信息，然后使用 QT 库显示它。（我只是从 C++ GUI 开始）。

我不知道我必须采取哪些步骤来做到这一点。我还没有看到任何关于 C++ 联系 MySQL 的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T01:26:26.460

如果您以前从未这样做过，那么第一步（显而易见的）就是阅读[这样的教程](http://dev.mysql.com/tech-resources/articles/mysql-connector-cpp.html)

[然后在此处](http://qt-project.org/doc/qt-4.8/sql-connecting.html)阅读有关 Qt 连接数据库的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T01:24:59.673

这与您将获得的 mysql 和 c++ 一样接近：

[http://dev.mysql.com/downloads/connector/cpp/](http://dev.mysql.com/downloads/connector/cpp/)

并且只是为了确保您与其他人在同一页面上：C/C++ 程序在服务器上运行。这意味着您无法从使用 c++ 程序查看窗口的人那里获取信息（至少，不是很容易）。

如果您想从浏览器页面获取信息，您可以使用 javascript 和 php 连接到 mysql。我认为如果这与人们在浏览器上访问您的网站有任何关系，那么您最终将不得不这样做。如果你学过 c/c++，那么 javascript 和 php 对你来说应该不难学。

您将开始使用 javascript 检索您需要的数据，如下所示：

```
// trivial way to get values in javascript
var userName = document.getElementById( "name" ).innerHTML;
var userAddr = document.getElementById( "address" ).innerHTML;
var userPhne = document.getElementById( "phoneNumber" ).innerHTML; 
```

然后，您可以将数据发送到 php 脚本，如下所示：

```
// javascript with a jquery library
$.post( "getData.php", { uName : userName, uAddr : userAddr } ); 
```

您会在 php 脚本中收到这些值：

```
<?php
    $uName = $_POST[ "uName" ]; // now $uName = userName from the browser page
    $uAddr = $_POST[ "uAddr" ];
    // mysql stuff goes here
?> 
```

如果您更喜欢 javascript，也可以将 javascript 用于连接到 mysql 的服务器端脚本。我相信你会像我上面那样做，除了你会调用一个 .js 文件。您可以通过以下链接获取更多信息：

使用 PHP

[http://www.w3schools.com/php/php_mysql_connect.asp](http://www.w3schools.com/php/php_mysql_connect.asp)

使用 javascript，与 node.js

[https://github.com/sidorares/nodejs-mysql-native](https://github.com/sidorares/nodejs-mysql-native)

还有一种简单的方法可以使用 php 将数据接收到 c++ 程序中。在最后一个 php/javascript 示例之后：

```
<?php
    $uName = $_POST[ "uName" ]; // now $uName = userName from the browser page
    $uAddr = $_POST[ "uAddr" ];

    shell_exec( "cProgram.exe " . $uName . " " . $uAddr )
?> 
```

这会将参数传递给具有以下入口点的 ac/c++ 程序：

```
int main( int argc, char * argv[] ){

    // argv[ 0 ] contains program name
    // argv[ 1 ] contains uName
    // argv[ 2 ] contains uAddr

    return 0;
} 
```

# php - 预定义搜索查询存储本地 php、mysql 效率

> ID：16049860
> 
> 赞同：1
> 
> 时间：2013-04-17T01:20:13.870
> 
> 标签：php, html, mysql

我一直无法找到解决方案，可能是因为我在搜索我的问题时得到了太多部分结果。

我有一个 mysql 数据库，经常搜索一个或多个特定字符串，这些字符串定义了聊天室的使用。

我不需要自定义搜索，我可以将列表概括为 30-50 个项目，这些项目将包含我需要搜索的每个术语。

对我来说，在加载网站时简单地加载这个 30-50 项列表并在数据库中存储整数会更有效吗？

示例：字符串 1 字符串 2

而不是在数据库聊天室中查询 string1，我只查询 1 知道它对应于我的 txt 文件中的 string1。

这是否更有效以及将此查询短语列表预加载到 html/php 会话中的最佳方法是什么。

谢谢。

# java - 嵌套的'for循环未正确初始化

> ID：16049861
> 
> 赞同：1
> 
> 时间：2013-04-17T01:20:26.003
> 
> 标签：java

变量 j 初始化为 172，这是它应该迭代的 wordList 的长度。wordList 是一个 ArrayList 感谢您的帮助。

```
for (i = 0; i < wordList.size(); i++)
     {
        row0 = wordList.get(i);
        ara = breakWord(row0);
        my2Dara[0] = ara;

            for (j = 0; j < wordList2.size(); j++);
        {
           row1 = wordList2.get(j);
           ara = breakWord(row1);
           my2Dara[1] = ara;

                for (k = 0; k < wordList.size(); k++);
           {
              row2 = wordList.get(k);
              ara = breakWord(row2);
              my2Dara[2] = ara;

                    for (l = 0; l < wordList.size(); l++);
              {
                 row3 = wordList.get(l);
                 ara = breakWord(row3);
                 my2Dara[3] = ara;

                 for (m = 0; m < wordList.size(); m++);
                 {
                    row4 = wordList.get(m);
                    ara = breakWord(row4);
                    my2Dara[4] = ara;

                    if(isSolution(my2Dara, wordList) == true)
                       print2Dara(my2Dara);             
                 }
              }
           }
        }
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T01:24:46.987

你被 Java 忠实继承的 C/C++ 主义所刺痛——能够通过在其后放置一个分号来立即结束 for、while 或 if。

如下所示的代码：

```
for(whatever);
{
   doThing()
} 
```

实际上是这样做的：

1) 设置 for 循环 - 做初始化器，检查我们是否可以执行第一个循环

2) 分号告诉编译器“这是 for 循环的结束”，因此 for 循环会疯狂地迭代，直到条件评估为 false。

3) 大括号 { } 中的部分之后执行一次 - 这不是编译器错误，因为您可以在任何时候出于任何原因或多或少地放置大括号对（这用于声明一个新的范围，有点像如果你创建一个新的变量范围 - 它不是 if，它是大括号！）

2) 可能的原因是 if、for、while 等在语法上被定义为只执行一件事情——下一条语句。A`;`是一个什么都不做的语句——把它想象成`doSomething();`没有这个`doSomething()`部分。`{ doX(); doY(); }`也是一个语句 - 可以将大括号视为将许多语句定义为一个语句的语法。编译器会忠实地执行您键入的内容。

2) 和 3) 的结果是所有这些东西在语法上都是有效的，而且通常不是你所期望的：

```
for(whatever);

if(true);

if(false);
{
    crashProgram(); //This will always execute! Good prank to play on computer science undergrads
}

{
   doThing(); //don't need an if, for, while or anything else to open {}s
}

{
 {
  {
    doThing(); //open as many as you like!
  }
 }
}

;;;;;;; //do a whole lot of nothing 
```

# php - 如果数组为空，则回显

> ID：16049869
> 
> 赞同：-3
> 
> 时间：2013-04-17T01:21:09.040
> 
> 标签：php, mysql, arrays

我一直在编写一些代码，根据教师上传的与同事和学生分享的项目数量向他们授予徽章。

当数组为空时，我遇到了问题。什么都没有出现。

我尝试了一个 empty() 函数，但我一定把它放在了错误的位置，因为它开始出现在有上传的用户身上。

所以基本上在下面的代码中，我遇到困难的是“如果 $uploads < 1”部分。

..由此产生的问题是如何在 mysql_fetch_array($upload_count) 为空的地方得到一条回显消息？

```
 <?php

$total_uploads = mysql_query("SELECT members.member_id, members.member_firstname,           members.member_lastname, COUNT(*)  
FROM uploads    
JOIN members
ON uploads.member_id = members.member_id
GROUP BY uploads.member_id   ");

$total_uploads_count    = @mysql_num_rows($total_uploads);

$upload_count = mysql_query("SELECT members.member_id, members.member_firstname,  members.member_lastname, COUNT(*)  
FROM uploads    
JOIN members
ON uploads.member_id = members.member_id AND members.member_id = ".     $_SESSION['member_id']  . "
GROUP BY uploads.member_id   ");

while($row_count=mysql_fetch_array($upload_count))  
{  

$uploads =  $row_count['COUNT(*)'];

 $unlock2 = 5 - $row_count['COUNT(*)'] ;
 $unlock3 = 20 - $row_count['COUNT(*)'] ;
 $unlock4 = 50 - $row_count['COUNT(*)'] ;
 $unlock5 = 100 - $row_count['COUNT(*)'] ;
 $unlock6 = 200 - $row_count['COUNT(*)'] ;           

 echo " you have <span class =\"blue_inherit\"> $uploads </span> uploads.<br/><br/>";

 if  ($uploads  < 1 )

 {

echo "Upload a resource to share in order to unlock your novice uploader badge!<br/>

 <img src=\"images/badges/badge_e_share_1_locked.png\" width=\"200\" height=\"200\" alt=\"Sharing Badge\" />";

 }

    else if  ($uploads >= 1 && ($uploads < 5 ))

 {

echo "Well done, you've unlocked your novice sharer's badge. <br/>

 <img src=\"images/badges/badge_e_share_1.png\" width=\"200\" height=\"200\" alt=\"Sharing Badge\" /><br/>

 If you upload $unlock2 more resources, you can unlock your E-sharing advanced beginner's badge. <br/>

  <img src=\"images/badges/badge_e_share_2_locked.png\" width=\"200\" height=\"200\" alt=\"Sharing Badge\" /><br/>

 ";

 }

    else if  ($uploads >= 5 && ($uploads < 20 ))

 {

echo "Well done, you've unlocked your E-sharing advanced beginner's badge. <br/>

 <img src=\"images/badges/badge_e_share_2.png\" width=\"200\" height=\"200\" alt=\"Sharing Badge\" /><br/>

 If you upload $unlock3 more resources, you can unlock your E-sharing mini-hero badge. <br/>

  <img src=\"images/badges/badge_e_share_3_locked.png\" width=\"200\" height=\"200\" alt=\"Sharing Badge\" /><br/> ";

 }

else if  ($uploads >= 20 && ($uploads < 50 ))

 {

echo "Well done, you've unlocked your E-sharing mini-hero badge. <br/>

 <img src=\"images/badges/badge_e_share_3.png\" width=\"200\" height=\"200\" alt=\"Sharing Badge\" /><br/>

 If you upload $unlock4 more resources, you can unlock your E-sharing hero badge. <br/>

  <img src=\"images/badges/badge_e_share_4_locked.png\" width=\"200\" height=\"200\" alt=\"Sharing Badge\" /><br/> ";

 }   

else if  ($uploads >= 50 && ($uploads < 100 ))

 {

echo "Well done, you've unlocked your E-sharing hero badge. <br/>

 <img src=\"images/badges/badge_e_share_4.png\" width=\"200\" height=\"200\" alt=\"Sharing Badge\" /><br/>

 If you upload $unlock5 more resources, you can unlock your E-sharing super-hero badge. <br/>

  <img src=\"images/badges/badge_e_share_5_locked.png\" width=\"200\" height=\"200\" alt=\"Sharing Badge\" /><br/> ";

 }       

else if  ($uploads >= 100 && ($uploads < 200 ))

 {

echo "Well done, you've unlocked your E-sharing super-hero badge. <br/>

 <img src=\"images/badges/badge_e_share_5.png\" width=\"200\" height=\"200\" alt=\"Sharing Badge\" /><br/>

 If you upload $unlock6 more resources, you can unlock your E-sharing Guru badge. <br/>

  <img src=\"images/badges/badge_e_share_6_locked.png\" width=\"200\" height=\"200\" alt=\"Sharing Badge\" /><br/> ";

 }           

 else 

 {
    echo "You've now a Guru!! <br/>

      <img src=\"images/badges/badge_e_share_6.png\" width=\"200\" height=\"200\" alt=\"Sharing Badge\" /><br/> ";

 }

     }  

 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:09:57.827

好吧，dam ..您不妨将变量名更改为

$please_inject_me、$please_inject_me1 等等...

第一课是请使用[PDO](http://php.net/manual/en/book.pdo.php)

现在到您的问题（根据我对您问题的理解）：

```
// Do your first query prepare it and then execute it, and then do a fetch and count the number of rows returned by your $query sql query
        $sql = "SELECT members.member_id, members.member_firstname, members.member_lastname, COUNT(*) FROM uploads JOIN members ON uploads.member_id = members.member_id GROUP BY uploads.member_id ";
        $query = $pdo->prepare($sql);
        $query->execute();
        $total_uploads_count = $query->fetch(PDO::FETCH_NUM);

// I guess this query you have going is counting how far the member / teacher is away from the unlock goals here we set the variable that has the num row count

        $sql2 = "SELECT members.member_id, members.member_firstname,  members.member_lastname, COUNT(*) as 'total' FROM uploads JOIN members ON uploads.member_id = members.member_id AND members.member_id = :username GROUP BY uploads.member_id";
        $query2 -> $pdo->prepare($sql2);
        $query2->bindParam(':username', $_SESSION['member_id']); // Do not forget to bind your parameters either in a array or hard code it out like I just did
        $query2->execute();

        $row = $query2->fetch();
        $upload_count = $row['total']; // Alias of COUNT(*);

Now that you PDO queries are set up now you have to create the PDO instance like so : 
You could make a file called connec.php 
```

内容如下：

```
 //We connect to the database
    $host="xxxxxx"; // Host name
    $username="xxxxxxxxx"; // Mysql username
    $password="xxxxxxx"; // Mysql password
    $db_name="xxxxxxx"; // Database name

    // Connect to server via PHP Data Object
    $pdo = new PDO("mysql:host=xxxxx;dbname=xxxxxxxx", $username, $password);
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    ?> 
```

一旦你这样做了，那么在任何具有数据库交互（查询）的页面的顶部，你就可以这样做：

require ('..................(w/e 你的路径是)/connect.php');

现在您可以使用单个变量 ($upload_count) 对查询中的所有行进行计数，请执行以下操作：

```
// get the differences in the counts
    $unlock2 = 5 - $upload_count;
    $unlock3 = 20 - $upload_count;
    $unlock4 = 50 - $upload_count;
    $unlock5 = 100 - $upload_count;
    $unlock6 = 200 - $upload_count; 
```

现在您说问题是如果返回的结果为空，或者如果结果为 0 / 无结果，则如何回显数据库内容。

然后就做`

```
 if($upload_count == 0) { // This is empty 
       .................... 
     } else { // This is not empty have fun :D
       ........... 
     } 
```

我想我回答了你的问题......如果不让我知道。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-17T01:31:30.337

我相信如果 mysql 计数返回空而不是 0

试试这个

```
 if (empty($uploads) === true) {
echo "Upload a resource to share in order to unlock your novice uploader badge!<br/>

     <img src=\"images/badges/badge_e_share_1_locked.png\" width=\"200\" height=\"200\" alt=\"Sharing Badge\" />";
} 
```

# unix - 如何提取已知位置的碱基

> ID：16049872
> 
> 赞同：1
> 
> 时间：2013-04-17T01:21:43.310
> 
> 标签：unix, position, extract, sequence

我这里有问题。

```
Seq1 [有机体=Carpodacus mexicanus] C.mexicanus 克隆
CCTTTATCTTTATCTAGGAGCATGAGCTGGCATAGTTGGAACCGCCCTCAGCCTCCTCATCCGTGCAGAA
CTTGGACAACCTGGAACTCTTCTAGGAGACGACCAAATTTACAATGTAATCGTCACTGCCCACGCCTTCG
TAATAATTTTCTTTATAGTAATACCAATCATGATCGGTGGTTTCGGAAACTGACTAGTCCCACTCATAAT
CGGCGCCCCCGACATAGCATTCCCCCGTATAAACAACATAAGCTTCTGACTACTTCCCCCATCATTTCTT
TTACTTCTAGCATCCTCCACAGTAGAAGCTGGAGCAGGAACAGGGTGAACAGTATATCCCCCTCTCGCTG
GTAACCTAGCCCATGCCGGTGCTTCAGTAGACCTAGCCATCTTCTCCCTCCACTTAGCAGGTGTTTCCTC
TATCCTAGGTGCTATTAACTTTATTACAACCGCCATCAACATAAAACCCCCAACCCTCTCCCAATACCAA
ACCCCCCTATTCGTATGATCAGTCCTTATTACCGCCGTCCTTCTCCTACTCTCTCTCCCAGTCCTCGCTG
CTGGCATTACTATACTACTAACAGACCGAAACCTAAACACTACGTTCTTTGACCCAGCTGGAGGAGGAGA
CCCAGTCCTGTACCAACACCTCTTCTGATTCTTCGGCCATCCAGAAGTCTATATCCTCATTTTAC

```

如果我有一个上述的 fasta 文件（每行 70 个碱基），并且我想确定位置为 210 的基本字符是什么（例如：第 210 个碱基：T），那么 unix 中的命令行是什么？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:48:08.133

```
$ tr -d '\n' < mexicanus.fasta | cut -b210
T 
```

*   从文件中删除所有换行符
*   打印字节 210

或者如果你想要一个范围

```
$ tr -d '\n' < mexicanus.fasta | cut -b210-220
TCGGCGCCCCC 
```

# java - 启用高复制数据存储 - Maven GWT + GAE

> ID：16049873
> 
> 赞同：1
> 
> 时间：2013-04-17T01:22:22.597
> 
> 标签：java, google-app-engine, maven, gwt

我正在尝试使高复制与我的应用程序一起工作，但出现此错误：

```
java.lang.IllegalArgumentException: transactions on multiple entity groups only allowed in High Replication applications 
```

我的 Maven 插件可能没有得到正确的配置（`jvmFlag`）：

```
 <plugin>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-maven-plugin</artifactId>
        <version>${gaeVersion}</version>
     </plugin>
     <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>gwt-maven-plugin</artifactId>
        <version>${gwtVersion}</version>
        <executions>
           <execution>
              <!-- gwt:compile happens just before package phase -->
              <phase>prepare-package</phase>
              <goals>
                 <goal>compile</goal>
              </goals>
           </execution>
        </executions>
        <configuration>
           <modules>
              <module>org.jboss.errai.ui.demo.App</module>
           </modules>
           <runTarget>index.html</runTarget>
           <appEngineVersion>${gaeVersion}</appEngineVersion>
           <!-- tell the gwt plugin that the webapp source resides in src/main/webapp -->
           <webappDirectory>${webappDirectory}</webappDirectory>
           <!-- tell the gwt plugin that dev mode should be run using the webapp that resides in target/${webappDirectory} -->
           <hostedWebapp>${webappDirectory}</hostedWebapp>
           <!-- Normally the gwt maven plugin executes dev mode using a builtin jetty server.
                This config property instructs the gwt maven plugin to execute dev mode using the 
                jetty server supplied by the appengine sdk. -->
           <server>com.google.appengine.tools.development.gwt.AppEngineLauncher</server>
           <jvmFlags>
                <jvmFlag>-Ddatastore.default_high_rep_job_policy_unapplied_job_pct=20</jvmFlag>
           </jvmFlags>
        </configuration>
     </plugin> 
```

我使用此命令运行我的应用程序，`mvn gwt:run`它工作正常，它只能在`Transaction`我收到该错误时正确访问数据存储区。我已经添加了 jvmFlag，但它似乎仍然没有运行具有高复制的数据存储。

我正在使用 GAE SDK 版本 1.7.5 BTW。

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-02T13:15:28.317

```
<plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>gwt-maven-plugin</artifactId>
                    <version>2.5.1</version>
                    <executions>
                        <execution>
                            <goals>
                                <goal>compile</goal>
                            </goals>
                        </execution>
                    </executions>
                    <configuration>
                        <server>com.google.appengine.tools.development.gwt.AppEngineLauncher</server>
                        <appEngineVersion>1.8.0</appEngineVersion>
                        <runTarget>test.html</runTarget>
                        <hostedWebapp>${webappDirectory}</hostedWebapp>
                        <extraJvmArgs>-Ddatastore.default_high_rep_job_policy_unapplied_job_pct=20</extraJvmArgs>
                    </configuration>
</plugin> 
```

我的 POM 的这一部分对我有用！我用`<extraJvmArgs>`而不是`<jvmFlag>`

# javascript - 每次更新 jquery 中的 attr 值

> ID：16049875
> 
> 赞同：0
> 
> 时间：2013-04-17T01:22:54.813
> 
> 标签：javascript, jquery

伙计们，当我向下滚动时，我正在使用插件自动加载，这是我的 jquery 代码：

```
jQuery('#displayimagesDiv').scrollExtend(
                {   

                    'target': '#displayimagesDiv',          
                    'url': $('#nexturl:last').attr('href'),
                    'loadingIndicatorEnabled' :  true,
                    'loadingIndicatorClass' : 'loading',
                    'onSuccess' :{}

                }
            ); 
```

HTML 代码：

```
<a id="nexturl" href="{{URL::current()}}?page={{$images->page+1}}" style="display:none">#</a> 
```

问题是当我第一次滚动时它不会更新 #nexturl:last 选择器值的值所以我每次都得到旧的 url (example.com/?page=1) 而不是 (example.com/?页= 2）。任何帮助请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:31:06.890

尝试用函数替换 'url' 参数：

```
jQuery('#displayimagesDiv').scrollExtend(
    {   

        'target': '#displayimagesDiv',          
        'url': function() { return $('#nexturl:last').attr('href'); },
        'loadingIndicatorEnabled' :  true,
        'loadingIndicatorClass' : 'loading',
        'onSuccess' :{}

    }
); 
```

# python-2.7 - 有效地管理内存和 python 处理

> ID：16049878
> 
> 赞同：2
> 
> 时间：2013-04-17T01:23:04.400
> 
> 标签：python-2.7, numpy

我需要读取一个 2.5gb 大的文件。我使用以下语法：

```
import numpy as np
limit=4269*352*288*3
mat1=np.zeros(limit, dtype='uint8')
mat1=np.fromfile("path/to/file", "uint8", limit) 
```

我现在需要重塑这个数组：

```
mat_new=np.zeros([4269, 288, 352, 3], dtype='uint8')
mat_new=np.transpose(np.reshape(mat1,[4269,3,288,352]), [0,2,3,1]) 
```

这在我的 4gb ram i7 第二代系统上大约需要 35 秒。任何方式我都可以让它更快。因为这只是我的计划的开始，还有更复杂的事情要发生。以后我不需要`mat1`了！

此外，由于 Python 给了我“达到最大内存”错误，所以我只读取了一半的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:05:38.460

> 读取1.25GB数据大约需要18秒

它大约是 70MB/s，即速度可能受到磁盘 I/O 性能的限制。

如果您不需要整个文件；你可以使用[`numpy.memmap`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.memmap.html)：

```
mat = np.memmap("path/to/file", shape=(4269,288,352,3)) 
```

为避免内存错误，请使用就地操作，例如：

```
mat_new = mat1.transpose(0,2,3,1) # no data copying 
```

同样正如[@HYRY 所说](https://stackoverflow.com/questions/16049878/effeciently-manage-memory-and-python-processing#comment22902573_16049878)，删除不必要`np.zeros()`的 .

# c++ - 如何重载 static 和 dynamic_pointer_cast

> ID：16049881
> 
> 赞同：1
> 
> 时间：2013-04-17T01:23:26.473
> 
> 标签：c++, pointers, c++11, g++, smart-pointers

我有一个像下面这样的智能指针类：

```
template <class T>
class Sptr {
    template<typename U> friend class Sptr;

    template <typename T1, typename T2>
    friend bool operator==(const Sptr<T1> &a, const Sptr<T2> &b);
private:
    T* obj;//pointer to current obj
    RC* ref; //reference counter
    std::function<void()> destroyData;
    bool ok_;

public:
    Sptr();
    ~Sptr();

    template <typename U> 
    Sptr(U *);

    Sptr(const Sptr &);

    template <typename U> 
    Sptr(const Sptr<U> &);

    template <typename U> 
    Sptr<T> &operator=(const Sptr<U> &);

    Sptr<T> &operator=(const Sptr<T> &);

    void reset();

    T* operator->() const
    {return obj;};

    T& operator*() const
    {return *obj;};

    T* get() const
    {return obj;};

    explicit operator bool() const {
          return ok_;
    }

}; 
```

到目前为止一切正常，我想为 and 编写`static_pointer_cast`函数`dynamic_pointer_cast`。我不知道如何继续前进。谁能指导我正确的方向。下面是一个示例测试代码，我打算通过它来测试它。（c++11 还可以）

```
// Test static_pointer_cast.
{
    Sptr<Derived> sp(new Derived);
    Sptr<Base1> sp2(sp);

    Sptr<Derived> sp3(static_pointer_cast<Derived>(sp2));
}

// Test dynamic_pointer_cast.
{
    Sptr<Derived_polymorphic> sp(new Derived_polymorphic);
    Sptr<Base_polymorphic> sp2(sp);

    Sptr<Derived_polymorphic> sp3(dynamic_pointer_cast<Derived_polymorphic>(sp2));
    Sptr<Derived_polymorphic> sp4(static_pointer_cast<Derived_polymorphic>(sp2));
    Sptr<Derived2_polymorphic> sp5(dynamic_pointer_cast<Derived2_polymorphic>(sp2));
    assert(!sp5);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:41:11.620

两种强制转换都是模板（可能是朋友），它们创建一个`Sptr`不同类型的新模板，通过对底层指针的强制转换初始化并根据需要增加引用计数。主要的复杂性是您需要多个不同类型的指针指向同一个完整对象，并且当最后一个（无论它是哪种类型）超出范围时，您需要使用正确的指针管理调用删除器。

一种可能的方法是将删除器和原始指针存储在引用计数对象中（顺便说一句，删除器应该一直存在，您只需要一个副本！）。每个 Sptr 都保存一个不同类型的原始指针，但当它消失时，它使用存储在引用计数中的指针和删除器。

# php - 在 firebug 或 chrome 开发人员中更改客户端的 javascript 变量

> ID：16049882
> 
> 赞同：0
> 
> 时间：2013-04-17T01:23:27.823
> 
> 标签：php, javascript, knockout.js, firebug, google-chrome-devtools

我正在尝试验证我编写的一些代码是否安全，并且我想确保我为防止“黑客攻击”（更改 JS 变量）而采取的步骤是否有效。我听说从客户端更改 javascript 变量是可能的，但我从来没有学会如何去做。

我正在使用 knockout.js 表。可以从我的数据库中添加项目。当用户提交表单时，我将数据发送到 PHP 页面，该页面然后检查所有输入以确保它们是有效的并且与存储在我的数据库中的常量相比没有变化。如果它们没有被更改，则将数据提交到数据库中。

我只是想自己尝试一下。如何使用 chrome developer 或 firefox 尝试更改 javascript 变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T01:27:52.713

使用 F12 打开开发者工具。单击控制台选项卡。从那里您可以访问全局（窗口）范围内的所有内容。Chrome 将为您提供代码完成功能，以便您可以探索对象。只需键入 JS 代码，您就可以设置范围内任何内容的属性值和调用方法。

例如，在此页面上打开控制台并键入`StackExchange.`，Chrome 将向您显示该 JS 对象及其所有属性和方法。

基本上要破解你的应用程序，有人会观察你的应用程序发送到服务器的 HTTP 请求，然后用他们自己的值重建它们。他们可能可以使用 JS 控制台来做到这一点，或者他们可以使用 curl 或 Fiddler 等其他工具。

# perl - Wantarray等效？

> ID：16049886
> 
> 赞同：4
> 
> 时间：2013-04-17T01:23:58.400
> 
> 标签：perl, powershell

在 Perl 中（我多么想念它），我可以检测函数的调用上下文，特别是判断函数的返回值是被丢弃（空上下文）还是分配给标量或列表变量。

这允许一些非常优雅的表达。Powershell中是否有等价物（我还没有找到）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T21:25:59.890

您可以使用 $host.runspace.runningpipelines（或 $host.runspace.GetCurrentlyRunningPipeline()）来访问“本地管道”。本地管道有一个“命令”成员。此数组中的每个条目，类型为 Management.Automation.Runspaces.Command，代表一个命令/脚本，它是正在运行的管道的一部分。Runspaces.Command 有一个成员 CommandText，其中包含正在运行的管道的全文（而 $myinvocation 仅具有当前行）。您可以解析 CommandText 以获取诸如 out-null、[void] cast 和分配给 $null 之类的内容。请注意，powershell 解析器记录在一些博客中，可用于帮助解析。

runningpipelines 和 GetCurrentlyRunningPipeline() 都是 RunSpace 的私有成员，因此您需要通过反射访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T23:30:03.390

通常，PowerShell 倾向于显式偏好而不是隐式的、上下文相关的行为。例如：

*   详细输出默认隐藏，但可以使用[`-Verbose`](http://go.microsoft.com/fwlink/?LinkID=113216)参数或[`$VerbosePreference`](http://go.microsoft.com/fwlink/?LinkID=113248)变量进行配置。
*   未使用的输出由主机以默认的基于类型的格式显示，但可以配置为显示具有显式`Format-___`调用的特定成员。
*   [`Rename-Item`](http://go.microsoft.com/fwlink/?LinkID=113382)默认情况下不返回更新的文件，但您可以使用该`-PassThru`参数将它们输出到管道。
*   将命令的输出保存到变量（例如`$x = Get-ChildItem`）中，如果没有返回项目，则默认为 null，如果仅返回一个项目，则默认为该项目，如果返回多个项目，则默认为数组；但这可以通过显式请求一个数组来覆盖`$x = @(Get-ChildItem)`。

您可以争辩说，`$renamedItems = Rename-Item ...`或者`Rename-Item ... | Out-Default`有时与`$renamedItems = Rename-Item ... -PassThru`. 然而，很难解释为什么项目`$renamedItems`在第一次调用中神奇地出现，`Rename-Item`而它本身什么也没产生。（或者更糟的是，如果碰巧根据分配给的最后一个值是标量还是可枚举值，`$variable = Some-Command`在一项或多项之间更改其输出。）`$variable`

* * *

[`$MyInvocation`](http://go.microsoft.com/fwlink/?LinkID=113212)话虽如此，您可以从自动变量中收集大量信息。例如，您可以检查[`PipelinePosition`](http://msdn.microsoft.com/en-us/library/system.management.automation.invocationinfo.pipelineposition.aspx)and[`PipelineLength`](http://msdn.microsoft.com/en-us/library/system.management.automation.invocationinfo.pipelinelength.aspx)属性来确定调用是否是较大管道的一部分，或者使用[`Line`](http://msdn.microsoft.com/en-us/library/system.management.automation.invocationinfo.line.aspx)and[`OffsetInLine`](http://msdn.microsoft.com/en-us/library/system.management.automation.invocationinfo.offsetinline.aspx)属性（可能带有一些[解析逻辑](http://msdn.microsoft.com/en-us/library/system.management.automation.psparser.aspx)）来确定调用输出是否存在分配或强制转换。

用户是否会发现结果一致且可预测是另一回事:)

# recursion - 方案：反向没有任何影响

> ID：16049887
> 
> 赞同：1
> 
> 时间：2013-04-17T01:24:09.297
> 
> 标签：recursion, scheme, reverse, let

```
(define key
  (lambda (w)
    (reverse w)
    (if (null? w)
     0
    (let ((k 33))
         (+ (* (ctv(car w)) k) (key (cdr w)))
)))) 
```

输出与此相同的内容：

```
(define key
  (lambda (w)
    (if (null? w)
     0
    (let ((k 33))
         (+ (* (ctv(car w)) k) (key (cdr w)))
)))) 
```

为什么我的单词没有反转然后计算？

输入：（键'（xyz））

输出：2475（两种方法）

我不明白为什么会这样。有人请帮我看看为什么会这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T01:58:49.577

正如已经指出的那样，该[`reverse`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Flist..rkt%29._reverse%29%29)过程返回一个*新*列表，它不会就地修改作为参数传递的列表（这发生在所有修改列表的过程中，小心它）。这就是`(reverse w)`代码中的行没有任何效果的原因：它肯定会返回一个新的反向列表，但您忽略了返回的值！

要使用反向列表，您必须将其存储或传递到某个地方，一个好主意是将其保存在`let`表单内定义的局部变量中，并从那时起引用该变量。这就是@michaelb958 的建议：

```
(define key
  (lambda (w)
    (let ((w (reverse w)))
      (if (null? w)
          0
          (let ((k 33))
            (+ (* (ctv (car w)) k) (key (cdr w)))))))) 
```

*但是，请注意，每次*在遍历列表时调用递归时，上述内容都会反转`w`列表，我认为这不是您想要的！如果您只需要反转列表*一次*，请在调用*之前*调用，并且不要*在内部*调用：**`reverse` *`key``reverse` *`key`****

 ***```
(key (reverse '(x y z))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T01:26:15.240

`reverse`只返回反转的列表，而不是将其反转到位。你需要

```
(let ((w (reverse w)))
  ...) 
```

得到你想要的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T02:20:31.130

由于，正如其他人所指出的那样，`reverse`不会原地反转，因此您的代码应修改为：

```
(define key
  (lambda (w)
    (set! w (reverse w))                ; CHANGE IS HERE
    (if (null? w)
         0
         (let ((k 33))
           (+ (* (ctv (car w)) k)
              (key (cdr w))))))) 
```

请注意，您正在递归调用`key`，因此您将一次又一次地来回反转。***

# java - java - 用于扩展另一个类的类的最终受保护静态类

> ID：16049888
> 
> 赞同：0
> 
> 时间：2013-04-17T01:24:13.153
> 
> 标签：java, android, oop

我有一个记录类。在这个 Record 类中，我有一个将数据保存到数据库的 save() 方法。我有几个其他类扩展了这个 Record 类，例如 Person 类。在我的 Person 类中，我想为 People 数据库表定义数据库表名和列。我想让这些最终的静态属性成为 Person 的所有实例都引用的。我如何让扩展类 Record 知道该属性将存在于所有扩展类中？如何为基类知道存在的类定义静态属性？

这是对接口的适当使用吗？

```
public class Record {
    protected String table_name;
    protected String[] table_columns;

    private void save(){
        //save data based on table_name and table_columns;
    }
}

public class Person extends Record{
    protected final static String table_name = "People";
    protected final static String[] table_columns = {"_id","name"}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T01:43:33.473

我认为实现您的要求的一个好方法是做这样的事情：（我认为 Record 应该是抽象的）

```
public abstract class Record {
    protected abstract String getTableName();
    protected abstract String[] getTableColumns();

    private void save(){
        String table_name = getTableName();
        String[] table_columns = getTableColumns();
        //save data based on table_name and table_columns;
    }
}

public class Person extends Record{
    protected final static String table_name = "People";
    protected final static String[] table_columns = {"_id","name"}

    protected String getTableName(){
         return table_name;
    }

    protected String[] getTableColumns(){
        return table_columns;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T01:37:10.727

为什么需要`static final`？

如果您进行`Record`抽象并将表名和表列更改为抽象方法，您将需要在子类中实现它们（并`Record`确保它们的存在）。

我不确定为什么实例`Person`需要访问此信息，但如果有必要，它仍然是可能的。

```
public abstract class Record {
  protected abstract String getTableName();
  protected abstract String[] getTableColumns();

  private void save(){
    //save data based on getTableName() and getTableColumns();
  }
}

public class Person extends Record {
  protected String getTableName() {
    return "People";
  }
  protected String[] getTableColumns() {
    return new String[] { "_id", "name" };
  }
} 
```

# google-glass - 谷歌镜像 API 视频

> ID：16049889
> 
> 赞同：6
> 
> 时间：2013-04-17T01:24:15.140
> 
> 标签：google-glass, google-mirror-api

google glass mirror API 上的视频路线图是什么？[API 是否允许像玻璃演示视频http://www.youtube.com/watch?v=v1uyQZNg2vE](http://www.youtube.com/watch?v=v1uyQZNg2vE)中所示的那样向设备传输视频或从设备传输视频？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T01:43:07.480

Mirror API 没有发布的路线图。我们开发者预览版的部分动机是为了弄清楚这一点。

首先，澄清一下，该视频中显示的流媒体是 Google+ 环聊。这是 Glass 内置的一项功能。

**更新**：Glass 现在支持视频流。[你可以在这里](https://developers.google.com/glass/timeline#attaching_video)找到完整的文档。

要添加视频流，请使用视频的 URL 作为部分之一进行多部分 POST，如下所示：

```
POST /upload/mirror/v1/timeline HTTP/1.1
Host: www.googleapis.com
Authorization: Bearer {auth token}
Content-Type: multipart/related; boundary="mymultipartboundary"
Content-Length: {length}

--mymultipartboundary
Content-Type: application/json; charset=UTF-8

{ "text": "Skateboarding kittens" }
--mymultipartboundary
Content-Type: video/vnd.google-glass.stream-url

http://example.com/path/to/kittens.mp4
--mymultipartboundary-- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T03:54:45.257

Youtube 视频流是可能的。我已经在 C#.net 中使用“YoutubeExtractor”命名空间完成了它。从您的管视频中解析视频（.mp4）网址并将其流式传输。这是代码。它对我来说很好。复制网址时，点击分享后获取可用的油管链接

```
private static String youtubevideoStream(MainController controller)
    {

        string link = "http://youtu.be/9uYKISlL7Vg";
        IEnumerable<VideoInfo> videoInfos = DownloadUrlResolver.GetDownloadUrls(link);
        VideoInfo video = videoInfos.First(info => info.VideoType == VideoType.Mp4 && info.Resolution == 360);
        String vLink = video.DownloadUrl;

        TimelineItem videocard= new TimelineItem()
        {

            Text = "Menu Card",
            BundleId = "666",
            Notification = new NotificationConfig() { Level = "DEFAULT" },
            MenuItems = new List<MenuItem>()
                                     {
                                         new MenuItem() {Action = "DELETE"},
                                     }

        };

        String mediaLink = vLink;

        if (!String.IsNullOrEmpty(mediaLink))
        {
            Stream stream = null;
            if (mediaLink.StartsWith("/"))
            {
                stream = new StreamReader(controller.Server.MapPath(mediaLink)).BaseStream;
            }
            else
            {
                HttpWebRequest request = WebRequest.Create(mediaLink) as HttpWebRequest;

                request.UseDefaultCredentials = false;

                HttpWebResponse response = request.GetResponse() as HttpWebResponse;

                byte[] b = null;
                using (Stream streamFromWeb = response.GetResponseStream())
                using (MemoryStream ms = new MemoryStream())
                {
                    int count = 0;
                    do
                    {
                        byte[] buf = new byte[1024];
                        count = streamFromWeb.Read(buf, 0, 1024);
                        ms.Write(buf, 0, count);
                    } while (streamFromWeb.CanRead && count > 0);
                    b = ms.ToArray();

                    stream = new MemoryStream(b);
                }
            }
            controller.Service.Timeline.Insert(videocard, stream, "video/mp4").Upload();
        }
        else
        {
            controller.Service.Timeline.Insert(videocard).Fetch();
        } 
```

# powershell-2.0 - PowerShell 导入 Pfx 和私钥“丢失”

> ID：16049890
> 
> 赞同：6
> 
> 时间：2013-04-17T01:24:18.173
> 
> 标签：powershell-2.0, x509certificate

我使用以下 PowerShell 函数将 PFX 导入到我的 Windows 2008 R2 服务器的证书存储中

```
function Import-PfxCertificate ([String]$certPath,[String]$certificateStoreLocation = "CurrentUser",[String]$certificateStoreName = "My",$pfxPassword = $null)
{
    $pfx = new-object System.Security.Cryptography.X509Certificates.X509Certificate2    

    $pfx.Import($certPath, $pfxPassword, "Exportable,PersistKeySet")    

    $store = new-object System.Security.Cryptography.X509Certificates.X509Store($certificateStoreName,$certificateStoreLocation)    
    $store.open("MaxAllowed")    
    $store.add($pfx)    
    $store.close()
    return $pfx
} 
```

该函数的调用者看起来像`$importedPfxCert = Import-PfxCertificate $pfxFile "LocalMachine" "My" $password`我将它安装到本地机器的我的商店。然后我授予了我的 IIS 应用程序池的读取权限。

我有一个需要使用它的 WCF 服务

```
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceCredentials>
        <serviceCertificate findValue="MyCertName" x509FindType="FindBySubjectName" />
        <userNameAuthentication userNamePasswordValidationMode="Custom"
          customUserNamePasswordValidatorType="MyValidator" />
      </serviceCredentials>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

当我使用客户端调用服务时，我从 WCF 收到异常`It is likely that certificate 'CN=MyCertName' may not have a private key that is capable of key exchange or the process may not have access rights for the private key.`

如果我将其从 MMC 中删除，并从证书 MMC 手动导入相同的 PFX 文件到相同的存储并授予相同的权限，我的客户可以毫无问题地调用该服务。

所以它让我想到，出于某种原因，如果我使用 PowerShell，那么私钥就会以某种方式被搞砸。

有趣的是，无论哪种方式，我都会去 MMC 并双击我可以看到的已安装证书，`You have a private key that corresponds to the certificate.`所以看起来即使在 PowerShell 中也加载了私钥。权限设置相同。

有什么线索或经验吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-23T10:59:14.310

有同样的问题。下一个脚本工作：

```
function InstallCert ($certPath, [System.Security.Cryptography.X509Certificates.StoreName] $storeName)
{
    [Reflection.Assembly]::Load("System.Security, Version=2.0.0.0, Culture=Neutral, PublicKeyToken=b03f5f7f11d50a3a")

    $flags = [System.Security.Cryptography.X509Certificates.X509KeyStorageFlags]::MachineKeySet -bor [System.Security.Cryptography.X509Certificates.X509KeyStorageFlags]::PersistKeySet

    $cert = New-Object System.Security.Cryptography.X509Certificates.X509Certificate2($certPath, "", $flags)

    $store = New-Object System.Security.Cryptography.X509Certificates.X509Store($storeName, [System.Security.Cryptography.X509Certificates.StoreLocation]::LocalMachine)

    $store.Open([System.Security.Cryptography.X509Certificates.OpenFlags]::ReadWrite);

    $store.Add($cert);

    $store.Close();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-14T00:40:06.630

我更新了谢尔盖对以下内容的回答。请注意，该`using namespace ...`语法仅对 PS 5.0 及更高版本有效。如果您在早期版本中需要此功能，则必须根据`System.Security.Cryptography.X509Certificates`需要添加完整的命名空间 .

```
using namespace System.Security

[CmdletBinding()]
param (
    [parameter(mandatory=$true)] [string] $CertificateFile,
    [parameter(mandatory=$true)] [securestring] $PrivateKeyPassword,
    [parameter(mandatory=$true)] [string] $AllowedUsername
)

# Setup certificate
$Flags = [Cryptography.X509Certificates.X509KeyStorageFlags]::MachineKeySet `
    -bor [Cryptography.X509Certificates.X509KeyStorageFlags]::PersistKeySet `
    -bor [Cryptography.X509Certificates.X509KeyStorageFlags]::Exportable
$Certificate = New-Object Cryptography.X509Certificates.X509Certificate2($CertificateFile, $PrivateKeyPassword, $Flags)

# Install certificate into machine store
$Store = New-Object Cryptography.X509Certificates.X509Store(
    [Cryptography.X509Certificates.StoreName]::My, 
    [Cryptography.X509Certificates.StoreLocation]::LocalMachine)
$Store.Open([Cryptography.X509Certificates.OpenFlags]::ReadWrite)
$Store.Add($Certificate)
$Store.Close()

# Allow read permission of private key by user
$PKFile = Get-ChildItem "$env:ProgramData\Microsoft\Crypto\RSA\MachineKeys\$($Certificate.PrivateKey.CspKeyContainerInfo.UniqueKeyContainerName)"
$PKAcl = $PKFile.GetAccessControl("Access")
$ReadAccessRule = New-Object AccessControl.FileSystemAccessRule(
    $AllowedUsername,
    [AccessControl.FileSystemRights]::Read,
    [AccessControl.AccessControlType]::Allow
)
$PKAcl.AddAccessRule($ReadAccessRule)
Set-Acl $PKFile.FullName $PKAcl 
```

将此脚本保存到`InstallCertificate.ps1`，然后以管理员身份运行：

```
PS C:\Users\me> .\InstallCertificate.ps1

cmdlet InstallCertificate.ps1 at command pipeline position 1
Supply values for the following parameters:
CertificateFile: c:\my\path\mycert.pfx
PrivateKeyPassword: *********************
AllowedUsername: me
PS C:\Users\me> ls Cert:\LocalMachine\My
<Observe that your cert is now listed here.  Get the thumbprint>
PS C:\Users\me> (ls Cert:\LocalMachine\My | ? { $_.Thumbprint -eq $Thumbprint }).PrivateKey 
```

重新启动后，最后一行应显示即使以非管理员身份仍安装了私钥。

**编辑**以添加 ACL 步骤，如[https://stackoverflow.com/a/37402173/7864889](https://stackoverflow.com/a/37402173/7864889)中所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-01T22:39:16.340

通过 MMC 导入证书时，我在我们的一个开发服务器上遇到了类似的问题。我的问题是管理员组对 MachineKeys 文件夹没有任何权限。

C:\Users\All Users\Microsoft\Crypto\RSA\MachineKeys

我向管理员添加了对 MachineKeys 文件夹的完全控制权，它能够在导入证书时成功创建私钥。

确保运行 Powershell 的用户有权写入 MachineKeys 文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-04T23:33:15.617

下面由 Sergey Azarkevich 引用的以下代码对我有用：

```
$flags = [System.Security.Cryptography.X509Certificates.X509KeyStorageFlags]::MachineKeySet -bor [System.Security.Cryptography.X509Certificates.X509KeyStorageFlags]::PersistKeySet 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-02T08:03:00.020

我登陆了这个 SO 线程，因为内置的`Import-PfxCertificate`没有正确导入 CAPI 证书。不幸`powerdude`的是，答案 cmdlet 对我不起作用，因为它`The property 'CspKeyContainerInfo' cannot be found on this object. Verify that the property exists.`在设置权限时抛出。

[将它与milesgratz](https://gist.github.com/milesgratz/38804dfc336df64191f958004953e9b6)的这个精彩要点结合起来后，它起作用了。

这是看起来像`Import-PfxCertificate`替代品的最终修改版本。

```
# Import-CapiPfxCertificate.ps1
# for CNG certificates use built in Import-PfxCertificate

using namespace System.Security

[CmdletBinding()]
param (
    [parameter(mandatory=$true)] [string] $FilePath,
    [parameter(mandatory=$true)] [securestring] $Password,
    [parameter(mandatory=$true)] [string] $CertStoreLocation,
    [parameter(mandatory=$false)] [string] $AllowedUsername
)

if (-not ($CertStoreLocation -match '^Cert:\\([A-Z]+)\\([A-Z]+)$')) {
    Write-Host "Incorrect CertStoreLocation. See usage in the Import-PfxCertificate documentation" -ForegroundColor Red
    exit 1;
}

$StoreName = $Matches.2
$StoreLocation = $Matches.1

# Setup certificate
$Flags = [Cryptography.X509Certificates.X509KeyStorageFlags]::MachineKeySet `
    -bor [Cryptography.X509Certificates.X509KeyStorageFlags]::PersistKeySet `
    -bor [Cryptography.X509Certificates.X509KeyStorageFlags]::Exportable
$Certificate = New-Object Cryptography.X509Certificates.X509Certificate2($FilePath, $Password, $Flags)

# Install certificate into the specified store
$Store = New-Object Cryptography.X509Certificates.X509Store(
    $StoreName, 
    $StoreLocation)
$Store.Open([Cryptography.X509Certificates.OpenFlags]::ReadWrite)
$Store.Add($Certificate)
$Store.Close()

if (-not ([string]::IsNullOrEmpty($AllowedUsername))) {
    # Allow read permission of private key by user
    $PKUniqueName = ([System.Security.Cryptography.X509Certificates.RSACertificateExtensions]::GetRSAPrivateKey($Certificate)).key.UniqueName
    $PKFile = Get-Item "$env:ProgramData\Microsoft\Crypto\RSA\MachineKeys\$PKUniqueName"
    $PKAcl = Get-Acl $PKFile
    $PKAcl.AddAccessRule((New-Object AccessControl.FileSystemAccessRule($AllowedUsername, "Read", "Allow")))
    Set-Acl $PKFile.FullName $PKAcl
} 
```

# c++ - 加工和管道

> ID：16049899
> 
> 赞同：0
> 
> 时间：2013-04-17T01:25:04.730
> 
> 标签：c++, process, pipe

前提：实现一个 C++ 程序，提示用户输入 2 个命令。每个输入字符串应该是一个 UNIX 命令，允许使用参数。例如，输入 1 可以是“ls -l”，输入 2 可以是“wc -l”。然后程序将创建一个管道和两个子进程。第一个子进程将运行第一个输入中指定的命令。它将输出到管道而不是标准输出。第二个子进程将运行第二个输入中指定的命令。它将从管道而不是标准输入中获取其输入。父进程将等待其两个子进程完成，然后整个过程将重复。当第一个命令输入“quit”时，执行将停止。

我相信我几乎完成了这个程序，但是我在弄清楚如何让用户输入在管道中执行时遇到了麻烦，我最终遇到了语法错误。

到目前为止，这是我的代码：

```
#include <iostream>
#include <cstdio>
#include <cstdlib>
#include <unistd.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <cstring>
using namespace std;

int main() {
    //Declare Variables
    char first, second[80];
    int rs, pipefd[2];
    int pid1, pid2;
    char *command1[80], *command2[80];

    //Asking for the commands
    cout << "Please enter your first command(incl. args) or quit: ";
    cin >> first;

    //Do the program while the first answer isn't quit
    while(first[0] != 'quit') {

    //Copy first answer into first command
    strcpy(command1, ((char*)first);

    //Just skip to end of program if first command is quit
    cout << "Please enter your second command(incl. args): ";
    cin >> second;

    //Copy second answer into second command
    strcpy(command2, ((char*)first);

    //pipe
    rs = pipe(pipefd);
    //if pipe fails to be made
    if(rs == -1){
        perror("Fail to create a pipe");
        exit(EXIT_FAILURE);
    }

    //Fork for the two processes
    pid1 = fork();

    if (pid1 != 0){
    pid2 = fork();
}

    if(pid1 == -1){
        perror("Fail to create a pipe");
        exit(EXIT_FAILURE);
    }
        if(pid2 == -1){
        perror("Fail to create a pipe");
        exit(EXIT_FAILURE);
    }

        if (pid1 == 0) { // 1st child process   
        // close write end of pipe
        close(pipefd[0]);
        // duplicate
        dup2(pipefd[1], 1);
        //execute the input argument
        execvp(command1[0], command1);
    } 
                if (pid1 == 0) { // 2st child process   
        // close write end of pipe
        close(pipefd[0]);
        // duplicate
        dup2(pipefd[1], 1);
        //execute the input argument
        execvp(command2[0], command2);
    }

        else {  // parent process   
        // close read end of pipe
        close(pipefd[0]);
        // wait for child processes
        wait(&pid1);
        wait(&pid2);    
    }

    //Asking for the commands
    cout << "Please enter your first command(incl. args) or quit: ";
    cin >> first;

    }; //end of while()

return 0;
} 
```

任何帮助/提示将不胜感激，因为这将在不久的将来到期，我很想最终解决这个问题。

编辑：*添加得到的错误*

```
In function int main()':
z1674058.cxx:26:33: error: expected ')' before ';' token
z1674058.cxx:33:33: error: expected ')' before ';' token 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T01:33:25.413

```
// close write end of pipe
close(pipefd[0]);
// duplicate
dup2(pipefd[1], 1); 
```

您在孩子 #1 和孩子 #2 中都有这两行。两个孩子在这里应该做相反的操作。其中之一应该关闭`pipefd[1]`并复制`pipefd[0]`到标准输入。

您还有一些字符串处理错误。

```
char first, second[80]; 
```

这没有声明两个 80 字符的数组。它声明了 one`char`和 one `char[80]`。我怀疑这就是为什么您在`(char *)`此处添加演员表的原因-以消除编译器错误：

```
strcpy(command1, ((char*)first); 
```

不要那样做。不要使用强制转换来关闭编译器。演员正在掩盖一个严重的错误。

```
char *command1[80], *command2[80]; 
```

这些声明也是不正确的。这声明了两个每个 80 `char *`s 的数组。即两个数组，每个数组包含 80 个字符串。我会留给你来弄清楚如何解决这个问题......

# c++ - c ++ cli try块不允许文件流打开大文件

> ID：16049903
> 
> 赞同：0
> 
> 时间：2013-04-17T01:25:15.017
> 
> 标签：c++, windows, visual-c++, c++-cli, portable-executable

我正在使用 c++ cli。我正在尝试扫描文件以查看它们是否已由 pe 打包程序打包。

这是问题所在

如果我将我的代码不在 try 块中，它将扫描任何 20mb 或更大的文件，但问题是如果文件是系统文件（如 ntuser.dat），它会给我一个错误，无法访问该文件。这很好，因为我不需要像那样扫描文件，所以我将代码放在 try 块中以消除该错误。现在的问题是，当它到达那个 20mb 的文件时，它会跳过它而不是扫描它。我不知道为什么 try 块让它跳过大文件。它不会跳过文件的唯一方法是如果大文件是要扫描的第一个文件，但这没用，因为它将扫描多个大文件。

这是代码

```
try
{
    FileStream^ fs2 = gcnew FileStream(line, FileMode::Open, FileAccess::Read, FileShare::ReadWrite);

    BinaryReader^ br = gcnew BinaryReader(fs2);

    array<Byte>^writeArray = br->ReadBytes(br->BaseStream->Length);

    fs2->Close();

    String^ datafile = BitConverter::ToString(writeArray);
    datafile = datafile->Replace("-","");

    if (datafile->Contains("55505830")) {
        listBox1->Items->Add(line);
    }   
}
catch (...)
{

} 
```

我没有将循环部分放在它从文本文件中读取下一个文件的位置，因为那部分很好。

那么如何让它扫描大文件并忽略系统文件。

我是否需要更改捕获异常。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T04:50:09.960

如果您当前的代码失败，那么了解引发了哪些异常是必不可少的。在你做任何其他事情之前，在你的 catch 块中放一个 Debug::WriteLine 看看你得到了什么异常！

但是，您列出的方法几乎可以保证在大文件上给您带来问题。您正在将整个文件内容读入内存，然后将字节数组转换为 Unicode 字符串，导致 6 倍扩展，然后从字符串中删除破折号，导致总内存使用量为原始文件大小的 10 倍。

相反，读取字节并在读取时检查它们。也许是这样的：

```
array<Byte>^ target = { 0x55, 0x50, 0x58, 0x30 };

try
{
    int matched = 0;
    FileStream^ fs2 = gcnew FileStream(line, FileMode::Open, FileAccess::Read, FileShare::ReadWrite)

    int value;
    do
    {
        value = fs2->ReadByte();
        if(value == target[matched])
            matched++;
        else
            matched = 0;

        if(matched == target->Length)
        {
            listBox1->Items->Add(line);
            break;
        }
    } while (value != -1);

    fs2->Close();
}
catch(Exception^ e)
{
    Debug::WriteLine("Skipping file: " + line + " due to " + e->Message);
} 
```

您仍然会在尝试打开操作系统文件时遇到异常，但至少您会知道异常是什么，并且您将能够毫无问题地处理大文件。

# android - Android NFC：应用程序已启动，但操作并非意图

> ID：16049907
> 
> 赞同：0
> 
> 时间：2013-04-17T01:25:34.330
> 
> 标签：android, nfc

我正在尝试通过 NFC 处理为特定域打开的 URI。

清单有：

```
<activity android:name="HistoryActivity"
        android:theme="@android:style/Theme.Light.NoTitleBar"
        android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:scheme="https"
                android:host="mydomain.me"
                android:pathPrefix="/x" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:scheme="http"
                android:host="mydomain.me"
                android:pathPrefix="/x" />
        </intent-filter>
    </activity> 
```

onResume 和 onNewIntent 看起来像：

```
@Override
protected void onResume() {
    super.onResume();
    Intent intent = new Intent(this, this.getClass());
    //intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);

    this.handleNfcBeam(intent);
}

@Override
protected void onNewIntent(Intent intent) 
{
    setIntent(intent);

    this.handleNfcBeam(intent);
} 
```

和 handleNfcBeam 看起来像：

```
protected boolean handleNfcBeam(Intent intent)
{
    String action = intent.getAction();

    if (action != null &&
            action.equalsIgnoreCase("android.nfc.action.NDEF_DISCOVERED"))
    {

        return true; // todo: process URL
    }

    return false;
} 
```

当我发送正确的 URL 时，应用程序正在启动。但是，动作总是无效的！

我还没有达到可以实际处理消息的地步......

我究竟做错了什么？

谢谢，丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:02:36.817

您可以在 的两行中的每一行上放置一个断点，`this.handleNfcBeam(intent);`以查看您的意图来自哪条路线。然后检查意图数据以查看您收到的意图类型。

您的标签是否包含具有正确内容的 NDEF 消息，与您在清单中的定义相匹配？当您定义 scheme、host 和 pathPrefix 时，必须满足这三个条件才能触发 Intent。

# css - Css 导航菜单悬停

> ID：16049908
> 
> 赞同：0
> 
> 时间：2013-04-17T01:25:42.200
> 
> 标签：css, colors, hover

所以我使用css创建了一个导航菜单，我只有一个问题，当我将鼠标悬停在子菜单上时，我希望顶部菜单将字体颜色更改为白色，以便人们知道他们正在查看哪个子菜单。 ..

```
<li style="width:150px" id="lovedating"><a href="#">Love & Dating</a>
<div id="love&dating" class="belownav">
<div class="ontop">Love & Dating</div>
<div class="navitem"><ul id="navitemul">
<li class="marright"><a href="http://www.curious-howto.com/love-dating/broken-hearths/"><img class="fl" src="http://www.curious-howto.com/images/2013/04/Broken-Hearths.jpg" width="63" height="40" /><span class="marleft">Broken Hearths</span></a></li>
<li class="marright"><a href="http://www.curious-howto.com/love-dating/dating/"><img class="fl" src="http://www.curious-howto.com/images/2013/04/Dating.jpg" width="63" height="40" /><span class="marleft">Dating</span></a></li>
<li class="marright"><a href="http://www.curious-howto.com/love-dating/dating-humor/"><img class="fl" src="http://www.curious-howto.com/images/2013/04/Dating-Humor.jpg" width="63" height="40" /><span class="marleft">General Health</span></a></li>
<li class="marright"><a href="http://www.curious-howto.com/love-dating/flirting/"><img class="fl" src="http://www.curious-howto.com/images/2013/04/Flirting.jpg" width="63" height="40" /><span class="marleft">Flirting</span></a></li>
<li class="marright"><a href="http://www.curious-howto.com/love-dating/kissing/"><img class="fl" src="http://www.curious-howto.com/images/2013/04/Kissing.jpg" width="63" height="40" /><span class="marleft">Kissing</span></a></li>
<li class="marright"><a href="http://www.curious-howto.com/love-dating/physical-relationships/"><img class="fl" src="http://www.curious-howto.com/images/2013/04/Physical-Relationships.jpg" width="63" height="40" /><span class="marleft">Physical Relationships</span></a></li>
<li class="marright"><a href="http://www.curious-howto.com/love-dating/relationships/"><img class="fl" src="http://www.curious-howto.com/images/2013/04/relationships.jpg" width="63" height="40" /><span class="marleft">Relationships</span></a></li>
<li class="marright"><a href="http://www.curious-howto.com/love-dating/weddings/"><img class="fl" src="http://www.curious-howto.com/images/2013/04/weddings.jpg" width="63" height="40" /><span class="marleft">Weddings</span></a></li>
</ul></div>
</div></li> 
```

因此，当我将鼠标悬停在子菜单 ul#navitemul 上时，我希望 li#lovedating 字体颜色为白色。仅使用 css 是否可行...我尝试过：

```
ul#navitemul:hover li#lovedating a{color:white;} 
```

但是没有效果，请指教：）谢谢

请访问我的网站 www.curious-howto.com 并查看菜单，如果您想了解更多我在说什么 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:35:30.047

我认为代码应该是

```
<ul id="navitemul">
<li style="width:150px" id="lovedating"><a href="#">Love & Dating</a>
</li> <!-- Close the <li> tag here --> 
```

因为你的`<li>`标签包含了所有的`<div>`所以样式会继承

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:38:57.593

我会尝试使用 jQuery。

```
$('ul#navitemul').hover(function(){ // change color of the link to white
       $(this).closest('#lovedating a').css('color', '#FFF');
  },function(){ // change the color of the link back
       $(this).closest('#lovedating a').css('color', '#009');
}); 
```

# r - R中同一图中的多条线

> ID：16049916
> 
> 赞同：0
> 
> 时间：2013-04-17T01:26:31.123
> 
> 标签：r, plot, lines

抱歉，如果这是一个重复的问题，但我无法从其他帖子中弄清楚，因为我仍在学习 R。我想将 3 条随机线放在图上，但是当我运行我的代码时，它只绘制第 3 行在原图上。

我的代码......

```
r=0.19
N=rep(0,50)
N[1]=13
K=130
for(t in 1:50){
N[t+1]= N[t] + N[t]*r*(1-(N[t]/K))}
plot(1:51, N, type="l", lwd=3, xlab="Time")

K=130
Ns=rep(0,50)
Ns[1]=13
for(t in 1:50){
r=rnorm(1, .19, 0.13)
Ns[t+1]= Ns[t] + Ns[t]*r*(1-(Ns[t]/K))}
plot(1:51, N, type="l", lwd=3, xlab="Time")
lines(1:51, Ns, lwd=3, col='blue')
lines(1:51, Ns, lwd=3, col='green')
lines(1:51, Ns, lwd=3, col='red') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:29:14.510

您没有重新生成随机参数，因此所有行都使用相同的`Ns`. 也就是说，它们被淹没在彼此之上，而你只能看到其中一个。

# java - 带有高级网站的 Jsoup

> ID：16049917
> 
> 赞同：2
> 
> 时间：2013-04-17T01:26:40.753
> 
> 标签：java, jsoup

考虑到我是 jsoup 的新手并且只知道有关 html/css 的基本知识，我很好奇在尝试从 Facebook 解析某些内容时如何让我的生活更轻松。例如，我想从我自己的墙上归还所有可用的墙贴……确定我必须归还的内容的程序是什么。

所以目标是：

```
<div class="_wk mbm">
    <span class="userContent"> FOOBAR text i posted yesturday!!! </span>
</div> 
```

但是 facebook 的巨大布局对我来说是个问题......有没有办法通过 da`ìnspect element`在 chrome 或 mozilla 中确定选择器目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T01:40:17.337

在 Jsoup 中，您无法获取给定类的所有元素：

```
Document doc = Jsoup.connect("...").get();
System.out.println("title: " + doc.title());

/* here: all <span> with class=userContent */
Elements userContents = doc.select("span.userContent"); 
for (Element span : userContents) {
    System.out.println("User Content: "+span.text());
} 
```

# java - 为什么 Android 无法检索我输入的文本？

> ID：16049923
> 
> 赞同：2
> 
> 时间：2013-04-17T01:27:39.037
> 
> 标签：java, android, android-intent, android-edittext

***编辑在下面***标记为 ////*编辑*////

新编辑在下方标有 ///newedit///

我将在下面发布的代码是从几个地方借来的，与我在互联网上找到的任何教程或示例都完全不同，我看不出有什么问题。

我正在尝试为我的应用程序创建一个登录页面。目前，它没有检索我在用户名和密码中输入的文本（从这里称为 u 和 p）。如果我进入我的 strings.xml 文件并将 u 和 p 硬编码到应用程序中，它会检索它们并将它们传递给 JSONParser.java。

我在解决这个问题时遇到的问题就是这个。Googledev 和其他人建议使用

```
Intent intent = new Intent(this, nextActivity.class); 
```

但我没有将意图或 u 和 p 发送到“nextActivity”以检查登录。它发生在同一个活动“LoginActivity”中。

我试过放置 inputUser = (EditText) findViewById(R.id.loginUser); 在其他领域，例如... public void onClick ...和 ​​....Mytask ....没有运气。

有人可以帮我让代码检索输入的新文本，无论我是否在文本中硬编码？可能是一个简单的问题，但我很难过。

这是整个代码

```
package com.exmple.myapp;

import gdmeter.myapp_Calc;
import library.DatabaseHandler;
import library.UserFunctions;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.Activity;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class LoginActivity extends Activity {
    Button btnLogin;
    Button btnLinkToRegister;
    EditText inputUser;
    EditText inputPassword;
    TextView loginErrorMsg;

// JSON Response node names
private static String KEY_SUCCESS = "success";
private static String KEY_ERROR = "error";
private static String KEY_ERROR_MSG = "error_msg";
private static String KEY_UID = "uid";
private static String KEY_NAME = "name";
private static String KEY_EMAIL = "email";
private static String KEY_CREATED_AT = "created_at";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    inputUser = (EditText) findViewById(R.id.loginUser);
    inputPassword = (EditText) findViewById(R.id.loginPassword);
    btnLogin = (Button) findViewById(R.id.btnLogin);
    btnLinkToRegister = (Button) findViewById(R.id.btnLinkToRegisterScreen);
    loginErrorMsg = (TextView) findViewById(R.id.login_error);

    final MyTask myTask = new MyTask();
    // Login button Click Event
    btnLogin.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            // Importing all assets like buttons, text fields
           myTask.execute() ;

        } 

            // Link to Register Screen
            /**       btnLinkToRegister.setOnClickListener(new View.OnClickListener() {

                public void onClick(View view) {
                    Intent i = new Intent(getApplicationContext(),
                            RegisterActivity.class);
                    startActivity(i);
                    finish();
                }
            });
        **/
    }); 
 }       

//*** Move out MyTask
class MyTask extends AsyncTask<Void,Void,Void>{
    String user = inputUser.getText().toString();
    String password = inputPassword.getText().toString();
    @Override
    protected Void doInBackground(Void... params) {

        UserFunctions userFunction = new UserFunctions();
        JSONObject json = userFunction.loginUser(user, password);
        // check for login response
        try {
            if (json.getString(KEY_SUCCESS) != null) {
                loginErrorMsg.setText("");
                String res = json.getString(KEY_SUCCESS);
                if(Integer.parseInt(res) == 1){
                    // user successfully logged in
                    // Store user details in SQLite Database
                    DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                    JSONObject json_user = json.getJSONObject("user");

                    // Clear all previous data in database
                    userFunction.logoutUser(getApplicationContext());
                    db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        

                    // Launch Dashboard Screen
                    Intent dashboard = new Intent(getApplicationContext(), myapp_Calc.class);

                    // Close all views before launching Dashboard
                    dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(dashboard);

                    // Close Login Screen
                    finish();
                }else{
                    // Error in login
                    loginErrorMsg.setText("Incorrect username/password");
                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
          }

        return null;
       }
    }
} 
```

////*编辑*//// 这里是 login.xml。示例代码有一个我还没有利用的注册部分。因此，请忽略它，除非它是由于某种奇怪的原因导致问题。我将留下几个空格，然后按照@TJ Thind 的建议显示新代码。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#3b3b3b" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:padding="10dip" >
    <!--  View Title Label -->
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dip"
        android:text="LOGIN"
        android:textSize="25dip"
        android:textStyle="bold" />
    <!--  Email Label -->
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Username" />
    <!--  Email TextField -->
    <EditText
        android:id="@+id/loginUser"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="jj" />

    <!--  Password Label -->
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="15dip"
        android:text="Password" />
    <!--  Password TextField -->
    <EditText
        android:id="@+id/loginPassword"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="jj"
        android:password="true" />

    <!--  Error message -->
    <TextView android:id="@+id/login_error"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:textColor="#e30000"
                android:padding="10dip"
                android:textStyle="bold"/>

    <!--  Login Button -->
    <Button
        android:id="@+id/btnLogin"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dip"
        android:text="Login" />

    <!--  Link to Registration Screen -->
    <Button
        android:id="@+id/btnLinkToRegisterScreen"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="40dip"
        android:background="@null"
        android:text="I don&apos;t have account. Register Me!"
        android:textColor="#21dbd4"
        android:textStyle="bold" />
</LinearLayout> 
```

现在更新代码

```
package com.exmple.myapp;

import gdmeter.myapp_Calc;
import library.DatabaseHandler;
import library.UserFunctions;

import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import com.exmple.gdmeter.R;

public class LoginActivity extends Activity {
Button btnLogin;
Button btnLinkToRegister;
EditText inputUser;
EditText inputPassword;
TextView loginErrorMsg;

// JSON Response node names
private static String KEY_SUCCESS = "success";
private static String KEY_ERROR = "error";
private static String KEY_ERROR_MSG = "error_msg";
private static String KEY_UID = "uid";
private static String KEY_NAME = "name";
private static String KEY_EMAIL = "email";
private static String KEY_CREATED_AT = "created_at";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    final MyTask myTask = new MyTask();
    // Login button Click Event
    btnLogin.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            // Importing all assets like buttons, text fields
            String user = inputUser.getText().toString();
            String password = inputPassword.getText().toString();
            myTask.execute(user,password) ;

        } 

            // Link to Register Screen
            /**       btnLinkToRegister.setOnClickListener(new View.OnClickListener() {

                public void onClick(View view) {
                    Intent i = new Intent(getApplicationContext(),
                            RegisterActivity.class);
                    startActivity(i);
                    finish();
                }
            });
        **/
    }); 
 }       

//*** Move out MyTask
class MyTask extends AsyncTask<String,Void,Void>{
    @Override
    public Void doInBackground(String... params) {
        String user = params[0];
        String password = params[1];

        UserFunctions userFunction = new UserFunctions();
        JSONObject json = userFunction.loginUser(user, password);
        // check for login response
        try {
            if (json.getString(KEY_SUCCESS) != null) {
                loginErrorMsg.setText("");
                String res = json.getString(KEY_SUCCESS);
                if(Integer.parseInt(res) == 1){
                    // user successfully logged in
                    // Store user details in SQLite Database
                    DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                    JSONObject json_user = json.getJSONObject("user");

                    // Clear all previous data in database
                    userFunction.logoutUser(getApplicationContext());
                    db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        

                    // Launch Dashboard Screen
                    Intent dashboard = new Intent(getApplicationContext(), myapp_Calc.class);

                    // Close all views before launching Dashboard
                    dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(dashboard);

                    // Close Login Screen
                    finish();
                }else{
                    // Error in login
                    loginErrorMsg.setText("Incorrect username/password");
                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
          }

        return null;
       }
    }
} 
```

除了“private Void doInBackground”之外，我能够实现 TJ 建议的所有内容。

更改导致错误不允许我运行应用程序。所以我把它公开了。

有了这些新的变化，我的应用程序立即崩溃了。错误包括 Fatal Exception: main...unable to start activity for LoginActivity because of nullpointerexception...。

///新编辑///

```
04-28 19:20:06.517: D/ActivityThread(10674): setTargetHeapUtilization:0.25
04-28 19:20:06.517: D/ActivityThread(10674): setTargetHeapIdealFree:8388608
04-28 19:20:06.517: D/ActivityThread(10674): setTargetHeapConcurrentStart:2097152
04-28 19:20:06.667: W/dalvikvm(10674): threadid=1: thread exiting with uncaught exception (group=0x40eca438)
04-28 19:20:06.667: E/AndroidRuntime(10674): FATAL EXCEPTION: main
04-28 19:20:06.667: E/AndroidRuntime(10674): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.exmple.gdmeter/com.exmple.gdmeter.LoginActivity}: java.lang.NullPointerException
04-28 19:20:06.667: E/AndroidRuntime(10674):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2088)
04-28 19:20:06.667: E/AndroidRuntime(10674):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2113)
04-28 19:20:06.667: E/AndroidRuntime(10674):    at android.app.ActivityThread.access$700(ActivityThread.java:139)
04-28 19:20:06.667: E/AndroidRuntime(10674):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1224)
04-28 19:20:06.667: E/AndroidRuntime(10674):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-28 19:20:06.667: E/AndroidRuntime(10674):    at android.os.Looper.loop(Looper.java:137)
04-28 19:20:06.667: E/AndroidRuntime(10674):    at android.app.ActivityThread.main(ActivityThread.java:4918)
04-28 19:20:06.667: E/AndroidRuntime(10674):    at java.lang.reflect.Method.invokeNative(Native Method)
04-28 19:20:06.667: E/AndroidRuntime(10674):    at java.lang.reflect.Method.invoke(Method.java:511)
04-28 19:20:06.667: E/AndroidRuntime(10674):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
04-28 19:20:06.667: E/AndroidRuntime(10674):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
04-28 19:20:06.667: E/AndroidRuntime(10674):    at dalvik.system.NativeStart.main(Native Method)
04-28 19:20:06.667: E/AndroidRuntime(10674): Caused by: java.lang.NullPointerException
04-28 19:20:06.667: E/AndroidRuntime(10674):    at com.exmple.gdmeter.LoginActivity.onCreate(LoginActivity.java:46)
04-28 19:20:06.667: E/AndroidRuntime(10674):    at android.app.Activity.performCreate(Activity.java:5048)
04-28 19:20:06.667: E/AndroidRuntime(10674):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
04-28 19:20:06.667: E/AndroidRuntime(10674):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2052)
04-28 19:20:06.667: E/AndroidRuntime(10674):    ... 11 more 
```

好的，有logcat。希望这会有所帮助。你能帮忙的话，我会很高兴。我感谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T04:42:24.770

将您的 AsyncTask 类定义更改为：

```
class MyTask extends AsyncTask<String,Void,Void> 
```

然后将 doInBackground 的参数设置为：

```
private Void doInBackground(String... params) 
```

在 doInBackground 中获取用户名和密码，如下所示：

```
String user = params[0]
String password = params[1]; 
```

最后将您的按钮侦听器更改为：

```
btnLogin.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            // Importing all assets like buttons, text fields
           String user = inputUser.getText().toString();
           String password = inputPassword.getText().toString();
           myTask.execute(user,password) ;

        } 
```

现在解释一下。正如 GameDroids 和 eltabo 所指出的那样，当您创建 MyTask 对象时，MyTask 的字段用户和密码将为空，因为此时这些 EditTexts 中可能没有任何文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:52:15.717

当您实例化它时，您将用户和密码值存储在您的任务中。目前，您的文本字段中没有任何价值。您应该在执行任务时将这些值作为参数传递，而不是在实例化它时，或者让任务从您的活动中获取它们（如果它们是可见的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T01:54:45.320

在您的`onCreate`方法中，您定义输入字段，然后再往下几行即可创建`MyTask`实例。但在您的`MyTask`实例中，输入字段将在创建时立即读取：

```
class MyTask extends AsyncTask<Void,Void,Void>{
     String user = inputUser.getText().toString();  // this will be read when you instantiate your MyTask
     String password = inputPassword.getText().toString();

     @Override
     protected Void doInBackground(Void... params) {   // this will be executed when the click listener gets triggered 
```

因此，用户名和密码字段实际上将在创建后直接读取，而用户无法输入任何内容。因此，当用户在字段中写入内容并单击按钮时，字符串`user`和`password`已经创建并且为空（因为那里没有什么可读取的）。

尝试在您的方法中读取用户名和密码`doInBackground(Void... params)`- 这应该可以解决问题（我希望）

# mysql - 如何使用 MySQL 中的 source 命令一次处理一堆文本文件？

> ID：16049924
> 
> 赞同：0
> 
> 时间：2013-04-17T01:27:48.000
> 
> 标签：mysql

我有一堆文本文件，其中保存了所有存储过程、表定义、插入语句和类似的东西。如果我有 5 个文件，那么我必须像这样输入所有 5 行代码：

```
\. C:/project/1.sql
\. C:/project/2.sql
\. C:/project/3.sql
\. C:/project/4.sql
\. C:/project/5.sql 
```

好吧，我可以解决这个问题并制作另一个文本文件，将其**命名为 main.sql**之类的东西，我将在其中放置所有这 5 行代码，如果我想执行这 5 个文件，我只需要输入这个简单的行：

```
\. C:/project/main.sql 
```

但是这样做的问题是，如果我将所有这些文件移动到另一个位置或只是重命名存储这些文件的文件夹，我将不得不更改所有这 5 行中的路径字符串。例如，如果我要将文件夹**项目**的位置更改为类似**projects/application1/**的位置，我将不得不重新键入几乎整个内容：

```
\. C:/projects/application1/1.sql
\. C:/projects/application1/2.sql
\. C:/projects/application1/3.sql
\. C:/projects/application1/4.sql
\. C:/projects/application1/5.sql 
```

现在，正如您可能已经猜到的那样，问题是如何省去所有这些麻烦，以便如果我想移动文件，我只需要更改一行代码？我尝试了这样的事情，但没有成功：

```
SET @PATH = 'C:/projects/application1/';

\. SELECT CONCAT(@PATH, 1.sql)
\. SELECT CONCAT(@PATH, 2.sql)
\. SELECT CONCAT(@PATH, 3.sql)
\. SELECT CONCAT(@PATH, 4.sql)
\. SELECT CONCAT(@PATH, 5.sql) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:07:37.077

在这里我写了一个程序，也许对你有帮助:)

```
import java.io.File;
import java.io.IOException;

/**
 * Author: NobodyElse
 * Date: 13-4-17
 * Time: 11:00 AM
 * Description: bulk import mysql
 */
public class ImportUtil {

    public static void main(String[] args) {

        if (args.length < 3) {
            System.out.println("Usage:" + ImportUtil.class.getSimpleName() + " filePath dbName dbUser dbPass");
            throw new IllegalArgumentException();
        }

        String filePath = args[0];
        String dbName   = args[1];
        String dbUser   = args[2];
        String dbPass   = args[3];

        File path = new File(filePath);
        if (!path.exists() || !path.isDirectory()) {
            System.out.println(filePath + " not exist OR isn't a directory");
            throw new RuntimeException();
        }
        else {
            File[] files = path.listFiles();
            for (File file : files) {
                String fileName = file.getPath();
                if (fileName.endsWith(".sql")) {
                    System.out.println(fileName);
                    execute(fileName, dbName, dbUser, dbPass);
                }
            }
        }
        System.out.println("ALL DONE!");
    }

    public static void execute(String fileName, String dbName, String dbUser, String dbPass){

        String mysqlPath = "cmd /c D:\\Program\" \"Files\\MySQL\\MySQL\" \"Server\" \"5.5\\bin\\mysql.exe";

        StringBuffer cmd = new StringBuffer(mysqlPath);
        cmd.append(" -u").append(dbUser);
        cmd.append(" -p").append(dbPass).append(" ");
        cmd.append(dbName).append("<").append(fileName);

        try {
            Runtime.getRuntime().exec(cmd.toString());
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

# perl - 如何从标准输入中删除控制字符，制表符除外？

> ID：16049928
> 
> 赞同：0
> 
> 时间：2013-04-17T01:28:09.103
> 
> 标签：perl, bash

我想使用基本的 bash、perl 和其他一些 linux 工具从标准输入中删除控制字符（如 ^C、^A 等）并将其打印到标准输出。

我现在做的是

```
(something) | sed 's/[[:cntrl:]]//g' | (something else) 
```

直到现在都有效，但现在我发现它也删除了制表符，我想保留它们。

那么，还有其他东西，只是工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T01:46:28.017

[用 sed 修改 Skip/remove non-ascii 字符的](https://stackoverflow.com/questions/8571601/skip-remove-non-ascii-character-with-sed)第二个答案，我得到了这个工作 sed 脚本

```
sed 's/[^[:print:]\t]//'g 
```

它似乎有效（尽管“非 ascii”部分是错误的，但它不会删除任何 unicode）。

要使 Unicode 工作，您必须将环境变量设置为`LANG=en_US.UTF-8`和`LC_CTYPE="en_US.UTF-8"`（并导出）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T01:34:59.030

您可以根据以下[定义`[:cntrl:]`](http://sed.sourceforge.net/sedfaq3.html)自己定义字符类：

```
sed 's/[\x00\-\x08\x10-\x1F\x7F]\{1,\}//g' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T01:36:27.943

您可以使用 perl-regex尝试`ssed`（[super-sed ）：](http://www.ososo.de/extreg/)

```
echo -e 'hello\tworld' | ssed 's/(?!\t)[[:cntrl:]]//g' 
```

# php - 无法从 CodeIgniter 中的 URL 中删除 index.php

> ID：16049932
> 
> 赞同：1
> 
> 时间：2013-04-17T01:29:07.773
> 
> 标签：php, apache, .htaccess, codeigniter, mod-rewrite

我已经把头发拔了三天了，我用谷歌搜索了所有东西，上过代码点火器论坛，并从上到下检查了堆栈溢出。

我想要做的就是从 url 中删除 index.php。我发现的最接近我的问题的帖子没有得到回答： [帖子](https://stackoverflow.com/questions/14214842/codeigniter-mod-rewrite-gives-404-error)

如果我去`localhost/CodeIgniter`我的主页显示。如果我单击我的链接，我会收到该页面不存在的错误。

```
404 Page Not Found

The page you requested was not found. 
```

根据我读过的所有内容，这是我当前的配置。

MAC OSX 10.8.3 MAMP CodeIgniter 2.1.3

我的根目录是 www/CodeIgniter/ 这是 CodeIgniter Root 中的 .htaccess 文件

```
#Deny from all
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /CodeIgniter/

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

这是 CodeIgniter 的配置设置：我尝试了 uri_protocol 的所有设置，但没有成功

```
$config['index_page'] = '';
$config['uri_protocol'] = 'AUTO'; 
```

我确认我已启用 mod_rewrite，并且 httpd.conf 中的 AllowOverride 设置为 All。

****更新所以我删除了 MAMP 和 codeigniter 并从头开始。现在使用下面的 .htaccess 文件，当我转到 localhost 时，不会显示 codeigniter 文件夹。如果我尝试浏览到该文件夹​​，我会收到以下错误。

```
 Internal Server Error

The server encountered an internal error or misconfiguration and was unable to complete your request.

Please contact the server administrator, you@example.com and inform them of the time the error occurred, and anything you might have done that may have caused the error.

More information about this error may be available in the server error log. 
```

当我查看错误日志时，出现以下错误。

```
[Mon Apr 22 21:42:51 2013] [alert] [client ::1] /Users/me/Dropbox/www/codeigniter/.htaccess: <IfModule takes one argument, Container for directives based on existance of specified modules 
```

我确认我在 phpinfo(); 中启用了 mod_rewrite；

如果我删除 .htaccess 文件，我可以浏览到该文件夹​​并获取主页，但当然链接不起作用。任何建议将不胜感激。

```
 <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /codeigniter/

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:17:55.267

仅出于测试目的备份您的 htaccess 文件，然后将其完全清除并粘贴：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

看看您是否可以无错误地浏览该网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:54:24.730

嘿，你为什么不做一件事......下载这个代码点火器安装[https://github.com/amitavroy/cleanplate](https://github.com/amitavroy/cleanplate)然后检查这是否没有错误。你 mod_rewrite 应该在offcourse

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T20:21:36.817

```
DirectoryIndex index.php
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php|robots\.txt)
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

内部配置文件：

```
$config['index_page'] = 'index.php';
$config['uri_protocol'] = 'REQUEST_URI'; //or 'QUERY_STRING' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-20T01:47:52.347

迟到总比没有好，但我不得不修改我的 httpd.conf 文件，在重启了 3 次之后它才开始工作。也许这可以帮助别人

```
<Directory />
    Options FollowSymLinks
    AllowOverride All
    Order deny,allow
    Deny from all
</Directory> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-05T22:27:54.653

只需将以下内容粘贴到您的 .htaccess 文件中即可

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /CodeIgniter/index.php/$1 [L] 
```

设置 $config['index_page'] = ''; //config.php $config['uri_protocol'] = 'REQUEST_URI';//config.php

# image - 全宽、有限高度的图像，同时保持纵横比

> ID：16049935
> 
> 赞同：0
> 
> 时间：2013-04-17T01:29:27.747
> 
> 标签：image, css

我正在尝试重新创建一个图像，使其看起来像[这里](http://www.fastcolabs.com/)的封面图像。图像必须是浏览器的全宽，但仍保持一定的固定高度。尽管如此，它仍然必须保持纵横比。

设置`width: 100%; height: auto;`使图像以正确的纵横比全宽。但是，高度是关闭的。如果我设置`width: 100%; max-height: 300px;`，纵横比就会丢失。

我确信这是可能的（见上面的链接），但我只是不知道如何得到这个结果。不胜感激一些指点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:34:03.107

您必须“剪切”超过固定高度的图像部分。所以将此样式设置为图像的父容器：

```
#image-container { height: 300px; overflow:hidden; } 
```

[jsFiddle](http://jsfiddle.net/NKUyh/5/)

# c++ - 由于 sizeof() 无法输出 int

> ID：16049936
> 
> 赞同：1
> 
> 时间：2013-04-17T01:29:42.300
> 
> 标签：c++, windows, windows-8, mingw, sizeof

我打算用 C++ 编写一个程序，它将为我同步两个目录，其中一部分我需要获取 char 数组的大小。我正在使用的代码如下

```
#include <iostream>
#include <Windows.h>
using namespace std;

int main() {
    char binaryPath[MAX_PATH];
    GetModuleFileName(NULL, binaryPath, MAX_PATH);
    int r = sizeof(binaryPath);

    return 0;
} 
```

无论如何，该代码编译并运行良好。当我尝试计算 binaryPath 变量时，问题就来了。在主块中，在 r 的分配/声明之后，如果我尝试像这样将 r 输出到屏幕

```
cout << r; 
```

二进制文件停止运行。Windows 说“Cpp.exe”已停止工作，我被迫强制关闭该程序。我完全不知道为什么。

即使我尝试更简单的版本，比如下面的程序

```
#include <iostream>
using namespace std;
int main() {
    int r = 7;
cout << sizeof(r);
return 0;
} 
```

结果是一样的。在我看来，我几乎可以在幕后使用 sizeof() 做我想做的事，但是一旦我尝试输出它，事情就会停止工作。

我在运行 Windows 8 的 mac 上使用 MinGW（b/c win8 过去给我带来了一些麻烦，不确定它是否能够破坏 c++）。

非常需要帮助并表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:40:42.497

`sizeof()`会给你对象的大小。也就是说`MAX_PATH`，不是里面的字符串的长度。为此使用`strlen`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:42:15.937

重新安装 MinGW。这对我有用。确保以管理员身份运行设置

# openssl - Openssl：使用证书中的公钥验证 RSA 加密数据

> ID：16049939
> 
> 赞同：0
> 
> 时间：2013-04-17T01:29:58.613
> 
> 标签：openssl, rsa, encryption

我在一个名为 digital_signatue1.txt 的文件中有一个 base64 编码的数字签名：

```
LE3v7aHDOtCYEWrURYfxrq4tAx5zg0siBK0yBdYJTxWTFw/tLoEOcT0JZPRy8RMY
bkCuLClsdVnjYhyfots3RyVl4uaSd2gpEnIN6YCo/DBCBltfWri3rFwtSeV/Gm9K
4+fMNiziTYjUWFS+1v1rbFxv4MbsRFEfYEtU0+xVHN8= 
```

为了对这个数字签名进行 base64 解码，我使用了以下命令：

```
openssl base64 -d -in digital_signature1.txt -out digital_signature2.txt 
```

然后为了验证数字签名是否由发件人签名，我使用了以下命令：

```
openssl rsautl -verify -inkey sender-cert.pem -certin -in digital_signature2.txt 
```

但是，它给了我以下输出：

```
Loading 'screen' into random state - done
RSA operation error
4080:error:0407006A:rsa routines:RSA_padding_check_PKCS1_type_1:block type is not     01:./crypto/rsa/rsa_pk1.c:100:
4080:error:04067072:rsa routines:RSA_EAY_PUBLIC_DECRYPT:padding check     failed:./crypto/rsa/rsa_eay.c:699: 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T04:07:35.227

根据签名验证理论，它需要以下内容： 1\. 已签名的数据。2\. 数据签名 3\. 公钥。

在这里，您有签名和公钥，但我怀疑数据在哪里？数据必须位于使用 rsautl 签名的 digital_signature2.txt 中。请检查 digital_signature2.txt 是否格式正确。

# android - Pallette Android Eclipse ADT 中没有地图视图？

> ID：16049941
> 
> 赞同：2
> 
> 时间：2013-04-17T01:30:01.607
> 
> 标签：android, android-layout, android-mapview

在我的 ADT 中使用布局时，我没有在 Palette 中看到 mapview。我已经搜索了所有类别。它在哪里？

我尝试将 XML 代码直接放入布局文件中，但我没有看到：

> 缺少样式。是否为此布局选择了正确的主题？使用布局上方的主题组合框选择不同的布局，或修复主题样式引用。
> 
> 在当前主题中找不到样式“mapViewStyle”

我应该以某种方式导入一些额外的库吗？

我的项目设置为针对 Google API 级别 15。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:56:59.067

Google Maps v1 在 Palette 中有一个 MapView 已被弃用，取而代之的是[Google Maps v2](https://developers.google.com/maps/documentation/android/)，它确实需要您导入[Google Play Services Library](http://developer.android.com/google/play-services/index.html)。

[Google Maps v2 概述](http://developer.android.com/google/play-services/maps.html)详细介绍了如何开始使用 Maps v2。

# macos - 如何从系统剪贴板粘贴到控制台 Vim？

> ID：16049952
> 
> 赞同：4
> 
> 时间：2013-04-17T01:31:27.150
> 
> 标签：macos, vim, clipboard, paste

我可以将文本从 Vim 复制到其他 Mac 应用程序`"*y`。但是当我尝试从 TextEdit 粘贴到 Vim 中时，我无法粘贴带有`"*p`. 有没有我错过的设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T07:53:08.980

`"*p` *并且* `"*y`不要在 OS X 附带的默认 Vim 中工作，因为它没有使用剪贴板支持进行编译。

你可能会被引导相信它们以某种方式工作，因为如果你使用不存在的寄存器并从默认寄存器中拉入或放入，Vim 不会抱怨。`:reg +`并且`:reg *`不应该显示任何内容。

很容易验证您的 Vim 是否带有剪贴板支持。以下命令

```
$ /path/to/vim --version | grep clipboard 
```

应该找到`-clipboard`，`-xterm-clipboard`这意味着“不支持剪贴板”。

获得剪贴板支持的唯一*实用*方法是安装适当的 Vim 版本，方法是下载 MacVim，使用 Homebrew 或 Macports 等包管理器或手动编译。我建议第一个选项：它是最不令人讨厌但最简单和最快的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-25T15:49:39.493

无需安装 MacVim，只需将这一行放在你的 .vimrc 文件中：

设置剪贴板=未命名

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T01:46:14.480

**编辑：**似乎 Mac OS (Mountain Lion) 附带的默认版本没有与剪贴板支持一起编译。既然是这种情况，我建议只使用`Command+V`从系统剪贴板粘贴或通过[macports](http://www.macports.org)安装新版本的 vim 。

改为使用`"+p`。

我相信`+`是指系统剪贴板的寄存器。

# wordpress - 我无法使用此代码在 .htaccess 中启用 gzip。我还需要做什么？

> ID：16049955
> 
> 赞同：0
> 
> 时间：2013-04-17T01:31:38.543
> 
> 标签：wordpress, .htaccess, google-pagespeed

我正在尝试用 gzip 压缩，所以我把这个块放在我的 .htaccess 文件中。

```
# BEGIN Gzip
<ifmodule mod_deflate.c>
AddOutputFilterByType DEFLATE text/text text/html text/plain text/xml text/css application/x-javascript application/javascript
</ifmodule>
# END Gzip 
```

我仍然在 Google PageSpeed 中收到“启用压缩”消息；但是，在[这个网站上](http://www.whatsmyip.org/http-compression-test/)，它说我的网站是 gzip 压缩的。

我还有什么需要补充的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-09T05:41:32.133

这是我最近一直在使用的一个片段，作为使用 .htaccess 对文件进行压缩的全部内容。我确定我曾经在这里找到它，但不幸的是我没有注意到我是从哪个用户那里找到它的。

```
<IfModule mod_deflate.c>
  #Force deflate for mangled headers
  <IfModule mod_setenvif.c>
    <IfModule mod_headers.c>
      SetEnvIfNoCase ^(Accept-EncodXng|X-cept-Encoding|X{15}|~{15}|-{15})$ ^((gzip|deflate)\s*,?\s*)+|[X~-]{4,13}$ HAVE_Accept-Encoding
      RequestHeader append Accept-Encoding "gzip,deflate" env=HAVE_Accept-Encoding
    </IfModule>
  </IfModule>

  #HTML, TXT, CSS, JavaScript, JSON, XML, HTC:
  <IfModule filter_module>
    FilterDeclare   COMPRESS
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/html
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/css
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/plain
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/x-component
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/javascript
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/json
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/xhtml+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/rss+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/atom+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/vnd.ms-fontobject
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $image/svg+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/x-font-ttf
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $font/opentype
    FilterChain     COMPRESS
    FilterProtocol  COMPRESS  DEFLATE change=yes;byteranges=no
  </IfModule>

  <IfModule !mod_filter.c>
    #Legacy versions of Apache
    AddOutputFilterByType DEFLATE text/html text/plain text/css application/json
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE text/xml application/xml text/x-component
    AddOutputFilterByType DEFLATE application/xhtml+xml application/rss+xml 
    AddOutputFilterByType DEFLATE application/atom+xml
    AddOutputFilterByType DEFLATE image/svg+xml application/vnd.ms-fontobject 
    AddOutputFilterByType DEFLATE application/x-font-ttf font/opentype
  </IfModule>
</IfModule> 
```

# python - 使用 Twitter Bootstrap 时通过 Flask Request 对象处理点击

> ID：16049959
> 
> 赞同：2
> 
> 时间：2013-04-17T01:32:04.150
> 
> 标签：python, twitter-bootstrap, flask

我正在为我的 web 应用程序使用 Twitter Bootstrap 中的“基本标签”

[http://twitter.github.io/bootstrap/components.html#navs](http://twitter.github.io/bootstrap/components.html#navs)

单击其中一个选项卡时，我想使用 Flask 请求对象将参数发送到烧瓶。

```
<form action="{{ url_for('index') }}" method="post">
    <ul class="nav nav-tabs">
        <li class="active" input type="submit" name="test" value="0">
            <a href="#">A</a>
        </li>
        <li input type="submit" name="test" value="1"><a href="{{ url_for('index') }}">B</a></li>
        <li input type="submit" name="test" value="2"><a href="{{ url_for('index') }}">C</a></li>
    </ul>
</form> 
```

此示例中有 3 个选项卡，当单击其中一个选项卡时，我将定义相应的“值”对象并通过请求对象传递。每个选项卡使用相同的 URL，因此需要通过请求对象传递差异。上面的代码片段没有通过请求对象发送任何内容，有人可以推荐一个修复方法。我使用“表单”对象是否正确？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T01:41:07.453

该`li`元素没有属性`input`（或就此而言，`type`或`value`）。你可能想要这样的东西：

```
<form action="{{ url_for('index') }}" method="post">
<ul class="nav nav-tabs">
    <li class="active">
        <button type="submit" name="test" value="0">A</button>
    </li>
    <li><button type="submit" name="test" value="1">B</button></li>
    <li><button type="submit" name="test" value="2">C</button></li>
</ul>
</form> 
```

然后，您可以通过MultiDict访问`POST`ed 值：[`request.form`](http://flask.pocoo.org/docs/api/#flask.Request.form)

```
@app.route("/")
def index():
    print request.form.get("test", "None provided")
    return render_template("index.html") 
```

请注意，旧 IE (<9) 对元素的处理存在[错误。](http://reference.sitepoint.com/html/button)`button`

# javascript - 如何为画布制作加载屏幕

> ID：16049963
> 
> 赞同：2
> 
> 时间：2013-04-17T01:32:57.580
> 
> 标签：javascript, canvas

我正在使用 javascript canvas 元素，我正在寻找可以为它制作加载屏幕的方法，因为它需要在屏幕上布置 20 万个单独颜色的点，并且需要相当长的时间。我看到的所有加载屏幕都是用于加载 HTML 元素的 jQuery 解决方案。但是，画布标签加载速度很快，但其上的元素却没有。有什么方法可以衡量画布加载的进度吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T01:44:22.480

您可以创建一个具有绝对位置的 div，然后将其放置在您的画布上。

```
//Init Canvas... get context
//blah blah blah

//Put a load screen over it
var loading=$('<div style="position:absolute;left:;top:;background:url(\'loading.gif\' white"/>').appendTo("body");

//Call drawing procedure
//......

//when done just remove
loading.remove() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T01:50:32.850

```
var myContext = myCanvasElement.getContext('2d'),
myImg = new Image();
var img=document.getElementById("scream");

myImg.onload = function() {
    myContext.drawImage(img, 300, 300);
    //...
    //...
    //your "on-finished" Call Here
}; 
```

canva 上下文函数本身是同步的。

# vim - Vim 将高亮信息屏幕保存到文件

> ID：16049965
> 
> 赞同：4
> 
> 时间：2013-04-17T01:33:00.570
> 
> 标签：vim

如果你输入 Vim 有没有办法保存出现的窗口`:highlight`？我正在研究配色方案，能够在真实窗口中打开它的副本会很有帮助（这样我就可以在我的配色方案中处理好线条后进行搜索或删除）。我已经尝试过`:h :highlight`，它没有发现任何有用的东西，但肯定有办法。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T01:37:24.790

您可以使用[`redir`](http://vimdoc.sourceforge.net/htmldoc/various.html#%3aredir)将突出显示的输出重定向到文件。

在 vim 你运行

```
:redir > file
:highlight
:redir END 
```

文件现在应该包含高亮的输出。

**更新**：`xxx`在突出显示文件中突出显示的一种方法是运行下面的函数

```
function! HiFile()
    let i = 1
    while i <= line("$")
        if strlen(getline(i)) > 0 && len(split(getline(i))) > 2
            let w = split(getline(i))[0]
            exe "syn match " . w . " /\\(" . w . "\\s\\+\\)\\@<=xxx/"
        endif
        let i += 1
    endwhile
endfunction 
```

该函数用于`syn match`将高亮组与`xxx`之后的组匹配。

你可以把函数放在你的 vimrc 中，然后`:call HiFile()`在高亮文件中运行它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T06:12:46.113

有一个菜单命令*Syntax > Highlight Test*创建一个包含所有高亮组的缓冲区。或者，您可以通过触发它

```
:runtime syntax/hitest.vim 
```

# javascript - 使用 JDBC 将 Google 电子表格连接到 MySQL

> ID：16049966
> 
> 赞同：6
> 
> 时间：2013-04-17T01:33:02.660
> 
> 标签：javascript, mysql, jdbc, google-apps-script, google-sheets

我一直在深入挖掘，试图在这里和谷歌上找到答案……希望有人能提供帮助。

我要做的是从此处找到的 Google 电子表格脚本连接到 MySQL：

[https://developers.google.com/apps-script/jdbc#reading_from_a_database](https://developers.google.com/apps-script/jdbc#reading_from_a_database)

首先，我按照以下说明设置服务器：

[https://help.ubuntu.com/community/JDBCAndMySQL](https://help.ubuntu.com/community/JDBCAndMySQL)

我收到此错误：“无法建立数据库连接。检查连接字符串、用户名和密码。（第 2 行，文件“代码”）关闭”

第 2 行如下所示：

var conn = Jdbc.getConnection("jdbc:mysql://65.65.65.65:3306/dbname", "user", "password")

然后我发现 JDBC 中存在一个错误，但这是由于主机名造成的，解决方案是改用 IP。我已经在使用 IP 所以我不认为这个错误是

此处提及：[Google Apps 脚本 - JDBC 连接失败](https://stackoverflow.com/questions/13151909/google-apps-script-jdbc-connection-failed)

在这里：[“无法建立数据库连接。检查连接字符串、用户名和密码”背后的根错误是什么。](https://stackoverflow.com/questions/13331675/what-is-the-root-error-behind-failed-to-establish-a-database-connection-check)

在此处确认和详细说明：[https ://code.google.com/p/google-apps-script-issues/issues/detail?id=1856](https://code.google.com/p/google-apps-script-issues/issues/detail?id=1856)

.......现在我不相信我的问题与上述错误有关。我认为这是因为 mysql 只能通过 SSH 访问？

如果是这种情况，那么我*认为*我需要帮助的是修改我的代码以通过 SSH 连接。

或者也许我错了，我需要探索将 mysql 公开......但这感觉不对。

任何和所有的想法都非常受欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T01:24:52.417

叹息......解决方案就在我面前。我需要授予 Google 应用服务器 IP。我确定您可以添加更多代码以通过 ssh 进行连接，并且它更安全，但现在这很好。

以下是IP地址范围：

216.239.32.0 - 216.239.63.255 64.233.160.0 - 64.233.191.255 66.249.80.0 - 66.249.95.255 72.14.192.0 - 72.14.255.255 209.85.128.0 - 209.85.255.255 66.102.0.0 - 66.102.15.255 74.125.0.0 - 74.125.255.255 64.18 .0.0 - 64.18.15.255 207.126.144.0 - 207.126.159.255 173.194.0.0 - 173.194.255.255

[https://developers.google.com/apps-script/jdbc#accessing_local_databases](https://developers.google.com/apps-script/jdbc#accessing_local_databases)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-26T21:19:48.973

我知道这是一个防火墙问题，但如果其他人想要一个能够将数据提取到您的 Google 电子表格中的免费 JDBC 工具，我会分享。您可以在一个工具中创建查询并刷新您的内容。

你可以在这里找到它。[Google 电子表格 JDBC 连接器](https://github.com/ebarreat/Google-Spreadsheet-JDBC)

# python-2.7 - Django Tutorial 04 NoReverseMatch at /polls/1/ - u'polls' 不是注册的命名空间

> ID：16049972
> 
> 赞同：7
> 
> 时间：2013-04-17T01:33:40.073
> 
> 标签：python-2.7, django-forms

我正在尝试做 django 教程。我在教程 04。我得到了以下内容：

*   Django 1.5.1（64 位）
*   Python 2.7（64 位）

在页面详细信息上，它说：

```
NoReverseMatch at /polls/1/ 
```

它说：**u'polls' 不是注册的命名空间。**

民意调查/views.py

```
from django.http import HttpResponse, Http404, HttpResponseRedirect
from django.shortcuts import render, get_object_or_404
from django.template import Context, loader
from django.core.urlresolvers import reverse
from polls.models import Poll

def index(request):
    latest_poll_list = Poll.objects.order_by('-pub_date')[:5]
    template = loader.get_template('polls/index.html')
    context = Context({
        'latest_poll_list': latest_poll_list,
    })
    return HttpResponse(template.render(context))

def detail(request, poll_id):
    try: 
      poll = Poll.objects.get(pk=poll_id)
    except Poll.DoesNotExist:
      raise Http404
    #return HttpResponseRedirect(reverse('poll_results', kwargs={'object_id': p.id}))      
    return render(request,'polls/detail.html',{'poll':poll})
'''
    poll = get_object_or_404(Poll, pk=poll_id)
    return render(request, 'polls/detail.html', {'poll': poll})
'''

def results(request, poll_id):
    poll = get_object_or_404(Poll, pk=poll_id)
    return render(request, 'polls/results', {'poll': poll})

def vote(request, poll_id):
    p = get_object_or_404(Poll, pk=poll_id)
    try:
        selected_choice = p.choice_set.get(pk=request.POST['choice'])
    except (KeyError, Choice.DoesNotExist):
        # Redisplay the poll voting form.
        return render(request, 'polls/detail.html', {
            'poll': p,
            'error_message': "You didn't select a choice.",
        })
    else:
        selected_choice.votes += 1
        selected_choice.save()
        # Always return an HttpResponseRedirect after successfully dealing
        # with POST data. This prevents data from being posted twice if a
        # user hits the Back button.
        return HttpResponseRedirect(reverse('polls:results', args=(p.id,))) 
```

民意调查/urls.py：

```
from django.conf.urls import patterns, url
from django.views.generic import DetailView, ListView
from polls.models import Poll

urlpatterns = patterns('',
    url(r'^$',
        ListView.as_view(
            queryset=Poll.objects.order_by('-pub_date')[:5],
            context_object_name='latest_poll_list',
            template_name='polls/index.html'),
        name='index'),
    url(r'^(?P<pk>\d+)/$',
        DetailView.as_view(
            model=Poll,
            template_name='polls/detail.html'),
        name='detail'),
    url(r'^(?P<pk>\d+)/results/$',
        DetailView.as_view(
            model=Poll,
            template_name='polls/results.html'),
        name='results'),
    url(r'^(?P<poll_id>\d+)/vote/$', 'polls.views.vote', name='vote'),
) 
```

民意调查/模板/民意调查/detail.html

```
{% load url from future %}
<h1>{{ poll.question }}</h1>

{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

<form action="{% url 'polls:detail' poll.id %}" method="post"> <!-- -->
    {% csrf_token %}
{% for choice in poll.choice_set.all %}
    <input type="radio" name="choice" id="choice{{ forloop.counter }}" value="{{ choice.id }}" />
    <label for="choice{{ forloop.counter }}">{{ choice.choice_text }}</label><br />
{% endfor %}
<input type="submit" value="Vote" />
</form> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-17T01:51:09.050

没关系。我只是错过了一步。我刚刚改变了这一行：

```
url(r'^polls/', include('polls.urls')), 
```

至：

```
url(r'^polls/', include('polls.urls', namespace="polls")), 
```

在**site/urls.py**上，它现在说：

```
urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'hello.views.home', name='home'),
    # url(r'^hello/', include('hello.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^polls/', include('polls.urls', namespace="polls")),
    url(r'^admin/', include(admin.site.urls)),
) 
```

现在它可以工作了。

# ruby-on-rails - 在 Rails 中创建 javascript:void(0) 链接的 HAML 助手

> ID：16049973
> 
> 赞同：0
> 
> 时间：2013-04-17T01:33:44.253
> 
> 标签：ruby-on-rails, haml

如何在 Rails 中为 HAML 定义一个助手来定义链接`href='javascript:void(0)'`？

即这个的简写：

```
%a.link#somelink(href="javascript:void(0)") Link to Foo 
```

希望比这更整洁：

```
- js_link {:class=>'link', :id=>'somelink'} "Link to Foo" 
```

我的意思是 HAML 助手，而不是传统的 Rails 助手。我希望有类似的东西：

```
%js.link#somelink Link to Foo 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:34:16.717

I think you are going to have a hard time with this. The simplest you could make it would probably be something like

```
#somelink.link
  - js_link 'Link to Foo' 
```

But this would add the `id` and `class` attributes to a div surrounding your link rather than directly on it. If the selectors are for CSS or jQuery purposes, you might get away with leaving the attributes off altogether and using the surrounding element information to access the links:

```
#list-of-links
  %a{href: "javascript:void(0);"}
  %a{href: "javascript:void(0);"}
  %a{href: "javascript:void(0);"} 
```

And in JavaScript:

```
jQuery('#list-of-links a').on('click', function() { return doSomething(); }); 
```

All this being said, it is possible to create a [custom filter](http://haml.info/docs/yardoc/Haml/Filters.html), similar to `:css` or `:script` for Haml with something like

```
Haml::Filters.register_tilt_filter "JavaScriptLink" 
```

But for this to work, you would have to define your own `"JavaScriptLink"` [Tilt](https://github.com/rtomayko/tilt) template system, and even then, I'm not sure it would work or look any prettier.

# c++ - x264_encoder_open 总是返回 null

> ID：16049974
> 
> 赞同：0
> 
> 时间：2013-04-17T01:33:45.090
> 
> 标签：c++, ffmpeg, x264

这是我的代码

x264_param_default(&m_X264Param) ;

```
nRet = x264_param_default_preset(&m_X264Param,"medium","zerolatency") ;
if (nRet)
{
    return -1;
}
if (cpMain == Param.nProfile)
{
    nRet = x264_param_apply_profile(&m_X264Param,"main") ;
}
else if (cpSimple == Param.nProfile)
{
    nRet = x264_param_apply_profile(&m_X264Param,"baseline") ;
}
else if (cpComplex == Param.nProfile)
{
    nRet = x264_param_apply_profile(&m_X264Param,"high");
}
if (nRet)
{
    return -1;
}
m_X264Param.i_width = Param.nWidth ;
m_X264Param.i_height = Param.nHeight ;
m_X264Param.i_threads = X264_THREADS_AUTO ;
m_X264Param.i_log_level = X264_LOG_NONE ;
m_X264Param.rc.i_bitrate = Param.nBitRate ;
m_X264Param.rc.i_rc_method = X264_RC_ABR ;
m_X264Param.i_csp          =  X264_CSP_I420 ; 
```

m_pX264Handle = x264_encoder_open(&m_X264Param) ;

但它总是返回 null 这是我第一次使用它我错过了一些关键参数吗？有谁能告诉我答案！非常感谢和最好的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T20:26:55.147

返回`NULL`的只是参数参数或环境中的错误指示。

只是一个可能发生的例子：

```
x264_t *x264_encoder_open( x264_param_t *param )
{
    // ...
    if( x264_threading_init() )
    {
        x264_log( h, X264_LOG_ERROR, "unable to initialize threading\n" );
        goto fail;
    }
    // ...
fail:
    x264_free( h );
    return NULL;
} 
```

通过和朋友添加一个日志回调，`m_X264Param.pf_log`并使用据称解释问题的诊断消息调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T19:25:06.930

不，我认为编码器打开不应该返回 null。请检查函数名称是否正确，我认为内部版本号通常包含在此函数中，`x264_encoder_encode_130`等等。如果您使用的是 dll，那么您必须正确链接它 - 我知道的不多，但只是 mah 2 cent yaw .

# scala - 如何为 Scala 集指定 newBuilder？

> ID：16049978
> 
> 赞同：2
> 
> 时间：2013-04-17T01:34:12.483
> 
> 标签：scala, builder, scala-collections

我正在尝试在 Scala 中扩展一组整数。根据[较早的答案](https://stackoverflow.com/questions/15307213/override-tostring-in-a-scala-set)，我决定使用 SetProxy 对象。我现在正在尝试实现《*Scala 编程*`newBuilder`》第二版第 25 章中描述的机制，但遇到了麻烦。具体来说，我无法弄清楚要为对象指定什么参数。这是我尝试过的。*`SetBuilder`*

 *```
package example

import scala.collection.immutable.{HashSet, SetProxy}
import scala.collection.mutable

case class CustomSet(override val self: Set[Int]) extends SetProxy[Int] {
  override def newBuilder[Int, CustomSet] = 
    new mutable.SetBuilder[Int, CustomSet](CustomSet())
}

object CustomSet {
  def apply(values: Int*): CustomSet = CustomSet(HashSet(values.toSeq: _*))
} 
```

这不编译。这是错误。

```
scala: type mismatch;
 found   : example.CustomSet
 required: CustomSet
  override def newBuilder[Int, CustomSet] = new mutable.SetBuilder[Int, CustomSet](CustomSet())
                                                                                        ^ 
```

这对我来说很神秘。我已经尝试了有问题的值的各种变化，但它们都不起作用。我该如何编译？

除了*在 Scala 中编程之外，我还浏览了类似*[这样](https://stackoverflow.com/questions/4416885/extend-scala-set-with-concrete-type)的各种 StackOverflow 帖子，但仍然一头雾水。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T11:32:41.817

试一试：

```
case class CustomSet(override val self: Set[Int]) extends SetProxy[Int] {
  override def newBuilder = new mutable.SetBuilder[Int, Set[Int]](CustomSet())
}

object CustomSet {
  def apply(values: Int*): CustomSet = CustomSet(HashSet(values.toSeq: _*))
} 
```

创建时`SetBuilder`，指定`CustomSet`为第二种类型的参数不满足该参数的类型绑定。将其切换为`Set[Int]`满足该标准并允许您仍将您的`CustomSet`作为构造函数 arg 传入。希望这可以帮助。*

# excel - 使用宏（VB 代码）刷新 Excel 工作表中所有引用的字段

> ID：16049989
> 
> 赞同：0
> 
> 时间：2013-04-17T01:35:46.800
> 
> 标签：excel, vba, spreadsheet

我有一个电子表格，它从同一个电子表格上的另一个 Excel 选项卡中引用其大部分值`=Data!D11`，例如，使用它所引用的值更新字段值。

我之前编写了以下 VB MACRO 代码，它提供了一个弹出框来输入要更新的行号，其中包含所选行的硬编码字段，但是如果我想更新所有字段，例如能够选择哪些列和需要更新的行？，我基本上需要一个宏 VB 代码，如果用户请求，我可以更新页面上引用的所有字段。

我对为什么 Excel 自己不更新它们有点困惑，但是这种自动化应该有助于通过运行宏来更新电子表格中的所有引用字段，除非有另一种方法可以实际“刷新”字段以显示新值？

```
Sub UpdateFormulas()

    Dim LRowNumber As Long

    LRowNumber = InputBox("Please enter the row number to update the formulas.")

    Sheets("Form").Select

    'All following code will copy a formula into the destination if the source
    'has a value.  If the source does not have a value, it will copy a blank to
    'the destination.

    'Item #1
    Range("F7").Select
    If IsEmpty(Range("Data!A" & LRowNumber).Value) Then
        ActiveCell.Value = ""
    Else
        ActiveCell.Formula = "=Data!A" & LRowNumber
    End If

    'Item #2
    Range("F9").Select
    If IsEmpty(Range("Data!B" & LRowNumber).Value) Then
        ActiveCell.Value = ""
    Else
        ActiveCell.Formula = "=Data!B" & LRowNumber
    End If

    'Item #3
    Range("J10").Select
    If IsEmpty(Range("Data!C" & LRowNumber).Value) Then
        ActiveCell.Value = ""
    Else
        ActiveCell.Formula = "=Data!C" & LRowNumber
    End If

    'Item #4
    Range("H11").Select
    If IsEmpty(Range("Data!D" & LRowNumber).Value) Then
        ActiveCell.Value = ""
    Else
        ActiveCell.Formula = "=Data!D" & LRowNumber
    End If

    'Item #5
    Range("D11").Select
    If IsEmpty(Range("Data!E" & LRowNumber).Value) Then
        ActiveCell.Value = ""
    Else
        ActiveCell.Formula = "=Data!E" & LRowNumber
    End If

    'Reposition back on item #1
    Range("F7").Select

    MsgBox ("The formulas were successfully updated to row " & LRowNumber & ".")

End Sub 
```

或者我应该只接受一个数据透视表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:53:21.733

只需循环执行即可。

```
Sub UpdateFormulas()

Dim LRowNumber As Long
Dim FRowNumber as Long
Dim r as Long

FRowNumber = InputBox("Please enter the first row number to update the formulas.")
LRowNumber = InputBox("Please enter the last row number to update the formulas.")

Sheets("Form").Select

For r = FRowNumber to LRowNumber

         'Item #1
        With Range("F7")
        If IsEmpty(Range("Data!A" & r).Value) Then
           .Value = ""
        Else
            .Formula = "=Data!A" & r
        End If
        End With

        'Item #2
        With Range("F9")
        If IsEmpty(Range("Data!B" & r).Value) Then
            .Value = ""
        Else
            .Formula = "=Data!B" & r
        End If
        End With

        'Item #3
        With Range("J10")
        If IsEmpty(Range("Data!C" & r).Value) Then
            .Value = ""
        Else
            .Formula = "=Data!C" & r
        End If
        End With

        'Item #4
        With Range("H11")
        If IsEmpty(Range("Data!D" & r).Value) Then
            .Value = ""
        Else
            .Formula = "=Data!D" & r
        End If
        End With

        'Item #5
        With Range("D11")
        If IsEmpty(Range("Data!E" & r).Value) Then
            .Value = ""
        Else
            .Formula = "=Data!E" & r
        End If
        End With

Next

    MsgBox ("The formulas were successfully updated to rows " & _
        FRowNumber & " to " & LRowNumber & ".")

End Sub 
```

如果不想依赖输入框，可以动态设置`FRowNumber`和`LRowNumber`变量。就像是：

```
FRowNumber = ActiveSheet.UsedRange.Rows(1).Row
LRowNumber = ActiveSheet.UsedRange.Rows.Count 
```

# matlab - 一个衬垫将两个矩阵的大小重新调整为与较小矩阵相同的大小

> ID：16049996
> 
> 赞同：0
> 
> 时间：2013-04-17T01:37:58.260
> 
> 标签：matlab, resize

假设我有两个矩阵：`A`并且`B`它们是两个不同的大小。例如：

```
A = [1 2]

B = [3 4 5] 
```

我想要做的是裁剪更大的矩阵并删除任何元素。IE。在上述情况下，您将拥有：

```
A = [1 2] <- Stays the same because it's smaller

B = [3 4] <- Cropped to same size as A. 
```

现在我可以用一堆无聊的语句轻松地做到这一点，`if`但`else`我希望一个巫师或女巫能帮助我发现神奇的 matlab 语法，它可以在一行中做到这一点。

假设它们总是 3xN 即。向量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T01:55:00.347

如果大小仅沿第二维不同，则可以像这样裁剪数组：

```
colA = size(A,2);
colB = size(B,2);

A = A(:,1:min(colA,colB))
B = B(:,1:min(colA,colB)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T07:19:39.237

这也应该适用于多暗矩阵，与乔纳斯的回答基本相同。

```
d = min([size(A); size(B)]);
A = A(1:d(1),1:d(2));
B = B(1:d(1),1:d(2)); 
```

我想知道如何将大小矩阵（如 [2 4]）转换为索引，即 [1:2, 1:4]）...