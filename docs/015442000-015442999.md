# StackOverflow 问答 15442000-15442999

# apache - 通配符 SSL 设置。无效的域错误消息

> ID：15442004
> 
> 赞同：0
> 
> 时间：2013-03-15T20:59:21.397
> 
> 标签：apache, ubuntu, ssl

我正在尝试设置通配符 SSL（适用于所有子域）。两个域都可以正常工作：domain.com 和 www.domain.com。但是，当我访问[https://test.domain.com](https://test.domain.com)时，我在浏览器中收到无效的 SSL/域错误消息。知道如何解决这个问题吗？

这是我的虚拟主机设置。我在 Ubuntu/Apache2 上。

```
<VirtualHost *:443>
 SSLEngine On
 SSLCertificateFile /etc/apache2/ssl/*.domain.com.crt
 SSLCertificateKeyFile /etc/apache2/ssl/*.domain.com.key
 SSLCACertificateFile /etc/apache2/ssl/*.domain.com.bundle.crt

 ServerName domain.com
 ServerAlias domain.com
 ServerAlias *.domain.com
 DocumentRoot /var/www/domain.com/public_html/
 ErrorLog /var/www/domain.com/logs/error.log
</VirtualHost>

<VirtualHost *:80>
 ServerName domain.com
 ServerAlias domain.com
 ServerAlias *.domain.com
 DocumentRoot /var/www/domain.com/public_html/
 ErrorLog /var/www/domain.com/logs/error.log
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:40:22.693

发现问题！我不得不购买通配符 SSL。呸！

# c++ - 如何在 Qt 项目视图中为单个单元格设置委托？

> ID：15442009
> 
> 赞同：9
> 
> 时间：2013-03-15T20:59:27.363
> 
> 标签：c++, qt, model-view-controller, delegates

这个遗漏相当令人困惑——但在 Qt 的[QAbstractItemView](http://qt-project.org/doc/qt-5.0/qtwidgets/qabstractitemview.html#setItemDelegate)类中，可以使用这些方法将[QAbstractItemDelegate](http://qt-project.org/doc/qt-5.0/qtwidgets/qabstractitemdelegate.html)（即[QItemDelegate](http://qt-project.org/doc/qt-5.0/qtwidgets/qitemdelegate.html)或[QStyledItemDelegate](http://qt-project.org/doc/qt-5.0/qtwidgets/qstyleditemdelegate.html)）设置为整个视图、单行或单列`setItemDelegate*`。此外，可以查询单个单元格的项目委托`QAbstractItemView::itemDelegate(const QModelIndex&)`，以及行、列的委托。和整个视图。但似乎没有办法将项目委托*设置*为单个单元格。我错过了什么吗？这应该是什么原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T21:06:46.100

不，您不能只为一个单元格或一列设置项目委托，但您可以轻松地为整个小部件设置项目委托，并选择要在哪个单元格、列或行中使用自定义绘画或其他内容。

例如

```
void WidgetDelegate::paint(QPainter *painter, const QStyleOptionViewItem &option,
                       const QModelIndex &index) const
{
    if (index.column() == 1) 
    {
        // ohh it's my column
        // better do something creative
    } 
    else // it's just a common column. Live it in default way
        QItemDelegate::paint(painter, option, index);
} 
```

[你可以在这里](http://qt-project.org/doc/qt-5.0/qtwidgets/qabstractitemdelegate.html)找到更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-14T15:10:55.293

我建议重新实现 createEditor 函数：

```
QWidget * WidgetDelegate::createEditor(
        QWidget *parent,
        const QStyleOptionViewItem &,
        const QModelIndex &index) const
{
    QWidget *widget = 0;
    if (index.isValid() && index.column() < factories.size())
    {
        widget = factories[index.column()]->createEditor(index.data(Qt::EditRole).userType(), parent);
        if (widget)
            widget->setFocusPolicy(Qt::WheelFocus);
    }
    return widget;
} 
```

# javascript - Javascript tabifier 在 Chrome 中不工作，但在 Firefox 上工作正常

> ID：15442014
> 
> 赞同：0
> 
> 时间：2013-03-15T21:00:00.800
> 
> 标签：javascript

我对javascript知之甚少，所以我希望这里有人可以帮助我。问题出现在[http://www.bestfreeandroidapps.com/](http://www.bestfreeandroidapps.com/)如果你看右边有 3 个标签，分别是类别、评论和最近的帖子。当您从 Chrome 中单击它们时，没有任何反应（控制台中没有错误，只是没有），但是在 Firefox 中可以正常工作。

[该主题使用来自http://www.barelyfitz.com/projects/tabber/](http://www.barelyfitz.com/projects/tabber/)的脚本调用 Javascript tabifier ，但是我什至将主题上的脚本替换为原始项目中包含的脚本，但仍然无法在 Chrome 上运行。有谁知道可能出了什么问题以及为什么会发生这种情况？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:04:58.910

有用。我认为它被浏览器缓存了，我最近遇到了类似的问题。重启浏览器/电脑！

# html - 尝试在导航栏后面使用重复图像切片和另一个背景图像

> ID：15442018
> 
> 赞同：0
> 
> 时间：2013-03-15T21:00:13.363
> 
> 标签：html, css

我正在尝试创建一个具有可动态调整大小的背景图像的网站（我已经实现了），但我的徽标和导航链接也位于页面顶部的黑色到透明渐变图像区域中（也成功创建了这个） .

我遇到的问题是，较大的动态背景图像超过了在我的徽标和导航后面创建区域的背景图像，但没有覆盖徽标或文本本身。以下是我目前拥有的 HTML 和 CSS。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Michael Hunter Photography</title>
<link rel="stylesheet" type="text/css" href="portfolio-style1.css">
</head>

<body>
<div id="header">
    <div id="logo"><img src="logo1-trans1.png" /></div>
    <div id="navbar">
    <a href="home.html">Home |</a>
    <a href="portfolio.html"> Portfolio |</a>
    <a href="#"> Blog |</a>
    <a href="about.html"> About |</a>
    <a href="contact.html"> Contact</a>
    </div>
</div>
</body>
</html> 
```

我的 CSS

```
@charset "UTF-8";
/* CSS Document */

@font-face
{
    font-family:"BankGothic Md BT Medium";
    src: url('bankgthd.ttf')
    ,url('bankgthd.eot');/*IE9*/
}

body{
    background-image:url(header-gradient.png);
    background-repeat: repeat-x;
    position:static;
    z-index:1;
}
#logo {
    float:left;
    position:relative;
    left:20px;
    top:20px;
}
#navbar {
    font-family:"BankGothic Md BT Medium";
    font-size:23px;
    color:#FFF;
    float:right;
    position:relative;
    top:75px;
    right:15px;
}

#navbar a {
    color:white;
    text-decoration:none;
}
html {
    background: url(bg1.jpg) no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size:cover;
    -o-background-size:cover;
    background-size:cover;
} 
```

“html {”部分是我为我的动态背景图像工作的代码，也是我唯一可以按照我想要的方式工作的 vanilla CSS，所以我真的不想搞砸用它。在顶部（基本上作为标题）我的导航和徽标后面使用的渐变图像位于 CSS 中的“正文”下方。如果您还没有弄清楚，目标是使用渐变优雅地过渡到主背景图像，但它没有按预期工作。我尝试将主背景图像定位到 z-index 它，但这搞砸了并且无法正常工作。

我知道我错过了一个可能非常明显的步骤，但我无法弄清楚。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:47:24.697

您想将背景放在正文标签中，将标题图像放在标题标签中。不是身体标签。它需要一个高度。

```
#header{
background:url(header.jpg);
height:200px;
} 
```

据我了解，我认为这就是你想要做的

[http://jsfiddle.net/x8Kff/](http://jsfiddle.net/x8Kff/)

希望能帮助到你。

# xml - 如何在eclipse中使用xml实体引用

> ID：15442021
> 
> 赞同：0
> 
> 时间：2013-03-15T21:00:36.990
> 
> 标签：xml, eclipse, entity

我正在尝试在 Eclipse Indigo 的工作区中使用 XML 实体引用，但无法按预期引用 xml 文件。我正在使用以下语法：

```
<?xml version="1.0"?>
<!DOCTYPE doc 
[
 <!ENTITY planName SYSTEM "/planName.xml">
 <!-- planName.xml is in the same folder as the current xml i.e. C:\Users\Workspaces\projectA -->
]>

  <commands>    
    <name>&planName;</name> 
  </commands> 
```

当我尝试使用此文件时，出现以下错误：

```
 java.io.FileNotFoundException: C:\Users\Desktop\Softwares\IndigoEclipse\planName.xml (The system cannot find the file specified) 
```

另一方面，如果我给出 xml 文件的绝对路径，我可以按预期使用该文件

```
<?xml version="1.0"?>
<!DOCTYPE doc 
[
 <!ENTITY planName SYSTEM "C:\Users\Workspaces\projectA\planName.xml">
 <!-- absolute path of workspace executes normally -->
]>

  <commands>    
    <name>&planName;</name> 
  </commands> 
```

我可以在不给出 Eclipse 中的绝对路径的情况下引用一个实体吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:37:17.297

尝试从`SYSTEM "/planName.xml"`.

例子：

```
<!DOCTYPE doc [
<!ENTITY planName SYSTEM "planName.xml">
<!-- planName.xml is in the same folder as the current xml i.e. C:\Users\Workspaces\projectA -->
]>
<commands>    
  <name>&planName;</name> 
</commands> 
```

# python - 修改 Flask-Restless 的 JSON 响应

> ID：15442025
> 
> 赞同：8
> 
> 时间：2013-03-15T21:00:50.277
> 
> 标签：python, ember.js, flask, flask-restless

我正在尝试将 Flask-Restless 与 Ember.js 一起使用，但效果并不好。让我绊倒的是 GET 响应。例如，当我对 Ember.js进行`GET`请求时，期望：`/api/people`

```
{ 
    people: [
        { id: 1, name: "Yehuda Katz" }
    ] 
} 
```

但 Flask-Restless 的回应是：

```
{
    "total_pages": 1, 
    "objects": [
        { "id": 1, "name": "Yahuda Katz" }
    ], 
    "num_results": 1, 
    "page": 1
} 
```

如何更改 Flask-Restless 的响应以符合 Ember.js 的要求？我有这种感觉，它可能在后处理器功能中，但我不确定如何实现它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T21:46:09.523

Flask 扩展具有[非常易读的源代码](https://github.com/jfinkels/flask-restless/blob/master/flask_restless/views.py#L843)。您可以制作`GET_MANY`后处理器：

```
def pagination_remover(results):
    return {'people': results['objects']} if 'page' in results else results

manager.create_api(
    ...,
    postprocessors={
        'GET_MANY': [pagination_remover]
    }
) 
```

我还没有测试过，但它应该可以工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-03T21:21:02.710

当时接受的答案是正确的。然而，Flask-Restless 中的后置和预处理器工作已经改变。[根据文档](https://flask-restless.readthedocs.org/en/latest/customizing.html#request-preprocessors-and-postprocessors)：

> 每种请求的预处理器和后处理器都接受不同的参数，但它们都没有返回值（更具体地说，任何返回值都被忽略）。预处理器和后处理器就地修改它们的参数。

所以现在在我的后处理器中，我只是删除了任何我不想要的键。例如：

```
def api_post_get_many(result=None, **kw):
    for key in result.keys():
        if key != 'objects':
            del result[key] 
```

# wpf - WPF 组合框显示问题

> ID：15442035
> 
> 赞同：1
> 
> 时间：2013-03-15T21:02:02.313
> 
> 标签：wpf, data-binding, mvvm, binding, wpf-controls

我有一个绑定到用户对象集合的组合框。组合的 DisplayMemberPath 设置为“名称”，这是用户对象的属性。我还有一个文本框，它绑定到 ComboBox.SelectedItem 绑定的同一个对象。因此，当我更改 TextBox 中的文本时，我的更改会立即反映在组合中。只要 Name 属性未设置为空白，这正是我想要发生的。在这种情况下，我想替换一段通用文本，例如“{请提供姓名}”。不幸的是，我不知道该怎么做，所以在这方面的任何帮助将不胜感激！

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow"
    Width="340"
    SizeToContent="Height"
    WindowStartupLocation="CenterScreen"
    ResizeMode="NoResize">
<StackPanel>
    <TextBlock Text="ComboBox:" />
    <ComboBox SelectedItem="{Binding SelectedUser}"
              DisplayMemberPath="Name"
              ItemsSource="{Binding Users}" />
    <TextBlock Text="TextBox:"
               Margin="0,8,0,0" />
    <TextBox Text="{Binding SelectedUser.Name, UpdateSourceTrigger=PropertyChanged}" />
</StackPanel> 
```

```
public class ViewModel : INotifyPropertyChanged
{
    private List<User> users;
    private User selectedUser;

    public event PropertyChangedEventHandler PropertyChanged;

    public List<User> Users
    {
        get
        {
            return users;
        }
        set
        {
            if (users == value)
                return;

            users = value;

            RaisePropertyChanged("Users");
        }
    }

    public User SelectedUser
    {
        get
        {
            return selectedUser;
        }
        set
        {
            if (selectedUser == value)
                return;

            selectedUser = value;

            RaisePropertyChanged("SelectedUser");
        }
    }

    private void RaisePropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;

        if (handler != null)
            handler(this, new PropertyChangedEventArgs(propertyName));
    }
}

public class User
{
    public string Name { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:11:06.590

看看这个[`post`](https://stackoverflow.com/questions/1426050/how-to-display-default-text-select-team-in-combo-box-on-pageload-in-wpf)。有几个答案可能满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:25:29.493

您可以使用 TargetNullValue

```
<StackPanel>
    <TextBlock Text="ComboBox:" />
    <ComboBox SelectedItem="{Binding SelectedUser}" ItemsSource="{Binding Users}" >
        <ComboBox.ItemTemplate>
            <DataTemplate>
                <TextBlock 
                    Text="{Binding Name, TargetNullValue='Enter some text'}"/>
            </DataTemplate>
        </ComboBox.ItemTemplate>
    </ComboBox>
    <TextBlock Text="TextBox:"
        Margin="0,8,0,0" />
    <TextBox Text=
             "{Binding SelectedUser.Name, UpdateSourceTrigger=PropertyChanged}" />
</StackPanel> 
```

并将空名称转换为 null。

```
public class User 
{
    private string name;

    public string Name
    {
        get
        {
            return this.name;
        }
        set
        {
            this.name = (string.IsNullOrEmpty(value)) ? null : value;

            // probably best raise property changed here
        }
    }
} 
```

# python - Python Raspberry PI PyGame 音频错误 - 只需点击一下

> ID：15442037
> 
> 赞同：1
> 
> 时间：2013-03-15T21:02:11.463
> 
> 标签：python, audio, pygame, raspberry-pi, alsa

全新的 Python 和使用 Raspberry Pi

尝试与 Arduino 进行非常简单的连接，并在按下按钮时使用 pyGame 播放声音。

不幸的是，我无法让 .wav 文件真正播放 - 我只是听到咔哒声。我假设它是采样率，所以我检查了音频文件并将 pygame.mixer.pre_init 设置为相同的采样率，但它仍然不起作用。

我安装了 alsa-utils 和 mpg321 并将 pi 设置为通过 hdmi 输出音频

我可以使用 aplay 播放 mp3 文件。我也可以使用 os.pyhton 获取 pyhton。播放 mp3

使用 pyGame 我无法加载 mp3，因为它给出了一个错误，它找不到文件使用 pygame.sound 它确实运行脚本并收到按钮按下，但我得到的只是点击。

我会得到 pi 并准确地发布错误代码，但这里是 python

```
# playSounds.py

import pygame.mixer
from time import sleep
from sys import exit
import serial

pygame.mixer.init(44000, -16, 1, 1024) 

soundA = pygame.mixer.Sound("/1.wav") 
soundB = pygame.mixer.Sound("/2.wav")
soundC = pygame.mixer.Sound("/3.wav")

soundChannelA = pygame.mixer.Channel(1) 
soundChannelB = pygame.mixer.Channel(2)
soundChannelC = pygame.mixer.Channel(3)

print "Go . Sampler Ready."
serialFromArduino = serial.Serial("/dev/ttyACM0",9600)
serialFromArduino.flush()

while True:
try:
    val = ord(serialFromArduino.read())
    print(val)
    if (val == 2): 
        soundChannelA.play(soundA) 
    if (val == 3):
        soundChannelB.play(soundB)
    if (val == 4):
        soundChannelC.play(soundC)
    val = 0
    sleep(.01)
except KeyboardInterrupt: 
    exit() 
```

该代码最初来自一个制作帖子。就像我说它运行，接收 arduino，但音频只是一个点击。我尝试使用 .ogg 文件，但它们没有任何区别。

感谢任何帮助

# java - 在 JFreeChart 中反转 X 轴数字标签

> ID：15442039
> 
> 赞同：0
> 
> 时间：2013-03-15T21:02:16.887
> 
> 标签：java, charts, jfreechart

我刚刚开始使用 JFreeChart，所以这可能是一个幼稚的问题。

我有一个要求，我想在生成图表（XYLineChart）时反转 X 轴标签的顺序。有人可以告诉我如何使用 JFreeChart API 来完成吗？

例如，到目前为止，我的 X 轴标签是按升序排列的：{1,2,3,4,5} 说。我希望 X 轴标签按降序显示：{5,4,3,2,1}。不用说，它在显示时也应该相应地改变相应的Y值。

谢谢。

# jquery - Should I override jQuery UI custom stylesheet?

> ID：15442043
> 
> 赞同：1
> 
> 时间：2013-03-15T21:02:26.013
> 
> 标签：jquery, css, jquery-ui

I used the jQuery Theme Roller to create a theme.

When I implement a widget, such as the accordion, I see that the font sizes are out of step with my main content. What's the correct way to deal with this?

The two options I see are:

1.  Modify the jQuery custom.css. The downside of this is that if I regenerate a theme (with the theme roller), I'll overwrite my changes.

2.  Override the jQuery settings with my own style sheet. Can't see any problems with this, except that I would be introducing jQuery's selectors into my own style sheets.

So, what's the best way to go about it?

Also, do you know of any good tutorials / how-to's on the jQuery Theme's? Particularly styling? (I don't seem to have any difficulty getting widgets, etc, to work, but things like changing icons on state changes can be a problem...)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:05:16.833

I would create your own sheet. The own real downside is you will have to download 2 stylesheets instead of 1 when rendering the page. Anything you want to change would be easiest to do in your own stylesheet. You can always "merge" and minify them later.

# javascript - NS_ERROR_FAILURE : Firefox 失败

> ID：15442046
> 
> 赞同：21
> 
> 时间：2013-03-15T21:02:34.867
> 
> 标签：javascript, ajax, firefox, xmlhttprequest, xss

我正在使用 javascript 的 XMLHttpRequest 对象向另一个页面发送请求（不在同一服务器或域名上）我在 firefox 中收到 ns_error_failure 错误，但 Javascript 在 Google Chrome 中有效，在网上搜索后似乎是因为 firefox 的 XSS政策。不允许跨域请求。

有没有办法解决这个问题并让 JS 在 chrome 和 Firefox 中运行？

* * *

请随时询问您认为需要的其他详细信息！

* * *

这是我正在使用的代码。

```
"use strict";

function showFixed(username)
{
    console.log("Entered script");

    var url = 'https://api-dev.bugzilla.mozilla.org/latest/bug'
        + '?quicksearch='
        + encodeURIComponent('FIXED @'+username);
    displayBug(url);
}

function showPending(username)
{
    console.log("Entered script");

    var url = 'https://api-dev.bugzilla.mozilla.org/latest/bug'
        + '?quicksearch='
        + encodeURIComponent('@'+username);
    displayBug(url);
}

function showCC(username)
{
    console.log("Entered script");

    var url = 'https://api-dev.bugzilla.mozilla.org/latest/bug'
        + '?quicksearch='
        + encodeURIComponent('cc:'+username);
    displayBug(url);
}

function displayBug(url)
{
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open("GET",url,false);
    xmlhttp.send();
    var text = xmlhttp.responseText;

    var json = JSON.parse(text);

    for(var i=0;i<json.bugs.length;i++)
    {
        var tempRow = document.createElement('tr');

        var tempId = document.createElement('td');
        tempId.innerHTML = '<a href=\'https://bugzilla.mozilla.org/show_bug.cgi?id=' + json.bugs[i].id + '\'>'+ json.bugs[i].id + '</a>';
        var tempCreator = document.createElement('td');
        tempCreator.innerHTML = json.bugs[i].creator.real_name;
        var tempShortDesc = document.createElement('td');
        tempShortDesc.innerHTML = json.bugs[i].summary;
        var tempComponent = document.createElement('td');
        tempComponent.innerHTML = json.bugs[i].component;
        var tempAssignee = document.createElement('td');
        tempAssignee.innerHTML = json.bugs[i].assigned_to.real_name;
        var tempWhiteBoard = document.createElement('td');
        tempWhiteBoard.innerHTML = json.bugs[i].whiteboard;
        var tempBugStatus = document.createElement('td');
        tempBugStatus.innerHTML = json.bugs[i].status;
        var tempResolution = document.createElement('td');
        tempResolution.innerHTML = json.bugs[i].resolution;
        var tempLastChange = document.createElement('td');
        tempLastChange.innerHTML = json.bugs[i].last_change_time;

        tempRow.appendChild(tempId);
        tempRow.appendChild(tempAssignee);
        tempRow.appendChild(tempCreator);
        tempRow.appendChild(tempBugStatus);
        tempRow.appendChild(tempShortDesc);
        tempRow.appendChild(tempLastChange);
        document.getElementById('bugs-table-tbody').appendChild(tempRow);
    }

    document.getElementById('main').innerHTML = '';
}

function wrapper()
{
    var waitString = "Please wait while bug list is loaded..."
    document.getElementById('main').innerHTML = waitString; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T20:49:42.097

如果您能够使用 jQuery，我建议您查看 JSONP ( [http://www.jquery4u.com/json/jsonp-examples/](http://www.jquery4u.com/json/jsonp-examples/) )，这有效地允许跨域 ajax。

# python - QProgressDialog 在最短持续时间之前不是模态的

> ID：15442047
> 
> 赞同：1
> 
> 时间：2013-03-15T21:02:42.680
> 
> 标签：python, qt, pyside

我有一种情况，我正在异步交换数据以响应 python PySide GUI 中的按钮按下。我的代码在不同的线程中发送数据（并通过 Qt 信号和插槽交换数据以确保线程安全），并且一切正常。

问题是我不想双击工具栏按钮来生成两次传输。我希望在传输过程中阻止主窗口。QProgressDialog 看起来正是我想要的，特别是因为如果传输速度很快，它就不会显示出来。

我写了一些代码来利用它：

```
def startUSBProgress(self, message, operation):
    title = self.tr("Transferring USB Data")
    progress = QtGui.QProgressDialog(message, "", 0, 1, self)
    progress.setWindowModality(QtCore.Qt.WindowModal)
    progress.setCancelButton(None)
    progress.setMinimumDuration(500)  # half second
    progress.setWindowTitle(title)

    operation.completed.connect(progress.reset)
    operation.completed.connect(progress.deleteLater)
    operation.error.connect(progress.reset)
    operation.error.connect(progress.deleteLater)

    progress.setValue(0) 
```

而且我在我所有的转移中都用人工 1 秒的睡眠来测试它。没有错误，但是在500 毫秒延迟过去之前进度对话框*不是模态的（并且进度对话框变得可见），所以它实际上并没有解决我的问题。*仍然可以按下多个按钮。对话框在最短持续时间之后是模态的，而不是之前。

我不确定这是错误还是预期功能。我找不到任何关于它的讨论。无论如何，这对我的应用程序来说是不受欢迎的行为。

我不想将 minimumDelay 设置为 0，因为 99.9% 的时间交易都很快，而且有对话框提示看起来不太好。

有没有办法解决这个问题？我愿意接受稍微有点骇人听闻的选项，例如暂时抑制鼠标和键盘事件。请注意，事件循环需要运行，因为这就是处理完成信号的方式。

我的开发环境（我看到这个问题）是 Windows 7，但我的应用程序最终将是跨平台的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:28:35.387

如果现在有 Qt/Python 细节，我想

```
progress.show() 
```

应该立即显示模态对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:37:44.223

我找到了一种使用 Qt 事件过滤器来实现我正在寻找的东西的方法。

取自[https://stackoverflow.com/a/2017400/1011276的想法](https://stackoverflow.com/a/2017400/1011276)

过滤类：

```
class UserEventsFilter(QtCore.QObject):
    """
    Reference: https://stackoverflow.com/a/2017400/1011276
    """
    def __init__(self, parent=None):
        super().__init__(parent)

        self.filterEnabled = False

    @QtCore.Slot()
    def enableFilter(self):
        self.filterEnabled = True

    @QtCore.Slot()
    def disableFilter(self):
        self.filterEnabled = False

    def eventFilter(self, obj, event):
        if self.filterEnabled:
            t = event.type()
            if (t == QtCore.QEvent.KeyPress or
                t == QtCore.QEvent.KeyRelease or 
                t == QtCore.QEvent.MouseButtonPress or
                t == QtCore.QEvent.MouseButtonDblClick or
                t == QtCore.QEvent.MouseMove or
                t == QtCore.QEvent.Enter or
                t == QtCore.QEvent.HoverEnter or
                t == QtCore.QEvent.HoverLeave or
                t == QtCore.QEvent.HoverMove or
                t == QtCore.QEvent.DragEnter or
                t == QtCore.QEvent.DragLeave or
                t == QtCore.QEvent.DragMove or
                t == QtCore.QEvent.Drop):
                return True
        return QtCore.QObject.eventFilter(self, obj, event) 
```

初始化代码（在主窗口中`__init__`）：

```
self.userEventFilter = UserEventsFilter(self)
app = QtCore.QCoreApplication.instance()
app.installEventFilter(self.userEventFilter) 
```

更新使用代码：

```
def startUSBProgress(self, message, operation):
    title = self.tr("Transferring USB Data")
    progress = QtGui.QProgressDialog(message, "", 0, 1, self)

    progress.setWindowModality(QtCore.Qt.WindowModal)
    progress.setCancelButton(None)
    progress.setMinimumDuration(500)  # half second
    progress.setWindowTitle(title)

    operation.completed.connect(progress.reset)
    operation.completed.connect(progress.deleteLater)
    operation.completed.connect(self.userEventFilter.disableFilter)
    operation.error.connect(progress.reset)
    operation.error.connect(progress.deleteLater)
    operation.error.connect(self.userEventFilter.disableFilter)

    self.userEventFilter.enableFilter()
    progress.setValue(0) 
```

# sql - SQL Server 选择总和的最大值

> ID：15442048
> 
> 赞同：2
> 
> 时间：2013-03-15T21:02:45.490
> 
> 标签：sql, sql-server-2008

当我运行这个选择

```
SELECT      
     D.Product_ID p_id
    ,D.Green_Sheet_ID gs_id
    ,SUM (P.prepress_amt) amt

   FROM  GS_Prepress AS P INNER JOIN
                      GS_Data AS D ON P.green_sheet_id = D.Green_Sheet_ID

   WHERE 
    Product_ID ='194456'  
   GROUP BY D.Product_ID, D.Green_Sheet_ID 
```

我明白这个...

```
|p_id   | gs_id |amt      |
|-------|-------|---------|
|194456 | 5721  |33524.00 |
|194456 | 7484  |47524.00 | 
```

我只想选择具有 max(gs_is) 的行，所以我只得到这个结果？

```
|p_id   | gs_id |amt      |
|-------|-------|---------|
|194456 | 7484  |47524.00 | 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T21:04:39.690

订购结果并采取`TOP(1)`：

```
SELECT TOP(1)
    D.Product_ID p_id,
    D.Green_Sheet_ID gs_id,
    SUM (P.prepress_amt) amt
FROM
    GS_Prepress AS P
INNER JOIN
    GS_Data AS D ON P.green_sheet_id = D.Green_Sheet_ID
WHERE 
    Product_ID ='194456'  
GROUP BY
    D.Product_ID, D.Green_Sheet_ID
ORDER BY
    gs_id DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T21:06:48.220

如果您打算使用此查询来提取多个 Product_ID，那么这只会返回相关结果。如果您的最终结果只是返回一项，请使用 Marcin 的答案。

```
SELECT D.Product_ID p_id
, D.Green_Sheet_ID gs_id
,SUM (P.prepress_amt) amt
FROM  GS_Prepress AS P 
   INNER JOIN GS_Data AS D ON P.green_sheet_id = D.Green_Sheet_ID
   INNER JOIN (SELECT MAX(Green_Sheet_ID) AS gs_ID
               FROM GS_Date
               GROUP BY Product_ID) G ON G.Gs_ID = D.Green_Sheet_ID

WHERE Product_ID ='194456'  
GROUP BY D.Product_ID, D.Green_Sheet_ID 
```

# php - 由于 if 语句，数组未获取所有数据

> ID：15442049
> 
> 赞同：0
> 
> 时间：2013-03-15T21:02:49.537
> 
> 标签：php, arrays, if-statement, while-loop

我相信我的代码没有完全工作，因为我在 if 语句中有 while 循环，并且只允许循环运行一次。该代码允许管理员查看订单并访问有关该订单的所有信息。但是，使用这样的代码，即使订单包含 2 个或更多，它也只能查看一个产品。下面是我的 php 代码块

```
if (isset($_GET['orderid'])){
$targetID = $_GET['orderid'];
//query to find the item
$products_ordered = "";
$sql = mysql_query("SELECT * FROM `transactions` WHERE `order_id` ='$targetID' LIMIT 1");
$orderCount = mysql_num_rows($sql);

while ($transactions = mysql_fetch_array($sql)) {
    //creating variables from the information
    $order_id = $transactions["order_id"];
    $mem_id = $transactions["mem_id"];
    $OrderDate = $transactions["OrderDate"];
    $ship_phone = $transactions["ship_phone"];
    $ship_address = $transactions["ship_address"];
    $ship_city = $transactions["ship_city"];
    $ship_county = $transactions["ship_county"];
    $ship_postcode = $transactions["ship_postcode"];
    $ship_country = $transactions["ship_country"];

    $order_details = mysql_query("SELECT * FROM `transactionDetails` WHERE `order_id` = $order_id") or die(mysql_error());
    $orderDetailsCount = mysql_num_rows($order_details);
    while ($row = mysql_fetch_array($order_details)) {
        //creating variables from the information
        $order_details_id = $row["Order_details_ID"];
        $order_product_id = $row["Product_ID"];
        $order_product_price = $row["Price"];
        $order_product_quantity = $row["Quantity"];

        $member_details = mysql_query("SELECT * FROM `members` WHERE `mem_id` = $mem_id") or die(mysql_error());
        $memberDetailsCount = mysql_num_rows($member_details);
        while ($row = mysql_fetch_array($member_details)) {
            //creating variables from the information
            $order_mem_fname = $row["mem_first_name"];
            $order_mem_lname = $row["mem_last_name"];

            $product_details = mysql_query("SELECT * FROM `products` WHERE `id` = $order_product_id") or die(mysql_error());
            while ($row1 = mysql_fetch_array($product_details)) {
            //creating variables from the information
            $product_name = $row1["product_name"];

            $products_ordered = "<tr>
            <td width=\"20%\">Product Name</td>
            <td width=\"80%\"><label> $product_name
            </label></td>
            </tr>
            <tr>
            <td width=\"20%\">Quantity</td>
            <td width=\"80%\"><label> $order_product_quantity
            </label></td>
            </tr>
            <tr>
            <td width=\"20%\">Price per Item</td>
            <td width=\"80%\"><label> $order_product_price
            </label></td>
            </tr>";
                }
        }
    }
}

if ($orderCount == 0) {
echo "Sorry, order doesn't exist";
exit();
}
} 
```

这是我的表，其中包含数据

```
<table>
            <tr>
                <td width="20%">Order ID:</td>
                <td width="80%"><label><?php echo $order_id; ?> </label></td>
            </tr>
            <tr>
                <td width="20%">Order Date</td>
                <td width="80%"><label><?php echo $OrderDate; ?> </label></td>
            </tr>
            <tr>
                <td width="20%">First Name</td>
                <td width="80%"><label><?php echo $order_mem_fname; ?> </label></td>
            </tr>
            <tr>
                <td width="20%">Last Name</td>
                <td width="80%"><label><?php echo $order_mem_lname; ?> </label></td>
            </tr>
            <tr>
                <td width="20%">Contact Number</td>
                <td width="80%"><label><?php echo $ship_phone; ?> </label></td>
            </tr>
            <tr>
                <td width="20%">Address</td>
                <td width="80%"><label><?php echo $ship_address; ?> </label></td>
            </tr>
            <tr>
                <td width="20%">City</td>
                <td width="80%"><label><?php echo $ship_city; ?> </label></td>
            </tr>
            <tr>
                <td width="20%">County</td>
                <td width="80%"><label><?php echo $ship_county; ?> </label></td>
            </tr>
            <tr>
                <td width="20%">Post Code</td>
                <td width="80%"><label><?php echo $ship_postcode; ?> </label></td>
            </tr>
            <tr>
                <td width="20%">Country</td>
                <td width="80%"><label><?php echo $ship_country; ?> </label></td>
            </tr>
            <?php echo $products_ordered;?>
        </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:43:10.527

这是一种获取数据的复杂方法，可以通过一些 JOIN 和更少（可能是一个）查询来完成。

您的问题是您在两个级别使用 $row：使用 $order_details 和使用 $member_details。由于每个订单只有一个成员，因此第二个订单行没有更多可检索的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:00:03.000

您将输出保存在一个变量中，下次它通过代码时，它将覆盖原始值。

代替

```
$products_ordered = "<tr> 
```

你应该这样做

```
$products_ordered .= "<tr> // notice the dot to concatenate the original html with the new html 
```

如果您的第一个查询返回 2 个结果并且您期望 2 个产品，这意味着主循环中的每个 while 循环必须至少循环一次。

打印每个计数值并确保第一个显示`2`和其他显示`1`。如果它并不总是显示`1`，则意味着您的数据库缺少数据。

您还可以通过使用[SQL JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)来避免此问题。这样，您可以直接使用 SQL 客户端或 phpmyadmin 测试最终输出。

此外，您的代码对[SQL 注入](http://en.wikipedia.org/wiki/Sql_injection)是开放的，因为您使用`mysql_*`的是函数并且查询参数未经过[清理](http://en.wikipedia.org/wiki/Data_sanitization#Preventing_code_injection)。相反，您应该使用[MySQLi](http://us.php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)。作为临时解决方案，您可以将类型转换`$_GET['orderid']`为整数或检查是否`$_GET['orderid']`为整数。

# asp.net - 使用 Breezejs 捕获 SaveChanges() 上的外键异常

> ID：15442051
> 
> 赞同：2
> 
> 时间：2013-03-15T21:03:06.360
> 
> 标签：asp.net, asp.net-web-api, breeze, single-page-application, durandal

我在 ASP.NET MVC 4 SPA 和带有 EF 5.0 数据库的 durandal 项目中使用了微风，除了某些情况外，一切正常。

如果我在 javascript 和 SPA 方面看起来有点菜鸟，请原谅我。我边走边学。

这是我的 2 个 EF 模型

项目.cs

```
public partial class Project
{
        public Project()
        {
            this.Timesheets = new HashSet<Timesheet>();
        }

        public int ProjectId { get; set; }
        public Nullable<int> ClientId { get; set; }
        public string ProjectName { get; set; }
        public string ProjectDescription { get; set; }
        public Nullable<decimal> ProjectRate { get; set; }

        public virtual Client Client { get; set; }
        public virtual ICollection<Timesheet> Timesheets { get; set; }
} 
```

客户端.cs

```
public partial class Client
{
    public Client()
    {
        this.Projects = new HashSet<Project>();
        this.Timesheets = new HashSet<Timesheet>();
    }

    public int ClientId { get; set; }
    public string ClientNo { get; set; }
    public string ClientName { get; set; }
    public string CompanyName { get; set; }
    public string AddressLine1 { get; set; }
    public string AddressLine2 { get; set; }
    public string City { get; set; }
    public string State { get; set; }
    public string Zip { get; set; }
    public string County { get; set; }
    public Nullable<decimal> ClientRate { get; set; }
    public string EmailAddress { get; set; }

    public virtual ICollection<Project> Projects { get; set; }
    public virtual ICollection<Timesheet> Timesheets { get; set; }
} 
```

我的客户视图模型的摘录

```
function deleteClient(model) {
    app.showMessage('Are you sure you want to DELETE this record?', 'Delete a Record', ['Yes', 'No'])
   .then(function (dialogresult) {
       if (dialogresult == "Yes") {
           models.remove(model);
           model.entityAspect.setDeleted();
           return saveRecord(model);
       }
   });
};

function saveRecord(model) {
    return repository.saveEntity(model)
    .fail(handleFailed);

    function handleFailed(error) {
        var err = "Error retrieving Clients : " + error.message;
        error(err);
        logger.error(err, null, null, true);
        return;
    }
}; 
```

摘自repository.js（数据上下文）

```
function saveEntity(masterEntity) {
    return manager.saveChanges().fail(saveFailed);

    function saveFailed(error) {
            logger.error("Error saving : " + error.message, null, null, true);
    }
} 
```

这是我的 ProjectBillingController.cs 的摘录

```
 [HttpPost]
    public SaveResult SaveChanges(JObject saveBundle)
    {
        return _contextProvider.SaveChanges(saveBundle);
    } 
```

这是我的场景，

我有一个对客户“ABC”的引用的项目“P1”。如果我尝试删除客户端“ABC”，微风会在我的 WEBAPI 控制器“ProjectBillingController.cs”的 SaveChanges 内引发异常。

我知道在 SQL 世界中，这应该是预期的错误。

但我的问题是...

*   我可以在客户端到达服务器“ProjectBillingController.cs”之前捕获此约束错误吗？
*   我认为解决此问题的唯一方法是进行另一个查询，以查看该客户端的 Project 实体中是否有任何行，如果有，则停止删除，否则继续删除。还有另一种方法可以做到这一点吗？
*   我应该在我的视图模型或数据内容（存储库）中编写这个“验证逻辑”吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:35:39.240

在Project的表属性上，您应该与Client有FK关系吧？在此关系上，删除规则应设置为 CASCADE（注意，当您删除客户时，这将删除客户的所有相关项目）。

所以，一步一步： 1\. 在 Visual Studio 中，检查服务器资源管理器 2\. 右键单击​​表“项目” 3\. 选择“表属性”

检查我提到的关于删除规则的内容，并相应地进行更改。

蒂亚戈

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T23:31:55.693

我不相信有一种方法可以在客户端上检测到删除父级应该级联删除到任何与子级相关的实体。在调用服务器之前，您无法捕获“错误”。您可以在客户端进行补偿......如下所述。

我想我更喜欢 Tiago 的建议，即您将数据库（和/或 EF）配置为自动级联删除。

如果这不可能，您可以在客户端或服务器上以编程方式处理它。您可以下载子实体（或仅它们的密钥）并在删除父实体时在客户端上删除它们。或者，您可以在控制器中的服务器上使用相同的方法（或者，更好的是，在服务器上的辅助类中）。这些是有时可能需要的更繁琐的替代方案。

如果您在客户端编写逻辑，请在您的“数据上下文”中进行。这不是 ViewModel 关心的问题。

FWIW，我不会称之为“验证逻辑”。您没有验证数据。验证逻辑从不改变数据；它只能宣布数据有效或无效。

您正在根据业务模型规则对数据进行操作，该规则说在删除父实体时必须删除此父实体类型实例的子实体。这条规则本质上没有什么明显的。从模式的角度来看，“颜色”是产品类型的“父级”，因为它与产品具有一对多的关系。但是，如果我删除了“红色”颜色，我不希望我的所有红色产品都被自动删除。因为级联删除本质上是危险的，所以您必须不遗余力地配置服务器组件以支持它。

删除是一件令人讨厌的事情。就个人而言，如果可以的话，我会避免在我的应用程序中删除，而是使用某种形式的软删除。我承认这并不总是一种选择。

# visual-studio-2010 - 尝试在 VS 2010 中安装 Ajax Control Toolkit 时出现 AppDomainManager 错误

> ID：15442053
> 
> 赞同：0
> 
> 时间：2013-03-15T21:03:26.187
> 
> 标签：visual-studio-2010, ajaxcontroltoolkit

我正在尝试在 VS 2010 中将 Ajax Control Toolkit v.NET35 添加到我的工具箱中。导航到 AjaxControlToolkit.dll 后，我收到一个弹出窗口，内容为“AppDomain 的安全状态已由配置的 AppDomainManager 修改NoSecurityChanges 标志。”

我以管理员身份运行 VS2010，并且添加了这些行；

```
<NetFx40_LegacySecurityPolicy enabled="true"/>
<legacyCasPolicy enabled="true" /> 
```

我的 devenv.exe.config 和 web.config 文件，但无济于事。

我搜索并发现不少人遇到此问题，但没有 100% 有效的解决方案。

其他人解决了这个问题吗？

TIA 迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:06:15.460

尝试登录 DX 帐户并升级您的 2008.3 版本的修补程序。这是为人们修复的：[Visual Studio 2010 中的旧版安全策略和 COM 参考](https://stackoverflow.com/questions/3697421/legacy-security-policy-in-visual-studio-2010-and-com-references)

# uploadify - 上传上传

> ID：15442059
> 
> 赞同：0
> 
> 时间：2013-03-15T21:03:45.067
> 
> 标签：uploadify

我要上传图片时出现问题，它上传的图片不超过3 MB，我找到了php.ini文件并根据需要更改了所有需要的变量，我的页面上现在还有另一个ajax文件上传脚本，它工作正常，最多上传 40 MB，所以问题肯定不是我的 php.ini，我应该更改任何闪存配置吗？我在我的脚本中放置了 fileSizeLimit 10 mb，谢谢 :)

```
<?php $timestamp = time();?>
    $(function() {
        $('#file_upload').uploadify({
            'formData'     : {
                'timestamp' : '<?php echo $timestamp;?>',
                'token'     : '<?php echo md5('unique_salt' . $timestamp);?>'
            },
            'swf'      : 'uploadify.swf',
            'uploader' : 'uploadify.php',
            'sizeLimit'   : 10120*10120
        });
    }); 
```

# string - 使用 Unicode Delphi 调用 DLL 时出错

> ID：15442062
> 
> 赞同：2
> 
> 时间：2013-03-15T21:03:56.503
> 
> 标签：string, delphi, dll, unicode, parameter-passing

我有一个带有这个**函数签名**的 DLL ：

```
function KP_RecuperarDadosFabricante(EnderecoIp, ChaveAcesso, 
  Porta: string; Return: PAnsiChar): Integer; stdcall; external 'Key.dll'; 
```

这是 dll 手册中的示例 VB.NET 代码：

```
Dim ret As Integer 
Dim ptrStr As IntPtr 
Dim DadosFab As String 

ptrStr = System.Runtime.InteropServices.Marshal.AllocHGlobal(256) 
ret = KP_RecuperarDadosFabricante("192.168.1.201", "0", "4370", ptrStr) 
DadosFab = System.Runtime.InteropServices.Marshal.PtrToStringAnsi(ptrStr)
System.Runtime.InteropServices.Marshal.FreeHGlobal(ptrStr) 
```

这是我的德尔福代码：

```
procedure TForm1.BitBtn1Click(Sender: TObject);
var
  Return: string;
  pReturn: PAnsiChar;
begin
  GetMem(pReturn, 512);
  FillChar(pReturn^, 512, 0);
  Memo1.Text:='';
  if KP_RecuperarDadosFabricante("192.168.1.201", "0", "4370", pReturn) = 1 then
  begin
    Return := StrPas(pReturn);
    ShowMessage(Return);
  end
  else
  begin
    ShowMessage('Error');
  end;
end; 
```

此代码**在 Delphi 7 中运行良好**，**但在 Delphi XE 中不起作用**。它总是返回“错误”。如何使此代码在**Delphi XE**中工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T21:07:51.707

如果 DLL 是用 Delphi 7 编写的，那么您不能使用 Delphi XE 中的 DLL。即使您更改`string`参数以`AnsiString`使字符大小相同，您仍然会遇到这样一个事实，即字符串的内部结构在这些版本之间的某个地方发生了变化，因此`AnsiString`您从 Delphi XE 代码发送的代码不会看起来像Delphi 7 代码需要一个`AnsiString`外观。

如果您有权更改和重新编译 DLL，则应`PAnsiChar`改为使用参数，就像您在 Windows 上几乎所有其他 DLL 中看到的一样。还要记住将最终`PChar`参数更改为`PAnsiChar`.

* * *

如果 DLL 是用某种非 Delphi 语言编写的，那么您可以简单地通过更改函数签名来修复它。非Delphi语言没有Delphi的`string`类型，所以声明一直是错误的；当它从 Delphi 7 开始工作时，您很幸运。将所有参数更改为具有类型`PAnsiChar`（包括最终参数）；然后它们将与`char*`原始 C 代码中可能具有的类型相匹配。

# curl - Box 2.0 API 下载调用未在 POSTMAN 或 cURL 中显示 dl.boxcloud.com 的下载链接

> ID：15442066
> 
> 赞同：1
> 
> 时间：2013-03-15T21:04:05.770
> 
> 标签：curl, download, box-api

我正在尝试通过 POSTMAN 通过 BOX API 下载图像文件。文件编号为 6917417032

我的代码是： [https](https://api.box.com/2.0/files/6917417032/content) ://api.box.com/2.0/files/6917417032/content 我在标题中指定了授权码

文档状态：返回 如果文件可供下载，则响应将是 302 Found 到 dl.boxcloud.com 上的 URL。客户端需要遵循重定向才能实际下载文件。除非文件 ID 无效或用户无权访问，否则返回文件的原始数据。

我在 POSTMAN 中的回复是“200，OK” dl.boxcloud.com 没有 302。POSTMAN 还会预览空白缩略图。如果我对 word 文档执行相同的操作，POSTMAN 会显示文档中的下一个。我期待的是一个文件下载对话框，或者上一段中描述的 url。

注意，curl 示例代码和响应也不同于描述返回的段落：

方法

获取 /files/{文件 ID}/内容

示例请求

curl -L [https://api.box.com/2.0/files/FILE_ID/content](https://api.box.com/2.0/files/FILE_ID/content) **强文本** -H "授权：Bearer ACCESS_TOKEN"

示例响应我刚刚下载的文本文件的原始文本（所以下载成功）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T20:51:03.500

有两件事混淆了这里发生的事情：

1.  POSTMAN 跟踪 GET 请求的重定向，但不提供有关请求历史记录的信息（例如，如果我说 GET URL1 并被重定向到 GET URL2，它只会告诉我我原来的 GET URL1，即使它提供了 GET URL2 的结果）

2.  文档中的 cURL 示例包含一个 -L 标志，它[告诉 cURL 遵循重定向](http://curl.haxx.se/docs/manual.html)。cURL 不以提供明确要求之外的任何信息而闻名，这是另一种情况。

如果您想查看实际发生的情况，可以通过添加 'v 标志将 cURL 置于详细模式并查看发生的所有情况，例如：

```
curl -v -L https://api.box.com/2.0/files/FILE_ID/content -H "Authorization: Bearer TOKEN"

* About to connect() to api.box.com port 443 (#0)
*   Trying 74.112.184.225...
* connected
* Connected to api.box.com (74.112.184.225) port 443 (#0)
* SSLv3, TLS handshake, Client hello (1):
* SSLv3, TLS handshake, Server hello (2):
* SSLv3, TLS handshake, CERT (11):
* SSLv3, TLS handshake, Server finished (14):
* SSLv3, TLS handshake, Client key exchange (16):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSL connection using RC4-SHA
* Server certificate:
*    subject: serialNumber=ts5jamwzcjWP0oTyh2m74yh0zsB2zyOR; C=US; ST=California; L=Palo Alto; O=Box.net, Inc.; CN=*.box.com
*    start date: 2011-09-27 22:07:27 GMT
*    expire date: 2013-09-29 11:02:11 GMT
*    subjectAltName: api.box.com matched
*    issuer: C=US; O=GeoTrust, Inc.; CN=GeoTrust SSL CA
*    SSL certificate verify ok.
> GET /2.0/files/5620199214/content HTTP/1.1
> User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
> Host: api.box.com
> Accept: */*
> Authorization: Bearer TOKEN
> 
< HTTP/1.1 302 Found
< Server: nginx
< Date: Sun, 17 Mar 2013 20:48:40 GMT
< Content-Type: text/html; charset=utf-8
< Connection: keep-alive
< Cache-control: no-cache, no-store
< Location: https://www.boxcloud.com/bc/1/b4c1b5e872bf843d3ded7bcae5f4f175/2Of-pgQHiFlfW6KldVyHAxtUIEW0l7HoOpi14-VGcxcSnn2CtobCO1UjJZLI58w_oCTNcPMKbUR_gn-ncDkAbw,,/f9a04d69f716d92ceebd848bb9ccded8/
< Content-Length: 0
< 
* Connection #0 to host api.box.com left intact
* Issue another request to this URL: 'https://www.boxcloud.com/bc/1/b4c1b5e872bf843d3ded7bcae5f4f175/2Of-pgQHiFlfW6KldVyHAxtUIEW0l7HoOpi14-VGcxcSnn2CtobCO1UjJZLI58w_oCTNcPMKbUR_gn-ncDkAbw,,/f9a04d69f716d92ceebd848bb9ccded8/'
* About to connect() to www.boxcloud.com port 443 (#1)
*   Trying 74.112.184.74...
* connected
* Connected to www.boxcloud.com (74.112.184.74) port 443 (#1)
* SSLv3, TLS handshake, Client hello (1):
* SSLv3, TLS handshake, Server hello (2):
* SSLv3, TLS handshake, CERT (11):
* SSLv3, TLS handshake, Server finished (14):
* SSLv3, TLS handshake, Client key exchange (16):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSL connection using RC4-SHA
* Server certificate:
*    subject: serialNumber=o2MxwjKDoF9mEZ3YNhBMR/WISRBUXT6b; C=US; ST=California; L=Palo Alto; O=Box, Inc.; CN=*.boxcloud.com
*    start date: 2012-02-27 00:10:39 GMT
*    expire date: 2014-03-01 01:48:45 GMT
*    subjectAltName: www.boxcloud.com matched
*    issuer: C=US; O=GeoTrust, Inc.; CN=GeoTrust SSL CA
*    SSL certificate verify ok.
> GET /bc/1/b4c1b5e872bf843d3ded7bcae5f4f175/2Of-pgQHiFlfW6KldVyHAxtUIEW0l7HoOpi14-VGcxcSnn2CtobCO1UjJZLI58w_oCTNcPMKbUR_gn-ncDkAbw,,/f9a04d69f716d92ceebd848bb9ccded8/ HTTP/1.1
> User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
> Host: www.boxcloud.com
> Accept: */*
> Authorization: Bearer TOKEN
> 
< HTTP/1.1 200 OK
< Server: nginx
< Date: Sun, 17 Mar 2013 20:48:41 GMT
< Content-Type: image/png
< Content-Length: 15039
< Connection: keep-alive
< Cache-control: private
< Accept-Ranges: bytes
< Content-Disposition: attachment;filename="Screenshot_1_14_13_5_33_PM.png";filename*=UTF-8''Screenshot_1_14_13_5_33_PM.png
< X-Content-Type-Options: nosniff
< Accept-Ranges: bytes
< 
?PNG
… 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-06T10:31:19.830

**解决方案**

获取 box.com 文件的直接下载链接

您需要为此使用 Curl

```
<?php

    $token = "<accsess_token>"; 

//setup the request, you can also use CURLOPT_URL
$ch = curl_init('https://api.box.com/2.0/files/FILE_ID_HERE/content');//Enter File id

// Returns the data/output as a string instead of raw data
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

//Set your auth headers
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
   'Content-Type: application/json',
   'Authorization: Bearer ' . $token
   ));

// get stringified data/output. See CURLOPT_RETURNTRANSFER
$response = curl_exec($ch);

// get info about the request
$info = curl_getinfo($ch);
// print_r($info->getBody());
// $header_size = curl_getinfo($ch, CURLINFO_HEADER_SIZE);
// $header = substr($response, 0, $header_size);
// $body = substr($response, $header_size);
echo '<pre>'; print_r($info['redirect_url']);
// close curl resource to free up system resources
curl_close($ch);
?> 
```

# python - 是否可以在 Tornado 模板中向上游传递详细信息？

> ID：15442068
> 
> 赞同：2
> 
> 时间：2013-03-15T21:04:15.330
> 
> 标签：python, tornado

在 Tornado 中，您可以扩展模板，这是一个很棒的功能。然而，有时我想将一个变量传递给我正在扩展的模板。这似乎不会自动工作 - 有没有办法做到这一点？

例子

```
--file.py--
render_string("Foo.html",text="Hello World")

--Foo.html--
{% extends Bar.html %}
    {%block b1 %}
    Hi Mom.
    {% end %}
{% end %}

--Bar.html--
This is a triumph.
I'm making a note here -- {{text}}
{% block b1 %}
Also, this
{% end %} 
```

如何将文本向上传递扩展，以便 Bar.html 可以理解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-16T14:47:41.450

When you use `self.render()` or `self.render_string()`, tornado template engine find the first extended page and comes forward.

And, when you pass a variable to these functions, it's available from first to last templates have been extended. So, your code is correct and haven't problem.

(And also, you should using `{% extends "Bar.html" %}` without `{% end %}` statement for it.)

# php - SQL/PHP - 使用 PDO 的 INSERT 语句和表内的数据显示为“资源 ID #”。我怎样才能让它存储正确的字符串？

> ID：15442072
> 
> 赞同：0
> 
> 时间：2013-03-15T21:04:47.390
> 
> 标签：php, sql, insert, pdo, resources

我一直在试图弄清楚为什么会这样。我在本地连接到我的 SQL 数据库并能够存储一些数据，但由于某种原因，这一列无法正确存储。我的 SQL 数据库有 3 列，第一列是我的主键。前两个是 varchar(50)，最后一个是日期时间列。

我可以将值正确推送到第一列和第三列，但由于某种原因，它不会让我正确地将数据推送到 uname 列。$sessionToken 以随机数结尾，$user 应该类似于“John”，但最终是 Resource ID #5，而 $time 最终正确地是时间戳。

任何帮助，将不胜感激！

```
function freshLoginSession($user) {

    try {
        $mssql = new PDO('sqlsrv:SERVERNAME;database=DATABASENAME','sa','1234');
        $sessionToken = md5(uniqid(rand(), TRUE));
        $_SESSION['loggedInToken'] = $sessionToken;
        $time = date("Y-m-d H:i:s");
        $query = "INSERT INTO dbo.SESSION_TABLE (SESSION_KEY, UNAME, LOGIN_TIME) VALUES (:sessionToken, :user, :time)";

        $stmt = $mssql->prepare($query);
        $stmt->execute(array(':sessionToken' => $sessionToken, ':user' => $user, ':time' => $time));
        $stmt = null;
        $mssql = null;
    }
    catch(PDOException $e)
    {
        echo $e->getMessage();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:32:31.820

您的问题与 PDO 无关，因为它显然是一个类似错字的问题，只是缺乏调试。

在这种情况下，请至少在插入之前回显您的值。这是一件非常基本的事情，但却是最伟大的编程原则之一。程序员必须检查每个值，然后将错误的值跟踪到设置的位置。
这种技术被称为*调试*并且是最常用的编程工具。

`try..catch`另外，请从您的代码中删除这些内容。它们无用且不安全。

# android - Headers do not stay in ListFragment after orientation change

> ID：15442073
> 
> 赞同：0
> 
> 时间：2013-03-15T21:04:57.630
> 
> 标签：android, listview, android-listview, android-listfragment

I'm building a ListFragment. In portrait it needs two headers, but in landscape I need these headers on the left side with the ListView on the right side. The xml handles the different layouts and the java handles properly filling/updating them.

That all works as advertised except that on orientation change the headers are not retained with the list. The listView even retains the scroll but is shift by the removal of the headers.

It might be better to nest a fragment but the listview wouldn't hold the framelayout so that's a moot point.

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setRetainInstance(true);

    loadFeeds();
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.fragment_profile, container, false);

    return v;
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    setupList(savedInstanceState);
    setupOrienation();

    super.onActivityCreated(savedInstanceState);
}

private void setupList(Bundle savedInstanceState) {
    if(getListAdapter() == null) {
        listProfileButtons = (View)getLayoutInflater(savedInstanceState).inflate(R.layout.view_profile_buttons, null);
        listProfile = (View)getLayoutInflater(savedInstanceState).inflate(R.layout.view_profile_header, null);

        getListView().addHeaderView(listProfile);
        getListView().addHeaderView(listProfileButtons);
    } 
}

private void setupOrienation(){
    if(getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
        listProfile.setVisibility(View.GONE);
        listProfileButtons.setVisibility(View.GONE);
        setupProfile(getView());
        setupButtons(getView());
        getListView().setOnScrollListener(new OnScrollListener() {

            @Override
            public void onScrollStateChanged(AbsListView view, int scrollState) {
            }

            @Override
            public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
            }
        });
    } else {
        listProfile.setVisibility(View.VISIBLE);
        listProfileButtons.setVisibility(View.VISIBLE);
        //setupProfile(getListView());
        //setupButtons(getListView());
        setupButtons(getView().findViewById(R.id.include_profile_buttons));

        getListView().setOnScrollListener(new OnScrollListener() {

            @Override
            public void onScrollStateChanged(AbsListView view, int scrollState) {
            }

            @Override
            public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
                if(firstVisibleItem > 0) {
                    getView().findViewById(R.id.include_profile_buttons).setVisibility(View.VISIBLE);
                } else {
                    getView().findViewById(R.id.include_profile_buttons).setVisibility(View.GONE);
                }

            }
        });

    }
}

private void setupProfile(View parent) {
    Bundle userBundle = getArguments();

    TextView name = (TextView)parent.findViewById(R.id.text_view_profile_name);
    TextView screenName = (TextView)parent.findViewById(R.id.text_view_profile_at_user);
    ImageView image = (ImageView)parent.findViewById(R.id.image_view_profile_picture);

    name.setText(userBundle.getString(User.USER_NAME));
    screenName.setText("@" + userBundle.get(User.SCREEN_NAME));
    ImageCacheManager.getInstance(getActivity()).bindDrawable(userBundle.getString(User.PROFILE_IMAGE), image);

}

private void setupButtons(View v) {
    Bundle userBundle = getArguments();

    Button buttonTweets = (Button)v.findViewById(R.id.button_number);
    Button buttonFollowing = (Button)v.findViewById(R.id.button_follow);
    Button buttonFollowers = (Button)v.findViewById(R.id.button_friends);

    buttonTweets.setText(getResources().getString(R.string.profile_number, userBundle.getInt(User.NUMBER)));
    buttonFollowing.setText(getResources().getString(R.string.profile_number_follow, userBundle.getInt(User.NUMBER_OF_FOLLOW)));
    buttonFollowers.setText(getResources().getString(R.string.profile_number_friends, userBundle.getInt(User.NUMBER_OF_FRIENDS)));

    buttonTweets.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            switchListAdapter(adapter);
        }
    });

    buttonFollowing.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            switchListAdapter(followAdapter);
        }
    });

    buttonFollowers.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            switchListAdapter(friendsAdapter);
        }
    });
} 
```

Commented code is done so to stop null pointer exceptions after the headers are lost.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:18:19.327

So on rotation all views get destroyed, which means the headers. I believe that when you setRatainInstance(true) it should handle the headers in a ListFragment headers but does not. To use Headers with ListFragment that uses retainInstance you have to:

```
@Override
public void onDestroyView() {
    setListAdapter(null);
    super.onDestroyView();
} 
```

Then I only add headers in the orientation that I need them, which is nice. The negative part about it is the [scroll isn't retained](https://stackoverflow.com/questions/8276128/retaining-position-in-listview-after-calling-notifydatasetchanged) and I have to figure out which adapter should be in. Those are only a couple methods though which isn't too bad.

# bazaar - 如何从分支恢复到 bzr 父目录的早期版本？

> ID：15442077
> 
> 赞同：0
> 
> 时间：2013-03-15T21:05:12.547
> 
> 标签：bazaar

我有一个 bzr 存储库“A”，基于它创建了一个分支调用“a”。我通过“bzr uncommit”将“a”恢复为早期版本，并希望它也影响其父“A”。我试过“bzr push :parent --no-strict”，但它说“No revision to push”，而“A”仍然是最新版本。希望我的陈述是明确的，并感谢您的评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T17:45:09.987

`--no-strict`即使您的工作树中有待处理的更改，该选项也可以推送。

用于`--overwrite`用当前分支覆盖父分支：

```
bzr push :parent --overwrite 
```

# javascript - 从数组中自动填充 HTML 表单

> ID：15442082
> 
> 赞同：3
> 
> 时间：2013-03-15T21:05:39.157
> 
> 标签：javascript, html, arrays, forms

`document.getElementById`预期结果：仅使用 javascript在加载时自动填写表单。

我有一个传递给以下函数的数组，该函数正确地将其添加到 html 脚本中。

```
 function showResults(results) {
     var s = "";
     for (var i=0, il=results.features.length; i<il; i++) {
         var featureAttributes = results.features[i].attributes;

         for (att in featureAttributes) {
             s = s + "<b>" + att + ":</b>  " + featureAttributes[att] + "<br />";
             // var subshed = feature[0].attributes["SubWS"];

         }
     }
     dojo.byId("info").innerHTML = s;
 } 
```

结果看起来像

```
对象编号：190
ProjectTyp：雨水改造
单位：下
SubWS：悲伤

```

但是，我需要修改脚本以填写现有表格

```
document.getElementById(att).value = featureAttributes[att]; 
```

我似乎总是覆盖最终输出，所以我只填写一个表单值。如何填写多个值？

更新：Polywhirl 先生做对了。我还必须添加一个 if 语句来处理空属性值。最终代码是：

```
 function showResults(results) {
            var subshed = results.features[0].attributes["SubWS"];
            //OBJECTID = results.features[0].attributes["OBJECTID"];
document.getElementById("searchString").value = subshed;
                console.log("feature", results.features[0].attributes["SubWS"])
console.log(document.getElementById("Map_ID"));
        var s = "";
    for (var i = 0, il = results.features.length; i < il; i++) {
          var featureAttributes = results.features[i].attributes;
          for (att in featureAttributes) {
        // s = s + "<b>" + att + ":</b>  " + featureAttributes[att] + "<br />";
  //         var subshed = feature[0].attributes["SubWS"];

                //    document.getElementById(att).value = featureAttributes[att];
  if(!!featureAttributes[att]&&!!document.getElementById(att)){
                    document.getElementById(att).value = featureAttributes[att];

}else{

//alert(att + "this is null")

}
          }

        }

     //   dojo.byId("info").innerHTML = s;
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:46:27.840

因此，您的表单似乎有一些严重嵌套的数据源。

我已经为您提供了两个解析 JS 对象的示例，您可以通过使用所有最新浏览器支持的 JSON.parse(jsonString) 方法来实现，而旧浏览器可以使用在线免费提供的 JSON2.js polyfill。

在第一种情况下，我使用了一个名为 angularJS 的 MVx 框架来说明这种方法的使用，

我把它做得很不优雅，但是对于初学者来说它是可以理解的。

控制器：

```
function FormData($scope) {
    $scope.data = {
        OBJECTID: 190,
        ProjectTyp: "Stormwater Retrofit",
        Unit: "Lower",
        SubWS: "sadd"
    };
} 
```

视图的一部分

```
<form action="path/to/your/action/svc" method="post" ng-controller="FormData">
    <div>
        <label>OBJECTID:</label>
        <input type="text" value="{{data.OBJECTID}}" />
    </div> 
```

同一小提琴上的第二个示例使用普通（香草）JS 填充将 JSON.parse(d) 对象转换为数组并将其映射到表单的表单。

对象到数组：

```
function objectToArray(obj) {
    var arr =[];
    for(x in obj) {
        arr.push(obj[x]);
    }
      return arr;
}

var dataArr = objectToArray(data); 
```

人口：

```
var form = document.getElementById("myForm");
var formItems = form.getElementsByTagName("input");
for(x in formItems) {
    if(formItems[x].type == "text") {
         formItems[x].value = dataArr[x];
    }
} 
```

小提琴可以在[这里找到](http://jsfiddle.net/3vqbM/1/)

希望能帮助到你，

麦克风。

# asp.net-mvc - 在剃须刀页面上渲染图像

> ID：15442085
> 
> 赞同：2
> 
> 时间：2013-03-15T21:05:56.803
> 
> 标签：asp.net-mvc, razor

我正在使用 asp.net mvc3 将图像上传到 Web 服务器。在剃刀视图上显示图像时，问题出在开发模式下我有以下渲染图像

```
@foreach (var image in Model.Photos)
{                    
   <img src="@image.Path" />                    
} 
```

在页面源代码上一切似乎都很好，html标签呈现为

```
<img src="C:\Projects\MySite\Content\uploads\Jellyfish.jpg" />
<img src="C:\Projects\MySite\Content\uploads\Lighthouse.jpg" /> 
```

磁盘驱动器位置图像已正确上传，因此一切正常，但未渲染照片。

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:22:16.097

的值`@image.Path`应该与您的网站相关，而不是硬盘的完整路径。从您的模型中，该`Path`属性应为

```
/Content/uploads/Jellyfish.jpg 
```

或者干脆

```
/Jellyfish.jpg 
```

并且应该在您的视图中像这样生成

```
<img src="@Url.Content("~/Content/Uploads/@image.Path")" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:12:55.747

您的路径应该对应于您的网站，而不是您的硬盘。正确的路径是：“/Images/Jellyfish.jpg”。所以把它上传到你项目中的一个文件夹，你应该没问题！

这是一个完整的示例： [在 MVC 3 Razor 中显示上传的图像](https://stackoverflow.com/questions/7321383/displaying-an-uploaded-image-in-mvc-3-razor)

# html - Auto Margin Element Enigma 的偏移量 - 如何从画布元素中检索 x 和 y - 鼠标事件

> ID：15442087
> 
> 赞同：0
> 
> 时间：2013-03-15T21:06:03.123
> 
> 标签：html, canvas

我尝试了除解决方案之外的所有方法，同时试图弄清楚为什么我无法正确检索位于页面中心且具有自动水平边距的画布上的鼠标按下事件的 x 和 y 位置。

目前：

*   我在画布的包含父级以及画布本身上都有相对定位。
*   我从鼠标事件 .pageX 和 .pageY 中减去左偏移和上偏移

我的目标是返回用户将 strokeRect 拖到画布上的位置（鼠标按下）。我认为这是一个 CSS 问题，但我很难过。

```
body, header, aside, footer, div, canvas{
    display: block;
    position: relative;
}

canvas {
    z-index: 99;
    background: #996;
}

#canvas-contain{
    height: 600px;
    width: 967px;
    margin: 50px auto;
    box-shadow: 0px 0px 5px 1px #222222;
}

<script>
rect.startX = e.pageX - this.offsetLeft;
rect.startY = e.pageY - this.offsetTop;

function mouseMove(e) {
  if (drag) {
    rect.w = (e.pageX - this.offsetLeft) - rect.startX;
    rect.h = (e.pageY - this.offsetTop) - rect.startY ;
    context.clearRect(0,0,canvas.width,canvas.height);
    draw();
  }

}

function draw() {
  context.strokeRect(rect.startX, rect.startY, rect.w, rect.h);
}

</script>

<body>
    <div id="ramRod">
        <div id="canvas-contain">
            <canvas id="canvas" height="600" width="967"></canvas>
        </div>
        <footer id="footer">
            <div id="left-fb" class="foot-box"></div>
            <div id="right-fb" class="foot-box"></div>
         </footer>
     </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:40:43.980

**这是在画布上跟踪鼠标事件的方法**

在您的代码中，您需要使用 e.clientX/e.clientY 而不是 e.pageX/e.pageY

...还有一个小提琴：http: [//jsfiddle.net/m1erickson/gfzGz/](http://jsfiddle.net/m1erickson/gfzGz/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");

    var canvasOffset=$("#canvas").offset();
    var offsetX=canvasOffset.left;
    var offsetY=canvasOffset.top;

    function handleMouseDown(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);
      $("#downlog").html("Down: "+ canMouseX + " / " + canMouseY);

      // Put your mousedown stuff here

    }

    function handleMouseUp(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);
      $("#uplog").html("Up: "+ canMouseX + " / " + canMouseY);

      // Put your mouseup stuff here
    }

    function handleMouseOut(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);
      $("#outlog").html("Out: "+ canMouseX + " / " + canMouseY);

      // Put your mouseOut stuff here
    }

    function handleMouseMove(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);
      $("#movelog").html("Move: "+ canMouseX + " / " + canMouseY);

      // Put your mousemove stuff here

    }

    $("#canvas").mousedown(function(e){handleMouseDown(e);});
    $("#canvas").mousemove(function(e){handleMouseMove(e);});
    $("#canvas").mouseup(function(e){handleMouseUp(e);});
    $("#canvas").mouseout(function(e){handleMouseOut(e);});

}); // end $(function(){});
</script>

</head>

<body>

    <p id="downlog">Down</p>
    <p id="movelog">Move</p>
    <p id="uplog">Up</p>
    <p id="outlog">Out</p>
    <canvas id="canvas" width=300 height=300></canvas>

</body>
</html> 
```

# sql - 如何获取缺失的汇总数据

> ID：15442091
> 
> 赞同：0
> 
> 时间：2013-03-15T21:06:24.953
> 
> 标签：sql, sql-server, tsql

我有一个查询，按月提供总销售额。但是，有些月份没有销售。我如何在查询结果中获得该月的 0 值？

```
SELECT
    p.Part,
    SUM(s.Sales) AS Sales,
    MONTH(s.SalesDate) AS Month_Sold
FROM
    Parts p
    LEFT OUTER JOIN Sales s ON p.Part = s.Part
GROUP BY
    p.Part,
    MONTH(s.SalesDate)
ORDER BY
    p.Part,
    Month_Sold 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:08:05.117

这样做是`SUM(ISNULL(s.Sales, 0))`为了使您的 NULL 值不会被聚合消除。虽然，由于您也依赖于您的销售数据中的月份，您将需要查找月份，以便您可以查看所有月份，即使您的销售数据中没有它们。

所以，像这样：

```
 ;WITH months AS
    (
        SELECT 1 AS mo
        UNION ALL
        SELECT mo +1
        FROM months
        WHERE mo < 12
    )

    SELECT p.Part, SUM(s.Sales) AS Sales, mo AS Month_Sold 
    FROM Parts p 
    CROSS APPLY months
    LEFT OUTER JOIN Sales s 
        ON p.Part = s.Part 
        AND months.mo = MONTH(s.SalesDate) 
    GROUP BY p.Part, months.mo ORDER BY p.Part, Month_Sold 
```

# c - 如何在 Opengl 中填充一个圆圈？

> ID：15442094
> 
> 赞同：1
> 
> 时间：2013-03-15T21:06:32.723
> 
> 标签：c, graphics

我一直在使用中点圆算法画一个圆。

```
void circlePoints (int x, int y, int xc, int yc)
{
  drawDot (xc+x,yc+y);
  drawDot (xc-x,yc+y);
  drawDot (xc+x,yc-y);
  drawDot (xc-x,yc-y);
  drawDot (xc+y,yc+x);
  drawDot (xc-y,yc+x);
  drawDot (xc+y,yc-x);
  drawDot (xc-y,yc-x);
}

void Circle (int xc, int yc, int rad)
{ int x,y,d;

  x = 0;
  y = rad;
  circlePoints (x,y,xc,yc);
  d = (5/4) - rad;
  while (x < y)
  { 
      if (d < 0)
      {
          x++;
          d+=2*x+1;
      }
      else
      {
          x++;
          y--;
          d+=2*(x-y)+1;
      }
    /*if (d < 0)
      d += 2*x +1;
    else
     d += 2*(x-y) + 1;*/
    circlePoints (x,y,xc,yc);
  }
} 
```

我想知道如何用特定颜色填充这个圆圈？我可以使用多边形填充，但不确定我如何在这里实现。

# wordpress - 在wordpress模板中将变量从一页发送到另一页

> ID：15442095
> 
> 赞同：5
> 
> 时间：2013-03-15T21:06:33.277
> 
> 标签：wordpress

我正在尝试将日期从一个 wordpress 模板表单传递到另一个。为简单起见，我创建了两个模板（并将它们与 WP 页面关联为标准页面），如下所示：

```
<?php
/*
Template Name: Form test
*/
get_header(); 
?>

<form action="/form-result/" method="post">
<input type="text" name="name" size="20" />
<input type="submit" value="Go" />
</form>

<a href="/form-result/">Result page</a>

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

和

```
<?php
/*
Template Name: Form result
*/
get_header(); 
$name = $_REQUEST['name'];
?>

And the name is <?=$name?>

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

当我单击文本链接结果页面时，我会进入该`/form-result/`页面，但是，如果我提交表单，则会收到一个找不到页面的错误。经过验证，我发现问题出在试图将变量从一页传递到另一页。

进一步思考，我发现`<a href="/form-result/?name=Elodie">Result page</a>`得到一个错误页面，而`<a href="/form-result/">Result page</a>`将我正确带到下一页。

可能我错过了一些小东西。

这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T07:21:50.883

问题解决了。就是这样，我用于此测试的变量“名称”是 WP 关键字，代表模板名称。在没有模板名称的情况下，它会查找 url slugs 开头与变量名称匹配的其他页面。

我更改了变量名，它可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T04:30:35.140

```
<?php
/*
Template Name: Form
*/
?>

<?php get_header(); ?>    

<form action="/form-result/" method="post">
  <input type="text" name="name" size="20" />
  <input type="submit" value="Go" />
</form>

<a href="/form-result/">Result page</a>

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

修改您的结果页面。

```
<?php
/*
Template Name: Form Result
*/
?>

<?php get_header(); ?>    

<?php if(isset($_POST['name'])) {
  echo $_POST['name'];
} ?>

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T22:28:42.367

尝试将链接添加到表单内的结果页面，如下所示：

```
<button type="submit" name="submitted" id="submitted" class="submit">Submit</button> 
```

在结果页面上：

```
if(isset($_POST['submitted'])) {
$name = $_POST['name'];

} 
```

要传递表单数据，您需要通过提交发布表单。您可以使用 jquery 在外部执行此操作，如下所示：

```
$el.click($('#form_name').submit()); 
```

-d

# java - 正则表达式从字符串中提取信息

> ID：15442102
> 
> 赞同：0
> 
> 时间：2013-03-15T21:07:03.923
> 
> 标签：java

我最近开始制作一个 ircbot，在我的禁令命令中，我需要提取目标的名称和模式。

有不同的模式 + 和 -

所以一个字符串的例子看起来像

```
!!ban + Sjele 
```

或者

```
!!ban - Sjele 
```

在这种情况下，我将如何使用正则表达式和目标找到并获取模式 Sjele？

我在在线 regextester 正则表达式中尝试了这个，但它没有用，这是我对正则表达式的了解不足的情况下所能得到的

```
((.*)(+| -)(.*)) 
```

当这个正则表达式工作时使用匹配器和模式，我想要 3 个变量：

*   pref (应该是!!ban)
*   模式（-或+）
*   目标（在本例中为 Sjele）

谢谢
（英语不是我的第一语言，我确实很难理解，如果我不清楚，请告诉我，我会尽力解释得更好。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:21:01.747

您需要转义 + 和 - 符号，如 \+ \-

否则，它们对正则表达式编译器具有特殊意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:45:56.570

你可以试试这个正则表达式：

```
!!ban\s*(\+|\-)\s*(\w+) 
```

您将在第一组中设置**模式**，在第二组中设置**目标**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T21:18:29.353

对于这种情况，正则表达式有点矫枉过正。我创建了一个需要 a`String`进行测试的方法，它将返回`String`带有您要查找的字符的 a ，或者`null`如果没有匹配项：

```
public static String getBanStatus(String s1)
{
    if (s1.contains(Character.toString('+'))) return "+";
    if (s1.contains(Character.toString('-'))) return "-";
    else return null; // Or return something meaning no match was found
} 
```

* * *

如果你**需要**一个正则表达式，Pshemo 提供的就足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T21:19:22.950

由于您要求使用正则表达式，您可以尝试使用`!!ban ([+\\-]) (\\w+)`. 在第 1 组中，您将有 + 或 - 并且第 2 组将包含被禁止/未禁止用户的名称。

这是一个简单的例子

```
Matcher m = Pattern.compile("!!ban ([+\\-]) (\\w+)").matcher(
        "!!ban - Sjele");
if (m.find())
    System.out.println(m.group(1) + ":" + m.group(2)); 
```

* * *

如果您使用的是 Java7，您可以为您的组命名以获得更好的代码

```
!!ban (?<operation>[+\\-]) (?<userName>\\w+) 
```

并像这样使用它

```
Matcher m2 = Pattern
        .compile("!!ban (?<operation>[+\\-]) (?<userName>\\w+)").matcher(
                "!!ban - Sjele");
if (m2.find())
    System.out.println(m2.group("operation") + ":" + m2.group("userName")); 
```

# c++ - 无法从地图中删除记录

> ID：15442105
> 
> 赞同：-1
> 
> 时间：2013-03-15T21:07:41.887
> 
> 标签：c++

```
string* Foooood::topFiveFoo(){    
    std::map<std::string, unsigned long> volumes;
    typedef std::map<std::string, unsigned long>::iterator it_type;

    for(i=0;i<nTransactions;i++){
        volumes[tDeque.at(i).fooSymbol] += tDeque.at(i).fooShares;
    }

    string top;
    string result[5];
    int check = 0;

    for(i=0;i<5;i++){
        for(it_type iterator = volumes.begin(); iterator != volumes.end(); iterator++) {
            if(iterator->second > check){
                top = iterator->first;
                check = iterator->second;
            }

            result[i] = top;
            volumes.erase(top);
        }
    }
    return new string[5];
} 
```

我是在不到 12 小时前才了解地图的，所以我仍然很困惑。
我不断收到错误消息：“调试断言失败！” .....“表达式：映射/设置迭代器不可递增”

在我的脑海中，如果我找到最高值，将其存储在数组中，然后将其从地图中删除，我将能够重复此操作并生成前 5 名列表！？？但我无法删除最高值，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:23:44.193

从[`std::map::erase`](http://www.cplusplus.com/reference/map/map/erase/)

> **迭代器有效性**
> 引用被函数删除的元素的迭代器、指针和引用无效。所有其他迭代器、指针和引用保持其有效性。

所以，如果你的迭代器指向被删除的元素，那么它在之后是无效的`erase`，你不能增加它。

另一点是您的返回值。如果要返回`result`数组，则必须先将其复制或立即在堆上分配。现在，您返回一个空`std::string`数组。

```
std::string *result = new std::string[5];
for(i=0;i<5;i++){
    for(it_type iterator = volumes.begin(); iterator != volumes.end(); iterator++) {
        if(iterator->second > check){
            top = iterator->first;
            check = iterator->second;
        }
    }

    result[i] = top;
    volumes.erase(top);
}

return result; 
```

# php - 如何在 php 中进行高级搜索？

> ID：15442109
> 
> 赞同：1
> 
> 时间：2013-03-15T21:07:58.877
> 
> 标签：php, mysql, search

我想做一个表格，以便图书馆的用户可以进行高级搜索。我想我可以使用表单中硬编码的值并将它们附加到查询中（它们来自选择字段）。我还想过如何用尽可能少的代码来做到这一点，所以我会做一个爆炸，以防有人选择（单词）（即搜索单词而不是短语）。我的最终代码如下：

```
<?php 

    /** 
     *  this variable is the result of the user    
     *  selecting 'word' or 'phrase'
    **/ 
    $coleccion = implode('&', $keysres);

    $contents_1 = array();
    $contents_2 = array();
    $contents_3 = array();

    $words_1 = array();
    $words_2 = array();
    $words_3 = array();

    switch ($coleccion) {

    case 'palabras&palabras&palabras': 

        $contents_1 = preg_split('/[\s,]+/', $buscar_1);

        foreach ($contents_1 as $word) {
            array_push($words_1, " MATCH ($contenido_1) AGAINST ('$word') ");
        }

        $contents_2 = preg_split('/[\s,]+/', $buscar_2);

        foreach ($contents_2 as $word) {
            array_push($words_2, " MATCH ($contenido_2) AGAINST ('$word') ");
        }

        $contents_3 = preg_split('/[\s,]+/', $buscar_3);

        foreach ($contents_3 as $word) {
            array_push($words_3, " MATCH ($contenido_3) AGAINST ('$word') ");
        }

        $search_words_1 = implode(" OR ", $words_1);
        $search_words_2 = implode(" OR ", $words_2);
        $search_words_3 = implode(" OR ", $words_3);

        $consulta = "
                SELECT * 
                FROM catalogo 
                WHERE 
                   $search_words_1 ". 
                   $oper_1 
                   ." $search_words_2 ". 
                   $oper_2 ." 
                   $search_words_3 ";
    break;

?> 
```

问题是当我更改选择字段的值时，假设有人选择执行 OR 操作而不是 AND，并选择对我的第二个文本字段进行短语搜索，在这种情况下，我看不到搜索受到限制或扩大。例如，我对 case 进行了变量转储`$coleccion=palabras&frase&palabras`，然后对查询进行了 var_dump，然后显示：`SELECT * FROM catalogo WHERE MATCH (titulo) AGAINST ('mesones') OR MATCH (titulo) AGAINST ('y') OR MATCH (titulo) AGAINST ('bariones') OR MATCH(titulo) AGAINST('mesones y totems') AND MATCH (titulo) AGAINST ('bariones')`

所以我的问题是¿在 SQL 中限制/扩大搜索的正确方法是什么？不幸的是，我没有太多的数据库条目可供测试。

最后，我还设置了一些东西，以便尝试获取所有记录“除了”的查询以这种语法结束：

```
SELECT * FROM catalogo WHERE MATCH (titulo) AGAINST ('comunicaciones') OR MATCH  (titulo) AGAINST ('y') OR MATCH (titulo) AGAINST ('poder') AND NOT MATCH(titulo) AGAINST('mesones') AND NOT MATCH (titulo) AGAINST ('bariones') 
```

但是我想知道这样的查询是否真的排除了指定的记录。或者我应该在布尔模式下使用前导减号，根据这个：

> 前导减号表示该单词不得出现在返回的任何行中。注意：- 运算符仅用于排除与其他搜索词匹配的行。因此，仅包含以 - 开头的术语的布尔模式搜索返回空结果。它不会返回“除了包含任何排除项的行之外的所有行。

我想我现在有一个关于我怀疑的例子。假设以下查询：

```
SELECT * FROM catalogo WHERE MATCH (titulo) AGAINST ('comunicaciones') OR MATCH     (titulo) AGAINST ('y') OR MATCH (titulo) AGAINST ('poder') AND MATCH (titulo) AGAINST ('mesones') OR MATCH (titulo) AGAINST ('y') OR MATCH (titulo) AGAINST ('totems') AND NOT MATCH(titulo) AGAINST('bariones') 
```

然后我想应该显示所有带有“comunicaciones”、“y”和“poder”的记录，以及带有“mesones”、“y”和“totems”的记录，但不显示带有“bariones”的记录'。但是，该查询的结果仅是我的数据库中带有单词 comunicaciones 的那些

# php - 文件名未显示，但 img 已上传？

> ID：15442110
> 
> 赞同：0
> 
> 时间：2013-03-15T21:08:00.947
> 
> 标签：php

```
$path= $_SERVER['DOCUMENT_ROOT'] . "/img/".$HTTP_POST_FILES['fileupload']['name'];
if($ufile !=none)
{
   if(copy($HTTP_POST_FILES['fileupload']['tmp_name'], $path))
   {
       echo "Successful<BR/>";

       echo "File Name :".$HTTP_POST_FILES['ufile']['name']."<BR/>";
       echo "File Size :".$HTTP_POST_FILES['ufile']['size']."<BR/>";
       echo "File Type :".$HTTP_POST_FILES['ufile']['type']."<BR/>";
       echo "<img src=\"$path\" width=\"150\" height=\"150\">";
   }
   else
   {
       echo "Error";
   }
}

die(); 
```

为什么

```
echo "File Name :".$HTTP_POST_FILES['ufile']['name']."<BR/>"; 
```

不给我文件名？其他信息也没有得到回应

如果这是一个愚蠢的问题，我很抱歉，它与表单方法是 POST 有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:11:43.883

您只是假设上传成功。`$HTTP_POST_FILES`如果上传失败， （或`$_FILES`您*应该*使用的）仍然可以填充数据。您**必须**在上传之前检查`['error']`参数，例如

```
if ($_FILES['ufile']['error'] !== UPLOAD_ERR_OK) {
    die("Upload failed with error code " . $_FILES['ufile']['error']);
} 
```

错误代码在这里定义：[http ://www.php.net/manual/en/features.file-upload.errors.php](http://www.php.net/manual/en/features.file-upload.errors.php)

同样，您的代码是不安全的，允许恶意用户随意在您的服务器上随意书写文件。也不要`copy()`在上传的文件上使用。`move_uploaded_file()`存在是有原因的。用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:13:23.920

使用[move-uploaded-file](http://php.net/manual/en/function.move-uploaded-file.php)移动上传的文件。

HTTP_POST_FILES 已弃用，请使用 $_FILES。

[http://www.php.net/manual/en/features.file-upload.php](http://www.php.net/manual/en/features.file-upload.php)这应该可以帮助你。

# javascript - 如何在 emberjs 视图中处理 twitter 引导按钮加载和重置

> ID：15442112
> 
> 赞同：2
> 
> 时间：2013-03-15T21:08:05.650
> 
> 标签：javascript, twitter-bootstrap, ember.js

我试图了解这是否是在这里做事的最佳方式，因为对我来说它看起来像代码味道。我想要做的是，当我单击它时，我的按钮会变为加载状态，当控制器结束处理事件时它会变回默认状态（基本上是进行 AJAX 调用）

我的模板如下所示：

```
{{#view App.LoadingButton action="search" data-loading-text="content.loadingText"}}Search{{/view}} 
```

我的观点是这样的：

```
App.LoadingButton = Ember.View.extend({
    tagName: 'button',
    classNames: ['btn', 'btn-primary'],
    attributeBindings: ['type'],
    type: 'button',
    elem: null,
    stateChanged: function () {
        if (this.elem) {
            var loading = this.get('controller').get('content.isLoading');
            if (loading) {
                $(this.elem).button('loading');
            }
            else {
                $(this.elem).button('reset');
            }            
        }        
    },
    click: function (evt) {
        this.elem = this.elem || evt.srcElement;
        this.get('controller').send(this.get('action'));
    },
    didInsertElement: function () {
        this.get('controller').addObserver('content.isLoading', this, 'stateChanged');
    }
}); 
```

1.  首先，我访问我的元素的方式看起来是错误的，当它被添加到 DOM 时，我不能获得对我的视图元素的引用吗？
2.  其次，我依靠控制器从其模型中更改 isLoading 布尔标志，以便视图知道何时更改状态，这是以 Ember 方式实现它的最佳方式吗？

我看过很多关于 Ember 的视频，刚开始用它来实现，但要知道什么是最好的方法仍然不是一件容易的事，即使它可能像这样工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T18:03:53.580

> 我想要做的是，当我单击它时，我的按钮会变为加载状态，当控制器结束处理事件（基本上是进行 AJAX 调用）时，它会变回默认状态。

您正在描述 Ember 帮助人们摆脱的以文档/事件为中心的架构（具有紧密的显示/交互耦合）。Ember 更多地描述了应用程序的数据状态以及显示在每种状态下的显示方式。Ember 本身会为您处理要显示的数据同步。

一种更像 Ember 的描述方式是：

*   显示行为
    *   当我与服务器通信时，该按钮有一个`disabled`类并显示“正在加载...”
    *   当我不与服务器通信时，按钮没有`disabled`显示“搜索”的类
    *   交互时，此按钮会触发搜索动作

模板：

```
<button type="button" 
        {{bindAttr class=":btn :btn-primary isLoading:disabled"}} 
        {{action search}}>
  {{#if isLoading}}
    Loading...
  {{else}}
    Search
  {{/if}}
</button> 
```

*   流量控制行为
    *   触发搜索时，控制器`isLoading`变为真
    *   搜索完成后，控制器的`isLoading`属性变为 false
    *   如果搜索已经在进行中，则忽略再次搜索的尝试

控制器：

```
App.SomeController = Ember.Controller.extend({
  isLoading: false,
  search: function(){
    if(this.get('isLoading')) { return }

    this.set('isLoading', true);
    $.ajax({
      context: this,
      success: function(){
        this.set('isLoading', false)
      }
    })
  }
}); 
```

# google-maps-sdk-ios - 在同一应用中切换 Google Maps SDK 和 Mapkit 会导致崩溃

> ID：15442119
> 
> 赞同：3
> 
> 时间：2013-03-15T21:08:26.470
> 
> 标签：google-maps-sdk-ios

我创建了一个使用 MapKit 和 GoogleMaps 框架的非常简单的应用程序，并尝试在两个地图之间切换。我正在使用 ARC (ios 6.1) 和 Google Maps SDK for iOS 版本：1.1.1.2311。在几次切换后，应用程序崩溃了`[EAGLContext setCurrentContext:]`——总是在 MapKit 代码中。在之前的帖子中有一些建议 - 尝试`[EAGLContext setCurrentContext:nil]`在不同的地方设置，但它没有帮助。

```
stack trace:
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000c
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   OpenGLES                        0x33beeb12 +[EAGLContext setCurrentContext:] + 74
1   VectorKit                       0x383cada4 -[VGLGPU setPaused:] + 120
2   VectorKit                       0x383bad70 -[VKMainLoop updateLinkState] + 492
3   VectorKit                       0x383c7334 -[VKAnimation startWithStepHandler:completionHandler:] + 112
4   VectorKit                       0x383d657a -[VKBuildingFootprintMapModel _reloadStyleAnimated:] + 474
5   VectorKit                       0x383d6398 -[VKBuildingFootprintMapModel setActive:] + 84
6   VectorKit                       0x383d5ef4 -[VKModelObject setSupermodel:] + 44
7   VectorKit                       0x383d624a -[VKModelObject insertSubmodel:atIndex:] + 142
8   VectorKit                       0x383d615a -[VKMapRasterizer addSubmodel:] + 322
9   VectorKit                       0x383d5cb4 -[VKMapModel addSubmodel:] + 136
10  VectorKit                       0x383cf1c4 -[VKMapModel forceMapType:] + 1532
11  VectorKit                       0x383cc568 -[VKMapModel initWithTransform:shouldRasterize:] + 2016
12  VectorKit                       0x383cbd80 -[VKMapModel initShouldRasterize:] + 36
13  VectorKit                       0x383c9678 -[VKMapCanvas initWithFrame:shouldRasterize:] + 356
14  VectorKit                       0x383c930e -[VKMapView initWithFrame:andGlobe:shouldRasterize:] + 642
15  MapKit                          0x33599320 -[MKMapView _commonInitAndEnableLoading:fromIB:] + 720
16  MapKit                          0x33598e9c -[MKMapView initWithFrame:] + 252
17  saTest                          0x00017e2a -[AppleMapCtl loadView] (AppleMapCtl.m:27) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T21:31:04.710

在首次将 Google 地图集成到我们的 iOS 应用程序后，我们遇到了同样的问题。到目前为止似乎对我们有用的解决方案是在释放 GMSMapView 和所有相关的 Google Maps 对象之后等待一段时间，然后再实例化任何 MapKit 对象。

根据我们迄今为止的测试，我们的想法是 GMSMapView 对象层次结构是异步释放的，并且在释放 OpenGL 资源之前似乎没有积极地将其 EAGLContext 重新建立为“当前”。因此，如果 MapKit 切换当前 EAGLContext，则 GMSMapView 层次结构继续释放资源，您将获得 OpenGL 资源释放的交叉授粉。

所以我们的步骤是：

1.  释放 GMSMapView，以及所有 GMS 相关的对象
2.  等待 100 毫秒（0.1 秒）
3.  将 EAGLEContext 设置为 nil
4.  分配 MKMapView 并继续。

到目前为止，这对我们有用。祝你好运。

# php - PHP 内置 SOAP 传递参数

> ID：15442121
> 
> 赞同：0
> 
> 时间：2013-03-15T21:08:38.257
> 
> 标签：php, xml, soap

我对 PHP 的内置 SOAP 客户端感到非常沮丧。似乎我在互联网上阅读的每一篇文章都表明我尝试过的每种代码变体都应该有效，但它们都没有。这是我的代码的简化版本的当前状态，但还有很多其他的。

```
$soapClient = new SoapClient("uReachWebServices.wsdl", array(
    "trace"        => true,
    "soap_version" => SOAP_1_2,
));
$auth       = array(
    "PartnerId" => "hidden_from_StackOverflow",
    "Password"  => "hidden_from_StackOverflow",
);

$parameters = array(
    phoneNumber => array("PIN" => "XXXX", "_" = "XXXXXXXXXXX"),
);

$header = new SoapHeader("http://schemas.xmlsoap.org/soap/envelope", "Authentication", (object) $auth, false);
$soapClient->__setSoapHeaders($header);

try {
    $soapClient->GetMailboxInfo((object) $parameters);
} catch (SoapFault $ex) {
    ChromePhp::error($ex->getMessage());
    ChromePhp::log($ex->getTraceAsString());
}

ChromePhp::log($soapClient->__getLastRequest());
ChromePhp::log($soapClient->__getLastResponse()); 
```

我正在尝试获取参数的以下输出...

```
<phoneNumber ns1:PIN="XXXX">XXXXXXXXXX</phoneNumber> 
```

......但我尝试的一切最终都像以下之一......

```
<phoneNumber /> 
```

...或者...

```
<key>phoneNumber</key>
<value>xxxxxxxxxx</value> 
```

...或者...

```
<phoneNumber ns1:PIN="XXXX" /> 
```

...或者我个人最喜欢的...

```
<param1><phoneNumber ns1:PIN="XXXX">XXXXXXXXXX</phoneNumber></param1> 
```

# javascript - 带有 IE、XMLHttpRequest 和 ssl (https) 的 CORS

> ID：15442122
> 
> 赞同：2
> 
> 时间：2013-03-15T21:08:39.130
> 
> 标签：javascript, ajax, internet-explorer, xmlhttprequest, cors

我有一个应用程序通过 Ajax 进行通信以使用来自另一台服务器的一些安静服务的问题。

问题似乎只出现在 IE 上，当消费应用程序位于具有 ssl 的服务器中时，我的意思是当我从其他盒子的同一台服务器上使用相同的服务时，一切正常。

我在具有 SSL 的服务器（[https://api.restbla/..](https://api.restbla/..)）上有 Restful 服务，我必须从其他服务器（有或没有 ssl 证书）使用这些服务

使用 Internet Explorer 进行测试，我得到了结果：

*   如果我使用本地作品中的服务
*   如果我从同一个盒子（托管restful的地方）使用服务
*   如果我在没有 ssl 的情况下使用来自另一台服务器的服务
*   但是当我在 https 上使用服务器上的服务时，在 IE 上不起作用。

之前的所有测试都使用 Chrome 和 FF

这是我用来进行 ajax 调用的 javascript

```
function load(_url, _callback, _params, _type, _htmlMethod, _onStartFunction, _onFinishFunction) {
    var xhr;
    if (isFunction(_onStartFunction)) { _onStartFunction(); }
    ieVersion = getInternetExplorerVersion();
    if (typeof XMLHttpRequest !== 'undefined') {
        console.log("XMLHttpRequest");
        xhr = new XMLHttpRequest();
    }else {
        if (ieVersion > 7){ 
            console.log("XDomainRequest");
            xhr = new XDomainRequest();
        }else{
            var versions = [ "MSXML2.XmlHttp.5.0", "MSXML2.XmlHttp.4.0", "MSXML2.XmlHttp.3.0", "MSXML2.XmlHttp.2.0", "Microsoft.XmlHttp" ];
            for ( var i = 0, len = versions.length; i < len; i++) {
                try { 
                    console.log("ActiveXObject: " + versions[i]);
                    xhr = new ActiveXObject(versions[i]); 
                    break;
                } catch (e) { /* attempt next one*/ }
            }
        }
    }
    xhr.onreadystatechange = ensureReadiness;
    if (_type == JSON_TYPE) {
        contentType = "application/json";
    }else{
        contentType = 'text/plain';
    }

    function ensureReadiness() {
        if (xhr.readyState < 4) { return; }
        if (xhr.status !== 200) {
            showServiceDown();
            if (isFunction(_onFinishFunction)) { _onFinishFunction();}
            return;
        }
        if (xhr.readyState === 4) {
            if (isFunction(_onFinishFunction)) {_onFinishFunction(); }
            var responseText = "";
            responseText = xhr.responseText;
            if (_type == JSON_TYPE) {
                _callback(responseText);
            } else if (_type = HTML_TYPE) {
                var replaced = responseText.replace(/\\/g, '///');
                _callback(replaced);
            } else { _callback(responseText); }
        }
    }
    if ((_htmlMethod == undefined) || (_htmlMethod == null) || (_htmlMethod == "")) {
        _htmlMethod = METHOD_POST;
    }
    xhr.open(_htmlMethod, _url, true);
    xhr.withCredentials = true;
    xhr.setRequestHeader("Content-type", contentType);
    _params = (_params != undefined) ? _params : null;
    xhr.send(_params);
} 
```

我不能为这个项目使用任何 javascript 框架。

证书是公司内部使用的，仅供内部使用，因此任何浏览器验证邮件都会失败，我不知道这是否与问题有关。

我希望有人对这个问题有一些解决方案。

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:16:31.527

我有一个类似的问题，通过`onprogress`在 IE 案例中向 XDomainRequest 添加一个虚拟回调来解决：

```
if (ieVersion > 7){ 
    console.log("XDomainRequest");
    xhr = new XDomainRequest();
    xhr.onprogress = function() {}; // <-- add this
} 
```

如果没有定义处理程序，IE 似乎正在中止跨域请求`onprogess`。

* * *

这是我用于 AJAX 的一个函数，也许它对你有帮助：

```
 /**
   * Wraps jQuery's AJAX, adds X-Domain support for IE
   * 
   *
   */
  function xDomainAJAX (url, settings) {
    jQueryRequired();
    $.support.cors = true; // enable x-domain
    if ($.browser.msie && parseInt($.browser.version, 10) >= 8 && XDomainRequest) {
      // use ms xdr
      var xdr = new XDomainRequest();
      xdr.open(settings.type, url + '?' + $.param(settings.data));
      xdr.onprogress = function() {};
      xdr.onload = function() {
        settings.success(xdr.responseText);
      };
      xdr.onerror = settings.error;
      xdr.send();
    } else {
      // use jQuery ajax
      $.ajax(url, settings);
    }
  } 
```

# jquery - Backbone：合并模型但保留数据绑定

> ID：15442124
> 
> 赞同：3
> 
> 时间：2013-03-15T21:08:51.800
> 
> 标签：jquery, jquery-mobile, backbone.js

现在我有很多绑定到主干模型的 UI 元素。该模型包含客户信息，并且每次搜索新客户时都会更改该模型，然后将其聚焦。以前的客户模型被这个新的模型覆盖。其中大多数（如果不是所有字段）名称相同，某些数组可能具有或多或少的元素，但总体上几乎相同。

有没有办法可以用新模型信息覆盖旧模型信息，但保留我的 UI 元素具有的所有绑定？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T00:39:23.030

一般来说，如果你有`someView`，并且`someView`被声明了`{model: someModel}`，并且你想`someView`使用`someOtherModel`它，那么正确的方法是：

```
someView.model = someOtherModel; 
```

正如 gumballhead 建议的那样，您*可以*简单地更改模型的数据：

```
someView.model.set(someOtherModel.toJSON()); 
```

但那是......好吧，这不是最好的类比，但这有点像擦除蒂姆林塞姆棒球卡并在上面画马特威廉姆斯，而不是简单地将蒂姆卡换成马特卡。无论哪种方式，你都会得到一张写着马特的棒球卡，但从概念上讲，这是一个不同的世界。

但是，如果您有很多共享相同模型的视图类，并且您希望一次为所有视图更改该模型是一种方便的操作，那么您可以采取一些方法。

一种方法是在某处跟踪列表中的所有视图，然后每当您想更改模型时遍历所有视图，如下所示：

```
var viewsThatUseBaseballCard = [view1, view2, view3, view4];

...

_(viewsThatUseBaseballCard).each(function(view) {
    view.model = someOtherModel;
}); 
```

另一种方法是避免使用内置`this.model`函数，而是在视图代码中使用函数来在需要时获取模型；换句话说，而不是：

```
var MyView = Backbone.View.extend({
    someMethod: function() {
        this.model.doSomething();
    }
});

var MyView = Backbone.View.extend({
    someMethod: function() {
        getCurrentModel().doSomething();
    }
}); 
```

（然后当然你需要做一些事情来制作`getCurrentModel`return `someOtherModel`，但至少它会集中到代码中的一个地方）。

上述还有其他变体，但总体思路是您可以：

A）`this.model`在您的视图中使用并`this.model`根据需要设置一个新的

B）在您的视图中使用某种`getModel()`调用，并修改告诉该函数以适当地返回新模型

（或者你可以 C）保持相同的模型并改变它是什么，即。擦除/重写棒球卡选项）。

我个人可能会倾向于 B），但这最终取决于您的具体情况。

*** 编辑 ***

刚刚意识到我错过了其他几个选项：

D）重新设计您的视图，使它们不依赖于相同的模型（不确定这是否适合您，但值得一提）

E) 使用“参考模型”；换句话说，而不是：

```
new SomeView({model: TimLincecum}); 
```

做：

```
new SomeView({model: currentPlayerReference}); 
```

然后，在您的视图中，执行以下操作：

```
this.model.getCurrentPlayer(); 
```

这与我的选项 B) 类似，但它还有一个额外的好处是可以让您存储模型中不会更改的数据`currentPlayerReference`。

# asp.net - 融合图表中弹出窗口中的链接

> ID：15442126
> 
> 赞同：0
> 
> 时间：2013-03-15T21:08:57.570
> 
> 标签：asp.net, charts, fusioncharts

我正在从数据库中提取数据以填充我的图表，但我不确定如何控制窗口的大小。这是我的代码：

```
strXML.AppendFormat("<set label='{0}' value='{1}' link='{2}'/>", reader["Category"].ToString(), reader["AvgNumbers"].ToString(), Server.UrlEncode("P-ChildDrill.aspx?AvgDays=" + reader["Category"].ToString())); 
```

我看过一些他们使用这种语法的例子，但我似乎无法弄清楚如何将它应用于我的代码：这是我看到的例子：

```
link='P-detailsPopUp,width=400,height=300 
```

我的问题是如何将这个例子应用到我的代码中？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:59:41.113

要指定弹出窗口的宽度/高度，您需要以前缀“p-”开始链接，并且需要传递窗口名称，后跟以逗号分隔的窗口参数。

```
strXML.AppendFormat("<set label='{0}' value='{1}' link='{2}'/>", reader["Category"].ToString(), reader["AvgNumbers"].ToString(), Server.UrlEncode("P-detailsWin,width=400,height=300,toolbar=no,scrollbars=no, resizable=no-ChildDrill.aspx?AvgDays=" + reader["Category"].ToString())); 
```

以下链接中列出了可以传递的可能属性列表：

[http://docs.fusioncharts.com/charts/contents/DrillDown/PopUps.html](http://docs.fusioncharts.com/charts/contents/DrillDown/PopUps.html)

# openmp - omp并行内的openmp并行部分？

> ID：15442128
> 
> 赞同：0
> 
> 时间：2013-03-15T21:09:05.087
> 
> 标签：openmp

我有一个使用 OpenMP 并行化的外部 for 循环。然而，在这个 for 循环中，有一些代码也可以并行执行。

我可以使用 OpenMP 的sections 子句来并行化吗？这甚至可能吗？由于 for 循环的每次迭代仅由一个线程运行，我可以（在每次迭代中）要求某些代码部分由多个线程并行运行吗？其余的代码应该只由一个线程运行，即循环迭代被分配到的线程。

例如。我有以下代码：

```
omp_p = omp_get_max_threads();
omp_set_nested(1);
#pragma omp parallel for num_threads(omp_p/2)
for(int p=0;p<omp_p/2;p++){
   size_t a = (p*N)/(omp_p/2);
   size_t b = ((p+1)*N)/(omp_p/2);
   for(int i=a;i<b;i++){
      /*Work on A[a]->A[b]*/
      for(int j=0;j<n;j++){
         for(int k=0;k<N;k++){
           /*Serial code*/
          #pragma omp parallel sections
              {
                 #pragma omp section
                   {

                   }
                 #pragma omp section
                   {

                   }

              }
           /*Serial work*/
           #pragma omp parallel sections
              {
              #pragma omp section
                   {

                   }
                 #pragma omp section
                   {

                   }
              }
           /*Serial code*/
         }
      }
   }
} 
```

这会导致程序比我根本没有使用并行部分要慢得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:52:19.453

嵌套 OMP 应该是可能的。但我担心由于以下原因，您可能看不到任何性能提升：

1.  嵌套 OMP 可能会导致生成的线程数多于 CPU 内核数。这最终可能会导致大量的上下文切换。
2.  您的 OMP 并行部分位于 4 个嵌套 for 循环的深处，因此，由于线程的创建和销毁，可能会产生开销。

# jquery - 用于文本选择的 jQuery 选择器

> ID：15442129
> 
> 赞同：3
> 
> 时间：2013-03-15T21:09:41.090
> 
> 标签：jquery, jquery-selectors

`::selection`我需要一个与CSS3相同的 jquery 选择器。

我希望每次在文档中选择文本时触发一个事件。

我找到了一个[解决方案](http://jsfiddle.net/rR8Sh/1/)，但它仅适用于 html 标签。我不仅需要 html 标签的选择器，还需要任何 text 的选择器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:25:43.380

首先， :selection CSS 标签已从[W3C CSS3 规范](http://www.w3.org/TR/CSS2/selector.html#pseudo-elements)中删除，并且在很大程度上不受浏览器的支持。但这不是你的问题！只好把它排除在外……

我相信你想要的实际上是一个 DOM 函数：[window.getSelection()](https://developer.mozilla.org/en-US/docs/DOM/window.getSelection)

注意：$(window).getSelection() 无效。

要获得由选择触发的事件，您可能会绑定到可能导致选择的相关鼠标/键盘/触摸事件，然后使用 getSelection() 查看它是否确实导致选择（例如，通过检查其长度） . 然后，您可以将其与计时器配对，以确保您不会为每个选定的字母都抛出事件，但这显然取决于触发事件后您想要做什么。

您可能还想仔细阅读这个（非重复！）问题：[将页面上的选定文本插入 textarea (jQuery)](https://stackoverflow.com/questions/815202/insert-selected-text-on-the-page-into-textarea-jquery)

# python - Wolfram Api 的 Python Xml 解析

> ID：15442130
> 
> 赞同：0
> 
> 时间：2013-03-15T21:09:53.993
> 
> 标签：python, xml, parsing, wolframalpha

我正在尝试使用 python xml 解析脚本来输出 wolfram api。这是我的脚本：

```
import urllib
import urllib.request
import xml.etree.ElementTree as ET

xml_data=urllib.request.urlopen("http://api.wolframalpha.com/v2/query?input=sqrt+2&appid=APLTT9-9WG78GYE65").read()
root = ET.fromstring(xml_data)

for child in root:
   print (child.get("title"))
   print (child.attrib) 
```

我知道它只是获取代码标题部分中所有内容的属性，但这是一个开始。

这是输出的一个片段：

```
<pod title="Input" scanner="Identity" id="Input" position="100" error="false" numsubpods="1">
 <subpod title="">
 <plaintext>sqrt(2)</plaintext> 
```

我试图让它只打印出标签中的内容。有谁知道如何编辑代码来获得它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:16:55.490

只有`<plaintext>`元素包含文本：

```
for pt in root.findall('.//plaintext'):
    if pt.text:
        print(pt.text) 
```

该`.text`属性保存元素的文本。

对于您的 URL，将打印：

```
sqrt(2)
1.4142135623730950488016887242096980785696718753769480...
[1; 2^_]
Pythagoras's constant
sqrt(2)~~1.4142  (real, principal root)
-sqrt(2)~~-1.4142  (real root) 
```

看起来`<pod>`标签也有有趣的标题：

```
for pod in root.findall('.//pod'):
    print(pod.attrib['title'])
    for pt in pod.findall('.//plaintext'):
        if pt.text:
            print('-', pt.text) 
```

然后打印：

```
Input
- sqrt(2)
Decimal approximation
- 1.4142135623730950488016887242096980785696718753769480...
Number line
Continued fraction
- [1; 2^_]
Constant name
- Pythagoras's constant
All 2nd roots of 2
- sqrt(2)~~1.4142  (real, principal root)
- -sqrt(2)~~-1.4142  (real root)
Plot of all roots in the complex plane 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T11:01:01.793

更多示例：

```
 import httplib2
 import xml.etree.ElementTree as ET

def request(query):
    query = urllib.urlencode({'input':query})
    app_id = "Q6254U-URKKHH9JLL"
    wolfram_api = "http://api.wolframalpha.com/v2/query?appid="+app_id+"&format=plaintext&podtitle=Result&"+query
    resp, content = httplib2.Http().request(wolfram_api)
    return content

def response(query):
    content = request(query)    
    root = ET.fromstring(content)
    error = root.get('error')
    success = root.get('success')
    numpods = root.get('numpods')
    answer= ''
    if success and int(numpods) > 0 :
        for plaintext in root.iter('plaintext'):
            if isinstance(plaintext.text, str) :
                answer = answer + plaintext.text
        return answer
    elif error:
        return "sorry I don't know that"
request("How old is the queen") 
```

# soa - Performance Center (LoadRunner) 11.0 协议包、SOA (Service Test Vuser) 和 SAML 安全技术

> ID：15442132
> 
> 赞同：1
> 
> 时间：2013-03-15T21:10:05.583
> 
> 标签：soa, saml, loadrunner

LoadRunner/性能中心 SOA 协议（包括服务测试 VUser）是否支持在请求中使用 SAML 令牌测试 Web 服务？

谷歌搜索这给了我关于这个主题的一些信息......

我的问题是：鉴于我有包含 SOA 协议的 Web 2.0 协议包，它再次包含服务测试 VUser，我是否能够使用 SAML 令牌作为请求的一部分来记录和回放针对 Web 服务运行的脚本?

[服务测试 VUser 是否支持请求中的 SAML 令牌？]

# .net - 正确使用 CodeContract 需要

> ID：15442134
> 
> 赞同：0
> 
> 时间：2013-03-15T21:10:17.400
> 
> 标签：.net, c#-4.0, code-contracts

基本上我想知道使用代码合同来确定 ConcurrentDictionary 中是否存在密钥是否是可接受的代码合同使用。这对我来说感觉不对，因为它不仅仅是参数检查，因为它取决于运行时字典的状态。

```
public class MyClass
{
    private ConcurrentDictionary<string, object> someItems = 
        new ConcurrentDictionary<string, object>();

    public object GetItem(string itemName)
    {
        Contract.Requires<ArgumentNullException>(!String.IsNullOrWhiteSpace(itemName));

        // ?? Is this a correct alternative to checking for null???
        Contract.Requires<KeyNotFoundException>(someItems.ContainsKey(itemName));

        return someItems[itemName];
    }
} 
```

但如果可以的话，它是一种更简洁的方法，它有 2 个 Contract.Requires 和一个 return，而不是下面的传统方式。

```
public class MyClass
{
    private ConcurrentDictionary<string, object> someItems = 
        new ConcurrentDictionary<string, object>();

    public object GetItem(string itemName)
    {
        Contract.Requires<ArgumentNullException>(!String.IsNullOrWhiteSpace(itemName));

        // Traditional null check
        var item = someItems[itemName];

        if (item == null)
        {
            throw new KeyNotFoundException("Item " + itemName + " not found.");
        }

        return item;            
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:20:02.630

我觉得有点奇怪：类的内部状态（即`someItems`字典的内容）绝对**不是**合同的一部分。你*可以*这样使用它，但是合约检查应该让调用者知道到底出了什么问题。在这种情况下，调用者永远不会猜测哪些参数是允许的，哪些是不允许的——即使在得到`KeyNotFoundException`.

此外，在这种特殊情况下，如果在字典中找不到对象，则抛出异常看起来不一致，在我看来，返回更有意义`null`。

顺便说一句，在您的第一个示例`itemName`中，在字典中搜索了两次。

# java - 树的中序遍历

> ID：15442136
> 
> 赞同：-2
> 
> 时间：2013-03-15T21:10:21.353
> 
> 标签：java, interface, tree-traversal, inorder

如何为以下树结构展平树（中序遍历）：[https ://gist.github.com/damadamdam/7b6364220b11871f2930](https://gist.github.com/damadamdam/7b6364220b11871f2930)

我的预期答案也附在要点中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:59:58.483

An`Either`包含 A 类型的字段或 B 类型的字段，但绝不会同时包含两者。您可以将一个函数传递给它的`ifLeft()`方法，该方法只有在它包含一个 A 时才会被调用。您可以将一个函数传递给它的`ifRight()`方法，如果它包含一个 B，它将被调用。所以，如果你同时调用这两种方法，一个且只有一个函数将被调用。

函数只是一个您可以实现的接口，它将某些东西转换为其他东西。

A`Tree`要么是单个元素，要么是三棵树的三元组（本身要么是一个元素，要么是三棵树的三元组等），形成递归数据结构。

Triple 有左、中、右元素。

要遍历树，您应该检查它是否包含单个元素或三元组。如果是单个元素，则遍历结束。如果它是一个三元组，那么你应该遍历它的左树、中间树和右树。

# ruby-on-rails - 由于分页，无法颠倒顺序

> ID：15442137
> 
> 赞同：1
> 
> 时间：2013-03-15T21:10:22.683
> 
> 标签：ruby-on-rails, sorting, pagination, will-paginate

我想`users`按降序排列。但是，当我添加`.reverse`它时，它会一次反转`users`一个页面，而不是全部一起。

**显示关注者：**

```
<%= render @users.reverse %>
<%= will_paginate %> 
```

**用户/_user：**

```
<%= link_to user.name, user %>

<% unless @user.nil? %>

  <% if request.path == "/users/#{@user.id}/listening_to" %>
    <br/>
    <span id="member_since"><%= "Listening Since" %> <%= @user.relationships.find_by_followed_id(user.id).created_at.strftime("%b. %d, %Y") %></span>
  <% end %>

  <% if request.path == "/users/#{@user.id}/listeners" %>
    <br/>
    <span id="member_since"><%= "Listener Since" %> <%= user.relationships.find_by_followed_id(@user.id).created_at.strftime("%b. %d, %Y") %></span>
  <% end %>

<% end %> 
```

**控制器：**

```
@users = @user.followed_users.paginate(page: params[:page]) 
```

似乎 Rails 智能地按`relationships_create`我想要的顺序排序，但它是按升序排列的。我希望最近的关注者出现在列表的顶部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:17:10.610

在控制器操作中，您可能有一些看起来像这样的代码：`@users = User.paginate(:page => params[:page])`.

您需要在该语句中放置相反的内容，因此它看起来像这样：（`@users = User.paginate(:page => params[:page]).order('id DESC')`可能`id`被替换为`created_at`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T21:27:53.537

```
@users = @user.followed_users.reverse.paginate(page: params[:page]) 
```

在分页之前在控制器级别反转

# c# - 使用 Distinct() 时不返回不同的记录

> ID：15442139
> 
> 赞同：0
> 
> 时间：2013-03-15T21:10:28.960
> 
> 标签：c#, linq, entity-framework, linq-to-entities, distinct

使用以下代码，我没有在 ID 上获得不同的记录。为什么是这样？

```
List<string> products = new List<string>();
products.Add("13CONV");
products.Add("12CONV");
products.Add("11CONV");
products.Add("10CONV");
products.Add("09CONV");
products.Add("08CONV");
products.Add("07CONV");

var predicate = PredicateBuilder.True<Services>()
                                .And(m => products.Contains(m.Service));

var Results = from d in Services.Distinct()
                                .Where(predicate )
              select d.ID; 
```

数据库表（服务）是：

```
ID         Service
==
400        13Conv
401        13Conv
400        12Conv
400        07Conv
400        11Conv 
```

使用上面的数据，当我期望 2 条记录时，我得到了 5 条记录。

ID 字段是数据库中的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:12:20.057

它是`Distinct`，不是`DistinctByKey`（LINQ 中不存在类似的方法），因此检查行内的所有值是否相等。通过该检查，行数不相等。这就是为什么它们都由查询返回。

顺便说一句 - 数据库将如何决定`Key`应该返回哪一行？

如果您`ID`仅尝试接收 s，并且它们应该是不同的，请尝试该查询：

```
var results = Services.Where(predicate).Select(s => s.ID).Distinct().ToList(); 
```

**更新**

根据这样[的](https://stackoverflow.com/questions/3542258/get-distinct-records-using-linq-to-entity)问题，LINQ to Entites 和`DISTINCT`. 请尝试使用该查询：

```
Services.Where(predicate).GroupBy(s => s.Id).Select(g => g.Key).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T21:16:13.580

你告诉它你想要一个不同的`Service`对象列表，而不是服务 ID（或名称）。

我不熟悉以编程方式构建谓词，但我认为你会做这样的事情：

```
var Results = (from d in Services.Where(Predicate)
               select d.ID).Distinct(); 
```

# c++ - B 树递归搜索 C++

> ID：15442143
> 
> 赞同：0
> 
> 时间：2013-03-15T21:10:42.193
> 
> 标签：c++, recursion, b-tree

该函数递归调用自身搜索 Btree，如果找到值则返回 true，如果未找到则返回 false。如果找不到，我还希望它在最后一次“找不到”。它工作正常，除了它多次说“未找到”（每次它下降到它说未找到的水平），因为它调用了自己。

```
bool lookup(int val, btnode *n) //returns true/false if value is in btree
{

if (n==NULL) return false; //empty tree

for (int i=0;i< n->count;i++) //check in present node for the val
    if(n->value[i]==val)
    {
        flag = true;
        return true;
    }

//check in child node

    for(int i =0;i<n->count;i++) //check for child node
    {   if(val < n->value[i])
        {   cout<<"checking a different node."<<endl;
            lookup(val,n->child[i]);
        }
    }
    if(val > n->value[(n->count)-1])
    {
        cout<<"searching a right subtree"<<endl;
        lookup(val, n->child[n->count]);
    }
if (flag==false)
return false;
else return true;
}

bool lookup2(int val, btnode *n)
{
if(lookup(val, n)==false)
{
    cout<<"not found"<<endl;
    return false;
}
else
{
    cout<<"Found it"<<endl;
    return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:17:01.493

您可能想要创建一个调用此查找函数并进行打印的辅助方法。就像是：

```
bool lookup_print(int val, btnode *n) {
    bool found = lookup(val, n);
    if (found) {
        cout << "Found it!" << endl;
    } else {
        cout << "Not found..." << endl;
    }
    return found;
} 
```

此外，您需要确保递归调用在找到节点时返回它们的值。所以在你递归的任何地方，你都会想要这样的东西：

```
bool found = lookup(val,n->child[i]);
if (found) {
    return found;
} 
```

# desire2learn - 是否可以使用 Valence API 来处理大量的实时用户帐户创建和注册？

> ID：15442148
> 
> 赞同：0
> 
> 时间：2013-03-15T21:10:54.077
> 
> 标签：desire2learn, valence

Valence 允许这样做，但我想知道尝试以这种方式自动化用户帐户设置和注册是否存在限制。我们是一个相对较小的机构，可能在一个给定的学期内有数百名学生，分散在几个星期内，所以我认为实时事件不会有问题。但我想知道对于一所可能有数千名学生一直在更新的大型大学来说，这可能意味着什么。随着学期正式开始，肯定会出现活动高峰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:13:45.100

绩效问题是一个复杂的问题，具有许多相互依赖的因素。我无法评论托管您的后端 LMS 的硬件的影响，但显然，更高性能的硬件和网络部署将导致客户端和 LMS 之间更高性能的交互。

如果您的需求是“分散在几个星期内的数百个创作”，那肯定在后端服务的舒适预期性能范围内。

目前，每个创建用户的请求都必须单独完成，如果您想为用户预先提供密码，则需要两次调用（您可以在一次调用中轻推 LMS 发送“密码集”） " 向新用户发送电子邮件，但如果您想手动为用户设置密码，则必须在创建用户记录后在单独的调用中执行此操作）。单个调用非常轻量级，是一个简单的 HTTP POST，带有响应以提供创建的用户记录的详细信息。

有扩展对批量操作支持的路线图计划，批量用户创建当然是改进的逻辑可能性。

# android - 了解蓝牙耳机与 Android 的连接

> ID：15442149
> 
> 赞同：0
> 
> 时间：2013-03-15T21:10:57.050
> 
> 标签：android, bluetooth, connection, headset

我有一个蓝牙耳机（BTC6White）。我想对着麦克风说话，Android 设备会播放声音。

那么，我该怎么做呢？首先，我可以建立一个套接字连接

```
socket = mDevice.createRfcommSocketToServiceRecord(UUID.fromString("0000111e-0000-1000-8000-00805f9b34fb"));
socket.connect(); 
```

那么，我如何获得音频？这个方法有什么用：startBuetoothSco？要将音频放入扬声器，我应该使用 Auditrack 吗？

```
int buffersize = AudioTrack.getMinBufferSize(8000, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_8BIT);
soundData = new byte [buffersize*5];    
audioTrack = new AudioTrack(AudioManager.STREAM_VOICE_CALL, 
   8000, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_8BIT, 
   soundData.length,AudioTrack.MODE_STREAM); 
```

但是，那么，我应该填充缓冲区 soundData 吗？如何？使用套接字（进入线程）？

```
 mmInStream = socket.getInputStream();
  public void run() {
  byte[] buffer = new byte[8000*2]; 
      while (true) {
           bytes = mmInStream.read(buffer);
            audioTrack.write(buffer, 0, bytes); //write directly?
      }} 
```

startBuetoothSco() 是为了什么？了解 sco 国家？SCO_AUDIO_STATE_CONNECTED... 还是发送/接收数据？我不明白如何从耳机获取音频数据，然后如何流式传输到扬声器。是否需要建立SCO连接（使用AudioManager）才能获取蓝牙耳机的数据？

很难找到有关此问题的信息，并且 android 文档很差（本主题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T05:35:26.910

要检索音频数据，您可以设置流源。例如，如果你想通过蓝牙耳机录制声音，你可以初始化 AudioRecord 和 AudioManager 如下：

```
AudioRecord ar = new AudioRecord(MediaRecorder.AudioSource.MIC,
                    RECORDER_SAMPLERATE, 
                    RECORDER_OUT_CHANNELS,
                    RECORDER_AUDIO_ENCODING,
                    bufferSize);
ar.startRecording(); 
```

并打电话

```
AudioManager am = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
am.startBluetoothSCO(); 
```

然后，您可以定义一个线程来读取音频数据，您可以在其中编写以下代码：

```
private Runnable run_record = new Runnable(){

    @Override
    public void run() {
        // TODO Auto-generated method stub
        short dataBuf[] = new short[bufferSize];
        FileOutputStream os = null;
        try {
            os = new FileOutputStream(file_path);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        while(isRecording){
            ar.read(dataBuf, 0, bufferSize);
            Log.d(LOG_TAG, "writing "+bufferSize+" bytes of data to file "+file_path);
            byte data[] = short2byte(dataBuf);
            try {
                os.write(data, 0, bufferSize);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        try {
            os.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }}; 
```

我希望我解释清楚。

# php - 在插入数据库之前，我应该从用户密码中删除哪些字符？

> ID：15442158
> 
> 赞同：0
> 
> 时间：2013-03-15T21:11:37.313
> 
> 标签：php, sql

我有一个从我的密码中删除字符的功能。

```
public function stripChars($var)
{
    $bad_symbols = array(",", "|", "'","<",">",'"');
    $var = str_replace($bad_symbols, "", $var);
    return $var;
} 
```

我想知道是否有办法让用户在密码中使用逗号，而不会弄乱 SQL 语句？如果不是，除了我已经剥离的符号之外，我不应该在密码中允许哪些符号。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T21:13:31.007

> 在插入数据库之前，我应该从用户密码中删除哪些字符？

一个都没有。删除的字符越多，密码越弱。

> 我想知道是否有办法让用户在密码中使用逗号，而不会弄乱 SQL 语句？

1.  不要手动构建 SQL。使用[准备好的语句和绑定变量](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)。这将转义任何可能导致问题的字符。
2.  不要在数据库中存储纯文本密码。[散列它们](http://php.net/manual/en/faq.passwords.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T21:15:27.870

```
without it messing up the SQL statement? 
```

哎呀，你需要阅读 SQL 注入：[http ://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)

因此，您应该允许密码中包含**任何**字符，并确保不要直接在 SQL 语句中使用输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T21:15:32.077

您永远不应该从用户密码中删除字符。如果他们输入密码为“r2^£XS\'32”，然后您在存储之前对其进行过滤，他们将永远无法登录，因为他们的密码将不正确。

至于是否应该*限制*密码中的字符，那是另一回事。您需要限制不属于您使用的任何字符编码的字符，但除此之外，这是一个坏主意。限制可用的字符集使蛮力攻击更容易成功。

相反，您想要做的是使用准备好的语句，因为这些将防止 SQL 注入（我相信这是您所关心的）。

还值得一提的是，您应该在存储密码之前对其进行哈希处理；永远不要存储为纯文本或可逆加密。理想情况下，还要对密码加盐以提高安全性。

查看[密码散列](http://php.net/manual/en/faq.passwords.php)和[PDO 以及准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)以获取更多信息

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-15T21:14:52.550

您不应该从密码中删除任何字符！但是，在将它们放入数据库或比较身份验证之前，请先“转义”它们。

# ruby - 合并两个哈希值，不重叠

> ID：15442162
> 
> 赞同：0
> 
> 时间：2013-03-15T21:12:02.470
> 
> 标签：ruby

我有两个哈希值，基本上看起来像：

```
sales = { 
  "2013-03-15": {sales: 5}, 
  "2013-03-14": {sales: 3}, 
  "2013-03-12": {sales: 8},
  ... } 
```

和

```
views = { 
  "2013-03-15": {views: 30}, 
  "2013-03-14": {views: 23}, 
  "2013-03-13": {views: 35}, 
  ... } 
```

如何将它们合并成一个看起来像这样的哈希：

```
data = { 
  "2013-03-15": {views: 30, sales: 5}, 
  "2013-03-14": {views: 23, sales: 3}, 
  "2013-03-13": {views: 35, sales: 0}, # or just {views: 35} 
  ... } 
```

基本上，我需要保持密钥和所有数据完好无损。

`data = views.merge sales`似乎覆盖了所有视图数据，基本上只剩下销售哈希。

**编辑：**我也可以将销售或视图散列转换为简单的散列（不是散列的散列），但我仍然不知道如何进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:26:02.440

这：

```
sales.merge(views) { |k, o, n| o.merge(n) } 
```

可运行示例：

```
views = {
  "2013-03-15" => {:views=> 30},
  "2013-03-14" => {:views=> 23},
  "2013-03-13" => {:views=> 35},
}

sales = {
  "2013-03-15" => {:sales=> 5},
  "2013-03-14" => {:sales=> 3},
  "2013-03-12" => {:sales=> 8},
}

puts sales.merge(views) { |k, o, n| o.merge(n) }
=> {"2013-03-15"=>{:sales=>5, :views=>30}, "2013-03-14"=>{:sales=>3, :views=>23}, "2013-03-12"=>{:sales=>8}, "2013-03-13"=>{:views=>35}} 
```

# iphone - uiwebview 加载时间过长

> ID：15442164
> 
> 赞同：0
> 
> 时间：2013-03-15T21:12:07.420
> 
> 标签：iphone, html, uiwebview, loading

我正在使用 Uiwebview 为 Iphone 应用加载 html 文件。在不同页面之间切换会持续几秒钟，此时屏幕仍为白色。是否有任何想法如何摆脱加载时间，例如通过预加载下一页？

# c# - 使用 ASP.net 的 OpenSearch 自动完成

> ID：15442169
> 
> 赞同：0
> 
> 时间：2013-03-15T21:12:24.677
> 
> 标签：c#, php, asp.net, json

我的网站目前使用以下代码向 chrome 添加了一个自定义 Omnibox 搜索引擎：

ombnibox.xml

```
<?xml version="1.0"?>
<OpenSearchDescription xmlns="http://a9.com/-/spec/opensearch/1.1/">
  <ShortName>Example </ShortName>
  <Description>Example Search</Description>
  <Url type="text/html" template="http://Example.com /search.aspx?searchVal=    {searchTerms}"></Url>
</OpenSearchDescription> 
```

我的网站母版页包括：

```
<link type="application/opensearchdescription+xml" title="Example" rel="search" href="/omnibox.xml" /> 
```

这很好用，用户可以毫无问题地进入我的搜索结果页面。我想将搜索建议集成到这个自定义搜索引擎中，但我什至不知道从哪里开始。我找到了一堆返回 JSON 的 PHP 示例，但我找不到 ASP.net 的示例或从数据库中检索结果建议的示例。

任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T16:54:09.253

您需要将以下行添加到您的 xml 文件中

```
<Url type="application/x-suggestions+json" method="get" template="http://www.domain.co.uk/autocomplete" /> 
```

并得到以下格式的结果：

```
["bm",["BMW","BMW X5","BMW X3","BMW 5 Series","BMW 1 Series","BMW 1 Series Cabriolet","BMW 3 Series","BMW Z4","BMW 3 Series Compact","BMW 116i"]] 
```

查看[Mozilla 的文档](https://developer.mozilla.org/en/Supporting_search_suggestions_in_search_plugins)

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T18:34:16.720

我对此进行了更多研究，并且能够创建一个 Web 服务，该服务返回格式正确的 JSON 值以供 Omnibox 使用**！！但是！**多功能框代码要求调用“GET”请求来访问默认情况下被 ASP.net 阻止的 Web 服务。一旦我覆盖了 ASP.NET 的默认设置以允许 GET 请求，它将只允许我返回 XML 格式的值。

我目前的假设是，除非我创建非 ASP.net Web 服务，否则不能选择使用 Omnibox 预先输入功能。

***更新***

我能够使用 ASP.NET MVC WebAPI 和以下代码来解决这个问题：

```
public object Get(string id)
    {
        List<ResultObject> resultValues = new List<ResultObject>();

        foreach (string val in ***SQLQUERYRESULTS***)
        {
            test singleResult = new ResultObject();
            singleResult.Name = val;
            singleResult.Description = "Server";
            singleResult.Url = "***CUSTOMURL***?ServerName=" + val;
            resultValues.Add(singleResult);

        }
        var entities = resultValues;
        var names = entities.Select(m => m.Name);
        var description = entities.Select(m => m.Description);
        var urls = entities.Select(m => m.Url);
        var entitiesJson = new object[] { id, names, description, urls };

        return entitiesJson;
    }
}

public class ResultObject
{
    public string Name { get; set; }
    public string Description { get; set; }
    public string Url { get; set; }

} 
```

# bash - 使用 awk 对变量进行操作

> ID：15442173
> 
> 赞同：1
> 
> 时间：2013-03-15T21:12:44.097
> 
> 标签：bash, scripting, awk

我正在尝试编写一个 Bash 脚本，该脚本读取包含多列数据的文件，并将第二列中的每个值乘以第三列中的每个值，将所有这些乘法的结果加在一起。

例如，如果文件看起来像这样：

```
Column 1    Column 2    Column 3    Column 4
genome      1           30          500
genome      2           27          500
genome      3           83          500
... 
```

脚本应该乘以 1*30 得到 30，然后 2*27 得到 54（并将其加到 30），然后 3*83 得到 249（并将其加到 84）等等。

我一直在尝试使用 awk 来解析输入文件，但不确定如何让操作逐行进行。现在它在读取第一行并执行变量操作后停止。

这是我到目前为止所写的：

```
for file in fileone filetwo
do
    set -- $(awk '/genome/ {print $2,$3}' $file.hist)
    var1=$1
    var2=$2
    var3=$((var1*var2))
    total=$((total+var3))

    echo var1 \= $var1
    echo var2 \= $var2
    echo var3 \= $var3
    echo total \= $total
done 
```

我尝试在所有内容周围放置一个“while read”循环，但无法让变量随每一行更新。我想我会以错误的方式解决这个问题！

我对 Linux 和 Bash 脚本非常陌生，因此将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:22:36.390

那是因为 awk 读取整个文件并在每一行上运行它的程序。所以你得到的输出`awk '/genome/ {print $2,$3}' $file.hist`看起来像

```
1 30
2 27
3 83 
```

依此类推，这意味着在 bash 脚本中，该`set`命令进行以下变量赋值：

```
$1 = 1
$2 = 30
$3 = 2
$4 = 27
$5 = 3
$6 = 83 
```

等等但是你只在你的脚本中使用`$1`和`$2`，这意味着文件的其余内容——第一行之后的所有内容——都被丢弃了。

老实说，除非您这样做只是为了学习如何使用 bash，否则我会说只是在 awk 中进行。由于 awk 会自动遍历文件中的每一行，因此很容易将第 2 列和第 3 列相乘并保持运行总计。

```
awk '{ total += $2 * $3 } ENDFILE { print total; total = 0 }' fileone filetwo 
```

这`ENDFILE`是一个特殊的地址，意思是“在每个文件的末尾运行下一个块，而不是在每一行。”

如果您*这样*做是出于教育目的，让我这样说：关于在 bash 中进行算术运算，您唯一需要知道的是，您永远不应该在 bash 中进行算术运算：-P 说真的，当您想要操作数字时，bash 是最*不*适合这项工作的工具之一。但是，如果您真的想知道，我可以对其进行编辑以包含一些有关如何主要在 bash 中执行此任务的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:36:35.877

我同意这`awk`通常更适合这种工作，但如果您好奇纯`bash`实现会是什么样子：

```
for f in file1 file2; do
    total=0
    while read -r _ x y _; do
        ((total += x * y))
    done < "$f"
    echo "$total"
done 
```

# mysql - 此更新声明如何工作？

> ID：15442177
> 
> 赞同：1
> 
> 时间：2013-03-15T21:12:57.320
> 
> 标签：mysql, sql

我今天让一位同事编写了一个编写不正确的 SQL 更新。

```
UPDATE table SET column  = 'change'
WHERE id = 2401 OR 2402 OR 2403 OR 2404 OR 2405 OR 2406;

Query OK, 264 rows affected (0.03 sec)
Rows matched: 9997 Changed: 264  Warnings: 0 
```

为什么会这样？

我认为它最多会更新 1 行，ID 是唯一的。和 2402 和 2403....等不匹配任何东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T21:18:46.627

发生的事情`OR 2402`被视为真值，就好像您放置`1 = 1`或另一个始终返回真值的条件一样。MySQL 将您的查询读取为

```
UPDATE table SET column  = 'change'
WHERE id = 2401 OR true OR true OR true OR true OR true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T21:14:26.753

该声明是错误的，并且会更新您的所有记录。正确的查询是：

```
UPDATE table 
SET column  = 'change'
WHERE id = 2401 OR id= 2402 OR id=2403 OR id=2404 OR id=2405 OR id=2406; 
```

或更好：

```
UPDATE table 
SET column  = 'change'
WHERE id IN (2401,2402,2403,2404,2405,2406); 
```

您的原始查询更新 id 为 2401 的记录以及任何其他保持 2042 为“true”的行，它适用于所有人（因为 2042 不是 0 或 false）

# css - 具有`position:fixed`的div，但仍然具有与`position:relative`相同的行为

> ID：15442179
> 
> 赞同：0
> 
> 时间：2013-03-15T21:13:12.643
> 
> 标签：css, positioning

当使用`position:fixed;`它时，人们会得到预期的结果：

![在此处输入图像描述](../Images/c6a7111884e32a2f85ff042de2a09760.png)

我真正想要实现的是：

![在此处输入图像描述](../Images/e79395a33ce10741fb3d775c7c7ff7a6.png)

**就像**使用两个`position: relative;`元素时的结果一样

![在此处输入图像描述](../Images/94d473f7ede6b2fc0192a8877e00aef7.png)

不要误会我的意思，我知道如何`position: fixed`或如何`position: absolute`工作并且应该表现得如何，我还没有弄清楚如何获得同一个 div 的两个属性......

一种可行的方法，但不是一个令人满意的解决方案是我`position: relative`在我的固定元素下方放置了一个 -div，不允许第二个元素在固定元素下方移动，因为它已经被额外的 div 占用。

![在此处输入图像描述](../Images/bf49501ab070af54d7da4a1c7880f9a8.png)

所以我试图让*第二个相对 div*使用`:after` **或** `:before`伪元素。这似乎不太奏效

```
div:after, div:before { position: relative; } 
```

它以某种方式混淆了，因为元素本身是

```
div { position: fixed } 
```

`fixed`并且转身`relative`显然也不起作用，因为`fixed`将绑定到`relative`- 元素。

有任何想法吗？

如果有人想知道为什么我需要使用`fixed`而不是仅仅使用`relative`: 这是出于滚动的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:19:15.977

为什么不使用相对 div 上的边距？

[http://jsfiddle.net/q3nQr/1/](http://jsfiddle.net/q3nQr/1/)

html

```
<div id="fixed"></div>
<div id="relative"></div> 
```

css

```
#fixed { position: fixed; width: 60px; height:100px; background: red;  }

#relative { position: relative; width: 300px;height:1000px; background: green; margin-left:65px; } 
```

**更新**

看一下静态定位的 w3 规范（只需阅读前两段）。

[http://www.w3.org/wiki/CSS_absolute_and_fixed_positioning](http://www.w3.org/wiki/CSS_absolute_and_fixed_positioning)

> 绝对定位的元素完全从文档流中删除。这意味着它们对其父元素或源代码中出现在它们之后的元素完全没有影响。因此，绝对定位的元素将与其他内容重叠，除非您采取措施阻止它。当然，有时这种重叠正是你想要的，但你应该意识到它，以确保你得到你想要的布局！
> 
> 固定定位实际上只是绝对定位的一种特殊形式；具有固定定位的元素相对于视口/浏览器窗口而不是包含元素是固定的；即使页面被滚动，它们也会在浏览器窗口内保持完全相同的位置。

这意味着具有固定或绝对位置的元素不会与文档中的任何其他元素相关联，这意味着它们不会影响另一个元素的宽度。如果不知道静态元素的宽度，我认为您将需要使用 javascript 操作 DOM；像（jquery，未测试）这样简单的东西：

```
var staticwidth = $("#static").width();
$("#relative").css('margin-left', staticwidth + 'px'); 
```

# oop - Lua 模块继承

> ID：15442183
> 
> 赞同：2
> 
> 时间：2013-03-15T21:13:23.933
> 
> 标签：oop, inheritance, nginx, lua

在 Lua 中的模块继承方面需要您的帮助。

假设我有 2 个模块：

第一个是“父”它定义了一个名为“端口”的字段和方法“连接”，它使用端口和域字段连接到某些服务。我想在子模块中定义第二个字段（域），而不是在父模块中。或者至少通过子模块覆盖这个字段。

```
module('Parent', package.seeall)

port = 1234

function connect() 
   ngx.say("connecting to "..domain..":"..port.."\n")

end 
```

请注意，此处*未定义“**域*”变量！

 *现在让我们看看第二个，它是“孩子”：

```
local base = _G

module('Child', package.seeall)

local Parent = base.require('Parent')
base.setmetatable(Child, { __index = Parent })

domain     = '127.0.0.1' 
```

这里是创建子实例的主要 lua 代码：

```
local Child = require "Child"

Child.connect() 
```

问题是*子模块中定义的变量对于**父*模块中定义的方法是不可见的。我需要更改此行为以让父例程代码看到子模块中定义的变量。这可能吗？我可以以某种方式将*Child*的命名空间复制到 Parent 模块吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:17:45.540

我对 Lua 模块不是特别熟悉，但在我看来，正确的解决方案是将方法重新定义为`function connect(self)`然后访问`port`和`domain`关闭`self`，这将是包。

```
function connect(self)
    ngx.say("connecting to "..self.domain..":"..self.port.."\n")
end
-- this could also be written as function Parent:connect() 
```

...

```
local Child = require "Child"

Child:connect() 
```

如果我只是设置没有模块的常规表继承，那我肯定会这样做。*

# xaml - Windows 商店 xaml 将带有单击事件处理程序的按钮添加到 gridviewitem

> ID：15442185
> 
> 赞同：0
> 
> 时间：2013-03-15T21:13:31.647
> 
> 标签：xaml, windows-8

我有一个 gridView 数据来自数据源。

如何将按钮添加到 gridviewitem 数据模板并将单击事件处理程序添加到按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:57:57.017

另一种方法是根本不实际使用按钮，而只是设置`IsItemClickEnabled`和`true`使用[`ItemClick`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.listviewbase.itemclick.aspx)事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:23:08.277

执行此操作的适当方法是将按钮的命令绑定到`DataContext`模板化项目的命令属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T23:00:17.420

如果你真的需要一个按钮，`ItemTemplate`添加事件处理程序的最简单方法是创建一个`UserControl`供在 中使用`ItemTemplate`，将按钮放入其中并在其中添加事件处理程序`UserControl`。

# f# - 统一，棱镜，FSharp

> ID：15442189
> 
> 赞同：3
> 
> 时间：2013-03-15T21:13:47.970
> 
> 标签：f#, prism, unity-container

当我尝试注入 FSharp 库时出现解析错误，但在使用 CSharp 库时却没有。

我有 3 个项目：

*   csharp中的一个主要应用程序
*   一个 CSharp 项目，其中包含一个类，其构造函数需要一个 IUnityContainer，该 IUnityContainer 可以很好地实例化
*   一个 FSharp 项目，其中包含一个类，其构造函数需要一个无法实例化并出现错误的 IUnityContainer

> 依赖项解析失败，type = "ModuleDBGraphFS.ModuleEntityGraphFS"，name = "(none)"。异常发生时：解决时。异常是： InvalidOperationException -**当前类型 Microsoft.Practices.Unity.IUnityContainer 是一个接口，无法构造。您是否缺少类型映射？**
> 
> 在异常发生时，容器是：
> 
> Resolving ModuleDBGraphFS.ModuleEntityGraphFS,(none) Resolving parameter "container" of constructor ModuleDBGraphFS.ModuleEntityGraphFS(Microsoft.Practices.Unity.IUnityContainer container, Microsoft.Practices.Prism.Regions.IRegionManager manager) Resolving Microsoft.Practices.Unity.IUnityContainer,(none )

第一个项目中的应用程序类（WPF 项目，添加 prism，从 app.xaml 中删除 startupuri，添加 bootstrapper 后面的代码）

```
namespace WpfApplication
{
    class Bootstrapper : UnityBootstrapper
    {
        protected override DependencyObject CreateShell()
        {
            return this.Container.Resolve<Shell>();
        }

        protected override void InitializeShell()
        {
            base.InitializeShell();

            App.Current.MainWindow = (Window)this.Shell;
            App.Current.MainWindow.Show();
        }

        protected override void ConfigureModuleCatalog()
        {
            base.ConfigureModuleCatalog();

            ModuleCatalog moduleCatalog = (ModuleCatalog)this.ModuleCatalog;
// OK       moduleCatalog.AddModule(typeof(ModuleDBGraph.ModuleEntityGraph));
// KO       moduleCatalog.AddModule(typeof(ModuleDBGraphFS.ModuleEntityGraphFS)); 
        }
    }
} 
```

在 C# 项目中

```
public class ModuleEntityGraph : IModule
{
    private IUnityContainer _container;
    private readonly IRegionManager _manager;

    public ModuleEntityGraph(IUnityContainer container, IRegionManager manager)
    {
        _container = container;
        _manager = manager;
    }

    void IModule.Initialize()
    {
    }
} 
```

在 F# 项目中

```
type ModuleEntityGraphFS(container:IUnityContainer, manager:IRegionManager) =
    do printfn "hi"
    interface Microsoft.Practices.Prism.Modularity.IModule with 
        member x.Initialize() = 
            do () 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:04:49.323

出于某种原因，棱镜的**Nuget**脚本在我的模块项目中添加了参考

```
C:\windows\assembly\GAC_MSIL\Microsoft.Practices.Unity\1.2.0.0__31bf3856ad364e35\Microsoft.Practices.Unity.dll 
```

虽然 shell 项目本身正在引用

```
WpfApplication3\packages\Unity.2.1.505.2\lib\NET35\Microsoft.Practices.Unity.dll 
```

我开始的一个新解决方案让我看到了问题所在。因此，它无法解析 UnityContainer 本身的奇怪消息（应该由 Prism Unity 扩展在某处注册......）

# ruby-on-rails - rails - 使用 Rails.cache 会出错

> ID：15442194
> 
> 赞同：2
> 
> 时间：2013-03-15T21:14:19.987
> 
> 标签：ruby-on-rails, caching

我正在尝试缓存一个昂贵的查询，该查询在 Rails 3 中整个站点的多个请求中重复使用。

当用户单击表格查看报告或用户单击查看地图或用户单击打印内容时，将执行以下查询：

```
reports.where{(time > my{range.begin}) & (time < my{range.end})} 
```

这是一个代价高昂的查询，可能会产生数千条记录。我想缓存它，所以在第一次调用它之后，它会存储在缓存中，直到查询中的一条记录被修改（例如更新）。

我用这个替换我的查询：

```
Rails.cache.fetch('time_reports') { reports.where{(time > my{range.begin}) & (time < my{range.end})} } 
```

但它引发了一个例外：

```
TypeError (can't dump anonymous class #<Module:0x007f8f92fbd2f8>): 
```

作为问题的一部分，我想知道使用 Rails.cache.fetch 是否还需要我在 config/environments/production.rb 中添加以下内容：

```
config.cache_store = :mem_cache_store, "cache-1.example.com", "cache-2.example.com" //obviously I would use my ip 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T23:23:46.220

您正在尝试将 Arel 关系转储到您的缓存存储中，不幸的是这是不可能的。你想转储结果数组，所以这样做：

```
Rails.cache.fetch('time_reports') { reports.where{(time > my{range.begin}) & (time < my{range.end})}.all } 
```

...或者...

```
Rails.cache.fetch('time_reports') { reports.where{(time > my{range.begin}) & (time < my{range.end})}.to_a } 
```

这将导致关系成为一个真正的数组，您可以照常将其存储在 memcached 中。

# c++ - 试图将我的结果扩展到小数点后 8 位

> ID：15442195
> 
> 赞同：2
> 
> 时间：2013-03-15T21:14:20.790
> 
> 标签：c++, decimal, scientific-computing

我正在尝试将我的程序的结果扩展到小数点后 8 位。我浏览了这个页面（[http://www.cplusplus.com/reference/ios/ios_base/precision/](http://www.cplusplus.com/reference/ios/ios_base/precision/)）但我没有任何运气改变结果。有什么建议么？谢谢。

```
#include <iostream>
#include <math.h>

using namespace std;

long double taylorSeriesToCalculateCosine(long double x, int degree);
long factorial( int input );

int main(int argc, const char * argv[])
{
    cout << "Cosine of .3: ";
    cout << taylorSeriesToCalculateCosine(.3,3) << endl;

    return 0;
}

// taylor series to calculate cosine
long double taylorSeriesToCalculateCosine(long double x,int degree){

    int i = 0;
    long double accumulation = 0;
    int cosInputArray[4] = {1,0,-1,0};

    while (i < degree) {

        int input = cosInputArray[i%4];

        accumulation += input*((pow(x, i))/factorial(i)); 
        i++;
    }

    return accumulation;
} 
```

输出：

```
Cosine of .3: 0.955 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T21:17:12.313

您需要[`std::setprecision`](http://en.cppreference.com/w/cpp/io/manip/setprecision)从`<iomanip>`标题：

```
cout << setprecision( 8 ) << taylorSeriesToCalculateCosine(.3,3) << endl; 
```

如果您希望结果*始终*具有一定的宽度，请使用

```
cout << setfill('0') << left << setw(10) << setprecision(8)
     << taylorSeriesToCalculateCosine(.3,3) << endl; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T21:18:04.997

正如链接中的文章所述：

```
cout << "Cosine of .3: ";
std::cout.precision(10);
cout << taylorSeriesToCalculateCosine(.3,3) << endl; 
```

就是这样。

# mysql - Activerecord属性字符串反转再排序

> ID：15442196
> 
> 赞同：0
> 
> 时间：2013-03-15T21:14:22.377
> 
> 标签：mysql, ruby-on-rails, rails-activerecord

伙计们，

我有一种情况，我的模型中有一个字符串属性（**名称**），其中包含以下格式的数据：

*   dan01
*   乔尔02
*   ken01
*   raol01

我想做的是按**名称**查询和排序，但我希望 order by 以相反的顺序使用字符串，即**dan01**应该被视为**10nad**，想知道在 rails 中执行此操作的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:30:16.077

这取决于您使用的数据库，因为您需要在数据库层执行此操作以提高性能。实际上，我认为您可能想重新考虑您在这里实际想要完成的工作，因为我怀疑这是否真的是您正在寻找的答案。*-绝地心灵融合-*

假设您使用的是 MySQL：如果您的模型是`Person`，那么您的查询将是`Person.order('REVERSE(name)')`

你可以用红宝石来做，阿拉，`Person.all.sort_by{|p| p.name.reverse}`但我真的不建议这样做。

在不知道您正在做什么的完整上下文的情况下，我会冒险猜测您想要存储第二个整数列，该列是您的排序顺序或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:29:25.090

我面前没有 MySQL 数据库，但您应该能够执行以下操作：

```
Foo.order('REVERSE(name)') 
```

以上适用于 Postgres，并且根据[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_reverse](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_reverse)也应该适用于 MySQL 。

# database - #1062 - 键 1 的重复条目“1”| WordPress

> ID：15442202
> 
> 赞同：0
> 
> 时间：2013-03-15T21:14:39.177
> 
> 标签：database, wordpress

嘿伙计们，我/我希望这里有人可以帮助我...

我正在尝试为我的 wordpress 网站导入数据库，但出现错误。

这是我得到的错误！

> -- -- 转储表数据`wp_comments`-- INSERT INTO `wp_comments`( `comment_ID`, `comment_post_ID`, `comment_author`, `comment_author_email`, `comment_author_url`, `comment_author_IP`, `comment_date`, `comment_date_gmt`, `comment_content`, `comment_karma`, `comment_approved`, `comment_agent`, `comment_type`, `comment_parent`, `user_id`) VALUES (1, 1, 'Mr WordPress', '', ' [http://wordpress.org /](http://wordpress.org/)', '', '2013-02-19 11:30:17', '2013-02-19 11:30:17', '嗨，这是一条评论。\n要删除评论，只需登录并查看帖子的评论。在那里您可以选择编辑或删除它们。', 0, '1', '', '', 0, 0), (2, 81, 'admin', 'support@hpb.com', '' , '223.255.245.41', '2013-02-28 13:34:06', '2013-02-28 13:34:06', '这是测试评论...', 0, '1', ' Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0', '', 0, 1), (3, 75, 'admin', 'support@hpb.com', '', '223.255.245.41', '2013-02-28 13:34:21', '2013-02-28 13:34:21', '这是测试评论...', 0, '[...]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:21:38.483

看起来您要导入的数据库已经在数据库中有一条 ID 为 1 的注释，并且该表具有重复 ID 限制。您可以检查并更改转储文件中条目的所有 ID，也可以截断当前的注释表，然后查看它是否允许您导入它。

# jakarta-ee - 如何正确实现模型/控制器/视图网页设计？

> ID：15442205
> 
> 赞同：1
> 
> 时间：2013-03-15T21:15:00.677
> 
> 标签：jakarta-ee

我正在使用 Java-ee 和 eclipse 来构建我的网站。我很困惑。

Java Beans, Servlets, jsp, html5, css3, java classes, java script, php....Model, View, Controller....

我想做的就是为学校项目设计一个好看的网站和一个数据库。为此，我将 java-ee 与 eclipse、tomcat 服务器和 mySQL 数据库一起使用。

我的问题是，似乎有 1000 万种不同的方法可以做到这一点，并且在此之上还有重叠的语言！

目前，我的设计由jsp页面和java类以及css3文件组成，让事情看起来更漂亮。我有一个 jsp 页面，如果我需要做一些事情，我会创建一个 java 类并在那里做。此外，每个页面都链接到不同的页面，就像一个巨大的网络。

我知道这是一个糟糕的设计，所以我的问题是，我应该如何设计一个好的模型视图控制器设置和巫婆语言？当我可以使用普通的旧 java 和 html4/5 时，我为什么还要使用 javascript 或 php？

* * *

编辑

这是我如何使用我的 jsp 页面的示例。

![在此处输入图像描述](../Images/6f407f88c949a235b465fe339c3170cb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:23:28.043

只要将所有逻辑和数据操作都保留在 JSP 之外，您就已经将逻辑 (Java) 与视图 (JSP) 分开了。接下来是将逻辑（控制器）与数据（模型）分离。

如果您不使用任何类型的框架，这将通过将所有业务逻辑封装到 Servlet 中来完成，每个 Servlet 都充当控制器；并将所有数据放入一组模型类（通常是相当基本的 Bean，以及一组 DAO 类，用于在 DB 和 Java 对象之间加载/存储数据）。因此，DAO 类（通常每个实体类型一个）连接到数据库，请求记录，将列传输到适当模型类的新实例的属性中，并返回该实例以供控制器/视图使用。

您的 Controller servlet 获取请求，从模型加载任何必要的数据，进行任何必要的更新，通过模型保存任何更改，限定任何必要的数据范围，并重定向到视图 (JSP)。

这就是完整的 MVC：模型（bean 和 DAO 类）、视图（JSP）和控制器（Servlet）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T21:24:15.183

您是对的，您可以使用大量技术来构建网站，而且很容易迷失方向。对于您的学校项目，如果您想学习 MVC，请先从流行的 Web MVC 框架开始，例如[Apache Struts](http://struts.apache.org/)。

# java - Eclipse 与 OSGi 框架？

> ID：15442206
> 
> 赞同：0
> 
> 时间：2013-03-15T21:15:15.800
> 
> 标签：java, eclipse, osgi, eclipse-plugin

我应该使用目标平台 OSGi 还是不使用它来创建 eclipse 插件？

来自 Eclipse 帮助

“如果您不打算使用 Eclipse 扩展注册表，那么您应该使用 OSGi 框架选项。如果您选择 OSGi 框架选项，您最终不会依赖于运行时层。此外，PDE 将限制可用模板以及为您生成的代码到 OSGi 层。”

当我选择 OSGi 时我不能做什么？当它的插件功能不那么强大时，我为什么要选择 OSGi？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:29:29.137

此设置仅调整即将创建的插件的依赖关系。您可以创建一个简单的包并将依赖项添加到 Eclipse 基础设施包中 - 您会手动管理版本化的依赖项吗？

此外，根据此设置，向导将提供基于所选 Eclipse 版本的模板创建项目脚手架；fe 帮助、首选项、UI 贡献，以及您安装的任何其他具有适用的注册模板的内容。

本质上，如果你的插件只会在 eclipse 中使用，你不需要考虑，只需设置所需的 Eclipse 版本即可。如果您的插件也应该在其他 OSGi 框架中使用，那么只有这样才需要做出任何决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T11:56:33.513

我们处理几乎所有情况的简单经验法则是，如果它不提供任何 UI 功能，那么它就是一个 OSGI 包。在这种情况下，没有使用任何 SWT 特定的库和框架。

你问“当我选择 OSGi 时我不能做什么？为什么我会选择 OSGi，因为它的插件功能不那么强大？”，所以我会问“你是在写插件还是 OSGi 包”？

它们不是同一件事。插件是一个捆绑包，添加了 UI 扩展。这不是因为它（OSGi 项目）功能不那么强大，它根本不提供编写 UI 所需的额外功能，因为这不是 OSGi 的一部分。因此，如果您正在编写一个纯 OSGi 包，则创建一个 OSGi 项目，而不需要额外的依赖项和工件。如果您正在编写 UI，那么它应该是一个插件项目。

# bash - 对于相同的字符串，字符串比较返回 false

> ID：15442207
> 
> 赞同：0
> 
> 时间：2013-03-15T21:15:17.957
> 
> 标签：bash, shell, scripting

下面是我用来比较 df 输出与字符串的代码。谁能告诉我为什么它总是返回假？

```
bash-3.00$ a=$(df -n dir1)
bash-3.00$ b="/opt               : ufs"
bash-3.00$ echo "$a"
/opt               : ufs
bash-3.00$ echo "$b"
/opt               : ufs
bash-3.00$ [[ "$a" = "$b" ]]
bash-3.00$ echo $?
1
bash-3.00$
bash-3.00$ [[ "$a" == "$b" ]]
bash-3.00$ echo $?
1 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:30:03.167

以下类似的序列对我有用：

```
x=$(df -n /dev | grep dev)
y="devfs             226  226         0   100%    /dev"
[[ $x == $y ]]
echo $?
# -> 0 
```

与大多数调试情况一样，要做的事情就是*分而治之。* 做最简单但确实有效的事情，然后逐渐让它看起来像你的问题，或者让你的问题看起来像它。

在这种情况下，您可以捕获文件中的输出（或执行@chepner 的建议并通过管道传输`od`）并详细检查它，寻找例如制表符；或者，您可以尝试输出比您的`df`.

# mysql - 来自 SQL 数据库的 HTML 表格显示

> ID：15442214
> 
> 赞同：0
> 
> 时间：2013-03-15T21:15:44.733
> 
> 标签：mysql, charts, google-visualization

努力将谷歌（饼图）图表与 MYSQL 数据库集成。它正在尝试从名为“mxp937_AddStakeholder”的数据库中检索数据，特别是列名是“ProjectRoles”，其中包含字符串数据，例如，经理、全职利益相关者、软件开发人员...... GUI 设计师。最终需要将这些数据显示为饼图并显示信息，例如，5% 的用户是软件开发人员等。

我得到的错误是：警告：mysql_fetch_assoc()：提供的参数不是有效的 MySQL 结果资源。

请指教？

```
<?php
$con=mysql_connect("localhost","username","password") or die("Failed to connect with database!");
mysql_select_db("mxp937_AddStakeholder", $con); 
$sth = mysql_query("SELECT projectroles FROM mxp937_AddStakeholder");
$rows = array();
//flag is not needed
$flag = true;
$table = array();
$table['cols'] = array(

array('label' => 'Project Roles', 'type' => 'string'),

);

$rows = array();
while($r = mysql_fetch_assoc($sth)) {
$temp = array();
// the following line will used to slice the Pie chart
$temp[] = array('v' => (string) $r['ProjectRoles']); 

//Values of the each slice
$temp[] = array('v' => (int) $r['percentage']); 
$rows[] = array('c' => $temp);
}

$table['rows'] = $rows;
$jsonTable = json_encode($table);
//echo $jsonTable;
?>

<html>
<head>
<!--Load the AJAX API-->
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">

// Load the Visualization API and the piechart package.
google.load('visualization', '1', {'packages':['corechart']});

// Set a callback to run when the Google Visualization API is loaded.
google.setOnLoadCallback(drawChart);

function drawChart() {

  // Create our data table out of JSON data loaded from server.
  var data = new google.visualization.DataTable(<?=$jsonTable?>);
  var options = {
       title: 'Project Roles',
      is3D: 'true',
      width: 800,
      height: 600
    };
  // Instantiate and draw our chart, passing in some options.
  //do not forget to check ur div ID
  var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
  chart.draw(data, options);
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:24:42.973

您是否尝试过回显从查询执行中得到的错误？因为如果您的查询没有成功运行（例如，它有一些语法问题），那么您将无法操作结果。尝试

```
or die(mysql_error()); 
```

运行查询后。

此外，您应该停止使用 mysql_* 函数并开始使用 mysqli_* 函数，或者您可以使用 PDO。mysql_* 函数正在被贬低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:28:03.110

这应该是您的数据库的名称（“mxp937_AddStakeholder”）

```
mysql_select_db("mxp937_AddStakeholder", $con); 
```

这应该是您从中选择结果的表的名称

```
$sth = mysql_query("SELECT * FROM table_name"); 
```

# angularjs - 是否可以为动态模板创建指令？

> ID：15442217
> 
> 赞同：0
> 
> 时间：2013-03-15T21:16:00.033
> 
> 标签：angularjs

我想做这样的事情：

```
<ul>
    <div partial="note"></div>
    <div partial="controls"></div>
</ul> 
```

其中`partial`属性指定要用于元素的模板。允许这成为可能的指令如下：

```
.directive('partial', function() {
    return {
        restrict: 'E',
        templateUrl: '/partials/' + attrs.partial + '.html'
    }
}) 
```

唯一的问题是，我不知道如何将那个`attrs`对象放在需要的地方。我尝试以各种方式注入它，但无法让它发挥作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:20:23.287

您可以为此使用 ng-include 指令。

[http://docs.angularjs.org/api/ng.directive:ngInclude](http://docs.angularjs.org/api/ng.directive:ngInclude)

# android - getView 方法无法正常工作 - 添加额外的空白行

> ID：15442219
> 
> 赞同：0
> 
> 时间：2013-03-15T21:16:06.567
> 
> 标签：android, listview, android-arrayadapter

我正在尝试构建一个`ArrayAdapter`将输出一行和该行中项目的数量的。但是，每次添加额外的行时，我都会得到不想要的效果。

我不知道我的逻辑有什么问题，但我确信这是小问题。下面是我的`getView()`方法：

```
 public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
    if(v == null){
        LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = inflater.inflate(R.layout.order_row, null);
    }

    item = dishes.get(position);
    if(lastItem != null){
    if(!lastItem.getName().equals(item.getName())){

    dishName = (TextView)v.findViewById(R.id.dishName);
    dishPrice = (TextView)v.findViewById(R.id.dishPrice);

    dishName.setText(item.getName());
    dishPrice.setText(String.valueOf(item.getPrice()));

    dishQty = (TextView)v.findViewById(R.id.dishQty);
    dishQty.setText(String.valueOf(item.getQty()));
        }
    }
    else{
        dishName = (TextView)v.findViewById(R.id.dishName);
        dishPrice = (TextView)v.findViewById(R.id.dishPrice);

        dishName.setText(item.getName());
        dishPrice.setText(String.valueOf(item.getPrice()));

        dishQty = (TextView)v.findViewById(R.id.dishQty);
        dishQty.setText(String.valueOf(item.getQty()));

    }

    lastItem = item;
    return v;

} 
```

目前我的输出是这样的

```
Chicken     QUANTITY
2.99            2 
```

然后，如果我添加一个新项目，数量会按预期增加，但它会添加另一行：

```
DISH NAME     QUANTITY
DISH PRICE        0 
```

关于我做错了什么的任何想法？

列表中的每个项目都是`MenuItem`我增加数量的类型，如下所示：

```
public void incQty(){
    qty++;
} 
```

这是数量增加的`MenuItem`阵列适配器`getView()``NumberPicker`

```
public View getView(final int position, View convertView, ViewGroup parent) {

    View v = convertView;
    if (v == null) {
        LayoutInflater vi = (LayoutInflater) getContext().getSystemService(
                Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.menuitem_row, null);
        v.setFocusable(true);
    }

    // assign values to view
    final MenuItem item = this.menuItems.get(position);

    TextView nameView = (TextView) v.findViewById(R.id.item_name);
    final TextView priceView = (TextView) v.findViewById(R.id.item_price);

    nameView.setText(item.getName() + " ");
    priceView.setText("€" + String.valueOf(item.getPrice()));

    // number picker
    np = (NumberPicker) v.findViewById(R.id.numpick);
    np.setMaxValue(20);
    np.setMinValue(0);
    np.setValue(0);
    np.setFocusable(false);
    // calculation occurs when values are changed...
    np.setOnValueChangedListener(new OnValueChangeListener() {
        public void onValueChange(NumberPicker picker, int oldVal,
                int newVal) {
            //Add to order - increment price
            if (newVal > oldVal) {
                total = (item.getPrice() * newVal) - item.getPrice()
                        * oldVal;
                Order.getInstance().addToOrder(item);
                item.incQty();
                amount += total;
                Order.getInstance().setAmount(amount);
                Toast.makeText(picker.getContext(), "Item Added: " + item.getName() + " Size: " + Order.getInstance().getOrderItems().size(), Toast.LENGTH_SHORT).show();
                confirmBtn.setVisibility(View.VISIBLE);

            }
            //remove from order - decrement price
            if (newVal < oldVal) {
                total = (item.getPrice() * oldVal) - item.getPrice()
                        * newVal;
                Order.getInstance().removeFromOrder(position);
                item.decQty();
                amount -= total;
                Order.getInstance().setAmount(amount);
                Toast.makeText(picker.getContext(), "Item removed: " + item.getName() + " Size: " + Order.getInstance().getOrderItems().size(), Toast.LENGTH_SHORT).show();
                if(Order.getInstance().getOrderItems().size() == 0){
                    confirmBtn.setVisibility(View.INVISIBLE);
                }

            }

            //update the text view price.
            price.setText("€" + String.valueOf(Order.getInstance().getAmount()));
        }
    });

    return v;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:04:58.450

您必须检查适配器的 getCount() 方法。getCount() 方法是确定从 getView() 方法创建多少行的方法。

例如，如果 getCount() 返回 5，您将在列表视图中获得 5 行。因此，请检查您的 getCount() 您可能会覆盖它以使其返回正确的行数。

# bash - 如何将文件逐行传输到多个读取变量中？

> ID：15442220
> 
> 赞同：28
> 
> 时间：2013-03-15T21:16:08.820
> 
> 标签：bash

我有一个包含两列信息的文件：

```
box1 a1
box2 a2 
```

我正在尝试逐行读取此文件`read`并将每个行项放入一个变量中。

在第一次通过时，`$a`将包含`box1`并且`$b`将包含`a1`.

在第二遍中，`$a`将包含`box2`并且`$b`将包含`a2`等。

我用来尝试实现的代码示例如下：

```
for i in text.txt; do
    while read line; do
        echo $line | read a b;
    done < text.txt;
    echo $a $b;
done 
```

这给了我以下结果：

```
box1 a1 box2 a2 
```

当我预期以下结果时：

```
box1 a1
box2 a1 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-03-15T21:20:50.890

管道进入`read`命令会导致变量被设置在子shell中，这使得它们无法访问（实际上，它们已经消失）到您的代码的其余部分。但是，在这种情况下，您甚至不需要`for`循环或第二个`read`命令：

```
while read -r a b; do
    echo "$a" "$b"
done < text.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-23T06:31:21.427

另一种方法

```
echo -e "one\ntwo\nthree" | {
read -r a; 
read -r b; 
read -r c;
echo "output of ($a, $b, $c)"
} 
```

# regex - 如何在 SQL Server 中对 IP 地址进行正则表达式类型匹配

> ID：15442223
> 
> 赞同：0
> 
> 时间：2013-03-15T21:16:17.043
> 
> 标签：regex, sql-server-2005

这是手头的问题。

假设我有一张桌子：

我的表

```
Area    | UserIP
------------------------    
Fontana | 192.233.23.44
Fontana | 192.233.45.68
Fontana | 192.233.46.87
Fontana | 78.65.14.36
Fontana | 78.65.36.15
North Carolina | 284.65.25.4 
```

我的目标是运行查询并返回每个区域和 IP 中的前两组数字，即计数。

在表格形式中，它看起来像这样

结果表

```
Area    | UserIP  | Count
---------------------------    
Fontana | 192.233 | 3
Fontana | 78.65 | 2
North Carolina | 284.65 | 1 
```

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:23:06.563

尝试这个：

```
Select area, 
PARSENAME(userip,4) + '.' + PARSENAME(userip,3) UserIp, 
COUNT(*)
from mytable
group by area, PARSENAME(userip,4) + '.' + PARSENAME(userip,3) 
```

[SQL 演示](http://sqlfiddle.com/#!3/06d2f/1)

# sql - Oracle 多个子查询全部或全部返回

> ID：15442224
> 
> 赞同：0
> 
> 时间：2013-03-15T21:16:28.937
> 
> 标签：sql, oracle, subquery

我正在发出带有多个子查询的查询。如果两个子查询之一失败，则查询不返回任何行。任何返回的唯一方法是两个查询都成功。如果另一个失败，有什么方法可以获得成功的子查询的结果？我已经在查询顶部以及子查询中尝试了 NVL，但均未成功。我知道标量子查询返回 null，但我需要多个值。这是一个可重现的示例查询，我从大得多的东西中提炼出来，其中架构更改/UNION 不是一个选项。（至少我不这么认为）

```
create table testTBLA(
  product VARCHAR2(10),
  quantity NUMBER,
  code NUMBER
);

INSERT INTO testTBLA VALUES ( 'bottle', 10,3);
INSERT INTO testTBLA VALUES ( 'can', 17, 16);

create table testTBLB(
  fruit VARCHAR2(10),
  asize NUMBER,
  code NUMBER
)

INSERT INTO testTBLB VALUES ( 'melon', 3, 14);
INSERT INTO testTBLB VALUES ( 'apple', 5, 16); 
```

如果其他人为空，有什么方法可以获得一些结果？

```
--say code inparam is 16
select fruit, asize, product, quantity  from 
(select product, quantity from testTBLA where code=16),
(select fruit, asize from testTBLB where code=16)

FRUIT      ASIZE                  PRODUCT    QUANTITY               
---------- ---------------------- ---------- ---------------------- 
apple      5                      can        17                    

--say code inparam is 3
select fruit, asize, product, quantity  from 
(select product, quantity from testTBLA where code=3),
(select fruit, asize from testTBLB where code=3)

FRUIT      ASIZE                  PRODUCT    QUANTITY               
---------- ---------------------- ---------- ---------------------- 

0 rows selected 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:24:10.917

假设任何一方都可能丢失

```
SQL> ed
Wrote file afiedt.buf

  1  select fruit, asize, product, quantity
  2    from testTBLA a
  3         full outer join testTBLB b on( a.code = b.code )
  4*  where coalesce(a.code,b.code) = 3
SQL> /

FRUIT           ASIZE PRODUCT      QUANTITY
---------- ---------- ---------- ----------
                      bottle             10

SQL> ed
Wrote file afiedt.buf

  1  select fruit, asize, product, quantity
  2    from testTBLA a
  3         full outer join testTBLB b on( a.code = b.code )
  4*  where coalesce(a.code,b.code) = 16
SQL> /

FRUIT           ASIZE PRODUCT      QUANTITY
---------- ---------- ---------- ----------
apple               5 can                17 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T21:26:54.890

```
select 
  fruit, asize, product, quantity
from 
  testTBLA
  full join testTBLB using(code)
where
  code = 16 
```

[小提琴](http://www.sqlfiddle.com/#!4/7ba23/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T21:39:06.257

你的问题不是太清楚。

看看以下方法是否适合您：

```
select fruit, asize, product, quantity  from 
(select product, quantity from testTBLA where code=3) FULL OUTER JOIN
(select fruit, asize from testTBLB where code=3) ON 1=1 
```

这是您的数据和我的代码的 SQL Fiddle：[http ://sqlfiddle.com/#!4/8b70a/2](http://sqlfiddle.com/#!4/8b70a/2)

# ruby-on-rails-3 - 在嵌套路由中更改 :id 的名称

> ID：15442225
> 
> 赞同：0
> 
> 时间：2013-03-15T21:16:30.303
> 
> 标签：ruby-on-rails-3

我在 Rails 中有一个嵌套路由，我需要更改 :id 的名称，我不想要那个 :id 因为我有另一个字段可用作参数...我一直在谷歌搜索但不能找不到这样做的方法...有什么想法吗？

我有：

```
resources :user do
   resources :elements, :only=>[:create,:destroy]
end 
```

并且 rake 路由生成：

```
user_elements POST   /users/:user_id/elements(.:format)          elements#create
user_elements DELETE /users/:user_id/elements/:id(.:format)       elements#destroy 
```

我需要类似的东西

```
user_elements POST   /users/:user_id/elements(.:format)          elements#create
user_elements DELETE /users/:user_id/elements/:CHANGED(.:format)       elements#destroy 
```

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:58:25.213

我建议不要更改约定。您可能需要手动声明路由。

也就是说，这样的事情可能会起作用：

```
 resources :users do
     post 'elements(.:format)' => 'elements#create'
     delete  'elements/:changed(.:format)' => 'elements#destroy'
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T22:34:15.853

```
match "/users/:user_id/elements/:CHANGED(.:format)" => 'elements#destroy' 
```

这个可以的！

# css - 元视口是否覆盖媒体查询，反之亦然

> ID：15442227
> 
> 赞同：4
> 
> 时间：2013-03-15T21:16:46.690
> 
> 标签：css, media-queries, viewport

如果您使用如下的元视口标签告诉移动浏览器缩放其内容，就好像它在 1200 像素宽的显示器上查看一样（相关浏览器的实际宽度为 500 像素）

```
<meta name="viewport" content="width=1200px;" /> 
```

然后还使用媒体查询，例如

```
@media only screen 
and (max-width : 1200px) { /* NEW CSS */ } 
```

哪个会被使用？由于没有`viewport`标签，媒体查询 = true，所以应该使用新的 css，但`viewport`就是说设备是`1200px`.

**注意：**我使用`max-width`的等于浏览器窗口宽度，而不是`max-device-width`等于设备宽度

# javascript - Javascript/jQuery - 需要在页面上找到原始文本，将后面的内容捕获到变量中，并用 HTML 替换原始文本

> ID：15442228
> 
> 赞同：1
> 
> 时间：2013-03-15T21:16:50.007
> 
> 标签：javascript, jquery, replace, find

因此，假设文本 KEYWORDANIMAL:(Cat) 出现在页面上。我想在页面中搜索 KEYWORDANIMAL 的所有实例，然后将实际的动物（在本例中为 Cat）拉到一个变量中，以在另一个脚本中使用，该脚本将拉入相关内容。我还想用一个空的 div 替换 KEYWORDANIMAL:(Cat) ，并连接 ID 以作为其他脚本的目标（这个其他脚本本身已经可以正常工作）。

我一直在这里使用来自其他几个线程的信息，但无法将它们全部融合在一起。

-[使用 jQuery 查找文本字符串？](https://stackoverflow.com/questions/926580/find-text-string-using-jquery)

-[从字符和使用 jQuery 后获取文本](https://stackoverflow.com/questions/7269150/get-text-from-character-and-after-using-jquery)

-[如何使用 JQuery 替换网页中某个单词的所有出现？](https://stackoverflow.com/questions/5153909/how-do-i-use-jquery-to-replace-all-occurring-of-a-certain-word-in-a-webpage?lq=1)

这是我到目前为止所拥有的：

```
<p>Here is an animal: KEYWORDANIMAL(Cat)</p>

var findString = $('p:contains("KEYWORDANIMAL")').html();
var startIDString = findString.indexOf('(') + 1;
var endIDString = findString.indexOf(')');
var animalID = findString.substring(startIDString, endIDString);
var embedString1 = "<div id=\"";
var embedString2 = "\"></div>";
var embedStringFull = embedString1 + "animal" + animalID + embedString2;
alert(embedStringFull);

findString.each(function () {
    var newDIV = $(this).html().replace('KEYWORDANIMAL', embedStringFull);
    $(this).html(newDIV);
}); 
```

小提琴形式：http: [//jsfiddle.net/dC6bj/1/](http://jsfiddle.net/dC6bj/1/)

我找到了部分（虽然可能不是很有效），但我显然在替换时遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:25:22.163

如果您绝对必须使用 JavaScript 执行此操作，则可以使用正则表达式替换函数：

```
var animal_regex = /KEYWORDANIMAL\((.*?)\)/g;

$('p:contains("KEYWORDANIMAL")').each(function() {
    var $this = $(this);
    var html =  $this.html().replace(animal_regex, function(match, name) {
        return '<div id="animal' + name + '"></div>';
    });

    $this.html(html);
}); 
```

**演示：http: [//jsfiddle.net/dnuaL/](http://jsfiddle.net/dnuaL/)**

如果可能，这应该在服务器端完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:35:01.010

对于如何替换网页中某个单词的所有出现的第三个问题，请使用 Regex.Replace，如下所示：

```
var pagecontent = $('body').html();
var newcontent = Regex.Replace(pagecontent , @"[cat]", "dog");
&('body').html(newcontent); 
```

正则表达式是这类东西最快的解决方案。我的代码示例有点简单，它也会替换标签中的出现。或在一个单词中，例如双体船或 .

为了使其更完美，您可以查找 cat 前面有一个空格，然后是一个空格或一个点或一个逗号。为此阅读一些正则表达式教程。（真的很值得学习，一旦你知道了，你就会用得很多）

祝你好运！

# git - git svn：避免分支、合并和变基中的大规模冲突

> ID：15442231
> 
> 赞同：0
> 
> 时间：2013-03-15T21:17:05.427
> 
> 标签：git, version-control, branch, git-svn, merge-conflict-resolution

我使用 git-svn 在两台机器（Mac 和 Windows）上工作。我的远程仓库是一个 svn。我将 Mac 用作主存储库，将 Windows 用作从属。所以所有的 git-svn 操作都是在 Mac 上完成的，而 Windows 机器只有在 Mac 上“git pull”或“git push”。

我的工作流程如下所示，经常让我陷入需要解决数百个冲突的境地：

1.  我主要在 Mac 上工作，然后让 Windows “git pull”并进行测试。
2.  有时我需要在 Windows 上工作一点并提交到功能分支。
3.  然后我“git push origin”将分支推回Mac。
4.  然后在 Mac 上我“git merge windows_branch”到我的主分支。
5.  最后我“git svn rebase”和“git svn dcommit”。

在第 5 步，**冲突来了！！**我曾经使用“git mergetool”、“git rebase --continue”、“git rebase --skip”和“git rebase --abort”工作流程花费 3 个小时来处理每一个冲突。如果幸运的话，我可以把它们全部弄清楚；但有时，它们太多了，**更糟糕**的是，变基在遍历历史时反复经历同一组冲突（git只知道更改，不知道文件）；最终我感到困惑，错误地解决了其中一些问题，并引发了更大的噩梦。我学到的一些脚本可以帮助我执行“git accept-ours”或“git accept-theirs”之类的操作，但这对于涉及已删除文件的历史记录效果不佳，我仍然需要反复接受。

这是一场噩梦，以至于我真的开始犹豫是否要使用分支和合并工作流程。问题仍然是我不知道为什么会有这么多冲突。但是，如果有推荐的工作流程或实践可以帮助我防止此类冲突或轻松批量解决，那就太好了。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:50:30.333

我终于找到了问题，并将尝试在这里回答我自己的问题：

在我的全局 .gitconfig 中，我禁用了自动合并

```
mergeoptions = --no-commit 
```

但是在每次“git pull”之后，我实际上并没有在我的 Windows 从属服务器上提交合并，而是后来将事情向上游推送到我的 Mac 主服务器。这就是所有冲突的来源。

我认为我从 Web 获得的关于 rebase/merge 工作流程的一般建议是：

1.  尽可能使用“git fetch”而不是“git pull”，以便做出进一步的决定。
2.  使用“rerere”自动解决重复的已知冲突。
3.  更喜欢在“git svn dcommit”或分支合并之前使用“git rebase -i”或“git merge --squash”将小提交压缩成一个胖提交。这将在一定程度上减少重复冲突的次数。
4.  在合并或变基之前创建重复分支或跟踪分支以保留未压缩的分支历史记录。
5.  使用“git list-files -u”在合并前显示冲突文件。
6.  每次合并操作前，请在合并前使用“git diff branch1 branch2”，避免盲目合并。
7.  使用“git show branch..file”查看分支下的特定文件以进行验证。

# c++ - 方法返回相同的指针地址？

> ID：15442234
> 
> 赞同：1
> 
> 时间：2013-03-15T21:17:13.487
> 
> 标签：c++, pointers

我意识到这可能是一个过于本地化的问题，但我是新手，如果我做错了什么，这可能会帮助其他人。

对于一个项目，我们正在创建一个`OrdListClass`, 派生`ListClass`自我的教授创建的对象。`ListClass`是一个目标文件，所以我没有它的来源。

到目前为止，我在这个项目上做得很好，但是在处理`Operator==`.

我习惯`myList == yourList`打电话给接线员。

我的逻辑是使用他提供的方法`ListClass`调用`GetListPtr()`当前应用对象和我们正在与之比较的对象，`rtOp`.

然而，当使用

```
ItemType* currPosPtr = GetListPtr(); //this class' List Pointer 
```

和

```
ItemType* rtOpPosPtr = rtOp.GetListPtr(); //rtOp object's list pointer 
```

他们返回相同的指针地址？

我不确定这是否是我的错误，或者可能是我给出的目标文件中的错误。

```
 bool OrdListClass::operator== (const OrdListClass& rtOp) const  
{
    ItemType* currPosPtr = GetListPtr(); //this class' List Pointer
    ItemType* rtOpPosPtr = rtOp.GetListPtr(); //rtOp object's list pointer

    if (GetLength() == rtOp.GetLength()){ //If the lengths are equal
        /*** DO KEY COMPARISONS HERE ***/
    }else{ //Lengths are unequal
        return false; //List can't contain the same items
    }//End lengths if

    return true; //All items were compared, all keys match
}//End Operator == 
```

![指针地址 - 在 Visual Studio 2010 的监视窗口中查看](../Images/8e7531f52449e8160b073e97a6994f33.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:19:22.973

一种可能的解释是`*this`和`rtOp`是同一个对象。

另一个是它们是两个不同的对象，但共享相同的列表指针（您似乎暗示这不应该是这种情况，但没有说明原因）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:22:24.783

另一种选择是您没有源代码的实现，它有一个静态列表，因此所有实例都相同。这可能是您为两个不同的对象获得相同地址的原因

# ios - 属性访问器方法实现

> ID：15442239
> 
> 赞同：-2
> 
> 时间：2013-03-15T21:17:40.143
> 
> 标签：ios, objective-c, properties

我正在尝试在 rood VC 的 viewdidload 上提供另一个自定义视图。

```
MSHView *customTextView = [[MSHView alloc] initWithFrame:self.view.bounds];
customTextView.textView.text = @"abc";
[customTextView layoutSubviews];
[self.view addSubview:customTextView]; 
```

MSHView 头文件：

```
@property(nonatomic, strong) UITextView * textView;
@property (nonatomic, strong) UIImageView* translucentIV; 
```

MSHView 实现文件：

```
-(UIImageView*) translucentIV {
    if(!_translucentIV) {
        _translucentIV.frame = self.frame;
        //NSLog(@"frame for translucent IV, %@", _translucentIV.frame);
        _translucentIV.backgroundColor = [UIColor whiteColor];
        _translucentIV.alpha = 0.5;
    }
    return _translucentIV;
}

-(UITextView* ) textView{
    if(!_textView){
        /*
        float height = self.bounds.size.height - 5;
        float width = self.bounds.size.width - 5;
        _textView.frame = CGRectMake(5,5,width,height);
        _textView.text = @"test text";
         */
        NSLog(@"textview property being initialized");
    }
    return _textView;
}

-(void)layoutSubviews {
    self.textView.frame = self.frame;
    self.translucentIV.backgroundColor = [UIColor whiteColor];
    self.alpha = 0.5;
    NSString *abc = @"abc";
    self.textView.text = [NSString stringWithFormat:@"%@",abc];
    NSLog(@"layout subview being called");
}

-(void) setTextView:(UITextView *)textView {
    if(textView != _textView) {
        _textView = textView;
        _textView.text = @"setter method called";
    }

} 
```

仍然无法从 MSHView 中看到 textview。我认为我没有正确地做属性。任何帮助或解释？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:28:25.310

您没有创建`UIImageView`and `UITextView`。

尝试更多类似的东西：

```
-(UIImageView*) translucentIV {
    if(!_translucentIV) {
        _translucentIV = [[UIImageView alloc] initWithFrame:self.frame];
        //NSLog(@"frame for translucent IV, %@", _translucentIV.frame);
        _translucentIV.backgroundColor = [UIColor whiteColor];
        _translucentIV.alpha = 0.5;
    }
    return _translucentIV;
}

-(UITextView *)textView {
    if(!_textView) {
        float height = self.bounds.size.height - 5;
        float width = self.bounds.size.width - 5;
        _textView = [[UITextView alloc] initWithFrame:CGRectMake(5,5,width,height)];
    }
    return _textView;
} 
```

您还需要将它们添加到某处的父视图中。

# python - Python矩阵乘法，

> ID：15442244
> 
> 赞同：1
> 
> 时间：2013-03-15T21:18:02.183
> 
> 标签：python

我正在尝试创建一个 python 程序来执行 strassen 和常规矩阵乘法方法。但是，当我尝试使用使用 createRandom Matrix 函数创建的随机生成矩阵运行我的 strassen 函数时，会出现以下错误：

```
Traceback (most recent call last):
  File "matrixMult.py", line 106, in <module>
    print strassen(c, d, 10)
  File "matrixMult.py", line 77, in strassen
    p1 = strassen(addMatrix(a11,a22), addMatrix(b11,b22), n/2)
  File "matrixMult.py", line 78, in strassen
    p2 = strassen(addMatrix(a21,a22), b11, n/2)
  File "matrixMult.py", line 82, in strassen
    p6 = strassen(subMatrix(a21,a11), addMatrix(b11,b12), n/2)
  File "matrixMult.py", line 62, in subMatrix
    c.append(a[i][j] - b[i][j]) 
  IndexError: list index out of range 
```

这是代码。我随机创建了一个 10x10 矩阵，然后尝试用它执行 Strassen，我得到了前面的错误。但是，当我使用最后定义的简单 4x4 矩阵时，strassen 工作正常，而且似乎我的随机矩阵生成没有问题，所以我不确定问题出在哪里。有人有想法么？

```
import random
import time

random.seed()

def createEmptyMatrix(x, y): # create empty matrix
    matrix = [[0 for row in range(x)] for col in range(y)]
    return matrix

def createRandomMatrix(size): # create matrix filled with random ints
    matrix = []
    matrix = [[random.randint(1,20) for row in range(size)] for col in range(10)]
    return matrix

def regular(a, b): # standard O(n^3) matrix multiplication
    c = createEmptyMatrix(len(a), len(b[0]))
    for i in range(len(a)):
        for j in range(len(b[0])):
            for k in range(len(b)):
                c[i][j] += a[i][k]*b[k][j]
    return c

def split(matrix): # split matrix into quarters for strassen
    a = matrix
    b = matrix
    c = matrix
    d = matrix
    while(len(a) > len(matrix)/2):
        a = a[:len(a)/2]
        b = b[:len(b)/2]
        c = c[len(c)/2:]
        d = d[len(d)/2:]
    while(len(a[0]) > len(matrix[0])/2):
        for i in range(len(a[0])/2):
            a[i] = a[i][:len(a[i])/2]
            b[i] = b[i][len(b[i])/2:]
            c[i] = c[i][:len(c[i])/2]
            d[i] = d[i][len(d[i])/2:]
    return a,b,c,d

def addMatrix(a, b): # add 2 matrices
    d = []
    for i in range(len(a)):
        c = []
        for j in range(len(a[0])):
            c.append(a[i][j] + b[i][j])
        d.append(c)
    return d

def subMatrix(a, b): # subtract 2 matrices
    d = []
    for i in range(len(a)):
        c = []
        for j in range(len(a[0])):
            c.append(a[i][j] - b[i][j])
        d.append(c)
    return d

def strassen(a, b, n): # strassen matrix multiplication method
    #base case
    if n == 1:
        d = [[0]]
        d[0][0] = a[0][0] * b[0][0]
        return d
    else:
        a11, a12, a21, a22 = split(a)
        b11, b12, b21, b22 = split(b)

        p1 = strassen(addMatrix(a11,a22), addMatrix(b11,b22), n/2)
    p2 = strassen(addMatrix(a21,a22), b11, n/2)
    p3 = strassen(a11, subMatrix(b12,b22), n/2)
    p4 = strassen(a22, subMatrix(b21,b11), n/2)
    p5 = strassen(addMatrix(a11,a12), b22, n/2)
    p6 = strassen(subMatrix(a21,a11), addMatrix(b11,b12), n/2)
    p7 = strassen(subMatrix(a12,a22), addMatrix(b21,b22), n/2)

    c11 = addMatrix(subMatrix(addMatrix(p1, p4), p5), p7)
    c12 = addMatrix(p3, p5)
    c21 = addMatrix(p2, p4)
    c22 = addMatrix(subMatrix(addMatrix(p1, p3), p2), p6)

        c = createEmptyMatrix(len(c11)*2,len(c11)*2)

    for i in range(len(c11)):
            for j in range(len(c11)):
                c[i][j]                   = c11[i][j]
                c[i][j+len(c11)]          = c12[i][j]
                c[i+len(c11)][j]          = c21[i][j]
                c[i+len(c11)][j+len(c11)] = c22[i][j]

        return c

a = [[1,1,1,1],[2,2,2,2],[3,3,3,3],[4,4,4,4]]
b = [[5,5,5,5],[6,6,6,6],[7,7,7,7],[8,8,8,8]]
c = createRandomMatrix(10)
d = createRandomMatrix(10)
print "Strassen Outputs:"
#print strassen(c, d, 10)
print "Should be:"
print regular(c, d)
print c
print d

print a
print b
print strassen(a, b, 4) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:32:54.213

我建议使用`numpy`，您可以在其中轻松使用矩阵，并且所有这些功能都已经存在。

同时，如果您在此函数中遇到索引错误，请尝试添加类似以下内容`assert`：

```
def subMatrix(a, b): # subtract 2 matrices
    assert len(a) == len(b), "Number of rows does not match!"
    assert len(a[0]) == len(b[0]), "Number of columns does not match!"
    d = []
    for i in range(len(a)):
        c = []
        for j in range(len(a[0])):
            c.append(a[i][j] - b[i][j])
        d.append(c)
    return d 
```

但是，您根本不需要编写此函数：

```
import numpy as np
a = np.matrix(np.random.randint(10, size=(3,3)))
b = np.matrix(np.random.randint(10, size=(3,))).T

c = a * b
d = a - b

print a
[[5 8 1]
 [7 6 1]
 [9 2 9]]

print b
[[5]
 [2]
 [4]]

print c
[[45]
 [51]
 [85]]

print d
[[ 0  3 -4]
 [ 5  4 -1]
 [ 5 -2  5]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:31:24.170

引用的最后一行告诉你出了什么问题：

```
 File "matrixMult.py", line 62, in subMatrix
    c.append(a[i][j] - b[i][j]) 
  IndexError: list index out of range 
```

这一行包含 4 种数组索引的用法，其中一种超出了数组的范围。

要调试它，转到第 62 行，`print i,j`在它之前添加一个。您将获得大量输出，并且异常之前的输出行会告诉您什么索引超出范围。通过这种方式，您可能可以找到您在此处遇到的错误。

“只是调试它”

# swing - 听众开火顺序搞砸了测试

> ID：15442248
> 
> 赞同：1
> 
> 时间：2013-03-15T21:18:23.357
> 
> 标签：swing

我遇到了以下问题。我有一个交互式 Swing 应用程序。它基本上在画布上创建了一堆图形对象。您从调色板（椭圆形、圆形等）中选择要创建的类型，然后单击画布。一切都按预期工作。现在我想使用 Abbot/Costello 测试框架记录一个测试。这很简单。启动 Costello 应用程序，创建一个新脚本并开始记录事件。假设我想记录这个序列：单击调色板并将图形放在画布上。很自然地期望测试应用程序会**在之前记录一次点击**画布组件有机会处理它并添加一个新图形。由于各种原因，我需要在对其进行任何更改之前捕获应用程序的状态，而不是之后。事实证明，我的应用程序在点击事件中首次破解，从而创建了一个新图形，然后我的测试应用程序才收到该事件进行记录。此时对我来说已经太晚了，状态已经不可挽回地改变了，我基本上是在记录未来的状态，而不是之前的状态。
我知道这是听众按不同顺序触发的结果。我也了解 Swing 不保证触发侦听器的顺序。我是否达到了可能的极限或有解决方案？

# cqrs - 消息总线集成和有界上下文在停机后重新同步 - 服务总线 1.0

> ID：15442250
> 
> 赞同：1
> 
> 时间：2013-03-15T21:18:29.493
> 
> 标签：cqrs, event-sourcing, servicebus, neventstore

我刚刚下载了 joliver eventstore，并希望`Windows Service Bus 1.0`为一个跨多个有界上下文进程分离的应用程序连接一条服务总线。

如果有界上下文已离线，而其他有界上下文中的事件已创建（或者甚至可能是已部署的新上下文），我可以看到以下事件序列。

1.  例如 ContextA、ContextB 和 ContextC，它们都使用服务总线 1.0 连接，并且每个上下文都有自己的事件存储，它们都共享相同的总线消息传递底板。
2.  ContextC 离线。
3.  当 ContextC 备份时，需要通知其他有界上下文需要重新发送到刚刚恢复在线的上下文的事件。这些事件从每个事件存储中重放。

我的问题是：

1.  上述场景适用于任何事件溯源库，那么在此之上是否有任何基础设施代码我可以使用，还是我必须自己编写？
2.  使用 Windows 服务总线 1.0，我如何将事件存储中的序列号与服务总线上的序列号结合起来？
3.  以安全方式检测和处理已接收事件的最佳实践是什么（防止消息处理程序失败）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:12:14.633

> 上述场景适用于任何事件溯源库，那么在此之上是否有任何基础设施代码我可以使用，还是我必须自己编写？

与事件相关的投影机制的概念当然很常见。不幸的是，根据您的堆栈、性能要求和规模以及许多其他因素，有很多方法可以处理如何做到这一点。

因此，我不知道这种性质的商品化设施。

GetEventStore 商店有一个集成的 Projection 工具，它看起来非常强大，并且需要在桌面上构建所有这些。在它存在之前，我认为人们甚至不应该考虑超越 JOES 的 SRPness。

除了提到 Azure 之外，您还没有对您的实际堆栈说太多。

> 使用 Windows 服务总线，我如何将我的事件存储中的序列号与服务总线上的序列号结合起来？

您可以使用流 id + 提交序列号`MessageId`（并使用它来确保总线删除重复项）。您可能还会在消息元数据中包含属性。

> 以安全方式检测和处理已接收事件的最佳实践是什么（防止消息处理程序失败）？

如果您在 Azure 上并考虑使用 ServiceBus，则可以使用主题来确保至少一次交付（并且您将使用会话工具）。去看[两个小时的 ClemensV 深度潜水订阅视频](http://channel9.msdn.com/Blogs/Subscribe/Service-Bus-Messaging-Deep-Dive)和其他几集，否则你会花同样多的时间犯错误）

> 为了减少广播流量，如果 ContextC 请求从 ContextA 和 ContextB 重播，有没有办法让这些重播消息只发送到 ContextC？还是我不应该担心这个？

亩。您开始询问这些东西是否是一个好主意，但现在似乎已经假设这是要走的路。

首先，这种基础设施是一个需要彻底改造的巨大轮子。您是否考虑过简单地为每个 BC 设置一个主题并让任何需要听的人听？

这里的关键是你需要牢记这样一个事实，即仅仅因为你可以想到 BC 需要消耗彼此事件的情况，这个无处不在的中央魔法总线将在任何地方提供一切。

* * *

编辑：回答您编辑的问题版本 2+

> 使用 Windows 服务总线 1.0，我如何将事件存储中的序列号与服务总线上的序列号结合起来？

您的事件存储没有序列号。每个聚合都有一个提交序列号。您通常会使用会话主题和订阅。然后，您需要选择是要全局排序（使用单个会话 ID）还是按聚合排序（使用流 ID 作为会话 ID）。

一旦事件发生在一个主题上，它们就会有一个`MessageSequenceNumber`，并且订阅（当会话时）按顺序交付（实际上是订阅者接收它们）它们。

> 以安全方式检测和处理已接收事件的最佳实践是什么（防止消息处理程序失败）？

这是内置在服务总线（或任何排队机制）中的。在成功处理之前，您不会将消息标记为已完成。任何失败都会导致放弃（将其放回队列以进行重新处理）。

订户休息、断开连接或工作备份自然由主题处理。

# syntax - Python - 按第二个元素获取最小元组的语法错误

> ID：15442251
> 
> 赞同：-1
> 
> 时间：2013-03-15T21:18:31.030
> 
> 标签：syntax, python-2.7, tuples, minimum

我想创建一个元组列表，其中第一个元素来自列表，第二个元素来自列表元素的函数，然后从函数的输出中找到最小值。下面的代码最好地解释了我想要什么：

```
x,y = min((x,f(x) for x in array), key = lambda(k, v): v[1]) 
```

运行脚本后，我得到：

```
SyntaxError: invalid syntax 
```

注意：f(x) 返回 int/float

* * *

**更新**：我从另一个堆栈溢出问题中编写了我的代码，所以我不知道我到底在做什么。有人可以解释一下 key 是如何工作的吗？
感谢您的回答:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:21:41.820

您需要添加一些括号：

```
x, y = min(((x,f(x)) for x in array), key = lambda t: t[1][1]) 
```

我调整了 lambda 表达式以在 Python 2 和 3 中工作（您不能在参数列表中使用元组解包）。

请记住，键只是一个函数，它应该返回我们想知道最小值的值。它为输入序列中的每个元素调用。在这种情况下，这是一个`(x, f(x))`元组，您想通过`f(x)`返回值的第二个元素找到最小值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T21:21:54.117

在您的列表理解中，`,`不被解析为元组表达式。您需要将其包装`()`以使解析器知道。

```
x,y = min(( (x,f(x)) for x in array), key = lambda(k, v): v[1]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T21:22:14.883

我猜你想要这个：

```
x,y = min(((x,f(x)) for x in array), key = lambda(k, v): v) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T21:24:34.313

要么添加缺少的括号，要么像这样重写代码：

```
y, x = min(zip(map(f, array), array)) 
```

我已将元组元素的顺序交换为不必向`min()`.

这是另一个版本：

```
x = min(array, key=f)
y = f(x) 
```

它简短明了，但需要额外调用`f()`.

# cuda - CUDA C/C++：相同的可执行文件在第一次运行时给出不同的结果

> ID：15442253
> 
> 赞同：1
> 
> 时间：2013-03-15T21:18:39.773
> 
> 标签：cuda, particle-system

以我之前回答的问题为例：[My Previous Question](https://stackoverflow.com/questions/15371123/cuda-c-c-calculate-the-average-of-inverse-of-distance-per-point-interaction)，顺便说一句，[Robert Crovella](https://stackoverflow.com/users/1695960/robert-crovella)正确回答了这个问题。

我想出了另一个内核，它计算一个点的随机步长（通过使用我之前问题中的相同 RNG）并计算该点相对于其先前位置（坐标）的能量差。这是内核：

```
__global__
void DeltaE(float *X, float *Y,float *Xn, float *Yn, float *step,float *DELTA, curandState *state, const int N,const int n){

    int tIdx = blockIdx.x*blockDim.x + threadIdx.x;
    int bIdx = blockIdx.x;
    //int sIdx = blockIdx.x*blockDim.x;

    float x , y;
    float rdmn1, rdmn2;

    float dIntE = 0.0e0f, dConfE = 0.0e0f, dTotE = 0.0e0f;
    if(tIdx < N){

        if(tIdx == n){
            step[tIdx] = 0.2;
            rdmn1 = curand_uniform(&state[tIdx]);
            rdmn2 = curand_uniform(&state[tIdx]);

            Xn[tIdx] = X[tIdx] + step[tIdx]*(2.0e0f*rdmn1 - 1.0e0f);
            Yn[tIdx] = Y[tIdx] + step[tIdx]*(2.0e0f*rdmn2 - 1.0e0f);
            dConfE = - (X[tIdx]*X[tIdx] + Y[tIdx]*Y[tIdx]);
            dConfE += Xn[tIdx]*Xn[tIdx] + Yn[tIdx]*Yn[tIdx];

        }
        else{
            x = X[tIdx] - X[n];
            y = Y[tIdx] - Y[n];

            dIntE += -1.0e0f/sqrt(x*x + y*y);
        }
        __syncthreads();
        if(tIdx != n){
            x = X[tIdx] - Xn[n];
            y = Y[tIdx] - Yn[n];

            dIntE += 1.0e0f/sqrt(x*x + y*y);
        }       
        dTotE = dConfE + dIntE;
        dTotE = ReduceSum2(dTotE);
        if(threadIdx.x == 0)DELTA[bIdx] = dTotE;

    }
} 
```

然后我在 CPU 上做最后的总和：

```
cudaMemcpy(&delta[0],&d_delta[0],blocks.x*sizeof(float),cudaMemcpyDeviceToHost);
float dE = 0;
for(int i = 0; i < blocks.x; i++){
    dE += delta[i];
} 
```

我的内核使用以下配置启动：

```
dim3 threads(BlockSize,BlockSize);
dim3 blocks(ceil(Np/threads.x),ceil(Np/threads.y));
DeltaE<<<blocks.x,threads.x,threads.x*sizeof(float)>>>(d_rx,d_ry,d_rxn,d_ryn,d_step,d_delta,d_state,Np,nn); 
```

其中 Np 是点数（我使用了 1k - 4k）。我有一个 GeForce 9500 GT，它不支持加倍。而且我使用无标志/无选项进行编译。

以 Np = 1k 为例。当我编译然后运行时，结果是 dE = 6.557993。当我运行第二、第三、第四次时，无论何时，它都是 dE = -0.3515406。有谁知道这是从哪里来的？

PS：我忘了提一下，可以在[My Previous Question](https://stackoverflow.com/questions/15371123/cuda-c-c-calculate-the-average-of-inverse-of-distance-per-point-interaction)中找到的同一个内核 AvgDistance在 DeltaE 之前被调用。我不知道这是否有任何关系，但我认为值得一提。

PS2：nn 是任意选择的点（粒子）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T10:56:57.423

[正如Robert Crovella](https://stackoverflow.com/users/1695960/robert-crovella)通过上面的评论指出的那样，可能发生的事情是在`tIdx = n`计算`Xn[n]`和`Yn[n]`时，其他线程正在使用这个值，它可能还没有被计算。在这种情况下，其他运行（除了第一个）获得相同（正确）值的唯一原因是 Xn 和 Yn 指向的内存已经被正确的值占用，即使是同步问题应用程序返回正确的值。

无论如何，我通过将内核分成两部分来避免同步问题，正如[Robert Crovella](https://stackoverflow.com/users/1695960/robert-crovella)通过评论建议我的那样：

```
__global__
void DeltaE1(float *X, float *Y,float *Xn, float *Yn, float *step,float *DELTA, curandState *state, const int N,const int n){

    int tIdx = blockIdx.x*blockDim.x + threadIdx.x;
    float x , y;
    float rdmn1, rdmn2;

    if(tIdx < N){
        DELTA[tIdx] = 0.0e0f;
        if(tIdx == n){
            step[tIdx] = 0.2e0f;
            rdmn1 = curand_uniform(&state[tIdx]);
            rdmn2 = curand_uniform(&state[tIdx]);

            Xn[tIdx] = X[tIdx] + step[tIdx]*(2.0e0f*rdmn1 - 1.0e0f);
            Yn[tIdx] = Y[tIdx] + step[tIdx]*(2.0e0f*rdmn2 - 1.0e0f);
            DELTA[tIdx] = - (X[tIdx]*X[tIdx] + Y[tIdx]*Y[tIdx]);
            DELTA[tIdx] += Xn[tIdx]*Xn[tIdx] + Yn[tIdx]*Yn[tIdx];

        }
        else{
            x = X[tIdx] - X[n];
            y = Y[tIdx] - Y[n];

            DELTA[tIdx] += -1.0e0f/sqrt(x*x + y*y);
        }           
    }
}

__global__
void DeltaE2(float *X, float *Y,float *Xn, float *Yn,float *DELTA,const int N,const int n){

    int tIdx = blockIdx.x*blockDim.x + threadIdx.x;
    int bIdx = blockIdx.x;

    float x , y;
    float dTotE = 0.0e0f;
    if(tIdx < N){
        if(tIdx != n){
            x = X[tIdx] - Xn[n];
            y = Y[tIdx] - Yn[n];

            DELTA[tIdx] += 1.0e0f/sqrt(x*x + y*y);

        }
        dTotE = DELTA[tIdx];
        dTotE = ReduceSum2(dTotE);
        if(threadIdx.x == 0)DELTA[bIdx] = dTotE;

    }

} 
```

# php - 存档表 - 旧副本

> ID：15442254
> 
> 赞同：0
> 
> 时间：2013-03-15T21:18:44.870
> 
> 标签：php, mysql, sql

我有一个程序可以跟踪当年正在玩的游戏。在那一年结束后，我打算让管理员存档那个季节。为此，我创建了该表的副本，并为上一季命名。我将该名称存储在单独的表中。

问题是我想我无法使用从表生成的表名进行 sql 查询。

任何人都对如何处理这个问题有任何建议。该表每年可能有 1000-2000 条记录，这可能会在 20 年内到位（可能没有技术）。我可以为一年添加一列并将其用作排序，但是当我达到 20K - 40K 的记录时它会变慢吗？

我的另一个想法是将活跃年份保存在一个表中并将所有历史记录存档到另一个单独的表中？用户不关心历史是否需要几秒钟来加载，而不是当前数据？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T01:34:50.623

慢度是查询复杂度的函数，也是记录大小的函数。您可以进行 100 行的慢速查询或数百万行的快速查询。如果您需要有关查询优化的具体帮助，请将其发布，否则除了先前建议的索引外，没有太多可使用的。

通常，10k 数量级并没有什么特别的。在真正确定弱点之前，不要试图过度优化。在达到数百万（如果不是数千万）行之前，很少**需要**对表进行分区。你陷入了“过早优化”的陷阱。除非你确定它会导致问题，否则不要这样做。

我，我会在您使用的表格列上创建一个索引`JOIN`（可能`user_id`）并完成它。如果您使用外键，则有一个自动的。直到您看到您的查询减慢了应用程序的速度，您可能会通过强制它解决分区问题来弊大于利。

# assembly - EDX 和 DX 是同一个寄存器吗？

> ID：15442259
> 
> 赞同：9
> 
> 时间：2013-03-15T21:19:01.883
> 
> 标签：assembly, x86

抱歉这个无知的问题，但我对 x86 感到很困惑。

EDX 与 DX 本质上是相同的寄存器吗？我知道 EDX 是 32 位，而 DX 是 16 位。

如果我将 0x1 移动到 EDX，0x1 也会在 DX 中吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-02T21:37:38.300

```
[76543210 76543210 76543210 76543210 76543210 76543210 76543210 76543210] bits
[                                  RDX                                  ]
                                    [                EDX                ]                 
                                                      [       DX        ]
                                                      [  DH    ][   DL  ] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-15T21:20:01.140

DX 只是 EDX 的低 16b :)

```
mov EDX, 0x1;         --> DX = 0x1
mov EDX, 0x12345678; --> DX = 0x5678 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-15T21:22:39.163

此外，如果您在 64 位系统上，EDX 是 RDX 寄存器的低 32 位，它是一个 64 位寄存器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T21:42:24.340

您可以将其视为指针：

```
long theRealRDX;
long *     rdx = &theRealRDX;
int  *     edx = (int*)&theRealRDX;
short int * dx = (short int*)&theRealRDX;
char *      dl = (char*)&theRealRDX; 
```

除了 nrz 评论中提到的高部分擦除

# java - JSoup 的 select() 方法是上下文的吗？

> ID：15442260
> 
> 赞同：0
> 
> 时间：2013-03-15T21:19:07.810
> 
> 标签：java, jsoup

当我做：

```
Document document = Jsoup.connect(url).get();
Element element = document.getElementById("body");
Element article = document.select("div[id=article]").first(); 
```

如果我尝试查询分配给的元素`article`是 的子元素的子元素`<body/>`，它会成功查询吗？

还是我需要导航到 的任何父级`article`，然后`select()`在父级上调用该方法？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:45:43.023

为什么不是这个？

```
 Element article = document.getElementById("article"); 
```

# jquery-selectors - 无法检测到点击由 jQuery 生成的链接

> ID：15442261
> 
> 赞同：0
> 
> 时间：2013-03-15T21:19:10.097
> 
> 标签：jquery-selectors

我正在为一些数据的分页生成一些链接。

这是生成链接的函数：

```
function BuildPaginationNav(targetPage, pageSize) {

    var numRecords = $('#movieListTable').children().length,
    numPages = Math.ceil(numRecords / pageSize),
    startRecord = ((targetPage - 1) * pageSize);

    for (var i = startRecord; i <= startRecord + pageSize - 1; i++) {
        $('div#movieListTable > div:eq(' + i + ')').fadeIn(200);
    }

    // Only use prev page and first page buttons/links if not on first page
    if (targetPage > 1) { 
        $('#pagination').append('<br><a href="#" id="firstPage">First Page</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="#" id="prevPage">Prev Page</a>&nbsp;&nbsp;|&nbsp;&nbsp;');
    } else if (targetPage = 1) {
        $('#pagination').append('<br>First Page&nbsp;&nbsp;|&nbsp;&nbsp;Prev Page&nbsp;&nbsp;|&nbsp;&nbsp;');
    }

    // Add the current page label
    $('#pagination').append('<label id="currentPage">' + targetPage + '</label>');

    // Only use next page and last page buttons/links if not on last page
    if (targetPage < numPages) {
        $('#pagination').append('&nbsp;&nbsp;|&nbsp;&nbsp;<a href="#" id="nextPage">Next Page</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="#" id="lastPage">Last Page</a>');
    } else if ( targetPage === numPages) {
        $('#pagination').append('&nbsp;&nbsp;|&nbsp;&nbsp;Next Page&nbsp;&nbsp;|&nbsp;&nbsp;Last Page');
    }
} 
```

上述工作按预期工作，并且该函数在 $.ajax 调用中的成功函数末尾调用，该调用获取分页所针对的数据。

如果生成的 HTML 不在第一页或最后一页上，则如下所示：

```
<div id="pagination">
    <br>
    <a href="#" id="firstPage">First Page</a>&nbsp;&nbsp;|&nbsp;&nbsp;
    <a href="#" id="prevPage">Prev Page</a>&nbsp;&nbsp;|&nbsp;&nbsp;
    <label id="currentPage">2</label>&nbsp;&nbsp;|&nbsp;&nbsp;
    <a href="#" id="nextPage">Next Page</a>&nbsp;&nbsp;|&nbsp;&nbsp;
    <a href="#" id="lastPage">Last Page</a>
</div> 
```

我需要做的是获取被点击的链接的 ID，以便我可以采取适当的行动。我试过这个：

```
$('#pagination a').click(function() {
    console.log(this.id);
}); 
```

我也试过这个：

```
$('#pagination a').on('click', function() {
    console.log(this.id);
}); 
```

但两者都不起作用 - 好吧，如果我将生成的 HTML 和上面的 jQuery 放在 jsFiddle 中它**确实**有效，但它不在完整代码中。

我对 $.on() 在这种情况下不起作用感到特别惊讶，因为我在代码的其他地方使用了该函数。

如果我将生成的 HTML 作为 HTML 放入页面本身，则 jQuery**确实**可以工作，因此它必须具有链接是动态生成的事实。

如何获得对这些链接的点击以被检测到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:26:46.030

绑定事件时尚未创建您的链接。您需要在某些现有元素上绑定实时动作。

```
$(document).ready(function() {

    $("#pagination").on('click', 'a', function() { .... });

}); 
```

'#pagination' 元素应该在绑定事件发生时可用。它被称为委托事件 - [http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:49:45.620

我会按照以下方式完成。

你的方式：

```
 // Only use prev page and first page buttons/links if not on first page
    if (targetPage > 1) { 
        $('#pagination').append('<br><a href="#" id="firstPage">First Page</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="#" id="prevPage">Prev Page</a>&nbsp;&nbsp;|&nbsp;&nbsp;');
    } else if (targetPage = 1) {
        $('#pagination').append('<br>First Page&nbsp;&nbsp;|&nbsp;&nbsp;Prev Page&nbsp;&nbsp;|&nbsp;&nbsp;');
    } 
```

我的方式：

```
 // Only use prev page and first page buttons/links if not on first page
    if (targetPage > 1) { 
$FirstPage=$('<a href="#" id="firstPage">First Page</a>');
$FirstPage.click(function() { .... });
$('#pagination').append($FirstPage);

        //same for Prev page...
    } else if (targetPage = 1) {
       // same as above..
    } 
```

这样......我可以在一个地方找到我的链接行为，只是我不需要在整个页面中搜索就知道......锚点的点击事件......还有更多！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T21:32:24.137

我想到了：

我找到了函数 $.delegate();

我在 BuildPaginationNav() 函数的末尾添加了这段代码：

```
$('#pagination').delegate('a', 'click', function() { console.log(this.id); }); 
```

我将从那里（console.log() 所在的位置）调用一个函数，该函数将执行必要的操作。

如果有不同（甚至更好）的方法，请告诉我！

# optimization - GMSPolyline 非常大的内存峰值

> ID：15442262
> 
> 赞同：54
> 
> 时间：2013-03-15T21:19:10.703
> 
> 标签：optimization, memory-management, gps, google-maps-sdk-ios

在允许用户显示复杂位置点列表的 GPS 应用程序中，我们在各种不同类型的地图上称为轨迹，每个轨迹可以包含 2k 到 10k 个位置点。当在非 Google 地图类型上呈现时，轨道会被大量剪辑、修剪和路径简化。这是为了降低内存使用率并提高性能。即使在最坏的情况下，我们通常也只会向 OpenGL 管道提交远少于一千个（聚合）转换后的位置点。

在集成适用于 iOS 的 Google Maps SDK 时，我们最初尝试继续利用我们自己的 OpenGL 轨迹渲染系统，但遇到了 OpenGL 上下文使用冲突的问题（渲染有效，但我们无法获取 GMSMapView 和我们自己的内部 OpenGL 资源在没有人接触已删除内存的情况下释放）。

因此，我们尝试利用 GMSPolyline 构造并让 Google SDK 进行轨迹渲染，但我们遇到了主要的内存使用问题，并且正在寻找解决这些问题的指导。

使用 Xcode Instruments，我们在创建大约 25 条折线时监控了内存使用情况，总共有大约 23k 个位置点（不是每条）。在折线创建过程中，应用程序内存使用量从大约 14 MB 增长到大约 172 MB，净峰值约为 158 MB。在创建所有折线后不久，内存使用量最终回落到 19 MB 左右，并且看起来很稳定，累积网络约为 5 MB，因此每个位置点似乎需要大约 220 字节（5 MB / 23k 点）来店铺。

伤害我们的是内存使用高峰。虽然我们的实验室测试只使用了 23k 个位置点，但在现实世界中通常还有更多，而且 iOS 似乎在*Google 地图在**iPhone 5*上消耗了大约 450 MB之后抛弃了我们的应用程序（而我们内部的折线渲染系统在大约12 MB 用于相同的测试用例）。

显然，该`GMSPolyLine`构造不适用于我们需要的重量级使用。

我们尝试用单独的自动释放池包装一些折线创建循环，然后在适当的点排空它们，但这对内存使用没有影响。创建多段线并将控制权返回到主运行循环后的峰值内存使用根本没有改变。后来很清楚为什么；在创建折线后的第一个 DisplayLink 回调之前，Google 地图系统不会释放资源。

我们接下来的工作将是手动限制我们在 GMSPolyline 推送的数据量，可能使用我们自己的边界测试、裁剪、修剪和最小化，而不是依靠谷歌地图来有效地做到这一点。

这里的缺点是这意味着更多的 GMSPolyline 对象将被分配和释放，可能在用户平移/缩放地图时。这些对象中的每一个都将具有更少的位置点，但我们仍然担心这种方法的不可预见的后果，许多 GMSPolyline 分配和释放的隐藏开销。

所以问题是，处理这种情况的最佳方法是什么，谷歌的人能否阐明任何`GMSPolyline`最佳实践、上限、瓶颈等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-18T13:35:58.563

您为什么不尝试根据基本的 http 请求使用 google API 进行指导。 [https://developers.google.com/maps/documentation/directions/](https://developers.google.com/maps/documentation/directions/)。（检查许可条件和请求数量）。

然后用 IOS MKPolyline 绘制数据。我相信你会有更好的表现。而且您将只依靠谷歌来获取定位数据。

要将来自 google API 的响应转换为坐标，请使用以下众所周知的方法（取自其他帖子）：

```
- (NSMutableArray *)parseResponse:(NSDictionary *)response
{
    NSArray *routes = [response objectForKey:@"routes"];
    NSDictionary *route = [routes lastObject];
    if (route) {
        NSString *overviewPolyline = [[route objectForKey: @"overview_polyline"] objectForKey:@"points"];
        return  [self decodePolyLine:overviewPolyline];
    }
    return nil;
}

-(NSMutableArray *)decodePolyLine:(NSString *)encodedStr {

    NSMutableString *encoded = [[NSMutableString alloc]initWithCapacity:[encodedStr length]];
    [encoded appendString:encodedStr];
    [encoded replaceOccurrencesOfString:@"\\\\" withString:@"\\"
                                options:NSLiteralSearch range:NSMakeRange(0,
                                                                          [encoded length])];
    NSInteger len = [encoded length];
    NSInteger index = 0;
    NSMutableArray *array = [[NSMutableArray alloc] init]; NSInteger lat=0;
    NSInteger lng=0;
    while (index < len) {
        NSInteger b; NSInteger shift = 0; NSInteger result = 0; do {
            b = [encoded characterAtIndex:index++] - 63; result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        NSInteger dlat = ((result & 1) ? ~(result >> 1)
                          : (result >> 1)); lat += dlat;
        shift = 0; result = 0; do {
            b = [encoded characterAtIndex:index++] - 63; result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        NSInteger dlng = ((result & 1) ? ~(result >> 1)
                          : (result >> 1)); lng += dlng;
        NSNumber *latitude = [[NSNumber alloc] initWithFloat:lat * 1e-5]; NSNumber *longitude = [[NSNumber alloc] initWithFloat:lng * 1e-5];
        CLLocation *location = [[CLLocation alloc] initWithLatitude: [latitude floatValue] longitude:[longitude floatValue]];
        [array addObject:location]; }
    return array;
} 
```

我在 google sdk 上遇到了类似的性能问题，它对我有用。

# python - 如何在数据库中存储实时聊天消息？

> ID：15442265
> 
> 赞同：6
> 
> 时间：2013-03-15T21:19:17.393
> 
> 标签：python, chat, real-time, tornado, mysql-python

我`mysqldb`目前正在使用我的数据库，我需要集成一个实时的消息传递功能。`chat demo`Tornado 提供的*没有*实现数据库，（而`blog` *.*）

这种消息服务也将在未来兼作电子邮件（就像 Facebook 的消息服务如何运作一样。聊天平台也是电子邮件。）无论如何，我想确保我当前的第一个聊天版本能够扩展作为电子邮件，总的来说，我需要将消息存储在数据库中。

就像这样简单：对于发送的每条聊天消息，查询数据库并将消息显示在用户的屏幕上。或者，这种方法容易遭受服务器负载高和优化不佳的问题吗？我应该如何构建“基础设施”来完成这项工作？

（我为这个问题的一些内在主观性道歉；但是，我更喜欢“测量两次，编码一次。”）

输入、示例和资源表示赞赏。
问候。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-15T21:43:58.780

Tornado 是一个单线程的非阻塞服务器。

这意味着如果您在主线程上进行任何阻塞调用，您最终会降低性能。一开始您可能不会注意到这一点，因为每个数据库调用可能只会阻塞 20 毫秒。但是，一旦您每秒进行超过 200 次数据库调用，您的应用程序就会被有效地锁定。

然而，这是相当多的数据库调用。在您的情况下，将有 200 人在同一秒内点击发送他们的聊天消息。

您可能想要做的是使用具有非阻塞 API 的队列。因此 Tornado 收到一条聊天消息。您将它放在队列中以由另一个进程保存到数据库中，然后将聊天消息发送回其他聊天成员。

当有人连接到聊天会话时，您还需要向队列发送所有先前消息的请求，当队列响应时，您将这些请求发送给新连接的用户。

无论如何，这就是我解决问题的方式。

另请参阅此问题和答案：[任何建议在 Python3 中的 Tornado 上使用非阻塞 MySQL api？](https://stackoverflow.com/questions/12234998/any-suggestion-for-using-non-blocking-mysql-api-on-tornado-in-python3)

请记住，Tornado 是单线程的。太奇妙了。并且可以处理数千个同时连接。但是，如果其中一个连接中的代码阻塞了 1 秒，那么在那**一秒**内任何其他连接都不会执行任何其他操作。

# jquery - 为什么我不能让文件删除以使用 jquery？

> ID：15442277
> 
> 赞同：1
> 
> 时间：2013-03-15T21:20:06.490
> 
> 标签：jquery, jquery-ui

我想弄清楚如何进行文件拖放。我已经阅读了许多教程和示例，并且认为我知道该怎么做，但是我无法让绝对的基本部分正常工作。

这是我目前拥有的代码。如果我将文件拖到 filedropper div 上，浏览器只会加载文件而不是给我删除警报。我错过了什么？

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
</head>
<body>
    <script language='javascript'>
    $(document).ready(function() {
        $('#filedropper').on('drop', function(e){
            e.preventDefault();
            alert('drop');
            return false;
        });
    });
    </script>
    <div id='filedropper' style='height:100px;width:100px;background:yellow'></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:43:42.200

首先，如果您使用的是 IE，这可能根本不起作用。IE（IE 10 除外）不支持文件拖放。

其次，您需要在 $(document).ready 中捕获并阻止 dragOver 函数：

```
$('#filedropper').on('dragover', function(e) {
    if (e.stopPropagation) { e.stopPropagation(); } // The if checks are excessive but safest
    if (e.preventDefault) { e.preventDefault(); }
}); 
```

[这](http://www.html5rocks.com/en/tutorials/file/dndfiles/)是我学习如何做时的主要参考。

那应该让你继续前进。

[在 JsBin 上查看](http://jsbin.com/ozataj/2/edit)

# php - 如何通过指定同一行中另一个单元格的数据来从特定单元格获取数据

> ID：15442280
> 
> 赞同：-2
> 
> 时间：2013-03-15T21:20:24.103
> 
> 标签：php, mysql, phpmyadmin

*我有一个包含username*、*forename*、*lastname*等列的表。

![我的桌子](../Images/83bf4edd8d63a826729c3e350eb095b4.png)

我想通过指定用户名来查找名字/姓氏。例如，如果我使用了**"Test123"**我会得到**"Test"**和**"Test"**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:28:48.990

最好使用准备好的语句并绑定变量以避免 SQL 注入。如果您不熟悉它，我建议您阅读它。

```
$query = 'SELECT lastname, forename FROM TestTable WHERE username = :uname';

//using PDO
$stmt = PDO->prepare($query);
$stmt->bindParam(':uname', $userName, DB::PARAM_STR);
$stmt->execute();

$row = $stmt->fetch(PDO::FETCH_ASSOC);

if ($stmt->rowCount() > 0) {
   echo $row['forename'] . ' ' . $row['lastname']; //prints: Test Test
}

$stmt->closeCursor(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:21:34.787

```
SELECT forename, lastname FROM `table` WHERE username = 'Test123' 
```

# c++ - 怎么了？它与指针有关吗？

> ID：15442284
> 
> 赞同：-3
> 
> 时间：2013-03-15T21:20:50.927
> 
> 标签：c++, windows, winapi, pointers

我的 WinMain 是这样开始的：

```
int WINAPI WinMain(HINSTANCE hInst, HINSTANCE hPrevInst, LPSTR lpCmdLine, int nShowCmd)
{
    if(SUCCEEDED(CoInitialize(NULL)))
    {
        {
            HRESULT hr = S_OK;

            Game game;

            D2DResources d2DResources;

            game.SetPointer(d2DResources);
            hr = d2DResources.Initialize(hInst); 
```

我的编译器将在中断未处理的异常之前执行上面显示的最后一行。我知道它不会走得更远，因为我在 hr = d2DResources.Initialize(hInst) 之前添加了一个 MessageBox 命令，之后又添加了一个，并且只有第一个出现。

所以，D2DResources::Initialisize(HINSTANCE) 看起来像这样：

```
HRESULT D2DResources::Initialize(HINSTANCE hInst)
{
    HRESULT hr;

    // Create factory
    hr = D2D1CreateFactory(D2D1_FACTORY_TYPE_SINGLE_THREADED, &pD2DFactory);

    // Create WIC factory
    if(SUCCEEDED(hr))
    {
        hr = CoCreateInstance(
            CLSID_WICImagingFactory,
            NULL,
            CLSCTX_INPROC_SERVER,
            IID_PPV_ARGS(&pIWICIF)
            );
    }

    // Create a window class
    WNDCLASSEX wClass;
    ZeroMemory(&wClass,sizeof(WNDCLASSEX));
    wClass.cbClsExtra=NULL;
    wClass.cbSize=sizeof(WNDCLASSEX);
    wClass.cbWndExtra=NULL;
    wClass.hbrBackground=(HBRUSH)COLOR_WINDOW;
    wClass.hCursor=LoadCursor(NULL,IDC_ARROW);
    wClass.hIcon=NULL;
    wClass.hIconSm=NULL;
    wClass.hInstance=hInst;
    wClass.lpfnWndProc=WinProc;
    wClass.lpszClassName="Window Class";
    wClass.lpszMenuName=NULL;
    wClass.style=CS_HREDRAW|CS_VREDRAW;

    if(!RegisterClassEx(&wClass))
    {
        int nResult=GetLastError();

        MessageBox(NULL,"Failed to register window class","Window Class Failed",MB_ICONERROR);
    }

    m_hWnd=CreateWindowEx(NULL,
            "Window Class",
            "Game", // Replace with gameName
            WS_OVERLAPPEDWINDOW|WS_MAXIMIZE,
            CW_USEDEFAULT,
            CW_USEDEFAULT,
            CW_USEDEFAULT,
            CW_USEDEFAULT,
            NULL,
            NULL,
            hInst,
            this);

    if(!m_hWnd)
    {
        int nResult=GetLastError();

        MessageBox(NULL,"Window class creation failed","Window Class Failed",MB_ICONERROR);
    }

    RECT rc;
    GetClientRect(m_hWnd,&rc);

    // Creates render target
    if(SUCCEEDED(hr))
    {
        pD2DFactory->CreateHwndRenderTarget(
            D2D1::RenderTargetProperties(),
            D2D1::HwndRenderTargetProperties(
                m_hWnd,
                D2D1::SizeU(
                    rc.right - rc.left,
                    rc.bottom - rc.top)),
                &pRT);
    }

    D2D1_SIZE_F pRTSize = pRT->GetSize();
    RECT rect = {50, (long)pRTSize.height-(LogLineSize*5), (long)pRTSize.width, (long)pRTSize.height};
    logArea = rect;

    if(SUCCEEDED(hr))
    {
        pRT->CreateSolidColorBrush(
            D2D1::ColorF(D2D1::ColorF::White),
            &pWhiteBrush
            );
    }

    if(SUCCEEDED(hr))
    {
        hr = DWriteCreateFactory(
            DWRITE_FACTORY_TYPE_SHARED,
            __uuidof(pWF),
            reinterpret_cast<IUnknown**>(&pWF)
            );
    }

    if(SUCCEEDED(hr))
    {
        hr = pWF->CreateTextFormat(
            L"Verdana",
            NULL,
            DWRITE_FONT_WEIGHT_NORMAL,
            DWRITE_FONT_STYLE_NORMAL,
            DWRITE_FONT_STRETCH_NORMAL,
            14.0f,
            L"",
            &pTextFormat
            );
    }

    return hr;
} 
```

重载的 Game::SetPointer 在使用 D2DResources 对象调用时看起来像这样：

```
void Game::SetPointer(D2DResources& p)
{
    pD2DResources=&p;
} 
```

pD2DResources 是一个 D2DResources*。

当 WM_SIZE 消息发送到我的 WinProc 时，问题发生在 D2DResources::Initialization(HINSTANCE) 期间。所以，有一些我的WinProc：

```
LRESULT CALLBACK WinProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    if(msg==WM_CREATE)
    {
        LPCREATESTRUCT pcs = (LPCREATESTRUCT)lParam;
            Game* pGame = (Game*)pcs->lpCreateParams;

            ::SetWindowLongPtrW(
                hWnd,
                GWLP_USERDATA,
                PtrToUlong(pGame)
                );
    }
    else
    {
        Game* pGame = reinterpret_cast<Game*>(static_cast<LONG_PTR>(
            ::GetWindowLongPtrW(
                hWnd,
                GWLP_USERDATA
                )));

        switch(msg)
        {

        case WM_SIZE:
            {
                UINT width = LOWORD(lParam);
                UINT height = HIWORD(lParam);
                pGame->pD2DResources->OnResize(width, height);
            }
            break; 
```

当调用 OnResize 时，就会出现问题。

```
void D2DResources::OnResize(UINT width, UINT height)
{
    if(pRT)
    {
        HRESULT hr = pRT->Resize(D2D1::SizeU(width, height));
        if(hr!=0) MessageBox(NULL,"Render target could not be resized","ID2D1HwndRenterTarget Error",MB_ICONERROR);
    }
} 
```

编译器中断，并且有一个黄色箭头指向 if(pRT)（pRT 是指向渲染目标的指针）行。

有趣的是，在调试过程中查看汽车显示了这一点。

*   这 0x00000000 {log=0x00000000 nLogLines=??? logArea={...} ...} D2DResources * const
*   日志 0x00000000 wchar_t [511] nLogLines CXX0030：错误：无法评估表达式
*   logArea {顶部=？？？底部=？？？左=？？？right=???} tagRECT m_hWnd CXX0017：错误：符号“”未找到 pD2DFactory CXX0017：错误：符号“”未找到 pIWICIF CXX0017：错误：符号“”未找到 pWF CXX0017：错误：符号“”未找到 pRT CXX0030：错误：无法评估
    表达式 pCurrentScreen CXX0017：错误：未找到符号“” pWhiteBrush CXX0017：错误：未找到符号“” pTextFormat CXX0017：错误：未找到符号“”

那么，问题是什么，解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:33:48.933

在调用 WinProc 时，您在 WinMain 中声明的 D2DResources 对象已超出范围，但您仍持有指向它的指针。当您通过指针调用方法时，它是针对堆栈中不再指向 D2DResources 对象的位置执行的（注意 - 您的 MessageBox 误导了您 - 它确实超出了范围。）

解决此问题的最简单方法是更改

```
D2DResources d2DResources; 
```

在你的 WinMain 中

```
D2DResources& d2DResources = *(new D2DResources()); 
```

这会将相同的对象放在堆上。

虽然我不会发誓这是你的代码的唯一问题......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T21:38:52.543

您将错误的指针传递给您的窗口。您正在创建窗口`D2DResources::Initialize`并`this`作为.`lpParam``Game*`

# python - 将 RGB 转换为 HLS 并返回

> ID：15442285
> 
> 赞同：15
> 
> 时间：2013-03-15T21:20:55.360
> 
> 标签：python, colors, rgb, color-space

我正在使用 python 的 colorsys 库将 RGB 颜色值转换为 HLS。只是为了验证，我尝试转换回 RGB 并得到不同的值。由于精度问题，我可以理解细微的差异，但这些值有很大的不同。

这是我的代码：

```
import colorsys
r=192
g=64
b=1

hlsval = colorsys.rgb_to_hls(r,g,b)
rgbval=colorsys.hls_to_rgb(hlsval[0],hlsval[1],hlsval[2])

print hlsval, rgbval 
```

输出：

```
(0.16666666666666666, 96.5, -1.0) (191.99999999999994, 192.0, 1.0) 
```

绿色值偏离 200% 以上

我尝试了其他一些值，并且每次其中一个组件都会大量关闭。我错过了什么吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-15T21:32:14.857

您的价值观超出了色彩空间的范围。

从[文档](http://docs.python.org/2/library/colorsys.html)：

> 所有这些颜色空间中的坐标都是浮点值。在 YIQ 空间中，Y 坐标介于 0 和 1 之间，但 I 和 Q 坐标可以为正也可以为负。在所有其他空间中，坐标都在 0 和 1 之间。

我猜你希望它们是 0 到 255 之间的字节值？只需先除以 255：

```
r, g, b = 192, 64, 1
r, g, b = [x/255.0 for x in r, g, b]
h, l, s = colorsys.rgb_to_hls(r, g, b)
r, g, b = colorsys.hls_to_rgb(h, l, s)
r, g, b = [x*255.0 for x in r, g, b]
print r, g, b 
```

这会给你：

```
192.0 64.0 1.0 
```

如果您想了解为什么当您超出色彩空间的范围时会出现如此荒谬的错误。

好吧，首先，阅读从文档链接的两个文档，以了解为什么颜色空间之外的值是无意义的，以及为什么您要求它生成不可能约束的值。然后，要弄清楚为什么它会以它的方式而不是其他方式失败，你需要知道它使用的是哪种算法——这很容易，因为文档链接到源代码，它是纯 Python 并且非常易读.

（PS，我可以想象 9650% 的亮度会是什么样子，但我对 -100% 的饱和度很好奇。可能是洛夫克拉夫特式的。）

# go - 如何在标准输出上更新就地字符串

> ID：15442292
> 
> 赞同：66
> 
> 时间：2013-03-15T21:21:40.553
> 
> 标签：go, stdout

我想输出到标准输出并让输出“覆盖”以前的输出。

例如; 如果我输出`On 1/10`，我希望下一个输出`On 2/10`覆盖`On 1/10`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-03-15T21:54:08.550

`stdout`是一个流 ( `io.Writer`)。您无法修改已写入的内容。*可以*更改的是该流在打印到终端时的表示方式。请注意，没有充分的理由假设这种情况。例如，用户可以随意将标准输出重定向到管道或文件。

所以正确的方法是首先检查：

*   如果标准输出要到终端
*   该终端覆盖行/屏幕的程序是什么

以上两个都超出了这个问题的范围，但是让我们假设终端是我们的设备。然后通常打印：

```
fmt.Printf("\rOn %d/10", i) 
```

将覆盖终端中的上一行。`\r`代表`carriage return`，由许多终端实现为将光标移动到当前行的开头，因此提供了“覆盖行”功能。

作为具有不同支持“覆盖”的“其他”终端的示例，这里是[操场](http://play.golang.org/p/b1LlRwxPdu)上的示例。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-11-03T21:57:24.837

如果您想将多行重写为输出，请使用此解决方案。例如，我使用这种方法制作了一个不错的[Conway 的“生命游戏”](https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life)输出。

免责声明：这仅适用于 ANSI 终端，除了使用`fmt`它也不是特定于 Go 的答案。

```
fmt.Printf("\033[0;0H")
// put your other fmt.Printf(...) here 
```

简要说明：这是一个转义序列，它告诉 ANSI 终端将光标移动到屏幕上的特定位置。`\033[`是所谓的转义序列，是`0;0H`告诉终端将光标移动到终端的第 0 行第 0 列的代码类型。

来源：[https ://en.wikipedia.org/wiki/ANSI_escape_code#Sequence_elements](https://en.wikipedia.org/wiki/ANSI_escape_code#Sequence_elements)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-09-17T12:01:50.557

一个字符串的解决方案将替换整个字符串

`fmt.Printf("\033[2K\r%d", i)`

例如，它正确地从 10 打印到 0：

```
for i:= 10; i>=0; i-- {
    fmt.Printf("\033[2K\r%d", i)
    time.Sleep(1 * time.Second)
}
fmt.Println() 
```

以前的答案没有解决。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-06T05:14:56.967

找到了一些值得分享的问题。
分享给未来可能面临同样问题的人

检查输出是否正在写入终端。如果是这样，使用终端定义的 \r （回车）将光标移动到行首

```
package main

import (
    "flag"
    "fmt"
    "os"
    "time"
)

var spinChars = `|/-\`

type Spinner struct {
    message string
    i       int
}

func NewSpinner(message string) *Spinner {
    return &Spinner{message: message}
}

func (s *Spinner) Tick() {
    fmt.Printf("%s %c \r", s.message, spinChars[s.i])
    s.i = (s.i + 1) % len(spinChars)
}

func isTTY() bool {
    fi, err := os.Stdout.Stat()
    if err != nil {
        return false
    }
    return fi.Mode()&os.ModeCharDevice != 0
}

func main() {
    flag.Parse()
    s := NewSpinner("working...")
    isTTY := isTTY()
    for i := 0; i < 100; i++ {
        if isTTY {
            s.Tick()
        }
        time.Sleep(100 * time.Millisecond)
    }

} 
```

[示例代码取自](https://blog.gopheracademy.com/advent-2019/cmdline/)

# xcode - 无法同时使用 Numberoflines 和 textAlignment

> ID：15442296
> 
> 赞同：1
> 
> 时间：2013-03-15T21:22:05.953
> 
> 标签：xcode, uilabel

当我第一次创建 UIButton 时，NSTextAlignment 总是正确的。

```
label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0,landscapes?450:380, 120)];
label.frame = CGRectMake(0, 0,landscapes?450:380, 120);
label.font = [UIFont fontWithName:@"Futura" size:60];
label.textColor = [UIColor blackColor];
label.backgroundColor = [UIColor clearColor];
label.minimumScaleFactor = 0.2;
label.adjustsFontSizeToFitWidth = true;
label.adjustsLetterSpacingToFitWidth = true;
label.textAlignment = NSTextAlignmentCenter;
NSLog(@"%i",label.textAlignment);
label.text = n;
[self addSubview:label]; 
```

但是，每次我为行数输入一个参数

```
label.numberOfLines = 2; 
```

标签未对齐文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:33:14.737

看一下关于垂直对齐的其他 stackoverflow 帖子。我认为将 sizeToFit 与 numberOfLines=0 一起使用，然后指定宽度也将帮助您使其水平居中 -[在 UILabel 中将文本垂直对齐到顶部](https://stackoverflow.com/questions/1054558/vertically-align-text-within-a-uilabel)。

# ruby - Ruby 中的排序稳定吗？

> ID：15442298
> 
> 赞同：46
> 
> 时间：2013-03-15T21:22:19.403
> 
> 标签：ruby, sorting

`sort`Ruby 稳定吗？也就是说，对于与 并列的元素，它们`sort`之间的相对顺序是否保留了原始顺序？例如，给定：

```
a = [
  {id: :a, int: 3},
  {id: :b, int: 1},
  {id: :c, int: 2},
  {id: :d, int: 0},
  {id: :e, int: 1},
  {id: :f, int: 0},
  {id: :g, int: 1},
  {id: :h, int: 2},
] 
```

能保证我们总是得到

```
a.sort_by{|h| h[:int]} 
```

以下

```
[
  {id: :d, int: 0},
  {id: :f, int: 0},
  {id: :b, int: 1},
  {id: :e, int: 1},
  {id: :g, int: 1},
  {id: :c, int: 2},
  {id: :h, int: 2},
  {id: :a, int: 3},
] 
```

`:id`值`:d`, `:f`, 和`:b`, `:e`, `:g`, 和 ,`:c`的`:h`元素之间的相对顺序没有任何变化 如果是这种情况，文档在哪里描述？

这个问题可能与[这个问题](https://stackoverflow.com/questions/14764135)有关，也可能无关。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-03-15T22:17:11.690

[MRI](http://en.wikipedia.org/wiki/Ruby_MRI)的[sort](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-sort)和sort_by都不[稳定](http://en.wikipedia.org/wiki/Sorting_algorithm#Stability)。[_](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-sort_by) 前段时间有人[要求](https://bugs.ruby-lang.org/issues/1089)让它们稳定，但被拒绝了。原因：Ruby 使用[就地快速排序算法](http://en.wikipedia.org/wiki/Quicksort)，如果不需要稳定性，它的性能会更好。请注意，您仍然可以从不稳定的方法中实现稳定的方法：

```
module Enumerable
  def stable_sort
    sort_by.with_index { |x, idx| [x, idx] }
  end

  def stable_sort_by
    sort_by.with_index { |x, idx| [yield(x), idx] }
  end
end 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-21T16:10:26.310

不，ruby 的内置排序不稳定。

如果你想要稳定的排序，这应该可以。如果您要经常使用它，您可能想为它创建一个方法。

```
a.each_with_index.sort_by {|h, idx| [h[:int], idx] }.map(&:first) 
```

基本上它会跟踪每个项目的原始数组索引，并在相同时将其用作决胜局`h[:int]`。

**更多信息，对于好奇：**

据我所知，使用原始数组索引作为决胜局是使用不稳定排序时保证稳定性的唯一方法。商品的实际属性（或其他数据）不会告诉您它们的原始顺序。

您的示例有些做作，因为`:id`键在原始数组中按升序排序。假设原始数组按`:id`;降序排序 您希望`:id`结果中的 ' 在平局时下降，如下所示：

```
[
 {:id=>:f, :int=>0},
 {:id=>:d, :int=>0},
 {:id=>:g, :int=>1},
 {:id=>:e, :int=>1},
 {:id=>:b, :int=>1},
 {:id=>:h, :int=>2},
 {:id=>:c, :int=>2},
 {:id=>:a, :int=>3}
] 
```

使用原始索引也可以解决这个问题。

**更新：**

Matz 自己的建议（请参阅[此页面](https://groups.google.com/d/msg/comp.lang.ruby/JcDGbaFHifI/2gKpc9FQbCoJ)）类似，并且可能比上述建议更有效：

```
n = 0
ary.sort_by {|x| n+= 1; [x, n]} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-06-11T17:14:55.893

对于 Ruby 的某些实现，排序是稳定的，但您不应该依赖它。Ruby 排序的稳定性是由实现定义的。

# 文件说什么

[文档](https://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-sort)说你不应该依赖排序是稳定的：

> 结果不保证稳定。当两个元素的比较返回 0 时，元素的顺序是不可预测的。

请注意，这并没有说明排序是否稳定。它只是说它不能保证稳定。任何给定的 Ruby 实现都可以具有稳定的排序，并且仍然与文档保持一致。它也可能有一个不稳定的排序，或者随时改变排序是否稳定。

# Ruby 实际做了什么

`true`如果 Ruby 的排序是稳定的，或者`false`不是稳定的，这个测试代码就会打印出来：

```
Foo = Struct.new(:value, :original_order) do
  def <=>(foo)
    value <=> foo.value
  end
end

size = 1000
unsorted = size.times.map do |original_order|
  value = rand(size / 10)
  Foo.new(value, original_order)
end
sorted = unsorted.sort
stably_sorted = unsorted.sort_by do |foo|
  [foo.value, foo.original_order]
end
p [RUBY_PLATFORM, RUBY_VERSION, RUBY_PATCHLEVEL, sorted == stably_sorted] 
```

以下是我在 Linux 机器上安装的所有 Ruby 的结果：

```
["java", "1.8.7", 357, false]
["java", "1.9.3", 551, false]
["x86_64-linux", "1.8.7", 374, false]
["x86_64-linux", "1.8.7", 374, false]
["x86_64-linux", "1.8.7", 376, false]
["x86_64-linux", "1.9.3", 392, false]
["x86_64-linux", "1.9.3", 484, false]
["x86_64-linux", "1.9.3", 551, false]
["x86_64-linux", "2.0.0", 643, false]
["x86_64-linux", "2.0.0", 648, false]
["x86_64-linux", "2.1.0", 0, false]
["x86_64-linux", "2.1.10", 492, false]
["x86_64-linux", "2.1.1", 76, false]
["x86_64-linux", "2.1.2", 95, false]
["x86_64-linux", "2.1.3", 242, false]
["x86_64-linux", "2.1.4", 265, false]
["x86_64-linux", "2.1.5", 273, false]
["x86_64-linux", "2.1.6", 336, false]
["x86_64-linux", "2.1.7", 400, false]
["x86_64-linux", "2.1.8", 440, false]
["x86_64-linux", "2.1.9", 490, false]
["x86_64-linux", "2.2.0", 0, true]
["x86_64-linux", "2.2.1", 85, true]
["x86_64-linux", "2.2.2", 95, true]
["x86_64-linux", "2.2.3", 173, true]
["x86_64-linux", "2.2.4", 230, true]
["x86_64-linux", "2.2.5", 319, true]
["x86_64-linux", "2.2.6", 396, true]
["x86_64-linux", "2.3.0", 0, true]
["x86_64-linux", "2.3.1", 112, true]
["x86_64-linux", "2.3.2", 217, true]
["x86_64-linux", "2.3.3", 222, true]
["x86_64-linux", "2.4.0", 0, true]
["x86_64-linux", "2.4.0", -1, true]
["x86_64-linux", "2.4.0", -1, true]
["x86_64-linux", "2.4.0", -1, true]
["x86_64-linux", "2.4.0", -1, true]
["x86_64-linux", "2.4.1", 111, true]
["x86_64-linux", "2.4.2", 198, true]
["x86_64-linux", "2.4.5", 335, true]
["x86_64-linux", "2.4.9", 362, true]
["x86_64-linux", "2.5.0", 0, true]
["x86_64-linux", "2.5.3", 105, true]
["x86_64-linux", "2.5.7", 206, true]
["x86_64-linux", "2.6.0", 0, true]
["x86_64-linux", "2.6.2", 47, true]
["x86_64-linux", "2.6.3", 62, true]
["x86_64-linux", "2.6.4", 104, true]
["x86_64-linux", "2.6.5", 114, true]
["x86_64-linux", "2.6.6", 146, true]
["x86_64-linux", "2.7.0", 0, true]
["x86_64-linux", "2.7.1", 83, true]
["x86_64-linux", "2.7.2", 137, true]
["x86_64-linux", "3.0.0", 0, true]
["x86_64-linux", "3.0.0", -1, true]
["x86_64-linux", "3.0.1", 64, true]
["x86_64-linux", "3.0.2", 107, true] 
```

我们可以看到 JRuby 是不稳定的，2.2 之前的 MRI 在 Linux 上是不稳定的。MRI >= 2.2.0 是稳定的（同样，在 Linux 上）。

不过，平台很重要。虽然上面的结果表明，在 Linux 上的 MRI 2.4.1 中排序是稳定的，但在 Windows 上相同的版本是不稳定的：

```
["x64-mingw32", "2.4.1", 111, false] 
```

# 为什么 MRI 的排序在 Linux 上是稳定的，而在 Windows 上却不是？

即使在单个版本的 Ruby 实现中，排序算法也可以改变。MRI可以使用至少三种不同的类型。[排序例程是在编译时使用util.c](https://github.com/ruby/ruby/blob/5aff6f294821574e54f458d547cf9641dd2eca98/util.c)中的一系列 #ifdefs 选择的。看起来 MRI 能够使用来自至少两个不同库的排序。它也有自己的实现。

# 你应该怎么做？

由于排序可能稳定但不能保证稳定，所以不要编写依赖于 Ruby 排序稳定的代码。当在不同的版本、实现或平台上使用时，该代码可能会中断。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-03-15T21:49:13.560

我个人不会指望这一点。如何做这样的事情：

```
a.sort {|a, b| s1 = a[:int] <=> b[:int]; s1 != 0 ? s1 : a[:id] <=> b[:id] } 
```

# php - phpseclib 在创建密钥期间使用 openssl？

> ID：15442299
> 
> 赞同：-1
> 
> 时间：2013-03-15T21:22:21.100
> 
> 标签：php, encryption, rsa, phpseclib

我的印象是 phpseclib 不需要 openssl 但是当我尝试以下代码时......

```
$rsa = new Crypt_RSA();
$key = $rsa->createKey(); 
```

如果它使用 openssl 函数，我会收到以下错误。有点困惑。

```
Warning: openssl_pkey_export(): cannot get key from parameter 1 in /RSA.php on line 509  

Warning: openssl_pkey_get_details() expects parameter 1 to be resource, boolean given in /RSA.php on line 510  

Warning: array_values() expects parameter 1 to be /RSA.php on line 513  

Warning: call_user_func_array() expects parameter 2 to be array, null given in /RSA.php on line 513  

Warning: array_values() expects parameter 1 to be array, boolean given in /RSA.php on line 514

Warning: call_user_func_array() expects parameter 2 to be array, null given in /RSA.php on line 514 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:59:17.690

phpseclib 使用 OpenSSL（如果可用但不是必需的）。

**短期修复**

`define('CRYPT_RSA_MODE', CRYPT_RSA_MODE_INTERNAL);`在顶部做。

**长期修复**

看看这会对你做什么会很有趣：

```
#
#-----[ OPEN ]------------------------------------------
#
Crypt/RSA.php
#
#-----[ FIND ]------------------------------------------
#
            $rsa = openssl_pkey_new(array(
                'private_key_bits' => $bits,
                'config' => dirname(__FILE__) . '/../openssl.cnf'
            ));
#
#-----[ AFTER, ADD ]------------------------------------
#
echo dirname(__FILE__) . "/../openssl.cnf\r\n";
echo file_exists(dirname(__FILE__) . '/../openssl.cnf') ? "exists\r\n" : "doesn't exist\r\n"; 
```

这不会解决问题，但它会给我们一些关于问题所在的线索。特别是，我认为问题在于：

[https://github.com/phpseclib/phpseclib/blob/0.3.1/phpseclib/Crypt/RSA.php#L503](https://github.com/phpseclib/phpseclib/blob/0.3.1/phpseclib/Crypt/RSA.php#L503)

phpseclib 在定义 CRYPT_RSA_MODE_OPENSSL 时检查是否定义了 OpenSSL 扩展，但在使用时不检查 openssl.cnf 是否存在。可能是对开发人员的疏忽，如果这是导致您的问题的原因，那么永久的长期修复将是让 phpseclib 检查该文件是否存在。

# c++ - 使用 boost::any_range 有什么好处？

> ID：15442301
> 
> 赞同：10
> 
> 时间：2013-03-15T21:22:29.607
> 
> 标签：c++, boost, stl, type-erasure, boost-range

使用有什么好处`boost::any_range`？这是一个例子：

```
typedef boost::any_range<
    int
  , boost::forward_traversal_tag
  , int
  , std::ptrdiff_t
> integer_range;

void display_integers(const integer_range& rng)
{
    boost::copy(rng,
                std::ostream_iterator<int>(std::cout, ","));

    std::cout << std::endl;
}

int main(){
    std::vector<int> input{ ... };
    std::list<int> input2{ ... };
    display_integers(input);
    display_integers(input2);
} 
```

但是使用满足 ForwardRange 概念的模板参数可以实现更高效的相同功能：

```
template <class ForwardRange>
void display_integers(const ForwardRange& rng)
{
    boost::copy(rng,
                std::ostream_iterator<int>(std::cout, ","));

    std::cout << std::endl;
} 
```

因此，我正在寻找值得使用 any_range 的场景。也许我错过了一些东西。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-15T21:34:30.260

这种技术称为类型擦除。有一篇完整的文章描述了以下示例的优缺点`any_iterator`：[On the Tension between Object-Oriented and Generic Programming in C++](http://www.artima.com/cppsource/type_erasure.html)。

可以隐藏（在单独的文件/库中）的实现/定义

```
void display_integers(const integer_range& rng) 
```

但在这种情况下

```
template <class ForwardRange>
void display_integers(const ForwardRange& rng) 
```

您必须向用户提供源代码（或至少在某处进行[显式实例化）。](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fexplicit_instantiation.htm)

此外，在第一种情况下，`display_integers`只会编译一次，但在第二种情况下，它将针对传递范围的每种类型进行编译。

另外，你可能有某个地方

```
integer_range rng; 
```

并且在您的一生中`rng`可以为其分配[不同类型的](http://liveworkspace.org/code/3YWJtS$0)范围：

```
vector<int> v;
list<int> l;
integer_range rng;
rng = v;
rng = l; 
```

类型擦除的最大缺点是它的运行时间成本；所有操作都是虚拟的，不能内联（容易）。

* * *

PS 类型擦除的另一个著名例子是[std::function](http://en.cppreference.com/w/cpp/utility/functional/function)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-15T21:42:47.127

`boost::any_range`可用于从函数返回范围。想象以下示例：

```
auto make_range(std::vector<int> v) -> decltype(???)
{   
    return v | filter([](int x){ return x % 2 == 0;})
        | transform([](int x){ return x * 2;});
} 
```

*：gcc 不会在不将其包装的情况下编译上述内容，但是`std::function`clang 3.2 通过直接传递 lambda 来工作

很难知道这个函数返回了什么。此外，[lambda 和 decltype](https://stackoverflow.com/questions/4846540/c11-lambda-in-decltype)不能一起工作，因此我们无法`decltype`在仅传递 lambda 时推断使用的类型。一种解决方案是`boost::any_range`像您的示例中那样使用（另一种解决方法是使用[Evgeny Panasyuk](https://stackoverflow.com/questions/15442301/why-to-use-boost-any-range/15442566?noredirect=1#comment21847506_15442566)在评论中`std::function`指出的）：

```
integer_range make_range(std::vector<int> v)
{
     return v | filter([](int x){ return x % 2 == 0;})
        | transform([](int x){ return x * 2;});
} 
```

使用[gcc 的](http://liveworkspace.org/code/czlAX$17)工作示例`std::function`。

[使用 clang](http://liveworkspace.org/code/czlAX$21)直接传递 lambda的工作示例。

# html - VS 2012 未突出显示 Javascript 代码语法错误

> ID：15442302
> 
> 赞同：0
> 
> 时间：2013-03-15T21:22:31.083
> 
> 标签：html, visual-studio-2012

我是 JavaScript 的初学者，目前正在学习基础知识。

我以前使用过 Visual Studio 来编写 C# 和 VB 等代码，并且对它如何突出显示错误等以及显示构建错误和不显示错误有一个很好的理解。

这是我在 VS2012 中编写的 HTML 5 文件中的一小段代码，我遇到的问题是它有 2 个非常明显的语法错误，但是它没有突出显示它们，并且该页面允许在 Firefox/Internet Explorer 中运行. 该页面显然不起作用，如果我不知道这种语法是错误的，我将无法诊断它。

[http://pastebin.com/LX4L7YiD](http://pastebin.com/LX4L7YiD)

现在我看了这个话题：[VS 2012 Syntax highlighting](https://stackoverflow.com/questions/14370477/vs-2012-syntax-highlighting)

我似乎无法从上述主题中弄清楚我需要做什么才能尝试该修复程序，或者即使该修复程序与我的问题相关。海报谈论他做了什么，但我不明白他是如何或做了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:24:57.547

您的代码实际上没有任何语法错误。

分号是可选的，变量不需要声明。

如果您想获得这些错误，请安装[Web Essentials](http://vswebessentials.com)并打开[JSHint](http://jshint.com)。
（并添加`"use strict";`到您的代码中）

# windows-8 - Autohotkey .exe 在 XP 中运行，而不是在 Win8 中

> ID：15442313
> 
> 赞同：0
> 
> 时间：2013-03-15T21:23:11.553
> 
> 标签：windows-8, windows-xp, autohotkey

我使用 AutoHotKey 创建了一个 .exe。我在 Windows XP 中创建了它。我已将它推送给其他一些使用更高版本 Windows（Vista 和/或 8）的用户。.exe 在他们的系统中不起作用。我没有看到任何 Windows 激活或任何按键功能。
.exe 在 XP 中打开窗口并输入击键。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:12:56.493

您必须在管理员帐户下运行 AutoHotKey。请参阅本文中的说明，[AutoHotkey 无法与 Windows 8 Windows 交互……或者可以！](http://geekswithblogs.net/deadlydog/archive/2012/09/10/autohotkey-cannot-interact-with-windows-8-windowshellipor-can-it.aspx)

# html - 更改导航栏上的背景图像单击

> ID：15442315
> 
> 赞同：0
> 
> 时间：2013-03-15T21:23:20.667
> 
> 标签：html, css, image, background, background-image

我不得不承认我对此很陌生，但我正在基于模板构建一个网站，除了一件事之外，我即将完成！当用户单击导航栏项目并弹出网站的不同部分时，我试图让背景更改为不同的图像。

如果它有帮助，这是网站：www.pitchadvisor.com

目前，我的导航栏链接设置如下：

```
<a href="#!/page_about"><span></span>What</a></li> 
```

我尝试了以下更改，但没有奏效：

```
<a href="#!/page_about" onclick="document.getElementById('test').style.backgroundImage='url(http://www.pitchadvisor.com/images/bg2.jpg)'; return false;" > 
```

任何帮助将不胜感激！！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:44:48.417

它不起作用，因为您的背景是在 html 而不是 css 中设置的，这就是我想出的可能修复它的方法：

将 html 的第 78 行从

```
<div id="bgStretch"><img src="http://pitchadvisor.com/images/bg.jpg" alt=""></div> 
```

到

```
<div id="bgStretch"><img id='bgimage' src="http://pitchadvisor.com/images/bg.jpg" alt=""></div> 
```

并从

```
<a href="#!/page_about" onclick="document.getElementById('test').style.backgroundImage='url(http://www.pitchadvisor.com/images/bg2.jpg)'; return false;" > 
```

到

```
<a href="#!/page_about" onclick="document.getElementById('bgimage').setAttribute('src', 'http://www.pitchadvisor.com/images/bg2.jpg');" > 
```

让我知道这是否适合您，或者我能做的任何其他事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:31:35.197

这会有帮助吗？

```
 <a href="#" onclick="javascript:document.getElementById('asd')
.style.backgroundImage='url(http://www.pitchadvisor.com/images/bg2.jpg)';"> 
Click Me </a>

    <div id="asd" style="margin-top:50px; width: 100px; height: 100px; border: 1px dashed green;"></div> 
```

在这里试试：http: [//jsfiddle.net/dTAW3/](http://jsfiddle.net/dTAW3/)

# c# - 使用委托将变量发送到文本框

> ID：15442319
> 
> 赞同：-5
> 
> 时间：2013-03-15T21:23:29.797
> 
> 标签：c#, variables, textbox, delegates

如何获取或引用`k`我在其中创建的变量`button1_Click()`？

考虑到我不能让它公开或静态。同时，我希望将此变量的值发送到`textbox.text`；

如何才能做到这一点？

```
 public delegate string fac(int x);
    public static fac intostring = factory;

    public static string factory(int x)
    {
        string inst = x.ToString();
        return inst;
    }

    public class MyClass
    {
        static public string s = intostring(/*here*/);
            public string Text;

        public MyClass(Form Form1)
        {
            var textbox = Form1.Controls.Find("textBox1", true).FirstOrDefault();
            Text = ((TextBox)textbox).Text = (s);
        }
    }
    private void button1_Click(object sender, EventArgs e)
    {
         int k = 1;
        intostring(k);
        MyClass my = new MyClass(this);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:26:26.903

首先，`k`button1_Click 中的变量作用域是函数`button1_Click`，你不能在函数作用域之外获得对它的引用！

然后，该行`intostring(k);`并没有真正做任何有用的事情，因为您没有使用调用委托的返回结果。

要将 TextBox 的 Text 设置为 k 的值，您只需在此处执行此操作即可：

```
int k = 1;
var textbox = Form1.Controls.Find("textBox1", true).FirstOrDefault();
((TextBox)textbox).Text = k 
```

# node.js - 在 Mongoose 中查询多个子文档元素

> ID：15442323
> 
> 赞同：2
> 
> 时间：2013-03-15T21:23:59.900
> 
> 标签：node.js, mongodb, mongoose

我似乎无法使以下查询起作用：

```
Group.find({ $or: [ {'groupOwner': req.user._id }, { 'subscribers.user': req.user._id, 'subscribers.level': 'owner' } ] }, 'groupName', { sort: ['groupName', 'ascending'] }, function(err, groups) { 
```

我的架构有一个组，订阅者作为子文档数组。我想找到 groupOwner 与传递的用户 ID 匹配的所有组（工作正常），以及subscribers.user = req.user._id ANDsubscribers.level = 'owner' 的所有文档

所写的查询返回所有子文档，其中subscribers.user = req.user._id 或有一些订阅者级别='所有者'。需要明确的是，我只想要子文档具有subscribers.user = req.user._id 并且相同的子文档具有subscribers.level = 'owner' 的组。

我已经尝试了各种方式的 $and 和 $elemMatch ，但就是无法得到它。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T21:35:48.123

`$elemMatch`是匹配同一数组元素中的多个字段时的正确运算符；您的查询应如下所示：

```
Group.find(
  { $or: [ 
    { groupOwner: req.user._id }, 
    { subscribers: { $elemMatch: { user: req.user._id, level: 'owner' }}}
  ]}, 
  'groupName', 
  { sort: ['groupName', 'ascending'] }, 
  function(err, groups) { ... 
```

# android - 从 string.xml 将文本设置为文本视图不起作用

> ID：15442332
> 
> 赞同：1
> 
> 时间：2013-03-15T21:24:41.163
> 
> 标签：android

所以我下面的代码将文本视图文本设置为字符串但是当我运行应用程序时，文本视图中没有显示任何内容，谁能解释为什么？

**代码：**

```
public void onItemSelected(AdapterView<?> parent, View view,
    int position, long id) {
    Object poem = parent.getItemAtPosition(position);
    if(poem.toString() == "Tam O Shanter"){
         selectedPoem.setText(getString(R.string.tamO));
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T21:31:19.840

```
if (poem.toString() == "Tam O Shanter"){
   selectedPoem.setText(getString(R.string.tamO));
} 
```

这将始终返回 false，因为您正在比较**引用**而不是值。你必须使用`equals()`方法。

有一个黄金法则：*每次你想比较字符串时，equals() 都会成为你的朋友。*

你需要这样做：

```
if (poem.toString().equals("Tam O Shanter")) { // or equalsIgnoreCase()
   selectedPoem.setText(getString(R.string.tamO));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T21:33:31.503

我也重写了你的代码

```
String poem = (String)parent.getItemAtPosition(position); 
```

你假设等于而不是 == 来比较 2 个字符串

```
 public void onItemSelected(AdapterView<?> parent, View view,
    int position, long id) {
    String poem = (String)parent.getItemAtPosition(position);
    if(poem.toString().equalsIgnoreCase("Tam O Shanter")){
         selectedPoem.setText(getString(R.string.tamO));
    }
  } 
```

# java - 如何在java中使对象居中

> ID：15442334
> 
> 赞同：2
> 
> 时间：2013-03-15T21:24:43.303
> 
> 标签：java, swing, button, field, center

我想制作一个简单的程序，它有一个按钮和多个字段。当我在脑海中计划这个时，我想使用网格布局，或者至少在我学习时首先使用按钮。这是我到目前为止所拥有的，我要问的问题是我应该在哪里放置我的网格布局，或者我是否在面板、框架或按钮中设置对齐中心？

```
import java.awt.GridLayout;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class Normal {
    public static void main(String[] args) {
        JFrame frame = new JFrame("test");
        JButton button = new JButton("why");
        JPanel panel = new JPanel();
        JTextField field= new JTextField();

    //button
    button.setSize(50, 50);

    //Field
    field.setSize(250, 25);

    //Frame
    frame.setSize(500, 500);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
    frame.add(panel);
    frame.add(field);
    frame.add(button);

        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:36:13.193

始终将组件添加`Container`到`JFrame`. 将 Layout 设置`Container`为`GridLayout`. 例如，您可以按如下方式更改代码：

```
import java.awt.GridLayout;
import java.awt.Container;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class Normal {
    public static void main(String[] args) {
        JFrame frame = new JFrame("test");
        JButton button = new JButton("why");
        JPanel panel = new JPanel();
        JTextField field= new JTextField();
        Container c = frame.getContentPane();
        c.setLayout(new GridLayout(3,1));//Devides the container in 3 rows and 1 column
        c.add(panel);//Add in first row
        c.add(button);//Add in second row
        c.add(field);//Add in third row
        frame.setSize(500, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);

        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T03:30:26.143

在从 JFrame 扩展类的方法中，您可以简单地设置要添加组件的位置。如果您有一个带有 ex 的面板。一个按钮，你可以像这样添加它：

```
add(panel, BorderLayout.CENTER); 
```

希望这可以帮助。

# ios - 使用 CGContextDrawimage 保留透明像素的颜色？

> ID：15442337
> 
> 赞同：3
> 
> 时间：2013-03-15T21:24:49.950
> 
> 标签：ios, graphics, core-graphics

我正在将存储在磁盘上的 TIFF 中的图像数据加载到缓冲区中，随后我将使用该缓冲区来创建 OpenGL 纹理。我通过写入`CGContext`. 原始图像在每个像素上都是 100% 白色。从一个像素到下一个像素的唯一变化是 alpha 值。

当我写入 时`CGContext`，不会保留透明像素的颜色。“你为什么关心透明像素的颜色”你问？缩放图像时，透明像素的颜色会变得可见，从而产生难看的深色轮廓伪影。

我尝试将数据直接从`CGImage`缓冲区读取并使用该缓冲区创建我的纹理（使用`CGImageGetDataProvider(image)`），但这仅适用于 CGImage 的颜色空间为 RGBA 的情况。大概是`CGContextDrawimage`处理从一种颜色空间到另一种颜色空间的转换。

有什么方法可以告诉我`CGContextDrawimage`保留透明像素的颜色吗？或者我将不得不以其他方式加载我的图像？

# ios - NSMutableArray 未将数据正确存储到循环中

> ID：15442345
> 
> 赞同：2
> 
> 时间：2013-03-15T21:25:25.593
> 
> 标签：ios, nsmutablearray

我尝试将一些存储`NSMutableDictionaries`到一个`NSMutableArray`throw a for 循环中：

```
NSMutableArray *productsIdAndQuantities = [[NSMutableArray alloc]init];
NSMutableDictionary *element = [[NSMutableDictionary alloc]init];

for (id object in shoppingArray) {
    [element setObject:[object valueForKey:@"proId"] forKey:@"id"];
    [element setObject:[object valueForKey:@"qty"] forKey:@"quantity"];
    NSLog(@"%@",element);//tested, it's different on every iteration
    [productsIdAndQuantities addObject:element];
} 
```

循环结束后，我尝试调试`productsIdAndQuantities`，结果发现它包含上面循环的确切数量的项目，但只有一个值。

这就是我的意思：

循环内部（`NSLog(@"%@",element);`）：

```
{
    id = 13293;
    quantity = "-2";
}
{
    id = 12632;
    quantity = "-5";
} 
```

循环之后（`NSLog(@"%@",productsIdAndQuantities);`相同的值！！！！！！）：

```
(
    {
        id = 12632;
        quantity = "-5";
    },
    {
        id = 12632;
        quantity = "-5";
    }
) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T21:28:06.747

您正在将相同的字典添加到数组中；改用它，它在每次迭代时分配一个新字典：

```
NSMutableArray *productsIdAndQuantities = [[NSMutableArray alloc]init];
for (id object in shoppingArray) {
    NSMutableDictionary *element = [[NSMutableDictionary alloc]init];
    [element setObject:[object valueForKey:@"proId"] forKey:@"id"];
    [element setObject:[object valueForKey:@"qty"] forKey:@"quantity"];
    NSLog(@"%@",element);//tested, it's different on every iteration
    [productsIdAndQuantities addObject:element];
} 
```

注意：这假设您使用的是 ARC，否则您将在右侧、左侧和中心泄漏字典...

# wordpress - buddypress Like 插件的通知

> ID：15442351
> 
> 赞同：1
> 
> 时间：2013-03-15T21:25:58.627
> 
> 标签：wordpress, buddypress

我正在使用[Buddypress 之类](http://wordpress.org/extend/plugins/buddypress-like/)的插件，该插件将该功能添加到状态更新中。现在，当用户喜欢某样东西时，它不会像其他 buddypress 组件那样发送状态通知。我尝试编辑插件的代码以添加此功能，并将以下代码添加到 bp-like.php，但仍然无法正常工作：

```
/******************************************************
/* Notification
 *****************************************************/
function bp_like_setup_globals() {
    global $bp, $current_blog;
    $bp->bp_like->id = 'bp_like_notifier';
    $bp->bp_like->slug = 'BP_LIKE_SLUG';
    $bp->bp_like->notification_callback = 'like_format_notifications';
    $bp->active_components[$bp->bp_like->slug] = $bp->bp_like->id;
    do_action( 'bp_like_setup_globals' );
}
add_action( 'bp_setup_globals', 'bp_like_setup_globals' );

function like_format_notifications( $action, $item_id, $secondary_item_id, $total_items ) {
    global $bp;

    $link=like_notifier_activity_get_permalink( $item_id ); 

    if( 'activity_like' == $action ) {
    if ( (int)$total_items > 1 )
        return apply_filters( 'log_multiple_verifications_notification', '<a href="'. $link .'" title="' . __( 'Likes', 'bp-like' ) . '">' . sprintf( __('You have %d new likes', 'bp-like' ), (int)$total_items ) . '</a>', $total_items );
        else
        return apply_filters( 'log_single_verification_notification', '<a href="'. $link .'" title="' . __( 'likes', 'bp-like' ) . '">' . sprintf( __('You have %d new like', 'bp-like' ), (int)$total_items ) . '</a>', $total_items );
    }

    do_action( 'like_format_notifications', $action, $item_id, $secondary_item_id, $total_items );

    return false;
}
function like_remove_screen_notifications() {
    global $bp;
    if($has_access)//if user can view this activity, remove notification(just a safeguard for hidden activity)
    bp_core_delete_notifications_for_user_by_type( $bp->loggedin_user->id, $bp->bp_like->id, 'new_like' );
}
add_action( 'bp_activity_screen_single_activity_permalink', 'like_remove_screen_notifications' );   

//get the thread permalink for activity
function like_notifier_activity_get_permalink( $item_id, $activity_obj = false ) {
    global $bp;

    if ( !$activity_obj )
        $activity_obj = new BP_Activity_Activity( $item_id );

        if ( 'activity_comment' == $activity_obj->type )
            $link = $bp->root_domain . '/' . BP_ACTIVITY_SLUG . '/p/' . $activity_obj->item_id . '/';
        else
            $link = $bp->root_domain . '/' . BP_ACTIVITY_SLUG . '/p/' . $activity_obj->id . '/';

    return apply_filters( 'like_notifier_activity_get_permalink', $link );
} 
```

在 bp_like_add_user_like() 函数中，我把它放在 $liked_count = count( $users_who_like ) 之后：

```
bp_core_add_notification( $item_id, $user_id, $bp->bp_like->id, 'activity_like' ); 
```

到目前为止，这没有用..知道我在这里缺少什么吗？

谢谢

# printing - 如果在打印机选择对话框中单击“打印”，Opera window.close 不会在 window.print 之后触发/执行

> ID：15442352
> 
> 赞同：0
> 
> 时间：2013-03-15T21:26:00.623
> 
> 标签：printing, window, opera

此问题仅适用于 Opera。其他浏览器都很好：-

使用 JavaScript，我正在创建一个新窗口，写入文档，然后在窗口对象上调用 print 和 close。打印功能执行并弹出打印机选择对话框后，如果用户单击“取消”，则执行关闭功能并关闭窗口。但是，如果用户单击“打印”，文档会打印，但窗口不会关闭。

这是 JS 小提琴

```
http://jsfiddle.net/HEaFP/ 
```

这是我正在使用的代码

```
var ic_hic_demo_window = window.open("", "", "toolbar=no, status=no, directories=no, menubar=no, titlebar=no, location=no, scrollbars=no, resizable=no, height=500, width=500, left=10, top=10");
ic_hic_demo_window.document.open();
ic_hic_demo_window.document.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml"><head><title></title>');
ic_hic_demo_window.document.write('</head><body style="font-family: tahoma, arial, verdana; font-size: 11px" onload="print();close();">'); 
ic_hic_demo_window.document.write("Some sample text");
ic_hic_demo_window.document.write("</body></html>");
ic_hic_demo_window.document.close(); 
```

任何帮助是极大的赞赏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:08:38.550

好吧..我想如果正在从该窗口打印，则忽略关闭窗口的命令是有意义的，不是吗？你有没有试过做类似的事情

```
onload="print();setInterval(function(){close();}, 500)" 
```

*   这个想法是脚本不断尝试每半秒关闭一次窗口，直到它工作为止。

# paypal - Paypal IPN 于 2013 年 3 月 13 日停止运行

> ID：15442354
> 
> 赞同：1
> 
> 时间：2013-03-15T21:26:05.553
> 
> 标签：paypal, paypal-ipn

我正在使用下面的脚本。直到 2013 年 3 月 13 日，一切都运行良好。过去几个小时我一直在拔头发，根本找不到问题...

```
<?php
/**
 *  PayPal IPN Listener
 *
 *  A class to listen for and handle Instant Payment Notifications (IPN) from 
 *  the PayPal server.
 *
 *  https://github.com/Quixotix/PHP-PayPal-IPN
 *
 *  @package    PHP-PayPal-IPN
 *  @author     Micah Carrick
 *  @copyright  (c) 2012 - Micah Carrick
 *  @version    2.1.0
 */
class IpnListener {

    /**
     *  If true, the recommended cURL PHP library is used to send the post back 
     *  to PayPal. If flase then fsockopen() is used. Default true.
     *
     *  @var boolean
     */
    public $use_curl = true;     

    /**
     *  If true, explicitly sets cURL to use SSL version 3\. Use this if cURL
     *  is compiled with GnuTLS SSL.
     *
     *  @var boolean
     */
    public $force_ssl_v3 = true;     

    /**
     *  If true, cURL will use the CURLOPT_FOLLOWLOCATION to follow any 
     *  "Location: ..." headers in the response.
     *
     *  @var boolean
     */
    public $follow_location = false;     

    /**
     *  If true, an SSL secure connection (port 443) is used for the post back 
     *  as recommended by PayPal. If false, a standard HTTP (port 80) connection
     *  is used. Default true.
     *
     *  @var boolean
     */
    public $use_ssl = true;      

    /**
     *  If true, the paypal sandbox URI www.sandbox.paypal.com is used for the
     *  post back. If false, the live URI www.paypal.com is used. Default false.
     *
     *  @var boolean
     */
    public $use_sandbox = true; 

    /**
     *  The amount of time, in seconds, to wait for the PayPal server to respond
     *  before timing out. Default 30 seconds.
     *
     *  @var int
     */
    public $timeout = 30;       

    private $post_data = array();
    private $post_uri = '';     
    private $response_status = '';
    private $response = '';

    const PAYPAL_HOST = 'www.paypal.com';
    const SANDBOX_HOST = 'www.sandbox.paypal.com';

    /**
     *  Post Back Using cURL
     *
     *  Sends the post back to PayPal using the cURL library. Called by
     *  the processIpn() method if the use_curl property is true. Throws an
     *  exception if the post fails. Populates the response, response_status,
     *  and post_uri properties on success.
     *
     *  @param  string  The post data as a URL encoded string
     */
    protected function curlPost($encoded_data) {

        if ($this->use_ssl) {
            $uri = 'https://'.$this->getPaypalHost().'/cgi-bin/webscr';
            $this->post_uri = $uri;
        } else {
            $uri = 'http://'.$this->getPaypalHost().'/cgi-bin/webscr';
            $this->post_uri = $uri;
        }

        $ch = curl_init();

        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
        curl_setopt($ch, CURLOPT_CAINFO, 
                    dirname(__FILE__)."/cert/api_cert_chain.crt");
        curl_setopt($ch, CURLOPT_URL, $uri);
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $encoded_data);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, $this->follow_location);
        curl_setopt($ch, CURLOPT_TIMEOUT, $this->timeout);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_HEADER, true);

        if ($this->force_ssl_v3) {
            curl_setopt($ch, CURLOPT_SSLVERSION, 3);
        }

        $this->response = curl_exec($ch);
        $this->response_status = strval(curl_getinfo($ch, CURLINFO_HTTP_CODE));

        if ($this->response === false || $this->response_status == '0') {
            $errno = curl_errno($ch);
            $errstr = curl_error($ch);
            throw new Exception("cURL error: [$errno] $errstr");
        }
    }

    /**
     *  Post Back Using fsockopen()
     *
     *  Sends the post back to PayPal using the fsockopen() function. Called by
     *  the processIpn() method if the use_curl property is false. Throws an
     *  exception if the post fails. Populates the response, response_status,
     *  and post_uri properties on success.
     *
     *  @param  string  The post data as a URL encoded string
     */
    protected function fsockPost($encoded_data) {

        if ($this->use_ssl) {
            $uri = 'ssl://'.$this->getPaypalHost();
            $port = '443';
            $this->post_uri = $uri.'/cgi-bin/webscr';
        } else {
            $uri = $this->getPaypalHost(); // no "http://" in call to fsockopen()
            $port = '80';
            $this->post_uri = 'http://'.$uri.'/cgi-bin/webscr';
        }

        $fp = fsockopen($uri, $port, $errno, $errstr, $this->timeout);

        if (!$fp) { 
            // fsockopen error
            throw new Exception("fsockopen error: [$errno] $errstr");
        } 

        $header = "POST /cgi-bin/webscr HTTP/1.1\r\n";
        $header .= "Host: ".$this->getPaypalHost()."\r\n";
        $header .= "Content-Type: application/x-www-form-urlencoded\r\n";
        $header .= "Content-Length: ".strlen($encoded_data)."\r\n";
        $header .= "Connection: Close\r\n";

        fputs($fp, $header.$encoded_data."\r\n\r\n");

        while(!feof($fp)) { 
            if (empty($this->response)) {
                // extract HTTP status from first line
                $this->response .= $status = fgets($fp, 1024); 
                $this->response_status = trim(substr($status, 9, 4));
            } else {
                $this->response .= fgets($fp, 1024); 
            }
        } 

        fclose($fp);
    }

    private function getPaypalHost() {
        if ($this->use_sandbox) return self::SANDBOX_HOST;
        else return self::PAYPAL_HOST;
    }

    /**
     *  Get POST URI
     *
     *  Returns the URI that was used to send the post back to PayPal. This can
     *  be useful for troubleshooting connection problems. The default URI
     *  would be "ssl://www.sandbox.paypal.com:443/cgi-bin/webscr"
     *
     *  @return string
     */
    public function getPostUri() {
        return $this->post_uri;
    }

    /**
     *  Get Response
     *
     *  Returns the entire response from PayPal as a string including all the
     *  HTTP headers.
     *
     *  @return string
     */
    public function getResponse() {
        return $this->response;
    }

    /**
     *  Get Response Status
     *
     *  Returns the HTTP response status code from PayPal. This should be "200"
     *  if the post back was successful. 
     *
     *  @return string
     */
    public function getResponseStatus() {
        return $this->response_status;
    }

    /**
     *  Get Text Report
     *
     *  Returns a report of the IPN transaction in plain text format. This is
     *  useful in emails to order processors and system administrators. Override
     *  this method in your own class to customize the report.
     *
     *  @return string
     */
    public function getTextReport() {

        $r = '';

        // date and POST url
        for ($i=0; $i<80; $i++) { $r .= '-'; }
        $r .= "\n[".date('m/d/Y g:i A').'] - '.$this->getPostUri();
        if ($this->use_curl) $r .= " (curl)\n";
        else $r .= " (fsockopen)\n";

        // HTTP Response
        for ($i=0; $i<80; $i++) { $r .= '-'; }
        $r .= "\n{$this->getResponse()}\n";

        // POST vars
        for ($i=0; $i<80; $i++) { $r .= '-'; }
        $r .= "\n";

        foreach ($this->post_data as $key => $value) {
            $r .= str_pad($key, 25)."$value\n";
        }
        $r .= "\n\n";

        return $r;
    }

    /**
     *  Process IPN
     *
     *  Handles the IPN post back to PayPal and parsing the response. Call this
     *  method from your IPN listener script. Returns true if the response came
     *  back as "VERIFIED", false if the response came back "INVALID", and 
     *  throws an exception if there is an error.
     *
     *  @param array
     *
     *  @return boolean
     */    
    public function processIpn($post_data=null) {

        $encoded_data = 'cmd=_notify-validate';

        if ($post_data === null) { 
            // use raw POST data 
            if (!empty($_POST)) {
                $this->post_data = $_POST;
                $encoded_data .= '&'.file_get_contents('php://input');
            } else {
                throw new Exception("No POST data found.");
            }
        } else { 
            // use provided data array
            $this->post_data = $post_data;

            foreach ($this->post_data as $key => $value) {
                $encoded_data .= "&$key=".urlencode($value);
            }
        }

        if ($this->use_curl) $this->curlPost($encoded_data); 
        else $this->fsockPost($encoded_data);

        if (strpos($this->response_status, '200') === false) {
            throw new Exception("Invalid response status: ".$this->response_status);
        }

        if (strpos($this->response, "VERIFIED") !== false) {
            return true;
        } elseif (strpos($this->response, "INVALID") !== false) {
            return false;
        } else {
            throw new Exception("Unexpected response from PayPal.");
        }
    }

    /**
     *  Require Post Method
     *
     *  Throws an exception and sets a HTTP 405 response header if the request
     *  method was not POST. 
     */    
    public function requirePostMethod() {
        // require POST requests
        if ($_SERVER['REQUEST_METHOD'] && $_SERVER['REQUEST_METHOD'] != 'POST') {
            header('Allow: POST', true, 405);
            throw new Exception("Invalid HTTP request method.");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T23:22:45.643

我在这里遇到了同样的问题，[PayPal IPN 侦听器将不再工作](https://stackoverflow.com/questions/17158335/paypal-ipn-listener-wont-work-anymore)并找到此修复程序，也许可以帮助您。在您的 IPN Listener 接近尾声时，

```
if (strpos($this->response, "VERIFIED") !== false) {
        return true;
    } elseif (strpos($this->response, "INVALID") !== false) {
        return false;
    } else {
        throw new Exception("Unexpected response from PayPal.");
    } 
```

将“！== false”更改为“== 0”（等于零）；在两种中频条件下。这个对我有用！现在我刚刚写了我的问题/自我回答，我已经链接起来，等待一些比我更有经验的程序员可以确认和解释这个问题（如果我做得对的话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T01:56:57.723

看看这个链接。看来 Paypal 更改了 IPN 代码。我不是这方面的专家，但一直在努力解决这个问题，直到我偶然发现了那个链接。它现在似乎正在工作，我唯一的问题是 MySQL insert Into 代码似乎没有插入新记录。

[http://www.johnboy.com/blog/http-11-paypal-ipn-example-php-code](http://www.johnboy.com/blog/http-11-paypal-ipn-example-php-code)

# graphics - 在 Java3d 中手动缩放单位立方体

> ID：15442355
> 
> 赞同：1
> 
> 时间：2013-03-15T21:26:09.883
> 
> 标签：graphics, transformation, java-3d, 3d-rendering

我正在研究 Java3D 中的一些东西，我知道 TransformGroups 是您通常应用缩放的方式......

但是，我正在尝试创建一种基于缩放向量定义长方体的方法。

所以我有一个单位立方体 1,1,1 -> -1,-1,-1 我想手动应用缩放转换。

```
 private static void scaleCoordinates(IndexedQuadArray indexedQuadArray, Vector3d scaleVector) {
    //Create scalar transform
    Transform3D scalarTransform = new Transform3D();
    scalarTransform.setScale(scaleVector);

    // retrieve the vertex coordinates
    GeometryInfo indexedQuadArrayGeometryInfo = new GeometryInfo(indexedQuadArray);
    Point3f coordinatesToScaleArray [] = indexedQuadArrayGeometryInfo.getCoordinates();

    // scale each 3d coordinate 
    for(Point3f coordinate: coordinatesToScaleArray){
        scalarTransform.transform(coordinate);
    }

    // update the indexed quad array with scaled-coordinates.
    indexedQuadArray.setCoordinates(0, coordinatesToScaleArray);
} 
```

现在，当缩放为正整数时它可以工作，但如果我缩放 0.5 或负数，顶点就会变得混乱。

有谁知道怎么了？我认为我应该能够以小于 1 的比例缩放，也许 Transform3D.transform(Point3f) 正在发生一些我不知道的事情。

非常感谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:39:35.993

我不希望负数起作用。当您考虑它时，缩放转换实际上只是一个乘法。因此，用向量 (.5,.6,.7) 缩放点 (1,1,1) 应该会给你新的点 (.5,.6,.7)

如果你按负数“缩放”，你会把你的立方体翻过来，各种法线和边缘都是错误的。

你能提供你的 quadArray 和你正在使用的 scaleVector 中的顶点列表吗？

# php - mySQL 只选择大于零的列

> ID：15442358
> 
> 赞同：0
> 
> 时间：2013-03-15T21:26:30.413
> 
> 标签：php, mysql, codeigniter, activerecord

我有一个表格，允许用户留下未填写的输入。我在数据库中将这些字段注册为十进制（2）“0.00”。

将表单插入数据库后，我想允许用户编辑该表单。

我的问题是，为了性能，我如何只为与用户表单输入相对应的特定行选择不同于 0.00 的列？

顺便说一句，我正在使用 CodeIgniter 的 Active Record 功能，但如果我使用字符串 sql 查询得到我需要的东西，我不会感到不安：D

我想象的伪代码：

```
select _columns-greater-than-zero_ from _table-name_ where id=_row-id_ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:35:37.283

因此，您想根据特定行在该列中的值来选择列的变量列表？你为什么想这么做？它根本不会提高性能，事实上，它需要针对这些列的值运行的额外检查会使查询变慢。

如果您试图确定是否在页面上显示该列，只需在代码中添加一些条件以检查返回行中的值是否等于 0。

# mysql - 选择一个值在多值列中重复多少次

> ID：15442359
> 
> 赞同：0
> 
> 时间：2013-03-15T21:26:30.787
> 
> 标签：mysql

考虑这张表

```
student_name  grade
steve         a, b,d
mike          c,d,b
bob           a,d 
```

我想写一个查询来提取我已经输出的等级数

```
a    2
b    2
c    1
d    3 
```

我试过了：

```
select s1.grade, count(s1.grade) from student s1, student s2
where s1.grade = s2.grade
group by s1.grade 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:29:31.727

不漂亮，但这是你不想违反第一范式并拥有多值列的一个原因......

```
select 'a' as grade, count(*) as occurrences
from student
where grade like '%a%'

union all

select 'b' as grade, count(*) as occurrences
from student
where grade like '%b%'

union all

select 'c' as grade, count(*) as occurrences
from student
where grade like '%c%'

union all

select 'd' as grade, count(*) as occurrences
from student
where grade like '%d%' 
```

[在这里查看它的实际应用](http://sqlfiddle.com/#!2/639d0/1)。

或者，如果您有 `grades`Chris K 提出的表格，您可以执行以下操作：

```
select g.grade, count(s.student_name) as occurances
from 
  grades g
  left join student s
    on concat(',', s.grade, ',') like concat('%,', g.grade, ',%')
group by g.grade 
```

[在这里查看它的实际应用](http://sqlfiddle.com/#!2/fd069d/13)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T21:38:11.947

或者，如果您有一个`grades`包含可能成绩列表的表格（称为 ）：

```
grade
-----
a
b
c
d
e 
```

那么下面的语句也可以工作：

```
select g.grade as [Grade], (select count(1) from student where grade like '%'+g.grade+'%') as [Count] from grades g order by g.grade asc 
```

在将其他潜在成绩添加到计数中时，这可能会更加灵活。

但如上所述...避免正常化后果自负...

# php - pheanstalk 使用Tube()->put() 函数，不等待响应

> ID：15442360
> 
> 赞同：0
> 
> 时间：2013-03-15T21:26:31.167
> 
> 标签：php, asynchronous, pheanstalk

我目前有以下内容：

```
try {
    $pheanstalk->useTube($tube)->put($data);
} catch (\Exception $e) {
    $logger = $this->container->get('logger');
    $logger->info('Could not reach beanstalk: ' . $e);
} 
```

这工作正常，但我希望它`$pheanstalk->useTube($tube)->put($data)`不等待来自服务器的连接响应，并且只会尝试将数据放在队列中，然后继续以愉快的方式继续。该服务存储的数据很不错，但并不重要。因此，在重负载期间，我希望不必等待超时时间才能继续执行程序的其余部分。如何消除等待 pheanstalk 的服务器部分的响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T23:19:56.780

为防止阻塞，您必须分叉您的进程。

```
$pid = pcntl_fork();
if ($pid == -1) {
     die('could not fork');
} else if ($pid) {
     // we are the parent
     // proceed with whatever
} else {
     // we are the child
     $exitStatus = -1;
     try {
         $pheanstalk->useTube($tube)->put($data);
         $exitStatus = 1;
     } catch (\Exception $e) {
         $logger = $this->container->get('logger');
         $logger->info('Could not reach beanstalk: ' . $e);
         $exitStatus = 0;
     }

     exit($exitStatus); 
} 
```

这样做是分叉你的进程并让子进程等待直到 pheanstalk 返回。请注意，还有一些其他问题：

*   如果 pheanstalk 永远不会回来怎么办？你的子进程变成了僵尸。
*   分叉一个流程包括复制大量流程变量。这并非没有开销，因此不一定会减少您的负载。如果您之后所做的一切都是真正的工作，那么这可能是值得的。

理论上，您可以将消息传递到*本地*排队系统，在同一个盒子上，它的工作是将消息放在*远程*系统上。这将使您获得相当快的响应，但可能需要您进行更多的编码。但是，如果您已经有一个本地 beanstalk 实例，那么这将无济于事。（我怀疑你没有；本地呼叫 beanstalk 很快。如果你有本地电话，问题可能出在工人/消费者端。）

# django - 在 Gunicorn 超时时转储 Django 堆栈跟踪

> ID：15442361
> 
> 赞同：6
> 
> 时间：2013-03-15T21:26:35.370
> 
> 标签：django, gunicorn

我正在尝试调试 Django 应用程序的罕见挂起。到目前为止，我未能找出问题所在，它在生产中大约每天发生一次，Gunicorn 通过一条消息重新启动该过程：

```
[CRITICAL] WORKER TIMEOUT 
```

有没有办法配置 Django 或 Gunicorn 来转储重新启动的进程的堆栈跟踪？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T00:23:18.260

尝试将您的 Gunicorn 日志设置为更详细，也许将其设置为`INFO`或者`DEBUG`可能会在日志中提供更多信息。

您还可以查看 Dog Slow，它将记录慢速请求。[https://pypi.python.org/pypi/dogslow](https://pypi.python.org/pypi/dogslow)。

对于一般的日志记录，请尝试使用 Sentry：[https](https://www.getsentry.com/welcome/) ://www.getsentry.com/welcome/ 。

随机问题，当时在服务器上运行的任何 crons、备份之类的东西？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-06-19T16:00:40.683

这将在工作人员被杀死时为其打印堆栈跟踪。您需要创建一个[gunicorn 配置文件](http://docs.gunicorn.org/en/stable/settings.html#config-file)，并将以下函数粘贴到其中。

```
def worker_abort(worker):
    import traceback, io
    debug_info = io.StringIO()
    debug_info.write("Traceback at time of timeout:\n")
    traceback.print_stack(file=debug_info)
    worker.log.critical(debug_info.getvalue()) 
```

（我只在 Python 3 上对此进行了测试。如果您使用 Python 2，则需要更改`io`为`StringIO`。请参阅[Python3 中的 StringIO](https://stackoverflow.com/questions/11914472/stringio-in-python3)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-17T16:48:31.803

timeout 并不意味着请求超时。这意味着对工人的活动性检查。对于同步工作人员，这起到了请求超时的作用，因为工作人员除了处理请求之外不能做任何事情。异步工作人员即使在处理长时间运行的请求时也会心跳，因此除非工作人员阻塞/冻结它不会被杀死。

Gunicorn 有一个名为 worker_abort 的函数（参见下面的 gunicorn 文档）。

```
def worker_abort(worker):
    worker.log.info("worker received abort signal")
    import threading, sys, traceback
    id2name = dict([(th.ident, th.name) for th in threading.enumerate()])
    code = []
    for threadId, stack in sys._current_frames().items():
        code.append("\n# Thread: %s(%d)" % (id2name.get(threadId,""), threadId))
        stack = traceback.extract_stack(stack)
        for filename, lineno, name, line in stack:
            code.append('File: "%s", line %d, in %s' % (filename, lineno, name))
            if line:
                code.append("  %s" % (line.strip()))
    worker.log.debug("\n".join(code)) 
```

当工作人员收到 SIGABRT 信号时调用。此调用通常在超时时发生。可调用对象需要为已初始化的 Worker 接受一个实例变量。

资料来源：

[http://docs.gunicorn.org/en/stable/settings.html，https://github.com/benoitc/gunicorn/issues/1493，https://github.com/benoitc/gunicorn/blob/master/](http://docs.gunicorn.org/en/stable/settings.html) _ [_](https://github.com/benoitc/gunicorn/issues/1493) _ [_示例/example_config.py](https://github.com/benoitc/gunicorn/blob/master/examples/example_config.py)

# clojure - 如何通过逆时针（或 la clojure）运行/调试 compojure Web 应用程序

> ID：15442367
> 
> 赞同：7
> 
> 时间：2013-03-15T21:26:55.470
> 
> 标签：clojure, compojure, counterclockwise, la-clojure

我正在尝试用 compojure 编写我的第一个网络应用程序。我正在使用 ccw，并且我`File-New-Project, Clojure Project`使用“compojure”leiningen 模板。最终得到 project.clj 看起来像

```
(defproject asdf "0.1.0-SNAPSHOT"
  :description "FIXME: write description"
  :url "http://example.com/FIXME"
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [compojure "1.1.5"]]
  :plugins [[lein-ring "0.8.2"]]
  :ring {:handler asdf.handler/app}
  :profiles
  {:dev {:dependencies [[ring-mock "0.1.3"]]}}) 
```

src/asdf/handler.clj 看起来像

```
(ns asdf.handler
  (:use compojure.core)
  (:require [compojure.handler :as handler]
            [compojure.route :as route]))

(defroutes app-routes
  (GET "/" [] "Hello World")
  (route/not-found "Not Found"))

(def app
  (handler/site app-routes)) 
```

我发现我可以从命令行运行它`lein ring server`，但我不确定如何从 eclipse 运行它。我当然希望不仅能够运行它，还能调试它并设置断点等。有没有办法在eclipse中做到这一点？或者，如果没有，IntelliJ/La-Clojure 怎么样？（我现在有点害怕emacs，但如果它超级简单，我可能会试一试）。

或者，这不是 compojure 应用程序的典型开发过程吗？（如果不是，那是什么？只是跑着`lein ring server`祈祷？）

如果它有所作为，这是在 Win7 上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T09:26:37.963

Here's a recipe that's work great for me while developing Ring applications:

*   Ensure you have leiningen support properly configured for your projet (do it once if in doubt):
    *   in the package explorer, select the project, and invoke the contextual command `Leiningen > Reset configuration`
    *   then also invoke the `Leiningen > Update dependencies` command
    *   you should see a `Leiningen Dependencies` virtual node in your project, referencing the direct and transitive dependencies of your project
*   Select the `asdf.handler` file, right click and then `Debug as > Clojure Application`
*   Open the `asdf.handler` namespace in an editor
*   With the cursor currently still in the editor, type `Ctrl+Alt+N` to jump to the REPL and switch the REPL's current namespace to `asdf.handler` at the same time
*   Start the app by typing `(app)` + `Enter` (or `Ctrl+Enter` if your cursor is not at the end of the line)

You can now navigate between the editors and the REPL.

*   To send editor content to the REPL, select it, and hit `Ctrl+Enter`
*   If you hit `Ctrl+Enter` without a selection, the whole 'top level expression' (e.g. a defn) will be sent to the REPL
*   To resend the whole file to the REPL, type `Ctrl+Alt+S`
*   the whole list of keyboard shortcuts specific to CCW is here: [http://code.google.com/p/counterclockwise/wiki/EditorKeyBindingsFeatures](http://code.google.com/p/counterclockwise/wiki/EditorKeyBindingsFeatures)

Note that a future version of Counterclockwise will integrate a little bit more with Leiningen 2, but as it currently stands, the very nature of developing `ring` applications make it not so painful to bootstrap things as described above, IMHO

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T01:05:36.967

您可以通过以下步骤在 IntelliJ IDEA 和 La Clojure 上运行 Compojure/Ring 应用程序：

1.  `pom.xml`从 leiningen 的`project.clj`using`lein pom`命令生成。
2.  像往常一样使用 IntelliJ IDEA 导入 maven 项目。您可能希望确保类路径中有 Clojure jar。
3.  加载项目后，您可以使用 Tools -> Start Clojure Console 启动 Clojure REPL。
4.  要将 Clojure 文件加载到 REPL，请选择工具 -> Clojure REPL -> 将文件加载到 REPL。

之后，要启动 Ring 应用程序，您只需加载调用`ring.adapter.jetty/run-jetty`.

运行简单路由的代码`http://localhost:4004/`如下所示：

```
(require 'compojure.core)
(require 'ring.adapter.jetty)

(ring.adapter.jetty/run-jetty
  (compojure.core/routes (compojure.core/ANY "/" [] "Hello world!"))
  {:port 4004 :join? false}) 
```

`:join?`选项很重要，如果将其设置为 true（默认值），REPL 将不会接受更多命令。您的路线通常会更复杂，`compojure.core/defroutes`或者应该使用其他方式。

您可以将此类文件放在`test`路径中，这样在 IDEA 之外运行项目时就不会加载它。如果您的模块中没有添加 Clojure 方面，您可以在 File -> Project Structure -> Modules 中添加它。

此处提供了完整的示例（带有码头重新加载）：[https](https://github.com/tlipski/ganelon-demo) ://github.com/tlipski/ganelon-demo - 使用 IDEA 完成开发，并且在 Heroku 上运行真实站点：http: [//ganelon.herokuapp.com](http://ganelon.herokuapp.com)。

调试使用上述技术运行的 Clojure 应用程序也是可能的——您只需：

1.  在 IntelliJ IDEA 中创建远程调试运行配置文件
2.  `agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005`在文件 -> 项目结构 -> 模块 -> [您的模块] -> Clojure facet -> JVM Arguments 字段的 REPL 设置中从上面的配置文件中添加适当的 JVM 选项（例如）。
3.  使用工具启动 REPL -> 启动 Clojure 控制台。
4.  启动远程调试配置文件。

之后，您可以添加断点、检查变量等。

# datagrid - 自定义 DataGrid 行背景颜色在被选中后被移除

> ID：15442378
> 
> 赞同：0
> 
> 时间：2013-03-15T21:27:52.443
> 
> 标签：datagrid, colors, row, datatrigger

I have a WPF DataGrid where the row changes color when a checkbox in the row is selected. 我有一个问题，如果突出显示一行（例如被鼠标单击），然后 DataGrid 失去焦点，那么该行就会失去它的自定义颜色。

这是设置的自定义颜色

```
<Style x:Key="DataGridStyle" TargetType="{x:Type DataGrid}">
    <Setter Property="RowStyle">
        <Setter.Value>
            <Style TargetType="DataGridRow">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding IsSelected}" Value="True">
                        <Setter Property="Background" Value="#CBE5F2"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Setter.Value>
    </Setter>
</Style> 
```

**问题图片：**

行用鼠标突出显示： ![突出显示的行](../Images/15d59acd177d74a0be7c7da1bc614987.png)

DataGrid 失去焦点后 ![数据网格失去焦点](../Images/ad706a847a4bb8d4914cc888c8244c04.png)

**问题：** 有没有办法让突出显示的行在 DataGrid 失去焦点后保持其自定义颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:12:18.423

我找到了一个解决方法是设置单元格样式而不是行样式：

```
 <Setter Property="CellStyle">
        <Setter.Value>
            <Style TargetType="DataGridCell">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding IsSelected}" Value="True">
                        <Setter Property="Background" Value="#CBE5F2"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Setter.Value>
    </Setter> 
```

它完全覆盖了选定的突出显示（亮蓝色），因此并不理想，但即使在失去焦点后也能正常工作。

# ios - 为 tableView 完成 ReloadData 时应用程序崩溃

> ID：15442385
> 
> 赞同：0
> 
> 时间：2013-03-15T21:28:14.670
> 
> 标签：ios, uitableview, afnetworking

当我将所有数据添加到我的可变数组时，我正在使用以下代码重新加载我的 tableView，但应用程序总是崩溃

```
 - (void)viewDidLoad
{
    [super viewDidLoad];

    // Do any additional setup after loading the view.

    //Spinner Add while waiting
    UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    spinner.frame = CGRectMake(147, 10, 25, 25);
    [self.tableView addSubview:spinner];
    [spinner startAnimating];

    operationQueue = [[NSOperationQueue alloc] init];

    usersFirstName = [[NSMutableArray alloc] init];
    usersLastName = [[NSMutableArray alloc] init];
    usersAvatar = [[NSMutableArray alloc] init];

    NSString *urlstring = [NSString stringWithFormat:@"https://www.test.com/scribble/%@/",scribbleId];
    NSURL *url = [NSURL URLWithString:urlstring];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON){
        users = JSON[@"users_favored"];
        if (users.count > 0) {
            NSUInteger count = [users count];
            for (NSUInteger i =0; i<count; i++) {
                NSString *urlString = [NSString stringWithFormat:@"https://www.test.com%@",[users objectAtIndex:i]];
                NSURL *url = [NSURL URLWithString:urlString];
                NSURLRequest *requestUser = [NSURLRequest requestWithURL:url];
                AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:requestUser success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON){
                    if (i == 0) {
                        usersFirstName = [JSON[@"first_name"] mutableCopy];
                        usersLastName = [JSON[@"last_name"] mutableCopy];
                        usersAvatar = [JSON[@"user_avatar"] mutableCopy];
                    }else{
                        [usersFirstName addObjectsFromArray:JSON[@"first_name"]];
                        [usersLastName addObjectsFromArray:JSON[@"last_name"]];
                        [usersAvatar addObjectsFromArray:JSON[@"user_avatar"]];
                    }
                    if (i == count-1) {
                        [self.tableView reloadData];
                        [spinner stopAnimating];
                        [spinner removeFromSuperview];
                    }
                }failure:nil];
                [operationQueue addOperation:operation];
            }
        }else{
            self.navigationItem.title = @"No Favors";
            [spinner stopAnimating];
            [spinner removeFromSuperview];
        }
    } failure:nil];
    [operationQueue addOperation:operation];

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return usersFirstName.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableFavorIdentifier = @"FavorCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableFavorIdentifier];

    if (cell == nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableFavorIdentifier];
    }

    NSString *firstName = [usersFirstName objectAtIndex:indexPath.row];
    NSString *lastName = [usersLastName objectAtIndex:indexPath.row];
    NSString *avatar = [usersAvatar objectAtIndex:indexPath.row];
    NSString *userFullName = [NSString stringWithFormat:@"%@ %@",firstName,lastName];
    UIImageView *userAvatar = (UIImageView *)[cell viewWithTag:100];
    if ([avatar length ] > 0) {
        NSString *img = [@"https://dtest_media_and_assets.s3.amazonaws.com/" stringByAppendingString:avatar];
        [userAvatar setImageWithURL:[NSURL URLWithString:img] placeholderImage:[UIImage imageNamed:@"scribble.png"]];
    }else{
        userAvatar.image = [UIImage imageNamed:@"scribble.png"];
    }
    userAvatar.layer.cornerRadius = 4.0;
    userAvatar.clipsToBounds = YES;
    UILabel *userNameLabel = (UILabel *)[cell viewWithTag:101];
    userNameLabel.text = userFullName;

    return cell;

} 
```

它给出的错误是

```
 2013-03-15 16:37:08.910 test[19547:c07] -[__NSCFString count]: unrecognized selector sent to instance 0x8679c80

2013-03-15 16:37:08.911 test[19547:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString count]: unrecognized selector sent to instance 0x8679c80'

*** First throw call stack:
(0x1cdf012 0x169fe7e 0x1d6a4bd 0x1ccebbc 0x1cce94e 0x143d7 0x7c8548 0x7cb224 0x68f952 0x68f2dc 0x140d7 0x281d2 0x29569 0x2f9553f 0x2fa7014 0x2f977d5 0x1c85af5 0x1c84f44 0x1c84e1b 0x21bb7e3 0x21bb668 0x5e3ffc 0x200d 0x1f35)
libc++abi.dylib: terminate called throwing an exception 
```

# 编辑

当我使用它时一切正常

```
[usersFirstName addObject:JSON[@"first_name"]];
[usersLastName addObject:JSON[@"last_name"]];
[usersAvatar addObject:JSON[@"user_avatar"]];
[self.tableView reloadData];
if (i == count-1) {
    [spinner stopAnimating];
    [spinner removeFromSuperview];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:56:48.573

尝试使用该功能：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"usersFirstName is of type %@", NSStringFromClass([usersFirstName class]));
    return [usersFirstName count]; 
} 
```

* * *

我想你必须更换：

```
 if (i == 0) {
                    usersFirstName = [JSON[@"first_name"] mutableCopy];
                    usersLastName = [JSON[@"last_name"] mutableCopy];
                    usersAvatar = [JSON[@"user_avatar"] mutableCopy];
                }else{
                    [usersFirstName addObjectsFromArray:JSON[@"first_name"]];
                    [usersLastName addObjectsFromArray:JSON[@"last_name"]];
                    [usersAvatar addObjectsFromArray:JSON[@"user_avatar"]];
                } 
```

只需：

```
 [usersFirstName addObject:JSON[@"first_name"]];
                    [usersLastName addObject:JSON[@"last_name"]];
                    [usersAvatar addObject:JSON[@"user_avatar"]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T21:43:03.520

问题在于：

```
users = JSON[@"users_favored"]; 
```

返回一个`NSString`，当它看起来你期待一个`NSArray`。

使用以下方法验证这一点：

```
users = JSON[@"users_favored"];
NSLog(@"users is of type %@", NSStringFromClass([users class])); 
```

您的假设有问题或 JSON 已损坏。

# .net-4.5 - WPF 是否仍然在自定义 ICommand 实现上泄漏？

> ID：15442392
> 
> 赞同：5
> 
> 时间：2013-03-15T21:28:34.453
> 
> 标签：.net-4.5, icommand

在 .Net 4.5 之前，WPF 控件用于在`ICommand`不使用弱事件模式的自定义实现上泄漏，因为它们没有取消订阅`CanExecuteChanged`接口的事件。

我们现在有了`CanExecuteChangedEventManager`类，并且快速的 JustDecompile 搜索发现类喜欢`MenuItem`并且`ButtonBase`正在使用管理器，从而避免了泄漏。

创建自定义时仍然需要使用弱事件模式`ICommand`吗？

# javascript - Javascript getElementById 看不到 ASP 服务器控件

> ID：15442395
> 
> 赞同：0
> 
> 时间：2013-03-15T21:28:35.357
> 
> 标签：javascript, asp.net

我正在尝试启动一个旧的 ASP 经典项目并将其作为 ASP.NET webfroms 解决方案运行，但在让 javascript 连接到 ASP 控件时遇到问题。这是 .aspx 代码：

```
<asp:TextBox id="groupOwner2" CssClass="textbox" Runat="server" Enabled="False" TextMode="SingleLine"></asp:TextBox> 
```

应该操纵它的 javascript 看起来像这样，并试图清除文本框：

```
function OnChange() {
// clear existing data

document.getElementById('<%=groupOwner2.ClientID%>').value = "";} 
```

最初，javascript 控件引用如下所示：

```
document.Form1.elements["groupOwner2"] 
```

这也不起作用（不足为奇）。我在这些方面尝试了多种变体，但没有任何效果，当触发脚本时，我只收到“JavaScript 运行时错误：无法设置未定义或空引用的属性‘值’”。作为记录，脚本是由另一个控件触发的，这就是文本框 ASP 代码中未提及 onChange() 函数的原因。

任何输入将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T22:38:26.680

从您的最新评论来看，问题在于代码：

```
document.getElementById('<%=groupOwner2.ClientID%>').value = ""; 
```

包含在一个`.js`文件中，该文件（默认情况下）不由 ASP.NET 引擎处理。即使是这样，它也无法解析客户端 ID，因为它是一个完全独立的 HTTP 请求。

**有两种解决方案：**

1）在页面中创建一个全局变量`.ASPX`，例如：

```
<script>
var GROUP_OWNER_ID = '<%=groupOwner2.ClientID%>';
</script> 
```

然后，在您的`.js`文件中，您可以执行以下操作：

```
document.getElementById(GROUP_OWNER_ID).value = ""; 
```

2）在网页控件上使用静态ID：

```
<asp:TextBox id="groupOwner2" CssClass="textbox" Runat="server" Enabled="False" TextMode="SingleLine" ClientIDMode="Static"></asp:TextBox> 
```

注意`ClientIDMode`属性。这将导致 ID*始终*不变`groupOwner2`。然后，您可以使用：

```
document.getElementById('groupOwner2').value = ""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T21:08:37.940

使用 ClientIDMode="Static" 您可以将页面指令或具体放在您正在使用的控件上。

然后下面的代码完美运行。document.getElementById('controlID');

然后 controlID 始终保持不变。您不需要使用 clientid。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T21:43:41.793

尝试...

```
'<%= Page.[yourpage].FindControl("ContentPlaceHolder1").FindControl("groupOwner2").ClientID %>' 
```

# wordpress - 在 WordPress Multisite 中重定向域

> ID：15442397
> 
> 赞同：0
> 
> 时间：2013-03-15T21:28:48.647
> 
> 标签：wordpress, .htaccess, subdomain

我有一个 Wordpress 多站点，并且每种语言都有子域。

我已经设法实现了子域 es.mysite.com 和 en.mysite.com 并且它们运行良好。

我现在想要的是，如果用户键入 www.mysite.com 或 mysite.com，则根据浏览器的语言将他重定向到 es.mysite.com 或 en.mysite.com。

我一直在搜索，但找不到这个特殊情况。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:30:45.543

这可能会对您有所帮助：[PHP语言检测](https://stackoverflow.com/questions/1352130/php-language-detection)

使用 PHP 语言检测，根据语言，将用户重定向到适当的 URL。

简单示例（解析后）：

```
if($language == 'en-us')
{
    header("Location: http://en.mysite.com/");
}
elseif($language == 'fr-fr')
{
    header("Location: http://fr.mysite.com/");
} 
```

**更新：**我认为阅读本文可能会对您有所帮助。不确定您是否已经这样做了... [http://codex.wordpress.org/Multilingual_WordPress](http://codex.wordpress.org/Multilingual_WordPress)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:33:11.853

这个插件看起来像你要找的东西：[http ://wordpress.org/extend/plugins/geographical-redirect/](http://wordpress.org/extend/plugins/geographical-redirect/)

# jquery - 点击离开时添加标签

> ID：15442399
> 
> 赞同：1
> 
> 时间：2013-03-15T21:28:58.663
> 
> 标签：jquery, jquery-autocomplete, tag-it

我正在使用 tagit ( [http://webspirited.com/tagit/](http://webspirited.com/tagit/) ) 并且到目前为止非常喜欢它。我只有一个障碍要克服。如果我开始输入标签关键字，改变主意然后单击页面上的其他位置（因此输入失去焦点），标签就会被添加。我不希望这种情况发生。我希望仅在选择触发键时添加标签 - 在我的情况下是逗号。否则最后一个标签（可能是部分文本）应该就在那里，直到添加逗号。

这是我到目前为止的代码。非常基本的实现，但我没有看到防止上述情况的方法。

```
 $('#thename').tagit({
      tagSource:, 
      select:true,
      tagsChanged:function (a, b) {
         if(b=='added' || b=='popped'){
            submitForm();
         }
       },
      triggerKeys:new Array('comma')
   }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:45:53.900

为这个做了一点小改动，我们将看看结果如何。我在 API 中找不到任何不添加焦点标签的地方，所以我的下一个解决方案是执行以下操作：

- 键入标签
- 单击输入（因此添加标签） - 以
编程方式获取文本输入并删除标签

尝试使用以下代码：

```
$("#thename").focusout(function() {
    //Get the input text
    var tagText = $(this).val();

    //Verify input is NOT empty

    //Remove the tag that was just added
    $("#thename").tagit('removeTag', tagText); 
```

});

让我知道这是如何工作的。

编辑：

刚刚注意到你在上面的评论。如果您不想允许新标签，请添加

```
allowNewTags: false, 
```

到原始代码中的 tagit 标记。

# jquery - 使用 Canvas 和 jQuery 在鼠标点击之间绘制直线

> ID：15442401
> 
> 赞同：2
> 
> 时间：2013-03-15T21:29:06.683
> 
> 标签：jquery, html5-canvas

我想用 jQuery 在 Canvas 中画一条线，并通过鼠标单击来定义起始位置。在每一次额外的鼠标点击时，我都想从前一个位置继续我的行。

我写了一些代码，但问题是我的行不是从 mouseClick 位置开始的；它从默认值 (0, 0) 开始。我必须更改什么才能使我的行从鼠标单击位置开始？

谢谢。

这是我的代码：

```
var click = [0, 0];

contex.beginPath();
contex.moveTo(click[0], click[1]);
contex.lineTo(x, y);
contex.stroke();
click = [x, y]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T23:37:59.257

通过单击画布绘制一系列直线：

[JSFiddle 演示](http://jsfiddle.net/Matt_Coughlin/f7ZZM/)

**HTML**

```
<canvas id="myCanvas" width="600" height="600"></canvas> 
```

**jQuery**

```
var needFirstPoint = true;

function drawNextLine(ctx, x, y) {
    if (needFirstPoint) {
        ctx.lineWidth = 5;
        ctx.beginPath();
        ctx.moveTo(x, y);
        needFirstPoint = false;
    }
    else {
        ctx.lineTo(x, y);
        ctx.stroke();
    }
}

$(document).ready(function(){
    var canvas = $('#myCanvas').get(0);
    if (!canvas.getContext) { return; }
    var ctx = canvas.getContext('2d');

    $('#myCanvas').on('click', function(e){
        var offset = $(this).offset();
        var x = e.pageX - offset.left;
        var y = e.pageY - offset.top;
        drawNextLine(ctx, x, y);
    });
}); 
```

# jquery - 通过单击另一个 div 中的链接更改一个 div 中的文本

> ID：15442402
> 
> 赞同：-2
> 
> 时间：2013-03-15T21:29:21.013
> 
> 标签：jquery

我是 jQuery 新手，无法让它适用于我的特定情况。

所以这就是我想要在页面上显示的内容：在页面的一侧`div`带有乐曲列表（例如“The Letter - String Quartet”），然后在页面的另一侧`div`显示不同的文本，具体取决于哪个链接已被单击（因此，如果我在其中一个中单击“The Letter - String Quartet” `div`，它将在另一个中显示有关该特定片段的段落）。我希望`div`显示信息在页面加载时显示类似“单击某件以了解更多信息”之类的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:36:57.253

基本思想是在每个可以点击的元素上都有一个点击处理程序，并让它设置你想要显示信息的 div 的 html。

例如，如果您为莫扎特执行此操作：

```
<a id='mozart'>Mozart</a> 
```

这是用于显示文本的 div：

```
<div id='displayArea'></div> 
```

您的 jQuery 代码可能类似于：

```
$('#mozart').click(function(e) { 
    $('#displayArea').html("Mozart was a great composer"); 
    e.preventDefault();
}); 
```

进一步阅读：

[http://api.jquery.com/click/](http://api.jquery.com/click/)

[http://api.jquery.com/html/](http://api.jquery.com/html/)

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

# excel - 在 libreoffice / excel 中插入值而不使用自动填充

> ID：15442405
> 
> 赞同：-1
> 
> 时间：2013-03-15T21:29:29.960
> 
> 标签：excel, excel-formula, spreadsheet, libreoffice, openoffice-calc

我有一个 libreoffice 工作表，我想让行数增加 1

```
example:
1
2
3
4 
```

问题是我知道我可以使用自动填充来做到这一点，但我有 50000 行并且向下拖动需要一段时间。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:36:02.450

假设您已经拥有最多第 50'000 行的数据，并且`Col. A`该系列有一个空列（我将使用 ）。

跳到“已使用”列之一中的最后一个单元格`Ctrl`+ `Arrow down`（或一直向下滚动到 Cell `A50000`）然后侧向移动`Col. A`并在 cell 中放置一个“X” `A50000`。您现在有一个空列 A，在 cell 中有一个“X” `A50000`。

转到单元格`A1`( `Ctrl`+ `Home`)。将数字“1”放入单元格中`A1`。将以下（秘密！）公式放入单元格中`A2`：

```
=A1+1 
```

`A2`使用`Ctrl`+ `c` Stay in Cell `A2`...复制单元格
按`Ctrl`+ `Shift`+ ，现在应该突出显示`Arrow down`从`A2`到的区域。 按+将公式一直向下粘贴... `A50000`
`Ctrl``v`

重要的！
按`Ctrl`+`c`复制刚刚粘贴的数据 ( `A2..A50000`)。
按`Ctrl`+ `Shift`+`v`将刚刚复制的数据粘贴到“粘贴特殊”的原始数据上。

在“选择性粘贴”中，确保您**没有**选择以下选项：`Formulas`。
现在，这会将公式的所有结果粘贴为固定数字。

这应该花费不到一分钟，其中大部分都在等待系统计算和粘贴（我尝试了 1 mio 行..）

只需将公式从 =A1+1 更改为 =A1+2，你就可以跳出 2，所以 1,3,5,7,... 但我假设您将使用此列作为排序的参考，所以你总是可以回到原来的顺序。

玩得开心！

# php - 带有目标 url 源代码的 file_get_contents 警告消息

> ID：15442407
> 
> 赞同：1
> 
> 时间：2013-03-15T21:30:00.177
> 
> 标签：php, file-get-contents

我想用 php 从另一个域 html中获取一个`<ul>`s 。`innerHTML`

```
$mhraWebUygulamasi =file_get_contents('http://www.mhra.gov.uk/Safetyinformation/Safetywarningsalertsandrecalls/index.htm');
$doc = new DOMDocument();
$doc->loadHTML($mhraWebUygulamasi);
$doc->preserveWhiteSpace=false; 
```

但是在进一步编码之前，我收到了这个警告信息。

```
Warning: DOMDocument::loadHTML(): Unexpected end tag : fragmentinstance in Entity, line: 123 in C:\xampp\htdocs\YeBeSis\mhra.php on line 4 
```

第 4 行是`$doc->loadHTML($mhraWebUygulamasi);` 其他行号，可能针对 urls html 代码。如何轻柔地处理目标 URL 并将其加载到 DOM 容器中？我哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:03:36.633

您收到的消息只是一个警告；不是错误——DOM 仍在填充中。

但是，它会警告您传入的 HTML 不正确，因此它不能保证它生成的 DOM 完全符合作者的预期。

但在许多情况下，这真的无关紧要，所以如果你对此没意见，请随意忽略警告并继续进行。

在这种情况下，您需要做的就是禁止显示警告。

此处对此进行了更详细的讨论：[DomDocument (PHP) 加载非格式良好的 HTML 时禁用警告](https://stackoverflow.com/questions/1148928/disable-warnings-when-loading-non-well-formed-html-by-domdocument-php)

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:52:22.023

[使用PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/manual.htm)你可以很容易地做到这一点，只需[从这里](http://sourceforge.net/projects/simplehtmldom/)`simple_html_dom.php`下载文件并按如下方式使用它。

```
include('simple_html_dom.php');
$html = file_get_html('http://www.mhra.gov.uk/Safetyinformation/Safetywarningsalertsandrecalls/index.htm'); 
```

然后循环，例如，要获取所有`ul`标签及其内容，您可以使用以下循环

```
foreach($html->find('ul') as $li){
    echo $li->innertext.'<br />';
} 
```

或者使用它来仅获取`ul`带有类名的`subnav2`

```
foreach($html->find('ul.subnav2') as $li){
    echo $li->innertext.'<br />';
} 
```

上述代码的输出（5个`li`标签）

> *   医疗器械警报*   现场安全通知 (FSN)*   药物警报*   药品安全警告和信息*   英国药物安全公共评估报告

它易于使用，选择语法就像`jQuery`，阅读文档以了解更多信息。

# delphi - 我可以在一个单元中定义条件并在其他单元中使用它们吗？

> ID：15442409
> 
> 赞同：8
> 
> 时间：2013-03-15T21:30:04.883
> 
> 标签：delphi, delphi-xe2, conditional-compilation, delphi-units

我正在研究一个大型单元，该单元变得如此之大，以至于我决定将其拆分为 3 个单元。假设这些单位名称是`Main`、`Common`和`Objects`。该`Main`单元同时使用其他两个单元，并且该`Objects`单元也使用该`Common`单元。所有 3 个单元中都有代码需要参考这些条件。

问题是，无论我在 3 个单元中定义这些条件的哪个单元，其他 2 个单元都看不到它们。我当然不想在所有 3 个单元中复制它们。我也不想在项目中定义它们，因为这些单元将被多个项目使用，在这种情况下，所有使用它的项目都不应该关心条件。

我是否可以以所有 3 个单元都可以看到它们的方式定义这些条件，而不在项目中定义它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T21:31:32.060

对于条件定义，您唯一的选择是将它们放在一个 .inc 文件中，然后将其包含在所有三个单元中。

但是，条件定义，`$IFDEF`并不是实现条件编译的唯一方式。您可能会考虑使用布尔常量而不是条件。只要它在所有三个单位中都可见，您就可以使用[`$IF`](http://docwiki.embarcadero.com/RADStudio/en/IF_directive_%28Delphi%29)而不是`$IFDEF`.

```
{$IF MyConstant}
  ....
{$IFEND} 
```

或者，从 XE3 开始，您可以终止`{$IF}`with `{$ENDIF}`。

就我个人而言，在尝试有条件地编译并且不希望条件具有全局范围时，我倾向于支持后一种方法。

# juice-ui - JuiceUI Tabs 控件在回发后不起作用

> ID：15442410
> 
> 赞同：0
> 
> 时间：2013-03-15T21:30:07.460
> 
> 标签：juice-ui

我有一个带有 2 个标签页的 JuiceUI Tabs 控件。回发后，对于 Chrome 和 Firefox，单击第二个选项卡不会再转到选项卡页。我正在使用 Visual Studio 2012、jquery 1.9.1、jquery-ui 1.10.1 和 juiceui。

```
<form id="form1" runat="server">
<div style="font-size: 14px;">
    <asp:Button ID="Button1" runat="server" Text="Update Tab" OnClick="Button1_Click" />
    <br />

    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <juice:Tabs ID="Tabs1" runat="server">
                <juice:TabPage ID="TabPage1" Title="First Tab" runat="server">
                    <TabContent>
                        <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label><br />
                        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
                        <juice:Datepicker ID="Datapicker1" runat="server" TargetControlID="TextBox1" />
                    </TabContent>
                </juice:TabPage>
                <juice:TabPage ID="TabPage2" Title="Second Tab" runat="server">
                    <TabContent>
                        <asp:Label ID="Label2" runat="server" Text="Label 2"></asp:Label>
                    </TabContent>
                </juice:TabPage>
            </juice:Tabs>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="Button1" EventName="Click" />
        </Triggers>
    </asp:UpdatePanel>
</div>
</form> 
```

这是服务器代码：

```
 public partial class WebForm4 : System.Web.UI.Page
    {
       protected void Page_Load(object sender, EventArgs e)
       {
           Label lbl = (Label) TabPage1.FindControl("Label1");
           if (lbl != null)
           {
               lbl.Text = DateTime.Now.ToString();
           }
       }

       protected void Button1_Click(object sender, EventArgs e)
       {

       }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:29:19.173

我无法重现[Brew](http://shellscape.org/#brew)的问题，这是 Juice 的一个分支。如果你有机会，请试一试，如果你遇到同样的问题，请告诉我。

# mysql - #1248 - 每个派生表都必须有自己的别名 - 找不到原因

> ID：15442414
> 
> 赞同：-1
> 
> 时间：2013-03-15T21:30:30.813
> 
> 标签：mysql, mysql-error-1248

我收到此错误：

> #1248 - 每个派生表都必须有自己的别名

查询是：

```
UPDATE rifa
SET maxRifas=(
              (SELECT maxRifas 
               FROM (SELECT * FROM rifa AS crifa)
               WHERE crifa.id=1)
              -1)
WHERE rifa.id=1; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:39:30.013

嵌套查询在 FROM 中使用时必须指定别名。

```
UPDATE rifa 
SET maxRifas=
  (
      (SELECT maxRifas 
       FROM (SELECT * 
             FROM rifa
            ) as crifa 
       WHERE crifa.id=1
      )-1
   )     
WHERE rifa.id=1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:35:32.233

试试这个

```
 UPDATE rifa SET maxRifas= (SELECT (maxRifas - 1) from rifa WHERE id=1)  ; 
```

# ios - 我可以在我添加的外部框架中使用我自己的文件中的方法吗？

> ID：15442415
> 
> 赞同：1
> 
> 时间：2013-03-15T21:30:37.797
> 
> 标签：ios, objective-c, frameworks

我正在使用 QuickDialog 框架[https://github.com/escoz/QuickDialog](https://github.com/escoz/QuickDialog)，它为我的项目添加了大约 80 个文件。在其中一个文件中，我想使用我在项目中编写的函数之一。

所以，我有一个我这样称呼的方法：

```
[ActivityImage getActivityImage:2]; 
```

当我前往文件顶部并添加

```
#import "ActivityImage+Functions.h" 
```

它告诉我找不到文件。`ActivityImage+Functions.h`是一个类别文件。是否有一些特殊的方法可以将我自己的文件导入外部框架文件？

谢谢

### 更新

更清楚地说：在 QuickDialogs 文件之一，特别是 QLabelElement.m 中，我想添加我在项目中编写的方法调用之一。QuickDialog 框架作为子模块添加到我的项目中，我将 QuickDialog .xcodeproj 文件拖入，然后添加为我的项目的目标依赖项。

我可以将 QuickDialog 框架中的文件#import 到我的项目文件中，但我不能另辟蹊径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:49:19.893

听起来你想使用[Objective-C Categories](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html)。

在您自己的项目中添加一个名为的头文件`ActivityImage+MyStuff.h`（注意`+MyStuff`可以更合适）：

```
#import "ActivityImage.h"

@interface ActivityImage (MyStuff)

+ (void)getActivityImage:(NSUInteger)someInteger;

@end 
```

和实现文件`ActivityImage+MyStuff.m`：

```
#import "ActivityImage+MyStuff.h"

@implementation ActivityImage

+ (void)getActivityImage:(NSUInteger)someInteger
{
    // Whatever it does
}

@end 
```

最后在您要使用类别的代码中：

```
#import "ActivityImage+MyStuff.h"

[ActivityImage getActivityImage:2]; 
```

# css - 自定义字体在 IE 中出现问题

> ID：15442418
> 
> 赞同：0
> 
> 时间：2013-03-15T21:30:51.807
> 
> 标签：css, internet-explorer, fonts

这是我的样式表的顶部：

```
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 400;
  src: local('Open Sans'), local('OpenSans'), url(https://themes.googleusercontent.com/static/fonts/opensans/v6/cJZKeOuBrn4kERxqtaUH3T8E0i7KZn-EPnyo3HZu7kw.woff) format('woff');
}
body{
    font-family:"Open Sans";
    background-image:url(images/greyFadeBG.jpg);
    background-repeat:repeat-x;
    background-color:#ffffff;
    margin:0px;
    padding:0px;
    height:100%;
    min-width:870px;
    font-size:14px;
    color:#666666;
} 
```

这将在 IE(9 和 10) 中显示自定义字体如果我从 font-family:"Open Sans"; to font-family:"Open Sans", sans-serif;

自定义字体会在 IE7 中显示，但所有 IE 版本都会显示 san-serif 字体。

我已经从 Font Squirrel 尝试过这个，但没有运气：

```
@font-face {
    font-family: 'open_sansregular';
    src: url('opensans-regular-webfont.eot');
    src: url('opensans-regular-webfont.eot?#iefix') format('embedded-opentype'),
         url('opensans-regular-webfont.woff') format('woff'),
         url('opensans-regular-webfont.ttf') format('truetype'),
         url('opensans-regular-webfont.svg#open_sansregular') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:35:39.373

要使第二个`@font-face`工作，您需要将 body font-family 更改为

```
body{
    font-family: "open_sansregular";
} 
```

或者更好

```
body{
  font-family: "Open Sans", "open_sansregular", sans-serif;
} 
```

# python - python堆栈跟踪中绝对/相对路径的含义

> ID：15442421
> 
> 赞同：8
> 
> 时间：2013-03-15T21:31:08.223
> 
> 标签：python

我跑`top_level_script.py`了一个异常，堆栈跟踪如下：

```
File "top_level_script.py", line 114, in main
  …
File "top_level_script.py", line 91, in func1
  ...
File "top_level_script.py", line 68, in func2
  **kwargs)
File "/home/max/.../cccc/ffff/mmmm.py", line 69, in some_func
  obj = SomeClass(…)
File "mmm/ttt/bbb/core.py", line 17, in __init__
File "/home/max/.../pppp/pppp.py", line 474, in func
  ...
File "/home/max/.../pppp/pppp.py", line 355, in some_func
  ... 
```

请注意，它`mmm/ttt/bbb/core.py`具有相对路径，而其上方和下方的框架具有绝对路径。此外，第 17 行的 in 中没有打印出来`__init__`，并且被调用的代码是“旧的”。我刚刚更改了它，但是旧代码被调用了。因此例外。

我仍然发现 Python 的导入机制有时令人困惑。任何人都可以阐明`core.py`该框架中显示的相对路径的情况以及重要性（如果有的话）吗？

经过一番修修补补，我的假设是 python 以某种方式调用了`.pyc`（因此下面的行中没有显示源）。在修改文件（即更改并保存它）之后，我现在得到：

```
File "top_level_script.py", line 114, in main
  …
File "top_level_script.py", line 91, in func1
  ...
File "top_level_script.py", line 68, in func2
  **kwargs)
File "/home/max/.../cccc/ffff/mmmm.py", line 69, in some_func
  obj = SomeClass(…)
File "/home/max/.../mmm/ttt/bbb/core.py", line 17, in __init__
  ...
File "/home/max/.../pppp/pppp.py", line 474, in func
  ...
File "/home/max/.../pppp/pppp.py", line 355, in some_func
  ... 
```

现在，我无法重现效果，但我仍然很好奇是否有人知道可能发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-14T22:04:15.760

一般来说，Python 在如何理解文件名方面是透明的。

每当 Python 执行`import`时，都会查询环境变量[`PYTHONPATH`](https://docs.python.org/using/cmdline.html#envvar-PYTHONPATH)并设置 Python 变量[`sys.path`](https://docs.python.org/library/sys.html#sys.path)。

路径组件`sys.path`可以是绝对的或相对的。一个常见的相对路径名是`.`（当前工作目录）。

如果在执行导入时，在 中找到的名称`sys.path`是基于相对路径的，那么出现在堆栈跟踪中的文件名也将是相对的。我还认为，如果 Python 程序使用[相对导入](https://docs.python.org/2.5/whatsnew/pep-328.html)，那么它也会显示为相对文件名。

# php - php rabbitmq Consumer在收到3条消息后停止接收消息

> ID：15442433
> 
> 赞同：1
> 
> 时间：2013-03-15T21:31:59.333
> 
> 标签：php, rabbitmq, amqp

我有一个 php 生产者，它将消息生成到队列中。消费者收到 3 条消息后才冻结到 $queue->consume(); 方法。如果我运行另一个消费者，它也只会收到以下 3 条消息并冻结。

知道为什么会这样吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-10T18:07:14.700

消息在没有被确认的情况下被保存在内存中。您需要使用 ack 或 nack 释放它们。一旦发生这种情况，您将提取下一批消息。

编辑：没有看到你的评论，对不起。

# sql-server-2008 - 在连接上返回单行

> ID：15442437
> 
> 赞同：2
> 
> 时间：2013-03-15T21:32:09.627
> 
> 标签：sql-server-2008

> 我有几张桌子。我想以一种我只想从内部连接返回行的方式加入它们，但我找不到这样做的方法。我需要帮助。如何使用 SQL 中的存储程序获得类似该表的结果。谢谢！

```
--------------------------------------------------------------------------------------
| AltMusteriID | Ad    | Soyad | Gsm1       | Marka | Model | Ozel Alan3 | Ozel Alan4 |
--------------------------------------------------------------------------------------
| 1            | İLKER | Yasin | 5337777158 | OPEL  | CORSA | null       | null       |
| 2            | CEM   | ÇİÇEK | 5666667159 | FİAT  | null  | null       | null       |
| 3            | MEHMET| KURU  | 5222237160 | null  |null   |null        | null       |
--------------------------------------------------------------------------------------

 create table tbl_AltMusteriler
(
  AltMusteriID int,
  Ad nvarchar(50),
  Soyad nvarchar (50),
  Gsm1 nvarchar (50)
);

insert into tbl_AltMusteriler values
(1, 'İLKER', 'YASİN','5337777158'),
(2, 'CEM', 'ÇİÇEK','5666667159'),
(3, 'MEHMET', 'KURU','5222237160'),

create table tbl_OzelAlanlar
(
  OzelAlanID int,
  AltMusteriID int,
  UserOzelAlanID int,
  Degeri nvarchar(50)  
);

insert into tbl_OzelAlanlar values
(1,1,1, 'OPEL'),
(2,1,2, 'CORSA'),
(3,2,1, 'FİAT'),

create table tbl_UserOzelAlanlar
(
  UserOzelAlanID int,
  Alan nvarchar(50)  
);

insert into tbl_UserOzelAlanlar values
(1,'MARKA'),
(2,'MODEL'),
(3,'OZEL ALAN3'),
(4,'OZEL ALAN4'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:43:26.170

你需要的是[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)，试试这个

```
;with cte as
(
  select a.AltMusteriID, Ad, Soyad, Gsm1, ALAN, Degeri
  from tbl_OzelAlanlar a
  inner join tbl_AltMusteriler b on a.AltMusteriID = b.AltMusteriID
  inner join tbl_UserOzelAlanlar c on a.UserOzelAlanID = c.UserOzelAlanID
)
select * from cte
pivot(max(Degeri) for alan in (MARKA, MODEL, [OZEL ALAN3], [OZEL ALAN4]))p 
```

[SQL 演示](http://sqlfiddle.com/#!3/c3120/6)

动态枢轴：

```
declare @cols AS nvarchar(MAX);
declare @query AS nvarchar(MAX);

SET @cols = stuff((select distinct ',' + QUOTENAME(alan) 
            from tbl_UserOzelAlanlar
            for XML PATH('')) 
        ,1,1,'')

set @query = '
;with cte as
(
  select a.AltMusteriID, Ad, Soyad, Gsm1, ALAN, Degeri
  from tbl_OzelAlanlar a
  inner join tbl_AltMusteriler b on a.AltMusteriID = b.AltMusteriID
  inner join tbl_UserOzelAlanlar c on a.UserOzelAlanID = c.UserOzelAlanID
)
select AltMusteriID, Ad, Soyad, Gsm1, ' + @cols + '
from cte
pivot(max(Degeri) for alan in ( ' + @cols + '))p'

exec @query 
```

# c - 数据包到达时立即通知用户模式

> ID：15442438
> 
> 赞同：1
> 
> 时间：2013-03-15T21:32:10.473
> 
> 标签：c, linux, performance, memory, latency

（这适用于低延迟系统）

假设我有一些代码将接收到的 UDP 数据包传输到共享内存区域，那么我如何通知应用程序（在用户模式下）现在是时候读取共享内存了？我不希望应用程序不断轮询占用 CPU 周期。

是否可以在网络堆栈中插入一些代码，以便在写入共享内存后立即调用我的应用程序代码？

编辑我添加了一个 C 标记，但应用程序将使用 C++

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:46:59.137

将事件从一个 Unix 进程发送到另一个进程的一种方法是使用 POSIX 信号量。您将使用[sem_open](http://linux.die.net/man/3/sem_open)来初始化和打开一个可以跨进程使用的命名信号量。

请参阅[如何在 C 中多次调用 sem_open？](https://stackoverflow.com/questions/2294584/how-can-i-get-multiple-calls-to-sem-open-working-in-c).

在同一主机上的进程之间发出事件信号的最低延迟方法是[旋转等待](http://en.wikipedia.org/wiki/Busy_waiting)寻找（共享）内存位置以进行更改......这避免了系统调用。您明确表示您不希望应用程序轮询，但是在多核系统上运行的多线程应用程序中，如果您真的关心延迟，这可能不是一个糟糕的权衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T22:57:33.923

除非您打算使用实时操作系统，否则没有“即时”协议。CPU 资源以几毫秒为单位可用，通常您的用户线程需要一些时间才能理解它可以继续。

考虑到以上所有，任何形式的 IPC 都可以：本地套接字、信号、管道、事件描述符等。性能上的实际差异将是悲惨的。

此外，共享内存的使用可能会导致维护/调试中不必要的复杂性，但这是设计人员的选择。

# c# - 创建后写入文件时正在使用文件

> ID：15442445
> 
> 赞同：2
> 
> 时间：2013-03-15T21:32:39.287
> 
> 标签：c#, file

所以，我正在尝试创建一个登录表单，但首先我需要读取和写入文件等；我正在创建一个文件，然后将“测试”写入该文件，但如果我随后删除该文件并尝试同时发出我的命令：

```
FileIO.FileCheck("Usernames.pheonix");
FileIO.WriteFile("Usernames.pheonix", "test"); 
```

它给我带来了一个错误；

> 该进程无法访问文件“C:\Users\XXX\Desktop\Pheonix Launcher\Pheonix\bin\Debug\Usernames.pheonix”，因为它正被另一个进程使用。

我似乎无法理解为什么它继续这样做，这是我的读/写文件：

```
public static void createFile(String FileName)
{
    File.Create(FileName);
}

public static void WriteFile(String File ,String Message)
{
    FileStream fs1 = new FileStream(File, FileMode.OpenOrCreate, FileAccess.Write);
    StreamWriter writer = new StreamWriter(fs1);
    writer.Write(Message);
    writer.Close();
}

public static void FileCheck(String fileName)
{
    if (File.Exists(fileName))
        Console.WriteLine("File exists.");
    else
        createFile(fileName);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T21:33:48.920

`File.Create`确实创建了一个文件-并向它返回一个打开的流。把它放在一个`using`块里。（不要只调用 close ——这将是一个错误，因为它不是异常安全的）。

实际上，仔细观察，我发现您根本不需要这个，因为`FileMode.OpenOrCreate`. 无论如何都会创建该文件。

# php - 提取文件夹的内容

> ID：15442448
> 
> 赞同：-1
> 
> 时间：2013-03-15T21:32:58.090
> 
> 标签：php, ziparchive

我一直在阅读[extractto](http://www.php.net/manual/en/ziparchive.extractto.php)的 php 手册，我完全理解它的作用。但我的拉链有：

```
name.zip
--foler
----files 
```

我想要文件，我不想要文件夹，我只想要文件。这些**将**覆盖我正在提取的路径中的文件 - 这**很好**。问题是，我如何进入 zip 内的目录（具有特定名称）并提取该目录内容？

我的最终结果将如下所示：

`place/to/extract/files`

**不是！**

`place/to/extract/folder/files`

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:39:48.017

我认为您必须在解压缩后移动父目录中的所有内容，或者使用tarbombs ...

# ruby-on-rails - 多对多用户和组，但组有所有者

> ID：15442450
> 
> 赞同：7
> 
> 时间：2013-03-15T21:33:01.883
> 
> 标签：ruby-on-rails, many-to-many

我在试图理解/环绕我的大脑时遇到了麻烦。我正在尝试建立一种允许这样做的关系：

*   用户可以属于多个组
*   组可以有很多用户
*   一个组有一个所有者，它是用户
*   集团所有权可以转让

我已经建立了多对多关系，但我似乎无法理解如何设置所有权功能。

这是我迄今为止在我的模型中所拥有的：

```
 class Group < ActiveRecord::Base
      has_and_belongs_to_many :users
      attr_accessible :name, :description, :isPublic, :tag_list, :owner
    end

    class User < ActiveRecord::Base
      has_and_belongs_to_many :groups
      attr_accessible :name, :description, :owner_id
    end 
```

任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-15T21:43:46.477

您可以通过以下几种方式进行设置：

1) 使用连接模型并在连接模型上放置一个标志，指定组成员是所有者。

```
class Group < ActiveRecord::Base
  has_many :memberships
  has_many :users, through: :memberships
  attr_accessible :name, :description, :isPublic, :tag_list, :owner
end

class Membership < ActiveRecord::Base
  belongs_to :group
  belongs_to :user

  #this table has a flag called owner and thus a method called owner?
end

class User < ActiveRecord::Base
  has_many :memberships
  has_many :groups, through: :memberships
  attr_accessible :name, :description, :owner_id
end 
```

2) 保留您现有的 HABTM 并添加另一个连接模型以跟踪所有权。

```
class Group < ActiveRecord::Base
  has_and_belongs_to_many :users
  has_many :group_ownerships
  has_many :owners, through: :group_owernships, class_name: "User"
  attr_accessible :name, :description, :isPublic, :tag_list, :owner
end

class GroupOwnership < ActiveRecord::Base
  belongs_to :group
  belongs_to :user
end

class User < ActiveRecord::Base
  has_and_belongs_to_many :groups
  has_many :group_ownerships
  has_many :owned_groups, through: :group_owernships, class_name: "Group"
  attr_accessible :name, :description, :owner_id
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T21:41:21.153

我认为一种解决方案可能是定义`belongs_to`从组到所有者的新关系。因此，您需要`user_id`在表中添加一个新列`groups`。

```
class Group < ActiveRecord::Base
  has_and_belongs_to_many :users
  belongs_to :owner, class_name: 'User', foreign_key: 'user_id'
  attr_accessible :name, :description, :isPublic, :tag_list, :owner
end

class User < ActiveRecord::Base
  has_and_belongs_to_many :groups
  has_many :owned_groups, class_name: 'Group', foreign_key: 'user_id'
  attr_accessible :name, :description, :owner_id
end 
```

我认为这就是你所需要的。对于用户，您可以拥有他所属的所有组`user.groups`，并且您可以拥有他拥有的所有组`user.owned_groups`。使用组，您可以拥有其所有者 :`group.owner`及其所有成员 : `group.users`。

如果您想更改所有者，只需`group.owner = new_user`开始`new_user`一个`User`实例

请注意，我很快为关联和外键选择了命名，您当然可以自定义它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T21:50:34.320

**那么链接表方法呢？**

因为，如果您有一个到用户和组的链接表作为 users_groups，那么您实际上可以在用户和组属于彼此的时刻将另一个新属性存储到该表中。

就像当，约翰用户属于男孩组时，他很顽皮。当用户 John 属于工程师组时，他很聪明。所以在 users_groups 表中，我可以存储类似下面的内容。

用户

```
id | Name
1 | John
2 | Steve 
```

团体

```
id | Name
1| boys
2| doctors
3| beggars 
```

用户组

```
user_id | group_id | info
1       | 1        | "naughty"
1       | 2        | "wearing white coat"
1       | 3        | "broke"
2       | 1        | "liar" 
```

这不是很有趣吗？但是，是的，我们必须处理 Has 并且属于许多关系。但只是一个想法！

> 刚才提到了拥有一个链接表的好处。肖恩·希尔（Sean Hill）在回答中对此进行了处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T04:23:46.133

在您的用户模型中添加一个布尔字段作为所有者，因此在创建用户时您可以指定他是否是所有者。
因此，如果您想检查该组，您可以按如下方式进行。

group.users.each 做 |u|
楼主？
// 逻辑到这里
结束

# angularjs - Angular - 将数据绑定到表单

> ID：15442453
> 
> 赞同：0
> 
> 时间：2013-03-15T21:33:26.633
> 
> 标签：angularjs

我有一个表格，`POST`保存时输入的所有数据。但是当我刷新页面时，并非所有条目都绑定到各自的输入字段。

这有点奇怪，因为我`ng-model`在所有领域都使用。

这是不绑定的示例：

```
<input name="full_name" ng-model="user.full_name" type="text" required></input> 
```

这是一个确实绑定的：

```
<input name="address" ng-model="user.address" type="text" required></input> 
```

有没有人遇到过这个问题，或者注意到我可能缺少的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T07:59:11.763

可能是浏览器记住了您在表单中的最后输入。所以刷新后，浏览器会预先填充表单，而 Angular 不会更新范围。有一个关于此的[Google Groups 主题](https://groups.google.com/forum/#!topic/angular/6NlucSskQjY)。我发现的最佳解决方案是在表单的输入中添加 autocomplete="off"。因为刷新后，Angular 无法记住您在表单中的最后一次输入，除非您使用 cookie 来实现您显然不是。

# c# - 如何以编程方式添加按钮

> ID：15442455
> 
> 赞同：0
> 
> 时间：2013-03-15T21:33:33.480
> 
> 标签：c#, wpf, wpf-controls, kinect, kinect-sdk

我以编程方式创建了一个按钮，并将其传递给一个 listbutton

我正在尝试让悬停方法对其进行处理，但它不起作用。当我手动制作按钮并将其通过按钮列表时，它可以工作。

设计

```
<Window x:Class="KinectButton.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Controls="clr-namespace:Coding4Fun.Kinect.Wpf.Controls;assembly=Coding4Fun.Kinect.Wpf"
        Title="MainWindow" Height="700" Width="1000" Background="#FFAD4747" Loaded="Window_Loaded">
    <Grid x:Name="LayoutRoot">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="261*" />
            <ColumnDefinition Width="717*" />
        </Grid.ColumnDefinitions>
        <Canvas Background="#FF371780" Name="canvas" Grid.ColumnSpan="2">
            <Controls:HoverButton Margin="0" Padding="0" x:Name="kinectButton" ImageSize="50"                                           
                                ImageSource="/Images/RightHand.png"  
                                ActiveImageSource="/Images/RightHand.png" 
                                TimeInterval="2000"  Panel.ZIndex="1000" Canvas.Left="0" Canvas.Top="0" />
            <Button x:Name="button1" Content="Button1" Height="152" Canvas.Left="128" Canvas.Top="162" Width="320" Background="#FF64C02F" FontSize="53.333" Click="button1_Click" BorderThickness="4" Foreground="White" />
            <Button x:Name="button2" Content="Button2" Height="152" Canvas.Left="514" Canvas.Top="162" Width="320" Background="#FFFFF600" FontSize="53.333" Click="button2_Click" BorderThickness="4" Foreground="Black" />
            <Label Canvas.Left="322" Canvas.Top="34" Content="Kinect Buttons Demo" Height="58" Name="label1" FontSize="28" Width="302" Foreground="White" />
            <Label Canvas.Left="38" Canvas.Top="524" Content="" Height="66" Name="message" Width="530" Foreground="White" FontSize="40" />
            <Button Canvas.Left="804" Canvas.Top="23" Content="Quit" Height="91" Name="quitButton" Width="137" FontSize="28" Background="#FFFF3838" Foreground="White" Click="quitButton_Click" />

            <Controls:HoverButton ActiveImageSource="/Images/RightHand.png" Canvas.Left="71" Canvas.Top="6" ImageSize="50" ImageSource="/Images/RightHand.png" Name="kinectButton2" Padding="0" Panel.ZIndex="1000" TimeInterval="2000" />
            <StackPanel Height="621" Name="stackPanel1" Width="935" Canvas.Left="71" Canvas.Top="70" />
        </Canvas>
        <Image Height="128" HorizontalAlignment="Left" Margin="489,500,0,0" Name="videoStream" Stretch="Fill" VerticalAlignment="Top" Width="191" Grid.Column="1" />
    </Grid>
</Window> 
```

代码：

```
namespace KinectButton
{
    public partial class MainWindow : Window
    {
        System.Windows.Controls.Button newBtn = new Button();
        private KinectSensor _Kinect;
        private WriteableBitmap _ColorImageBitmap;
        private Int32Rect _ColorImageBitmapRect;
        private int _ColorImageStride;
        private Skeleton[] FrameSkeletons;

        List<Button> buttons;
        static Button selected;

        float handX;
        float handY;

        float handX2;
        float handY2;

        public MainWindow()
        {
            InitializeComponent();

            InitializeButtons();
            kinectButton.Click += new RoutedEventHandler(kinectButton_Click);

            this.Loaded += (s, e) => { DiscoverKinectSensor(); };
            this.Unloaded += (s, e) => { this.Kinect = null; };
        }

        private void InitializeButtons()
        {
            newBtn.Content = "Hello";
            newBtn.Width = 500;
            newBtn.Height = 500;
            newBtn.Click += new RoutedEventHandler(newBtn_Click);
            buttons = new List<Button> { button1, button2, quitButton,newBtn};
        }

        private void DiscoverKinectSensor()
        {
            KinectSensor.KinectSensors.StatusChanged += KinectSensors_StatusChanged;
            this.Kinect = KinectSensor.KinectSensors.FirstOrDefault(x => x.Status == KinectStatus.Connected);
        }

        private void KinectSensors_StatusChanged(object sender, StatusChangedEventArgs e)
        {
            switch (e.Status)
            {
                case KinectStatus.Connected:
                    if (this.Kinect == null)
                    {
                        this.Kinect = e.Sensor;
                    }
                    break;
                case KinectStatus.Disconnected:
                    if (this.Kinect == e.Sensor)
                    {
                        this.Kinect = null;
                        this.Kinect = KinectSensor.KinectSensors.FirstOrDefault(x => x.Status == KinectStatus.Connected);
                        if (this.Kinect == null)
                        {
                            MessageBox.Show("Sensor Disconnected. Please reconnect to continue.");
                        }
                    }
                    break;
            }
        }

        public KinectSensor Kinect
        {
            get { return this._Kinect; }
            set
            {
                if (this._Kinect != value)
                {
                    if (this._Kinect != null)
                    {
                        UninitializeKinectSensor(this._Kinect);
                        this._Kinect = null;
                    }
                    if (value != null && value.Status == KinectStatus.Connected)
                    {
                        this._Kinect = value;
                        InitializeKinectSensor(this._Kinect);
                    }
                }
            }
        }

        private void UninitializeKinectSensor(KinectSensor kinectSensor)
        {
            if (kinectSensor != null)
            {
                kinectSensor.Stop();
                kinectSensor.ColorFrameReady -= Kinect_ColorFrameReady;
                kinectSensor.SkeletonFrameReady -= Kinect_SkeletonFrameReady;
            }
        }

        private void InitializeKinectSensor(KinectSensor kinectSensor)
        {
            if (kinectSensor != null)
            {
                ColorImageStream colorStream = kinectSensor.ColorStream;
                colorStream.Enable();
                this._ColorImageBitmap = new WriteableBitmap(colorStream.FrameWidth, colorStream.FrameHeight,
                    96, 96, PixelFormats.Bgr32, null);
                this._ColorImageBitmapRect = new Int32Rect(0, 0, colorStream.FrameWidth, colorStream.FrameHeight);
                this._ColorImageStride = colorStream.FrameWidth * colorStream.FrameBytesPerPixel;
                videoStream.Source = this._ColorImageBitmap;

                kinectSensor.SkeletonStream.Enable(new TransformSmoothParameters()
                {
                    Correction = 0.5f,
                    JitterRadius = 0.05f,
                    MaxDeviationRadius = 0.04f,
                    Smoothing = 0.5f
                });

                kinectSensor.SkeletonFrameReady += Kinect_SkeletonFrameReady;
                kinectSensor.ColorFrameReady += Kinect_ColorFrameReady;
                kinectSensor.Start();
                this.FrameSkeletons = new Skeleton[this.Kinect.SkeletonStream.FrameSkeletonArrayLength];

            }
        }

        private void Kinect_ColorFrameReady(object sender, ColorImageFrameReadyEventArgs e)
        {
            using (ColorImageFrame frame = e.OpenColorImageFrame())
            {
                if (frame != null)
                {
                    byte[] pixelData = new byte[frame.PixelDataLength];
                    frame.CopyPixelDataTo(pixelData);
                    this._ColorImageBitmap.WritePixels(this._ColorImageBitmapRect, pixelData, this._ColorImageStride, 0);
                }
            }
        }

        private void Kinect_SkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
        {
            using (SkeletonFrame frame = e.OpenSkeletonFrame())
            {
                if (frame != null)
                {
                    frame.CopySkeletonDataTo(this.FrameSkeletons);
                    Skeleton skeleton = GetPrimarySkeleton(this.FrameSkeletons);

                    if (skeleton == null)
                    {
                        kinectButton.Visibility = Visibility.Collapsed;
                    }
                    else
                    {
                        Joint primaryHand = GetPrimaryHand(skeleton);
                        TrackHand(primaryHand);
                    }
                }
            }
        }

        //track and display hand
        private void TrackHand(Joint hand)
        {
            if (hand.TrackingState == JointTrackingState.NotTracked)
            {
                kinectButton.Visibility = System.Windows.Visibility.Collapsed;
            }
            else
            {
                kinectButton.Visibility = System.Windows.Visibility.Visible;

                DepthImagePoint point = this.Kinect.MapSkeletonPointToDepth(hand.Position, DepthImageFormat.Resolution640x480Fps30);
                handX = (int)((point.X * LayoutRoot.ActualWidth / this.Kinect.DepthStream.FrameWidth) - (kinectButton.ActualWidth / 2.0));
                handY = (int)((point.Y * LayoutRoot.ActualHeight / this.Kinect.DepthStream.FrameHeight) - (kinectButton.ActualHeight / 2.0));

                handX2 = (int)((point.X * LayoutRoot.ActualWidth / this.Kinect.DepthStream.FrameWidth) - (kinectButton2.ActualWidth / 2.0));

                handY2 = (int)((point.Y * LayoutRoot.ActualHeight / this.Kinect.DepthStream.FrameHeight) - (kinectButton2.ActualHeight / 2.0));

                Canvas.SetLeft(kinectButton, handX);
                Canvas.SetTop(kinectButton, handY);

                Canvas.SetLeft(kinectButton2, handX2);
                Canvas.SetTop(kinectButton2, handY2);

                if (isHandOver(kinectButton, buttons)) kinectButton.Hovering();
                else kinectButton.Release();

                    kinectButton.ImageSource = "/Images/RightHand.png";
                    kinectButton.ActiveImageSource = "/Images/RightHand.png";

                    kinectButton.ImageSource = "/Images/LeftHand.png";
                    kinectButton.ActiveImageSource = "/Images/LeftHand.png";
            }
        }

        //detect if hand is overlapping over any button
        private bool isHandOver(FrameworkElement hand, List<Button> buttonslist)
        {
            var handTopLeft = new Point(Canvas.GetLeft(hand), Canvas.GetTop(hand));
            var handX = handTopLeft.X + hand.ActualWidth / 2;
            var handY = handTopLeft.Y + hand.ActualHeight / 2;

            foreach (Button target in buttonslist)
            {
                Point targetTopLeft = new Point(Canvas.GetLeft(target), Canvas.GetTop(target));
                if (handX > targetTopLeft.X &&
                    handX < targetTopLeft.X + target.Width &&
                    handY > targetTopLeft.Y &&
                    handY < targetTopLeft.Y + target.Height)
                {
                    selected = target;
                    return true;
                }
            }
            return false;
        }

        //get the hand closest to the Kinect sensor
        private static Joint GetPrimaryHand(Skeleton skeleton)
        {
            Joint primaryHand = new Joint();
            if (skeleton != null)
            {
                primaryHand = skeleton.Joints[JointType.HandLeft];
                Joint rightHand = skeleton.Joints[JointType.HandRight];
                if (rightHand.TrackingState != JointTrackingState.NotTracked)
                {
                    if (primaryHand.TrackingState == JointTrackingState.NotTracked)
                    {
                        primaryHand = rightHand;
                    }
                    else
                    {
                        if (primaryHand.Position.Z > rightHand.Position.Z)
                        {
                            primaryHand = rightHand;
                        }
                    }
                }
            }
            return primaryHand;
        }

        //get the skeleton closest to the Kinect sensor
        private static Skeleton GetPrimarySkeleton(Skeleton[] skeletons)
        {
            Skeleton skeleton = null;
            if (skeletons != null)
            {
                for (int i = 0; i < skeletons.Length; i++)
                {
                    if (skeletons[i].TrackingState == SkeletonTrackingState.Tracked)
                    {
                        if (skeleton == null)
                        {
                            skeleton = skeletons[i];
                        }
                        else
                        {
                            if (skeleton.Position.Z > skeletons[i].Position.Z)
                            {
                                skeleton = skeletons[i];
                            }
                        }
                    }
                }
            }
            return skeleton;
        }

        void newButton_Click(object sender, RoutedEventArgs e)
        {
            MessageBox.Show("Yay");
        }

        void kinectButton_Click(object sender, RoutedEventArgs e)
        {
            selected.RaiseEvent(new RoutedEventArgs(Button.ClickEvent, selected));
        }

        private void newBtn_Click(object sender, RoutedEventArgs e)
        {
            MessageBox.Show("hey");
        }

        private void button2_Click(object sender, RoutedEventArgs e)
        {
            message.Content = "Button 2 clicked!";
            Window w = new Window();
            Button b = new Button();
            b.Content = "Button A";

            canvas.Children.Add(newBtn);

            // stackPanel1.Children.Add(newBtn);

            stackPanel1.Children.Remove((UIElement)this.FindName("Button0"));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:00:06.080

以下代码将在代码中重新创建您的第一个按钮：

```
Button btn = new Button
{
    Name = "button1",
    Content = "Button1",
    Height = 152,
    Width = 320,
    Foreground = "#FF64C02F",
    FontSize = 53.333,
    BorderThickness = 4
};
btn.Click += button1_Click;

canvas.Children.Add(btn);
Canvas.SetLeft(btn, 128);
Canvas.SetTop(btn, 162); 
```

也就是说......最好*不要*在代码中执行此操作。如果您有 20 个按钮（正如您在问题评论中提到的），您应该在 XAML 中创建它们。

如果你真的想在代码中严格处理它们，你应该设置一个[MVVM 风格的](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)应用程序。这些类型的模型可能非常健壮，但一开始学习起来很复杂。

# node.js - res.render 不渲染视图，返回 html 文本

> ID：15442458
> 
> 赞同：3
> 
> 时间：2013-03-15T21:33:39.163
> 
> 标签：node.js, jquery, express

因此调用 express/node ：

```
jQuery.ajax({
            url : url,
            type: "GET",
            data: {names : names},
            success: function(data) {
                console.log("ajax post success");
            },
            error: function(jqXHR) {
                console.log(jqXHR.responseText + ' :: ' + jqXHR.statusText);
            }
        }); 
```

在快递 router.js 中：

```
app.get('/metrics/:title/:node/:metric', function(req,res) {
    console.log("received request " );
console.log(req.query.names);
    res.render('nltuning', {
        locals: {
            tdata : req.params.title,
            gdata : req.params.node,
            mdata : req.params.metric,
            ndata : req.query.names
        }
    } );
}); 
```

所有控制台消息都正确打印，ajax 成功正在打印。ajax 显示 html 文本作为响应。

并且视图未呈现。POST 和 GET 也一样 - 为什么会这样？

如果我在浏览器窗口中输入相同的 url，则会呈现视图。任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:43:54.823

如果您想在 ajax 调用后显示新内容，不应该有任何代码说明脚本这样做吗？例如：

```
success: function(data){
        $('someElement').html(data);
    } 
```

# qt - 样式 Qt 单选按钮看起来类似于 UISegmentedControl？

> ID：15442459
> 
> 赞同：0
> 
> 时间：2013-03-15T21:33:46.970
> 
> 标签：qt, radio-button, uisegmentedcontrol

如何设置 Qt 单选按钮的样式，使其看起来像 IOS 的 UISegmentedControl？这是该控件的示例：

![在此处输入图像描述](../Images/26a89d0560adf157140b86a8a6fc550e.png)

来自网络的类似示例也演示了按钮的所需行为，显示在此处的标题“水平单选按钮集”下：

[http://jquerymobile.com/demos/1.0a4.1/docs/forms/forms-radiobuttons.html](http://jquerymobile.com/demos/1.0a4.1/docs/forms/forms-radiobuttons.html)

我希望在 QButtonGroup 中使用 QRadioButtons，但如果其他一些小部件和/或容器可以更轻松地实现此效果，那可能没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:43:42.020

如果你想使用 QML 做到这一点，那将非常容易。这是我在大约一分钟内制作的东西的快速演示。然后，您需要将它适当地连接到您使用它的每个用途。如果你想让它更花哨，我建议使用图像文件而不是矩形。

```
import QtQuick 1.1

Rectangle {
    width: 360
    height: 360
    color: "grey"

    Item{
        id: root
        anchors.centerIn: parent

        Rectangle{
            id: button
            radius: 5
            color: "transparent"
            width: 100
            height: 50
            smooth: true

            Rectangle{
                id: leftButton
                height: parent.height
                width: 45
                color: "black"
                anchors.left: parent.left
                anchors.leftMargin: parent.radius
                smooth: true
            }
            Rectangle{
                id:leftButtonEdge
                height: parent.height
                width: 10
                radius: 5
                anchors.right: leftButton.left
                anchors.rightMargin:-width / 2
                color: "black"
                smooth: true
            }

            Rectangle{
                id: rightButton
                height: parent.height
                width: 45
                color: "white"
                anchors.right: parent.right
                anchors.rightMargin: parent.radius
                smooth: true
            }
            Rectangle{
                id:rightButtonEdge
                height: parent.height
                width: 10
                radius: 5
                anchors.left: rightButton.right
                anchors.leftMargin:-width / 2
                color: "white"
                smooth: true
            }

            MouseArea{
                anchors.fill: parent
                onClicked: {
                    console.log("Clicked")
                    if(rightButton.color == "#000000"){
                        rightButton.color = "white"
                        rightButtonEdge.color = "white"
                        leftButton.color = "black"
                        leftButtonEdge.color = "black"
                    }else{
                        rightButton.color = "black"
                        rightButtonEdge.color = "black"
                        leftButton.color = "white"
                        leftButtonEdge.color = "white"
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T19:10:46.783

可以通过继承 QRadioButton 并重新实现paintEvent 来获得所需的行为。paintEvent 可以使用 Qt 对 QPushButton 的内置渲染，结合使用 Qt 样式表来实现所需的外观（将按钮推到一起并在最后将按钮四舍五入）。

[以下是PySide 文档](http://srinikom.github.io/pyside-docs/PySide/QtGui/QStyleOption.html)中的一些示例代码，几乎正是所需要的（并且与相应的 PyQt 代码非常相似/相同）：

```
def paintEvent(self, qpaintevent):
    option = QStyleOptionButton()
    option.initFrom(self)
    if isDown():
        option.state = QStyle.State_Sunken
    else:
        option.state = QStyle.State_Raised

    if self.isDefault():
        option.features = option.features or QStyleOptionButton.DefaultButton
    option.text = self.text()
    option.icon = self.icon()

    painter = QPainter(self)
    self.style().drawControl(QStyle.CE_PushButton, option, painter, self) 
```

# php - CodeIgniter 文本到 url

> ID：15442460
> 
> 赞同：1
> 
> 时间：2013-03-15T21:33:47.757
> 
> 标签：php, codeigniter-2, codeigniter-url

找不到 codeigniter 是否有任何内置帮助器来将字符串格式化为 url？例如“Lorem ipsum dolor sat amet”将是“lorem-ipsum-dolor-sit-amet”或类似的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T21:48:44.317

具体来说，CodeIgniter 有`url_title()`方法，可以满足您的要求。此方法将删除所有非 URL 可用字符。

```
$title = "Here's a string!";
$url_title = url_title($title);

// Produces: Heres-a-string 
```

可以在此处找到此方法（以及 CI 中内置的其他 URL 帮助程序方法）的文档[。](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:36:50.073

您可以只使用内置的 PHP 函数。这是一个例子：

```
<?php
$my_string = "Lorem ipsum dolor sit amet";
$my_url    = strtolower(str_replace(' ','-',$my_string)); 
echo $my_url;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-30T13:07:03.727

这个会有所帮助

```
$title = "Here's a string!";
$url_title = strtolower(url_title($title));

// Produces: heres-a-string 
```

# image - 如何用里面的图像按比例调整div的大小

> ID：15442466
> 
> 赞同：0
> 
> 时间：2013-03-15T21:34:14.430
> 
> 标签：image, html, resize

好的，所以我有一个通过 Flash 上传的全屏背景图片

```
flash {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 1; } 
```

它完美地调整大小，我在底部还有一个页脚作为 div 和里面的 5 个图像。我将所有图像排成一行，但是当浏览器调整图像大小时，图像会向上跳跃，而不是按比例调整大小。非常感谢您的建议。这是 jsFiddle [http://jsfiddle.net/eglemei/LqBzY/的链接](http://jsfiddle.net/eglemei/LqBzY/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:46:20.320

您的图像没有调整大小，因为您没有告诉他们调整大小。按比例调整大小不是默认行为。`width`如果图像以百分比形式给出或`height`值， 则图像只会根据其包含元素的比例调整自身大小。

一旦您指定了一个百分比`height`或'不要在别处指定，图像将保持它们的纵横比。`width``position``width``height`

将图像的 CSS 更改为如下所示：

```
#sponsors img {
    margin-right: 3%; 
    width:16%;
} 
```

您还需要`height="100px"`从每个`img`标签中删除 ，否则`img`将使用该高度。

我已经相应地更新了你的 jsFiddle：http: [//jsfiddle.net/LqBzY/5/](http://jsfiddle.net/LqBzY/5/)

# html - 从 html 读取并写入 Excel

> ID：15442470
> 
> 赞同：1
> 
> 时间：2013-03-15T21:34:42.743
> 
> 标签：html, excel, vbscript

我想读取 html 并将其中的几列写入 Excel 表。我目前正在使用宏来执行此操作，但在 VBScript 中需要它。

我想计算合规性检查和 oracle 表的失败发生次数并将其写入 Excel 文档。

[示例 html 的全尺寸图像](https://i.stack.imgur.com/JoSEB.jpg)和所需的 Excel 文件结果。

![示例 html 和所需的 excel 输出](../Images/2478ed10a84d94ecd984a7370ec9a26e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T00:26:51.767

可以像这样从 VBScript 控制 Excel：

```
Set xl = CreateObject("Excel.Application")
xl.Visible = True

Set wb = xl.Workbooks.Add 
```

HTML 文件可以解析为 DOM 文档：

```
Set doc = CreateObject("Msxml2.DOMDocument.6.0")
doc.async = True
doc.load "C:\path\to\your.html" 
```

使用[XPath](http://saxon.sourceforge.net/saxon6.5.3/expressions.html)表达式选择所有`<td>`元素：

```
Set td = doc.selectNodes("//tr/td") 
```

此时`td`包含`<td>`文档中所有元素的集合。您可以像这样处理它们：

```
numrows = doc.selectNodes("//tr").Length
numcols = td.Length / numrows

row = 0
For i = 0 To td.Length - 1 Step numcols
  If td(i).Text = "Fail" Then
    row = row + 1
    wb.Sheets(1).Cells(row, 1).Value = CDate(Split(td(i+2).Text)(0))
    If InStr(td(i+1).Text, "compliance") > 0 Then
      wb.Sheets(1).Cells(row, 2).Value = 1
    ElseIf InStr(td(i+1).Text, "Oracletable") > 0 Then
      wb.Sheets(1).Cells(row, 3).Value = 1
    End If
  End If
Next 
```

上面将创建一个像这样的表：

```
2/9/2012    1    
2/9/2012         1
2/9/2012         1
.
.
. 
```

然后您可以使用 Excel 的[`Consolidate`](http://msdn.microsoft.com/en-us/library/office/ff839594.aspx)方法来合并数据：

```
Const xlSum = -4157

wb.Sheets(2).Range("A1").Consolidate _
  Array(wb.Sheets(1).Name & "!R1C1:R" & row & "C3"), xlSum 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:44:52.247

您可以使用任何[dom](http://msdn.microsoft.com/en-us/library/aa468547.aspx)库读取 html 和[OpenXML sdk](http://msdn.microsoft.com/en-us/library/cc850837.aspx)以写入 Excel（2007 格式 - xlsx）。这是否回答了您的问题，或者您是否有特定的问题正在努力解决？

* * *

编辑

抱歉，出于某种原因，我以为您正在谈论在 VB.Net 中执行此操作，现在我意识到您已经在 Excel 中了。所以我不清楚你在问什么 - 如何打开 html 文件？如何计算或存储值？

也许发布你到目前为止的脚本，并具体说明什么不起作用。

# c# - 从 COM 对象调用方法

> ID：15442473
> 
> 赞同：0
> 
> 时间：2013-03-15T21:34:57.527
> 
> 标签：c#, .net, com

第三天尝试解决我的问题，但没有运气（（下面是我的FunnyWorld3.cs文件。我注册了这个组件，这里没有问题

```
[assembly: AssemblyKeyFile("Keys.snk")]
public interface IFunnyWorld3
{
    void SayHello(String param);
};

[
  ClassInterface(ClassInterfaceType.AutoDual)
]

public class FunnyWorld3 : IFunnyWorld3
{   
    public void SayHello(String param)
    {
        MessageBox.Show(param, "FunnyWorld::SayHello metnod was invoked");
    }
}; 
```

然后我创建了 c# 项目，代码：

```
Type comType = Type.GetTypeFromProgID("FunnyWorld3", true);
object comObj = Activator.CreateInstance(comType) 
```

下一步是什么？如何在我的项目中调用 SayHello 方法？请帮忙（（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:37:15.947

要调用该方法，您需要将其转换为`IFunnyWorld3`定义该方法的类型。

```
IFunnyWorld3 fw = (IFunnyWorld3)comObj;
fw.SayHello("message"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:37:44.113

铸造怎么样？如果您获得了参考，`object`那么您应该可以对其进行转换：

```
IFunnyWorld3 fw3 = (IFunnyWorld3) comObj; 
```

然后调用你的方法。喜欢

```
fw3.SayHello("Hello, World"); 
```

# javascript - Javascript：removeChild 不工作

> ID：15442474
> 
> 赞同：0
> 
> 时间：2013-03-15T21:34:58.510
> 
> 标签：javascript, removechild

你能帮帮我吗？为什么`removeChild`在我的代码中不起作用？

```
 divId = $(".File[rel='" + fileId.substring(0, 32) + "']");
    divId.parentNode.removeChild(divId); 
```

（第一行工作，可以找到div）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T21:36:19.097

您可以[`.remove()`](http://api.jquery.com/remove/)为此使用：

```
divId = $(".File[rel='" + fileId.substring(0, 32) + "']");
divId.remove(); 
```

`$(selector)`返回一个没有`parentNode`属性的 jQuery 对象。[`.get()`](http://api.jquery.com/get/)如果您确实需要获取由@dystroy 回答的DOM 元素引用，您也可以使用或数组表示法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T21:36:21.683

改变

```
divId = $(".File[rel='" + fileId.substring(0, 32) + "']"); 
```

到

```
divId = $(".File[rel='" + fileId.substring(0, 32) + "']").get(0); 
```

或者简单地使用 jQuery 的[remove](http://api.jquery.com/remove/)函数来处理 DOM removeChild 函数的尴尬：

```
divId.remove(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T21:39:45.397

要访问父级，请使用：

```
divId.parent(); 
```

但你不需要父母，你可以这样做：

```
divId.remove(); 
```

# excel - 根据值更改单元格颜色

> ID：15442476
> 
> 赞同：0
> 
> 时间：2013-03-15T21:35:03.560
> 
> 标签：excel, excel-formula, spreadsheet, libreoffice, openoffice-calc

我有一个 libreoffice/excel 电子表格，在一列中有数千行。我想让单元格根据它的值改变颜色。如何才能做到这一点？

```
Example:
23   
42   
42
53
56 
```

所有具有 42 的行都会将单元格颜色更改为蓝色

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:38:17.837

使用条件格式。选择范围并为等于运算应用条件格式。在 excel 2007 和 2010 的“主页”选项卡中可用

# c# - 实体框架 - 存储库和工作单元 - 我这样做对吗？

> ID：15442481
> 
> 赞同：2
> 
> 时间：2013-03-15T21:35:31.660
> 
> 标签：c#, entity-framework, repository-pattern, unit-of-work

我的存储库如下所示：

```
public class SqlRepository<T> : IRepository<T> where T : class
{
    private ExchangeSiteContext _dbContext;
    private DbSet<T> _dbSet;

    #region [Constructor]
    public SqlRepository(ExchangeSiteContext context)
    {
        _dbContext = context;
        _dbSet = context.Set<T>();
    }
    #endregion

    /// <summary>
    /// Gets the DbContext of the repository
    /// </summary>
    public ExchangeSiteContext DbContext
    {
        get
        {
            return this._dbContext;
        }
    }

    /// <summary>
    /// Get a list of entities
    /// </summary>
    /// <returns>List of type T entities</returns>
    public IQueryable<T> GetList()
    {
        return this._dbSet.AsQueryable();
    }

    /// <summary>
    /// Get a list of entities by a predicate
    /// </summary>
    /// <param name="predicate">The predicate</param>
    /// <returns>IQueryable of T</returns>
    public IQueryable<T> GetList(Expression<Func<T, bool>> predicate)
    {
        return this._dbSet.Where(predicate).AsQueryable();
    }

    ...
    ...
} 
```

我的工作单元是这样的：

```
public class SqlUnitOfWork : IUnitOfWork, IDisposable
{
    #region [Private Variables]
    private ExchangeSiteContext _dbContext;
    private BicycleSellerListingRepository _bicycleSellerListingRepository;
    private UserProfileRepository _userProfileRepository;
    #endregion

    #region [Constructor]
    public SqlUnitOfWork()
    {
        this._dbContext = new ExchangeSiteContext();
    }
    #endregion

    #region [Custom Repositories]
    public BicycleSellerListingRepository BicycleSellerListingRepository
    {
        get
        {
            if (this._bicycleSellerListingRepository == null)
                this._bicycleSellerListingRepository = new BicycleSellerListingRepository(this._dbContext);

            return this._bicycleSellerListingRepository;
        }
    }

    public UserProfileRepository UserProfileRepository
    {
        get
        {
            if (this._userProfileRepository == null)
                this._userProfileRepository = new UserProfileRepository(this._dbContext);

            return this._userProfileRepository;
        }
    }
    #endregion

    ///
    /// Generic repository
    ///
    public SqlRepository<T> GenericRepository<T>() where T : class
    {
        return new SqlRepository<T>(this._dbContext);
    }

    public void Commit()
    {
        this._dbContext.SaveChanges();
    }

    public void Dispose()
    {
        this._dbContext.Dispose();
        this._dbContext = null;
    }
} 
```

我的存储库都是通用的。我的工作单元有一些自定义存储库，主要用于我无法执行通用操作的情况。

我的问题是，这看起来对吗？我以前从未创建过存储库或工作单元。这似乎工作得很好，但我不确定我是否忽略了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:44:58.567

存储库和 UoW 没有单一的正确实现（就我而言，我更喜欢 UoW 是 DbContext 的简单包装器，它被传递给存储库）。但这是我在您的实施中看到的一些问题：

*   `GetList`方法令人困惑。他们正在返回`IQueryable`而不是列表。我认为`GetAll`是更合适的名字。
*   您不需要调用`_dbSet.AsQueryable()`，因为`DbSet<T>`实现`IQueryable<T>`. 简单地返回`_dbSet`。
*   通常在通用存储库中创建一些包含相关实体以进行预加载的方法。
*   如果您的存储库是通用的，那么您为什么要使用特定的上下文？改为使用`DbContext`。
*   为什么`DbContext`要从存储库中公开？
*   您正在 UoW 中创建上下文。这使得依赖注入不可能。
*   `_dbContext`处置后无需设置为 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:17:02.300

工作单元和存储库模式的实现仍然是开发人员界激烈争论的主题，但是在阅读了这么多相关内容之后，我可以给你一些我收集到的指导方针：

*   不要过度使用泛型，如果你真的需要一个泛型存储库，那么只将它们真正共享的方法放在那里，如果你能一起避免这一切，我会更好。
*   永远不要使用基于表达式树进行过滤的方法。
*   我可以给你其他想法，但我想引导你看一篇我写的关于这个的文章[不是因为它是我的，我真的很努力地工作]，如果你愿意，你可以在[这里查看](http://snifferjr.wordpress.com/2013/02/20/yet-another-uow-repository-article/)。

# javascript - 在编辑时，使用 Google Apps 脚本将已编辑的文档移动到不同的文件夹

> ID：15442483
> 
> 赞同：0
> 
> 时间：2013-03-15T21:35:32.837
> 
> 标签：javascript, google-apps-script

我正在通过 IFTTT 配方制作文档，在编辑它之后，我希望能够通过将其移动到不同的文件夹来将其与其他文件区分开来。

我该怎么做？添加它会算作更改，所以它的第二次编辑？

我在看`onedit()`，但我不明白如何使用它，我不知道如何使它适用于任何/所有文档（可以检查一个文件夹中的所有文件，但这就是我使用谷歌的全部内容Drive for，因此任何文件夹也可以使用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T01:19:36.783

蛮力方法是创建一个函数，该函数迭代比较创建日期时间与上次编辑日期时间的文件。这可以通过[文件类](https://developers.google.com/apps-script/class_file)`getDateCreated()`的和`getLastUpdated()`方法获得。如果您有大量文件，请阅读有关文件数量限制和处理分页请求的信息。您的函数可以使用[执行 GAS 脚本的任何正常方式](https://developers.google.com/apps-script/execution_methods)运行。一旦您的功能正常工作，手动创建时间驱动触发器将根据您的需要自动运行它。

在 gDrive 中，“文件夹”实际上是与文件关联的一种标签的显示约定。与 gMail 标签一样，dDrive 文件夹可以嵌套，一个文件可以同时“位于”多个文件夹中。下面是一个小功能，用于证明将文件添加到文件夹不会更改最后更新的日期/时间戳。“移动”文件在功能上与将其添加到一个文件夹并从另一个文件夹中删除相同。

```
function FileEditTagTest() {
  var start = 1
  var max = 1
  var files = DocsList.getAllFiles(start, max)        //get array with one arbitrar file
  var id = files[0].getId()                           //get the file's ID
  var file = DocsList.getFileById(id)                 //get the file object
  Logger.log("Name:        " + file.getName())        //log the file's name
  Logger.log("LastUpdate:  " + file.getLastUpdated()) //log the file date-time before adding it to a new folder
  var folderName = 'TagTest' + new Date();            //generate a unique folder name. Current date is used for convenient uniquness
  var root = DocsList.getRootFolder()                 //get the root folder for the user
  var folder = root.createFolder(folderName)          //create a new folder
  file.addToFolder(folder)                            //assign the folder to the file (aka "put the file there")
  Logger.log("FolderName:  " + folderName)            //log the folder name
  Logger.log("LastUpdate:  " + file.getLastUpdated()) //log the file date-time after adding it to a new folder
} 
```

运行此函数后，日志将类似于以下内容。请注意上次更新的两个条目是如何相同的。

```
Name:        YourFileNameHere
LastUpdate:  Fri Mar 15 2013 15:32:42 GMT-0600 (CST)
FolderName:  TagTestFri Mar 15 2013 18:50:37 GMT-0600 (CST)
LastUpdate:  Fri Mar 15 2013 15:32:42 GMT-0600 (CST) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T22:03:32.220

我想您是在谈论文本文档，而不是电子表格（？）。OnEdit 适用于电子表格，因此不适用于您的用例。此外，没有办法将脚本绑定到文本文档......我能想象的唯一可能的方法是拥有一个独立的脚本来监视文档活动并尝试检测是否已创建新文档并最终正在编辑，但我什至不知道该怎么做。

当您说 *“并且在我编辑它之后”*时，这是否意味着您在 IFTTT 服务创建它之后手动编辑它？这是否发生在有限/定义的时间间隔内？

如果时间不是很关键，也许您可​​以想象一个计时器触发的监视脚本，它检查您的驱动器并将与某些特定条件相对应的文件移动到另一个文件夹......

如果您想要更好的建议，恐怕您必须提供有关这些文件在此过程中发生的情况的更多详细信息。（对不起这个相当“模糊”的回应）

# ruby-on-rails - 亚马逊网络服务 Beanstalk，git aws.push 似乎推送，但没有改变任何东西

> ID：15442491
> 
> 赞同：1
> 
> 时间：2013-03-15T21:36:07.890
> 
> 标签：ruby-on-rails, amazon-web-services

我见过许多类似的问题，但没有实际的解决方案。在[http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Ruby_rails.html](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Ruby_rails.html)之后，我创建了一个没有问题的示例应用程序。但是，我修改了一些文件，包括 gemfile，运行 bundle install，运行`git add . && git commit -m "commit gemfile change"`

然后，我运行 git aws.push，收到以下信息：

```
> c:\Users\mmoore\Documents\rubyapps\visitdaysaws>git aws.push Counting
> objects: 8, done. Delta compression using up to 8 threads. Compressing
> objects: 100% (5/5), done. Writing objects: 100% (5/5), 653 bytes,
> done. Total 5 (delta 3), reused 0 (delta 0) remote: To
> https://[secureurl]
>    091700..00005f  39eed5f98abacccccccccsaadeeeffa044354b740 -> master

c:\Users\mmatches\Documents\rubyapps\appaws>"c:\Ruby193\AWS-ElasticBeanstalk
-CLI-2.3.1\eb\windows\eb" status --verbose
Retrieving status of environment "appaws-env".
URL     : appaws-env-dxf4aghrer.elasticbeanstalk.com
Status  : Ready
Health  : Green
Environment Name:       appaws-env
Environment ID:         e-123abz4rpw
Solution Stack:         64bit Amazon Linux running Ruby 1.9.3
Version Label:          git-39eed5f98abacccccccccsaadeeeffa044354b740-1363313513
78
Date Created:           2013-03-15 13:48:56
Date Updated:           2013-03-15 16:34:00
Description:            None

RDS Database: AWSEBRDSDatabase | aa1adfga3tfa2a.cadfef60egmm.us-east-1.rds.amaz
onaws.com:3306
Database Engine:        mysql 5.5.27
Allocated Storage:      5
Instance Class:         db.t1.micro
Multi AZ:               False
Master Username:        ebroot
Creation Time:          2013-03-15 13:54:20
DB Instance Status:     available 
```

尽管如此，我仍然收到一般的欢迎消息： ![AWS 通用欢迎页面](../Images/868890310061d92f7f6b298a86f04d25.png)

我检查了我的 git repo 的大小，它比默认应用程序大，但只有 6.5 MiB。我也尝试过粘贴核心文件，没有变化。我对任何想法都持开放态度。

**更新**

运行建议的删除文件，仍然收到一般页面，但是当导航到 index.html（理论上不存在）时，您可以看到应用程序加载或尝试通过错误加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:43:25.500

在示例应用程序中，欢迎消息位于`public/index.html`.

这意味着，只要您不删除该静态文件，您的主页就会继续显示欢迎消息。

`git rm public/index.html`除了不会使消息消失之外的任何更改。

# sorting - 示例如何在 prolog 中使用 predsort(:Compare, +List, -Sorted)

> ID：15442499
> 
> 赞同：4
> 
> 时间：2013-03-15T21:36:53.803
> 
> 标签：sorting, prolog, swi-prolog, mergesort

我想订购一个自定义列表。我要订购的清单将采用这种形式...

```
[n(_,2,_),n(_,1,_),n(_,3,_)] 
```

我写了一个比较器

```
cheaper(n(_,C1,_),n(_,C2,_)) :-
        C1>C2\. 
```

如何将它与 predsort 一起使用。我使用冒泡排序编写了一个排序算法，但我的列表非常大，所以速度很慢。

有没有可能做

```
predsort(cheaper, [n(_,2,_),n(_,1,_),n(_,3,_)] , X). 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T21:52:57.130

尝试这个 ：

```
cheaper(>, n(_,C1,_),n(_,C2,_)) :-
        C1>C2.

cheaper(<, n(_,C1,_),n(_,C2,_)) :-
        C1<C2.

cheaper(=, n(_,C1,_),n(_,C2,_)) :-
        C1=C2. 
```

请注意 predsort 的工作方式与 sort 类似，没有双打！如果你想保持双打，试试

```
cheaper(>, n(_,C1,_),n(_,C2,_)) :-
        C1>C2.

cheaper(<, n(_,C1,_),n(_,C2,_)) :-
        C1=<C2. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T22:44:52.310

Joel 展示了基本情况 (+1)，但为了获得更好的性能，请避免重复测试：

```
cheaper(R, n(_,C1,_),n(_,C2,_)) :-
        C1>C2 -> R = > ; R = < . 
```

*编辑*

现在 SWI-Prolog 有另一个内置[排序](http://www.swi-prolog.org/pldoc/doc_for?object=sort/4)/4，对于简单的情况，它避免了与调用用户定义的谓词相关的惩罚：

```
?- sort(2,@=<,[n(_,2,_),n(_,1,_),n(_,3,_)],S).
S = [n(_2578, 1, _2582), n(_2564, 2, _2568), n(_2592, 3, _2596)]. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T23:08:48.263

尽量避免使用`predsort/3`. 这是一个特定于 SWI 的谓词，不是特别有效，因为所有 ~ O(n log n) 比较都是通过调用您的定义来执行的。而是尝试使用`keysort/2`which 是标准谓词并且不会产生任何此类调用开销：

因此，首先将您的列表映射`Ns`到对列表`KNs`，然后排序，然后提取值。

```
n_pricep(N, C-N) :-
   N = n(_,C,_).

pair_value(_-V,V).

   ...,
   maplist(n_pricep, Ns, KNs),
   keysort(KNs, KNsS),
   maplist(pair_value, KNsS, NsS). 
```

# linker-errors - 构建壁虎时在 Ubuntu 12.10 x86_64 上构建 B2G 失败

> ID：15442502
> 
> 赞同：0
> 
> 时间：2013-03-15T21:37:14.897
> 
> 标签：linker-errors, x86-64, gecko, ubuntu-12.10, firefox-os

我在 Ubuntu 12.10 上构建 B2G 时出错。**Gecko**构建搜索**librt**失败。

库存在于系统上...

```
    $ 定位 librt.so

    /home/user/src/MOZILLA/B2G/prebuilt/linux-x86/toolchain/i686-linux-glibc2.7-4.4.3/sysroot/usr/lib/librt.so
    /home/user/src/MOZILLA/B2G/prebuilt/linux-x86/toolchain/i686-linux-glibc2.7-4.4.3/sysroot/usr/lib/librt.so.1
    /home/user/src/MOZILLA/B2G/prebuilts/gcc/linux-x86/host/i686-linux-glibc2.7-4.6/sysroot/usr/lib/librt.so
    /home/user/src/MOZILLA/B2G/prebuilts/gcc/linux-x86/host/i686-linux-glibc2.7-4.6/sysroot/usr/lib/librt.so.1
    /home/user/src/MOZILLA/B2G/prebuilts/gcc/linux-x86/host/x86_64-linux-glibc2.7-4.6/sysroot/usr/lib/librt.so
    /home/user/src/MOZILLA/B2G/prebuilts/gcc/linux-x86/host/x86_64-linux-glibc2.7-4.6/sysroot/usr/lib/librt.so.1
    /lib/i386-linux-gnu/librt.so.1
    /lib/x86_64-linux-gnu/librt.so.1
    /lib32/librt.so.1
    /usr/lib/x86_64-linux-gnu/librt.so

```

...但是构建过程失败了...

```
    $ ./build.sh -j1 壁虎

    测试通过 | 检查同步目录.py | /home/user/src/MOZILLA/B2G/gecko/js/src/config <= /home/user/src/MOZILLA/B2G/gecko/config
    /home/user/src/MOZILLA/B2G/prebuilt/linux-x86/toolchain/i686-android-linux-4.4.3/bin/../lib/gcc/i686-android-linux/4.4.3/.. /../../../i686-android-linux/bin/ld: 找不到-lrt
    collect2: ld 返回 1 个退出状态

```

任何想法 ？？

非常感谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:17:08.993

这个bug已经在B2G Github账号上讨论过；[https://github.com/mozilla-b2g/B2G/issues/181](https://github.com/mozilla-b2g/B2G/issues/181)

似乎不再支持 x86 构建，您需要为 ARM 构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:44:24.750

Mozilla 建议使用 Ubuntu 12.04 x64 构建 Gecko

# java - 接口和类。名称冲突：相同的擦除，但都没有覆盖其他

> ID：15442508
> 
> 赞同：65
> 
> 时间：2013-03-15T21:37:44.230
> 
> 标签：java

我有一个接口，当我尝试实现它的一种方法时，我收到此错误：“名称冲突：GenericQueue 中的 enqueue(T#1) 和 IGenericQueue 中的 enqueue(T#2) 具有相同的擦除，但都没有覆盖另一个 T#1 ，T#2 是类型变量： T#1 扩展在类 GenericQueue 中声明的 Comparable T#2 扩展在接口 IGenericQueue 中声明的 Comparable “这是代码：

```
public interface IGenericQueue <T extends Comparable> {
public void enqueue(T j);
..
}

public class GenericQueue<T extends Comparable> implements IGenericQueue {
....

public void enqueue(T j) // the error is in this line.
{
    if(rear == maxSize -1)
        rear = -1; // means you have reached the last element start again ?

    queArray[++rear] = j;
    nItems ++ ;
}
} 
```

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-03-15T21:40:39.837

您`GenericQueue`正在实现*原始*接口`IGenericQueue`，因此它`T`与`T`in不同`IGenericQueue`。`<T>`在`implements`子句中添加：

```
public class GenericQueue<T extends Comparable> implements IGenericQueue<T> {
//                                                                      ^^^ 
```

所以你正在用相同的`T`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-18T14:01:04.867

我遇到了类似的问题，尽管遵循 OO 编程的模板模式，我有一个更复杂的通用类层次结构。哪里有一个接口，然后另一个接口扩展该接口，然后一个抽象类实现该接口，然后是扩展抽象类的类，但收到错误“接口和一个类。名称冲突：相同的擦除，但都没有覆盖其他”并发现只有当我在层次结构中的每个类以及对该类的每个引用中放置或之后，错误才会消失。例如：

```
public interface Set<U> {...}
public interface SetExtended<U> extends Set<U> {...}
public abstract class AbstractSetExtended<U> implements SetExtended<U>{...}
public class Set1<U> extends AbstractSetExtended<U> {...}
public class Set2<U> extends AbstractSetExtended<U> {...} 
```

模板模式非常适合模块化设计，以及分解通用代码并有利于代码重用。阅读更多关于模板模式的信息：[https ://en.wikipedia.org/wiki/Template_method_pattern](https://en.wikipedia.org/wiki/Template_method_pattern)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-14T08:13:49.020

功能接口 -> 首先，让我们了解一下`@FuntionalInterface`我们所知道的 JDK-1.8 的
一个新概念，即 Lambda Expersion 的概念：

**Lambda 扩展**

您需要了解有关 LamdaExpersion 的第一个概念，然后您才能轻松获取什么是功能接口角色..

```
// Java program to demonstrate lambda expressions 
// to implement a user defined functional interface. 

// A sample functional interface (An interface with 
// single abstract method 
interface FuncInterface 
{ 
    // An abstract function 
    void abstractFun(int x); 

    // A non-abstract (or default) function 
    default void normalFun() 
    { 
    System.out.println("Hello"); 
    } 
} 

class Test 
{ 
    public static void main(String args[]) 
    { 
        // lambda expression to implement above 
        // functional interface. This interface 
        // by default implements abstractFun() 
        FuncInterface fobj = (int x)->System.out.println(2*x); 

        // This calls above lambda expression and prints 10\. 
        fobj.abstractFun(5); 
    } 
} 
```

Lambda Expersion 仅在您的定义接口只有**1 个方法定义**时才起作用，因为 java 编译器仅在接口中只有一个方法时才理解，那么您不需要在您的类中定义该方法，因此：注释出现在图片中，当您想要实施 Lambda Expersion 然后必须`@FunctionInterface`在您的界面中使用。如果你错误地在你的接口中多写了一个方法，那么编译器会告诉你这是函数式接口。只需定义一种方法才能在您的应用程序中使用 Lamda Experssion

```
 @FunctionalInterface  
interface sayable{  
    void say(String msg);  
}  
public class FunctionalInterfaceExample implements sayable{  
    public void say(String msg){  
        System.out.println(msg);  
    }  
    public static void main(String[] args) {  
        FunctionalInterfaceExample fie = new FunctionalInterfaceExample();  
        fie.say("Hello there");  
    }  
} 
```

# .htaccess - 本地主机上禁止 403 错误？

> ID：15442512
> 
> 赞同：1
> 
> 时间：2013-03-15T21:38:11.803
> 
> 标签：.htaccess, wamp

我在 Heroku 上创建了一个新项目，在现有的 repo 上使用了新的 ssh 密钥。

我安装了 WAMP 并将其配置为侦听端口 8080。

现在，当我启动 WAMP 服务器并尝试访问`http://localhost:8080`时，我得到了

> 403 错误被禁止。您无权访问此服务器上的 / Apache 错误日志：

```
 [Fri Mar 15 23:52:21 2013] [error] [client 127.0.0.1] client denied by server configuration: C:/facebook_apps/account_recevery/floating-inlet-7252/
[Fri Mar 15 23:52:22 2013] [error] [client 127.0.0.1] client denied by server configuration: C:/facebook_apps/account_recevery/floating-inlet-7252/favicon.ico 
```

我试图在该文件夹中找到 favicon.ico，但没有这样的文件。显示系统和隐藏文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:45:46.437

曾几何时，我遇到了这个问题。所以它可能会帮助你。

将文件内容更改为`c:\wamp\alias\phpmyadmin.conf`以下内容。

```
<Directory "c:/wamp/apps/phpmyadmin3.4.5/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Deny,Allow
        Allow from all
</Directory> 
```

相同的设置更改也可以应用于`httpd.conf`文件。

以前这包含以下条目

```
Deny from all
Allow from 127.0.0.1 
```

从那里删除它并重新启动您的服务器。

# c# - 在 azure 上访问本地文件

> ID：15442515
> 
> 赞同：1
> 
> 时间：2013-03-15T21:38:46.830
> 
> 标签：c#, wcf, azure

我的 WCF 服务需要在运行时访问本地 .cer 文件。在调试模式下，我可以使用以下命令访问文件：

```
var testCertificate = new X509Certificate2(HostingEnvironment.ApplicationPhysicalPath + "/testCert.cer"); 
```

但是，当我的服务托管在 Azure 上时，这不起作用。我不确定为什么会发生这种情况。.cer 文件是否需要某种构建模式，或者位于特定文件夹或其他位置？该文件与 WCF 服务一起部署。

异常消息是：

> 该系统找不到指定的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T01:50:06.033

您需要确保 .cer 文件的“复制到输出目录”属性设置为“始终复制”或“如果更新则复制”。否则，当您部署到 Azure 时，它​​不会与您的解决方案打包在一起。

# c# - 在 LINQ 中查询/搜索列表（在某些情况下）

> ID：15442522
> 
> 赞同：-1
> 
> 时间：2013-03-15T21:39:16.877
> 
> 标签：c#, linq

如何获取要测试的每个列表条目的内容，`textQuery.Text`如果它是命中，则将其写入名为 ListView 的四列`listResx`？

```
List<TransResource> MasterList = new List<TransResource>();

foreach (TransResource x in resources.Values)
{
     MasterList.Add(x);
}
...
public class TransResource
{
    public string id {get; set;}
    public string en {get; set;}
    public string fr {get; set;}
    public string es {get; set;}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:43:32.623

```
var resultList = MasterList.Where(x => x.id == textQuery.Text || x.en == textQuery.Text || x.fr == textQuery.Text || x.es == textQuery.Text).ToList(); 
```

这应该会给你更小的匹配结果列表。你能从那里拿走吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:45:37.003

```
string keyword = textQuery.Text;

var hitsQuery = from i in MasterList
                where i.en == keyword ||
                      i.es == keyword ||
                      i.fr == keyword ||
                      i.id == keyword
                select i;

var hits = hitsQuery.ToList(); 
```

`hist`将是`List<TransResource>`。您可以使用它来填充您的`ListView`，例如使用`DataSource`属性：

```
listResx.DataSource = hits;
listResx.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T21:45:41.743

试试这个：

```
var matches = resources.Values.Where(x=>x.id==txtQuery.Text ||
                                        x.en==txtQuery.Text ||
                                        x.fr==txtQuery.Text ||
                                        x.es==txtQuery.Text);

foreach(var item in matches)
{   
   string displayItem = item.id + " " + item.en;
   listResx.Items.Add(new ListViewItem(displayItem));
} 
```

或者使用更少的代码行：

```
foreach(var item in resources.Values.Where(x=>x.id==txtQuery.Text ||
                                              x.en==txtQuery.Text ||
                                              x.fr==txtQuery.Text ||
                                              x.es==txtQuery.Text))
{   
   string displayItem = item.id + " " + item.en;
   listResx.Items.Add(new ListViewItem(displayItem));
} 
```

# c# - AutoUpdaterDotNet 尝试更新但新文件永远不会替换旧文件

> ID：15442532
> 
> 赞同：0
> 
> 时间：2013-03-15T21:39:50.880
> 
> 标签：c#, wpf, winforms, auto-update

所以我`AutoUpdaterDotNET`用来处理独立 .exe 的更新（它根本不需要打包到安装程序中）。我也在使用 WPF，所以我必须编辑`OnDownloadComplete()`要使用的函数`Environment.Exit(0)`。

所以程序出去并将新文件下载到`%USERPROFILE%\AppData\Local\Temp\Filename.exe`，然后从 关闭并重新启动应用程序`%USERPROFILE%\AppData\Local\Temp\Filename.exe`。我有位于桌面上的原始可执行文件。

我一直在寻找解决这个问题的方法，但没有运气。我是 C# 和 Visual Studio 的新手，但我只想将桌面上的文件替换为下载的文件，然后从桌面上的文件重新启动它。任何人都可以提供建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:12:21.870

看起来你在这里错过了一步。如果您希望应用程序位于桌面上，

1.  下载新文件
2.  关闭应用程序
3.  将文件复制到旧的 .exe 文件上
4.  打开应用程序。

显然，这些步骤需要通过第二个过程来完成（`AutoUpdateDotNET`？或自己编写？）否则，我不知道问题是什么。

# android - 保存电路板的状态以进行定向

> ID：15442533
> 
> 赞同：0
> 
> 时间：2013-03-15T21:39:51.650
> 
> 标签：android, savestate

嗨，我是 android 的新手，正在阅读 tictactoe 的教程。我需要保存电路板的状态，以便当我改变方向时，电路板的字符完好无损。这是代码片段 - 尝试和转折字符串正在保存和显示，但不是板上的 X 和 O。我不知道为什么

MainActivity.java

```
 mGame = new TicTacToeGame();

       if (savedInstanceState == null) { 
            startNewGame();
            } 
            else { 
             // Restore the game's state                    
            mGame.setBoardState(savedInstanceState.getCharArray("board"));              
            mGameOver = savedInstanceState.getBoolean("mGameOver"); 
            mInfoTextView.setText(savedInstanceState.getCharSequence("info")); 
            mHumanWins = savedInstanceState.getInt("mHumanWins"); 
            mComputerWins = savedInstanceState.getInt("mComputerWins"); 
            mTies = savedInstanceState.getInt("mTies"); 
            mTurn = savedInstanceState.getChar("mTurn"); 
            } 
            displayScores(); 

       }

        @Override
    protected void onSaveInstanceState(Bundle outState) {
     super.onSaveInstanceState(outState);
     outState.putCharArray("board", mGame.getBoardState());
     outState.putBoolean("mGameOver", mGameOver);
     outState.putInt("mHumanWins",Integer.valueOf(mHumanWins));
     outState.putInt("mComputerWins",Integer.valueOf(mComputerWins));
     outState.putInt("mTies", Integer.valueOf(mTies));
     outState.putCharSequence("info", mInfoTextView.getText());
     outState.putChar("mTurn", mTurn);
    } 
```

以下是tictactoe游戏返回棋盘状态的方法：

```
 public char[] getBoardState() {
    return mBoard;
}

public void setBoardState(char[] board) {
    mBoard = board.clone();
} 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:05:55.873

我认为问题可能出在您的 setBoardGame 方法中。clone() 方法返回类型“Object”，但 mBoard 是类型“char[]”（字符数组）。因此，您需要从类型 Object 转换为类型 char[]

尝试这个：

```
public void setBoardState(char[] board) {
    mBoard = (char[]) board.clone();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:28:08.413

尝试

```
public char[] getBoardState() {
return mBoard.clone(); 
```

}

# c - 为什么根据字节顺序交换 IP 标头变量声明

> ID：15442536
> 
> 赞同：4
> 
> 时间：2013-03-15T21:40:10.720
> 
> 标签：c, linux, ip

我的 Ubuntu 发行版上的 ip.h 文件在下面复制了以下 struct iphdr。谁能解释为什么变量 ihl 和版本的顺序会根据字节顺序而变化。根据我的理解，如果有多个字节，“字节序”会很重要，但在这种情况下，这两个（ihl 和版本）结合起来形成一个字节。因此，小端或大端不应该影响字节内位的顺序。

```
struct iphdr
  {
#if __BYTE_ORDER == __LITTLE_ENDIAN
    unsigned int ihl:4;
    unsigned int version:4;
#elif __BYTE_ORDER == __BIG_ENDIAN
    unsigned int version:4;
    unsigned int ihl:4;
#else
# error "Please fix <bits/endian.h>"
#endif
    u_int8_t tos;
    u_int16_t tot_len;
    u_int16_t id;
    u_int16_t frag_off;
    u_int8_t ttl;
    u_int8_t protocol;
    u_int16_t check;
    u_int32_t saddr;
    u_int32_t daddr;
    /*The options start here. */
  }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T21:46:31.980

这是特定于实现（psABI-）的，但实际情况是字节或字中位域的位顺序，在相关实现的实践中，与字中字节的字节顺序相匹配。因此，为了让这些成员占据相同的位位置，而与正在使用的系统类型无关，它们的顺序根据字节顺序交换。

# javascript - 如何将数据集传递给对象

> ID：15442537
> 
> 赞同：0
> 
> 时间：2013-03-15T21:40:15.520
> 
> 标签：javascript, jquery

我有一个名为 arr 的对象，我想向它添加一个数据集，这是我到目前为止的代码。

```
 arr = { date:'222222' } 

  lines = [
      { line1:'line1' , name:'paul' } ,
      { line2:'line2' , name:'john' } ,
      ]

  arr.push( lines ) 
```

我想将 arr 发送到车把，但需要添加到 arr 的行。

我想结束

```
 arr = { date : '222222' ,
              lines: [   
                { line1:'line1' , name:'paul' } ,
                { line2:'line2' , name:'john' } 
                ],
               more etc: 'more vars' 
             } 
```

但是使用推送并没有这样做，任何人都可以告诉我我做错了什么，任何帮助表示赞赏！， 谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T21:42:04.697

```
 arr.lines =  [{ line1:'line1' , name:'paul' },{ line2:'line2' , name:'john' }] 
```

JS 中的对象是可变的，因此您可以动态地为它们分配新成员。你也可以这样做；

```
arr.moreVars = 1234; 
arr.moreVars2 = ['hi', 'bye']; 
```

此外，推送与数组有关。您正在对对象文字进行操作，这就是 push 不起作用的原因。 [http://www.w3schools.com/jsref/jsref_push.asp](http://www.w3schools.com/jsref/jsref_push.asp)

这里还有一条评论，因为您正在对对象字面量进行操作，所以您可能会通过将其命名为“arr”来混淆自己（或必须维护您的代码的其他人）。命名变量是一种很好的做法，以便它们的名称描述它们是什么。举个例子：

```
function Person(name, age){
this.myName = name; 
this.myAge = age;
}

var dog = new Person('bob', 31); 
```

稍后在代码中，您可能会尝试对这个变量执行与狗相关的事情。

# c# - XAML/C# - 绑定属性不会被调用

> ID：15442541
> 
> 赞同：0
> 
> 时间：2013-03-15T21:40:24.093
> 
> 标签：c#, wpf, xaml, data-binding

不知道为什么会这样...

为了清楚起见，我正在简化我的问题。我有两个参与数据绑定的变量。一个变量可以很好地获取，但另一个变量没有获取。

示例.xaml.cs：

```
public partial class Example : UserControl
{
    private string _name;
    private string _area;
    private AppClass _app;

    public Example(string name, AppClass app)
    {
        InitializeComponent();
        _name = name;
        _app = app;
        this.DataContext = this;
        InitializeData();
    }

    private void InitializeData()
    {
        if (_app != null)
        {
            _area = _app.GetArea();
        }
    }

    public string Name
    {
        get { return _name; }
        set { _name = value; }
    }

    public string Area
    {
        get { return _area; }
        set { _area = value; }
    }
} 
```

还有我的 Example.xaml（只是感兴趣的行）：

```
<TextBlock Grid.Row='0' Grid.Column ='0' Padding='5,0,0,0' Background='LightBlue' Text='Exchanger'/>
<TextBlock Grid.Row='0' Grid.Column ='1' Background='LightBlue' Text="{Binding Name}" TextAlignment='Center'/>

<TextBlock Grid.Row='2' Grid.Column ='0' Padding='5,0,0,0' Background='LightCyan' Text='Area'/>
<TextBlock Grid.Row='2' Grid.Column ='1' Background='LightCyan' Text="{Binding Area}" TextAlignment='Center'/> 
```

有趣的是，`Area`被称为罚款，但`Name`没有。`Name`我在and的 getter 上放了一个断点`Area`，它在`Area`but not上中断`Name`。我很困惑...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:44:59.967

该`Name`属性在 中定义`FrameworkElement`。将属性名称更改为其他名称。

此外，UI 不是存储数据的正确位置。与其这样做，不如创建一个适当的 ViewModel 来保存您的数据并确保您的用户控件绑定到该 ViewModel。

# php - 向用户显示消息的功能

> ID：15442543
> 
> 赞同：-2
> 
> 时间：2013-03-15T21:40:25.710
> 
> 标签：php

我刚刚遇到一个用于向用户显示错误消息的函数，其中有一部分我不明白。这里是函数的 ID。

```
public function display(){
    echo "<div class=\"flash " . $this->type . "\">". $this->$msg ."</div>";
} 
```

有人可以向我解释这里的目的`"\"`是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:43:58.870

\ 是一个转义字符。它用于确保显示其他双引号内的双引号**"**。另一种编写方式是：

```
public function display(){
    echo '<div class="flash ' . $this->type . '">'. $this->$msg .'</div>';
} 
```

我认为上面的内容更具可读性。每当我需要实际输出双引号时，我将其放在单引号字符串中。但是，您需要阅读 PHP 中的单引号字符串和双引号字符串之间的差异：[http://www.php.net/manual/en/language.types.string.php#language。 types.string.syntax.double](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T21:47:19.870

正如弗雷德所说，它是一个转义字符，允许您将字符作为引号等。

# c++ - 定义命名空间::int 类

> ID：15442545
> 
> 赞同：1
> 
> 时间：2013-03-15T21:40:31.503
> 
> 标签：c++, oop, namespaces

我有点希望命名空间的使用将允许我用已经存在的类的名称定义类 - 所以命名空间将是区分它们的方法。我寻求这个是因为我有一些数据类型的服务器协议，所以我需要实现它们的类，并将它们转换为字节。
这就是我所做的，它产生了错误：

```
#ifndef _PACKET_DATA_TYPES
#define _PACKET_DATA_TYPES
namespace mcp_t {
    class mcp_t::int {  //ERROR: expected an identifier

    }
}
#endif 
```

如果这是不可能的，命名空间在这里似乎有点没用——`mcp_int`无论如何我都将被迫使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T21:41:46.863

`int`是关键字，并且关键字不能用于命名用户定义的类型（即使在命名空间内）。

恐怕您必须将您的类型称为`int`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T21:41:43.460

在提供类的定义时，不应完全限定类的名称，并且不应使用关键字作为类名：

```
namespace mcp_t {
    class my_int {
        // ...
    };
}

mcp_t::my_int x; 
```

# java - 在 HTTP URL 连接中获取错误

> ID：15442546
> 
> 赞同：0
> 
> 时间：2013-03-15T21:40:36.507
> 
> 标签：java, http, url, client

我正在为我的学校申请一个应用程序，我想显示来自网站的新闻，所以我必须在我的应用程序中获取源代码。这是我从网站获取 Html- 源代码的代码：

```
public String getHTML(String urlToRead) {
    URL url;
    HttpURLConnection conn;
    BufferedReader rd;
    String line;
    String result = "";
    try {
        url = new URL(urlToRead);
        conn = (HttpURLConnection) url.openConnection();
        conn.setRequestMethod("GET");
        rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        while ((line = rd.readLine()) != null) {
            result += line;
        }
        rd.close();
    } catch (Exception e) {
        result += e.toString();
    }
    return result;
} 
```

如果我有互联网连接，它工作正常，但如果没有连接，应用程序崩溃。如何在应用程序中显示错误，如果没有连接到 Internet，而不会崩溃？（对不起我的英语，我是来自德国的学生......）

谁能帮我？

谢谢

乔纳森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T22:23:41.223

您需要捕获 UnknownHostException：

同样，我会将您的方法更改为仅从连接返回 InputStream 并处理与之相关的所有异常。然后才尝试读取或解析它或用它做任何其他事情。您可以获取 errorInputStream 并将对象状态更改为错误（如果有）。你可以用同样的方式解析它，只是做不同的逻辑。

我会有更多类似的东西：

```
public class TestHTTPConnection {

    boolean error = false;

    public InputStream getContent(URL urlToRead) throws IOException {
        InputStream result = null;
        error = false;
        HttpURLConnection conn = (HttpURLConnection) urlToRead.openConnection();
        try {
            conn.setRequestMethod("GET");
            result = conn.getInputStream();
        } catch (UnknownHostException e) {
            error = true;
            result = null;
            System.out.println("Check Internet Connection!!!");
        } catch (Exception ex) {
            ex.printStackTrace();
            error = true;
            result = conn.getErrorStream();
        }
        return result;
    }

    public boolean isError() {
        return error;
    }

    public static void main(String[] args) {
        TestHTTPConnection test = new TestHTTPConnection();
        InputStream inputStream = null;
        try {
            inputStream = test.getContent(new URL("https://news.google.com/"));
            if (inputStream != null) {
                BufferedReader rd = new BufferedReader(new InputStreamReader(
                        inputStream));
                StringBuilder data = new StringBuilder();
                String line;
                while ((line = rd.readLine()) != null) {
                    data.append(line);
                    data.append('\n');
                }
                System.out.println(data);
                rd.close();
            }
        } catch (MalformedURLException e) {
            System.out.println("Check URL!!!");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

我希望它会对您有所帮助，并祝您的项目好运。

# jquery - jQuery backstretch 幻灯片无法正常工作

> ID：15442547
> 
> 赞同：0
> 
> 时间：2013-03-15T21:40:37.800
> 
> 标签：jquery, jquery-backstretch

我试图让 jquery backstretch 在幻灯片中进行。到目前为止，我对该页面的代码是直接从 backstretch 演示页面复制的：[http://srobbin.com/demos/jquery-backstretch/examples/slideshow.html](http://srobbin.com/demos/jquery-backstretch/examples/slideshow.html)

职责是页面非常简单，到目前为止我的代码如下所示：

```
<head>
<title>Coconut Hotel Ecuador</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>

        <script src="plugins/srobbin-jquery-backstretch-14ce02f/lib/jquery.min.js"></script>
        <script src="plugins/srobbin-jquery-backstretch-14ce02f/jquery.backstretch.min.js"></script>
            <script>
                    $.backstretch(["beach.jpg", 
                    "swing.jpg"]);
                </script> 
```

我已经尝试过有和没有持续时间和褪色但没有快乐。此外，仅使用一个图像，它就可以正常工作。不止一个，它只是一个白色背景。看着萤火虫我得到这个错误：

`<img style="position: absolute; display: none; margin: 0px; padding: 0px; border: medium none; z-index: -999999;" src="beach.jpg,swing.jpg">`

显然找不到图像源。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T11:53:05.647

我遇到了同样的问题，并且能够通过下载最新版本的插件文件（2.0.4）来修复它。 [你可以在 Github 上获得它。](https://github.com/srobbin/jquery-backstretch)

# javascript - 'Sys' 未定义 - Ajax - 主页面和内容页面 ASP.NET 4.0

> ID：15442548
> 
> 赞同：4
> 
> 时间：2013-03-15T21:40:39.320
> 
> 标签：javascript, jquery, asp.net, ajax

我已经有这个问题很长一段时间了，并尝试了各种解决方案，用各种标签编辑 Webconfig。

我在我的网页上使用更新面板、计时器和 AJAX。（会不会是 AJAX 引发错误？）

我真的不知道如何定义问题，因为我真的不知道在哪里追踪它。

我已经在母版页的主体上放置了一个 onload（不知道这是否正确） 这是一些标记代码和我认为会引发错误的 Javascript 代码。

母版：

```
<!DOCTYPE html>
<html lang="en">
<head runat="server">
    <meta charset="utf-8" />
    <title><%: Page.Title %> - </title>
    <link href="~/Content/Site.css" rel="stylesheet" /> 
    <link href="~/Content/BarChart.css" rel="stylesheet" />
    <link href="favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <asp:PlaceHolder runat="server">        
        <script src="<%: ResolveUrl("~/Scripts/_references.js") %>"></script>
        <script src="<%: ResolveUrl("~/Scripts/modernizr-2.5.3.js") %>"></script>
        <script src="<%: ResolveUrl("~/Scripts/jquery-1.7.1.js") %>"></script>
        <script src="<%: ResolveUrl("~/Scripts/jquery-1.7.1.min.js") %>"></script>
        <script src="<%: ResolveUrl("~/Scripts/jquery-ui-1.8.20.js") %>"></script>
        <script src="<%: ResolveUrl("~/Scripts/jquery-ui-1.8.20.min.js") %>"></script>
        <script src="<%: ResolveUrl("~/Scripts/ButtonManager.js") %>"></script>
        <script src="<%: ResolveUrl("~/Scripts/BarChart.js") %>"></script>
    </asp:PlaceHolder>
    <meta name="viewport" content="width=device-width" />
    <asp:ContentPlaceHolder runat="server" ID="HeadContent" />
</head>
<body >
    <form runat="server">
    <asp:ScriptManager runat="server">
        <Scripts>
            <asp:ScriptReference Name="jquery" />
            <asp:ScriptReference Name="jquery.ui.combined" />
        </Scripts>
    </asp:ScriptManager>
    <header>
        <div class="content-wrapper">
            <div class="float-left">
                    <asp:ImageButton ID="Logo" cssclass="site-title" runat="server" PostBackUrl="~/" ImageUrl="~/Images/Logo.png" />
            </div>
            <div class="float-right">
                <section id="login">
                    <asp:LoginView runat="server" ViewStateMode="Disabled">
                        <AnonymousTemplate>
                            <ul>
                                <li><a id="registerLink" runat="server" href="~/Account/Register.aspx">Register</a></li>
                                <li><a id="loginLink" runat="server" href="~/Account/Login.aspx">Log in</a></li>
                            </ul>
                        </AnonymousTemplate>
                        <LoggedInTemplate>
                            <p>
                                Hello, <a runat="server" class="username" href="~/Account/Manage.aspx" title="Manage your account">
                                    <asp:LoginName runat="server" CssClass="username" />
                                </a>!
                                <asp:LoginStatus runat="server" LogoutAction="Redirect" LogoutText="Log off" LogoutPageUrl="~/" />
                            </p>
                        </LoggedInTemplate>
                    </asp:LoginView>
                </section>
                <nav>
                    <ul id="menu">
                        <li><a runat="server" href="~/">Home</a></li>
                        <li><a runat="server" href="~/Barchart.aspx">About</a></li>
                        <li><a runat="server" href="~/Contact.aspx">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
    <div id="body">
        <asp:ContentPlaceHolder runat="server" ID="FeaturedContent" />
        <section class="content-wrapper main-content clear-fix">
            <asp:ContentPlaceHolder runat="server" ID="MainContent" />            
        </section>
    </div>
    <footer>
        <div class="content-wrapper">
            <div class="float-left">
                <p>&copy; <%: DateTime.Now.Year %> - My ASP.NET Application</p>
            </div>
        </div>
    </footer>  
    </form>
</body>
</html> 
```

内容页：

```
<asp:Content runat="server" ID="FeaturedContent" ContentPlaceHolderID="FeaturedContent">
</asp:Content>
<asp:Content runat="server" ID="BodyContentHome" ContentPlaceHolderID="MainContent" >
    <asp:Panel ID="UpdatepanelWrapper" CssClass="Updatepanelwrapper" runat="server">
        <asp:UpdatePanel ID="UpdatePanel1" runat="server" >
            <ContentTemplate>
                <asp:PlaceHolder runat="server" ID="WholeWrapper">

                    <asp:PlaceHolder runat="server" ID="QuestionWrapper">
                        <asp:PlaceHolder runat="server" ID="LabelQuestion"></asp:PlaceHolder>
                        <asp:PlaceHolder runat="server" ID="Question"></asp:PlaceHolder>                        
                    </asp:PlaceHolder>
                </asp:PlaceHolder>
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="btnAdd" EventName="Click" />
                <asp:AsyncPostBackTrigger ControlID="btnDelete" EventName="Click" />
            </Triggers>

        </asp:UpdatePanel>    
        <asp:Panel ID="ButtonPanel" CssClass="ButtonPanel" runat="server">
            <asp:ImageButton ID="btnDelete" runat="server" ImageUrl="~/Images/Deleteicon.png" CssClass="DeleteButtonHidden" OnClientClick="btnDelete_Click" />
            <asp:ImageButton ID="btnAdd" runat="server" ImageUrl="~/Images/Addicon.png" CssClass="AddButtonMoreMargin" OnClientClick="btnAddQuestion_Click" />
        </asp:Panel>
        </asp:Panel>  
    <asp:Button ID="btnSendQuestions" runat="server" Text="Skapa Föreläsning och frågor" OnClick="btnSendQuestions_Click" ValidationGroup="QuestionGroup" />

</asp:Content> 
```

JAVASCRIPT代码：

```
if (window.addEventListener) window.addEventListener("load", load(), true);
else window.onload = load();

function load() {
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);
}

function EndRequestHandler(sender, args) {
// NOT IMPORTANT
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T22:57:11.570

我刚刚解决了这个问题。我认为。我知道该函数是在构建 DOM 之前运行的。

所以我就这样做了

```
$(document).ready(function () {
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);
}); 
```

一个问题仍然存在。当我点击 Imagebutton btnAdd 控制台说：

```
Uncaught ReferenceError: btnAddQuestion_Click is not defined
onclick 
```

这将我引导到编写此 ImageButton 的代码行。

Internet Explorer 根本不喜欢这样。但即使错误消息出现在开发控制台中，其他浏览器也会像什么都没有一样继续进行。

按钮功能适用于。唯一的问题是错误。

编辑：这已经解决了。我正在使用“OnClientClick”。在图像按钮上。我将其更改为 OnClick 并解决了此问题。我不知道这两者之间的区别，但只要它有效，我就很高兴。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-19T18:14:16.467

您需要做的就是`EnableCdn="true"`在脚本管理器中进行设置，如下所示：

```
<asp:ScriptManager ID="ScriptManager1" runat="server" EnableCdn="true" /> 
```

基本上，由于`Sys`某种原因不会下载该库，如果您设置`EnableCdn="true"`它将使用 Microsoft 的内容交付网络 (CDN) 下载您需要的脚本，包括该`Sys`库。

[我在这篇](https://stackoverflow.com/questions/75322/sys-is-undefined/46821137#46821137)文章中有更详细的解释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-30T00:43:44.810

在我的情况下，我发现罪魁祸首是由于在函数/方法 OnPreRenderComplete 的覆盖版本中缺少对 MyBase.OnPreRenderComplete(e) 的调用引起的。

通过包括对 MyBase.OnPreRenderComplete(e) 的调用，一切正常。如果缺少对 MyBase.OnPreRenderComplete(e) 的调用，则会收到错误“Uncaught ReferenceError: Sys is not defined”，并且许多事情都无法正常工作。

Protected Overrides Sub OnPreRenderComplete(ByVal e As EventArgs) 'MyBase.OnPreRenderComplete(e) ... End Sub

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-15T12:24:52.787

对于 asp.net 页面

只需在页面上添加 Scriptmanager。

如何添加转到工具栏（Visual Studio 左侧）--> AJAX Extensions --> Scriptmanager --> 双击或拖放

:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-21T14:19:48.033

就我而言，问题是我在部分回发后放置了以下代码以保留 gridview 表头：

```
protected override void OnPreRenderComplete(EventArgs e)
{
    if (grv.Rows.Count > 0)
    {
        grv.HeaderRow.TableSection = TableRowSection.TableHeader;
    }
} 
```

删除此代码停止了该问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-09T20:37:29.207

另一种解决方案是将脚本标记放在 web 表单或母版页底部的 html 关闭标记之前：

```
<html>
   <body>
    .
    .
    .
   </body>
   <script type="text/javascript" src="/scripts/script.js"></script>
</html> 
```

对于使用母版页的网络表单，您必须将脚本标记放在结束`</asp:Content>`标记之前。

# android - Webview 不是每次都加载

> ID：15442550
> 
> 赞同：2
> 
> 时间：2013-03-15T21:40:43.267
> 
> 标签：android, xamarin.android, android-webview

我有一个 Webview，它必须从 assets 文件夹中加载一个静态网页。该网页包含一个完美运行的javascript函数。问题是，当活动启动时，网页永远不会出现（而且经常出现。启动活动也包含 webview）

在 webview 确实加载时，您导航到另一个活动然后返回，此时 webview 不会重新绘制

```
protected override void OnCreate(Bundle bundle)
{
    base.OnCreate(bundle);

    actionBar.AddView(mainActionBar);
    formDialog.AddView(LayoutInflater.Inflate(Resource.Layout.googleGraphInWebview, null));

    formDialog.SetMinimumHeight(400);

    graph = FindViewById<WebView>(Resource.Id.graphView);
    list = FindViewById<ListView>(Resource.Id.AppointmentList); // get reference to the ListView in the layout

    appointments.Add(new AppointmentListItem("Appointment: Appointment with Spur Cresta", "Remember to meet with Mike regarding the cost sales!", Resource.Drawable.Icon));
    appointments.Add(new AppointmentListItem("Appointment: Jone's laundry needs to be collected", "Address: 12 Marry Street Roodepoort", Resource.Drawable.Icon));

    list.Adapter = new AppointmentListViewAdapter(this, appointments);
    list.ItemClick += AppointmentListClick;  // to be defined

    LinearLayout sideWidget = FindViewById<LinearLayout>(Resource.Id.SideWidget);
    sideWidget = FindViewById<LinearLayout>(Resource.Id.SideWidget);
    sideWidget.AddView(LayoutInflater.Inflate(Resource.Layout.LineItem, null));

    graph.Settings.JavaScriptEnabled = true;
    graph.SetWebViewClient(new webView(formDialog));
    graph.LoadUrl("file:///android_asset/graph.html");

} 
```

你能帮忙吗？

一个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-21T20:04:03.937

所以真正的问题是我不仅需要做上述所有事情，还要特别添加

```
graph.SetWebChromeClient(new WebChromeClient());
graph.SetWebViewClient(new webView(formDialog)); 
```

SetWebChromeClient **(new WebChromeClient());** 非常重要。

在我添加此行之后，每次加载页面。瞬间

一个

# visual-c++ - 在 Windows 7 命令行中使用 OpenCV 2.4 编译应用程序

> ID：15442551
> 
> 赞同：0
> 
> 时间：2013-03-15T21:40:54.037
> 
> 标签：visual-c++, opencv, windows-7-x64

我下载 OpenCV 2.4 解压到`C:\OpenCV2.4`. 添加了一个系统变量`OPENCV_DIR=C:\OpenCV2.4\build`并将以下内容添加到 PATH`%OPENCV_DIR%\x64\vc10\bin`

我的代码看起来像

```
#include <iostream>
#include <opencv\cv.h>
#include <opencv\highgui.h>

int main(){
   IplImage *img = cvLoadImage("imagen.jpg");
   if(!img){
      std::cout << "File not found\n" << std::endl;
   }
} 
```

现在从命令行工具我尝试了类似的东西：

`cl testCV.cpp /IC:\OpenCV2.4\build\include`

并得到以下错误：

`C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\INCLUDE\intrin.h(26) : fatal error C1083: Cannot open include file: 'ammintrin.h': No such file or directory`

如何用 cl.exe 编译这个程序？我无法做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:02:43.673

请安装[SP1](http://blogs.msdn.com/b/vcblog/archive/2011/03/31/10148110.aspx)，这应该可以连接 :)

也请看看这个不错的[博客](http://wishmesh.com/2011/04/fatal-error-c1083-cannot-open-include-file-ammintrin-h-no-such-file-or-directory/)

# jquery - 如何使用 jquery 向上移动 DOM

> ID：15442552
> 
> 赞同：-1
> 
> 时间：2013-03-15T21:41:05.513
> 
> 标签：jquery, html, css

我的 jQuery 知识非常低，所以我有一个问题..

`div`我想知道你是否可以在 jQuery 的帮助下移动一些选择器。

以下是我当前的 DOM

```
<div class="header">
    <div class="logo">
        ...
    </div> <!-- end .logo -->

    <div class="menu">
        ...
    </div> <!-- end .menu -->
</div> 
```

但我想将`.menu`div 容器移到上面的`.logo`div容器之上

```
<div class="header">
    <div class="menu">
        ...
    </div> <!-- end .menu -->

    <div class="logo">
        ...
    </div> <!-- end .logo -->
</div> 
```

有没有可能在jQuery的帮助下做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:43:11.870

有一百种方法可以做到这一点。这是我最易读的一个：

```
$('.menu').insertBefore('.logo'); 
```

[**小提琴**](http://jsfiddle.net/7XaHb/)

或者，如果`.menu`应该始终是`.header`独立于的第一个孩子`.logo`，您可以使用：

```
$('.menu').prependTo('.header'); 
```

[**小提琴**](http://jsfiddle.net/7XaHb/3/)

# python - 如何将两组列表组合成字典

> ID：15442554
> 
> 赞同：2
> 
> 时间：2013-03-15T21:41:25.180
> 
> 标签：python, dictionary

我有两组具有相似数据的列表，我需要将它们组合成字典。该列表必须包含两组信息，在对方有“-”的地方填写。到目前为止，这就是我所拥有的..

```
aList = [['Last Name', 'First Name', '2000', '2012'], 
       ['Roberts', 'Gloria', '-', '123000'], 
       ['Arreguin', 'Jeffrey', '81000', '-'], 
       ['Myers', 'George', '-', '86000'], 
       ['Willis', 'Mabel', '112000', '-'], 
       ['Oneal', 'Kevin', '96000', '77000'], 
       ['Paz', 'Barbara', '-', '77000'], 
       ['Franklin', 'Claude', '94000', '-'], 
       ['Bradley', 'Shannon', '89000', '-'], 
       ['Fix', 'Anna', '76000', '126000'], 
       ['Meyer', 'Loretta', '-', '116000'], 
       ['Daniels', 'Christina', '85000', '-'], 
       ['Graham', 'Veronica', '-', '136000']]

newList = [['Last Name', 'First Name', '2000', '2012'], 
       ['Meyer', 'Loretta', '123000', '-'], 
       ['Arreguin', 'Jeffrey', '81000', '-'], 
       ['Mielke', 'George', '137000', '-'], 
       ['Thomas', 'Lewis', '132000', '-'], 
       ['Harper', 'Crystal', '80000', '-'], 
       ['Young', 'Gary', '-', '94000'], 
       ['Franklin', 'Claude', '94000', '-'], 
       ['Hedrick', 'James', '-', '105000'], 
       ['Bradley', 'Shannon', '89000', '-'], 
       ['Thigpen', 'Michael', '79000', '-'], 
       ['Willis', 'Mabel', '112000', '-'], 
       ['Hullinger', 'Molly', '70000', '-'], 
       ['Myers', 'George', '-', '86000'], 
       ['Paz', 'Barbara', '-', '77000'], 
       ['Edwards', 'Kathryn', '117000', '97000'], 
       ['Roberts', 'Gloria', '-', '123000'], 
       ['Daniels', 'Christina', '-', '137000'], 
       ['Graham', 'Veronica', '-', '136000']]

def mergeData(newList,aList):
    aDict={}
    for item in range(1,len(newList)):
        key=(newList[item][0],newList[item][1])
        value=(newList[item][2],newList[item][3])
        aDict[key]=value

    for item in range(1,len(aList)):
        #stuck here not sure if im going right way with this 

print(aDict) 
```

这是一个示例

```
newList= ['Meyer', 'Loretta', '123000', '-']
aList=['Meyer', 'Loretta', '-', '116000'] 
```

所以组合字典应该是

```
{(‘Meyer’, ‘Loretta’): (‘123000’,’116000’)} 
```

对于这个条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:45:09.927

只需遍历第一个列表以构建具有 dict 理解的字典：

```
aDict = {(e[0], e[1]): (e[2], e[3]) for e in aList[1:]} 
```

接下来循环另一个，使用辅助函数根据`-`值选择一个或另一个：

```
def pick(vals):
    return vals[1] if vals[0] == '-' else vals[0]

for e in newList:
    key = (e[0], e[1])
    existing = aDict.get(key, ('-', '-'))
    value = (e[2], e[3])
    aDict[key] = tuple(map(pick, zip(existing, value))) 
```

对于您的第一个输入，结果是：

```
{('Arreguin', 'Jeffrey'): ('81000', '-'),
 ('Bradley', 'Shannon'): ('89000', '-'),
 ('Daniels', 'Christina'): ('85000', '137000'),
 ('Edwards', 'Kathryn'): ('117000', '97000'),
 ('Fix', 'Anna'): ('76000', '126000'),
 ('Franklin', 'Claude'): ('94000', '-'),
 ('Graham', 'Veronica'): ('-', '136000'),
 ('Harper', 'Crystal'): ('80000', '-'),
 ('Hedrick', 'James'): ('-', '105000'),
 ('Hullinger', 'Molly'): ('70000', '-'),
 ('Last Name', 'First Name'): ('2000', '2012'),
 ('Meyer', 'Loretta'): ('123000', '116000'),
 ('Mielke', 'George'): ('137000', '-'),
 ('Myers', 'George'): ('-', '86000'),
 ('Oneal', 'Kevin'): ('96000', '77000'),
 ('Paz', 'Barbara'): ('-', '77000'),
 ('Roberts', 'Gloria'): ('-', '123000'),
 ('Thigpen', 'Michael'): ('79000', '-'),
 ('Thomas', 'Lewis'): ('132000', '-'),
 ('Willis', 'Mabel'): ('112000', '-'),
 ('Young', 'Gary'): ('-', '94000')} 
```

在您的合并功能中再次组合在一起：

```
def pick(vals):
    return vals[1] if vals[0] == '-' else vals[0]

def mergeData(newList, aList):
    aDict = {(e[0], e[1]): (e[2], e[3]) for e in aList[1:]}

    for e in newList:
        key = (e[0], e[1])
        existing = aDict.get(key, ('-', '-'))
        value = (e[2], e[3])
        aDict[key] = tuple(map(pick, zip(existing, value)))

    return aDict 
```

# c# - SqlDataAdapter 和数据库的事务日志已满

> ID：15442561
> 
> 赞同：0
> 
> 时间：2013-03-15T21:42:10.583
> 
> 标签：c#, sql-server, sql-server-2008-r2

我正在尝试将大量数据更新/插入数据库

我正在使用以下代码：

```
using (SqlCommand command = connection.CreateCommand())
            {
                command.CommandType = CommandType.StoredProcedure;
                command.CommandText = storedProcedureName;
                command.UpdatedRowSource = UpdateRowSource.None;

                foreach (SqlParameter sqlParameter in sqlParameters)
                    command.Parameters.Add(sqlParameter);

                var adapter = new SqlDataAdapter();
                adapter.InsertCommand = command;
                adapter.UpdateBatchSize = batchSize;

                return adapter.Update(table);
            } 
```

我正在使用以下存储过程：

```
 @shareAdGroupId int,
@groupPermissionName varchar(100)

AS
BEGIN transaction
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.@permissionTypeName

    declare @permissionId int
    EXEC  [dbo].[PROC_UPSERT_PERMISSION] @permissionName = @groupPermissionName,  @permissionId = @permissionId OUTPUT

    SET NOCOUNT ON;
        BEGIN TRY
        begin
            INSERT INTO [dbo].SHARE_AD_GROUP_PERMISSION
           (SHARE_AD_GROUP_ID,PERMISSION_ID)
        VALUES
           (@shareAdGroupId,@permissionId)
        end
    END TRY
    BEGIN CATCH
        --RETURN ERROR_MESSAGE() 
    END CATCH
commit transaction 
```

插入/更新随机数的记录后，我收到错误：

> *System.Data.SqlClient.SqlException：数据库“dbName”的事务日志已满。要找出日志中的空间不能被重用的原因，请参阅 sys.databases 中的 log_reuse_wait_desc 列*

我知道这个问题已经被问过很多次了，但是我搜索了一下我更新/插入的方式是否导致了这个问题。

由于我不是 DBA，而且我对 db 服务器没有任何权限，因此我无法修改备份日志，但我并不关心问题是否仅此而已。然后这取决于dba来解决它。

我的问题是，在编码部分，我做错了什么，我能以某种方式改进吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:47:12.807

不，这个错误只能在 DBA 端修复，所以没有权限你什么也做不了。磁盘所在的卷空间不足，日志文件已达到其配额，或者日志文件的自动增长设置不正确。

# encryption - 您如何获取 zip 文件的密码哈希？

> ID：15442565
> 
> 赞同：15
> 
> 时间：2013-03-15T21:42:40.237
> 
> 标签：encryption, hash, terminal, passwords

我正在[捕获标志](https://en.wikipedia.org/wiki/Wargame_(hacking))样本，他们给了我文件的哈希值。我通过[John The Ripper](https://en.wikipedia.org/wiki/John_the_Ripper)运行它并获得了样本的密码。

问题是，哈希是给我的。如果没有给出该文件的哈希值，有没有办法找到它？

破解密码需要解决两点：哈希和加密算法。

我一直在练习使用受密码保护的 zip 文件，所以我认为它使用的是 zip 2.0 或其他东西或某种 AES，我可以在 Google 的帮助下解决这个问题。

但是，我无法找到的是如何访问该散列数据的 zip 文件的元数据。由于它是一个标准，因此在存储密码时，压缩某些东西不需要在其中包含算法。但是，需要有某种类型的哈希。

有谁知道，通过这个受密码保护的 zip 文件示例，这是如何完成的？

我现在正在使用 MacBook Pro。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-03-21T04:59:01.070

密码哈希**不会**从文件中提取。开膛手约翰 (JtR)**并没有真正**做到这一点。您可以下载 JtR 的代码以了解它是如何完成的。这是一篇关于如何使用 zip2john 和 rar2john 获取 .zip 和 .rar 文件的所谓“非哈希”信息的小文章：[http ://www.cybercrimetech.com/2014/07/how-to-cracking- zip-and-rar-protected.html](http://www.cybercrimetech.com/2014/07/how-to-cracking-zip-and-rar-protected.html)

为了纠正用词不当，JtR 实际上并没有从文件中“检索散列”。它从文件中提取某些信息，例如，如 rar2john 代码中所述：

```
输出行格式：
 *
 * 对于使用“rar -hp ...”选项加密的文件，type = 0
 * archive_name:$RAR3$\*type\*hex(salt)\*hex(partial-file-contents):type::
       ::档案名称
 *
 * 对于使用“rar -p ...”选项加密的文件，type = 1
 * archive_name:$RAR3$\*type\*hex(salt)\*hex(crc)\*PACK_SIZE\*UNP_SIZE\*0\*
       archive_name\*offset-for-ciphertext\*method:type::file_name
 *
 * 或者
 *
 * 存档名称：$RAR3$\*type\*hex(salt)\*hex(crc)\*PACK_SIZE\*UNP_SIZE\*1\*
       十六进制（完整加密文件）\*方法：类型：：文件名

```

因此，如上所示，“密码哈希”没有被提取。此外，完全不相信该文件是“完全”加密的（正如其他回答类似问题的人所建议的那样）。取而代之的是，检索关键的未加密和加密文件项（例如盐）以生成“非散列”。JtR 使用这些项目和各种密码猜测来测试解密。*它使用 zip 或 rar 密码散列生成函数从猜测*中创建散列，该散列又用于生成加密密钥值。然后使用生成的密钥值对加密文件的一小部分、提取的和明确定义的部分进行测试。

因此，虽然 JtR 不是“提取密码哈希”，可以发送到任何 ol'password-hash-checker-rainbow-table-lookup-thingy，但它正在做下一件最好的事情——提取关键的破解信息。破解的步骤基本上是：1）从密码猜测中生成哈希，2）添加一些额外的步骤来检查解密是成功还是失败（很多失败），以及 3）重复。rar 破解如此困难的原因是每个 rar 文件使用不同的盐，更重要的是，在执行解密测试之前需要大量且可变的哈希迭代次数。较新的 zip 过程类似，但迭代不是可变的——我上次检查过——使它更容易一些。

**这是所问的“如何完成”的核心，答案是“你没有”在文件被破解之前获取一个 zip 文件的真实密码哈希。**

该问题的 CTF 练习中的示例具有误导性。给定的“散列”可能是为练习准备的简单密码散列，以简化任何 ol' 破解者对学生的破解过程，或者它可能是特定的 zip2john“非散列”，导致相当简单的密码JtR 猜测 - 短，常见，或两者兼而有之。提问者没有提供“哈希”或“哈希文件”来验证任何一种方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T22:01:57.963

为什么需要一个哈希？压缩文件被压缩然后加密。这不需要在文件中存储哈希，因为它不是在进行身份验证，而是在解密。唯一可能存储在文件中的是盐，具体取决于所使用的加密。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-03T09:13:37.857

尽管我不确定它是如何完成[的，但开膛手约翰](http://www.openwall.com/john/)(JtR) 有一个小可执行文件 (zip2john)，它可以从 zip 文件中创建散列。由于代码是开放的，您可以看看它是如何提取的。当然，这是假设文件是​​使用 PKZIP 加密加密的（例如，它不适用于 WinRar 创建的文件）。

我在使用 7zip 压缩的简单文件上进行了尝试，其中使用了简单的密码，并且配备了不错的 wordlist 的 JtR 在 ms 内破解了它。[这里](https://crackstation.net/buy-crackstation-wordlist-password-cracking-dictionary.htm)（可选）免费给出的单词表起到了作用。

干杯

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-04T16:31:01.887

John The Ripper 的主要开发人员之一阐明了破解档案密码的工作原理，特别是 pkzip2 档案。

这是我的询问和他们在[JtR 邮件列表](https://www.openwall.com/lists/john-users/2021/06/03/2)上的回复：

> 在 2021-06-03 10:28，Matthias Braun 写道：
> 
> > 在阅读了源文件（[https://github.com/openwall/john/blob/bleeding-jumbo/src/zip2john.c](https://github.com/openwall/john/blob/bleeding-jumbo/src/zip2john.c)）中对 zip2john 输出的描述后，这是我目前的假设：因为存档不包含用于加密的密码的哈希值，默认情况下，JtR 尝试使用一个单词列表来解密 zip2john 输出中 DA 位置存储的数据，对结果运行 CRC32 并将该校验和与存储在 CR 位置的校验和进行比较。
> > 
> > 但是在破解大文件密码的情况下，我预计解密需要相当长的时间，这使得每个密码的猜测成本很高。
> 
> 你基本上是对的。
> 
> > JtR如何破解pkzip2压缩包？
> 
> 首先，zip2john 只是简单地从存档中挑选最小的文件，以最大限度地减少工作量。有时虽然没有小文件。
> 
> 第二个技巧：pkzip 档案还包括每个文件的一小部分打包数据的另一个较小的校验和（仅 1 或 2 个字节）。如果不匹配，我们可以提前拒绝。但是如果它确实匹配（不幸的是，单字节校验和将在大约 256 例中的 1 例中*随机*匹配）我们必须对整个（可能很大）文件进行校验和。
> 
> 所以我们的第三个技巧是我们收集几个这样小的校验和（最多 8 个文件），并在继续计算整个文件的 CRC 之前要求它们全部匹配。如果文件数量较少，我们最终可能会少于 8 个。附带说明一下，理论上，一个存档中的文件可能使用不同的密码，这会使这个技巧无效（实际上我们可能会得到误报）。这是相当少见的，所以默认情况下我们假设所有人都有相同的密码。
> 
> 所以对我们来说最好的情况是一个包含 8 个或更多文件的存档，以及至少一个小文件。最坏的情况是存档只有一个巨大的文件。
> 
> 大酒瓶

# android - Android listview滚动缓慢，大尺寸位图图像

> ID：15442582
> 
> 赞同：0
> 
> 时间：2013-03-15T21:43:45.607
> 
> 标签：android, listview, scroll

我阅读了 facebook 开发者博客：[https ://www.facebook.com/notes/facebook-engineering/under-the-hood-rebuilding-facebook-for-android/10151189598933920](https://www.facebook.com/notes/facebook-engineering/under-the-hood-rebuilding-facebook-for-android/10151189598933920)

它说他们正在使用自定义 ListView Recycler 来加快滚动性能。目前，Facebook 原生 Android 应用在滚动和查看大图像方面运行良好。

我想知道如何编写自己的自定义 ListView Recycler？我正在使用 ViewHolder。

这是我的 ArrayAdapter：

```
public class CampusWallArrayAdapter extends ArrayAdapter<CampusWallModel> {
    private final List<CampusWallModel> list;

    class ViewHolder {
        public ImageView ivThumb;
        public TextView display_name;
        public ImageView **ivImage**;
        public ImageView ivImageBackground;
        public TextView time;
        public TextView message;
        public Button bComment;
        public Button bLike;
        public Button bMore;
        public ImageView ivRedDot;
        public ProgressBar pbLoading;
        public RelativeLayout bg;
    }

    public CampusWallArrayAdapter(Context context, List<CampusWallModel> list) {
        super(context, R.layout.campuswallrow, list);
        this.list = list;
    }

    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) v.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.campuswallrow, null);
            holder = new ViewHolder();
            holder.ivThumb = (ImageView) convertView.findViewById(R.id.ivThumb);
            holder.display_name = (TextView) convertView.findViewById(R.id.display_name);
            **holder.ivImage = (ImageView) convertView.findViewById(R.id.ivImage);**
            holder.ivImageBackground = (ImageView) convertView.findViewById(R.id.ivImageBackground);
            holder.time = (TextView) convertView.findViewById(R.id.time);
            holder.message = (TextView) convertView.findViewById(R.id.message);
            holder.bComment = (Button) convertView.findViewById(R.id.bComment);
            holder.bLike = (Button) convertView.findViewById(R.id.bLike);
            holder.bMore = (Button) convertView.findViewById(R.id.bMore);
            holder.ivRedDot = (ImageView) convertView.findViewById(R.id.ivRedDot);
            holder.pbLoading = (ProgressBar) convertView.findViewById(R.id.pbLoading);
            holder.bg = (RelativeLayout) convertView.findViewById(R.id.bg);

            convertView.setTag(holder);
        } else {
            // Get the ViewHolder back to get fast access to the TextView
            // and the ImageView.
            holder = (ViewHolder) convertView.getTag();
        }

        //final ViewHolder holder = (ViewHolder) rowView.getTag();

            holder.pbLoading.setVisibility(View.GONE);
            holder.ivThumb.setImageBitmap(null);
            holder.ivThumb.setImageDrawable(v.getResources().getDrawable(R.drawable.avatar));
            **holder.ivImage.setImageBitmap(null);**
            holder.ivImageBackground.setBackgroundDrawable(null);
            holder.time.setText("");
            holder.message.setText("");
            holder.bLike.setText("");
            holder.bComment.setText("");
            holder.bComment.setBackgroundResource(R.drawable.button_comment);
            holder.display_name.setText("");
            holder.bLike.setVisibility(View.VISIBLE);
            holder.bLike.setClickable(true);
            holder.bLike.setTextColor(getResources().getColorStateList(R.color.dimgrey3));
            holder.bLike.setBackgroundResource(R.drawable.button_like);
            holder.ivRedDot.setVisibility(View.GONE);
            holder.bMore.setVisibility(View.VISIBLE);

            if (list.get(position).display_name == null){
                holder.pbLoading.setVisibility(View.VISIBLE);
                holder.bLike.setVisibility(View.GONE);
                holder.bLike.setClickable(false);
                holder.bComment.setVisibility(View.GONE);
                holder.bComment.setClickable(false);
            } else {
                holder.bLike.setTypeface(Fonts.getOpenSansBold(v.getContext()));
                holder.bLike.setText(String.valueOf(list.get(position).likes));
                if (list.get(position).user_like == -1 || list.get(position).user_like == 0){
                    holder.bLike.setOnClickListener(new Button.OnClickListener() {
                        public void onClick(View v) {
                            list.get(position).likes++;
                            list.get(position).user_like = 1;
                            holder.bLike.setClickable(false);
                            holder.bLike.setText(String.valueOf(list.get(position).likes));
                            holder.bLike.setTextColor(getResources().getColorStateList(R.color.white1));
                            holder.bLike.setBackgroundResource(R.drawable.button_liked);
                            Log.i("like thread invalid", "yes");
                            listView.invalidateViews();

                            // ---------------------- new api for campus wall like ---------------------------------
                            new likeThread(list.get(position).school_thread_id).start();
                        }
                    }); 
                } else if (list.get(position).user_like == 1){
                    holder.bLike.setClickable(false);
                    holder.bLike.setTextColor(getResources().getColorStateList(R.color.white1));
                    holder.bLike.setBackgroundResource(R.drawable.button_liked);
                }

                if (list.get(position).thumb_bitmap != null){
                    holder.ivThumb.setImageDrawable(null);
                    holder.ivThumb.setImageBitmap(list.get(position).thumb_bitmap);

                    holder.ivThumb.setOnClickListener(new View.OnClickListener() {
                        public void onClick(View view) {
                            if (!list.get(position).is_anonymous){
                                Bundle extras = new Bundle();
                                extras.putInt("user_id", list.get(position).user_id);
                                Intent i = new Intent(v.getContext(), OthersProfile.class);
                                i.putExtras(extras);
                                startActivity(i);
                            }
                        }
                    });                 
                } 

                if (list.get(position).is_anonymous){
                    holder.display_name.setTextColor(getResources().getColorStateList(R.color.black1));
                } else {
                    holder.display_name.setTextColor(getResources().getColorStateList(R.color.blue0));
                }
                holder.display_name.setTypeface(Fonts.getOpenSansBold(v.getContext()));
                holder.display_name.setText(list.get(position).display_name);
                holder.display_name.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View view) {
                        if (!list.get(position).is_anonymous){
                            Bundle extras = new Bundle();
                            extras.putInt("user_id", list.get(position).user_id);
                            Intent i = new Intent(v.getContext(), OthersProfile.class);
                            i.putExtras(extras);
                            startActivity(i);
                        }
                    }
                }); 

                if (list.get(position).image_url != null){
                    holder.pbLoading.setVisibility(View.VISIBLE);

                    if (picWidth > 0){
                        int y = picWidth/2;
                        if (imageBg == null){
                            imageBg = new BitmapDrawable(getResources(), NinePatch.getNinePatch(R.drawable.backgroundimage, picWidth, y, v.getContext()));
                        }
                        holder.ivImageBackground.setBackgroundDrawable(imageBg);
                    }

                    if (list.get(position).bitmap != null){
                        if (picWidth > 0){
                            holder.pbLoading.setVisibility(View.GONE);
                            **holder.ivImage.setImageBitmap(list.get(position).RecBitmap);**

                            if (!list.get(position).loaded){
                                //holder.ivImage.startAnimation(AnimationUtils.loadAnimation(getApplicationContext(), R.anim.fade)); //Set animation to your ImageView
                                list.get(position).loaded = true;
                            }                           
                        }

                        holder.ivImage.setOnClickListener(new Button.OnClickListener() {
                            public void onClick(View v) {
                                //Log.i("getWidth", String.valueOf(list.get(position).bitmap.getWidth()) + "/" + String.valueOf((double) picWidth/list.get(position).bitmap.getWidth()));
                                OohlalaMain.tabs.setVisibility(View.GONE);
                                rlBigImage.setVisibility(View.VISIBLE);
                                //tvWords.setText(list.get(position).message);
                                if (list.get(position).bitmap != null){
                                    ivBigImage.setImageBitmap(Bitmap.createScaledBitmap(list.get(position).bitmap, picWidth, (int) (((double) picWidth/list.get(position).bitmap.getWidth())*list.get(position).bitmap.getHeight()), false));           
                                    rlBigImage.setOnClickListener(new Button.OnClickListener() {
                                        public void onClick(View v) {
                                            OohlalaMain.tabs.setVisibility(View.VISIBLE);
                                            rlBigImage.setVisibility(View.GONE);
                                        }
                                    });
                                    pbImageLoading.setVisibility(View.GONE);
                                }
                                /*
                                Bundle extras = new Bundle();
                                extras.putString("image_url", list.get(position).image_url);
                                extras.putString("image_words", list.get(position).message);
                                extras.putInt("picWidth", picWidth);
                                Intent i = new Intent(v.getContext(), CampusWallImage.class);
                                i.putExtras(extras);
                                startActivity(i);
                                */
                            }
                        }); 
                    } else {    
                        if (picWidth > 0){
                            list.get(position).loaded = false;
                        }
                    }
                } else {
                    holder.ivImageBackground.setBackgroundDrawable(null);
                }

                holder.time.setTypeface(Fonts.getOpenSansLightItalic(v.getContext()));
                holder.time.setText(list.get(position).added_time);
                holder.message.setTypeface(Fonts.getOpenSansRegular(v.getContext()));
                holder.message.setText(list.get(position).message);

                holder.bComment.setText(String.valueOf(list.get(position).comment_count));
                holder.bComment.setTypeface(Fonts.getOpenSansBold(v.getContext()));
                holder.bComment.setOnClickListener(new Button.OnClickListener() {
                    public void onClick(View v) {
                        Bundle extras = new Bundle();
                        extras.putInt("school_thread_id", Integer.parseInt(list.get(position).school_thread_id));
                        extras.putInt("thread_type", thread_type);
                        Intent i = new Intent(v.getContext(), CampusWallComment.class);
                        i.putExtras(extras);
                        startActivity(i);

                        if (list.get(position).num_unread_comments > 0){
                            list.get(position).num_unread_comments = 0;
                            holder.ivRedDot.setVisibility(View.GONE);
                            holder.bComment.setBackgroundResource(R.drawable.button_comment);
                        }
                    }
                }); 

                if (list.get(position).num_unread_comments > 0){
                    holder.bComment.setBackgroundResource(R.drawable.button_comment_unread);
                    holder.ivRedDot.setVisibility(View.VISIBLE);
                }

                //Log.i("display thread: ", rowView.toString());

                if (Profile.userId != list.get(position).user_id){
                    holder.bMore.setVisibility(View.GONE);
                }
                holder.bMore.setOnClickListener(new Button.OnClickListener() {
                    public void onClick(View v) {
                        if (Profile.userId == list.get(position).user_id){
                            showAlertDialog(list.get(position).school_thread_id);
                        }
                    }
                }); 

                holder.bg.setOnClickListener(new Button.OnClickListener() {
                    public void onClick(View v) {
                        Bundle extras = new Bundle();
                        extras.putInt("school_thread_id", Integer.parseInt(list.get(position).school_thread_id));
                        extras.putInt("thread_type", thread_type);
                        Intent i = new Intent(v.getContext(), CampusWallComment.class);
                        i.putExtras(extras);
                        startActivity(i);

                        if (list.get(position).num_unread_comments > 0){
                            list.get(position).num_unread_comments = 0;
                            holder.ivRedDot.setVisibility(View.GONE);
                            holder.bComment.setBackgroundResource(R.drawable.button_comment);
                        }
                    }
                }); 

            }

            return convertView;
    }

    public void showAlertDialog(final String thread_id) {
        // TODO Auto-generated method stub
        AlertDialog alert = new AlertDialog.Builder(v.getContext()).create();
        alert.setTitle(getString(R.string.Delete_Thread));
        alert.setMessage(getString(R.string.Warning_This_cannot_be_undone));
        alert.setButton(getString(R.string.No), new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
            }
        });
        alert.setButton2(getString(R.string.Yes), new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                RestClient result = null;
                try {
                    if (thread_type == 0){
                        result = new Rest.request().execute(Rest.CAMPUS_THREAD + thread_id, Rest.OSESS + Profile.sk, Rest.DELETE).get();
                    } else if (thread_type == 1){
                        result = new Rest.request().execute(Rest.GROUP_THREAD + thread_id, Rest.OSESS + Profile.sk, Rest.DELETE).get();
                    }
                } catch (InterruptedException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                } catch (ExecutionException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
                Log.i("delete thread", result.getResponse());

                if (result.getResponseCode() == 204){
                    Toast.makeText(v.getContext(), getString(R.string.The_thread_is_deleted), Toast.LENGTH_SHORT).show();
                    refreshAfterPost();
                }
            }
        });
        alert.show();
    }

} 
```

list.get(position).thumb_bitmap 和 list.get(position).RecBitmap 都是位图，第一个是较小的位图，第二个是 1024x1024 的大尺寸位图图像文件。

这是我上面 CampusWallArrayAdapter 的 xml 文件（campuswallrow）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/bg"
    android:paddingTop="10dp" 
    android:paddingBottom="5dp"
    android:paddingLeft="10dp"
    android:paddingRight="0dp"
    android:background="@drawable/listview_row_bg_state" >  

<ImageView
    android:id="@+id/ivThumb"
    android:layout_width="60dp"
    android:layout_height="60dp"
    android:adjustViewBounds="true" 
    android:scaleType="centerCrop"
    android:layout_marginRight="10dp"
    android:layout_marginBottom="10dp" />

<ImageView
    android:layout_width="60dp"
    android:layout_height="60dp"
    android:adjustViewBounds="true" 
    android:scaleType="centerCrop"
    android:layout_marginRight="10dp"
    android:layout_marginBottom="10dp"
    android:src="@drawable/avatarframe" />

<TextView
    android:id="@+id/display_name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="aa"
    android:textSize="16dp"
    android:textColor="@color/blue0"
    android:layout_toRightOf="@+id/ivThumb" >
</TextView>

<TextView
    android:id="@+id/message"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"   
    android:text="bb"
    android:textColor="@color/black"
    android:textSize="13dp"
    android:layout_marginRight="10dp"
    android:layout_toRightOf="@+id/ivThumb"
    android:layout_below="@+id/display_name" >
</TextView>

<TextView
    android:id="@+id/time"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="cc"
    android:textColor="@color/dimgrey3"
    android:textSize="13dp"
    android:layout_toRightOf="@+id/ivThumb"
    android:layout_below="@+id/message"
    android:paddingBottom="10dp" >
</TextView>

<ImageView
    android:id="@+id/ivImageBackground"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:scaleType="centerCrop"
    android:adjustViewBounds="true"
    android:layout_below="@+id/time"
    android:layout_marginRight="10dp"
    android:layout_marginBottom="5dp" >
</ImageView>

<ImageView
    **android:id="@+id/ivImage"**
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:scaleType="centerCrop"
    android:adjustViewBounds="true"
    android:layout_below="@+id/time"
    android:layout_marginTop="8dp"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="20dp" />

<ProgressBar
    android:id="@+id/pbLoading"
    style="?android:attr/progressBarStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/time"
    android:layout_centerInParent="true"
    android:layout_marginTop="80dp"
    android:visibility="gone" />

    <Button
        android:id="@+id/bComment"
        android:layout_width="65dp"
        android:layout_height="35dp"
        android:text=""
        android:textColor="@color/dimgrey3"
        android:textSize="12dp"
        android:paddingLeft="20dp"
        android:paddingBottom="2dp"
        android:background="@drawable/button_comment"
        android:layout_marginTop="5dp"
        android:layout_marginRight="5dp"
        android:layout_marginBottom="5dp"
        android:layout_below="@+id/ivImageBackground" />

    <ImageView
        android:id="@+id/ivRedDot"
        android:layout_width="25dp"
        android:layout_height="29dp"
        android:adjustViewBounds="true" 
        android:scaleType="centerCrop"
        android:layout_marginLeft="45dp"
        android:layout_marginTop="-5dp"
        android:background="@drawable/navbar_notification_nipple"
        android:layout_below="@+id/ivImageBackground"
        android:visibility="gone" />

    <Button
        android:id="@+id/bLike"
        android:layout_width="65dp"
        android:layout_height="35dp"
        android:text=""
        android:textColor="@color/dimgrey3"
        android:textSize="12dp"
        android:paddingLeft="25dp"
        android:paddingBottom="2dp"
        android:background="@drawable/button_like"
        android:layout_marginTop="5dp"
        android:layout_marginRight="5dp"
        android:layout_marginBottom="5dp"
        android:layout_below="@+id/ivImageBackground"
        android:layout_toRightOf="@+id/bComment" />

    <Button
        android:id="@+id/bMore"
        android:layout_width="60dp"
        android:layout_height="35dp"
        android:layout_alignParentRight="true"
        android:background="@drawable/button_context"
        android:layout_marginRight="10dp"
        android:layout_marginTop="5dp"
        android:layout_below="@+id/ivImageBackground" />

<TextView
    android:id="@+id/unreadcomment"
    android:layout_width="50dp"
    android:layout_height="30dp"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"
    android:background="@drawable/list_unread_ribbon"
    android:gravity="center|right"
    android:paddingRight="8dp"
    android:paddingBottom="3dp"
    android:text=""
    android:textColor="@color/white1"
    android:textSize="13dp"
    android:visibility="gone" />

</RelativeLayout> 
```

对于上面的 xml 文件：@+id/ivImage 是我放置主要位图图像的位置。

那么我对 ArrayAdapter 和 ListView 回收器的操作是否正确？有人可以给我一些关于如何使滚动性能更好的提示吗？现在它相当滞后。

谢谢！

# text-to-speech - NAO 会说当地语言吗？

> ID：15442589
> 
> 赞同：2
> 
> 时间：2013-03-15T21:44:02.297
> 
> 标签：text-to-speech, nao-robot

我希望 NAO 能够说 Aldebaran Robotics 不提供的当地语言“印地语”。有没有办法让机器人说官方支持以外的语言，也许是我们自己安装 TextToSpeech Engine。在这个方向上的任何合适的指针都是有用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T08:24:01.220

是的，您可以使用外部 TextToSpeech：

*   一个二进制文件，如果它与 alsa 兼容，则直接使用，因为 NAO 是 alsa 驱动程序上的 gentoo linux。
*   使用 C++ 库并使用 NAOQi 模块重新编译它：ALAudioDevice.sendAudioBuffer*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T08:39:32.810

一种可能性是您可以将 NAO 与 Google 翻译的 TTS 连接起来。

# xml - 如何使用 xPath 表达式获取键的值

> ID：15442591
> 
> 赞同：0
> 
> 时间：2013-03-15T21:44:21.937
> 
> 标签：xml, xpath

我需要编写一个 XPath 表达式来评估 XML 中键 'ErrorCode' 的值是否 = -3025：

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <esb:esb-header xmlns:esb="http://schemas.company.com/soa/esb">
    <esb:params>
      <esb:param>
        <esb:param-name>ErrorCode</esb:param-name>
        <esb:param-value>-3025</esb:param-value>
      </esb:param>
    </esb:params>
  </esb:esb-header>
</soapenv:Envelope> 
```

请注意，元素具有前缀。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:55:02.193

XPath 2.0：

```
/*:Envelope/*:esb-header/*:params/*:param[*:param-name='ErrorCode' and *:param-value='-3025'] 
```

对于 XPath 1.0，您可以`local-name()`改用 (yuck)：

```
/*[local-name()='Envelope']/*[local-name()='esb-header']/*[local-name()='params']/*[local-name()='param'][*[local-name()='param-name']='ErrorCode' and *[local-name()='param-value']='-3025'] 
```

如果你有办法声明这些命名空间，那么在 1.0 中使用前缀而不是`local-name()`.

此外，您可以将整个路径包装在`boolean()`(XPath 1.0/2.0) 或`exists()`(XPath 2.0) 中以返回`true`或`false`。

# java - 寻找去除加权有向图中循环的算法

> ID：15442592
> 
> 赞同：3
> 
> 时间：2013-03-15T21:44:32.483
> 
> 标签：java, cycle, graph-theory

令 G 为包含循环的加权有向图。我正在寻找一种算法来通过删除循环的最小权重边缘来查找和删除这些循环。

我想我可能会做几个 DFS，但想知道是否有更完善的解决方案。

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-08-02T14:45:47.110

您尝试解决的问题称为**（最小）反馈弧集**。这是一个 NP 难题，因此您不会找到任何有效的、确定性的、最优算法。此外，没有“好的”近似算法是已知的。如果您知道您的反馈弧设置得很小，那么可以使用 FPT 算法。有关详细信息，请参阅[https://en.wikipedia.org/wiki/Feedback_arc_set#Minimum_feedback_arc_set](https://en.wikipedia.org/wiki/Feedback_arc_set#Minimum_feedback_arc_set)。

不过，反馈弧集的启发式是一个活跃的研究领域。这篇论文似乎是一个很好的起点：[https ://onlinelibrary.wiley.com/doi/abs/10.1002/net.3230200102](https://onlinelibrary.wiley.com/doi/abs/10.1002/net.3230200102)

# c# - 在循环中使用 StreamReader.ReadLine 仅从文本文件中读取一行

> ID：15442596
> 
> 赞同：4
> 
> 时间：2013-03-15T21:44:56.537
> 
> 标签：c#, streamreader

**请参阅评论以获取解决方案-文件位于错误的位置**

我到处寻找答案，但我一直找不到。这对我来说真的很令人沮丧，因为我从来没有遇到过使用任何其他编程语言从文件中读取的麻烦。

我正在尝试从文本文件中提取用户名和密码，用于基本的即时通讯程序。我不会发布所有代码——它太长了，而且很可能是不相关的，因为在程序的一开始就读取了文本文件。

这是我试图从中读取的文本文件（“users.ul”）的内容：

```
admin.password
billy.bob
sally.sal 
```

这是从文本文件中读取的代码：

```
users = new Dictionary<string, User>();

System.Console.WriteLine("users.ul exists: " + File.Exists("users.ul"));

// Check the status of users.ul. If it exists, fill the user dictionary with its data.
if (File.Exists("users.ul"))
{
    // Usernames are listed first in users.ul, and are followed by a period and then the password associated with that username.
    StreamReader reader = new StreamReader("users.ul");
    string line;
    int count = 0;

    while ((line = reader.ReadLine()) != null)
    {
        string[] splitted = line.Split('.');
        string un = splitted[0].Trim();
        string pass = splitted[1].Trim();

        User u = new User(un, pass);

        // Add the username and User object to the dictionary
        users.Add(un, u);

        count++;
    }

    System.Console.WriteLine("count: " + count);

    reader.Close();
} 
```

这是我的代码产生的输出：

```
users.ul exists: True
count: 1 
```

添加到用户字典的唯一数据是“admin”，密码为“password”。其他行被忽略。

请帮帮我。如果没有多个用户，我的程序毫无用处。我到处寻找解决方案，包括该站点上的其他类似问题。从没想过从文件中读取会导致我浪费这么多时间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T21:55:58.670

除非您特别需要了解使用 StreamReader 的复杂性，否则我建议使用[`File.ReadAllLines()`](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)，它返回一个（可枚举的）字符串数组。

更好的是，使用 linq :-)

```
System.Console.WriteLine("users.ul exists: " + File.Exists("users.ul"));

// Check the status of users.ul. If it exists, fill the user dictionary with its data.
if (File.Exists("users.ul")) {
    var lines = File.ReadAllLines("users.ul");
    // Usernames are listed first in users.ul, and are followed by a period
    // and then the password associated with that username.
    var users = lines.Select(o => o.Split('.'))
                     .Where(o => o.Length == 2)
                     .Select(o => new User(o[0].Trim(), o[1].Trim());

    System.Console.WriteLine("count: " + users.Count());
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T22:05:00.270

只是无法抗拒将其重构为单行的诱惑：

```
var users = File.ReadAllLines("users.ul").Select(l => new User(l.Substring(0, l.IndexOf('.')), l.Substring(l.IndexOf('.') + 1))).ToDictionary(u => u.Name); 
```

# sql - SQL 和 XML 以及复杂的 JOIN

> ID：15442599
> 
> 赞同：1
> 
> 时间：2013-03-15T21:45:01.317
> 
> 标签：sql, sql-server, xml

我正在尝试构建一个 SQL 查询或过程来从多个表构建一个复杂的 XML 结果。这是在 SQL Server 2008 R2 中。

所以我想要返回的 XML 是

```
<requests>
  <request>
    <field one/>
    <field two/>
    <person>
      <personinfo/>
      <roleinfo/>
      <addrinfo/>
      <!-- don't want <item> elements here -->
    </person>
    <person>
      <personinfo/>
      <roleinfo/>
      <addrinfo/>
      <!-- don't want <item> elements here -->
    </person>
    <item><iteminfo/></item> <- i want <item> elements to show up here
    <item><iteminfo/></item>
    <item><iteminfo/></item>
  </request>
  <request>
    ...
  </request>
<requests> 
```

我可以让它在没有`<item/>`行的情况下工作，但是当我尝试将`<item/>`行加入最终结果时，它将它们加入`<person/>`元素而不是`<request/>`元素。这可能是我对连接的理解或使用的问题，但此时我正在踩水。

创建没有`<item/>`元素的 XML 的 SQL 如下所示。

```
select actor-fields, person-fields, role-fields, address-fields
into #tempperson from actor
left join person on actor.personid = person.personid
left join address on address.personid = person.personid
left join role on role.personid = person.personid
order by personid

select request-fields
into #tempreq from request
order by requestid

select *
from #tempreq as request
left join #tempperson as person on person.requestid = request.requestid
order by request.requestid
for xml auto, root('requests'), elements; 
```

我需要的是返回所需 XML 的 SQL。如果我向上述 SQL 添加另一个连接，它会在`<item/>`节点内添加`<person/>`节点，这不是我想要的。

我读过关于 XML AUTO 的文章，但这些示例没有返回这样的嵌套结构。也许我正在处理这一切都是错误的。对此有何指导？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:32:55.980

实际上，至少在这种情况下，似乎效果最好的方法是使用**`XML AUTO, TYPE`**. 下面是一个非常简单的示例，没有`JOINs`（这里`WHEREs`似乎可以解决问题）。（老实说，在我正在处理的实际问题中，我有这个加上`JOINs`工作还可以，但它的微妙之处`JOIN`仍然让我感到困惑，特别是当与这类问题结合时。）

```
CREATE TABLE #Person ( PerID int identity, FullName varchar(20))
CREATE TABLE #Orders ( OrdID int identity, PerID int, OrdDt varchar(32))
CREATE TABLE #Items ( ItemID int identity, OrdID int, IDesc varchar(32), Amt int)
CREATE TABLE #Addresses ( AddrID int identity, PerID int, FullAddr varchar(50))

insert into #Person values ('Brett Doe')
insert into #Person values ('Sandy Sue')
insert into #Orders values (1, '1/1')
insert into #Orders values (1, '3/1')
insert into #Orders values (2, '1/1')
insert into #Orders values (2, '2/1')
insert into #Items values (1, 'Horse', 1000)
insert into #Items values (2, 'Hat', 10)
insert into #Items values (2, 'Boots', 100)
insert into #Items values (3, 'Belt', 20)
insert into #Items values (4, 'Pistol', 500)
insert into #Items values (4, 'Ammo', 100)
insert into #Addresses values (1, '123 Main, Somewhere, TX')
insert into #Addresses values (2, '345 Oak, Somewhere Else, TX')

SELECT Person.PerID
    , FullName
    , (SELECT OrdDt
        , (SELECT IDesc
            , Amt, Items.OrdID
            FROM #Items as Items
            WHERE Items.OrdID = Orders.OrdID
            FOR XML AUTO, TYPE
            )
        FROM #Orders AS Orders
        WHERE Person.PerID = Orders.PerID
        FOR XML AUTO, TYPE, ELEMENTS
    )
    , (SELECT FullAddr
        FROM #Addresses AS Addresses
        WHERE Person.PerID = Addresses.PerID
        FOR XML AUTO, TYPE, ELEMENTS
    )
FROM #Person AS Person
FOR XML AUTO, TYPE, ELEMENTS

DROP TABLE #Person
DROP TABLE #Orders
DROP TABLE #Items
DROP TABLE #Addresses 
```

输出是

```
<Person>
  <PerID>1</PerID>
  <FullName>Brett Doe</FullName>
  <Orders>
    <OrdDt>1/1</OrdDt>
    <Items IDesc="Horse" Amt="1000" OrdID="1" />
  </Orders>
  <Orders>
    <OrdDt>3/1</OrdDt>
    <Items IDesc="Hat" Amt="10" OrdID="2" />
    <Items IDesc="Boots" Amt="100" OrdID="2" />
  </Orders>
  <Addresses>
    <FullAddr>123 Main, Somewhere, TX</FullAddr>
  </Addresses>
</Person>
<Person>
  <PerID>2</PerID>
  <FullName>Sandy Sue</FullName>
  <Orders>
    <OrdDt>1/1</OrdDt>
    <Items IDesc="Belt" Amt="20" OrdID="3" />
  </Orders>
  <Orders>
    <OrdDt>2/1</OrdDt>
    <Items IDesc="Pistol" Amt="500" OrdID="4" />
    <Items IDesc="Ammo" Amt="100" OrdID="4" />
  </Orders>
  <Addresses>
    <FullAddr>345 Oak, Somewhere Else, TX</FullAddr>
  </Addresses>
</Person> 
```

我通过搜索然后在此处关注链接或相关问题（例如[FOR XML EXPLICIT](https://stackoverflow.com/questions/1887344/for-xml-explicit) ）找到了这一点。

链接的 MSDN 文章[FOR XML Query 与 Nested FOR XML Query](http://msdn.microsoft.com/en-us/library/bb510436.aspx)的比较很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T22:45:02.793

问题在于数据在 XML 中的呈现方式在对其进行建模时具有与常规 SQL 不同的行为。要记住的是，您可以使用“对于 xml 路径...”自己定位节点，但是...如果您要加入一个表，该表使用具有显示子项的关系的连接引用。当您不想要 XML 元素时，SQL 可能会尝试将它们强加给您。如果数据很复杂，您可以通过以下几种方式处理此嵌套问题：

1.  将其转储到临时表中，从而使任何假设关系 SQL 考虑您的数据。现在它认为这是一个完整的数据集，并且可以随心所欲地使用它。你不关心关系，你把它们扔掉并决定手动建模。

2.  做嵌套选择该范围到更大的主体。您也可以将嵌套选择放在更大的 xml 正文中。我也用过这个。

试试这个自解压示例：

```
declare @Person Table ( personID int identity, person varchar(8));

insert into @Person values ('Brett'),('Sean'),('Chad'),('Michael'),('Ray'),('Erik'),('Queyn');

declare @Orders table ( OrderID int identity, PersonID int, Desciption varchar(32), Amount int);

insert into @Orders values (1, 'Shirt', 20),(1, 'Shoes', 50),(2, 'Shirt', 22),(2, 'Shoes', 52),(3, 'Shirt', 20),(3, 'Shoes', 50),(3, 'Hat', 20),(4, 'Shirt', 20),(5, 'Shirt', 20),(5, 'Pants', 30),
(6, 'Shirt', 20),(6, 'RunningShoes', 70),(7, 'Shirt', 22),(7, 'Shoes', 40),(7, 'Coat', 80)

Select 
    p.person as "@Person"
,   o.Desciption as "Order/@Description"
,   o.Amount as "Order/*"
from @Person p
    join @Orders o on p.personID = o.PersonID
for xml path('Person'), root('People')
-- this will present my data nice but you may have more complex data than this

if object_id('tempdb..#Temp') is not null
    drop table #temp

Select 
    p.person 
,   o.Desciption
,   o.Amount
into #Temp
from @Person p
    join @Orders o on p.personID = o.PersonID

Select
    person as "@Person"
,   Desciption as "Order/@Description"
,   Amount as "Orders"
from #Temp
for xml path('Person'), root('People') 
```

对于更复杂的嵌套选择原理，在更大的 xml 生成体中执行 xml。我不记得为什么，但“TYPE”语句基本上告诉 SQL 引擎它可以嵌套。如果您忘记了它并将选择的 xml 嵌套在其他 xml 中，它可能看起来像垃圾。

```
-- Maybe I need to nest XMl inside of OTHER XML
Select 
    p.person as "@Person"
,   (
    select
        o.Desciption 
    ,   o.Amount
    from @Orders o 
    where o.PersonID = p.personID
    for xml path('Order'), root('Orders'), type
    ) 
from @Person p 
for xml path('Person'), root('People') 
```

# javascript - Backbone.js 在 Firefox 中选择更改事件

> ID：15442601
> 
> 赞同：0
> 
> 时间：2013-03-15T21:45:09.880
> 
> 标签：javascript, backbone.js

出于某种原因，这只发生在 Firefox 中：

```
"change #CardSelector": "selectCard" 
```

骨干视图上的此事件在选择框更改时不会调用SelectCard。

但如果我使用这个：

```
this.$("#CardSelector").change(this.selectCard) 
```

一切似乎都很好。有什么我想念的吗？它在 Chrome 中工作。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T01:27:13.487

在您未发布的某些代码中一定还有其他事情发生。

这是我在 Windows 上的 FF 中尝试过的一个 jsFiddle：http: [//jsfiddle.net/phoenecke/VE5wm/](http://jsfiddle.net/phoenecke/VE5wm/)

```
var V = Backbone.View.extend({
    el: 'body',
    events: {
        "change #CardSelector": "selectCard" 
    },

    selectCard:function(e){
        this.$el.append('<div>' + this.$('#CardSelector').val() + '</div>');
    }
}); 
```

您在这里看到的是否与您尝试过的有所不同？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:16:20.367

对不起大家。看起来这是 Mac Firefox 版本中的浏览器错误。快速更新修复了该问题，该事件现在触发。

谢谢。

# ubuntu - 加载 AllegroServe

> ID：15442602
> 
> 赞同：0
> 
> 时间：2013-03-15T21:45:20.047
> 
> 标签：ubuntu, common-lisp, sbcl

我正在尝试`(require :aserve)`但收到此错误：

```
 Don't know how to REQUIRE ASERVE. 
```

有谁知道我做错了什么？我在 Ubuntu 12.10 上使用 SBCL 1.0.57.0。我已经安装了`cl-aserve`软件包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:45:44.990

我发现了问题。我需要`(require :asdf)`先。然后一切都按预期工作。

# internationalization - 为 CKEditor 拼写检查器使用不同的（非英语）网络服务

> ID：15442608
> 
> 赞同：5
> 
> 时间：2013-03-15T21:45:45.380
> 
> 标签：internationalization, ckeditor, spell-checking

我发现 webspellchecker.net 是一个非常有用的工具，但不幸的是 webspellchecker.net 没有提供适合我的语言的工具。我最近为我的语言 (Cuzco Quechua) 找到了一个拼写检查器，我可以通过网络服务连接到它。

现在我需要找到一种将它与 CKEditor 集成的方法。那么我该怎么做呢？有没有一个插件可以让我做类似的事情？

在此先感谢您的帮助。

# wpf - 如何访问 WPF 中 ComboBox 内的 ScrollViewer？

> ID：15442614
> 
> 赞同：2
> 
> 时间：2013-03-15T21:46:03.943
> 
> 标签：wpf

ComboBox 控件模板有一个 ScrollViewer。如何从 ComboBox 的实例中获取对它的引用？

我尝试将其命名为“ScrollViwer1”并使用它，但没有成功。

```
var scroll = FindVisualChildByName<ScrollViewer>(this.comboBox, "ScrollViewer1");

  public static T FindVisualChildByName<T>(DependencyObject parent, string name) where T : DependencyObject
        {
            for (int i = 0; i < VisualTreeHelper.GetChildrenCount(parent); i++)
            {
                var child = VisualTreeHelper.GetChild(parent, i);
                string controlName = child.GetValue(Control.NameProperty) as string;
                if (controlName == name)
                {
                    return child as T;
                }
                else
                {
                    T result = FindVisualChildByName<T>(child, name);
                    if (result != null)
                        return result;
                }
            }
            return null;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T22:37:57.127

您可以使用[FrameworkTemplate.FindName 方法](http://msdn.microsoft.com/en-us/library/system.windows.frameworktemplate.findname.aspx)。

```
ScrollViewer sv = comboBox.Template.FindName("DropDownScrollViewer", comboBox) as ScrollViewer;
if (sv != null)
{
    // do something...
} 
```

# opengl - 如何确定 OpenGL 输出缓冲区的大小（COMPSIZE）

> ID：15442615
> 
> 赞同：1
> 
> 时间：2013-03-15T21:46:04.757
> 
> 标签：opengl, specs

我正在尝试为 Node.js 创建 OpenGL 绑定。由于 OpenGL API 的庞大规模，手动执行此操作是不切实际的，所以我求助于 Khronos 的 OpenGL 注册表。

提供的文件很容易解析，但似乎缺少一个重要的部分，这就是如何计算非平凡参数缓冲区的大小。

这是需要这样一个输出缓冲区的函数定义的示例。注意 COMPSIZE() 表达式：

```
GetTextureImageEXT(texture, target, level, format, type, pixels)
    return      void
    param       texture     Texture in value
    param       target      TextureTarget in value
    param       level       CheckedInt32 in value
    param       format      PixelFormat in value
    param       type        PixelType in value
    param       pixels      Void out array [COMPSIZE(target/level/format/type)]
    category    EXT_direct_state_access
    dlflags     notlistable
    glxflags    ignore ### client-handcode server-handcode
    extension   soft WINSOFT
    glfflags    capture-execute capture-handcode decode-handcode pixel-pack 
```

这个例子很好地说明了这个问题。很明显，“像素”参数需要一个输出缓冲区，其大小取决于目标、级别、格式和类型参数。但是我如何或在哪里可以找到计算该大小的实际公式？

我能在网上找到的唯一相关信息是一个名为 compsize.c 的 C 源文件，它显然属于 Apple 的 OpenGL 实现。

谁能帮我找到这方面的硬数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:15:03.580

我将在这里回答我自己的问题。

我的结论是，我试图实现的目标不符合 OpenGL 的工作方式。我想自动化的计算仅仅取决于太多的因素要以这种方式完成。

澄清一下：我打算为 Node（基于 Google V8 虚拟机的命令行 JavaScript 解释器）提供 OpenGL 绑定。由于某些 OpenGL（或扩展）调用返回大量数据和/或数据可能具有重要的内存布局，我希望通过基于 Khronos 可解析规范的自动生成代码分配所需的输出缓冲区来帮助程序员文件，这些文件已经被 GLEW 等项目用来生成它们的扩展 C 绑定。

根据我收到的答案（谢谢大家！），这个想法很天真 - 并且意图没有我想象的那么有用，因为考虑到它，简单地拥有一个大小合适的缓冲区可能会避免访问冲突，但不会帮助程序员*使用*他获得的信息。最后，无论如何，他仍然需要知道确切的内存布局，因此分配缓冲区对他来说不是问题（嗯，至少在理论上）。

鉴于这一切，计算输出缓冲区大小以及处理它们的内容，最好留给下一个更高的软件层。而且因为据我所知，没有人在同一个软件中使用*整个*OpenGL API，因此实际上不需要一个库来处理*所有*可能的输出缓冲区分配。

感谢所有回复的人！

# excel - 重新关注 Excel 用户表单组合框

> ID：15442620
> 
> 赞同：0
> 
> 时间：2013-03-15T21:46:43.733
> 
> 标签：excel, vba, controls, focus, userform

用户正在向组合框的编辑区域输入数据

ComboBox 的 Change Event 用于运行以下代码；

```
 AppActivate "Microsoft Excel"
        :
    'Do some stuff
        :
    UserForm1.Show
    UserForm1.ComboBox1.SetFocus 
```

这工作正常，但是；即使 ComboBox 现在再次具有焦点（根据 Userform.ActiveControl 无论如何），它没有插入指针来指示这一事实，并且用户必须重新选择 ComboBox 才能继续输入数据

我想要它，以便插入指针重新出现，并且用户可以继续直接输入数据，而不必重新选择组合框

添加以下代码行

```
 SendKeys "{TAB}+{TAB}{RIGHT}" 
```

是一种解决方案，但它很混乱（它会生成 ComboBox 事件，并且如果可能的话最好避免使用 SendKeys）

任何人都可以提出更好的解决方案吗？

问：为什么黑羊比白羊吃得少？

A. 因为没有那么多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-22T16:15:37.437

问题是，用户表单本身可能不会关注工作表或其他用户表单。

试试这个代码：

```
with UserForm1.ComboBox1
    .Visible = False
    .Visible = True
    .setfocus
end with 
```

或更一般地，要正确设置焦点，请调用此子：

```
Sub Focus_ControlOfUserForm(ByRef Obj As Object) 'from the Userform, call Focus_ControlOfUserForm(Me)
Dim ctl As Control
With Obj
    Set ctl = .ActiveControl
    If TypeName(ctl) = "MultiPage" Or TypeName(ctl) = "Frame" Then
        Set ctl = ctl.SelectedItem.ActiveControl.Name
    End If

    With ctl
        Dim Af As Boolean
        With Application
            Af = .ScreenUpdating
            .ScreenUpdating = False
        End With
        '.SetFocus
        .Visible = False
        .Visible = True
        .SetFocus 
        If Af Then Application.ScreenUpdating = True
    End With
End With
End Sub 
```

当我需要在悬停时显示 ControlTipText 时，我还使用这种代码将焦点移到表单上。如果表单没有焦点，则鼠标悬停时不会显示文本气泡...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T00:32:22.640

在 UserForm 更改事件的末尾添加代码：

```
Application.OnTime Now + TimeValue("00:00:01"), "GetComboBoxFocus", , True 
```

在模块内添加代码：

```
Sub GetComboBoxFocus()
    UserForm1.ComboBox1.SetFocus
End Sub 
```

我遇到过几次。由于某种原因，它会在从模块调用时起作用。一秒钟对最终用户来说几乎是不明显的。如果您愿意，您也可以在事件代码的前面添加它，它会等到当前例程完成然后立即运行（1 秒 - 剩余代码所用的时间）。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T23:08:54.053

后

```
UserForm1.ComboBox1.SetFocus 
```

添加

```
UserForm1.ComboBox1.SelStart = 0 'set the selected text starting position to 0 
```

# long-polling - 使用 gevent 进行长轮询时处理客户端超时

> ID：15442629
> 
> 赞同：1
> 
> 时间：2013-03-15T21:47:30.583
> 
> 标签：long-polling, gevent

我正在使用 gevent 来处理长轮询请求。这些请求将一直等待，直到 AsyncResult 的 .get 方法返回。然后它将结果发送回长轮询客户端。

问题是客户端连接有时会在 AsyncResult 触发之前超时。如果发生这种情况，当我最终尝试发回响应时会出现异常。这是有道理的，因为连接不再处于活动状态。我还有一个 AsyncResult 对象，如果连接不再打开，我应该完全停止。

我正在使用 pywsgi 来处理长轮询的宁静请求。有没有办法在 pywsgi 处理程序中检测到连接关闭，但作为一个事件，因为我的 greenlet 将阻塞 AsyncResult。

任何帮助将不胜感激。谢谢

# knockout.js - JSON Parse # Hastag 响应

> ID：15442630
> 
> 赞同：0
> 
> 时间：2013-03-15T21:47:32.463
> 
> 标签：knockout.js, json, hashtag

我正在使用所见即所得的编辑器和淘汰赛，所以当我初始化我的视图模型时，我会解析页面上的一些引导数据以填充所见即所得和其他一些字段。

但是，当数据包含 # 并且可能包含其他字符时，剔除的解析器会因意外字符而失败

```
"{"text": "<font color=\"#ffcc66\">Some super sweet body content hello world&nbsp;</font>"}"

Uncaught SyntaxError: Unexpected token # 
```

像这样存储 html 的最佳方式是什么，以便我可以在服务器和视图模型之间来回传递它。正在考虑在不确定的情况下存储和解码时可能必须对这个特定字段进行编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:55:52.780

似乎很可能是转义的 "" 引用把一切都搞砸了。我不知道这是否是最好的方法，但我用`encodeURIComponent`和当我将文本放回我使用的编辑器时对文本字符串进行了编码`decodeURIComponent`。

# python - scipy 稀疏矩阵作为 petsc4py 的输入

> ID：15442632
> 
> 赞同：8
> 
> 时间：2013-03-15T21:47:44.643
> 
> 标签：python, scipy, petsc

我似乎无法找到一种方法如何有效地将 scipy 稀疏矩阵（例如[`csr_matrix`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csr_matrix.html)）加载到 petsc4py 矩阵中，例如`PETSc.Mat().createAIJ`. 我找到[了这个线程](http://lists.mcs.anl.gov/pipermail/petsc-users/2012-May/013379.html)，但我无法应用它。

我也很感激一个指针，这些东西实际记录在哪里。目录中的示例 `demo`只解释了一部分，我看不到任何文档字符串。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T22:50:30.500

您的链接说要在 PETSc 中创建稀疏矩阵，您应该使用如下命令：

```
PETSc.Mat().createAIJ(size=(nrows,ncols), csr=(ai,aj,aa)) 
```

据此，在 PETSc 中[，](http://www.mcs.anl.gov/petsc/petsc-3.1/docs/manualpages/Mat/MatCreateSeqAIJWithArrays.html)`ai`和`aj`是：`aa`

```
> i - row indices
> j - column indices
> a - matrix values 
```

这些分别等同于 a 的`.indptr`,`.indices`和`.data`属性，有关详细信息`scypy.sparse.csr_matrix`，请参阅[文档](http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csr_matrix.html)。

因此，如果您的链接正确，则以下内容应该有效：

```
>>> from petsc4py import PETSc
>>> import scipy.sparse
>>> csr_mat = scipy.sparse.rand(1000, 1000, density=0.001, format='csr')
>>> petsc_mat = PETSc.Mat().createAIJ(size=csr_mat.shape,
...                                   csr=(csr_mat.indptr, csr_mat.indices,
...                                        csr_mat.data)) 
```

不幸的是，我无法自己测试它。

# moq - AutoData Theories with AutoFixture 使用手动假货

> ID：15442636
> 
> 赞同：7
> 
> 时间：2013-03-15T21:48:05.530
> 
> 标签：moq, xunit.net, autofixture, automocking

给定这个系统来测试：

```
public class MySut
{
    private readonly IHardToMockDependency _hardToMockDependency;

    public MySut(IHardToMockDependency hardToMockDependency,
                 IOtherDependency otherDependency)
    {
        _hardToMockDependency = hardToMockDependency;
    }

    public string GetResult()
    {
        return _hardToMockDependency.GetResult();
    }
}

public interface IOtherDependency { }

public interface IHardToMockDependency
{
    string GetResult();
} 
```

而这个单元测试：

```
internal class FakeHardToMockDependency : IHardToMockDependency
{
    private readonly string _result;

    public FakeHardToMockDependency(string result)
    {
        _result = result;
    }

    public string GetResult()
    {
        return _result;
    }
}

public class MyTests
{
    [Fact]
    public void GetResultReturnsExpected()
    {
        string expectedResult = "what I want";
        var otherDependencyDummy = new Mock<IOtherDependency>();
        var sut = new MySut(new FakeHardToMockDependency(expectedResult),
                            otherDependencyDummy.Object);

        var actualResult = sut.GetResult();

        Assert.Equal(expectedResult, actualResult);
    }
} 
```

我应该如何将其转换为使用 AutoFixture.Xunit 和 AutoFixture.AutoMoq（同时仍使用手动伪造）？

在现实世界的测试中，手动伪造的界面和行为会更加复杂。请注意，我想将匿名变量（expectedResult 字符串）传递给手动伪造的构造函数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T08:18:40.290

There are already some good answers here, but I'd like to suggest a simpler alternative that involves slightly loosening the invariants of the FakeHardToMockDependency class. Make it public, and provide a way to assign the result that is decoupled from the constructor:

```
public class FakeHardToMockDependency : IHardToMockDependency
{
    private string _result;

    public FakeHardToMockDependency(string result)
    {
        _result = result;
    }

    internal string Result
    {
        get { return _result; }
        set { _result = value; }
    }

    public string GetResult()
    {
        return _result;
    }
} 
```

Notice that I've added an internal property and removed the `readonly` keyword from the field.

This enables you to refactor the original test to this:

```
[Theory, AutoMoqData]
public void GetResultReturnsExpected_AutoDataVersion(
    [Frozen(As = typeof(IHardToMockDependency))]FakeHardToMockDependency fake,
    MySut sut)
{
    var expected = "what I want";
    fake.Result = expected;

    var actual = sut.GetResult();

    Assert.Equal(expected, actual);
} 
```

For completeness, here's the AutoMoqDataAttribute code:

```
public class AutoMoqDataAttribute : AutoDataAttribute
{
    public AutoMoqDataAttribute()
        : base(new Fixture().Customize(new AutoMoqCustomization()))
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T01:43:05.823

Depending on what kind of parameters you need to pass to your manual fake, you might be able to use a parameterized attribute, similar to the AutoFixture's built-in `InlineAutoDataAttribute`.

Given these

```
public interface IHardToMockDependency
{
    string Value { get; }
}

public class FakeHardToMockDependency : IHardToMockDependency
{
    private readonly string _value;

    public FakeHardToMockDependency(string value)
    {
        _value = value;
    }

    #region IHardToMockDependency Members

    public string Value
    {
        get { return this._value; }
    }

    #endregion IHardToMockDependency Members
} 
```

you create an `ICustomization` implementation that tells a fixture object how to create an implemention of the `IHardToFakeDependency` interface:

```
public class FakeHardToMockDependencyCustomization : ICustomization
{
    private readonly string _value;

    public FakeHardToMockDependencyCustomization(string value)
    {
        _value = value;
    }

    #region ICustomization Members

    public void Customize(IFixture fixture)
    {
        fixture.Register<IHardToMockDependency>(() => new FakeHardToMockDependency(this._value));
    }

    #endregion ICustomization Members
} 
```

Note that this needs to know the string you want to pass in, of course.

Next, you roll up this with the other customizations you want to use in a `CompositeCustomization`:

```
public class ManualFakeTestConventions : CompositeCustomization
{
    public ManualFakeTestConventions(string value)
        : base(new FakeHardToMockDependencyCustomization(value), new AutoMoqCustomization())
    {
    }
} 
```

Make sure you always put the customizations in order from most specific to most general, as explained [here](http://blog.ploeh.dk/2012/07/31/TheorderofAutoFixtureCustomizationsmatter/) by Mark Seemann.

Now you create an `AutoDataAttribute` implementation that uses this customization:

```
public class ManualFakeAutoDataAttribute : AutoDataAttribute
{
    public ManualFakeAutoDataAttribute(string value)
        : base(new Fixture().Customize(new ManualFakeTestConventions(value)))
    {
    }
} 
```

This can now be used in the same way as an `InlineAutoDataAttribute`:

```
public class ManualFakeTests
{
    [Theory, ManualFakeAutoData("iksdee")]
    public void ManualFake(IHardToMockDependency fake)
    {
        Assert.IsType<FakeHardToMockDependency>(fake);
        Assert.Equal("iksdee", fake.Value);
    }
} 
```

You can also have it injected into an auto-created SUT instance right away by applying the `[Frozen]` attribute to the Theory parameter:

```
 [Theory, ManualFakeAutoData("iksdee")]
    public void SutWithManualFake([Frozen] IHardToMockDependency fake, MySut sut)
    {

    } 
```

This will create a `MySut` instance and the `IHardToMockDependency` instance needed for the constructor, for which you have given AutoFixture a rule in the `FakeHardToMockDependencyCustomization`, and also give you that very instance as the `fake` variable.

Note that not freezing the fake would still give you a correct `FakeHardToMockDependency` instance as well as inject one into the sut, but those would be distinct, as we have registered a factory delegate in the customization. Freezing the instance will cause the fixture to always return the same instance for subsequent requests for the interface.

This has a few caveats, however:

*   You have no reference to the string you pass in as a parameter, so you have to have it in there as a string literal twice. You can work around this with string constants within the test class, for example.
*   The number of types that can be used as attribute parameters in .NET is limited. As long as you only need basic types, you should be fine, but calling constructors or the like in the parameter list is not possible.
*   You should only use this attribute when you need an instance if `IHardToFakeDependency`; otherwise you'll always have to pass in a string parameter anyway. If you have a set of standard customizations you need to use, create another attribute that contains only those.
*   If you need the capabilities of the `InlineAutoDataAttribute` at the same time, you also need to create yet another attribute that combines the features of both.

Depending on the concrete circumstances, you might also want to look at xUnit.net's `PropertyDataAttribute`, but I hardly ever find myself using that.

In general, in my opinion, understanding how to work with customizations and autodata attributes and when and how to create your own are the key to effectively using AutoFixture and really make it save you work.

If you often write code in a specific domain that you need to test, it might well make sense to create a library containing customizations, attribute and stub objects that will always be ready to use once you drop it in next to xUnit.net, AutoFixture and Moq. I know I'm damn glad I built mine.

Oh, and also: Having a dependency that is hard to mock *might* point at a design issue. Why is it that hard to mock?

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T22:31:19.130

也许这不是最惯用的 Autofixture 设置，但绝对有效：

```
[Fact]
public void GetResultReturnsExpected()
{
    var fixture = new Fixture()
        .Customize(new AutoMoqCustomization());

    var expectedResult = fixture.Create<string>();

    fixture.Register<IHardToMockDependency>(
        () => new FakeHardToMockDependency(expectedResult));

    var sut = fixture.Create<MySut>();

    var actualResult = sut.GetResult();

    Assert.Equal(expectedResult, actualResult);
} 
```

如果您也想使用，您可以根据[这篇很棒的文章](http://nikosbaxevanis.com/2012/07/31/autofixture-xunit-net-and-auto-mocking/)`AutoData`创建自己的，您可以在其中隐藏部分或全部夹具自定义。`AutoMoqData`

就像是：

```
public class MySutAutoDataAttribute : AutoDataAttribute
{
    public MySutAutoData()
        : base(new Fixture()
            .Customize(new AutoMoqCustomization()))
    {
        Fixture.Freeze<string>();

        Fixture.Register<IHardToMockDependency>(
            () => new FakeHardToMockDependency(Fixture.Create<string>()));
    }
} 
```

你可以像这样使用它：

```
[Theory, MySutAutoData]
public void GetResultReturnsExpected(MySut sut, string expectedResult)
{
    var actualResult = sut.GetResult();

    Assert.Equal(expectedResult, actualResult);
} 
```

But you should note that there is room for a lots of improvement in the `MySutAutoDataAttribute` for example: it is not very generic and `Fixture.Freeze<string>();` can cause problems if you are using multiple strings in your tests.

# asp.net-mvc - MVC 删除表字段，但 model.edmx 未更新

> ID：15442642
> 
> 赞同：2
> 
> 时间：2013-03-15T21:48:23.493
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework

我正在做一些测试，我从数据库中的表中删除了一个字段，并尝试从数据库中更新模型，并且该字段仍在 .edmx 文件和 .tt 中。当我通过删除我删除的字段来执行此操作时，这不应该更新模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:55:51.070

您需要双击您的实体模型以获取它的上下文并删除该对象。或者您可以右键单击空白区域并选择“查看模型浏览器”，如果您有许多对象的巨大表面，请打开“实体类型”并将其删除。实体模型是数据库的扩展，不会自动更新更改。

据我所知，更新功能将查找添加的更改，刷新将更新现有的，但我不确定它是否会删除它们。您需要通过选择对象并点击删除来删除它。然后在您的 t4 模板上运行“自定义工具”以从您的实体数据模型的模板进行更新。如果您需要直接更新 t4，我不确定是否使用 .NET 4.5 和 Visual Studio 2012 推出的实体版本 5。可能是因为这个。但在此之前，您需要从我所看到的内容中删除。

无论如何，这是根据我的经验，使用 Entity Framework 在带有 WPF 的 MVVM 模型结构上处理类似的事情，并将 t4 代用作 POCO 模型类。

# c# - 将JSON字符串反序列化为C#中的嵌套类？

> ID：15442643
> 
> 赞同：1
> 
> 时间：2013-03-15T21:48:26.563
> 
> 标签：c#, json, deserialization

我从如下所示的 HTTP 请求接收到 JSON 字符串：

```
[
   {
  "size":590,
  "location":"California",
  "report":{
     "Bob":[
        null,
        "12.0.250.0",
        "20130228"
     ],
     "Mary":[
        null,
        "2013-02-28.01",
        "20130228"
     ],
     "John":[
        null,
        "12.00",
        "59123805"
     ]
  }
},
{
  "size":12348,
  "location":"Florida",
  "report":{
     "Misty":[
        null,
        "65492.592",
        "89216753"
     ],
     "Billy":[
        null,
        "789208.w9",
        "65320880"
     ],
     "John":[
        null,
        "89.8056",
        "75920889"
     ]
   }
 }
] 
```

我试图反序列化的类的结构如下：

```
[DataContract]
public class DeserializedObject
{
    [DataMember(Name = "size")]
    public UInt64 Size { get; set; }

    [DataMember(Name = "location")]
    public string Location { get; set; }

    [DataMember(Name = "report")]
    public Dictionary<string, ReportData> Report { get; set; } 
}

[CollectionDataContract]
public class ReportData : List<object>
{
    public string a
    {
        get { return (string)this[0]; }
        set { this[0] = (string)value; }
    }

    public string b
    {
        get { return (string)this[1]; }
        set { this[1] = (string)value; }
    }

    public string c
    {
        get { return (string)this[2]; }
        set { this[2] = (string)value; }
    }
} 
```

但是，当我尝试反序列化它时，报告始终为空。

```
DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(List<DeserializedObject>));
List<DeserializedObject> list = serializer.ReadObject(stream) as List<DeserializedObject>; 
```

反序列化 JSON 响应的“报告”部分的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:47:20.810

我能够使用 Json.NET 成功反序列化 JSON 字符串。我用来反序列化字符串的类如下所示：

```
[DataContract]
public class DeserializedObject
{
    [DataMember(Name = "size")]
    public UInt64 Size { get; set; }

    [DataMember(Name = "location")]
    public string Location { get; set; }

    [DataMember(Name = "report")]
    public Dictionary<string, string[]> Report { get; set; } 
} 
```

用于反序列化对象的代码如下所示：

```
StreamReader reader = new StreamReader(stream);
List<DeserializedObject> instance = JsonConvert.DeserializeObject<List<DeserializedObject>>(reader.ReadToEnd()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T22:29:43.760

问题是您的报告类设置不正确。json.NET 正在查找密钥 a、b 和 c。除此之外，字典中的值是一个字符串数组，而不是一个对象。ReportData 一个对象。这种不匹配是导致错误的原因。

我认为报告应该是一个类型的字典，`<string, string[]>`应该`ReportData`从项目中删除。如果我要这样做，我将使用以下类（实际上不需要 DataContract 的东西）；

```
 public class DeserializedObject
  {
      public UInt64 size { get; set; }

       public string location { get; set; }

       public Dictionary<string, string[]> report { get; set; } 
   } 
```

# sql - 将数据从 Oracle 数据库导出到 CSV 时出现 ORA 错误

> ID：15442646
> 
> 赞同：0
> 
> 时间：2013-03-15T21:48:46.873
> 
> 标签：sql, oracle, export

我的同事在尝试将数据从 Oracle 数据库导出到 CSV 时遇到了一些问题。奇怪的是，如果他`oc_cr_comments`用 NULL 替换字段中的空格，则导出工作。

```
TRIM (REPLACE(oc_cr_comments, CHR(32), NULL)) 
```

什么可能导致通过用 NULL 替换空格来解决的导出问题？

错误输出为：

```
ERROR at line 1:
ORA-29285: file write error
ORA-06512: at "SYS.UTL_FILE", line 140
ORA-06512: at "SYS.UTL_FILE", line 785
ORA-06512: at "EFS.P_CRIMINAL_DISPOSITION", line 151
ORA-06512: at line 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:53:03.017

在对 的调用中`utl_file.fopen`，`max_linesize`指定的是什么？删除空格之前的行有多长？删除空格后的行有多长？

我的猜测是，当您打开文件时，您指定的最大行大小小于删除空格之前的实际行大小。如果删除空格导致行大小现在小于最大行大小，这将解释为什么在您进行替换后它会起作用。

# xcode - 在 Xcode 中编辑时将光标置于屏幕中间

> ID：15442647
> 
> 赞同：1
> 
> 时间：2013-03-15T21:48:50.603
> 
> 标签：xcode

我不喜欢在屏幕底部附近进行编辑。在接近文件末尾进行编辑时，这种情况在 Xcode 中经常发生。在其他编辑器（例如 vim 或 sublime）中，您可以将编辑点垂直居中到屏幕中间。

在 Xcode 中是否有执行此操作的快捷方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-02-27T19:12:56.177

在 Xcode 上点击 (⌃ + L)。[额外的字符来打分钟。字数]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-09T14:51:39.610

据我所知，正如评论中提到的，Xcode 不会滚动到您内容的底部，因此您将无法以最后一行为中心（除非您添加了大量换行符到文件的结尾，这显然有点恶心）。

*但是，有一种方法可以在 Xcode 的 Preferences 的Key Bindings*部分中配置可以居中的行（至少在 Xcode 8.3 中，我没有检查过早期的）。如果您过滤“中心”，您将看到**Center Selection in Visible Area**，您可以将其分配给某些东西。

例如，我`Cmd-Alt-Ctrl-K`在下面的屏幕截图中将其分配给了它。

[![Xcode 首选项屏幕截图显示可见区域键绑定中中心选择的位置](../Images/a4965f1e74231bdf2e9a42f6c936b18a.png)](https://i.stack.imgur.com/erzsA.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-27T20:55:49.720

在现代 Xcode 中，这一切都发生了变化，“过度滚动”现在是一个特性。

# sql - 如何根据“深度”缩进查询输出？

> ID：15442649
> 
> 赞同：0
> 
> 时间：2013-03-15T21:49:11.370
> 
> 标签：sql, postgresql

想象一个像这样的表：

```
create table test (depth integer, name text); 
```

添加一些行：

```
insert into test (depth, name)
values (0, "no indent"), (1, "single indent"), (2, "double indent"); 
```

现在，根据如下`depth`所示的参数创建输出：

```
no indent
    single indent
        double indent 
```

在这种情况下，缩进是 4 个空格（但可以更改为任何有趣的缩进，例如制表符）。

我的直觉想做这样的事情：

```
select '    ' * depth || name from test order by depth; 
```

然而，这在 Postgres 中爆发了。像这样的字符串乘法在 Python 中按预期工作。但是，我不熟悉 Postgres 中的等效操作。其他数据库实现也会很有趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:59:08.307

使用`lpad()`：

```
select lpad(name, (4 * depth) + length(name), ' ')
from test 
order by depth; 
```

或`repeat()`加连接：

```
select repeat('_', 4 * depth) || name
from test 
order by depth; 
```

[http://www.postgresql.org/docs/current/static/functions-string.html](http://www.postgresql.org/docs/current/static/functions-string.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:08:27.097

我无权访问 Postgresql，但在 SQL Fiddle 上，前导空格会被自动抑制。

I changed space to underscore and it works.

My code (based on `REPEAT`):

```
select REPEAT(REPEAT('_', 4), depth) || name as "Column" from test order by depth; 
```

Link to the SQL Fiddle with your data: [http://sqlfiddle.com/#!1/96f11/4](http://sqlfiddle.com/#!1/96f11/4)

# css - 同步 CSS 动画和旋转过渡

> ID：15442653
> 
> 赞同：1
> 
> 时间：2013-03-15T21:49:17.583
> 
> 标签：css, css-transitions, webkit-transform

```
<style> 
div
{
width:50px;
height:100px;
background:red;
position:relative;
animation:myfirst 5s infinite alternate;
-webkit-animation:myfirst 5s infinite alternate;
}

@keyframes myfirst
{
0%   { left:0px; top:0px;}
25%  { left:200px; top:0px;}
50%  { left:200px; top:200px;}
75%  { left:0px; top:200px;}
100% { left:0px; top:0px;}
}

@-webkit-keyframes myfirst 
{
0%   { left:0px; top:0px;}
25%  { left:200px; top:0px;}
50%  { left:200px; top:200px;}
75%  { left:0px; top:200px;}
100% { left:0px; top:0px;}
}

</style>

<body>

<div></div>

</body> 
```

是否可以为此添加某种旋转过渡？我尝试将代码添加到 div 声明并创建另一个选择器，但这些似乎都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:12:16.587

您应该添加并定义另一个动画，可能像这样：

```
@keyframes rotate
{
from {
        transform: rotate(0deg);
    }
to { 
        transform: rotate(360deg);
    }
} 
```

然后将动画添加到您的元素中，用逗号分隔：

```
animation:myfirst 5s infinite alternate, rotate 2.5s linear infinite; 
```

在此示例中，请注意以下事项：

1.  `2.5s`我选择这个是为了在你的第一个动画中一次性完成两个完整的旋转，我认为它看起来更平滑。

2.  `linear`给你在虚空中无尽旋转的感觉。如果您不想要这种效果，请尝试其他功能。

3.  我没有放`alternate`是因为我们希望元素连续旋转。

`[**Demonstration**](http://jsbin.com/isinel/4)`

# windows - LoadLibrary 不会全局加载模块

> ID：15442654
> 
> 赞同：0
> 
> 时间：2013-03-15T21:49:17.550
> 
> 标签：windows, winapi, dll

我有一个场景，我想用`CreateProcessW`这个`CREATE_SUSPENDED`标志创建一个新进程。之后，我使用`CreateRemoteThread`该调用注入一个 DLL `LoadLibraryA`。DLL 启动良好，注入 DLL 的进程等待 DLL 完成它的工作。然后新的过程就恢复了。这一切都很好。但是我注意到，如果注入的 DLL 调用`LoadLibraryA ('advapi.dll')`例如（在主线程/进程被暂停时），则模块不会加载到进程中。这是为什么？

# saml - 服务提供商如何在 IdP 服务器上加强密码提示？

> ID：15442657
> 
> 赞同：3
> 
> 时间：2013-03-15T21:49:28.060
> 
> 标签：saml, saml-2.0

带有“POST”绑定的 SAML 2.0：服务提供商有什么方法可以要求 IdP 对特定请求的用户重新进行身份验证？我的意思是网络用户第一次输入登录名/密码时，它会在浏览器内存中存储某种 cookie，以便它记住用户并且下次在会话中不会再次要求他输入密码。我希望 SP 能够强制执行重新身份验证，这意味着再次要求用户输入密码的命令

我发现的唯一类似的东西（`ForceAuthn`）并没有帮助我：

```
<samlp:AuthnRequest ForceAuthn="true" ... > 
```

根据文档`ForceAuthn`，这正是我所需要的，但由于某种原因，Microsoft ADFS 2.0 完全忽略了它不询问用户密码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T05:51:55.013

ADFS 在 IdP 端登录用户的默认行为是 401 (NTLM) 挑战，所有主流浏览器都会缓存用户的 id/pw 输入。即使您指定“ForceAuthn=\“true\””，它也无济于事，因为客户端浏览器将再次发送您缓存的 id/pw。

有一种方法可以将 ADFS 登录策略的默认行为更改为采用 html 表单登录。假设您在默认位置安装 ADFS，您可以找到 c:\inetpub\adfs\ls\web.config。并且有`<localAuthenticationTypes>`元素，并确保您将`<add name="Forms" page="FormsSignIn.aspx" />`其作为第一个元素。您也可以根据需要自定义登录表单页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-21T04:31:00.383

我偶然发现了 ForceAuthn 参数和 ADFS 的类似问题。

特别要求 ACR 结合 ForceAuthn 属性似乎对我有用：

```
<samlp:AuthnRequest ForceAuthn="true" [...]>
    <samlp:RequestedAuthnContext Comparison="exact">
        <saml:AuthnContextClassRef>
            urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport
        </saml:AuthnContextClassRef>
    </samlp:RequestedAuthnContext>
    [...]
</samlp:AuthnRequest> 
```

这实际上是我要发送到 ADFS 的请求的确切含义：

> 忽略您的身份验证上下文并确保提供用户的密码。

# c# - 如何使用 SendInput 发送斯堪的纳维亚字母

> ID：15442659
> 
> 赞同：2
> 
> 时间：2013-03-15T21:49:43.223
> 
> 标签：c#, sendinput

我正在尝试创建一个虚拟键盘，它使用 SendInput 方法模拟键盘，如下所示：

```
 public static void SendKeyDown(System.Windows.Forms.Keys key)
        {
            INPUT k = new INPUT();
            k.type = (int)InputType.INPUT_KEYBOARD;
            k.ki.wVk = (short)key;
            k.ki.dwFlags = (int)KEYEVENTF.KEYDOWN;
            k.ki.dwExtraInfo = GetMessageExtraInfo();

            SendInput(1, new INPUT[] { k }, Marshal.SizeOf(k));
        } 
```

但我无法从 Keys 枚举中找到斯堪的纳维亚字母 Ä、Ö 和 Å。如何使用 SendInput 方法发送这些信件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T22:13:02.403

您可以使用 发送 Unicode 字符`KEYEVENTF_UNICODE`。

```
k.type = (int)InputType.INPUT_KEYBOARD;
k.ki.wScan = 'ö';
k.ki.wVk = 0;
k.ki.dwFlags = (int)KEYEVENTF.UNICODE | (int)KEYEVENTF.KEYDOWN;
k.ki.dwExtraInfo = GetMessageExtraInfo(); 
```

这比您使用`Oem3`et al 的解决方案更便携，其分配的字符会根据您的应用程序正在执行的平台的文化而有所不同。

（其余的 P/Invoke 签名可以在我的其他[答案](https://stackoverflow.com/a/8885228/1149773)中找到。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T22:04:35.937

自己找到解决方案：

Oem3 = ö, Oem7 = ä, Oem6 = å

# php - 使用 mySQL 数据填充 Android Spinner

> ID：15442661
> 
> 赞同：0
> 
> 时间：2013-03-15T21:50:01.910
> 
> 标签：php, android, json

我有一个微调器，我想用本地主机上的数据库中的数据填充它。我有以下访问数据的 .php 文件，我希望这会将数据传递回 Android，但我不确定如何对 .java 文件进行编码以使其工作。

```
<?php
    $host='localhost';
    $uname='root';
    $pwd='';
    $db='footballtickets';
    $con = mysql_connect($host,$uname,$pwd) or die("connection failed");
    mysql_select_db($db,$con) or die("db selection failed");
    $results=mysql_query("select * from tickettypes",$con);
    while($row=mysql_fetch_array($results))
    {
        $cls[]=$row;
    }
    print(json_encode($cls));
    mysql_close($con);
?> 
```

如何在 Eclipse 中填充微调器？目前使用 API2.2，不确定我是否需要更改它才能使其正常工作。

# android - 如何使用原始查询在列表视图中显示数据库中的数据

> ID：15442662
> 
> 赞同：0
> 
> 时间：2013-03-15T21:50:06.063
> 
> 标签：android, listview

在我的项目中有 2 个活动；在一个活动中，用户输入 2 个症状并按下一个按钮，打开下一个活动。我希望下一个活动根据症状以列表视图格式显示所有可能疾病的名称。谁能告诉我该怎么做？我试过了，但它显示空指针异常。我正在使用 Sqlite 数据库。

```
public class LstView extends Activity {
private Database db;
private Auto ato;
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listname);
        ListView lstv =(ListView) findViewById(R.id.listView1);
        db=new Database(LstView.this);
        db.openDB();
        String a=ato.selected;
        String b=ato.selected1;
       // String[] lst=db.getName(a, b);
        String[] from=new String[]{db.COLUMN_1_NAME};
       int[] to= new int[]{R.id.text};
       Cursor csr=db.getName(a, b); 
      // ArrayAdapter<String> adt= new ArrayAdapter<String>(getBaseContext(),R.layout.list_view,lst);
       SimpleCursorAdapter adt =new SimpleCursorAdapter(this, R.layout.list_view, csr, from, to);
      // SimpleCursorAdapter adt = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, db.getName(a,b), new String[] { "Name" }, new int[] { android.R.id.text1 });
        lstv.setAdapter(adt);
 }

} 
```

* * *

```
String[] Sympt= db.getSymptom();

    ArrayAdapter<String> adapter=new ArrayAdapter<String>(this,R.layout.list_view,Sympt);
    textView.setAdapter(adapter);
    textView.setThreshold(1);
    textView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView arg0, View arg1, int arg2,
                long arg3) {

             int    idn=arg0.getId();
              selected = arg0.getItemAtPosition(arg2).toString();
                System.out.println("newww "+idn);
                System.out.println("newww1 "+selected);
                String[] Sympt1=db.getSymptom1(selected);
                for(int i=0;i<Sympt1.length;i++)
                {
                    System.out.println("value array "+Sympt1[i]);
                }
                ArrayAdapter<String> adapter1 = new ArrayAdapter<String>(getBaseContext(), R.layout.list_view,Sympt1);
                textView1.setAdapter(adapter1);
                textView1.setThreshold(1);
            // TODO Auto-generated method stub
            //Toast.makeText(getApplicationContext(), "HI", Toast.LENGTH_SHORT).show();
        }
    });
textView1.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        // TODO Auto-generated method stub
        int idn1=arg0.getId();
        selected1=arg0.getItemAtPosition(arg2).toString();
        System.out.println("neww2"+idn1);
        System.out.println("neww3"+selected1);

    }
});
search.setOnClickListener(new OnClickListener(){

    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        Intent i = new Intent(getApplicationContext(),LstView.class);
        startActivity(i);
    }

});

}

here is the which im geting after clicking on button 
```

NullPointerException 03-16 09:49:34.003: E/AndroidRuntime(331): at com.example.autocmplt.LstView.onCreate(LstView.java:22) 03-16 09:49:34.003: E/AndroidRuntime(331):在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 03-16 09:49:34.003: E/AndroidRuntime(331): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 03-16 09 :49:34.003: E/AndroidRuntime(331): ... 11 更多 03-16 09:49:37.643: I/Process(331): 发送信号。PID：331 SIG：9 1611) 03-16 09:49:34.003: E/AndroidRuntime(331): ... 11 更多 03-16 09:49:37.643: I/Process(331): 发送信号。PID：331 SIG：9 1611) 03-16 09:49:34.003: E/AndroidRuntime(331): ... 11 更多 03-16 09:49:37.643: I/Process(331): 发送信号。PID：331 SIG：9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T23:24:28.403

什么是数据库？它没有 android 类，所以如果你使用 SQLite，那么你使用的不是 Android 平台提供的版本。

任何时候遇到异常，都*必须*发布 logCat。大多数关注此列表的人都时间紧迫，因此我们不能花一个小时搜索您的代码来查找*可能*导致问题的内容。相反，logCat 会立即识别导致错误的语句。

您还应该考虑为您的代码添加注释，并为您的类、方法和变量提供更多的助记符名称。无论如何，从头开始阅读代码是很困难的，而且当我们必须仔细查看代码以确定“a”应该是什么时，情况会变得更糟。

# php - 如何获取我的 facebook 应用程序用户的所有 ID？

> ID：15442663
> 
> 赞同：0
> 
> 时间：2013-03-15T21:50:18.420
> 
> 标签：php, facebook-graph-api

我尝试使用 facebook API。如何获取我的 facebook 应用程序用户的所有 ID？

这项工作适用于我朋友的 ID：

```
<?php
    require_once "auth/facebook/facebook.php";
  $facebook = new Facebook(array(
      'appId'  => '',
      'secret' => '',
    ));

  $app_id = '';
  $app_secret = '';

    $app_access_token = $app_id . '|' . $app_secret;

    $user = $facebook->getUser();

    if ($user) {
        $user_profile = $facebook->api('/me');
        $friends = $facebook->api('/me/friends');

        echo '<ul>';
        foreach ($friends["data"] as $value) {
            echo '<li>';
            echo '<div class="pic">';
            echo '<img src="https://graph.facebook.com/' . $value["id"] . '/picture"/>';
            echo '</div>';
            echo '<div class="picName">'.$value["id"].'</div>'; 
            echo '</li>';
        }
        echo '</ul>';
    }
?> 
```

是否可以？怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:54:23.537

没有办法从一个电话中得到它。

每次新用户登录您的应用程序时，您*都可以将每个 ID 记录到数据库中。*

```
 $user = $facebook->getUser();
 // Save $user to a database of your choice 
```

# input - 带有用户输入的 Lua

> ID：15442667
> 
> 赞同：0
> 
> 时间：2013-03-15T21:50:35.437
> 
> 标签：input, lua

我对这个 Lua 代码做错了什么？我正在尝试生成两个随机数并询问它们相乘的内容。第一部分很好，但无论我输入什么作为答案，它总是认为它是不正确的。请告诉我我做错了什么以及如何解决它。记住这是 Lua。

```
math.randomseed(os.time())
local a=math.random(10)
local b=math.random(10)

local answer
repeat
io.write("What is ",a,"*",b,"?")    
io.flush()  
answer=io.read()
if answer==a*b then
print("Correct!")
else
print("Try Again")
end
until
answer==a*b 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T21:56:19.767

`io.read()`返回 a `string`，并且您将它与数字进行比较。

你要么需要说`answer=tonumber(io.read())`，要么你需要说`io.read("*n")`。

# html - 如何设计一个 css 渐变看起来像附加的 Facebook 登录屏幕

> ID：15442668
> 
> 赞同：0
> 
> 时间：2013-03-15T21:50:44.397
> 
> 标签：html, css, gradient

我正在学习使用 CSS。作为开发我的一个应用程序的一部分，我必须以卡片的形式在 UI 上显示信息。我似乎无法在 css3 中获得正确的渐变。我不想使用 Photoshop 来获得这种丰富的外观。任何建议都会有所帮助。特别是我可以使用登录窗口后面的白色突出显示的帮助

![http://4.bp.blogspot.com/-97uMEG8EH7k/Ti3-onpY-BI/AAAAAAAAA04/E7PMsEomKk4/s1600/110726_Facebook-in-iPad-Screen4.jpg](../Images/cc0846b078dc01bce5627185aac12dba.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T22:04:57.830

我不会给你完整的解决方案，而是一些提示应该如何实现：

1.  用于`radial gradient`使背景在中心更亮，在边缘附近更暗。因为渐变中间会有一个登录窗口，所以会得到一个*白色的高亮*效果！

2.  用户`linear gradient`作为登录表单窗口的背景。

3.  在登录表单窗口上设置`border-radius`以使该窗口边缘变圆。

4.  在登录时将窗口设置`box-shadow`为该窗口下的阴影。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:06:53.577

（正如标题所示，我假设您只想知道如何创建渐变）

1) 使用浏览器的颜色选择器扩展选择颜色（如 Chrome 的吸管）

2) 使用这个很酷的 CSS3 渐变生成器：http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

而且，你完成了:)。

# android - 刷新时如何在（夏洛克）列表视图中恢复负载指示器？

> ID：15442674
> 
> 赞同：1
> 
> 时间：2013-03-15T21:51:53.083
> 
> 标签：android, actionbarsherlock

观察下图。在我`ListAdapter`将`SherlockListFragment`. 我不知道这是 SherlockActionBar 还是标准 Android 的产品，但无论如何 - 我以后如何将它带回来？我的用例是我有一个刷新按钮，当用户按下我希望清除列表并在加载时再次出现微调器时。

![负载指示器（微调器）的图像](../Images/edf2f9b81ee5c26b03e32a97c4e35eb0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:54:06.107

在您的`SherlockListFragment`, 调用`setListShown(false);`

兼容性文档[`ListFragment`](https://developer.android.com/reference/android/support/v4/app/ListFragment.html#setListShown%28boolean%29)（`SherlockListFragment`扩展自）指出：

> 控制是否显示列表。如果您正在等待初始数据在其中显示，则可以使其不显示。在此期间，将显示一个不确定的进度指示器。

然后当然，一旦你完成刷新，调用`setListShown(true);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T07:22:32.680

推荐电话

```
@Override
public void onStart() {
    super.onStart();

    // When in two-pane layout, set the listview to highlight the selected
    // list item
    // (We do this during onStart because at the point the listview is
    // available.)
    if (getFragmentManager().findFragmentById(R.id.article_fragment) != null) {

        getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
        setListShown(true);
    }
} 
```

# javascript - 抓取选定的图像 id 并将它们存储到整数数组中

> ID：15442675
> 
> 赞同：-1
> 
> 时间：2013-03-15T21:51:55.887
> 
> 标签：javascript, jquery, asp.net-mvc-3

我有像这样渲染的图像

```
<img id="9" class="thumb" src="/Content/uploads/Jellyfish.jpg">
<img id="10" class="thumb" src="/Content/uploads/Lighthouse.jpg">
<img id="11" class="thumb" src="/Content/uploads/Chrysanthemum.jpg"> 
```

现在我想获取用户点击的照片并将该图像 id 发送到数组，该数组稍后将发送到控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:53:37.397

```
var imgs = array();

$('img').click(function(){
    imgs[] = $(this).attr('id');
}); 
```

应该管用。

**编辑：**

抱歉，我的代码中有一些错误，请检查这个**[Fiddle](http://jsfiddle.net/UPmKa/4/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:18:43.270

您可以使用[数组推送方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)。如果您希望它具有切换状态，您可以使用一个类在点击处理程序内部做出决定。

```
var imgList = [];

$('img.thumb').click(function() {
    // Toggle the active class
    $(this).toggleClass('active');

    // If the class just became active
    if ($(this).hasClass('active')) {
        // Get the image ID
        var imgId = $(this).attr('id');
        // Add the ID to your array
        imgList.push(imgId);
    }
}); 
```

**[演示](http://jsfiddle.net/FHuhb/3/)**

# javascript - 在 javascript 中处理数组的副本

> ID：15442676
> 
> 赞同：0
> 
> 时间：2013-03-15T21:52:02.037
> 
> 标签：javascript, arrays, copy

由数组生成的变量何时充当指向数组的指针，何时充当数组的副本？

例如，如果我有一个名为`Array1`

```
a1=Array1; 
```

是`a1`一个副本或指向数组的指针。

如果我修改`a1`它也会修改`Array1`. 通过修改，我的意思是更改一个值，将某些内容推入数组，排序或任何其他可以修改数组的方式。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:54:14.023

javascript 中的变量保存对数组的引用。

如果使用 复制变量值`arr2 = arr1`，则将引用复制到同一数组。因此，任何对 的更改`arr2`都是对 的更改`arr1`。

如果您希望另一个变量保存对副本的引用，以便您可以更改第二个数组而不更改第一个数组，请使用[slice](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)：

```
var arr2 = arr1.slice(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T21:56:43.420

JavaScript 中的变量赋值**永远不会**[为非原始](http://www.ecma-international.org/ecma-262/5.1/#sec-4.3.2)对象（所有不是[value](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Values)的东西）制作副本。

[所有非值的赋值复制*引用*。](http://www.ecma-international.org/ecma-262/5.1/#sec-11.13.1)

# javascript - 如何使用 Javascript if 函数返回月份名称

> ID：15442678
> 
> 赞同：0
> 
> 时间：2013-03-15T21:52:09.993
> 
> 标签：javascript, if-statement

我是 JS 的新手，有一个简单的问题，我怎样才能让我的代码在下面返回月份名称，在这种情况下是 12 月？

谢谢你。

```
window.onload = function() {
    var monthName = getMonth(12);   
    document.getElementById("months").innerHTML = getMonth(month);
};

function getMonth(month) {
    var monthName;
    if (month === 12) {
}
    return monthName;
} 
```

[http://jsfiddle.net/priswiz/kU8Js/](http://jsfiddle.net/priswiz/kU8Js/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:54:44.357

```
function getMonth(monthNumber) {
    var monthNames = [ "January", "February", "March", "April", "May", "June",
    "July", "August", "September", "October", "November", "December" ];

    return monthNames[monthNumber-1];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T21:54:26.433

一些东西：

*   您永远不会将`monthName`变量设置为等于`getMonth`函数中的任何内容。
*   你的逻辑`onload`有点古怪。
*   你需要你`div`有一个“月”的ID，而不是一个班级。

这里是基于您的 JSFiddle 的代码的工作版本：http: [//jsfiddle.net/kU8Js/2/](http://jsfiddle.net/kU8Js/2/)

```
window.onload = function() {
    document.getElementById("months").innerHTML = getMonth(12);   
};

function getMonth(month) {
    var monthName;
    if (month === 12) {
        monthName = "December";
    }
    return monthName;
} 
```

话虽如此，Ellochka Cannibal 有一个更好的方法来做到这一点。但是你去。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T22:02:06.093

您应该定义一个月份数组，然后将其用作月份编号和名称之间的映射。

```
var months = new Array( "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December");
window.onload = function() {
     var monthName = getMonth(12);  

$(".months").html(monthName)   ;
};

function getMonth(monthNo) {

return months[monthNo-1];  //the array start with 0 and month no. start with 1
} 
```

他是一个正在运行的[解决方案](http://jsfiddle.net/kU8Js/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T22:18:50.640

我会将名称存储在地图中以便快速查找，您可以轻松扩展它：

```
var getMonth = function (num) {
    var m = {
        0: 'Jan', 1: 'Feb', 2: 'Mar',
        3: 'Apr', 4: 'May', 5: 'Jun',
        6: 'Jul', 7: 'Aug', 8: 'Sep',
        9: 'Oct', 10: 'Nov', 11: 'Dec'
    }
    return m[num];
} 
```

顺便说一句，这是您更正的 jsfiddle：http: [//jsfiddle.net/kU8Js/4/](http://jsfiddle.net/kU8Js/4/)。您不能将 getElementById 与类一起使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T22:49:39.717

这里有很多答案，所以为什么不去：D

以下内容应该会阻止您在`months`每次调用函数时重新创建数组，并将其（月数组）保留在全局名称空间之外。

```
var monthName = (function() { 
  var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
  return function(month) { 
    return months[month-1]; 
  }
})(); 
```

# haskell - Haskell 中的模糊模式匹配调度

> ID：15442681
> 
> 赞同：2
> 
> 时间：2013-03-15T21:52:25.763
> 
> 标签：haskell, tree, pattern-matching, maybe, pattern-guards

我正在在一棵树上编写一些解析代码。（即斯坦福 nlp 依赖树）

基本上我有这样的功能：

```
m :: DepTree -> Logic
m (w, [E "nsubj" nsubj, E "dobj" dobj]) = ...
m (w, [E "nsubj" nsubj, E "prep" prep]) = ...
m (w, [E "nsubj" nsubj]) = ...
m (_, []) = error "No rules apply" 
```

如果节点有一条`nsubj`和一条`dobj`边从它出来，我想要的是分派到第一条规则。我不在乎它可能还有什么。

显然，我的示例函数没有这样做，因为它要求边缘以正确的顺序出现，并且如果存在更多边缘，它将不匹配。

一种方法是使用警卫来提高表现力，我可以这样做：

```
m (w, es) | (isJust.lookup "nsubj") es && (isJust.lookup "dobj") es = ...
          | ...
          | otherwise = error ... 
```

但这要画得多，我什至不了解目标节点。

有没有一种标准方法可以在像我这样的图上编写模式匹配解析器？或者是否有一些基于 Maybe monad 的魔法..？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T22:00:35.497

您可以使用[模式防护](http://www.haskell.org/haskellwiki/Pattern_guard)：

```
{-# LANGUAGE PatternGuards #-}

m (w, es) | Just nsubj <- lookup "nsubj" es, Just dobj <- lookup "dobj" es = ...
          | ...
          | otherwise = error ... 
```

# .net - 为什么要添加一个 类属性的属性会阻止 FilterItemOnProperty() 正确检索属性的值？

> ID：15442682
> 
> 赞同：0
> 
> 时间：2013-03-15T21:52:29.723
> 
> 标签：.net, vb.net, winforms, combobox, browsable

我编写了一个继承自 System.Windows.Forms.ComboBox 的自定义 ComboBox 控件。它有一个“值”属性，我写如下：

```
Public Property Value() As Object
    Get
        If SelectedIndex = -1 Then Return Nothing
        If String.IsNullOrWhitespace(ValueMember) Then
            Return Items(SelectedIndex)
        Else
            Return FilterItemOnProperty(Items(SelectedIndex), ValueMember)
        End If
    End Get
    Set(ByVal newvalue As Object)
        '...
    End Set
End Property 
```

基本上，如果未选择任何内容，则读取 Value 将返回`Nothing`，如果未设置 ValueMember，则返回所选对象本身，如果设置了 ValueMember，则返回所选对象的适当属性值。

到目前为止，代码运行良好。

但是，最近对用于填充 ComboBox 的类之一进行了如下更改：

```
Partial Public Class Modality
    <Browsable(False)>
    Public Property ModalityID As Integer
    Public Property ModalityName As String
    Public Property ModalityAbbrevName As String
End Class 
```

用作 ComboBox 的 ValueMember 的 ModalityID 属性已添加 Browsable(False) 属性，因此当 Modality 对象的集合绑定到应用程序中其他位置的 DataGridView 控件时，它不会显示为列。

现在这会破坏应用程序，因为 MyComboBox1.Value 现在返回选定的 Modality 对象，而不是选定 Modality 对象的 ModalityID，即使 ComboBox 的 ValueMember 仍设置为“ModalityID”。

深入研究 .NET Framework 的源代码`ListControl.FilterItemOnProperty(object item, string field)`并没有启发我。

问题是，为什么向`<Browsable(False)>`类属性添加属性会阻止`FilterItemOnProperty()`正确检索属性的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:35:37.240

从 ListControl.FilterItemOnProperty Method (Object, String) 方法的参数中，您可以看到属性名称以字符串形式出现（从 ValueMemeber 值给出）。

而且，我没有使用反射器，但认为在方法内部创建了一个对象属性列表并试图将给定的 PropertyName 作为字符串查找。

显然创建一个独立于 BrowsableAttribute 的列表。如果 Attribute 设置为 False 属性将不会列出并且无法找到。

因此，如果此`<Browsable(False)>`属性仅在一个类中，那么在您阅读的代码中`SelectedValue`，只需`MobalityID`从选定对象中读取一个。

如果您有多个具有使用的`<Browsable(False)>`属性的类`ValueMemeber`，`ComboBox`您需要考虑使用属性的名称，例如，也许您可​​以将所有这些命名为“ID”。

如果可以创建一个只有一个属性 .ID 的 Inerface 并将其实现到所有 Browsable(False) 类，然后为具有此接口的类创建通用 Value 属性。然后您可以直接从代码中获取 ID 的属性。

# r - 获取每个集群内的观测值

> ID：15442684
> 
> 赞同：0
> 
> 时间：2013-03-15T19:06:29.303
> 
> 标签：r, cluster-analysis, k-means

在 R 中执行 k-means 后是否可以获得每个集群内的实际观察值？

例如，在我的分析之后，我有 2 个集群，我想在每个集群中找到确切的观察结果，这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T21:37:43.767

```
# random samples
x <- matrix(c(rnorm(30,10,2), rnorm(30,0,1)), nrow=12, byrow=T)

# clustering
clusters <-  kmeans(x, 2)

# accessing cluster membership 
clusters$cluster
[1] 1 1 1 1 1 1 2 2 2 2 2 2

# samples within cluster 1
c1 <- x[which(clusters$cluster == 1),]

# samples within cluster 2
c2 <- x[which(clusters$cluster == 2),]

# printing variables
x
           [,1]       [,2]         [,3]       [,4]       [,5]
 [1,] 10.8415151  9.3075438  9.443433171 13.5402818  7.0574904
 [2,]  6.0721775  7.4570368  9.999411972 12.8186182  6.1697638
 [3,] 11.3170525 10.9458832  7.576416396 12.7177707  6.7104535
 [4,]  8.1377999  8.0558304  9.925363089 11.6547736  9.4911071
 [5,] 11.6078294  8.7782984  8.619840508 12.2816048  9.4460169
 [6,] 10.2972477  9.1498916 11.769122361  7.6224395 12.0658246
 [7,] -0.9373027 -0.5051318 -0.530429758 -0.8200562 -0.0623147
 [8,] -0.7257655 -1.1469400 -0.297539831 -0.0477345 -1.0278240
 [9,]  0.7285393 -0.6621878  2.914976054  0.6390049 -0.5032553
[10,]  0.2672737 -0.6393167 -0.198287317  0.1430110 -2.2213365
[11,] -0.8679649  0.3354149 -0.003510304  0.6665495  0.6664689
[12,]  0.1731384 -1.8827645  0.270357961  0.3944154  1.3564678

c1
          [,1]      [,2]      [,3]      [,4]      [,5]
[1,] 10.841515  9.307544  9.443433 13.540282  7.057490
[2,]  6.072177  7.457037  9.999412 12.818618  6.169764
[3,] 11.317053 10.945883  7.576416 12.717771  6.710454
[4,]  8.137800  8.055830  9.925363 11.654774  9.491107
[5,] 11.607829  8.778298  8.619841 12.281605  9.446017
[6,] 10.297248  9.149892 11.769122  7.622439 12.065825

c2
           [,1]       [,2]         [,3]       [,4]       [,5]
[1,] -0.9373027 -0.5051318 -0.530429758 -0.8200562 -0.0623147
[2,] -0.7257655 -1.1469400 -0.297539831 -0.0477345 -1.0278240
[3,]  0.7285393 -0.6621878  2.914976054  0.6390049 -0.5032553
[4,]  0.2672737 -0.6393167 -0.198287317  0.1430110 -2.2213365
[5,] -0.8679649  0.3354149 -0.003510304  0.6665495  0.6664689
[6,]  0.1731384 -1.8827645  0.270357961  0.3944154  1.3564678 
```

# ios - 如何确定新西兰城市/城镇/邮政编码位于哪个地区？

> ID：15442686
> 
> 赞同：1
> 
> 时间：2013-03-15T21:52:43.670
> 
> 标签：ios, contacts, abaddressbook

我有一个应用程序，它从用户生成的数据中列出了很多邮政地址。在适用的情况下，地址将按州、省或地区分组。

新西兰邮政地址包含城市和邮政编码，但没有地区。是否有任何可用的地区信息可以让我在其中提供新西兰街道地址的城市/城镇或邮政编码并获取地区名称？

例如

```
NSString *region = [nzRegionsForCities objectForKey:@"Dunedin"];
(result is Otago) 
```

或者

```
NSString *region = [nzRegionsForPostalCodes objectForKey:@"6011"];
(result is Wellington) 
```

我希望避免自己创建这样的字典的工作。（我不知道是否有任何城市或邮政编码分布在一个以上的地区。）我阅读了[新西兰](http://en.wikipedia.org/wiki/Postcodes_in_New_Zealand)维基百科页面的邮政编码。邮政编码的第一位数字确定大致区域，但不提供精确匹配。新西兰邮政编码系统于 2006 年 6 月推出，因此用户数据可能没有正确、当前或任何邮政编码。因此，在我的情况下，能够查找城市区域比查找邮政编码区域更重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:59:07.877

您可能能够使用 iOS 框架解决此问题。看看[CLPlacemark](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLPlacemark_class/Reference/Reference.html#//apple_ref/occ/cl/CLPlacemark)和[CLGeocoder](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html#//apple_ref/occ/cl/CLGeocoder)类；我用它们在我的应用程序中构建了一个类似的功能。

# android - Android UI线程时间问题

> ID：15442687
> 
> 赞同：0
> 
> 时间：2013-03-15T21:52:52.870
> 
> 标签：android, ui-thread

我对 Android 中的 UI 线程有疑问：

我的活动扩展了 AsyncTask 以对波形文件进行一些计算。如果我运行一次应用程序，大约需要 15 分钟才能完成。这对我来说不是问题。我想多次启动该过程（例如4次，因为我有4个波形文件）所以我希望时间为1小时（15分钟* 4 = 1小时），但事实并非如此，它持续大约3小时 ！

为了多次启动进程，我创建了一个调用“new ProcessTask().execute();”的函数 4次，我在“onPostExecute”中调用了这个函数

你知道为什么我多次运行它需要更多时间吗？

在此先感谢您的帮助

```
public  void processingRespiratoryFiles() {

        if(p<=MainActivity.count)
        {
        filePath = Environment.getExternalStorageDirectory() + "/external_sd/AudioRecorder/audio"+p+".wav";

        File filein = new File(filePath);
        if (filein.exists()) 
            new ProcessTask().execute();

        }
        else
        {
        RespiratoryHandling(ODI_Sum,0);
        Index.setText(Double.toString(ODI_Sum));
        message2=ODI_Sum;
        }

    }

private class ProcessTask extends AsyncTask<Void, Void, Integer> {

        ProgressDialog dialog;

        @Override
        protected Integer doInBackground(Void... params) {
            return process(filePath);
        }

        @Override
        protected void onPostExecute(Integer result) {////////////////////////////////////////////////////////
            dialog.dismiss();
            if (result > -1)
            {
                p++;
                ODI=(double)result/NumberOfHours;
                ODI_Sum+=ODI;
                processingRespiratoryFiles();

            }
        }

        @Override
        protected void onPreExecute() {
            dialog = ProgressDialog.show(
                    Diagnose.this, "Diagnosing, please wait",
                    "Processing...");
        }
    }

    /**
     * Reset ring buffer for filter process before filtering signal
     * @param alength number of a coefficients
     * @param blength number of a coefficients
     */
    public void resetRingBuffer(int alength, int blength) {
        xv = new double[blength + 1];
        yv = new double[alength + 1];

        px = 0;
        py = 0;
    }

    /**
     * Filter each second of signal and then compute the energy of output
     * @param din input stream of audio file
     * @param length number of read samples
     * @param numChannels number of channels of signal
     * @return energy value of 1 second filtered signal 
     */
    public double readEnergyFiltered(DataInputStream din, int length,
            int numChannels) {
        double energy = 0.0;

        try {
            byte[] byteBuffer = new byte[length * 2 * numChannels]; // 16 bit

            // read length samples from file's stream
            int r = din.read(byteBuffer); // bytes read
            // if reach to end of file
            if (r == -1)
                return -1.0;
            r = r / (2 * numChannels); // samples read

            // apply the filter
            for (int i = 0; i < r; ++i) {
                // get the new sample
                short sample = (short) ((byteBuffer[2 * numChannels * i] & 0xff) | (byteBuffer[2
                        * numChannels * i + 1] & 0xff) << 8);
                xv[px] = (double) sample / 32768.0;

                // compute the output
                double y = bcoef[0] * xv[px];
                for (int j = 1; j < bcoef.length; ++j)
                    y += bcoef[j] * xv[(px - j + xv.length) % xv.length];
                for (int j = 1; j < acoef.length; ++j)
                    y -= acoef[j] * yv[(py - j + yv.length) % yv.length];

                // save the result
                yv[py] = y;

                // update energy
                energy += y * y;

                // increment the index of the ring buffer
                px = (px + 1) % xv.length;
                py = (py + 1) % yv.length;
            }

            return energy;
        } catch (Exception e) {
            e.printStackTrace();
        }
        return -1.0;
    }

    /**
     * Process the filtering, computing energy and estimating number of events 
     * @param filePath path to audio file on sd card
     * @return number of events
     */
    private int process(String filePath) {
        try {
            int event = 0;
            double sum =0.0;

            byte[] header = new byte[44];

            File filein = new File(filePath);
            FileInputStream fin = new FileInputStream(filein);
            BufferedInputStream bin = new BufferedInputStream(fin);
            DataInputStream din = new DataInputStream(bin);

            din.read(header);

            // Sample Rate
            int fs = (header[24] & 0xff) | (header[25] & 0xff) << 8
                    | (header[26] & 0xff) << 16 | (header[27] & 0xff) << 24;
            double Ts = 1.0 / fs;
            Log.v("PERM", "Sample Rate: " + String.valueOf(fs));

            // Num Channels
            int numChannels = (header[22] & 0xff) | (header[23] & 0xff) << 8;
            Log.v("PERM", "Num Channel: " + String.valueOf(numChannels));

            // Bits Per Sample
            int bitsPerSample = (header[34] & 0xff) | (header[35] & 0xff) << 8;
            Log.v("PERM", "Bits per sample: " + String.valueOf(bitsPerSample));

            // Sample Rate
            int numBytes = (header[40] & 0xff) | (header[41] & 0xff) << 8
                    | (header[42] & 0xff) << 16 | (header[43] & 0xff) << 24;
            int N = numBytes / numChannels / (bitsPerSample / 8);
            Log.v("PERM", "Data Length: " + String.valueOf(N));

            // Calibration phase
            // Find average energy for the first 180 seconds
            double energy = 0.0;
            resetRingBuffer(acoef.length, bcoef.length);
            for (int i = 0; i < 30; i++) {
                sum = readEnergyFiltered(din, fs, numChannels);
                energy += sum * Ts;
            }
            if(MainActivity.count==1)
            {
             mean_energy = energy / 30.0;
             ThresholdR = 0.8 * mean_energy;
            }

            Log.v("PERM", "Threshold: " + String.valueOf(ThresholdR));

            // process hold file
            resetRingBuffer(acoef.length, bcoef.length);
            din.close();
            bin.close();
            fin.close();

            fin = new FileInputStream(filein);
            bin = new BufferedInputStream(fin);
            din = new DataInputStream(bin);
            din.read(header);

            N = N / fs;
            int j = 1;
            while (j <= N) {
                int counter = 0;
                //int trigger = 0;
                energy = readEnergyFiltered(din, fs, numChannels) * Ts;
                if (energy >= 0.) {

                    Log.v("PERM", "Energy " + String.valueOf(energy));
//while ((energy <= Threshold) || (trigger < 4))
                    while ((energy < ThresholdR)) {
                        counter++;
                        energy = readEnergyFiltered(din, fs, numChannels) * Ts;
                        Log.v("PERM", "Inner Energy " + String.valueOf(energy));
                        if (energy < 0)
                            break;
                        //trigger++;
                    }
                }

                if (counter > 10)
                    event++;

                if (counter > 0)
                    j += counter;
                else
                    j++;
            }

            Log.v("PERM", "Event: " + String.valueOf(event));

            din.close();
            bin.close();
            fin.close();

            return event;
        } catch (Exception e) {
            e.printStackTrace();
        }

        return -1;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T23:15:18.097

这*确实*需要在 IntentService 中完成。如果您使用 AsyncTask 并意外翻转设备，您的 Activity 将重新启动并且 AsyncTask 将消失。IntentService 将允许您“移动”远离当前活动。

虽然，我不得不说，如果你愿意等待 15 分钟让 AsyncTask 完成，那么你的应用程序是不寻常的。

# mysql - 检测自动增量列

> ID：15442691
> 
> 赞同：6
> 
> 时间：2013-03-15T21:53:13.107
> 
> 标签：mysql, pdo

如何从表中获取 auto_increment 列名**（不是最后的插入 ID）**？

例如：

```
create table members (member_id int auto_increment, name char(50), primary key(member_id)); 
```

我该怎么做才能`member_id`从表成员中获取。

我正在制作一个 php 类，我将添加一个方法，让您可以像这样获得：

```
$members->findById(123); 
```

它应该知道找到自动增量列并在此基础上构建查询然后执行查询。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T22:11:30.787

你可以得到列

```
show columns from members where extra like '%auto_increment%' 
```

第一列`Field`是您的 auto_increment 列名。

```
$sql = "show columns from members where extra like '%auto_increment%'";
$sth = $dbh->prepare($sql) or die($dbh->error());
$sth->execute() or die($dbh->error());
$row = $sth->fetch();
$column = $row['Field']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:14:24.000

```
SELECT  column_name 
FROM    INFORMATION_SCHEMA.COLUMNS 
WHERE    table_name = "members" 
AND     extra = "auto_increment"; 
```

尝试这个！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T22:17:07.107

当我在 Zend Framework 上工作时，我将这种类型的函数实现为 Zend_Db 组件的一部分。我发现访问 INFORMATION_SCHEMA 太慢了，所以我不得不改用 DESCRIBE。

类似于以下内容（但这是我刚刚测试的简化代码，不是 Zend 框架的一部分）：

```
function getAutoIncColumn($table)
{
    global $dbh;

    $stmt = $dbh->query("DESCRIBE `$table`");
    while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
      if (strstr($row["Extra"], "auto_increment")) {
        return $row["Field"];
      }
    }
    return null;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T22:13:48.983

您必须根据 information_schema 动态准备语句，然后执行它。

```
PREPARE stmt FROM concat(
 'select * from members where ', 
 (select COLUMN_NAME 
  from INFORMATION_SCHEMA.COLUMNS 
  where table_name='members' and EXTRA like '%auto_increment%'),
  '=?'
 );
EXECUTE stmt; 
```

# jsf-2 - 查看作用域 bean 没有被破坏

> ID：15442693
> 
> 赞同：2
> 
> 时间：2013-03-15T21:53:26.847
> 
> 标签：jsf-2

我正在使用 JSF 2.1 和 primefaces 3.4。

我所有的 xhtml 视图都由具有页眉、左侧导航面板、页脚和内容的布局组成。托管 bean 在**视图范围内**。

在我的大多数观点中，我使用**preRenderView类型的****f:event**侦听器来初始化某些属性和服务。在侦听器中，我有条件语句来检查**回**发请求。只有当请求不是**回发时，它才会在****preRenderView**监听器中执行完整的代码。

 ******即使我通过左侧导航面板链接导航到任何其他页面（例如从页面**A**到页面**B ），****视图范围**也不会被破坏，当我再次返回页面**A时，****回**发请求的检查返回**true** .不知道为什么会这样。

感谢有人可以帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T01:44:02.617

您需要通过 GET 而不是 POST 进行导航。

即，使用`<h:link>`or`<h:button>`代替`<h:commandLink>`or`<h:commandButton>`用于普通的页面到页面导航。这种方式`isPostback()`将返回`false`。

此外，您不清楚如何观察到视图范围的 bean 没有被破坏。您是否在 bean 的构造函数上放置了一个调试断点，以查看它是否在请求新页面时被调用？如果它确实是完全相同的实例，那么只有当您实际上有条件地包含一个新页面而不是真正导航到物理上不同的视图时才会发生这种情况。******

# django - 浏览页面时如何加载许多对象

> ID：15442695
> 
> 赞同：0
> 
> 时间：2013-03-15T21:53:39.600
> 
> 标签：django, django-templates, django-views

在 Facebook 中，当我们向下滚动时，它会一个一个地加载帖子。我怎样才能在 Django 中做到这一点？我还需要使用什么？

将所有必需的对象从视图传递到模板是否是一种好习惯，这样就不会花费太多时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:24:08.750

该过程如何工作的一般概述：

*   页面加载所有图像的子集。
*   滚动到某个位置时，网页会向 django 服务器上的“加载更多”URL 发出**AJAX**请求。作为 GET/POST 参数或作为 url 的一部分，AJAX 请求包含指示查询集中当前位置的信息（到目前为止已经加载了多少）。网页有一个函数，可以说`recievedMore`，这个函数作为回调提供给 AJAX 调用。
*   'load_more' URL 由`load_more`django 视图支持。该`load_more`视图使用 AJAX 请求中的信息将 QuerySet 过滤到将显示的下一组图像。该视图使用过滤后的 QuerSet 呈现 HTML 片段并将其作为对 AJAX 请求的响应返回。
*   网页接收响应，`recievedMore`使用来自服务器的数据调用函数。该`recievedMore`函数将响应附加到页面上的适当元素。

在客户端使用[无限滚动](http://www.jquery4u.com/tutorials/jquery-infinite-scrolling-demos/)库和[JQuery](http://jquery.com/)可以更轻松地实现这一点。

[Django Pagination](https://docs.djangoproject.com/en/dev/topics/pagination/)也是相关的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-16T03:54:02.027

您可以使用[无限滚动](http://www.infinite-scroll.com/)
它的一个 jquery 插件来发出 ajax 请求 - 并将响应放在标记中的位置

Django 的通用 ListView 支持开箱即用的分页

像这样使用它：

```
import models
from django.views.generic import ListView

class ObjectListView(ListView):
    model = SomeModel
    template_name = 'app/model_list.html'
    context_object_name = "objects"
    paginate_by = 10 
```

现在在您的模板中：
检查是否有下一页项目使用： `page_obj.has_previous`
然后将该网址提供给无限滚动： `?page={{ objects.next_page_number }}`

# iphone - 移动 Safari 浏览器 - 视口问题

> ID：15442696
> 
> 赞同：0
> 
> 时间：2013-03-15T21:53:43.340
> 
> 标签：iphone, html, css, mobile, mobile-safari

我看了又看，找不到解决办法。也许我的更独特一点。我现在的问题是我的背景在移动 Safari 浏览器上被切断了。这是它的外观截图：

![在此处输入图像描述](../Images/6759a4006090c8e4426046763a295615.png)

这是我正在处理的页面的链接以及它的外观： [http ://www2.theadamgroup.com](http://www2.theadamgroup.com)

这是我的正文和 html 的源代码：

```
body {
    font-family:Helvetica, Arial, sans-serif;
    margin:0;
    background-image:url(img/paper-footerbg.png);
    background-attachment:scroll;
    background-repeat:repeat-x repeat-y;
}
body, html {
    -webkit-text-size-adjust: none;
} 
```

这是我的首页如何编码的片段：

```
<body>
<div style="width:100%; min-height:100%;">
<?php include("header.php"); ?>
<div id="mainBox">
  <div id="mainContent">
    <div style="float:left; width:439px; padding:35px 0 0 0;">
      <p style="font-size:34px; line-height:40px; font-weight:bold; color:#009b3a; margin:0;">High-quality printing from your neighbors in Franklin</p>
      <p style="font-size:16px; line-height:22px; margin-top:7px;">The ADAM Group is a full-service printing and design company in Franklin, Tenn. Our specialty is helping businesses develop and print high-quality brochures, catalogs, calendars, books, flyers, stationery, menus, business cards and so much more.</p>
      <p style="font-size:16px; line-height:22px;">We pride ourselves on the professional, fast service we provide in our community. Franklin is our home, and helping our neighbors succeed is our business.</p>
      <p style="margin:42px 0 0 0;" align="center"><a href="#" class="learnmoreBtn"></a></p>
    </div>
    <div style="float:left; width:512px; margin:0 0 0 47px;"><img src="img/tag-products.png" width="512" height="401" /></div>
  </div>
</div> 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:02:57.910

好的，我已经确认修复：在 header.php 文件中添加：

```
<meta name="viewport" content="width=1058px, minimum-scale=0.1, maximum-scale=2.0"> 
```

这将使移动浏览器将文档大小设置为 1058px。

然后为 theadamgroup.css 添加：

```
Body{
   min-width:1058px;
} 
```

如果浏览器宽度低于 1058px 并使其滚动，这将强制文档大于浏览器宽度

# iphone - 如何在 UItableview 下使用 UItableview 创建手风琴？

> ID：15442697
> 
> 赞同：4
> 
> 时间：2013-03-15T21:53:46.027
> 
> 标签：iphone, ios, uitableview, accordion

我正在开发需要 Facebook/Gmail iphone 应用程序类型菜单的应用程序，我已经在 DDMenuController 的帮助下拥有了该菜单。但是现在我有一个要求，其中一个行需要在单击时显示手风琴，而另一个 tableview 有 5 行（都应该是可点击的并且能够推送新的视图控制器）。我看过几个代码示例，但似乎没有什么符合我的要求，所以只是想把它放在这里，希望有人有更好的解决方案。

谢谢，

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-23T16:45:22.653

我的一项工作需要有一个手风琴视图，但有多个级别的单元格展开和折叠，就像你打开/关闭你的目录结构一样。

我做了一个样本，我能够达到预期的结果。基本概念是相同的，我只使用 deleteRowsAtIndexPath 和 insertRowsAtIndex 路径，但通过创建一个具有父子关系的模型对象，并在点击父对象时将子对象加载到主数组中。我不擅长放置教程，所以我分享我的示例代码，希望它对某人有所帮助。

代码在这里[Accordion_git](https://github.com/anoop4real/Accordion)

**更新** 了这个的 SWIFT 版本，不确定是否是最佳的，但它可以工作。

此处编码[Accordion_SWIFT](https://github.com/anoop4real/AccordionSwift)

![手风琴](../Images/d04f854330bd2c890994f1955fbfeb09.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-15T22:06:29.123

更好的解决方案是**展开或折叠**TableView 部分

好的教程可以[在这里找到](http://www.cocoanetics.com/2011/03/expandingcollapsing-tableview-sections/)

[您可以在此处](http://speedy.sh/VwNx9/Expanding-Collapsing-TableView-Sections.zip)下载示例代码

**示例代码**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    // Configure the cell...

    if ([self tableView:tableView canCollapseSection:indexPath.section])
    {
        if (!indexPath.row)
        {
            // first row
            cell.textLabel.text = @"Expandable"; // only top row showing

            if ([expandedSections containsIndex:indexPath.section])
            {
                cell.accessoryView = [DTCustomColoredAccessory accessoryWithColor:[UIColor grayColor] type:DTCustomColoredAccessoryTypeUp];
            }
            else
            {
                cell.accessoryView = [DTCustomColoredAccessory accessoryWithColor:[UIColor grayColor] type:DTCustomColoredAccessoryTypeDown];
            }
        }
        else
        {
            // all other rows
            cell.textLabel.text = @"Some Detail";
            cell.accessoryView = nil;
            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        }
    }
    else
    {
        cell.accessoryView = nil;
        cell.textLabel.text = @"Normal Cell";

    }

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([self tableView:tableView canCollapseSection:indexPath.section])
    {
        if (!indexPath.row)
        {
            // only first row toggles exapand/collapse
            [tableView deselectRowAtIndexPath:indexPath animated:YES];

            NSInteger section = indexPath.section;
            BOOL currentlyExpanded = [expandedSections containsIndex:section];
            NSInteger rows;

            NSMutableArray *tmpArray = [NSMutableArray array];

            if (currentlyExpanded)
            {
                rows = [self tableView:tableView numberOfRowsInSection:section];
                [expandedSections removeIndex:section];

            }
            else
            {
                [expandedSections addIndex:section];
                rows = [self tableView:tableView numberOfRowsInSection:section];
            }

            for (int i=1; i<rows; i++)
            {
                NSIndexPath *tmpIndexPath = [NSIndexPath indexPathForRow:i 
                                                               inSection:section];
                [tmpArray addObject:tmpIndexPath];
            }

            UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

            if (currentlyExpanded)
            {
                [tableView deleteRowsAtIndexPaths:tmpArray 
                                 withRowAnimation:UITableViewRowAnimationTop];

                cell.accessoryView = [DTCustomColoredAccessory accessoryWithColor:[UIColor grayColor] type:DTCustomColoredAccessoryTypeDown];

            }
            else
            {
                [tableView insertRowsAtIndexPaths:tmpArray 
                                 withRowAnimation:UITableViewRowAnimationTop];
                cell.accessoryView =  [DTCustomColoredAccessory accessoryWithColor:[UIColor grayColor] type:DTCustomColoredAccessoryTypeUp];

            }
        }
    }
} 
```

# jquery - 如果访问者单击网页上除 div 之外的任何其他位置，则动画恢复为默认值

> ID：15442698
> 
> 赞同：-1
> 
> 时间：2013-03-15T21:53:52.450
> 
> 标签：jquery, click, jquery-animate

```
$("#image").click(function(){
        $("#image-container").animate({"width": "350px"}, 500);
    }); 
```

当访问者单击其他任何地方而不是#image 时，如何使#image-container 动画恢复到其原始大小？

我可以这样做，用原始尺寸动画背面的东西。

```
$("#image").click(function(){
        $("#image-container").animate({"width": "200px"}, 500);
    }); 
```

但是有没有更好的方法，当访问者点击其他地方时，如何让 div 动画？

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:57:56.803

以下代码正在使用[提琴手](http://jsfiddle.net/ywTKL/1)

```
$(document).click(function(){
        $("#image-container").animate({"width": "200px"}, 500);
 });
$("#image").click(function(){
        $("#image-container").animate({"width": "350px"}, 500);
        return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T21:55:57.767

你有没有试过这样：

[http://api.jquery.com/not/](http://api.jquery.com/not/)

```
.not( selector )Returns: jQuery
Description: Remove elements from the set of matched elements. 
```

或者这个答案：[jQuery 选择器不是](https://stackoverflow.com/questions/3310134/jquery-selector-not)

//将选择器应用于所有可见项

```
$(document).find('*').not("#image").is(':visible').click(function(){
        $("#image-container").animate({"width": "200px"}, 500);
 }); 
```

# perl - Perl 5.14 哈希表中的神秘密钥无处不在

> ID：15442701
> 
> 赞同：0
> 
> 时间：2013-03-15T21:54:05.263
> 
> 标签：perl, hash, autovivification

我在我的代码中使用哈希表

```
my %stat = ();
# read files and do some initialization 
# like  $stat{$key} = {k1=>v1, k2=>v2, k3=>v3};
#   I have located the buggy code
# I want to do something according to c1 and c2 parsed from each line of the file
if(!exists $stat{c1}) {   # I thought I would have initialized all possible used keys here, but it is not true as seen below
    $stat{c1} = {k1=>0, k2=>0, k3=>0};
} 
if( $c1 == $c2) {
    $stat{c1}{k1}++;
} else {
    $stat{c1}{k2}++;
    $stat{c2}{k3}++;  #Note: I forgot to check whether $stat{c2} has been initialized here!
}

map {
    my $val = $stat{$_}{k1};  
    print "$val\n";     # run time error shows "use of uninitalized $val"
} keys %stat; 
```

我写了一些打印语句来调试程序。我发现哈希表“%stat”中神秘地出现了一些键值，尽管我从未插入过它！假设 $stat{510} 以某种方式存在，尽管我从未插入它，但它的值（在我的例子中是哈希表引用）没有初始化。我必须写一个声明：

```
map { delete $stat{$_} if(!defined $stat{$_}{k1}) } keys %stat; 
```

删除不需要的密钥。

你能告诉我为什么会从（keys %stat）中出现一些神秘的钥匙吗？

谢谢，杰夫

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T22:03:51.483

> 你能告诉我为什么会从（keys %stat）中出现一些神秘的钥匙吗？

因为您没有显示的代码以某种方式创建了它们。

也许你做到了`$stat{510}{k1}`？请记住，

```
$stat{510}{k1} 
```

简称

```
$stat{510}->{k1} 
```

和

```
$x->{...} 
```

做

```
( $x //= {} )->{...} 
```

所以

```
$stat{510}{k1} 
```

做

```
( $stat{510} //= {} )->{k1} 
```

请注意这是如何分配给 的`$stat{510}`？

* * *

不赞成使用`map`作为`for`循环。

```
map { delete $stat{$_} if(!defined $stat{$_}{k1}) } keys %stat; 
```

最好写成

```
delete $stat{$_} for grep !defined($stat{$_}{k1}), keys %stat; 
```

甚至

```
delete @stat{ grep !defined($stat{$_}{k1}), keys %stat }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T21:59:45.973

因为自动复活。这意味着当您引用哈希条目时，它会毫无怨言地创建。如果你当时没有赋值，它会被初始化为`undefined`. 因此，在您拥有的代码部分中

```
##read files and do some initialization 
```

确保您没有使用 key 读取或写入条目`510`。

# java - SAXParser - 在 XML 结构的不同级别处理具有相同文本的标签

> ID：15442707
> 
> 赞同：2
> 
> 时间：2013-03-15T21:54:18.180
> 
> 标签：java, xml, xml-parsing, saxparser

我想从一个带有`SAXParser`. 但它的结构对我来说很难，我是 XML 和 SAX 的新手。

**问题：**新闻站点使用相同的标签名称作为站点名称，并为其 XML 使用新闻标题。

当我运行 Java 代码时，它可以正常工作，但问题在于输出。

我怎样才能**只**获取`<item>`标签的子标签：`<title>`？我不想在我的应用程序上显示网站标题。这对我来说是个大问题。

## XML 端

```
<channel>

   <title>Site Name</title>

   <item>  
       <title>News Title!</title>       
   </item>

</channel> 
```

## Java 端

java文件中没有错误:)

```
try {

            SAXParserFactory factory = SAXParserFactory.newInstance();
            SAXParser saxParser = factory.newSAXParser();

            DefaultHandler handler = new DefaultHandler() {

                boolean newsTitle   = false;

                public void startElement(String uri, String localName,
                        String qName, Attributes attributes)
                        throws SAXException {

                    //System.out.println("Start Element :" + qName);

                    if (qName.equalsIgnoreCase("title")) {
                        newsTitle = true;
                    }

                }

                public void endElement(String uri, String localName,
                        String qName) throws SAXException {

                    //System.out.println("End Element :" + qName);

                }

                public void characters(char ch[], int start, int length)
                        throws SAXException {

                    if (newsTitle) {
                        System.out.println("Title : "
                                + new String(ch, start, length));
                        newsTitle = false;
                    }

                }

            };

            saxParser
                    .parse("C:\\ntv.xml",handler);

        }
        catch (Exception e) {
            e.printStackTrace();
        } 
```

**输出：**

```
Title : Site Name

Title : News Title 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:32:26.350

您可以使用**XPath**而不是使用 SAX 解析 XML。

您的案例的 XPath 表达式是：

```
/channel/item/title 
```

示例代码：

```
import org.xml.sax.InputSource;

import javax.xml.xpath.XPathExpressionException;
import javax.xml.xpath.XPathFactory;
import java.io.StringReader;

public class XPathTest {

    public static void main(String[] args) throws XPathExpressionException {

        String xml = "<channel>\n" +
                "\n" +
                "   <title>Site Name</title>\n" +
                "\n" +
                "   <item>  \n" +
                "       <title>News Title!</title>       \n" +
                "   </item>\n" +
                "\n" +
                "</channel>";

        Object result = XPathFactory.newInstance().newXPath().compile("/channel/item/title").evaluate(new InputSource(new StringReader(xml)));
        System.out.print(result);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:02:09.743

您可以将堆栈添加到您的 DefaultHandler。当您在`startElement`将标签推入堆栈中找到标签时，然后`endElement`将最顶部的标签从堆栈中弹出。当您想知道您在文档中的位置时，请检查堆栈是否包含 /title/item/title 或仅 /title。

如果您不关心名称空间，请使用 localName 而不是 qName。qName 可能有一个命名空间。

此外，您使用字符方法的方式不正确（这是一个常见问题），请参阅[SAX 教程](http://docs.oracle.com/javase/tutorial/jaxp/sax/parsing.html)中的说明。

# matlab - f 高斯滤波器的特殊替代品

> ID：15442712
> 
> 赞同：0
> 
> 时间：2013-03-15T21:54:52.303
> 
> 标签：matlab, filter, signal-processing, gaussian

我正在尝试使用需要使用 Image Processing Toolbox 函数的 MATLAB 脚本`fspecial()`。

我没有图像处理工具箱，但有信号处理工具箱，其中包含用于创建过滤器的工具套件。可悲的是，我在很大程度上对滤波器的创建一无所知，我想看看是否可以帮助我确定是否可以使用信号处理工具箱中的滤波器创建工具复制以下代码行：

```
fspecial('gaussian', [5 1], 0.75) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:31:26.130

`fspecial()`创建一组用户指定的二维过滤函数，并提供一组默认值。

以下函数将产生等效的二维高斯函数。它也是`fspecial`使用选项运行时的实现`'gaussian'.`

您可以通过 来调用它`h = gaussian2D([5 1], 0.75);`，例如。

```
%% 2D Gaussian filter
function h = gaussian2D(siz, std)

% create the grid of (x,y) values
siz = (siz-1)./2;
[x,y] = meshgrid(-siz(2):siz(2),-siz(1):siz(1));

% analytic function
h = exp(-(x.*x + y.*y)/(2*std*std));

% truncate very small values to zero
h(h<eps*max(h(:))) = 0;

% normalize filter to unit L1 energy 
sumh = sum(h(:));
if sumh ~= 0
    h = h/sumh;
end 
```

# c# - 如何从不同的类访问我的主窗口中的文本框？

> ID：15442714
> 
> 赞同：0
> 
> 时间：2013-03-15T21:55:02.750
> 
> 标签：c#

我确定这是一个非常简单的问题，但我在这里遇到了一些问题。我将在最后粘贴 WPC 表单 + 另一个类的整个代码，对不起，它很长，但只需搜索 ISSUE 这个词，您就会立即解决问题

**我想要达到的目标**

--我的 WPF c# 主窗口称为 MainWindow 并有一个文本框 txtLog

--我的一个名为clientHandler的类需要更改txtLog中的值

--目前我将 MainWindow 类的引用从我的 MainWindow 窗口传递给 MainWindowHandle 方法。

**长代码 - 请在我的 ClientHandler 类中搜索问题行的单词 ISSUE**

**主窗口**

```
public partial class ServerWindow : Window
{

        public static int NoOfRunningClients;
        public static ClientHandler[] RunningClientsPool = new ClientHandler[50];
        public static ClientHandler test;
        public static ManualResetEvent allDone = new ManualResetEvent(false);
        public ServerWindow()
        {
            InitializeComponent();

        }

        private void btnConnect_Click(object sender, RoutedEventArgs e)
        {

        // Data buffer for incoming data.
        byte[] bytes = new Byte[1024];

        // Establish the local endpoint for the socket.
        // The DNS name of the computer
        // running the listener is "host.contoso.com".
        IPHostEntry ipHostInfo = Dns.Resolve(Dns.GetHostName());
        IPAddress ipAddress = ipHostInfo.AddressList[0];
        IPEndPoint localEndPoint = new IPEndPoint(ipAddress, 11000);

        // Create a TCP/IP socket.
        Socket listener = new Socket(AddressFamily.InterNetwork,
            SocketType.Stream, ProtocolType.Tcp);

        // Bind the socket to the local endpoint and listen for incoming connections.
        try
        {
            listener.Bind(localEndPoint);
            listener.Listen(100);
            NoOfRunningClients = 0;
            //RunningClientsPool[NoOfRunningClients];

            while (true)
            {
                // Set the event to nonsignaled state.
                allDone.Reset();

                RunningClientsPool[NoOfRunningClients] = new ClientHandler();
                // Start an asynchronous socket to listen for connections.
                Console.WriteLine("Waiting for a connection...");
                listener.BeginAccept(
                    new AsyncCallback(RunningClientsPool[NoOfRunningClients].AcceptCallback),
                    listener);
                RunningClientsPool[NoOfRunningClients].MainWindowHandle = this;

                // Wait until a connection is made before continuing.
                allDone.WaitOne();
                NoOfRunningClients++;
            }

        }
        catch (Exception exception)
        {
            Console.WriteLine(exception.ToString());
        }

        Console.WriteLine("\nPress ENTER to continue...");
        Console.Read();

    }

        }

    } 
```

* * *

**客户端处理程序**

```
public class ClientHandler
{
    private Socket clientSocket;

    public static ManualResetEvent allDone = new ManualResetEvent(false);
    public ClientHandler(Socket newSocket)
    {
        this.clientSocket = newSocket;
    }
    public ClientHandler()
    {

    }
    public String MyName { get; set; }
    public Window MainWindowHandle { get; set; }
    public void AcceptCallback(IAsyncResult ar)
    {
        // Signal the main thread to continue.
        allDone.Set();

        // Get the socket that handles the client request.
        Socket listener = (Socket)ar.AsyncState;
        Socket handler = listener.EndAccept(ar);

        // Create the state object.
        StateObject state = new StateObject();
        state.workSocket = handler;
        handler.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
            new AsyncCallback(ReadCallback), state);
    }

    public void ReadCallback(IAsyncResult ar)
    {
        String content = String.Empty;

        // Retrieve the state object and the handler socket
        // from the asynchronous state object.
        StateObject state = (StateObject)ar.AsyncState;
        Socket handler = state.workSocket;

        // Read data from the client socket. 
        int bytesRead = handler.EndReceive(ar);

        if (bytesRead > 0)
        {
            // There  might be more data, so store the data received so far.
            state.sb.Append(Encoding.ASCII.GetString(
                state.buffer, 0, bytesRead));

            // Check for end-of-file tag. If it is not there, read 
            // more data.
            content = state.sb.ToString();
            if (content.IndexOf("<EOF>") > -1)
            {
                // All the data has been read from the 
                // client. Display it on the console.

                // ISSUE: I want to use something like this 
                //but have the static reference problem
                //MainWindowHandle.txtLog.Text = "It WORKS!!!!!"; 

                Console.WriteLine("Read {0} bytes from socket. \n Data : {1}",
                    content.Length, content);
                // Echo the data back to the client.
                Send(handler, content);
            }
            else
            {
                // Not all data received. Get more.
                handler.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
                new AsyncCallback(ReadCallback), state);
            }
        }
    }

    private void Send(Socket handler, String data)
    {
        // Convert the string data to byte data using ASCII encoding.
        byte[] byteData = Encoding.ASCII.GetBytes(data);

        // Begin sending the data to the remote device.
        handler.BeginSend(byteData, 0, byteData.Length, 0,
            new AsyncCallback(SendCallback), handler);
    }

    private void SendCallback(IAsyncResult ar)
    {
        try
        {
            // Retrieve the socket from the state object.
            Socket handler = (Socket)ar.AsyncState;

            // Complete sending the data to the remote device.
            int bytesSent = handler.EndSend(ar);
            Console.WriteLine("Sent {0} bytes to client.", bytesSent);

            handler.Shutdown(SocketShutdown.Both);
            handler.Close();

        }
        catch (Exception e)
        {
            Console.WriteLine(e.ToString());
        }
    }

} 
```

非常感谢您抽出宝贵的时间，重复一遍，我希望能够访问 MainWindow 中的 txtLog 和其他 GUI 元素，而不会遇到恒定的静态成员/非静态成员问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:57:54.210

[特别是在支持和鼓励MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)的WPF 中，您不应该传递对表单的引用。这正是 MVVM 架构解决的问题。

研究将两个 UI 元素绑定到[同一个模型](http://msdn.microsoft.com/en-us/library/aa480224.aspx)，以便 UI 元素或模型中的更改同时反映在所有三个位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T22:09:23.683

不确定这是否可行，但我会尝试在“ClientHandler”类中创建一个属性，并将其设置为可能冒泡到其他视图等。就像是

```
public string response { get; set; }

...
// ISSUE: I want to use something like this 
//but have the static reference problem
//MainWi

response = "It WORKS!!!!!"; // set the response PROPERTY to be set 
```

然后，只要类是公共的，就可以在实例化它时在其他对象上查看和设置它。

```
ClientHandler ch = new ClientHandler();
... (perform operations on class that invokes method)
TextBox.Text = ch.response  // as long as your event or method is performed that updates the property it will be set. 
```

老实说，虽然我同意 Eric J. MVVM 在这种事情上要好得多。它隔离事件、方法和属性，并将它们单独保存在 ViewModel 中，然后您将其绑定到您需要的内容。这是一个优势，因为您可以嵌套属性并选择它们的绑定方式。最初设置起来比较困难，但是从长远来看，当多个事物相互交谈时，使用起来会更好。

# python - 如何在 Google App Engine 中使用 python 获取 html 选择选项的值？

> ID：15442717
> 
> 赞同：1
> 
> 时间：2013-03-15T21:55:24.467
> 
> 标签：python, html, forms, google-app-engine, select

我正在使用 Google App Engine 开发一个网络应用程序。我正在使用 Python 运行时环境。我也在使用 Jinja2 框架。我遇到的问题是：在我的 html 页面上，我在表单中有以下标记：

```
 <select name="word" class="span4">
      <option value="authors" selected>Authors</option>
      <option value="blogs">Blogs</option>
      <option value="bloggers">Bloggers</option>
      <option value="ebooks">Ebooks</option>
      <option value="author">Author</option>
      <option value="writers">Writers</option>
      <option value="kindle">Kindle</option>
 </select> 
```

在切换到 using 之前`<select option>`，我`<input type="text"..../>`在 Python 中使用并获取输入值非常简单：

```
def post(self):
    word = self.request.get('word') 
```

但现在我无法让脚本工作，因为我无法从用户提交的表单中访问选定的值。请帮忙，因为我环顾四周，找不到任何清楚的东西！谢谢你，我期待你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-30T07:00:15.843

您可以使用

```
self.request.get_all('word') 
```

[https://developers.google.com/appengine/docs/python/tools/webapp/requestclass?hl=en#Request_get_all](https://developers.google.com/appengine/docs/python/tools/webapp/requestclass?hl=en#Request_get_all)

# c# - 寻找在 C# 中初始化大量对象的更好方法

> ID：15442730
> 
> 赞同：1
> 
> 时间：2013-03-15T21:56:48.787
> 
> 标签：c#

```
new List<BaseType>
{
    new DerivedType
    {
        x="x1",y="y1",z="z1"
    },
    new DerivedType
    {
        x="x2",y="y2",z="z2"
    },
    new DerivedType
    {
        x="x3",y="y3",z="z3"
    },
    new DerivedType
    {
        x="x4",y="y4",z="z3"
    },
    ...
} 
```

在静态方法中，列表是通过上述方法初始化的，我想知道是否有更好的方法在语法上做到这一点。

每次都以相同的顺序设置相同的字段，以防万一。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T21:58:48.103

为什么不在这里使用 for 循环？

```
var list = new List<BaseType>(SomeValue);
for (int i = 1; i < SomeValue; i++) { 
  list.Add(new DerivedType {
    x = string.Format("x{0}", i),
    y = string.Format("y{0}", i),
    z = string.Format("z{0}", i)
  });
} 
```

注意：我假设您的示例代码中的最后一个 init 应该有`"z4"`而不是`"z3"`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T22:01:34.640

如果这些值*实际上是*“x1”等，那么：

```
var list = Enumerable.Range(1, n)
                     .Select(i => new DerivedType {
                                 x = "x" + i,
                                 y = "y" + i,
                                 z = "z" + i
                             })
                     .ToList<BaseType>(); 
```

这依赖于 C# 4 中的协方差。在 C# 3（或针对 .NET 3.5）中，您需要以下内容：

```
var list = Enumerable.Range(1, n)
                     .Select(i => (BaseType) new DerivedType {
                                 x = "x" + i,
                                 y = "y" + i,
                                 z = "z" + i
                             })
                     .ToList(); 
```

或者，如果这些只是样本值（或者即使它们不是），只需添加一个构造函数以`DerivedType`允许您一次性传递三个属性即可减少混乱：

```
new List<BaseType>
{
    new DerivedType("x1", "y1", "z1"),
    new DerivedType("x2", "y2", "z2"),
    new DerivedType("x3", "y3", "z3"),
    new DerivedType("x4", "y4", "z4"),
    ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T01:18:28.407

您可以创建一个子类`List<T>`：

```
public class BaseTypeList : List<BaseType>
{
    public void Add(string x, string y, string z)
    {
        Add(new DerivedType { x = x, y = y, z = z });
    }
} 
```

然后您可以更简洁地使用集合初始化器语法：

```
new BaseTypeList
{
    { "x1", "y1", "z1" },
    { "x2", "y2", "z2" },
    { "x3", "y3", "z3" },
    { "x4", "y4", "z3" /* (sic) */ },
    //...
} 
```

这是因为编译器为集合初始化块中的每个元素执行单独的重载解析，寻找参数类型与给定参数匹配的 Add 方法。

如果您需要同质派生类型，它会有点难看，但有可能：

```
public class BaseTypeList : List<BaseType>
{
    public void Add(Type t, string x, string y, string z)
    {
        Add((BaseType)Activator.CreateInstance(t, x, y, z));
    }
} 
```

然后你会像这样初始化集合：

```
new BaseTypeList
{
    { typeof(DerivedType1), "x1", "y1", "z1" },
    { typeof(DerivedType1), "x2", "y2", "z2" },
    { typeof(DerivedType2), "x3", "y3", "z3" },
    { typeof(DerivedType2), "x4", "y4", "z3" /* (sic) */ },
    //...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T22:03:28.597

使用[NBuilder](http://nbuilder.org/)，您需要一两行代码（您可以从 NuGet 获得）：

```
List<BaseType> list = Builder<DerivedType>.CreateListOfSize(5).Build()
                                          .ToList<BaseType>(); 
```

它使用值`"xN"` `"yN"` `"zN"`（属性名称 + 元素索引）初始化所有属性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T23:52:20.097

我觉得奇怪的是，没有人解决 OP 更普遍的问题，而是专注于示例的人为特例。

正如这里所有重量级人物所注意到的那样，对于示例的特定情况，正如 Perl 苦行者可能会说的那样，“ [TMTOWTDI](http://www.perl.com/pub/1999/03/pm.html) ”——有不止一种方法可以做到这一点。有些比其他更好（或至少更简洁）。

在更一般的情况下，事情并不全是单调序列，我认为没有比这更好的了。你被很多重复的样板卡住了。

C# 没有 JSON 或 Javascript 的对象初始值设定项或 C 的[复合文字](http://www.lysator.liu.se/c/compound-literals.html)（2000 年随 C99 引入），所有这些都为这类事情提供了更简洁的语法。很遗憾，如果你问我。

这里有一个想法，虽然有点丑陋：`SCG.List<T>`许多其他`SCG`集合都有一个构造函数重载，接受一个`IEnumerable<T>`，`IDictionary<TKey,TValue>`或类似的东西，正在构建的对象是从中填充的。可以想象，可以将程序集中所需的数据作为*[嵌入式资源](http://support.microsoft.com/kb/319292)*以一种便于您使用的格式嵌入。它甚至不必是嵌入式资源：一个简单的多行字符串文字，每个项目一个逗号分隔的行就可以了。提供一个简单的工厂类或方法，使用该资源生成一个 LINQy`IEnumerable`小部件流，这些小部件可以交给`List<T>`构造函数和 Bob's-Yer-Uncle。

就像我说的那样，有点丑陋，但它可以避免重复输入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T22:57:03.710

我会使用一个简单的数组来保存数据。然后使用此数组构建派生类型。请注意，数据值可能有些随意（此处显示的字符串和 int 类型）。这可以通过仅使用字符串数组来针对原始问题进行优化。

```
object[] data = 
{
    "x1", "y1", 4,
    "x2", "y2", 3,
    "x3", "y3", 2,
    "x4", "y4", 3
};

int countPerType = 3;
int size = data.Length;

var initMe = new List<BaseType>();

for (int idx = 0; idx < size; idx += countPerType)
{
    initMe.Add(
        new DerivedType() 
        { 
            X = (string)data[idx], 
            Y = (string)data[idx + 1], 
            Z = (int)data[idx + 2] 
        });
} 
```

# xamarin.ios - MonoTouch + Facebook 弹出对话框永远不会消失

> ID：15442731
> 
> 赞同：0
> 
> 时间：2013-03-15T21:56:59.340
> 
> 标签：xamarin.ios

我使用在 iPhone 模拟器上运行的 Monotouch Facebook 绑定作为“iPhone”设备（即 320x480），当它尝试授权时，（应用内）弹出对话框永远不会消失。即使使用 monotouch-bindings 中包含的示例应用程序也会发生这种情况。这是发生的事情：

*   打电话给 Facebook.Authorize
*   弹出**应用内**Facebook登录对话框
*   填写凭据并按“登录”
*   Facebook 的应用程序对话框出现“已授权”
*   点击右上角的“确定”按钮
*   AppDelegate 使用字符串中的正确访问令牌获取 OpenUrl 调用
*   调用 FBSessionDelegate.DidLogin

...但 Facebook 的应用内弹出对话框永远不会消失。

这是使用 monotouch-bindings 中包含的示例应用程序。facebook SDK、MonoTouch 绑定和示例应用程序是从 Github 中提取的，并在今天构建。无论用户是否已获得 Facebook 应用程序的授权，都会发生这种情况。

这不会**发生**在以 Retina 分辨率运行的 iPhone 模拟器中。在这种情况下，它会弹出到一个网络视图（我认为是在 Safari 中）以授权用户，然后它会正确返回到应用程序。

请注意，如果我构建包含在（本机）facebook-ios-sdk 中的 HackBook 示例并在 320x480 设备上的模拟器上运行，它不会**使用**应用内弹出窗口。本机 HackBook 应用程序和 monotouch-bindings 的 FacebookSample 应用程序使用几乎相同的代码，但存在这种行为差异。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:34:57.847

我认为这里有两个问题。

**1.**我的开发工具安装和 iPhone 模拟器有一个问题，有时 Safari 本身甚至无法运行。它会做过渡效果，然后立即消失。我的猜测是 Facebook SDK 正在尝试使用 URL 启动 Safari，当失败时它会退回到应用内 Web 视图。

**2.** Facebook SDK 的 web 视图回退可能被破坏（因为它在你验证后永远不会删除 web 视图），或者我的安装可能有其他问题导致 web 视图保持不变。

重新启动我的 Macbook 并在我的 iOS 模拟器上执行重置内容和设置有时会帮助 Safari 启动，但通常问题最终会再次出现。

我能找到的最接近的 stackoverflow 问题[在这里](https://stackoverflow.com/questions/3317067/iphone-simulator-apps-crash)，他们建议重新安装 Xcode。如果/当我开始这样做时，我会发布是否解决了这个问题。

# css - 如何在引导程序中设置按钮网格？

> ID：15442733
> 
> 赞同：1
> 
> 时间：2013-03-15T21:57:00.703
> 
> 标签：css, html, twitter-bootstrap

我想展示大约 20 个按钮。[（ http://radio.meteor.com/](http://radio.meteor.com/.)的广播电台。 ）

这是 Meteor/Handlebar HTML 现在的样子：

```
<div id="channels" class="span12">
  <div class="btn-group">
    {{#each channels}}
    <button class="btn {{#if playing}}btn-primary{{/if}}" id="channel-{{name}}">
      {{name}}
    </button>
    {{/each}}
  </div>
</div> 
```

我希望按钮在垂直和水平方向上都有。我认为 btn-group 会很好，但我的按钮在最左边。我徒劳地尝试了这个：

```
#channels button {
  float: left;
  width: 120px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:44:45.993

每个 li 设置为 ul 父级宽度的 100%，而不是通道 li 的 css 应该是：

```
#channels li {
   float: left;
   width: auto;
} 
```

# c# - 单击标题网格视图

> ID：15442736
> 
> 赞同：1
> 
> 时间：2013-03-15T21:57:11.187
> 
> 标签：c#

我有一个桌面应用程序，它在 Datagridview 中显示数据，但是在单击 Datagridview 的标题时显示此错误：- 索引超出范围。必须是非负数且小于集合的大小。参数名称：索引
自动选择网格中的第一行为什么会发生自动选择没有排序发生。如何排序。请帮助我摆脱这个错误。非常感谢你。

```
 private void GV_investigate_CellClick(object sender, DataGridViewCellEventArgs e)
    {

        int oid = int.Parse(GV_investigate.SelectedRows[0].Cells[0].Value.ToString());

    }
 private void GV_investigate_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
    {
        GV_investigate.ClearSelection();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:13:20.030

在访问数组/集合中的第一个位置之前，您应该验证数组/集合是否实际上包含至少一个元素，例如：

```
if(GV_investigate.SelectedRows.Count > 0)
{
  int oid = int.Parse(GV_investigate.SelectedRows[0].Cells[0].Value.ToString());
} 
```

# ruby - ruby on rails 字符串问题

> ID：15442739
> 
> 赞同：0
> 
> 时间：2013-03-15T21:57:40.277
> 
> 标签：ruby, string

我已经定义了一个这样的方法：

```
def users_followers
  if current_user == @user
    "People you're following"
  else
    "People "
    your_page(@user).chomp("Page")
    " following"
  end
end 
```

我在第二部分遇到问题。我所看到的只是这个词`" following"`。你能帮我找到解决这个问题的最佳方法吗？

事实上，它在“跟随”之前留下了我需要保留的空间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T22:01:45.190

那是因为在您的 else 中，您有三个语句，其中最后一个正在返回。将它们连接在一起：

```
def users_followers
  if current_user == @user
    "People you're following"
  else
    "People " +
    your_page(@user).chomp("Page") +
    " following"
   end
 end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T22:03:06.653

该方法将返回最后一条语句的结果。在该`else`方法的块中，这将是语句`" following"`。由于该部分前面几行的结果未分配到任何地方，因此结果被忽略。

您可以使用字符串插值来创建单个字符串以返回：

```
"People #{your_page(@user).chomp("Page")} following" 
```

# android - Android：如何绘制位图的单一颜色？

> ID：15442743
> 
> 赞同：1
> 
> 时间：2013-03-15T21:57:57.490
> 
> 标签：android, graphics, bitmap, android-canvas

我是 Android 2D 图形的新手，我想知道是否可以这样做：

[https://dl.dropbox.com/u/6818591/pendulum_background.png](https://dl.dropbox.com/u/6818591/pendulum_background.png)

使用上面链接中的图像，我想根据我提供的角度用特定颜色填充圆圈的白色部分，将黑色和透明部分保持原样。

我设法使用该`drawArc()`方法制作了一条弧线，但它覆盖了图像。由于图像中的弧线不是一个完美的圆，它被稍微压扁了，这个问题变得复杂了。

有没有办法只在空白处绘制？使用过滤器或面具？如果您有示例代码，我可以使用它会很棒！:)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-26T17:53:16.937

尝试这个

```
private Drawable fillBitmap(Bitmap bitimg1, int r, int g, int b) {
        Bitmap bitimg = bitimg1.copy(bitimg1.getConfig(), true);

    int a = transperentframe;
    Drawable dr = null;
    for (int x = 0; x < bitimg.getWidth(); x++) {
        for (int y = 0; y < bitimg.getHeight(); y++) {

            int pixelColor = bitimg.getPixel(x, y);
            int A = Color.alpha(pixelColor);
            bitimg.setPixel(x, y, Color.argb(A, r, g, b));
        }
    }
    Bitmap resizedBitmap = Bitmap.createScaledBitmap(bitimg,
            framewidth + 10, frameheight, true);

    dr = new BitmapDrawable(getResources(), resizedBitmap);

    return dr;
} 
```

通过使用此代码，我成功地在非透明区域填充颜色并保持透明区域不变。

你也可以这样检查：

```
if(canvasBitmap.getPixel(x, y) == Color.TRANSPARENT) 
```

您可以根据需要比较任何颜色 Color.BLUE 任何应用其他方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:16:24.930

您可以`canvas.drawPaint(..)`在位图上使用另一种颜色绘制特定颜色。

```
// make a mutable copy and a canvas from this mutable bitmap
Bitmap bitmap = bitmap.copy(Bitmap.Config.ARGB_8888, true);
Canvas canvas = new Canvas(bitmap);

// get the int for the colour which needs to be removed
Paint paint = new Paint();
paint.setARGB(255, 0, 0, 0); // ARGB for the color, in this example, white
int removeColor = paint.getColor(); // store this color's int for later use

// Next, set the color of the paint to the color another color            
paint.setARGB(/*put ARGB values for color you want to change to here*/);

// then, set the Xfermode of the pain to AvoidXfermode
// removeColor is the color that will be replaced with the paint color
// 0 is the tolerance (in this case, only the color to be removed is targetted)
// Mode.TARGET means pixels with color the same as removeColor are drawn on
paint.setXfermode(new AvoidXfermode(removeColor, 0, AvoidXfermode.Mode.TARGET));

// re-draw
canvas.drawPaint(p); 
```

# php - CodeIgniter 中的敏感数据

> ID：15442745
> 
> 赞同：1
> 
> 时间：2013-03-15T21:58:17.997
> 
> 标签：php, codeigniter, twitter

我正在构建一个 CodeIgniter 2.1.3 应用程序，该应用程序将 Twitter OAuth API 用于多个功能。我将 Twitter API 的所有令牌放在一个单独的文件 app_tokens.php 中，该文件被 git 忽略。我使用什么函数将此文件包含在我的 Tweet 类中？

app_tokens.php：

```
<?php 
$consumer_key = 'xxxxxxxxxxxxxxxxxxxxxx';
$consumer_secret = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx';
$user_token = 'xxxxxxxxxxxxxxxxxxxx-xxxxxxxxxxxxxxxxxxxx';
$user_secret = 'xxxxxxxxxxxxxxxxxxxx';
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:04:59.483

[在https://www.codeigniter.com/user_guide/libraries/config.html](https://www.codeigniter.com/user_guide/libraries/config.html)找到我的答案。不过感谢您的帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T22:05:36.150

`tweet.php`在您的文件夹中创建一个名为的`application/config`文件并将其放入其中，当然用您的真实数据替换 X：

```
<?php

$config['consumer_key'] = 'xxxxxxxxxxxxxxxxxxxxxx';
$config['consumer_secret'] = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx';
$config['user_token'] = 'xxxxxxxxxxxxxxxxxxxx-xxxxxxxxxxxxxxxxxxxx';
$config['user_secret'] = 'xxxxxxxxxxxxxxxxxxxx'; 
```

然后在您的 Tweet 类中通过执行以下操作加载该配置文件：

```
$this->config->load('tweet'); 
```

然后你可以像这样访问这些配置值：

```
$this->config->item('consumer_key'); 
```

# php - 多维 PHP 数组

> ID：15442747
> 
> 赞同：-1
> 
> 时间：2013-03-15T21:58:33.770
> 
> 标签：php, arrays, json, curl, multidimensional-array

我想不出一种方法来编写一个 PHP 脚本来打印这个多维数组的名字、姓氏、电子邮件和帐户 ID。这是从 cURL 脚本返回的 json 数据。你能帮我我的朋友吗？

```
Array
(
    [operationResult] => SUCCESS
    [responseDateTime] => 2013-03-15T15:52:25.180-05:00
    [page] => Array
        (
            [currentPage] => 1
            [pageSize] => 10
            [totalPage] => 1
            [totalResults] => 1
        )
    [searchResults] => Array
        (
            [nameValuePairs] => Array
                (
                    [nameValuePair] => Array
                        (
                            [0] => Array
                                (
                                    [name] => Account Id
                                    [value] => 7601
                                )

                            [1] => Array
                                (
                                    [name] => User Email 1
                                    [value] => jim@email.com
                                )

                            [2] => Array
                                (
                                    [name] => First Name
                                    [value] => Jim
                                )

                            [3] => Array
                                (
                                    [name] => Last Name
                                    [value] => Burns
                                )
                        )
                )
        )
) 
```

**编辑**：很抱歉不包括我的尝试。我尝试了以下方法：

```
foreach ($client_emails_array as $operation) 
{ 
    echo $operation['page']['searchResults']['nameValuePairs']['nameValuePair']['name']."<br>";
    echo $operation['page']['searchResults']['nameValuePairs']['nameValuePair']['value']."<br>";
} 
```

这给了我一点成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:07:01.417

数据结构实际上对于您的用例来说有点差，但您应该能够像这样得到它：

```
$data_array = $main_array['searchResults']['nameValuePairs']['nameValuePair']
$final_array = array();
foreach($data_array as $nvp) {
    $final_array[$nvp['name']] = $nvp['value'];
}
var_dump ($final_array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:09:02.903

从严格意义上讲，只需打印值就可以这样完成：

```
foreach ($operation['searchResults']['nameValuePairs']['nameValuePair'] as $key => $data) {
    echo $data['value'];
} 
```

如果您想做更多事情，您可以在`foreach`块中添加更多逻辑，以检索已打印的值等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T22:13:15.913

根据您的编辑 -`['searchResults']`不在`['page']`数组内。尝试删除`['page']`.

```
foreach ($client_emails_array as $operation) 
{ 
   echo $operation['searchResults']['nameValuePairs']['nameValuePair']['name']."<br>";
   echo $operation['searchResults']['nameValuePairs']['nameValuePair']['value']."<br>";
} 
```

# reporting-services - SSAS/MDX - 总和和组结果 - 日期比较

> ID：15442750
> 
> 赞同：1
> 
> 时间：2013-03-15T21:58:50.937
> 
> 标签：reporting-services, ssas, mdx

我正在处理来自 TFS2010 Cube 的 MDX 数据集（我还在 Team Foundation Server - Reporting & Warehouse 论坛上发帖）。

我希望在过去几个月中产生老化缺陷的趋势。我有代码生成我需要的数据，因为我无法让它以我需要的 SSRS 折线图的方式计算。这是代码：

```
WITH MEMBER [Measures].[AgedGroupTotal] AS ([Measures].[Work Item Count])
MEMBER [Measures].[AgedGroup30] AS IIF(DATEDIFF("d", [Work Item].[System_CreatedDate].CurrentMember.Name, [Date].[Date].CurrentMember.Name) <= 30, [Measures].[Work Item Count], null)
MEMBER [Measures].[AgedGroup3060] AS IIF(DATEDIFF("d", [Work Item].[System_CreatedDate].CurrentMember.Name, [Date].[Date].CurrentMember.Name) > 30 AND DATEDIFF("d", [Work Item].[System_CreatedDate].CurrentMember.Name, [Date].[Date].CurrentMember.Name) <= 60, [Measures].[Work Item Count], null)
MEMBER [Measures].[AgedGroup6090] AS IIF(DATEDIFF("d", [Work Item].[System_CreatedDate].CurrentMember.Name, [Date].[Date].CurrentMember.Name) > 60 AND DATEDIFF("d", [Work Item].[System_CreatedDate].CurrentMember.Name, [Date].[Date].CurrentMember.Name) <= 90, [Measures].[Work Item Count], null)
MEMBER [Measures].[AgedGroup90] AS  IIF(DATEDIFF("d", [Work Item].[System_CreatedDate].CurrentMember.Name, [Date].[Date].CurrentMember.Name) > 90, [Measures].[Work Item Count], null)
SELECT NON EMPTY { [Measures].[AgedGroup30], [Measures].[AgedGroup90], [Measures].[AgedGroup6090], [Measures].[AgedGroup3060], [Measures].[AgedGroupTotal] }
ON COLUMNS, NON EMPTY { ([Date].[Month].[Month].ALLMEMBERS *
[Date].[Week].[Week].ALLMEMBERS *
[Date].[Date].[Date].ALLMEMBERS *
[Work Item].[System_CreatedDate].[System_CreatedDate].ALLMEMBERS ) } DIMENSION PROPERTIES MEMBER_CAPTION, MEMBER_UNIQUE_NAME
ON ROWS FROM ( SELECT ( [Date].[Date].&[2013-01-01T00:00:00] : [Date].[Date].&[2013-03-31T00:00:00] )
ON COLUMNS FROM ( SELECT ( { [Work Item].[System_State].&[Active] } )
ON COLUMNS FROM ( SELECT ( { [Work Item].[System_WorkItemType].&[Bug] } )
ON COLUMNS FROM [Work Item])))
WHERE ([Work Item].[System_WorkItemType].&[Bug], [Work Item].[System_State].&[Active]) 
```

结果如下：图片：http: [//social.msdn.microsoft.com/Forums/getfile/258636](http://social.msdn.microsoft.com/Forums/getfile/258636)

月 周 日期 创建日期 AgedGroup30 AgedGroup90 AgedGroup6090 AgedGroup3060 AgedGroupTotal 2013 年 1 月 05 日结束的一周 2013 年 1 月 1 日 2012 年 3 月 15 日（空） 2（空）（空） 2013 年 1 月 2 日 2013 年 1 月 1 日结束的一周2012 年 3 月 21 日（空） 3 （空）（空） 2013 年 1 月 3 日截至 1 月 5 日的一周 2013 年 1 月 1 日 2012 年 3 月 29 日（空） 1 （空）（空） 2013 年 1 月 1 日 1 月结束的一周05 2013 年 1 月 1 日 2012 年 3 月 30 日 (null) 0 (null) (null) 0 2013 年 1 月结束的一周 05 1/1/2013 4/3/2012 (null) 1 (null) (null) 1 2013 年 1 月截至 1 月 05 日的一周 2013 年 1 月 1 日 2012 年 4 月 5 日（空） 5 （空）（空） 2013 年 1 月 5 日 2013 年 1 月 5 日结束的周 2013 年 1 月 1 日 2012 年 4 月 6 日（空） 10 ( null) (null) 1 月 10 日，2013 年 1 月 5 日结束的一周 2013 年 1 月 1 日 2012 年 4 月 12 日（空） 0（空）（空） 0 2013 年 1 月 05 日结束的周 2013 年 1 月 1 日 2012 年 4 月 14 日（空） 2（空） (空) 2

问题是 [Work Item].[System_CreatedDate].[System_CreatedDate].ALLMEMBERS 需要包含在结果中。如果不包含此成员，则年龄组的 DATEDIFF 公式不会计算并给出 #Error。如果我将此数据输出到带有 AgedGroups 上的 SUM 的 SSRS 表中，并排除创建日期，我将获得所需的数据集：

图片：http : [//social.msdn.microsoft.com/Forums/getfile/258639](http://social.msdn.microsoft.com/Forums/getfile/258639)

月 周 日期 Aged Group30 Aged Group3060 Aged Group6090 Aged Group90 AgedGroupTotal 2013 年 2 月结束的一周 2013 年 2 月 1 日 20 1 2 2 25 2013 年 2 月 2 日 20 1 2 2 25 2013 年 2 月 3 日结束的一周 20 1 2 2 25 2013 年 2 月 4 日 28 0 3 2 33 2013 年 2 月 5 日 37 0 3 2 42 2013 年 2 月 6 日 50 1 3 1 55 2013 年 2 月 7 日 60 1 7 3 71 2013 年 2 月 8 日 58 2 7 3 70 2013 年 2 月 9 日 58 2 7 3 70

问题是我的 MDX 数据集中需要这个总和结果。但是，我不能排除创建问题的创建日期。我是 MDX 的新手，但在 SQL 中，使用 TEMP 表和 sum/group by 会很简单。但是，我知道 MDX 不是这样工作的。谁能帮我弄清楚如何在 MDX 中获取此数据集？

感谢您的任何帮助，

Evgapro

# highcharts - Highcharts 股票图表标志工具提示未显示

> ID：15442757
> 
> 赞同：0
> 
> 时间：2013-03-15T21:59:30.950
> 
> 标签：highcharts, highstock

我怀疑这与分组有关，这是图表选项对象。情节线和系列是异步添加的。我的标志系列有 text 参数。知道我可能缺少什么，或者这真的是数据分组的产物吗？

* * *

更新：我今天注意到当我将鼠标悬停在标志上时出现“未捕获的类型错误：无法读取未定义的属性‘周’”

* * *

```
chartOptions = {
        chart: {
            renderTo: 'chart',
            backgroundColor:'rgba(255, 255, 255, 0.1)',
            borderWidth: 0,
            borderColor: "#FFFFFF",
            defaultSeriesType: 'spline',
            zoomType: 'x'
        },
        colors: [
            '#666666',
            '#AA4643',
            '#4572A7'
        ],
        rangeSelector: {
            buttonSpacing: 5,
            buttonTheme: {
                style: {
                    padding: "0 3px"
                },
                width: null
            },
            selected: 2,
            buttons: [
                {
                    type: 'day',
                    count: 1,
                    text: 'Day'
                },
                {
                    type: 'month',
                    count: 1,
                    text: 'Month'
                },
                {
                    type: 'year',
                    count: 1,
                    text: 'Year'
                },
                {
                    type: 'all',
                    text: 'All'
                }
            ]
        },
        xAxis: {
            type: 'datetime',
            dateTimeLabelFormats: {
                day: '%e %b \'%y',
                month: '%b \'%y',
                year: '%b \'%y'
            },
            plotLines: []
        },
        yAxis: {
            maxPadding: .05,
            minPadding: .05,
            title: {
                text: 'Demand (kW)'
            }
        },
        navigator: {
            enabled: true
        },
        legend: {
            enabled: true,
            layout: 'horizontal',
            align: 'center',
            verticalAlign: 'top',
            floating: true,
            borderWidth: 0,
            y: -5
        },
        plotOptions: {
            series: {
                dataGrouping: {
                    approximation: "average",
                    groupPixelWidth: 30,
                    smoothed: true,
                    unit: [
                        ['minute', [1]],
                        ['hour', [1]],
                        ['day',[1]],
                        ['week',[1]],
                        ['month',[1]],
                        ['year',null]
                    ]
                },
                events: {
                    legendItemClick: function(event) {
                        return !(this.name == 'Baseline');
                    }
                },
                connectNulls: false,
                marker: {
                    enabled: false,
                    states: {
                        hover: {
                            enabled: false
                        }
                    }
                }
            },
            flags: {
                showInLegend: false,
                style: {
                    borderColor: '#cc0000',
                    color: '#cc0000'
                }
            }
        },
        series: []
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:05:23.050

您的数据应按 x 升序排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:34:46.813

看来这实际上是由未定义 dataGrouping.dateTimeLabelFormats 引起的。不知道为什么，但显然没有定义默认值，所以我只是粘贴了 api 参考中的默认值，它现在可以工作了。

# sql - 从表中获取正确的最后一个 ID

> ID：15442760
> 
> 赞同：0
> 
> 时间：2013-03-15T21:59:56.173
> 
> 标签：sql, pdo

如何在 PDO 中进行 SQL 查询，知道下一个 ID 是什么？我已经测试过`$sql->lastInsertId()`，`SELECT LAST_INSERT_ID() FROM my_table`但根据这些，当我的表中最后一个 ID 为 66 时，最后一个 ID 为 116。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:04:41.830

`LAST_INSERT_ID()`返回使用自动增量插入的最后一个 ID。实际上，从那时起记录可以被删除（可能全部从 67-116），但这不会改变自动增量位置，下一个 id 将是 117。

如果您想知道表中最大的 id 是什么，那么`SELECT max(id) FROM table`可以为您提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T07:21:29.870

我希望能说服你改变主意：

*   **不**希望知道下一个id
*   没有**办法**知道接下来会发生什么。

id 只是一个抽象值，类似于数字只是偶然的。它的目的是**独一无二**。这意味着**永远不需要重用任何值**。所以，它总是必须是一个全新的 id。

这就是为什么您的数据库将其设为 116，而不是 66。
这就是为什么您必须满足于 116，而不是强迫它为 66

更不用说两者`lastInsertId()`和`SELECT LAST_INSERT_ID()`都保证是正确的值，而接受了建议使用`max(lastID)`不是的公认答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T22:03:48.477

如果您在 ID 列上有自动增量，则下一个 ID 并不总是`last item's ID + 1`。因此，如果您插入两个元素（ID 1 和 2），删除第二个元素并再次插入新元素，其 ID 将为 3，而不是 2，但这也取决于您的数据库引擎。

但是，如果您想获取最后一项的 ID，例如，您可以按 ID 降序排列列并选择第一项的 ID

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-15T22:01:50.963

会`select max(lastID) from my_table`工作吗？（假设包含最后创建的 ID 的列名称为 lastID）

# android - 适用于 Android 的短信选项

> ID：15442761
> 
> 赞同：0
> 
> 时间：2013-03-15T21:59:57.387
> 
> 标签：android, android-intent

我有一个使用短信操作的代码。这是我的代码：-

```
public void onClick(View v) 
        {
            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setData(Uri.parse("smsto:"+data.phno));
            //intent.putExtra("address", data.phno);
            intent.putExtra("sms_body","Some Stuff.");
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(intent);
        } 
```

在这种情况下，用户被发送到撰写短信屏幕。我想知道是否有任何其他方式可以向用户发送短信，而无需提示 android 设备的用户，并且是否可以知道上述情况以及我想要的情况是否发送了短信知道。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:39:04.640

```
SMSSender smsSender = new SMSSender( this );
smsSender.sendSMS( phoneNumber, message ); 
```

# playframework-2.0 - 如何为大文件代理 Web 服务？

> ID：15442762
> 
> 赞同：2
> 
> 时间：2013-03-15T21:59:57.510
> 
> 标签：playframework-2.0

我的应用程序正在使用**Java Play 2.0.4**，我需要实现一个控制器，该控制器调用一个 Web 服务（托管在同一主机上的另一台服务器上），它返回一个视频，通常是大尺寸的。我不确定它是否相关，但视频是 m4v/mp4 格式。

执行此操作的正确方法是什么？我怀疑使用`AsyncResult`是正确的，但我不知道如何解决它。

目前，我正在调用 Web 服务并通过以下方式获得 Promise：

```
Promise<Response> promise = WS.url(videoUrl).get(); 
```

之后，我只是将响应作为字节获取，手动设置标头并将其返回到视图：

```
Response response = promise.value().get();
byte[] video = response.ahcResponse().getResponseBodyAsBytes();
response().setContentType(format.equals("m4v") ? "video/x-m4v" : "application/x-shockwave-flash");
response().setHeader("Accept-Ranges", "bytes");
response().setHeader("Content-Range", "bytes 0-" + String.valueOf(video.length-1) + "/" + String.valueOf(video.length));
return ok(video); 
```

这有时有效，但是行为非常不稳定。一些（较短的）视频加载得很好。由于请求被取消，较大的视频会失败。我还注意到对调用 Web 服务的操作的请求被多次发出。始终返回完整的视频长度（或在请求取消之前可以加载的内容）。

我还可以添加我从`src`html5`video`标记的属性调用操作，该标记映射到该操作的路由。

我还注意到 html5 中的大多数视频都以 206 Partial Content 响应状态（例如[http://video-js.zencoder.com/oceans-clip.mp4](http://video-js.zencoder.com/oceans-clip.mp4)）提供，我认为这是流式传输视频所必需的。

任何帮助将不胜感激，我已经坚持了几天了。

提前致谢！

贡萨洛

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:18:38.813

前段时间我有非常相似的任务：[How to send Windows Azure Storage blob to browser with changed header](https://stackoverflow.com/q/14787259/1066240) and I done with ... `java.net.URL`，因为我在正确处理超时、未找到等方面遇到问题。

现在它运行良好，但我没有大文件，大约 30 - 200 mb。

虽然我不确定这种方法是否会让你满意，但你可以检查一下，也可以发送一些回复......也许我也会纠正我的观点:)

```
public static Result movie(String path) {
    try {
        URL url = new URL(path);
        response().setHeader("Content-Disposition", "inline");
        response().setHeader(CONTENT_TRANSFER_ENCODING, "binary");
        return ok(url.openStream()).as("video/mp4");
    } catch (IOException ex) {
        warn("Path " + path + " is not working...");
        return badRequest("Movie server didn't answer");
    }
} 
```

（*很抱歉没有根据您的情况纠正片段，只需复制粘贴......我认为您会毫无问题地理解这个想法*）

# java - 在 jar 中找不到 ResourceBundle

> ID：15442766
> 
> 赞同：1
> 
> 时间：2013-03-15T22:00:06.627
> 
> 标签：java, resourcebundle

将项目导出到 jar 时遇到问题。当我在 Eclipse 中运行项目时，ResourceBundles 工作正常，但不是从 jar 中运行。我将其导出为 Export -> jar 文件。

我在 (Windows) cmd -> java -jar %projectName%.jar 中启动 jar。资源包是：

*   Eclipse：%projectName% -> src -> 语言
*   在罐子里：文件夹语言。

我这样加载它：

```
ResourceBundle.getBundle("language.Language", currentLocale) 
```

我在 Stackoverflow 上查看了很多关于此的其他问题，他们的问题始终是他们没有提供从根目录开始的路径。我不知道为什么这不起作用。我也尝试将这些 .properties 文件放在根目录下......

注意：管理这些包/语言环境的类也在同一个包中。

提前致谢。

**编辑**：也许一些额外的信息，我这样得到字符串：

```
public static String getString(String key) {
        try {
            return ResourceBundle.getBundle("language.Language", currentLocale)
                    .getString(key);
        } catch (MissingResourceException e) {
            return "KEY " + key + " NOT FOUND !";
        }
} 
```

堆栈跟踪：

```
Exception in thread "main" java.util.MissingResourceException: Can't find bundle
 for base name language.Language, locale nl_be
        at java.util.ResourceBundle.throwMissingResourceException(Unknown Source)
        at java.util.ResourceBundle.getBundleImpl(Unknown Source)
        at java.util.ResourceBundle.getBundle(Unknown Source)
        at language.LanguageModel.getString(LanguageModel.java:33)
        at cli.class.method(class.java:35)
        at main.Main.main(Main.java:26) 
```

属性：

```
Language_en_US.properties
Language_fr_FR.properties
Language_nl_BE.properties
.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T22:31:09.027

您传入参数的语言环境将`ResourceBundle.getBundle()`其国家/地区设置为“be”。它应该设置为“BE”。

您还应该考虑使用仅带有语言代码后缀的属性文件，并拥有一个完全没有后缀的备份包：

*   语言：将在最后使用
*   Language_nl ：将在语言为“nl”时使用
*   Language_nl_BE ：如果 Language_nl 特定于比利时，则应覆盖它们的翻译

# ms-access - MS Access (2010) VBA 过滤器不适用于一个子表单

> ID：15442771
> 
> 赞同：0
> 
> 时间：2013-03-15T22:00:38.450
> 
> 标签：ms-access, vba

在过去的几天里，我一直在努力找出这个问题的根源。我在 Internet 上搜索导致此问题的原因并没有结果。

这是一个使用 Access 作为前端 UI 的程序，用户可以将客户端信息输入到托管在 SQL Server 上的数据库中。

交互应该如下：

*   用户单击主窗体中的客户列表
*   帐户列表显示在主窗体中
*   用户点击一个帐户
*   产品列表以表格形式显示（用于更新/添加新产品）
*   用户选择其中一种产品
*   相应的每月产品值显示在另一个子窗体上（不在产品列表子窗体下）

初始加载主窗体时，每月产品值过滤器值默认为 0。选择其中一种产品时，应动态更新过滤器。它是在产品表单的 Form_Current 事件下完成的。

我想不通的是：过滤器似乎停留在默认状态。我使用 Debug.Print 语句检查每月产品值表单的最新过滤器值，它显示了过滤器的正确产品 ID。但它根本没有在 UI 上更新。

更奇怪的是：当我更改 vba 代码（有时与过滤器无关）并在应用程序模式下保存它时，它会起作用（即列出每月值），例如：

```
.filter = "prod_id = " & iProdID 
```

到

```
.filter = "[prod_id] = " & iProdID 
```

但是当我将其更改为设计模式并开始进行与此问题无关的更改时，它再次处于应用程序模式时停止工作。这种行为是如此不可预测，以至于我不知道如何进行。我什至删除了表单并重新创建它，它的行为仍然相似。

我正在使用相同的方式在 VBA 中为其他子表单处理文件管理器，并且它们的行为正确。希望得到一些关于我忽略的反馈！

谢谢！基亚特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:15:27.057

我现在开始工作了。为产品值分配过滤器的原始方法是将过滤器值`Form_ProductVals`从产品表单的 ( `Form_Products`)`Form_Current`事件直接分配给产品值表单 ( )。这导致了结果的不一致。

现在我更改了代码以通过主 Clients 表单（包含 Products 和 ProductVals 子表单）分配过滤器值。所以代码从：

```
Form_ProductVals.Form.Filter = "prod_id = " & <new ID> 
```

到

```
Form_Clients.ProductVals.Form.Filter = "prod_id = " & <new ID> 
```

这就是诀窍。虽然我没有解释差异。

# bash - 将单行文件拆分为多行文件，每一行的字数相同？

> ID：15442773
> 
> 赞同：1
> 
> 时间：2013-03-15T22:01:10.943
> 
> 标签：bash, vim

例如，单行文件`line.txt`具有以下行：

`741 12 3 24 45 123 32 111 34`

假设指定每个单词的数量是`3`。那么目标是：

```
741 12 3
24 45 123
32 111 34 
```

在这种情况下，哪些脚本可以提供帮助，一个简单的脚本将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T22:19:28.017

这对 awk 来说是一件容易的事。我也看到了这个问题`vim`，然后用 vim 尝试了一下。

假设光标位于行首。您可以尝试输入（在`NORMAL`模式下）：

```
100@='3f r^M' 
```

然后键入`Enter`。

宏也可以录制`qn3f r<Enter>q`，然后你就`100@n`

**笔记**

*   `^M`你需要输入`<C-V><Enter>`
*   我没有计算你应该做多少次宏，所以只给了 100。如果结果超过 100 行，你只给 500 或 1000。:)
*   如果给定数字有问题，例如该行不能被 3 整除，那么最后一行可能包含小于给定数字的列。例如 3。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T01:10:31.513

```
cat your_file | tr " " "\n" | paste -s -d "  \n" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T13:48:16.317

试试这个

```
printf "%s %s %s\n" $(cat line.txt) 
```

它产生

```
741 12 3
24 45 123
32 111 34 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T22:05:09.137

这是使用 sed 的一种方法。将字数固定为`3`，您可以执行以下操作：

```
sed 's/\( [^ ]* [^ ]*\) /\1\n/g' <filename> 
```

如果要动态指定字数，可以使用以下脚本动态创建正则表达式：

```
#!/bin/sh

test $# -eq 2 || (echo "Usage: $(basename "${0}") <filename> <#words>" && exit 1)

for i in $(seq 2 "${2}"); do
    REGEX=" [^ ]*${REGEX}"
done

cat "${1}" | sed "s/\\(${REGEX}\\) /\\1\n/g" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T22:05:58.267

一种使用方式`awk`：

```
awk '{ 
  for ( i = 1; i <= NF; i++ ) { 
    printf "%s%s", $i, (i % 3 == 0) ? "\n" : " " 
  } 
}' line.txt 
```

它产生：

```
741 12 3
24 45 123
32 111 34 
```

* * *

**编辑**以修复多个字段的脚本（参见注释），而不是 3 的倍数：

```
awk '
  { 
    for ( i = 1; i <= NF; i++ ) { 
      printf "%s%s", $i, (i < NF && i % 3 == 0) ? "\n" : " " 
    } 
  } 
  END { printf "\n" }
' infile 
```

# visual-studio-2012 - 如何使用 IntelliTrace 捕获 Windows 服务的调试信息

> ID：15442782
> 
> 赞同：0
> 
> 时间：2013-03-15T22:02:00.853
> 
> 标签：visual-studio-2012, intellitrace

我正在使用 VS2012 并想捕获调试信息，以便我可以单步执行 VS2012 中的代码。

我已经看到了 .exe 和 Web 的示例，但是如何收集 Windows 服务的调试信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T23:43:12.347

虽然这不是官方支持的方案，但它是可能的，但作为警告，这些步骤有点涉及。查看这篇博客文章，了解需要做什么。[http://blogs.msdn.com/b/msaffer/archive/2011/02/23/using-intellitrace-with-services.aspx](http://blogs.msdn.com/b/msaffer/archive/2011/02/23/using-intellitrace-with-services.aspx)

# jquery - 在依赖于复选框的表单中添加/删除输入

> ID：15442788
> 
> 赞同：0
> 
> 时间：2013-03-15T22:02:28.480
> 
> 标签：jquery, html, forms, input, checkbox

我有一个带有 3 个复选框的表单，每个复选框下都有一个文本区域。

HTML：

```
<form>
<input class="checkbox" id="checkboxsection1" type="checkbox" name="section1">Section 1<br/>
<textarea name="section1textarea"> Sample </textarea><br/>

 <input class="checkbox" id="checkboxsection2" type="checkbox" name="section2">Section 2<br/>
     <textarea name="section2textarea"> Sample </textarea><br/>

 <input class="checkbox" id="checkboxsection3" type="checkbox" name="section3">Section 3<br/>
     <textarea name="section3textarea"> Sample </textarea><br/>

 <input type="submit" class="submit" value="Submit"/> 
```

[JSfiddle](http://jsfiddle.net/grapien/xvZ6F/)

我现在拥有代码的方式是，当未选中复选框时 textarea 是隐藏的，而在使用 jqueryUI 切换功能选中复选框时是可见的。

我正在使用的代码比上面更复杂（为了这个问题，我已经简化了它），但在我的情况下，我无法删除 textarea，因为我有画布元素和 javascript 调用它并依赖它进行输入。如果需要更多信息，我将为上面的代码增加更多复杂性。

提交表单后，所有内容都会传递到购物车。我想知道如果文本区域上方的上述复选框仍未选中，是否有任何方法可以防止将文本区域传递到购物车，而实际上没有删除文本区域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:15:46.940

根据[这个问题的接受答案](https://stackoverflow.com/questions/1215641/will-a-disabled-text-field-submit-when-a-form-is-posted)，禁用的字段不会被发布。

您可以通过调用禁用文本区域：

```
$('textarea[name=section1textarea]').prop('disabled', true); 
```

并通过调用重新启用它：

```
$('textarea[name=section1textarea]').prop('disabled', false); 
```

**更新**

我只想补充一点，复选框值在被选中时会被发布，所以当相应的复选框未被选中时，我会忽略发布的 textarea 值，而不是禁用 textarea。或者两者都只是为了安全。

# java - 不能从静态上下文中引用非静态方法

> ID：15442789
> 
> 赞同：-1
> 
> 时间：2013-03-15T22:02:37.373
> 
> 标签：java, php, phpbb

我正在使用一种登录方法来检查 phpbb 安装中的密码和用户名。

我需要做这项工作来解密 phpbb 加密。

我收到此错误：

```
 vBulletin.java:139: error: non-static method phpbb_hash(String) cannot be referenced from a static context
                    pass2 = PHPBB3Password.phpbb_hash(password);
                                          ^
1 error 
```

这是我的代码：

```
returnCodes[1] = group;
String pass2 = "";
if (forum == Type.myBB) {
    pass2 = MD5.MD5(MD5.MD5(salt) + MD5.MD5(password));
} else if (forum == Type.vBulletin) {
    pass2 = MD5.MD5(password);
    pass2 = MD5.MD5(pass2 + salt);
} else if (forum == Type.SMF) {
    pass2 = MD5.SHA((name.toLowerCase()) + password);
} else if (forum == Type.phpBB) {
    pass2 = PHPBB3Password.phpbb_hash(password);
} else if (forum == Type.IPB) {
    pass2 = MD5.MD5(MD5.MD5(salt) + MD5.MD5(password));
} 
```

这是我正在使用的 PhpBB：

```
public String phpbb_hash(String password) {
      String random_state = unique_id();
      String random = "";
      int count = 6;

      if (random.length() < count) {
         random = "";

         for (int i = 0; i < count; i += 16) {
            random_state = md5(unique_id() + random_state);
            random += pack(md5(random_state));
         }
         random = random.substring(0, count);
      }

      String hash = _hash_crypt_private(password, _hash_gensalt_private(random, itoa64));
      if (hash.length() == 34)
         return hash;

      return md5(password);
   } 
```

旧的 md5 解密器可以工作但不是最新的：

```
 public static String MD5(String text)
        throws NoSuchAlgorithmException, UnsupportedEncodingException {
    MessageDigest md;
    md = MessageDigest.getInstance("MD5");
    byte[] md5hash = new byte[32];
    md.update(text.getBytes("iso-8859-1"), 0, text.length());
    md5hash = md.digest();
    return convertToHex(md5hash);
} 
```

更新：遵循一些评论者不得不说的话：D

```
 PHPBB3Password.java:18: error: non-static method unique_id() cannot be referenced from a static context
      String random_state = unique_id();
                            ^
PHPBB3Password.java:26: error: non-static method unique_id() cannot be referenced from a static context
            random_state = md5(unique_id() + random_state);
                               ^
PHPBB3Password.java:32: error: non-static variable itoa64 cannot be referenced from a static context
      String hash = _hash_crypt_private(password, _hash_gensalt_private(random, itoa64));
                                                                                ^
PHPBB3Password.java:32: error: non-static method _hash_gensalt_private(String,String) cannot be referenced from a static context
      String hash = _hash_crypt_private(password, _hash_gensalt_private(random, itoa64));
                                                  ^
PHPBB3Password.java:32: error: non-static method _hash_crypt_private(String,String) cannot be referenced from a static context
      String hash = _hash_crypt_private(password, _hash_gensalt_private(random, itoa64));
                    ^
5 errors 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:08:26.857

如果 phpbb_hash 使用了一些类属性，那么你需要一个 PHPBB3Password 实例来访问它。所以你会做类似的事情：

```
pass2 = new PHPBB3Password().phpbb_hash(password); 
```

如果 phpbb_hash 不使用一些类属性，那么这个方法应该像这样声明为静态的：

```
public static String phpbb_hash(String password) {
...
} 
```

# java - 在Java中重载方法时，你在哪里计算额外的参数数据？

> ID：15442790
> 
> 赞同：1
> 
> 时间：2013-03-15T22:02:40.197
> 
> 标签：java, parameters, overloading, optional-parameters

我经常发现自己有这样的方法签名：

```
public returnType doStuff(mandatoryParam, calculableParam1, calculableParam2); 
```

在这些情况下，我有时想支持这些不同的方法签名：

```
public returnType doStuff(mandatoryParam);
public returnType doStuff(mandatory, calculable1); 
public returnType doStuff(mandatory, calculable2); 
public returnType doStuff(mandator, calculable1, calculable2); 
```

像这样进行重载时，最好让重载将 null 传递给基方法，如下所示：

```
public returnType doStuff(mandatoryParam){
    doStuff(mandotryParam, null, null)
}

public returnType doSTuff(mandatoryParam, calculable1, calculable2){
    if(null == calculable1){
        calculable1 = calculate(); 
    }
    .
    .
    .
} 
```

或者最好计算可计算的参数，然后将它们传递给基本方法，如下所示：

```
public returnType doStuff(mandatoryParam){
    Calculable calc1 = figureItOut1(); 
    Calculable calc2 = figureItOut2(); 
    doStuff(mandotryParam, calc1, calc2); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:15:09.040

我会选择第二种方法。第一种方法提供了更多方法来做同样的事情，这表明 API 中存在冗余。

但是在某些情况下，应该有默认值的参数太多，提供所有重载版本是不切实际的，而且无论如何对用户都没有好处。那么应该只有一个基本方法接受空参数作为参数的默认值。

# php - 防止共享用户凭据

> ID：15442792
> 
> 赞同：-2
> 
> 时间：2013-03-15T22:02:52.883
> 
> 标签：php, mysql

每所学校都有一个用户名和密码，该学校的所有学生都在使用该用户名和密码。我为学校提供的服务不是免费的，当然我想把它卖给尽可能多的客户。问题是任何学生都可以将他们学校的用户名和密码分享给其他人，这样，很多人会访问我的网站，因为他们知道其中一所学校的用户名和密码。所以，我的问题是：

我怎样才能只允许一个地区（地区）访问我的网站？假设我希望人们只能从纽约市访问我的网站。我怎样才能做到这一点？我正在考虑使用 IP 地址，但它们可靠吗？我还能用什么来提高我的目标？我正在将 PHP 与 MYSQL 数据库一起使用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T22:12:59.090

IP 地址*通常*不可靠用于访问控制（许多不相关的用户，例如[代理服务器后面的 AOL 用户](http://en.wikipedia.org/wiki/Wikipedia:AOL)、免费 WiFi 上的星巴克客户）等可以共享一个 IP 地址，而单个用户可以在会话期间拥有多个 IP 地址（尝试开车用智能手机在路上几英里）。

在*这种情况下*，IP 对于预期目的很可能是可靠的。根据您所谈论的国家/地区，我怀疑学校的 IP 地址将是相当静态的（注意... IP 地址。他们可能有多个。）。

我建议您*记录*用于访问该站点的 IP 地址，而不是通过 IP 地址限制访问。定期检查该列表，如果您发现有*明显*程度的滥用，请为相关学校发布一个新密码。

# java - 如何交换反向构建的单链表中的两个节点？

> ID：15442797
> 
> 赞同：1
> 
> 时间：2013-03-15T22:03:20.023
> 
> 标签：java, linked-list

我已经搞砸了一段时间，似乎无论我做什么，我的输出总是被任意截断或“排序”。移动参考是否足以交换两个元素？我正在努力做到这一点，如果当前节点的 SSN 字段大于前一个，则将前一个链接到当前节点。这就是我的代码目前的样子：

```
public void loadRecords() throws FileNotFoundException {

    Node head = null;
    Node prev = null;
    Node curr = null;
    Scanner fileRead = makeAFile(database);
    fileRead.useDelimiter(";|\n");
    boolean sorted = false;
    while (fileRead.hasNext()) {
        head = new Node(fileRead.next(), fileRead.next(), fileRead.next());
        head.nextOne = prev;

        if (prev != null) {
            for (curr = head; curr != null; curr = curr.nextOne) {
                if ((curr).compareTo(prev) > 0) {

                    head.nextOne = prev.nextOne; //oops, there we go. used to be "head.nextOne = curr.nextOne".
                    prev = head; // not even sure if this is what I want
                    sorted = true;
                } else
                    break;
            }
        }

        if (sorted != true) {
            prev = head;
        }
        sorted = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T23:14:02.503

你可能需要这样的东西

```
 Node tmp = head.nextOne
                head.nextOne = prev.nextOne;
                prev.nextOne = tmp; 
```

# c++ - C++ 中的不透明句柄

> ID：15442799
> 
> 赞同：1
> 
> 时间：2013-03-15T22:03:28.467
> 
> 标签：c++

我正在实现一个不透明的数据结构，它在内部是一个不透明的数据结构数组。我们称它们为记录。一条记录的不同字段将有多个查询，每个查询都具有相同的键。我有一个这种形式的 API 列表：

```
QueryFieldX(KEY key, FieldX& Data) 
```

每个查询当前使用键搜索记录，然后获取数据。

我想将其更改为以下形式：

```
GetHandleToRecord(KEY key, MYHANDLE handle);
QueryFieldX(MYHANDLE handle, FieldX& Data); 
```

优点是消除了每次搜索记录。我可以自己实现一个 MYHANDLE，但我想知道 C++ 中是否有一个好的库/数据结构/原语给我一个可以使用的不透明句柄。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:09:52.937

句柄通常是指向数据的模糊指针，例如this。

```
typedef void* MYHANDLE; 
```

您可以根据需要显式`reinterpret_cast`使用指针，例如在此代码中。

```
MYHANDLE GetHandleToRecord(KEY key)
{
   FieldX *the_result;

   // (assign the correct pointer to the_result)

   return reinterpret_cast<MYHANDLE>( the_result );
}

QueryFieldX(MYHANDLE handle, FieldX& Data)
{
    Data = *reinterpret_cast<FieldX*>( handle )
} 
```

在您的情况下，句柄也可以是数组索引或`std::map`. 以后可以转换回数据本身的任何内容。

# xcode - Xcode 更新到 4.6 后应用程序在设备上崩溃

> ID：15442801
> 
> 赞同：1
> 
> 时间：2013-03-15T22:03:32.593
> 
> 标签：xcode, deployment, ios-provisioning

我正在尝试在设备上运行我的应用程序，但它在输出窗口中出现以下错误：

> **由于未捕获的异常“NSInvalidUnarchiveOperationException”而终止应用程序，原因：“无法实例化名为 NSLayoutConstraint 的类”**

这发生在 Xcode 4.6 更新之后。我曾经有 Xcode 4.3.3，它曾经在那个上正常工作。我的设备是我的 iPad，安装的 iOS 是 5.1.1。

有什么方法可以解决这个问题而不必将我的 ipad 更新到 6.1，因为我担心我将不得不再次获得配置许可证，因为我认为它不会再识别我的 iPad。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T22:06:20.707

您正在一个或多个 NIB 中使用*Auto Layout*，这仅在 iOS 6+ 中受支持。

通过取消选中*Use autolayout*将其删除：

![在此处输入图像描述](../Images/9e92887ee2e8547d71b6cda840963f46.png)

# c# - sql数据库不更新

> ID：15442802
> 
> 赞同：1
> 
> 时间：2013-03-15T22:03:32.573
> 
> 标签：c#, sql, database

我完全一无所知。当我更改数据库中的任何内容（插入、删除...）时，不会保存更改。更改仅在代码运行时可见。

表已满。

我使用 Microsoft SQL Server Compact 4.0 的 .NET Framework 数据提供程序。

对不起我的英语不好。

主要的：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace SemestralniPrace
{
    class Program
    {

        static void Main(string[] args)
        {
            Databaze data = new Databaze(Properties.Settings.Default.DatabazeConnectionString);
            data.Operace("DELETE FROM Pokladna WHERE ID = '1'");
            System.Console.Write(data.Vypis("Select Osoba From Pokladna Where ID='1'"));
            System.Console.ReadKey();          

        }
    }
} 
```

数据库

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Data.SqlServerCe;

namespace SemestralniPrace
{
    class Databaze
    {
        SqlCeConnection con;

        public Databaze(string conString)
        {
            try
            {
                con = new SqlCeConnection(conString);
                con.Open();
            }
            catch
            {
                System.Console.Write("Chyba databáze-konec aplikace");
                System.Console.ReadKey();
                Environment.Exit(0);
            }
        }

        public string Vypis(string prikaz)
        {
            string polozka = "";
            using (SqlCeCommand com = new SqlCeCommand(prikaz, con))
            {

                SqlCeDataReader reader = com.ExecuteReader();
                while(reader.Read())
                {
                    polozka = reader.GetString(0);
                }
                return polozka;
            }
        }

        public void Operace(string prikaz)
        {
            SqlCeCommand command = new SqlCeCommand(prikaz, con);
            command.ExecuteNonQuery();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:18:47.917

在解决方案资源管理器中，单击数据库文件并检查属性的值 `"Copy to Output Directory"`。

我认为您设置了**“始终复制”**的值。您需要将其更改为**“如果较新则复制”**

**编辑：**
当您查看删除后的数据时，请务必使用指向正确文件的连接... :)

# delphi - Indy 中的 WriteInteger / WriteStream 方法在哪里？

> ID：15442805
> 
> 赞同：2
> 
> 时间：2013-03-15T22:03:49.137
> 
> 标签：delphi, indy

[我在这个](http://delphi.about.com/od/internetintranet/l/aa012004a.htm)链接中查看了一个开源代码来学习如何在 Delphi 中使用 Indy 组件，我注意到了一些不错的方法，但是我得到 ide 错误的抱怨它不存在，我问这个只是为了确保，它们是否在旧版本的 Indy 中可用，如果是，它们在 Delphi XE 的新版本 Indy 中的替代品是什么？谢谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T22:10:36.500

您正在查看的代码是为 Indy 9 编写的。XE 随 Indy 10 一起提供。Indy 10 重写了很多东西。最值得注意的是：

1.  `TIdPeerThread`被替换为`TIdContext`，并且上下文管理与父线程分离（`TIdPeerThread`是`TThread`后代，但`TIdContext`不是）。
2.  Indy 9 中的大多数读/写方法`TIdTCPConnection`都移到`TIdIOHandler`了 Indy 10 中，并且大多数写方法也被重命名为`Write()`重载。

所以你要找的是`AContext.Connection.IOHandler.Write(Integer)`,`AContext.Connection.IOHandler.Write(TStream)`等。

# json - 不明白如何使用这个api

> ID：15442807
> 
> 赞同：0
> 
> 时间：2013-03-15T22:04:06.233
> 
> 标签：json, api, request

我目前正在使用这个 API 开始一个项目，guitarparty。问题是我不知道如何使用它。

例如，这条线

```
curl -H 'Guitarparty-Api-Key: {API_KEY}' http://api.guitarparty.com/v2/songbooks/ 
```

我什至不知道我应该把它放在哪里。有人可以举例说明如何使用它吗？就像，只是为了请求一首歌。

API 看起来非常简单。问题是我不知道如何开始。谢谢。

api 文档很短，但我不明白从哪里开始。

[http://www.guitarparty.com/developers/api-docs/api-resources/songs/#available-song-methods](http://www.guitarparty.com/developers/api-docs/api-resources/songs/#available-song-methods)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:33:16.527

curl 是一个用于处理 HTTP 和类似协议的命令行工具。你可以在这里下载： [http ://curl.haxx.se](http://curl.haxx.se)

该行旨在输入到安装了 curl 的系统上的命令行中，可能是在类似 Linux 的系统上。您可能想要下载 curl 并尝试按照示例进行操作。

然而，像这样的 API 的美妙之处在于您不需要使用任何特定的工具——您可以使用任何您想要的工具，只要您可以设置 HTTP 标头值。许多不同的工具和模块可以发出 HTTP 请求。

您必须做的第一件事是在 GuitarParty 站点获取 API 密钥。这是一个可以识别您的应用程序的键，并且可能会对您可以运行的查询数量等施加一些限制。没有一个，您将无法使用 API。您打算将上面的“{API_KEY}”替换为实际的 API 密钥。

查询示例（来自文档）是：

```
curl -H 'Guitarparty-Api-Key: {API_KEY}' http://api.guitarparty.com/v2/songs/?query=Jolene 
```

这里发生的是 curl 被用于通过 HTTP 发出正常的 GET 请求。当您单击链接时，浏览器通常会向您发出这种请求。URL 是“ [http://api.guitarparty.com/v2/songs/?query=Jolene](http://api.guitarparty.com/v2/songs/?query=Jolene) ”——这是你要修改的搜索“Jolene”以外的歌曲。发生的唯一奇怪的事情是自定义 HTTP 标头值被设置：“Guitarparty-Api-Key”，API 密钥。-H 是用于设置自定义标头的 curl 语法。

作为响应，您将从服务器返回一个带有搜索结果的 JSON 编码结构。您将需要解析此结构并提取您感兴趣的部分。

对于任何类型的细节——如何使用特殊标头发出 HTTP 请求，如何解析 JSON——我必须知道你打算使用哪种语言或环境。例如，对于 Python ，我建议您查看模块“urllib2”和“json”。

# c++ - 分析底层 Linux 操作系统函数/代码，如 select() 和 poll()？

> ID：15442810
> 
> 赞同：1
> 
> 时间：2013-03-15T22:04:21.253
> 
> 标签：c++, c, performance, profiling, latency

如果我要编写一个小型 C 或 C++ 应用程序（在 Linux 上）并在分析时调用“本机”Linux 函数，例如 select() 和 poll()，我是否也能看到用于这些函数的汇编程序，它不仅仅是可以分析的用户编写的代码吗？

我很想看看为各种“本机”Linux 功能生成的程序集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:22:17.443

几乎。它们是内核调用，因此您会看到一些内核级别的代码。

# performance - 解释语言中的 If/Else 和 Switch 效率比较

> ID：15442812
> 
> 赞同：1
> 
> 时间：2013-03-15T22:04:29.427
> 
> 标签：performance, if-statement, switch-statement, interpreted-language

我知道在编译源代码时，编译器会以不同的方式处理`if`//`elseif`和语句`else`，`switch`从而使 switch 语句至少与相应的`if`//一样有效`elseis`，`else`并且通常更有效。这通常通过在编译时构建一个在运行时使用的跳转表来完成。`switch`但是，对于解释型语言（非编译型），使用语句时效率是否有显着提高？当然，解释器不能预先建立一个跳转表来提高`switch`语句的效率。

与相应的/ /语句集相比，解释器是否以`switch`提高语句效率的方式处理语句？`switch``if``elseif``else`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:53:19.657

我的猜测是，在解释型语言中，使用 switch 语句的效率收益确实比编译型语言要小；我能想到的唯一实际好处是，在 switch 语句中，操作数（与不同“案例”进行比较的操作数）只会被评估一次，并将立即保存在寄存器中，不会改变并且仅与不同的“案例”进行比较，而 if 语句可能会错过该位并重新评估（即使成本只是从内存中读取）每个 if 子句的操作数。

此外，您还应该考虑可读性。在大多数情况下，这种性能差异可以忽略不计，您应该选择使您的代码更具可读性和可理解性的选项。

# node.js - MongoDB找到不在数组中的用户

> ID：15442815
> 
> 赞同：0
> 
> 时间：2013-03-15T22:04:41.783
> 
> 标签：node.js, mongodb

我目前正在开发一个带有 node.js + mongodb 后端的多人纸牌游戏。我希望用户能够加入游戏，所以我正在实现队列功能。在这个队列函数中，我希望能够从 mongodb 获得一个未启动、未锁定且不包含队列中玩家的游戏。

我的 mongodb 游戏文档示例：

```
{
"_id": {
    "$oid": "512cccf9e4b09000a6f1f079"
},
"mChanceTaken": false,
"mCurrentPlayer": 0,
"mCurrentPlayerName": "-",
"mDeck": [
    {
        "mValue": 13,
        "mSuit": "HEARTS"
    },
    {
        "mValue": 13,
        "mSuit": "SPADES"
    },
    {
        "mValue": 3,
        "mSuit": "SPADES"
    },
    {
        "mValue": 10,
        "mSuit": "SPADES"
    },
    {
        "mValue": 11,
        "mSuit": "CLUBS"
    },
    {
        "mValue": 3,
        "mSuit": "HEARTS"
    },
    {
        "mValue": 7,
        "mSuit": "DIAMONDS"
    },
    {
        "mValue": 9,
        "mSuit": "SPADES"
    },
    {
        "mValue": 8,
        "mSuit": "HEARTS"
    }
],
"mFinished": false,
"mLocked": false,
"mNumberOfPlayers": 4,
"mPlayers": [
    {
        "mPlayerId": "512bd9a1e4b09000a6f1f073",
        "mUsername": "user2",
        "mPosition": 0,
        "mSwitching": true,
        "mFaceUp": [],
        "mFaceDown": [],
        "mHand": []
    },
    {
        "mPlayerId": "512bcb3be4b09000a6f1f06b",
        "mUsername": "user1",
        "mPosition": 0,
        "mSwitching": true,
        "mFaceUp": [],
        "mFaceDown": [],
        "mHand": []
    }
],
"mRoundLength": 60,
"mStarted": false,
"mSwitching": false 
```

}

我当前的查询如下所示：

```
GameBoard.findOneAndUpdate({mStarted: false, mLocked: false, mPlayers: {$not: {mPlayerId: player.mPlayerId}}}, {mLocked: true}, function (err, gameBoard) { 
```

我想我应该使用 $not 运算符，但我不知道如何在我的用例中使用它。请有人帮助我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T22:37:48.783

尝试使用[$ne](http://docs.mongodb.org/manual/reference/operator/ne/)运算符，因为[$not](http://docs.mongodb.org/manual/reference/operator/not/)仅与另一个运算符表达式一起使用。

# jquery - 将背景图像与背景渐变相结合

> ID：15442817
> 
> 赞同：0
> 
> 时间：2013-03-15T22:04:42.580
> 
> 标签：jquery, css, colorbox

是否可以将背景图像与背景渐变相结合？如何通过 jQuery 将其添加到另一个 div？

我的代码看起来像这样......

```
$('#cboxTitle').css({
background-image: 'url(images/login.png)',
background-image: '-webkit-gradient(linear, 0 0, 0 bottom, from(#1f344b), to(#132533))',
background-image: '-webkit-linear-gradient(#1f344b, #132533)',
background-image: '-moz-linear-gradient(#1f344b, #132533)',
background-image: '-ms-linear-gradient(#1f344b, #132533)',
background-image: '-o-linear-gradient(#1f344b, #132533)',
background-image: 'linear-gradient(#1f344b, #132533)'
}); 
```

...但它不起作用。:(

此外，我想通过 jQuery 将样式添加到另一个 div (id="cboxTitle")。你怎么做到这一点？这个跨浏览器是否兼容（包括旧的 Internet Explorer 版本）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:28:42.383

干得好！

[http://jsfiddle.net/Dku2D/](http://jsfiddle.net/Dku2D/)

我为按钮的高度和宽度添加了额外的 CSS。

```
#mybutton {
background: url(https://ssl.gstatic.com/gb/images/k1_a31af7ac.png);
background: -webkit-gradient(linear, 0 0, 0 bottom, from(#1f344b), to(rgba(19, 37, 51, 0.53))), url(https://ssl.gstatic.com/gb/images/k1_a31af7ac.png);
background: -webkit-linear-gradient(#1f344b, rgba(19, 37, 51, 0.53)), url(https://ssl.gstatic.com/gb/images/k1_a31af7ac.png);
background: -moz-linear-gradient(#1f344b, rgba(19, 37, 51, 0.53)), url(https://ssl.gstatic.com/gb/images/k1_a31af7ac.png);
background: -ms-linear-gradient(#1f344b, rgba(19, 37, 51, 0.53)), url(https://ssl.gstatic.com/gb/images/k1_a31af7ac.png);
background: -o-linear-gradient(#1f344b, rgba(19, 37, 51, 0.53)), url(https://ssl.gstatic.com/gb/images/k1_a31af7ac.png);
background: linear-gradient(#1f344b, rgba(19, 37, 51, 0.53)), url(https://ssl.gstatic.com/gb/images/k1_a31af7ac.png);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T01:27:30.823

as already said, you should use CSS3's multiple backgrounds feature:

```
background-image: url(…), -webkit-gradient(linear, 0 0, 0 100%, from(#FFF), to(#000));
background-image: url(…), -moz-linear-gradient(#FFF, #000); 
```

to support this in older browsers just use [http://modernizr.com/](http://modernizr.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T22:10:42.823

喻可以用`div`里面的一个`div`。第一个将具有渐变背景，第二个将具有背景图像。

`.css()` [您可以通过 jQuery 的http://api.jquery.com/css/](http://api.jquery.com/css/)添加 CSS 属性（类似于`$('#cboxTitle').css('color', 'red');`

# php - 不知道为什么使用 CURL 获取重定向的最后一个 url 可以在本地工作，但不能在生产服务器上工作

> ID：15442818
> 
> 赞同：0
> 
> 时间：2013-03-15T22:04:46.957
> 
> 标签：php, curl

希望有人能指出我正确的方向。我有一个重定向到媒体文件的 URL。这就是我要检索的信息。（实际文件的主机和路径）。

使用此代码

```
<?php 
$url='http://urs.pbs.org/redirect/71201be9214242cbbc32633826f8092b';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, TRUE);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_exec($ch);
$newurl=curl_getinfo($ch, CURLINFO_EFFECTIVE_URL);
$p = parse_url($newurl) ;
$rtmp=$p['scheme']."://".$p['host'];
$episode=$p['path'];
echo $rtmp.'<BR>';
echo $episode.'<BR>';
?> 
```

在本地，它工作正常。但是在我的生产服务器上只是踢回 $url。

它打印出 [http://urs.pbs.org](http://urs.pbs.org) /redirect/71201be9214242cbbc3233826f8092b

另外，我应该指出**CURL 安装在生产服务器上**并且工作正常。我没有收到任何错误。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:17:47.270

`CURLOPT_FOLLOWLOCATION`如果启用了安全模式，则无法设置`true`，这是许多生产环境的情况。在这种情况下，会触发警告，如下所示：

> 警告：curl_setopt() [function.curl-setopt]：启用安全模式或在第 56 行的 /home/xxx/public_html/xxx.php 中设置 open_basedir 时，无法激活 CURLOPT_FOLLOWLOCATION

对于这种情况，我的解决方案是手动跟踪 10 个级别的重定向，发出递归 curl 请求。

**更新：**

还`CURLOPT_RETURNTRANSFER`告诉 curl 像这样返回结果：`$result = curl_exec($ch);`所以如果要打印，请在`echo`前面加上`curl_exec()`

# exception - jsf 2 和 spring webflow 中的通用异常处理

> ID：15442819
> 
> 赞同：2
> 
> 时间：2013-03-15T22:04:53.923
> 
> 标签：exception, jsf-2, exception-handling, spring-webflow

我正在尝试在我们的应用程序（primefaces、jsf 和 spring webflow）中实现异常处理。我使用**了 FlowExecutionExceptionHandler**，这适用于一些异常，例如**ActionExecutionException**（在这种情况下能够重定向到错误页面）。不适用于所有其他例外。我需要将用户重定向到关于异常的错误页面（外部流程）和关于会话超时的超时页面。我观察到在**actionListener**调用和 jsf 相关异常中发生异常时， **FlowExecutionExceptionHandler没有被调用。** 有人可以建议我实施以适应上述场景。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T15:58:31.443

尝试使用全局转换：

```
 <!-- your view-states -->

    <!-- errors-pages -->
    <view-state id="defaultError" view="/WEB-INF/errors/defaultError.jsp"/>

    <global-transitions>
        <transition on-exception="java.lang.Exception" to="defaultError"/>
    </global-transitions>
</flow> 
```**

# java - Jpanel 点击创建事件

> ID：15442827
> 
> 赞同：0
> 
> 时间：2013-03-15T22:05:25.220
> 
> 标签：java, swing, jpanel, mouse-listeners

我正在用 Java 制作连接四游戏。我得到了 6*7 布局和声音组件。我想要做的是有空心圆圈，当你点击一个空心圆圈时，它会填充玩家的颜色并且不能再次点击。我不确定如何在这样一个特定区域触发事件。欢迎任何提示或建议:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:16:26.793

阅读有关 MouseMotionListener、MouseListener 的信息。您可以获取鼠标坐标，并且可以知道用户是否单击了鼠标。当用户在特定区域单击时，例如 (x>20, x<30, y>20, y<40) 使用paintComponent 方法绘制具有特定颜色的圆。

# html - 在 vb.net 中处理链接文本

> ID：15442828
> 
> 赞同：0
> 
> 时间：2013-03-15T22:05:35.110
> 
> 标签：html, vb.net, hyperlink, twitterizer

我正在使用 twitterizer 处理一些链接文本。

我以 html 的形式获取链接，所以：

```
<a href="LINK HERE"> 
```

关于如何将它们显示为可点击链接的任何想法？

# php - 在上传进度完成之前使 ajax 上传中止

> ID：15442830
> 
> 赞同：2
> 
> 时间：2013-03-15T22:05:38.233
> 
> 标签：php, javascript, jquery, ajax, file-upload

我有这个带有 abort() 的 ajax 文件上传表单；功能。这是通过单击取消锚点触发的：

```
 $('#cancel').click(function(){ 
     ajaxFileUpload.abort();
     $('#message').html('cancelled');
 }); 
```

当成功函数返回“successfullyUploaded”时，该锚点被隐藏：

```
if(response == 'successfullyUploaded') {$('#cancel').hide(); }); 
```

此时文件已上传，取消上传为时已晚。在大多数情况下，它工作得很好。但是，如果有人在处理上传的 php 页面上上传的文件与包含接收成功数据的表单的页面之间的瞬间单击“取消”，它将显示“已取消”，但实际上上传已完成。所以我想知道是否有某种方法可以检测文件上传何时完成，例如，完成 95%，然后隐藏“取消”锚点。这是可能吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:49:25.480

中止时，您可以向服务器发送第二个 AJAX 请求，告知上传已取消并且必须删除上传的文件（如果存在）。

当您收到来自第二个请求的成功响应时，您可以将**#message**设置为**取消**

# python - BeautifulSoup 没有看到 nobr 标签

> ID：15442836
> 
> 赞同：0
> 
> 时间：2013-03-15T22:06:06.877
> 
> 标签：python, beautifulsoup

我正在用以下格式的 beautifulsoup 抓取页面

```
<tr class="bgWhite">
<td align="center" width="50"><nobr>A</nobr></td>
<td align="center"> 0</td>
<td align="left" width="*"> 1</td>
<td align="center"> 2</td>
<td align="center"> 3</td>
<td align="center"> 4</td>
<td align="center"><nobr> 23-Apr-13 </nobr></td>
</tr> 
```

当我调用`col[5].string`或以这种方式调用 1-5 之间的任何索引时，它工作正常。然而，当我尝试做时，nobr 标签似乎会导致问题并返回 None 值`col[6].string`

我在桌子上搜索

```
for r_index,row in enumerate(table.findAll('tr')):
    col = row.findAll('td') 
```

想法如何获取该数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:11:14.677

根据 BeautifulSoup 的版本，您有两种选择：

BeautifulSoup 4、使用`.stripped_strings`属性查找所有不为空的文本元素：

```
print ' '.join(col[6].stripped_strings) 
```

在 BeautifulSoup 3 中，您需要搜索所有包含的文本：

```
print ' '.join(el.strip() for col[6].findAll(text=True) if el.strip()) 
```

# solr - solr CSV 更新，覆盖参数

> ID：15442839
> 
> 赞同：0
> 
> 时间：2013-03-15T22:06:18.497
> 
> 标签：solr

我正在尝试使 CSV 导入适用于 SOLR，并且覆盖参数有问题。我正在关注这里的文档[http://wiki.apache.org/solr/UpdateCSV#overwrite](http://wiki.apache.org/solr/UpdateCSV#overwrite)，我发现我的索引中有重复项，即使我指定了覆盖。我从一个非常简单的案例开始，我导入 1 条记录，修改 CSV 中的描述字段，然后使用 &overwrite=true 再次导入。生成的 SOLR 查询产生 2 条记录。这是一个错误吗？使用 SOLR 4.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:55:17.487

万一其他人遇到这种情况，它与 CSV 更新端点无关，而是我如何在架构中定义我的 uniqueKey 字段。以下没有工作：

```
<field name="id" type="lowercase" indexed="true" stored="true" required="true" /> 
```

但是当我将类型更改为字符串时它确实有效：

```
<field name="id" type="string" indexed="true" stored="true" required="true" /> 
```

据我所知，这不是 SOLR wiki 上任何地方的记录行为。

# mysql - 无法让我的存储过程在 MySQL 上执行

> ID：15442842
> 
> 赞同：0
> 
> 时间：2013-03-15T22:06:23.320
> 
> 标签：mysql

我尝试创建最简单的程序，但仍然无法执行。

```
create procedure sp_getinfo()
begin
SELECT * FROM `metals`
end 
```

我收到此错误：

> 错误 #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的 '' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T22:10:37.617

尝试类似：

```
DELIMITER //
CREATE PROCEDURE sp_getinfo()
  BEGIN
  SELECT * FROM `metals`;
  END //
DELIMITER ; 
```

我不太了解 MySQL，我只是在 Google 上搜索了一个教程并找到[了这个](http://www.mysqltutorial.org/getting-started-with-mysql-stored-procedures.aspx).

# android - 如何使上传按钮在android应用程序中工作？

> ID：15442843
> 
> 赞同：0
> 
> 时间：2013-03-15T22:06:23.857
> 
> 标签：android, upload, android-webview

这个问题多次遇到，但似乎没有任何解释有效。（或者也许我在这个叫做互联网的混乱中没有找到它）......

我正在开发一个 android 应用程序，它打开一个包含上传按钮的 HTML 页面。它在 WebView 中不起作用。

我试过了：http: [//m0s-programming.blogspot.in/2011/02/file-upload-in-through-webview-on.html](http://m0s-programming.blogspot.in/2011/02/file-upload-in-through-webview-on.html)

但 Eclipse 给出了警告`"openFileChooser(ValueCallback uploadMsg) is never used locally"`。该应用程序应适用于 Android 2.2 (API 8) 及更高版本。

它给出了一些错误，我猜是由于错误的放置`WebView.setWebChromeClient(new CustomWebChromeClient()`

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T20:01:22.343

此处回答了有关文件上传的类似问题：[WebView](https://stackoverflow.com/questions/5907369/file-upload-in-webview)中的文件上传。

不同版本的 Android 也需要不同的方法：[https ://stackoverflow.com/posts/12746435/edit](https://stackoverflow.com/posts/12746435/edit)

这是活动的完整且自给自足的代码：

```
public class FileAttachmentActivity extends Activity {

    private ValueCallback<Uri> mUploadMessage;
    private final static int FILECHOOSER_RESULTCODE = 1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        WebView wv = new WebView(this);
        wv.setWebViewClient(new WebViewClient());
        wv.setWebChromeClient(new WebChromeClient() {
            //The undocumented magic method override  
            //Eclipse will swear at you if you try to put @Override here  
            public void openFileChooser(ValueCallback<Uri> uploadMsg) {
                FileAttachmentActivity.this.showAttachmentDialog(uploadMsg);
            }

            // For Android > 3.x
            public void openFileChooser(ValueCallback<Uri> uploadMsg, String acceptType) {
                FileAttachmentActivity.this.showAttachmentDialog(uploadMsg);
            }

            // For Android > 4.1
            public void openFileChooser(ValueCallback<Uri> uploadMsg, String acceptType, String capture) {
                FileAttachmentActivity.this.showAttachmentDialog(uploadMsg);
            }
        });

        this.setContentView(wv);

        wv.loadUrl("https://dl.dropbox.com/u/8047386/posttest.htm");

    }

    private void showAttachmentDialog(ValueCallback<Uri> uploadMsg) {
        this.mUploadMessage = uploadMsg;

        Intent i = new Intent(Intent.ACTION_GET_CONTENT);
        i.addCategory(Intent.CATEGORY_OPENABLE);
        i.setType("*/*");

        this.startActivityForResult(Intent.createChooser(i, "Choose type of attachment"), FILECHOOSER_RESULTCODE);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
        if (requestCode == FILECHOOSER_RESULTCODE) {
            if (null == this.mUploadMessage) {
                return;
            }
            Uri result = intent == null || resultCode != RESULT_OK ? null : intent.getData();
            this.mUploadMessage.onReceiveValue(result);
            this.mUploadMessage = null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-02-16T22:38:14.550

某些设备的上传按钮无法使用，例如三星 s4 和 note 3

# python - 计算具有相同“标识符”的数组中元素的平均值

> ID：15442844
> 
> 赞同：-1
> 
> 时间：2013-03-15T22:06:27.707
> 
> 标签：python, numpy, mean

我有以下形式的 numpy 数组：

```
['viola.jpg' '0.81' '1.0693461723' '100']
['viola.jpg' '0.44' '1.31469086921' '18']
['viola.jpg' '0.8' '3.92096084523' '73']
['vlasta.jpg' '0.88' '1.36559123399' '110']
['vlasta.jpg' '0.88' '1.88126493001' '45']
['vlasta.jpg' '0.76' '1.0510328514' '88'] 
```

我想为第 0 列中的每个新标识符平均第 1 列和第 2 列中的值。从上面我想得到类似的东西：

```
['viola.jpg' '0.68' '2.14354']
['vlasta.jpg' '0.84' '1.41324'] 
```

（最后一列在这里完全不相关，它可以是数字的平均值，其中一个随机数，或者完全省略）

我试图这样做 - 但它失败了，因为 reduceat 不喜欢灵活的类型（我的上述表格数组是“图片”）

```
pics = pics[pics[:,0].argsort()]
print pics
last = pics[:,0]
w = np.where(last[:-1] != last[1:])[0] + 1
w = np.concatenate(([0], w, [len(pics)])) #add 0 and last value
print type(pics), type(w)
means = np.add.reduceat(pics, w[:-1])/np.diff(w)[:,None] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T22:44:19.683

您可以使用 pandas 快速执行此操作：

```
import pandas as pd

data=[['viola.jpg', '0.81', '1.0693461723', '100'],
['viola.jpg', '0.44', '1.31469086921', '18'],
['viola.jpg', '0.8', '3.92096084523', '73'],
['vlasta.jpg', '0.88', '1.36559123399', '110'],
['vlasta.jpg', '0.88', '1.88126493001', '45'],
['vlasta.jpg', '0.76', '1.0510328514', '88']]

df = pd.DataFrame(data, dtype=float)
print df.groupby(0).mean() 
```

结果：

```
 1         2          3
0                                        
viola.jpg   0.683333  2.101666  63.666667
vlasta.jpg  0.840000  1.432630  81.000000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:42:55.730

我不知道你从哪里得到这个字符串列表，但如果它来自一个文件，请使用它`genfromtxt`从中获取一个不错的 numpy 数组，具有正确的类型：

```
import numpy as np
from StringIO import StringIO   # to create example file
s = """ viola.jpg  0.81 1.0693461723  100
        viola.jpg  0.44 1.31469086921  18
        viola.jpg  0.8  3.92096084523  73
        vlasta.jpg 0.88 1.36559123399 110
        vlasta.jpg 0.88 1.88126493001  45
        vlasta.jpg 0.76 1.0510328514   88"""
f = StringIO(s) # creates example file with content above
a = np.genfromtxt(f, names = "image, someval, another, someid", dtype=['S12', float, float, int]) 
```

现在，`a`是一个结构化数组。`field`您可以使用以下名称访问列：

```
images = np.uniques(a['image']) # gets unique values of the column named 'image'
b = np.empty(len(images), dtype = a.dtype)
for i, image in enumerate(images):
    m = a['image'] == image
    b[i] = (image,) + tuple(a[m][n].mean() for n in a.dtype.names[1:]) 
```

:( 也许它并没有那么好......对不起夸大其词。但是，向您介绍结构化数组是值得的。现在，看看`b`：

```
In [3]: b
Out[3]: 
array([('viola.jpg', 0.6833333333333332, 2.101665962246667, 63),
       ('vlasta.jpg', 0.84, 1.4326296718, 81)], 
      dtype=[('image', '|S12'), ('someval', '<f8'), ('another', '<f8'), ('someid', '<i8')])

In [4]: b['image']
Out[4]: 
array(['viola.jpg', 'vlasta.jpg'], 
      dtype='|S12')

In [5]: b['someval']
Out[5]: array([ 0.68333333,  0.84      ])

In [6]: b[1]
Out[6]: ('vlasta.jpg', 0.84, 1.4326296718, 81)

In [7]: b[b['image']=='viola.jpg']
Out[7]: 
array([('viola.jpg', 0.6833333333333332, 2.101665962246667, 63)], 
      dtype=[('image', '|S12'), ('someval', '<f8'), ('another', '<f8'), ('someid', '<i8')]) 
```

鉴于您从问题开始，您可以执行以下操作：

```
a = np.array([['viola.jpg', '0.81', '1.0693461723', '100'],
              ['viola.jpg', '0.44', '1.3146908692', '18'],
              ['viola.jpg', '0.8', '3.9209608452', '73'],
              ['vlasta.jpg', '0.88', '1.3655912339', '110'],
              ['vlasta.jpg', '0.88', '1.8812649300', '45'],
              ['vlasta.jpg', '0.76', '1.0510328514', '88']])

uniques = np.uniques(a[:,0])
b = np.empty((len(uniques), len(a[0])), dtype = 'S12')

for i,s in enumerate(uniques):
    m = a[:,0] == s
    b[i] = [s] + [a[m,j].astype(float).mean() for j in [1,2]] + [int(a[m,3].astype(float).mean())]
print b
#[['viola.jpg' '0.6833333333' '2.1016659622' '64']
# ['vlasta.jpg' '0.84' '1.4326296717' '81']] 
```

如果您使用更好的数据结构，则更容易跟踪什么是`float`,`int`和`string`. 有关证据，请参阅@HYRY 的答案。

# c++ - 存档文件 x32 还是 x64？

> ID：15442848
> 
> 赞同：0
> 
> 时间：2013-03-15T22:06:52.400
> 
> 标签：c++, gcc, object-files

在 C++ 中，当您将目标文件归档为 .a 文件时，平台是否重要？

例如，我在使用 x64 编译器编译的 x64 平台上，我将一堆 CPP 文件编译成 .o 文件。使用 AR.exe，我将它们归档到 .a 文件中并分发。

.a 文件是 x32、x64 还是可互换的？或者它是否取决于使用 .a 文件的程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T22:12:47.080

假设“使用 x64 编译器编译”意味着它生成 64 位代码，无论它本身是否是 64 位可执行文件，那么您的 .a 文件将是 64 位代码。它们是从您的 .o 文件生成的，这些文件是您的编译器生成的 64 位二进制文​​件。.a 不能比构成它的 .o 文件更多或不同。

# c++ - swprintf 不转换值

> ID：15442850
> 
> 赞同：-1
> 
> 时间：2013-03-15T22:06:59.293
> 
> 标签：c++

我正在尝试使用该函数作为在 Win32 应用程序中显示鼠标 X 和 Y 值的一种方式。它替换了 x 值，但对于 y，它将其设置为零。我不知道为什么，我在应用程序期间设置了一个断点。Y 不为 0。

编辑我将数据类型更改为 int 并且由于某种原因它现在正在工作。我最初使用 long long 是因为我处理输入的方式不同，并且该函数需要该数据类型。我忘记改回来了。我不太确定为什么它不能长时间使用。

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
int wmId, wmEvent;
PAINTSTRUCT ps;
HDC hdc;

static long long x = -1, y = -1;

switch (message)
{
case WM_MOUSEMOVE:
    {
        x = LOWORD(lParam);
        y = HIWORD(lParam);
        InvalidateRect(hWnd, 0, TRUE);

        break;
    }
case WM_COMMAND:
    wmId    = LOWORD(lParam);
    wmEvent = HIWORD(wParam);
    // Parse the menu selections:
    switch (wmId)
    {
    case IDM_ABOUT:
        DialogBox(hInst, MAKEINTRESOURCE(IDD_ABOUTBOX), hWnd, About);
        break;
    case IDM_EXIT:
        DestroyWindow(hWnd);
        break;
    default:
        return DefWindowProc(hWnd, message, wParam, lParam);
    }
    break;
case WM_PAINT:
    {
        hdc = BeginPaint(hWnd, &ps);

        RECT rect;
        rect.left = x + 20;
        rect.top = y - 20;
        rect.right = x + 200;
        rect.bottom = y + 200;

        wchar_t displayMessage[100];
        swprintf(displayMessage, 100, L"(%d, %d)", x, y);

        DrawText(hdc, displayMessage, -1, &rect, NULL);

        EndPaint(hWnd, &ps);
        break;
    }
case WM_DESTROY:
    PostQuitMessage(0);
    break;
default:
    return DefWindowProc(hWnd, message, wParam, lParam);
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:09:44.610

您忘记了缓冲区长度作为第二个参数，[请参阅文档](http://www.cplusplus.com/reference/cwchar/swprintf/)。

```
wchar_t displayMessage[100];
swprintf(displayMessage, 100, L"(%d, %d)", x, y); 
```

**更新**：用于`%lld`.`long long`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T22:21:12.200

`%d`不是 a 的正确标识符`long long`。

如果你坚持使用 C 语言`swprintf`，请将变量更改为`int`. 或使用`%lld`. 或者按照下面的方式投射它们。

```
swprintf(displayMessage, 100, L"(%d, %d)", (int)x, (int)y); 
```

**编辑：**

如果您不喜欢 C 语言，则不必在此上下文中使用它。

无论使用什么整数类型，这也将起作用。

```
 std::wstringstream stream;
    stream << L"(" << x << L", " << y << L")";
    DrawText(hdc, stream.str().c_str(), -1, &rect, NULL); 
```

# mysql - 如何更新多行以使每行中的日期列具有唯一的日期？

> ID：15442856
> 
> 赞同：-1
> 
> 时间：2013-03-15T22:07:40.073
> 
> 标签：mysql, random, unique

我有一个包含许多行的数据库表，这些行已经填充了数据。该数据是使用*generateata.com*的在线数据生成表格生成的。

大多数都可以，但问题是许多生成的日期字段都是重复的，出于我的目的，我需要它们是唯一的，最好在合理/指定的范围内。

例如，假设我想`date`用 2010-01-01 和今天之间的随机但唯一日期填充每一行的列。是否有一个 MySQL 查询或一组查询可以用来快速执行此操作？

从技术上讲，这样的东西对于随机部分可以正常工作：

```
UPDATE table 
SET date = CONCAT( FLOOR(2010 + (RAND() * (2013-2010)) ),
        '-',
        FLOOR(1 + (RAND() * (12-1))),'-',FLOOR(1 + (RAND() * (28-1)))) 
```

它不必考虑每个可能的日期。它们必须是有效日期，所以上面的行给了我一个范围内的随机日期，但是我可以添加什么来确保它们都是唯一的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T23:31:51.233

对于表中的每一行，您是否有一个 ID 列具有唯一整数？如果是这样，请执行以下操作：

```
 UPDATE `table` 
     SET `date` = CURRENT_DATE() - INTERVAL `id` DAY 
```

这将为您在每一行提供不同的日期，从今天开始倒数。那应该能满足你的需要。如果出于某种原因您需要他们从固定日期开始计数，请尝试使用此方法。

```
 UPDATE `table` 
     SET `date` = '2010-01-01' + INTERVAL `id` DAY 
```

**编辑**

如果您的身份证号码不是从零或一开始，请按照@Randy 的建议试试这个：

```
UPDATE `table` 
   SET `date` = '2010-01-01' +
         INTERVAL (`id` - (SELECT MIN(`id`) FROM `table`) ) DAY 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-04T23:04:08.453

对于第 9 章 Head First SQL，我不得不使用类似的查询语句。这是我所做的：

str_to_date( concat( floor( 1 + rand() * (12-1))), '-', floor(1 + rand() * (28 -1)), '-', **(1999 + FLOOR(RAND() * (2013-1999 +1)))), '%m-%d-%Y')**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T22:28:49.093

**使用 mysqldump 并将整个表导出到一个文本文件中，该文件为“|” 分开。**

如下图所示，

表.dat

```
1|aa@aa.com|<<date_column>>
2|aa@aa.com|<<date_column>>
3|bb@b.com|<<date_column>> 
```

* * *

```
 1\. Use AWK, SED, SHELL, PERL or RUBY (I love ruby) and replace the last
   column with a loop on the time given out by the chosen scripting
   language. Implement your own logic here. 

 2\. Make sure your final dat file doesn't have any duplicate date. 
```

**将 final.dat 加载到表中！**

# php - php android spinner - JSONObject 无法转换为 JSONArray

> ID：15442861
> 
> 赞同：1
> 
> 时间：2013-03-15T22:08:08.130
> 
> 标签：php, android, mysql, json

我是 java 编程的初学者，我正在尝试将 php 结果加载到微调器中，我一直遇到 JSONObject 无法转换为 JSONArray 的问题。我在网站上搜索以尝试转换它，但我似乎无法修复它。

php结果：

```
{"ref_product_types":[{"product_type_code":"1","product_type_description":"Mobile Phone"},{"product_type_code":"2","product_type_description":"Toys"}]} 
```

我在清单中添加了这个

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

这是java代码：

```
package com.example.spinnert1;

public class Main extends Activity {

InputStream is=null;
String result=null;
String line=null;

String[] product_type_code, product_type_description;  

Spinner spinner1,spinner2;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

spinner1 = (Spinner) findViewById(R.id.spinner1);
spinner2 = (Spinner) findViewById(R.id.spinner2);
final List<String> list1 = new ArrayList<String>();
final List<String> list2 = new ArrayList<String>();

Button b=(Button) findViewById(R.id.button1);

b.setOnClickListener(new View.OnClickListener() {

@Override
public void onClick(View v)
{
                // TODO Auto-generated method stub

try
{
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://10.0.2.2/epos_connect/get_all_product_type.php");
HttpResponse response = httpclient.execute(httppost);
Log.e("Fail 1", "3");

HttpEntity entity = response.getEntity();
Log.e("Fail 1", "4");

is = entity.getContent();
Log.e("Pass 1", "connection success ");
}
catch(Exception e)
{
Log.e("Fail 1", e.toString());
Toast.makeText(getApplicationContext(), "Invalid IP Address",Toast.LENGTH_LONG).show();
finish();
}    

try
{
BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
StringBuilder sb = new StringBuilder();
while ((line = reader.readLine()) != null)
{
sb.append(line + "\n");
}
is.close();
result = sb.toString();
}
catch(Exception e)
{
Log.e("Fail 2", e.toString());
}    

try
{
JSONArray JA=new JSONArray(result);

JSONObject json= null;
product_type_code = new String[JA.length()];       
product_type_description = new String[JA.length()];

for(int i=0;i<JA.length();i++)
{
json=JA.getJSONObject(i);
product_type_code[i] = json.getString("product_type_code");
product_type_description[i]=json.getString("product_type_description");
}
Toast.makeText(getApplicationContext(), "sss",Toast.LENGTH_LONG).show();

for(int i=0;i<product_type_code.length;i++)
{
list1.add(product_type_code[i]);
list2.add(product_type_description[i]);
}

spinner_fn();

}
catch(Exception e)
{

Log.e("Fail 3", e.toString());
//login.this.finish();

}
}
});

}
private void spinner_fn() {
    // TODO Auto-generated method stub

    ArrayAdapter<String> dataAdapter1 = new ArrayAdapter<String>(getApplicationContext(),
                                    android.R.layout.simple_spinner_item, product_type_code);
    dataAdapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner1.setAdapter(dataAdapter1);

    ArrayAdapter<String> dataAdapter2 = new ArrayAdapter<String>(getApplicationContext(),
                                    android.R.layout.simple_spinner_item, product_type_description);
    dataAdapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner2.setAdapter(dataAdapter2);

    spinner1.setOnItemSelectedListener(new OnItemSelectedListener()
    {
    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1,int position, long id)
    {
    // TODO Auto-generated method stub

    spinner2.setSelection(position);

    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0)
    {
    // TODO Auto-generated method stub
    }

    });

    spinner2.setOnItemSelectedListener(new OnItemSelectedListener() {

    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1,int position, long arg3) {
    // TODO Auto-generated method stub

    spinner1.setSelection(position);

    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub
    }
    });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
    }

    } 
```

布局xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Spinner
    android:id="@+id/spinner1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:entries="@array/country_arrays"
    android:prompt="@string/country_prompt" />

<Spinner
    android:id="@+id/spinner2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

<Button
    android:id="@+id/btnSubmit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Submit" />

</LinearLayout> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:15:44.877

看起来返回的数据确实是一个 JSON 对象，而不是 JSON 数组；JSON 数组嵌套在“ref_product_types”键中的外部对象中。

你会想要使用类似的东西：

```
JSONObject jsonObj = new JSONObject(result);
JSONArray ja = jsonObj.getJSONArray("ref_product_types") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:27:21.787

```
{
   "ref_product_types": [
                          {"product_type_code":"1",
                           "product_type_description":"Mobile Phone"
                          },
                          {"product_type_code":"2",
                           "product_type_description":"Toys"
                          }
                        ]
} 
```

所以我做了一些格式化，以便你清楚地看到它。

所以首先你应该知道 multiset 括号**`{`**表示**JSONObject**和括号**`[`**表示**JSONArray**。所以你的字符串呈现 JSONObject 并存储 JSONArray。所以你需要先创建新的 JSONObject 然后解析 JSONArray。

```
JSONObject o = new JSONObject(sourceString);
JSONArray arr = o.getJSONArray("ref_product_types"); 
```

# facebook-graph-api - getGraphObjectList() 返回 null

> ID：15442862
> 
> 赞同：2
> 
> 时间：2013-03-15T22:08:15.300
> 
> 标签：facebook-graph-api, android-facebook, user-data

嗨，我正在尝试在我的 android 应用程序中获取 facebook 用户数据。这是我请求用户信息的方法：

```
//Requests the user's info
private void makeMeRequest(final Session session){
    //Request request = Request.newMeRequest(session, new Request.GraphUserCallback(){
    Request request = Request.newGraphPathRequest(session, "me/feed", new Request.Callback(){

    @Override
    //public void onCompleted(GraphUser user, Response response){
    public void onCompleted(Response response){
        if(session == Session.getActiveSession()){
          if(user != null){
            GraphObjectList<GraphObject> test =  response.getGraphObjectList();
            //JSONArray test2 = test.getInnerJSONArray();
          }
          if(response.getError() != null){

          }
        }
     });
     request.executeAsync();
} 
```

这是我在 LogCat 中得到的响应：

```
03-15 21:52:54.650: D/FacebookSDK.Response(324): Response
03-15 21:52:54.650: D/FacebookSDK.Response(324):   Id: 3
03-15 21:52:54.650: D/FacebookSDK.Response(324):   Size: 12042
03-15 21:52:54.650: D/FacebookSDK.Response(324):   Responses:
03-15 21:52:54.650: D/FacebookSDK.Response(324): [{Response:  responseCode: 200, graphObject: GraphObject{graphObjectClass=GraphObject, state={"data":[{"id":"1151520669_10200669350793462","story":"Ameya Savale and Justin Liang are now friends.","status_type":"approved_friend","privacy":{"value":""},"story_tags":{"17":[{"length":12,"id":"1835928976","type":"user","offset":17,"name":"Justin Liang"}],"0":[{"length":12,"id":"1151520669","type":"user","offset":0,"name":"Ameya Savale"}]},"from":{"id":"1151520669","name":"Ameya Savale"},"created_time":"2013-03-15T05:25:20+0000","type":"status","updated_time":"2013-03-15T05:25:20+0000","comments":{"count":0},"actions":[{"link":"http:\/\/www.facebook.com\/1151520669\/posts\/10200669350793462","name":"Comment"},{"link":"http:\/\/www.facebook.com\/1151520669\/posts\/10200669350793462","name":"Like"}]},{"id":"1151520669_10200664042340754","story":"\"that was sick!\" on Akshay Savale's link.","application":{"id":"2309869772","name":"Links"},"privacy":{"value":""},"story_tags":{"20":[{"length":13,"id":"100001055405131","type":"user","offset":20,"name":"Akshay Savale"}]},"from":{"id":"1151520669","name":"Ameya Savale"},"created_time":"2013-03-14T03:54:34+0000","type":"status","updated_time":"2013-03-14T03:54:34+0000","comments":{"count":0}},{"id":"1151520669_10200655210559965","story":"\"time to beat it\" on Salman J Khan's status.","privacy":{"value":""},"story_tags":{"21":[{"length":13,"id":"1036381196","type":"user","offset":21,"name":"Salman J Khan"}]},"from":{"id":"1151520669","name":"Ameya Savale"},"created_time":"2013-03-12T16:53:42+0000","type":"status","updated_time":"2013-03-12T16:53:42+0000","comments":{"count":0}},{"id":"1151520669_10200649624700322","story":"Ameya Savale was invited to UCSB Mastaani by Sharan Ghai.","privacy":{"value":""},"story_tags":{"45":[{"length":11,"id":"500372905","type":"user","offset":45,"name":"Sharan Ghai"}],"0":[{"length":12,"id":"1151520669","type":"user","offset":0,"name":"Ameya Savale"}]},"from":{"id":"1151520669","name":"Ameya Savale"},"created_time":"2013-03-11T22:13:13+0000","type":"status","updated_time":"2013-03-11T22:13:13+0000","comments":{"count":0}},{"id":"1151520669_10200644523212788","story":"\"that was awesome\" on Starrz Dance's link.","privacy":{"value":""},"story_tags":{"22":[{"length":12,"id":"100001846352664","type":"user","offset":22,"name":"Starrz Dance"}]},"from":{"id":"1151520669","name":"Ameya Savale"},"created_time":"2013-03-11T00:48:14+0000","type":"status","updated_time":"2013-03-11T00:48:14+0000","comments":{"count":0}},{"to":{"data":[{"id":"197122410301288","version":1,"name":"Late"}]},"icon":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/v2\/yj\/r\/v2OnaTyTQZE.gif","link":"http:\/\/www.youtube.com\/watch?v=b7YnxTa-y3g%2F","privacy":{"value":""},"from":{"id":"1151520669","name":"Ameya Savale"},"type":"video","updated_time":"2013-03-10T01:58:29+0000","picture":"https:\/\/fbexternal-a.akamaihd.net\/safe_image.php?d=AQCZDACZ9Lqjh87R&w=130&h=130&url=http%3A%2F%2Fi3.ytimg.com%2Fvi%2Fb7YnxTa-y3g%2Fmqdefault.jpg","message":"www.youtube.com\/watch?v=b7YnxTa-y3g\/\n\nlol","id":"1151520669_607003655979826","source":"http:\/\/www.youtube.com\/v\/b7YnxTa-y3g?version=3&autohide=1&autoplay=1","description":"Wild animals eat fast food all the time. A rabbit is fast, an Impala is fast, and zebra run fast too.","name":"What If.......Wild Animals Ate Fast Food","created_time":"2013-03-10T01:58:29+0000","comments":{"count":0},"actions":[{"link":"http:\/\/www.facebook.com\/1151520669\/posts\/607003655979826","name":"Comment"},{"link":"http:\/\/www.facebook.com\/1151520669\/posts\/607003655979826","name":"Like"}]},{"picture":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-prn1\/50233_36022998530_1525_q.jpg","id":"1151520669_10200631849415951","icon":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/v2\/yN\/r\/xC785tTCIQO.gif","story":"Ameya Savale likes Zodo's - Bowling & Beyond.","application":{"id":"2530096808","name":"Pages"},"link":"http:\/\/www.facebook.com\/ZodosBowling?ref=stream","privacy":
03-15 21:53:33.540: D/dalvikvm(284): GC_EXPLICIT freed 7969 objects / 423976 bytes in 146ms 
```

所以我很确定我会收到回复，但是当我在我的方法中取消注释该行时，我会得到一个`NullPointerException`. 为什么它给我这个？我也打印了我的会话信息，这是输出：

```
03-15 20:53:20.186: I/SESSION(321): {Session state:OPENED, token:{AccessToken token:ACCESS_TOKEN_REMOVED permissions:[read_stream, user_birthday, user_likes, user_status, basic_info]}, appId:222555791218743} 
```

这个错误是因为`ACCESS_TOKEN_REMOVED`零件吗？如果是我怎么能正确登录？

谢谢

# php - 将数据发送到 java.js 页面，然后将其发送到另一个页面

> ID：15442866
> 
> 赞同：-1
> 
> 时间：2013-03-15T22:08:41.233
> 
> 标签：php, javascript, jquery, html, ajax

我有一个脚本，在我的客户页面上

```
<a href='hueimx.php?action=edit&uid={$result['uid']}'>click to edit</a> 
```

和

```
{$result['uid']} 
```

这是我从数据库中获取的客户 ID。

现在我想在我的 javascript 页面上接收“uid”值。这是我的代码：

```
function insert() {
// Optional: Show a waiting message in the layer with ID login_response
document.getElementById('huemix_message').innerHTML = "<img src='images/saver.gif' />"
// Required: verify that all fileds is not empty. Use encodeURI() to solve some issues about character encoding.
var system_name= encodeURI(document.getElementById('system_name').value);
var system_logo = encodeURI(document.getElementById('system_logo').value);
var system_number = encodeURI(document.getElementById('system_number').value);
var system_tel = encodeURI(document.getElementById('system_tel').value);
if($("#system_pics").is(':checked')){
      var system_pics = 1;
   } else {
      var system_pics = 0;
   }
if($("#system_bread").is(':checked')){
      var system_bread = 1;
   } else {
      var system_bread = 0;
   }

// Set te random number to add to URL request
nocache = Math.random();
// Pass the login variables like URL variable
http.open('get', 'huemixpanel_insert.php?system_name='+system_name+'&system_logo='+system_logo+'&system_number='+system_number+'&system_tel='+system_tel+'&system_pics='+system_pics+'&system_bread='+system_bread+'&uid='+uid+'&nocache = '+nocache);
http.onreadystatechange = insertReply;
http.send(null);
} 
```

在这个页面中，我从设置页面收到所有值并将其转发到 php 页面以将它们插入数据库。一切正常，但我不知道如何接收“uid”值并如您所见发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:24:04.327

好吧，如果您的唯一目标是将数据从一页发送到另一页。然后，您可以通过在 URL 中附加数据来轻松完成此操作。而在另一页上，只需抓取数据并处理您的操作。

您的脚本非常适合发送数据。在另一页“ ***huemixpanel_insert.php*** ”上，请考虑添加这行代码：

```
<?php
if(!empty($_GET['uid']))
{
    $uid = strip_tags($_GET['uid']); // check for security hole
    //Your rest of the  ***huemixpanel_insert.php*** code goes down here...  
} else {
    //You can die the rest of the page if uid is not received. (Optional) don't use else if you don't want to take any action. 
}
?> 
```

# sql-server - 检查字段是否包含 SQL 中的特殊字符

> ID：15442867
> 
> 赞同：0
> 
> 时间：2013-03-15T22:08:41.777
> 
> 标签：sql-server, tsql

我们决定使用`Nvarchar`在一些表中存储一些信息，原因是我们假设我们会有很多特殊字符，因为数据库包含法语和德语数据。

在提取了一些数据后，我们估计完整的运行具有非常大的大小（20 TB）

现在我们要检查每个表以查找是否找到特殊字符，如果没有，我们将类型从 更改`NvarChar`为`Varchar`

知道我们如何查询这个吗？

或者您认为优化尺寸的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T22:16:52.137

不久前我不得不解决这个问题：

使用正则表达式：

```
LIKE '%[^a-zA-Z0-9]%' 
```

要解决搜索表的问题，请尝试：[如何在 SQL Server 数据库中的任何位置查找值？](https://stackoverflow.com/questions/436351/how-do-i-find-a-value-anywhere-in-a-sql-server-database)，如果没有，我会在我使用的某个地方找到一个更好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:20:28.697

实际上一个更好的主意是使用压缩表。SQL Server 2008 具有[页面压缩功能](http://msdn.microsoft.com/en-us/library/cc280464.aspx)，SQL Server 2008 R2 在此基础上添加了[Unicode 压缩](http://msdn.microsoft.com/en-us/library/ee240835.aspx)。

# jquery - 简单的 jQuery 在 Rail 3.2 中不起作用

> ID：15442868
> 
> 赞同：1
> 
> 时间：2013-03-15T22:08:42.503
> 
> 标签：jquery, ruby-on-rails, ruby, twitter-bootstrap, ruby-on-rails-3.2

这个已经让我走了几个小时了。任何帮助将不胜感激，如果我能提供更多信息，请告诉我。

我试图让一些基本的 jQuery 在我的 Rails 3.2 应用程序中工作。有问题的 jQuery 是在按钮按下时提供一个动作（目前，只是一个警报对话框来知道它正在工作）。

**应用程序/视图/订单/index.html.erb**

```
...

<button type="button" class="btn" id="button">My button</button>

... 
```

我已经为 jQuery/JS 代码尝试了许多变体，包括...

**应用程序/资产/javascripts/orders.js**

```
$('#button').click(function() {
    alert("Test message");
}); 
```

.

```
$(document).ready(function() {
    $('#button').click(function() {
        alert("Test message");
    });
}); 
```

.

```
$(document).ready(function() {
    $('#button').button();
    $('#button').click(function() {
        $(this).button('loading');
    });
}); 
```

需要注意的几点：

*   这是在开发环境中运行
*   JS 文件显示在源代码和 Chrome 网络/资源面板中，没有错误。
*   我尝试重新排序我的 application.js 文件。
*   我还不擅长 CoffeeScript，但愿意尝试基于 CoffeeScript 的解决方案。
*   Chrome 在 Morris 中报告错误。

我的**app/assets/javascripts/application.js**供参考

```
//= require jquery
//= require jquery_ujs
//= require raphael
//= require morris
//= require bootstrap
//= require_tree . 
```

任何有关追踪此错误的步骤的建议都会非常有帮助！

* * *

**更新**

尝试了以下 CoffeeScript 解决方案，但没有成功。

```
jQuery ->
    jQuery('#button').click ->
        alert("Test msg")

// ... which generates ...

(function() {

  jQuery(function() {
    return jQuery('#jamcake').click(function() {
      return alert("You have cake?");
    });
  });

}).call(this); 
```

尝试将按钮更改为链接，但无济于事。

尝试回到基础，以下工作。

```
alert("Hello"); 
```

但是，以下不...

```
$(document).ready(function() {
    alert("Hello there");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:28:14.023

在黑暗中拍摄，但其他 js 库之一可能与 jQuery 的使用冲突`$`

尝试：

```
jQuery(document).ready(function($) {
  // code here, using $ as usual

  $('#button').click(function() {
    alert("Test message");
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:43:45.083

试试这个并检查控制台以确保：事件正在触发并且 jQuery 可以找到该元素。

```
$(document).ready(function() {
    console.log($('#button').size());
}); 
```

如果您一无所获，您可能会遇到冲突，或者其他库的错误会阻止脚本的其余部分运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T22:20:46.983

.html

```
<button type="button" class="btn" id="first-test">My button</button> 
```

.js

```
$(function() {
   $("button#first-test").on("click",function() {     
     alert(hi); 
   });            
}); 
```

# java - Java ArrayList 转换为 C++

> ID：15442875
> 
> 赞同：1
> 
> 时间：2013-03-15T22:09:42.543
> 
> 标签：java, c++, arrays, porting

我有一个 ArrayList

```
ArrayList[][] gridList = new ArrayList[300][150];
// Where a and b are some values in the range of the ArrayList.
ArrayList al = this.gridList[a][b]; 
```

这怎么能翻译成C++？？我尝试过使用 std::vector 或 std::map、std::array。我只是无法让它工作。

```
ArrayList al = this.gridList[a][b]; 
```

那条线实际上是做什么的？

它会创建一个大小数组吗？

```
ArrayList al = new ArrayList[a][b] 
```

或者它可能将 "a" 和 "b" 的值复制到新的 ArrayList "al" 中？

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:24:58.693

您的代码没有按照您的想法执行。

```
 ArrayList[][] gridList = new ArrayList[300][150]; 
```

第一行分配了`array`of `array`。`ArrayList`

```
 ArrayList al = this.gridList[a][b]; 
```

第二行检索gridList中`ArrayList`at 偏移`b`中的at`array`偏移。*您应该知道您的代码不会初始化任何一个数组*。`a``array`

 *C++ 中的等价类型可能是：

```
#include <vector>
#include <array>

std::array< std::array< std::vector<T>, 150>, 300> gridList; 
```

其中`T`是存储在向量中的元素的类型。请注意，泛型之前的 Java 只允许在不指定元素类型的情况下定义 ArrayList，这几乎就是您的代码所做的。在 C++ 中，此参数是必需的。上面的变量定义将为当前范围实例化它。您将需要对`new`动态值使用语句（如在 Java 中），并可能用智能指针包装它。

要访问网格的元素，您可以使用`[]`运算符：

```
 vector v = gridList[a][b]; 
```

请注意，这将触发网`vector`格中 <a,b> 位置处内容的完整副本 into `v`。如建议的那样，一种更有效的方法是编写：

```
auto const &al = gridList[a][b]; 
```

同样，Java 使用的内存模型是非常动态的，因此如果您希望代码的行为更接近 Java 版本，您可能会有类似的内容：

```
 #include<memory>

 typedef std::vector<int> i_vector;
 typedef std::shared_ptr<i_vector> i_vector_ptr;
 typedef std::array< std::array< i_vector_ptr>, 150>, 300> vector_grid;

 typedef std::shared_ptr<vector_grid> vector_grid_ptr;

 vector_grid_ptr gridList;

 i_vector_ptr al = (*gridList)[a][b]; 
```

类型`T`为`int`，并且网格类型的每个组件都明确定义。您仍然必须分配网格和每个元素（即`i_vector`此处）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:19:21.857

这样的事情可能会起作用（如果您需要容器类）：

```
struct Item
{ ...
};

typedef std::vector<Item> ArrayList;

// Single row.
struct ArrayListVector : public std::vector<ArrayList>
{
    ArrayListVector() { resize(150); }
};

// Whole matrix
struct ArrayListMatrix : public std::vector<ArrayListVector>
{
   ArrayListMatrix() { resize(300); }
};

...

ArrayListMatrix gridList;  //< yes, it is 300 x 150
ArrayList &a = gridList[a][b]; //< or, you can make a copy
gridList[b][a] = a; //< assign an entry 
```

或者你需要模板吗？

但是有一个简单的选项，不需要模板、类等：

```
 ArrayList array[300][150]; //< array is allocated (on stack, or statically). 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T22:31:56.543

如果您的 ArrayList 包含“Foo”类型的内容，则：

```
std::vector<Foo*> gridList[300][150];
std::vector al = this->gridList[a][b]; 
```*

# applicationcontext - 创建名为“sessionFactory”的 bean 时出错 - Spring/Hibernate

> ID：15442876
> 
> 赞同：0
> 
> 时间：2013-03-15T22:09:44.463
> 
> 标签：applicationcontext, sessionfactory

我试图让 Spring 和 Hibernate 4 一起工作，但出现了这些错误：

```
log4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).
log4j:WARN Please initialize the log4j system properly.
Mar 15, 2013 11:00:54 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.ExceptionInInitializerError
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1444)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:518)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:455)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:381)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ExceptionInInitializerError
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:244)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1503)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1441)
    ... 22 more
Caused by: java.lang.IllegalStateException: Expected method not found: java.lang.NoSuchMethodException: org.hibernate.cfg.Configuration.addAnnotatedClass(java.lang.Class)
    at org.springframework.util.ClassUtils.getMethod(ClassUtils.java:626)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBuilder.<clinit>(LocalSessionFactoryBuilder.java:68)
    ... 25 more 
```

这是我的道课：

```
@Repository
@Transactional
@Component
public class UtilisateurDAO extends HibernateDaoSupport{

@Autowired
private SessionFactory sessionFactory;

public Utilisateur getById(int id)
{
    return (Utilisateur) sessionFactory.getCurrentSession().get(Utilisateur.class, id);
} 
```

这是我的控制器：

```
 @Controller
   public class UtilisateurController
   {
@Autowired
private UtilisateurDAO utilisateurDAO;

@RequestMapping("/searchUtilisateurs")
public ModelAndView searchContacts(@RequestParam(required= false, defaultValue="") String name)
{
    ModelAndView mav = new ModelAndView("showUtilisateurs");
    List<Utilisateur> utilisateurs = utilisateurDAO.searchUtilisateur(name.trim());
    mav.addObject("SEARCH_UTILISATEURS_RESULTS", utilisateurs);
    return mav;
} 
```

最后，这是我的 applicationContext.xml ：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:p="http://www.springframework.org/schema/p" 
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.0.xsd
            http://www.springframework.org/schema/tx 
            http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
            http://www.springframework.org/schema/mvc 
            http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <context:annotation-config />

    <bean id="datasource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="org.postgresql.Driver" />
        <property name="url" value="jdbc:postgresql://localhost:5432/JEEFRAMEWORK" />
        <property name="username" value="postgres" />
        <property name="password" value="admin" />
    </bean>

    <!--  Déclaration Session Factory -->

    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="datasource" />
        <property name="annotatedClasses">
           <list>
               <value>model.Utilisateur</value>    
           </list>
        </property>
        <property name="packagesToScan" value="dao" />
        <property name="configLocation" value="classpath:/hibernate.cfg.xml"/>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

    <bean id="UtilisateurDAO" class="dao.UtilisateurDAO">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>
</beans> 
```

有人可以帮我解决这个错误吗？

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:17:06.563

在 Hibernate 3 中，Configuration 没有方法 addAnnotatedClass(Class annotatedClass)，它只在 Hibernate 4 中。所以你的类路径中可能有 Hibernate 3 Configuration 类。

（[来自 LocalSessionFactoryBuilder 的参考 IllegalStateException](https://stackoverflow.com/questions/9868556/illegalstateexception-from-localsessionfactorybuilder)）

# python - 为 python 应用程序创建 DEB 文件

> ID：15442905
> 
> 赞同：1
> 
> 时间：2013-03-15T22:12:22.233
> 
> 标签：python, ubuntu, python-2.7, pygtk, deb

我是 python 编程的新手，这是我第一个认真的 python 应用程序。也从未为 Ubuntu/GTK 平台创建任何公共应用程序。最终目标是让这个应用程序在 Ubuntu 软件存储库或类似存储库中可用。

我一直在查找有关构建软件包的信息，并且遇到了一些文档（例如[http://developer.ubuntu.com/publish/my-apps-packages/](http://developer.ubuntu.com/publish/my-apps-packages/)）和一些软件包，例如 Py2deb 但我不清楚我的应用程序是如何需要结构化，以便 deb 安装程序可以做正确的事情

1.  应用程序依赖于其他一些可以使用 apt-get install 命令安装的 python 库。如何表示这种依赖关系
2.  应用程序依赖于一些可以使用 PIP 安装的 python 库。如何确保/安装这些库。
3.  应用需要webkit3。我认为这是标准 ubuntu 桌面安装的一部分，但我应该指出明确的依赖关系吗？如果是，该怎么做。
4.  应用程序有自己的资源文件 - 非 python 文件，如图像/模板等。这些文件应该放在哪里。

应用程序的当前树结构可以在[https://github.com/nhrdl/notesMD看到](https://github.com/nhrdl/notesMD)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:03:07.380

由于您有一个依赖于 webkit3 和其他库的应用程序，您可以在 .deb 中包含库的 .deb 文件，并包含一个将安装库的脚本，或者您可以只在 deb 文件中包含核心 python 应用程序和只需通过执行以下操作将库的安装留给用户：

```
sudo apt-get install -f 
```

对于图像，您可以将它们添加到应用程序附近的目录中，以防止出现任何目录问题。

希望这对您的申请有所帮助并祝您好运。:)

# eclipse - 如何在 Eclipse 中快速测试一个类是否可序列化？

> ID：15442908
> 
> 赞同：0
> 
> 时间：2013-03-15T22:12:35.583
> 
> 标签：eclipse, serializable

对于在 Java 中可序列化的对象，必须确保它自己的类和它内部使用的其他类都是可序列化的。Eclipse 中是否有一种简单的方法可以自动执行这项繁琐的检查？谢谢。

# linux - 如何在nodejs中创建没有sudo限制访问的文件

> ID：15442909
> 
> 赞同：0
> 
> 时间：2013-03-15T22:12:45.133
> 
> 标签：linux, node.js, file-permissions, sudo

所以我正在运行一个我已经工作了一段时间的项目。我正在使用 sudo node 运行它，我首先想知道这是否是个好主意？我一直这样做的原因是因为偶尔它不会让我在端口 80 上监听，除非我使用 sudo 启动我的程序。

无论如何，当我使用 fs.appendFileSync 或任何文件创建时，它将限制对 sudo 的文件访问（我只能使用 sudo rm ... 删除操作系统中的文件，我希望能够从任何文件中删除和修改这些文件其他系统用户。

那么我应该使用 sudo 来启动节点吗？以及如何在 sudo 中创建文件，然后允许其他用户删除它们（例如我自己使用 ui）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T22:45:15.327

有几种比 sudo 更好的方法。

1.  使用在端口 80 上侦听的反向代理将流量转发到您的节点进程，该进程以非 root 身份运行并侦听大于 1024 的端口。这是绝大多数或现实世界部署的运行方式，并且有充分的理由。请参阅[为什么要在框架 Web 服务器前使用 http 服务器？](https://stackoverflow.com/a/13372425/266795)以及我在这里的支持论点[的回答。](https://stackoverflow.com/a/6762234/266795)
2.  以 root 身份启动您的节点进程，以 root 身份绑定端口 80，然后使用`process.setuid`将权限删除给非 root 用户。[这是一篇关于这种技术的文章](http://benno.id.au/blog/2011/08/09/safely-dropping-privileges-node-js)。

请注意，目的`sudo`主要是让用户登录并运行交互式 shell 以运行特定命令。它在运营网络服务方面确实没有任何作用。

在权限方面，您的节点进程应以非 root 用户身份运行，并根据需要在特定目录中具有适当的文件系统写入权限，以便在其应用程序操作中写入文件。

> 有时它不会让我在端口 80 上监听，除非我使用 sudo 启动我的程序

不是“偶尔”，总是。Unix 进程必须是 root 才能绑定到 < 1024 的网络端口。

# android - 从 IOIO 微控制器读取数据并在点击时创建新活动的应用程序

> ID：15442910
> 
> 赞同：3
> 
> 时间：2013-03-15T22:12:46.090
> 
> 标签：android, android-activity, crash, ioio

我正在创建一个应用程序，它从 IOIO 微控制器板上读取数据并在我按下按钮后将其显示到屏幕上。我有两个类，MainActivity，它有要点击的按钮，AugiActivity，它有所有的 IOIO 代码，并显示信息。

当我点击按钮开始新活动时，应用程序崩溃了。有任何想法吗？

日志猫

```
38.496: E/AndroidRuntime(22105): FATAL EXCEPTION: main
38.496: E/AndroidRuntime(22105): java.lang.IllegalStateException: Could not execute method of the activity
38.496: E/AndroidRuntime(22105): at android.view.View$1.onClick(View.java:2154)
38.496: E/AndroidRuntime(22105): at android.view.View.performClick(View.java:2537)
38.496: E/AndroidRuntime(22105): at android.view.View$PerformClick.run(View.java:9157)
38.496: E/AndroidRuntime(22105): at android.os.Handler.handleCallback(Handler.java:587)
38.496: E/AndroidRuntime(22105): at android.os.Handler.dispatchMessage(Handler.java:92)
38.496: E/AndroidRuntime(22105): at android.os.Looper.loop(Looper.java:130)
38.496: E/AndroidRuntime(22105): at 
android.app.ActivityThread.main(ActivityThread.java:3687)
38.496: E/AndroidRuntime(22105): at java.lang.reflect.Method.invokeNative(Native 
Method)
38.496: E/AndroidRuntime(22105): at java.lang.reflect.Method.invoke(Method.java:507)
38.496: E/AndroidRuntime(22105): at 
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
38.496: E/AndroidRuntime(22105): at 
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
38.496: E/AndroidRuntime(22105): at dalvik.system.NativeStart.main(Native Method)
38.496: E/AndroidRuntime(22105): Caused by: java.lang.reflect.InvocationTargetException
38.496: E/AndroidRuntime(22105): at java.lang.reflect.Method.invokeNative(Native 
Method)
38.496: E/AndroidRuntime(22105): at java.lang.reflect.Method.invoke(Method.java:507)
38.496: E/AndroidRuntime(22105): at android.view.View$1.onClick(View.java:2149)
38.496: E/AndroidRuntime(22105): ... 11 more
38.496: E/AndroidRuntime(22105): Caused by: java.lang.NoClassDefFoundError:     
com.example.augi_practice.AugiActivity
38.496: E/AndroidRuntime(22105): at 
com.example.augi_practice.MainActivity.call_ioio(MainActivity.java:27)
38.496: E/AndroidRuntime(22105): ... 14 more 
```

MainActivity java 文件：

```
package com.example.augi_practice;

import ioio.lib.util.android.IOIOActivity;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void call_ioio(View v)
{   
    Intent intent = new Intent(this, AugiActivity.class);
    startActivity(intent);
}

} 
```

主活动 XML 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginRight="31dp"
    android:layout_marginTop="62dp"
    android:onClick="call_ioio"
    android:text="Call IOIO" />

</RelativeLayout> 
```

AugiActivity java文件

```
package com.example.augi_practice;

//imports here

public class AugiActivity extends IOIOActivity implements SurfaceHolder.Callback{

// Some global variables here   

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_augi);

    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    light_voltage_TV = (TextView) findViewById(R.id.LED_View);
    bar_data_TV = (TextView) findViewById(R.id.BAR_View);

    mag_TV = (TextView) findViewById(R.id.MAG_View);

    gyro_rate_TV = (TextView) findViewById(R.id.GYRO_RATE_View);
    acel_euler_TV = (TextView) findViewById(R.id.ACEL_EULER_View);

    gga_TV = (TextView) findViewById(R.id.GGA_View);
    gsa_TV = (TextView) findViewById(R.id.GSA_View);
    gsv_TV = (TextView) findViewById(R.id.GSV_View);
    rmc_TV = (TextView) findViewById(R.id.RMC_View);
    vtg_TV = (TextView) findViewById(R.id.VTG_View);

    getWindow().setFormat(PixelFormat.UNKNOWN);

    cam_TV = (SurfaceView) findViewById(R.id.CAMERA_View);
    holder = cam_TV.getHolder();
    holder.addCallback((Callback) this);
    holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_augi, menu);
    return true;
}

class Looper extends BaseIOIOLooper {
    /** The on-board LED. */
    private AnalogInput in;
    private DigitalOutput led_;
    TwiMaster i2c;

    // GPS UART COMMUNICATION

    private Uart uart;
    private InputStream gps_in;
    private OutputStream gps_out;

            // variables for class

    /**
    * Called every time a connection with IOIO has been established.
    * Typically used to open pins.
    *   
    * @throws ConnectionLostException
    *             When IOIO connection is lost.
     * @throws InterruptedException 
    * 
    * @see ioio.lib.util.AbstractIOIOActivity.IOIOThread#setup()
    */
    @Override
    protected void setup() throws ConnectionLostException, InterruptedException 
        {
            various methods called here to setup hardware
        }           

    /**
    * Called repetitively while the IOIO is connected.
    * 
    * @throws ConnectionLostException
    *             When IOIO connection is lost.
     * @throws InterruptedException 
    * 
    * @see ioio.lib.util.AbstractIOIOActivity.IOIOThread#loop()
    */

    @Override
    public void loop() throws ConnectionLostException, InterruptedException 
        {           
            get_light();

            get_temp();

            get_pressure();

            get_north();

            get_imu();

            try {
                get_gps();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            led_.write(true);
            light_voltage_TV.post(new UpdateReadings());        
        }           
        // Methods listed above goes here
    }
    /**
    * A method to create our IOIO thread.
    * 
    * @see ioio.lib.util.AbstractIOIOActivity#createIOIOThread()
    */
    @Override
    protected IOIOLooper createIOIOLooper() {
        return new Looper();
    }
    private class UpdateReadings implements Runnable {
    @Override
        public void run() 
        {
            // data posted to text views here   
        }

    }
    @Override
    public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int)                                                                                  
    {   // TODO Auto-generated method stub

    }
    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        // TODO Auto-generated method stub

    }
    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub

    }       

} 
```

奥吉活动 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/FrameLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<SurfaceView
    android:id="@+id/CAMERA_View"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/LED_View"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/BAR_View"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/MAG_View"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/GYRO_RATE_View"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/ACEL_EULER_View"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/GGA_View"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView"
        android:textSize="10sp" />

    <TextView
        android:id="@+id/GSA_View"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView"
        android:textSize="10sp" />

    <TextView
        android:id="@+id/GSV_View"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView"
        android:textSize="10sp" />

    <TextView
        android:id="@+id/RMC_View"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView"
        android:textSize="10sp" />

    <TextView
        android:id="@+id/VTG_View"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView"
        android:textSize="10sp" />

</LinearLayout>

</FrameLayout> 
```

清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.augi_practice"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="3"
    android:targetSdkVersion="10" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.BLUETOOTH" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.augi_practice.MainActivity"
        android:screenOrientation="landscape"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
<action        android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED" />
        </intent-filter>

    </activity>
    <activity
        android:name="com.example.augi_practice.AugiActivity"
        android:screenOrientation="landscape"
        android:label="@string/title_activity_augi" 
        android:parentActivityName="com.example.augi_practice.MainActivity" >
        <meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value="com.example.augi_practice.MainActivity" />
        <intent-filter>
<action android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED" />
        </intent-filter>

    </activity>
</application>

</manifest> 
```

# xcode - Apple Mach-O 链接器错误：架构 i386 的 17 个重复符号

> ID：15442915
> 
> 赞同：0
> 
> 时间：2013-03-15T22:13:06.303
> 
> 标签：xcode

我有以下“Apple Mach-O 链接器”错误：

```
ld: 17 duplicate symbols for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

原因可能是什么？我认为这是在我复制了应用程序 b 之后发生的

# python - python - simpledb - 如何将一个大字符串分片/分块成几个 <1kb 的值？

> ID：15442919
> 
> 赞同：0
> 
> 时间：2013-03-15T22:13:21.490
> 
> 标签：python, amazon-simpledb

我一直在阅读 SimpleDB，一个缺点（对我来说）是每个属性限制最大 1kb。我做了很多 RSS 提要处理，我希望将提要数据存储在 SimpleDB（文章）中，据我所知，最好的方法是跨多个属性分割文章。典型的文章是 < 30kb 的纯文本。

我目前将文章数据存储在 DynamoDB（gzip 压缩）中没有任何问题，但成本相当高。希望迁移到 SimpleDB 以获得更便宜的存储和仍然快速的检索。我也将 S3 上所有 rss 文章的 json 副本存档（多年的 mysql 头痛让我对 db 保持警惕）。

有谁知道将字符串分割成 < 1kb 的片段？我假设需要将标识符附加到每个块以便重新组装。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T23:38:30.207

切片应该这样做。你只需要跟踪这些碎片。

```
>>> x = "big string with lots of words"
>>> x[2:10]
'g string'
>>> x[10:20]
' with lots'
>>> x[20:29]
' of words' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:35:54.303

我选择在 Amazon S3 中存储大型文本文档（检索似乎很快），我将实施一个 EC2 实例，用于使用 S3 作为故障转移来缓存文档。

# c# - graphics.clear 不会将表面清除为透明颜色

> ID：15442922
> 
> 赞同：-1
> 
> 时间：2013-03-15T22:13:32.013
> 
> 标签：c#, winforms

为什么不`graphic.clear(Color.Transparent)`清除表面透明并制作黑色背景？如何在没有任何背景的情况下清除控制表面？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T23:37:23.260

如果您想真正使用透明颜色，则必须使用 API WPF，这只是一种方式。

# jquery - 仅在最后一堂课上运行功能

> ID：15442923
> 
> 赞同：1
> 
> 时间：2013-03-15T22:13:47.273
> 
> 标签：jquery

对所有 prev - next - append childs 都发疯了 :)

好吧，基本上我有两个同名的课程。

```
<div class="info"></div>
<div class="info"></div> 
```

还有一个增量函数

```
var howMany = 0;
$('#more').click(function(){
    howMany.find() += 1;
    $(".info").text(howMany);
});
$(".info").text(howMany); 
```

现在我希望该函数仅在最后一堂课上运行。

有小费吗 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:15:19.863

使用 jQuery [:last](http://api.jquery.com/last-selector/)选择器或`.last()`函数（首选）。还要记住您设置`div`元素的值，因此您需要使用`.html()`而不是`.text()`

**固定示例：**

```
var howMany = 0;
$('#more').click(function(){
    howMany += 1;
    $(".info").last().html(howMany);
});
$(".info").last().html(howMany); 
```

**工作示例** [http://jsfiddle.net/HdP6N/](http://jsfiddle.net/HdP6N/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:15:45.183

使用 jQuery`:last`

```
$(".info:last").text(howMany); 
```

完整代码

```
var howMany = 0, lastinfo= $(".info:last");
$('#more').click(function(){
    howMany++;
    lastinfo.text(howMany);
});
lastinfo.text(howMany); 
```

# java - 将应用程序与文件扩展名关联 - 意图过滤器不起作用？

> ID：15442925
> 
> 赞同：0
> 
> 时间：2013-03-15T22:13:49.240
> 
> 标签：java, android, pdf, android-intent, associate

我希望我的应用程序能够从 android 环境中的任何位置打开 pdf。我环顾四周，并根据我所读到的内容添加了这些意图。但是，在测试和打开 pdf 时，它只是使用默认应用程序 Polaris 打开它？

据我了解，在活动中，我使用下面的代码来获取传入的信息。

```
Intent intent = getIntent();
String action = intent.getAction();
String type = intent.getType(); 
```

我尝试禁用 Polaris，然后在打开时显示无法找到执行此应用程序的应用程序。

```
<activity
        android:name=".UserLogIn"
        android:label="User Authentication" >
        <intent-filter>
            <action android:name="com.example.USERLOGIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.BROWSABLE" />
            <category android:name="android.intent.category.DEFAULT" />

            <data android:scheme="http" />
            <data android:host="*" />
            <data android:pathPattern=".*\\.pdf" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.BROWSABLE" />
            <category android:name="android.intent.category.DEFAULT" />

            <data android:scheme="http" />
            <data android:host="*" />
            <data android:mimeType="application/pdf" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />

            <data android:scheme="file" />
            <data android:host="*" />
            <data android:pathPattern=".*\\.pdf" />
        </intent-filter>
</activity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:26:03.247

这适用于我的：

```
 <activity
        android:name=".ui.PdfViewerActivity" >
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data android:mimeType="application/pdf" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data android:host="*" />
            <data android:scheme="file" />
            <data android:scheme="smb" />
            <data android:scheme="content" />
            <data android:scheme="http" />
            <data android:scheme="https" />
            <data android:mimeType="*/*" />
            <data android:pathPattern=".*\\.pdf" />
        </intent-filter>
    </activity> 
```

# ios - setValue:forKey：设置指定索引的所有值

> ID：15442928
> 
> 赞同：0
> 
> 时间：2013-03-15T22:13:56.803
> 
> 标签：ios, nsmutablearray, nsmutabledictionary

我知道这将是非常基本的，但我似乎无法弄清楚。

我有`NSMutableArray`两个索引，每个索引都有`NSMutableDictionary`几个值。我想更改一个索引中的一个值，`[[anArray objectAtIndex:index] setValue:newValue forKey:someKey];`但这会更改所有索引中该键的值。我不确定发生了什么。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:28:14.313

您的代码没有问题`[[anArray objectAtIndex:index] setValue:newValue forKey:someKey];`

你应该添加`NSMutableDictionary`这样的

```
NSMutableArray *myArray = [[NSMutableArray alloc] init];

NSMutableDictionary *dict1 = [[NSMutableDictionary alloc] initWithObjectsAndKeys:@"dict1value1", @"key1", @"dict1value2", @"key2", nil];

[myArray addObject:[dict1 copy]];

[myArray addObject:dict1];

[[myArray objectAtIndex:1] setValue:@"NEW VALUE" forKey:@"key2"];

NSLog(@"%@",[myArray objectAtIndex:0]);
NSLog(@"%@",[myArray objectAtIndex:1]); 
```

或者

```
 NSMutableArray *myArray = [[NSMutableArray alloc] init];

    NSMutableDictionary *dict1 = [[NSMutableDictionary alloc] initWithObjectsAndKeys:@"dict1value1", @"key1", @"dict1value2", @"key2", nil];

    NSMutableDictionary *dict2 = [[NSMutableDictionary alloc] initWithObjectsAndKeys:@"dict2value1", @"key1", @"dict2value2", @"key2", nil];

    [myArray addObject:dict1];

    [myArray addObject:dict2];

    [[myArray objectAtIndex:1] setValue:@"NEW VALUE" forKey:@"key2"];

    NSLog(@"%@",[myArray objectAtIndex:0]);
    NSLog(@"%@",[myArray objectAtIndex:1]); 
```

**输出**

```
{
    key1 = dict1value1;
    key2 = dict1value2;
}

{
    key1 = dict1value1;
    key2 = "NEW VALUE";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T22:23:05.763

**在添加字典之前复制它**

不要添加它 N 次，因为您将拥有一个包含 N 个指向同一个字典的指针的数组

```
id d1 = @{.....}.mutableCopy;
id d2 = d1.mutableCopy;

NSArray *array = @[d1,d2]; 
```

然后使用 setValueForKey 左右独立编辑键/值

# app-store - iTunes Connect：如何找出我的应用程序的规范名称？

> ID：15442929
> 
> 赞同：0
> 
> 时间：2013-03-15T22:13:58.820
> 
> 标签：app-store, app-store-connect

我想使用简短的[http://appstore.com/yangmeyer](http://appstore.com/yangmeyer)变体链接到我的应用程序。

虽然很容易推断出我的应用程序“Trash Cam”（[http://appstore.com/trashcam](http://appstore.com/trashcam)）的规范名称，但我无法获得我最近的应用程序的规范名称，*[Delighted！– “很高兴认识你！”</a>](https://itunes.apple.com/de/app/delighted!-nice-to-meet-you!/id607995866?l=en&mt=8)*[（注意感叹号和引号，它们都是](https://itunes.apple.com/de/app/delighted!-nice-to-meet-you!/id607995866?l=en&mt=8)App Store[中应用名称的一部分）。](http://blog.yangmeyer.de/blog/2013/03/11/quotation-marks/)

我阅读了 Apple 的[Technical Q&A QA1633](https://developer.apple.com/library/ios/#qa/qa1633/_index.html)，并认为规范名称应该是“delightednicetomeetyou”。但事实并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:13:58.820

# c# - BackgroundAudioPlayer 正在“播放”但未调用 GetSampleAsync()

> ID：15442933
> 
> 赞同：2
> 
> 时间：2013-03-15T22:14:35.647
> 
> 标签：c#, windows-phone-8, windows-phone, background-audio

我正在使用自定义 MediaStreamSource 在后台代理中从网络流式传输音乐。在良好的网络条件下，这可以正常工作，但当网络连接不稳定时，就会出现一个奇怪的问题。

当曲目开始播放时，通过第一次调用 MediaStreamSource.GetSampleAsync() 一切顺利。因为连接不稳定，如果没有足够的数据可用，源调用 ReportGetSampleProgress(double) 并返回而不报告样本。这符合 MSDN 文档和代码示例。

奇怪的是根本没有对 GetSampleAsync 的进一步调用！随着缓冲的继续，源继续 ReportGetSampleProgress 直到样本准备好，此时它调用`ReportGetSampleProgress(1.0)`以指示缓冲区已满。

我尝试了几种方法，包括：

*   `ReportGetSampleCompleted`缓冲完成时；这失败了，因为下载事件来自任意线程，并且此方法显然对调用线程以及对 GetSampleAsync 的调用是否在堆栈上都很敏感；无效的调用情况会导致 COM 错误。
*   在精确的错误情况下，停止并启动 BackgroundAudioPlayer：这将无法重新启动流式传输。

一旦最初无法读取示例挂起，我如何才能重新开始流式传输？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:37:24.027

`ReportGetSampleCompleted`在这种情况下，一旦数据可用是正确的方法。

您必须在 MSS 中跟踪您是否需要立即报告任何新的样本数据或等待`GetSampleAsync`被调用。

但是请注意，在涉及的各个线程之间可能会由于竞争条件而导致失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T05:12:56.343

碰巧，一个解决方案似乎是打破 name 建议的合同`GetSampleAsync`，并在没有足够的数据缓冲时阻止该方法。然后流回调可以脉冲锁定对象，并且可以重试读取样本。像这样的东西效果很好：

```
private void OnMoreDataDownloaded(object sender, EventArgs e)
{
    // We're on an arbitrary thread, so instead of reporting
    // a sample here we should just pulse.
    lock (buffering_lock) {
        is_buffering = false;
        Monitor.Pulse(buffering_lock);
    }
}

protected override void GetSampleAsync()
{
    while (we_need_more_data) {
        lock (buffering_lock) {
            is_buffering = true;
            while (is_buffering) {
                Monitor.Wait(buffering_lock);
            }
    }

    // code code code
    ReportGetSampleCompleted(sample);
} 
```

似乎在 Async 方法中阻塞可能并不明智，但在设备上运行此代码的经验表明并非如此。根据[http://msdn.microsoft.com/en-us/library/system.windows.media.mediastreamsource.getsampleasync(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.mediastreamsource.getsampleasync(v=vs.95).aspx)，阻塞可能会阻止其他流被读取。作为一个流媒体音乐应用程序，我们一次只提供一个流，所以在这种情况下，我们似乎没问题。

不过，我希望我知道一个通​​用的解决方案，因为这显然是作弊。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-30T13:36:27.273

If you don't have any data available then fill a buffer with silence and report that. This will give you time for real data to come in.

You want to center the data to the middle of a PCM range on your silence data or you'll get a click when going silent.

```
MemoryStream stream = new MemoryStream();

byte[] silenceBuffer = BitConverter.GetBytes( (ushort)(short.MaxValue) );
for(int i=0; i < 1000; i++ )
    stream.Write( silenceBuffer, 0, silenceBuffer.Length ); 
```

Gook luck.

# c# - 如何调用要在 JavaScript 中使用的函数？

> ID：15442936
> 
> 赞同：0
> 
> 时间：2013-03-15T22:14:53.133
> 
> 标签：c#, google-maps-api-3

我试图让这段代码在我的 C#.NET Web 应用程序中工作，但是我无法将结果放入标签中，更不用说如何在一段 JavaScript 中为 Google Maps 获取结果了。

我喜欢我正在使用的这个例子。 [Google Maps v3 地理编码服务器端](https://stackoverflow.com/questions/7942095/google-maps-v3-geocoding-server-side)

但是我对 C#.NET 的“有限”知识不允许我弄清楚:( 感谢阅读！

问候，罗伯特。

# asp.net - 将复杂对象分配给标记中的用户控件

> ID：15442937
> 
> 赞同：3
> 
> 时间：2013-03-15T22:14:56.083
> 
> 标签：asp.net, user-controls, webforms

我可以在代码隐藏中执行此操作，但我正在寻找一种在标记本身中执行此操作的懒惰方式：

假设我有一个具有复杂属性的 UserControl：

```
public class MyControl : UserControl {
    public Person Someone { get; set; }
} 
```

我有一个带有此控件的页面：

```
<uc1:MyControl id="my1" runat="server" /> 
```

我想从页面标记中将一个人放入此控件，而不是代码隐藏。在代码隐藏中，它看起来像：

```
my1.Someone = GetSomePerson(); 
```

我想做：

```
<uc1:MyControl id="my1" runat="server" Someone="<%= GetSomePerson() %>" /> 
```

但这无效。关于如何做到这一点的任何建议？我想我可以一次做一个属性，但我正在寻找一种更通用的方法——我传入的复杂对象比这个例子大得多（几十个属性），所以我不想即使可以，也可以在标记中单独定义它们。

我想知道是否有某种神奇的`<%$ %>`功能可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:51:54.710

我找到了一个实现了我正在寻找的东西的人：

[http://weblogs.asp.net/infinitiesloop/archive/2006/08/09/The-CodeExpressionBuilder.aspx](http://weblogs.asp.net/infinitiesloop/archive/2006/08/09/The-CodeExpressionBuilder.aspx)

在 web.config 中包含一些代码和新的表达式生成器后，您可以使用 ASP.NET 表达式来执行此操作：

```
<uc1:MyControl runat="server" Someone="<%$ Code:GetSomePerson() %>" /> 
```

我不认为我会在我目前的项目中这样做，因为它不是一个真正的标准。我敢肯定，当人们在查看代码并试图弄清楚我做了什么时，他们会在路上完全说我的坏话——但知道未来绝对是件好事。

**编辑**

对于后代，以防万一此链接无法永久使用，以下是相关代码：

```
// C#:
[ExpressionPrefix("Code")]
public class CodeExpressionBuilder : ExpressionBuilder {
    public override CodeExpression GetCodeExpression(BoundPropertyEntry entry, 
       object parsedData, ExpressionBuilderContext context) {
        return new CodeSnippetExpression(entry.Expression);
    }
}

// Web.config:
<compilation debug="true">
  <expressionBuilders>
    <add expressionPrefix="Code" type="Infinity.Web.Compilation.CodeExpressionBuilder"/>
  </expressionBuilders>
</compilation>

// ASP.NET .aspx:
<asp:CheckBox id="chk1" runat="server" Text="<%$ Code: DateTime.Now %>" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:18:29.790

```
<uc1:MyControl id="my1" runat="server" />
<% my1.Someone = GetSomePerson(); %> 
```

或者因为这显然不是您要寻找的答案...

```
<uc1:MyControl id="my1" runat="server" someParameter="uniqueId" /> 
```

然后在uc1控件里面

```
public string someParameter;
Someone = GetSomePerson(someParameter); 
```

# c# - 问题：WCF 服务接收到第一个枚举成员值，尽管输入不同

> ID：15442940
> 
> 赞同：0
> 
> 时间：2013-03-15T22:15:10.113
> 
> 标签：c#, wcf, enums

**背景**

作为我对 WCF 服务的请求的一部分，我传入了一个枚举值*Add*（详见下文），但服务实现使用了共享库的枚举对象（本质上是相同的，并且使用 AutoMapper 进行映射），似乎只能读取第一个成员，即 Equal。换句话说，用户输入了*Add*，但服务实现得到了*Equal*。

**细节**

我有一个枚举定义为

```
[DataContract]
public enum MyOperator
{
    [EnumMember]
       Equal = 0,
    [EnumMember]
     Add = 1,
      [EnumMember]
Subtract = 2
} 
```

此枚举是另一个数据合约的属性，如下所示：

```
[DataContract]
public class MyExpression
{
 [DataMember]
  public string Field {get;set;}

 [DataMember]
  public string Value{get;set;}

 [DataMember]
  public MyOperator Operator {get;set;}

} 
```

最后，这包含在我的请求正文中：

```
[DataContract]
public class RequestBody
{
...

public MyExpression Expression {get;set;}
...
} 
```

对应的枚举对象位于共享库中，定义为：

```
 public enum MyOperator
    {
           Equal = 0,
           Add = 1,
       Subtract = 2
    } 
```

在调试服务实现（使用此共享库的 MyOperator 枚举）期间，我观察到的问题是，尽管用户输入 Add 作为 Soap 请求的一部分，但我仍然每次都看到 Equal。

我尝试声明`MyOperator`为 a `KnownType`，但这似乎没有帮助。

谢谢你的帮助！如果您需要更多详细信息，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:06:55.450

IT 似乎您的服务无法找到您在请求中传递的值并获取枚举的第一个值。您可以做的是更新 WSDL 的定义并再次运行请求。这应该解决了这个问题，这对我有用，如果它不起作用，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T03:28:43.130

没有更多信息很难猜测，但我的第一个猜测是它试图将字符串“equal”转换为 int 并且它失败并返回 0（默认 int），这在你的情况下将是相等的。

我能想到的唯一另一件事是它可能无法在两个枚举之间进行转换，因为它们将位于不同的命名空间中。

# python - 条件搜索返回一维数组的数组元组？

> ID：15442943
> 
> 赞同：4
> 
> 时间：2013-03-15T22:15:22.123
> 
> 标签：python, numpy

我阅读了关于[numpy 的 where](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html)的文档，但我不明白如果我检查一个简单的一维数组的条件，为什么`where`会返回一个**嵌套数组的元组。**

```
> import numpy as np
> my_array = np.random.randint(1,10, (20))
> np.where(my_array > 5)

(array([ 0,  1,  4,  6,  7,  8, 10, 11, 13, 15, 16, 17, 18]),) 
```

为什么`np.where`在这种情况下返回一个元组？为什么嵌套结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T22:36:54.877

我认为这是为了一致性，考虑一个二维数组：

```
import numpy as np
my_array = np.random.randint(1,10, (4, 5))
pos = np.where(my_array > 5)
my_array[pos] 
```

您可以使用元组作为索引来选择位置中的所有值。

# java - 增量搜索方法的伪代码

> ID：15442944
> 
> 赞同：-2
> 
> 时间：2013-03-15T22:15:24.350
> 
> 标签：java, algorithm, flowchart

```
public boolean searchSummaryData(String textToFind) {
int fromRow, fromCol;

fromRow = summaryTable.getSelectedRow();
fromCol = summaryTable.getSelectedColumn();

if (fromRow < 0) {
    fromRow = 0; //set to start point, first row 
}
if (fromCol < 0) {
    fromCol = 0;
} else if (fromCol == lastFoundCol) {
    fromCol++;
}
int searchIteration = 1;

if (fromRow != 0 || fromCol != 0) {
    searchIteration = 2;
}
for (int iterate = 1; iterate <= searchIteration; iterate++) {
    for (int i = fromRow; i < summaryTableModel.getRowCount(); i++) {
        for (int j = fromCol; j < summaryTableModel.getColumnCount(); j++) {
            final Object valueAt = summaryTableModel.getValueAt(i, j); //point to object at i,j
            if (valueAt != null) {
                textToFind = textToFind.toLowerCase();
                if (valueAt.toString().toLowerCase().contains(textToFind)) {
                    //Map the index of the column/row in the table model at j/i to the index of the column/row in the view.
                    int convertRowIndexToView = summaryTable.convertRowIndexToView(i);
                    int convertColIndexToView = summaryTable.convertColumnIndexToView(j);
                    summaryTable.setRowSelectionInterval(i, i);
                    summaryTable.setColumnSelectionInterval(j, j);
                    //Return a rectangle for the cell that lies at the intersection of row and column.
                    Rectangle rectToScrollTo = summaryTable.getCellRect(convertRowIndexToView, convertColIndexToView, true);
                    tableSp.getViewport().scrollRectToVisible(rectToScrollTo);
                    lastFoundCol = j;
                    return true;
                }
            }
        }
        fromCol = 0;
    }
    fromRow = fromCol = 0;
}
return false; 
```

上述方法的伪代码是什么？我正在努力理解状态变化。它应该对作为此方法的参数提供的文本的 JTable 进行增量搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:32:55.357

```
// if the selection is (0, 0) prepare to skip the second search

// for each cell starting at the selection (first search)
    // get the value
    // if it exists and matches the search string
        // select that cell and scroll to show it
        // mark cell as last found
        // return true to show you found something
// if nothing was found, repeat the above starting from (0,0)

// if still nothing found, return false to say the desired string is not present. 
```

# java - 有没有办法从派生类中隐藏超类的成员？

> ID：15442945
> 
> 赞同：2
> 
> 时间：2013-03-15T22:15:38.223
> 
> 标签：java

我很好奇是否可以声明一个类的成员，使其根本不暴露给派生类，或者至少在子类调用`super()`. Java中有这样的功能吗？

```
 class A{
      static int foo = 1;
    }

    class B extends A{
      public B(){
         System.out.print(foo);/// how do I make this not work?
      }
    } 
```

编辑：我实际上是偶然用解决方案输入了我的问题（我的实际代码缺少私有代码）。因此，我将编辑我的问题并删除私人问题，以便这是一个有意义的问题:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T22:17:45.923

那已经行不通了-该成员是私有的，因此从 B 中看不到。

但是，如果您试图隐藏子类中已经可见的成员，例如

```
public class A {
    public void foo() {
        // Whatever
    }
}

public class B extends A {
    // ???
}

...
B b = new B();
b.foo(); // I don't want this to work, because it's a B! 
```

......那么你不能那样做。这将打破[Liskov 的替代原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T22:31:00.490

对该问题的一种解释是，您希望访问`foo`失败，但访问`super.foo`成功。它可能发生在一种特定情况下 - 如果 A 和 B 都包含在同一个顶级类中，或者其中一个是包含另一个的顶级类。

```
class X

    class A  
        private int foo;

    class B extends A

        print(foo);           // fail
        print(super.foo);     // ok  
        print(((A)this).foo); // ok... 
```

或者

```
class A
    private int foo;

    static class B extends A    // declared inside A

        print(foo);           // fail
        print(super.foo);     // ok  
        print(((A)this).foo); // ok... 
```

原因是私有成员不是继承的，所以`this.foo`不存在；但是它们可以通过适当的限定符在整个顶级类中访问，因此`A.foo`是可访问的。请参阅[http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6.1-100-D-3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6.1-100-D-3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T22:18:02.723

如果将变量标记为，`private`则子类将无权访问它。

（另外，你可能不希望`static`在你的 foo 声明中。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T23:36:10.367

访问修饰符（例如，将成员声明为`private`）是唯一真正阻止访问成员的东西。（即便如此，您仍然可以使用反射来获取私有成员。）

* * *

当您提到 时`super`，您可能正在考虑使用Java 意义上的*隐藏*；例如，您声明其他内容的地方称为`foo`隐藏原始声明。但是，它在这里无济于事。

*   您必须声明第二个`foo`in`B`或某些子类`C`，例如`A`... extends `C`... extends `B`。

*   由于这些是静态的，`B`因此始终可以将原始文件`foo`作为`A.foo`. 事实上，既然`<class>.<name>`是推荐的方法，这种（假设的）隐藏使用并没有取得任何有价值的结果（IMO）。

*   即使它确实有效，它也只是将 one 替换`foo`为 another `foo`，这不是您的用例所需要的。

简而言之，*隐藏*不是减少或控制暴露的有效手段。

# bash - 使用不同的选项和每个选项的不同参数调用不同的程序

> ID：15442950
> 
> 赞同：0
> 
> 时间：2013-03-15T22:16:00.287
> 
> 标签：bash, shell, nested, getopt

我正在尝试制作一个可以同时执行不同数量的程序（prog1、prog2、...prog5 甚至更多）的脚本。

它可以是 prog1 only , or prog1&prog2, or prog1&prog2&prog3, prog1&prog3&prog4&prog6&prog8

每个程序都可以使用不同的选项调用，并且会根据调用选项执行不同的操作。

例如 prog1 可以通过以下不同方式调用：

1.  `prog1 -d "-f 10 -g 20"`（-d 是一个选项，“-f 10 -g 20”是该特定选项的参数）
2.  `prog1 -B`
3.  `prog1 -R "-l 2 -m 9"`
4.  `prog1 -S "10 20 30"`

它也可以用它的组合来调用，比如： `prog1 -d "-f 10 -g 20" -B -R "-l 2 -m 9"`

我决定使用两阶段 getopt（嵌套 getopt）来解决这个问题。

在第一阶段，getopt 将处理用户作为脚本输入提供的不同程序。在第二阶段，getopt 将处理每个程序可以获得的不同选项和参数。

我的脚本如下：

```
#!/bin/bash

args=`getopt -o :v -l prog1:,prog2,prog3,prog4,prog5 -- "$@"`  # Here prog2,prog3..prog5 do not have a colon (:) to save some space but all of them will eventually get since when they are called they should have input arguments   
eval set -- "$args"
while true; do
case $1 in

      -v ) echo "VERBOSE"; shift;;
 --prog1 )
             echo "prog1 has been chosen with the following option:$2"

             args=`getopt -o :d:BR:S: -- "$@"`
               eval set -- "$args"
                 while true; do
                    case $1 in

                        -d )  echo "-d:$2"; shift 2;;
                        -B )  echo "-B"; shift;;
                        -R )  echo "-R:$2" ;shift 2 ;;
                        -S )  echo "-S:$2"; shift 2;;
                         --)  shift; break;; 
                     esac
                  done

             shift 2;; 

--prog2 )
             echo "similar things as in prog1";  shift
               ;;                           
--prog3 ) 
            echo "similar things as in prog1";  shift
               ;; 

--prog4 )
             echo "similar things as in prog1";  shift
               ;;                           
--prog5 ) 
            echo "similar things as in prog1";  shift
               ;;                         

     -- ) 
              shift; break;;
esac
done 
```

当我将脚本运行为：`my_script --prog1 -d "-f 10 -g 100"` 它能够获取 -d 参数但不知何故进入无限循环，同时无法获取另一个参数“-f 10 -g 100”

理想情况下，脚本应该通过以下调用运行：

1.  `my_script --prog1 -d "-f 10 -g 100" -R "-l 2 -m 9" --prog3 -M "-r 9 0.5 6" -F "-o 2 -q- 4" --prog5 .... etc`

2.  `my_script --prog1 -d "-f 10 -g 100"`.

3.  `my_script --prog1 -d "-f 10 -g 100" -B --prog3 -F "-o 2 -q- 4"`

4.  `my_script --prog3 -F "-o 2 -q- 4" -M --prog2 -G`

5.  ETC

您对如何克服这个问题有任何想法吗？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T00:35:34.900

您的问题部分在于您将 shell 的当前参数列表设置了两次：

```
args=$(getopt -o :v -l prog1:,prog2,prog3,prog4,prog5 -- "$@")
eval set -- "$args"  # First set of arguments
while true; do
case $1 in
      -v ) echo "VERBOSE"; shift;;
 --prog1 )
             echo "prog1 has been chosen with the following option:$2"
             args=`getopt -o :d:BR:S: -- "$@"`
             eval set -- "$args"    # Second set of arguments blows away the first 
```

第二组选项击败了第一组。

“陷入循环”问题的原因不太明显。

这将很难解决。我认为您必须有一个循环来处理程序级选项；然后，对于要执行的每个程序，您将需要在第一个选项处理循环之后（不嵌套在其中）一个新循环：

```
args=$(getopt -o :v -l prog1:,prog2,prog3,prog4,prog5 -- "$@")
eval set -- "$args"
while true
do
    case $1 in
          -v ) echo "VERBOSE"; shift;;
     --prog1 )
               echo "prog1 has been chosen with the following options: $2"
               opts1="$2"
               shift 2;;
     --prog2 )
               echo "prog2 has been chosen with the following options: $2"
               opts2="$2"
               shift 2;;
     --prog3 )
               echo "prog3 has been chosen with the following options: $2"
               opts3="$2"
               shift 2;;
     --prog4 )
               echo "prog4 has been chosen with the following options: $2"
               opts4="$2"
               shift 2;;
     --prog5 )
               echo "prog5 has been chosen with the following options: $2"
               opts5="$2"
               shift 2;;
          -- ) 
               shift; break;;
    esac
done

if [ -n "$opts1" ]
then
     args=`getopt -o :d:BR:S: -- "$opts1"`
     eval set -- "$args"
     while true
     do
         case $1 in
         -d )  echo "-d:$2"; shift 2;;
         -B )  echo "-B"; shift;;
         -R )  echo "-R:$2" ;shift 2 ;;
         -S )  echo "-S:$2"; shift 2;;
         -- )  shift; break;; 
         esac
     done
     # Now execute prog1?
fi

# And similarly for $opts2 .. $opts5. 
```

* * *

### SSCCE

这是运行两个程序的工作代码。命令选项是无情的并行，但它们也不同。其中一项关键更改是从适当的已保存选项字符串中设置“每个程序”选项。它被缩减为只处理两个程序。我的 GNU 版本`getopt`没有安装在系统之前`getopt`，因此定义了`getopt`要运行的程序的变量。

```
GETOPT=/usr/gnu/bin/getopt

args=$($GETOPT -o :v -l prog1:,prog2: -- "$@")
eval set -- "$args"

while [ $# -gt 0 ]
do
    case $1 in
          -v ) echo "VERBOSE"; shift;;
     --prog1 )
               echo "prog1 has been chosen with the following options: $2"
               opts1="$2"
               shift 2;;
     --prog2 )
               echo "prog2 has been chosen with the following options: $2"
               opts2="$2"
               shift 2;;
          -- ) 
               shift; break;;
           * ) echo "$0: oops! $1 unexpected" >&2; exit 1;;
    esac
done
echo "$0: residual arguments: $@"

if [ -n "$opts1" ]
then
     args=$($GETOPT -o d:BR:S: -- $opts1)
     eval set -- "$args"
     while [ $# -gt 0 ]
     do
         case $1 in
         -d )  echo "prog1 -d:$2"; shift 2;;
         -B )  echo "prog1 -B";    shift 1;;
         -R )  echo "prog1 -R:$2"; shift 2;;
         -S )  echo "prog1 -S:$2"; shift 2;;
         -- )  shift; break;; 
          * )  echo "$0: oops processing prog1 - $1 unexpected" >&2; exit 1;;
         esac
     done
     echo "prog1 opts -- $@"
     # Now execute prog1?
fi

if [ -n "$opts2" ]
then
     args=$($GETOPT -o f:AT:G: -- $opts2)
     eval set -- "$args"
     while [ $# -gt 0 ]
     do
         case $1 in
         -f )  echo "prog2 -f:$2"; shift 2;;
         -A )  echo "prog2 -A";    shift 1;;
         -T )  echo "prog2 -T:$2"; shift 2;;
         -G )  echo "prog2 -G:$2"; shift 2;;
         -- )  shift; break;; 
          * )  echo "$0: oops processing prog2 - $1 unexpected" >&2; exit 1;;
         esac
     done
     echo "prog2 opts -- $@"
     # Now execute prog2?
fi 
```

### 示例运行

```
$ sh multiopts.sh -v --prog2 "-f file -A -G garbage -T tag -- zero one" \
>                    --prog1="-S silence -R rubbish -B -d dog -- aleph null" -- abc def
VERBOSE
prog2 has been chosen with the following options: -f file -A -G garbage -T tag -- zero one
prog1 has been chosen with the following options: -S silence -R rubbish -B -d dog -- aleph null
multiopts.sh: residual arguments: abc def
prog1 -S:silence
prog1 -R:rubbish
prog1 -B
prog1 -d:dog
prog1 opts -- aleph null
prog2 -f:file
prog2 -A
prog2 -G:garbage
prog2 -T:tag
prog2 opts -- zero one
$ 
```

# java - 如何将一个字符串插入另一个字符串的中间？

> ID：15442956
> 
> 赞同：-18
> 
> 时间：2013-03-15T22:16:39.110
> 
> 标签：java, string, insert

我试图将一个字符串插入另一个字符串的中间，例如：

```
String One = "MonkeyPony";
String Two = "Monkey"; 
```

我如何将字符串 2 放入字符串 1 中，这样它就会读到像 MonkeMonkeyyPony 这样的东西？

我想要做的是多次将“Monkey”插入“MonkeyPony”的中间，所以第一次它会读“MonkeMonkeyyPony”，第二次会读“MonkeMonkeyyPony”等等。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-15T22:18:43.423

您必须将第一个字符串的两个子字符串连接到第二个字符串的末端。

```
// put the marble in the bag
public static String insert(String bag, String marble, int index) {
    String bagBegin = bag.substring(0,index);
    String bagEnd = bag.substring(index);
    return bagBegin + marble + bagEnd;
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-01-16T20:05:19.893

您可以使用[`StringBuilder.insert​(int offset, String str)`](https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/StringBuilder.html#insert(int,java.lang.String))来实现这一点。

```
StringBuilder builder = new StringBuilder("MonkeyPony");
for(/* As often as necessary */) {
    int halfway = (int) (builder.length() / 2);
    builder.insert(halfway, "Monkey");
} return builder.toString(); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2017-07-21T04:30:43.740

您不需要使用 StringBuilder 或任何其他复杂的方法来执行此操作。这是实现这一目标的最简单方法。在这个方法中，我只使用了简单的 String 方法。

```
import java.util.Scanner;

class Insert
{
    public static void main(String[] args)
    {
        System.out.println("Enter First String");
        Scanner scan = new Scanner (System.in);
        String str = scan.next();
        System.out.println("Enter Second String");
        Scanner scan2 = new Scanner (System.in);
        String str1 = scan2.next();
        int i = str.length();
        int j = i/2;

        if (i % 2 == 0)                    //Condition For Even
        {
            System.out.println(str.substring(0,j) + str1 + str.substring(j-1,(str.length() - 1)));
        }
        else 
        {
            System.out.println(str.substring(0,j) + str1 + str.substring(j,(str.length() - 0)));
        }
    }
} 
```

# assembly - 在 x86 汇编中将单个内存单元设置为零或常数的最快方法？

> ID：15442958
> 
> 赞同：3
> 
> 时间：2013-03-15T22:16:53.517
> 
> 标签：assembly, x86, x86-64, zero, micro-optimization

在 x86 中将单个内存单元设置为零的最快方法是什么？通常我这样做的方式是这样的：

```
C745D800000000  MOV [ebp-28], 0 
```

正如你所看到的，它有一个非常粗的编码，因为它使用了所有 4 个字节作为常量。使用普通寄存器，我可以使用`MVZE`更紧凑的寄存器，但`MVZE`不适用于内存。

我在想也许可以清除一个寄存器，然后`MOV`将寄存器值存储到内存中。然后，它将是两条指令，但总共只有 5 个字节，而不是上面的一个 7 字节指令。遵循“如果它更短，它通常更快”的规则，这可能是可取的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T22:27:13.493

不幸的是，您在这里写的是“直接”将存储单元归零的唯一方法。当然，异或寄存器然后将其移动到某个内存位置也可以，但我不知道这是否会更快。

如果您碰巧有一个值为零的寄存器并且您确定它，那么一定要使用它。否则，坚持使用`mov [ebp-28], 0`. 请记住，`mem, imm`已知操作数是最慢的操作数之一：如果您分析您的代码并发现这是一个瓶颈，请尝试在您的函数（或其他）开始时将寄存器初始化为零，然后在整个过程中使用它代码，作为一种预定义的常量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-02T22:23:21.353

如果您希望您的数据不在缓存中，并且您不希望很快再次访问它，那么这[`MASKMOVDQU`](https://www.felixcloutier.com/x86/maskmovdqu)可能是最快的方法。这允许您写入一个或多个字节，而不会影响周围的字节，也无需等待请求所有权请求将关联的缓存线带入内存。

本质上，写入是直接发送到内存的，而不是相反。由于 CPU 在高速缓存行大小的块中与内存交互，因此在幕后发生的事情是包含写入的高速缓存行被向下发送，以及指示哪些字节实际被更新的掩码。无论是在内存控制器、L3 高速缓存还是内存本身，要写入的字节都会与应该单独保留的字节合并。

# javascript - 是否可以使用 .print() 函数从特定选择器打印内容？

> ID：15442960
> 
> 赞同：0
> 
> 时间：2013-03-15T22:17:01.010
> 
> 标签：javascript, printing

是否可以从特定的 CSS/DOM 选择器元素打印内容，例如：

```
var elem = document.getElementById('div'); // where div innerHTML contains: Hello, Mars!
elem.print(); 
```

是否可以使用 JavaScript 打印出文档的特定部分，而不是整个页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:23:09.427

您可以使用[`@media`](https://developer.mozilla.org/en-US/docs/CSS/@media)来选择要打印的元素。

```
@media print{
    .dontPrint{
        display: none;
    }
} 
```

```
<p>You will see me!</p>
<p class="dontPrint">You won't see me!</p>
<button>Print</button> 
```

```
$("button").click(function(){
    print();
}); 
```

`[**Demo**](http://jsfiddle.net/DerekL/YRpJM/)`

* * *

![在此处输入图像描述](../Images/23178102818f7f09946d581f94f92e9b.png)

> 如您所见，带有的元素`.dontPrint`不会显示在打印预览中。您可以将此类应用于您不希望它出现的所有元素。

* * *

## 选择

```
@media print{
    .dontPrint{
        display: none;
    }
} 
```

```
<p>You will see me!</p>
<p>You won't see me!</p>
<button>Print</button> 
```

```
$("button").click(function(){
    printTarget($("p:eq(0)"));
});

function printTarget(ele){                    //input target element(s)
    $(ele).data({print: true});
    $("body *").filter(function(){
        console.log($(this).data().print);
        return !$(this).data().print;
    }).addClass("dontPrint");
    print();
    $("*").removeClass("dontPrint");
} 
```

`[**Demo**](http://jsfiddle.net/DerekL/gVWHp/)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:28:10.883

作为替代方案，您可以尝试这个（使用另一个窗口）

```
function print()
{
    var printWin = window.open();
    printWin.document.write(document.getElementById('printable_div').innerHTML);
    printWin.print();
    printWin.close();
} 
```

[**演示**。](http://jsfiddle.net/c3Lx9/1/)

# android - getTextBounds 在设计中返回不同的值

> ID：15442961
> 
> 赞同：0
> 
> 时间：2013-03-15T22:17:01.093
> 
> 标签：android, android-canvas, ondraw

在自定义视图上绘制文本时，我正在使用 getTextBounds 函数。在设计模式下，top 值始终为 0，bottom 具有一些正值。运行应用程序时，值完全不同（例如：top=0 bottom=58 变为 top=-37 bottom=7）。这是代码：

```
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    this.paint.getTextBounds("0,", 0, 2, this.bounds);
    int y = 10 + bounds.height();
    canvas.drawText("t=" + bounds.top + " b=" + bounds.bottom, 10, y, this.paint);
} 
```

# c# - 当类具有流类型的属性时清理问题

> ID：15442968
> 
> 赞同：1
> 
> 时间：2013-03-15T22:17:21.310
> 
> 标签：c#, idisposable

我有一个具有流类型属性的类，如下所示：

```
public class Csv
{
  private StreamReader streadReder;
  private StreamWriter streamWriter;
} 
```

是否需要实施`IDisposable`？如果需要，请提供链接。因为刺穿似乎有点混乱`IDisposable`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:39:47.277

是的，您应该在这种情况下实现 IDisposable。代码分析中甚至有一个设计警告：*[CA1001：拥有一次性字段的类型应该是一次性](http://msdn.microsoft.com/en-us/library/ms182172.aspx)的。*

最简单的实现可能如下所示：

```
public class Csv : IDisposable
{
    private StreamReader streadReader;
    private StreamWriter streamWriter;

    public void Dispose()
    {
        if (streadReader != null)
        {
            streadReader.Dispose();
        }

        if (streamWriter != null)
        {
            streamWriter.Dispose();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:34:36.450

如果该`Csv`类型拥有流资源并负责处理它们，那么它也应该实现`IDipsosable`并处理这些值

```
public class Csv : IDisposable { 
  ...
  public void Dispose() { 
    streamReader.Dispose();
    streamWriter.Dispose();
  }
} 
```

# php - 是否可以在 mysqli_query 中将日期（“Ymd H:i:s”）与 time() 进行比较？

> ID：15442972
> 
> 赞同：1
> 
> 时间：2013-03-15T22:17:34.983
> 
> 标签：php, sql

我想根据喜欢从数据库中选择过去 24 小时内发布的 10 个最受欢迎的帖子。在每个帖子的数据库中，我使用 post_date 列中的 date("Ymd H:i:s") 存储帖子发布的时间。

我需要这样的东西：

```
$most_popular = mysqli_query($mysqli_connect, "SELECT * FROM posts WHERE (time() - post_date) < 86400 ORDER BY likes DESC LIMIT 10"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:20:47.580

您可以执行以下操作：

```
SELECT * 
FROM posts 
WHERE post_date > DATE_SUB(NOW(), INTERVAL 1 DAY) 
ORDER BY likes DESC 
LIMIT 10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T22:22:25.533

我只想`post_date`与 24 小时前比较：

```
$last_24_hours = date("Y-m-d H:i:s", strtotime("-24 Hours"));
$query = sprintf("SELECT * 
                    FROM posts 
                   WHERE post_date > '%s'
                ORDER BY likes DESC
                   LIMIT 10", $last_24_hours);
$most_popular = mysqli_query($mysqli_connect, $query); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T22:21:01.043

```
SELECT *
FROM posts
WHERE post_date >= (now() - INTERVAL 1 DAY)
ORDER BY ...
etc... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T22:22:54.327

您的问题是：“是否可以在 mysqli_query 中将日期（“Ymd H:i:s”）与 time() 进行比较？

答案是肯定的：

```
SELECT TIME('2003-12-31 01:02:03'); // returns '01:02:03' 
```

注意：如果这是您的问题，这不能处理很多日期。

# ember.js - 使用 konacha 对 ember-data 模型进行故障单元测试

> ID：15442978
> 
> 赞同：0
> 
> 时间：2013-03-15T22:17:53.613
> 
> 标签：ember.js, ember-data, mocha.js, konacha

如果我独立运行每个规范，以下测试将通过。如果我连续运行它们，只有第一个规范会通过。

```
#= require spec_helper
#= require models/job
#= require ./fixtures/job

describe "Job", ->

  beforeEach (done) ->
    @job = App.Job.find(1)
    @job.on 'didLoad', -> done()

  it "returns property idName", ->
    expect( @job.get('idName') ).to.equal("#1 - first job")

  it "expects property idName to update if name changes", ->
    @job.set('name', 'new name')
    expect( @job.get('idName') ).to.equal("#1 - new name")

  it "expects property idName to update if originalId changes", ->
    @job.set('originalId', 7)
    expect( @job.get('idName') ).to.equal("#7 - first job") 
```

konacha 给我的错误是：

```
Error: timeout of 2000ms exceeded at http://localhost:3500/assets/mocha.js:4001:14 
```

任何人都有任何建议。我应该使用茉莉花吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:49:26.853

好的，我有一个解决方案。我在想应用程序是在每个规范之前初始化的。似乎在第一次测试之后加载了作业，所以我正在检查作业是否已加载并调用 done 函数。

```
beforeEach (done) ->
  @job = App.Job.find(1)
  @job.on 'didLoad', -> done()

afterEach ->
  Ember.run ->
    App.reset() 
```

# java - java socket和android之间使用Serializable对象的通信

> ID：15442981
> 
> 赞同：0
> 
> 时间：2013-03-15T22:18:02.213
> 
> 标签：java, android, sockets, networking, serializable

我现在的情况很复杂，我有一个运行带有网络线程的服务的 Android 应用程序。

另一方面，在我的笔记本电脑（win8）上运行的 java 应用程序。java 应用程序正在侦听 serversocket，等待 android 应用程序与之通信。一旦 android 应用程序创建一个套接字并将其绑定到正确的端口并寻址 java 应用程序中的服务器套接字，接受它并创建一个新套接字。

这个新的套接字正在等待来自 Android 应用（客户端）的数据包。android 应用程序发送一个可序列化的对象。

问题是java应用程序从来没有读过它，但我用wireshark嗅探并且正在接收数据包。

所以我尝试读取一个字节数组，并且效果很好，套接字读取它没有问题。

有什么猜测正在发生吗？我认为我的代码很好，这是一个非常基本的东西，我在 android 应用程序之间做了几次，不知道为什么现在不起作用。

**服务器（Java 应用程序）**

```
mServerSocket = new ServerSocket(port);

        mReceivedSocket = new Socket();

        mReceivedSocket = mServerSocket.accept();

        System.out.println("Accepted");

        mInput = new ObjectInputStream(mReceivedSocket.getInputStream());

        mOutput = new ObjectOutputStream(mReceivedSocket.getOutputStream());

        byte[] buf = new byte[4096];

        while (mReceivedSocket.isConnected()) {

            System.out.println("Waiting for packets");

            mInput.read(buf, 0, 4096);

            //NotificationPacket packet = (NotificationPacket) mInput.readObject();

            System.out.println("Packet received: "+buf.toString());

            //renderPacket(packet);

        } 
```

**客户端发送（Android 应用）**

```
mOutput.writeObject(packet);

        mOutput.flush(); 
```

Serializable 数据包在两边是相同的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:57:32.933

你必须在 ObjectInputStream 之前，在两端构造 ObjectOutputStream，否则会出现死锁。您还必须在两端*读取对象。*您正在写入一个对象，但正在读取一个字节数组。那没有意义。

# javascript - 如何使用谷歌电子表格作为实时操作的数据库

> ID：15442984
> 
> 赞同：0
> 
> 时间：2013-03-15T22:18:12.770
> 
> 标签：javascript, html, spreadsheet

我是 Web 应用程序和开发的新手。

我正在尝试开发一个可以使用 HTML5 地理位置获取 GPS 坐标的应用程序。我可以在地图上显示这个点。

但是从这一点开始，我想开发类似于谷歌纬度的smtg，并且我想将成员的坐标保存在数据库中。我希望这个数据库是一个在线数据库。

保存此坐标后，我将制作他们的历史线，成员将看到他们的位置以及他们的历史。

我正在使用 HTML5 和 javascript。这是否可以访问和使用电子表格作为带有或不带有 javascript 的在线数据库。或者我如何使用其他选项（语言和数据库）来完成这个过程。

谢谢你为我做的一切...

更新：

// 我正在使用下面的代码，我想将 enlem 和 boylam 变量保存到电子表格中，并希望之后接收这些数据以在地图上显示我休闲的人的历史。还可以作为跟踪人员应用程序同时供 4 或 5 人使用。是否可以在spreadshhet 上完成这项工作，或者我必须为此使用数据库。

问题是是否有可能用javascript从电子表格发送或接收数据，或者正如tobia所说，我只能用服务器端语言处理这个问题......

谢谢你为我做的一切...

```
<html>
<head>
<meta charset="utf-8">
<meta name="robots" content="noindex, nofollow">
<link rel="stylesheet" media="all" type="text/css" href="http://www.cssplay.co.uk/menus/css/hidden.css" />
<link href="style.css" rel="stylesheet" type="text/css">
<title>Neredeyim?</title>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/interface.js"></script>
<script src="http://maps.google.com/maps/api/js?sensor=true"></script>

<meta http-equiv="refresh" content="300">

<article>

</article>

<script type="text/javascript">

function success(position) {
  var mapcanvas = document.createElement('div');
  mapcanvas.id = 'mapcontainer';
  mapcanvas.style.height = '100%';
  mapcanvas.style.width = '100%';

  document.querySelector('article').appendChild(mapcanvas);

  var coords = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
  var en=coords.lat();
  var enlem=en.toFixed(2);// latitude variable
  var boy=coords.lng();
  var boylam=boy.toFixed(2);//longtitude variable
  var accuracy = position.coords.accuracy;

  var options = {
    zoom: 18,
    center: coords,
    panControl: false,
    mapTypeControl: true,
    mapTypeControlOptions: {
      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    },
    navigationControlOptions: {
        style: google.maps.NavigationControlStyle.SMALL
    },
    mapTypeId: google.maps.MapTypeId.HYBRID
  };
  var map = new google.maps.Map(document.getElementById("mapcontainer"), options);

    var marker = new google.maps.Marker({
        position: coords,
        map: map,
        clickable:true,
        title: "Mevcut Pozisyonunuz : " + enlem + " K " + boylam + " D " + " Koordinat Doğruluğu " + accuracy + " m.dir "
    });

    marker.info = new google.maps.InfoWindow({
    content: '<b>Pozisyonunuz :</b> ' + enlem + ' K ' + boylam + ' D ' +  ' <br><b>Koordinat doğruluğunuz :</b> ' + accuracy + ' m.dir.  </br>'  
    });

    google.maps.event.addListener(marker, 'click', function() {
    marker.info.open(map, marker);
    });

}

if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(success);
                            } else {
                                    error('Geo Location is not supported');
                                    }

</script>

</head>
<body onload="success()">

<input type="button" data-theme="b" data-icon="check" data-iconpos="right"     value="DEVAM" onClick="window.location.reload()" data-mini="true" />

<div id="mapcontainer"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:26:38.923

也许我误解了这个问题，但是这种数据处理和存储通常是通过服务器端程序完成的，并且有充分的理由。

如果您的应用程序的所有逻辑，包括安全检查等，都在 javascript 代码中（您的任何用户都可以阅读和修改，只需使用浏览器的开发工具）并且如果数据库只是一个在线电子表格，那么什么会停止恶意用户删除您的整个数据库，或读取其他人的位置，等等？

关键是，您最好使用服务器端语言和数据库技术并以传统方式做事，因为它为各种用户提供了更多的安全性和保护。PHP 和 MySQL 是迄今为止最受欢迎的选择，尽管在我看来还有更好的语言，例如 Ruby 或 Python。

* * *

但是，如果您了解安全隐患并仍希望使用 Google 电子表格作为其数据存储来构建交互式应用程序，您将在此处找到有关如何执行此操作的介绍和教程：

[http://www.alatechsource.org/blog/2012/05/using-the-google-spreadsheets-data-api-to-build-a-recommended-reading-list-code-words.h](http://www.alatechsource.org/blog/2012/05/using-the-google-spreadsheets-data-api-to-build-a-recommended-reading-list-code-words.h)

# token - ANTLR 语法：在未知表达式中使用已知标记

> ID：15442996
> 
> 赞同：0
> 
> 时间：2013-03-15T22:19:14.440
> 
> 标签：token, grammar, antlr3

我有一个组合的 ANTLR 语法，用于解析多行信息。可能在编写语法时，并非所有行都已经完全知道并在语法中定义。这应该得到承认。下面的例子是一个简化的例子：

```
rule:    (line)+ EOF;
LF:      ('\n'|'\r\n');
WS:      ' ';

INTEGER: ('0'..'9');
VALUE:   ('a'..'z'|'A'..'Z'|'0'..'9');

line:    'car' WS VALUE WS LF (subline LF)*;
subline: '>' (description | id | type | unknownsubline);

description: ('description' WS VALUE);
id:          ('id' WS INTEGER);
type:        ('type' WS VALUE);

unknownsubline:          (VALUE | WS | INTEGER)*;   /*don't known yet -> shall be logged...*/ 
```

我输入以下输入：

```
car car1
>description redPorsche
>id 123
>type pkw
>tires 4
>specifica fast,car
car car2
>description blueTruck 
```

该行在`>tires 4`Eclipse 的 ANTLR 解释器中被成功识别。但是下一行`>specifica fast,car`会导致 NoViableAltException，因为这个词`car`是一个已经定义的标记，这里使用的是一个未知的上下文。

有没有可能避免这种行为？是否可以识别`VALUE`包含已经定义的令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:55:34.773

不要将“汽车”作为关键字。改用句法动作：

```
line : car WS VALUE WS LF (subline LF)*;

car : id=VALUE {$id.text == "car"}? (); 
```

请注意，您对 VALUE 的定义最后似乎缺少 a `+`。