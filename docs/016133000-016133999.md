# StackOverflow 问答 16133000-16133999

# php - 如果行显示不存在结果如何更改字体颜色

> ID：16133004
> 
> 赞同：0
> 
> 时间：2013-04-21T15:46:46.763
> 
> 标签：php, fonts

如果行显示不存在结果，如何更改字体颜色

如果行显示不存在如何更改行的字体颜色我该怎么做请帮我解决这个问题谢谢

这是代码

```
$result1 = mysql_query("SELECT * FROM attendance where date '2013-4-30'  order by date ASC");
            while($row = mysql_fetch_array($result1))
            {   

            // echo out the contents of each row into a table

       echo "<tr>";
            echo '<td>' . $row['teacherid'] . '</td>';
            echo '<td>' . $row['name'] . '</td>';
            echo '<td>' . $row['date'] . '</td>';
            echo '<td>' . $row['attendance'] . '</td>';
            echo "</tr>"; 
```

这是这段代码的结果

```
-------------------------------------------
Teacher Id | Name  | Date     |Attendance |
--------------------------------------------
919        | Abcd  |2013-4-30 |present
918        | xyz   |2013-4-30 |absent 
815        | 123   |2013-4-30 |present
------------------------------------------- 
```

我想改变缺席的文字颜色

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T15:50:35.123

代替

```
echo "<tr>"; 
```

和

```
echo '<tr class="'.$row['attendance'].'">'; 
```

然后在你的CSS中你可以做

```
.present { color: green; }
.absent { color: red; } 
```

如果您只是想让出勤单元改变颜色，您可以将班级放在`<td>`而不是`<tr>`.

**编辑：**

根据要求提供完整版本的代码。

```
$result1 = mysql_query("SELECT * FROM attendance where date '2013-4-30'  order by date ASC");
        while($row = mysql_fetch_array($result1))
        {   

        // echo out the contents of each row into a table

   echo '<tr class="'.$row['attendance'].'">';
        echo '<td>' . $row['teacherid'] . '</td>';
        echo '<td>' . $row['name'] . '</td>';
        echo '<td>' . $row['date'] . '</td>';
        echo '<td>' . $row['attendance'] . '</td>';
        echo "</tr>"; 
```

如果您还没有样式表，那么只需将其放在 HTML 中的页面上：

```
<style type="text/css">
    .present { color: green; }
    .absent { color: red; }
</style> 
```

# unity3d - 当汽车到达交通信号灯时，如何在屏幕上显示“停止”消息？

> ID：16133008
> 
> 赞同：0
> 
> 时间：2013-04-21T15:47:14.817
> 
> 标签：unity3d

我已经使用了盒子对撞机和 GUI 功能......但是盒子对撞机的问题是你的车在撞到对撞机后会停下来，而且我还希望屏幕上显示的消息在 10 秒后消失。

这是我的代码：

```
var msg = false;
function OnCollisionEnter(theCollision : Collision)
{
  if(theCollision.gameObject.name == "trafficLight")
  {
    Debug.Log("collided");
    msg=true;

  }
}

function OnGUI () 
{
  if (msg== true) 
  {
    GUI.Box (Rect (100,0,500,50), "You need to stop if the traffic signal is red");
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:17:11.113

> 但是盒子对撞机的问题是你的车在撞到对撞机后会停下来

你应该澄清这一点。最终发布另一个带有特定问题的问题，可能还有一个[SSCCE](http://sscce.org)。

> 我还希望屏幕上显示的消息在 10 秒后消失。

然后把这样的东西放在`Update`你的方法中`MonoBehavior`：

```
float timeElapsed;
float timeLimit = 10f;

void Update()
{
  if (msg)
  {
    timeElapsed += Time.deltaTime;
    if (timeElapsed >= timeLimit)
    {
      msg = false;
      timeElapsed = 0f;
    }
  }
} 
```

或者，对于更优雅的方法，您可以使用协程：

```
IEnumerator FadeAfterTime(float timeLimit)
{
    yield return new WaitForSeconds(timeLimit);
    msg = false;
}

void OnCollisionEnter(Collision collision)
{
  if(theCollision.gameObject.name == "trafficLight")
  {

    msg=true;
    StartCoroutine(FadeAfterTime(10f)); 
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:10:43.227

据我了解，当玩家靠近停车标志时，您希望屏幕上出现停车消息，以便玩家自己停车。

为了做到这一点，对于初学者，你需要让你的盒子成为触发器而不是对撞机。每个对象的对撞机上都有一个小复选框，上面写着 Trigger。您会希望勾选此项。

然后在交通灯附近的触发框中放置一个类似的脚本：

```
var msg = false;
function Start()
{
}

function OnTriggerEnter(theCollision : Collision)
{
  if(theCollision.gameObject.name == "car") //where "car" you put the name of the car object
  {
        msg = true;
        StartCoroutine(FadeAfterTime(10f));
  }
}

IEnumerator FadeAfterTime(float timeLimit)
{
    yield return new WaitForSeconds(timeLimit);
    msg = false;
}

function OnGUI () 
{
    if (msg== true) 
    {
        GUI.Box (Rect (100,0,500,50), "You need to stop if the traffic signal is red");
    }

}

function Update()
{
} 
```

本质上，红绿灯触发框将检测汽车何时进入指定区域，并显示GUI，以及Heisenbug在上一个答案中提供的淡出脚本。

我目前无法自己测试这个，但它应该对你有用。如果您有任何问题，请让我知道。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-04-09T08:20:52.967

为此，您应该使用 RayCasting 功能。我在这里提供了一个真实的例子。

```
using UnityEngine;
using System.Collections;

public class carMovement : MonoBehaviour {
    bool isStop = false;
    public float speed = 30f;
    // Use this for initialization
    void Start () {

    }

    // Update is called once per frame
    void Update () {
        if (!isStop) {
            transform.position += (Vector3.forward * Time.deltaTime * speed);

            var fwd = transform.TransformDirection (Vector3.forward);
            Debug.DrawRay (transform.position, fwd, Color.green);
            if (Physics.Raycast (transform.position, fwd, 10)) {
                print ("There is something in front of the object!");
                isStop = true;
                transform.position = transform.position;
            }
        }
    }
} 
```

# c++ - In a simple C++ 11 four-thread program, my two consumer threads are not returning if I comment stdout print lines

> ID：16133010
> 
> 赞同：1
> 
> 时间：2013-04-21T15:47:25.180
> 
> 标签：c++, multithreading, c++11, mutex, condition-variable

I am learning my way through synchronization primitives with C++ 11\. I have to write those methods for a template class which is a FIFO queue whose maximum number of elements is declared at construction time.

There are two threads which push items into said queue and two that retrieve them. They are synchronized by using two condition variables to make sure that consumer threads only pop items when the queue is not empty and that producer threads push new items only when the queue is not full. The queue has got a open/close status which is used as an additional condition in the wait() call of both condition variable. When the queue is closed, threads should return without performing any operation.

```
// main.cpp
#include "stdafx.h"

int _tmain(int argc, _TCHAR* argv[]){
    BlockingQueue<int> bq(10);
    int sum1=0, sum2=0;

    std::thread c1([&bq,&sum1](){
        int i;
        while(bq.get(i)) sum1+=i;
    });
    std::thread c2([&bq,&sum2](){
        int i;
        while(bq.get(i)) sum2+=i;
    });
    std::thread p1([&bq](){
    for(int i=0;i<1000;i+=2) bq.put(i);
    });
    std::thread p2([&bq](){
    for(int i=0;i<1000;i+=2) bq.put(i+1);
    });
    p1.join();
    std::cout<<"p1 thread returned."<<std::endl;
    p2.join();
    std::cout<<"p2 thread returned."<<std::endl;
    bq.close();
    c1.join();
    std::cout<<"c1 thread returned."<<std::endl;
    c2.join();
    std::cout<<"c2 thread returned."<<std::endl;
    std::cout<<"sum1: "<<sum1<<std::endl;
    std::cout<<"sum2: "<<sum2<<std::endl;
    std::cout<<"total: "<<sum1+sum2<<std::endl;
    return 0;
} 
```

Here's the class I've created:

```
// BlockingQueue.h
#include "stdafx.h"

template<class T> class BlockingQueue
{
    std::mutex t_queue_mutex;
    std::queue<T> t_queue;
    int t_queue_cap_value;
    bool isQueueOpen;
    std::condition_variable put_condition;
    std::condition_variable get_condition;
public:
    BlockingQueue(int N);
    ~BlockingQueue(void);
    bool put(T t_item);
    bool get(T &t_item);
    bool isOpen();
    bool isFull();
    bool isEmpty();
    void close();
};

// BlockinQueue.cpp
#include "BlockingQueue.h"
#include "stdafx.h"

template <class T> BlockingQueue<T>::BlockingQueue(int N)
{
    t_queue_cap_value=N;
    isQueueOpen=true;
    std::cout<<"Rejoice! A bq has been created!"<<std::endl;
}

template <class T> BlockingQueue<T>::~BlockingQueue(void)
{
}

template <class T> bool BlockingQueue<T>::isFull(){
    if(t_queue_cap_value==t_queue.size())
        return true;
    else
        return false;
}

template <class T> bool BlockingQueue<T>::isOpen(){
    return isQueueOpen;
}

template <class T> void BlockingQueue<T>::close(){
    isQueueOpen=false;
}

/* get method */
template <class T> bool BlockingQueue<T>::get(T &t_item){
    bool exitThreadStatus=false;

    if(!isOpen()){
        put_condition.notify_all();
        return false;
    }
    std::unique_lock<std::mutex> ul(t_queue_mutex);
    get_condition.wait(ul, [this](){
        //std::cout<<"Getter thread with get_id()="<<std::this_thread::get_id()<<" is waiting. isOpen()="<<isOpen()<<" and t_queue.empty()="<<t_queue.empty()<<std::endl;
        if(!isOpen())
            return true;
        else
            return !t_queue.empty();
    }); 
    if(isOpen()){
        exitThreadStatus=true;
        t_item=t_queue.front();
        t_queue.pop();
    }
    std::cout<<"Extracted "<<t_item<<". After pop size()="<<t_queue.size()<<std::endl;
    put_condition.notify_all();
    return exitThreadStatus;
}

/* put method */
template <class T> bool BlockingQueue<T>::put(T t_item){
    bool exitThreadStatus=false;

    if(!isOpen()){
        get_condition.notify_all();
        return false;
    }
    std::unique_lock<std::mutex> ul(t_queue_mutex);
    put_condition.wait(ul, [this](){
        if(!isOpen())
            return true;
        else
            return !isFull();
    }); 
        if(isOpen()){
        exitThreadStatus=true;
        t_queue.push(t_item);
    }
    std::cout<<"Inserting "<<t_item<<". After push size()="<<t_queue.size()<<std::endl;
    get_condition.notify_all();
    return exitThreadStatus;
}

template class BlockingQueue<int>; 
```

It seems to be working correctly whenever I leave the two std::cout lines in get() and put() uncommented, getting the following output (as expected):

```
Inserting 998\. After push size()=2
Extracted 997\. After pop size()=1
p1 thread returned.
Inserting 999\. After push size()=2
Extracted 998\. After pop size()=1
p2 thread returned.
Extracted 999\. After pop size()=0
Extracted 998\. After pop size()=0
c1 thread returned.
c2 thread returned.
sum1: 250000
sum2: 249500
total: 499500 
```

If I instead comment the cout lines, the two collecting threads never seem to return and I can't understand what is wrong with my code. Does anyone have a clue? Thank you!

Output with commented cout lines:

```
Rejoice! A bq has been created!
p1 thread returned.
p2 thread returned. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T16:58:19.207

尝试将 get_condition.notify_all() 和 put_condition.notify_all() 添加到 close() 中。

据我所知，如果调用 close() 时线程位于 get() 内部的 get_condition.wait() 中，它将永远处于等待状态。为什么这适用于我不知道的 cout 语句，尽管文档确实提到了“虚假唤醒”。

# python - Random number in label in python 3 and tkinter

> ID：16133015
> 
> 赞同：-3
> 
> 时间：2013-04-21T15:47:47.363
> 
> 标签：python, random, tkinter

How can I make that in label generate some numbers for example:

some text(e.g.Input): #here generate numbers#

Input and Output are text in label I want to make that number are generated every second in the label

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:37:24.937

要在每个随机数之间等待一秒钟，请使用该`after`方法并更改预定函数中的文本：

```
from tkinter import Tk, Label
import random

root = Tk()
label = Label(root)
label.pack()

def replace_text():
    label.config(text=str(random.random()))
    root.after(1000, replace_text)

replace_text()
root.mainloop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T16:58:19.483

这是你要找的吗？每按一次按钮，就会显示一个新的随机数。

```
import tkinter as tk
import random

class Window:
    def __init__(self, master):
        self.frame = tk.Frame(master)
        self.text = tk.StringVar()
        self.text.set(random.randint(1, 10))
        self.ranNumLabel = tk.Label(self.frame, textvariable = self.text)
        self.genButton = tk.Button(self.frame, text = 'Generate Random Number', command = self.genRanNum)
        self.ranNumLabel.grid(row = 0)
        self.genButton.grid(row = 1)
        self.frame.grid()

    def genRanNum(self):
        self.text.set(random.randint(1, 10))
        # when text is updated, the Label associated with it also updated

def main():
    root = tk.Tk(className = ' Random Number Generator')
    app = Window(root)
    root.mainloop()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T16:58:28.593

您的问题相当令人困惑，但这是我可以回答的...要生成随机数，请使用`random.random()`函数和`label()`tkinter 中的函数。

这是一个例子：

```
import random
from tkinter import *
x=random.random()

root = Tk()

w = Label(root, text=x)
w.pack()

root.mainloop() 
```

# c# - 在 C# 中多对多替换字符串

> ID：16133016
> 
> 赞同：0
> 
> 时间：2013-04-21T15:48:03.160
> 
> 标签：c#, string, replace, char, character

我有一个与 String.Replace 方法相关的问题。首先，我尝试将许多字符串更改为字母，例如，

```
article = article.Replace('b', 'd').Replace('B', 'D');
article= article.Replace('d', 'g').Replace('D', 'G'); 
```

'b' 或 'B' 的字符改变了 'g' 或 'G'，而不是我预期的 'd' 或 'D'。有没有其他选择可以解决这个障碍？谢谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T15:52:47.000

如果您说**b**最终成为**g**，那么这是因为您是：

1.  **然后将b**更改为**d**，
2.  将那些**d**（以及原始**d**）更改为**g**

如果您尝试将**b**的字符更改为**d**，*然后***仅**将步骤 1 之前的**d**字符更改为**g**的字符，
......然后按相反的顺序执行这些步骤。

1.  **然后将d**更改为**g**，
2.  将那些**b**更改为**d**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:17:22.447

这是一个经常重复的任务。我建议创建一个扩展方法。将它放在一个静态类中。在您使用扩展方法的地方，它的命名空间必须是“可见的”。

```
public static string TranslateChars(this string s, string originalChars,
                                                   string replacementChars)
{
    if (String.IsNullOrEmpty(s)) {
        return s;
    }
    if (originalChars == null) {
        throw new ArgumentNullException(originalChars);
    }
    if (replacementChars == null) {
        throw new ArgumentNullException(replacementChars);
    }
    if (originalChars.Length != replacementChars.Length) {
        throw new ArgumentException(
                   "'originalChars' and 'replacementChars' must have same length.");
    }

    // Fill translation dictionary
    var translations = new Dictionary<char, char>(originalChars.Length);
    for (int i = 0; i < originalChars.Length; i++) {
        translations.Add(originalChars[i], replacementChars[i]);
    }

    //Translate
    var sb = new StringBuilder(s);
    for (int i = 0; i < sb.Length; i++) {
        char replacement;
        if (translations.TryGetValue(sb[i], out replacement)) {
            sb[i] = replacement;
        }
    }
    return sb.ToString();
} 
```

适用于您的问题：

```
article = article.TranslateChars("bBdD","dDgG"); 
```

* * *

注意：`StringBuilder`允许您替换文本中的单个字符，这不能直接使用 a 来完成`string`，因为字符串是不可变的。

此外，由于我们一次性完成所有翻译，因此我们避免了您遇到的问题，即已经翻译的字符无意中被第二次翻译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T17:49:39.850

正如其他人已经指出的那样，您`B -> D`首先进行替换，然后进行`D -> G`替换。所以你真正在做的是`B -> G`and `D -> G`。

避免选择正确替换顺序的问题的声明方法如下。

```
var map = new Dictionary<char, char>
{
    { 'b', 'd' },
    { 'B', 'D' },
    { 'd', 'g' },
    { 'D', 'G' }
};

article = new string(article
    .Select(x => map.ContainsKey(x) ? map[x] : x)
    .ToArray()); 
```

# random - Randomized Number Repeats when run again LUA

> ID：16133017
> 
> 赞同：1
> 
> 时间：2013-04-21T15:48:04.833
> 
> 标签：random, lua

Why do I get the same randomized numbers from my previous run when I run again this code:

```
local weightsOutput = {}
for i=0, 2 do        --initialize random weights
     weightsOutput[i] = string.format("%0.4f",(2*math.random())-1)
     print(weightsOutput[i])
end 
```

any problem with my code? By the way, I'm using LUA.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T15:54:55.240

开始你的程序

```
math.randomseed( os.time() ) 
```

# html - Flask download box

> ID：16133020
> 
> 赞同：3
> 
> 时间：2013-04-21T15:48:09.570
> 
> 标签：html, download, flask

I'm trying to make a button that will show the "Save as" download box. The images that I want to offer for download are not in the static folder, nor they will be. Using `flask.send_file` works by opening the file in the browser.

How can I use `send.file` in order to bring the download box up, without submitting the page (without changing the current page)?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T16:17:58.770

查看中的`as_attachment`选项`send_file`：

[http://flask.pocoo.org/docs/api/#flask.send_file](http://flask.pocoo.org/docs/api/#flask.send_file)

这是一个有点相关的问题：

[Content-Disposition：“内联”和“附件”有什么区别？](https://stackoverflow.com/questions/1395151/content-dispositionwhat-are-the-differences-between-inline-and-attachment)

# list - 只计算数字和字母列表中的数字

> ID：16133022
> 
> 赞同：1
> 
> 时间：2013-04-21T15:48:13.397
> 
> 标签：list, count, numbers, prolog

我是 Prolog 的新手，我自己似乎无法得到答案。

我想要的是，Prolog 计算列表中的数字，而不是每个元素。例如：

```
getnumbers([1, 2, c, h, 4], X). 
```

应该给我：

```
X=3

getnumbers([], 0).
getnumbers([_ | T], N) :- getnumbers(T, N1), N is N1+1. 
```

是我所拥有的，但它显然给了我列表中的每个元素。我不知道如何以及在哪里放置“仅计数”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:57:19.530

像往常一样，当您使用列表（和 SWI-Prolog）时，您可以使用在那里找到的模块[lambda.pl：http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/lambda.pl](http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/lambda.pl)

```
:- use_module(library(lambda)).

getnumbers(L, N) :-
    foldl(\X^Y^Z^(number(X)
             ->  Z is Y+1
             ;   Z = Y),
          L, 0, N). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:56:37.010

考虑使用内置谓词（例如在 SWI-Prolog 中），如果您对如何自己做感兴趣，请检查它们的实现：

`include(number, List, Ns), length(Ns, N)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-16T03:07:12.873

保持逻辑纯洁，这很容易：将元谓词 [`tcount/3`](https://stackoverflow.com/a/29960878/4609915)与具体的类型测试谓词`number_t/2`（缩写`number_truth/2`）一起使用：

```
number_t(X,Truth) :- number(X), !, Truth = true.
number_t(X,Truth) :- nonvar(X), !, Truth = false.
number_t(X,true)  :- freeze(X,  number(X)).
number_t(X,false) :- freeze(X,\+number(X)). 
```

让我们运行 OP 建议的查询：

```
?- tcount(number_t,[ 1 , 2 ,c,h, 4 ],N)。
N = 3\. % 确定性成功

```

请注意，这是单调的：延迟变量绑定在逻辑上总是合理的。考虑：

```
?- tcount(number_t,[A,B,C,D,E],N), A=1 , B=2 , C=c, D=h, E=4。
N = 3，A = 1，B = 2，C = c，D = h，E = 4；% 成功，但留下选择点
错误的。

```

最后，让我们看一下以下*相当普遍*的查询的一些答案：

```
?- tcount(number_t,[A,B,C],N).
N = 3, freeze(A,  number(A)), freeze(B,  number(B)), freeze(C,  number(C)) ;
N = 2, freeze(A,  number(A)), freeze(B,  number(B)), freeze(C,\+number(C)) ;
N = 2, freeze(A,  number(A)), freeze(B,\+number(B)), freeze(C,  number(C)) ;
N = 1, freeze(A,  number(A)), freeze(B,\+number(B)), freeze(C,\+number(C)) ;
N = 2, freeze(A,\+number(A)), freeze(B,  number(B)), freeze(C,  number(C)) ;
N = 1, freeze(A,\+number(A)), freeze(B,  number(B)), freeze(C,\+number(C)) ;
N = 1, freeze(A,\+number(A)), freeze(B,\+number(B)), freeze(C,  number(C)) ;
N = 0, freeze(A,\+number(A)), freeze(B,\+number(B)), freeze(C,\+number(C)). 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T13:32:59.663

这使用 Prolog 与 number/1 的自然模式匹配，以及一个附加子句（下面的 3）来处理不是数字的情况。

```
% 1 - base recursion
getnumbers([], 0).

% 2 - will pass ONLY if H is a number
getnumbers([H | T], N) :- 
    number(H),
    getnumbers(T, N1), 
    N is N1+1.

% 3 - if got here, H CANNOT be a number, ignore head, N is unchanged, recurse tail  
getnumbers([_ | T], N) :- 
    getnumbers(T, N). 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T15:56:49.317

当然，你必须检查一个元素的类型，看它是否满足条件。

[number](http://www.swi-prolog.org/pldoc/doc_for?object=number/1) /1 这是您要查找的谓词。

另请参见[if/then/else](http://www.swi-prolog.org/pldoc/man?predicate=send_arrow/2)构造，以在递归子句中使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T21:25:09.457

此类问题的一个常见 prolog 习语是首先定义您的谓词以供公共消费，并让它调用一个“工人”谓词。通常它会使用某种累加器。对于您的问题，公共消费谓词类似于：

```
count_numbers( Xs , N ) :-
  count_numbers_in_list( Xs , 0 , N ) .

count_numbers_in_list( [] , N , N ) .
count_numbers_in_list( [X|Xs] , T , N ) :-
  number(X) ,
  T1 is T+1 ,
  count_numbers_in_list( Xs , T1 , N )
  . 
```

您需要构造递归位，使其也是*尾递归*的，这意味着递归调用只依赖于参数列表中的数据。这允许编译器在每次调用时重用现有的堆栈帧，因此谓词实际上变成了迭代而不是递归。一个适当的尾递归谓词可以处理无限长的列表；一个不是将在每次递归时分配一个新的堆栈帧并最终破坏它的堆栈。以上`count_numbers_in_list/3`是尾递归。这不是：

```
getnumbers([H | T], N) :- 
  number(H),
  getnumbers(T, N1), 
  N is N1+1. 
```

# angularjs - 如何在包含 ng-repeat 的选择上触发 ng-change

> ID：16133034
> 
> 赞同：5
> 
> 时间：2013-04-21T15:49:12.087
> 
> 标签：angularjs, angularjs-ng-repeat

我有两个选择框，当第一个选择框更改时，第二个选择框会自行更新。

```
<label>Region</label>
<select ng-model="region" 
        ng-change="clear(1)" 
        ng-options="l.region for l in locations"
></select>
<br />
<label>Country</label>
<select ng-model='country'
        ng-change="clear(2)" 
        ng-options="c.country for c in region.countries"
></select> 
```

我的位置是一个 json 对象，如下所示：

```
[
  {region: "Europe", countries: [{country: "France"}, {country: "UK"}/*, ...*/]},
  {region: "Africa", countries: [{country: "Cameroon"}, {country: "Algeria"}]}
  /*, ...*/
] 
```

这一切都以这种方式正常工作。

当我想将第一个选择框的值设置为欧洲时，它开始变得复杂，我想在第二个选择框上触发 ng-change 事件。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-04T04:22:04.693

您想`ng-change`在第二个选择框上触发事件，相当于模型`region`更改时的场景。所以你可以使用观察者来实现它。

```
$scope.$watch('region', function (newValue, oldValue) {
    console.log(newValue, oldValue);
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:59:51.400

当您可以简单地从控制器手动调用函数时，为什么要触发 onchange 事件？另外不要忘记您可以手动设置您在 ng-model 中指定的属性的值，并且它的值将反映在 select 元素中。

# opengl - 为什么阿尔法混合如此昂贵？

> ID：16133035
> 
> 赞同：2
> 
> 时间：2013-04-21T15:49:36.303
> 
> 标签：opengl, alphablending

从我刚开始使用 OpenGL 的经验来看，我发现 alpha 混合对性能的影响尤其明显。我不会展示任何代码示例，因为它不是特别相关。我只是对为什么在绘制片段时准确地进行 alpha 混合是一项昂贵的措施感兴趣。显然这是一个额外的操作，而不是仅仅将片段着色器输出写入像素，但是谁能详细说明这个操作到底是什么？我知道我可以筛选官方文档，但我正在寻找一个快速直接的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:03:20.157

Alpha 混合需要对`read + compute + write`每个像素进行处理，而不是简单的`write`. 公式是

```
new_value = old_value * (1 - alpha) + color * alpha 
```

这当然比做起来难多了

```
new_value = color 
```

# java - 无法检索插件配置的组件配置器/工件已重新定位到 commons-io:commons-io:1.3.2

> ID：16133036
> 
> 赞同：3
> 
> 时间：2013-04-21T15:49:38.280
> 
> 标签：java, maven-2, javafx-2

我正在尝试使用 zonski 的[`javafx-maven-plugin`](https://github.com/zonski/javafx-maven-plugin/wiki)，但是在执行时

```
mvn com.zenjava:javafx-maven-plugin:1.2:fix-classpath 
```

（有关[修复 JRE 类路径的](https://github.com/zonski/javafx-maven-plugin/wiki/Fixing-the-JRE-classpath)更多详细信息）我收到一个警告和一个错误：

```
[WARNING] While downloading org.apache.commons:commons-io:1.3.2
  This artifact has been relocated to commons-io:commons-io:1.3.2.
  https://issues.sonatype.org/browse/MVNCENTRAL-244

[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error configuring: com.zenjava:javafx-maven-plugin. Reason: Unable to retrieve component configurator for plugin configuration 
```

这是完整的日志：

```
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven Default Project
[INFO]    task-segment: [com.zenjava:javafx-maven-plugin:1.5:fix-classpath] (aggregator-style)
[INFO] ------------------------------------------------------------------------
[WARNING] While downloading org.apache.commons:commons-io:1.3.2
  This artifact has been relocated to commons-io:commons-io:1.3.2.
  https://issues.sonatype.org/browse/MVNCENTRAL-244

-----------------------------------------------------
this realm = app0.child-container[com.zenjava:javafx-maven-plugin:1.5]
urls[0] = file:/C:/Users/myuser/.m2/repository/com/zenjava/javafx-maven-plugin/1.5/javafx-maven-plugin-1.5.jar
urls[1] = file:/C:/Users/myuser/.m2/repository/org/twdata/maven/mojo-executor/2.0/mojo-executor-2.0.jar
urls[2] = file:/C:/Users/myuser/.m2/repository/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar
urls[3] = file:/C:/Users/myuser/.m2/repository/org/sonatype/sisu/sisu-inject-plexus/1.4.2/sisu-inject-plexus-1.4.2.jar
urls[4] = file:/C:/Users/myuser/.m2/repository/org/sonatype/sisu/sisu-inject-bean/1.4.2/sisu-inject-bean-1.4.2.jar
urls[5] = file:/C:/Users/myuser/.m2/repository/org/sonatype/sisu/sisu-guice/2.1.7/sisu-guice-2.1.7-noaop.jar
urls[6] = file:/C:/Users/myuser/.m2/repository/org/sonatype/aether/aether-api/1.7/aether-api-1.7.jar
urls[7] = file:/C:/Users/myuser/.m2/repository/com/zenjava/javafx-deploy-lib/1.2/javafx-deploy-lib-1.2.jar
urls[8] = file:/C:/Users/myuser/.m2/repository/org/apache/velocity/velocity/1.7/velocity-1.7.jar
urls[9] = file:/C:/Users/myuser/.m2/repository/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar
urls[10] = file:/C:/Users/myuser/.m2/repository/commons-lang/commons-lang/2.4/commons-lang-2.4.jar
urls[11] = file:/C:/Users/myuser/.m2/repository/commons-io/commons-io/1.3.2/commons-io-1.3.2.jar
urls[12] = file:/C:/Users/myuser/.m2/repository/org/codehaus/plexus/plexus-archiver/2.1.1/plexus-archiver-2.1.1.jar
urls[13] = file:/C:/Users/myuser/.m2/repository/org/codehaus/plexus/plexus-io/2.0.3/plexus-io-2.0.3.jar
Number of imports: 10
import: org.codehaus.classworlds.Entry@a6c57a42
import: org.codehaus.classworlds.Entry@12f43f3b
import: org.codehaus.classworlds.Entry@20025374
import: org.codehaus.classworlds.Entry@f8e44ca4
import: org.codehaus.classworlds.Entry@92758522
import: org.codehaus.classworlds.Entry@ebf2705b
import: org.codehaus.classworlds.Entry@bb25e54
import: org.codehaus.classworlds.Entry@bece5185
import: org.codehaus.classworlds.Entry@3fee8e37
import: org.codehaus.classworlds.Entry@3fee19d8

this realm = plexus.core
urls[0] = file:/C:/maven/apache-maven-2.2.1/bin/../lib/maven-2.2.1-uber.jar
Number of imports: 10
import: org.codehaus.classworlds.Entry@a6c57a42
import: org.codehaus.classworlds.Entry@12f43f3b
import: org.codehaus.classworlds.Entry@20025374
import: org.codehaus.classworlds.Entry@f8e44ca4
import: org.codehaus.classworlds.Entry@92758522
import: org.codehaus.classworlds.Entry@ebf2705b
import: org.codehaus.classworlds.Entry@bb25e54
import: org.codehaus.classworlds.Entry@bece5185
import: org.codehaus.classworlds.Entry@3fee8e37
import: org.codehaus.classworlds.Entry@3fee19d8
-----------------------------------------------------
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error configuring: com.zenjava:javafx-maven-plugin. Reason: Unable to retrieve component configurator for plugin configuration
[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: < 1 second
[INFO] Finished at: Sun Apr 21 17:36:51 CEST 2013
[INFO] Final Memory: 9M/22M
[INFO] ------------------------------------------------------------------------ 
```

有关如何解决此问题的任何提示？谢谢 ：-）

更新：对 Maven 使用 -e 开关：

```
C:\Users\myuser> mvn -e com.zenjava:javafx-maven-plugin:1.5:fix-classpath
+ Error stacktraces are turned on.
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven Default Project
[INFO]    task-segment: [com.zenjava:javafx-maven-plugin:1.5:fix-classpath] (aggregator-style)
[INFO] ------------------------------------------------------------------------
[WARNING] While downloading org.apache.commons:commons-io:1.3.2
  This artifact has been relocated to commons-io:commons-io:1.3.2.
  https://issues.sonatype.org/browse/MVNCENTRAL-244

-----------------------------------------------------
this realm = app0.child-container[com.zenjava:javafx-maven-plugin:1.5]
urls[0] = file:/C:/Users/myuser/.m2/repository/com/zenjava/javafx-maven-plugin/1.5/javafx-maven-plugin-1.5.jar
urls[1] = file:/C:/Users/myuser/.m2/repository/org/twdata/maven/mojo-executor/2.0/mojo-executor-2.0.jar
urls[2] = file:/C:/Users/myuser/.m2/repository/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar
urls[3] = file:/C:/Users/myuser/.m2/repository/org/sonatype/sisu/sisu-inject-plexus/1.4.2/sisu-inject-plexus-1.4.2.jar
urls[4] = file:/C:/Users/myuser/.m2/repository/org/sonatype/sisu/sisu-inject-bean/1.4.2/sisu-inject-bean-1.4.2.jar
urls[5] = file:/C:/Users/myuser/.m2/repository/org/sonatype/sisu/sisu-guice/2.1.7/sisu-guice-2.1.7-noaop.jar
urls[6] = file:/C:/Users/myuser/.m2/repository/org/sonatype/aether/aether-api/1.7/aether-api-1.7.jar
urls[7] = file:/C:/Users/myuser/.m2/repository/com/zenjava/javafx-deploy-lib/1.2/javafx-deploy-lib-1.2.jar
urls[8] = file:/C:/Users/myuser/.m2/repository/org/apache/velocity/velocity/1.7/velocity-1.7.jar
urls[9] = file:/C:/Users/myuser/.m2/repository/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar
urls[10] = file:/C:/Users/myuser/.m2/repository/commons-lang/commons-lang/2.4/commons-lang-2.4.jar
urls[11] = file:/C:/Users/myuser/.m2/repository/commons-io/commons-io/1.3.2/commons-io-1.3.2.jar
urls[12] = file:/C:/Users/myuser/.m2/repository/org/codehaus/plexus/plexus-archiver/2.1.1/plexus-archiver-2.1.1.jar
urls[13] = file:/C:/Users/myuser/.m2/repository/org/codehaus/plexus/plexus-io/2.0.3/plexus-io-2.0.3.jar
Number of imports: 10
import: org.codehaus.classworlds.Entry@a6c57a42
import: org.codehaus.classworlds.Entry@12f43f3b
import: org.codehaus.classworlds.Entry@20025374
import: org.codehaus.classworlds.Entry@f8e44ca4
import: org.codehaus.classworlds.Entry@92758522
import: org.codehaus.classworlds.Entry@ebf2705b
import: org.codehaus.classworlds.Entry@bb25e54
import: org.codehaus.classworlds.Entry@bece5185
import: org.codehaus.classworlds.Entry@3fee8e37
import: org.codehaus.classworlds.Entry@3fee19d8

this realm = plexus.core
urls[0] = file:/C:/maven/apache-maven-2.2.1/bin/../lib/maven-2.2.1-uber.jar
Number of imports: 10
import: org.codehaus.classworlds.Entry@a6c57a42
import: org.codehaus.classworlds.Entry@12f43f3b
import: org.codehaus.classworlds.Entry@20025374
import: org.codehaus.classworlds.Entry@f8e44ca4
import: org.codehaus.classworlds.Entry@92758522
import: org.codehaus.classworlds.Entry@ebf2705b
import: org.codehaus.classworlds.Entry@bb25e54
import: org.codehaus.classworlds.Entry@bece5185
import: org.codehaus.classworlds.Entry@3fee8e37
import: org.codehaus.classworlds.Entry@3fee19d8
-----------------------------------------------------
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error configuring: com.zenjava:javafx-maven-plugin. Reason: Unable to retrieve component configurator for plugin configuration
[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Error configuring: com.zenjava:javafx-maven-plugin. Reason: Unable to retrieve component confi
gurator for plugin configuration
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:723)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:569)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:539)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:284)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
        at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.PluginConfigurationException: Error configuring: com.zenjava:javafx-maven-plugin. Reason: Unable to retrieve compon
ent configurator for plugin configuration
        at org.apache.maven.plugin.DefaultPluginManager.populatePluginFields(DefaultPluginManager.java:1368)
        at org.apache.maven.plugin.DefaultPluginManager.getConfiguredMojo(DefaultPluginManager.java:724)
        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:468)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
        ... 17 more
Caused by: org.codehaus.plexus.component.repository.exception.ComponentLookupException: Unable to lookup component 'org.codehaus.plexus.component.conf
igurator.ComponentConfigurator', it could not be created
        at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:335)
        at org.apache.maven.plugin.DefaultPluginManager.populatePluginFields(DefaultPluginManager.java:1351)
        ... 20 more
Caused by: org.codehaus.plexus.component.factory.ComponentInstantiationException: Could not instanciate component: role: 'org.codehaus.plexus.componen
t.configurator.ComponentConfigurator', implementation: 'org.codehaus.plexus.component.configurator.BasicComponentConfigurator', role hint: 'basic'
        at org.codehaus.plexus.component.factory.java.JavaComponentFactory.makeException(JavaComponentFactory.java:77)
        at org.codehaus.plexus.component.factory.java.JavaComponentFactory.newInstance(JavaComponentFactory.java:62)
        at org.codehaus.plexus.DefaultPlexusContainer.createComponentInstance(DefaultPlexusContainer.java:1464)
        at org.codehaus.plexus.component.manager.AbstractComponentManager.createComponentInstance(AbstractComponentManager.java:93)
        at org.codehaus.plexus.component.manager.ClassicSingletonComponentManager.getComponent(ClassicSingletonComponentManager.java:92)
        at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:331)
        ... 21 more
Caused by: java.lang.NoClassDefFoundError: org/codehaus/plexus/classworlds/realm/ClassRealm
        at java.lang.Class.getDeclaredConstructors0(Native Method)
        at java.lang.Class.privateGetDeclaredConstructors(Class.java:2413)
        at java.lang.Class.getConstructor0(Class.java:2723)
        at java.lang.Class.newInstance0(Class.java:345)
        at java.lang.Class.newInstance(Class.java:327)
        at org.codehaus.plexus.component.factory.java.JavaComponentFactory.newInstance(JavaComponentFactory.java:44)
        ... 25 more
Caused by: java.lang.ClassNotFoundException: org.codehaus.plexus.classworlds.realm.ClassRealm
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at org.codehaus.classworlds.RealmClassLoader.loadClassDirect(RealmClassLoader.java:195)
        at org.codehaus.classworlds.DefaultClassRealm.loadClass(DefaultClassRealm.java:255)
        at org.codehaus.classworlds.DefaultClassRealm.loadClass(DefaultClassRealm.java:274)
        at org.codehaus.classworlds.RealmClassLoader.loadClass(RealmClassLoader.java:214)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        ... 31 more
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1 second
[INFO] Finished at: Sun Apr 21 17:52:00 CEST 2013
[INFO] Final Memory: 9M/22M
[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T05:15:07.803

关于[5 分钟内从零到 JavaFX](http://www.zenjava.com/2012/11/24/from-zero-to-javafx-in-5-minutes/)，它提到如下： -

> 在开始之前，您需要安装**JDK 7 update 6 或更高版本**，以及**Maven 3.0 或更高版本**。[本指南](http://www.avajava.com/tutorials/lessons/what-is-maven-and-how-do-i-install-it.html)将引导您完成。

请纠正我，如果我错了。我了解您正在使用`Maven 2.2.1`，请将您的升级`Maven`为`version 3.x`.

我希望这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:56:12.767

您是否尝试过将 JavaFX 与 maven 集成，将其用作系统依赖项？也许这种方法可以帮助你。

您可以将 Maven 项目创建为默认项目。您需要定义安装 JDK 的 JAVA_HOME 环境变量（我假设您拥有集成了 JavaFX 的最新 JDK 之一）并添加此依赖项：

```
<dependency>
  <groupId>javafx</groupId>
  <artifactId>javafx</artifactId>
  <version>2.2.3</version>
  <scope>system</scope>
  <systemPath>${java.home}/lib/jfxrt.jar</systemPath>
</dependency> 
```

注意不需要使用环境变量，你可以放一个你系统的完整路径[这是Maven系统依赖的链接](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#System_Dependencies)

为了执行你的项目，当你生成你的项目时，你需要在你的类路径中包含这个 jar。

```
java -cp path_to_jfxrt.jar:all_your_dependencies:your_generated.jar your_package.YourClass 
```

希望能帮助到你。

# java - How to display HashMap data in GUI?

> ID：16133039
> 
> 赞同：1
> 
> 时间：2013-04-21T15:49:47.953
> 
> 标签：java, swing, jtable, layout-manager, springlayout

I have a `HashMap<String, String>` representing a date (the key), and an amount (the value).

I would like to display this information on my interface. I began by using an ArrayList and adding a new JLabel to it for each new key & value that was added to the HashMap. However this led to display problems, and I also feel like it's not the right way to do this:

```
Iterator iterator = labels.entrySet().iterator();
    while (iterator.hasNext()) {
        Map.Entry pairs = (Map.Entry)iterator.next();
        entries.add(new JLabel(pairs.getKey() + ": £" + pairs.getValue()));
        for(JLabel entry : entries) {
            mainPanel.add(entry);
            for(int i = 0; i < entries.size() - 1; i+=2) {
                JLabel labelOne = entries.get(i);
                JLabel labelTwo = entries.get(i+1);
                mainPanelLayout.putConstraint(SpringLayout.NORTH, labelOne,
                    400,
                    SpringLayout.NORTH, contentPane);
                mainPanelLayout.putConstraint(SpringLayout.NORTH, labelTwo,
                    10,
                    SpringLayout.SOUTH, labelOne);

            }
            /*mainPanelLayout.putConstraint(SpringLayout.NORTH, entry,
                400,
                SpringLayout.NORTH, contentPane);*/
        }
    } 
```

In terms of what I'm trying to achieve, I want to display the information like so:

```
21/04/13 : 300

22/04/13 : 400 
```

Is there a way of displaying information from the `HashMap` in GUI?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T15:53:05.437

我将使用 JTable 并在一列中显示键的字符串表示形式，并在其他列中显示相应值的重要字段的字符串表示形式。我认为最重要的一步是创建一个像样的 TableModel 来保存数据。它可以使用 Map 作为其数据核心，但 Map 需要以某种方式可排序，我认为这样才能正常工作，可能是 LinkedHashMap 或 TreeMap。

# clearcase - Removing ClearCase vobs

> ID：16133044
> 
> 赞同：1
> 
> 时间：2013-04-21T15:50:21.107
> 
> 标签：clearcase

We have a ClearCase server installed on Solaris box and there are several vobs replicated in a multi-site environment. Now as this Clearcase server is becoming old we have setup an new Server on Windows and able to bring that new server into multi-site with all the required vobs. Now we would like to remove/decommission the vobs from old solaris box and want to free up the space occupied by those vobs.

Can any one suggest the best procedure to do this and also point us to the links for that procedure?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:08:39.333

你可以：

*   遵循技术说明“[使用 ClearCase MultiSite 移动 VOB](http://www-01.ibm.com/support/docview.wss?uid=swg21266219) ”，基本上：

    *   在源 vob 服务器上创建一个副本：
    *   在目标 vob 服务器上导入副本：

```
多功能工具 mkreplica -export -workdir c:\\
[-maxsize 100m] -fship :
@

```

进口：

```
多工具 mkreplica -import -workdir /var/tmp/doesntexist/ -tag
/your/new/vobtag/ -stgloc -auto -npreserve -public /var/adm/atria/
运输/ms_ship/进货/

```

*   简单地`rmtag`和`unregister`solaris盒子上的vob，以便将它完全从中央注册服务器中删除。
    请参阅“[如何从 ClearCase 注册表中删除 VOB 或视图](http://www-01.ibm.com/support/docview.wss?uid=swg21134700)”

另一种方法是删除该vob，然后按照“[删除副本](https://publib.boulder.ibm.com/infocenter/cchelp/v7r1m0/topic/com.ibm.rational.clearcase.cc_ms_admin.doc/t_delete_replica.htm)”

然后，您可以简单地删除 vob 并取回该磁盘空间。

# html - 侧导航背景缩小，而内容不缩小

> ID：16133047
> 
> 赞同：0
> 
> 时间：2013-04-21T15:50:31.420
> 
> 标签：html, css, twitter-bootstrap, background, overflow

我正在为大学婚礼设计模块制作一个快速而肮脏的网站。该网站并非旨在工作，而是用作展示所提议设计的外观和操作方式的工具。

我使用了引导模板，事情变得有些混乱。

**问题：**

我在每个页面的左侧都有一个以图像为背景的导航栏。如果我重新调整浏览器窗口的大小，内容将保持相同的高度（应该如此），但背景会从底部消失。

这是网站的链接： [http ://www.wareisjoe.com/bistro/](http://www.wareisjoe.com/bistro/)

我不知道这是由于 HTML 格式不正确还是 css 问题造成的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:32:48.993

这与引导程序有关，因为它可以使用手机上的布局。宽度越低，它就越会移动到手机版本。

# android - 非活动 InputConnection 上的 showStatusIcon

> ID：16133048
> 
> 赞同：1
> 
> 时间：2013-04-21T15:50:34.153
> 
> 标签：android, emulation

这对我来说是一个奇怪的错误，因为它只发生在我在模拟器上从纵向切换到横向时；SDK 级别 17 Android 4.2.2

单击时，我的小部件在纵向上可以正常启动，但是通过在我的 numPad 上点击“7”并单击小部件切换到横向，将第一次打开 MainActivity，但是在随后的点击中，小部件停止打开 MainActivity ......并且完全停止运作。

我的主屏幕上的其他图标可以正常打开。

基本上想了解 inactive InputConnection 上的 showStatusIcon 是什么意思？为什么只有当我将模拟器切换到横向模式时才会发生这种情况？

提前致谢。

我的日志猫：

```
04-21 19:56:28.956: D/gralloc_goldfish(5826): Emulator without GPU emulation detected.
04-21 19:56:41.727: I/Choreographer(5826): Skipped 59 frames!  The application may be doing too much work on its main thread.
04-21 19:56:41.947: W/IInputConnectionWrapper(5826): showStatusIcon on inactive InputConnection
04-21 19:56:42.607: I/Choreographer(5826): Skipped 62 frames!  The application may be doing too much work on its main thread. 
```

# php - 数组到 JavaScript

> ID：16133053
> 
> 赞同：1
> 
> 时间：2013-04-21T15:51:09.737
> 
> 标签：php, javascript, jquery

我有一组来自数据库的项目。

```
`$this->ingredientsHistory` is the variable that contains the array. 
```

我想把它转换成一个 javascript var 来保存它们，然后我可以在自动完成 jquery UI 函数中使用它们。

我试过了`var ingredients = <?php echo json_encode($this->ingredientsHistory); ?>`

这是一个`print_r($this->ingredientsHistory);`输出示例...

> 数组 ( [0] => 数组 ( [name] => 橙子 ) [1] => 数组 ( [name] => 鸡 ) )

任何帮助，将不胜感激。

编辑 - 更多信息：

```
$(function() {
var ingredients = <?php echo json_encode($this->ingredientsHistory); ?>;
console.log(ingredients);
//this is the default tags that jquery gives me - i need to turn ingredients into something similar.
var availableTags = [
  "ActionScript",
  "AppleScript",
  "Asp",
  "BASIC",
  "C",
  "C++",
  "Clojure",
  "COBOL",
  "ColdFusion",
  "Erlang",
  "Fortran",
  "Groovy",
  "Haskell",
  "Java",
  "JavaScript",
  "Lisp",
  "Perl",
  "PHP",
  "Python",
  "Ruby",
  "Scala",
  "Scheme"
];
$( "#tags" ).autocomplete({
  source: ingredients
}); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:38:35.170

您的问题是您必须从 php 数组中提取每个名称属性。

使用这样的东西

```
<?php

$ingredientsArray = array(
    array('name' => "Lettuce"),
    array('name' => "Butter"),
    array('name' => "Chocolate"),
    array('name' => "Cheese"),
); // This is your original data structure

$resultArray = array(); // Let's treat it to get a plain array of ingredient names
foreach ($ingredientsArray as $ingredient)
    $resultArray[] = $ingredient['name'];

// And finally, output it
echo json_encode($resultArray); 
```

如果你真的想在 JS 中得到它（虽然我不推荐它，以防你的`$ingredientsArray`变量中有敏感数据

```
$(function() {
    // Your PHP-to-JSON stuff
    var ingredientsArray = <?php echo json_encode($ingredientsArray); ?>;

    var ingredientNames = []; // There are faster ways such as reduce, but it's the most browser-compatible way to do this.
    for (int i = 0, l = ingredientsArray.length; i < l; ++i)
        ingredientNames.push(ingredientsArray[i]['name']);

    // Then assign it to your autocomplete plugin
    $('#tags').autocomplete({ source: ingredientNames });
}); 
```

请注意，`hasOwnProperty`尚未使用，因为我们已经知道数组的数据格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:54:40.313

```
echo json_encode($this->ingredientsHistory); 
```

使用 JSON 作为与客户端通信的一种方式。简单、快速、广泛支持等。再简单不过了。在客户端（JavaScript）中，您必须`JSON.stringify`处理`JSON.parse`这个问题。

本机支持在传统模式下不可靠且不保证，但您可以使用[官方 JSON](https://github.com/douglascrockford/JSON-js)实现来保证对 JSON 的跨浏览器支持。如果您使用 jQuery，正如您所指出的，您不会有问题，只需使用 jQuery 方法。

此外，在 PHP5 中，您可以使用

```
var ingredients = "<?= $this->ingredients; ?>"; 
```

如果内联处理失败，您总是可以简单地使用 Ajax。

```
$.ajax({
    url: "blabla",
    data: "blabla",
    type: "POST",
    dataType: "json",
    success: function(serverResponse) {
        console.log(serverResponse);
    }
}); 
```

并`echo json_encode(whatever)`在 Ajax 目标 url 上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T15:54:10.103

您可以进行 PHP 迭代以将元素推入 Array。

```
<script>
var jsArray = new Array();
<?php
   for ($this->ingredientsHistory as $value) 
?>
jsArray.push(<?=$value?>);
<?php
   } 
?>
</script> 
```

# android - 存储从相机拍摄的图像

> ID：16133060
> 
> 赞同：0
> 
> 时间：2013-04-21T15:51:55.043
> 
> 标签：android, android-camera, android-camera-intent

我可以通过以下意图拍照

`cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);`

然后在`onActivityResult`方法中，我将拍摄的图像设置为 an`ImageView`并尝试使用以下功能将图像存储到 SD 卡

```
private void savePic(Bitmap bmp) {
    if(!isSDOK || !isSDWritable)
        return;

        String name = "TESTA";
        File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);
        File file = new File(path,name+".jpg");

        path.mkdirs();
        ByteArrayOutputStream bos = new ByteArrayOutputStream(); 
        bmp.compress(CompressFormat.JPEG, 100 /*ignored for PNG*/, bos); 
        byte[] bitmapdata = bos.toByteArray();
        ByteArrayInputStream bis = new ByteArrayInputStream(bitmapdata);

        try{
            InputStream is = bis;
            OutputStream os = new FileOutputStream(file);
            byte[] data = new byte[is.available()];
            is.read();
            os.write(data);
            is.close();
            os.close();
        }catch(Exception e){Log.e("IMAGE CONVERT ERR", e.toString());}
        return;
} 
```

当我检查`PICTURES`文件夹时，我看到了文件，但图像是空白的，并且大小始终为 12kb。我不能使用上述方法从位图文件中保存图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:36:46.517

是的，根据 CommonsWare 评论，您可以像这样使用 EXTRA_OUTPUT：

```
private void capturePhoto() {
    File root = new File(Environment.getExternalStorageDirectory(), "Folder");
    if (!root.exists()) {
        root.mkdirs();
    }
    File file = new File(root, "filename.jpeg");
    Uri outputFileUri = Uri.fromFile(file);

    Intent photoPickerIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    photoPickerIntent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
    photoPickerIntent.putExtra("outputFormat", Bitmap.CompressFormat.JPEG.toString());
    photoPickerIntent.putExtra("return-data", true);
    startActivityForResult(photoPickerIntent, TAKE_PICTURE);
} 
```

# sql - 在 Postgres 中大 INSERT 后查询慢

> ID：16133063
> 
> 赞同：3
> 
> 时间：2013-04-21T15:51:59.277
> 
> 标签：sql, postgresql, batch-processing, postgresql-9.2, postgresql-performance

我们在 RedHat 中使用 Postgres 9.2。我们有一个类似于以下的表：

```
CREATE TABLE BULK_WI (
    BULK_ID INTEGER NOT NULL,
    USER_ID VARCHAR(20) NOT NULL,
    CHUNK_ID INTEGER,
    STATE VARCHAR(16),
    CONSTRAINT BASE_BULK_WI_PK PRIMARY KEY(BULK_ID,USER_ID)
);
CREATE INDEX BASE_BULK_WI_IDX01 ON BULK_WI(STATE, CHUNK_ID); 
```

作为批处理作业的一部分，我们首先使用新的 BULK_ID 向表中添加一些行。所有新记录的 CHUNK_ID = NULL，STATE = 'PENDING'。插入在 500K 到 150 万行之间。发生这种情况时表的大小超过 15M 记录。

插入后，我们开始分块处理表。为此，我们首先为下一个块选择一些项目，然后处理它们。通过以下查询选择项目：

```
UPDATE BASE_BULK_WI wi SET wi.STATE = 'PROCESSING', wi.CHUNK_ID = $1 
WHERE wi.STATE='PENDING' AND wi.BULK_ID = $2 
AND wi.USER_ID IN 
    (SELECT USER_ID FROM BASE_BULK_WI WHERE BULK_ID = $3 
     AND CHUNK_ID IS NULL AND STATE='PENDING' LIMIT $4 FOR UPDATE) 
```

**$1**每次块迭代都会增加，**$2**和**$3**始终相同（刚刚插入的 BULK_ID），**$4**通常在 2,000 到 10,000 之间。

问题是前几个块需要很长时间才能更新。例如，对于 2000 的限制，大多数更新发生在 1 秒内，而前几个更新需要 2 分钟以上。

我们正试图了解为什么会发生这种情况以及如何解决它。阅读文档后：

> 为了确保数据页的一致性，在每个检查点之后对数据页的第一次修改会导致记录整个页面内容。

我们认为它与检查站和 WAL 有关，但我们无法确定它。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T19:32:25.213

### [`ANALYZE`](http://www.postgresql.org/docs/current/interactive/sql-analyze.html)

[autovacuum 守护进程](http://www.postgresql.org/docs/current/interactive/routine-vacuuming.html#AUTOVACUUM)也会自动运行`ANALYZE`，但需要一些时间才能启动。如果您在*一个*`UPDATE`巨大的 .`INSERT``ANALYZE`

 *### `FROM`子句代替`IN`

`IN`对于大型子查询，速度非常慢。这可能会表现得更好：

```
UPDATE base_bulk_wi wi
SET   wi.state = 'PROCESSING'
    , wi.chunk_id = $1 
FROM (
    SELECT user_id, bulk_id 
    FROM   base_bulk_wi
    WHERE  bulk_id = $3 
    AND    chunk_id IS NULL
    AND    state = 'PENDING'
    LIMIT  $4
    FOR    UPDATE
    ) x 
WHERE wi.bulk_id = x.bulk_id
AND   wi.user_id = x.user_id; 
```

### 索引

像这样的[部分索引](http://www.postgresql.org/docs/current/interactive/indexes-partial.html)应该最适合您的情况：

```
CREATE INDEX base_bulk_wi_partial_idx01 ON bulk_wi(chunk_id)
WHERE state = 'PENDING' AND chunk_id IS NULL; 
```

为获得最佳性能，请*在*`INSERT`. 如果它已经存在，它可能有助于在之前删除并在之后重新创建。

有人可能认为包含`bulk_id`在这个索引中以允许在 Postgres 9.2 中**进行仅索引扫描是个好主意。**但是由于您`FOR UPDATE`在子查询中，因此无论如何这不是一个选项。

如果`user_id`是一个`integer`而不是`varchar`. （用户表的外键。）除了更快的处理和更小的表之外，两个整数完全适合最小大小的索引。你的主键会受益不少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:17:13.047

1）更改条件的顺序，不确定，但我认为没有使用索引：

`AND CHUNK_ID IS NULL AND STATE='PENDING'`

为了

`STATE='PENDING' AND CHUNK_ID IS NULL`

和

`WHERE wi.STATE='PENDING' AND wi.BULK_ID = $2`

为了

`WHERE wi.BULK_ID = $2 AND wi.STATE='PENDING'`

2）如果您不使用列`CHUNK_ID`，`select's`那么我建议添加到索引`BASE_BULK_WI_IDX01`条件`WHERE CHUNK_ID IS NULL`- 它会导致索引更小，因为它仅用于更新。

也不需要 column`State`和`User_ID`to be `varchar`- 您应该使用较小的类型，例如`enum`or `integer`。索引会小得多，保存和读取数据的速度会更快，使用的磁盘、处理器和其他人员资源也会更少。*

# php - 在 PHP 5.4.x 中定义自定义迭代器？

> ID：16133064
> 
> 赞同：2
> 
> 时间：2013-04-21T15:52:19.713
> 
> 标签：php

PHP (5.4.x) 是否允许创建**可以放入 foreach 循环**的自定义迭代器？（我见过一个相当笨重的迭代器示例）

我正在访问一个 Web API，它每次调用只允许一个人提取 N 行/对象，这会导致本地代码笨拙 - 即用于从 API 获取一批数据的外循环和用于处理每批元素的内循环.

我更愿意将外部循环推入迭代器（拉下数据块并跟踪外部 API 等的索引），这样我就可以编写更像这样的代码：

```
$datastream = new ApiIterator(/*params here*/);
foreach($datastream as $row){
   // do inner loop processing here
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:59:16.670

可以从 PHP 5.0 开始，您需要使用 PHP 的 Class Iterator 接口 ( [http://php.net/manual/en/class.iterator.php](http://php.net/manual/en/class.iterator.php) ) 并在您的 ApiIterator Class 中扩展它（实现）

# jquery - 如何使用 jQuery 生成 CSS？

> ID：16133068
> 
> 赞同：0
> 
> 时间：2013-04-21T15:52:54.293
> 
> 标签：jquery

我正在研究按钮生成器，最后一步是为我的按钮 div 生成 css 代码。我正在使用下面的代码，但 w 只能存储一个值，让我们说宽度如何获得另一个高度填充值等..？

```
function showWidth(ele, w) {
    $("#myCode").html(  "width:"   + w + ";"  + "<br/>" + " height: "   + w + ";" + "<br/>");
}

$("#code").click(function () { 
    showWidth("button", $("#valuePX").val()); 
    showWidth("button", $("#valuePX1").val()); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:55:08.077

使用 Jquery 的 CSS 方法。

```
buttonHeight = $("button").css("height");
buttonPadding = $("button").css("padding"); 
```

您可以将此方法用于任何 CSS 属性。

如果您需要设置值：

```
buttonHeight = $("button").css("height","100px");
buttonPadding = $("button").css("padding","0 50 0 25"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:59:29.833

```
function showWidth(ele, values) {
      $("#myCode").html(  "width:"   + values.width + ";"  + "<br/>" + " height: "   + values.height + ";" + "<br/>" 

);
    }
    $("#code").click(function () { 
        var values = {};
        values.width = $("#valuePX").val();
        values.height = $("#valuePX1").val();
       //you can add as many things as possible like values.padding, values.anything
        showWidth("button",values); 

}); 
```

# javascript - 拖放购物车 n

> ID：16133069
> 
> 赞同：1
> 
> 时间：2013-04-21T15:52:54.557
> 
> 标签：javascript, jquery, html

我目前正在使用 jQuery 编写拖放式购物车。我在编码时遇到问题，以便将产品的详细信息转移到购物篮中。这是我在 jsfiddle 中的代码：http: [//jsfiddle.net/cf7av/](http://jsfiddle.net/cf7av/)

和来源：

```
<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta charset="utf-8">
    <title>Products</title>
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/style.css">
    <script type="text/javascript" src="scripts/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="scripts/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="scripts/dragdrop.js"></script>

</head>
<body>
<section id="topbar">
<?php echo 'Welcome, ' . $row_userdets['forename'] . ' ' . $row_userdets['surname']; ?>. <a href="<?php echo $logoutAction ?>">Click to Logout.</a>
</section>
<h1 class="header">Our products</h1>

<div class="cart">
<div id ="cartHeader">
<h2 class="header">Shopping Cart</h2>
Drag product here to add to your cart
</div>
<div class = "cart-content">
<ol class = "cartlist">
</ol>
</div>
<div>
<p class="total">Total: £0</p>
</div>
</div>

<a href="#" class="item"> 
<div class="product">
<img src="images/PioneerDJM2000Nexus.jpg" class="prodimg">
<p class="id">001</p>
<p class= "prodtitle">Pioneer DJM 2000 Nexus</p>
<p class = "price">£1999</p>
<p>Advanced performance high-end DJ mixer for pro DJs and clubs.</p>
</div>
</a>

</body>
</html>

$(document).ready(function() {
    var total = 0;
    $('.product').draggable({
                revert:true,
                proxy:'clone',
                onStartDrag:function(){
                    $(this).draggable('options').cursor = 'not-allowed';
                    $(this).draggable('proxy').css('z-index',10);
                },
                onStopDrag:function(){
                    $(this).draggable('options').cursor='move';
                }
            });

    $('.cart').droppable({
        onDrop:function(e,source){
            var name = $(source).find('.prodtitle').text();
            var price = $(source).find('.price').text();
            var id = $(source).find('.id').text();
            var priceNum = parseFloat(price.split('£')[1])
            var itemHtml = 0;
            if(document.getElementById(id) == null) {
                itemHtml = '<li class="cartItem" + id="' + id + '>1x ' + name + ' - ' + price + '</li>';
                $('.cartlist').append(itemHtml);
            }
            else{
                var curr = parseInt($('#' + id).text().substring(0,1));
                curr++;
                itemHtml = '<li class="cartItem" + id="' + id + '>' + curr + 'x '+ name + ' - ' + price + '</li>';
                $('#' + id).html(itemHtml);
            }

            total += pricenum;
            $('.total').text("£" + total);

        }
    });

}); 
```

谢谢。

# javascript - onbeforeunload jquery & css 样式处理程序？

> ID：16133072
> 
> 赞同：1
> 
> 时间：2013-04-21T15:53:11.493
> 
> 标签：javascript, jquery, jquery-ui

我正在寻找插入和修改“onbeforeunload”javascript 标记的命令。我主要寻找按钮样式并更改按钮文本的行为。和一些整体的 CSS 来设计一切也会很好，但我被困住了。

似乎没有地方清楚地定义如何设置 onbeforeunload 弹出窗口的样式。帮助任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:55:25.713

onbeforeunload "pop-up" 是浏览器原生的。

# symfony - 它可能在侦听器中分离实体

> ID：16133074
> 
> 赞同：0
> 
> 时间：2013-04-21T15:53:14.087
> 
> 标签：symfony, doctrine-orm, symfony-2.2

我在表单中有一个带有价格属性的实体。在更新中，我想取消对此实体的更改。

这是我在 preUpdate 事件监听器中的代码：

```
if($entityManager->contains($entity)) {
    $entityManager->detach($entity);
    $uow  = $entityManager->getUnitOfWork();
    $meta = $entityManager->getClassMetadata(get_class($entity));
    $uow->recomputeSingleEntityChangeSet($meta, $entity);
} 
```

但在测试中收到此错误消息：

1) WebFactory\PriceListBundle\Tests\Entity\PriceListTest::testCreateProduct Doctrine\ORM\ORMInvalidArgumentException: Entity WebFactory\Bundle\PriceListBundle\Entity\PriceList@000000005f6fc4da0000000028ff97b1 不受管理。如果实体从数据库中获取或通过 EntityManager#persist 注册为新实体，则该实体被管理

# java - 最小产品生成树

> ID：16133076
> 
> 赞同：0
> 
> 时间：2013-04-21T15:53:29.447
> 
> 标签：java, c, algorithm, graphics, graph

在这个`minimum product spanning tree`问题中，树的成本是树中所有边权重的乘积，而不是权重之和。您可以假设所有边都具有正权重。我想得到以下问题的答案。

**(1)**给出一个最小乘积生成树与最小权重生成树不同的图。

**(2)**给出一种计算最小乘积生成树的有效算法。（提示：考虑对数）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:04:41.560

最小乘积生成树的问题可以通过对树进行转换来解决，方法是取边权重的对数，然后找到这棵修改后的树的 MST。

记住对数的性质，`log(ab) = log(a) + log(b)`。因此，最小产品生成树可以转换为最小成本生成树问题。

# algorithm - Factors that facilitate to compare two algorithms of the same time complexity

> ID：16133079
> 
> 赞同：0
> 
> 时间：2013-04-21T15:53:54.337
> 
> 标签：algorithm, complexity-theory

I have to complete a study on analysis of digital algorithms. I need some expert ideas on the topic. I understand that two algorithms having the same time complexity are affected by the constant, say alpha, in there complexity equations. The algorithm with a greater value of alpha is considered poorer to an algorithm with a smaller alpha. An example equation for the complexity would be F(n)=A(n^2+2n)

What other factors govern the comparison between two algorithms in case they are of the same time complexity? Any suggestions would be most welcome.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:11:04.940

内存是另一个需要考虑的因素，例如 Mergesort 通常以相同的时间复杂度运行（尽管常数因子较低），但空间是 Heapsort 的两倍（我说“通常”，因为就地 Mergesort 通常是 O(n^ 2))。计算最多为 N 的素数的基本算法要求您存储最多为 N 的所有素数，而[埃拉托色尼筛](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)更省时，但需要您存储所有数字（不是所有素数）到 N. [基数排序](https://en.wikipedia.org/wiki/Radix_sort)在 O(n) 中运行（与在 O(n*log(n)) 中运行的堆排序/合并排序/快速排序相反），但几乎没有人使用基数排序，因为它需要更多的内存并且缓存性能很差。另请注意，递归算法通常比等效的迭代算法需要更多空间（以堆栈的形式）。

平均时间复杂度是另一个因素 - 冒泡排序和快速排序在相同的最坏情况时间复杂度 (O(n^2)) 下运行，但冒泡排序的平均时间复杂度为 n^2，而快速排序的平均时间复杂度为 n*log(n)。平衡二叉树中的插入和查找的最差平均时间为 n*log(n)，而哈希表中的插入和查找通常最差时间为 O(n)，平均时间恒定。

有时算法将具有相同的时间复杂度，但会使用成本较低的操作。例如，矩阵乘法的标准算法是 O(n^3)；另一种算法（我忘记了它的名字）以相同的时间复杂度运行，但它使用更少的乘法和更多的加法（加法比乘法便宜）。（在这种情况下，常数因素会受到影响，所以它仍然是苹果对苹果的比较，但要注意苹果对橙子的算法比较。）

另一个考虑因素是并行化。基本矩阵乘法算法的运行时间复杂度与[块矩阵乘法算法](http://en.wikipedia.org/wiki/Block_matrix)相同，但后者在并行运行时比前者效率更高。并行算法的一个子集还具有“无锁”的特性，这意味着它们无需使用信号量或监视器或其他锁定结构即可实现同步；无锁算法的一个子集是“无等待的”，这意味着所有线程都可以保证取得进展。

缓存性能是另一个考虑因素 - 基本和块矩阵乘法算法使用大致相同的内存量，但块算法具有更好的缓存行为（更少的缓存未命中）

稳定性是许多数值算法中的一个因素。在求解常微分方程时，四阶 Runge-Kutta 方法的收敛速度比隐式 Euler 方法快得多，但隐式 Euler 方法总是会收敛到解，而 Runge-Kutta 方法可能会表现出不稳定性（例如收敛到 Infinity 或 NAN） .

许多算法要求所有数据都驻留在主存中；相反，外部算法只要求在任何给定时间将一部分数据驻留在主存储器中。例如，经典的 Mergesort 算法要求所有被排序的元素都驻留在内存中，而 Polyphase Mergesort 只要求元素的子集驻留在内存中，而其余元素驻留在硬盘驱动器上或通过网络。

# eclipse - Hadoop WordCount Example- Run On Hadoop(Eclipse) option is not prompting Select Hadoop server to run on window

> ID：16133082
> 
> 赞同：1
> 
> 时间：2013-04-21T15:54:08.793
> 
> 标签：eclipse, hadoop, mapreduce, word-count

I am trying to run word count example on **Eclipse**. Generally when we click on "run on hadoop" option in eclipse we get a new window asking to select server location. But, now it is directly running the program without asking me to choose an existing server from list below.

I think because of this I am getting the following exception:

```
13/04/21 08:46:31 ERROR security.UserGroupInformation: PriviledgedActionException as:hduser1 cause:org.apache.hadoop.mapred.InvalidInputException: Input path does not exist: file:/home/hduser1/gutenbergIP/pg4300.txt
Exception in thread "main" org.apache.hadoop.mapred.InvalidInputException: Input path does not exist: file:/home/hduser1/gutenbergIP/pg4300.txt 
```

My code works if I change the line from:

```
FileInputFormat.setInputPaths(conf, "/home/hduser1/gutenbergIP/pg4300.txt"); 
```

to:

```
FileInputFormat.setInputPaths(conf, "hdfs://localhost:54310/home/hduser1/gutenbergIP/pg4300.txt"); 
```

If I explicitly specify the file name with full url it is working. I wanted some help regarding this. How can I make my relative URL work instead of giving a full URL(have to submit this as assignment in school).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:53:41.367

在您的代码中添加以下 2 行：

```
config.addResource(new Path("/HADOOP_HOME/conf/core-site.xml"));
config.addResource(new Path("/HADOOP_HOME/conf/hdfs-site.xml")); 
```

如果您不指定此项，您的客户端将查看不包含指定路径的本地 FS，从而引发该错误。

# pygame - 屏幕上的角色不会移动（pygame）

> ID：16133085
> 
> 赞同：0
> 
> 时间：2013-04-21T15:54:24.740
> 
> 标签：pygame, sprite

出于某种原因，箭头键不会移动“guy.png”精灵。有没有人解释为什么？是的，精灵确实出现在屏幕上，是的，guy.png 与项目位于同一文件夹下。

代码：

```
import pygame, sys
from pygame.locals import *
pygame.init()
screen = pygame.display.set_mode((500, 500), 0, 32)
guy_sprite = pygame.image.load("guy.png")
wall_sprite = pygame.image.load("wall.png")

class guy_class(pygame.sprite.Sprite):
    def __init__(self, surface):
        self.surface = surface
        self.x = 250
        self.y = 250
        self.vx = 0
        self.vy = 0
        self.sprite = guy_sprite

    def event(self, event):
        if event.type == pygame.K_UP:
            self.vy = -1
        elif event.type == pygame.K_DOWN:
            self.vy = 1
        elif event.type == pygame.K_LEFT:
            self.vx = -1
        elif event.type == pygame.K_RIGHT:
            self.vx = 1

    def move(self):
        self.x += self.vx
        self.y += self.vy

    def draw(self, surface):
        surface.blit(self.sprite, (int(self.x), int(self.y)))

    def position(self):
        return self.x, self.y

class wall_class(pygame.sprite.Sprite):
    def __init__(self, surface):
        self.x = 100
        self.y = 250
        self.vx = 0
        self.vy = 0
        self.sprite = wall_sprite

    def draw(self, surface):
        surface.blit(self.sprite, (self.x, self.y))

def end_game():
    pygame.quit()
    sys.exit()

clock = pygame.time.Clock()
guy = guy_class(screen)
wall = wall_class(screen)

while True:
    screen.fill((0, 0, 0))
    guy.move()
    guy.draw(screen)

    for event in pygame.event.get():
        if event.type == QUIT:
            end_game()
        elif event.type == pygame.KEYDOWN:
            guy.event(event)

    clock.tick(100)
    pygame.display.update() 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:23:39.670

你的精灵没有移动的原因是你正在检查类型而不是你的家伙事件函数中的键。

所以把它改成这样：

```
def event(self, event):
    if event.key == pygame.K_UP:
        self.vy = -1
    elif event.key == pygame.K_DOWN:
        self.vy = 1
    elif event.key == pygame.K_LEFT:
        self.vx = -1
    elif event.key == pygame.K_RIGHT:
        self.vx = 1 
```

您还应该检查 KEY_UP 事件，因此当您释放键时，您的精灵将停止。

# mysql - How to do MAX(COUNT(*)) in sql

> ID：16133086
> 
> 赞同：0
> 
> 时间：2013-04-21T15:54:39.713
> 
> 标签：mysql, count, max

i've two table :

```
prgm[id,name]
notes[id,note,id_prgm] 
```

I actually have a request to know some info about prgm :

```
SELECT p.id, name, AVG(note), COUNT(note)
FROM notes n
    JOIN prgm p
    ON p.id=n.id_prgm
GROUP BY p.id 
```

And that work as expected, but now i want to know the `MAX` of `AVG(note)` and of `COUNT(note)`, But if i do `MAX(COUNT(note))` it return me an error : `Invalid use of group function`. I understand why there is this problem, but I don't know how to fix it.

The only way I see, is to do two subrequest and put it inside `MAX()`, but is there a better way than two subrequest ?

(I'm on MySql with php)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T15:56:19.113

最简单的答案是，

```
SELECT  p.id, name, AVG(note), COUNT(note) totalCount
FROM    notes n
        INNER JOIN prgm p
            ON p.id=n.id_prgm
GROUP   BY p.id
ORDER   BY totalCount DESC
LIMIT   1 
```

但缺点是它不关心具有最高计数的重复记录。另一种选择是，

```
SELECT  p.id, name, AVG(note), COUNT(note)
FROM    notes n
        INNER JOIN prgm p
            ON p.id=n.id_prgm
GROUP   BY p.id
HAVING  COUNT(note) =
        (
            SELECT  DISTINCT COUNT(note) totalCount
            FROM    notes n
                    INNER JOIN prgm p
                        ON p.id=n.id_prgm
            GROUP   BY p.id 
            ORDER   BY totalCount DESC
            LIMIT   1
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:58:18.120

`order by`您可以使用and对任一列执行此操作`limit`：

```
SELECT p.id, name, AVG(note), COUNT(note)
FROM notes n
    JOIN prgm p
    ON p.id=n.id_prgm
GROUP BY p.id
order by avg(note) desc
limit 1 
```

要同时执行这两项操作，需要一些子查询。我会这样做：

```
select t.id, t.name, t.avgnote, t.countnote
from (select max(avgnote) as maxavg, max(countnote) as maxcount
      from (SELECT p.id, name, AVG(note) as avgnote, COUNT(note) as countnote
            FROM notes n
                 JOIN prgm p
                 ON p.id=n.id_prgm
            GROUP BY p.id
           ) t
     ) themax join
     (SELECT p.id, name, AVG(note) as avgnote, COUNT(note) as countnote
      FROM notes n
           JOIN prgm p
           ON p.id=n.id_prgm
      GROUP BY p.id
     ) t
     on t.avgnote = themax.avgnote or t.countnote = themax.countnote 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-12T13:27:32.107

这是包含一些测试数据的数据库（与 Access、MySQL 和 Oracle 兼容）：

```
CREATE TABLE notes (
  id int NOT NULL,
  note int NOT NULL,
  id_prgm int NOT NULL
);

INSERT INTO notes (id, note, id_prgm) VALUES (1, 4, 1);
INSERT INTO notes (id, note, id_prgm) VALUES (3, 16, 1);
INSERT INTO notes (id, note, id_prgm) VALUES (4, 3, 2);
INSERT INTO notes (id, note, id_prgm) VALUES (5, 4, 2);
INSERT INTO notes (id, note, id_prgm) VALUES (6, 5, 2);

ALTER TABLE notes
 ADD PRIMARY KEY (id);

CREATE TABLE prgm (
  id int NOT NULL,
  name varchar(255) NOT NULL
);

INSERT INTO prgm (id, name) VALUES (0, 'program 1');
INSERT INTO prgm (id, name) VALUES (1, 'program 1');
INSERT INTO prgm (id, name) VALUES (2, 'program 2');

ALTER TABLE prgm
 ADD PRIMARY KEY (id); 
```

您的查询：

```
SELECT p.id, name, AVG(note), COUNT(note)
FROM notes n
    JOIN prgm p
    ON p.id=n.id_prgm
GROUP BY p.id 
```

返回这些记录：

```
id  name        AVG(note)   COUNT(note)     
1   program 1   10.0000     2
2   program 2   4.0000      3 
```

如果您只想要 AVG 和 COUNT 列的 MAX，请使用此查询：

```
select max(avg_note), max(count_note)
from (
  SELECT AVG(note) as avg_note, COUNT(note) as count_note
  FROM notes n, prgm p 
  WHERE p.id=n.id_prgm
  GROUP BY p.id
) temptable 
```

此查询与 MySQL 不兼容，但也与 Access 和 Oracle 兼容，因为我在 FROM table1、table2 WHERE 中更改了 JOIN ON .. 并且我删除了 SELECT 中未包含在 GROUP BY 中的*name字段。*

由于性能/内存原因，我还删除了 SELECT 中不必要的字段*p.id 。*

查询将返回：

```
max(avg_note)   max(count_note)     
10.0000         3 
```

# android - 如何将单选按钮对齐到关联文本的右侧？

> ID：16133089
> 
> 赞同：27
> 
> 时间：2013-04-21T15:54:53.480
> 
> 标签：android, android-layout

我在类似按钮的单选组中有以下单选按钮。默认情况下，按钮位于关联文本的左侧。如何让按钮本身位于相关文本的右侧？

```
<RadioGroup
  android:id="@+id/points_radio_group"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical" >

  <RadioButton
    android:id="@+id/do_tastk_1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:checked="true"
    android:onClick="doTask1"
    android:paddingLeft="40dip"
    android:text="@string/task_name_1"
    android:textColor="#000000" />

  <RadioButton
    android:id="@+id/do_tastk_2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:checked="true"
    android:onClick="doTask2"
    android:paddingLeft="40dip"
    android:text="@string/task_name_2"
    android:textColor="#000000" />

</RadioGroup> 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-21T16:24:57.277

采用

```
 android:button="@null"
    android:drawableRight="@android:drawable/btn_radio" 
```

所以你的代码会是这样的：

```
<RadioGroup
  android:id="@+id/points_radio_group"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical">

  <RadioButton
    android:id="@+id/do_tastk_1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:checked="true"
    android:button="@null"
    android:drawableRight="@android:drawable/btn_radio"
    android:onClick="doTask1"
    android:paddingLeft="40dip"
    android:text="@string/task_name_1"
    android:textColor="#000000" />

  <RadioButton
    android:id="@+id/do_tastk_2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:checked="true"
    android:button="@null"
    android:drawableRight="@android:drawable/btn_radio"
    android:onClick="doTask2"
    android:paddingLeft="40dip"
    android:text="@string/task_name_2"
    android:textColor="#000000" />

</RadioGroup> 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-03-31T18:11:42.787

通过使用

```
android:button="@null"
android:drawableRight="@android:drawable/btn_radio" 
```

您更改单选按钮格式。最好的做法是正确对齐，

```
android:layoutDirection="rtl" 
```

在每个单选按钮上，文本将在左侧。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-12T09:53:07.723

**你可以在xml中做**

```
<android.support.v7.widget.AppCompatRadioButton
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="right|center" //or "center_vertical" for center text
android:layoutDirection="rtl"
android:text="hello" /> 
```

**以下行就足够了**

```
android:layoutDirection="rtl" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-23T19:14:04.710

简单的方法将其添加到 xml 中的单选按钮

```
android:layoutDirection="rtl" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-14T07:20:18.917

如果您打算动态添加元素，您可以尝试使用 textview 和右侧没有文本的单选按钮创建布局。这些线上的东西：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<RadioButton
    android:id="@+id/radiobutton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"/>

<TextView
    android:id="@+id/textview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/radiobutton"
    android:layout_alignBottom="@+id/radiobutton"
    android:layout_alignParentLeft="true"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-24T09:00:47.527

正如我在[此处](https://stackoverflow.com/questions/2631839/change-the-side-the-text-appears-on-a-radio-button)发布的那样，一个更简单的解决方案是使用内置的 Android 布局 - `android.R.layout.simple_list_item_single_choice`.

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2008 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<CheckedTextView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="?android:attr/listPreferredItemHeightSmall"
    android:textAppearance="?android:attr/textAppearanceListItemSmall"
    android:gravity="center_vertical"
    android:checkMark="?android:attr/listChoiceIndicatorSingle"
    android:paddingStart="?android:attr/listPreferredItemPaddingStart"
    android:paddingEnd="?android:attr/listPreferredItemPaddingEnd" /> 
```

如果您想修改它，您可以将上面的内容复制粘贴到一个新的 XML 文件中，然后使用`<include>`标签将其包含在您的其他布局中（在[Apache 2.0 许可下](http://www.apache.org/licenses/LICENSE-2.0)）。您也可以将其用作列表项，并保持不变。

# php - Magento -SQL 2002 错误

> ID：16133092
> 
> 赞同：0
> 
> 时间：2013-04-21T15:55:05.480
> 
> 标签：php, mysql, sql, amazon-web-services, magento-1.7

我在 EC2 大型实例上有一个 magento 网站，数据库在 RDS 上，这又是一个大型实例。现在，1\. 我在网站上最多有 25 人的流量。2.我及时遇到以下sql错误，有时会在6-7小时后出现，有时会在一天后出现，有人可以帮我解决这个问题吗？3.为了摆脱这个错误，我重新启动服务并恢复正常，但过了一段时间又再次弹出这个错误！

处理您的请求时出错 SQLSTATE[HY000] [2002] 连接超时

痕迹：

```
#0 /opt/bitnami/apps/magento/htdocs/lib/Zend/Db/Adapter/Pdo/Mysql.php(96): Zend_Db_Adapter_Pdo_Abstract->_connect()
#1 /opt/bitnami/apps/magento/htdocs/lib/Varien/Db/Adapter/Pdo/Mysql.php(313): Zend_Db_Adapter_Pdo_Mysql->_connect()
#2 /opt/bitnami/apps/magento/htdocs/lib/Zend/Db/Adapter/Abstract.php(459): Varien_Db_Adapter_Pdo_Mysql->_connect()
#3 /opt/bitnami/apps/magento/htdocs/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('SET NAMES utf8', Array)
#4 /opt/bitnami/apps/magento/htdocs/lib/Varien/Db/Adapter/Pdo/Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract->query('SET NAMES utf8', Array)
#5 /opt/bitnami/apps/magento/htdocs/app/code/core/Mage/Core/Model/Resource.php(169): Varien_Db_Adapter_Pdo_Mysql->query('SET NAMES utf8')
#6 /opt/bitnami/apps/magento/htdocs/app/code/core/Mage/Core/Model/Resource.php(110): Mage_Core_Model_Resource->_newConnection('pdo_mysql', Object(Mage_Core_Model_Config_Element))
#7 /opt/bitnami/apps/magento/htdocs/app/code/core/Mage/Core/Model/Resource/Db/Abstract.php(320): Mage_Core_Model_Resource->getConnection('core_write')
#8 /opt/bitnami/apps/magento/htdocs/app/code/core/Mage/Core/Model/Resource/Db/Abstract.php(350): Mage_Core_Model_Resource_Db_Abstract->_getConnection('write')
#9 /opt/bitnami/apps/magento/htdocs/app/code/core/Mage/Core/Model/Resource/Db/Abstract.php(335): Mage_Core_Model_Resource_Db_Abstract->_getWriteAdapter()
#10 /opt/bitnami/apps/magento/htdocs/app/code/core/Mage/Core/Model/Resource/Db/Abstract.php(360): Mage_Core_Model_Resource_Db_Abstract->_getReadAdapter()
#11 /opt/bitnami/apps/magento/htdocs/app/code/core/Mage/Core/Model/Resource/Db/Collection/Abstract.php(134): Mage_Core_Model_Resource_Db_Abstract->getReadConnection()
#12 /opt/bitnami/apps/magento/htdocs/app/code/core/Mage/Core/Model/Config.php(1348): Mage_Core_Model_Resource_Db_Collection_Abstract->__construct(Object(Mage_Core_Model_Resource_Website))
#13 /opt/bitnami/apps/magento/htdocs/app/code/core/Mage/Core/Model/Config.php(1380): Mage_Core_Model_Config->getModelInstance('core_resource/w...', Object(Mage_Core_Model_Resource_Website))
#14 /opt/bitnami/apps/magento/htdocs/app/Mage.php(490): Mage_Core_Model_Config->getResourceModelInstance('core/website_co...', Object(Mage_Core_Model_Resource_Website))
#15 /opt/bitnami/apps/magento/htdocs/app/code/core/Mage/Core/Model/Abstract.php(208): Mage::getResourceModel('core/website_co...', Object(Mage_Core_Model_Resource_Website))
#16 /opt/bitnami/apps/magento/htdocs/app/code/core/Mage/Core/Model/Abstract.php(213): Mage_Core_Model_Abstract->getResourceCollection()
#17 /opt/bitnami/apps/magento/htdocs/app/code/core/Mage/Core/Model/App.php(608): Mage_Core_Model_Abstract->getCollection()
#18 /opt/bitnami/apps/magento/htdocs/app/code/core/Mage/Core/Model/App.php(466): Mage_Core_Model_App->_initStores()
#19 /opt/bitnami/apps/magento/htdocs/app/code/core/Mage/Core/Model/App.php(349): Mage_Core_Model_App->_initCurrentStore('', 'store')
#20 /opt/bitnami/apps/magento/htdocs/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#21 /opt/bitnami/apps/magento/htdocs/index.php(86): Mage::run('', 'store')
#22 {main} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:31:56.223

这是一些数据库连接错误。检查本地、xml 文件以获取数据库连接设置。您的数据库是否在同一台服务器上，否则使用套接字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T12:10:29.480

我在 RDS 实例上遇到了同样的问题。通过同一服务器上的单独文件检查连接性。

```
$link = mysqli_connect("host", "username", "password", "database");

if (!$link) {
    echo "Error: Unable to connect to MySQL." . PHP_EOL;
    echo "Debugging errno: " . mysqli_connect_errno() . PHP_EOL;
    echo "Debugging error: " . mysqli_connect_error() . PHP_EOL;
    exit;
}

echo "Success: A proper connection to MySQL was made! The my_db database is great." . PHP_EOL;
echo "Host information: " . mysqli_get_host_info($link) . PHP_EOL;

mysqli_close($link); 
```

# xml - How to get distinct values after adding values of few nodes in XQuery?

> ID：16133093
> 
> 赞同：1
> 
> 时间：2013-04-21T15:55:05.750
> 
> 标签：xml, xquery, scraper

In below xml:

```
<mo>
    <customers>
    <customer cno="2222">
            <cname>Charles</cname>
            <street>123 Main St.</street>
            <city>Wichita</city>
            <zip>67226</zip>
            <phone>316-636-5555</phone>
        </customer>
        <customer cno="1000">
            <cname>Bismita</cname>
            <street>Ashford Dunwoody</street>
            <city>Wichita</city>
            <zip>67226-1555</zip>
            <phone>000-000-0000</phone>
        </customer>     
    </customers>

    <employees>
    <employee eno="1000">
            <ename>Jones</ename>
            <city>Wichita</city>
            <zip>67226-1555</zip>
            <hdate>1995-12-12</hdate>
        </employee>
        <employee eno="2000">
            <ename>Asmit</ename>
            <city>Wichita</city>
            <zip>67226-1555</zip>
            <hdate>1967-08-13</hdate>
        </employee>
        <employee eno="1003">
            <ename>Axaya</ename>
            <city>BBSR</city>
            <zip>67226</zip>
            <hdate>1978-08-13</hdate>
        </employee>     
    </employees>

    <parts>
        <part pno="10506">          
            <pname>Land Before Time I</pname>
            <qoh>200</qoh>
            <price>319.99</price>
            <level>20</level>
        </part>
        <part pno="10000">          
            <pname>Bottle</pname>
            <qoh>2</qoh>
            <price>3.00</price>
            <level>2</level>
        </part>
        <part pno="10508">          
            <pname>Land Before Time 3</pname>
            <qoh>202</qoh>
            <price>2.00</price>
            <level>22</level>
        </part>
        <part pno="10509">          
            <pname>Cycle</pname>
            <qoh>202</qoh>
            <price>1.00</price>
            <level>22</level>
        </part>
    </parts>

    <orders>    
        <order ono="1000" takenBy="1000" customer="2222" >
            <receivedDate>1967-08-17</receivedDate>
            <shippedDate>1967-08-13</shippedDate>
            <items>
                <item>
                    <partNumber>10508</partNumber>
                    <quantity>2</quantity>
                </item>
            </items>
        </order>
        <order ono="1001" takenBy="1000" customer="1000" >
            <receivedDate>1968-08-14</receivedDate>
            <shippedDate>1968-08-11</shippedDate>
            <items>
                <item>
                    <partNumber>10000</partNumber>
                    <quantity>2</quantity>
                </item>

            </items>
        </order>

        <order ono="1022" takenBy="1003"  customer="2222" >
            <receivedDate>1995-02-14</receivedDate>
            <shippedDate>1995-02-13</shippedDate>
            <items>
                <item>
                    <partNumber>10000</partNumber>
                    <quantity>1</quantity>
                </item>
                <item>
                    <partNumber>10508</partNumber>
                    <quantity>2</quantity>
                </item>
                <item>
                    <partNumber>10509</partNumber>
                    <quantity>3</quantity>
                </item>
            </items>
        </order>

    </orders>
</mo> 
```

How to get order number and their total price for each order ? I've tried below xquery:

```
for
$o in /mo/orders/order,
$p in /mo/parts/part
where
$o/items/item/partNumber = data($p/@pno) 
return concat(data($o/@ono),'-', sum($p/price)) 
```

It returns order number with total price seprated by '-' sign but, returns duplicates due to multiple items in an order. current result:

```
1000-2 1001-3 1022-3 1022-2 1022-1 
```

expected result:

```
1000-2 1001-3 1022-6 
```

Any help to get distinct values of order number with total price ???

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:10:58.803

使用我在您的另一个问题中提出的价格计算并为每个订单运行它。这两个问题的问题完全相同，放在`fn:sum()`错误的位置。

```
for $order in /mo/orders/order
return concat
  (
    $order/@ono,
    '-',
    fn:sum(
      for $item in $order/items/item
      return /mo/parts/part[@pno = $item/partNumber]/price * $item/quantity
    )
  ) 
```

# java - What does a static import of star from a static inner class do?

> ID：16133095
> 
> 赞同：2
> 
> 时间：2013-04-21T15:55:23.367
> 
> 标签：java, syntax, import, scope

I was looking at the source of [List](https://github.com/functionaljava/functionaljava/blob/634a8389b986f78a386d743d8c65e5feb32d28e0/core/src/main/java/fj/data/List.java).map in Functional Java and saw it was using some class called `Buffer`, but couldn't find the class anywhere, then I looked at the imports and realized it was an inner class. But the import line looked funny:

```
import static fj.data.List.Buffer.*; 
```

What does it do? Why is it importing from itself?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T17:32:50.663

`import static fj.data.List.Buffer.*`将 的所有静态成员`Buffer`导入范围。否则，对文件中静态成员的所有引用`Buffer`（除了从内部进行的引用`Buffer`）都需要以 . 为前缀`Buffer.`。

而不是这个：

`final Buffer<B> bs = Buffer.empty();`

可以在文件的任何地方写这个：

`final Buffer<B> bs = empty();`

可以避免使用通配符。他们本可以`import static fj.data.List.Buffer.empty`为他们使用的每个其他静态成员编写另一个导入 from `Buffer`，但可以说通配符在这里很好，因为它是从同一个文件中导入的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:57:24.650

它正在导入`static`里面的所有元素`fj.data.List.Buffer`。通过这样做，您只需要调用`Something`而不是`fj.data.list.Buffer.Something`.

更多信息：

*   [Oracle Java 文档：静态导入](http://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T15:56:57.987

这意味着将导入所有静态字段和方法。并且在导入类时无需类名前缀即可访问它们。

# xml - XML/ASP：如何获取空元素的属性值

> ID：16133103
> 
> 赞同：1
> 
> 时间：2013-04-21T15:56:57.360
> 
> 标签：xml, asp-classic

我根本不习惯使用 XML，所以这似乎是一个愚蠢的问题。我有一个 xml 文档，它将始终像这样形成：

```
<lists>
  <list subscriber_count="5048" display_name="" name="GiNsubs" id="705381"/>
</lists> 
```

我需要在那个空元素“列表”中获取“名称”属性的值。由于它是空的，因此我没有尝试将“列表”元素作为对象获取，因此我可以在其上使用 GetAttribute。我尝试过 GetElementbyTagName、SelectSingleNode 甚至 FirstChild，但似乎没有任何东西可以将“列表”元素作为节点。作为参考，我的代码目前如下：

```
valid = "No"
Set xmldoc = Server.CreateObject("Microsoft.XMLDOM")
Set objLst = Server.CreateObject("Microsoft.XMLDOM")
    xmldoc.async = false
    xmldoc.Load ("{XML document location}")

Set objLst = xmldoc.selectsinglenode("list")
if objLst.GetAttribute("name") = "GiNsubs" then
  valid = "Yes"
end if 
```

当前产生的错误是“GetAttribute”行上的“Object required”。

任何帮助表示赞赏。

哦，顺便说一句，这个 XML 文档是从 API 中产生的，所以改变 XML 的格式并不是一个真正的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:37:20.657

当我尝试以下工作时

```
<%
valid = "no"

Set xmldoc = Server.CreateObject("Microsoft.XMLDOM")
xmldoc.setProperty "ServerHTTPRequest", True
xmldoc.async = False
xmldoc.validateOnParse = False
'stop 'uncomment to trigger a debugger break here (if you're setup for server-side debugging)
xmldoc.Load "http://domain/subfolder/deleteme.xml" 'add your URL here

xmlDoc.setProperty "SelectionLanguage", "XPath"
Set objLst = xmldoc.selectsinglenode("lists/list")
If objLst.GetAttribute("name") = "GiNsubs" Then
  valid = "Yes"
End If
%>
<html>
<head>
<title>XML XPath Test</title>
</head>
<body>
    <%=Valid %>     
</body>
</html> 
```

# c++ - 函数返回一个函数

> ID：16133109
> 
> 赞同：2
> 
> 时间：2013-04-21T15:57:25.933
> 
> 标签：c++, templates, generics

我如何返回另一个函数？我得到的编译器错误（在 Visual Studio 上）是“函数返回函数”

```
template <>
class encoder<uint16_t, endian_swap> {
public:
    uint16_t opeartor () (uint16_t& value){
        // do something
    }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T15:58:28.823

因为

```
uint16_t opeartor () 
```

看起来像一个被调用的函数的声明，`opeartor`它不带参数并返回`uint16_t`。尝试

```
uint16_t operator () 
```

# tomcat - Tomcat 7: still Cannot Log in Manager Application AFTER MODIFIED USERNAME & PW

> ID：16133111
> 
> 赞同：1
> 
> 时间：2013-04-21T15:57:31.353
> 
> 标签：tomcat, tomcat7

I have the exact same question with this guy: [Tomcat 7 Manager - how to authenticate?](https://stackoverflow.com/questions/15042235/tomcat-7-manager-how-to-authenticate)

I'm using Windows and I downloaded the Tomcat 7.0.39 Installer for Windows. When the installer was running, I didn't set any username and password for it (which means I left these textfield blank). However, when I tried to look up the Server Status on the Tomcat server hompage, it reminded me to enter the username and password. Whatever I enter, included not entering anything, it wouldn't let me pass.

Then, I googled and modified the usernames and passwords as what I was told:

```
<?xml version='1.0' encoding='cp936'?>
  <role rolename="manager-gui"/>
  <role rolename="manager-script"/>
  <role rolename="manager-jmx"/>
  <role rolename="manager-status"/>
  <role rolename="admin-gui"/>
  <role rolename="admin-script"/>
  <user username="admin" password="admin" roles="manager-gui, manager-script, manager-jmx, manager-status, admin-gui, admin-script"/>
</tomcat-users> 
```

Then, I restarted Tomcat. But I still cannot pass. I have searched very carefully but really cannot find an answer through Internet.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T06:22:07.523

我已经很久没有问这个问题了。可悲的是，我没有得到任何答案。但是，我最近碰巧找到了解决方案。

事实证明，这是 Tomcat 7.X 的安装程序的错。Tomcat 7.X 的windows 安装程序，我在网上某处看到的，本身就有一些问题/错误，换句话说，它不如解压后可以直接使用的zip 文件那么完美。我尝试了zip文件，这次修改了**%TOMCAT FOLDER%/conf/tomcat-users.xml**文件。然后我得到了正确的结果。

所以，对于还在使用 Windows 的小伙伴，我建议**不要使用 Tomcat 7.X 安装程序，而是直接使用压缩包文件**。

# javascript - 如何检测 DOM 元素的 class 属性何时发生变化？

> ID：16133112
> 
> 赞同：2
> 
> 时间：2013-04-21T15:57:47.673
> 
> 标签：javascript, html, selection

这需要一点解释。我正在使用带有 JWplayer 的 jquery 播放列表，基本上它的作用是读取播放列表 .xml 文件，并生成一个像这样的滚动菜单：

```
<div class="jw_playlist_playlist">
   <div class="jw_playlist_item even">
      <div class="jw_playlist_title">Title</div>
      <div class="jw_playlist_description"></div>
   </div>
   <div class="jw_playlist_item odd">
      <div class="jw_playlist_title">Title2</div>
      <div class="jw_playlist_description"></div>
   </div>
</div> 
```

当一个项目被选中时，它会变为`<div class="jw_playlist_item even playing">`或`<div class="jw_playlist_item odd">`。有没有办法可以用 javascript 检测到这种变化，并提取标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:03:18.393

I guess you could create a timer in JavaScript and check every X seconds if the element exists.

```
<script> 

var title = ""; 

$(function() { // wait till page is loaded

    // sets a timer to repeat the function every 1 second
    setInterval(function() { 
        // if .play class div exists, take the title of the song
        if ($(".play").length > 0) { 
            title = $(".play jw_playlist_title").html();
            updateData();
        } else { 
        // otherwise set the title to be empty
            title = ""; 
        } 
     }, 1000); 

});

function updateData() {
    $("#demo").html("Current Song: "+title);
}

 </script> 

 <p id="demo">My First Paragraph</p> 
```

# google-maps-sdk-ios - GMSCameraUpdate fitBounds 实施中的错误？

> ID：16133116
> 
> 赞同：1
> 
> 时间：2013-04-21T15:58:12.090
> 
> 标签：google-maps-sdk-ios

我正在尝试使用由 fitBounds 消息启动的 GMSCameraUpdate 对象更新我的地图。GMSCorrdinate 是使用 initWithCoordinate:northEast coordinate:southWest 构造的。我希望在更新后在我的地图上看到东北角和西南角，填充为 64 pt。

这并非总是如此。当我的东北角和西南角在地图上几乎相互对齐时，即南北距离大于东西距离时，相机放大关闭，我的角落在可见区域之外的地图。

例如，我正在尝试使用以下内容更新地图：

*   北：51.509979；
*   南：51.505211
*   东：-0.129508；
*   西：-0.133700

当我在更新后检查投影的 visibleRegion 时，这是我看到的（纬度/经度）：

*   近左 51.505251 / -0.134224
*   近右 51.505251 / -0.128984
*   最左边 51.509939 / -0.134224
*   最右边 51.509939 / -0.128984

可见区域的“北部”51.509939 位于我所要求的区域 51.509979 的南部。南方也一样。

当我的角落更东西向对齐时，一切正常。

对我来说看起来像是一个实现错误。你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T21:21:35.783

是的。这似乎是一个错误。同样的事情发生在我身上。您是否已经在[这里](http://code.google.com/p/gmaps-api-issues/issues/entry?template=Maps%20SDK%20for%20iOS%20-%20Bug "地图 API 问题")打开了错误报告？

PS您是否嵌入了`GMSMapView`a`UINavigationController`和/或 a `UITabBarController`？也许“错误”与`GMSMapView`不占据屏幕的整个高度有关（这是我的情况）。

# css - CSS背景没有出现在外部样式表中？

> ID：16133122
> 
> 赞同：0
> 
> 时间：2013-04-21T15:58:26.743
> 
> 标签：css

当样式刚刚在页面上列出时，一切正常。现在我把它做成了一个外部样式表，除了背景之外，一切仍然有效。图像位于资源中。网址应该改吗？我尝试添加资源/或将其放在文件夹中，但似乎没有任何效果......

```
body{
    background-image:url(background.jpg);
    background-attachment:fixed;
    color: white;
    font-family: Georgia, "Times New Roman", Times, serif;
    /*font-size: 1.52em;*/
} 
```

这是一个学校项目，我真的很感激这方面的帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:01:46.450

您应该更改 URL。如果您的图像在站点根目录 > img > imagefile 中并且 html 在根目录中并且您的 css 在根目录 > css > cssfile 中，那么您应该使用

```
background-image: url(../img/imagefile) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:11:57.800

如果您的样式表是使用 加载的`<h:outputStylesheet>`，则不能以这种方式引用捆绑的图像。请改用内置`resource`地图：

```
background-image: url("#{resource['myImages:background.jpg']}"); 
```

（假设您的图像在`resources/myImages`目录中）。

# sublimetext2 - Removing a cursor in Sublime Text after Ctrl+click

> ID：16133125
> 
> 赞同：17
> 
> 时间：2013-04-21T15:58:36.380
> 
> 标签：sublimetext2

In Sublime Text, you can add a cursor to multiple arbitrary locations using Ctrl+click. However, using the mouse is often imprecise, so I sometimes encounter the need to undo a click (having already selected multiple locations in the text), but haven't found a way to do it so I have to start all over.

Is there a way to 'remove' a cursor after specifying it using the mouse?

Note: I'm aware of multiple cursor usage with the keyboard, this question is specifically about mouse usage.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-05-11T17:35:31.770

并不是要在这个主题上发表墓地帖子，但我发现这正是我想要的：

`Ctrl`+ `U`（ Mac 上的`Cmd`+ `U`）似乎删除了最后放置的插入符号。

在这里找到：[https ://www.sublimetext.com/forum/viewtopic.php?f=4&t=5091](https://www.sublimetext.com/forum/viewtopic.php?f=4&t=5091)

挖掘 Sublime 的 Default Key Bindings 文件，命令名称是`soft_undo`

因此，通过修改用户定义的键绑定，您可以设置要触发的任何键/鼠标组合`soft_undo`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-21T17:30:23.113

您可以`alt`在 Windows 和 linux 上使用修饰符，`shift+cmd`在 OS X 上使用修饰符，同时选择使用“减法”模式。您还可以使用一个简单的插件来删除视图中的第一个或最后一个光标（不是第一个或最后一个添加的，第一个或最后一个）并将其绑定到一个键盘命令。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-04-06T10:48:56.050

`Alt`+`Middle Click`适用于 Sublime3 中的 Windows

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-25T13:10:03.300

如果它有帮助：如果您正在使用插件`CodeIntel`（版本 2.2.0），通过从 Sublime 中删除它，`alt+click`再次删除游标。

# javascript - 如何使用 node-webkit-agent？

> ID：16133126
> 
> 赞同：0
> 
> 时间：2013-04-21T15:58:47.867
> 
> 标签：javascript, node.js, google-chrome, node-webkit-agent

如何使用[node-webkit-agent](https://github.com/c4milo/node-webkit-agent)？

我坚持第二步： `Using your browser, go to devtools frontend URL corresponding to your nodejs version`

如何访问开发工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-07T22:23:34.520

[https://www.npmjs.org/package/webkit-devtools-agent-frontend](https://www.npmjs.org/package/webkit-devtools-agent-frontend)

你可以通过 npm-install 来为它托管你自己的前端。

`npm install -g webkit-devtools-agent-frontend`

当您运行您的应用程序时，发送 SIGUSR2 并重新启动（我当前遇到错误），打开第二个终端并运行命令`webkit-devtools-agent-frontend`，它将显示它正在运行的端口号，以便您在浏览器中查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:15:34.437

查看自述文件，您可能会想要下面的 0.8 网址...

## 连接代理

Nodejs v0.6.x

[http://c4milo.github.com/node-webkit-agent/19.0.1084.46/inspector.html?host=localhost:1337&page=0](http://c4milo.github.com/node-webkit-agent/19.0.1084.46/inspector.html?host=localhost:1337&page=0)

Nodejs v0.8.x

[http://c4milo.github.com/node-webkit-agent/21.0.1180.57/inspector.html?host=localhost:1337&page=0](http://c4milo.github.com/node-webkit-agent/21.0.1180.57/inspector.html?host=localhost:1337&page=0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:35:54.503

自述文件有 URL，它们是 devtools 前端的副本。您还可以签出 gh-pages 分支并在本地打开其中的任何一个

# c# - how to access object's properties stored in list of objects c#

> ID：16133127
> 
> 赞同：0
> 
> 时间：2013-04-21T15:58:56.300
> 
> 标签：c#

im trying to work out if you can access an object that was added to a list (of objects) something like this:

```
public class nearshop_data
{
    public String r_name { get; set; }
    public String r_desc  { get; set; }
    public  String loc_lat  { get; set; }
    public  String loc_lon  { get; set; }
} 
```

then adding to that list as you would

```
shop_data = new nearshop_data();
lo = new List<object>();

for (int i = 0; i < count; i++) {

    shop_data.r_name = stuff.results[i].name;
    shop_data.r_desc = stuff.results[i].vicinity;
    shop_data.loc_lat = stuff.results[i].geometry.location.lat;
    shop_data.loc_lon = stuff.results[i].geometry.location.lng;

    lo.Add(shop_data);       

} 
```

then i want to retrieve that in another class say in the code behind and here is where it all fails... as i cant actually access the properties of that object

any ideas on how to rewrite the code or what to use?

I'm guessing when I get the instance of that list in my code behind and lets say retrieve it at index 0 its still boxed in (or am i wrong?) - i vaguely remember something like this was done in java

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T16:02:56.343

I think the problem is that you're using `List<object>` instead of `List<nearshop_data>` which is effectively boxing the type.

If you need to keep it like this you'd need to cast the object to the appropriate type:

`nearshop_data firstElement = (nearshop_data)lo[0];`

or even better use a `List<nearshop_data>` in the first place.

In addition because `nearshop_data` is a [reference type](http://msdn.microsoft.com/en-gb/library/490f96s2.aspx), and you only instantiate it once, you are only adding the pointer to the same instance of `shop_data` each time. Meaning you'll only end up with one element with the values equal to that of the last loop iteration.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T16:05:48.643

You need to cast the item from the list back to it's specific class:

```
 nearshop_data myitem = lo[0]; 
```

Of course you might want to check the type of the open before you try and cast (otherwise it will throw an exception). You can either do this:

```
if (lo[0] is nearshop_data) 
{
    // do your cast here
} 
```

or:

```
nearshop_data myitem = lo[0] as nearshop_data;

if (myitem != null)
{
    // myitem is a nearshop_data instance
} 
```

Of course, better would be to use a more specific class in your generic list. `List<object>` is really no more useful than the old `ArrayList`. If you only need `nearshop_data` items then just use `List<nearshop_data>`. If you need a hetreogenous list then just use the most specific base class (or interface) that will cover all the items you need to store.

# objective-c - 在一个xib文件中的两个窗口之间传递数据？

> ID：16133128
> 
> 赞同：0
> 
> 时间：2013-04-21T15:59:03.820
> 
> 标签：objective-c, macos, cocoa

刚接触 Objective C 和 cocoa 开发，忙着玩一些代码编写应用程序来练习一下，我有一点问题。

有一个带有窗口和 HUB 面板的 xib。HUB面板是隐藏的，窗口上有一个按钮，显示的是HUB

```
[self.myHUBWindow orderFront.sender]; 
```

完美运行，然后在集线器上我有一个文本字段和一个关闭集线器的按钮，关闭按钮，也可以 100% 工作：

```
[self.myHUBWindow close]; 
```

我想要做的是，当我单击主窗口上的按钮时，它应该在 HUB 窗口的文本字段中插入一些文本。我有这个 ：

```
 [self.hubOutputTextField insertText:@"hello world"]; 
```

似乎什么也没发生：-/谁能指出我正确的方向？

我的主窗口按钮 IBAction ：

```
- (IBAction)buildScannerButton:(id)sender {
    [self.myHUBWindow orderFront:sender];
    [self.hubOutputTextField insertText:@"hellow world"];
} 
```

和我的 @property 用于文本字段

```
@property (weak) IBOutlet NSTextField *hubOutputTextField; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:01:06.187

尝试

```
[self.hubOutputTextField setStringValue:@"hello world"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:52:37.070

设法让它工作

```
[self.hubOutputTextField setStringValue:@"First line\n"];
self.hubOutputTextField.stringValue = [self.buildOutputTextField.stringValue stringByAppendingString:@"secoand line"]; 
```

这很好，只是希望有一种更清洁的方法来做到这一点。我可以想象，如果你有大量的字符串要添加，这会很快变得丑陋，假设只需制作一个方法来做到这一点。有人知道更好的方法吗？

# llvm - Empty BasicBlock in LLVM

> ID：16133129
> 
> 赞同：1
> 
> 时间：2013-04-21T15:59:11.170
> 
> 标签：llvm

I have *.ll file, created by clang++ & llvm-dis. I have one simple question about **label:9** - it is empty, so is it useless? Can it be deleted without any negative effects, if I replace **br label %9** to **br label %10**? (Clang 3.1, Windows 7)

```
define void @_Z2f2v() nounwind {
  %a = alloca i32, align 4
  %b = alloca i32, align 4
  store i32 2, i32* %a, align 4
  %1 = load i32* %a, align 4
  %2 = icmp sgt i32 %1, 0
  br i1 %2, label %3, label %4

; <label>:3                                       ; preds = %0
  store i32 555, i32* %b, align 4
  br label %10

; <label>:4                                       ; preds = %0
  %5 = load i32* %a, align 4
  %6 = icmp eq i32 %5, 111
  br i1 %6, label %7, label %8

; <label>:7                                       ; preds = %4
  store i32 999, i32* %b, align 4
  store i32 888, i32* %a, align 4
  br label %9

; <label>:8                                       ; preds = %4
  store i32 777, i32* %b, align 4
  br label %9

; <label>:9                                       ; preds = %8, %7
  br label %10

; <label>:10                                      ; preds = %9, %3
  ret void
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T16:35:06.407

是的，摆脱 是安全的`%9`，但您需要谨慎操作：

*   所有分支都`%9`需要替换为分支`%10`
*   所有引用的 phi 指令都`%9`需要修复以引用其所有前辈。这实际上是一个空基本块的正当理由 - 将多个选项合并在一起以获得后续的 phi。
*   请记住，这些都是无名的基本块；如果您对文本 IR 本身（.ll 文件）进行修改，则删除`%9`实际上会`%10`生成新的`%9`. 但是，如果您从 LLVM 本身进行修改（正如您应该做的那样），那没关系。

# jquery-mobile - Jquery Mobile 按钮只触发一次

> ID：16133131
> 
> 赞同：1
> 
> 时间：2013-04-21T15:59:19.693
> 
> 标签：jquery-mobile

我有一个链接到当前页面的按钮并传递一个参数以指示服务器需要刷新页面上的项目列表。它第一次工作，但随后点击不遵循href。现在我只是在使用：

```
<a href="settings.html?refresh=1" data-role="button" data-icon="refresh" data-inline="true">Refresh the list</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:57:05.510

我认为这是因为 jQuery mobile 在已加载页面时不会重新加载页面。您可以将 reloadPage 选项传递给[changePage()](http://api.jquerymobile.com/jQuery.mobile.changePage/)以强制重新加载。

尝试这样的[事情](http://markhildreth.me/article/forcing-page-reload-jquery-mobile)：

```
<a class="force-reload" href="settings.html?refresh=1" data-role="button" data-icon="refresh" data-inline="true">Refresh the list</a> 
```

 **```
$('a.force-reload').on('click', function(e) {
    var url = $(this).attr('href');
    $.mobile.changePage( url, { reloadPage: true} );
}); 
```**

# javascript - jQuery Mobile 使用 CSS 设置图像背景

> ID：16133142
> 
> 赞同：0
> 
> 时间：2013-04-21T16:00:29.473
> 
> 标签：javascript, jquery, css, background, background-image

我正在尝试将图像（bg.jpg）设置为背景图像，但我做得不好。这是css代码：

```
.ui-page{
  background: #000000 url('img/background.jpg') repeat;
} 
```

如果我更改图像或颜色背景，页面看起来仍然相同......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:14:17.297

尝试这个：

```
.ui-page
{
    background-color: #000;
    background-image: url(img/background.jpg);/* Check bg.jpg || backgroung.jpg */
    background-size: cover; 
} 
```

可能是[jquery 移动背景图像的重复](https://stackoverflow.com/questions/6467806/jquery-mobile-background-image)

# jfreechart - jfreechart 从 mouseevent 坐标中获取数据集的索引

> ID：16133144
> 
> 赞同：0
> 
> 时间：2013-04-21T16:00:32.503
> 
> 标签：jfreechart

我正在努力在 JFreechart 上进行一些交互。

我们试图实现的事情是获取鼠标单击的值（范围和域）的索引。换句话说，我们想使用鼠标事件来获取域和范围值的数据集的索引。

这里的另一件事是我们从 xyPlot.getDomainCrosshairValue() 获得的一些数据是一些数字，例如，1.05358272E12，我怎么能从这个信息中得到准确的时间？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:33:50.433

添加一个`ChartMouseListener`，如图所示[，](https://stackoverflow.com/a/14894894/230513)并检查`ChartEntity`在`ChartMouseEvent`. 您可以查询您`XYDataset`的特定`XYItemEntity`.

# android - 创建具有径向渐变透明度的环

> ID：16133149
> 
> 赞同：2
> 
> 时间：2013-04-21T16:00:45.477
> 
> 标签：android

我正在通过渲染路径来绘制地球仪。地球的边缘非常锋利，我想柔化边缘以使其更具视觉吸引力。

为了性能，我不做隐藏线移除。我只是在计算路径上的每个点是否可见（用户正在查看的地球的一侧）并将路径绘制到最近的角落。为了隐藏这一点，我在整个视图上绘制了一个位图，然后打一个洞来查看地球。

为了柔化边缘，我正在尝试创建一个具有径向渐变透明度的环。此方法创建掩码：

```
 private void createMask(int width, int height, double radius) {

        if(radius==0){return;}

        if (mask != null) {
            mask.recycle();
        }

        mask = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_4444);

        // create a RadialGradient
        RadialGradient gradient = new android.graphics.RadialGradient(
                kHorizontalOffset, kVerticalOffset,
                30f, 0x00FF0000, 0xFFFF0000,
                android.graphics.Shader.TileMode.CLAMP);

        // TODO move to init()
        Paint p = new Paint();
        p.setShader(gradient);
        //p.setColor(0xFF000000);
        p.setColor(0xFFFF0000);
        p.setStrokeWidth(20f);
        p.setStrokeCap(Paint.Cap.ROUND);
        p.setStyle(Paint.Style.STROKE);
        p.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_OVER));

        Canvas maskCanvas = new Canvas(mask);
        maskCanvas.drawColor(Color.BLACK);

        final RectF rect = new RectF();
        rect.set((float)(kHorizontalOffset - radius + 50), (float)(kVerticalOffset - radius + 50),
                (float)(kHorizontalOffset + radius - 50), (float)(kVerticalOffset + radius - 50));

        // draw transparent circle using the maskPaint
        maskCanvas.drawCircle(kHorizontalOffset, this.getHeight() - kVerticalOffset, (float) radius, maskPaint);

        // draw the radial gradient ring
        maskCanvas.drawArc(rect, -90, 360, false, p);

    } 
```

我的问题是，无论我使用什么 PortDuff.Mode，我总是得到一个实心圆环（或没有圆环），如本例所示，圆环偏离边缘并涂成红色，这样我就可以看到发生了什么。

![在此处输入图像描述](https://i.stack.imgur.com/gTHGL.png)

关于如何使这项工作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:10:19.830

我认为问题在于您如何设置颜色。

颜色分量是 (alpha,R,G,B)，每一个都是从 0 到 255，所以当你写 0xFFFF0000 时。alpha 值设置透明度。因此，当您将 alpha 设置为 FF 时，这意味着它是完全不透明的，而 00 是完全透明的。所以尝试更改 alpha 值.. 可能类似于 0x70FF0000

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:34:40.837

我找到了一个更好的解决方案，最终得到了一个更小、更快的方法，它完全符合我的要求。有什么不喜欢的？

```
private void createMask(int width, int height, double radius) {

    if(radius==0){return;}

    if (mask != null) {
        mask.recycle();
    }

    mask = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_4444);

    Canvas maskCanvas = new Canvas(mask);
    maskCanvas.drawColor(Color.BLACK);

    maskPaint.setMaskFilter(new BlurMaskFilter(30, BlurMaskFilter.Blur.INNER));
    maskCanvas.drawCircle(kHorizontalOffset, this.getHeight() - kVerticalOffset, (float) radius, maskPaint);

} 
```

关键是应用到绘画的 BlurMaskFilter 以模糊它用于绘画的任何区域的内部，在本例中为圆形。它具有我正在寻找的微妙效果：

![在此处输入图像描述](https://i.stack.imgur.com/So5r2.png)

# c++ - 从 time_t 和 tm 转换的错误值

> ID：16133151
> 
> 赞同：0
> 
> 时间：2013-04-21T16:00:52.507
> 
> 标签：c++, c, visual-c++

我必须做两个转换函数，从 time_t 到 tm 和从 tm 到 time_t。

这是第一个：

```
string2time(string str){

time_t rawtime;
time(&rawtime);
tm* timeInfo = localtime(&rawtime);

stringstream ss(str);
string date;
string time;
getline(ss,date,' ');
getline(ss,time,' ');

string word;
//now we work with date..
stringstream sdate(date);

getline(sdate,word,'-');
timeInfo->tm_year = atoi(word.c_str()) -1900;

getline(sdate,word,'-');
timeInfo->tm_mon = atoi(word.c_str())-1;

getline(sdate,word,'-');
timeInfo->tm_mday = atoi(word.c_str());

//and time...
stringstream stime(time);

getline(stime,word,':');
timeInfo->tm_hour = atoi(word.c_str());

getline(stime,word,':');
timeInfo->tm_min = atoi(word.c_str());

getline(stime,word,':');
timeInfo->tm_sec = atoi(word.c_str());

return mktime(timeInfo);
       } 
```

这是第二个：

```
time2str(time_t t){
tm* myT;

myT = localtime(&t);
    //here i have to explore myT structure in order to build a proper string

   } 
```

无论如何我得到了错误的值..从 tm 结构中的 2013-03-10 00:00:00 开始我得到 2013-04-21 18:16:29 ...为什么？

**编辑：取得了一些进展！此代码一直有效，但当小时为 00 时！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:19:38.663

解决了，只是字符串转换中的一个错误……对不起，麻烦了。

# winapi - bcc32 - 没有控制台子系统，也没有 Windows 子系统

> ID：16133152
> 
> 赞同：3
> 
> 时间：2013-04-21T16:00:52.910
> 
> 标签：winapi, linker, c++builder

我正在使用旧的 bcc32（borland 5.5）（我知道这是非常旧的编译器，但不要告诉我我不应该使用它）

我可以使用控制台或 Windows 子系统进行编译。

我不想用 windows 子系统编译，我希望控制台只包含 main() 广告没有“windows.h”包含（从那里我调用我自己的库，它打开窗口并在内部自行处理消息泵）

它可以工作，但问题是当我用控制台子系统编译时，会出现丑陋的蓝色控制台窗口，我不需要那个

所以我认为我只需要不编译 windows 子系统，不编译控制台子系统，只需让我的程序以某种原始模式编译（都没有控制台创建和没有 WinMain 入口点 - 怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T16:05:41.877

Generally, when you don't want a console, you should choose the "GUI" or "Windows" subsystem (depending on what your development environment elects to call it). That controls which bits the linker sets in your EXE header. You can't control the subsystem after your program has started running because the OS readers your EXE file and determines the subsystem to use before executing *any* code in your program.

Using the Windows subsystem does not require that you have any windows; it just tells the OS when it's loading your program that you don't need a console. It has nothing to do with whether you use any Windows APIs. Both subsystems are full-fledged Windows applications and offer full use of Windows API functions.

You can do all the same things from `WinMain` as you can from `main`. There are functions for [fetching the command line](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683156.aspx "GetCommandLine") and [splitting it into separate arguments](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776391.aspx "CommandLineToArgv").

However, if you don't want your main function to be called `WinMain` then you cannot use the Windows subsystem. The choice of subsystem also controls which set of preparatory code the linker puts in your program. The preparatory code is where the real entry point of your program lives, and it's what initializes the C++ standard library and calls the constructors of any objects with namespace scope. The code included in console mode calls `main` (or `wmain`); the code linked for the Windows subsystem calls `WinMain` (or `wWinMain`). If you use the Windows subsystem and don't define a function named `WinMain`, then you will get errors when you link; the linker will complain about an undefined function. (You do not have to include *windows.h* to define `WinMain`, if inclusion of that header is what you're afraid of.)

Since the subsystem to use is just a set of bits in the EXE header, you change change it after linking has occurred with [the `editbin` program](http://msdn.microsoft.com/en-us/library/xd3shwhf.aspx). When you link, select the console subsystem so you get the console preparatory code and `main`, and then modify the binary to use the Windows subsystem instead:

```
link foo.obj /out foo.exe /subsystem:CONSOLE
editbin /subsystem:WINDOWS foo.exe

```

Then your program will run without a console. Beware that if there are any problems while starting up, the preparatory code might crash your program because it was written expecting to have a console available to write to, but it won't be there.

# hadoop - Sqoop Hive 以状态 1 退出

> ID：16133156
> 
> 赞同：7
> 
> 时间：2013-04-21T16:01:10.527
> 
> 标签：hadoop, hive, sqoop

当我执行时：

```
sqoop import --connect jdbc:mysql://localhost/testdb --table test --hive-table test --hive-import -m 1 
```

我收到以下错误消息：

```
13/04/21 16:42:50 ERROR tool.ImportTool: Encountered IOException running import job: java.io.IOException: Hive exited with status 1
    at org.apache.sqoop.hive.HiveImport.executeExternalHiveScript(HiveImport.java:364)
    at org.apache.sqoop.hive.HiveImport.executeScript(HiveImport.java:314)
    at org.apache.sqoop.hive.HiveImport.importTable(HiveImport.java:226)
    at org.apache.sqoop.tool.ImportTool.importTable(ImportTool.java:415)
    at org.apache.sqoop.tool.ImportTool.run(ImportTool.java:476)
    at org.apache.sqoop.Sqoop.run(Sqoop.java:145)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.sqoop.Sqoop.runSqoop(Sqoop.java:181)
    at org.apache.sqoop.Sqoop.runTool(Sqoop.java:220)
    at org.apache.sqoop.Sqoop.runTool(Sqoop.java:229)
    at org.apache.sqoop.Sqoop.main(Sqoop.java:238) 
```

我试图用谷歌搜索，但没有找到解决方案。我以伪分布式方式在本地设置了 Hadoop。Hive 运行良好......我使用了嵌入式元存储。任何想法如何解决这一问题？谢谢，老爹

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T03:59:19.737

根据日志，您似乎遇到了以下异常：

13/04/22 18:34:44 信息 hive.HiveImport：线程“主”java.lang.NoSuchMethodError 中的异常：org.apache.thrift.EncodingUtils.setBit(BIZ)B

当用户在“不兼容”版本中使用 HBase 和 Hive 之前，我已经看到过这个问题。不兼容通常可以在多个级别上，但这个特定的一个是当 HBase 和 Hive 使用不同的 thrift 版本时。由于 Sqoop 将 HBase 和 Hive jar 添加到类路径中，因此只有一个节俭版本可以处于活动状态，因此“第二个”工具（通常是 hive）无法正常工作。

您是否有机会在执行 Sqoop 的机器上同时安装了 HBase 和 Hive？如果是这样，您可以检查每个项目正在使用的节俭版本吗？只需搜索“*thrift*.jar”。如果对这两个问题的回答都是肯定的，那么您可能会将 HBASE_HOME 设置为不存在的内容，以强制 Sqoop 不加载 HBase 的 thrift 版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-08T15:38:47.427

我同意 Jarek Jarcec Cecho 的回答。

另一种解决方法是将`libthrift*.jar`文件从复制`$HIVE_HOME/lib`到`$SQOOP_HOME/lib`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:28:35.397

mysql 表可能存在权限问题，或者您在 hive 库中缺少 mysql 连接器 jar。请分享命令的全部输出

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-09T03:15:42.693

我遇到了同样的错误，这肯定与 hbase 和 hive 中的 libthrift-0.8.0.jar 和 libthrift-0.9.0.jar 分别有关。所以我只是将我的 HBASE_HOME 指向未知位置并执行我的 bash 。然后就可以了。

但是我在使用 Hive 时遇到的一个问题是我尝试导入的表现在失败了，说表已经退出，但实际上没有。我猜 Metastore db 文件应该已经写好了！所以我需要更改表的名称并重做命令，以防我们不想删除 metastoredb 的整个文件夹。

# php - 如何让 bash 找到 upload.php 并传递参数？

> ID：16133157
> 
> 赞同：0
> 
> 时间：2013-04-21T16:01:29.230
> 
> 标签：php, bash

我有这个命令

```
php upload.php?qdatei=temp%2Fsession_ids%2F75hbhgedlj6i03vdifpd5save1-1.txt&edatei=temp%2Ffortschritt%2F75hbhgedlj6i03vdifpd5save1-ergebnis.txt&fdatei=temp%2Ffortschritt%2F75hbhgedlj6i03vdifpd5save1-1.txt&id=11 
```

在linux中找不到upload.php的地方。

所以我把它改成了

```
php upload.php -- 'qdatei=temp%2Fsession_ids%2F75hbhgedlj6i03vdifpd5save1-1.txt&edatei=temp%2Ffortschritt%2F75hbhgedlj6i03vdifpd5save1-ergebnis.txt&fdatei=temp%2Ffortschritt%2F75hbhgedlj6i03vdifpd5save1-1.txt&id=11' 
```

这使得 php 找到 upload.php 但不传递任何参数。

如何让 linux 找到 upload.php 并传递参数？

# java - 使用 java 读取 json 文件时出现 java.lang.ClassCastException

> ID：16133162
> 
> 赞同：1
> 
> 时间：2013-04-21T16:02:03.057
> 
> 标签：java, json, web-services

我想使用java读取一个名为（results.json）的.json文件，并通过键'title'提取数组的值。

这是我的 .json 文件

```
 [
    {
        "title": {
            "0": "UNIQUE SIGNED HARRY POTTER DELUXE VOLUME SALESMAN DUMMY"
        }
    },
    {
        "title": {
            "0": "Harry Potter and the Philosopher's Stone by JK Rowling - Uncorrected Proof/ARC!!"
        }
    },
    {
        "title": {
            "0": "Huge Lego Lot 532 Lbs Pounds Legos Star Wars Castle Harry Potter City Minifigs"
        }
    }
] 
```

这是我正在使用的java代码

```
public class JJ {

public static void main(String[] args)
{        
    readJsonFile();
}

public static void readJsonFile() {

    BufferedReader br = null;
    JSONParser parser = new JSONParser();

    try {

        String sCurrentLine;

        br = new BufferedReader(new    FileReader("C:/wamp/www/epsilon/results.json"));

        while ((sCurrentLine = br.readLine()) != null) {
            System.out.println("Names of the Books:\t" + sCurrentLine);

            Object obj;
            try {

                obj = parser.parse(sCurrentLine);
                JSONObject jsonObject = (JSONObject) obj;
                String name = (String) jsonObject.get("title");

            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if (br != null)br.close();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
}
} 
```

我收到一条错误消息

> 线程“main”java.lang.ClassCastException 中的异常：org.json.simple.JSONArray 无法转换为 org.json.simple.JSONObject。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T16:11:59.587

这很简单。您的 Json 文件在顶层有一个数组。当 JSonParser 解析它时，它会将它作为 JSONArray 返回。您正在尝试将其转换为 JSONObject（类似于地图或字典。）您需要做的是：

```
Object obj;
try {

    obj = parser.parse(sCurrentLine);
    JSONArray jsonArray = (JSONArray) obj;
    for(obj : jsonArray){//not sure of the exact syntax, I don't have an IDE in front of me.
        JSONObject jsonObject = (JSONObject)obj;
        JSONObject realTitle = (JSONObject)jsonObject.get("0");
        String name = (String) realTitle.get("title");
    }

} catch (ParseException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-23T00:28:43.720

```
 Object obj = parser.parse(new FileReader("/Users/path/to/file/file.txt"));
        JSONArray jsonArray = (JSONArray) obj;
        for (int i = 0; i < jsonArray.size(); i++) {

            JSONObject jsonObjectRow = (JSONObject) jsonArray.get(i);
            String name = (String) jsonObjectRow.get("Name");
            String address = (String) jsonObjectRow.get("Address");
            Long telephone = (Long) jsonObjectRow.get("Phone_Number");

        } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-10-02T15:20:11.560

我有同样的问题，要解决它只需替换这个：

```
obj = parser.parse(sCurrentLine);
JSONObject jsonObject = (JSONObject) obj; 
```

经过：

```
obj = parser.parse(sCurrentLine);
JSONObject jsonObject = new JSONObject((parser.parse(sCurrentLine)).toString()); 
```

# ios - RevMobAds 代表问题

> ID：16133164
> 
> 赞同：0
> 
> 时间：2013-04-21T16:02:13.310
> 
> 标签：ios, ios6, delegates, revmob

我试图在我的 AppDelegate 中接收 RevMobAdsDelegate 事件，但它们没有被调用。请参阅下面我所做的：

1) 实现 RevMobAdsDelegate 协议：

```
@interface MyiOSAppAppDelegate : UIResponder <UIApplicationDelegate, RevMobAdsDelegate> 
```

2) 使用 ID 初始化 RevMobAds：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // other code here..
    // Revmob initialization
    [RevMobAds startSessionWithAppID: @"SECRET_APP_ID"];
    // other code here..
} 
```

3) 调用 RevMob 广告：

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    [[RevMobAds session] showFullscreen];
} 
```

4) 声明 RevMobAdsDelegate 事件：

```
- (void) revmobAdDidFailWithError:(NSError *)error
{
    NSLog(@"1");
}

- (void) revmobAdDidReceive
{
    NSLog(@"2");
}

- (void) revmobAdDisplayed
{
    NSLog(@"3");
}

- (void) revmobUserClickedInTheAd
{
    NSLog(@"4");
}

- (void) revmobUserClosedTheAd
{
    NSLog(@"5");
} 
```

广告看起来很好，没有问题，但没有调用上述函数。我也试过

[RevMobAds 会话].delegate = self;

但什么也没发生。[RevMobAds 文档](http://sdk.revmob.com/ios.html)中的任何地方都没有提到最后一行，
但我仍然尝试过。谁能帮助我如何调用这些事件？

这里的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T21:03:28.470

代理仅适用于对象广告，请查看[API 文档](http://sdk.revmob.com/api/ios/index.html)。

但是你可以使用这样的东西：

```
RevMobFullscreen *ad = [[RevMobAds session] fullscreen];
ad.delegate = self;
[ad showAd]; 
```

或者您可以使用新块“代表”：

```
 RevMobFullscreen *ad = [[RevMobAds session] fullscreen];
 [ad loadWithSuccessHandler:^(RevMobFullscreen *fs) {
   [fs showAd];
   NSLog(@"Ad loaded");
 } andLoadFailHandler:^(RevMobFullscreen *fs, NSError *error) {
   NSLog(@"Ad error: %@",error);
 } onClickHandler:^{
   NSLog(@"Ad clicked");
 } onCloseHandler:^{
   NSLog(@"Ad closed");
 }]; 
```

# datagrid - Adding a combobox inside a datagrid

> ID：16133165
> 
> 赞同：1
> 
> 时间：2013-04-21T16:02:17.953
> 
> 标签：datagrid

I want to dynamically add a combobox or a level in a particular cell of 7th column in a datagrid in wpf. Now I have an array of i elements. i am using a for loop which iterates i time , and every time it is checked whether the ith number of the array is greater than 1 or not. if it is greater than 1 , then the corresponding rows which satisfy the array's value are found out , and at the 7th column of each row of the datagrid , a combobox is added.

If the array value is equal to 1 , a label is added instead.

A similar application I did in ASP.NEt as follows

```
 if (count[i] > 1)
     {
       DropDownList drp = new DropDownList();
       drp.DataSource = dsq.Tables[0];
       drp.DataTextField = "Application Name";
       drp.DataValueField = "Application Name";
       drp.DataBind();
     if (row.Cells[0].Text.ToString().Trim().Equals(dt.Rows[i][0].ToString().Trim()))
       {
         row.Cells[7].Controls.Add(drp);
       }

    }
     else
     {
      Label l = new Label();
      l.Text = dsq.Tables[0].Rows[0][0].ToString().Trim();

     row.Cells[7].Controls.Add(l);
      } 
```

Kindly let me know how to implement similar logic in datagrid in WPF.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T19:32:31.687

是的，经过大量研究，我找到了答案。请看下面：

```
 for (int j = 0; j < dt2.Rows.Count; j++)
   {
   DataGridRow row =  
   DataGridRow)dgApplications.ItemContainerGenerator.ContainerFromIndex(j);
   DataGridCellsPresenter presenter = GetVisualChild<DataGridCellsPresenter>(row);
   DataGridCell cell0 = 
   (DataGridCell)presenter.ItemContainerGenerator.ContainerFromIndex(0);

   ComboBox cb = new ComboBox();
 foreach (DataRow row2 in dsq.Tables[0].Rows)
    {
      ComboBoxItem cbx = new ComboBoxItem();
      cbx.Content = row2["Application Name"];
     cb.Items.Add(cbx);
    }                            
  cell7.Content = cb; 
```

//GetVisual函数

```
 public static T GetVisualChild<T>(Visual parent) where T : Visual
{
    T child = default(T);

    Application.Current.Dispatcher.Invoke(DispatcherPriority.Normal, (Action)delegate()
    {
        int numVisuals = VisualTreeHelper.GetChildrenCount(parent);
        for (int i = 0; i < numVisuals; i++)
        {
            Visual v = (Visual)VisualTreeHelper.GetChild(parent, i);
            child = v as T;
            if (child == null)
            {
                child = GetVisualChild<T>(v);
            }
            if (child != null)
            {
                break;
            }
        }

    }
   ); 
```

# ruby-on-rails - What does assigns mean in rspec

> ID：16133166
> 
> 赞同：23
> 
> 时间：2013-04-21T16:02:32.290
> 
> 标签：ruby-on-rails, rspec, bdd

What does that line of code do?

```
assigns(:articles).should eq([article]) 
```

in the following rspec

```
 describe "GET #index" do
    it "populates an array of articles" do
      article = Factory(:article)
      get :index
      assigns(:articles).should eq([article])
    end

    it "renders the :index view" do
      get :index
      response.should render_template :index
    end
  end 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-21T16:10:34.640

`assigns`涉及在控制器操作中创建的实例变量（并分配给视图）。

* * *

要在评论中回答您的评论，我想：

*   1）您的索引操作看起来像`@articles = Articles.all`（但我希望您使用分页）

*   2）在上面的规范块之前，您在 db 中创建了一篇文章（或者我希望您在 db 中存根 db 查询）

*   1 + 2 =>`@articles`应该包含一篇文章，这是您的规范期望

# android - 在 Android 上，如何启动应用程序“com.android.launcher”或“com.android.systemui”

> ID：16133175
> 
> 赞同：-2
> 
> 时间：2013-04-21T16:03:20.270
> 
> 标签：android

我试过`Intent intent = context.getPackageManager().getLaunchIntentForPackage(pkg);`了，但它回来了`null`。

我应该使用`context.startActivity(intent);`吗？如果是这样，如何获得`intent`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:07:52.773

这些都不是旨在启动的应用程序，AFAIK。如果您想调出用户选择的主屏幕，请创建`ACTION_MAIN`/`CATEGORY_HOME` `Intent`并调用`startActivity()`它：

```
Intent home = new Intent(Intent.ACTION_MAIN);
home.addCategory(Intent.CATEGORY_LAUNCHER);
home.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(home); 
```

# java - Interfce with multiple generic types?

> ID：16133178
> 
> 赞同：1
> 
> 时间：2013-04-21T16:03:36.537
> 
> 标签：java, generics, interface

This Is my Interfce `BinaryHeterogenousHyperedge`:

```
public interface BinaryHeterogenousHyperedge
    <M extends Vertex<L>, L,T extends Vertex<E>, E>
extends Hyperedge
{
    public <T> List<Vertex> search(T centroid  ,List<M> allElemntsVertex);
} 
```

The method search take two parameter :

*   a centroid vertex of type `T` ( for example Tag Vertex)
*   a list of Vertx of type `M` != `T` (for example Image Vertex)

and return a list of vertex of both type `T` and `M`

`TagsImagesHyperEdges` implements this interface:

```
public class TagImagesHyperedge
    implements BinaryHeterogenousHyperedge
                   <ImageVertex,Map<String, Instance> ,TagVertex,String>
{

@Override
public <T> List<Vertex> search(T centroid, List<ImageVertex> allElemntsVertex)
    {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

Why is type `T` not inferred?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T16:10:19.687

您正在使用方法定义中的 T 来隐藏接口定义中的 T 。**永远不要这样做。**它们是不同的、不相关的类型参数，无法从另一个推断出一个。您的方法签名基本上是一种非常令人困惑的说法：

```
public List<Vertex> search(Object centroid, List<M> allElementsVertex); 
```

Java 的一条经验法则：如果方法级别的类型参数只在方法签名中使用一次，那么使用它就*毫无意义。*方法级类型参数对于表达参数类型或返回类型*之间的约束很有用。*

# google-chrome - Is there any way in which a chrome extension can access a local file?

> ID：16133179
> 
> 赞同：1
> 
> 时间：2013-04-21T16:03:46.037
> 
> 标签：google-chrome, google-chrome-extension, filesystems, chromium

I've tried many things to read a local file from an extension's background script. Adding `file://*` (and even `*://*`) to the `permissions` list didn't work because XMLHttpRequest refuses to work with anything but http.

So, is there a way to access local files without resorting to native client or a small proxy server?

edit: Just to be clear, the file I want to access is located outside the extension's directory.

# visual-studio-2010 - how to delete project on tfs2012 from vs2010 ?

> ID：16133180
> 
> 赞同：0
> 
> 时间：2013-04-21T16:03:46.837
> 
> 标签：visual-studio-2010, tfs

I'm trying to delete a project on my tfs 2012 but i got this error

C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE>TFSDeleteproject /q /f orce /collection:https://******.visualstudio.com/DefaultCollection/ MvcMusi cStore TF200040: You cannot delete a team project with your version of Team Explorer. C ontact your system administrator to determine how to upgrade your Team Explorer client to the version compatible with Team Foundation Server.

I create MvcMusic Store Project with vs2011 but now i have vs2010 ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:08:32.577

您正在`TFSDeleteProject`从 Visual Studio 2010 文件夹运行该实用程序。您可能安装了多个版本的 Team Explorer，每个版本都进入自己的安装路径。

TFS Server 和 Team Explorer 的 2010 和 2012 版本在很大程度上是交叉兼容的，但是有些操作没有正确的版本是无法进行的。删除项目就是其中之一；如果要从 2012 版服务器中删除项目，则必须使用 2012 版 Team Client。

您可以通过三种方式从 TFS 2012 系统中删除项目。第一个是将 TFS 2012 安装中的 Team Explorer 客户端安装到计算机上。（例如，我在服务器本身上安装了 Team Explorer）。安装后，客户端工具将位于：

`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE`

或者，正如您所发现的，您可以安装[Team Anywhere](http://www.microsoft.com/en-us/download/details.aspx?id=30661)客户端，它显然还允许您删除项目。

最后，如果您有权访问 TFS 服务器管理控制台，则可以从那里删除团队项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:40:11.160

下载 Team Explorer Everywhere for Team Foundation 并从您的控制台执行您的命令下载[http://microsoft.com/en-us/download/details.aspx?id=30661](http://microsoft.com/en-us/download/details.aspx?id=30661)（需要 java 运行时）。

命令行指南： http: [//msdn.microsoft.com/en-us/library/gg413282 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/gg413282(v=vs.100).aspx)

# c# - EF updating an existing entity with new reference and get Violation of UNIQUE KEY constraint

> ID：16133182
> 
> 赞同：1
> 
> 时间：2013-04-21T16:04:28.573
> 
> 标签：c#, sql, asp.net-mvc, database, entity-framework

I'm trying to update an existing in the DB entity (MamConfiguration_V1) call it Parent

I want to

1) add a reference (navigation) member to it (MamConfigurationToBrowser_V1) call it Child

2) I don't change the value of a unique property in the Parent entity. (Parent.Name)

I got the entity to update from the DB,

and using the same context (mMamDbEntities)

I add the reference member.

I don't change its Name property.

However I get a DB error, uniquness restriction violation

```
{"Violation of UNIQUE KEY constraint 'UQ_MamConfigurations_V1'. Cannot insert duplicate key in object 'dbo.MamConfiguration_V1'. The duplicate key value is (elad_14Apr_1315).\r\nThe statement has been terminated."} 
```

I did DB sniffing and saw the generated code:

```
exec sp_executesql N'update [dbo].[MamConfiguration_V1]
set [Name] = @0, [Description] = @1, [StatusId] = @2, [Type] = @3, [UpdatedDate] = @4, [PercentageTraffic] = @5, [NumericTraffic] = @6
where ([ConfigurationId] = @7)
',N'@0 nvarchar(50),@1 nvarchar(200),@2 int,@3 int,@4 datetime2(7),@5 int,@6 int,@7 int',@0=N'elad_17Apr_1120_tmpToRemove_',@1=N'elad_22Apr_1120',@2=2,@3=0,@4='2013-04-23 11:17:25.4991650',@5=55,@6=-1,@7=32 
```

//some more commands

```
exec sp_executesql N'insert [dbo].[MamConfiguration_V1]([Name], [Description], [StatusId], [Type], [CreatedDate], [UpdatedDate], [PercentageTraffic], [NumericTraffic])
values (@0, @1, @2, @3, @4, @5, @6, @7)
select [ConfigurationId]
from [dbo].[MamConfiguration_V1]
where @@ROWCOUNT > 0 and [ConfigurationId] = scope_identity()',N'@0 nvarchar(50),@1 nvarchar(200),@2 int,@3 int,@4 datetime2(7),@5 datetime2(7),@6 int,@7 int',@0=N'elad_17Apr_1120_tmpToRemove_',@1=N'elad_22Apr_1120',@2=2,@3=0,@4='0001-01-01 00:00:00',@5='0001-01-01 00:00:00',@6=55,@7=-1 
```

I would have expected upsert to be `@@ROWCOUNT = 0`

What am I doing wrong?

My code and DB are:

```
 public void SaveCofiguration(MamConfiguration_V1Ui itemUi)
        {
            var itemEf = mMamConfiguration_V1UiToEfConvertor.ConvertToNewEf(itemUi);

            using (var maMDBEntities = new MaMDBEntities())
            {
                IDal<MamConfiguration_V1> mamConfigurationDal = mDalFactory.GetDal<MamConfiguration_V1>(maMDBEntities);

                mamConfigurationDal.Save(itemEf);
            }
        }

         public MamConfiguration_V1 GetById(object id)
        {           
                id.ThrowIfNull("id");

                int configurationId = Convert.ToInt32(id);

                var result =
                    mMaMDBEntities.MamConfiguration_V1.SingleOrDefault(item => item.ConfigurationId == configurationId);

                return result;

        }

       public MamConfiguration_V1 Save(MamConfiguration_V1 item)
        {

                item.ThrowIfNull("item");

                var itemFromDB = GetById(item.ConfigurationId);

                if (itemFromDB != null)
                {
                    UpdateEfItem(itemFromDB, item);

                   // if (mMaMDBEntities.ObjectStateManager.GetObjectStateEntry(itemFromDB).State == EntityState.Detached)
//                    {
  //                      mMaMDBEntities.MamConfiguration_V1.AddObject(itemFromDB);
    //                }

                    // Attached object tracks modifications automatically
                    mMaMDBEntities.SaveChanges();

                    return item;
                }

       private void UpdateEfItem(MamConfiguration_V1 itemFromDb, MamConfiguration_V1 itemFromUi)
            {
                itemFromDb.UpdatedDate = DateTime.Now;

                itemFromDb.Description = itemFromUi.Description;

                itemFromDb.StatusId = itemFromUi.StatusId;

                itemFromDb.Name = itemFromUi.Name;

                itemFromDb.NumericTraffic = itemFromUi.NumericTraffic;

                itemFromDb.PercentageTraffic = itemFromUi.PercentageTraffic;

                itemFromDb.Type = itemFromUi.NumericTraffic;

                foreach (var item in itemFromDb.MamConfigurationToBrowser_V1.ToList())
                {
                    if (itemFromUi.MamConfigurationToBrowser_V1.All(b => b.BrowserVersionId != item.BrowserVersionId))
                    {
                        mMaMDBEntities.MamConfigurationToBrowser_V1.DeleteObject(item);
                    }
                }

                for (int i = 0; i < itemFromUi.MamConfigurationToBrowser_V1.Count; i++)
                {
                    var element = itemFromUi.MamConfigurationToBrowser_V1.ElementAt(i);
                    var item = itemFromDb.MamConfigurationToBrowser_V1.SingleOrDefault(b => b.BrowserVersionId == element.BrowserVersionId);
                    if (item != null)
                    {
                        // copy properties from element to item
                    }
                    else
                    {
                        element.Browser = mMaMDBEntities.Browsers.Single(browserItem =>
                            browserItem.BrowserID == element.BrowserID);

                        //element.MamConfiguration_V1 = itemFromDb;

                        //have also tried: element.MamConfiguration_V1 = null;

                        //element.MamConfiguration_V1Reference = null;

                        itemFromDb.MamConfigurationToBrowser_V1.Add(element);
                    }
                }
            } 
```

**Update:**

`mMaMDBEntities.SaveChanges();` throws the exception

These are the DB tables:

```
CREATE TABLE [dbo].[MamConfiguration_V1](
    [ConfigurationId] [int] IDENTITY(1,1) NOT NULL,
    [Name] [nvarchar](50) NOT NULL,
    [Description] [nvarchar](200) NOT NULL,
    [StatusId] [int] NOT NULL,
    [Type] [int] NOT NULL,
    [CreatedDate] [datetime2](7) NOT NULL,
    [UpdatedDate] [datetime2](7) NOT NULL,
    [PercentageTraffic] [int] NOT NULL,
    [NumericTraffic] [int] NOT NULL,
 CONSTRAINT [PK_MamConfigurations_V1] PRIMARY KEY CLUSTERED 
(
    [ConfigurationId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [SECONDARY],
 CONSTRAINT [UQ_MamConfigurations_V1] UNIQUE NONCLUSTERED 
(
    [Name] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [SECONDARY]
) ON [SECONDARY]

GO

ALTER TABLE [dbo].[MamConfiguration_V1]  WITH CHECK ADD  CONSTRAINT [FK_MamConfiguration_V1_ConfigurationType_V1] FOREIGN KEY([StatusId])
REFERENCES [dbo].[MamConfigurationStatuses] ([StatusId])
GO

ALTER TABLE [dbo].[MamConfiguration_V1] CHECK CONSTRAINT [FK_MamConfiguration_V1_ConfigurationType_V1]
GO

ALTER TABLE [dbo].[MamConfiguration_V1] ADD  CONSTRAINT [DF_MamConfigurations_V1_CreatedDate]  DEFAULT (getdate()) FOR [CreatedDate]
GO

ALTER TABLE [dbo].[MamConfiguration_V1] ADD  CONSTRAINT [DF_MamConfigurations_V1_UpdatedDate]  DEFAULT (getdate()) FOR [UpdatedDate]
GO

CREATE TABLE [dbo].[MamConfigurationToBrowser_V1](
    [MamConfigurationId] [int] NOT NULL,
    [BrowserVersionId] [uniqueidentifier] NOT NULL,
    [IsWhiteListed] [bit] NOT NULL,
    [BrowserID] [int] NOT NULL,
    [VersionNumberLowRange] [varchar](50) NOT NULL,
    [CreatedDate] [datetime] NOT NULL,
    [UpdatedDate] [datetime] NOT NULL,
    [VersionNumberUpperRange] [varchar](50) NULL,
 CONSTRAINT [PK_MamConfigurationToBrowser_V1_1] PRIMARY KEY CLUSTERED 
(
    [BrowserVersionId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [SECONDARY]
) ON [SECONDARY]

GO

SET ANSI_PADDING OFF
GO

ALTER TABLE [dbo].[MamConfigurationToBrowser_V1]  WITH CHECK ADD  CONSTRAINT [FK_MamConfigurationToBrowser_V1_Browsers] FOREIGN KEY([BrowserID])
REFERENCES [dbo].[Browsers] ([BrowserID])
GO

ALTER TABLE [dbo].[MamConfigurationToBrowser_V1] CHECK CONSTRAINT [FK_MamConfigurationToBrowser_V1_Browsers]
GO

ALTER TABLE [dbo].[MamConfigurationToBrowser_V1]  WITH CHECK ADD  CONSTRAINT [FK_MamConfigurationToBrowser_V1_BrowserVersion] FOREIGN KEY([MamConfigurationId])
REFERENCES [dbo].[MamConfiguration_V1] ([ConfigurationId])
GO

ALTER TABLE [dbo].[MamConfigurationToBrowser_V1] CHECK CONSTRAINT [FK_MamConfigurationToBrowser_V1_BrowserVersion]
GO

ALTER TABLE [dbo].[MamConfigurationToBrowser_V1] ADD  CONSTRAINT [DF_Browser_V1_CreatedDate]  DEFAULT (getdate()) FOR [CreatedDate]
GO

ALTER TABLE [dbo].[MamConfigurationToBrowser_V1] ADD  CONSTRAINT [DF_Browser_V1_UpdatedDate]  DEFAULT (getdate()) FOR [UpdatedDate]
GO 
```

**Update 2**

I have tried @AzharKhorasany solution, but go the same error:

```
for (int i = 0; i < itemFromUi.MamConfigurationToBrowser_V1.Count; i++)
            {
                var element = itemFromUi.MamConfigurationToBrowser_V1.ElementAt(i);
                var item = itemFromDb.MamConfigurationToBrowser_V1.SingleOrDefault(b => b.BrowserVersionId == element.BrowserVersionId);
                if (item != null)
                {
                    // copy properties from element to item
                }
                else
                {
                    element.Browser = mMaMDBEntities.Browsers.Single(browserItem =>
                        browserItem.BrowserID == element.BrowserID);

                    element.MamConfigurationId = itemFromDb.ConfigurationId;

                    //element.MamConfiguration_V1 = itemFromDb;

                    //have also tried: element.MamConfiguration_V1 = null;

                    //element.MamConfiguration_V1Reference = null;
                    //mMaMDBEntities.AddToMamConfigurationToBrowser_V1(itemFromUi.MamConfigurationToBrowser_V1.ElementAt(0)); // add as inserted

                    itemFromDb.MamConfigurationToBrowser_V1.Add(element);
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:54:44.127

您的代码非常冗长，与实际保存操作无关，但我想我理解您在做什么。首先，从错误中，您确实定义了新项目的 ID，它代表数据库中的某些内容，我想这就是您所期望的。

当你 Add() 时，你是在告诉 EF 你有新的东西，它告诉你它已经有了。相反/另外需要将实体状态从“已添加”更改为“未更改”。在 EF 中，您可以使用以下语法执行此操作：

```
DbContext.Entry(entity).State = EntityState.Unchanged; 
```

还有其他方法可以做到这一点，所以研究一下。此外，EF 有一些帮助代码可以自动将值从一个实例复制到另一个实例。您需要搜索细节，但一般语法是：

```
DbContext.Entry(entityforUpdate).CurrentValues.SetValues(updatedDetachedEntity) 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:19:17.457

这解决了我的问题：

```
 else
            {
                ctidUi.MamConfiguration_V1 = null;

                mMaMDBEntities.MamConfigurationToCTIDs_V1.AddObject(ctidUi);

                itemFromDb.MamConfigurationToCTIDs_V1.Add(ctidUi);
            } 
```

# nlp - 如何检测两个句子是否相似？

> ID：16133184
> 
> 赞同：26
> 
> 时间：2013-04-21T16:04:46.997
> 
> 标签：nlp, similarity, stanford-nlp, opennlp

我想计算两个任意句子彼此的相似程度。例如：

> 1.  一位数学家找到了解决这个问题的方法。
> 2.  这个问题被一位年轻的数学家解决了。

我可以使用标注器、词干分析器和解析器，但我不知道如何检测这些句子是否相似。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-21T16:42:54.547

这两个句子不仅相似，而且几乎是[释义](http://en.wikipedia.org/wiki/Paraphrase)，即表达相同含义的两种替代方式。这也是一个非常简单的释义案例，其中两个话语都使用相同的词，唯一的例外是一个是主动形式，另一个是被动形式。（这两个句子并不完全是释义，因为在第二个句子中，数学家是“年轻的”。这些附加信息使两个句子之间的语义关系不对称。在这些情况下，您会说第二个话语[“包含”](http://en.wikipedia.org/wiki/Textual_entailment)第一个一个，或者换句话说，第一个可以从第二个推断出来）。

从这个例子中，你无法理解你是否真的对释义检测、文本蕴涵或句子相似性感兴趣，这是一个更广泛、更模糊的问题。例如，“人吃食物”更类似于“人吃面包”还是“男人吃食物”？

释义检测和文本相似性都是自然语言处理中复杂的、开放的研究问题，有一个庞大而活跃的研究人员社区致力于这些问题。目前尚不清楚您对这个主题的兴趣程度如何，但请考虑到尽管许多杰出的研究人员已经花费了整个职业生涯来试图破解它，但我们距离找到普遍适用的合理解决方案还有很长的路要走。

除非您对仅在特定情况下有效且无法捕获句法交替（如本例中）的非常肤浅的解决方案感兴趣，否则我建议您更深入地研究文本相似性问题。一个很好的起点是[“统计自然语言处理基础”](http://nlp.stanford.edu/fsnlp/)一书，它对大多数统计自然语言处理主题进行了非常有条理的介绍。一旦你明确了你的要求（例如，你的方法应该在什么条件下工作？你追求什么样的精度/召回水平？你可以安全地忽略什么样的现象，你需要考虑哪些现象？）你可以通过深入研究最近的研究工作开始研究具体方法。在这里，一个很好的起点将是[计算语言学协会 (ACL) 的在线档案，该协会](http://aclweb.org/anthology/)是该领域大多数研究成果的出版商。

只是为了给你一些实用的东西，一个非常粗略的句子相似度基线是两个二进制向量之间的[余弦相似度](http://en.wikipedia.org/wiki/Cosine_similarity)，将句子表示为词袋。一袋词是文本的一种非常简化的表示，常用于信息检索，其中你完全不考虑语法，只将一个句子表示为一个向量，其大小是词汇量的大小（即语言中的词数) 并且如果词汇表中位置“i”的单词出现在句子中，则其分量“i”的值为“1”，否则为“0”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-05-18T11:34:23.910

一种更现代的方法（2021 年）是使用机器学习 NLP 模型。有专门针对此任务的预训练模型，其中许多是从[BERT](https://en.wikipedia.org/wiki/BERT_(language_model))派生的，因此您不必训练自己的模型（如果您愿意，可以）。这是一个使用 PyTorch 的优秀[Huggingface Transformers](https://github.com/huggingface/transformers)库的代码示例。它基于[这个例子](https://huggingface.co/transformers/v2.6.0/usage.html#sequence-classification)：

```
from transformers import AutoTokenizer, AutoModelForSequenceClassification
import torch

model_name = "bert-base-cased-finetuned-mrpc"
tokenizer = AutoTokenizer.from_pretrained(model_name)
model = AutoModelForSequenceClassification.from_pretrained(model_name)

sequence_0 = "A mathematician found a solution to the problem."
sequence_1 = "The problem was solved by a young mathematician."

tokens = tokenizer.encode_plus(sequence_0, sequence_1, return_tensors="pt")
classification_logits = model(**tokens)[0]
results = torch.softmax(classification_logits, dim=1).tolist()[0]

classes = ["not paraphrase", "is paraphrase"]
for i in range(len(classes)):
    print(f"{classes[i]}: {round(results[i] * 100)}%") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-25T04:36:09.653

在某些情况下，可以自动将句子转换为表达其含义的[话语表示结构](http://www.nltk.org/book/ch10.html)。如果两个句子产生相同的话语表征结构，那么它们很可能具有相似的含义。

# python - 从基于类的通用视图手动获取响应

> ID：16133187
> 
> 赞同：6
> 
> 时间：2013-04-21T16:04:59.760
> 
> 标签：python, django, django-class-based-views, django-generic-views

我正在尝试编写一个测试来验证从基于类的通用视图返回的 HTML。假设我有这个基于函数的视图，它只是呈现一个模板：

```
# views.py
from django.shortcuts import render

def simple_view(request, template='template.html'):
    return render(request, template) 
```

有了这个，在测试期间我可以这样做：

```
# tests.py
from django.http import HttpRequest
from .views import simple_view

request = HttpRequest()
response = simple_view(request) 
```

然后在`response`. 现在我想将上面的转换为从 TemplateView 继承的基于类的视图：

```
# views.py
from django.views.generic import TemplateView

class SimpleView(TemplateView):
    template_name = 'template.html' 
```

现在基本上相同的测试方法失败了：

```
# tests.py
from django.http import HttpRequest
from .views import SimpleView

request = HttpRequest()
view_func = SimpleView.as_view()
response = view_func(request).render() 
```

结果是

```
Traceback (most recent call last):
    File "tests.py", line 30, in test_home_page_returns_correct_html
response = view_func(request).render()
    File "lib/python2.7/site-packages/django/views/generic/base.py", line 68, in view
return self.dispatch(request, *args, **kwargs)
    File "lib/python2.7/site-packages/django/views/generic/base.py", line 82, in dispatch
if request.method.lower() in self.http_method_names:
AttributeError: 'NoneType' object has no attribute 'lower' 
```

我尝试`request.method`手动设置为`GET`，但这只会引发另一个错误，抱怨`session`不在`request`.

有没有办法从 TemplateView 获得“空”请求的响应？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T16:45:17.087

感谢[dm03513](https://stackoverflow.com/users/594589/dm03514)的指点！事实上，我必须使用 RequestFactory，但还要确保它`request`包含一个空的`session`（尽管`SessionMiddleware`首先列出）：

```
# tests.py
from django.test import TestCase
from django.test.client import RequestFactory

class SimpleTest(TestCase):
    def setUp(self):
        self.factory = RequestFactory()

    def test_home_page_returns_correct_html(self):
        request = self.factory.get('/')
        request.session = {}
        view_func = SimpleView.as_view()
        response = view_func(request)
        response.render()
        self.assertIn('<html>', response.content) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T16:12:22.700

您可以使用内置测试[客户端](https://docs.djangoproject.com/en/1.2/topics/testing/#default-test-client)的 djangos来完成此操作，而不是直接实例化和调用视图

测试客户端允许您通过 django url 路由器发出请求

`response = self.get('/url/to/invoke/simpleview/')`

此外，我还发现了一些关于如何测试基于类的视图的博文，其中之一是[http://tech.novapost.fr/django-unit-test-your-views-en.html](http://tech.novapost.fr/django-unit-test-your-views-en.html)

# c# - 如何在加载时使用来自另一个属性的数据填充属性

> ID：16133189
> 
> 赞同：0
> 
> 时间：2013-04-21T16:05:10.000
> 
> 标签：c#, properties

我有一个`virtual Property SomeList`类型`ICollection<X>`和一个`Property SomeNarrowList`类型`ICollection<Y>`。

`Class X`包含一个`virtual property Element`。`Class Y`

`SomeList`正在从数据库中填充，之后使用一些方法从`Element`.

正如我现在正在做的那样，每当调用这样的方法时，都会执行检查以查看是否`SomeNarrowList`为空，如果是，则`Element`使用`SomeList`.

这段代码对我来说似乎相当混乱，我希望有一个更干净的解决方案。

`get`我的第一个想法是为属性的值提供一个实现`SomeNarrowList`，但这提出了一个问题：使用 EF 映射属性时，以什么顺序加载属性（如果有）？如果该`SomeNarrowList`属性将在之前加载`SomeList`，这将导致为空`SomeNarrowList`。

另一个想法是使用 LINQ 始终引用`SomeList`属性并从那里获取每个`Element`属性，但我还没有完全弄清楚如何做到这一点。

我应该如何处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:47:38.760

一种方法是如您所说在属性的获取器中使用 LINQ 查询，如下所示：

```
public ICollection<Y> SomeNarrowList
{
    get { return SomeList.Select(p => p.Element).ToList(); }
} 
```

# java - 将敌人的移动速度设置为小于 1

> ID：16133194
> 
> 赞同：0
> 
> 时间：2013-04-21T16:05:53.657
> 
> 标签：java, int, double, game-physics

在我正在创建的游戏中，我希望僵尸的速度比玩家设置的慢两倍我不想将玩​​家的移动速度设置为 2，因为它的移动速度太快了。这是控制僵尸速度的代码：

```
Zombie z = (Zombie) zombie.get(i);
if(z.getY() > player.getY()){
        z.setY(z.getY() - 1);
}
if(z.getY() < player.getY()){
        z.setY(z.getY() + 1);
}
if(z.getX() > player.getX()){
        z.setX(z.getX() - 1);
}
if(z.getX() < player.getX()){
        z.setX(z.getX() + 1);
} 
```

我曾尝试使用`(int) .5f`，`(int) .5`但`1 / 2`所有这些都使僵尸完全静止不动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T16:07:54.870

.5 和 1/2 不是整数。数学 101\. 你不能仅仅通过`f`在它后面加上一个浮点数来将它转换为一个整数。尝试移除`(int)`演员表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:14:22.423

我认为你想要做的是将你的 Zombie 的 x 和 y 字段声明为双精度数，而不是整数，因此`setX(...)`and`setY(...)`方法将接受双精度数，而`getX()`and`getY()`返回双精度数。如果您的成像需要 int 值，那么您可以在需要时强制转换或舍入这些值，或者提供 Zombie 方法来执行此操作，`getIntValueX()`并且`getIntValueY()`.

您也可以使用单个 Point2D.Double 字段代替您的 x 和 y 字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-29T21:09:13.060

我也被这个问题困住了。但这只是一个简单的问题。

例如：

```
private int x = 100;
private float speed = 0.5f;

x += speed; 
```

这会将 x 位置增加一个浮点数，但 x 值是一个整数，因此它会自动舍入浮点数，因此它将为 0

### 解决方案：

```
private float x = 100;
private float speed = 0.5f;

x += speed; 
```

# mysql - mysql 中的斯堪的纳维亚字符未正确显示

> ID：16133199
> 
> 赞同：0
> 
> 时间：2013-04-21T16:06:43.710
> 
> 标签：mysql, linux, character-encoding

在我的数据库中插入表时出现问题。运行的服务器是 Ubuntu：

发行商 ID：Ubuntu 描述：Ubuntu 12.04.2 LTS 版本：12.04 代号：精确

我通过以下方式创建了一个包含一个表的数据库：

创建数据库 mysql>create database test1234 CHARACTER SET latin1;

建表 mysql>create table testtbl (test varchar(22) CHARACTER SET latin1);

将 mysql>insert 插入 testtbl（测试）值（'asdsdaæø'）；

选择器：mysql> select * from testtbl;

+--------------+
| 测试 |
+--------------+
| |
| 阿斯达|
|

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:19:19.333

**您可能有一个运行 UTF-8 的浏览器/SQL 客户端，而数据库数据是 Latin-1。**

在处理字符编码时，您必须确保从数据源到屏幕的所有步骤都使用相同的编码。这包括：

*   发送到数据库的数据的编码
*   数据库的编码
*   从数据库读取的文件/脚本的编码

如果终点是网页：

*   HTTP 标头中设置的编码
*   元标记中设置的编码
*   Web 浏览器编码设置（应自动设置为匹配 HTTP 标头/元标记）

一个好的提示是始终使用 UTF-8，如果您真的不需要使用 latin1。UTF-8 越来越成为无处不在的标准，大多数应用程序都将其用作标准。

# wpf - 获取多行 wpf 文本块中的所有文本

> ID：16133200
> 
> 赞同：3
> 
> 时间：2013-04-21T16:07:15.147
> 
> 标签：wpf

我有多行文本块，我想通过代码获取所有行有人可以帮助我吗？

文本块：

```
<TextBlock Name="tb" TextWrapping="Wrap" >
                              Name:_____________
                                <LineBreak/>
                                 Mark:____________
          </TextBlock> 
```

在 C# 中：

```
text = ((TextBlock)tb).Text; 
```

但我只得到了第一行。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T16:18:40.127

你可以试试这个：

```
StringBuilder s = new StringBuilder();
foreach (var line in tb.Inlines)
{
    if (line is LineBreak)
        s.AppendLine();
    else if (line is Run)
        s.Append(((Run) line).Text);
}
var text = s.ToString(); 
```

[在这里](http://developingfor.net/2009/03/23/processing-multiline-text-in-a-wpf-textblock/)找到

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-26T19:10:23.397

在这里，它显示了完成此操作的 3 种可能方法。请使用适合您要求的。

```
1.<LineBreak />
2.TextWrapping="Wrap"
3.TextTrimming="CharacterEllipsis" 
```

[这里](http://[Here]http://www.wpf-tutorial.com/basic-controls/the-textblock-control/ "这里")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-20T16:26:26.070

如果要在多行上显示，可以使用：

```
<TextBlock Name="myText" Text="I go &#x0a; Home " > 
```

当然，您可以通过解析字符串来获取所有行。

# css - Allow floating DIVs to overlap when window is smaller

> ID：16133203
> 
> 赞同：2
> 
> 时间：2013-04-21T16:07:42.627
> 
> 标签：css, css-float

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:21:45.750

对您正在使用的 .toontab 类使用百分比。然而，您必须使用媒体查询来获得远程支持

```
.toontab {
  position: relative;
  width: 8%;
  height: 3.5em;
  float: left;
  margin-right: 1.5em;
  font-size: 11pt;
  border-radius: 5px;
} 
```

# css - DIV定位（多个div，不同的Z索引）

> ID：16133204
> 
> 赞同：1
> 
> 时间：2013-04-21T16:07:47.533
> 
> 标签：css

这个问题已多次发布，但我找不到一个可以帮助我找到解决方案的讨论。移动后，我怎样才能摆脱底部的这个额外空间`#AnotherDiv`？我也尝试了其他设置，例如使用外部 div（宽度 100%）并将 and 放置在`#content`内部`#AnotherDiv`，但之后`#AnotherDiv`根本不会留在底部（我使用了`position` `absolute`and `bottom`0）。我想要的只是`#AnotherDiv`在页脚 div 的底部对齐。

[http://jsfiddle.net/bW7h2/10/](http://jsfiddle.net/bW7h2/10/)

```
#AnotherDiv {
    position: relative;
    bottom: 200px;
    width: 100%;
    height: 200px;
    z-index: 1;
    background-color: #00FF00;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:16:32.667

我从您的评论中了解到您想这样做吗？

```
#AnotherDiv {
    position: fixed;
    bottom: 0px;
    width: 100%;
    left: 0;
    right: 0;
    height: 20px;
    z-index: 101;
    background-color: #00FF00;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:23:33.777

使用`margin-top: -200px;`而不是`bottom:200px;`您的`#AnotherDiv`元素。而且您的 CSS
中缺少一个：`;`

`**[LIVE DEMO](http://jsfiddle.net/bW7h2/12/)**`

```
#homepage{
    width: 100%;
    height: 100%;
    padding: 0px;
    margin: 0;
}
/* Header, Body, Footer */
#content {
    position: relative;
    width: 900px;
    margin-left: auto;
    margin-right: auto;
    background-color: #0000FF;
    z-index: 1;        /* 1 IS QUITE ENOUGH, SET '0' FOR #AnotherDiv */
}

#data {
    position: relative;
    width: 100%;
    min-height: 500px;
}
#footer {
    height: 200px;
    width: 100%;  /* MISSING ; */
    position: relative;
    background-color: gold;
}

#AnotherDiv {
    position: relative;
    width: 100%;
    height: 200px;
    z-index: 0;
    margin-top: -200px;  /* INSTEAD OF bottom:200px; */
    background-color: #00FF00;
} 
```

# python - Python Pylab subplot bug?

> ID：16133206
> 
> 赞同：1
> 
> 时间：2013-04-21T16:07:53.997
> 
> 标签：python, matplotlib, plot

I am plotting some data using pylab and everything works perfect as I expect. I have 6 different graphs to plot and I can individually plot them in separate figures. But when I try to `subplot()` these graphs, the last one `(subplot(3,2,6))` doesn't show anything.

What confuses me is that this 6th graph is drawn perfectly when put in a separate figure but not in the subplot - with identical configurations.

Any ideas what may be causing the problem ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:21:50.600

我发现应该在 plot() 之前调用 subplot()，问题已解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:03:40.473

一般来说，如果您使用多个轴或编写非交互式脚本，最好使用 OO 接口，而不是状态机（类似 MATLAB）接口。你可以这样做：

```
fig, sub_lst = plt.subplots(3, 2)
sub_lst = sub_lst.ravel() # flatten list
for sub_p in sub_lst:
    sub_p.plot(...)
    # what ever other plotting commands you use 
```

请注意，绘图函数是`axes`返回的对象的成员函数`subplots`。

请参阅[如何将 pyplot 函数附加到图形实例？](https://stackoverflow.com/questions/14254379/how-can-i-attach-a-pyplot-function-to-a-figure-instance/14261698#14261698)有关 OO 与状态机接口的更长讨论

# php - 使用 Mcrypt 和 PHP 通过 HTTP GET 参数的公钥/私钥加密来防止重放攻击

> ID：16133208
> 
> 赞同：0
> 
> 时间：2013-04-21T16:07:55.653
> 
> 标签：php, http, mcrypt, replay

我想创建一个游戏应用程序，因为我希望客户端将分数和其他应该加密的信息发送到服务器。

我知道有一种方法可以`mcrypt`使用公钥和私钥加密数据。所以客户端的应用程序将加密，但我是唯一能够解密它的人。我没有更多信息可以继续，我只想知道粘贴数据的最安全方法。

到目前为止我所理解的是这个例子：

如果我有：`?username=foo&score=50&msg=hello`
我可以将其加密为：（`msgencrypted=fgus9g8uywe978ygt7923y5235sdfdsadfsd`示例）

并且只有使用我服务器上的特定密钥才能解密它。

同样，我只是想找到向用户隐藏数据的最佳方法，这样他就无法解密它。

这意味着如果我加密了一条消息......该消息将无法发送两次。

因此，如果用户使用 firebug 查看发送的请求并尝试再次发送，则该消息将无效。我想我可以将它记录在数据库中。但如果有这样的方法，那就太好了。

我正在使用 PHP 5.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T14:14:53.063

您应该使用[PKI（公钥基础设施）](http://searchsecurity.techtarget.com/definition/PKI)。公钥密码术（AKA 非对称密码术）是指一种密码算法，它需要两个单独的密钥（密钥对），其中一个是秘密（或私有），另一个是公钥。

您的客户端可以访问公钥并使用公钥加密消息，只有有权访问私钥的服务器才能解密消息。假设您可以使用 RSA 算法加密分数和其他信息并将其发送到服务器。这样可以防止[参数篡改](http://searchsecurity.techtarget.com/definition/parameter-tampering)。您也可以使用[MAC（消息验证码）](http://whatis.techtarget.com/definition/message-authentication-code-MAC)来防止篡改。

但我建议 POST 数据而不是使用 GET；因为通常 URL 将记录在 Web 服务器或 ISP 中。因此，不将机密加密数据放在查询字符串中是合理的。

为了防止重放攻击，您可以使用计数器并将其与参数一起发送。在服务器端，您存储最后一个计数器的值（例如 123）。当您收到其计数器值等于或小于存储值的请求时，您必须拒绝该请求。例如，当您收到计数器值 <=123 的请求时。由于您正在加密所有参数，因此也没有人可以篡改计数器值。

实际上POS终端使用类似的方法来防止重放攻击。如果您想要更高级别的安全性，请尝试阅读有关 POS 交易安全性以及如何保护交易免受重放/中间人攻击的信息。

# mysql - 有没有一种算法可以将数字组合转换为一个数字？

> ID：16133212
> 
> 赞同：0
> 
> 时间：2013-04-21T16:08:22.203
> 
> 标签：mysql, algorithm, combinations

我正在开发一个类似调查的应用程序。对于多项选择题，我想将项目组合存储在一个数字中以将其存储在一行中。

所以问题的数据库结构是这样的：

```
id    type                 text                      item_id
-- ---------------   ---------------------------     -------
1  multiple_choice   which one would you choose?        42
1  multiple_choice   which one would you choose?        43
1  multiple_choice   which one would you choose?        46 
```

这是一个有 3 个选项的问题，选项将从另一个表*items*调用，id 为 42,43,46

所以我想把这个组合变成一个数字来实现这一点：

```
id    type                 text                      items
-- ---------------   ---------------------------     -------
1  multiple_choice   which one would you choose?        x* 
```

*   x 应该是一个数字，表明它来自数字 42,43,46

所以在数学上它会像

```
f({42,43,46}) = x   and   f^-1(x)={42,43,46} 
```

解决这个问题的一种方法可能是使用素数作为项目 ID。所以它们的乘法是唯一的，但是有没有办法对所有数字做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:15:05.830

不不不。这不是您想要在关系数据库中执行的操作。

您的原始表格`questions`更接近正确的方法。

如果您想获得所有可能的答案，只需执行以下查询：

```
select id, type, text, group_concat(item_id)
from questions q
group by id, type, text; 
```

但是，您真正应该拥有的是两张表（至少）。列出每个问题并具有以下列的问题：

*   question_id
*   类型
*   文本

每个问题有*1*行（即是`question_id`主键）。

还有第二个表`question_items`，列如下：

*   question_items_id
*   question_id
*   有关该项目的更多信息

使用这种格式，上面的查询会更像：

```
select q.question_id, q.type, q.text, group_concat(qi.question_item_id)
from questions q join
     question_items qi
     on q.question_id = qi.question_id
group by q.question_id, q.type, q.text; 
```

尽管查询可能看起来有点复杂，但底层数据结构更好地代表了您的问题域。这使得整个系统更加健壮和可维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T16:15:13.437

这不是解决此问题的最佳方法。你应该有一个多表结构，即

*   *问题*= 每个问题 1 行，包含文本和问题类型
*   *项目*= 每个项目 1 行
*   *QuestionHasItems* = 每个问题每个项目 1 行

这些名称仅用作说明。通过沿着您开始的路线走，“类型”、“id”和“文本”字段是多余的，因此非常浪费/效率低下。

如果您查看此示例，您将看到预填充的表结构和示例查询。 [http://sqlfiddle.com/#!2/fdf5f/4](http://sqlfiddle.com/#!2/fdf5f/4)

如下查询将生成您想要的数据

```
SELECT

  q.questionid,
  q.questiontype,
  q.questiontext,
  GROUP_CONCAT(i.itemid) AS itemIDs,
  GROUP_CONCAT(i.itemtext) AS itemTexts

FROM questions q

INNER JOIN questionHasItems qhi
ON qhi.questionid = q.questionid

INNER JOIN items i
ON i.itemid = qhi.itemid

GROUP BY q.questionid; 
```

同时允许您通过执行以下查询有效地获取问题可用的选项，例如

```
SELECT

  i.itemid AS itemIDs,
  i.itemtext AS itemTexts

FROM questionHasItems qhi

INNER JOIN items i
ON i.itemid = qhi.itemid

WHERE qhi.questionid = 1; 
```

# c# - 只显示某些进程？

> ID：16133213
> 
> 赞同：0
> 
> 时间：2013-04-21T16:08:29.543
> 
> 标签：c#, process

```
private void UpdateProcessList()
    {
        // clear the existing list of any items
        listBox1.Items.Clear();
        // loop through the running processes and add
        //each to the list
        foreach (System.Diagnostics.Process p in
        System.Diagnostics.Process.GetProcesses())
        {
            listBox1.Items.Add(p.ProcessName + " - " + p.Id);
        }
        // display the number of running processes in
        // a status message at the bottom of the page
        listBox1.Text = "Processes running: " +
        listBox1.Items.Count.ToString();
    }
    private void button1_Click(object sender, EventArgs e)
    {

        ProcessStartInfo pi = new ProcessStartInfo();
        pi.Verb = "runas";
        pi.FileName = "1-AccountServer.exe";
        pi.WindowStyle = ProcessWindowStyle.Hidden;
        Process.Start(pi);
        Thread.Sleep(10000);
        pi.FileName = "2-DatabaseServer.exe";
        pi.WindowStyle = ProcessWindowStyle.Hidden;
        Process.Start(pi);
        Thread.Sleep(10000);
        pi.FileName = "3-CoreServer.exe";
        pi.WindowStyle = ProcessWindowStyle.Hidden;
        Process.Start(pi);
        Thread.Sleep(10000);
        pi.FileName = "4-CacheServer.exe";
        pi.WindowStyle = ProcessWindowStyle.Hidden;
        Process.Start(pi);
        Thread.Sleep(10000);
        pi.FileName = "5-Certifier.exe";
        pi.WindowStyle = ProcessWindowStyle.Hidden;
        Process.Start(pi);
        Thread.Sleep(10000);
        pi.FileName = "6-LoginServer.exe";
        pi.WindowStyle = ProcessWindowStyle.Hidden;
        Process.Start(pi);
        Thread.Sleep(10000);
        pi.FileName = "7-WorldServer.exe";
        pi.WindowStyle = ProcessWindowStyle.Hidden;
        Process.Start(pi);
        Thread.Sleep(10000);

    } 
```

问题是我不希望每个流程都显示，而只是这七个特定流程，我该怎么做？它确实有效，但不是我真正想要的方式>。<我在互联网上搜索了一段时间以实际找到这段代码并将其实现为我想要的，但它只是显示了这么多我想要的过程因为是没有意义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:14:26.647

使用所有进程名称创建一个 List(of String)

```
List<string> myProcesses = new List<string>() 
{
    "1-AccountServer.exe","2-DatabaseServer.exe",
    "3-CoreServer.exe", "4-CacheServer.exe","5-Certifier.exe",
    "6-LoginServer.exe","7-WorldServer.exe"
}; 
```

然后检查

```
foreach (Process p in Process.GetProcesses())
{ 
     if(myProcesses.Contains(p.ProcessName + ".exe"))
        listBox1.Items.Add(p.ProcessName + " - " + p.Id);
} 
```

顺便说一句，创建这个列表对于构建一个启动所有进程的通用方法也有很大帮助

```
private void button1_Click(object sender, EventArgs e)
{
    ProcessStartInfo pi = new ProcessStartInfo();
    pi.Verb = "runas";
    pi.WindowStyle = ProcessWindowStyle.Hidden;
    foreach(string s in myProcesses)
    {
         pi.FileName = s;
         Process.Start(pi);
         Thread.Sleep(10000);
    }
 } 
```

**按照 IV4 在其评论中的建议进行编辑**，也许一种不同的方法将所有进程收集在 HashSet 中，然后针对 HashSet 检查列表（只有 7 个元素）在性能方面可能会更好

```
HashSet<Process> anHashOfProcesses = new HashSet<Process>(Process.GetProcesses());
foreach(string s in myProcesses)
{
    var p = anHashOfProcesses.FirstOrDefault(z => z.ProcessName + ".exe" == s);
    if(p != null) listBox1.Items.Add(p.ProcessName + " - " + p.Id);
} 
```

# asp.net-mvc - Code First 数据类型和最大字符数

> ID：16133216
> 
> 赞同：2
> 
> 时间：2013-04-21T16:08:41.323
> 
> 标签：asp.net-mvc, c#-4.0, ef-code-first

我注意到这`Code First`使得每个字符串都`nvarchar`成为`SQL database`. 并且最大字符数设置在`MAX`.

我如何影响这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:09:35.733

尝试这个：

```
[MaxLength(10)]
public string PropertyName {get;set;} 
```

# actionscript-3 - 覆盖 swc-class 不起作用

> ID：16133219
> 
> 赞同：0
> 
> 时间：2013-04-21T16:09:11.953
> 
> 标签：actionscript-3, overriding, swc

我试图覆盖 swc 文件中的一个类，如下所述：

[如何在 Flex 中修改或覆盖 swc 类？](https://stackoverflow.com/questions/5096795/how-to-monkey-patch-or-override-a-swc-class-in-flex)

我将它放在我的主 src 文件夹中，与 swf 中的类位于相同的文件路径中。包路径也是正确的。

在我这样做之后，我的自定义方法可以在 flash builder 自动完成中访问。这意味着，不知何故，Flash Builder 让我正确。

但我收到“未定义属性”-错误。当我运行代码时，我的自定义类的构造函数中的跟踪命令也没有做任何事情。

# html - Web 浏览器如何在同一页面上处理 AJAX 发布和 HTML 重定向？

> ID：16133220
> 
> 赞同：0
> 
> 时间：2013-04-21T16:09:12.047
> 
> 标签：html, ajax, redirect

我想通过使用 HTML 标记将用户重定向到新页面并将一些数据发布到另一个页面；所以我有这段代码

```
<html>
    <head>
        <script source="jquery.js"></script>
        <meta http-equiv="Refresh" content="0; url=http://current.domain/some_page.html">
    </head>
    <body>
        <script>
            $.ajax({
                type: "POST",
                url: "http://current.domain/another_page.html",
                data: data,
                success: success,
                dataType: dataType
            });
        </script>
    </body>
</html> 
```

我正在我的本地主机中测试代码，所以这个过程非常快，我不会注意到任何东西。但我想知道浏览器何时处理 AJAX 帖子：

*   A - 重定向之前：必须先完成 AJAX 发布，然后是重定向。
*   B - 与重定向同时：浏览器将重定向并仍然在后台发布数据。
*   C - 重定向后：AJAX 帖子将在浏览器成功重定向到新页面后完成。

有人可以给我一个解释吗？我个人更喜欢 B 和 C 情况，如果 AJAX 发布需要很长时间，用户不必等待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:17:30.670

这不太可能可靠地工作。您询问 AJAX 操作是否会在重定向之前、期间或之后发生：答案是它*可能*在之前发生，这取决于浏览器及其版本。您已经设置了所谓的*竞态条件*，很难知道首先会发生什么：浏览器会注意到您希望它首先重定向，还是您希望立即运行 AJAX 操作？

`Location`在这个页面上使用PHP使用header重定向，然后对目标页面进行AJAX操作会更可靠。您可能还会考虑是否需要 AJAX 操作：如果您在生成目标页面时正在运行服务器端脚本，您可以同时进行 AJAX 工作，这样可以节省 HTTP 调用。

顺便说一句，当您运行 时`$.ajax()`，您可能应该将它包装在一个 DOM 就绪的处理程序中，特别是如果您打算从表单元素传递值。

# html - 验证：元素链接上属性 rel 的错误值首先

> ID：16133223
> 
> 赞同：2
> 
> 时间：2013-04-21T16:09:47.253
> 
> 标签：html, validation, rel

我正在使用 Piwigo 照片库软件，它会在页面头部动态生成一些代码，显示如下：

```
<link rel="first" title="First" href="picture.php?/2601/category/37">
<link rel="prev" title="Previous" href="picture.php?/2619/category/37">
<link rel="next" title="Next" href="picture.php?/2621/category/37">
<link rel="last" title="Last" href="picture.php?/2760/category/37">
<link rel="up" title="Thumbnails" href="index.php?/category/37"> 
```

当我通过验证器运行它时，我收到如下错误：

```
Line 21, Column 71: Bad value first for attribute rel on element link: The string first is not a registered keyword or absolute URL.
…" href="picture.php?/2601/category/37">  <link rel="prev" title="Previous" hre…

Line 21, Column 282: Bad value last for attribute rel on element link: The string last is not a registered keyword or absolute URL.
…" href="picture.php?/2760/category/37">  <link rel="up" title="Thumbnails" hre…

 Line 21, Column 348: Bad value up for attribute rel on element link: The string up is not a registered keyword or absolute URL.
…category/37">  <link rel="up" title="Thumbnails" href="index.php?/category/37"> 
```

经过一番阅读，我了解到 HTML5 已经删除了 rel up，first 和 last，尽管它保留了 prev 和 next。我不明白的是，首先和接下来要替换什么？如果我完全删除它们，验证器也会对此不满意。

有人知道吗？谢谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:27:00.420

在 HTML5 中，您只能对`rel`属性使用以下值：

*   [在 HTML5 规范中定义](http://www.w3.org/TR/html5/links.html#linkTypes)
*   [在微格式 wiki 中注册](http://microformats.org/wiki/existing-rel-values#HTML5_link_type_extensions)

如果您需要其他链接类型，则必须[注册它](http://www.w3.org/TR/html5/links.html#other-link-types)。

* * *

关于删除`first`/ `index`：[rel=first 和 rel=index 的语义破坏了规范和实现](https://www.w3.org/Bugs/Public/show_bug.cgi?id=7475)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-02T13:56:45.847

使用临时板 w3c 并在图库页面上找到 rel="title" 导致 val 失败将其从脚本中取出但我不知道它做了什么 在所有平台上测试网站后的属性值仍然不知道它在做什么相对=“标题”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-04T12:58:14.930

验证器面临同样的问题（使用fancybox插件时）。您可以替换`rel`为类似的内容`data-rel`并在您的脚本中进行适当的更改（即对于fancybox，我们需要将所有替换`attr('rel')`为`attr('data-rel')`

# opencv - 上身骨骼检测

> ID：16133225
> 
> 赞同：7
> 
> 时间：2013-04-21T16:09:57.910
> 
> 标签：opencv, emgucv

对于一个教育项目，我们目前正在开发一个基本的运动和手势检测系统。我们的主要目标是在摄像机流中检测人体。使用这些信息，我们想要检测身体的基本骨架，以进一步检测人所做的手势。

我们正在使用 EmguCV / OpenCV 来处理我们的流。我在 Youtube 上找到了这个视频：[http](http://www.youtube.com/watch?v=fYZtmkfWh5g) ://www.youtube.com/watch?v=fYZtmkfWh5g 。他能够检测到上半身并在其中放置一个基本骨架，但是如何？他没有提到使用的任何算法。

我们已经尝试使用背景减法 (BackgroundSubtractorMOG2) 检测身体轮廓，但相机噪声和闪电条件让我们失败了。

有没有人想像视频中显示的那样检测身体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-01T08:27:32.053

我认为您应该执行以下步骤：

1.  检测人脸。
2.  检测手。
3.  估计身体形象的比例。
4.  放置上身运动学模型（骨架），使用头部位置信息并使用检测到的头部大小设置其比例。
5.  将模型的头部和手部与检测到的人体头部和手部的位置相匹配。
6.  更新模型的逆运动学以获得人体姿态估计。
7.  我想，这里应该很好用一些统计滤波器，比如粒子滤波器或卡尔曼滤波器。
8.  转到步骤 1。

对于运动学模型，您可以使用一些 2D 物理 endine（例如[Box2D ）。](http://box2d.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T16:37:54.213

[这](http://www.robots.ox.ac.uk/~vgg/software/UpperBody/)将是一个很好的起点，在 C++ 中实现上身检测算法。（[http://www.robots.ox.ac.uk/~vgg/software/UpperBody/](http://www.robots.ox.ac.uk/~vgg/software/UpperBody/)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-10T19:19:03.993

我喜欢这种精简的“ [js-opendetect ”解决方案，在](https://github.com/mtschirs/js-objectdetect)[带有 LBP 级联](https://stackoverflow.com/questions/32225022/js-objectdetect-with-lbp-cascades)的线程 js-objectdetect 中引用

如果您想试用 Matlab-Model 和 VS，这里有一个历史样本 [http://groups.inf.ed.ac.uk/calvin/articulated_human_pose_estimation_code/](http://groups.inf.ed.ac.uk/calvin/articulated_human_pose_estimation_code/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-10T19:23:41.527

更复杂的模型，如 Caffe 的神经网络 .. 可以通过 Websearch -> "Human Pose Estimation" 找到，例如[https://github.com/ZheC/Realtime_Multi-Person_Pose_Estimation](https://github.com/ZheC/Realtime_Multi-Person_Pose_Estimation) 在较新的操作系统上似乎不容易安装（较旧的编译器.. .?) 并且有点资源消耗（在我的旧 1 GB-HW 上，它现在无法运行）。

最后可能很有趣，[deeplearnjs](https://pair-code.github.io/deeplearnjs/)将如何上升或集成（直到现在它需要 chrome，并且示例显示对象识别但看起来很有希望）。

# c - 想了解 C 数组的行为

> ID：16133233
> 
> 赞同：5
> 
> 时间：2013-04-21T16:10:52.503
> 
> 标签：c, arrays, memory-address

请看下面的代码片段：

```
int main()
{

    int arr[] = { 0,3 , 4,28,1198};
    for(int i=0;i<5;i++)
    printf("\n arr[i] %u \n" , arr+i);
    printf("\n *******************\n");
    printf("%u ", &arr+1);

    return 1;

} 
```

当它运行时，它会输出：

```
arr[i] 3219650892 

 arr[i] 3219650896 

 arr[i] 3219650900 

 arr[i] 3219650904 

 arr[i] 3219650908 

 *******************
3219650912 
```

似乎它向我展示了最后一个元素的地址，再加上 1 个整数，这似乎很奇怪。我觉得它应该给我第二个元素的地址。

你能帮我理解这种行为吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-21T16:17:30.170

要理解这一点，请比较`arr`with的含义`&arr`。

`arr`是数组的名称。C 有一个规则，将数组表达式转换为指向第一个元素的指针（某些特殊情况除外，此处不适用）。所以`arr`转换为`&arr[0]`，即第一个元素的地址。这是一个指向 的指针`int`，因此，当您向其添加 1 时，您将获得指向下一个 的指针`int`。因此，该指针的连续递增通过数组的元素递增。

相反，`&arr`是指向数组的指针。^*数组的起始地址和第一个元素的起始地址相同，但类型不同。的类型`&arr`是“指向五个 int 数组的指针”。当你加 1 时，你会得到一个指向下一个五个 int 数组的指针。也就是说，地址增加了五个 int 的整个数组的大小。

顺便说一句，使用`%u`说明符来打印地址是不合适的。您应该使用`%p`地址并将其转换为`void *`，例如：

```
printf("%p ", (void *) (&arr+1)); 
```

**脚注**

^*这是其中一种特殊情况：当数组与 一起使用时`&`，转换未完成。其中`&arr`，`arr`是数组，不是指针，`&arr`是它的地址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T16:12:34.850

`&arr+1`

`&arr`是指向数组的指针`arr`，因此指向数组元素`&arr + 1`的最后一个元素的地址。那是最后一个元素地址，所以是相同的地址（但类型不同）。`arr``+ 1``arr``&arr[4]``&arr + 1``&arr[5]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T16:15:08.010

&arr 为您提供指向 5 个整数数组的指针。

因此， &arr+1 指向下一个由 5 个整数组成的数组。

# javascript - 正则表达式在 JavaScript 测验中不起作用

> ID：16133234
> 
> 赞同：0
> 
> 时间：2013-04-21T16:10:54.077
> 
> 标签：javascript, regex, arrays

我在 JavaScript 和 CSS 中有这个测验，它根据一系列答案检查输入。在我尝试实施 RegEx 之前它工作正常。我放入 RegEx 以尝试使答案不区分大小写。这是新代码：

```
function check(a) {

    var str=a;
    var patt = new RegExp("/"+key[window.questnum]+"/i");
    var anscheck=patt.test(str);

    if(anscheck==true){
        document.getElementById('quiz').style.backgroundColor="#44ee99";
        setTimeout(function() {
            document.getElementById('quiz').style.backgroundColor="#44aaff";
        }, 500); 
        newquest(); }
    else if(a=="") {
        document.getElementById('answer').style.backgroundColor="#00eeee";
        setTimeout(function() {
            document.getElementById('answer').style.backgroundColor="#FFFFFF";
        }, 250); 
        }
    else {
        document.getElementById('quiz').style.backgroundColor="#ee9944";
        setTimeout(function() {
            document.getElementById('quiz').style.backgroundColor="#44aaff";
        }, 500); 
    } 
```

这是旧的工作代码：

```
function check(a) {
    if(a==key[window.questnum]){
[[etc changing color]] 
```

任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:17:08.623

使用 new RegExp() 时，应单独放置“i”标志。

尝试：

```
var patt = new RegExp(key[window.questnum], "i"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:14:58.833

如果您在两个字符串上都使用 String.toLowerCase() ，则可以检查相等性。

# google-apps-script - 是否可以在 UiApp 中以不同方式设置 href 小部件的样式？

> ID：16133238
> 
> 赞同：1
> 
> 时间：2013-04-21T16:11:14.250
> 
> 标签：google-apps-script

在 UiApp 中，href 小部件的默认样式是经典的蓝色下划线。是否可以像使用 css 样式表和 html 一样为此定义一种新样式？

例如：正常黑色的链接，悬停时变灰？

这是我在 css 中的做法：

```
h1 a:link, h1 a:active, h1 a:visited {
    color: #111;
    text-decoration: none;
}
h1 span {
    color: #111;
}
h1 a:hover, h1 a:focus {
    color: #777;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:12:54.050

您可以通过设置主要样式，`setStyleAttributes`但不能设置悬停和焦点等伪选择器样式。

# image - PNG像素数不同？

> ID：16133240
> 
> 赞同：0
> 
> 时间：2013-04-21T16:11:18.367
> 
> 标签：image, png

我有一个PNG文件。我已解压缩 IDAT 块并将其读取为 16 位颜色（每像素 16 位）并将它们保存在一维数组中。PNG 文件为 126x128 (wxh)。但是我拥有的像素数（数组长度）是 16,192。所以：

```
 16192 <-- pixel I got
126x128=16128 <-- pixel using width and height
        -----
           64 <-- difference 
```

这个 64 像素过剩是什么？

**编辑**

感谢您的回复（评论和回答），尤其是@leonbloy。

值 16,192（我得到的像素）实际上是 34,384 字节的数据，我已经将它与`BytesPerPixel`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:22:24.547

如果你不告诉我们细节很难说（你是如何计算像素数量的？）

一种可能的解释是您忘记考虑到每个 PNG 行前面都有一个字节，该字节告诉该行应用的“过滤器”（[ref](http://www.libpng.org/pub/png/spec/1.2/png-1.2-pdg.html#C.IDAT)）。因此，IDAT 块内的总字节数（在 ZLIB 压缩之前；并且不要忘记可以有很多 IDAT 块，您必须将它们全部附加）是

```
Bytes = Rows x (1 +  Cols x BytesPerPixel) 
```

如果您的图像是 16 位灰度 (BytesPerPixel=2)，并且您正在计算 Pixels=Rows x Cols= Bytes/BytesPerPixel，那么这将解释差异。

# android - Android更改多个UI元素

> ID：16133241
> 
> 赞同：0
> 
> 时间：2013-04-21T16:11:26.227
> 
> 标签：android, animation, asynchronous

我想在短时间内同时更改多个文本视图（> 30）。但是如果这些步骤很短（<100ms），这些变化就会非常滞后。我想归档~10ms。我在nexus 4上调试。这种行为正常吗？这是我的代码：

```
public class AsyncChangeUI extends AsyncTask<Void, Integer, Void> {
    View view;
    int oldPercentage;
    int newPercentage;

    AsyncChangeUI(View view, int oldPercentage, int newPercentage){
        super();
        this.view = view;
        this.oldPercentage = oldPercentage;
        this.newPercentage = newPercentage;
    }

    @Override
    protected Void doInBackground(Void... params) {
        Log.e("Kachel", view.getClass().getName());

        for(Integer i=this.oldPercentage; i<=newPercentage; i++){
            this.oldPercentage = i;

            try {
                Thread.sleep(10); //laggy if <100
                publishProgress(i);
            }catch(InterruptedException e) {
                e.printStackTrace();
            }
        }

        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {
        List<TileGroupLayout> tileGroupList = ((MainLinearLayout) view).tileGroupList;

        for (TileGroupLayout tileGroup: tileGroupList) {
            List<TileLayout> tileList = tileGroup.tileList;

            for (TileLayout tile: tileList) {
                tile.changePercentageTo(progress[0]);
            }  
        }       
    }
} 
```

谢谢！我注意到改变的最后一步比第一步更滞后：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:17:07.510

您是否在未连接调试器的情况下尝试过此操作？调试器确实会减慢您的应用程序的速度。

# python - Python str 对象在替换数组值时不支持项赋值

> ID：16133243
> 
> 赞同：1
> 
> 时间：2013-04-21T16:11:34.070
> 
> 标签：python, arrays, sockets

当我尝试替换部分数据时，它给了我一个错误。
我想在发回之前替换部分数据的十六进制值。
我应该如何处理这个？

```
data, addr = s.recvfrom(32768)
if knownClient is None:
    knownClient = addr
if addr == knownClient:
    s.sendto(data, knownServer)
    print "Sent     : " + ":".join("{0:02X}".format(ord(c)) for c in data)
else:
    data[10] = 0xFF #error_here
    data[11] = 0x0A #error_here
    s.sendto(data, knownClient) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T16:20:45.027

你不能修改字符串——它们是不可变的。如果你想改变字符串，你有几个选择。第一个选项是创建一个新字符串。

```
data = data[:10]+chr(0xFF) + chr(0x0A) + data[12:] 
```

如果您将经常修改数据，您可能希望使用列表或数组来代替

```
datalist = list(data)
datalist[10] = chr(0xFF)
datalist[11] = chr(0x0A) 
```

然后当你想在修改后返回一个字符串时：

```
data = ''.join(datalist) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:14:06.060

您需要构建一个新字符串：

```
data = data[:10] + chr(0xFF) + data[11:] 
```

# c# - 如何在 C# XNA 中将字符串绘制到屏幕上

> ID：16133244
> 
> 赞同：0
> 
> 时间：2013-04-21T16:11:38.337
> 
> 标签：c#, visual-studio-2010, xna, draw

我正在尝试使用 C# 将“Lives: 3”添加到平台游戏中。

`Drawhud()`目前游戏以这样的方法绘制分数：

```
// Draw time remaining. Uses modulo division to cause blinking when the
            // player is running out of time.
            string timeString = "TIME: " + level.TimeRemaining.Minutes.ToString("00") + ":" + level.TimeRemaining.Seconds.ToString("00");
            Color timeColor;
            if (level.TimeRemaining > WarningTime ||
                level.ReachedExit ||
                (int)level.TimeRemaining.TotalSeconds % 2 == 0)
            {
                timeColor = Color.Yellow;
            }
            else
            {
                timeColor = Color.Red;
            }
            DrawShadowedString(hudFont, timeString, hudLocation, timeColor);

            // Draw score
            float timeHeight = hudFont.MeasureString(timeString).Y;
            DrawShadowedString(hudFont, "SCORE: " + level.Score.ToString(), hudLocation + new Vector2(0.0f, timeHeight * 1.2f), Color.Yellow); 
```

我试图画出这样的生活（已经简化了很多代码）：

```
// Players lives
        public const int PlayerLives = 3;

// Draw Player Lives
            float LivesHeight = hudFont.MeasureString(timeHeight).Y;
            DrawShadowedString(hudFont, "Lives: " + Player.PlayerLives.ToString("0"), hudLocation + new Vector2(0.0f, LivesHeight * 1.4f), Color.Yellow); 
```

这不会绘制我在`DrawShadowString()`方法中创建的字符串。为什么是这样？有没有更简单的方法呢？

这是`DrawShadowedString()`要求的方法：

```
private void DrawShadowedString(SpriteFont font, string value, Vector2 position, Color color)
        {
            spriteBatch.DrawString(font, value, position + new Vector2(1.0f, 1.0f), Color.Black);
            spriteBatch.DrawString(font, value, position, color);
        } 
```

谢谢

# sql - 在sql中查找给定日期范围之间的假期数

> ID：16133258
> 
> 赞同：-2
> 
> 时间：2013-04-21T16:12:35.730
> 
> 标签：sql, sql-server

我有一个名为 holiday_master 的表，其中 3 列分别命名为 from_date、to_date 和 duration。现在当用户输入一个日期范围时，让 daterange1 和 daterange2，在假日表的基础上，编写一个 sql 来查找假期数。它将包括 from_date 和 to_date。

例如 from_date to_date 持续时间 2012/08/01 2012/08/03 3 2012/09/17 2012/09/24 8

用户输入：2012/07/30 至 2012/08/02（假期数：2） 2012/09/20 至 2012/09/29（假期数：5）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:19:15.053

以下查询应该有效：

```
select coalesce(sum(datediff(day,
                     (case when h.from_date < t.fromdate then t.fromdate else h.from_date end),
                     (case when t.to_date > t.todate then t.todate else h.to_date end)
                   ), 0)
from (select @daterange1 as fromdate, @daterange2 as todate) const left outer join
     holidays h
     on h.from_date <= todate and h.to_date >= from_date; 
```

这是逻辑。首先，为了方便起见，我只是将常量放入常量表中（限制“@”键上的压力）。然后查询左连接到假期表 - 如果期间没有假期，这是必要的。

然后它执行比较重叠时间段的逻辑。如果假期的开始在时间段之前，则将开始时间设为时间段的开始。最后也是一样。然后，将所有这些时间段加起来。

根据“to_date”的处理方式，您可能需要在期间添加“1”。“to_date”是否包含在假期中。如果把它列为假期，那么逻辑是：

```
select coalesce(sum(1+datediff(day,
                     (case when h.from_date < t.fromdate then t.fromdate else h.from_date end),
                     (case when t.to_date > t.todate then t.todate else h.to_date end)
                   ), 0) 
```

# scala - 使用组合框和可编辑标签填充 Listitem 并保留行中每个对象的状态

> ID：16133260
> 
> 赞同：0
> 
> 时间：2013-04-21T16:12:39.677
> 
> 标签：scala, wicket

为了避免浪费您的时间，这是 apache wicket 和 scala 开发人员的问题，谢谢。

我创建了一个带有方法 populateList 的 listView，它根据下图填充了与负责每行的相应经理的客户会议列表：

![在此处输入图像描述](https://i.stack.imgur.com/xxxHW.png)

这里有两个问题：

1.  创建新项目时，仅保留字段（标签）dateBegin 和 dateEnd 以及先前分配的值，我丢失了ListItem 最后一行中**Manager** *DropDownChoice*和**Detail** *TextField的值。*
2.  **在更改从***Detail TextField*退出**后**的*DropDownChoice*后，需要使用从每个字段中选择的相应值*更新模型。*

 ****因此，这些值仅保留用于标签，实际上是链接。让我展示一下代码：

```
add(new ListView[Meetings]("listMeetings", listData) {
  override protected def onBeforeRender() {
  periodTotal = new Period()
  super.onBeforeRender()
}

// for populating the listView
def populateItem(item: ListItem[customer]) = {
    var customer = item.getModelObject()

    item.add(new LinkDate("beginDate", customer))
    item.add(new LinkDate("endDate", customer))

    val listManagers: java.util.List[Manager] = managerDAO.listManagers
    item.add(new DropDownChoice("managerSelection", listManagers,new ChoiceRenderer[Manager]("name")))

    item.add(new TextField("detail"))

    /*
     * I tried to use the code bellow but it's cause a markups errors too.
     * Only the code above display the components without errors.
     */  
    //val managerSelection = new LinkManager("managerSelection",customer)
    //item.add(managerSelection)
    //item.add(new LinkDetail("detail",  customer))

    var period = new Period(customer.beginDate, customer.endDate.get)
    item.add(new Label("total", period.toString(getFormatter())))

    item.add(new LinkEdit("edit", customer))
}}) 
```

下面的函数适用于日期值和编辑行的相应字段：

```
private class LinkDate(id: String, customer: Customer) extends Link[String](id) {

    setEnabled(false)
    add(new Label("label", new Model[String]() {
      override def getObject(): String = {
        var result = ""
        if (id == "beginDate") {
          result = customer.beginDate.toString("dd/MM/YYYY HH:mm:ss")
        }
        if (id == "endDate") {
          result = customer.endDate.get.toString("dd/MM/YYYY HH:mm:ss")
        }
        return result
      }
    }))
     // ... doing other stuff
  }

  private class LinkEdit(id: String, customer: Customer) extends Link[String](id) {

    add(new Label("label", new Model[String]() {
      override def getObject: String = "edit"
    }));
    // ... doing other stuff
  } 
```

但是对于 DropDown 和 TextField 我尝试做同样的事情，但我失败了：

```
 // Doesn't work
  private class LinkManager(id: String, customer: Customer) extends Link[String](id) {

    val listManagers: java.util.List[Manager] = managerDAO.listManagers
    add(new DropDownChoice("managerSelection", listManagers,new ChoiceRenderer[Manager]("name") {

      def wantOnSelectionChangedNotifications() = {
        true;
      }
      def onSelectionChanged(managerSelection: Manager): String = {
        // saving model
        })
      }
    }))

    // ... doing other stuff
  }

  // Doesn't work
  // Also here I tried to change textFiled for a inline-ajax Editable label
  // And I need the behaviour to change model imadiately after change value
  private class LinkDetail(id: String, customer: Customer) extends Link[String](id) {

    add(new AjaxEditableLabel("detail", new Model[String]() {
      override def getObject(): String = {
        // ... doing other stuff
      }
    }))
  } 
```

对应的标记如下所示：

```
<TR wicket:id="listCustomersMeetings">
  <TD><a wicket:id="beginDate"><span wicket:id="label"></span></a></TD>
  <TD><a wicket:id="endDate"><span wicket:id="label"></span></a></TD>
  <TD>
      <SELECT wicket:id="managerSelection" name="id"></SELECT>
      <BR>
  </TD>

  <TD><INPUT wicket:id="detail" type="text" name="obs" value="_"/></TD>

  <TD wicket:id="total"></TD>

  <TD><a wicket:id="edit"><span wicket:id="label" style="text-align: center"></span></a></TD>

</TR> 
```

我认为需要一个类似于 LinkDate 的对象来处理和存储 Manager DropDownChoice 和 textField 或 AjaxEditableLabel Detail 的值，但我在实现它们时遇到了麻烦。

感谢有人可以帮助我或给我有关信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:26:49.790

尝试替换这些行

```
item.add(new DropDownChoice("managerSelection", listManagers,new ChoiceRenderer[Manager]("name")))
item.add(new TextField("detail")) 
```

类似于：

```
 val managerSelectionCurrent = new PropertyModel(customer, "manager")
  val managerSelection = new DropDownChoice[Manager]("managerSelection", managerSelectionCurrent, listManagers,new ChoiceRenderer[Manager]("name")) {
    protected override def wantOnSelectionChangedNotifications: Boolean = {
      true
    }

    protected override def onSelectionChanged(newSelection: Manager) {
      // save changes
    }
  }
  item.add(managerSelection)

  val detail = new TextField("detail", new PropertyModel(customer, "details"))
  detail.add(new AjaxFormComponentUpdatingBehavior(("keyup")) {
    protected def onUpdate(target: AjaxRequestTarget) {
      // save changes
    }

    protected override def updateAjaxAttributes(attributes: AjaxRequestAttributes) {
      attributes.setThrottlingSettings(new ThrottlingSettings("thr", Duration.milliseconds(800)))
      super.updateAjaxAttributes(attributes)
    }
  })
  item.add(detail) 
```****

# php - 如何将 SELECT 查询的结果分配给变量？

> ID：16133261
> 
> 赞同：0
> 
> 时间：2013-04-21T16:12:41.150
> 
> 标签：php, mysql

无法从查询中提取 $row['PID'] 的值...

```
$result = mysqli_query($con,"SELECT * FROM posts WHERE PID=(SELECT max(PID) FROM posts)");

$row = mysql_fetch_array($result);

$id = $row['PID']; 
```

我知道如何打印出来：

```
while($row = mysqli_fetch_array($result))
      {
      echo $row['PID'];
      } 
```

但不知道如何将它分配给一个变量而不必打印出来......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:15:36.570

在第二行中，您使用`mysql_fetch_array`的是`mysqli_fetch_array`. 我不确定这是否与问题有关（不习惯于 sqli）。

你能做一个`print_r`变量`$row`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T16:14:21.333

尝试改变

```
$row = mysql_fetch_array($result); 
```

至

```
$row = mysqli_fetch_array($result); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T16:14:36.763

更改此行：

`$row = mysql_fetch_array($result);`

对此：

`$row = mysqli_fetch_row($result);`

获取一个数组将获取一个多维数组，所以我相信你必须使用 $row[0]['pid'] 。

# sql-server - 通过 Visual Studio 2010 服务器资源管理器添加数据库连接

> ID：16133263
> 
> 赞同：0
> 
> 时间：2013-04-21T16:12:43.017
> 
> 标签：sql-server, database, visual-studio-2010

我正在尝试通过vs2010连接到数据库，但尝试时出现以下错误：

> “服务器未找到或无法访问！”

数据库在 SQL Server Management Studio 中连接，我正在尝试从 Visual Studio 访问它。

可能的原因是什么？我可以尝试什么？

![数据库服务器](https://i.stack.imgur.com/RfHAl.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:08:34.737

PC-Aditya 是您服务器的真实名称吗？既然你可以连接SSMS，你可以检查以下查询的结果吗

```
SELECT @@SERVERNAME AS SERVERNAME 
```

您可以将服务器指定为 . 和 .\SQLEXPRESS ？或使用本地主机？

最后，您可以在命令提示符下运行 IPCONFIG 命令并使用 IP 地址连接到您的服务器

```
e.g. 192.168.1.1 or 192.168.1.1\SQLExpress 
```

# javascript - 将arrayList转换为javascript数组

> ID：16133264
> 
> 赞同：0
> 
> 时间：2013-04-21T16:12:52.413
> 
> 标签：javascript, jsp, arraylist, server-side, web-development-server

我正在将 arrayList 从 java 文件发送到 .jsp 文件

为了接收该数组，我使用了以下代码

```
var words = 
        [
            <c:forEach begin="0" items="${requestScope.WordList}" var = "word">
                word,
             </c:forEach>
        ]; 
```

但是它不起作用..有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:18:13.377

可能的修复（错误修复）：

```
var words = 
    [
        <c:forEach items="${requestScope.WordList}" var="word" 
         varStatus="status">
          "${word}"<c:if test="${not status.last}">,</c:if>
        </c:forEach>
    ]; 
```

**或者**

将 Java 转换`ArrayList`为`JSON`String，并用于`JSON.parse()`获取 Javascript 对象。

# c++ - 函数返回引用不适用于 window.h

> ID：16133265
> 
> 赞同：2
> 
> 时间：2013-04-21T16:12:56.317
> 
> 标签：c++, visual-studio, function, reference

```
1: #include <windows.h>

2: int& max(int& a, int& b)
3: {
4:   return a > b ? a : b;
5: }

6: int main()
7: {
8:   return 0;
9: } 
```

Visual Studio 2008 Express Edition 喊道：

1>e:...\main.cpp(2) : 错误 C2062: type 'int' unexpected

1>e:...\main.cpp(2) : 错误 C2062: type 'int' unexpected

1>e:...\main.cpp(2) : 错误 C2059: 语法错误: ')'

1>e:...\main.cpp(3) : 错误 C2143: 语法错误: 缺少 ';' 前 '{'

1>e:...\main.cpp(3) : 错误 C2447: '{' : 缺少函数头（旧式正式列表？）

如果我用 stdio.h 或 iostream 替换 windows.h 似乎有效（或者如果我删除它）

为什么是这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T16:20:24.900

```
#include <windows.h>

#undef min
#undef max

int & max(int& a, int& b)
{
    return a > b ? a : b;
}
int main()
{
    return 0;
} 
```

`<windows.h>`定义宏`max`和`min`干扰你的宏。

其他方法

*   重命名您的函数。

*   使用`NOMINMAX`. 这是推荐使用一些定义最小值和最大值的 STL 标头的通用解决方案。

    ```
    #define NOMINMAX
    #include <windows.h> 
    ```

# android - 不使用 Unity 的智能手机的 2d/3d 开发？

> ID：16133266
> 
> 赞同：1
> 
> 时间：2013-04-21T16:13:04.997
> 
> 标签：android, ios, 3d, 2d, smartphone

我有兴趣找到用于智能手机/平板电脑的高效 2d/3d 引擎，除了 Unity 之外，游戏开发人员还有其他跨平台选项吗？任何指向有用网站的链接将不胜感激。我已经熟悉在 PC 上使用 Direct X / Open GL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:16:09.103

我认为 UDK 是一个不错的选择。它是功能齐全的虚幻引擎 3，免费（除非您希望将其用于商业用途，否则我相信您可以将利润的 % 提供给他们）。它还可以在 Android 和 iOS 上运行。

[适用于移动设备的虚幻开发工具包](http://www.unrealengine.com/mobile/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:39:16.130

我会推荐[AndEngine](http://www.andengine.org/)进行 2d 开发。它的社区可能会有所帮助。

对于 3D，我使用了[jPCT](http://www.jpct.net/jpct-ae/index.html)，这使得 3ds、obj 或其他 3d 模型的集成变得非常容易。

适用于高级 3d/游戏开发人员[的移动设备的虚幻开发工具包……但请多多指教！](http://www.unrealengine.com/mobile/)

老实说，我没有花时间看 UDK，所以我不能推荐它，因为当我需要一个适用于 Android 的 3d 框架时，它还不可用，我需要一个“标准”Android 应用程序飞机制造商在其中一个按钮启动游戏（一个飞行模拟器渲染他们的产品），游戏不能是独立的（客户的愿望）。

在使用新工具之前需要考虑一下：它是否满足我的所有需求？

# weka - WEKA Preprocessing using SpamAssassin Dataset using stringtowordvector

> ID：16133267
> 
> 赞同：0
> 
> 时间：2013-04-21T16:13:10.773
> 
> 标签：weka, spamassassin

我目前正在从事一个项目，在该项目中我将使用朴素贝叶斯分类方法将电子邮件分类为垃圾邮件或干净邮件。为此，我正在使用 WEKA 和著名的 SpamAssassin 数据集。（数据集可以在这里找到：[http](http://www.csmining.org/index.php/spam-assassin-datasets.html) ://www.csmining.org/index.php/spam-assassin-datasets.html ）。

我对 WEKA 的经验很少，但有人告诉我在预处理数据时使用 stringtowordvector 过滤器。我很困惑如何做到这一点。有人使用过 SpamAssassin 数据和 WEKA 吗？有没有人有任何有用的链接来协助预处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:26:21.613

使用以下教程[Text Classification and Clustering with WEKA](http://www.unal.edu.co/diracad/einternacional/Weka.pdf)。您需要将文本数据更改为数值向量，StringToWordVector 过滤器完成此任务。

# java - 验证失败时阻止操作

> ID：16133269
> 
> 赞同：3
> 
> 时间：2013-04-21T16:13:44.027
> 
> 标签：java, jquery, jsp, jquery-validate

专家 我这里需要一点帮助。我有一个 jsp 页面，其中将完成三个验证：

1.  密码强度（使用实时检查，不验证（）功能）
2.  确认密码（使用 validate() 函数，不实时检查）
3.  电子邮件验证（使用实时检查，而不是 validate() 函数）

实时检查由`keyUp()`函数和相应的 jQuery 完成：

```
 $(document).ready(function(){

 $("#register-form").validate({
 rules: {
   password_again: {
      equalTo: "#password"
        }
                    }
 });

 $("#validate").keyup(function(){

        var email = $("#validate").val();

        if(email != 0)
        {
            if(isValidEmailAddress(email))
            {
                $("#validEmail").css({
                    "background-image": "url('validate/validYes.png')"
                });
            } else {
                $("#validEmail").css({
                    "background-image": "url('validate/validNo.png')"
                });
            }
        } else {
            $("#validEmail").css({
                "background-image": "none"
            });         
        }

    });

            $('#password').keyup(function(){
    $('#result').html(checkStrength($('#password').val()));
}); 

function checkStrength(password){

//initial strength
var strength = 0;

//if the password length is less than 6, return message.
if (password.length < 6) { 
    $('#result').removeClass();
    $('#result').addClass('short');
    return 'SHORT';
}

//length is ok, lets continue.

//if length is 8 characters or more, increase strength value
if (password.length > 7) strength += 1;

//if password contains both lower and uppercase characters, increase strength value
if (password.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/))  strength += 1;

//if it has numbers and characters, increase strength value
if (password.match(/([a-zA-Z])/) && password.match(/([0-9])/))  strength += 1;

//if it has one special character, increase strength value
    if (password.match(/([!,%,&,@,#,$,^,*,?,_,~])/))  strength += 1;

//if it has two special characters, increase strength value
    if (password.match(/(.*[!,%,&,@,#,$,^,*,?,_,~].*[!,%,&,@,#,$,^,*,?,_,~])/)) strength += 1;

//now we have calculated strength value, we can return messages

//if value is less than 2
if (strength < 2 ) {
    $('#result').removeClass();
    $('#result').addClass('weak');
    return 'WEAK';  
} else if (strength == 2 ) {
    $('#result').removeClass();
    $('#result').addClass('good');
    return 'GOOD';
} else {
    $('#result').removeClass();
    $('#result').addClass('strong');
    return 'STRONG';
}
}

});

function isValidEmailAddress(emailAddress) {
    var pattern = new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);
    return pattern.test(emailAddress);
} 
```

一切正常，但是当这三个验证（Confirm_Password、Password_Strength、Email）中的任何一个在点击提交按钮后失败时，我无法阻止页面转发，但 Confirm_Password 验证除外。我也想限制 Email & Password_Strength 的操作。意味着每当验证失败时，将焦点设置为该字段。请注意，该`validate()`函数仅用于 Confirm_Password。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:41:57.983

假设您的问题是如何防止使用 jQuery 处理数据，如果您看到/知道它们对 jQuery 本身不好，我建议使用 $.ajax 函数。使用此功能，您可以选择只有在一切顺利时才发送请求。一个例子可能是这样的：

```
$(document).ready(function(){
    // Here your controls about password strenght, email, etc...
    $('#FORM-ID').submit(function(){
        var url = "YOUR_ACTION";

        // YOUR CONTROLS
        if( isOK() ) {
            $.ajax({
                type: "POST",
                url: url,
                // You can use any other way to pass the data,
                //    my favorite is to serialize with jQuery function
                data: $("#FORM-ID").serialize(),
                success: function(data){
                     // Success Message
                } else {
                     alert(data);
                }
             });
             return false;
        } else {
             // Display Error message
        } 
    });
}); 
```

[你可以在这里](http://codepen.io/sniperwolf/pen/jImtu)找到一个伪示例，而[在这里](http://api.jquery.com/jQuery.ajax/)你可以找到 $.ajax 的官方文档。如果我遇到问题，请告诉我；）

您可以为这样的控件编写一个简单的布尔函数：

```
function isOk(parameters_to_check){
    if(all_conditions_are_true){
        return true;
    } else {
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:47:54.427

您尚未指定您正在使用的 JSF 实现/库，但假设您想在 JavaScript 中做很多事情，并且在您的情况下您只想进行 Javascript 验证，我建议：

1) 使用 PrimeFaces

2）使用[p:remoteCommand](http://www.primefaces.org/showcase/ui/remoteCommand.jsf)而不是按钮的操作

3) in `p:commandButton`use`onclick`而不是`action`，您将在其中调用将进行验证的函数，并且仅在验证成功时才调用远程命令。

# java - 在 Java Web 应用程序中监控 ScheduledExecutorService

> ID：16133275
> 
> 赞同：1
> 
> 时间：2013-04-21T16:14:18.020
> 
> 标签：java, servlets, web

我们有一个带有 ServletContextListener 的 Web 应用程序，它启动多个 ScheduledExecutorService 以通过远程位置的 SNMP 更新一些中继板，而不是运行 Web 应用程序的服务器。

但是，由于远程位置的 Internet 连接丢失，远程中继板可能不可用。

发生这种情况时，更新板的线程需要很长时间才能执行。如何监控 ScheduledExecutorService 的执行和运行？

现在我使用以下代码启动线程：

```
schedulerLichtsturing = Executors.newSingleThreadScheduledExecutor();
schedulerLichtsturing.scheduleAtFixedRate(new LichtsturingDaemon(), 0, 15, TimeUnit.SECONDS); 
```

但是我已经看到线程在一段时间后不再运行，我不知道它为什么停止。由于未捕获的异常或其他原因？我怎样才能监控这个？

我还想监视线程的运行状态以及上次更新的时间。

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-07-06T12:40:40.217

你可以使用这样的东西：

```
private void runThrowException() throws Exception {
  throw new Exception("This allways throw an exception.");
}

Runnable runnable = new Runnable() {
  public void run() {
    try {
      runThrowException();
    }catch (Exception exception) {
      System.out.println("Catch exception: " + exception.toString());
    }
  }
};

ScheduledExecutorService service = Executors.newSingleThreadScheduledExecutor();
service.scheduleAtFixedRate(runnable, 1, 1, TimeUnit.SECONDS); 
```

如果子函数返回异常，则调度的执行器继续运行。

我知道，它不会影响监控问题...

# python - 查找增量 - Python 列表中元素之间的差异

> ID：16133281
> 
> 赞同：0
> 
> 时间：2013-04-21T16:14:27.657
> 
> 标签：python, list, delta

我有这段代码可以在列表中找到连续的数字：

```
from itertools import groupby
from operator import itemgetter

a = [1,2,3,5,55,56]

def consc(b):
  for k, g in groupby(enumerate(b), lambda (i,x):i-x):
     print map(itemgetter(1), g)  

consc(a) 
```

输出：

```
[1, 2, 3]
[5]
[55, 56] 
```

但是，我也希望能够寻找其他增量（1 到 10），例如 2 的差异将在同一个列表中产生以下输出：

```
[1]
[2]
[3,5]
[55]
[56] 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:20:18.213

这实际上是一个非常简单的修改：

```
from itertools import groupby, count
from operator import itemgetter

a = [1,2,3,5,55,56]

def consc(b, step):
  for k, g in groupby(zip(count(step=step), b), lambda (i, x): i-x):
     print map(itemgetter(1), g)

consc(a, 2) 
```

这使：

```
[1]
[2]
[3, 5]
[55]
[56] 
```

我们没有使用`enumerate()`，而是使用`zip()`and`count()`与所需值的步长，这给出了想要的结果。

稍微整理了一下：

```
from itertools import groupby, count
from operator import itemgetter

def _sub(item):
    a, b = item
    return a - b

def consecutive(iterable, step):
    for _, g in groupby(zip(count(step=step), iterable), _sub):
        yield map(itemgetter(1), g)

a = [1, 2, 3, 5, 55, 56]

print(list(consecutive(a, 2))) 
```

在这里有一个生成器并使用更具描述性的名称是有意义的。使用实际函数可以避免每次使用函数时都重新声明它，就像`lambda`. 通过避免使用已从语言中删除的参数解包，这也适用于 Python 3.x。

# opencv - 具有特定结构元素的 OpenCv Erosion

> ID：16133282
> 
> 赞同：2
> 
> 时间：2013-04-21T16:14:29.833
> 
> 标签：opencv, computer-vision

我想腐蚀具有特定结构元素的图像。opencv 提供的默认元素形状是椭圆、矩形和十字形。

```
int erosion_type = MORPH_RECT;
Mat element = getStructuringElement(erosion_type,Size(seSize,seSize),
         Point(seSize/2,seSize/2)); 
erode(mat,result,element); 
```

我想要的是不同的东西。我想用这样的特定矩形腐蚀图像：

```
00000
00000
11111
00000
00000 
```

我尝试了以下代码，它在创建后更改了结构元素数据，但它似乎不起作用。假设结构元素为 CV_8UC1 且形状为 5 * 5

```
for(int i = 0 ; i < 25 ; i++)
{
    if(i>10 & i < 15)
    data[i] = 0;
    else
    data[i] = 255;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T02:28:35.637

使用逗号分隔的初始化程序为您的内核定义任何形状：

```
cv::Mat element = (cv::Mat_<uchar>(5,5) << 0,0,0,0,0,
                                           0,0,0,0,0,
                                           1,1,1,1,1,
                                           0,0,0,0,0,
                                           0,0,0,0,0);
cv::erode(mat, result, element); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:12:28.203

你可以试试这个：

```
Mat src,out;
src = cv::imread('img.jpg',0);

Mat kernel = Mat::zeros(5,5,CV_8U); // 5x5 zero array
kernel.row(2) = 1;                  // set 2nd row to '1'
cv::erode(src,temp0,kernel);        // apply erosion 
```

# architecture - 在杂志阅读器应用程序中使用 AngularJS 的方法

> ID：16133284
> 
> 赞同：1
> 
> 时间：2013-04-21T16:14:32.950
> 
> 标签：architecture, angularjs, angularjs-directive, angularjs-routing

我正在学习 AngularJS 来制作这样的应用[程序](http://autocar.realviewdigital.com/#folio=1)。

示例站点使用一期杂志的全局 JS 对象来管理它的页面，并使用点击处理程序来处理页面切换和其他操作。此外，页内效果是通过直接调用 JS 代码来触发的。

但是，在 AngularJS 中实现这一点时，我对架构可能如何......
目前我只有一个`IssueDetailController`响应`'/:issueId/:pageNumber'`：在控制器内部，页面内容被注入到 DOM 中，例如`$compile(page_content)(new_scope_for_page_content)`. 我感觉这不是正确的方法。

所以我的问题是，什么是明智的架构，包括：

*   控制器/视图的结构（我是否需要两个单独的控制器来处理页面和问题。例如）
*   页面转换（我不知道在什么时候可以应用`ng-animate`自定义指令（例如包装[这个 jQuery 插件](http://www.builtbywill.com/code/booklet/)），因为整个控制器/视图对我来说仍然是模糊的。）

，对于像示例一个这样的应用程序，一般来说？感谢您的提示=）

# php - 如何使用php从浮点数中删除多余的点

> ID：16133296
> 
> 赞同：0
> 
> 时间：2013-04-21T16:15:17.227
> 
> 标签：php

如何从浮点值中删除多余的点。

例子：

**`$amount= 61786.6605..`**我的php 页面中有一个。我怎样才能获得类似`$amount=61786.6605`. 请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:19:43.007

floatval() 可能会帮助你:)

`echo floatval($amount);`

* * *

```
$amount = '61786.6605..';
echo $amount . "<br />";
$print = floatval($amount);
echo $print; 
```

因此，两个变量的打印结果 - 带有额外点和浮动的变量是：

> 61786.6605..
> 
> 61786.6605

# c# - 局部函数字符串变量或外部全局变量：哪个更高效？

> ID：16133297
> 
> 赞同：0
> 
> 时间：2013-04-21T16:15:17.733
> 
> 标签：c#, string

我有一个很长的 c# windows 窗体，我需要在很多地方使用相同的字符串。我应该只定义它还是在本地函数中使用字符串？

例如

在全局外部函数中，我应该定义以下内容：

```
static myUrl_A = "abc.com";
static myUrl B = "xyz.com"; 
```

还是我应该只使用内部字符串？还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:29:52.353

正如@millimoose 提到的，性能影响几乎没有实际意义，尽管何时可以通过实习共享字符串是有限制的。

更重要的是，如果该字符串真的只有一个值，你真的**应该在一个地方将字符串表示为一个常量。**这样做有两个好处：

1.  您不会意外地在两个不同的地方给同一个字符串不同的值（比如拼写错误）。
2.  如果您*确实*在指定的一个位置打错字，您只需在那里更改，而不是在您复制的 20 个文件中进行更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T16:18:53.580

如果它是相同的文字字符串，那没关系。它们通常是*interned*，这基本上意味着编译器会记住它所看到的文字，并且所有出现的相同文字都是对内存中单个字符串对象的引用。不过，在某处声明它们以避免在代码中出现“幻数”可能仍然有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T16:20:30.420

保持范围尽可能小——这使您的程序逻辑更容易推理（仅存在于小范围内的变量只能影响该范围，并受该范围的影响）。

声明许多局部变量而不是一些全局变量几乎没有性能影响。例外情况是您的函数预计会非常深入地递归。但即便如此，一些局部变量声明的开销通常也可以忽略不计。

# c# - c#根据2个变量从列表中删除一个对象

> ID：16133298
> 
> 赞同：0
> 
> 时间：2013-04-21T16:15:31.830
> 
> 标签：c#, arrays, linq, list

我正在尝试从列表中删除一个对象，首先我需要使用 id == 0（现在）获取其中的所有条目，然后删除第一个条目。目前我正在尝试：

```
coursework.Where( x => x.Id == moduleList.SelectedIndex).remove(coursework[testList.SelectedIndex]) // Doesnt exist in this context 
```

但这不起作用，我尝试了很多东西，但永远找不到任何有效的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:16:58.890

`.Where()`返回一个`IEnumerable<T>`包含匹配项。
它不能用于修改原始列表。

相反，您应该调用`.RemoveAll()`.

# javascript - Angularjs - 跨控制器工厂更新

> ID：16133299
> 
> 赞同：1
> 
> 时间：2013-04-21T16:15:33.603
> 
> 标签：javascript, angularjs

我有两个共享同一工厂的控制器。其中一个控制器正在更新工厂变量。其他人应注意该更改并稍后显示。

这就是我尝试的方式： [http ://plnkr.co/edit/q1NS6ytRduLlbcgJlnDU?p=preview](http://plnkr.co/edit/q1NS6ytRduLlbcgJlnDU?p=preview)

但它不起作用。跨控制器共享变量的最佳和正确方法是什么？如何使我的代码工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T17:07:36.297

您的问题与 AngularJS 有关，而是与 JavaScript 中原始值的闭包行为有关。简而言之，如果你有一个原始类型的闭包，它就是一个可以在你的本地函数中访问的复制值。您正在失去与原始变量的连接，并且无法从本地范围修改它。

将原始值更改为对象引用，您的代码将按预期开始工作：[http ://plnkr.co/edit/gEQ2KPsEEtBRfTbjqPcO?p=preview](http://plnkr.co/edit/gEQ2KPsEEtBRfTbjqPcO?p=preview)

# php - 在php中将值连接到字符串的简单方法

> ID：16133304
> 
> 赞同：2
> 
> 时间：2013-04-21T16:16:10.697
> 
> 标签：php

我有这样的代码和平：

```
$result = mysql_query("SELECT * FROM T_utilisateur WHERE cin = '" . $_POST['cin'] . "', AND pwd = '" . $_POST['pwd'] . "'"); 
```

我的问题是：有什么方法可以`mysql_query()`简单地在函数中写入字符串，因为有时我有很多变量必须与字符串连接。

例如，在 C# 中，我使用 String.Format 如下：这是一种简单的方法，因为如果我使用 concat`String.Format("SELECT * FROM T_utilisateur WHERE cin = '{0}', AND pwd = '{1}'", cin, pwd);`有时我会忘记字符`'``.`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T16:17:31.420

**使用**准备好的语句。它们是为此目的而设计的。此外，您应该注意，以您实际执行的方式构建 SQL 查询容易受到 SQL 注入的攻击。或者换句话说，这是易受攻击代码的最佳示例。如果黑客发布 SQL 语句怎么办？准备好的语句将防止这种情况发生，因为它将查询数据与查询语法分开。

在 PHP 中，您可以使用[`PDO`](http://www.php.net/manual/en/book.pdo.php)准备好的 statemtens（以及其他扩展）。这里有一个简短的例子：

```
$pdo = new PDO('...');

$stmt = $pdo->prepare('SELECT FROM table WHERE id=:id AND title=:title ...');
$stmt->execute(array('id' => 1, 'title' => 'test')); 
```

* * *

更新：

在评论中你说你必须使用 mysql_* 扩展。如果这样做，您应该知道，您必须转义每个值以防止 SQL 注入。像这样：

```
 // first(!!!) connect to mysql. this is important because
 // mysql_real_escape_string() will need information about
 // the current connection's encoding to work properly
 if(!mysql_connect(...) && mysql_select_db(...)) {
     die('mysql connection error');
 }

 // escape values
 $id    = mysql_real_escape_string($_POST['id']);
 $title = mysql_real_escape_string($_POST['title']);
 ...

 // now you could just use double quotes `"` to insert vars into the query string:
 mysql_query("SELECT * FROM `table` WHERE id = $id AND title = '$title'"); 
```

如果您需要此附加信息：

注意：有一种称为[curly 语法](http://www.php.net/manual/de/language.types.string.php)的语法`{}`，可用于访问双引号`"`字符串中的数组。我没有在示例中使用它，因为**不建议**将 post vars 放在查询中而不先转义它们。然而，这里有一个语法示例：

```
$array = array('foo' => 'bar');
$string = "Hello {$array['foo']}"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T16:18:50.613

如果你使用双引号，任何以 开头的变量`$`都将由 php.ini 自动填充。不确定它是否也适用于`$_POST`变量。

例如：

```
$result = mysql_query("SELECT * FROM T_utilisateur WHERE cin = $cin AND pwd = $pwd"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T16:23:05.287

当您在 SQL 查询中使用任何用户提供的值时，[您就会面临 SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。因此，您必须小心并适当地处理用户提供的数据。最好是在您的情况下使用 PHP 的 PDO 进行数据库访问。**这也将回答您的问题。**

这里有一些关于这个主题的好文章：

*   [为什么你应该使用 PHP 的 PDO 进行数据库访问](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)
*   [PDO简介](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html)

请注意，**不推荐使用 mysql_real_escape_string。**

来自[php 文档](http://www.php.net/manual/en/function.mysql-real-escape-string.php)：

> 从 开始，此扩展程序已弃用`PHP 5.5.0`，并将在将来删除。相反，应该使用`MySQLi`or扩展名。`PDO_MySQL`另请参阅`MySQL: choosing an API guide and related FAQ`以获取更多信息。此功能的替代方案包括：
> 
> *   mysqli_real_escape_string()
> *   [PDO::quote()](http://www.php.net/manual/en/pdo.quote.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T16:22:47.133

PHP 有一个[`sprintf()`](http://php.net/manual/en/function.sprintf.php)函数，但***您应该使用准备好的查询语句***。

```
$result = mysql_query(sprintf(
  "SELECT * FROM `T_utilisateur` WHERE `cin`='%s' AND `pwd`='%s'", 
  $_POST['cin'], $_POST['pwd']
)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T16:23:31.060

如果您想以不安全的方式进行操作，我会说[sprintf() 。](http://php.net/manual/en/function.sprintf.php)但老实说，正如 hek2mgl 建议的那样，使用[准备好的语句](http://www.php.net/manual/en/pdo.prepare.php)

# javascript - 用于电子邮件的 Javascript 正则表达式

> ID：16133305
> 
> 赞同：0
> 
> 时间：2013-04-21T16:16:13.523
> 
> 标签：javascript, regex

这是原始的正则表达式

```
/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/ 
```

这将正确验证电子邮件，但如果我键入`@test.com`它也是允许的。我添加了`{1}`

```
/^([A-Za-z0-9_\-\.]{1})+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/ 
```

我在[gskinner.com](http://gskinner.com/RegExr/)上对此进行了测试并且工作正常。它不允许@test.com。

但在我的网站上，它仍然无法正常工作。它仍然允许`@test.com`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:33:02.307

所以，看起来你的正则表达式有一些问题。

`/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/`

第一组后面的加号应该在括号内，加号实际上是您希望能够拒绝“@test.com”的情况 在正则表达式中，+ 表示模式必须匹配一个或多个字符，但是因为它不在您的捕获组（[A-Za-z0-9_-.]）中，它没有反映这一点。

您提出的添加 {1} 的“修复”意味着您的第一个组应该只匹配长度为 1 的子组，因此如果您尝试在稍微不同的情况下重新使用此模式，它将出错。

在您的第一段代码中移动括号内的加号，您应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:51:08.903

Google 用于验证电子邮件的正则表达式将涵盖 99% 的用例：

```
/**
 * Checks if the provided string is a valid address spec (local@domain.com).
 * @param {string} str The email address to check.
 * @return {boolean} Whether the provided string is a valid address spec.
 */
goog.format.EmailAddress.isValidAddrSpec = function(str) {
  // This is a fairly naive implementation, but it covers 99% of use cases.
  // For more details, see http://en.wikipedia.org/wiki/Email_address#Syntax
  // TODO(mariakhomenko): we should also be handling i18n domain names as per
  // http://en.wikipedia.org/wiki/Internationalized_domain_name
  var filter =
      /^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,6}$/;
  return filter.test(str);
}; 
```

来自Google 闭包库的[goog.format.EmailAddress 类](http://docs.closure-library.googlecode.com/git/closure_goog_format_emailaddress.js.source.html)。

# ios - 检测应用商店安装的用户限制

> ID：16133312
> 
> 赞同：0
> 
> 时间：2013-04-21T16:16:35.663
> 
> 标签：ios, app-store

如果您的应用中有一个遵循 itms:// 约定的应用商店链接，是否可以检查用户是否有与安装应用相关的限制？

试过`-[UIApplication canOpenURL:]`但返回`YES`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:37:23.350

不，很遗憾不允许通过 Apple 的 api

# javascript - ImageMapper Beatles 演示不会在 jsFiddle 之外运行

> ID：16133314
> 
> 赞同：2
> 
> 时间：2013-04-21T16:16:53.857
> 
> 标签：javascript, jquery, imagemapster

这实际上只是一个与 ImageMapper jQuery 插件相关的 javascript 问题。

我必须重新提出[这个问题](https://stackoverflow.com/questions/13040378/imagemapper-not-working-due-to-jquery-or-html)，该问题由于问题结构不佳和 OP 的回答不明确而被关闭。但是，我遇到了同样的问题，需要帮助。

像以前的 OP 一样，我正在尝试重现这个 jsfiddle：http: [//jsfiddle.net/nYkAG/396/](http://jsfiddle.net/nYkAG/396/)，但是 javascript 不会运行。

OP 链接到[她尝试使其工作的尝试和我的相同](http://nina-naustdal.com/index1.html)。`Ctrl``W`查看标记/javascript。显然我们都错过了一些东西（可能是由于类似的新手因素）。会不会是左侧面板上 jsfiddle 中引用的 onLoad() 函数？

我添加了一个简单的 jQuery 测试，它可以工作：

```
$(function() {
    alert('Hi');
}); 
```

所以我知道库正在正确加载，并且代码中没有明显的错误。但是，我无法理解这些行，并想知道是否缺少某些东西？但是，它们在 jsFiddle 中工作..？

```
var inArea,
    map = $('#beatles'),
    captions = { //stuff here },
    single_opts = { //stuff here },
    all_opts = { //stuff here },
    initial_opts = { //stuff here };
opts = $.extend({}, all_opts, initial_opts, single_opts); 
```

在任何情况下，示例 - 作为复制/粘贴 - 都不起作用。我错过了什么？同样，对于完整的 javascript 和标记，请参阅[OP 的原始示例](http://nina-naustdal.com/index1.html)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T16:23:05.537

将您的代码放入“就绪”处理程序中：

```
$(function() {
  // all of your current code here
}); 
```

jsfiddle 站点会为您执行此操作，除非您告诉它不要这样做。看到左侧的选择下拉菜单，在您选择库的下方，上面写着“onLoad”吗？这意味着 jsfiddle 将您的 JavaScript 包装在窗口的“加载”处理程序中。我的建议是相似的（jsfiddle 选项“在 DOM 就绪时”）。您的代码中的内容相当于“无换行`<head>`”，如果您选择该设置并尝试使用您的小提琴，它将无法正常工作。

这里发生的情况是，如果您的代码在 HTML 被解析为 DOM 之前运行，那么您对“#beatles”的搜索将一无所获。通过将事情延迟到 DOM 准备好，您可以确保代码能够找到它需要的元素。

# knockout.js - 淘汰赛 - 无法使用订阅更新 Observable 值（由于扩展验证）

> ID：16133318
> 
> 赞同：1
> 
> 时间：2013-04-21T16:17:10.510
> 
> 标签：knockout.js, knockout-2.0, knockout-validation

我尝试实施以下建议，但每次更新值时似乎都没有触发所需的反应。这可能是由于我的实施，因为我是 Knockout 的新手。

我有一个绑定到 TextBoxFor 的 observable (Amount)。

```
@Html.TextBoxFor(m => m.Amount, new { type = "number", data_bind = "value: Amount" }) 
```

当输入一个值时，需要对其进行验证以确保它不超过 999999。除此之外，如果该值小于 50，则需要将其设置为 50。每次“量的变化。

```
var viewModel = {
    Amount: ko.observable().extend({numeric: 0, max: 999999})
}; 
```

我已经尝试实施解决方案（在我之前帖子的回答中），但我无法让这些解决方案发挥作用。

我想出的最好的方法是创建一个计算如下。这将检查输入值并在第一次尝试时正确更新。随后的值更改不会触发屏幕上的更改，但单步执行代码似乎会更新 ViewModel.Amount 值。

```
@Html.TextBoxFor(m => m.Amount, new { type = "number", data_bind = "value: amountMin" })

quoteVehicleViewModel.VehicleMileage = ko.observable(0);

viewModel.amountMin = ko.computed({
    read: function () {
        return viewModel.Amount();  
    },
    write: function (value) {
        if (value < 50) {
            viewModel.Amount(50);
        }
    }
}).extend({ numeric: 0, max: 999999 }); 
```

** 在控制台中输入的“viewModel.Amount()”显示值为 1000，但屏幕上的值仍显示为输入的值。

感激地收到任何帮助

约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:46:12.890

据我所知，淘汰赛验证不提供任何直接从规则定义访问 observable 的能力。如果可能的话，您可以在自定义验证规则中强制该值。

我发现的最佳选择是为您要强制的每个规则创建一个自定义扩展程序。

这是“min”规则的示例强制扩展器：

```
 ko.extenders.coerceMin = function (target, enable) {
      //collect rule values
      var minRule = ko.utils.arrayFirst(target.rules(), function (val) {
          return val.rule === "min"
      });
      if (minRule === null) {
          throw Error("coerceMin extender must be used in conjunction with the 'min' knockout validation rule");
      }
      var minValue = minRule.params;
      //listen for changes and coerce when necessary
      var subscription = null;
      if (enable && !subscription) {
          subscription = target.subscribe(function (newValue) {
              if (!isNaN(newValue)) {
                  var newValueAsNum = parseFloat(+newValue);
                  var valueToWrite = newValueAsNum < minValue ? minValue : newValueAsNum;
                  //only write if it changed
                  if (valueToWrite !== newValue) {
                      target(valueToWrite);
                  }
              }
          });
      } else {
          if (subscription) {
              subscription.dispose();
          }
      }

      //return the original observable
      return target;
  }; 
```

您可以像这样在视图模型中应用它：

```
var viewModel = {
    Amount: ko.observable()
              .extend({numeric: 0, min: 50, max: 999999})
              .extend({coerceMin: true});
}; 
```

这是一个要演示的小提琴：http: [//jsfiddle.net/f2rTR/1/](http://jsfiddle.net/f2rTR/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:15:34.463

非常相似的问题在这里： [Make Knockout applyBindings to Treat select options as number](https://stackoverflow.com/questions/16056103/make-knockout-applybindings-to-treat-select-options-as-number/16060933?noredirect=1#comment22986156_16060933)

尽管订阅，您仍可以计算值。它看起来像：

```
var viewModel = {
    _amount: ko.observable(100).extend({numeric: 0, max: 999999, reset: true}),
    Amount : ko.computed(function(){
       return _amount < 50 ? 50 : _amount;
   })
};

ko.applyBindings(viewModel); 
```

**编辑**

我还查看了您在此处使用的扩展器。您可以添加到您的扩展器最小值并将其传递给您的 observable 参数。您显然必须在扩展器的 write 方法中编写一些代码

就像是：

```
ko.extenders.numeric = function(target, min) {
...
   write:function(v){
      ...
      if(v<50) v=50;
      ...
      target(v)

   }
...
} 
```

# c# - C# - 将常规文本转换为 ThIs KiNd Of TeXt 的程序

> ID：16133323
> 
> 赞同：0
> 
> 时间：2013-04-21T16:17:32.577
> 
> 标签：c#

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;
    using System.Globalization;

    namespace Project_Scorps_1
    {
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Convert_Click(object sender, EventArgs e)
        {
            string s = textBox1.Text;
            char [] c = new char [s.Length];
            for (int i = 0; i < s.Length; i++)
            {
                if (i % 2 == 0)
                {
                    (s[i].ToString()).ToUpper(CultureInfo.InvariantCulture);
                }

                if (i % 2 != 0)
                {
                    (s[i].ToString()).ToLower();
                }
            }

            textBox2.Text = s;
        }
    }
} 
```

这是我到目前为止的代码。textBox1 是您输入句子的文本框，而 textbox2 是包含输出的框。

它给我的输出与我输入的句子相同！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T16:19:13.770

这是因为字符串是`immutable`. *该值被认为是不可变的，因为一旦通过附加、删除、替换或插入字符创建它就不能*修改它*。但是，您可以做的是使用现有字符串（或字符串中的字符）来构建新字符串：

```
string result = string.Empty;
string s = textBox1.Text;
char[] c = new char[s.Length];
for (int i = 0; i < s.Length; i++)
{
    if (i % 2 == 0)
    {
        result += (s[i].ToString()).ToUpper(CultureInfo.InvariantCulture);
    }

    if (i % 2 != 0)
    {
        result += (s[i].ToString()).ToLower();
    }
}

textBox2.Text = result; 
```

每次追加一个字符时创建一个新字符串可能是一项相当昂贵的操作。如果您的输入相当长，您应该考虑使用[`StringBuilder`](http://msdn.microsoft.com/en-gb/library/system.text.stringbuilder%28v=vs.71%29.aspx). `StringBuilder` [您可以在此处](https://stackoverflow.com/questions/73883/string-vs-stringbuilder)阅读更多信息。

此外，您不需要计算模数两次，只需使用 an 即可`if..else`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T16:20:59.513

字符串是不可变的——你不会改变它们。您需要有一个单独的变量来保存您的结果：

```
string result = "";
for (int i = 0; i < s.Length; i++)
{
    if (i % 2 == 0)
    {
        result += (s[i].ToString()).ToUpper(CultureInfo.InvariantCulture);
    }

    if (i % 2 != 0)
    {
        result += (s[i].ToString()).ToLower();
    }
}

textBox2.Text = result; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T16:20:25.573

在 Linq 的帮助下它可能会更短

```
string s = "This  Kind Of Text";

var newstr = String.Join("", s.Select((c, i) => i % 2 == 0 
                                 ? char.ToLower(c, CultureInfo.InvariantCulture) 
                                 : char.ToUpper(c, CultureInfo.InvariantCulture))); 
```

# java - Java - 以数字为底的计算器（即以 10 为底数到以 5 为底数）

> ID：16133324
> 
> 赞同：0
> 
> 时间：2013-04-21T16:17:34.903
> 
> 标签：java

我正在尝试制作一个计算器来计算和转换来自不同基数的数字。现在我相信这有一个非常小的问题，但我一生都找不到它。这是代码：

```
package basecalculator;

import java.util.Scanner;

public class BaseCalculator {

public static void main(String[] args) {

    Scanner input = new Scanner(System.in);

    System.out.println("num?");
    int number = input.nextInt();

    int numLen = String.valueOf(number).length();

    int[] res = new int[numLen];

    toIntArr(number, res);

    for (int i = 0; i < res.length; i++) {
        System.out.print(res[i] + " ");
    }

    System.out.println(toBase10(res));

}

public static void toIntArr(int n, int [] res){
    Stack stack = new Stack();

    while(n > 0) {
        stack.push(n % 10);
        n = n / 10;
    }

    for (int i = 0; !stack.isEmpty(); i++) {
        res[i] = stack.pop();
    }
}

public static int toBase10(int [] res) {
    int sum = 0;

    for (int i = res.length; i >= 0; i--) {
        sum += res[i] * Math.pow(10, i); //here is where it freaks out. 
    }

    return sum;
} 
```

这是错误：

```
run:
num?
456
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 3
at basecalculator.BaseCalculator.toBase10(BaseCalculator.java:49)
at basecalculator.BaseCalculator.main(BaseCalculator.java:28)
4 5 6 Java Result: 1
BUILD SUCCESSFUL (total time: 3 seconds) 
```

任何人都可以识别问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:19:07.970

看起来`i`你的`for (int i = 0; !stack.isEmpty(); i++)`in`toIntArr`大于或等于`res.length`。将验证更改为

```
for (int i = 0; i < res.length && !stack.isEmpty(); i++) {
    //...
} 
```

此外，在您的方法中，您需要更改变量`toBase10`的上限：`i`

```
for (int i = res.length - 1; i >= 0; i--) {
    //...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T16:19:17.070

你应该改变这个：

```
for (int i = res.length; i >= 0; i--) 
```

至：

```
for (int i = res.length - 1; i >= 0; i--) 
                        ^^^ 
```

**为什么**？

Java 中的数组是*从零开始的*。因此，例如，如果您有大小为**10**的数组，则索引将为**0, 1, 2 ... 9**。

因此，如果您尝试到达`array[10]`（这是`.length`数组的），您将获得一个`ArrayIndexOutOfBoundsException`.

# algorithm - 在图中找到一组顶点，使每个顶点可以到达其他 k 个顶点

> ID：16133329
> 
> 赞同：0
> 
> 时间：2013-04-21T16:18:26.820
> 
> 标签：algorithm, language-agnostic, graph-theory

令 G=(V,E) 为有向图，k 为整数。我需要在线性时间内找到顶点组，以便该组中的每个顶点都可以恰好到达 k 个顶点（包括它自己）。

我想到的第一件事是使用 Kosaraju 的算法来找到图的强连通分量。连通分量内的每个顶点显然至少可以到达该连通分量中的顶点，所以剩下的就是看分量是如何连接的。但是，我没有提出线性解决方案。

有什么提示吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:53:25.500

你的第一步是正确的。每个强连接的组件都可以用一个顶点替换，其中起始的可达顶点数是该组件中的元素数。代入运算后得到有向无环图。现在对于这些超级顶点中的每一个，我们想找出可以从它到达多少个顶点。一个想法是对这个图进行拓扑排序。在此操作之后，所有箭头都指向一个方向。不失一般性，我们可以假设它们指向右边，所以我们的图表或多或少看起来像这样：

```
a -> b ----> e -> f -> g
  \             /
    -> c -> d - 
```

对于每个顶点，我们都有它的起始计数器，这是我们从一个强连接组件组装顶点的第一阶段获得的。我们现在想做的是从右到左，每个顶点都有一组可以从它到达的顶点。我们需要的操作是快速合并这些集合。Find-Union 数据结构提供了帮助。您可以在通常情况下再添加一个字段`size`，`rank`该字段将存储可到达顶点的数量，并在`union`两组时更新它。

这将导致几乎线性的时间：阿克曼函数`O(n * alpha(n))`的`alpha(n)`倒数是非常非常小的。对于大数据，它不会大于`5`，因此您可以将其视为常数。

我想知道是否有人可以在没有`alpha`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-09T09:45:08.970

我认为第一个答案是不正确的。您可能能够从 scc 图中的儿子的可达性的联合中为每个节点创建可达的节点组，但是您需要制作儿子的组的副本才能做到这一点（否则你会弄乱他们的可达性）。因此，如果我没记错的话，复杂度是 n*n 最小值，或者实际上是 n * E。那是因为需要在 * 联合操作之前制作副本，所以你需要为每个节点遍历 n*(num of sons) ..这的复杂性是 n*E + n(alpha(n)) . 因此使用联合查找是完全多余的。您可以为每个节点使用 n 大小的数组。

# java - Java 对象拆解模式

> ID：16133330
> 
> 赞同：0
> 
> 时间：2013-04-21T16:18:39.897
> 
> 标签：java, oop, design-patterns

是否有任何标准方式/模式可以从对象中提取零碎信息？假设我有一个 json 字符串，其中包含我必须提取的几个类。我不能使用杰克逊直接提取它，因为为了获得所需的信息（如解密、解压缩等）需要进行很少的转换，我正在尝试查看是否可以将所有这些隐藏在一个类后面。

这是我打算这样做的方式，有没有更好的方法来实现这一点？只是想发表意见。

```
public class ExtractInformation {
    private final Object1 obj1;
    private final Object2 obj2;
          ....
    private final Object3 objn;

    public ExtractInformation(String jsonString) {
        // Extract all the information here and store locally
        obj1 = ...;
        objn = ...;
    }

    public getObect1() {
        return obj1l;
    }

    public getObject2() {
        return obj12;
    }
           ...
    public getObjectn() {
        return obj1n;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T16:26:48.847

我或多或少同意，只要这样做，您就可以将您的域类（不应命名为 ExtractInformation ！！！）与其数据存储在 json 字符串中的方式不可分割地连接起来。您可以创建 2 个单独的类：MyClass（POJO，您的域类）和 MyClassJsonExtractor（将用作 MyClass 的工厂的类）。并使用[Builder](http://www.javacodegeeks.com/2012/07/builder-design-pattern-in-java.html)模式创建 MyClass。

```
public class MyClass {
    private final Object1 obj1;
    private final Object2 obj2;
    private final Object3 obj3;

    private MyClass(MyClassBuilder builder) {
        this.obj1 = builder.obj1;
        this.obj2 = builder.obj2;
        this.obj3 = builder.obj3;
    }

    public getObj1() { return obj1; }
    public getObj2() { return obj2; }
    public getObj3() { return obj3; }

    public static class Builder {
        private final Object1 obj1;
        private final Object2 obj2;
        private final Object3 obj3;

        public Builder() {}

        public Builder setObj1(Object1 obj1) {this.obj1 = obj1; return this; }
        public Builder setObj2(Object2 obj2) {this.obj2 = obj2; return this; }
        public Builder setObj3(Object3 obj3) {this.obj3 = obj3; return this; }

        public MyClass build() {
            return new MyClass(this);
        }
    }

}

public class MyClassJSonExtractor {
    // make the as singleton, either by the old-fashioned way or by Spring
    public MyClass createMyClass(String jsonString) {
         return new MyClass.Builder().
             setObj1(...).
             setObj2(...).
             setObj3(...).
             build();
    }
} 
```

# javascript - 获取当前网址

> ID：16133340
> 
> 赞同：0
> 
> 时间：2013-04-21T16:19:11.113
> 
> 标签：javascript, sdk, firefox-addon-sdk

我正在寻找在 Firefox 中获取所选选项卡的当前 url，我有一个针对 contentURL 的 Firefox SDK 面板，并且我一直在使用 Javascript 来尝试获取当前 url；

```
window.content.location.href 
```

但不幸的是，除非我在我的 contentURL 页面上的任何其他页面上并且它什么都不显示，否则它不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:23:31.070

在 JavaScript 中：

```
window.location.href 
```

在 php 中：

```
$_SERVER["REQUEST_URI"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:23:24.647

你可以得到这样的网址

```
var url = require('sdk/tabs').activeTab.url; 
```

这仅适用于您的*附加代码*，而不适用于*内容脚本*。有关差异，请参阅[本指南](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/guides/two-types-of-scripts.html)。

如果您想从内容脚本触发查找和/或想在内容脚本中使用 URL，则必须[使用 "port" 进行通信](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/guides/content-scripts/using-port.html)。

这是一个示例，其中当前选项卡的 url 在单击按钮时显示在面板中。

lib/main.js（附加代码）：

```
const data = require('sdk/self').data;

var panel = require('sdk/panel').Panel({
    contentURL: data.url('panel.html'),
    contentScriptFile: data.url('panel.js')
});

panel.port.on('get url', function () {
    panel.port.emit('return url', require('sdk/tabs').activeTab.url);
});

panel.show(); 
```

data/panel.js（内容脚本）：

```
var button = document.getElementById('button');
var urlspan = document.getElementById('url');

button.addEventListener('click', function () {
    self.port.emit('get url');
});

self.port.on('return url', function (url) {
    urlspan.textContent = url;
}); 
```

数据/panel.html：

```
<!DOCTYPE html>
<html>
  <head>
        <meta charset="utf-8" />
    <title>panel</title>
  </head>
  <body>
    <button id="button">
      Get Current URL
    </button>
    <br>
    Current URL: <span id="url"></span>
  </body>
</html> 
```

# c++ - 未捕获从代码的特定部分抛出的异常

> ID：16133346
> 
> 赞同：0
> 
> 时间：2013-04-21T16:19:20.377
> 
> 标签：c++, exception-handling

我刚刚为我的 OpenGL + GLUT 游戏实现了一个基本的异常系统。我抛出退出游戏的异常处理得很好，以及其他一些断言异常，但是我试图通过删除图像文件夹来导致图像加载失败，并且该特定异常似乎没有被捕获。它会导致应用程序关闭并显示消息“此应用程序请求运行时以异常方式终止”。

这是处理所有异常的 try/catch 块，它是应用程序类的内联静态方法（它在头文件中，因为它是一个模板函数）：

```
#pragma once

#include "logging.hpp"
#include "utils.hpp"
#include "throwables.hpp"
#include <cassert>
#include <exception>

namespace core
{
    class application
    {
    public:
        static const char * const tag;

        template <class T>
        static int run(int argc, char *argv[], const int width, const int height,
            int x, int y, const char * const title) throw (const std::exception &)
        {
            int res = 0;
            logging * const log = logging::get();

            try
            {
                assert(log != NULL);
                log->setverbosity(logging::info);
                dbgcode(log->setverbosity(logging::verbose));

                T * const g = T::get();

                if (!g)
                {
                    log->wtf(tag, "run: g is NULL! are we out of memory?");
                    throw core::assertexception();
                }

                T::envinit(argc, argv);
                g->initialize(width, height, x, y, title);
                g->run();
            }
            catch(const core::exitexception &e)
            {
                // hopefully everything is deallocated properly this way
                log->i(tag, "run: exit message recieved");
                res = 0;
            }
            catch(const core::assertexception &e)
            {
                utils::unexpectederror(title);
                res = 1;
            }
            catch(const core::errorexception &e)
            {
                utils::error(title);
                res = 1;
            }

            log->i(tag, strfmt() << "exiting with code " << res);

            return res;
        }
    };
} 
```

这是抛出从未处理过的异常的代码（它在 g->run 中执行，所以它在 try 块中）：

```
void sprite::load(const char * const filename) throw (const assertexception &, const errorexception &)
{
    if (!filename) // this exception is handled perfectly
    {
        log->wtf(tag, strfmt() << "load: filename is NULL! what the hell did you pass me?" << img);
            throw assertexception();
    }

    fromtex = false;

    // generate and bind a DevIL image
    ilGenImages(1, &img);
    ilBindImage(img);

    // attempt to load the sprite as a DevIL image
    if (!ilLoadImage(filename)) // this exception is never caught even if I change this to if(true)
    {
        log->e(tag, strfmt() << "load: failed to load " << filename << ", image id = " << img);
        throw errorexception(); // never caught when thrown
    }

    ... 
```

这是我的 throwables.hpp / throwables.cpp，我在其中定义了所有自定义异常：

惠普：

```
#pragma once

#include <stdexcept>
#include <string>

namespace core
{
    class exception : public std::runtime_error
    {
    public:
        exception(const std::string &info);
    };

    class assertexception : public exception
    {
    public:
        assertexception();
    };

    class errorexception : public exception
    {
    public:
        errorexception();
    };

    class exitexception : public exception
    {
    public:
        exitexception();
    };
} 
```

cp:

```
#include "throwables.hpp"

namespace core
{
    exception::exception(const std::string &info)
        : std::runtime_error(info)
    {}

    // assertexception
    assertexception::assertexception()
        : exception("an assertion has occurred - check the log file")
    {}

    // errorexception
    errorexception::errorexception()
        : exception("an error has occurred - check the log file")
    {}

    // exitexception
    exitexception::exitexception()
        : exception("exit message recieved")
    {}
} 
```

编辑：另外，这里是我调用的那些 utils::*error 函数：

```
void unexpectederror(const wxString &gamename)
{
    // TODO: make everything unicode friendly
    // TODO: get all strings from xmls for easy localization
    wxSafeShowMessage(gamename + wxT(" - Unexpected error"),
        wxT("An unexpected error has occurred. Please report this bug")
        wxT(" and attach your lastsession.log file"));
}

void error(const wxString &gamename)
{
    wxSafeShowMessage(gamename + wxT(" - Error"),
        wxT("An error has occurred. Please check your lastsession.log")
        wxT(" for more info and check for <error> messages. Please report it if you believe it is a bug"));
}

void error(const wxString &title, const wxString &text)
{
    wxSafeShowMessage(title, text);
} 
```

顺便说一句，std::exception 被 main 捕获：

```
#include "dungeoncrawler.hpp"
#include "application.hpp"

using namespace core;

int main(int argc, char *argv[])
{
    static const char * const tag = ".main";
    static const char * const title = "DungeonCrawler";

    try
    {
        return application::run<dungeoncrawler::game>(argc, argv, 800, 450, -1, -1, title);
    }
    catch(const std::exception &e)
    {
        utils::unhandledexception(title, e);
        logging::get()->wtf(tag, "unhandled exception, exiting with code 0");
        return 0;
    }

    assert(false); // this code should never be reached
    logging::get()->wtf(tag, "what?! this code should be unreachable! exiting with code 0");
    utils::error(wxString(title), wxT("Unexpected behaviour occurred. Please report this bug to the developer"));

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:29:47.243

问题在于如何声明这个函数。

```
void sprite::load(const char * const filename) throw (const assertexception &, const errorexception &) 
```

该函数承诺只抛出异常`assertexception`和`errorexception`.

如果该函数抛出任何其他异常，[`std::unexpected()`](http://en.cppreference.com/w/cpp/error/unexpected)将被调用并终止您的程序。例如，如果标准库或任何其他库不知道这些异常类，就会发生这种情况`throw`。

删除该`throw`子句以修复它。

请参阅[此 Herb Sutter 文章](http://www.gotw.ca/publications/mill22.htm)以了解更多信息。

# java - 从 Socket 获取域

> ID：16133349
> 
> 赞同：0
> 
> 时间：2013-04-21T16:19:32.957
> 
> 标签：java, sockets, networking

我正在尝试从套接字获取用户连接到的域（例如 test.somesite.com），这可能吗？我想要这样做的原因是根据用户的来源重定向用户。我从另一个线程中运行 serverSocket.accept() 获取套接字

我努力了：

```
clientSocket.getLocalAddress().getHostAddress();
clientSocket.getHostAddress().toString(); 
```

他们都只是打印我自己的本地/内部 IP 地址。我怎样才能得到他们从中获得的域？

编辑：我认为这是可能的，因为例如，在 Apache Web 服务器中，您可以在 httpd.conf 文件中执行此操作：

```
<VirtualHost *:80>
  ServerName something.something.com
  ProxyPass               /       http://localhost:8080/
  ProxyPassReverse        /       http://localhost:8080/
</VirtualHost> 
```

这将在端口 80 上侦听，检查它们来自的 url 是否是 something.something.com，如果是，它将重定向到端口 80。也许我完全错了，因为我是 Java 网络的新手，但请让我知道您是否有任何提示，即使我必须重写我的代码也可以。

编辑 2：我发现这是不可能的，因为目标应用程序在连接之前将域名解析为 IP 地址。感谢您的所有帮助

凯尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:41:40.713

尝试这个：

```
clientSocket.getInetAddress().getHostName() 
```

**更新：**或者，试试这个：

```
((InetSocketAddress)clientSocket.getRemoteSocketAddress()).getAddress().getHostName() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:24:48.787

我认为没有 DNS 就无法获取域，但可以使用 clientSocket 中的[getRemoteSocketAddress()](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html#getRemoteSocketAddress%28%29)方法来获取客户端 IP 地址。

```
clientSocket.getRemoteSocketAddress(); 
```

# windows-server-2008 - 重置 ACL 和设置所有者的单个命令

> ID：16133350
> 
> 赞同：1
> 
> 时间：2013-04-21T16:19:36.507
> 
> 标签：windows-server-2008, acl, file-permissions, ntfs

我正在尝试重置 Windows NTFS 共享上的所有文件权限和 ACL。以下命令应该这样做

```
icacls "D:\mydata" /T /Q /C /RESET 
```

但我不断收到`Access is denied`一些子文件夹的错误。

所以我继续前进，认为我需要先设置管理员权限：

```
icacls "D:\mydata" /grant administrator:F /T /C 
```

但是我仍然得到`Access is denied`

**所以这是我的问题：** 如何删除`all`ACLS、`all`权限、`all`所有者，以便我可以从头开始分配权限和 ACLS。我想运行一个命令以递归方式重置事物，以便我的管理员帐户可以再次应用权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T21:13:47.567

您需要拥有该对象的所有权。如果您有专业版或类似版本的 Windows，请从命令行获取 - 转到属性、安全性、高级、所有者、更改所有者（我希望我没有搞砸），然后单击几十次，您将获得该对象。现在您可以为自己添加特权。

棘手的部分：如果某个对象由某人（例如 TrustedInstaller 或 FancyVirus）拥有，而您无权访问该对象，但您希望保留其当前所有者......在这种情况下 - 尝试 unix，因为我无法找到任何答案（除非对 NTFS 进行二进制访问）。

祝你好运

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-26T20:54:06.913

```
Add-PSSnapin Quest.ActiveRoles.ADManagement
$Folders = "\\server\share\"
$Folder = Get-ChildItem $Folders
FOREACH ($User in $Folder) {
    TAKEOWN /F $Folders$User /R /D Y
    $Username = Get-QADuser $User
    $Username = $Username.SamAccountName
    $FullPath = "$Folders" + "$Username"
    ICACLS ("$FullPath") /grant '"Domain Admins":(OI)(CI)F' /T
    ICACLS ("$FullPath") /grant ("$Username" + ':(OI)(CI)F') /T
} 
```

[http://tomandersonpro.net/ntfs-permissions-with-powershell/](http://tomandersonpro.net/ntfs-permissions-with-powershell/)

# python-3.x - 为什么程序不能识别pygame？

> ID：16133352
> 
> 赞同：0
> 
> 时间：2013-04-21T16:19:47.977
> 
> 标签：python-3.x, pygame

我已经下载并安装了 pygame，我知道它在哪里（/usr/lib/python2.7/dist-packages）。我试图让由“import pygame”行组成的程序来识别它的存在，但我不断收到“ImportError：没有名为 pygame 的模块”。我将如何让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:28:37.210

pygame 的安装包与 python 3.x 不兼容但是，绝大多数 pygame 模块已经移植到 python 3.x，所以实际上只需将 Pygame 模块移动到你的 python 3.x dist-packages .

用于 Numeric 的 scrap、_movie、surfarray 和 threads 模块是尚未移植的模块。

# android - 无法创建处理程序…Looper.prepare()

> ID：16133356
> 
> 赞同：0
> 
> 时间：2013-04-21T16:20:29.183
> 
> 标签：android, timer

我正在编写一个客户端服务器程序，该客户端将其位置提供给服务器，然后服务器显示它。我有一门课来获取位置的纬度和经度。我有一个计时器每 2 秒检索一次位置。但我收到此错误：无法在未调用 Looper.prepare() 的线程内创建处理程序

这是我在 onCreate 方法中的计时器：

```
time.scheduleAtFixedRate(new TimerTask() {

@Override
public void run() {

GetLocation();

}
}, 0, sampling_interval);
} 
```

这是 GetLocation 方法：

```
private void GetLocation(){

    gps = new GPSTracker(MainActivity.this);    
    // check if GPS enabled
    if(gps.canGetLocation()){

        double latitude = gps.getLatitude();
        double longitude = gps.getLongitude();

        Log.d("Latitude", Double.toString(latitude));

    }else{

        gps.showSettingsAlert();
    }
} 
```

问题是：gps = new GPSTracker(MainActivity.this); 如果我把这条线放在 MainActivity 里面没有问题，但问题是我没有得到更新的位置，我只是得到相同的位置，因为它只创建了一次。所以这条线应该在 GetLocation() 方法中，每次计时器调用它时我都可以获得更新的位置。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:39:59.800

这是 Android 的座右铭：避免`Timer`/`TimerTask`使用`Handler`。

# java - 在android中恢复Activity时维护一个变量

> ID：16133357
> 
> 赞同：0
> 
> 时间：2013-04-21T16:20:29.400
> 
> 标签：java, android

我正在开发一个列表应用程序，它根据行 ID 从数据库中获取信息。在此页面上还有一个添加事务按钮，单击该按钮会加载新活动。

如果用户点击顶部导航上的主页按钮，但当它返回我的变量尚未保存时，此活动使用 NavUtils 类返回列表。我是否可以在两个屏幕之间保持此变量完整，甚至可以使用 NatUtils.navigateUpFromSameTask() 将其传回？

```
 public class DisplayAccountActivity extends Activity {

    private long account_id;       

    @Override
    protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_display_account);
            // Show the Up button in the action bar.
            setupActionBar();

            // Receive the intent
            Intent intent = getIntent();
            account_id = intent.getLongExtra(MainActivity.ACCOUNT_ID, 0);
    }

    public void addTransaction (View view) {
            Intent intent = new Intent(this, AddTransactionActivity.class);
            startActivity(intent);
    }

    /**
     * Set up the {@link android.app.ActionBar}, if the API is available.
     */
    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    private void setupActionBar() {
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
                    getActionBar().setDisplayHomeAsUpEnabled(true);
            }
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
            switch (item.getItemId()) {
            case android.R.id.home:
                    NavUtils.navigateUpFromSameTask(this);
                    return true;
            }
            return super.onOptionsItemSelected(item);
    }

    @Override
    protected void onResume() {
            super.onResume();
            System.out.println("On resume the ID is: "+this.account_id);
    }

    @Override
    protected void onPause() {             
            super.onPause();
            System.out.println("On pause the ID is: "+this.account_id);
    }

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:22:18.830

您可以将变量设为静态。然后，您可以在需要重置它时重置它，例如在 onCreate 中，如果这是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:23:29.200

您可以使用意图在活动之间传递数据。

在您的第一个活动中：

```
Intent i= new Intent("com.example.secondActivity");
// Package name and activity
// Intent i= new Intent(MainActivity.this,SecondActivity.Class);
// Explicit intents
i.putExtra("key",mystring);
// Parameter 1 is the key
// Parameter 2 is your value
startActiivty(i); 
```

在您的第二个活动中检索它：

```
Bundle extras = getIntent().getExtras();
if (extras != null) {
String value = extras.getString("key");
//get the value based on the key
} 
```

编辑：

如果您希望值保持不变，请使用共享首选项

[http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

# ruby-on-rails - make.exe：GCC：找不到命令

> ID：16133359
> 
> 赞同：3
> 
> 时间：2013-04-21T16:20:37.027
> 
> 标签：ruby-on-rails, ruby, windows, gcc, bcrypt

我正在尝试安装 BCRYPT ......但我需要编译它。我正在按照这篇文章第一个答案的说明进行操作

[没有要加载的文件——bcrypt_ext（通过设计）](https://stackoverflow.com/questions/3900180/no-such-file-to-load-bcrypt-ext-via-devise)

我在 bcrypt-ruby-3.0.1-x86-mingw32\ext\mri> 文件夹中并输入

```
PS C:\Ruby200\lib\ruby\gems\2.0.0\gems\bcrypt-ruby-3.0.1-x86-mingw32\ext\mri> ruby .\extconf.rb
creating Makefile`
PS C:\Ruby200\lib\ruby\gems\2.0.0\gems\bcrypt-ruby-3.0.1-x86-mingw32\ext\mri> make
compiling bcrypt_ext.c
make.exe": gcc: Command not found
make.exe": *** [bcrypt_ext.o] Error 127
PS C:\Ruby200\lib\ruby\gems\2.0.0\gems\bcrypt-ruby-3.0.1-x86-mingw32\ext\mri> 
```

我安装了 devkit，将它添加到我的路径变量中。

GCC 已安装并被识别：

```
gcc --version
gcc.exe (rubenvb-4.7.2-release) 4.7.2

make --version
GNU Make 3.81

ruby --version
ruby 2.0.0p0 (2013-02-24) [i386-mingw32] 
```

我不明白为什么它说在这种情况下运行时找不到命令 GCC。

非常感谢您的帮助，我相信这很简单。我正在运行 Power Shell、Windows 8，并使用测试良好的 DevKit-mingw64-32-4.7.2-20130224-1151-sfx.exe

# jquery - Jquery Masonry 不能在本地工作，但在 jsFiddle 工作得很好

> ID：16133360
> 
> 赞同：1
> 
> 时间：2013-04-21T16:20:41.353
> 
> 标签：jquery, jquery-masonry

我在让 Desandro 的 Jquery Masonry 在本地工作时遇到问题。

我的意思是：这件事在 jsFiddle ( [http://jsfiddle.net/pozvolte/dwA5G/14/](http://jsfiddle.net/pozvolte/dwA5G/14/) ) 上运行良好，但是当我尝试在本地启动一个具有相同代码的 HTML 文件时——好吧，它没有。我尝试用 Chrome 26 和 Firefox 20 打开它。

**HTML**

```
<div id="container">
<div class="item">
    <a href="#bosco">
    <img src="http://www.promisedlandblog.com/wp-content/uploads/2010/05/noam_chomsky.jpg">
    </a>
</div>
<div class="item">
    <a href="#berez">
    <img src="http://metrouk2.files.wordpress.com/2013/03/ay_106888896.jpg">
    </a>
</div>
<div class="item">
    <a href="#headcrab">
    <img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQAu_KOgafFo71gN5pV3UBGfxUVclnC8vZuZYnGDK0uaD0PNK7L">
    </a>
</div>
<div class="item">
    <a href="#nrktk">
    <img src="http://assets2.lookatme.ru/assets/event_image-image/72/c0/981165/article_image-image-article.jpg">
    </a>
</div>
<div class="item">
    <a href="#utekai">
    <img src="http://www.budyon.org/wp-content/uploads/2012/02/mumiitroll.jpg">
    </a>
</div>
<div class="item">
    <a href="#troll">
    <img src="http://rusrep.ru/images/texts/1002/10023053_pic1.jpeg">
    </a>
</div> 
```

**CSS**

```
div#container {
    width:100%;
    margin:25px;
}

div.item {
    width:240px;
    margin:10px;
    float:left;
}

div.item img {
    width:240px;
} 
```

**Javascript**

```
 $(function(){
    $('#container').masonry({
      itemSelector: '.item'
    });
  }); 
```

（当然还有 JQuery 1.6 和砌体脚本，从 desandro.com 加载。）

任何帮助深表感谢。

**更新**

在 html 文件中看到的脚本。

```
<script src="http://masonry.desandro.com/jquery.masonry.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
//<![CDATA[ 
$(window).load(function(){
 $(function(){

    $('#container').masonry({
      itemSelector: '.item'
    });

  });
});//]]>  
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T16:57:35.767

你在 jQuery 之前包括了砌体。按顺序包括它们：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://masonry.desandro.com/jquery.masonry.min.js"></script> 
```

由于它是一个 jQuery 插件，它需要在它之前加载 jQuery 才能工作。

# excel - 如何在excel中为范围使用变量名

> ID：16133364
> 
> 赞同：2
> 
> 时间：2013-04-21T16:21:22.800
> 
> 标签：excel, excel-formula

有没有办法使用变量作为范围名称？

例如，我有几天的数据。我`VLOOKUP(5,_day12,3)`用来从第 12 天的表格中提取一些信息。我需要设置`_day12`为另一个已定义的范围，例如`_day19`，通过替换`_day12`为变量，我们将其称为单元格 A1 中的范围。所以公式应该是这样的`VLOOKUP(5,Range,3)`。我将单元格 A1 的内容设置为`_day12`并得到`#NA`. 如何才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T16:23:46.860

是的。利用`INDIRECT`

```
=VLOOKUP("aaa",INDIRECT(C5),1,0) 
```

`C5`表名存储在哪里。

![在此处输入图像描述](https://i.stack.imgur.com/37EYn.png)

# iphone - 带加载的无限垂直滚动视图

> ID：16133365
> 
> 赞同：0
> 
> 时间：2013-04-21T16:21:22.823
> 
> 标签：iphone, objective-c, uiscrollview, infinite-scroll

有没有无限垂直滚动视图的例子，比如 Facebook 和 9gag 应用程序。当您滚动它时，它会显示例如图片，但它会在 10 张图片显示刷新/加载指示符后停止，然后加载新图片（因此它不必在应用程序启动时下载所有图片）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:47:59.677

这个[了不起的开发者让添加一个](http://samvermette.com/)`UIScrollView` [类别](https://github.com/samvermette/SVPullToRefresh)的无限滚动变得很容易。你应该试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:43:49.940

当用户向上滚动时，它会调用以下方法

```
 #pragma mark -
 #pragma mark - Scroll View Delegate Method

    - (void) scrollViewDidScroll:(UIScrollView *)scrollView {
       if (scrollView == scrollObj) {
            CGFloat scrollPosition = scrollObj.contentSize.height - scrollObj.frame.size.height - scrollObj.contentOffset.y;
            if (scrollPosition < 30)
            {
                if ((!spinnerBottom.isAnimating) ) {
                    [spinnerBottom startAnimating];
                    [self getAPICall]; //your apicall function 
                }
            }
        }
    } 
```

# model-view-controller - 将 MVC 网格绑定到具有大量数据的存储过程

> ID：16133368
> 
> 赞同：1
> 
> 时间：2013-04-21T16:21:43.923
> 
> 标签：model-view-controller, telerik, grid

# 将 MVC 网格绑定到具有大量数据的存储过程：

我想将 MVC 网格绑定到从 SP 返回的对象结果

通常，网格请求只需要向用户显示数据，当绑定到具有大量数据的表时，这将非常好，这可以让网格快速并且其性能会很好。

我有两种方法将 MVC 网格与 SP 绑定：

1.  绑定到 SP 而不使用`.ToList()`它会给我一个错误“查询的结果不能多​​次枚举”。

2.  绑定到 sp using`.ToList()`将解决该错误，但它会首先从数据库中加载所有记录，性能会很差，并且网格加载、分页、排序和过滤会非常慢。

请告诉我一个将 MVC 网格与 SP 绑定的解决方案，它返回大量数据并具有良好的性能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T17:09:56.097

我过去使用过 jqgrid，jqgrid 实现了分页，因此并非网格的所有内容实际上都一次显示，您选择每页的行数，jqgrid 会自动将导航连接到您的控制器。网络上有很多这样的例子。如果您单击下一页，它将检索该页面的适当数据，依此类推。

jqgrid 页面在加载数据方面有很多示例来说明这一点：[http ://www.trirand.com/blog/jqgrid/jqgrid.html，这里是另一个页面，它讨论了如何使用 mvc](http://www.trirand.com/blog/jqgrid/jqgrid.html) [http](http://www.codersource.net/AspNet/ASPNetAdvanced/jqGridPaginginaspnetmvc.aspx)在服务器端实现它[://www.codersource.net/AspNet/ASPNetAdvanced/jqGridPaginginaspnetmvc.aspx](http://www.codersource.net/AspNet/ASPNetAdvanced/jqGridPaginginaspnetmvc.aspx)，我敢肯定，如果你环顾四周，你会发现很多关于如何使用这种方法的信息。

最后，我通常会避免向用户显示大量数据，主要是因为人类很难理解超过 100 行的数据有办法在其中进行进一步搜索。所以我宁愿尝试缩小数据大小，给他们一种进一步过滤它的方法，但这并不总是可能的。

希望这可以帮助。

# mysql - 从 id 和以下 id 的两个表中获取结果

> ID：16133370
> 
> 赞同：3
> 
> 时间：2013-04-21T16:21:46.547
> 
> 标签：mysql, sql

因为我很生气，有时我以前​​问过错误的问题。现在这就是我想要完成的。

我试图从中获取值`user.id = 1`以及关注的用户的值`user.id = 1`。

但我醚得到的结果`user.id 1`或在这种情况下跟随`following.follow_id = 2`。有任何想法吗 ？

我创建了一个用于显示的 SQLfiddle。如您所见，我得到的唯一结果是来自 user_one。

[http://sqlfiddle.com/#!2/6a39f/1](http://sqlfiddle.com/#!2/6a39f/1)

```
SELECT user.email, 
user.username, 
tweets.message, 
tweets.date, 
userdetails.profile_img, 
userdetails.firstname, 
userdetails.lastname, 
following.id, following.user_id, 
following.follow_id
FROM user
JOIN userdetails ON user.id = userdetails.user_id
JOIN tweets ON userdetails.user_id = tweets.user_id
LEFT JOIN following ON user.id = 1
WHERE following.user_id = 1 
```

表：

**推文**

> 用户 ID | 编号 | 日期 | 信息

**用户**

> 编号 | 电子邮件 | 密码 | 用户名

**用户详情**

> 编号 | 名字 | 姓氏 | profile_img | 用户 ID | 关于

**下列的**

> 编号 | 用户 ID | follow_id

在这种情况下，下表具有价值

```
 user_id = 1 and follow_id = 2 
```

概括 。

```
User_id = 1 is following follow_id = 2 
```

但我只从两者中得到结果，`user_id = 1`而不是从两者中得到结果。谢谢。

基本上我试图结合这两个查询。

查询被关注用户的结果。

```
SELECT user.email, 
user.username, 
tweets.message, 
tweets.date, 
userdetails.profile_img, 
userdetails.firstname, 
userdetails.lastname, 
following.id, following.user_id, 
following.follow_id
FROM user
JOIN userdetails ON user.id = userdetails.user_id
JOIN tweets ON userdetails.user_id = tweets.user_id
JOIN following ON following.follow_id
WHERE following.follow_id = tweets.user_id AND following.user_id  = '1' ORDER BY tweets.date DESC 
```

以及获取用户 1 值的查询

```
SELECT user.email, 
user.username, 
tweets.message, 
tweets.date, 
userdetails.profile_img, 
userdetails.firstname, 
userdetails.lastname
FROM user
JOIN userdetails ON user.id = userdetails.user_id
JOIN tweets ON userdetails.user_id = tweets.user_id
WHERE user.id = '1'  ORDER BY tweets.date DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:04:04.293

您似乎想要获取 ID 为 1 或 ID 为一个或多个其他值的数据。所以，你可以从这个开始

```
SELECT user.email, 
  user.username, 
  tweets.message, 
  tweets.date, 
  userdetails.profile_img, 
  userdetails.firstname, 
  userdetails.lastname, 
  following.id, following.user_id, 
  following.follow_id
FROM user
JOIN userdetails ON user.id = userdetails.user_id
JOIN tweets ON userdetails.user_id = tweets.user_id
WHERE user.id = 1
  OR user_id IN
      (
       SELECT follow_id
       FROM following
       WHERE user.id = following.user_id
       ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T21:28:44.797

这是我（略微）修改`bobs`的答案版本（添加`LEFT OUTER JOIN`并修改了子查询）：

```
SELECT user.id,
  user.email, 
  user.username, 
  tweets.message, 
  tweets.date, 
  userdetails.profile_img, 
  userdetails.firstname, 
  userdetails.lastname, 
  following.id, following.user_id, 
  following.follow_id
FROM user
LEFT JOIN following ON user.id = following.user_id 
JOIN userdetails ON user.id = userdetails.user_id
JOIN tweets ON userdetails.user_id = tweets.user_id
WHERE user.id=1 OR 
                user.id IN (SELECT follow_id 
                            FROM following 
                            WHERE following.user_id = 1); 
```

这是我添加了第三个用户的[SQL Fiddle 。](http://sqlfiddle.com/#!2/b7ed2/10)请查看它是否适用于您的真实数据集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T16:29:13.480

如果您将最后两行重写为

```
LEFT JOIN following ON following.user_id = user.id
WHERE user.id = 1 
```

我认为您的下表左连接的 ON 子句不会像现在这样工作。

# iphone - 具有字母间距的子类 UILabel 不适用于重音字母

> ID：16133371
> 
> 赞同：0
> 
> 时间：2013-04-21T16:21:46.953
> 
> 标签：iphone, ios, uilabel, uifont

我在 SO 上找到了这个代码，它可以帮助我在 UILabel 中有一个字母间距，这是代码：

```
- (void) drawRect:(CGRect)rect
{
// Drawing code
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSelectFont (context, [self.font.fontName cStringUsingEncoding:NSASCIIStringEncoding], self.font.pointSize, kCGEncodingMacRoman);
CGContextSetCharacterSpacing(context, 2);
CGContextSetFillColorWithColor(context, [[UIColor clearColor] CGColor]);
CGAffineTransform myTextTransform = CGAffineTransformScale(CGAffineTransformIdentity, 1.f, -1.f );

CGContextSetTextMatrix (context, myTextTransform);

// draw 1 but invisbly to get the string length.
CGPoint p =CGContextGetTextPosition(context);
float centeredY = (self.font.pointSize + (self.frame.size.height- self.font.pointSize)/2)-2;
CGContextShowTextAtPoint(context, 0, centeredY, [self.text cStringUsingEncoding:NSASCIIStringEncoding], [self.text length]);
CGPoint v =CGContextGetTextPosition(context);

// calculate width and draw second one.
float width = v.x - p.x;
float destX = 0;

// calculate X position based on alignment
if([self textAlignment] == UITextAlignmentLeft){
    destX = 0;
}else if([self textAlignment] == UITextAlignmentCenter){
    destX = (self.frame.size.width- width)/2;
}else if([self textAlignment] == UITextAlignmentRight){
    destX = self.frame.size.width - width;
}
CGContextSetFillColorWithColor(context, [self.textColor CGColor]);
CGContextShowTextAtPoint(context, destX, centeredY, [self.text cStringUsingEncoding:NSASCIIStringEncoding], [self.text length]);
} 
```

问题是对于像èàòé 这样的重音字母，uilabel 是空的，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:30:51.347

您在加载字体时可能使用了错误的编码。尝试更改此行：

```
CGContextSelectFont (context, [self.font.fontName cStringUsingEncoding:NSASCIIStringEncoding], self.font.pointSize, kCGEncodingMacRoman); 
```

改为使用此编码：

```
 CGContextSelectFont (context, [self.font.fontName cStringUsingEncoding:NSASCIIStringEncoding], self.font.pointSize, kCGEncodingFontSpecific); 
```

然后在输出字符串的位置使用此编码`NSASCIIStringEncoding`，根据 Apple 文档，该编码绝对不包含您想要的字符。因此，即使您使用正确的编码读取字符集，您也不会使用它来输出它。

因为来自 Apple Docs 的编码用于输出字符串：

```
 NSASCIIStringEncoding
 Strict 7-bit ASCII encoding within 8-bit chars; ASCII values 0…127 only.
 Available in iOS 2.0 and later. 
```

# html - Delphi-文本中的搜索和检索值

> ID：16133376
> 
> 赞同：0
> 
> 时间：2013-04-21T16:22:32.290
> 
> 标签：html, delphi, parsing, html-parsing

我将页面下载到 memo1.text，在本文中我需要将一些值提取到变量中。下载代码的必要部分：

```
<tr>
<td style="text-align: left;">Nazwa1</td>
<td style="text-align: right;">    88.</td>
<td style="text-align: center;"> 20%</td>
<td style="text-align: right;">86</td>
<td style="text-align: right;">108 h</td>
<td style="text-align: center;">     1.00000</td>
<td style="text-align: right;">8974296.0</td>
<td style="text-align: center;"> 1.00</td>
</tr>
<tr>
<td style="text-align: left;">Nazwa2</td>
<td style="text-align: right;">   282</td>
<td style="text-align: center;">---</td>
<td style="text-align: right;">261</td>
<td style="text-align: right;">1:26 h</td>
<td style="text-align: center;">     0.00212</td>
<td style="text-align: right;"> 312001.9</td>
<td style="text-align: center; color: #00cc00; "> 1.02</td>
</tr>
<tr>
<td style="text-align: left;">Nazwa3</td>
<td style="text-align: right;">  2747</td>
<td style="text-align: center;">100%</td>
<td style="text-align: right;">1833</td>
<td style="text-align: right;">0:27 h</td>
<td style="text-align: center;">     0.02239</td>
<td style="text-align: right;">    364.4</td>
<td style="text-align: center; color: #00cc00; "> 1.19</td>
</tr>
<tr>
<td style="text-align: left;">Nazwa4</td>
<td style="text-align: right;">   413.6</td>
<td style="text-align: center;">100%</td>
<td style="text-align: right;">281</td>
<td style="text-align: right;">0:6 h</td>
<td style="text-align: center;">     0.00358</td>
<td style="text-align: right;">  32812.1</td>
<td style="text-align: center; color: #cc0000; "> 0.78</td>
</tr> 
```

我必须从“Nazwa3”表中提取变量值“1.19”，表中的所有内容都是变量，只有名称“nazwa3”是常量。

```
uses
  regexpr;

function searchandextract(InputStr : string) : string;
var
  R : TRegExpr;
begin
  Result := '';
  R := TRegExpr.Create;
  try
    R.Expression := '<td style="text-align: left;">Nazwa3</td>(.+?)"> ([0-9\.]+)</td>(.+?)</tr>';
    if R.Exec(InputStr) then
    begin
      Result := R.Match[2];
    end;
  finally
    R.Free;
  end;
end;

  Label1.Caption := searchandextract(Memo1.Text); 
```

但是这个函数的结果是空的，我不知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:25:31.193

不要使用正则表达式来解析 HTML 文件，而是查看 HTML 解析器库，在 delphi 中您可以使用[DIHtmlParser](http://www.yunqa.de/delphi/doku.php/products/htmlparser/index)或[htmlp](http://htmlp.sourceforge.net/)。

# javascript - 通过链接将文本插入文本区域

> ID：16133391
> 
> 赞同：0
> 
> 时间：2013-04-21T16:24:02.560
> 
> 标签：javascript, jquery, text, insert, textarea

这是我的代码：

```
<a href="">Test 1</a> Clicking this will add "Thank you" to textarea<br/>
<a href="">Test 2</a> Clicking this will add "Good luck" to textarea<br/>

<textarea rows="5" cols="40" name="replycontent" id="replycontent">Hello World</textarea> 
```

我想通过单击链接在文本区域的末尾插入文本。因此，如果您单击`Test 1`链接，它将插入`Thank you`等等。该解决方案需要与所有浏览器（不包括 IE6）兼容。

这是一个[小提琴](http://jsfiddle.net/Gcaqe/1/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T16:28:00.410

设置属性数据文本 fot 链接并尝试：

```
<a href="" data-text="Thank you">Test 1</a> Clicking this will add "Thank you" to textarea<br/>
<a href="" data-text="Good luck">Test 2</a> Clicking this will add "Good luck" to textarea<br/>

<textarea rows="5" cols="40" name="replycontent" id="replycontent">Hello World</textarea> 
```

javascript:

```
$("a[data-text]").click(function(){
  $("#replycontent").val($(this).attr("data-text"));
  return false;
}) 
```

[http://jsfiddle.net/ZqJVN/](http://jsfiddle.net/ZqJVN/)

**更新：**

对于 textarea 中的添加（不替换文本）：

```
$("a[data-text]").click(function(){
   var value = $("#replycontent").val();
   $("#replycontent").val(value+$(this).attr("data-text"));
   return false;
 }) 
```

[http://jsfiddle.net/Vxeye/](http://jsfiddle.net/Vxeye/)

通过评论更新：在**新行**中粘贴文本：http : [//jsfiddle.net/hkEmn/](http://jsfiddle.net/hkEmn/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T16:37:51.990

使用 HTML5 的数据属性和 click() 事件。我添加了一个类来`<a>`标记特定于选择器。

**HTML**

```
<a href="#" class="aClass" data-text="Thank You">Test 1</a> Clicking this will add "Thank you" to textarea<br/>
<a href="#" class="aClass" data-text="Good Luck">Test 2</a> Clicking this will add "Good luck" to textarea<br/> 
```

**JQUERY 更新为评论**

```
jQuery('.aClass').click(function(e){
  e.preventDefault(); //to prevent the default behaviour of a tag 
  var val = jQuery('#replycontent').val(); //get prvious value
  jQuery('#replycontent').val(val + "\r\n" + jQuery(this).data('text')); //replace it.. ' ' so that there isspace beween the added text
}); 
```

**更新**

```
<a href="#" class="aClass">Test 1</a> Clicking this will add "Thank you" to textarea<br/>
<a href="#" class="aClass" >Test 2</a> Clicking this will add "Good luck" to textarea<br/> 
```

**jQuery**

```
jQuery('.aClass').click(function(e){
   e.preventDefault(); //to prevent the default behaviour of a tag 
   var val = jQuery('#replycontent').val(); //get prvious value
   if(jQuery(this).text() == 'Test 1'){
       jQuery('#replycontent').val(val + 'Thank You ');
   }else{
       jQuery('#replycontent').val(val + 'Good Luck ');
   }
}); 
```

[在这里摆弄](http://jsfiddle.net/Gcaqe/11/)

[拨弄新线](http://jsfiddle.net/bipen/Gcaqe/14/)

[摆弄两个例子](http://jsfiddle.net/Gcaqe/13/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T16:39:20.090

您可以将`span`标签添加到要附加的特定单词：

```
<a href="">Test 1</a> Clicking this will add "<span>Thank you</span>" to textarea<br/>
<a href="">Test 2</a> Clicking this will add "<span>Good luck</span>" to textarea<br/> 
```

然后你可以使用 append()：

```
$("a").on('click',function(e) {
    e.preventDefault();
   $("#replycontent").append($(this).next('span').text() + ' ');
}) 
```

**[小提琴](http://jsfiddle.net/wAAPS/)**

* * *

或者更好的是，您可以为锚点使用 HTML5 数据属性：

```
<a href="" data-text="Thank you">Test 1</a> Clicking this will add "Thank you" to textarea<br/>
<a href="" data-text="Good luck">Test 2</a> Clicking this will add "Good luck" to textarea<br/> 
```

那么你可以这样做：

```
$('a').click(function(e){
     e.preventDefault(); 
     var val = $('#replycontent').val();
     $('#replycontent').val(val + $(this).data('text') + ' ');
}); 
```

**[小提琴](http://jsfiddle.net/wAAPS/1/)**

* * *

**编辑**

如果您想在将新值附加到您的 时添加新行`textarea`，则只需`\n`与附加值一起使用：

```
$('#replycontent').val(val + '\n' + $(this).data('text')); 
```

**[更新小提琴](http://jsfiddle.net/wAAPS/2/)**

# c++ - C++ 继承函数中的默认操作

> ID：16133392
> 
> 赞同：2
> 
> 时间：2013-04-21T16:24:07.297
> 
> 标签：c++, visual-c++, overriding

假设我有一个名为的抽象基类`Base`，它继承了另一个名为的类`Rectangle`（w/c 具有 x、y、w、h 的属性）

```
//Base.h

class Base abstract : public Rectangle
{
public:

    Base();

    void Show()
    {

        if (!visible) return;

        //draw the stuff here.

    }

    virtual void PerformTask() = 0;

protected:

    bool visible;
    bool enable;
    //other member variables

}; 
```

对于所有继承 this 的类`Base`，它必须首先实现这个简短的操作：

```
void OtherClass1::PerformTask()
{

    if (!enable) return; // <- this one I am referring to.

    //else, proceed with the overriden operation

    //...
} 
```

中`PerformTask()`，它是否可以进行默认操作，因为我不会在其所有实现中再次重新键入它，但同时会被覆盖并`short operation`首先执行并保留？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T16:25:47.963

是的，这是可以做到的；只需创建一个调用*实际*覆盖函数`PerformTask`的非虚拟函数：

 *```
// In Base:
void PerformTask() {
    if (not enabled) return;

    PerformTaskImpl();
}

virtual void PerformTaskImpl() = 0; 
```

…然后`PerformTaskImpl`在派生类中重写。

这实际上是一种很常见的模式。*

# zend-framework2 - Zend 框架 2 动作助手？

> ID：16133393
> 
> 赞同：-1
> 
> 时间：2013-04-21T16:24:16.797
> 
> 标签：zend-framework2

我正在将 ZF1 应用程序迁移到 ZF2，这是控制器中使用**操作帮助**程序类 UserBuilder 的代码：

```
$userBuilder = $this->userBuilder; 
```

目前该页面抱怨：

```
Notice: Undefined property: Stock\Controller\ScreenerController::$userBuilder 
```

从<[推荐的项目目录结构](https://zf2.readthedocs.org/en/release-2.1.4/ref/project.structure.html)>可以看到目录application/controllers/helpers依然存在。

我在 Zend Framework 1 中有很多控制器动作助手。我很好奇 Zend Framework 2 中是否有一些概念？以及如何迁移它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:16:20.630

很久以前，我在莫斯科的 ZFCon 2012 上看过[Enrico Zimuel](https://stackoverflow.com/users/2028814/ezimuel)的演讲，在你的管子里，我找不到那个链接，

但我可以在幻灯片共享中找到他的演示文稿，下面是链接

[ZF2 快速启动](http://www.slideshare.net/e.zimuel/zend-framework-2-quick-start)

在演示文稿中，[Enrico Zimuel](https://stackoverflow.com/users/2028814/ezimuel)建议使用一个 git 存储库，该存储库托管一个用作模拟器的示例应用程序。

下面是该 git 存储库的链接，该存储库实际上是一个示例 ZF1 应用程序，已迁移以与 ZF2 一起使用。它就像一个模拟器，用 ZF1 代码测试 ZF2。

[ZF2迁移原型](https://github.com/weierophinney/zf-quickstart/tree/features/zf2_mvc-zf1_emulation)

这是一个ZF1迁移原型

它实际上

1.  创建 ZF1 调度程序的“Zf1Compat”版本作为事件侦听器。
2.  引导程序很大程度上模仿了 ZF1 的 Zend_Application 引导程序的工作方式。
3.  默认路由使用新的 ZF2 MVC 路由，但模仿了 ZF1 提供的路由。

我发布这个只是为了提到有一个解决迁移问题的解决方案非常好。

这也可能对需要迁移的其他人有所帮助，因为没有人知道有一个具有此原型的 git 存储库，而且我还没有看到任何博客帖子或在任何地方指定此存储库链接的帖子（我真的不知道为什么?)。

笔记 ： -

> 这只会减少您的迁移工作，您将失去 ZF2 的许多优势，并且您无法真正利用框架的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-03T09:22:03.900

***Zend 1 动作助手***对应于***Zend 2 控制器插件***。

您只需进行一些更改即可完成这项工作。

**在 Zend 2 中创建控制器插件的**一种方法是：

*   在控制器下创建一个文件夹，例如。“模块/应用程序/src/控制器/插件”

*   在使用您的插件名称创建的文件夹下创建一个 php 文件，例如。MyPlugin.php 并添加以下内容：

```
namespace Application\Controller\Plugin;

use Zend\Mvc\Controller\Plugin\AbstractPlugin;

class MyPlugin extends AbstractPlugin {

    public function doSomething()
    {
        // put your code here
        return '1';
    }

} 
```

*   将控制器插件添加到您的 module.config.php（例如 module/Application/config/module.config.php）中：

```
 'controller_plugins' => array(
        'invokables' => array(
            'Plugin1' => 'Application\Controller\Plugin\MyPlugin',
        )
    ), 
```

*   在您的控制器中使用它，例如。

```
 class IndexController extends AbstractActionController
    {
        public function indexAction()
        {
            $plugin = $this->Plugin1(); // or $this->plugin('Plugin1');
            echo $plugin->doSomething();
            return new ViewModel();
        }
    } 
```

**不要混淆 Zend 1 插件和 Zend 2 控制器插件**，它们是**不同**的东西。

*   [Zend 动作助手](https://stackoverflow.com/questions/4701177/zend-action-helper)
*   [http://framework.zend.com/manual/2.4/en/modules/zend.mvc.plugins.html](http://framework.zend.com/manual/2.4/en/modules/zend.mvc.plugins.html)

# c# - 设置 HttpContext.Current.User 抛出空引用异常

> ID：16133395
> 
> 赞同：4
> 
> 时间：2013-04-21T16:24:23.203
> 
> 标签：c#, .net, wcf, asp.net-4.5

这是 WCF 单向操作。HttpContext.Current.User 在这些操作中被清除，这就是我添加一个在清除用户之前保存用户的行为的原因。后来我想用我保存的值重新设置 HttpContext.Current.User 但我遇到了一个异常：

```
HttpContext.Current.User = (RolePrincipal)userThatWasSavedBefore;

Object reference not set to an instance of an object.
at System.Web.HttpContext.SetPrincipalNoDemand(IPrincipal principal, Boolean needToSetNativePrincipal)
at System.Web.HttpContext.set_User(IPrincipal value)
at (My Function) 
```

为什么我不能设置用户？问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:56:31.460

不能设置的原因很可能是请求已经完成。设置 User 属性会导致 ASP.NET 尝试回调每个请求的数据结构，如果这些数据结构已被释放，则结果行为是未定义的。

对于单向操作，WCF 调用应用程序代码，同时告诉 ASP.NET 不要等待应用程序代码完成并立即完成请求。出于这个原因，强烈建议您不要从单向操作访问 HttpContext。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:30:08.510

显然，抛出异常的行中的某些对象为空。

检查是否有当前的HttpContext，即我怀疑HttpContext.Current 为null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-05T03:04:00.927

调用堆栈显示[HttpContext 的实例方法](https://referencesource.microsoft.com/#System.Web/HttpContext.cs,71e001c3e3531f26,references)已执行。

换句话说 - HttpContext 存在，异常是由其他东西引发的 - _notificationContext 可能缺少 NulRef 检查。

[NotificationContext](https://referencesource.microsoft.com/#System.Web/HttpContext.cs,b19ada8ad272b1a3,references)是内部的，并且仅在我编写时由[OnRequestNotificationCompletionHelper取消设置。](https://referencesource.microsoft.com/#System.Web/HttpRuntime.cs,2080)

异常情况看起来像：

*   一些工作要异步完成 - 不会阻止/阻止请求完成
*   请求处理完成
*   您的工作项为完成的请求设置 HttpContext.User

这看起来像一个框架错误:(

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-21T18:01:28.307

这个问题要么是因为这些类中的某些对象为空（例如 HttpContext.Current）

或者

您经过那里的用户（并且您之前保存过）实际上指向`null`. 正如您从堆栈跟踪中看到的那样，很可能是这种情况，因为异常是由`System.Web.HttpContext.set_User(IPrincipal value)`

用户实际上不是一个变量，而是一个属性。将其更改为另一个值是调用一个函数，如果用户的新值为`null`.

为了找出导致此问题的原因，我建议您为引发异常的行设置断点并检查该行的任何部分是否未指向`null`

防撞替代方案可能是：

```
if (HttpContext.Current != null && userThatWasSavedBefore != null)
{
    HttpContext.Current.User = (RolePrincipal)userThatWasSavedBefore;
} 
```

# iphone - 停止视频在 UIWebView 中播放

> ID：16133397
> 
> 赞同：1
> 
> 时间：2013-04-21T16:24:30.657
> 
> 标签：iphone, ios, objective-c, xcode

我正在加载一个页面`UIWebView`。该页面包含要播放的缩略图。当我单击任何缩略图时，它会在任何默认播放器中启动。我希望它不应该在默认播放器中播放，我想在`MPMovieController`点击缩略图时使用自定义控件播放视频`UIWebview`。我可以停止视频在默认播放器中播放吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:37:33.623

这将需要获取电影 url 并在 MPMoviePlayer 中播放并停止 webview 的重定向。

**逻辑：**

在 webview 的代表中：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

从 NSURLRequest 的 NSURL 中获取 URL，然后使用`NSURL absoluteString`

比较 url 中文件的扩展名。
如果它是视频，例如 .mov/.mp4，则使用 URL 加载 MPMoviePlayer 以在您的应用程序和`return NO;`此委托方法中播放它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T08:04:17.017

如果您有权访问缩略图代码，则可以放置`javascript`将执行简单重定向的方法：

```
<a href="#" onClick="javascript:play_native_video_url(url); >thumbnail here</a>

play_native_video_url(url) {
     window.location = "play://"+url; 
} 
```

`UIWebView`委托将使用自定义方案（不是 http:) 捕获此重定向：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {

// Define if it is your custom scheme:
  if ([request.URL.host isEqualToString:@"play"]) {
      // get url and play it with native MPMoviePlayer...
      return NO;  // do not let WebView process it
  }
} 
```

凭记忆写的

# django - django sync db 在两个数据库中获取两个应用程序

> ID：16133404
> 
> 赞同：0
> 
> 时间：2013-04-21T16:25:24.447
> 
> 标签：django, django-models, django-apps, django-orm

我不确定它是如何工作的，但我需要两个不同的模型/应用程序位于不同的数据库中。因此，如果我尝试`syncdb --database db1`将所有已安装的应用程序放入 db1。所以问题是如何在另一个数据库中只获取一个应用程序？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:37:02.693

您需要编写一个[数据库路由器](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#topics-db-multi-db-routing)`allow_syncdb`，它将在其方法中根据应用程序和数据库过滤模型。您可以从`AuthRouter`文档中的示例开始。

# php - 依靠 HTML '必需' 进行简单的表单验证

> ID：16133408
> 
> 赞同：1
> 
> 时间：2013-04-21T16:25:51.070
> 
> 标签：php, html, forms, web

我的问题很简单，我正在使用 HTML、PHP 和 jQuery 为我的网站编写一个简单的登录/注册表单。

当我可以在每个输入上使用 HTML-s required 标记并使用 PHP 检查用户名可用性和密码匹配时，是否还需要在 PHP 中编写表单验证？

我相信在后端也进行验证是一种很好的做法，但似乎 HTML 中的“必需”功能可以解决所有这些问题？这很容易被滥用吗，仅依靠 HTML 进行简单的表单验证的一般缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T16:28:31.230

> 是否也需要在 PHP 中编写表单验证

您永远不能*依赖**任何*形式的客户端验证。它总是可以被绕过的。

人们可能正在使用不支持 HTML 5 验证属性的浏览器，或者可能使用 DOM 检查器来删除它们。

通过关闭 JavaScript 可以轻松绕过 JavaScript 解决方案。

表单可以被复制/粘贴、编辑，然后从用户拥有的页面提交。

HTTP 请求可以手动构建而无需靠近表单。

等等等等

客户端验证只能为方便用户而提供。您的系统的保护只能在服务器端处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T16:28:39.223

你永远不应该依赖前端验证。也不是 Javascript 或 HTML。用户可以打开您的注册表单，使用 firebug 或其他工具，检查文本框并删除`required`属性。也可以发送到您的后端 POSTed 变量，即使不打开您的前端

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T16:29:03.140

**服务器上的验证是必须的**

但是，您可以通过在客户端和服务器上进行验证来美化事情，以便用户获得即时反馈，但是是的，在 PHP 中进行验证是必要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T16:57:06.870

将客户端验证视为可用性问题而将服务器端验证视为安全问题可能会有所帮助。

在可用性可能被描述为“很高兴拥有”的地方，安全性绝对是“必须拥有的”。

# regex - 强制性正则表达式元素的语法是什么？

> ID：16133409
> 
> 赞同：0
> 
> 时间：2013-04-21T16:26:00.090
> 
> 标签：regex

`:`强制后如何设置参数？我已经尝试了几个在线网络工具，但它们无法帮助我。

```
^(?<first>.*?):(?<second>.*?)$ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T16:29:18.337

我猜你的意思是，你希望那部分至少包含一个字符？在这种情况下，请使用`.+?`而不是`.*?`. （`*`意思是“零个或多个”，`+`意思是“一个或多个”。）更好的是，写：

```
^(?<first>[^:]*):(?<second>.+)$ 
```

# android - 在 Scala 中覆盖 Java 构造函数

> ID：16133414
> 
> 赞同：2
> 
> 时间：2013-04-21T16:26:53.870
> 
> 标签：android, scala, opengl-es-2.0

[在 docs](http://developer.android.com/training/graphics/opengl/environment.html#glsurfaceview)中，它说我应该像这样创建新类：

```
class MyView extends GLSurfaceView {
    public MyView(Context context) {
        super(context);
        setRenderer(renderer);
    }
} 
```

现在我尝试在 Scala 中重新执行此操作：

```
class BaseGameActivity extends Activity {
    object glview extends GLSurfaceView(this) {
        setRenderer(renderer)
        setEGLContextClientVersion(2)
    }
} 
```

但是，应用程序现在崩溃了，但“ `java.lang.IllegalStateException: setRenderer already called for this instance`”除外。我怀疑这与 Scala 调用超级构造函数的方式有关。

我试图找出如何以[文档](http://developer.android.com/training/graphics/opengl/environment.html#glsurfaceview)描述的方式覆盖构造函数，但找不到它。我会很感激任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:49:24.823

在我看来，您正在将调用传播到与基类不同的构造函数。您正在传递对对象的引用`this`而不是对`Context`对象的引用。可能是另一个构造函数正在调用`setRenderer`.

你可以尝试创建一个这样的内部类`MyGLView`：

```
class MyGLView(ctx: Context) extends GLSurfaceView(ctx) {
  setRenderer(renderer)
} 
```

看看会发生什么？

问题是`object`它的构造函数不允许参数。顶级对象必须可以在没有任何参数的情况下进行初始化（没有人调用它们的 ctor）。在您的情况下，您有一个内部对象，它可以引用周围类实例的成员。如果你真的需要你的类中的内部对象`Activity`，你可以这样做：

```
object glview extends GLSurfaceView(ctx) {
  setRenderer(renderer)
} 
```

where`ctx`是周围类的成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:57:53.590

在 java 中同样在 scala 构造函数[不是继承的](https://stackoverflow.com/questions/1644317/java-constructor-inheritance)。

所以你不能覆盖东西，你没有继承。并且您应该使用现有的构造函数之一作为基类。如果它们都在调用`setRenderer(renderer)`它，它将在构造超级对象期间被调用，并且您显然不应该在子类型构造函数中第二次调用它（无论是类、对象还是混合特征）。

# apache - 根据访问者的屏幕大小切换克隆主题

> ID：16133420
> 
> 赞同：0
> 
> 时间：2013-04-21T16:27:58.190
> 
> 标签：apache, mod-rewrite, themes, plone, skin

对于 plone 4.2.5，是否有一种简单的方法可以根据访问者的屏幕尺寸在桌面/移动版本之间设置主题切换？诸如“如果小于 640x480 则”之类的东西为移动版本提供服务？例如，谈论 2 个非重氮主题？

什么是++skin++换肤，可以吗？

我对克隆很陌生，而不是真正的程序员，因此非常感谢“理智”的解决方案！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T22:09:55.280

查看portal_css（通过Zope 管理界面）并搜索“mobile”。在“CSS Media”字段中，您会发现：

```
handheld, screen and (max-device-width: 480px) 
```

这会设置一个媒体查询，如果浏览器知道（承认）它们是手持设备或者屏幕宽度为 480 像素或更小，则它们会使用 mobile.css 样式表。这一切都是通过完全标准的 CSS 完成的，您可以使用相同的原理为不同的屏幕宽度实现完全不同的页面设计。有几本关于响应式设计的好书（“响应式”是一个神奇的词）。您可以自定义此样式表，或添加您自己的媒体查询样式表。

您还可以在“Twitter Bootstrap”中看到媒体查询和响应式设计的彻底和流行的使用，它提供了各种类选择器，您可以使用这些选择器来更改各种屏幕宽度的设计。一个引导示例包含在 Plone 4.3 中包含的更新版本的 plone.app.theming 中。

请注意，如果您希望在减小窗口大小（不仅仅是屏幕大小）时改变设计，请使用“max-width”而不是“max-device-width”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T14:43:00.877

[http://plone.org/products/collective.themeswitcher/](http://plone.org/products/collective.themeswitcher/)

这是您可以使用的替代实现。从描述：

该插件旨在轻松支持新的切换器。目前唯一实现的切换器是基于来自[http://detectmobilebrowsers.com/（python](http://detectmobilebrowsers.com/)版本）的用户代理的“移动切换器”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T20:05:36.433

我不这么认为。但是，您应该研究响应式设计和媒体查询。我怀疑您可以在单个主题中使用符合标准的 CSS 来实现您想要的。

# php - 使用 php union 从多个表中选择数据

> ID：16133422
> 
> 赞同：0
> 
> 时间：2013-04-21T16:28:05.770
> 
> 标签：php, mysql

任何人都可以帮助我如何从多个 MySQL 表中进行选择并使用 php 按游戏限制 15 进行排序？

```
 <?php
   //$query = "SELECT id, gamename, gameplayed FROM action, adventure, augur, beauty, chess, joke, mmorpg, multiplayer, platform, puzzle, racing, shooting, sport, stratergy WHERE id = :id";
   $query = '
     SELECT id, gamename, gameplayed FROM((
     SELECT id, gamename, gameplayed 
     FROM action 
 ORDER BY gameplayed
 DESC LIMIT 15 
 ) UNION (
     SELECT id, gamename, gameplayed
     FROM adventure
     ORDER BY gameplayed
     DESC LIMIT 15
     ))as t ORDER BY gameplayed';

     $query_params = array(':id' => '1'); 
     //$query = "SELECT id, gamename FROM action, adventure, augur, beauty, chess, joke, mmorpg, multiplayer, platform, puzzle, racing, shooting, sport, stratergy ORDER BY gameplayed DESC LIMIT 15"; 
     try 
      { 
        // These two statements run the query against your database table. 
        $stmt = $db->prepare($query); 
        $stmt->execute($query_params); 
      } 
     catch(PDOException $ex) 
      { 
        // Note: On a production website, you should not output $ex->getMessage(). 
        // It may provide an attacker with helpful information about your code.  
        die("Failed to run query: " . $ex->getMessage()); 
      } 

      $rows = $stmt->fetchAll(); 
        foreach($rows as $row):
        echo $rows['t'];
        endforeach;
        unset($row); 
        ?> 
```

我搜索谷歌发现解决方案是使用联合，但我不断收到错误“未定义索引 t”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:38:25.913

您是否尝试将 UNION 的所有结果都选择为别名`'t'`？它不起作用，您必须一一使用它们，即：

```
...UNION (
 SELECT t.id as 'tid', t.gamename as 'tgamename', t.gameplayed as 'tgameplayed'
 FROM adventure AS t
 ...

$row['tid']; $row['tgamename']; $row['tgameplayed'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:35:49.783

尝试将您的 SQL 查询更改为此

```
SELECT id, gamename, gameplayed 
FROM action 
LIMIT 15 
UNION
SELECT id, gamename, gameplayed
FROM adventure
ORDER BY gameplayed DESC 
LIMIT 15
ORDER BY gameplayed 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T16:36:02.180

在您的选择查询中没有看到名为“t”的字段？尝试`var_dump()` `$rows`，然后您可能会看到出了什么问题。

您正在做的是尝试选择表别名。您不能选择它们，只能选择字段。

您的结果现在应该查看数组的子数组的开头，`$rows`例如第一个表的元素和第二个混合的元素，按照`gameplayed`列中的顺序。

# org-mode - org-mode babel python session 和内联图像不兼容？

> ID：16133428
> 
> 赞同：3
> 
> 时间：2013-04-21T16:28:34.043
> 
> 标签：org-mode

如果我使用这个块

```
#+BEGIN_SRC python :results file
from pylab import *
plot(rand(10))
savefig('images/test.png')
return 'images/test.png'
#+END_SRC 
```

然后 RESULTS 块向我显示了情节的内联版本。

如果现在我切换到这个块

```
#+BEGIN_SRC python :session test :results file
from pylab import *
plot(rand(10))
savefig('images/test.png')
return 'images/test.png'
#+END_SRC 
```

然后 RESULTS 块不显示内联图，但这

```
| <matplotlib.lines.Line2D | object | at | 0x35c0650> | 
```

使用会话对我来说是一种强制性的，因为我需要几个块来共享变量。

我的方法有什么明显的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T11:14:21.653

根据[org-mode 文档](http://orgmode.org/org.html#Results-of-evaluation)`return`，如果代码在会话中运行，则必须删除。

```
#+BEGIN_SRC python :session test :results file
  from pylab import *
  plot(rand(10))
  savefig('images/test.png')
  'images/test.png'
#+END_SRC 

#+RESULTS:
[[file:images/test.png]] 
```

因为“返回的结果是解释器执行的最后一次评估的结果。”

# ruby-on-rails - 嵌套模型验证错误在创建时显示但不更新

> ID：16133429
> 
> 赞同：1
> 
> 时间：2013-04-21T16:28:34.443
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

我有一个`Developer`模型那个`:has_one` `User`模型。这允许跨不同用户类型的身份验证和内容。

当我使用不正确的用户数据创建新开发人员时，它会呈现验证错误列表。当我使用不正确的用户数据更新开发人员时，它只会重新呈现编辑表单（应该如此），但不会显示验证错误。

我的验证错误显示代码位于表单的部分字段中，因此不应该有所作为。

我觉得问题出在我尝试更新模型的方式上。

```
def update
  @developer = Developer.find(params[:id])
  if @developer.user.update_attributes(params[:user]) && @developer.update_attributes(params[:developer])
    flash[:success] = "Profile Updated"
    sign_in @developer.user
    redirect_to @developer
  else
    render 'edit'
  end
end 
```

而且我的`User`验证并不是什么花哨的东西：

```
validates :name,  presence: true, length: {maximum: 30}
VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
validates :email, presence: true, 
                format: { with: VALID_EMAIL_REGEX },
                uniqueness: { case_sensitive: false }
validates :password, length: {minimum: 6}
validates :password_confirmation, presence: true 
```

我已经阅读了至少 10 篇听起来相似的不同帖子，但我没有发现任何有用的东西。任何帮助都会很棒。

**编辑**

当我提交`update`表单时，会出现以下参数

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"70xmNVxxES7lK2bSIIul/i5GaiJhB9+B5bV/bUVFlTs=", "user"=>{"name"=>"foo", "email"=>"foo@example.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "developer"=>{"skype_name"=>""}, "commit"=>"Save changes", "id"=>"11"} 
```

它仍然不进行`User`验证。如果我通过控制台执行以下操作，它虽然可以工作（即它在参数良好时保存，而在参数错误时失败）：

```
Developer.last.update_attributes(:user_attributes => {:name => "test updated", :email => "test@example.com", :password => "123456", :password_confirmation => "123456"}) 
```

所以对我来说唯一不同的是我的表格给了我，`:user_attributes`而不仅仅是`:user`我的表格。我该如何改变呢？

**编辑 2**

我的`_fields`部分表格的相关部分：

```
<%= render 'shared/error_messages' %>

<%= fields_for :user do |user| %>
  <%= user.label :name %>
  <%= user.text_field :name %>

  <%= user.label :email %>
  <%= user.text_field :email %>

  <%= user.label :password %>
  <%= user.password_field :password %>

  <%= user.label :password_confirmation, "Confirm Password" %>
  <%= user.password_field :password_confirmation %>
<% end %> 
```

和我的`Developer#edit`行动：

```
def edit
  @developer = Developer.find(params[:id])
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:20:16.007

无需单独保存用户和开发者，您可以通过开发者模型管理保存用户，如下所示，

```
 <%= form_for(@developer) do |f| %>

      ... developer's attribute ...

           <%= f.fields_for :user do |ff| %>
            ... user's attribute ... 
```

在控制器中，仅

```
 @developer = Developer.find(params[:id])
   if @developer.update_attributes(params[:developer])
       .... 
```

在开发者模型中，您只需要添加，

```
 accepts_nested_attributes_for :user 
```

和

```
 attr_accessible :user_attribute 
```

现在 form_for 也会自动显示用户模型的验证错误。

有关更多详细信息，请参阅此链接[http://rubysource.com/complex-rails-forms-with-nested-attributes/](http://rubysource.com/complex-rails-forms-with-nested-attributes/)

# c - 为什么这段代码进入无限循环

> ID：16133435
> 
> 赞同：2
> 
> 时间：2013-04-21T16:29:23.397
> 
> 标签：c, long-integer

下面的这个函数检查一个整数是否是素数。

我正在运行一个从 3 到 2147483647 的 for 循环（+ve 的 long int 限制）。

但是这段代码挂了，不知道为什么？

```
#include<time.h>
#include<stdio.h>
int isPrime1(long t)
{
    long i;
    if(t==1) return 0;
    if(t%2==0) return 0;
    for(i=3;i<t/2;i+=2)
    {
        if(t%i==0) return 0;
    }
    return 1;
}
int main()
{
    long i=0;
    time_t s,e;

    s = time(NULL);
    for(i=3; i<2147483647; i++)
    {
        isPrime1(i);
    }
    e = time(NULL);
    printf("\n\t Time : %ld secs", e - s );
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T16:36:04.410

它最终会终止，但需要一段时间，如果你在内联`isPrime1`函数时查看循环，你会得到类似的东西：

```
for(i=3; i<2147483647; i++)
   for(j=3;j<i/2;j+=2) 
```

这大约是 n*n/4 = O(n^2)。您的循环行程次数太高了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T16:36:55.923

这取决于系统和编译器。在 Linux 上，使用 GCC 4.7.2 并使用`gcc -O2 vishaid.c -o vishaid`程序编译立即返回，并且编译器通过删除它们来优化所有调用`isPrime1`（我检查了生成的汇编代码`gcc -O2 -S -fverbose-asm`，然后`main`甚至不调用`isPrime1`）。GCC 是对的：因为`isPrime1`没有副作用并且没有使用它的结果，所以可以删除它的调用。那么`for`循环体是空的，所以也可以优化。

^(要吸取的教训是，在对优化的二进制文件进行基准测试时，最好在代码中产生一些真正的副作用。)

此外，算术告诉我们，`i`如果没有小于其平方根的除数，则某些是素数。所以更好的代码：

```
int isPrime1(long t) {
  long i;
  double r = sqrt((double)t);
  long m = (long)r;
  if(t==1) return 0;
  if(t%2==0) return 0;
  for(i=3;i <= m;i +=2)
    if(t%i==0) return 0;
  return 1; 
} 
```

在我的系统上（带有 i7 3770K Intel 处理器的 x86-64/Debian/Sid，运行该程序的核心频率为 3.5GHz）`long`-s 是 64 位。所以我编码

```
int main ()
{
  long i = 0;
  long cnt = 0;
  time_t s, e;

  s = time (NULL);
  for (i = 3; i < 2147483647; i++)
    {
      if (isPrime1 (i) && (++cnt % 4096) == 0) {
        printf ("#%ld: %ld\n", cnt, i);
        fflush (NULL);
      }
    }
  e = time (NULL);
  printf ("\n\t Time : %ld secs\n", e - s);
  return 0;
} 
```

大约 4 分钟后，它仍然打印了很多行，包括

```
#6819840: 119566439
#6823936: 119642749
#6828032: 119719177
#6832128: 119795597 
```

我猜这需要几个小时才能完成。30 分钟后它仍在吐痰（缓慢）

```
#25698304: 486778811
#25702400: 486862511
#25706496: 486944147
#25710592: 487026971 
```

实际上，该程序需要4小时16分钟才能完成。最后的输出是

```
#105086976: 2147139749
#105091072: 2147227463
#105095168: 2147315671
#105099264: 2147402489

   Time : 15387 secs 
```

* * *

顺便说一句，这个程序仍然效率很低：包中的程序`primes`响应速度更快`/usr/games/primes``bsdgames`

```
% time /usr/games/primes 1 2147483647 | tail
2147483423
2147483477
2147483489
2147483497
2147483543
2147483549
2147483563
2147483579
2147483587
2147483629
/usr/games/primes 1 2147483647 
     10.96s user 0.26s system 99% cpu 11.257 total 
```

它仍然打印了 105097564 行（大多数被 跳过`tail`）

如果您对质数生成感兴趣，请阅读几本数学书籍（如果您对效率感兴趣，它仍然是一个研究主题；您仍然可以获得该主题的博士学位。）。[从 Wikipedia 上的 Erastothenes](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)和[素性测试](http://en.wikipedia.org/wiki/Primality_test)页面的筛子开始。

最重要的是，**首先用调试信息和所有警告编译您的程序**（即`gcc -Wall -g`在 Linux 上）并学习**使用您的调试器**（即`gdb`在 Linux 上）。然后，您可以在大约一两分钟后中断您调试的程序（使用`Ctrl-C`under `gdb`，然后让它继续使用`cont`命令 to `gdb`），然后观察`i`main 中的计数器正在缓慢增加。也许还要求提供分析信息（然后使用`-pg`选项）。在编写复杂的算术代码时，阅读有关它们的优秀数学书籍是非常值得的（素数测试是一个非常复杂的主题，是大多数密码算法的核心）。`gcc``gprof`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T16:39:09.263

这是测试素数的一种非常低效的方法，这就是它似乎挂起的原因。在网上搜索更有效的算法，例如埃拉托色尼筛法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T16:36:24.377

这里试试这个，看看是不是真的死循环

```
int main()
{
    long i=0;
    time_t s,e;

    s = time(NULL);
    for(i=3; i<2147483647; i++)
    {
        isPrime1(i);

        //calculate the time execution for each loop
        e = time(NULL);
        printf("\n\t Time for loop %d: %ld secs", i, e - s );
    }

    return 0;
} 
```

# excel - 在记事本中打开 Excel 文件会给出不相关的数据

> ID：16133437
> 
> 赞同：-1
> 
> 时间：2013-04-21T16:29:47.397
> 
> 标签：excel, notepad

我正在使用工具从电子邮件中下载 excel 附件，并使用 VB 脚本将该文件转换为 CSV。我面临的问题是，在将文件转换为 CSV 后，当我尝试使用记事本打开文件时，它会显示框而不是正确的数据。但是，如果使用 excel 打开同一个文件，则它会返回正确的数据。但是，如果我创建一个新的 CSV 文件并用记事本打开它，我就不会遇到这个问题。请帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:22:45.670

如果不查看您的脚本，我猜该文件只是被*重命名*为 .csv 文件 - 但实际上并未转换！这样，您最终会在记事本中看到二进制数据。

尝试在 Excel 中打开原始 Excel 文件 - 并将其另存为 .csv。这肯定会奏效，即您将在记事本中看到数据。

如果这没有帮助，请分享您的脚本。

# sqlite - SQLite PRAGMA foreign_keys 与 SQLAlchemy

> ID：16133439
> 
> 赞同：0
> 
> 时间：2013-04-21T16:29:55.500
> 
> 标签：sqlite, sqlalchemy

在执行某些操作之前，我需要将 PRAGMA foreign_keys 的值更改为“关闭”，但随后我想将其重新“打开”。

最终，我只是刚刚熟悉了 ORM，并没有太多时间去了解 SQLAlchemy Core。当我导入声明性模块时，有一个导入可以确保我的全局引擎已启动。除此之外，我不接触引擎/池/会话。

我找到了这个参考：[How to turn on 'PRAGMA foreign_keys = ON' in sqlalchemy migration script or configuration file for sqlite?](https://stackoverflow.com/questions/13712381/how-to-turn-on-pragma-foreign-keys-on-in-sqlalchemy-migration-script-or-conf)

```
from sqlalchemy.engine import Engine
from sqlalchemy import event

@event.listens_for(Engine, "connect")
def set_sqlite_pragma(dbapi_connection, connection_record):
    cursor = dbapi_connection.cursor()
    cursor.execute("PRAGMA foreign_keys=ON")
    cursor.close() 
```

我可以将其粘贴在我的全局引擎配置中，然后使用 PRAGMA on 或 PRAGMA off 的开关...

```
 if self.enforceDBFK:
        cursor.execute("PRAGMA foreign_keys=ON")
    else:
        cursor.execute("PRAGMA foreign_keys=OFF") 
```

你如何“不听”事件（看起来更干净）？

有关如何执行此操作的任何其他建议。

SQLite 文档中关于 PRAGMA foreign_keys 的注释：

> 只有在没有挂起的 BEGIN 或 SAVEPOINT 时，才能启用或禁用外键约束强制

* * *

**相关子主题：** 第二个注意事项，一旦我弄清楚了 PRAGMA，我还可以使用 SQLAlchemy ORM 实例来处理表（使用 foreign_keys=OFF）吗？SQLAlchemy 本身并不强制执行密钥完整性，对吗？如何让 SQLAlchemy 也暂时忽略外键？

我只需要更新一堆行，但是在更新作为一个组完成之前，整个地方都会有损坏/重叠的引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:17:39.093

我们目前没有用于事件“删除”的明确 API，尽管这是最终将可用的功能。因此，您需要创建一个单独的事件，该事件本身会根据标志自行打开和关闭，看起来这就是您已经解决的问题。

# perl - 致命错误：找不到“gtk/gtk.h”文件

> ID：16133440
> 
> 赞同：0
> 
> 时间：2013-04-21T16:29:56.057
> 
> 标签：perl, gtk

所以我试图在 Mac 上从 http://search.cpan.org/dist/Gtk-Perl/ 安装 Gtk-Perl - [0.7000](http://search.cpan.org/dist/Gtk-Perl/)

[我已经成功地按照步骤在http://www.gtk.org/](http://www.gtk.org/)上安装了 gtk+

当我从 Gtk-Perl-0.7000 运行 Makefile.pl 时，它给了我：

```
gtkvertmp.c:3:10: fatal error: 'gtk/gtk.h' file not found
#include <gtk/gtk.h>
         ^
1 error generated.
Unable to find  Gtk version...
Invoking gendefs.pl with [].
Please wait, this may take a moment...
gtktypexp.c:1:10: fatal error: 'gtk/gtktypeutils.h' file not found
#include <gtk/gtktypeutils.h>
         ^
1 error generated. 
```

我有：

```
echo $PKG_CONFIG_PATH
:/Users/one/gtk/source/gtk+-2.24.16/gtk:/Users/one/gtk/inst/include/gtk-2.0/gtk:/Users/one/gtk/inst/lib/pkgconfig 
```

我的系统中确实有 gtk.h 文件。我在网上搜索过，但没有让 Gtk-Perl 编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:34:01.210

您的 Mac OS 需要安装[libgtk](http://www.gtk.org/download/macos.php)才能正确运行脚本。

# .htaccess - .htaccess RewriteRule 似乎不起作用

> ID：16133446
> 
> 赞同：0
> 
> 时间：2013-04-21T16:30:59.220
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我的 .htaccess 在这里遇到了问题，尽管我在网上搜索并尝试了很多东西，但我找不到任何解决方案......

我有一个启用了永久链接的 wordpress 安装。除此之外，我需要在这个不属于 WP 的 wordpress 安装上重写另一个 URL。

如果用户浏览到`http://www.URL.com/?page_id=30&tag=all&filterCategory=6\%23Jackets`，我想显示`http://www.URL.com/jackets.html`为 URL。也应该可以直接浏览到`http://www.URL.com/jackets.html`.

我的 .htaccess 看起来像这样

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

RewriteRule ^jacket\.html$ http://www.URL.com/?page_id=30&tag=all&filterCategory=6\%23Jackets [L]

</IfModule>
# END WordPress 
```

有谁知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:43:42.737

WordPress 重写规则通过 WordPress 将任何请求重定向到不存在的文件。负责此的重写规则，`RewriteRule . /index.php [L]`用 [L] 标记，表示在它之后不再处理任何规则。为了使您的规则起作用，它必须放在 WordPress 规则之前，但在`RewriteBase /`.

# redis - Redis 如何在内部将字符串表示为位？

> ID：16133448
> 
> 赞同：0
> 
> 时间：2013-04-21T16:31:23.020
> 
> 标签：redis

我正在尝试理解字符串的位表示（最特别是在 Redis 中）

我试过这个：

```
redis> SET mykey3 hello
OK
redis> SETBIT mykey3 7 0
(integer) 0
redis> SETBIT mykey3 7 1
(integer) 0
redis> GET mykey3
"iello"
redis> SET mykey4 5
OK
redis> SETBIT mykey4 7 0
(integer) 1
redis> GET mykey4
"4" 
```

那么在这种情况下，“hello”和“5”的位表示是什么？

*   还有其他 Redis 类型，List、Set、Sorted Set 是如何表示为二进制位的？这样的位操作可以为它工作吗？还是不是这样？
*   从看起来一切都存储为二进制安全字符串？如果是这样，如何将 List、Set、Sorted Set 表示为安全字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:53:31.047

如果您查看[**bitops.c**](https://github.com/antirez/redis/blob/unstable/src/bitops.c)，您会发现确实位命令仅适用于[string key type](https://github.com/antirez/redis/blob/unstable/src/bitops.c#L131)。

从[redis.io](http://redis.io/topics/data-types-intro)：

> 支持以下所有数据类型作为值：
> 
> *   二进制安全字符串。
> *   **二进制安全字符串**列表。****
> ***   **二进制安全字符串集**，它们是唯一未排序元素的集合。您可以将其视为 Ruby 哈希，其中所有键都设置为“真”值。*   排序集，类似于 Sets，但其中每个元素都与一个浮点数分数相关联。元素按分数排序。您可以将其视为 Ruby 哈希，其中键是元素，值是分数，但元素总是按顺序排列，而不需要排序操作。**

 **因此，只有列表和集合**值**存储在二进制安全字符串中。对于键和散列**值**以及已排序的集合**成员**也是如此。**

# php - 带分页的 MySQL/PHP 搜索

> ID：16133452
> 
> 赞同：-2
> 
> 时间：2013-04-21T16:31:38.210
> 
> 标签：php, mysql

搜索数据库中不存在的内容时出现语法错误。

错误是，“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在第 8 行的 '-1,1' 附近使用正确的语法”

我用来搜索数据库的表格是：

```
 <form name="search" method="post" action="page.php">
<table width="450px">
<tr>
 <td valign="top">
  <label for="first_name">First Name:</label>
 </td>
 <td valign="top">
  <input  type="text" name="find" maxlength="50" size="30">
 </td>
</tr>
<tr>
 <td valign="top"">
  <label for="last_name">Last Name:</label>
 </td>
 <td valign="top">
  <input  type="text" name="f" maxlength="50" size="30">
 </td>
</tr>
<tr>
 <td valign="top">
  <label for="comments">Select your State:</label>
 </td>
 <td valign="top">
   <select name="state" id="state">
   <option value=""></option>
<option value="Alabama">Alabama</option>
<option value="Alaska">Alaska</option>
<option value="Arizona">Arizona</option>
<option value="Arkansas">Arkansas</option>
<option value="California">California</option>
<option value="Colorado">Colorado</option>
<option value="Connecticut">Connecticut</option>
<option value="Delaware">Delaware</option>
<option value="Florida">Florida</option>
<option value="Georgia">Georgia</option>
<option value="Hawaii">Hawaii</option>
<option value="Idaho">Idaho</option>
<option value="Illinois">Illinois</option>
<option value="Indiana">Indiana</option>
<option value="Iowa">Iowa</option>
<option value="Kansas">Kansas</option>
<option value="Kentucky">Kentucky</option>
<option value="Louisiana">Louisiana</option>
<option value="Maine">Maine</option>
<option value="Maryland">Maryland</option>
<option value="Massachusetts">Massachusetts</option>
<option value="Michigan">Michigan</option>
<option value="Minnesota">Minnesota</option>
<option value="Mississippi">Mississippi</option>
<option value="Missouri">Missouri</option>
<option value="Montana">Montana</option>
<option value="Nebraska">Nebraska</option>
<option value="Nevada">Nevada</option>
<option value="New Hampshire">New Hampshire</option>
<option value="New Jersey">New Jersey</option>
<option value="New Mexico">New Mexico</option>
<option value="New York">New York</option>
<option value="North Carolina">North Carolina</option>
<option value="North Dakota">North Dakota</option>
<option value="Ohio">Ohio</option>
<option value="Oklahoma">Oklahoma</option>
<option value="Oregon">Oregon</option>
<option value="Pennsylvania">Pennsylvania</option>
<option value="Rhode Island">Rhode Island</option>
<option value="South Carolina">South Carolina</option>
<option value="South Dakota">South Dakota</option>
<option value="Tennessee">Tennessee</option>
<option value="Texas">Texas</option>
<option value="Utah">Utah</option>
<option value="Vermont">Vermont</option>
<option value="Virginia">Virginia</option>
<option value="Washington">Washington</option>
<option value="West Virginia">West Virginia</option>
<option value="Wisconsin">Wisconsin</option>
<option value="Wyoming">Wyoming</option>
</select>
 </td>
</tr>
<tr>
 <td valign="top">
  <label for="comments">Zip Code:</label>
 </td>
 <td valign="top">
   <input  type="text" name="zip" maxlength="30" size="30">
 </td>
</tr>
<tr>
 <td valign="top">
  <label for="email">Email Address:</label>
 </td>
 <td valign="top">
  <input  type="text" name="email" maxlength="80" size="30">
 </td>
</tr>
<tr>
 <td valign="top">
  <label for="telephone">Phone Number:</label>
 </td>
 <td valign="top">
  <input  type="text" name="info" maxlength="30" size="30">
 </td>
</tr>

<tr>
 <td colspan="2" style="text-align:center">
  <input type="hidden" name="searching" value="yes" />
 <input type="submit" name="search" value="Search" />
 </td>
</tr>
</table>

 </form> 
```

我使用的分页脚本是：

```
<?php 

 // Connects to your Database 

 mysql_connect("xxxxxxx", "xxxxxxx", "xxxxx") or die(mysql_error()); 

 mysql_select_db("xxx") or die(mysql_error()); 
error_reporting(0);

 //This checks to see if there is a page number. If not, it will set it to page 1 

 if (!(isset($pagenum))) 

 { 

 $pagenum = 1; 

 } 

 //Here we count the number of results 

 //Edit $data to be your query 

 $data = mysql_query("SELECT * FROM form_again WHERE field_1 
LIKE '%" . mysql_real_escape_string($find)      . "%' AND field_2
LIKE '%" . mysql_real_escape_string($f)         . "%' AND field_3
LIKE '%" . mysql_real_escape_string($info)      . "%' AND field_7
LIKE '%" . mysql_real_escape_string($zip)       . "%' AND field_5
LIKE '%" . mysql_real_escape_string($state)     . "%' AND field_6 
LIKE '%" . mysql_real_escape_string($city)  . "%' AND field_9
LIKE '%" . mysql_real_escape_string($email)     . "%'") or die(mysql_error()); 

 $rows = mysql_num_rows($data); 

 //This is the number of results displayed per page 

 $page_rows = 1; 

 //This tells us the page number of our last page 

 $last = ceil($rows/$page_rows); 

 //this makes sure the page number isn't below one, or more than our maximum pages 

 if ($pagenum < 1) 

 { 

 $pagenum = 1; 

 } 

 elseif ($pagenum > $last) 

 { 

 $pagenum = $last; 

 } 

 //This sets the range to display in our query 

 $max = 'limit ' .($pagenum - 1) * $page_rows .',' .$page_rows; 

 //This is your query again, the same one... the only difference is we add $max into it

 $data_p = mysql_query("SELECT * FROM form_again WHERE field_1 
LIKE '%" . mysql_real_escape_string($find)      . "%' AND field_2
LIKE '%" . mysql_real_escape_string($f)         . "%' AND field_3
LIKE '%" . mysql_real_escape_string($info)      . "%' AND field_7
LIKE '%" . mysql_real_escape_string($zip)       . "%' AND field_5
LIKE '%" . mysql_real_escape_string($state)     . "%' AND field_6 
LIKE '%" . mysql_real_escape_string($city)  . "%' AND field_9
LIKE '%" . mysql_real_escape_string($email)     . "%' $max") or die(mysql_error()); 

 //This is where you display your query results

 while($info = mysql_fetch_array( $data_p )) 

 { 

echo "<hr><br>First Name:&nbsp;"; 
 echo $info['field_1'];
 echo "<br>Last Name:&nbsp;"; 
 echo $info['field_2']; 
 echo "<br>Home Phone:&nbsp;"; 
 echo $info['field_3']; 
 echo "<br>Cell Phone:&nbsp;"; 
 echo $info['field_4']; 
 echo "<br>City:&nbsp;"; 
 echo $info['field_6']; 
 echo "<br>State:&nbsp;"; 
  echo $info['field_5']; 
 echo "<br>Zip:&nbsp;"; 
 echo $info['field_7']; 
 echo "<br>Email:&nbsp;"; 
echo $info['field_9']; 
 echo "<br><hr>"; 

 } 

 // This shows the user what page they are on, and the total number of pages

 echo " --Page $pagenum of $last-- <p>";

 // First we check if we are on page one. If we are then we don't need a link to the previous page or the first page so we do nothing. If we aren't then we generate links to the first page, and to the previous page.

 if ($pagenum == 1) 

 {

 } 

 else 

 {

 echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=1'> <<-First</a> ";

 echo " ";

 $previous = $pagenum-1;

 echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=$previous'> <-Previous</a> ";

 } 

 //just a spacer

 echo " ---- ";

 //This does the same as above, only checking if we are on the last page, and then generating the Next and Last links

 if ($pagenum == $last) 

 {

 } 

 else {

 $next = $pagenum+1;

 echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=$next'>Next -></a> ";

 echo " ";

 echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=$last'>Last ->></a> ";

 } 

 ?> 
 <?php
  //This counts the number or results - and if there wasn't any it gives them a little message explaining that 
 $anymatches=mysql_num_rows($data_p); 
 if ($anymatches == 0) 
 { 
 echo "Sorry, but we can not find an entry to match your query<br><br>"; 
 } 
 //And we remind them what they searched for 
 echo "<b>Searched For:
        </b> " .$find; 

 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:44:14.257

```
$max = 'limit ' .($pagenum - 1) * $page_rows .',' .$page_rows; 
```

这是`-1, 1`出现的部分。语法错误是这里的 mysql 需要一个正数。

如果`$rows = mysql_num_rows($data);`是零，`$last`也是零`$pagenum`。`1`然后，当您从中减去时`$pagenum`，您`-1`的查询中就有了。

一种可能的解决方法是从以下位置交换此条件：

```
if ($pagenum < 1) {
    $pagenum = 1;
} elseif ($pagenum > $last) {
    $pagenum = $last;
} 
```

至：

```
if ($pagenum > $last) {
    $pagenum = $last;
}
if ($pagenum < 1) {
    $pagenum = 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:44:27.757

在您的代码中修改它：

```
//This sets the range to display in our query

$max = 'limit ' .((($pagenum == 0) ? 1 : $pagenum) - 1) * $page_rows .',' .$page_rows; 
```

我认为这将解决您的问题

# mysql - 如何在mysql中将数据作为分组行获取

> ID：16133453
> 
> 赞同：0
> 
> 时间：2013-04-21T16:31:38.523
> 
> 标签：mysql

你好，抱歉我的英语不好。

我需要 mysql 查询方面的帮助

我有名为 mytable 的表，包括以下列

1.  id 列（自动递增）。
2.  时间列（时间戳）。
3.  数据列。

我需要按天和每天的数据分组数据，但每天的数据不得超过 3 行，每天的剩余行数，并且所有组数不得超过 9 组作为限制

```
(mytable)
id | time      | data
----------------------
1 | 1366553067 | data1
2 | 1366546958 | data2
3 | 1366546951 | data3
4 | 1366546953 | data4
5 | 1366546931 | data5
6 | 1366545926 | data6
7 | 1366564550 | data7
8 | 1366548683 | data8
---------------------- 
```

*   注意：//顶部的时间戳不正确。

我需要结果看起来像这张表。

```
(the result table)
time              | data  | count of remains row
-----------------------------------------------
april 12 2013     | data1 | 3
april 12 2013     | data2 | 3 // group one 
april 12 2013     | data3 | 3

april 13 2013     | data7 | 0 // group two 

april 14 2013     | data8 | 0 // group three 
------------------------------------------------ 
```

我应该在查询中写什么！？

我会很高兴得到任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:28:41.837

以下查询（未经测试）提供类似于输出示例的结果：

```
SELECT time, data, IF(totalrows.total > 3, totalrows.total - 3, 0) AS remains
FROM (SELECT numbered.*
     FROM    SELECT ordered.*,
                 IF (id = @prev,
                     @n := @n + 1,
                     @n := 1 AND @prev := id) as position
            FROM (SELECT mytable.* ORDER BY time) AS ordered
            JOIN (SELECT @n := 0, @prev := id) AS setup)
            AS   numbered
     WHERE  numbered.position < 4)
     AS     top3
INNER JOIN (SELECT time, count(*) as total FROM mytable GROUP BY time) AS totalrows
ON top3.time = totalrows.time 
```

# c# - 使用 C# 或 Aforge.Net 提取白色区域形成图像

> ID：16133456
> 
> 赞同：2
> 
> 时间：2013-04-21T16:32:06.283
> 
> 标签：c#, image, aforge, accord.net

我面临一个让我发疯的问题，我希望有更好的方法来解决它！

我的程序从网络摄像头获取图像，其中包含 6 个白色方块中的 6 个黑色数字！

像这样的东西：

![在此处输入图像描述](https://i.stack.imgur.com/kvIVI.jpg)

主要问题是背景不是黑色，而是天蓝色并且每个网络摄像头都有不同的自动背光校正，因此每个图像的亮度水平也不同。

所以我提取白色方形斑点的方法是尝试从图像中删除天蓝色/蓝色区域，应用灰度滤镜，最后开始执行此操作的循环：

1.  将阈值设置为 250（最大值为 255）
2.  应用阈值`new Threshold( thres ).Apply(image);`
3.  查看是否包含 6 个或更多正方形斑点
4.  如果不是，则将阈值降低 5 并转到步骤 2。（如果阈值小于 200，则退出）
5.  建立了六个或更多的方格

该循环用于补偿每个图像的亮度级别的差异。

是一种非常繁重的计算方法，我不知道如何改进或改变它！aForge 或片段 C# 代码中是否有一个函数可以帮助我改进这些区域的提取？任何人都可以建议我一个更好的方法来做到这一点？

# html - 如何使用左浮动将 div 移动到右侧？

> ID：16133457
> 
> 赞同：-1
> 
> 时间：2013-04-21T16:32:13.683
> 
> 标签：html, css

我想要这个结果[Demo](https://centerwow.com/temp/s/pic/2013-04-21_190526.jpg)

取而代之的是这个[Demo](https://centerwow.com/temp/s/091.html)

[演示 jsFiddle](http://jsfiddle.net/cXE9h/5/show/)

如何移动`div menu`到结束右侧`div Container`，所以菜单将在右侧。我不想要`position absolute`，因为当你改变窗口页面的宽度大小时，菜单会隐藏图像背景 Frog+Snake 的背景。

非常感谢。

编码：

```
<!DOCTYPE HTML>
<html>
   <meta http-equiv="content-type" content="text/html; charset=UTF-8">
   <title> - jsFiddle demo</title>
   <style type='text/css'>
      body {
      background-color : black;
      background-image : url('pic/bg1.png');
      background-size : 100% 700px;
      background-repeat : no-repeat;
      margin : 0;
      margin-left : -100px;
      padding : 0;
      }
      .imageContainer {
      position : relative;
      margin-left : auto;
      margin-right : auto;
      top : 10px;
      background-size : 1000px 500px;
      width : 1000px;
      height : 500px;
      overflow : hidden;
      }
      #Container {
      background-image : url('pic/1/3.jpg');
      background-repeat : no-repeat;
      z-index : 0;
      }
      .layer {
      position : absolute;
      width : 1000px;
      height : 500px;
      padding : 0;
      margin : 0;
      }
      #parrot {
      z-index : 5;
      }
      #frog_snake {
      z-index : 4;
      }
      #fly {
      z-index : 3;
      }
      #crok {
      z-index : 2;
      }
      #leafvarible {
      position : absolute;
      padding : 0;
      margin-left : auto;
      margin-right : auto;
      display : block;
      top : 10px;
      left : 100px;
      width : 1px;
      height : 1px;
      z-index : -1;
      }
      #pos {
      top : 50px;
      left : 10px;
      color : white;
      font-size : 16px;
      }
      #status {
      position : absolute;
      top : 350px;
      left : -100px;
      color : pink;
      font-size : 20px;
      padding-left : 120px;
      }
      #status1 {
      position : absolute;
      top : 375px;
      left : -100px;
      color : pink;
      font-size : 20px;
      padding-left : 120px;
      }
      #status2 {
      position : absolute;
      top : 400px;
      left : -100px;
      color : red;
      font-size : 20px;
      padding-left : 120px;
      }
      #fps_count {
      position : absolute;
      top : 10px;
      right : 10px;
      width : 150px;
      font-size : 20px;
      color : white;
      font-family : 'Happy Sans', cursive;
      border : red solid 1px;
      }
      #loading {
      background : blue;
      background-image : url('pic/FrogGameBackGround.jpg');
      background-repeat : no-repeat;
      background-size : 1000px 500px;
      z-index : 10;
      }
      #loading > #barCont {
      width : 400px;
      height : 20px;
      position : absolute;
      top : 300px;
      left : 50%;
      margin : -10px 0 0 -200px;
      background : black;
      }
      #loading > p {
      position : absolute;
      top : 275px;
      left : 50%;
      z-index : 11;
      }
      #bar {
      width : 0;
      height : 20px;
      position : absolute;
      left : 0;
      background : #F3FF67;
      }
      #menu {
      float : left;
      width : 200px;
      height : 500px;
      position : relative;
      left : 10px;
      top : 0;
      background-image : url('pic/menu.png');
      border : red solid 1px;
      clear : both;
      }
      #StartButton {
      position : absolute;
      right : 25px;
      top : 300px;
      width : 200px;
      text-align : center;
      color : white;
      font-size : 35px;
      text-shadow : 4px 4px 4px black;
      cursor : pointer;
      }
      #speaker {
      position : absolute;
      right : 150px;
      top : 350px;
      width : 50px;
      }
   </style>
   </head>
   <body>
      <div  id= "Container">
         <canvas id="A1" class="layer"></canvas>
         <canvas id="A2" class="layer"></canvas>
         <canvas id="A3" class="layer"></canvas>
         <canvas id="A4" class="layer"></canvas>
      </div>
      <div class="imageContainer" id="loading">
         <p id="loadText">Loading...</p>
         <div id="barCont">
            <div id="bar"></div>
         </div>
      </div>
      <canvas id="A5"></canvas>
      <div id="menu">
         <!-- Button Start Game -->
         <input id="StartButton" type="button" value="Start Game"/>
         <!-- Loading sounds -->
         <div id="speaker">speaker</div>
      </div>
      <script></script>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:41:31.467

使用相对位置而不是绝对位置，并 在主页和菜单上使用`float:right;`和/或。`float:left;`那A5是干什么用的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-18T17:17:34.110

从 #menu 中删除所有位置属性并将其设置为`display:flex;`，然后添加以下边距`margin:0 0 0 auto;`。无论屏幕大小如何，这都会使菜单与右侧对齐。

# javascript - javascript 检查交叉点降低计算复杂度

> ID：16133460
> 
> 赞同：1
> 
> 时间：2013-04-21T16:32:46.497
> 
> 标签：javascript, for-loop, complexity-theory

我有一个列表，其中有 500 000 个对象，每个对象都有一个坐标。我只想在该列表中留下唯一的对象。为此，我执行以下操作：

```
for (var i = 0; i < features.length; i++) {
   for (var j = 0; j < features.length; j++) {
      if (features[i].coord == features[j].coord) {
         features.splice(features.indexOf(features[j]), 1);
       }
    }
 } 
```

但它不是有效的解决方案，因为它非常慢，复杂度为 O(n^2)。我怎样才能以非常快速的方式只留下独特的元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:37:33.260

使用 hash/map/table/whatever 去重复；键（必须是字符串）是坐标的表示。

```
function deduplicate(features) {

    function magicalToString(coordinate) {
        return 'some string representation of the coordinate';
    }

    var table = {};
    for (var i = 0; i < features.length; i++) {
        table[magicalToString(features[i].coord)] = features[i];
    }

    var uniques = [];
    // potential optimization: uniques = new Array(Object.keys(table).length)
    // not guaranteed to be net faster; benchmark and measure.
    for (var k in table) {
        if (table.hasOwnProperty(k)) uniques.push(table[k]);
    }

    return uniques;
} 
```

上）。

# opengl - 我现在已经为 Glut Window 渲染了一个 shere，如何让它随着键盘移动？

> ID：16133462
> 
> 赞同：2
> 
> 时间：2013-04-21T16:32:54.317
> 
> 标签：opengl, emacs, common-lisp, glut, game-physics

剪切并粘贴 cl-glut-examples 代码，我将一个球体渲染到显示器上。现在我如何使用键盘在 ax,y 和 z 轴上移动它。还有一个在线资源可以学习 CL-OpenGL 中的游戏编程或如何制作墙壁、泥土、房屋和角色等东西，这样我就可以创建一个 3D 世界并在其中移动角色并为其提出游戏逻辑。

到目前为止，这是我的代码：

```
(defclass glut-teapot-window (glut:window)
()
(:default-initargs :width 948 :height 990 :title "glut-teapot.lisp" 
                  :mode '(:single :rgb :depth)))

(defmethod glut:display-window :before ((window glut-teapot-window))
(gl:clear-color 0 0 0 0)
(gl:cull-face :back)
(gl:depth-func :less)
(gl:disable :dither)
(gl:shade-model :smooth)
(gl:light-model :light-model-local-viewer 1)
(gl:color-material :front :ambient-and-diffuse)
(gl:enable :light0 :lighting :cull-face :depth-test))

(defmethod glut:display ((window glut-teapot-window))
(gl:load-identity)
(gl:translate 0 0 -5)
(gl:rotate 100 1 1 0)
(gl:light :light0 :position '(6000 1000 15 0))
(gl:light :light0 :position '(2000 300 3000 0))
(gl:clear :color-buffer :depth-buffer)
(gl:color 1 1 1)
(gl:front-face :cw)
(glut:Solid-Sphere 1 10 10)
(gl:front-face :ccw)
(gl:flush))

(defmethod glut:reshape ((window glut-teapot-window) width height)
(gl:viewport 0 0 width height)
(gl:matrix-mode :projection)
(gl:load-identity)
(glu:perspective 50 (/ width height) 0.5 20)
(gl:matrix-mode :modelview)
(gl:load-identity))

(defmethod glut:keyboard ((window glut-teapot-window) key x y)
(declare (ignore x y))
(when (eql key #\Esc)
(glut:destroy-current-window)))

(defun glut-teapot ()
(glut:display-window (make-instance 'glut-teapot-window)))
(glut-teapot) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T08:06:02.897

由于我不知道您使用 opengl 的经验，我将在一年前为我写这个答案（当时我对 opengl 一无所知，并试图学习使用 common lisp）。

cl-opengl 库是对 opengl 的一个相当紧密的包装，我的意思是大多数 opengl 函数在 cl-opengl 中有直接等价物。这很好，因为这意味着您将能够使用 c 和 c++ 获取 opengl 的在线教程，并且只需一点​​精神压力，就可以将它们转换为 lisp。

它是对 opengl 的一个非常紧密的包装器的缺点是 opengl 不是很 lispy，我的意思是好的 opengl 代码的风格与好的 lisp 代码非常不同。一旦你掌握了 cl-opengl 的窍门，这绝对是可以改进的。

接下来，opengl 是一个库，其中包含两个非常不同的范例。有旧风格的 opengl（它使用 gl-begin 和 gl-end）和基于着色器的新风格的 opengl 可能是你想要的，如果你想在未来做花哨的效果！令人痛苦的是，大多数在线优秀教程都是针对旧式 opengl 的，或者以我发现超级混乱的方式将两者混合在一起。因此我个人建议学习现代opengl的以下教程： [http ://www.arcsynthesis.org/gltut/](http://www.arcsynthesis.org/gltut/)

一旦您通过前 4 章，您将了解足够的 opengl，以便能够使用 opengl wiki 而不会感到太多痛苦。我这么说是因为起初我发现 opengl 语言 wiki 真的很混乱，因为我不知道所有信息应该如何组合在一起。

现在到 GLUT。GLUT 很酷……但它很快就会变得非常有限。我真的建议切换到 SDL。幸运的是，一些聪明的人已经使 lisp 中的 SDL 非常适合在 common-lisp 中使用，并将其称为 lispbuilder-sdl。 [http://code.google.com/p/lispbuilder/wiki/LispbuilderSDL](http://code.google.com/p/lispbuilder/wiki/LispbuilderSDL)

好的，那你应该怎么走？：

*   获取 quicklisp：我假设您已经在使用它，但如果没有，请立即获取！它使获取 common lisp 的最新软件包变得更加容易。[http://www.quicklisp.org/beta/](http://www.quicklisp.org/beta/)
*   接下来，获取 lispbuilder (ql:quickload :lispbuilder-sdl)
*   使用 arcsynthesis 教程熟悉 opengl。这确实是获得能够编写现代 opengl 代码所需的理解的最佳方式。
*   用 lisp 编写 arcsynthesis 教程中的示例。
*   制作一些函数和宏以使您的 opengl 在 lisp 中更好地工作。

在这条路上我只比你领先几个月，开始真的很痛苦，但完全值得。如果您精通opengl，我很抱歉，因此这个答案对您来说太基础了！如果是这样，请告诉我，我会尝试提出更好的答案。

下面是在 SDL 中建立 opengl 窗口和上下文、处理事件（您的用户输入将在此处）和重绘框架（尚无绘制但您将使用弧合成教程中的内容填充它）的基本代码！）。

我还添加了一个辅助函数和宏。首先是“可继续的”，这意味着如果其中的代码发生错误，错误结果中将有一个选项可以继续程序（非常方便，这样您就不必一次又一次地启动演示）。还有更新 swank 这意味着即使在演示运行时您仍然可以使用 Slime（您使用的是[slime](http://common-lisp.net/project/slime/)对吗？如果没有得到它！）

```
(defun init ()
  (print 'initialise-stuff-here))

(defun draw ()
  (gl:clear-color 0.0 0.0 0.0 0.0)
  (gl:clear-depth 1.0)
  (gl:clear :color-buffer-bit :depth-buffer-bit)
  (gl:flush)
  (sdl:update-display))

(defun reshape (width height)
  (print width )
  (print height)
  (gl:viewport 0 0 width height))

(defmacro continuable (&body body)
  "Helper macro since we use continue restarts a lot
   <remember to hit C in slime or pick the restart so errors don't kill the app>"
  `(restart-case (progn ,@body)
     (continue () :report "Continue")))

(defun update-swank ()
  (let ((connection (or swank::*emacs-connection*
                        (swank::default-connection))))
    (when connection
      (swank::handle-requests connection t))))

(defun run-demo ()
  (sdl:with-init ()
    (sdl:window
     640 480 :opengl t
     :resizable t
     :opengl-attributes '((:sdl-gl-doublebuffer 1)
                          (:sdl-gl-alpha-size 0)
                          (:sdl-gl-depth-size 16)
                          (:sdl-gl-stencil-size 8)
                          (:sdl-gl-red-size 8)
                          (:sdl-gl-green-size 8)
                          (:sdl-gl-blue-size 8)))
    (init)
    (reshape 640 480)
    (setf cl-opengl-bindings:*gl-get-proc-address* #'sdl-cffi::sdl-gl-get-proc-address)
    (sdl:with-events ()
      (:quit-event () t)
      (:VIDEO-RESIZE-EVENT (:w width :h height)
                           (reshape width height))
      (:idle ()
             (continuable (update-swank))
             (continuable (draw)))))) 
```

好的，就是这样，玩得开心！

# c - 通过管道从子进程发送多维数组到父进程

> ID：16133464
> 
> 赞同：3
> 
> 时间：2013-04-21T16:32:58.880
> 
> 标签：c, pipe

我正在尝试将一个二维数组从子进程发送到父进程并且失败得很厉害。不完全确定应该如何完成，但这是我尝试过的。

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <stdlib.h>

int fd[2];
int matrix[2][2];

int main () {

  pipe (fd);
  if (0 == fork()) {
    printf ("Start child process with pid: %d\n", getpid());
    for (int i = 0; i < 2; i++)
      matrix[i][i] = 1;

    write (fd[1], matrix, 4);
    exit (0);
  }

  printf ("Start parent process with pid: %d\n", getpid());
  read (fd[0], matrix, 4);
  printf ("Received %d\n", matrix[1][1]);

return 0;
} 
```

编译正确，但接收到的值始终为 0 而不是 1。我做错了什么？（很多东西，我期待）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T17:06:16.497

这是因为您误解了`read`and的第三个参数`write` 是元素的数量。`read`并且`write`系统调用要求它们的[第三个参数](http://linux.die.net/man/2/write)是字节数。

更改您的代码

```
write (fd[1], matrix, 4);
...
read (fd[0], matrix, 4); 
```

至

```
write (fd[1], matrix, 4*sizeof(int));
...
read (fd[0], matrix, 4*sizeof(int)); 
```

# mysql - MAMP - phpMyAdmin #2002 - 无法通过套接字“/Applications/MAMP/tmp/mysql/mysql.sock”连接到本地 MySQL 服务器

> ID：16133467
> 
> 赞同：11
> 
> 时间：2013-04-21T16:33:22.303
> 
> 标签：mysql, sockets, phpmyadmin, mamp

我在 MAMP phpMyAdmin 上工作，一切正常，直到我`ALTER TABLE`从 SQL 选项卡查询语句。操作太长而无法结束，所以我决定刷新我的页面。从那时起，我无法再访问 phpMyAdmin 并且我总是收到此消息：

```
#2002 - Can't connect to local MySQL server through socket '/Applications/MAMP/tmp/mysql/mysql.sock' (2) 
```

我已经尝试了很多在网上找到的东西，包括 Stackoverflow、Server Fault ......比如重新安装 MAMP、符号链接到`/tmp/mysql.sock`、修改`config.inc.php`等，但没有任何效果。

当我从命令行运行时，一切都很好`mysql`：

```
$ /Applications/MAMP/Library/bin/mysql -u root -p
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 3
Server version: 5.5.29 Source distribution

mysql> SHOW SCHEMAS;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
+--------------------+
3 rows in set (0,65 sec) 
```

`mysqld`运行正常：

```
$ ps -e | grep mysql
 7007 ??         0:00.03 /bin/sh /Applications/MAMP/Library/bin/mysqld_safe --port=8889 --socket=/Applications/MAMP/tmp/mysql/mysql.sock --lower_case_table_names=0 --pid-file=/Applications/MAMP/tmp/mysql/mysql.pid --log-error=/Applications/MAMP/logs/mysql_error_log
 7141 ??         0:00.37 /Applications/MAMP/Library/bin/mysqld --basedir=/Applications/MAMP/Library --datadir=/Applications/MAMP/db/mysql --plugin-dir=/Applications/MAMP/Library/lib/plugin --lower-case-table-names=0 --log-error=/Applications/MAMP/logs/mysql_error_log.err --pid-file=/Applications/MAMP/tmp/mysql/mysql.pid --socket=/Applications/MAMP/tmp/mysql/mysql.sock --port=8889 
```

并且存在套接字文件：

```
$ ls -la /Applications/MAMP/tmp/mysql/mysql.sock 
srwxrwxrwx  1 user  admin  0 21 avr 16:57 /Applications/MAMP/tmp/mysql/mysql.sock 
```

有人遇到过这种问题吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-22T09:25:23.933

我看到的完全一样。MAMP MySQL 正在运行，以及来自 PHPMyAdmin 的这条消息

MySQL 说：

```
#2002 - Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) 
```

服务器没有响应（或本地服务器的套接字未正确配置）。

我确实使用 :`sudo ln -s /Applications/MAMP/tmp/mysql/mysql.sock /tmp/mysql.sock` 允许本地 PHP CLI 访问 MAMP MySQL

我在这里找到了 phpMyAdmin 的配置文件：/Applications/MAMP/bin/phpMyAdmin/config.inc.php

我在配置文件中添加了这个显式路径。

```
$cfg['Servers'][$i]['socket'] = '/Applications/MAMP/tmp/mysql/mysql.sock'; 
```

现在它可以工作了:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-23T19:38:45.277

当我通过 Mamp 主页面的链接转到默认 URI 时，我得到了相同的响应，即`http://localhost/phpMyAdmin/?lang=en-iso-8859-1&language=English`. 我尝试了上一个答案的建议无济于事。但是，当我删除了 URI 中的一些选项，而只是转到以下任何一个选项时：

*   `http://localhost/phpMyAdmin/?language=English`
*   `http://localhost/phpMyAdmin/?lang=en-iso-8859-1`
*   `http://localhost/phpMyAdmin`

然后它起作用了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-07T18:24:19.427

它可能会觉得很奇怪，但是，我尝试从 tmp 目录中删除文件 mysql.sock 并且这个错误消失了......

# mysql - 如何在 MySQL 中从结构成员传递 VALUES

> ID：16133468
> 
> 赞同：1
> 
> 时间：2013-04-21T16:33:29.710
> 
> 标签：mysql

我想将结构成员的值写入**MySQL**表。我遇到的问题是我希望读取结构的值并将值写入特定列。

```
string assetNumber = EGMSimulatorObj.EGMConfigurationObj.AssetNumber.ToString();
string query = "INSERT INTO egmtable (Asset_Number) VALUES($assetNumber)"; 
```

有了上述内容，我收到以下错误：

```
Unknown column '$assetNumber' in 'field list'. 
```

如何从结构成员或任何局部变量中使用 set VALUES？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:57:42.960

你需要更换

```
string query = "INSERT INTO egmtable (Asset_Number) VALUES($assetNumber)"; 
```

有类似的东西

```
string query = "INSERT INTO egmtable (Asset_Number) VALUES("+assetNumber+")"; 
```

也就是说，如果您使用 Java 作为编程语言。其他语言可能需要其他连接表示法。

旁注：您可能应该为此使用准备好的语句，原因有两个：安全性和执行速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T16:49:14.333

目前 MySQL 看到 $assetNumber 并且认为它是一个列名。它没有被替换为值。您可能希望将变量连接到字符串中。我不确定您使用的是哪种语言。

**PHP**

```
$query = "INSERT INTO egmtable (Asset_Number) VALUES (".$assetNumber.")"; 
```

**冷融合**

```
qryString = "INSERT INTO egmtable (Asset_Number) VALUES ("&assetNumber&")"; 
```

**爪哇**

```
string query = "INSERT INTO egmtable (Asset_Number) VALUES("+assetNumber+")"; 
```

但是，在所有这些情况下，这很容易受到 SQL 注入的影响。相反，使用类似于`cfqueryparam`(CF) / `mysqli->bind`(PHP) 的语言会更好地为您服务，以允许语言确保值被正确转义，从而确保您的查询是安全的。因此，沿着 java 路线并使用[将参数传递给 JDBC PreparedStatement](https://stackoverflow.com/questions/12745186/pass-parameter-from-to-mysql-statement)作为起点

```
query = con.prepareStatement("INSERT INTO egmtable (Asset_Number) VALUES( ? )");
query.setString(1, assetNumber); 
```

如果您能够指定您使用的语言，那么我可以提供更具体的答案。

# c++ - 覆盖函数参数 /

> ID：16133473
> 
> 赞同：0
> 
> 时间：2013-04-21T16:34:31.440
> 
> 标签：c++, templates, overriding

假设我们有一个 Collection 类，例如：

```
class CCollection {

public:
    void add(B& b);
    void remove(B& b);
    void doSomethingWithAllObjects();

protected:
    std::vector<B*> bs;

} 
```

其中 B 是一个抽象类，其具体行为

```
doSomethingWithAllObjects(); 
```

取决于B的具体类型，称之为C。

有没有办法派生 CCollection 并让方法

```
add(B b);
remove(B b); 
```

只接受派生类型？

我想到了像这样覆盖这样的方法：

```
class D : A{
public:
    void add(C c);
    void remove(C c);
    void doSomethingWithAllObjects();
private:
    std::vector<B*> bs;      
} 
```

或通用的 javaish 构造，例如

```
template<class T : B>
class C {
    ...//do lots of stuff
} 
```

推导几乎 100% 相同。但是你不能混合 B 的不同派生。

我已经读过几乎不可能将模板类限制为某些类型，但是必须有一种方法可以避免为 B 的每个派生编写整个类。关键是，我需要在 B 中定义的函数，所以我不能使用一个简单的模板

```
template<class T>
class B{
  ....
} 
```

当然，我可以假设其他程序员只是将正确的类型交给正确的 CCollection，但这不是精神。我想要的是强迫其他程序员只添加一种类型的 B。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:17:04.657

我不确定我是否理解正确，但我认为您正在寻找一个简单的***模板非成员类型函数***。模板函数可用于确保类型匹配。

```
template<typename T>
void global_adder(const T& cl, const T& toadd) {
    cl.add(toadd);
} 
```

*   由于不基于继承进行类型推导，这将确保 A 不添加到 B 或 B 到 C 等等。要添加的两个 args 必须具有相同的类型。而已。

*   您仅将类方法保留在基类中。制作它 `protected`并将此功能添加为`friend`.

*   这样，您现在将没有人可以调用`a.add`或`b.add`从其他地方调用（*将无法向某个类添加不同的类型*）。

*   添加或删除元素的唯一方法是通过确保类型匹配的模板函数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-21T16:45:33.827

您可以制作一个抽象基集合类，例如

```
class BaseCollection {
  public:
    void doSomethingWithAllObjects();
  protected:
    void addInternal(B* b); // consumes the element

    std::vector<B*> bs;  // or better use vector<shared_ptr> for reference count
};

template <typename C>
class Collection : public BaseCollection {
  public:
    void add(const C& c) {
      C* my_copy = new C(c);  // suppose we have a copy constructor
      addInternal(my_copy);
    }
}; 
```

如果你试图实例化`Collection<C>`where`C`不是 的子类`B`，你会得到一个编译错误。

# python - 如何将 Python 与数据库一起使用？

> ID：16133478
> 
> 赞同：5
> 
> 时间：2013-04-21T16:34:58.547
> 
> 标签：python, database

我编写了一个处理非常大数据的 Python 程序。在处理数据时，它会将处理后的数据放入一个数组中，该数组很容易增长到数百兆字节甚至超过 1 GB。

我之所以这样设置，是因为 Python 需要不断地访问数组中的数据。因为数组越来越大，这个过程很容易出错，而且很慢。

有没有办法将类似数组的数据库存储在不同的文件或数据库模块中并根据需要访问它？

也许这是一个非常基本的任务，但我不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:48:55.883

1.  如果需要，可以使用[sqlite3](http://docs.python.org/2/library/sqlite3.html)。它是python包的一部分，基本使用更简单。
2.  [用于 python 的 MySQL](http://zetcode.com/db/mysqlpython/)
3.  [用于 python 的 Postgres](http://zetcode.com/db/postgresqlpythontutorial/)

# objective-c - 尝试访问 performselector 中的私有 CCLabelBMFont 成员时的 EXC_BAD_ACCESS

> ID：16133487
> 
> 赞同：0
> 
> 时间：2013-04-21T16:35:57.330
> 
> 标签：objective-c, cocos2d-iphone, exc-bad-access, performselector

我开始了一个非 ARC cocos2d 项目。

`EXC_BAD_ACCESS`尝试访问方法中分配的私有`CCLabelBMFont`成员时会引发错误。但不知何故，我无法在方法中访问它。 我应该怎么做才能访问它的孩子？ 我在下面举了一个简单的例子：`performSelector:withObject:afterDelay:`
`title``doSomeInit``doSomething`

**啊**

```
@interface IntroLayer : CCLayer {

}
@property (nonatomic,strong) CCLabelBMFont *_title;
@end 
```

也试过这个......没有运气。 **啊**

```
@interface IntroLayer : CCLayer {
   CCLabelBMFont *_title;
} 
```

* * *

**是**

```
@implementation IntroLayer
@synthesize _title;
 .
 .
- (void)doSomeInit {
    _title = [CCLabelBMFont labelWithString:@"Test Label" fntFile:"blah.fnt"];
    [self performSelector:@selector(doSomething) withObject:nil afterDelay:5];
}

- (void)doSomething {
    int count = 0;
    for (CCSprite* la in _title.children) { //<<<<<EXC_BAD_ACCESS ERROR THROWS HERE!!!
        la.opacity = 0;
    }
    [self addChild: _title];
} 
```

* * *

下一个相关问题是：
我修改了
`_title = [CCLabelBMFont labelWithString:@"Test Label" fntFile:"blah.fnt"];`

至

```
_title=[CCLabelBMFont labelWithString:@"Test Label" fntFile:"blah.fnt"];  
[_title retain]; //this fixes EXC_BAD_ACCESS error. 
```

**但是：**
问题 2：retain 方法是否泄漏了任何内存？
也许我应该以覆盖的方法释放它`-(void)onExit`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:53:19.187

在您的方法`doSomeInit`中，您的语句直接`_title = [CCLabelBMFont labelWithString:@"Test Label" fntFile:"blah.fnt"];`分配一个自动释放`CCLabelBMFont`对象`_title`，即不使用 setter 方法。因此，该对象不会被保留，并会在应用程序返回主运行循环时立即释放。所以当`doSomething`执行时，这个对象被释放，你会得到 EXC_BAD_ACCESS 错误。
您应该使用 setter 方法`self._title = [CCLabelBMFont labelWithString:@"Test Label" fntFile:"blah.fnt"];`

# javascript - 检测您在 JavaScript 上的哪个页面？

> ID：16133491
> 
> 赞同：13
> 
> 时间：2013-04-21T16:36:04.870
> 
> 标签：javascript, html

有什么方法可以检测您在 JavaScript 中所在的页面？

为什么我想知道这样我才能检测到我在哪个页面上，然后相应地设置元素的样式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T16:38:23.990

`document.URL`将为您获取当前页面的 URL。

要检查您将使用的特定页面：

```
if ( document.URL.includes("homepage.aspx") ) {
    //Code here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T16:42:52.250

获取页面的 url 你在

```
location.href 
```

或者

```
document.URL 
```

通过 id 将样式设置为元素：

```
document.getElementById('mydiv').style.border = '1px solid black'; 
```

# r - 更改 R 中“recommenderlab”中的方法

> ID：16133494
> 
> 赞同：2
> 
> 时间：2013-04-21T16:36:23.003
> 
> 标签：r

我正在使用库（“recommenderlab”）并希望使用“*基于用户的协同过滤（UBCF）* ”创建推荐模型。默认的相似性度量是**cosine**但我想将其更改为**pearson**。这是我的代码摘录

```
## create a matrix with ratings
m <- matrix(sample(c(as.numeric(0:5), NA), 50,  
+   replace=TRUE, prob=c(rep(.4/6,6),.6)), ncol=10,  
+   dimnames=list(user=paste("u", 1:5, sep=''),  
+   item=paste("i", 1:10, sep=''))) 

## coerce into a realRatingMAtrix
r <- as(m, "realRatingMatrix")  

## Create a recommender using "UBCF" with default cosine similarity 
uu.rec=Recommender(r[1:5],method="UBCF") 
```

因为 Recommender 使用注册机制（称为“RecommenderRegistry ”），所以可以通过以下方式找到默认方法 **：**

```
getModel(uu.rec)$method 
```

[1] “余弦”

所以问题是我如何将其更改为“pearson”相似性？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:33:53.207

使用 Recommender() 的第三个参数*parameter*，将算法（也称为推荐方法）传递给您要使用的相异度量：

```
uu.rec=Recommender(data=r[1:5], method="UBCF", param=list(normalize="Z-score", method="pearson", nn=50, minRating=3, sample=F) 
```

# jquery - jQuery - removeClass 无法正常工作

> ID：16133496
> 
> 赞同：0
> 
> 时间：2013-04-21T16:36:30.113
> 
> 标签：jquery, colors, styles, removeclass

我不知道如何更改代码，removeClass 函数可以完成他的工作。目前，此功能不起作用（我认为是这样）。最大的问题是这样的：

当我单击菜单项“1”时，出现黑框，菜单项“1”文本颜色变为蓝色。可以合理地假设，当我单击菜单项“2”时，第一个菜单项“1”的颜色变为黑色（不是蓝色），而第二个菜单项“2”的颜色变为蓝色。然而，他们俩都是蓝调。

一小部分代码：

```
$(document).ready(function () {
$('#icons').click(function () {
    $('#chat-drop,#chat-drop2').hide()
        if ($('#chat-drop').is(":visible")) {
            $('#chat-drop').hide()
        $('#rodyti').removeClass('active');
        } else {
            $('#chat-drop').show()
        $('#rodyti').addClass('active');
        }
    return false;
}); 
```

完整代码：http: [//jsfiddle.net/wW75v/9/](http://jsfiddle.net/wW75v/9/)

我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:25:33.403

只是一个建议，`id`你可以使用`class`. 它会减少你的代码，如：

**从**

```
<div id="icons">
    <div id="rodyti">1</div>
    <div id="chat-drop">Menu1</div>
</div>
<div id="icons2">
    <div id="rodyti2">2</div>
    <div id="chat-drop2">Menu2</div>
</div> 
```

**至：**

```
<div class="icons">
    <div class="rodyti">1</div>
    <div class="chat-drop">Menu1</div>
</div>
<div class="icons">
    <div class="rodyti">2</div>
    <div class="chat-drop">Menu2</div>
</div> 
```

**JS 代码来自**

```
$('#icons').click(function () {
    $('#chat-drop,#chat-drop2').hide()
    // Your code here..
    return false;
});

$('#icons2').click(function () {
    $('#chat-drop,#chat-drop2').hide()
    // Your code here..
    return false;
}); 
```

**就为了这个**

```
$('.icons').click(function () {
    $('.chat-drop').hide()
    // Your code here..
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:41:31.840

您的问题似乎是当#chat-drop is(":visible") 时您正在执行removeClass()，但如果因为您刚刚在上一行中隐藏了#chat-drop，它就不会进入其中。

您可以将 removeClass() 添加到 rodyti 和 rodyti2 以便始终删除它们。但是请注意，如果您在其上方触发 hide()，则 is(":visible") 将毫无用处。

# spring - Spring @ModelAttribute 和 @SessionAttribute 行为

> ID：16133498
> 
> 赞同：1
> 
> 时间：2013-04-21T16:36:38.353
> 
> 标签：spring, session, behavior, modelattribute

`SessionAttributes`使用和`ModelAttributes`在一起的最佳方式是什么？例如，当我使用标记`ModelAttribute`方法和`SessionAttribute`类时，POJO 被添加到会话中，但是在其他使用相同名称的控制器中，`ModelAttribute`它不会检索我想要的，而是取一个出席会议。

`ModelAttributes`那么，管理with行为的最佳方法是`SessionAttributes`什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T15:26:29.167

当您在会话中处理完模型后（我假设您只想在特定控制器中使用“会话中的模型”），您必须设置`mySessionStat.setComplete()`您声明的参数中的位置`SessionStatus mySessionStat`

请参阅：
[SessionStatus api 文档](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/bind/support/SessionStatus.html)

# javascript - 重构/重建json数据树

> ID：16133499
> 
> 赞同：0
> 
> 时间：2013-04-21T16:36:42.750
> 
> 标签：javascript, json

```
{
  "company": [
    { "region": [ "Europe", "Germany" ], "productLine": "Produce" },
    { "region": [ "Europe", "France" ], "productLine": "Produce" }
    ],
    "company2": [
    { "region": [ "Europe", "Germany" ], "productLine": "Produce" },
    {  "region": [ "Americas", "USA" ], "productLine": "Produce" }
    ]
} 
```

有了这个 json 数据，我如何重建它，以便我将欧洲/美洲值作为主要（唯一）节点，而德国/法国作为它的子节点？company/company1 将是法国/德国的子子级。我似乎无法弄清楚如何在保持关系正确的同时构建数组。我本质上我需要反转节点树。

预期输出：

树形结构如下：

```
-Europe
   -France
      -Company
      -Company2 
```

我还需要一个树插件的特殊结构：

```
var source = [ { label: "Europe", items: [
   {label: "France", items: [
      {label: "SuperShop", items: [
            {label: "Produce"}
         ]}
      ]
   }]
}] 
```

我最终需要的是一个带有值对的对象数组：标签，项目。项目是一个包含子对象的对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T18:42:22.270

显然，我不知道您为什么需要新格式，但它似乎过于复杂。如果您正在查看一个大型数据集，那么您的速度会受到影响，因为在当前设置下，您将遍历新数组的每个元素以找到您正在查找的元素为了 ...

```
var inputs = {
  "company": [
    { "region": [ "Europe", "Germany" ], "productLine": "Produce" },
    { "region": [ "Europe", "France" ], "productLine": "Produce" }
    ],
    "company2": [
    { "region": [ "Europe", "Germany" ], "productLine": "Produce" },
    {  "region": [ "Americas", "USA" ], "productLine": "Produce" }
    ]
};

var converter = {};

// This new format requires a 2 step process to prevent it from being N^2
// So convert the input into a tree
//   Region
//     -> Country
//       -> Company
//         -> Array of Products
for(var company in inputs){
  for(var i = 0; i < inputs[company].length; i++){
    // Because the regions are an array of hashes it is simplest
    // to grab the value by using the previously gathered keys
    // and the key region
    var r = inputs[company][i]['region'];

    // Check if the region exists.  If not create it.
    if(!converter[r[0]]){
      converter[r[0]] = {};
    }
    // Check if the country exists.  If not create it.
    if(!converter[r[0]][r[1]]){
      converter[r[0]][r[1]] = {};
    }
    // Add the company to the array.
    if(!converter[r[0]][r[1]][company]){
      converter[r[0]][r[1]][company] = [];
    }
    converter[r[0]][r[1]][company].push(inputs[company][i]['productLine']);
  }
}

var outputs = [];

// Now walk converter and generate the desired object.
for( var region in converter){
  converted_region = {};
  converted_region["label"] = region;
  converted_region["items"] = [];
  for( var country in converter[region]){
    converted_country = {};
    converted_country["label"] = country;
    converted_country["items"] = [];
    for( var company in converter[region][country]){
      converted_company = {};
      converted_company["label"] = company;
      converted_company["items"] = [];
      for(var i = 0; i < converter[region][country][company].length; i++){
        converted_company["items"].push(converter[region][country][company][i]);
      }
      converted_country["items"].push(converted_company);
    }
    converted_region["items"].push(converted_country);
  }
  outputs.push(converted_region);
} 
```

# sql - 如何在sql字符串中添加日期变量

> ID：16133500
> 
> 赞同：1
> 
> 时间：2013-04-21T16:36:44.723
> 
> 标签：sql, sql-server-2008

我有一个基于某些数据构建的查询，我需要能够`@StartDate`在字符串中添加参数，但出现以下错误

> 从字符串转换日期和/或时间时转换失败。

部分查询是这样的：

```
DECLARE @StartDate DATETIME
DECLARE @EndDate DATETIME
DECLARE @where = ''
...

SET @where = @where + '(initDate BETWEEN ' + @StartDate + ' AND ' + @EndDate + ')' 
```

如何在不引起此问题的情况下添加`StartDate`and ？`EndDate`我试过`CONVERT(DATETIME, @StartDate)`了，但遇到同样的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:41:42.270

尝试这个

```
SET @where = @where + '(initDate BETWEEN ' + convert(varchar(10),@StartDate,104) + ' AND ' + convert(varchar(10),@EndDate,104) + ')' 
```

或者

```
SET @where = @where + '(initDate BETWEEN ' + convert(varchar(10),@StartDate,106) + ' AND ' + convert(varchar(10),@EndDate,106) + ')' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:44:43.507

只需使用[CAST 或 CONVERT](http://msdn.microsoft.com/en-us/library/ms187928.aspx)将 @StartDate 和 @EndDate 更改为字符串。根据为您提供所需精度级别的链接选择适当的方法。

# ruby-on-rails - 模型中的急切负载？

> ID：16133502
> 
> 赞同：1
> 
> 时间：2013-04-21T16:36:49.043
> 
> 标签：ruby-on-rails

我想知道我们是否可以在模型级别急切加载：

```
# country.rb
class Country < ActiveRecord::Base
  has_many :country_days

  def country_highlights
    country_days.map { |country_day| country_day.shops }.flatten.uniq.map { |shop| shop.name }.join(", ")
  end
end

# country_day.rb
class CountryDay < ActiveRecord::Base
  belongs_to :country
  has_many :country_day_shops
  has_many :shops, :through => :country_day_shops
end

# shop.rb
class Shop < ActiveRecord::Base    
end 
```

大多数时候，由于某些多态关联，很难`.includes`在控制器中使用。无论如何，我是否可以`country_highlights`在模型级别急切加载该方法，这样我就不必`.includes`在控制器中添加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:23:49.077

您不能从模型实例“急切加载” country_days，但您当然可以使用`has_many through:`. 您也可以跳过额外的地图。

```
# country.rb
class Country < ActiveRecord::Base
  has_many :country_days
  has_many :country_day_shops, through: :country_days  #EDIT: You may have to add this relationship
  has_many :shops, through: :country_day_shops #And change this one to use the new relationship above.

  def country_highlights
    shops.distinct_names.join(", ")
  end
end

# country_day.rb
class CountryDay < ActiveRecord::Base
  belongs_to :country
  has_many :country_day_shops
  has_many :shops, :through => :country_day_shops
end

# shop.rb
class Shop < ActiveRecord::Base
  def self.distinct_names
    pluck("DISTINCT shops.name")  #Edit 2: You may need this instead of 'DISTINCT name' if you get an ambiguous column name error.
  end
end 
```

将`has_many through:`使用 a`JOIN`加载关联商店记录，实际上是预先加载它们，而不是加载所有 country_day 记录，然后为每个 country_day 记录加载关联商店。

`pluck("DISTINCT name")`将返回数据库中所有唯一商店名称的数组，使用数据库执行 a `SELECT DISTINCT`，因此它不会返回重复记录，并且`pluck`当您只需要字符串时将避免加载 ActiveRecord 实例`name`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:50:31.340

*编辑：先阅读评论*

您可以缓存最终结果（在您的情况下是连接的字符串或文本记录），因此您不必加载多个级别的记录来构建此结果。

1) 添加一个`country_highlights`文本列（结果可能超出字符串列限制）

2) 使用回调将模型缓存`country_highlights`在模型中，例如在每次保存之前。

```
class Country < ActiveRecord::Base  
  has_many :country_days

  before_save :cache_country_highlights

  private

  def cache_country_highlights
    self.country_highlights = country_days.flat_map(&:shops).uniq.map(&:name).join(", ")
  end
end 
```

保存记录时缓存计算会产生一点开销，但只需要加载一个而不是三个模型记录来显示应该会大大加快控制器操作的速度，这是值得的。

# javascript - 使用 JSON/JSONP 访问 tumblr 帖子

> ID：16133509
> 
> 赞同：2
> 
> 时间：2013-04-21T16:37:19.947
> 
> 标签：javascript, json, api, jsonp, tumblr

[这](http://jsfiddle.net/dEavg/)是我正在研究的小提琴。

我正在尝试`ftsstudios.tumblr.com`使用 JSONP 加载帖子，然后在帖子阅读器上使用该数据。

```
get_data = function (data) {
    FTSPosts.raw = data;
};
$.ajax({
    url: "//api.tumblr.com/v2/blog/ftsstudios.tumblr.com/posts?api_key=myapikey&limit=20&jsonp=get_data",
    dataType: "jsonp"
}); 
```

上面的代码片段应该设置`FTSPosts.raw`为获得的响应。

这样做的问题是返回的`data`检索。`get_data``undefined`

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:34:54.873

代码中有一些错误。但问题的答案是：

```
get_data = function (data) {
   FTSPosts.raw = data;
};
$.ajax({
   url: "//api.tumblr.com/v2/blog/ftsstudios.tumblr.com/posts?api_key=myapikey&limit=20",
   dataType: "jsonp",
   jsonp: "jsonp"
}).success(get_data); 
```

2件事：

*   如果将数据类型设置为“jsonp”，则无需在 url 中提供回调（jquery 在内部进行）
*   回调的参数默认为“回调”，如果您需要更改它添加为选项`jsonp: "the_parameter_callback"`

# google-maps-sdk-ios - 如何查看 GMSPath 是否包含坐标

> ID：16133512
> 
> 赞同：1
> 
> 时间：2013-04-21T16:37:32.990
> 
> 标签：google-maps-sdk-ios

Google Maps [1.2.0](https://developers.google.com/maps/documentation/ios/releases) `GMSCoordinateBounds`现在包含一个[containsCoordinate](https://developers.google.com/maps/documentation/ios/reference/interface_g_m_s_coordinate_bounds#a88501beb137edd044e4dde9d1f73a0a5)方法，我打算用它来过滤不在 visibleRegion 上的标记。不幸的是，当您初始化 a 时`GMSCoordinateBounds`，您会得到包含您的区域或路径的边界。

所以我的问题是：是否可以查看 a`CLLocationCoordinate2D`是否在 a 内`GMSPath`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:48:20.967

所以我在回答我自己的问题。我只需要使用 pointForCoordinate 方法来查看该点是否在屏幕上。完美运行。

```
for (int i = 0; i < self.visibleLocations.count; i++) {
        Location *location = [self.visibleLocations objectAtIndex:i];
        CLLocationCoordinate2D coordinate = CLLocationCoordinate2DMake([location.lat floatValue], [location.lng floatValue]);
        CGPoint markerPoint = [self.googleMap.projection pointForCoordinate:coordinate];
        if (markerPoint.x >= 0 && markerPoint.y >= 0 && markerPoint.x <= self.googleMap.frame.size.width && markerPoint.y <= self.googleMap.frame.size.height) {
            GMSMarker *marker = [GMSMarker markerWithPosition:coordinate];
            marker.title = location.title;
            marker.icon = [UIImage imageNamed:@"search_measle_small.png"];
            marker.map = self.googleMap;
        }
    } 
```

# php - PDO PARAM STR 之后的值是什么意思？

> ID：16133515
> 
> 赞同：0
> 
> 时间：2013-04-21T16:37:36.803
> 
> 标签：php, pdo

我只是知道`12`这个例子中的数字意味着什么：

```
$req->bindParam('titre', $titre, PDO::PARAM_STR, 12); 
```

我真的不明白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:40:48.327

它表示数据类型的长度，在这种情况下是字符串参数的长度。

# ajax - ASP.NET MVC AjaxActionLink

> ID：16133516
> 
> 赞同：0
> 
> 时间：2013-04-21T16:37:41.503
> 
> 标签：ajax, asp.net-mvc

我的部分视图没有加载，我正在使用 AjaxActionLink 这是我的视图，我称之为部分视图

```
@foreach (var p in Model.Rooms)
{

<div class="room">
    <h3>@p.RoomTitle</h3>
    <img src="@p.PhotoRoom" alt="room"/>
    <h4>@p.TitlePrice</h4>
    <blockquote>@p.Description</blockquote>

    @Ajax.ActionLink("Order room", "PartialDetail", new { @p.RoomID }, new AjaxOptions { UpdateTargetId = "results", LoadingElementId = "loading",HttpMethod = "POST",InsertionMode = InsertionMode.InsertAfter})

</div>

} 
```

这是我的控制器

```
 public PartialViewResult PartialDetail(int roomid)
    {

        Room rooms =
            repository.Room.FirstOrDefault(p => p.RoomID == roomid);
        var viewModel = new RoomEditViewModel
                            {
                                RoomID = rooms.RoomID,
                                RoomTitle = rooms.RoomTitle,
                                Description = rooms.Description,
                                PhotoRoom = rooms.PhotoRoom
                            };
        ViewBag.room = roomid;

            return PartialView(viewModel);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:20:51.443

修复了您的 ajax 操作链接

你设置的

```
 @Ajax.ActionLink("Order room", "PartialDetail", new { @p.RoomID } 
```

应该

```
 @Ajax.ActionLink("Order room", "PartialDetail", new { roomid = @p.RoomID } 
```

作为建议，在您的操作中设置接受的协议

```
[HttpPost]
public PartialViewResult PartialDetail(int roomid) 
```

# java - 当您需要使用浮点数时，如何真正避免浮点错误？

> ID：16133520
> 
> 赞同：4
> 
> 时间：2013-04-21T16:38:11.350
> 
> 标签：java, floating-point, precision, floating-accuracy, floating-point-precision

我正在尝试使用一些 UI 按钮来影响 3D 模型的翻译，以将位置移动 0.1 或 -0.1。

我的模型位置是一个三维浮点数，所以简单地将 0.1f 添加到其中一个值会导致明显的舍入误差。虽然我可以使用 BigDecimal 之类的东西来保持精度，但我仍然必须将它从浮点数转换为最后的浮点数，它总是会导致愚蠢的数字，让我的 UI 看起来像一团糟。

我可以只显示显示的值，但舍入错误只会随着更多的编辑而变得更糟，它们使我的保存文件很难阅读。

那么当我需要使用浮点数时，如何真正避免这些错误呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:50:29.620

[Kahan 求和](http://en.wikipedia.org/wiki/Kahan_summation_algorithm)和成对[求和](http://en.wikipedia.org/wiki/Pairwise_summation)算法有助于减少浮点错误。 [这是 Kahan 算法的一些 Java 代码](http://books.google.com/books?id=h0d8hVA5HyQC&pg=PA83&lpg=PA83&dq=kahan+summation+java&source=bl&ots=AWPmoFUht1&sig=G0ocDY_RkMXMsuEdTyvhvd6dIfs&hl=en&sa=X&ei=rhh0UdiJAoqmiQKM6ICwCg&ved=0CDQQ6AEwAA#v=onepage&q=kahan%20summation%20java&f=false)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T16:54:51.997

我会使用一个`Rational`类。那里有很多 -[这个](http://911programming.wordpress.com/2010/05/09/rational-number-class-in-java-1/)看起来应该可以工作。

一个重要的成本是当`Rational`被渲染为 a`float`时，一个当分母被减少到`gcd`. 我发布的那个让分子和分母始终处于完全减少的状态，如果你总是加或减 1/10，这应该是非常有效的。

[此](http://staff.washington.edu/dittrich/talks/java/Rational/Rational.java)实现保持标准化的值（即具有一致的符号）但未减少。

您应该选择最适合您的使用的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T21:05:40.853

一个简单的解决方案是使用固定精度。即你想要的整数 10 倍或 100 倍。

```
float f = 10;
f += 0.1f; 
```

变成

```
int i = 100;
i += 1;  // use an many times as you like
// use i / 10.0 as required. 
```

在任何情况下我都不会使用`float`，因为你得到的舍入错误比`double`几乎没有好处（除非你有数百万个浮点值） `double`为你提供了 8 位以上的精度，并且通过合理的舍入将不会看到这些错误。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-21T19:58:39.610

如果您坚持使用浮点数：避免错误的最简单方法是使用*精确*但接近所需值的浮点数

圆形（2^n * 值）* 1/2^n。

n 是位数，值要使用的数字（在您的情况下为 0.1）

在您的情况下，精度越来越高：

n = 4 => 0.125
n = 8（字节）=> 0.9765625
n = 16（短）=> 0.100006103516 ....

长数链是二进制转换的产物，实数的位数少得多。

由于浮点数是精确的，因此加法和减法不会引入偏移误差，但只要位数不超过浮点值所保持的长度，就始终是可预测的。

如果您担心使用此解决方案会影响您的显示（因为它们是奇数浮点数），请仅使用和存储整数（步长增加 -1/1）。内部设置的最终值是

x = 值 * 步长。

随着步长增加或减少 1，精度将保持不变。

# ruby - Ruby正则表达式情况

> ID：16133526
> 
> 赞同：0
> 
> 时间：2013-04-21T16:38:56.950
> 
> 标签：ruby, regex

我正在尝试读取文本文件，将内容与正则表达式匹配，然后将匹配项写入另一个文件。我有代码：

```
names = File.read('myfile.txt')
open('myfile1.txt', 'a') { |f|
  f.puts names[/" name="(\w+)" title="First/]
} 
```

我得到`" name="firstname" title="First`了，但我只需要它来写`firstname`。如何捕获此内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:42:37.480

您应该能够使用该方法从正则表达式（括号内的部分）中选择第一个**捕获组。**[`MatchData#[]`](http://ruby-doc.org/core-2.0/MatchData.html)但首先，您需要一个 MatchData 实例来表示您可以通过更改代码以调用`.match`RegExp 本身来获得的匹配项。例如：

```
names = File.read('myfile.txt')
open('myfile1.txt', 'a') { |f|
  if match = /" name="(\w+)" title="First/.match(names)
    f.puts match[1]
  end
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:12:57.997

改变

```
names[/" name="(\w+)" title="First/] 
```

至

```
names[/" name="(\w+)" title="First/, 1] 
```

# java - java swingworker没有更新GUI

> ID：16133530
> 
> 赞同：1
> 
> 时间：2013-04-21T16:39:08.150
> 
> 标签：java, swing, swingworker

基本上问题是我的 SwingWorker 没有做我想做的事，我将在这里使用一些简化的代码示例，这些示例与我的代码相似，但没有令人讨厌的不相关细节。

在我的案例中，我有两个课程：

1.  MainPanel 扩展 JPanel
2.  GalleryPanel 扩展 JPanel

这个想法是 MainPanel 是一个占位符类，并且在运行时动态地我将其他 JPanel 添加到它（并删除旧的）。

有效的代码，取自 MainPanel 类内部：

```
public void initGalleryPanel() {
    this.removeAll();

    double availableWidth = this.getSize().width;
    double availableHeight = this.getSize().height;

    double width = GamePanel.DIMENSION.width;
    double height = GamePanel.DIMENSION.height;

    double widthScale = availableWidth / width;
    double heightScale = availableHeight / height;
    final double scale = Math.min(widthScale, heightScale);

    add(new GalleryPanel(scale));

    revalidate();
    repaint();
} 
```

这里的问题是创建 GalleryPanel 非常慢（> 1 秒），我想显示一些加载圈并防止它阻塞 GUI，所以我将其更改为：

```
public void initGalleryPanel() {
    this.removeAll();

    double availableWidth = this.getSize().width;
    double availableHeight = this.getSize().height;

    double width = GamePanel.DIMENSION.width;
    double height = GamePanel.DIMENSION.height;

    double widthScale = availableWidth / width;
    double heightScale = availableHeight / height;
    final double scale = Math.min(widthScale, heightScale);

    new SwingWorker<GalleryPanel, Void>() {
        @Override
        public GalleryPanel doInBackground() {
            return new GalleryPanel(scale);
        }

        @Override
        public void done() {
            try {
                add(get());
            } catch (InterruptedException | ExecutionException ex) {
                Logger.getLogger(MainPanel.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }.execute();        

    revalidate();
    repaint();
} 
```

但是现在 GalleryPanel 不再出现，任何帮助将不胜感激。

额外信息：GalleryPanel 的实例创建需要很长时间，因为它呈现了它应该在实例化时显示的内容，因此paintComponent 只能绘制该图像。

问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T16:43:23.567

您对`revalidate()`和`repaint()`在 GalleryPanel 有机会创建或添加之前立即发生的调用：

```
 @Override
    public void done() {
        try {
            add(get());
        } catch (InterruptedException | ExecutionException ex) {
            Logger.getLogger(MainPanel.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
}.execute();        

revalidate();
repaint(); 
```

`done()`添加新组件后，请尝试从方法中进行这些调用：

```
 @Override
    public void done() {
        try {
            add(get());
            revalidate();
            repaint();
        } catch (InterruptedException | ExecutionException ex) {
            Logger.getLogger(MainPanel.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
}.execute(); 
```

# c# - 如何运行检查以查看我的播放器是否没有与对象发生碰撞？

> ID：16133532
> 
> 赞同：-1
> 
> 时间：2013-04-21T16:39:12.620
> 
> 标签：c#, xna, collision

我正在完成我的 XNA 游戏中的另一个功能，但我想知道你应该如何检查玩家是否停止与对象相交。

目前，`bool`当玩家与一颗小行星相交（即躲在它后面）时，我认为这是真的。但是我需要找出玩家何时停止与所述小行星相交，以允许`bool`返回 false 并为我的敌人提供不同的移动路径。

到目前为止的代码：

```
 Rectangle rectangle1;
    Rectangle rectangle2;

    rectangle1 = new Rectangle((int)player.Position.X, (int)player.Position.Y, player.Width, player.Height);

    for (int i = 0; i < asteroids.Count; i++)
    {
        rectangle2 = new Rectangle((int)asteroids[i].Position.X, (int)asteroids[i].Position.Y, asteroids[i].Width, asteroids[i].Height);

        if (rectangle1.Intersects(rectangle2))
        {
            hidden = true;
        }
    } 
```

我只是不知道如何检查其他状态。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:36:04.780

我会稍微改变这种方法。

首先不要每帧声明一个矩形。而是在创建小行星和玩家时创建矩形。然后在每个相应的更新中，用实体位置更新矩形的位置。

因此，rectangle1 现在是 player.rectangle（我建议 get sets，但出于此目的，这不是问题）， rectangle2 是 asteroid.rectangle。

接下来，我将进行两项更改之一。如果您只关心检查是否发生了冲突，请在执行检查之前将布尔值更改为 false。如果没有发生冲突，则该布尔值将保持为假，但如果发生冲突，则布尔值应更改为真，然后您需要使用 break 关键字退出循环。

```
// ensure rectangle's positions reflect the entity's position before checking.
hidden = false;

for (int i = 0; i < asteroids.Count; i++)
{
    if (player.rectangle.Intersects(asteroids[i].rectangle))
    {
        hidden = true;
    }
} 
```

或者，如果您需要检查多个碰撞，我会使用稍微不同的方法。如果发生碰撞，我会存储小行星的位置，以便以后确定如何影响玩家的运动。这将允许一次处理多个冲突。由于其他原因，您可能仍然需要布尔值，所以我保留了它，但您可以查看列表中有多少元素。我还要注意，要更准确地处理碰撞，需要更多数据，例如质量、重力等，但这是一个完全独立的话题。

```
// ensure rectangle's positions reflect the entity's position before checking.

List<Vector2> collisionPositions = new List<Vector2> positions;
hidden = false;

for (int i = 0; i < asteroids.Count; i++)
{
    if (player.rectangle.Intersects(asteroids[i].rectangle))
    {
        hidden = true;
        collisionPositions.add(asteroids[i].position);

    }
} 
```

# haskell - 将递归函数重写为管道函数组合

> ID：16133540
> 
> 赞同：3
> 
> 时间：2013-04-21T16:40:11.307
> 
> 标签：haskell, recursion, pointfree, pipelined-function

我正在写作业（CIS194 Haskell 课程）。

我必须将以下递归函数重写为管道函数（没有明显的递归）。

```
fun2 :: Integer -> Integer
fun2 1 = 0
fun2 n 
    | even n = n + fun2 ( n ‘div‘ 2 )
    | otherwise = fun2 (3 * n + 1) 
```

我的第一次尝试是在这里：

```
fun2''' = sum 
          . (filter (even)) 
          . unfoldr (\x -> if (even x) 
                          then Just (x, x `div` 2)
                          else if (x==1) then Nothing 
                               else Just (x, x * 3 + 1)) 
```

这是一个正常的解决方案还是很奇怪？

我怎样才能`fun2`更好地重写？

`takeWhile`现在我尝试使用和编写版本`iterate`

我的第二次尝试：

```
fun2'' :: Integer -> Integer
fun2'' = sum 
         . (filter even) 
         . takeWhile (/=1) 
         . iterate (\x -> if even x 
                          then x `div` 2
                          else x * 3 + 1 ) 
```

我`until`现在版本有点问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:57:01.070

看起来不错，这里唯一在 Haskell 中有点危险的是`else if`. 在这种情况下，它可以用应用风格很好地重写：

```
{-# LANGUAGE TupleSections     #-}

import Control.Applicative
import Control.Monad (guard)

fun2''' = sum 
          . filter even
          . unfoldr ( \x -> fmap (x,) $
                   x`div`2 <$ guard(even x)
               <|> x*3 + 1 <$ guard( x/=1 )
             ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:12:35.773

嵌套`if`s 现在可以用[多路 IF](http://www.haskell.org/ghc/docs/7.6-latest/html/users_guide/syntax-extns.html#multi-way-if)编写：

```
g :: Integer -> Integer
g = sum . 
     unfoldr (\x-> 
          if | even x    -> Just (x, x `div` 2) 
             | x==1      -> Nothing 
             | otherwise -> Just (0, x * 3 + 1)) 
```

或者您可以定义自己的*if*运算符，

```
(??) t (c,a) | t = c | otherwise = a

g = sum . unfoldr (\x-> even x ?? (Just (x, x `div` 2) ,
                        (x==1) ??  (Nothing, Just (0, x * 3 + 1)))) 
```

`until`与, with`sum`和`filter`融合到其中的相同功能：

```
g = fst . until ((==1).snd) 
            (\(s,n) -> if even n then (s+n,n`div`2) else (s,3*n+1)) 
    . ((,)0) 
```

或者

```
g = sum . filter even . f

f :: Integer -> [Integer]
f = (1:) . fst . until ((==1).snd) 
            (\(s,n) -> if even n then (n:s,n`div`2) else (n:s,3*n+1)) 
    . ((,)[]) 
```

最后一个函数`f`显示给定输入数字的整个 Collat​​z 序列，反转。

# c - 谁能用C解释这个结构？

> ID：16133542
> 
> 赞同：1
> 
> 时间：2013-04-21T16:40:20.650
> 
> 标签：c, pointers, structure

我有这个代码

```
#define MAX_DIM 3
struct kd_node_t
{
    double x[MAX_DIM];
    struct kd_node_t *left, *right;
};

struct kd_node_t wp[] = {
    {{2, 3}}, {{5, 4}}, {{9, 6}}, {{4, 7}}, {{8, 1}}, {{7, 2}}
}; 
```

我不明白这种情况下的结构声明。请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:44:13.617

这是使用大括号初始化。

该数组给出了一个逗号分隔的列表，初始化数组中的每个结构（如果给出了明确的大小，我相信剩余的结构将被初始化为零）。

既然都差不多，就拿第一个吧`{{2,3}}`。

这有一个元素，`{2,3}`它告诉您如何初始化`x`成员。由于只指定了两个值，余数将被初始化为零，给出`[2,3,0]`. 同样，`left`和`right`被初始化为空指针。

数组中的其余结构以类似方式初始化。

# salesforce - Force IDE - 基本编译问题

> ID：16133546
> 
> 赞同：1
> 
> 时间：2013-04-21T16:41:10.043
> 
> 标签：salesforce

我创建了一个 Apex 类，并且能够从 Salesforce 服务器部署/下载。

我正在尝试运行一些代码：

```
public class Class1 
{
   public void Run1() { System.debug('Run1'); } // this works
   public void Run2() { System.debug('Run2'); } // then I add this, but doesn't exist?!
} 
```

在执行匿名窗口中：

```
Class1 c = new Class1();
c.Run2(); 
```

“第 2 行第 1 列编译错误方法不存在或签名不正确：[Class1].Run2()

构建项目时，没有报告构建状态，也不知道构建是否成功。有没有办法确认它有效/无效？“问题”选项卡中未列出任何错误/警告。如果我输入一个明显的语法错误，这不应该列出错误吗？请注意，语法错误有红色的小图标。

Execute Anonymous 方法正在执行我的班级的旧版本。它不识别新版本。假设我的项目编译成功，为什么匿名部分不执行新方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:37:45.347

我有时会遇到类似的问题，通常是由于 IDE 没有将文件正确保存在服务器中。

到目前为止，我发现的唯一“修复”是清理项目、从服务器刷新并检查它是否保存了更改。

希望有人对此有解决方案

# .htaccess - htaccess 多个文件重写到root

> ID：16133549
> 
> 赞同：1
> 
> 时间：2013-04-21T16:41:34.183
> 
> 标签：.htaccess, mod-rewrite, rewrite

我有一个站点设置，其中包含重写的文件夹中`php`的脚本：`/pages/`

`www.example.com/pages/settings.php`

...至...

`www.example.com/settings`

使用此`.htaccess`代码：

```
RewriteEngine On
RewriteBase /
RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?action=$1 [QSA]
RewriteRule ^([a-zA-Z0-9_-]+)/$ index.php?action=$1 [QSA] 
```

但我也希望用户配置文件也重定向：

`www.exmaple.com/user123`

现在我不确定最好的方法是什么，因为我也有页面重定向到根目录。

我有一个`user.php`根据以下`GET`变量提取用户数据的方法`url`：

`(www.exmaple.com/pages/user.php?username=user123)`

但我想知道这是否可以重写为 root`htaccess`以及初始页面重写？

我试图做这样的事情，但我还没有让它正常工作：

```
RewriteRule ^([a-zA-Z0-9_-]+)$ /pages/user.php?username=$1 [QSA]
RewriteRule ^([a-zA-Z0-9_-]+)/$ /pages/user.php?username=$1 [QSA] 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:50:08.110

首先，您不需要复制您的规则。您可以`/?`在末尾使用可选的斜杠

```
RewriteRule ^([a-zA-Z0-9_-]+)/?$ index.php?action=$1 [QSA] 
```

与

```
RewriteRule ^([a-zA-Z0-9_-]+)/?$ /pages/user.php?username=$1 [QSA] 
```

这些规则允许带有或不带有斜杠的请求。

对于您的问题，我不知道您如何实现这一点，因为您想将相同的字符串重写为两个不同的目标。如果没有前缀或唯一字符串将用户与操作请求区分开来，则不能这样做。

`/user/user123`您可以使用此规则重写

```
RewriteRule ^user/([a-zA-Z0-9_-]+)/?$ /pages/user.php?username=$1 [L,QSA] 
```

您必须将此规则放在操作规则之前，因为操作规则具有更通用的匹配模式。

我还会在操作规则前面加上

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

防止真实文件，如`index.php`, `user.php`, css, javascript 或 image 文件被重写。

# php - 添加并显示金额的百分比

> ID：16133554
> 
> 赞同：2
> 
> 时间：2013-04-21T16:41:49.713
> 
> 标签：php, javascript

我有一个计算输入金额百分比的javascript，但我很困惑如何添加金额+百分比然后显示。

```
 $(document).ready(function(){
    $('#shares').keyup(function(){
        $('#result').text($('#shares').val() *(10/100));
    });    
}); 
```

这是HTML代码

```
 <label>Amount:</label><input name="shares" id="shares" type="text" />
        Total Value: <span id="result"></span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:53:02.560

```
 $('#shares').on('keyup', function(){
     var value = parseInt( $(this).val())
     $('#result').html( value + value *.1 ) 
  }); 
```

这是一个例子：http: [//jsfiddle.net/3QELR/](http://jsfiddle.net/3QELR/)

您可以`parseFloat`在需要的十进制值中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:58:45.877

将其更改为：-

```
$(document).ready(function(){
$('#shares').keyup(function(){
var value = parseInt( $(this).val())
    $('#result').text(value + $('#shares').val() *(10/100));
}); 
```

});

# java - 将响应传递回 android 但在 servlet 中获得 nullPointerException

> ID：16133556
> 
> 赞同：2
> 
> 时间：2013-04-21T16:42:03.157
> 
> 标签：java, android, servlets

我有一个 android android 应用程序，我通过将变量传递给 servlet 来更新产品表。它更新了表格，但问题正在响应 android。在 servlet 中，当我试图将响应传回给 android 时，我得到了一个 nullpointerexception。似乎无法理解为什么我会得到这个，请帮助:)

```
 else if (option.equalsIgnoreCase(("addProduct"))) {

            //update code runs here and it is successfull

            if(optionmobile.equalsIgnoreCase("mobileaddproduct")){

                if(merchID != null){

                response.setContentType("text/html");
                ObjectOutputStream oos = new ObjectOutputStream(response.getOutputStream());
                oos.writeObject("executed");                        
                oos.flush();
                oos.close();       
               //if the merch != null; how do you stop the program here!
            }else{

                response.setContentType("text/html");
                ObjectOutputStream oos = new ObjectOutputStream(response.getOutputStream());
                oos.writeObject("faliedToUpload");                    
                oos.flush();
                oos.close();

            }

        }else{                   
            session.setAttribute("testing", u);
            address = "test.jsp";
            }
            //my guess it breaks here after it runs the first condition.
            RequestDispatcher dispatcher = request.getRequestDispatcher(address);
            dispatcher.forward(request, response);       

        } 
```

这是一个 Java Web 应用程序，所以这就是为什么我有 if(optionmobile.equalsIgnoreCase("mobileaddproduct")){ 以便知道请求来自移动设备！

```
WARNING: StandardWrapperValve[MerchantController]: PWC1406: Servlet.service() for     servlet MerchantController threw exception
java.lang.NullPointerException
    at com.gobetween.merchant.MerchantController.processRequest(MerchantController.java:337)
at com.gobetween.merchant.MerchantController.doPost(MerchantController.java:374)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:232)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722) 
```

# templates - 在 Laravel 4 中共享视图和数据

> ID：16133557
> 
> 赞同：1
> 
> 时间：2013-04-21T16:42:06.467
> 
> 标签：templates, views, laravel, laravel-4, blade

我目前正在使用 Laravel 4 构建一个简单的日记应用程序，我想创建一个在所有管理视图中共享的侧边栏和标题。标题将要求显示用户数据，而侧栏将包含指向应用程序各个部分的链接。

我真的不确定如何解决这个问题并查看了 View Composers，但我不确定如何正确实现它们，或者这是否是它们的目的。

如果您可以向我提供有关此内容的任何清晰文档或任何其他很棒的资源。谢谢。

加雷斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:43:05.347

我已经设法通过 View Composer 完成了我想做的事情，但我想知道您对此的看法，以及它是否会被视为最佳实践或好的解决方案。

```
// View::composer for layouts.admin in my routes.php file
View::composer('layouts.admin', function($view)
{
    $user = AdminController::get();

    $view->with('user', $user);
});

// public static method get() in AdminController
public static function get()
{
    $userGreeting = Auth::user()->greetings()->orderBy(DB::raw('RAND()'))->first();

    $user = new User;
    $user->first_name = Auth::user()->first_name;
    $user->greeting = $userGreeting->greeting;

    return $user;
}

// layouts.admin view
{{ Html::link('logout', 'Logout') }}
<p>Hey {{ $user->first_name }}</p>
<p>{{ $user->greeting }}</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T20:29:02.597

对于不那么复杂的网站，我喜欢使用刀片创建一个简单的模板。

```
//file: template.blade.php
@include('includes/header')
@include('includes/sidebar')
@include($view)
@include('includes/footer') 
```

`header.blade.php`显然，我将`sidebar.blade.php`在.`footer.blade.php``views/includes folder`

然后，在控制器中，它就像...

```
$view = 'exampleView';
return View::make('template')->with('view', $view); 
```

此外，您传递到模板视图的所有变量也将可用于该模板中调用的每个包含。

# ios - 为什么我的segue没有触发？

> ID：16133558
> 
> 赞同：1
> 
> 时间：2013-04-21T16:42:16.020
> 
> 标签：ios, xml, uitabbarcontroller, uistoryboard, uistoryboardsegue

在扫描了关于这个主题的所有线程之后，没有一个建议可以解决这个问题。奇怪的是，这个问题只是突然浮出水面，似乎没有明显的原因。昨晚效果很好。

导航基本上是：

```
 /-Navigation Controller -> View -> View (this last connection doesn't fire. Pushing the "next" button results in nothing.
                  /
TabBarController ---- Navigation Controller -> View -> View (works)
                 \
                  \
                   \-Same as above. (works) 
```

据我所知，设置是相同的，我已经完成了删除/清理/重建有问题的视图和连接的繁忙工作，但没有成功。

这是我的故事板 XML 中的（希望是）相关部分

```
 <!--TDC2-->
    <scene sceneID="ing-Ye-PVs">
        <objects>
            <viewController id="dNt-CQ-X0M" customClass="TDC2" sceneMemberID="viewController">
                <view key="view" contentMode="scaleToFill" id="ZIK-gx-Nq4">
                    <rect key="frame" x="0.0" y="20" width="320" height="460"/>
                    <autoresizingMask key="autoresizingMask" flexibleMaxX="YES" flexibleMaxY="YES"/>
                    <subviews>
                        <textField opaque="NO" clipsSubviews="YES" contentMode="scaleToFill" contentHorizontalAlignment="left" contentVerticalAlignment="center" borderStyle="line" placeholder="Trip Number" textAlignment="center" minimumFontSize="17" translatesAutoresizingMaskIntoConstraints="NO" id="xbU-au-gtQ">
                            <constraints>
                                <constraint firstAttribute="height" constant="43" id="iMS-ez-xo8"/>
                            </constraints>
                            <fontDescription key="fontDescription" type="system" pointSize="14"/>
                            <textInputTraits key="textInputTraits" keyboardType="numberPad"/>
                            <connections>
                                <outlet property="delegate" destination="dNt-CQ-X0M" id="DU2-gu-IxO"/>
                            </connections>
                        </textField>
                        <textField opaque="NO" clipsSubviews="YES" contentMode="scaleToFill" contentHorizontalAlignment="left" contentVerticalAlignment="center" borderStyle="line" placeholder="Departure" textAlignment="center" minimumFontSize="17" translatesAutoresizingMaskIntoConstraints="NO" id="B5M-Ti-5nL">
                            <constraints>
                                <constraint firstAttribute="height" constant="43" id="aUt-lR-eT8"/>
                            </constraints>
                            <fontDescription key="fontDescription" type="system" pointSize="14"/>
                            <textInputTraits key="textInputTraits"/>
                            <connections>
                                <outlet property="delegate" destination="dNt-CQ-X0M" id="XyV-Of-fnR"/>
                            </connections>
                        </textField>
                        <textField opaque="NO" clipsSubviews="YES" contentMode="scaleToFill" contentHorizontalAlignment="left" contentVerticalAlignment="center" borderStyle="line" placeholder="Out Fuel" textAlignment="center" minimumFontSize="17" translatesAutoresizingMaskIntoConstraints="NO" id="yxx-QE-lRo">
                            <constraints>
                                <constraint firstAttribute="height" constant="43" id="i11-f6-Kco"/>
                            </constraints>
                            <fontDescription key="fontDescription" type="system" pointSize="14"/>
                            <textInputTraits key="textInputTraits"/>
                            <connections>
                                <outlet property="delegate" destination="dNt-CQ-X0M" id="SPC-XB-pOD"/>
                            </connections>
                        </textField>
                        <textField opaque="NO" clipsSubviews="YES" contentMode="scaleToFill" contentHorizontalAlignment="left" contentVerticalAlignment="center" borderStyle="line" placeholder="Start Hobbs" textAlignment="center" minimumFontSize="17" translatesAutoresizingMaskIntoConstraints="NO" id="wAx-ux-6y5">
                            <constraints>
                                <constraint firstAttribute="height" constant="43" id="la9-aF-SWs"/>
                            </constraints>
                            <fontDescription key="fontDescription" type="system" pointSize="14"/>
                            <textInputTraits key="textInputTraits" keyboardType="numberPad"/>
                            <connections>
                                <outlet property="delegate" destination="dNt-CQ-X0M" id="4UI-cl-zxC"/>
                            </connections>
                        </textField>
                        <segmentedControl opaque="NO" contentMode="scaleToFill" contentHorizontalAlignment="left" contentVerticalAlignment="top" segmentControlStyle="plain" selectedSegmentIndex="0" translatesAutoresizingMaskIntoConstraints="NO" id="PXM-z4-ndS">
                            <segments>
                                <segment title="PIC"/>
                                <segment title="SIC"/>
                            </segments>
                        </segmentedControl>
                        <label opaque="NO" clipsSubviews="YES" userInteractionEnabled="NO" contentMode="left" text="Who is flying?" lineBreakMode="tailTruncation" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="frD-Qe-Ib9">
                            <fontDescription key="fontDescription" type="system" pointSize="17"/>
                            <color key="textColor" cocoaTouchSystemColor="darkTextColor"/>
                            <nil key="highlightedColor"/>
                        </label>
                        <label opaque="NO" clipsSubviews="YES" userInteractionEnabled="NO" contentMode="left" text="Trip" lineBreakMode="tailTruncation" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="Fuc-2m-9Zy">
                            <constraints>
                                <constraint firstAttribute="width" constant="30" id="7cK-5c-HM9"/>
                            </constraints>
                            <fontDescription key="fontDescription" type="system" pointSize="17"/>
                            <color key="textColor" cocoaTouchSystemColor="darkTextColor"/>
                            <nil key="highlightedColor"/>
                        </label>
                        <label opaque="NO" clipsSubviews="YES" userInteractionEnabled="NO" contentMode="left" text="Depart" lineBreakMode="tailTruncation" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="uvI-4w-aME">
                            <fontDescription key="fontDescription" type="system" pointSize="17"/>
                            <color key="textColor" cocoaTouchSystemColor="darkTextColor"/>
                            <nil key="highlightedColor"/>
                        </label>
                        <label opaque="NO" clipsSubviews="YES" userInteractionEnabled="NO" contentMode="left" text="Fuel" lineBreakMode="tailTruncation" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="fY7-7H-utj">
                            <fontDescription key="fontDescription" type="system" pointSize="17"/>
                            <color key="textColor" cocoaTouchSystemColor="darkTextColor"/>
                            <nil key="highlightedColor"/>
                        </label>
                        <label opaque="NO" clipsSubviews="YES" userInteractionEnabled="NO" contentMode="left" text="Hobbs" lineBreakMode="tailTruncation" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="WI2-MH-Xfw">
                            <fontDescription key="fontDescription" type="system" pointSize="17"/>
                            <color key="textColor" cocoaTouchSystemColor="darkTextColor"/>
                            <nil key="highlightedColor"/>
                        </label>
                    </subviews>
                    <color key="backgroundColor" white="1" alpha="1" colorSpace="custom" customColorSpace="calibratedWhite"/>
                    <gestureRecognizers/>
                    <constraints>
                        <constraint firstItem="fY7-7H-utj" firstAttribute="centerY" secondItem="yxx-QE-lRo" secondAttribute="centerY" type="default" id="33E-Ci-sZT"/>
                        <constraint firstAttribute="trailing" secondItem="B5M-Ti-5nL" secondAttribute="trailing" constant="20" symbolic="YES" type="default" id="4YK-YK-l5r"/>
                        <constraint firstItem="fY7-7H-utj" firstAttribute="baseline" secondItem="yxx-QE-lRo" secondAttribute="baseline" type="default" id="4eX-Xh-6rd"/>
                        <constraint firstItem="wAx-ux-6y5" firstAttribute="top" secondItem="yxx-QE-lRo" secondAttribute="bottom" constant="8" symbolic="YES" type="default" id="4pq-KW-vdv"/>
                        <constraint firstItem="B5M-Ti-5nL" firstAttribute="top" secondItem="xbU-au-gtQ" secondAttribute="bottom" constant="8" symbolic="YES" type="default" id="6Dc-8Z-L4q"/>
                        <constraint firstItem="yxx-QE-lRo" firstAttribute="top" secondItem="B5M-Ti-5nL" secondAttribute="bottom" constant="8" symbolic="YES" type="default" id="7HV-va-Jwi"/>
                        <constraint firstItem="Fuc-2m-9Zy" firstAttribute="leading" secondItem="ZIK-gx-Nq4" secondAttribute="leading" constant="42" id="90D-A5-UCb"/>
                        <constraint firstItem="frD-Qe-Ib9" firstAttribute="centerX" secondItem="PXM-z4-ndS" secondAttribute="centerX" type="default" id="9Df-Ov-WRu"/>
                        <constraint firstItem="frD-Qe-Ib9" firstAttribute="top" secondItem="wAx-ux-6y5" secondAttribute="bottom" constant="8" symbolic="YES" type="default" id="ERP-rE-3ih"/>
                        <constraint firstAttribute="trailing" secondItem="yxx-QE-lRo" secondAttribute="trailing" constant="20" symbolic="YES" type="default" id="Ibi-pB-iAX"/>
                        <constraint firstItem="WI2-MH-Xfw" firstAttribute="centerY" secondItem="wAx-ux-6y5" secondAttribute="centerY" type="default" id="JXF-d6-wg8"/>
                        <constraint firstAttribute="trailing" secondItem="PXM-z4-ndS" secondAttribute="trailing" constant="20" symbolic="YES" type="default" id="K0y-pX-ZFf"/>
                        <constraint firstItem="wAx-ux-6y5" firstAttribute="leading" secondItem="WI2-MH-Xfw" secondAttribute="trailing" constant="8" symbolic="YES" type="default" id="P6r-KM-Uj7"/>
                        <constraint firstItem="Fuc-2m-9Zy" firstAttribute="centerY" secondItem="xbU-au-gtQ" secondAttribute="centerY" type="default" id="RhF-sp-4Ru"/>
                        <constraint firstItem="xbU-au-gtQ" firstAttribute="leading" secondItem="B5M-Ti-5nL" secondAttribute="leading" type="default" id="Rx5-ms-1N7"/>
                        <constraint firstAttribute="trailing" secondItem="wAx-ux-6y5" secondAttribute="trailing" constant="20" symbolic="YES" type="default" id="Tth-zq-zVg"/>
                        <constraint firstItem="PXM-z4-ndS" firstAttribute="leading" secondItem="ZIK-gx-Nq4" secondAttribute="leading" constant="20" symbolic="YES" type="default" id="Z1c-rB-axa"/>
                        <constraint firstItem="Fuc-2m-9Zy" firstAttribute="baseline" secondItem="xbU-au-gtQ" secondAttribute="baseline" type="default" id="aU1-zo-HBe"/>
                        <constraint firstItem="xbU-au-gtQ" firstAttribute="top" secondItem="ZIK-gx-Nq4" secondAttribute="top" constant="20" symbolic="YES" type="default" id="e3G-YD-OOE"/>
                        <constraint firstItem="wAx-ux-6y5" firstAttribute="leading" secondItem="yxx-QE-lRo" secondAttribute="leading" type="default" id="fpp-at-Fis"/>
                        <constraint firstItem="yxx-QE-lRo" firstAttribute="leading" secondItem="fY7-7H-utj" secondAttribute="trailing" constant="8" symbolic="YES" type="default" id="ifT-MI-4hR"/>
                        <constraint firstAttribute="trailing" secondItem="xbU-au-gtQ" secondAttribute="trailing" constant="20" symbolic="YES" type="default" id="jNt-zD-oTI"/>
                        <constraint firstItem="uvI-4w-aME" firstAttribute="baseline" secondItem="B5M-Ti-5nL" secondAttribute="baseline" type="default" id="kmY-Ol-p7p"/>
                        <constraint firstItem="yxx-QE-lRo" firstAttribute="leading" secondItem="B5M-Ti-5nL" secondAttribute="leading" type="default" id="mI4-Zu-iNP"/>
                        <constraint firstItem="PXM-z4-ndS" firstAttribute="top" secondItem="frD-Qe-Ib9" secondAttribute="bottom" constant="8" symbolic="YES" type="default" id="qGW-ek-yZd"/>
                        <constraint firstItem="uvI-4w-aME" firstAttribute="top" secondItem="ZIK-gx-Nq4" secondAttribute="top" constant="81" id="uaR-8Y-5QN"/>
                        <constraint firstItem="xbU-au-gtQ" firstAttribute="leading" secondItem="Fuc-2m-9Zy" secondAttribute="trailing" constant="8" symbolic="YES" type="default" id="ujE-gd-4M9"/>
                        <constraint firstItem="uvI-4w-aME" firstAttribute="leading" secondItem="ZIK-gx-Nq4" secondAttribute="leading" constant="20" symbolic="YES" type="default" id="w3k-jd-ax9"/>
                    </constraints>
                </view>
                <navigationItem key="navigationItem" id="2nj-Ip-nf5">
                    <barButtonItem key="leftBarButtonItem" title="Back" id="tVS-8H-FUI"/>
                    <barButtonItem key="rightBarButtonItem" title="Next" id="1JK-F2-zOK"/>
                </navigationItem>
                <connections>
                    <outlet property="departure" destination="B5M-Ti-5nL" id="AWa-Ws-aD3"/>
                    <outlet property="outFuel" destination="yxx-QE-lRo" id="K6r-M4-Rlz"/>
                    <outlet property="startHobbs" destination="wAx-ux-6y5" id="Dyn-O8-9Hh"/>
                    <outlet property="tripNumber" destination="xbU-au-gtQ" id="AZA-T4-Izz"/>
                    <outlet property="whosFlying" destination="PXM-z4-ndS" id="VKX-zm-stJ"/>
                    <segue destination="VZ0-Ck-hG8" kind="push" id="pCS-hs-xSz"/>
                </connections>
            </viewController>
            <placeholder placeholderIdentifier="IBFirstResponder" id="Gtn-Vk-tyE" userLabel="First Responder" sceneMemberID="firstResponder"/>
        </objects>
        <point key="canvasLocation" x="1133" y="740"/>
    </scene>
    <!--View Controller-->
    <scene sceneID="6on-A1-vuU">
        <objects>
            <viewController id="VZ0-Ck-hG8" sceneMemberID="viewController">
                <view key="view" contentMode="scaleToFill" id="YmM-zs-zBh">
                    <rect key="frame" x="0.0" y="20" width="320" height="460"/>
                    <autoresizingMask key="autoresizingMask" flexibleMaxX="YES" flexibleMaxY="YES"/>
                    <color key="backgroundColor" white="1" alpha="1" colorSpace="custom" customColorSpace="calibratedWhite"/>
                </view>
                <navigationItem key="navigationItem" id="g9K-Xz-a2H"/>
            </viewController>
            <placeholder placeholderIdentifier="IBFirstResponder" id="UYI-Pa-J93" userLabel="First Responder" sceneMemberID="firstResponder"/>
        </objects>
        <point key="canvasLocation" x="1670" y="745"/>
    </scene> 
```

# javascript - 使用 .toHaveBeenCalledWith 的 Jasmine 测试注册表格失败

> ID：16133559
> 
> 赞同：10
> 
> 时间：2013-04-21T16:42:23.757
> 
> 标签：javascript, jasmine, single-page-application, jquery-callback, jasmine-jquery

我正在开发的单页应用程序有一个登录视图，其中包含两种表单：登录表单和注册表单。以下规范描述了这些表格的测试。我正在使用[Jasmine-jQuery 1.4.2。](https://github.com/velesin/jasmine-jquery)

```
// user_spec.js

describe("User", function() {

  var userController;

  beforeEach(function () {
    loadFixtures('menu.html');
    userController = new MyApp.User.Controller();
  });

  describe("LoginView", function() {

    beforeEach(function() {
      // Mock the $.ajax function to prevent XHR:
      spyOn($, "ajax").andCallFake(function(params) {});
    });

    it("should pass email and password with the 'signInForm:submit' event.", function() {
      var email = "firstname.name@email.com";
      var password = "Passw0rd";
      var callback = jasmine.createSpy("FormSubmitSpy");

      userController.loginView.$el.find("#signInEmail").val(email);
      userController.loginView.$el.find("#signInPassword").val(password);
      userController.loginView.bind("signInForm:submit", callback, this);
      userController.loginView.ui.signInForm.trigger("submit");

      expect(callback).toHaveBeenCalledWith({
        email: email,
        password: password
      });
    });

    it("should pass name, email and password with the 'signUpForm:submit' event.", function() {
      var name = "John Doe";
      var email = "firstname.name@email.com";
      var password = "Passw0rd";
      var callback = jasmine.createSpy("FormSubmitSpy");

      userController.loginView.$el.find("#signUpName").val(name);
      userController.loginView.$el.find("#signUpMail").val(email);
      userController.loginView.$el.find("#signUpPassword").val(password);
      userController.loginView.$el.find("#signUpPasswordConfirmation").val(password);
      userController.loginView.bind("signUpForm:submit", callback, this);

      userController.loginView.ui.signUpForm.trigger("submit");

      expect(callback).toHaveBeenCalledWith({
        name: name,
        email: email,
        password: password,
        password_confirmation: password
      });
    });

  });

}); 
```

登录表单的测试运行成功，但注册表单的测试失败。

```
Error: Expected spy FormSubmitSpy to have been called with \
    [ { name : 'John Doe', email : 'firstname.name@email.com', \
    password : 'Passw0rd', password_confirmation : 'Passw0rd' } ] \
    but it was never called.

    at new jasmine.ExpectationResult (http://localhost:3000/assets/jasmine.js?body=1:114:32)
    at null.toHaveBeenCalledWith (http://localhost:3000/assets/jasmine.js?body=1:1235:29)
    at null.<anonymous> (http://localhost:3000/assets/user_spec.js?body=1:233:24)
    at jasmine.Block.execute (http://localhost:3000/assets/jasmine.js?body=1:1064:17)
    at jasmine.Queue.next_ (http://localhost:3000/assets/jasmine.js?body=1:2096:31)
    at jasmine.Queue.start (http://localhost:3000/assets/jasmine.js?body=1:2049:8)
    at jasmine.Spec.execute (http://localhost:3000/assets/jasmine.js?body=1:2376:14)
    at jasmine.Queue.next_ (http://localhost:3000/assets/jasmine.js?body=1:2096:31)
    at jasmine.Queue.start (http://localhost:3000/assets/jasmine.js?body=1:2049:8)
    at jasmine.Suite.execute (http://localhost:3000/assets/jasmine.js?body=1:2521:14) 
```

在应用程序中使用表格没有问题。传输数据。一切正常。只是测试没有。

# 解决方法

但是，当我延迟执行时，测试**成功。**

```
_.defer(function() {
  expect(callback).toHaveBeenCalledWith({
    name: name,
    email: email,
    password: password,
    password_confirmation: password
  });
}); 
```

为什么这行得通并且“正常”实施失败了？

* * *

这是给定情况的简化：

```
it("should evaluate true", function() {
  var foo = false;
  _.defer(function() {
    foo = true;
  });
  expect(foo).toBeTruthy();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-10T19:51:06.773

Jasmine 在不使用下划线函数的情况下执行相同操作的方式如下：

```
var flag = false;
...

runs(function() {
  userController.loginView.ui.signInForm.trigger("submit");
  setTimeout(function() { flag = true; }, 1);
}

waitsFor(function() {
  return flag;
}, "Blah this should never happen", 10);

runs(function() {
  expect(callback).toHaveBeenCalledWith({
    name: name,
    email: email,
    password: password,
    password_confirmation: password
  });
} 
```

@Marc 是正确的，问题在于使用绑定和 Javascript 将事件“有时/通常/总是”发送到下一个事件循环的方式（它的异步性质如何工作），所以既然你在监视你想要制作的回调确保编写您的测试以考虑该异步行为。

在编写测试时，您冒着第一个测试偶尔不会通过的风险（我很惊讶它可以按原样工作）。您正在以非异步方式测试异步事件回调......有意义吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T19:44:13.710

您看到此问题的原因是因为回调嵌套在其他方法中，可能是 jQuery 绑定和 jasmine 的 spy 直接包裹在您的方法上，因此在设置测试时，您的方法要等到下一个刻度才会执行。

我发现这个页面：[http](http://trevmex.com/post/7017702464/nesting-spies-to-see-if-a-callback-in-a-deep-nest-has) ://trevmex.com/post/7017702464/nesting-spies-to-see-if-a-callback-in-a-deep-nest-has很有用，因为它描述了您的问题和潜在的工作大约。

但是我发现最好不必测试回调，因为它们可以被视为私有方法。也许你可以测试它的最终结果？

# jquery - 如何使用 jQuery Mobile 在 Kindle Fire HD 上获取 keydown 和 keyup 事件

> ID：16133560
> 
> 赞同：4
> 
> 时间：2013-04-21T16:42:24.470
> 
> 标签：jquery, jquery-mobile

我只能让 keydown 事件在新的 Kindle Fire HD 平板电脑上触发删除和输入键。

我正在使用内置的 Silk 浏览器。我可以在 Google 上看到 keydown 事件被触发。他们是如何让它发挥作用的？

如果我在 Silk 浏览器中访问诸如[http://unixpapa.com/js/testkey.html](http://unixpapa.com/js/testkey.html)之类的键盘测试网站，它也不会触发。有人有解决方法吗？

```
$("#simpleSearch_input").keydown(function(evt) {
    alert("keydown");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T19:41:57.953

您需要使用 'input' 事件而不是 'keyup'

键盘事件（HTML5）的顺序是keydown->keypress->input->keyup。

输入事件将缺少一些 keyup 也传递的属性，例如 keyCode / metaKey/shiftKey/altKey

我用了：

var inputEV = 'oninput' 在窗口中？'输入'：'keyup'

在 Silk 浏览器中定义触发我的自动完成调用的事件。

在 jsfiddle 上使用 jQuery 代码来测试它。

```
(function($){
            $(document).ready(function(){
                var inputEV = 'oninput' in window ? 'input' : 'keyup';
                $('#listen').on(inputEV,function(event){                        
                    $('#show').val($('#show').val()+'\n'+event.type);
                    console.log('--- input event ----');
                    for(var v in event.originalEvent){ 
                        if(event.hasOwnProperty(v)){
                            console.log(v+' |--> '+event[v]);
                        }
                    }
                })
                //just added to see what Silk listens for on the keyup event
                $('#listen').on('keyup',function(event){                        
                    $('#show').val($('#show').val()+'\n'+event.type+' | which --> '+event.which);
                    console.log('--- keyup event ----');
                    for(var v in event.originalEvent){ 
                        if(event.hasOwnProperty(v)){
                            console.log(v+' |--> '+event[v]);
                        }
                    }
                })                  
            });
        })(jQuery); 
```

jsfiddle上的链接：

[http://jsfiddle.net/visionmonster/eJJna/embedded/result/](http://jsfiddle.net/visionmonster/eJJna/embedded/result/)

与最初的问题一样，我只能让 Silk 浏览器收听删除/输入的键位

HTML5 规范： http: [//www.whatwg.org/specs/web-apps/current-work/#handler-oninput](http://www.whatwg.org/specs/web-apps/current-work/#handler-oninput)

# php - 尝试打印 $_POST 不起作用

> ID：16133567
> 
> 赞同：0
> 
> 时间：2013-04-21T16:42:54.757
> 
> 标签：php, jquery, ajax

我正在尝试打印任何文本字段的值。我正在使用 AJAX、jQuery 和 PHP，但代码不起作用。它没有在里面显示任何东西`div id='pinta'`，它是空的。

JavaScript：

```
$('#Enviar0').click(function() {
            var input1 =$('#primero input').serialize();
            $.ajax({ 
                   type:"POST",
                   url:"pintaParte.php",
                   data:input1,                   
                   success: function(data) {
                            $("#pinta").html(data);
                   }
            });         
}); 
```

PHP：

```
<?php
if(isset($_POST['input1'])){
   foreach ($_POST['input1'] as $key => $value) {
        echo "<p>".$key."</p>";
        echo "<p>".$value."</p>";
        echo "<hr />";
   }
} 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:47:57.967

由于您没有明确指定 post 变量的名称，因此它不会存在于服务器端。

您的数据元素应该如下所示：

`data: {"input1": input1}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:04:15.193

试试这个，使用 JSON：

```
$('#Enviar0').click(function()
{
    var input1 = $('#primero input').serialize();
    $.ajax({ 
    type: "POST",
    url: "pintaParte.php",
    data: {"input1": input1}            
    success: function(data)
    {
        var key;
        var value;
        var string = '';
        // You have to parse the json array.
        for(var i = 0; i < data.length ; i++)
        {
            key = data[i].key;
            value = data[i].value;
            string += "<p>"+key+"</p>";
            string += "<p>"+value+"</p>";
        }
        $("#pinta").html(string);
    });         
}); 
```

pintaParte.php 看起来像这样：

```
<?php
    $input1 = isset($_POST['input1']) ? $_POST['input1'] : array();

    if(sizeof($input1) == 0)
    {
        $json[] = array();
    }
    else
    {
        foreach ($input1 as $key => $value)
        {
            $json[] = array('key' => $key, 'value' => $value);
        }
    }
    echo json_encode($json);
    flush();
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T16:57:29.147

从 foreach 循环中删除密钥：

```
<?php
if(isset($_POST['input1'])){
   foreach ($_POST as $key => $value) {
        echo "<p>".$key."</p>";
        echo "<p>".$value."</p>";
        echo "<hr />";
   }
} 
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T16:45:41.373

问题是要读取命名对象属性，您需要将其设置为 JavaScript 对象中的键值——此时您只是传递一个字符串。

尝试这个：

```
$('#Enviar0').click(function() {
    var input1 =$('#primero input').serialize();
    $.ajax({ 
        type:"POST",
        url:"pintaParte.php",
        data: {
            input1: input1
        },                   
        success: function(data) {
            $("#pinta").html(data);
        }
    });         
}); 
```

您会发现使用基于浏览器的 AJAX 资源管理器对调试这类问题非常有帮助。Chrome 和 Safari 内置了一个，Firefox 有 Firebug 插件。这些将让您实时查看操作，包括实际发送的 GET/POST 参数。

# python - Python：类名中的双冒号

> ID：16133577
> 
> 赞同：2
> 
> 时间：2013-04-21T16:43:48.193
> 
> 标签：python

我在 Python 中调试代码时遇到了以下情况：

```
<ROOT.cool::IDatabase object at 0xbc88680> 
```

双冒号是什么意思，我为什么需要它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T18:02:06.277

对我来说，它似乎是 C++ 类函数的 python 包装器，因此`::`

就像 Lattyware 所说的那样，这只是对`__repr__()`python 对象的调用的返回。

您可以确保自己拥有：

```
class Foo():
    def __repr__(self):
        return "<Foo.bar:::qux::::kludge object at %s>" %hex(id(self)) 
```

因此，您无需担心`::`，但您可能需要对象本身来帮助您进行调试。

# android - 在 ECDH 中使用 Spongy Castle 库生成密钥对

> ID：16133579
> 
> 赞同：2
> 
> 时间：2013-04-21T16:43:55.723
> 
> 标签：android, spongycastle

我是台湾学生。我正在学习如何在 Android 中编程。但我有一个关于使用 Spongy Castle 库在 ECDH 中生成密钥对的问题。当我启动应用程序时，android 系统显示应用程序已停止。

这是我的代码和我的导入

```
public class MainActivity<ECParams> extends Activity {
    String msg,Test;

    @Override

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button generator= (Button) findViewById(R.id.key_pair_generator);
        generator.setOnClickListener(ECkeyPairGenerator);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
    private Button.OnClickListener ECkeyPairGenerator = new Button.OnClickListener()
    {
        public void onClick(View v) {
            KeyPairGenerator kpg=null;
            ECGenParameterSpec ecParamSpec = new ECGenParameterSpec("secp224k1");
            try {
                kpg = KeyPairGeneratorSpi.getInstance("ECDH", "SC");
            } catch (NoSuchAlgorithmException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (NoSuchProviderException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                kpg.initialize(ecParamSpec);
            } catch (InvalidAlgorithmParameterException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            KeyPair kpair=kpg.generateKeyPair();
            msg="pp";
            ShowMsg();
        }

    };
    public static String byteArrayToHexString(byte b[]) {
        StringBuffer s = new StringBuffer();
        int LEN = b.length;
        if (b.length != LEN)
            throw new RuntimeException("byteArrayToHexString() " +
                                       "wrong argument length (!="+LEN);
        for (int j = 0; j < b.length; j++) {
            s.append(Integer.toHexString((int)((b[j]>>4)&0x0f)));
            s.append(Integer.toHexString((int)(b[j]&0x0f)));
        }        
        return new String(s);
    }
    public void ShowMsg(){
        Intent intent = new Intent();
        intent.setClass(MainActivity.this, Show.class);
        Bundle bundle = new Bundle();
        bundle.putString("Show", msg);
        intent.putExtras(bundle); 
        startActivity(intent);
    }

} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:11:45.737

我解决了那个问题。它需要通过新的方式添加提供者。像这样。

```
 static {Security.insertProviderAt(new org.spongycastle.jce.provider.BouncyCastleProvider(), 1);} 
```

以及生成密钥对的代码：

```
 try {
            ECGenParameterSpec ecParamSpec = new ECGenParameterSpec("secp224k1");
            KeyPairGenerator kpg = KeyPairGenerator.getInstance("ECDH","SC");
            kpg.initialize(ecParamSpec);

            KeyPair kpair=kpg.generateKeyPair();
            pkey=kpair.getPublic();
            skey=kpair.getPrivate();
        }catch(Exception e){e.printStackTrace();} 
```

谢谢

# ios - iOS：通过 Xcode 或 IPA 安装应用程序时图像大小不同

> ID：16133589
> 
> 赞同：0
> 
> 时间：2013-04-21T16:44:53.433
> 
> 标签：ios, xcode, uibarbuttonitem, ipa

当我通过 Xcode 和 IPA (iTunes) 在同一设备上安装相同的应用程序时，我在 UIBarButtonItem 中获得不同的图像大小。

![在此处输入图像描述](https://i.stack.imgur.com/5WXq1.png)

如您所见，当应用程序从 Xcode 安装时，图像看起来适合按钮，但当应用程序从 IPA 安装时，它看起来更大。

我正在使用以下代码：

```
UIBarButtonItem *openLeftMenu = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"MenuIcon.png"] style:UIBarButtonItemStylePlain target:self.viewDeckController action:@selector(toggleLeftView)];
[[self navigationItem] setLeftBarButtonItem:openLeftMenu]; 
```

图像“MenuIcon.png”为 30 x 25。目录中没有其他具有该名称的图像。我在运行 iOS 6.x 的 iPhone 5 和 iPhone 4 上都注意到了这个问题。

这是怎么回事，我该如何解决？我如何知道我的应用程序的哪种表示更准确？当我将这个应用程序提交到应用商店时，当人们下载它时，它会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:50:19.273

您是否包含图标的视网膜版本（MenuIcon@2x.png）。如果没有，请添加一个。我有一种感觉，这可能会导致差异

# java - 为什么 WatchService 会产生这么多操作？

> ID：16133590
> 
> 赞同：24
> 
> 时间：2013-04-21T16:44:54.223
> 
> 标签：java, nio, java-7, watchservice

```
import java.io.*;
import java.nio.file.*;

public class Tmp {

    public static void main(String [] args) throws IOException {
        int count = 0;
        Path path = Paths.get("C:\\tmp\\");
        WatchService ws = null;
        try {
            ws = FileSystems.getDefault().newWatchService();
            path.register(ws, StandardWatchEventKinds.ENTRY_CREATE, StandardWatchEventKinds.ENTRY_DELETE,
                    StandardWatchEventKinds.ENTRY_MODIFY, StandardWatchEventKinds.OVERFLOW);
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }

        while(true) {
            WatchKey key = null;
            try {
                key = ws.take();
            } catch(InterruptedException ie) {
                ie.printStackTrace();
            }

            for(WatchEvent<?> event: key.pollEvents()) {
                switch(event.kind().name()) {
                    case "OVERFLOW":
                        System.out.println(++count + ": OVERFLOW");
                        break;
                    case "ENTRY_MODIFY":
                        System.out.println(++count + ": File " + event.context() + " is changed!");
                        break;
                    case "ENTRY_CREATE":
                        System.out.println(++count + ": File " + event.context() + " is created!");
                        break;
                    case "ENTRY_DELETE":
                        System.out.println(++count + ": File " + event.context() + " is deleted!");
                        break;
                    default:
                        System.out.println(++count + ": UNKNOWN EVENT!");
                }
            }

            key.reset();
        }    
    }
} 
```

当我运行它然后打开记事本++然后创建一个新的空文件并将其保存`a.txt`在`C:\tmp\`目录中时，我得到了输出：

```
1: File a.txt is created!
2: File a.txt is deleted!
3: File a.txt is created! 
```

这是为什么？看起来该文件已创建然后删除然后再次创建。为什么？

当我在文件中放入一些文本并保存时，输出为：

```
4: File a.txt is changed!
5: File a.txt is changed! 
```

为什么变了两次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-22T07:24:03.140

Watch Service 的 Modify 事件生成两个事件。当我们修改一个已经存在的文件时，文件系统首先用 0 字节创建它并触发一个修改事件，然后在上面写入数据。然后它再次触发修改事件。这就是为什么它显示了两个修改事件。所以我做了什么来解决这个问题，我只是使用计数器来检查我的任务应该只在偶数计数时触发一次

```
 Path path = null;
        int count = 0;

        try {
            path = Paths.get(new Utility().getConfDirPath());
            System.out.println("Path: " + path);
        } catch (UnsupportedEncodingException e1) {
            e1.printStackTrace();
        }

        WatchService watchService = null;
        try {
            watchService = FileSystems.getDefault().newWatchService();
            path.register(watchService, StandardWatchEventKinds.ENTRY_MODIFY,StandardWatchEventKinds.ENTRY_DELETE);
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }

        while(true) {
            WatchKey key = null;
            try {
                key = watchService.take();
            } catch(InterruptedException ie) {
                ie.printStackTrace();
            }

            for(WatchEvent<?> event: key.pollEvents()) {
                switch(event.kind().name()) {
                    case "ENTRY_MODIFY":
                        System.out.println(++count + ": File " + event.context() + " is changed!");

                        if (count%2==0) {
                            doOnChange(); // do whatever you want
                        }
                        break;
                    case "ENTRY_DELETE":
                        System.out.println(++count + ": File " + event.context() + " is deleted!");
                        break;
                    default:
                        System.out.println(++count + ": UNKNOWN EVENT!");
                }
            }

            // reset the key
            boolean valid = key.reset();
            if (!valid) {
                System.out.println("Key has been unregistered");
            }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T14:06:41.963

文件创建和删除事件在我的系统中正常工作（Window 7 + 1.7.0_21）。

更改事件消息显示该文件上每个`Ctrl`+`s`操作的时间数 (n)。

```
 // Removed the "//" after director name as D://tmp"
      //Added just to see the message with a 1 ms gap.
      Thread.sleep(1000); // after key.reset(); 
```

示例：如果我们打开文件并继续按 crtl + s （保存而不进行任何更改/更改）。对于每个保存操作，将（重复）显示以下消息。

```
 File YourFileName.txt is changed! 
```

原因是在 Windows 中 WatchService 将文件更改与时间戳而不是校验和进行比较。

此处给出的更多描述[平台依赖项](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-15T19:15:50.280

我创建了一个小型 FileWatcher 实用程序库： [https ://github.com/finsterwalder/fileutils](https://github.com/finsterwalder/fileutils)

它允许设置宽限期。宽限期内的多个事件累积起来，只触发一次。

您不应该在实验中使用 Notepad++，因为您不知道 Notepad++ 在做什么。可能是 Notepad++ 实际上多次写入文件。或者它可以编写一个具有不同名称的文件并在完成时重命名它。编写自己的代码来操作文件并观察它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-26T13:38:14.167

**这对我有用**

```
 // get the first event before looping
    WatchKey key = this.watcher.take();

    // reset key (executed twice but not invoke the polled events)
    while (key != null && key.reset() ) { 
      // polled events
      for (final WatchEvent<?> event : key.pollEvents()) {
        System.out.printf("\nGlobal received: %s, event for file: %s\n", event.kind(),
            event.context());

        switch (event.kind().name()) {
        case "ENTRY_CREATE":
          LOGGER.debug("event ENTRY_CREATE");
          break;
        case "ENTRY_DELETE":
          LOGGER.debug("event ENTRY_DELETE");
          break;
        case "ENTRY_MODIFY":
          LOGGER.debug("event ENTRY_MODIFY");
          break;
        default:
          LOGGER.debug("event other [OVERFLOW]");
          break;
        }
      }

      key = this.watcher.take();
    } 
```

# javascript - 让用户使用提示和 jQuery 在文本框中复制文本时的提示循环

> ID：16133594
> 
> 赞同：0
> 
> 时间：2013-04-21T16:45:09.510
> 
> 标签：javascript, jquery, textarea, prompt

我编写了以下代码来提示用户文本框的内容，以便他们轻松复制数据。它适用于可能不知道如何复制文本的非 IT 精通用户（我们得到了他们......）

```
 $('#saveBox').focusin(function(){
        var text = $('#saveBox').val();
        window.prompt ("Copy to clipboard: press Ctrl+C and then Enter to close", text);
    }); 
```

但是，这似乎创建了一个循环，每次用户关闭该框时，它都会再次弹出。

有没有办法只在用户第一次点击文本区域时打开提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:57:05.497

一种简单的方法是仅在第一次使用布尔变量来执行此操作，例如以下示例：

```
firstTime = true

$('#saveBox').focusin(function(){
    if(firstTime){
        var text = $('#saveBox').val();
        window.prompt ("Copy to clipboard: press Ctrl+C and then Enter to close", text);
        firstTime = false;
    }
}); 
```

没有布尔值：

```
$('#saveBox').one("focusin", function(){
    if(firstTime){
        var text = $('#saveBox').val();
        window.prompt ("Copy to clipboard: press Ctrl+C and then Enter to close", text);
    }
}); 
```

# hadoop - Sqoop 导出分区的 Hive 表

> ID：16133595
> 
> 赞同：2
> 
> 时间：2013-04-21T16:45:15.540
> 
> 标签：hadoop, hive, sqoop

我在尝试导出分区的 Hive 表时遇到了一些问题。这是否完全支持（我试图用谷歌搜索它并找到一张 JIRA 票）？

```
sqoop export --connect jdbc:mysql://localhost/testdb --table sales --export-dir /user/hive/warehouse/sales --direct 
```

这就是我得到的：

```
00000_2, Status : FAILED
java.io.FileNotFoundException: File does not exist: /user/hive/warehouse/sales/day=2013-04-01 
```

跑步

```
hadoop fs -ls /user/hive/warehouse/sales/day=2013-04-01 
```

表明这个目录确实存在。

关于如何解决这个问题的任何想法？在此先感谢，老爹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:50:28.777

Sqoop 目前不支持递归目录的导出。有一个 JIRA [SQOOP-951](https://issues.apache.org/jira/browse/SQOOP-951)用于添加此类支持。暂时的解决方法是一次导出一个分区，或者临时将你的数据复制到非分区表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-12T07:15:35.317

这个问题很老了，但如果有人偶然发现它，请使用

```
--export-dir /user/hive/warehouse/sales/*" 
```

导出表中的所有分区。

# ios - 在 iOS 上显示一手随机抽取的卡片

> ID：16133597
> 
> 赞同：0
> 
> 时间：2013-04-21T16:45:25.433
> 
> 标签：ios, objective-c, displayobject

我无法显示手中已抽出的牌。我可以看到文本形式的卡片，`"All Output"`但它们没有直观地显示。牌名的一个例子是`"club04"`, `"spades06"`,`"heart13"`等。11-13 代表 Jacks to Kings。

这是一部分**`ViewController.m`**：

```
-(void) showHand:(Hand *)hand {
    int ypos = 40;

    for (int i = 0; i < [hand countCards]; i++) {
        Card *card = [hand getCardAtIndex:i];

        // UIImage  *cardImage = [UIImage imageNamed:@"heart08.png"];
        UIImage  *cardImage = [UIImage  imageNamed:[card filename]];

        UIImageView *imageView = [[UIImageView alloc] initWithImage:cardImage];
        CGRect arect = CGRectMake((i * 40) + 20, ypos, 71, 96);
        imageView.frame = arect;

        [self.view addSubview:imageView];
    }
}
@end 
```

这是**`Hand.h`**

```
#import <Foundation/Foundation.h>

@class Card;

@interface Hand : NSObject {

}

@property NSMutableArray *cardsInHand;

-(void) addCard:(Card *)card;
-(NSInteger) getPipValue;
-(NSInteger) countCards;
-(Card *) getCardAtIndex:(NSInteger) index;

@end 
```

这是**`Hand.m`**

```
#import "Hand.h"
#import "Card.h"

@implementation Hand

- (id) init {
    if (self = [super init]){
        self.cardsInHand = [[NSMutableArray alloc] initWithCapacity:6];
    }
    return (self);
}

- (NSInteger)countCards {
    return ([self.cardsInHand count]);
}

- (void)addCard:(Card *)card {
    [self.cardsInHand addObject:card];
}

- (NSInteger)getPipValue {
    NSInteger aValue = 0;
    for (Card *tCard in self.cardsInHand) {
        aValue = aValue + [tCard pipValue];
    }
    return aValue;
}

- (Card *)getCardAtIndex:(NSInteger)index {
    return ([self.cardsInHand objectAtIndex:index]);
}

- (NSString *)description {
    return [NSString stringWithFormat:@"cards in hand : %@", self.cardsInHand];
}

@end 
```

有趣的是，当我手动输入一张卡片时，我会看到卡片。我只看到同一张卡片的 6 次。

但`"All Output"`显示我需要看到的。例子：

```
2013-04-21 19:18:41.025 blackjack[1395:c07] Dealer:cards in hand : (
    "Club  5 (pipValue = 0)",
    "Spade  Jack (pipValue = 1)",
    "Club  8 (pipValue = 0)",
    "Spade  Queen (pipValue = 1)",
    "Diamond  King (pipValue = 1)",
    "Heart  7 (pipValue = 0)"
) 
```

这是将牌放在手中和桌子上的部分：

```
-(id) init {
if ((self = [super init])){
    _deck = [[Deck alloc] init];
    _playerHand = [[Hand alloc] init];
    _dealerHand = [[Hand alloc] init];
    _table = [[Table alloc] init];
}
return (self);
}

-(void)setup
{
//deal cards
[_playerHand addCard:[_deck drawCard]];
[_dealerHand addCard:[_deck drawCard]];
[_playerHand addCard:[_deck drawCard]];
[_dealerHand addCard:[_deck drawCard]];
[_playerHand addCard:[_deck drawCard]];
[_dealerHand addCard:[_deck drawCard]];
[_playerHand addCard:[_deck drawCard]];
[_dealerHand addCard:[_deck drawCard]];
[_playerHand addCard:[_deck drawCard]];
[_dealerHand addCard:[_deck drawCard]];
[_playerHand addCard:[_deck drawCard]];
[_dealerHand addCard:[_deck drawCard]];
[_table addCard:[_deck drawCard]];
[_table addCard:[_deck drawCard]];
[_table addCard:[_deck drawCard]];
[_table addCard:[_deck drawCard]]; 
```

这是**`card.m`**：

```
#import "Card.h"

@implementation Card

@synthesize suit = _suit, cardNumber=_cardNumber;

-(id) initWithCardNumber:(NSInteger)aCardNumber suit:(Suit)aSuit {
if (self = [super init])
{
    _suit = aSuit;
    _cardNumber = aCardNumber;

}
return self;
}

/*
 ** pipValue will return the pipValue of a card.
 **          2 to 9 will return 0.
 **          an ace will always return 1
 **          Jack, Queen and King will always return 1.
 **          2 of Clubs will return 1
 **          10 of diamonds will return 2
 */
-(NSInteger) pipValue {

if (_suit==Diamonds && _cardNumber==10)
    return (2);
else if (_cardNumber>=10)
    return (1);
else if (_cardNumber==1)
    return (1);
else if (_suit==Clubs && _cardNumber==2)
    return (1);
else
    return (0);

}

/*
 ** private method
 ** returns the suit as a String
 */
-(NSString *) suitAsString{
switch (_suit) {
    case Hearts:
        return @"Heart ";
        break;
    case Spades:
        return @"Spade ";
        break;
    case Diamonds:
        return @"Diamond ";
        break;
    case Clubs:
        return @"Club ";
        break;
    default:
        return nil;
        break;
}
}

/*
 ** private method
 ** returns the cardNumber as a String
 */
-(NSString *) cardNumberAsString{
switch (_cardNumber) {
    case 1:
        return @"Ace";
        break;
    case 11:
        return @"Jack";
        break;
    case 12:
        return @"Queen";
        break;
    case 13:
        return @"King";
        break;
    default:
        return [NSString stringWithFormat:@"%d", _cardNumber];
        break;
}
}

-(NSString *) filename{
return ([NSString stringWithFormat:@"%@%02d.png", [self suitAsString], [self cardNumber]]);
}

-(NSString *) description {
return [NSString stringWithFormat:@"%@ %@ (pipValue = %d)", [self suitAsString], [self cardNumberAsString], [self pipValue]];
}

@end 
```

还有**`deck.m`**：

```
#import "Deck.h"
#import "Card.h"

@implementation Deck

-(id) init {
if (self = [super init])
{
    cards = [[NSMutableArray alloc] init];

    for (int suit = 0; suit <= 3; suit++)
    {
        for (int cardNumber = 1; cardNumber <= 13; cardNumber++)
        {
            [cards addObject:[[Card alloc] initWithCardNumber:cardNumber suit:suit]];
        }
    }

    [self shuffle];
}
return self;
}

-(Card *) drawCard {
if ([cards count]>0)
{
    Card* tCard = [cards lastObject];
    [cards removeLastObject];
    return tCard;
}
return nil;
}

-(void) shuffle {
NSUInteger count = [cards count];
for (NSUInteger i = 0; i < count; ++i) {
    // Select a random element between i and end of array to swap with.
    int nElements = count - i;
    int n = (arc4random() % nElements) + i;
    [cards exchangeObjectAtIndex:i withObjectAtIndex:n];
}
}

- (NSString *)description{
return [NSString stringWithFormat:@"Deck : %@", cards];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:22:02.287

如果`@"heart08.png"`有效而`[card filename]`无效，那么您应该首先打印出`[card filename]`返回的内容。

什么是“所有输出”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:54:51.387

在您的代码中，我认为您使用的是随机函数，这是随机函数的问题。它像一个池子一样工作，如果它得到相同的结果，它会使用一些时间间隔，它会显示相同的结果。您应该通过当前时间的 mili 部分来获取随机值 n 这个问题将被解决

# javascript - 插入期间：E11000 重复键错误索引

> ID：16133602
> 
> 赞同：3
> 
> 时间：2013-04-21T16:45:44.043
> 
> 标签：javascript, node.js, mongodb

我正在使用 mongojs 和 Node.js 在 mongodb 中插入文档。它是一个 REST API，只有一个 mongojs 实例（带有本机驱动器）。每次都有一个 api 调用，使用 SAME mongojs 对象来执行 mongodb 操作。现在，尝试插入文档时出现以下错误。

```
{
name: "MongoError"
err: "E11000 duplicate key error index: testdb.userComment.$_id_ dup key: { :    ObjectId('51727190bb4ab52a80024c09') }"
code: 11000
n: 0
connectionId: 225
ok: 1
} 
```

我尝试过的文档总是唯一的`db.userComment.getIndexs()`，它显示索引在 _id 上。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:58:36.123

我不确定它是否是正确的修复，但是每次插入文档时，我都会明确地创建一个新的 ObjectID，而不是将命运留给 mongodb 驱动程序。我使用了以下代码

`commentData._id = require('mongodb').BSONPure.ObjectID();`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-04-24T10:09:20.723

这个问题似乎与这个问题重复： [Getting "err": "E11000 duplicate key error when inserting into mongo using the Java driver](https://stackoverflow.com/questions/21119928/getting-err-e11000-duplicate-key-error-when-inserting-into-mongo-using-the/24541035)

[我在这个页面上](http://groups.google.com/forum/#!topic/mongodb-user/APLpTS4iIuw)找到了答案。我猜你的代码看起来像这样（非常简化）？：

```
doc = {} 
for i in xrange(2): 
    doc['i'] = i 
    collection.insert(doc) 
```

问题是 PyMongo 会在文档中注入一个 _id 字段，*如果该`_id`字段不存在*，则在插入之前（`_id`始终使用 10gen 驱动程序生成客户端）。这意味着第一次通过循环`_id`是由插入方法添加的。由于`doc`是在循环之外定义的，因此每次后续循环都使用*相同*的值 for `_id`。

解决方案：

1.  删除键_id

> ```
> for i in xrange(2): 
>     doc['i'] = i 
>     if '_id' in doc: 
>         del doc['_id'] 
>     collection.insert(doc) 
> ```

2.  或者手动创建一个新的：

> ```
> from bson.objectid import ObjectId 
> for i in xrange(2): 
>     doc['i'] = i 
>     doc['_id'] = ObjectId() 
>     collection.insert(doc) 
> ```

# php - 如何在两个字符串中查找相似词的数量？

> ID：16133603
> 
> 赞同：1
> 
> 时间：2013-04-21T16:45:54.417
> 
> 标签：php

我有两个刺痛：

```
$var_x = "Depending structure";
$var_y = “Depending on the structure of your array "; 
```

你能告诉我我怎么知道var_x中有多少个单词在var_y中？为了做到这一点，我做了以下事情：

```
$pieces1 = explode(" ", $var_x);
$pieces2 = explode(" ", $var_y);
$result=array_intersect($pieces1, $pieces2);
//Print result here? 
```

但这并没有显示多少 var_x 单词在 var_y

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T17:26:22.190

使用`explode()`将给定的字符串拆分为单词是错误的。世界并不完美，您无法确保每个单词都用空格分隔。

请参阅以下行：

*   “这是一个测试句”——explode() 中的 5 个单词
*   “这是一个测试句。不是一个词。” - 8个字，你会得到“句子”。作为一个词。

> ```
>  "This is a test
> 
> sentence" 
> ```
> 
> - 来自explode 的4 个单词，“test\nsentence”是一个单词。

上面的例子只是为了表明使用`explode()`是完全错误的。利用[`str_word_count()`](http://php.net/manual/en/function.str-word-count.php)

```
$var_x = "Depending structure";
$var_y = "Depending on the structure of your array ";
$pieces1 = str_word_count($var_x, 1);
$pieces2 = str_word_count($var_y, 1);
$result=array_intersect(array_unique($pieces1), array_unique($pieces2));
print count($result); 
```

这将 (int) 2，您将看到您的 explode() 方法返回相同的值。但在不同和复杂的情况下，上述方法会给出正确的字数（还要注意`array_unique()`使用）

# jquery - 禁用和启用 div 事件处理程序单击 jQuery？

> ID：16133605
> 
> 赞同：2
> 
> 时间：2013-04-21T16:45:58.783
> 
> 标签：jquery, html, click

```
var times = 0;
jQuery(window).load(function(){
   $(".banana").click(function(){
     console.log(times);
     times++;
     if(times == 3){
        $("#b1").unbind('click');
     }
    if(times == 6){
        $("#b1").bind('click');
    }
   });
}); 
```

和 HTML 代码：
`img id="b1" src=".../" class="banana"`
`img src=".../" alt="" class="banana"`

我有前面的例子，当我尝试启用 div 事件处理程序**click**时。但它不起作用。我读了一些类似的主题，它不能解决问题。请帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:38:38.187

您想要的是防止可怕的点击事件堆叠。有不同的处理方式，但基本上它们都归结为设置布尔值。

在您的示例中，我为您的 #choices 容器设置了一个 data() 标记，并以 value 开头`false`。单击后，我将布尔值更改为`true`. 基本上，如果`processing=false`我在点击回调中执行代码。

```
 $("#choices").data('processing', false);

    $("#rock").click(function () {
        if (!$(this).parent().data('processing')) {
            $(this).parent().data('processing', true);
            user = roPaSc[0];
            gamePlay();
        }

    });
    $("#paper").click(function () {
        if (!$(this).parent().data('processing')) {
            $(this).parent().data('processing', true);
            user = roPaSc[1];
            gamePlay();
        }
    });
    $("#scissors").click(function () {
        if (!$(this).parent().data('processing')) {
            $(this).parent().data('processing', true);
            user = roPaSc[2];
            gamePlay();
        }
    }); 
```

动画结束后，需要重置布尔值。我在“else-statement”中的 openEyes 函数中执行此操作。

```
 else {
            $("#you").attr({
                'src': user
            });
            $("#computer").attr({
                'src': com
            });
            $("#choices").data('processing', false);
        } 
```

这是“石头剪刀布”的调整小提琴：http: [//jsfiddle.net/gpxxn/2/](http://jsfiddle.net/gpxxn/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T16:47:54.537

您忘记了类的点（选择器应该是`$('.banana')`.

```
var times = 0;
jQuery(window).load(function(){
   $(".banana").click(function(){
     console.log(times);
     times++;
     if(times == 3){
        $("#b1").unbind('click');
     }
    if(times == 6){
        $("#b1").bind('click');
    }
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T16:57:35.593

这不是您问题的答案，而是对您的代码的一些建议。

使用“文档就绪”而不是加载。

```
$(window).load(function(){... 
```

用。。。来代替

```
$(document).ready)function(){... 
```

它们都对你有用，但有细微的差别。“ready”将在页面结构加载后立即将您的事件绑定到您的元素，但仍在加载内容之前。

$(window).load() 将等待所有内容被加载。这包括图像。

# java - 为什么我会收到此错误：java.lang.OutOfMemoryError: can't create offscreen surface

> ID：16133607
> 
> 赞同：0
> 
> 时间：2013-04-21T16:46:10.800
> 
> 标签：java, swing

**我认为我的错误是我的 showGreeting() 方法。具体在试试。当用户按下“获取问候语”按钮时，我希望它显示一个对话框，上面写着“问候，名字 + MI + 姓氏”**当用户将字段留空时，我创建的错误出现了，这很好，但我没有了解为什么我的正常问候语不起作用。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class GreetingApp extends JFrame {
    private static final long serialVersionUID = 1L;
    private final JTextField firstNameField,middleNameField,lastNameField;
    private final JButton greetingButton;
    public GreetingApp() {
        super("Greetings");
        this.firstNameField = new JTextField(8);
        this.middleNameField = new JTextField(8);
        this.lastNameField = new JTextField(8);
        this.greetingButton = new JButton("Get Greeting"); 
        greetingButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(final ActionEvent ae){
                showGreeting();
            }
        });
        final Container mainPanel = getContentPane();
        mainPanel.setLayout(new BorderLayout());
        final JPanel inputPanel = new JPanel();
        final JPanel buttonPanel = new JPanel();
        inputPanel.setLayout(new GridLayout(3,3,2,2));
        buttonPanel.setLayout(new BorderLayout());
        JSeparator sep = new JSeparator();
        inputPanel.add(new JLabel("First Name: "),JLabel.LEFT_ALIGNMENT);
        inputPanel.add(firstNameField);
        inputPanel.add(new JLabel("MI: "),JLabel.LEFT_ALIGNMENT);
        inputPanel.add(middleNameField);
        inputPanel.add(new JLabel("Last Name: "),JLabel.LEFT_ALIGNMENT);
        inputPanel.add(lastNameField);
        mainPanel.add(inputPanel,BorderLayout.PAGE_START);
        buttonPanel.add(sep,BorderLayout.PAGE_START);
        buttonPanel.add(greetingButton);
        mainPanel.add(buttonPanel,BorderLayout.PAGE_END);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pack();
        setLocationRelativeTo(null);
        setVisible(true);
    }
    private String getFullName() throws IllegalStateException{
        if(firstNameField.getText().trim().length() == 0){
            throw new IllegalArgumentException("First name cannot be blank");
        }
        if(middleNameField.getText().trim().length() == 0){
            throw new IllegalArgumentException("Middle name cannot be blank");
        }
        if(lastNameField.getText().trim().length() == 0){
            throw new IllegalArgumentException("Last name cannot be blank");
        }
        return "Greetings, "+this.firstNameField+" "+ this.middleNameField +". "+this.lastNameField+"!";
    }
    private void showGreeting(){

        try{
            String message = getFullName();
            JOptionPane.showMessageDialog(this, message, "Greetings",JOptionPane.PLAIN_MESSAGE);
       }catch(final IllegalArgumentException iae){
           JOptionPane.showMessageDialog(this,
                   iae.getMessage(),
                   "Error",
                   JOptionPane.ERROR_MESSAGE);
       }

    }
    public static void main(String[] args) {
        GreetingApp g = new GreetingApp();
    }

} 
```

编辑：没关系，伙计们知道了，我必须添加一个 .getText() return "Greetings, "+this.firstNameField+" "+ this.middleNameField +". "+this.lastNameField+"!"; 在每个字段之后从它们实际获取文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:03:36.577

没关系，伙计们知道了，我必须添加一个 .getText() return "Greetings, "+this.firstNameField+" "+ this.middleNameField +". "+this.lastNameField+"!"; 在每个字段之后从它们实际获取文本

# android - 动画仅在我触摸屏幕后开始

> ID：16133609
> 
> 赞同：0
> 
> 时间：2013-04-21T16:46:23.370
> 
> 标签：android, animation, fragment

我有一个带有顶栏容器和内容容器的布局。单击顶部栏中的按钮时，会使用动画显示垂直菜单。我`minSdkVersion`的9岁。

当我启动应用程序并且我仍然没有点击菜单按钮（即内容片段没有改变）时，这很有效，但是一旦我点击了一个选项（然后替换 content_container 中的片段），垂直菜单行为不规律。菜单 btn 的点击事件被正确触发，但垂直菜单并不总是显示（但有时是......）。但是，当我单击按钮然后触摸屏幕时，动画（显示或隐藏菜单）开始。

我猜它与垂直菜单重叠内容片段有关，然后替换内容片段以某种方式对其进行修改，但我找不到任何解决方案。

有人可以帮忙吗？

**顶栏片段**

```
 @Override
    public void onActivityCreated (Bundle savedInstanceState){

        super.onActivityCreated(savedInstanceState);

        toggleMenu(0);      

        Button btn_menu = (Button) getView().findViewById(R.id.btn_menu);
        btn_menu.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                mVerticalMenu.setVisibility(View.VISIBLE);
                toggleMenu(1000);
            }
        });
    }

    private void toggleMenu(int duration){
        if(mMenuIsOpen){

            TranslateAnimation anim1 = new TranslateAnimation(0,0,0,-(mHeight-mMenuVerticalOffset));
            anim1.setFillAfter(true);
            anim1.setDuration(duration);
            mVerticalMenu.setAnimation(anim1);

            AlphaAnimation anim2 = new AlphaAnimation(0.7f, 0.0f);
            anim2.setFillAfter(true);
            anim2.setDuration(duration);            

            menu_option_01.setOnClickListener(null);
            menu_option_02.setOnClickListener(null);
            menu_option_03.setOnClickListener(null);

            mMenuIsOpen = false;
        }
        else{

            TranslateAnimation anim1 = new TranslateAnimation(0,0,-(mHeight-mMenuVerticalOffset),0);
            anim1.setFillAfter(true);
            anim1.setDuration(duration);
            mVerticalMenu.setAnimation(anim1);

            AlphaAnimation anim2 = new AlphaAnimation(0.0f, 0.7f);
            anim2.setFillAfter(true);
            anim2.setDuration(duration);

            menu_option_01.setOnClickListener(mButtonClickListener);
            menu_option_02.setOnClickListener(mButtonClickListener);
            menu_option_03.setOnClickListener(mButtonClickListener);

            mMenuIsOpen = true;
        }

    }

    private OnClickListener mButtonClickListener = new OnClickListener()
    {
        public void onClick(View v)
        {
            toggleMenu(1000);

            if(!v.isSelected()){        

                FragmentTransaction fragmentTransaction = getActivity().getSupportFragmentManager().beginTransaction();

                switch(v.getId()){

                case R.id.menu_option_01:

                    // replace content_container by fragment 1

                    break;

                case R.id.btn_02:

                    // replace content_container by fragment 2

                    break;      

                case R.id.btn_03:

                    // replace content_container by fragment 3

                    break;      

                }
            }
        }

    };

    private OnClickListener mBgClickListener = new OnClickListener()
    {
        public void onClick(View v)
        {
            toggleMenu(1000);           
        }
    }; 
```

**主要布局**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <FrameLayout
        android:id="@+id/content_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:paddingTop="44dp" />

    <FrameLayout
        android:id="@+id/top_bar_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:clipChildren="false" />

</RelativeLayout> 
```

**顶栏布局**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#00000000" >

    <LinearLayout
        android:id="@+id/vertical_menu"
        android:layout_width="50dp"
        android:layout_height="match_parent"
        android:layout_marginTop="44dp"
        android:background="#ffffff"
        android:orientation="vertical"
        android:visibility="gone" >

      <!-- menu layout -->

    </LinearLayout>

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="44dp"
        android:background="#ffffff" >

        <Button
            android:id="@+id/btn_menu"
            android:layout_width="50dp"
            android:layout_height="44dp"
            android:background="@drawable/menubtn" />   

        <ImageView
            android:layout_width="130dp"
            android:layout_height="44dp"
            android:src="@drawable/logo"
            android:layout_alignParentRight="true" />
    </RelativeLayout>

</RelativeLayout> 
```

![在此处输入图像描述](https://i.stack.imgur.com/a6VfL.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T11:38:58.537

我知道已经有一个公认的答案，但我有一个类似的问题，答案没有帮助。

我有一个视图，我在布局结束时声明将其 Z 索引保持在其兄弟姐妹之上。我必须触摸页面才能使动画工作。

所以我通过Java再次设置了Z索引，它工作了。

```
view.bringToFront(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:18:08.197

在我的`Toggle`方法结束时，我使根视图无效：

```
rootView.invalidate(); 
```

现在它可以工作了。不太清楚为什么我必须这样做......

# function - 在 2 个 Verilog 模块中重用相同的功能

> ID：16133610
> 
> 赞同：2
> 
> 时间：2013-04-21T16:46:25.797
> 
> 标签：function, design-patterns, verilog, system-verilog, code-reuse

我有一个函数`f()`，在 Verilog 模块中定义，`M1`. 我想在不同的模块中重用这个相同的功能，`M2`.

有没有在不重新定义函数的情况下这样做`M2`？

```
 --- M1.v ---
  module M1();
     function f;
        //do stuff
     endfunction
  endmodule

  --- M2.v -----
  module M2();
  // Use f() here
  endmodule 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T17:57:43.477

您可以将函数放入单独的文件中，并使用**`include**编译器指令将函数包含在两个模块中：

```
 --- M1.v ---
  module M1();
     `include "functions.v"
  endmodule

  --- M2.v -----
  module M2();
     `include "functions.v"
     // Use f() here
  endmodule 
```

# css - word-wrap:break-word - 不要打断字符串

> ID：16133612
> 
> 赞同：0
> 
> 时间：2013-04-21T16:46:34.483
> 
> 标签：css, asp.net-mvc, asp.net-mvc-4, razor

我想在我的视图列表中显示来自数据库的所有评论。但有时，评论很长。我试图用 来“打破”它们`word-wrap:break-word`，但没有结果 - 像这样的评论

> 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊

扩大我的看法..

我想展示：

> 啊啊啊啊啊啊啊啊啊啊啊啊啊
> 
> 啊啊啊啊啊啊啊啊啊啊啊啊啊啊

怎么做？CSS`Width`属性也不起作用。

这是我的代码：

```
<table style="width: 100%;">
@foreach (var comment in Model.commentList)
{ 
    <tr style="border-bottom:1pt solid black;">
        <td style="width: 30%;">
            <br />

            @comment.UserName<br /><br />
            @comment.AddDate

        </td>
        <td style="word-wrap:break-word; width: 70%;">
            <br />
            @comment.Content

        </td>

    </tr>

}

</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:58:14.033

实际上`word-wrap: break-word`似乎在表格中无法正常工作。不过有一个解决方法。试试下面的代码（注意标签`table-layout: fixed`中的附加`table`代码）。

```
<table style="table-layout: fixed; width: 100%;">
@foreach (var comment in Model.commentList)
{ 
    <tr style="border-bottom:1pt solid black;">
        <td style="width: 30%;">
            <br />
            @comment.UserName<br /><br />
            @comment.AddDate
        </td>
        <td style="word-wrap:break-word; width: 70%;">
            <br />
            @comment.Content
        </td>
    </tr>
}
</table> 
```

# javascript - 如何验证是否选中了复选框以及是否为 true 生成代码？

> ID：16133613
> 
> 赞同：0
> 
> 时间：2013-04-21T16:46:38.130
> 
> 标签：javascript

我是stackoverflow的新手，我通常会很好地找到自己的答案，我绝不是javascript专业人士，我的问题可能是对某些人的简单回答......哈哈

我的示例代码查看名称为 input10 的文本字段，然后在生成器中生成代码。为此，我认为我不需要文本字段；一个复选框会更好，我会为复选框添加价值 value="telephone=no"

我必须在代码中添加什么才能使用复选框？

**示例代码**

```
if (form.input10.value != "") {
      form.generator.value +="<meta name=\"format-detection\" content=\"" +
      form.input10.value + "\">\n"; 
} 
```

我非常感谢任何积极的反馈并帮助我到达 stackoverflow。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:52:48.870

```
<input id="tick" type="checkbox">

var tick = document.getElementById("tick");

function onChange(evt) {
    alert("Checkbox is " + (evt.target.checked ? "checked" : "unchecked"));
}

document.addEventListener("change", onChange, false);

console.log(tick.checked); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/wRssV/)

这是在一个事件上运行，但检查复选框只是从获取值的问题`tick.checked`

正如我所说，我不明白你的代码在你提供的少量上下文中做了什么，但也许这就是你想要的，将你的文本框检查更改为复选框检查

```
if (form.tick.checked) {
      form.generator.value +="<meta name=\"format-detection\" content=\"" +
      form.input10.value + "\">\n"; 
} 
```

# javascript - 在使用内容脚本加载每个页面之前运行 JS 的 Chrome 扩展

> ID：16133614
> 
> 赞同：2
> 
> 时间：2013-04-21T16:46:43.290
> 
> 标签：javascript, google-chrome-extension

我正在尝试编写一个需要在任何页面加载之前注入 JS 的 chrome 扩展。我无法让我的 JS 执行。

这就是我的清单：

```
{
  "manifest_version": 2,

  "name": "testOne",
  "description": "This extension inject js",
  "version": "1.0",

  "permissions": ["<all_urls>"],
  "content_scripts": [
    {
      "matches": ["http://*/*"],
      "js": ["myscript.js"],
      "run_at": "document_start"
    }
  ]
} 
```

这就是我现在在我的 JS 中的内容：

```
alert('test');
console.log('you tried to log'); 
```

为什么我没有看到任何控制台事件警报？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T16:52:04.720

我重新启动了 chrome，我的 JS 工作了。

似乎 chrome 无法即时添加新的内容脚本。将一个添加到清单并重新启动 chrome 后，您可以编辑 JS 文件并重新加载扩展程序以运行新代码。

# html - 将表格垂直对齐到 div 的底部

> ID：16133615
> 
> 赞同：0
> 
> 时间：2013-04-21T16:46:56.780
> 
> 标签：html, css

我有这个 div 有 2 个表，一个比另一个大。我想要的是小表与 div 的底部对齐，因此小表的底线与大表的底部相邻。目前两条顶线是相邻的。谢谢。

```
<div style = "border:1px solid red; width:86;">

  <table id = "small" style = "border:1px solid; float:left;">
    <td style = "font-size:12;">small</td>
  </table>

  <table id = "large" style = "border:1px solid;">
    <td style = "font-size:20;">Large</td>
  </table>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:11:32.783

在这种特殊情况下，如果`large`保证元素具有更大的高度并且`small`元素具有固定的宽度，您可能可以像这样解决问题：

```
div {position: relative;}
#small {position: absolute; bottom: 0; width: 2.7em;}
#large {margin-left: 2.7em;} 
```

[http://jsfiddle.net/Aprillion/ZjRyE/](http://jsfiddle.net/Aprillion/ZjRyE/)

（对于一般情况选项，请参阅[div 中元素的垂直对齐方式](https://stackoverflow.com/q/79461/1176601)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:29:26.183

尝试使用小表格底部的填充或 div 的边距。

# c++ - 为什么 OpenGL 不会在屏幕上绘制任何内容？

> ID：16133616
> 
> 赞同：0
> 
> 时间：2013-04-21T16:46:59.207
> 
> 标签：c++, opengl

所以，我正在关注 Swiftless 的 openGL 4.x 教程。我按照他的教程创建的程序没有输出任何内容。我试过检查着色器是否有错误——我没有看到任何错误。

也许你可以指导我处理可能导致此问题的点。或者一些调试程序。

这是由 6 个顶点组成的正方形的设置函数。

```
float* vertices = new float[18];    // Vertices for our square
float* colors = new float[18];
glGenVertexArrays(1, &vaoID[0]); // Create our Vertex Array Object

glBindVertexArray(vaoID[0]); // Bind our Vertex Array Object so we can use it

glGenBuffers(2, &vboID[0]); // Generate our Vertex Buffer Object

glBindBuffer(GL_ARRAY_BUFFER, vboID[0]); // Bind our Vertex Buffer Object
glBufferData(GL_ARRAY_BUFFER, 18 * sizeof(GLfloat), vertices, GL_STATIC_DRAW); // Set the size and data of our VBO and set it to STATIC_DRAW
glVertexAttribPointer((GLuint)0, 3, GL_FLOAT, GL_FALSE, 0, 0); // Set up our vertex attributes pointer
glEnableVertexAttribArray(0); // Disable our Vertex Array Object

glBindBuffer(GL_ARRAY_BUFFER, vboID[1]); // Bind our Vertex Buffer Object
glBufferData(GL_ARRAY_BUFFER, 18 * sizeof(GLfloat), colors, GL_STATIC_DRAW); // Set the size and data of our VBO and set it to STATIC_DRAW
glVertexAttribPointer((GLuint)1, 3, GL_FLOAT, GL_FALSE, 0, 0); // Set up our vertex attributes pointer
glEnableVertexAttribArray(1); // Disable our Vertex Array Object

glBindVertexArray(0); // Disable our Vertex Buffer Object 
```

现在对于绘图功能：

```
glViewport(0, 0, windowWidth, windowHeight); // Set the viewport size to fill the window
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT); // Clear required buffers

viewMatrix = glm::translate(glm::mat4(1.0f), glm::vec3(0.0f, 0.0f, -5.f)); // Create our view matrix
modelMatrix = glm::scale(glm::mat4(1.0f), glm::vec3(0.5f));  // Create our model matrix

shader->bind(); // Bind our shader

int projectionMatrixLocation = glGetUniformLocation(shader->id(), "projectionMatrix"); // Get the location of our projection matrix in the shader
int viewMatrixLocation = glGetUniformLocation(shader->id(), "viewMatrix"); // Get the location of our view matrix in the shader
int modelMatrixLocation = glGetUniformLocation(shader->id(), "modelMatrix"); // Get the location of our model matrix in the shader
glUniformMatrix4fv(projectionMatrixLocation, 1, GL_FALSE, &projectionMatrix[0][0]); // Send our projection matrix to the shader
glUniformMatrix4fv(viewMatrixLocation, 1, GL_FALSE, &viewMatrix[0][0]); // Send our view matrix to the shader
glUniformMatrix4fv(modelMatrixLocation, 1, GL_FALSE, &modelMatrix[0][0]); // Send our model matrix to the shader

glBindVertexArray(vaoID[0]); // Bind our Vertex Array Object

glDrawArrays(GL_POINTS, 0, 6);
//glDrawArrays(GL_TRIANGLES, 0, 6); // Draw our square

glBindVertexArray(0); // Unbind our Vertex Array Object

shader->unbind(); // Unbind our shader

SwapBuffers(hdc); // Swap buffers so we can see our rendering 
```

顶点着色器：

```
#version 330 core

uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat4 modelMatrix;

layout(location = 0) in vec3 in_Position;
in vec3 in_Color;

out vec3 pass_Color;

void main(void)
{
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(in_Position, 1.0);
    pass_Color = in_Color;
} 
```

片段着色器：

```
#version 330 core

in vec3 pass_Color;
out vec4 out_Color;

void main(void)
{
    out_Color = vec4(pass_Color, 1.0);
} 
```

# java - JMenuPopup 不准确？

> ID：16133620
> 
> 赞同：0
> 
> 时间：2013-04-21T16:47:21.557
> 
> 标签：java, swing, debugging, jbutton, jpopupmenu

问题图片：

[http://gyazo.com/56c4f7f5fc10805695fc80de567b92c5.png](http://gyazo.com/56c4f7f5fc10805695fc80de567b92c5.png)

```
 private JButton settingsButton = new JButton("Settings");

    private JPopupMenu settings = new JPopupMenu();

    private JMenuItem accounts = new JMenuItem("Accounts");
settings.add(accounts);     
        settingsButton.addMouseListener(new MouseAdapter() {
                public void mousePressed(MouseEvent e) {
                    settings.show(e.getComponent(), 0, 0);
                }
            }); 
```

因此，正如您在图像上看到的那样，我认为这不准确。有没有（更好的）方法可以将它放在正确的位置？

我点击了JButton：“设置”，它应该会弹出一点点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:05:45.837

你最好使用 a`JMenuBar`然后添加`JMenus`with `JMenuItems`，重新发明轮子没有意义：

```
JMenuBar menubar = new JMenuBar();
JMenu settings = new JMenu("Settings");
JMenuItem accounts = new JMenuItem("Accounts");
settings.add(accounts);
menubar.add(settings);
myFrame.setJMenuBar(menubar); 
```

# java - 从用户输入的值中单独获取数组元素

> ID：16133621
> 
> 赞同：0
> 
> 时间：2013-04-21T16:47:26.613
> 
> 标签：java, arrays

所以下面是我的循环代码

```
System.out.print("How many values? ");
numOfValues = input.nextInt();

int[] values = new int[numOfValues]; 
for(int i=0; i<numOfValues;i++)
{
    System.out.print("Value " + (i+1) + " :");
    values[i] = input.nextInt();
} 
```

我需要查看用户分别在 values 数组的每个元素中输入了什么，以便我可以将它们打印到屏幕上。这可能吗？我`numOfValues`作为数组索引传入，所以我不知道数组本身中有多少元素。

例如：屏幕将显示：您输入：2,5,3,5,4

但是如何打印出数组中元素的确切数量？因为我没有给它一个固定的数字，比如`values[3];`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:51:27.583

数组具有长度字段，因此您可以调用`values.length`which 将返回`numOfValues`数组的大小 ( )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:49:30.467

如果您希望用户不必从一开始就指定数组的大小，您可以使用 ArrayList。您可以即时插入项目，它会自动增长。

```
ArrayList<Integer> elements = new ArrayList<Integer>();

elements.add(x); 
```

然后，您可以告诉用户插入的元素数量`elements.size()`

# javascript - Jquery $.when 带有多个参数和 xhr

> ID：16133624
> 
> 赞同：1
> 
> 时间：2013-04-21T16:47:35.027
> 
> 标签：javascript, jquery

我将 $.when 与多个请求一起使用。请考虑以下代码：

```
$.when(
    $.ajax({url: '/show/' + showId + '/details.json', type: 'GET', dataType: 'json', async: false}),
    $.ajax({url: '/show/' + showId + '/graphicAssets.json', type: 'GET', dataType: 'json', async: false}),
    $.ajax({url: '/graphicAssets/show/' + showId + '/files.json', type: 'GET', dataType: 'json', async: false}),
    $.ajax({url: '/graphicAssets/show/types.json', type: 'GET', dataType: 'json', async: false}),
    $.ajax({url: '/season/'+ showId +'/seasons.json', type: 'GET', dataType: 'json', async: false}),
    $.ajax({url: '/freebie/' + showId + '/freebies.json', type: 'GET', dataType: 'json', async: false})
)
.then(function(showDetailsData, showGraphicAssetsData, showFilesData, showTypesData, showSeasonsData, showFreebieData, status, xhr) {
    if (xhr.status == '302') location.reload();

    // Rest of the code goes here
} 
```

现在，我要做的是检查 xhr 对象的响应状态。结果未定义。我该如何解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:39:34.513

如果将多个 deferred 传递给`$.when`，则`then`处理程序会收到一个数组，其中包含解析每个 deferred 的结果。因此，在您的情况下，您将获得 7 个数组，每个数组包含`data, textStatus, jqXHR`.

因此，在您的情况下，正确的用法如下：

```
$.when(
$.ajax({url: '/show/' + showId + '/details.json', type: 'GET', dataType: 'json', async: false}),
$.ajax({url: '/show/' + showId + '/graphicAssets.json', type: 'GET', dataType: 'json', async: false}),
$.ajax({url: '/graphicAssets/show/' + showId + '/files.json', type: 'GET', dataType: 'json', async: false}),
$.ajax({url: '/graphicAssets/show/types.json', type: 'GET', dataType: 'json', async: false}),
$.ajax({url: '/season/'+ showId +'/seasons.json', type: 'GET', dataType: 'json', async: false}),
$.ajax({url: '/freebie/' + showId + '/freebies.json', type: 'GET', dataType: 'json', async: false})
)
.then(function(showDetailsData, showGraphicAssetsData, showFilesData, showTypesData, showSeasonsData, showFreebieData) {
    if (showDetailsData[2].status == '302' 
        || showGraphicAssetsData[2].status == '302' 
        ... etc) location.reload();

    // Rest of the code goes here
} 
```

# c# - Selenium(WebDriver) 找不到并单击元素：

> ID：16133625
> 
> 赞同：0
> 
> 时间：2013-04-21T16:47:36.913
> 
> 标签：c#, javascript, xpath, selenium-webdriver

-您好，感谢您阅读我的帖子。我花了一整天的时间试图弄清楚这一点。只需尝试单击上述元素以迭代到产品评论的下一页（这不会更改 URL）。该元素对应于页面产品反馈部分的“下一步”按钮。

这是我的代码：

```
using OpenQA;
using OpenQA.Selenium;
using OpenQA.Selenium.Support;
using OpenQA.Selenium.Firefox;
using OpenQA.Selenium.Support.UI;
using OpenQA.Selenium.IE; 
```

……

```
IWebDriver driver = new FirefoxDriver();

driver.Navigate().GoToUrl("http://www.aliexpress.com/item/Wholesale-DIY-Cardboard-Hang-tag-Retro-Gift-Hang-tag-500pcs-lot-Free-shipping-Thank-you/538222647.html");

driver.FindElement(By.XPath("/html/body/div[3]/div[10]/div[2]/div[2]/div/div/ul/li[2]/a")).Click(); 
```

上面的点击命令只是打开网页的产品反馈部分（有效）。接下来我只想选择产品反馈的下一页但没有成功。以下是我尝试单击下一步按钮并移动到产品反馈列表的下一页的一些命令。正如您可能看到的那样，我是编程新手。

```
driver.FindElement(By.XPath("/html/body/div/div[2]/div/div[2]/div/a[3]")).Click();
NoSuchElementException was unhandled: Unable to locate element: "method":"xpath","selector":"/html/body/div/div[2]/div/div[2]/div/a[3]"}"

driver.FindElement(By.XPath("//a[contains(@class,'page-next')]")).Click();
NoSuchElementException was unhandled:Unable to locate element: {"method":"xpath","selector":"//a[contains(@class,'page-next')]"}

       driver.FindElement(By.XPath("/html/body/div/div[2]/div/div[2]/div/a[@href='javascript:gotoPage(2)]")).Click(); 
InvalidSelectorException was unhandled: The given selector /html/body/div/div[2]/div/div[2]/div/a[@href='javascript:gotoPage(2)] is either invalid or does not result in a WebElement. The following error occurred:

InvalidSelectorError: Unable to locate an element with the xpath expression /html/body/div/div[2]/div/div[2]/div/a[@href='javascript:gotoPage(2)] because of the following error:

[Exception... "The expression is not a legal expression."  code: "12" nsresult: "0x805b0033 (SyntaxError)"  location: "file:///C:/Users/Danny/AppData/Local/Temp/anonymous695678260.webdriver-profile/extensions/fxdriver@googlecode.com/components/driver_component.js Line: 5773"]

    driver.FindElement(By.XPath("//a[@href='javascript:gotoPage(2)]")).Click(); 
InvalidSelectorException was unhandled: The given selector //a[@href='javascript:gotoPage(2)] is either invalid or does not result in a WebElement. The following error occurred:

InvalidSelectorError: Unable to locate an element with the xpath expression //a[@href='javascript:gotoPage(2)] because of the following error:  

[Exception... "The expression is not a legal expression."  code: "12" nsresult: "0x805b0033 (SyntaxError)"  location: "file:///C:/Users/Danny/AppData/Local/Temp/anonymous2137829175.webdriver-profile/extensions/fxdriver@googlecode.com/components/driver_component.js Line: 5773"]         

driver.FindElement(By.LinkText("2")).Click(); 
```

`No error`在这里，但是此代码单击页面上的错误按钮。

```
driver.FindElement(By.LinkText("javascript:gotoPage(2)")).Click();   
NoSuchElementException was unhandled: Unable to locate element: {"method":"link text","selector":"javascript:gotoPage(2)"}

driver.FindElement(By.TagName("a")).FindElement(By.LinkText("Next")).Click();
NoSuchElementException was unhandled: Unable to locate element: {"method":"link text","selector":"Next"}

driver.FindElement(By.CssSelector("html body.product-evaluation div#transction-feedback div.rating-detail div.topnav div#pagination-top.pagination div.pos-right a.page-next")).Click();
NoSuchElementException was unhandled: Unable to locate element: {"method":"css selector","selector":"html body.product-evaluation div#transction-feedback div.rating-detail div.topnav div#pagination-top.pagination div.pos-right a.page-next"}

IJavaScriptExecutor JavascriptExecutor = driver as IJavaScriptExecutor;

JavascriptExecutor.ExecuteScript("gotoPage(2)");
"Unexpected error. ReferenceError: gotoPage is not defined"

driver.FindElement(By.XPath("//a[contains(text(),'Next')]")).Click(); 
```

没有错误，没有任何反应

```
driver.FindElement(By.CssSelector("css=a.page-next")).Click(); 

InvalidSelectorException was unhandeled:The given selector css=a.page-next is either invalid or does not result in a WebElement. The following error occurred:[Exception... "An invalid or illegal string was specified"  code: "12" nsresult: "0x8053000c (NS_ERROR_DOM_SYNTAX_ERR)"  location: "file:///C:/Users/Danny/AppData/Local/Temp/anonymous797491401.webdriver-profile/extensions/fxdriver@googlecode.com/components/driver_component.js Line: 7717"]

driver.FindElement(By.XPath("//div[@id='pagination-top']/div/a[2]"));

NoSuchElementException was unhandled:Unable to locate element: {"method":"xpath","selector":"//div[@id='pagination-top']/div/a[2]"} 
```

我也尝试过：Internet Explorer 中的自动化，并在继续之前等待页面完全加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:09:53.683

以下是我关注的情况：

```
driver.FindElement(By.XPath("//a[contains(@class,'page-next')]")).Click(); 
```

*NoSuchElementException 未处理：无法定位元素：* `{"method":"xpath","selector":"//a[contains(@class,'page-next')]"}`

我建议您必须在搜索元素之前添加一个方法，以等待它在页面上的存在。我觉得您正在搜索的元素在您尝试搜索时尚未加载到页面上，因此 Selenium 立即失败。我建议转到[此链接](http://docs.seleniumhq.org/docs/04_webdriver_advanced.jsp)并使用隐式或显式等待。我觉得这是问题所在，因为根据标题中的 HTML，您的 XPath 看起来是正确的。

它们之间的区别在于，*每次搜索元素时都会*设置隐式等待，而显式等待可以有任何等待条件，并且每种情况可以有不同的超时。阅读提供的链接，看看它是否有意义，如果没有，请发布您的尝试，我会尽力提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T22:35:45.997

我今天使用以下 xpath 遇到了这个问题： //a[@class='myclass' and Text()='My Special link']

我应该使用 xpath 工具验证 firebug 中的语法，它找到了元素。在 java 代码中，它抛出了和你一样的异常。我发现错误的事情是“Text（）”，我将其更改为“text（）”并且它有效。微妙的大小写敏感问题大声笑。

我还在另一个论坛看到了类似的语法问题，例如： //[@class='myclass' and Text()='My Special link']

我猜这个人想用“myclass”类找到任何东西，它没有用。但是，当添加 * 时它起作用了。//*[@class='myclass' and Text()='My Special link']

看看你的 xpath 的语法，

干杯！

# php - 向 MYSQL 表添加新列后在 PHP 中编辑表数据

> ID：16133633
> 
> 赞同：-1
> 
> 时间：2013-04-21T16:48:15.747
> 
> 标签：php, mysql, insert, col

我正在使用 PHP 和 MYSQL 创建一个有 3 个页面的网站；插入、更新和删除。插入页面将新列添加到数据库表中。在我的更新页面中，我希望能够查看添加了新列的表中的所有数据。我该怎么办？即，如果在插入之后现在有 11 列而不是之前的 10 列，我希望显示更新页面

```
col1 | col2 | col3 | col4 | col5 | col6 | col7 | col8 | col9 | col10 | col11

data | data | data | data | data | data | data | data | data | data | data 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:49:31.847

这是我的一张桌子的例子：

```
<table>
    <tr>

<?php
$mysqli = new mysqli("localhost", "user", "pass", "test");
/*
 * CREATE TABLE `test` (
 `col1` int(11) NOT NULL,
 `col2` int(11) NOT NULL
... // until col5
 */
$query = "SELECT column_name FROM information_schema.columns 
    WHERE table_name = 'test' AND table_schema = 'test'";
$result = $mysqli->query($query);

// INSERT INTO `test`.`test` (`col1`, `col2`, `col3`, `col4`, `col5`)
// VALUES ('10', '11', '12', '13', '14'), ('15', '16', '17', '18', '10');

$query2 = "SELECT * FROM test";
$result2 = $mysqli->query($query2);

while ($row = $result->fetch_assoc()) {

    ?>
        <td><?=$row['column_name'];?></td>

<?php
}
?>
        </tr>
        <tr>

        <?php
 while ($res = $result2->fetch_assoc()) {

    $count_columns = $result->num_rows;

        for ($i = 1; $i <= $count_columns; $i++) {
     ?>
        <td><?=$res['col'.$i.''];?></td>
        <?php
        }
        ?>
        </tr>
        <tr>
<?php

 } 
```

* * *

输出：

```
col1    col2    col3    col4    col5
 10     11      12       13     14
 15     16      17       18     10 
```

那是在不知道列名及其计数的情况下。它们具有相同的前缀“col”就足够了。

添加一个新列后：

```
 ALTER TABLE `test` ADD `col6` INT NOT NULL 
    UPDATE test SET col6 = col1+1 
```

相同的代码（没有任何更改）产生：

```
col1    col2    col3    col4    col5    col6
 10     11      12       13     14      11
 15     16      17       18     10      16 
```

PS：我仍然不鼓励这种表结构，您需要动态添加列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:59:41.660

即使从 PHP 添加列（更改过程）对我来说也是不好的做法，可能会有不同的解决方案。您可以从 information_schema 中检索列：

```
SELECT column_name
FROM INFORMATION_SCHEMA.COLUMNS
WHERE table_name = 'yourTable';

$row['column_name']; //will output the actual result of columns for that table 
```

同样对于实际结果，您可以将它们命名为“col1，col2”，这样您就可以遍历结果并接收变量，例如

```
$row['col'.$i.'']; 
```

然后你可以收到每一列的结果，还有他们的名字。

# angularjs - 如何在 AngularJS $watch() 中检测用户与脚本变量的变化？

> ID：16133634
> 
> 赞同：2
> 
> 时间：2013-04-21T16:48:17.850
> 
> 标签：angularjs

我想在表单上实现开始和结束日期，但也允许用户从下拉列表中的一堆预设日期范围中进行选择。如果用户从下拉列表中选择一个值，则会填充开始和结束日期字段。如果用户编辑其中一个字段，则下拉菜单会将其自身设置为“自定义”选择。

我的“天真”实现如下，但很明显，无论字段是由用户还是由控制器更改，所有的手表都会触发。我如何设置我的手表，以便它可以工作？

**HTML**

```
<div ng-controller="ExportCtrl">
  <select ng-model="dateRange" ng-options="d.name for d in dateRanges"></select>                                    
  <input type="text" ng-model="startDate" />
  <input type="text" ng-model="endDate" />
 </div> 
```

**JS**

```
module.controller("ExportCtrl", function ($scope) {
  $scope.dateRanges = [
          { name: 'Custom', startDate: null, endDate: null },
          { name: 'Today', startDate: moment().startOf('day'), endDate: moment().endOf('day') },
          { name: 'Yesterday', startDate: moment().subtract('day', 1).startOf('day'), endDate: moment().subtract('day', 1).endOf('day') },
          { name: 'Last 3 days', startDate: moment().subtract('day', 2).startOf('day'), endDate: moment().endOf('day') },
          { name: 'Last 7 days', startDate: moment().subtract('day', 6).startOf('day'), endDate: moment().endOf('day') },
          { name: 'Last 30 days', startDate: moment().subtract('day', 29).startOf('day'), endDate: moment().endOf('day') },
          { name: 'Month to Date', startDate: moment().startOf('month'), endDate: moment().endOf('day') },
          { name: 'Last month', startDate: moment().subtract('month', 1).startOf('month'), endDate: moment().subtract('month', 1).endOf('month') },
          { name: 'Last 3 months', startDate: moment().subtract('month', 3).startOf('day'), endDate: moment().endOf('day') }
  ];
  $scope.dateRange = $scope.dateRanges[1];

  $scope.$watch('dateRange', function (newValue, oldValue) {
      if (oldValue === newValue) {
          return;
      }
      $scope.dateRange = newValue;
      $scope.startDate = $scope.dateRange.startDate;
      $scope.endDate = $scope.dateRange.endDate;
  });

  $scope.$watch('startDate', function (newValue, oldValue) {
      if (oldValue === newValue)
          return;
      $scope.dateRange = $scope.dateRanges[0];
      $scope.startDate = newValue;
  });

  $scope.$watch('endDate', function (newValue, oldValue) {
      if (oldValue === newValue)
          return;
      $scope.dateRange = $scope.dateRanges[0];
      $scope.endDate = newValue;
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T14:36:18.510

你的观察者会导致循环依赖。您应该同时观看它们并在其中定义您的逻辑。

```
$scope.$watch(function() { return $scope.dateRange + ',' + $scope.startDate.getTime() + ',' + $scope.endDate.getTime(); }, function (newValue, oldValue) {
    //recover new values of all three variables from newValue.split(',')
    //if all three values satisfy the constraints defined in $scope.dateRanges, return
    //if dateRange changes, change startDate and endDate
    //if startDate or endDate changes, change dateRange
}); 
```

# php - 使用php为json输出创建多级数组

> ID：16133635
> 
> 赞同：2
> 
> 时间：2013-04-21T16:48:22.303
> 
> 标签：php, json, multidimensional-array

到目前为止，这是我的 php。我首先添加了我的主要信息，然后添加了我与投票给该日期的用户的日期。

```
$id = $CURUSER["id"];

$eventid = $_GET['eventid'];

$z = SQL_Query_exec("SELECT * FROM cal_events WHERE eventid = '$eventid'");
$rowz = mysql_fetch_array($z);
$y = SQL_Query_exec("SELECT userid FROM cal_votes WHERE eventid = '$eventid'"); 
$y1 = mysql_num_rows($y);
$x = SQL_Query_exec("SELECT userid FROM cal_votes WHERE eventid = '$eventid' AND voted = 'no'");    
$x1 = mysql_num_rows($x);

$data = array();
            $data['eventid'] = $eventid;
            $data['eventname'] = $rowz['eventname'];
            $data['aboutevent'] = $rowz['aboutevent'];
            $data['lefttovote'] =   $x1;
            $data['enddate'] = date("D jS F Y",strtotime($rowz[enddate]));

 $caldates = SQL_Query_exec("SELECT dateid,eventdates FROM cal_dates WHERE eventid = $eventid ORDER BY dateid ASC");
               while($rowcaldates = mysql_fetch_array($caldates)){
                $data['dates'][] =  date("D jS F Y",strtotime($rowcaldates[eventdates])); 

                    $b = SQL_Query_exec("SELECT forename,surname FROM cal_voted left join users on users.id = cal_voted.userid WHERE dateid = $rowcaldates[dateid] ");
                    $c1 = mysql_num_rows($b);
                     while($rowb = mysql_fetch_array($b)){
                        $data['dates']['names'][] = "$rowb[forename] $rowb[surname],";
                            }
            }

echo json_encode($data); 
```

问题是我的 json 像这样返回

```
 {"eventid":"23","eventname":"Mums Birthday","aboutevent":"Curry Night Alton 7pm","lefttovote":0,"enddate":"Wed 19th June 2013",
"dates":{"0":"Sat 23rd March 2013","
names":["John ,","Clare ,","Scott ,","Clare ,","Scott ,"],"1":"Sat 30th March 2013"}} 
```

我试图输出这个。这只是一个拼凑的例子，但我相信你会明白的

```
 {"eventid":"23","eventname":"Mums Birthday","aboutevent":"Curry Night Alton 7pm","lefttovote":0,"enddate":"Wed 19th June 2013",
"dates":{"0":"Sat 23rd March 2013","
    names":["John,","Clare ,","Scott ,"}
"dates":{"1":"Sat 30th March 2013","
    names":["Clare ,","Scott ,"]}} 
```

这样我就可以遍历日期并使用 jquery mobile 将它们回显出来。我可以直接使用 php 来完成，因为我不需要将它们放入数组中，但是这个数组业务令人困惑

****更新*******

 **```
$data = array();
            $data['eventid'] = $eventid;
            $data['eventname'] = $rowz['eventname'];
            $data['aboutevent'] = $rowz['aboutevent'];
            $data['lefttovote'] =   $x1;
            $data['enddate'] = date("D jS F Y",strtotime($rowz[enddate]));

 $caldates = SQL_Query_exec("SELECT dateid,eventdates FROM cal_dates WHERE eventid = $eventid ORDER BY dateid ASC");
               while($rowcaldates = mysql_fetch_array($caldates)){
                $date_data = array();
                $date_data[0] = date("D jS F Y",strtotime($rowcaldates[eventdates])); 

                    $b = SQL_Query_exec("SELECT forename,surname FROM cal_voted left join users on users.id = cal_voted.userid WHERE dateid = $rowcaldates[dateid] ");
                    $c1 = mysql_num_rows($b);
                     while($rowb = mysql_fetch_array($b)){
                        $date_data['names'] = "$rowb[forename] $rowb[surname],";
                        array_push($data,$date_data);
                            }

            }

echo json_encode($data); 
```

输出

```
{"eventid":"23","eventname":"Mums Birthday","aboutevent":"Curry Night Alton 7pm","lefttovote":0,"enddate":"Wed 19th June 2013","0":{"0":"Sat 23rd March 2013","names":"John ,"},"1":{"0":"Sat 23rd March 2013","names":"Clare ,"},"2":{"0":"Sat 23rd March 2013","names":"Scott ,"},"3":{"0":"Sat 30th March 2013","names":"Clare ,"},"4":{"0":"Sat 30th March 2013","names":"Scott ,"}} 
```

****更新工作答案*******

 **```
 $caldates = SQL_Query_exec("SELECT dateid,eventdates FROM cal_dates WHERE eventid = $eventid ORDER BY dateid ASC");
               while($rowcaldates = mysql_fetch_array($caldates)){
                $date_data = array();
                $date_data[0] = date("D jS F Y",strtotime($rowcaldates[eventdates])); 

                    $b = SQL_Query_exec("SELECT forename,surname FROM cal_voted left join users on users.id = cal_voted.userid WHERE dateid = $rowcaldates[dateid] ");
                    $c1 = mysql_num_rows($b);
                     while($rowb = mysql_fetch_array($b)){

                        $date_data['names'][] = "$rowb[forename] $rowb[surname],"; 

                            }
                        array_push($data,$date_data);   
            }

echo json_encode($data); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T17:23:56.457

这是行不通的，因为您不能`dates`对多个 childeNode 使用相同的名称（即）：

```
 { "eventid":"23",
   "eventname":"Mums Birthday",
   "aboutevent":"Curry Night Alton 7pm",
   "lefttovote":0,"enddate":"Wed 19th June 2013",
   "dates":{
           "0":"Sat 23rd March 2013",
           "names":["John Hunter,","Clare Kinnear,","Scott Kinnear,"
           },
   "dates":{
           "1":"Sat 30th March 2013",
           "names":["Clare Kinnear,","Scott Kinnear,"]
           }
  } 
```

你应该像这样在一个数组中组合日期：

```
 { "eventid":"23",
   "eventname":"Mums Birthday",
   "aboutevent":"Curry Night Alton 7pm",
   "lefttovote":0,"enddate":"Wed 19th June 2013",
   "dates":[{
           "date":"Sat 23rd March 2013",
           "names":["John Hunter,","Clare Kinnear,","Scott Kinnear,"]
           },
           {
           "date":"Sat 30th March 2013",
           "names":["Clare Kinnear,","Scott Kinnear,"]
           }]
  } 
```

要实现这一点，您可以执行以下操作：

```
$n = 0;
$caldates = SQL_Query_exec("SELECT dateid,eventdates FROM cal_dates WHERE eventid = $eventid ORDER BY dateid ASC");
    while($rowcaldates = mysql_fetch_array($caldates)){
        $data->dates[$n]->date =  date("D jS F Y",strtotime($rowcaldates[eventdates])); 
        $b = SQL_Query_exec("SELECT forename,surname FROM cal_voted left join users on users.id = cal_voted.userid WHERE dateid = $rowcaldates[dateid] ");
        $c1 = mysql_num_rows($b);
        while($rowb = mysql_fetch_array($b)){
            $data->dates[$n]->names[] = "$rowb[forename] $rowb[surname],";
        }
        $n++;
    }

echo json_encode($data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T16:56:11.397

在 while 循环中，创建一个名为 $date_data 的数组。将日期存储在 $date_data[0] 中，将名称存储在 $date_data['names'] 中。最后，如果同时，使用 $data['dates][] = $date_date; 将 $date_data 推送到日期信息中

附带说明一下，您不应该将 $_GET 变量直接放入查询中。确保您使用准备好的语句，或以某种方式转义值；-)****

# android - 为什么 My SharedPreference 创建另一个文件名 DATA_Preferences？

> ID：16133636
> 
> 赞同：0
> 
> 时间：2013-04-21T16:48:23.837
> 
> 标签：android, sharedpreferences

我有一个带有选择模式的列表视图，它可以工作。我想将该选中的项目保存到共享首选项，然后在另一个活动中使用它。但是，我的 SharedPreferences 并没有正确保存我的字符串，并保存了另一个文件调用 DATA_Preferences 我从未在我的代码中调用过。结果是我的下一个活动得到错误的值..

这是我用来保存字符串并被另一个活动使用的代码：

```
public void onClick(View v) {

            SparseBooleanArray checked = listView.getCheckedItemPositions();
            ArrayList<DBLokasi> selectedItems = new ArrayList<DBLokasi>();

            // Item position in adapter
            SharedPreferences prefs = getSharedPreferences("DATA_COOR", Context.MODE_PRIVATE);
            SharedPreferences.Editor prefsEditor = prefs.edit();

            for (int i = 0; i < checked.size(); i++) {

                int position = checked.keyAt(i);
                // Add slected if truee
                if (checked.valueAt(i))
                    selectedItems.add(adapter.getItem(position));

                prefsEditor.putFloat(POINT_LATITUDE_KEY + i, Float.parseFloat(values.get(position).getLat()));
                prefsEditor.putFloat(POINT_LONGITUDE_KEY + i, Float.parseFloat(values.get(position).getLng()));

            }
            prefsEditor.commit();

            String[] outputStrArr = new String[selectedItems.size()];

            for (int i = 0; i < selectedItems.size(); i++) {
                outputStrArr[i] = String.valueOf(selectedItems.get(i));
            }

            Bundle b = new Bundle();

            Location location = new Location("POINT_LOCATION");

           for (int i = 0; i < checked.size(); i++) {

                location.setLatitude(prefs.getFloat(POINT_LATITUDE_KEY + i, 0));
                location.setLongitude(prefs.getFloat(POINT_LONGITUDE_KEY + i, 0));

                double latitude = prefs.getFloat(POINT_LATITUDE_KEY + i, 0);
                double longitude = prefs.getFloat(POINT_LONGITUDE_KEY + i, 0);
                prefsEditor.commit();

                b.putDouble("Latitude" + i, latitude );
                b.putDouble("Longitude"  + i, longitude);

                }

            int banyakPilih = checked.size();
            b.putInt("banyakPilih", banyakPilih);

            Intent intent = new Intent(getApplicationContext(),
                    HasilPilihanActivity.class);

            // Create a bundle object
            b.putStringArray("selectedItems", outputStrArr);

            // Add the bundle to the intent.
            intent.putExtras(b);

            // start the ResultActivity
            startActivity(intent);
        } 
```

我将我的首选项保存在 DATA_COOR.xml 文件名中，它保存了我的字符串，但我得到了另一个文件，在我的资源管理器中使用文件名 DATA_Preferences 保存了我的首选项。一些机构可以给我解决方案？之前谢谢。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:27:00.527

定义私有`SharedPreferences mediaPrefs = null;`

把它放在你的构造函数上`mediaPrefs = this.getSharedPreferences("Testing", 1);`

将以下方法放到源代码中：

```
public void storeStateString(String prefsKeys, Float prefsValue) {
        SharedPreferences.Editor prefEditor = mediaPrefs.edit();
        prefEditor.putFloat(prefsKeys, prefsValue);
        prefEditor.commit();
    } 
```

使用此方法存储状态，如：

`storeStateString("POINT_LATITUDE_KEY"+i,Float.parseFloat(values.get(position).getLat()));`

现在您可以通过以下方式获得此偏好：

```
Float finalValue = mediaPrefs.getFloat("POINT_LATITUDE_KEY1","2.0l"); 
```

如果 mediaPrefs 为空，则 2.0l 是默认值；

如果有任何问题，请告诉我。

# c# - 我应该使用几个嵌套的“使用”语句吗？

> ID：16133638
> 
> 赞同：3
> 
> 时间：2013-04-21T16:48:34.593
> 
> 标签：c#, sql, dispose, using

我想知道我是否应该在另一个里面使用 using 语句？例如：

```
using(SqlConnection con = new SqlConnection(...))
{
    ...
    using(SqlCommand cmd = new SqlCommand(...))
    {

    }
    ...
} 
```

两个“使用”都是必要的，还是第一个使用完成后会处理所有东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T16:49:31.983

您需要为`using statement`要处理的每个对象使用 a 。

`using statement`如果您知道 a主要是 [语法糖](http://en.wikipedia.org/wiki/Syntactic_sugar)，我认为您会更好地理解这一点 ，在引擎盖下会生成如下内容：

```
myObject m = new myObjecyt()
try
{
   // Code here
}
finally
{
   m.Dispose();
} 
```

在您当前的上下文中，可能需要处理包含在单个 using 块中的每个对象，但在许多其他上下文中，这种行为是不可取的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:01:03.577

您需要两者，因为它们是完全独立的，每个都有自己的变量。如果你有多个连续的 using 语句，你也可以这样写

```
using(SqlConnection con = new SqlConnection(...))
using(SqlCommand cmd = new SqlCommand(...))
{
   ...
} 
```

# mysql - Apache：mysql 和 pdo_mysql：分段错误

> ID：16133642
> 
> 赞同：1
> 
> 时间：2013-04-21T16:49:15.300
> 
> 标签：mysql, apache, segmentation-fault

我实际上是在管理一台服务器，而我的网络相关应用程序显然有一些问题......

当我查看我的 Apache error_log 时，我可以看到很多`[notice] child pid **** exit signal Segmentation fault (11)`......

经过一番搜索，启用/禁用 PHP 模块后，我发现“mysql”或“pdo_mysql”PHP 模块可能存在问题。

*   当启用 mysql.so 而**不是**pdo_mysql.so 时，不会再发生分段错误。但是，不再可能在 PHP 应用程序中使用 mysql 作为 PDO 驱动程序。
*   当启用 pdo_mysql.so 而**不是**mysql.so 时，子进程的寿命更长，但一段时间后仍会出现段错误。

我使用 gdb 探索了一些我向 Apache 询问的核心转储。有核心转储分析。

```
[New Thread 4565]
Reading symbols from /lib/libm.so.6...(no debugging symbols found)...done.
Loaded symbols for /lib/libm.so.6
Reading symbols from /lib/libpcre.so.0...done.
Loaded symbols for /lib/libpcre.so.0
Reading symbols from /lib/libselinux.so.1...(no debugging symbols found)...done.
Loaded symbols for /lib/libselinux.so.1
Reading symbols from /usr/lib/libaprutil-1.so.0...done.
Loaded symbols for /usr/lib/libaprutil-1.so.0
Reading symbols from /lib/libcrypt.so.1...(no debugging symbols found)...done.
Loaded symbols for /lib/libcrypt.so.1
Reading symbols from /lib/libexpat.so.0...(no debugging symbols found)...done.
Loaded symbols for /lib/libexpat.so.0
Reading symbols from /lib/libdb-4.3.so...(no debugging symbols found)...done.
Loaded symbols for /lib/libdb-4.3.so
Reading symbols from /usr/lib/libapr-1.so.0...done.
Loaded symbols for /usr/lib/libapr-1.so.0
Reading symbols from /lib/libpthread.so.0...(no debugging symbols found)...done.
[Thread debugging using libthread_db enabled]
Loaded symbols for /lib/libpthread.so.0
Reading symbols from /lib/libdl.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib/libdl.so.2
Reading symbols from /lib/libc.so.6...(no debugging symbols found)...done.
Loaded symbols for /lib/libc.so.6
Reading symbols from /lib/ld-linux.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib/ld-linux.so.2
Reading symbols from /lib/libsepol.so.1...(no debugging symbols found)...done.
Loaded symbols for /lib/libsepol.so.1
Reading symbols from /lib/libuuid.so.1...(no debugging symbols found)...done.
Loaded symbols for /lib/libuuid.so.1
Reading symbols from /lib/libresolv.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib/libresolv.so.2
Reading symbols from /lib/libnss_files.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib/libnss_files.so.2
Reading symbols from /lib/libnss_dns.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib/libnss_dns.so.2
Reading symbols from /usr/lib/libldap-2.3.so.0...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libldap-2.3.so.0
Reading symbols from /usr/lib/liblber-2.3.so.0...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/liblber-2.3.so.0
Reading symbols from /usr/lib/libsasl2.so.2...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libsasl2.so.2
Reading symbols from /lib/libssl.so.6...(no debugging symbols found)...done.
Loaded symbols for /lib/libssl.so.6
Reading symbols from /lib/libcrypto.so.6...(no debugging symbols found)...done.
Loaded symbols for /lib/libcrypto.so.6
Reading symbols from /usr/lib/libgssapi_krb5.so.2...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libgssapi_krb5.so.2
Reading symbols from /usr/lib/libkrb5.so.3...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libkrb5.so.3
Reading symbols from /lib/libcom_err.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib/libcom_err.so.2
Reading symbols from /usr/lib/libk5crypto.so.3...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libk5crypto.so.3
Reading symbols from /lib/libz.so.1...(no debugging symbols found)...done.
Loaded symbols for /lib/libz.so.1
Reading symbols from /usr/lib/libkrb5support.so.0...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libkrb5support.so.0
Reading symbols from /lib/libkeyutils.so.1...(no debugging symbols found)...done.
Loaded symbols for /lib/libkeyutils.so.1
Reading symbols from /usr/lib/apr-util-1/apr_ldap-1.so...done.
Loaded symbols for /usr/lib/apr-util-1/apr_ldap-1.so
Reading symbols from /lib/librt.so.1...(no debugging symbols found)...done.
Loaded symbols for /lib/librt.so.1
Reading symbols from /etc/httpd/modules/mod_auth_basic.so...done.
Loaded symbols for /etc/httpd/modules/mod_auth_basic.so
Reading symbols from /etc/httpd/modules/mod_auth_digest.so...done.
Loaded symbols for /etc/httpd/modules/mod_auth_digest.so
Reading symbols from /etc/httpd/modules/mod_authn_file.so...done.
Loaded symbols for /etc/httpd/modules/mod_authn_file.so
Reading symbols from /etc/httpd/modules/mod_authn_alias.so...done.
Loaded symbols for /etc/httpd/modules/mod_authn_alias.so
Reading symbols from /etc/httpd/modules/mod_authn_anon.so...done.
Loaded symbols for /etc/httpd/modules/mod_authn_anon.so
Reading symbols from /etc/httpd/modules/mod_authn_dbm.so...done.
Loaded symbols for /etc/httpd/modules/mod_authn_dbm.so
Reading symbols from /etc/httpd/modules/mod_authn_default.so...done.
Loaded symbols for /etc/httpd/modules/mod_authn_default.so
Reading symbols from /etc/httpd/modules/mod_authz_host.so...done.
Loaded symbols for /etc/httpd/modules/mod_authz_host.so
Reading symbols from /etc/httpd/modules/mod_authz_user.so...done.
Loaded symbols for /etc/httpd/modules/mod_authz_user.so
Reading symbols from /etc/httpd/modules/mod_authz_owner.so...done.
Loaded symbols for /etc/httpd/modules/mod_authz_owner.so
Reading symbols from /etc/httpd/modules/mod_authz_groupfile.so...done.
Loaded symbols for /etc/httpd/modules/mod_authz_groupfile.so
Reading symbols from /etc/httpd/modules/mod_authz_dbm.so...done.
Loaded symbols for /etc/httpd/modules/mod_authz_dbm.so
Reading symbols from /etc/httpd/modules/mod_authz_default.so...done.
Loaded symbols for /etc/httpd/modules/mod_authz_default.so
Reading symbols from /etc/httpd/modules/mod_ldap.so...done.
Loaded symbols for /etc/httpd/modules/mod_ldap.so
Reading symbols from /etc/httpd/modules/mod_authnz_ldap.so...done.
Loaded symbols for /etc/httpd/modules/mod_authnz_ldap.so
Reading symbols from /etc/httpd/modules/mod_include.so...done.
Loaded symbols for /etc/httpd/modules/mod_include.so
Reading symbols from /etc/httpd/modules/mod_log_config.so...done.
Loaded symbols for /etc/httpd/modules/mod_log_config.so
Reading symbols from /etc/httpd/modules/mod_logio.so...done.
Loaded symbols for /etc/httpd/modules/mod_logio.so
Reading symbols from /etc/httpd/modules/mod_env.so...done.
Loaded symbols for /etc/httpd/modules/mod_env.so
Reading symbols from /etc/httpd/modules/mod_ext_filter.so...done.
Loaded symbols for /etc/httpd/modules/mod_ext_filter.so
Reading symbols from /etc/httpd/modules/mod_mime_magic.so...done.
Loaded symbols for /etc/httpd/modules/mod_mime_magic.so
Reading symbols from /etc/httpd/modules/mod_expires.so...done.
Loaded symbols for /etc/httpd/modules/mod_expires.so
Reading symbols from /etc/httpd/modules/mod_deflate.so...done.
Loaded symbols for /etc/httpd/modules/mod_deflate.so
Reading symbols from /etc/httpd/modules/mod_headers.so...done.
Loaded symbols for /etc/httpd/modules/mod_headers.so
Reading symbols from /etc/httpd/modules/mod_usertrack.so...done.
Loaded symbols for /etc/httpd/modules/mod_usertrack.so
Reading symbols from /etc/httpd/modules/mod_setenvif.so...done.
Loaded symbols for /etc/httpd/modules/mod_setenvif.so
Reading symbols from /etc/httpd/modules/mod_mime.so...done.
Loaded symbols for /etc/httpd/modules/mod_mime.so
Reading symbols from /etc/httpd/modules/mod_dav.so...done.
Loaded symbols for /etc/httpd/modules/mod_dav.so
Reading symbols from /etc/httpd/modules/mod_status.so...done.
Loaded symbols for /etc/httpd/modules/mod_status.so
Reading symbols from /etc/httpd/modules/mod_autoindex.so...done.
Loaded symbols for /etc/httpd/modules/mod_autoindex.so
Reading symbols from /etc/httpd/modules/mod_info.so...done.
Loaded symbols for /etc/httpd/modules/mod_info.so
Reading symbols from /etc/httpd/modules/mod_dav_fs.so...done.
Loaded symbols for /etc/httpd/modules/mod_dav_fs.so
Reading symbols from /etc/httpd/modules/mod_vhost_alias.so...done.
Loaded symbols for /etc/httpd/modules/mod_vhost_alias.so
Reading symbols from /etc/httpd/modules/mod_negotiation.so...done.
Loaded symbols for /etc/httpd/modules/mod_negotiation.so
Reading symbols from /etc/httpd/modules/mod_dir.so...done.
Loaded symbols for /etc/httpd/modules/mod_dir.so
Reading symbols from /etc/httpd/modules/mod_actions.so...done.
Loaded symbols for /etc/httpd/modules/mod_actions.so
Reading symbols from /etc/httpd/modules/mod_speling.so...done.
Loaded symbols for /etc/httpd/modules/mod_speling.so
Reading symbols from /etc/httpd/modules/mod_userdir.so...done.
Loaded symbols for /etc/httpd/modules/mod_userdir.so
Reading symbols from /etc/httpd/modules/mod_alias.so...done.
Loaded symbols for /etc/httpd/modules/mod_alias.so
Reading symbols from /etc/httpd/modules/mod_rewrite.so...done.
Loaded symbols for /etc/httpd/modules/mod_rewrite.so
Reading symbols from /etc/httpd/modules/mod_proxy.so...done.
Loaded symbols for /etc/httpd/modules/mod_proxy.so
Reading symbols from /etc/httpd/modules/mod_proxy_balancer.so...done.
Loaded symbols for /etc/httpd/modules/mod_proxy_balancer.so
Reading symbols from /etc/httpd/modules/mod_proxy_ftp.so...done.
Loaded symbols for /etc/httpd/modules/mod_proxy_ftp.so
Reading symbols from /etc/httpd/modules/mod_proxy_http.so...done.
Loaded symbols for /etc/httpd/modules/mod_proxy_http.so
Reading symbols from /etc/httpd/modules/mod_proxy_connect.so...done.
Loaded symbols for /etc/httpd/modules/mod_proxy_connect.so
Reading symbols from /etc/httpd/modules/mod_cache.so...done.
Loaded symbols for /etc/httpd/modules/mod_cache.so
Reading symbols from /etc/httpd/modules/mod_suexec.so...done.
Loaded symbols for /etc/httpd/modules/mod_suexec.so
Reading symbols from /etc/httpd/modules/mod_disk_cache.so...done.
Loaded symbols for /etc/httpd/modules/mod_disk_cache.so
Reading symbols from /etc/httpd/modules/mod_file_cache.so...done.
Loaded symbols for /etc/httpd/modules/mod_file_cache.so
Reading symbols from /etc/httpd/modules/mod_mem_cache.so...done.
Loaded symbols for /etc/httpd/modules/mod_mem_cache.so
Reading symbols from /etc/httpd/modules/mod_cgi.so...done.
Loaded symbols for /etc/httpd/modules/mod_cgi.so
Reading symbols from /etc/httpd/modules/mod_version.so...done.
Loaded symbols for /etc/httpd/modules/mod_version.so
Reading symbols from /etc/httpd/modules/libphp5.so...(no debugging symbols found)...done.
Loaded symbols for /etc/httpd/modules/libphp5.so
Reading symbols from /usr/lib/sse2/libgmp.so.3...done.
Loaded symbols for /usr/lib/sse2/libgmp.so.3
Reading symbols from /usr/lib/libbz2.so.1...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libbz2.so.1
Reading symbols from /lib/libnsl.so.1...(no debugging symbols found)...done.
Loaded symbols for /lib/libnsl.so.1
Reading symbols from /usr/lib/libxml2.so.2...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libxml2.so.2
Reading symbols from /etc/httpd/modules/mod_proxy_ajp.so...done.
Loaded symbols for /etc/httpd/modules/mod_proxy_ajp.so
Reading symbols from /etc/httpd/modules/mod_ssl.so...done.
Loaded symbols for /etc/httpd/modules/mod_ssl.so
Reading symbols from /usr/lib/libdistcache.so.1...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libdistcache.so.1
Reading symbols from /usr/lib/libnal.so.1...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libnal.so.1
Reading symbols from /usr/lib/kloxophp/ioncube/ioncube_loader_lin_age.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/kloxophp/ioncube/ioncube_loader_lin_age.so
Reading symbols from /usr/lib/php/modules/curl.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/php/modules/curl.so
Reading symbols from /usr/lib/libcurl.so.3...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libcurl.so.3
Reading symbols from /usr/lib/libidn.so.11...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libidn.so.11
Reading symbols from /usr/lib/php/modules/dom.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/php/modules/dom.so
Reading symbols from /usr/lib/php/modules/fileinfo.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/php/modules/fileinfo.so
Reading symbols from /usr/lib/php/modules/gd.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/php/modules/gd.so
Reading symbols from /usr/lib/libfreetype.so.6...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libfreetype.so.6
Reading symbols from /usr/lib/libX11.so.6...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libX11.so.6
Reading symbols from /usr/lib/libXpm.so.4...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libXpm.so.4
Reading symbols from /usr/lib/libpng12.so.0...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libpng12.so.0
Reading symbols from /usr/lib/libjpeg.so.62...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libjpeg.so.62
Reading symbols from /usr/lib/libXau.so.6...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libXau.so.6
Reading symbols from /usr/lib/libXdmcp.so.6...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libXdmcp.so.6
Reading symbols from /usr/lib/php/modules/imap.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/php/modules/imap.so
Reading symbols from /usr/lib/libc-client.so.1...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libc-client.so.1
Reading symbols from /lib/libpam.so.0...(no debugging symbols found)...done.
Loaded symbols for /lib/libpam.so.0
Reading symbols from /lib/libaudit.so.0...(no debugging symbols found)...done.
Loaded symbols for /lib/libaudit.so.0
Reading symbols from /usr/lib/php/modules/json.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/php/modules/json.so
Reading symbols from /usr/lib/php/modules/mbstring.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/php/modules/mbstring.so
Reading symbols from /usr/lib/php/modules/mcrypt.so...done.
Loaded symbols for /usr/lib/php/modules/mcrypt.so
Reading symbols from /usr/lib/libmcrypt.so.4...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libmcrypt.so.4
Reading symbols from /usr/lib/php/modules/mysql.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/php/modules/mysql.so
Reading symbols from /usr/lib/mysql/libmysqlclient.so.15...done.
Loaded symbols for /usr/lib/mysql/libmysqlclient.so.15
Reading symbols from /usr/lib/php/modules/mysqli.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/php/modules/mysqli.so
Reading symbols from /usr/lib/php/modules/pdo.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/php/modules/pdo.so
Reading symbols from /usr/lib/php/modules/pdo_mysql.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/php/modules/pdo_mysql.so
Reading symbols from /usr/lib/php/modules/pdo_sqlite.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/php/modules/pdo_sqlite.so
Reading symbols from /usr/lib/libsqlite3.so.0...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libsqlite3.so.0
Reading symbols from /usr/lib/php/modules/phar.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/php/modules/phar.so
Reading symbols from /usr/lib/php/modules/snmp.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/php/modules/snmp.so
Reading symbols from /usr/lib/libnetsnmp.so.10...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libnetsnmp.so.10
Reading symbols from /lib/libwrap.so.0...(no debugging symbols found)...done.
Loaded symbols for /lib/libwrap.so.0
Reading symbols from /usr/lib/php/modules/soap.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/php/modules/soap.so
Reading symbols from /usr/lib/php/modules/wddx.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/php/modules/wddx.so
Reading symbols from /usr/lib/php/modules/xmlreader.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/php/modules/xmlreader.so
Reading symbols from /usr/lib/php/modules/xmlwriter.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/php/modules/xmlwriter.so
Reading symbols from /usr/lib/php/modules/xsl.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/php/modules/xsl.so
Reading symbols from /usr/lib/libexslt.so.0...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libexslt.so.0
Reading symbols from /usr/lib/libxslt.so.1...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libxslt.so.1
Reading symbols from /usr/lib/libgcrypt.so.11...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libgcrypt.so.11
Reading symbols from /usr/lib/libgpg-error.so.0...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libgpg-error.so.0
Reading symbols from /usr/lib/php/modules/zip.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/php/modules/zip.so
Core was generated by `/usr/sbin/httpd -k graceful'.
Program terminated with signal 11, Segmentation fault.
#0  0xb60e8dc6 in tcp_getline () from /usr/lib/libc-client.so.1 
```

我对这些分析不是很熟悉，但似乎我所有的 PHP 模块都被提及了，没有一个是缺失的。mysql似乎没有任何问题，pdo_mysql也没有。

有一些 C 编程经验，我基本上会说 /usr/sbin/httpd 需要比他应该的更多的内存。也许我要求他处理比他能力更多的模块。不知道。在这种情况下，是否有办法为子进程分配更多内存？

或者也许我没有看到另一个问题？感谢您的回答；）如果您需要更多信息，请询问。

* * *

附加信息 ：

已安装 PHP 5.3.3-13.el5_8。已安装 HTTPD 2.2.23-3。我没有安装 suphp，但我不记得在升级到 PHP5.3 之前看到它。我已经列出了 Apache 请求的模块（/etc/php.d/ 中的 .ini 文件），它们中的每一个都属于我系统上安装的一个 php53-* 包。

# javascript - 在 window.open 上禁用父窗口并在关闭弹出窗口时重新启用

> ID：16133643
> 
> 赞同：0
> 
> 时间：2013-04-21T16:49:24.047
> 
> 标签：javascript, jquery, asp.net

我有一个父窗口，在其中单击按钮会打开一个弹出窗口：

```
function Test() 
    {
            $("body").append('<div id="modalPopUp" class="modalOverlay">');
          var popupWindow = window.open("test.aspx", 'popUpWindow', 'height=300,width=600,left=100,top=30,resizable=No,scrollbars=No,toolbar=no,menubar=no,location=no,directories=no, status=No');

        } 
```

现在我可以打开弹出窗口并禁用父窗口，但现在我想在弹出窗口的弹出事件之外捕获关闭按钮单击 + 单击，所以我可以从我的身体中删除 ModalPopUp，这样我就可以重新启用父 div。我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:49:41.443

1.  您可以使用 window.opener 对象访问弹出窗口中的父窗口，或者：

2.  您可以使用 popupWindow 对象从父窗口访问子窗口。例如，如果弹出窗口关闭，您可以在父窗口中注册 unload 事件，如下所示：

    popupWindow.onunload = function() { alert('popup 已关闭或重定向') }

# javascript - CSS：调整背景图像的大小而不是切断

> ID：16133652
> 
> 赞同：0
> 
> 时间：2013-04-21T16:50:10.080
> 
> 标签：javascript, jquery, html, css

我正在使用 javascript 在浏览器调整大小时调整 div 的大小，并在页面加载时对其进行初始设置。（是的，我知道它需要优雅地降级。）我不能全部通过 CSS 完成的原因是因为在屏幕顶部有一个固定高度的固定导航栏需要考虑在内。我想调整 div（及其渐变背景）的大小以适应浏览器窗口，但是当我更改 CSS 高度属性时，它只是切断了图像而不是调整它的大小，这意味着页面的下一部分将无法正确转换。有一个简单的解决方法吗？

这是我现在使用的 CSS：

```
 #homepage_aboutstrip {
        background-image:url('home/images/gradient-about-background.png');
        background-repeat:repeat-x;
        position:absolute;
        margin-top:0px;
        width:100%;
        height:1050px;
        z-index:1;
    } 
```

并且使用 IMG 标签而不是 background-images 显然会起作用，但这不是一个选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T16:54:53.330

您可以使用单行 css 来完成。试试这个，如果它有效

```
background-image:url('home/images/gradient-about-background.png');
background-size: cover 
```

如果扩展过多，可能会影响图像质量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:02:54.163

它在 IE7 上也适用于我。

```
background: url(../img/url.jpg) no-repeat center center fixed;
-webkit-background-size: cover;
   -moz-background-size: cover;
     -o-background-size: cover;
        background-size: cover;
background-position: 0 40px; /* Only if you want clip out space for fixed navbar */ 
```

# bash - BASH - 类似字符串的命令

> ID：16133653
> 
> 赞同：3
> 
> 时间：2013-04-21T16:50:13.900
> 
> 标签：bash, command, pwd

我想知道是否可以在 BASH 中以这种方式使用命令：

让我们接受命令`pwd`

假设我想要一个变量`comm="pwd"` ，然后在程序的某个地方使用它，但是当我使用它时，我得到了真正的 pwd 命令输出。这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:53:42.373

这很简单，你可以这样做：

```
comm='pwd'
# just execute
$comm
# fetch output into variable
output=$($comm) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T16:52:46.650

尝试这样做：

```
var=$(pwd) 
```

* * *

反引号 (`) 用于旧式命令替换，例如

```
foo=`command` 
```

这

```
foo=$(command) 
```

建议使用语法。内部的反斜杠处理`$()`不那么令人惊讶，并且`$()`更容易嵌套。见[http://mywiki.wooledge.org/BashFAQ/082](http://mywiki.wooledge.org/BashFAQ/082)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T16:51:20.780

是的，只需将子命令括在反引号中（` 字符）：

```
comm=`pwd` 
```

# jquery - 引导模式中的自动完成问题

> ID：16133654
> 
> 赞同：73
> 
> 时间：2013-04-21T16:50:17.117
> 
> 标签：jquery, twitter-bootstrap, jquery-ui-autocomplete, bootstrap-modal

我在模态对话框引导程序内的 jQuery 自动完成中出现显示问题。

当我鼠标滚动时，结果不会保持附加到输入。

有没有办法解决这个问题？

这里[JsFiddle](http://jsfiddle.net/lughino/TtxqG/)：

```
.ui-autocomplete-input {
  border: none; 
  font-size: 14px;
  width: 300px;
  height: 24px;
  margin-bottom: 5px;
  padding-top: 2px;
  border: 1px solid #DDD !important;
  padding-top: 0px !important;
  z-index: 1511;
  position: relative;
} 
```

**编辑** 我发现了问题：

```
.ui-autocomplete {
  position: fixed;
  .....
} 
```

如果模态有滚动问题仍然存在！

这里[JsFiddle/1](http://jsfiddle.net/lughino/TtxqG/1/)。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-04-21T18:04:33.477

位置是正确的，它是“绝对的”，而您需要将其指定为[自动完成](http://api.jqueryui.com/autocomplete/#option-appendTo)的选项：

```
$( ".addresspicker" ).autocomplete( "option", "appendTo", ".eventInsForm" ); 
```

它可以在任何元素中锚定带有结果的框，我必须阻止它被锚定到表单的类！

这[是一个有效的 JsFiddle！](http://jsfiddle.net/lughino/TtxqG/4/).

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2013-08-08T15:05:42.363

上述关于该`z-index`问题的解决方案有效：

```
.ui-autocomplete { z-index:2147483647; } 
```

确保将其放在`.js`负责处理模态和自动完成逻辑的脚本之前。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2014-07-29T17:57:20.470

[查看 appendTo 文档](http://api.jqueryui.com/autocomplete/#option-appendTo)：

> 当值为 null 时，将检查输入字段的父类是否为 ui-front 类。如果找到具有 ui-front 类的元素，则菜单将附加到该元素。

因此**，只需将“ui-front”类添加到父元素**，自动完成功能就会正确显示在模态框内。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2016-07-16T13:39:30.560

将类**“ui-front”**添加到 div 父元素，自动完成将正确显示在 PopUp For Me 中。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-04-29T08:41:10.190

实际问题是引导模式的 Z-index 比页面中的任何其他元素都高。因此，自动完成实际上有效 - 但它隐藏在对话框后面。

您只需将其添加到您添加的任何`css`文件中：

```
.ui-autocomplete {
  z-index:2147483647;
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-10-08T15:41:14.277

为了解决这个问题，我只需要`css`通过 jQuery 更改文件：

```
.ui-front {
    z-index: 9999;
} 
```

注意：在 jquery-ui.css & jquery-ui.js 之后添加这个 css

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-01-20T15:38:57.220

试试添加这个：

```
.ui-autocomplete {
  z-index: 215000000 !important;
}
```

只要确保您对房产给予很高的价值并**添加**

> ！重要的

这真的很重要。后者将告诉您的浏览器首先执行此规则，然后再执行同一类的任何其他规则。希望它会有所帮助

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-11-25T09:20:25.250

# 在文件中：styles.css

```
.cdk-overlay-container
{
    z-index: 9999 !important;
} 
```

我在组件的内部 css 文件中尝试了所有解决方案，但没有任何效果，只有将其移动到 styles.css 时。

祝你好运

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-08T22:44:40.173

添加`appendTo`选项解决了这个问题。它将菜单附加到引导模型中的对象之一。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-09-11T16:42:52.827

我通过这个解决了......

```
/********************************************************************
*           CORREZIONE PER L'AUTOCOMPLETE EXTENDER di AJAX TOOLKIt  *
********************************************************************/
ul[id*='_completionListElem'] {
    z-index: 215000000 !important;
} 
```

自动完成扩展器完成列表有一个像这样的自动 ID id=' *_completionListElem* '

所以你必须向上推 z-index .. 然后是引导模式面板；）

希望能帮助到你

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-28T07:19:49.020

```
<style>
.ui-front {
    z-index: 5000;
    position: relative;
}
</style> 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-09-28T15:33:32.260

```
.ui-front {
    z-index: 9999;
}

<div class="modal fade" id="myModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog ui-front">
        <div class="modal-content">
            <div class="modal-header">

            </div>
            <div class="modal-body">

            </div>
        </div>
    </div>
</div> 
```

# c++ - C++ 错误未声明的标识符，但 Itellisense 不显示错误

> ID：16133657
> 
> 赞同：1
> 
> 时间：2013-04-21T16:50:35.440
> 
> 标签：c++

我有 ：

```
//in AdaBoost.h

    #pragma once

#define ITERATIONS_NUMBER 1000 //numar iteratii AdaBoost

class AdaBoost
{
public:
    AdaBoost(void);
    ~AdaBoost(void);
    bool train(int* trainData, int* responses,int,int);
    float predict(int* sample);
    bool save(char filename[]);
    bool load(char filename[]);
private:
    WeakClassifier * weakClassifiers[ITERATIONS_NUMBER];
    float weights[];
};

class WeakClassifier
{
public:
    WeakClassifier(void);
    WeakClassifier(int*,int*,float*,int,int);
    ~WeakClassifier(void);
    virtual int compute(int* sample);
    double getScore(){return score;}
protected:
    double score;
};

class DecisionStump :
    public WeakClassifier
{
public:
    DecisionStump(void);
    DecisionStump(int*,int*,float*,int,int);
    ~DecisionStump(void);

    int compute(int *sample)
    {   
    if (s * sample[dimIndex] < s * stump) return -1;
    else return 1;
    };
private:
    int s;
    int stump;
    int dimIndex;
    int length;
    int dimensions;
};

//in AdaBoost.cpp

#include "AdaBoost.h"

#include <limits>

AdaBoost::AdaBoost(void)
{
}

AdaBoost::~AdaBoost(void)
{
}

bool AdaBoost::train(int* trainData, int* responses,int length,int dimensions)
{
    //initializarea ponderilor
    float tmp = 1.0/dimensions;
    for(int i = 0;i < dimensions; i++)
    {
        weights[i] = tmp;
    }

    for(int t=0;t < ITERATIONS_NUMBER; t++)
    {
        //normalizare ponderi
        double sumWeights = 0.0;
        for(int i = 0;i < dimensions; i++)
        {
            sumWeights += weights[i];
        }
        for(int i = 0;i < dimensions; i++)
        {
            weights[i] = weights[i] / sumWeights;
        }

        //get weak classifier
        weakClassifiers[t] = new DecisionStump(trainData,responses,weights,length,dimensions);

        //obtine eroarea clasificatorului slab
        double score = weakClassifiers[t]->getScore();

    }
    return false;
}

WeakClassifier::WeakClassifier(int* trainingData,int* results,float* weights, int length,int dimensions)
{
}

DecisionStump::DecisionStump(void)
{
    s = 0;
    stump = 0;
    dimIndex = 0;
    length = 0;
    dimensions = 0;
}

DecisionStump::DecisionStump(int* trainingData,int* results,float* weights, int length,int dimensions)
{
    this->length = length;
    this->dimensions = dimensions;

    int dimIndexTmp;
    int stumpTmp;
    int sTemp;

    score = DBL_MAX;
    double scoreTemp;

    for(int i = 0;i < dimensions;i++)
        for(int j = 0;j < length;j++)
        {
            dimIndexTmp = i;
            stumpTmp = trainingData[j* dimensions + dimIndexTmp];

            sTemp = -1;
            scoreTemp = 0.0;
            for(int k = 0;k < length;k++)
            {
                int result;
                if (sTemp * trainingData[k* dimensions + dimIndexTmp] <  sTemp * stumpTmp) result = -1;
                else result = 1;

                //verifica daca clasificarea e corecta
                if (result != results[k]) scoreTemp += weights[k];
            }
            if (scoreTemp < score)
            {
                dimIndex = dimIndexTmp;
                stump = stumpTmp;
                s = sTemp;
                score = scoreTemp;
            }

            sTemp = 1;
            scoreTemp = 0.0;
            for(int k = 0;k < length;k++)
            {
                int result;
                if (sTemp * trainingData[k* dimensions + dimIndexTmp] <  sTemp * stumpTmp) result = -1;
                else result = 1;

                //verifica daca clasificarea e corecta
                if (result != results[k]) scoreTemp += weights[k];
            }
            if (scoreTemp < score)
            {
                dimIndex = dimIndexTmp;
                stump = stumpTmp;
                s = sTemp;
                score = scoreTemp;
            }
        }
        length = 0;

        dimensions = 0;

} 
```

我是使用 C++ 的新手，但我不断收到错误消息：`'weakClassifiers' : undeclared identifier " at [1] and [2] but intellisense from VS 2012 doesn't have a problem`

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T17:14:10.533

您应该使用[前向声明](http://en.wikipedia.org/wiki/Forward_declaration)。原因是当编译器试图编译`AdaBoost`时，'WeakClassifier' 这个词仍然不为人所知。

当你写`class WeakClassifier;`的时候你告诉编译器：我要使用类型 WeakClassifier，我会在别处定义它。

```
class WeakClassifier;
class AdaBoost
{
public:
    AdaBoost(void);
    ~AdaBoost(void);
    bool train(int* trainData, int* responses,int,int);
    float predict(int* sample);
    bool save(char filename[]);
    bool load(char filename[]);
private:
    WeakClassifier * weakClassifiers[ITERATIONS_NUMBER];
    float weights[];
};

class WeakClassifier
{
public:
    WeakClassifier(void);
    WeakClassifier(int*,int*,float*,int,int);
    ~WeakClassifier(void);
    virtual int compute(int* sample);
    double getScore(){return score;}
protected:
    double score;
}; 
```

请注意，在这种情况下，您只能拥有指向该类型的引用或指针，就像对`WeakClassifier *`inside所做的那样`AdaBoost`。（因为尚未向编译器描述该类型）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:15:10.953

您在头文件中的类`AdaBoost`之前声明了类`WeakClassifier`，但是您的类在声明属性时`AdaBoost`引用了类型。由于编译器顺序读取您的源文件和包含的头文件，它无法确定属性的类型，这就是它变得未声明的原因。`WeakClassifier``weakClassifiers``weakClassifiers`

在课前放一个这样的前向声明`AdaBoost`：

```
class WeakClassifier; 
```

# jquery - 如果子跨度被隐藏，则隐藏父 div

> ID：16133660
> 
> 赞同：0
> 
> 时间：2013-04-21T16:50:52.597
> 
> 标签：jquery

如果所有子跨度都有隐藏类，我正在尝试隐藏父 DIV。我的文档中还有其他具有相同类的 div 具有一两个隐藏跨度，但我只想在所有三个孩子都具有隐藏类时隐藏父 div。

这是我的 HTML：

```
<div class="example">
<span class="hidden">Design</span>
<span class="hidden">Development</span>
<span class="hidden">Branding</span>
</div> 
```

如果有任何具有可见类的 span 元素，我不想隐藏父 Div。因此，如果以下情况属实：

```
<div class="example">
<span class="visible">Design</span>
<span class="hidden">Development</span>
<span class="visible">Branding</span>
</div> 
```

示例 div 应该仍然可见。只有当所有三个子跨度都具有隐藏类时，它才应该是可见的。

这是我尝试过的 jQuery：

```
$('.example').each(function(){
if($('.hidden')(':visible').length == 0) {
$('.example').hide();
}
}); 
```

不用说，它没有奏效。

编辑：选择器已更改-我已将示例更新为更通用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:57:31.750

试试这种方式，如果父 div 类是 'example'

```
$(document).ready(function (){
   $('div.example .hidden').each(function(){
    $(this).parent().hide();
    });
}); 
```

根据您的第二个解释，我进行了以下更改以适应您的要求

```
$(document).ready(function(){
    var count = 0;
    $('div.example .hidden').each(function(){ //take the count of hidden span tags
    count++;
    });
    $('div.example').children().each(function(){
     if($('div.example').children().length==count){  // check whether the count of hidden span tag element length is equal to all the child element length
       $('div.example .hidden').parent().hide();
       }else{
           //alert('There is an visible element');
            }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:54:30.873

鉴于该 HTML，我建议：

```
$('.example').each(function(){
    var that = $(this).find('.hidden');
    return that.length === that.not(':visible').length;
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/YcZUH/)。

这假定该`.example`元素是您所指的相关父元素。

或稍微替代的方法：

```
$('.example').css('display',function(){
    var children = $(this).children();
    return children.length === children.not(':visible').length ? 'none' : 'block';
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/YcZUH/1/)。

参考：

*   [`css()`](http://api.jquery.com/css/).
*   [`each()`](http://api.jquery.com/each/).
*   [`find()`](http://api.jquery.com/find/).
*   [`not()`](http://api.jquery.com/not/).
*   [`:visible`选择器](http://api.jquery.com/visible-selector/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T17:10:03.810

此答案假定如您的示例中所述，您正在寻找 .example 父容器的所有 3 个元素都具有 .hidden 类的情况。

```
var childElements = $('.example .hidden');

if (childElements.length === 3) {
    $('.example').hide();
} 
```

*更新：第一个示例仅适用于只有一个 '.example' 元素的情况。以下示例分别循环遍历每个“.example”元素。

```
var parents = $('.example');

// Loop through each parent element, finding only it's childeren
parents.each(function(index, item) {

    var $item = $(item),
        childElements = $item.find('.hidden');

    if (childElements.length === 3) {
        $item.hide();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-02T22:21:38.133

这篇文章超级老了，但由于某种原因它突然出现在我的提要中，所以我仍然会给我两分钱：

```
$('.example').each(function(){
  let $parent = $(this);
  if($parent.find('span').length === $parent.find('span.hidden').length) {
    $parent.hide();
  }
}); 
```

# javascript - 以编程方式使 input[type=url] 的数据列表出现在 JavaScript 中

> ID：16133661
> 
> 赞同：9
> 
> 时间：2013-04-21T16:51:01.753
> 
> 标签：javascript, html, google-chrome, input, html-datalist

在 Chrome 中，目前 Datalist 仅在键入或双击`input`元素时出现，例如[http://jsfiddle.net/r7Y4v/](http://jsfiddle.net/r7Y4v/)

我正在尝试使数据列表更快出现。理想情况下，我会在输入旁边放一个小“下拉箭头”，单击它会使 Datalist 出现。

我正在寻找一个 webkit 解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T17:37:23.463

我在规范中找不到如何执行此操作的任何内容。

我还注意到当前浏览器中的实现似乎有很大差异（单击与 dbl-click、箭头键、完整与过滤列表以及过滤器如何匹配部分输入等）。

对我来说，目前似乎*仍然*没有正常工作的组合框，数据列表似乎还处于起步阶段。

所以看起来你现在最好自己滚动或使用现成的库。
在我看来，“ [minimul datalist](http://minimul.com/html5-datalist.html) ”库相当受欢迎（阅读的好链接）。
在该页面上是指向它的[GitHub 代码](http://github.com/minimul/datalist)和[演示页面](http://minimul.com/demo/datalist/index.html)的链接。

*旁注：* **我希望有人给出更好的答案！**另外，起初我认为省略箭头按钮是个好主意，这样如果人们想要一个可以连接到数据列表/自动完成/组合框的下拉按钮，他们可以有更好的样式选项。我很惊讶所有这一切似乎仍然未指定并且不受本机支持。规范编写者，请给我们简单的原生组合框（过期了这么久），然后添加类似香料的过滤器！

* * *

*编辑：*自 2012 年 8 月以来，Chromium 项目有一个开放的功能请求，要求提供下拉功能：

*   [问题 152375：使用 datalist 在输入标签上添加下拉切换](https://code.google.com/p/chromium/issues/detail?id=152375)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-07T23:30:03.490

这样的事情怎么样？由于 Chrome 确实在悬停时放置了一个图标，因此我放置了此图像，以便它位于同一个位置。

```
input[list]{
background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAJCAYAAADtj3ZXAAAAB3RJTUUH3wMHFxkH6cbPfQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAABaSURBVHjaY2RgYDAA4jkMxIEsID6FLrgOiP8TwNNwmSgNxJ/xaDwPxGz4nJSDQ+MHIFYn5B9mqA3omsOJDA9w4P1B0jiTWI0wMIFYf2IDPEB8gxh/4jOAIAAAbfwl/FxzevIAAAAASUVORK5CYII=');
background-repeat:no-repeat;
background-position:right;
background-origin: content-box;
} 
```

# jquery - 如何直接向 Django ImageField 添加额外选项？

> ID：16133662
> 
> 赞同：0
> 
> 时间：2013-04-21T16:51:08.340
> 
> 标签：jquery, python, django, django-models

我在 django 中有一个带有 ImageField 的简单模型：

```
class Album(models.Model):
    category = models.ForeignKey(Category, related_name='albums')
    subject = models.CharField(max_length=200)
    image = models.ImageField(upload_to='images/albums/')
    #... 
```

我想在管理员中添加多个图像。**如何添加额外的选项让用户添加多个图像？**我只看了一些教程，但它们都使用了 ManyToManyField 或 ForeignKeyField，这不适合我的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:10:17.953

将具有外键的图像模型添加到`Album`模型中。然后在`inlines`添加`AlbumModelAdmin`。请参阅[文档](https://docs.djangoproject.com/en/1.5/ref/contrib/admin/#django.contrib.admin.InlineModelAdmin)。

# c++ - OpenCV 中 Matlab 的 Conv2 等价物

> ID：16133668
> 
> 赞同：2
> 
> 时间：2013-04-21T16:51:36.067
> 
> 标签：c++, image, opencv, image-processing, convolution

我一直在尝试使用 OpenCV 对 2D 矩阵进行卷积。我实际上浏览了这段代码[http://blog.timmlinder.com/2011/07/opencv-equivalent-to-matlabs-conv2-function/#respond](http://blog.timmlinder.com/2011/07/opencv-equivalent-to-matlabs-conv2-function/#respond)但它只在肯定的情况下产生正确的答案。对于 OpenCV 或 C++，Matlab 中是否有像 conv2 这样的简单函数？

这是一个例子：

```
A= [
  1 -2
  3  4
] 
```

我想把它与`[-0.707 0.707]`

Matlab中conv2的结果是

```
 -0.7071    2.1213   -1.4142
 -2.1213   -0.7071    2.8284 
```

在 OpenCV 或 C++ 中计算此输出的一些函数？我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T17:42:00.843

如果您想要一个专属的 OpenCV 解决方案，请使用**cv2.filter2D**函数。但是，如果您想获得与 matlab 一样的正确输出，则应该调整borderType 标志。

```
>>> A = np.array([ [1,-2],[3,4] ]).astype('float32')
>>> A
array([[ 1., -2.],
       [ 3.,  4.]], dtype=float32)

>>> B = np.array([[ 0.707,-0.707]])
>>> B
array([[ 0.707, -0.707]])

>>> cv2.filter2D(A2,-1,B,borderType = cv2.BORDER_CONSTANT)
array([[-0.70700002,  2.12100005, -1.41400003],
       [-2.12100005, -0.70700002,  2.82800007]], dtype=float32) 
```

边界类型很重要。要找到卷积，您需要数组之外的值。如果你想得到类似matlab的输出，你需要通过cv2.BORDER_CONSTANT。请参阅输出的大小大于输入的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:01:45.770

如果您将 OpenCV 与 Python 2 绑定一起使用，则可以使用 Scipy，只要您的图像是 ndarray：

```
>>> from scipy import signal
>>> A = np.array([[1,-2], [3,4]])
>>> B = np.array([[-0.707, 0.707]])
>>> signal.convolve2d(A,B)
array([[-0.707,  2.121, -1.414],
      [-2.121, -0.707,  2.828]]) 
```

如果您想获得与 matlab 中相同的结果，请确保使用完整模式（默认设置），只要您使用“相同”模式 Scipy 的中心与 Matlab 不同。

# shell - 如何从脚本中选择特定的单词并用它们创建一个没有空格的新单词

> ID：16133670
> 
> 赞同：0
> 
> 时间：2013-04-21T16:51:43.007
> 
> 标签：shell

我想从文件中读取一个字符串，例如这个字符串

```
&0001 = 1234 5678 9abc 
```

现在我想拿这个字符串并从中构建另一个字符串

```
123456789abc 
```

我成功地从文件末尾读取了字符串

```
read_addr="`awk "END {print}" file.txt`"
echo ${read_addr} 
```

我应该如何继续从上面创建字符串 123456789abc ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:54:44.567

这个怎么样：

```
tail -n 1 file.txt | sed 's/ //g' | sed 's/.*=//' 
```

为您提供文件的`tail -n 1`最后一行并`sed 's/ //g'`删除空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:00:49.807

你可以稍微改变你的 awk 行：

```
awk -F= 'END{gsub(/ /,"",$2);print $2}' file.txt 
```

这条 awk 行将使用单个进程完成简单的任务。

# javascript - 如何检查值是否已传递给javascript函数

> ID：16133676
> 
> 赞同：0
> 
> 时间：2013-04-21T16:52:22.097
> 
> 标签：javascript, html

我有以下代码：[jsfiddle](http://jsfiddle.net/MaVFz/)

在这里，javascript函数记录单击表格单元格的值并将其存储在变量中。

我的问题是如何在提交表单之前检查变量是否有任何值。

注意：我试过了..

```
if( document.getElementById("h1").value=="null")
{
   alert("PASSWORD EMPTY");
} 
```

但一切都是徒劳..任何解决方案？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:58:18.917

当一个元素没有值时，它将只是一个空字符串

```
var h1 = document.getElementById("h1");

if (h1.value == ""){
   // is empty
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:58:28.143

```
if (!document.getElementById("h1").value)
{
   alert("PASSWORD EMPTY");
} 
```

# java - 设置 System.setOut(); 到命令提示符

> ID：16133677
> 
> 赞同：3
> 
> 时间：2013-04-21T16:52:26.960
> 
> 标签：java, cmd, runtime.exec

我想将输出流设置为命令提示符，如下所示：

```
Process p = Runtime.getRuntime()
              .exec("C:\\Windows\\System32\\cmd.exe /c start cls");
System.setOut(new PrintStream(p.getOutputStream())); 
```

但它不起作用，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:02:54.193

默认情况下，`PrintStream`s 不会自动刷新写入它们的内容。这意味着您写入它的数据不会立即发送到它所环绕的流中。但是，如果您构造`PrintStream`using `new PrintStream(p.getOutputStream(), true)`，它将在调用任何 println 方法、写入字节数组或写入换行符时自动刷新。这样，您写入的任何内容都将立即可供该进程访问。

请参阅[http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html)

# r - 如何重新排序 data.table 列？

> ID：16133678
> 
> 赞同：16
> 
> 时间：2013-04-21T16:52:35.587
> 
> 标签：r, data.table

如何置换 a 中的列`data.table`？我可以为 a 做到这一点`data.frame`，但`data.table`会覆盖该方法：

```
> df <- data.frame(a=1:3,b=4:6)
> df
  a b
1 1 4
2 2 5
3 3 6
> df[c("b","a")]
  b a
1 4 1
2 5 2
3 6 3
> dt <- as.data.table(df)
> dt
   a b
1: 1 4
2: 2 5
3: 3 6
> dt[c("b","a")]
Error in `[.data.table`(dt, c("b", "a")) : 
  When i is a data.table (or character vector), x must be keyed (i.e. sorted, and, marked as sorted) so data.table knows which columns to join to and take advantage of x being sorted. Call setkey(x,...) first, see ?setkey.
Calls: [ -> [.data.table 
```

请注意，这*不是*对[如何在 R 中重新排序列？](https://stackoverflow.com/questions/5620885/how-does-one-reorder-columns-in-r).

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-21T16:55:10.123

使用`setcolorder`：

```
> library(data.table)
> dt <- data.table(a=1:3,b=4:6)
> setcolorder(dt, c("b", "a"))
> dt
   b a
1: 4 1
2: 5 2
3: 6 3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T20:44:35.917

这就是你的做法`data.table`（不修改原始表）：

```
dt[, list(b, a)] 
```

或者

```
dt[, c("b", "a")] 
```

或者

```
dt[, c(2, 1)] 
```

# javascript - Angular - 指令和使用模块

> ID：16133682
> 
> 赞同：5
> 
> 时间：2013-04-21T16:52:43.113
> 
> 标签：javascript, angularjs, angularjs-directive

在研究了各种不同的项目并阅读了尽可能多的文档之后，我遇到了如何在我的应用程序中包含指令的问题。该应用程序设置如下：

app.js - 只是顶部

```
angular.module('ngDashboard', ['ngCookies','ngResource','ngDashboard.filters', 'ngDashboard.services', 'ngDashboard.directives']) 
```

所有模块都可以正常工作，除了（它是一个从示例重写的应用程序）对于根本不起作用的指令：

directives.js - 以下内容不起作用，也不会在视图上执行指令：

```
angular.module('ngDashboard.directives', []).
  directive('funkyElement', function () {
    return {
        restrict: 'E',
        transclude: true,
        scope: 'isolate',
        template: '<div>gonna parse this: {{orig}} <br/>... and get this: {{obj}}</div>',
        //templateUrl: 'template.html',
        compile:function (element, attr, transclusionFunc) {
            return function (scope, iterStartElement, attr) {
                var origElem = transclusionFunc(scope);
                var content = origElem.text();
                scope.orig = content;
                scope.obj = my_custom_parsing(content);
            };
        }
    };
}); 
```

同一directives.js 文件中的以下内容正常工作并且指令执行：

```
angular.module('ng').directive('funkyElement', function () {
    return {
        restrict: 'E',
        transclude: true,
        scope: 'isolate',
        template: '<div>gonna parse this: {{orig}} <br/>... and get this: {{obj}}</div>',
        //templateUrl: 'template.html',
        compile:function (element, attr, transclusionFunc) {
            return function (scope, iterStartElement, attr) {
                var origElem = transclusionFunc(scope);
                var content = origElem.text();
                scope.orig = content;
                scope.obj = my_custom_parsing(content);
            };
        }
    };
}); 
```

HTML 很简单：

```
<funky-element>
    Parse me... come ooooon! Just parse meee!
</funky-element> 
```

我的问题是，包含一组指令的正确方法是什么，以及为什么第一个示例（使用 ngDashboard.services）不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T15:01:46.210

事实证明，我拥有的 app.js 文件要么被缓存，因此指令依赖项不存在，要么我忽略了保存它（周末工作和深夜都可能）。由于在我对 app.js 进行更新后此问题已得到解决，因此我将通过以下建议将其标记为已解决：

1.  检查脚本控制台以确保您的文件没有被缓存
2.  完全关闭缓存，或使用隐身模式。
3.  始终确保将 ng-app 添加到您的文档中（并非如此，但可以帮助其他人）
4.  确保保存文件
5.  当您累了并学习新的编程语言/框架时，请多喝咖啡。

最后，关于 Angular，我没有意识到你可以向`ng`模块添加指令并且它们会变得可用。我确信这不是最佳实践，但对于测试和组合快速代码，它可能会派上用场。

# hibernate - 多对多休眠关系中的中央表

> ID：16133686
> 
> 赞同：1
> 
> 时间：2013-04-21T16:53:16.450
> 
> 标签：hibernate, netbeans, many-to-many

我是新来的冬眠。**我想在netbeans**中使用 hibernate 在书籍和作者之间创建多对多的连接。我看到的所有示例都是针对 Eclipse 而我找不到我的问题的答案。我的 Book.hbm.xml 是：

```
<hibernate-mapping>
<class name="Book" table="books">
  <id name="bookId" type="int" column="BookID">
     <generator class="assigned"/>
  </id>
  <property name="isbn" column="Isbn" type="string"/>
  <property name="title" column="Title" type="string"/>
  <property name="bookPicPath" column="BookPicPath" type="string"/>
  <property name="summary" column="Summary" type="string"/>
  <property name="genry" column="Genry" type="string"/>
  <property name="parentGenry" column="ParentGenry" type="string"/>
  <set name="authors" table="Book_Author" cascade="all">
        <key column="BookID" />
        <many-to-many column="AuthorID"  class="Author" />
  </set>

</class>
</hibernate-mapping> 
```

Author.hbm.xml 是：

```
<hibernate-mapping>
<class name="Author" table="authors">
  <id name="authorId" type="int" column="AuthorID">
     <generator class="assigned"/>
  </id>
  <property name="fname" column="Fname" type="string"/>
  <property name="lname" column="Lname" type="string"/>
  <property name="biography" column="Biography" type="string"/>
  <property name="gender" column="Gender" type="string"/>
  <property name="website" column="Website" type="string"/>
  <property name="authorPicPath" column="AuthorPicPath" type="string"/>
</class>
</hibernate-mapping> 
```

在主类中，我创建这样的表：

```
HibernateUtil.droptable("drop table authors");
HibernateUtil.setup("create table authors ( AuthorID int, Fname VARCHAR(20), Lname VARCHAR(20), Biography VARCHAR(255), Gender VARCHAR(20), Website VARCHAR(255), AuthorPicPath VARCHAR(255))");
HibernateUtil.droptable("drop table books");
HibernateUtil.setup("create table books ( BookID int, Isbn VARCHAR(20), Title VARCHAR(255), BookPicPath VARCHAR(255), Summary VARCHAR(255), Genry VARCHAR(255), ParentGenry VARCHAR(255))"); 
```

我的问题：

1.在多对多关系中有一个连接表（Book_Author）。现在我必须手动完成还是hibernate自己创建？
2.在主课上我有：

```
SessionFactory sessions = new Configuration().configure().buildSessionFactory();
Session session = sessions.openSession();

    Transaction tx = null;
    try {
        tx = session.beginTransaction();

        Set<Author> authors = new HashSet<Author>();
        Author a1 = new Author("1","1","1","1","1","1");
        Author a2 = new Author("2","2","2","2","2","2");
        authors.add(a1);
        authors.add(a2);

        Book b1= new Book("a","a","a","a","a","a",authors);
        session.save(b1);

        tx.commit();
        tx = null;           

    } catch ( HibernateException e ) {
        if ( tx != null )
            tx.rollback();
            e.printStackTrace();

    } finally {
        session.close();
    } 
```

但是当我运行程序时，我看到以下错误：

```
a different object with the same identifier value was already associated with the session: [Author#0] 
```

请指导。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:15:01.590

1.  如果您使用 SchemaExport (aka hbm2ddl)，hibernate 可以自动`Book_Author`为您生成关系表 ()。您可以`hibernate.cfg.xml`像这样配置它：`<property name="hibernate.hbm2ddl.auto">create-drop</property>`

2.  我看到你用`<generator class="assigned"/>`你的身份证。在这种情况下，您必须手动分配 id；如果你不这样做，休眠将抛出该异常。

# html - 不太具体的班级风格将不适用

> ID：16133688
> 
> 赞同：2
> 
> 时间：2013-04-21T16:53:24.090
> 
> 标签：html, css

我有一个名为 .dropdown 的类，它在整个页面中使用。但是对于这些下拉菜单之一，我希望底部边距为 10 像素。所以，在我使用的 html 中

```
<div class="dropdown" style="margin-bottom: 10px"> 
```

它工作正常。但是，如果我要在我的 css 文件中声明：

```
.ddMargin  { margin-bottom: 10px; } 
```

然后在我的html中使用它：

```
<div class="dropdown ddMargin"> 
```

它似乎不起作用。我怎样才能使这个额外的班级规则更具体？

```
.dropdown .ddMargin  { margin-bottom: 10px; } 
```

似乎也不起作用。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:55:52.317

消除空间

```
.dropdown.ddMargin  { margin-bottom: 10px; } 
```

这就是您选择同时具有两个类的元素的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:56:05.347

选择具有多个类的元素时没有空格：

```
.dropdown.ddMargin  { margin-bottom: 10px; }
         ^ 
```

# azure - 将 ICloudBlob.UploadFromStream 转换为 Task.Factory.FromAsync(begin,end,params)

> ID：16133689
> 
> 赞同：1
> 
> 时间：2013-04-21T16:53:25.903
> 
> 标签：azure, asynchronous, blob

我正在尝试转换：

```
blob.UploadFromStream(stream, null, new BlobRequestOptions { RetryPolicy = new LinearRetry(TimeSpan.FromMilliseconds(100), 3) }); 
```

至

```
 Task uploadStreamTask = Task.Factory.FromAsync(
                    blob.BeginUploadFromStream,
                    blob.EndUploadFromStream,
                    stream,
                    null); 
```

我的问题是，如果它只是传递给 beginUploadFromStream 的流参数，则上述方法有效。我不知道如何让它接受我的第一个示例中的其他参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:01:54.387

您的代码尝试调用不带任何参数的[BeginUploadFromStream-Method](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storage.blob.icloudblob.beginuploadfromstream%28v=azure.100%29.aspx)的重载- 但没有这样的重载。为了从需要参数的异步方法创建 Task-Async-Pattern，请使用[FromAsync<>-Method](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28System.Threading.Tasks.TaskFactory.FromAsync%60%601%29;k%28TargetFrameworkMoniker-.NETFramework,Version=v4.5%29;k%28DevLang-csharp%29&rd=true)的通用版本。您可以在那里指定 Begin-Method 需要的参数。

对于 Begin/EndUploadFromStream 方法，代码如下所示：

```
Task.Factory.FromAsync<Stream>(blob.BeginUploadFromStream, blob.EndUploadFromStream, stream, null); 
```

但是由于您也需要传递*BlobRequestOptions*，所以事情变得有点复杂：

接受 BlobRequestOptions 参数的 BeginUploadFromStream-Method 的重载，总共需要四个参数。但是 FromAsync<> 方法没有为 begin 方法接受三个以上输入参数的重载。

**这是**您可以使用 FromAsync<> 方法的方式：

1.  为 ICloudBlob.BeginUploadFromStream 创建一个扩展方法，该方法需要两个参数（流和 BlobRequestOptions）并将它们正确传递给原始的 Begin-Method

    ```
    public static class Extensions
    {
        public static IAsyncResult BeginUploadFromStream(this ICloudBlob blob, Stream source, BlobRequestOptions options, AsyncCallback callback, object state)
        {
            return blob.BeginUploadFromStream(source, 
                                              null, 
                                              options, 
                                              null, 
                                              callback, 
                                              state);
        }
    } 
    ```

2.  使用异步重载创建任务

    ```
    Task.Factory
        .FromAsync<Stream, BlobRequestOptions>(blob.BeginUploadFromStream,
                                               blob.EndUploadFromStream, 
                                               stream,
                                               options, 
                                               null); 
    ```

如果您需要将所有四个参数传递给 BeginUploadFromStream-Method，请告诉我。我也知道如何解决这个问题。

**更新：** 这是一个四参数 Begin 方法的解决方案。我希望这个想法会产生更通用的东西并使用更少的反射，但现在它只适用于没有返回值的 EndMethod。

```
public static Task FromAsync<TArg1, TArg2, TArg3, TArg4>(this TaskFactory factory,
                                                         Func<TArg1, TArg2, TArg3, TArg4, AsyncCallback, object, IAsyncResult> beginMethod,
                                                         Action<IAsyncResult> endMethod,
                                                         TArg1 arg1,
                                                         TArg2 arg2,
                                                         TArg3 arg3,
                                                         TArg4 arg4,
                                                         object state,
                                                         TaskCreationOptions creationOptions)
    {
        // create a promise task that will wait until the async stuff is done
        var constructor = typeof(Task).GetConstructor(System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic, null, new Type[] { typeof(object), typeof(TaskCreationOptions), typeof(bool) }, null);
        var promise = constructor.Invoke(new object[] { state, creationOptions, true }) as Task;

        // perform the async pattern method
        try
        {
            IAsyncResult asyncResult = beginMethod(arg1, arg2, arg3, arg4, delegate(IAsyncResult iar)
            {
                if (!iar.CompletedSynchronously)
                {
                    // complete the async pattern
                    endMethod(iar);
                    var mFinish = typeof(Task).GetMethod("Finish", System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic);
                    mFinish.Invoke(promise, new object[] { true });
                }
            }, state);
            if (asyncResult.CompletedSynchronously)
            {
                // complete the async pattern synchronously
                endMethod(asyncResult);
                var mFinish = typeof(Task).GetMethod("Finish", System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic);
                mFinish.Invoke(promise, new object[] { true });
            }
        }
        catch (Exception ex)
        {
        }

        return promise as Task;
    } 
```

# javascript - Javascript运费计算器不抓取输入

> ID：16133690
> 
> 赞同：0
> 
> 时间：2013-04-21T16:53:30.010
> 
> 标签：javascript, input, calculator, shipping

我得到了一生的头痛。我不太擅长 Javascript，所以我不知道发生了什么。我应该编写一个文本框，当输入并提交价格时，它将计算运费并告诉您总数。除了没有设置键入的值之外，一切正常。因此，无论输入什么，价格似乎都永久设置为 NaN。我究竟做错了什么？丁：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Untitled Document</title>
  </head>
  <body>
    <form method="post" name="number" onsubmit='window.alert("Your total is $" + total + ".");'>
      <input type="text" name="purchasePrice" placeholder="0.00" />
      <input type="submit" value="submit" />
    </form>
    <script>
      /* <![CDATA[ */
      var price = parseFloat(document.getElementsByTagName("input")[0].value);
      var shipping = parseFloat(calculateShipping(price));
      var total = price + shipping;
      function calculateShipping(price) {
        if (price <= 25) {
          return 1.5;
        } else {
          return price * 10 / 100
        }
      }
      /* ]]> */
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:07:33.417

这是一个可以帮助您的示例

```
<input id="amount" type="text" name="purchasePrice" placeholder="0.00" />
<input id="submit" type="submit" value="submit" />

var amount = document.getElementById("amount");
var submit = document.getElementById("submit");

function calculateShipping() {
    var price = parseFloat(amount.value) || 0;

    if (price <= 25) {
        alert("Your total is $" + 1.5);
    } else {
        alert("Your total is $" + (price * 10 / 100));
    }
}

submit.addEventListener("click", calculateShipping, false); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/cf3zA/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:09:06.743

JavaScript 代码在它知道价格之前运行......所以任何 *,+ NaN 都是...... NaN。

您应该在单击提交时调用总计计算，f.ex。这边走：

```
<!DOCTYPE html>
<html>
<head>
<title>Untitled Document</title>

</head>

 <body>

<form method="post" name="number" onsubmit='calculateTotal()'>
<input type="text" name="purchasePrice" placeholder="0.00" />
<input type="submit" value="submit" />
</form>

<script>
/* <![CDATA[ */

function calculateTotal() {
    var price = parseFloat(document.getElementsByTagName("input")[0].value);
    var shipping = parseFloat(calculateShipping(price));
    var total = price+shipping;

    window.alert("Your total is $" + total + ".");
}

function calculateShipping(price) {
    if (price <= 25) {
        return 1.5; }
    else {
        return price * 10/100 }
    }

/* ]]> */
 </script>

 </body>

 </html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T17:18:01.850

您需要附加一个在用户输入值时触发的事件处理程序。

```
<form method="post" name="number" onsubmit='window.alert("Your total is $" + total + ".");'>
<label for="purchasePrice">Price:</label>
<input type="text" name="purchasePrice" id="purchasePrice" placeholder="0.00" />
<br>
<label for="shipping">Shipping:</label>
<input type="text" name="shipping" id="shipping" disabled>
<!-- <input type="submit" value="submit" /> -->
</form>

<script>
    var price;
    var shipping = parseFloat(calculateShipping(price));
    var total = price+shipping;

    function calculateShipping(price) {
        if (price <= 25) {
            return 1.5; }
        else {
            return price * 10/100;
        }
    }

    var pp = document.getElementById("purchasePrice");
    pp.onkeyup = function(e){
        price = calculateShipping(this.value);
        document.getElementById("shipping").value = price;
    };
</script> 
```

使用像 jQuery 这样的库，这种事情真的更容易。它还处理附加事件处理程序的浏览器实现之间的差异。

# python - 如何确定文件 I/O 的最大读取缓冲区大小

> ID：16133695
> 
> 赞同：0
> 
> 时间：2013-04-21T16:53:47.700
> 
> 标签：python, optimization, io, cython

我正在尝试为 Stata 文件类型优化二进制阅读器，并且对文件中的每条记录进行懒惰评估。随着文件大小的增加，阅读器的速度会很快下降。

当我问最初写它的人为什么要使用生成器时，他说要注意记忆。我得到的建议是一次读取和处理更大的文件块，我想知道如何判断我可以在不进入虚拟内存的情况下读取的最大块是多少。

一些旁注

*   为什么读取和处理大块比小块更快。多次调用的间接费用成本加起来这么快吗？
*   我很想看看我是否可以通过尝试 Cython 来获得更大的速度提升。有谁知道我可以查看的带有二进制文件阅读器的任何模块（除了 scipy.stats matlab 文件阅读器）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:12:01.660

*   我想知道如何判断我可以在不进入虚拟内存的情况下读取的最大块是多少。

我不确定“不进入虚拟内存”是什么意思，但这高度依赖于文件格式、存储介质和文件系统/操作系统等细节。最好凭经验确定。如果可以，请实现一个参数`chunk_size`（或`n_records`，或其他）来确定一次读取多少条记录。

*   为什么读取和处理大块比使用小块更快

取决于正在阅读的代码。这可能是由于系统调用开销，或者因为 Python 代码必须在读取之间执行。

*   有谁知道任何带有二进制文件阅读器的模块我可以看看

我在 Cython 中共同编写了[LibSVM/SVMlight 文件格式的加载器，这](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/datasets/_svmlight_format.pyx)是一种用于稀疏矩阵的简单文本格式。它作为 scikit-learn 的一部分分发。

# php - 为员工生成最佳时间表的 PHP 脚本 - 请指出正确的方向

> ID：16133697
> 
> 赞同：1
> 
> 时间：2013-04-21T16:54:03.760
> 
> 标签：php, scheduling

我必须创建一个 PHP 脚本，它会为几个学生助理生成一个最佳时间表。用户输入是学生助理的课程表，并且从该信息中提取他的空闲时间。从他的空闲时间将为他和其他学生助理生成一个最佳时间表。

我很困惑，因为我不知道如何解决这个问题。谷歌搜索也没有帮助。我真的很感激这方面的*任何*帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:08:55.843

我遇到了同样的问题，我必须为编码挑战实现它，所以我会尽力为您节省一些时间：您应该从阅读[匈牙利算法](http://en.wikipedia.org/wiki/Hungarian_algorithm)（也称为：Kuhn–Munkres 算法）开始。我建议特别注意“矩阵解释”，它描述了解决问题的分步方法。即使它被描述为将“N 个工作人员分配给 N 个任务”——您可以通过[根据需要添加尽可能多的行/列](http://www.wikihow.com/Use-the-Hungarian-Algorithm)并对这些行/列应用极高/极低的值来解决“对称性”问题（取决于您是否想要找到最大值与最小值）。[您可以在此处](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=hungarianAlgorithm)找到 C 代码示例。

# jquery-ui - jQueryUI 的 .tabs 与 Apache Rewrite 发生冲突

> ID：16133700
> 
> 赞同：1
> 
> 时间：2013-04-21T16:54:28.377
> 
> 标签：jquery-ui, mod-rewrite

我有一个 Apache 写，除了在使用“标签”的页面上之外，它在任何地方都可以使用。

出于某种原因，选项卡正在加载，就好像它们是通过 AJAX 加载的完整页面一样（通过 index.php 作为重写指示运行 - 但它不应该重写我认为的 # 锚链接......）

有没有办法阻止它这样做？这很奇怪，因为**它不仅将 # 链接视为真正的 URL，而且还在** `<html>` **via inline 样式**中添加了 -33,000px ，所以这就是我在检查工具中禁用它之后的样子。否则它只是黑色而且非常长。

![在此处输入图像描述](https://i.stack.imgur.com/tzCu5.jpg)

***我应该补充一点，这不是问题，直到我添加`<base href="/folder/">`以解决它没有正确重写子目录的问题。***之前，它仍然进行了重写并正确呈现了页面。

**更新** 这绝对是`<base>`和jQueryUI 的`.tabs`冲突。当我删除重写并使用长 URL 时，它会不断克隆它们。重写使它免于重写过去 12 次左右。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T17:16:25.977

感谢[这个](http://bugs.jqueryui.com/ticket/8637)错误报告，我找到了解决方案。

```
$.fn.__tabs = $.fn.tabs;
$.fn.tabs = function (a, b, c, d, e, f) {
    var base = location.href.replace(/#.*$/, '');
    $('ul>li>a[href^="#"]', this).each(function () {
        var href = $(this).attr('href');
        $(this).attr('href', base + href);
    });
    $(this).__tabs(a, b, c, d, e, f);
};

    //$('#the-object').tabs(); 
```

显然在 1.8 时它起作用了，在 1.9 时它变得循环了。这会将基本 href 添加到链接中，从而解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:01:50.440

`mod_rewrite`还会查看片段标识符，但您可以告诉它不要在`RewriteCond`.

以下仅允许不以片段标识符结尾的 URI。

```
RewriteCond %{REQUEST_URI} !(#(.*))$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T17:59:22.033

显然这部分是由于 jQueryUI 选项卡中的错误

[错误报告](http://bugs.jqueryui.com/ticket/4656)

我不确定我是否可以解决这个问题，但它在 IE 中工作，而不是在 Chrome/Firefox 中......我想我会尝试一个插件。

# matlab - Matlab：如何根据平均值和标准差绘制正态曲线

> ID：16133703
> 
> 赞同：2
> 
> 时间：2013-04-21T16:54:39.747
> 
> 标签：matlab, visualization

我有一个平均值和标准偏差，我想绘制一条轴上没有标签且没有网格线的正态曲线。我已经搜索并发现了这个：

```
r = mean + std.*randn(100,1);
histfit(r) 
```

但这有直方图条、网格线和轴代码。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T17:03:37.493

只需计算相应的[高斯曲线](https://en.wikipedia.org/wiki/Normal_distribution)并绘制它。

### 例子

让我们绘制一条均值为 4，标准差为 0.2 的高斯曲线：

```
mu = 4;                                %// Mean
sigma = 0.2                            %// Standard deviation

%// Plot curve
x = (-5 * sigma:0.01:5 * sigma) + mu;  %// Plotting range
y = exp(- 0.5 * ((x - mu) / sigma) .^ 2) / (sigma * sqrt(2 * pi));
plot(x, y)

%// Hide ticks
set(gca, 'XTick', [], 'XTickLabel', [], 'YTick', [], 'YTickLabel', []) 
```

结果是：

![结果](https://i.imgur.com/8k5IDzQ.jpg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T16:59:08.643

你为什么不使用：

```
R = normrnd(mu,sigma)
normplot(R) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T16:58:14.440

既然你有均值和标准差，你为什么不能画这个？

[https://en.wikipedia.org/wiki/Normal_distribution](https://en.wikipedia.org/wiki/Normal_distribution)

这就是您感兴趣的功能。只需循环范围内的值

`(mean - 3*stddev) <= x <= (mean + 3*stddev)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-19T20:23:52.800

您可以使用[正态概率密度函数](http://www.mathworks.com/help/stats/normpdf.html)。这与[Eitan T 的回答](https://stackoverflow.com/a/16133814/4368964)相结合，将给出

```
mu = 4;                                %// Mean
sigma = 0.2                            %// Standard deviation

%// Plot curve
x = (-5 * sigma:0.01:5 * sigma) + mu;  %// Plotting range
plot(x, normpdf(x,mu,sigma));

%// Hide ticks
set(gca, 'XTick', [], 'XTickLabel', [], 'YTick', [], 'YTickLabel', []) 
```

并会产生相同的数字。只是您将使用 MATLAB 内置函数，而不是自己编写代码。

# android - 在没有adjustPan的键盘出现时推送Listview

> ID：16133706
> 
> 赞同：35
> 
> 时间：2013-04-21T16:54:51.003
> 
> 标签：android, android-listview, android-softkeyboard

我正在尝试创建一个带有列表视图和底部发送消息的活动。问题是当键盘显示时，而不是推动底部内容，只是隐藏它。我尝试使用adjustPan，但它向上推动了孔视图（因此无法看到列表视图的顶部元素并且de actionbar也消失了）。

如果您看一下 WhatsApp 或 Line，其功能是当列表的最后一项显示在屏幕底部时，键盘会向上推列表视图（无需将操作栏或第一个元素移出屏幕)，并且当列表的最后一项未显示时（向上滚动后），键盘隐藏在底部列表中（正常的调整大小）。

有人处理过这个问题吗？

谢谢

**编辑：**

我将尝试举一个视觉示例：

所以让我们说这个 ListView：

```
---item 1---  
---item 2---  
---item 3---  
---item 4---  
---EditText--- 
```

editText 不是 ListView 的一部分，而是底部对齐的 LinearLayout。当显示键盘时，ListView 变成这样（第 3 项和第 4 项被键盘隐藏）：

```
---item 1---  
---item 2---  
---EditText---
---Keyboard--- 
```

我想得到的是：

```
---item 3---  
---item 4---  
---EditText---
---Keyboard--- 
```

我试过 android:windowSoftInputMode="adjustPan"。结果是第 3 项和第 4 项有效地被向上推，不再被键盘隐藏。问题是它推动了列表视图，但它把它推出了屏幕，所以 actionBar 消失了，即使尝试向上滚动，我也永远看不到显示键盘的项目 1 和项目 2。

希望我自己解释一下，不是很容易..

谢谢

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-23T17:23:51.293

好的，我已经为您找到了解决方案，您想要做的基本上是让 ListView 每次都滚动到底部。您可以通过以下方式做到这一点：

```
ListView l = getListView();
l.setTranscriptMode(ListView.TRANSCRIPT_MODE_NORMAL);
l.setStackFromBottom(true); 
```

如果是`Activity`，请在`onCreate`. 如果是`Fragment`，请在`onViewCreated`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-01-08T14:28:51.027

在您的布局 XML 中：

```
android:stackFromBottom="true"
android:transcriptMode="normal" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-11T10:06:58.490

单线解决方案

```
list_view.setTranscriptMode(ListView.TRANSCRIPT_MODE_ALWAYS_SCROLL); 
```

# xcode - 如何消除多个版本的 Xcode？

> ID：16133711
> 
> 赞同：2
> 
> 时间：2013-04-21T16:54:58.487
> 
> 标签：xcode, macos

我安装了自制软件，它一直在抱怨：

```
Warning: Your Xcode (4.2) is outdated
Please install Xcode 4.6.2. 
```

据我所知，没有办法更新 Xcode，所以我只是下载/安装了最新版本。

警告并没有消失，据我所知，我现在安装了 2 个版本：

![在此处输入图像描述](https://i.stack.imgur.com/4veh1.png)

**警告并没有消失**

我现在如何消除旧版本？我只是想真的更新它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T16:58:03.073

该`/Developer`位置现已过时。Xcode 现在完全从`/Applications/Xcode.app`.

要正确删除它，请从终端运行：

```
sudo /Developer/Library/uninstall-devtools --mode=all 
```

虽然，我过去只是将`/Developer`它移到了垃圾箱，这似乎工作正常。

之后您需要进入`Xcode.app`的首选项并`Command Line Tools`从安装`Downloads->Components`。我遇到了一个为新的 Xcode 安装设置自制软件的[教程。](http://kennethreitz.org/experiments/xcode-gcc-and-homebrew)

# stored-procedures - Firebird BLR 是否包含相关的字段大小？

> ID：16133713
> 
> 赞同：3
> 
> 时间：2013-04-21T16:55:01.233
> 
> 标签：stored-procedures, size, field, firebird

Firebird 和 InterBase 以 BLR（标记化）格式保存存储过程和触发器的编译形式。

但是我真的不知道BLR的结构。

字段大小是 BLR 的一部分吗？

当存储过程包含两个字段（源和目标）时，我会遇到一些问题，然后我将更改这两个字段的大小吗？

例如，它们很`varchar(50)`长，但现在我将它们更改为`varchar(100)`系统表更新。会发生什么？它只会复制 50 个字符，还是全部复制（100 个）？

还是 BLR 仅包含对象链接（表和字段）？

我将尝试用“伪”代码进行演示：

```
begin
  for select comp_id, comp_name from companies where ...
    into :ci, :cn 
    do begin
      -- somehow we're adding this to another table
      insert into new_clients (id, name) values (:ci, :cn);
    end
end; 
```

这可能是触发器或存储过程。

1.  `Comp_name`，并且`new_clients.name`最初是`varchar(50)`。
2.  我添加了这个过程或触发器。它可以正常工作一天。
3.  后来我意识到这些字段太短而无法容纳我的数据。
4.  我使用 GUI（例如 IBExpert）将这些字段更改为`varchar(150)`.
5.  没关系，`varchar(150)`现在都是。

那么会发生什么呢？

1.  如果 BLR 也包含字段大小，那么我更改字段的大小并不重要。50 个字符的触发器副本，因为它已经预编译了先前的长度。
2.  如果 BLR 只使用表和字段的关联/链接/标记，我们可以更改字段而无需担心复制功能。

问题是一样的：BLR 是否包含相关字段的大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T17:32:19.960

首先，您可以在 ISQL 中看到一个过程的 BLR：

```
SQL> create or alter procedure p1 (i1 varchar(10), i2 varchar(20)) 返回 (o1 varchar(30)) 作为开始结束！
SQL>设置blob全部！
SQL> 提交！
SQL> select rdb$procedure_blr from rdb$procedures where rdb$procedure_name = 'P1'!

blr_version5,
blr_begin,
   blr_message, 0, 4,0,
      blr_variing2, 0,0, 10,0,
      blr_short, 0,
      blr_variing2, 0,0, 20,0,
      blr_short, 0,
   blr_message, 1, 3,0,
      blr_variing2, 0,0, 30,0,
      blr_short, 0,
      blr_short, 0,
   blr_receive, 0,
    ...
blr_eoc

```

其次，永远不要更改系统表。

第三，是的，你会有问题！这就是为什么没有`ALTER PROCEDURE PARAMETER`命令。

# jquery - $.callback() 不同步调用回调方法的调用列表

> ID：16133717
> 
> 赞同：1
> 
> 时间：2013-04-21T16:56:01.597
> 
> 标签：jquery

这是我的代码

```
 var callbacks = $.Callbacks();
    callbacks.add(BindRecipient);
    callbacks.add(dummy);
    callbacks.fire();

function BindRecipient()
{
//asynchrously  call to database for fetching some data.No callback is available here in this code.

}

    function dummy()
    {

    alert("Hazza");
    } 
```

当我执行代码时，我在从第一个方法调用获取数据之前收到警报我希望仅在 BindRecipient 完成执行时才调用第二个方法

# android - 如何在 AsyncTask android 中处理 HttpResponse

> ID：16133723
> 
> 赞同：2
> 
> 时间：2013-04-21T16:56:22.120
> 
> 标签：android, android-asynctask

我的活动使用 AsynTask 执行 http 请求。如果网络服务器不响应，如何处理 HttpResponse？目前，当我的网络服务器关闭时，AsynTask 刚刚停在“HttpResponse response = client.execute(httppost);” 然后什么也不做。我需要处理这个响应并做一些事情，但是“执行”下面的代码没有被执行。

这是任何后台任务：

```
 protected String doInBackground(String... params) {
        HttpClient client = new DefaultHttpClient();
        String result = null;
        try {
            // Add your data
            List<NameValuePair> postData = new ArrayList<NameValuePair>(2);
            postData.add(new BasicNameValuePair("session_id", session_id));
            postData.add(new BasicNameValuePair("i_key", params[0]));

            HttpPost httppost = new HttpPost( "http://my.webserver.com/getInfo.php");
            httppost.setEntity(new UrlEncodedFormEntity(postData));

            HttpResponse response = client.execute(httppost);
            HttpEntity responseEntity = response.getEntity();
            if (responseEntity != null) {
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(responseEntity.getContent(),
                                "UTF-8"));
                result = reader.readLine().toString();
            } else {
              Toast.makeText(this, "DDDDDDD",Toast.LENGTH_LONG).show();
            }

        } catch (IllegalArgumentException e1) {
            e1.printStackTrace();
        } catch (IOException e2) {
            e2.printStackTrace();
        }
        return result;
    } 
```

如果网络服务器已关闭且未回复，我如何处理响应？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T17:05:15.817

您需要为客户端的连接设置超时。例如：

```
protected String doInBackground(String... params) {
    HttpParams httpParameters = new BasicHttpParams();
    // set the connection timeout and socket timeout parameters (milliseconds)
    HttpConnectionParams.setConnectionTimeout(httpParameters, 5000);
    HttpConnectionParams.setSoTimeout(httpParameters, 5000);

    HttpClient client = new DefaultHttpClient(httpParameters);
    . . . // the rest of your code
} 
```

# jquery - 如何删除输入字段布局

> ID：16133750
> 
> 赞同：0
> 
> 时间：2013-04-21T16:58:37.983
> 
> 标签：jquery, css, jsf, primefaces

我有这个带有自定义皮肤的 Primefaces 日历：

![在此处输入图像描述](https://i.stack.imgur.com/sOvF5.png)

![在此处输入图像描述](https://i.stack.imgur.com/ejBiW.png)

事实证明，输入文件也被 Primefaces 皮肤覆盖。这是 Primefaces 皮肤的 css 文件：http: [//pastebin.com/yiJ1YjUx](http://pastebin.com/yiJ1YjUx)

你能告诉我如何删除输入文件布局 - 我只想要基本的白色输入文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:13:26.957

你可以试试：

```
<style type="text/css">
                #test{
                    background-color: magenta !important;
                }
            </style>
            <p:inputText id="test"/> 
```

日历使用输入组件从用户那里获取输入，并将输入标签放置在跨度标签内，因此您可以自定义日历（不影响所有输入）：

```
 <style type="text/css">
                span input{
                    background-color: blue !important;
                }
            </style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:07:11.863

如果您只想使用 CSS 隐藏输入，可以使用以下属性：

```
.your-input-class {
    display: none;
} 
```

使用 jQuery，您可以执行以下操作：

```
$(".your-input-class").hide(); 
```

但这只有在您无法使用日历的 html 代码时才有意义。

# vim - Vim 并将功能分配给一个键

> ID：16133756
> 
> 赞同：0
> 
> 时间：2013-04-21T16:59:09.757
> 
> 标签：vim, key-bindings, dvorak

## 你好！

近 3 周以来，我一直在使用 Vim。我必须说，我喜欢首页的导航键！
一周前我切换到 Dvorak，移动键的新位置，根本不允许我使用 Vim。太可怕了
所以，我想知道，有没有办法将移动键保留在 Dvorak 中，与 qwerty 中的位置相同？

我不想重新映射键，因为那会非常混乱。我能想到的一种方法是分配功能，即`go up one line`从 key`k`到`t`.

所以我可以让我在 dvorak( `d` `h` `t` `n`) 中的移动键像在 qwerty( `h` `j` `k` `l`)中一样布局
有可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:18:35.610

> 我不想重新映射键，因为那会非常混乱

您可能想要重新映射键，但只是在 Vim 中。然而 vim.wikia.com 上的优秀人士[并不认为这是一个好主意](http://vim.wikia.com/wiki/Using_Vim_with_the_Dvorak_keyboard_layout#Comments)。

如链接文章中所述，一种替代方法是在插入模式下使用 dvorak，在正常模式下使用绑定的 qwerty-position，即`w`= `"`，`i`=`c`等。

> 设置 langmap='q,\,w,.e,pr,yt,fy,gu,ci,ro,lp,/[,=],aa,os,ed,uf,ig,dh,hj,tk,nl ,s\;,-',\;z,qx,jc,kv,xb,bn,mm,w\,,v.,z/,[-,]=,\"Q,E,PR,YT, FY,GU,CI,RO,LP,?{,+},AA,OS,ED,UF,IG,DH,HJ,TK,NL,S:,_\",:Z,QX,JC,KV, XB,BN,MM,W<,V>,Z?

-

> 我能想到的一种方法是将功能，即“向上一行”从 key`k`分配给`t`，所以我可以将 dvorak( `d` `h` `t` `n`) 中的移动键布局为 qwerty ( `h` `j` `k` `l`) 是否可能？我怎样才能做到这一点？

请记住，这样做可能会破坏其他键，我真的无法判断，因为如果不实际尝试/比较每个键，这很难。但是，如果您想使用`nnoremap`等，您可以将所有这些键重新映射到自定义位置。

一个基本的重新映射就是像这样重新映射主行。

```
nnoremap d <Left>
nnoremap h <Down>
nnoremap t <Up>
nnoremap n <Right> 
```

总而言之，我认为组合两种键盘布局并不是一个好主意，因此仅重新映射主行可能是最安全的，然后了解`e`etc. 与 qwerty 相比具有自定义位置。

这些问题是我从不费心切换到 Dvorak og Colemak 的原因，因为我必须重新学习我在肌肉记忆中的所有绑定，但对于一个新的 vim 用户来说，这可能不是什么大问题，所以你那样幸运！

# ado.net - 无法使用 OleDb 和 DbExtensions 进行查询

> ID：16133757
> 
> 赞同：1
> 
> 时间：2013-04-21T16:59:10.890
> 
> 标签：ado.net, oledb, dbextensions

这个问题是关于使用[https://github.com/maxtoroq/DbExtensions](https://github.com/maxtoroq/DbExtensions)

```
DbConnection connection = Database.CreateConnection("name=myconx");
var query = SQL.SELECT("u.username").FROM("Users u").WHERE("Id={0}", 1);
IEnumerable<Users> products = connection.Map<Users>(query); 
```

以下代码返回 null 不知道为什么？

```
 getDbProviderFactory(connection); 
```

这是不知道下一个代码用途的定义：

```
static readonly Func<DbConnection, DbProviderFactory> getDbProviderFactory =
           (Func<DbConnection, DbProviderFactory>)Delegate.CreateDelegate(typeof(Func<DbConnection, DbProviderFactory>), typeof(DbConnection).GetProperty("DbProviderFactory", BindingFlags.Instance | BindingFlags.NonPublic).GetGetMethod(nonPublic: true)); 
```

这是我的连接字符串

```
<add name="myconx" connectionString="Provider=SQLOLEDB.1;Integrated Security=SSPI;Persist Security Info=False;User ID=ES;Initial Catalog=TestDB;Data Source=ITA-PC\SQLR2" providerName="System.Data.OleDb"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:08:44.580

问题是 OleDbConnection 没有覆盖[DbProviderFactory](http://msdn.microsoft.com/library/system.data.common.dbconnection.dbproviderfactory)属性，这也是 OdbcConnection 的问题。我会将这些报告为错误。

如果你有源代码，你可以尝试这样的事情：

```
 public static DbProviderFactory GetProviderFactory(this DbConnection connection) {

     if (connection is OleDbConnection)
        return OleDbFactory.Instance;

     return getDbProviderFactory(connection);
  } 
```

# android - 如何使用 theme.xml 和 style.xml 设置 PopupMenu 和 AlertDialog 的样式

> ID：16133760
> 
> 赞同：1
> 
> 时间：2013-04-21T16:59:32.530
> 
> 标签：android, android-alertdialog, android-theme, android-styles, popupmenu

我想用多个颜色主题为我的 Android 应用程序皮肤。本指南/工具帮助我生成了基本`theme.xml`和`style.xml`

*   [http://android-holo-colors.com](http://android-holo-colors.com)
*   [http://jgilfelt.github.io/android-actionbarstylegenerator](http://jgilfelt.github.io/android-actionbarstylegenerator)
*   [http://blog.stylingandroid.com/archives/1240](http://blog.stylingandroid.com/archives/1240)

但我无法弄清楚**PopupMenu**和**AlertDialog** Header 的样式？

我只想更改颜色以简化我的应用程序主题！

例子：
![之前，取自：developer.android.com/images/ui/dialogs.png](https://i.stack.imgur.com/cDJmW.png)

看起来像
![之后，取自：developer.android.com/images/ui/dialog_custom.png](https://i.stack.imgur.com/qtJx9.png)

我正在使用`Theme.Holo`Android SDK 21.1 RC3/Tools 16.0。我已经尝试了很多样式和主题，但没有任何效果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-30T10:07:16.453

```
public class AlertDialogThemed extends AlertDialog {
public AlertDialogThemed(Context context) {
    super(context);
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    final Resources resources = getContext().getResources();
    final int color = resources.getColor(R.color.dialog_color);

    final View title = findViewById(resources.getIdentifier("alertTitle", "id", "android"));
    if (title != null) {
        ((TextView) title).setTextColor(color);
    }

    final View titleDivider = findViewById(resources.getIdentifier("titleDivider", "id", "android"));
    if (titleDivider != null) {
        titleDivider.setBackgroundColor(color);
    }
} 
```

}

# asp.net-mvc - 使用 Razor 增加样式表中的左值

> ID：16133765
> 
> 赞同：0
> 
> 时间：2013-04-21T16:59:49.180
> 
> 标签：asp.net-mvc, razor, stylesheet

我有以下 MVC Razor 代码

```
@{
    int counter = 50;

    foreach (var item in Model.Items) {
        <div class="wall-image" id="@("DRAG0"+counter)" onDblClick="makeNew()" style="position:absolute; left:370px; top:165px; ">
            <img src="@item.Picture.ImageUrl" title="@("DRAG0"+counter)" />
        </div>
        counter = counter + 50;
    }
} 
```

它将图像的 id 连接起来，为每个图像提供一个可以正常工作的唯一标识符：

id="@("DRAG0"+计数器)"

我想做的是以同样的方式将 counter 的值添加到**left:370px**，可以在样式中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:19:10.527

我能够通过使用`ToString()`和添加来实现它`margin-left`

```
margin-left:@(counter.ToString()+"px"); 
```

我希望每张图片都显示计数器……最后一个左侧的 px

```
@{
    int counter = 0;
    string image = "";

    foreach (var item in Model.Items) {

        <div class="wall-image" id="@("DRAG0"+counter)" onDblClick="makeNew()" style="position:absolute; left:370px; top:275px; margin-left:@(counter.ToString()+"px");">
            <img src="@image" title="@item.ProductName" />
        </div>
        counter = counter + 135;
    }
} 
```

# java - hasPrevious() 方法不起作用

> ID：16133766
> 
> 赞同：1
> 
> 时间：2013-04-21T17:00:01.433
> 
> 标签：java, arrays, list, iterator

我不明白为什么我的 hasPrevious 迭代器不起作用，它看起来像这样：

```
public void previousSong(){
    Iterator<Song> iterator = songs.iterator();
if(iterator.hasPrevious()) {
        System.out.println(iterator.previous().toString());
}
} 
```

我有另一个使用 hasNext() 的函数，它可以工作，但这个不会。

```
public void nextSong(){
    Iterator<Song> iterator = songs.iterator();
if(iterator.hasNext()) {
        System.out.println(iterator.next().toString());
}
} 
```

我不确定这种方法是否不再存在，但是当我研究它时，Java 网站会提到它。我不明白为什么它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T17:04:18.263

和方法仅针对迭代器的子接口 ListIterators ( `hasPrevious`http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ListIterator.html )[定义。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ListIterator.html)由于您仅使用迭代器，因此唯一定义的方法是,和- 请参见此处：[http](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Iterator.html) ://docs.oracle.com/javase/1.5.0/docs/api/java/util/Iterator.html 。`previous``hasNext()``next``remove`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:03:38.557

只能`ListIterator`倒着走。普通`Iterator`班不能。

所以如果你用它`ListIterator`代替`Iterator`它会起作用:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-02T06:38:17.970

```
// Create an array list

ArrayList list = new ArrayList();   

  // add elements to the array list
      list.add("C++");
      list.add("Java");
      list.add("Php");
      list.add("Python");
      list.add("Ruby");
      list.add("Perl");

     //Create the object of ListIterator through listIterator() method
      ListIterator object=list.listIterator();
     // Modify the list element 
      while(object.hasNext()) {
          String language=(String) object.next() ;
          object.set(language+"+");
      }
     // Show element in pervious order
      while(object.hasPrevious()) {
          System.out.println(object.previous());
      } 
```

它应该首先在正向执行，然后在反向执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-25T01:07:08.193

它应该是这样的：

```
 public void previousSong(){
        ListIterator<Song> it = songs.listIterator();
    while(it.hasNext()) {
            System.out.println(it.next().toString());
    }

   // and now you can use hasprevious()

      while(it.hasPrevious()) {
            System.out.println(it.previous().toString());
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-25T15:21:40.150

不要在此接口中使用 Iterator hasPrevious() 函数未定义使用 ListIterator

```
 ListIterator lt =al.listIterator(al.size());
    while(lt.hasPrevious())
    {
        System.out.println(lt.previous());
    } 
```

这将进入集合对象的最后一个位置

# algorithm - 大 Theta 表示法 - 简化

> ID：16133770
> 
> 赞同：1
> 
> 时间：2013-04-21T17:00:14.557
> 
> 标签：algorithm, time-complexity, master-theorem

我已经使用主定理来解决递归关系。我已经把它归结为**Θ(3n ² -9n)**。这是否等于**Θ(n ² )**？我有另一个递归，其解决方案是**Θ(2n ³ - 100 ² )**。在 BigTheta 表示法中，您总是只使用最大的项吗？所以我的第二个是**Θ(n ³ )**？在第二种情况下，似乎**100n ²**会更重要。那么我丢弃它有关系吗？

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:03:24.040

是的。你的假设是正确的。第一个是**Θ(n ² )**，第二个是**Θ(n ³ )**。当您使用**Θ**表示法时，您只需要最大的项。

如果您的第二次重复考虑`n = 1000`, 那么**n ³ = 1000000000**。其中**100n ²**只是**100000000**。随着n值的增加，n ^(3变得比100n) ²越来越占优势。

出于理论目的，您不需要考虑常数，它可能有多大。但实际应用程序可能更喜欢具有小常数的算法，即使复杂度很高。例如，如果**n**的值不是很大，则使用复杂度**为 0.01n ³**的算法可能比使用复杂度为**10000n ^(2的算法更好。)**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:50:46.747

如果我们有函数 f(n) = 3n^2-9n ，可以忽略低阶项和成本，我们考虑高阶项，因为它们在函数的增长中起主要作用。通过仅考虑高阶项，我们可以很容易地找到上界，这是示例。

```
 f(n)= 3n^2-9n
  For all sufficient large value of n>=1,
                                      3n^2<=3n^2 
                           and       -9n  <= n^2

                     thus, f(n)=3n^2 -9n <= 3n^2 + n^2
                                         <= 4n^2

  *The upper bound of f(n) is 4n^2 , that means for all sufficient large 
  value of n>=1, the value of f(n) wouldn't be greater than 4n^2.* 

                  therefore,           f(n)= Θ(n^2)  where c=4 and n0=1 
```

![在此处输入图像描述](https://i.stack.imgur.com/5vf3g.jpg)

**我们可以通过忽略方程 f(n)= 3n^2-9n 中的低阶项和常数来直接找到上界，结果将是相同的 Θ(n^2)****

# c++ - 重载“+”-运算符

> ID：16133771
> 
> 赞同：0
> 
> 时间：2013-04-21T17:00:15.933
> 
> 标签：c++, operator-overloading

我试图在 C++ 中重载 + 运算符，但得到以下错误：

> operator.cpp：在函数'int main（）'中：
> operators.cpp：23:17：错误：无法在初始化中将'Operators'转换为'int'

这是我的代码：

```
#include <iostream>
using namespace std;

class Operators{
    private:
        int num1;

    public:
        Operators(int num1){
            this->num1 = num1;
        }
        Operators operator+(Operators o){
            return Operators(num1 + o.num1);
        }
};

int main(){
    Operators o1(5);
    Operators o2(10);
    Operators res = o1 + o2; // EDITED

    cout << res;
} 
```

请你帮助我好吗？

我知道，在这种情况下，重载它是没有意义的，正如我可以说的那样`5+10`，但我只是在试验。

**更新** 谢谢，我已经编辑了`int`.
但现在我收到以下错误：

> 运营商.cpp：在函数'int main（）'中：
> 运营商.cpp：25:10：错误：匹配'std :: cout << res'<br>中的'operator <<' [...]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T17:01:59.487

这条线的问题：

```
int res = o1 + o2; 
```

是不是你的重载`operator +`返回了一个类型的对象`Operators`。这意味着您正在尝试从临时类型（ 的结果）初始化`int`( ，但是没有用户定义的转换可以做到这一点。`res)``Operators``o1 + o2`

这就是编译器发出错误的原因。您可以通过在`Operators`类中添加转换运算符来轻松解决此问题：

```
operator int () const { return num1; } 
```

**更新：**

看来你已经更新了你的问题。下面的第二行是有问题的：

```
Operators res = o1 + o2;
cout << res; 
```

除非您`operator <<`为您的`Operators`类定义了一个重载，否则编译器将不知道`operator <<`选择哪个重载来流式传输您的 type 对象`Operators`。

要解决此问题，您可以：

*   定义一个转换运算符 to `int`，如上所述
*   定义`operator <<`for的重载`Operators`，如下所示：

    ```
    friend std::ostream& operator << (std::ostream& o, Operators const& op)
    {
        o << op.num1;
        return o;
    } 
    ```

这是一个[**活生生的例子**](http://ideone.com/RWWYyW)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T17:02:07.130

正如错误消息试图告诉您的那样，`o1 + o2`类型为`Operators`.
您不能将其分配给`int`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T17:02:17.847

你`operator+`返回一个`Operators`对象。然后，您尝试将此结果分配给`int res`. 您没有提供将`Operators`对象转换为`int`. 您可以提供一个转换运算符来执行此操作：

```
operator int() {
  return num1;
} 
```

这定义了从`Operators`到的转换`int`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T17:03:38.197

更改`int`为`Operators`并实现您自己的副本和默认构造函数。

```
#include <iostream>

class Operators
{
    private:
        int num1;

    public:
        Operators() = default;
        Operators(Operators const& op) : num1(op.num1) {}
        Operators(int num1)
        {
            this->num1 = num1;
        }
        Operators operator+(Operators o)
        {
            return num1 + o.num1;
        }
};

int main()
{
    Operators o1(5);
    Operators o2(10), res;

    res = o1 + o2;

    std::cout << res;
} 
```

为了使这项工作更进一步，创建一个重载`operator<<`并打印总和。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T17:09:32.400

你需要写：

```
int res = o1.getMethod() + o2.getMethod(); 
```

其中 getMethod() 是类中的一个公共方法，它返回私有整数 num1。否则，您无权访问它。尝试一下。

# .htaccess - .htaccess 漂亮的 URL，不包括 index.php 并在末尾添加尾随 /

> ID：16133774
> 
> 赞同：0
> 
> 时间：2013-04-21T17:00:23.870
> 
> 标签：.htaccess, mod-rewrite, friendly-url, trailing-slash, pretty-urls

好吧，我已经和它打了几个小时。我有 3 个不同的 .htaccess 脚本可以满足我的需要，但我无法将它们混合在一起。

1.  从（example.com/gallery.php -> example.com/gallery）制作一个漂亮的网址

    ```
    Options +FollowSymLinks
    RewriteEngine On
    RewriteRule ^([a-zA-Z0-9]+)$ $1.php 
    ```

2.  来自 #1 的脚本将 example.com/index.php 转发到 example.com/index，因此此代码删除了 index.php，因此 example.com/index.php -> example.com

    ```
    Options +FollowSymLinks -MultiViews
    # Turn mod_rewrite on
    RewriteEngine On
    RewriteBase /

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?$1 [L,QSA]

    RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s(.*)/index\.php [NC]
    RewriteRule ^ /%1 [R=301,L] 
    ```

3.  该脚本应添加一个尾部斜杠，因此 example.com/gallery -> example.com/gallery/

    ```
    # invoke rewrite engine
    RewriteEngine On
    RewriteBase /~new/

    # add trailing slash if missing
    rewriteRule ^(([a-z0-9\-]+/)*[a-z0-9\-]+)$ $1/ [NC,R=301,L] 
    ```

有人可以帮我将这 3 个脚本组合成一个通用的漂亮 URL 脚本吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:12:10.260

将这些指令添加到网站根目录中的 .htaccess

```
Options +FollowSymLinks
RewriteEngine On

# add trailing slash

RewriteCond %{REQUEST_URI} !(/$|\.) 
RewriteRule (.*) %{REQUEST_URI}/ [R=301,L] 

# rewrite gallery/ to gallery.php

RewriteCond %{REQUEST_URI} /$
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ $1.php [L]

# redirect example.com/index.php to example.com/

RewriteCond %{REQUEST_URI} index\.php$
RewriteRule ^(.*)index\.php$ /$1/ [R=301,L] 
```

# android - 不幸的是，MyApp 已停止在模拟器中

> ID：16133775
> 
> 赞同：1
> 
> 时间：2013-04-21T17:00:24.677
> 
> 标签：android, android-emulator, illegalaccessexception

我对 Android 很陌生，现在我的应用程序遇到了奇怪的问题。它不会在控制台中给我任何错误。我只是想测试 Android 的不同通知选项，因此这是我的书面代码：

```
class Home extends Activity {

    Button notification;
    Button progress;
    private int ID=1;
    ProgressDialog pd;
    ProgressTask pt = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);
        notification=(Button)this.findViewById(R.id.start_notification);
        notification.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                StartNotification();
            }});
        Button background = (Button)this.findViewById(R.id.change_background);
        background.setOnClickListener(new OnClickListener() {    
            public void onClick(View v) { 
                showDialog(0);

            }});
        progress.setOnClickListener(new OnClickListener() {    
            public void onClick(View v) { 
                showDialog(1);

            }});
    }
    @Override
    protected Dialog onCreateDialog(int id)
    {
        final CharSequence[] items = {"Black","Red", "Green", "Blue", "Gray"};
        final String[] color = {"#202020","#D11919", "#339966", "#006699", "#818181"};
        switch(id) {
        case 0:
            return new AlertDialog.Builder(this)

            .setTitle("Set Background Color")
            .setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int item) {
                    View mainLayout = findViewById(R.id.activity_home);
                    View root = mainLayout.getRootView();
                    new Color();
                    root.setBackgroundColor(Color.parseColor(color[item]));
                    dismissDialog(0);
                }
            }).create();

        case 1:
            pd = new ProgressDialog(Home.this);
            pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            pd.setMessage("Downloading...");
            return pd;

        }
        return null;
    }

    @Override
    protected void onPrepareDialog(int id, Dialog dialog) {     
        switch(id) {
        case 1:
            pd.setProgress(0);
            pt = new ProgressTask(handler);
            pt.start();            
        }

    }

    final Handler handler = new Handler() {
        public void handleMessage(Message msg) {
            int count = msg.arg1;
            pd.setProgress(count);
            if (count >= 100){
                dismissDialog(1);
                pt.setStatus(false);
            }
        }
    };
    private class ProgressTask extends Thread {
        Handler myHandler;
        int count = 0;
        boolean status = true;

        ProgressTask(Handler _handler) {
            myHandler = _handler;
        }

        public void run() {                      

            while (status) {
                try {
                    Thread.sleep(100);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                Message msg = myHandler.obtainMessage();
                msg.arg1 = count;
                myHandler.sendMessage(msg);
                count++;
            }
        }

        public void setStatus(boolean m){
            status = m;
        }
    }

    private void StartNotification()
    {
        Intent intent= new Intent(Home.this, NotificationView.class);
        intent.putExtra("ID", ID);
        PendingIntent pendingIntent=PendingIntent.getActivity(Home.this, 0, intent, 0);
        NotificationManager nm=(NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        Notification notif = new Notification(
                R.drawable.ball,"Reminder: Game starts in 15 minutes",
                System.currentTimeMillis());
        CharSequence from = "Sports Center";
        CharSequence message = "Game: L.A Lakers vs Miami Heat";
        notif.setLatestEventInfo(this, from, message, pendingIntent);

        notif.vibrate = new long[] { 100, 250, 100, 500};

        nm.notify(ID, notif);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_home, menu);
        return true;
    }

} 
```

这是我的日志：

```
 04-21 16:55:03.829: I/dalvikvm(907): threadid=3: reacting to signal 3
04-21 16:55:03.966: I/dalvikvm(907): Wrote stack traces to '/data/anr/traces.txt'
04-21 16:55:04.265: I/dalvikvm(907): threadid=3: reacting to signal 3
04-21 16:55:04.545: D/dalvikvm(907): newInstance failed: Lcom/example/statusbar/Home; not accessible to Landroid/app/Instrumentation;
04-21 16:55:04.545: I/dalvikvm(907): Wrote stack traces to '/data/anr/traces.txt'
04-21 16:55:04.555: D/AndroidRuntime(907): Shutting down VM
04-21 16:55:04.555: W/dalvikvm(907): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
04-21 16:55:04.595: E/AndroidRuntime(907): FATAL EXCEPTION: main
04-21 16:55:04.595: E/AndroidRuntime(907): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.statusbar/com.example.statusbar.Home}: java.lang.IllegalAccessException: access to class not allowed
04-21 16:55:04.595: E/AndroidRuntime(907):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
04-21 16:55:04.595: E/AndroidRuntime(907):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-21 16:55:04.595: E/AndroidRuntime(907):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-21 16:55:04.595: E/AndroidRuntime(907):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-21 16:55:04.595: E/AndroidRuntime(907):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-21 16:55:04.595: E/AndroidRuntime(907):  at android.os.Looper.loop(Looper.java:137)
04-21 16:55:04.595: E/AndroidRuntime(907):  at android.app.ActivityThread.main(ActivityThread.java:4424)
04-21 16:55:04.595: E/AndroidRuntime(907):  at java.lang.reflect.Method.invokeNative(Native Method)
04-21 16:55:04.595: E/AndroidRuntime(907):  at java.lang.reflect.Method.invoke(Method.java:511)
04-21 16:55:04.595: E/AndroidRuntime(907):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-21 16:55:04.595: E/AndroidRuntime(907):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-21 16:55:04.595: E/AndroidRuntime(907):  at dalvik.system.NativeStart.main(Native Method)
04-21 16:55:04.595: E/AndroidRuntime(907): Caused by: java.lang.IllegalAccessException: access to class not allowed
04-21 16:55:04.595: E/AndroidRuntime(907):  at java.lang.Class.newInstanceImpl(Native Method)
04-21 16:55:04.595: E/AndroidRuntime(907):  at java.lang.Class.newInstance(Class.java:1319)
04-21 16:55:04.595: E/AndroidRuntime(907):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
04-21 16:55:04.595: E/AndroidRuntime(907):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
04-21 16:55:04.595: E/AndroidRuntime(907):  ... 11 more
04-21 16:55:04.775: I/dalvikvm(907): threadid=3: reacting to signal 3
04-21 16:55:04.826: I/dalvikvm(907): Wrote stack traces to '/data/anr/traces.txt'
04-21 16:55:05.155: I/dalvikvm(907): threadid=3: reacting to signal 3
04-21 16:55:05.175: I/dalvikvm(907): Wrote stack traces to '/data/anr/traces.txt'
04-21 16:55:07.255: I/Process(907): Sending signal. PID: 907 SIG: 9 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T17:04:09.897

由于堆栈跟踪说：

```
java.lang.IllegalAccessException: access to class not allowed 
```

代表着

```
class Home extends Activity { 
```

应该

```
public class Home extends Activity { 
```

活动必须是`public`类，否则 Android 将无法访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T19:24:29.690

您的代码有两个问题。

1-制作课程`public`，以便您可以访问它。2-您忘记添加

```
progress = (Button)this.findViewById(R.id.progress); 
```

这就是为什么你得到一个**nullPointer** 现在，你很高兴！

# java - Java 应用程序中的 Memcached 身份验证失败

> ID：16133776
> 
> 赞同：0
> 
> 时间：2013-04-21T17:00:37.133
> 
> 标签：java, heroku, memcached, spymemcached

我正忙于关注 Heroku 的 Java 的 Memcached 教程：[https ://devcenter.heroku.com/articles/memcache#using-spymemcached-with-spring](https://devcenter.heroku.com/articles/memcache#using-spymemcached-with-spring)

我已经通过自制软件安装了 Memcached，启动并运行，添加了 Spymemcached 依赖项并将 XML 配置添加到我的应用程序上下文中。

问题是我对 MEMCACHE_USERNAME 和 MEMCACHE_PASSWORD 环境变量需要什么一无所知，因为当我的应用程序上下文在本地启动时出现以下身份验证失败：

```
2013-04-21 18:22:52.108 INFO net.spy.memcached.MemcachedConnection:  Added {QA sa=localhost/127.0.0.1:11211, #Rops=0, #Wops=0, #iq=0, topRop=null, topWop=null, toWrite=0, interested=0} to connect queue
2013-04-21 18:22:52.127 INFO net.spy.memcached.MemcachedConnection:  Connection state changed for sun.nio.ch.SelectionKeyImpl@228ef305
2013-04-21 18:22:52.283 WARN net.spy.memcached.auth.AuthThread:  Authentication failed to localhost/127.0.0.1:11211
2013-04-21 18:22:52.398 WARN net.spy.memcached.auth.AuthThread:  Authentication failed to localhost/127.0.0.1:11211
2013-04-21 18:22:52.520 WARN net.spy.memcached.auth.AuthThread:  Authentication failed to localhost/127.0.0.1:11211 ... 
```

提供用户名和密码的配置：

```
<bean id="plainCallbackHandler" class="net.spy.memcached.auth.PlainCallbackHandler">
   <constructor-arg index="0" value="${MEMCACHE_USERNAME}"/>
   <constructor-arg index="1" value="${MEMCACHE_PASSWORD}"/>
</bean> 
```

我一定遗漏了一些相当明显的东西......任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:19:20.980

如果您在本地运行应用程序，则`MEMCACHE_USERNAME`和`MEMCACHE_PASSWORD`都应该为空（除非您在安装期间设置它们）。`MEMCACHE_USERNAME= MEMCACHE_PASSWORD= the-command-to-run-your-app`如果您的配置不处理空值，您可以使用前缀运行您的应用程序。

如果您使用 Memcache 插件在 Heroku 上运行，您将获得环境变量，如`MEMCACHE_USERNAME`、`MEMCACHE_PASSWORD`和`MEMCACHE_SERVERS`，它们是在安装插件时自动设置的。

如果您自托管 Memcached 服务器，则必须（或*应该*）设置您将在应用程序中配置的 SASL 用户名和密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-06T09:54:24.313

HI，我也遇到了类似的问题，因为我没有设置SASL用户名和密码，所以删除配置后，错误信息消失了。

```
<bean name="defaultCache" class="com.google.code.ssm.CacheFactory">
    <property name="cacheName" value="default" />
    <property name="cacheClientFactory">
        <bean name="cacheClientFactory"
            class="com.google.code.ssm.providers.spymemcached.MemcacheClientFactoryImpl" />
    </property>
    <property name="addressProvider" ref="addressProvider" />
    <property name="configuration" ref="cacheFactoryConf" />
</bean>

<bean id="addressProvider" class="com.google.code.ssm.config.DefaultAddressProvider">
    <property name="address" value="${memcached.hosts}" />
</bean>
<bean id="cacheFactoryConf"
    class="com.google.code.ssm.providers.spymemcached.SpymemcachedConfiguration">
    <property name="consistentHashing" value="true" />
    <property name="useBinaryProtocol" value="true" />
    <property name="keyPrefixSeparator" value=".xxx." />
    <property name="useNameAsKeyPrefix" value="true" />
    <!-- 
    <property name="authDescriptor">
        <bean class="net.spy.memcached.auth.AuthDescriptor">
            <constructor-arg index="0">
                <value>PLAIN</value>
            </constructor-arg>
            <constructor-arg index="1">
                <bean class="net.spy.memcached.auth.PlainCallbackHandler">
                    <constructor-arg index="0">
                        <value>${memcached.username}</value>
                    </constructor-arg>
                    <constructor-arg index="1">
                        <value>${memcached.password}</value>
                    </constructor-arg>
                </bean>
            </constructor-arg>
        </bean>
    </property>
    -->
</bean> 
```

# javascript - Angular.js - 重定向不起作用

> ID：16133785
> 
> 赞同：2
> 
> 时间：2013-04-21T17:01:12.043
> 
> 标签：javascript, node.js, angularjs, express, pug

我很难理解 Angular.js 路由的行为

这是我的代码

我的 app.js：

```
'use strict';

var app = angular.module('myApp', []).
  config(['$routeProvider', '$locationProvider', function($routeProvider, $locationProvider) {
    $routeProvider.when('/game/room', {templateUrl: 'roomGame', controller: roomCtrl});
    $routeProvider.otherwise({redirectTo: '/game/room'});
    $locationProvider.html5Mode(true);
  }]); 
```

index.js 我在其中定义路由服务器端：

```
app.get('/game', function (req, res)
{
  console.log("we are in /game");
  res.render("game/index", {
      user: req.session
  });
});
app.get('/game/roomGame', function (req, res)
{
  console.log("we are in /game/roomGame");
  res.render("game/roomGame";
}); 
```

index.jade:

```
div(ng-controller="indexCtrl")
    a(href='/') Quitter

    div(ng-view) 
```

还有另一个文件：roomGame.jade，但向您展示源代码并不重要。

现在我打开浏览器并输入：localhost:3000/game。

正如预期的那样，我被重定向到 localhost:3000/game/room 并显示了预期的视图。

但是当我输入： localhost:3000/game/room 或 localhost:3000/game/foo 时，它显示“无法获取 /game/xxx”

我想被重定向到/game，然后到/game/room。怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:20:10.307

当您看到预期的视图时，您是否被重定向到`http://localhost:3000/#/game/room`？注意`#`.

当您输入 时`http://localhost:3000/game/room`，这会命中快速服务器，而不是您的 Angular 应用程序，试图匹配`/game/room`，因此您看到的消息。

一个想法是在您的服务器上像这样：

```
app.get('/game/:what', function (req, res) {
    res.redirect('/#/game/' + req.params.what);
}); 
```

或更可能：

```
app.get('/game/*', function (req, res) {
    res.redirect('/#/game');
}); 
```

这会将事情从 express 重定向到 Angular 可以处理它们的地方。

# php - 无法使用 PHP 和 J Query Mobile 将数据插入数据库

> ID：16133792
> 
> 赞同：1
> 
> 时间：2013-04-21T17:02:01.697
> 
> 标签：php, mysql, jquery-mobile

在此之前，我可以多次将数据插入数据库。我正在使用网络矩阵和 XAMPP 进行开发。我在处理端口时遇到问题，但是在更改某些内容之后就可以了，但是数据库不再接收数据。我正在开发的另一个使用 PHP 的系统运行良好，但问题出在 jQuery 移动设备上。

这是 index.html 文件

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <title>
    </title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <link rel="stylesheet" href="my.css" />
    <script src="http://code.jquery.com/jquery-1.7.2.min.js">
    </script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js">
    </script>
    <script src="my.js">
    </script>
    <!-- User-generated css -->
    <style>
    </style>
    <!-- User-generated js -->
    <script>
        try {

  $(function() {

});

} catch (error) {
  console.error("Your javascript has an error: " + error);
 }
     </script>
 </head>
 <body>
    <!-- Home -->
    <div data-role="page" id="page1">
        <div data-theme="a" data-role="header" data-position="fixed">
            <h3>
               Student Uitm
            </h3>
        </div>
        <div data-role="content">
            <form action="http://localhost/student/save2db.php" method="post">
                <label>Nama</label><input type="text" name="Nama">
                <label>No Kad Pengenalan</label><input type="text" maxlength="12" name="icno">
                <label>Jantina</label><select name="jantina">
                <option value="L">Lelaki</option>
                <option value="P">Perempuan</option>
            </select>
                <input name="sbt" type="submit" value="save" data-inline="true">
            </form>
        </div>
        <div data-theme="a" data-role="footer" data-position="fixed">
            <h3>
                Footer
            </h3>
        </div>
    </div>
</body>
</html> 
```

这是 save2db.php 文件：

```
 <?php
 $con=mysqli_connect("localhost","root"," ","student");
    // Check connection
if (mysqli_connect_errno())
{
echo "Failed to connect to MySQL: " . mysqli_connect_error();
}

$sql="INSERT INTO student1 (Nama, icno, jantina)
VALUES
('$_POST[Nama]','$_POST[icno]','$_POST[jantina]')";

 if (!mysqli_query($con,$sql))
 {
  die('Error: ' . mysqli_error($con));
  }
 echo "1 record added";

mysqli_close($con);  
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:35:20.800

问题：

*   你检查数据库连接，但你让脚本运行，即使它失败了
*   您对收到的数据不够谨慎
*   你不记录错误
*   内部问题症状泄露给用户

这是处理这些问题的脚本的一种可能替代方法：

```
<?php
$con = mysqli_connect("localhost","root"," ","student");
 // Check connection
if (mysqli_connect_errno()) {
    trigger_error("Failed to connect to MySQL: " . mysqli_connect_error(), 
                   E_USER_ERROR);
    die("unable to complete request");
} else if (!(isset($_POST['Nama']) &&
         isset($_POST['icno']) && isset($_POST['jantina'])) {
    trigger_error( "incomplete POST data", E_USER_ERROR);
    die("unable to complete request");
} else {
    $nama = mysqli_real_escape_string($con, $_POST['Nama']);
    $icno = mysqli_real_escape_string($con $_POST['icno']);
    $jantina = mysqli_real_escape_string($con,$_POST['jantina']);
    $sql = "INSERT INTO student1 (Nama, icno, jantina) VALUES ('$nama','$icno','$jantina')";
    if (!mysqli_query($con,$sql)) {
        trigger_error("query failed :" . mysqli_error($con), E_USER_ERROR);
        die("unable to complete request");
    }
    echo "1 record added";
    mysqli_close($con);  
} 
```

完成上述修改后，查看更新不成功后的php日志，了解失败的可能原因。

# javascript - jQuery：鼠标交互 + 简单动画 [img]

> ID：16133795
> 
> 赞同：1
> 
> 时间：2013-04-21T17:02:17.067
> 
> 标签：javascript, jquery, html, css, jquery-animate

我是 jQuery 新手，所以请在这里和我一起工作。:)

[网站图片] [http://imgur.com/zx803Ct](http://imgur.com/zx803Ct)

所以我试图让瓶子在这里通过光标交互进行动画处理。

**目标：**我希望悬停的图像出现在前景中，其余的图像缩小到背景中。

**不良结果：**代码似乎无条件收缩所有瓶子。我似乎在“if, then, else”部分遇到了麻烦。

* * *

**过程：**

*存储'mouseEntered'元素，为每个瓶子做，检查是否匹配，应用效果。*

**代码：**

```
 $(".sauce_bottle").mouseenter( function(){
        var $active = $(this); //The "entered" image

        //For each (div) bottle, check if "entered", apply effects
        $('.sauce_bottle').each( function(){
            if ( $active == $(this) ) {
            //Shrink
                alert($active.attr("alt"));
                $(this).animate({
                    height: "230px",
                    width: "70px",
                    opacity: ".70"},
                    150);
            } else {
            //or Enlarge
                $(this).animate({
                height: "279px",
                width: "85px",
                opacity: "1"},
                150, function(){});
            }
        });
    }); 
```

* * *

如果我缺少一个概念（范围），或者如果你们有另一种方法来做到这一点，那就太棒了！

**多谢你们！:)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:13:08.127

我会这样做：

```
$(".sauce_bottle").mouseenter( function() {
    $(this).animate({
        height: "279px",
        width: "85px",
        opacity: "1",
    }, 150);

    $(".sauce_bottle").not(this).animate({
        height: "230px",
        width: "70px",
        opacity: ".70",
    }, 150);
}); 
```

# java - Java中的离散余弦变换库

> ID：16133797
> 
> 赞同：0
> 
> 时间：2013-04-21T17:02:23.537
> 
> 标签：java, performance, fft, dct

Java中是否有一个以对数时间计算DCT的DCT库？我读到 DCT 可以用 FFT 算法计算，所以 dct 也应该有一个对数时间算法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:59:22.963

您可以通过将数据镜像以使其长度加倍并对该双倍长度向量进行 FFT 来计算 DCT。

对于镜像对称（关于窗口中心的偶函数）数据，只有 FFT 的余弦项将为非零（数值/舍入噪声除外）。

# c# - 实体框架，提供者未能打开

> ID：16133799
> 
> 赞同：0
> 
> 时间：2013-04-21T17:02:25.503
> 
> 标签：c#, entity-framework, connection-string

我收到了这个错误：

```
-InnerException {"Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=86; handshake=2368; [Login] initialization=0; authentication=0; [Post-Login] complete=12018; "}  System.Exception {System.Data.SqlClient.SqlException} 
```

由此：

```
 DataSourceContext Context = new DataSourceContext();
        var Booklist = Context.Booklists.ToList();
        Context.Dispose();
        Parallel.ForEach(Booklist, currentBook =>
        {
            switch (currentBook.FKcatalogNum)
            {
                case 0:
                    {
                       ...

                        finally
                        {

                                currentBook.BookDetails = Models.DBBookSourceInitializer.GetBookReaderNet(currentBook.Link);
                                try
                                {
                                    context.Booklists.AddOrUpdate(currentBook);
                                    context.SaveChanges();
                                }
                                catch (Exception e)
                                {
                                    ...

                                    context.Booklists.AddOrUpdate(currentBook);
                                    context.SaveChanges();

                            }
                            context.Dispose();
                        }
                        break; 
```

我试图从数据库中获取所有书名，并添加有关其摘要、章节、页数等的详细信息。但我不断收到连接错误。有成千上万本书，在处理了一定数量的东西后，它给了我这个错误。从最后处理的一本书的主键来看，是1180，也就是说1180本很好，然后突然就这样了。有人可以告诉我我做错了什么，或者我应该改变什么。谢谢您的帮助。

# python - python可以支持Socket上的大量请求吗？

> ID：16133800
> 
> 赞同：0
> 
> 时间：2013-04-21T17:02:34.927
> 
> 标签：python, multithreading

我找到[了这个](http://code.activestate.com/recipes/114642/)并用它来构建一个从我`game clients`到我的 TCP 代理`game servers`。

我有大约 1000 个客户同时在线。
我注意到脚本给出了错误`Can't start a new thread`。

我的问题是如何解决这个问题？
还是我应该考虑只使用 C？

如我错了请纠正我。估计客户端太多了，python的多线程处理不了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:05:37.330

如果您想要如此大量的连接，您应该使用事件而不是多线程。在这样的情况下，多线程要慢得多，并且使用更多的资源。

看看以下库：

*   [http://eventlet.net/](http://eventlet.net/)
*   [http://www.gevent.org/](http://www.gevent.org/)
*   [http://docs.python.org/2/library/asyncore.html](http://docs.python.org/2/library/asyncore.html)

# android - 将额外内容从它调用的另一个活动传递给主要活动

> ID：16133801
> 
> 赞同：0
> 
> 时间：2013-04-21T17:02:36.110
> 
> 标签：android, android-intent

在**主要活动**中，我有一个**添加**新注释的按钮（它是一种便签 android 应用程序）：

```
ArrayAdapter<Note> adapter = (ArrayAdapter<Note>) getListAdapter();
    Note note = null;
    switch (view.getId()) {
    case R.id.add:
        // Call AddActivity to specify content of the note fields to be
        // added to the DB
        intentToAdd = new Intent(this, AddActivity.class);
        startActivity(intentToAdd);

        //get the extras from AddActivity
        Note newNote = getIntent().getExtras().getParcelable("myNewNote");

        String summary = newNote.getSummary();
        String details = newNote.getDetails();

        // Save the new note in the database
        note = datasource.createNote(summary, details);
        adapter.add(note);
        break; 
```

然后我有**AddActivity**（其中包含一个添加新注释的**表单），它的****onCreate 方法**是：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_add);

    butAdd = (Button) findViewById(R.id.buttonAjout);

    intentToMain = new Intent(this, MainActivity.class);

    butAdd.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            EditText summary = ((EditText) findViewById(R.id.editTextSum));
            EditText details = ((EditText) findViewById(R.id.editTextDet));

            Note note =new Note(summary.toString(),details.toString());
            intentToMain.putExtra("myNewNote", note);

            startActivity(intentToMain);
        }
    });

} 
```

**注意：我的笔记类实现了 Parcelable 类！**

这是我的问题： **当我单击主活动中的添加按钮时，我的应用程序崩溃（“意外停止”）为什么:( ???**

告诉我是否还有其他缺少的信息或代码...谢谢...

logCat 说这是一个 nullPointerException：

```
04-21 17:00:07.832: D/AndroidRuntime(278): Shutting down VM
04-21 17:00:07.832: W/dalvikvm(278): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-21 17:00:07.892: E/AndroidRuntime(278): FATAL EXCEPTION: main
04-21 17:00:07.892: E/AndroidRuntime(278): java.lang.IllegalStateException: Could not execute method of the activity
04-21 17:00:07.892: E/AndroidRuntime(278):  at android.view.View$1.onClick(View.java:2072)
04-21 17:00:07.892: E/AndroidRuntime(278):  at android.view.View.performClick(View.java:2408)
04-21 17:00:07.892: E/AndroidRuntime(278):  at android.view.View$PerformClick.run(View.java:8816)
04-21 17:00:07.892: E/AndroidRuntime(278):  at android.os.Handler.handleCallback(Handler.java:587)
04-21 17:00:07.892: E/AndroidRuntime(278):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-21 17:00:07.892: E/AndroidRuntime(278):  at android.os.Looper.loop(Looper.java:123)
04-21 17:00:07.892: E/AndroidRuntime(278):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-21 17:00:07.892: E/AndroidRuntime(278):  at java.lang.reflect.Method.invokeNative(Native Method)
04-21 17:00:07.892: E/AndroidRuntime(278):  at java.lang.reflect.Method.invoke(Method.java:521)
04-21 17:00:07.892: E/AndroidRuntime(278):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-21 17:00:07.892: E/AndroidRuntime(278):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-21 17:00:07.892: E/AndroidRuntime(278):  at dalvik.system.NativeStart.main(Native Method)
04-21 17:00:07.892: E/AndroidRuntime(278): Caused by: java.lang.reflect.InvocationTargetException
04-21 17:00:07.892: E/AndroidRuntime(278):  at com.insat.notememoiresqlite.MainActivity.onClick(MainActivity.java:69)
04-21 17:00:07.892: E/AndroidRuntime(278):  at java.lang.reflect.Method.invokeNative(Native Method)
04-21 17:00:07.892: E/AndroidRuntime(278):  at java.lang.reflect.Method.invoke(Method.java:521)
04-21 17:00:07.892: E/AndroidRuntime(278):  at android.view.View$1.onClick(View.java:2067)
04-21 17:00:07.892: E/AndroidRuntime(278):  ... 11 more
04-21 17:00:07.892: E/AndroidRuntime(278): Caused by: java.lang.NullPointerException
04-21 17:00:07.892: E/AndroidRuntime(278):  ... 15 more
04-21 17:04:37.812: I/Process(278): Sending signal. PID: 278 SIG: 9 
```

我认为这是因为 Main Activity 中的这些行：

```
String summary = newNote.getSummary();
String details = newNote.getDetails(); 
```

我尝试在 newNote 为空时从其中获取值 **但为什么它为空？**

**-------------------------------------------------- - - - - -编辑 - - - - - - - - - - - - - - - - - - - - ------------------**

**我已经尝试过 onActivityResult 解决方案，但我仍然有此行的 NullPointerException：**

```
Note newNote = getIntent().getExtras().getParcelable("myNewNote"); 
```

**这是代码：在主要活动中：**

```
public void onClick(View view) {
        adapter = (ArrayAdapter<Note>) getListAdapter();
        switch (view.getId()) {
        case R.id.add:
            // Call AddActivity to specify content of the note fields to be
            // added to the DB
            intentToAdd = new Intent(this, AddActivity.class);
            startActivityForResult(intentToAdd, 0);
            break; 
```

**然后：**

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub

        Log.i("aaaaa", "Dans le onActivityResult ");
        if (resultCode == RESULT_OK) {
            Log.i("aaaaa", "RESULT_OK ");
            // get the extras from AddActivity
            Note newNote = getIntent().getExtras().getParcelable("myNewNote");
            if (newNote != null) {
                String summary = newNote.getSummary();
                String details = newNote.getDetails();

                // Save the new note in the database
                note = datasource.createNote(summary, details);
                adapter.add(note);

            } else {
                Log.i("aaaaa", "newNote est null !!!!!!!! ");
            }
        } else {
            Log.i("aaaaa", "RESULT_PAS OK ");
        }
    } 
```

**并在 AddActivity 中：**

```
super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_add);
        Log.i("aaaaa", "Dans le onCreate de AddActivity");

        butAdd = (Button) findViewById(R.id.buttonAjout);

        intentToMain = new Intent(this, MainActivity.class);

        butAdd.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Log.i("aaaaa", "Dans le onClick du bouton ajout");
                EditText summary = ((EditText) findViewById(R.id.editTextSum));
                EditText details = ((EditText) findViewById(R.id.editTextDet));

                Note note =new Note(summary.toString(),details.toString());
                intentToMain.putExtra("myNewNote", note);
                setResult(RESULT_OK);
                finish();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:28:56.270

你也可以试试这个...

创建一个包含笔记实例的静态类，然后在 AddActivity 中将值添加为

```
 StaticClass.noteitem.summary="abc";
  StaticClass.noteitem.details="abcdef"; 
```

然后在您的 mainactivity 检查的 OnREsume

```
 if (StaticClass.noteitem!=null) 
```

并以 StaticClass.noteitem.summary 等方式访问您的项目。

# matlab - 特定整数序列的程序

> ID：16133807
> 
> 赞同：1
> 
> 时间：2013-04-21T17:03:15.370
> 
> 标签：matlab, wolfram-mathematica

我正在求解稳态热方程，边界条件像这样变化 10,0,0,10,0,0,10,0,0,10,0,0,10.... 等等，具体取决于数量我选择的点。我想为这些边界条件构造一个矩阵，但无法根据矩阵的第 i 个元素指定序列的逻辑。

我为此使用mathematica，但是我只需要公式，例如奇数我们可以指定 2n+1 和偶数 2n ，对于序列 10,0,0,10,0,0,10,0,0 是这样的， 10,....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:13:39.817

在 MATLAB 中，它将是

```
M = zeros(1000, 1);
M(1:3:1000) = 10; 
```

制作具有这种结构的 1000 长向量。`1:3:1000`是`1,4,7,...`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T19:24:10.890

在 Mathematica 中执行此操作的一种方法：

```
Take[Flatten[ConstantArray[{10, 0, 0}, Ceiling[1000/3] ], 1],1000] 
```

另一种方式

```
Table[Boole[Mod[i,3]==1]*10, {i,1,1000}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T09:39:01.673

由于您特别想要一个数学公式，因此我建议一种方法：

```
seq = PadRight[{}, 30, {10, 0, 0}];

func = FindSequenceFunction[seq] 
```

> ```
> 10/3 (1 + Cos[2/3 \[Pi] (-1 + #1)] + Cos[4/3 \[Pi] (-1 + #1)]) & 
> ```

测试它：

```
Array[func, 10] 
```

> ```
> {10, 0, 0, 10, 0, 0, 10, 0, 0, 10} 
> ```

肯定有更简单的*程序*可以生成这个序列，例如：

```
Array[10 Boole[1 == Mod[#, 3]] &, 10] 
```

> ```
> {10, 0, 0, 10, 0, 0, 10, 0, 0, 10} 
> ```

# list - 使用匿名函数访问列表中的元素

> ID：16133808
> 
> 赞同：0
> 
> 时间：2013-04-21T17:03:17.150
> 
> 标签：list, erlang, anonymous-function

`[(+3), (*10), (+50)]`因此，假设我有一个函数列表，例如`1`我正在尝试在 Erlang 中创建一个函数，该函数使用匿名函数访问并将每个函数应用于用户传入的值。

在 Haskell 中，我会这样做：

`mapFuncs funcs val = map(\x -> x val) funcs`

但是在 Erlang 中，我不确定如何将函数列表的每个元素应用于用户传入的值：

```
mapFuncs(Funcs, Val) -> lists:map(fun(X)->X(Val)). 
```

输入：`[(+3), (*10), (+50)] , 1`

期望的输出： `[4, 10, 51]`

我很欣赏有关如何实现这一点以及通常如何访问使用匿名函数传入的列表元素的任何建议。

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T17:34:04.247

您可以使用列表：地图或列表理解。每个匿名函数都作为变量从列表中取出，称为传递值。

使用列表映射

```
mapFuncs(Funcs, Val) -> 
    lists:map(fun(Fun)->Fun(Val) end, Funcs). 
```

使用更强大的列表理解

```
mapFuncs(Funcs, Val) -> 
    [Fun(Val) || Fun <- Funcs]. 
```

函数调用如下

```
mapFuncs([fun(Val) -> Val + 3 end,
          fun(Val) -> Val * 10 end,
          fun(Val) -> Val + 50 end], 1). 
```

这里列表中的每个元素都是一个匿名函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:26:03.137

你可以使用列表理解来写一些东西。

```
-module(mylists).
-export([mapList/2]).

mapList(ListFuns, Val) ->
   [ Func(Val) || Func <- ListFuns]. 
```

是生成器，它`Func <- ListFuns`为列表推导创建函数列表。结果`Func(Val)`是，表示我们要将函数应用于传递给原始函数的值`mapList`。

# c# - 如何为长时间运行的作业停止 Windows 服务？

> ID：16133809
> 
> 赞同：1
> 
> 时间：2013-04-21T17:03:17.937
> 
> 标签：c#, quartz-scheduler

目前我正在使用 Windows 服务继续在后台运行一些作业。这些作业是通过 Quartz.Net 安排的。通常这些是长时间运行的作业，从 5 分钟到 15 分钟不等。如果作业当前正在运行并且用户将尝试关闭 Windows 服务，则它会抛出异常：**Windows 服务没有及时响应。**

实际上 WindowsService 的 OnShutdown() 方法，我也在尝试关闭 Quartz.Net。我正在调用**scheduler.Shutdown(true)**以停止调度程序并等待正在运行的作业。如果我将其设为 False，则 Windows 服务将正常停止，但它会将正在运行的作业置于不稳定状态。请帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T18:44:08.190

您收到此错误是因为您的服务未在约定的时间内完成停止。因此，SCM 假定它以某种方式挂起并中止它。

要告诉 SCM 您需要更多时间来完成操作，请调用`ServiceBase.RequestAdditionalTime()`您的`OnStop`处理程序。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.requestadditionaltime.aspx](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.requestadditionaltime.aspx)

# file - 如何在不写入空字节的情况下写入 nasm？

> ID：16133810
> 
> 赞同：1
> 
> 时间：2013-04-21T17:03:21.567
> 
> 标签：file, null, byte, nasm

很简单的问题。

这个 nasm 应该将用户编写的消息（即 hello）写入文件，再次由用户输入的参数确定。它这样做很好，但问题是，它也会写入所有未使用的空字节。例如，如果我为用户输入保留了 32 个字节，而用户只使用了 4 个字节作为输入，那么这些字节将连同 28 个空字节一起被打印出来。

如何停止打印空字节？

使用的代码：

```
global _start

section .text
_start:

    mov rax, 0 ; get input to write to file
    mov rdi, 0
    mov rsi, msg
    mov rdx, 32
    syscall

    mov rax, 2 ; open the file at the third part of the stack
    pop rdi
    pop rdi
    pop rdi
    mov rsi, 1
    syscall

    mov rdi, rax

    mov rax, 1 ; write message to file
    mov rsi, msg
    mov rdx, 32
    syscall

    mov rax, 3 ; close file
    syscall

    mov rax, 1 ; print success message
    mov rdi, 1
    mov rsi, output
    mov rdx, outputL
    syscall

    mov rax, 60 ; exit
    mov rdi, 0 
    syscall

section .bss
    msg: resb 32

section .data
    output: db 'Success!', 0x0A
    outputL: equ $-output 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:13:25.280

好吧，在对头文件进行了一些挖掘和试验之后，我自己弄清楚了。

基本上，它的工作方式是您必须将用户的字符串通过一个字节计数过程，该过程沿字符串计数，直到找到一个空字节，然后存储该数量的非空字节。

我将发布我正在为与我有同样问题的任何人使用的解决方法。请记住，此解决方案适用于 64 位 nasm，而**不是 32**！

对于 32 位编码器，更改：

*   所有带有“eax”的“rax”实例
*   带有“ebx”的“rdi”的所有实例
*   带有“ecx”的“rsi”的所有实例
*   带有“edx”的“rdx”的所有实例
*   带有“int 80h”（或等效项）的“syscall”的所有实例
*   所有带有“edx”的“r8”实例（你必须兼顾这个和rdx）

这是我使用的完整解决方案：

```
global _start

; stack: (argc) ./a.out input filename

section .text
_start:

getInput:
    mov rax, 0   ; syscall for reading user input
    mov rdi, 0  
    mov rsi, msg ; store user input in the "msg" variable
    mov rdx, 32  ; max input size = 32 bytes
    xor r8, r8   ; set r8 to zero for counting purposes (this is for later)

getInputLength:
    cmp byte [msg + r8], 0 ; compare ((a byte of user input) + 0) to 0
    jz open                ; if the difference is zero, we've found the end of the string
                           ; so we move on. The length of the string is stored in r9.
    inc r8                 ; if not, onto the next byte...
    jmp getInputLength     ; so we jump back up four lines and repeat!

open:
    mov rax, 2 ; syscall for opening files
    pop rdi
    pop rdi
    pop rdi    ; get the file to open from the stack (third argument)
    mov rsi, 1 ; open in write mode
    syscall

    ; the open syscall above has made us a full file descriptor in rax

    mov rdi, rax ; so we move it into rdi for later

write:
    mov rax, 1   ; syscall for writing to files
                 ; rdi already holds our file descriptor
    mov rsi, msg ; set the message we're writing to the msg variable
    mov rdx, r8  ; set write length to the string length we measured earlier
    syscall

close:
    mov rax, 3 ; syscall for closing files
               ; our file descriptor is still in fd
    syscall

exit:
    mov rax, 60 ; syscall number for program exit
    mov rdi, 0  ; return 0 
```

请记住，这不是一个完整的程序。它完全缺乏错误处理，不提供用户指令等。它只是方法的说明。

# oop - Golang：有什么方法可以访问 Go 组合模型中“父”结构的方法中的“子”结构？

> ID：16133813
> 
> 赞同：2
> 
> 时间：2013-04-21T17:03:34.567
> 
> 标签：oop, orm, go

我想制作一个通用模型结构以嵌入将使用`gorp`（[https://github.com/coopernurse/gorp](https://github.com/coopernurse/gorp)）将对象持久保存在我的 MySQL 数据库中的结构中。我的理解是，这种组合是一个人如何在 Go 中完成通过强 OO 语言中的继承完成的事情。

但是，我运气不佳，因为我想在`GorpModel`结构上定义所有 CRUD 方法，以避免在每个模型中重复它们，但这会导致`gorp`（正如我现在使用它）假设`GorpModel`由于使用的反射，我要与之交互的表被调用`gorp`。这自然会导致错误，因为我的数据库中没有这样的表。

有什么方法可以找出/使用我所在的类型（`GorpModel`嵌入的超类）来使下面的代码工作，还是我完全找错了树？

```
package models

import (
    "fmt"
    "reflect"
    "github.com/coopernurse/gorp"
    "database/sql"
    _ "github.com/go-sql-driver/mysql"
)

type GorpModel struct {
    New            bool   `db:"-"`
}

var dbm *gorp.DbMap = nil

func (gm *GorpModel) DbInit() {
    gm.New = true
    if dbm == nil {
        db, err := sql.Open("mysql", "username:password@my_db")
        if err != nil {
            panic(err)
        } 
        dbm = &gorp.DbMap{Db: db, Dialect: gorp.MySQLDialect{"InnoDB", "UTF8"}}
        dbm.AddTable(User{}).SetKeys(true, "Id")
        dbm.CreateTables()
    }           
}

func (gm *GorpModel) Create() {
    err := dbm.Insert(gm)
    if err != nil {
        panic(err)
    }
}

func (gm *GorpModel) Delete() int64 {
    nrows, err := dbm.Delete(gm)
    if err != nil {
        panic(err)
    }

    return nrows
}   

func (gm *GorpModel) Update() {
    _, err := dbm.Update(gm)
    if err != nil {
        panic(err)
    } 
} 
```

struct的`New`属性`GorpModel`用于跟踪它是否是新创建的模型，以及我们是否应该调用`Update`或`Insert`on `Save`（目前在子`User`struct 中定义）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:28:21.867

> 有没有办法弄清楚/使用我所在的类型（GorpModel 嵌入的超类）

不。

我不知道构建解决方案的最佳方法，但是对于您尝试在某种基类中实现的 CRUD，只需将它们编写为函数即可。IE。

```
func Create(gm interface{}) { // or whatever the signature should be
    err := dbm.Insert(gm)
    if err != nil {
        panic(err)
    }
} 
```

# delphi - 如何在 Delphi 中动态更改 TChart 的面板颜色？

> ID：16133819
> 
> 赞同：0
> 
> 时间：2013-04-21T17:03:46.730
> 
> 标签：delphi, charts

而在 IDE 面板中，参数显示在 Chart->Panel->Parameters（例如颜色）中。虽然我不能在代码中使用这种方法：`Chart.Panel.Color:=RGB(0,0,0);//doesn't work`任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:06:26.713

使用`Color`属性，例如`Chart1.Color := clYellow`。

# symfony - OptionsResolver 组件和额外选项

> ID：16133820
> 
> 赞同：1
> 
> 时间：2013-04-21T17:03:48.767
> 
> 标签：symfony

我有一个可以有各种键的数组。但是，始终存在两个必需的键。我现在使用 OptionsResolver 组件。它工作正常，直到没有任何额外的键。我还考虑了 Validator 组件，据我所知，存在相同的行为。所以我总是需要设置完整的键列表，但正如我上面写的，我只需要验证其中的一些。有没有办法解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:27:37.600

您好，您可以在 OptionResolver 中定义必需、可选和默认值。也许我会给你一些例子，所以它会比描述它更容易：

```
$resolver = new Symfony\Component\OptionsResolver\OptionsResolver;
$resolver
    ->setRequired(['required1', 'required2'])
    ->setOptional(['optional1', 'optional2'])
    ->setDefaults(['defaultValue' => '123'])
;

$options = $resolver->resolve(
   [
    'required1' => 'test',
    'required2' => 'test123',
    'optional1' => 'opt'
   ]
); 
```

那么选项将看起来像这样

```
[
  'defaultValue' => '123',
  'required1' => 'test',
  'required2' => 'test123',
  'optional1' => 'opt',
] 
```

如果我们没有设置`required1`或`required2`在解析数组中，那么我们会遇到`Symfony\Component\OptionsResolver\Exception\MissingOptionsException`异常。如果我们给出不知道的选项（未在 setRequired、setOptional 或 setDefaults 中定义），那么就会出现`Symfony\Component\OptionsResolver\Exception\InvalidOptionsException`异常。

> 我还考虑了 Validator 组件，据我所知，存在相同的行为

你可以决定哪些值应该是“必需的”......但不确定我是否明白你的意思

# java - Java：旋转图像使其指向鼠标光标

> ID：16133822
> 
> 赞同：0
> 
> 时间：2013-04-21T17:04:00.387
> 
> 标签：java, image, swing, rotation, awt

我希望播放器图像指向鼠标光标。我使用此代码来获取鼠标光标的位置：

```
private int cursorX = MouseInfo.getPointerInfo().getLocation().x;
private int cursorY = MouseInfo.getPointerInfo().getLocation().y; 
```

**注意：**默认播放器图像指向上方

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:29:24.847

您必须使用[三角函数](http://en.wikipedia.org/wiki/Trigonometry)来计算旋转角度。为此，您首先需要获取图像和光标的位置。我无法告诉您如何获得图像的位置，因为这可能会有所不同。对于此示例（改编自[此处](https://stackoverflow.com/questions/10461993/rotate-image-to-point-to-mouse-position/10462226#10462226)），我将假设`imageX`和`imageY`是您图像的`x`和位置：`y`

```
float xDistance = cursorX - imageX;
float yDistance = cursorY - imageY;
double rotationAngle = Math.toDegrees(Math.atan2(yDistance, xDistance)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T17:32:18.497

要找到从坐标 (0,0) 到另一个坐标 (x,y) 的角度，我们可以使用三角函数 tan^-1(y/x)。

Java 的[`Math`](https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html "数学 javadoc")类指定了一个静态方法`atan2`，该方法充当 tan^-1 函数（也称为“反正切”，因此称为“atan”）并以*弧度*返回角度。（有一种方法`atan`需要一个参数。请参阅链接的 Javadoc。）

为了找到从“玩家”坐标到鼠标光标坐标的角度（我假设您提到的这个“玩家”具有 x 和 y 坐标），我们需要执行类似的操作这个：

```
double theta = Math.atan2(cursorY - player.getY(), cursorX - player.getX()); 
```

还要注意的是，零弧度的角度表示鼠标直接位于玩家的*右侧*。您提到“默认播放器图像”指向上方；如果您的意思是在旋转之前，您的图像面向玩家，那么对于几何图形和 Java 实现来说，`atan2`让您的玩家“默认”朝右会更传统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-25T05:38:00.280

虽然这是两年前问的......

如果您需要鼠标在窗口中不断更新鼠标位置，请参阅[mouseMotionListener](https://docs.oracle.com/javase/tutorial/uiswing/events/mousemotionlistener.html)。用于获取鼠标位置的电流是相对于整个屏幕的。要时刻铭记在心。

否则，这是我使用的一种方法，

```
public double angleInRelation(int x1, int y1, int x2, int y2) {
    // Point 1 in relation to point 2
    Point point1 = new Point(x1, y1);
    Point point2 = new Point(x2, y2);
    int xdiff = Math.abs(point2.x - point1.x);
    int ydiff = Math.abs(point2.y - point1.y);
    double deg = 361;
    if ( (point2.x > point1.x) && (point2.y < point1.y) ) {
        // Quadrant 1
        deg = -Math.toDegrees(Math.atan(Math.toRadians(ydiff) / Math.toRadians(xdiff)));

    } else if ( (point2.x > point1.x) && (point2.y > point1.y) ) {
        // Quadrant 2
        deg = Math.toDegrees(Math.atan(Math.toRadians(ydiff) / Math.toRadians(xdiff)));

    } else if ( (point2.x < point1.x) && (point2.y > point1.y) ) {
        // Quadrant 3
        deg = 90 + Math.toDegrees(Math.atan(Math.toRadians(xdiff) / Math.toRadians(ydiff)));

    } else if ( (point2.x < point1.x) && (point2.y < point1.y) ) {
        // Quadrant 4
        deg = 180 + Math.toDegrees(Math.atan(Math.toRadians(ydiff) / Math.toRadians(xdiff)));

    } else if ((point2.x == point1.x) && (point2.y < point1.y)){
        deg = -90;
    } else if ((point2.x == point1.x) && (point2.y > point1.y)) {
        deg = 90;
    } else if ((point2.y == point1.y) && (point2.x > point1.x)) {
        deg = 0;
    } else if ((point2.y == point2.y) && (point2.x < point1.x)) {
        deg = 180;
    }
    if (deg == 361) {
        deg = 0;
    }
    return deg;
} 
```

换句话说，你得到每个 θs 的角度，如下图所示，并检查 x 或 y 是否为 0，并为此做一个特殊情况。

原点是图片的中间，每个点（用手绘十字标记）是鼠标所在的位置。

[![与鼠标位置相关的图片](https://i.stack.imgur.com/IxRmu.png)](https://i.stack.imgur.com/IxRmu.png)

# jquery - jQuery - 更改 jQuery 移动页面上所有元素的 id/name/for 的最后三个字符

> ID：16133824
> 
> 赞同：0
> 
> 时间：2013-04-21T17:04:05.653
> 
> 标签：jquery, jquery-mobile

我正在尝试执行以下操作：

*   创建一个`<li>`包含一大堆元素（div、输入、文本区域等）的新元素
*   附加`<li>`到现有的`<ul>`
*   更改此新附加的所有元素的所有`ids`, `for`,变量`name``<li>`

我在这方面遇到了一些困难，而且似乎得到了好坏参半的结果。这是一些代码（我知道它很花哨，但它成功地添加了所有这些项目）：

```
 $("#add-labour").click(function(){
    var next = 2;
    var new_li = "<li>";
    new_li += '<div class="ui-grid-a">';
    new_li += '<div class="ui-block-a" style="text-align:center">';
    new_li += '<h1><label for="date-CME">Date</label></h1>';
    new_li += '</div>';
    new_li += '<p class="ui-block-b"><input type="date" name="date-CME" id="date-CME" value=""></p>';
    new_li += '</div>';
    new_li += '<div class="ui-grid-a">';
    new_li += '<div class="ui-block-a" style="text-align:center">';
    new_li += '<h1><label for="wo-in-CME">In</label></h1>';
    new_li += '</div>';
    new_li += '<p class="ui-block-b"><input type="time" name="wo-in-CME" id="wo-in-CME" value=""></p>';
    new_li += '</div>';
    new_li += '<div class="ui-grid-a">';
    new_li += '<div class="ui-block-a" style="text-align:center">';
    new_li += '<h1><label for="wo-out-2">Out</label></h1>';
    new_li += '</div>';
    new_li += '<p class="ui-block-b"><input type="time" name="wo-out-CME" id="wo-out-CME" value=""></p>';
    new_li += '</div>';
    new_li += '<label for="num-workers-2">Number of Workers</label>';
    new_li += '<input type="range" name="num-workers-CME" id="num-workers-CME" value=1 min=1 max=5>';
    new_li += '<label for="work-done-2">Tasks Completed:</label>';
    new_li += '<textarea cols="40" rows="8" name="work-done-CME" id="work-done-2"></textarea>';
    new_li += '<label for="l-warranty-CME">Warranty?</label>';
    new_li += '<select name="l-warranty-CME" id="l-warranty-CME" data-role="slider">';
    new_li += '<option value="off">No</option>';
    new_li += '<option value="on">Yes</option>';
    new_li += '</select>';
    new_li += '<br>';
    new_li += '</li>';
    $("#labour-sets").append(new_li);
    $("#labour-sets").listview('refresh');

    // #form is the name of the jQuery mobile page
    $("#form").trigger('create'); 
```

然后，要更改所有元素的变量，我有另一个按钮（目前用于测试），单击该按钮应更改所有元素的变量。像这样：

```
 $("#calc").click(function(){
    var sz = $("#labour-sets li").size();
    $("#work-done-1").val(sz);
    fix_id_numbers(sz);

  }); 

function fix_id_numbers(sz){
  // "sz" is the number of <li> in the <ul>
  $('.container').find('[id$="-CME"]').each(function(){
    this.id = this.id.replace('CME', sz);
  });
  $('.container').find('[for="-CME"]').each(function(){
    this.for = this.for.replace('CME', sz);
  });
  $('.container').find('[name="-CME"]').each(function(){
    this.name = this.name.replace('CME', sz);
  }); 
```

理想情况下，`fix_id_numbers`将扫描 new 中的所有元素并将所有值`<li>`更改为. 有任何想法吗？`CME``sz`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:52:08.077

I think that's exactly what you want to do:

```
$("#add-labour").click(function(){
    var next = 2;
    var sz = $("#labour-sets li").size();
    var cme = sz + 1;
    console.log("cme:"+cme);
    var new_li = "<li>";
    new_li += '<div class="ui-grid-a">';
    new_li += '<div class="ui-block-a" style="text-align:center">';
    new_li += '<h1><label for="date-'+cme+'>Date</label></h1>';
    [...] 
```

Completed solution here: [http://jsfiddle.net/ouadie/AD3u4/1/](http://jsfiddle.net/ouadie/AD3u4/1/)

# c++ - yaml-cpp 从文件中导入字符串会产生工件吗？

> ID：16133834
> 
> 赞同：3
> 
> 时间：2013-04-21T17:05:10.673
> 
> 标签：c++, yaml-cpp

尝试使用 yaml-cpp 进行某些操作时，我被困在字符串中。尤其是因为它们似乎不能很好地往返...

当我从文件中读取一个字符串 - 然后导出该字符串时，导出时似乎有一个工件..即字符串：

```
%YAML 1.2
---
key1: "this is a string"
key2: this is another
... 
```

当我简单地读写时，一些额外的字符被添加到第一个“键值”中：

```
::YAML::Node y(YAML::LoadFile("testyaml.txt"));
std::fstream out("testyaml2.yml", std::ios_base::out);
YAML::Emitter em(out);
em.SetIndent(2);
em.SetStringFormat(DoubleQuoted); //just to add quotes
em << y; 
```

但是现在文件看起来像：

```
"key1": !<!> "this is a string"
"key2": "this is another" 
```

我可以忍受“丢失”标题信息 - 或者到处都添加引号的事实（我只是告诉解析器这样做对吗？）。但是，`!<!>`它们并不好。特别是因为这将在每个周期继续进行（第二个读/写周期将增加两倍的工件等）。

有没有办法阻止这些感叹号——为什么会出现？

# objective-c - Cocos2d 场景加载方向错误

> ID：16133840
> 
> 赞同：0
> 
> 时间：2013-04-21T17:05:38.487
> 
> 标签：objective-c, uiview, cocos2d-iphone, ccscene

我正在尝试在一些 UIKit 视图之上制作 cocos2d 场景。我知道 cocos2d 2.0 CCDirector 是 UIViewController 的子类，因此我可以将其添加为子视图。

我已经编写了这个函数来处理在我的 appDelegate 中切换到一个场景（目前这是我的 MainWindow.xib 的代表[http://www.raywenderlich.com/4817/how-to-integrate-cocos2d-and-uikit](http://www.raywenderlich.com/4817/how-to-integrate-cocos2d-and-uikit)） ：

```
- (void)switchToScene
{
    self.viewController = [CCDirector sharedDirector];

    [[CCDirector sharedDirector] view].center = self.window.center;

    [self.window addSubview:[self.viewController view]];

    [[CCDirector sharedDirector] runWithScene:[CCTransitionSlideInL transitionWithDuration:1 scene:[BattleLayer scene]]];
} 
```

所以我从这段代码中遗漏了很多东西。但是有了这个，我得到了一些相似的场景来加载[http://i.stack.imgur.com/pubWE.png](http://i.stack.imgur.com/pubWE.png)

我的问题是：

1：如果我朝着正确的方向前进

2：如果是，下一步是手动调整场景的方向吗？

2.1：我该怎么做：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:16:01.480

我不确定您希望它看起来如何，但似乎 CCDirector 的视图顺时针旋转了 90 度。这可能是由于以下几个原因：

1.  您添加错误的视图（即顺时针旋转 90 度）
2.  您旋转了设备并且 CCDirector 没有旋转（在这种情况下，您应该查看方向参数以及旋转的对象和对象。可能是应用程序旋转但 CCDirector 没有收到旋转标志）。
3.  您可以使用 CGAffineTransformRotate 旋转 CCDirector 视图（我不确定..但因为 CCDirector 是 UIViewController 的子类..它应该可以工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T21:59:59.117

我通过创建 UINavigationController 解决了这个问题

```
- (void)switchToScene:(CCScene *)sceneObj
{
    navController_ = [[UINavigationController alloc] initWithRootViewController:director_];
    [window_ setRootViewController:navController_];
    [[CCDirector sharedDirector] pushScene:sceneObj];
} 
```

# c++ - 得到一条带有未知大小空格的行

> ID：16133852
> 
> 赞同：-2
> 
> 时间：2013-04-21T17:06:42.883
> 
> 标签：c++, string, spaces, cin

我想读取一个字符串，该字符串可以包含空格。

我试过了：

```
char* str;
cin >> str; // but I have to allocate a memory by making new 
```

所以我想：

```
string str;
cin >> str; 
```

但它会读到第一个空格。

有人可以知道我怎样才能得到它吗？也许`getline`？

我只能使用`iostream`和的包含`string`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:09:42.283

你的怀疑是正确的。

```
string str;
std::getline( cin, str ); 
```

这将一直读取，直到检测到*换行符*，而不仅仅是任何空白字符。

# c - C Socket 写入太多次

> ID：16133854
> 
> 赞同：1
> 
> 时间：2013-04-21T17:06:49.713
> 
> 标签：c, sockets, read-write

在用户输入数据之后，它会写出在数据刚刚输入之前输入的数据的一部分，如果这有意义吗？我只包含了一个片段，但是任何人都可以看到它会多次回复的任何原因吗？

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>
#include<sys/socket.h>
#include<arpa/inet.h> //inet_addr
#include<unistd.h> // write

#include<pthread.h> // For Threading

#include<wiringPi.h>
void *connection_handler(void *);
void lightLED(int pin,int status);
int maxConnections = 1;
int totalConnections = 0;
int main(int argc , char *argv[])
{
    int socket_desc , new_socket , c, *new_sock;
    struct sockaddr_in server , client;
    char *message;     
    //Create socket
    socket_desc = socket(AF_INET , SOCK_STREAM , 0);
    if (socket_desc == -1)
    {
        printf("Could not create socket");
    }

    //Prepare the sockaddr_in structure
    server.sin_family = AF_INET;
    server.sin_addr.s_addr = INADDR_ANY;
    server.sin_port = htons( 8888 );

    //Bind
    if( bind(socket_desc,(struct sockaddr *)&server , sizeof(server)) < 0)
    {
        puts("bind failed");
    }
    puts("bind done");

    //Listen
    listen(socket_desc , 3);

    //Accept and incoming connection
    puts("Waiting for incoming connections...");
    c = sizeof(struct sockaddr_in);
    while( (new_socket = accept(socket_desc, (struct sockaddr *)&client, (socklen_t*)&c)) )
    {
     if(new_socket > 0)
     {
      if(totalConnections < maxConnections){
      totalConnections++;
     }
      else
      {
       message = "Sorry Maximum Users Reached\n";
       write(new_socket,message,strlen(message));
       puts("Too many Users");
       close(new_socket);
       continue;
      }
    }
     puts("Connection Accepted");
    char *client_ip = inet_ntoa(client.sin_addr);
    int client_port = ntohs(client.sin_port);
    printf("ClientIP:%s\n",client_ip);
     message = "Hello you have been accepted!\n";
     write(new_socket, message , strlen(message));

    pthread_t sniffer_thread;
    new_sock = malloc(1);
    *new_sock = new_socket;

    if(pthread_create( &sniffer_thread, NULL , connection_handler , (void*) new_sock) <0)
    {
     perror("Could not create thread");
    return 1;
    }
    puts("Handler Assigned");
    }

    if (new_socket<0)
    {
        perror("accept failed");
    return 1;
    }
    return 0;
}

void *connection_handler(void *socket_desc)
{
    int sock = *(int*)socket_desc;
    int read_size;
    char *message , client_message[2000];

    message = "Greeting! I am your Connection Handler\n";
    write(sock , message,strlen(message));

    message =  "What do you want to do\n";
    write(sock,message,strlen(message));

    while( (read_size = recv(sock , client_message , 2000 , 0)) > 0)
    {
     write(sock , client_message , strlen(client_message));
     printf("User Entered:%s\n",client_message);
     int pin = client_message[0]-'0';
     int status = client_message[1]-'0';
     lightLED(pin,status);
    }
    if(read_size == 0)
    {
    puts("Client Disconnected\n");
    fflush(stdout);
    totalConnections--;
    }else if(read_size == -1)
    {
     perror("recv Failed");
    }

    free(socket_desc);
    return 0;
}

void lightLED(int pin,int status)
{
    char message;
    if(wiringPiSetup() == -1){
    puts("wiringPi Error");
        exit(1);
    }

    //pinMode(pin,OUTPUT);
    printf("Changing LED Pin- %d Status- %d\n",pin,status);
    //digitalWrite(pin,status);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T18:24:03.383

## 第一关

我不确定你看到了什么问题。我已经使用了你的代码（它的状态非常好——做得很好；我查看了很多代码，其中有很多更严重的问题）并编译并运行它，它似乎对我有用：

```
$ nc localhost 8888
Connection Accepted
ClientIP:127.0.0.1
Handler Assigned
Hello you have been accepted!
Greeting! I am your Connection Handler
What do you want to do
01
User Entered:01

Changing LED Pin- 0 Status- 1
01
21
User Entered:21

Changing LED Pin- 2 Status- 1
21
31
User Entered:31

Changing LED Pin- 3 Status- 1
31
we wish you a merry Christmas
User Entered:we wish you a merry Christmas

Changing LED Pin- 71 Status- 53
we wish you a merry Christmas
Client Disconnected

$ 
```

运行的代码是：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <sys/socket.h>
#include <arpa/inet.h>
#include <unistd.h>
#include <pthread.h>
//#include <wiringPi.h>

void *connection_handler(void *);
void lightLED(int pin, int status);

int maxConnections = 1;
int totalConnections = 0;

int main(void)
{
    int socket_desc, new_socket, c, *new_sock;
    struct sockaddr_in server, client;
    char *message;

    socket_desc = socket(AF_INET, SOCK_STREAM, 0);
    if (socket_desc == -1)
    {
        printf("Could not create socket");
        return 1;
    }

    server.sin_family = AF_INET;
    server.sin_addr.s_addr = INADDR_ANY;
    server.sin_port = htons(8888);

    if ( bind(socket_desc, (struct sockaddr *)&server, sizeof(server)) < 0)
    {
        puts("bind failed");
        return 1;
    }
    puts("bind done");

    if (listen(socket_desc, 3) != 0)
    {
        perror("listen() failed");
        return 1;
    }

    puts("Waiting for incoming connections...");
    c = sizeof(struct sockaddr_in);
    while ((new_socket = accept(socket_desc, (struct sockaddr *)&client, (socklen_t*)&c)))
    {
        if (new_socket > 0)
        {
            if (totalConnections < maxConnections)
                totalConnections++;
            else
            {
                message = "Sorry Maximum Users Reached\n";
                write(new_socket, message, strlen(message));
                puts("Too many Users");
                close(new_socket);
                continue;
            }
        }
        puts("Connection Accepted");
        char *client_ip = inet_ntoa(client.sin_addr);
        //int client_port = ntohs(client.sin_port);

        printf("ClientIP:%s\n", client_ip);
        message = "Hello you have been accepted!\n";
        write(new_socket, message, strlen(message));

        pthread_t sniffer_thread;
        new_sock = malloc(1 * sizeof(int));       // Oops!
        if (new_sock == 0) { perror("out of memory"); return 1; }
        *new_sock = new_socket;

        if (pthread_create( &sniffer_thread, NULL, connection_handler, (void*) new_sock) <0)
        {
            perror("Could not create thread");
            return 1;
        }
        puts("Handler Assigned");
    }

    if (new_socket<0)
    {
        perror("accept failed");
        return 1;
    }
    return 0;
}

void *connection_handler(void *socket_desc)
{
    int sock = *(int*)socket_desc;
    int read_size;
    char *message, client_message[2000];

    message = "Greeting! I am your Connection Handler\n";
    write(sock, message, strlen(message));

    message =  "What do you want to do\n";
    write(sock, message, strlen(message));

    while ((read_size = recv(sock, client_message, 2000, 0)) > 0)
    {
        write(sock, client_message, strlen(client_message));
        printf("User Entered:%s\n", client_message);
        int pin = client_message[0]-'0';
        int status = client_message[1]-'0';
        lightLED(pin, status);
    }
    if (read_size == 0)
    {
        puts("Client Disconnected\n");
        fflush(stdout);
        totalConnections--;
    }
    else if (read_size == -1)
    {
        perror("recv Failed");
    }

    free(socket_desc);
    return 0;
}

void lightLED(int pin, int status)
{
//    if (wiringPiSetup() == -1)
//    {
//        puts("wiringPi Error");
//        exit(1);
//    }

    printf("Changing LED Pin- %d Status- %d\n", pin, status);
} 
```

如果您仍然有问题，那么问题可能出在您的客户端代码中。如您所见，我使用`netcat`( `nc`) 作为您的客户的代理。请注意，“我们祝你圣诞快乐”被接受为有效命令，尽管引脚为 73，状态为 53。这可能不适用于真正的 LED。

请注意，我添加了错误检查`malloc()`并分配了更正确的空间量（`sizeof(int)`而不是仅 1 个字节）。我还确保报告的错误条件之后是或多或少适当的错误返回，而不是像没有发生错误一样继续。

此外，我还没有修复评论中突出显示的一些问题——检查`write()`而不依赖空终止等。这些仍然应该得到解决。

我的测试是在带有 GCC 4.7.1 的 Mac OS X 10.7.5 上进行的：

```
gcc -O3 -g -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes -Wold-style-definition server.c -o server 
```

* * *

## 第二遍

另一个测试运行 - 显示非空终止输入的问题：

```
$ nc localhost 8888
Connection Accepted
ClientIP:127.0.0.1
Hello you have been accepted!
Handler Assigned
Greeting! I am your Connection Handler
What do you want to do
this is a long string - what will you do with it?
User Entered:this is a long string - what will you do with it?

Changing LED Pin- 68 Status- 56
this is a long string - what will you do with it?
01
User Entered:01
s is a long string - what will you do with it?

Changing LED Pin- 0 Status- 1
01
s is a long string - what will you do with it?
Client Disconnected

$ 
```

当我用`telnet`而不是运行它时`nc`，我得到了你所看到的不当行为，我认为：

```
$ telnet localhost 8888
Trying 127.0.0.1...
Connection Accepted
ClientIP:127.0.0.1
Handler Assigned
Connected to localhost.
Escape character is '^]'.
Hello you have been accepted!
Greeting! I am your Connection Handler
What do you want to do
Would you like a biscuit?
User Entered:Would you like a biscuit?

Changing LED Pin- 39 Status- 63
Would you like a biscuit?
93
User Entered:93
d you like a biscuit?

Changing LED Pin- 9 Status- 3
93
d you like a biscuit?
Intriguing
User Entered:Intriguing
ke a biscuit?

Changing LED Pin- 25 Status- 62
Intriguing
ke a biscuit?
Bye
User Entered:Bye
guing
ke a biscuit?

Changing LED Pin- 18 Status- 73
Bye
guing
ke a biscuit?
User Entered:ye
guing
ke a biscuit?

Changing LED Pin- -44 Status- 73
ye
guing
ke a biscuit?
^CUser Entered:????guing
ke a biscuit?

Changing LED Pin- -49 Status- -60
User Entered:???guing
ke a biscuit?

Changing LED Pin- -49 Status- -53
?guing
ke a biscuit?
User Entered:??guing
ke a biscuit?

...continued attempts with control-C (interrupt)...
...and control-D (EOF) not producing anything useful...

^]
telnet> qConnection closed.
Client Disconnected

$ 
```

因此，`telnet`可能会误导您……您的服务器没有任何问题，只是客户端 ( `telnet`) 的行为不像您预期​​的那样。

### 更新代码

与更新的服务器代码对话：

```
$ nc localhost 8888
Connection Accepted
ClientIP: 127.0.0.1
Handler Assigned
Hello you have been accepted!
Greetings! I am your Connection Handler
What do you want to do
13
User Entered:13

Changing LED Pin 1 status 3
13
21
User Entered:21

Changing LED Pin 2 status 1
21
elephants?
User Entered:elephants?

Changing LED Pin 53 status 60
elephants?
21
User Entered:21

Changing LED Pin 2 status 1
21
quit 
User Entered:quit

Changing LED Pin 65 status 69
quit
Client Disconnected

$ 
```

### 更新的服务器代码

此版本关注长度并确保字符串以空值结尾。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <sys/socket.h>
#include <arpa/inet.h>
#include <unistd.h>
#include <pthread.h>
//#include <wiringPi.h>

void *connection_handler(void *);
void lightLED(int pin, int status);
static void write_sock(int sock, const char *msg);

int maxConnections = 1;
int totalConnections = 0;

int main(void)
{
    int socket_desc, new_socket, c, *new_sock;
    struct sockaddr_in server, client;

    socket_desc = socket(AF_INET, SOCK_STREAM, 0);
    if (socket_desc == -1)
    {
        printf("Could not create socket");
        return 1;
    }

    server.sin_family = AF_INET;
    server.sin_addr.s_addr = INADDR_ANY;
    server.sin_port = htons(8888);

    if (bind(socket_desc, (struct sockaddr *)&server, sizeof(server)) < 0)
    {
        puts("bind failed");
        return 1;
    }
    puts("bind done");

    if (listen(socket_desc, 3) != 0)
    {
        perror("listen() failed");
        return 1;
    }

    puts("Waiting for incoming connections...");
    c = sizeof(struct sockaddr_in);
    while ((new_socket = accept(socket_desc, (struct sockaddr *)&client, (socklen_t*)&c)))
    {
        if (new_socket > 0)
        {
            if (totalConnections < maxConnections)
                totalConnections++;
            else
            {
                write_sock(new_socket, "Sorry Maximum Users Reached\n");
                puts("Too many Users");
                close(new_socket);
                continue;
            }
        }

        puts("Connection Accepted");
        char *client_ip = inet_ntoa(client.sin_addr);
        //int client_port = ntohs(client.sin_port);

        printf("ClientIP: %s\n", client_ip);
        write_sock(new_socket, "Hello you have been accepted!\n");

        pthread_t sniffer_thread;
        new_sock = malloc(1 * sizeof(int));       // Oops!
        if (new_sock == 0) { perror("out of memory"); return 1; }
        *new_sock = new_socket;

        if (pthread_create(&sniffer_thread, NULL, connection_handler, (void *)new_sock) < 0)
        {
            perror("Could not create thread");
            return 1;
        }
        puts("Handler Assigned");
    }

    if (new_socket < 0)
    {
        perror("accept failed");
        return 1;
    }
    return 0;
}

// Avoid repetition - use functions!
static void write_sock(int sock, const char *msg)
{
    int len = strlen(msg);
    if (write(sock, msg, len) != len)
    {
        perror("short write on socket");
        exit(1);
    }
}

void *connection_handler(void *socket_desc)
{
    int sock = *(int*)socket_desc;
    int read_size;
    char client_message[2000];

    write_sock(sock, "Greetings! I am your Connection Handler\n");
    write_sock(sock, "What do you want to do\n");

    while ((read_size = recv(sock, client_message, 2000, 0)) > 0)
    {
        client_message[read_size] = '\0';
        write_sock(sock, client_message);
        printf("User Entered:%s\n", client_message);
        int pin = client_message[0]-'0';
        int status = client_message[1]-'0';
        lightLED(pin, status);
    }

    if (read_size == 0)
    {
        puts("Client Disconnected\n");
        fflush(stdout);
        totalConnections--;
    }
    else if (read_size == -1)
    {
        perror("recv Failed");
    }

    free(socket_desc);
    return 0;
}

void lightLED(int pin, int status)
{
//    if (wiringPiSetup() == -1)
//    {
//        puts("wiringPi Error");
//        exit(1);
//    }
    printf("Changing LED Pin %d status %d\n", pin, status);
} 
```

注意使用`write_sock()`函数来封装重复的代码（这样做的好处是只需要编写一次代码，因此每次使用都可以正确）。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <sys/socket.h>
#include <arpa/inet.h>
#include <unistd.h>
#include <pthread.h>
//#include <wiringPi.h>

void *connection_handler(void *);
void lightLED(int pin, int status);
static void write_sock(int sock, const char *msg);

int maxConnections = 1;
int totalConnections = 0;

int main(void)
{
    int socket_desc, new_socket, c, *new_sock;
    struct sockaddr_in server, client;

    socket_desc = socket(AF_INET, SOCK_STREAM, 0);
    if (socket_desc == -1)
    {
        printf("Could not create socket");
        return 1;
    }

    server.sin_family = AF_INET;
    server.sin_addr.s_addr = INADDR_ANY;
    server.sin_port = htons(8888);

    if (bind(socket_desc, (struct sockaddr *)&server, sizeof(server)) < 0)
    {
        puts("bind failed");
        return 1;
    }
    puts("bind done");

    if (listen(socket_desc, 3) != 0)
    {
        perror("listen() failed");
        return 1;
    }

    puts("Waiting for incoming connections...");
    c = sizeof(struct sockaddr_in);
    while ((new_socket = accept(socket_desc, (struct sockaddr *)&client, (socklen_t*)&c)))
    {
        if (new_socket > 0)
        {
            if (totalConnections < maxConnections)
                totalConnections++;
            else
            {
                write_sock(new_socket, "Sorry Maximum Users Reached\n");
                puts("Too many Users");
                close(new_socket);
                continue;
            }
        }

        puts("Connection Accepted");
        char *client_ip = inet_ntoa(client.sin_addr);
        //int client_port = ntohs(client.sin_port);

        printf("ClientIP: %s\n", client_ip);
        write_sock(new_socket, "Hello you have been accepted!\n");

        pthread_t sniffer_thread;
        new_sock = malloc(1 * sizeof(int));       // Oops!
        if (new_sock == 0) { perror("out of memory"); return 1; }
        *new_sock = new_socket;

        if (pthread_create(&sniffer_thread, NULL, connection_handler, (void *)new_sock) < 0)
        {
            perror("Could not create thread");
            return 1;
        }
        puts("Handler Assigned");
    }

    if (new_socket < 0)
    {
        perror("accept failed");
        return 1;
    }
    return 0;
}

// Avoid repetition - use functions!
static void write_sock(int sock, const char *msg)
{
    int len = strlen(msg);
    if (write(sock, msg, len) != len)
    {
        perror("short write on socket");
        exit(1);
    }
}

void *connection_handler(void *socket_desc)
{
    int sock = *(int*)socket_desc;
    int read_size;
    char client_message[2000];

    write_sock(sock, "Greetings! I am your Connection Handler\n");
    write_sock(sock, "What do you want to do\n");

    while ((read_size = recv(sock, client_message, 2000, 0)) > 0)
    {
        client_message[read_size] = '\0';
        write_sock(sock, client_message);
        printf("User Entered:%s\n", client_message);
        int pin = client_message[0]-'0';
        int status = client_message[1]-'0';
        lightLED(pin, status);
    }

    if (read_size == 0)
    {
        puts("Client Disconnected\n");
        fflush(stdout);
        totalConnections--;
    }
    else if (read_size == -1)
    {
        perror("recv Failed");
    }

    free(socket_desc);
    return 0;
}

void lightLED(int pin, int status)
{
//    if (wiringPiSetup() == -1)
//    {
//        puts("wiringPi Error");
//        exit(1);
//    }
    printf("Changing LED Pin %d status %d\n", pin, status);
} 
```

# emacs - 我应该阅读什么指南来开始学习 Emacs？

> ID：16133859
> 
> 赞同：0
> 
> 时间：2013-04-21T17:07:25.903
> 
> 标签：emacs

我真的不知道这是否是一个体面的问题，但我对编程和寻找一个好的文本编辑器相当陌生。我已经阅读[了关于 Unix.SE](https://unix.stackexchange.com/q/986/34332)的[这个问题和关于 SO](https://stackoverflow.com/q/1430164/1530429)的这个问题，它们让我相信 Emacs 是正确的选择。但是我真的找不到任何针对那些不知道“Mx-foobar”是什么意思的人的好的文档。再一次，这对 SO 来说可能过于主观，但我想我还是会尝试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:42:21.917

根据我的经验，Emacs 是一个很大的话题。我建议您从它的教程开始，选择“帮助”菜单中的第一个条目（或按`Ctrl+h`，然后按`t`，这`C-h t`在 Emacs 样式中表示）。

然后通过阅读专门的文章或文档来满足您的需求。您可能会在 Emacs Info 中找到一堆有用的信息，这些信息可以通过`C-h i`( `Ctrl+h`, then `i`) 调用。

至少了解一点 Emacs Lisp 会非常有用，因为它用于配置编辑器，有时有助于理解某些事情是如何工作的。为此，您可能会发现有用[的 An Introduction to Programming in Emacs Lisp](http://www.gnu.org/software/emacs/emacs-lisp-intro/html_node/index.html)（但您也可以在 Emacs Info 中找到它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T02:40:38.793

如果您刚刚开始编程，那么您可能已经完成了足够多的工作，而无需与疯狂的月球编辑器打交道！[gedit](http://projects.gnome.org/gedit/) (Linux)、[Notepad++](http://notepad-plus-plus.org/) (Win) 或[TextWrangler](http://www.barebones.com/products/textwrangler/) (OS X) 都是免费的，您可能更熟悉。

不过，如果您喜欢玩游戏，Emacs 还是很棒的。我从几个资源中学到了：

*   O'Reilly[学习 GNU Emacs](http://shop.oreilly.com/product/9780596006488.do)

*   Emacs 的内置教程 - 按`Ctrl-h`然后`t`.

这些让我快速上手。

在您了解了非常基础的知识之后，您将希望自定义 Emacs 以使其更舒适。从 GitHub 下载某人的 Emacs 配置并进行调整。[Emacs Prelude](https://github.com/bbatsov/prelude)非常好。

从那时起，一切都是为了建立肌肉记忆：

*   尝试使用 Emacs 进行您通常所做的所有随机平凡的输入和编辑

*   尽可能使用 Emacs 移动键，例如在终端程序中

*   如果您使用 OS X，大多数 emacs 移动键都可以在文本字段中使用。使用那些而不是箭头键来移动。

Emacs 以对你的手很苛刻而闻名 - 按键组合是为更文明时代的旧键盘设计的。如果您在学习时小指开始受伤，最好将您的`Caps-Lock`钥匙重新映射为`Ctrl`.

# javascript - 防止 ajax 进度代码过早中止

> ID：16133860
> 
> 赞同：0
> 
> 时间：2013-04-21T17:07:32.360
> 
> 标签：javascript, ajax, html

我正在使用 index.php

```
<script type="text/javascript">
    $(function(){
        $("#progressbar").progressbar({
            value: 0 
        });

        function load() {
            $.ajax({
                url: './ajax.php?status='+$( "#progressbar" ).progressbar( "value" ),
                success: function(data) {

                    ajax = eval('(' + data + ')');

                    if(ajax!=false) {
                        $("#progressbar").progressbar({
                            value: ajax.status
                        });

                        $("#message").html( ajax.message );

                        if(ajax.status!=100) {
                            load();
                        }
                    }
                }
            });
        }

        load();
    });
</script>

<div id="message"></div> 
```

获取基于 ajax 的实时进度信息。这适用于 ajax.php：

```
<?php

    $php_array['status'] = rand(0,99);

  if($php_array['status']>100) {
      $php_array['status'] = 100;
  }

  if($php_array['status'] != 100) {
      $php_array['message'] = 'Aktueller Status <b>'.$php_array['status'].'%</b> von 100%, Differenz: '.(100-$php_array['status']);
  } else {
      $php_array['message'] = 'Juhu endlich geschafft!';
  }

  // Ausgabe des PHP Arrays als JSON Objekt
  echo json_encode($php_array);
?> 
```

它在 index.php 中显示了一个介于 0 和 99 之间的随机数，所以它可以工作。

我将 ajax.php 修改为

```
<?php

  //modified - start
  $zahl = 0;
  $menge = 0;

  if ($handle = opendir('folder')) 
  { 
    while (false !== ($entry = readdir($handle))) 
    {
        if (strpos($entry,$_GET['session_id']) !== false) 
        {                                        
            if (strpos($entry,'result') !== false)
            {
            }
            else
            {
                $zahl += (int)file_get_contents('folder/'.$entry);
                $menge++;        
            } 
        }
    }
    closedir($handle);
  }

  if((int)($zahl/$menge) != 0.0)
  { 
    $php_array['status'] = (int)($zahl/$menge);
  }
  else
  {
    $php_array['status'] = 0;
  }

  //modified - end

  if($php_array['status']>100) {
      $php_array['status'] = 100;
  }

  if($php_array['status'] != 100) {
      $php_array['message'] = 'Aktueller Status <b>'.$php_array['status'].'%</b> von 100%, Differenz: '.(100-$php_array['status']);
  } else {
      $php_array['message'] = 'Juhu endlich geschafft! <img src="http://d4nza.de/blog/wp-includes/images/smilies/icon_wink.gif" alt=";)" class="wp-smiley"> ';
  }
  echo json_encode($php_array);
?> 
```

opendir-part 遍历所有输出文本文件，其中仅包含 0 到 100 之间的数字。目标是找到平均进度。然后在

```
(int)($zahl/$menge) 
```

它被转换为整数并通过 json 转发到 index.php。

这有时有效。这意味着，在 index.php 上，有时我会看到进度，有时却看不到。

如何使 index.php 中的代码使其等待 ajax.php 响应而不是（可能）过早中止？

# php - 在 PHP 中从 Instagram 标题中删除表情符号

> ID：16133862
> 
> 赞同：0
> 
> 时间：2013-04-21T17:07:34.017
> 
> 标签：php, regex, instagram, emoticons

有谁知道从 instagram 标题中删除表情符号？我订阅了他们的 api 来提供某些照片类型并将它们显示在我的网站上。我尝试在 PHP 中使用以下命令来删除表情符号，但没有成功。

```
 $newcaption  = preg_replace('/[^a-zA-Z0-9 \.]/s', '', $caption); 
```

有谁知道如何使用 PHP 摆脱 instagram 表情符号？我不知道他们的 ascii 字符集是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:49:11.583

Instagram 没有原生表情符号。我的建议是，创建一个包含所有已知表情符号（表情符号、Android、iOS 等）的数组，然后从`$caption`.

我没有看到其他方法可以做到这一点。

更新：

我编写了一个正则表达式，可以在不创建数组的情况下帮助您，但它可能会导致一些错误。试试看结果，这里是：

```
$pattern = '/((?=:)|(?=;))(.*)(?=\s{1,})/i';
preg_replace($pattern, '', $string); 
```

# jquery - jQuery .getJSON() 在我的 Wordpress 中不起作用

> ID：16133866
> 
> 赞同：0
> 
> 时间：2013-04-21T17:07:42.733
> 
> 标签：jquery, wordpress, getjson

我是 jQuery 的新手，并且已经正确地将 jQuery 库包含到我的 Wordpress 中，但是，似乎无法在我的 Wordpress 中执行 jQuery 调用，看不到任何结果。以下是我的代码片段：

* * *

```
/* In my html, initiate call when selecting a different member id */
<script type="text/javascript">
          $(document).ready(function() {
        $("#select_member_id").change(function() {
        $.getJSON("<?php bloginfo('template_directory') ?>/get_member_info.php",    {"member_id" : $(this).val()}, function(jMember,status) {
            member = JSON.parse (jMember);
            $("#member_firstname").text(member.first_name);
        });
        });
         });
</script> 
```

* * *

```
/* In get_member_info.php suppose to return a JSON result */
    <?php
      include("member_roster.php"); // this is just an array file
      $member_id = $_GET["member_id"];
      echo "{" . '"'.'first_name'.'"' . " : " . $member_roster[$member_id] ["first_name"] . "}";
    ?> 
```

* * *

请告诉我我做错了什么......非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:12:09.763

使用`$.getJSON`时数据已经解析，所以不要调用`JSON.parse`.

```
$.getJSON("<?php bloginfo('template_directory') ?>/get_member_info.php",    {"member_id" : $(this).val()}, function(member,status) {
    $("#member_firstname").text(member.first_name);
}); 
```

手动构建 json 也是一个坏主意，您应该使用[`json_encode`](http://php.net/manual/en/function.json-encode.php)

```
echo json_encode(array('first_name' => $member_roster[$member_id] ["first_name"] )); 
```

# ios - 在 ViewDidLoad 中从 NSUserDefaults 加载数据

> ID：16133868
> 
> 赞同：0
> 
> 时间：2013-04-21T17:07:49.403
> 
> 标签：ios, xcode, nsuserdefaults, viewdidload

在我的应用程序的开始屏幕中，您可以通过单击英国或瑞典的国旗在英语和瑞典语之间选择语言。问题是当您单击按钮时 ViewDidLoad 无法识别 NSUserDefaults 中的更改。但是当您重新启动应用程序时，该语言是您单击的最新标志！所以它保存了 NSUserDefault 但它只在 ViewDidLoad 中第一次加载它。

当你点击英国国旗时，sprakval 设置为 0，如果你点击瑞典国旗，sprakval 设置为 1。当你点击一个旗帜时，它会变成一个在旗帜前面带有勾号图标的图像。

代码：

```
-(IBAction) sprakEN
 {
    sprakval=0;
    NSUserDefaults *sprakvalet = [NSUserDefaults standardUserDefaults];
    [sprakvalet setInteger:sprakval  forKey:@"Sprak "];
    [sprakvalet synchronize];

    [super viewDidLoad];
}

-(IBAction) sprakSE
 {
     sprakval=1;
     NSUserDefaults *sprakvalet = [NSUserDefaults standardUserDefaults];
     [sprakvalet setInteger:sprakval  forKey:@"Sprak "];
     [sprakvalet synchronize];

      [super viewDidLoad];
 }

  - (void)viewDidLoad
    {
        [super viewDidLoad];

        NSUserDefaults *sprakvalet = [NSUserDefaults standardUserDefaults];
        sprakval2  = [sprakvalet integerForKey:@"Sprak "];

        if (sprakval2==0)
        {
            spraklabel.text = [NSString stringWithFormat:@"Language:"];

            [lhb setTitle:@"english" forState:UIControlStateNormal];
            [hlb setTitle:@"english" forState:UIControlStateNormal];
            [fhb setTitle:@"english." forState:UIControlStateNormal];
            [blandatb setTitle:@"english.." forState:UIControlStateNormal];

            UIImage *encheck = [UIImage imageNamed:@"United_Kingdomchecked.png"];
            [enbutton setImage:encheck forState:UIControlStateNormal];

            UIImage *seuncheck = [UIImage imageNamed:@"Sweden.png"];
            [sebutton setImage:seuncheck forState:UIControlStateNormal];

            self.title = @"Game";
        }
        else if(sprakval2==1)
        {
            spraklabel.text = [NSString stringWithFormat:@"Språk:"];

            [lhb setTitle:@"swedish" forState:UIControlStateNormal];
            [hlb setTitle:@"swedish" forState:UIControlStateNormal];
            [flb setTitle:@"swedish" forState:UIControlStateNormal];
            [fhb setTitle:@"swedish" forState:UIControlStateNormal];
            [blandatb setTitle:@"swedish" forState:UIControlStateNormal];

            self.title = @"Spel";
            UIImage *secheck = [UIImage imageNamed:@"Swedenchecked.png"];
            [sebutton setImage:secheck forState:UIControlStateNormal];

            UIImage *enuncheck = [UIImage imageNamed:@"United_Kingdom.png"];
            [enbutton setImage:enuncheck forState:UIControlStateNormal];
        }

    // Do any additional setup after loading the view, typically from a nib.
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:08:14.877

viewDidLoad 是从 nib 文件加载视图后调用的方法。您不应该手动调用它。

如果您已编写代码以刷新 viewDidLoad 中的控件，请将其移至不同的方法并从您的按钮事件处理程序中调用该方法。

```
- (void)adjustControlsForLanguage
{
    NSUserDefaults *sprakvalet = [NSUserDefaults standardUserDefaults];
    sprakval2  = [sprakvalet integerForKey:@"Sprak "];

    if (sprakval2==0)
    {
        spraklabel.text = [NSString stringWithFormat:@"Language:"];

        [lhb setTitle:@"english" forState:UIControlStateNormal];
        [hlb setTitle:@"english" forState:UIControlStateNormal];
        [fhb setTitle:@"english." forState:UIControlStateNormal];
        [blandatb setTitle:@"english.." forState:UIControlStateNormal];

        UIImage *encheck = [UIImage imageNamed:@"United_Kingdomchecked.png"];
        [enbutton setImage:encheck forState:UIControlStateNormal];

        UIImage *seuncheck = [UIImage imageNamed:@"Sweden.png"];
        [sebutton setImage:seuncheck forState:UIControlStateNormal];

        self.title = @"Game";
    }
    else if(sprakval2==1)
    {
        spraklabel.text = [NSString stringWithFormat:@"Språk:"];

        [lhb setTitle:@"swedish" forState:UIControlStateNormal];
        [hlb setTitle:@"swedish" forState:UIControlStateNormal];
        [flb setTitle:@"swedish" forState:UIControlStateNormal];
        [fhb setTitle:@"swedish" forState:UIControlStateNormal];
        [blandatb setTitle:@"swedish" forState:UIControlStateNormal];

        self.title = @"Spel";
        UIImage *secheck = [UIImage imageNamed:@"Swedenchecked.png"];
        [sebutton setImage:secheck forState:UIControlStateNormal];

        UIImage *enuncheck = [UIImage imageNamed:@"United_Kingdom.png"];
        [enbutton setImage:enuncheck forState:UIControlStateNormal];
    }

} 
```

viewDidLoad

```
- (void)viewDidLoad{
    [super viewDidLoad];
    [self adjustControlsForLanguage];
} 
```

按钮事件处理程序

```
-(IBAction) sprakEN {
    sprakval=0;
    NSUserDefaults *sprakvalet = [NSUserDefaults standardUserDefaults];
    [sprakvalet setInteger:sprakval  forKey:@"Sprak "];
    [sprakvalet synchronize];

    [self adjustControlsForLanguage];
}

-(IBAction) sprakSE {
     sprakval=1;
     NSUserDefaults *sprakvalet = [NSUserDefaults standardUserDefaults];
     [sprakvalet setInteger:sprakval  forKey:@"Sprak "];
     [sprakvalet synchronize];

      [self adjustControlsForLanguage];
 } 
```

编辑：由于您使用的是基于 tabBar 的应用程序，因此最好使用 viewWillAppear 重新加载特定于语言的控件

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self adjustControlsForLanguage];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:13:13.647

这是因为您正在通过其超类 in`-(IBAction) sprakSE` 和方法调用 ViewDidload`-(IBAction) sprakEN` 方法。因此，在这两种方法中都替换 `[super viewDidLoad];`为 `[self viewDidLoad];`。它会正常工作。

希望它可以帮助你。

# objective-c - 按字母顺序排列的多维数组（obj c）

> ID：16133870
> 
> 赞同：0
> 
> 时间：2013-04-21T17:07:57.893
> 
> 标签：objective-c, xcode, multidimensional-array, sorting

我有一个数组，其中包含多个其他数组，每个数组中都有两个字符串。我想根据子数组中的第一个字符串按字母顺序对父数组中的项目进行排序。我该怎么做？

父数组--- childArray1 (bString, string) childArray2 (dString, string) childArray3 (cString, string) childArray4 (aString, string)

改为 --> childArray4 (aString, string) childArray1 (bString, string) childArray3 (cString, string) childArray2 (dString, string)

所以每个子数组中的第一个字符串决定了子数组在父数组中的索引

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:16:20.647

最简单的解决方案是没有多维数组，而是使用自定义对象作为值，使用`compare:`方法，例如

```
@interface MyObject : NSObject

@property (nonatomic, strong, readwrite) NSString* firstString;
@property (nonatomic, strong, readwrite) NSString* secondString;

- (NSComparisonResult)compare:(MyObject*)object;

@end 
```

```
@implementation MyObject

- (NSComparisonResult)compare:(MyObject*)object {
   return [self.firstString compare:object.firstString];
}

@end 
```

然后使用以下方法对数组进行排序：

```
NSArray* sortedObjects = [array sortedArrayUsingSelector:@selector(compare:)]; 
```

如果你想坚持你的实施，那么

```
NSArray* sortedObjects = [array sortedArrayUsingComparator:^(id obj1, id obj2) {
   NSString* string1 = [obj1 objectAtIndex:0];
   NSString* string2 = [obj2 objectAtIndex:0];

   return [string1 compare:string2];
}]; 
```

# git - Windows上的git重命名问题

> ID：16133871
> 
> 赞同：3
> 
> 时间：2013-04-21T17:08:13.817
> 
> 标签：git, rename

我将目录从`tools`to重命名`Tools`并提交。在此之后，我的遥控器中有两个目录。所以由于某种原因 git 没有删除 tools 目录。如何防止这种情况或解决当前问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:00:33.847

您在没有通知 git 的情况下重命名了一个目录，因此 git 将您的`Tools`目录视为一个全新的目录并将其添加到版本控制中。

*   要解决此问题，您可以要求 git 删除名为的旧目录`tools`：

    ```
    git rm -r tools
    git commit 
    ```

*   另一种方法是`git add -u`检查工作目录的当前状态并更新暂存区域以反映此状态。因此 git 会意识到任何在其背后被删除的目录。

    ```
    # From the root of your repo
    git add -u .
    git commit 
    ```

*   并且对于将来，使用`git mv`来执行重命名，而不是直接在 Shell 或命令提示符下执行重命名。尽管 git 足够聪明，可以在发现删除和添加之间存在显着相似之处时跟踪移动，但我更喜欢明确地通知 git 移动操作。

    ```
    git mv tools Tools
    git commit 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:50:28.917

如果：

*   你没有做任何其他的提交
*   没有其他人克隆或从您的远程仓库中提取

我建议你：

*   重置为上一个提交（其中包含工具），`git reset --hard HEAD^`（确保您没有任何正在进行的工作，或先将其隐藏）
*   正确重命名您的目录：`git mv tools Tools`
*   强制推动：`git push --force`

# performance - 使用 Towers of Henoi 解决方案的意外性能数字

> ID：16133873
> 
> 赞同：1
> 
> 时间：2013-04-21T17:08:29.207
> 
> 标签：performance, programming-languages, ubuntu-12.04, execution-time, towers-of-hanoi

这是一个性能难题：我在一个`Intel Celeron 1.8GHz, 3GB RAM, Ubuntu 12.04 32-bit`盒子上跑步。我在, &中编写了`Towers of Henoi`递归解决方案。我跑了同样的路，震惊地看到以下时间：`C``Python``Java``n = 25`

![业绩数字](https://i.stack.imgur.com/uDXK4.png)

我认为它的`Java`性能会比这个盒子好，`Python`但看起来`Java`比这个盒子慢几个数量级。为了中和任何代码级别的性能影响，我将代码保留为最基本的形式。以下是3个解决方案：`C``Python`

**henoi.c**

```
#include <stdio.h>

void move(int n, char src, char intr, char dest) {
    if (n > 0) {
        move(n-1, src, dest, intr);
        printf("%c -> %c\n", src, dest);
        move(n-1, intr, src, dest);
     }
}

int main() {
    move(25, 'A', 'B', 'C');
    return 0;
} 
```

**henoi.py**

```
def move(n, src, intr, dest):
    if n > 0:
        move(n-1, src, dest, intr)
        print '%s -> %s' % (src, dest)
        move(n-1, intr, src, dest)

move(n=25, src='A', intr='B', dest='C') 
```

**Henoi.java**

```
public class Henoi {

    static void move(int n, char src, char intr, char dest) {
        if (n > 0) {
            move(n-1, src, dest, intr);
            System.out.println(src + " -> " + dest);
            move(n-1, intr, src, dest);
        }
    }

    public static void main(String[] args) {
        move(25, 'A', 'B', 'C');
    }
} 
```

我正在使用`gcc version 4.6.3`,`Python 2.7.3`和`Sun Java 1.6.0_24`.

有人可以帮我理解上面的数字吗？？？

**勘误：** *很久以后我才注意到我到处都将“Hanoi”拼写为“Henoi”。对不起 ！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:52:32.480

您几乎是在专门对标准输出流的性能进行基准测试。Java 尝试尽快将所有内容刷新到标准输出。因此，通过一些额外的缓冲，我将运行时间缩短到 10 秒：

```
public class Henoi {

    static final PrintStream bout = new PrintStream(
                      new BufferedOutputStream( System.out ) );

    static void move(int n, char src, char intr, char dest) {
        if (n > 0) {
            move(n-1, src, dest, intr);
            bout.println(src + " -> " + dest);
            move(n-1, intr, src, dest);
        }
    }

    public static void main(String[] args) {
        move(25, 'A', 'B', 'C');
        bout.flush();
    }
} 
```

您现在需要在程序退出之前刷新缓冲区以确保所有内容都已写入。

使这个 Java 程序变慢的另一个方面是，您为每一行创建新的 String 对象，当您已经在 C 中使用 8 位字符时，还需要将这些对象从 16 位字符转换为 8 位字节。当您避免这种情况时，您会得到性能再提升 10 倍。

```
public class Henoi {

    static final byte[] barr = "x -> y\n".getBytes();
    static final OutputStream bout = new BufferedOutputStream( System.out );
    static void move(int n, char src, char intr, char dest) throws IOException {
        if (n > 0) {
            move(n-1, src, dest, intr);
            barr[ 0 ] = (byte) src;
            barr[ 5 ] = (byte) dest;
            bout.write( barr, 0, barr.length );
            // System.out.println(src + " -> " + dest);
            move(n-1, intr, src, dest);
        }
    }

    public static void main(String[] args) {
        try {
            move(25, 'A', 'B', 'C');
            bout.flush();
        } catch( IOException ex ) {
            ex.printStackTrace();
        }
    }
} 
```

它现在在我的 PC 上完成 920 毫秒（写入 RAM 磁盘），我猜再多一点 tunig（仍然有很多冗余字节数组复制）它可以在不到一半的时间内完成。相比之下，您的原始代码在相同环境（i7 4.5GHz、Windows 7 x64、Java 1.7）中几乎只用了 2 分钟。使用 Visual C++ 2010 x64 和 /Ox（所有优化）编译的未更改 C 版本需要 6.650 秒。

**编辑**：这是具有类似更改的 C 版本，现在需要 950 毫秒才能运行：

```
#include <stdio.h>

char *str;

void move(int n, char src, char intr, char dest) {
    if (n > 0) {
        move(n-1, src, dest, intr);
        str[ 0 ] = src;
        str[ 5 ] = dest;
        _fwrite_nolock( str, 7, 1, stdout );
        // printf("%c -> %c\n", src, dest);
        move(n-1, intr, src, dest);
     }
}

int main() {
    char mem[] = "x -> 5\n";
    str = mem;
    setvbuf( stdout, NULL, _IOFBF, 8192 );
    _setmode( 1 /* stdout */, 0x8000 /* _O_BINARY */ );
    move(25, 'A', 'B', 'C');
    _fflush_nolock( stdout );
    return 0;
} 
```

该`_setmode()`调用避免了在 Windows ( `\n`-> `\r\n`) 上应用的换行转换，从而导致更大的输出。`_fwrite_nolock`与此扫描中的相同`fwrite`但没有锁定，并且速度大约是其两倍。

# content-management-system - MIGS 虚拟支付客户端 - 交易被拒绝

> ID：16133879
> 
> 赞同：0
> 
> 时间：2013-04-21T17:08:55.830
> 
> 标签：content-management-system, e-commerce, payment-gateway

我正在测试帐户上测试 MIGS 虚拟支付客户端。当我选择付款时，我会被定向到付款服务器页面，我可以在其中选择 Visa 和 MasterCard。我在 MIGS 手册中获得了以下测试数据：

![测试卡](https://i.stack.imgur.com/0e3DJ.png)

我使用 123 作为 CSC 值。但是，交易总是失败

```
vpc_VerStatus=E
vpc_TxnResponseCode=2
vpc_Message=Declined  //for Visa
vpc_Message=The+card+holder+was+not+authorised.+This+is+used+in+3-D+Secure+Authentication. //for MasterCard 
```

顺便说一句，如果我选择万事达卡，系统会提示我“请输入您的 OSID 或您的 NAB ID 的最后 5 位数字”和信用额度。我分别使用值为 123456 和 Credit Limit 10000 的 OSID。（这些是我自己输入的值，因为我没有得到在那里输入的信息）。

我查看了这个[联邦银行和 MIGS 虚拟支付客户端错误代码](https://stackoverflow.com/questions/14496014/commonwealth-bank-and-migs-virtual-payment-client-error-code)，但它并没有解决我的问题。

为什么交易被拒绝有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-05T07:32:11.387

好的，这里有一些你需要了解/检查的东西。

**1\. 确保交易价值以 $xyz.00 结尾，否则将始终拒绝**
MIGS 在 TEST 和 PROD 中的行为不同。在 TEST 中，MIGS 使用测试交易的“美分”部分来确定要返回的响应代码，而不是您是否正确地为交易提供了必要的数据。这些美分值如下：

> $ XXX.00 返回“0 交易已批准”
> $ XXX.10 返回“1 交易无法处理”
> $ XXX.05 返回“2 交易被拒绝 - 联系发卡行”
> $ XXX.68 返回“3 处理主机没有回复”
> $ XXX.33 返回“4 Card has expired”
> $ XXX.51 返回“5 Insufficient credit”

**2\. 禁用 3-D 安全**
看起来您也被 3DSECURE（也称为“Visa 验证”和“万事达卡安全代码”）抓住了。致电您的收单行/银行并要求他们在 TEST 和 Prod 中禁用此功能。为什么？当它上线时，您的客户总是会看到一个他们没想到的屏幕，要求您提供更多信息，然后拿起电话并要求您“修复它”，或者（更糟糕的是）离开您的商店认为这是欺诈行为。

由于 3-D Secure 的使用率如此之低，即使是大多数银行支持人员也不知道。就在今天，我的一位客户就这个“问题”给我打电话。他们的一位客户打电话给他们的发卡机构，询问这个“Visa 验证”屏幕是什么。该银行（一家澳大利亚主要银行）很有帮助地告诉他们这可能是欺诈行为，并且不要从该网站购买任何东西。

3-D 安全在澳大利亚的渗透率如此之低，我建议启用它的唯一结果是减少销售。不要使用它。

# java - MessageDigest NoSuchAlgorithmException

> ID：16133881
> 
> 赞同：4
> 
> 时间：2013-04-21T17:08:58.570
> 
> 标签：java

我想用来`MessageDigest`获取 MD5 哈希，但我得到一个错误。

```
import java.security.MessageDigest;

public class dn {
  public static void main(String[] args) {
    MessageDigest md = MessageDigest.getInstance("MD5");
  }
} 
```

错误：

> ```
> Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
> Unhandled exception type NoSuchAlgorithmException 
> ```

错误指的是
*NoSuchAlgorithmException - 如果指定算法的 MessageDigestSpi 实现不能从指定的提供程序获得。*
在此站点[http://docs.oracle.com/javase/6/docs/api/java/security/MessageDigest.html上](http://docs.oracle.com/javase/6/docs/api/java/security/MessageDigest.html)*找到*getInstance

 *我已经重新安装了最新的 java jdk1.7.0_21 和不同版本的 eclipse，但错误仍然存​​在。其他一切在 Eclipse 上运行良好。

我不知道我还能做什么。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-21T17:11:06.780

错误消息很清楚：代码*无法编译*（*未解决的编译问题*），因为您没有处理`NoSuchAlgorithmException`可以由`MessageDigest.getInstance()`.

要么将此异常添加到 main 方法的 throws 子句，要么捕获它：

```
public static void main(String[] args) throws NoSuchAlgorithmException {
    ...
}

or

public static void main(String[] args) {
    try {
        ...
    }
    catch (NoSuchAlgorithmException e) {
        System.err.println("I'm sorry, but MD5 is not a valid message digest algorithm");
    }
} 
```

请注意，这是一个*编译*错误。尽管存在编译错误（在 Eclipse 的“问题”视图中可见），并且尽管 Eclipse 在启动程序之前警告了您这一点，但您还是选择了启动您的程序。因此，您尝试执行不应该编译的代码。

编辑：修复 NoSuchAlgorithmException 代码中的错字

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T17:34:55.167

除了这里的其他答案

某些算法不适用于某些算法`JVM`

要使其成为真正可移植的应用程序，您应该这样做

```
public boolean isMDAvailable(String s)
{
    boolean success=true;
    try{MessageDigest.GetInstance(s);}
    catch(NoSuchAlgorithmException x)
    {
         success=false;
    }
    return success;
} 
```

现在您可以使用此方法获得任何可用的 MD 算法

```
public MessageDigest getAvailableMessageDigest()
{
    if(isMDAvailable("MD5")==true)return MessageDigest.GetInstance("MD5");
    else if(isMDAvailable("MD2")==true)return MessageDigest.GetInstance("MD2");
    else if(isMDAvailable("SHA-512")==true)return MessageDigest.GetInstance("SHA-512");
    else return null;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T17:13:10.057

您应该处理异常：

```
try {

   MessageDigest md = MessageDigest.getInstance("MD5");
   //...

} catch(NoSuchAlgorithmException x) {
  // do proper exception handling
} 
```*

# php - PHP 最强单向加密/散列方法

> ID：16133884
> 
> 赞同：4
> 
> 时间：2013-04-21T17:09:15.003
> 
> 标签：php, passwords, password-hash

我有一个人们可以注册的网站，我需要加密他们的密码。我已经对其进行了研究，但我找不到任何不会被现代 GPU 的强大功能击败的方法。

所以我来找 StackOverflow 的好人问，什么是最强大的加密方法，我已尽我所能阻止人们接触数据库，但我想尽可能确定他们的数据会是如果数据库以某种方式被盗，那很好。

我想知道的其他事情是，以某种方式随机化密码中的字符会更安全吗？

**编辑：** 我使用了 Andrew Moore 的 bcrypt 实现（[How do you use bcrypt for hashing passwords in PHP?](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)）并提出了这个：

```
public static function Encrypt($Str,$Salt)
{
    $bcrypt = new \bcrypt();
    return $bcrypt->hash(SERVER_SALT . md5($Str) . $Salt);
} 
```

如果有人看到它有任何问题或任何弱点，请告诉我。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-21T17:14:10.670

对于密码，您无法击败`bcrypt`. 这是关于 SO 的链接：[How do you use bcrypt for hashing passwords in PHP?](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php) . 它的主要优点是：它*本质上很慢*（而且安全）。虽然普通用户会使用*一次*，并且不会理解十分之一秒和百万分之一秒之间的差异，但破解者会发现，他现在需要*12 个世纪*而不是在四天内找到密码（除了强制 Blowfish每秒一百万次尝试不需要四天：除非实施错误和尚未预见到的加密突破，[否则宇宙的热寂仍将首先出现](https://stackoverflow.com/questions/5556316/breaking-224-bit-blowfish-encryption)）。

对于数据，我会依赖数据库引擎本身；MySQL 支持 AES，这非常好。是的，只要有足够多的 GPU 就可以击败它，而且由于要在本世纪内破解代码需要大约 40 亿个 GPU，他可能也会得到一个不错的数量折扣。但我不会担心。

至于密码的“随机化”，没有任何意义。如果有人使用暴力破解您的密码，他将有相同的概率找到随机序列或非随机序列。如果要使用*字典攻击*可能会有所帮助（即，不要尝试从 AAAAA 到 ZZZZZ 的所有内容，而是尝试 ABRAHAM、ACCORDION ……直到 ZYGOTE）。但即便如此，对服务器的攻击也不会改变任何事情（服务器接收到非随机密码！），对存储哈希的攻击最好通过*salting*无效，这`bcrypt`自动执行：即，存储 $76XJ:MICKEYMOUSE 的散列而不是 MICKEYMOUSE 的散列，以及处理输入时额外的 '$76XJ:' 所需的开销。虽然必须修复随机化，但“$76XJ:”序列*在**每次写入时都完全不同*——祝你好运！

 *## 盐

如果您自己实现加盐（如上所示，`bcrypt`您不需要），您可以通过生成唯一的随机序列并将其存储在密码字段或第二个字段中来实现。例如

```
user    password
alice   d9c06f88:6c14d6d313d7cbcb132b5c63650682c4 
```

然后，在 Alice（“mickeymouse”）收到密码后，您将在数据库中查看是否`alice`存在被调用的用户。如果是，请恢复盐（此处`d9c06f88`）和哈希。如果没有，设置一个“BAD”标志并获取一个固定的盐和散列（例如`12345678:0000000...`）。

在 MySQL 中，这可以使用 UNION 来完成：

```
SELECT password_fields FROM users WHERE user=? AND hash=?
UNION SELECT
    '12345789' as salt,
    'ffffffffffffffffffffffff' as hash,
    'fake' as user
LIMIT 1; 
```

将在大致相同的时间内检索正确的数据或不正确的集合（这可以防止有人通过计时回答“错误的用户或密码”所需的时间来猜测哪些名称存在，哪些不存在）。

然后将盐和密码连接起来，生成`d9c06f88:mickeymouse`. 如果不匹配，*或者*设置了“BAD”标志，则拒绝密码（而不是使用“bad”标志，您可以重复 MySQL 已经进行的用户匹配测试：您可以通过替换最后一个字符无效，以确保它永远不会匹配真实用户）。

## 通过非信息实现安全

选择固定字符串的附加扭曲很有用，因为您希望“用户不存在”、“用户存在但密码不正确”和“用户存在且密码正确”这三种情况相同（相同复杂性，相同计算费用）尽可能。

这样，攻击者就不太可能知道发生了什么：用户不正确吗？密码错了吗？等等。如果时间足够不同（比如两次查询有效用户，一次查询无效用户），一个小心翼翼、时间和好的秒表的攻击者可以统计确定给定用户名是否存在。

在用户的情况下，即使名称比较也会

```
 johnsmith     against   johnsmith            if johnsmith exists
 johnsmith     against   johnsmit?            if johnsmith does not exist 
```

所以从 HTTP(s) 连接的另一端说出发生了什么并不容易。

出于同样的原因，您**不会**为“Bad user”和“Bad password”返回两个不同的错误，而始终是“Bad user or password”；对于用户来说，也许可以选择在他/她的注册电子邮件中接收电子邮件，以提醒他/她的用户名。当然，您希望系统在向同一用户发送类似电子邮件后的 24 小时内*不发送此类电子邮件，以防止系统被利用以虚假的“恢复电子邮件”骚扰某人。*

如果您*确实*发送了电子邮件，您将等到预设时间到期（例如 3 秒），然后通知用户*如果*存在用户名，*那么*他们应该检查他们的收件箱（以及垃圾邮件文件夹以防万一）。

## 这样的密码本来是有时间的

提高服务器安全性以防止暴力破解的一种便捷方法是*延迟*密码身份验证，并且可能（如果您真的很偏执）在某些 X 次错误尝试后进行验证码锁定。

您不希望第一次尝试验证码，因为用户对验证码的看法很模糊。

延迟锁定通常使用`sleep`（或等效）或使用“锁定直到管理员手动重置”策略来实现。**两种方法都不好**。锁定功能可用于创建拒绝服务攻击，方法是锁定用户，或创建大量以“密码验证延迟”状态停止的服务器线程（它们不会使用 CPU，但*仍会*使用内存，套接字和其他资源）。

在某些情况下，这可能会在不知不觉中发生。似乎有些白痴在使用我的银行，每隔几个月我就会收到一条短信，上面写着“在您的家庭银行系统中输入了错误的 PIN”。然后我必须从我的手机登录，以重置不成功尝试计数器；因为如果这个白痴没有意识到他因为输入*了我的帐号而无法进入**他的*帐户，那么三次，*我*的帐户就会被锁定，我必须亲自去银行请求他们重置我的帐户使用权。我告诉你，这是冥域的一*大*痛点，即使知道这不是他们的错，我*仍然*对我的银行感到不满。你不想在你的用户中产生这样的感觉。

 ***最好将负担转移到客户身上：

```
(very pseudo code)
login = FAIL
if in SECURITY LOCKOUT MODE for this account
    if a session is open and contains a last-attempt time
        if at least DELAY seconds have elapsed since last-attempt
            check the password
            if it is correct
                login = OK
                zero password counter, exit lockout mode.
                # An "innocent" user enters with no lockout! Yay!
            end
        else
            # "Early knocker". Either a bruteforcing robot
            # or a too clever user in a hurry. But we can't
            # tell them apart.
        end
    else
        # No session. Either a sessionless bruteforcing robot
        # or a unaware, innocent user. Again we can't tell them
        # apart. So we bounce both.

        # But a genuine user will assume he has mistyped the password,
        # or anyway will read the warning page, and will login after ONE
        # round of delay.

        # Users with password saved in browser will just click
        # "login" again and be logged in.

        # A robot will find itself delayed and ALL ITS PASSWORDS IGNORED
        # every single time. Even if it finds the right password... it will
        # not work.
    end
else
    check the password
    if it is correct
        # Good user, first attempt, fast login.
        login = OK
    else
        # Beginning to doubt this is a good user...
        increase password counter
        if it is > MAX_ATTEMPTS
            enter SECURITY LOCKOUT MODE for this account
        end
    end
end
if login is not OK
    generate a page with HTTP_REFRESH time of DELAY+1 seconds
    and a session ID, saying "User or password unknown,
    or you tried to login before HH:MM:SS (DELAY seconds).
    The page might also contain a Javascript timer, just in
    case. The delay is 1s more than necessary as a safety
    margin.
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:14:04.117

AES 256 位加密非常“强大”，这意味着它是难以破解的最新加密标准之一。我已经读到，如果您采用蛮力方法来破解它，您将需要世界上所有的计算能力。

查看：

[如何在 PHP 中进行 AES256 解密？](https://stackoverflow.com/questions/1628138/how-to-do-aes256-decryption-in-php)

和：

[http://en.wikipedia.org/wiki/Advanced_Encryption_Standard](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard) [http://www.andrew-kirkpatrick.com/2013/01/aes-encryption-with-php-256-bit-using-iv/](http://www.andrew-kirkpatrick.com/2013/01/aes-encryption-with-php-256-bit-using-iv/)

希望有帮助。****

# php - 在三元条件php中用逗号保存数组

> ID：16133890
> 
> 赞同：0
> 
> 时间：2013-04-21T17:10:06.010
> 
> 标签：php, arrays

我有一个数组

```
$this->input->post("first_array")={ one two three } 
```

我需要创建一个数组来保存几个这样的数组

所以我正在做一个'fisrt_array'来保存数组，首先验证它确实是一个数组，然后如果它没有设置我放一个'未定义'字符串

```
array(
'fisrt_array' => is_array($this->input->post("first_array")) ? implode(' ',$this->input->post("first_array"))   : 'Not defined'
); 
```

因此，如果已设置，我会内爆保存在 $this->input->post("first_array") 中的数组

一切都是正确的，但我将结果存储为**一二三** 而不是**一、二、三**

我怎样才能以这种格式保存数组？

如果我这样做，`implode(',',$this->input->post("first_array")`我会存储**一、二、三，**最后一个不需要逗号..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T17:14:41.280

`implode(',',$this->input->post("first_array")`不应在最后一个元素后添加逗号。

这应该适合你。话虽如此，您正在以一种奇怪的方式声明您的数组。

利用`$this->input->post['First_Array'] = array('One', 'Two', 'Three');`

编辑：另外，只需重新阅读 OP。如果您只想将数组添加到另一个数组（在 PHP 中，我们将数组数组称为“多维数组”），只需执行以下操作：

`second_array[] = $this->input->post['First_Array'];`

# c - 使用 char 和 int 访问内存映射寄存器的区别

> ID：16133891
> 
> 赞同：4
> 
> 时间：2013-04-21T17:10:08.217
> 
> 标签：c, embedded

我一直在阅读有关访问外围设备的内存映射寄存器的信息，看来您可以采取多种方式。例如：

方法一：

```
#define MyReg 0x30610000

volatile int *ptrMyReg;
ptrMyReg = (volatile int *) MyReg;
*ptrMyReg = 0x7FFFFFFF; /* Turn  ON all bits */ 
```

方法二：

```
#define MyReg 0x30610000

volatile unsigned char *ptrMyReg;
ptrMyReg = (volatile unsigned char *) MyReg;
*ptrMyReg = 0x7FFFFFFF; /* Turn  ON all bits */ 
```

问题：是否有任何具体原因说明为什么要选择一个而不是另一个？

假设：架构上的 int 大小为 4 个字节。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T17:20:29.830

`*ptrMyReg = 0x7FFFFFFF;`

在第二种情况下，`*ptrMyReg`is 类型`unsigned char`so`0x7FFFFFFF`将在赋值之前转换为`unsigned char`（即转换后的值将是`0xFF`），并且只写入一个字节。如果您最初打算写 4 个字节，我认为这不是您想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T17:14:22.367

好吧，第二个示例不是有效代码，因为您的类型转换不匹配。如果您将其修复为：

```
ptrMyReg = (volatile unsigned char *)MyReg; 
```

那么，是的，它们是不同的。在第二种情况下，该常量会被截断，并且您将仅写入`0xFF`at 字的最高或最低有效字节`0x30610000`，具体取决于字节序。无论如何，`0x30610000`将写入的是单个字节，而不是其他字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T19:50:22.663

CPU 体系结构可能要求对外围寄存器的所有访问为例如 32 位宽。如果是这样，进行字节访问可能会导致 CPU 异常或静默错误执行。许多 ARM SoC 就是这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T06:49:10.507

In method 2, you aren't going to access the entire `int` by dereferencing a pointer to `char` (unless, of course, `sizeof(int)`=1 on your platform).

Other than that, you should look at your hardware. It may behave differently when accessed using memory operands of different sizes.

# c# - 使用 C# 插入 Access 数据库

> ID：16133892
> 
> 赞同：0
> 
> 时间：2013-04-21T17:10:12.590
> 
> 标签：c#, ms-access

```
private void btnSubmit_Click(object sender, EventArgs e)
        {
            OleDbCommand cmd;

            string cmdstring = "INSERT INTO Names (Surname,FName) VALUES('" + txtSurname.Text + "','" + txtFName.Text + "')";

            OleDbConnection myConnection = new OleDbConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);

            cmd = new OleDbCommand(cmdstring, myConnection);
            myConnection.Open();
            cmd.ExecuteNonQuery();
            myConnection.Close();
} 
```

我想添加`Surname`和`FName`访问数据库，但是出现了这样的错误`"syntax error"`。我不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T17:53:30.350

以下是您的查询失败的两个可能原因。

1.  `Names`是一个[保留字](http://allenbrowne.com/AppIssueBadWord.html#N)。
2.  `Surname`或`FName`包含撇号的值。

您可以通过将表名括在方括号中来避免第一个问题 ... `[Names]`。但如果可能的话，最好选择一个不同的名称。

如果按照其他人的建议切换到参数查询，则可以避免第二个问题。但在这种情况下，仍将表名括起来。

# maven - 如何在 RAD 8.5.1 中安装 Maven？

> ID：16133894
> 
> 赞同：5
> 
> 时间：2013-04-21T17:10:20.303
> 
> 标签：maven, rad

**无法使用更新站点在 RAD 8.5.1 中安装 Maven。**

无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：m2e - Eclipse 的 Maven 集成 1.0.0.20110607-2117 (org.eclipse.m2e.feature.feature.group 1.0.0.20110607-2117) 缺少要求：m2e Marketplace 1.0.0.20110607-2117 (org.eclipse.m2e.发现 1.0.0.20110607-2117) 需要 'bundle org.eclipse.equinox.p2.operations 0.0.0' 但找不到无法满足依赖关系：来自：m2e - Eclipse 1.0.0.20110607-2117 的 Maven 集成 (org.eclipse .m2e.feature.feature.group 1.0.0.20110607-2117）至：org.eclipse.m2e.discovery [1.0.0.20110607-2117]

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-05T19:12:10.063

我花了一些功夫才弄清楚这一点，所以这里有一个扩展的答案：

*   在 IBM Installation Manager 中，单击“修改”。
*   查找包含**IBM Rational Application Developer for WebSphere Software 8.5的 IBM Software Delivery Platform**
*   点击“下一步”进入语言页面
*   点击“下一步”进入特征选择页面
*   Maven 列在**IBM Rational Application Developer for WebSphere** -> **Collaborative development and build tools**
*   单击“下一步”，然后单击“修改”，让安装管理器完成它的工作。

# opengl - 编译 glsl 着色器时遇到问题，#version 必须首先出现错误

> ID：16133896
> 
> 赞同：0
> 
> 时间：2013-04-21T17:10:29.890
> 
> 标签：opengl, glsl

我正在关注[WikiBooks OpenGL 教程 #2](http://en.wikibooks.org/wiki/OpenGL_Programming/Modern_OpenGL_Tutorial_02)

我无法编译我的着色器，它说#version 必须首先发生。

这是 main.cpp 代码：[https ://gitorious.org/wikibooks-opengl/modern-tutorials/blobs/master/tut02_clean/triangle.cpp](https://gitorious.org/wikibooks-opengl/modern-tutorials/blobs/master/tut02_clean/triangle.cpp)

这是着色器实用程序代码：[https ://gitorious.org/wikibooks-opengl/modern-tutorials/blobs/master/common/shader_utils.cpp](https://gitorious.org/wikibooks-opengl/modern-tutorials/blobs/master/common/shader_utils.cpp)

这是导致错误的顶点着色器：[https ://gitorious.org/wikibooks-opengl/modern-tutorials/blobs/master/tut02_clean/triangle.v.glsl](https://gitorious.org/wikibooks-opengl/modern-tutorials/blobs/master/tut02_clean/triangle.v.glsl)

我似乎无法弄清楚为什么会出现此错误，因为在着色器中#version*是*第一个。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-21T18:48:12.800

您确定在读取和创建着色器时会出现错误吗？我问是因为您在 main.cpp 中有错误。您设置`compile_ok`为`GL_FALSE`，然后不再分配给它，然后检查它并退出，如果它是`GL_FALSE`. 因此，您可以保证始终退出并打印“片段着色器中的错误”。

# python - 模未正确处理

> ID：16133897
> 
> 赞同：0
> 
> 时间：2013-04-21T17:10:35.580
> 
> 标签：python, python-2.7

我似乎无法确保 python 模函数正常工作，我尝试了各种数字，但似乎无法得到正确的除法。

国际标准书号

```
print """
Welcome to the ISBN checker,

To use this program you will enter a 10 digit number to be converted to an International Standard Book Number

"""

ISBNNo = raw_input("please enter a ten digit number of choice") 

counter = 11 #Set the counter to 11 as we multiply by 11 first
acc = 0 #Set the accumulator to 0 
```

开始循环，将字符串中的每个数字乘以递减计数器我们需要将数字视为字符串以获得每个位置

```
for i in ISBNNo: 
    print str(i) + " * " + str(counter)
    acc = acc + (int(i) * counter) #cast value a integer and multiply by counter
    counter -= 1 #decrement counter
print "Total = " + str(acc) 
```

Mod除以11（除以余数

```
acc = acc % 11
print "Mod by 11 = " + str(acc) 
```

从 11 开始

```
acc = 11 - acc
print "subtract the remainder from 9 = " + str(acc) 
```

与字符串连接

```
ISBNNo = ISBNNo + str(acc)
print "ISBN Number including check digit is: " + ISBNNo 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:26:04.260

您的代码大部分是正确的，除了一些问题：

1）如果是 ISBN，您正在尝试计算校验和（最后一位）。这意味着您应该只考虑 9 位数字：

```
ISBNNo = raw_input("please enter a ten digit number of choice") 
assert len(ISBNNo) == 10, "ten digit ISBN number is expected"
# ...
for i in ISBNNo[0:9]: # iterate only over positions 0..9 
    # ... 
```

2）这里也应该有一个特殊情况：

```
ISBNNo = ISBNNo + str(acc)
print "ISBN Number including check digit is: " + ISBNNo 
```

您正在做模 11，因此 acc 可以等于 10。ISBN 要求在这种情况下应将“X”用作最后一个“数字”，可以写成：

```
ISBNNo = ISBNNo + (str(acc) if acc < 10 else 'X') 
```

这是固定代码，带有[来自维基百科的示例编号](http://en.wikipedia.org/wiki/International_Standard_Book_Number#ISBN-10_check_digit_calculation)：http : [//ideone.com/DaWl6y](http://ideone.com/DaWl6y)

* * *

回应评论

```
>>> 255 // 11               # Floor division (rounded down)
23
>>> 255 - (255//11)*11      # Remainder (manually)
2
>>> 255 % 11                # Remainder (operator %)
2 
```

*（注意：我使用`//`which 代表地板除法。在 Python 2 中，您也可以简单地使用，`/`因为您正在除整数。在 Python 3 中，`/`始终是真正的除法并且`//`是地板除法。）*

# javascript - 单击 jQuery 手风琴时激活 javascript 函数

> ID：16133898
> 
> 赞同：1
> 
> 时间：2013-04-21T17:10:36.883
> 
> 标签：javascript, jquery, accordion

我在 jQuery 中有一个手风琴。

```
$( "#accordion1" ).accordion(); 
```

定义为：

```
<div id="accordion">
  <h3>Section 1</h3>
  <div>
    <p>
    hello,
  </div>

  <h3>Section 2</h3>
  <div>
    <p>
    World
    </p>
  </div>
</div> 
```

当用户单击负责第 2 节的 H3 时，是否有激活 javascript 功能？由于它不是链接或按钮，我对如何执行此操作感到有些困惑。问题是用户正在一个窗口中工作，并且将转到另一个窗口查看更新，因此我需要通过调用 js 函数来更新该部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:17:36.670

您可以使用 eq() 函数作为选择器：

```
$("#accordion h3:eq(1)").on("click", function() {
     // Something here
}); 
```

[您可以在此处](http://api.jquery.com/eq/)找到有关 eq() 函数的有用信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:12:55.833

你的意思是这样的：

```
$("#accordion h3:eq(1)") 
```

或者您可以在相关标题中添加一个 ID 并使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T17:13:09.533

尝试这个：

```
$('#accordion h3:eq(1)').click(function() {
    // Your function here
}); 
```

# java - JNI将treemap从java传递给c

> ID：16133902
> 
> 赞同：1
> 
> 时间：2013-04-21T17:11:34.107
> 
> 标签：java, c, java-native-interface

我想用 jni 将树形图从 java 传递给 c。我调用本机方法：

```
public native int getEuklid(TreeMap<int,short[]> map);
static {
 System.loadLibrary("Euklid");
} 
```

现在在我的 c 文件中，我想访问地图中的元素。我怎么能做到这一点。这是我的 c 文件的标题：

```
JNIEXPORT int JNICALL 
Java_Main_getEuklid (JNIEnv *env, jobject o, jobject o2) 
```

其中 o2 是树状图。我如何处理像 java 中的树形图这样的作业？

编辑：

我的错在哪里？：

```
JNIEXPORT int JNICALL 
Java_Main_getEuklid (JNIEnv *env, jobject o, jobject o2){
 jclass cls = env->GetObjectClass(o2) ; 
 jmethodID mGetValue = env->GetMethodID(cls, "keySet","()Ljava/util/Set;"); 
 jobject value = env->CallObjectMethod(o2, mGetValue) 
```

我成了：

```
In function ‘Java_Main_getEuklid’:
11: error: request for member ‘GetObjectClass’ in something not a structure or union
12: error: request for member ‘GetMethodID’ in something not a structure or union
13: error: request for member ‘CallObjectMethod’ in something not a structure or union 
```

我真的是c新手，我想测试一些东西，所以我希望你能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:57:20.307

我认为这是纯C代码。你应该写这样的东西：

```
(*env)->GetObjectClass(env, o2) 
```

换句话说，RTFM，从这里开始[http://en.wikipedia.org/wiki/Java_Native_Interface](http://en.wikipedia.org/wiki/Java_Native_Interface)。

# javascript - 在javascript中键入强制

> ID：16133904
> 
> 赞同：2
> 
> 时间：2013-04-21T17:11:58.227
> 
> 标签：javascript

以下代码的输出将是什么：

```
console.log({}.valueOf()+15);//Output:[object Object]15 
```

*.valueOf()*方法的返回值是上面代码中的字符串还是只是一个对象，因为*.toString()*会产生相同的结果，但是使用此方法返回的值无论如何都是字符串。我只是想知道会是什么上面代码中*.valueOf()*返回的值的类型。如果返回值是一个字符串，除了**[new String("abc")]之外，** *valueOf()方法会返回什么其他对象的字符串值*

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T17:16:55.567

`valueOf`返回一个原始值。究竟什么类型的原始值取决于对象。

展示：

```
typeof Number(0).valueOf(); // number
typeof Boolean(0).valueOf(); // boolean 
```

关键是，无论它返回什么，它都是一个原始值。`toString`另一方面，总是返回一个字符串。

在 的情况下，除了 root 之外`{}`没有其他方法，它与 相同，返回表单的字符串。这是一个字符串导致与.`valueOf``Object.prototype.valueOf``Object.prototype.toString``[object ***Constructor***]``15`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T17:18:33.127

普通对象的`.valueOf()`将是同一个对象。*（这与它的**方法**`.toString()`不同。）*

```
var o = {};

typeof o.valueOf(); // "object"

o === o.valueOf(); // true 
```

`+`运算符看到您没有对第一个操作数使用数字，因此它不是加法，而是进行字符串连接并调用其两个操作数的值`.toString()`。

这就是为什么你得到`[object Object]15`.

* * *

您可以通过更改`toString()`输出来测试它。

```
var o = {};
o.toString = function() { return "foobar" }

o.toString(); // "foobar"

o + 15;           // "foobar15"
o.valueOf() + 15; // "foobar15" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T17:18:07.427

要在 JS 中获取对象的类型，可以使用**typeof**函数：

```
typeof({}) // outputs 'object'
typeof({}.valueOf()) // outputs 'object'
typeof({}.valueOf()+15) // outputs 'string' 
```

这表明在尝试“添加”15 时发生了值强制，而将其解释为字符串连接。**

# python - 在 wxpython 中显示样式化的 json

> ID：16133910
> 
> 赞同：0
> 
> 时间：2013-04-21T17:12:27.547
> 
> 标签：python, wxpython, syntax-highlighting

我有一个在 TextCtrl 中显示 json 的 wxpython 应用程序。如何使用 StyledTextCtrl 正确突出显示该 json？只是单行更改还是更大？

顺便说一句，我创建了 jsyntaxpane，它是一个衬里来突出几种语言。太糟糕了，我现在需要 wxPython。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:50:19.900

StyledTextCtrl 应该适合你。但它没有内置的 JSON 词法分析器。

我会按以下顺序尝试选项：

*   传递`stc.STC_LEX_AUTOMATIC`给 StyledTextCtrl`SetLexer()`并查看它是否正确突出显示您的 json
*   [从内置](http://wiki.wxpython.org/StyledTextCtrl%20Lexer%20Quick%20Reference#StyledTextCtrl_Quick_Reference)词法分析器中选择（一一尝试）一个词法分析器，它将正确显示您的 json
*   尝试其他组件，例如：
    *   [闪烁](http://www.scintilla.org/index.html)
    *   [编辑](http://editra.org/)
    *   ...
*   添加您自己的自定义词法分析器/hightlighter，请参阅
    *   [Python wx.stc 自定义高亮](https://stackoverflow.com/questions/7807276/python-wx-stc-custom-highlighting)
    *   [向 scintilla/scite 添加一个新的词法分析器（...最终是 wxPython StyledTextCtrl）](https://stackoverflow.com/questions/3297567/adding-a-new-lexer-to-scintilla-scite-and-eventually-wxpython-styledtextctrl)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-04T13:18:18.613

我正在使用 Python 3.7，并且可以使用用于 JSON 的词法分析器。您可以使用以下内容。

```
stc.StyledTextCtrl.__init__(self, parent)
self.SetLexer(stc.STC_LEX_JSON) 
```

除此之外，还有其他属性在将 StyledTextCtrl 用于 JSON 时可能很有用。这些属性用于作为普通 JSON 一部分的各种字段的字体大小和颜色。

```
self.StyleSetSpec(stc.STC_JSON_DEFAULT, "fore:#000000,face:%(helv)s,size:%(size)d" % fonts)
self.StyleSetSpec(stc.STC_JSON_NUMBER, "fore:#007F7F,size:%(size)d" % fonts)
self.StyleSetSpec(stc.STC_JSON_KEYWORD, "fore:#007F7F,bold,size:%(size)d" % fonts)
self.StyleSetSpec(stc.STC_JSON_STRING, "fore:#7F0000,size:%(size)d" % fonts)
self.StyleSetSpec(stc.STC_JSON_PROPERTYNAME, "fore:#FF5733,size:%(size)d" % fonts) 
```

# box-api - Box API - 时间戳类型

> ID：16133916
> 
> 赞同：0
> 
> 时间：2013-04-21T17:12:59.500
> 
> 标签：box-api

我正在尝试通过 Box API 上传文件，并且我想指定 content_modified_at 参数。但是，我总是收到一个错误响应，说我指定的日期不是 ISO 8601 格式。我仔细检查了我发送的格式，它肯定是 ISO 8601。

如果我不指定此字段，则文件创建成功。

我请求中的字段格式为“2013-04-21T19:39:16+03:00”，我不确定这与“2012-12-12T11:04:26-08:00”有何不同在 Box API 文档中使用

以下是我的请求和响应的完整列表：

```
-------------- REQUEST  --------------
POST https://upload.box.com/api/2.0/files/content
Accept-Encoding: gzip
Authorization: Bearer [hidden]
User-Agent: Google-HTTP-Java-Client/1.14.1-beta (gzip)
Content-Type: multipart/form-data; boundary=__END_OF_PART__

--__END_OF_PART__
Content-Type: application/octet-stream
content-disposition: form-data; name="filename"; filename="file1.txt"

1234567890

--__END_OF_PART__
content-disposition: form-data; name="parent_id"

760503410
--__END_OF_PART__
content-disposition: form-data; name="content_modified_at"

2013-04-21T19:39:16+03:00
--__END_OF_PART__--

-------------- RESPONSE --------------
HTTP/1.1 400 Bad Request
Date: Sun, 21 Apr 2013 17:01:23 GMT
Content-Length: 193
X-Error-Handling: entry;index.php|rid;132352423451741b638d902|runmode;box_api_v2|user;2|user;193761140|
Connection: close
Content-Type: application/json
Server: Apache/2.2.15 (Scientific Linux)
Cache-Control: no-cache, no-store

{"type":"error","status":400,"code":"bad_request","help_url":"http:\/\/developers.box.com\/docs\/#errors","message":"not a valid iso 8601 formatted date","request_id":"132352423451741b638d902"} 
```

**更新**：Box 团队的任何人真的关心这个吗？这是否意味着服务存在错误，或者只是没有人想向我解释我的错是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:14:39.910

我们正在修复的时间戳解析器存在问题。

如果您将时间戳设置为 UTC 并以 -00:00 的时区偏移量发送它，您应该会看到现在的问题，例如

```
2013-04-17T09:12:36-00:00 
```

同样，这是我们正在努力解决的问题。

# rest - 400 vs 422 对 POST 数据的响应

> ID：16133923
> 
> 赞同：447
> 
> 时间：2013-04-21T17:13:39.107
> 
> 标签：rest, http-status-codes

我正在尝试使用我正在研究的“类似 REST”的 API 找出在不同场景下返回的正确状态代码。假设我有一个端点，允许以 JSON 格式发布购买。它看起来像这样：

```
{
    "account_number": 45645511,
    "upc": "00490000486",
    "price": 1.00,
    "tax": 0.08
} 
```

如果客户向我发送“sales_tax”（而不是预期的“tax”），我应该返回什么。目前，我正在返回 400。但是，我已经开始质疑自己。我真的应该退回 422 吗？我的意思是，它是 JSON（受支持）并且它是有效的 JSON，它只是不包含所有必需的字段。

* * *

## 回答 #1

> 赞同：521
> 
> 时间：2013-11-26T11:26:25.433

**400 Bad Request**现在似乎是您的用例的最佳 HTTP/1.1 状态代码。

**在您提出问题**（以及我最初的回答）时，[RFC 7231](https://www.rfc-editor.org/rfc/rfc7231)还不是一回事。在这一点上我反对，`400 Bad Request`因为[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616#section-10.4.1)说（强调我的）：

> **由于语法错误**，服务器无法理解该请求。

并且您描述的请求是语法有效的 JSON 封装在语法有效的 HTTP 中，因此服务器对请求的**语法**没有问题。

**然而** ，正如 Lee Saferite 在评论中[指出的那样](https://stackoverflow.com/questions/16133923/400-vs-422-response-to-post-of-data/20215807?noredirect=1#comment50346163_20215807)[，已淘汰 RFC 2616 的 RFC 7231 不包括该限制](https://www.rfc-editor.org/rfc/rfc7231#section-6.5.1)：

> 400 (Bad Request) 状态码表示服务器不能或不会处理请求，因为某些东西被认为是客户端错误（例如，格式错误的请求语法、无效的请求消息帧或欺骗性请求路由）。

* * *

但是，**在重新措辞之前**（或者如果您想对 RFC 7231 现在只是一个*提议*的标准提出质疑），对于您的用例来说，这`422 Unprocessable Entity`似乎不是一个*不正确*的HTTP 状态代码，因为正如[RFC 4918 的介绍所说：](https://www.rfc-editor.org/rfc/rfc4918#section-1)

> 虽然 HTTP/1.1 提供的状态码足以描述 WebDAV 方法遇到的大多数错误情况，但有些错误并没有完全归入现有类别。本规范定义了为 WebDAV 方法开发的额外状态代码（第 11 节）

并且[描述`422`](https://www.rfc-editor.org/rfc/rfc4918#section-11.2)说：

> 422（Unprocessable Entity）状态码意味着服务器理解请求实体的内容类型（因此 415（Unsupported Media Type）状态码是不合适的），并且请求实体的语法是正确的（因此是 400（Bad Request） ) 状态码不合适）但无法处理包含的指令。

（注意对语法的引用；我怀疑 7231 也部分过时了 4918）

这听起来与您的情况*完全*一样，但以防万一有任何疑问，它会继续说：

> 例如，如果 XML 请求正文包含格式正确（即语法正确）但语义错误的 XML 指令，则可能会出现这种错误情况。

（将“XML”替换为“JSON”，我认为我们可以同意这是您的情况）

现在，有些人会反对 RFC 4918 是关于“Web 分布式创作和版本控制 (WebDAV) 的 HTTP 扩展”，并且您（大概）没有做任何涉及 WebDAV 的事情，因此不应该使用它。

考虑到在原始标准中使用明确不涵盖这种情况的错误代码和从准确描述情况的扩展中使用错误代码之间的选择，我会选择后者。

此外，[RFC 4918 第 21.4 节](https://www.rfc-editor.org/rfc/rfc4918#section-21.4)引用了[IANA 超文本传输​​协议 (HTTP) 状态代码注册表](http://www.iana.org/assignments/http-status-codes/http-status-codes.xhtml)，其中 422 可以找到。

我建议 HTTP 客户端或服务器使用该注册表中的任何状态代码是完全合理的，只要它们正确使用即可。

* * *

但是从 HTTP/1.1 开始，[RFC 7231 具有吸引力](https://www.rfc-editor.org/rfc/rfc7231)，所以只需使用`400 Bad Request`!

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2018-09-17T08:46:05.770

**案例研究：GitHub API**

[https://developer.github.com/v3/#client-errors](https://developer.github.com/v3/#client-errors)

也许从众所周知的 API 复制是一个明智的想法：

> 接收请求正文的 API 调用存在三种可能的客户端错误类型：
> 
> 发送无效的 JSON 将导致 400 Bad Request 响应。
> 
> ```
> HTTP/1.1 400 Bad Request
> Content-Length: 35
> 
> {"message":"Problems parsing JSON"} 
> ```
> 
> 发送错误类型的 JSON 值将导致 400 Bad Request 响应。
> 
> ```
> HTTP/1.1 400 Bad Request
> Content-Length: 40
> 
> {"message":"Body should be a JSON object"} 
> ```
> 
> 发送无效字段将导致 422 Unprocessable Entity 响应。
> 
> ```
> HTTP/1.1 422 Unprocessable Entity
> Content-Length: 149
> 
> {
>   "message": "Validation Failed",
>   "errors": [
>     {
>       "resource": "Issue",
>       "field": "title",
>       "code": "missing_field"
>     }
>   ]
> } 
> ```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2013-04-23T14:32:53.437

**400 Bad Request**是适合您的用例的 HTTP 状态代码。该代码由 HTTP/0.9-1.1 RFC 定义。

> 由于语法错误，服务器无法理解该请求。客户端不应该在没有修改的情况下重复请求。

[https://www.rfc-editor.org/rfc/rfc2616#section-10.4.1](https://www.rfc-editor.org/rfc/rfc2616#section-10.4.1)

**422 Unprocessable Entity**由 RFC 4918 - WebDav 定义。请注意，与 400 相比略有不同，请参阅下面的引用文本。

> 如果 XML 请求正文包含格式正确（即语法正确）但语义错误的 XML 指令，则可能会发生这种错误情况。

为了保持统一的界面，您应该仅在 XML 响应的情况下使用 422，并且您还应该支持 Webdav 扩展定义的所有状态代码，而不仅仅是 422。

[https://www.rfc-editor.org/rfc/rfc4918#page-78](https://www.rfc-editor.org/rfc/rfc4918#page-78)

另请参阅 Mark Nottingham 关于状态码的帖子：

> 尝试将应用程序的每个部分“深度”映射到 HTTP 状态代码是错误的；在大多数情况下，您要瞄准的粒度级别要粗得多。**如有疑问，可以在没有更合适的情况下使用通用状态代码 200 OK、400 Bad Request 和 500 Internal Service Error**。

[如何考虑 HTTP 状态码](https://www.mnot.net/blog/2017/05/11/status_codes)

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2015-01-13T10:16:23.593

**为了反映截至 2015 年的状态：**

从行为上讲，400 和 422 响应代码都将被客户和中介视为相同，因此它实际上不会对您使用的*具体*差异产生影响。

但是，我希望看到 400 当前使用得更广泛，此外，[HTTPbis 规范](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-p2-semantics-26#section-6.5.1)提供的说明使其更适合两种状态代码：

*   HTTPbis 规范阐明了 400 的意图不仅仅是为了语法错误。现在使用更广泛的短语“表明服务器不能或不会处理请求，因为某些东西被认为是客户端错误”。
*   422 专门是 WebDAV 扩展，在 RFC 2616 或较新的[HTTPbis 规范](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-p2-semantics-26#section-6.5.1)中未引用。

就上下文而言，HTTPbis 是 HTTP/1.1 规范的修订版，它试图澄清不清楚或不一致的领域。一旦达到批准状态，它将取代 RFC2616。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2014-01-31T19:17:47.923

没有正确答案，因为它取决于您的请求对“语法”的定义。最重要的是你：

1.  始终如一地使用响应代码
2.  在响应正文中包含尽可能多的附加信息，以帮助使用您的 API 的开发人员弄清楚发生了什么。=

在每个人都因为我说这里没有正确或错误的答案而跳起来之前，让我解释一下我是如何得出这个结论的。

在此特定示例中，OP 的问题是关于包含与预期不同的密钥的 JSON 请求。现在，从自然语言的角度来看，接收到的密钥名称与预期的密钥非常相似，但严格来说，它是不同的，因此（通常）不被机器识别为等效的。

正如我上面所说，决定因素是*语法*的含义。如果请求是使用 Content Type 发送的`application/json`，那么是的，请求在*语法上*是有效的，因为它是有效的 JSON 语法，但在*语义上*无效，因为它与预期的不匹配。（假设对什么使所讨论的请求在语义上有效或无效有一个严格的定义）。

另一方面，如果请求是使用更具体的自定义内容类型发送的`application/vnd.mycorp.mydatatype+json`，也许，确切地指定了预期的字段，那么我会说请求很容易在语法上无效，因此 400 响应。

在有问题的情况下，由于*key*是错误的，而不是*value*，*如果有*关于什么是有效键的规范，则会出现*语法*错误。*如果没有*对有效键*的规范，或者错误与 value 相关*，那么这将是一个*语义*错误。

 **** * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-07-13T05:06:56.280

> 422 不可处理实体解释更新：2017 年 3 月 6 日
> 
> 什么是 422 不可处理实体？
> 
> 当请求格式正确时会出现 422 状态代码，但是由于语义错误而无法处理。此 HTTP 状态是在 RFC 4918 中引入的，更具体地适用于 Web 分布式创作和版本控制 (WebDAV) 的 HTTP 扩展。
> 
> 关于开发人员是否应该向客户端返回 400 与 422 错误存在一些争议（更多关于以下两种状态之间的差异）。但是，在大多数情况下，只有在支持 WebDAV 功能时才应返回 422 状态。
> 
> 从 RFC 4918 的第 11.2 节中提取的 422 状态代码的逐字定义可以在下面阅读。
> 
> 422（Unprocessable Entity）状态码意味着服务器理解请求实体的内容类型（因此 415（Unsupported Media Type）状态码是不合适的），并且请求实体的语法是正确的（因此是 400（Bad Request） ) 状态码不合适）但无法处理包含的指令。
> 
> 定义接着说：
> 
> 例如，如果 XML 请求正文包含格式正确（即语法正确）但语义错误的 XML 指令，则可能会出现这种错误情况。
> 
> 400 与 422 状态码
> 
> 错误请求错误使用 400 状态代码，如果请求语法格式错误、包含无效的请求消息帧或具有欺骗性的请求路由，则应将其返回给客户端。此状态代码可能看起来与 422 不可处理实体状态非常相似，但是，区分它们的一小部分信息是请求实体的 422 错误的语法是正确的，而生成 400 的请求的语法错误是不正确的。
> 
> 422 状态的使用应仅用于非常特殊的用例。在大多数其他由于语法格式错误而发生客户端错误的情况下，应使用 400 Bad Request 状态。

[https://www.keycdn.com/support/422-unprocessable-entity/](https://www.keycdn.com/support/422-unprocessable-entity/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-02-22T18:21:35.677

**您的案例：** `HTTP 400`从 REST 角度来看，您的案例是正确的状态代码，因为它在语法上不正确，无法发送`sales_tax`而不是`tax`，尽管它是有效的 JSON。在将 JSON 映射到对象时，大多数服务器端框架通常都会强制执行此操作。但是，有些 REST 实现忽略`key`了 JSON 对象中的 new。在这种情况下，`content-type`服务器端可以强制执行只接受有效字段的自定义规范。

**422的理想场景：**

在理想情况下，如果服务器理解请求实体的内容类型并且请求实体的语法正确但由于其语义错误而无法处理数据，则首选**422作为响应发送并且通常可以接受。**

**400 超过 422 的情况：**

请记住，响应代码 422 是扩展的 HTTP (WebDAV) 状态代码。仍然有一些 HTTP 客户端/前端库不准备处理 422。对他们来说，它就像*“HTTP 422 错误，因为它不是 HTTP”*一样简单。从服务的角度来看，400 并不是很具体。

在企业架构中，服务主要部署在 SOA、IDM 等服务层上。它们通常为多个客户端提供服务，从非常旧的本地客户端到最新的 HTTP 客户端。如果其中一个客户端不处理 HTTP 422，则选项是要求客户端升级或将您的响应代码更改为每个人的 HTTP 400。以我的经验，这在当今非常罕见，但仍有可能。因此，在决定 HTTP 响应代码之前，始终需要仔细研究您的架构。

为了处理这样的情况，服务层通常使用`versioning`或设置`configuration`标志来让严格的 HTTP 一致性客户端发送 400，并为其余的客户端发送 422。这样，它们为现有消费者提供向后兼容性支持，同时为新客户端提供使用 HTTP 422 的能力。

* * *

[RFC7321](https://www.rfc-editor.org/rfc/rfc7231#section-6.5.1)的最新更新说：

```
The 400 (Bad Request) status code indicates that the server cannot or
   will not process the request due to something that is perceived to be
   a client error (e.g., malformed request syntax, invalid request
   message framing, or deceptive request routing). 
```

这确认服务器可以为无效请求发送 HTTP 400。**400 不再只是指语法错误**，但是，只要客户端可以处理，422 仍然是真正的响应。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-09T14:20:52.787

首先，这是一个非常好的问题。

### 400 Bad Request - 当请求中缺少关键信息时

例如，授权标头或内容类型标头。服务器绝对需要它来理解请求。这可能因服务器而异。

### 422 Unprocessable Entity - 无法解析请求正文时。

这没有 400 严重。请求已到达服务器。服务器已确认请求具有正确的基本结构。但是请求正文中的信息无法解析或理解。

例如`Content-Type: application/xml`，当请求正文是 JSON 时。

这是一篇列出状态代码及其在 REST API 中的使用的文章。 [https://metamug.com/article/status-codes-for-rest-api.php](https://metamug.com/article/status-codes-for-rest-api.php)***

# macos - IBOutlet 什么时候初始化？

> ID：16133931
> 
> 赞同：5
> 
> 时间：2013-04-21T17:14:24.930
> 
> 标签：macos, cocoa, iboutlet

我通过 Interface Builder 为文本视图设置了一个出口。文本视图加载正常，但是我无法以编程方式访问它的任何属性，因为插座始终是`nil`.

它什么时候实例化？即使在我`applicationDidFinishLoading`被调用后，它仍然不是“活着的”或未存档的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T20:14:56.063

出口不会实例化，因为出口是一个变量（或属性）。

nib 中的对象在加载该 nib 时被实例化，并在创建对象之后但在`awakeFromNib`发送给所有相关对象之前尽快将它们分配给每个出口。

换句话说，nib 加载按以下顺序执行以下所有操作：

1.  创建或重新创建存储在 nib 中的所有对象。（这*不包括*文件所有者、第一响应者以及其他外部和虚构对象。）
2.  将 nib 中连接的每个出口属性设置为 nib 连接到的同一 nib 中的对象。（例如：视图控制器`view`到顶级视图的出口。）
3.  发送`awakeFromNib`到 nib 中的对象，并且（在 Cocoa 中）也发送到文件的所有者（例如，窗口控制器）。

＃2回答了您的问题。

[资源编程指南有更多信息](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html)。Cocoa 和 Cocoa Touch 之间的细节略有不同，尤其是在哪些对象被发送`awakeFromNib`消息和哪些对象不发送消息方面。

> 它什么时候实例化？即使在我`applicationDidFinishLoading`被调用后，它仍然不是“活着的”或未存档的。

文本视图不是吗？

可能是，您只是没有连接插座。检查笔尖。

另一种可能性：您在另一个 nib 中创建了文本视图，而不是创建应用程序委托的那个（如果您甚至在 nib 中创建了应用程序委托），并且您没有将视图连接到右侧的插座目的。也许您在文本视图的 nib 中创建了第二个应用程序委托；这个应用程序代理实际上并不是应用程序的代理，这就是为什么真正的应用程序代理看不到文本视图的原因——您将文本视图提供给了冒名顶替者，而不是真正的 McCoy。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:23:03.013

确保您已将 IBoutlet 链接到正确的文件所有者。单击文件所有者并单击身份检查器以查看文件所有者指向正确的文件。

1.  点击Interfacebuilder->Objects下的对象
2.  在 Outlets 下，确保显示 IBoutlets 的属性。如果它们没有显示，则文件所有者可能是错误的。
3.  将出口链接到对象 - 单击->将线拖到对象

应该在初始化包含 .h 中的 IBoutlets 的视图控制器（也称为文件所有者）时创建 IBoutlets。

# c# - C# - 将窗口代码放在一个类中（代码混淆）

> ID：16133934
> 
> 赞同：-1
> 
> 时间：2013-04-21T17:15:14.863
> 
> 标签：c#, class, window, obfuscation

这可能是一个愚蠢而令人困惑的问题，但我应该将我的 C# 代码放在类文件中，然后将其引用到窗口文件代码中，而不是将其直接放入窗口文件代码中吗？**请记住，我想在之后混淆我的代码。**

将代码直接放入窗口文件的示例：

（主窗口）

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
      MessageBox.Show("Clicked");
      //Do Some Code
    } 
```

将代码放入类并将其引用到 MainWindow 的示例：

（主窗口）

```
 private void button1_Click(object sender, RoutedEventArgs e)
{
  Helper.DoButton1Code();
} 
```

（助手类）

```
 public static bool DoButton1Code()
    {
      MessageBox.Show("Clicked");
      //Do Some Code
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:20:05.047

据我所知，将逻辑或资源（例如字符串）放在哪里并没有太大区别，只要它被混淆了。但是，您应该专注于组织代码，以便更容易调试和维护。

使用 reflector.exe 等，但是我们可以看到您的公共方法签名，尽管函数名称可能被混淆了。

# java - 我已经从超类中创建了一个子类，但它没有识别“扩展”

> ID：16133936
> 
> 赞同：-4
> 
> 时间：2013-04-21T17:15:25.130
> 
> 标签：java, netbeans

在程序开始时，我得到了`class BusinessAccount extends GasAccount`. `GasAccount`既是超类又`BusinessAccount`是子类。

我也遇到了底部的重载方法的问题，这意味着要覆盖超类方法来计算对象的余额，`GasAccount` 并将对象的折扣应用于新单位的成本，而新单位的成本又将添加到当前余额中的一个`BusinessAccount`对象。此方法将返回一个`String`值，指示事务已成功或不成功。我有这个方法的以下代码

```
 import java.util.Scanner ; 
class  BusinessAccount extends GasAccount
{ 
       // The objects properties are declared as private 
        private double dblDiscount ;  
        // The objects methods are defined as public 
        public BusinessAccount (int intNewAccRefNo, String strNewName, String 
                             strNewAddress,double dblNewUnits, double dblNewDiscount, int     intAccRefNo, String strName, double dblUnits, String strAddress ) 
            { 
            // The constructor - same name as the class and no return type
            dblDiscount = dblNewDiscount;
            } 

    public void setNewDiscount ( double dblNewDiscount ) 
        { 
            dblDiscount = dblNewDiscount ; 
        } // end of setNewDiscount
    public double getDiscount() 
        { 
            return dblDiscount ; 
        } // end of getDiscount method
    public string recordUnits (  double dblUnitsUsed);

     if ( dblDiscount = 0.00){
        dblBalance = (dblUnitCost * dblUnitsUsed)  + dblBalance;
            return "Successful";
            }
    else {
        dblBalance = ((dblUnitCost * dblUnitUSed) \ 100 * dblDiscount) + dblBalance;
            return "Unseccfessful";
    } // end of Override method      
} // end of class 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T17:24:15.410

公共双记录单位（双 dblUnitsUsed）

此方法已定义为返回一个双精度值，但是您的返回语句是字符串。如果您想返回字符串，您应该使用：

公共字符串记录单元（双 dblUnitsUsed）{}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:20:04.707

您发布的代码无效：方法声明在右括号和左大括号之间不能有分号：

```
public double recordUnits(double dblUnitsUsed) // no semicolon here
{ 
```

if 和 else 语句也是如此，如果它们包含多个指令，则必须将它们括在大括号内：

```
if (dblDiscount = 0.00) {
    dblBalance = (dblUnitCost * dblUnitsUsed)  + dblBalance;
    return "Successful";
}
else {
    dblBalance = ((dblUnitCost * dblUnitUSed) \ 100 * dblDiscount) + dblBalance;
    return "Unsuccfessful";
} 
```

还要学习像我上面所做的那样缩进你的代码以使其可读。

当然，正如评论中所指出的，返回双精度的方法不能返回字符串。

始终阅读并尝试理解编译器的错误消息。如果您不理解它们，请将它们发布在您的问题中。错误消息旨在被阅读，并包含有意义的信息。

# ruby - 谷歌云存储：授权失败。服务器消息：“错误”：“无效范围”

> ID：16133939
> 
> 赞同：0
> 
> 时间：2013-04-21T17:15:30.313
> 
> 标签：ruby, google-api-ruby-client

我正在尝试使用 google apis 的 ruby​​ 客户端来访问云存储，但总是出现以下错误：

```
/usr/local/lib/ruby/gems/1.9.1/gems/signet-0.4.5/lib/signet/oauth_2/client.rb:875:in `fetch_access_token': Authorization failed.  Server message: (Signet::AuthorizationError)
{
  "error" : "invalid_scope"
} 
```

我在 github 和 api 客户端的 google 开发人员页面上都遵循了（略有不同的）示例，结果相同。这是两个实例的代码：

```
require 'google/api_client'

apiClient = Google::APIClient.new({'application_name' => 'myApp'})

key    = Google::APIClient::PKCS12.load_key('client.p12', 'notasecret')
client = "xxxxxxxxxxxx@developer.gserviceaccount.com"
api    = "https://www.googleapis.com/auth/"
access = "devstorage.readonly"

service_account = Google::APIClient::JWTAsserter.new(client, api+access, key)
client.authorization = service_account.authorize 
```

如果我尝试，我也会得到同样的错误......

```
require 'google/api_client'

apiClient = Google::APIClient.new({'application_name' => 'myApp'})

key    = Google::APIClient::KeyUtils.load_from_pkcs12('client.p12', 'notasecret')
client = "xxxxxxxxxxxx@developer.gserviceaccount.com"
api    = "https://www.googleapis.com/auth/"
access = "devstorage.readonly"

apiClient.authorization = Signet::OAuth2::Client.new(
:token_credential_uri => 'https://accounts.google.com/o/oauth2/token',
:audience => 'https://accounts.google.com/o/oauth2/token',
:scope => "#{api}#{access}",
:issuer => client,
:signing_key => key)

apiClient.authorization.fetch_access_token! 
```

在这两种情况下，我都尝试将*访问*变量设置为“storage”、“devstorage”、“storage.readonly”或“devstorage.readonly”，但也无济于事。

有任何想法吗？

谢谢！

# javascript - jQuery mobile：处理大型过滤列表

> ID：16133941
> 
> 赞同：0
> 
> 时间：2013-04-21T17:15:40.503
> 
> 标签：javascript, jquery, sqlite, jquery-mobile, html-lists

我有一个 jQuery mobile 按字母顺序排列的列表，如下所示：

```
 <ul id="theList" data-role="listview" data-filter="true" data-filter-placeholder="Search ticker or firm name..." data-inset="true">
                <li data-role="list-divider">A</li>
                <li data-filtertext="itemName"><a href="#">Item</a></li>
                 .
                 .
                <li data-role="list-divider">B</li>
                <li data-filtertext="itemName"><a href="#">Item</a></li>
                 .
                 .
        </ul> 
```

在页面加载时，我用随机生成的 1000 个项目填充列表并放入 sqlite 数据库。最初生成和显示列表很顺利。问题是因为这是一个过滤列表，我希望用户能够搜索它。这么多项目搜索速度很慢。

处理这个问题的好策略是什么？也许我可以按需查询数据？这是我必须使用的：

*   我可以查询的 SQLITE 数据库
*   某种列表。我希望列表保持 ABC 顺序。
*   该列表有分隔线。

我希望这可以扩展到 N 多个项目，以便列表可以非常大但仍然可以顺利运行。我不确定该列表会增长到多大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:38:19.307

对于 1000 个项目，您的搜索不应该运行得那么慢。一个好的匹配/不匹配算法可以在 less than 中运行`O(N)`，并且当您保持排序顺序不变时，您不会添加`N!`from 快速排序。我可以查看您的 jQuery 过滤器特定代码吗？我会在性能方面提供建议。

至于您想要执行此操作的实际方式，如果您最初不想加载 1000 个请求，请考虑使用 AJAX 加载和分页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T10:15:57.540

我正在开发一个 phonegap 应用程序，发现 jquerymobile listview 过滤器非常慢 - 我必须等待 2-3 秒，然后每次按键都被接受到搜索框中；iOS 比 Android 更糟糕。

最后我放弃了，现在正在使用数据[表](http://www.datatables.net)而不是 listview - 它更快并且具有更多功能。

# javascript - 将参数传递给 jQuery 选择器

> ID：16133942
> 
> 赞同：1
> 
> 时间：2013-04-21T17:15:50.220
> 
> 标签：javascript, jquery, html, jquery-selectors

我是 JS 的新手，所以请多多包涵。我正在尝试将字符串参数传递给 jQuery id 选择器，但不知何故它不起作用..

HTML：

```
<li id="startPageButton" class="buttons" onclick="showContent(startPageContent, 394)">Startpage</li> 
```

JS：

```
function showContent(cont, boxHeight) {
$(".content").fadeOut(5, function(){
    $("#contentBox").animate({height: boxHeight + "px" }, 400, function(){
        $("#" + cont).fadeIn(100);
    });
}); 
```

}

"$("#" + cont)" 部分有问题。如果我用一个简单的 id 选择器替换它，它可以工作:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:17:18.970

尝试`onclick`从此替换您的代码属性：

```
onclick="showContent(startPageContent, 394)" 
```

对此：

```
onclick="showContent('startPageContent', 394)" 
```

然后再试一次..

# javascript - 第二次单击后停止加载的音频

> ID：16133943
> 
> 赞同：0
> 
> 时间：2013-04-21T17:15:54.740
> 
> 标签：javascript

单击图像后，我已经加载了一些音频。这很好用，现在唯一的问题是当他们再次单击图像时让它停止。这是代码。当然是行不通的。你能帮忙的话，我会很高兴。

```
var sound = new Audio("plane.mp3");
    sound.preload = 'auto';
    sound.load();

    function planeNoise() {
      var click=sound.cloneNode();
      click.play();
        if(click>1){
            sound.stopPropagation();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:20:16.333

使用[一个](http://api.jquery.com/one/)事件处理程序应该适合您。下面只是一个例子，不知道你的代码是如何组织的。

```
$('.image').one("click", function(){
    planeNoise();
});

function planeNoise() {
   var click=sound.cloneNode();
   click.play();
} 
```

# php - mysqli删除查询

> ID：16133946
> 
> 赞同：-1
> 
> 时间：2013-04-21T17:16:11.603
> 
> 标签：php, mysqli

创建 mysqli 删除查询时，如何运行 PHP 代码来删除与已删除信息关联的文件？

我知道，`mysqli::$affected_rows`但它并没有真正帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-06T09:15:47.283

以下行删除了“标题”列中包含“Cron”一词的**所有行。**

```
mysqli_query($con,"delete from `foexstco_rr`.`Timings` where `Title`='Cron'"); 
```

下一行删除了**所有内容**。

```
mysqli_query($con,"delete from `foexstco_rr`.`Timings`"); 
```

此行删除了包含 3 个条件的行。请注意，** 和 ** 必须将每个条件分开。

```
mysqli_query($con,"delete from `foexstco_rr`.`Timings` where `Number`='77' and `Title`='Cron' and `Cols`='1'"); 
```

如果您打印了 MySqli 响应，“1”将意味着该命令已被执行，但并不一定意味着任何行已被删除。“0”表示命令写入错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:30:15.363

您可以运行两个查询。那将是：

```
SELECT id, relevant_field from my_table WHERE the_condition_for_the_rows_to_delete. 
```

然后是第二个查询：

```
DELETE FROM my_table WHERE id IN (the_ids_you_got_with_the_first_select) 
```

之后，您将删除与第一个查询结果关联的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T17:47:07.247

您可以使用 PHP 的`unlink()`函数来删除文件（[此处的文档](http://php.net/manual/en/function.unlink.php)）。

首先进行查询以获取文件位置，然后通过结果循环运行：

```
$mysqli = new mysqli("localhost", "user", "password", "database");
$results = $mysqli->query("SELECT id,file_path FROM table WHERE whatever")->fetch_assoc();
foreach($results as $result) {
    unlink($row['file_path']);
    $mysqli->query("DELETE FROM table WHERE id = " . $row['id']);
} 
```

确保清理任何用户提交的输入以避免 SQL 注入。

编辑：这**不是**最有效的方法——为了简化代码，我已经演示了这种方式，最好将 id 添加到数组中，然后在单个查询中删除所有行。

# sql - 计数不重复

> ID：16133947
> 
> 赞同：11
> 
> 时间：2013-04-21T17:16:12.450
> 
> 标签：sql

我有一张如下表

```
 FK_OrgId , FK_UserId
 3 , 74
 1 , 74
 1 , 74
 3 , 4
 4 , 5
 1 , 5 
```

我正在尝试计算 FK_OrgId 但我必须消除重复项。所以，我想要一个像

```
 FK_OrgId, count
 3 , 2
 1 , 2
 4 , 1 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-21T17:19:52.797

这里的关键是使用`DISTINCT`inside `COUNT()`，所以它只会计算唯一值。

```
SELECT  FK_OrgId, COUNT(DISTINCT FK_UserId)
FROM    TableName
GROUP   BY FK_OrgId 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/9f329/3)

输出

```
╔══════════╦════════════╗
║ FK_ORGID ║ TOTALCOUNT ║
╠══════════╬════════════╣
║        1 ║          2 ║
║        3 ║          2 ║
║        4 ║          1 ║
╚══════════╩════════════╝ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T17:20:49.147

您应该使用`distinct`关键字以避免重复

```
select  t.FK_OrgId, count(distinct t.FK_UserId)
from    TableName as t
group by t.FK_OrgId 
```

# joomla - Joomla：将职位添加到博客内容区域

> ID：16133951
> 
> 赞同：1
> 
> 时间：2013-04-21T17:17:07.783
> 
> 标签：joomla, position, blogs

我正在尝试将新位置添加到工作表的内容区域。也就是说，我希望我的博客条目是这样的：

发布#1 发布#2 发布#3 新职位#1 发布#4 发布#5 发布#6 新职位#2 发布#7 发布#8 发布#9

最终，这两个新位置将用于横幅广告。

我不想在文章中插入职位，因为博客会非常动态，文章会快速向下滚动。此外，任何可以自动化的东西都应该。有人建议我这样做的聪明方法是创建一个博客布局覆盖。现在，考虑到我是一个新手，一只手绑在鼻子上，我的猫作为副驾驶，我正在盲目飞行，我开始感到有点失落。我确实阅读了有关 PHP 和覆盖的所有内容，但这似乎还不够。我正在使用 Artisteer 创建模板，*非常*基本的，没有任何花哨的东西，只是基本的造型。我正在使用的模板称为“testa4_50”（是的……我正在使用 50 版的傻瓜……陡峭的学习曲线……不要让我开始……）。我在 Windoze XP 上使用 Xampp 作为 localhost 进行测试。我的 Joomla 实现是 3.0.3 Artisteer 似乎大量使用了覆盖，所以我认为应该不难做到......大错特错......

我尝试的第一件事是查看是否可以在主页正文的某处插入一个新位置以尝试理解代码。

我采取的步骤：

1 - 在 C:\xampp\htdocs\j303b1\templates\testa4_50\ 中找到 templateDetails.xml 2 - 找到列表并添加我的“新位置”；看起来像：

```
<positions>
        <position>debug</position>
        <position>position-2</position>
        <position>position-4</position>
        <position>position-5</position>
        <position>position-7</position>
        <position>position-9</position>
        <position>position-10</position>
        <position>position-11</position>
        <position>position-12</position>
        <position>position-15</position>
        <position>position-16</position>
        <position>position-17</position>
        <position>position-18</position>
        <position>position-19</position>
        <position>position-20</position>
        <position>position-21</position>
        <position>position-22</position>
        <position>position-23</position>
        <position>position-24</position>
        <position>position-25</position>
        <position>position-26</position>
        <position>position-27</position>
        <position>position-new</position>
    </positions> 
```

3 - 在 C:\xampp\htdocs\j303b1\templates\testa4_50\ 中找到 index.php 4 - 在位置块中找到正确的位置：

```
<?php
  echo $view->position('position-19', 'art-nostyle');
  if ($view->containsModules('position-2'))
    echo artxPost($view->position('position-2'));
  echo $view->positions(array('position-20' => 50, 'position-21' => 50), 'art-article');
  echo $view->position('position-12', 'art-nostyle');
  echo artxPost(array('content' => '<jdoc:include type="message" />', 'classes' => ' art-messages'));
  echo '<jdoc:include type="component" />';
  echo $view->position('position-22', 'art-nostyle');
  echo $view->positions(array('position-23' => 50, 'position-24' => 50), 'art-article');
  echo $view->position('position-25', 'art-nostyle');
?> 
```

5 - 添加我的新位置，复制现有代码：

```
<?php
  echo $view->position('position-19', 'art-nostyle');
  if ($view->containsModules('position-2'))
    echo artxPost($view->position('position-2'));
  echo $view->positions(array('position-20' => 50, 'position-21' => 50), 'art-article');
  echo $view->position('position-12', 'art-nostyle');
  echo $view->position('position-new', 'art-nostyle');
  echo artxPost(array('content' => '<jdoc:include type="message" />', 'classes' => ' art-messages'));
  echo '<jdoc:include type="component" />';
  echo $view->position('position-22', 'art-nostyle');
  echo $view->positions(array('position-23' => 50, 'position-24' => 50), 'art-article');
  echo $view->position('position-25', 'art-nostyle');
?> 
```

6 - 检查 Joomla / Preview 7 中的位置 - 一切正常。

所以，我想出了代码“echo $view->position('position-new', 'art-nostyle');” 也应该在其他任何地方工作。

现在，我尝试在博客的任何位置创建一个新职位。

我采取的步骤：

1 - 在 \Dell-pc\xampp\htdocs\J303b1\templates\testa4_50\html\com_content\category 中找到 blog.php（完整文件附在这篇文章中）

2 - 在文件中找到正确的位置

```
echo artxPost(array('header-text' => $view->pageHeading, 'content' => ob_get_clean()));

?>
<?php $leadingcount=0 ; ?>
<?php if (!empty($this->lead_items)) : ?>
<div class="items-leading">
    <?php foreach ($this->lead_items as &$item) : ?>
        <div class="leading-<?php echo $leadingcount; ?><?php echo $item->state == 0 ? ' system-unpublished' : null; ?>">
            <?php
                $this->item = &$item;
                echo $this->loadTemplate('item');
            ?>
        </div>
        <?php $leadingcount++; ?>
    <?php endforeach; ?>
</div>
<?php endif; ?> 
```

3 - 插入代码：

```
echo artxPost(array('header-text' => $view->pageHeading, 'content' => ob_get_clean()));

?>
<?php echo $view->position('position-new', 'art-nostyle') ?>
<?php $leadingcount=0 ; ?>
<?php if (!empty($this->lead_items)) : ?>
<div class="items-leading">
    <?php foreach ($this->lead_items as &$item) : ?>
        <div class="leading-<?php echo $leadingcount; ?><?php echo $item->state == 0 ? ' system-unpublished' : null; ?>">
            <?php
                $this->item = &$item;
                echo $this->loadTemplate('item');
                echo $view->position('position-new', 'art-nostyle');
            ?>
        </div>
        <?php $leadingcount++; ?>
    <?php endforeach; ?>
</div>
<?php endif; ?> 
```

4 - Test = FAIL（该位置未出现在主页的任何位置）

5 - 将代码更改为

并插入相同的位置。测试 = 失败。

============================ 在这一点上，我被难住了。我无法在内容区域的任何位置插入新位置。最初我想在上面的循环中插入这段代码（看看我是否可以在第三个帖子之后插入至少一个新位置）：

```
<?php $leadingcount=0 ; ?>
<?php if (!empty($this->lead_items)) : ?>
<div class="items-leading">
    <?php foreach ($this->lead_items as &$item) : ?>
        <div class="leading-<?php echo $leadingcount; ?><?php echo $item->state == 0 ? ' system-unpublished' : null; ?>">
            <?php
                $this->item = &$item;
                echo $this->loadTemplate('item');
                echo $view->position('position-new', 'art-nostyle');
                If ($leadingcount==3) echo $view->position('position-new', 'art-nostyle');
            ?>
        </div>
        <?php $leadingcount++; ?>
    <?php endforeach; ?>
</div>
<?php endif; ?> 
```

但是，当然，它不起作用。

任何建议/意见将不胜感激！

博客.php 文件

```
<?php
defined('_JEXEC') or die;

require_once dirname(dirname(dirname(dirname(__FILE__)))) . DIRECTORY_SEPARATOR . 'functions.php';

if ('artisteer' == JFactory::getApplication()->getTemplate(true)->params->get('blogLayoutType')) {
    require 'art_blog.php';
    return;
}

Artx::load("Artx_Content");

$view = new ArtxContent($this, $this->params);

echo $view->beginPageContainer('blog');
ob_start();
if ($this->params->get('show_category_title', 1) || strlen($this->params->get('page_subheading'))) {
    echo '<h2>';
    echo $this->escape($this->params->get('page_subheading'));
    if ($this->params->get('show_category_title') && strlen($this->category->title))
        echo '<span class="subheading-category">' . $this->category->title . '</span>';
    echo '</h2>';
}

if ($this->params->def('show_description', 1) || $this->params->def('show_description_image', 1)) {
    echo '<div class="category-desc">';
    if ($this->params->get('show_description_image') && $this->category->getParams()->get('image'))
        echo '<img src="' . $this->category->getParams()->get('image') . '" alt="" />';
    if ($this->params->get('show_description') && $this->category->description)
        echo JHtml::_('content.prepare', $this->category->description, '', 'com_content.category');
    echo '</div>';
}
echo artxPost(array('header-text' => $view->pageHeading, 'content' => ob_get_clean()));

?>
<?php echo $view->position('position-new', 'xhtml') ?>
<?php $leadingcount=0 ; ?>
<?php if (!empty($this->lead_items)) : ?>
<div class="items-leading">
    <?php foreach ($this->lead_items as &$item) : ?>
        <div class="leading-<?php echo $leadingcount; ?><?php echo $item->state == 0 ? ' system-unpublished' : null; ?>">
            <?php
                $this->item = &$item;
                echo $this->loadTemplate('item');
                echo $view->position('position-new', 'art-nostyle');
            ?>
        </div>
        <?php $leadingcount++; ?>
    <?php endforeach; ?>
</div>
<?php endif; ?>
<?php
    $introcount = (count($this->intro_items));
    $counter = 0;
?>
<?php if (!empty($this->intro_items)) : ?>
    <?php foreach ($this->intro_items as $key => &$item) : ?>
    <?php
        $key= ($key-$leadingcount)+1;
        $rowcount=( ((int)$key-1) % (int) $this->columns) +1;
        $row = $counter / $this->columns ;
        if ($rowcount==1) : ?>
            <div class="items-row cols-<?php echo (int) $this->columns;?> <?php echo 'row-'.$row ; ?>">
       <?php endif; ?>
    <div class="item column-<?php echo $rowcount;?><?php echo $item->state == 0 ? ' system-unpublished' : null; ?>">
    <?php
        $this->item = &$item;
        echo $this->loadTemplate('item');
    ?>
    </div>
        <?php $counter++; ?>
        <?php if (($rowcount == $this->columns) or ($counter ==$introcount)): ?>
    <span class="row-separator"></span>
</div>
        <?php endif; ?>
    <?php endforeach; ?>
<?php endif; ?>
<?php
if (!empty($this->link_items)) {
    ob_start();
    echo '<div class="items-more">' . $this->loadTemplate('links') . '</div>';
    echo artxPost(ob_get_clean());
}
?>
<?php if (!empty($this->children[$this->category->id])&& $this->maxLevel != 0) : ?>
    <?php ob_start(); ?>
    <div class="cat-children">
        <h3><?php echo JTEXT::_('JGLOBAL_SUBCATEGORIES'); ?></h3>
        <?php echo $this->loadTemplate('children'); ?>
    </div>
    <?php echo artxPost(ob_get_clean()); ?>
<?php endif; ?>
<?php

if (($this->params->def('show_pagination', 1) == 1 || $this->params->get('show_pagination') == 2)
    && $this->pagination->get('pages.total') > 1)
{
    ob_start();
    echo '<div class="pagination">';
    if ($this->params->def('show_pagination_results', 1))
        echo '<p class="counter">' . $this->pagination->getPagesCounter() . '</p>';
    echo $this->pagination->getPagesLinks();
    echo '</div>';
    echo ob_get_clean();
}

echo $view->endPageContainer(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T04:31:43.887

这曾经在 Joomla 1.5 中为我工作，并且可以在任何地方使用。我不会费心复制艺术家试图做的任何事情，只需导入帮助程序并获取模块。

```
/***************************************
* Load module in a view file*/

// import the module helper
jimport('joomla.application.module.helper');
// this is where you want to load your module position
$modules = JModuleHelper::getModules('moduleposition');
foreach($modules as $module)
{
echo JModuleHelper::renderModule($module);
} 
```

对于 joomla 3，我认为它会更像这样

```
/***************************************
* Load module in a view file*/

// import the module helper
$document   = JFactory::getDocument();
$renderer   = $document->loadRenderer('module');
// this is where you want to load your module position
$modules = JModuleHelper::getModules('moduleposition');
foreach($modules as $module)
{
echo $renderer->render($module);
} 
```

# jquery - Jquery 函数没有得到正确的变量

> ID：16133954
> 
> 赞同：1
> 
> 时间：2013-04-21T17:17:16.747
> 
> 标签：jquery, function, variables, time

当窗口浏览器调整大小或单击某些元素时，我有一个函数会被多次调用。

此函数根据子项宽度（变量 colW）计算容器的正确宽度。似乎在执行我的函数时， colW 变量没有正确获取或者它不是正确的宽度（它是之前计算的宽度）。这个 colW 变量是根据窗口大小计算的。

如果我发出警报（colW），一切正常。在这种情况下，变量被正确获取。

我不知道如何解决这个问题。也许我没有正确设置我的变量，或者我需要确保在执行下一个函数之前完成前一个函数。

这是我的脚本：

```
function checkSly() {
    //alert(colW);
    numNormal = $('.element:not(.square,.wide,.tall,.isotope-hidden)').length;
    numSquare = $('.element.square:not(.isotope-hidden)').length;
    numWide = $('.element.wide:not(.isotope-hidden)').length;
    numTall = $('.element.tall:not(.isotope-hidden)').length;
    totalelement = numNormal+numSquare*4+numWide*2+numTall+3;
    columnswidth = Math.ceil((totalelement)/HIsotopeRows)*colW;
    slideewidth = Math.round(columnswidth);
    $('#container').width(slideewidth);
    frame.reload();
} 
```

**编辑**

如果我添加一个 setTimeout，则变量有时间计算（因为 colW 宽度为某些元素设置动画）并且效果很好：

```
 function checkSly() {
    setTimeout(function() {
    numNormal = $('.element:not(.square,.wide,.tall,.isotope-hidden)').length;
    numSquare = $('.element.square:not(.isotope-hidden)').length;
    numWide = $('.element.wide:not(.isotope-hidden)').length;
    numTall = $('.element.tall:not(.isotope-hidden)').length;
    totalelement = numNormal+numSquare*4+numWide*2+numTall+3;
    columnswidth = Math.ceil((totalelement)/HIsotopeRows)*colW;
    slideewidth = Math.round(columnswidth);
    $('#container').width(slideewidth);

    frame.reload();
        }, 300);
} 
```

我想我需要等待所有动画都完成才能调用 checkSly() 函数......有没有办法在执行函数之前等待动画完成？因为使用 setTimeout 它不会一直有效（因为动画取决于浏览器类型、CPU 和其他东西......）

对不起我的英语，我是法国人。

# java - 将 java bean 属性传递给 JSTL

> ID：16133956
> 
> 赞同：5
> 
> 时间：2013-04-21T17:17:25.127
> 
> 标签：java, jstl

如果这是一个超级简单的问题，我对 Java 和 JSTL 真的很陌生，很抱歉。我试图举一个我在网上找到的例子并让它工作，但我似乎遇到了问题。假设发生的所有事情都是您创建一个 java bean 并从 java bean 访问属性。但相反，我在 JSTL **jsp:useBean id="students" class="com.beans.Students"**中调用类的行上出现**空指针异常**。这是java类：

 **```
package com.beans;

public class Students implements java.io.Serializable
{
    private String firstName = null;
    private int age = 0;

    public Students() {
    }
    public String getFirstName(){
        return firstName;
    }
    public int getAge(){
        return age;
    }
    public void setFirstName(String firstName){
        this.firstName = firstName;
    }
    public void setAge(Integer age){
        this.age = age;
    }
} 
```

我试图在其中访问 Java bean 的 JSTL：

```
<jsp:useBean id="students" 
                class="com.beans.Students"> 
<jsp:setProperty name="students" property="firstName"
                 value="Zara"/>
<jsp:setProperty name="students" property="age" 
                value="10"/>
</jsp:useBean>

<p>Student First Name: 
<jsp:getProperty name="students" property="firstName"/>
</p>

<p>Student Age: 
<jsp:getProperty name="students" property="age"/>
</p> 
```

堆栈跟踪：

```
Caused by: org.apache.sling.api.SlingException: An exception occurred processing JSP page /students.jsp at line 18
at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.handleJspExceptionInternal(JspServletWrapper.java:574)
at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:499)
at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:443)
at org.apache.sling.scripting.jsp.JspServletWrapperAdapter.service(JspServletWrapperAdapter.java:59)
at org.apache.sling.scripting.jsp.JspScriptEngineFactory$JspScriptEngine.eval(JspScriptEngineFactory.java:453)
at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:358)
... 174 more
Caused by: java.lang.NullPointerException
at    org.apache.sling.scripting.jsp.jasper.runtime.JspRuntimeLibrary.internalIntrospecthelper(JspRuntimeLibrary.java:322)
at    org.apache.sling.scripting.jsp.jasper.runtime.JspRuntimeLibrary.introspecthelper(JspRuntimeLibrary.java:308)
at org.apache.jsp.students_002d_jsp._jspServ 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T23:21:42.710

如果您`Students`在您的 servlet 中的请求上放置了一个对象，执行类似`request.setAttribute("students", myStudentObject);`的操作，那么您页面上的 JSTL 等价物将是：

```
<p>Student First Name: <c:out value="${students.firstName}"/></p>

<p>Student Age: <c:out value="${students.age}"/></p> 
```

确保在页面顶部包含 JSTL 核心标签，如下所示：

```
<%@ taglib prefix="c" 
       uri="http://java.sun.com/jsp/jstl/core" %> 
```

`c:out`如果您需要担心 XSS 攻击，则使用该标签很好，但如果这不是问题，您可以跳过该`c:out`标签并使用这样的 EL 表达式：

```
<p>Student First Name: ${students.firstName}</p>

<p>Student Age: ${students.age}</p> 
```**

# syntax-highlighting - Gedit 在线语言规范生成器

> ID：16133962
> 
> 赞同：1
> 
> 时间：2013-04-21T17:18:00.297
> 
> 标签：syntax-highlighting, gedit, language-specifications

是否有在线生成器或类似的东西，用于 gedit 的新亮点？

我正在使用一种未知的语言，我希望有语法高亮，但它似乎太复杂了，我虽然可能存在一些在线创建者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-23T07:03:17.293

*   GtkSourceSchemer（请参阅此处的 github 源代码：[https](https://github.com/jonocodes/GtkSourceSchemer) ://github.com/jonocodes/GtkSourceSchemer ）可以帮助您做到这一点。这是使用基于 Gtksourceview 的主题的应用程序的主题制作器（包括 gedit）

或者

*   Scribes Theme Generator ( [http://scribes.sourceforge.net/themegenerator.php](http://scribes.sourceforge.net/themegenerator.php) ) 是一个在线生成器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T15:22:48.007

我知道没有在线生成器，但你可以找到一种已经有规范的类似语言并从那里开始。下面有一个不错的游泳池可供选择

/usr/share/gtksourceview-3.0/language-specs/

# css - CSS 调整大小 适合文本

> ID：16133966
> 
> 赞同：12
> 
> 时间：2013-04-21T17:18:19.167
> 
> 标签：css

我有一个`<div>`叫做“容器”的容器，它包裹着另一个`<div>`叫做“盒子”的容器。“盒子”里面有文字。

问题是我似乎无法调整大小`<div class="box">`以适合文本。我也有一张图表来解释我的情况。

[![数字](https://i.stack.imgur.com/Zo00b.jpg)](https://i.stack.imgur.com/Zo00b.jpg)

```
<!DOCTYPE html>
<meta charset="utf-8" />
<link rel="stylesheet" href="float.css">
<div class="container">
    <br>
    <br>
    <br>
    <br>
    <div class="box">Hello my name is jack</div>
</div>
<div class="container">
    <br>
    <br>
    <br>
    <br>
    <div class="box">Hello my name is jack</div>
</div> 
```

我的 CSS

```
.container {
    background-color: #ED8713;
    height: 300px;
    width: 300px;
    margin: 60px;
    margin-top: 50px;
}
.box {
    background-color: #FFFFFF;
    width: 270px;
    margin: 0 auto;
    margin-top: 15px;
    text-align: center
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T17:38:41.167

你知道吗？我们都是白痴。这是真正的答案：

HTML：

```
<div class="container">
    <br>
    <br>
    <br>
    <br>
    <span class="box">Hello my name is jack</span>
</div> 
```

CSS：

```
.container {
    background-color: #ED8713;
    height: 300px;
    width: 300px;
    margin: 60px;
    margin-top: 50px;
    text-align: center;
}
.box {
    background-color: #FFFFFF;
    margin-top: 15px;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T17:21:03.597

让... `.box`_`inline-block`

```
.box {
  display: inline-block;
} 
```

...并将其居中！

```
.container {
  text-align: center;
} 
```

将这两个片段添加到您的样式表并删除`width: 270px`应该就足够了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T17:26:35.923

您应该删除宽度或将其设置为 auto ：`width : auto`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T17:20:47.690

删除`width`上的`.box`，然后添加`display:inline-block`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T17:20:56.963

这会将容器 div 拉伸到父级的宽度。

```
.box {
    width:100%;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-21T17:23:01.123

您可以做一个技巧，使内部 div 颜色不可见，使用健全的背景颜色作为父 div，现在将文本放入

```
<span style="background-color:#ffffff;" >Text </span> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-14T17:35:00.973

弹性盒更新

```
<!DOCTYPE html>
<meta charset="utf-8" />
<link rel="stylesheet" href="float.css">
<div class="container">
    <div class="box">Hello my name is jack</div>
</div>
<div class="container">
    <div class="box">Hello my name is jack</div>
</div> 
```

```
.container {
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: #ED8713;
  height: 300px;
  width: 300px;
  margin: 60px;
  margin-top: 50px;
}
.box {
  background-color: #FFFFFF;
  width: 270px;
  margin: 0 auto;
  margin-top: 15px;
  text-align: center;
} 
```

# c# - 数据包嗅探和会话

> ID：16133970
> 
> 赞同：1
> 
> 时间：2013-04-21T17:18:44.513
> 
> 标签：c#, .net, session, packet, sniffer

假设我有一个网站，并且我创建了一个包含加密密钥的会话。像 Fiddler 这样的数据包嗅探器能否获取该会话的内容，从而危及网站的安全性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:22:14.463

不，因为密钥永远不会通过服务器和浏览器之间的网络。会话变量存储在服务器机器的内存中。攻击者只有在获得对机器的访问权或可以从机器的内存中读取的情况下才能读取密钥

# android - 通话后返回上一个活动

> ID：16133972
> 
> 赞同：1
> 
> 时间：2013-04-21T17:18:55.753
> 
> 标签：android, android-intent, phone-state-listener

我正在使用 PhoneStateListener 来监听手机通话状态的变化。我正在做的是几秒钟后打个电话，然后回到以前的活动。但是，每次我再次回到活动时，它都会再次运行CallThread，我陷入了一次又一次调用的情况。有人可以帮忙吗？谢谢！

这就是我在活动的 onCreate() 方法中添加的内容。

```
 Thread CallThread = new Thread(CallRunnable);
    CallThread.start(); 
```

它将设置一个runnable来拨打电话。

```
Runnable CallRunable = new Runnable() {

    @Override
    public void run() {
        try {
            Thread.sleep(5 * 1000); //wait for 5 secs and then make phone call
        } catch (InterruptedException e) {
        }

        makePhoneCall(phoneNO);

    }
}; 
```

在我的 PhoneStateListener 中，

```
public class MyPhoneStateListener extends PhoneStateListener {

    private boolean isCalling = false;

    @Override
    public void onCallStateChanged(int state, String phoneNumber) {

        switch (state) {
        case TelephonyManager.CALL_STATE_OFFHOOK:
            isCalling = true;
            break;
        case TelephonyManager.CALL_STATE_IDLE:
            Log.i("Call", "IDLE");
            if (isCalling) {

                Intent i = new Intent(getIntent());
                i.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
                startActivity(i);

                isCalling = false;

            }
            break;
        default:
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:26:03.307

```
public class MyPhoneStateListener extends PhoneStateListener {

private boolean isCalling = true;
private int mCurrentState = TelephonyManager.CALL_STATE_IDLE;

@Override
public void onCallStateChanged(int state, String phoneNumber) {

if (state != mCurrentState) {    
    switch (state) {
        case TelephonyManager.CALL_STATE_OFFHOOK:
            break;
        case TelephonyManager.CALL_STATE_IDLE:
            Log.i("Call", "IDLE");
            if (isCalling) {

                Intent i = new Intent(getIntent());
                i.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
                startActivity(i);

                isCalling = false;

            }
            else {
                isCalling = true;
            }
            break;
        default:
            break;
        }
    mCurrentState = state;
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-22T04:50:56.537

当然它会再次打电话，因为每次你从电话空闲状态返回时，重新启动活动，所以它再次触发 onCreate，在那里放一个额外参数，这样你就可以检查它是新创建还是从电话返回或保存到 SharedPreference

# android - 如何在不产生异常的情况下检查文件是否存在？

> ID：16133975
> 
> 赞同：0
> 
> 时间：2013-04-21T17:19:18.420
> 
> 标签：android

我正在检查设备上是否存在文件，如下所示：

```
boolean fileExists = new File(fullPathName).isFile(); 
```

它工作正常，但如果文件不存在，logcat 会给我两个错误：

```
BitmapFactory | Unable to decode stream: java.io.FileNotFoundException: <fullPathName> ... 
```

和

```
JHEAD | can't open <fullPathName> ... 
```

如何在不产生异常的情况下检查文件是否存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:20:28.840

尝试这个

```
File f= new File(fullPathName);
if(f.exists())
{
} 
```

# c++ - 树莓派工具链上的 std::shared_future

> ID：16133977
> 
> 赞同：5
> 
> 时间：2013-04-21T17:19:52.383
> 
> 标签：c++, c++11, cross-compiling, raspberry-pi

我正在尝试为 Raspberry Pi 交叉编译一个大型项目。我正在使用由 crosstool-ng 构建的工具链，gcc 版本 4.7.3。当它看到 std::shared_future 时，编译会阻塞。我收到此错误：

```
test.cpp:5:27: error: aggregate 'std::shared_future<int> xxx' has incomplete type and cannot be defined 
```

这是产生该错误的源文件：

```
#include <future>

int main()
{
  std::shared_future<int> xxx;
  return 0;
} 
```

同样的源文件在 Rapsberry Pi 本身上编译成功。这是交叉工具工具链中的错误吗？有解决方法吗？我怎样才能让它成功编译？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T21:20:29.400

要拥有`shared_future`实现类而不仅仅是前向声明，您必须使以下预处理器条件等于 true ：`#if defined(_GLIBCXX_HAS_GTHREADS) && defined(_GLIBCXX_USE_C99_STDINT_TR1) && (ATOMIC_INT_LOCK_FREE > 1)`

根据您之前对@juanchopanza 的回答，您似乎有以下部分条件等于 true ：`if defined(_GLIBCXX_HAS_GTHREADS) && defined(_GLIBCXX_USE_C99_STDINT_TR1)`因为实现`thread`类是必要的。

最后，我们可以说这部分条件是 false `ATOMIC_INT_LOCK_FREE > 1`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T19:15:47.910

我在@backlash 和 Freenode 上#gcc 上的人们的帮助下解决了这个问题。Crosstool-NG 正在为 构建工具链`armv7`，而 Raspberry Pi 的编译器正在为`armv6`. 更改“架构级别”（目标选项 > 架构级别）以`armv6`允许我编译原始问题中发布的示例代码。此选项将 a 添加`--with-arch=armv6`到`gcc`. 希望这对将来的人有所帮助。

# php - PHP，HTML，如何在点击链接时显示表单？

> ID：16133999
> 
> 赞同：3
> 
> 时间：2013-04-21T17:22:22.230
> 
> 标签：php, html

我是 PHP 和 HTML 的初学者，现在我正在尝试构建登录和注册系统......假设在我的主页上我有两个表单，我希望它们出现在用户点击单词“LOGIN”时，或“注册”

所以我写了一个这样的php代码：

```
<?php
switch ($x)
{
    case 'register' :

?>
        <form action="login.php" method="POST">
        </form>

<?php
    break;

    case 'login':
?>
        <form action="register.php" method="POST">
        </form>
<?php
    break;
}
?> 
```

现在我写了一个这样的html代码：

```
<h1>Click here to <a href =""> Login</a> or <a href =""> Register</a></h1> 
```

那么，`<a href ="">`我怎样才能使`x`等于`'login'`或`'register'`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T17:40:42.917

尝试检查下面的这些代码！

**PHP 脚本：**

```
<?php
switch ($_GET['x']) {
    case 'register':
    echo '<form action="login.php" method="POST">
    </form>';
    break;
    case 'login':
    echo '<form action="register.php" method="POST">
    </form>';
    break;
}
?> 
```

**HTML 代码：**

```
<h1>Click here to <a href="page.php?x=login">Login</a> or <a href="page.php?x=register">Register</a></h1> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T17:40:27.790

那么php可以做到这一点，对我来说，jQuery将是最好的。您可以使用以下代码实现它：

```
jQuery:

<script type="text/javascript">
$(document).ready(function(){
    $("#panel1").hide();
    $("#panel2").hide();
    $(".btn-slide1").click(function(){
        $("#panel1").slideToggle("slow");
    });

    $(".btn-slide2").click(function(){
        $("#panel2").slideToggle("slow");
    });
});
</script> 
```

**HTML 代码：**

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<p class="slide"><a href="#" class="btn-slide1">Register</a></p>
<div id="panel1">
    Register Content will goes here!
</div>

<p class="slide"><a href="#" class="btn-slide2">Login</a></p>
<div id="panel2">
    Login Content will goes here!
</div> 
```

不要忘记查看[jQuery](http://jquery.com/)的官方页面以了解更多关于它的魔力！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T17:27:37.820

使用 javascript 或 jquery 表单

```
<a href ="" id="login"> Login</a>

<a href ="" id="register"> Register</a> 
```

//使用jquery

```
$("#login").click(function(){
//Show your login form here
});

$("#register").click(function(){
//Show your register form here
}); 
```