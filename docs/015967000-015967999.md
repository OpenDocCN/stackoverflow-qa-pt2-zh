# StackOverflow 问答 15967000-15967999

# android - 谷歌地图 v2 android 方法 getMap() 返回 null

> ID：15967000
> 
> 赞同：1
> 
> 时间：2013-04-12T08:54:25.197
> 
> 标签：android, android-fragments, android-maps-v2

在我的应用程序中，我以编程方式使用谷歌地图，但是当我调用 getMap() 时，它返回 null。即使我尝试过 onActivityCreated() 但它仍然返回 null。有人请帮助我..这是我的代码，

```
public void callMap() {
        try {
            int status = GooglePlayServicesUtil
                    .isGooglePlayServicesAvailable(mActivity);
            if (status == ConnectionResult.SUCCESS) {
                Log.d("sreedhu", "Google Play Service Available");
                gmo = (new GoogleMapOptions()).zoomControlsEnabled(true)
                        .rotateGesturesEnabled(true);
                mapFragment = SupportMapFragment.newInstance(gmo);
                map=mapFragment.getMap();   
                manager=getFragmentManager();
                FragmentTransaction fragmentTransaction = manager
                .beginTransaction();
                fragmentTransaction.add(R.id.mapFragmentHole, mapFragment);
                fragmentTransaction.commit();           
                manager.executePendingTransactions();
                            mapFragment=getMap();
            } else if (GooglePlayServicesUtil.isUserRecoverableError(status)) {
                ErrorDialogFragment.newInstance(status).show(
                        getFragmentManager(), "errorDialog");
            } else {
                Toast.makeText(mActivity, "Google Map v2 not available",
                        Toast.LENGTH_LONG).show();
                mActivity.popFragments();
            }

        } catch (Exception e) {
            Log.d("sreedhu", "play" + e.toString());
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-12T03:20:59.847

最后，我解决了这个问题......

我在 onCreateView 上包含以下片段，它解决了我的问题，

```
SupportMapFragment mFragment;
     mFragment = new SupportMapFragment() {
                @Override
                public void onActivityCreated(Bundle savedInstanceState) {
                    super.onActivityCreated(savedInstanceState);
                    if ((map = mFragment.getMap()) != null) {
                        setUpMap();
                    }
                }
            }; 
```

准备好地图后，将在此处调用 SuppotMapFragment 的 onActivityCreated，您可以设置地图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T14:20:28.583

executePendingTransactions 似乎不像您期望的那样工作。

从代码创建 MapFragment 时，在调用其 onCreateView 之前，您不会从中获取 GoogleMap。

您需要`map=mapFragment.getMap();`在 onStart 或 onResume 中调用它之后的所有代码。

# c# - Visual Studio 2010 创建编译代码的应用程序

> ID：15967005
> 
> 赞同：4
> 
> 时间：2013-04-12T08:54:46.463
> 
> 标签：c#, c++, c, compilation

我希望能够从我创建的另一个应用程序中编译代码。

### 很长的故事：

我正在使用 SDL 从头开始​​创建 2D 引擎（请不要评论什么更好用）。我了解如何使用 SDL 库并且可以创建简单的游戏。但是，我想致力于更大的项目，但我需要创建一个应用程序来帮助我组织代码和整个系统。基本上，这个程序是一个编辑器（很像unity或UDK，但当然没有那么先进）。使用代码编辑器等对实际应用程序进行编程并不难，但我的问题是如何获取该代码并将其编译、运行和/或导出为 exe？（获取代码和脚本并将它们放入架构中进行编译不是问题，而是知道如何编译它的想法）。

这对我来说是一个新想法，谷歌搜索并没有给我想要的结果，所以我决定来到 StackOverflow，因为我以前在这里得到了很多问题的回答，而不必问（顺便说一句，你们很棒）。

### TL;DR 版本：

从另一个自制应用程序编译代码。

（我的想法是使用 C# 作为界面或 gui，然后使用 C/C++ 作为实际引擎）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:38:48.530

我的回答是基于我会做什么（至少在开发期间）： **使用现有组件。**即一个编辑器和一个脚本编译器；

对于您的编辑器，您可以使用[Avalon Edit](http://www.codeproject.com/Articles/42490/Using-AvalonEdit-WPF-Text-Editor)

对于您的编译/脚本需求，请使用[CS-Script](http://www.csscript.net/)

您可以在 4 到 5 小时内启动并运行这些脚本，并且您几乎可以通过一些工作来热交换实体脚本。

只需有一个基本的 exe，它可以读取项目的根脚本文件并开始运行它。

见鬼，我敢打赌，你甚至可以获取 CS-Script 在内存中生成的程序集并保存以供以后使用。

如果您随后通过了“制造新引擎-车轮-改造”阶段，您可以回来支持其他语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:13:07.963

如果您正在谈论构建像 Unity 这样的视觉编辑环境 - 可以托管渲染的视觉效果、游戏引擎变量的 UI 句柄、音频编辑以及脚本编辑和这些脚本的编译，那么您将需要使用 MSBuild 之类的东西。

由于您声明您可以控制项目文件的打包和管理，并假设您打算构建此自定义界面以对 Visual Studio 解决方案引用的文件进行修改，那么您需要做的就是调用 MSBuild使用适当的命令行参数。

请参阅：[MSBuild (MSDN)](http://msdn.microsoft.com/en-ca/library/vstudio/ms164311.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:29:39.410

如果您更多地谈论编辑方面，那么也许 Visual Studio Shell: [Wikipedia](https://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Extensibility)会说以下内容：

> Visual Studio 2008 引入了允许开发定制版 IDE 的 Visual Studio Shell。Visual Studio Shell 定义了一组提供任何 IDE 所需功能的 VSPackage。最重要的是，可以添加其他软件包来自定义安装。shell 的隔离模式会在安装包的位置创建一个新的 AppId。这些将使用不同的可执行文件启动。它旨在为特定语言或特定场景开发自定义开发环境。集成模式将软件包安装到专业/标准/团队系统版本的 AppId 中，以便工具集成到这些版本中。 [16] Visual Studio Shell 可免费下载。

你可以让这个 shell 调用任何编译器……不过需要做*很多*工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T10:50:05.090

You can have a look at the following:

```
var csc = new CSharpCodeProvider(new Dictionary<string, string>() { { "CompilerVersion", "v3.5" } });
var parameters = new CompilerParameters(new[] { "mscorlib.dll", "System.Core.dll" }, "foo.exe", true);
parameters.GenerateExecutable = true;
CompilerResults results = csc.CompileAssemblyFromSource(parameters,
@"using System.Linq;
    class Program {
      public static void Main(string[] args) {
        var q = from i in Enumerable.Rnge(1,100)
                  where i % 2 == 0
                  select i;
      }
    }");

results.Errors.Cast<CompilerError>().ToList().ForEach(error => Console.WriteLine(error.ErrorText)); 
```

This code will compile the code in the `results` variable and output it to `foo.exe`.

# mongodb - AngularJS + MongoLab JSON 响应未显示在视图中

> ID：15967007
> 
> 赞同：2
> 
> 时间：2013-04-12T08:54:47.377
> 
> 标签：mongodb, angularjs

我编写了一个基本的 angularJS + mongoLab 应用程序。获取数据的代码工作正常，在 Chrome 开发者工具中我可以看到响应为：

```
[ { "_id" : { "$oid" : "5166c406e4b08774fa6844a9"} , "tag" : "Software Developer"} , { "_id" : { "$oid" : "51679cbde4b05c7db8d21e70"} , "tag" : "Project Management"} ] 
```

在我看来，我有：

```
<ul>
                <li ng-repeat="tagz in tags">
                    {{tagz.tag}}
                </li>
            </ul> 
```

但是当我在浏览器上显示时，我看到的只是

*   点，但不显示标签值。我的控制器有：

    ```
    'use strict';
    // Define our root-level controller for the application.
            Riadd.controller(
                "AppController",
                function( $scope, $route, $routeParams, Tags){

                    // Update the rendering of the page.
                    var render = function(){
                        $scope.tags = Tags;

                        // Pull the "action" value out of the
                        // currently selected route.
                        var renderAction = $route.current.action;

                        // Also, let's update the render path so that
                        // we can start conditionally rendering parts
                        // of the page.
                        var renderPath = renderAction.split( "." );

                        // Grab the username out of the params.
                        //
                        // NOTE: This will be undefined for every route
                        // except for the "contact" route; for the sake
                        // of simplicity, I am not exerting any finer
                        // logic around it.
                        var username = ($routeParams.username || "");

                        // Reset the booleans used to set the class
                        // for the navigation.
                        var isHome = (renderPath[ 0 ] == "home");
                        var isFriends = (renderPath[ 0 ] == "friends");
                        var isContact = (renderPath[ 0 ] == "contact");

                        // Store the values in the model.
                        $scope.renderAction = renderAction;
                        $scope.renderPath = renderPath;
                        $scope.username = username;
                        $scope.isHome = isHome;
                        $scope.isFriends = isFriends;
                        $scope.isContact = isContact;

                    };

                    // Listen for changes to the Route. When the route
                    // changes, let's set the renderAction model value so
                    // that it can render in the Strong element.
                    $scope.$on(
                        "$routeChangeSuccess",
                        function( $currentRoute, $previousRoute ){

                            // Update the rendering.
                            render();

                        }
                    );

                }
            ); 
    ```

    知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:29:25.917

请参考[https://github.com/pkozlowski-opensource/angularjs-mongolab-promise/blob/master/README.md](https://github.com/pkozlowski-opensource/angularjs-mongolab-promise/blob/master/README.md)

恕我直言，而不是

```
$scope.tags = Tags; 
```

你会需要

```
Tags.all(function(tags){
  $scope.tags = tags;
}); 
```

# php - CSS Layout and tag not working together and passing validation

> ID：15967011
> 
> 赞同：0
> 
> 时间：2013-04-12T08:55:02.623
> 
> 标签：php, html, css, validation

Sorry for the really dumb title but I dont know how else to phrase it.

Well I have my `index.php` which provides a nice *frame* layout for my HTMl using CSS and `divs`. Each page i.e the *header*, *navigation bar*, *footer* etc. are added in the `div` via PHP `include(..)`.

Here is my `index.php`:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Test</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <style type="text/css" media="screen">

            html, body{
                padding: 0;
                margin: 0 auto;
                height: 100%;
            }

            #header {
                width: 100%;
                height: 15%;
                background-color: green;
            }

            #navbar {
                float: left;
                width: 20%;
                height: 70%;
                background-color: red;
            }

            #content {
                float: right;
                width: 80%;
                height: 70%;
                background-color: blue;
            }
            #footer {
                clear: both;
                width: 100%;
                height: 15%;
                background-color: yellow;
            }

        </style>
    </head>
    <body>
        <div id="header"> 
            <?php 
                include("header.html"); 
            ?>
        </div>
        <div id="navbar"> 
            <?php 
                include("nav.php"); 
            ?>
        </div>
        <div id="content"> 
            <?php 
                include("home.html"); 
            ?>
        </div>
        <div id="footer"> 
            <?php 
                include("footer.php"); 
            ?>
        </div>
    </body>
</html> 
```

Now look here in `<body>` tag of `index.php`:

```
<div id="header"> 
    <?php 
        include("header.html"); 
    ?>
</div> 
```

this piece will of course add my `header.html` which looks like this:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <title>Title</title>
        <meta http-equiv="content-type"
        content="text/html; charset=iso-8859-1"
        />
    </head>

    <body>
        <p align="center">TITLE PAGE</p>
    </body>

</html> 
```

producing this:

![enter image description here](https://i.stack.imgur.com/xXEMU.png)

See that white bar at the top of *TITLE PAGE*? Well thats not meant to be there...

And if I add anything to my actual `<body>` of `header.html` i.e:

```
<body>
    Hello
    <p align="center">TITLE PAGE</p>
</body> 
```

Notice how the white bar disappears and web browser does not have the scrollbar anymore? everything works just peachy - well besides that random text needed to clear the white bar:

![enter image description here](https://i.stack.imgur.com/qfHDM.png)

So basically my question is why is this happening and how would I go about fixing it?

**UPDATE:**

Fixed white bar by setting

margin in header.html to 0 (+1 @Imperative):

```
<p align="center" style="margin: 0;">TITLE PAGE</p> 
```

Now I would just like to know wether or not I am doing right by including DOCTYPE html header title etc tags each time I create a new html? Or should I only do this once in my index.php? If so than how would I make my header.html pass validation at [http://validator.w3.org/](http://validator.w3.org/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:59:41.950

You are including a whole html page into your page, with `<head>` definitions etc..

The header.html should look like this `<p align="center">TITLE PAGE</p>` only. Same applies for the other includes.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:02:49.253

do not add anything in BODY if you are using include, just write down what you need without BODY, by including another BODY you just mess everything around.

your header.php should look like this

```
<center>TITLE PAGE</center> 
```

DONT ADD `<p>` that is messing everything.

# android - Eclipse Web 服务和 Android 设备

> ID：15967014
> 
> 赞同：0
> 
> 时间：2013-04-12T08:55:12.130
> 
> 标签：android, eclipse, jakarta-ee

我正在使用 eclipse 运行用 Java EE 编写的 Web 服务。因此该服务在本地网络上启动（192.168.1.1 类似）。我的 Android 设备连接到计算机，连接到 WiFi。我的问题是：是否可以从我的 Android 设备访问 Web 服务而不在服务器上发布服务？（我无法通过 http://192.168.1.1:8080/myWebService/ 访问它...因为我不在同一个网络）

我尝试在我的设备连接到计算机网络时使用计算机网络，但 Windows 7 似乎不可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:09:44.183

正如我在评论中提到的，您必须使用`IP`具有服务器的计算机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:07:32.450

我也有同样的问题。如果你想从你的设备访问本地主机，这里有一个很好的教程： [http ://www.mobitechie.com/android-2/how-to-access-localhost-on-android-over -无线上网/](http://www.mobitechie.com/android-2/how-to-access-localhost-on-android-over-wifi/)

# ios - 在应用启动时设置 UISlider 值

> ID：15967015
> 
> 赞同：0
> 
> 时间：2013-04-12T08:55:12.153
> 
> 标签：ios, reset, uislider

我有一个`UISlider`从 0 到 1 的值。

问题是如果我将它滑动到一个值，然后关闭应用程序并重新打开应用程序，UISlider 将保持在滑动设置的值上。基本上它会记住上次使用的值。

我尝试了一些代码来设置它，以便当 ViewController 出现但它不起作用时它总是可以为 0。我在以下代码中尝试了此代码`viewDidLoad`：

```
mySlider.value = 0; 
```

我也试过这个：

```
[mySlider setValue:0] 
```

但它们都不起作用。

当应用程序打开时，如何让 UISlider 始终处于 0 状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T08:58:01.780

如果您不想看到滑块值发生变化，请将您的代码 ( `[mySlider setValue:0]`)放入，如果您想看到它发生变化，请将其放入。`viewWillAppear``viewDidAppear`

`viewDidLoad`仅在创建视图时调用，在加载后显示它时不会调用（例如，退出应用程序并返回，从 a 的导航中的推送/弹出返回`UINavigationController`等）。

*注意你可以使用这个方法：`[mySlider setValue:0 Animated:YES];`如果你想看动画。*

# javascript - 车把，如果有的话

> ID：15967020
> 
> 赞同：2
> 
> 时间：2013-04-12T08:55:21.153
> 
> 标签：javascript, handlebars.js

我有一个车把的视图，我想在其中检查变量 IF js == 'foo'

```
<div class="title"><label for="inputSearch">{{#if variable == 'foo'}} AAA {{else}} BB {{/if}}</label></div>
  <ul class="top-buttons">
    <li class="back"><a href="#" id="priev_es">Wstecz</a></li>
    <li class="more"></li>
  </ul>
</div> 
```

但是我在控制台中有这个错误：

```
handlebars.js:286Error: Parse error on line 2:
{{#if variable == 'foo'}} AAA {{else
----------------^
Expecting 'DATA', 'STRING', 'INTEGER', 'BOOLEAN', 'ID', got 'EQUALS' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:08:51.037

Handlebars 没有用于执行相等检查的内置语法。

你必须将这种逻辑放在你的 JavaScript 中，而不是你的模板中。

您可以[将其表达为可以从模板中调用的助手](http://handlebarsjs.com/expressions.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T11:31:03.180

您必须向绑定到名称“语言”的匿名函数发送参数，然后比较这两个参数并返回真或假。根据返回值在车把中使用 if else

# jquery - 将 var 从 background.js 传递给 popup.js

> ID：15967023
> 
> 赞同：0
> 
> 时间：2013-04-12T08:55:26.683
> 
> 标签：jquery, google-chrome-extension

我想将一个变量`"word"`从*background.js*发送到*popup.js*，它将在一个函数中进行处理。问题是我无法发送该变量并以任何方式启动*popup.js*。

我试过了：

```
chrome.runtime.sendMessage({valoare: word},function atribut(word){}); with and without the function attached. 
```

据我所知，我可以在没有直接来自*popup.js的请求的情况下访问它，但在**popup.js*下没有任何工作。

```
var selection = chrome.extension.getBackgroundPage().word;
alert(selection); 
```

我知道*popup.js*仅在我单击页面操作时才会触发，但随后什么也没有发生。

*弹出.html*：

```
<html>
<head>
<script src='jquery-1.9.1.min.js'></script>
<script src='jquery-ui.js'></script>
<script type="text/javascript" src="jquery.googleSuggest.js">
<link class="jsbin" href="jquery-ui.css" rel="stylesheet" type="text/css" />
<link type="text/css" rel="stylesheet" href="suggest.min.css" />
<script src="popup.js"></script>
<link rel="stylesheet" href="mystyle.css" type="text/css" />
<meta charset=utf-8 />
</head>
<body>
<div id="pop">
     <label for="term">Suggested term: </label>
     <input id="term" style="display: none;"type="text" value=""/>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:21:05.023

由于您想要的变量在后台页面中，并且仅在您打开它时才加载弹出窗口，因此您可以使用[消息传递](http://developer.chrome.com/extensions/messaging.html)来执行此操作。在这种情况下，最好从弹出窗口向后台页面发送消息，如下所示：

**popup.js**

```
chrome.runtime.sendMessage({method:"getWord"},function(response){
  //here response will be the word you want
  console.log(response);
}); 
```

**背景.js**

```
chrome.runtime.onMessage.addListener(function(message,sender,sendResponse){
  if(message.method == "getWord"){
    //depending on how the word is stored you can do this in one of several ways
    // 1\. If it is a global variable, we can just return it directly
    sendResponse(word);
    // 2\. It needs to be retrieved asynchronously, in that case we do this
    getWord(sendResponse);
    return true;
    // This passes the ability to reply to the function where we get the info
    // Once we have the info we can just use sendResponse(word); like before
  }
}); 
```

编辑：好的，所以我拿走了你的代码并编辑了一些，但最初的“有效！” 弹出窗口没有任何变化。这些将有助于防止将来出现问题。

**清单.json**

```
"permissions": [
  "tabs", "https://twitter.com/*"
],
"content_scripts": [{
  "matches": ["https://twitter.com/*"],
  "js": ["jquery-1.9.1.min.js", "myscript.js"],
  "css": ["mystyle.css" , "jquery-ui.css", "suggest.min.css"]
}], 
```

我删除了重复的权限，您试图在该`js`部分中注入一个 css 文件。

**背景.js**

```
chrome.runtime.onMessage.addListener(function (msg, sender, sendResponse) {
  if(msg.check)
    word = msg.check;
  if(msg.method == "getWord")
    sendResponse(word);
}); 
```

**脚本.js**

```
//get the word you want to send
chrome.runtime.sendMessage({check: word}); 
```

你有多个`onMessage`听众，我把他们结合起来。

通过这些更改，当单击页面操作时，会弹出第一个弹出窗口，然后是一个空的弹出窗口，因为 word 永远不会设置为任何内容。

# android - 如何在 Android 上使用参数 ping 某些网站？例如指定数据包大小和 ping 时间？

> ID：15967025
> 
> 赞同：0
> 
> 时间：2013-04-12T08:55:39.513
> 
> 标签：android, ping

我发现了一些 Stack Overflow 问题，例如[Ping Application in Android](https://stackoverflow.com/questions/14576710/ping-application-in-android)。它像这样使用它：

```
Process process = Runtime.getRuntime().exec(
            "/system/bin/ping -c 8 " + url); 
```

如何指定数据包大小和 ping 时间？比如我要ping 10次，指定包长度为1472字节。我怎样才能做到这一点？示例代码是首选。

当我修改为

```
Process process = Runtime.getRuntime().exec(
            "/system/bin/ping -c 8 -s 1472" + url); 
```

这没用。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T08:59:56.627

该`ping`命令的选项是：

```
shell@android:/ $ ping 
Usage: ping [-LRUbdfnqrvVaA] [-c count] [-i interval] [-w deadline]
        [-p pattern] [-s packetsize] [-t ttl] [-I interface or address]
        [-M mtu discovery hint] [-S sndbuf]
        [ -T timestamp option ] [ -Q tos ] [hop1 ...] destination 
```

# ruby-on-rails - nil:NilClass 的未定义方法“更新”

> ID：15967027
> 
> 赞同：1
> 
> 时间：2013-04-12T08:55:52.560
> 
> 标签：ruby-on-rails, ruby

任何人都知道我该如何解决这个错误？这里有更多信息——

错误信息：

```
NoMethodError in PostsController#create
undefined method `update' for nil:NilClass 
```

PostsController 创建：

```
class PostsController < ApplicationController

  def create
    @twitter_user.update(@post.content)
  end 
```

这是在我的 user.rb 模型中定义 @twitter_user 的方式

```
 def twitter
    unless @twitter_user
      provider = self.authentications.find_by_provider('twitter')
      @twitter_user = Twitter::Client.new(:token => provider.token, :secret => provider.secret) rescue nil
    end
    @twitter_user
  end 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:02:53.417

如果`@twitter_user`在您的用户模型中定义，您将无法在控制器中访问它。方法中带有`@`前缀的变量属于该类的一个实例。

如果您想`@twitter_user`在控制器中访问，也许将该 twitter 方法移动到应用程序控制器：

```
class ApplicationController
  def twitter
    unless @twitter_user
      provider = User.find_by_provider('twitter')
      @twitter_user = Twitter::Client.new(:token => provider.token, :secret => provider.secret) rescue nil
    end
    @twitter_user
  end
end 
```

然后您可以使用任何控制器方法访问它`twitter`：

```
class PostsController < ApplicationController

  def create
    twitter.update(@post.content)   
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:22:33.433

模型和控制器不共享实例变量，因此`@twitter_user`内部`PostsController`与`User` 类内部的不同（我想它派生自`ActiveRecord::Base`）。您必须在控制器内部进行初始化`@twitter_user`。

你可以像这样重构你的代码：

```
class User < ActiveRecord::Base
  def twitter_user
    provider = self.authentications.find_by_provider('twitter')
    Twitter::Client.new(:token => provider.token, 
                        :secret => provider.secret)
  rescue
    return nil
  end
end

class PostsController < ApplicationController
  def create
    # I suppose your User instance is accessible 
    # through the method current_user
    @twitter_user = current_user.twitter_user
    @twitter_user.update(@post.content)
  end
end 
```

# javascript - JavaScript / Google 搜索，我的网址无法正常工作

> ID：15967030
> 
> 赞同：0
> 
> 时间：2013-04-12T08:55:59.257
> 
> 标签：javascript, html, google-api

我在这里工作的网站中设置了谷歌搜索：http: [//www.atis.com/search.php](http://www.a-t-i-s.com/search.php)

如果我将 url 设置为搜索“www.atis.com”以外的任何内容，它可以正常工作，但是当它设置网站 url 时它根本不起作用，用于搜索的 JavaScript 文件位于此处：[http ://atis.com /static/js/search_script.js](http://a-t-i-s.com/static/js/search_script.js)

正如您所看到的，它当前设置为 google 只是为了显示一些结果。

有没有人遇到过这个问题？我发现一些论坛帖子有同样的问题，但没有人回复他们我在搜索谷歌时找不到关于这个问题的任何其他内容。

如果有人能阐明这个问题，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:56:18.077

这个网站真的是谷歌索引中的新网站还是最近提交的？如果是这样，它可能会解释为什么你没有得到任何结果。

我可以通过常规搜索看到一些返回的 URL，但我想知道谷歌是否可能没有 100% 完全索引它。我查看了代码和网络调用，从我可以看到底层调用只是不返回任何结果数据，所以理论上没有结果响应实际上是正确的。

这让我怀疑您的代码 (HTML/JS) 没有问题，但无论出于何种原因，Google 都没有提供结果。

如果我们切开所有内容，只查看原始的底层 ajax 调用 URL（如果您的真实 IP，请替换 YOUR_IP_ADDRESS）：

[https://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=site:www.atis.com&userip=YOUR_IP_ADDRESS](https://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=site:www.a-t-i-s.com&userip=YOUR_IP_ADDRESS)

我们得到这个结果：

```
{"responseData": {"results":[],"cursor":{"moreResultsUrl":"http://www.google.com/search?oe\u003dutf8\u0026ie\u003dutf8\u0026source\u003duds\u0026start\u003d0\u0026hl\u003den-GB\u0026q\u003dsite:www.a-t-i-s.com","searchResultTime":"0.04"}}, "responseDetails": null, "responseStatus": 200} 
```

如果我们尝试另一个名称中包含连字符的站点，以防万一这可能会导致问题：

[https://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=site:ba-mro.com&userip=YOUR_IP_ADDRESS](https://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=site:ba-mro.com&userip=YOUR_IP_ADDRESS)

我们得到结果：

```
{"responseData": {"results":[{"GsearchResultClass":"GwebSearch","unescapedUrl":"http://www.ba-mro.com/","url":"http://www.ba-mro.com/","visibleUrl":"www.ba-mro.com","cacheUrl":"http://www.google.com/search?q\u003dcache:-mTL9fY7-j4J:www.ba-mro.com","title":"British Airways - Engineering - MRO","titleNoFormatting":"British Airways - Engineering - MRO","content":"British Airways Engineering Maintenance Repair and Overhaul Services - BA   MRO. British Airways Engineering has over 80 years of experience in providing \u003cb\u003e...\u003c/b\u003e"},{"GsearchResultClass":"GwebSearch","unescapedUrl":"http://www.ba-mro.com/baemro/lineMaintenance.shtml","url":"http://www.ba-mro.com/baemro/lineMaintenance.shtml","visibleUrl":"www.ba-mro.com","cacheUrl":"http://www.google.com/search?q\u003dcache:Yik3_muq8ToJ:www.ba-mro.com","title":"British Airways - Engineering - Line Maintenance","titleNoFormatting":"British Airways - Engineering - Line Maintenance","content":"British Airways Engineering Line Maintenance. We are always ready, With over   100 line maintenance stations worldwide, British Airways Engineering and its \u003cb\u003e...\u003c/b\u003e"},{"GsearchResultClass":"GwebSearch","unescapedUrl":"http://www.ba-mro.com/baemro/engStations.shtml","url":"http://www.ba-mro.com/baemro/engStations.shtml","visibleUrl":"www.ba-mro.com","cacheUrl":"http://www.google.com/search?q\u003dcache:mlII7nPYfXkJ:www.ba-mro.com","title":"British Airways - Engineering - Interactive Facilities Map","titleNoFormatting":"British Airways - Engineering - Interactive Facilities Map","content":"British Airways Engineering Interactive Facilities Map. The interactive facilities   map shows all of British Airways Engineering\u0026#39;s facilities and their capabilities \u003cb\u003e...\u003c/b\u003e"},{"GsearchResultClass":"GwebSearch","unescapedUrl":"http://www.ba-mro.com/baemro/engineeringServices.shtml","url":"http://www.ba-mro.com/baemro/engineeringServices.shtml","visibleUrl":"www.ba-mro.com","cacheUrl":"http://www.google.com/search?q\u003dcache:4amHsba6jB4J:www.ba-mro.com","title":"British Airways - Engineering - Engineering and Maintenance Services","titleNoFormatting":"British Airways - Engineering - Engineering and Maintenance Services","content":"British Airways Engineering and Maintenance Services. At British Airways we   listen to our customers and we know that every operator wants a different level of \u003cb\u003e...\u003c/b\u003e"}],"cursor":{"resultCount":"46","pages":[{"start":"0","label":1},{"start":"4","label":2},{"start":"8","label":3},{"start":"12","label":4},{"start":"16","label":5},{"start":"20","label":6},{"start":"24","label":7},{"start":"28","label":8}],"estimatedResultCount":"46","currentPageIndex":0,"moreResultsUrl":"http://www.google.com/search?oe\u003dutf8\u0026ie\u003dutf8\u0026source\u003duds\u0026start\u003d0\u0026hl\u003den-GB\u0026q\u003dsite:ba-mro.com","searchResultTime":"0.09"}}, "responseDetails": null, "responseStatus": 200} 
```

您可能想在 Google AJAX 搜索 API 组中发布问题，因为这可能是错误或其他问题：

[https://groups.google.com/forum/?hl=en&fromgroups#!forum/Google-AJAX-Search-API](https://groups.google.com/forum/?hl=en&fromgroups#!forum/Google-AJAX-Search-API)

# java - Fish Eye effect on a JLabel

> ID：15967032
> 
> 赞同：0
> 
> 时间：2013-04-12T08:56:05.857
> 
> 标签：java, multithreading, swing, hover, jlabel

I am trying to implement a [Fish Eye Image Menu](http://www.google.com/search?q=Fish%20Eye%20Image%20Menu&hl=en&tbm=isch&tbo=u&source=univ&sa=X) in a [JavaBean](http://docs.oracle.com/javase/tutorial/javabeans/). As a start, I created a `JLabel` and put this code on the `mouseEntered` event. But when I run this, the output is shaky and doesn't re-size the `JLabel`.

This is my code.

```
new Thread() {
  public void run() {
    for (int i = 0; i &lt; 30; i++) {
      int x = imgLabel.getWidth()+1;
      int y = imgLabel.getHeight()+1;
      imgLabel.setSize(x , y );

      // sets the icon to the label
      imgLabel.setIcon(new ImageIcon(new ImageIcon(getClass().getResource("/pics/icon.png")).getImage().getScaledInstance(x , y, Image.SCALE_DEFAULT)));
      repaint();
      try {
        Thread.sleep(10);
      } catch (InterruptedException ex) {
        ex.printStackTrace();
      }
    }
  }
}.start(); 
```

If I comment that line where I set the image to the JLabel, the label gets re-sized perfectly.
Where has this gone wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:33:36.170

The problem is that getScaledInstance() together with resource loading is slow. Do these calculations once and cache them (in an array of 30 items). Not every time in the for loop.

Another thing: make sure you use a Swingworker for your animation, that helps in the timing and avoids setting icons outside the Event Dispatch Thread (EDT).

# python - Python IDLE：cmd-v 粘贴在 OS X 上不起作用

> ID：15967035
> 
> 赞同：2
> 
> 时间：2013-04-12T08:56:07.807
> 
> 标签：python, macos, keyboard-shortcuts, macports, python-idle

我在 OS X 10.8.3 上使用 Python 2.7.3，安装了 MacPorts。如果我在 IDLE 中的内容上点击`command`+`c`或`command`+ ，我可以将其与+一起粘贴到其他应用程序中。但是，我不能使用+粘贴到 IDLE 本身，无论是从其他应用程序还是从 IDLE 中。`x``command``v``command``v`

如果我在 IDLE 中突出显示内容，右键单击鼠标将复制（即粘贴）该内容。这是一种解决方法，但是不能从 IDLE 之外粘贴 URL 或代码很烦人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:06:52.647

确保光标在最后一个 . 之后有多个空格`>>>`。除非你这样做，否则它不会粘贴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T17:25:09.333

cmd+C 和 cmd+V 命令也不适合我，所以我删除了它们（和 macports），然后从 python.org 网站安装了 python。我只需要 numpy 和 matplotlib，所以我从他们的源代码中安装了它们并且它可以工作。

这不是一个解决方案，但损坏的热键似乎与 x11 （[https://mail.python.org/pipermail/python-list/2010-January/563387.html](https://mail.python.org/pipermail/python-list/2010-January/563387.html)）有关。我安装了 XQuartz ( [http://xquartz.macosforge.org/landing/](http://xquartz.macosforge.org/landing/) ) 但它仍然没有帮助，所以我只是删除了所有内容。

# python - 高级搜索列表索引超出范围错误

> ID：15967037
> 
> 赞同：0
> 
> 时间：2013-04-12T08:56:10.300
> 
> 标签：python, django, search, advanced-search

这是我编写的代码，用于对某些具有属性的子通道进行高级搜索的结果，并且每个属性的值在不同的表中它给了我这个错误：第 35 行的列表索引超出范围

```
sub_id = request.GET['sub_ch_id']
attributes = Attribute.objects.filter(subchannel_id = sub_id)
values =[]
print "attributes"
# print request
post = []
value_obj =[]
for w in attributes:
    name = w.name
    print request.GET[name]
    values.append(request.GET[name])
result_search_obj = []
flag = False
result_search = []
result = []
post = []
i = 0
f = i+1
# post_temp = ""

# print "HIIIIII", len(result_search_obj)
for j in range(0,len(attributes)):
    # print 'EREEEEEEE'
    result_search_obj+=(Value.objects.filter(attribute_id = attributes[j].id 
        , value = values[j]))
    # print '1st loop'    
for k in range(0,len(result_search_obj)):
    # print '2 loop'
    for l in range(0,len(result_search_obj)):

        result_search[k].append(result_search_obj[k].Post_id)
        # print '4 loop'
for a in range(0,len(result_search)):

    result_search.sort(len(result_search[k]))
    # print '6 loop'
for h in range(0,len(result_search)):

    post_temp = ""
    # print '3 loop'
    for g in result_search[h]:
        tmp=result_search[h]
        loc = temp[g]
        if loc == result_search[h+1][g]:
            flag = True
            post_temp = tmp[g]
            break
    post = post_temp
print post

return HttpResponse('filter_post_channel.html', {'posts' : post}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:36:25.987

看起来您假设可以直接索引一个空列表以在任意位置添加元素。尝试插入线...

```
result_search = [[] for o in result_search_obj] 
```

...就在排队之前...

```
for k in range(0,len(result_search_obj)): 
```

..但是，正如其他人指出的那样，您不需要使用`range(len(x))`索引值相同的多个列表进行索引。如果你有类似...

```
list1 = [1, 2, 3]
list2 = [4, 5, 6]
for index in range(len(list1)):
    list2[index] = list1[index] 
```

...您可以使用...

```
list1 = [1, 2, 3]
list2 = [4, 5, 6]
for index, value in enumerate(list1):
    list2[index] = value 
```

# c++ - C++ strftime %b 没有按预期工作

> ID：15967039
> 
> 赞同：1
> 
> 时间：2013-04-12T08:56:12.837
> 
> 标签：c++, datetime, locale, strftime

我想在不同的语言环境中使用 C++ 打印时间戳，我在一个特定的主机上得到了 fr_FR 的奇怪输出。

这是代码，

```
#include <time.h>       /* time_t, struct tm, time, localtime, strftime */
#include <stdlib.h>
#include <locale.h>
#include <clocale>

#include <iostream>
using namespace std;

int main()
{
  time_t rawtime;
    struct tm * timeinfo;
      char buffer [32];

      setlocale(LC_ALL, "");
      cout << "LC_ALL: " << setlocale(LC_ALL, NULL) << endl;
      cout << "LC_CTYPE: " << setlocale(LC_CTYPE, NULL) << endl;

      time (&rawtime);
      timeinfo = localtime (&rawtime);

      strftime (buffer,sizeof(buffer),"%a %b %d %H:%M:%S %Y %Z",timeinfo);
      puts (buffer);

      return 0;
} 
```

在运行上述程序之前，我做了

```
export LANG=fr_FR.ISO8859-1 
```

它提供输出，

```
LC_ALL: fr_FR.ISO8859-1
LC_CTYPE: fr_FR.ISO8859-1
ven. avril 12 08:49:55 2013 UTC 
```

它为 %b 和 %B 提供相同的输出，当我检查另一台机器时，它按预期工作。输出，

```
LC_ALL: fr_FR.ISO8859-1
LC_CTYPE: fr_FR.ISO8859-1
jeu avr 11 23:26:24 2013 PDT 
```

在一台机器上，

```
$date +%b
avr
$date +%B
avril 
```

在问题机器中，

```
$date +%b
avril
$date +%B
avril 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-25T03:37:41.693

输出显示正确。

“avril”是“avril”[参考](http://library.princeton.edu/departments/tsd/katmandu/reference/months.html)的合法缩写。

“Avr”也是“avril”的缩写。法语月份“juin”和“juillet”都以相同的 3 个字母开头，这表明使用前 3 个字母并不总是有效。

C++ 没有指定如何缩写除默认语言环境以外的月份名称。因此，假设缩写很短，在一个语言环境中相同的长度或在世界范围内的各种操作系统中实现相同的长度是有问题的。

建议检查返回值`strftime()`。

# ios - 从远程 SQLite 获取数据

> ID：15967040
> 
> 赞同：0
> 
> 时间：2013-04-12T08:56:12.723
> 
> 标签：ios, objective-c, sqlite

首先，我创建了“subjects.sqlite”并将其插入到 Xcode 文件“Copy Bundle Resrources”中

我用了这段代码

```
NSData *fetchedData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.precaliga.com/iphone/subjects.sqlite"]];
    NSString *documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
    NSString *filePath = [documentsPath stringByAppendingPathComponent:@"subjects.sqlite"];
    [fetchedData writeToFile:filePath atomically:YES];

    NSFileManager *fileMgr = [NSFileManager defaultManager];

    BOOL success = [fileMgr fileExistsAtPath:filePath];
    if (!success) {
        NSLog(@"Cannot locate database file '%@'.", filePath);
    }
    else {
        self.db = [DBController sharedDatabaseController:filePath];
        DataTable* table = [_db  ExecuteQuery:@"SELECT * FROM subjects"];
        NSLog(@"%@",table.columns);
        NSLog(@"Downloaded Successfuly ..");
    } 
```

但是“table.columns”返回

2013-04-12 11:34:06.202 Precaliga [82123:c07] ( )

因为它不会读取下载的 sqlite 文件。那么我如何在下载功能后读取数据

提前谢谢..请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:39:04.857

尝试这个

```
NSData *fetchedData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.precaliga.com/iphone/subjects.sqlite"]];
NSLog(@"%d",fetchedData.length);
NSString *documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
NSString *filePath = [documentsPath stringByAppendingPathComponent:@"subjects.sqlite"];
if (![[NSFileManager defaultManager] fileExistsAtPath:filePath])
     [[NSFileManager defaultManager] createFileAtPath:filePath contents:fetchedData attributes:nil];
[fetchedData writeToFile:filePath atomically:YES];

NSFileManager *fileMgr = [NSFileManager defaultManager];

BOOL success = [fileMgr fileExistsAtPath:filePath];
if (!success)
{
    NSLog(@"Cannot locate database file '%@'.", filePath);
}
else
{
    NSLog(@"Downloaded Successfuly ..");
} 
```

**编辑**

将这些写入您的 AppDelegate.m

```
- (void) copyDatabaseIfNeeded
{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;
    NSString *folderPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES) objectAtIndex:0];
    // First, test for existence.
    if (![fileManager fileExistsAtPath:folderPath])
        [fileManager createDirectoryAtPath:folderPath withIntermediateDirectories:YES attributes:nil error:&error]; //Create folder

    NSString *dbPath = [folderPath stringByAppendingPathComponent:@"subjects.sqlite"];
    BOOL success = [fileManager fileExistsAtPath:dbPath];

    if(!success)
    {
        NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"subjects.sqlite"];
        success = [fileManager copyItemAtPath:defaultDBPath toPath:dbPath error:&error];
        if (!success)
            NSAssert1(0, @"subjects.sqlite : Failed to create writable database file with message '%@'.", [error localizedDescription]);
    }
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    /** Database copy is not exist **/
    [self copyDatabaseIfNeeded]; // Call this way
} 
```

# ios - drawInRect 一个透明的PNG图像：Objective C

> ID：15967041
> 
> 赞同：2
> 
> 时间：2013-04-12T08:56:22.320
> 
> 标签：ios, objective-c, drawing, transparent, drawrect

我有一个带有填充所有视图的图像的背景视图。在这个视图之上，我添加了另一个视图，`backgroundColor` `[UIColor clear]`其属性为 opaque to `NO`。

这是我想要发生的事情：

![期望的结果](https://i.stack.imgur.com/hXm4v.png)

这是发生的事情：

![目前的结果](https://i.stack.imgur.com/kkDHv.png)

我想在最后一个视图上方用`drawInRect:`. 问题是图像的所有透明度都被第一个视图（带有图像的那个）的像素填充。如果我这样做`addSubview:`问题是固定的，但我必须做一个平局。

有人有我的问题的答案吗？

# javascript - 浏览器是否完全加载检查

> ID：15967043
> 
> 赞同：3
> 
> 时间：2013-04-12T08:56:26.590
> 
> 标签：javascript, pageload

无论如何要检查页面是否已完全加载。类似[http://msdn.microsoft.com/en-us/library/system.web.ui.page.loadcomplete.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.page.loadcomplete.aspx)但对于 JAVA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:01:34.073

如果您打算在页面加载时在客户端执行逻辑，您可能对 Javascript[`onload`](http://www.w3schools.com/jsref/event_onload.asp)事件感兴趣。

或者，更好的是，考虑使用[jQuery](http://jquery.com/)并使用该[`ready()`](http://api.jquery.com/ready/)函数来执行您的逻辑。

只是一个使用 jQuery 的简短示例：

```
$(document).ready(function() {
    alert("The document, including all assets such as images, has been completely received");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:01:50.313

不是直接在java中，因为它可能不在浏览器中运行，但你可以用javascript来做

```
 <html>
    <head>
    <title>Test Page</title>
    <script type="text/javascript">var myFunc = function() {
      alert("The page is fully loaded!");
    };
    window.onload = myFunc;
    </script>
  </head> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T09:00:27.117

**1\. JQuery 将帮助您：**

有`$(document).ready()`哪个告诉你浏览器已加载。
例子：

```
$(document).ready(function(){
  $("button").click(function(){
    $("p").slideToggle();
  });
}); 
```

当 DOM（文档对象模型）已加载且页面已完全加载（包括图像）时，会发生 ready 事件。
因为这个事件是在文档准备好之后发生的，所以它是一个拥有所有其他 jQuery 事件和函数的好地方。就像上面的例子一样。

**2.Window onload 是另一种 JavaScript 方法：**

`window.onload=function(){SomeJavaScriptCode};`

onload 事件在对象已加载时发生。
onload 最常用于元素内，用于在网页完全加载所有内容（包括图像、脚本文件、CSS 文件等）后执行脚本。

**注意：主要区别在于 document.ready() 事件在 DOM 加载后立即被调用。它不会等待内容完全加载，而 window.onload 会等到所有内容都完全加载。
我们可以在一个页面中拥有多个 document.ready() 函数，而我们只能拥有一个 onload 函数。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T09:00:40.677

你可以使用普通的[onload()](http://www.w3schools.com/jsref/event_body_onload.asp)

```
<body onload="yourFunctionHere()"> 
```

或[JQuery 版本](http://api.jquery.com/ready/)

```
$(document).ready(function() {
  yourFunctionHere();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T09:00:52.130

不是在 Java 中，不是。你需要Javascript：

```
<script>  
  window.onload = function() {  
    alert('Loading Complete!');  
  }
</script> 
```

# wordpress - 在 wordpress 子主题中重写 URL

> ID：15967046
> 
> 赞同：0
> 
> 时间：2013-04-12T08:56:42.177
> 
> 标签：wordpress, url-rewriting

我正在制作一个 wordpress 儿童主题作为应用程序。我想重写主题中的 URL，因为它有时对 seo 更友好。

如果有人输入例如 www.domain.com/show-new-cars/

我希望服务器加载 www.domain.com/index.php?loadcars=1

我试图把它放在子主题文件夹functions.php中没有任何结果。

```
 add_action( 'init', 'wpse7379_init' );
function wpse7379_init()
{
add_rewrite_rule('show-new-cars/',
'index.php?loadcars=1',
'top');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:19:39.880

$wp_rewrite->flush_rules(); 成功了。

这是一个更新，因为每次页面加载时都没有使用刷新，因为它可以增加服务器负载分配。

```
//When activated trough admin
if ( is_admin() && isset($_GET['activated'] ) && $pagenow == 'themes.php' ) {

    add_action( 'init', 'wpse7379_init' );
    function wpse7379_init()
    {
    add_rewrite_rule('show-new-cars/',
    'index.php?loadcars=1',
    'top');
    }
    $wp_rewrite->flush_rules();

} 
```

# php - 如果使用 Zend Gdata Gapps retrieveAllUsers 函数，CakePHP 会显示白屏

> ID：15967049
> 
> 赞同：0
> 
> 时间：2013-04-12T08:56:45.080
> 
> 标签：php, database, session, cakephp

我有一个奇怪的问题。在我的 CakePHP 应用程序中，我将会话存储在数据库中。问题是，如果用户登录然后通过简单地关闭选项卡/窗口而不注销（`/logout`调用的链接`$this->Session>-destroy()`）退出，那么下次有人访问该站点并尝试登录时，用户会得到一个白屏。如果用户正确注销，一切都很好。

如果`/logout`手动调用链接，或者我从 中的会话表中删除记录`db`，或者如果我将 CakePHP 调试设置为`1`. 如果我切换到不同的会话存储引擎，一切正常，但是我继续使用`db`引擎很重要。

由于用户经常通过关闭窗口来退出应用程序，这成为了一个问题。在这种情况下，如何正确处理未破坏的**会话**？

谢谢

更新：经过一些测试，我发现真正的原因不是登录，而是使用 Zend Gdata 库获取 Google 帐户用户的功能。这是代码： App::import('Vendor','Zend Oauth Consumer', array('file' => 'Zend/Oauth/Consumer.php'));
App::import('Vendor','Zend Gdata Gapps', array('file' => 'Zend/Gdata/Gapps.php'));

```
 $CONSUMER_KEY = 'x';
    $CONSUMER_SECRET = 'y';

    $oauthOptions = array(
        'requestScheme' => Zend_Oauth::REQUEST_SCHEME_HEADER,
        'version' => '1.0',
        'signatureMethod' => 'HMAC-SHA1',
        'consumerKey' => $CONSUMER_KEY,
        'consumerSecret' => $CONSUMER_SECRET
    );

    $consumer = new Zend_Oauth_Consumer($oauthOptions);
    $token = new Zend_Oauth_Token_Access();
    $httpClient = $token->getHttpClient($oauthOptions);

    try {
        $client = new Zend_Gdata_Gapps($httpClient,$domain);

        $feed = $client->retrieveAllUsers(); //this line causes the white screen
        $_SESSION['googleUsers'] = array();

        foreach ($feed as $user) {
            $cuser = array($user->login->username,$user->name->givenName,$user->name->familyName);
            array_push($_SESSION['googleUsers'],$cuser);
        }
        $_SESSION['googleDomain'] = $domain;
    } catch (Exception $e) {
        $_SESSION['googleUsersError'] = 1;
    } 
```

在调试活动的情况下，一切正常，但是，当调试设置为 0 时，只会出现一个空白屏幕。我试图获取异常消息，但它也没有出现。似乎执行了“退出”或“死亡”。以前有人遇到过这样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:47:20.457

终于想出了如何解决这个问题。根据此页面 - [http://framework.zend.com/manual/1.12/en/zend.gdata.gapps.html#zend.gdata.gapps.nicknames.creating](http://framework.zend.com/manual/1.12/en/zend.gdata.gapps.html#zend.gdata.gapps.nicknames.creating)我将有问题的行更改`$feed = $client->retrieveAllUsers();`为`$feed = $client->getUserFeed()`，这似乎是替代功能。

# java - 如何在 android XML 中打开共享首选项数据

> ID：15967050
> 
> 赞同：0
> 
> 时间：2013-04-12T08:56:56.073
> 
> 标签：java, android, xml, sharedpreferences

我想做一个游戏关卡逻辑。游戏本身类似于标志问答游戏。它具有锁定和解锁级别。我需要根据共享首选项中保存的分数显示锁定和解锁级别。那么，如何访问 XML 文件中的 score 变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:00:14.607

在您的活动中声明这两个变量

```
android.content.SharedPreferences someData;
public static String filename = "mySharedString"; 
```

像这样初始化`Shared Preferences`：

```
someData = getSharedPreferences(filename, 0); 
```

你可以`Shared Preferences`像这样添加元素：

```
android.content.SharedPreferences.Editor editor = someData.edit();
            editor.putString("sharedString", stringData);
            editor.commit(); 
```

您可以像这样检索数据：

```
String dataReturned = someData.getString("sharedString","Couldn't load data"); 
```

如果共享首选项中不存在 ，`Couldn't load data`则将设置为`dataReturned`变量`sharedString`

还检查这个问题[How to use SharedPreferences in Android to store, fetch and edit values](https://stackoverflow.com/questions/3624280/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values)

# javascript - 如何在 JavaScript 中解析和搜索 JSON

> ID：15967053
> 
> 赞同：-2
> 
> 时间：2013-04-12T08:56:59.973
> 
> 标签：javascript, json, drop-down-menu

在组织更改时调用一个函数，其中选择的值存储到变量 org 中，并将选择的值与整个 json 进行比较，并且与所选组织对应的所有位置都打印在位置下拉列表中。这是我的代码

```
 var json = <?php echo $response ?>;
alert(json);
alert(json.length);
var org=document.getElementById('category_id').value;
alert(org);
for(var i=0;i<json.lenght;i++)
    {

    }
for(var i=0; i<json.length; i++)
    {
        var item = json[i];
        alert(item);   
}
}

my json is 

 [{"location":[{"building":["Default Building"],"name":"Default Location"}],"name":"Default Organization"},{"location":[{"building":["test_loc1_building1","test_loc1_building2"],"name":"test location1"},{"building":["test_loc2_building2"],"name":"test location2"}],"name":"test Organization"}] 
```

我的表单是我解析上述 json 并在我的 php fprm 中包含组织选项的地方，如下所示我还有 2 个位置和建筑物选项，这是我的表单，我的问题是当我选择一个组织时，选择的值是存储在变量中，并且该变量必须在 json 中搜索该特定值，并将包含所选组织的对象对象中的相应位置返回到下拉保存位置

```
<label for="orgname">Organisation Name</label>
                    <select style="width: 305px;text-align:left ;"  name="category_id" id="category_id" onchange="return orgname(this)";>
                    <option value="">Select</option>
                    <?php foreach($org as $key=>$val){?>
                    <option value="<?php echo $val; ?>"><?php echo $val;?></option>
<?php
}
?>                      </select>

                    <p>
        <label name="location">Location</label>

                     <select style="width: 305px;" name="category_id1" id="category_id1">
                     <option value="">Select</option>

                     </select>
                    </p>
                    <p>
        <label for="building">Building</label>

                    <select style="width: 305px" name="category_id2" id="category_id2" onchange="ajax(this);">
                    <option value="">Select</option>

                    </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:12:08.707

尝试这个

```
<script>
function orgname($org){    
    $org=$org.value;
var jsontext = '[{"location":[{"building":["Default Building"],"name":"Default Location"}],"name":"Default Organization"},{"location":[{"building":["test_loc1_building1","test_loc1_building2"],"name":"test location1"},{"building":["test_loc2_building2"],"name":"test location2"}],"name":"test Organization"}] ';
var newArr = JSON.parse(jsontext);
    for($i=0;$i<=newArr.length;$i++)
    {
        if(newArr[$i].name==$org)
        {
            document.write("location Name:"+newArr[$i].location[0].name+"</br>");//for location
            document.write("building Name:"+newArr[$i].location[0].building+"</br>");//for building
        }    

    }    

}
</script> 
```

# java - 如何在 BasicHttpParams 中设置自定义参数

> ID：15967055
> 
> 赞同：0
> 
> 时间：2013-04-12T08:57:14.027
> 
> 标签：java, exception, apache-httpclient-4.x

以下是我设置客户参数的代码片段

```
CreateRequisitionRO[] request = new CreateRequisitionRO[1];
boolean validateOnly = true;
HttpPost postURI = new HttpPost("http://localhost:8080/api/trade/createrequisition");

            // Setup the request parameters
            BasicHttpParams params = new BasicHttpParams();
            params.setParameter("CreateRequisitionRO", request.toString());
            params.setParameter("validateOnly", "true");
            postURI.setParams(params);
            HttpResponse responseURL = client.execute(postURI); 
```

在上面的`CreateRequisitionRO`用户定义类中，我也有布尔类型。

我无法将它们设置为，`params.setParameter`因为它只接受字符串。如何将我的类设置为参数，因为我调用的方法是用这些自定义和布尔类型定义的。

请帮助解决这个问题。

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:03:08.060

`BasicHttpParams#setBooleanParameter`存在于超类`AbstractHttpParams`中，

```
params.setBooleanParameter("validateOnly", true); 
```

并且`BasicHttpParams#setParameter(String name, Object value)`接受 Object 作为值，您还可以传递您的自定义`CreateRequisitionRO`数组请求。

> params.setParameter("CreateRequisitionRO", request);

# django - 部署 django [django, git, heroku] 的问题

> ID：15967056
> 
> 赞同：0
> 
> 时间：2013-04-12T08:57:14.927
> 
> 标签：django, heroku

我创建了一个heroku应用程序：

```
$ heroku create olp-website
Creating olp-website... done, stack is cedar 
```

然后我尝试将我的 git 分支推送到应用程序：

```
git push heroku deploy
Counting objects: 25, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (20/20), done.
Writing objects: 100% (25/25), 8.48 KiB, done.
Total 25 (delta 1), reused 0 (delta 0)
Pushed to non-master branch, skipping build.
To git@heroku.com:olp-website.git
 * [new branch]      deploy -> deploy 
```

然后，我尝试将插件添加到应用程序：

```
$ heroku addons:add cloudamqp:panda
 !    No app specified.
 !    Run this command from an app folder or specify which app to use with --app APP. 
```

所以这既是一个普遍的问题，也是一个具体的问题。分支是否必须是主分支（请参阅“推送到非主分支，跳过构建”）？是否可以在特定的 Heroku 应用程序中，或者您是否必须为每个插件指定应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:14:48.357

是的 - 查看 Heroku 的开发中心。 [文章](https://devcenter.heroku.com/articles/git#deploying-code)告诉你怎么做： `git push heroku yourbranch:master`

至于附加组件，只需指定应用程序即可。所以像

`heroku addons:add cloudamqp:panda -a myappname`

# php - Codeigniter - 如果任务过期则更改任务状态

> ID：15967060
> 
> 赞同：0
> 
> 时间：2013-04-12T08:57:21.430
> 
> 标签：php, mysql, date

我有一系列案例，在打开时会显示任务列表。所有这些任务都分配了一个状态：进行中、已完成和逾期。每个任务都有一个到期日期。如果任务已过期，我想尝试在页面加载时将任务的状态更改为过期。

如果任务已过期，我想检查页面何时加载，如果是，则将该任务的状态更改为过期。

我从查询中获得的数据如下

```
Array ( [0] => stdClass Object ( [ID] => 1 [agency_association_ID] => 1 [task_ID] => 3 [assigned_user_ID] => 8 [status] => Ongoing [comments] => Test task [date] => 2013-04-12 [task] => Domestic violence [active] => 1 ) ) 
```

看法

```
$date = date('Y-m-d');
if($date > $tasks->date) 
{ 
    echo"OVERDUE"; 
}
else 
{ 
    echo"IN DATE"; 
} 
```

我不想在控制器中进行检查，以防它每次加载时都会检查并陷入连续循环

# android - 包含 ListView 时滚动 ScrollView

> ID：15967062
> 
> 赞同：0
> 
> 时间：2013-04-12T08:57:26.260
> 
> 标签：android

我有一个问题，需要你的帮助。我有和 ScrollView，里面有两个 ListView。但我无法滚动 ScrollView。我怎样才能让 ScrollView 滚动？

感谢克拉克的任何帮助

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-12T09:20:13.760

你不应该这样做。因为列表视图已经可以滚动所以你不应该把它放在另一个滚动视图中

值得观看此链接 [http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)

# sql-server-2008 - 是否可以使用 sp_MSforeachtable 过程在数据库中的所有表上创建触发器

> ID：15967063
> 
> 赞同：0
> 
> 时间：2013-04-12T08:57:32.340
> 
> 标签：sql-server-2008, triggers

我正在尝试创建一个函数，该函数将遍历数据库中的所有表，如果它不存在则创建一个触发器。经过一些研究，我遇到了存储过程：“sp_MSforeachtable 过程”有人可以帮我写一个代码吗？使用该函数在下面创建触发器。触发器工作正常，只是现在我需要确保使用循环将其应用于所有表。注意我不想在所有表上手动运行它。性能方面我知道可能在数据库中的所有表上都有触发器并不是最好的主意。这是我的触发器

```
USE [Issue]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TRIGGER [dbo].[Update_DateCreated_DateModified]
ON  [dbo].[Patient] 
FOR  INSERT
AS 
BEGIN
DECLARE @getDateCreated Datetime = GETDATE()
DECLARE @getDateModified DATETIME=GETDATE()
DECLARE @patient_nin VARCHAR(50) = (SELECT NIN FROM INSERTED i)
SET NOCOUNT ON;
UPDATE dbo.Patient SET DateCreated=@getDateCreated,DateModified=@getDateModified
END   
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:09:45.707

以下代码未经测试，但应该是这样的。

```
EXEC sp_MSforeachtable 'IF NOT EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N''?_Update_DateCreated_DateModified''))
EXEC dbo.sp_executesql @statement = 
N''CREATE TRIGGER [dbo].[?_Update_DateCreated_DateModified]
ON  ?
FOR  INSERT
AS 
BEGIN
DECLARE @getDateCreated Datetime = GETDATE()
DECLARE @getDateModified DATETIME=GETDATE()
DECLARE @patient_nin VARCHAR(50) = (SELECT NIN FROM INSERTED i)
SET NOCOUNT ON;
UPDATE ? SET DateCreated=@getDateCreated,DateModified=@getDateModified
END   
;''' 
```

这 ？替换为表名。如果我没记错的话

# silverlight - 更新 Visual Studio 2012 后出现“未安装 Silverlight 4 SDK”错误

> ID：15967067
> 
> 赞同：2
> 
> 时间：2013-04-12T08:57:47.383
> 
> 标签：silverlight, visual-studio-2012, silverlight-4.0, windows-phone-8, windows-phone

我刚刚为我的 Visual Studio 2012 Ultimate 安装了更新 2。

安装更新并重新启动计算机后，我无法再构建 Windows Phone 项目。当我尝试在 VS 中构建它们时，我总是收到“未安装 Silverlight 4 SDK”错误。

我已经检查过了，SDK 已经安装好了。我也尝试过修复安装，但没有。安装 Visual Studio 更新之前工作正常

有谁知道问题的原因以及如何解决它？

提前致谢。

编辑：我已经卸载并再次安装了 Silverlight 4 SDK，但没有任何结果。我检查了 Windows 注册表，发现“HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SDKs”下没有 Silverlight 条目。这可能是问题吗？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T07:37:32.150

通过重新安装 Windows Phone 8 SDK 解决了该问题。

我的另一台电脑没有这个问题，所以我不知道为什么会这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T00:57:04.757

运行 x64 msbuild 时我也遇到了这个问题。运行 32 位版本似乎可以解决这个问题。

# eclipse - 如何强制eclipse创建具有755权限的文件？

> ID：15967069
> 
> 赞同：1
> 
> 时间：2013-04-12T08:58:01.433
> 
> 标签：eclipse, ubuntu, chmod

我经常写一些 bash 或 python 脚本。我想强制 Eclipse 创建具有权限 755 的新文件。

我知道我可以通过这样的外部工具来做到这一点：

> 位置：/bin/bash
> 
> 论据：
> 
> chmod 755 script_name.py && python script_name.py

我只是不想每次都 chmod 或创建外部工具。有没有eclipse配置？也许有一种方法可以在 Ubuntu 中设置一些 chmod 来强制~~我的用户~~eclipse 创建具有 755 权限的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:15:11.997

尝试`umask 022`（您可以考虑将其添加到`$HOME/.bashrc`）。

[http://manpages.ubuntu.com/manpages/precise/en/man1/umask.1posix.html](http://manpages.ubuntu.com/manpages/precise/en/man1/umask.1posix.html)

# windows-phone-8 - Windows Azure 移动服务 - 推送通知未发送到 Windows Phone 8 设备

> ID：15967072
> 
> 赞同：0
> 
> 时间：2013-04-12T08:58:07.387
> 
> 标签：windows-phone-8, azure-mobile-services

我为 WP8 制作了一个小应用程序，它可以从 Azure 移动服务表中获取通知（确实如此）。然后我添加了推送。该应用程序与 Azure 网站上提供的示例应用程序相同。我什至尝试了示例之一，但发生了同样的事情：日志显示祝酒词已发送，但我的设备根本没有收到任何东西。

此外，我对 WinJS 应用程序也做了同样的事情，它完美无缺。

昨晚，我又试了一次，在近 20 个请求中只有一次在设备上得到了祝酒词。

我一无所知 - 如果您正在寻找它的代码就在这里[http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-push-wp8/](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-push-wp8/)

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:16:32.600

您当时是否在手机的前台运行该应用程序？如果应用程序在前台，敬酒不会显示在 WP8 上。

# android - Android在布局中以编程方式对齐按钮集

> ID：15967074
> 
> 赞同：3
> 
> 时间：2013-04-12T08:58:10.907
> 
> 标签：android, android-layout, alignment, android-button

我想在我的应用程序中实现的事情是动态创建一组具有不同文本大小的按钮，然后将这些视图对齐到线性布局中。这是我想要实现的示例：

![图片](https://i.stack.imgur.com/XGKgK.png). 根据我希望按钮在一行中对齐的文本大小，如果最后一个按钮大于屏幕尺寸，它应该正确地转到下一行。

任何建议我该如何实现这一点或我应该寻找什么，因为我知道如果我尝试`button.getWidth();`它会返回 0 并且它不会工作。

感谢您的任何建议！

**编辑**

## **为此，您可以使用 Google 开源的新布局，称为：[FlexboxLayout](https://github.com/google/flexbox-layout)。您可以在Android 开发者博客的这篇[文章](https://android-developers.googleblog.com/2017/02/build-flexible-layouts-with.html)中了解更多信息。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:00:54.663

感谢@Kameswari 的代码，它给了我正确的方向，我通过使用：

```
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
params.setMargins(5, 5, 5, 5);

String[] mKeywordsArray = mKeywords.split(", ");
if(mKeywordsArray != null){

    LinearLayout mNewLayout = new LinearLayout(getActivity()); // Horizontal layout which I am using to add my buttons.
    mNewLayout.setOrientation(LinearLayout.HORIZONTAL);
    int mButtonsSize = 0;
    Rect bounds = new Rect();

    for(int i = 0; i < mKeywordsArray.length; i++){

        String mButtonTitle = mKeywordsArray[i];
        Button mBtn = new Button(getActivity());
        mBtn.setPadding(10, 3, 10, 3);
        mBtn.setText(mButtonTitle);

        Paint textPaint = mBtn.getPaint();
        textPaint.getTextBounds(mButtonTitle, 0, mButtonTitle.length(), bounds);
            // size of all buttons in current horizontal layout
            // i am using +45 because of extra padding which is set in xml for this layout
        mButtonsSize += ( bounds.width() + 45);
        if(mButtonsSize < (mScreenWidth - 32)){ // -32 because of extra padding in main layout.
            mNewLayout.addView(mBtn, params);
        } else {
            mButtonsLayout.addView(mNewLayout);
            mNewLayout = new LinearLayout(getActivity());
            mNewLayout.setOrientation(LinearLayout.HORIZONTAL);
            mButtonsSize = bounds.width();
            mNewLayout.addView(mBtn, params); // add button to a new layout so it won't be stretched because of it's width.
        }

    }

    mButtonsLayout.addView(mNewLayout); // add the last layout/ button.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:15:08.050

您可以尝试以下在添加按钮时，您可以计算占用的宽度为

```
occupiedWidth = button1Width + button2Width + ... 
```

每个按钮宽度 = textWidth + 2*margin + 2*padding

你可以得到你放在按钮上的文本的宽度，比如

```
String buttonText = "<Your Button Text>"
paint.getTextBounds(buttonText, 0, buttonText.length(), bounds);
int textWidth = bounds.width(); 
```

将此新按钮的边距和填充添加为

```
int newWidth = textWidth + buttonMargin*2 + buttonPadding*2; 
```

如果总宽度超过屏幕宽度，则移动到下一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:36:13.397

据我说，你有两个选择：

1）采取方向`linear layout`。`horizontal`并继续以编程方式向此布局添加按钮。如果按钮的宽度无法适应该行，它将自动转到线性布局的下一行。

```
ViewGroup linearLayout = (ViewGroup) findViewById(R.id.linearLayoutID);

Button bt = new Button(this);
bt.setText("A Button");
bt.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
linerLayout.addView(bt); 
```

2）您可以计算@kameswari提到的每个按钮的x，y位置并在x，y位置绘制相应的按钮

```
Button button = (Button)findViewById(R.id.button);// or new Button(this);
AbsoluteLayout.LayoutParams absParams = 
    (AbsoluteLayout.LayoutParams)button.getLayoutParams();
absParams.x = X;
absParams.y = Y;
button.setLayoutParams(absParams); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-03T11:57:19.480

```
u can try this `enter code here`

 LinearLayout.LayoutParams leftMarginParams = new LinearLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        leftMarginParams.leftMargin = 50;

        Button btn1 = new Button(this);
        btn1.setText("Button1");
        linLayout.addView(btn1, leftMarginParams) 
```

# c++ - 是否可以为动态创建的 TComponent 派生类实例传递 NULL Owner 参数？

> ID：15967075
> 
> 赞同：5
> 
> 时间：2013-04-12T08:58:13.267
> 
> 标签：c++, c++builder, tcomponent

我经常使用 C++ RAD Studio 和 Builder 6，并且经常在编写非可视代码时动态创建表单或动态创建非可视组件。在设计表单时，放置在该表单上的组件的 Owner 属性会自动设置，所以我从不担心。但是，当创建从`TComponent`动态派生的任何内容时，我总是将`NULL`其作为`Owner`参数传递，因为我总是负责稍后释放内存。

Borland/Embarcadero 文档并没有真正涵盖在动态创建事物的情况下所需的内容（或者我可能没有在正确的地方寻找），并且似乎只涵盖了基于设计时表单的场景。

我想知道是否为动态创建的组件传递一个 NULL 所有者是正确的做法，或者它是否会导致稍后会出现的内部问题。代码可以编译并且工作正常，但我想知道它是否会导致或可能导致任何幕后问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T09:04:15.533

这当然不是一件错误的事情。

正如您已经暗示的那样，传递所有者可以使您不必自己管理对象的生命周期。没有隐藏的内部副作用**需要**您通过所有者。

FWIW：创建/使用和销毁无主组件并不少见，我们一直在这样做。

* * *

***将 cudo***编辑为 Remy****

 ***虽然您的安装附带的组件可以在没有所有者的情况下使用*（除了一些极端情况，如 TXMLDocument 与分配的所有者的行为不同）*，但总是有可能**依赖**于分配的所有者的**第三方**或自制组件.***

# c++ - 公共成员和公共继承的受保护成员有什么区别？

> ID：15967076
> 
> 赞同：-5
> 
> 时间：2013-04-12T08:58:14.017
> 
> 标签：c++

公共成员和公共继承的受保护成员有什么区别？（据说受保护的成员只能被基类和下一个派生类访问。但是如果我们公开继承受保护的成员，我们可以进一步继承它。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:02:41.547

可以使用该类的对象从任何类访问公共成员，并且要访问公共成员，您不必继承该类，但要访问受保护的成员，您必须继承它。请注意，如果一个成员在基类中声明为受保护并且您公开继承，那么该成员也将被视为派生类的受保护成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:00:08.727

*   公共方法对每个人都是可见的。
*   公共继承的受保护方法仍然受保护，即对类本身和任何派生类可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T08:59:53.513

公共成员也可以被其他类（不仅是派生类）访问，而且通常在任何地方都可以访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T09:00:38.377

好吧，公共继承是您的“正常”继承，因此在这种情况下，公共和受保护成员的语义正是您认为的那样。

也就是说，您的`public`成员是公共的，并且您的`protected`成员仅对当前和更多派生类可见。

基本上只有当你开始使用私有/受保护的继承时，事情才会变得冒险、混乱和*奇怪*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T09:06:02.987

*   1：如果受保护的成员被公共继承，那么子类可以访问它，并且它将在子类中保持受保护，以便我们可以在下一个子类中访问该成员。
*   2：如果private继承了protected成员，那么子类可以访问它，它会在子类中变为私有，这样我们就不能在下一个子类中访问这个成员。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T15:14:09.973

A public member is public. A protected member is protected. It doesn't matter whether they got there by being defined directly or being inherited from a public base.

# cakephp - 在 Controller 上调用模型名称的方法

> ID：15967077
> 
> 赞同：0
> 
> 时间：2013-04-12T08:58:14.103
> 
> 标签：cakephp, plugins, model, controller

我是 CakePHP 的新生... 有什么方法可以在 Controller 上调用模型名称吗？假设我有 3 个模型 - 用户、组、小部件 .. 和 3 个控制器 - 用户控制器、组控制器、小部件控制器 .. 实际上我打算编写一个插件 ..`<title>`为两个视图文件设置。

像..我使用插件来设置`<title><?php echo $model_name; ?></title>` 当我移动到'/users/main'时，标题将是`<title>User</title>`，当我移动到'/widgets/main'时，标题将是`<title>Widget</title`>。

这个解决方案有什么想法吗？每个控制器如何与它自己的 Model_name 匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:07:52.623

尝试这个

在您的模板中：

```
<title><?php echo $title_for_layout?></title> 
```

将此添加到您的控制器：

```
$this->pageTitle = $model_name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:25:25.563

要让模型名称自动出现在每个视图中，请将此代码添加到您的 AppController；

```
public function beforeRender()
{
    parent::beforeRender();

    // modelClass should be set automatically
    // to the 'default' model for the controller
    $this->set('model_name', $this->modelClass);
} 
```

在您的观点中：

```
<title><?php echo __($model_name); ?></title> 
```

# jquery - Jquery Mobile - 在对话框中如何更改标题中的“删除”图标

> ID：15967083
> 
> 赞同：1
> 
> 时间：2013-04-12T08:58:33.910
> 
> 标签：jquery, jquery-mobile, markup, jquery-mobile-button

我有以下结构：

```
<div data-rola="dialog" id="languages" data-close-btn="right" 
data-direction="reverse">
    <header data-role="header">
        <a href="#" id="closeMenu" data-role="button" data-icon="home" 
        data-iconpos="notext" data-corners="true" data-iconshadow="false">
            Close
        </a>
        <h2>LANGUAGES</h2>
     </header>
    <section data-role="content">
        <ul class="jqm-menu">
            <li>
                <a href="#" data-role="button" data-iconpos="right" 
                data-shadow="false" data-wrapperels="div">
                    Text
                </a>
            </li>
        </ul>
    </section> 
```

我想将对话框“删除”图标更改为“箭头-l”图标，因为此对话框菜单是显示常规菜单后将出现的第二个菜单。单击该图标不会关闭对话框，而是会返回上一个菜单。

谁能解释我如何更改图标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:10:51.603

你可以用这一行来做到这一点：

```
$('#closeMenu').buttonMarkup({ icon: "arrow-l" }); 
```

官方文档：[http](http://api.jquerymobile.com/button/) ://api.jquerymobile.com/button/搜索选项“icon”。

**编辑 ：**

这是一个有效的 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/nBGMQ/](http://jsfiddle.net/Gajotres/nBGMQ/)

在其中，后退按钮的原始图标是**home**。这段代码：

```
$('#previous').buttonMarkup({ icon: "arrow-l" }); 
```

将其更改为**arrow-l**。

示例取自**[Omar](https://stackoverflow.com/users/1771795/omar)**及其答案：**[jQuery Mobile Multiple Dialog Boxes in One Dialog](https://stackoverflow.com/a/15904607/1848600)**

# wix - 如何在 WiX 中对文件序列进行排序？

> ID：15967087
> 
> 赞同：1
> 
> 时间：2013-04-12T08:58:52.873
> 
> 标签：wix, windows-installer

文件表中的 AFAIK 文件序列（在 MSI 文件中）对卸载/安装所需的时间有影响：如果具有相同目标目录的文件条目按顺序放置在文件表中，则安装程序执行卸载/安装的时间比那些文件分散在文件表中。

但是，我的 wix 项目构建的安装程序似乎属于后一种情况。它的文件条目具有相同的目标目录分散在文件表中。有没有办法对这些文件条目进行排序，以便它们按顺序放置在文件表中？（我的 .wxs 文件是由 heat.exe 生成的）

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:26:34.757

Heat 工具提供了在加热结束时运行自定义 XSLT 转换的能力。这是一个非常强大的功能，因为它为您提供了一种对结果进行任何操作的方法。例如，以下 XSL 会将文件 ID 更改为所有父文件夹 + 文件名的串联。

```
<xsl:stylesheet version="1.0"
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns:msxsl="urn:schemas-microsoft-com:xslt"
            exclude-result-prefixes="msxsl"
            xmlns:wix="http://schemas.microsoft.com/wix/2006/wi"
            xmlns:my="my:my">

  <xsl:output method="xml" indent="yes" />

  <xsl:strip-space elements="*"/>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match='wix:File'>
    <xsl:variable name='fileId'>
      <xsl:value-of select="/wix:Wix/wix:Fragment/wix:DirectoryRef/@Id"/>_<xsl:value-of select="translate(substring-after(@Source, '\'), '\- ', '_')"/>
    </xsl:variable>
    <xsl:copy>
      <xsl:apply-templates select="@*"/>
      <xsl:attribute name="Id">
        <xsl:value-of select="$fileId"/>
      </xsl:attribute>
    </xsl:copy>
  </xsl:template>

  <xsl:template match='wix:Directory'>
    <xsl:variable name='parentPath'>
      <xsl:for-each select='ancestor::wix:Directory/@Name'>
        <xsl:value-of select="concat(.,'_')"/>
      </xsl:for-each>
    </xsl:variable>
    <xsl:copy>
      <xsl:apply-templates select="@*"/>
      <xsl:attribute name="Id">
        <xsl:value-of select="/wix:Wix/wix:Fragment/wix:DirectoryRef/@Id"/>_<xsl:value-of select="translate($parentPath, '- ', '__')"/><xsl:value-of select="translate(@Name, '- ', '__')"/>
      </xsl:attribute>

      <xsl:apply-templates select="*"/>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

这种方法不能保证 ID 的唯一性，但对我来说效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:49:35.817

WiX 工具集中没有内置任何东西可以以特定方式进行排序。但是，如果您有经验证据表明应该使用更好的排序算法，那么发送到 wix-devs@lists.sourceforge.net 邮件列表将是一件好事。WiX 工具集应该自动进行最佳优化。

HACK：您可以尝试按`File/@Id`字母顺序排序，以控制当前版本的 WiX 工具集的顺序。这可能适用于所有版本的 WiX 工具集，也可能不适用。

# unit-testing - 如何测试 ZF 应用程序的上层

> ID：15967091
> 
> 赞同：1
> 
> 时间：2013-04-12T08:58:59.297
> 
> 标签：unit-testing, zend-framework, testing, integration-testing

如何在 Zend Framework 应用程序中测试控制器和视图？

我一直在使用 PHPUnit 来测试映射器、域和服务，并且运行良好。我使用依赖注入，以便我可以隔离被测类。

但是，当涉及到控制器时，我可能不会尝试将其隔离。此时我将有效地进行集成测试，但我认为这很好。我仍然会使用 PHPUnit 并触发大多数测试的请求。

对于视图，我正在考虑在 Zend_Test 中使用 CSS 选择器，但由于我有很多 Javascript，我也必须使用 selenium。

这一切听起来合理吗？你做什么工作？

# android - 如何获得比其父级更大的视图？

> ID：15967096
> 
> 赞同：4
> 
> 时间：2013-04-12T08:59:20.153
> 
> 标签：android, view

我有一个带有显示/隐藏菜单按钮的顶栏。我想在同一布局中定义顶部栏、按钮和菜单。

我尝试了顶部栏高度的布局，但菜单被剪裁并且不可见。是否有可能拥有比其父级更大的视图。否则，这样做的标准方法是什么？

![在此处输入图像描述](https://i.stack.imgur.com/QIUEP.jpg)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T09:07:55.357

对于您的问题：是的，这是可能的。简单的例子：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="match_parent"
          android:orientation="vertical"
          android:layout_height="match_parent"
          >

<ImageView
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:background="#f0f"
      android:layout_marginLeft="-50dp"
      android:layout_marginRight="-50dp"
      />
 </LinearLayout> 
```

和`ImageViewWidth == LinearLayoutWidth + 100dp`。

希望它的帮助。

# google-app-engine - 端点停止使用 proxy.html 错误

> ID：15967102
> 
> 赞同：2
> 
> 时间：2013-04-12T08:59:41.897
> 
> 标签：google-app-engine, google-cloud-endpoints

错误我被拒绝显示'ah/api/static/proxy.html?jsh=m%3B%2F%2">https://appname.appspot.com/ah/api/static/proxy.html *? jsh=m%3B%2F* %2…8s_uMxLg#parent=http%3A%2F%2Fappname.appspot.com&rpctoken=....' 在一个框架中，因为它将'X-Frame-Options'设置为'SAMEORIGIN'。

直到昨天一切正常。今天早上启动浏览器访问应用程序并收到上述消息。也可以在其他端点应用程序上使用它。当我访问端点以从后端获取信息时，似乎失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:11:56.387

是的，端点发现似乎失败了，但它在 Google 方面，而不是在您的代码方面。对此问题加注星标并获取有关其进展的更新：

[https://code.google.com/p/googleappengine/issues/detail?id=9167](https://code.google.com/p/googleappengine/issues/detail?id=9167)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:34:01.433

我们的几个应用程序的端点确实下降了。当然是谷歌方面的错误。得等。

一直工作到今天我们刷新了浏览器页面！

Chrome 的 JavaScript 控制台记录的错误：

```
GET https://_____.appspot.com/_ah/api/static/proxy.html?jsh=m%3B%2F_%2Fscsâ¦L3eu8s_uMxLg#parent=http%3A%2F%2F_____.appspot.com&rpctoken=689483000 404 (Not Found) cb=gapi.loaded_0:116
Refused to display 'https://_____.appspot.com/_ah/api/static/proxy.html?jsh=m%3B%2F_%2Fscsâ¦L3eu8s_uMxLg#parent=http%3A%2F%2F_____.appspot.com&rpctoken=689483000' in a frame because it set 'X-Frame-Options' to 'SAMEORIGIN'. about:blank:1
GET https://_____.appspot.com/_ah/api/static/proxy.html?jsh=m%3B%2F_%2Fscsâ¦L3eu8s_uMxLg#parent=http%3A%2F%2F_____.appspot.com&rpctoken=401828000 404 (Not Found) cb=gapi.loaded_0:116
Refused to display 'https://_____.appspot.com/_ah/api/static/proxy.html?jsh=m%3B%2F_%2Fscsâ¦L3eu8s_uMxLg#parent=http%3A%2F%2F_____.appspot.com&rpctoken=401828000' in a frame because it set 'X-Frame-Options' to 'SAMEORIGIN'. about:blank:1 
```

更新（显然有人正在处理它），错误已更改为：

```
Invalid gadgets.rpc token. 429366340 vs 703741727 cb=gapi.loaded_0:41
c cb=gapi.loaded_0:41
_.Mb._.sa cb=gapi.loaded_0:41
h cb=gapi.loaded_0:59
c cb=gapi.loaded_0:52
Uncaught Error: m`apiproxy0e30dfc60185e9bebed936e8008c20776b338f810.6918280611280352 cb=gapi.loaded_0:71
_.T.Ca.Mm cb=gapi.loaded_0:71
h cb=gapi.loaded_0:59
c 
```

# javascript - 一次使用后选择下拉菜单被禁用

> ID：15967106
> 
> 赞同：1
> 
> 时间：2013-04-12T08:59:46.273
> 
> 标签：javascript, html, forms, drop-down-menu, fieldset

我不得不再次问这个问题，因为我发布的第一个问题不够具体，无法得到答案。

好的，所以我一直在学习 Web 开发，我目前是这家公司的一名大三学生，我的任务是修复仍在生产中的网站中的错误。有一个错误，我就是无法理解。我已经到处搜索，尝试修补东西，但仍然没有运气。我知道这里有一个类似的问题，但这对我没有帮助。

发生的情况是，当客户从下拉列表中选择一个选项（您有多少个孩子？1、2、3 等）时，它会在下拉列表下方的同一页面上弹出更多字段。它产生的字段数量取决于选择的数量。基本上，这样做的目的是生成字段，以便客户可以输入他们拥有的每个孩子的详细信息。

问题：如果客户不小心单击了错误数量的子项，它会生成准确数量的字段，但是客户无法返回并更改他们首先放置在下拉列表中的内容。**使用一次后，下拉菜单似乎会自行禁用**。

这是我认为创建这个（我可能错了）的两个代码块，为那里的代码量道歉：

```
 <fieldset class="l" style="width:900px;">
                        <label for="children">Which of these statements apply to you?</label>
                        <input type="radio" name="children" value="1" class="r" id="have-children"<?php if($fetch['have_children'] > 0) echo " checked"; ?> /> <span>I have children under the age of 18</span>
                        <input type="radio" name="children" value="0" class="r" id="no-children"<?php if(isset($fetch['have_children']) && $fetch['have_children'] == 0) echo " checked"; ?> /> <span>I do not have children/under the age of 18</span>
                    </fieldset>
                    <div style="clear:both;"></div>
                    <fieldset class="l" style="margin:20px 0 0 15px; display:none;<?php if($fetch['have_children'] > 0) echo " display:block"; ?>" id="number-children">
                        <label for="marital-status">How many children do you have?</label>
                        <select name="children" id="children" class="s">
                            <option value="0" disabled selected>Please select...</option>
                            <option value="1"<?php if($fetch['have_children'] == 1) echo " selected"; ?>>1 child</option>
                            <option value="2"<?php if($fetch['have_children'] == 2) echo " selected"; ?>>2 children</option>
                            <option value="3"<?php if($fetch['have_children'] == 3) echo " selected"; ?>>3 children</option>
                            <option value="4"<?php if($fetch['have_children'] == 4) echo " selected"; ?>>4 children</option>
                            <option value="5"<?php if($fetch['have_children'] == 5) echo " selected"; ?>>5 children</option>
                            <option value="6"<?php if($fetch['have_children'] == 6) echo " selected"; ?>>6 children</option>
                            <option value="7"<?php if($fetch['have_children'] == 7) echo " selected"; ?>>7 children</option>
                            <option value="8"<?php if($fetch['have_children'] == 8) echo " selected"; ?>>8 children</option>
                            <option value="9"<?php if($fetch['have_children'] == 9) echo " selected"; ?>>9 children</option>
                            <option value="10"<?php if($fetch['have_children'] == 10) echo " selected"; ?>>10 children</option>
                        </select>
                    </fieldset> 
```

这是我的js

就像我说我是新手，请尝试对我耐心:)

```
 $.fn.duplicate = function(parent, count, cloneEvents) {
for (var i = 0; i < count; i++) {
    parent.append(this.clone(cloneEvents))
}
$('h4.abt', parent).each(function(index) {
    $(this).html('About child ' + (index + 1));
});
}

$(function() {
$('#have-children').click(function() {
    $('#number-children').slideDown('slow');
    $('#next-step').css('display', 'none');
});

$('#example-will').click(function() {
    $('#popup').css('display', 'block');
    $('#overlay').css('display', 'block');
});

$('.close-btn').click(function() {
    $('#popup').css('display', 'none');
    $('#overlay').css('display', 'none');
});

$('#no-children').click(function() {
    $('#next-step').css('display', 'block');
    $('.child-container').css('display', 'none');
    $('#number-children').slideUp('slow');
    //$('#have-children').attr('disabled', 'disabled');
});

$('#children').change(function() {
    var getid = $(this).attr('value');
    $(this).attr('disabled', 'disabled');
    $('#next-step').css('display', 'block');
    $('.child-container').css('display', 'block');

    $('.child-container').duplicate($('#childrens'), getid-1);
});

$('#estate-value').change(function() {
    $("#next-step").css('display', 'block');
});

$('#no-item').click(function() {
    $('#next-step').css('display', 'block');
    $('#reciptype').css('display', 'none');

});

$('#yes-item').click(function() {
    $('#next-step').css('display', 'none');
    $('#reciptype').css('display', 'block');
});

$('#yes-item').click(function() {
    $('#next-step').css('display', 'none');
    $('#reciptype').css('display', 'block');
});

$('#specific-r').click(function() {
    $('#specific-recipient').css('display', 'block');
    $('#new-person').css('display', 'none');
    $('#charity-recipient').css('display', 'none');

});

$('#newperson-r').click(function() {
    $('#specific-recipient').css('display', 'none');
    $('#new-person').css('display', 'block');
    $('#charity-recipient').css('display', 'none');

});

$('#charity-r').click(function() {
    $('#specific-recipient').css('display', 'none');
    $('#new-person').css('display', 'none');
    $('#charity-recipient').css('display', 'block');
});

$('#choose-beneficaries input').click(function() {
    $('#next-step').css('display', 'block');
});

$('#ben-alreadynamed').click(function() {
    $('#specific-recipient').css('display', 'block');
    $('#new-person').css('display', 'none');
});

$('#ben-newperson').click(function() {
    $('#specific-recipient').css('display', 'none');
    $('#next-step').css('display', 'none');
    $('#new-person').css('display', 'block');
});

$('#beneficiary-details select#recipients').change(function() {
    $('#next-step').css('display', 'block');
});

    $('#beneficiary-details select#recipients').change(function() {
    $('#next-step').css('display', 'block');
});

$('#anbe').click(function() {
    $('#selectrec').css('display', 'block');
});

$('#anbe').click(function() {
    $('#selectrec').css('display', 'block');
    $('#new-person').css('display', 'none');
});

$('#npbe').click(function() {
    $('#new-person').css('display', 'block');
    $('#selectrec').css('display', 'none');
});

}); 
```

我知道这里有很多代码要经过，但我真的很感激能帮我解决这个问题！

谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:07:44.817

好的，所以禁用您的`select`框的代码就在您的 javascript 中：

```
$('#children').change(function() {
    var getid = $(this).attr('value');
    $(this).attr('disabled', 'disabled'); //<-- right here
    $('#next-step').css('display', 'block');
    $('.child-container').css('display', 'block');

    $('.child-container').duplicate($('#childrens'), getid-1);
}); 
```

此代码是“on change”事件。即一旦`select`框的值被修改，这个函数就会运行。在此函数中，元素禁用自身（我在上面指出的行）。

现在，由您（或您的长辈）决定您想要什么样的行为。例如：您可以删除该行，使其永远不会禁用。

您还可以添加“编辑”按钮或其他东西来重新启用它。要重新启用它，只需删除该`disabled`元素的属性。例如：

```
$('#children').removeAttr("disabled"); 
```

* * *

要修复您在评论中提到的新错误，请尝试以下操作：

```
$('#children').change(function() {
    var getid = $(this).attr('value');
    $('#next-step').css('display', 'block');
    $('.child-container').css('display', 'block');

    //empty out your #childrens container
    $('#childrens').html("");

    //This is the line that creates your fields.
    $('.child-container').duplicate($('#childrens'), getid-1);
}); 
```

好的，通过这样做，`$('#childrens').html("");`我删除了内容，以便您可以从头开始重新创建子字段（使用适量的字段）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:14:38.867

尝试从中删除`$(this).attr('disabled', 'disabled');`：

```
$('#children').change(function() {
    var getid = $(this).attr('value');
    $(this).attr('disabled', 'disabled');
    $('#next-step').css('display', 'block');
    $('.child-container').css('display', 'block');

    $('.child-container').duplicate($('#childrens'), getid-1);
}); 
```

# c# - 调用对象的方法

> ID：15967114
> 
> 赞同：1
> 
> 时间：2013-04-12T09:00:01.863
> 
> 标签：c#

我是 C# 新手，我正在尝试编写一个轮盘模拟器。我试图模拟现实世界，你有一个轮子和一个荷官，荷官旋转轮子。在面向对象编程中，这意味着从不同的对象调用另一个对象的方法。下面的代码是我在 C# 中以正确的方式传递轮子对象来执行此操作吗？

提前致谢

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Test
{
    class Program
        {
        static void Main(string[] args)
        {
            Wheel luckyWheel = new Wheel();
            Croupier niceLady = new Croupier();
            niceLady.SpinWheel(luckyWheel);
        }
    }

    class Wheel
    {

        public void Spin()
        {
            Console.WriteLine("Wheel Spun");
        }
    }

    class Croupier
    {
        public void SpinWheel(Wheel spinMe)
        {
            spinMe.Spin();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:04:40.520

是的，这是正确的，也是做这些事情的好方法，因为您的代码变得可测试。由于您在一个类中具有*功能，因此该功能的**执行者*在其他类中：，...`Wheel`*`Croupier`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:01:48.277

是的，一开始是正确的。我建议您将这些类分成不同的 .cs 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:02:21.033

是的，这是正确的方法，因为您的两个类都在同一个程序集中，您可以在`Spin()`内部声明方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T09:04:50.807

更好的方法是在创建该类时将轮子传递给信使。然后，构造函数会将轮盘引用存储在一个字段中，然后当您旋转轮盘时，荷官可以通过本地字段访问轮盘。

像这样：

```
class Program
{
    static void Main(string[] args)
    {
        Wheel wheel = new Wheel();
        Croupier croupier = new Croupier(wheel);
        croupier.SpinWheel();
    }
}

class Wheel
{
    public void Spin()
    {
        Console.WriteLine("Wheel Spun");
    }
}

class Croupier
{
    private Wheel wheel;

    public Croupier(Wheel wheel)
    {
        this.wheel = wheel;
    }

    public void SpinWheel()
    {
        wheel.Spin();
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-12T09:29:25.137

您可以像 Adam K Dean 所说的那样改进它，这会导致您使用 dotFactory [here](http://www.dofactory.com/Patterns/PatternStrategy.aspx)所解释的策略模式。*

# css - 布局 CSS 不同的结果 IE、Firefox 和 Chrome

> ID：15967115
> 
> 赞同：-1
> 
> 时间：2013-04-12T09:00:02.143
> 
> 标签：css, overflow, css-tables, tablerow

```
<html>
    <head>
        <style>
            body {
                border:0;
                overflow:hidden;
                padding:0;
                margin:0;
            }

            .tablecontent {
                display: table; 
                height:100%; 
                width:100%;
            }

            .head {
                display: table-row; 
                height:10%; 
                background-color:red;
            }

            .content {
                display: table-row; 
                height:85%; 
                background-color:black; 
            }

            .bodycontent {
                padding: 10px 10px 10px 10px;
            }

            .foot {
                display: table-row;
                height:5%;
                background-color:yellow;
            }

            .contentscroll {
                height:100%;
                background-color:blue;
                overflow-y:scroll
            }
        </style>
    </head>
    <body>
        <div class="tablecontent">
            <div class="head">HEADER</div>

            <div class="bodycontent content">
                <div class="tablecontent">
                    <div class="head">INNER-HEADER</div>
                    <div class="content">

                        <div class="contentscroll"></div>

                    </div>  
                    <div class="foot">INNER-FOOTER</div>
                </div>
            </div>

            <div class="foot">FOOTER</div>
    </div>
   </body>
</html> 
```

这在 IE6、Firefox 和 Chrome 中显示了不同的结果（抱歉，我无法发布图片）。您必须在 div ( `overflow-y:scroll`) 中添加负载以强制溢出。
重复，例如：

```
alskdjflasjdfklasjdflajk<br/>
alskdjflasjdfklasjdflajk<br/>
alskdjflasjdfklasjdflajk<br/> 
```

IE6 - OK 填充和溢出
Chrome - OK 溢出。填充？
Firefox - 溢出和填充？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:04:17.947

`<!DOCTYPE HTML>`在之前添加`<html>`，如下所示：

```
<!DOCTYPE HTML>
<html> 
```

送给：

```
.bodycontent {
    display: block;
}
.contentscroll {
    min-height: 50px; /* for example */
} 
```

# jquery - 使用 .find 定位特定类

> ID：15967116
> 
> 赞同：1
> 
> 时间：2013-04-12T09:00:02.860
> 
> 标签：jquery

作为这个问题的延续 -[查找使用特定类检查的复选框](https://stackoverflow.com/questions/15956629/find-checkboxes-that-are-checked-with-a-specific-class)

是否可以对这个 jquery 做同样的事情 - 我只想专门针对具有“正确”类的复选框输入？

```
jQuery(function($) {
$(document).ready(function () {
    $("input[type=checkbox]").click(function (e) {
        if ($(e.currentTarget).closest("div.question").length > 0) {
            toggleInputs($(e.currentTarget).closest("div.question")[0]);        
        }
    });
});

function toggleInputs(questionElement) {
    if ($(questionElement).data('max-answers') == undefined) {
        return true;
    } else {
        maxAnswers = parseInt($(questionElement).data('max-answers'), 10); 
        if ($(questionElement).find(":checked").length >= maxAnswers) {
            $(questionElement).find(":not(:checked)").attr("disabled", true);
        } else {
            $(questionElement).find("input[type=checkbox]").attr("disabled", false);
        }
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:02:10.827

尝试这个：

```
$("input[type=checkbox].correct").click(function (e) {
        if ($(e.currentTarget).closest("div.question").length > 0) {
            toggleInputs($(e.currentTarget).closest("div.question")[0]);        
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:06:31.677

```
var $checkboxes = $('input.correct:checkbox"); 
```

# ios - iOS 应用程序在启动画面期间崩溃 exc_bad_access

> ID：15967129
> 
> 赞同：-2
> 
> 时间：2013-04-12T09:00:34.840
> 
> 标签：ios, exc-bad-access

在我什至能够在 appdelegate.m 中插入任何断点之前......应用程序确实可以在模拟器中工作，但不能在 ipod touch 上工作。有时它会运行，我不确定如何重现成功的运行......

这是调试日志：

```
dyld: loaded: /var/mobile/Applications/D7F06B5F-7D51-45C7-8344-B9CD9CD348D9/PagerPlus.app/PagerPlus
dyld: loaded: /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
dyld: loaded: /usr/lib/libSystem.B.dylib
dyld: loaded: /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
dyld: loaded: /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
dyld: loaded: /usr/lib/libsqlite3.dylib
dyld: loaded: /System/Library/Frameworks/UIKit.framework/UIKit
dyld: loaded: /System/Library/Frameworks/Foundation.framework/Foundation
dyld: loaded: /usr/lib/libobjc.A.dylib
dyld: loaded: /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
dyld: loaded: /usr/lib/libicucore.A.dylib
dyld: loaded: /usr/lib/libz.1.dylib
dyld: loaded: /usr/lib/libstdc++.6.dylib
dyld: loaded: /usr/lib/libc++abi.dylib
dyld: loaded: /usr/lib/system/libcache.dylib
dyld: loaded: /usr/lib/system/libcommonCrypto.dylib
dyld: loaded: /usr/lib/system/libcompiler_rt.dylib
dyld: loaded: /usr/lib/system/libcopyfile.dylib
dyld: loaded: /usr/lib/system/libdispatch.dylib
dyld: loaded: /usr/lib/system/libdnsinfo.dylib
dyld: loaded: /usr/lib/system/libdyld.dylib
dyld: loaded: /usr/lib/system/libkeymgr.dylib
dyld: loaded: /usr/lib/system/liblaunch.dylib
dyld: loaded: /usr/lib/system/libmacho.dylib
dyld: loaded: /usr/lib/system/libremovefile.dylib
dyld: loaded: /usr/lib/system/libsystem_blocks.dylib
dyld: loaded: /usr/lib/system/libsystem_c.dylib
dyld: loaded: /usr/lib/system/libsystem_dnssd.dylib
dyld: loaded: /usr/lib/system/libsystem_info.dylib
dyld: loaded: /usr/lib/system/libsystem_kernel.dylib
dyld: loaded: /usr/lib/system/libsystem_m.dylib
dyld: loaded: /usr/lib/system/libsystem_network.dylib
dyld: loaded: /usr/lib/system/libsystem_notify.dylib
dyld: loaded: /usr/lib/system/libsystem_sandbox.dylib
dyld: loaded: /usr/lib/system/libunwind.dylib
dyld: loaded: /usr/lib/system/libxpc.dylib
dyld: loaded: /usr/lib/system/libcorecrypto.dylib
dyld: loaded: /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
dyld: loaded: /System/Library/Frameworks/CoreMedia.framework/CoreMedia
dyld: loaded: /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
dyld: loaded: /System/Library/Frameworks/CoreAudio.framework/CoreAudio
dyld: loaded: /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
dyld: loaded: /usr/lib/libbsm.0.dylib
dyld: loaded: /usr/lib/libMobileGestalt.dylib
dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Accelerate
dyld: loaded: /System/Library/Frameworks/Security.framework/Security
dyld: loaded: /usr/lib/liblockdown.dylib
dyld: loaded: /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
dyld: loaded: /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
dyld: loaded: /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
dyld: loaded: /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
dyld: loaded: /usr/lib/libxml2.2.dylib
dyld: loaded: /System/Library/Frameworks/CFNetwork.framework/CFNetwork
dyld: loaded: /usr/lib/libCRFSuite.dylib
dyld: loaded: /usr/lib/liblangid.dylib
dyld: loaded: /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
dyld: loaded: /System/Library/Frameworks/ImageIO.framework/ImageIO
dyld: loaded: /System/Library/Frameworks/CoreVideo.framework/CoreVideo
dyld: loaded: /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
dyld: loaded: /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
dyld: loaded: /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
dyld: loaded: /usr/lib/libc++.1.dylib
dyld: loaded: /System/Library/Frameworks/OpenGLES.framework/OpenGLES
dyld: loaded: /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
dyld: loaded: /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
dyld: loaded: /System/Library/PrivateFrameworks/IOAccelerator.framework/IOAccelerator
dyld: loaded: /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
dyld: loaded: /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
dyld: loaded: /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
dyld: loaded: /System/Library/PrivateFrameworks/CommonUtilities.framework/CommonUtilities
dyld: loaded: /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
dyld: loaded: /System/Library/PrivateFrameworks/Bom.framework/Bom
dyld: loaded: /System/Library/PrivateFrameworks/MobileSystemServices.framework/MobileSystemServices
dyld: loaded: /usr/lib/libbz2.1.0.dylib
dyld: loaded: /System/Library/PrivateFrameworks/BackBoardServices.framework/BackBoardServices
dyld: loaded: /System/Library/PrivateFrameworks/XPCObjects.framework/XPCObjects
dyld: loaded: /System/Library/PrivateFrameworks/TCC.framework/TCC
dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
dyld: loaded: /System/Library/PrivateFrameworks/UIFoundation.framework/UIFoundation
dyld: loaded: /System/Library/Frameworks/VideoToolbox.framework/VideoToolbox
dyld: loaded: /System/Library/PrivateFrameworks/MobileAsset.framework/MobileAsset
dyld: loaded: /System/Library/PrivateFrameworks/TelephonyUtilities.framework/TelephonyUtilities
dyld: loaded: /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
dyld: loaded: /System/Library/Frameworks/CoreImage.framework/CoreImage
dyld: loaded: /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
dyld: loaded: /System/Library/Frameworks/QuartzCore.framework/QuartzCore
dyld: loaded: /System/Library/Frameworks/CoreText.framework/CoreText
dyld: loaded: /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
dyld: loaded: /System/Library/PrivateFrameworks/WebKit.framework/WebKit
dyld: loaded: /System/Library/PrivateFrameworks/WebCore.framework/WebCore
dyld: loaded: /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
dyld: loaded: /usr/lib/libAccessibility.dylib
dyld: loaded: /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
dyld: loaded: /System/Library/PrivateFrameworks/IMFoundation.framework/IMFoundation
dyld: loaded: /usr/lib/libtidy.A.dylib
dyld: loaded: /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
dyld: loaded: /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
dyld: loaded: /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
dyld: loaded: /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
dyld: loaded: /usr/lib/libxslt.1.dylib
dyld: loaded: /usr/lib/libiconv.2.dylib
dyld: loaded: /usr/lib/libresolv.9.dylib
_dyld_register_func_for_add_image(0x3c314cc9)
PagerPlus(14958) malloc: recording malloc stacks to disk using standard recorder
_dyld_get_image_slide(0x6000)
dladdr(0x3c34b48d, 0x2fdf84ac)
PagerPlus(14958) malloc: stack logs being written into /private/var/mobile/Applications/D7F06B5F-7D51-45C7-8344-B9CD9CD348D9/tmp/stack-logs.14958.PagerPlus.index
PagerPlus(14958) malloc: Please issue: cp /private/var/mobile/Applications/D7F06B5F-7D51-45C7-8344-B9CD9CD348D9/tmp/stack-logs.14958.PagerPlus.f93OCU.link /tmp/
_dyld_register_func_for_remove_image(0x3c314d15)
_dyld_register_func_for_remove_image(0x3bedd961)
dyld_register_image_state_change_handler(40, 1, 0x3bed5189)
dyld_image_path_containing_address(0x3c417000)
dlopen(/usr/lib/system/libxpc.dylib, 0x00000010)
dyld_image_path_containing_address(0x3c2f2000)
dlopen(/usr/lib/system/libdispatch.dylib, 0x00000010)
dyld_image_path_containing_address(0x3c3fd000)
dlopen(/usr/lib/system/libsystem_network.dylib, 0x00000010)
dyld_image_path_containing_address(0x3bed4000)
dlopen(/usr/lib/libobjc.A.dylib, 0x00000010)
dyld_image_path_containing_address(0x34136000)
dlopen(/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation, 0x00000010)
dyld_image_path_containing_address(0x33e4d000)
dyld_image_path_containing_address(0x34a5e000)
dlopen(/System/Library/Frameworks/Foundation.framework/Foundation, 0x00000010)
dyld_image_path_containing_address(0x380a1000)
dlopen(/System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore, 0x00000010)
dyld_image_path_containing_address(0x3b755000)
dlopen(/usr/lib/libAccessibility.dylib, 0x00000010)
dyld_image_path_containing_address(0x3956d000)
dlopen(/System/Library/PrivateFrameworks/ProofReader.framework/ProofReader, 0x00000010)
dyld_image_path_containing_address(0x3abef000)
dlopen(/System/Library/PrivateFrameworks/XPCObjects.framework/XPCObjects, 0x00000010)
dyld_image_path_containing_address(0x385b4000)
dlopen(/System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation, 0x00000010)
dyld_image_path_containing_address(0x36ffe000)
dlopen(/System/Library/PrivateFrameworks/CommonUtilities.framework/CommonUtilities, 0x00000010)
dyld_image_path_containing_address(0x3686d000)
dlopen(/System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary, 0x00000010)
dyld_image_path_containing_address(0x36d4a000)
dlopen(/System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices, 0x00000010)
dyld_image_path_containing_address(0x3565d000)
dlopen(/System/Library/Frameworks/OpenGLES.framework/OpenGLES, 0x00000010)
dyld_image_path_containing_address(0x37337000)
dlopen(/System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport, 0x00000010)
dyld_image_path_containing_address(0x375ef000)
dlopen(/System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight, 0x00000010)
dyld_image_path_containing_address(0x38f0b000)
dlopen(/System/Library/PrivateFrameworks/OpenCL.framework/OpenCL, 0x00000010)
dyld_image_path_containing_address(0x36d83000)
dlopen(/System/Library/PrivateFrameworks/BackBoardServices.framework/BackBoardServices, 0x00000010)
dyld_image_path_containing_address(0x36c9c000)
dlopen(/System/Library/PrivateFrameworks/AppSupport.framework/AppSupport, 0x00000010)
dyld_image_path_containing_address(0x348ca000)
dlopen(/System/Library/Frameworks/CoreVideo.framework/CoreVideo, 0x00000010)
dyld_image_path_containing_address(0x38542000)
dlopen(/System/Library/PrivateFrameworks/MobileAsset.framework/MobileAsset, 0x00000010)
dyld_image_path_containing_address(0x34810000)
dlopen(/System/Library/Frameworks/CoreTelephony.framework/CoreTelephony, 0x00000010)
dyld_image_path_containing_address(0x39726000)
dlopen(/System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices, 0x00000010)
dyld_image_path_containing_address(0x35515000)
dlopen(/System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices, 0x00000010)
dyld_image_path_containing_address(0x37563000)
dlopen(/System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices, 0x00000010)
dyld_image_path_containing_address(0x34721000)
dlopen(/System/Library/Frameworks/CoreMedia.framework/CoreMedia, 0x00000010)
dyld_image_path_containing_address(0x37ff8000)
dlopen(/System/Library/PrivateFrameworks/IMFoundation.framework/IMFoundation, 0x00000010)
dyld_image_path_containing_address(0x39544000)
dlopen(/System/Library/PrivateFrameworks/PrintKit.framework/PrintKit, 0x00000010)
dyld_image_path_containing_address(0x34867000)
dlopen(/System/Library/Frameworks/CoreText.framework/CoreText, 0x00000010)
dyld_image_path_containing_address(0x35daa000)
dlopen(/System/Library/Frameworks/QuartzCore.framework/QuartzCore, 0x00000010)
dyld_image_path_containing_address(0x345de000)
dlopen(/System/Library/Frameworks/CoreImage.framework/CoreImage, 0x00000010)
dyld_image_path_containing_address(0x398e3000)
dlopen(/System/Library/PrivateFrameworks/TelephonyUtilities.framework/TelephonyUtilities, 0x00000010)
dyld_image_path_containing_address(0x39d73000)
dlopen(/System/Library/PrivateFrameworks/UIFoundation.framework/UIFoundation, 0x00000010)
dyld_image_path_containing_address(0x3a137000)
dlopen(/System/Library/PrivateFrameworks/WebCore.framework/WebCore, 0x00000010)
dyld_image_path_containing_address(0x3aa67000)
dlopen(/System/Library/PrivateFrameworks/WebKit.framework/WebKit, 0x00000010)
dyld_image_path_containing_address(0x3a117000)
dlopen(/System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks, 0x00000010)
dyld_image_path_containing_address(0x35ffd000)
dlopen(/System/Library/Frameworks/UIKit.framework/UIKit, 0x00000010)
dyld_image_path_containing_address(0x6000)
dyld_register_image_state_change_handler(45, 0, 0x3bed6ef9)
(lldb) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:08:32.710

模拟器模拟 iphone 或 ipad 设备。ipod 没有电话支持。检查 Telephony 框架（或 ipod 设备不支持的任何东西）是否在 Build Phases 的链接二进制文件与库部分中标记为“可选”而不是“必需”。如果您需要不支持的东西，它可能无法在 ipod 设备上运行。尽管我不知道它会是什么样子，但我希望看到一个错误。

# c# - Moq 为不同的 IEnumerable 参数设置返回相同的结果

> ID：15967138
> 
> 赞同：0
> 
> 时间：2013-04-12T09:01:10.280
> 
> 标签：c#, unit-testing, moq

我在最小起订量中遇到了一个非常奇怪的行为，我不明白这是一个错误还是我做错了什么。这是示例：

```
List<CustomerDataTransaction> transactions0 = GetTransactionsSomehow();
List<CustomerDataTransaction> transactions1 = GetTransactionsSomehow();

var portfolioTransactions0 = new List<IPortfolioTransaction>();
var portfolioTransactions1 = new List<IPortfolioTransaction>();

m_TransactionMapperMock
    .Setup(m => m.CreatePortfolioTransactions(transactions0))
    .Returns(portfolioTransactions0);

m_TransactionMapperMock
    .Setup(m => m.CreatePortfolioTransactions(transactions1))
    .Returns(portfolioTransactions1); 
```

我已经检查了 transaction0 不等于 transactions1，所以它肯定是不同的列表。但是，当使用不同的参数（transactions0 和 transactions1）调用时，mock 会两次返回投资组合交易 1。我试图找出问题所在，但我没有找到任何原因。然后我在每个列表中添加了虚拟元素并修复了它，模拟开始按计划返回不同的值。这是 Mock 的错误还是我没有得到什么？据我了解，列表中的值根本不应该影响它。

PS我不知道它是否重要但方法接受`IEnumerable<CustomerDataTransaction>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:05:19.017

考虑尝试：

```
It.Is<IEnumerable<CustomerDataTransaction>>(t => t == transactions1)) 
```

从记忆中我认为起订量使用了引用相等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:45:21.570

扩展 NinjaNye 的答案，使用 It.Is 满足测试是因为它确保您正在查看对象的确切实例，而不是相等运算符。

使用您的测试框架，如果您说 Assert.NotEqual 并给它两个对象，它会使用相等运算符并说一个空列表等于另一个。考虑能够将 objectA.Property1 与 objectA.Property2 进行比较。Assert.Equal 将查看值而不是值的实例是有道理的。

Xunit 提供了一个方法 Assert.Same，它将提供与 Moq 的 It.Is<> 相同的功能，验证它是对象的同一个实例。我相信当今大多数流行的测试框架都提供了类似的行为。

# codeigniter - Codeigniter 分页路由问题

> ID：15967141
> 
> 赞同：1
> 
> 时间：2013-04-12T09:01:25.043
> 
> 标签：codeigniter, pagination, routes

我在 routes.php 中配置了一个路由，

```
$route['job-history/(:num)'] = "customer/customer/jobhistory/$1"; 
```

控制器中的分页配置如下，

```
$this->load->library('pagination');
$config['per_page'] = 25;
$config['total_rows'] = 100;
$config['base_url'] = $this->config->item('base_url').'job-history';
$config["uri_segment"] = 2;
$this->pagination->initialize($config);
$page = ($this->uri->segment(2)) ? $this->uri->segment(3) : 0; 
```

加载时显示404错误页面，

www.example.com/job-history

如果手动添加一个零，例如 www.example.com/job-history/0，它将起作用。

如何加载 www.example.com/job-history 作为第一页。我的困惑有什么问题。请提供任何帮助

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T09:32:29.937

您还需要单个`job-history`航段的路线。

```
$route['job-history/(:num)'] = 'customer/customer/jobhistory/$1';
$route['job-history'] = 'customer/customer/jobhistory'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T09:56:07.290

因为，在 route.php 中，您只提到了后面有数字段的作业历史页面，并且您的页面作业历史没有这样的规则，它被重定向到 404。

添加

```
$route['job-history'] = 'customer/customer/jobhistory'; 
```

前

```
$route['job-history/(:num)'] = 'customer/customer/jobhistory/$1'; 
```

# css - @import 或直接嵌入的 LESS 变量？

> ID：15967142
> 
> 赞同：1
> 
> 时间：2013-04-12T09:01:28.403
> 
> 标签：css, styles, less

我有这个硬汉。我有我的 LESS 变量和 mixins 设置。现在我想了解如何更好地导入它们。我到处读到通过导入添加样式是不好的，不应该这样做，fe：

1.  [http://www.stevesouders.com/blog/2009/04/09/dont-use-import/](http://www.stevesouders.com/blog/2009/04/09/dont-use-import/)
2.  [https://developers.google.com/speed/docs/best-practices/rtt#AvoidCssImport](https://developers.google.com/speed/docs/best-practices/rtt#AvoidCssImport)

这些论点是可以理解的，但如何做到这一点使用 LESS？将所有变量和mixins放在主文件中还是@import在这种情况下不是那么糟糕并正确检查是否更好。我将不胜感激。BR。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:06:33.990

请注意，它们指的是 CSS 导入。如果您使用 LESS 导入并“编译”较少的文件，您将得到一个文件，不会以链接文章中所述的方式影响浏览器的性能。

所以总而言之，我想说，只要确保你的文件以 .less 结尾，无论如何它们都会被合并。

# sqlite - 在同一张表 SQLite 上创建外键

> ID：15967146
> 
> 赞同：10
> 
> 时间：2013-04-12T09:01:47.340
> 
> 标签：sqlite, foreign-keys, ddl

最近我开始使用 SQLite（根据我的学习需要），我遇到了 SQLite 的一些限制，我想知道：SQLite 不能在同一张表上创建外键吗？例如，这是我的代码：

```
CREATE TABLE Categories
(
    name varchar(20),
    parent_category varchar(20) NULL,
    PRIMARY KEY(name),
    FOREIGN KEY parent_category_fk(parent_category) REFERENCES Categories(name)
) 
```

但是当我尝试在 SQLiteStudio 中执行 SQL 时，它给了我一个外键错误。

有谁知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T10:43:17.570

问题是 FK 子句的语法错误。它应该是：

```
FOREIGN KEY (parent_category) REFERENCES Categories(name) 
```

如果要命名 FK 约束，请使用`CONSTRAINT`关键字前缀，如下所示：

```
CONSTRAINT parent_category_fk FOREIGN KEY (parent_category) REFERENCES Categories(name) 
```

# php - MATLAB 可执行文件太慢

> ID：15967157
> 
> 赞同：23
> 
> 时间：2013-04-12T09:02:24.653
> 
> 标签：php, c, matlab, exe, matlab-deployment

我使用 MATLAB 将我的 MATLAB 程序转换为基于控制台的应用程序`deploytool`。执行 MATLAB`.m`文件大约需要 2 秒，但是在我将其转换为可执行文件并调用 后`.exe`，执行需要 45 秒，这太长了。

我想将 MATLAB 程序与 PHP 集成。有没有另一种有效和快速的方法来做到这一点？在我的项目中，时间确实是一个很大的因素（不是开发时间，而是应用程序的执行时间）。那么有没有一种时间更短的方法呢？

我在网上看到我们可以写PHP扩展来调用MATLAB。这个方法快还是和调用`.exe`文件一样？MATLAB 编码器对这个过程有帮助吗？如果有其他选择，请提及。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-12T09:21:38.777

MATLAB 编译的 .exe 在您第一次运行时会遇到开销，因为它正在启动 MCR：[为什么我使用 MATLAB Compiler 4.1 编译的应用程序需要很长时间才能启动？](http://www.mathworks.co.uk/support/solutions/en/data/1-T6Y3P/?solution=1-T6Y3P "为什么使用 MATLAB Compiler 4.1 编译的应用程序需要很长时间才能启动？")

除非您注销或重新启动操作系统，否则 MCR 将保持预加载状态。另一个有用的读物​​：[加速编译的应用程序启动](http://undocumentedmatlab.com/blog/speeding-up-compiled-apps-startup/)。

“[为什么我使用MATLAB编译器创建的单机第一次启动需要更长的时间？](http://www.mathworks.co.uk/support/solutions/en/data/1-AO2EOM/index.html?solution=1-AO2EOM) ”还报告说连续运行应该更快，但如果你稍后重新运行，你将不得不重新加载内存中的进程。

您可以将您的代码包含在 内`tic toc`，部署它并检查执行所花费的时间，以防止启动开销。

加快速度的替代方法`.exe`是使用 PHP 调用 MATLAB。如果您保持 MATLAB 会话打开，您会遇到一次开销。您可以在启动时启动 MATLAB，从而避免在使用 PHP 调用期间特别遭受开销。

有关更多信息，请阅读[Calling MATLAB from PHP](http://mem.bio.pitt.edu/content/calling-matlab-php)`exit` ，并请记住，除非特别需要，否则您不想使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-17T12:07:09.817

调用使用 MATLAB Compiler 创建的可执行文件相对于在实时 MATLAB 中调用程序会产生开销，因为它需要启动 MCR。第一次启动它会更长，但即使在第一次之后仍然会有开销。

如果您不仅可以访问 MATLAB Compiler，还可以访问其中一个 Builder 产品（Builder for .NET 或 - 这可能更好，因为您使用的是 PHP - Builder for Java），那么有一种解决方法。

使用 Builder 产品，您可以创建独立的组件（.NET 程序集或 Java .jar）。然后，您可以创建一个运行的 .NET 或 Java 应用程序，实例化您的 MATLAB 构建的组件（它会启动 MCR），然后坐在那里等待来自您的 PHP 的调用。然后，每个调用根本不会受到 MCR 启动开销的影响，并且从 PHP 到 .NET/Java 的调用的开销应该小得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T01:40:25.473

正如其他人所说，当您调用可执行文件时，加载可执行文件时会产生（对于matlab来说真的很大）开销。解决方案？只加载一次。怎么做？它很复杂并且取决于平台。

我认为最便携的方法是在 matlab 中创建一个服务器（我知道这是可能的，但我从未尝试过）。因此，当您需要使用它时，您只需连接到它并发送参数即可。

看看这个：[matlab 中的 HTTP 服务器](http://www.mathworks.com/matlabcentral/fileexchange/29027-web-server)和这个：http: [//blogs.mathworks.com/loren/2011/05/27/transferring-data-between-two-computers-using-matlab/](http://blogs.mathworks.com/loren/2011/05/27/transferring-data-between-two-computers-using-matlab/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-02T10:59:27.050

就像上面所说的一样，我可以建议设置一个 RAM 驱动器，并将`MCR_CACHE_ROOT`系统变量设置为 RAM 驱动器上的一个目录。

这将显着改善进一步的启动时间。

如果有人在桌面上使用此方案，请确保您的 RAM 驱动器在重新启动期间保持不变。

# xcode - 尝试在 xcode 4.6.1 中添加电影但崩溃

> ID：15967158
> 
> 赞同：0
> 
> 时间：2013-04-12T09:02:36.660
> 
> 标签：xcode, video

我正在尝试在 xcode 中添加视频，但它崩溃了：`[NSURL initFileURLWithPath:]: nil string`

```
(IBAction)Play:(id)sender {

    /////
    NSString *videoUrl=[[NSBundle mainBundle]pathForResource:@"tnween" ofType:@"mov"];

    MPMoviePlayerController *player=[[MPMoviePlayerController alloc]initWithContentURL:[NSURL fileURLWithPath:videoUrl]];
    [player play];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:08:02.407

也许如果你尝试：

```
NSString *videoUrl=[[NSBundle mainBundle]pathForResource:@"tnween" ofType:@"mov"];
NSURL *url = [NSURL urlWithString:videoUrl];
MPMoviePlayerController *player=[[MPMoviePlayerController alloc]initWithContentURL:url]; 
```

# mysql - 用mysql中的数据填充表

> ID：15967159
> 
> 赞同：0
> 
> 时间：2013-04-12T09:02:39.600
> 
> 标签：mysql, database, select, insert-query

我有两个数据库

1.  db1

2.  数据库2

db1 在 控制器表的描述下方有表**控制器。**

```
+-----------------------+--------------+------+-----+---------+-------+
| Field                 | Type         | Null | Key | Default | Extra |
+-----------------------+--------------+------+-----+---------+-------+
| id                    | int(11)      | NO   | PRI | NULL    |       |
| interface_name        | varchar(255) | YES  |     | NULL    |       |
| store_number          | int(11)      | YES  |     | NULL    |       |
| file_seq_no           | int(11)      | YES  |     | NULL    |       |
| packet_seq_no         | int(11)      | YES  |     | NULL    |       |
| last_trans_start_date | date         | YES  |     | NULL    |       |
| last_trans_end_date   | date         | YES  |     | NULL    |       |
| last_extract_datetime | datetime     | YES  |     | NULL    |       |
| is_enabled            | char(1)      | YES  |     | NULL    |       |
+-----------------------+--------------+------+-----+---------+-------+ 
```

以及具有名称存储表的数据库**db2**中可用的相同表描述和具有不同名称的附加列（date_opened） 。

我的工作是根据以下逻辑编写查询。

第 1 点：从 db2.store 中获取所有 store_number、date_opened。

第 2 点：从 db1.controller 表中获取所有 store_number 到列表中。

第 3 点：过滤从 db1.controller 中不存在的 db2.store 获取的新 store_number。

**对于这些新的 store_number 中的每一个**

为新存储插入默认初始值，file_seq_number 和 packet_seq_number 将设置为零。

last_transaction_start_date , last_transaction_end_date , last_extract_timestamp 将是商店创建日期，即 db2.store.date_opened

启用将设置为 1

主要查询是

```
Insert into db1.controller table values( store_number, 0, 0,$date_opened,$date_opened,
$date_opened,1); 
```

谁能帮我完成这个sql查询。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:44:35.240

您可以通过两种方式获取过滤后的数据。

在...的帮助下`subquery`

```
Select db2.store .* from db2.store  where db2.store.id not in(Select db1.controller.id from db1.controller) 
```

此处将显示 db1.controller 中不存在的所有新数据。您也可以在加入的帮助下显示相同的结果。

```
 SELECT db2.store.* FROM  db2.store  LEFT JOIN db1.controller ON db2.store.ID = db1.controller.ID WHERE db1.controller.ID IS NULL 
```

您将获得`db1.controller`现在不存在的数据迭代数据并执行插入查询。

**更新**

您可以尝试以下单个查询来添加过滤记录。

```
Insert into db1.controller (id,interface_name,store_number,file_seq_no,packet_seq_no,last_trans_start_date,last_trans_end_date,last_extract_datetime,is_enabled)  SELECT db2.store.id, db2.store.interface_name, db2.store.store_number, 0, 0, db2.store.date_opened, db2.store.date_opened, db2.store.date_opened, db2.store.is_enabled  FROM  db2.store  LEFT JOIN db1.controller ON db2.store.ID = db1.controller.ID WHERE db1.controller.ID IS NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:01:03.917

这是我所做的

> INSERT INTO db1.controller (interface_name,store_number,file_seq_no,packet_seq_no,last_trans_start_date,last_trans_end_date,last_extract_datetime,is_enabled) SELECT 'test',s.store_number,0,0,s.date_opened,s.date_opened,s.date_opened,'1'从`db2`。`store`s 其中 s.store_number 不在（从 db1.controller 中选择 store_number）；

# android - Android 上的音频编码/解码（ALAC、mp3...）

> ID：15967160
> 
> 赞同：1
> 
> 时间：2013-04-12T09:02:40.663
> 
> 标签：android, audio, decode, encode

我在 Android 上处理音频时遇到问题（目标版本是 Android 4.0）。音频文件通过不同的方法进行编码（其中最优选：ALAC、AAC、MP3、OGG）。问题出在以下两点：

1.需要将任意格式的音频文件重新编码为ALAC。

2.需要将ALAC解码为PCM。应该能够解码一定数量的包，从某个包开始。

也许有人知道一些能够解决这些问题的框架或库？

我所有的研究都导致我需要使用 ffmpeg 库，但是使用该库会产生大量问题，其中一些问题对我来说是无法解决的。

# actionscript-3 - 获取movieClip的颜色

> ID：15967166
> 
> 赞同：1
> 
> 时间：2013-04-12T09:02:53.540
> 
> 标签：actionscript-3, flash, actionscript

我想从影片剪辑中获取颜色。我正在使用以下代码：

```
for (var j = 0; j <bmpd.width; j++)
{
    for (var k = 0; k <bmpd.height; k++)
    {
        trace("0x"+bmpd.getPixel(j,k).toString(16))
    }
} 
```

这里的圆圈是一个电影剪辑。请指导我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:18:11.243

要在某个点或范围内获取 MovieClip 上的颜色，您应该创建一个所需容量的透明 BitmapData（点为 1x1），用 0x0 颜色填充它，然后创建一个将 BitmapData 的 (0,0) 对齐到上的变换矩阵你所在区域的左角，然后在位图上绘制那个 MC，然后你就可以查询它的像素了。一个例子（一个点）：

```
private static var hitTestBD:BitmapData=new BitmapData(1,1,true,0);
private static vat hitTestMatrix:Matrix=new Matrix(); 
public static function getMCColor(mc:DisplayObject,tx:Number,ty:Number):uint {
    hitTestMatrix.identity();
    hitTestMatrix.translate(-1*tx,-1*ty); // aligning
    hitTestBD.fillRect(hitTestBD.rect,0x0);
    hitTestBD.draw(mc,hitTestMatrix);
    return hitTestBD.getPixel32(0,0);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T09:12:50.600

您必须提取颜色通道：

```
for (var j = 0; j < bmpd.width; j++) {
    for (var k = 0; k < bmpd.height; k++) {
        // Read the pixel color
        var color:uint = bmpd.getPixel(j, k);

        // Read color channel values
        var alpha:uint = color >> 24 & 0xFF;
        var red:uint   = color >> 16 & 0xFF;
        var green:uint = color >> 8 & 0xFF;
        var blue:uint  = color & 0xFF;

        // Reassemble the color
        trace("color: 0x" + red.toString(16) + green.toString(16) + blue.toString(16));
        trace("alpha: 0x" + alpha.toString(16));
    }
} 
```

# haskell - 可扩展的 Haskell 类型类

> ID：15967167
> 
> 赞同：15
> 
> 时间：2013-04-12T09:02:53.967
> 
> 标签：haskell, typeclass, extensible

我正在阅读一篇关于依赖类型编程的论文，并遇到了以下引用：

“[...] 与 Haskell 的类型类相比，数据类型 [...] 是**封闭**的”，从某种意义上说，如果不扩展数据类型，就无法向 Universe 添加新类型。

我的新手问题是：Haskell 类型的课程在什么意义上是**开放**的？它们如何扩展？此外，拥有此属性（开放与封闭）的类型理论后果是什么？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T09:07:57.517

类型类是开放的，因为您可以将任意类型作为它的实例。创建类型类时，您指定接口，但不指定属于它的类型。`instance TypeClass type of`然后在任何包含 typeclass 定义的代码中，您可以使用语法使其类型实例从接口提供必要的功能。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-12T14:05:02.830

给定一个类型类，如：

```
class Monoid m where
    mempty  :: m
    mappend :: m -> m -> m 
```

...它（基本上）在底层实现为字典类型：

```
data Monoid m = Monoid
    { mempty  :: m
    , mappend :: m -> m -> m
    } 
```

实例如：

```
instance Monoid [a] where
    mempty  = []
    mappend = (++) 
```

...被翻译成字典：

```
listIsAMonoid :: Monoid [a]
listIsAMonoid = Monoid
    { mempty  = []
    , mappend = (++)
    } 
```

...并且当您使用列表作为`Monoid`s 时，编译器会参考上述字典。

这给我们带来了您的问题：

> Haskell 类型的类在什么意义上是开放的？它们如何扩展？

它们是开放的，就像多态值是开放的一样。我们有一些多态数据类型：

```
data Monoid m = ... 
```

...并且我们可以将多态类型变量实例化为可以为and字段`m`提供合适值的任何类型。`mempty``mappend`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T23:26:58.493

类型类是“开放的”，因为它们总是可以通过添加更多实例声明来“事后”添加更多类型。这甚至可以在仅*使用*包含类型类的模块的“客户端”代码中完成。

关键是我可以编写对具有某种类型类约束的值进行操作的代码，并且无需修改的相同代码可以用于在我编写类型类时不存在的类型。

Haskell 中的具体数据类型是“封闭的”，因为这不可能发生。如果我编写对特定数据类型的成员进行操作的代码（即使它是多态的），那么除非您能够修改类型，否则您将无法使用该代码来操作我没有想到的新事物（这可能需要修改所有使用它的地方）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T09:14:29.557

Ralf Laemmel[在 Channel9 上有一些非常好的视频讲座](http://channel9.msdn.com/shows/Going+Deep/C9-Lectures-Dr-Ralf-Laemmel-Advanced-Functional-Programming-The-Expression-Problem/)- 强烈推荐。

# datatables - 如何更新数据表而不再次渲染所有表？

> ID：15967169
> 
> 赞同：0
> 
> 时间：2013-04-12T09:02:59.480
> 
> 标签：datatables, meteor

我正在使用流星应用程序的数据表。我的问题是，当某些字段更改时，所有表格都会再次呈现，如果我在表格的第二页上或者我按字段排序，则表格会再次呈现，我又回到了开头。我的代码：

```
Template.adminpage.rendered = function() {
   $('#userData').dataTable({
        "bDestroy":true,
        "aaSorting": [[ 0, "desc" ]],
        "bAutoWidth":false,
        "bFilter": false,
        "aoColumns": [
            { "bVisible": false },
            null,
            null,
            null,
            null,
            null,
            null,
            null
        ],
        "aaData":  Template.adminpage.arrayUsersAdmin()
    });
} 
```

填充表格的数组：

```
Template.adminpage.arrayUsersAdmin=function() {
    var adminUsers = allUserData.find({roles: 'basic'});
    var arrayUserAdmin = [];
    var count=0;
    adminUsers.forEach(function(user) {
        var idColumn = user._id;
        var dateColumn=moment(user.createdAt).format("MMM Do HH:mm");
        var usernameColumn=username;
        var emailColumn=email;
        arrayUserAdmin[count]=[
            idColumn,
            dateColumn,
            usernameColumn,
            emailColumn
        ];
        count++;
    });
    return arrayUserAdmin;
} 
```

服务器上的集合：

```
if(Meteor.users.find({_id: this.userId}, {roles: 'admin'})){
    Meteor.publish("allUserData", function () {
        var self = this;
        var handle = Meteor.users.find({}).observeChanges({
            added: function(id, fields){
                self.added("allUsersCollection", id, fields);
            },
            changed: function(id, fields){
                self.changed("allUsersCollection", id, fields);
            },
            removed: function(id){
                self.removed("allUsersCollection", id); 
            }
        });
        self.ready();
        this.onStop(function() {
            handle.stop();
        }); 
    }); 
} 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:15:22.653

您可以将`reactive: false`选项作为选项传递给`find`，这会禁用依赖项的基础添加，如下所示：

```
Template.adminpage.arrayUsersAdmin=function() {
    var adminUsers = allUserData.find({roles: 'basic'}, reactive: false);
    // Your code
    return arrayUserAdmin;
} 
```

[此处](http://docs.meteor.com/#find)记录了此行为

或者，如果您希望更新各个字段，则必须自己添加它们。为此，您可以使用[`allUserDate.find({roles: 'basic'}).observe`](http://docs.meteor.com/#observe). 但是，这将需要您直接编辑 HTML，而且非常混乱。更好的选择是完全改变你的表结构——不要使用数据表，使用普通的 HTML 表，并使用 minimongo 查询对数据进行排序。

无论如何，您可以像这样使用观察：

```
allUserData.find({roles: 'basic'}).observe({
    changed: function(newDocument, oldDocument) {
        // Update table
    }
}); 
```

# asp.net-mvc - 更改数据库方案以避免拥有多个数据库

> ID：15967170
> 
> 赞同：0
> 
> 时间：2013-04-12T09:03:05.763
> 
> 标签：asp.net-mvc, sql-server-2008

我们公司有一个用 asp.net MVC 编写的门户网站。现在每个部门都有自己的数据库，但我们希望避免拥有多个数据库，因为数据库方案是相同的，只是每个部门内部都有不同的数据。就像每个部门都有自己的项目等。数据库模型应该如何更改这样可以避免拥有多个数据库吗？我们也想在不同部门之间分享一些元素，比如项目。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:34:11.147

您想到的单个数据库必须重新设计其表，以便您能够为每个表中的每条记录判断该记录与哪个部门相关。本质上，您需要向每个根级表添加一个“DeptId”列。我所说的根级表仅指外键关系的父级。例如，如果您有一个 OrderHeader 和 OrderLines，那么只有 OrderHeader 表需要这个 DeptId 列。这些行与标题相关，因此您也不需要将此列添加到行表中。或者，如果您有一个 Customer 表，这样每个客户只属于一个部门，那么您可以将 DeptId 列添加到此客户表中，然后在 OrderHeader 表中不需要它（因为订单标题应该引用 Customer桌子）

您希望在数据库之间共享的那些表/元素不会添加 DeptId 列。

# c++ - QProcess 多平台命令

> ID：15967171
> 
> 赞同：4
> 
> 时间：2013-04-12T09:03:06.160
> 
> 标签：c++, linux, qt, tcl, multiplatform

我需要使用 QProcess 启动一些脚本。

为此，在 Windows 下，我使用`QProcess::execute("cmd [...]");`.

但是，如果我在 Linux 等其他操作系统下运行，这将不起作用。

因此，我想知道使该代码可移植的最佳解决方案是否是干扰多平台脚本解决方案，例如 TCL。

所以我使用 :`QProcess:execute("tclsh text.tcl");`并且它有效。

但是，我收到了三个关于这个问题的问题。因为我不确定我做了什么。

*   无论我在哪里`execute()`执行它都会在 Windows 和 Linux 下`tclsh`使用该文件执行吗？`test.tcl`似乎是这样，但我想确定！有什么不好的情况会发生吗？
*   这是一个好的解决方案吗？我知道很多人的经验比我多得多，如果我能学到任何东西，我将不胜感激！
*   为什么不使用`std::system()`？便携性差吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:25:09.557

虽然这不是一个完整的答案，但我可以指出一些事情。

尤其`tclsh`是在Windows下相当开心；这是一个主要的支持平台。在实践中可能发生的主要问题是，如果您传递一个包含空格的文件名（由于社区实践的差异，这在 Windows 下明显比在 Unix 上更有可能）。但是，`execute()` *正如您所写的那样，它*没有问题。好吧，只要`tclsh`位于`PATH`.

将 Tcl 脚本执行与 Qt 集成的另一个主要选项是将您的程序与 Tcl 二进制库链接并使用它。Tcl 的 API 是针对 C 的，所以从 C++ 中使用它应该非常简单（如果从 C++ 的角度来看有点笨拙）：

```
// This holds the description of the API
#include "tcl.h"

// Initialize the Tcl library; *call only once*
Tcl_FindExecutable(NULL);

// Make an evaluation context
Tcl_Interp *interp = Tcl_CreateInterp();

// Execute a script loaded from a file (or whatever)
int resultCode = Tcl_Eval(interp, "source test.tcl");

// Check if an error happened and print the error if it did
if (resultCode == TCL_ERROR) {
    std::cerr << "ERROR: " << Tcl_GetString(Tcl_GetObjResult(interp)) << std::endl;
}

// Squelch the evaluation context
Tcl_DeleteInterp(interp); 
```

我不是一个特别出色的 C++ 编码器，但这应该可以给出想法。我不知道`QProcess::execute()`vs `std::system()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:24:18.297

您的解决方案的一个弱点是，您必须在 Windows 上安装`tclsh`. Solaris 上也没有`tclsh`。可能在别的地方。

与 相比`std::system()`，`QProcess`为您提供更多关于执行命令过程的控制和信息。如果您只需要执行脚本（例如，不接收输出） -`std::system()`是一个不错的选择。

我在类似情况下使用过的东西：

```
#ifdef Q_OS_WIN
    mCommand = QString("cmd /C %1 %2").arg(command).arg(args);
#else
    mCommand = QString("bash %1 %2").arg(command).arg(args);
#endif 
```

# orbeon - 无法在 Orbeon 代理 portlet 中检索 liferay 用户名

> ID：15967173
> 
> 赞同：0
> 
> 时间：2013-04-12T09:03:11.217
> 
> 标签：orbeon

目前，我正在尝试将一个检索用户名的 Orbeon 表单集成到 Liferay 中。（我在这里描述了这个问题：http: [//discuss.orbeon.com/Unable-to-retrieve-liferay-roles-in-Orbeon-proxy-portlet-td4656273.html](http://discuss.orbeon.com/Unable-to-retrieve-liferay-roles-in-Orbeon-proxy-portlet-td4656273.html) - Post 2）

为此，我创建了一个带有一个输入字段的简单表单，并且我想在该字段中获取 Liferay 用户名。我测试了所有小写的配置（[Unable to retrieve Header information on Orbeon 4.0.1 but works on 3.9](https://stackoverflow.com/questions/15953620/unable-to-retrieve-header-information-on-orbeon-4-0-1-but-works-on-3-9)）并且没有返回任何内容。

[首先：我使用http://wiki.orbeon.com/forms/doc/developer-guide/admin/deployment-portlet](http://wiki.orbeon.com/forms/doc/developer-guide/admin/deployment-portlet)完成了 properties-local.xml并将所有属性都放在小写中。

属性-local.xml：

```
 <!-- this is the property for orbeon forms 4.0 -->
    <property as="xs:anyuri"  name="oxf.fr.persistence.exist.exist-uri"
              value="http://orbeonserver:8080/orbeon/exist/rest/db/orbeon/fr"/>

   <!-- configure authentication properties through headers -->
    <property as="xs:string" name="oxf.fr.authentication.method"
              value="header"/>

    <!-- if you want the liferay user email used for form runner authentication -->
    <property as="xs:string"  name="oxf.fr.authentication.header.username"
              value="orbeon-liferay-user-email"/>

    <!-- if you want liferay roles used -->
    <property as="xs:string" name="oxf.fr.authentication.header.roles"
              value="orbeon-liferay-user-roles"/>

    <!-- to propagate username/roles to the persistence layer, if using authentication -->
    <property as="xs:string"  name="oxf.xforms.forward-submission-headers"
              value="orbeon-username orbeon-roles"/> 
```

在我的表单中，我使用 xxf:get-request-header() 来获取 Liferay 用户名：

```
<xf:bind id="userName-bind" name="userName" ref="userName"
         xxf:default="xxf:get-request-header('orbeon-liferay-user-email')"/> 
```

最后为了在 Liferay 中插入表单，我使用了 orbeon proxy-portlet.war（这边没有配置）。

我看到了表格，但字段仍然是空的。什么都没有返回。我错过了一步？

仅供参考，我使用了：liferay-portal-6.1.1-ce-ga2 和 orbeon-4.0.1.201303152357-PE（免费试用许可证）。Orbeon 和 Liferay 位于 2 个不同的服务器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:02:05.870

您可能想尝试最新版本的 Orbeon 代理 portlet（来自 github 的 4.1-ce），因为以下问题仅在一个月前关闭：
[https](https://github.com/orbeon/orbeon-forms/issues/886) ://github.com/orbeon/orbeon-forms/issues/886 “代理 portlet：能够配置标头和参数的转发”。因此，Orbeon 代理 portlet 的 4.01 版本缺乏这种能力。

# browser - 是否可以对特定于浏览器的 CSS 使用 mixin

> ID：15967175
> 
> 赞同：3
> 
> 时间：2013-04-12T09:03:22.723
> 
> 标签：browser, sass, mixins, vendor-prefix

我正在寻找一种将 mixin 用于特定于浏览器的 CSS hack 的解决方案。我正在使用 JavaScript 在 HTML 类中添加浏览器标记。喜欢`.ie .ie7 .ie8 .ie9`

我想像这样使用mixin：

```
.box-test {
margin: 10px;
@include browser(ie7) {
    margin: 20px;
    }
} 
```

期望的输出：

```
.box-test {
margin: 10px;
}
.ie7 .box-test {
    margin: 20px;
    } 
```

我尝试制作的mixin：

```
@mixin browser($browserVar) {
    @if $browserVar == ie7 {
    .ie7 { @content }
    }
    @else if $browserVar == ie8 {
    .ie8 { @content; }
         }
    @else if $browserVar == ie9 {
    .ie9 { @content; }
    }
} 
```

问题是输出是：

```
.box-test {
    margin: 10px; }
.box-test .ie7 {
      margin: 20px; } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T12:35:22.867

最简单的 mixin 是这样的：

```
@mixin legacy-ie($ver: 7) {
    .ie#{$ver} & {
        @content;
    }
} 
```

输出：

```
.baz {
    background: #CCC;

    @include legacy-ie {
        background: black;
    }
} 
```

如果您想一次发出适用于多个 IE 版本而不重复的样式，那么这将是一种方法：

```
$default-legacy-ie: 7 8 9 !default;

@mixin legacy-ie($versions: $default-legacy-ie) {
    $sel: ();
    @each $v in $versions {
        $sel: append($sel, unquote('.ie#{$v} &'), comma);
    }

    #{$sel} {
        @content;
    }
}

.foo {
    background: red;

    @include legacy-ie {
        background: green;
    }
}

.bar {
    background: yellow;

    @include legacy-ie(7 8) {
        background: orange;
    }
} 
```

输出：

```
.foo {
  background: red;
}
.ie7 .foo, .ie8 .foo, .ie9 .foo {
  background: green;
}

.bar {
  background: yellow;
}
.ie7 .bar, .ie8 .bar {
  background: orange;
} 
```

如果您希望能够抑制所有的 IE kludges，您只需要添加一个变量和一个`@if`块：

```
$enable-legacy-ie: true !default;

@mixin legacy-ie($ver: 7) {
    @if $enable-legacy-ie {
        .ie#{$ver} & {
            @content;
        }
    }
} 
```

在文件顶部设置`$enable-legacy-ie`为您不希望包含特定于 IE 的样式，如果您确实希望包含样式，请将其设置为。您可以轻松编写反向混合来隐藏旧 IE 无法使用的样式，以便 IE 特定文件保持美观和小。`false``true`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:33:12.570

你把事情复杂化了。:) 可能就这么简单：

```
.box-test {
  margin: 10px;

  .ie-7 & {
    margin: 20px; } } 
```

结果：

```
.box-test {
  margin: 10px;
}
.ie-7 .box-test {
  margin: 20px;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-05-18T05:29:05.760

我曾尝试为“@-moz-document url-prefix()”FF hack 添加 mixin，但它未被 SASS 识别，并且 SASS 抛出错误。所以我认为更好的解决方案是创建 _hack.sass 文件并添加不会由 SASS 编译的 css hack。我会在需要时包含此文件。

@import "黑客";

我正在添加这个答案，因为我觉得它对那些正在努力获得 mozilla/safari hack 作品的人很有用。

# multithreading - Java 7 G1GC 奇怪的行为

> ID：15967177
> 
> 赞同：3
> 
> 时间：2013-04-12T09:03:33.270
> 
> 标签：multithreading, garbage-collection, java-7, heap-memory, g1gc

最近，我尝试在我的 java 处理器中使用 jdk1.7.0-17 中的 G1GC，该处理器正在处理从 MQ 接收到的许多类似消息（大约 15-20 req/sec）。每条消息都在由 Java 有限线程池服务的单独线程（大约 100 个处于稳定状态的线程）中处理。令人惊讶的是，我检测到了奇怪的行为 - 一旦 GC 开始完整的 gc 循环，它就开始使用大量的处理时间（高达 100% 的 CPU 甚至更多）。我多次重构代码，目标是优化它并使其更轻量级。但没有任何显着的结果 - 行为是相同的。我使用带有 Debian OS（2.6.32-5 内核）的 4 核 64 位机器。有人可以帮助我了解和解决这种情况吗？下面描述了上述问题的一些插图。 ![在此处输入图像描述](https://i.stack.imgur.com/PGRm9.png) ![在此处输入图像描述](https://i.stack.imgur.com/6JvVE.png) ![在此处输入图像描述](https://i.stack.imgur.com/2JiSP.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-11T21:02:22.977

> 令人惊讶的是，我检测到了奇怪的行为 - 一旦 GC 开始完整的 gc 循环......

不幸的是，这并不奇怪，因为在 JVM 中实现的 G1 GC 仅使用一个硬件线程 (vCPU) 来执行 Full GC，因此我们的想法是尽量减少 Full GC 的数量。请记住，建议将此收集器用于具有多个内核的配置（当然它不会影响 Full GC，但会影响分配和并行收集）和我认为大于 8GB 的​​大堆。

根据甲骨文：

[https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/g1_gc.html](https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/g1_gc.html)

> Garbage-First (G1) 垃圾收集器是一种服务器式垃圾收集器，针对**具有大内存的多处理器机器**。它试图在实现高吞吐量的同时以高概率满足垃圾收集 (GC) 暂停时间目标。全堆操作，例如全局标记，与应用程序线程同时执行。这可以防止与堆或实时数据大小成比例的中断。

在这篇文章中，有一个关于这个收集器中的 Full GC 单线程的解释。

[https://www.redhat.com/en/blog/part-1-introduction-g1-garbage-collector](https://www.redhat.com/en/blog/part-1-introduction-g1-garbage-collector)

> 最后不幸的是，G1 还必须处理可怕的 Full GC。虽然 G1 最终试图避免 Full GC，但它们仍然是一个严酷的现实，尤其是在调整不当的环境中。**鉴于 G1 的目标是更大的堆大小，Full GC 的影响可能对进行中的处理和 SLA 造成灾难性影响。主要原因之一是 Full GC 在 G1 中仍然是单线程操作**。从原因来看，第一个也是最可以避免的，与元空间有关。

顺便说一句，似乎最新版本的 Java (10) 将包含一个能够并行执行 Full GC 的 G1。

[https://www.opsian.com/blog/java-10-with-g1/](https://www.opsian.com/blog/java-10-with-g1/)

> Java 10 通过迭代改进其现有算法来减少 Full GC 暂停时间。直到 Java 10 G1 Full GCs 在单线程中运行。没错-您的 32 核服务器和 128GB 将停止并暂停，直到单个线程取出垃圾。

也许，您应该调整元空间或增加堆，或者您可以使用其他收集器，例如并行 GC。

# java - LocationService 还是 LocationThread？

> ID：15967180
> 
> 赞同：1
> 
> 时间：2013-04-12T09:03:51.760
> 
> 标签：java, android, gps, location

我正在编写一个应用程序，它必须每秒记录来自设备（通过蓝牙）和位置的数据。

目前，数据记录适用于：一项活动，显示数据，一项远程服务，处理蓝牙连接和文本文件中的记录。请求和接收数据的 1 秒循环在一个 Thread 中，从远程服务开始。

现在我必须从我的 loopThread 发出请求以获取当前位置。

我的问题是：我应该用什么来更新位置？我的第一个远程服务中的另一个远程服务或另一个线程？

支持和反对每一项的论据是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:12:19.883

您也可以使用相同的线程或服务，也可以使用不同的服务和线程，但请始终记住，从提供者接收位置数据是异步的，因此我建议使用相同的线程或服务，因为再创建一项服务会消耗更多内存，并且当您正在为移动设备开发您应该始终尝试使用更少的内存

# ruby-on-rails - nil:NilClass 的未定义方法 `longitude='

> ID：15967182
> 
> 赞同：0
> 
> 时间：2013-04-12T09:03:55.727
> 
> 标签：ruby-on-rails, ruby

我是RoR的新手。我在 Ruby 1.9.3、Rails 3.2 中编程在我的模型中：

```
class SharedInfo < ActiveRecord::Base
  attr_accessible :shared_info_type_id, :severity_id, :source_info_id, :created_date
end 
```

在我的控制器中：

```
@sharedinfo = SharedInfo.new(params[:shareinfo])
@sharedInfo.longitude = params[:longitude][:value]
@sharedInfo.latitude = params[:latitude][:value]
@sharedInfo.save 
```

当它执行它时。浏览器导致错误：“undefined method `longitude=' for nil:NilClass” 有人帮我解决这个问题吗？非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T09:05:57.173

你这里有一个错字。Ruby 区分大小写。您初始化`@sharedinfo`但稍后使用`@sharedInfo`.

也可以通过在第一行使用大写来修复它`I`：

```
@sharedInfo = SharedInfo.new(params[:shareinfo]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T22:37:52.253

我认为，您应该在参数哈希中使用“_”。

```
@shared_info = SharedInfo.new params[:shared_info] 
```

# c# - OleDbConnection 类

> ID：15967186
> 
> 赞同：0
> 
> 时间：2013-04-12T09:04:06.653
> 
> 标签：c#, asp.net, oledbconnection

我创建了一个使用方法执行 OleDbConnection 并返回此连接的类：

```
public class ConnectDB
    {
        public static OleDbConnection getConStr() {

            return OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + Microsoft.SqlServer.Server.MapPath("Users.accdb") + ";Persist Security Info=False");       
        }
    } 
```

但我在 Server.MapPath ErrorMessage 中遇到错误：当前上下文中不存在名称“服务器”。我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:13:41.037

仅`Server.MapPath`按以下方式使用：

```
public class ConnectDB
    {
        public static OleDbConnection getConStr() {

            return OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source="  +   Server.MapPath("Users.accdb") + ";Persist Security Info=False");       
        }
    } 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:28:30.223

您可能在`class library`.

`Server`是一个 ASP.NET 对象，您只能在 aspx 页面或 Control 派生类中访问它。

尝试这个：

```
 public class ConnectDB
 {
    public static OleDbConnection getConStr() {

        return OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source="  +   HttpContext.Current.Server.MapPath("Users.accdb") + ";Persist Security Info=False");       
    }
} 
```

# sql - 虽然 SQL 结构更好？

> ID：15967187
> 
> 赞同：0
> 
> 时间：2013-04-12T09:04:06.993
> 
> 标签：sql

我有 2 个创建 SQL 结构的选项

例如，我需要列**Code**、**Name**和**Religion**：

**选项1 ：**

```
+=======+========+=============+
+ Code  + Name   + Religion_id +
+=======+========+=============+
+ 1     + A      +  1          +
+ 2     + B      +  2          +
+ 3     + c      +  2          +
+=======+========+=============+

+=============+===============+
+ Religion_id + religion_name +
+=============+===============+
+  1          + Caaaaaa       +
+  2          + Daaaaaa       +
+=============+===============+ 
```

**选项 2：**

```
+=======+========+
+ Code  + Name   +
+=======+========+   For Master File
+ 1     + A      +
+ 2     + B      +
+ 2     + C      + 
+=======+========+

+=============+===============+
+ Religion_id + religion_name +
+=============+===============+    For Master File
+  1          + Caaaaaa       +
+  2          + Daaaaaa       +
+=============+===============+

+=======+=============+
+ Code  + Religion_id +
+=======+=============+    For Transaction File
+ 1     +  1          +
+ 2     +  2          +
+ 3     +  2          +
+=======+=============+ 
```

我已经做了大约 1 年的数据库。

但是在大学学习之后，我了解到主文件中不能有重复的数据。

在**选项 1**中有一个重复的值，例如 2 个人具有相同的宗教。所以他们创建了类似于**Option 2**的结构。

但是 IMO**选项 2会比****选项 1**占用大量内存空间，包含一千条记录。

**我的问题是：哪一个是创建 SQL 结构的最佳实践？**

**编辑：1个名字只能有1个宗教**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:08:11.727

这取决于两个表之间的关系。

选项 1 是一个`One-to-many`关系，其中`Religion`可以包含许多`Names`. 但是，如果关系是`Many-to-Many`，其中某个`Name`可以有多个`Religions`，并且该宗教可以有多个`Name`，请选择选项 2，因为它使用关联表。

# powershell - 如何在powershell中将日期时间转换为字符串或双精度

> ID：15967188
> 
> 赞同：1
> 
> 时间：2013-04-12T09:04:08.937
> 
> 标签：powershell

我想得到一个提示，如何将 datetime -uFormat %T（例如 08:45:00）转换为 double 或像 8,75 hours 这样的字符串。

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:16:44.040

```
$date = Get-Date
'{0:HH},{1:N0} hours' -f $date,($date.Minute/60*100) 
```

# amazon-web-services - 我能否确定弹性负载均衡器当前使用的是哪个实例？

> ID：15967189
> 
> 赞同：2
> 
> 时间：2013-04-12T09:04:09.800
> 
> 标签：amazon-web-services, amazon-ec2, load-balancing, amazon-elb

我创建了两个 Amazon EC2 实例。之后，我创建了一个弹性负载均衡器并在其中注册了两个实例。
现在我想知道的是，当我们使用负载均衡器的 DNS 名称时，负载均衡器将使用哪个实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T17:28:16.470

[负载平衡](http://en.wikipedia.org/wiki/Load_balancing_%28computing%29)的想法是*在多台计算机或计算机集群、网络链接、中央处理器、磁盘驱动器或其他资源之间分配工作负载 [...]*。

虽然有许多可以想象的算法，但总体目标是*实现最佳资源利用率、最大化吞吐量、最小化响应时间和避免过载*，这通常意味着负载平衡资源之间的负载透明分布。因此，您通常不会知道（也不应该知道）哪个负载平衡资源服务于特定请求。

因此，[Elastic Load Balancing (ELB) 会](http://aws.amazon.com/elasticloadbalancing/) *自动将传入的应用程序流量分布在多个 Amazon EC2 实例之间*。

具体如何做到这一点是一个相当复杂的话题，主要是由于 ELB 路由文档不存在，因此需要组装一些部分来得出结论 - 请参阅我对相关问题[Can Elastic Load Balancers 正确分布的回答流量到不同大小的实例](https://serverfault.com/a/386527/10305)进行详细分析，包括我知道的所有参考。

对于手头的问题，我认为这归结为 AWS 团队从 2009 年对[ELB 策略](https://forums.aws.amazon.com/message.jspa?messageID=129199#129199)的反应有些模糊：

> **ELB 松散地跟踪每个实例有多少未完成的请求（或 TCP 的连接）。** 它不会监控每个实例的资源使用情况（例如 CPU 或内存）。ELB 目前将在它认为具有最少未完成请求的实例中进行循环。*[强调我的]*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T20:55:56.207

当然，您可以确定您的请求发送到哪个服务器！

在每台服务器上，您将需要类似于 health_check.html 文件的文件（可以命名任何东西，有人建议使用 index.htm，但这是一个坏主意，完全是另一个讨论），以便负载均衡器可以调用它并确定多长时间它需要得到回应。

在服务器 #1 上，将以下内容放入 health_check.html 文件中：`<HTML><BODY>1</BODY></HTML>`

在服务器 #2 上将其放入 health_check.html 文件中：`<HTML><BODY>2</BODY></HTML>`

现在，当您导航到 www.YourDomain.com/health_check.html 时，您将确切知道您在哪个服务器上。

清除您的 cookie 并重新导航到相同的 URL 以查看您下一个获得的服务器。祝云开发者好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T10:40:11.243

stf ，您无法知道，通过 EBS 分配哪些服务器负载，EBS 内部负责请求分配。

# jakarta-ee - 如何将参数从html页面发布到servlet

> ID：15967190
> 
> 赞同：-1
> 
> 时间：2013-04-12T09:04:10.197
> 
> 标签：jakarta-ee

这是我的 Dem.html 页面在我单击“okeeee”按钮时无法正确执行，未生成事件

```
<form action="http://localhost:7000//DemoS/MyServlet" method="post">
</form>
<input type="text" name="e">
<input type="text" name="p">
<input type="submit" value="Okeeeeeeee"> 
```

post servlet 方法：

```
public void doPost(HttpServletRequest request, HttpServletResponse response)throws ServletException, IOException {
  response.setContentType("text/html");
  PrintWriter out = response.getWriter();
  String e=request.getParameter("e");
  String p=request.getParameter("p");out.println("  <HEAD><TITLE>A Servlet</TITLE></HEAD>");
  out.println("  <BODY>");
  out.println(", using the POST method abhinav   hiii"+e+""+p);
  out.println("  </BODY>");out.println("</HTML>");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:06:29.550

您的输入必须包含在表单标签之间：

```
 <form action="http://localhost:7000//DemoS/MyServlet" method="post">
      <input type="text" name="e">
      <input type="text" name="p">
      <input type="submit" value="Okeeeeeeee">
   </form> 
```

# cookies - Rails：如何动态存储值或作为 cookie

> ID：15967195
> 
> 赞同：1
> 
> 时间：2013-04-12T09:04:19.573
> 
> 标签：cookies, ruby-on-rails-3.2

可能这个问题听起来很奇怪。但是因为我第一次这样做，不知道它到底叫什么。

我在 www.mealnut.com 的主页上使用了一种预先输入的搜索方法（请查看现场演示）。有两个条目，城市和类别。City 在 typeahead 数组中显示数据，并在提交时给出搜索结果。这是一个代码：

```
 <%= form_tag search_path, :method => 'get' do %> 
    <%= text_field_tag 'search', nil, :placeholder =>"Enter your city ", :autocomplete => :off, :'data-provide' => "typeahead", :id=>"citysearch" %>
            <%= select_tag :category, options_from_collection_for_select(@categories, "id", "category", params[:category]), html_options = { :prompt => 'Select a category'} %>
    <%= submit_tag "Search"%>
<% end %> 
```

这是预输入脚本：

```
$(document).ready(function(){
var cities = ["Bengaluru", "Pune", "New Delhi", "Delhi", "Mumbai"
$("input[data-provide='typeahead']").typeahead({source: cities});
}); 
```

这里有一个问题：当用户点击后退按钮返回主页时，城市被清除，类别保持选中状态。在这里用户应该看到城市，他上次输入而不是空白字段。

我认为这是因为 typeahead 只是给出数组并且不会在任何地方存储值。我不想为数组创建单独的表。

我发现 cookie 可能是选项。但不知道如何使用它，因为从未尝试过 cookie。此外，这个 cookie 或其他任何东西的最佳解决方案是什么？有人做过吗？

请帮忙！

**更新：**

我在控制器中为一个城市使用了 cookie。我的家庭控制器的索引操作是：

```
def index
 @categories = Category.all
 cookies[:search] = "Mumbai"
end 
```

并将用于搜索的索引页面表单修改为：

```
 <%= text_field_tag 'search', nil, :placeholder =>"#{cookies[:search]} ", :autocomplete => :off, :'data-provide' => "typeahead", :id=>"citysearch" %> 
```

这显示了单击后退按钮时的孟买市。但我不希望城市被修复。它应该是用户输入的值。谁能告诉怎么做？

# intuit-partner-platform - 更新现有项目时同步错误（设置 QB 结束日期时）

> ID：15967197
> 
> 赞同：0
> 
> 时间：2013-04-12T09:04:21.120
> 
> 标签：intuit-partner-platform

我们在项目更新时遇到同步错误（仅当我们为 QuickBooks 公司文件设置了截止日期时），否则项目更新成功。

同步错误：-“尝试修改 ItemInventory 列表的发布帐户。此修改将影响公司的现有交易。如果您确定确实要这样做，请询问具有管理员权限的用户删除截止日期的密码（此设置在会计公司首选项中），然后重试。”

```
'Searching existing Item
Dim qbItemSearch As New Intuit.Ipp.Data.Qbd.Item()
qbItemSearch.Id = New Intuit.Ipp.Data.Qbd.IdType() With { .idDomain = idDomainEnum.NG, .Value = "123456" }

Dim qbItem As Intuit.Ipp.Data.Qbd.Item = Nothing
qbItem = DataServices.FindById(Of Intuit.Ipp.Data.Qbd.Item)(qbItemSearch)

'Updating some properties of the Item
qbItem.Name = "new name"
qbItem.Desc = "new desc"
qbItem.PurchaseCost = newPurchase...
qbItem.UnitPrice = newUnitPrice...

Dim itemResponse = DataServices.Update(qbUpdateItem) 
```

如果我们从 QuickBooks 中删除公司截止日期，它会正常工作。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:39:15.940

这是正常的 QuickBooks 功能。一旦该年度的账簿关闭，您就不会更改财务状况。完成后，您将重新打开并继续照常营业。

# xml - 对齐xml文件中的文本区域

> ID：15967199
> 
> 赞同：0
> 
> 时间：2013-04-12T09:04:34.493
> 
> 标签：xml, flash, actionscript-2

我正在尝试对齐我的 .swf 闪存中的文本区域。直接从 xml 我提到我有 actionscript 2.0

我的代码是这样的：

```
<?xml version="1.0" encoding="iso-8859-1"?><content>
<!-- general vars -->
<section name="settings">
    <item name="textSelectable">true</item>
    <item name="copyright"><![CDATA[SICURO © 2013 | <font color="#ffffff"><a href="asfunction:_root.more_click_func, privacyPolicy"> PRIVACY POLICY</a></font> 
    ]]></item>
    <item name="companyName"><![CDATA[SICURO<font color="#ff0000">INVEST</font>
    ]]></item>
    <item name="slogan"><![CDATA[Youre SECURITY]]></item>
    <image imageUrl="_logo.png"/>
</section></content> 
```

如何编辑`companyName`以直接从 xml 文件对齐中心？

知道如何编辑吗？在我的 Flash 文档中看起来真的很难看。我在 Flash CS5 中看到了动作。

```
function getCompanyName(textObj){
textObj.htmlText = getSettingsValue(mainObj, "companyName", "item");
textSelectable(textObj);} // End of the functionfunction getSlogan(textObj){
textObj.htmlText = getSettingsValue(mainObj, "slogan", "item");
textSelectable(textObj);} // End of the function 
```

这是我应该编辑什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:47:11.127

就像有人说的那样，在actionscript的TextField中设置alignemnt，而不是在xml中编辑html。你会用`textObj.autoSize = "center";`

如果你真的必须在 xml 中做，你可以`<center>`在文本周围使用标签

# oracle - ORA-12704: 字符集不匹配

> ID：15967201
> 
> 赞同：18
> 
> 时间：2013-04-12T09:04:39.280
> 
> 标签：oracle, oracle11g, coalesce

地狱当我这样做：

```
select COALESCE (CORP_ID, 0) from crmuser.accounts; 
```

为 Null 的 CORP_ID 记录返回 0 但当我这样做时：

```
select COALESCE (EMAIL, 'NO EMAIL') from crmuser.accounts 
```

我收到一个错误：

```
ORA-12704: character set mismatch 
```

NVARCHAR2(30) 中的 EMAIL 字段。是我的数据类型，如果是，我应该怎么做才能返回默认值？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-12T09:31:45.227

你应该做

```
select COALESCE (EMAIL, n'NO EMAIL') from crmuser.accounts 
```

将文字转换为 NVARCHAR。

例如 [http://sqlfiddle.com/#!4/73929/1](http://sqlfiddle.com/#!4/73929/1) 与 [http://sqlfiddle.com/#!4/73929/2](http://sqlfiddle.com/#!4/73929/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-07T01:06:36.730

此通用修复适用于定义为 VARCHAR2 或 NVARCHAR2 的列：

```
select COALESCE (EMAIL, N'' || 'NO EMAIL') from crmuser.accounts 
```

只需添加 N'' || 在您的非 Unicode 字符串常量之前。

# c# - 以编程方式将焦点设置为 Windows Phone 中的文本框

> ID：15967208
> 
> 赞同：4
> 
> 时间：2013-04-12T09:04:53.707
> 
> 标签：c#, windows-phone-7, xaml, windows-phone-8

在 Windows Phone 应用程序中，我有一个`TextBox`和一个`Button`. 用户将一些文本写入 TextBox 并点击 Button，TextBox 中的文本将添加到列表中。点击 Button 后，TextBox 失去焦点。

我想要做的是在点击按钮后将焦点设置回文本框，以便用户可以继续编写另一个文本而无需点击文本框。

我尝试`Focus()`在 Button 处理程序中调用 TextBox 的方法，但这不起作用。如果有的话，还有其他方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T09:43:27.390

单击按钮时尝试添加`bollean flag = true`. 然后在 event 上检查这个标志`OnTextBoxLostFocus`。

```
<TextBox x:Name="tb" Grid.Row="1" LostFocus="Tb_OnLostFocus"/>
<Button x:Name="btn" Click="Btn_OnClick" />

 public partial class MainPage : PhoneApplicationPage
{
    private bool flag;
    public MainPage()
    {
        InitializeComponent();
    }

    private void Btn_OnClick(object sender, RoutedEventArgs e)
    {
        flag = true;
        tb.Focus();
    }

    private void Tb_OnLostFocus(object sender, RoutedEventArgs e)
    {
        if (!flag) return;
        tb.Focus();
        flag = false;
    }
} 
```

希望它的帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-14T18:43:00.537

我尝试了很多解决方案，但这是唯一适合我的解决方案（Windows Phone 8.1 应用程序）。首先捕获您的 TextBox 的`Loaded`事件，然后调用`Focus(FocusState.Keyboard)`.

```
private void myTextBox_Loaded(object sender, RoutedEventArgs e)
{
    myTextBox.Focus(FocusState.Keyboard);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-30T10:25:40.797

即使我尝试了很多上述解决方案，但没有一个对我有用，因为我试图专注于页面加载。最后我得到了这个解决方案并且它有效。

```
private void txtBox_LayoutUpdated(object sender, EventArgs e)
        {
            txtBox.Focus();
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T09:15:47.153

如果你打电话会发生什么：

```
yourTextBox.Select(0,0) 
```

[http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.select.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.select.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-18T09:28:59.103

您可以通过以编程方式赋予它焦点来完成此操作。这可以通过调用其 Focusmethod 来完成，尽管此调用在某些条件下可能会失败（并返回 false）。例如，您不能将焦点设置在页面构造函数中的控件上；太早了。但是，您可以从页面的 Loadedevent 调用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-11T22:30:49.420

在手机上最适合我的方式是，如果我想在页面加载时专注于特定的文本框：

```
private void OnPageLoaded(object sender, RoutedEventArgs e)
{
    Dispatcher dispatcher = Deployment.Current.Dispatcher;
    dispatcher.BeginInvoke(() => EnterLocationTextBox.Focus());
} 
```

或者如果我只是在某个时候想要它。只需重复这两行：

```
Dispatcher dispatcher = Deployment.Current.Dispatcher;
dispatcher.BeginInvoke(() => EnterLocationTextBox.Focus()); 
```

# sql-server - 如何在 SQL Server 中拆分被许多对象引用的大表？

> ID：15967211
> 
> 赞同：0
> 
> 时间：2013-04-12T09:05:03.370
> 
> 标签：sql-server, sql-server-2008

我们有一个相当大的表，在 20 多列中包含大约 6500 万条记录，我们希望将该表拆分为两个更易于管理的表。这里的主要挑战是引用此表的许多对象（视图、存储过程、函数和应用程序代码），我不想错过任何东西。

以下是我计划如何执行此操作 - 任何人都可以确认这是否可以或建议任何改进。

1.  识别所有引用的对象
2.  创建新表
3.  复制数据
4.  添加将连接两个表的外键
5.  一次查看和更新​​所有对象
6.  将所有内容部署到生产环境
7.  从旧表中删除不需要的列

我在这里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:10:17.607

对我来说看起来不错，但这是我看到的一些挑战。

**部署**– 您需要足够快地完成此操作，以免在生产中引起任何问题 – 如果您可以在处理此问题时暂停生产系统，那就太好了。否则，请确保您在生产中多次执行此操作

**识别所有引用的对象**——确保你不会错过任何一个。我建议使用免费的第三方工具（例如[ApexSQL Search](http://www.apexsql.com/sql_tools_search.aspx)）来查找数据库对象，但您还需要查看您的应用程序代码。

**执行顺序**——如果需要更新的对象太多，请确保以正确的顺序准备脚本

我不会立即删除不需要的列——让它们在那里停留一段时间，但要确保你定期检查数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:50:14.343

听起来您可能正计划垂直分区（拆分列）。如果您的 65M 记录代表大量历史数据，那么您可能希望根据日期水平分区并创建一个视图以将它们组合在一起。这样，许多外部引用对象将看不到差异。我在这里对数据使用做了一些假设。

视图也可能对垂直拆分有用。

# sql - TFS 2012 Express 的系统要求

> ID：15967215
> 
> 赞同：-3
> 
> 时间：2013-04-12T09:05:12.043
> 
> 标签：sql, sql-server, sql-server-2008

我只是想知道

**TFS 2012 EXPRESS**是否与**SQL SERVER 2008 ENTERPRISE**版本兼容，**操作系统**是 window **SERVER 2012**

那么可能的安装过程是什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:12:30.800

来自[MSDN](http://msdn.microsoft.com/en-us/library/vstudio/dd631889.aspx)：

支持 SQL 2008 Enterprise，但它必须是带有 Service Pack 1 的 SQL 2008 R2。

TFS 需要 Windows Server 2008（SP2 或 R2 SP1）并且需要在服务器端使用 64 位操作系统，但 32 位客户端可以访问它。

设置很容易解释，我在获得正确的权限时遇到了[问题，如果您可以选择让 TFS 设置数据库和 TFS 实现一起选择，那就更简单了。](https://serverfault.com/questions/432496/cannot-create-a-project-tfs-2012-tf218027)不过，它可以使用现有的数据库来完成。

# c# - 插入到表变量上不允许的标识列

> ID：15967218
> 
> 赞同：10
> 
> 时间：2013-04-12T09:05:28.317
> 
> 标签：c#, sql-server-2008

我正在从大型 Excel 工作表中导入数据并将其存储在 stateTable 中。现在我必须将这些数据推送到数据库表中。该表确实有一个标识列 (1,1)。

我在 DB 中创建了一个类似的表类型和一个将参数作为表类型插入特定表的过程。我还设置了身份插入。

我的代码是：

```
using (SqlCommand command = new SqlCommand("InsertStateTable") {
    CommandType = CommandType.StoredProcedure})
{
    SqlParameter param = command.Parameters.AddWithValue("@statetable", dt);
    param.TypeName = "StateTable";
    param.SqlDbType = SqlDbType.Structured;
    command.Connection = con;
    con.Open();
    command.ExecuteNonQuery();
    con.Close();
} 
```

但出现的错误是 **“插入到表变量上不允许的标识列”。** 我浏览了很多网站，但没有给出具体原因......

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:12:49.323

错误很明显：你不能做你想做的事。基本上，您将不得不找到一个不依赖于将标识值插入表变量/表值参数的设计。我的建议是创建一个单独的表变量（与表值参数无关），它具有相同的*数据*，但没有`IDENTITY`列，所以......

```
declare @foo table (id int not null, name nvarchar(200) not null /* etc */)
insert @foo (id, name /* etc */)
select id, name /* etc */ from @statetable 
```

此时`@foo`具有原始数据，但没有标识列 - 然后您可以使用`@foo`.

如果没有看到您对身份插入所做的事情，很难进一步评论。

# ruby-on-rails - rails twilio api 版本号

> ID：15967219
> 
> 赞同：7
> 
> 时间：2013-04-12T09:05:35.133
> 
> 标签：ruby-on-rails, ruby, twilio

我使用 twilio gem，但我不知道如何释放电话号码。我尝试：

```
@client.account.incoming_phone_numbers.delete(:phone_number => phone_number) 
```

但是铁轨说：

```
undefined method `delete' for #<Twilio::REST::IncomingPhoneNumbers:0x7f35c99e93e0> 
```

如何更正发行号？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T09:44:02.120

我找到了解决方案：

```
@client.account.incoming_phone_numbers.list({:phone_number => phone_number}).each do |n|
  num = @client.account.incoming_phone_numbers.get(n.sid)
  num.delete
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-21T10:23:01.050

使用 5.x gem 版本和新的 Twilio API，您有两个选择：

**如果您知道号码 SID**

```
client = Twilio::REST::Client.new(TWILIO_SID, TWILIO_TOKEN)
number = client.api.account.incoming_phone_numbers(PHONE_SID).fetch
number.delete 
```

**如果你只知道电话号码**

```
client = Twilio::REST::Client.new(TWILIO_SID, TWILIO_TOKEN)
client.incoming_phone_numbers.list(phone_number: PHONE_NUMBER).each do |number|
  number.delete
end 
```

希望这有助于新读者使用最新的 gem 版本。

# time - 同时运行线程组，但随着时间的推移均匀分布

> ID：15967221
> 
> 赞同：1
> 
> 时间：2013-04-12T09:05:39.860
> 
> 标签：time, concurrency, jmeter, distribution

我有`Test plan`几个`Thread Groups (TG)`有不同的`Loop Count`。

```
Test Plan
|--TG 1: loop count=5
|--TG 2: loop count=10
|--TG 3: loop count=3 
```

这些线程组是同时执行的。然而，由于线程的循环计数不同，一些线程已完成，而其他线程仍在运行。我想要的是根据最高的比率来`JMeter`管理每个的执行，以创建更均匀的时间分布并确保所有大致同时结束。例如：`Thread Group``Loop Count``Test plan``Thread Groups`

```
Test Plan
|--TG 1: loop count=5, execute every 2 occurrences of TG 2
|--TG 2: loop count=10
|--TG 3: loop count=3, execute every 3.3 occurrences of TG 2 
```

在执行方面，事情看起来像这样：

```
[round 1] TG1: run  | TG2: run  | TG3: run
[round 2] TG1: wait | TG2: run  | TG3: wait
[round 3] TG1: run  | TG2: run  | TG3: wait
[round 4] TG1: wait | TG2: run  | TG3: run
etc... 
```

**我可以配置 JMeter 来实现这一点，如果可以的话怎么做？**

# java - 确定我的应用正在使用多少内存

> ID：15967225
> 
> 赞同：1
> 
> 时间：2013-04-12T09:05:47.313
> 
> 标签：java, memory, ram

我写了一个java程序，我想看看它什么时候运行它使用了多少内存。有什么方法可以查看与我的程序相关的 RAM 使用量吗？我的意思是可以通过在调用主代码之前和之后编写此代码来查看程序的时间使用情况：

```
long startTime = System.currentTimeMillis();
new Main();
long endTime = System.currentTimeMillis();
System.out.println("Total Time: " + (endTime - startTime)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:37:23.850

您可以使用以下类。实现 Instantiator 接口，您可以多次执行相同的进程来获得内存消耗的精确视图

```
public class SizeOfUtil {

    private static final Runtime runtime = Runtime.getRuntime();
    private static final int OBJECT_COUNT = 100000;

    /**
     * Return the size of an object instantiated using the instantiator
     * 
     * @param instantiator
     * @return byte size of the instantiate object
     */      
    static public int execute(Instantiator instantiator) {
        runGarbageCollection();
        usedMemory();
        Object[] objects = new Object[OBJECT_COUNT + 1];
        long heapSize = 0;
        for (int i = 0; i < OBJECT_COUNT + 1; ++i) {
            Object object = instantiator.execute();
            if (i > 0)
                objects[i] = object;
            else {
                object = null;
                runGarbageCollection();
                heapSize = usedMemory();
            }
        }
        runGarbageCollection();
        long heap2 = usedMemory(); // Take an after heap snapshot:
        final int size = Math.round(((float) (heap2 - heapSize)) / OBJECT_COUNT);

        for (int i = 1; i < OBJECT_COUNT + 1; ++i)
            objects[i] = null;
        objects = null;
        return size;
    }

    private static void runGarbageCollection() {
        for (int r = 0; r < 4; ++r){
            long usedMem1 = usedMemory();
            long usedMem2 = Long.MAX_VALUE;
            for (int i = 0; (usedMem1 < usedMem2) && (i < 500); ++i) {
                runtime.runFinalization();
                runtime.gc();
                Thread.yield();
                usedMem2 = usedMem1;
                usedMem1 = usedMemory();
            }
        }
    }

    private static long usedMemory() {
        return runtime.totalMemory() - runtime.freeMemory();
    }
} 
```

实现接口

> 公共接口实例化器{对象执行（）；}

使用您要测试的代码

```
public void sizeOfInteger(){
    int size = SizeOfUtil.execute(new Instantiator(){
        @Override public Object execute() {
            return new Integer (3);
        }
    });
    System.out.println(Integer.class.getSimpleName() + " size = " + size + " bytes");
} 
```

来源：[Java 教程 Java 对象的大小](http://www.java-tutorial.ch/core-java-tutorial/java-size-of-objects)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:09:08.950

我认为这一定有帮助： [visualvm](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/intro.html)

它带有 jdk，并且有许多有助于控制内存使用的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:09:18.720

通过比较加载程序前后 JVM 的可用内存，您可以获得非常接近的值。差异非常接近程序的内存使用量。获取 JVM 可用内存使用

```
Runtime.getRuntime().freeMemory() 
```

要获取内存使用情况，请执行以下操作：

```
public static void main (String args[]){
  long initial = Runtime.getRuntime().freeMemory(); //this must be the first line of code executed
  //run your program ... load gui etc
  long memoryUsage = Runtime.getRuntime().freeMemory() -  initial ;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T09:10:18.647

从[java-application-memory-usage 使用](https://stackoverflow.com/questions/3145989/java-application-memory-usage)
选项 启动您的应用程序，`-Dcom.sun.management.jmxremote`例如

```
java -Dcom.sun.management.jmxremote -jar myapp.jar 
```

或者您可以尝试：

> jvisualvm.exe 你可以在 jdk/bin 目录下找到它。

看看以下可能会有所帮助：

1.  [如何在我的 jvm 或 Eclipse 中监控多少线程和内存使用情况](https://stackoverflow.com/questions/9731849/how-can-i-monitor-how-many-threads-and-memory-usage-in-my-jvm-or-eclipse)
2.  [Java进程的内存使用情况](http://www.ibm.com/developerworks/library/j-codetoheap/)

# r - 跳过 R 中 read.csv 中的一些行

> ID：15967226
> 
> 赞同：14
> 
> 时间：2013-04-12T09:05:53.467
> 
> 标签：r, csv, readfile

我有一个使用以下函数读取的 csv 文件：

```
csvData <- read.csv(file="pf.csv", colClasses=c(NA, NA,"NULL",NA,"NULL",NA,"NULL","NULL","NULL"))
dimnames(csvData)[[2]]<- c("portfolio", "date", "ticker", "quantity") 
```

它从该文件中读取所有行。但我想从阅读中跳过一些行。`ticker`如果-column 的值为:`ABT`或，则不应读取该行`ADCT`。可能吗？

我的 csv 文件示例如下：

```
RUS1000,01/29/1999,21st Centy Ins Group,TW.Z,90130N10,72096,1527.534,0.01,21.188
RUS1000,01/29/1999,3com Corp,COMS,88553510,358764,16861.908,0.16,47.000
RUS1000,01/29/1999,3m Co,MMM,88579Y10,401346,31154.482,0.29,77.625
RUS1000,01/29/1999,A D C Telecommunicat,ADCT,00088630,135114,5379.226,0.05,39.813
RUS1000,01/29/1999,Abbott Labs,ABT,00282410,1517621,70474.523,0.66,46.438
RUS1000,02/26/1999,21st Centy Ins Group,TW.Z,90130N10,72096,1378.836,0.01,19.125
RUS1000,02/26/1999,3com Corp,COMS,88553510,358764,11278.644,0.11,31.438
RUS1000,02/26/1999,3m Co,MMM,88579Y10,402146,29783.938,0.29,74.063 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-12T09:15:04.877

可以使用[sqldf 包](http://cran.r-project.org/web/packages/sqldf/index.html)，使用`read.csv.sql`

让我们说`sample.csv`看起来像这样的内容：

```
id,name,age
1,"a",23
2,"b",24
3,"c",23 
```

现在只读取 age=23 的行：

```
require(sqldf)

df <- read.csv.sql("sample.csv", "select * from file where age=23")

df
  id name age
1  1  "a"  23
2  3  "c"  23 
```

可以选择必要的列：

```
df <- read.csv.sql("sample.csv", "select id, name from file where age=23")
df
  id name
1  1  "a"
2  3  "c" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T09:13:04.293

最好像评论中建议的那样稍后阅读所有内容和子集：

```
csvData [!csvData$ticker %in% c('ADCT','ABT'),] 
```

**编辑**

您可以使用`fread`from `data.table`package 更有效的方法来读取您的文件。

```
library(read.table)
fread(file="pf.csv") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-06T04:43:54.947

对我来说，sqldf 包的 read.csv.sql 乍一看很棒。但是当我尝试使用它时，它无法处理“NULL”字符串。（其他人也发现了这一点。）不幸的是，它不支持所有 read.csv 功能。所以我不得不自己写。我很惊讶没有一个好的包。

```
fetchLines=function(inputFile,match,fixed=T,n=100,maxlines=100000){ #inputFile='simple.csv'; match='APPLE';
  message('reading:',inputFile)
  n=min(n,maxlines)
  con  <- base::file(inputFile, open = "r",encoding = "UTF-8-BOM")
  data=c(readLines(con, n = 1, warn = FALSE))
  while (length(oneLine <- readLines(con, n = n, warn = FALSE)) > 0) {
    grab=grep(match,oneLine,value=T,fixed=fixed)
    if(length(grab)>0){
      data=c(data,grab)
      if(length(data)>maxlines){
        warning("bailing out too many");
        return(data);
      }
      cat('.')
    }
  } 
  close(con)
  gc()
  cat("\n")
  data;
}

#To avoid: argument 'object' must deparse to a single character string
fdata=textConnection( fetchLines("datafile.csv",'\\bP58\\b',fixed=F,maxlines = 100000))
df<-read.csv(fdata,header=T,sep=",",na.strings = c('NULL',''),fileEncoding = "UTF-8-BOM",stringsAsFactors = F) 
```

[R textConnection：“参数'对象'必须解析为单个字符串”](https://stackoverflow.com/questions/21170633/r-textconnection-argument-object-must-deparse-to-a-single-character-string)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-20T01:23:57.830

您现在可以在`readr`包中执行此操作。

```
library(tidyverse)
csvData <- read_csv(file="pf.csv") %>%
 filter(!ticker-column %in% c('ABT','ADCT') 
```

# javascript - 如何检查 HTML 元素的动画？

> ID：15967227
> 
> 赞同：7
> 
> 时间：2013-04-12T09:05:54.060
> 
> 标签：javascript, css, google-chrome-devtools

我想查看分配给特定元素的 CSS 过渡或 JavaScript/jQuery 动画。我应该如何在 Chrome DevTools 或任何其他开发人员工具中执行此操作？

例如，我访问了一个 Google plus 页面，我注意到当我将鼠标悬停在一张图片上时，它会变灰、放大并在角落出现一个*关闭按钮。*

**正常**：

![正常状态](https://i.stack.imgur.com/oJyyD.png)

**悬停**：

![悬停在状态](https://i.stack.imgur.com/W5tQK.jpg)

如何查看此行为背后的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-23T08:11:10.967

右键单击元素选项卡中的 html 元素并选择 :hover 选项。现在您可以在右侧样式选项卡中看到应用于特定元素的悬停 css。请参考屏幕截图

[![在此处输入图像描述](https://i.stack.imgur.com/Tc3F3.png)](https://i.stack.imgur.com/Tc3F3.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T09:12:33.170

对于 css 过渡，使用 chrome 开发工具时很容易发现。只需右键单击要查看的动画即可调出检查器。将元素的状态更改为悬停，您可以查看悬停元素的所有 css。

对于 javascript，您可以使用 chrome 开发工具中的“资源”选项卡来查看触发的脚本。只需通过它。

为了您的效果..它最有可能是Javascript。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T09:10:37.560

他们将注册一个悬停事件。可以通过各种方法添加悬停事件

1.  在 CSS 中

    ```
    #someId:hover
    {
     color:red;
    } 
    ```

2.  在jQuery中。`$('#someid').hover();`

3.  通过不显眼的 jquery。他们将以不显眼的方式附加事件

现在检查此方法的视图源。一些他们将附加事件的地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-23T23:12:37.883

据我所知，JavaScript 没有简单的方法，但是当我在 Chrome 中处理 css 时，以下是我最喜欢的答案和方法。你可以强制状态和检查悬停 css 等。

[https://stackoverflow.com/a/6778547/941896](https://stackoverflow.com/a/6778547/941896)

# java - bufferedReader.readLine(); 总是返回空值

> ID：15967228
> 
> 赞同：0
> 
> 时间：2013-04-12T09:05:55.853
> 
> 标签：java, linux

我定义了一个函数来返回命令过程输出，在 Windows 中它工作正常，但在 Linux 中它失败了。

从命令**ps -u root|grep java|awk '{print $1}'**它总是返回**null**

甚至在执行此方法之前，我尝试在命令提示符下执行命令，它成功了

```
#ps -u root|grep java|awk '{print $1}' 
```

385

2018

2048

4242

21290

25110

25589

26166

```
/**
 * This method will execute and returns the command output
 * @param commandToBeExecute
 * @return
 */
protected String getCMDOutput(final String commandToBeExecute)
{
    String cmdOutput = "";
    InputStream inputstream = null;
    InputStreamReader inputstreamreader = null;
    try 
    {
        final Process process = runTime.exec(commandToBeExecute);
        inputstream = process.getInputStream();
        inputstreamreader = new InputStreamReader(inputstream);
        bufferedReader = new BufferedReader(inputstreamreader);
        String currentLine;
        currentLine = bufferedReader.readLine();\\Always returning null for **ps -u root|grep java|awk '{print $1}'** command
        while(currentLine!=null)
        {
            cmdOutput += currentLine;
            currentLine = bufferedReader.readLine();
        }
    } 
    catch (IOException ioException) {
        logger.error(ioException.getMessage(), ioException);
    }
    finally
    {
        try
        {
            if(bufferedReader!=null)
            {
                bufferedReader.close();
            }
            if(inputstream!=null)
            {
                inputstream.close();
            }
            if(inputstreamreader!=null)
            {
                inputstreamreader.close();
            }           
        } 
        catch (IOException ioException) {
            logger.error(ioException.getMessage(), ioException);
        }
    }
    return cmdOutput;
} 
```

**当我尝试下面的代码时，它给出了一个错误**

```
inputstream = process.getErrorStream();
        inputstreamreader = new InputStreamReader(inputstream);
        bufferedReader = new BufferedReader(inputstreamreader);
        currentLine = bufferedReader.readLine();

 (java.lang.String) ERROR: User name does not exist. 
```

那么，这个错误的原因是什么，请指导解决以解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:09:34.877

```
currentLine = bufferedReader.readLine();\\Always returning null for **ps -u root|grep java|awk '{print $1}'** command
        while(currentLine!=null)
        {
            cmdOutput += currentLine;
            currentLine = bufferedReader.readLine();
        } 
```

将上面的代码更改为：并尝试一次。

```
 while((currentLine = bufferedReader.readLine())!=null)
    {
        cmdOutput += currentLine;
        //currentLine = bufferedReader.readLine();
    } 
```

# ember.js - POST 请求中的数据格式

> ID：15967232
> 
> 赞同：1
> 
> 时间：2013-04-12T09:06:06.787
> 
> 标签：ember.js, ember-data

（这个问题与[这个](https://stackoverflow.com/questions/15635328/format-of-data-in-put-requests)有关）

我正在向我的服务器发送 POST 请求，这些请求正在被正确处理：在数据库中创建了新对象。这是我在 POST 请求中用于有效负载的格式：

```
{"node":{"type":null,"name":"sdfasfaf","outputs":null,"properties":null}} 
```

创建一个`node`对象。

后台回复如下：

```
{"node": "64e11313-61eb-44ab-8ab8-1cbdf52304b4"} 
```

这基本上`id`是新创建的条目的de。但`Ember`对这个回复没有反应：它停留在“新节点”窗口上。更糟糕的是，新节点被添加到节点列表中，但 Ember 不知道该节点的 id（已在服务器端生成）。

有没有什么地方可以找到关于 POST 请求的有效负载和预期回复格式的详细描述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:31:14.117

这应该工作：

POST 请求有效负载

```
{
    "node":
    {
      "type":null,
      "name":"sdfasfaf",
      "outputs":null,
      "properties":null
    }
} 
```

POST 响应负载

```
{
    "node":
    {
      "id":1,
      "type":null,
      "name":"sdfasfaf",
      "outputs":{},
      "properties":{}
    }
} 
```

基本上通过简单地返回具有 id 集的相同 json 有效负载就可以了。希望能帮助到你...

# java - Javamail：获取最后一小时的消息

> ID：15967234
> 
> 赞同：1
> 
> 时间：2013-04-12T09:06:17.913
> 
> 标签：java, imap, jakarta-mail

我想获取过去 1 小时内收到的邮件。我在这里检查了-

[java imap 获取自某个日期以来的消息](https://stackoverflow.com/questions/870045/java-imap-fetch-messages-since-a-date)

并尝试了以下 -

```
DateTime current = new DateTime();
DateTime oneHourLess = current.minusHours(1);

SearchTerm olderThan = new ReceivedDateTerm(ComparisonTerm.LT, current.toDate());
SearchTerm newerThan = new ReceivedDateTerm(ComparisonTerm.GT, oneHourLess.toDate());
SearchTerm andTerm = new AndTerm(olderThan, newerThan);
Message totalMess[] = inbox.search(andTerm); 
```

但是我没有收到邮件，因为 ReceivedDateTerm 没有考虑时间。

有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T02:46:30.030

IMAP 协议只提供当天的解决方案，没有时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T09:19:26.280

我们有一个类似的要求，我们所做的就是使用`SearchTerm`将在日期应用的。然后，您可以使用 getReceivedDate() 过滤掉当天出现的旧内容。

另外，对我来说， getReceivedDate() 是作为 null 进来的。我不得不使用 getSentDate() 和`SentDateTerm`

# asp.net - IE 10 浏览器问题

> ID：15967237
> 
> 赞同：-1
> 
> 时间：2013-04-12T09:06:23.143
> 
> 标签：asp.net

我的 Web 应用程序中的 net(V 4.0) 链接按钮在 IE 10 中不起作用，但在所有其他版本的 IE 中都起作用。请有人帮忙。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:07:34.973

这是.NET 4 附带的浏览器定义文件的问题。您只需要更新浏览器定义文件。

# c# - log2(int) 和 log2(float) 的最快实现

> ID：15967240
> 
> 赞同：28
> 
> 时间：2013-04-12T09:06:27.247
> 
> 标签：c#, .net, performance, math

**问题是**

基本 2log 是否还有其他（和/或更快）实现？

**应用**

log2(int) 和 log2(float) 操作在许多不同的上下文中都非常有用。仅举几例：压缩算法、3D 引擎和机器学习。在几乎所有这些上下文中，它们都用于被调用数十亿次的低级代码中……尤其是 log2(int) 操作非常有用。

因为我发现自己一直在使用 log2，所以我不想在这里给出我正在开发的特定应用程序。相同的是，这是一个真正的性能消耗者（如各种应用程序的性能测试所示）。对我来说，尽可能快地做到这一点是关键。

底部添加了测试所有实现的完整源代码，您可以自己查看。

当然……至少运行 3 次测试，并确保计数器足够大，可以击中几秒钟。我还执行“添加”操作以确保 JIT'ter 不会神奇地删除整个循环。那么让我们开始真正的工作吧。

**简单的实现**

C# 中 2log 的简单实现是：

```
(int)(Math.Log(x) / Math.Log(2)) 
```

这个实现很简单，但也很慢。它需要 2 个日志操作，这些操作本身已经很慢了。当然，我们可以通过`1.0/Math.Log(2)`设置一个常数来优化它。

请注意，我们需要稍微修改这个常数以获得正确的结果（作为浮点错误的结果）或添加一个小数字以获得正确的结果。我选择了后者，但这并不重要——最终结果在所有情况下都很慢。

**查表**

一个更快的解决方案是使用查找表。虽然您可以使用 2 的任意幂的查找表，但我通常使用 256 或 64K 条目的表大小。

首先我们创建查找表：

```
lookup = new int[256];
for (int i = 1; i < 256; ++i)
{
    lookup[i] = (int)(Math.Log(i) / Math.Log(2));
} 
```

接下来，我们实现2log如下：

```
private static int LogLookup(int i)
{
    if (i >= 0x1000000) { return lookup[i >> 24] + 24; }
    else if (i >= 0x10000) { return lookup[i >> 16] + 16; }
    else if (i >= 0x100) { return lookup[i >> 8] + 8; }
    else { return lookup[i]; }
} 
```

如您所见，表查找是一种非常快得多的实现——但作为一个缺点，它不能用于计算`log2(float)`.

**分支移除**

众所周知，处理器不太擅长分支，所以我认为可以通过删除分支来改进表查找。我引入了第二个表，其中包含值和移位位以在表中找到条目，而不是一堆 if ：

```
nobranch = new int[16] { 0, 0, 8, 8, 16, 16, 16, 16, 24, 24, 24, 24, 24, 24, 24, 24 };

private static int LogDoubleLookup(int i)
{
    int n = (i | (i >> 4));
    n = (n | (n >> 2));
    n = (n | (n >> 1));
    n = ((n & 0x1000000) >> 21) | ((n & 0x10000) >> 14) | ((n & 0x100) >> 7) | (n & 1);
    int br = nobranch[n];
    return lookup[i >> br] + br;
} 
```

如果你运行这个测试，你会发现它实际上比 if-then-else 解决方案要慢。

**然后是英特尔 80386**

英特尔多年前就知道这是一项重要的操作，因此他们在其处理器中实施了位扫描转发 (BSF)。其他处理器也有类似的指令。这是迄今为止我所知道的最快的 2log 方法 - 但不幸的是，我现在知道如何使用 C# 中的这些好功能......我不喜欢有一个不再运行的实现的想法当新的平板电脑或手机上市时——我不知道有任何跨平台解决方案可以让我直接使用这个功能。

**其他实现**

正如 l4V 指出的（谢谢！）还有其他几个实现，特别是：

*   微不足道的循环。我省略了这一点，因为这很简单，这并不是真的很快。实施于`TestTrivial`.
*   可以使用的 64 位 IEEE / int union's。实施于`TestFloat`
*   DeBruijn 查找表。实施于`TestDeBruijn`
*   二进制搜索。实施于`TestBinary`

除了我喜欢这个名字之外，DeBruijn 查找表与普通查找表一样快，使其成为这里最快的算法之一……我尝试过的所有其他算法都慢得多。

**完整的测试代码**

```
public class Log2Test
{
    public static void TestNaive()
    {
        Stopwatch sw = new Stopwatch();
        sw.Start();
        int n = 0;
        for (int i = 1; i < 100000000; ++i)
        {
            n += (int)(Math.Log(i) / Math.Log(2.0));
        }
        sw.Stop();
        Console.WriteLine("Result: {0} - naive implementation took {1:0.000}s", n, sw.Elapsed.TotalSeconds);
    }

    public static int LogTrivialLoop(int v)
    {
        int r = 0;
        while ((v >>= 1) > 0) // unroll for more speed...
        {
            r++;
        }
        return r;
    }

    public static void TestTrivialLoop()
    {
        Stopwatch sw = new Stopwatch();
        sw.Start();
        int n = 0;
        for (int i = 1; i < 100000000; ++i)
        {
            n += LogTrivialLoop(i);
        }
        sw.Stop();
        Console.WriteLine("Result: {0} - loop implementation took {1:0.000}s", n, sw.Elapsed.TotalSeconds);
    }

    public static int LogFloat(int v)
    {
        Helper h = new Helper() { U1 = v, U2 = 0x43300000 };
        h.D -= 4503599627370496.0;
        return (h.U2 >> 20) - 0x3FF;
    }

    public static void TestFloat()
    {
        Stopwatch sw = new Stopwatch();
        sw.Start();
        int n = 0;
        for (int i = 1; i < 100000000; ++i)
        {
            n += LogFloat(i);
        }
        sw.Stop();
        Console.WriteLine("Result: {0} - IEEE float implementation took {1:0.000}s", n, sw.Elapsed.TotalSeconds);
    }

    [StructLayout(LayoutKind.Explicit)]
    private struct Helper
    {
        [FieldOffset(0)]
        public int U1;
        [FieldOffset(4)]
        public int U2;
        [FieldOffset(0)]
        public double D;
    }

    public static void TestConstant()
    {
        double c = 1.0 / Math.Log(2.0);
        Stopwatch sw = new Stopwatch();
        sw.Start();
        int n = 0;
        for (int i = 1; i < 100000000; ++i)
        {
            n += (int)(0.00000000001 + Math.Log(i) * c);
        }
        sw.Stop();
        Console.WriteLine("Result: {0} - naive 2 implementation took {1:0.000}s", n, sw.Elapsed.TotalSeconds);
    }

    private static int LogLookup(int i)
    {
        if (i >= 0x1000000) { return lookup[i >> 24] + 24; }
        else if (i >= 0x10000) { return lookup[i >> 16] + 16; }
        else if (i >= 0x100) { return lookup[i >> 8] + 8; }
        else { return lookup[i]; }
    }

    public static void TestLookup()
    {
        lookup = new int[256];
        for (int i = 1; i < 256; ++i)
        {
            lookup[i] = (int)(Math.Log(i) / Math.Log(2));
        }
        Stopwatch sw = new Stopwatch();
        sw.Start();
        int n = 0;
        for (int i = 1; i < 100000000; ++i)
        {
            n += LogLookup(i);
        }
        sw.Stop();
        Console.WriteLine("Result: {0} - table lookup implementation took {1:0.000}s", n, sw.Elapsed.TotalSeconds);
    }

    private static int LogDoubleLookup(int i)
    {
        int n = (i | (i >> 4));
        n = (n | (n >> 2));
        n = (n | (n >> 1));
        n = ((n & 0x1000000) >> 21) | ((n & 0x10000) >> 14) | ((n & 0x100) >> 7) | (n & 1);
        int br = nobranch[n];
        return lookup[i >> br] + br;
    }

    public static void TestDoubleLookup()
    {
        // Lookup table was already constructed earlier
        Stopwatch sw = new Stopwatch();
        sw.Start();
        int n = 0;
        for (int i = 1; i < 100000000; ++i)
        {
            n += LogDoubleLookup(i);
        }
        sw.Stop();
        Console.WriteLine("Result: {0} - double table lookup implementation took {1:0.000}s", n, sw.Elapsed.TotalSeconds);
    }

    private static int LogBinary(int v)
    {
        /* This is the worst implementation ever... - apparently C# is a slow-branching language

        int[] b = { 0x2, 0xC, 0xF0, 0xFF00, 0x7FFF0000 };
        int[] S = { 1, 2, 4, 8, 16 };

        int r = 0; // result of log2(v) will go here
        for (int i = 4; i >= 0; i--) // unroll for speed...
        {
            if ((v & b[i]) != 0)
            {
                v >>= S[i];
                r |= S[i];
            }
        }
        return r;

         */

        int r = (((v > 0xFFFF)) ? 0x10 : 0); 
        v >>= r;
        int shift = ((v > 0xFF) ? 0x8 : 0); 
        v >>= shift; 
        r |= shift;
        shift = ((v > 0xF) ? 0x4 : 0); 
        v >>= shift;
        r |= shift;
        shift = ((v > 0x3) ? 0x2 : 0); 
        v >>= shift;
        r |= shift;
        r |= (v >> 1);
        return r;
    }

    public static void TestBinary()
    {
        // Lookup table was already constructed earlier
        Stopwatch sw = new Stopwatch();
        sw.Start();
        int n = 0;
        for (int i = 1; i < 100000000; ++i)
        {
            n += LogBinary(i);
        }
        sw.Stop();
        Console.WriteLine("Result: {0} - binary search implementation took {1:0.000}s", n, sw.Elapsed.TotalSeconds);
    }

    private static readonly int[] MultiplyDeBruijnBitPosition = new int[32]
    {
        0, 9, 1, 10, 13, 21, 2, 29, 11, 14, 16, 18, 22, 25, 3, 30,
        8, 12, 20, 28, 15, 17, 24, 7, 19, 27, 23, 6, 26, 5, 4, 31
    };

    private static int LogDeBruijn(int v)
    {
        v |= v >> 1; // first round down to one less than a power of 2 
        v |= v >> 2;
        v |= v >> 4;
        v |= v >> 8;
        v |= v >> 16;

        return MultiplyDeBruijnBitPosition[(uint)(v * 0x07C4ACDDU) >> 27];
    }

    public static void TestDeBruijn()
    {
        // Lookup table was already constructed earlier
        Stopwatch sw = new Stopwatch();
        sw.Start();
        int n = 0;
        for (int i = 1; i < 100000000; ++i)
        {
            n += LogDeBruijn(i);
        }
        sw.Stop();
        Console.WriteLine("Result: {0} - de Bruijn implementation took {1:0.000}s", n, sw.Elapsed.TotalSeconds);
    }

    private static int[] lookup;
    private static readonly int[] nobranch = new int[16] { 0, 0, 8, 8, 16, 16, 16, 16, 24, 24, 24, 24, 24, 24, 24, 24 };

    static void Main(string[] args)
    {
        TestConstant();
        TestNaive();
        TestDeBruijn();
        TestBinary();
        TestFloat();
        TestTrivialLoop();
        TestLookup();
        TestDoubleLookup();
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-04T12:31:22.377

采用已经提到的二进制解决方案并删除了分支。做了一些测试，结果证明它比 DeBruijn 快 1.3 倍。

```
public static int Log2(int v)
{
    int r = 0xFFFF - v >> 31 & 0x10;
    v >>= r;
    int shift = 0xFF - v >> 31 & 0x8;
    v >>= shift; 
    r |= shift;
    shift = 0xF - v >> 31 & 0x4;
    v >>= shift;
    r |= shift;
    shift = 0x3 - v >> 31 & 0x2;
    v >>= shift;
    r |= shift;
    r |= (v >> 1);
    return r;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T09:26:25.860

[这里有一些整数算法](http://aggregate.org/MAGIC/#Log2%20of%20an%20Integer)。

在 C# 中：

```
public static uint FloorLog2(uint x)
{
    x |= (x >> 1);
    x |= (x >> 2);
    x |= (x >> 4);
    x |= (x >> 8);
    x |= (x >> 16);

    return (uint)(NumBitsSet(x) - 1);
}

public static uint CeilingLog2(uint x)
{
    int y = (int)(x & (x - 1));

    y |= -y;
    y >>= (WORDBITS - 1);
    x |= (x >> 1);
    x |= (x >> 2);
    x |= (x >> 4);
    x |= (x >> 8);
    x |= (x >> 16);

    return (uint)(NumBitsSet(x) - 1 - y);
}

public static int NumBitsSet(uint x)
{
    x -= ((x >> 1) & 0x55555555);
    x = (((x >> 2) & 0x33333333) + (x & 0x33333333));
    x = (((x >> 4) + x) & 0x0f0f0f0f);
    x += (x >> 8);
    x += (x >> 16);

    return (int)(x & 0x0000003f);
}

private const int WORDBITS = 32; 
```

您应该查看我为上下文链接的站点上的原始代码，特别是 Log2(0) 发生的情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-29T09:54:41.803

更多算法请看这里[http://www.asmcommunity.net/forums/topic/?id=15010](http://www.asmcommunity.net/forums/topic/?id=15010)

还在 C++ 中做了一些测试，我的 BSR 实现比查找表慢

*   我正在使用 BDS2006 可能会因 asm 指令的状态推送/弹出而减慢
*   您的查找很好，但我使用的是 11 位表而不是 8
*   它将 32 位分成 3 个分支而不是 4 个
*   并且它仍然足够小，可以在没有 init 函数的情况下处理

代码：

```
//---------------------------------------------------------------------------
DWORD log2_slow(const DWORD &x)
    {
    DWORD m,i;
    if (!x) return 0;
    if (x>=0x80000000) return 31;
    for (m=1,i=0;m<x;m<<=1,i++);
     if (m!=x) i--;
    return i;
    }
//---------------------------------------------------------------------------
DWORD log2_asm(const DWORD &x)
    {
    DWORD xx=x;
    asm {
        mov eax,xx
        bsr eax,eax;
        mov xx,eax;
        }
    return xx;
    }
//---------------------------------------------------------------------------
BYTE _log2[2048]=
    {
     0, 0, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,
     7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,
     8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,
     8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,
     9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9,
     9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9,
     9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9,
     9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9,
    10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,
    10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,
    10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,
    10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,
    10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,
    10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,
    10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,
    10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,
    };
DWORD log2(const DWORD &x)
    {
         if (x>=0x00400000) return _log2[x>>22]+22;
    else if (x>=0x00000800) return _log2[x>>11]+11;
    else                    return _log2[x];
    }
//--------------------------------------------------------------------------- 
```

测试代码：

```
DWORD x,j,i,n=256;
tbeg(); for (i=0;i<32;i++) for (j=0;j<n;j++) x=log2     (j<<i); tend(); mm_log->Lines->Add(tstr(1));
tbeg(); for (i=0;i<32;i++) for (j=0;j<n;j++) x=log2_asm (j<<i); tend(); mm_log->Lines->Add(tstr(1));
tbeg(); for (i=0;i<32;i++) for (j=0;j<n;j++) x=log2_slow(j<<i); tend(); mm_log->Lines->Add(tstr(1)); 
```

我在 AMD A8-5500 3.2 GHz 上的结果：

```
[   0.040 ms] log2     (x) - 11bit lookup table
[   0.060 ms] log2_asm (x) - BSR
[   0.415 ms] log2_slow(x) - shift loop 
```

**笔记：**

*   log2(0) -> 0 因为使用了 DWORDS，实际上它应该是 -inf
*   所有其他值对于所有功能都是正确的

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-12T20:12:21.657

有相当多的答案提供了快速的近似方法，`log2(int)`但很少有 for `log2(float)`，所以这里有两个（给出的 Java 实现）同时使用查找表和尾数/位黑客：

## 快速准确的 log2(float)：

```
/**
 * Calculate the logarithm to base 2, handling special cases.
 */
public static float log2(float x) {

    final int bits = Float.floatToRawIntBits(x);
    final int e = (bits >> 23) & 0xff;
    final int m = (bits & 0x7fffff);

    if (e == 255) {
        if (m != 0) {
            return Float.NaN;
        }
        return ((bits >> 31) != 0) ? Float.NaN : Float.POSITIVE_INFINITY;
    }

    if ((bits >> 31) != 0) {
        return (e == 0 && m == 0) ? Float.NEGATIVE_INFINITY : Float.NaN;
    }

    return (e == 0 ? data[m >>> qm1] : e + data[((m | 0x00800000) >>> q)]);
} 
```

笔记：

*   如果参数为 NaN 或小于零，则结果为 NaN。
*   如果参数是正无穷大，那么结果是正无穷大。
*   如果参数为正零或负零，则结果为负无穷大。

## 快速准确的 log2(float) *（稍微快一点，不检查）*：

```
/**
 * Calculate the logarithm using base 2\. Requires the argument be finite and
 * positive.
 */
public static float fastLog2(float x) {
    final int bits = Float.floatToRawIntBits(x);
    final int e = (bits >> 23) & 0xff;
    final int m = (bits & 0x7fffff);
    return (e == 0 ? data[m >>> qm1] : e + data[((m | 0x00800000) >>> q)]);
} 
```

第二种方法放弃了另一种方法中存在的检查，因此具有以下特殊情况：

*   如果参数为 NaN，则结果不正确。
*   如果参数是否定的，则结果不正确。
*   如果参数是正无穷大，那么结果是不正确的。
*   如果参数为正零或负零，则结果为负无穷大。

* * *

这两种方法都依赖于查找表`data`（以及变量`q`和`qm1`）。这些使用以下方法填充。`n`定义精度空间权衡。

```
static int q, qm1;
static float[] data;

/**
 * Compute lookup table for a given base table size.
 * 
 * @param n The number of bits to keep from the mantissa. Table storage =
 *          2^(n+1) * 4 bytes, e.g. 64Kb for n=13\. Must be in the range
 *          0<=n<=23
 */
public static void populateLUT(int n) {

    final int size = 1 << (n + 1);

    q = 23 - n;
    qm1 = q - 1;
    data = new float[size];

    for (int i = 0; i < size; i++) {
        data[i] = (float) (Math.log(i << q) / Math.log(2)) - 150;
    }
} 
```

* * *

```
populateLUT(12);
log2(6666); // = 12.702606 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-22T05:08:01.203

另一个 log2(int) 函数：（不再是最快的）

```
 [StructLayout(LayoutKind.Explicit)]
    private struct ConverterStruct
    {
        [FieldOffset(0)] public int asInt;
        [FieldOffset(0)] public float asFloat;
    }

    public static int Log2(uint val)
    {
        ConverterStruct a;  a.asInt = 0; a.asFloat = val;
        return ((a.asInt >> 23 )+ 1) & 0x1F;
    } 
```

注意：在浮点数中使用指数的灵感来自[SPWorley 3/22/2009](https://stackoverflow.com/a/671826/2352507)。谨慎使用生产代码，因为这在非小端架构上会失败。

如果你想要一些“字节顺序”安全的东西，那么请查看[spender 5/3/2012](https://stackoverflow.com/a/10439333/2352507)。它也有零支持。

最快的是新的内置`BitOperations.Log2(x)`

以下是一些基准测试：（此处的代码：[https](https://github.com/SunsetQuest/Fast-Integer-Log2) ://github.com/SunsetQuest/Fast-Integer-Log2 ）

```
Function               Time1  Full-32-Bit  Zero?   FUNCTION                  
BitOperationsLog2        2        Yes      Yes     BitOperations.Log2(x);
LeadingZeroCount         2        Yes      Yes     31 - BitOperations.LeadingZeroCount(x);
Log2_SunsetQuest5        16       Yes      No      ((BitConverter.DoubleToInt64Bits(val)>>52)+1) & 0xFF;
Log2_WiegleyJ            17       Yes      Yes     ...
MostSigBit_spender       17       Yes      Yes     ...
Log2_SPWorley            17       Yes      Yes     ...
Log2_SunsetQuest4        18       Yes      No      ...
FloorLg2_Matthew_Watson  18       Yes      Yes     ...
Log2_SunsetQuest3        19       Yes      No      ...
Log2_SunsetQuest1        20       Yes      Yes     ...
Log2_HarrySvensson       20       Yes      Yes     ...
Log2_DanielSig           21       No       Yes     ...
HighestBitUnrolled_Kaz   25       Yes      Yes     ...
FloorLog2_SN17           36       Yes      Yes     ...
Log2_Papayaved           44       Yes      Yes     ...
GetMsb_user3177100       45       Yes      Yes     ...
Log2_Flynn1179           57       Yes      Yes     ...
Msb_Protagonist          63       Yes      Yes     ...
SomeOtherMethod          76       Yes      Yes     ...
Log2_SunsetQuest0        98       Yes      Yes     ...
Log2_SunsetQuest2        131      Yes      Yes     ...
SomeOtherMethod          202      Yes      Yes     ...
SomeOtherMethod          545      Yes      Yes     ...

Zero_Support    = Supports Neg Return on Zero
Full-32-Bit     = Supports full 32-bit (some just support 31 bits)
SomeOtherMethod = name of function/person left out on purpose
Benchmark notes: AMD Ryzen, Release, no-debugger attached, .net 6.0 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-09T07:27:03.127

```
inline int fast_log2(register double x)
{ 
    return (reinterpret_cast<uint64_t&>(x) >> 52) - 1023;
}; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-29T20:33:02.383

**清洁可靠且快速！**
*（需要 .net core 3 或更高版本）*

```
int val = BitOperations.Log2(x); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-16T12:13:14.053

（我没有做任何测量，所以这可能不匹配，但我认为用户 user9337139 的想法很巧妙，想在 C# 中尝试同样的方法——他是 C++）。

`int Magnitude(byte)`这是一个基于将字节值转换为浮点数并从[IEEE 浮点数表示](https://en.wikipedia.org/wiki/Single-precision_floating-point_format)中提取指数的 C#函数。

```
 using System.Runtime.InteropServices;

    [StructLayout(LayoutKind.Explicit)]
    struct UnionWorker
    {
        [FieldOffset(0)]
        public int i;
        [FieldOffset(0)]
        public float f;
    }

    static int Magnitude(byte b)
    {
        UnionWorker u;
        u.i = 0; // just to please the compiler
        u.f = b;
        return Math.Max((u.i >> 23) & 0xFF, 126) - 126;
    } 
```

返回 0 表示 0，8 表示 0xFF，其他值如您所料。

零是一个特例，所以我需要`Math.Max`夹子。我怀疑 user9337139 的解决方案可能有类似的问题。

请注意，这*尚未*针对字节顺序问题进行测试 - 警告购买者。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-12T07:13:09.120

```
 static byte FloorLog2(UInt16 value)
    {
        for (byte i = 0; i < 15; ++i)
        {
            if ((value >>= 1) < 1)
            {
                return i;
            }
        }
        return 15;
    } 
```

# javascript - AngularJS - 更改指令的范围

> ID：15967244
> 
> 赞同：1
> 
> 时间：2013-04-12T09:06:30.723
> 
> 标签：javascript, html, angularjs, angularjs-directive

我正在尝试设置一个 Angular 指令，以便我可以重用一段 HTML。我已经设法实现了这一点，但是我面临的问题是，当我想从包含的 HTML 中将一些值传递给该模板化的 HTML 时。

为简单起见，我将使用具有多个地址的客户的示例（在此上下文中，客户是一个对象，每个地址实例是附加到客户的另一个对象）。

数据示例：

```
var customer = {
    forename: "John",
    surname: "Smith",
    address1: {
        street: "123 Street",
        town: "Georgeville",
    },
    address2: {
        street: "67 Maple Grove",
        town: "SomeTown"
    }
}; 
```

这是我的指令设置的示例：

```
var module = angular.module(...);
module.directive("address", function () {
    return {
        restrict: 'A',
        templateUrl: '/AddressView.html'
    };
}); 
```

我尝试的用法：

```
<div ng-model="customer">
    <div address></div>
    <div address></div>
</div> 
```

这就是我希望能够将客户的地址传递给模板化 HTML 的方法：

```
<div ng-model="customer">
    <div address ng-model="customer.address1"></div>
    <div address ng-model="customer.address2"></div>
</div> 
```

我可能误解了指令的目的，或者这可能是不可能的，但如果有人有任何建议，他们将不胜感激。

如果您需要我添加任何进一步的信息，请告诉我。

**编辑**

这是我设置的一个[Plunker](http://plnkr.co/edit/N8COWt?p=preview)，试图说明我想要实现的目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:30:38.673

您需要隔离指令的范围，以免角度混淆。而且您的对象以这种方式具有更好的结构：

```
var customer = {
    forename: "John",
    surname: "Smith",
    addresses: [
        address1: {
            street: "123 Street",
            town: "Georgeville",
        },
        address2: {
            street: "67 Maple Grove",
            town: "SomeTown"
        }
    ]
}; 
```

这样你可以这样做：

```
<div class="customer">
    <div address ng-repeat="address in customer.addresses">
        {{address.town}} {{address.street}}
    </div>
</div> 
```

我不知道你为什么在这里使用 ng-model ？！
这是一个示例，但是如果您为[plunker](http://plnkr.co/edit/gist:3510140)提供示例代码帮助您会更容易。

# 更新：

*   首先，您的 ng-controller 位于错误的位置，您需要将其向上移动，以便地址指令可以在控制器的范围内，以便它可以访问地址对象。
*   其次，您有 2 个未定义的变量：街道和城镇。
*   并且您需要隔离范围，以便每个指令不会与另一个指令的变量混淆。

这是一个工作的[笨蛋](http://plnkr.co/edit/nsP8pW?p=preview)。
希望这有帮助。

# android - 如何检查存储在 sharedpreferences 中的单选按钮值？

> ID：15967251
> 
> 赞同：0
> 
> 时间：2013-04-12T09:06:37.150
> 
> 标签：android, radio-button, sharedpreferences

我正在做基于测验的应用程序。

所以我有近 50 个问题和每个问题 4 个选项（单选组）。我的问题在于共享偏好。

我已将用户答案存储在共享偏好中，当我进入下一个问题并遇到前一个问题时，我会在共享偏好中获得用户答案，但如果我再次进入前一个问题，我不会得到那个问题的答案。例如）如果我回答了 9 个问题并来到了 8 个问题，我得到了这个答案，我再次来到 7 或 6 或 5 个问题，我没有得到这些答案。

我做错了什么？这个怎么做？

提前致谢....

> ```
>  btn_practicerg.setOnCheckedChangeListener(new OnCheckedChangeListener() {
>     @Override
>     public void onCheckedChanged(RadioGroup group, int checkedId){
>     RadioButton radioButton = (RadioButton)group. findViewById(checkedId);
>     String temp = radioButton.getText().toString();
> SharedPreferences settings =PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
>     SharedPreferences.Editor editor = settings.edit();
>     editor.putString("option", temp); // here temp is the value you want to save
>     editor.commit(); 
>          }
>           }); 
> ```

单击上一个 btn 时

> ```
>  ImageView previousbtn1 = (ImageView) findViewById(R.id.prv_btn);
>       previousbtn1.setOnClickListener(new Button.OnClickListener(){
>     public void onClick(View v){
> SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
> String optionprev = settings.getString("option","");
>        }
>          }); 
> ```

我试试这样。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:14:18.890

因为您将所有答案保存在同一个共享首选项变量中`option`，所以您必须将其与问题的编号一起保存，如下所示：

```
int numberOfQuestion = //your question's number;
String optionNumber = "option"+numberOfQuestion; 
```

`optionNumber`变量必须是这样的：

`option1`对于问题 1

`option2`对于问题 2

...

`option50`第 50 题

# java - 如何让 SAK 使用 JAVA 识别智能卡类型？

> ID：15967255
> 
> 赞同：3
> 
> 时间：2013-04-12T09:06:40.633
> 
> 标签：java, smartcard

我正在使用 Java Smart Card API 进行访问。我有 NXP Mifare desfire 4K、1K、超轻智能卡，并试图在 JAVA 中以编程方式找出它的类型。

我参考了 NXP 网站 ( [http://www.nxp.com/documents/application_note/AN10833.pdf](http://www.nxp.com/documents/application_note/AN10833.pdf) ) 的文档 AN10833。我有以下相关查询：

1.  如何使用 JAVA 获取 SAK？
2.  执行 REQA 命令的 APDU 是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T07:51:05.307

找出卡的ATR，ATR包含卡类型信息。在这里我正在上传图片查看 ATR 的结构... 更多信息在这里 查看第 6 页[的完整 PDF 。](http://www.acs.com.hk/drivers/eng/API_ACR122U_v2.00.pdf)

![在此处输入图像描述](https://i.stack.imgur.com/cRNiX.png)

![在此处输入图像描述](https://i.stack.imgur.com/ZVuTh.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-12T19:44:21.787

编辑：很抱歉，这并没有直接回答问题，但当前的最佳答案可能有害。我正在尝试发现如何获得 SAK，我自己会尝试在我这样做时发布更新。

从 ATS/ATR 中确定卡片类型是司空见惯的，但却是错误的。NXP 建议使用 SAK。

> “由于不同MIFARE IC的ATS都可以定制，当然不建议依靠ATS来区分IC类型”

参考：[http ://www.nxp.com/documents/application_note/AN10833.pdf](http://www.nxp.com/documents/application_note/AN10833.pdf)

相反，请在此处查看如何从 SAK 确定卡类型的详细树： [http ://www.nxp.com/documents/application_note/130830.pdf](http://www.nxp.com/documents/application_note/130830.pdf)

顺便说一句，在生产中，如果您可以确信您将始终在所有卡上获得相同格式的 ATR/ATS，这可能是一个可行的选择。但不能保证。

我不知道 VCA 到底是什么，但从第一个文件来看：

> “未来，NXP 建议使用“Virtual Card Architecture (VCA)”进行 PICC 选择和类型识别。如果安装不依赖于 ATQA、SAK 和/或 ATS 的实际内容进行卡选择和识别，这允许更多“而不是在单个设备中同时启用一个 MIFARE 产品。在这种情况下，VCA 允许对目标 MIFARE 产品进行高效且隐私友好的选择。这在单独的应用说明中进行了描述。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-17T22:13:58.557

我知道这是一个旧博客，但我一直在研究同样的问题并想分享我的发现。

在 AN10833 中，它明确指出 UID + SAK 是通过执行选择返回的。使用 java smartcard io 库，我可以执行如下选择：

```
// Send pseudo APDU to retrieve the card serial number (UID)
int cla = 0xFF;
int ins = 0xCA;
int p1 = 0x00;
int p2 = 0x00;
byte[] data = null;
int dataOffset = 0x00;
int dataLength = 0x00;
int le = 0x00;

CommandAPDU getDataApdu = new CommandAPDU(cla, ins, p1, p2, data, dataOffset, dataLength, le);
ResponseAPDU r1 = channel.transmit(getDataApdu); 
```

但是，我只返回了 UID。我在 PC/SC API 上找到了更改 P1 = 0x01 将更改对历史字节的响应的文档（这对我有用）。

（此处的第 3.2.2.1.3 节：http: [//pcscworkgroup.com/Download/Specifications/pcsc3_v2.01.09.pdf](http://pcscworkgroup.com/Download/Specifications/pcsc3_v2.01.09.pdf)）

不幸的是，对于我可以访问的现成读者，我找不到返回 SAK 的参数。在另一个阅读器的 API 文档中，我发现如果 p2 = 0x01，则返回 ATQA + UID + SAK（此阅读器是专用的，我无法共享该文档）。

我相信如果您的阅读器支持它（或者您的编码水平足够低以控制阅读器本身），您可以获得/请求确切的 SAK。否则您可能需要使用 ATS/ATR 来确定卡类型。

请注意，在 Java 中，这里是获取 ATS/ATR 的代码：

```
// wait 10 seconds for a card
CardTerminal terminal = terminal.waitForCardPresent(10000);

Card card = terminal.connect("*");
ATR atr = card.getATR(); 
```

从那里，ATR 可以按照上面提到的 vikky 进行处理。

我会用我学到的任何其他东西来回应。

# android - 为什么在android中使用html的文本字段响应速度太慢？

> ID：15967256
> 
> 赞同：0
> 
> 时间：2013-04-12T09:06:40.893
> 
> 标签：android, html, cordova

我的应用程序使用 phonegap 时出现问题。我有使用 HTML 的文本字段，当我触摸文本字段以输入该文本字段时出现问题。响应太慢，我必须等待 3-4 秒才能输入文本域。有没有人有解决方案？？

对不起我的英语不好

# c++ - C++：BOOST-ASIO read_handler() 没有按预期工作？

> ID：15967257
> 
> 赞同：1
> 
> 时间：2013-04-12T09:06:41.140
> 
> 标签：c++, boost-asio, polling

在第 67 行我有代码

```
void session::read_handler(const boost::system::error_code& ec, std::size_t bytes_transferred)
{
      std::cout<<bytes_transferred<<std::endl;
} 
```

每当服务器在会话类中接收到数据包时，都应该对其进行轮询，但由于某种原因，该函数永远不会被调用。被`io_service.run();`称为`int main()`for [`read_handler()`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/ReadHandler.html)。该代码基本上是 Boost 站点上的异步服务器示例，其中包含我添加的功能。这是代码。

```
#include <cstdlib>
#include <iostream>
#include <boost/bind.hpp>
#include <boost/asio.hpp>

using boost::asio::ip::tcp;

class session
{
public:
  session(boost::asio::io_service& io_service)
    : socket_(io_service)
  {
  }

  tcp::socket& socket()
  {
    return socket_;
  }

  void start()
  {
    socket_.async_read_some(boost::asio::buffer(data_, max_length),
        boost::bind(&session::handle_read, this,
          boost::asio::placeholders::error,
          boost::asio::placeholders::bytes_transferred));
  }
void read_handler(const boost::system::error_code& ec, std::size_t bytes_transferred);

private:
  void handle_read(const boost::system::error_code& error,
      size_t bytes_transferred)
  {
    if (!error)
    {
      boost::asio::async_write(socket_,
          boost::asio::buffer(data_, bytes_transferred),
          boost::bind(&session::handle_write, this,
            boost::asio::placeholders::error));
    }
    else
    {
      delete this;
    }
  }

  void handle_write(const boost::system::error_code& error)
  {
    if (!error)
    {
      socket_.async_read_some(boost::asio::buffer(data_, max_length),
          boost::bind(&session::handle_read, this,
            boost::asio::placeholders::error,
            boost::asio::placeholders::bytes_transferred));
    }
    else
    {
      delete this;
    }
  }

  tcp::socket socket_;
  enum { max_length = 1024 };
  char data_[max_length];
};
void session::read_handler(const boost::system::error_code& ec, std::size_t bytes_transferred)
{
      std::cout<<bytes_transferred<<std::endl;
}

class server
{
public:
  server(boost::asio::io_service& io_service, short port)
    : io_service_(io_service),
      acceptor_(io_service, tcp::endpoint(tcp::v4(), port))
  {
    start_accept();
  }

private:
  void start_accept()
  {
    session* new_session = new session(io_service_);
    acceptor_.async_accept(new_session->socket(),
        boost::bind(&server::handle_accept, this, new_session,
          boost::asio::placeholders::error));
  }

  void handle_accept(session* new_session,
      const boost::system::error_code& error)
  {
    if (!error)
    {
      new_session->start();
    }
    else
    {
      delete new_session;
    }

    start_accept();
  }

  boost::asio::io_service& io_service_;
  tcp::acceptor acceptor_;
};

int main()
{
  try
  {
    boost::asio::io_service io_service;
    server s(io_service, 4000);

    io_service.run();
  }
  catch (std::exception& e)
  {
    std::cerr << "Exception: " << e.what() << "\n";
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:23:17.857

session::read_handler(...) 未设置为处理程序。

调用 handle_accept() 是因为它被设置为处理程序：

```
acceptor_.async_accept(new_session->socket(),
        boost::bind(&server::handle_accept, this, new_session,
          boost::asio::placeholders::error)); 
```

调用 handle_read(...) 是因为它被设置为处理程序：

```
socket_.async_read_some(boost::asio::buffer(data_, max_length),
          boost::bind(&session::handle_read, this,
            boost::asio::placeholders::error,
            boost::asio::placeholders::bytes_transferred)); 
```

与 handle_write(...) 相同 - 由 handle_read 函数设置。

但是 read_handler 没有设置。请改用handle_read。或者从handle_read 调用read_handler。

```
 void handle_read(const boost::system::error_code& error,
      size_t bytes_transferred)
  {
    if (!error)
    {
      std::cout<<bytes_transferred<<std::endl; // try this.
      read_handler(error, bytes_transferred);  // OR this.

      boost::asio::async_write(socket_,
          boost::asio::buffer(data_, bytes_transferred),
          boost::bind(&session::handle_write, this,
            boost::asio::placeholders::error));
    }
    else
    {
      delete this;
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:19:39.397

该函数永远不会被调用，因为您既没有调用它，也没有将它作为处理程序传递给异步函数之一。

您可以将处理程序视为状态机的状态，并将 async_* 调用视为这些状态之间的转换。您的状态如下（起点是`start_accept`，调用自`server::server`：

```
<<start>>                   --async_accept-----> <server::handle_accept> //via server::server > server::start_accept
<server::handle_accept>     --async_read_some--> <session::handle_read>  //via session::start
<session::handle_read>      --async_write------> <session::handle_write>
<session::handle_write>     --async_read_some--> <session::handle_read> 
```

路径仅适用于没有错误的情况。错误情况是微不足道的，它们只是结束程序，或者在`handle_accept`重试转换的情况下。

`handle_read`您可以看到和之间可能无限循环`handle_write`，但这`read_handler`不是游戏的一部分。

# javascript - 谷歌地图 v3 - MarkerWithLabel。标签在 IE9 中不存在

> ID：15967259
> 
> 赞同：1
> 
> 时间：2013-04-12T09:06:46.973
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我正在将 Google Map 从 v2 api 移植到 v3。我当然遇到了问题。我使用 MarkerWithLabel() 创建带有标题的标记。在除 IE9 之外的所有浏览器中（即使在 IE8 中），标签都是可见的。哪里可能有问题？

![在此处输入图像描述](https://i.stack.imgur.com/9yxTb.png)

这是我的带有 laber builder 功能的标记代码：

```
function createRegionMarker(pointData) {
    var latlng = new google.maps.LatLng(pointData.lat, pointData.lng);
    var image = new google.maps.MarkerImage("/images/rall.png", new google.maps.Size(40, 40), new google.maps.Point(0,0), new google.maps.Point(0, 32));

var marker = new MarkerWithLabel({
    position: latlng,
    icon: image,
    clickable: true,        
    draggable: false,
    map: map,
    labelContent: pointData.id,
    labelAnchor: new google.maps.Point(-10, 20),
    labelClass: "map-labels",
    labelInBackground: false
});

google.maps.event.addListener(marker, "click", function() {
        zoomMarker(pointData.lng, pointData.lat, 8);
});

return marker;
} 
```

# c - SDL“掉线”初始事件？

> ID：15967262
> 
> 赞同：0
> 
> 时间：2013-04-12T09:06:55.120
> 
> 标签：c, ubuntu, sdl

我在 Ubuntu 12.04 上使用 SDL 1.2 进行编程。SDL 似乎“丢弃”了给事件循环的第一个事件。例如，如果我要通过“x”框检查是否退出游戏，然后在我的应用程序中单击“x”框，则没有任何反应。然而，在第二次点击游戏退出。我的游戏循环：

```
void game_run()
{
    int RUNNING = 1;

    while(RUNNING == 1)
    {
        while(SDL_PollEvent(&scr.event))
        {
            switch(scr.event.type)
            {
                case SDL_QUIT:
                RUNNING = 0;
                break;

                case SDL_KEYDOWN:
                switch(scr.event.key.keysym.sym)
                {
                    case SDLK_ESCAPE:
                    RUNNING = 0;
                    break;

                    default:
                    break;
                }
                break;

                default:
                break;
            }
        }

        // draw here

        SDL_Flip(scr.buffer);
    }
} 
```

如果需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:35:57.750

改变你的

```
case SDL_QUIT:
RUNNING = 0;
break; 
```

至

```
case SDL_QUIT:
exit( 0 ) ;
break; 
```

程序应该立即退出，确认事件循环工作正常并且问题出在你的代码中你没有显示的某个地方。我的猜测是`game_run()`在某个地方再次调用，并且因为`int RUNNING = 1;`设置在 every 的开头`game_run()`，所以您进入另一个`while(RUNNING == 1)`循环。

# qml - 错误：XmlListModel 不是类型

> ID：15967267
> 
> 赞同：1
> 
> 时间：2013-04-12T09:07:10.507
> 
> 标签：qml

我在 qml 中使用 XmlListModel：

xml：

```
<? xml version="1.0" ?>
<queuelist>
    <queue id="1" name="name" image="image.svg" turn="34" wait="50" />
</queuelist> 
```

XmlListModel

```
 XmlListModel {
        id: queueModel
        source: "queuelist.xml"
        query: "/queuelist/queue"
        XmlRole {name: id; query: "@id/string()"}
        XmlRole {name: queue; query: "@name/string()"}
        XmlRole {name: image; query: "@image/string()"}
        XmlRole {name: turn; query: "@turn/string()"}
        XmlRole {name: wait; query: "@wait/string()"}
    } 
```

QTCreator 错误：

```
file:///home/(...)/3queue-client-list.qml:42 XmlListModel is not a type

/home/(...)/Qt5.0.1/5.0.1/gcc/bin/qmlscene exited with code 255 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-07T13:38:57.087

导入 QtQuick.XmlListModel 2.0

# c# - 通过 Binding 更新绑定目标值

> ID：15967269
> 
> 赞同：1
> 
> 时间：2013-04-12T09:07:24.240
> 
> 标签：c#, .net, wpf, silverlight, xaml

我有一个`Control`可见性绑定到视图模型，但也允许用户直接关闭控件。理想情况下，我想要的是`CloseDialog`函数检查绑定`Visibility`，如果存在，直接更新绑定值（也就是 ViewModel 的绑定值）而不是覆盖它，但我正在努力如何实际更新值本身

```
public void CloseDialog()
{
    Control visibileObject = this;

    //Check to ensure we have no binding set, if we do then update the binding expression
    Binding myBinding;
#if (!SILVERLIGHT)
    myBinding = BindingOperations.GetBinding(visibileObject, Control.VisibilityProperty);

#else
    BindingExpression bindingExpression = visibileObject.GetBindingExpression(Control.VisibilityProperty);
    myBinding = bindingExpression.ParentBinding;
#endif

    if (myBinding != null)
    {
        //Here update binding target to be Visibility.Collapsed
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:14:40.187

您可以使用 BindingExpression 的[UpdateSource](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingexpression.updatesource.aspx)方法来更新源。

```
bindingExpression.UpdateSource(); 
```

它将使用 VisibilityProperty 的当前值更新您的 ViewModel 属性。

但是您也可以在 CloseDialog 方法中设置控件的可见性。如果存在（双向）绑定，它将自动更新您的属性。

```
public void CloseDialog()
{
  this.Visibility = Visibility.Collapsed;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:54:45.177

我可能会误解你，但我建议直接使用转换器将可见性绑定到你的视图模型，以将视图模型的值转换为可见性值。如果绑定是 TwoWay，您将获得要更新的模型，反之亦然。这可以在您的 XAML 代码中完成：

```
Visibility="{Binding Path=DataContext.Value, 
              ElementName=MyDataProperty,
              Mode=TwoWay, 
              Converter={StaticResource ValueToVisibiltyConverter}}" 
```

转换器会在转换中执行以下操作：

```
 public override object Convert(
            object value, 
            Type targetType, 
            object parameter,   
            CultureInfo culture)
        {
            if (value == null)
            {
                return Visibility.Visible;
            }
            if (value.Equals("HideMe")
            {
                return Visibility.Collapsed;
            }
            return Visibility.Visible;
        }

        public override object ConvertBack(
            object value, 
            Type targetType, 
            object parameter, 
            CultureInfo culture)
    {
        // TODO! Convert back to view model value
    } 
```

# linux - 动态库未在 ubuntu 上链接

> ID：15967274
> 
> 赞同：0
> 
> 时间：2013-04-12T09:07:42.723
> 
> 标签：linux, ubuntu, makefile, ldd

我正在使用以下makefile

```
SHELL    = /bin/sh
CXXFLAGS += -fPIC
TARGET   = product_bridge.so

MYPRODUCT    = /tmp/product
JAVASDK  = /x86.linux/include/
CXXFLAGS += -I$(JAVASDK) -I$(JAVASDK)/linux -I$(GFCPP)/include -Wl,-rpath, -L$(MYPRODUCT)/lib -lmyproduct

SOURCES = $(shell echo *.cpp)
HEADERS = $(shell echo *.h)
OBJECTS = $(SOURCES:.cpp=.o)

all: $(TARGET)

$(TARGET): $(OBJECTS)
    $(CXX) -shared $(CXXFLAGS) -o $(TARGET) $(OBJECTS)

clean:
    rm -rf *.so *.o 
```

当我在上面构建它时，我`ubuntu`看不到`myproduct`. `ldd`但我在做同样的`RHEL`事情`myproduct``ldd`

我的共享库即`product_bridge.so`建立在`RHEL`

# javascript - 在 $(document) 上绑定事件时绑定上下文

> ID：15967277
> 
> 赞同：1
> 
> 时间：2013-04-12T09:07:45.077
> 
> 标签：javascript, jquery, mouseevent, jquery-events

情况是这样的：我有一个我们可以使用`$('#container')`的 div，而这个 div 的子 div 是`('#tracker')`. 在跟踪器上，我将事件绑定为：

```
$(document).on('mousemove', '#tracker', function(e) {
    console.log(e.clientX);
} 
```

但是，我希望将它绑定到容器的上下文中，即我希望功能与以下内容相同：

```
$('#tracker', '#container').onmousemove = function() { ... } 
```

但适用于文件。或另有说明的建议

**[编辑]** 很抱歉原始问题含糊不清。

如果我尝试缓存，那么我可以做`var v = $('#tracker', '#container')`，然后我可以做`v.onmousemove = function () { ... }`

这是如何工作的：

```
$(document).on('mousemove', <cached in var>, function(e) {
    console.log(e.clientX);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:11:00.057

我可能弄错了，因为它看起来有点明显，但这是你想要的吗？

```
$(document).on('mousemove', '#container #tracker', function(e) {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:11:19.420

只需扩展传递给的选择器`.on()`以仅查找`#tracker`元素内的`#container`元素：

```
$(document).on('mousemove', '#container #tracker', function(e) {
    console.log(e.clientX);
}); 
```

如果您想将对象缓存在另一个变量中，有几种方法可以做到这一点。第一个与以前相同，但在调用时不会使用它`.on()`：

```
var v = $('#tracker', '#container');

$(document).on('mousemove', '#container #tracker', function(e) {
    // use v here
});

// you can also use v here 
```

或者，如果您只需要在事件处理函数*内部*使用它，您可以这样做：

```
$(document).on('mousemove', '#container #tracker', function(e) {
    var v = $(this);
    // use v here
}); 
```

# algorithm - 将 k 个石头放在 * m 网格上，以最大化每个角有一颗石头的矩形数量

> ID：15967283
> 
> 赞同：2
> 
> 时间：2013-04-12T09:08:05.370
> 
> 标签：algorithm, math, combinatorics

将k颗石子放在一个*m的格子上，每颗石子都应该在格子线的交点上。尝试找到一种放置石子的方法，以使每个角有一颗石子的矩形数量最大化. 输出号码。

例如，如果 k <= 3，则答案为 0，表示没有这样的矩形；如果 k 为 4 且 n, m >= 2，则答案为 1；更多示例：

(n, m, k, 答案): (3, 3, 8, 5), (4, 5, 13, 18), (7, 14, 86, 1398) ![红色圆圈是石头](https://i.stack.imgur.com/l79gD.png) ![在此处输入图像描述](https://i.stack.imgur.com/CUfEg.png)

k 介于 0 和 n * m 之间。n, m 是小于 30000 的正整数

ps：这其实是微软编程之美资格赛的一个问题（但你可能找不到，因为它在中国举办，我自己翻译成英文。） pss：我已经取得了一些进展。可以证明，要得到答案，搜索所有可能的 Ferrers 图就足够了，但复杂度相对于 k 呈指数级。

**编辑：（**杜克林）

(3, 3, 8, 5) 的可视化，矩形以不同的颜色表示。

![网格](https://i.stack.imgur.com/Q7SP1.png)

正如您所注意到的，它实际上是一个 (n-1) * (m-1) 网格，还有另一种解释是使用 * m 网格，其中石头放置在单元格内，但是您需要添加一个额外的约束，即矩形不能是宽度/高度 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:59:53.347

从编程的角度来看，这表明搜索利用矩形的对称性来减少搜索空间。接下来是一个扩展的提示。

正如 OP 指出的那样，一个简单的实现将检查所有可能的节点 k 子集，大小为 C(nm,k)。

搜索空间的减少量取决于如何利用对称性。正方形具有反射和旋转的对称性，因此对于 n=m，有一个 8 倍对称群。如果说 n < m，那么较少的对称性给出一个 4 倍群。

一种典型的方法是按字典顺序组织可能的 k 子集，以便当潜在配置等同于该顺序中较早出现的配置时，它会被跳过。

但是还有额外的“环绕”对称性需要利用。假设网格的最后一行移动到顶部（连同任何分配给其节点的石头）。此转换保留了 4 石矩形的计数（尽管这些矩形的确切大小会有所不同）。

实际上，转置两行或两列可以保留 4 石矩形的计数。一旦你有了洞察力，你能看到如何更有效地参数化搜索空间吗？

**补充：** 尽管它比编程更多的是数学洞察力，但请考虑“完整子矩形”提供的 4 石矩形的数量，如果 rc < k 则说 rxc。考虑多一颗石头提供的额外矩形的增量；再多两块石头。

# c# - WinRT Grid，删除使用 Grid.SetRow(element, rowIndex) 放置的 UIElement

> ID：15967285
> 
> 赞同：0
> 
> 时间：2013-04-12T09:08:25.107
> 
> 标签：c#, .net, grid, windows-runtime, uielement

正如标题所说。**我有一个网格，我**通过以下`Grid.SetRow()`方法将几个元素放入其中：

```
Grid.SetRow(myElement, 0); 
```

后来**我想删除这些项目**，但我不知道如何。

只是删除对 ui 元素的引用似乎并不能解决问题。

*有任何想法吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:56:56.797

您可以使用`Children`网格变量中的集合将其删除：

```
// get grid instance
Grid grid = GetGrid();
// Remove element
grid.Children.Remove(myElement); 
```

# c++ - 在发布模式下编译时出错

> ID：15967286
> 
> 赞同：2
> 
> 时间：2013-04-12T09:08:26.123
> 
> 标签：c++, visual-studio, internet-explorer

我正在使用 VS2008 构建一个 IE 扩展（ATL），当我切换到发布模式时，它给了我一些链接错误：

```
Error   2   fatal error C1083: Cannot open include file: 'ImplAddon.h': No such file or directory   *************** 19  Engine
Error   3   fatal error LNK1181: cannot open input file '..\release addon\engine.lib'   Addon Addon 
```

我试图在项目属性的“附加包含目录”中的每个项目中添加到“ImplAddon.h”的相关路径，但没有任何帮助。

知道该怎么做吗？

非常感谢伙计们:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T09:16:24.363

右键单击每个项目，然后转到`properties`顶部，左侧有一个下拉菜单以选择环境。在那里选择`all configurations`。然后转到`C++`-> `General`->`Additional directories`然后添加标题失败的路径。

![在此处输入图像描述](https://i.stack.imgur.com/nLUc6.png)

# javascript - Intro.js：突出显示的区域没有按预期工作

> ID：15967289
> 
> 赞同：13
> 
> 时间：2013-04-12T09:08:29.683
> 
> 标签：javascript, html, intro.js

我正在使用非常有趣的 javascript 库[intro.js](http://usablica.github.io/intro.js/)。

然而，在我的应用程序中，高亮区域几乎变成了全白。

我猜这是一些 CSS 冲突，但我能做些什么来确定这个问题的原因？![在此处输入图像描述](https://i.stack.imgur.com/wOAb7.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2019-01-17T17:57:36.183

摘自问题 #109 ( [https://github.com/usablica/intro.js/issues/109](https://github.com/usablica/intro.js/issues/109) )：

```
.introjs-helperLayer {
    background: transparent;
}

.introjs-overlay {
    opacity: 0 !important;
}

.introjs-helperLayer:before {
    opacity: 0;
    content: '';
    position: fixed;
    width: inherit;
    height: inherit;
    border-radius: 0.5em;
    box-shadow: 0 0 0 1000em rgba(0,0,0, .7);
    opacity: 1;
}

.introjs-helperLayer:after {
    content: '';
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    position: fixed;
    z-index: 1000;
} 
```

这将解决您的问题。希望它对我有帮助！向在 GitHub 中提供答案的 @weili1977 和 @exoJSON 大喊。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-10-17T13:56:52.543

该问题可以通过设置父元素的绝对位置来解决：

```
.introjs-fixParent {
  position: absolute !important;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-28T05:06:40.680

这对于使用表格行元素的用户来说很常见。我通过将这些行添加到 css 来解决我的问题。

```
.introjs-relativePosition > td { position: relative; }
.introjs-showElement > td { z-index: 9999999 !important; } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-03T03:22:34.353

我设法得到了一个可用的结果：

```
.introjs-helperLayer {
     mix-blend-mode: overlay !important;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-04T21:43:13.237

我将目标元素位置设置为绝对（在相应的 CSS 中），它现在可以工作了！见这里 - [http://prntscr.com/1dl0db](http://prntscr.com/1dl0db)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-13T03:39:14.040

我没有看到任何 jsFiddle 或您的问题的任何在线示例，但我尝试以这种方式回答您的问题：

1.  似乎您正在使用另一个 UI 库，例如 ExtJs 或其他东西，请确保您没有任何 CSS 冲突。
2.  尝试在另一个元素中更改 `data-intro`and `data-step`，例如，如果现在元素中有`data-intro`and `data-step`，请将`form`其更改为上部元素或 a `div`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-07T13:50:14.240

在 Introjs.css 中，将 introjs-helperlayer 类的 z-index 设置为 1 可解决此问题。但是，我不知道这种变化的全部含义。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-19T13:11:43.400

您是否要突出显示表格行（）？如果是这样，我也遇到了这个问题。有人在 github 问题部分发布了修复：[https ://github.com/usablica/intro.js/issues/146](https://github.com/usablica/intro.js/issues/146)

# c++ - 使用 BOOST_FOREACH 修改 std::vector 中的指针

> ID：15967290
> 
> 赞同：0
> 
> 时间：2013-04-12T09:08:31.933
> 
> 标签：c++, boost, boost-iterators

我有一个班级`node`并声明了一个`std::vector<node*>`. 我想使用 BOOST_FOREACH 来迭代向量，但我遇到了一个小问题。

我的代码是这样的：

```
data_flow_graph* dfg;
node* other_node;

[...]

BOOST_FOREACH(node* n, vector_of_nodes){
  if (n->get_id() < 100)){
    n = new node(last_id++);
    n->add_related_node(other_node);
    dfg->add_node(n);
  }
} 
```

也就是说，我在迭代指针时尝试修改指针的地址。问题是，虽然创建了新节点，但 in 的指针`vector_of_nodes`保持不变。我想这是Boost如何管理对指针的访问的问题，因为如果我使用常规迭代器进行等效处理：

```
std::vector<node*>::iterator it;
std::vector<node*>::iterator et = vector_of_nodes.end();

for (it = vector_of_nodes.begin(); it != et; ++it){
  if ((*it)->get_id() < 100)){
    (*it) = new node(last_id++);
    (*it)->add_related_node(other_node);
    dfg->add_node(*it);
  }
} 
```

该代码运行良好，并按预期工作。

我可以改用那个版本，但我很好奇......为什么第一个版本不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:17:16.400

将代码更改为

```
BOOST_FOREACH(node*& n, vector_of_nodes){
  if (n->get_id() < 100)){
    n = new node(last_id++);
    n->add_related_node(other_node);
    dfg->add_node(n);
  }
} 
```

因为在您的版本中，您更改了本地指针的地址。而且，在使用之前`n = new node`，为什么不删除旧的？既然您在手动管理资源方面遇到问题，为什么不使用`smart pointers`?

# c++ - 如何使我的 uninitialised_allocator 安全？

> ID：15967293
> 
> 赞同：4
> 
> 时间：2013-04-12T09:08:46.953
> 
> 标签：c++, c++11, constructor, containers, allocator

继[这个问题](https://stackoverflow.com/questions/7218574/avoiding-default-construction-of-elements-in-standard-containers)之后，我想使用`unitialised_allocator`with`std::vector`来避免在构造时默认初始化元素（或`resize()`（`std::vector`另请参阅[此处](https://stackoverflow.com/questions/15952412/performance-degradation-due-to-default-initialisation-of-elements-in-standard-co)的用例）。我当前的设计如下所示：

```
// based on a design by Jared Hoberock
template<typename T, typename base_allocator >
struct uninitialised_allocator : base_allocator::template rebind<T>::other
{
  // added by Walter   Q: IS THIS THE CORRECT CONDITION?
  static_assert(std::is_trivially_default_constructible<T>::value,
                "value type must be default constructible");
  // added by Walter   Q: IS THIS THE CORRECT CONDITION?
  static_assert(std::is_trivially_destructible<T>::value,
                "value type must be default destructible");
  using base_t = typename base_allocator::template rebind<T>::other;
  template<typename U>
  struct rebind
  {
    typedef uninitialised_allocator<U, base_allocator> other;
  };
  typename base_t::pointer allocate(typename base_t::size_type n)
  {
    return base_t::allocate(n);
  }
  // catch default construction
  void construct(T*)
  {
    // no-op
  }
  // forward everything else with at least one argument to the base
  template<typename Arg1, typename... Args>
  void construct(T* p, Arg1 &&arg1, Args&&... args)default_
  {
    base_t::construct(p, std::forward<Arg1>(arg1), std::forward<Args>(args)...);
  }
}; 
```

然后`unitialised_vector<>`可以像这样定义模板：

```
template<typename T, typename base_allocator = std::allocator<T>>
using uninitialised_vector =
  std::vector<T,uninitialised_allocator<T,base_allocator>>; 
```

但是，正如我的评论所示，我不能 100% 确定***? 中的适当条件是`static_assert()`什么？***（顺便说一句，可以考虑使用 SFINAE ——欢迎对此提出任何有用的评论）

显然，人们必须避免因试图破坏未初始化对象而引发的灾难。考虑

```
unitialised_vector< std::vector<int> > x(10); // dangerous. 
```

有人建议（Evgeny Panasyuk 评论）我断言微不足道的可构造性，但这似乎并没有捕捉到上述灾难场景。我只是想检查一下clang所说的`std::is_trivially_default_constructible<std::vector<int>>`（或`std::is_trivially_destructible<std::vector<int>>`），但我得到的只是clang 3.2的崩溃......

另一个更高级的选择是设计一个分配器，它只省略对象的默认构造，这样做是安全的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T15:51:22.910

Fwiw，我认为可以简化设计，假设一个符合 C++11 的容器：

```
template <class T>
class no_init_allocator
{
public:
    typedef T value_type;

    no_init_allocator() noexcept {}
    template <class U>
        no_init_allocator(const no_init_allocator<U>&) noexcept {}
    T* allocate(std::size_t n)
        {return static_cast<T*>(::operator new(n * sizeof(T)));}
    void deallocate(T* p, std::size_t) noexcept
        {::operator delete(static_cast<void*>(p));}
    template <class U>
        void construct(U*) noexcept
        {
            static_assert(std::is_trivially_default_constructible<U>::value,
            "This allocator can only be used with trivally default constructible types");
        }
    template <class U, class A0, class... Args>
        void construct(U* up, A0&& a0, Args&&... args) noexcept
        {
            ::new(up) U(std::forward<A0>(a0), std::forward<Args>(args)...);
        }
}; 
```

1.  我认为从另一个分配器派生的优势不大。

2.  现在你可以让`allocator_traits`句柄了`rebind`。

3.  模板上的`construct`成员`U`。如果您想将此分配器与一些需要分配除 a `T`（例如`std::list`）以外的东西的容器一起使用，这将很有帮助。

4.  将`static_assert`测试移到重要的单个`construct`成员中。

您仍然可以创建一个`using`：

```
template <class T>
using uninitialised_vector = std::vector<T, no_init_allocator<T>>; 
```

这仍然无法编译：

```
unitialised_vector< std::vector<int> > x(10);

test.cpp:447:17: error: static_assert failed "This allocator can only be used with trivally default constructible types"
                static_assert(std::is_trivially_default_constructible<U>::value,
                ^             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
```

我认为测试`is_trivially_destructible`是矫枉过正，除非你也优化`destroy`什么都不做。但我认为没有这样做的动机，因为我相信它应该在适当的时候得到优化。如果没有这样的限制，您可以：

```
class A
{
    int data_;
public:
    A() = default;
    A(int d) : data_(d) {}
};

int main()
{
    uninitialised_vector<A> v(10);
} 
```

它只是工作。但是，如果您`~A()`不重要：

```
 ~A() {std::cout << "~A(" << data_ << ")\n";} 
```

然后，至少在我的系统上，您会收到构造错误：

```
test.cpp:447:17: error: static_assert failed "This allocator can only be used with trivally default constructible types"
                static_assert(std::is_trivially_default_constructible<U>::value,
                ^             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
```

如果Ie`A`有一个非平凡的析构函数，它就不再是平凡可构造的。

但是，即使使用非平凡的析构函数，您仍然可以：

```
 uninitialised_vector<A> v;
    v.push_back(A()); 
```

这行得通，**只是**因为我没有过度要求一个微不足道的析构函数。执行此操作时，我可以`~A()`按预期运行：

```
~A(0)
~A(0) 
```

# javascript - 将 requirejs 用于模块化游戏引擎

> ID：15967294
> 
> 赞同：1
> 
> 时间：2013-04-12T09:08:50.580
> 
> 标签：javascript, requirejs, game-engine

我是一位经验丰富的 javascript 程序员，我正在尝试从头开始编写自己的模块化游戏引擎。我以前没有使用过requirejs，但是在阅读了一些内容之后，听起来它可能是管理引擎所有组件并将它们加载到一个连贯结构中的最佳方式。

我的主要问题是我不确定如何真正使用requirejs。我一直在查看他们的 API 文档，但我不确定如何将它与我的项目布局方式集成。

目前，我的项目使用以下结构：

> *   源代码
>     *   engine.js *//这包含通用引擎的东西，最显着的引擎命名空间*
>     *   资源
>         *   resource-module.js *//这是模块构造函数，它处理不同子结构之间的所有常见东西*
>         *   sprites.js *//这是一个包含精灵加载代码的子结构*
>     *   使成为
>     *   ETC...
>     *   第三者
>         *   jQuery
>         *   需要js

我希望能够彼此独立地加载模块。例如，应该可以从引擎中移除音频模块，它仍然可以工作。替换模块或添加新模块也应该很容易。

另外，我使用 jQuery 进行事件处理，因此需要在引擎启动之前加载它。

你可以在这里找到我当前的来源：[https ://github.com/superlinkx/lithium-engine](https://github.com/superlinkx/lithium-engine)

我知道当前的代码很混乱，而且还没有构建很多，但我主要还是在弄清楚如何最好地构建它。任何帮助/建议将不胜感激，但我主要关心的是如何使用 requirejs 构建它，以便更容易编译成单个文件以供生产使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T09:36:43.820

Require.js 不强制执行您的文件的任何特定结构。您可以在 require 配置中指定完整路径，也可以在 require() 或 define() 调用中使用完整路径。两者都可以，但是后者会为您节省一些打字时间，并且当您包含来自许多不同地方的内容时，可以更轻松地移动内容：

```
var $ = require("third-party/jquery"); 
```

 **```
require.config({
    paths: {
        "jquery": "third-party/jquery"
    }
});
var $ = require("jquery"); 
```

> 我希望能够彼此独立地加载模块。例如，应该可以从引擎中移除音频模块，它仍然可以工作。替换模块或添加新模块也应该很容易。

这不是 require.js 做的四个你。您可以决定何时以及何时不加载它，但您必须确保它不会破坏您的其余代码。

> 另外，我使用 jQuery 进行事件处理，因此需要在引擎启动之前加载它。

您可以通过几种不同的方式执行此操作。

*   require() 它在你的 main.js 中，以便它总是被加载（你也可以使用包含 jQuery 的 require-jquery.js）。
*   将 jQuery 指定为引擎的依赖项

 **```
require.config({
    paths: {
        "jquery": "path.to.jquery",
        "engine": "path.to.engine"
    },
    shim: {
        "engine": {
            "deps": ["jquery"]
        }
    }
}); 
```

*   将 jQuery 传递给模块中的 define() 调用（可能是最佳选择）

 **```
define(["jquery"], function ($) {
    // your engine code
} 
```******

# wordpress - Wordpress 单击链接会终止会话

> ID：15967297
> 
> 赞同：0
> 
> 时间：2013-04-12T09:08:56.087
> 
> 标签：wordpress, zend-framework, session

我有使用 wordpress 的网站，并且也在使用 Zend 框架。

当我单击 wordress 中的链接时，当指向 zend 框架时，它会删除我的会话。

这可能是什么原因？

斯蒂芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:24:12.613

[这里](http://www.thinkingoutloud.co.za/content/20091012/php_wordpress_and_session)有一个关于 WordPress 如何取消设置会话变量的解释，以及一个可能的解决方案。不幸的是，它似乎需要修改核心文件 - 似乎没有任何挂钩`wp_unregister_GLOBALS`会有所帮助。

[关于这个问题](https://stackoverflow.com/questions/1441240/wordpress-session-management)有更多的讨论。

# php - 对具有不可预测键的多维数组求和

> ID：15967298
> 
> 赞同：0
> 
> 时间：2013-04-12T09:09:01.330
> 
> 标签：php, arrays, sum

我有这个客户的多维数组（如果这就是所谓的），客户内部是他的物品，以及这些物品的费用。但是，我需要从物品中获取所有费用并将它们相加为客户。 **数组结构**

```
 Array
    (
        [6bb728] => Array
            (
                [TitleName] => Sir Isaac
                [Surname] => Newton
                [sum] =>
                [id] => 6bb728
                [items] => Array
                    (
                        [29] => Array
                            (
                                [AssignedTo] => 6bb728
                                [Number] => 03-014
                                [MFee] => 103.5
                            )

                    )

            ) 
```

sum 键应包含项目费用的总和。这让我想到了我的问题：是否有任何有效的方法来获取多维数组中存在的一个键的总和？

我尝试了四次 foreach，它使我的计算机进入循环（有数百个客户，它必须做很多循环）

```
foreach($customers as $value) {
    foreach($value as $value1){
        foreach($value1['items'] as $value2) {
            foreach($value2 as $value3) {
                $customers[$value3['AssignedTo']]['Fee'] += $value3['MFee'];
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:18:08.260

看起来你可以把它减少到：

```
foreach($customers as $customer) {
    foreach($customer['items'] as $item) {
        $customers[$item['AssignedTo']]['Fee'] += $item['MFee'];
    }
} 
```

**编辑：**实际上，您也可以使该分配变得不那么混乱：

```
$customer['Fee'] += $item['MFee']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:09:35.727

`multiple loops`在遍历客户时使用而不是嵌套循环。

例如：

```
<?php
$input_array = array('a' => 'aaa', 'b' => 'bbb', 'c' => 'ccc', 'd' => 'dddd', 'e' => 'eeee');

//chunks of size 2
$my_array_chunks = array_chunk($input_array, count($input_array) / 2, true);
?> 
```

//形成的数组块

```
Array
(
  [0] => Array
        (
            [a] => aaa
            [b] => bbb
        )

    [1] => Array
        (
            [c] => ccc
            [d] => dddd
        )

    [2] => Array
        (
            [e] => eeee
        )

) 
```

划分为多个循环

```
<?php
foreach(my_array_chunks[0] as $val){
   //code here
}
foreach(my_array_chunks[1] as $val){
      //code here
}

foreach(my_array_chunks[2] as $val){
     //code here
} 
```

[为什么一个循环比两个循环慢这么多？](https://stackoverflow.com/questions/8547778/why-is-one-loop-so-much-slower-than-two-loops)

# mysql - 插入不能在最新的 xampp 上工作

> ID：15967300
> 
> 赞同：0
> 
> 时间：2013-04-12T09:09:09.863
> 
> 标签：mysql

`$query = "INSERT INTO $stats_table_name (name, name_ID, anz_aufruf) VALUES ($plan_name, $plan_nr, $anz)"; echo "<br />".$query."<br />"; if (!mysql_query($query) && !$error) { die (mysql_error()); }`

mysql-error 告诉我：

```
INSERT INTO 'p_stats' ('name', 'name_ID', 'anz_aufruf') VALUES ('Laptop 1', '1', '95')
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''p_stats' ('name', 'name_ID', 'anz_aufruf') VALUES ('Laptop 1', '1', '95')' at line 1 
```

这里的代码哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:11:28.420

错误是表名周围的单引号引起来。

表名和列名都是标识符。如果名称是带有反引号的保留关键字（*如果不是，则可选*），它们应该被换行。单引号用于字符串文字。

*   [MySQL - 何时使用单引号、双引号和反引号？](https://stackoverflow.com/questions/11321491/mysql-when-to-use-single-quotes-double-quotes-and-backticks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:17:35.473

用这个。

```
$query = "INSERT INTO $stats_table_name (name, name_ID, anz_aufruf) 
          VALUES ('".$plan_name."', '".$plan_nr."', '".$anz."')"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-06-05T10:51:22.167

```
$query = "INSERT INTO $stats_table_name (name, name_ID, anz_aufruf) 
          VALUES ('".$plan_name."', '".$plan_nr."', '".$anz."')"; 
```

# c - c中的字符比较？

> ID：15967302
> 
> 赞同：0
> 
> 时间：2013-04-12T09:09:15.980
> 
> 标签：c, string, char

我正在尝试以下代码来尝试查找 char 数组中是否有逗号后跟分号。这是我的代码

```
char m[80];
char *p = m;

while(p!=pend)
{
    char *pend = m + strlen(m);  
    int i=0;

    if(*p!=',' || *p!=';')
    {
        printf("DDD");
        char temp[2];
        temp[0] = *p;
        temp[1] = '\0';
        strcat( m2, temp );
    }
    else if(*p==',' && (*(p+1)==';'))
    {
        printf("CCC");
        char temp[2];
        temp[0] = *p;
        temp[1] = '\0';
        strcat( m2, temp );
    }
} 
```

但问题是，即使输入是，例如**12,;3**，它也永远不会进入“else if”部分。我能做些什么呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:12:19.203

它不会进入该`else`部分，因为该`if`部分始终评估为真（*任何*字符都不等于`','`或不等于`';'`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T09:12:26.560

```
if(*p!=',' || *p!=';') 
```

将永远为真（`*p`不能*同时为* `','`and `';'`）。由于第一个`if`始终为真，因此`else if`永远不会评估以下内容。

我不确定您要对第一个`if`块做什么。也许最简单的“修复”就是删除代码的那一部分。

# sql - 过滤左连接sql

> ID：15967308
> 
> 赞同：1
> 
> 时间：2013-04-12T09:09:39.037
> 
> 标签：sql, tsql

我有这个 sql 查询：

```
SELECT Customer.IDCustomer, Customer.Name,
Sign.IdSign, Sign.Name, Sign.Delete
FROM Customer
LEFT JOIN  Sign_Customer ON Sign_Customer.IDCustomer=Customer.IDCustomer 
     AND  ( SELECT CAST(CASE WHEN S_C.Delete=0 OR S_C.Delete is Null THEN 1 ELSE 0 END AS BIT )
            FROM Sign AS S_C
            WHERE S_C.IdSign=Sign_Customer.IdSign)=1
LEFT JOIN Sign ON Sign.IdSign=Sign_Customer.IdSign

ORDER BY Customer.Name 
```

此查询工作正常，但我想知道它是否存在另一种方法来过滤我的第一个左连接而不使用 SELECT CAST... 条件。

* * *

## 更新

抱歉，我没有解释我想要的结果：

*   我所有的客户都没有签名
*   我所有启用签名的客户

如果不存在启用标志，则禁用标志的客户不会出现或显示为“无标志”。

示例：我的客户表

```
IDCustomer   | Name
1            | Customer 1
2            | Customer 2
3            | Customer 3
4            | Customer 4 
```

签收客户：

```
IDCustomer   | IdSign
1            | 1
3            | 2
3            | 3
3            | 5
4            | 4 
```

符号

```
IdSign       | Name         | Delete
1            | Sign1        | 0
2            | Sign2        | 1
3            | Sign3        | 0
4            | Sign4        | 1
5            | Sign5        | 0 
```

结果

```
Customer.IDCustomer | Customer.Name  | Sign.IdSign | Sign.Name | Sign.Delete
1                   | Customer 1     | 1           | Sign1     | 0
2                   | Customer 2     | null        | null      | null
3                   | Customer 3     | 3           | Sign3     | 0
3                   | Customer 3     | 5           | Sign5     | 0
4                   | Customer 4     | null        | null      | null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T23:13:09.470

下面的呢？

```
 SELECT Customer.IDCustomer
        , Customer.Name
        , Sign.IdSign
        , Sign.Name
        , Sign.Delete
     FROM Customer
LEFT JOIN Sign_Customer
     JOIN Sign
       ON Sign_Customer.IdSign = Sign.IdSign
      AND Sign.Delete = 0
       ON Customer.IDCustomer = Sign_Customer.IDCustomer
 ORDER BY Customer.NAME; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:24:44.603

```
SELECT Customer.IDCustomer, Customer.Name, Sign.IdSign, Sign.LibEnseigne, Sign.Delete
FROM Customer
LEFT JOIN  Sign_Customer ON Sign_Customer.IDCustomer=Customer.IDCustomer 
LEFT JOIN Sign ON Sign.IdSign=Sign_Customer.IdSign
AND (S_C.Delete=0 OR S_C.Delete is Null)
ORDER BY TEnseigne.NomEnseigne, Customer.Name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T03:33:10.067

我相信这符合您的标准：

```
SELECT Customer.IDCustomer, Customer.Name,
Sign.IdSign, Sign.Name, Sign.Delete
FROM Customer
LEFT JOIN (
  select Sign_Customer.*
  from Sign_Customer
  join Sign on S_C.IdSign=Sign_Customer.IdSign
  where isnull(S_C.Delete,0) = 0
) Sign_Customer ON Sign_Customer.IDCustomer=Customer.IDCustomer 
LEFT JOIN Sign ON Sign.IdSign=Sign_Customer.IdSign    
ORDER BY Customer.Name 
```

# shell - 带有特定字段出现次数的格式化输出

> ID：15967309
> 
> 赞同：0
> 
> 时间：2013-04-12T09:09:39.803
> 
> 标签：shell, unix, awk

如何将输出格式化为所需的格式：

```
SUBPATH                     DANAME               DMNAME       GROUP        STATE
cciss/c0d0                  cciss/c0d0           -            -            ENABLED
sda                         xiv0_001b            emc000       gicn2db_PRD  ENABLED
sdb                         xiv0_001b            emc000       gicn2db_PRD  ENABLED
sdd                         xiv0_001b            emc000       gicn2db_PRD  ENABLED
sdc                         xiv0_001b            emc000       gicn2db_PRD  ENABLED
sdx                         xiv0_004f            0000         ddrr2db_PRD  ENABLED
sdad                        xiv0_004f            0000         ddrr2db_PRD  DISABLED
sdaa                        xiv0_004f            0000         ddrr2db_PRD  ENABLED
sdu                         xiv0_004f            0000         ddrr2db_PRD  ENABLED
sdaj                        xiv0_005d            0001         gconfdb_PRD  DISABLED
sdag                        xiv0_005d            0001         gconfdb_PRD  ENABLED
sdah                        xiv0_005d            0001         gconfdb_PRD  ENABLED
... 
```

例如，我需要解析这个块并创建如下输出：

```
xiv0_001b has <total_amount> of ENABLED paths and <total_amount> of DISABLED paths.
... 
```

因为每个名称都重复了几次（状态和磁盘名称......）

最好使用`awk`以避免使用`grep`等进行多次解析...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:15:12.620

这是一种方法：

```
$ awk 'NR>1{$5=="ENABLED"?e[$2]++:d[$2]++}END{for(i in e)printf "%s ENABLED %d DISABLED %d\n",i,e[i],d[i]}' file
xiv0_005d ENABLED 2 DISABLED 1
xiv0_004f ENABLED 3 DISABLED 1
cciss/c0d0 ENABLED 1 DISABLED 0
xiv0_001b ENABLED 4 DISABLED 0 
```

根据需要修改`printf`格式。

# c++ - C++ 类中更多结构的复制构造函数

> ID：15967311
> 
> 赞同：0
> 
> 时间：2013-04-12T09:10:00.363
> 
> 标签：c++, constructor

我正在为人们注册程序。

我有类 CRegister：

```
int personCount
int personSize
Person ** persons 
```

结构人

```
char * name
char * surname
Places ** oldPlaces // here is former residence of this person 
```

并构造 oldPlaces

```
char date[11]
char * street
char * city 
```

在每个类/结构中，我都有分配空内存的构造函数，例如，方法添加了添加的人员或位置。

问题是如何实现复制构造函数？

我有这个 CRegister

```
CRegister::CRegister(const CRegister& b):personCount(b.personCount), personSize(b.personSize){
 persons = new Person*[b.personSize];
 personCount = 0;
 personSize = b.personSize;
 for (int i = 0; i < personSize; i++){
     persons[i] = new Person();
     persons[i].addPerson(b.persons[i]->id, b.persons[i]->name, b.persons[i]->surname);
 } 
```

但我也想复制 oldPlaces ......

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:15:41.230

您还应该为数组中的每个人创建一个复制构造函数`Person`并使用它。

```
for (int i = 0; i < personSize; i++)
    persons[i] = new Person(*b.persons[i]); 
```

并复制其中的位置：

```
Person::Person(const Person &b) {
    ...
    // (Note that you will have to do a deep copy for the strings here as well)
    oldPlaces = new Places *[oldPlacesCount];
    for (int i = 0; i < oldPlacesCount; i++)
        oldPlaces[i] = new Places(*b.oldPlaces[i]);
} 
```

然后也许还为`Places`等创建一个复制构造函数。

编辑：是的，您需要添加`oldPlacesCount`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:32:26.520

`std::string`首先，如果您使用and ，问题或多或少会自行解决 `std::vector`。如果您坚持使用指针，则必须自己进行深度复制（以及赋值和析构函数）。在每个对象中，您必须访问所有指针，“克隆”子对象。 *而且* 您必须处理分配失败的情况，这可能会使对象的类型`Person`和`Places`状态不一致。要做到这一点，需要大量的代码和高度的 C++ 专业知识。你不想走那条路。（编写一个有两个指向动态分配内存的原始指针的 C++ 类可能非常复杂。使用 `shared_ptr`or`scoped_ptr`使它更简单，但仍然不像使用`vector`and那样简单`string`。）

## 编辑：

只是为了弄清楚所涉及的内容 `Place`，如果您不使用标准库，以下是所需的内容：

```
struct Place
{
    char date[11];
    char* street;
    char* city;

    Place()
        : street( NULL )
        , city( NULL )
    {
        memset( date, '\0', sizeof( date ) );
    }

    Place( Place const& other )
        : street( NULL )
        , city( NULL )
    {
        memcpy( date, other.date, sizeof( date ) )
        try {
            street = new char[ strlen( other.street ) + 1 ];
            strcpy( street, other.street );
            city = new char[ strlen( other.city ) + 1 ];
            strcpy( city, other.city );
        } catch ( ... ) {
            delete [] street;
            delete [] city;
            throw;
        }
    }

    Place& operator=( Place const& other )
    {
        Place tmp( other );
        memcpy( date, other.date, sizeof( date ) );
        std::swap( street, other.street );
        std::swap( city, other.city );
        return *this;
    }

    ~Place()
    {
        delete [] street;
        delete [] city;
    }
}; 
```

`Person`甚至更复杂，因为您必须将整个数组初始化`oldPlaces`为`NULL`，然后将其初始化为 try 块中的副本，并在出现任何问题时将其删除。

在实践中，如果由于某种原因他或她不能使用标准库，任何有 C++ 经验的人都会做的第一件事是实现 and 的（可能是简化的）版本`std::string`，`std::vector`并使用它们。上面复制构造函数中的尝试块通常表明程序员并不真正了解 C++。上述代码中的所有分配和释放都将包装在一个更小、更原始的类中，每个类最多管理一个动态分配的资源。因此，即使与您所写的内容非常接近，也可能会开发一个`StringPtr`类，并在 Person 等中使用它。类似地，人们会使用一个数组`Person`和一个数组`Place`，而不是指针数组。

我不知道你的老师在多大程度上强加了你的结构，但这*不是*C++ 编程的方式。

# css - 水平对齐文本、div 和 2 个其他 div

> ID：15967312
> 
> 赞同：0
> 
> 时间：2013-04-12T09:10:03.083
> 
> 标签：css, css-float

我有的 ：

```
 <div id="outerDiv" style="margin: 20px;">
                      <div id="innerDiv" style="float: left;">
                          <span>10002</span>

                          <div class="arrow-up" alt='some text' />
                          </br>
                            <div class="arrow-down"/>
                      </div>
                      <div><h3>Text</h3></div>
                      </br>
                      <span>Some plain text
            <br />
                      </span>
                  </div> 
```

除了纯文本的 span 之外，outerdiv 中的所有元素都必须对齐，并浮动到左侧，但我不知道该怎么做。如果我移动一些东西，其他所有东西都会开始在页面上飞来飞去。正确的做法是什么？附上我想要实现的图像：

![在此处输入图像描述](https://i.stack.imgur.com/A3jWD.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:16:33.393

使用这种结构它可以帮助你

```
 <div id="outerDiv" style="margin: 20px;">
      <div id="innerDiv" style="float: left;">
        <span style="float:left; margin-top:15px;">10002</span>
        <div class=" " style="float:left;">
            <div class="arrow-up" alt='some text' /></div>
            <div class="arrow-down"/></div>
        </div>
        <h3 style="float:left;">Text</h3>
<div style="float:none; clear:both"></div>
      </div>  
      </br>
      <span>Some plain text</span>
    </div> 
```

# jquery - 带有数字字段的 jQuery 验证依赖表达式

> ID：15967318
> 
> 赞同：0
> 
> 时间：2013-04-12T09:10:17.693
> 
> 标签：jquery, jquery-validate, numeric

我有这个片段：

```
<input type="checkbox" name="sal_cart" id="sal_cart">
<input type="text" name="sal_unit_price" id="sal_unit_price" class="required"> 
```

sal_unit_price 可以是数字或字符串，但始终是必需的（不能为空）。
到现在为止还挺好。
如果检查了 sal_cart，则 sal_unit_price 必须是数字（不再允许使用字符串）
根据[jQuery Validation dependency-expression](http://docs.jquery.com/Plugins/Validation/Methods/required#dependency-expression)，我把这个：

```
$('#form1').validate({
    rules: {
        sal_unit_price: { number: '#sal_cart:checked' },
    },
    messages: {
        sal_unit_price: { number: 'Please fill in a number' },
    }
}); 
```

但它不起作用：即使未选中该复选框，它仍然说它需要一个数字
请，你能发现这有什么问题吗？

这是一个小提琴：http: [//jsfiddle.net/cWD8j/](http://jsfiddle.net/cWD8j/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:51:13.723

您使用的语法仅适用于所需的规则，对于其他规则，您需要更长的语法，传入带有**参数**和**依赖**属性的对象

[更新的小提琴](http://jsfiddle.net/erUdF/)

```
$('#form1').validate({
    debug: true,
    rules: {
        sal_unit_price: { 
            number: {
                param : true,
                depends: '#sal_cart:checked'
            }
       },
    },
    messages: {
        sal_unit_price: { number: 'Please fill in a number' },
    }
}); 
```

# javascript - 我什么时候应该把我的代码写成一个 jQuery 插件

> ID：15967321
> 
> 赞同：2
> 
> 时间：2013-04-12T09:10:24.787
> 
> 标签：javascript, jquery, jquery-plugins

假设没有其他类似的框架，并忽略 jQuery 依赖的潜在缺陷和潜在的性能开销。

我想知道什么时候应该将一组有凝聚力的 JavaScript 函数编码为 jQuery 插件。当然，这涉及到很多主观性和上下文——也许应该描述一个沿着 jQuery 路径走下去的最重要情况的目录。

我的主要研究领域是：

*   与简单的 JavaScript 对象相比，jQuery 插件结构的好处
*   插件是否最有利于“链接”和在 DOM 级别上操作。也就是说，jQuery 插件是否应该专注于 DOM 操作？
*   也许所有 JavaScript 编码场景都受益于*结构化*代码？正确封装“this”

我对 JavaScript 代码的渴望是： - 标准 - 易于阅读/修改 - 更可预测 - 错误最少（让我们忽略 IDE 和 CoffeeScript 以及其他技术，但请考虑减少人为错误的好处）

希望这个问题的描述足够清晰和狭窄，以便为所有 JavaScript 编码人员在这个非常具体的设计问题上获得一些有用的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-19T05:21:52.920

## **什么是jQuery插件：**

***JQuery 插件***是扩展方法的 JavaScript 等价物***。***让我们看一下插件语法：

```
$.fn.stretch = function(multiple) {
    this.each(function() {
        var $t = $(this);
        $t.height($t.height * multiple);
        $t.width($t.width * multiple);

    });
    return this;
}; 
```

我创建了一个插件，它将通过多次传递选择的元素的高度和宽度相乘。（请注意，这是出于演示目的而将其拍打在一起的）。

```
$('#smallDiv').stretch(2); 
```

该方法`$(this)`对其附加的对象进行操作，并返回一个对象，允许进一步

这是一系列**[JQuery 插件设计模式](http://shichuan.github.io/javascript-patterns/#jquery-plugin-patterns)**的良好指南——一些旨在优化性能，另一些用于互操作性/链接、可变性等。

* * *

## **JQuery 插件的好处：**

**1) 链接**

```
$('#smallDiv').css("background-color", "beige").stretch(2); 
```

**2) 可重用性**

我承认这是一个强迫的例子，但仍然......

```
$('#smallDiv').stretch(2).stretch(1.5); 
```

**3) 范围的模块化**

我们插件内的代码无需担心变量范围。它是完全独立的，仅使用局部变量。

**4) 可读性**

我在这里假设您的插件已适当命名

* * *

## **到 DOM 还是不到 DOM：**

**插件可以在许多方面有用**

我怀疑 90% 的插件都用于 DOM 操作。链接是一个很大的优势。

但是***JQuery***已经有了很多**数组扩展**方法：

```
$.distinct([1, 2, 2, 3])
$.union([1, 2, 2, 3], [2, 3, 4, 5, 5])
$.intersect([1, 2, 2, 3], [2, 3, 4, 5, 5])
$.except([1, 2, 2, 3], [2, 3, 4, 5, 5]) 
```

（全部从 Kristian Abrahamsen [GitHub Repo](https://github.com/KristianAbrahamsen/jquery.arrayUtilities)借来）

**并且存在用于字符串、Cookie 等的插件并且可以/应该考虑**

* * *

## **JQuery插件的缺点：**

**全球并不总是高贵的：**你漂亮的新`stretch()`插件可以用在任何东西上。是好还是坏？你决定。谁应该使用它？谁不应该？应该用在哪些元素上？

如果不想重复使用，就不要创建插件。我敢肯定，您团队中的很多开发人员都太有创意了。

**计划是必须的！**请参阅此 Brolick 博客[开发插件指南](http://brolik.com/blog/how-to-create-a-jquery-plugin/)

在 Brolick 指南和模式参考之间，您会注意到草率的插件开发可能会导致许多错误和问题。其中最常见的是**性能不佳**和**内存泄漏**。两者都被低估了潜在的严重性，并且在插件开发中猖獗且频繁。

# c# - 代码错误

> ID：15967322
> 
> 赞同：-3
> 
> 时间：2013-04-12T09:10:28.490
> 
> 标签：c#, asp.net

```
ProcessStartInfo startInfo = new ProcessStartInfo();

startInfo.FileName = @"c:\windows\system32\rundll32.exe";

startInfo.Arguments = 
@"C:\WINDOWS\System32\shimgvw.dll,ImageView_Fullscreen C:\Users\Sony\Desktop\c.jpg" 
```

我想将图像 URI 指定`(C:\Users\Sony\Desktop\c.jpg)`为字符串变量。那么我必须在 startInfo.Arguments 中进行哪些更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:12:54.433

然后在手之前构建它。

```
string imagePath = "C:\Users\Sony\Desktop\c.jpg"; // or get this value from however you please
string arguments = string.Format("C:\WINDOWS\System32\shimgvw.dll,ImageView_Fullscreen {0}", imagePath);
startInfo.Arguments = arguments; 
```

# python - 通过在 python 中逐字符读取来获取和验证日期

> ID：15967324
> 
> 赞同：-2
> 
> 时间：2013-04-12T09:10:35.790
> 
> 标签：python, date, python-2.5

如何以`MM-DD-YY`格式读取日期并验证为真实日期？

> 我知道使用模块处理它会更容易和更健壮`datetime`- 但这不是我想要的，所以任何使用以下代码的解决方案都值得赞赏：

*   `dataType`= 月-日-年
*   `actualResult`= 12-31-13
*   `rIndex`: 计​​数器变量`actualResult`
*   `rLen`： 的长度`actualResult`

```
def compareDate (dataType, actualResult, rIndex, rLen):
    dateString =  ""
    bhCount , result , count = 0 , 0 , 0
    while (rIndex < rLen):
        ch = actualResult[rIndex]
        print ("Char %c" % ch)
        dateString += str(ch)                   
        if(ch >='0' and ch <= '9'):
            count += 1
            if(count == 2):
                count = 0
                bHyphen = False
            elif(count > 2):
                result = -1
                break
        elif(ch == "-"):            
            bhCount += 1
            if((count == 0) and (bHyphen == False)):
                bHyphen = True                
            else:
                break     
        else:
            break                       
        rIndex += 1

    #print dateString      
    return (result, rIndex) 
```

我做错了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:08:46.640

```
class ValidationError(BaseException):
    pass    

class MyDate(object):
    mounth = int()
    day = int()
    year = int()
    _correct_mounth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]

    def validate(self, day, mounth, year):
        if not 1 <= mounth <= 12:
            raise ValidationError, 'Invalid mounth!'
        if year < 1:
            raise ValidationError, 'Invalid year!'
        if mounth == 2 and not year % 4:
            if not 1 <= day <= 29:
                raise ValidationError, 'Invalid day!'
        else:
            if not 1 <= day <= self._correct_mounth[mounth-1]:
                raise ValidationError, 'Invalid day!'
        return True

    def __init__(self, date):   
        if not isinstance(date, basestring):
            raise ValidationError, 'Not a string!'
        date_parts = date.split('-')
        if not isinstance(date_parts, list) or not len(date_parts) == 3:
            raise ValidationError, 'Can`t change to list with 3 elements!'
        for i in date_parts:
            try:
                int(i)
            except TypeError:
                raise ValidationError, 'Cannot convert to int!'
        mounth = int(date_parts[0])
        day = int(date_parts[1])
        year = int(date_parts[2])
        if self.validate(day, mounth, year):
            self.mounth, self.day, self.year = mounth, day, year

dates = '12-31-13|08-23-12|10-10-13'
unchecked_dates = dates.split('|')
checked_dates = list()
for d in unchecked_dates:
    try:
        new_date = MyDate(d)
    except ValidationError, e:
        print '{0} is invalid date! {1}'.format(d, e)
    else:
        checked_dates.append(new_date)
if len(unchecked_dates) == len(checked_dates):
    print 'All dates are correct.'
else:
    print 'Correct dates: {0}'.format(checked_dates) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T08:03:47.087

> **回答**

```
def compareDate (dataType, actualResult, rIndex, rLen):    
    hyphenCount , result , count = 0 , 0 , 0
    dateString = ""
    while (rIndex < rLen):
        ch = actualResult[rIndex]        
        if (ch == '.'):
            break
        if(ch >= '0' and ch <= '9'):
            hyphenCount = 0
            count += 1            
            if(count > 2):
                result = -1
                print " d = "
                break;            
            dateString += str(ch)
        if(ch == '-'):
            count = 0
            hyphenCount += 1
            if(hyphenCount > 1):
                print " h = "
                result = -1
                break  

        #print ("Char %c" % ch)              
        rIndex += 1
    print "dateString is = %s" % dateString

    if result != -1:
        msg = ""         
        mt = dateString[0] + dateString[1]
        dt = dateString[2] + dateString[3]
        yr = dateString[4] + dateString[5]
        leap = '20'+yr
        print mt, dt, yr
        mt = int(mt)
        dt = int(dt)
        yr = int (yr)
        leap = int(yr)                
        #create and call function which verify date
        result,msg = verifyDate(mt,dt,yr,leap)
        print msg

    return (result, rIndex)

def verifyDate(mt,dt,yr,leap):
    res = 0
    msg = ""
    leapyr = checkForLeapYear(leap) 
    if(yr >= 00 and yr <= 99):
        if(leapyr): # for leap year
            if(mt == 2):
                if(dt >= 01 and dt <= 29):
                    res = 0
                else:
                    msg = "should not exceed 29"
            elif(mt == 1 or mt == 3 or mt == 5 or mt == 7 or mt == 8 or mt == 10 or mt == 12):
                    if(dt >= 01 and dt <= 31):
                        res = 0
                    else:
                        msg = "should not exceed 31"
                        res = -1
            elif(mt == 4 or mt == 6 or mt == 9 or mt == 11):
                    if(dt >= 01 and dt <= 30):
                        res = 0
                    else:
                        msg  = "should not exceed 30"
                        res = -1                
            else:
                    msg  = "month should in btwn 01 to 12"
                    res = -1
            # for leap year ...Ends Here

        else:                
            if((mt >= 1) and (mt <= 12)):
                if(mt == 2):
                    if(dt >= 01 and dt <= 28):
                        res = 0
                    else:
                        msg = "should not exceed 28"
                        res = -1
                elif(mt == 1 or mt == 3 or mt == 5 or mt == 7 or mt == 8 or mt == 10 or mt == 12):
                    if(dt >= 01 and dt <= 31):
                        res = 0
                    else:
                        msg = "should not exceed 31"
                        res = -1
                elif(mt == 4 or mt == 6 or mt == 9 or mt == 11):
                    if(dt >= 01 and dt <= 30):
                        res = 0
                    else:
                        msg  = "should not exceed 30"
                        res = -1                
            else:
                    msg  = "month should in btwn 01 to 12"
                    res = -1

    else:
        msg  = "year should in btwn 00 to 99"
        res = -1
    return (res,msg)   

def checkForLeapYear(yr):
    if((yr %100) == 0 and (yr % 400 == 0 )):
        return True
    elif(yr%4 == 0):
        return True
    else:
        return False 
```

> 我还能用代码做些什么来提高复杂性并减少代码行数。请举例回答..

# drupal - 如何从 Drupal 获取 webform 提交？

> ID：15967335
> 
> 赞同：2
> 
> 时间：2013-04-12T09:11:01.040
> 
> 标签：drupal, drupal-7, drupal-webform

我已经安装了模块`Services`, `Services Entity`, `Services Entity Reference`, `REST Server`. 我的终点是`api`，我已经`webform`打电话了`Feedback`。我可以检索`webform`调用 URL `http://mysite/api/entity_node/999.json`。但我不知道如何从 API 获取提交`http://mysite/node/999/webform-results`。有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T12:10:48.117

看看这个链接[https://drupal.org/project/webform_service](https://drupal.org/project/webform_service)。

然后可以通过 -

```
/api/webform/[webform_uuid]/submissions 
```

# java - 如何识别哪个jsp文件调用了哪个servlet

> ID：15967337
> 
> 赞同：1
> 
> 时间：2013-04-12T09:11:16.277
> 
> 标签：java, jsp, servlets

我有一个类似的 URL 模式`webroot/TellSomeoneMail`和相应的类，

```
<servlet>
      <servlet-name>TellSomeoneMail</servlet-name>
      <display-name>Tell Someone Mail</display-name>
      <servlet-class>com.nightingale.register.servlet.TellSomeoneMailServlet</servlet-class>
 </servlet> 
```

但是如何识别调用这个 servlet 的 JSP 文件呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:14:22.527

您可以通过查看 HTTP 正文中的 referer 标头在执行期间识别到我们的 servlet：

```
String referrer = request.getHeader("referer"); 
```

**编辑 1**：您还可以使用 session 来保留用户访问的最后一个 url（这种机制已经存在于 grails 或 Spring 等框架中的“flash”属性下，不要与 adobe flash 混淆）。如果你使用简单的 Servlet/JSP，你需要编写这样的支持代码...

**编辑 2**如果 cookie 和裁判被阻止，最后的解决方案是在 URL 中添加一个参考最后一页的参数，例如，`URL?from=home_pg`或者`URL?from=/homepage.html`它可能需要重写页面中嵌入的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:15:44.297

您可以获取发送请求的 URL。看看下面的代码

```
if (request instanceof HttpServletRequest) {
    String url = ((HttpServletRequest)request).getRequestURL().toString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:47:49.203

要查找允许用户向您的 servlet 发出请求的 JSP 页面： 检查 servlet`<servlet-mapping>`在 web.xml 的元素中映射的路径。

然后在您的项目中的所有 JSP 上对该字符串进行全文搜索。查找目标包含您的 servlet 路径的 HTML`<a>`和元素。`<form>`

# android - Android App教程不起作用

> ID：15967339
> 
> 赞同：0
> 
> 时间：2013-04-12T09:11:27.637
> 
> 标签：android, eclipse

我是安卓新手。当我尝试在 ADT 中编译 helloworld 程序时，出现以下错误：

> > [2013-04-12 13:36:40 - 你好] /var/www/html/android/adt-bundle-linux-x86_64-20130219/sdk/platform-tools/aapt：加载共享库时出错：libz.so .1：无法打开共享对象文件：没有这样的文件或目录。

我使用的操作系统：**centos 64 位**

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:53:26.893

从这里下载 ide：http: [//developer.android.com/sdk/index.html#download](http://developer.android.com/sdk/index.html#download,and) ，并选择 64-bit

# scala - 隐式参数未传递给高阶函数

> ID：15967341
> 
> 赞同：1
> 
> 时间：2013-04-12T09:11:36.453
> 
> 标签：scala, playframework-2.0, implicit

我有一个函数可以在 Future 中包装对 Anorm 的 SQL 函数的调用：

```
def sqlWithFuture[T](sql: => T) = Future(DB.withConnection(con => sql)) 
```

在模型中使用它：

```
def userQuery = sqlWithFuture(SQL("select init()").as(...)) 
```

产量：

“找不到参数连接的隐式值：java.sql.Connection”

有什么方法可以将隐式连接参数（con）拉回范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:18:48.757

我假设您正在使用 Play 2.0。

让我们看看 DB [http://www.playframework.com/documentation/api/2.0/scala/play/api/db/DB](http://www.playframework.com/documentation/api/2.0/scala/play/api/db/DB) $.html

```
def
withConnection [A] (block: (Connection) ⇒ A)(implicit app: Application): A 
```

执行一段代码，提供 JDBC 连接。连接和所有创建的语句都会自动释放。

SQL 对象让您创建 anorm.SqlQuery ：[http ://www.playframework.com/documentation/api/2.0/scala/index.html#anorm.SqlQuery](http://www.playframework.com/documentation/api/2.0/scala/index.html#anorm.SqlQuery)

```
def as [T] (parser: ResultSetParser[T])(implicit connection: Connection): T 
```

所以这里的问题在于你的签名：

```
def sqlWithFuture[T](sql: => T) = Future(DB.withConnection(con => sql)) 
```

没有说应该将连接传递给 sql 块。

```
def sqlWithFuture[T](sql: Connection => T) = Future(DB.withConnection(con => sql(con)) 
```

# c - 循环 (char *c, ...)

> ID：15967344
> 
> 赞同：1
> 
> 时间：2013-04-12T09:11:47.797
> 
> 标签：c

我是 C 新手，我需要遍历例程的参数：

```
void doSmth(char *c, ...) { //how to print all the elements here? } 
```

由于我来自 Java，这对我来说很新，我不知道如何在 C 中做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T09:27:13.083

因为你的函数声明是这样的：

`void doSmth(char *c, ...);`

您需要的是可变数量的参数函数，您可以阅读：[9.9。可变数量的论点](http://publications.gbdirect.co.uk/c_book/chapter9/stdarg.html)是一个很好的论文教程

带有函数 doSmth()*的示例代码有 4 个步骤，请阅读注释*：

```
//Step1: Need necessary header file
#include <stdarg.h>     
void doSmth( char* c, ...){   
    va_list ap;  // vlist variable
    int n;       // number 
    int i;
    float f;     

   //print fix numbers of arguments
   printf(" C: %s", c);

   //Step2: To initialize `ap` using right-most argument that is `c` 
    va_start(ap, c); 

   //Step3: Now access vlist `ap`  elements using va_arg()
     n = va_arg(ap, int); //first value in my list gives number of ele in list 
     while(n--){
       i = va_arg(ap, int);
       f = (float)va_arg(ap, double); //notice type, and typecast  
       printf("\n %d %f \n", i, f);
    }

    //Step4: Now work done, we should reset pointer to NULL
    va_end(ap); 
}
int main(){
    printf("call for 2");
    doSmth("C-string",  2,    3,   6.7f,  5,   5.5f);
        //              ^ this is `n` like count in variable list 
    printf("\ncall for 3");
    doSmth("CC-string", 3,  -12, -12.7f,-14, -14.4f, -67, -0.67f);
         //             ^ this is `n` like count in variable list
    return 1;
} 
```

它运行如下：

```
:~$ ./a.out 
call for 2 C: C-string
 3 6.700000 
 5 5.500000 

call for 3 C: CC-string
 -12 -12.700000 
 -14 -14.400000 
 -67 -0.670000 
```

[在 C 中，事情实际上是固定数量的参数，后跟可变数量的参数]

# sql - 从用户定义的函数返回一个表

> ID：15967345
> 
> 赞同：1
> 
> 时间：2013-04-12T09:11:49.310
> 
> 标签：sql, sql-server, user-defined-functions

```
CREATE FUNCTION dbo.ta_OTMultiplierstest (@id int)
RETURNS nvarchar (100)
AS
BEGIN
DECLARE @text nvarchar(100)
set @text = ( SELECT  CONVERT(nvarchar(5), b.Duration), CONVERT(nvarchar(5),b.Mon),     CONVERT(nvarchar(5), b.Tue), CONVERT(nvarchar(5), b.Wed),
            CONVERT(nvarchar(5), b.Thu), CONVERT(nvarchar(5), b.Fri), CONVERT(nvarchar(5), b.Sat), CONVERT(nvarchar(5), b.Sun),
            CONVERT(nvarchar(5), b.DayOff), CONVERT(nvarchar(5), b.Holiday), CONVERT(nvarchar(5), b.Yearly),
            CONVERT(nvarchar(5), b.Maternity), CONVERT(nvarchar(5), b.Other)

            FROM ta_GenPolOTMultiplier b  WHERE b.PolHistID = @id 
            Group By b.Duration)--, b.Mon, b.Tue, b.Wed, b.Thu, b.Fri, b.Sat, b.Sun, b.DayOff, b.Holiday, b.Yearly, b.Maternity, b.Other)

return @text
END 
```

我收到此错误“当 EXISTS 未引入子查询时，选择列表中只能指定一个表达式”我知道我不能返回多个字段我只需要知道如何解决这个问题？我需要在存储过程中返回此函数并获取所有这些值的表

我很感激任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:24:30.667

您需要像这样连接文本部分：

```
set @text = ( SELECT  CONVERT(nvarchar(5), b.Duration) + CONVERT(nvarchar(5),b.Mon) ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:32:03.393

您可以使用“单语句表值函数”来执行此操作，如下所示：

```
CREATE FUNCTION dbo.ta_OTMultiplierstest (@id int)
RETURNS TABLE
AS
RETURN
    SELECT  
         CONVERT(nvarchar(5), b.Duration)
        , CONVERT(nvarchar(5),b.Mon)
        , CONVERT(nvarchar(5), b.Tue)
        , CONVERT(nvarchar(5), b.Wed)
        , CONVERT(nvarchar(5), b.Thu)
        , CONVERT(nvarchar(5), b.Fri)
        , CONVERT(nvarchar(5), b.Sat)
        , CONVERT(nvarchar(5), b.Sun)
        , CONVERT(nvarchar(5), b.DayOff)
        , CONVERT(nvarchar(5), b.Holiday)
        , CONVERT(nvarchar(5), b.Yearly)
        , CONVERT(nvarchar(5), b.Maternity)
        , CONVERT(nvarchar(5), b.Other)
    FROM dbo.ta_GenPolOTMultiplier b  WHERE b.PolHistID = @id 
    Group By b.Duration 
```

这将为您提供一个可以在您的过程中使用或加入的表。

如果您需要单个连接字符串，请参阅 Ackroydd 的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:24:44.463

试试这个——

```
CREATE FUNCTION dbo.ta_OTMultiplierstest (@id int)
RETURNS @Result TABLE 
(
    Duration nvarchar(5),
    Mon nvarchar(5),
    Tue nvarchar(5),
    Wed nvarchar(5),
    Thu nvarchar(5),
    Fri nvarchar(5),
    Sat nvarchar(5),
    Sun nvarchar(5),
    DayOff nvarchar(5),
    Holiday nvarchar(5),
    Yearly nvarchar(5),
    Maternity nvarchar(5),
    Other nvarchar(5)
) 
AS
BEGIN

    INSERT INTO @Result 
    (
        Duration, 
        Mon,
        Tue,
        Wed,
        Thu,
        Fri,
        Sat,
        Sun,
        DayOff,
        Holiday,
        Yearly,
        Maternity,
        Other
    ) 
    SELECT  
         CONVERT(nvarchar(5), b.Duration)
        , CONVERT(nvarchar(5),b.Mon)
        , CONVERT(nvarchar(5), b.Tue)
        , CONVERT(nvarchar(5), b.Wed)
        , CONVERT(nvarchar(5), b.Thu)
        , CONVERT(nvarchar(5), b.Fri)
        , CONVERT(nvarchar(5), b.Sat)
        , CONVERT(nvarchar(5), b.Sun)
        , CONVERT(nvarchar(5), b.DayOff)
        , CONVERT(nvarchar(5), b.Holiday)
        , CONVERT(nvarchar(5), b.Yearly)
        , CONVERT(nvarchar(5), b.Maternity)
        , CONVERT(nvarchar(5), b.Other)
    FROM dbo.ta_GenPolOTMultiplier b  WHERE b.PolHistID = @id 
    Group By b.Duration

    RETURN

END 
```

# java - 将数据库从本地导入到模拟器，反之亦然，用于 SQLite (Eclipse)

> ID：15967360
> 
> 赞同：3
> 
> 时间：2013-04-12T09:12:46.803
> 
> 标签：java, android, database, sqlite, import

我正在开发一个 android 项目（Eclipse java - Emulator 5554 - SQLite）。

但我不知道如何导入或导出数据库。请先看下面的代码

代码段1：（此代码段在android设备按钮的onClick方法中）

```
 public void onClick(View v) 
    {               SQLiteDatabase db =  openOrCreateDatabase("EOS_DB_TRY_OUT", SQLiteDatabase.CREATE_IF_NECESSARY, null);

            DatabaseConnector dbConnector = new DatabaseConnector(getBaseContext(), DB_NAME, null,1);
            dbConnector.onCreate(db);

// private static String DB_PATH = "assets/database/eosdatabase.zip";
    //private static String DB_NAME = "eosdatabase.db";  these are global variables in //class...

    } 
```

代码段 2：这是我尝试创建的另一个类（或使用现有的，如果存在）并连接

```
public class DatabaseConnector extends SQLiteOpenHelper {

public DatabaseConnector(Context context, String name,
        CursorFactory factory, int version) {
    super(context, name, factory, version);

}

@Override
public void onCreate(SQLiteDatabase db) {
    System.out.println("On create works");

            try {
                db.execSQL("DROP TABLE IF EXISTS actuator;");
                db.execSQL("CREATE TABLE IF NOT EXISTS actuator ("+
                        "ACTUATOR_ID INT NOT NULL,"+
                        "ACTUATOR_HW_ID int(11) DEFAULT NULL,"+
                        "DEVICE_NAME TEXT(45) DEFAULT NULL,"+
                        "DEVICE_TYPE TEXT(45) DEFAULT NULL,"+
                        "DEVICE_SUB_TYPE TEXT(45) DEFAULT NULL,"+
                        "LOCATION_ID INT(11) DEFAULT NULL,"+
                        "STATUES_VALUE REAL DEFAULT NULL,"+
                        "MAX_STATUES_VALUE REAL DEFAULT NULL,"+
                        "MIN_STATUES_VALUE REAL DEFAULT NULL,"+
                        "PRIMARY KEY (`ACTUATOR_ID`))");

                System.out.println("table created now values will be added");

            } catch (SQLException e) {

                System.out.println("table is not created");
            }

            try {

                db.execSQL("INSERT INTO actuator (ACTUATOR_ID, ACTUATOR_HW_ID, DEVICE_NAME, DEVICE_TYPE, DEVICE_SUB_TYPE, LOCATION_ID, STATUES_VALUE, MAX_STATUES_VALUE, MIN_STATUES_VALUE) " +
                        "VALUES (4,2, 'Heat Sensor FX615','Heat Sensor', 'Optic Heat Sensor', 4, 6, 7, 8) " );
                System.out.println("values are added");
            } catch (SQLiteException e) {

                e.printStackTrace();
                System.out.println("values are not added");
            }

            try 
            {
                Cursor c = db.rawQuery("SELECT LOCATION_ID FROM actuator WHERE ACTUATOR_ID = 4", null);
                if (c != null && c.moveToFirst()) 
                {

                        String berkay = c.getString(0);
                        System.out.println(berkay);

                }
                System.out.println("select finished");

            } 
            catch (SQLiteException e) {

                e.printStackTrace();
                System.out.println("not selected");
            } 
```

事情是：

代码工作正常，语法正确，但我昨天在没有任何外部数据库的情况下工作，代码在执行时创建新数据库并在执行后删除它，因为我只是在测试语法。现在代码运行良好，但我不知道代码使用的是哪个数据库。

今天我通过 sqliteadmin 数据库浏览器创建一个数据库，我想在模拟器中使用它（不是创建新数据库并为每次执行删除它，我想要永久数据库）。我不明白这段代码，这段代码是否像我以前一样创建新的并删除它？如果是这样，我如何导入外部数据库并使用它？

注意：我要使用的数据库名称是“eosdatabase”，它的位置是 desktop/databasefolder/database/eosdatabase.zip/eosdatabase.s3db

注意2：将外部数据库导入模拟器数据库文件后，我如何连接该数据库（如果你解决了我的代码问题，我会很高兴不仅将数据库导入模拟器，我需要代码而不是上面的那个）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:20:06.527

**用于将数据库从手机复制到本地系统。**

转到 DDMS -> 文件资源管理器 -> 数据 -> 数据 -> 您的应用程序包名称 -> 数据库。在这里选择要导出到本地系统的数据库，然后转到窗口的右上角，您会找到导出按钮，单击该按钮它将询问目标位置，然后选择位置并按确定。

**用于将数据库从本地系统复制到手机。**

转到 DDMS -> 文件资源管理器 -> 数据 -> 数据 -> 您的应用程序包名称 -> 数据库。然后转到窗口的右上角，您会找到导入按钮，单击该按钮然后它会询问源位置浏览位置选择数据库然后按确定..

# c# - WPF - 交互触发器在列表框中不起作用

> ID：15967363
> 
> 赞同：1
> 
> 时间：2013-04-12T09:12:53.480
> 
> 标签：c#, wpf, xaml

我正在尝试将 SelectionChanged 交互触发器添加到 WPF 中的 ListBox，以便我可以将事件路由到命令，但由于某种原因它不起作用。

这是我的代码

```
<Border Background="Transparent">
  <ListBox Name="MyListBox"
           ScrollViewer.HorizontalScrollBarVisibility="Disabled"
           SelectedValue="A"
           SelectedValuePath="Content">
    <i:Interaction.Triggers>
      <i:EventTrigger EventName="SelectionChanged">
        <i:InvokeCommandAction Command="{Binding MyCommand}"
                               CommandParameter="{Binding ElementName=MyListBox, 
                                                          Path=SelectedIndex}" />
      </i:EventTrigger>
    </i:Interaction.Triggers>
    <ListBox.ItemsPanel>
      <ItemsPanelTemplate>
        <WrapPanel IsItemsHost="True" />
      </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
    <ListBoxItem>A</ListBoxItem>
    <ListBoxItem>B</ListBoxItem>
  </ListBox>
</Border> 
```

我想我在这里做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:48:12.310

您应该只将 SelectedIndex 绑定到 DataContext 中的一个属性，这会导致更简单的代码：

```
<Border Background="Transparent">
    <ListBox Name="MyListBox" 
             ScrollViewer.HorizontalScrollBarVisibility="Disabled" 
             SelectedValue="A" SelectedValuePath="Content"
             SelectedIndex="{Binding MyIndexProperty}">
           <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
               <WrapPanel IsItemsHost="True" />
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
        <ListBoxItem >A</ListBoxItem>
        <ListBoxItem >B</ListBoxItem>
    </ListBox>
</Border> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:00:18.257

您的代码工作正常。您只需要提供一个合适的视图模型，例如

注意：使用 MVVM Light

```
public class TestViewModel : ObservableObject
{
    public TestViewModel()
    {
        this.MyCommand = new RelayCommand<int>(i => Debug.WriteLine(i));
    }

    public RelayCommand<int> MyCommand { get; private set; }
} 
```

带有硬编码视图模型的 Xaml

```
<Window.DataContext>
    <my:TestViewModel/>
</Window.DataContext>
<Border Background="Transparent">
    <ListBox Name="MyListBox" 
    ... etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-12T16:32:34.473

```
 // This is a property on a GalaSoft MVVMLIght ViewModel

    /// <summary>
    ///   ThemeInfo of the current active theme
    /// </summary>
    public String ActiveTheme
    {
        get
        {
            if (activeTheme == null)
            {
                activeTheme = Properties.Settings.Default.Default_App_Theme;
            }
            return activeTheme;
        }
        set
        {
            if (activeTheme == value)
            {
                return;
            }

            var oldValue = activeTheme;

            activeTheme = value;

            // Update bindings

            RaisePropertyChanged(ActiveThemePropertyName,    oldValue, value, true);

            if (value != null)
            {

                     if (this.SwitchThemeCommand.CanExecute(value))
                        this.SwitchThemeCommand.Execute(value); 
            }
        }
    } 
```

# jsf-2 - 尝试从 JSF2.0 中的 web.xml 访问参数时获取 null

> ID：15967368
> 
> 赞同：0
> 
> 时间：2013-04-12T09:13:05.740
> 
> 标签：jsf-2, primefaces

我在其中定义了一个参数`web.xml`，`uploadDirectory`我试图从其中一个中获取`ManagedBean`。下面是片段`web.xml`——

```
<!-- Primefaces file upload -->
<!-- thresholdSize specifies the maximum file size in bytes to keep uploaded 
    files in memory. If it exceeds this limit, it’ll be temporarily written to 
    disk. -->
<!-- uploadDirectory is the folder where to keep temporary files that exceed 
    thresholdSize. -->
<filter>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
    <init-param>
        <param-name>thresholdSize</param-name>
        <param-value>51200</param-value>
    </init-param>
    <init-param>
        <param-name>uploadDirectory</param-name>
        <param-value>/opt/upload/</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

下面是片段`ManagedBean`——

```
@ManagedBean
@ViewScoped
public class ProjectInfo implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    private static final String destination = FacesContext.getCurrentInstance()
            .getExternalContext().getInitParameter("uploadDirectory"); 
```

为什么我越来越`null`像`destination`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:23:18.007

您定义的参数是过滤器的参数，因此它们在您的托管 bean 中不可用。例如，您可以将此过滤器子类化并添加将此参数置于请求范围内的代码，并从托管 bean 中读取此参数，或者如果您想从托管 bean（其请求未被此过滤器过滤）访问此参数，请定义他们作为`<context-param>`.

# php - ajax-php 星级评分系统（只显示来自 mysql 数据库的平均日期）

> ID：15967369
> 
> 赞同：2
> 
> 时间：2013-04-12T09:13:05.777
> 
> 标签：php, javascript, ajax

我需要一个评级系统，它显示 php 中的平均评级。我完成了评级过程（保存和更新过程）。我只需要在 php 中显示平均评分（使用 php-Ajax 评分系统）。

当我从数据库中检索数据时，我遇到了错误。代码是这样的：

```
<?php
    $con = mysql_connect("localhost","root","");
    if(!$con){
        echo "Connection to the Database Console was Unsuccessful";
    }
    $select = mysql_select_db("oilandgas13",$con);
    if(!$select){
        echo "Connection to the Database was Unsuccessful";
    }

$add_coun= "SELECT sum(rating) sum, count(id) count from comments WHERE item_id = $itemID AND status=1";

        $result = mysql_query($add_coun,$con);
        if(!$result)
        {
        echo "query was not successfully";  
        }

        $result = mysql_fetch_object($result);

        $sum = $result->sum;
        $count = $result->count;
        $rating = $sum / $count;

        echo $rating;
?> 
```

我收到这样的错误：

> 警告：mysql_fetch_object()：提供的参数不是第 19 行 C:\wamp\www\final work_apr51\final work_apr51\calculation.php 中的有效 MySQL 结果资源

> 警告：第 23 行 C:\wamp\www\final work_apr51\final work_apr51\calculation.php 中除以零

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:53:29.987

也许这可以帮助你？

```
 $link = mysqli_connect("localhost","mysqlusername","mysqlpassword","dbname");
    $rating = mysql_real_escape_string($_GET['id']);
    $q = mysqli_query($link,"SELECT * FROM ratings WHERE id='{$rating}'"); //Get our ratings by the page that has rated

    //Die if id dont exist!
    if(mysqli_num_rows($q) == 0) die("Wrong page id!");

    //Select good & bad ratings
    $good = mysqli_query($link,"SELECT * FROM ratings WHERE id='{$rating}' AND value ='yes'");
    $bad = mysqli_query($link,"SELECT * FROM ratings WHERE id='{$rating}' AND value ='no'");

    //Count good & bad ratings
    $gcnt = mysqli_num_rows($good);
    $bcnt = mysqli_num_rows($bad);

    //Calculate
    $totalVotes = $gcnt + $bcnt;

    if($totalVotes == 0){
      echo $totalVotes." votes";
    }
    if($totalVotes > 0){
      echo "<font color='green'>".$totalVotes." votes</font>";
    }
    if($totalVotes < 0){
      echo "<font color='red'>".$totalVotes." votes</font>";
    } 
```

# javascript - 在动态添加的控件中按 id 查找元素

> ID：15967372
> 
> 赞同：0
> 
> 时间：2013-04-12T09:13:19.543
> 
> 标签：javascript, asp.net, getelementbyid

我有一个asp页面，我在其中动态添加了一个我创建的控件（多次）。在该控件中，我有密码和用户名的文本框和一个还原按钮。

我在该控件中使用此 javascript 代码，但它失败了：

```
function HandlePasswordChanged() {
    document.getElementById("<%=btnRevert.ClientID %>").disabled = false;
}
function HandleUserChanged() {
    document.getElementById("<%=btnRevert.ClientID %>").disabled = false;
    document.getElementById("<%=txtPassword.ClientID %>").disabled = false;
}
function btnRevertClick() {
    document.getElementById("<%=btnRevert.ClientID %>").disabled = true;
    document.getElementById("<%=txtPassword.ClientID %>").disabled = true;
    document.getElementById("<%=txtUsername.ClientID %>").value = document.getElementById("<%=systemAccount.ClientID %>").value;
    document.getElementById("<%=txtPassword.ClientID %>").value = "";
} 
```

它的作用是当我按下一个控件上的恢复按钮时，它会禁用另一个控件上的文本框 - getelement 无法找到正确的文本框。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:18:35.853

如果您正在使用 .net 4.0：

您可以`ClientIDMode="Static"`为您动态添加的控件进行设置。此外，您必须确保为控件设置唯一的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T07:21:50.727

我设法找到了解决方案。

问题是每次我用 javascript 代码添加 acsx 控件时，它都会添加多个同名但内部不同的函数。当一个控件想要调用它的“自己的”函数时，它只使用第一个，因为它们的名称都相同。

我的解决方案是从此更改功能：

```
function HandleUserChanged() {
    document.getElementById("<%=btnRevert.ClientID %>").disabled = false;
    document.getElementById("<%=txtPassword.ClientID %>").disabled = false;
} 
```

对此：

```
function HandleUserChanged(btnRevertId, txtPasswordId, cellPasswordId) {
    document.getElementById(btnRevertId).disabled = false;
    document.getElementById(txtPasswordId).disabled = false;
} 
```

然后在 c# 代码中添加：

```
txtUsername.Attributes.Add("onchange", "HandleUserChanged(\"" + btnRevert.ClientID + "\", \"" + txtPassword.ClientID + "\", \"" + cellPassword.ClientID + "\")"); 
```

这样每个控件都可以准确地知道哪些控件属于他，并将正确的参数发送给函数。

# mysql - 如何根据Mysql中的现有表创建索引表

> ID：15967375
> 
> 赞同：0
> 
> 时间：2013-04-12T09:13:22.770
> 
> 标签：mysql

我有一个表包含如下列：

```
time   tv_program        user_name
xxx    friends           John
xxx    Game of Thrones   Kate
... 
... 
```

现在我想为 tv_program 和 user_name 创建单独的索引表，例如：

```
id tv_program
1  friends
2  Game of Thrones
3  ...
4  ...

id user_name
1  John
2  Kate
3  ...
4  ... 
```

并更新原始表，将 tv_program 和 user_name 替换为索引号，而不是像

```
time    tv_program   user_name
xxx     1            1
xxx     2            2
...     ...          ... 
```

有什么简单的方法可以做到这一点吗？非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:51:57.557

您基本上想要规范化您的数据，您可以使用 MySQL 查询来做到这一点：

创建`tv_programs`具有`id`自增，`name`索引唯一的表表

> INSERT INTO tv_programs (name) SELECT DISTINCT `tv_program` FROM`original_table`

现在你有一个包含程序的表，它们`id`由 MySQL 自动创建，所以你现在必须运行一个带有连接的 UPDATE（使用字符串名称，如果你有很多数据而没有索引可能会很慢，但你只运行一次) 并使用连接表 (tv_programs) 的 id 更新原始表

> 更新 original_table ot LEFT JOIN tv_programs tp ON ot.tv_program = tp.name SET ot.tv_program = tp.id

现在您可以将`tv_program`列的类型更改为 INT

对另一张桌子重复。之前进行备份，或者在原始表中添加一列（例如 tv_program_id）并使用 ID 更新该列，以便您可以在删除旧列并继续之前运行其他查询来检查结果

希望这很清楚。

# c# - 使用具有抗锯齿功能的 C# 更改抗锯齿图像的背景颜色

> ID：15967378
> 
> 赞同：3
> 
> 时间：2013-04-12T09:13:32.917
> 
> 标签：c#, graphics, antialiasing

我有一张需要更改背景颜色的图像（例如，将下面示例图像的背景更改为蓝色）。

但是，图像是抗锯齿的，所以我不能简单地用不同的颜色替换背景颜色。

我尝试过的一种方法是创建第二个图像，它只是背景并更改它的颜色并将两个图像合并为一个，但是这不起作用，因为两个图像之间的边界是模糊的。

有什么方法可以做到这一点，或者我没有考虑过其他一些方法来实现这一点？

[示例图片](http://i.stack.imgur.com/KC7Gn.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T19:48:17.080

只使用 GDI+

```
Image image = Image.FromFile("cloud.png");

Bitmap bmp = new Bitmap(image.Width, image.Height);
using (Graphics g = Graphics.FromImage(bmp)) {
  g.Clear(Color.SkyBlue);
  g.InterpolationMode = InterpolationMode.NearestNeighbor;
  g.PixelOffsetMode = PixelOffsetMode.None;
  g.DrawImage(image, Point.Empty);
} 
```

导致：

![在此处输入图像描述](https://i.stack.imgur.com/R2rRQ.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T22:54:06.957

# 抽象地

图像中的每个像素都是一个 (R, G, B) 向量，其中每个分量都在 [0, 1] 范围内。您需要一个变换 T，它将图像中的所有像素在以下约束下转换为新的 (R', G', B')：

*   黑色应该保持黑色
    *   T(0, 0, 0) = (0, 0, 0)
*   白色应该成为您选择的颜色 C*
    *   T(1, 1, 1) = C*

一种直接的方法是选择以下变换 T：

```
T(c) = C* .* c  (where .* denotes element-wise multiplication) 
```

这只是标准的图像乘法。

# 具体来说

如果您不担心性能，您可以使用（非常慢的）方法`GetPixel`并`SetPixel`在您的身上`Bitmap`为其中的每个像素应用此变换。如果不清楚如何执行此操作，请在评论中说明，我会为该部分添加详细说明。

# 比较

将此与 LarsTech 提出的方法进行比较。这里介绍的方法在顶部；LarsTech 提出的方法在底部。请注意底部图标上的不良边缘效果（边缘有白雾）。

![比较](https://i.stack.imgur.com/xC3Im.png)

这是两者的图像差异：

![不同之处](https://i.stack.imgur.com/PAZfm.png)

# 事后诸葛亮

如果您的源图像具有透明（即透明白色）背景和黑色前景（如您的示例），那么您可以简单地进行变换 T(a, r, g, b) = (a, 0, 0, 0 ) 然后按照 LarsTech 的建议将图像绘制在您想要的任何背景颜色之上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T13:56:55.840

如果它是要替换的统一颜色，则可以将其转换为 alpha。我不想自己编码！

您可以使用 GIMP 的 Color To Alpha 源代码（它是 GPL），这是[它的一个版本](https://git.gnome.org/browse/gimp/tree/plug-ins/common/colortoalpha.c?id=bcd98991017f85aff90aee36451970d59edcb95d)

PS不知道如何获得最新的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T19:06:33.950

背景去除/替换，IMO 更多的是艺术而不是科学，您不会找到适合此问题的所有解决方案的算法，但取决于您对解决此问题的绝望或感兴趣程度，您可能需要考虑以下解释：

假设您有一张彩色图像。

使用您选择的解码机制并生成彩色图像的灰度/亮度图像。

绘制像素 (x) 的数值与该值 (y) 的图像中像素数的关系图（比喻地说）。阿卡。亮度直方图。

现在，如果您的背景足够大（或小），您会看到图形的一部分，表示构成背景的一系列像素的分布。您可能希望选择稍宽的范围来处理抗锯齿（基于您在处理相似图像时定义的固定偏移量）并将其称为背景的亮度范围。

如果您知道定义背景的像素范围之外的至少一个像素（样本/中值像素值），这将使您的生活更轻松，这样您就可以“查找”定义背景的图形部分。

一旦你有了背景的亮度像素范围，你可以遍历原始图像像素，将它们的亮度值与你拥有的范围进行比较，如果它在范围内，将原始图像中的像素替换为所需的颜色，最好是亮度基于原始像素和样本像素移动，因此被替换的背景也看起来是抗锯齿的。

这不是一个完美的解决方案，在很多情况下它可能会失败/部分失败，但它同样适用于您随问题附加的示例图像。

还有很多性能改进机会，包括 GPGPU 等。

另一种可能的解决方案是使用一些预先构建的第三方图像处理库，有一些开源，例如 Camellia，但我不确定提供了哪些功能以及它们的复杂程度。

# xcode - 阵列控制器在按下“添加”按钮之前不会更新表视图

> ID：15967380
> 
> 赞同：0
> 
> 时间：2013-04-12T09:13:45.263
> 
> 标签：xcode, cocoa, nsmutablearray, nstableview, nsarraycontroller

我是 Cocoa 和 Objective-C 的新手，所以我在学习 Lynda 的课程并学到了很多东西。问题是，我遇到了一个我无法弄清楚的问题，即使我似乎在做同样的事情......

基本上，我试图通过绑定到一个数组控制器来连接一个表视图，只是为了在我的代码中列出一个简单的 NSMutableArray 的内容。我已经正确连接了所有内容，但是无论我做什么，当我运行程序时它都没有显示任何内容。

这就是奇怪的地方：在百灵鸟上，我添加了一个“+”按钮并将其连接到阵列控制器的“添加”功能中，当我运行应用程序并单击该按钮时，它不仅添加了一个新行，但它也显示了整个数组！显然，所有东西一直都连接正确，只是没有显示信息。进一步的实验表明，我可以对数组进行任何我想要的更改，无论是在原始代码中还是在应用程序运行期间，但只有当我单击“+”按钮时，它们才会在表视图中更新。

我觉得这可能是一个简单的解决方案，只是一些需要检查的“连续”框或其他东西，但我一辈子都找不到它......谁能指出我需要做什么才能获得我的 TableView自动显示其内容？

（另外，我不知道这是否相关，但检查器中的“模型键路径”字段都没有在我键入时提供建议，他们在 Lynda 课程中这样做。如果我手动，该应用程序可以正常工作输入所有内容，但始终显示“未找到完成”。）

提前感谢您帮助 n00b！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-10T12:51:25.963

> 在我键入时，检查器中的“模型键路径”字段都没有提供建议

据我了解，这可能是因为`NSMutableArray`保存您的数据数组 ie`dogPound`或类似的，也没有声明为属性，只是一个实例变量。
声明属性`@property NSMutableArray * dogPound;`并将实例变量声明更改为`_dogPound`，我认为界面生成器应该为您提供自动完成功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T05:26:01.790

> 我是 Cocoa 和 Objective-C 的新手

我也是。

> 我已经把所有东西都正确连接起来了，

在大约 30 分钟内，我可以使用像 Dog 这样的自定义类和另一个名为 AppController 的类来设置所有内容，该类由一个实例变量组成：NSMutableArray* dogPound。AppController 类的 init() 方法创建数组并将一些 Dog 实例添加到数组中。我还将 NSArrayController 绑定到 dogPound 数组，并将 NSTableView 列绑定到 NSArrayController。在我 Build&Run 之后，NSTableView 会显示 dogPound 数组中每个 Dog 实例的信息。

我还尝试了一个更简单的版本，其中没有 Dog 类，并且 AppController 类中的数组仅包含一些 NSString 对象。再一次，我能够成功地将 NSArrayController 绑定到数组并将表的列绑定到 NSArrayController，这样 NSTableView 就可以显示数组中的所有 NSString。

你需要发布你的确切代码，并且你需要写下你在 IB 中所做的每一步，这当然是一个巨大的痛苦，但这是任何人都能够帮助你的唯一方法。

> 这就是奇怪的地方：在百灵鸟上，我添加了一个“+”按钮并将其连接到阵列控制器的“添加”功能中，当我运行应用程序并单击该按钮时，它不仅添加了一个新行，但它也显示了整个数组！

当然。NSArrayController 中的 add: 方法向数组添加一个新项目，然后向 NSTableView 发出信号，告知它应该重新加载数据，即显示当前在数组中的所有内容。

> 我觉得这可能是一个简单的解决方案，只是一些需要检查的“连续”框或其他东西，

不，不是那样的。

> 在我键入时，检查器中的“模型键路径”字段都没有提供建议

缺少自动完成选项是一个很大的暗示，表明你做错了——即使我发现我不能总是弄清楚，所以我只是继续打字。您还记得在 NSArrayController 的属性检查器（对象控制器部分）中开始绑定吗？在 IB 中，您是否通过将对象拖到 MainWindow.xib 上来创建 AppController 类的实例，或者您称之为包含 NSMutableArray 的类的实例？

# gwt - GWT 单选按钮 UI 设计

> ID：15967381
> 
> 赞同：0
> 
> 时间：2013-04-12T09:13:47.430
> 
> 标签：gwt

如何在 gwt 中的单选按钮和文本之间留出空间。

我做了什么，我拿了一个单选按钮，

```
RadioButton radioOn = new RadioButton("radio", "On"); 
```

然后简单地拿下水平面板并设置它的文本，

```
HorizontalPanel accessPointHorizontalPanel = new HorizontalPanel();
accessPointHorizontalPanel.setSpacing(5);
accessPointHorizontalPanel.add(new HTML("Access Point:"));
accessPointHorizontalPanel.add(radioOn); 
```

我在网页上有这样的按钮：接入点：（单选按钮符号）开

我想要它们之间的空间。我在谷歌搜索但没有满意的答案。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:39:03.660

如果您不关心 IE6（我希望如此），我会为收音机使用属性选择器：

```
input[type="radio"] {
  margin-right: 5px;
} 
```

# hibernate - Hibernate QueryDsl 插入语句

> ID：15967382
> 
> 赞同：2
> 
> 时间：2013-04-12T09:13:53.473
> 
> 标签：hibernate, querydsl

在 Querydsl 4 Hibernate 中有 HibernateDeleteClause、HibernateUpdateClause。插入新记录呢？我尝试使用 HibernateUpdateClause，但它总是生成 HQL 更新 ==> SLQ 更新。

如何插入新记录？这是我的querydsl查询（删除+插入）：

```
QUniDati uniDati = QUniDati.uniDati;
HibernateDeleteClause queryUniDatiDelete = uniDatiDao.delete(uniDati)
.where(uniDati.id.idDomanda.eq(idDomanda));
queryUniDatiDelete.execute();

QUniDati uniDati = new QUniDati(String.format("uniDati_%d",posizione));
HibernateUpdateClause queryUniDatiUpdate = uniDatiDao
.update(uniDati)
.set(uniDati.id.idDomanda, idDomanda)
.set(uniDati.id.pos, posizione++)
.set(uniDati.parametro, propName.toUpperCase())
.set(uniDati.valore, propVal.toString())
.where(uniDati.id.idDomanda.eq(idDomanda));
queryUniDatiUpdate.execute(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:37:02.223

Querydsl 仅支持 JPQL 支持的 DML 子句：UPDATE 和 DELETE。

对于插入，直接使用 Hibernate API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:59:48.070

你说的对！ [http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch11.html#d5e2610](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch11.html#d5e2610) 为什么jpql没有插入而HQL有插入？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-06T21:31:58.647

你可以使用 querydsl SQLInsertClause

[https://bitbucket.org/atlassian/querydsl-examples/src](https://bitbucket.org/atlassian/querydsl-examples/src)

# android - 第二次点击时 TabActivity 中的 Activity 不运行 onCreate 方法

> ID：15967384
> 
> 赞同：1
> 
> 时间：2013-04-12T09:14:01.203
> 
> 标签：android, android-intent, android-widget

我有一个`TabActivity`包括 3 `tabs`。我设置`currentActivity`为`1`不是默认的，`0`. 当我启动时，我`TabActivity`发现 Activity0 也运行，但 Tabactivity 显示了我设置为 Activity1 的界面`currentActivity`。此外，当我单击 tab2（包括 Activity2）并再次单击 tba1 或 tab0 时，它们不会再次运行。正如我认为 TabActivity 只是让运行一次。每当我单击选项卡时，我想重新启动选项卡中的每个活动。而且我想跟踪这些，以便在单击后退按钮时应该可以跟踪。

```
public class ActivityInTab extends TabActivity implements OnTabChangeListener{
TabHost tabHost;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activityintab);

    tabHost = getTabHost();

    TabSpec meSpec = tabHost.newTabSpec("Ben");
    meSpec.setIndicator("Ben", getResources().getDrawable(R.drawable.icon_me));
    Intent meIntent = new Intent(this, MeActivity.class);
    meSpec.setContent(meIntent);

    TabSpec searchSpec = tabHost.newTabSpec("Arama");
    searchSpec.setIndicator("Çevrende Ara", getResources().getDrawable(R.drawable.icon_search));
//        Intent searchIntent = new Intent(this, SearchActivity.class);
//        searchSpec.setContent(searchIntent);

    TabSpec resultSpec = tabHost.newTabSpec("Aradıklarım");
    resultSpec.setIndicator("Arama  Sonuçlarım", getResources().getDrawable(R.drawable.icon_result));
//        Intent resultIntent = new Intent(this, ResultActivity.class);
//        resultSpec.setContent(resultIntent);       

    tabHost.addTab(searchSpec); 
    tabHost.addTab(meSpec);
    tabHost.addTab(resultSpec);
    tabHost.setCurrentTab(1);

    tabHost.setOnTabChangedListener(this);

}

@Override
public void onTabChanged(String tabId) {
    if(tabId.equals("Ben") && tabHost.getCurrentTab()==0){
        MeActivity meact = (MeActivity) getLocalActivityManager().getActivity(tabId);

    }

    if(tabId.equals("Arama") && tabHost.getCurrentTab()==1){
        SearchActivity sact= (SearchActivity) getLocalActivityManager().getActivity(tabId); 
    }
    if(tabId.equals("Aradıklarım") && tabHost.getCurrentTab()==2){
        ResultActivity ract = (ResultActivity) getLocalActivityManager().getActivity(tabId);
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:26:24.607

为您的标签意图设置标志`Intent.FLAG_ACTIVITY_CLEAR_TOP`。

```
Intent meIntent = new Intent(this, MeActivity.class);
meIntent .setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

还有像这样的评论标签

```
Intent searchIntent = new Intent(this, SearchActivity.class);
 searchIntent .setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

# c# - 如何将接口类型转换为具体类型

> ID：15967387
> 
> 赞同：1
> 
> 时间：2013-04-12T09:14:13.910
> 
> 标签：c#, unit-testing

我正在尝试模拟`ManagementObjectSearcher`该类并创建了一个`IManagementInfo`接口，那么如何将接口转换为`ManagementObjectSearcher`该类？

```
 ManagementObjectSearcher s = new ManagementObjectSearcher();
 IManagementInfo info = s as IManagementInfo; 
```

这为我创建了一个空信息对象

```
ManagementObjectSearcher s = new ManagementObjectSearcher();
 IManagementInfo info =IManagementInfo(s); 
```

这给了我运行时错误（无法进行类型转换）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T09:26:32.690

你不能这样做。你想这样做以便编写单元测试吗？如果您试图模拟一个您无法控制的类，那么您必须将它包装在另一个类中。

```
public class MyManagementObjectSearcherWrapper : IManagementInfo
{
    public void TheMethodToMock()
    {
        var searcher = new ManagementObjectSearcher();        
        // The code you want to mock goes here
    }
} 
```

你像这样运行你的代码：

```
public void YourCode(IManagementInfo info)
{
    info.TheMethodToMock();
} 
```

然后 YourCode() 将采用您的包装器或模拟对象。您使用`IManagementInfo`界面创建模拟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:43:05.140

看起来好像您正在尝试包装第 3 方/系统对象以帮助进行单元测试。

说你的出发点是

```
public class Dependency {

    public string Foo() {
       return "foo";  // machine, system, time, something else, dependent result
    }

    public string Bar() {
       return "bar";
    }
}

public class MySimpleClass {

    public string MyFunc() {
         return new Dependency().Foo();
    }

}

[TestMethod]
public void TestSimple() {

    var client = new MySimpleClass();

    Assert.AreEqual("foo", client.MyFunc());

} 
```

我们在调用内部创建依赖项，因为我们认为创建成本不如保持依赖项实例重要。这将取决于情况。我们可以很容易地在 ctor 中创建一个 Dependency 并存储我们每次调用的副本。无论哪种方式，我们都无法控制使单元测试混乱的输出。

我们需要为它创建一个代理。

**1.为我们需要的成员定义一个接口**
很可能，我们不需要使用wrappee的所有成员，所以只在接口中包含我们关心的那些。

```
public interface IDependencyProxy {
    string Foo();
} 
```

**2.创建代理类**
然后我们创建一个代理类，包装依赖和实现接口。同样，我们可以在开始时或在逐个调用的基础上创建。

```
public class DependencyProxy : IDependencyProxy {

    public string Foo() {
        return new Dependency.Foo();
    }

} 
```

**3\. 根据接口定义我们的客户端代码**
我们稍微修改我们的客户端代码以使用 IDependencyProxy 接口而不是 Dependency。有几种方法可以做到这一点。我通常使用一个内部 ctor 来获取从公共 ctor 链接的依赖项。（使用 [InternalsVisibleTo] 允许单元测试看到它）

```
public class MyRevisedClass {

    private readonly IDependencyProxy dependency;

    public MyRevisedClass() 
       : this( new DependencyProxy()) {}

    internal MyRevisedClass(IDependencyProxy dependency) {
        this.dependency = dependency;
    }

    public string MyFunc() {
        return dependency.Foo();
    }

} 
```

这允许我们为生产代码提供默认行为（调用 System object），并允许我们模拟单元测试的结果。

```
[TestMethod]
public void TestRevisedDefault() {

     var client = new MyRevisedClass();
     Assert.AreEqual("foo", client.MyFunc());

}

[TestMethod]
public void TestRevisedWithMockedDependency() {

    var dep = new Mock<IDependencyProxy>();
    dep.Setup(mk => mk.Foo()).Returns("bar");
    var client = new MyRevisedClass(dep.Object);

    Assert.AreEqual("bar", client.MyFunc());

} 
```

# lua - Lua 和松散模式

> ID：15967393
> 
> 赞同：3
> 
> 时间：2013-04-12T09:14:25.373
> 
> 标签：lua, design-patterns

在 Lua 中，如何将 123 与 11122333 的字符串匹配，并找到 1、2 和 3？有没有可以做到这一点的模式？而不是附加个别字符检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:54:02.973

```
local str = '11122333'
str = str:gsub('.','\0%0%0'):gsub('(.)%z%1',''):gsub('%z.','') 
```

# android - 显示进度对话框，直到将数据加载到列表

> ID：15967396
> 
> 赞同：0
> 
> 时间：2013-04-12T09:14:36.970
> 
> 标签：android, arraylist, android-asynctask, progressdialog

我开发的应用程序将数据加载到 ArrayList 需要 2/3 秒。我想显示将数据加载到 ArrayList 的进度。

我正在为此使用 AsyncTask 。我在单击按钮时执行此操作，当 ArrayList 完全加载时，它将通过 Intent 传递给下一个活动。

代码片段如下 -

onClick 按钮 -

```
showList.setOnClickListener(new View.OnClickListener() {
  @Override
    public void onClick(final View v) {

      if (session.isOpened()) {

         if (friendID.size() == 0 && friendName.size() == 0) {

        new Async().execute();
      }
    }
}); 
```

Ansyc Task 类如下——

```
class Async extends AsyncTask<String, Integer, String> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();

        dialog.setTitle("Loading...");
        dialog.setIcon(R.drawable.ic_launcher);
        dialog.setMessage("Please wait for completion");
        dialog.setProgress(0);

        dialog.show();
    }

    @Override
    protected String doInBackground(String... params) {

        Request.executeMyFriendsRequestAsync(session,
            new Request.GraphUserListCallback() {

                            @Override
            public void onCompleted(List<GraphUser> users,
                            Response response) {

                 Iterator<GraphUser> iterator = users.iterator();
                 GraphUser graphUser = null;

                    friendID.clear();
                    friendName.clear();

                    while (iterator.hasNext()) {
                            if (iterator != null) {
                                graphUser = iterator.next();

                                Log.d("Friend Information ",
                                        " friend ID " + graphUser.getId()
                                                + " friend Name "
                                                + graphUser.getName());

                                friendID.add(graphUser.getId());
                                friendName.add(graphUser.getName());

                                publishProgress(friendID.size());

                                Log.d("Friend Information ", " friendID= "
                                        + friendID.size() + " friendName "
                                        + friendName.size());
                            }
                        }
                    }

                });

        dialog.dismiss();
        return "sucess";
    }

    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);

        Intent intent = new Intent(MainActivity.this, FriendsList.class);

        Log.d("Checking the size ", "ID " + friendID.size() + " UserName "
                + friendName.size());

        /*
         * Toast.makeText(MainActivity.this, text, Toast.LENGTH_SHORT)
         * .show();
         */

        intent.putStringArrayListExtra("userID", friendID);
        intent.putStringArrayListExtra("userName", friendName);
        intent.putExtra("str", result);
        startActivity(intent);
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        dialog.setProgress(values[0]);
        //dialog.incrementProgressBy(values[0]);
        super.onProgressUpdate(values);
    }
} 
```

Log Cat 中的错误 -

```
04-12 14:15:56.595: E/AndroidRuntime(15794): FATAL EXCEPTION: AsyncTask #2
04-12 14:15:56.595: E/AndroidRuntime(15794): **java.lang.RuntimeException: An error occured while executing doInBackground()**

04-12 14:15:56.595: E/AndroidRuntime(15794):    at android.os.AsyncTask$3.done(AsyncTask.java:200)

04-12 14:15:56.595: E/AndroidRuntime(15794):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)

04-12 14:15:56.595: E/AndroidRuntime(15794):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)

04-12 14:15:56.595: E/AndroidRuntime(15794):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)

04-12 14:15:56.595: E/AndroidRuntime(15794):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)

04-12 14:15:56.595: E/AndroidRuntime(15794):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)

04-12 14:15:56.595: E/AndroidRuntime(15794):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)

04-12 14:15:56.595: E/AndroidRuntime(15794):    at java.lang.Thread.run(Thread.java:1019)
04-12 14:15:56.595: E/AndroidRuntime(15794): **Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:16:01.603

2点：

1.  看起来您`Request.executeMyFriendsRequestAsync`的操作是异步操作，因此您只需请求一些操作并快速从`AsyncTask.doInBackground()`. 因此，通过这样的设计，数据加载本身会在之后发生，当`AsyncTask.doInBackground()`已经通过时。您需要打开一个 sycn API，以便在`AsyncTask.doInBackground()`.

2.  调用`dialog.dismiss();`里面`AsyncTask.onPostExecute()`

# oop - OOP 示例 - 如何避免使用辅助类

> ID：15967397
> 
> 赞同：0
> 
> 时间：2013-04-12T09:14:38.507
> 
> 标签：oop

我有两个课程，一个用于联系人，另一个用于组织。每个联系人都属于一个组织，一个组织可以有多个联系人。

我想要一个创建联系人的函数，其中一个参数是组织名称。如果组织名称已经存在，则联系人将被分配给该现有组织。否则，将在现场为联系人创建一个新组织。

由于这个函数创建了一个联系人，也可能创建一个组织，我的第一个想法是为它创建一个帮助类，因为它似乎不属于任何一个类。我被引导相信辅助类在 OOP 中是不好的做法，所以我正在寻找其他建议。如果不使用辅助类，您将如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:25:25.913

如果不详细查看具体案例，很难定义 OOP 中究竟什么是好的实践，什么不是。您所说的问题是有效的，这是我对这些问题的回答：

**辅助类不一定是 OOP 中的“坏习惯”**

在很多情况下，辅助类是要走的路。如果这些帮助类简化了您的设计，那么它们实际上是有利的。

**一个对象函数可以创建其他对象——这并不意味着它必须进入一个辅助类。**

如果您的联系人创建了一个组织，那很好。如果一个组织创建了一个联系人，那也没关系。这两个类是您的对象设计的一部分，并且可以相互依赖而不会违反 OOP 中的任何设计规则。我根本不明白为什么您的代码“应该”进入帮助程序类。

# java - 抽象方法的返回值是否可以是泛型类型

> ID：15967400
> 
> 赞同：4
> 
> 时间：2013-04-12T09:14:40.203
> 
> 标签：java, generics, graph, abstract-class, factory-pattern

我项目的第一部分是构建一个超图

这是一个快速绘制的 UML 图![在此处输入图像描述](https://i.stack.imgur.com/pTMVN.png)

顶点类

```
 public abstract class Vertex <T>{

int vertexId ;
T vertexValue ;

public  abstract <T> T setVertexValue();

    } 
```

imageVertex 类

```
 public class ImageVertex extends Vertex<Map<String, Instance>>{

@Override
public <T> T setVertexValue() {
    // TODO Auto-generated method stub
    return null;
}} 
```

我认为 Type 会被自动推断，因为我为 imageVertex Map 定义它，然后为 tagVertex as String

我是否错误地使用了泛型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:18:26.387

您已经重新定义了类型 T on `setVertexValue`。用这个。

```
public abstract class Vertex <T>{

int vertexId ;
T vertexValue ;

public  abstract T setVertexValue();

} 
```

它正确使用泛型

```
public class ImageVertex extends Vertex<Map<String, String>>
{

    @Override
    public Map<String, String> setVertexValue()
    {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T09:17:43.410

您似乎正在尝试编写：

```
public abstract class Vertex<T> {

    int vertexId;
    T vertexValue;

    public abstract T setVertexValue(); // NOTE: no <T>
}

public class ImageVertex extends Vertex<Map<String, Instance>> {

    @Override
    public Map<String, Instance> setVertexValue() {
        return null;
    }
} 
```

在您的代码中`<T>`，

```
public abstract <T> T setVertexValue(); 
```

是一个完全独立的通用参数，它会影响`T`in `Vertex<T>`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T09:17:57.180

删除`<T>`for `Vertex.setVertexValue`：

```
public abstract T setVertexValue(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T09:19:16.767

你自己`setVertexValue()`有一个类型参数`<T>`；这意味着它重新定义了类的类型参数`<T>`。您的方法声明应如下所示

```
public  abstract T setVertexValue(); 
```

（注意没有`<T>`）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T09:34:52.783

像这样的东西必须为你工作。

```
public abstract T setVertexValue(); 
```

消除`<T>`

# c++ - 如何以graphml格式输出有向图？

> ID：15967404
> 
> 赞同：0
> 
> 时间：2013-04-12T09:14:59.610
> 
> 标签：c++, boost-graph, graphml

如何将以下图形输出到 graphml？

```
typedef struct Vertex{ std::string name; std::string cmdb_id;

             Vertex& operator= (const Vertex& rhs)
             {
                     if (this == &rhs)
                             return *this;

                     name = rhs.name;
                     cmdb_id = rhs.cmdb_id;
             }

             bool operator< (const Vertex& rhs) const
             {
                     return cmdb_id < rhs.cmdb_id;
             };

             bool operator== (const Vertex& rhs) const
             {
                     return ((cmdb_id == rhs.cmdb_id) && (name == rhs.name));
             };

     }vertex_container;

typedef struct Edge {std::string name;} edge_container;

boost::directed_graph<vertex_container, edge_container> Graph g; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:34:07.177

这是不使用 c++11 功能的另一个答案的版本：

```
#include <iostream>

#include <boost/graph/directed_graph.hpp>
#include <boost/graph/graphml.hpp>

typedef struct Vertex
{ 
   std::string name; 
   std::string cmdb_id;

   Vertex& operator= (const Vertex& rhs)
   {
      if (this == &rhs)
        return *this;

      name = rhs.name;
      cmdb_id = rhs.cmdb_id;
   }

   bool operator< (const Vertex& rhs) const
   {
      return cmdb_id < rhs.cmdb_id;
   };

   bool operator== (const Vertex& rhs) const
   {
      return ((cmdb_id == rhs.cmdb_id) && (name == rhs.name));
   };

}vertex_container;

typedef struct Edge {std::string name;} edge_container;

typedef boost::directed_graph<vertex_container, edge_container> Graph;
typedef boost::graph_traits<Graph>::vertex_descriptor vertex_descriptor;

int main()
{
   Graph g;
   vertex_container A, B;
   edge_container AB;

   A.name="A";
   A.cmdb_id="1";
   B.name="B";
   B.cmdb_id="2";
   AB.name="A-B";

   vertex_descriptor v0 = g.add_vertex(A);
   vertex_descriptor v1 = g.add_vertex(B);
   g.add_edge(v0,v1,AB);

   boost::dynamic_properties dp;
   dp.property("vertex_name",get(&vertex_container::name,g));
   dp.property("vertex_cmdb_id",get(&vertex_container::cmdb_id,g));
   dp.property("edge_name",get(&edge_container::name,g));

   write_graphml(std::cout, g, dp);

} 
```

[在 LWS 上使用 g++ 4.6.3](http://liveworkspace.org/code/4mjhM3%240)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:10:41.547

```
#include <iostream>

#include <boost/graph/directed_graph.hpp>
#include <boost/graph/graphml.hpp>

typedef struct Vertex
{ 
   std::string name; 
   std::string cmdb_id;

   Vertex& operator= (const Vertex& rhs)
   {
      if (this == &rhs)
        return *this;

      name = rhs.name;
      cmdb_id = rhs.cmdb_id;
   }

   bool operator< (const Vertex& rhs) const
   {
      return cmdb_id < rhs.cmdb_id;
   };

   bool operator== (const Vertex& rhs) const
   {
      return ((cmdb_id == rhs.cmdb_id) && (name == rhs.name));
   };

}vertex_container;

typedef struct Edge {std::string name;} edge_container;

typedef boost::directed_graph<vertex_container, edge_container> Graph;

int main()
{
   Graph g;
   auto v0 = g.add_vertex({"A","1"});
   auto v1 = g.add_vertex({"B","2"});
   g.add_edge(v0,v1,{"A-B"});

   boost::dynamic_properties dp;
   dp.property("vertex_name",get(&vertex_container::name,g));
   dp.property("vertex_cmdb_id",get(&vertex_container::cmdb_id,g));
   dp.property("edge_name",get(&edge_container::name,g));

   write_graphml(std::cout, g, dp);

} 
```

# javascript - 简单的文本编辑器，在 chrome 中具有可编辑的奇怪行为

> ID：15967405
> 
> 赞同：1
> 
> 时间：2013-04-12T09:15:01.673
> 
> 标签：javascript, angularjs, text-editor, contenteditable, rich-text-editor

我正在尝试制作类似这样的简单文本编辑器：
[contenteditable text editor](http://starkravingfinkle.org/blog/wp-content/uploads/2007/07/contenteditable.htm)。
我正在使用 AngularJS v1.1.4，它在 Firefox 后期运行良好，但在 chrome 最新版本上，按钮不起作用。这是一个[笨拙的例子](http://plnkr.co/edit/ifVF9K2dKmw7EJW1IwA8?p=preview)。

# 更新：

问题比我想象的要复杂。

### 火狐：

带有 contenteditable div 的文本编辑器的示例以某种方式工作：
当我单击选中的文本的粗体按钮时，文本变为粗体，但光标或插入符号（使用键盘键入时移动的那个东西）并不总是可见.
但是当使用 iframe 方法时，iframe 是不可点击的。

### 铬合金：

带有 contenteditable div 的文本编辑器的示例以某种方式工作：
当我单击带有文本选择的粗体按钮时，什么也没有发生，但是当我通过控制台调用命令时它可以工作（奇怪）。
iframe 方法在这里工作正常。

### 查看示例：

*   [具有 contenteditable 的编辑器](http://plnkr.co/edit/ifVF9K2dKmw7EJW1IwA8?p=preview)
*   [带有 iframe 的编辑器](http://plnkr.co/edit/wIXEd3voLh6ScImo06x3?p=preview)

任何帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T22:50:15.690

要在 Chrome 中工作，您必须使用`ng-mousedown`而不是`ng-click`.

`ng-click`由于一个非常简单的原因，它不适用于非帧模式。当您单击按钮格式化文本时，焦点从可编辑区域丢失，并且在执行命令时没有选择文本。但是 mousedown 事件发生在焦点丢失之前，因此您最终会失去焦点并从编辑器中选择，但命令执行发生在焦点丢失之前。

# android - 如何在 Android 的 imageview 中下载和查看图像？

> ID：15967410
> 
> 赞同：1
> 
> 时间：2013-04-12T09:15:12.807
> 
> 标签：android, image, connection, android-image, servercontrol

我正在尝试显示来自我的服务器的两个图像。我怎么能做到这一点？

Android 中是否有任何选项可用于从服务器为每个实例动态更改图像？

我正在使用权限作为，。

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:19:09.007

试试这个[例子](http://www.androidhive.info/2012/07/android-loading-image-from-url-http/)。它将帮助您从在线获取图像

Xml 文件是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="10dip"
    android:text="Loading image from url" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" />

<ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="10dip" />

<ImageView
    android:id="@+id/image1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="10dip" />

<ImageView
    android:id="@+id/image2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="10dip" />

<ImageView
    android:id="@+id/image3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="10dip" />
 </LinearLayout> 
```

而java文件是，..

```
public class AndroidLoadImageFromURLActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Loader image - will be shown before loading image
    final int loader = R.drawable.loader;

    // Imageview to show
    final ImageView image = (ImageView) findViewById(R.id.image);
    final ImageView image1 = (ImageView) findViewById(R.id.image1);
    final ImageView image2 = (ImageView) findViewById(R.id.image2);
    final ImageView image3 = (ImageView) findViewById(R.id.image3);
    Button b=(Button)findViewById(R.id.button1);

    // Image url
    final String image_url = "URL";
    final String image_url2 = "URL";
    final String image_url3 = "URL";
    final String image_url4 = "URL";

    // ImageLoader class instance
    final ImageLoader imgLoader = new ImageLoader(getApplicationContext());

    // whenever you want to load an image from url
    // call DisplayImage function
    // url - image url to load
    // loader - loader image, will be displayed before getting image
    // image - ImageView 
    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

    imgLoader.DisplayImage(image_url, loader, image);
    imgLoader.DisplayImage(image_url4, loader, image3);
    imgLoader.DisplayImage(image_url2, loader, image1);
    imgLoader.DisplayImage(image_url3, loader, image2);
        }
    });
}
}

public class FileCache {

private File cacheDir;

public FileCache(Context context){
    //Find the dir to save cached images
    if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
        cacheDir=new File(android.os.Environment.getExternalStorageDirectory(),"TempImages");
    else
        cacheDir=context.getCacheDir();
    if(!cacheDir.exists())
        cacheDir.mkdirs();
}

public File getFile(String url){
    String filename=String.valueOf(url.hashCode());
    File f = new File(cacheDir, filename);
    return f;

}

public void clear(){
    File[] files=cacheDir.listFiles();
    if(files==null)
        return;
    for(File f:files)
        f.delete();
}

}

public class ImageLoader {

MemoryCache memoryCache=new MemoryCache();
FileCache fileCache;
private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());
ExecutorService executorService; 

public ImageLoader(Context context){
    fileCache=new FileCache(context);
    executorService=Executors.newFixedThreadPool(5);
}

int stub_id = R.drawable.ic_launcher;
public void DisplayImage(String url, int loader, ImageView imageView)
{
    stub_id = loader;
    imageViews.put(imageView, url);
    Bitmap bitmap=memoryCache.get(url);
    if(bitmap!=null)
        imageView.setImageBitmap(bitmap);
    else
    {
        queuePhoto(url, imageView);
        imageView.setImageResource(loader);
    }
}

private void queuePhoto(String url, ImageView imageView)
{
    PhotoToLoad p=new PhotoToLoad(url, imageView);
    executorService.submit(new PhotosLoader(p));
}

private Bitmap getBitmap(String url)
{
    File f=fileCache.getFile(url);

    //from SD cache
    Bitmap b = decodeFile(f);
    if(b!=null)
        return b;

    //from web
    try {
        Bitmap bitmap=null;
        URL imageUrl = new URL(url);
        HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
        conn.setConnectTimeout(30000);
        conn.setReadTimeout(30000);
        conn.setInstanceFollowRedirects(true);
        InputStream is=conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        os.close();
        bitmap = decodeFile(f);
        return bitmap;
    } catch (Exception ex){
       ex.printStackTrace();
       return null;
    }
}

//decodes image and scales it to reduce memory consumption
private Bitmap decodeFile(File f){
    try {
        //decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE=70;
        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=1;
        while(true){
            if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                break;
            width_tmp/=2;
            height_tmp/=2;
            scale*=2;
        }

        //decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}
    return null;
}

//Task for the queue
private class PhotoToLoad
{
    public String url;
    public ImageView imageView;
    public PhotoToLoad(String u, ImageView i){
        url=u;
        imageView=i;
    }
}

class PhotosLoader implements Runnable {
    PhotoToLoad photoToLoad;
    PhotosLoader(PhotoToLoad photoToLoad){
        this.photoToLoad=photoToLoad;
    }

    @Override
    public void run() {
        if(imageViewReused(photoToLoad))
            return;
        Bitmap bmp=getBitmap(photoToLoad.url);
        memoryCache.put(photoToLoad.url, bmp);
        if(imageViewReused(photoToLoad))
            return;
        BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad);
        Activity a=(Activity)photoToLoad.imageView.getContext();
        a.runOnUiThread(bd);
    }
}

boolean imageViewReused(PhotoToLoad photoToLoad){
    String tag=imageViews.get(photoToLoad.imageView);
    if(tag==null || !tag.equals(photoToLoad.url))
        return true;
    return false;
}

//Used to display bitmap in the UI thread
class BitmapDisplayer implements Runnable
{
    Bitmap bitmap;
    PhotoToLoad photoToLoad;
    public BitmapDisplayer(Bitmap b, PhotoToLoad p){bitmap=b;photoToLoad=p;}
    public void run()
    {
        if(imageViewReused(photoToLoad))
            return;
        if(bitmap!=null)
            photoToLoad.imageView.setImageBitmap(bitmap);
        else
            photoToLoad.imageView.setImageResource(stub_id);
    }
}

public void clearCache() {
    memoryCache.clear();
    fileCache.clear();
}

}

public class MemoryCache {
private Map<String, SoftReference<Bitmap>> cache=Collections.synchronizedMap(new HashMap<String, SoftReference<Bitmap>>());

public Bitmap get(String id){
    if(!cache.containsKey(id))
        return null;
    SoftReference<Bitmap> ref=cache.get(id);
    return ref.get();
}

public void put(String id, Bitmap bitmap){
    cache.put(id, new SoftReference<Bitmap>(bitmap));
}

public void clear() {
    cache.clear();
}
}

public class Utils {
public static void CopyStream(InputStream is, OutputStream os)
{
    final int buffer_size=1024;
    try
    {
        byte[] bytes=new byte[buffer_size];
        for(;;)
        {
          int count=is.read(bytes, 0, buffer_size);
          if(count==-1)
              break;
          os.write(bytes, 0, count);
        }
    }
    catch(Exception ex){}
}
} 
```

并使用 Manifest.xml 作为，..

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.androidhive.imagefromurl"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".AndroidLoadImageFromURLActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

<!-- Internet Permissions -->
<uses-permission android:name="android.permission.INTERNET" />

<!-- Permission to write to external storage -->
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

</manifest> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:29:38.923

您可以使用以下代码从 Web 下载图像并在 Android 中的 ImageView 中显示它。我在我的应用程序中尝试它..

```
public static void DownloadFile(String imageURL, String fileName) throws IOException {
    URL url = new URL(imageURL);
    File file = new File(fileName);

    long startTime = System.currentTimeMillis();
    Log.d("DownloadFile", "Begin Download URL: " + url + " Filename: " + fileName);
    URLConnection ucon = url.openConnection();
    InputStream is = ucon.getInputStream();
    BufferedInputStream bis = new BufferedInputStream(is);
    ByteArrayBuffer baf = new ByteArrayBuffer(50);
    int current = 0;
    while ((current = bis.read()) != -1)
        baf.append((byte) current);
    FileOutputStream fos = new FileOutputStream(file);
    fos.write(baf.toByteArray());
    fos.close();
    Log.d("DownloadFile", "File was downloaded in: " + ((System.currentTimeMillis() - startTime) / 1000) + "s");
}

[...]

try {
    String imagePath = getFilesDir() + "/" + "logo1w.png";
    DownloadFile("http://www.google.de/intl/en_com/images/srpr/logo1w.png", imagePath);
} catch (IOException e) {
    // Something went wrong here
}

ImageView1.setbMap(BitmapFactory.decodeFile(imagePath)); 
```

# html - 浏览器自动填充

> ID：15967411
> 
> 赞同：6
> 
> 时间：2013-04-12T09:15:16.367
> 
> 标签：html, autofill

有什么方法可以标记或标记我的 HTML 以确保自动填充诸如“名字”之类的字段？

大多数流行的浏览器使用正则表达式作为字段名称，例如名字

```
.*name|initials|fname|first$". 
```

但是更改字段名称会在其他地方产生影响；我被允许改变的东西是有限的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:00:47.687

这是一个自动完成的表格

```
<form action="demo_form.asp" method="get" autocomplete="on">
  First name:<input type="text" name="fname"><br>
  E-mail: <input type="email" name="email"><br>
  <input type="submit">
</form> 
```

我希望这有助于它是我能找到的最好的:)

# magento - 自定义选项添加产品价格

> ID：15967417
> 
> 赞同：1
> 
> 时间：2013-04-12T09:15:41.040
> 
> 标签：magento, magento-1.7

目前，产品价格添加到定制产品中，但我需要更改一些功能

我不想将产品价格添加到自定义选项中。我想显示与我相同的价格

添加固定价格。我怎样才能做到这一点？

# jquery - 为什么 jquery .live() 在特定情况下有效，而 on() 无效？

> ID：15967419
> 
> 赞同：0
> 
> 时间：2013-04-12T09:15:41.450
> 
> 标签：jquery, event-handling

我们正在使用 jQuery 1.7.1，我们将在删除不推荐使用的 live() 函数后进行升级。我在这里和其他地方一直在阅读许多关于 live() 和 on() 之间差异的问题。但是，我不明白为什么在我的特定情况下 on() 不能为事件侦听器绑定使用某个（静态）元素。根据文档和其他地方，最好尽可能合理地绑定到您的事件目标，即使“文档”在所有情况下都有效。

首先，我没有改变 DOM。我没有添加或删除元素，这是大多数问题中的常见问题。参与其中的每个人都在那里。

其次，这是我们 HTML 的基本（伪代码！）版本：

```
<div.container>
    ...
    <ul>
        <li>
            <div.a_static_parent>
                <form method="post" action="call_a_python_func">...
                    <input.a_static_child>
                    <submit /> ...</form>
                 ...non-form stuff...
            </div>
        </li>
        ...x however many items...
    </ul>
</div> 
```

我们的代码实际上在做的是检查两个值是否相同或不同，并据此将提交按钮设置为禁用或不禁用（它可能会更改颜色或警告“FOO！”，但同样的问题）。这是一个 POST-only 形式，而不是 POST-REDIRECT-GET；没有页面刷新。我们只是在后面更新一个值。

我们使用 live() 的旧 jQuery 代码：

```
$('.a_static_child').live('change blur',  function() {
    //alert('FOO!'); and other non-DOM-changing things      
}); 
```

我们使用 on() 的新的、每页加载一次的 jQuery 代码：

```
$('.a_static_parent').on('change blur', '.a_static_child', function() {
    //alert('FOO!'); and other non-DOM-changing things      
}); 
```

始终有效，无论：

```
$(document).on('change blur', '.a_static_child', function() {
    //alert('FOO!'); and other non-DOM-changing things      
}); 
```

在中间情况下，事件会触发，直到我点击提交按钮。之后，使用 on() 而不是 live()，在我刷新页面之前，不会以该表单触发更多事件（对于页面上的每个单独的表单都是如此）。将处理程序移出 .container 或 document 可以解决此问题，但由于表单提交不会以任何方式更改 DOM，我不明白为什么我需要走那么远。

我想让事件更接近实际目标。.a_static_child 总是在 .a_static_parent 中，但并不总是在 .container 中，因为这种形式也出现在对话框和框架等中。

有人可以解释一下当我使用 on() 时点击提交是如何关闭事件的，如果确实如此吗？或者发生了什么？如果需要，我可以发布更多代码，但我希望坚持基础。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:26:08.360

我刚刚复制了您的代码并实际运行，所以它一定是一个外部问题。这是您的工作代码：http: [//jsfiddle.net/MGrwb/1/](http://jsfiddle.net/MGrwb/1/)

```
<div>   
    <ul>
        <li>
            <div id="a_static_parent">
                <form method="post">
                    <input id="a_static_child" />
                    <button id="testButton">Test</button>
                 </form>
            </div>
        </li>
    </ul>
</div>

$(document).on('change, blur', '#a_static_child', function() {
    alert('FOO!');// and other non-DOM-changing things      
});

$('#testButton').click(function(e) {
   $('form').submit();
});

$('form').submit(function (evt) {
    evt.preventDefault();  
}); 
```

# wpf - WPF Grid：矩形作为透明覆盖

> ID：15967424
> 
> 赞同：4
> 
> 时间：2013-04-12T09:15:54.963
> 
> 标签：wpf

我在 WPF 4.5 中有一个画布，想用一个 UserControl 覆盖它，它主要包括

一个带有标签的网格和一个半透明的矩形作为背景：

```
<UserControl x:Class="Cwss.Tactical.Navigation.ObjectInfoView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:u="clr-namespace:Cwss.Utils.Converter"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="300"
             d:DesignWidth="300">
  <UserControl.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/Tactical/Styles/CommonStyle.xaml"></ResourceDictionary>
        <ResourceDictionary>
          <Style x:Key="AttrName"
                 TargetType="{x:Type Label}">
            <Setter Property="Foreground"
                    Value="White" />
            <Setter Property="FontSize"
                    Value="14"></Setter>
          </Style>
          <Style x:Key="AttrValue"
                 TargetType="{x:Type Label}">
            <Setter Property="Foreground"
                    Value="Yellow" />
            <Setter Property="FontSize"
                    Value="14"></Setter>
          </Style>
        </ResourceDictionary>
      </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
  </UserControl.Resources>

  <Grid Width="300"
        Height="200">

    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="Auto" />
      <ColumnDefinition Width="Auto" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="Auto" />
      <RowDefinition Height="Auto" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <Rectangle Panel.ZIndex="-1"
               Opacity=".5"
               Width="300"
               Height="200"
               Fill="Blue"
               Stroke="Blue"
               StrokeThickness="2"
               RadiusX="8"
               RadiusY="8">
    </Rectangle>

    <Label Style="{StaticResource AttrName}"
           Grid.Column="0"
           Content="Class"></Label>
    <Label Style="{StaticResource AttrValue}"
           Grid.Column="1"
           Name="ObjectKnowledge_Clas"
           Content="Hi"></Label>
    <Label Style="{StaticResource AttrName}"
           Grid.Column="0"
           Grid.Row="1"
           Content="Range"></Label>
    <Label Style="{StaticResource AttrValue}"
           Grid.Column="1"
           Grid.Row="1"
           Content="{Binding ObjectKnowledge.Range, Converter={u:RangetoStringConverter}}"></Label>
  </Grid>
</UserControl> 
```

对我来说奇怪的是第一个标签被渲染在矩形上![矩形网格](https://i.stack.imgur.com/pnj9o.png)，

但所有其他标签都没有。感谢您让我知道我在这里做错了什么！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T10:03:42.520

那么你`Rectangle`被渲染为网格中的第一个元素，`Row=0`并且`Column=0`（假定为网格默认）

将您的矩形切换为：

```
<Rectangle Grid.RowSpan="4"
           Grid.ColumnSpan="2"
           Width="300"
           Height="200"
           Panel.ZIndex="-1"
           Fill="Blue"
           Opacity=".5"
           RadiusX="8"
           RadiusY="8"
           Stroke="Blue"
           StrokeThickness="2" /> 
```

现在你看到了其他标签。

您应该使用[Snoop](https://github.com/snoopwpf/snoopwpf)，它可能会像这样为您突出显示问题

![使用 Snoop 的概述](https://i.stack.imgur.com/pky9h.png)

# jquery - jquery onclick 触发的次数是上一次点击的两倍

> ID：15967425
> 
> 赞同：2
> 
> 时间：2013-04-12T09:15:55.873
> 
> 标签：jquery, events

以下 onclick 的触发次数是上一次点击的两倍。换句话说，当我第一次单击它时，它会按预期工作并且只触发一次。但是当我再次单击（在同一行或另一行）时，它会触发两次。如果我第三次点击它会触发 8 次然后 16 次然后 32 次。这是怎么回事？

```
calcTotals: function (table){
        var totals=[];
        $(table).find('tbody').children('tr').each(function(r,row){

            $(row).on('click',function(e){
                $(this).toggleClass('selectedForTotal');
                $(table).find('tbody').children('tr:last').remove();
                dialog.calcTotals(table);
                e.stopPropagation();
                return false;
            })

             if($(row).hasClass('selectedForTotal')){
                $(this).children('td').each(function(c,cell){
                    if($(cell).hasClass('realNumber')){

                        cell.style.textAlign='right';
                        cell=$(cell).html().replace(/,/g,'').replace('(','-').replace(')','');
                        if (!totals[c]) totals[c]=0;
                        totals[c]+=parseFloat(cell);
                        $(cell).val(formatNumber(cell,2,false,true,true));

                    }else {cell.style.textAlign='left';}
                })
            }
        })

        var newRow=$('<tr>').appendTo($(table).find('tbody'))
            .attr({'id':'totals','class':'highlightRow','tabIndex':'1'})
            .on('click',function(i,item){
                $(this).toggleClass('highlightRow');
        }).css('cursor','pointer');

        console.log('total : '+totals);

        $(totals).each(function(i,item){
            $('<td>').html(item?   formatNumber(totals[i],2,false,true,true):'').appendTo(newRow);
        })

        $(newRow).focus();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:18:53.637

您可以使用[event.preventDefault()](http://api.jquery.com/event.preventDefault/)停止默认操作，然后注册一个新操作。

这将导致绑定到元素的所有先前点击不执行....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:19:41.797

问题是您的`calcTotals`函数绑定了`click`事件处理程序，但随后您的`click`事件处理程序调用`calcTotals`（它将另一个`click`事件处理程序绑定到所有这些元素）。

因此，您调用`calcTotals`一次，`click`每个元素都有一个事件处理程序。您单击其中一个，`calcTotals`再次被调用，现在`click`每个元素都有两个事件处理程序。然后再次单击，两个事件处理程序都被触发，绑定另外两个`click`事件处理程序（现在总共有四个）。下一步单击添加另外四个（总共八个），等等。

您需要绑定`click`事件处理程序一次，与`calcTotals`函数分开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-06T08:38:55.587

在使用 on() 附加新元素之前，您必须使用 off() 删除以前的处理程序我希望这段代码可以帮助你..!!! $('body').off('click', '.collapsible').on("click", ".collapsible", function (e) { /* Do somthing */ });

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T09:17:13.847

您正在重复绑定事件**，**因为`each()`这是重复触发事件的原因，将某个类分配给要绑定事件的行并使用类选择器绑定事件。

```
 $(".rowclass").on('click',function(e){
        $(this).toggleClass('selectedForTotal');
        $(table).find('tbody').children('tr:last').remove();
        dialog.calcTotals(table);
        e.stopPropagation();
        return false;
 }) 
```

# c++ - 如何以编程方式将焦点设置在 QMenu 项上

> ID：15967426
> 
> 赞同：1
> 
> 时间：2013-04-12T09:16:01.463
> 
> 标签：c++, qt, qt4, qmenu

我想要对这段代码做的是以`QMenu`编程方式将焦点设置在 Item 上。但既不工作`QMenu::setActiveAction()`也不`QMenu::popup()`工作。我怎样才能做到这一点？

```
#include <QApplication>
#include <QMainWindow>
#include <QMenuBar>

int main(int argc, char **argv)
{
    QApplication app(argc, argv);
    QMainWindow *window = new QMainWindow();

    window->setWindowTitle(QString::fromUtf8("Test:QMenu"));
    window->resize(336, 227);

    QAction *newAct = new QAction("&New",window);
    QAction *openAct = new QAction("&Open",window);
    QAction *saveAct = new QAction("&Save",window);

    QMenu *fileMenu;

    fileMenu = window->menuBar()->addMenu("&File");
    fileMenu->addAction(newAct);
    fileMenu->addAction(openAct);
    fileMenu->addAction(saveAct);

    window->show();

    fileMenu->popup(QPoint(10,10));

    return app.exec();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:55:08.647

QMenu 项目不像其他小部件那样“可聚焦”。而且，实际上，它们不应该，因为您想要的不是它们使用的常见做法。

作为一种解决方法，在鼠标按下时，您可以获得鼠标光标位置，预先计算弹出菜单中默认菜单项的偏移量，并在鼠标光标位于默认菜单项下方的位置显示菜单。[此处](http://qt-project.org/forums/viewthread/24789)建议了此解决方案。

此外，对于用户来说，选择默认菜单项会更好，您可以在显示弹出窗口后生成窄键按钮事件。这适用于 Windows，但不确定其他操作系统。

# ios - 将视频从 IOS 上传到 Facebook 时请求超时

> ID：15967429
> 
> 赞同：1
> 
> 时间：2013-04-12T09:16:07.750
> 
> 标签：ios, objective-c, facebook, facebook-graph-api

我有我正在开发的这种方法，它会将视频从我的应用程序上传到 Facebook，但是我收到请求超时错误。

视频大小：1.5mb~
视频类型：mp4

代码：

```
NSData *movieData = [NSData dataWithContentsOfURL:finalVideoPath];
    NSLog(@"movie size: %.2f",(float)movieData.length/1024.0f/1024.0f);

    NSDictionary *parameters = [NSDictionary dictionaryWithObjectsAndKeys:movieData,@"video.mp4",@"My Video",@"title",@"Some Description",@"description", nil];
    FBRequest *request = [FBRequest requestWithGraphPath:@"me/videos" parameters:parameters HTTPMethod:@"POST"];

    //NSDictionary *parameters = [NSDictionary dictionaryWithObject:movieData forKey:@"harlemshake.mov"];
    [request startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
        if (error){
            NSLog(@"result: %@, error: %@", result, error);
            return;
        }

        NSLog(@"Video Posted!");

    }]; 
```

错误详情：

```
 error: Error Domain=com.facebook.sdk Code=5 "The operation couldn’t be completed. (com.facebook.sdk error 5.)" UserInfo=0x1f0f3860 
{com.facebook.sdk:ErrorInnerErrorKey=Error Domain=NSURLErrorDomain Code=-1001 "The request timed out." UserInfo=0x1f0d4fc0 {NSErrorFailingURLStringKey=https://graph.facebook.com/me/videos?access_token=BAACCZCfPURoQBAGiIZBPAs7BbWMaqI84u0we0bN8IzfrdG4AeMxPF1ZAXq6sX3aOzjkrs8GacICZBItYnMJkyo2ySomdieggYdtNtyfjTbSA46eJZBGmV2UcOelPTNhcFVVJ48pHLmklRHUQszAAgfg9QZCqZCUQuSE027r9dq5Snmr0aQZAr8ql0uh0B6ZBXLE7dsFJ3etjwMuWnMfT15Cz6zQpoMDuQS4fuCQUZAZAFPqQwZDZD&migration_bundle=fbsdk%3A20130120&description=Some%20Description&format=json&sdk=ios&
title=My%20Video, NSErrorFailingURLKey=https://graph.facebook.com/me/videos?access_token=BAACCZCfPURoQBAGiIZBPAs7BbWMaqI84u0we0bN8IzfrdG4AeMxPF1ZAXq6sX3aOzjkrs8GacICZBItYnMJkyo2ySomdieggYdtNtyfjTbSA46eJZBGmV2UcOelPTNhcFVVJ48pHLmklRHUQszAAgfg9QZCqZCUQuSE027r9dq5Snmr0aQZAr8ql0uh0B6ZBXLE7dsFJ3etjwMuWnMfT15Cz6zQpoMDuQS4fuCQUZAZAFPqQwZDZD&migration_bundle=fbsdk%3A20130120&description=Some%20Description&format=json&sdk=ios&title=My%20Video, NSLocalizedDescription=The request timed out.,
 NSUnderlyingError=0x1f0ea5f0 "The request timed out."}, com.facebook.sdk:HTTPStatusCode=200, com.facebook.sdk:ErrorSessionKey=<FBSession: 0x1f03f460, state: FBSessionStateOpen, loginHandler: 0x1f040700, appID: 144027229111940, urlSchemeSuffix: , tokenCachingStrategy:<FBSessionTokenCachingStrategy: 0x1f03fb00>, expirationDate: 4001-01-01 00:00:00 +0000, refreshDate: 2013-04-11 19:54:01 +0000, attemptedRefreshDate: 0001-12-30 00:00:00 +0000, permissions:(
        "user_videos",
        "publish_stream",
        email
    )>} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T19:09:53.777

尝试打开一个 FBRequestConnection（它允许您设置一个长超时），然后将 FBRequest 添加到连接中。这是一个代码片段：

```
FBRequestConnection *connection = [[[FBRequestConnection alloc] initWithTimeout:200.0] autorelease];
        FBRequest *request = [FBRequest requestWithGraphPath:@"me/videos"
                                                  parameters:parameters
                                                  HTTPMethod:@"POST"];

        [connection addRequest:request
             completionHandler:^(FBRequestConnection *connection,
                                 id result,
                                 NSError *error) { 
```

# jquery - 有没有办法为 IE8 及以下用户启用 JQuery 弹出窗口？

> ID：15967431
> 
> 赞同：0
> 
> 时间：2013-04-12T09:16:10.840
> 
> 标签：jquery, css, internet-explorer-8, cross-browser, popup

我有一个用 CSS3 构建的新网站，但使用了一些条件样式表使其在 IE8 及以下版本中看起来合理。

但是，我想在网站上为所有使用 IE8 或更低版本的访问者放置一个弹出窗口。这只会告诉他们该站点可以使用，但为了享受完整的增强功能，他们应该更新浏览器。然后，我将在弹出窗口中提供 2 个链接，一个用于下载 Firefox，另一个用于继续而不更新。

我想用 JQuery 来做这件事。

我需要一种方法，我也可以使用它来定位其他浏览器，例如 Firefox，这样我就可以测试它是否有效。我是 Mac 用户，对 IE 进行测试的访问权限有限。因此，我可以在其他浏览器上测试然后将代码切换到目标 IE8 及以下的解决方案将是理想的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:54:03.033

使用[Modernizr](http://modernizr.com/)检测您正在使用的功能是否不受支持。[示例](http://jsfiddle.net/4SHUq/1/)：

```
if(!Modernizr.flexbox) {
  alert("Flexbox not supported");
} 
```

# ssas - SSAS所有会员问题

> ID：15967435
> 
> 赞同：0
> 
> 时间：2013-04-12T09:16:18.100
> 
> 标签：ssas, ssas-2008, ssas-2008-r2

假设我们有一个具有三个属性的产品维度：

*   产品 ID（密钥）
*   颜色
*   类别

似乎每个属性都有一个 All 成员。

每个 All 成员都是独立的？我的意思是 Color 属性的 All 成员具有与 Category 属性的 All 成员不同的值在技术上是可行的吗？

是否可以谈论元组（所有“颜色”，冬季类别）？

产品维度本身有一个 All 成员？

我的意思是在谈论 (2012 Year, Jan Month) 时 Year 和 Month 属于 Date 维度（与 Product 维度不同）时，我应该认为它是指：

（2012 年、1 月、ProductID 属性所有成员、颜色属性所有成员、类别属性所有成员）

或者

（2012年，1月，产品维度All Member）

?

编辑：也许我应该重写这个问题......我根本不确定给定的多维数据集中存在多少“所有成员”，以及如何引用它们中的每一个。

我正在读一本关于 SSAS 2008 R2 的书。经过更多阅读后，我认为我应该更新问题，例如，当我提到属性时，我应该说属性层次结构（没有用户定义）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:05:54.380

与其回答我的问题，我建议任何在试图理解元组或立方体空间、mdx 表达式到底是什么而感到迷茫的人阅读《Microsoft SQL Server 2008 MDX Step by Step》一书

# php - PHP在多个表列中搜索关键字

> ID：15967439
> 
> 赞同：0
> 
> 时间：2013-04-12T09:16:26.143
> 
> 标签：php, search, multiple-columns

我有下面的搜索脚本在表中执行多列搜索，但结果不符合预期，很少有数据行显示为 status =`new`和 company name = `demo`，有人可以指出以下查询有什么问题吗？在这些条件下执行搜索的更准确查询是什么？

```
SELECT * FROM messageboard AS m LEFT JOIN users AS u ON m.author_id=u.user_id 
WHERE m.status='approved' 
AND u.user_email LIKE '%demo%' 
OR u.company_name LIKE '%demo%' 
OR m.subject LIKE '%demo%' 
ORDER BY m.posted_time DESC 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:18:55.843

```
SELECT * FROM messageboard AS m LEFT JOIN users AS u ON m.author_id=u.user_id 
WHERE m.status='approved' 
AND (u.user_email LIKE '%demo%' 
OR u.company_name LIKE '%demo%' 
OR m.subject LIKE '%demo%' )
ORDER BY m.posted_time DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:20:25.143

我建议用括号组织你的 AND 和 OR 条件。

# highcharts - 在高图中切换图例文本单击事件

> ID：15967441
> 
> 赞同：1
> 
> 时间：2013-04-12T09:16:31.157
> 
> 标签：highcharts, highstock

legendItem 切换事件后如何重置其原始图表值？ [重置](http://jsfiddle.net/santoshgiridhar/t2MxW/20876/) 图例ItemClick：

```
function(event) 
                {
                    var seriesIndex = this.index;
                    var series = this.chart.series;

                    for (var i = 0; i < series.length; i++)
                    {
                        if (series[i].index != seriesIndex)
                        {
                            series[i].hide();
                        } 
                        else
                        {
                            series[i].show();    
                        }
                    }
                    return false;
                } 
```

注意：目前此代码的工作方式类似于 RADIO button event[toggle]; 如何使它像 CHECKBOX 事件一样工作，条件是用户无法取消选中两者！但可以检查这两个事件！！！:-D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:43:27.267

我能够从我的同行那里找到上述问题的解决方案......使用某些 API 可能有更好的方法......这里是[解决方案的链接](http://jsfiddle.net/santoshgiridhar/t2MxW/20881/)

```
legendItemClick: function(event) 
            {
                var seriesIndex = this.index;
                var series = this.chart.series;
                var visibleCount= 0;
                var visibleIndex= 0;
                for (var i = 0; i < series.length; i++)
                {
                    if (series[i].visible)
                    {
                        visibleIndex =i;
                        visibleCount++;
                    }
                }
                if (visibleCount===1  && visibleIndex === seriesIndex)
                {
                    event.preventDefault();
                }
            } 
```

# ios - iOS 应用程序的登录功能给出异常 NSInvalidArgumentException

> ID：15967444
> 
> 赞同：0
> 
> 时间：2013-04-12T09:16:42.483
> 
> 标签：ios, xcode, uistoryboard

我正在 XCode 中为 iOS 应用程序创建登录页面。屏幕上有一个登录按钮，以及用户名和密码文本字段。单击按钮后，应执行用户身份验证，并且用户应该能够进入下一个屏幕。我正在使用以下代码：

```
-(IBAction)validateLogin:(id)sender
{  Gusr = @"";
   Gpass = @"";
    const char *dbpath = [mDatabasePath UTF8String];
    sqlite3_stmt    *statement;
    if (sqlite3_open(dbpath, &mDiary) == SQLITE_OK)
    {
        NSString *querySQL = [NSString stringWithFormat: 
                              @"SELECT mPassword FROM USERDETAIL WHERE mUserName=\"%@\"", 
                              mUserName.text]; 
         const char *query_stmt = [querySQL UTF8String];
        if (sqlite3_prepare_v2(mDiary, 
                               query_stmt, -1, &statement, NULL) == SQLITE_OK)
        {
            if (sqlite3_step(statement) == SQLITE_ROW)
            {

                Gusr =  [[NSString alloc]initWithUTF8String:(const char *) sqlite3_column_text(statement, 0)];                    
                Gpass  = [[NSString alloc]initWithUTF8String:(const char *) sqlite3_column_text(statement, 1)];                    

                  //  NSLog(@"'%@'",Gusr);         
                  //  NSLog(@"'%@'",Gpass);        

                if ([mUserName.text isEqualToString:Gusr] && [Gpass isEqualToString:mPassword.text]){
                [self performSegueWithIdentifier:@"Login" sender:self];
                }else {
                    NSLog(@"not valid");
                }
            sqlite3_finalize(statement); 
            }

            sqlite3_close(mDiary); 

        }   

    }     
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"Login"]) {

        // Get destination view
        dashboardViewController *vc = [segue destinationViewController];

        // Get button tag
        NSInteger tagIndex = [(UIButton *)sender tag];

        // Set the selected button in the new view
      //  [vc setSelectedButton:tagIndex];
    }
} 
```

在运行构建时，我收到以下异常：由于未捕获的异常 'NSInvalidArgumentException' 导致应用程序终止，原因：' *** -[NSPlaceholderString initWithUTF8String:]: NULL cString'

究竟是什么问题？即使异常已修复，此代码是否可以成功执行登录？

# ibm-mobilefirst - Worklight Direct 更新和脱机运行

> ID：15967446
> 
> 赞同：0
> 
> 时间：2013-04-12T09:16:45.003
> 
> 标签：ibm-mobilefirst

我想实现这样的功能。即： 1) 在连接worklight服务器成功的情况下，可以直接更新。2) 在连接worklight服务器失败的情况下，应用可以离线运行。

下面是我在“initOptions.js”中的配置。

```
// # Should application automatically attempt to connect to Worklight Server on                           application start up
// # The default value is true, we are overriding it to false here.
connectOnStartup : true,

// # The callback function to invoke in case application fails to connect to Worklight Server
onConnectionFailure: function (){
    alert("onConnectionFailure");
    doDojoReady();
},

// # Worklight server connection timeout
timeout: 10 * 1000,

// # How often heartbeat request will be sent to Worklight Server
heartBeatIntervalInSecs: 20 * 60,

// # Should application produce logs
// # Default value is true
//enableLogger: false,

// # The options of busy indicator used during application start up
busyOptions: {text: "Loading..." 
```

但它不起作用。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:11:02.550

只有当与服务器的连接可用时，才会发生直接更新。从您提出问题的方式来看，您的问题是当应用程序无法连接到服务器时，它不能“离线”工作。因此，您的问题与直接更新无关（如果确实如此，请适当地重新表述您的问题）。

您应该做的是[阅读有关在 Worklight 中脱机工作的培训材料](http://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v506/05_04_Working_offline.pdf)。

您没有指定什么“不起作用”。您是否收到您在 onConnectionFailure 中放置的警报？你的 doDojoReady 函数是什么样子的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:17:08.577

我也在 Worklight 中使用 Dojo。

我的做法是将工作灯配置为在启动时**不**连接

```
 var wlInitOptions = {  
     connectOnStartup : false 
```

然后在我的 wl init 中初始化我的 dojo 应用程序，

```
 function wlCommonInit(){
  loadDojoLayers(); 
 }; 
```

需要我正在使用的任何层，然后进行实际的 dojo 解析

```
 require([ "dojo/parser",
          "myApp/appController",
          "dojo/domReady!"
        ],
       function(parser, appController) {                
           parser.parse().then (function(){
                appController.init();
       });          
}); 
```

最后，现在 WL、Dojo 和 myApp 都准备好了。我尝试 WL 连接，从我的 appController.init() 调用此方法

```
connectWLServer: function() {

      // possibly WL.Client.login(realm) here

       var options = {
             onSuccess: lang.hitch(this, "connectedWLServer"),
             onFailure: lang.hitch(this, "connectWLServerFailed"),
       };

       WL.Client.connect(options);
} 
```

此时会发生任何直接更新活动。请注意，无论连接是否有效，整个应用程序都会继续运行，但显然我们可以在成功和失败的情况下运行适当的代码。根据具体需要什么身份验证，可能需要显式登录调用——基于适配器的身份验证不能从 connect() 内部自动发生。

# apache - 我不希望我的 VirtualHost 响应 IP 和域

> ID：15967447
> 
> 赞同：0
> 
> 时间：2013-04-12T09:16:56.563
> 
> 标签：apache, configuration, virtualhost, vhosts

我正在尝试配置我的虚拟主机。我想要的行为如下：当我输入“ [http://www.mydomain.com](http://www.mydomain.com) ”时，我会显示“mydomain”页面。当我输入 IP“ [http://WW.XX.YY.ZZ](http://WW.XX.YY.ZZ) ”时，我会在“/var/www”中显示默认页面。

目前，无论我在地址栏中输入什么，我都会显示“mydomain”页面。

这是我的配置文件：

*apache2.conf：*

```
<VirtualHost _default_:*>
  DocumentRoot /var/www
</VirtualHost>

# Include the virtual host configurations:
Include sites-enabled/ 
```

*启用站点/webmin.xxx.conf*

```
<VirtualHost mydomain.com:80>
  ServerName mydomain.com
  DocumentRoot "/home/mydomain/www"
  <Directory "/home/mydomain/www">
    allow from all
    Options +Indexes
  </Directory>
</VirtualHost> 
```

顺便说一句，每次我重新启动 apache 时，都会出现以下错误：

```
* Restarting web server 
apache2: Could not reliably determine the server's fully qualified domain name, using 127.0.0.1 for ServerName
[Fri Apr 12 13:14:51 2013] [warn] NameVirtualHost *:80 has no VirtualHosts
waiting apache2: Could not reliably determine the server's fully qualified domain name, using 127.0.0.1 for ServerName
[Fri Apr 12 13:14:52 2013] [warn] NameVirtualHost *:80 has no VirtualHosts 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:14:56.357

在 /etc/hosts 中有一个条目：

YOUR_IP mydomain.com

它将帮助 apache 找到正确的 IP 地址。

# java - 什么会导致 GenericObjectPool 丢弃对象？

> ID：15967455
> 
> 赞同：0
> 
> 时间：2013-04-12T09:17:16.300
> 
> 标签：java, connection-pooling, apache-commons

在我目前正在使用的系统中，我们使用 Apache Commons [GenericObjectPool](http://commons.apache.org/proper/commons-pool/api-1.6/org/apache/commons/pool/impl/GenericObjectPool.html)作为我们的 Oracle 连接池。我们最近注意到，不是所有连接都被永久保留和重复使用，而是池中的连接数量上升和下降，就好像连接被丢弃一样。在代码中，我们没有调用 clear() 或 evict() 方法，并且 testOnBorrow 和 testOnReturn 标志都设置为 false。还有什么可能导致对象被丢弃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:17:16.300

在我写它的时候解决了这个问题。尽管我们将 maxActive 设置为我们首选的池大小，但我们没有设置 maxIdle 属性，默认值为 8，因此只要有超过 8 个连接空闲，它们就会被丢弃。

# python - 我可以将 pandas DataFrame 导出到 Excel 剥离 tzinfo 吗？

> ID：15967468
> 
> 赞同：0
> 
> 时间：2013-04-12T09:17:45.307
> 
> 标签：python, excel, pandas, time-series, tzinfo

我在 pandas 0.10.1 中有一个时区感知 TimeSeries。我想导出到 Excel，但时区阻止日期在 Excel 中被识别为日期。

```
In [40]: resultado
Out[40]: 
fecha_hora
2013-04-11 13:00:00+02:00    31475.568
2013-04-11 14:00:00+02:00    37263.072
2013-04-11 15:00:00+02:00    35979.434
2013-04-11 16:00:00+02:00    35132.890
2013-04-11 17:00:00+02:00    36356.584 
```

如果我用 剥离 tzinfo `.tz_convert(None)`，日期将转换为 UTC：

```
In [41]: resultado.tz_convert(None)
Out[41]: 
fecha_hora
2013-04-11 11:00:00    31475.568
2013-04-11 12:00:00    37263.072
2013-04-11 13:00:00    35979.434
2013-04-11 14:00:00    35132.890
2013-04-11 15:00:00    36356.584 
```

是否有适用`.replace(tzinfo=None)`于索引中每个日期的 TimeSeries 方法？

或者，有没有办法将时间感知 TimeSeries 正确导出到 Excel？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:13:34.217

您可以简单地创建没有时区的副本。

```
import pandas as pa

time = pa.Timestamp('2013-04-16 10:08', tz='Europe/Berlin')
time_wo_tz = pa.datetime(year=time.year, month=time.month, day=time.day, 
                         hour=time.hour, minute=time.minute, second=time.second,
                         microsecond=time.microsecond) 
```

当您想要转换时间序列的整个索引时，请使用列表推导。

```
ts.index = [pa.datetime(year=x.year, month=x.month, day=x.day, 
                        hour=x.hour, minute=x.minute, second=x.second, 
                        microsecond=x.microsecond) 
            for x in ts.index] 
```

# javascript - 将字母转换为对应的数字

> ID：15967470
> 
> 赞同：-1
> 
> 时间：2013-04-12T09:17:54.927
> 
> 标签：javascript

我必须将字母转换为相应的数字，就像我有一个像“DRSG004556722000TU77”这样的数据，A 的索引是 10，B 是 11，C 是 12，依此类推，直到 Z 是 35。

任何帮助提示？

这是返回我ascii代码的javascript，但我想获得相应字母表的上述缺陷

```
var string = DRSG004556722000TU77;
    function getColumnName(string) {
    return ((string.length - 1) * 26) + (string.charCodeAt(string.length - 1) - 64);
    }
    document.write( getColumnName(string) ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:53:18.130

```
var string = 'DRSG004556722000TU77';

function getColumnName(string) {
    var recode = new Array(), i, n = string.length;
    for(i = 0; i < n; i++) {
        recode.push(filter(string.charCodeAt(i)));
    }
    return recode;
}

function filter(symbol) {
    if ((symbol >= 65) && (symbol <= 90)) {
        return symbol - 55;
    } else if ((symbol >= 48) && (symbol <= 57)) {
        return symbol - 48;
    }
}

document.write(getColumnName(string)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:33:07.893

这可能会有所帮助

```
var output = [], code, str = 'DRSG004556722000TU77',i;
for(i in str){
 code = str.charCodeAt(i);
 if(code <= 90 && code >= 65){
 // Add conditions " && code <= 122 && code >= 97" to catch lower case letters
   output.push([i,code]);
 }
} 
```

现在输出包含所有字母代码及其相应的索引

# javascript - 使用 HandlebarsJS 和动态数据

> ID：15967472
> 
> 赞同：1
> 
> 时间：2013-04-12T09:18:00.803
> 
> 标签：javascript, web-applications, handlebars.js

我正在将 Handlebars.JS 用于网络应用程序，但我不确定如何让 Handlebars 在数据发生变化时不断更新数据。

这里有两个具体问题。

1.  我正在使用 {{#each}} 块助手来遍历列表。将文本框链接到它的最佳方法是什么，它将过滤列表并在更新时更新 DOM。

2.  使用 AJAX 定期刷新和拉取数据。当新数据到达时，用新数据更新 DOM 的最佳方法是什么？

谢谢。

# java - 在 ImageIO.write 之后，“mimetype: application” 显示在图片上，而不是“mimetype: image”

> ID：15967480
> 
> 赞同：0
> 
> 时间：2013-04-12T09:18:20.717
> 
> 标签：java, image, file-io, mime-types

当我像这样简单地从另一个创建新图像时：

```
 public static void scaleByTwoRight(String src, String dest)
    throws IOException {
           BufferedImage bsrc = ImageIO.read(new File(src));
           int width          = bsrc.getWidth()/2;
           int height         = bsrc.getHeight();
           BufferedImage bdest = bsrc.getSubimage(width, 0, width, height);
           ImageIO.write(bdest,"PNG",new File(dest));
  } 
```

源文件 (src) = C:...\Manga\Shonan Juna_ Gumi Tome 11\Shonan Junaï Gumi Tome 11 - 091B.png 目标文件 (dest) = C:...\Manga\Shonan Junaï Gumi Tome 11 - 091B_A .png

生成文件示例：[https ://docs.google.com/file/d/0B1vKCZzB5hxqYzNsUWF5RHA2Wm8/edit?usp=sharing](https://docs.google.com/file/d/0B1vKCZzB5hxqYzNsUWF5RHA2Wm8/edit?usp=sharing)

问题：新图像具有 mimetype: application 而不是 mimetype: image

我如何得出这个结论：我正在使用一个函数来测试文件是否是图像：

```
public static boolean isImage(String src)
    throws IOException {
          File f = new File(src);
          String mimetype= new MimetypesFileTypeMap().getContentType(f);
          String type = mimetype.split("/")[0];
          if(type.equals("image")){
              return true;
          }else{ 
              System.out.println("mimetype: "+type);
              return false;
          }
  } 
```

如果 Mime 类型不正确，它不会产生巨大的影响，但我更喜欢让它正常工作..

谢谢你的帮助！

注意：我在 Windows 7 / 32b JVM 1.7 / Eclipse Helios 下运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:34:34.413

您的代码在我的机器上运行良好。我有 windows XP，32 位，尝试使用 jpeg 图像，它只返回 mimetype 作为图像/jpeg。希望您不要尝试同时执行这两个功能。目标文件名也应包含正确的扩展名，如 .jpeg 或。等..png

# jquery - Jquery计算2个元素之间的项目

> ID：15967481
> 
> 赞同：3
> 
> 时间：2013-04-12T09:18:23.650
> 
> 标签：jquery, html

我有一个这样的 HTML 树

```
<div class="container">
    <h1>title</h1>
    <div class="item">1</div>
    <div class="item">2</div>
    <h1>title</h1>
    <div class="item">3</div>
    <div class="item">4</div>
    <div class="item">5</div>
    <div class="item">6</div>
    <div class="item">7</div>
    <h1>title</h1>
    <div class="item">8</div>
    <div class="item">9</div>
    <div class="item">10</div>
</div> 
```

我有一个单击功能，每次选择 div 类项中的图像时都会运行，无论如何我可以计算一个类项彼此相邻的 div 的数量。

即，如果我在上面的示例中单击“1”，它将返回 2，因为在 h1 之前有 2 个 div，如果我单击项目 7，它将返回 5 等等

那可能吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T09:37:07.940

这将为您工作：

```
$('.item').on('click',function(){
    var h1 = $(this);
    while(!h1.is('h1')) h1 = h1.prev();
    alert(h1.nextUntil('h1').length);
}); 
```

[**演示**](http://jsfiddle.net/eJJ99/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T10:19:08.063

```
$('.item').click(function () {
        alert($(this).prevAll('h1').first().nextUntil('h1').length);

}); 
```

[JS 小提琴链接](http://jsfiddle.net/rahularyansharma/UZPLx/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T09:22:11.600

是的。您可以计算所有具有该类的兄弟姐妹`item`：

```
var count = $(this).siblings('.item').andSelf().length; 
```

（在 jQ 1.8 及更高版本中，您应该使用`addBack()`not `andSelf()`）

jQuery API 参考非常有帮助，推荐阅读：

*   [http://api.jquery.com/siblings/](http://api.jquery.com/siblings/)
*   [http://api.jquery.com/addBack/](http://api.jquery.com/addBack/)

最重要的是，选择和遍历方法的两大列表：

*   [http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)
*   [http://api.jquery.com/category/traversing/](http://api.jquery.com/category/traversing/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-12T09:58:14.793

试试这个

```
 $(document).ready(function(){
        $('.item').click(function(){

            var title = $(this).prevAll('h1').first();
            var nextElement = title;
            var reachedNextTitle = false;
            var noOfDiv = 0;
            var loopLimit = 1000;
            var count = 0;
            while(!reachedNextTitle){
                count ++;
                nextElement = nextElement.next();
                if(nextElement.is('h1')){
                    reachedNextTitle = true;
                }

                if(nextElement.is('div')){
                    noOfDiv ++;
                }
                if(count > loopLimit){
                    break;
                }
            }

            alert(noOfDiv);
        });
    }); 
```

# javascript - 使用 Google 闭包在 JavaScript 中进行条件赋值： | 与 ||

> ID：15967483
> 
> 赞同：0
> 
> 时间：2013-04-12T09:18:27.243
> 
> 标签：javascript, conditional, variable-assignment, google-closure

我正在使用 Google Closure 和 LOVE 条件分配。我经常使用

```
var stuff = (condition) ? opt0: opt1; 
```

方法，最近被引入

```
var stuff = opt_param || defaultValue; 
```

但我注意到一个奇怪的行为，因为它似乎

```
var stuff = opt_param | defaultValue; 
```

也可以工作（即使用单个|），但这似乎将变量“类型转换”为数字。我无法找到任何有关此的文档，所以这是我的问题：

和单有什么区别| 和双|| 在逻辑和分配方面？我对数字类型转换的假设是正确的，还是只是我一直在摆弄的特殊情况的任意产品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:24:16.190

`|`是按位或：

```
3 | 4 = 7
0xFF00FF | 0x00FF00 = 0xFFFFFF 
```

`||`是逻辑 OR，如果为*true*则计算第一个参数，否则计算第二个参数：

```
3 || 4 = 3
0 || 4 = 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:29:13.047

简而言之，single`|`指的是按位运算`OR`符，它“`OR`对每对位执行操作。如果是或则`a OR b`产生”。[**来自MDN**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators#.7C_%28Bitwise_OR%29)的示例：`1``a``b``1`[](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators#.7C_%28Bitwise_OR%29)

 **```
 9 (base 10) = 00000000000000000000000000001001 (base 2)
    14 (base 10) = 00000000000000000000000000001110 (base 2)
                   --------------------------------
14 | 9 (base 10) = 00000000000000000000000000001111 (base 2) = 15 (base 10) 
```

While`||`是一个逻辑`OR`，它评估赋值中的第一个非 falsy 语句：

```
 123 || 0      === 123
false || "Text" === "Text"
   "" || true   === true 
```

所以基本上这两个运算符是*不可互换*的，可能会导致不同的值：

```
10 | 2  === 10
10 || 2 === 10 
```

... 然而，

```
9 | 14  === 15
9 || 14 === 9 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:28:07.227

`||`运算符是短路或。如果它是真实的，它会分配第一个或第二个。 `|`另一方面是按位运算符。它对两个参数执行按位或。如果第一个评估为`0`按位 OR 的结果，则将是第二个参数。

当两者都是数字时，它会给出错误的结果。最好一起去`||`。

请查看[MDN 上的位运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators)。**

# mysql - MYSQL - GROUP_CONCAT 仅显示重复项

> ID：15967486
> 
> 赞同：0
> 
> 时间：2013-04-12T09:18:38.053
> 
> 标签：mysql, group-concat

我有 2 个 SQL 表。

1.  第一个表有一个部门 ID 到学生 ID 的映射。（一个学生可能属于多个系，一个系有很多学生）。
2.  第二个表有学生和他们的爱好的映射。（也有多对多的关系）

表的示例快照：

```
DESC DEPARTMENT_STUDENTS;
----------------------------
    DEPT_ID    STUDENT_ID
----------------------------
    Physics       123
    Mathematics   111
    Physics       111
    CS            45
    CS            56
    Mathematics   89

DESC STUDENTS_HOBBIES;
-------------------------------
    STUDENT_ID      HOBBY
-------------------------------
       111          Skiing
       111          Singing
       111          Browsing
       123          Singing
       123          Browsing
       123          Reading
       45           Origami
       56           Origami
       56           Making Prank Calls
       89           Reading 
```

我正在寻找一个查询，该查询将提供每个部门*所有学生的共同爱好列表。*所需的输出如下所示：

```
-----------------------------------------
     DEPT_ID         GROUP_CONCAT(...)
-----------------------------------------
    Physics          (Singing, Browsing)
    Mathematics      ()
    CS               (Origami) 
```

我快到了，在稍微摆弄一下 MySQL 之后，我能够将一个部门的所有（不是常见的）爱好归为一组。GROUP_CONCAT 还提供了消除重复项的方法。我能想到的一种方法是通过以下查询以编程方式检索重复项：

```
SELECT DEPT_ID, GROUP_CONCAT(OP.HOBBIES) FROM DEPARTMENT_STUDENTS DS
   INNER JOIN (SELECT STUDENT_ID, GROUP_CONCAT(HOBBY)AS HOBBIES FROM STUDENTS_HOBBIES 
               GROUP  BY STUDENT_ID) OP
           ON OP.STUDENT_ID = DS.STUDENT_ID
GROUP  BY DS.DEPT_ID; 
```

有没有办法单独保留重复项？即使在此查询中，也欢迎任何优化。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:02:05.760

干得好：

```
SELECT DEPT_ID, GROUP_CONCAT(HOBBY) FROM (
SELECT 
d.DEPT_ID
, s.HOBBY
FROM
department_students d
INNER JOIN students_hobbies s USING(STUDENT_ID)
GROUP BY d.DEPT_ID, s.HOBBY
HAVING COUNT(DISTINCT s.STUDENT_ID) > 1
)sq 
GROUP BY DEPT_ID 
```

# web - 任何 Web 应用程序都可能面临哪些安全威胁？

> ID：15967488
> 
> 赞同：1
> 
> 时间：2013-04-12T09:18:46.127
> 
> 标签：web, security

我使用backbone.js 制作了一个网络应用程序。我现在正试图涵盖它的安全方面？

任何 Web 应用程序可能面临的潜在安全威胁是什么，以及需要采取哪些步骤来保护应用程序免受这些威胁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:36:32.143

作为一个 JS 应用程序，它可能值得快速浏览一下与 JS 相关的 owasp 前 10 名

[http://erlend.oftedal.no/blog/?blogid=125](http://erlend.oftedal.no/blog/?blogid=125)

```
A1 - 注射
A2 - 跨站脚本 (XSS)
A3 - 损坏的身份验证和会话管理
A4 - 不安全的直接对象引用
A5 - 跨站请求伪造 (CSRF)
A6 - 安全配置错误
A7 - 不安全的加密存储
A8 - 未能限制 URL 访问
A9 - 传输层保护不足
A10 - 未经验证的重定向和转发

```

您并没有真正提供有关该站点的功能或存储的任何详细信息，但上面的列表（在链接中包含更多详细信息）是最好的起点。

理想情况下，您应该在定义每个功能后考虑安全性。

# css - 为什么我的 CSS 浮动不能正常工作？（宽度、高度和浮动在 CSS 中定义）

> ID：15967489
> 
> 赞同：0
> 
> 时间：2013-04-12T09:18:50.257
> 
> 标签：css, css-float, html

我试图将 4 个块彼此相邻放在同一行中，但我无法在代码中找到我的“错误”，所以如果有人知道为什么这不起作用......虽然在 Dreamweaver 中浮动显示正确，但是当单击 Live看来，它们只是一个低于另一个。我花了很长时间试图在这里找到答案，但我没有发现与我类似的问题，所以任何帮助将不胜感激。

这是代码：CSS：

```
<style>
#stebr {width: 890px; height: 300px;margin-top: 50px;}
#stebr .pic { width: 195px; height: 150px; background:url(img/s1.png) no-repeat; }
#stebr .pic2 { width: 195px; height: 150px; background:url(img/s2.png) no-repeat; }
#stebr .pic3{ width: 195px; height: 150px; background:url(img/s3.png) no-repeat; }

#stebr .naslov h1 { width:195px; height: 25px; font-family: Tahoma, Geneva, sans-serif; font-size: 17px; color:#ff4e00; margin-top:15px; background-image:url(img/line.png); background-position:bottom; background-repeat:no-repeat; }
#stebr .tekst p { width:195px; height: 80px; font-family:Tahoma, Geneva, sans-serif; font-size: 14px; color:#CCC; }

#stebr .1 {width: 195px; height: 290px; float:left; }
#stebr .2 {width: 195px; height: 290px; float: left;}
#stebr .3 {width: 195px; height: 290px; float: right; }
#stebr .4 {width: 195px; height: 290px; float: right; }
</style> 
```

HTML：

```
<body>
<div id="stebr">
<div class="1">
<div class="pic"></div>
<div class="naslov"><h1>Who are they?</h1></div>
<div class="tekst"><p>Hello world</p></div>
</div>
<div class="2">
<div class="pic2"></div>
<div class="naslov"><h1>What they do</h1></div>
<div class="tekst"><p>Hello world</p></div>
</div>
<div class="3">
</div>
<div class="4"><div class="pic3"></div>
<div class="naslov"><h1>Where are we</h1></div>
<div class="tekst"><p>Hello world</p></div>
</div>
</div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:21:28.503

您的[CSS 无效](http://jigsaw.w3.org/css-validator/#validate_by_input)。您不能以数字开头类选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:22:49.783

不允许以数字开头的 Css 类名，必须重命名。简单地将其重命名为 .c1 .c2 等即可。

**HTML**

```
<div id="stebr">
    <div class="c1">
        <div class="pic"></div>
        <div class="naslov">
            <h1>Who are they?</h1>
        </div>
        <div class="tekst">
            <p>Hello world</p>
        </div>
    </div>
    <div class="c2">
        <div class="pic2"></div>
        <div class="naslov">
            <h1>What they do</h1>
        </div>
        <div class="tekst">
            <p>Hello world</p>
        </div>
    </div>
    <div class="c3"></div>
    <div class="c4">
        <div class="pic3"></div>
        <div class="naslov">
            <h1>Where are we</h1>
        </div>
        <div class="tekst">
            <p>Hello world</p>
        </div>
    </div>
</div> 
```

**CSS**

```
#stebr {
    width: 890px;
    height: 300px;
    margin-top: 50px;
}
#stebr .pic {
    width: 195px;
    height: 150px;
    background:url(img/s1.png) no-repeat;
}
#stebr .pic2 {
    width: 195px;
    height: 150px;
    background:url(img/s2.png) no-repeat;
}
#stebr .pic3 {
    width: 195px;
    height: 150px;
    background:url(img/s3.png) no-repeat;
}
#stebr .naslov h1 {
    width:195px;
    height: 25px;
    font-family: Tahoma, Geneva, sans-serif;
    font-size: 17px;
    color:#ff4e00;
    margin-top:15px;
    background-image:url(img/line.png);
    background-position:bottom;
    background-repeat:no-repeat;
}
#stebr .tekst p {
    width:195px;
    height: 80px;
    font-family:Tahoma, Geneva, sans-serif;
    font-size: 14px;
    color:#CCC;
}
#stebr .c1 {
    width: 195px;
    height: 290px;
    float:left;
}
#stebr .c2 {
    width: 195px;
    height: 290px;
    float: left;
}
#stebr .c3 {
    width: 195px;
    height: 290px;
    float: right;
}
#stebr .c4 {
    width: 195px;
    height: 290px;
    float: right;
} 
```

示例：http: [//jsfiddle.net/Sj99w/](http://jsfiddle.net/Sj99w/)

# c# - 来自 SetupAPI C# 的“SetupScanFileQueue”回调问题

> ID：15967493
> 
> 赞同：1
> 
> 时间：2013-04-12T09:18:53.873
> 
> 标签：c#, .net, windows, setupapi

我在 C# 中实现了一个基于 GUID 枚举设备的 SetupAPI 包装器。我或多或少地将 MSDN 上的 DevCon c++ 示例代码转换为 C#（是的，我非常清楚在 .NET 中这一切都非常痛苦，但它既有趣又具有挑战性）。

我能够获取有关某个设备的所有适当信息，但是当我到达“SetupScanFileQueue”方法时出现了问题。

我似乎无法让“SetupScanFileQueue”来调用我的回调。该方法返回true，所以它似乎正在工作。

我的最终目标是获取特定设备的驱动程序文件。

附加信息：文件似乎已正确添加到 FileQueue，我得到这个似乎复制正确文件的弹出窗口。

```
 // create a file queue so we can look at this queue later 
            var queueHandler = SetupOpenFileQueue();
            if (queueHandler == IntPtr.Zero)
                return false;

            // modify flags to indicate we're providing our own queue 
            var deviceInstallParams = new SP_DEVINSTALL_PARAMS();
            deviceInstallParams.cbSize = Marshal.SizeOf(deviceInstallParams);
            if (!SetupDiGetDeviceInstallParams(handle, ref devInfo, ref deviceInstallParams))
            {
                error = Marshal.GetLastWin32Error();
                return false;
            }

            // we want to add the files to the file queue, not install them! 
            deviceInstallParams.FileQueue = queueHandler;
            deviceInstallParams.Flags |= DI_NOVCP;

            if (!SetupDiGetDeviceInstallParams(handle, ref devInfo, ref deviceInstallParams))
            {
                error = Marshal.GetLastWin32Error();
                return false;
            }

            // now fill queue with files that are to be installed 
            // this involves all class/co-installers 
            if (!SetupDiCallClassInstaller(DIF_INSTALLDEVICEFILES, handle, ref devInfo))
            {
                error = Marshal.GetLastWin32Error();
                return false;
            }

            // we now have a list of delete/rename/copy files 
            // iterate the copy queue twice - 1st time to get # of files 
            // 2nd time to get files 
            // (WinXP has API to get # of files, but we want this to work 
            // on Win2k too) 
            var scanResult = 0;
            var count = 0;
            var callback = new PSP_FILE_CALLBACK(PSP_FILEFOUND_CALLBACK);

            var t = SetupScanFileQueue(queueHandler, SPQ_SCAN_USE_CALLBACK, IntPtr.Zero,
                callback, ref count, ref scanResult);

            SetupDiDestroyDriverInfoList(handle, ref devInfo, SPDIT_CLASSDRIVER);
            if (queueHandler != IntPtr.Zero)
                SetupCloseFileQueue(queueHandler); 
```

我的回调定义如下：

```
 public delegate uint PSP_FILE_CALLBACK(uint context, uint notifaction, IntPtr param1, IntPtr param2);
    public static uint PSP_FILEFOUND_CALLBACK(uint context, uint notifaction, IntPtr param1, IntPtr param2)
    {
        //This callback is never triggered
        return 0;
    } 
```

有没有人对我在“SetupScanFileQueue”函数中做错了什么有任何建议，以及为什么从未调用回调？

很感谢任何形式的帮助！

**编辑：**

我还应该为 SetupScanFileQueue 函数添加 DllImport：

```
[DllImport("setupapi.dll", SetLastError = true, CallingConvention = CallingConvention.StdCall)]
    private static extern uint SetupScanFileQueue(IntPtr QueueHandle,
                                                    int Flags, 
                                                    IntPtr Window,
                                                    PSP_FILE_CALLBACK CallbackRoutine,
                                                    int CallbackContext,
                                                    out int ScanResult
        ); 
```

我也试过没有 CallingConvention。

# python - Python：与 Paramiko 相关

> ID：15967496
> 
> 赞同：-1
> 
> 时间：2013-04-12T09:19:01.107
> 
> 标签：python

我需要在远程机器上运行 windows 命令“XCOPY”。

我正在使用*paramiko*模块连接到远程机器并运行，但是即使路径有效并且如果我手动在远程命令提示符上运行，相同的命令也可以工作，但我会收到类似*路径无效的错误。*但不可能通过*paramiko*。

有人可以帮忙吗？

问候， 阿伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:28:56.867

也许您可以从以下方面获得帮助：

[http://support.microsoft.com/kb/192808](http://support.microsoft.com/kb/192808)

看看。

# c - 为什么 strstr 在我的 C 程序中似乎不起作用？

> ID：15967499
> 
> 赞同：0
> 
> 时间：2013-04-12T09:19:11.253
> 
> 标签：c

源代码如下：

```
#include <stdio.h>
#include <string.h>

char tracks[][80] = {
"I left my heart in Harvard Med School",
"Newark, Newark - a wonderful town",
"Dancing with a Dork",
"From here to maternity",
"The girl from Iwo Jima",
};

void find_track(char search_for[]) {
    int i;
    for (i=0; i<5; i++) {
        if (strstr(tracks[i], search_for)) {
            printf("Track %i: '%s'\n", i, tracks[i]);
        }
    }
}

int main() {
    char search_for[80];
    printf("Search for:");
    fgets(search_for, 80, stdin);
    find_track(search_for);
    return 0;
} 
```

当我使用以下程序时：

> 搜索:城镇

我希望像

> 曲目 1：“纽瓦克，纽瓦克 - 一个美妙的小镇”

相反，我的程序退出并且不打印任何内容。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T09:22:00.857

```
fgets(search_for, 80, stdin); 
```

将用于将输入发送到程序的换行符留在输入缓冲区中，因此`strstr`作为第二个参数传递给的字符串实际上是

```
"town\n" 
```

这不是任何 的子字符串`tracks`，因此找不到匹配项，也没有打印任何内容。

从缓冲区中删除换行符，

```
size_t n = strlen(search_for);
if (n > 0 && search_for[n-1] == '\n') {
    search_for[n-1] = 0;
} 
```

让它搜索`"town"`.

# grails - 如何使用递归闭包从 groovy 中的列表构建树层次结构？

> ID：15967502
> 
> 赞同：5
> 
> 时间：2013-04-12T09:19:23.233
> 
> 标签：grails, groovy, closures

我在 grails 中定义了递归域类：

```
class Work {

  String code
  String title
  String description
  static hasMany = [subWorks:Work]
  static mappedBy = [subWorks: 'parentWork']

  Work getRootWork(){
    if(parentWork) return parentWork.getRootWork()
      else return this
  }

  boolean isLeafWork(){
    return subWorks.isEmpty()
  }

  boolean isRootWork(){
    return !parentWork
  } 
```

我有一个作品列表，但尚未建立层次结构。结构如下：

```
def works = [new Work(code:'A', title:'TitleA'), 
    new Work(code:'B', title:'TitleB'), 
    new Work(code:'A.1', title:'Titile A.1'), 
    new Work(code:'B.1', title:'Title B.1'),
    new Work(code:'B.2', title:'Title B.2'),
    new Work(code:'B.3', title:'Title B.3'), 
    new Work(code:'B.2.2', title:'Title B.2.2'),
    new Work(code:'B.2.3', title:'Title B.2.3'),
    new Work(code:'A.1.1', title:'Title A.1.1'),
    new Work(code:'A.1.2', title:'Title A.1.2'),] 
```

我需要的是根据提示的代码建立这些作品之间的层次关系。例如 A.1 是 A 的第一个子工作；B.1.1 是 B.1 工作的第一个孩子，其父母是 B 工作。我知道 Groovy 支持递归闭包来构建这种层次结构。如何使用 Groovy 递归闭包实现我的目标，例如 Groovy 官方文档中的 JN2515 斐波那契数示例？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T12:06:51.803

像这样...？

```
def root = new Work(code:'*', title:'ROOT')

def build 

build = { p, list ->
  list.groupBy{it.code.split('\\.').first()}.each{ el, sublist ->
    el = sublist[0]        
    el.parentWork = p
    if(sublist.size()>1){
        build(el, sublist[1..-1] )
    }
  }

}
build(root, works.sort{it.code.length()}) 
```

如果我没有错，即使是这种匿名形式也可以工作

```
def root = new Work(code:'*', title:'ROOT')

{ p, list ->
  list.groupBy{it.code.split('\\.').first()}.each{ el, sublist ->
    el = sublist[0]        
    el.parentWork = p
    if(sublist.size()>1){
      call(el, sublist[1..-1] )
    }
  }

}(root, works.sort{it.code.length()}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:51:18.893

我对 Grails 有点生疏，但我似乎记得它以一种智能的方式管理映射集合，这样如果你这样做：`work1.parentWork = work2`then`work1 in work2.subWorks`将验证。如果是这种情况，您只需`parentWork`为每项工作设置 ，您无需为此进行任何复杂的计算： 的父工作`X.Y.Z`将为`X.Y`， 的父工作`X`将为无：

```
def works = [new Work(code:'A', title:'TitleA'),
    new Work(code:'B', title:'TitleB'),
    new Work(code:'A.1', title:'Titile A.1'),
    new Work(code:'B.1', title:'Title B.1'),
    new Work(code:'A.1.1', title:'Title A.1.1')]

def worksByCode = works.collectEntries { [it.code, it] }

works.each {
    if (it.code.contains('.')) {
        def parentCode = it.code[0..it.code.lastIndexOf('.') - 1]
        it.parentWork = worksByCode[parentCode]
    }
} 
```

# c# - 将 C# 转换为 Java，如何处理 IEnumerable？

> ID：15967511
> 
> 赞同：1
> 
> 时间：2013-04-12T09:19:44.420
> 
> 标签：c#, java

我的任务是将一些 C# 代码转换为 Java。大部分都很好，但是我在弄清楚如何翻译 IEnumerable 时遇到了一些麻烦。

我在 C# 中的代码是这样的：

```
public IEnumerable<Cat> Reorder(IEnumerable<Cat> catList)
{

  // some logic that reorders the list

} 
```

我的谷歌搜索建议我应该使用`Iterable<Cat>`它作为替代方案。但是，我还偶然发现了一些说你永远不应该将`Iterable<T>`其作为返回类型的东西。

我对Java中的数据结构有点陌生。我应该返回什么，您将如何重新排序对象集合？

在 C# 中，假设您不使用 linq，您将创建一个空数组或 List 或类似的，并在重复遍历它们时添加项目，检查条件。我将在 Java 中使用哪种数据结构来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:24:33.270

这在一定程度上取决于您想对返回值做什么。
Java 没有 LINQ，所以`Iterable<T>`在循环中使用 other`foreach`有点像 PITA。[这篇博客文章](http://alexruiz.developerblogs.com/?p=2519)更深入地描述了它。
另一种方法是返回一个`Collection<T>`.
话虽如此，返回 an`Iterable<T>`并没有错，只是在某些情况下更难使用返回值。

在 Java 中，您可以对方法内的临时实例使用`List<T>`like的实现。`ArrayList<T>`当您想从方法返回该实例时，返回类型将是 interface`List<T>`或`Collection<T>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:25:24.200

你可以做类似 Collections.sort(list); 如果你在你的对象上实现了一个接口 Comparable（类似的可以用 c# 和 IComparer 完成）

“在反复遍历它们时添加项目，”我希望你的意思不是我想的那样......有很多排序算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:29:59.833

您应该确定所需的数据结构。基本上 3 个伟大的数据结构系列是：

*   **List**：一个有序的基于索引的集合；

*   **Set**：不包含重复元素的集合；

*   **Map**：基于键值的集合（C# 中的字典）。在这种精确的情况下，这里不适用。

根据您的需要，您应该返回`List<Cat>`或`Set<Cat>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T09:27:01.327

*当你需要使用*Iterable 时，它​​没有任何问题。

但是，考虑到上面的代码告诉我的内容，我认为您最好使用***java.util.Collection***或***java.util.List***（如果 catList 绝对是猫列表，则后者）。

重新排序的方式实际上取决于排序要求。它可能就像使用*Collections.sort(List list)一样简单*

# c++ - 删除标点查询

> ID：15967516
> 
> 赞同：0
> 
> 时间：2013-04-12T09:20:00.907
> 
> 标签：c++, string-formatting

我一直在更新我大约两年前编写的一个程序，我遇到了一个从字符串中删除所有标点符号和空格的调用。

调用工作正常，但我不确定这是最有效的方法。

代码行如下：

```
tempMessage.erase(remove_if(tempMessage.begin(), tempMessage.end(), (int(*)(int))ispunct), tempMessage.end()); 
```

我不记得我是从哪里想到这个的，也不记得它是如何组合在一起的，但我希望能够完全理解这个电话。

我知道 std::string.erase 摆脱了第一个参数，直到第二个参数。我还可以看到 remove_if 如何定义起点和终点，但是谁能告诉我 remove_if 调用中的第三个参数来自哪里？

我不记得为什么我的生活需要 (int(*)(int)) 。

当您查看代码时，任何人都可以改进它，或者提高它的效率吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:11:22.610

首先，这通常不起作用；它似乎（并且它可能适用于某些编译器）。您不能将 a 传递`char`给一个参数版本`ispunct`而不引起未定义的行为。

至于强制转换的原因：标准定义了单参数`ispunct`函数*和*双参数 `ispunct`函数模板。为了正确实例化模板函数`erase`，编译器需要知道`ispunct`. 要知道 的确切类型 `ispunct`，编译器需要能够对函数模板进行类型推导。为了进行类型推导，编译器需要知道预期的类型。依赖关系中有一个循环，显式转换（或看起来像显式转换）解决了该循环。

因为使用一个参数版本会`ispunct`导致未定义的行为，并且除非您提供附加参数（ `std::bind`例如使用 ），否则使用两个参数版本将无法编译，所以在 C++ 中进行任何字符串处理的任何人都将拥有已经在他的工具箱来处理这个，并会写这样的东西：

```
tempMessage.erase(
    std::remove_if( tempMessage.begin(), tempMessage.end(), IsPunct() ),
    tempMessage.end() ); 
```

您如何实施`IsPunct`取决于您对本地化的需求。最简单的版本就是：

```
struct IsPunct
{
    bool operator()( char ch ) const
    {
        return ::ispunct( static_cast<unsigned char>( ch ) );
    }
}; 
```

使用`ctype`facet 的版本`locale`稍微复杂一些（您可能希望它保留 的副本 `locale`以及对 facet 的引用，以确保引用的 facet 不会消失）。

# iphone - 通过 FBConnect ios 中的图形 api 获取 page_access_token

> ID：15967518
> 
> 赞同：0
> 
> 时间：2013-04-12T09:20:04.597
> 
> 标签：iphone, ios, objective-c, facebook-graph-api

实际上我想在 facebook 粉丝页面上上传照片所以为此我写了下面的代码

```
[m_facebook setAccessToken:@"BAAGgxy3PqqcBAHqByi2JOtTs .....8SCo8MK22y0smcFnxFEt7U6zVP2U4WpLrpnDWNuwXpvSYB9Btt7ZCMljBGmfxgPKoOdmadmNitSZB47trDv9hXd4wAE3VjZBbWBGMPP1lV8H1rfTcXNRuX8ePqRhxXsAypA7uHkSVyZASp0oaVfY0sJF55O8agZDZD"];

[m_facebook requestWithGraphPath:@"437...6356137/photos"
                               andParams:fbArguments
                           andHttpMethod:@"POST"
                             andDelegate:self]; 
```

使用上面的代码，我可以在我的 facebook 粉丝页面上发布照片，但问题是**我必须对 Page_Access_Token 进行硬编码**，如您所见，任何人都可以告诉我**如何使用 FBConnect 动态访问此 Page_Access_Token 令牌**。我已经通过[这个链接](https://stackoverflow.com/questions/4259573/posting-photos-to-facebook-fan-page-with-ios-sdk)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:54:08.010

您必须通过此行进行身份验证

```
NSArray *permissions =  [[NSArray arrayWithObjects:@"read_stream", @"offline_access", @"publish_stream", @"manage_pages", @"user_photos", @"friends_photos",nil] retain];
[facebook authorize:FB_APP_ID permissions:permissions delegate:self]; 
```

获得身份验证后，您将`AccessToken`通过此委托方法获得

```
 - (void)fbDidExtendToken:(NSString*)accessToken expiresAt:(NSDate*)expiresAt
{
      //Use access token
}

 - (void)fbDidLogin {
[self.facebook1 accessToken];//you can access token once you get this call back. 
```

}

**注意：**当您调用`extendAccessToken`扩展令牌时，上述委托也会在该时间调用。`fbDidLogin`首次获得身份验证时调用委托方法。`fbDidExtendToken`尝试扩展访问令牌时调用委托方法。`accessToken`将根据 expireDate 过期。

# java - Android Spinner 选定索引

> ID：15967520
> 
> 赞同：0
> 
> 时间：2013-04-12T09:20:11.633
> 
> 标签：java, android, android-spinner

我正在开发一个 android 应用程序，我想使用微调器。

我用 String 数组填充 spinnier，例如；

```
String ilArr[] = {"Seçiniz","İstanbul(Avrupa)","İstanbul(Asya)"}; 
```

我想添加选定的位置编号，例如；

从`İstanbul(Avrupa)`微调器中选择时，项目索引将为`34`

我怎样才能做到这一点。

# sql - 根据条件删除重复项

> ID：15967522
> 
> 赞同：3
> 
> 时间：2013-04-12T09:20:17.150
> 
> 标签：sql, oracle

我的表值：

```
COLUMN1  COLUMN2 COLUMN3
WF1      Email   1640
WF1      Email   1641
WF1      Email   N/A
WF3      Email   N/A 
```

预期结果：

```
COLUMN1  COLUMN2 COLUMN3
WF1      Email   1640
WF3      Email   N/A 
```

我需要检索 column2 = 'Email' 的所有记录，如果 column1 包含重复值，我必须选择 column3 <> 'N/A' 的记录。

我阅读了有关分区的教程，但仍然不确定如何获得结果。

任何帮助表示赞赏。

```
CREATE TABLE TABLE1 
    (

     COLUMN1 varchar2(20), 
     COLUMN2 varchar2(20), 
     COLUMN3 varchar2(20) 
    );

INSERT INTO TABLE1
(COLUMN1, COLUMN2, COLUMN3)
VALUES
('WF1', 'Email', '1640');

INSERT INTO TABLE1
(COLUMN1, COLUMN2, COLUMN3)
VALUES
('WF1', 'Email', '1641');

INSERT INTO TABLE1
(COLUMN1, COLUMN2, COLUMN3)
VALUES
('WF1', 'Email', 'N/A');

INSERT INTO TABLE1
(COLUMN1, COLUMN2, COLUMN3)
VALUES
('WF3', 'Email', 'N/A'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:35:28.687

尝试这样的事情：

```
SELECT column1, column2, column3
from(
SELECT column1, column2, column3,
row_number() over (partition BY column1, column2 ORDER BY CASE WHEN column3 = 'N/A' THEN 999999999 ELSE to_number(column3) END ) rn
FROM table1)
WHERE rn = 1 
```

[这是一个sqlfiddle](http://www.sqlfiddle.com/#!4/b090a/9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:44:21.107

如果 column1 在结果中不是唯一的：

```
select column1, column3 from table1 t1 
where column3 != 'N/A' or 
column3 = 'N/A' and not exists
(select * from table1 t2 
where t2.column1 = t1.column1 and t2.column3 != 'N/A') 
```

如果 column1 在结果中必须是唯一的：

```
select column1, column3 from table1 t1 
where column3 != 'N/A' and not exists
(select * from table1 t2 
where t2.column1 = t1.column1 and t2.column3 != 'N/A' and 
to_number(t2.column3, '9999') > to_number(t1.column3, '9999')
) union 
select column1, column3 from table1 t1 
where column3 = 'N/A' and not exists 
(select * from table1 t2 where t2.column1 = t1.column1 and t2.column3 != 'N/A') 
```

请注意，我们使用 union 而不是 union all。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:44:01.273

```
select column1,column2,max(case when column3 = 'N/A' then '0' else column3 end) column3
from table1
group by column1,column2; 
```

# actionscript-3 - 如何通过 netConnection 和 netStream 播放 RTMP 视频

> ID：15967523
> 
> 赞同：5
> 
> 时间：2013-04-12T09:20:24.150
> 
> 标签：actionscript-3, flash, rtmp, flash-player-11

我正在开发一个原型，我必须通过 RTMP 协议播放视频。我的代码如下：

```
private function init():void
    {
        streamID:String = "mp4:myVideo";
        videoURL = "rtmp://fms.xstream.dk/*********.mp4";
        vid = new video();
        vid.width = 480;
        vid.height = 320;

        nc = new NetConnection();
        nc.client = {onBWDone: function():void
            {
            }};
        nc.addEventListener(NetStatusEvent.NET_STATUS, onConnectionStatus);
        nc.connect(videoURL);           
    }

    private function onConnectionStatus(e:NetStatusEvent):void
    {
        if (e.info.code == "NetConnection.Connect.Success")
        {
            trace("Creating NetStream");
            netStreamObj = new NetStream(nc);
            netStreamObj.client = new CustomClient();
            netStreamObj.play(streamID);
            vid.attachNetStream(netStreamObj);
            addChild(vid);
            intervalID = setInterval(playback, 1000);
        }
    }

    private function playback():void
    {
        trace((++counter) + " Buffer length: " + netStreamObj.bufferLength);
    }

class CustomClient 
{
public function onMetaData(info:Object):void
{
    trace("metadata: duration=" + info.duration + " width=" + info.width + " height=" + info.height + " framerate=" + info.framerate);
}
public function onCuePoint(info:Object):void
{
    trace("cuepoint: time=" + info.time + " name=" + info.name + " type=" + info.type);
} 
```

}

但是它没有播放，没有发生任何错误，也没有运行，如果有人有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T21:02:22.823

这样做对我有用。我只是以新闻频道的链接为例，因此请尝试将其替换为您自己的流 url。（ps：忽略像素化，这是一个低分辨率的示例链接）。

另外..首先你有一个错字，你说`vid = new video();`（意思是`= new Video`？？）。这可能是`addChild(vid)`后续线路的问题吗？其次，您需要我在使用 RTMP 时包含的**asyncErrorHandler**、**onFCSubscribe**和**onBWDone**之类的函数，以阻止某些流抛出的错误（无论如何，在我过去的经验中）。此示例代码位于名为 RTMP_test.as 的文档类中（重命名为首选）...

```
package  {

import flash.display.*; 
import flash.events.*;
import flash.net.*;
import flash.media.*;
import flash.system.*;
import flash.utils.ByteArray;

public class RTMP_test extends MovieClip 
{
    public var netStreamObj:NetStream;
    public var nc:NetConnection;
    public var vid:Video;

    public var streamID:String;
    public var videoURL:String;
    public var metaListener:Object;

public function RTMP_test () 
{ init_RTMP(); }

function init_RTMP():void
{
        /*
        streamID  = "mp4:myVideo";
        videoURL = "rtmp://fms.xstream.dk/*********.mp4";
        */
        streamID  = "QVCLive1@14308";
        videoURL = "rtmp://cp79650.live.edgefcs.net/live/";

        vid = new Video(); //typo! was "vid = new video();"

        nc = new NetConnection();
        nc.addEventListener(NetStatusEvent.NET_STATUS, onConnectionStatus);
        nc.addEventListener(AsyncErrorEvent.ASYNC_ERROR, asyncErrorHandler);
        nc.client = { onBWDone: function():void{} };
        nc.connect(videoURL);           
}

private function onConnectionStatus(e:NetStatusEvent):void
{
        if (e.info.code == "NetConnection.Connect.Success")
        {
            trace("Creating NetStream");
            netStreamObj = new NetStream(nc);

            metaListener = new Object();
            metaListener.onMetaData = received_Meta;
            netStreamObj.client = metaListener;

            netStreamObj.play(streamID);
            vid.attachNetStream(netStreamObj);
            addChild(vid);
            //intervalID = setInterval(playback, 1000);
        }
}

private function playback():void
{ 
  //trace((++counter) + " Buffer length: " + netStreamObj.bufferLength); 
}

public function asyncErrorHandler(event:AsyncErrorEvent):void 
{ trace("asyncErrorHandler.." + "\r"); }

public function onFCSubscribe(info:Object):void
{ trace("onFCSubscribe - succesful"); }

public function onBWDone(...rest):void
{ 
    var p_bw:Number; 
    if (rest.length > 0)
      { p_bw = rest[0]; }
    trace("bandwidth = " + p_bw + " Kbps."); 
}

function received_Meta (data:Object):void
{
    var _stageW:int = stage.stageWidth;
    var _stageH:int = stage.stageHeight;

    var _videoW:int;
    var _videoH:int;
    var _aspectH:int; 

    var Aspect_num:Number; //should be an "int" but that gives blank picture with sound
    Aspect_num = data.width / data.height;

    //Aspect ratio calculated here..
    _videoW = _stageW;
    _videoH = _videoW / Aspect_num;
    _aspectH = (_stageH - _videoH) / 2;

    vid.x = 0;
    vid.y = _aspectH;
    vid.width = _videoW;
    vid.height = _videoH;
}

    } //end class

} //end package 
```

* * *

更新代码：

* * *

1.  新的演示链接：现在是 QVC（英国购物）而不是今日俄罗斯（世界新闻）。
2.  添加行：**nc.client = { onBWDone: function():void{} };** （因为 Flash Player 现在更加严格。在没有这条线之前它可以正常工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T09:50:09.503

也许更完整的代码版本是这样的。它应该实时播放 RT 频道。

```
package  {
import flash.events.NetStatusEvent;
import flash.events.AsyncErrorEvent;
import flash.display.MovieClip;
import flash.net.NetStream;
import flash.net.NetConnection;
import flash.media.Video;
import flash.utils.setInterval;

public class RTMP_test extends MovieClip {

    public var netStreamObj:NetStream;
    public var nc:NetConnection;
    public var vid:Video;

    public var streamID:String;
    public var videoURL:String;
    public var metaListener:Object;

    public var intervalID:uint;
    public var counter:int;

    public function RTMP_test ()
    { init_RTMP(); }

    function init_RTMP():void
    {

            streamID  = "RT_2";
            videoURL = "rtmp://fms5.visionip.tv/live/RT_2";

            vid = new Video(); //typo! was "vid = new video();"

            nc = new NetConnection();
            nc.addEventListener(NetStatusEvent.NET_STATUS, onConnectionStatus);
            nc.addEventListener(AsyncErrorEvent.ASYNC_ERROR, asyncErrorHandler);
            nc.connect(videoURL);          
    }

    private function onConnectionStatus(e:NetStatusEvent):void
    {
            if (e.info.code == "NetConnection.Connect.Success")
            {
                trace("Creating NetStream");
                netStreamObj = new NetStream(nc);

                metaListener = new Object();
                metaListener.onMetaData = received_Meta;
                netStreamObj.client = metaListener;

                netStreamObj.play(streamID);
                vid.attachNetStream(netStreamObj);
                addChild(vid);
                intervalID = setInterval(playback, 1000);
            }
    }

    private function playback():void
    {
      trace((++counter) + " Buffer length: " + netStreamObj.bufferLength);
    }

    public function asyncErrorHandler(event:AsyncErrorEvent):void
    { trace("asyncErrorHandler.." + "\r"); }

    public function onFCSubscribe(info:Object):void
    { trace("onFCSubscribe - succesful"); }

    public function onBWDone(...rest):void
    {
        var p_bw:Number;
        if (rest.length > 0)
          { p_bw = rest[0]; }
        trace("bandwidth = " + p_bw + " Kbps.");
    }

    function received_Meta (data:Object):void
    {
        var _stageW:int = stage.stageWidth;
        var _stageH:int = stage.stageHeight;
        var _aspectH:int;
        var _videoW:int;
        var _videoH:int;

        var relationship:Number;
        relationship = data.height / data.width;

        //Aspect ratio calculated here..
        _videoW = _stageW;
        _videoH = _videoW * relationship;
        _aspectH = (_stageH - _videoH) / 2;

        vid.x = 0;
        vid.y = _aspectH;
        vid.width = _videoW;
        vid.height = _videoH;
    }

} 
```

}

# python-2.7 - 使用 Python 的 ReGex 找不到正确的正则表达式

> ID：15967525
> 
> 赞同：0
> 
> 时间：2013-04-12T09:20:26.543
> 
> 标签：python-2.7, helpers, web-clips

我正在尝试从一个设计不佳的网页中​​提取一些文本用于一个项目，经过长时间的研究和学习 python，我接近实现它，但网页设计不佳，找不到合适的常规表达去做。

所以在这里我们有我已经完成的事情。[http://coj.uci.cu/24h/status.xhtml?username=Diego1149&abb=1006](http://coj.uci.cu/24h/status.xhtml?username=Diego1149&abb=1006)从这个网页的源代码中我想得到一个已接受问题的第一个实例的整行。所以我想到了这个

```
exprespatFinderTitle = re.compile('<table id="submission" class="volume">.*(<tr class=.*>.*<label class="AC">.*Accepted.*</label>.*</tr>).*</table>') 
```

但这所做的是剪裁到最后`<tr>`桌子的最后一个。有人可以帮我解决这个问题吗？

我使用 Python 2.7 和 BeautifulSoup 和 urllib

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:35:54.923

单独坚持 BeautitfulSoup；正则表达式*不是*HTML 解析的工具：

```
table = soup.find('table', id='submission')
accepted = table.tbody.find('label', class_='AC')
if accepted:
    row = accepted.parent.parent  # row with accepted column 
```

# vba - VBA vlookup/group by 到锯齿状数组

> ID：15967526
> 
> 赞同：0
> 
> 时间：2013-04-12T09:20:27.270
> 
> 标签：vba, excel, jagged-arrays

假设我有两列`A`，并且`B`在我的电子表格中：

```
A       B
0.2     1
0.0     1
0.5     2
0.7     3
1.5     3
2.7     3
0.1     4 
```

如何根据这样的值将其转换为锯齿状`B`数组

```
arr = [[0.2, 0.0],
       [0.5],
       [0.7, 1.5, 2.7],
       [0.1]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:13:27.323

这就是我所做的：

```
Dim uniqueT() As Variant: uniqueT = DistinctValues(Application.Transpose(Range("arrT")))
Dim nMaturities As Integer: nMaturities = UBound(uniqueT)
Dim nKnots As Integer, row As Integer

Dim K() As Variant: ReDim K(1 To nMaturities)
Dim mids() As Variant: ReDim mids(1 To nMaturities)

With Application.WorksheetFunction
    For i = 1 To nMaturities
        nKnots = .CountIf(Range("arrT"), "=" & uniqueT(i))
        row = .Match(uniqueT(i), Range("arrT"), False) - 1
        K(i) = .Transpose(Range("arrK").Cells(1).Offset(row, 0).Resize(nKnots, 1))
        mids(i) = .Transpose(Range("arrMid").Cells(1).Offset(row, 0).Resize(nKnots, 1))
    Next i
End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:45:20.553

我不认为你会得到一个锯齿状的数组，但如果没有值，下面会给你最大数量和空白的空间。

```
Sub jag_array()

    Dim maxcolb As Long, countcolb As Long, arr() As Variant
    maxcolb = Application.Max(Columns(2))
    countcolb = 1

    ReDim arr(1 To maxcolb, 1 To countcolb) As Variant
    'cycle through all values eg 1 to 4
    For i = 1 To maxcolb

        'expand the array as required
        If Application.CountIf(Columns(2), i) > countcolb Then

            countcolb = Application.CountIf(Columns(2), i)
            ReDim Preserve arr(1 To UBound(arr, 1), 1 To countcolb) As Variant

        End If

        'find and cycle through all found column b
        Set c = Columns(2).Find(i, After:=Cells(1, 2), LookIn:=xlValues)
        If Not c Is Nothing Then

            j = 1
            firstAddress = c.Address
            Do
                'add column a value
                arr(i, j) = Cells(c.Row, 1).Value
                j = j + 1
                Set c = Columns(2).FindNext(c)

                If c Is Nothing Then Exit Do
            Loop While c.Address <> firstAddress
        End If
    Next

'use arr(x, y) as you need to

End Sub 
```

# java - JBoss 7.x SAR 归档类加载问题

> ID：15967528
> 
> 赞同：0
> 
> 时间：2013-04-12T09:20:46.770
> 
> 标签：java, classloader, jboss7.x, jmx, mbeans

我正在尝试构建一个包含 MXBean 的 sar 存档并将其部署在 JBoss 7 中。

直到最近，我在 MXBean 类中引用其他库中的类时遇到问题，因为无论我将它们放在 SAR 存档的哪个位置，JBoss 都不会加载这些库。

我发现可以通过 META-INF 中的 jboss-deployment-structure.xml 文件配置 SAR 的类路径。我的这个文件的版本如下所示：

```
<jboss-deployment-structure>
<deployment>
    <resources>
        <resource-root path="management.api.jar" />
    </resources>
</deployment> 
```

现在加载了“management.api.jar”中的类。

我现在面临的问题是：如果 MXBean 的接口存储在 management.api.jar 并且实现它的类直接在 SAR 归档中，那么，当 JBoss 读取 jboss-service.xml 并尝试要创建 mxbean，它会产生一个指向接口的 ClassNotFoundException（即在 management.api.jar 中）。因此，尽管来自外部 jar 的类加载正常（我通过实际调用一个从 jar 引用类的方法来测试它并且它工作），似乎当 JBoss 注册 bean 时，它并没有通过整个类路径在 jboss-deployment-structure.xml 中定义。

我目前陷入困境，我怀疑这是 JBoss 处理类加载方式中的一个错误。如果有人知道解决此问题的方法（除了将接口从 jar 中取出并将其直接放入 SAR 存档中，因为这会破坏整个“api”的想法）请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:46:31.063

当我理解正确时，管理api应该在不同的项目中使用，并且应该在服务器中是全局的。一个简单的解决方法是将您的 jar 放在 jboss 的模块文件夹中。因此，像下面这样创建一个 module.xml，并将它与你的 jar 一起放在 jboss7/modules/yourfolder 的一个额外文件夹 main 中。（在模块文件夹中，jboss 7.1 存储所有库。）

 `````
 <!-- defines the name of your lib -->
 <module xmlns="urn:jboss:module:1.1" name="yourfolder">

<resources>
    <!-- the jar in your main folder-->
    <resource-root path="management.api.jar"/>
    <!-- Insert resources here -->
</resources>
<dependencies>
 ...dependencies of your api
</dependencies>
</module> 
```` 

`然后你可以从你的 sar-jboss-deployment-structure 加载依赖项`

 ``````
 <dependencies>
      <module name="yourfolder" slot="main" export="true"/>
   </dependencies> 
````  `slot=main 表示您使用文件夹 main，您可以添加不同的版本，如 1.1 等。Main 也是默认插槽，您可以将其省略。

如果您的文件夹结构深入，简单地定义并包含模块等模块。通过这种方式，您可以在 jboss 中定义 api.jars 并从多个项目中引用它。````

# java - Xstream 在输出中插入奇怪的标签

> ID：15967529
> 
> 赞同：4
> 
> 时间：2013-04-12T09:20:48.223
> 
> 标签：java, parsing, serialization, xstream

我有一个 XML 处理应用程序（用 java 编码），它应该获取 2 个 JavaNcss 工具报告并编译它们的差异。

示例 XML 如下：

```
<objects>
<object>
<name>Object Name</name>
<ncss>8</ncss>
<functions>2</functions>
<classes>0</classes>
<javadocs>2</javadocs>
</object>
</objects> 
```

虽然应用程序本身工作正常，但我注意到输出中包含以下标签：

```
 <object reference="../object[18]"/>
    <object reference="../object[41]"/>
    <object reference="../object[10]"/>
    <object reference="../object[41]"/>
    <object reference="../object[12]"/>
    <object reference="../object[41]"/>
    <object reference="../object[14]"/> 
```

我不知道是什么导致了这个麻烦。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T09:49:12.063

XStream 解释在这里[http://x-stream.github.io/graphs.html](http://x-stream.github.io/graphs.html)。

如果它找到重复的对象，那么它使用引用来引用较早的对象。这是默认行为。

如果您不想要，请执行此操作`xstream.setMode(XStream.NO_REFERENCES);`

# javascript - 让用户为我的多功能框 chrome 扩展选择关键字

> ID：15967530
> 
> 赞同：11
> 
> 时间：2013-04-12T09:20:51.227
> 
> 标签：javascript, google-chrome-extension, chromium, omnibox

我刚刚使用多功能框 api 创建了一个 chrome 扩展。

```
"omnibox": { "keyword" : "a" }, 
```

我发现虽然扩展名列在**搜索引擎设置页面**上，但无法使用多个关键字或让用户为我的扩展名选择关键字：

![Chrome 扩展错误](https://i.stack.imgur.com/teuKI.png)

除此之外，扩展关键字的优先级是迄今为止最低的。如果用户已经在`Default search engines / Other search engines`- 部分定义了关键字，则扩展关键字不可用。

有谁知道这些问题中至少一个的解决方案？

~~也许通过使用[NPAPI](http://developer.chrome.com/extensions/npapi.html)？~~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T23:15:15.553

这个讨论之前已经出现过，你可以在这里看到一个例子 - [https://code.google.com/p/chromium/issues/detail?id=75890](https://code.google.com/p/chromium/issues/detail?id=75890)。

似乎只有一个标题：关键字对的原因是为了防止关键字过多。似乎也没有任何支持允许最终用户更改这对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-13T21:17:57.803

我想让人们知道，这似乎已经改变，不再是这种情况。我自己也在探索这种可能性，发现这个页面说这是不可能的。为了在安装后更改我的扩展的关键字，我采取了以下步骤：

1.  右键单击多功能框（地址栏）并选择**编辑搜索引擎**
2.  滚动到最底部（可以选择删除您将找到的很长的网站列表的一半）
3.  在已安装扩展的关键字部分下，找到您要编辑的扩展，然后单击其名称右侧的关键字值。没有编辑按钮，它将变成一个可编辑的字段。

![编辑多功能框关键字](https://i.stack.imgur.com/ZC7So.png)

我在 Windows 上使用 Chrome 版本 30.0.1588.0，但我不确定它可以编辑多长时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-30T12:20:49.250

对于某些扩展，我发现有必要直接编辑扩展源。这通常在 GitHub 或类似的存储库上可用。

1.  将源代码克隆到计算机上的目录
2.  `manifest.json`在扩展的路由目录中打开文件。编辑或添加此部分：

    “多功能框”：{“关键字”：“关键”}

*其中“ `key`”是键盘快捷键本身。*

3.  在 chrome 中，转到：`chrome://extensions/`
4.  删除旧扩展名（如果相关，请小心删除重要数据）
5.  `developer mode`在页面右上角开启
6.  选择`Load unpacked extension...`并导航到克隆的目录
7.  验证扩展程序已在 Chrome 中加载并正常工作
8.  **使用 Chrome 扩展程序浏览 Internet 存在安全风险`developer mode`。**通过`packing`将扩展名解决为单个 .crx 文件（一种 .zip 文件）。
9.  删除新创建的“解压缩”扩展名并单击`Pack extension...` *（您可以使用 .pem 密钥对文件进行签名，但这不是必需的）*。
10.  `developer mode`在页面右上角关闭
11.  导航到克隆目录上方的目录
12.  将步骤中生成的 .crx 文件`packing`拖到 Chrome 窗口中
13.  新的扩展现在应该出现在`chrome://extensions/`页面上
14.  通过导航到`chrome://settings/`->来验证正确的结果`Manage search engines...`
15.  在页面底部的“通过扩展添加的搜索引擎”下，键盘快捷键应该更新并且扩展只出现一次

# asp.net-mvc - 用于 VB 的 T4mvc 打破一切

> ID：15967533
> 
> 赞同：0
> 
> 时间：2013-04-12T09:21:02.933
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-4, t4mvc

我已经对 T4MVC 产生了不健康的依赖，因为它是一个非常棒的库，我已经在 c# 中使用它多年并且从来没有遇到过太大的问题

我正在 VB 中开发一个新的 MVC 4 项目，它似乎破坏了我的很多代码，知道如何解决这个问题我已经尝试在设置中更改 MVC 链接生成类的名称，但它似乎仍然在刹车我的很多代码似乎主要在附带的帐户控制器和一些微软命名空间上，任何人都成功地让它在 VB 中工作

```
Error   6   Type 'ContactsManager.Web.Mvc.LoginModel' is not defined.   C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\AccountController.generated.vb    148 56  ContactsManager.Web.Mvc

Error   7   Type 'ContactsManager.Web.Mvc.RegisterModel' is not defined.    C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\AccountController.generated.vb    165 59  ContactsManager.Web.Mvc

Error   8   Type 'ContactsManager.Web.Mvc.AccountController.ManageMessageId' is not defined.    C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\AccountController.generated.vb    178 59  ContactsManager.Web.Mvc

Error   9   Type 'ContactsManager.Web.Mvc.LocalPasswordModel' is not defined.   C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\AccountController.generated.vb    184 57  ContactsManager.Web.Mvc

Error   10  Type 'ContactsManager.Web.Mvc.RegisterExternalLoginModel' is not defined.   C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\AccountController.generated.vb    203 76  ContactsManager.Web.Mvc

Error   12  Type 'ContactsManager.Web.Mvc.ContactCreate' is not defined.    C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\ContactsController.generated.vb   260 53  ContactsManager.Web.Mvc

Error   13  Type 'ContactsManager.Lib.Models.Web.Address' is not defined.   C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\ContactsController.generated.vb   295 78  ContactsManager.Web.Mvc

Error   14  Type 'ContactsManager.Lib.Models.Web.Address' is not defined.   C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\ContactsController.generated.vb   309 104 ContactsManager.Web.Mvc

Error   15  Type 'ContactsManager.Lib.Models.Web.Email' is not defined. C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\ContactsController.generated.vb   330 76  ContactsManager.Web.Mvc

Error   16  Type 'ContactsManager.Lib.Models.Web.Email' is not defined. C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\ContactsController.generated.vb   344 102 ContactsManager.Web.Mvc

Error   17  Type 'ContactsManager.Lib.Models.Web.SocialNetwork' is not defined. C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\ContactsController.generated.vb   365 84  ContactsManager.Web.Mvc

Error   18  Type 'ContactsManager.Lib.Models.Web.SocialNetwork' is not defined. C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\ContactsController.generated.vb   379 110 ContactsManager.Web.Mvc

Error   19  Type 'ContactsManager.Lib.Models.Web.Phone' is not defined. C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\ContactsController.generated.vb   400 76  ContactsManager.Web.Mvc

Error   20  Type 'ContactsManager.Lib.Models.Web.Phone' is not defined. C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\ContactsController.generated.vb   414 102 ContactsManager.Web.Mvc

Error   21  Type 'ContactsManager.Lib.Models.Web.Url' is not defined.   C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\ContactsController.generated.vb   435 78  ContactsManager.Web.Mvc

Error   22  Type 'ContactsManager.Lib.Models.Web.Url' is not defined.   C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\ContactsController.generated.vb   449 104 ContactsManager.Web.Mvc

Error   27  Identifier expected.    C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\SharedController.generated.vb 38  30  ContactsManager.Web.Mvc

Error   32  Unable to load referenced library 'C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\Bin\Mono.Math.dll': The system cannot find the file specified. 

Error   33  Unable to load referenced library 'C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\Bin\Mono.Math.dll': The system cannot find the file specified. C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\Bin\Mono.Math.dll 

Error   34  Unable to load referenced library 'C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\Bin\Org.Mentalis.Security.Cryptography.dll': The system cannot find the file specified.    

Error   35  Unable to load referenced library 'C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\Bin\Org.Mentalis.Security.Cryptography.dll': The system cannot find the file specified.    C:\Users\Chris McGrath\Documents\Visual Studio 2012\Projects\LinqToNextbus\VBATeamAsignment2013\Assignment2-branch-natesh\ContactsManager.Web.Mvc\Bin\Org.Mentalis.Security.Cryptography.dll 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:18:08.287

请注意，VB 版本没有与 C# 版本保持同步，因此它基于更旧的 T4MVC 版本。据我所知，它当时有效，但我自己没有使用过。

理想情况下，我们需要有人来维护它，但对 VB 的需求一直有限。

# database - 在 Windows Azure 上发布后未创建数据库

> ID：15967535
> 
> 赞同：1
> 
> 时间：2013-04-12T09:21:04.960
> 
> 标签：database, azure, publishing

实际上，我正在为一家非常小的企业开发基本的 ERP。我使用的是 ASP.Net MVC 4 Code First，我使用 Windows Azure 作为 web 主机。在我的本地计算机上一切正常，并且部署完成没有问题：可以访问网站。但是，每当需要访问数据库时，我的应用程序就会崩溃，并出现“非常描述性”的错误：“错误。处理请求时发生错误。”。日志文件中没有关于此错误的线索或详细错误。

经过两天的挖掘，我了解到我的数据库没有初始化：创建了所有表，但没有设置列。因为创建了表，所以我怀疑这是一个连接字符串错误，而是一个迁移错误。我为强制数据库重新初始化所做的所有尝试（尽管 Initializer 类）都失败了。

我在互联网上搜索了一段时间，但我发现没有人和我有同样的问题。

是否有人已经遇到过这种情况，是否有解决方案？感谢您的回答。

PS：对不起英文错误，这不是我的母语:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:54:37.510

如果您使用的数据库`sql`比您应该使用 [SQL 数据库迁移向导](http://sqlazuremw.codeplex.com/)将本地 sql 数据库部署到 Windows azure。这将完美而轻松地完成这项工作。

# sql - SQL将所有具有字符值的行更改为null

> ID：15967537
> 
> 赞同：0
> 
> 时间：2013-04-12T09:21:08.443
> 
> 标签：sql

我有一列`phone`，我希望所有具有字符值的记录都更改为`null`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T09:23:33.657

```
UPDATE table SET phone = NULL WHERE phone LIKE '%[a-z]%' 
```

SQL 小提琴：[http ://sqlfiddle.com/#!3/d41d8/12424](http://sqlfiddle.com/#!3/d41d8/12424)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:30:57.790

这适用于 MySQL - 将 phone 设置为 NULL 其中 phone 包含至少一个字符：

```
UPDATE phone SET phone = null  WHERE phone REGEXP '[a-zA-Z]+' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:35:12.267

尝试以下：

```
UPDATE table SET phone = null  WHERE IsNumeric(phone)!=1 
```

尝试使用`IsNumeric`SQL 中的函数。

# jpa - Eclipselink JPA MappingSelectionCriteria 自定义

> ID：15967541
> 
> 赞同：0
> 
> 时间：2013-04-12T09:21:31.133
> 
> 标签：jpa, eclipselink, one-to-many, one-to-one, expressionbuilder

根据[EclipseLink/Examples/JPA/MappingSelectionCriteria](http://wiki.eclipse.org/EclipseLink/Examples/JPA/MappingSelectionCriteria)我可以对 OneToOne 或 OneToMany 关系进行一些过滤。为此，我必须实施`DescriptorCustomizer`.

**我的问题是：**我可以用这种技术做一些条件过滤吗？怎么做？我的意思是，在提到的链接的例子中，我们可以写这样的东西

```
public class ConfigureBsFilter implements DescriptorCustomizer {

    public void customize(ClassDescriptor descriptor) throws Exception {
        OneToManyMapping mapping = (OneToManyMapping) descriptor
                .getMappingForAttributeName("bs");

        ExpressionBuilder eb = new ExpressionBuilder(mapping
                .getReferenceClass());
        Expression fkExp = eb.getField("A_ID").equal(eb.getParameter("A_ID"));
        Expression activeExp = eb.get("active").equal(true);

        mapping.setSelectionCriteria(fkExp.and(activeExp));
    }
} 
```

但是如果在表达式中

```
Expression activeExp = eb.get("active").equal(true); 
```

`"active"`并非总是如此，`true`但必须在运行时通过某些参数进行设置。我可以这样做吗？怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:58:00.287

查看[wiki.eclipse.org/Using_Advanced_Query_API_(ELUG)](http://wiki.eclipse.org/Using_Advanced_Query_API_%28ELUG%29)您可以使用查询重定向器，[`ForeignReferenceMapping#getSelectionQuery()`](http://www.eclipse.org/eclipselink/api/2.3/org/eclipse/persistence/mappings/ForeignReferenceMapping.html)以便您的查询重定向器可以动态克隆查询并根据需要添加过滤器。但是，将参数传递给重定向器需要有创意，例如将它们存储在线程上下文或会话的属性映射中。

# javascript - 构建框架/工具时的类命名指南

> ID：15967545
> 
> 赞同：0
> 
> 时间：2013-04-12T09:21:48.180
> 
> 标签：javascript, html, css

我正在开发一个使用 JavaScript 生成大量 HTML 和 CSS 的小工具，并且我计划使用 JavaScript 发布一个样式表，以便它全部正确呈现。我试图确保我不会在明显的[样式表冲突](https://stackoverflow.com/questions/5010074/is-there-a-syntax-to-resolve-ambiguity-in-css-class-names-between-two-style-shee)中运行，所以我正在寻找指导方针、最佳实践等……为将在框架/工具中使用的类的命名。

你用什么来命名以避免冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:04:08.680

如果您也在生成 HTML，为什么不向容器添加一个独特的类或 id，然后您的 CSS 可以简单地设置容器中的那些元素*的*样式。

HTML：

```
<div class="myWierdAndWonderfulGeneratedThing">
<p><label>foo<label><span>bar</span></p>
</div> 
```

CSS：

```
.myWierdAndWonderfulGeneratedThing label { color: red; }
.myWierdAndWonderfulGeneratedThing span { color: blue; } 
```

您还可以使用 JavaScript 为您的包装器和相应的样式规则生成唯一 ID。

HTML：

```
<div id="myWierdAndWonderfulGeneratedThing_0001">
 ...
</div> 
```

CSS：

```
#myWierdAndWonderfulGeneratedThing_0001 label { color: green; } 
```

# c# - C# XSD 架构 - 如何获取主要属性值？

> ID：15967546
> 
> 赞同：0
> 
> 时间：2013-04-12T09:21:48.330
> 
> 标签：c#, xml, xsd

我加载了 XSD 模式定义（`XDocument`变量类型）我不知道如何获取`someProperty`值。有任何想法吗 ？

```
<xsd:form-definition xmlns:xsd="http://url/lorem.xsd"
     xmlns:ds="http://www.w3.org/2000/09/xmldsig#"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
     ...
     someProperty="ABC">
 ...
</xsd:form-definition> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:26:26.870

使用 LINQ to XML 很简单：

```
var attributes = (from n in xml.Root.Attributes("someProperty")
                        select n.Value).ToList(); 
```

# javascript - window.event.srcElement 在 IE10 中为空

> ID：15967553
> 
> 赞同：2
> 
> 时间：2013-04-12T09:22:38.877
> 
> 标签：javascript, internet-explorer-10

`window.event.srcElement`在 Windows 8 和 IE10 中要处理的解决方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T09:37:07.817

获取源元素的官方事件对象属性是[`event.target`](http://msdn.microsoft.com/en-us/library/ie/ff974946%28v=vs.85%29.aspx).

从 IE9 开始，微软越来越接近官方的 Web 标准。

有点相关：[如何让 event.srcElement 在 Firefox 中工作，这是什么意思？](https://stackoverflow.com/q/5301643/218196)

# c# - 从 Active Directory 条目中检索日期值

> ID：15967554
> 
> 赞同：0
> 
> 时间：2013-04-12T09:22:40.090
> 
> 标签：c#, active-directory

我正在尝试从我的目录条目中检索日期值，但我得到了一个`COM-Object`我不知道如何处理的。检索后，我想将其转换为 C#`DateTime`对象。

我正在使用 using `System.DirectoryServices Class`，这就是我访问我的 AD 条目的方式：

```
var e = entry.Poperties["pwdLastSet"].Value; 
```

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T04:52:55.890

另一个根本不需要添加要引用的 ActiveDS 库的解决方案是使用“invokeGet”运行时反射方法，该方法在系统的 AD 接口上调用调用。

下面的例子：

```
DateTime pwd_last_set = (DateTime)entry.InvokeGet("PasswordLastSet"); 
```

如果您的代码被分发到不同的系统并且您引用了 ActiveDS 库的 System32 或 SysWOW64 版本，这可以解决任何 32 位/64 位问题。

# c# - 无法解析 System.Drawing.Printing

> ID：15967556
> 
> 赞同：4
> 
> 时间：2013-04-12T09:22:46.077
> 
> 标签：c#, .net

我正在尝试使用[MSDN](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printersettings.installedprinters.aspx)上描述的方法在本地计算机上显示已安装打印机的列表...

```
using System.Drawing;
using System.Drawing.Printing;

namespace SandBox
{
    class Program
    {
        static void Main(string[] args)
        {

            for (int i = 0; i < PrinterSettings.InstalledPrinters.Count; i++)
            {
                Console.WriteLine(PrinterSettings.InstalledPrinters[i]);        
            }

            Console.ReadLine();
        }
    }
} 
```

问题出在`Using`声明上，“打印”命名空间无法解决。我还缺少其他参考吗？

更新：我添加了对`System.Drawing`&`System.Printing`的引用，但这并不能解决问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T09:27:03.630

为了使用`System.Drawing.Printing`命名空间，您必须引用程序集`System.Drawing.dll`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-29T18:00:27.240

在`.Net Core`and`.Net Standard`中，`System.Drawing.Printing`可以通过 nuget 安装`Microsoft.Windows.Compatibility`

文档：[https ://docs.microsoft.com/en-us/dotnet/core/porting/windows-compat-pack](https://docs.microsoft.com/en-us/dotnet/core/porting/windows-compat-pack)

# c# - 在 WPF 中的路径上绘制轨迹

> ID：15967557
> 
> 赞同：1
> 
> 时间：2013-04-12T09:22:47.217
> 
> 标签：c#, wpf, animation

我有一个围绕由多个线段组成的复杂路径移动的图像。我想在路径上绘制，就好像图像在路径上留下“蜗牛痕迹”一样，无论如何我可以这样做吗？我看过多个类似的例子，但还没有合适的。感谢图片作为示例包括： ![在此处输入图像描述](https://i.stack.imgur.com/sIrnS.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:49:42.550

您可以使用[路径动画](http://msdn.microsoft.com/en-us/library/aa970561.aspx)来`MatrixTransform`实现此动作。根据您的“复杂路径”的内容，您可能会`StoryBoard`沿着具有不同 alpha 值的相同动画路径拥有多个其他的，从而产生拖尾效果。

还请查看此[SO Question](https://stackoverflow.com/questions/6582273/wpf-animation-of-ekg-signal-animate-object-along-path)以了解适用于 a 的上述概念`Path`

# nginx - 如果没有任何域名指向它，则配置 nginx server_name

> ID：15967561
> 
> 赞同：1
> 
> 时间：2013-04-12T09:22:57.207
> 
> 标签：nginx, webserver

我有一个 ubuntu 机器，它绑定了一个 IP 地址，并且我有一个要在我的虚拟主机中配置的站点。问题是如果我没有任何域指向它，我应该在我的 server_name 中输入什么？基本上我想要这样当我输入我的 IP 地址 2xx.xxx.xxx.xxx 然后它会转到这个站点。这是我当前的配置

```
server {
        listen          80;
        server_name     dev.somesite.com;
        client_max_body_size 25M;
        access_log      /var/log/nginx/dev.somesite.com.access_log;
        error_log       /var/log/nginx/dev.somesite.com.error_log warn;
server_name_in_redirect off;
        root            /var/www/somesite-dev/web;
        location / {
                try_files $uri /app_dev.php?$args;
        }
        index           app_dev.php index.php index.html;
        fastcgi_index   index.php;

        location ~ \.php($|/) {
                 set  $script $uri;
                set  $path_info "";

                if ($uri ~ "^(.+\.php)(/.*)") {
                        set  $script     $1;
                        set  $path_info  $2;
                }
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
                fastcgi_param PATH_INFO $fastcgi_path_info;
                fastcgi_param PATH_TRANSLATED $document_root$fastcgi_path_info;
                include /etc/nginx/fastcgi_params;
                keepalive_timeout 0;
                fastcgi_param   SCRIPT_FILENAME  $document_root$fastcgi_script_name;
                fastcgi_pass    127.0.0.1:9000;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:27:03.880

Server_name 用于基于名称的虚拟主机，如果不需要，可以完全省略。它会很好地监听 IP。请记住，如果您有多个不使用基于名称的解析的服务器，这将导致问题，您将只能访问其中一个。哪一个取决于两件事：

1.  如果您在其中一台服务器中设置了“默认监听 80”，则该服务器将优先
2.  如果没有上述条件，首先读取配置的服务器将处理请求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:26:47.200

您应该将 server_name 设置为例如 development.local，然后在将 development.local 指向您的服务器的 IP 或 localhost 时在 /etc/hosts 文件中添加一行。

# facebook-graph-api - Facebook身份验证自动弹出而不是单击按钮

> ID：15967562
> 
> 赞同：0
> 
> 时间：2013-04-12T09:22:58.263
> 
> 标签：facebook-graph-api, facebook-javascript-sdk

我已经尝试了 fowling 代码

```
https://developers.facebook.com/blog/post/2011/07/21/updated-javascript-sdk-and-oauth-2-0-roadmap/ 
```

它现在可以进行身份​​验证，我想在页面加载后自动弹出，而不是让人们再次单击按钮

我编辑并能够触发自动弹出窗口，但这只有在我保留按钮时才有效 我怎样才能删除按钮并让它仍然工作？

这就是我所做的：

```
<!DOCTYPE html> 
<html xmlns:fb="https://www.facebook.com/2008/fbml">
  <head> 
    <title> 
      New JavaScript SDK
    </title> 
  </head> 
<body> 

<div id="fb-root"></div>
<h2>Updated JS SDK example</h2><br />
<div id="user-info"></div>
<p><button id="fb-auth">Login</button></p>

<script>
window.fbAsyncInit = function() {
  FB.init({ appId: 'xxx', 
        status: true, 
        cookie: true,
        xfbml: true,
        oauth: true});

  function updateButton(response) {
    var button = document.getElementById('fb-auth');

    if (response.authResponse) {
      //user is already logged in and connected
      var userInfo = document.getElementById('user-info');
      FB.api('/me', function(response) {
        userInfo.innerHTML = '<img src="https://graph.facebook.com/' 
      + response.id + '/picture">' + response.name;
        button.innerHTML = 'Logout';
      });
      button.onclick = function() {
        FB.logout(function(response) {
          var userInfo = document.getElementById('user-info');
          userInfo.innerHTML="";
    });
      };
    } else {
      //user is not connected to your app or logged out
      //button.innerHTML = 'Login';
     // button.onclick = function() {
      FB.login(function(response) {
      if (response.authResponse) {
            FB.api('/me', function(response) {
          var userInfo = document.getElementById('user-info');
          userInfo.innerHTML = 
                '<img src="https://graph.facebook.com/' 
            + response.id + '/picture" style="margin-right:5px"/>' 
            + response.name;
        });    
          } else {
            //user cancelled login or did not grant authorization
          }
        }, {scope:'email'});    
     }
     //}
  }

  // run once with current status and whenever the status changes
  FB.getLoginStatus(updateButton);
  FB.Event.subscribe('auth.statusChange', updateButton);    
};

(function() {
  var e = document.createElement('script'); e.async = true;
  e.src = document.location.protocol 
    + '//connect.facebook.net/en_US/all.js';
  document.getElementById('fb-root').appendChild(e);
}());

</script>
</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:43:27.130

```
<script>
(function() {
  var e = document.createElement('script'); e.async = true;
  e.src = document.location.protocol 
    + '//connect.facebook.net/en_US/all.js';
  document.getElementById('fb-root').appendChild(e);
}());

window.fbAsyncInit = function() {
  FB.init({ appId: 'xxx', 
    status: true, 
    cookie: true,
    xfbml: true,
    oauth: true});
fbLoginStatus();
});
function fbLoginStatus()
{
    FB.getLoginStatus(function(response) {
        console.log(response);
        if (response.status === 'connected') {
            access_token =   FB.getAuthResponse()['accessToken'];
                         myinfo();
        } else {
            fblogin();
        }
    });
}

function fblogin()
{
FB.login(function(response) {
    if (response.authResponse) {
        console.log(response);
         access_token =   FB.getAuthResponse()['accessToken'];
                     myinfo();

    } else {
        console.log('User cancelled login or did not fully authorize.');
    }
}, {scope: 'email'});
}
function myinfo()
{
 FB.api('/me', function(response) {
                userid = response.id ;
                alert(userid);
                user_name = response.name;
                alert(user_name);
            });
}
</script> 
```

试试这个代码，它会完全按照你想要的方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T09:23:28.057

这是代码。我认为上面的代码也应该可以工作。

```
<script>
window.fbAsyncInit = function(){
    FB.init({ 
        appId: '1486670758257443', 
        status: true, 
        cookie: true,
        xfbml: true,
        oauth: true,
        version    : 'v2.1'
    });
    fbLoginStatus();
};

(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

function fbLoginStatus(){
    FB.getLoginStatus(function(response) {
        console.log(response);
        if (response.status === 'connected') {
            var access_token =   FB.getAuthResponse()['accessToken'];
            console.log(access_token);
        } else {
            fblogin();
        }
    });
}

function fblogin(){
    FB.login(function(response) {
        if (response.authResponse) {
            var access_token =   FB.getAuthResponse()['accessToken'];
            console.log(access_token);
        } else {
            console.log('Authorization failed.');
        }
    },{ //permissions
        scope: 'email'
    });
}
</script> 
```

还有一件事要提的是，根据facebook doc，弹出窗口应该通过点击事件打开。这就是他们所说的。

> 调用 FB.login 会导致 JS SDK 尝试打开一个弹出窗口。因此，该方法只能在用户点击事件后调用，否则弹出窗口将被大多数浏览器阻止。

# javascript - 迭代Javascript对象属性的顺序？

> ID：15967566
> 
> 赞同：0
> 
> 时间：2013-04-12T09:23:17.257
> 
> 标签：javascript

如果我有这个代码：

```
o["a"]=1;
o["b"]=1;
o["c"]=1;
o["d"]=1;

for (var k in o)
{
  alert(k)
} 
```

*   是否*总是*（跨浏览器）以与添加属性相同的顺序发出警报？

*   那这个呢？（同样的问题）

    `var o={a:1,b:1,c:1,d:1}`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:24:28.777

不，没有指定顺序。从[规格](http://es5.github.com/#x12.6.4)：

> 枚举属性的机制**和顺序......****没有指定**。

# c++ - 在 C++ 代码中使用嵌入式汇编语言进行错误分析

> ID：15967569
> 
> 赞同：1
> 
> 时间：2013-04-12T09:23:19.647
> 
> 标签：c++, x86, profiling, inline-assembly, rdtsc

我找到[了这篇](http://lemire.me/blog/archives/2012/06/20/do-not-waste-time-with-stl-vectors/)关于效率的文章`std::vector::push_back`，相关代码可以在[这里](https://github.com/lemire/Code-used-on-Daniel-Lemire-s-blog/blob/master/2012/06/20/testvector.cpp)找到。我自己试过了，我得到一个`illegal instruction (core dumped)`, gdb 指示错误发生在第 37 行。

我在一台计算机上使用 gcc 4.7.2 编译：

```
$ sudo dmidecode -t processor
# dmidecode 2.11
SMBIOS 2.5 present.

Handle 0x0400, DMI type 4, 40 bytes
Processor Information
    Socket Designation: CPU
    Type: Central Processor
    Family: Core 2 Duo
    Manufacturer: Intel
    ID: 7A 06 01 00 FF FB EB BF
    Signature: Type 0, Family 6, Model 23, Stepping 10
    Flags:
        FPU (Floating-point unit on-chip)
        VME (Virtual mode extension)
        DE (Debugging extension)
        PSE (Page size extension)
        TSC (Time stamp counter)
        MSR (Model specific registers)
        PAE (Physical address extension)
        MCE (Machine check exception)
        CX8 (CMPXCHG8 instruction supported)
        APIC (On-chip APIC hardware supported)
        SEP (Fast system call)
        MTRR (Memory type range registers)
        PGE (Page global enable)
        MCA (Machine check architecture)
        CMOV (Conditional move instruction supported)
        PAT (Page attribute table)
        PSE-36 (36-bit page size extension)
        CLFSH (CLFLUSH instruction supported)
        DS (Debug store)
        ACPI (ACPI supported)
        MMX (MMX technology supported)
        FXSR (FXSAVE and FXSTOR instructions supported)
        SSE (Streaming SIMD extensions)
        SSE2 (Streaming SIMD extensions 2)
        SS (Self-snoop)
        HTT (Multi-threading)
        TM (Thermal monitor supported)
        PBE (Pending break enabled)
    Version: Not Specified
    Voltage: 1.2 V
    External Clock: 1333 MHz
    Max Speed: 5200 MHz
    Current Speed: 3000 MHz
    Status: Populated, Enabled
    Upgrade: Socket LGA775
    L1 Cache Handle: 0x0700
    L2 Cache Handle: 0x0701
    L3 Cache Handle: Not Provided
    Serial Number: Not Specified
    Asset Tag: Not Specified
    Part Number: Not Specified
    Core Count: 2
    Core Enabled: 2
    Thread Count: 2
    Characteristics:
        64-bit capable 
```

这里有什么问题？我怎样才能让这个代码工作？我也尝试使用 icpc 13.1.0 但这也失败了。

**编辑：**我使用的是 Ubuntu 12.10 64 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:40:42.520

您的 CPU 不支持该`RDTSCP`指令。它是[Core i7](http://en.wikipedia.org/wiki/List_of_Intel_Core_i7_microprocessors)指令，而您的处理器是较早的一代 ( [Merom-L](http://en.wikipedia.org/wiki/Merom_%28microprocessor%29#Merom-L) )。

您应该可以`RDTSC`改用。例如，请参见[rdtscp、rdtsc 之间的区别：内存和 cpuid / rdtsc？](https://stackoverflow.com/questions/12631856/difference-between-rdtscp-rdtsc-memory-and-cpuid-rdtsc)

# c# - C# action.BeginInvoke(action.EndInvoke,null) 是个好主意吗？

> ID：15967574
> 
> 赞同：14
> 
> 时间：2013-04-12T09:23:37.507
> 
> 标签：c#, asynchronous, delegates

如果我想对某些代码进行“一劳永逸”，但仍想确保清理我的内存（根据[Why does asynchronous delegate method requires calling EndInvoke?](https://stackoverflow.com/questions/1712741/why-does-asynchronous-delegate-method-require-calling-endinvoke?rq=1)），以下是否可以实现该目标？

```
Action myAction = () => LongRunTime();
myAction.BeginInvoke(myAction.EndInvoke,null); 
```

我环顾四周，但没有看到在任何地方使用过这种模式。相反，人们使用 annonomoyus 方法作为他们的回调（例如[The proper way to end a BeginInvoke?](https://stackoverflow.com/questions/435772/the-proper-way-to-end-a-begininvoke)）或者他们定义一个实际的回调方法。由于我没有看到其他人这样做，这让我认为它要么不起作用，要么是一个坏主意。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T22:21:40.250

使用方法组转换而不是委托很好，`EndInvoke`仍然会在您的`Action`. 没有什么可做的，因为这是一个“一劳永逸”的电话。

不幸的是，直接无可辩驳地证明调用了 EndInvoke 有点困难，因为`Action`它是一个委托，我们不能只在 BCL 中的某个类上添加断点。

此代码将（定期）检查由 返回的 IAsyncResult 的一些私有字段`BeginInvoke`，这似乎跟踪是否`EndInvoke`已被调用：

```
public partial class MainWindow : Window
{
    private Timer _timer = new Timer(TimerCallback, null, 100, 100);
    private static IAsyncResult _asyncResult;

    public MainWindow()
    {
        InitializeComponent();
    }

    static void LongRunTime()
    {
        Thread.Sleep(1000);
    }

    void Window_Loaded(object sender, RoutedEventArgs args)
    {
        Action myAction = () => LongRunTime();
        _asyncResult = myAction.BeginInvoke(myAction.EndInvoke, null);
    }

    static void TimerCallback(object obj)
    {
        if (_asyncResult != null)
        {
            bool called = ((dynamic)_asyncResult).EndInvokeCalled;
            if (called)
            {
                // Will hit this breakpoint after LongRuntime has completed
                Debugger.Break(); 
                _asyncResult = null;
            }
        }
    }
} 
```

我已经使用[SOS](http://blogs.msdn.com/b/benoitsarie/archive/2011/01/17/visual-studio-2010-sos-dll-finding-memory-leaks.aspx)仔细检查了没有任何托管内存泄漏。我还尝试了其他几个证明，但我认为它们比这个更间接。

我在调查期间发现了一些有趣的事情：`myAction.BeginInvoke`调用将显示在使用仪器的分析器上，但`myAction.EndInvoke`不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-30T04:47:49.940

现在它可以像

```
BeginInvoke((Action)(async () =>
{
    // Show child form
    var f = new MyForm();
    f.ShowDialog();
    // Update parent/current
    await UpdateData();
})); 
```

# c# - 反序列化时出现SerializationException

> ID：15967577
> 
> 赞同：0
> 
> 时间：2013-04-12T09:23:50.020
> 
> 标签：c#, .net, serialization, persistence, binary-serialization

此代码从 SQLite 反序列化对象。我从 DBinaryData (BLOB) 字段中获取序列化对象。但是获取 System.Runtime.Serialization.SerializationException: end of stream 在解析完成之前遇到。如何解决这个问题？

```
 public void Dump()
    {
        try
        {
            const string databaseName = @"C:\Code\C#\WcfService\WcfService\mainDB.db3";
            SQLiteConnection connection = new SQLiteConnection(string.Format("Data Source={0};", databaseName));
            connection.Open();
            try
            {
                SQLiteCommand command = new SQLiteCommand("INSERT into 'dump' ('DTime', 'DBinaryData') VALUES ('" + DateTime.Now.ToString() + "', '" + GetSerializedMessages() + "')", connection);
                command.ExecuteNonQuery();
            }
            finally
            {
                connection.Close();
            }
        }
        catch (Exception e)
        {
            Logger.Log(e.Message);
        }
    }

    public void Restore()
    {
        try
        {
            const string databaseName = @"C:\Code\C#\WcfService\WcfService\mainDB.db3";
            SQLiteConnection connection = new SQLiteConnection(string.Format("Data Source={0};", databaseName));
            connection.Open();
            try
            { 
                SQLiteCommand command = new SQLiteCommand("SELECT * FROM dump ORDER BY DId DESC limit 1", connection);
                SQLiteDataReader reader = command.ExecuteReader();
                while (reader.Read())
                {
                     Queue<Message> deserializedData = GetDeserializedMessages((byte[])reader["DBinaryData"]);
                     var data = MergeQueueMessage(deserializedData);
                     Logger.Log(data.ToString());
                }
            }
            finally
            {
                connection.Close();
            }
        }
        catch (Exception e)
        {
            Logger.Log(e.Message);
        }
    }

    public byte[] GetSerializedMessages()
    {
        byte[] result = null;

        MemoryStream memoryStream = new MemoryStream();
        BinaryFormatter formatter = new BinaryFormatter();

        try
        {
            lock (MessageQueue.Instance.Messages)
            {
                formatter.Serialize(memoryStream, MessageQueue.Instance.Messages);
            }
            result = new byte[memoryStream.GetBuffer().Length];
            memoryStream.GetBuffer().CopyTo(result, 0);
        }
        catch (SerializationException e)
        {
            Logger.Log("Failed to serialize. Reason: " + e.Message);
        }
        finally
        {
            memoryStream.Close();
        }
        return result;
    }

    public Queue<Message> GetDeserializedMessages(byte[] source)
    {
        Queue<Message> messages = null;
        using (MemoryStream memoryStream = new MemoryStream(source))
        {
            BinaryFormatter formatter = new BinaryFormatter();
            messages = (Queue<Message>)formatter.Deserialize(memoryStream);
        }
        return messages;
    }

    private IEnumerable<Message> MergeQueueMessage(Queue<Message> source)
    {
        IEnumerable<Message> result = MessageQueue.Instance.Messages.Union(source, new EqualityComparator());
        return result;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T09:36:13.517

通过您的编辑：这是一个错误（但不确定它是否是“那个”错误）：

```
result = new byte[memoryStream.GetBuffer().Length];
memoryStream.GetBuffer().CopyTo(result, 0); 
```

缓冲区的长度无关紧要。如果是最`memoryStream.Length`重要的。坦率地说，这应该只是`result = memoryStream.ToArray();`- 这会给你**正确**的结果。

* * *

SQL中的另一个错误：

```
SQLiteCommand command = new SQLiteCommand("INSERT into 'dump' ('DTime', 'DBinaryData') VALUES ('" + DateTime.Now.ToString() + "', '" + GetSerializedMessages() + "')", connection);
command.ExecuteNonQuery(); 
```

串联从来都不是一个好主意，但在这里它是致命的；因为`GetSerializedMessages()`返回`null`（失败时 - 不是一个好主意；应该刚刚抛出）或 a `byte[]`，这会进行简单的连接。如果您连接 a`byte[]`输出不是您所期望的：

```
byte[] b = {1,2,3};
string s = "a " + b + " c";
// gives: "a System.Byte[] c" 
```

这**显然**不包含您想要的实际数据，所以是胡言乱语。理想情况下，您应该在此处为数据和日期使用参数：

```
SQLiteCommand command = new SQLiteCommand("INSERT into 'dump' ('DTime', 'DBinaryData') VALUES (@when, @data)", connection);
// note: not sure if SQLiteCommand has an "AddWithValue", but the overall usage
// should be something like this
command.Parameters.AddWithValue("when", DateTime.Now);
command.Parameters.AddWithValue("data", GetSerializedMessages());
command.ExecuteNonQuery(); 
```

* * *

最后：不要吞下问题；您的序列化代码应该（IMO）更像

```
public byte[] GetSerializedMessages()
{
    try {
        using(MemoryStream memoryStream = new MemoryStream())
        {
            BinaryFormatter formatter = new BinaryFormatter();
            // skipped: serialize etc
            return memoryStream.ToArray();
        }
    } catch(Exception ex) {
        Logger.Log("Failed to serialize. Reason: " + ex.Message);
        throw; // it doesn't stop being a problem just because we logged it
    }
} 
```

* * *

首先要查看的是`byte[]`您*退出*（通过）是否与您最初序列化时`reader["DBinaryData"]`的 100% 相同。`byte[]`如果您没有对此进行测试，则所有赌注都将取消。从错误中，听起来它们并不相同 - 这可能是因为：

*   序列化和存储数据的代码中的错误
*   数据库存储中的截断
*   读取 BLOB 时截断（某些连接会限制一次性获取的数量）
*   获取和反序列化数据的代码中的错误

前两个是完全致命的：如果是那些 - 数据是烤面包。

`byte[]`在集成测试中比较两者的一种懒惰方法是比较十六进制：

```
// here expected should be the raw data just after serializing; actual should
// be what you get after storing it in the db and fetching it back, using
// your code
Assert.AreEqual(BitConverter.ToString(expected), BitConverter.ToString(actual)); 
```

这给出了任何增量的很好的十六进制输出。你没有展示你如何序列化和存储消息，所以我不能告诉你那里是否有任何明显的问题，但请参阅[http://marcgravell.blogspot.com/2013/02/how-many-ways -can-you-mess-up-io.html](http://marcgravell.blogspot.com/2013/02/how-many-ways-can-you-mess-up-io.html)在此处查看常见问题列表。

最后，我强烈建议：***停止使用`BinaryFormatter`***。看到[这样的问题](https://stackoverflow.com/questions/15954054/deserialize-to-newer-version)来了解其他人的痛苦：基本上即使是很小的更改（或者有时只是重建），他们也无法取回数据。基于合约的序列化器会更安全——我倾向于 protobuf-net，但我有很大的偏见。

# mysql - 在mysql查询中通过正则表达式获取子字符串

> ID：15967581
> 
> 赞同：0
> 
> 时间：2013-04-12T09:23:53.500
> 
> 标签：mysql, sql, regex, substring

[我已经尝试了所有的东西，比如正则表达式，从uri'http: //start.readingresults.com/RapidResults/vocab_web_alt/reviewResponseAjax.do](http://start.readingresults.com/RapidResults/vocab_web_alt/reviewResponseAjax.do) '获取域名的子字符串，但没有得到准确的结果。它应该告诉我www.start。 readingresults.com.Somatimes uri 包含 ip 地址，这使我这件事变得更复杂。例如 192.168.1.10 等。查找域正则表达式或子字符串的更正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:47:26.273

```
SELECT SUBSTRING_INDEX(SUBSTRING_INDEX('http://start.readingresults.com/RapidResults/vocab_web_alt/reviewResponseAjax.do', '//', -1),'/',1); 
```

[如果您的 URL 具有 IP 地址意味着您必须使用SUBSTRING_INDEX](http://www.java2s.com/Tutorial/MySQL/0460__String-Functions/SUBSTRINGINDEXstrdelimcountReturnsthesubstringfromstringstrbeforecountoccurrencesofthedelimiterdelim.htm)以单独的方式处理

这里是[sqlfiddle](http://sqlfiddle.com/#!2/d41d8/10542)。

干杯...

# php - Wordpress 循环特殊 Html 输出

> ID：15967582
> 
> 赞同：0
> 
> 时间：2013-04-12T09:23:57.970
> 
> 标签：php, html, wordpress, loops

我正在尝试获得一个特殊的 wordpress 循环 html 输出：

```
<div id="main">

    <!-- Line number 1 -->
    <div class="article-thumbnail" data-target="article-1" >
        <div class="article-open"><img src="" /></div>
    </div>
    <div class="article-thumbnail" data-target="article-2" >
        <div class="article-open"><img src="" /></div>
    </div>
    <div class="article-thumbnail" data-target="article-3" >
        <div class="article-open"><img src="" /></div>
    </div>

    <div class="container">
        <article id="article-1" class="article-entry">
            <header class="article-header">
                <h2>This is the article 1 text</h2>     
            </header>
            <div class="article-body">
                <p>This is the article 1 body</p>       
            </div>
        </article>
        <article id="article-2" class="article-entry">
            <header class="article-header">
                <h2>This is the article 2 text</h2>     
            </header>
            <div class="article-body">
                <p>This is the article 2 body</p>       
            </div>
        </article>
        <article id="article-3" class="article-entry">
            <header class="article-header">
                <h2>This is the article 3 text</h2>     
            </header>
            <div class="article-body">
                <p>This is the article 3 body</p>       
            </div>
        </article>
    </div>

    <!-- Line number 2 -->
    <div class="article-thumbnail" data-target="article-4" >
        <div class="article-open"><img src="" /></div>
    </div>

    <div class="article-thumbnail" data-target="article-5" >
        <div class="article-open"><img src="" /></div>
    </div>
    <div class="article-thumbnail" data-target="article-6" >
        <div class="article-open"><img src="" /></div>
    </div>
    <div class="container">
        <article id="article-4" class="article-entry">
            <header class="article-header">
                <h2>This is the article 4 text</h2>     
            </header>
            <div class="article-body">
                <p>This is the article 4 body</p>       
            </div>
        </article>
        <article id="article-5" class="article-entry">
            <header class="article-header">
                <h2>This is the article 5 text</h2>     
            </header>
            <div class="article-body">
                <p>This is the article 5 body</p>       
            </div>
        </article>
        <article id="article-6" class="article-entry">
            <header class="article-header">
                <h2>This is the article 6 text</h2>     
            </header>
            <div class="article-body">
                <p>This is the article 6 body</p>       
            </div>
        </article>
    </div>
</div> 
```

检查这个小提琴文件： http: [//jsfiddle.net/PkZrZ/5/](http://jsfiddle.net/PkZrZ/5/)了解我想要实现的目标。

基本上，我试图从 Wordpress 循环中获得的是 1 行 3 个缩略图（精选帖子的图像），在它们下方为每个缩略图发布条目，然后是另一行，依此类推。

我已经设法取得了一些成就，但老实说，这是令人难以置信的错误（一旦它起作用，然后它没有）并且似乎是错误的。无论如何，这是我到目前为止的 Wordpress 循环：

```
<?php 
$post_array = array();
$i = 0;
$j = 0;
$index = 0;
$post_total = $wp_query->post_count; // buggy
/*$post_total = get_term_by('name','ventures','category');
$post_total = $post_total->count;*/
// echo $post_total;
if (have_posts()) : while (have_posts()) : the_post();
    $i++;
    // echo $i;
    $post_array[] = get_object_vars($post);
?>
    <div id="post-ventures-image-<?php the_ID();?>" class="post-ventures-image">
        <?php the_post_thumbnail( 'hnp-thumb-ventures-180' ); ?>
    </div>

    <?php if($i%3 == 0 && $post_total >= 3) : ?>
        <?php for($j = 0; $j < 3; $j++) : ?>

            <article id="post-<?php echo $post_array[$index + $j]['ID'];//the_ID(); ?>" <?php post_class('clearfix'); ?> role="article">
                <header class="article-header">
                    <h3 class="h2"><?php echo $post_array[$index + $j]['post_title'];//the_title(); ?></h3>
                </header> <!-- end article header -->
                <section class="entry-content clearfix">
                    <?php echo $post_array[$index + $j]['post_content'];//the_content(); ?>
                </section> <!-- end article section -->
            </article> <!-- end article -->

        <?php endfor; $index = $index + $j; $j = 0; $post_total = $post_total - 3; $i = 0; ?>

    <?php elseif($i%2 == 0 && $post_total == 2 ) : ?>
        <?php for($j = 0; $j < 2; $j++) : ?>

            <article id="post-<?php echo $post_array[$index + $j]['ID'];//the_ID(); ?>" <?php post_class('clearfix'); ?> role="article">
                <header class="article-header">
                    <h3 class="h2"><?php echo $post_array[$index + $j]['post_title'];//the_title(); ?></h3>
                </header> <!-- end article header -->
                <section class="entry-content clearfix">
                    <?php echo $post_array[$index + $j]['post_content'];//the_content(); ?>
                </section> <!-- end article section -->
            </article> <!-- end article -->

        <?php endfor; $index = $index + $j ; $j = 0; $post_total = $post_total - 2; $i = 0; ?>

    <?php elseif($i%1 == 0 && $post_total == 1) : ?>
        <?php for($j = 0; $j < 1; $j++) : ?>

            <article id="post-<?php echo $post_array[$index + $j]['ID'];//the_ID(); ?>" <?php post_class('clearfix'); ?> role="article">
                <header class="article-header">
                    <h3 class="h2"><?php echo $post_array[$index + $j]['post_title'];//the_title(); ?></h3>
                </header> <!-- end article header -->
                <section class="entry-content clearfix">
                    <?php echo $post_array[$index + $j]['post_content'];//the_content(); ?>
                </section> <!-- end article section -->
            </article> <!-- end article -->

        <?php endfor; $index = $index + $j + 1; $j = 0; $i = 0; ?>

    <?php endif;?>
    <?php endwhile; ?>
    <?php endif; ?> 
```

我认为这是有史以来最糟糕的即兴编码。如果有人可以给我写一个关于如何编写会膨胀的循环的快速标记:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:13:10.347

更新：

```
 $posts = get_posts();
   $first_three = array_chunk($posts, 3);
   $count = 0;
   foreach($first_three as $posts){
      foreach($posts as $post){?>
         <div class="article-thumbnail" data-target="article-1" >
            <div class="article-open"><?php echo $post->post_title; ?></div>
         </div><?php
      }?>
     <div class="container"><?php
     foreach($posts as $post){$count++?>
       <article id="article-<?php echo $count; ?>" class="article-entry">
          <header class="article-header">
              <h2>This is the article <?php echo $count; ?> text</h2>     
          </header>
          <div class="article-body">
              <p>This is the article <?php echo $count; ?> body</p>       
          </div>
      </article><?php
     }?>
     </div><?php
  } 
```

非常适合我，只需更改您需要的任何标记或数组。

# sql - 视图中的子查询运行缓慢

> ID：15967587
> 
> 赞同：1
> 
> 时间：2013-04-12T09:24:08.533
> 
> 标签：sql, sql-server, performance, view, subquery

你好，我的观点有问题。子查询导致视图运行非常缓慢。

```
SELECT dbo.Calls.CallID
      ,dbo.Calls.StartTime
      ,dbo.Calls.EndTime
      ,dbo.Connections.Connectionname
      ,dbo.Repositorys.RepositoryName
      ,REPLACE(dbo.Calls.Querytime ,',' ,'.') AS Querytijd
      ,dbo.Calls.Uur
      ,dbo.Calls.DayOfMonth
      ,REPLACE(
           (
               SELECT MAX(Querytime)  AS MaxQueryTime
               FROM   dbo.Calls       AS C
               WHERE  (
                          DATEPART(yyyy ,StartTime)=DATEPART(yyyy ,dbo.Calls.StartTime)
                      )
                      AND (DATEPART(M ,StartTime)=DATEPART(M,dbo.Calls.StartTime))               
                      AND (DayOfMonth=dbo.Calls.DayOfMonth)
                      AND (Uur=dbo.Calls.Uur)
                      AND (
                              DATEPART(MINUTE ,dbo.Calls.StartTime)=DATEPART(Minute ,StartTime)
                          )
           )
          ,','
          ,'.'
       ) AS MaxQueryTime
FROM   dbo.Calls
       INNER JOIN dbo.Connections
            ON  dbo.Calls.ConnectionID = dbo.Connections.ConnectionID
       LEFT OUTER JOIN dbo.Repositorys
            ON  dbo.Connections.RepositoryID = dbo.Repositorys.RepositoryID 
```

我基本上想要 StartTime 的年/月/日/小时/分钟相同的最大 QueryTime。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:02:58.373

在 SQLServer2005+ 中，您可以使用[OVER()](http://msdn.microsoft.com/en-us/library/ms189461.aspx)子句

```
SELECT dbo.Calls.CallID, 
       dbo.Calls.StartTime, 
       dbo.Calls.EndTime,
       dbo.Connections.Connectionname,
       dbo.Repositorys.RepositoryName, 
       REPLACE(dbo.Calls.Querytime, ',', '.') AS Querytijd, 
       dbo.Calls.Uur, 
       dbo.Calls.DayOfMonth, 
       REPLACE(MAX(Querytime) OVER(PARTITION BY DATEPART(yyyy ,StartTime), 
                                                DATEPART(Minute ,StartTime), 
                                                DayOfMonth, Uur), ',', '.'
               ) AS MaxQueryTime
FROM dbo.Calls INNER JOIN dbo.Connections 
                 ON dbo.Calls.ConnectionID = dbo.Connections.ConnectionID 
               LEFT OUTER JOIN dbo.Repositorys 
                 ON dbo.Connections.RepositoryID = dbo.Repositorys.RepositoryID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:53:26.890

```
SELECT dbo.Calls.CallID
  ,dbo.Calls.StartTime
  ,dbo.Calls.EndTime
  ,dbo.Connections.Connectionname
  ,dbo.Repositorys.RepositoryName
  ,REPLACE(dbo.Calls.Querytime ,',' ,'.') AS Querytijd
  ,dbo.Calls.Uur
  ,dbo.Calls.DayOfMonth
  ,REPLACE( QUERYTIME,',','.') AS MaxQueryTime
FROM   dbo.Calls
   INNER JOIN dbo.Connections
        ON  dbo.Calls.ConnectionID = dbo.Connections.ConnectionID
   LEFT OUTER JOIN dbo.Repositorys
        ON  dbo.Connections.RepositoryID = dbo.Repositorys.RepositoryID
LEFT JOIN 
(
SELECT StartTime, Uur, DayOfMonth, StartTime, MAX(QUERYTIME) AS QUERYTIME
FROM dbo.Calls       
GROUP BY StartTime, Uur, DayOfMonth, StartTime
) AS C
ON DATEPART(yyyy ,C.StartTime)=DATEPART(yyyy ,dbo.Calls.StartTime)
AND C.DayOfMonth=dbo.Calls.DayOfMonth
AND C.Uur=dbo.Calls.Uur
AND DATEPART(MINUTE ,dbo.Calls.StartTime)=DATEPART(Minute ,C.StartTime) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:00:15.643

当我查看您的查询时..您正在为每一行计算“MaxQueryTime”。要优化此查询，您可以计算一次“MaxQueryTime”，然后使用 union 关键字组合到您的结果集。据我说，“MaxQueryTime”对所有人都是一样的。

```
(SELECT REPLACE(MAX(Querytime),',','.')  AS MaxQueryTime
               FROM   dbo.Calls       AS C
               WHERE  (
                          DATEPART(yyyy ,StartTime)=DATEPART(yyyy ,dbo.Calls.StartTime)
                      )
                      AND (DayOfMonth=dbo.Calls.DayOfMonth)
                      AND (Uur=dbo.Calls.Uur)
                      AND (
                              DATEPART(MINUTE ,dbo.Calls.StartTime)=DATEPART(Minute ,StartTime)
                          )) union all

                ( SELECT dbo.Calls.CallID
      ,dbo.Calls.StartTime
      ,dbo.Calls.EndTime
      ,dbo.Connections.Connectionname
      ,dbo.Repositorys.RepositoryName
      ,REPLACE(dbo.Calls.Querytime ,',' ,'.') AS Querytijd
      ,dbo.Calls.Uur
      ,dbo.Calls.DayOfMonth

FROM   dbo.Calls
       INNER JOIN dbo.Connections
            ON  dbo.Calls.ConnectionID = dbo.Connections.ConnectionID
       LEFT OUTER JOIN dbo.Repositorys
            ON  dbo.Connections.RepositoryID = dbo.Repositorys.RepositoryID         ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T09:40:54.140

它查询工作吗？

当我查看您的查询时，“发件人”关键字在单个查询中使用了两次。只有两个表的连接。如果您想快速获得结果，请先过滤两个表，然后进行连接，这样连接中的行数就会减少，从而优化您的结果。

```
SELECT dbo.Calls.CallID, dbo.Calls.StartTime, dbo.Calls.EndTime, 
dbo.Connections.Connectionname, dbo.Repositorys.RepositoryName, 
REPLACE(dbo.Calls.Querytime, ',', '.') AS Querytijd, dbo.Calls.Uur, 
dbo.Calls.DayOfMonth, REPLACE((SELECT MAX(Querytime) AS MaxQueryTime 
FROM dbo.Calls AS C 
WHERE (DATEPART(yyyy, StartTime) = DATEPART(yyyy, dbo.Calls.StartTime))
 AND (DayOfMonth = dbo.Calls.DayOfMonth) AND (Uur = dbo.Calls.Uur) AND 
 (DATEPART(MINUTE, dbo.Calls.StartTime) = DATEPART(Minute, StartTime))), ',', '.') AS MaxQueryTime 

 FROM dbo.Calls INNER JOIN dbo.Connections ON dbo.Calls.ConnectionID = dbo.Connections.ConnectionID 
 LEFT OUTER JOIN dbo.Repositorys ON dbo.Connections.RepositoryID = dbo.Repositorys.RepositoryID 
```

# git - Git 无意中撤消了远程分支的更改

> ID：15967588
> 
> 赞同：0
> 
> 时间：2013-04-12T09:24:11.283
> 
> 标签：git, version-control

我们有一个我认为是典型的 git 设置，有一个“源”存储库，多个用户，每个用户都有自己的存储库，获取和推送到，每个用户管理自己的分支，然后合并到主分支。

但是，来自用户的提交和推送导致来自另一个用户的更改被撤消：两个用户都修改了相同的文件，我希望并且期望这些更改将合并在一起，我相当确定这一点commit 与冲突没有任何关系。

我不知道如何调查发生的事情，更不用说如何防止这种情况再次发生。我怎样才能知道发生了什么，以及将来可以做些什么来防止它发生？

编辑：从@antak 要求澄清的回答中，更改是“撤消”的，不是从历史记录中删除提交，而是从 git show 看起来，他们手动删除了更改（但他们没有故意这样做）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:58:05.130

用户`A`的 推送 和 撤消 用户`B`在 文件 中 的 工作`C`...

你如何定义*“撤消”*？的提交是否`B`从历史中消失了？

如果答案是否定的，这可能是发生了什么：

1.  用户`A`拉。
2.  用户用他/她在别处修改过的旧版本`A` *覆盖*了工作树中的文件。`C`
3.  用户`A`提交并推送。

您可以通过`C`使用类似`git log -p`.

如果答案是肯定的，那么可能发生这种情况的唯一方法（没有出现故障`git`）是`A`使用`git push -f`. 如果是这种情况，您可以通过拒绝非快进推送来防止它在将来发生`origin`。这可以通过将`git config`变量设置`receive.denyNonFastForwards`为`true`包含`origin`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:32:06.963

问他们是否使用了 push -f？如果您使用 -f 标志，它将用您的更改覆盖分支，而不考虑其他更改。可能发生了这样的情况，一位开发人员尝试推送，git 拒绝了推送，因为自从他开始工作以来已经发生了其他更改，并且不知道他应该使用 fetch/pull/merge，并且只是做了一个 push -f。

如果事实证明是这种情况，您可以考虑在 git 服务器上将 receive.denyNonFastForwards 设置为 true，这将禁止重写历史记录（反过来，使用 push -f 来破坏其他更改）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T12:03:39.777

我们发现了正在发生的事情。一位用户正在从他们自己的 git 存储库远程编辑文件，并通过 SCP 上传更改的文件。他们也在获取/合并到这个存储库，但*并不*总是将更改的文件下载到他们的本地工作区。所以事件链：

*   从他们的 git repo 下载到他们的本地工作区
*   对他们的本地工作区进行一些更改
*   在他们的 git repo 中获取 + 合并来自其他用户的所有更改
*   从他们的本地工作区上传到他们的 git repo（从而丢​​失上一步的更改）
*   犯罪

# events - Linux 中的 Eclipse RCP 密钥侦听器事件问题

> ID：15967595
> 
> 赞同：0
> 
> 时间：2013-04-12T09:24:23.237
> 
> 标签：events, eclipse-rcp

在 Eclipse RCP 应用程序中，我以这种方式覆盖了 SWT 密钥侦听器

```
public void keyPressed(KeyEvent e) 
{
    try {           
        if (e.stateMask == SWT.CTRL && e.keyCode ==99){
            //Some condition
        }
    } catch(Exception ex) { }
} 
```

编码

```
(e.stateMask == SWT.CTRL && e.keyCode ==99) 
```

在 Windows 平台上运行良好，但在 Ubuntu 12.04 上，同样不起作用！

# php - Mqsql错误查询为空

> ID：15967596
> 
> 赞同：-1
> 
> 时间：2013-04-12T09:24:23.883
> 
> 标签：php, database

```
$username="N/A";
$password="N/A";
$database="N/A";
$host="N/A";
$dbConn = mysql_connect($host, $username, $password, $database)
or die("Could not connect: " + mysql_error());
mysql_select_db($database, $dbConn)
or die("Could not find database: " + mysql_error());

$txt = "<table align=\"center\">";
    $txt .= "<tr><td>KeyCode</td><td>Date</td><td>Sold</td><td>Email</td></tr>";
    $sql = "SELECT * FROM `benkeys` where id = 1";
$res = mysql_query($query, $dbConn)
or die(mysql_error());
if($res && mysql_num_rows($res)) {
}

mysql_close($dbConn);
        $cal = "js_del_key('".$row["keycode"]."'); return false;";
        $txt .= "<tr><td>".$row['keycode']."</td><td>".$row['datum']."</td>";
        $txt .= "<td>".$row['sold']."</td><td>".$row['email']."</td>";
        $txt .= "<td><input type=\"button\" name=\"del\" value=\"DELETE\" onclick=\"".$cal."\"></td></tr>";

    $cal = "js_add_key(); return false;";
    $txt .= "<tr><td><input type=\"text\" size=\"46\" id=\"nkey\" /></td><td>".date("Y-m-d")."</td>";
    $txt .= "<td>N</td><td>&nbsp;</td>";
    $txt .= "<td><input type=\"button\" name=\"addkey\" value=\"ADD NEW\" onclick=\"".$cal."\"></td></tr>";
    $txt .= "</table>";
    mysql_close($link);
    return($txt);

function p_adm_del_key($key)
{
    $link = dbconnect();
    $sql = "delete from `benkeys` where `keycode`='".$key."' limit 1";
    mysql_query($sql);
    mysql_close($link);
    return(p_adm_list_keys());
}
function p_adm_add_key($key)
{
    $link = dbconnect();
    $sql = "insert into `benkeys` (`keycode`,`datum`,`sold`) values ('".$key."','".date("Y-m-d")."','N')";
    mysql_query($sql);
    mysql_close($link);
    return(p_adm_list_keys());
}
function dbconnect()    
{
    $link = mysql_connect(DBHOST, DBUSER, DBPWD) or die ("Error: ".mysql_error());
    mysql_select_db(DBNAME) or die("Could not select database: ".mysql_error());
    return($link);
}
?> 
```

Iv 多次查看包括数据库在内的所有内容，但我似乎无法找到问题所在，我没有错误只是“查询为空” 有人请帮助我将不胜感激谢谢。

我的 SQL 根是

```
SELECT * 
FROM  `benkeys` 
LIMIT 0 , 30 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:25:22.467

改变

```
 $sql = "SELECT * FROM `benkeys` where id = 1";
 $res = mysql_query($query, $dbConn); 
```

至

```
$sql = "SELECT * FROM `benkeys` where id = 1";
$res = mysql_query($sql, $dbConn) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:25:49.153

将 $ 替换为`query`$`sql`

```
$res = mysql_query($sql, $dbConn) 
```

# asp.net-mvc - 异步控制器和 ASP.NET 线程处理

> ID：15967604
> 
> 赞同：0
> 
> 时间：2013-04-12T09:24:34.777
> 
> 标签：asp.net-mvc, multithreading, wcf, asynchronous

我有一个带有 Web 层的 Web 应用程序是 ASP.NET MVC 3 Web 应用程序，服务层是 WCF，数据库是 MSSQL

在这篇文章中：http: [//blogs.msdn.com/b/tmarq/archive/2010/04/14/performing-asynchronous-work-or-tasks-in-asp-net-applications.aspx](http://blogs.msdn.com/b/tmarq/archive/2010/04/14/performing-asynchronous-work-or-tasks-in-asp-net-applications.aspx)，它提到我应该进行异步处理“**当切换线程的好处超过上下文切换的成本时**。”，“**例如，如果您向远程服务器发出异步 Web 服务请求**”

这是否意味着，在每个请求中，我都应该尽可能多地尝试使用异步处理（在 ASP.NET MVC 中，我假设它是异步控制器而不是 ASP.NET 中的 PageAsyncTask，如果我错了，请纠正我）只要有调用 WCF 服务（或者如果我不使用 WCF 服务，那么每当我调用数据库时）以增加服务器的吞吐量，增加服务器一次可以处理的请求数？

另一个有点相关的问题：有没有人知道或可以指出一篇文章，解释从这样的 Web 层连接到 WCF 时的连接限制？我听说 WCF 的限制是一次 5 个并发连接，但无法确认。如果是5个并发连接，是否意味着瓶颈在WCF中，即使我增加了web层的吞吐量？

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:44:35.900

> 这是否意味着，在每个请求中，我都应该尽可能多地尝试使用异步处理

只有当您有 I/O 操作（远程 HTTP 调用，如 WCF 服务调用、数据库调用......）时，这样做才有好处。但是，只有在执行大量负载测试并确定同步调用是您的应用程序的瓶颈时，您才应该这样做，以防您有如此高的处理要求。在大多数情况下，异步代码的复杂性和难以发现错误的风险超过了好处。

> 有谁知道或可以向我指出一篇文章，解释从这样的 Web 层连接到 WCF 时的连接限制？

我不知道存在这种限制。

# angularjs - 路由提供者的 Angular 指令

> ID：15967613
> 
> 赞同：1
> 
> 时间：2013-04-12T09:24:59.150
> 
> 标签：angularjs, angularjs-directive

[角度教程](http://docs.angularjs.org/tutorial/step_07)`route provider` **明确**调用以下内容，（为简洁起见进行了调整）

```
angular.module('myApp', []).
  config(['$routeProvider', function($routeProvider) {
    $routeProvider.
      when('/myResource1', 
        {templateUrl: 'partials/myView1.html', controller: MyController1}).
      when('/myResource2', 
        {templateUrl: 'partials/myView2.html', controller: MyController2}).
      otherwise({redirectTo: '/index.html'});
  }]); 
```

我们可以`route provider` **单独**定义，然后通过`angular directive`下面的方式调用它吗？是否存在这样的指令？否则，如何度过难关？

```
function MyRouteProvider($routeProvider) {
    $routeProvider.
      when('/myResource1', 
        {templateUrl: 'partials/myView1.html', controller: MyController1}).
      when('/myResource2', 
        {templateUrl: 'partials/myView2.html', controller: MyController2}).
      otherwise({redirectTo: '/index.html'});
}; 
```

```
<html ng-app="myApp">
<head>
  <script src="lib/angular.js"></script>
  <script src="js/MyControllers.js"></script>
  <script src="js/MyRouteProvider.js"></script>
</head>
<body ng-routeProvider="MyRouteProvider">

...

</body>
</html> 
```

```
myApp
  |__index.html
  |__js
  |   |__MyControllers.js
  |   |__MyRouteProvider.js
  |__partials
      |__myView1.html
      |__myView2.html 
```

# php - php代码有什么问题？（mysql查询）

> ID：15967614
> 
> 赞同：0
> 
> 时间：2013-04-12T09:25:08.090
> 
> 标签：php, mysql

```
 <?php 
   include"config.php";

   session_start();

   $kind = $_GET['kind'];

   $errormsg = '';

   if($kind == user)
    {  $tablename = "appusers"; }
    else
    { $tablename = "developers"; }

   if(isset($_POST['setemail'])){

   $setemail = $_POST['setemail'];

   $sql = mysql_query("SELECT * FROM '$tablename' WHERE email = '$setemail'");

   if(mysql_num_rows($sql) > 0)
   {
       $errormsg = "good";
   }
   else
   {
       $errormsg = "not valid";
   }
   }            
?> 
```

我一直无效。当我写没有变量的表名时，它可以工作......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T09:26:51.403

```
SELECT * FROM $tablename WHERE email = '$setemail' 
```

`$tablename`不需要单引号。

此外，您可以这样做：

```
if(mysql_errno()){
     echo mysql_error();
     exit;
} 
```

每次查询后查看mysql错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T09:31:08.040

如果你想转义你的表名，使用 `$tablename` 而不是 '$tablename'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:31:04.303

尝试一下。

```
 $tablename = "developers";
    $errormsg = '';

    if(!empty($_GET['kind']) && $_GET['kind'] == "user") 
    { 
        $tablename = "appusers"; 
    } 

   if(isset($_POST['setemail'])){

   $setemail = $_POST['setemail'];

   $sql = mysql_query("SELECT * FROM $tablename WHERE email = '$setemail'");
   if(mysql_num_rows($sql) > 0)
     {
     $errormsg = "good";
      }
        else
        {
          $errormsg = "not valid";
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T09:31:26.297

对表名使用反引号，而不是单引号

此外，您应该尝试从查询中获取更多错误信息。

```
$sql = mysql_query("SELECT * FROM `$tablename` WHERE email = '$setemail'");
if(mysql_num_rows($sql) > 0)
{
    $errormsg = "good";
}
else
{
    if ($sql)
        $errormsg = "not valid";
    else
        $errormsg = mysql_error();
} 
```

# python - 有人可以解释令人困惑的单元测试代码吗？

> ID：15967615
> 
> 赞同：0
> 
> 时间：2013-04-12T09:25:15.463
> 
> 标签：python, unit-testing

这是为其编写 unittest 的函数：

```
def swap_k(L, k):
    """ (list, int) -> NoneType

    Precondtion: 0 <= k <= len(L) // 2

    Swap the first k items of L with the last k items of L.

    >>> nums = [1, 2, 3, 4, 5, 6]
    >>> swap_k(nums, 2)
    >>> nums
    [5, 6, 3, 4, 1, 2]
    """ 
```

这是单元测试代码：

```
def test_swap_k_list_length_6_swap_2(self):
    """Test swap_k with list of length 6 and number of items to swap 2.
    Also allow for the fact that there are potentially four alternate
    valid outcomes.
    """

    list_original = [1, 2, 3, 4, 5, 6]
    list_outcome_1 = [5, 6, 3, 4, 1, 2]
    list_outcome_2 = [5, 6, 3, 4, 2, 1]
    list_outcome_3 = [6, 5, 3, 4, 1, 2]
    list_outcome_4 = [6, 5, 3, 4, 2, 1]
    valid_outcomes = [list_outcome_1, list_outcome_2, list_outcome_3, list_outcome_4]
    k = 2

    a1.swap_k(list_original,k)

    self.assertIn(list_original, valid_outcomes)
.
----------------------------------------------------------------------
Ran 1 test in 0.000s

OK 
```

unittest 代码通过了，我不明白为什么，因为我认为唯一有效的结果是 list_outcome_1 从 swap_k 的文档字符串判断...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T09:30:59.693

首先，即使“valid_outcomes”包含的内容多于有效内容，测试也可以*通过*。（在您看来，list_outcome_1）。这只是意味着它有时不会在它应该*失败的时候失败。*

其次，我认为测试是正确的：文档没有说前“k”项将按原始顺序放在最后，也不保证最后“k”项相同。所以 [1,2] 的任何顺序都可以出现在列表的末尾，而 [5,6] 的任何顺序都可以出现在列表的开头。

一般来说，如果不能保证某些事情，那么我宁愿不假设它，即使它看起来合乎逻辑（毕竟，列表是有序的，所以假设它几乎是自然的）。

“修复”单元测试也意味着修复文档以保证顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:41:04.583

```
self.assertEqual(list_original, list_outcome_1) 
```

和

```
self.assertIn(list_original, valid_outcomes) 
```

两者都满足测试。在这里，您正在测试真实的结果是否在结果列表中，这是真实的，因此测试是有效的。

但是根据文档字符串

```
 self.assertEqual(list_original, list_outcome_1) 
```

会更好，因为它会检查相等性。

# php - 选择区域时捕获城市

> ID：15967620
> 
> 赞同：0
> 
> 时间：2013-04-12T09:25:30.263
> 
> 标签：php, jquery, ajax, zend-framework, select

我有两种选择——一种用于地区，一种用于城市。我想要的是，当我点击时`region`，它会通过 Ajax 进入我的数据库并获取正确的城市。实际上我已经抓住了它，但我不能把它放在`cities`选择中。

这是我在 JS Select 函数 onClick 事件代码中的 Ajax 函数：

```
$.ajax({
                url: '/map/index/ajax',

            type: 'POST',
            dataType: 'json',
            data: {
                // list of request parameters 
                'r_alias': valueRegionSelect
            },
            success: function(data) {
                console.log(data);
                $('#city_select').val(data.c_name);
            }
        }); 
```

console.log(data) 显示

```
[Object { r_id="39",  r_alias="cu",  c_id="4649", c_name="Kyev" more...}, Object 
,  more...}] 
```

正是我需要的。

Ajax 控制器：

```
public function ajaxAction() {
        $alias = $this->_getParam('r_alias');
        $result = Map_Model_Map_Factory::getCityByRegionAlias($alias);

        $this->view->cities = $result;
        $this->_helper->json($result);
    } 
```

那么我怎样才能把它放在我的选择中：

```
<select id="city_select" name="city">
                            <?php foreach($this->cities as $city): ?>
                            <option ><?php echo $city['c_name'] ?></option>
                            <?php endforeach; ?>
                        </select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:30:49.547

您没有正确使用数据，应该是

```
var html = "";
for (var i = 0; i < data.length; i++)
{
    html += '<option value="' + data[i].c_id + '">' . data[i].c_name . '</option>';
}
$('#city_select').html(html); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:39:41.357

在您的成功回调中，您可以执行以下操作：

```
success: function(data) {
    //data       = $.parseJSON(data);
    var select = $('#city_select').empty();

    $.each(data, function(i, item) {
        select.append($('<option></option>')
              .attr('value',item.c_id)
              .text(item.c_name)); 
    });
} 
```

未经测试，但它应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T09:40:06.787

您需要创建选项标签来填充您的选择

```
$('#city_select').empty();
for (var i = 0; i < data.length; i++)
    $('#city_select').append($('<option>').val(data[i].c_id).html(data[i].c_name)); 
```

# vba - VBA 超链接名称和地址

> ID：15967621
> 
> 赞同：1
> 
> 时间：2013-04-12T09:25:45.667
> 
> 标签：vba, hyperlink

我正在尝试将 excel 电子表格中的所有超链接拉到一个新的工作表中。我希望 A 列显示超链接中的文本，B 列显示超链接地址。

我已经编写了下面的代码，并且所有 B 列都可以正常工作，但是 A 列中的值并没有全部出现，并且它们与 B 列中的超链接地址不匹配。我做错了什么？

提前致谢

```
Sub extract_links()
    Dim hyp As Hyperlink
    Dim ReadCols As Long
    Dim ReadWriteRow As Long
    ReadWriteRow = 1
    ReadCols = 6

ActiveWorkbook.Sheets(2).Range("a:b").Clear

For c = 1 To ReadCols
    For Each hyp In ActiveWorkbook.Sheets(1).Columns(c).Hyperlinks
        ActiveWorkbook.Sheets(2).Range("a" & ReadWriteRow).Value = ActiveWorkbook.Sheets(1).Cells(ReadWriteRow, c).Value
        ActiveWorkbook.Sheets(2).Range("b" & ReadWriteRow).Value = hyp.Address
        ReadWriteRow = ReadWriteRow + 1
    Next
Next c
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:34:54.357

这次你需要改变这个：

```
ActiveWorkbook.Sheets(2).Range("a" & ReadWriteRow).Value = ActiveWorkbook.Sheets(1).Cells(ReadWriteRow, c).Value 
```

进入这个：

```
ActiveWorkbook.Sheets(2).Range("a" & ReadWriteRow).Value = hyp.Range.Value 
```

# asp.net-mvc - 按下 Grid 的 Cancel 按钮后，绑定到 Grid 的 kendo ui Combobox 丢失了它的值和文本

> ID：15967624
> 
> 赞同：0
> 
> 时间：2013-04-12T09:25:55.370
> 
> 标签：asp.net-mvc, binding, autocomplete, kendo-ui, kendo-grid

我在数据库中有两个视图。奖金和员工。一对多（奖金）。我有 kendo ui 网格（kendo web），它显示来自名为 Bonuses 的控制器的 ajax 结果和一个自动编译元素 - Employee Combobox 与网格的 Employee 字段绑定。

![在此处输入图像描述](https://i.stack.imgur.com/tPgwh.png)

网格的数据源：

```
 // bind json result from /Bonuses/GetPagedJsonBonuses
        var bonusesDataSource = new kendo.data.DataSource({
            transport: {                        
                read: "@Url.Action("GetPagedJsonBonuses", "Bonuses")",
                update: {
                    url: "@Url.Action("Edit", "Bonuses")",
                    type: "PUT"
                },
                create: {
                    url: "@Url.Action("Create", "Bonuses")",
                    type: "POST"
                },
                parameterMap: function(options, operation) {
                    if (operation === "update" || operation === "create") {
                        // updates the BonusDTO.EmployeeId with selected value
                        if (newValueEmployeeId !== undefined)
                            options.EmployeeId = newValueEmployeeId;
                    }
                    return options;
                }
            },                    
            schema: {
                data: "Data", // PagedResponse.Data
                total: "TotalCount", // PagedResponse.TotalCount
                model: {
                    id: "BonusId",  // Data
                    fields: {
                        EmployeeId: { type: "number" },
                        EmployeeLastName: {
                            type: "string",
                            editable: true, 
                            //validation: { required: {message: "Employee's last name is required"}}
                        },
                        Amount: {
                            type: "number",
                            editable: true,
                            nullable: false,
                            validation: {
                                required: { message: "Amount is required to be set" }
                            }
                        }                           
                    } // fields
                } // model
            }// schema 
        }); 
```

网格元素如下所示：

```
// creates bonuses grid control
                $("#bonusesGrid").kendoGrid({
                    dataSource: bonusesDataSource,
                    toolbar: ["create"],
                    editable: "inline",                                        
                    columns: [
                        "BonusId",                                                         
                        "EmployeeId",                                                    
                        {
                            field: "EmployeeLastName",                                                        
                            editor: employeeAutocompletingEditor,
                            template: "#=EmployeeLastName#"
                        },
                        "Amount",                        
                        {
                            command: ["edit"],
                            title: " "
                        }
                    ],
                    save: function(e) {
                        if (newValueEmployeeId !== undefined && newValueEmployeeLastName !== undefined) {
                            e.model.EmployeeId = newValueEmployeeId; // it's a hack to bind model and autocomplete control
                            e.model.EmployeeLastName = newValueEmployeeLastName;
                        }
                    },
                    edit: function(e) {
                        setCurrentValueEmployeeIdAndLastName(e.model.EmployeeId, e.model.EmployeeLastName);
                    },
                    cancel: function(e) {
                        setCurrentValueEmployeeIdAndLastName(e.model.EmployeeId, e.model.EmployeeLastName);
                    }
                }); 
```

自动完成组合框有它自己的使用 ajax 的数据源：

```
// datasource for autocomlete combobox to lookup employees names from
                var employeesDataSource = new kendo.data.DataSource({                    
                    transport: {
                        read: "@Url.Action("GetJsonEmployeesByLastName", "Bonuses")",
                    },                    
                    parameterMap: function(options, operation) {
                        if (operation === "update" || operation === "create") {
                            setNewValueEmployeeIdAndLastName(options.Id, options.LastName);
                        }
                        return options;
                    },                    
                }); 
```

自动编译组合框看起来像这样：

```
function employeeAutocompletingEditor(container, options) {
                    $('<input required data-text-field="LastName" data-value-field="EmployeeId" data-bind="value:' + options.field + '"/>')
                        .appendTo(container)
                        .kendoComboBox({                            
                            // sets the local variables to update values of current row.
                            change: function() {
                                setNewValueEmployeeIdAndLastName(this.value(), this.text());
                            },
                            dataBinding: function (e) {                                
                                console.log("dataBinding: ", e, this.dataItem());
                            },
                            dataBound: function (e) {
                                console.log("dataBound: ", e, this.dataItem());
                            },
                            dataSource: employeesDataSource
                        });
                } 
```

我使用编辑器绑定将值（EmployeeId）和文本（EmployeeLastName）从网格传递到组合框。我还使用类似时间变量（newValueEmployeeId，currentValueEmployeeId）的技巧将选定的员工发送到组合框中，并将其传递给网格以进行正确保存。A 发现将值传回网格是最常见的做法。

**我的问题是**：如果我**第一次**按网格上的编辑按钮组合框从网格行显示当前员工的姓名：

![在此处输入图像描述](https://i.stack.imgur.com/lmhWx.png)

如果我按下取消按钮并再次按下编辑按钮，组合框不显示网格的当前值（员工姓名）如果我输入一些名称，更改一些其他值和 Udate（保存）值，下次组合框再次显示员工姓名，但在按下取消之前只有一次。

![在此处输入图像描述](https://i.stack.imgur.com/hh69i.png)

我是剑道 UI 的新手，这个问题让我发疯......我认为组合框失去了它的绑定或不更新。我尝试在 onBound 和 onBinding 事件时设置值，但这无济于事。请帮助我提供建议和示例。

PS所有事件和功能是我尝试调试和寻找解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:22:52.190

只有一个修复帮助了我：

```
var employeeList = new List<Employee>()
employeeList.add(new Emplpyee())  // add fake employee record.

return Json(employeeList) 
```

我不知道为什么，但是如果我返回空的员工列表或 null，网格控件开始循环空的 ajax 请求。这不起作用：

```
return Json(new List<Employee>());
return Json(null); 
```

我认为这是剑道组合框本身的问题，因为它还没有准备好接收和处理空列表或 null 作为 json 结果。我还听到一些消息，JQuery 不再支持空或空结果......也许这就是原因

# c# - 如何合并两个具有不同架构的数据表？

> ID：15967625
> 
> 赞同：0
> 
> 时间：2013-04-12T09:25:57.093
> 
> 标签：c#, sql, datatable, dataset

我有两个**数据表**如下所示

表格1

```
-------------------------
  ID  |   Name 
--------------------------
 1    |  JOHN
 2    |  GEORGE
 3    |  RAGU
-------------------------- 
```

表 2

```
 ----------
   ID | AGE
  ----------
    1 | 23
    2 | 23
    3 | 22
  ---------- 
```

我只想要这样的结果..

结果

```
-------------------------
  ID  |   Name    | AGE
--------------------------
 1    |  JOHN     | 23
 2    |  GEORGE   | 23
 3    |  RAGU     | 22
-------------------------- 
```

谢谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T09:49:01.170

你可以看看这个：

```
static void Main(string[] args)
{
    Program p = new Program();
    DataTable dt1= p.Get1();
    DataTable dt2 = p.Get2();          
    DataTable dt3 = p.Get3(dt1, dt2);
}
public DataTable Get1()
{
    DataTable dt1 = new DataTable();
    dt1.Columns.Add("ID");
    dt1.Columns.Add("Name");
    dt1.Rows.Add("1", "JOHN");
    dt1.Rows.Add("2", "GEORGE");
    dt1.Rows.Add("3", "RAGU");        
    return dt1;
}

public DataTable Get2()
{
    DataTable dt2 = new DataTable();
    dt2.Columns.Add("AGE");         
    dt2.Rows.Add("23");
    dt2.Rows.Add("23");
    dt2.Rows.Add("22");
    return dt2;
}

public DataTable Get3(DataTable dt1,DataTable dt2)
{
    dt1.Columns.Add("Age");
    for (int i = 0; i < dt1.Rows.Count; i++)
    {
        dt1.Rows[i]["Age"] = dt2.Rows[i]["Age"];
    }
    return dt1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:40:18.150

你听说过[INNER JOIN](http://msdn.microsoft.com/library/ms190014.aspx)吗？

基本上，你想要做的是：

```
SELECT Persons.ID, Persons.Name, Ages.Age 
FROM Persons INNER JOIN Ages ON Persons.ID = Ages.ID 
```

现在，您可以根据需要将其插入到另一个表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T09:41:06.643

我认为这就是您可能正在寻找的

```
INSERT INTO Result (ID, Name, Age)
SELECT T1.ID, T1.Name, T2.Age
FROM
    Table1 AS T1
INNER JOIN
    Table2 AS T2
ON 
    T1.ID = T2.ID
ORDER BY
    T1.ID 
```

# django - 会话未在模板中更新？

> ID：15967626
> 
> 赞同：0
> 
> 时间：2013-04-12T09:26:06.730
> 
> 标签：django, session

我实现了一个购物车，它将项目 ID 存储在会话的列表中。我的添加方法看起来像这样

```
def add_to_cart(request):
  if request.method == 'POST':
    if 'cart' not in request.session:
      request.session['cart'] = []
    if not request.POST['item-id'] in request.session['cart']:
      request.session['cart'].append(request.POST['item-id'])

    return HttpResponse('true') 
```

通过在 add 方法中打印会话，我得到了正确数量的元素。但是当重新加载视图时，我尝试读取存储在会话中的列表，我只得到一个包含一个元素的列表。我的观点看起来像这样

```
def cart(request):
  cart_items = request.session['cart']
  print len(cart_items)
  return render(request, 'checkout/cart.html', ({ 'items': cart_items })) 
```

在模板中我只想打印这样的列表：

```
{% load cart_helpers %}

{% block content %}
<div class="cart">
  <div class="inner">
    <h2>Warenkorb</h2>
    <table class="listing">
      {{ items }}
    </table>
  </div>
</div>
{% endblock %} 
```

无论我做什么，我的购物车会话中的列表都只有一项......

有什么建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:32:38.543

在您看来，您需要设置`request.session.modified = True`以表明您已经修改了会话对象。因此，将您的视图更新为

```
def add_to_cart(request):
  if request.method == 'POST':
    if 'cart' not in request.session:
      request.session['cart'] = []
    if not request.POST['item-id'] in request.session['cart']:
      request.session['cart'].append(request.POST['item-id'])

      request.session.modified = True  #set modified state

    return HttpResponse('true') 
```

这是必需的，因为

```
request.session['cart'].append(request.POST['item-id']) 
```

不修改`request.session`但修改`request.session['cart']`，在这种情况下，django 不知道修改过的会话并且不保存它。

参考[何时保存会话](https://docs.djangoproject.com/en/dev/topics/http/sessions/#when-sessions-are-saved)

# java - 这个模式需要正则表达式

> ID：15967628
> 
> 赞同：0
> 
> 时间：2013-04-12T09:26:08.277
> 
> 标签：java, regex

我需要以下模式的正则表达式

1.  它可以以/或数字开头
2.  它只能包含数字，不能包含文本
3.  数字之间可以有空格。
4.  它可以包含`/*`至少 1 个数字和空格或数字和`/*`

有效字符串：

```
 3232////33 43/323//
 3232////3343/323//
 /3232////343/323// 
```

无效的字符串：

```
/sas/3232/////dsds/    
/ /34343///// /////
/////////// 
```

我的问题是，它可以在数字之间有空格，例如`/3232 323/`但不是`/ /`。
如何验证它？

到目前为止我已经尝试过：

```
(\\d[\\d ]*/+) , (/*\\d[\\d ]*/+) , (/*)(\\d*)(/*) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:31:21.940

这个正则表达式应该适合你：

```
^/*(?:\\d(?: \\d)*/*)+$ 
```

### 现场演示：[http ://www.rubular.com/r/pUOYFwV8SQ](http://www.rubular.com/r/pUOYFwV8SQ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:29:58.263

试试这个java正则表达式

```
/*(\\d[\\d ]*(?<=\\d)/+)+ 
```

它符合您的所有标准。

尽管您没有具体说明，但我假设空格可能不会作为数字的第一个或最后一个字符出现（即空格必须*在*数字之间）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:35:10.877

我的解决方案不是那么简单，但它有效

```
^(((\d[\d ]*\d)|\d)|/)*((\d[\d ]*\d)|\d)(((\d[\d ]*\d)|\d)|/)*$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T19:00:34.667

```
"(?![A-z])(?=.*[0-9].*)(?!.*/ /.*)[0-9/ ]{2,}(?![A-z])" 
```

这将匹配您想要的，但请记住它也将匹配此

```
/3232///// from /sas/3232/////dsds/ 
```

这是因为部分无效字符串是正确的

如果您逐行阅读，则匹配 ^ $ 并且如果您正在阅读整个文本块，则在上面的正则表达式周围搜索 \r\n 以匹配每个新行

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T09:36:41.437

只需对最后一个条件使用[环视](http://www.regular-expressions.info/lookaround.html)。

```
^(?=.*?\\d)([\\d/]*(?:/ ?(?!/)|\\d ?))+$ 
```

最好的办法是使用条件正则表达式，但我认为 Java 不支持它们。

**解释：**
基本上是数字或斜线，后跟一个数字和一个空格，或者一个斜线和一个空格，后面没有另一个斜线。重复那个。该空格是可选的，因为我假设您的字符串末尾没有空格。

# java - 暂停时如何恢复 MediaPlayer

> ID：15967634
> 
> 赞同：4
> 
> 时间：2013-04-12T09:26:25.103
> 
> 标签：java, android, android-mediaplayer, media-player

我希望在应用程序最小化时暂停 MediaPlayer 音乐，并在恢复时从同一点恢复，但我不能这样做，每次从一开始就开始......

这是我所拥有的：

```
public class Main extends Activity {
MediaPlayer music;
int length;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    music = MediaPlayer.create(Main.this, R.raw.song);
    music.setLooping(true);
    music.start();

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    music.pause();
    length = music.getCurrentPosition();
}

@Override
protected void onRestart() {
    // TODO Auto-generated method stub
    super.onRestart();
    music.start();
    music.seekTo(length);
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T09:28:15.523

你似乎把语句放在了错误的顺序中，试试这个：

```
music.seekTo(length);
music.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:31:28.307

您需要先找到最后一个位置，然后重新开始播放。做这个：

```
music.seekTo(length);
music.start(); 
```

# silverlight - Silverlight datagrid columnheader 更改字体颜色

> ID：15967638
> 
> 赞同：0
> 
> 时间：2013-04-12T09:26:31.063
> 
> 标签：silverlight, datagrid

是否可以更改数据网格中列标题的字体颜色？

我已经应用了一些改变背景的样式，但我不知道如何改变字体颜色，不是针对元素，而是针对标题。

我使用的 XAML 来自这个线程：[Change background color of Datagrid Header in Silverlight](https://stackoverflow.com/questions/325654/change-background-color-of-datagrid-header-in-silverlight)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:39:17.730

嗨，为您的资源添加样式并设置样式，

```
<Style x:Key="GridHeaderStyle" ControlTemplate TargetType="primitives:DataGridColumnHeader">
    <Setter Property="FontSize"
            Value="14" />
    <Setter Property="FontWeight"
            Value="Bold" />
    <Setter Property="Foreground"
            Value="{StaticResource xrxGray_I}" />
    <Setter Property="Background"
            Value="{StaticResource xrxGray_B}" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate>
                <Grid Height="50" Width="100">
                    <TextBlock Text="{TemplateBinding Header}" />
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter> 
```

# java - 如何在 Joda Time / Java 8 中列出时区偏移量、时区 ID 和长名称？

> ID：15967642
> 
> 赞同：13
> 
> 时间：2013-04-12T09:26:47.270
> 
> 标签：java, timezone, java-8, jodatime, java-time

Joda Time 的时区 id 可以简单地使用以下代码段显示。

```
Set<String> zoneIds = DateTimeZone.getAvailableIDs();

for(String zoneId:zoneIds) {
    System.out.println(zoneId);
} 
```

但是如何显示相应的时区偏移量、时区 ID 和长名称，以便列表看起来像下面这样？

```
(GMT-10:00) Pacific/Honolulu, Hawaii Standard Time
(GMT-10:00) Pacific/Johnston, Hawaii Standard Time
(GMT-10:00) Pacific/Fakaofo, Tokelau Time
(GMT-10:00) HST, Hawaii Standard Time 
```

它们需要在下拉框中列出以供选择。

* * *

以下代码段显示了名称，但它显示的偏移量看起来很奇怪。

```
Set<String> zoneIds = DateTimeZone.getAvailableIDs();

for (String zoneId : zoneIds) {
    int offset = DateTimeZone.forID(zoneId).getOffset(new DateTime());
    String longName = TimeZone.getTimeZone(zoneId).getDisplayName();

    System.out.println("(" + offset + ") " + zoneId + ", " + longName);
} 
```

在它显示的长列表中，其中一些显示为，

```
(-36000000) Pacific/Honolulu, Hawaii Standard Time
(-36000000) Pacific/Johnston, Hawaii Standard Time
(-36000000) Pacific/Fakaofo, Tokelau Time
(-36000000) HST, Hawaii Standard Time 
```

偏移量应[如此](http://joda-time.sourceforge.net/timezones.html)列表中所示。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-12T16:14:47.657

以下方法有效。

```
import java.util.Set;
import java.util.TimeZone;
import org.joda.time.DateTimeZone;
import org.joda.time.format.DateTimeFormat;
import org.joda.time.format.DateTimeFormatter;

Set<String> zoneIds = DateTimeZone.getAvailableIDs();
DateTimeFormatter dateTimeFormatter = DateTimeFormat.forPattern("ZZ");

for (String zoneId : zoneIds) {
    String offset = dateTimeFormatter.withZone(DateTimeZone.forID(zoneId)).print(0);
    String longName = TimeZone.getTimeZone(zoneId).getDisplayName();

    System.out.println("(" + offset + ") " + zoneId + ", " + longName);
} 
```

还有其他我现在不知道的可能更好的方法。

* * *

或者

```
import java.util.Set;
import org.joda.time.DateTimeUtils;
import org.joda.time.DateTimeZone;
import org.joda.time.format.DateTimeFormat;
import org.joda.time.format.DateTimeFormatter;

Set<String> zoneIds = DateTimeZone.getAvailableIDs();
DateTimeFormatter dateTimeFormatter = DateTimeFormat.forPattern("ZZ");

for (String zoneId : zoneIds) {
    String offset = dateTimeFormatter.withZone(DateTimeZone.forID(zoneId)).print(0);
    String longName = DateTimeZone.forID(zoneId).getName(DateTimeUtils.currentTimeMillis());

    System.out.println("(" + offset + ") " + zoneId + ", " + longName);
} 
```

例如，对于格林威治标准时间（`Etc/GMT+0`例如），它将显示，`+00:00`而不是`GMT+00:00`像第一种情况那样显示。

> 如果该名称对于区域设置不可用，则此方法 ( `public final String getName(long instant)`) 返回格式为 [+-]hh:mm 的字符串。

`Locale`如果需要使用重载方法，也可以使用适当的，

```
public String getName(long instant, Locale locale) 
```

* * *

短名称，例如协调世界时的 UTC 可以如下显示。

```
import java.util.Set;
import org.joda.time.DateTimeUtils;
import org.joda.time.DateTimeZone;
import org.joda.time.format.DateTimeFormat;
import org.joda.time.format.DateTimeFormatter;

Set<String> zoneIds = DateTimeZone.getAvailableIDs();
DateTimeFormatter dateTimeFormatter = DateTimeFormat.forPattern("ZZ");

for (String zoneId : zoneIds) {
    String offset = dateTimeFormatter.withZone(DateTimeZone.forID(zoneId)).print(0);
    String shortName = DateTimeZone.forID(zoneId).getShortName(DateTimeUtils.currentTimeMillis());

    System.out.println("(" + offset + ") " + zoneId + ", " + shortName);
} 
```

使用适当的`Locale`，如果需要使用重载方法，

```
public String getShortName(long instant, Locale locale) 
```

* * *

**更新 ：**

在 Java SE 8 中使用[Java Time API](https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)，这进一步简化了。

```
import java.time.ZoneId;
import java.time.ZoneOffset;
import java.time.ZonedDateTime;
import java.time.format.TextStyle;
import java.util.Locale;
import java.util.Set;

Set<String> zoneIds = ZoneId.getAvailableZoneIds();

for (String zoneId : zoneIds) {
    ZoneId zone = ZoneId.of(zoneId);
    ZonedDateTime zonedDateTime = ZonedDateTime.now(zone);

    ZoneOffset offset = zonedDateTime.getOffset();
    String longName = zone.getDisplayName(TextStyle.FULL, Locale.ENGLISH);

    System.out.println("(" + offset + ") " + zoneId + ", " + longName);
} 
```

显示名称有各种可用的样式[`java.time.format.TextStyle`](https://docs.oracle.com/javase/8/docs/api/java/time/format/TextStyle.html)。例如，可以使用 显示缩写`TextStyle.SHORT`。

`zone.getDisplayName(TextStyle.FULL, Locale.ENGLISH)`将显示长名称，例如“印度时间”。然而，与 Joda Time 不同，这不是一个全名。

以下将显示给定名称的全名，例如“印度标准时间”（如果适用）。

```
DateTimeFormatter pattern = DateTimeFormatter.ofPattern("zzzz");
String longName = pattern.format(ZonedDateTime.now(ZoneId.of(zoneId))); 
```

以下将显示给定区域的区域偏移量`GMT+05:30`（注意模式的大写）。

```
DateTimeFormatter pattern = DateTimeFormatter.ofPattern("ZZZZ");
String longName = pattern.format(ZonedDateTime.now(ZoneId.of(zoneId))); 
```

以下用于显示缩写。

```
DateTimeFormatter pattern = DateTimeFormatter.ofPattern("zzz");
String longName = pattern.format(ZonedDateTime.now(ZoneId.of(zoneId))); 
```

`ZZZ`区域偏移的资本，如`+0530`, `+0000`。

[https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-07T05:49:14.113

```
import java.time.Instant;
import java.time.LocalDateTime;
import java.time.ZoneId;
import java.time.ZonedDateTime;
import java.time.format.DateTimeFormatter;
import java.time.format.TextStyle;
import java.time.zone.ZoneRules;
import java.util.Locale;
import java.util.TimeZone;

// Europe/Berlin
// Europe/London
// Asia/Kolkata
public class TimeZoneTest {

    public static void main(String[] args) {

        ZonedDateTime timeZone = ZonedDateTime.of(LocalDateTime.of(2020, 8, 06, 05, 45),
                                                   ZoneId.of("Asia/Manila"));

        Instant instant = timeZone.toInstant();
        ZoneRules rules = timeZone.getZone().getRules();
        boolean isDst = rules.isDaylightSavings(instant);
        String dstShortName = DateTimeFormatter.ofPattern("zzz").format(timeZone);
        String dstLongName = DateTimeFormatter.ofPattern("zzzz").format(timeZone);
        TimeZone tz = TimeZone.getTimeZone(timeZone.getZone());

        System.out.println(timeZone.getZone().getId());
        System.out.println(timeZone.getOffset().getTotalSeconds()); //Offset
        System.out.println(rules.getStandardOffset(instant).getTotalSeconds()); //RawOffset
        System.out.println((rules.getDaylightSavings(instant).getSeconds())); //DstSavings
        System.out.println(rules.isDaylightSavings(instant));
        System.out.println(dstShortName);
        System.out.println(dstLongName);
        if (isDst) {
            //Set standard timezone name
            System.out.println(timeZone.getZone().getDisplayName(TextStyle.SHORT, Locale.ENGLISH));
            System.out.println(timeZone.getZone().getDisplayName(TextStyle.FULL, Locale.ENGLISH));
        } else {
            //Set DST timezone name
            System.out.println(tz.getDisplayName(true, TimeZone.SHORT, Locale.ENGLISH));
            System.out.println(tz.getDisplayName(true, TimeZone.LONG, Locale.ENGLISH));
        }

//        //SHORT: CEST
//        DateTimeFormatter.ofPattern("zzz").format(zonedDateTime)
//
//        //SHORT: CET 
//        ZoneId.getDisplayName(TextStyle.SHORT,Locale.ENGLISH)
//
//        //LONG: Central European Summer Time
//        DateTimeFormatter.ofPattern("zzzz").format(zonedDateTime)
//
//        //LONG: Central European Time
//        ZoneId.getDisplayName(TextStyle.LONG,Locale.ENGLISH)
//
//        //Use this for converting CET to CEST and vice versa
//        TimeZone tz = TimeZone.getTimeZone(timeZone.getZone());
//        tz.getDisplayName(true, TimeZone.SHORT, Locale.ENGLISH));

//Joda
//        DateTimeZone dz = DateTimeZone.forID("Asia/Manila");
//        String shortName = dz.getShortName(DateTimeUtils.currentTimeMillis());
//        System.out.println(shortName);
//
//        String longerName = dz.getName(DateTimeUtils.currentTimeMillis());
//        System.out.println(longerName);
    }
} 
```

# php - Zend 在视图助手中重定向

> ID：15967644
> 
> 赞同：2
> 
> 时间：2013-04-12T09:26:54.060
> 
> 标签：php, zend-framework, http-redirect

嗨，我有一个以下脚本可以在视图助手中重定向

```
<?php
class Application_View_Helper_ExistUserRev extends Zend_View_Helper_Abstract{

    public function existUserRev($params,$user)
    {
            $businessReviewMapper = new Application_Model_Mapper_BusinessReviewsMapper();
            $businessReviewModel = new Application_Model_BusinessReviews();
        $result = $businessReviewMapper->userReviewStatus($user>getUserId(),$params['bzid']);
            if($result){
            $url = 'http://www.akrabat.com';
            $this->_helper->redirector->gotoUrl($url);
                    }
        }
}
?> 
```

但似乎我上面的重定向似乎不起作用。如何在我的 zend 应用程序的视图助手中重定向？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:47:58.927

由于您在 View Helper 类中，因此您不能使用`$this->_helper->redirector->gotoUrl($url);`，这是一个 Action Controller 功能。

您必须在 View Helper 中调用重定向器。
尝试这个 ：

```
$_redirector = Zend_Controller_Action_HelperBroker::getStaticHelper('redirector');
$_redirector->gotoUrl($url); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T09:38:36.417

[Redirector](http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.redirector)是控制器 ACTION 助手，而不是视图助手，因此您应该从控制器而不是视图中使用它。

要从视图重定向（顺便说一句，这不是一个好主意，逻辑应该保留在控制器中，而不是视图中），请尝试使用[Zend Action View Helper](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T13:35:46.330

到目前为止，这甚至更简单：

*Zend Framework 1.x 参考摘录：* [编写自定义助手](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.custom)

> 通常，该类不应回显或打印或以其他方式生成输出。相反，它应该返回要打印或回显的值。返回的值应适当转义。

基本上一个视图助手应该返回一个值，而不是执行一个动作。

另一方面，[动作助手几乎可以做任何你需要做的事情。](http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html#zend.controller.actionhelper.writingyourown)

下面是一个非常简单的例子来演示`direct()`在helper中使用方法的形式：

```
<?php
/**
 * Simply returns a search form to a placeholder view helper
 *
 */
class My_Controller_Action_Helper_Search extends Zend_Controller_Action_Helper_Abstract
{
    /**
     * @param string $action
     * @param string $label
     * @param string $placeHolder
     * @return \Application_Form_Search
     */
    public function direct($action, $label = null, $placeHolder = null)
    {
        $form = new Application_Form_Search();
        $form->setAction($action);
        $form->search->setLabel($label);
        $form->query->setAttribs(array(
            'placeholder' => $placeHolder,
            'size'        => 20,
        ));
        return $form;
    }
} 
```

这是在控制器中使用它在视图脚本或布局中填充占位符助手的方式。

```
 public function preDispatch()
    {
        $this->_helper->layout()->search = $this->_helper->search(
            '/index/display', 'Search My Collection!', 'Search Query'
        );
    } 
```

并在视图脚本或布局中：

```
<?php echo $this->layout()->search?> 
```

在您的情况下，您可以使用操作助手来建立构建正确 url 所需的值，然后您可以将这些值传递给`url()`助手或您自己构造的助手。

# c# - 将此 C# 代码转换为 VB

> ID：15967645
> 
> 赞同：-1
> 
> 时间：2013-04-12T09:26:54.200
> 
> 标签：c#, vb.net

我正在将应用程序从 C# 转换为 VB，但我陷入了这一行：

```
byte[] picData = sdr2["foto"] as byte[] ?? null; 
```

任何人都可以帮我转换它。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:28:43.973

```
Dim picData As Byte() = If(TryCast(sdr2("foto"), Byte()), Nothing) 
```

对于像这样的转换，您可以依靠大量的在线转换器来完成（相对）体面的工作。

查看[http://www.developerfusion.com/tools/convert/csharp-to-vb/](http://www.developerfusion.com/tools/convert/csharp-to-vb/)或其他任何数量的，有一个谷歌。

但是请注意，您的空合并运算符指出，在这种情况下，如果`sdr2["foto"] as byte[]`返回`null`，则返回`null`...您可能需要修复该问题 ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:29:00.293

试试[这个](http://www.developerfusion.com/tools/convert/csharp-to-vb/)：

```
Dim picData As Byte() = If(TryCast(sdr2("foto"), Byte()), Nothing) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:29:21.403

这是翻译 VB <-> C#的[有用工具](http://www.developerfusion.com/tools/convert/csharp-to-vb/)

```
Dim picData As Byte() = If(TryCast(sdr2("foto"), Byte()), Nothing) 
```

正如 MarcinJuraszek 首先所说，`?? null`这里没有任何意义，所以你应该使用：

```
Dim picData As Byte() = TryCast(sdr2("foto"), Byte()) 
```

# java - Java joda api不工作

> ID：15967646
> 
> 赞同：0
> 
> 时间：2013-04-12T09:26:54.733
> 
> 标签：java, date, jodatime

我在我的项目中使用了 Joda date api，但似乎我做错了什么，或者 Joda api 没有返回我想要得到的东西。我想得到两个日期之间的小时和分钟的差异。

## 这是我的代码

```
Date date1 = new SimpleDateFormat("MM/dd/yy").parse("05/18/2009");
Date date2 = new SimpleDateFormat("MM/dd/yyyy").parse("05/18/2007");
DateTime d1 = new DateTime(date1);
DateTime d2 = new DateTime(date2);
Period p = new Period(d1, d2);
long minutes = p.getMinutes();
long hours = p.getHours();

System.out.println("hoursBetween-----"+minutes+"-----minutesBetween------"+hours); 
```

我在几分钟和几小时内都得到输出 0 和 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:42:19.787

`getMinutes()`不返回分钟数。它返回期间的分钟部分。

这两个日期之间的时间段为 -2 年、0 月、0 周、0 天、0 小时、0 分钟、0 秒。

如果您想要两个日期之间的小时数和分钟数，请使用

```
Hours.hoursBetween(d1, d2).getHours()
Minutes.minutesBetween(d1, d2).getMinutes(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:47:39.180

You can also try this -

```
DateTime d1 = new DateTime(2009, 5, 18, 4, 0);
        DateTime d2 = new DateTime(2007, 5, 18, 0, 30);

            Period period = new Period(d2, d1);
            PeriodFormatterBuilder HHMMSSFormater =
                    new PeriodFormatterBuilder().appendYears().appendSeparator("-").appendMonths().appendSeparator("-")
                    .appendDays().appendSeparator("-").appendHours().appendSeparator("-").appendMinutes().appendSeparator("-").appendSeconds();
            System.out.println(HHMMSSFormater.toFormatter().print(period)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:43:22.240

DateTime d1 = new DateTime(2009, 5, 18, 0, 0); DateTime d2 = new DateTime(2007, 5, 18, 0, 0);

```
 Period period = new Period(d2, d1);
        PeriodFormatterBuilder HHMMSSFormater =
                new PeriodFormatterBuilder().appendHours().appendSeparator("-").appendMinutes().appendSeparator("-").appendSeconds();
        System.out.println(period.getYears());
        System.out.println(period.getMonths());
        System.out.println(period.getDays());
        System.out.println(period.getHours());
        System.out.println(period.getMinutes()); 
```

请尝试此代码。

# java - 引起：java.security.UnrecoverableKeyException：无法恢复密钥

> ID：15967650
> 
> 赞同：96
> 
> 时间：2013-04-12T09:27:04.330
> 
> 标签：java, ssl, ssl-certificate, jks

我得到了一个名为 ABCC_client.store 的 jks 密钥库。当我将此密钥库导入 cacerts 并尝试连接时，它说没有这样的算法错误。PFA 堆栈跟踪

```
 Caused by: java.security.NoSuchAlgorithmException: Error constructing implementation (algorithm: Default, provider: SunJSSE, class:   com.sun.net.ssl.internal.ssl.DefaultSSLContextImpl)
    at java.security.Provider$Service.newInstance(Provider.java:1245)
    at sun.security.jca.GetInstance.getInstance(GetInstance.java:220)
    at sun.security.jca.GetInstance.getInstance(GetInstance.java:147)
    at javax.net.ssl.SSLContext.getInstance(SSLContext.java:125)
    at javax.net.ssl.SSLContext.getDefault(SSLContext.java:68)
    at javax.net.ssl.SSLSocketFactory.getDefault(SSLSocketFactory.java:102)
    at org.apache.axis.components.net.JSSESocketFactory.initFactory(JSSESocketFactory.java:61)
    at org.apache.axis.components.net.JSSESocketFactory.create(JSSESocketFactory.java:79)
    ... 32 more
Caused by: java.security.UnrecoverableKeyException: Cannot recover key
    at sun.security.provider.KeyProtector.recover(KeyProtector.java:311)
    at sun.security.provider.JavaKeyStore.engineGetKey(JavaKeyStore.java:121)
    at sun.security.provider.JavaKeyStore$JKS.engineGetKey(JavaKeyStore.java:38)
    at java.security.KeyStore.getKey(KeyStore.java:763)
    at com.sun.net.ssl.internal.ssl.SunX509KeyManagerImpl.&lt;init&gt;(SunX509KeyManagerImpl.java:113)
    at com.sun.net.ssl.internal.ssl.KeyManagerFactoryImpl$SunX509.engineInit(KeyManagerFactoryImpl.java:48)
    at javax.net.ssl.KeyManagerFactory.init(KeyManagerFactory.java:239)
    at com.sun.net.ssl.internal.ssl.DefaultSSLContextImpl.getDefaultKeyManager(DefaultSSLContextImpl.java:170)
    at com.sun.net.ssl.internal.ssl.DefaultSSLContextImpl.&lt;init&gt;(DefaultSSLContextImpl.java:40)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at java.lang.Class.newInstance0(Class.java:355)
    at java.lang.Class.newInstance(Class.java:308)
    at java.security.Provider$Service.newInstance(Provider.java:1221)
    ... 39 more 
```

但是，如果我独立使用这个密钥库，即不将它添加到 cacerts 中，它就可以工作。

一些谷歌搜索导致我访问[http://joewlarson.com/blog/2009/03/25/java-ssl-use-the-same-password-for-keystore-and-key/](http://joewlarson.com/blog/2009/03/25/java-ssl-use-the-same-password-for-keystore-and-key/)这表示密码可能与我不同密钥和密钥库。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2014-06-01T10:40:49.360

如果使用 Tomcat 6 及更早版本，请确保密钥库密码和密钥密码相同。如果使用 Tomcat 7 及更高版本，请确保它们相同或在`server.xml`文件中指定密钥密码。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2013-10-23T03:15:33.017

您的 app/config 中定义的私钥密码不正确。首先尝试通过更改为另一个密码来验证私钥密码，如下所示：

```
keytool -keypasswd -new changeit -keystore cacerts -storepass changeit -alias someapp -keypass password 
```

上面的示例将密码从 password 更改为 changeit。如果私钥密码是密码，则此命令将成功。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-02-10T13:55:56.553

为了不出现`Cannot recover key`异常，我必须将 Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files 应用于运行我的应用程序的 Java 安装。可以在[此处](http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html)找到这些文件的第 8 版，或者应在[此页面](http://www.oracle.com/technetwork/java/javase/downloads)上列出最新版本。下载包含一个文件，该文件解释了如何应用策略文件。

* * *

从[JDK 8u151](http://www.oracle.com/technetwork/java/javase/8u151-relnotes-3850493.html)开始，不需要添加策略文件。相反，JCE 管辖策略文件由名为`crypto.policy`. 将其设置为`unlimited`允许 JDK 使用无限制的加密。作为链接到上述状态的发行说明，它可以通过文件设置[`Security.setProperty()`](https://docs.oracle.com/javase/8/docs/api/java/security/Security.html#setProperty-java.lang.String-java.lang.String-)或通过`java.security`文件设置。该`java.security`文件也可以通过添加`-Djava.security.properties=my_security.properties`到启动程序的命令来附加，详见[此处](https://dzone.com/articles/how-override-java-security)。

* * *

由于[JDK 8u161](http://www.oracle.com/technetwork/java/javase/8u161-relnotes-4021379.html)默认启用无限加密。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-12-28T12:10:51.273

当我们将密钥导入使用 64 位 OpenSSL 版本构建的密钥库时，我遇到了同样的错误。当我们按照相同的程序将密钥导入使用 32 位 OpenSSL 版本构建的密钥库时，一切正常。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-02-08T13:47:54.663

通过运行以下命令检查您使用的密码是否正确

```
keytool -keypasswd -new temp123 -keystore awsdemo-keystore.jks -storepass temp123 -alias movie-service -keypass changeit 
```

如果您收到以下错误，则说明您的密码错误

```
keytool error: java.security.UnrecoverableKeyException: Cannot recover key 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-24T15:04:25.327

有时这似乎无缘无故地发生。我也面临同样的问题，并尝试了所有方法，如 Keytool explorer 等。

最终要求谷歌重置密钥，因为我启用了谷歌播放签名。这是一个很好的建议。

[https://support.google.com/googleplay/android-developer/answer/9842756?hl=en](https://support.google.com/googleplay/android-developer/answer/9842756?hl=en)

# entity-framework-5 - 实体框架 Codefirst 方法

> ID：15967651
> 
> 赞同：0
> 
> 时间：2013-04-12T09:27:06.080
> 
> 标签：entity-framework-5

我正在使用 EntityFramework codefirst 方法。我的编码是

```
class Blog
{
    [Key]
    public int BlobId { get; set; }
    public string Name { get; set; }
    public virtual List<Post> Posts { get; set; }
}

class Post
{
    [Key]
    public int PostId { get; set; }
    public string Title { get; set; }
    public string Content { get; set; }
    public int BlobId { get; set; }
    public virtual Blog Blob { get; set; }
}

class BlogContext:DbContext
{
    public BlogContext() : base("constr") { }
    public DbSet<Blog> Blogs { get; set; }
    public DbSet<Post> Posts { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
      using (var db = new BlogContext())
        {
            Console.WriteLine("Enter a name for a new blob:");
            var name = Console.ReadLine();
            var b = new Blog { Name = name };
            db.Blogs.Add(b);
            db.SaveChanges(); 
```

**直到这一步，我在我的 SQlserver 中创建了两个表（博客和帖子）。BlobId 是博客表中的主键。和帖子表中的外键。博客表中的 Blogid 是自动递增的。帖子表中的 postid 也是自动递增的**

```
class Program
{
    static void Main(string[] args)
    {
        using (var db = new BlogContext())
        {
            Console.WriteLine("Enter a name for a new blob:");
            var name = Console.ReadLine();
            var b = new Blog { Name = name };
            db.Blogs.Add(b);
            db.SaveChanges(); 
```

***在这里，我在博客表中添加了名称***

```
 var id1 = from val in db.Blogs
             where val.Name == name
             select val.BlobId; 
```

**现在通过使用 Name 获取 blogs 表的 blogid**

```
 Console.WriteLine("Enter Title:");
            var title = Console.ReadLine();
            Console.WriteLine("Enter Content");
            var content = Console.ReadLine();
            var c = new Post { Title = title, Content = content, BlobId = id1};
            db.Posts.Add(c);
            db.SaveChanges(); 
```

**这里正在读取标题、内容的数据。然后将标题、内容和 blogid（我从另一个表中获得）添加到 Posts 表中**

**我在 BlobId = id1 处收到错误**

我越来越**无法将类型'System.Linq.IQueryable'隐式转换为'int'**这个错误

```
 }
         Console.ReadLine();
     }
} 
```

你能帮我解决这个问题吗？如果你不明白我的解释，请回复我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:32:43.740

下面的查询是一个元素序列，而不是一个标量值，即使你认为只有一个结果，但当对查询结果进行迭代时，它仍然是一个包含一个元素的集合：

```
var id1 = from val in db.Blogs
         where val.Name == name
         select val.BlobId; 
```

将其更改为：

```
int id1 = (from val in db.Blogs
         where val.Name == name             
         select val.BlobId).First(); 
```

此查询将立即执行并返回序列中的第一个元素。如果没有匹配，它将抛出异常，因此您可能希望使用`FirstOrDefault`并分配给可为空的 int 代替。

# apache - Apache httpd 作为 jboss 以及其他 Apache 服务器的负载平衡器

> ID：15967652
> 
> 赞同：1
> 
> 时间：2013-04-12T09:27:12.483
> 
> 标签：apache, jboss6.x

我有一个 apache httpd 服务器，比如**server1*（公开），它使用 mod_cluster 充当一些 jboss 服务器（在防火墙后面）的负载平衡器。现在我想在几个 apache 服务器上安装我的静态内容（images/css/htmls）和一些 cg 脚本，比如 **server2**和**server3**（在防火墙后面）。

现在我希望**server1**充当这些 server2 和 server3 以及 jboss 服务器的负载平衡器。

通过这种安排，部署在 jboss 上的应用程序的任何请求都需要路由到 jboss，并且任何静态内容请求都应该发送到**server2**或**server3**。

这是我正在使用的版本

Linux 服务器 apache httpd - 2.2.22 JBOSS-EAP-6

**我需要在server1**中使用什么机制/配置才能使其成为可能？请看看是否有人可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T13:09:08.793

好吧，您只需添加一个 ProxyPass 设置。mod_cluster 与 ProxyPass 兼容，因此您可以同时使用两者。

例如，如果我希望 gif 图像由 httpd 提供，而不是由 AS7 提供，我可以添加：

```
ProxyPassMatch ^(/.*\.gif)$ ! 
```

此外，如果您设置

```
CreateBalancers 1 
```

mod_cluster 不会为你创建代理，你必须自己做。这为您提供了额外的控制。例如：

```
ProxyPassMatch ^/static/ !
ProxyPass / balancer://qacluster stickysession=JSESSIONID|jsessionid nofailover=on
ProxyPassReverse / balancer://qacluster
ProxyPreserveHost on 
```

在上述示例中，我们将除 /static/ 内容之外的任何内容代理给工作人员。

*   注意：如果您遇到任何 cookie 相关问题，您可能需要使用 ProxyPassReverseCookieDomain 和 ProxyPassReverseCookiePath。

*   请注意我的配置中的**qacluster**。默认值为**mycluster**，因此为了命名我的平衡器 qacluster，我将其添加到 mod_cluster 配置（在 VirtualHost 之外）：

    ```
    ManagerBalancerName qacluster 
    ```

如果不清楚，请回复，我可以尝试进一步详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T15:41:04.860

我遇到了同样的问题，我们将 Apache HTTP 服务器用于静态内容，将 JBOSS AS 7 服务器用于动态内容（JSF Web 应用程序）。

因此，在 Load modules 的末尾添加以下属性会告诉

```
CreateBalancers 0 
```

告诉**“0：在 httpd 中定义的所有虚拟主机中创建”。**

更多信息： http: [//docs.jboss.org/mod_cluster/1.2.0/html/native.config.html#d0e485](http://docs.jboss.org/mod_cluster/1.2.0/html/native.config.html#d0e485)

下面的配置解决了图片和样式表不显示的问题。

```
<VirtualHost *:80>
  ServerName dev.rama.com
  DocumentRoot "/var/www/assests"
  UseAlias 1
  ProxyPassMatch ^(.*\.bmp)$ !
  ProxyPassMatch ^(.*\.css)$ !
  ProxyPassMatch ^(.*\.gif)$ !
  ProxyPassMatch ^(.*\.jpg)$ !
  ProxyPassMatch ^(.*\.js)$ !
  ProxyPassMatch ^(.*\.png)$ !
 <Directory /var/www/assests>
   Options Indexes FollowSymLinks
   AllowOverride None
   Order allow,deny
   Allow from all
 </Directory> 
```

注意：我们对 Web 应用程序的所有资产都位于 /var/www/assests 的 HTTP 服务器上，我访问的 url 是端口 80 上的 dev.rama.com

所以当它看到这个**ProxyPassMatch ^(.*.css)$ ！** webserver 知道 css 文件是 http 服务器本地的，我们不需要去 Jboss App 服务器。

更多信息请访问[http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypass](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypass)

# java - Java：读取文件：没有好的输出

> ID：15967655
> 
> 赞同：0
> 
> 时间：2013-04-12T09:27:16.533
> 
> 标签：java, file

我更新了代码，但在我的文本字段中仍然得到一个空值。在控制台中，我可以看到 WandelaarBestand 文件中的所有内容。也许它与将数字转换为字符串有关。但是当我不想用 int getal 来获取它时，我什么也得不到。如果没有 int getal 我在我的文本字段中得到一个 Null 值，但我仍然可以从我的控制台中的文件中看到一切。

在这里你可以找到我更新的代码。

```
public class geefInfo implements ActionListener {
    public void actionPerformed(ActionEvent e) {

    BufferedReader in;
String regel="";
int getal;
    try {
    in=new BufferedReader(new FileReader("WandelaarBestand.txt"));
            while((regel=in.readLine())!=null){             
            getal=Integer.parseInt(regel);
            System.out.println(regel);
            }
            in.close();

        } catch (FileNotFoundException e6) {
            e6.printStackTrace();
            System.out.println("kan file niet vinden");

        } catch (IOException e7) {
            e7.printStackTrace();
            System.out.println("fout bij lezen of sluiten file");
        }

            info.setText(""+regel);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:57:02.913

在您的第二个尝试块中，您打印出该行 - 到目前为止一切都很好。但是你的线：

```
String naam2=naam.getText(); 
```

没有任何意义，因为 naam 从未设置过，并且在接下来的 if 语句中，您只需使用 naam2，它也为空。

也尝试关闭你的阅读器，如果你不这样做，它会变得混乱。

希望那有所帮助

# python-2.7 - Matplotlib 不显示绘图（EPD 兼容性问题）

> ID：15967657
> 
> 赞同：0
> 
> 时间：2013-04-12T09:27:20.390
> 
> 标签：python-2.7, 64-bit, ubuntu-12.04, enthought, epd-python

我最近在我的 Ubuntu 12.04（64 位）上安装了 EPD 7.3-2（免费版）。尝试使用 ipython 时遇到一些问题，出现以下错误：

> ImportError: Gtk* 后端需要安装 pygtk。

所以我找到了这篇文章：

[https://support.enthought.com/entries/22961778-epd-for-mac-os-x-32-and-64-bit-versions](https://support.enthought.com/entries/22961778-epd-for-mac-os-x-32-and-64-bit-versions)

甚至认为它适用于 Mac OSX，它确实在我的 Linux 机器上运行。我所做的修改是这样放置后端：

```
backend      : Qt4Agg #GTKAgg
backend.qt4 : PySide 
```

所以它曾经是GTKAgg。但现在我有一个新问题。当我尝试用 pylab 绘制一个简单的图时，例如：

```
from pylab import *
plot([1,2,3])
show() 
```

什么都没有弹出......我收到以下错误：

> atexit._run_exitfuncs 中的错误：Traceback（最近一次调用最后一次）：
> 文件“/home/mela/Librairies/epd_free-7.3-2-rh5-x86_64/lib/python2.7/atexit.py”，第 24 行，在 _run_exitfuncs func (*targs, **kargs) 文件“/home/mela/Librairies/epd_free-7.3-2-rh5-x86_64/lib/python2.7/site-packages/matplotlib/_pylab_helpers.py”，第 82 行，在 destroy_all 管理器中.destroy() 文件“/home/mela/Librairies/epd_free-7.3-2-rh5-x86_64/lib/python2.7/site-packages/matplotlib/backends/backend_qt4.py”，第 367 行，在销毁 self._widgetclosed )
> 
> RuntimeError：内部 C++ 对象 (PySide.QtGui.QMainWindow) 已删除。
> 
> sys.exitfunc 中的错误：Traceback（最近一次调用最后一次）：文件“/home/mela/Librairies/epd_free-7.3-2-rh5-x86_64/lib/python2.7/atexit.py”，第 24 行，在 _run_exitfuncs 函数中(*targs, **kargs)
> 文件“/home/mela/Librairies/epd_free-7.3-2-rh5-x86_64/lib/python2.7/site-packages/matplotlib/_pylab_helpers.py”，第 82 行，在 destroy_all 管理器中.destroy()
> 文件“/home/mela/Librairies/epd_free-7.3-2-rh5-x86_64/lib/python2.7/site-packages/matplotlib/backends/backend_qt4.py”，第 367 行，在销毁 self._widgetclosed )
> 
> RuntimeError：内部 C++ 对象 (PySide.QtGui.QMainWindow) 已删除。

我真的不明白这是什么意思，或者我应该怎么做。任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:53:44.960

所以我发现了我的问题。首先，从问题中我不明白它试图关闭一个已经关闭的窗口，所以我搜索了原因，现在看起来 pyplot 的显示应该直接关闭，所以当我添加 pl.show(block=True ）。现在我有一个显示器，但也有一个分段错误。

在尝试了不同的后端之后，看起来 TkAgg 解决了这两个问题。所以没有兼容性问题，我可以看到我的情节。

PS：要从 matplotlib 更改后端，请转到`~/.matplotlib`并编辑文件`matplotlibrc`

# vba - Saveas 问题覆盖现有文件（Excel VBA）

> ID：15967659
> 
> 赞同：2
> 
> 时间：2013-04-12T09:27:27.347
> 
> 标签：vba, excel

我有以下正确的宏，除了如果我单击或如果我单击工作正常`SaveAs`会给我一个错误。`No``Cancel``yes`

```
ActiveWorkbook.SaveAs Filename:=FileName, FileFormat:=xlWorkbook, ConflictResolution:=xlLocalSessionChanges

Application.DisplayAlert =True 
```

但是当我进入部分时，当我选择保存`SaveAs`时出现以下错误。`No`Excel 消息：**此位置已存在名为“......”的文件。你想更换它**吗？我单击“否”或`cancel`并得到运行时错误 1004 ....`SaveAs`对象方法`_Workbook`失败。

我不想使用`Application.DisplayAlerts = False`，因为我希望用户知道已经有一个同名的文件。

1.  为什么我会收到此错误？为什么我不能选择“否”
2.  我还有什么其他选项可以显示文件已经存在并选择`No`或`Cancel`不得到运行时错误。？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T09:34:18.997

试试这个方法。

我已经对代码进行了注释，因此您理解它应该没有任何问题。不过，如果你这样做，那么只需问:)

```
Sub Sample()
    Dim fName As Variant

    '~~> Offer user to Save the file at a particular location
    fName = Application.GetSaveAsFilename

    '~~> Check if it is a valid entry
    If fName <> False Then
        '~~> Check before hand if the file exists
        If Not Dir(fName) <> "" Then
            '~~> If not then save it
            ActiveWorkbook.SaveAs Filename:=fName
        Else
            '~~> Trap the error and ignore it
            On Error Resume Next
            If Err.Number = 1004 Then
                On Error GoTo 0
            Else '<~~ If user presses Save
                ActiveWorkbook.SaveAs Filename:=fName, _
                FileFormat:=xlWorkbook, _
                ConflictResolution:=xlLocalSessionChanges
            End If
        End If
    End If
End Sub 
```

# jquery - GM_deleteValue 其他脚本

> ID：15967661
> 
> 赞同：1
> 
> 时间：2013-04-12T09:27:34.080
> 
> 标签：jquery, greasemonkey

在greasemonkey 中，我想删除另一个脚本的值。

我有 ：

**脚本名称：** Facebook登录

```
extensions.greasemonkey.scriptvals.https://www.facebook.com/*/Facebook login.password;
extensions.greasemonkey.scriptvals.https://www.facebook.com/*/Facebook login.username; 
```

在另一个名为：Facebook 删除的脚本中，我想从 facebook 登录脚本中删除用户名和密码

```
GM_deleteValue 
```

这是可能的，如果是我该怎么做？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:01:14.607

不可以。一个脚本无法看到由不同脚本存储的值，使用`GM_setValue()`. 存储的值由命名空间和脚本名称分隔，并且不允许交叉引用，即使是`GM_deleteValue()`.

这是一项安全功能。您必须合并这两个脚本。
请注意，已经有一些[框架可以在 Greasemonkey 脚本中处理这种登录信息](https://stackoverflow.com/a/15269327/331508)。

# objective-c - Objective-C - 基于字符串切片对字符串数组进行排序

> ID：15967662
> 
> 赞同：-5
> 
> 时间：2013-04-12T09:27:34.800
> 
> 标签：objective-c, ios6, nsmutablearray

NSMutableArray 看起来像 ("xxx_20", "xxx_18", "xxx_16", "xxx_19", "xxx_17")

我想把它分类成（“xxx_16”、“xxx_17”、“xxx_18”、“xxx_19”、“xxx_20”）

我尝试使用选择器，但我什至无法获得正确的语法。有谁知道如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:36:20.473

尝试这个，

```
 NSMutableArray *myarray = [ NSMutableArray arrayWithObjects:@"xxx_20", @"xxx_18", @"xxx_16", @"xxx_19", @"xxx_17", nil];
    NSArray *sortedArray = [myarray sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];
    NSLog(@"%@",sortedArray); 
```

它在我的最后工作得很好。

# java - 如何将当前日期与用户输入的日期进行比较？

> ID：15967665
> 
> 赞同：-5
> 
> 时间：2013-04-12T09:27:40.237
> 
> 标签：java, oracle11g

我想将当前日期与用户输入的日期进行比较。在我的表格中，我的字段为

```
Name:
TicketNO:
ContactNo:
Issue Date: 13/4/2013
Return Date: 17/4/2013 
```

上述数据是从用户那里收集并输入数据库的，我想将发布日期与系统日期进行比较，在退货日期我想向用户发送邮件，告知您的退货日期是今天。

数据库是Oracle 11g。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:33:51.207

您需要当前日期和用户输入日期之间的基本日期比较吗？
像这样做：

```
Calendar userDate = Calendar.getInstance();
Calendar currentDate = Calendar.getInstance();
userDate.setTime(inputDate);//here inputDate is date given by the user.

if(!userDate.before(currentDate)) {
    // user date is after current date(today).
} else {
    // user date is before current date(today).
} 
```

# dojo - 增强网格过滤器插件的 Dojo AMD 样式模板

> ID：15967666
> 
> 赞同：0
> 
> 时间：2013-04-12T09:27:41.100
> 
> 标签：dojo, dojo-build

我有一个带有过滤器插件的增强网格，如下所示：

```
<!DOCTYPE html>
<html >
<head>

    <style type="text/css">@import "./dojo/resources/dojo.css";
@import "./dojox/grid/enhanced/resources/claro/EnhancedGrid.css";
@import "./dojox/grid/enhanced/resources/EnhancedGrid_rtl.css";

/*Grid need a explicit width/height by default*/
#grid {
    width: 45em;
    height: 20em;
}</style>
<script data-dojo-config="async: true" src='./dojo/dojo.js'></script>
<script data-dojo-config="async: true" src='./dojo/mydojo.js'></script>
<script> 
```

```
var dojoConfig = {
    baseUrl: "./",
    tlmSiblingOfDojo: false,
    packages: [
        { name: "dojo", location: "dojo" },
        { name: "dijit", location: "dijit" },
        { name: "dojox", location: "dojox" }
    ]
}; 
```

```
require(["dojox/grid/EnhancedGrid","dojo/data/ItemFileWriteStore",
"dojox/grid/enhanced/plugins/Filter"], 
function(EnhancedGrid,ItemFileWriteStore,Filter){
        /*set up data store*/
        var data = {
          identifier: 'id',
          items: []
        };
        var data_list = [
          { col1: "normal", col2: false, 
col3: 'But are not followed by two hexadecimal', col4: 29.91},
          { col1: "important", col2: false,
 col3: 'Because a % sign always indicates', col4: 9.33},
          { col1: "important", col2: false, 
col3: 'Signs can be selectively', col4: 19.34}
        ];
        var rows = 60;
        for(var i=0, l=data_list.length; i<rows; i++){
          data.items.push(dojo.mixin({ id: i+1 }, data_list[i%l]));
        }
        var store = ItemFileWriteStore({data: data});

        /*set up layout*/
        var layout = [[
          {'name': 'Column 1', 'field': 'id'},
          {'name': 'Column 2', 'field': 'col2'},
          {'name': 'Column 3', 'field': 'col3', 'width': '230px'},
          {'name': 'Column 4', 'field': 'col4', 'width': '230px'}
    ]];

        /*create a new grid:*/
        var grid = EnhancedGrid({
            id: 'grid',
            store: store,
            structure: layout,
            rowSelector: '20px',
                plugins: {
                   filter: {
                    closeFilterbarButton: true,
                    ruleCount: 5,
                    itemsName: "songs"
                   }
                }
         },  "gridDiv");

        /*append the new grid to the div*/
       // dojo.byId("gridDiv").appendChild(grid.domNode);

        /*Call startup() to render the grid*/
    grid.startup();
    //alert("ee");
    //grid.placeAt("gridDiv");
});

</script>
</head>
<body class="claro">
<div id="gridDiv"></div>
</body>
</html> 
```

当我调用上述 HTML 时，我看到许多与 Filter 插件相关的 html 文件正在下载，其中包括：

```
/dojox/grid/enhanced/templates/FilterBar.html
/dojox/grid/enhanced/templates/FilterDefPane.html
/dojox/grid/enhanced/templates/CriteriaBox.html
/dojox/grid/enhanced/templates/FilterBoolValueBox.html 
```

我希望这些文件成为 EnhancedGrid Javascript 的一部分。到目前为止，我找到了以下解决方案：

[http://grokbase.com/t/dojo/dojo-interest/11bs5jf64d/custom-build-including-css-and-html-files](http://grokbase.com/t/dojo/dojo-interest/11bs5jf64d/custom-build-including-css-and-html-files)

但是我无法在上面的链接中了解如何使用 Kallenboone 的代码。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:57:12.170

查看以下链接，了解如何为 dojo 创建构建：

[http://dojotoolkit.org/documentation/tutorials/1.7/build/](http://dojotoolkit.org/documentation/tutorials/1.7/build/)

# visual-studio-2010 - DeleteMediaType() 在哪里定义？

> ID：15967668
> 
> 赞同：0
> 
> 时间：2013-04-12T09:27:49.550
> 
> 标签：visual-studio-2010, include, directshow, platform-sdk

从[http://msdn.microsoft.com/en-us/library/windows/desktop/dd387907%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd387907%28v=vs.85%29.aspx)实现示例时，我遇到了 DeleteMediaType() 和 VisualStudio 2010 的问题：此功能没有定义。我发现头文件 Mtype.h 应该声明它，但 VS2010 不存在。如果不安装一些额外的 SDK，不应该所有的头文件和库都在那里吗？

DeleteMediaType() 在哪里定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:40:00.517

在 Windows SDK \Samples\multimedia\directshow\baseclasses\mtype.* 文件中。您通常应该包含`.h`并链接`strmbas?.lib`以使其对您可用，但您不必这样做：您可能更喜欢直接将其包含到项目中，或者复制该函数（它很简单并且包装了几个`CoTaskMemFree`调用）。

# rest - 如何使用 Atmosphere 框架调用传统的 REST-RPC 调用？

> ID：15967670
> 
> 赞同：0
> 
> 时间：2013-04-12T09:27:54.520
> 
> 标签：rest, websocket, jersey, atmosphere

如何以传统的 RPC 方式使用 Atmosphere 1.1.0+ 将 POST/PUT/DELETE 调用发送到休息源？（你猜对了，我想在我的项目中使用 pub/sub 和 RPC 风格）

服务端：注册一个@Path（如/member），用@POST/@PUT/@DELETE标记，处理方法体和`return`值。似乎直截了当。即使使用 JSON 编码/解码。

客户端：您将如何使用 wasync 库启动 POST 请求？所有大气示例都使用“GET”，建议仅使用 GET。这是为什么？

```
RequestBuilder request = client.newRequestBuilder().method(Request.METHOD.GET).uri("/member") 
```

调用 fire 方法时可以期待这种同步的服务器响应吗？例如

```
Future future = socket.fire(myMemberObject) 
```

感谢您对这种方法的提示和评论（也欢迎对 RPC 和 PubSub 配对的想法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:38:24.943

一旦建立连接，wAsync 就会使用 POST。wAsync 本质上是异步的，因此如果要使其阻塞，则需要使用 Latch，或者将 AsyncHttpClient 与 Future 一起使用。

# regex - 用于提取引号中的字符串的正则表达式（在某些要求下）

> ID：15967672
> 
> 赞同：0
> 
> 时间：2013-04-12T09:27:59.910
> 
> 标签：regex

也许这些问题看起来很棘手，但目前我在从引号中提取字符串时遇到了一个真正的问题，但要满足某些标准。这些是

*   应该只提取引号中的文本，而不是引号本身，
    例如我住在“德国”-> 德国
*   如果没有引号，则应完全返回文本，
    例如我住在德国 -> 我住在德国
*   如果引号受 \ 保护，它们应该被视为普通字符并被提取，但没有反斜杠，
    例如我住在 \"Germany\" -> 我住在 "Germany"
*   如果缺少最后一个引号，则应返回其余文本，
    例如 I "live in Germany -> live in Germany

我所有的实验都失败了。我的最佳猜测是：

```
 (?<=(?<!\\)").*?(?=(?<!\\)") 
```

它的问题是，如果根本没有引号，则提取的字符串为空。

非常感谢您的帮助
最好的问候
脑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:22:56.977

对于在您的问题中编写的测试用例，以下正则表达式应该适合您：

```
^([^"\n\\]*)(?:\\(")|"|)([^"\n\\]*)(?:\\(")|"|)(.*)$ 
```

您需要连接组 #1、2、3、4、5 以获取捕获的字符串。

### 现场演示：[http ://www.rubular.com/r/u6m08cRo1v](http://www.rubular.com/r/u6m08cRo1v)

# sql - SQL Server 本地数据库

> ID：15967673
> 
> 赞同：1
> 
> 时间：2013-04-12T09:28:02.283
> 
> 标签：sql, localdb

我正在寻找一个更好的替代 MS Access MDb 文件的方法。MS SQLServer 2012 LocalDB 看起来是完美的解决方案。我已经做了一些测试，它似乎可以解决问题。

我需要知道的是

1.  LocalDB 的安全性如何？
2.  它可以变得更安全吗？

我有一个现场工作人员使用的应用程序，并且希望能够不时向他们发送更新的数据文件（如果有重大的架构更改和/或相关数据），但希望包含的数据由密码管理（也许还有用户名）。应用程序（Winforms 或 WPF）将管理密码。

目前我使用带有数据库密码的 MS Access mdb 文件。它是基本安全的良好解决方案。但是它的性能对于应用程序的功能来说并不是那么好，而且不需要脑外科医生来破解密码并访问数据库。

测试 LocalDB 提供了我需要的性能，但我只是想知道它是否可以提高安全性。因此，如果有人设法获得数据文件，他们将很难访问数据。

任何帮助将不胜感激。

谢谢大家

# windows-phone-8 - ContextMenu，获取父文本块 ID

> ID：15967674
> 
> 赞同：0
> 
> 时间：2013-04-12T09:28:04.173
> 
> 标签：windows-phone-8, windows-phone

ListBox 的 ItemSource 是动物的 ObservableCollection。每只动物都有一个名称和一个 ID。在显示动物名称的 TextBlock 内，我有一个 ContextMenu。长按时，它会显示一个菜单取消关注。单击该菜单时，它会引发 UnFollow_OnClick 事件。

现在我的问题是，我怎样才能在我的代码中获取动物的 ID？

尝试了一些不同的场景，但找不到任何可行的解决方案。

```
 <ListBox x:Name="AllAnimals" Margin="0,0,-12,0" ItemsSource="{Binding AllAnimals}">
               <ListBox.ItemTemplate>
                  <DataTemplate>
                     <StackPanel Margin="0,0,0,17">
                        <TextBlock Text="{Binding Name}" TextWrapping="NoWrap" Style="{StaticResource PhoneTextExtraLargeStyle}">
                           <toolkit:ContextMenuService.ContextMenu>
                              <toolkit:ContextMenu IsZoomEnabled="False">
                                    <toolkit:MenuItem Header="Unfollow" Click="UnFollow_OnClick" />
                              </toolkit:ContextMenu>
                           </toolkit:ContextMenuService.ContextMenu>
                        </TextBlock>
                     </StackPanel>
                  </DataTemplate>
               </ListBox.ItemTemplate>
            </ListBox>

private void UnFollow_OnClick(object sender, RoutedEventArgs e)
{  

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:49:55.960

这应该工作：

```
 private void UnFollow_OnClick(object sender, RoutedEventArgs e)
    {
        Animal animal = ((Animal)((sender as FrameworkElement).DataContext));

        MenuItem item = (sender as MenuItem);
        string itemValue = item.Header.ToString();

        if (itemValue == "Unfollow")
        {
            try
            {
                if (animal != null)
                {
                    // animal.Id
                }
            }
            catch (Exception)
            {
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:51:23.170

尝试这个：

```
 private void UnFollow_OnClick(object sender, RoutedEventArgs e)
    {
        var animal = AllAnimals.SelectedItem as Animal;
        if(animal==null) return;
        var id = animal.Id;
    } 
```

希望它的帮助。

# android - 我怎样才能使活动行为像这样

> ID：15967682
> 
> 赞同：1
> 
> 时间：2013-04-12T09:28:43.053
> 
> 标签：android, android-activity

**嗨开发人员**，

问题：

我的应用中有 5 个活动；我想让他们的行为是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/fuRb2.png)

我尝试了什么：

A -> C（新建一个）

```
Intent intent = new Intent(getApplicationContext(),
C.class);
startActivity(intent); 
```

A -> B (新建一个)

```
Intent intent = new Intent(getApplicationContext(),
B.class);
intent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
startActivity(intent); 
```

B -> C (新建一个)

```
Intent intent = new Intent(getApplicationContext(),
C.class);
startActivity(intent); 
```

C -> D（**我想使用现有的堆栈**）

```
Intent intent = new Intent(getApplicationContext(),
D.class);
intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
startActivity(intent); 
```

C -> E（**我想使用现有的堆栈**）

```
Intent intent = new Intent(getApplicationContext(), E.class);
intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
startActivity(intent); 
```

D -> C（**我想使用现有的堆栈**）

```
@Override
public void onBackPressed() {
    Intent i = new Intent(getApplicationContext(), C.class);
    i.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
    this.overridePendingTransition(R.anim.right_to_left_a,
    R.anim.right_to_left_b);
    startActivity(i);
} 
```

E -> C（**我想使用现有的堆栈**）

```
@Override
public void onBackPressed() {
    Intent i = new Intent(getApplicationContext(), C.class);
    i.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
    this.overridePendingTransition(R.anim.right_to_left_a,
    R.anim.right_to_left_b);
    startActivity(i);
} 
```

这不起作用，因为堆栈中的活动排列不正确。

*问题是当按下返回键时我不知道如何从 C 转到 B 或 A，现在当我在 C 中按下返回键时，它转到 D 或 E！*

**这正是我想要的：**

```
A->B when a button pressed,create new B
B->A when back key pressed,finish B
A->C when a button pressed,create new C
C->A when back key pressed,finish C
B->C when a button pressed,create new C
C->B when back key pressed,finish C

C->E when a button pressed,create new E if not exist otherwise use existing one
E->C when back key pressed,use existing one
C->D when a button pressed,create new D if not exist otherwise use existing one
D->C when back key pressed,use existing one 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:40:45.850

您应该尝试`public void startActivityForResult (Intent intent, int requestCode)` 查看此[http://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent) , int)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:48:43.997

A 到 B 到 C。在 C 中，默认情况下按下后退按钮将通过调用 finish() 转到 B。活动 C 从堆栈中弹出并被销毁。堆栈中的前一个活动是获得焦点的 B。这是默认功能。

既然你问如何清除 backstack ，你可以使用下面的

说在活动 C 中按后退按钮，您需要转到 A，您可以使用以下内容。

```
 @Override
   public boolean onKeyDown(int keyCode, KeyEvent event) {
if (keyCode == KeyEvent.KEYCODE_BACK) {
    onBackPressed();
}

return super.onKeyDown(keyCode, event);
    }

    public void onBackPressed() {
Intent myIntent = new Intent(C.this, A.class);
myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); // clear back stack
startActivity(myIntent);
finish();
return;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:49:03.757

我对您的测试感到很困惑，但我认为问题出在您的路上`Override onBackPressed()`

`super.onBackPressed();`当您在没有或`this.finish();`实际上不允许本机系统操作从堆栈中删除当前活动的情况下覆盖 onBackPressed 时。

因此，在孔应用中的后扣按钮之间存在不一致。在活动 A、B、C 上按预期工作，而在 D、E 上，后退按钮创建新活动而不破坏现有活动。因此，如果我没记错的话，用户被困在您的应用程序中！？

要编辑您的代码，我快速修复可能是：

D -> C（我想使用现有的堆栈）

```
@Override
public void onBackPressed() {
    Intent i = new Intent(getApplicationContext(), C.class);
    i.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
    this.overridePendingTransition(R.anim.right_to_left_a,
    R.anim.right_to_left_b);
    startActivity(i);
    finish();
} 
```

E -> C（我想使用现有的堆栈）

```
@Override
public void onBackPressed() {
    Intent i = new Intent(getApplicationContext(), C.class);
    i.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
    this.overridePendingTransition(R.anim.right_to_left_a,
    R.anim.right_to_left_b);
    startActivity(i);
    finish();
} 
```

# javascript - 是否有任何脚本处理程序可以在锁定或屏幕保护程序模式下显示弹出屏幕（jsp/html）页面

> ID：15967684
> 
> 赞同：0
> 
> 时间：2013-04-12T09:28:45.150
> 
> 标签：javascript

我有一个父页面，如果有任何消息，它会填充一个弹出屏幕，它工作正常，但我的情况是，当系统处于屏幕保护模式和锁定屏幕模式时，我想在屏幕前显示弹出窗口。是否有任何脚本处理程序来处理这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:33:46.790

不，这是不可能的。

据我所知，您希望能够向用户发送警报，无论他们打开了什么（屏幕保护程序/锁定）。如果没有安装某种插件，这是不可能从网络浏览器中实现的。

当屏幕保护程序/锁定屏幕打开时，您可能会触发音频警报，但这只是一个猜测！祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:36:45.193

屏幕保护程序和锁屏模式是操作系统的属性，我认为不会有任何直接的方法来检测它们。

解决方法是花费屏幕保护程序显示的“一般”时间并检测在那段时间内是否没有用户活动，然后显示消息

# ios - iOS 模拟器可以记住使用 Retina iPhone 和非 Retina iPad 吗？

> ID：15967687
> 
> 赞同：2
> 
> 时间：2013-04-12T09:28:57.357
> 
> 标签：ios, xcode, ios-simulator, retina-display

这可能是一个小众问题，实际上更像是一个小问题，但是：

我可以自动将 Xcode 构建到 iPhone Retina 模拟器和 iPad 非 Retina 模拟器吗？

即使使用 27 英寸 iMac，Retina iPad 模拟器对于快速测试来说也相当笨拙，但我喜欢在 Retina 分辨率下进行所有 iPhone 测试。我发现自己不断地在 iPad 上构建，忘记了我没有打开 iPhone Retina，并且让它以 Retina 分辨率构建到 iPad 上，然后不得不切换、杀死和重建，以避免它接管我的整个显示器。

轻微的挫败感，有什么可以做的吗？我确实为五种设备类型（Pad、Pad Retina、Phone、Phone Retina 3.5、Phone Retina 4）中的每一种设置了键盘快捷键，但即使使用这些，我仍然需要在更改后重新构建）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T09:38:08.240

是的，你可以通过你的计划来做到这一点。

单击您的方案>编辑方案...>在左侧菜单中选择“运行[AppName].app”>单击“选项”选项卡>更改“iPad模拟器显示”和“iPhone模拟器显示”下拉菜单。

![在此处输入图像描述](https://i.stack.imgur.com/x6juE.png)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:41:57.837

这可以通过更改项目设置中的方案选项来实现。

这个问题曾经在 SO 上被问过。您可以在此处找到解决方案：[iOS 模拟器 - 一步即可从视网膜 iPhone 切换到非视网膜 iPad](https://stackoverflow.com/questions/12897963/ios-simulator-swap-from-retina-iphone-to-non-retina-ipad-in-a-single-step)

# facebook - facebook“publish_actions”可以删除，但需要

> ID：15967689
> 
> 赞同：0
> 
> 时间：2013-04-12T09:29:05.180
> 
> 标签：facebook, permissions

我有一个需要 publish_actions 的应用程序，因为它发布和检索用户的分数并使用这些数据创建排行榜，所以人们可以与朋友竞争最好的高分。

该应用程序在其授权期间要求发布操作，之后保存，阅读等 -> 一切都很好！但是用户有机会通过点击这个小 |x| 来删除这个 publish_actions 权限。就在它旁边，无论是在第一个 app-auth-screen 还是稍后的应用配置中。那里的问题：一旦用户这样做，有些人会导致为什么授予您（看起来）不必授予的权利，应用程序无法在其个人资料中写入游戏分数，当然，他/她的朋友永远不会知道什么他的分数。含义：如果 publish_actions 被删除，该应用程序将无法运行并且毫无意义。

问题：有没有办法在应用程序启动时检查该权限，提醒玩家应用程序无法正常工作......或者更好的是，重新显示授权屏幕，再次请求发布操作权限？因为一旦它被删除，publish_actions 权限就不能被取消删除。用户将不得不删除整个应用程序并再次启动它。

我真的很感激这里的一点帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:23:23.927

就在这里：

```
 https://graph.facebook.com/USER_ID/permissions 
```

返回一个 json 对象，该对象具有用户授予您的应用程序的权限。

你应该在这里阅读更多关于它的信息： [https ://developers.facebook.com/docs/howtos/login/handling-revoked-permissions/](https://developers.facebook.com/docs/howtos/login/handling-revoked-permissions/)

# python - 如何显示使用“撤回”方法隐藏的窗口？

> ID：15967690
> 
> 赞同：10
> 
> 时间：2013-04-12T09:29:08.057
> 
> 标签：python, python-2.7, tkinter

我想在我打电话后显示一个窗口`withdraw`。

以下是我当前的代码：

```
from Tkinter import *

def callback():    
    global root
    root.withdraw()
    win2 = Tk()

root = Tk()
Label(root,text='this is a window').pack()
Button(root,text='withdraw',command=self.callback).pack()
mainloop() 
```

一旦我按下按钮，窗口就会消失，就像我想要的那样，另一个窗口会出现，一切都很好。如何以与以前相同的状态恢复第一个窗口？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-12T09:40:47.393

如果要显示窗口，请使用以下命令：

```
# root.update()  # not required
root.deiconify() 
```

如果您想了解更多信息，请参阅[此处](http://www.blog.pythonlibrary.org/2012/07/26/tkinter-how-to-show-hide-a-window/)。

# jquery - 如何使用 Angular.js 从解析的 HTML 文本创建列表？

> ID：15967695
> 
> 赞同：1
> 
> 时间：2013-04-12T09:29:14.693
> 
> 标签：jquery, angularjs

对于我的应用程序，我需要从 HTML 加载数据。在列表元素上，我需要解析 UL 子元素 (LI) 并在模型中序列化这些元素（映射到数组）。从这个模型中，我将创建一个模式视图，重新创建一个列表并修改这个列表。

我使用 JQuery 和 AngularJs。我创建了一个指令并在初始化并将所有内容存储在模型中时解析列表。但是，当使用模板和 ng-repeat 从数组创建新列表时，我得到原始数据 + 3 个额外值。

**html:**

```
<div ng-app="MyApp">
    <ul ng-my-list>
        <li>One</li>
        <li>Two</li>
        <li>Three</li>
        <li>Four</li>
    </ul>
</div> 
```

**指示：**

```
app = angular.module "MyApp", []

app.directive 'ngMyList', ->
    linker = (scope, element, attrs) ->  
        scope.items = {
            entry: element.find('li').map ->
                $(this).text()
        }

    {
        template: '<ul><li ng-repeat="item in items.entry"> > {{item}}</li></ul>'
        replace: true
        restrict: 'A'
        link: linker
        scope: {}
    }

angular.bootstrap document, ['MyApp'] 
```

我已将代码提取到[http://jsfiddle.net/sbusso/NRLUH/](http://jsfiddle.net/sbusso/NRLUH/)。在此示例中，我什至无法从原始列表中获取值。

这段代码有什么问题？如何让 ng-repeat 忽略额外的数组值？

**更新**

添加一个拼接（0）清理数组，我得到了我的结果

```
entry: element.find('li').map (->
                $(this).text()).splice(0) 
```

AngularJS 和 JQuery 之间有什么特定的吗？此代码与 Backbone 一起使用。

**更新 2**

在示例中，我必须使用上下文来获得与我的应用程序相同的结果：

```
 scope.items = {
        entry: $(element.context).find('li').map( ->
            $(this).text()
            ).splice(0)
    } 
```

唯一的问题仍然是：为什么 map / ng-repeat 不能很好地配合使用（如果我不添加 splice(0)）？

更新代码以显示工作列表 + 3 额外行：http: [//jsfiddle.net/sbusso/NRLUH/5/](http://jsfiddle.net/sbusso/NRLUH/5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T03:56:50.600

感谢charlietfl，完整的答案是：

*   用于`element.context`获取原始 DOM 元素
*   使用**get()** in`JQuery(selector).map().get()`解包 JQuery 对象并为 ng-repeat 提供一个干净的数组

# c# - try-catch-finally 格式异常

> ID：15967696
> 
> 赞同：0
> 
> 时间：2013-04-12T09:29:16.407
> 
> 标签：c#, datetime, try-catch-finally

我正在尝试通过将文本框转换为`DateTime`格式来捕获输入数据

```
string yy = string.Format("{0:T}", textBox1.Text); 
```

我希望用来`Try-Catch-Finally`产生`Systm.FormatException`错误并将其显示在另一个文本框中

```
try 
{
 DateTime XF = Convert.ToDateTime(yy); 
}
 catch (FormatException)    
       { 
       textBox5.Text = "incorrect time"; 
       }
   finally 
          {
           DateTime XF = Convert.ToDateTime(yy); 
           textBox5.Text = Convert.ToString(XF.Hour + XF.Minute + XF.Second); 
          } 
```

我该怎么走？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:32:12.980

与其使用异常来执行此操作，不如使用`DateTime.TryParse`. 这将返回一个简单的`true`或`false`是否可以转换为日期。

[http://msdn.microsoft.com/en-us/library/ch92fbc1.aspx](http://msdn.microsoft.com/en-us/library/ch92fbc1.aspx)

```
DateTime xf;
bool canBeConverted = DateTime.TryParse(yy, out xf);
if (!canBeConverted) { textBox5.Text = "incorrect time"; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:55:46.533

尝试使用`DateTime.TryParse()`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:32:04.883

如果您不确定格式是否正确，`DateTime.TryParse()`您应该使用。`DateTime.TryParseExact()`不需要例外，这些例外缓慢且不太清楚。

```
string dateString;
DateTime result;
if (DateTime.TryParse(dateString, result))
{
    // it's a recognized as a DateTime
}
else
{
    // it's not recognized as a DateTime
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T09:41:08.837

您可以考虑使用`DateTime.TryParseExact or DateTime.TryParse Method`.

例如。：

```
 string dateString = "Mon 16 Jun 8:30 AM 2008";
string format = "ddd dd MMM h:mm tt yyyy";
DateTime dateTime;
if (DateTime.TryParseExact(dateString, format, CultureInfo.InvariantCulture,
    DateTimeStyles.None, out dateTime))
{
    textBox5.Text = "correct time";
}
    else
      textBox5.Text = "incorrect time"; 
```

# windows-phone-8 - 我应该使用 WP takeit 进行 WP8 开发吗？

> ID：15967699
> 
> 赞同：0
> 
> 时间：2013-04-12T09:29:23.690
> 
> 标签：windows-phone-8

我是 WP 8 开发的新手。我想在我的应用程序中添加一个切换开关。但是，我无法在 VS 2012 Toolbox 中找到该控件。

一些谷歌搜索把我带到了[这个](https://nuget.org/packages/WPtoolkit)WP 8 Toolkit Nuget 包。WP 8 OS 中使用的 Toggle 开关控件是否不能直接供开发人员使用？我必须只使用这个工具包吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:55:38.423

在这里得到解决方案：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/jj735581 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj735581(v=vs.105).aspx)

是的。我们需要使用 WP Toolkit。

# linq - 使用 LINQ Join 的空条目问题

> ID：15967701
> 
> 赞同：0
> 
> 时间：2013-04-12T09:29:26.153
> 
> 标签：linq, null, left-join

在过去的几天里，我一直在为此苦苦挣扎，经过详尽的谷歌搜索，并没有设法弄清楚如何去做。我对 LINQ 和 C# 非常陌生。基本上，我正在尝试加入两个表，都是一个表，但是我尝试加入的列确实包含空值。然后将另一个表的子集加入该列。

我想要发生的是，在加入后，我从显示的第一个表中获取所有信息，而不是我现在得到的仅显示不为空的列的信息。

我知道这是一个特别优雅的解释，所以我将发布一些简化的 puesdo 代码：

```
tblAsset                    tblLookUps

AssetTag int                Domain String
Type int                    DomainID int
Model int                   Description String 
```

因此，表中的信息将类似于：

```
100, 1, 1                   TYPE,  1, PC 
101, 1, null                TYPE,  2, Monitor 
102, 1, 2                   MODEL, 1, Old PC
103, 2, null                MODEL, 2, New PC
104, 2, null                MODEL, 3, Old Monitor
105, 2, 3                   MODEL, 4, New Monitor 
```

所以我希望 LINQ 查询给我的是这样的

```
AssetTag Type TypeDescription Model ModelDescription
  100      1        PC          1        Old PC
  101      1        PC         null       null
  102      1        PC          2        New PC
  103      2      Monitor      null       null
  104      2      Monitor      null       null
  105      2      Monitor        3     Old Monitor 
```

然而，目前 LINQ 返回：

```
AssetTag Type TypeDescription Model ModelDescription
  100      1        PC          1        Old PC
  102      1        PC          2        New PC
  105      2      Monitor       3      Old Monitor 
```

所以很明显，当尝试加入时，如果值为 null 它会被遗漏，这当然我理解，但是我真的不在乎它是否为 null，所以很希望能够看到它！

我当前的 LINQ 如下所示：

```
 var AllAssets = from assets in dContext.tblAssets
                  join type in dContext.tblLookups.Where(x => x.Domain == "ASTYPE")
                       on assets.Type equals type.DomainID
                  join model in dContext.tblLookups.Where(x => x.Domain == "MODEL") 
                       on assets.Model equals model.DomainID
                  select new Asset
                  {
                   AssetTag = assets.AssetTag
                   TypeID = assets.Type
                   TypeDescription = type.Description
                   ModelID = assets.Model
                   ModelDescription = model.Description
                  }

  return AllAssets; 
```

我试过摆弄 .DefaultIfEmpty() 和其他几件事，但我还没有设法解决它，感觉我已经达到了能力的尽头，任何提示或指针都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:16:48.040

```
 var q = from a in tblAssets
            join l in tblLookUps on a.Model equals l.DomainID
            into tblAssettblLookUps
            from l in tblAssettblLookUps.DefaultIfEmpty()
            select new
            {
                AssetTag  = a.AssetTag,
                Type = a.Type,                    
                Model = a.Model
                ModelDescription = l.Description
            }; 
```

试试这样的查询。

# redis - Booksleeve Redis 开发指南

> ID：15967703
> 
> 赞同：4
> 
> 时间：2013-04-12T09:29:29.120
> 
> 标签：redis, booksleeve

是否有关于 BookSleeve Redis 入门的文章或资源？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T11:32:08.317

这些是我在加快速度时阅读的一些文章/链接：

[http://marcgravell.blogspot.com/2011/04/async-redis-await-booksleeve.html](http://marcgravell.blogspot.com/2011/04/async-redis-await-booksleeve.html)

[http://marcgravell.blogspot.com/2011/07/booksleeve-transactions-hashes-and.html](http://marcgravell.blogspot.com/2011/07/booksleeve-transactions-hashes-and.html)

[https://code.google.com/p/booksleeve/](https://code.google.com/p/booksleeve/)

[http://redis.io/](http://redis.io/)

除此之外，在 stackoverflow 中搜索相关问题： [https ://stackoverflow.com/questions/tagged/booksleeve](https://stackoverflow.com/questions/tagged/booksleeve)

那里没有一吨，你需要卷起袖子去挖掘。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T14:16:23.490

Book sleeve 只是 redis 的一个包装器，因此任何数据决策实际上都与任何 redis 指南相关。[http://redis.io](http://redis.io)将是一个起点。就 API 而言，唯一需要强调的是：

*   大多数操作都是异步的，并通过 Task api 公开；这允许一系列使用模式，包括（但不限于）新的“async”/“await”关键字
*   操作按数据类型划分，如 .Strings、.Hashes 等
*   连接是线程安全的多路复用器，旨在供多个调用者同时使用 - 您不需要（也不应该）使用每个调用者范围内的连接

我对您希望我在更详细的文档中包含哪些内容感兴趣。有什么用？什么不清楚？你需要什么？

如果你能描述你需要什么，我可以写出来：p

# xslt - 翻译功能在 xslt 中无法正常工作

> ID：15967707
> 
> 赞同：-1
> 
> 时间：2013-04-12T09:29:42.513
> 
> 标签：xslt

我有一个声明，我需要在其中删除`'\'`. 我正在使用这个：

```
translate((myCustFunc:TextWidth(AdditionalInfo4, 35)),'\','') 
```

内部函数已执行，但`translate`函数未执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:21:15.740

它应该工作。只需检查您的内部功能它返回的是什么。

# c# - 使用 Entity Framework 查询数据时，哪种防御检查更可取？

> ID：15967716
> 
> 赞同：0
> 
> 时间：2013-04-12T09:30:03.877
> 
> 标签：c#, .net, linq, entity-framework, linq-to-entities

使用 Entity Framework 查询数据时，以下哪种防御性检查更可取？

**1.`null`支票：**

```
user = users.SingleOrDefault(u => u.Email.Equals(email));

if(user == null)
{
    throw new Exception("Some critical error!");
}

OperationsOnUser(user); 
```

**2\. LINQ的`Any()`：**

```
if(users.Any(u => u.Email.Equals(email)))
{
    user = users.Single(u => u.Email.Equals(email));
}
else
{
    throw new Exception("Some critical error!");
}

OperationsOnUser(user); 
```

我个人使用第二个选项，因为它对我来说感觉更干净，但是我不是执行两个数据库调用而不是一个吗？我不确定实体框架的内部机制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:37:39.443

[我会引用 Jon Skeet 的话：](http://edulinq.googlecode.com/hg/posts/19-Join.html)

> 我总是建议任何实现类似 LINQ 的运算符的人只对任何输入序列进行一次迭代。有些序列不可能多次迭代，或者每次可能给出不同的结果。这是个坏消息。

保持只迭代一次的习惯。

对于您的示例，是的，您访问了两次数据库，这不是一个好主意。
事实上，你的第二个选项对我来说比第一个选项更混乱。您需要重新校准凌乱的探测器！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:34:52.217

AakashM 的评论是正确的。但是要对此进行扩展，（1）更好，因为您正在对数据库执行一次操作，而在第二个示例中您要执行两次。一次看到它在那里，一次使用它。从我的角度来看，我认为答案是不言而喻的。

# weblogic - WebLogic 11g 启动错误

> ID：15967717
> 
> 赞同：1
> 
> 时间：2013-04-12T09:30:05.230
> 
> 标签：weblogic, weblogic11g

我对 Oracle WebLogic 非常陌生。我在开发模式下在 Fedora 14 上使用[它](http://www.oracle.com/technetwork/middleware/soasuite/overview/quickstartguidesoasuite11gr1ps4-459545.pdf)安装了 WebLogic Server 10.3 。安装后第一次启动成功。但是当我尝试再次启动它时，它显示以下错误并且不执行任何操作。进程在这里停止。

错误是：

```
<Apr 12, 2013 2:41:21 PM IST> <Error> <Coherence> <fedora> <AdminServer> <Logger@9215997 3.7.1.1> <<anonymous>> <> <0000JrxTpjtFw000jzwkno1HPwmR000002> <1365757881226> <BEA-000000> <Oracle Coherence 3.7.1.1 (member=1): Detected soft timeout) of {WrapperGuardable Guard{Daemon=Cluster} Service=ClusterService{Name=Cluster, State=(SERVICE_STARTED, STATE_JOINED), Id=0, Version=3.7.1, OldestMemberId=1}}> 
```

我无法解决并且我的 WebLogic 服务器没有启动。谁能告诉我为什么会出现这个问题以及解决方案是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T20:54:11.657

您可以尝试停止所有与 Oracle 相关的服务/守护程序，然后只启动 weblogic，使用类似“startWebLogic.cmd”或“startWebLogic.sh”的脚本。稍等片刻，尝试在浏览器打开控制台，通常在地址[code]http://localhost:7001/console[/code]，当你看到weblogic启动并运行时，启动所有Oracle再次相关的服务/守护进程。

解释是Oracle 的东西吃掉了所有的内存，weblogic 发现它很难启动。让它先开始，然后为 Oracle 的东西打开大门。

# json - PHP JSON 编码问题和检索问题

> ID：15967718
> 
> 赞同：0
> 
> 时间：2013-04-12T09:30:10.687
> 
> 标签：json

我通常这样做是为了对要通过 AJAX 请求获取的简单字符串进行编码。

```
$str = '<img src="someinage.png" />';
echo json_encode(array('status'=>'OK',$str)); 
```

输出：

```
{"status":"OK","html":"<img src="someinage.png" />"} 
```

看到双引号，我怎样才能避免这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:57:04.607

将 html_entity_decode 函数用于`$str`.

```
$str = '<img src="someinage.png" />';
echo json_encode(array('status'=>'OK',html_entity_decode($str))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:31:37.480

你可以做

```
$str = "<img src='someinage.png' />";
echo json_encode(array('status'=>'OK',$str)); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T09:33:11.027

> 看到双引号，我怎样才能避免这个问题？

看看[第二个参数`json_encode`可以取](http://php.net/manual/en/function.json-encode.php)-`JSON_HEX_QUOT`或`JSON_HEX_TAG`，或两者的组合（取决于您试图屏蔽数据的上下文）应该能够解决您的问题（无需更改数据的格式甚至必须在函数调用中操作它，就像莎拉的回答一样）。

# c# - 如何让所有文化避免 CultureNotFoundException

> ID：15967719
> 
> 赞同：0
> 
> 时间：2013-04-12T09:30:14.987
> 
> 标签：c#, c#-4.0, currency, cultureinfo, culture

伙计们，我正在开发一个将在多台机器上运行的应用程序。我最近在其中引入`Cultures`了支持所有货币的功能。

我有 2 台主要的开发 PC，我在它们之间移动代码。一个是 Windows 8 笔记本电脑，另一个是 Windows 7 PC。

似乎`SpecificCultures`这两台机器中的列表**不**一样。当可执行文件在 Windows 8 上运行时，`SpecificCultures`会返回更多文件，并且还会重命名一些现有文件。

我使用以下代码转储所有特定文化的文本文件：

```
StringBuilder sb = new StringBuilder();

foreach (CultureInfo ci in CultureInfo.GetCultures(CultureTypes.SpecificCultures))
{
    sb.Append(ci.Name + "\t" + new RegionInfo(ci.LCID).CurrencyEnglishName);
    sb.AppendLine();
}

StreamWriter f = new StreamWriter(@"specificCulturesFound.txt");
f.Write(sb);
f.Close(); 
```

`SpecificCultures`从我的 Windows 8 笔记本电脑返回是这样的：http [://pastebin.com/cznLRG62](http://pastebin.com/cznLRG62) 从`SpecificCultures`我的 Windows 7 PC 返回是这样的：http: [//pastebin.com/MwMXwSdb](http://pastebin.com/MwMXwSdb)

如果您在 Notepad++ 或其他工具中比较它们，您会发现差异。

**例如：**例如，该`et-EE Estonian Kroon`条目仅适用于我的 Windows 7 PC，而`ku-Arab-IQ Iraqi Dinar`仅适用于 Windows 8 笔记本电脑

问题是，我该如何处理这种情况？应用程序发布后，它将在具有不同 .NET 框架版本的不同机器上运行。

有没有办法用应用程序导出所有收集的 CultureInfo 数据，以便可以使用它而不是从已安装的 .NET 框架中获取它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:59:54.370

这不是一个简单的情况，在正常情况下，**您的应用程序不应该意识到文化之间的差异，它应该意识到存在差异。**

这通常是**将所有内容保存在中性文化中**（例如，en-US 区域设置），然后**转换回**应用程序运行的用户的特定区域设置。例如，如果用户输入日期值列表，您保存它们的方法是将每个日期转换为其中性表示并使用列表分隔符连接它们（两者都使用中性文化，您可以这样做，因为您可以获得当前用户的语言环境，您知道中立的语言环境）。稍后，在另一台具有不同语言环境的机器上，其他人将读取该文件，您的应用程序知道该日期是中性文化，然后它可以读取它们并将它们以所需的格式呈现给用户。例子：

*   具有`it-IT`区域设置的用户输入两个日期：`01/01/1960;25/12/2013`。
*   应用程序以中性`en-US`格式存储它：`01/01/1977,12/25/2013`.
*   另一个具有`jp-JP`语言环境的用户将读取它，应用程序将读取中性语言环境并将其显示为`1977/01/01・2013/12/25`.

当这些数据不固定时，事情会变得更加复杂，例如货币。在这种情况下，您不能简单地转换为中性值，让我们想象一下（值非常随机）：

*   用户输入一个值，比如 1000 日元。
*   您*将*日元兑换成美元（假设 100 日元 = 1 美元）：10 美元并保存它。
*   数据将在另一个使用欧元的欧洲国家/地区读取，应用程序读取 10 美元，然后将其转换为 10 欧元。

**这当然是错误**的，因为：

*   更改 YEN <-> DOLLARS 可能会从您编写它的那一天开始更改，并以欧元读取它。
*   更改 YEN <-> EURO 不等于 YEN <-> DOLLARS <-> EURO。

这不是一个容易解决的问题，您根本不能依靠“自动”转换，`CultureInfo`但您必须自己实现（以最适合您要求的方式）。例如（当然非常幼稚）实现可能会像这样存储货币：

```
struct CurrencyValue
{
    public decimal Value;
    public string Currency;
} 
```

这可能会根据需要变得复杂（例如，使用类层次结构而不是货币而不是字符串），但请记住，这种转换绝对不是微不足道的。

## 总结

不要关心这种转换，只需使用中性语言环境存储所有内容，并且转换（到和从）将发生在用户计算机中（您不需要关心正在使用哪个语言环境）。

如果您必须管理像货币这样的*特殊类型*，那么您必须实现自己的库来以正确的方式处理它们。什么是“正确方式”取决于您的完整应用程序要求，因此无法在这里回答。

# java - 为什么 String 在 Java 中是不可变的或最终的

> ID：15967722
> 
> 赞同：7
> 
> 时间：2013-04-12T09:30:21.480
> 
> 标签：java, string, final, immutability

有人告诉我这是 Java 中重要的字符串面试问题，首先讨论“什么是字符串”，Java 中的字符串与 C 或 C++ 中的字符串有何不同，然后你被问及不可变对象，你被问到主要问题问题：“为什么 String 在 Java 中是不可变的或最终的”。

你能分享你的想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-12T09:43:31.160

这主要是出于**安全原因**。字符串在网络连接、数据库url等中用作参数，如果是可变的，很容易被攻击

不变性`String`解决了一些**同步**问题，它使`String`线程安全

支持**StringPool**设施

**缓存**的_ `hashcode`_`String`

支持用作参数的**类加载机制。**`String`字符串可变导致加载错误的类

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-12T09:47:01.407

最重要的原因是**安全**。

如果恶意线程可以获取对可变字符串的引用，则会出现很多安全风险，该可变字符串将被传递到必须在执行重要操作之前验证字符串的方法中。验证后线程可能会更改字符串，然后使用危险的字符串执行操作。

为什么 String 在 Java 中不可变的另一个原因是**允许 String 缓存其哈希码**

如上所述 - 最重要的原因 -**安全性和线程安全性**。

考虑一个场景，在银行转账应用程序中 - 收款人帐号在字符串中定义为“0789567345”。如果错误/故意这个acc。号码变了，钱会转到错误的帐户。

另一种情况 - 如果有人在处理之间的任何地方更改类名 ..

```
getClass().getName().subString(0, 5); 
```

类加载器只会说“找不到类

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-12T09:35:52.570

字符串在包括 Java 在内的许多现代语言中不可变的两个主要原因是**安全性**和**性能**（或者更准确地说，是优化的机会）。

事实上，字符串`final`是为了确保它们的不变性（通过禁止任何人扩展它们并使它们再次可变）。

# sql - 普通插入与 plsql 插入 - 优点和缺点

> ID：15967723
> 
> 赞同：0
> 
> 时间：2013-04-12T09:30:25.517
> 
> 标签：sql, oracle, plsql

我需要做的是将记录插入到表 TAB_B 中，这是从选择到表 TAB_A 的结果（表结构相同），如下所示：

```
INSERT /*+ APPEND */ INTO TAB_B SELECT * FROM TAB_A WHERE [CONDITION] 
```

问题是我需要知道插入了多少条记录，所以最简单的方法是在插入后计算它们：

```
SELECT COUNT(*) FROM TAB_A WHERE [CONDITION] 
```

无论如何，如果我可以省略两次执行相同条件的查询，那就太好了，所以我可以这样做：

```
BEGIN
  INSERT /*+ APPEND */ INTO TAB_B SELECT * FROM TAB_A WHERE [CONDITION];
  DBMS_OUTPUT.PUT_LINE(SQL%ROWCOUNT);
END; 
```

问题是：“plsql 解决方案是否有任何缺点——尤其是在性能方面？我应该坚持 INSERT 后跟 COUNT，还是不坚持？”

编辑先生，我认为我的问题不能更清楚地提出，它是关于性能差异加上最终的缺点，而不是方法本身（我试图在标题和问题本身中更好地说明它）。您标记为重复的问题是关于如何计算行数，无论我的问题是这两种方法中哪一种在性能方面更好，以及使用任何提到的方法时是否有任何缺点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:07:08.740

假设您在 PL/SQL 中执行此操作（如标记所示），完成您想要的最简单的方法是使用`SQL%ROWCOUNT`，如：

```
INSERT /*+ APPEND */ INTO TAB_B SELECT * FROM TAB_A WHERE [CONDITION];

nRows_inserted := SQL%ROWCOUNT; 
```

要知道使用 COUNT(*) 查询实际插入了多少行，您必须在进行插入之前执行一次，然后再执行一次，以考虑表中可能存在在执行之前已经满足条件的行的可能性插入。

分享和享受。

# asp.net - 剑道三指量规——3个量规上下对齐的问题

> ID：15967726
> 
> 赞同：0
> 
> 时间：2013-04-12T09:30:36.887
> 
> 标签：asp.net, razor, kendo-ui, gauge

所以我尝试复制无数其他关于使用 z-index 和定位对齐仪表和 div 的帖子，但到目前为止我仍然无法完成它。我目前有这个（我在 IE 和 chrome 中测试了相同的结果）：

```
<div id="gauges">
    <div id="loggedInGauge">  //gauge creation code  </div>
    <div id="loggedOutGauge"> //gauge creation code </div>
    <div id="onBreakGauge">   //gauge creation code </div> 
</div>
<style>

             #gauges {
                position: relative;

            }
            #loggedInGauge, #loggedOutGauge, #onBreakGauge {

                position: absolute;
                top: 0px;
                left: 0px;
                right: 0px;
                bottom: 0px;
                width: 200px;
                height: 200px;    
            }

            #loggedOutGauge {

                z-index: 10;
            }
            #onBreakGauge {
                z-index: 20;
            }

</style> 
```

任何人都可以帮助将仪表放在彼此之上，使其看起来像一个带有三个指针的仪表吗？

这是当前输出的内容：[Imgur 链接到当前输出](http://imgur.com/BCAC31O)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:21:07.357

将 CSS 定义更改为：

```
#loggedInGauge, #loggedOutGauge, #onBreakGauge {
    position: absolute !important;
    top: 0px;
    left: 0px;
    right: 0px;
    bottom: 0px;
    width: 200px;
    height: 200px;    
} 
```

Kendo UI 将每个位置定义`gauge`为相对覆盖您的定义。添加`! important`到它，我们防止这种情况发生。

这里的例子：http: [//jsfiddle.net/OnaBai/wNsRY/](http://jsfiddle.net/OnaBai/wNsRY/)

# gwt - Watir + gwt 应用程序

> ID：15967733
> 
> 赞同：0
> 
> 时间：2013-04-12T09:30:51.300
> 
> 标签：gwt, click, double, watir

我正在为 GWT 应用程序编写自动测试。我尝试双击表格元素。我正在使用此代码单击：

```
 browser.element(:xpath, '/html/body/div[5]/div[2]/div/div/div/div[2]/div/div/div/div/div/div/div/div[2]/div/div[2]/div/div/table/tbody[2]/tr[1]/td[1]/div').double_click 
```

执行此命令时，我收到如下错误：

```
 Cannot perform native interaction: Could not load native events component 
```

我已将此代码添加到我的脚本中，但这没有帮助：\

```
 profile = Selenium::WebDriver::Firefox::Profile.new
  profile.native_events = true
  browser = Watir::Browser.new :firefox, :profile => profile 
```

它是我尝试单击的 html 的一部分：

```
<tbody>
  <tr aria-posinset="0" aria-setsize="11" role="listitem">
    <td class="cellSelected" height="22" align="left" style="padding-top: 0px; padding-bottom: 0px; width: 100px; overflow: hidden;">
      <div style="overflow:hidden;WIDTH:96px;" cellclipdiv="true" role="presentation">
        <nobr>2004</nobr>
      </div>
    </td>
    <td class="cellSelected" height="22" align="left" style="padding-top: 0px; padding-bottom: 0px;  width: 371px; overflow: hidden;">
      <div style="overflow:hidden;WIDTH:367px;" cellclipdiv="true" role="presentation">
    </td>
    <td class="cellSelected" height="22" align="right" style="padding-top: 0px; padding-bottom: 0px; width: 200px; overflow: hidden;">
    <td class="cellSelected" height="22" align="left" style="padding-top: 0px; padding-bottom: 0px; width: 372px; overflow: hidden;">
  </tr>
  <tr aria-posinset="1" aria-setsize="11" role="listitem">
  <tr aria-posinset="2" aria-setsize="11" role="listitem">
  <tr aria-posinset="3" aria-setsize="11" role="listitem">
  <tr aria-posinset="4" aria-setsize="11" role="listitem">
  <tr aria-posinset="5" aria-setsize="11" role="listitem">
  <tr aria-posinset="6" aria-setsize="11" role="listitem">
  <tr aria-posinset="7" aria-setsize="11" role="listitem">
  <tr aria-posinset="8" aria-setsize="11" role="listitem">
  <tr aria-posinset="9" aria-setsize="11" role="listitem">
  <tr aria-posinset="10" aria-setsize="11" role="listitem">
</tbody> 
```

我知道 xpath 不是很好，但它可以工作。例如常规点击工作正常。

我使用 selenium 2.31、ruby 1.9.3 和 firefox 17。

* * *

这是 div 和 table。谢谢

```
 <div id="isc_K7" style="POSITION:relative;VISIBILITY:inherit;Z-INDEX:206084;CURSOR:default;"  eventproxy="isc_PolicyListGrid_1_body">
   <div style="position:relative;z-index:1000;">
     <div id="isc_PolicyListGrid_1_body$47a" style="width:1px;height:0px;overflow:hidden;display:none;">
     <img width="1" height="0" border="0" align="TEXTTOP" suppress="TRUE" src="blank.gif">
     </div>
     <table id="isc_K7table" class="listTable" width="1043" cellspacing="0" cellpadding="2"  border="0" style="table-layout:fixed;overflow:hidden;wrap:false;padding-left:0px;padding-right:0px;" role="presentation">
        <tbody></tbody>
        <colgroup>
        <tbody>
     </table>
   <div id="isc_PolicyListGrid_1_body$47t" style="width:1px;height:0px;overflow:hidden;display:none;">
   </div>
   <table style="position:absolute;top:0px;font-size:1px;height:100%;width:100%;z-index:1;overflow:hidden;visibility:hidden;">
  </div> 
```

# ajax - Sencha Touch：如何更新数据存储以从控制器列出

> ID：15967734
> 
> 赞同：0
> 
> 时间：2013-04-12T09:30:54.900
> 
> 标签：ajax, extjs4, sencha-touch, sencha-touch-2.1

从控制器更新列表时遇到问题。我有商店、模型和列表来显示 Json 数据。能够获取数据但无法更新列表。并且如果我的商店中的 ajax 调用能够使用列表进行数据处理，但不会调用列表器。所以我将代码移动到控制器。这是我的商店：

```
Ext.define('MyApp.store.StoreList', {
    extend:'Ext.data.Store',
    requires:['MyApp.model.ModelList'],
    config:{
        model:'MyApp.model.ModelList',
        autoLoad:'true',
        storeId:'id_StoreList'
    }
}); 
```

模型：

```
Ext.define('MyApp.model.ModelList', {
    extend: 'Ext.data.Model',
    xtype:'modelList',
    config: {
        fields:['name']
}
}); 
```

控制器

```
Ext.define('MyApp.controller.Main', {
extend : 'Ext.app.Controller',
requires : ['MyApp.view.MyList'],
config : {
    refs : {
        loadbtn:'button[action=loadbtn]',
        dataList: '#id_listitems'

    },
    control : {
        "#dataList": {
            itemtap: 'onListItemTap'
        },
        loadbtn:{
            tap : 'handleloadbtn'
        }

    }

},

handleloadbtn: function(){
    console.log('loadbtn tapped');
    Ext.Viewport.setMasked({xtype:'loadmask',message:'loading...'});
    this.ajaxCall();
},

ajaxCall:function(){
    Ext.Ajax.request({
        method: 'POST',
        scope: this,
        extraParams: {
            Details: true
        },

        url:'http://localhost:9080/works',
        actionMethods: {
            create : 'POST',
            read   : 'POST', // by default GET
            update : 'POST',
            destroy: 'POST'
        },
        headers :{
            "Content-Type" :'application/xml',
            'Accept':'application/json'
        },
        reader:
        {
            type:'json'
        },
        success: function(response){
            console.log('success');

            // var list = Ext.getCmp('id_listitems')
            //var store = Ext.getStore('id_StoreList');
            var store = Ext.data.StoreManager.lookup('id_StoreList');
            this.getDataList().setStore(store);
           //Error : Uncaught ReferenceError: getDataList is not defined 
            console.log('test:',test);
            Ext.Viewport.setMasked(false);
        }
    })
} 
```

});

列表：

```
Ext.define('MyApp.view.MyList',{
    extend:'Ext.Panel',
    xtype:'myList',
    requires:['Ext.dataview.List'],
    config:{
        layout:'fit',
        styleHtmlContent:'true',
        styleHtmlCls:'showListCls',
        items:[
            {
                docked:'top',
                items:[
                    {
                        xtype:'button',
                        text:'Load',
                        ui:'Plain',
                        action:'loadbtn',
                        width:'180px',
                        height:'30px',
                        docked:'right',
                        margin : '5 15 5 0'
                    }
                ]
            },
            {
                xtype:'list',
                id: 'id_listitems',
                action:'list_Item_Action',
                store:'StoreList',
                itemTpl:['{name}'
                ]
            }
        ]
    }
}); 
```

任何人都可以帮我解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T17:07:09.947

我想你可以试试这个。你的商店看起来像

```
Ext.define('MyApp.store.StoreList', {
    extend:'Ext.data.Store',
    requires:['MyApp.model.ModelList'],
    config:{
        model:'MyApp.model.ModelList',
        autoLoad:'true',
         clearOnPageLoad: false,       
        proxy: {
            type: 'jsonp',
            useDefaultXhrHeader: false,
            url: 'http://localhost:9080/works',
            reader: {
                type: 'json',
                rootProperty: "Items" //It depends on your json data structure

            },
            callbackKey: 'callback'
        }
    }
}); 
```

在控制器的“handleloadbtn”函数中，你可以调用

```
Ext.getStore("StoreList").load(); //despite of the config "autoLoad:true" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T08:52:04.910

你需要`this.getDataList()`像这样使用：

```
Ext.Ajax.request({
    method: 'POST',
    extraParams: {
        Details: true
    },

    url:'http://localhost:9080/works',
    actionMethods: {
        create : 'POST',
        read   : 'POST', // by default GET
        update : 'POST',
        destroy: 'POST'
    },
    headers :{
        "Content-Type" :'application/xml',
        'Accept':'application/json'
    },
    reader:
    {
        type:'json'
    },
    success: function(response){
        console.log('success');

        // var list = Ext.getCmp('id_listitems')
        //var store = Ext.getStore('id_StoreList');
        var store = Ext.data.StoreManager.lookup('id_StoreList');
        this.getDataList().setStore(store);
       //Error : Uncaught ReferenceError: getDataList is not defined 
        console.log('test:',test);
        Ext.Viewport.setMasked(false);
    },
    scope: this
}); 
```

您还需要添加`scope: this`到您的请求配置对象，以便方法`this`中`success`不是请求而是您的控制器。

希望这可以帮助。

# css - 在移动浏览器上创建一致的物理字体大小

> ID：15967741
> 
> 赞同：0
> 
> 时间：2013-04-12T09:31:02.093
> 
> 标签：css, mobile, font-size

在移动设备上，我客户的大部分网站看起来都像普通的桌面页面。它尚未做出响应，但正在处理中。由于正文宽度固定为 1000 像素，因此在您的移动浏览器中都是微小的文本和内容。所以这将是一个双击派对来实际阅读内容。

那么我的问题是什么？我正在为移动设备构建一个小通知栏。这是一个从网页底部滑入的黄色小条，告诉用户他们正在查看的页面尚未针对移动设备进行优化。除了您是否真的想要这个事实之外，我还试图弄清楚如何使栏内的字体在所有设备上具有一致的物理尺寸。问题是如今所有设备都具有广泛的 DPI。[我在 StackOverflow 上发现的另一个问题](https://stackoverflow.com/questions/521832/consistent-font-size-across-browsers-web-development)涉及此问题，但仅处理桌面案例。手机是一个完全不同的球赛。

我一直在 CSS 中处理 mm，但浏览器之间的文本渲染不一致非常严重。我想我可以通过基于像素密度以 px 计算字体大小来做到这一点。或者通过为所有 DPI 变体编写一堆媒体查询。但这一切似乎都很愚蠢。我在这里忽略了什么吗？有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:49:09.737

使用“em”作为单位而不是 mm 或 px。它会自动适应读者使用的字体。

例子：

```
p {
font-size:1em;
} 
```

# javascript - Firefox scrollHeight vs溢出

> ID：15967747
> 
> 赞同：-1
> 
> 时间：2013-04-12T09:31:16.703
> 
> 标签：javascript, html, css, firefox

[演示](http://jsfiddle.net/HzeE7/13/)

**HTML：**

```
<div id="relative">
  <div id="absolute"></div>
</div> 
```

**CSS：**

```
#relative {
  position : relative;
  width    : 200px;
  height   : 200px;
  overflow : visible;
}
#absolute {
  position   : absolute;
  width      : 200px;
  height     : 300px;
  background : #eee;
} 
```

**JavaScript：**

```
console.log($("#relative").get(0).scrollHeight);
$("#relative").css({
  "overflow-x" : "hidden",
  "overflow-y" : "scroll"
});
console.log($("#relative").get(0).scrollHeight); 
```

它在 chrome 中返回“300, 300”，在 Firefox 中返回 9, “200, 300”。

有没有办法在不改变溢出的情况下检测“300”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:47:32.947

No scrollbars = no scrollHeight.

> When an element's content does not generate a vertical scrollbar, then its scrollHeight property is equal to its clientHeight property.

[https://developer.mozilla.org/en-US/docs/DOM/element.scrollHeight](https://developer.mozilla.org/en-US/docs/DOM/element.scrollHeight)

# java - 等效的布尔语句有不同的结果

> ID：15967751
> 
> 赞同：0
> 
> 时间：2013-04-12T09:31:24.100
> 
> 标签：java

我对 && 运算符的工作方式感到困惑

```
if (StringUtils.isNotEmpty(cartModification.getStatusCode()) 
    && (cartModification.getStatusCode().equalsIgnoreCase(UNFCommerceCartModificationStatus.Sell_Out))) 
```

上面的陈述是真实的

尽管

```
if (StringUtils.isNotEmpty(cartModification.getStatusCode()) 
    && cartModification.getStatusCode().equalsIgnoreCase(UNFCommerceCartModificationStatus.Sell_Out)) 
```

被评估为假。这两个语句之间的唯一区别是大括号。

作为一个额外的输入，我已经用调试器和

```
 StringUtils.isNotEmpty(cartModification.getStatusCode() =true
cartModification.getStatusCode().equalsIgnoreCase(UNFCommerceCartModificationStatus.Sell_Out)=true 
```

我刚刚在第二部分添加了额外的括号，它被评估为真实，数据与我在问题中指出的相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:51:51.570

由于评论框并不适合这个：

如何在一次运行中尝试这个。

```
if(StringUtils.isNotEmpty(cartModification.getStatusCode()) 
    && cartModification.getStatusCode().equalsIgnoreCase(UNFCommerceCartModificationStatus.Sell_Out))
    System.out.println("First try is true");

if(StringUtils.isNotEmpty(cartModification.getStatusCode()) 
    && (cartModification.getStatusCode().equalsIgnoreCase(UNFCommerceCartModificationStatus.Sell_Out)))
    System.out.println("Second try is true"); 
```

无论如何，您应该没有或两行（因为两个语句是相同的）。

**请注意**，可能只打印了一行，这意味着任何调用都会`getStatusCode()`调用至少一个条件中使用的任何值的更改。

# sql-server - 我可以在触发器中动态指定数据库名称吗？

> ID：15967753
> 
> 赞同：0
> 
> 时间：2013-04-12T09:31:27.397
> 
> 标签：sql-server, tsql

我需要从数据库中的表中获取数据，其数据库名称将在触发器期间被确定为变量。然后，我知道这个变量需要从已确定数据库中的表中获取一个在触发器期间也被确定为变量的项目的 seqno。
我正在尝试这条路线，因为我假设我需要在将 SQL 语句设置为变量之前构建它。这不起作用，我需要知道如何做到这一点的最佳方法：

```
DECLARE @SU_SEQNO INTEGER, @SU_NAME VARCHAR(50), @SU_OWNER VARCHAR(15), @SUD_SEQNO INTEGER, @SQL NVARCHAR(500)

SET @SU_OWNER = 'XXX'
SET @SU_NAME = '1ABC234'

SET @SQL ='SELECT @SUD_SEQNO=SEQNO FROM ' + (@SU_OWNER) + '.SU_MAIN 
              WHERE UNITNAME= ' + @SU_NAME 
SET @SUD_SEQNO = (EXECUTE (@SQL)) 
```

非常感谢您对此的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:55:17.097

来自：[从存储过程中的动态 SQL 获取结果](https://stackoverflow.com/questions/10298654/get-result-from-dynamic-sql-in-stored-procedure)

```
SET @SQL = N'SELECT DISTINCT @FiscalYear = FiscalYear FROM ' + @DataSource;
EXEC sp_executesql @SQL, N'@FiscalYear INT OUTPUT', @FiscalYear OUTPUT;

PRINT @FiscalYear; 
```

我会重新设计以使用 sp_executesql 方法，如上所示。这应该够了吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T04:00:15.910

我已经修改了代码，它可以工作

```
declare @su_owner varchar(15) = 'DBTEST'
declare @SU_SEQNO INTEGER=1, @SUD_SEQNO INTEGER=0, @SQL NVARCHAR(500)
DECLARE @ParmDefinition NVARCHAR(500), @SU_NAME_INPUT VARCHAR(50)='SU123'

SET @SU_NAME_INPUT = (SELECT UNITNAME FROM SU_MAIN WHERE SEQNO=@SU_SEQNO)
SET @SU_NAME = (SELECT UNITNAME FROM SU_MAIN WHERE SEQNO=@SU_SEQNO)

SET @SQL = N'SELECT @sud_seqnoOUT=MAX(SEQNO) FROM ' + quotename(@su_owner) + '.[dbo].[SU_MAIN] WHERE UNITNAME]=@SU_NAME_INPUT' ;

SET @ParmDefinition = N'@SU_NAME_INPUT VARCHAR(50),@sud_seqnoOUT INT OUTPUT'

EXEC sp_executesql @SQL,@ParmDefinition,@SU_NAME_INPUT = @SU_NAME,
            @sud_seqnoOUT = @SUD_SEQNO OUTPUT 
```

# javascript - 将按键事件添加到 chrome 扩展中的多功能框

> ID：15967756
> 
> 赞同：6
> 
> 时间：2013-04-12T09:31:37.120
> 
> 标签：javascript, google-chrome-extension, chromium, omnibox

`keyup, keydown, keypress`是否有可能在 chrome多功能框中收听 keyevents ( [)](http://developer.chrome.com/extensions/omnibox.html)？

到目前为止，我刚刚发现：

```
chrome.omnibox.onInputStarted.addListener(function() {...});
chrome.omnibox.onInputChanged.addListener(function(string text, function suggest) {...});
chrome.omnibox.onInputEntered.addListener(function(string text) {...});
chrome.omnibox.onInputCancelled.addListener(function() {...}); 
```

**编辑：**

该`onInputChanged`事件的问题在于，当用户使用箭头键导航到其中一个建议时，它不会触发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:01:29.920

我没有查看源代码，但是，这里有一个示例：http: [//developer.chrome.com/extensions/samples.html#be68e4d262d74d2457999fc402f5bf5e](http://developer.chrome.com/extensions/samples.html#be68e4d262d74d2457999fc402f5bf5e)

我刚刚尝试过（在多功能框中键入“omnix s”），并且可以报告，而不是使用箭头键导航到显示警报的建议之一，通知我所选选项。

*注意：这仅在所选选项旁边显示扩展程序图标时才有效*

# vba - VBA POWERPOINT：将带有格式的文本从 powerpoint 复制到 word

> ID：15967759
> 
> 赞同：0
> 
> 时间：2013-04-12T09:31:56.353
> 
> 标签：vba, ms-word, powerpoint

现在我正在将文本复制到 word 中，如下所示：

```
wrdDoc.Range.InsertAfter someShapeWithText.TextFrame.TextRange.Text & vbCr & vbCr 
```

我希望它使用格式进行复制，即某些单词是粗体、彩色等。我不知道该怎么做。VBA 相当新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:51:56.403

您需要触发`copy`并`paste`保持格式化。我认为你可以这样（使用我无法测试的变量）

```
someShapeWithText.TextFrame.TextRange.Copy
wrdDoc.Range.Paste 
```

# c++ - 将 boost_shared 指针存储在向量中 - 是否昂贵

> ID：15967771
> 
> 赞同：0
> 
> 时间：2013-04-12T09:32:26.093
> 
> 标签：c++, shared-ptr

我知道向量倾向于复制所有推入其中的对象。`boost::shared_ptr`我的问题是将指向 a 的指针存储在向量中而不是共享 ptr 本身是否有意义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:37:15.697

对于任何性能问题，唯一 100% 正确的答案是“分析并查看”。

但是，在这种特殊情况下，您应该直接将`shared_ptr`s 保留在其中（按值）。复制共享指针的开销很低。如果你的编译器支持移动，它甚至会被移动——尽管你可能会使用`std::shared_ptr`，对吧？

无论如何，您将如何在其中仅存储指针？动态分配`shared_ptr`s？你将如何控制自己的所有权？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:44:35.593

shared_ptr 旨在管理原始指针的生命周期。通过容器存储和访问它们几乎不是开销。如果您将指向 shared_ptr 的指针存储到容器中，那么您将破坏 shared_ptr 的全部目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:17:42.820

为什么要问“贵”？除了正确性之外，您首先关心的应该是“它是否安全”。您的第二个关注点应该是“它是否可读和可维护”。如果您知道（通过分析）您在性能敏感领域工作，那么仅成本是您最关心的 5 个问题。即便如此，几乎在每种情况下都有“安全第一”。

所以：

*   不要使用指向`shared_ptr`的指针，因为很难做到安全和正确。
*   不要使用指向 的指针`shared_ptr`，因为它很脆弱，难以解读，并且让每个人都想知道你为什么这样做（可维护性）
*   不要使用指针，`shared_ptr` *除非*您真的知道复制`shared_ptr`s 是一个性能问题，并且您通过分析知道*并且您没有其他更安全、更可维护且性能相同的解决方案*

**tl;博士**不要使用指向`shared_ptr`.

# python - Python - 在 Jinja2 中使用 unicode 字符串格式化日期时间

> ID：15967776
> 
> 赞同：1
> 
> 时间：2013-04-12T09:32:36.873
> 
> 标签：python, templates, unicode, jinja2

这是我用来`datetime`在 Jinja2中格式化 a 的代码

```
# -*- encoding=utf-8

import jinja2
import datetime

now = datetime.datetime.utcnow()

print jinja2.Template(u'''Hello {{ date.strftime('%Y 年 %m 月') }}!''').render(date=now) 
```

的参数中有一些非 ASCII 字符（'年月'）`date.strftime`。Jinja2 抱怨说

```
Traceback (most recent call last):
  File "test.py", line 8, in <module>
    print jinja2.Template(u'''Hello {{ date.strftime('%Y 年 %m 月') }}!''').render(date=now)
  File "/usr/local/lib/python2.7/dist-packages/Jinja2-2.6-py2.7.egg/jinja2/environment.py", line 894, in render
    return self.environment.handle_exception(exc_info, True)
  File "<template>", line 1, in top-level template code
UnicodeEncodeError: 'ascii' codec can't encode character u'\u5e74' in position 3: ordinal not in range(128) 
```

然后我将其更改为

```
print jinja2.Template(u'''Hello {{ date.strftime(u'%Y 年 %m 月') }}!''').render(date=now) 
```

（注意前面的 'u' `'%Y 年 %m 月'`）但是 Jinja2 似乎不处理 Python unicode 文字。它抱怨说

```
Traceback (most recent call last):
  File "test.py", line 8, in <module>
    print jinja2.Template(u'''Hello {{ date.strftime(u'%Y 年 %m 月') }}!''').render(date=now)
  File "/usr/local/lib/python2.7/dist-packages/Jinja2-2.6-py2.7.egg/jinja2/environment.py", line 831, in __new__
    return env.from_string(source, template_class=cls)
  File "/usr/local/lib/python2.7/dist-packages/Jinja2-2.6-py2.7.egg/jinja2/environment.py", line 769, in from_string
    return cls.from_code(self, self.compile(source), globals, None)
  File "/usr/local/lib/python2.7/dist-packages/Jinja2-2.6-py2.7.egg/jinja2/environment.py", line 493, in compile
    self.handle_exception(exc_info, source_hint=source)
  File "<unknown>", line 1, in template
jinja2.exceptions.TemplateSyntaxError: expected token ',', got 'string' 
```

有人可以告诉我正确的方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:55:46.517

如[本问题](https://stackoverflow.com/questions/2571515/using-a-unicode-format-for-pythons-time-strftime)所述，`datetime.strftime`不接受`unicode`字符串。`unicode`但是，总是使用内部 jinja 。

为了解决这个难题，我可以想到的一个解决方案是编写一个自定义过滤器，它首先转换`unicode`为`str`然后返回：

```
# -*- coding: utf-8 -*-
from jinja2 import Environment, DictLoader
import datetime

def strftime(date, fmt):
    return date.strftime(fmt.encode('utf-8')).decode('utf-8')

env = Environment(loader=DictLoader({'test': u'''Hello {{ d|strftime('%Y 年 %m 月') }}!'''}))
env.filters['strftime'] = strftime
t = env.get_template('test')
print t.render(d=datetime.datetime.utcnow()) 
```

（请注意，您必须将自定义过滤器附加到环境。）

# javascript - 将 javascript 库添加到 angular-brunch-seed

> ID：15967778
> 
> 赞同：1
> 
> 时间：2013-04-12T09:32:38.440
> 
> 标签：javascript, build, breeze, brunch

我在我的电脑上克隆了 angular-bunch-seed [https://github.com/scotch/angular-brunch-seed](https://github.com/scotch/angular-brunch-seed)

我想将breezejs 添加到我的项目 [http://learn.breezejs.com/](http://learn.breezejs.com/)

我将微风库复制到我的供应商文件夹 /vendor/breeze/

然后我更改了 config.coffee 文件如下：

```
exports.config =
  # See docs at http://brunch.readthedocs.org/en/latest/config.html.
  conventions:
    ignored: /(^vendor\/.*\.less$)|(^|\/)node_modules\/|(^|\/)_/
    assets: /^app\/assets\//
  modules:
    definition: false
    wrapper: false
  paths:
    public: '_public'
  files:
    javascripts:
      joinTo:
        'js/app.js': /^app/
        'js/vendor.js': /^vendor/
        'test/scenarios.js': /^test(\/|\\)e2e/
      order:
        before: [
          'vendor/console-polyfill/index.js'
          'vendor/jquery/jquery.js'
          'vendor/breeze/breeze.debug.js'
          'vendor/breeze/q.js'
          'vendor/angular/angular.js'
          'vendor/angular-resource/angular-resource.js'
          'vendor/angular-cookies/angular-cookies.js'
          'vendor/angular-sanitize/angular-sanitize.js'
          'vendor/bootstrap/docs/assets/js/bootstrap.js'
        ]

    stylesheets:
      joinTo:
        'css/app.css': /^(app|vendor)/
      order:
        before: [
          'app/styles/app.less'
        ]

    templates:
      joinTo: 
        'js/dontUseMe' : /^app/ # dirty hack for Jade compiling.

  plugins:
    jade:
      pretty: yes # Adds pretty-indentation whitespaces to output (false by default)
    jade_angular:
      modules_folder: 'partials'
      locals: {}

    bower:
      extend:
        "bootstrap" : 'vendor/bootstrap/docs/assets/js/bootstrap.js'
        "angular-mocks": []
        "styles": []
      asserts:
        "img" : /bootstrap(\\|\/)img/
        "font": /font-awesome(\\|\/)font/

  # Enable or disable minifying of result js / css files.
  # minify: true 
```

当我执行早午餐构建时，检查 vendor.js 文件.. 不包括微风库！我错过了什么？

PS：当我从构建文件中删除 angular.js 时，它已正确删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T05:17:04.840

嗯，答案有简单和复杂的子部分。

最简单的部分：为什么它不起作用。 [angular-brunch-seed](https://github.com/scotch/angular-brunch-seed)使用[bower-brunch](https://github.com/brian-c/bower-brunch)包，它在内部检查供应商库中的*component.json*文件。这意味着，如果您没有**使用**[bower](https://github.com/twitter/bower)下载库，或者将所需的*component.json*放在库的根目录（并在根*component.json*中提及），它将不会被识别为正确的供应商库并在*config.coffee*的joinTo**正**则表达式。

*这个config.coffee*文件的**order**部分只管理你的库在生成的*vendor.js*文件中的放置顺序；如果该库事先被忽略，则订单行没有影响。

 **棘手的部分：轻松进入您的供应商库。干净的方法应该是使用 bower 下载它。问题是，正如您可能已经猜到的那样，到目前为止，还没有针对微风的凉亭包。

```
[victor@M]<~> bower search breeze
No results
[victor@M]<~> bower search | \grep breeze
No results 
```

这意味着您必须自己创建它。如[bower docs](https://github.com/twitter/bower/blob/master/README.md)中所述，您必须以某个名称（例如**bower-breeze ）将 bower 最终库文件（而不是源代码）和***component.json*打包到 git 端点（例如 github）中并注册它凉亭使用. 看看有[角的家伙做](https://github.com/angular/bower-angular)了什么，以获得灵感。您还必须在该存储库中包含[semver](http://semver.org/)标记以匹配基本库的版本。或者，您可以在微风的 github 上打开一个问题，并要求将一个*component.json*包含在他们的存储库中（或者更好的是，编写它并提交一个拉取请求）。**`bower register`**

 ***最后一个措施，您可以尝试在您的供应商目录中编写*component.json*并检查它是否仍然被忽略，但我没有对此进行测试。可以工作（但这是一个黑客）也许你至少必须在 angular-brunch-seed 的根*component.json*中添加一个提及它（带有版本信息）

总而言之，角早午餐种子是一个棘手的野兽......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T05:50:10.567

我遵循了您的建议，并向 Breeze 团队发送了拉取请求。拉取请求被接受后，如果他们还没有完成，我将把回购交给凉亭。

现在我在 ./vendor/breeze 文件夹中创建了一个 component.json 文件

```
{
  "name": "breeze",
  "version": "1.2.9",
  "main": "./breeze.debug.js",
  "dependencies": {},
  "gitHead": "0b0891a13d0023bbfdf91785bd99ac5a416bf9c7",
  "_id": "BreezeS@1.2.9",
  "readme": "ERROR: No README.md file found!",
  "description": "ERROR: No README.md file found!",
  "repository": {
    "type": "git",
    "url": "git://github.com/IdeaBlade/Breeze.git"
  }
} 
```

gitHead 是随机的.. 但无论如何，当我运行 brunch build 时，我终于可以看到 vendor.js 中包含的微风！多谢*****

# sql - 在 MS SQL Server 中使用 containstable 时搜索与号 (&)

> ID：15967781
> 
> 赞同：3
> 
> 时间：2013-04-12T09:32:44.270
> 
> 标签：sql, sql-server, full-text-indexing, containstable

我在自动完成下拉列表中使用存储过程来检索客户端列表。一些客户的名称中有一个“&”（和号）符号，例如“H&M”、“Marks & Spencers”，用户希望在“&”符号上进行搜索。

当我直接使用 & 符号时，它会将其用作分词器，并且不会选择具有 '&' 符号的列表。

有什么方法可以使用“&”搜索表并检索具有“&”符号的值。

希望我已经解释了我需要做什么。

感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:55:19.350

也许是这样的：

```
WHERE column LIKE REPLACE(@searchvalue, '&', '/&') ESCAPE '/' 
```

另一个想法：

```
DECLARE @randomstring @text

SET @randomstring ='randomstringthatwillneverbeusedforsearch'

WHERE REPLACE(column, @searchvalue, @randomstring) LIKE '%'+@randomstring+'%' 
```

虽然不知道性能问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:49:09.563

试试这个——

```
DECLARE @char CHAR(1)
SELECT @char = '&'

DECLARE @sql NVARCHAR(MAX)
SELECT @sql = (
    SELECT CHAR(13) + 
        'IF EXISTS(SELECT 1 FROM ' + 
            QUOTENAME(s.name) + '.' + QUOTENAME(o.name) + 
            ' WHERE' + b.cols + ')  
        SELECT table_name = ''[' + s.name + '].[' + o.name + ']'' ' + c.cols +' FROM ' + 
            QUOTENAME(s.name) + '.' + QUOTENAME(o.name) + 
            ' WHERE' + b.cols + ';' 
    FROM sys.objects o
    JOIN sys.schemas s ON o.[schema_id] = s.[schema_id]
    JOIN (
        SELECT DISTINCT p.[object_id] 
        FROM sys.partitions p
        WHERE p.[rows] > 0
    ) p ON p.[object_id] = o.[object_id]
    OUTER APPLY (
        SELECT cols = STUFF((
            SELECT 'OR CHARINDEX(''' + @char + ''', ' + QUOTENAME(c.name) + ') > 0 ' 
            FROM sys.columns c
            JOIN sys.types t ON c.user_type_id = t.user_type_id
            WHERE t.name IN ('char', 'nchar', 'ntext', 'nvarchar', 'text', 'varchar')
                AND c.[object_id] = o.[object_id]
            ORDER BY c.column_id
            FOR XML PATH(''), TYPE, ROOT).value('root[1]', 'NVARCHAR(MAX)'), 1, 2, '')
    ) b
    OUTER APPLY (
        SELECT cols = (
            SELECT ', ' + QUOTENAME(c.name) + ' ' 
            FROM sys.columns c
            JOIN sys.types t ON c.user_type_id = t.user_type_id
            WHERE t.name IN ('char', 'nchar', 'ntext', 'nvarchar', 'text', 'varchar')
                AND c.[object_id] = o.[object_id]
            ORDER BY c.column_id
            FOR XML PATH(''), TYPE, ROOT).value('root[1]', 'NVARCHAR(MAX)')
    ) c
    WHERE o.[type] = 'U'
        AND b.cols IS NOT NULL
    FOR XML PATH(''), TYPE, ROOT).value('root[1]', 'NVARCHAR(MAX)') 

    EXEC sys.sp_executesql @sql 
```

此查询在所有具有带有文本字段的表的数据库中搜索子字符串 -

```
DECLARE @phrase NVARCHAR(100)
SELECT @phrase = '&'

DECLARE 
      @db_name SYSNAME
    , @output NVARCHAR(200)

DECLARE db CURSOR READ_ONLY FAST_FORWARD LOCAL FOR 
    SELECT d.name
    FROM sys.databases d
    WHERE d.state_desc = 'ONLINE'
        AND d.name NOT IN ('tempdb', 'model', 'msdb', 'master')
            --AND d.name = 'your db name'
    ORDER BY d.name

OPEN db

FETCH NEXT FROM db INTO @db_name

WHILE @@FETCH_STATUS = 0 BEGIN

    SELECT @output = CONVERT(NVARCHAR(15), GETDATE(), 114) + ': Find in ' + QUOTENAME(@db_name) + ':'
    RAISERROR(@output, 0, 1) WITH NOWAIT

    DECLARE @tsql NVARCHAR(MAX) = '
    USE [' + @db_name + ']; 
    DECLARE @sql NVARCHAR(MAX)
    SELECT @sql = ''USE [' + @db_name + '];'' + (
        SELECT 
            CHAR(13) + 
                ''IF EXISTS(SELECT 1 FROM '' + 
                QUOTENAME(s.name) + ''.'' + QUOTENAME(o.name) + 
                '' WHERE'' + b.cols + '') PRINT ''''['' + 
                s.name + ''].['' + o.name + '']'''';'' 
        FROM sys.objects o
        JOIN sys.schemas s ON o.[schema_id] = s.[schema_id]
        JOIN (
            SELECT DISTINCT p.[object_id] 
            FROM sys.partitions p
            WHERE p.[rows] > 0
        ) p ON p.[object_id] = o.[object_id]
        OUTER APPLY (
            SELECT cols = STUFF((
                SELECT ''OR CHARINDEX(''''' + @phrase + ''''', '' + QUOTENAME(c.name) + '') > 0 '' 
                FROM sys.columns c
                JOIN sys.types t ON c.user_type_id = t.user_type_id
                WHERE t.name IN (''char'', ''nchar'', ''ntext'', ''nvarchar'', ''text'', ''varchar'')
                    AND c.[object_id] = o.[object_id]
                ORDER BY c.column_id
                FOR XML PATH(''''), TYPE, ROOT).value(''root[1]'', ''NVARCHAR(MAX)''), 1, 2, '''')
        ) b
        WHERE o.[type] = ''U''
            AND b.cols IS NOT NULL
        FOR XML PATH(''''), TYPE, ROOT).value(''root[1]'', ''NVARCHAR(MAX)'') 

        EXEC sys.sp_executesql @sql
    '

    EXEC sys.sp_executesql @tsql
    PRINT REPLICATE('-', 100) + CHAR(13)

    FETCH NEXT FROM db INTO @db_name

END

CLOSE db
DEALLOCATE db 
```

# elasticsearch - 如果字段不存在，则 Elasticsearch 更新 API

> ID：15967784
> 
> 赞同：6
> 
> 时间：2013-04-12T09:32:51.837
> 
> 标签：elasticsearch

upsert 的例子是：

```
curl -XPOST 'localhost:9200/test/type1/1/_update' -d '{
    "script" : "ctx._source.counter += count",
    "params" : {
        "count" : 4
    },
    "upsert" : {
        "counter" : 1
    }
}' 
```

如果该文档以前不存在，则该方法有效。

假设我想更新一个不一定存在但文档存在的字段。例如，文档可能还没有计数器字段。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-12T10:16:27.223

您可以使用更新脚本来检查字段是否存在：

```
curl -XPOST 'localhost:9200/test/type1/1/_update' -d '{
    "script" : "if( ctx._source.containsKey(\"counter\") ){ ctx._source.counter += count; } else { ctx._source.counter = 1; }",
    "params" : {
        "count" : 4
    },
    "upsert" : {
        "counter" : 1
    }
}' 
```

# javascript - 无法在 Firefox 中拖动按钮元素

> ID：15967786
> 
> 赞同：8
> 
> 时间：2013-04-12T09:32:54.850
> 
> 标签：javascript, firefox, drag-and-drop

我正在处理的项目有问题。它是一个 Web 应用程序，其界面部分存在于拖放元素之外。

问题是可拖动的 div 元素工作正常，但按钮元素不会在 Firefox 中进行拖动，但它们在 Chrome 中可以工作。我认为这可能与 Firefox 处理按钮已经存在的事件的方式有关，这可能与 Chrome 的处理方式不同。

我知道我可以改用 jQuery UI，但这个项目不允许我这样做。

这是我的问题的 jsfiddle：http: [//jsfiddle.net/MJN6c/6/](http://jsfiddle.net/MJN6c/6/)

有谁知道如何让拖动事件在 Firefox 中的按钮上触发？

编码：

```
var stage = document.querySelector('#drop');
var btnsAni = document.querySelectorAll('.btn-ani');

[].forEach.call(btnsAni, function (btn) {
    btn.addEventListener('dragstart', dragStart, false);
    btn.addEventListener('dragend', dragEnd, false);
});

stage.addEventListener('dragenter', dragEnter, false);
stage.addEventListener('dragleave', dragLeave, false);
stage.addEventListener('dragover', dragOver, false);
stage.addEventListener('drop', dragDrop, false);

function dragStart(e) {
    if (e.stopPropagation) e.stopPropagation();
    e.dataTransfer.effectAllowed = 'copy';
    e.dataTransfer.setData('Text', this.id);

    return false;
}

function dragEnd(e) {
    e.preventDefault();
    if (e.stopPropagation) e.stopPropagation();

    return false;
}

function dragEnter(e) {
    e.preventDefault();
    if (e.stopPropagation) e.stopPropagation();

    return false;
}

function dragOver(e) {
    e.preventDefault();
    if (e.stopPropagation) e.stopPropagation();
    e.dataTransfer.dropEffect = 'copy';

    return false;
}

function dragLeave(e) {
    e.preventDefault();
    if (e.stopPropagation) e.stopPropagation();

    return false;
}

function dragDrop(e) {
    e.preventDefault();
    if (e.stopPropagation) e.stopPropagation();

    alert("Dropped!");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-29T00:15:56.907

这看起来像 FF 的错误，[https:](https://bugzilla.mozilla.org/show_bug.cgi?id=568313) //bugzilla.mozilla.org/show_bug.cgi?id=568313 。
顺便说一句，默认情况下，所有 XUL 元素都是“可拖动的”。 [https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Drag_operations#draggableattribute](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Drag_operations#draggableattribute)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-10T09:23:16.470

简而言之：这是 Firefox 的问题，而不是您的代码。拖动事件不会在按钮上触发，而是在 div 上触发。

**我可以通过几个步骤来处理这个问题：**

1）为按钮添加一个包装器

2) 将 ::after 伪元素添加到包装器中

3) 拉伸 ::after 以填充父级：

```
.wrapper {
   position: relative;

   &:after {
    content: '';
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    position: absolute;
  }
} 
```

这样 ::after 将超出正常流程，并且包装器的大小将由按钮的大小（通常）计算。如果按钮没有定义 z-index，::after 将自动放置在按钮的顶部（在 z 轴上）。这将导致在包装器上触发拖动事件，而不是按钮。并且问题解决了！

您可能希望在添加包装器后修复一些样式（例如，您必须将 :hover 和 :focus 伪类移动到包装器）。

# javascript - 保存在 Rails 中的 DB js 生成的字段中

> ID：15967788
> 
> 赞同：0
> 
> 时间：2013-04-12T09:33:05.270
> 
> 标签：javascript, ruby-on-rails, ruby

所以我在 Rails 中有一个表单，非常基础。但我决定添加一些功能。一点上下文。
你选择你是男人还是女人，然后表单生成一些字段。我有一个在 V1 中已经存在的字段，但是当我使用 javascript 生成它时，它没有保存在 DB 中。我真的不明白为什么。这是一些代码。

# 控制器

```
def create
  @pokemon = Pokemon.new(params[:pokefuck])

  respond_to do |format|
    if @pokemon.save
      format.html { redirect_to '/pokemons', notice: 'pokemon was successfully created.' }
      format.json { render json: @pokemon, status: :created, location: @pokemon }
    else
      format.html { render action: "new" }
      format.json { render json: @pokemon.errors, status: :unprocessable_entity }
    end
  end
end 
```

# 看法

有效的原始字段

```
<%= f.select "size", options_for_select(size, @pokemon.size) %> 
```

大小是一个哈希

创建了一个，不起作用

```
var s = document.createElement("select");
s.name = "po";
s.id = "pokemon_size";
sex.appendChild(s);
for(i in size) {
  document.formName.po.options[i] = new Option(size[i], size[i]);
} 
```

我想这是因为我的新元素的名称不是 pokemon[size]，但是当我使用它时，行 document.formName.pokemon[size].options[i] 不再起作用了。

所以我有点挣扎，看看我怎么能做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:40:42.507

该字段的名称需要将其放入您的 params 哈希中`pokefuck`。

`pokefuck[size]`应该是表单元素的名称。将表单元素附加到您提交的表单元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:02:24.893

从您的控制器代码中假设您的表单字段被命名为“pokefuck”，那么您需要将您的选择名称命名为“pokefuck [size]”，然后在表单的元素集合中引用该名称：

```
var s = document.createElement("select");
s.name = "pokefuck[size]";
s.id = "pokemon_size";
sex.appendChild(s);
for(i in size) {
  document.formName.elements['pokefuck[size]'].options[i] = new Option(size[i], size[i]);
} 
```

# c++ - 输入文件中的数组

> ID：15967790
> 
> 赞同：1
> 
> 时间：2013-04-12T09:33:08.627
> 
> 标签：c++, arrays, parsing

我是 C++ 的初学者，现在我需要处理来自输入文件的数据，该文件有很多行，如下所示：

> 2012019109 Proadan Legeaf Coaa 女 65

这些是学号、姓名（2 或 3 个字）、性别和考试成绩。

我必须为这些属性中的每一个创建一个数组。此外，我不知道输入文件可能包含多少行（最多 100,000 行），但输入文件中的第一个数字将是该文件中的行数。

一旦我设置了一个数组，我需要实现一个函数来按 Name 的字母字符串顺序（升序）对记录进行排序，然后将它们放入输出文件中。

我尝试按以下方式对第一部分（设置数组）进行操作，但这似乎是错误的：

```
ifstream fin;
ofstream fout;

fin.open("input.txt");
fout.open("output.txt");

if (fin.fail()) {
    cout << "Fail to open inout.txt" << endl;
    exit(1);
}

int x; 
fin >> x; //this is the first number within the input text file, indicating the number of lines in the file. I would use this to determine the size of the arrays:

int UID [x];
string name [x];
string gender [x];
int score [x];

int y = 0;

// In the following part, I am trying to extract the information into the different arrays, one by one, increasing the number of the element from 0 up till x. Complier error says no matching function for call for the UID and score lines.

while (y!=x, y++) {
    getline(fin, UID [y], '\t');
    getline(fin, name [y], '\t');
    getline(fin, gender [y], '\t');
    getline(fin, score [y], '\t');
    break;
    }` 
```

一旦我有了这些数组，我只需要找到一种按字母顺序排序的方法，但即使有了这些第一步，我也被卡住了。正如您可能知道的那样，我对编程知之甚少，希望能提供任何帮助！

编辑：感谢您到目前为止的评论和帮助，我非常感谢您的时间。我的问题是，由于这是在学校的项目工作，我需要使用数组（出于某种莫名其妙的原因）。

仅供参考，在输入文件中，数字/姓名/性别/分数由 TAB（'/t'）分隔。

有什么办法可以解决上述问题，同时坚持使用数组而不使用向量或地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:11:43.880

问题是**您正在尝试读取 int 内的字符串**：

```
getline(fin, UID [y], '\t'); 
```

UID[y] 是一个 int 而 getline 只能存储到一个字符串中。

因此，您必须首先将其存储在缓冲区字符串中，然后使用[atoi](http://www.cplusplus.com/reference/cstdlib/atoi/?kw=atoi)将其转换为 int ：

```
string UID_buffer;
getline(fin, UID_buffer, '\t'); 
UID[y] = atoi(UID_buffer.c_str()); 
```

但是还有另一个问题，您的**UID 实际上太大而无法放入有符号的 int**中，您可以尝试将它们存储在无符号的 32 位或 64 位中，但将它们存储为字符串可能更简单。

[OOP](http://en.wikipedia.org/wiki/Object-oriented_programming)方法建议您使用**一个类**来存储每个对象，而不是使用多个数组：

```
struct Person {
    string UID;
    string name;
    string gender;
    int score;
}; 
```

然后**只创建一个数组**：

```
Person* database = new Person[x]; 
```

您还可以创建一个 C++ 可调整大小的容器，例如[vector](http://www.cplusplus.com/reference/vector/vector/?kw=vector)，对它进行排序会容易得多：

```
vector<Person> database; 
```

另请注意，您应该使用**for 循环而不是 while**。

对于循环代码，您可以使用 getline 先读取一行，从中创建一个[字符串](http://www.cplusplus.com/reference/sstream/stringstream/?kw=stringstream)流，然后在此流上使用 getline 读取该行的每个元素，如下所示：

```
for(int y = 0, y < x; y++) {

    getline(fin, line); 
    stringstream linestream(line);

    Person newPerson;

    getline(linestream, newPerson.UID, '\t'); 
    getline(linestream, newPerson.name, '\t'); 
    getline(linestream, newPerson.gender, '\t'); 

    string buffer;
    getline(linestream, buffer, '\t'); 
    newPerson.score = atoi(buffer.c_str());

    database.push_back(newPerson);
} 
```

要对您将获得的向量进行排序，您可以使用 STL 中的[排序](http://www.cplusplus.com/reference/algorithm/sort/?kw=sort)算法，它使用类的“<”运算符，因此您只需重载此运算符并在向量上使用排序。

```
sort(database.begin(), database.end()); 
```

使用您这样定义的比较运算符：

```
bool operator< (const Person & p1, const Person& p2)
{
    //just an example
    return p1.UID.compare(p2.UID) < 0;
} 
```

[您可以在此处](http://www.learncpp.com/cpp-tutorial/94-overloading-the-comparison-operators/)了解有关重载运算符的更多信息。

**编辑**

如果您不能使用向量，那并不会真正改变循环代码（只需将 newPerson 替换为相应的已分配的 Person 对象（类似于数据库 [x]）。

现在对于排序，您仍然可以对 STL 使用排序算法，它应该适用于迭代器，但它可以适用于指针。这不是一个很好的解决方案，它可能不是你应该做的。

否则你可以实现自己的排序算法，这真的是一个[教科书案例](http://www.cplusplus.com/faq/sequences/sequencing/sort-algorithms/)。

请注意，如果您不使用结构并继续使用多个数组，则不能使用 STL 排序算法，并且排序算法中的数据交换将比必要的复杂得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:05:04.023

好吧，首先，使用：

```
for (int y=0 ; y<x, y++) 
```

但`while` 你可以使用矢量或地图让你的生活更轻松。我知道，给你完整的代码不是一个好主意。自己试试就更好了。但我希望你有动力学习 STL。这真的很容易。（你找到更有效的方法）

例如：

```
int x; 
fin >> x; //this is the first number within ...    

std::multimap<std::string,std::string> rows;
std::string row;
while(getline(fin, row))
{
     std::stringstream r(row) ;
     std::string name;
     getline(row, name, '\t'); // ID
     getline(row, name, '\t'); // name
     rows.insert(std::make_pair(name,row));
}

fout << x << std::endl;
for (const auto& r : rows)
  fout << r << std::endl;

if (x!=rows.size())   
   //.... error? 
```

没有地图？...

```
struct row{string ID, name, rest;}; 
```

...

```
fout << x << std::endl;
row *rows=new row[x];
for(int i=0;i<x;++i)
{
    getline(fin, rows[i].ID,   '\t'); // ID
    getline(fin, rows[i].name, '\t'); // name
    getline(fin, rows[i].rest      ); 
}
  std::sort(rows,rows+x,[](const row& r1, const row& r2) 
                              {return r1.name<r2.name;}  );
  for( i=0;i<x;++i)
     fout<<rows[i].ID<<'\t'<< rows[i].name<<'\t'<< rows[i].rest<<endl; 
```

没有拉姆达斯？[这里有一个完整的例子](http://ideone.com/IQ7JB6)

```
#include <string>
#include <algorithm>
#include <iostream>  

using namespace std;
struct row{string ID, name, rest;};

bool operator < (const row& r1, const row& r2) 
{  return r1.name<r2.name;} 

ostream &operator<<(ostream&o, const row&r)
{  return o<<r.ID<<'\t'<< r.name<<'\t'<< r.rest<<endl; }  

int main()
{ int x=2;
  row rows[]={{"1","BB","r1"},{"2","AA","r2"}};//=new row[x];
  std::sort(rows,rows+x);
  for(int i=0;i<x;++i)
    cout<<rows[i]; 
} 
```

[或者在这里：（](http://ideone.com/mXlWcH)我希望你不要简单地复制代码，而是去[阅读参考资料](http://en.cppreference.com/w/)并享受学习标准c++库的使用）

```
#include <string>
#include <algorithm>
#include <iostream>  
#include <sstream> 

using namespace std;
struct row{string ID, name, rest;};

bool operator < (const row& r1, const row& r2) 
{  return r1.name<r2.name;} 

ostream &operator<<(ostream&o, const row&r)
{  return o<<r.ID<<'\t'<< r.name<<'\t'<< r.rest <<endl; }  

int main()
{ 
  stringstream fin,fout;
  fin<< "5"  << endl;
  fin<< "2012019874\tZooadan Legeaf Coaa\tFemale\t65"<<endl;
  fin<< "1111090909\tZuilia Perez\tFemale\t701"      <<endl;
  fin<< "2012019109\tProadan Legeaf Coaa\tFemale\t65"<<endl;
  fin<< "2345019176\tTrroadan Legeaf\tFemale\t98"    <<endl;
  fin<< "2012019109\tAAroadan Legeaf Coaa\tFemale\t65"<<endl;

  int x; 
  fin >> x; //this is the first number within ...   
  row *rows=new row[x];
  for(int i=0;i<x;++i)
  {
    getline(fin, rows[i].ID,   '\t'); // ID
    getline(fin, rows[i].name, '\t'); // name
    getline(fin, rows[i].rest      ); 
  }
  std::sort(rows,rows+x);
  fout << x << std::endl;
  for(int i=0;i<x;++i)
      fout<<rows[i]; 
  delete []rows;
  cout<<"Input:\n"<< fin.str()<<"\nOutput:\n"<< fout.str();     
} 
```

# matlab - 如何将二进制图像数据发送到自组织地图

> ID：15967792
> 
> 赞同：0
> 
> 时间：2013-04-12T09:33:16.267
> 
> 标签：matlab, image-processing, neural-network, som

我已经拍摄了带有字符的扫描图像，裁剪了字符并将它们存储在矩阵中。

```
X={}; 
Y={};
for cnt = 1:50
    rectangle('position',box(:,cnt),'edgecolor','r');
    X{cnt}=imcrop(I, box(:,cnt));
    Y{cnt}=im2bw(X{cnt});
 end 
```

在这里，box 有矩形的坐标。我想使用 Y 作为输入来`newsom`创建自组织地图。但我得到错误：

> 净=newsom(Y', [10,1])
> ??? 错误使用 ==> cat
> CAT 参数尺寸不一致。
> 
> ==> cell2mat 在 89
> m{n} = cat(1,c{:,n}) 处出错；
> 
> 如果 isa(p,'cell'), p = cell2mat(p); 则==> newsom>new_6p0 在 72 处出错；结尾
> 
> ==> newsom 在 58 处出现错误
> net = new_6p0(varargin{:});

形成的图像具有不同的尺寸（12x6、15x12 等）。谁能告诉我如何纠正我的方法以`newsom`获得 50 个二进制图像的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:17:15.033

为了使用`newsom`，您需要所有输入具有相同的大小。您可以使用`imresize`

```
n = 50;
sz = [20 20]; this would be the size of ALL inputs
X = cell(1,n); % pre-allocate outputs, this is good practice
Y = cell(1,n);
for cnt = 1:50
    rectangle('position',box(:,cnt),'edgecolor','r');
    X{cnt}=imcrop(I, box(:,cnt));
    newSize = imresize( X{cnt}, sz, 'bicubic' ); % resize to the predefined size
    Y{cnt}=im2bw(newSize); % do binarization AFTER resizing!
end 
```

# java - org.drools.reteoo.ReteooBuilder.removeRule 处的 NullPointerException（ReteooBuilder.java:252）

> ID：15967794
> 
> 赞同：1
> 
> 时间：2013-04-12T09:33:31.613
> 
> 标签：java, nullpointerexception, drools

我正在使用 drools 专家 5.4.0.Final，用于动态创建规则 DRL、将其添加到知识库并触发规则的场景。我试图稍后禁用/启用规则（在添加 DRL 之后）。为此，我试图从知识库中删除规则以进行禁用，如下所示：

```
 KnowledgeBase sessionBase = kSession.getKnowledgeBase();
    sessionBase.removeRule(RULE_PACKAGE_NAME, name); 
```

这是第一次正常工作。

然后，我通过再次添加 DRL 来启用规则，如下所示：

```
 kBuilder.add(ResourceFactory.newByteArrayResource(rule.toDrl().getBytes()),
                ResourceType.DRL);
    kBase.addKnowledgePackages(kBuilder.getKnowledgePackages()); 
```

然后，当我再次禁用它时，我得到以下异常：

```
 Caused by: java.lang.NullPointerException
at org.drools.reteoo.ReteooBuilder.removeRule(ReteooBuilder.java:259)
at org.drools.reteoo.ReteooRuleBase.removeRule(ReteooRuleBase.java:459)
at org.drools.common.AbstractRuleBase.removeRule(AbstractRuleBase.java:1107)
at org.drools.common.AbstractRuleBase.removeRule(AbstractRuleBase.java:1085)
at org.drools.impl.KnowledgeBaseImpl.removeRule(KnowledgeBaseImpl.java:208)
    ... 
```

显然，这个问题已经在早期版本的 drools 中得到解决。任何帮助深表感谢。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:31:45.797

我的坏..我的申请有问题。我还在 5.4.0.Final 上，自从每次添加新规则时我开始在知识构建器中记录规则名称以来，NPE 就消失了！谢谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:11:41.067

尝试 5.5.1-SNAPSHOT，他们对规则删除算法进行了相当大的更改（它现在是迭代的，以前是递归的）。这可能已经解决了问题。

编辑：**不在**5.5.0.Final 中，仅在 5.5.1-SNAPSHOT

# ormlite - 查询对象具有带有条件的外部集合

> ID：15967798
> 
> 赞同：0
> 
> 时间：2013-04-12T09:33:38.580
> 
> 标签：ormlite, foreign-collection

我正在学习使用你的 Android ORMLite 框架。

但是我遇到了一个问题，我尝试了很多方法来解决但都失败了。

例如。我有 2 个数据库类：

```
@DatabaseTable(tableName = "Subject")
public class Subject {
        @DatabaseField(columnName = "id", id = true)
        protected String id;

        @DatabaseField(columnName = "deleteFlag", canBeNull = false, defaultValue = "0")
        protected boolean deleteFlag = false;

        @DatabaseField(columnName = "name", canBeNull = false)
        private String name;

        @ForeignCollectionField(eager = true, maxEagerLevel = 3)
        private Collection<Student> students;
        ...
}

@DatabaseTable(tableName = "Student")
public class Student {
        @DatabaseField(columnName = "id", id = true)
        protected String id;

        @DatabaseField(columnName = "deleteFlag", canBeNull = false, defaultValue = "0")
        protected boolean deleteFlag = false;

        @DatabaseField(columnName = "firstName", canBeNull = false)
        private String firstName;

        @DatabaseField(columnName = "lastName", canBeNull = true)
        private String lastName;

        @DatabaseField(columnName = "subjectId", canBeNull = false, foreign = true, foreignColumnName = "id")
        private Subject subject;

        ...
} 
```

它要求数据库中的记录不被删除，它只是由deleteFlag列标记。

现在，我尝试查询所有具有“deleteFlag = false”的主题。每个科目都有“deleteFlag = false”的学生名单。

有没有办法使用 SubjectDao 查询？？？

或者我必须做两个步骤：

1.  使用 SubjectDao 查询所有具有“deleteFlag = false”的主题；

2.  在科目列表中循环，使用 StudentDao 查询该科目所有具有“deleteFlag = false”的学生。然后将学生列表设置为主题对象。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:39:55.800

我对你在这里真正想要完成什么感到有点困惑。将来在详细描述问题之前要小心给出答案。

您对我之前的回答（如下）的评论表明您希望`Collection<Student> students`只显示没有将该`delete`字段设置为的学生`false`。目前[ORMLite](http://ormlite.com/)不支持对外部集合的自定义查询。您的代码将不得不忽略已删除的学生。

一种选择是将学生移动到一张`DeletedStudents`桌子上，而不是设置一个布尔值。

* * *

如果您尝试仅删除所有`Subject`打开了 delete 标志的 s，然后所有`Student`s 将删除标志，那么您可以使用[`DeleteBuilder`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/stmt/DeleteBuilder.html). 您不必担心更新`Subject`学生的收藏。当您重新查询 a`Subject`时，它将反映更改。

相反，如果你想做一些更复杂的事情，比如删除所有`Subjects`没有学生的，那么你将需要使用[`QueryBuilder.join(...)`你](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/stmt/QueryBuilder.html#join%28com.j256.ormlite.stmt.QueryBuilder%29)的`DeleteBuilder`.

# iphone - 用移动的 UIImageview 制作一个 opengl 游戏，但我可以让它停在屏幕边缘

> ID：15967800
> 
> 赞同：0
> 
> 时间：2013-04-12T09:33:42.147
> 
> 标签：iphone, ios, objective-c, xcode, opengl-es

嗨，标题预先总结了它，它正在使用加速度计，但它一直在屏幕外，我 15 岁，我在试图让它停在边缘时遇到了很多麻烦。这是我的视图 controller.m 文件代码。

```
 #import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize person, delta;

- (void)viewDidLoad
{
    UIAccelerometer *accel =[UIAccelerometer sharedAccelerometer];
    accel.delegate = self;
    accel.updateInterval = 1.0f / 60.0f;
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

}
-(void)accelerometer:(UIAccelerometer *)accelerometer
       didAccelerate:(UIAcceleration *)acceleration{
    NSLog(@"x : %g", acceleration.x);
    NSLog(@"y : %g", acceleration.y);
    NSLog(@"z : %g", acceleration.z);

    delta.x = acceleration.y *50;
    //  delta.x = acceleration.x *8;

    person.center = CGPointMake(person.center.x + delta.x,person.center.y + delta.y );
     }

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:47:44.377

更新后`person.center`，您需要将其限制在视图的框架内，否则它将离开屏幕。

为了让您开始，您可以通过以下方式阻止该人离开视图的*左*边缘：

```
person.center = CGPointMake(person.center.x + delta.x,person.center.y + delta.y );
// add this
CGFloat leftOfWorld = 0.0f;
CGFloat minCenterX = leftOfWorld + (person.bounds.size.width / 2.0f);
person.center = CGPointMake(MAX(minCenterX, person.center.x), person.center.y); 
```

`center.x`当距离左边缘 (width / 2)时，人在屏幕的左侧。这是我们的最低要求。然后我们在最小值之间取较大的值，`center.x`所以如果`center.x`低于这个最小值，我们就改变它。

对于屏幕的其他边缘，您可能需要类似的逻辑。您需要使用`self.view.width`和计算屏幕的右边缘和下边缘`self.view.height`。

# objective-c - 如何向 NSSpeechSynthesizer 添加新的语音词典？

> ID：15967801
> 
> 赞同：2
> 
> 时间：2013-04-12T09:33:42.677
> 
> 标签：objective-c, macos, cocoa, text-to-speech

我一直在尝试为我的应用程序使用的 NSSpeechSynthesizer 派生语音引擎设置自定义发音。但是，我一直遇到问题。

我正在使用 NSSpeechSynthesizer 类参考中指定的键创建一个新字典以添加到我的语音引擎中，但是文档非常混乱并且缺少一些重要信息。相关部分标题为“语音词典属性键”，链接如下：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSSpeechSynthesizer_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSSpeechSynthesizer_Class/Reference/Reference.html)

我对此有点困惑，因为 NSSpeechDictionaryPronunciations 键似乎包含与 NSSpeechDictionaryEntryPhonemes 和 NSSpeechDictionaryEntrySpelling 相同的信息。也没有关于是否所有键都是必需的，或者它们是否是可选的，每个键的有效数据是什么，或者如何从已经初始化的语音引擎中获取现有值的信息。我也找不到有关何时可以添加新语音词典的任何详细信息。

根据我从本文档收集的信息，我假设语音字典是每个键都是可选的，并附加到引擎已经使用的任何数据，新添加的字典优先于现有数据是冲突。我定义了一个仅包含 NSSpeechDictionaryPronunciations 键的字典，其值是包含键 NSSpeechDictionaryEntrySpelling 和 NSSpeechDictionaryEntryPhonemes 的 NSDictionary 对象数组，如文档中所述。当我调用 -addSpeechDictionary: 时，语音引擎已经初始化。

但是，这会引发错误。抛出的实际错误代码取决于我选择的声音，但它总是抛出错误，并且定义的发音无效。

我只能假设我做错了什么，但是由于我无法在任何地方找到有关如何使用此功能的任何信息（除了非常模糊的文档），我有点卡住了。有没有人对此功能有任何经验并且可以为我指明正确的方向？或者甚至向我指出一本书的方向或更详细地涵盖这一点的东西？谷歌一直没有帮助...

# c++ - std::list 抱怨缺少第二个模板参数（分配器）

> ID：15967804
> 
> 赞同：1
> 
> 时间：2013-04-12T09:33:51.687
> 
> 标签：c++, c++11, visual-studio-2012, stl

我目前正在尝试使用 Microsoft Visual Studio 2012 编译一个相当大的项目。我发现它与旧版本一起编译得很好，但是在这个版本中，无论 a`std::list`仅与一个模板参数一起使用，我都会遇到错误。

```
error C2976: 'std::list' : too few template arguments 
```

在所有其他项目中以及在创建新项目时，我可以`std::list`很好地使用默认分配器，所以我猜它可能必须对 MSVC 2012 做一些事情，但我不知道那可能是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T09:57:01.447

创建 SSCCE 正是问题所在：这是一个巨大的项目，我无法在新项目中重现该问题。

`_VARIADIC_MAX=10`在定义了将错误消息变成了哪个之后，问题变得更加明显`error C2027: use of undefined type 'std::list'`。

事实证明，有包含 for `map`，`set`以及一些其他包含前向声明的标头：在几个地方`std::list`添加缺失修复了它！`#include <list>`

我不确定为什么这会在其他平台和 MSVC10 上编译，但可能这些系统中的 STL 标头结构不同。

还要感谢@kassak 的提示，它确实有帮助！

# javascript - 骨干视图继承共享属性

> ID：15967811
> 
> 赞同：2
> 
> 时间：2013-04-12T09:34:07.223
> 
> 标签：javascript, backbone.js

我正在扩展 Backbone 视图，例如：

```
var baseView = Backbone.View.extend({
    fruits : [],
    listFruits : function() {
        console.log(this.fruits);
    }
});

var firstView = baseView.extend({
    initialize : function() {
        this.fruits.push("apple");
    }
});

var secondView = baseView.extend({
    initialize : function() {
        this.fruits.push("pear");
    }
});

var firstViewInstance = new firstView(); // ["apple", "pear"]
var secondViewInstance = new secondView(); // ["apple", "pear"]

firstViewInstance.listFruits();
secondViewInstance.listFruits(); 
```

在我看来，`firstViewInstance`应该`secondViewInstance`是完全分开的，但它们显然是相关的。如何实现两个独立的视图对象，它们都继承自一个共同的基础，但*不*共享数据？

编辑：根据下面的答案，我在[http://jsfiddle.net/qZ7SU/](http://jsfiddle.net/qZ7SU/)有一个更新的小提琴，这似乎解决了这个问题。我仍然不完全清楚发生了什么，但我认为明确附加`fruits[]`到`this`，将其创建为实例变量，而不是将其附加到原型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T09:53:25.367

这是因为对原始`fruits`-property 的引用是被复制到子视图的那个。见[下划线.js`extend`](http://underscorejs.org/docs/underscore.html#section-76)

```
_.extend = function(obj) {
  each(slice.call(arguments, 1), function(source) {
    if (source) {
      for (var prop in source) {
        obj[prop] = source[prop];
      }
    }
  });
  return obj;
}; 
```

要从公共基础继承，但不共享数据，您需要在初始化函数中初始化非共享属性。

```
var baseView = Backbone.View.extend({
  initialize: function() {
    this._initializeBase();
  },

  _initializeBase: function() {
    this.fruits = [];
  },

  listFruits : function() {
    console.log(this.fruits);
  }
});

var firstView = baseView.extend({
  initialize : function() {
    this._initializeBase();
    this.fruits.push("apple");
  }
}); 
```

这样，属性将在初始化时添加到对象中，并且不会共享数据。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T18:53:59.773

我写了一篇更详细的[博客文章](http://www.erichynds.com/blog/backbone-and-inheritance)，但最简单的方法是提供一个自定义构造函数，确保`fruits`在每个子视图的原型上创建，而不是在`baseView.prototype`所有子视图继承的原型上创建。

```
var baseView = Backbone.View.extend({
  constructor: function() {
    this.fruits = [];
    Backbone.View.apply(this, arguments);
  },
  listFruits : function() {
    console.log(this.fruits);
  }
});

var firstView = baseView.extend({
    initialize : function() {
        this.fruits.push("apple");
    }
});

var secondView = baseView.extend({
    initialize : function() {
        this.fruits.push("pear");
    }
});

var firstViewInstance = new firstView(); // ["apple"]
var secondViewInstance = new secondView(); // ["pear"] 
```

# c# - 更改单元格中文本框的值后单击按钮更新gridview和数据库

> ID：15967812
> 
> 赞同：0
> 
> 时间：2013-04-12T09:34:10.843
> 
> 标签：c#, asp.net

我是一只新蜜蜂，我需要关于以下网格视图问题的帮助。我有一个gridview，它的所有单元格都是文本框，外面有一个按钮，单击它必须将数据保存到数据库并更新gridview（对文本框的更改必须保存在数据库中，并且应该刷新网格更改数据）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:47:42.473

An easy way to do above is to make a function i.e. loadGrid() that will populate the grid, and you can call it anywhere like in button_click event or it may be the Text_Validated event.

And try to explain your question and decorate it with your code.

Welcome to Stackoverflow !

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:47:47.883

Computers don't assume anything, you have to tell it exactly what you need it to do.

You'll need to have a function somewhere in your program that takes arguments and then passes those arguments as parameters to a database. When you click your button, read the values from your gridview cell text boxes, and pass those values as arguments to your function.

Code might look something like:

```
public void UpdateUser(int userId, string userName, string userDescription){
   // code to update database here
}

public void button1_OnClick(object obj, EventArguments e)
{
     UpdateUser(txtBoxUserID.Content, txtBoxNewUsername.Content, txtBoxUserDescription.Content);
     UpdateDatagrid();
} 
```

That code isn't going to work, it's an example off the top of my head. Although the principle behind it is how you need to approach your problem. Hope that helps.

# java - HQL - 为什么删除需要刷新才能工作而不仅仅是提交

> ID：15967815
> 
> 赞同：0
> 
> 时间：2013-04-12T09:34:14.900
> 
> 标签：java, mysql, hibernate, hql, dao

为什么在管理 DB Hibernate 时需要刷新才能正确删除对象而不是提交（就像选择或插入一样）？

谢谢

# c# - SmoApplication.EnumAvailableSqlServers 不检索本地服务器实例

> ID：15967817
> 
> 赞同：2
> 
> 时间：2013-04-12T09:34:15.520
> 
> 标签：c#, networking, sql-server-2012

我在本地系统上使用 windows-7 Sp-1 和 Sql server 2012。以及服务器系统上的 Windows Server 2008 R2 Sp-1 和 Sql server 2012。当我使用

## 代码

```
SmoApplication.EnumAvailableSqlServers(); 
```

当时它只显示网络实例。它不显示任何本地实例。当我使用

## 代码

```
SmoApplication.EnumAvailableSqlServers(true); 
```

然后它返回空白数据表。在这种情况下该怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:45:52.407

我不时在不同的计算机上遇到同样的问题，但我没有找到任何解释。看起来问题与防火墙、UDP 数据包和本地计算机上的 SQL Server Browser 服务有关（AFAIK，`SmoApplication.EnumAvailableSqlServers`即使对于本地实例也使用 SQL Server Browser，而 SQL Server Browser 反过来使用广播数据包来发现 SQL Server 服务。

我实施的解决方法使用[`ManagedComputer`](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.wmi.managedcomputer.aspx)了 SMO 中的类：

```
 private const String defaultMsSqlInstanceName = "MSSQLSERVER";

    public String[] GetLocalSqlServerInstances()
    {
        return new ManagedComputer()
            .ServerInstances
            .Cast<ServerInstance>()
            .Select(instance => String.IsNullOrEmpty(instance.Name) || instance.Name == defaultMsSqlInstanceName ? 
                instance.Parent.Name : Path.Combine(instance.Parent.Name, instance.Name))
            .ToArray();
    } 
```

此外，它的工作速度比`SmoApplication.EnumAvailableSqlServers(true)`.
希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T14:56:18.457

我最近遇到了类似的问题。我找不到任何已安装的 SQL Server 本地实例，因此我打开了 SQL Server Browser。这似乎解决了我的问题。我使用的代码如下所示：

```
 ServiceController oController = new ServiceController("SQL Server Browser");
            if (oController.Status.Equals(ServiceControllerStatus.Stopped) || oController.Status.Equals(ServiceControllerStatus.Paused))
                oController.Start(); 
```

此代码使用 System.ServiceProcess 程序集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-23T23:19:14.993

从开始菜单转到服务并将Sql Server（MSSQLSERVER），Sql Server Agmnt（MSSQLSERVER）和Sql Server Browser设置为启动模式，并在所有这些中选择启动类型自动

# facebook - facebook 访问令牌已过期

> ID：15967821
> 
> 赞同：8
> 
> 时间：2013-04-12T09:34:35.030
> 
> 标签：facebook, access-token, facebook-access-token

根据[facebook 说明（场景 4）](https://developers.facebook.com/docs/roadmap/completed-changes/offline-access-removal/)，我正在使用以下 URL

```
https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=CLIENT_SECRET& grant_type=fb_exchange_token&fb_exchange_token=OLD_ACCESS_TOKEN 
```

获取新的访问令牌，但我得到以下信息：

> { "error": { "message": "验证访问令牌时出错：会话已在 unix 时间 1365257820 过期。当前的 unix 时间是 1365759029。", "type": "OAuthException", "code": 190, "error_subcode" : 463 } }

不起作用。任何帮助表示赞赏。

**编辑：明白了！像这样工作**

如果访问令牌过期，请先在浏览器上运行以下 php 脚本，然后将其存储在服务器上

```
<?php
  $app_id = "your app id";
  $app_secret = "your app secret"; 
  $my_url = "http://apps.facebook.com/your_app_name";

  // known valid access token stored in a database 
  $access_token = "your old access token";

  $code = $_REQUEST["code"];

  // If we get a code, it means that we have re-authed the user 
  //and can get a valid access_token. 
  if (isset($code)) {
    $token_url="https://graph.facebook.com/oauth/access_token?client_id="
      . $app_id . "&redirect_uri=" . urlencode($my_url) 
      . "&client_secret=" . $app_secret 
      . "&code=" . $code . "&display=popup";
    $response = file_get_contents($token_url);
    $params = null;
    parse_str($response, $params);
    $access_token = $params['access_token'];
  }

  // Attempt to query the graph:
  $graph_url = "https://graph.facebook.com/me?"
    . "access_token=" . $access_token;
  $response = curl_get_file_contents($graph_url);
  $decoded_response = json_decode($response);

  //Check for errors 
  if ($decoded_response->error) {
  // check to see if this is an oAuth error:
    if ($decoded_response->error->type== "OAuthException") {
      // Retrieving a valid access token. 
      $dialog_url= "https://www.facebook.com/dialog/oauth?"
        . "client_id=" . $app_id 
        . "&redirect_uri=" . urlencode($my_url);
      echo("<script> top.location.href='" . $dialog_url 
      . "'</script>");
    }
    else {
      echo "other error has happened";
    }
  } 
  else {
  // success
    echo("success" . $decoded_response->name);
    echo($access_token);
  }

  // note this wrapper function exists in order to circumvent PHP’s 
  //strict obeying of HTTP error codes.  In this case, Facebook 
  //returns error code 400 which PHP obeys and wipes out 
  //the response.
  function curl_get_file_contents($URL) {
    $c = curl_init();
    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($c, CURLOPT_URL, $URL);
    $contents = curl_exec($c);
    $err  = curl_getinfo($c,CURLINFO_HTTP_CODE);
    curl_close($c);
    if ($contents) return $contents;
    else return FALSE;
  }
?> 
```

上面的脚本会在浏览器上为您提供一个如下所示的 URL

[https://graph.facebook.com/oauth/access_token?code=](https://graph.facebook.com/oauth/access_token?code=) …</p>

然后在 code= 之后获取字符串（应该是这样的：AQCn41Svv5DbWrnFY0Wf.....YbNm_yz2rE#_ ）并将其粘贴到 code= 下面的 URL 并在浏览器上运行下面的 URL

> [https://graph.facebook.com/oauth/access_token?client_id=App_Id&redirect_uri=http://apps.facebook.com/poemsoflove&client_secret=App_Secret&code=AQCn41Svv5DbWrnFY0Wf.....YbNm_yz2rE#_&display=popup](https://graph.facebook.com/oauth/access_token?client_id=App_Id&redirect_uri=http://apps.facebook.com/poemsoflove&client_secret=App_Secret&code=AQCn41Svv5DbWrnFY0Wf.....YbNm_yz2rE#_&display=popup)

您将收到以下响应，这是 60 天的新访问令牌

```
access_token=<Extended_Access_Token>&expires=5180130 
```

将 access_token= 后面的字符串复制并粘贴到服务器上的脚本中，该脚本会在您的页面上发布新帖子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-13T15:54:42.923

1.  创建应用程序[Facebook 开发人员页面](http://developers.facebook.com)

用php后可以获取live access toke

```
$app_id = '{Application Id}';
$app_secret = '{Application Secret}';
$access_token = "https://graph.facebook.com/oauth/access_token?client_id=$app_id&client_secret=$app_secret&grant_type=client_credentials";
$access_token = file_get_contents($access_token); // returns 'accesstoken=APP_TOKEN|APP_SECRET'
$access_token = str_replace('access_token=', '', $access_token); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-07-21T04:07:59.710

```
$app_id = 'APP_ID';
$app_secret = 'APP_SECRET';
$access_token_url = "https://graph.facebook.com/oauth/access_token?client_id=$app_id&client_secret=$app_secret&grant_type=client_credentials";
$access_token_data = file_get_contents($access_token_url);
$access_token_arr = json_decode($access_token_data);
$access_token = $access_token_arr->access_token; 
```

# powershell - ACL 权限 - 在安全组和用户之间确定

> ID：15967823
> 
> 赞同：0
> 
> 时间：2013-04-12T09:34:41.183
> 
> 标签：powershell, acl

好的，我们的办公室有一条规则，即不能将个人用户添加到文件夹中，但是，多年来，在如此庞大的组织中，这种情况在整个网络中都发生了。

我正在使用 powershell 并创建了一个简单的脚本来生成整个 SAN 的权限映射，但我希望调整脚本以显示对文件夹具有权限的所有个人用户。有没有人做过这样的事情？在过去的几个小时里，我一直在谷歌搜索/玩耍，寻找区分两者的方法，但此时没有运气......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:00:49.723

受托人是受托人是受托人。“组”受托人和“用户”受托人之间没有内在区别。要区分它们，您需要

*   建立一个有效用户列表并检查其中包含的所有受托人，或者
*   建立一个有效组列表并检查所有未包含在其中的受托人。

# c++ - Boost C++ 库是否支持 Sparc 上的 Solaris？

> ID：15967831
> 
> 赞同：9
> 
> 时间：2013-04-12T09:34:57.363
> 
> 标签：c++, boost, solaris, sparc

我一直在寻找用于开发跨平台网络服务器库的 Boost 库。它应该在 Windows/Linux/Solaris 上使用。boost是否支持这三个？

我只能通过谷歌搜索找到一些构建问题，并且“Boost 支持大多数现代操作系统”

我对 Boost 很陌生，所以也许更习惯它的人知道这是在哪里更具体地指定的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:48:07.027

在所有的 boost 版本中，都有这个版本支持的版本。看[这里的例子](http://boost.org/users/history/version_1_52_0.html)

# ruby - Nothing happens when creating a Greeter object - getting started with Ruby

> ID：15967834
> 
> 赞同：0
> 
> 时间：2013-04-12T09:35:22.700
> 
> 标签：ruby

I'm absolutely new to Ruby and I'm using my Mac terminal.
I'm following [this getting-started tutorial](http://www.ruby-lang.org/en/documentation/quickstart/3/) but after I created a Greeter object:

```
g = Greeter.new("Pat") 
```

Nothing happens, no error messages whatsoever.
I though I'm supposed to see something like:

```
=> #<Greeter:0x16cac @name="Pat"> 
```

What's wrong, am I supposed to install something extra for Ruby to work properly on my Mac?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:41:11.523

Try this: :)

```
class Greeter
 def initialize(x)
  @name = x
 end
end
p g = Greeter.new("Pat") #=> #<Greeter:0x105c840 @name="Pat"> 
```

Or if you started this way:

```
C:\>irb --simple-prompt --noecho
>> class Greeter
>>  def initialize(x)
>>   @name = x
>>  end
>> end
>> g = Greeter.new("Pat")
>> p g
#<Greeter:0x11e8300 @name="Pat"> 
```

Nothing would come as `--noecho` option disable the `IRB` inspection as `=>`.

# iphone - 如何以人类可读的形式获取 iOS 根证书列表

> ID：15967837
> 
> 赞同：1
> 
> 时间：2013-04-12T09:35:33.713
> 
> 标签：iphone, ios, ipad, root-certificate

我想以人类可读的形式获取 iOS 受信任的根证书列表。通过编写代码或任何工具。我怎么能得到那个？

[我从这里](https://stackoverflow.com/questions/10966969/enumerate-all-keychain-items-in-my-ios-application)尝试了一些类似下面的代码，但它返回 null。状态返回 -25300，即未找到项目。

```
- (void) readCert2 {
    NSMutableDictionary *query = [NSMutableDictionary dictionaryWithObjectsAndKeys:
//                                (__bridge id)kCFBooleanTrue, (__bridge id)kSecReturnAttributes,
                                (__bridge id)kCFBooleanTrue, (__bridge id)kSecReturnRef,
                                  (__bridge id)kSecMatchLimitAll, (__bridge id)kSecMatchLimit,
                                  nil];
    NSArray *secItemClasses = [NSArray arrayWithObjects:
//                             (__bridge id)kSecClassGenericPassword,
//                             (__bridge id)kSecClassInternetPassword,
                               (__bridge id)kSecClassCertificate,
//                             (__bridge id)kSecClassKey,
//                             (__bridge id)kSecClassIdentity,
                               nil];
    for (id secItemClass in secItemClasses) {
        [query setObject:secItemClass forKey:(__bridge id)kSecClass];

        CFTypeRef result = NULL;
        OSStatus status =  SecItemCopyMatching((__bridge CFDictionaryRef)query, &result);
        NSLog(@"%@", (__bridge id)result);
        if (result != NULL) CFRelease(result);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T13:37:43.587

答案是，iOS 6.1.4 API 尚无法实现。我在苹果论坛上问过，其中一位苹果开发者回答了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:15:29.377

Apple 在其网站上提供了受信任根证书的列表。

*   [iOS 5 和 iOS 6：可用的受信任根证书列表](http://support.apple.com/kb/ht5012)
*   [iOS 4.x：可用的受信任根证书列表](http://support.apple.com/kb/HT4415)
*   [iOS 2.x：可用的受信任根证书列表](http://support.apple.com/kb/HT2185)

# python - Python 正则表达式语法

> ID：15967847
> 
> 赞同：3
> 
> 时间：2013-04-12T09:36:02.810
> 
> 标签：python, regex

我是 python 正则表达式的初学者。那么有人可以帮我理解以下语法吗？

```
r'^(?P<pk>\d+)/results/$' 
```

我在学习 Django 时遇到了这个说法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T09:38:18.840

表达式分解：

*   `^`: 匹配字符串的开头
*   `(?P<pk>\d+)`: 匹配 1 个或多个数字 (0-9) 并将其捕获为命名组`pk`
*   `/results/`：匹配文字文本`/results/`
*   `$`: 匹配字符串的末尾。

因此，以数字开头，后跟文本`/results/`匹配的 URL 路径：

```
1234/results/
42/results/
3/results/ 
```

但其他任何事情都没有。

如果在 Django url 配置中使用，数字将被捕获并作为`pk`关键字参数传递到附加视图中。

# html - 如何用css隐藏滑动div

> ID：15967848
> 
> 赞同：1
> 
> 时间：2013-04-12T09:36:09.100
> 
> 标签：html, css, styles, hover, effects

我想创建一个滑动效果。我有两个放在旁边的 div。悬停`div id="left"`时向右滑动并隐藏`div id="right"`。周围`div id="left"`有一个类似 mousetracker 的东西，它`div id="left"`为可以悬停隐藏的其他地方增加了一些空间`div id="right"`。我建立了一个例子来说明我的意思：

[例子](http://jsfiddle.net/rpvHL/)

下面是 HTML：

```
<div id="main">
    <div id="tracker">
        <div id="left">slides right</div>    
        <div id="right">should disappear only when hover red div</div>  
    </div>
</div> 
```

以及用于幻灯片效果的 CSS：

```
/*Sliding Effects:*/
#tracker:hover #left {
    margin-left: 150px;
    position: absolute;
    -webkit-transition-duration: 2s;
    -moz-transition-duration: 2s;
    -o-transition-duration: 2s;
    transition-duration: 2s;
}
#tracker:hover #right {
   visibility:hidden;
}
#tracker:hover {
   width: 400px;
   height: 200px;
   margin-top: -25px;
   padding-top: 25px;
} 
```

现在的问题是即使在悬停时效果也会开始`div id="right"`。所以我仍然不知道如何解决这个问题。

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:21:40.700

即使在悬停时效果也会开始，`div#right`因为它是一个`div#tracker`孩子并且悬停效果正在冒泡到父级。

要仅使用 css 实现您想要的，您需要更改其 DOM 位置。使用您的示例，我必须更改以下内容才能使其正常工作：

*   `div#right`现在是`div#tracker`兄弟姐妹
*   `#tracker, #left, #right`div 元素现在是绝对定位的
*   因为`div#right`现在是兄弟姐妹而不是我的孩子，`div#tracker`所以我将以下 CSS 选择器更改 `#tracker:hover #right { }`为`#tracker:hover + #right { }`

[演示（使用您的示例）](http://jsfiddle.net/rpvHL/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:05:47.240

好的，所以只有当您将鼠标悬停在它上方时，我才能触发红色框的动画，方法是在它周围添加一个`#left-outer`具有相同宽度和高度的容器（）并添加`overflow:hidden;`

看这个例子：http: [//jsfiddle.net/N4X5P/](http://jsfiddle.net/N4X5P/)

我希望我能提供帮助！

# c# - 将 MaterializedDataRecord 转换为实体或为什么 EntityDataSource 会破坏我的实体

> ID：15967856
> 
> 赞同：0
> 
> 时间：2013-04-12T09:36:21.203
> 
> 标签：c#, entity-framework, entitydatasource

我正在使用 EntityDataSource。当我将“选择”属性留空时，一切正常 - 在 SomeWebControl_DataBinding 中，我可以完美地将 GridRow 的 DataItem 转换为我的实体（我们称之为用户）。

```
Literal ctrlTime = (Literal)sender;
GridViewRow row = (GridViewRow)ctrlTime.NamingContainer;
USERS usersRow = (USERS)row.DataItem;
DateTime timestamp = usersRow.Time; 
```

但是，我只需要显示表的第 1 1000 行，所以我要做的是填充 EntityDataSource 的“Select”属性并将其设置为“TOP(1000) |实体中*所有*字段的列表|”。但只要我这样做

```
 USERS usersRow = (USERS)row.DataItem; 
```

惨遭失败，告诉我它无法从 MaterializedDataRecord 转换为 USERS。

我最终做的是：

```
Literal ctrlTime = (Literal)sender;
GridViewRow row = (GridViewRow)ctrlTime.NamingContainer;
DbDataRecord usersRow = (DbDataRecord)row.DataItem;
DateTime timestamp = (DateTime)usersRow["Time"]; 
```

我可能会使用 (MaterializedDataRecord) 而不是 (DbDataRecord)，我只是不想吓到我的同事。现在，这行得通，但是我觉得它很难看，并且有点破坏了使用 EntityFramework 的美感。此外，这是一个非常基本的示例，将来我可能会遇到类似的情况，我需要对许多其他字段进行装箱/拆箱，这看起来不太好。

所以我的问题是：有什么方法可以轻松地将 MaterializedDataRecord 转换为实体或设置 EntityDataSource 不考虑“选择”中存在的某些东西作为“威胁”，从而导致创建 MaterializedDataRecord 而不是实体？

我的意思是，如果我选择实体字段的子集，我会理解这种行为，但在这里我选择了所有字段，所以这对于 EntityDataSource 转换来说应该不是问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T18:37:44.750

正如您在此处看到[的 Linq to Entities 与 ESQL 的性能](https://stackoverflow.com/questions/38647/linq-to-entities-vs-esql)，似乎 EntityDataSource 使用 ESQL 来编写查询。然后，当您使用“选择”属性时，它会更改投影并且您不能再使用模型实体。

您可以做的是使用 QueryCreated 事件并在执行查询之前通过更改它来过滤前 1000 条记录。这里有一个例子[http://msdn.microsoft.com/en-us/library/ee404748.aspx](http://msdn.microsoft.com/en-us/library/ee404748.aspx)。

# algorithm - 为我的期末学习：渐近符号

> ID：15967860
> 
> 赞同：0
> 
> 时间：2013-04-12T09:36:36.427
> 
> 标签：algorithm, math, big-o, asymptotic-complexity, big-theta

我目前正在学习算法的期末考试。这不是家庭作业问题，而是来自旧的期末考试。

```
Show that f(n) = 4logn + log log n is big theta of logn. 
```

很明显，log log n 比 log n 小很多，因此微不足道。但是我怎样才能正式地展示它呢？我熟悉限制和 L'hopital，所以如果您能告诉我如何使用这种方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T10:02:45.310

记住大θ的定义。一个函数`f(x)`在`Theta(g(x))`if ![大θ的要求](https://i.stack.imgur.com/aBUN2.png)

你有`f(x) = 4*log(x) + log(log(x))`和`g(x) = log(x)`。现在我们必须证明存在`c_0`,`c_1`并且`x_0`满足条件的值。

如果我们取`c_0 = 1`并且`x_0`足够大`log(log(x_0)) > 0`（确切的数字取决于你的对数的底，但总是有这样一个数字，我们并不需要知道它），那么很容易证明第一个不等式是对所有人都为真`x > x_0`：（`log(x) <= 4*log(x) + log(log(x))`提示：`log(log(x))`已经是`> 0`并且对数函数是单调递增的。

现在让我们选择`c_1 = 5`。第二个不等式现在变为`4*log(x) + log(log(x)) <= 5*log(x)`，它简化为

```
log(log(x)) <= log(x) 
```

对于所有人`x > x_0`。我会把这个证明留给你作为练习。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:26:56.773

**找到 c1 ， c2 和 no 的简单方法。**

**寻找上限：**

```
 f(n) = 4logn+loglogn

    For all sufficience value of n>=2

        4logn <= 4 logn   
        loglogn <= logn 

    Thus , 

     f(n) = 4logn+loglogn <= 4logn+logn
                          <= 5logn
                           = O(logn)       // where c1 can be 5 and n0 =2 
```

**寻找下限：**

```
 f(n) = 4logn+loglogn

   For all sufficience value of n>=2

      f(n) = 4logn+loglogn >= logn
    Thus,              f(n) =  Ω(logn)   // where c2 can be 1 and n0=2

  so , 
                        f(n) = Ɵ(logn) 
```

# php - 将句子中的第一个单词更改为大写

> ID：15967862
> 
> 赞同：4
> 
> 时间：2013-04-12T09:36:43.317
> 
> 标签：php, uppercase, toupper

我希望将句子的第一个单词转换为大写，但不确定我将如何去做。这是我到目前为止所拥有的：

```
$o = "";

  if((preg_match("/ibm/i", $m)) || (preg_match("/hpspecial/i", $m))) {

$o = strtoupper($m);

} else {

  $o = ucwords(strtolower($m));

} 
```

我想`uppercase`从`hpspecial`ID 中使用 HP 是要大写的句子的第一部分，但这会将整个句子大写。我如何只使句子的 HP 大写？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T09:38:01.677

你可以点他的[**`ucfirst`**](http://php.net/manual/en/function.ucfirst.php)

> `ucfirst`— 使字符串的第一个字符大写

喜欢

```
$foo = 'hello form world';
$foo = ucfirst($foo); 
```

[**实时输出**](http://codepad.viper-7.com/dABr6U)

**编辑：**要使其第一个单词大写，您可以这样做

```
<?php
$foo = 'hello form world ';

$pieces = explode(" ", $foo);
$pieces[0] = strtoupper($pieces[0]);
$imp = implode(" ", $pieces);
echo $imp; 
```

[**实时结果**](http://codepad.viper-7.com/YYmcMV)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:56:23.867

像这样的东西怎么样：

```
$arr = explode(' ');
$arr[0] = strtoupper($arr[0]);

echo implode(' ' , $arr); 
```

我不知道是否有内置功能，但我认为这应该可以吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-12T09:56:02.670

您可以使用自定义功能，例如

```
function uc_first_word ($string)
{
   $s = explode(' ', $string);   
   $s[0] = strtoupper($s[0]);   
   $s = implode(' ', $s);
   return $s;
} 
```

$string = '你好，世界。这是一个测验。'; 回声 $s = uc_first_word ($string)

所以输出将是

```
HELLO world. This is a test 
```

所以空格前的第一个词将与整个句子一样大。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-12T09:51:28.633

看来你真的没有什么特殊的模式，为什么不直接使用 preg_replace 呢？

```
$search = array('/ibm/i', '/hpspecial/i');
$replace = array('IBM', 'HPspecial');

$string = preg_replace($search, $replace, $string); 
```

无论如何，您都必须这样做，因为您无法真正将 HP 与 Special 区分开来（至少通过简单的方法）；

实际上，您可以使用 str_replace 使用相同的方法，因为据我所知，您没有使用复杂的模式。

有时最简单的解决方案是最好的

# module - 在本地重命名从模块加载的 Fortran 派生类型

> ID：15967866
> 
> 赞同：1
> 
> 时间：2013-04-12T09:36:46.753
> 
> 标签：module, fortran, derived-types

我想通过使用 OOP 来提高我的 Fortran 代码的可读性。我最终得到了相当复杂的派生类型，例如：`a%b%c%d%e`，在 module 中定义`mymod`。

现在，在一个子程序中我做

```
subroutine test
    use mymod, only: a
    ! lots of unrelevant stuff, especially with a%b%c%d%e.
end subroutine 
```

我的问题如下：我想在这个特定的子例程中重命名`a%b%c%d%e`为一个简单的`newname`.

例如，我测试过：`use mymod, only: a%b%c%d%e => newname`但我得到一个编译错误，指出：

> 错误：USE 语句中的语法错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T15:26:39.920

您可以使用该`associate`构造来执行此操作。

```
subroutine test
    use :: mymod, only: a
    associate(newname => a%b%c%d%e)
        ! lots of unrelevant stuff, now using newname.
    end associate
end subroutine 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T15:35:03.147

可以说更好的方法是通过子例程的参数列表传递参数，在这种情况下，您可以使用任何您喜欢的本地名称：

```
subroutine test(a)
...
end subroutine 
```

然后打电话

```
call subroutine test(a%b%c%d%e) 
```

而且，当我在写的时候，当你在一个`use`声明中重命名一个实体时，表单是

```
local-name => use-name 
```

而不是，正如你所拥有的，

```
use-name => local-name 
```

# ios - UITableView 在底部加载更多单元格，方法被多次调用

> ID：15967874
> 
> 赞同：3
> 
> 时间：2013-04-12T09:37:11.020
> 
> 标签：ios, objective-c, uitableview, uiscrollview

我正在开发一个简单的 iPhone 应用程序，该应用程序正在从 UITableView 内的 Web 服务（RSS 提要）加载数据。第一次加载应用程序时，我使用初始值为 1 的计数器来加载提要的第一页：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    counter = 1;    
    [self fetchEntriesNew:counter];
} 
```

当用户向下滚动到 tableview 的底部时，我正在使用以下方法通过递增计数器来获取 rss 提要的下一页来在 tableview 中加载更多数据：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    float endScrolling = scrollView.contentOffset.y + scrollView.frame.size.height;
    if (endScrolling >= scrollView.contentSize.height)
    {       
        NSLog(@"Scroll End Called");
        counter++;
        [self fetchEntries:counter];
    }
} 
```

每次用户向下滚动到 tableview 的底部时，计数器都会增加，因此调用 rss 提要的下一页。至此，一切正常。

但是，如果用户在到达底部后向上滚动多次，计数器也会多次增加，因此到达 rss 提要的不同页面并将其添加到 tableview 的底部。

更准确地说，如果用户已经到达底部并向上滚动 3 次，而不是加载第二页，它将加载第四页（滚动 3 次加上开始时已经添加了 1）

**如果没有加载之前的页面条目，我如何限制不添加另一个页面条目？**

请不要建议在 tableview 或任何第三方库（如 NMPaginator 和 PartialTable 等）底部处理更多行的替代策略。提前致谢！

**更新：**

我通过一次又一次地运行它来密切观察该应用程序。似乎如果用户在 tableview 完成加载已经请求的页面数据（包括图像）之前滚动到底部（增加计数器），它将忽略加载当前正在加载的页面并开始加载下一个基于递增的计数器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:33:55.093

您能否检查以下代码并告诉我：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    float endScrolling = scrollView.contentOffset.y + scrollView.frame.size.height;
    if (endScrolling >= scrollView.contentSize.height)
    {   
        static int counterCheck = 0;
        ++counter;

        if (counter - counterCheck == 1)
        {
            [self fetchEntries:counter];
            ++counterCheck;
        }
        else
            --counter;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:11:03.440

您可以通过记录需要加载的页面以及最后加载的页面来解决问题。通常，您只需要确保忽略所有最终要求您加载比上一个加载页面高 1 多的页面的请求。例如：

```
if (pageThatNeedsToBeLoaded != lastPageLoaded + 1) {
    // ignore the request
} 
```

此外，您可以创建一个标志来保持控制器的状态和获取状态，例如在您发送请求时`isFetchingData`将设置为`YES`，然后`NO`在加载数据后将其设置为。如果标志设置为`YES`，您将不会调用任何其他请求以获取更多数据。也就是说，假设您的数据是以增量方式加载的，并且在任何情况下您一次都不会加载超过一页。

# ruby-on-rails - ruby on rails 如何杀死 resque 工人

> ID：15967876
> 
> 赞同：0
> 
> 时间：2013-04-12T09:37:20.240
> 
> 标签：ruby-on-rails, ruby, resque, worker

我在resque队列中运行爬虫。它是一个爬虫并将信息提取到数据库中......我想停止它..然后我在服务器中启动控制台我使用命令：

```
irb(main):001:0> Resque.working[0].id
=> "09ec127d-bb90-4629-a6f2-bb2610885ab5:62:*"
irb(main):003:0> Resque.remove_worker("09ec127d-bb90-4629-a6f2-bb2610885ab5:62:*")
=> 0 
```

虽然在 /resque 页面中......它显示没有工作人员正在运行......但我发现数据库正在增加......它仍在将数据写入数据库......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:26:30.643

这是我杀死工人的方法：

```
pids = Array.new

puts "Killing resque workers ... "
Resque.workers.each do |worker|
  pids << worker.to_s.split(/:/).second
end

if pids.size > 0
   system("kill -QUIT #{pids.join(' ')}")
end 
```

# xml - 为什么这个 XML 是有效的？

> ID：15967880
> 
> 赞同：1
> 
> 时间：2013-04-12T09:37:26.820
> 
> 标签：xml

我在这个 xml 中签入了几个验证器：

```
<root>
  <tag>text</tag>even more text
</root> 
```

这是有效的。有人可以从示例中解释什么是“更多文本”字符串，也许可以让我参考一些文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:39:52.160

它是一段[字符数据](http://www.w3.org/TR/xml/#syntax)（就像标签元素内的另一段文本一样）。

除非 DTD/Schema/etc 另有说明，否则任何元素都可能包含字符数据。

# java - 序列化 uid 号增加了要发送的字节数组的大小？

> ID：15967884
> 
> 赞同：-1
> 
> 时间：2013-04-12T09:37:35.163
> 
> 标签：java, arrays

I want to send an `array` of `bytes` with 6 fields `(char, boolean[], char, byte[], int, and byte)`. Each field has a defined size, therefore my `array` of `bytes` must have a size limit as big as the sum of the 5 fields.

My question is this: The number serialize uid increases the final size of my `bytes` `array` to send? (if the answer is yes I must find another way to convert `array` of `bytes`)

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:49:43.420

快速回答，**是**的，默认的 Java 序列化机制确实在它输出的字节中包含序列版本 ID（并在它读回它时期望）。完整的细节在这里[http://www.javaworld.com/community/node/2915](http://www.javaworld.com/community/node/2915)，它还包括其他东西。

根据[http://geekexplains.blogspot.co.uk/2008/05/externalizable-in-java-what-is-it-used.html](http://geekexplains.blogspot.co.uk/2008/05/externalizable-in-java-what-is-it-used.html) ，您可以通过实现 Externalizable 来覆盖此行为。

您可能还更喜欢使用 protobuf 或 msgpack 之类的库。

# android - 为微调器充气时出错

> ID：15967887
> 
> 赞同：1
> 
> 时间：2013-04-12T09:37:43.613
> 
> 标签：android, android-spinner

我正在尝试创建一个包含 Spinner 的 UI。这是 XML（微调器快要结束了）：

```
 <?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout style="@style/header" >

    <Button
        android:id="@+id/btnBack_profileEdit"
        style="@style/header_button"
        android:layout_gravity="center_vertical"
        android:layout_margin="@dimen/default_button_padding"
        android:background="@drawable/ic_button"
        android:drawableLeft="@drawable/ic_back_arrow"
        android:gravity="right|center_vertical"
        android:text="@string/back"
        android:textColor="@android:color/white"
        android:textSize="@dimen/header_button_text" />

    <TextView
        android:id="@+id/title_profileEdit"
        style="@style/header_text"
        android:singleLine="true"
        android:text="@string/my_profile" />

    <ImageButton
        android:id="@+id/btnSave_profileEdit"
        style="@style/header_button"
        android:src="@drawable/ic_add" />
</LinearLayout>

<LinearLayout
    style="@style/row"
    android:background="@drawable/white_gradient" >

    <TextView
        style="@style/profile_row_content"
        android:text="@string/first_name"
        android:textColor="@color/black_text" />

    <EditText
        android:id="@+id/firstName_profileEdit"
        style="@style/profile_row_edit_text"
        android:imeOptions="actionNext" />
</LinearLayout>

<LinearLayout
    style="@style/row"
    android:background="@drawable/white_gradient" >

    <TextView
        style="@style/profile_row_content"
        android:text="@string/last_name"
        android:textColor="@color/black_text" />

    <EditText
        android:id="@+id/lastName_profileEdit"
        style="@style/profile_row_edit_text"
        android:imeOptions="actionNext" />
</LinearLayout>

<LinearLayout
    style="@style/row"
    android:background="@drawable/white_gradient" >

    <TextView
        style="@style/profile_row_content"
        android:text="@string/email"
        android:textColor="@color/black_text" />

    <EditText
        android:id="@+id/email_profileEdit"
        style="@style/profile_row_edit_text"
        android:imeOptions="actionNext" />
</LinearLayout>

<LinearLayout
    style="@style/row"
    android:background="@drawable/white_gradient" >

    <TextView
        style="@style/profile_row_content"
        android:text="@string/password"
        android:textColor="@color/black_text" />

    <EditText
        android:id="@+id/password_profileEdit"
        style="@style/profile_row_edit_text"
        android:imeOptions="actionNext"
        android:inputType="textPassword" />
</LinearLayout>

<LinearLayout
    android:id="@+id/lytRole_profileEdit"
    style="@style/row"
    android:background="@drawable/white_gradient" >

    <TextView
        style="@style/profile_row_content"
        android:text="@string/role"
        android:textColor="@color/black_text" />

    <Spinner
        android:id="@+id/role_profileEdit"
        android:layout_width="match_parent"
        android:gravity="center_vertical"
        android:layout_height="wrap_content"
        android:layout_weight=".5"
        android:entries="@string/role" />
</LinearLayout>

<LinearLayout
    android:id="@+id/lytSeparator_profileEdit"
    style="@style/separator" >

    <TextView
        style="@style/separator_content"
        android:text="@string/nickname_for_my_profile" />
</LinearLayout>

<LinearLayout
    style="@style/row"
    android:id="@+id/lytNickname_profileEdit"
    android:background="@drawable/white_gradient" >

    <TextView
        style="@style/profile_row_content"
        android:text="@string/nickname"
        android:textColor="@color/black_text" />

    <EditText
        android:id="@+id/nickname_profileEdit"
        style="@style/profile_row_edit_text"
        android:layout_height="wrap_content" />
</LinearLayout>

</LinearLayout> 
```

现在，当我尝试启动活动时，在扩展此布局时应用程序崩溃并且错误是：

```
Binary XML file line #105: Error inflating class android.widget.Spinner 
```

是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T09:42:06.217

什么是角色？是一个`<string-array>`，那么

更改此行

```
 android:entries="@string/role" 
```

至

```
 android:entries="@array/role" 
```

# php - 使用 JSONP 的 PHP Twitter 请求

> ID：15967888
> 
> 赞同：0
> 
> 时间：2013-04-12T09:37:50.367
> 
> 标签：php, javascript, json

我创建了一个简单的 PHP Twitter 请求，它每 10 分钟缓存一次响应。请求代码如下所示：

```
$twitter_result = false;

if (file_exists( 'twitter.json' )) {
    $data = json_decode( file_get_contents( 'twitter.json' ));
    if ($data->timestamp > (time() - 10 * 60) ) {
        $twitter_result = $data->twitter_result;
    }
}

if (!$twitter_result) {
    $twitter_result = file_get_contents('http://api.twitter.com/1/statuses/user_timeline.json?q=@SolidCAMUK&rpp=1&screen_name=SolidCAMUK&count=1');
    $data = array ('twitter_result' => $twitter_result, 'timestamp' => time());
    if(file_put_contents( 'twitter.json', json_encode($data) )) {
        //echo 'success';
    } else {
        //echo 'error';
    }
}

$file = file_get_contents('twitter.json');

header("content-type:application/json");
if($_GET['callback']) {
    echo $_GET['callback'] . '(' . $file . ')';
} else {
    echo $file;
}
exit; 
```

此页面返回的 JSONP 示例如下所示：[http ://dev.driz.co.uk/phptwitter/?callback=Test](http://dev.driz.co.uk/phptwitter/?callback=Test)

然后我在这里尝试在我的测试场景中使用这个 JSONP：http: [//dev.driz.co.uk/phptwitter/test.php](http://dev.driz.co.uk/phptwitter/test.php)

但是数据没有正确显示。我猜 JSON 的格式不正确，因为当我 console.log 响应时，它似乎充当字符串而不是实际对象......任何人都可以看到任何问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:50:31.063

返回的 JSON 格式没有任何问题。它是有效的，你可以[在这里查看](http://jsonlint.com/)。

你正在做`console.log(response.twitter_result);`，这就是你看到纯文本的原因。如果这样做`console.log(response);`，您将看到实际返回的对象。

`response.twitter_result`也是一个对象，但你必须先像这样解析它

```
success: function(response){
                var twitter_result = $.parseJSON(response.twitter_result);

                console.log(twitter_result[0].text);
               //and here you can apply your parseTwitterText() function as you wish
} 
```

# c# - 使用 C# 强制关闭 Windows CE 5 应用程序

> ID：15967894
> 
> 赞同：3
> 
> 时间：2013-04-12T09:38:14.270
> 
> 标签：c#, compact-framework, windows-ce

如何使用 C# 在 Windows CE 5.0 上强制关闭应用程序？我已经尝试过`Application.Exit()`，但这并不总是会杀死所有当前正在运行的线程。

我通常会使用`Environment.Exit()`，但不幸的是，这在 CF 中不可用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T14:56:07.750

这取决于您使用的 CF 版本。 `Application.Exit`是退出应用程序的正确机制，但也必须处理您的线程。在 CF 2.0 和 3.5 中，将`IsBackground`属性设置为`true`在所有创建的线程上（只需在创建时执行）。在 CF 1.0 上，您必须手动将标志添加到线程 proc 定期查看的包含类中，以了解它是否应该退出。

# android - 如何在Android中从SD卡解析xml文件

> ID：15967896
> 
> 赞同：8
> 
> 时间：2013-04-12T09:38:18.277
> 
> 标签：android

我有这个xml：

```
<?xml version='1.0' encoding='UTF-8' standalone='yes' ?>
  <alllogs count="5">
    <log number="+919876543210" time="1365589432804" date="Wed Apr 10 15:53:52 GMT+05:30 2013" type="2" duration="0" new="1" name="360 chhotein" numbertype="2" numberlabel="null" />
    <log number="+919876543210" time="1365595887261" date="Wed Apr 10 17:41:27 GMT+05:30 2013" type="2" duration="0" new="1" name="360 chhotein" numbertype="2" numberlabel="null" />
    <log number="+919876543210" time="1365596387590" date="Wed Apr 10 17:49:47 GMT+05:30 2013" type="2" duration="0" new="1" name="360 chhotein" numbertype="2" numberlabel="null" />
    <log number="+919876543210" time="1365596787051" date="Wed Apr 10 17:56:27 GMT+05:30 2013" type="2" duration="0" new="1" name="null" numbertype="null" numberlabel="null" />
    <log number="0041786095382" time="1365740469738" date="Fri Apr 12 09:51:09 GMT+05:30 2013" type="2" duration="0" new="1" name="null" numbertype="null" numberlabel="null" />
  </alllogs> 
```

我正在使用的解析器是 android 原生 XMLPullParser

我无法更改 XML 格式，但如果值得的话，我可以使用另一个兼容 android 的解析器。

如果不清楚，它必须适合这样的类：

```
try {
        String file = Environment.getExternalStorageDirectory() + File.separator + "SmsContactsBackup/logs/calllogs_20130412125502.xml";
         XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
         factory.setNamespaceAware(true);
         XmlPullParser parser = factory.newPullParser();
         FileInputStream fis = new FileInputStream(file);
         parser.setInput(new InputStreamReader(fis));
         Log.d("Response", ""+convertStreamToString(fis));
         int eventType = parser.getEventType();
         String name = null;
         while (eventType != XmlPullParser.END_DOCUMENT)
         {
             //String name = parser.getName();

             if(eventType == XmlPullParser.START_DOCUMENT) {
                 System.out.println("Start document");
             }else if(eventType == XmlPullParser.START_TAG) {
                 name = parser.getName();
                 if (name.equalsIgnoreCase("alllogs")){
                     count = Integer.parseInt(parser.getAttributeValue("", "count"));
                }else if(name.equalsIgnoreCase("log"))
                {
                    phone_no.add(parser.getAttributeValue("", "number"));
                }
                 System.out.println("Start tag "+parser.getName());
             }else if(eventType == XmlPullParser.END_TAG) {
                 name = parser.getName();
                 System.out.println("End tag "+parser.getName());
             }
             eventType = parser.next();
         }
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

eventtype 没有得到正确的和 IOException。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T05:55:13.500

最后我得到了这样的解决方案我使用了 Dom 解析

```
public class MainActivity extends Activity {

    ArrayList<String> mImageLink;
    ArrayList<String> phone_no;
    int count;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
         mImageLink = new ArrayList<String>();
         phone_no = new ArrayList<String>();

         try {
         File file = new File("mnt/sdcard/Backup_Apps/call_logs/calllog_35777569.xml");
         InputStream is = new FileInputStream(file.getPath());
         DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
         DocumentBuilder db = dbf.newDocumentBuilder();
         Document doc = db.parse(new InputSource(is));
         doc.getDocumentElement().normalize();

         NodeList nodeList = doc.getElementsByTagName("alllogs");

         for (int i = 0; i < nodeList.getLength(); i++) {

             Node node = nodeList.item(i);

             Element fstElmnt = (Element) node;

             mImageLink.add(fstElmnt.getAttribute("count"));
             count = Integer.parseInt(mImageLink.get(i));

         }
         NodeList n = doc.getElementsByTagName("log");

         for (int j = 0; j < count; j++) {
             Node node = n.item(j);

             Element fstElmnt = (Element) node;

             phone_no.add(fstElmnt.getAttribute("number"));

        }
     } catch (Exception e) {
         System.out.println("XML Pasing Excpetion = " + e);
     }
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-10T08:59:48.403

```
try {
            File SDCardRoot = Environment.getExternalStorageDirectory()
                    .getAbsoluteFile();
            File myDir = new File(SDCardRoot.getAbsolutePath() + "/.ABC"
                    + "/.Config");

            File file = new File(myDir, "config.xml");

            InputStream inputSource = new FileInputStream(file.getPath());
            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
            Document doc = dBuilder.parse(inputSource);
            Element element = doc.getDocumentElement();
            element.normalize();
            NodeList nList = doc.getElementsByTagName("item");
            for (int i = 0; i < nList.getLength(); i++) {
                Node node = nList.item(i);
                if (node.getNodeType() == Node.ELEMENT_NODE) {
                    Element eElement = (Element) node;
                    String id = eElement.getElementsByTagName("id").item(0)
                            .getTextContent();
                    eElement.getElementsByTagName("name").item(0)
                            .getTextContent();
                    eElement.getElementsByTagName("image_updated").item(0)
                            .getTextContent();
                    eElement.getElementsByTagName("image").item(0)
                            .getTextContent();
                    eElement.getElementsByTagName("colorcode").item(0)
                            .getTextContent();
                }
            }
        } catch (Exception e) {
            e.printStackTrace(); 
        } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-12T10:13:28.413

[XML 解析。我怎样才能得到孩子的孩子？](https://stackoverflow.com/questions/15830358/xml-parsing-how-can-i-get-childs-child)

你有一个有效的例子。它基于 java，并且在 Android 设备中完美运行。

# html - 文件上传跨浏览器问题

> ID：15967899
> 
> 赞同：0
> 
> 时间：2013-04-12T09:38:21.810
> 
> 标签：html, css, input-type-file

传统上，我们使用它 `<input type="file">`来上传文件，但这个元素在不同的浏览器（如 firefox 和 chrome）中没有一致的行为。它在 chrome 上仅显示为一个按钮，在 firefox 上它显示为一个文本字段以及一个文件上传按钮。我用来克服这个问题的 CSS 解决方案如下：

```
HTML:

    <div class="fileinputs">
    <html:file name="importForm" property="formFile" styleClass="file"/>
    <div class="fakefile">
    <input/>
    <input type="button" value="Browse"/>
    </div>
    </div>

CSS:

div.fileinputs {
    position: relative;
}

div.fakefile {
    position: absolute;
    top: 0px;
    left: 0px;
    z-index: 1;
}

.file {
    position: relative;
    text-align: right;
    -moz-opacity: 0;
    filter: alpha(opacity=0);
    opacity:0;
    z-index: 2;
} 
```

此解决方案解决了不一致的行为，但所选文件未显示在文件输入字段中。我们如何克服此问题？

# asterisk - 一些呼出电话被记录其他不在 Asterisk 上

> ID：15967900
> 
> 赞同：0
> 
> 时间：2013-04-12T09:38:29.417
> 
> 标签：asterisk, adhearsion

我正在使用带有 Asterisk (1.8.15-cert1) 的 FreePBX，并且正在通过 Adhearsion 应用程序拨打电话。现在的情况是，每次通话都会生成录音文件，但只有一些包含实际录音，其他的是空的，大小为 44 字节。

我观察到，拨打普通电话的电话被记录下来，而由自动机器（即应答机）接听的电话没有被记录（保存了空的录音文件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:00:23.710

请检查您是否有从调用到 .wav 文件的编解码器翻译路径（通常意味着检查 g729 编解码器是否存在）

# c# - 任务数据流，可以从完成状态更改数据块吗？

> ID：15967903
> 
> 赞同：6
> 
> 时间：2013-04-12T09:38:39.340
> 
> 标签：c#, task-parallel-library, tpl-dataflow

我想知道是否可以改变数据块的完成状态？

例如，我`var block = new BufferBlock<int>();`用 . 标记了一个数据块`block.Complete()`。该块链接到其他数据块。我想知道我是否可以`block`通过将其完成状态更改回原来的 !complete 状态来再次运行。

如果这是不可能的，我如何执行多次运行，包括完成，而不必 a) 取消链接所有块，b) 重新实例化所有块，以及 c) 再次重新链接所有块？

有什么想法可以简化运行数据流周期的任务，包括完成链中的每个块，而无需重新创建整个框架？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T23:04:50.703

不，您不能“取消完成”已完成的数据流块。我认为您应该做的是为每条消息添加一个标志，说明它是否是运行中的最后一条消息。为了使其更易于使用，您可以创建一组辅助方法，例如：

```
public static TransformBlock<Tuple<TInput, bool>, Tuple<TOutput, bool>>
    CreateEnhancedTransformBlock<TInput, TOutput>(Func<TInput, TOutput> transform)
{
    return new TransformBlock<Tuple<TInput, bool>, Tuple<TOutput, bool>>(
        tuple => Tuple.Create(transform(tuple.Item1), tuple.Item2));
} 
```

这样，您输入一个`transform`仅处理`TInput`and的委托，`TOuput`并且该标志与每条消息一起传输。

# validation - 如何摆脱 JSF/Primefaces 中无效组件的突出显示

> ID：15967906
> 
> 赞同：1
> 
> 时间：2013-04-12T09:38:53.437
> 
> 标签：validation, jsf-2, primefaces, converter

我正在使用 Primefaces 3.5.2、Mojara 2.1.2。我在这个页面中有一个主要的 xhtml 页面和一个对话框。下面是一个简单的例子

```
<h:form>
   <p:commandButton id="btn1" oncomplete="dlg.show()" update="dlg" process="@form"/>
</h:form>

   <p:dialog id="dlg" widgetVar="dlg">
      <h:form>
         <p:tabView id="tabview" activeIndex="..always 0 ...">
           <p:tab id="tab1">
             <p:panelGrid>
               <p:inputText id="input1" value="#{myBean.integer}"/>

             p:selectOneMenue is rendered wrong, if the dialog is reopened.
               <p:selectOneMenu id="select" value="#{myBean.listVal}" filter="true" style="width:100%">
                 <p:selectItems value="#{myBean.list}" />
               </p:selectOneMenu>
               <p:commandButton action="#{myBean.ok}" value="ok" oncomplete="..." update="dlg" process="@form"/>
               <p:commandButton action="#{myBean.cancel}" value="cancel"  update="dlg" process="@form"oncomplete="dlg.hide()"/>
             <p:panelGrid>
           </p:tab>
           <p:tab id="tab2">
            ...
           </p:tab>
         </p:tabView>
      </h:form>
   </p:dialog> 
```

托管豆：

```
@ManagedBean
@SessionScoped
class MyBean {
   Integer integer;
   String listVal;

   public Integer getInteger() { ... }
   public void setInteger (Integer i) { ... }
   public void ok() { ... }
   public void cancel() { ... }

   public List<SelectItem> getList() { ... }
   public getListVal () { ... } 
   public setListVal (..) { ... }

} 
```

如果我打开对话框，在输入字段 (input1) 中写入错误信息，例如文本而不是数字，然后单击“确定”，则输入将无效并标记为红色。我用取消或关闭按钮关闭对话框。如果我重新打开对话框，输入字段仍标记为红色。我不想要这种行为。

另一个问题：在无效状态下“选择”——Primefaces 中的组件经常改变大小。如果我将 p:selectOneMenu 替换为 h:selectOneMenu 则组件的大小正确。

我的**问题**是如何更改 JSF/Primefaces 的状态，以便在重新打开对话框后 JSF 将处于“验证”状态，并且 JSF 不会显示突出显示。

我试图用 setValid(true) 为“myBean.cancel”中的所有组件更改组件状态，但它没有帮助。类似于这个问题 [How to mark other components invalid in a custom multi-field validator](https://stackoverflow.com/questions/14376875/jsf2-primefaces-how-to-highlight-the-inputtext-border-with-red-color)

## 更新

谢谢，红色边框的问题消失了。但我还有另一个非常相似的问题。请参阅：[如果发生转换器/验证器错误，p:SelectOneMenue 在 Primefaces/JSF 中更改大小](https://stackoverflow.com/questions/16030920/pselectonemenue-changes-size-in-primefaces-jsf-if-converter-validator-error-occ)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T10:29:36.747

For resetting input fields consider using Omnifaces. Omnifaces provides a ResetInputAjaxActionListener for this. See here for more: [http://showcase.omnifaces.org/eventlisteners/ResetInputAjaxActionListener](http://showcase.omnifaces.org/eventlisteners/ResetInputAjaxActionListener).

**Update 1**

Since PrimeFaces 3.4 you can also use `<p:resetInput>` instead of Omnifaces `ResetInputAjaxActionListener`. See here: [http://www.primefaces.org/showcase/ui/resetInput.jsf](http://www.primefaces.org/showcase/ui/resetInput.jsf)

**Update 2**

And since JSF 2.2 you can also use `<f:ajax ... resetValues="true"/>` or `<f:resetValues render="...">`.

# ruby-on-rails - Capistrano 部署失败 Bundler::GemNotFound

> ID：15967911
> 
> 赞同：1
> 
> 时间：2013-04-12T09:39:15.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, capistrano, will-paginate

出于某种原因，由于找不到 will_paginate gem，我的部署失败了，我在向我的应用程序添加新 gem 并之前部署时没有遇到问题。

如果您转到“[我的网站”](http://dev.fish-plate.co.uk)，您将看到该错误。

我试过添加

```
require "bundler/capistrano" 
```

到我的 Capfile，但它仍然失败。

引导文件

```
require 'rubygems'

# Set up gems listed in the Gemfile.
ENV['BUNDLE_GEMFILE'] ||= File.expand_path('../../Gemfile', __FILE__)

require 'bundler/setup' if File.exists?(ENV['BUNDLE_GEMFILE']) 
```

我在本地添加了 gem，运行 bundle 并且一切正常..

我能做些什么来解决这个问题，或者以前有人见过这个吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:43:58.603

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:53:57.960

我有时会看到类似的错误。这可能是因为一些依赖问题，这些问题通常是由于 gem 更新而发生的，大多数情况下。

我认为，您最好在应用程序部署环境中检查 will_paginate gem 版本。然后，您可能会获得有关该错误的一些线索。如果您正在使用 gemset，则删除 gemset 或删除现有的 will_paginate gem 并执行“捆绑安装”应该可以解决您的问题。

希望它有帮助，如果这不能解决您的问题，请告诉我。

# html - 从容器底部开始内容并向上推

> ID：15967913
> 
> 赞同：0
> 
> 时间：2013-04-12T09:39:19.753
> 
> 标签：html, css

所以我想要完成的似乎是简单的 CSS 等。我正在更改一个消息传递系统，以及从底部开始的对话有点像 Facebook 或文本消息，其中一个人在左边，另一个人在右边。

当通过 ajax 添加新内容时，如何让 div 上升？我看到了这个[类似的问题](https://stackoverflow.com/questions/13353049/make-text-start-from-bottom)，但不太明白他的意思是专注于 LI。一个例子会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:11:16.720

大概是这样的？

```
<!DOCTYPE html>
<html>
<head>
<script>
function byId(e){return document.getElementById(e);}
function newEl(tag){return document.createElement(tag);}
function newTxt(txt){return document.createTextNode(txt);}
function prependChild(parent, element)
{
    if (parent.childNodes)
        parent.insertBefore(element, parent.childNodes[0]);
    else
        parent.appendChild(element)
}

window.addEventListener('load', mInit, false);

function mInit()
{
    byId('btnAddNew').addEventListener('click', onAddBtnClicked, false);
}

function onAddBtnClicked()
{
    var txtInputElem = byId('newMsgTxtInput');
    var msgTxt = txtInputElem.value;

    var li = newEl('li');
    li.appendChild( newTxt( msgTxt ) );

    var ulTgt = byId('msgTarget');

    var existingLiItems = ulTgt.querySelectorAll('li');
    var numItemsExisting = existingLiItems.length;
    if (numItemsExisting%2 != 0)
        li.className = 'even';
    else
        li.className = 'odd';

    prependChild(ulTgt, li);
}

</script>
<style>
.controls
{
    display: inline-block;
    padding: 8px;
    margin: 8px;
    border: solid 1px #555;
    border-radius: 4px;
    color: #777;
    background-color: #ddd;
}
#msgTarget
{
    width: 275px;
    border: solid 1px #555;
    margin: 8px;
    border-radius: 4px;
}

/*
 Doesn't work 'properly' - since we add items at the top, rather than the bottom
 The first item added will be 'even', then the second item gets added and now it's the first child 'even'
 so, the item added first is now an 'odd' child. A better way may be to count the number of existing li
 items the ul contains, before assigning the new li elements a class of even or odd that will enable css
 styling.
#msgTarget li:nth-child(odd)
{   
    background-color: #CCC;
}
#msgTarget li:nth-child(even)
{   
    background-color: #5C5;
}
*/

.odd
{   
    background-color: #CCC;
}
.even
{   
    background-color: #5C5;
}

</style>
</head>
<body>
    <div class='dlg'>
        <div class='controls'>
            <input id='newMsgTxtInput'/><button id='btnAddNew'>Add message</button>
        </div>
        <ul id='msgTarget'></ul>
    </div>
</body>
</html> 
```

# iis - 使用 AppCmd 在 IIS Express 中的虚拟目录上设置密码

> ID：15967914
> 
> 赞同：0
> 
> 时间：2013-04-12T09:39:22.637
> 
> 标签：iis, iis-express, appcmd

我有一个带有指向文件共享的物理路径的 vdir。在 applicationhost.config 的 vdir 配置部分将“userName”和“password”属性设置为有权访问该共享的用户可以正常工作，但密码是明文形式。

我希望在 applicationhost.config 文件中加密此密码。

我发现的唯一选择是使用“appcmd.exe”来执行此操作，但我无法让它以明显的方式工作：

```
appcmd.exe set vdir /vdir.name:"Default Web Site/img" /password:"ThePassword" 
```

我收到此错误：

错误（hresult:80090016，消息：未能提交配置更改。密钥集不存在）

我尝试过使用提升的 cmd 提示符，但什么也没做。设置其他属性，如用户名，可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T20:57:54.123

试试这样：

`appcmd.exe set vdir "Default Web Site/img" /username:user /password:password`

# security - SYN 拒绝服务攻击

> ID：15967915
> 
> 赞同：3
> 
> 时间：2013-04-12T09:39:32.753
> 
> 标签：security, networking, denial-of-service

这可能是一个微不足道的问题。这是关于 Syn Cookie 的。为什么只有半开连接才被认为是 DOS 攻击。客户端可能完成了握手（SYN、SYN-ACK、ACK）并且在此之后不再回复。这也将占用系统资源。

那么，如果一个客户端使用 (SYN, SYN-ACK, ACK) 序列泛滥，那为什么不被视为 DOS 攻击呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:46:56.347

所描述的[SYN 洪水攻击](http://en.wikipedia.org/wiki/SYN_flood)是[拒绝服务攻击](http://en.wikipedia.org/wiki/Denial-of-service_attack)的一种特定形式。DOS 可以采用多种形式，通常与 SYN 请求无关。

SYN Flood 攻击之所以有效，是因为您可以伪造客户端 IP 地址。这允许来自同一个客户端的大量 SYN 请求，但由于永远不会收到 SYN-ACK，因此无法发送 ACK，服务器等待响应，因此使用可用的连接服务器。发送 SYN 和 ACK 的客户端不会用完可用的连接。大量无用的（SYN，SYN-ACK，ACK）仍然是DOS攻击，只是没有那么有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T05:44:48.247

在 SYN 洪水中，客户端不必跟踪状态或完成连接。客户端产生大量带有欺骗 IP 的 SYN 数据包，这可以非常快地完成。服务器（当不使用 SYN cookie 时）消耗资源等待每次连接尝试超时或完成。因此，这是一个非常有效的 DoS，它利用（DoS-ing）客户端与被攻击服务器消耗的资源在 1:10000 的范围内。

如果客户端完成每个连接，则杠杆作用消失 - 服务器不必再等待，客户端必须开始跟踪状态。因此我们有 1:1 而不是 1:10000。这里有一个次要问题 - 与已建立的连接相比，半开连接的缓冲区（或首次发明此攻击时）较小，并且（曾经）更容易耗尽。

SYN cookie 允许服务器在回复 SYN 数据包后立即忘记连接，直到它收到并以正确的序列号确认。在这里，资源使用再次变为 1:1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T04:59:34.417

是的，Sockstress 是一种从 2008 年开始的旧攻击，它**完成 TCP 握手**，然后将 Window 大小降低到零（或其他一些小值），在第 4 层绑定连接，有点类似于 SlowLoris 第 7 层攻击。 [单击此处](https://defuse.ca/sockstress.htm)了解有关 Sockstress 的更多信息

# flot - 有没有办法在不触发 plotclick 事件的情况下触发 plotselected 事件？

> ID：15967917
> 
> 赞同：3
> 
> 时间：2013-04-12T09:39:37.457
> 
> 标签：flot

我需要图表中的点击事件。但我还需要允许用户选择放大范围。

点击事件已正确注册。但是在进行选择时，它会同时触发`plotselected`和`plotclick`事件。

如何防止在`plotclick`触发时`plotselected`触发事件？

选择插件：[https ://github.com/flot/flot/blob/master/jquery.flot.selection.js](https://github.com/flot/flot/blob/master/jquery.flot.selection.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:36:38.463

目前没有，没有办法避免同时获得这两个事件。

一种解决方案可能是删除“可点击”选项，而是收听“plotunselected”事件，该事件由不拖拽的点击触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T03:13:21.717

问题是`plotselected`触发`plotclick`事件。

以下条件检查解决了我的问题。

```
$("#graph").bind("plotclick", function (event, pos, item) {
        if (item == undefined) return false;
        // the rest of the click event here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-14T21:45:42.820

[resting 的答案](https://stackoverflow.com/a/16578404/1355117)对我来说不太管用，因为`plotclick`即使没有点击任何项目，我的用例也需要处理事件。

通过在事件处理程序中设置一个变量然后在处理程序中检查它，我能够确定事件是否是事件处理程序中的`plotselection`vs`plotclick`事件：`plotclick``plotselection``plotclick`

```
var plotSelectionEvent = false;

$("#placeholder").bind("plotselected", function (event, ranges) {

    plotSelectionEvent = true;

    // rest of the plot selection event code

});

$("#placeholder").bind("plotclick", function (event, pos, item) {

    // check if this event was originally a plot selection event
    // reset the variable and return if it was
    if (plotSelectionEvent) {
        plotSelectionEvent = false;
        return;
    }

    // rest of the plot selection event code

}); 
```

# c++ - 在 Visual Studio 调试模式下运行时 c++ 对象引用损坏

> ID：15967918
> 
> 赞同：2
> 
> 时间：2013-04-12T09:39:39.317
> 
> 标签：c++, visual-c++

我有两个班级，Foo 和 Bar。Bar 维护对 Foo 的引用，并具有调用 Foo 中的方法来更改其状态的方法。代码如下所示。

```
class Foo
{
private:
    double m_value;

public:
    void setValue(double value) { 
        this->m_value = value;
    };

    double getValue() {
        return this->m_value;
    };
};

class Bar
{
private:
    Foo& m_foo;

public:
    Bar() : m_foo(Foo()) {
    };

    void setFooValue(double value) {
        m_foo.setValue(value);
    };

    double getFooValue() {
        return m_foo.getValue();
    };
}; 
```

当我在设置后尝试访问 foo 的值时出现问题，如下所示：

```
Bar bar;

bar.setFooValue(10000.0);

double value = bar.getFooValue();

std::cout << "Foo value is: " << value << std::endl; 
```

哪个输出`Foo value is -9.25596e+061`。看来内存已损坏 - 为什么？我知道不将 m_foo 存储为参考（即使用`Foo m_foo;`）将解决问题，但是我也不明白为什么会这样。

更令人费解的是，上面的代码在发布模式下运行时可以正常工作。

我正在使用 Visual Studio 2010 进行编译。

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:07:00.213

很少有编译器会报告构造函数 Bar() 的错误。我在编译时遇到以下错误，

> 在构造函数“Bar::Bar()”中：由于 -Wfatal-errors 导致“Foo”类型的临时编译终止的“Foo&”类型的非常量引用的无效初始化

```
Bar() : m_foo(Foo()) { }; 
```

在构造函数 Bar 中， Foo() 返回一个在堆栈中创建的对象，当构造函数返回时，它的生命周期结束。因此它的生命周期是暂时的，这将导致访问未定义的内存或悬空引用。

解决方案 1：按原样使用 Foo 对象，无需任何引用

```
class Bar
{
private:
   Foo m_foo;

public:
   Bar(){
};

void setFooValue(double value) {
    m_foo.setValue(value);
};

double getFooValue() {
    return m_foo.getValue();
};
}; 
```

解决方案 2：将 Foo 对象作为参数传递给 Bar 构造函数，这将在 main 范围内保持有效。

```
class Bar
{
private:
    Foo &m_foo;

public:
    Bar(Foo &x) : m_foo(x) {
};

void setFooValue(double value) {
    m_foo.setValue(value);
};

double getFooValue() {
    return m_foo.getValue();
};
};    

int main()
{
Foo x;
Bar bar(x);

bar.setFooValue(10000.0);

double value = bar.getFooValue();

std::cout << "Foo value is: " << value << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:45:27.043

当你创建酒吧

```
Bar() : m_foo(Foo()) {
}; 
```

您提供对新创建的 foo 实例的引用，该实例将超出范围并在分配给 m_foo 后立即被删除。这实际上是 VS c 编译器缺陷，因为 g++ 会给您和此类代码错误，您可以在此处看到。 [http://liveworkspace.org/code/3kW04t](http://liveworkspace.org/code/3kW04t) $218

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T09:42:31.907

```
Bar() : m_foo(Foo()) 
```

您正在尝试从`lvalue-reference`初始化`temporary`。你不应该做这样的事情。在最后一个括号之后 - 对象将被销毁，您将有悬空引用。确实，MSVC 中有一个非标准的扩展，它允许绑定临时对象来引用。例如 gcc[在此处为此类案例测试](http://liveworkspace.org/code/2R0kjh$0)给出错误您也可以检查此答案[rvalue to lvalue conversion Visual Studio](https://stackoverflow.com/questions/11508607/rvalue-to-lvalue-conversion-visual-studio)。

# javascript - 在图像上单击显示图像后面的文本

> ID：15967922
> 
> 赞同：-2
> 
> 时间：2013-04-12T09:39:43.813
> 
> 标签：javascript, jquery

我正在制作一个图像滑块。我想这样做，所以当用户单击图像时它应该被隐藏，即图像后面的文本应该是可见的。

在我的图像的 OnClick 事件中，我编写了隐藏图像的代码，但是如果我希望它在用户再次单击该图像或任何其他选项时再次可见怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:49:07.330

在您的 onclick 事件中，您可以在文档上创建一次单击事件，该事件将再次显示图像。

当用户点击外部时，这也会显示图像。

确保文档上的单击事件仅是一次，以避免不必要的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:49:39.410

与 fadeToggle 类似，您可以只使用切换（速度）。这将在 display none 和 block 之间切换。

```
$(document).on('click','#imageContainer',function(){
    $('#image').toggle();
)}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:47:55.987

您可以像这样使用 jquery SlideToggle() 或 show() 和 hide() 方法：

```
 <div id="yourid"></div>

$(document).ready(function(){
        $('#btnid').click(function(){
             $('#divid').show();

         });
         $('#btnid2').click(function(){
             $('#divid).hide();
         });
    }); 
```

# c++ - 每次处理后删除所有使用的指针

> ID：15967923
> 
> 赞同：0
> 
> 时间：2013-04-12T09:39:43.660
> 
> 标签：c++, visual-studio-2010

我的想法是在每次迭代后摆脱我在函数中使用的所有指针。

我的情况：我正在使用一个计算数百万次值的循环。但是在每次迭代（i++）之后，我想释放它们而不是在即将进行相同迭代时用以前的迭代覆盖它们，以免出现一些问题。

有没有办法在几行中释放我正在使用的所有指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:41:32.857

[使用智能指针](http://en.wikipedia.org/wiki/Smart_pointer)分配您的对象，它们会自动释放。

```
for (int i(0); i < 10000000; ++i)
{
    std::unique_ptr<Foo> pFoo(new Foo());
    std::unique_ptr<Bar> pBar(new Bar(pFoo.get()));

    pBar->DoSomething();
} 
```

离开循环范围时，`std::unique_ptr`-object 会自动销毁，因为它们是在堆栈上分配的。他们的析构函数调用`delete`他们管理的对象。

# android - 向数据库表中插入行：检查它是否有效？

> ID：15967924
> 
> 赞同：-1
> 
> 时间：2013-04-12T09:39:50.980
> 
> 标签：android, database, eclipse

我的数据库中有两张表：一张是内容，另一张是空的（我只建立了字段的名称，仅此而已）。整个数据库位于我的应用程序的资产文件夹中。

我有一个方法应该在每次单击按钮时向这个空表添加一个新元素。

```
 OnClickListener poi_favoritesbutton_listener = new OnClickListener(){
        @Override
        public void onClick(View v) {
            DatabaseAdapter.insertInTable(ID_NAME, ID_CAT1, ID_CAT2, ID_CAT3, ID_CUISINE);
        }
    }; 
```

这是方法：

```
 public static long insertInTable(String ID_NAME, String ID_CAT1,
        String ID_CAT2, String ID_CAT3, String ID_CUISINE) {
    ContentValues data = new ContentValues();
    data.put(FAV_NAME, ID_NAME);
    data.put(FAV_CAT1, ID_CAT1);
    data.put(FAV_CAT2, ID_CAT2);
    data.put(FAV_CAT3, ID_CAT3);
    data.put(FAV_CUISINE, ID_CUISINE);
    if (myDatabase == null) {

    }
    return myDatabase.insert("DATABASE_FAVTABLE", null, data);
} 
```

我认为这应该是正确的，因为我已经关注了关于 SOF 相关主题的讨论，但我不只是想“思考”，而是要确定！我尝试使用调试模式/DDMC，但无法实时打开我的数据库并检查其内容的演变......

有什么建议吗？谢谢 ！

ps：我正在使用一个真实的设备来运行我的测试，模拟器只是在消磨我的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T09:42:01.233

根据[insert() 文档](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insert%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)：

> 返回新插入行的行 ID，如果发生错误，则返回 -1

所以基本上你只需要检查你是否没有得到`-1`回报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:44:31.073

> 无法实时打开我的数据库并检查其内容的演变

您可以将数据库表拉到设备上，并在 DDMS 选项卡-> 文件资源管理器下查看表的内容

# iphone - 如何在表格视图上方创建一个箭头

> ID：15967926
> 
> 赞同：0
> 
> 时间：2013-04-12T09:39:55.187
> 
> 标签：iphone, ios, objective-c, uitableview

我需要设计一个看起来像这样的视图。我知道这是顶栏下方的 UITableView。但是我如何创建一个箭头，如附加图像中所示。任何指南都会有所帮助谢谢

![在此处输入图像描述](https://i.stack.imgur.com/u3UU2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:46:18.530

这不是关于上面的**“创建箭头”**`UITableView`，而是关于在图像中**“显示白色三角形”**。此外，更改图像`UIButton`更简单。

更改此图像

![在此处输入图像描述](https://i.stack.imgur.com/mftie.png)

和

![在此处输入图像描述](https://i.stack.imgur.com/jKwnv.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:45:35.620

可以有不同的方法来实现它，但更简单的方法是使用这个库[SDSegmentedControl](https://github.com/rs/SDSegmentedControl)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T09:44:45.790

它似乎是表格的标题视图。使用这个方法

```
 -(UIView*)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
      {
         UIView *view = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, 40)];
                               //create your view here. buttons lable image etc.
         return view;
      } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T09:47:52.710

![在此处输入图像描述](https://i.stack.imgur.com/gCGzA.png)您可以创建自定义标题视图，而不是为所有表格提供背景视图。将背景图像添加到标题视图中，数组指向相反的方向。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T12:29:24.873

如果您要根据箭头所在的按钮更改视图的其余部分，您可能还需要考虑`UITableViewController` [将`UITabBarController`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarController_Class/Reference/Reference.html). 我不相信您将无法获得与屏幕截图中相同的配色方案，但许多幕后工作会根据所选内容更改视图的其余部分你（或者至少会更容易设置）。此外，当您尝试用自己的方式做一些已经可以使用内置 UI 框架完成的事情时，Apple 似乎倾向于抱怨“非标准界面”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T09:44:55.793

只需在 中使用箭头图像`uiimageview`，因为它仅在`uitableview`.

如果箭头将移动到 ex、series 或 title 的其他标签，则只需更改该箭头 imageview 的框架（您也可以使用`uiviewanimations`）。当我遇到同样的问题时，这就是我所做的。

# html - 视频标签下方的标签不可见

> ID：15967928
> 
> 赞同：1
> 
> 时间：2013-04-12T09:39:57.847
> 
> 标签：html, html5-video

我正在学习 html5，我编写了这个简单的代码片段：

```
<!DOCTYPE html>
<html>
<head>
    <title>test video</title>
</head>
<body>
    <video src="movie.webm" controls/>
    <h1>this is a header below the video</h1>
</body>
</html> 
```

视频在屏幕上显示良好，但问题是我无法查看`<h1>`视频下方的标签。我已经在 Opera 和 Firefox 中进行了测试。你知道我在这里想念什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:42:36.517

您需要明确关闭`<video>`标签：

```
<body>
    <video src="movie.webm" controls></video>
    <h1>this is a header below the video</h1>
</body> 
```

这是[一个例子](http://jsfiddle.net/6uGkF/)。注意第一个标题是如何显示的，而第二个不是。

只是为了完整起见，这就是[规范必须说的](http://www.whatwg.org/specs/web-apps/current-work/#the-video-element)：

> **text/html 中的标记省略**：
>     两个标记都不可省略。

# html - CSS 菜单 - IE 显示问题

> ID：15967933
> 
> 赞同：1
> 
> 时间：2013-04-12T09:40:10.503
> 
> 标签：html, css

我正在尝试创建一个带有圆角的下拉菜单，并且几乎已经到了那里，但在 IE 中存在一个小问题。如果您在 FF 中查看此链接 ( [http://ids-ind.com/koris/dropdown.html](http://ids-ind.com/koris/dropdown.html) )，它看起来和工作正常，但在 IE 中，右侧有一个平顶。

请你能告诉我需要做什么/改变让它看起来像它在FF中的样子吗？

下面是我正在使用的 CSS

```
a:link {text-decoration:none;}

/* tabs
*************************/

ul.tabs
{
    display: table;
    margin: 0;
    padding: 0;
    list-style: none;
    position: relative;
}

ul.tabs li
{
    margin: 0 0 0 1px;
    padding: 0;
    list-style: none;
    display: table-cell;
    float: left;
    position: relative;
    background:url('../images/menuleft_bg.png') left bottom no-repeat; 
    line-height:55px;
    width:130px;
}

ul.tabs a
{
    position: relative;
    display: block;
    background:url('../images/menuright_bg.jpg') right bottom no-repeat;
}

/* dropdowns
*************************/

ul.dropdown
{
    margin: 0;
    padding: 0;
    display: block;
    position: absolute;
    z-index: 999;
    top: 100%;
    width: 130px;
    display: none;
    left: 0;
}

ul.dropdown ul.dropdown
{
    top: 0;
    left: 100%;
}

ul.dropdown li
{
    margin: 0;
    padding: 0;
    float: none;
    position: relative;
    list-style: none;
    display: block;
}

ul.dropdown li a
{
    display: block;
}

/* menu-specifc
*************************/

#menu
{
    position: fixed;
    z-index: 5;
    top: 0;
    left: 0;
    height: 40px;
    line-height: 40px;
    border-bottom: 0px solid #000;
}

#menu ul
{
    margin: 0 auto;
}

#menu ul li h4
{
    margin: 0;
}

#menu ul li h4 a
{
    font-size: 14px;
    color: #000;
    font-weight: bold;
    padding: 0 15px;
}

#menu ul li a
{
    color: #fff;
    padding-left: 4px;
}

#menu ul li a img
{
    vertical-align: middle;
}

#menu ul li a span
{
    display: block;
    padding: 0 20px;
    text-align:center;
}

#menu ul.dropdown
{
    padding: 20px 0;
    background-image: url('../images/dropdownbg.png');
    overflow:hidden;
    border-bottom: 0px solid #dc902f;
    width: 130px;
    z-index:110;
}

#menu ul.dropdown li a
{
    border-bottom: 0px solid #e5cd8e;
    line-height: 30px;
    overflow: hidden;
    height: 30px;
    background-image: url('../images/dropdownbg2.png');
}

#menu ul.dropdown li.last a
{
    border-bottom-width: 0;
}

#menu ul.dropdown li a:hover
{
    color:#990000;
}

#menu ul li h4 a:hover
{
    background-image: none;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T09:47:23.710

remove the `position:relative;` in below

```
ul.tabs a{} 
```

# unit-testing - 使用 utPLSQL 对 ref 游标执行测试时，如何找到 ora-01031 权限不足的来源？

> ID：15967934
> 
> 赞同：1
> 
> 时间：2013-04-12T09:40:13.270
> 
> 标签：unit-testing, plsql

我正在研究 PLSQL 中的单元测试。我建立了一个测试数据库，其中包含一些带有函数和过程的表和包。目前，我正在尝试测试框架“utPLSQL”，但在对 ref 游标进行测试时偶然发现了一个错误。我可以运行我的所有测试，但是 ref 游标上的测试结果显示“ora-01031 权限不足”，这就是我所得到的。我怎样才能找到这个错误的来源？或者有没有人遇到过同样的问题？utPLSQL 安装成功，测试框架的所有其他功能都可以正常工作。

这是我要测试的过程：

```
FUNCTION F_Get_Customers_RefCurs(P_LASTNAME IN VARCHAR2)
RETURN cust_refcur
IS
cust_result cust_refcur;
BEGIN
  OPEN cust_result FOR
    SELECT *
    FROM CUSTOMERS
    WHERE LASTNAME = P_LASTNAME
    ORDER BY email ASC;
  return(cust_result);
END F_Get_Customers_RefCurs; 
```

我在包含我的函数的包的规范中声明了 cust_refcur，如下所示：

```
TYPE cust_refcur IS REF CURSOR; 
```

这是测试：

```
PROCEDURE ut_F_Get_Customers_RefCurs
IS
params utplsql_util.utplsql_params;
BEGIN
  utPLSQL_Util.reg_In_Param (1,
                           'Tester',
                           params);
  UTASSERT.eq_refc_query ('Get customers on last name is successful (refcursor)',
                        'PK_ORDERS.F_GET_CUSTOMERS_REFCURS',
                        params,
                        0,
                        'SELECT customerid, firstname, lastname, email, password
                         FROM CUSTOMERS
                         WHERE LASTNAME = ''Tester''
                         ORDER BY email ASC');
END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:15:19.373

我试着让你的例子工作，但不幸的是，我从 utPLSQL 得到了奇怪的错误。

由于 Sourceforge 上的 utPLSQL 的最后一个版本是 2005 年，而 Steven Feuerstein 现在正在开发一个基本相同的商业产品，我建议寻找其他解决方案来对您的 PL/SQL 代码进行单元测试 - 一些链接：

*   Oracle SQL Developer 有一些[内置的单元测试功能](http://docs.oracle.com/cd/E35137_01/appdev.32/e35117/unit_testing.htm#BCGHEHFE)，而且是免费的
*   还有[Quest 代码测试器](http://www.quest.com/toad-development-suite-for-oracle/code-tester-for-oracle.aspx)（这个是商业的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T16:01:01.220

可能是'RETURN cust_refcur'引起的，utplsql使用的类型存储在varchar2（10）中，试试'return refcur'？-zhaozb

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T00:30:53.003

运行此断言 ( `eq_refc_query`) 时，utPLSQL 需要临时创建一个表。它通过使用`EXECUTE IMMEDIATE`which 要求用户具有`CREATE TABLE`直接授予他们的权限，而不是通过角色来做到这一点。

[全面披露：我是 utPLSQL 项目的管理员之一]

# mongodb - MongoDB内嵌二级复合索引覆盖慢查询

> ID：15967936
> 
> 赞同：2
> 
> 时间：2013-04-12T09:40:18.037
> 
> 标签：mongodb, indexing

我有以下嵌入式二级复合索引：

```
db.people.ensureIndex({"sources_names.source_id":1,"sources_names.value":1}) 
```

这是 db.people.getIndexes() 的一部分：

```
{
    "v" : 1,
    "key" : {
        "sources_names.source_id" : 1,
        "sources_names.value" : 1
    },
    "ns" : "diglibtest.people",
    "name" : "sources_names.source_id_1_sources_names.value_1"
} 
```

所以我运行以下索引覆盖查询：

```
db.people.find({ "sources_names.source_id": ObjectId('5166d57f7a8f348676000001'), "sources_names.value": "Ulrike Weiland" }, {"sources_names.source_id":1, "sources_names.value":1, "_id":0} ).pretty()
{
    "sources_names" : [
        {
            "value" : "Ulrike Weiland",
            "source_id" : ObjectId("5166d57f7a8f348676000001")
        }
    ]
} 
```

花了大约5秒钟。所以我运行解释：

```
db.people.find({ "sources_names.source_id": ObjectId('5166d57f7a8f348676000001'), "sources_names.value": "Ulrike Weiland" }, {"sources_names.source_id":1, "sources_names.value":1, "_id":0 }).explain()
{
    "cursor" : "BtreeCursor sources_names.source_id_1_sources_names.value_1",
    "isMultiKey" : true,
    "n" : 1,
    "nscannedObjects" : 1260353,
    "nscanned" : 1260353,
    "nscannedObjectsAllPlans" : 1260353,
    "nscannedAllPlans" : 1260353,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 4,
    "nChunkSkips" : 0,
    "millis" : 4308,
    "indexBounds" : {
        "sources_names.source_id" : [
            [
                ObjectId("5166d57f7a8f348676000001"),
                ObjectId("5166d57f7a8f348676000001")
            ]
        ],
        "sources_names.value" : [
            [
                {
                    "$minElement" : 1
                },
                {
                    "$maxElement" : 1
                }
            ]
        ]
    },
    "server" : "dash-pc.local:27017"
} 
```

但是为什么这个索引覆盖查询会遍历整个数据库呢？我应该如何创建索引来提高性能？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:03:04.690

您正在多个地方使用多键索引（即`sources_names.source_id`），来自文档（[http://docs.mongodb.org/manual/tutorial/create-indexes-to-support-queries/#create-indexes-that-support-覆盖查询](http://docs.mongodb.org/manual/tutorial/create-indexes-to-support-queries/#create-indexes-that-support-covered-queries)）：

> 在以下情况下，索引不能覆盖查询：
> 
> 集合中任何文档中的任何索引字段都包含一个数组。如果索引字段是数组，则索引成为多键索引索引，不能支持覆盖查询。

您可以从解释中看出这是一个多键索引：

```
"isMultiKey" : true, 
```

基本上，点表示法被归类为多键，因为`sources_names`它是一个数组，因此索引包含一个数组。

至于提高速度：我没有看过这个，但你的问题在这里：

```
"sources_names.value" : [
    [
        {
            "$minElement" : 1
        },
        {
            "$maxElement" : 1
        }
    ]
] 
```

因此，该索引没有被最佳地用于查找`sources_names.value`.

### 编辑

我觉得我刚才给出的答案有点奇怪，因为这不应该是一个多键索引，所以我实际上去测试了这个：

```
> db.gh.ensureIndex({'d.id':1,'d.g':1})
> db.gh.find({'d.id':5, 'd.g':'d'})
{ "_id" : ObjectId("516826e5f44947064473a00a"), "d" : { "id" : 5, "g" : "d" } }
> db.gh.find({'d.id':5, 'd.g':'d'}).explain()
{
        "cursor" : "BtreeCursor d.id_1_d.g_1",
        "isMultiKey" : false,
        "n" : 1,
        "nscannedObjects" : 1,
        "nscanned" : 1,
        "nscannedObjectsAllPlans" : 1,
        "nscannedAllPlans" : 1,
        "scanAndOrder" : false,
        "indexOnly" : false,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "millis" : 0,
        "indexBounds" : {
                "d.id" : [
                        [
                                5,
                                5
                        ]
                ],
                "d.g" : [
                        [
                                "d",
                                "d"
                        ]
                ]
        },
        "server" : "ubuntu:27017"
} 
```

看来我最初的想法是正确的，这不应该是多键索引。`value`我认为你有一些脏数据，这给你带来了问题。

我会检查您的数据库并确保您的记录输入正确。

你很可能有类似的东西：

```
{
    "sources_names" : [
        {
            "value" : ["Ulrike Weiland", 1],
            "source_id" : ObjectId("5166d57f7a8f348676000001")
        }
    ]
} 
```

某处。

# opendata - 使用第三方应用访问 DataStoreAPI

> ID：15967938
> 
> 赞同：1
> 
> 时间：2013-04-12T09:40:27.337
> 
> 标签：opendata, ckan

我想用 ruby​​ 访问[CKAN DataStoreAPI 。](http://docs.ckan.org/en/latest/datastore-api.html)我有一些问题。是否可以使用 ruby​​ 访问 DataStoreAPI？我想在数据存储中创建、读取和更新资源，我更喜欢 ruby​​。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T22:50:57.350

由于 CKAN API 使用 HTTP，您可以使用您喜欢的任何语言访问它，只需点击正确的 URI。例如，有 PHP 库 ( [https://github.com/opencolorado/PHP-Wrapper-for-CKAN-API](https://github.com/opencolorado/PHP-Wrapper-for-CKAN-API) ) 和 .NET ( [https://github.com/opencolorado/.NET-Wrapper-for -CKAN-API](https://github.com/opencolorado/.NET-Wrapper-for-CKAN-API)）。不过，它们看起来被遗弃了。

虽然我也更喜欢 Ruby，但除非你有充分的理由使用它，否则我建议你坚持使用 Python。[使用https://github.com/open-data/ckanapi](https://github.com/open-data/ckanapi)和[https://github.com/dgraziotin/libckan](https://github.com/dgraziotin/libckan)等 API 时，有一些很好的库会很有帮助。据我所知，Ruby 中没有 CKAN 库，所以你必须自己构建。

# jquery - jQuery Mobile type="button" 或 type="submit" 不工作 (UI)

> ID：15967942
> 
> 赞同：0
> 
> 时间：2013-04-12T09:40:45.067
> 
> 标签：jquery, cordova, jquery-mobile

标记内的jQuery Mobile`type="submit"`或`type="button"`(UI)`<form>`不起作用。相同的东西被替换`type="text"`或除此之外的任何东西都可以完美地工作`type="button"`。`type="submit"`

代码是

```
<head>
<script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery.min.js"></script>
<script type="text/javascript" charset="utf-8" src="bootstrap/js/bootstrap.js"></script>
<script type="text/javascript" charset="utf-8" src="bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" charset="utf-8" src="js/twitter.js"></script>
<script type="text/javascript" src="js/jquery.mobile-1.3.1.min.js"></script>

<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="css/jquery.mobile-1.3.1.min.css" />

</head>
<body>

<div data-role="page">
  <div data-role="header"><h4>Pay</h4></div>

  <div data-role="content">
   <h4>You are about to Pay Nrs <span id="paymentAmount"></span> for <span id="trees"></span> Trees.</h4>

   <form id="paymentForm">
               <div data-role="fieldcontain">
                      <input value="100"       name="amt"   type="hidden">
               </div>
               <div>
                      <input value="Pay" type="button" name="payBtn"/>
               </div>
    </form>
   </div>
</div> 
```

![JQM typeButton](https://i.stack.imgur.com/XG9Tz.png)

# ****jsfidlle 上的相同代码（没有我的脚本和链接导入）显示为****

**![在此处输入图像描述](https://i.stack.imgur.com/ONAW4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:35:42.483

jQuery 版本是导致你的问题。

您应该切换到**[jQuery 1.9.1](http://code.jquery.com/jquery-1.9.1.min.js)**，一切都应该正常工作。**

# radio-button - 使用 Casperjs 设置单选按钮

> ID：15967945
> 
> 赞同：3
> 
> 时间：2013-04-12T09:40:52.577
> 
> 标签：radio-button, casperjs

我试图用 CasperJS 设置单选按钮的值但没有成功。

有人可以向我解释为什么 assertEval 在这个测试中失败了吗？

```
 this.test.assertExist('input[name=main][value=yes]');

    casper.thenEvaluate(function(term) {
        document.querySelector('input[name=main][value=yes]').setAttribute('checked', true);
    });

    this.test.assertEval(function() {
        return document.querySelector('input[name=main][value=yes]').getAttribute('checked') == "true";
    }, 'Main was set to true'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T22:20:16.590

要了解此断言失败的原因，我们需要了解每次调用都`casper.then`定义了一个新的导航步骤，并`casper.run`按照定义的顺序执行每个步骤。所以你的代码`casper.then`块中的代码是一个异步回调。

如果您像这样注释代码：

```
 this.test.assertExists('input[name=main][value=yes]');

    casper.then(function() {
        this.echo('Select the radio button');
        this.evaluate(function() {
            document.querySelector('input[name=main][value=yes]').setAttribute('checked', true);
        }
    });

    this.echo('Assert that the radio button is selected');
    this.test.assertEval(function() {
        return document.querySelector('input[name=main][value=yes]').getAttribute('checked') == "true";
    }, 'Main was set to true'); 
```

您会注意到在“选择单选按钮”之前打印了“断言已选择单选按钮”。所以有你的问题！

## 解决方案：

`then`如果您不执行任何导航步骤，则可能不需要使用。在这种情况下，您可以简单地使用`evaluate`而不是`thenEvaluate`. 或者如果你真的需要使用`then`，只需放入`assertEval`同一个`casper.then`块中：

```
 this.test.assertExists('input[name=main][value=yes]');

    casper.then(function() {
        this.evaluate(function(term) {
            document.querySelector('input[name=main][value=yes]').setAttribute('checked', true);
        });
        this.test.assertEval(function() {
            return document.querySelector('input[name=main][value=yes]').getAttribute('checked') == "true";
        }, 'Main was set to true');
    }); 
```

# c# - 有没有办法可以在 steema tchart 中拖一条线？

> ID：15967948
> 
> 赞同：0
> 
> 时间：2013-04-12T09:41:01.213
> 
> 标签：c#, teechart

我的 tchart 中有 fastline。

我正在向 fastline 添加一个数组作为数据源。

在运行时，在 tchart 中绘制 fastline。现在我想做的是从它的特定点拖动一条线，上下移动等等，结果 fastline 将改变数据点的值和形状。一旦用户这样做，我会将数据从 fastline 获取到数组。像这样的拖动功能。[http://www.algorithmist.net/qbparam.html](http://www.algorithmist.net/qbparam.html) 所以，我可以用鼠标控制线路。

可能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:23:13.677

您可以为此使用该`DragPoint`工具。

请参阅安装随附的功能演示中的“所有功能\欢迎！\工具\拖动点”中的示例。

这是一个例子：

```
Steema.TeeChart.Styles.Line line1 = new Steema.TeeChart.Styles.Line();
tChart1.Series.Add(line1);
line1.fillSampleValues();

Steema.TeeChart.Tools.DragPoint dragPoint1 = new Steema.TeeChart.Tools.DragPoint();
tChart1.Tools.Add(dragPoint1);
dragPoint1.Cursor = System.Windows.Forms.Cursors.Hand;
dragPoint1.Series = line1; 
```

# c++ - 如何在 Visual Studio 2005 中使用 Manifest 文件以管理员权限运行应用程序？

> ID：15967949
> 
> 赞同：18
> 
> 时间：2013-04-12T09:41:01.883
> 
> 标签：c++, windows-8, windows-vista, manifest, windows-server

我需要创建一个应用程序，该应用程序需要在“C:\Program Files”、“Users[username]”和 Sys32 中创建文件/文件夹。此外，应用程序需要创建一些注册表项。

此应用程序需要在 Vista 及更高版本上运行。此外，在 Windows Server 2003 及更高版本上。

上述操作系统具有用户帐户控制（UAC）的概念，在哪里访问程序文件和写入注册表需要管理员权限。

我查看了很多论坛，发现使用 Microsoft SDK 我们可以检查当前用户是否具有管理员权限。但是对于 Vista 和更高版本的操作系统，“CheckTokenMembership”功能失败。

我还找到了一个解决方案，可以使用清单文件提前告诉操作系统当前应用程序需要管理员权限。这是使用“requestedExecutionLevel”标签完成的。

我正在使用 Visual Studio 2005 创建应用程序。当我们在 Visual Studio 中创建应用程序时，会创建一个默认清单文件。我可以更改此清单文件以包含“requestedExecutionLevel”标签，以便我的应用程序始终以管理员权限运行吗？

是否有任何其他方法可以让我的应用程序以管理员权限运行而不要求用户（管理员或标准）以“以管理员身份运行”运行我的应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-08-11T18:01:35.227

您应该在项目属性 Linker -> Manifest File -> UAC Execution Level 中找到一个选项。将此设置为`requireAdminstrator`。

这将导致默认生成的清单包含`requestedExecutionlevel`您需要的内容，这样如果您的用户尚未提升权限，则会自动提示他们提升他们的权限。

![Visual Studio UAC 选项的屏幕截图](https://i.stack.imgur.com/soXvJ.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-05T02:34:07.553

**致谢和介绍**

这个问题帮助了我，我会用我获得的知识来帮助我。谢谢：

1.  Lipika（提出问题的人）揭示了管理员访问权限是将系统目录的访问权限重定向到虚拟目录的原因。后来很清楚，缺乏管理员访问权限会导致写入某些注册表项失败。

2.  snowcrash09 用于显示用于启用需要管理员访问权限的 Visual Studio 选项。随着对 MSDN 的进一步研究，我发现清单没有嵌入到 Properties>Manifest Tool 下的可执行文件中；从而允许我阅读它。

Nayana 与多项式答案的链接也很好。在这里，我将在我的演示中借用他的部分答案。

**回答**

正如 Lipika 所说，您需要管理员访问权限，否则 Windows Vista 及更高版本会将您重定向到虚拟目录。这是伟大的。从逻辑上讲，您的应用程序应该请求管理员访问权限。您可以让用户手动执行此操作。如果没有，Windows 提供了许多以编程方式执行此操作的方法。最简单的方法是在应用的清单中声明它。在这里，我将专门为不使用 Visual Studio 的个人提供说明。如果您使用的是 Visual Studio，它就像 Properties>Linker>Manifest File>UAC Execution Level 一样简单。

例如，如果您使用 CodeBlocks；创建一个名为 app_resources.rc 的文件。对于 CodeBlocks，它非常重要的是该文件具有`.rc`扩展名，因此 CodeBlocks 知道使用 Windows 资源工具编译它。将以下代码复制到此文件中，并将其添加到您的项目中。

```
#include <windows.h>
CREATEPROCESS_MANIFEST_RESOURCE_ID RT_MANIFEST "adminAccess.manifest" 
```

创建一个名为 adminAccess.manifest 的清单文件。将以下代码复制到文件中。不需要将此文件添加到您的项目中，因为它是从您的 rc 文件中引用的。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
   <assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0"> 
      <assemblyIdentity 
          version="1.0.0.0"
          processorArchitecture="X86"
          name="MyApplication"
          type="win32"/> 

     <description>Description of your application</description> 

     <!-- Identify the application security requirements. -->
     <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
        <security>
           <requestedPrivileges>
              <requestedExecutionLevel 
                   level="requireAdministrator" 
                   uiAccess="false"/>
           </requestedPrivileges>
         </security>
     </trustInfo>
 </assembly> 
```

现在您可以编译您的应用程序，它会在运行时自动提示输入管理员凭据。如果未授予管理员访问权限，它将返回失败。在 Windows Xp 上，不会提示您进行任何身份验证。

请注意，您可以在此处编辑清单以添加功能，例如 Windows 小部件的视觉样式和 DPI 感知。

如果您不使用 CodeBlocks。例如，您正在从命令行编译。您几乎必须使用 Windows 资源工具编译 rc 文件。在 MinGw 构建工具中，这称为 windres.exe。它将编译一个`.res`文件。然后，您将此生成的文件与您将在链接器阶段链接的所有其他文件链接。

请注意，rc 文件是一个 Windows 资源文件，其中包含您的应用程序使用的所有资源，例如 BITMAP、ICON、STRING、对话框模板。这将全部存储在最终的可执行文件中。然后，您可以使用 Windows 特定功能从可执行文件中加载。这与 Android 所做的非常相似。

# matlab - 绘制曲线而不是直线

> ID：15967951
> 
> 赞同：2
> 
> 时间：2013-04-12T09:41:03.663
> 
> 标签：matlab, plot

在 matlab 中，我有一个向量 say和say`x`的函数。我想在matlab中绘图。`x``y``x``y`

问题是我想要平滑的曲线（不是平滑的纹理，而是可区分的，并且没有急弯）。带有绘图的 Matlab 只是将点连接起来，并且绘制的曲线有急剧的弯曲。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:56:47.173

# c++ - 如何找出潜在的程序逻辑错误？

> ID：15967957
> 
> 赞同：0
> 
> 时间：2013-04-12T09:41:11.073
> 
> 标签：c++, visual-studio-2012

曾经有人问我一个问题：

*“如果给你一个带有源代码的程序，该程序的目标是从最终用户那里获取密码。它会过滤掉像数字“8”这样的非法输入，然后存储输入。源代码编译并运行良好“*

你能想出一个测试程序的好方法吗？是否有任何智能工具可以测试我的程序的所有可能输入？还是验证程序的智能工具？

我想一个好方法是“不修改代码”而是“只运行/测试代码”来发现潜在的问题。

PS:: 假设 VS 2012 C++

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:47:15.347

没有正确的答案。这个问题的目的是让你大声说出一个问题，以便面试官可以看到你的想法。

# html - 为什么我看不到来自我选择的链接的子菜单？

> ID：15967962
> 
> 赞同：0
> 
> 时间：2013-04-12T09:41:23.230
> 
> 标签：html, css, drop-down-menu, menubar, submenu

我想这对你来说可能很容易 css 大师 :) 我正在尝试将一些 css 应用到我目前正在处理的页面上，我想要一个下拉菜单。我从[这里](http://www.websitecodetutorials.com/code/css-nav-menus/css-drop-line-menu.php)得到了代码，只是做了一些小的修改（外部 ul 的宽度，外部 ul 的类而不是 id 和 z-index 而不是巨大的负缩进）

正如我所见，存在一些误解，这里有一些关于这个菜单应该如何工作的更多细节：

*   有两层，一层在上面，一层在下面。
*   当前从顶部菜单中选择的链接会将 css 类“当前”附加到包含该链接的 li 元素。（我为此使用 MVC SiteMapProvider，但这对于这个问题应该无关紧要）
*   **默认情况下应显示与“当前”顶部菜单关联的子菜单，**
*   **但如果用户将鼠标悬停在指向另一个顶部菜单的链接上，它应该与另一个子菜单重叠。**

（希望能澄清一点）

这是我正在使用的标记：

```
<ul class="mainMenu">
  <li>
    <a href="#">Link1</a>
    <ul>
      <li>
      <a href="#">Sub1</a>
      </li>
      <li>
      <a href="#">Sub1</a>
      </li>
      <li>
      <a href="#">Sub1</a>
      </li>
    </ul>
  </li>
  <li class="current">
    <a href="#">Link2</a>
    <ul>
      <li>
      <a href="#">Sub2</a>
      </li>
      <li>
      <a href="#">Sub2</a>
      </li>
      <li>
      <a href="#">Sub2</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="#">Link3</a>
    <ul>
      <li>
      <a href="#">Sub3</a>
      </li>
      <li>
      <a href="#">Sub3</a>
      </li>
      <li>
      <a href="#">Sub3</a>
      </li>
    </ul>
  </li>
</ul> 
```

它使用以下样式：

```
* {
    margin:0;
    padding:0;
}
.mainMenu {
    list-style:none;
    height:3.8em;
    position:relative;
    line-height:1.4em;
}
.mainMenu li {
    width:136px;
    float:left;
    text-align:center;
}
.mainMenu a {
    height:1.5em;
    display:block;
    text-decoration:none;
    color:#000;
    background:#999;
}
.mainMenu li.current ul li.current a, .mainMenu li.current a div, .mainMenu a:active, .mainMenu a:focus, .mainMenu a:hover {
    background:#777;
}
/* --------- Sub Nav --------- */
.mainMenu li.current ul {
    left:0;
}
.mainMenu ul {
    position:absolute;
    left: 0;
    z-index: 1;

    width:408px;
    list-style:none;
    padding:.9em 0 0;
}
.mainMenu ul li {
    width:auto;
    margin:0 15px 0 0;
}
.mainMenu ul a {
    font-size:80%;
    height:auto;
    padding:0 8px;
}
.mainMenu li.current ul, .mainMenu li:hover ul { 
    z-index: 10;

    background:#fff;
} 
```

另请参阅[此处](http://jsfiddle.net/jKahy/2/)以获取已经包含两者的小提琴。一般来说，这似乎工作得很好，但是当我将鼠标悬停在右侧（即 Link1）时，我无法从子菜单中看到相应的链接，尽管当我将鼠标悬停在右侧（即 Link3）时它可以工作。有人知道为什么会这样吗？

ps：我也不知道为什么当前节点没有应用样式

```
.mainMenu li.current ul 
```

（至少我在 Firefox 17.0.1 中看不到它，但是，当不在小提琴本身时我没有这个问题，所以可能是一个小问题，而不是我的主要问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:47:37.073

Just add a bit of CSS :

```
.mainMenu ul {
    display: none;
}

.mainMenu li:hover > ul {
    display: block;
} 
```

[Example](http://jsfiddle.net/jKahy/4/)

**EDIT**

Just change or remove `z-index` in `.mainMenu li.current:hover ul`. [Fiddle](http://jsfiddle.net/jKahy/15/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:57:27.097

您错过了当前课程，即第二个菜单（LINK2）。将其删除并放置在第一个链接（LINK1），如下所示

```
<li class="current">
   <a href="#">Link1</a>.......
</li>
<li> <a href="#">Link2</a> </li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:45:56.190

您已设置`class="active"`到第二个子菜单，因此第一个菜单位于（由于`z-index`设置）第二个菜单之下。将活动类添加到第一个菜单

```
<ul class="mainMenu">
          <li class="current">
            <a href="#">Link1</a>
</li>
</ul> 
```

[**演示**](http://jsfiddle.net/jKahy/3/)

# iphone - ios中Mac os的Dock菜单等自定义控件

> ID：15967963
> 
> 赞同：1
> 
> 时间：2013-04-12T09:41:24.977
> 
> 标签：iphone, ios, ios5, custom-controls

![在此处输入图像描述](https://i.stack.imgur.com/NR9CE.jpg)

我想创建一个自定义控件，例如 Mac os 的 Dock。在其中我想用阴影水平显示所有项目，并在选择特定项目时显示聚焦点，如 mac os 中的 DOck，并显示与具有精灵效果或弹出式视图的特定选定项目相对应的特定视图。

简单视图显示在上图中。

任何帮助都会得到帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:55:31.627

[Nichchenakolla 的本教程](https://github.com/Nichchenakolla/Dock-IOS/tree/master/Dock-IOS) 满足您的所有要求，只是没有聚焦点，但您可以轻松添加它，因为您可以在那里自由提供任何图像。

# python - 无法将 WLST 连接到管理服务器

> ID：15967967
> 
> 赞同：-1
> 
> 时间：2013-04-12T09:41:38.417
> 
> 标签：python, weblogic, jython, weblogic11g, wlst

我是 Weblogic 和 WLST 的新手，我通过 Jython 编写脚本将 WLST 连接到 Admin Server，但连接时出现错误。

> WLSTException：执行连接时发生错误：获取初始上下文时出错。t3://localhost:7001 处没有运行服务器

我的 Jython 代码：

```
print '--------------------------------------------------------------------'
print '-- START NODE MANAGER --'
print '--------------------------------------------------------------------'

startNodeManager(verbose='true', NodeManagerHome='C:/Oracle/Middleware/wlserver_10.3/common/nodemanager', ListenPort='5556', ListenAddress='localhost')

print '--------------------------------------------------------------------'
print '-- CONNECT WLST TO NODE MANAGER --'
print '--------------------------------------------------------------------'

nmConnect('weblogic', 'abcd123-', 'localhost', '5556', 'base_domain', 'C:/Oracle/Middleware/user_projects/domains/base_domain','ssl')

print '--------------------------------------------------------------------'
print '-- START ADMIN SERVER --'
print '--------------------------------------------------------------------'

nmStart('AdminServer')
nmServerStatus('AdminServer')

print '--------------------------------------------------------------------'
print '-- CONNECT WLST TO ADMIN SERVER --'
print '--------------------------------------------------------------------'

connect('weblogic', 'abcd123-')
# connect('weblogic', 'abcd123-', 't3://localhost:7001') I aloso try this but not work 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:15:46.727

看起来 Weblogic 没有运行。

正如评论中所建议的，尝试访问`http://localhost:7001/console`以验证 weblogic 是否正在运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-20T06:38:13.197

我认为最好的方法是编写一个批处理文件，您可以在其中调用您的 Jyhton 脚本。

样本

```
echo %TIME% Start executing Jython script 
call setWLSEnv.cmd
java weblogic.WLST start_servers.py
echo %TIME% Finished 
```

# c - 从 Spoj 中删除多余的大括号

> ID：15967969
> 
> 赞同：2
> 
> 时间：2013-04-12T09:41:56.993
> 
> 标签：c, algorithm, expression

我是使用 C 解决问题的新手，我正在尝试解决 [复杂表达式上的 SPOJ 问题](http://www.spoj.com/problems/CMEXPR/)

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
void removeBrackets(char *string , int position1 , int position2);
int main()
{
char exp[]="(a+b)-(c-d)-(e/f)";
char ops[]={'/','*','+','-','(',')','\0'};
char found[50][5];
int stack[3];
int i,j , k =0;

int l = (int)strlen(exp);
int lExp = l ;
char *p = exp ;

//    //remove external brackets
//    while (*(p+0)=='(' && *(p+strlen(p)-1)==')')
//        removeBrackets(exp, 0, ((int)strlen(p)-1));

printf("expression : %s\n",exp);
printf("operators : %s\n",ops);

//find the operators and their location
l = 0 ; 
for(i=0;i<lExp;i++)
{
    for(j=0;j<strlen(ops);j++)
    {
        if(exp[i]==ops[j])
        {
            found[l][2]='N';

            found[l][0]=i;
            found[l][1]=ops[j];
            if (exp[i-2]=='(' && exp[i+2]==')')
            {
                found[l][2]='Y';
                found[l][3]=exp[i-3];
                found[l][4]=exp[i+3];
            }
            if (found[l][1]=='(')
            {
                stack[k] = found[l][0];
                k++;
            }
            else if(found[l][1]==')')
            {
                stack[k] = found[l][0];
                if (stack[0] == 0 && stack[1] == lExp-1)
                {
                    removeBrackets(exp, 0, (int)strlen(exp)-1);
                    break ;
                }
                removeBrackets(exp, stack[k-1], stack[k]);

                //stack[k] = -1 ;
                //stack[k-1] = -1 ;
                k--;
            }
            printf("found '%c' at '%d' and within brackets: %c\n",found[l][1],found[l][0],found[l][2]);
            l++;
        }
    }
}

   //find where brackets are the corresponding sign in the brackets
    for (i=0; i<l-1; i++)
    {
        if(found[i][2]=='Y')
        {
            //find higher precedence operators present nearby , and if their precedence is lower , then remove the brackets ,else keep the brackets

            //1-find the operator inside the brackets
            switch (found[i][1])
            {
                case '/':
                    printf("\nfound '/' within brackets");
                    removeBrackets(exp, found[i][0]-2, found[i][0]+2);
                    //remove the brackets
                    break;
                case '*':
                    printf("\nfound '*' within brackets");
                    if (found[i][3] == '/' || found[i][4] == '/')
                        break ;
                    else
                        removeBrackets(exp, found[i][0]-2, found[i][0]+2);

                    break;
                case '+':
                    printf("\nfound '+' within brackets");
                    if (found[i][3] == '/' || found[i][4] == '/' || found[i][3] == '*' || found[i][4] == '*' )
                        break ;
                    else
                        removeBrackets(exp, found[i][0]-2, found[i][0]+2);

                    break;
                case '-':
                    printf("\nfound '-' within brackets");
                    if (found[i][3] == '/' || found[i][4] == '/' || found[i][3] == '*' || found[i][4] == '*' || found[i][4] == '+' || found[i][3] == '+')
                        break ;
                    else
                        removeBrackets(exp, found[i][0]-2, found[i][0]+2);
                                            break;

                default:
                    break;
            }

        }
    }
printf("\nstring modified : %s",exp);

 }

 void removeBrackets(char *string, int position1 , int position2)
 {
char *p = string;
char *newString = (char *)malloc(strlen(string -1));
int i = 0 , j =0 ;
for (i = 0 ; i <strlen(string); i++)
{
    if (i == position1 || i == position2)
        continue ;
    else
    {
        newString[j] = *(p+i);
        j++ ;
    }
}
newString[j]='\0';
strcpy(string, newString);
printf("\n-----after removing brackets :- %s\n",newString);
free(newString);
 } 
```

我正在做的是，扫描所有单词，然后将找到的运算符和括号存储在数组'Found'中，堆栈是一个数组来检查'（'和'）'的序列，'ops'是一个要存储的数组所有可能的运算符和括号，然后，如果在括号内找到运算符，则根据左右运算符的优先级，括号被删除。

但是，在尝试了很多之后，我无法为所有测试用例提出删除括号的解决方案。我在互联网上搜索，他们已经使用树来解决这个问题。任何人都可以建议对我的代码进行一些更改以解决问题..？？还是说，没有树就无法解决问题？？

# perl - 浮动序列的包模板是什么？

> ID：15967972
> 
> 赞同：0
> 
> 时间：2013-04-12T09:42:01.500
> 
> 标签：perl, binaryfiles, binary-data

我在输入文本文件的每一行中有 N 个浮点数。我正在尝试将它们转换为二进制格式（四字节浮点序列）。

来自输入的示例行：`-12.391 -5.301 -12.854 0.438 8.499 4.862 -2.481 3.962`

我正在使用 Perl[`pack`](http://perldoc.perl.org/functions/pack.html)函数，如下所示

```
foreach my $line (@inputData) {
    print $outFileHandle pack('fxfxfxfx... N times', $line);
} 
```

而不是写`fx`N次，我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T10:39:32.830

[`pack`接受 values 列表](http://perldoc.perl.org/functions/pack.html)，而您试图在单个变量中为其提供多个值。首先在空白处拆分。

然后你可以使用`*`修饰符来接受任意数量的浮点数：

```
pack "f*", split(' ',$line); 
```

# wcf - 合约指定接口时如何将派生对象作为基础对象传输

> ID：15967984
> 
> 赞同：0
> 
> 时间：2013-04-12T09:42:32.890
> 
> 标签：wcf, datacontract

如果 a`[ServiceContract] [OperationContract]`指定了一个接口 ( `IInterface`) 的返回值，那么我可以使用服务器接口上的 ServerKnownType 属性 返回一个基对象 ( `Base : IInterface`) 或一个派生对象 ( )。`Derived : Base`

但是，如果我需要将 Derived 对象作为 Base 对象传输（因为 Derived 添加了服务器端功能，我不需要客户端），那么我就卡住了。Derived 类技巧（请参阅[此处](https://stackoverflow.com/questions/8402278/wcf-returning-a-derived-object-for-a-contract-with-base-object-datacontractres)
）在 这种情况下（服务器方法返回接口）不起作用，因为我们必须将 Derived 对象和 Base 对象声明为 KnownTypes - 当服务器将类型解析为序列化它不喜欢有 2 个不同的已知类型具有相同的数据合同名称 - 并且在解析时会抛出异常。**在这种情况下如何将 Derived 作为 Base 传输？**`[DataContract(Name = "Base")]`

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:49:52.733

您可以使用以下 DataContractResolver 扩展 [DataContract(Name = "Base")] 作为 Derived 上的属性的使用，以指定它应该序列化为 Base 以在服务器接口方法返回接口而不是具体基类型的情况下工作.
要使用它，Base 必须声明为 KnownType (ServerKnownType)，Derived 必须具有 [DataContract(Name = "Base")] 属性，但不能声明为 KnownType。

```
 public class DeserializeAsBaseResolver : DataContractResolver {
        public static void Install(ServiceHost serviceHost) {

            SetSerializationBehavior(serviceHost, "MethodReturningIInterfac");
        }

        public static void SetSerializationBehavior(ServiceHost serviceHost, string contractMethodName) {
            ContractDescription cd = serviceHost.Description.Endpoints[0].Contract;
            OperationDescription myOperationDescription = cd.Operations.Find(contractMethodName);

            bool methodFound = (myOperationDescription != null);
            if (!methodFound) {
                string msg = string.Format("\"{0}\" not a valid method on {1}",
                                           contractMethodName, cd.ConfigurationName);
                throw new ArgumentException(msg);
            }

            DataContractSerializerOperationBehavior serializerBehavior =
                myOperationDescription.Behaviors.Find<DataContractSerializerOperationBehavior>();
            if (serializerBehavior == null) {
                serializerBehavior = new DataContractSerializerOperationBehavior(myOperationDescription);
                myOperationDescription.Behaviors.Add(serializerBehavior);
            }
            serializerBehavior.DataContractResolver = new DeserializeAsBaseResolver();
        }

        public override bool TryResolveType(Type type, Type declaredType,
                                            DataContractResolver knownTypeResolver,
                                            out XmlDictionaryString typeName,
                                            out XmlDictionaryString typeNamespace) {
            // Look for [DataContract(Name = "ClassType")] attribute and serialize as that
            // type if one is found:
            Type typeToResolveOn = type;
            DataContractAttribute dca = null;
            // .Net 4.0 and below code:
            object[] attributes = type.GetCustomAttributes(typeof(DataContractAttribute), false);
            foreach (object attibute in attributes) {
                if (attibute is DataContractAttribute) {
                    dca = attibute as DataContractAttribute;
                    break;
                }
            }
            // .Net 4.5 and above code:
            //dca = type.GetCustomAttribute<DataContractAttribute>();

            if (dca != null && !string.IsNullOrEmpty(dca.Name)) {
                string modifiedAssemblyQualifiedName = string.Format("{0}.{1}, {2}", type.Namespace, dca.Name, type.Assembly);
                Type serializeAsType = Type.GetType(modifiedAssemblyQualifiedName);
                if (serializeAsType != null)
                    typeToResolveOn = serializeAsType;
            }

            bool ret = knownTypeResolver.TryResolveType(typeToResolveOn, declaredType, null, out typeName, out typeNamespace);
            if (!ret && type != typeToResolveOn)
                ret = knownTypeResolver.TryResolveType(type, declaredType, null, out typeName, out typeNamespace);
            return ret;
        }

        public override Type ResolveName(string typeName, string typeNamespace,
                                         Type declaredType, DataContractResolver knownTypeResolver) {
            return knownTypeResolver.ResolveName(typeName, typeNamespace, declaredType, null) ?? declaredType;
        }
    }

} 
```**

# dos - DOS中的路径信息保存在哪里

> ID：15967986
> 
> 赞同：2
> 
> 时间：2013-04-12T09:42:36.200
> 
> 标签：dos

我最近输入了 set path = c:\TC\bin;%path%. 此后输入路径得到这个路径 = c:\tc\bin;BLAH-BLAH; 它奏效了。我关闭命令并重新打开它不起作用，并且在检查时我得到 path=BLAH-BLAH; 只要。我最近添加的内容不存在。有什么线索吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:02:11.537

环境变量保存在注册表设置中。

当您在命令外壳中编辑环境变量时，更改仅适用于该命令外壳（如您所见）。

如果要设置整个系统的路径，则需要集中设置-在Windows XP中，您可以右键单击“我的电脑”，选择“属性”，“高级”，然后单击底部的“环境变量”，和类似的方法适用于其他 Windows 系统。

如果您想以编程方式对其进行编辑，则需要通过注册表 API 执行此操作。这里有关于如何做到这一点的答案：以[编程方式修改环境变量？](https://stackoverflow.com/questions/2121795/programmatically-modifiy-environment-variables)

# extjs - 尝试使用 Sencha Touch 2.1.1 将值传递到本地存储

> ID：15967990
> 
> 赞同：1
> 
> 时间：2013-04-12T09:42:41.403
> 
> 标签：extjs, touch, local-storage

谁能告诉我为什么这段代码不会创建本地存储的条目？

```
 myLocalStore.load();

    var now = new Date();
    var cardId = (now.getTime()).toString() + (this.getRandomInt(0, 100)).toString();

    var entry1 = { id: cardId, dateCreated: now, title: 'The Title', narrative: 'the Text' };
    var newRecord = new PinYin.model.Default(entry1);
    myLocalStore.add(newRecord);

    myLocalStore.sync();

    console.log(entry1); 
```

控制台输出

`Object{id: "136575772251069", dateCreated: Fri Apr 12 2013 17:08:42 GMT+0800 (Taipei Standard Time), title: "The Title", narrative: "the Text"}`

这是正确的格式，所以我不确定我做错了什么......

如果我替换 myLocalStore.add(entry1); 与 myLocalStore.add('value');

然后我将以下输入到本地存储中

`{"id":"ext-record-1","dateCreated":null,"title":null,"narrative":null}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T04:30:41.750

试试这样...

```
 var airline_name = res[i].AirLineName; 
localStorage.setItem("AirlineCode3two",record.get('AirlineCode32'));

        var stored_locally2 = {'ID2': i,'AirLineName2': res[i].AirLineName,};

             //Adding our array to LocalStore(localStorage)
                         var localstore2 = Ext.getStore('TwowayStorage');

                         var twowayc1=localstore2.getCount();
                         localstore2.add(stored_locally2);
                         localstore2.sync();
                         localstore2.load(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:28:04.560

我遇到了同样的情况并找到了这样的解决方案，

首先，如果您设置模型的“idProperty”字段，请将其删除。

之后，使用以下约定。

```
myOfflineStore.add([{ listItemId: record.data.listItemId, 
                      listItemTitle: record.data.listItemTitle, 
                      listItemImageCode: record.data.listItemImageCode,     
                      listItemNewPostCount: record.data.listItemNewPostCount }]); 
```

使用 [, ] 是关键点。

编辑：如果要使用 idProperty，则需要将新添加的记录设置为“幻像”，并设置幻像 = true

# java - Eclipse [桌面无头]

> ID：15967996
> 
> 赞同：8
> 
> 时间：2013-04-12T09:43:05.843
> 
> 标签：java, android, eclipse

在我的项目名称旁边，eclipse 中显示 [Desktop NO-HEAD]。我正在开发一个 android 应用程序，并且想知道这是否有任何问题，为什么会这样说，以及它是否对任何事情有影响，尽管一切似乎都可以正常编译和调试。令人惊讶的是，我在网上几乎没有发现任何关于此的内容。想问问有没有人知道，谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T12:30:01.443

您显然正在进行某种类型的版本控制。右键单击 yoir 项目并转到团队。如果您现在不想看到它和/或不想拥有任何版本控制，那么 Team 中的某处应该有一个选项可以断开连接。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-10-31T23:12:30.857

就我而言，对于 git，在 Eclipse Team 设置中，我必须使用以下设置*断开连接*，然后*共享项目*（右键单击项目 -> 团队 -> 断开/共享项目...）：

[![在此处输入图像描述](https://i.stack.imgur.com/XGLkc.jpg)](https://i.stack.imgur.com/XGLkc.jpg)

检查这些复选框的任何其他排列对我来说导致了 NO-HEAD。

# javascript - 如何使用输入名称 jquery 从一页获取值到另一页

> ID：15967998
> 
> 赞同：0
> 
> 时间：2013-04-12T09:43:09.770
> 
> 标签：javascript, jquery, razor

我想使用 jquery 中的输入名称将文本框值从一页获取到另一页。

```
$('input[name$="testName"]').val("@Model.Value") 
```

上面这段代码在另一个页面上不起作用，请任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:44:32.057

您必须在查询字符串中传递值，否则您无法直接访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:46:26.087

您可以将其保存到参数或将其保存到隐藏字段。但是你不能直接访问它。