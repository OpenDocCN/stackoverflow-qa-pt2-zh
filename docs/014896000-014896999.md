# StackOverflow 问答 14896000-14896999

# xml - 在 Websphere ESB 中将 xml 消息转换为 CSV

> ID：14896001
> 
> 赞同：0
> 
> 时间：2013-02-15T13:38:46.073
> 
> 标签：xml, csv, websphere, esb

下面是一个xml结构。在根标签下，一个元素是重复的（student），另外两个是非重复的（class 和 classTeacher）。我从 JMS 队列中获取此 xml 消息，并希望将其转换为以下格式的 csv 文件（即每个学生将在 csv 文件中换行。）

这是我为此转换创建的流程：

JMS 导出-->扇出--> XSLT 转换（将primitiveContext/FanOutContext/occurance/student 映射到目标BO 中的学生元素）--> 平面文件适配器

通过此流程，将为每个学生元素创建一个新的 csv 文件。但我需要根据每个请求创建新的 csv 文件。csv 文件将包含根据请求中学生元素数量的行。

例如：

输入 XML 请求

```
<students>
<class>  forth </class>  
<classTeacher>  Jhon </classTeacher> 

<student>
<name> Alex</name>
<age> 16</age>
</student>
<student>
<name> Tim</name>
<age> 15</age>
</student>

<students> 
```

输出 CSV 格式：

```
Alex , 16 ,forth, Jhon  
Tim ,15,forth, Jhon 
```

非常感谢..哈宾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:05:10.180

您可以创建一个消息集。有关如何执行此操作的详细信息，请参见[此处](http://publib.boulder.ibm.com/infocenter/wmbhelp/v8r0m0/index.jsp?topic=/com.ibm.etools.mft.doc/ad20808_.htm)有关如何映射字段的另一个示例，请参见此[讨论的底部答案](http://www.mqseries.net/phpBB/viewtopic.php?p=154442&sid=09a33496943c8bda6d96e761b747ec02)

# java - 使用 Spring JavaConfig 和 @Autowired 注入 Mockito Mock 对象

> ID：14896007
> 
> 赞同：12
> 
> 时间：2013-02-15T13:39:14.093
> 
> 标签：java, spring, integration-testing, mockito, spring-java-config

我正在尝试`@Autowired`用 Mockito 模拟对象替换一个对象。执行此操作的常用方法是使用 Springockito 使用 xml：

```
<mockito:mock id="SomeMock" class="com.package.MockInterface" /> 
```

目前我正在尝试使用 Spring 的 JavaConfig 来完成这项工作。突然之间，Java 表达式比 xml 更加冗长：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration
public class MyTestClass {

    @Configuration
    static class Config {
        @Bean
        public MockInterface somethingSpecial() {
            return Mockito.mock(MockInterface.class);
        }
    }

    @Autowired MockInterface mockObj;

    // test code
} 
```

我发现了一个名为 Springockito-annotations 的库，它允许您执行以下操作：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(loader=SpringockitoContextLoader.class)
public class MyTestClass {

    @Autowired @ReplaceWithMock MockInterface mockObj;

    // test code
} 
```

显然，更漂亮:) 唯一的问题是这个上下文加载器不允许我`@Configuration`为其他 bean 使用 JavaConfig（如果我这样做，Spring 会抱怨没有与这些自动装配字段匹配的候选者）。

你们知道让 Spring 的 JavaConfig 和 Springockito-annotations 发挥良好作用的方法吗？或者，是否有另一种创建模拟的简写？

作为一个很好的奖励，使用 Springockito 和 xml 配置，我能够模拟出具体的类，而无需为其依赖项提供自动装配候选者（如果有的话）。没有xml这不可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-06T14:19:24.613

从现在未维护的（在撰写本文时）Spingockito-annotations 转向 Mockito，我们有一种非常简单的方法：

```
@RunWith(MockitoJUnitRunner.class)
@ContextConfiguration
public class MyTestClass {

    @Mock MockInterface mockObj;

    // test code
} 
```

如果您使用的是真实对象，但想在其中模拟依赖项，例如使用 DAO 测试服务层：

```
@RunWith(MockitoJUnitRunner.class)
@ContextConfiguration
public class MyTestClass {

    @InjectMocks RealService;

    @Mock MockDAO mockDAO;

    // test code
} 
```

最后，这也可以应用于 Spring-boot，但在`setUp()`支持多个类运行器之前使用注解初始化：

```
@RunWith(SpringJUnit4ClassRunner.class)
@SpringApplicationConfiguration(classes = MyMainSpringBootClass.class)
public class MyTestClass {

    @InjectMocks RealService;

    @Mock MockDAO mockDAO;

    @Before
    public final void setUp() throws Exception{
        MockitoAnnotations.initMocks(this);
    }

    // test code
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-11T22:43:53.630

# 过时和弃用！

## 阅读Spring Boot 1.4 中的[mocking 和 spying](https://spring.io/blog/2016/04/15/testing-improvements-in-spring-boot-1-4#mocking-and-spying)

另请阅读@ethesx 答案， [Springockito](https://github.com/springockito/springockito)未维护

## 旧答案

现在可以使用[Springockito-annotations](https://bitbucket.org/kubek2k/springockito/wiki/springockito-annotations)模拟没有任何 XML 文件的 Spring 应用程序。这个解决方案也适用于[Spring Boot](http://projects.spring.io/spring-boot/)。

```
import static org.mockito.BDDMockito.*;
import org.kubek2k.springockito.annotations.*;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes = Application.class, 
     loader = SpringockitoAnnotatedContextLoader.class)
@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_CLASS)
public class MainControllerTest {

    @Autowired
    MainController mainController;

    @Autowired
    @ReplaceWithMock
    FooService fooService;

    @Test
    public void shouldGetBar() {
        //given
        given(fooService.result("foo")).willReturn("bar");

        //when
        Bar bar build = fooService.getBar("foo");

        //then
        assertThat(bar).isNotNull();
    }
} 
```

依赖项： `org.kubek2k:springockito-annotations:1.0.9`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T15:05:16.130

似乎`SpringockitoContextLoader`扩展[了 GenericXmlContextLoader](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/test/context/support/GenericXmlContextLoader.html)，它被描述为：

> 从 XML 资源读取 bean 定义的 AbstractGenericContextLoader 的具体实现。

因此，您目前仅限于 xml bean 定义。

您可以编写自己的上下文加载器，从`SpringockitoContextLoader`类中获取相关部分。看看[这里](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/test/context/SmartContextLoader.html)开始，也许你可以扩展[AnnotationConfigContextLoader](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/test/context/support/AnnotationConfigContextLoader.html)例如？

# python - 将颜色条与矩阵图相关联

> ID：14896010
> 
> 赞同：0
> 
> 时间：2013-02-15T13:39:34.517
> 
> 标签：python, matplotlib, wxpython

我想要一个与我的图形矩阵相关联的彩色图形。颜色图与我的矩阵对齐，颜色图上的每种颜色对应于矩阵上的一行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:29:37.143

你的问题对我来说有点神秘，但考虑到你的其他问题和你发布的示例图片，我假设你的意思类似于下面的情节？x 和 y “颜色条”仅在一行或一列中仅存在一种颜色时才有效，否则显示“最后一个”。

```
# inital settings
size = 50 # size of the maxtrix = size*size
n = 20 # number of points in the matrix
vmin=0 # min value for the colorcoding
vmax=3 # max value for the colorcoding

#generate the data and colormap
data = np.vstack((np.random.randint(0,size,n),np.random.randint(0,size,n))).T
param = np.random.randint(vmin,vmax+1,n)
# 0-red, 1-blue, 2-green and 3-yellow
cmap = mpl.colors.ListedColormap([[1,0,0], [0,0,1], [0,1,0], [1,1,0]])

# create the n*x matrix and x/y 'colorbars'
mtrx = np.zeros((size,size))-1
xcolors = np.zeros(size)-1
ycolors = np.zeros(size)-1

# map the data to the n*n matrix and x/y 'colorbars'
for n, item in enumerate(data):
    x, y = item

    xcolors[x] = param[n]
    ycolors[y] = param[n]
    mtrx[x,y] = 1 # relace 1 with param [n] to color the matrix points as well

# mask all 'empty' matrix entries
mtrx = np.ma.masked_values(mtrx,-1)
xcolors = np.ma.masked_values(xcolors.reshape((xcolors.size,1)),-1)
ycolors = np.ma.masked_values(ycolors.reshape((1,xcolors.size)),-1)

fig = plt.figure(figsize=(6,6))
ax = fig.add_axes([0.1, 0.1, 0.8, 0.8])
x_ax = fig.add_axes([0.05, 0.1, 0.05, 0.8])
y_ax = fig.add_axes([0.1, 0.05, 0.8, 0.05])

ax.imshow(mtrx, cmap=plt.cm.Greys_r, interpolation='none')
ax.set_title('My matrix')

x_ax.imshow(xcolors, cmap=cmap, interpolation='none',vmin=vmin, vmax=vmax)
y_ax.imshow(ycolors, cmap=cmap, interpolation='none',vmin=vmin, vmax=vmax)

for tmpax in [ax, y_ax, x_ax]:
    tmpax.set_yticks([])
    tmpax.set_xticks([])
    tmpax.set_yticklabels([])
    tmpax.set_xticklabels([])

ax.set_xticks(np.arange(-0.5,size + .5,1))
ax.set_yticks(np.arange(-0.5,size + .5,1))
ax.grid(True, color='w', linestyle='-')

plt.setp(y_ax, frame_on=False)
plt.setp(x_ax, frame_on=False) 
```

![在此处输入图像描述](../Images/1abdf87f3c19a0e3727116b28b8aeda5.png)

# web-services - Web 应用程序在几个并发 HTTP 请求后被破坏

> ID：14896011
> 
> 赞同：1
> 
> 时间：2013-02-15T13:39:36.217
> 
> 标签：web-services, spring, tomcat, c3p0

在向 Tomcat 上运行的基于 Spring 的 Web 服务发出大约 10-15 个同时请求后，将关闭 Web 应用程序。请根据以下错误日志提出解决方案：

```
Feb 13, 2013 10: 58: 48 AM **org.apache.catalina.core.StandardServer await
INFO: A valid shutdown command was received via the shutdown port.Stopping the Server instance.**
Feb 13,
2013 10: 58: 48 AM org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler["http-bio-8080"]
Feb 13,
2013 10: 58: 48 AM org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler["ajp-bio-8009"]
Feb 13,
2013 10: 58: 48 AM org.apache.catalina.core.StandardService stopInternal
INFO: Stopping service Catalina
Feb 13,
2013 10: 58: 48 AM org.springframework.context.support.AbstractApplicationContext doClose
INFO: Closing WebApplicationContext
for namespace 'mvc-dispatcher-servlet': startup date[Wed Feb 13 10: 57: 18 IST 2013];
parent: Root WebApplicationContext
Feb 13,
2013 10: 58: 48 AM org.springframework.beans.factory.support.DefaultSingletonBeanRegistry destroySingletons
INFO: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@33d98c: defining beans[org.springframework.beans.factory.config.PropertyPlaceholderConfigurer #0,dataSources,jdbcTemplate,namedParameterJdbcTemplate,GDOController,mastersController,syncController,ordersController,reportController,accountsController,loginController,PPLPReceiptController,inventoryController,receiptController,quoteController,geoTagCustomerController,sapController,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping# 0, org.springframework.format.support.FormattingConversionServiceFactoryBean #0,org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter# 0, org.springframework.web.servlet.handler.MappedInterceptor #0,txManager,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource# 0, org.springframework.transaction.interceptor.TransactionInterceptor #0,org.springframework.transaction.config.internalTransactionAdvisor]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@727256
Feb 13, 2013 10:58:48 AM org.springframework.context.support.AbstractApplicationContext doClose
INFO: Closing Root WebApplicationContext: startup date [Wed Feb 13 10:57:15 IST 2013]; root of context hierarchy
Feb 13, 2013 10:58:48 AM org.springframework.beans.factory.support.DefaultSingletonBeanRegistry destroySingletons
INFO: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@727256: defining beans [org.springframework.beans.factory.config.PropertyPlaceholderConfigurer# 0, dataSources, jdbcTemplate, namedParameterJdbcTemplate, GDOController, mastersController, syncController, ordersController, reportController, accountsController, loginController, PPLPReceiptController, inventoryController, receiptController, quoteController, geoTagCustomerController, sapController, org.springframework.context.annotation.internalConfigurationAnnotationProcessor, org.springframework.context.annotation.internalAutowiredAnnotationProcessor, org.springframework.context.annotation.internalRequiredAnnotationProcessor, org.springframework.context.annotation.internalCommonAnnotationProcessor, org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping #0,org.springframework.format.support.FormattingConversionServiceFactoryBean# 0, org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter #0,org.springframework.web.servlet.handler.MappedInterceptor# 0, txManager, org.springframework.aop.config.internalAutoProxyCreator, org.springframework.transaction.annotation.AnnotationTransactionAttributeSource #0,org.springframework.transaction.interceptor.TransactionInterceptor# 0, org.springframework.transaction.config.internalTransactionAdvisor, org.springframework.security.web.PortMapperImpl #0,org.springframework.security.web.context.HttpSessionSecurityContextRepository# 0, org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy #0,org.springframework.security.authentication.ProviderManager# 0, org.springframework.security.access.vote.AffirmativeBased #0,org.springframework.security.web.access.intercept.FilterSecurityInterceptor# 0, org.springframework.security.web.access.DefaultWebInvocationPrivilegeEvaluator #0,org.springframework.security.authentication.AnonymousAuthenticationProvider# 0, org.springframework.security.web.savedrequest.HttpSessionRequestCache #0,org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint# 0, org.springframework.security.config.http.UserDetailsServiceInjectionBeanPostProcessor #0,org.springframework.security.filterChainProxy,org.springframework.security.provisioning.JdbcUserDetailsManager# 0, org.springframework.security.authentication.dao.DaoAuthenticationProvider #0,org.springframework.security.authentication.DefaultAuthenticationEventPublisher# 0, org.springframework.security.authenticationManager];
root of factory hierarchy
Feb 13, 2013 10: 58: 48 AM org.springframework.context.support.AbstractApplicationContext doClose
INFO: Closing WebApplicationContext
for namespace 'mvc-dispatcher-servlet': startup date[Wed Feb 13 10: 57: 14 IST 2013];
parent: Root WebApplicationContext
Feb 13,
2013 10: 58: 48 AM org.springframework.beans.factory.support.DefaultSingletonBeanRegistry destroySingletons
INFO: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@ed5ed5: defining beans[org.springframework.beans.factory.config.PropertyPlaceholderConfigurer #0,dataSources,jdbcTemplate,namedParameterJdbcTemplate,GDOController,mastersController,syncController,ordersController,reportController,accountsController,loginController,PPLPReceiptController,inventoryController,receiptController,quoteController,geoTagCustomerController,sapController,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping# 0, org.springframework.format.support.FormattingConversionServiceFactoryBean #0,org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter# 0, org.springframework.web.servlet.handler.MappedInterceptor #0,txManager,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource# 0, org.springframework.transaction.interceptor.TransactionInterceptor #0,org.springframework.transaction.config.internalTransactionAdvisor]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@16e47a1
Feb 13, 2013 10:58:48 AM org.springframework.context.support.AbstractApplicationContext doClose
INFO: Closing Root WebApplicationContext: startup date [Wed Feb 13 10:57:11 IST 2013]; root of context hierarchy
Feb 13, 2013 10:58:48 AM org.springframework.beans.factory.support.DefaultSingletonBeanRegistry destroySingletons
INFO: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@16e47a1: defining beans [org.springframework.beans.factory.config.PropertyPlaceholderConfigurer# 0, dataSources, jdbcTemplate, namedParameterJdbcTemplate, GDOController, mastersController, syncController, ordersController, reportController, accountsController, loginController, PPLPReceiptController, inventoryController, receiptController, quoteController, geoTagCustomerController, sapController, org.springframework.context.annotation.internalConfigurationAnnotationProcessor, org.springframework.context.annotation.internalAutowiredAnnotationProcessor, org.springframework.context.annotation.internalRequiredAnnotationProcessor, org.springframework.context.annotation.internalCommonAnnotationProcessor, org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping #0,org.springframework.format.support.FormattingConversionServiceFactoryBean# 0, org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter #0,org.springframework.web.servlet.handler.MappedInterceptor# 0, txManager, org.springframework.aop.config.internalAutoProxyCreator, org.springframework.transaction.annotation.AnnotationTransactionAttributeSource #0,org.springframework.transaction.interceptor.TransactionInterceptor# 0, org.springframework.transaction.config.internalTransactionAdvisor, org.springframework.security.web.PortMapperImpl #0,org.springframework.security.web.context.HttpSessionSecurityContextRepository# 0, org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy #0,org.springframework.security.authentication.ProviderManager# 0, org.springframework.security.access.vote.AffirmativeBased #0,org.springframework.security.web.access.intercept.FilterSecurityInterceptor# 0, org.springframework.security.web.access.DefaultWebInvocationPrivilegeEvaluator #0,org.springframework.security.authentication.AnonymousAuthenticationProvider# 0, org.springframework.security.web.savedrequest.HttpSessionRequestCache #0,org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint# 0, org.springframework.security.config.http.UserDetailsServiceInjectionBeanPostProcessor #0,org.springframework.security.filterChainProxy,org.springframework.security.provisioning.JdbcUserDetailsManager# 0, org.springframework.security.authentication.dao.DaoAuthenticationProvider #0,org.springframework.security.authentication.DefaultAuthenticationEventPublisher# 0, org.springframework.security.authenticationManager];
root of factory hierarchy
Feb 13, 2013 10: 58: 48 AM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
SEVERE: The web application[/DrishtiProduction] registered the JDBC driver [org.postgresql.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
Feb 13, 2013 10:58:48 AM org.springframework.context.support.AbstractApplicationContext doClose
INFO: Closing WebApplicationContext for namespace 'mvc-dispatcher-servlet': startup date [Wed Feb 13 10:54:28 IST 2013]; parent: Root WebApplicationContext
Feb 13, 2013 10:58:48 AM org.springframework.beans.factory.support.DefaultSingletonBeanRegistry destroySingletons
INFO: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@181cb9b: defining beans [org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,dataSources,jdbcTemplate,namedParameterJdbcTemplate,GDOController,mastersController,syncController,ordersController,reportController,accountsController,loginController,PPLPReceiptController,inventoryController,receiptController,quoteController,geoTagCustomerController,sapController,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,txManager,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@3cd16e
Feb 13, 2013 10:58:48 AM org.springframework.context.support.AbstractApplicationContext doClose
INFO: Closing Root WebApplicationContext: startup date [Wed Feb 13 10:54:24 IST 2013]; root of context hierarchy
Feb 13, 2013 10:58:48 AM org.springframework.beans.factory.support.DefaultSingletonBeanRegistry destroySingletons
INFO: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@3cd16e: defining beans [org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,dataSources,jdbcTemplate,namedParameterJdbcTemplate,GDOController,mastersController,syncController,ordersController,reportController,accountsController,loginController,PPLPReceiptController,inventoryController,receiptController,quoteController,geoTagCustomerController,sapController,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,txManager,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,org.springframework.security.web.PortMapperImpl#0,org.springframework.security.web.context.HttpSessionSecurityContextRepository#0,org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy#0,org.springframework.security.authentication.ProviderManager#0,org.springframework.security.access.vote.AffirmativeBased#0,org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0,org.springframework.security.web.access.DefaultWebInvocationPrivilegeEvaluator#0,org.springframework.security.authentication.AnonymousAuthenticationProvider#0,org.springframework.security.web.savedrequest.HttpSessionRequestCache#0,org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint#0,org.springframework.security.config.http.UserDetailsServiceInjectionBeanPostProcessor#0,org.springframework.security.filterChainProxy,org.springframework.security.provisioning.JdbcUserDetailsManager#0,org.springframework.security.authentication.dao.DaoAuthenticationProvider#0,org.springframework.security.authentication.DefaultAuthenticationEventPublisher#0,org.springframework.security.authenticationManager]; root of factory hierarchy
Feb 13, 2013 10:58:48 AM org.apache.coyote.AbstractProtocol stop
INFO: Stopping ProtocolHandler ["http-bio-8080"]
Feb 13, 2013 10:58:48 AM org.apache.coyote.AbstractProtocol stop
INFO: Stopping ProtocolHandler ["ajp-bio-8009"]
Feb 13, 2013 10:58:48 AM org.apache.coyote.AbstractProtocol destroy
INFO: Destroying ProtocolHandler ["http-bio-8080"]
Feb 13, 2013 10:58:48 AM org.apache.coyote.AbstractProtocol destroy
INFO: Destroying ProtocolHandler ["ajp-bio-8009"]
Feb 13, 2013 10:58:52 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr / java / packages / lib / i386: /lib:/usr / lib
Feb 13, 2013 10: 58: 52 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler["http-bio-8080"]
Feb 13, 2013 10: 58: 52 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler["ajp-bio-8009"]
Feb 13, 2013 10: 58: 52 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 860 ms
Feb 13, 2013 10: 58: 52 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Feb 13, 2013 10: 58: 52 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat / 7.0.27
Feb 13, 2013 10: 58: 52 AM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive / usr / share / apache - tomcat - 7.0.27 / webapps / DrishtiProduction.war
Feb 13, 2013 10: 58: 53 AM org.springframework.web.context.ContextLoader initWebApplicationContext
INFO: Root WebApplicationContext: initialization started 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:11:21.423

从我从上面的日志中看到，有些东西正在向 tomcat 发送终止信号。检查可能影响 tomcat 的后台运行的服务。TOMCAT_HOME/bin 有 catalina.sh/catalina.bat。运行这些会导致 tomcat 关闭。

```
[INFO: A valid shutdown command was received via the shutdown port.Stopping the Server instance.**] 
```

上述声明证明了这一点。

# asp.net - ASP.NET MVC 中的 ViewBag 是如何工作的

> ID：14896013
> 
> 赞同：103
> 
> 时间：2013-02-15T13:39:41.677
> 
> 标签：asp.net, asp.net-mvc, viewbag

ASP.NET MVC 是如何`ViewBag`工作的？MSDN 说它只是一个`Object`，这让我很感兴趣，“魔术”属性如`ViewBag.Foo`和 魔术字符串`ViewBag["Hello"]`实际上是如何工作的？

另外，如何制作一个并在我的 ASP.NET WebForms 应用程序中使用它？

例子将不胜感激！

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-02-20T17:15:53.487

`ViewBag`是类型`dynamic`，但是，在内部是`System.Dynamic.ExpandoObject()`

它是这样声明的：

`dynamic ViewBag = new System.Dynamic.ExpandoObject();`

这就是为什么你可以这样做：

`ViewBag.Foo = "Bar";`

示例扩展器对象代码：

```
public class ExpanderObject : DynamicObject, IDynamicMetaObjectProvider
{
    public Dictionary<string, object> objectDictionary;

    public ExpanderObject()
    {
        objectDictionary = new Dictionary<string, object>();
    }
    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        object val;
        if (objectDictionary.TryGetValue(binder.Name, out val))
        {
            result = val;
            return true;
        }
        result = null;
        return false;
    }

    public override bool TrySetMember(SetMemberBinder binder, object value)
    {
        try
        {
            objectDictionary[binder.Name] = value;
            return true;
        }
        catch (Exception ex)
        {
            return false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-02-15T13:43:48.067

它是一个动态对象，这意味着您可以在控制器中为其添加属性，然后在视图中读取它们，因为您本质上是在创建对象，这是动态类型的一个特征。请参阅这篇关于动态的[MSDN 文章。](http://msdn.microsoft.com/en-us/magazine/gg598922.aspx)请参阅 [这篇文章](http://weblogs.asp.net/hajan/archive/2010/12/11/viewbag-dynamic-in-asp-net-mvc-3-rc-2.aspx)，了解它与 MVC 相关的用法。

如果您想将此用于 Web 表单，请向基页类添加动态属性，如下所示：

```
public class BasePage : Page
{

    public dynamic ViewBagProperty
    {
        get;
        set;
    }
} 
```

让您的所有页面都继承自此。您应该能够在 ASP.NET 标记中执行以下操作：

```
<%= ViewBagProperty.X %> 
```

那应该行得通。如果没有，有办法解决它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-15T13:42:45.467

`ViewBag`正如`System.Dynamic.ExpandoObject`建议的那样。中的属性`ViewBag`本质上是`KeyValue`对，您可以通过键访问值。在这个意义上，这些是等价的：

```
ViewBag.Foo = "Bar";
ViewBag["Foo"] = "Bar"; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-11-20T04:30:50.253

ViewBag 用于将数据从 Controller Action 传递到 view 以呈现正在传递的数据。现在您可以使用 ViewBag 或 ViewData 在 Controller Action 和 View 之间传递数据。ViewBag：它是动态对象的类型，这意味着您可以动态地将新字段添加到 viewbag 并在 View 中访问这些字段。您需要在创建新字段时初始化 viewbag 的对象。

eg: 1\. 创建 ViewBag: ViewBag.FirstName="John";

2.  访问视图：@ViewBag.FirstName。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-15T13:52:42.097

ViewBag 属于动态类型。更多，你做不到`ViewBag["Foo"]`。您将得到异常 -*无法使用 [] 将索引应用于 'System.Dynamic.DynamicObject' 类型的表达式*。

`ViewBag`实际上将 Foo 存储到`ViewData["Foo"]`（ViewDataDictionary 的类型）的内部实现，所以这两个是可以互换的。`ViewData["Foo"]`和`ViewBag.Foo`。

和范围。ViewBag 和 ViewData 用于在 Controller 的 Actions 和它呈现的 View 之间传递数据。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-18T10:56:28.290

ViewBag 是一种动态类型，允许您动态设置或获取值，并允许您添加任意数量的附加字段而无需强类型类它们允许您将数据从控制器传递到视图。在控制器中......

```
public ActionResult Index()
{
    ViewBag.victor = "My name is Victor";
    return View();
} 
```

在视图中

```
@foreach(string a in ViewBag.victor)
{
     .........
} 
```

我了解到的是，两者都应该具有保存动态名称属性，即 ViewBag.victor

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-12-28T06:11:35.257

```
public dynamic ViewBag
{
    get
    {
        if (_viewBag == null)
        {
            _viewBag = new DynamicViewData(() => ViewData);
        }

        return _viewBag;
    }
} 
```

# c# - 可以避免提升权限来读取我的应用程序的 Program Files 文件夹中的文本文件吗？

> ID：14896016
> 
> 赞同：0
> 
> 时间：2013-02-15T13:39:56.897
> 
> 标签：c#, wpf, windows-8, wix, uac

我有一个使用 WiX 安装程序安装的 WPF 应用程序。我正在将所有应用程序数据写入 AppData 文件夹——它工作正常（嗯，或多或少）。安装程序需要提升权限（我猜是写入程序文件？）。

有几个与应用程序一起打包的文本文件需要阅读。我目前将它们与 .exe 放在 Program Files 中的同一文件夹中，但除非我以管理员身份运行，否则该应用程序无法读取它们。

这是代码：

```
using (FileStream file = new FileStream("file.txt", FileMode.Open))
{
    using (StreamReader reader = new StreamReader(file))
    {
        . . .
    }
} 
```

有没有一种简单的方法可以解决这个问题，以避免需要以管理员身份运行，而不需要*更改安装程序以将文件放入 AppData*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:17:29.973

您也可以尝试更改文件的权限：

```
<File Id="file.txt" 
      Name="file.txt" 
      Source="$(var.MyApplication.TargetDir)file.txt">
  <Permission GenericAll="yes" User="Everyone"/>
</File> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T13:50:32.100

最好的选择可能是告诉 wix 在 App Data 文件夹中制作文件的副本：

```
<Directory Id="AppDataFolder" Name="AppDataFolder">
  <Directory Id="appFolder" Name="xx">
    <Component Id="component" Guid="...">
      <File Id="file.txt" Name="file.txt" KeyPath="yes" Source="Assets\file.txt" />
    </Component>
  </Directory>
</Directory> 
```

# android - 带有 Google App Engine 和 GCM 的 Android 客户端应用程序

> ID：14896021
> 
> 赞同：-3
> 
> 时间：2013-02-15T13:40:05.843
> 
> 标签：android, google-app-engine, google-cloud-messaging

在开发基于云的应用程序时，将所有数据库保存在云端并创建 Android 客户端应用程序，我们可以使用 Google App Engine 并将其与 Android 一起使用吗？我们需要用 Python 开发 GAE 还是用 Java 才能实现？请帮助我了解上下文，尝试了很多但不清楚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:53:09.180

App Engine 后端可以用 Python、Java 或 Go 编写。以下链接应该有助于您开始创建连接 App Engine 的 Android 应用程序：

[https://developers.google.com/eclipse/docs/endpoints-android](https://developers.google.com/eclipse/docs/endpoints-android)

# android - 调用 onBackPressed 时获取布局

> ID：14896026
> 
> 赞同：0
> 
> 时间：2013-02-15T13:40:25.917
> 
> 标签：android, android-activity

当按下返回键时，我可以获得我的活动布局吗？或者可以识别该活动的内容视图的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T13:47:12.480

```
((ViewGroup)findViewById(android.R.id.content)).getChildAt(0) 
```

这应该返回当前活动的根视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T13:55:15.167

将 id 添加到布局的父视图，然后使用 findViewById() 提供父视图的 id 来获取引用。

# android - Application 类的 LifeTime 是多少？它将保留对象多长时间

> ID：14896028
> 
> 赞同：0
> 
> 时间：2013-02-15T13:40:27.437
> 
> 标签：android, state, savestate

我有一个对象 obj，我需要长时间保存这个对象的状态，所以如果我扩展应用程序类，它的生命周期是什么？

当用户在当前活动中接到一个电话，经过很长时间用户恢复活动时，我的对象和活动会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T13:42:28.537

只要 Android 允许，您的应用的应用程序实例就会一直存在。每当系统需要更多内存用于前台或高优先级任务时，它都会终止您的应用程序，包括任何活动、服务和应用程序实例。

没有设定这个物体会出现的时间。您必须编写应用程序，假设它可以在任何时间点被销毁。

您可以在 Application 类中重写[onLowMemory()](http://developer.android.com/reference/android/app/Application.html#onLowMemory%28%29)以大致了解您是否可能很快被杀死。

# iphone - xcode 移动音频文件

> ID：14896029
> 
> 赞同：1
> 
> 时间：2013-02-15T13:40:28.280
> 
> 标签：iphone, xcode, cordova

我正在使用 PhoneGap 创建 iPhone 应用程序。其中我使用了 navigator.captureAudio 方法来录制音频。通常录制的音频文件存储在应用程序（tmp 文件夹）中。因此，每次录制时应用程序的大小都会增加。我不想将录制的文件保留在我的应用程序中。

有没有办法将此文件从应用程序存储移动到外部（如音乐）？如何在 Xcode 中移动这些文件？对此有何建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:43:25.837

AFAIK 您的应用程序将创建的任何文件都必须存储在应用程序目录结构中。这是因为`each iOS app operates within its own sandbox`.

请参阅 Apple 的文档：[文件系统编程指南](http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)。

[您可以使用MPMusicPlayerController](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMusicPlayerController_ClassReference/Reference/Reference.html)与其他应用程序（例如音乐应用程序）进行交互，但我从未尝试向其中添加文件，只播放文件。

您可以随时尝试 iCloud 集成吗？尽管我认为这仍会出现在您的沙箱中。

# c++ - C++11 std::set lambda 比较函数

> ID：14896032
> 
> 赞同：79
> 
> 时间：2013-02-15T13:40:36.907
> 
> 标签：c++, stl, c++11, lambda, std-function

我想创建一个`std::set`具有自定义比较功能的。我可以将它定义为一个带有 的类`operator()`，但我想享受定义一个使用它的 lambda 的能力，所以我决定在具有 的类的构造函数的初始化列表中定义 lambda 函数`std::set`作为成员。但我无法获得 lambda 的类型。在我继续之前，这里有一个例子：

```
class Foo
{
private:
     std::set<int, /*???*/> numbers;
public:
     Foo () : numbers ([](int x, int y)
                       {
                           return x < y;
                       })
     {
     }
}; 
```

经过搜索，我找到了两种解决方案：一种，使用`std::function`. 只需设置比较函数类型`std::function<bool (int, int)>`并像我一样传递 lambda。第二种解决方案是编写一个 make_set 函数，例如`std::make_pair`.

解决方案 1：

```
class Foo
{
private:
     std::set<int, std::function<bool (int, int)> numbers;
public:
     Foo () : numbers ([](int x, int y)
                       {
                           return x < y;
                       })
     {
     }
}; 
```

解决方案 2：

```
template <class Key, class Compare>
std::set<Key, Compare> make_set (Compare compare)
{
     return std::set<Key, Compare> (compare);
} 
```

问题是，我有充分的理由更喜欢一种解决方案吗？我更喜欢第一个，因为它使用了标准功能（make_set 不是标准功能），但我想知道：使用是否`std::function`会使代码（可能）变慢？我的意思是，它是否会降低编译器内联比较函数的机会，或者它应该足够聪明以表现得与它是 lambda 函数类型一样，而不是`std::function`（我知道，在这种情况下它不能是lambda 类型，但你知道，我问的是一般情况）？

（我使用 GCC，但我想知道流行的编译器一般会做什么）

**总结，在我得到很多很好的答案之后：**

如果速度很关键，最好的解决方案是使用带有`operator()`aka functor 的类。编译器最容易优化和避免任何间接。

为了便于维护和更好的通用解决方案，使用 C++11 特性，使用`std::function`. 它仍然很快（只是比仿函数慢一点，但可以忽略不计），您可以使用任何函数 - `std::function`、 lambda 、任何可调用对象。

还有一个使用函数指针的选项，但如果没有速度问题我认为`std::function`更好（如果你使用 C++11）。

有一个选项可以在其他地方定义 lambda 函数，但是您不会从比较函数作为 lambda 表达式中获得任何收益，因为您也可以将其设为一个类，`operator()`并且定义的位置无论如何都不会是集合构造。

还有更多的想法，比如使用委托。如果您想更全面地解释所有解决方案，请阅读答案:)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-15T13:49:44.193

编译器不太可能内联 std::function 调用，而任何支持 lambda 的编译器几乎肯定会内联仿函数版本，包括如果该仿函数是不被 a 隐藏的 lambda `std::function`。

您可以`decltype`用来获取 lambda 的比较器类型：

```
#include <set>
#include <iostream>
#include <iterator>
#include <algorithm>

int main()
{
   auto comp = [](int x, int y){ return x < y; };
   auto set  = std::set<int,decltype(comp)>( comp );

   set.insert(1);
   set.insert(10);
   set.insert(1); // Dupe!
   set.insert(2);

   std::copy( set.begin(), set.end(), std::ostream_iterator<int>(std::cout, "\n") );
} 
```

哪个打印：

```
1
2
10 
```

看到它在现场直播`[Coliru](http://coliru.stacked-crooked.com/a/de5fd737b48804de)`。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-02-15T14:10:50.160

是的，a`std::function`向您的`set`. 虽然编译器总是可以，理论上，找出你`set`的所有使用都`std::function`涉及在一个总是完全相同的 lambda 的 lambda 上调用它，这既困难又极其脆弱。

脆弱，因为在编译器可以向自己证明所有`std::function`对它的调用实际上都是对你的 lambda 的调用之前，它必须证明除了你的 lambda 之外，没有任何访问你`std::set`的权限`std::function`。这意味着它必须在所有编译单元中跟踪所有可能的路线以到达您`std::set`的位置，并证明它们都没有这样做。

在某些情况下这可能是可能的，但是即使您的编译器设法证明了这一点，相对无害的更改也可能会破坏它。

另一方面，具有无状态的函子`operator()`很容易证明行为，并且涉及到的优化是日常事务。

所以是的，在实践中我怀疑`std::function`可能会更慢。另一方面，`std::function`解决方案比一个更容易维护`make_set`，并且用程序员的时间换取程序性能是相当可替代的。

`make_set`有一个严重的缺点，即任何此类`set`的类型都必须从对 的调用中推断出来`make_set`。通常`set`存储持久状态，而不是您在堆栈上创建的东西然后超出范围。

如果您创建了一个静态或全局无状态 lambda `auto MyComp = [](A const&, A const&)->bool { ... }`，您可以使用`std::set<A, decltype(MyComp)>`语法来创建一个`set`可以持久的，但编译器很容易优化（因为所有实例`decltype(MyComp)`都是无状态函子）和内联。我指出这一点，因为你坚持`set`在`struct`. （或者你的编译器是否支持

```
struct Foo {
  auto mySet = make_set<int>([](int l, int r){ return l<r; });
}; 
```

我会感到惊讶！）

最后，如果您担心性能，请考虑`std::unordered_set`更快（代价是无法按顺序迭代内容，并且必须编写/找到一个好的哈希），并且`std::vector`如果您有一个排序更好2阶段“插入所有内容”然后“重复查询内容”。只需将其填充到第`vector`一个，然后`sort` `unique` `erase`，然后使用免费`equal_range`算法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-15T14:04:04.203

无状态 lambda（即没有捕获的）可以衰减为函数指针，因此您的类型可能是：

```
std::set<int, bool (*)(int, int)> numbers; 
```

否则我会寻求`make_set`解决方案。如果您不使用单行创建函数，因为它是非标准的，那么您将不会编写太多代码！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T13:55:19.330

根据我使用分析器的经验，性能和美观之间的最佳折衷方案是使用自定义委托实现，例如：

[https://codereview.stackexchange.com/questions/14730/impossibly-fast-delegate-in-c11](https://codereview.stackexchange.com/questions/14730/impossibly-fast-delegate-in-c11)

因为`std::function`通常有点太重了。我无法评论你的具体情况，因为我不知道。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T14:15:59.570

如果您确定将`set`作为类成员，在构造函数时初始化其比较器，那么至少一级间接是不可避免的。考虑到就编译器所知，您可以添加另一个构造函数：

```
 Foo () : numbers ([](int x, int y)
                   {
                       return x < y;
                   })
 {
 }

 Foo (char) : numbers ([](int x, int y)
                   {
                       return x > y;
                   })
 {
 } 
```

一旦你有一个 type 的对象`Foo`，它的类型`set`就不会携带关于哪个构造函数初始化了它的比较器的信息，所以要调用正确的 lambda 需要间接到运行时选择的 lambda `operator()`。

由于您使用的是无捕获 lambda，因此您可以使用函数指针类型`bool (*)(int, int)`作为比较器类型，因为无捕获 lambda 具有适当的转换函数。这当然会涉及通过函数指针的间接寻址。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T13:43:08.733

差异很大程度上取决于编译器的优化。如果它优化了 lambda`std::function`那些是等价的，如果不是，你在前者中引入一个间接，你在后者中不会有。

# opengl - 增加镜面反射会减少 OpenGL 中的光照

> ID：14896037
> 
> 赞同：0
> 
> 时间：2013-02-15T13:40:49.217
> 
> 标签：opengl, graphics, lighting, specular

我在我的 opengl 4.3 着色器中更改镜面反射功率分量时遇到问题。当我使用介于 0-10 之间的光泽度值时，高光效果很好，但是，随着该值的增加以使材质更发光，光照强度会降低。这是我的代码：

```
 //Direct Lighting
vec3 L = normalize(worldPos.xyz - lightPos.xyz);
vec3 D = normalize(lightDir.xyz);
float dist = length(-L);
float I = max(dot(N.xyz, -L), 0.0);

vec3 h = normalize(-L.xyz + E);
float specLighting = 0.0;
specLighting = pow(max(dot(N.xyz, h), 0.0),50.0);

fColor.xyz = vec3(specLighting); 
```

因此，如果将 shininess 值增加到 50 左右，则根本没有光照。顺便说一句，在这段代码中，我只显示镜面反射来调试问题。

[编辑] 很抱歉解释中缺乏细节，我附上了一些将镜面反射值从 1 更改为 7 的结果的屏幕截图。如您所见，随着镜面高光尺寸的减小（这就是我想要的），灯光也会变暗（这不是我想要的）。大约 10 分钟后，它会完全变黑。

顺便说一句，我完全在像素/片段着色器中执行此操作。

我还添加了来自我的 directx 11 测试引擎的屏幕截图，使用完全相同的代码进行镜面光照，但光泽系数为 100。

![specLighting = pow(max(dot(N.xyz, h), 0.0),1.0);](../Images/a2e3e707f7ef5bf2f250ae890ef587f8.png)

![specLighting = pow(max(dot(N.xyz, h), 0.0),2.0);](../Images/efa9c5267acd742174488f72c1d0c39f.png)

![specLighting = pow(max(dot(N.xyz, h), 0.0),3.0);](../Images/bf91ff70572673a36a33a3642a1d111a.png)

![specLighting = pow(max(dot(N.xyz, h), 0.0),5.0);](../Images/e72a118685ea5981cac982dc00f9aa2f.png)

![specLighting = pow(max(dot(N.xyz, h), 0.0),7.0);](../Images/7654abb22d370b0e1da83d559742681e.png)

![directx 11 高光](../Images/1e5f021e2c01c18541d52dc2e8d3ac9b.png)

直连 11：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:47:06.730

如果要保持基于光照的最小照明，则应添加非镜面反射组件。高光组件通常用于为材质*添加*高光，而不是作为唯一的贡献者。

无论如何，您报告的变暗是增加指数的自然结果。想一想：因为向量是预先归一化的，`dot(N.xyz, h)`所以不超过`1.0`. 将 0 到 1 之间的数字提高到高次幂自然会使结果很快变得非常小……这正是您想要的尖锐镜面高光！

当然，减小高光的大小会降低平均镜面反射（当然，除非您使最大镜面值更亮......）。但是，很少有实际物体*只有*镜面反射。而且，如果一个物体*确实*只有镜面反射，那么除了镜面光点外，它看起来会很暗。

* * *

另一种看待它的方式：您的公式为您提供最大值为的镜面亮度`1.0`（在某些方面，这对于每个颜色通道最大为 的传统低动态范围计算机图形实际上很方便`1.0`）。然而，在现实世界中，较亮的表面通常会导致镜面反射高光变得更亮和更小，从而使平均镜面反射亮度保持不变。正是这些与案例之间的对比使情况变得混乱。出于实际目的，公式是“按设计工作——不会修复”；通常，艺术家将简单地调整镜面反射指数和亮度，直到获得他想要的外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T01:01:57.820

我最初在用足够的信息更新问题之前写了这个答案。所以在这种情况下这显然不是正确的答案，但可能适用于有类似问题的人......

关于为什么镜面光照强度会随着功率的增加而降低的一种可能的解释是，如果您是在顶点级别而不是按像素计算它。如果高光点恰好落在多边形的中间，而不是正好在一个顶点上，那么随着光泽度的增加，它的大小会减小，顶点的贡献会迅速下降，高光也会消失。真正为了良好的镜面反射（通常也是为了良好的照明），您需要计算每个像素，并且只插入实际上在多边形中平滑变化的东西，例如位置或法线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T03:08:17.753

谢谢大家的帮助，

原来这只是顶点着色器中的一个愚蠢错误：

代替：

```
 fNorm = vec4(mat3(worldSpace)*vNorm.xyz,0); 
```

我刚刚：

```
fNorm = vNorm; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-15T16:54:58.777

如果你增加“光泽度”，你的材料就会变得不那么闪亮。

# python - Python 3 函数不兼容（quote_from_bytes 和 unquote_to_bytes）结果

> ID：14896039
> 
> 赞同：0
> 
> 时间：2013-02-15T13:40:55.970
> 
> 标签：python, python-3.x

我有以下代码：

```
src = b'\x12\x34\x56\x78\x9a\xbc\xde\xf1\x23\x45\x67\x89\xab\xcd\xef\x12\x34\x56\x78\x9a'
quoted = quote_from_bytes(src)
print(quoted)
unquoted = unquote_to_bytes(quoted)
print(unquoted) 
```

看不懂，为什么要`print(unquoted)`退货 `b'\x124Vx\x9a\xbc\xde\xf1#Eg\x89\xab\xcd\xef\x124Vx\x9a'`

反而`b'\x12\x34\x56\x78\x9a\xbc\xde\xf1\x23\x45\x67\x89\xab\xcd\xef\x12\x34\x56\x78\x9a'`

src 是一个 sha1 哈希。

我使用 Python 3.3 版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:53:36.333

Python 不对*可打印*字节使用`\xab`转义码。例如，字节显示为可打印字符：*`\x34``4`*

 *```
>>> print(b'\x34')
b'4' 
```

值中可以显示为 ASCII 字符的每个其他字节也是如此；`\x56`打印为`V`,`\x78`显示为`x`等。

这是正常行为，值仍然相同：

```
>>> b'\x34' == b'4'
True 
```*

# mysql - mysql与sql-92兼容吗？

> ID：14896045
> 
> 赞同：6
> 
> 时间：2013-02-15T13:41:09.963
> 
> 标签：mysql, sql, database

前几天我试图在 mysql 中使用标准语法创建一个表：

```
create table client(
    rc character varying(11)
    constraint client_pk primary key 
); 
```

但是，mysql 不支持以这种方式设置主键。（我 99% 确定它符合 sql-92 规范）所以我的问题是：MySQL 是否无法支持 20 年前的标准中的这些基本内容，还是我遗漏了什么？

编辑：我的目标不是使用某些 mysql 方言创建此表，而是使用标准化语法创建此表。问题是这是否可能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T16:28:08.413

要回答您的问题，不，MySQL 不完全符合 SQL-92 规范，因为 MySQL 仅支持规范的一个子集，并且 MySQL 有一些重要（非常有用）的扩展，这些扩展不属于 SQL-92 规范的一部分.

这不仅仅是关于 MySQL 接受和识别的 SQL 语法，而且（可能更大的问题）是关于 MySQL对语法的实际执行，MySQL 使用*它*接受的语法执行的实际操作。这确实是一个比 MySQL 识别语法这一更肤浅的问题更重要的问题。

并不是说 MySQL 是懒惰的。并不是说 MySQL 不关心。

MySQL 文档有一整节专门讨论 MySQL 与 SQL 标准的区别。最重要的区别并不在于语法，而在于“MySQL 在某些情况下执行操作的方式不同”这一事实。

例如，MySQL 接受 CHECK 约束的语法，但 MySQL 实际上并没有进行任何检查或尝试强制执行 CHECK 约束。MySQL 接受符合 SQL-92 规范的语法，但 MySQL 的行为与接受相同语法的其他数据库有很大不同。

另一个例子，MySQL 在 FOREIGN KEY 约束方面的行为有很大不同，这取决于表的存储引擎是 MyISAM 还是 InnoDB。

* * *

要让您的 CREATE TABLE 语句在 MySQL 中执行，您需要更改它。

看起来最简单的选择是`constraint client_pk`从 sql 文本中删除。您可以在列定义中指定表约束：

```
create table client(
   rc character varying(11) primary key 
); 
```

或单独声明表约束”

```
create table client(
   rc character varying(11),
   primary key (rc)
); 
```

这两种形式都与 SQL-92 规范完全兼容。

请注意，当约束的声明不在列上时，MySQL 确实接受约束名称定义的语法，例如

```
create table client(
   rc character varying(11),
   constraint client_pk primary key (rc)
); 
```

而且该语法也完全兼容 SQL-92 规范。

但请注意，MySQL*忽略*提供的约束名称，并将名称分配给`PRIMARY`主键约束。即使在单独的 ALTER TABLE 语句中声明了约束也是如此。

请注意，MySQL 接受的语法以及在某些情况下它执行的操作取决于特定 MySQL 变量的设置，特别`sql_mode`是`default-storage-engine`该表是使用`MyISAM`引擎还是`InnoDB`引擎创建，甚至是默认存储引擎设置为的极端情况`BLACKHOLE`。

我了解您的目标是“使用标准化语法创建此表”。

但我认为您确实*需要*关注 MySQL 特定语法的至少一些最小子集，就 MySQL 在“标准化语法”呈现时可能表现出的各种可能行为而言。考虑：

```
SET default-storage-engine = 'MyISAM' ;
SET default-storage-engine = 'InnoDB' ;
SET sql_mode = '' ; 
SET sql_mode = 'ANSI' ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T13:54:59.957

这在 MySQL 5.5.29 中对我有用：

```
create table client(
    rc character varying(11),
    constraint client_pk primary key(rc)
); 
```

但是，正如 a_horse_with_no_name 指出的那样，MySQL 忽略了该`client_pk`名称并调用它`PRIMARY`。

参考：

[http://savage.net.au/SQL/sql-92.bnf.html](http://savage.net.au/SQL/sql-92.bnf.html)

[http://owen.sj.ca.us/~rk/howto/sql92.html](http://owen.sj.ca.us/~rk/howto/sql92.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T13:48:03.960

```
create table tablename
(
    column_Name varchar(20) not null,
    column_Name varchar(20),
    primary key(column_name)
); 
```

通过这种方式，您可以创建表并设置主键。

# python - Python：os.remove 不起作用

> ID：14896046
> 
> 赞同：9
> 
> 时间：2013-02-15T13:41:18.113
> 
> 标签：python

为什么不`os.remove(-string-)`为我工作？我的代码编写如下：

```
try:
os.remove(a)
    output = current_time() + "\trmv successful"
    message = message + '\n' + output
    message = "".join(message)
    return message

except OSError:
    try:
        os.removedirs(a)
        output = current_time() + "\trmv successful"
        message = message + '\n' + output
        message = "".join(message)
        return message

    except OSError:
        output = current_time() + "\trmv failed: [?]"
        message = message + '\n' + output
        message = "".join(message)
        return message 
```

`21:32:53 rmv failed: [?]`每次我`rmv`在客户端执行命令时它都会返回。如果有帮助，我的 Python 版本是 2.6.1。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-15T13:47:20.073

有例外需要注意！检查这个：

```
try:
    os.remove(a)
except OSError as e: # name the Exception `e`
    print "Failed with:", e.strerror # look what it says
    print "Error code:", e.code 
```

修改您的代码以显示错误消息，您就会知道它失败的原因。[文档](http://docs.python.org/2/library/exceptions.html#exceptions.OSError)可以帮助您。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T13:50:12.977

你为什么不尝试打印出错误？

```
try:
    os.remove(a)
    output = current_time() + "\trmv successful"
    message = message + '\n' + output
    message = "".join(message)
    return message

except OSError, e:
    print ("Failed to remove %s\nError is: %s" % (a,e))
    try:
        os.removedirs(a)
        output = current_time() + "\trmv successful"
        message = message + '\n' + output
        message = "".join(message)
        return message

    except OSError, e:
        print ("Failed twice to remove %s\nError is: %s" % (a,e))
        output = current_time() + "\trmv failed: [?]"
        message = message + '\n' + output
        message = "".join(message)
        return message 
```

该错误实际上可能是您看到的任何内容...例如权限问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-06T13:28:38.077

尝试在打开/删除文件后放置一些延迟 time.sleep(0.2) 或者似乎是 Windows 和/或防病毒问题

Josh Rosenberg 在[这个](https://bugs.python.org/issue1425127)关于 python 开发的错误跟踪中指出了相同的点：

短版：索引和防病毒工具可防止发生删除。

更长的版本：DeleteFile（以及所有最终转移到 DeleteFile 的东西）在 Windows 上以一种有趣的方式运行。在内部，它打开文件的句柄，将其标记为待删除，然后关闭句柄。如果在此期间没有人潜入并抓住文件的另一个 HANDLE，则当 DeleteFile 的隐藏 HANDLE 关闭时，该文件将被删除。精心设计的防病毒/索引工具使用 oplocks ( [http://blogs.msdn.com/b/oldnewthing/archive/2013/04/15/10410965.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2013/04/15/10410965.aspx) )，因此它们可以打开文件，但可以无缝地退出如果正常进程需要对文件进行独占控制或删除它。遗憾的是，“精心设计”并不是一个通常与反病毒工具相关的术语，因此这样的错误相对来说比较常见。

使用 GetTempFileName() 和 MoveFile() 将文件移开等解决方法将起作用，尽管我相信它们会引入自己的竞争条件（临时文件本身已创建但 HANDLE 立即关闭，这可能意味着竞争使用会阻止 MoveFile() 的不良防病毒软件打开空文件。

基本上，如果您在 Windows 上运行，并且您使用的是不友好的防病毒/索引工具，则没有干净的解决方法可以保持相同的行为。您不能一遍又一遍地创建和删除同名文件而不冒访问被拒绝错误的风险。

也就是说，您可能只需打开和关闭文件一次即可获得相同的结果。更改原始伪代码：

# mongodb - Ember 数据多级层次结构始终嵌入

> ID：14896049
> 
> 赞同：1
> 
> 时间：2013-02-15T13:41:24.433
> 
> 标签：mongodb, ember.js, ember-data

我可以始终将嵌入式用于一级，但无法将其用于两级深度模型。需要紧急帮助

```
App.Post = DS.Model.extend(
  title: DS.attr("string")
  comment: DS.belongsTo("App.Comment")
)

App.Comment = DS.Model.extend(
  text: DS.attr("string")
  ferment: DS.belongsTo("App.Ferment") 
)

App.Ferment = DS.Model.extend(
  fermenter: DS.attr("string")
)

App.Adapter.map App.Post,
  'comment':
    embedded: "always"

App.Adapter.map App.Comment,    
  ferment :
    embedded: "always"

# -----------------------------
App.store = App.Store.create(
  adapter: App.Adapter.create()
)
# -----------------------------

App.store.adapter.load App.store, App.Post,
  id: 12
  comment: {text: "blabla", ferment:{fermenter:'abcd'}}

console.log App.Post.find(12).get("comment.text")
console.log App.Post.find(12).get("comment.ferment.fermenter") 
```

我将 comment.text 的日志记录为 blabla 但无法让第二部分工作。我正在使用 Ember 数据存储的第 11 版。任何有类似问题/解决方案的人。

有趣的是，我们尝试了 hasMany，所以 Post -hasMany-> Comments，Comment -hasOne-> Ferment。这工作正常，这是代码。

```
App.Post = DS.Model.extend(
  title: DS.attr("string")
  comments: DS.hasMany("App.Comment")
)

App.Comment = DS.Model.extend(
  text: DS.attr("string")
  ferment: DS.belongsTo("App.Ferment")
)

App.Ferment = DS.Model.extend(
  fermi: DS.attr("string")
)

App.Adapter.map App.Post,
  comments:
    embedded: "always"

App.Adapter.map App.Comment,
  ferment:
    embedded: "always"

App.store = App.Store.create(
  adapter: App.Adapter.create()
)

# App.store.adapter.serializer.configure(App.Comment,
#   sideloadAs: 'comments' 
# )
App.store.adapter.load App.store, App.Post,
  id: 12
  comments: [{text: "blabla", ferment:{fermi: "found fermi"}}]

console.log App.Post.find(12).get("comments.firstObject.text")
console.log App.Post.find(12).get("comments.firstObject.ferment.fermi") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:57:21.877

ember-rails 中仍有一些错误修复：我们因功能而受苦

```
extractEmbeddedBelongsTo: function(loader, relationship, data, parent, prematerialized)     {
var reference = this.extractRecordRepresentation(loader, relationship.type, data, true);
prematerialized[relationship.key] = reference;

// If the embedded record should also be saved back when serializing the parent,
// make sure we set its parent since it will not have an ID.
var embeddedType = this.embeddedType(parent.type, relationship.key);
if (embeddedType === 'always') {
  reference.parent = parent;
} 
```

}

BelongsTo 关系正在跳过嵌入对象的提取。错误的在这里：

```
extractEmbeddedBelongsTo: function(loader, relationship, data, parent, prematerialized) {
var reference = loader.sideload(relationship.type, data);
prematerialized[relationship.key] = reference;

// If the embedded record should also be saved back when serializing the parent,
// make sure we set its parent since it will not have an ID.
var embeddedType = this.embeddedType(parent.type, relationship.key);
if (embeddedType === 'always') {
  reference.parent = parent;
} 
```

}

# ios - iPhone 应用程序的 C 代码链接错误

> ID：14896050
> 
> 赞同：1
> 
> 时间：2013-02-15T13:41:26.323
> 
> 标签：ios, objective-c, c, linker

将少量 C 源文件集成到 Objective-C iOS 项目时出现链接错误。

C 文件是由另一位在 c 项目和 python 项目中成功使用该代码的开发人员提供给我的。

当我将 c 源代码添加到 XCode 项目中时，代码可以编译，但是在目标 c 文件中添加代码以引用 C 代码后出现链接错误。对于 C 代码中的变量，我得到“重复符号错误”。这是目标 c 代码具有 .m 扩展名的时候。

当我将目标 c 文件更改为 .mm 扩展名时，我从目标 c 代码调用的 C 函数出现“未找到体系结构 i386 的符号”错误。

论坛上有很多关于C和Objective C的问题，我还没有找到解决办法。有什么快速的检查吗？

代码片段：

```
File: res.h

float Max_Std_Amp = 50;
void RD_Dispose(void);

File: res.c
void RD_Dispose(void) {
   Max_Std_Amp = 0;
}

File: Import.mm
#import "res.h"
void process(UInt32* data, UInt32 dataLength)
{
    RD_Dispose();
} 
```

链接错误：

当 Import.m 具有 .m 扩展名时：

```
duplicate symbol _Max_Std_Amp in:
    /Users/dayhacker/Library/Developer/Xcode/DerivedData/My_Project-dbvpktweqzliaefgbqbebtdgyrey/Build/Intermediates/My Project.build/Debug-iphonesimulator/Respitory Rate.build/Objects-normal/i386/Import.o 
```

当 Import.mm 具有 .mm 扩展名时：

```
Undefined symbols for architecture i386:
 "RD_Dispose()", referenced from:
 process(unsigned long*, unsigned long) in Import.o 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:26:25.893

水库：

```
float Max_Std_Amp = 50; 
```

那应该是：

```
extern float Max_Std_Amp; 
```

和源文件中实际`float`定义的（`res.c`）：

```
float Max_Std_Amp = 50; 
```

否则`Max_Std_Amp`将成为包含 的每个源模块的一部分`res.h`，这不是预期的。

如果要使用 C++ 中的 C 函数（`.mm`是 Objective-C++），则需要将函数声明为具有 C 链接，如下所示：

水库：

```
#ifdef __cplusplus
extern "C" {
#endif

void RD_Dispose(void);

#ifdef __cplusplus
}  // extern "C"
#endif 
```

上面对保护宏和 C 链接定义的使用将允许`res.h`头文件包含在 C 和 C++（Objective-C 和 Objective-C++）源模块中。

# ios - 预览前是否有“已拍摄照片”的 UIImagePicker 事件？

> ID：14896053
> 
> 赞同：0
> 
> 时间：2013-02-15T13:41:45.147
> 
> 标签：ios, camera, uiimagepickercontroller

我在相机视图打开时记录数据，并且想记住拍摄照片时的数据。

但是如果我等待 didFinishPickingImage:，数据已经太旧了，因为用户可以在预览对话框中停留很长时间。

当预览开始/被取消时，是否有可能以某种方式看到？

我正在使用带有默认相机按钮的叠加视图，并不想从头开始发明界面（按钮/闪光灯/对焦/后置/预览）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:09:13.910

不，如果您使用的是标准 UIImagePickerController，那么您获得的唯一事件是两个委托方法。

有一个获取照片元数据的键。此元数据可能包含时间戳。也许您可以将这个时间戳与您正在收集的数据相关联。

# javascript - 哈希在控制台中显示为填充，但大小为 0

> ID：14896055
> 
> 赞同：1
> 
> 时间：2013-02-15T13:41:49.403
> 
> 标签：javascript, prototypejs

谁能解释为什么我不能正确确定原型哈希的大小。

以下打印出来`klass {_object: Object, test: "foo", each: function, eachSlice: function, all: function…}`证明“测试”对肯定会被添加。但大小打印为 0。

```
this.state = new Hash();

this.state["test"] = "foo";

console.log(this.state.size());
console.log(this.state); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T13:50:07.780

这是因为您只是向`Hash`实例添加了一个普通属性。您需要使用以下方法将元素实际添加到哈希中[`.set()`](http://api.prototypejs.org/language/Hash/prototype/set/)：

```
this.state.set("test", "foo"); 
```

这是一个[工作示例](http://jsfiddle.net/jamesallardice/Rmty9/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T16:06:39.763

您也可以像这样使用其中的数据初始化散列。

```
var state = $H({'test':'foo','moretest':'bar'});

console.log(state.size()); // returns 2
console.log(state.get('moretest')); returns bar 
```

# sql - 如何使用 SSIS 根据表中的文件名在 FTP 站点之间传输文件？

> ID：14896056
> 
> 赞同：1
> 
> 时间：2013-02-15T13:41:50.897
> 
> 标签：sql, ftp, ssis

我有一个*源*FTP 目录（3000 个文件），其中包含例如。

```
1.txt
2.txt
3.txt
4.txt 
```

只有当文件的名称与我的 SQL 数据库中的值匹配时，我才想将 2000 个文件发送到*目标FTP。*假设我们有一个包含列的表：

```
ID
Code (varchar) 
```

在此表中，它显示如下：

```
ID     Code
1        1
2        2   
3        8
4        5
5        7 
```

代码列值对应于源 FTP 目录中的文件名。

因此，例如 Code 列的值为 1、2 我只想将文件发送*`1.txt`*到*`2.txt`*新的 FTP 目标。

我如何在**`SSIS`**工作或使用中做到这一点**`T-SQL`**？

我可以为接收和发送设置 FTP 任务，我可以创建一个表达式来处理这个吗？

或者**`FileZilla`**有什么可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:22:35.160

运行查询以`CODE`将数据库中的所有值选择到`Object`变量中，然后使用 a`ForEach Loop`循环遍历这些值并将文件从一台服务器移动到另一台服务器。

在您的循环中，您可以将`CODE`值分配给单独的变量`String`或`Int`变量，然后使用表达式生成文件名

一些演练：

[http://coldlogics.wordpress.com/2011/04/09/using-ssis-to-dynamically-create-data-files-from-a-full-result-set/](http://coldlogics.wordpress.com/2011/04/09/using-ssis-to-dynamically-create-data-files-from-a-full-result-set/)

[http://www.select-sql.com/mssql/loop-through-ado-recordset-in-ssis.html](http://www.select-sql.com/mssql/loop-through-ado-recordset-in-ssis.html)

# c# - MVC4 WebApi 进程启动器

> ID：14896057
> 
> 赞同：7
> 
> 时间：2013-02-15T13:41:52.200
> 
> 标签：c#, asp.net, .net, asp.net-mvc, async-await

我有一个*MVC4 API REST*试图在新线程中启动一个进程。我正在使用框架 4.5 并尝试使用同步和等待子句。

我的代码如下所示：

```
[AcceptVerbs("POST")]
public HttpResponseMessage Launch(string id)
{
    runProcessAsync(id);   // 1                                                        

    return Request.CreateResponse(HttpStatusCode.Accepted); // 2
}

protected async void runProcessAsync(string id)
{
    int exitcode = await runProcess(id);  // 3
    string exitcodesz = string.Format("exitcode: {0}", exitcode);  // 4
    // do more stuff with exitcode
}

protected Task<int> runProcess(string id)
{
    var tcs = new TaskCompletionSource<int>();

    var process = new Process
    {
        StartInfo = { FileName = @"C:\a_very_slow_task.bat" },
            EnableRaisingEvents = true
        };
        process.Exited += (sender, args) => tcs.SetResult(((Process)sender).ExitCode);            

        process.Start();

        return tcs.Task;
    }  
} 
```

理想情况下，有人会使用 POST 动词执行 api 休息调用 ( /task/slowtask/launch ) 并期望 202 (accepted) 非常快。

我使用 Fiddler Web Debugger 发出请求，代码进入 Launch (// 1)，然后进入 await (// 3)，创建并启动慢速任务并返回 Accepted (// 2)。但是此时，Fiddler 并没有显示 202 结果。见附图：

[http://imageshack.us/photo/my-images/703/fiddler1.png/](http://imageshack.us/photo/my-images/703/fiddler1.png/)

当慢任务结束时，代码继续捕获exitcode（// 4），然后将202捕获到Fiddler中。

这很奇怪，因为我很久以前就返回了。我错过了什么？我如何更改该代码以非常快速地返回 202 而忘记任务。

**注意**：我知道如何使用非框架 4.5 功能来做到这一点，我正在尝试学习如何使用异步/等待。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T09:07:41.873

我认为这是因为`runProcessAsync()`在请求的同步上下文上运行。如果你不想这样，你可以使用`Task.Run(() => runProcessAsync(id));`. 但要小心这一点，因为 IIS 可以在那段时间回收你的 AppDomain，所以有可能`runProcessAsync()`无法完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:31:09.383

最简单的方法是更改`runProcessAsync`​​为返回一个`Task`. 请记住，`async`方法应尽可能返回`Task`/ `Task<T>`，并且仅在*必要*`void`时返回。

 *但是，我必须提醒您，这是非常危险的。ASP.NET 是一个 HTTP 服务器，因此如果没有活动请求，它可以随意关闭您的 AppDomain。这将意味着您的“使用退出代码做更多的事情”只会从地球上掉下来。

我有一篇[博客文章`BackgroundTaskManager`](http://blog.stephencleary.com/2012/12/returning-early-from-aspnet-requests.html)，您可以使用它来将`Task`s 注册到 ASP.NET 运行时。`Task`如果有已注册的尚未完成，它将尝试延迟 AppDomain 关闭。但是，这只是“尽力而为”；这种事情没有任何保证。在 ASP.NET 中运行的任何与活动请求无关的代码都是危险的情况。*

# css - IE9 上的 CSS：表格中 td 元素内的 div 将垂直显示

> ID：14896058
> 
> 赞同：1
> 
> 时间：2013-02-15T13:41:53.343
> 
> 标签：css, internet-explorer, html-table, cross-browser, internet-explorer-9

我有一系列 div 元素嵌套在另一个 div 中，该 div 放置在表格的 td 单元格中。出于某种原因，这些 div 尽管它们浮动到左侧和内联块，并且 table、td 和容器 div 都设置为 width: 100%，但它们在 IE9 上看起来是垂直堆叠的。

这是一个实时站点的链接（检查样本）：[http ://ssd2go.co.uk](http://ssd2go.co.uk)

这是我的代码的简化示例：

```
<table>
    <tr>
        <td>
           <div class="select">
               <div><input><a><img></a></div>
               <div><input><a><img></a></div>
               <div><input><a><img></a></div>
           </div>
        </td>
    </tr>
    <tr>
        <td>
           <div class="select">
               <div><input><a><img></a></div>
               <div><input><a><img></a></div>
               <div><input><a><img></a></div>
           </div>
        </td>
    </tr>
</table> 
```

table、tr、td 和 div.select 为 width: 100%；所有内层和链接都有 float:left 和 display:inline

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:26:08.253

取下以下宽度：100% 来自：

> .variations-table, .variations-table tr, .variations-table tr td, > .variations-table tr td > div

也可以使用一些奇怪的选择器，并且永远不应该真正需要使用重要的选择器（在大多数情况下）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:21:22.273

**修复：**删除以下属性可在 IE 8-10、FF、Chrome 中修复它：

```
.variations-table,
.variations-table tr,
.variations-table tr td,
.variations-table tr td>div {
    width: 100% !important;
} 
```

**最佳实践：**理想情况下，您还希望避免让您的标记对于像这样的简单布局如此复杂。你可以从哪里开始：尽量避免使用表，缩短你的类名，尽量减少或消除 id 的使用。你可以逃脱类似的事情：

```
<form>
  <div class="select">
    <a class="select-option">120 GB</a>
    <a class="select-option active">240 GB</a>
    <a class="select-option">480 GB</a>
  </div>
  <div class="select">
    <a class="select-option black">Black</a>
    <a class="select-option gray">Gray</a>
    <a class="select-option purple active">Purple</a>
    ...
  </div>
</form> 
```

# java - 使用 maven 在文件中附加值

> ID：14896059
> 
> 赞同：4
> 
> 时间：2013-02-15T13:41:57.410
> 
> 标签：java, maven

我有一个要附加到文件末尾的值，但我不知道要使用哪个插件。

示例：我要附加的值：“myValue”

文件：

价值1

价值2

**myValue** # 附加后

我知道我可以使用 antrun-plugin 来做到这一点，但是是否可以使用 maven 插件来做到这一点？

我也看过了`maven-shade-plugin`，但是从他们网站上的几个例子中，我只看到了追加 2 个文件而不是我需要的（追加到一个文件的值）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:05:38.903

您可以使用[Maven 过滤](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)来实现您正在寻找的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T13:50:38.500

很抱歉，但我认为您最好的选择确实是 Ant 插件。

每次我必须在我的 pom.xml 中使用 Ant 时，我都会不寒而栗，但在某些情况下，这是最简单的选择。学会接受它，它会为您省去一些麻烦:-)

您也可以编写自己的 Maven 插件，但这可能需要更多的工作。

另一种选择是创建一个 shell 脚本来附加值，然后使用`maven-exec-plugin`. 不过，在这种情况下，您将不得不处理不同的操作系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T14:06:17.967

[Codehaus gmaven-plugin](http://docs.codehaus.org/display/GMAVEN/Home)是此类任务的另一种选择。

# javascript - 如何检查此回调的返回

> ID：14896061
> 
> 赞同：1
> 
> 时间：2013-02-15T13:42:04.727
> 
> 标签：javascript, callback, titanium

如果涉及回调，我是一个完全的新手，所以我尝试了一些谷歌搜索。但是代码（有人在论坛上给我）与我遇到的回调示例非常不同。

谁能详细说明我如何检查此结果的真假？

```
exports.testGPS = function(_callback) {
    Ti.Geolocation.purpose = "Recieve User Location";
    Ti.Geolocation.accuracy = Titanium.Geolocation.ACCURACY_BEST;
    if (_callback && typeof(_callback)==='function') {
        Ti.Geolocation.getCurrentPosition(function(e) {
            _callback ((e.error) ? false: true);
        }); 
    }
} 
```

这是我的电话：

```
functions.testGPS(function () {
    //If true/false
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T13:45:17.427

为你的函数声明一个参数：

```
functions.testGPS(function (thereWasAnError) {
    if (thereWasAnError) {
        // do stuff
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T13:45:47.377

回调作为参数返回函数的结果。添加返回的变量并检查它

```
functions.testGPS(function (result) {
    if(result)
    {
       //TRUE
    }
    else
    {
       //FALSE
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T13:48:15.100

创建一个函数说 FetchResult()

```
function fetchResult(result)
{
    alert(result);
} 
```

调用传递回调的函数，

```
exports.testGPS(fetchResult) 
```

结果将自动通过调用 fetchResult 传递给您的函数。

# ios - 在带有 Xcode 4.3.2 - iOS 5 SDK 的 iOS 6.1 设备上部署

> ID：14896066
> 
> 赞同：1
> 
> 时间：2013-02-15T13:42:25.310
> 
> 标签：ios, xcode, cocoa-touch, ios5, deployment

我想在 iOS 6 设备上部署我的 iOS 5.1 BASE SDK 项目（使用 Xcode 4.3.2）。我完全了解有关此问题的当前解决方案；

**注意：**我不想在模拟器上工作，因为我正在使用 MBPRO 13' 而 iPad 模拟器不适合我的屏幕。由于我似乎无法降级 iPad，这是我必须处理的。

**选项 A：**升级到 Xcode 4.5

坏处

*   很多人在拥有多个 Xcode 版本时遇到问题，而我对当前项目的深入了解。所以我不能冒这个险。

**选项 B：**创建存档文件并将其作为 IPA 文件分发。然后通过 iTunes 将其发送到设备。

坏处

*   这个选项似乎是最合适的选项，因为我不需要更改任何内容。但问题是创建 IPA 并通过 iTunes 将其发送到设备大约需要 3-4 分钟。

我要求针对选项 A 或 B 的缺点提供任何解决方法。

*   有没有一种可靠的方法来保留两个版本的 Xcode 并在它们之间以 100% 的安全性进行切换并且不会破坏任何 Xcode？
*   是否有这样的自动化系统可以检索 IPA 并将其放入设备以供选项 B 使用？
*   还是有一个选项 C 可以帮助我解决这个问题？

由于这应该是一个常见问题，因此应该有一个简单的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:18:47.030

问：有没有一种可靠的方法来保持两个版本的 Xcode 并在它们之间以 100% 的安全性进行切换并且不会破坏任何 Xcode？

A: 是的，只需将它们安装在不同的地方。我经常发布`/Applications`安装在`~/Applications`.

问：是否有这样的自动化系统可以检索 IPA 并将其放入设备以用于选项 B？

A：我不这么认为，所以你可以自己写。您也可以使用 TestFlight。

问：或者是否有选项 C 可以帮助我解决这个问题？

A: 更新到 Xcode 4.6 并像你应该的那样工作。

另请注意，iPhone 模拟器可以缩放以适应您的桌面；在我的 15" MBP 上针对 Retina iDevices 进行测试时，我经常不得不这样做。

# scala - 为什么在 Scala Breeze 的这个 3x2 双打矩阵上调用均值是非法的？

> ID：14896071
> 
> 赞同：3
> 
> 时间：2013-02-15T13:42:40.800
> 
> 标签：scala, scalala

我是 Breeze（以前是 Scalala）的新手，不知道为什么下面的简单程序会引发异常。我正在使用 Scala 2.9.2 和 Breeze 0.1：

```
import breeze.linalg._
val m = DenseMatrix((3.0, 1.0, 2.0), (-2.0, 1.0, 3.0))
val n = mean(m, Axis._1) 
```

如果我使用 2x2 或 3x2 矩阵，它会按预期工作，但 2x3 矩阵会导致以下异常：

```
-- org.jblas ERROR Couldn't load copied link file: java.lang.UnsatisfiedLinkError: C:\Users\daved\AppData\Local\Temp\jblas8588491482847885553jblas.dll: Can't find dependent libraries.

Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 6
    at breeze.linalg.package$$anon$1.apply$mcD$sp(package.scala:203)
    at breeze.linalg.package$$anon$1.apply(package.scala:196)
    at breeze.linalg.package$$anon$1.apply(package.scala:186)
    at breeze.linalg.DenseVector.ureduce(DenseVector.scala:91)
    at breeze.linalg.Tensor$$anon$1.apply(Tensor.scala:149)
    at breeze.generic.UReduceable$class.apply$mcD$sp(URFunc.scala:56)
    at breeze.linalg.Tensor$$anon$1.apply$mcD$sp(Tensor.scala:148)
    at breeze.generic.URFunc$mcD$sp$class.apply$mcD$sp(URFunc.scala:32)
    at breeze.linalg.package$$anon$1.apply$mcD$sp(package.scala:186)
    at breeze.generic.URFunc$mcD$sp$$anonfun$apply$mcD$sp$1.apply(URFunc.scala:36)
    at breeze.linalg.LowPriorityDenseMatrix1$$anon$17.apply(DenseMatrix.scala:444)
    at breeze.linalg.LowPriorityDenseMatrix1$$anon$17.apply(DenseMatrix.scala:440)
    at breeze.generic.URFunc$mcD$sp$class.apply$mcD$sp(URFunc.scala:36)
    at breeze.linalg.package$$anon$1.apply$mcD$sp(package.scala:186)
    at com.tennisedge.opencv.BreezePlay$delayedInit$body.apply(BreezePlay.scala:24) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T16:23:55.433

我相信这是微风中的一个错误。特别是`DenseMatrix` `canCollapseCols`隐式转换。

如果我在本地文件中定义自己的隐式转换，那么一切都会按预期工作：

```
implicit def myCanCollapseCols[V, R:ClassManifest] = new CanCollapseAxis[DenseMatrix[V], Axis._1.type, DenseVector[V], R, DenseVector[R]] {
  def apply(from: DenseMatrix[V], axis: Axis._1.type)(f: (DenseVector[V]) => R): DenseVector[R] = {
    val result = DenseVector.zeros[R](from.rows)
    val t = from.t
    for(r <- 0 until t.cols) { // BUG WAS HERE: was from.cols in original defintion.
      result(r) = f(t(::, r))
    }
    result
  }
}

val m = breeze.linalg.DenseMatrix((3.0, 1.0, 2.0), (-2.0, 1.0, 3.0))
val n = breeze.linalg.mean(m, breeze.linalg.Axis._1) 
```

这仍然存在，所以我将在 GitHub 中创建一个拉取请求来修复它。与此同时，我可以只使用我自己的隐式转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T16:00:49.043

这是构造函数中抛出异常问题的完美示例（参考[this ）！](https://stackoverflow.com/questions/14865528/best-way-to-validate-and-extend-constructor-parameters-in-scala-2-10/14865697#14865697)伪装成依赖问题实际上`ArrayIndexOutOfBoundsException`是在按需类加载期间调用的构造函数中遇到的问题。这通常非常令人困惑。（这是我在构造函数中抛出异常的“最喜欢的”（最臭名昭著的）结果。）

至少在我看来是这样。我不能确定，真的。

# mysql - 在右表上带有条件 SELECT 的条件 LEFT INNER JOIN 查询

> ID：14896076
> 
> 赞同：2
> 
> 时间：2013-02-15T13:42:48.250
> 
> 标签：mysql, sql, join, conditional

在我输入所有这些之前，我已经尝试并尝试从此处的其他线程并通过搜索谷歌找到解决方案。但我似乎无法得到答案。我认为自己对 SQL 非常擅长，但我似乎根本无法解决这个问题。

我目前有两张桌子：

![在此处输入图像描述](../Images/129f02ca82a0140a3ec78b13e7f38600.png)

我正在尝试获取 and 的数组`ref_departments.id`，`ref_departments.department_name`它将用作前端的下拉列表以填充`company_department_norm`表格。最好在这一点上指出，我在创建下拉列表等方面没有技术问题——它是在 Yii 框架中构建的，并且实际的下拉列表本身已经到位。我的问题是识别正确的 SQL 语句以带回我想要填充下拉列表的数据（我将使用 Yii 的 Chtml 帮助器类）。

`SELECT`我要创建的语句的第一个条件是，对`ref_departments`表的查询将只选择在`id`列中找不到 (PK) 列中的值的`company_department_norm.department_id`行。这样做是为了使列表中只有有效的选项可用。我有这个查询工作，它看起来像这样......

```
SELECT RD.id, RD.department_name FROM ref_departments RD 
LEFT OUTER JOIN company_department_norm CDN
ON (CDN.department_id = RD.id) 
WHERE (CDN.department_id IS NULL) 
```

额外的完整性/数据验证也将在后端（在 Yii 模型类中）完成。

下一步是我完全坚持的部分。在 Yii 模型中`company_department_norm`，该`company_id`字段表示公司的 FK（如上所示）。这将作为参数传递到查询中，以向查询添加附加条件，以便`JOIN`语句仅匹配右表 ( `company_department_name`)上的行，其中与从模型传递`company_id`的行相同。`company_id`出于测试目的，我只是尝试使用`company_id`硬编码到 SQL 语句中的整数 1 来实现此功能。但是，对于我的生活，我似乎无法弄清楚如何做到这一点。

我试图用上面的查询修改： -

```
LEFT OUTER JOIN (SELECT * FROM company_department_norm WHERE 
company_department_norm.company_id = 1) CDN 
```

但是，这似乎根本没有过滤正确的表格。

谁能帮我这个？我可以想象，比我更有经验的 SQL 用户能够很快地识别出解决方案，但我已经花了几个小时试图解决这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:56:29.473

您可以将 company_id 条件放在 ON 子句中：

```
SELECT RD.id, RD.department_name FROM ref_departments RD 
LEFT OUTER JOIN company_department_norm CDN
ON (CDN.department_id = RD.id AND CDN.company_id = 1) 
WHERE (CDN.department_id IS NULL) 
```

这将返回尚未在公司 1 中代表的任何部门，而您的第一个查询返回尚未在*任何*公司中代表的任何部门。

* * *

回复您的评论：鉴于您的示例数据，此查询不会显示是否使用 company_id 条件之间的任何区别，因为这两个部门*都*代表公司 1。

我已经在 MySQL 5.5 上对此进行了测试，并且效果很好。这是另一个具有更多数据的示例，可以更好地展示：

```
use test;

drop table if exists ref_departments;
create table ref_departments (
 id int primary key,
 department_name varchar(20)
);

insert into ref_departments values
(1, 'Accounts'),
(2, 'HR'),
(3, 'IT');

drop table if exists company_department_norm;
create table company_department_norm (
 id int primary key,
 company_id int,
 department_name varchar(20),
 department_id int
);

insert into company_department_norm values
(1, 1, 'Accounting', 1),
(2, 1, 'HR', 2),
(3, 2, 'Accounts', NULL),
(4, 2, 'HR', NULL),
(5, 2, 'IT', 3); 
```

现在查询不在公司 1 的部门，它正确显示“IT”：

```
SELECT RD.id, RD.department_name FROM ref_departments RD 
LEFT OUTER JOIN company_department_norm CDN
ON (CDN.department_id = RD.id AND CDN.company_id = 1) 
WHERE (CDN.department_id IS NULL);

+----+-----------------+
| id | department_name |
+----+-----------------+
|  3 | IT              |
+----+-----------------+ 
```

现在查询不在公司 2 中的部门。即使公司 2*命名*Accounts 和 HR，它也没有连接条件所基于的数字部门 ID。所以它认为这两个部门不匹配。

```
SELECT RD.id, RD.department_name FROM ref_departments RD 
LEFT OUTER JOIN company_department_norm CDN
ON (CDN.department_id = RD.id AND CDN.company_id = 2) 
WHERE (CDN.department_id IS NULL);

+----+-----------------+
| id | department_name |
+----+-----------------+
|  1 | Accounts        |
|  2 | HR              |
+----+-----------------+ 
```

如果您得到其他结果，您要么没有使用我描述的查询，要么您的数据与您描述的不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T13:54:45.030

```
SELECT RD.id, RD.department_name 
FROM ref_departments RD
WHERE 
    NOT EXISTS (
    SELECT 1 FROM company_department_norm 
    WHERE 
        company_id = 1 
    AND department_id = RD.id
) 
```

PS：您应该考虑删除表格的`department_name`列`company_department_norm`：[6NF](http://en.wikipedia.org/wiki/Sixth_normal_form)

SQLFIDDLE：[http ://sqlfiddle.com/#!2/553a4/2](http://sqlfiddle.com/#!2/553a4/2)

# javascript - 延迟 Javascript 以优化网站

> ID：14896077
> 
> 赞同：0
> 
> 时间：2013-02-15T13:42:59.517
> 
> 标签：javascript, jquery, asp.net, performance, pagespeed

我正在**优化我的网站**，我正在使用谷歌分析工具来检查分数。

我参考了许多文章并在 stackoverflow.com 上进行了研究，但没有得到任何合适的解决方案。

我的问题是我已将所有 .js 文件放在页面末尾靠近正文标记的位置，但分析显示**Defer Javascript**并提供了 js 文件列表。

**aspx 文件中的代码如下所示：**

```
<body>  
    <script type="text/javascript" src="js/default.js"></script>

    <script type="text/javascript" src="js/jquery.js"></script>

    <!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-35073844-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

    </script>

</body> 
```

我也尝试了**defer 属性**，但分数没有变化。

我还尝试了 javascript**代码**，如下所示：

```
<script type="text/javascript">

 // Add a script element as a child of the body
 function downloadJSAtOnload() {
 var element = document.createElement("script");
 element.src = "js/jquery.prettyPhoto.js";
 document.body.appendChild(element);
 }

 // Check for browser support of event handling capability
 if (window.addEventListener)
 window.addEventListener("load", downloadJSAtOnload, false);
 else if (window.attachEvent)
 window.attachEvent("onload", downloadJSAtOnload);
 else window.onload = downloadJSAtOnload;

</script> 
```

但仍然没有任何变化。

我可以获得一些关于延迟 javascript 的链接以彻底理解它吗？

我对javascript没有太多经验。

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:36:30.313

您没有提及您测试过的浏览器，因为历史上并非所有浏览器都支持 defer，但现在支持要好得多（[http://caniuse.com/script-defer](http://caniuse.com/script-defer)）

Aarron Peters 写了一篇关于推迟 JS 直到 onload 被解雇的好帖子[http://www.aaronpeters.nl/blog/why-loading-third-party-scripts-async-is-not-good-enough](http://www.aaronpeters.nl/blog/why-loading-third-party-scripts-async-is-not-good-enough)

他的代码基本上是这样的：

```
<script>
(function(w, d, s) {
  function go(){
    var js, fjs = d.getElementsByTagName(s)[0], load = function(url, id) {
    if (d.getElementById(id)) {return;}
       js = d.createElement(s); js.src = url; js.id = id;
       fjs.parentNode.insertBefore(js, fjs);
    };
    load('//connect.facebook.net/en_US/all.js#appId=272697932759946&xfbml=1', 'fbjssdk');
    load('https://apis.google.com/js/plusone.js', 'gplus1js');
    load('//platform.twitter.com/widgets.js', 'tweetjs');
  }
  if (w.addEventListener) { w.addEventListener("load", go, false); }
  else if (w.attachEvent) { w.attachEvent("onload",go); }
}(window, document, 'script'));
</script> 
```

就我个人而言，我更喜欢一种以声明方式指定元素被推迟到的点的方式，例如`defer="onload"`，但这会带来一些问题。

# linq - IEnumerable 添加项目？

> ID：14896078
> 
> 赞同：1
> 
> 时间：2013-02-15T13:43:01.893
> 
> 标签：linq, ienumerable, add

模型

```
public class ChartData
{
    public IEnumerable<Series> Series { get; set; }
    public string[] Categories { get; set; }
}

public class Series
{
    // there is another types
} 
```

我有两个数据作为`ChartData`类型

```
// I debugged the following, data is like my expected.
chartData = HighchartsManager.GetBranchsMeterReadingsChartData(); 
chartDataCustomerAvg = HighchartsManager.GetCustomerAvgChartData(); 
```

我尝试连接这两个结构的系列，如下所示

```
// chartData.Series.Count > 3
// chartData.Series.Count > 2
// I want chartData.Series > 5 (3+2), after following line
chartData.Series.Concat(chartDataCustomerAvg.Series); 
```

但是没有变过来`chartData.Series`。如何添加`IEnumerable`到另一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T13:47:25.163

> 如何将 IEnumerable 添加到另一个？

一般来说，你不能。`IEnumerable<T>`是一个只读接口——添加它并不总是有意义的。

您可以创建一个连接两个序列的*新*序列，这是您的代码当前所做的 - 但它会忽略返回值。所以你可以写：

```
var bigSeries = chartData.Series.Concat(chartDataCustomerAvg.Series); 
```

但这不会改变`chartData.Series`自己。（目前尚不清楚您是否真的想这样做。）

# field - Drupal：向我的自定义内容类型添加分类词汇字段

> ID：14896081
> 
> 赞同：0
> 
> 时间：2013-02-15T13:43:10.377
> 
> 标签：field, taxonomy, vocabulary

如何将分类词汇字段添加到我的自定义内容类型到我的模块？

我的目标是当我创建一个新内容（当然是我的自定义内容类型）时，让我可以选择我想在词汇表中引用的术语

谢谢你能给我的所有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:58:19.657

这听起来很常见的分类法。你见过这个吗？[http://www.drupalgardens.com/documentation/taxonomy/content](http://www.drupalgardens.com/documentation/taxonomy/content)

# c# - ToString() 数字格式

> ID：14896083
> 
> 赞同：0
> 
> 时间：2013-02-15T13:43:13.450
> 
> 标签：c#, winforms

我有一个 0.000013 的双精度值，并且希望以 0.000013 的形式输出到文本，但不想指定固定精度。.ToString("F") 不起作用，因为它给出 0.00。有谁知道格式化数字的正确说明符，理想情况下限制为 6 dp，但我希望像 0.123 这样的值输出为 0.123 而不是 0.123000？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T13:44:35.493

听起来您可能想要：

```
x.ToString("0.######") 
```

有关详细信息，请参阅MSDN 中的[“自定义数字格式字符串”](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)。

# c# - 将 CSV 文件导入我的 datagridview

> ID：14896085
> 
> 赞同：3
> 
> 时间：2013-02-15T13:43:26.143
> 
> 标签：c#, winforms, csv, datagridview

我正在做一个项目，我必须导入一个 CSV 文件，并在 DataGridView 中显示结果。我正在努力将我的数据字段显示到我的 datagridview 中，我希望能够一次添加每一行，以便正确解析它们。到目前为止，这是我的代码。

```
 csv.MissingFieldAction = MissingFieldAction.ReplaceByNull;
   int fieldCount = csv.FieldCount;
   string[] headers = csv.GetFieldHeaders();
   fieldCount = fieldCount - 1;

   //TO DO: Reading Header Information 

   for (int i = 0; i <= fieldCount; i++)
   {
       DataGridViewTextBoxColumn headerRow = new DataGridViewTextBoxColumn();
       headerRow.Name = headers[i];
       headerRow.HeaderText = headers[i];
       headerRow.Width = 100;
       dgvComplianceImport.Columns.Add(headerRow);
   }

   while (csv.ReadNextRecord())
   {
       //for (int i = 0; i < fieldCount; i++)
       //    string.Format("{0} = {1};",
       //                    headers[i],
       //                    csv[i] == null ? "MISSING" : csv[i]);

       //TO DO: for loop to add each data field row

       DataGridViewRow dgvr = new DataGridViewRow();
       for (int fieldCount = 0; fieldCount <= csv.FieldCount; fieldCount++)
       {
           string field = csv[fieldCount];

       }
       dgvr.Cells.Add(new DataGridViewCell());
       dgvComplianceImport.Rows.Add(dgvr);
   }

   dgvComplianceImport.DataSource = csv;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:55:57.727

这是我通常做的：

1.  定义一个类，其中每个属性代表一个 CSV 列
2.  使用`LINQToCSV`（参见[此处](http://www.codeproject.com/Articles/25133/LINQ-to-CSV-library)和[此处](http://linqtocsv.codeplex.com/)）读取 CSV 文件。它已经给了我一个我的课`IEnumerable<T>`在哪里。`T`
3.  像往常一样填充 DataGridView（手动、通过绑定等）

**如何读取 CSV 文件的示例**

假设 CSV 文件具有列`Name, Last Name, Age`

然后，您确实定义了以下类：

```
class Person {
    [CsvColumn(FieldIndex = 0, CanBeNull = false, Name = "Name")]
    public string Name { get; set; }
    [CsvColumn(FieldIndex = 1, CanBeNull = true, Name = "Last Name")]
    public string Last Name { get; set; }
    [CsvColumn(FieldIndex = 2, CanBeNull = true, Name = "Age")]
    public int Age { get; set; }
} 
```

拥有它后，您可以`Person`从 CSV 文件中读取列表，如下所示：

```
public IEnumerable<Person> ReadFromCsv(string csvFile) {
    //Here you set some properties. Check the documentation.
    var csvFileDescription = new CsvFileDescription
    {
        FirstLineHasColumnNames = true,
        SeparatorChar = ',' //Specify the separator character.
    };

    var csvContext = new CsvContext();

    return csvContext.Read<Person>(csvFile, csvFileDescription);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T13:49:59.797

CSV 文件是一个普通的文本文件，只是用逗号分隔。

基本上你想要做的是打开文本文件并阅读每一行并用逗号（“，”）分隔

使用这些链接。他们应该提供帮助。 [http://www.codeproject.com/Articles/16951/Populating-data-from-a-CSV-file-to-a-DataGridView](http://www.codeproject.com/Articles/16951/Populating-data-from-a-CSV-file-to-a-DataGridView)

[http://www.c-sharpcorner.com/uploadfile/ankurmee/import-data-from-text-and-csv-file-to-datagridview-in-net/](http://www.c-sharpcorner.com/uploadfile/ankurmee/import-data-from-text-and-csv-file-to-datagridview-in-net/)

[http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/9efdbbd7-bfd9-4c7f-9198-791a4ca88a44/](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/9efdbbd7-bfd9-4c7f-9198-791a4ca88a44/)

如果您仍然需要一些帮助来编写代码，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-19T07:31:09.290

这是我使用的一个类：

调用 lCsv.ReadCsv("your file path")，该方法返回从 .csv 文件创建的数据表。

文件中的分隔符是“;”，.csv 文件的第一行是标题名称。如果您要更改此内容，请查看 lCsv.ReadCsv 方法

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Text;
using System.Data;

namespace ReadWriteCsv
{
/// <summary>
/// Class to store one CSV row
/// </summary>
public class CsvRow : List<string>
{
    public string LineText { get; set; }
}

/// <summary>
/// Class to read data from a CSV file
/// </summary>
public class CsvFileReader : StreamReader
{
    public CsvFileReader(Stream stream)
        : base(stream)
    {
    }

    public CsvFileReader(string filename)
        : base(filename)
    {
    }

    /// <summary>
    /// Reads a row of data from a CSV file
    /// </summary>
    /// <param name="row"></param>
    /// <returns></returns>
    public bool ReadRow(CsvRow row)
    {
        row.LineText = ReadLine();
        if (String.IsNullOrEmpty(row.LineText))
            return false;

        int pos = 0;
        int rows = 0;

        while (pos < row.LineText.Length)
        {
            string value;

            // Special handling for quoted field
            if (row.LineText[pos] == '"')
            {
                // Skip initial quote
                pos++;

                // Parse quoted value
                int start = pos;
                while (pos < row.LineText.Length)
                {
                    // Test for quote character
                    if (row.LineText[pos] == '"')
                    {
                        // Found one
                        pos++;

                        // If two quotes together, keep one
                        // Otherwise, indicates end of value
                        if (pos >= row.LineText.Length || row.LineText[pos] != '"')
                        {
                            pos--;
                            break;
                        }
                    }
                    pos++;
                }
                value = row.LineText.Substring(start, pos - start);
                value = value.Replace("\"\"", "\"");
            }
            else
            {
                // Parse unquoted value
                int start = pos;
                while (pos < row.LineText.Length /*&& row.LineText[pos] != ','*/)
                    pos++;
                value = row.LineText.Substring(start, pos - start);

            }

            // Add field to list
            if (rows < row.Count)
                row[rows] = value;
            else
                row.Add(value);
            rows++;

            // Eat up to and including next comma
            while (pos < row.LineText.Length /*&& row.LineText[pos] != ','*/)
                pos++;
            if (pos < row.LineText.Length)
                pos++;
        }
        // Delete any unused items
        while (row.Count > rows)
            row.RemoveAt(rows);

        // Return true if any columns read
        return (row.Count > 0);
    }
}

public class lCsv
{
    public static DataTable ReadCsv(string sPath)
    {
        DataTable dtIssues = new DataTable();
        int iRowCount = 0;
        int iColumnCount = 0;
        // Read sample data from CSV file
        using (CsvFileReader reader = new CsvFileReader(sPath))
        {
            CsvRow row = new CsvRow();
            while (reader.ReadRow(row))
            {
                foreach (string fullrow in row)
                {
                    if (iRowCount == 0)
                    {
                        foreach (string sName in fullrow.Split(';'))
                        {
                            dtIssues.Columns.Add(sName);
                            iColumnCount++;
                        }
                        iRowCount++;
                    }
                    else
                    {
                        DataRow drIssue = dtIssues.NewRow();
                        int iAddCount = 0;
                        foreach (string sName in fullrow.Split(';'))
                        {
                            if (iAddCount < iColumnCount)
                            {
                                drIssue[iAddCount] = sName;
                                iAddCount++;
                            }
                        }

                        dtIssues.Rows.Add(drIssue);
                    }
                }
            }
        }

        return dtIssues;
    }
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-23T16:06:41.623

为什么要重新发明轮子？`FileHelpers`是你的朋友。

此处给出了如何将 CSV 导入 DataTable 的示例： [http ://www.filehelpers.net/docs/html/M_FileHelpers_CsvEngine_CsvToDataTable_2.htm](http://www.filehelpers.net/docs/html/M_FileHelpers_CsvEngine_CsvToDataTable_2.htm)

相关类 ( ) 下的静态方法签名`CsvEngine`就这么简单：

```
public static DataTable CsvToDataTable(
string filename,
string classname,
char delimiter
) 
```

甜蜜，对吧？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-17T07:43:51.247

简短而有效，希望对您有所帮助

```
 DataGridView my_dgvCSV = new DataGridView();
    DataTable my_dataTable = new DataTable();

    private void Form1_Load(object sender, EventArgs e)
    {
        this.Size = new Size(750, 450);
        my_dgvCSV.Size = new Size(600, 400);
        my_dgvCSV.Location = new Point(5, 5);

        string[] raw_txt = File.ReadAllLines(@"D:\urPath\xyz.csv");
        string[] data_col = null;
        int x = 0;

        foreach (string txt_line in raw_txt)
        {
            data_col = txt_line.Split(';'); 
            // My .csv wanted (';') if it looks weird/wrong use (',')

            if (x == 0)
            {//header
                for (int i = 0; i <= data_col.Count() -1; i++)
                {
                    my_dataTable.Columns.Add(data_col[i]);
                }

                x++;
            }
            else
            {//data
                my_dataTable.Rows.Add(data_col);
            }
         }

         my_dgvCSV.DataSource = my_dataTable;
         this.Controls.Add(my_dgvCSV);
      } 
```

# javascript - 打字稿主干视图事件不会触发

> ID：14896087
> 
> 赞同：3
> 
> 时间：2013-02-15T13:43:32.153
> 
> 标签：javascript, backbone.js, typescript, backbone-views, backbone-events

我正在尝试制作一个简单的视图来测试骨干。我从事件开始，但没有人开火。为什么 ？我已经用主干线制作了其他东西，比如路由等，没有问题。谢谢你的时间。我的主干定义来自[->这个来源<-](https://github.com/borisyankov/DefinitelyTyped)

```
module Views {
export class MenuView extends Backbone.View {
    constructor(viewOptions?: Backbone.ViewOptions) {

        super(viewOptions);
    }

    el = document.body;
    events = {
        "click #Btn-Start": "navigate",
        "click #Btn-Software": "navigate",
        "click #Btn-Anderes": "navigate",
        "click #Btn-Impressum": "navigate"
    };

    initialize() {
        console.log("initialize"); // fire
    }

    render() {
        console.log("render"); // not fire
    }

    navigate() {
        console.log("navigate"); // not fire
    }
} 
```

}

```
<body>
    <div id="Menu">
        <div id="Btn-Start"></div>
        <div id="Btn-Software"></div>
        <div id="Btn-Anderes"></div>
        <div id="Btn-Impressum"></div>
    </div>
<body> 
```

编辑：尝试使用路由（名称：字符串，回调：函数）和路由作为对象的路由。它似乎与函数引用一起工作，但不是路由对象中的字符串。也许有一种方法可以在这样的视图中声明它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-18T13:59:48.490

Backbone 和 typescript 构造函数之间的初始化序列存在问题。构造函数生成为

`_super.call(this, attributes); this.events = { "click a.back": "back", "click a.changeDate": "changeDate" };` >

但是 Backbone 从 _super.call 挂钩事件（和调用初始化）

```
var View = Backbone.View = function(options) {
   this.cid = _.uniqueId('view');
   this._configure(options || {});
   this._ensureElement();
   this.initialize.apply(this, arguments);
   this.delegateEvents();
}; 
```

Backbone 期望 View 对象在调用构造函数时完全初始化，但事实并非如此。

到目前为止我发现的最好的解决方案是使用 Backbone.extend 而不是 class

`export var MyView = Backbone.View.extend`

Codeplex 上的 typescript 项目中的问题 1098

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-18T22:13:00.467

所有答案都不是正确答案。

你需要使用`getter`，因为这个设置为原型，而通常的属性是在调用父 ctor**之后**设置的——太晚了。

将其用于正确的功能

```
export class View extends Backbone.View {
    get events() { 
        return { 
            "click .button" : "myEvent"
        }
    }
} 
```

设置属性`Collection`时也必须这样做。`model`否则 Backbone 将使用默认`Backbone.Model`类型

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T15:07:50.067

使用 ctor 内部的 setElement 函数而不是 el 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T20:04:09.193

尝试这个。基本上，所有的事件和任何初步的实例化/预处理都会`Constructor`代替。

`render()`没有触发的原因`navigate()`是事件没有正确连接。

```
module Views {
    export class MenuView extends Backbone.View {
        constructor(viewOptions?: Backbone.ViewOptions) {
            super(viewOptions);

            // Any initialization goes in the constructor.
            this.el = document.body;
            this.events = {
                 "click #Btn-Start": "navigate",
                 "click #Btn-Software": "navigate",
                 "click #Btn-Anderes": "navigate",
                 "click #Btn-Impressum": "navigate"
            };

            // Precompile and cache the template.
            this.template = _.template($('#template').html());
            console.log("initialize");
       }
       render() {
            console.log("render");
            return this;
       }
       navigate() {
            console.log("navigate");
       }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T14:11:19.143

尝试将您的**el**设置为“#Menu”

```
module Views {
export class MenuView extends Backbone.View {
    constructor(viewOptions?: Backbone.ViewOptions) {

        super(viewOptions);
    }

    el = "#Menu"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-11T23:44:14.197

试试看。

## 文件：requirejsConfig.ts

```
require.config({
    paths: {
        jquery: 'bower_components/jquery/dist/jquery',
        underscore: 'bower_components/underscore/underscore',
        backbone: 'bower_components/backbone/backbone',
        test: 'test'
    }
});

require(['test'], function(Test: any){
    new Test.test; 
}); 
```

## 文件：test.ts

```
/// <reference path="../typings/tsd.d.ts" />

import Backbone = require('backbone');
import $ = require( 'jquery');

export class Test extends Backbone.View<Backbone.Model> {
   events(): Backbone.EventsHash
    { 
        return { 
            'click': 'showResult'            
        }
    }
    constructor( options?: any )
    {
        super(options);
        this.setElement( $( '.test-el' ), true );        
    }    
   protected showResult(): void 
   {
        console.log( 'show result ' );    
   }
} 
```

# r - 如何通过 data.table 中的一列列表键入

> ID：14896088
> 
> 赞同：5
> 
> 时间：2013-02-15T13:43:33.353
> 
> 标签：r, data.table

在[这篇文章之后](https://stackoverflow.com/questions/14894562/how-to-handle-columns-of-lists-in-data-table/14894631#comment20890141_14894631)，我还有一个关于`data.table`.

```
DT = data.table(x=list(c(1,2),c(1,2),c(3,4,5))) 
```

似乎您无法键入一列列表。

```
DT[,y:=.I,by=x]
Erreur dans `[.data.table`(DT, , `:=`(y, .I), by = x) :
  The items in the 'by' or 'keyby' list are length (2,2,3). Each must be same length as rows in x or number of rows returned by i (3). 
```

我以为我可以使用相同长度的列表，但是：

```
DT = data.table(x=list(c(1,2),c(1,2),c(3,5)))
DT[,y:=.I,by=x]
Erreur dans `[.data.table`(DT, , `:=`(y, .I), by = x) :
  The items in the 'by' or 'keyby' list are length (2,2,2). Each must be same length as rows in x or number of rows returned by i (3). 
```

有解决方法吗？如果不是功能请求呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:29:53.640

我会做这样的事情作为一种解决方法：

```
DT[, y := which(DT$x %in% x), by = 1:nrow(DT)] 
```

这总是返回第一个匹配的索引，它将作为组 ID。

你应该这样做：

```
DT[, psnInGrp := seq_along(x), by=y]

#        x y psnInGrp
# 1:   1,2 1        1
# 2:   1,2 1        2
# 3: 3,4,5 3        1 
```

# git - 我想查看 git 按字母顺序排列的所有跟踪文件的列表

> ID：14896089
> 
> 赞同：-2
> 
> 时间：2013-02-15T13:43:36.213
> 
> 标签：git

我想查看 git 按字母顺序排列的所有跟踪文件的列表。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:02:00.990

您可以使用排序命令：

```
git ls-files | sort -d 
```

-d 选项按字母顺序排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:38:00.463

`git ls-files`列出所有跟踪的文件，并且顺序似乎按要求按字母顺序排列。

# iphone - 无法从另一个类中检索 NSArray

> ID：14896090
> 
> 赞同：0
> 
> 时间：2013-02-15T13:43:37.427
> 
> 标签：iphone, ios, objective-c, cocoa-touch, nsarray

我有一个`NSMutableArray`和 2 `NSDictionaries`。我想在一个 VC 中按下按钮时将它们保存到另一个类。问题是，当我稍后检索这些数组时，当我已经对它们进行了更改时，我得到*的不是我正在保存的数组*，而是检索时的实际数组。

可能是什么原因？我尝试使用这种方法创建新的数组和字典，但没有帮助：

```
- (void)recordValues {

    NSMutableArray *betaArray = [NSMutableArray arrayWithArray:labelsArray];
    newMailVC.bakcupLabelsArray = betaArray;
    NSLog(@"LABELS ARRAY COUNT ON SAVE IS %i", labelsArray.count);
    NSMutableDictionary *alphaDictionary = [NSMutableDictionary dictionaryWithDictionary:labelsDictionary];
    newMailVC.backupLabelsDictionary = alphaDictionary;
    NSMutableDictionary *betaDictionary = [NSMutableDictionary dictionaryWithDictionary:senderEmailsDictionary];
    newMailVC.backupEmailsDictionary = betaDictionary;
} 
```

PS我不能使用`NSUserDefaults`，因为`NSArrays`包含`UIViews`并且我想将数组转移到另一个视图，在我按下按钮并使用上述方法保存它们时的状态，而不是视图卸载的状态。谢谢。

**编辑**：我检索这样的值`ViewDidAppear`：

```
- (void)retrieveValues {

    labelsArray = newMailVC.bakcupLabelsArray;
    labelsDictionary = newMailVC.backupLabelsDictionary;
    senderEmailsDictionary = newMailVC.backupEmailsDictionary;

    NSLog(@"LABELS ARRAY COUNT ON RETRIEVE IS %i", labelsArray.count);
} 
```

当我第一次这样做时，一切都很好，但是当我第二次这样做时`NSLog`，我的数组中有 0 个对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:35:04.723

很可能 newMailVC.bakcupLabelsArray 和其他 2 个不是设置为保留或复制其值的属性。arrayWithArray: 和 dictionaryWithDictionary: 创建这些对象的自动发布版本，因此它们可能会被释放，这就是为什么在后续检查中您的计数为 0。

所以你也可以通过使用`[[alloc] initWithArray:]`代替来修复`arrayWithArray:`，这样对象就不会消失。只是不要忘记在设置第二次之前释放。

此外，如果它们是可变数组和字典，并且您将多次执行此操作，为什么每次都重新初始化？为什么不在构造函数中初始化这些对象，然后在执行保存操作时从数组中删除所有对象并添加新对象。即，替换数组/字典的内容而不是重新初始化它，这就是可变版本允许您执行的操作。

“bakcup”也拼错了，仅供参考。

# slideshow - 如何制作既可点击又可自动播放的幻灯片？

> ID：14896091
> 
> 赞同：0
> 
> 时间：2013-02-15T13:43:39.060
> 
> 标签：slideshow

我想做一个自动在图像之间旋转的幻灯片，也可以通过点击来激活。我想要实现的示例可以在 Runescape.com、mmohut.com 和 Yankees.com 上找到，请给我一个 html/用于执行此操作的 css/javascript 代码。谢谢 :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T14:12:33.663

在这里，它说明了如何像您所说的那样制作幻灯片 [http://www.javascriptkit.com/howto/show.shtml](http://www.javascriptkit.com/howto/show.shtml) 如果您希望它在单击时开始，请使用`onclick="myFunction()`并放置幻灯片的代码（正文中的代码）变成这样的功能。分配`onclick`给您想要单击以开始幻灯片放映的任何内容。

```
<script>
function functionname()
{
the code goes in here (not the <script> tags
}
</script> 
```

# autohotkey - AutoHotKey 主/端模拟

> ID：14896092
> 
> 赞同：1
> 
> 时间：2013-02-15T13:43:40.420
> 
> 标签：autohotkey

我正在尝试使用以下键来模拟主页按钮的功能（转到行首）：ctrl+left（如 Mac OS 中的 cmd+left），但由于某种原因，它把我带到了文档的开头。

同样， ctrl+right 将我带到文档的末尾，我希望它走到行尾。那么，我做错了什么？

我的代码：

```
^left::Home
^right::End 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T14:20:17.570

实际上，一旦你使用`Send`，修饰符（`Ctrl`在这种情况下）无论如何都会被忽略，所以`Send,{ctrl up}`是多余的，但也没有伤害。

它可以像这样简化为两个单行：

```
^Left::Send, {Home}
^Right::Send, {End} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T13:50:27.280

发生这种情况是因为当您按下 ctrl+left 时，用户仍然按住 Ctrl，而 Windows 将其解释为 ctrl+home。

添加

```
Send,{ctrl up} 
```

前

```
Send, {Home} 
```

将只发送 Home，因为 Ctrl 将被向上（未按下）片刻。

编写多行热键代码时不要忘记使用正确的样式。

```
hotkey::
    code
    code
return 
```

# c# - 如何向演示者发出复杂模型深处变化的信号？

> ID：14896093
> 
> 赞同：0
> 
> 时间：2013-02-15T13:43:40.547
> 
> 标签：c#, mvp

我们正在使用 MVP，但问题本身不一定是 MVP 特定的。基本上，演示者需要知道模型是否发生变化，以便他们可以处理这些变化并将其反映到他们的视图中。

这将很容易在模型中使用事件，但是模型也包含其他模型对象 - 它们可以由不知道根模型或其任何演示者的演示者+视图修改。

这是此类模型的简化示例：

```
class Document
{
    Header header;
    List<Paragraph> paragraphs;
    Footer footer;
} 
```

假设有两个演示者和视图创建文档的表示；DocumentEditPresenter/-View 和 DocumentPreviewPresenter/-View。

然后会有用于文档组成的模型的模型；HeaderPresenter/-View、ParagraphPresenter/-View 和 FooterPresenter/-View。

DocumentEditPresenter 将在从其视图中获取事件后为段落创建 ParagraphPresenter/-View。然后，此 ParagraphPresenter 将修改段落 - DocumentEditPresenter 和 DocumentPreviewPresenter 都应该获得某种信号来刷新。

我知道一种解决方案是所有模型都包含对其父项和/​​或有关每个可能修改的事件的引用，但它似乎过于复杂并且会使编辑模型容易出错。该模型也应该是可序列化的。

类似于 WPF 的路由事件的东西将是完美的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:00:10.510

如果你的模型很深，听到来自“深”的事件会很痛苦。

I would organise my code with managers, acting like facade, so that any modification in the model,even deep, should go through one of the managers . Then, I would raise an event from the manager, and the presenter would listen to it.

Your event could be just "ModelChanged" to trigger a refresh.

# .net - 如何在多个解决方案之间共享相同的 Resharper 设置，无需人工干预？

> ID：14896096
> 
> 赞同：83
> 
> 时间：2013-02-15T13:43:48.927
> 
> 标签：.net, visual-studio, tfs, resharper, solution

我们的项目被组织成一个主解决方案（包含每个项目）和多个包含相关项目分组的较小解决方案。

我想在每个解决方案中共享相同的 Resharper 设置，确保开发人员不需要在 Resharper 中导入配置文件或为此手动执行任何操作。我们使用的版本是最新版本之一，7.0.1。在 TFS 中签入的 DotSettings 文件在单个解决方案上效果很好，但是为 20-30 个解决方案复制相同的文件是不行的。

有没有办法与整个团队中的每个项目/解决方案共享相同的配置，而无需开发人员明确配置？理想情况下，应该可以为每个解决方案更改 .DotSettings 文件的路径，以便在编辑单个 .DotSettings 文件时，它会自动影响团队中的每个解决方案。

**更新：**

我对此进行了一些搜索并尝试了 2 种不同的方法，但它们都没有 100% 有效：

*   使用 mklink 工具的[硬](http://en.wikipedia.org/wiki/Hard_link)[链接](http://technet.microsoft.com/en-us/library/cc753194%28v=ws.10%29.aspx)在本地完美运行，但 TFS 不支持它们
*   普通的快捷方式也是一个合理的解决方案，但 Resharper 不阅读它们

我在这里没有选择。

**更新 2：**

Daniel Hilgarth 提出的解决方案非常有效，但前提是更新了 Resharper。导致 .DotSettings 文件在每台机器上自动检出和编辑的错误已在 7.1 版本中得到纠正。我在更新软件之前和之后对此进行了测试，现在它可以按预期工作。

可以在此处找到有关该错误的更多信息：

[http://youtrack.jetbrains.com/issue/RSRP-288235](http://youtrack.jetbrains.com/issue/RSRP-288235)

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-02-15T14:25:37.643

Resharper 支持选项分层。

你会像这样使用它：

1.  拥有一个包含所有设置的 DotSettings 文件。
2.  对于每个解决方案，执行以下步骤：
    1.  ReSharper -> 管理选项
    2.  右键单击“解决方案'您的解决方案'团队共享”
    3.  选择添加图层 -> 打开设置文件
    4.  选择中央 DotSettings 文件

这将为每个解决方案创建一个 DotSettings 文件。您需要将这些与中央 DotSettings 文件一起检入 TFS。
重要提示：解决方案的 DotSettings 文件仅包含指向中央文件的链接，它们不会复制设置。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-07-05T09:35:22.270

这个问题很老，但是如果有人仍在寻找共享团队设置的方法：

R# 的所有设置[都可以导出并打包为 NuGet 包](http://asizikov.github.io/2015/07/05/sharing-resharper-settings/)，并作为常规 ReSharper 扩展分发。

这为您提供了灵活性：您可以为不同的团队共享不同的设置，ReSharper 将负责检测新版本并通知开发人员。好吧，基本上你可以在使用 NuGet 时获得所有好处。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-15T13:58:26.453

**在 Resharper 2015**

转到`Resharper`-> `Options`-> `Manage`（图1）-> `Options`-> `Import and Export`（图2）->`from file....`

[![在此处输入图像描述](../Images/825cd8ac10a20ba4de39506a5692432c.png)](https://i.stack.imgur.com/8TpM6.png)

[![在此处输入图像描述](../Images/f3e95f0091d1427c8da23cac1a95a705.png)](https://i.stack.imgur.com/Kw7WM.png)

如果你要为你的团队导入它，你可以`Solution settings`然后而不是`Import and Export`go `Options`to `Copy Settings to`-> `team-shared`。

[![在此处输入图像描述](../Images/c6748f4ecb2a9cb38ed0c918b85dc377.png)](https://i.stack.imgur.com/IcEiu.png)

希望这可以节省您一些时间。

# eclipse - Eclipse Juno 4.2.1 IDE 平台所需的已知问题列表

> ID：14896097
> 
> 赞同：0
> 
> 时间：2013-02-15T13:43:50.373
> 
> 标签：eclipse

我在哪里可以获得 Eclipse Juno 4.2.1 IDE 平台的完整发行说明？更具体地说，我正在寻找已知问题的列表。

我试过使用 Bugzilla 报告界面，但没有得到我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:59:34.047

在 Bugzilla 上[查看 Eclipse 4.2 SR1](https://bugs.eclipse.org/bugs/buglist.cgi?bug_file_loc_type=allwordssubstr&bug_status=RESOLVED&bug_status=VERIFIED&bug_status=CLOSED&classification=Eclipse&classification=RT&columnlist=short_desc&keywords_type=allwords&long_desc_type=allwordssubstr&product=Equinox&product=JDT&product=PDE&product=Platform&query_format=advanced&remaction=&resolution=FIXED&short_desc=&short_desc_type=allwordssubstr&status_whiteboard=&status_whiteboard_type=allwordssubstr&target_milestone=4.2.1&type0-0-0=noop&value0-0-0=%7C&order=bug_id&query_based_on=)的目标里程碑。我希望这可以帮助你。

# html - 是否可以创建具有半径的轮廓边框？

> ID：14896099
> 
> 赞同：28
> 
> 时间：2013-02-15T13:43:51.920
> 
> 标签：html, css, outline

我知道您可以使用 CSS3 添加轮廓边框。

```
outline: 10px solid red; 
```

现在我想知道如何向该轮廓边框添加半径。

我试过这个，但不起作用：

```
.radius {
    padding: 20px 60px;
    text-transform: capitalize;

    -moz-outline: 10;
    outline: 10px solid red;

    -webkit-border-radius: 40px;
    -moz-border-radius: 40px;
    border-radius: 40px;    
} 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-15T13:57:06.967

尝试使用[CSS-Tricks 的无限边框技术](http://css-tricks.com/snippets/css/multiple-borders/)并应用`border-radius`.

此方法将需要边框`box-shadow`而不是轮廓。

![具有无限圆形边框的狗！](../Images/5218b624392806ce1d49a99b788916b0.png)

```
img {
    border-radius: 4px;
    /* #1 */
    border: 5px solid hsl(0, 0%, 40%);

    /* #2 */
    padding: 5px;
    background: hsl(0, 0%, 20%);

    /* #3 
    outline: 5px solid hsl(0, 0%, 60%); */

    /* #4 AND INFINITY!!! (CSS3 only) */
    box-shadow:
        0 0 0 10px red,
        0 0 0 15px orange,
        0 0 0 20px yellow,
        0 0 0 25px green,
        0 0 0 30px blue;

    /* If you could do pseudo elements 
       you could get a few more... */

    /* Also, HSL is awesome but don't use it if
       you need super old browser support */
}

body { padding: 50px; text-align: center; }
```

```
<img src="https://www.randomlists.com/img/animals/chipmunk.jpg">
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-02-15T14:18:54.520

[Firefox 有一个属性`-moz-outline-radius`](https://developer.mozilla.org/en-US/docs/CSS/-moz-outline-radius)，但是在 WebKit 中实现类似功能的请求被[关闭为 WONTFIX](http://code.google.com/p/chromium/issues/detail?id=81556)。未来 的 计划 是[使 轮廓 遵循 边界](https://bugzilla.mozilla.org/show_bug.cgi?id=593717).

我意识到这并没有多大帮助，但您的问题的答案是：目前，否（不是跨浏览器的方式）。同时，您应该使用另一种方法，例如 thekalaban 建议的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-03T15:25:31.627

@MichaelYaeger 与 user1685185 类似的答案，但更新了[JSFiddle](https://jsfiddle.net/o036duLs/1/)，使用`border-radius`and `box-shadow`。这个 JS Fiddle 在圆形按钮（引导程序）周围使用“边框”显示，但同样适用于图像等。

# css - 如何安排一个 在另外两个之下？

> ID：14896100
> 
> 赞同：0
> 
> 时间：2013-02-15T13:43:55.680
> 
> 标签：css, html, alignment

我正在尝试实现一个`<div>`有 3 个 sub`<div>`的（见图） ![在此处输入图像描述](../Images/878aeeba44cb45532045d8e1204e0e9f.png)

div1 里面有一个图像，它的高度用 .css 固定

```
.image_inside_div1
{
height:6em;
}

.div1
{
float:left; /* so it fits to the image */
}

.div2
{
width:50%; /* not a great solution. How do I fill the rest (remaining from div1) of outerdiv's width? */
}

.div3
{
/*This is my primary question. How do implement div3 ?*/
width:100%;
position: ???
bottom: 0 ???
height: ???
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:55:33.170

用另一个 div 包装 div1 和 div2。这就对了。

```
<div>
    <div>
         <div id="div1"></div>
         <div id="div2"></div>
    </div>
    <div id="div3"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T13:58:56.303

看看这个小提琴[http://jsfiddle.net/C6Q46/](http://jsfiddle.net/C6Q46/)。重要信息

```
.outer:after { content: " "; display: block; overflow: hidden; clear: both; height: 0; }
.div2 { overflow: hidden; }
.div3 { width: 100%; clear; both; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T13:46:29.807

```
.div3
{
/*This is my primary question. How do implement div3 ?*/
width:100%;
float: left;
clear:both;
} 
```

# java - 如何从动态更新的 json 中获取最新数据？

> ID：14896102
> 
> 赞同：0
> 
> 时间：2013-02-15T13:43:56.550
> 
> 标签：java, json

有一个聊天内容我要解析。我得到了获取它的 .json 的 url。所以它看起来像：

```
{"messages":[
{"id":"111111","uid":"22222","name":"User","message":"Message","date":"2013-02-15 17:21:54","chatId":"111"},
{"id":"111111","uid":"22222","name":"User","message":"Message","date":"2013-02-15 17:21:54","chatId":"111"},
{"id":"111111","uid":"22222","name":"User","message":"Message","date":"2013-02-15 17:21:54","chatId":"111"}
]} 
```

但是这个 json 有一些限制，我认为大约 20-30 条记录。在开头添加新记录。看起来像：

```
{"messages":[
{"id":"222222","uid":"33333","name":"User","message":"Message","date":"2013-02-15 18:21:59","chatId":"111"},
{"id":"111111","uid":"22222","name":"User","message":"Message","date":"2013-02-15 17:21:54","chatId":"111"},
{"id":"111111","uid":"22222","name":"User","message":"Message","date":"2013-02-15 17:21:55","chatId":"111"}
]}
.......
{"messages":[
{"id":"333333","uid":"44444","name":"User","message":"Message","date":"2013-02-15 19:13:34","chatId":"111"},
{"id":"222222","uid":"33333","name":"User","message":"Message","date":"2013-02-15 18:21:59","chatId":"111"},
{"id":"111111","uid":"22222","name":"User","message":"Message","date":"2013-02-15 17:21:54","chatId":"111"}
]} 
```

我将通过 GSON 或 JSON Java 读取此 json 并将其放置到任何输出中，没关系 :)

但是，关于如何解析动态更新的 json 中的新记录，是否有任何最佳实践？实际上我不知道如何控制它的更新，但是我认为每秒读取一次并将结果输出会导致数据重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:06:21.467

您将需要以某种方式对这些数据进行切片...为了在文件增长时不让 GSON 解析变慢，我认为您需要预处理文件，对一次性数据进行切片。我会做类似的事情：

*   首次执行：完全解析文件并存储第一个id，因为它是最新的数据；
*   第二次执行（和其他）：读取文件并将其存储在 StringBuilder 中。使用获得的字符串，对一次性数据进行切片，因为您之前存储了 id。此 ID 将显示您需要从哪里开始切片。使用新数据，解析 GSON 并再次存储第一个 id。

您可以使用它创建您的代码来执行切片并适应我在下面所说的想法：

```
String data = "{\"messages\":[" +
        "{\"id\":\"333333\",\"uid\":\"44444\",\"name\":\"User\",\"message\":\"Message\",\"date\":\"2013-02-15 19:13:34\",\"chatId\":\"111\"}," +
        "{\"id\":\"222222\",\"uid\":\"33333\",\"name\":\"User\",\"message\":\"Message\",\"date\":\"2013-02-15 18:21:59\",\"chatId\":\"111\"}," +
        "{\"id\":\"111111\",\"uid\":\"22222\",\"name\":\"User\",\"message\":\"Message\",\"date\":\"2013-02-15 17:21:54\",\"chatId\":\"111\"}" +
        "]}";

String lastId = "111111";
int sliceUntil = data.indexOf( "{\"id\":\"" + lastId + "\"" );

// since your disposable data is in the "tail" you your file,
// you just need to get the valid data (the data until the "last id") 
// and add the chars "]" and "}" to close your JSON
String newData = data.substring( 0, sliceUntil ) + "]}";

System.out.println( newData ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:09:08.300

每条消息都有唯一的“日期”，因此您可以`Map<Date, Message>`使用所有不存在的元素创建、更新它。或者，`Map<String, Message>`如果您不需要时间排序，您可以只使用日期字符串

# java - org.hibernate.QueryException：@ManyToOne Criteria 的重复关联路径

> ID：14896110
> 
> 赞同：1
> 
> 时间：2013-02-15T13:44:48.580
> 
> 标签：java, hibernate-mapping, hibernate-criteria, hibernate-annotations, hibernate-4.x

我有两个类，它们之间有关系。这些都是

`com.edfx.adb.persist.Activity`：

```
package com.edfx.adb.persist.entity;

import java.util.List;

import javax.persistence.Column;
import javax.persistence.FetchType;
import javax.persistence.JoinColumn;
import javax.persistence.Lob;
import javax.persistence.ManyToOne;
import javax.persistence.OneToMany;
import javax.persistence.Table;
import javax.persistence.Transient;

import org.hibernate.annotations.Cascade;
import org.hibernate.annotations.CascadeType;
import org.hibernate.annotations.NaturalId;

@javax.persistence.Entity
@Table(name = "ACTIVITY")
public class Activity extends Entity {

    @Transient
    private static final long serialVersionUID = 4741665931936809028L;

    private String activityId;
    private String activityName;
    private String activityDescription;
    private Customer customer;
    private ActivityType activityType;
    private boolean active;
    private Double mandays;
    private Double price;
    private String manager;
    private List<Participation> participations;

    public Activity() {
        super();
    }

    @NaturalId
    @Column(name = "ACTIVITY_ID", nullable = false)
    public String getActivityId() {
        return activityId;
    }

    public void setActivityId(String activityId) {
        this.activityId = activityId;
    }

    @Lob
    @Column(name = "ACTIVITY_NAME", nullable = false)
    public String getActivityName() {
        return activityName;
    }

    public void setActivityName(String activityName) {
        this.activityName = activityName;
    }

    @Lob
    @Column(name = "ACTIVITY_DESCRIPTION", nullable = false)
    public String getActivityDescription() {
        return activityDescription;
    }

    public void setActivityDescription(String activityDescription) {
        this.activityDescription = activityDescription;
    }

    @ManyToOne
    @JoinColumn(name = "CUSTOMER_ID", nullable = false)
    public Customer getCustomer() {
        return customer;
    }

    public void setCustomer(Customer customer) {
        this.customer = customer;
    }

    @ManyToOne
    @JoinColumn(name = "ACTIVITY_TYPE_ID", nullable = false)
    public ActivityType getActivityType() {
        return activityType;
    }

    public void setActivityType(ActivityType activityType) {
        this.activityType = activityType;
    }

    @Column(name = "ACTIVE", nullable = false)
    public boolean isActive() {
        return active;
    }

    public void setActive(boolean active) {
        this.active = active;
    }

    @Column(name = "MANDAYS")
    public Double getMandays() {
        return mandays;
    }

    public void setMandays(Double mandays) {
        this.mandays = mandays;
    }

    @Column(name = "PRICE")
    public Double getPrice() {
        return price;
    }

    public void setPrice(Double price) {
        this.price = price;
    }

    @Column(name = "CUSTOMER_SIDE_MANAGER")
    public String getManager() {
        return manager;
    }

    public void setManager(String manager) {
        this.manager = manager;
    }

    @OneToMany(mappedBy = "activity", fetch = FetchType.LAZY)
    @Cascade(CascadeType.SAVE_UPDATE)
    public List<Participation> getParticipations() {
        return participations;
    }

    public void setParticipations(List<Participation> participations) {
        this.participations = participations;
    }
} 
```

`com.edfx.adb.persist.ActivityType`：

```
package com.edfx.adb.persist.entity;

import javax.persistence.Column;
import javax.persistence.Table;
import javax.persistence.Transient;

@javax.persistence.Entity
@Table(name = "ACTIVITY_TYPE")
public class ActivityType extends Entity {

    @Transient
    private static final long serialVersionUID = 2322745769010162801L;

    private String parent;
    private String name;
    private String activityId;

    public ActivityType() {

    }

    @Column(name = "PARENT", nullable = false)
    public String getParent() {
        return parent;
    }

    public void setParent(String parent) {
        this.parent = parent;
    }

    @Column(name = "NAME", nullable = false)
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @Column(name = "ACTIVITY_ID", nullable = false)
    public String getActivityId() {
        return activityId;
    }

    public void setActivityId(String activityId) {
        this.activityId = activityId;
    }
} 
```

它们都扩展了`com.edfx.adb.persist.entity.Entity`：

```
package com.edfx.adb.persist.entity;

import java.io.Serializable;
import java.util.Date;

import javax.persistence.Column;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.MappedSuperclass;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;
import javax.persistence.Transient;
import javax.persistence.Version;

import org.hibernate.proxy.HibernateProxyHelper;

@MappedSuperclass
public class Entity implements Serializable {

    @Transient
    private static final long serialVersionUID = 7470288121057059283L;

    private Long id;
    private Date createTimestamp;
    private Date lastUpdateTimestamp;
    private Long version;

    public Entity() {
        super();
    }

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "ID", updatable = false, nullable = false, unique = true)
    public Long getId() {
        return id;
    }

    @SuppressWarnings("unused")
    private void setId(Long id) {
        this.id = id;
    }

    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "CREATE_TIMESTAMP")
    public Date getCreateTimestamp() {
        return createTimestamp;
    }

    public void setCreateTimestamp(Date createTimestamp) {
        this.createTimestamp = createTimestamp;
    }

    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "LAST_UPDATE_TIMESTAMP")
    public Date getLastUpdateTimestamp() {
        return lastUpdateTimestamp;
    }

    public void setLastUpdateTimestamp(Date lastUpdateTimestamp) {
        this.lastUpdateTimestamp = lastUpdateTimestamp;
    }

    @Version
    @Column(name = "VERSION")
    public Long getVersion() {
        return version;
    }

    @SuppressWarnings("unused")
    private void setVersion(Long version) {
        this.version = version;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        return prime * result + ((getId() == null) ? super.hashCode() : getId().hashCode());
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj) {
            return true;
        }

        if (obj == null) {
            return false;
        }

        if (!getClass().equals(HibernateProxyHelper.getClassWithoutInitializingProxy(obj))) {
            return false;
        }

        final Entity other = (Entity) obj;

        if (getId() != other.getId()) {
            if (getId() == null) {
                return false;
            }
            if (!getId().equals(other.getId())) {
                return false;
            }
        }

        return true;
    }
} 
```

现在我正在使用 Primefaces 数据表来显示`List<Activity>`我`name`在`ActivityType`. 按关系`ActivityType`关联。`Activity``@ManyToOne`

为了过滤`List<Activity>`我正在使用的：

```
Criteria criteria = getSessionFactory().getCurrentSession().createCriteria(Activity.class);
criteria.createCriteria("activityType").add(Restrictions.like("name", value.toString(), MatchMode.START)); 
```

我正进入（状态：

```
null: org.hibernate.QueryException: duplicate association path: activityType
    at org.hibernate.loader.criteria.CriteriaQueryTranslator.createAssociationPathCriteriaMap(CriteriaQueryTranslator.java:172) [hibernate-core-4.1.8.Final.jar:4.1.8.Final]
    at org.hibernate.loader.criteria.CriteriaQueryTranslator.<init>(CriteriaQueryTranslator.java:111) [hibernate-core-4.1.8.Final.jar:4.1.8.Final]
    at org.hibernate.loader.criteria.CriteriaLoader.<init>(CriteriaLoader.java:84) [hibernate-core-4.1.8.Final.jar:4.1.8.Final]
    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1602) [hibernate-core-4.1.8.Final.jar:4.1.8.Final]
    at org.hibernate.internal.CriteriaImpl.list(CriteriaImpl.java:374) [hibernate-core-4.1.8.Final.jar:4.1.8.Final]
    at com.edfx.adb.dao.ActivityDao.loadActivities(ActivityDao.java:54) [classes:]
    at com.edfx.adb.service.ActivityService.loadActivities(ActivityService.java:101) [classes:] 
```

在第一次加载后，此错误并非总是显示，也不会显示。在过滤表格 5-6 次后，我遇到了这个错误。

我担心映射和标准是否正确。任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T13:53:08.967

我认为您需要提供别名，因此您应该以这种方式更改代码：

```
Criteria criteria = getSessionFactory().getCurrentSession().createCriteria(Activity.class);

criteria.createCriteria("activityType", "at")
   .add(
       Restrictions.like("at.name", value.toString(), MatchMode.START)); 
```

# c# - 在 WPF 中，如何在另一个线程（另一个 Dispatcher）上设置 Window 的 Window Owner

> ID：14896111
> 
> 赞同：5
> 
> 时间：2013-02-15T13:44:53.463
> 
> 标签：c#, wpf, multithreading, dispatcher

我得到以下异常： InvalidOperationException ：调用线程无法访问此对象，因为不同的线程拥有它。

当我尝试设置一个窗口的所有者时，该窗口是在所有者之外的另一个线程上构建的。

我知道我只能从正确的线程更新 UI 对象，但是如果它来自另一个线程，为什么我不能只设置所有者呢？我可以用另一种方式吗？我想让进度窗口成为唯一可以输入条目的窗口。

这是发生错误的代码部分：

```
 public partial class DlgProgress : Window
{
    // ******************************************************************
    private readonly DlgProgressModel _dlgProgressModel;

    // ******************************************************************
    public static DlgProgress CreateProgressBar(Window owner, DlgProgressModel dlgProgressModel)
    {
        DlgProgress dlgProgressWithProgressStatus = null;
        var listDlgProgressWithProgressStatus = new List<DlgProgress>();
        var manualResetEvent = new ManualResetEvent(false);
        var workerThread = new ThreadEx(() => StartDlgProgress(owner, dlgProgressModel, manualResetEvent, listDlgProgressWithProgressStatus));
        workerThread.Thread.SetApartmentState(ApartmentState.STA);
        workerThread.Start();
        manualResetEvent.WaitOne(10000);
        if (listDlgProgressWithProgressStatus.Count > 0)
        {
            dlgProgressWithProgressStatus = listDlgProgressWithProgressStatus[0];
        }

        return dlgProgressWithProgressStatus;
    }

    // ******************************************************************
    private static void StartDlgProgress(Window owner, DlgProgressModel progressModel, ManualResetEvent manualResetEvent, List<DlgProgress> listDlgProgressWithProgressStatus)
    {
        DlgProgress dlgProgress = new DlgProgress(owner, progressModel);
        listDlgProgressWithProgressStatus.Add(dlgProgress);
        dlgProgress.ShowDialog();
        manualResetEvent.Set();
    }

    // ******************************************************************
    private DlgProgress(Window owner, DlgProgressModel dlgProgressModel)
    {
        if (owner == null)
        {
            throw new ArgumentNullException("Owner cannot be null");
        }

        InitializeComponent();
        this.Owner = owner; // Can't another threads owns it exception 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:04:17.447

我主要根据 Hans Passant 的建议做出的。重要的是，我怀疑这段代码只能在 32 位上工作，因为我在 IntPtr 上使用了“ToInt32”。

这是代码：

窗口助手功能：

```
 // ******************************************************************
    private const int GWL_HWNDPARENT = -8; // Owner --> not the parent

    [DllImport("user32.dll")]
    static extern int SetWindowLong(IntPtr hwnd, int index, int newStyle);

    // ******************************************************************
    public static void SetOwnerWindow(Window owned, IntPtr intPtrOwner)
    {
        try
        {
            IntPtr windowHandleOwned = new WindowInteropHelper(owned).Handle;
            if (windowHandleOwned != IntPtr.Zero && intPtrOwner != IntPtr.Zero)
            {
                SetWindowLong(windowHandleOwned, GWL_HWNDPARENT, intPtrOwner.ToInt32());
            }
        }
        catch (Exception ex)
        {
            Debug.Print(ex.Message);
        }
    }

    // ****************************************************************** 
```

调用函数：

```
 using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Threading;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Interop;
using System.Windows.Threading;
using HQ.Util.General.Threading;
using HQ.Util.Unmanaged;

namespace HQ.Wpf.Util.Dialog
{
    /// <summary>
    /// Interaction logic for DlgProgressWithProgressStatus.xaml
    /// </summary>
    public partial class DlgProgress : Window
    {
        // ******************************************************************
        private readonly DlgProgressModel _dlgProgressModel;

        // ******************************************************************
        public static DlgProgress CreateProgressBar(Window owner, DlgProgressModel dlgProgressModel)
        {
            DlgProgress dlgProgressWithProgressStatus = null;
            var listDlgProgressWithProgressStatus = new List<DlgProgress>();
            var resetEvent = new ManualResetEvent(false);

            IntPtr windowHandleOwner = new WindowInteropHelper(owner).Handle;
            dlgProgressModel.Owner = owner;
            dlgProgressModel.IntPtrOwner = windowHandleOwner;

            var workerThread = new ThreadEx(() => StartDlgProgress(dlgProgressModel, resetEvent, listDlgProgressWithProgressStatus));
            workerThread.Thread.SetApartmentState(ApartmentState.STA);
            workerThread.Start();
            resetEvent.WaitOne(10000);
            if (listDlgProgressWithProgressStatus.Count > 0)
            {
                dlgProgressWithProgressStatus = listDlgProgressWithProgressStatus[0];
            }

            return dlgProgressWithProgressStatus;
        }

        // ******************************************************************
        private static void StartDlgProgress(DlgProgressModel progressModel, ManualResetEvent resetEvent, List<DlgProgress> listDlgProgressWithProgressStatus)
        {
            DlgProgress dlgProgress = new DlgProgress(progressModel);
            listDlgProgressWithProgressStatus.Add(dlgProgress);
            resetEvent.Set();
            dlgProgress.ShowDialog();
        }

        // ******************************************************************
        private DlgProgress(DlgProgressModel dlgProgressModel)
        {
            if (dlgProgressModel.Owner == null)
            {
                throw new ArgumentNullException("Owner cannot be null");
            }

            InitializeComponent();
            // this.Owner = owner; // Can't another threads owns it exception

            if (dlgProgressModel == null)
            {
                throw new ArgumentNullException("dlgProgressModel");
            }

            _dlgProgressModel = dlgProgressModel;
            _dlgProgressModel.Dispatcher = this.Dispatcher;
            _dlgProgressModel.PropertyChanged += _dlgProgressModel_PropertyChanged;
            DataContext = _dlgProgressModel;
        }

        // ******************************************************************
        // Should be call as a modal dialog
        private new void Show()
        {
            throw new Exception("Should only be used as modal dialog");
        }

        // ******************************************************************
        void _dlgProgressModel_PropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
        {

            //          if (e.PropertyName == "IsJobCanceled" || e.PropertyName == "IsJobCompleted" || e.PropertyName == "IsProgressCompleted")
            // Faster if we don't check strings and check condition directly 
            {
                if (_dlgProgressModel.HaveConditionToClose())
                {
                    if (_dlgProgressModel.IsJobCanceled == true)
                    {
                        SetDialogResult(false);
                    }
                    else
                    {
                        SetDialogResult(true);
                    }
                }
            }
        }

        // ******************************************************************
        private void SetDialogResult(bool result)
        {
            this._dlgProgressModel.Dispatcher.BeginInvoke(new Action(() =>
                {
                    this.DialogResult = result;
                }), DispatcherPriority.Background);
        }

        // ******************************************************************
        private bool _isFirstTimeLoaded = true;

        private Timer _timer = null;
        // ******************************************************************
        private void WindowLoaded(object sender, RoutedEventArgs e)
        {
            if (_isFirstTimeLoaded)
            {
                WindowHelper.SetOwnerWindow(this, _dlgProgressModel.IntPtrOwner);
                Dispatcher.BeginInvoke(new Action(ExecuteDelayedAfterWindowDisplayed), DispatcherPriority.Background);
                _isFirstTimeLoaded = false;

                if (_dlgProgressModel.FuncGetProgressPercentageValue != null)
                {
                    TimerCallback(null);
                    _timer = new Timer(TimerCallback, null, _dlgProgressModel.MilliSecDelayBetweenCall, _dlgProgressModel.MilliSecDelayBetweenCall);
                }
            }
        }

        // ******************************************************************
        private void TimerCallback(Object state)
        {
            Dispatcher.BeginInvoke(new Action(() =>
                {
                    _dlgProgressModel.ValueCurrent = _dlgProgressModel.FuncGetProgressPercentageValue();
                }));
        }

        // ******************************************************************
        private void ExecuteDelayedAfterWindowDisplayed()
        {
            if (_dlgProgressModel._actionStarted == false)
            {
                _dlgProgressModel._actionStarted = true;
                Task.Factory.StartNew(ExecuteAction);
            }
        }

        // ******************************************************************
        private void ExecuteAction()
        {
            _dlgProgressModel.ExecuteAction();
            _dlgProgressModel._actionTerminated = true;
            _dlgProgressModel.IsJobCompleted = true;
        }

        // ******************************************************************
        private void CmdCancel_Click(object sender, RoutedEventArgs e)
        {
            this._dlgProgressModel.IsJobCanceled = true;
        }

        // ******************************************************************
        private void Window_Closing(object sender, System.ComponentModel.CancelEventArgs e)
        {
            if (! _dlgProgressModel.HaveConditionToClose())
            {
                e.Cancel = true;
                return;
            }

            WindowHelper.SetOwnerWindow(this, 0);

            this.CmdCancel.IsEnabled = false;
            this.CmdCancel.Content = "Canceling...";
            this._dlgProgressModel.Dispose();
        }

        // ******************************************************************
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-25T13:33:57.033

上面的答案是正确的。但我会试着总结一下：

```
 [DllImport("user32.dll")]
     static extern int SetWindowLong(IntPtr hwnd, int index, int newStyle);

  public static void SetOwnerWindowMultithread(IntPtr windowHandleOwned, IntPtr intPtrOwner)
  {
            if (windowHandleOwned != IntPtr.Zero && intPtrOwner != IntPtr.Zero)
            {
                SetWindowLong(windowHandleOwned, GWL_HWNDPARENT, intPtrOwner.ToInt32());
            }
 } 
```

获取 WPF 处理程序的代码：

```
 public static IntPtr GetHandler(Window window)
        {
            var interop = new WindowInteropHelper(window);
            return interop.Handle;
        } 
```

请注意，应在设置所有者调用之前初始化窗口！（可以在**window.Loaded**或**window.SourceInitialized**事件中设置）

```
 var handler = User32.GetHandler(ownerForm);

        var thread = new Thread(() =>
        {
                var window = new DialogHost();
                popupKeyboardForm.Show();
                SetOwnerWindowMultithread(GetHandler(popupKeyboardForm), handler);
                Dispatcher.Run();
        });

        thread.IsBackground = true;
        thread.Start(); 
```

也可以使用 SetParent。比你不需要转换处理程序：

```
[DllImport("user32.dll", SetLastError = true)]
static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndNewParent); 
```

请注意，父级和所有者具有不同的含义。 [Win32窗口所有者与窗口父？](https://stackoverflow.com/questions/507848/win32-window-owner-vs-window-parent)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-21T15:25:28.607

```
internal class WindowHelp
{
    private const int GWL_HWNDPARENT = -8;
    [DllImport("user32.dll")]
    private static extern IntPtr SetWindowLong(IntPtr hwnd, int index, int newStyle);
    public static void SetOwnerWindow(IntPtr hwndOwned, IntPtr intPtrOwner)
    {
        try
        {
            if (hwndOwned != IntPtr.Zero && intPtrOwner != IntPtr.Zero)
            {
                SetWindowLong(hwndOwned, GWL_HWNDPARENT, intPtrOwner.ToInt32());
            }
        }
        catch { }
    }
}
WindowInteropHelper helper = new WindowInteropHelper(owner);
_messageBox.Loaded += (sender, e) =>
{
    IntPtr windowHandleOwned = new WindowInteropHelper(_messageBox).Handle;
    owner.Dispatcher.Invoke(new Action(() =>
    {
        WindowHelp.SetOwnerWindow(windowHandleOwned, helper.Handle);
    }));
}; 
```

这有一个问题是，当应用程序关闭并且拥有的窗口仍然打开时，它会尝试执行可能失败的事情，我的猜测是它正在尝试关闭所有拥有的窗口。

```
System.ComponentModel.Win32Exception
  HResult=0x80004005
  Message=Invalid window handle
  Source=WindowsBase
  StackTrace:
   at MS.Win32.ManagedWndProcTracker.HookUpDefWindowProc(IntPtr hwnd)
   at MS.Win32.ManagedWndProcTracker.OnAppDomainProcessExit()
   at MS.Win32.ManagedWndProcTracker.ManagedWndProcTrackerShutDownListener.OnShutDown(Object target, Object sender, EventArgs e)
   at MS.Internal.ShutDownListener.HandleShutDown(Object sender, EventArgs e) 
```

给它自己的线程的一个缺点是您必须跟踪子窗口并在主窗口关闭时关闭它，然后应用程序到达关闭的后期阶段：

```
private void View_Closing(object sender, CancelEventArgs e)
{
    UIGlobal.SelfThreadedDialogs.ForEach(k =>
    {
        try
        {
            if (k != null && !k.Dispatcher.HasShutdownStarted)
            {
                k.Dispatcher.InvokeShutdown();
                //k.Dispatcher.Invoke(new Action(() => { k.Close(); }));
            }
        }
        catch { }
    });
} 
```

拥有这种“多线程和相关”行为的代价。

有时不需要跟踪和/或所有者的 View_Closing 代码。有时您只需要跟踪以保留对拥有的窗口的引用，以便在应用程序关闭之前不会对它们进行垃圾收集。这取决于。看看什么适合你的情况。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-15T13:52:58.140

这不是设置所有者。如果要从另一个线程操作 WPF 中的控件，则需要创建一个委托并将其传递给控件的调度程序。

```
if(Control.Dispatcher.CheckAccess())
{
    //The control can be accessed without using the dispatcher.
    Control.DoSomething();
}
else{
     //The dispatcher of the control needs to be informed
     MyDelegate md = new MyDelegate( delegate() { Control.DoSomething(); });
     Control.Dispatcher.Invoke(md, null);
} 
```

看到[这个](https://stackoverflow.com/questions/1284017/how-to-access-c-sharp-wpf-control-in-thread-safe-way)帖子。

# android - Android Overlay 不调度事件

> ID：14896115
> 
> 赞同：0
> 
> 时间：2013-02-15T13:45:02.360
> 
> 标签：android, overlay, touch-event

所以我写了一个带有`WindowManager.LayoutParams.TYPE_PHONE`标志的叠加层，一切似乎都可以正常工作，因为我想在屏幕底部的叠加层内对齐元素。我是通过`android:layout_alignParentBottom="true"`. 现在的问题是布局内的每个触摸事件都会发送给我，而我只想要触及我的控件的触摸。我试着打电话 `return super.onTouchEvent(event);` 没有成功。有什么方法可以将触摸事件返回给 Android，以便正确处理它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:49:01.143

通过交互式叠加示例解决了我的问题，如果您遇到相同或类似的问题，该示例可能会对您有所帮助。[http://www.jawsware.mobi/code_OverlayView/](http://www.jawsware.mobi/code_OverlayView/)

# c# - 从网格视图中捕获多个值以传递给存储过程

> ID：14896125
> 
> 赞同：1
> 
> 时间：2013-02-15T13:45:38.710
> 
> 标签：c#, asp.net, gridview, parameter-passing

asp.net 和 C#

在这里，我有来自 gridview 控件的列

当用户单击任一按钮时，我需要将 CaseID、CaseworkerID、EventDate 和 Code 的值传递给存储过程

但是我如何将多个参数传递给我的 onclick 方法？？？？

```
<columns>
<asp:BoundField DataField="CaseID" HeaderText="CaseID" Visible = "False" />
<asp:BoundField DataField="caseworkerID" HeaderText="CwID" Visible = "False" />
<asp:BoundField DataField="CaseWorker" HeaderText="Case Worker" />
<asp:BoundField DataField="EventDate" HeaderText="Event Date" />
<asp:BoundField DataField="Code" HeaderText="Code" />
  <asp:TemplateField HeaderText="ADD">
       <ItemTemplate> 
                    <asp:Button  ID="AddUnit" runat="server" Text=" +1 " onserverclick="AddUnit_Click"/>
        </ItemTemplate> 
   </asp:TemplateField> 

<asp:BoundField DataField="TotalUnits" HeaderText="Total Units" />

  <asp:TemplateField HeaderText="DDT">
       <ItemTemplate> 
          <asp:Button ID="DdtUnit" runat="server" Text=" -1 " onserverclick="DdtUnit_Click"/>
        </ItemTemplate> 
   </asp:TemplateField> 

<asp:BoundField DataField="EventType" HeaderText="Event Type" />
<asp:BoundField DataField="UnitCost" HeaderText="Unit Cost" />
<asp:BoundField DataField="TotalCost" HeaderText="Total Cost"/> 
```

编辑：所以我现在有了这个

```
 <ItemTemplate> 
                <asp:Button  ID="AddUnit" runat="server" Text=" +1 " 
                CommandName="AddUnit" 
                CommandArgument='<%# Eval("CaseID")+ ";" + Eval("caseworkerID")+ ";" + Eval("EventDate")+ ";" + Eval("Code")%>'/>
            </ItemTemplate> 
```

这是一个好的开始

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:09:10.323

首先对网格的所有按钮使用不同的命令名

```
protected void grid_RowCommand(object sender, GridViewCommandEventArgs e)
{
    string city="";
    if (e.CommandName == "btnname")
    {
        ImageButton imgbtn = (ImageButton)e.CommandSource;
        GridViewRow rows = (GridViewRow)imgbtn.NamingContainer;
        city = grid.Rows[rows.RowIndex].Cells[1].Text;           
    }

} 
```

根据您的要求使用列的单元格ID。并且列 id 从 0 开始。

任何问题问我

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:08:47.113

您几乎想要做的是创建一个由特殊字符分隔的命令参数。处理事件时，从事件 (e) 中提取命令参数并将其拆分。（正如 utkarshs 的回答所示，使用 gridviews rowcommand 事件，而不是 onclick）

如果命令参数数据实际上包含用于分隔符的相同字符，这可能会导致问题。不过只有一个建议（当我们知道像 productId 这样的东西不包含管道 (|) 时，我们有时会这样做）

编辑：所以你的按钮应该是......

```
 <asp:button CommandArgument='<%# Eval("someValue") + " | " 
              + Eval("someOtherValue") + " | " %>'  
             CommandName="whatever" runat="server" text="FOO BAR" /> 
```

然后在您的网格ID所在的代码中`gridId`

```
protected void gridId_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "btnname")
    {
        string[] differentValues = e.CommandArgument.ToString().Split("|");           
    }
} 
```

# jquery - Flexslider ProgressBar 暂停问题

> ID：14896128
> 
> 赞同：1
> 
> 时间：2013-02-15T13:45:45.557
> 
> 标签：jquery, flexslider

我在使用 Flexslider 使 ProgressBar 在悬停时暂停并在鼠标悬停时播放时遇到问题，当我暂停 Flexslider 时，Flexslider 图像和 ProgressBar 之间总是会有延迟，我怎样才能使 ProgressBar 和 Flexslider 图像同时加载。

这是代码：http: [//jsfiddle.net/rhPWJ/39/](http://jsfiddle.net/rhPWJ/39/)

```
jQuery(window).load(function() {
 jQuery('.flexslider').flexslider({
 animation: "fade",
 controlNav: false,
 useCSS: false,
 controlNav: false,
 directionNav: false,
 pauseOnHover: true,
 smoothHeight: true,

 animationSpeed: 1800,

 after: function(slider) {
 jQuery('.slide-caption').show("slide", { direction: "down" }, 700);
 },

 before: function(slider) {
 jQuery('.slide-caption').hide("fade", 1800); 
 },

 });
 });

 jQuery(window).load(function() {
 function run() {
 jQuery('.progress_bar').animate({'width': "50%"}, 4000, run).width(0);
 }
 run();

  jQuery('.flexslider').hover(
         function() {
         jQuery('.flexslider').flexslider('pause');
         jQuery('.progress_bar').pause();
         });

         jQuery('.flexslider').mouseout(
         function() {
         jQuery('.flexslider').flexslider('play');
         jQuery('.progress_bar').resume();
         });
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:17:32.610

我终于让它工作了，代码：http: [//jsfiddle.net/rhPWJ/92/](http://jsfiddle.net/rhPWJ/92/)

```
 jQuery(window).load(function() {
    jQuery('.flexslider').flexslider({

          animation: "fade",
          easing: "jswing",
          controlNav: false,
          useCSS: false,
          pauseOnAction: false,
          pauseOnHover: true,
          smoothHeight: true,
          controlNav: false,
          directionNav: false,
          slideshowSpeed: 5000,
          animationSpeed: 1800,

          // animate caption
          after: function(slider) { 
          jQuery('.slide-caption').show("slide", { direction: "down"}, 700);
          },

          before: function(slider) {  
          jQuery('.slide-caption').hide("fade", 1800);
          },

          // image loader
          start: function(slider) {
          slider.removeClass('loading');
          }
          });

          jQuery('.slide-caption').show("slide", { direction: "down"}, 700);

          function run() {
          jQuery('.progress_bar').animate({'width': "300px"}, 5000, run).width(0);
          }
          run();

         jQuery('.flexslider').hover(
         function() {
         jQuery('.progress_bar').pause();
         });

         jQuery('.flexslider').mouseout(
         function() {
         jQuery('.progress_bar').animate({'width': "300px"}, 5000, run).width(0);
         });
         }); 
```

# git - 尝试在 linux 上设置 Git 服务器

> ID：14896134
> 
> 赞同：0
> 
> 时间：2013-02-15T13:46:08.460
> 
> 标签：git

我正在尝试在 linux 上设置一个简单的 git 服务器，并使用以下命令使其工作

```
git push ssh://git@REGAN/~/mirror.git master
git clone ssh://git@REGAN/~/mirror.git mirror 
```

但我试图找出为什么我必须有**“ssh://”**

如果没有 ssh，我该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:21:44.427

在 Ubuntu/Debian 上：

```
apt-get install git-daemon-run 
```

然后阅读文档（非常简短明了）：

```
less /usr/share/doc/git-daemon-run/README.Debian 
```

然后你会想要`.git/git-daemon-export-ok`在你的仓库中创建文件。

更一般地说，使用 ssh 协议会更好，除非您有充分的理由不这样做。git 协议的唯一优势是速度稍快，但考虑到您因选择不使用 ssh 协议而失去安全性，因此速度提升可以忽略不计。使用 git 守护进程，要么没有人有写权限，要么每个人都有匿名写权限。这通常并不理想。

所以，坚持使用 ssh 协议。或者，如果您想正确使用，请使用[gitolite](https://github.com/sitaramc/gitolite)。

进一步有用的阅读[在这里](http://git-scm.com/book/ch4-1.html)。

# routes - Zend 框架 2 中用于连接到 google api 的路由

> ID：14896138
> 
> 赞同：0
> 
> 时间：2013-02-15T13:46:29.600
> 
> 标签：routes, google-api, zend-framework2

我想连接到google api，如果我只是在我的项目之外的.php文件中正常运行它，一切正常，但是如果我想运行用于连接到google api的代码，编写在zend的控制器中框架 2，在所有 require_once 建立良好的情况下，它向我显示了第 27 行的消息
Class 'Auth\Controller\Google_Client' not found in ...\module\Auth\src\Auth\Controller\AuthController.php。

我提到它与不在项目中的文件中编写的代码完全相同。

我想在 Module.php 中更改一些东西，但我不知道是什么，也许不是那样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:08:06.137

Google_Client 看起来不像一个命名空间类，但 PHP 试图将它包含在当前命名空间 Auth\Controller 中。我认为你需要在前面放一个 \，新的 \Google_Client()

# java - 使用 wait() 和 notifyAll() 设置和获取方法

> ID：14896140
> 
> 赞同：0
> 
> 时间：2013-02-15T13:46:29.110
> 
> 标签：java, multithreading, buffer

我不知道为什么我的 get 方法不起作用。它返回“”。

我有 Producer 和 Consumer 类，它们使用这个类和 Buffer 接口，它们只有 set 和 get 方法。生产者读取文件，消费者写入另一个文件。生产者和消费者都使用线程。

请帮我。提前致谢。

```
import java.util.Stack;

public class synchronizedFile implements Buffer {

public Stack<String> StackBuffer = new Stack<String>();

public void set(String value) {

    synchronized (StackBuffer) {
        if (StackBuffer.size() <= 15) {
            StackBuffer.push(value);
            System.out.println(StackBuffer.toString());
            StackBuffer.notifyAll();
            System.out.println("Consumer notify");
        } else {
            try {

                System.out.println("Produser is waitting--------------------------------");
                StackBuffer.wait();
                System.out.println("Consumer tries to write");
                set(value);

            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
}

public String get() throws InterruptedException {

    String Flag = " ";
    synchronized (StackBuffer) {
        if (!StackBuffer.isEmpty()) {

            Flag = StackBuffer.firstElement();
            StackBuffer.remove(StackBuffer.firstElement());
            StackBuffer.notifyAll();
            System.out.println("Producer notify");
            return Flag;
        } else {
            StackBuffer.wait();
            System.out.println("Consumer is waitting --------------------");
            get();

        }

    }

    return Flag;

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:50:50.850

您至少在 get() 方法`Flag = get()`的`else`分支中缺少 a 。

除了考虑使用 BlockingQueue 之外，还有一些实现`java.util.concurrent`可以为您完成并发编程的繁重工作。使用低级构造`wait`并且`notify`容易出错。如果不彻底检查，如果您的实施正确，我会感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T13:54:45.460

您等待并通知两种不同的状态：已满和空。因此，您必须使用两个单独的锁定对象。这已经在不久前[在这里](https://stackoverflow.com/questions/14832526/conditions-vs-objects-wait-notify/)讨论过了。

基本上，如果您不是为了使用`Stack`类或某种分配而实现它，请使用 java.util.concurrent 中的 BlockingQueue。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T13:50:33.350

在这里你`get()`递归调用但丢弃它的结果：

```
StackBuffer.wait();
System.out.println("Consumer is waitting --------------------");
get(); 
```

类似`Flag = get();`或`return get();`更合适的东西。

（另外我不确定是否`synchronized`两次使用doing进入部分`wait`是否有效。也许是，我只是不确定）。

# php - 从另一个模块的模板文件调用自定义模块助手

> ID：14896143
> 
> 赞同：0
> 
> 时间：2013-02-15T13:46:48.313
> 
> 标签：php, magento, module

我创建了一个新模块。该模块与另一个数据库连接。现在我想从另一个模块模板文件中调用帮助程序类，比如说“description.pthml”。我使用了以下代码。

```
$_helper = $this->helper('ForumProdPosts/output'); 
```

但我收到错误“致命错误：在第 546 行的 /home/black/public_html/app/Mage.php 中找不到类 'Mage_ForumProdPosts_Helper_Output'”。

助手类位于 local/MyWebsite/ForumProdPosts/Helper/Output.php 中，具有以下代码。

```
class MyWebsite_ForumProdPosts_Helper_Output extends Mage_Core_Helper_Abstract
{
    /**
     * Constructor
     */
    public function __construct()
    {
        Mage::dispatchEvent('forumprodposts_helper_output_construct', array('helper'=>$this));
    }

    public function getForumPosts(){
        echo "I m here";
            exit;
    }
} 
```

我的模块的 config.xml 也是

```
<?xml version="1.0"?>
<config>
    <modules>
        <MyWebsite_ForumProdPosts>
            <version>0.1.0</version>
        </MyWebsite_ForumProdPosts>
    </modules>
    <frontend>
        <routers>
            <forumprodposts>
                <use>standard</use>
                <args>
                    <module>MyWebsite_ForumProdPosts</module>
                    <frontName>forumprodposts</frontName>
                </args>
            </forumprodposts>
        </routers>
        <layout>
            <updates>
                <forumprodposts>
                    <file>forumprodposts.xml</file>
                </forumprodposts>
            </updates>
        </layout>
    </frontend>
    <global>
        <helpers>
            <forumprodposts>
                <class>MyWebsite_ForumProdPosts_Helper</class>
            </forumprodposts>
        </helpers>
        <resources>
            <forumprodposts_write>
                <connection>
                    <use>phpbb_database</use>
                </connection>
            </forumprodposts_write>
            <forumprodposts_read>
                <connection>
                    <use>phpbb_database</use>
                </connection>
            </forumprodposts_read>
            <forumprodposts_setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </forumprodposts_setup>
            <forumprodposts_database>
                <connection>
                    <host><![CDATA[localhost]]></host>
                    <username><![CDATA[user]]></username>
                    <password><![CDATA[password]]></password>
                    <dbname><![CDATA[forumdb]]></dbname>
                    <model>mysql4</model>
                    <type>pdo_mysql</type>
                    <active>1</active>
                </connection>
            </forumprodposts_database>
        </resources>
    </global>
</config> 
```

在我看来，magento 无法识别我的模块。帮助我做错了什么。

我刚刚意识到我的模块没有出现在管理面板的配置/高级部分。我已经完成了重新索引和清除 cashe，etc/modules 中的 MyWebsite_ForumProdPosts.xml 也有以下代码。

```
<?xml version="1.0"?>

<config>
    <modules>
        <MyWebsite_ForumProdPosts>
            <active>true</active>
            <codePool>local</codePool>
        </MyWebsite_ForumProdPosts>
    </modules>
</config> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:59:03.497

我认为命名约定必须与 config.xml 中定义的名称匹配。所以试试下面给出的代码

```
$_helper = $this->helper('forumprodposts/output');
// all in small letter as defined in your xml file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:04:12.170

`Mage::helper()`方法适用于 config.xml 中的 xml 节点，而不适用于模块的名称。

Magento 启动时，所有的 config.xml 都连接在一个大的 xml 文件中。在此文件中，节点 global/helpers 包括在所有模块中定义的所有帮助程序。辅助方法使用这些节点来加载正确的类：

```
public static function helper($name)
{
    $registryKey = '_helper/' . $name;
    if (!self::registry($registryKey)) {
        $helperClass = self::getConfig()->getHelperClassName($name);
        self::register($registryKey, new $helperClass);
    }
    return self::registry($registryKey);
} 
```

所以在这里，要访问`MyWebsite_ForumProdPosts_Helper_Output`，你必须写：

```
$_helper = $this->helper('forumprodposts/output'); 
```

# jquery - blueimp jQuery-File-Upload 没有 ajax

> ID：14896151
> 
> 赞同：12
> 
> 时间：2013-02-15T13:47:10.523
> 
> 标签：jquery, file-upload, blueimp

我真的很喜欢客户端处理选择文件并具有取消或删除选项的预览。

但是我想用表单上传页面，我不需要使用 ajax。我一直在摆弄所有选项，但无论如何我都找不到要发布以同步选择的文件的形式。

是否可以让 data.files 与表单一起发布？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T22:08:02.353

您可以使用 blueimp jQuery-File-Upload 通过标准表单提交提交文件，方法是将 replaceFileInput 选项设置为 false。

从文档中：

> 默认情况下，在每个输入字段更改事件之后，文件输入字段被替换为克隆。这对于 iframe 传输队列是必需的，并且允许为相同的文件选择触发更改事件，但可以通过将此选项设置为 false 来禁用

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-09-18T11:37:09.497

```
Use config replaceFileInput = false;
jQuery('#add_new_product_form').fileupload({
            // Uncomment the following to send cross-domain cookies:
            //xhrFields: {withCredentials: true},
            fileInput: jQuery('#upload-video'),
            replaceFileInput: false,
            ......
}) 
```

控制器您将获得 $_FILES 来获取视频数据。

# java - 导入 Eclipse IDE 后如何构建和运行 Maven 项目

> ID：14896152
> 
> 赞同：47
> 
> 时间：2013-02-15T13:47:11.357
> 
> 标签：java, eclipse, maven

我正在学习使用 Maven 在 Eclipse 中构建 Java 项目。`HelloWorld`我从
文件夹中的“maven-archetype-quickstart”模板创建了一个 Java 项目`D:/maven_projects`。然后为了将 Maven 项目转换为支持 Eclipse IDE，我导航到项目文件夹并发出命令：
`mvn eclipse:eclipse`和`mvn package`.

然后我在 Eclipse 中导入项目并进行必要的 Eclipse 配置，例如在 Eclipse 类路径中设置 Maven 本地存储库。现在`D:/EclipseWorkspace`文件夹中的项目。我在 Eclipse 打印“helloworld”中成功运行了该项目。

**现在**，如果我想继续开发项目并因此想在 Eclipse 的**pom.xml**中添加新的依赖项，那么当我运行项目时，新的 jar 不会添加到类路径中。

所以我的问题是在将 Maven 项目导入 Eclipse 后，如何在 pom.xml 中添加越来越多的依赖项，然后构建并运行项目？推荐和有效的方法是什么？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-02-15T13:50:37.107

我建议您不要使用 m2eclipse 命令行工具（即`mvn eclipse:eclipse`），而是使用内置的 Maven 支持，称为[m2e](http://eclipse.org/m2e/)。

从 Eclipse 中删除您的项目，然后`mvn eclipse:clean`在您的项目上运行以删除 m2eclipse 项目数据。最后，使用现代版本的 Eclipse，只需执行“导入 > Maven > 现有项目到工作区...”并选择您的 pom.xml。

M2e 将自动管理您的依赖项并根据需要下载它们。它还通过新的“Run as Maven build...”界面支持 Maven 构建。它相当漂亮。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-03-09T19:40:46.530

**1.更新项目**

右键单击您的项目 Maven > 更新项目

**2.构建项目**

再次右键单击您的项目。运行为 > Maven 构建

如果您尚未创建“运行配置”，它将打开一个带有一些自动填充值的新配置。

您可以更改名称。“基本目录”将是您的自动填充值。保持原样。将 maven 命令赋予“目标”字段。

即，用于建筑目的的“全新安装”

点击申请

点击运行。

**3.在tomcat上运行项目**

再次右键单击您的项目。运行方式 > 运行配置。它将为您打开运行配置窗口。

右键单击右侧栏中的“Maven Build”，然后选择“New”。它将为您打开一个空白配置。

根据需要更改名称。对于基本目录字段，您可以使用 3 个按钮（工作区、文件系统、变量）选择值。您还可以从先前创建的运行配置中复制并粘贴自动生成的值。将目标指定为“tomcat:run”。单击应用。点击运行。

如果您想通过快照获得更清晰的想法，请使用以下链接。

[在 Eclipse 中构建和运行 Maven 项目](http://oknow.atwebpages.com/it/maven-with-eclipse/build-run.php)

（我希望这个答案能帮助有人关注问题的主题）

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-01-08T07:36:55.763

在 pom.xml 文件修改后，可以在 Eclipse 中使用 m2e 插件使用“Maven --> Update Project..”来更新依赖项。 ![基于 pom.xml 更改的 Maven 项目更新](../Images/9d57b20455015689db0104647275d857.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-15T13:50:28.620

只需为 Eclipse 安装[m2e](http://eclipse.org/m2e/)插件。然后将在 Eclipse 的 Import 语句中添加一个名为“Import existing maven projects”的新命令。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-04T18:02:47.193

答案 1

1.  在eclipse中右键单击您的项目
2.  转到 Maven -> 更新项目

答案 2

更新 pom.xml 后只需按**Alt+F5 。**这将再次构建您的项目并下载所有 jar 文件

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-15T14:06:39.693

当您在**pom.xml**中添加依赖项时，执行**maven clean**，然后执行**maven build**，它会将 jars 添加到您的项目中。

[您可以在http://mvnrepository.com/](http://mvnrepository.com/)搜索依赖项工件

如果它不添加 jar，它应该会给你错误，这意味着它无法获取 jar，这可能是由于存储库损坏或连接问题。

好吧，有时如果是一两个 jar，最好下载它们并添加到构建路径，但是有很多依赖项使用 maven。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-29T10:52:55.327

1.  右键单击您的项目
2.  转到 Maven>更新项目
3.  选中强制更新快照/发布复选框
4.  点击确定

就这样。您可以在左下角看到构建的进度。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-01T11:48:22.380

运行一次 maven 构建，应该消失了

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-15T23:51:40.517

```
 If you are getting this error :in cucumber Exception
Cucumber Exception: java.lang.ClassNotFoundException: 
cucumber.io.ResourceLoader : 
then add following jar file to your pom.xml
    <dependency>
            <groupId>info.cukes</groupId>
            <artifactId>cucumber-core</artifactId>
            <version>1.1.8</version>
        </dependency> 
```

# python - 如何在 python 请求中使用字典。- 过时的书。地下天气api

> ID：14896155
> 
> 赞同：-2
> 
> 时间：2013-02-15T13:47:19.573
> 
> 标签：python

我为树莓派购买了制作项目书，其中一个脚本是使用 wundergrund api，然后打印诸如 temp 等内容的结果。

代码已更改，我尝试调整变量但总是出现关键错误：/

这是一个[示例 api](http://pastebin.com/NzQL0UXK)

在书中，他提供了 python 中的代码，但它使用的是旧的 api 代码。参见图片

[http://imgur.com/n4kpsxo,DtYoQhJ](http://imgur.com/n4kpsxo,DtYoQhJ)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:20:16.777

使用更漂亮的 json 文档。

```
import urllib2
import json
txt = urllib2.urlopen('http://pastebin.com/raw.php?i=uu6qK6Rg').read()
j  = json.loads(txt)

print j['current_observation']['temp_c'] 
```

给

```
19.1 
```

**编辑**

要了解键下的内容是什么，请执行以下操作。

```
print json.dumps(j['current_observation'], sort_keys=True,  indent=4) 
```

然后你可以慢慢地沿着树向下走，直到你找出你想要的数据的完整路径。

# ios - 找不到 RKObjectLoaderDelegate xCode 4.6 的协议声明

> ID：14896162
> 
> 赞同：0
> 
> 时间：2013-02-15T13:47:55.507
> 
> 标签：ios, objective-c, xcode, restkit

我在实现 iOS 应用程序时遇到了 RestKit 错误。Telling 找不到`RKObjectLoaderDelegate`or的协议声明`RKRequestDelegate`。
如果我添加`#import <RKObjectLoader.h>`它会告诉文件未找到。

我怎么能解决这个问题？有什么遗漏吗？

我正在使用 Restkit 0.20.0，并使用以下指南[https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x导入了 Restkit](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x)

我正在使用未声明的标识符`RKURL`。我正在导入`#import <Restkit\Restkit.h>`每个视图的头文件。

我的班级实现了以下`@interface TrackingMapViewCOntroller : UIViewController <MapViewDelegate, UITextFieldDelegate, RKObjectLoaderDelegate>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:08:08.923

你的类实现了 RKObjectLoaderDelegate？喜欢：@interface RestKitConfiguration：RKObjectManager

如果有帮助，这是 github 上的 wiki 页面： [https ://github.com/RestKit/RestKit/wiki](https://github.com/RestKit/RestKit/wiki)

您可以添加更多详细信息吗？您使用的是哪种 RestKit 版本（0.10.0 / 0.20.0）？你是如何在你的项目中导入 RestKit 的？Git子模块？

**编辑：**

> 0.20.0版本的restkit没有RKURL，现在使用AFNetworking；注意你使用什么样的教程，现在有很多困惑。我遇到过关于旧版本指南的类似错误/错误。
> 
> 阅读此处了解更多信息：[从 v0.10.x 升级到 v0.20.0][1]
> 
> [1]： [https ://github.com/RestKit/RestKit/wiki/Upgrading-from-v0.10.x-to-v0.20.0](https://github.com/RestKit/RestKit/wiki/Upgrading-from-v0.10.x-to-v0.20.0)

# javascript - 将选项附加到选择

> ID：14896165
> 
> 赞同：-1
> 
> 时间：2013-02-15T13:48:00.700
> 
> 标签：javascript, jquery, html, internet-explorer-8

这与[使用 jQuery 向 <select> 添加选项有关？](https://stackoverflow.com/questions/740195/adding-options-to-a-select-using-jquery-javascript)但有不同的关注点

我的问题是我无法将选项元素附加到 IE8 中的选择。在 IE 的开发人员工具中将引擎更改为 IE7 时，它确实可以工作。

它也适用于 FF 和 Chrome。

```
var valT = "some Text";
var charsToIgnore = 2;

var o = new Option(valT.slice(charsToIgnore), valT);
$(o).html(valT.slice(charsToIgnore));
$('#availablePages').append(o); 
```

我尝试的另一种方法：

```
$('<option/>', {value: valT, text: valT}).appendTo("#availablePages"); 
```

`availablePages`是我选择的 id。当客户端接收到页面时，select 不包含任何元素。我的文档类型是`<!DOCTYPE html>`.

我还尝试从我的站点中删除所有其他脚本和 css，以确保没有副作用。

**编辑：\感谢您的投票！**如果提供的解决方案不适用于所有 IE8 版本，这不是我的错。因为我的问题是*什么在所有 IE8 版本中都有效？*从我的角度来看，我不接受对我不起作用的答案是可以理解的。正如您在[使用 jQuery 向 <select> 添加选项中看到的那样？](https://stackoverflow.com/questions/740195/adding-options-to-a-select-using-jquery-javascript)我不是唯一一个对这里的其他回复不起作用的人。使用 Up-/Down-Vote 功能作为您自己情绪的渠道不是好的 Wiki/QA 行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:55:50.060

这应该为您解决问题：

```
$('#availablePages').append(new Option(valT.slice(charsToIgnore), valT)); 
```

（在 IE8 中测试和工作）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T14:55:54.083

什么对我有用

```
 var o = new Option("option text", "value");
  $(o).html("option text");  // Without this line it does not work..
  $("#availablePages").append(o); 
```

我还必须改变什么/应该考虑什么：

*   `display: table;`**不允许**申请。出于某种原因，它破坏了一切。

# javascript - 加载数据，插入后和滑动切换

> ID：14896167
> 
> 赞同：1
> 
> 时间：2013-02-15T13:48:08.137
> 
> 标签：javascript, php, jquery, ajax, accordion

我是 jquery 的新手，想制作一个滑动表。orinal 表有 3 个级别：

```
<ul class="categories">
<li id="category1">1 element</li>  //parentid=0
<li id="category2">2 element</li>  //parentid=0
<ul>
<li id="category3">1 element of element id2</li>  //parentid=2
<ul>
<li id="category4">1 element id3</li>  //parentid=3
</ul>
</li>
</ul>
</li>
</ul> 
```

第一级元素有parentid = 0，id=1++，下一级有嵌套的parentid，并且有自己的id等等。

页面加载只有 1 级， parentid = 0。

```
<ul class="categories">
<li id="category1">1 element</li>  //parentid=0
<li id="category2">2 element</li>  //parentid=0
</ul> 
```

然后我要点击 li，取 id ID - go to file，执行 mysql，获取变量中的新表，将其带回并在 LI 下滑动切换。

**php端**

```
if(isset($_POST['subcategory'])){
    $subcategory = str_replace('category', '', $_POST['subcategory']);  
    echo build_category_tree($subcategory); // builds the UL tree
} 
```

这会返回我的 ID，我需要返回列表并切换它。

现在新的 UL 已连接，但我的 jquery 无法使用它，用下面的脚本更新了脚本，但仍然不能。

**更新的jQuery**

```
 $(".tablecategoryname").on('click', function(){
    var $a = $(this).closest('li').attr('id');
    var $c = $(this).closest('li');

    $.ajax({
       type: "POST",
       url: "functions.php",
       data: {subcategory:$a},
       cache: false,
       success: function(data)
       {
            $(data).hide().insertAfter($c).slideDown(400);
       }
     });    
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:58:45.657

ID 不应仅包含数字（或以数字开头），您可能应该使用`#a1`或类似的东西。在 data 参数中，您正在发送一个对象，而等号并没有真正起作用。

```
$(".table li").on('click', function(){
    var self = this;
    $.ajax({
       type: "POST",
       url: "functions.php",
       data: {id : self.id},
       cache: false
    }).done(function(data) {
        //guessing you're returning valid HTML
        $(data).hide().insertAfter(self).slideDown(400);
    });
}); 
```

**编辑：**

您的 build_category_tree() 函数需要返回 HTML，以便您可以将其回显到 ajax 请求：

```
if(isset($_POST['subcategory'])){
    echo $subcategory = str_replace('category', '', $_POST['subcategory']); 
    $ULtree = build_category_tree($subcategory); // builds the UL tree
    echo $ULtree; //echo back to Ajax
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:09:23.917

你应该在你的主 ul 中放一个 id 来捕捉他的父母，然后他们在主 ul 中切换列表。

$("ul.umenu > li).click(function (e) {

```
 e.preventDefault();

    var element = $(this);

    if (element.parent().find("ul").is(":visible")) {
    } else {

        $("ul.umain> li > ul").slideUp();

        element.parent().find("ul").slideToggle("fast");

    }

}); 
```

# javascript - AngularJS $http.put PUT 方法不发送数据

> ID：14896169
> 
> 赞同：1
> 
> 时间：2013-02-15T13:48:13.430
> 
> 标签：javascript, rest, angularjs, put, http-method

我正在从运行良好的 jquery $.ajax 切换到使用 AngularJS $http.put 来访问 restful API。

我可以进行 API 调用，但未发送 PUT 数据 - 所以我的 API 看到一个带有空数据对象的 PUT 请求，它应该包含一个 JSON 字符串 ->`data.values = 'a json structure'`

```
$http.put(
    $rootScope.api_url,
        {
            values: jsonifiedValues
        },
        {
        headers: {
            apihash: sha256hash
        }
    }).success(function(data,status,headers,config){
        // handle success
}).error(function(data,status,headers,config) {
        // handle failure
}); 
```

我以前没有使用过 AngularJS 的 $http，但是当我在我的 PHP api 中转储数据时，它只是空的。这就是我从 PHP 中的请求中提取它的方式：

```
parse_str(file_get_contents('php://input'), $put_vars);  
$arr_req_data = $put_vars['values']; 
```

在我的 API 中，如果从请求发送的 apihash 与基于 PUT 值构建的 sha256 哈希不匹配，则会失败。

这在 JQuery 中工作，现在我已经切换到 $http 失败了。我不确定为什么 PUT 数据似乎是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:27:49.783

from 的返回值`file_get_contents('php://input')`将是一个 JSON 字符串（假设所有内容都已发送），因此[`parse_str`](http://php.net/manual/function.parse-str.php)不是处理该数据的正确函数。
而是使用[`json_decode`](http://php.net/manual/function.json-decode.php).

也不需要发送*jsonified 值*，它只会让事情变得更复杂，因为你必须使用`json_decode`两次。

# sql-server - 错误输出文本文件中的日期格式已更改

> ID：14896171
> 
> 赞同：0
> 
> 时间：2013-02-15T13:48:18.883
> 
> 标签：sql-server, sql-server-2005, ssis, ssis-2005

我有一个文件要使用 SSIS 2005 加载到 SQL Server 2005 中。

该文件有一个日期字段。这些值就像`'12/01/2010 16:38:51'`.

文件中的某些行是错误的，将被重定向到文本文件。`2010-01-12 16:38:51`但在文本文件中，日期将由SSIS更改。

无论如何只是将错误行重定向到文本文件而不进行任何修改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:10:52.050

我发现如果平面文件源的高级编辑器的平面文件错误输出中的输出列是“平面文件源错误输出列”（并且列的类型默认应该是文本流[DT_TEXT]）那么我的问题是解决了。这样，错误输出的平面文件管理器将自动将输出列设置为“平面文件源错误输出列”和“文本流 [DT_TEXT]”类型。这正是我想要的。SSIS 将整行视为“文本流 [DT_TEXT]”类型的单列，并且只是重定向。这似乎是 SSIS 的默认行为。但是在我的原始包中，我不知何故搞砸了，让输入中的每一列都映射到错误输出中的一列。然后出现了问题，因为 SSIS 正在做日期转换的事情。

无论如何感谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T18:15:54.850

您始终可以使用派生列并使用日期的部分格式化日期时间。

```
(DT_WSTR, 20) (DT_WSTR, 2) RIGHT("0" + (DT_WSTR,2)MONTH(<DATE_IN_QUESTION>),2)  + "/" + 
(DT_WSTR, 2) RIGHT("0" + (DT_WSTR,2)DAY(<DATE_IN_QUESTION>),2) + "/" + 
(DT_WSTR,4)YEAR(<DATE_IN_QUESTION>) + " " + 
(DT_WSTR, 2)DATEPART( "Hh", <DATE_IN_QUESTION>) + ":" +  
(DT_WSTR, 2)DATEPART( "mi", <DATE_IN_QUESTION>) + ":" +  
(DT_WSTR, 2) RIGHT("0" + (DT_WSTR, 2)DATEPART( "ss", <DATE_IN_QUESTION>),2) 
```

# c# - 如何在 C# 中中断 Gurobi 模型优化？

> ID：14896174
> 
> 赞同：2
> 
> 时间：2013-02-15T13:48:34.443
> 
> 标签：c#, .net, mathematical-optimization, gurobi, feasibility

我已经看到可以设置时间限制、节点限制等来停止 Gurobi 模型优化，但这些参数只能在运行优化之前设置。

我想知道如何在不停止调用模型的程序的情况下以编程方式中断优化（我正在用 c# 编程），因为我想尝试使用次优的变量值。

如果它有任何用处，我将在与程序 GUI 不同的线程中运行模型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T07:49:39.170

您可以从回调中调用 Abort。有关示例，请参见示例/c#/callback_cs.cs。

# codeigniter - 在codeigniter url中需要帮助

> ID：14896179
> 
> 赞同：2
> 
> 时间：2013-02-15T13:48:58.763
> 
> 标签：codeigniter, url-rewriting

我在 Codeigniter 中开发了一个网站，但它在每个 url 的末尾附加了一个哈希字符串。

例如：

```
http://my_website.com/#.UR46O6Wj12I 
```

我想在每个 url 之后删除这个哈希字符串或防止它被附加到 url。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:36:58.377

好像你也在 ellislab 上发布了这个问题，所以我通过那里查看了你的页面。问题出在你的javascript，而不是codeigniter。

导致哈希的代码在您的 html 中是这样的：

```
<div class="like_social">
<!-- AddThis Button BEGIN -->
   <div class="addthis_toolbox addthis_default_style ">
      <a class="addthis_button_facebook_like" fb:like:layout="button_count" style="width:75px; overflow:none"></a>
      <a class="addthis_button_tweet" style="width:80px;overflow:none"></a>
      <a class="addthis_button_linkedin_counter" style="width:100px;overflow:none"></a> 
      <a class="addthis_button_google_plusone" g:plusone:annotation="bubble"></a> 
   </div>

   <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
   <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5112601232209e07"></script>
<!-- AddThis Button END -->
</div> 
```

就像 Rick Calder 建议的那样，它来自某种附加组件，在本例中是来自**AddThis**的按钮。可以从他们的[支持文档](http://support.addthis.com/customer/portal/articles/381254-address-bar-sharing-analytics)中找到有关该哈希的更多信息。

如果您仍想保留该按钮，您似乎可以通过转到 AddThis 设置页面的高级选项卡并取消选中**Track address bar** share 来禁用它。

或者，您可以设置`data_track_addressbar`为`false`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T07:05:05.440

请将此代码放在索引文件的末尾

```
<script type="text/javascript">
                var addthis_config = addthis_config||{};
                addthis_config.data_track_addressbar = false;
</script> 
```

如果您使用 tpl ddon 忘记`{literal}this code{/literal}` 这将有帮助

# c# - 为什么网格视图仅在第二次函数调用时更新？

> ID：14896186
> 
> 赞同：0
> 
> 时间：2013-02-15T13:49:23.367
> 
> 标签：c#, events, gridview, ext.net

我在代码隐藏中有以下直接事件处理程序：

```
public void changeBlock(string blockname)
{
  IntraNetEntities ent = new IntraNetEntities();
  var query = from x in ent.Mailings_blocked where x.blocked == blockname select x;
  if (query.Count() == 0)
  {
     Mailings_blocked add = new Mailings_blocked();
     add.blocked = blockname;
     ent.AddToMailings_blocked(add);
  }
  else
  {
     Mailings_blocked del = ent.Mailings_blocked.Single(c => c.blocked == blockname);
     ent.DeleteObject(del);
  }
  ent.SaveChanges();
  updateStore();
  Grid_Business.RefreshView();
  Grid_Mailing.RefreshView();
} 
```

但是当触发事件时，数据库会更新，就像存储一样，但是 RefreshView() 没有正确执行。当单击同一实用程序的任何其他按钮（这是一个 rowCommand）时，视图会更新到之前单击所需的状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:19:16.577

好吧，我没有找到原因，但我发现了如何解决：

```
<DirectEvents>
   <Command OnEvent="GridCommand" Success="GridID.reload(); GridID.render();">
</DirectEvents> 
```

如果响应时间很长，调用 reload 和 render to after 不一定有帮助，因为 after 在成功之前被触发

# vba - 如何使用 VBA 计算重复值

> ID：14896188
> 
> 赞同：0
> 
> 时间：2013-02-15T13:49:24.470
> 
> 标签：vba, excel

我是 VBA 的新手，我试图找出在特定列中重复相同值的次数。

然后我需要将值和重复值的计数粘贴到另一张表的 A 和 B 列中。

我需要计算重复值的次数：

```
PSV_Cust_1
PSV_Cust_1
PSV_Cust_1
PSV_Cust_1
PSV_Cust_1
PSV_Cust_2
PSV_Cust_2
PSV_Cust_2
PSV_Cust_2
PSV_Cust_3
PSV_Cust_3
PSV_Cust_3
PSV_Cust_3
PSV_Cust_4
PSV_Cust_4
PSV_Cust_4
PSV_Cust_5
PSV_Cust_5
PSV_Cust_5
PSV_Cust_5
PSV_Cust_5
PSV_Cust_5
PSV_Cust_5
PSV_Cust_5 
```

结果应该是：

```
Value        Count
PSV_Cust_1   5
PSV_Cust_2   4
PSV_Cust_3   4
PSV_Cust_4   3
PSV_Cust_5   7 
```

请任何人帮助使用 VBA 代码获取输出。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T19:49:31.713

正如其他人所建议的那样，a`Pivot Table`将是完成此任务的最简单方法。就是这样：

> **1）**选择要计算的行
> 
> **2)**`Insert -> PivotTable` 从功能区中选择
> 
> **3)**将出现一个窗口，单击`Ok`以创建您的数据透视表：

![在此处输入图像描述](../Images/0572787295401c150b445e7a310d705a.png)

> **4)**在“数据透视表字段列表：选择要添加到报告的字段：”下的右侧，单击下一个复选框：

![在此处输入图像描述](../Images/b28dd65c92fcf735459e97186e5f9286.png)

> **5）**现在将您刚刚单击的复选框字段向下拖动到“值”列表并松开：

![在此处输入图像描述](../Images/de2a45cd0e3916ac5ca652448cad812a.png)

> **6）**就是这样！您现在将拥有您所要求的：

![在此处输入图像描述](../Images/dca119719bfd6aced19ac2a8ddf892b8.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T14:31:37.773

这个宏会做你需要的：

```
Sub Summarize(rngSource As Range, rngTarget As Range)
    Dim d As New Scripting.Dictionary
    Dim rng As Range
    Dim var As Variant

    For Each rng In rngSource
        If rng <> "" Then
            If d.Exists(rng.Value) Then
                d(rng.Value) = d(rng.Value) + 1
            Else
                d.Add rng.Value, 1
            End If
        End If
    Next rng

    rngTarget = "Value"
    rngTarget.Offset(, 1) = "Count"
    Set rng = rngTarget.Offset(1)
    For Each var In d.Keys
        rng = var
        rng.Offset(, 1) = d(var)
        Set rng = rng.Offset(1)
    Next
End Sub 
```

您需要在 Visual Basic 编辑器（工具->参考）中添加对*Microsoft 脚本库的引用。*你可以这样称呼它：

```
Summarize Sheet1.Range("A1:A24"), Sheet1.Range("C1") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T14:33:16.320

COUNTIF(range, value) 函数将执行您想要的操作 - 它的优点是您可以更轻松地限制要搜索的值（与数据透视表相比）。想象一下您的数据在您命名为“客户”的范围“Sheet1！A1：A25”中（您可以通过选择范围并`customers`在公式栏左侧的地址框中键入来执行此操作）。并且包含“客户 1，客户2...通过客户10”，您只想知道客户1和5出现了多少次，您可以在sheet2上创建以下内容

```
col A        col B
Value        count
customer 1   =COUNTIF(customers, A1)
customer 5   =COUNTIF(customers, A2) 
```

当然，您可以将公式从单元格 B1 中向下拖动 - 您无需再次输入。

这将计算客户，自动更新，......我认为在这个例子中它比数据透视表更容易。

# iphone - UIImage 动画在没有动画推送的视图中不起作用

> ID：14896189
> 
> 赞同：10
> 
> 时间：2013-02-15T13:49:29.053
> 
> 标签：iphone, ios, xamarin.ios

我有一个视图控制器，它的视图包含一个`UIImageView`动画：

```
//AnimationViewController::ViewDidLoad event:
var ctlAnimations = new UIImageView();

ctlAnimations.AnimationImages = list.ToArray();  //<--list contains the UIImages
ctlAnimations.AnimationDuration = 1.0 * list.Count;
ctlAnimations.StartAnimating();

this.Add(ctlAnimations); 
```

这非常有效：当我推入`AnimationViewController`导航堆栈时，它会显示`UIImage`.

但现在我需要显示`AnimationViewController`自定义动画过渡：

```
var transition = CATransition.CreateAnimation ();
transition.Duration = 0.3f;
transition.TimingFunction = CAMediaTimingFunction.FromName(CAMediaTimingFunction.EaseInEaseOut);
transition.Type = CATransition.TransitionFade;
this.View.Layer.AddAnimation (transition, "fade");
//viewController is being pushed with animated=false, because we have a custom animation
base.PushViewController (viewController, false);  
this.View.Layer.RemoveAnimation("fade"); 
```

这**也**很有效，因为新视图使用指定的自定义动画过渡到位。

但是当我**使用动画过渡**`AnimationViewController`推入堆栈时，它会显示但**动画不会运行**。相反，它显示动画的第一帧（列表中的第一个图像），并且不运行它。

 ****因此，关于过渡的某些事情破坏了在新视图控制器中为 a 设置动画的能力`UIImage`，但我根本不知道该怎么做。

**更新**：我注意到如果我点击 NavigationController 的后退按钮，然后离开后退按钮并松开（所以我实际上并没有返回），动画开始播放！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:57:31.240

PushViewController 的工作方式如下：在当前视图控制器上放置下一个视图控制器，您可以说是推入堆栈。从 Apple 文档中可以清楚地看出，您需要使用动画或不使用动画来推送视图控制器。

解决方法：

1.  设置下一个视图控制器的视图 x 位置超出屏幕右侧的框架
2.  假设屏幕宽度为 320，则设置下一个视图的 x 位置为 320。
3.  将下一个视图作为子视图添加到现有视图。
4.  现在做你的自定义动画。

另一种解决方法：（虽然开销更大）

*   以编程方式拍摄当前视图的快照。
*   添加快照图像作为下一个视图控制器的初始视图。
*   现在推送没有动画的视图控制器。（用户仍会看到旧视图）
*   在新视图控制器的 viewDidAppear 中启动您的自定义动画。

[我必须警告你，这种拍摄快照的方法可能会给你在旧设备上带来一点延迟。较新的设备足够快，您不会看到任何滞后]

如果您正在实施任何这些解决方案，请告诉我是否有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:12:14.930

尝试将动画位放入 ViewDidAppear 而不是 ViewDidLoad。此外，尝试使用断点和 NSLogs 来跟踪动画之后发生的情况，从 ViewDidLoad 和 ViewDidAppear 开始。尝试让动画永远重复，这样你就可以看到它是否曾经动画过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T17:57:16.023

我很好奇这里的罪魁祸首是什么。为什么在某些情况下动画无法正确显示？

我的理论是您将动画代码放在 viewWillAppear 而不是 viewDidAppear 中。动画代码在 WILL 或 SHOULD 方法中无法正常运行。

能否请您回复导致问题的原因？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T20:52:25.107

### 怀疑#1

我打赌你的代码没有被调用，因为它在 ViewDidLoad 中。我相信您正在创建一个自定义视图堆栈，这意味着您需要使用 Cocoa 中的[ChildViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/addChildViewController:)方法。

我不熟悉 MonoTouch（我只写纯 CocoaTouch），所以这可能不是 100% 正确

我会安慰你的 viewDidLoad 和 viewDidAppear 方法，并绝对确保它们被调用。我怀疑 viewDidLoad 不是。这导致无法在 UIImageView 上调用 viewDidLoad。

在您的代码中，您可能需要相当于（来自objective-c）：

```
[self addChildViewController:viewController];
// OR?
[base addChildViewController:viewController]; 
```

这告诉'父'viewController Child 已经可见，所以在适当的时候调用viewDidLoad/Appear 和Unload/Disappear 方法。这在 MonoTouch 中可能不存在，或者 Push 方法可能没有完全实现，因此您可能需要做一些 hacky（**坏**）的事情，例如手动调用 viewDidLoad 方法。

### 怀疑#2

也可能是您的“列表”变量（保存图像的变量）为零。如果发生这种情况，动画将不会运行。或者它可能与动画的持续时间有关，尝试将其设置为使其永远重复的任何内容。确保它没有以某种方式运行*真正快速*，而你只是错过了它。

**开始哲学思考**
要么开始学习实际的 Cocoa 开发 :) 不意味着火焰，但绝对意味着认真，你会遇到尝试通过翻译层开发应用程序的问题（自定义语言桥旨在绕过编写基础框架/应用程序/平台的语言）。

Titanium/MonoTouch/PhoneGap 永远不会像真正的 Objective-C 那样产生健壮或高质量的应用程序。除此之外，一旦你学习了 Cocoa，它会改变你写其他东西的方式，我怀疑你会想回去。正如同名精彩网站所说，“可可是我的女朋友”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T05:51:12.760

让我来谈谈IOS中的UI。在 IOS 中，对 UI 元素的访问仅限于单个线程。

除非您正在运行动画，否则单线程将始终是 mainThread。

因此，当您在同一实例中执行多个动画时，您必须使用

1.  开始动画。

2.  setFrame（或）一些改变 UI 元素状态的方法。

3.  对您计划制作动画的所有对象重复第 2 步。

4.  commitAnimations 一次执行所有动画。（使用提交动画确保所有动画都在同一个线程上执行）

所以，我想这就是你的情况。

1.  Viewcontroller 启动了一个动画来将视图控制器推入堆栈。

2.  图像视图在完成第一个动画之前开始另一个动画。

查看链接以获得清晰的想法[link1](https://stackoverflow.com/questions/9679754/tried-to-obtain-the-web-lock-from-a-thread-other-than-the-main-thread-or-the-web)和[link2](https://stackoverflow.com/questions/13372661/iphone-obtaining-the-web-lock-from-a-thread)。

好吧，让我们进入解决方案

**将名为 ctlAnimations 的 ivar 和保留属性添加到您的类**

**在 ViewDidLoad（或）ViewDidAppear**

> ```
> self.ctlAnimations = new UIImageView();
> ctlAnimations.image=(UIImage*)[list.toArray() objectAtIndex:0];
> this.Add(ctlAnimations);
> [self performSelector:@selector(startAnimatingImage) afterDelay:0.1]; 
> ```

**使用以下代码创建一个名为 startAnimatingImage 的私有方法**

> ```
> self.ctlAnimations.AnimationImages = list.ToArray();
> ctlAnimations.AnimationDuration = 1.0 * list.Count;
> ctlAnimations.StartAnimating(); 
> ```

简而言之，我们只是在第一个动画发生时显示了第一张图像，然后我们将动画开始延迟 1 秒，以便它在第一个动画之后执行，然后开始为图像制作动画。

来吧，试一试

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T06:02:29.313

有主线程的概念。所以 UIAnimation 实际上是在主线程上工作的，同时可能会发生另一个任务在同一个主线程上执行的情况。所以这种情况就像 IOS 会根据每个进程的进程 ID 一次给予优先权，对于您需要为相同操作创建后台线程的解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-20T17:49:53.523

好吧，我从来没有弄清楚问题出在哪里，但事实证明存在某种内存泄漏，`UIImage`以至于在某些手机上我的代码崩溃了。

所以我重写了它来手动做动画。现在我设置了一个计时器并保留了一个帧索引变量，每次计时器响起时，我都会自己更改图像。这相当于同一件事，事实证明它解决了这个问题。****

# java - LibGDX - 从桌面可执行 jar 访问资产

> ID：14896191
> 
> 赞同：0
> 
> 时间：2013-02-15T13:49:32.633
> 
> 标签：java, android, eclipse, jar, libgdx

这是我的树结构在 Eclipse 中的样子：

![在此处输入图像描述](../Images/32521476508abaf15b77dfb1c8baf994.png)

例如，这是我加载着色器的方式：

```
// Eclipse side-effect of linking assets, assets are copied in bin folder
if (Gdx.app.getType() == ApplicationType.Android) {
    dirHandle = Gdx.files.internal("data/shaders");
} else {
    // ApplicationType.Desktop ..
    dirHandle = Gdx.files.internal("./bin/data/shaders");
} 
```

当我制作可执行jar时，它看起来像这样：

![在此处输入图像描述](../Images/37e124cc48341e5d863d5ab03c9154ad.png)

我应该如何引用资产，或者有没有办法在 Eclipse 中保留该结构？

# silverlight - C# 或 WinPRT 兼容 cx/c++ 中的 OGG 编码器

> ID：14896201
> 
> 赞同：0
> 
> 时间：2013-02-15T13:50:08.217
> 
> 标签：silverlight, windows-phone-8, windows-phone

我正在尝试修改 libogg 1.3.0（来自 xiph.org）以支持可以在任何 windows phone 8 项目中直接引用的 windows phone 项目。

我已经用windows phone编译成功地编译了它并生成了dll。但是现在这些生成的dll不能直接用windows phone作为参考。

任何人都可以帮助我如何编译这个 libogg 项目，以便它支持 Windows Phone 运行时？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:53:17.250

您将需要创建一个包装您的 C++ 库的 Windows 运行时组件 (C++/CX)。这将定义从 C#/.NET 看到的内容。

# jquery - 验证器 $.validator.methods[method] 未定义

> ID：14896205
> 
> 赞同：14
> 
> 时间：2013-02-15T13:50:25.033
> 
> 标签：jquery, jquery-validate

我有这个我继承的验证器表单代码，我收到了这个错误：

```
$.validator.methods[method] is undefined 
```

在它下面显示

```
'maxlength:$.validator.format("Please enter no more than {0} characters.")' 
```

我读过它可能是拼写错误或被调用的方法不存在。但是看不到它。即使阅读有关远程数据元素的信息也可能会导致问题，但将其取出会中断。

**编辑：**我没有上传任何压缩的js代码和错误点到这一行

```
var result = $.validator.methods[method].call( this, element.value.replace(/\r/g, ""), element, rule.parameters ); 
```

代码：

```
$(document).ready(function(){
    $("#regForm").validate({
        rules:{
            confirmemailaddress: {
                equalTo: "#emailaddress" 
            },
            password: {
                password: "#username"
            },              
            adminpassword: {
                adminpassword: "#adminusrname"
            },              
            retypepassword: {
                equalTo: "#password" 
            },
            retypenewpassword: {
                equalTo: "#newpassword" 
            },
            retypeadminpassword: {
                equalTo: "#adminpassword" 
            },
            interest2: {
                notEqualTo: "#interest"
            },
            retypenewadminpassword: {
                equalTo: "#newadminpassword" 
            },
            emailaddress: {             
                remote: {
                    url: $("#validationUrl").val(),
                    type: "post",
                    data: {
                          emailaddress: function() {
                            return $("#emailaddress").val();
                          },
                          registrationtype: function() {
                            return $("#registrationtype").val();
                          },
                          userctx: function() {
                             return $("#userctx").val();
                          },                                                                                          
                          identityid: function() {
                             return $("#identityid").val();
                          }                                                                                          
                     }
                }
            },
            username: {                
                remote: {
                    url: $("#validationUrl").val(),
                    type: "post",
                    data: {
                          username: function() {
                            return $("#username").val();
                          },                            
                          registrationtype: function() {
                             return $("#registrationtype").val();
                          },
                          userctx: function() {
                             return $("#userctx").val();
                          }                                                            
                     }
                }
            },
            adminusrname: { 
                notEqualTo: "#username",                 
                remote: {
                    url: $("#validationUrl").val(),
                    type: "post",
                    data: {
                          username: function() {
                            return $("#adminusrname").val();
                          },                            
                          registrationtype: function() {
                             return $("#registrationtype").val();
                          },
                          userctx: function() {
                           return $("#userctx").val();
                          }                                                            
                    }
                }                   
            },
            oldauthusername: {                
                remote: {
                    url: $("#validationUrl").val(),
                    type: "post",
                    data: {
                          username: function() {
                            return $("#oldauthusername").val();
                          },                            
                          registrationtype: function() {
                             return $("#registrationtype").val();
                          },
                          userctx: function() {
                             return $("#userctx").val();
                          }                                                            
                     }
                }
            }
        },
         messages: {
             instname:{          
                required: "Please specify the name of your institution"
              },
              firstname:{
                required: "Please specify your First Name",
                minlength: jQuery.format("At least {0} characters required!")
              },
             lastname:{
                required: "Please specify your Name",
                minlength: jQuery.format("At least {0} characters required!")
             },          
             interest:{
                required: "Please choose an interest area"
             },          
             interest2:{
                required: "Please choose a second interest area",
                notEqualTo: "Please choose a different interest area to the above"
             },          
             emailaddress:{
                 required: "We need your Email Address to contact you",
                 email: "Your Email Address must be in the format name@domain.com",
                 remote: jQuery.format("{0} is already in use") 
            },
            confirmemailaddress:{
                 required: "Please confirm your Email Address",
                 email: "Your Email Address must be in the format name@domain.com",
                 equalTo: "Please enter the same Email Address as above" 
            },
            username: {
                required: "Please specify your User Name",
                minlength: jQuery.format("At least {0} characters required!"),
                remote: jQuery.format("{0} is already in use") 
            },
            oldauthusername: {
                required: "Please specify your User Name",
                minlength: jQuery.format("At least {0} characters required!"),
                remote: jQuery.format("{0} is already in use") 
            },
            password: {
                required: "Please specify your Password",
                minlength: jQuery.format("At least {0} characters required!")
            },
            retypepassword: {
                required: "Please retype your Password",
                minlength: jQuery.format("At least {0} characters required!"),
                equalTo: "Enter the same password as above" 
            },
            adminusrname: {
                required: "Please specify your User Name",
                minlength: jQuery.format("At least {0} characters required!"),
                remote: jQuery.format("{0} is already in use"), 
                notEqualTo: "Your username must be different to the institution username" 
            },
            adminpassword: {
                required: "Please specify your Password",
                minlength: jQuery.format("At least {0} characters required!")
            },
            retypeadminpassword: {
                required: "Please retype your Password",
                minlength: jQuery.format("At least {0} characters required!"),
                equalTo: "Enter the same Password as above" 
            },              
            retypenewpassword: {
                required: "Please retype your New Password",
                minlength: jQuery.format("At least {0} characters required!"),
                equalTo: "Enter the same password as above" 
            },
            termsandconditions: {
                required: "Please tick the checkbox to confirm that you have read and agree to the terms and conditions before proceeding."
            }
        }
   });

    $("#ipmarker .asterix").hide();                      
    $("#logincredmarker .asterix").hide();     

    $("#validateContact").click(function() {
        var errors = false;
        var firstError;
        $(".contact .required").each(function() {
            if(!$("#regForm").validate().element(this))
            {
                if (! errors)
                    firstError = $(this);
                errors = true;          
            }
        });
        $(".contact .email").each(function() {
            if(!$("#regForm").validate().element(this))
            {
                if (! errors)
                    firstError = $(this);
                errors = true;          
            }
        });
        if(errors)
        {
            firstError.focus();
            return false;
        }
        else
        {
            $(".contact").hide();
            $(".authentication").show();
            if($('#usrname').is(':checked'))
                $("#usrname").parent("legend").parent("fieldset").find(".regInput").find(".optRequired").addClass("required");  
            $(".regStep2").removeClass("linkDisabled"); 
            scroll(0,0);
            return false;   
        }
    });

    var validateAuthenticationStep = function(){
                    if ( (   $("#oldauthhiddenusername").val()  != null && $("#oldauthhiddenusername").val() != '')
                      || (   $("#oldauthusername").val()        != null && $("#oldauthusername").val()       != '')
                      || (   $("#iprange").val()                != null && $("#iprange").val()               != '')
                      || (   $("#username").val()               != null && $("#username").val()              != '')
                      || (   $("#externalid").val()             != null && $("#externalid").val()            != '')
                       )
        {           
            var errors = false;
            $(".authentication .required, .authentication .checkIP, .authentication .email").each(function() {
                if(!$("#regForm").validate().element(this))
                {
                    if (! errors)
                        firstError = $(this);
                    errors = true;          
                }
            });
            if(errors)
            {
                firstError.focus();
                return false;
            }
            else
                return true;
        }
        else
        {
            $(".authenticationselectionerror").show();
            scroll(0,0);                
        }
    }

    $("#validateAuthentication").click(function() {
        if($("#username").val()!="") {
            $("#password").addClass("required");
            $("#retypepassword").addClass("required");
        }
        else
        {
            $("#password").removeClass("required");
            $("#retypepassword").removeClass("required");
        }

        if (validateAuthenticationStep())
        {
            $(".authentication").hide();
            $(".authenticationAdmin").show();
            $(".regStep3").removeClass("linkDisabled"); 
        }           
        return false;
    });

    $("#validateUpdateAuthentication").click(function() {
        if(validateAuthenticationStep())
            $("#regForm").submit();
        return false;
    });     

}); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-15T18:46:04.750

您收到此错误是因为您正在调用一个不存在的`rule`...

```
rules: {
    //other rules,
    interest2: {
        notEqualTo: "#interest"
    },
} 
```

`notEqualTo`不是此插件中包含的有效规则。您必须删除它或创建一个`notEqualTo`使用[插件内置`addMethod()`方法](http://docs.jquery.com/Plugins/Validation/Validator/addMethod)调用的新规则。像这样的东西...

```
jQuery.validator.addMethod('notEqualTo', function(value, element, param) {
    return value != jQuery(param).val();
}, 'Must not be equal to {0}.' ); 
```

# vb.net - Silverlight - 将网格附加到画布以进行打印后屏幕空白

> ID：14896210
> 
> 赞同：0
> 
> 时间：2013-02-15T13:50:32.740
> 
> 标签：vb.net, silverlight, silverlight-5.0

因此，为了打印我的 Silverlight 网格，我必须将它们从 LayoutRoot 和 Children 中删除。将它们添加到我用于打印的 Canvas 中。（因为它们一次只能附加到一个父元素）。

这很好，但这会使我的屏幕空白，因为网格已从 LayoutRoot 中删除。

所以我尝试从 Canvas 和 Children.Remove 中删除 Children.Add 回 LayoutRoot，但它没有将任何内容添加回屏幕。

我应该如何处理？谢谢。

（使用 Silverlight 5 和 VB.net）。

我的代码：

```
If PageCounter = 1 Then
        Dim PrintSurface As New Canvas
        Dim topPosition1 As Double = e.PageMargins.Top + 10
        Dim topPosition2 As Double = e.PageMargins.Top + 600
        CompChartGrid.SetValue(Canvas.TopProperty, topPosition1)
        AttChartGrid.SetValue(Canvas.TopProperty, topPosition2)
        LayoutRoot.Children.Remove(CompChartGrid)
        PrintSurface.Children.Add(CompChartGrid)
        LayoutRoot.Children.Remove(AttChartGrid)
        PrintSurface.Children.Add(AttChartGrid)
        e.PageVisual = PrintSurface
        PrintSurface.Children.Remove(CompChartGrid)
        PrintSurface.Children.Remove(AttChartGrid)
        LayoutRoot.Children.Add(CompChartGrid)
        LayoutRoot.Children.Add(AttChartGrid)
        PageCounter += 1
        e.HasMorePages = True
        Exit Sub
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:27:28.097

这很可能是由于剪辑造成的。当您在元素上设置 Canvas.Top 属性时，此值将一直存在，直到被替换为止。因此，当您将 CompChartGrid 和 AttChartGrid 添加回 LayoutRoot 网格时，它们分别偏移了 topPosition1 和 topPosition2。

试着打电话

```
CompChartGrid.ClearValue(Canvas.TopProperty) 
```

和

```
AttChartGrid.ClearValue(Canvas.TopProperty) 
```

然后元素应该回到它们开始的地方。

# c# - 如何使用 Excel Dna 设置单元格的值？

> ID：14896215
> 
> 赞同：6
> 
> 时间：2013-02-15T13:50:40.697
> 
> 标签：c#, excel-dna

我的 Excel DNA 插件中有以下代码

在我的 AutoOpen 方法中，我输入了以下代码：

```
ExcelIntegration.RegisterUnhandledExceptionHandler(ex => ex.ToString()); 
```

我有以下从我的 excel 表中调用的函数。

```
[ExcelFunction(Category = "Foo", Description = "Sets value of cell")]
public static Foo(String idx)
{
        Excel.Application app = (Excel.Application)ExcelDnaUtil.Application;
        Excel.Workbook wb = app.Workbooks[1];
        Excel.Worksheet ws = GetSheet("Main");

        // This gives us the row
        Excel.Name idxRange = wb.Names.Item("COL_Main_Index");
        var row = (int)app.WorksheetFunction.Match(idx, idxRange.RefersToRange, 0);

        // Get the Column
        Excel.Name buyOrderRange = wb.Names.Item("COL_Main_BuyOrder");
        var col = (int)buyOrderRange.RefersToRange.Cells.Column;

        // create the range and update it
        Excel.Range r = (Excel.Range)ws.Cells[row, col];
        r.Value ="Foo"; 
} 
```

问题是我实际上无法设置任何单元格值。当我调用该方法时，它会在最后一行导致错误。

我的错误处理程序给了我以下错误：

```
{System.Runtime.InteropServices.COMException (0x800A03EC) 
```

我也尝试像这样设置单元格值：

```
 r = (Excel.Range)ws.Cells[12, 22];
        const int nCells = 1;
        Object[] args1 = new Object[1];
        args1[0] = nCells;
        r.GetType().InvokeMember("Value2", BindingFlags.SetProperty, null, r, args1); 
```

结果相同。

谁能指出我在这里可能做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-04-26T14:56:36.173

实际上，如果您在异步作业中作为宏执行此操作，则可以在任何单元格中写入。

简单示例：

```
using ExcelDna.Integration;
using Excel = Microsoft.Office.Interop.Excel;

[ExcelFunction(Category = "Foo", Description = "Sets value of cell")]
public static Foo(String idx)
{
    Excel.Application app = (Excel.Application)ExcelDnaUtil.Application;
    Excel.Range range = app.ActiveCell;

    object[2,2] dummyData = new object[2, 2] {
        { "foo", "bar" },
        { 2500, 7500 }
    };

    var reference = new ExcelReference(
        range.Row, range.Row + 2 - 1, // from-to-Row
        range.Column - 1, range.Column + 2 - 1); // from-to-Column

    // Cells are written via this async task
    ExcelAsyncUtil.QueueAsMacro(() => { reference.SetValue(dummyData); });

    // Value displayed in the current cell. 
    // It still is a UDF and can be executed multiple times via F2, Return.
    return "=Foo()";
} 
```

写入单个单元格：

```
int row = 5;
int column = 6;
var reference = new ExcelReference(row - 1, column - 1);

ExcelAsyncUtil.QueueAsMacro(() => { reference.SetValue("Foobar"); }); 
```

// 编辑：仅供参考，您也可以使用：

```
private void WriteArray(object[,] data)
{
    Excel.Application app = (Excel.Application)ExcelDnaUtil.Application;
    Excel.Worksheet worksheet= (Excel.Worksheet)app.ActiveWorkbook.ActiveSheet;

    Excel.Range startCell = app.ActiveCell;
    Excel.Range endCell = (Excel.Range)worksheet.Cells[startCell.Row + data.GetLength(0) - 1, startCell.Column + data.GetLength(1) - 1];

    var writeRange = worksheet.Range[startCell, endCell];
    writeRange.Value2 = data;
} 
```

进而：

```
object[,] data = ...;    
ExcelAsyncUtil.QueueAsMacro(() =>
{
    WriteArray();
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-16T11:31:14.243

Excel 不允许您从用户定义的工作表函数中设置其他工作表单元格。这是为了保留 Excel 用于管理重新计算的依赖关系树。无论您使用的是 VBA、C API 还是 Excel-DNA，这都是正确的。

最好是添加功能区按钮、上下文菜单或快捷键以通过宏实现更改。

有一些丑陋的解决方法，但我不推荐它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-05T12:41:25.543

这是使用 .NET VB 的答案

```
 Dim row As Integer = 7
        Dim column As Integer = 7
        Dim reference = New ExcelReference(row, column)

        ExcelAsyncUtil.QueueAsMacro(Sub()
                                        reference.SetValue("Test")
                                    End Sub) 
```

# c# - control.parent 和 control.HasChildren

> ID：14896218
> 
> 赞同：-3
> 
> 时间：2013-02-15T13:50:51.183
> 
> 标签：c#, parent

我正在浏览一些 c# 代码并看到了类似的代码

```
if (c.HasChildren) 
```

..

```
if (c.parent is NumericUpDown) 
```

谁能告诉我它们是什么以及它们的用途是什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:54:13.937

c 是某种类型的 gui 组件。它询问控件中是否有控件（hasChildren）

然后询问其中的控件`c`是否是 NumericUpDown 控件。（c 控件的父级）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T13:54:34.440

c 是页面的视觉元素，并按逻辑构建。

你将有你的主要形式。
此表单将有几个面板或控件作为子项，一直到您的按钮和标签。

因此，如果您这样做`.HasChildren`，您只需检查控件内部是否有任何元素。可能是在动态添加它们时。

`.Parent`是获得对电流的包含控制的方法。它使您能够询问它的属性或修改它。

# python - 如何在matplotlib中更改矩阵的行和列的大小

> ID：14896219
> 
> 赞同：1
> 
> 时间：2013-02-15T13:50:51.100
> 
> 标签：python, matplotlib, wxpython

我使用这段代码创建了一个矩阵

```
self.ax = self.fig.add_subplot(1,1,1)
N = data.max()+5
self.ax.set_xlim(0,N)
self.ax.set_ylim(0,N)
self.ax.set_aspect('equal')
self.ax.scatter(data[:,1],data[:,0],color='black', marker = 's') 
```

如何更改行和列的大小，使绘制的点的大小更小

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:21:13.693

该`s = 1`参数设置由 绘制的点的大小`ax.scatter`：

```
self.ax.scatter(data[:,1],data[:,0],color='black', marker = 's', s = 1) 
```

# php - PHP PDO bindParam 不适用于数组内容

> ID：14896221
> 
> 赞同：3
> 
> 时间：2013-02-15T13:51:19.407
> 
> 标签：php, pdo

我有一种机制，旨在允许用户控制*产品*出现在*产品组*中的*顺序*。有一个“ ”表（**MySQL**），其中包含、和. 前两个将*产品*分配到*组*，第三个确定*顺序*。**`grouplines`**`group_id``product_id``manual_order`****

 *****这些`manual_order`值从 10 开始并以**10****为**增量递增。因此，例如，将*产品*移动到列表中的第 3 位，只需将其值更改为 25，然后重新计算值。这是通过获取按 排序的产品 id 列表并*以*递增方式对其重新编号来完成的。***`manual_order``manual_order`*`manual_order`****

 ****这段代码有效：

```
$products = array();
$dbh = s3_pdo::get_connection();
$query = $dbh->prepare('SELECT product_id FROM grouplines WHERE group_id=:group_id ORDER BY manual_order');
$query->bindValue(':group_id', $group_id);
$query->execute();
$rows = $query->fetchAll();
$query->closeCursor();
if ($rows) {
    $query = $dbh->prepare('UPDATE grouplines SET manual_order=:manual_order WHERE group_id=:group_id AND product_id=:product_id');
    $query->bindValue(':group_id', $group_id);
    //$query->bindParam(':product_id', $row['product_id']);
    $query->bindParam(':product_id', $product_id);
    $query->bindParam(':manual_order', $i);
    $i = 10;
    foreach ($rows as $row) {
        $product_id = $row['product_id'];
        $query->execute();
        $i += 10;
    }
} 
```

这不会：

```
$products = array();
$dbh = s3_pdo::get_connection();
$query = $dbh->prepare('SELECT product_id FROM grouplines WHERE group_id=:group_id ORDER BY manual_order');
$query->bindValue(':group_id', $group_id);
$query->execute();
$rows = $query->fetchAll();
$query->closeCursor();
if ($rows) {
    $query = $dbh->prepare('UPDATE grouplines SET manual_order=:manual_order WHERE group_id=:group_id AND product_id=:product_id');
    $query->bindValue(':group_id', $group_id);
    $query->bindParam(':product_id', $row['product_id']);
    //$query->bindParam(':product_id', $product_id);
    $query->bindParam(':manual_order', $i);
    $i = 10;
    foreach ($rows as $row) {
        //$product_id = $row['product_id'];
        $query->execute();
        $i += 10;
    }
} 
```

正如您所看到的，不同之处在于第二段代码绑定`$product_id`了*foreach 循环*，而第一段代码尝试在循环之外绑定`(from $row['product_id'])`......*据*我所知应该工作，但没有。*`$row['product_id']`*

 **我只能猜测为什么第二段代码不起作用，因为我找不到明确的答案。我想要一个明确的答案，因为我不熟悉使用 mysql_ 函数，`PDO`并且不想在我将系统的其余部分转换为使用`PDO`而不是旧的*mysql_*函数时遇到这种事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:49:20.553

让我们看看你的代码做了什么：

```
$query->bindParam(':product_id', $row['product_id']); 
```

在这里，您隐式创建了一个`$row`包含一个元素的数组，并将该**元素**作为引用传递给 bindParam()。这导致结构如下：

```
$row : Array(
           'product_id' => &null
       ) 
```

请注意，`$row`它本身不是参考！一旦你到达循环：

```
foreach ($rows as $row) 
```

数组`$row`被**覆盖**。此时您将丢失旧 $row-Array 中的引用，该数组不再存在。引用不能自动跳转到不同的数组，只是因为它具有相同的键并且恰好分配给了相同的变量。

**长话短说：你想做的事情是不可能的。**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T14:11:01.770

1.  您指的是未定义的数组索引 `$row['product_id']`
2.  `$query->bindParam(':product_id', $row['product_id']);` 声明失败。
3.  使用 try catch 捕获异常***********

# java - Hibernate + Spring = Java Web 应用程序的最新技术？

> ID：14896223
> 
> 赞同：0
> 
> 时间：2013-02-15T13:51:24.163
> 
> 标签：java, hibernate, rest, web-applications, spring-mvc

多年来，我使用 Struts2 + Hibernate 在网上有一个相当复杂的 Web 应用程序。目前我正在考虑使用 Spring3 和 Hibernate4 完全重写应用程序，以便能够提供 REST API。我做了一些阅读，我的方法现在非常类似于这个[博客条目](http://martinzimmermann1979.wordpress.com/2012/11/11/hibernate-4-x-mit-spring-3-x/) 博客条目是用德语写的，所以我将列出一些核心方法：

*   休眠以访问 RDBS 和 ORM（基于注释）
*   用于访问持久层的数据访问对象 (DAO)
*   使用 DAO 封装业务逻辑的服务类
*   数据传输对象 (DTO) 在 Spring 和 Hibernate 之间有一个分离层
*   Spring用于依赖注入和实现控制器

对于使用 java 的 Web 应用程序来说，这是一种最先进的方法吗？

感谢您的每一个提示或指针以及您的时间:)

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:02:43.250

这听起来像是一个合理的架构，但值得注意的是：

1.  我会针对 JPA 编写代码，这样我就不会过多地依赖 Hibernate。
2.  DTO 层可能不是必需的，大多数情况下会导致过度设计和臃肿的代码。看到这个： http: [//www.adam-bien.com/roller/abien/entry/how_evil_are_actually_data](http://www.adam-bien.com/roller/abien/entry/how_evil_are_actually_data)
3.  尽早围绕服务层设计事务设置。决定您是采用 Spring 声明式事务、JTA 还是...

玩得开心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T16:17:58.667

如果您想更进一步，以下几乎是行业标准：

1.  Spring MVC（结合 Apache Tiles）
2.  用于身份验证和授权的 Spring Security
3.  Spring AOP，如果你有任何横切问题（比如日志等）
4.  用于编写单元测试的 JMock
5.  二级缓存的 EH 缓存
6.  JQuery 和过多的 JQuery 插件...

祝你好运

# c# - 动态创建的 RichTextBox 的 TextChanged 事件

> ID：14896224
> 
> 赞同：0
> 
> 时间：2013-02-15T13:51:25.683
> 
> 标签：c#, .net, richtextbox, textchanged

我正在尝试做一个带有类似铬的标签的记事本。我的页面上有一个“新页面”按钮。当我单击它时，它会创建一个带有richtexbox 的新标签页。丰富的盒子是这样创建的

```
public void yeni()
    {
        //create a new tabpage
        TabPage newPage = new TabPage("Not-" + (tabControl1.TabPages.Count + 1));

        //create a new richtexbox
        RichTextBox rtb = new RichTextBox();

        int rtbname = tabControl1.TabPages.Count + 1;
        rtb.Name = "richTextBox" + rtbname.ToString();
        rtb.Anchor = (AnchorStyles.Bottom | AnchorStyles.Right | AnchorStyles.Left | AnchorStyles.Top);
        rtb.BorderStyle = BorderStyle.None;
        rtb.Width = 778;
        rtb.Height = 395;
        rtb.Location = new Point(0, 4);
        rtb.HideSelection = false;
        rtb.Font = new Font("Lucida Console", 9.75f);
        rtb.ForeColor = Color.Maroon;

        //add rtb to the tabpage
        newPage.Controls.Add(rtb);
        tabControl1.TabPages.Add(newPage);

        //make the new created tab the selected one
        tabControl1.SelectedTab = tabControl1.TabPages[tabControl1.TabPages.Count - 1];

        //selectedRtb.Text = null;
        openFileDialog1.FileName = null;
    } 
```

现在我创建了一个 RichTextBox，该 rtb 的名称是richTextBox*indexofthetabhere*。因此，如果我正在处理第二个标签页，则 rtb 的名称是“richTextBox2”。现在我想要做的是我想要在所选标签页上为 Richtextbox 设置一个 textchanged 事件。我在这里使用此代码获取选定的富文本框。

```
private void tabControl1_SelectedIndexChanged(object sender, EventArgs e)
    {

        selectedone = "richTextBox" + (tabControl1.SelectedIndex+1).ToString();

            selectedRtb = (RichTextBox)tabControl1.SelectedTab.Controls[selectedone];
            textBox2.Text = selectedone;
    } 
```

现在在这里我得到了选定的标签索引，我得到了 rtb 名称，然后我得到了选定的 rtb 作为“selectedRtb”。现在我不能为此做一个 textchanged 事件。我不知道实际上该怎么做。我测试了上面的代码是否正常工作，是的，我得到了正确的 rtb 名称。但我不能使用它们，因为我不知道该怎么做。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:17:49.497

```
 public void yeni()
    {
       //....
       RichTextBox rtb = new RichTextBox();
       rtb.Name = "richTextBox" + selectedTabPageIndex.ToString();
       rtb.TextChanged += rtb_TextChanged;
        //....    
     }

     void rtb_TextChanged(object sender, EventArgs e)
     {
          RichTextBox rtb = (RichTextBox)sender;

          if (rtb.Name == "richTextBox" + selectedTabPageIndex.ToString())
          {
              //rtb is selected page richtextbox
              //......
          }
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:18:52.683

你不知道如何创建[事件](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx)？或者您在知道它的名称时无法访问某些东西（使用[反射](https://stackoverflow.com/questions/9428779/a-good-and-complete-tutorial-about-reflection-in-net)）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T14:23:27.747

好吧，我解决了我的问题。这是答案；

```
selectedRtb.TextChanged += (bs, be) =>
        {
           //whatever you want to do
        }; 
```

在我创建 rtb 后，只需将其添加到我的代码中，它就可以工作了。感谢所有帮助过的人。

# c# - Windows +D 禁用但不工作

> ID：14896228
> 
> 赞同：0
> 
> 时间：2013-02-15T13:51:52.130
> 
> 标签：c#, winforms

我有两个窗体 MainForm 和 MinimizedMainForm。我想为这两种形式禁用 Windows+D。两种形式的父级都是第三种形式 FormBase。我使用以下代码禁用 Windows+D

```
private const in GWL_HWNDPARENT =-8

IntPtr hprog = NativeMethods.FindWindowEx(NativeMethods.FindWindowEx(NativeMethods.FindWindow("Progman", "Program Manager"),
                          IntPtr.Zero, "SHELLDLL_DefView", ""),
                          IntPtr.Zero, "SysListView32", "FolderView");
        NativeMethods.SetWindowLong(this.Handle, GWL_HWNDPARENT, hprog); 
```

我面临的问题是，如果按 Win+D，我的 MainForm 永远不会被最小化。对于 MinimizedForm 的首次启动，如果我按 Win+D，它不会被最小化。但是如果我按 Win+D ，第二次 + 加载最小化的MainForm ，表单会被最小化。我在两个表单的 FormLoad 事件上添加了上面的代码。当我单击 MainForm 上的面板时打开 MinimizedMainForm，反之亦然。MainForm 是我项目的起始形式。

我应该怎么做才能阻止表单最小化 2nd+ loadForm 事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:26:49.597

基本上 Win + D 不是为了最小化窗口，而是为了显示桌面。Win+D = 显示桌面。所以即使你的窗口没有最小化框，它也会被最小化。

此外，当您按下 Win+D 时，不是您的应用程序处理它，而是 Windows 本身在处理它，因此它根本不会到达您的应用程序，因此如果您在应用程序中处理它是没有意义的。

尝试找出您的应用程序启动的一些技巧，您可以阻止 Windows 处理 Win+D 键。

注册表中有一个键

HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer

在此处更改热键的值将禁用 Win+D 组合，但不建议这样做，因为您必须在应用程序离开焦点时将其恢复。

**是的，如果您正在制作小部件，请遵循创建小部件的要求。它会自动为您提供此类功能**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:05:26.877

也许不是阻止最小化可以最小化的窗口，而是必须创建不能最小化的窗口：`MinimizeBox = false`？（我敢打赌这不可能那么简单，但我不会写评论，所以这里有一个解决方案=D）

# haskell - 将 Text.Pandoc.writers 打印到 ghci 中：没有显示实例

> ID：14896231
> 
> 赞同：1
> 
> 时间：2013-02-15T13:51:56.160
> 
> 标签：haskell, show, ghci, pandoc

**我想做什么？**

在 ghci 下打印格式和作者的关联列表。
见[文档](http://hackage.haskell.org/packages/archive/pandoc/1.10.1/doc/html/Text-Pandoc.html)：

```
writers :: [(String, Writer)]
Association list of formats and writers. 
```

**什么已经尝试过**

```
zurgl>>>import Text.Pandoc as P
zurgl>>>P.writers 

<interactive>:20:1:
    No instance for (Show (WriterOptions -> Pandoc -> [Char]))
      arising from a use of `print'
    Possible fix:
      add an instance declaration for
      (Show (WriterOptions -> Pandoc -> [Char]))
    In a stmt of an interactive GHCi command: print it 
```

我希望自动导入相应的节目实例，但似乎并非如此。而且我必须承认我不知道如何为 (Show (WriterOptions -> Pandoc -> [Char]) 定义实例声明。作为一种解决方法，我尝试导入 Pandoc 库的附加模块，但是仍然没有可用的 Show 实例。

那我应该自己定义这个实例吗？
如果是，您有什么提示可以与我分享以完成此任务。
如果我不应该有什么问题？

在此先感谢您的帮助。

* * *

**编辑**

好的，我想我看到了我的误解：

正在做 ：

```
zurgl>>>map (\x-> fst x) P.writers 
["native","json","html","html5","html+lhs","html5+lhs","s5","slidy","slideous","dzslides","docbook","opendocument","latex","latex+lhs","beamer","beamer+lhs","context","texinfo","man","markdown","markdown+lhs","plain","rst","rst+lhs","mediawiki","textile","rtf","org","asciidoc"] 
```

我认为尝试在我的元组中显示第二个东西是没有意义的。它应该是一个函数，然后我们无法显示它。

我想这应该是问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:21:07.353

我试图做的事情没有意义，因为元组包含两种不同的类型。
第一个是特定编写器的标识符（字符串类型），第二个是编写器本身（然后是函数）。当然，如果我尝试打印所有这些，它将失败，因为**没有 Show 函数的实例**。

然后要检索 Pandoc 中可用的 writer 列表（目的是动态调用相应的函数），我们只需要检索标识符列表，如下所示：

```
zurgl>>>map fst P.writers 
["native","json","html","html5","html+lhs","html5+lhs","s5","slidy","slideous","dzslides","docbook","opendocument","latex","latex+lhs","beamer","beamer+lhs","context","texinfo","man","markdown","markdown+lhs","plain","rst","rst+lhs","mediawiki","textile","rtf","org","asciidoc"] 
```

# powershell - 我需要帮助使用 PowerShell 的 Out-File cmdlet 格式化输出

> ID：14896232
> 
> 赞同：0
> 
> 时间：2013-02-15T13:52:03.493
> 
> 标签：powershell, file-io

我有一系列文档正在通过以下功能来计算每个文档中的单词出现次数。此功能可以很好地输出到控制台，但现在我想生成一个包含信息的文本文件，但文件名附加到列表中的每个单词。

我当前的控制台输出是：

```
"processing document1 with x unique words occuring as follows"
"word1     12"
"word2      8"
"word3      3"
"word4      4"
"word5      1" 
```

我想要一个这种格式的分隔文件：

```
document1;word1;12
document1;word2;8  
document1;word3;3
document1;word4;4
document1;word1;1
document2;word1;16
document2;word2;11 
document2;word3;9
document2;word4;9
document2;word1;13 
```

虽然下面的函数让我得到单词和出现的列表，但我很难弄清楚在哪里或如何插入文件名变量，以便它打印在每行的开头。MSDN 帮助不大，我尝试插入变量的大多数地方都会导致错误（见下文）

```
function Count-Words ($docs) {
    $document = get-content $docs 
    $document = [string]::join(" ", $document)        
    $words = $document.split(" `t",[stringsplitoptions]::RemoveEmptyEntries)                             
    $uniq = $words | sort -uniq  
    $words | % {$wordhash=@{}} {$wordhash[$_] += 1}
    Write-Host $docs "contains" $wordhash.psbase.keys.count "unique words distributed as follows."
    $frequency = $wordhash.psbase.keys | sort {$wordhash[$_]}
    -1..-25 | %{ $frequency[$_]+" "+$wordhash[$frequency[$_]]} | Out-File c:\out-file-test.txt -append
    $grouped = $words | group | sort count 
```

我是否需要创建一个字符串以传递给输出文件 cmdlet？这只是我在过去几次尝试中放错地方的东西吗？我想了解为什么它也会出现在特定的地方。现在我只是在猜测，因为我知道我不知道在哪里可以`out-file`实现我选择的结果。

我已经尝试使用`-$docs`and来根据 powershell 帮助格式化我的命令`-FilePath`，但是每次我向`out-file`上面成功运行的内容添加任何内容时，都会出现以下错误：

```
Out-File : Cannot validate argument on parameter 'Encoding'. The argument "c:\out-file-test.txt" does not bel
ong to the set "unicode,utf7,utf8,utf32,ascii,bigendianunicode,default,oem" specified by the ValidateSet attribute. Sup
ply an argument that is in the set and then try the command again.
At C:\c.ps1:39 char:71
+     -1..-25 | %{ $frequency[$_]+" "+$wordhash[$frequency[$_]]} | Out-File <<<<  -$docs -width 1024 c:\users\x46332\co
unt-test.txt -append
    + CategoryInfo          : InvalidData: (:) [Out-File], ParameterBindingValidationException
    + FullyQualifiedErrorId : ParameterArgumentValidationError,Microsoft.PowerShell.Commands.OutFileCommand 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:12:33.597

我重写了你的大部分代码。您应该利用对象来更轻松地按照您想要的方式进行格式化。这个拆分“空间”并将单词组合在一起。试试这个：

```
Function Count-Words ($paths) {
    $output = @()
    foreach ($path in $paths) {
        $file = Get-ChildItem $path 
        ((Get-Content $file) -join " ").Split(" ", [System.StringSplitOptions]::RemoveEmptyEntries) | Group-Object | Select-Object -Property @{n="FileName";e={$file.BaseName}}, Name, Count | % { 
            $output += "$($_.FileName);$($_.Name);$($_.Count)" 
        }
    }
    $output | Out-File test-out2.txt -Append
}

$filepaths = ".\test.txt", ".\test2.txt"

Count-Words -paths $filepaths 
```

它像你问的那样输出（文档；单词；计数）。如果您希望 documentname 包含扩展名，请更改`$file.BaseName`为`$file.Name`. 测试输出：

```
test;11;1
test;9;2
test;13;1
test2;word11;5
test2;word1;4
test2;12;1
test2;word2;2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:38:21.390

试试这个：

```
$docs = @("document1", "document2", ...)

$docs | % {
  $doc = $_
  Get-Content $doc `
    | % { $_.split(" `t",[stringsplitoptions]::RemoveEmptyEntries) } `
    | Group-Object `
    | select @{n="Document";e={$doc}}, Name, Count
} | Export-CSV output.csv -Delimiter ";" -NoTypeInfo 
```

如果你想把它变成一个函数，你可以这样做：

```
function Count-Words($docs) {
  foreach ($doc in $docs) {
    Get-Content $doc `
      | % { $_.split(" `t",[stringsplitoptions]::RemoveEmptyEntries) } `
      | Group-Object `
      | select @{n="Document";e={$doc}}, Name, Count
  }
}

$files = @("document1", "document2", ...)

Count-Words $files | Export-CSV output.csv -Delimiter ";" -NoTypeInfo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T16:00:13.597

略有不同的做法：

```
function Get-WordCounts ($doc)
{
      $text_ = [IO.File]::ReadAllText($doc.fullname)

      $WordHash = @{}

      $text_ -split '\b' -match '\w+'|
        foreach {$WordHash[$_]++}

      $WordHash.GetEnumerator() | 
       foreach {
         New-Object PSObject -Property @{
                                          Word     = $_.Key
                                          Count    = $_.Value
                                         }
               }
  }

$docs = gci c:\testfiles\*.txt |
 sort name

 &{
 foreach ($doc in dir $docs)
        {
           Get-WordCounts $doc |
           sort Count -Descending |
            foreach {
              (&{$doc.Name;$_.Word;$_.Count}) -join ';'  
             }
        }
} | out-file c:\somedir\wordcounts.txt 
```

# .net - 如何知道 DataGridView 的数据绑定何时*真正*完成？

> ID：14896236
> 
> 赞同：3
> 
> 时间：2013-02-15T13:52:15.520
> 
> 标签：.net, winforms, datagridview

我对这个 DataGridView 控件感到非常沮丧。我真正想做的只是确保网格最初以某种默认方式排序（尽管如果需要，用户可以对它进行不同的排序）。

我尝试分配 DataSource，然后调用 Sort 方法。这有时有效，但有时会导致 InvalidOperationException。调试它似乎表明它不起作用的时间网格没有行或列。行为的间歇性让我猜测正在进行一场比赛，所以当我分配数据源时，网格可能没有同步绑定，而是在后台进行。

所以我查看了 MSDN 文档，发现有一个事件 DataBindingCompleted。这看起来差不多，我附上了一个处理程序。该事件是在网格本身上声明的，因此您会认为这意味着整个控件的所有数据绑定都已完成。然而，每次我实际将新数据绑定到网格时，它都会触发*很多*次（我不知道，但我猜测每个单元格一次）。

我想我可以忍受这个；开销可能并不大，因为如果被要求对自己进行排序“col1 asc”并且它已经以这种方式排序，那么网格可能足够聪明，根本不会做太多事情。（如果没有，我总是可以自己做那个测试，而不是调用 sort ，除非我真的要改变一些东西。）不过，我真的很想知道是否真的没有办法知道数据绑定何时真正完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:43:24.687

我们通常在处理诸如排序之类的绑定后细节时使用 DataBound 事件，并且多年来一直使用它而没有描述行为。也许这就是您正在寻找的事件？

# java - XStream 中没有已知类类型的注解

> ID：14896239
> 
> 赞同：1
> 
> 时间：2013-02-15T13:52:21.207
> 
> 标签：java, generics, serialization, xml-serialization, xstream

我有以下 XStream 问题：当我尝试阅读注释时，我需要使用以下句子：

```
xstream.processAnnotations(DataClass .class); 
```

它明确定义了我要序列化的类。但在我的代码中：

```
public class Tester {

    /**
     * @param args
     */
    public static void main(String[] args) {
        DataClass data = new DataClass();
        data.familyName = "Pil";
        data.firstName = "Paco";
        data.ID = 33;
        data.properties.put("one", "1");
        data.properties.put("two", "2");
        data.properties.put("three", "3");

        String xml = getXmlString(data);
        System.out.println(xml);
    }

    public static  String getXmlString(Object data) {
        String ret = "";
        final StringWriter stringWriter = new StringWriter();

        XStream xstream = new XStream(new StaxDriver());
        xstream.processAnnotations(Object.class);
        xstream.marshal(data, new PrettyPrintWriter(stringWriter));

        ret = stringWriter.toString();

        return ret;
    }
} 
```

其中 dataClass 是：

```
@XStreamAlias("data")
public class DataClass {
    public Integer ID = 0;
    public String firstName = "";
    public String familyName = "";
    public Map<String, String> properties = null;

    public DataClass(){
        properties = new HashMap<String,String>();
    }
} 
```

我想要这样的东西：

```
public static  <T> String getXmlString(T data) {
        String ret = "";
        final StringWriter stringWriter = new StringWriter();

        XStream xstream = new XStream(new StaxDriver());
        xstream.processAnnotations(T.class);
        xstream.marshal(data, new PrettyPrintWriter(stringWriter));

        ret = stringWriter.toString();

        return ret;
    } 
```

但它不起作用。

有谁知道我正在尝试做的事情是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:18:47.813

可能您应该启用“[自动检测注释](http://x-stream.github.io/annotations-tutorial.html#AutoDetect)”模式：

```
public static <T> String getXmlString(T data) {
    final StringWriter stringWriter = new StringWriter();

    XStream xstream = new XStream(new StaxDriver());
    xstream.autodetectAnnotations(true);
    xstream.marshal(data, new PrettyPrintWriter(stringWriter));

    return stringWriter.toString();
} 
```

请阅读“[自动检测注释](http://x-stream.github.io/annotations-tutorial.html#AutoDetect)”段落。您可以在其中找到有关与此解决方案相关的问题的所有信息。如：鸡与蛋问题、并发、异常和性能。

结果：

```
<data>
  <ID>33</ID>
  <firstName>Paco</firstName>
  <familyName>Pil</familyName>
  <properties>
    <entry>
      <string>two</string>
      <string>2</string>
    </entry>
    <entry>
      <string>one</string>
      <string>1</string>
    </entry>
    <entry>
      <string>three</string>
      <string>3</string>
    </entry>
  </properties>
</data> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:08:53.023

我建议您创建一个`init()`初始化 xstream 对象的方法。让您的 xstream 对象具有类范围。我从来没有理由在一个项目中创建多个 xstream 对象，所以我通常以这种方式处理它。您甚至可以将其设为静态字段。将所有注释处理方法放入`init()`并显式注册您希望序列化的每个类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T14:15:55.833

你可以使用

```
if(data != null) xstream.processAnnotations(data.getClass()); 
```

访问`data`对象的直接类，但正如 Thorn 建议的那样，最好声明一个`XStream`知道您将要序列化的所有类的单个实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T14:14:17.347

我想我找到了一种解决方案，它可能不是最好的，但由于我需要非常灵活，它是最适合我需求的解决方案：

```
public static  <T> String getXmlString(T data, Class<?> dataClass) {
        String ret = "";
        final StringWriter stringWriter = new StringWriter();

        XStream xstream = new XStream(new StaxDriver());
        xstream.processAnnotations(dataClass);
        xstream.marshal(data, new PrettyPrintWriter(stringWriter));

        ret = stringWriter.toString();

        return ret;
    } 
```

如果有人找到更好的东西，我会很高兴。我对 Java 很陌生，可能我并没有使用这种语言的所有很酷的特性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-02T06:25:25.250

也许与这个问题没有直接关系，但如果你使用 Spring XStreamMarshaller，你需要打开 XStream 注释的检测，如下所示：

```
 <bean id="xStreamMarshaller" class="org.springframework.oxm.xstream.XStreamMarshaller">
       <property name="autodetectAnnotations" value="true"/>
    </bean> 
```

# android - 键盘在 Nexus7 版本 4.2 上自动出现

> ID：14896244
> 
> 赞同：5
> 
> 时间：2013-02-15T13:52:37.637
> 
> 标签：android, dialog, timepicker

我有一个包含时间选择器的对话框。在我所有其他手机上，一切正常，我单击按钮，出现对话框（包含时间选择器）。比我设定的时间。

在 Nexus 7 版本 android 4.2 上。在横向模式下，当我单击按钮时，会出现对话框并且键盘会自动出现。我还没有点击`TimePicker`。

任何人都知道为什么我在 Nexus7 上遇到这个问题。

编辑：代码如下

```
private DatePicker mDatePicker;

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
   mDatePicker = (DatePicker) view.findViewById(R.id.date_picker);
   mDatePicker.init(mDate.get(Calendar.YEAR), mDate.get(Calendar.MONTH), mDate.get(Calendar.DAY_OF_MONTH), this);
   mDatePicker.clearFocus();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T05:23:57.167

使`layout`包含时间选择器可聚焦。并要求重点关注此`layout`。然后 `DatePicker`不会获得焦点，键盘也不会显示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T19:02:03.347

我遇到了同样的问题，我在我的应用程序`SoftInputMode`中的一个上调用 (Keyboard)`Activity`并且它出现在所有另一个上`Activities`。所以，我最后不得不在`android:windowSoftInputMode="stateAlwaysHidden"`我不想让（键盘）弹出的`manifest`文件中添加。这摆脱了弹出的键盘。这是我的样子：`activities``SoftInputMode``manifest` `Activity`

```
<activity
        android:name=".GMax3Main"
        android:label="@string/app_name" 
        android:windowSoftInputMode="stateAlwaysHidden">
        <intent-filter>
            <action android:name="com.medeasy.GMax3.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T11:23:49.153

你有没有试过在对话框出现后隐藏你的键盘？像这样的东西：

`InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE); imm.hideSoftInputFromWindow(v.getWindowToken(), 0);`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-23T00:32:51.840

在您的布局中，将此标记添加到**不是**`DatePicker`：

```
<SomeView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:doSomethingCool="true">
    <requestFocus/>
</SomeView> 
```

这应该确保`DatePicker`不会获得焦点，因此不会显示键盘。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-15T14:08:15.323

您也可以尝试在 Manifest 中禁用它：

```
 <activity
  android:name=".activity.SampleActivity"
  android:configChanges="keyboardHidden|orientation"
 /> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-25T09:51:04.483

将以下行添加到您的`activity`in`manifest.xml`

```
 android:windowSoftInputMode="stateAlwaysHidden" 
```

# jquery - 如何验证 joomla 2.5 默认文本编辑器？

> ID：14896247
> 
> 赞同：0
> 
> 时间：2013-02-15T13:52:44.803
> 
> 标签：jquery, joomla, validation, joomla2.5

如何使用 jQuery 在模糊上验证 joomla 默认文本编辑器？

这是我用来获取文本编辑器的代码。例如，在 /models/forms/newsitem.xml 中：

```
 <field name="description" type="editor" buttons="true" 
                   hide="pagebreak,readmore,article,image"
                   class="inputbox required"
                   filter="JComponentHelper::filterText"
                   label="JGLOBAL_DESCRIPTION" 
                   description="COM_NEWSITEMS_FIELD_DESCRIPTION_DESC" required="true" /> 
```

第二个文件 (/views/.../edit.php) - 添加到 javascript 中的新对象是什么？

```
<script type="text/javascript">
    Joomla.submitbutton = function(task) {
        if (task == 'newsitem.cancel' || document.formvalidator.isValid(document.id('newsitem-form'))) {
            <?php echo $this->form->getField('description')->save(); ?>
            Joomla.submitform(task, document.getElementById('newsitem-form'));
        } else {
            alert('<?php echo $this->escape(JText::_('JGLOBAL_VALIDATION_FORM_FAILED'));?>');
        }
    }
</script> 
```

我想要的是我想在文本编辑器旁边显示一条警告消息，说“你不能把这个留空”。我可以在表单提交中做到这一点，但真正的挑战是如何在模糊中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:07:03.257

如果表单中只有编辑器，则此代码`document.formvalidator.isValid(document.id('newsitem-form'))`将验证您的表单，您可以试试这个 -

```
jQuery('#editorid').blur(function() {
  if(!document.formvalidator.isValid(document.id('newsitem-form'))){
    //Add your error message code 

  }
}); 
```

**更新**：-

```
jQuery(jQuery('iframe')[0].contentWindow).blur(function() {
 var editor_text = jQuery('iframe').contents().find('body').text();
 if(editor_text=='')alert('Error message');
}); 
```

注意：-使用指向编辑器 iframe 的有效选择器，这仅在有一个编辑器时才有效

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:27:39.903

我懂了。更改了答案（登录- **Irfan**），但应该是 - 如果单击“保存”，则编辑器会显示错误（空文本）。这是一个例子：

```
<script type="text/javascript">    
    Joomla.submitbutton = function(task) {
        if (task == 'newsitem.cancel' || document.formvalidator.isValid(document.id('newsitem-form'))) {
          if(task != 'newsitem.cancel') {
            var boolSubmit = true;
            if(jQuery('#jform_description_parent').is(':visible')) {
                jQuery(jQuery('#jform_description_parent iframe')[0].contentWindow).each(function() {
                    var editor_text = jQuery('#jform_description_parent iframe').contents().find('body').text();
                    if(editor_text=='') {
                        alert('<?php echo $this->escape(JText::_('JGLOBAL_VALIDATION_FORM_FAILED'));?>');
                        boolSubmit = false
                    }
                });
            } else {
                jQuery('textarea#jform_description').each(function() {
                    if(jQuery(this).val()=='') {
                        alert('<?php echo $this->escape(JText::_('JGLOBAL_VALIDATION_FORM_FAILED'));?>');
                        boolSubmit = false;
                    }
                });
            }
            if(!boolSubmit)
               return boolSubmit;
          }
          <?php echo $this->form->getField('description')->save(); ?>            
          Joomla.submitform(task, document.getElementById('newsitem-form'));
        } else {
            alert('<?php echo $this->escape(JText::_('JGLOBAL_VALIDATION_FORM_FAILED'));?>');
        }
    }
</script> 
```

好吧结论？我认为这可能没问题。

# c# - 等待任务完成时出现死锁

> ID：14896248
> 
> 赞同：0
> 
> 时间：2013-02-15T13:52:53.987
> 
> 标签：c#, task-parallel-library

当用户单击表单的某个部分时，我需要开始更新同一表单的另一个区域。这是使用单独的任务完成的。问题是，如果触发了更新并且正在进行更新，我需要取消它，等待它完成，然后启动一个新的。

我是 TPL 的新手，由于时间限制还不能使用 .NET 5（我们有 VS2012 许可证，但尚未迁移我们的解决方案）。这是代码：

```
private mLoadGridLock = new Object();
private CancellationTokenSource mCancellationTokenSource;
private bool mLoadingFrames;
private Task mLoadingTask;

private List<string> mFramesList;
public FrameLoader(){
    InitializeComponent();
    mLoadingFrames = false;
    mCancellationTokenSource = new CancellationTokenSource();
}

public void LoadGrid(){
    lock (mLoadGridLock) {
        if (mStudiesGrid.RowCount <= 0)
            return;
        Debug.WriteLine("--->LoadGrid Called");
        if (mLoadingFrames) {
            mCancellationTokenSource.Cancel();
            Debug.WriteLine("--->Waiting for cancellation...");
            mLoadingTask.Wait();
            Debug.WriteLine("--->Wait for cancellation over!");
        }
        Debug.WriteLine("--->Launching new task");
        mLoadingTask = Task.Factory.StartNew(() => LoadFrames(), mCancellationTokenSource.Token);
    }
}

private void LoadFrames(){
    mLoadingFrames = true;
    Debug.WriteLine("      +++> Loader task started!");
    int i = 0;
    BeginInvoke(() => flp.Controls.Clear());
    mFramesList = FrameRules.GenerateFrameList(this);
    if (mFramesList <= 0)
        return;
    foreach (string framePath in mFramesList) {
        if (mCancellationTokenSource.Token.IsCancellationRequested) {
            mLoadingFrames = false;
            Debug.WriteLine("      +++>Loader task cancelled");
            return;
        }
        Debug.WriteLine("      +++>Loading frame " + i.ToString());
        i = i + 1;
        FrameOfReference fofr = new FrameOfReference();
        fofr.BackgroundImage = My.Resources.Loading;
        BeginInvoke(() => flp.Controls.Add(fofr));
        Thread.Sleep(3000);
        BeginInvoke(() => fofr.BackgroundImage == My.Resources.Done);
    }
    mLoadingFrames = false;
    Debug.WriteLine("      +++>Loader task finished");
} 
```

这第一次运行良好，但在第二次我遇到了死锁。这是调试输出，它是一致的（它总是相同的）：

```
--->LoadGrid Called
--->Launching new task
      +++> Loader task started!
      +++>Loading frame 0
      +++>Loading frame 1
The thread 'ShowMessage-Execute' (0x168c) has exited with code 0 (0x0).
The thread 'Win32 Thread' (0x168c) has exited with code 0 (0x0).
      +++>Loader task finished
--->LoadGrid Called
--->Launching new task
      +++> Loader task started!
      +++>Loading frame 0
--->LoadGrid Called
--->Waiting for cancellation... 
```

很明显，问题是由于第二次触发更新时两次调用 LoadGrid 引起的；这就是我添加`lock`块的原因。但这仍然挂起......这是我第一次使用 TPL，所以欢迎任何意见。

**更新**：更改`lock(this)`为后`lock(mLoadGridLock)`，死锁消失了，但在第二次或第三次尝试时，它不会加载任何帧，从那时起它不会加载任何帧。这是一个日志：

```
--->LoadGrid Called
--->Launching new task
      +++> Loader task started!
      +++>Loading frame 0
The thread 'ShowMessage-Execute' (0xe50) has exited with code 0 (0x0).
The thread 'Win32 Thread' (0xe50) has exited with code 0 (0x0).
      +++>Loading frame 1
      +++>Loader task finished
--->LoadGrid Called
--->Launching new task
      +++> Loader task started!
      +++>Loading frame 0
--->LoadGrid Called
--->Waiting for cancellation...
      +++>Loader task cancelled
--->Wait for cancellation over!
--->Launching new task 
```

# java - 完成另一个班级的活动

> ID：14896250
> 
> 赞同：7
> 
> 时间：2013-02-15T13:52:58.593
> 
> 标签：java, android, class, android-activity, stack

我正在开发一个需要永久互联网连接的应用程序。如果没有互联网连接，我希望用户退出应用程序（进入登录屏幕）。我有一个检测网络连接的网络接收器类。我希望这个类要么终止堆栈顶部的活动，要么开始一个新的登录活动并删除整个历史堆栈。

问题是我无法从接收器类内部完成前台活动，并且无法知道当网络出现故障时用户处于哪个活动中。如果我从这个类开始一个新的登录活动，当用户按下“返回”时，他会被带回应用程序（如果他重新连接到网络），但应用程序没有登录并崩溃。

`myIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK || FLAG_ACTIVITY_CLEAR_TOP);`从我的 NetworkStateReceiver 类开始新的登录活动时尝试使用。但它不起作用，据我了解，这会创建一个新任务，其中唯一的活动是我开始的活动（登录），但所有其他活动的旧任务保持不变。

所以我需要：

*- 一种完成班级前台活动的方法*

*- 或一种从类开始新活动并清空活动堆栈的方法*

这是它的价值的接收器代码：

```
public class NetworkStateReceiver extends BroadcastReceiver{
public void onReceive(Context context, Intent intent) {
//     super.onReceive(context, intent);
 Log.d("app","Network connectivity change");
 if(intent.getExtras()!=null) {
     Login.apiKey = null;
    NetworkInfo ni=(NetworkInfo) intent.getExtras().get(ConnectivityManager.EXTRA_NETWORK_INFO);
    if(ni!=null && ni.getState()==NetworkInfo.State.CONNECTED) {
        Log.i("app","Network "+ni.getTypeName()+" connected");
    }
 }
 if(intent.getExtras().getBoolean(ConnectivityManager.EXTRA_NO_CONNECTIVITY,Boolean.FALSE) && !Login.loginActive) {
        Log.d("app","There's no network connectivity");

        Toast.makeText(context, "No internet connection. Logging out", Toast.LENGTH_LONG).show();
        //logout
        Receiver.engine(context).halt();
        Receiver.mSipdroidEngine = null;
        Receiver.reRegister(0);
        new Thread(ChatList.runnable).interrupt();
        ChatList.buddyList.clear();
        Login.apiKey = null;
        Log.i("Logout", "Logged out!");
        Login.loggedOut = true;

        Intent myIntent = new Intent(context, Login.class);
        myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
//          myIntent.addFlags(Intent.FLAG_ACTIVITY_PREVIOUS_IS_TOP);
        context.startActivity(myIntent);

     }
   }
} 
```

**解决方案：** 将所有活动的引用传递给接收者

```
//random user_activity
    @Override
protected void onPause() {
    super.onPause();
    NetworkStateReceiver.curActivity = null;
}

@Override
protected void onResume() {
    super.onResume();
    NetworkStateReceiver.curActivity = user_activity.this; //edited : getParent() doesn't always work
} 
```

在网络接收器中`onReceive()`：

```
 if(curActivity != null)
        {
            curActivity.finish();
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:25:08.177

一种方法是向接收者传递对当前活动的引用（例如，在`onResume`？）。但是，请确保将其设置为 null `onPause`，否则您将看到一些丑陋的内存泄漏。然后，在开始登录活动之前`onReceive`，您可以`curActivity.finish()`（如果它为 null，则什么也不做）。

# ios - 将 AFHTTPClient 用于多个 JSONRequestOperations

> ID：14896253
> 
> 赞同：0
> 
> 时间：2013-02-15T13:53:13.100
> 
> 标签：ios, afnetworking

我对 AFNetworking 比较陌生，希望为以下问题找到更好的解决方案。

我在我的 iOS 应用程序开始时使用了 2 个 AFJSONRequestOperations。

```
AFJSONRequestOperation *operation1 = [AFJSONRequestOperation JSONRequestOperationWithRequest:request1 success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    // do something
}failure:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON, NSError *error){
    // do something
}];

AFJSONRequestOperation *operation2 = [AFJSONRequestOperation JSONRequestOperationWithRequest:request2 success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    // do something
}failure:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON, NSError *error) {
    // do something
}];

[operation1 start];
[operation2 start]; 
```

我等待两个操作完成并开始进一步处理。

我想我可以将这两个操作结合到`enqueueBatchOfHTTPRequestOperationsWithRequests`方法中。

```
AFHTTPClient *client = [[AFHTTPClient alloc] init];

NSArray *requests = [NSArray arrayWithObjects:operation1, operation2, nil];

[client enqueueBatchOfHTTPRequestOperationsWithRequests:requests progressBlock:^(NSUInteger numberOfFinishedOperations, NSUInteger totalNumberOfOperations) {
    // track operations
}completionBlock:^(NSArray *operations) {
    // do something
}]; 
```

所以我想跟踪完成的操作并分别为每个操作执行完成块。我可以用 AFHTTPClient 执行吗？

# asp.net - 无法加载程序集 'Version=1.0.0.0,Culture=neutral,PublicKeyToken=24e9d7d011937483'。确保在访问页面之前已编译

> ID：14896260
> 
> 赞同：0
> 
> 时间：2013-02-15T13:53:48.367
> 
> 标签：asp.net, sharepoint, sharepoint-2010, web

有点背景故事 - 我正在尝试为我在 VS2010 中的列表创建一个自定义的 dispform 页面。我使用了 [here to do it][1] 找到的说明。我成功创建了自定义表单并让网站加载它而不是默认表单，但现在在添加页面后面的代码时卡住了。我 99% 确定问题出在我的命名空间和 asp 页面上的继承上，但我终其一生都无法弄清楚这个问题。我希望有人能摆脱她。这是我的代码：

```
<%@ Page language="C#" CodeBehind="DispRequest.aspx.cs" MasterPageFile="~masterurl/default.master" Inherits="Solvera.SellIT.DispRequest.Solvera.SellIT,Version=1.0.0.0,Culture=neutral,PublicKeyToken=24e9d7d011937483"  %>
<%@ Register Tagprefix="SharePoint" Namespace="Microsoft.SharePoint.WebControls" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>
<%@ Register Tagprefix="Utilities" Namespace="Microsoft.SharePoint.Utilities" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>
<%@ Import Namespace="Microsoft.SharePoint" %>
<%@ Assembly Name="$SharePoint.Project.AssemblyFullName$" %>
<%@ Assembly Name="Microsoft.Web.CommandUI, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>
<%@ Register Tagprefix="WebPartPages" Namespace="Microsoft.SharePoint.WebPartPages" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %> 
```

从名为 disprequest.aspx.cs 的文件后面的代码中：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Web.UI.WebControls;
using Microsoft.SharePoint.WebPartPages;

namespace Solvera.SellIT
{
class DispRequest:WebPartPage
{
    protected Button btnSubmitOffer;
    protected TextBox txtOfferAmount; 
```

我将非常感谢任何人可以提供的任何帮助。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:58:01.180

替换这个

```
<%@ Page language="C#" CodeBehind="DispRequest.aspx.cs" MasterPageFile="~masterurl/default.master" Inherits="Solvera.SellIT.DispRequest.Solvera.SellIT,Version=1.0.0.0,Culture=neutral,PublicKeyToken=24e9d7d011937483"  %> 
```

和

```
<%@ Page language="C#" CodeBehind="DispRequest.aspx.cs" MasterPageFile="~masterurl/default.master" Inherits="Solvera.SellIT.DispRequest"%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:58:06.560

好的，所以我在 sharepoint.stackexchange 的另一个用户的帮助下解决了这个问题。我有两件事对我不利。一路走来，我在我的 aspx 和代码隐藏之间混合了我的命名空间和类。我还输入了错误的公共令牌（我从另一个页面复制了它，以帮助我尝试创建的过程）。

一旦我纠正了这两个问题，我就不再有我在这里列出的问题。

感谢大家的意见。

# entity-framework - 实体框架 + 存储库模式和外键更新不更新相关实体

> ID：14896263
> 
> 赞同：2
> 
> 时间：2013-02-15T13:54:05.697
> 
> 标签：entity-framework, repository-pattern, unit-of-work, navigation-properties

我正在使用 Entity Framework 5 和 UnitOfWork + Repository 模式。

我正在尝试创建以下实体：

```
public partial class ViaggioAttivita
{
    public System.Guid Id { get; set; }
    public System.Guid IdViaggio { get; set; }
    public virtual Viaggio Viaggio { get; set; }
}

public partial class Viaggio
{
    public System.Guid Id { get; set; }
    public virtual ICollection<ViaggioAttivita> ViaggiAttivita { get; set; }
} 
```

我注意到当我创建填充 IdViaggio 的新 ViaggioAttivita 实体时，当我这样做时

```
ViaggioAttivita attivita = new ViaggioAttivita();
attivita.IdViaggio = ParentId;
unitOfWork.ViaggiAttivitaRepository.Insert(attivita); 
```

导航属性 attivita.Viaggio 没有得到更新。

如果我直接更新 attivita.Viaggio 而不是 Id

```
ViaggioAttivita attivita = new ViaggioAttivita();
attivita.Viaggio = unitOfWork.ViaggiRepository.GetByID(ParentId);
unitOfWork.ViaggiAttivitaRepository.Insert(attivita); 
```

Viaggio 当然会更新，但 IdViaggio 密钥也会更新。

我错过了什么？

为什么我会得到这种差异？

我尝试调用 .Save() 但没有任何变化。

似乎关系只有在我手动更新实体时才会更新，但如果我只更新密钥，它们不会更新。

谢谢

**编辑1：**

我使用的是 Sql Server 2008、MVC3、Entity Framework 5（当然是运行时 v4.0.30319）。数据库优先模式。这两个表是有关系的（当然，否则不会使用第二种方法填充Key）。

**编辑2：**

我尝试过去一些 EDMX 信息；

```
<EntityType Name="Viaggio">
    <Key>
      <PropertyRef Name="Id" />
    </Key>
    <Property Name="Id" Type="Guid" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
    <NavigationProperty Name="ViaggiAttivita" Relationship="DatabaseModel.FK_ViaggiAttivita_Viaggi" FromRole="Viaggi" ToRole="ViaggiAttivita" />
  </EntityType>

  <EntityType Name="ViaggioAttivita">
    <Key>
      <PropertyRef Name="Id" />
    </Key>
    <Property Name="Id" Type="Guid" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
    <Property Name="IdViaggio" Type="Guid" Nullable="false" />
    <NavigationProperty Name="Viaggio" Relationship="DatabaseModel.FK_ViaggiAttivita_Viaggi" FromRole="ViaggiAttivita" ToRole="Viaggi" />
  </EntityType>

 <AssociationSet Name="FK_ViaggiAttivita_Viaggi" Association="DatabaseModel.FK_ViaggiAttivita_Viaggi">
      <End Role="Viaggi" EntitySet="Viaggi" />
      <End Role="ViaggiAttivita" EntitySet="ViaggiAttivita" />
    </AssociationSet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:21:55.667

区别在于：

**a) 仅设置外键。** (Id) 如果此实体已加载到缓存中，则可以设置导航属性。如果未加载，则需要触发加载。您可以搜索如何或何时自动完成。请参阅主题延迟加载与 .include

**b) 使用实体设置导航属性。** 外键 ID 字段支持导航属性。现在 EF 可以看到 Nav 属性及其键。它可以使用已有的数据设置 ID。无需从数据库加载。所以它被设置了。

# php - 如何从 id 回显数据

> ID：14896264
> 
> 赞同：1
> 
> 时间：2013-02-15T13:54:06.623
> 
> 标签：php, mysql, echo

我认为这一定很简单，但我只是在这里解决了一个问题。我将如何从数据库中的 id 回显数据？我无法编辑显示此数据的 css div，因此需要找到一种方法来减少 PHP，例如：

```
<?  $query = "SELECT * FROM example WHERE id='1'";

        $result_1 = mysql_query("SELECT * FROM example WHERE id=1");
        $result_2 = mysql_query("SELECT * FROM example WHERE id=2");
        $result_3 = mysql_query("SELECT * FROM example WHERE id=3");

        while($row_1 = mysql_fetch_array($result_1))
        while($row_2 = mysql_fetch_array($result_2))
        while($row_3 = mysql_fetch_array($result_3))

          { ?> 
```

从这里我在 div 中回显数据：

```
<? echo $row_1['name'] ?> 
```

我想做的是这样的：echo $row_1['name']['1']. 我想在我的回声中使用 WHERE id=1。对不起，如果这不清楚。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T13:59:51.207

您可以轻松做到：

```
$result = mysql_query("SELECT * FROM example WHERE id IN (1, 2, 3)");
while ($row = mysql_fetch_assoc($result)) {
    echo ($row['id'] == 1) ? $row['id'] : ''; // print id only when id == 1
} 
```

**注意：**这个扩展 ( *mysql_* *) 自 PHP 5.5.0 起已弃用，将来将被删除。相反，应该使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或[PDO_MySQL扩展。](http://www.php.net/manual/en/ref.pdo-mysql.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T13:58:44.487

尝试这样的事情：

```
<?  
$result = mysql_query("SELECT * FROM `example`"); // Select all columns and rows from the example table

while($row = mysql_fetch_assoc($result)) { // For each row returned
    print($row['id'] . " - " . $row['name'] . "<br />\n"); // Print the row's ID and name
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T13:59:21.610

您可以尝试在回声之前执行 if() ，如下所示：

```
<? if($row_1['id'] == 1) echo $row_1['name']; ?> 
```

或者据我们所知，您在 $row_1 中的结果将始终具有 id == 1，因为您在查询中指定了它。

希望这有帮助，祝你好运 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T15:42:12.647

尝试这个：

```
$result = mysql_query("SELECT * FROM example WHERE id IN (1, 2, 3)");
while ($row = mysql_fetch_assoc($result)) {
    echo ($row['id'] == 1) ? $row['id'] : ''; // print id only when id == 1
} 
```

# java - Java OO：这可能吗？

> ID：14896267
> 
> 赞同：6
> 
> 时间：2013-02-15T13:54:22.330
> 
> 标签：java, oop

我试图隐藏我不拥有的类的实现。我想通过扩展类并实现自己的接口来做到这一点。这是我需要的类的实例是如何创建的：

```
QueueInfo info = admin.getQueue(queueName); 
```

QueueInfo 是我不拥有的类。要获取此对象的实例，我必须使用管理对象来获取它。我想通过一个名为 IQueueInfo 的接口来隐藏这个实现。IQueueInfo 将只允许访问消费者从 QueueInfo 中需要的内容。因此，为了获得这个 QueueInfo，我想通过我自己的名为 EMSQueueInfo 的对象来工作。这是我设想的设置方式：

```
public class EMSQueueInfo extends QueueInfo implements IQueueInfo {
    //...
} 
```

这允许我的消费者通过接口 IQueueInfo 工作，并允许底层 EMSQueueInfo 访问 QueueInfo 拥有的所有内容。我的问题在于获取 QueueInfo 的“实时”实例。要获得 QueueInfo 的常规实例，我可以说：

```
QueueInfo info = new QueueInfo(queueName); 
```

这个实例不是“活的”，因为它不是由管理对象创建的。所以，这样做：

```
public class EMSQueueInfo extends QueueInfo implements IQueueInfo {

    public EMSQueueInfo(String queueName){
        super(queueName);
    }

} 
```

没有给我一个“活”的对象。我希望能够做的是这样的事情：

```
public class EMSQueueInfo extends QueueInfo implements IQueueInfo {

    public EMSQueueInfo(String queueName, Admin admin){
        super = admin.getQueue(queueName);
    }

} 
```

但这是不可能的。

我看到的唯一解决方案是从我的 EMSQueueInfo 类中删除扩展，然后自己将对象包装起来，通过私有变量访问所有方法：

```
public class EMSQueueInfo extends QueueInfo implements IQueueInfo {

    private QueueInfo _queueInfo

    public EMSQueueInfo(String queueName, Admin admin){
        _queueInfo = admin.getQueue(queueName);
    }

    public int getMessagesOnQueue() {
        return _queueInfo.getMessagesOnQueue();
    }

} 
```

该解决方案确实有效，但我有点讨厌它。谁能想到更好的方法？我只是想打破 OO 并滥用它吗？同样，我这样做只是因为我希望消费者能够使用 IQueueInfo，将来，IQueueInfo 可用于访问 QueueInfo 的 JMS 实现或 QueueInfo 的 MSMQ 实现。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T14:01:34.430

我相信您说您讨厌的解决方案是一个很好的解决方案。它不会破坏 OO 或滥用它。

您正在做的是众所周知的模式，称为[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)（[对象适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern#Object_Adapter_pattern)）。您的课程中唯一不需要的就是扩展 QueueInfo。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T14:00:38.650

您的建议似乎完全合理 - 它被称为适配器模式（*感谢 Martinsos*）。

如果你能`Admin`以某种方式在你的类中隐藏对象会更好。例如

```
public class EMSQueueInfo implements QueueInfoProvider {

    private static Admin admin = new Admin();
    private QueueInfo queueInfo

    public EMSQueueInfo(String queueName){
        queueInfo = admin.getQueue(queueName);
    }

    public int getMessagesOnQueue() {
        return queueInfo.getMessagesOnQueue();
    }

} 
```

我试图给你的界面一个更“Java”的名字。`I`后缀非常.NET 。应该不需要扩展原始类。

实施起来会很痛苦，因为您必须费力地将*有趣的方法*从 .`QueueInfo``QueueInfoProvider`

这种方法将您的应用程序与您无法直接控制的 API 分离。从这个意义上说，它类似于[Facade 模式](http://en.wikipedia.org/wiki/Facade_pattern)。

# tomcat - 午睡整合

> ID：14896279
> 
> 赞同：0
> 
> 时间：2013-02-15T13:55:04.297
> 
> 标签：tomcat, selenium, web-testing, siesta

有什么方法/想法可以在 Tomcat 中实现 Siesta 代码吗？或者，如何在 Tomcat 中部署午睡示例？

我在项目中有很多 tests.js 文件，必须将其包含在我的代码中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:59:58.850

Siesta 示例是普通的 javascript 文件 - 您可以像部署静态文件一样部署它们。抱歉，我无法提供更多详细信息，因为我对 Tomcat 没有太多经验。

# c# - 使用 C# 插入 Postgresql 后转换异常

> ID：14896290
> 
> 赞同：-1
> 
> 时间：2013-02-15T13:55:45.227
> 
> 标签：c#, .net, postgresql

使用此代码，我在与参数 categoryName 对应的表中搜索 id。如果不存在，我在表中插入值，然后返回键。当被执行`long idCategory = (long) id;`时，有时它会起作用，有时会抛出无效的强制转换异常。为什么？？？

```
 public static long GetCategoryID(String categoryName)
    {
        using (NpgsqlConnection conn = new   NpgsqlConnection(ConfigurationManager.ConnectionStrings["myConn"].ToString()))
        {
            conn.Open();
            NpgsqlTransaction transaction = conn.BeginTransaction();

            String query = "SELECT idcategory FROM category WHERE categoryname = '" + categoryName + "';";

            NpgsqlCommand cmd = new NpgsqlCommand(query, conn, transaction);

            object id = cmd.ExecuteScalar();

            if (id == null)
            {
                query = "INSERT INTO Category (categoryname) VALUES ('" + categoryName +"');";
                cmd = new NpgsqlCommand(query, conn, transaction);
                cmd.ExecuteNonQuery();

                query = "SELECT LASTVAL();";
                cmd = new NpgsqlCommand(query, conn, transaction);
                id = cmd.ExecuteScalar();
            }

            long idCategory = (long)id;

            transaction.Commit();
            conn.Close();

            return idCategory;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:19:36.617

首先，请使用您的调试器并检查`id`发生异常的值，这可能有助于发现问题。

此外，检查表**“类别”中****“idcategory”**`id`列的类型和数据类型。也许这些数据类型之间存在差异，从而导致异常。

 ****也可能是，**'idcategory'**不会自动插入，因此您必须将其包含在您的*INSERT*语句中。（*'SELECT LASTVAL()'*返回*null*吗？）

除此之外，我总是更`long idCategory = Convert.ToInt64(id)`喜欢`long idCategory = (long)id`.

如果要避免异常，请使用`long idCategory = id as long`并检查是否`idCategory == null`****

# tfs - TFS 和存储二进制文件

> ID：14896297
> 
> 赞同：3
> 
> 时间：2013-02-15T13:56:04.847
> 
> 标签：tfs, binary

我们的项目组将我们在 SVN 存储库中工作的项目的二进制文件存储了一年多，最终我们的存储库失控，备份 SVN 存储库一度变得不可能，因为签入的每个二进制文件都是大约 20 MB。

现在我们切换到 TFS，我们不负责备份存储库，我们的 IT 团队负责处理它，因此我们有更多的网络和存储容量用于备份，但我们想决定如何处理二进制文件。据我所知，TFS 存储增量和二进制文件，但增量会很大，但有一天我们可能最终会达到磁盘空间配额，所以我想从一开始就更好地计划事情，我不想得到当解决问题为时已晚时，陷入了糟糕的境地。

我不希望在源代码控制中保留构建，但我们的项目组坚持保留每个二进制文件的副本以重现我们在生产系统中看到的问题，我无法让他们从 TFS 获取源代码，构建它并创建二进制文件，因为根据它们并不简单。

TFS 是否提供更好的构建版本控制方法？如果有人可以分享一些见解，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T16:40:43.990

作为一般规则，您不应将构建输出存储在 TFS 中。有时，您可能希望为许多应用程序使用的通用库存储二进制文件，但诸如 nuget 之类的工具可以解决这个问题。

构建输出有其生命周期的几个阶段，每个阶段都应存储在单独的位置。例如

**构建输出：构建**代码时（通过 TFS / Jenkins / Hudson 等），输出存储在放置位置。此存储应被视为易失性，因为您将生成大量构建，其中许多将被丢弃。

**已传递给测试人员的构建：**这些构建已经通过了一些非常基本的 QA，例如它可以编译，静态代码分析工具很满意，单元测试通过。一旦一个构建被认为足以进行测试，它应该从放置位置移动到另一个区域。这可能是网络共享（非生产，因为可以复制构建）可能有许多构建在项目的生命周期内得到提升，您需要跟踪测试人员在每个环境中使用的版本。

**已通过测试并投入生产的构建：**您的测试团队认为构建具有足够高的质量，可以发布。作为上线过程的一部分，您应该获取已通过测试签署的构建并将其存储在第三个位置。在[ITIL](http://en.wikipedia.org/wiki/ITIL)中，这是一个[权威媒体库](http://en.wikipedia.org/wiki/Definitive_Media_Library)。这可以是一个简单的文件共享，但它应该被视为“生产”并且具有与任何其他生产系统相同的备份和弹性标准。

DML 是您存储生产中的二进制文件的地方（以及相关的配置项，例如安装说明、符号文件等）。生成构建的工具还应该在 TFS 中标记源，以便您可以计算出哪些代码用于生成二进制文件。您的分支策略也将有助于将二进制文件连接到代码。

拥有一个“像生活一样”的环境也是一个好主意，这应该与您的常规开发和测试环境分开。顾名思义，它仅包含已发布到生产环境的代码。这使您能够快速重现生产中的错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:43:02.887

两种可能对您有所帮助的方法：

1.  使用 Team Foundation 构建系统。优点之一是您可以为已完成的构建设置保留期。例如，您可以命令 TFS 存储 10 个最新成功的构建和两个最新失败的构建。您还可以告诉 TFS 无限期地存储某些构建（例如“生产构建”/最终版本）。如果需要，这些二进制文件夹当然也可以在外部备份。

2.  为您的二进制文件使用不同的集合，并使用另一个（不那么频繁的）备份计划。TFS 需要备份整个集合，但通过分离不会像源一样频繁更改的数据，您可以降低备份成本。这当然取决于备份二进制文件所需的频率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T16:38:19.883

您可能希望考虑在 TFS 中创建构建定义，以便为您的项目组提供一个简单的“一键式”按钮，以从特定分支获取源代码，然后构建它并将其拖放到某个位置。这样他们就可以拥有他们的二进制文件，而您不必对它们进行源代码控制。

如果您使用分支策略，在将某些内容推送到生产环境时创建 Release 或 RTM 分支，那么您可以将构建定义指向这些分支，它们可以从 TFS 门户或 Visual Studio 中手动触发它们。

# angularjs - 选项卡内容中的 angular-ui 选项卡加载模板

> ID：14896298
> 
> 赞同：11
> 
> 时间：2013-02-15T13:56:08.300
> 
> 标签：angularjs, angular-ui

我正在使用此控制器在 angular-ui 中使用选项卡：

```
$scope.panes = [
    { title:"Home",      content:"home" , active: true},
    { title:"Settings",  content:"settings"},
    { title:"View",      content:"view"}
]; 
```

这在 html 文件中：

```
<tabs>
    <pane
      active="pane.active"
      heading="{{pane.title}}"
      ng-repeat="pane in panes"
    >
      {{pane.content}}
    </pane>
  </tabs> 
```

但我想将内容设置为模板我该怎么做，我尝试在这个[plunker](http://plnkr.co/edit/VUUPhgN602vHyMm1hEcT?p=preview)中设置 ng-include 代码，但没有奏效。
提前致谢。

# 更新：

如果您找到此解决方案并且您没有使用 angular-bootstrap v0.12，则需要将代码更新[为 v0.13 的新语法，](http://angular-ui.github.io/bootstrap/#/tabs)如下所示：

```
<tabset>
    <tab
      active="pane.active"
      heading="{{pane.title}}"
      ng-repeat="pane in panes"
    >
      <div ng-include="pane.content"></div>
    </tab>
  </tabset> 
```

我已经更新了[plunker](http://plnkr.co/edit/VUUPhgN602vHyMm1hEcT?p=preview)以获得 angular-bootstrap v0.13 的语法。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-15T15:13:27.737

只需将**ng-include**添加为窗格的子项

```
<tabs>
    <pane active="pane.active"
          heading="{{pane.title}}"
          ng-repeat="pane in panes">
        <div ng-include="pane.content"></div>
    </pane>
</tabs> 
```

这样做的原因是，当您在与创建窗格变量的**ng-repeat**相同的元素中使用**ng-include**时，范围变量窗格尚不可用。

 **这是因为**ng-include**的优先级值为0（默认），而 ng-repeat 的优先级为 1000，因此执行顺序为：

1.  ng-包括
2.  ng-重复

请参阅[指令文档](http://docs.angularjs.org/guide/directive)**

# python - 获取lxml中元素的内部HTML

> ID：14896302
> 
> 赞同：33
> 
> 时间：2013-02-15T13:56:30.243
> 
> 标签：python, xpath, lxml

我正在尝试在 Python 中使用 lxml 和 xpath 获取子节点的 HTML 内容。如下代码所示，我想找到每个产品节点的 html 内容。它有没有像product.html这样的方法？

```
productGrids = tree.xpath("//div[@class='name']/parent::*")
for product in productGrids:
    print #html content of product 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-15T14:05:25.630

```
from lxml import etree
print(etree.tostring(root, pretty_print=True)) 
```

您可能会在这里看到更多示例：http: [//lxml.de/tutorial.html](http://lxml.de/tutorial.html)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-15T14:08:41.987

我相信您想使用以下`tostring()`方法：

```
from lxml import etree

tree = etree.fromstring('<html><head><title>foo</title></head><body><div class="name"><p>foo</p></div><div class="name"><ul><li>bar</li></ul></div></body></html>')
for elem in tree.xpath("//div[@class='name']"):
     # pretty_print ensures that it is nicely formatted.
     print etree.tostring(elem, pretty_print=True) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-13T06:24:08.187

`product.text_content()`如果您要查找的是文本内容而不是 HTML，则可以使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-23T07:01:01.160

获取**innerHTML 或 innerXML**
的简单函数 。
直接试试[https://pyfiddle.io/fiddle/631aa049-2785-4c58-bf82-eff4e2f8bedb/](https://pyfiddle.io/fiddle/631aa049-2785-4c58-bf82-eff4e2f8bedb/)
。

**功能**

```
 def innerXML(elem):
    elemName = elem.xpath('name(/*)')
    resultStr = ''
    for e in elem.xpath('/'+ elemName + '/node()'):
        if(isinstance(e, str) ):
            resultStr = resultStr + ''
        else:
            resultStr = resultStr + etree.tostring(e, encoding='unicode')

    return resultStr 
```

**调用**

```
XMLElem = etree.fromstring("<div>I am<name>Jhon <last.name> Corner</last.name></name>.I work as <job>software engineer</job><end meta='bio' />.</div>")
print(innerXML(XMLElem)) 
```

.
**背后的逻辑**

*   首先获取最外层的元素名称，
*   然后获取所有子节点
*   使用将所有子节点转换为字符串`tostring`
*   连接他们

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-06-07T18:26:52.410

在您想要的特定字段（在 chrome 的检查器中）右键单击（复制，复制 xpath）后，您可能会得到如下内容：

```
//*[@id="specialID"]/div[12]/div[2]/h4/text()[1] 
```

如果您想要每个“specialID”的文本元素

```
//*[@id="specialID"]/div/div[2]/h4/text()[1] 
```

您可以选择另一个字段，它将交错结果

```
//*[@id="specialID"]/div/div[2]/h4/text()[1] | //*[@id="specialID"]/div/some/weird/path[95] 
```

示例可以改进，但它说明了这一点：

```
//*[@id="mw-content-text"]/div/ul[1]/li[11]/text() 
```

```
from lxml import html
import requests
page = requests.get('https://en.wikipedia.org/wiki/Web_scraping')
tree = html.fromstring(page.content)
data = tree.xpath('//*[@id="mw-content-text"]/div/ul[1]/li/a/text() | //*[@id="mw-content-text"]/div/ul[1]/li/text()[1]')
print(len(data))
for i in range(len(data)):
    print(data[i]) 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-08-20T14:14:47.327

另一种方法

```
x=doc.xpath("//div[@class='name']/parent::*")
print(map(etree.tostring,x)) 
```

# php - 将变量传递给 XMLHttpRequest - 在 PHP 中收集

> ID：14896305
> 
> 赞同：0
> 
> 时间：2013-02-15T13:56:39.577
> 
> 标签：php, javascript, xmlhttprequest

我有这个使用 POST 传递给 PHP 的 XMLHttpRequest。现在，我还想传递一个附加参数，但 XMLHttpRequest 的构造方式与常规 AJAX 不同。所以我不确定如何在 PHP 中传递多个变量并分别收集它们？

代码如下所示：

```
 xhr.open("POST", $id("upload").action, true);
    xhr.setRequestHeader("X_FILENAME", file.name);
    xhr.send(file); 
```

我也想通过这个：

```
 var dynurl = $("#dynname").text();
    var dynurl = "dynFolder="+dynurl; 
```

这样我就可以像这样在 PHP 中获取它（如果可能的话）：

```
$dynFolder = ($_POST['dynFolder']); 
```

我该怎么做才能传递多个变量？顺便说一句：我以此为起点： [http ://www.sitepoint.com/html5-ajax-file-upload/](http://www.sitepoint.com/html5-ajax-file-upload/)

# jquery - Tablesorter.js 排序时的水平滚动问题

> ID：14896307
> 
> 赞同：1
> 
> 时间：2013-02-15T13:56:48.023
> 
> 标签：jquery, html, knockout.js, cross-browser, tablesorter

我正在使用tablesorter.js，并且我有一个用于tbody 的水平滚动条，并使用jquery 水平滚动标题以及tbody 滚动位置。

我遇到的问题是，当我滚动任意数量然后单击某个字段时，tbody 会在 IE 中推回到其初始 0 scrollLeft(0) 位置，而在 Firefox 中，整个 tbody 会将位置向左移动到滚动的程度距离，它按预期在谷歌浏览器中工作。

这仅在水平滚动后发生。

下面是我用于标题与 tbody 一起滚动的 jquery 绑定：

```
 $("tbody").bind('scroll', function () {
            var myScroll = $(this).scrollLeft();
            $(".fixedHeader").scrollLeft(myScroll);
        }); 
```

我正在使用它来尝试解决问题，但仍然没有运气。

```
 $("#scrollTable th span").bind('click', function() {
            var currentScroll = $(".fixedHeader").scrollLeft();
            $("tbody").scrollLeft(currentScroll); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:40:48.727

这里的问题是我试图将 Knockout.js 与 tablesorter.js 一起使用，但它们发生了冲突。Knockout.js 使用 MVVM 模式，tablesorter 更新排序事件的视图。所以两者都试图控制视图，从而产生不稳定的行为。

# json - 带有对象 ID 转换的 Kendo UI Grid

> ID：14896309
> 
> 赞同：1
> 
> 时间：2013-02-15T13:56:52.737
> 
> 标签：json, datasource, kendo-ui, crud, kendo-grid

我正在尝试使用 KendoUI 通过表 A 中的 JSON（php+mysql 引擎）和这些数据的其中一列的外部数据创建一个网格，从另一个表 B 获取文本标签。

例如，数据是：`idPermission=1`, `user_id=1`, `business_unit_id=1`,`permission=10`

我`user_id=1`想从另一个表（`Users`）中得到他们的名字`1=John Doe`，，`2=Martin Brown`。

我想在网格的可视化中看到“John Doe”而不是 id 1，而“Martin Brown”而不是 id 2。当我已经达到目标的记录的内联（或弹出）编辑时，我有一个选择带有名称而不是 ID 的框！

这是我的代码：

```
 <script>
    $(function() {

        var crudServiceBaseUrl = "http://localhost/ajax/";
        var dataTable = "UsersPermissions"; 

        // This is the datasource of the grid
        dataSource = new kendo.data.DataSource({
            transport: {
                read:  {
                    url: crudServiceBaseUrl + "table_action.php?op=R&tbl="+dataTable,
                    dataType: "json"
                },
                update: {
                    url: crudServiceBaseUrl + "table_action.php?op=U&tbl="+dataTable,
                    type: "POST"
                },
                destroy: {
                    url: crudServiceBaseUrl + "table_action.php?op=D&tbl="+dataTable,
                    type: "POST"
                },
                create: {
                    url: crudServiceBaseUrl + "table_action.php?op=C&tbl="+dataTable,
                    type: "POST"
                }
            },
            batch: true,
            pageSize: 10,
            schema: {
                model: {
                    id: "idPermission",
                    fields: {
                        idPermission: { editable: false, nullable: true },
                        user_id: { validation: { required: true } },
                        business_unit_id: {},
                        permission: { validation: { required: true } },
                    }
                }
            }
        });

        // This is the datasource of the user_id column
        usersSource = new kendo.data.DataSource({
            transport: {
                read:  {
                    url: crudServiceBaseUrl + "table_action.php?op=R&tbl=Users",
                    dataType: "json"
                }
            },
            batch: true,
            schema: {
                model: {
                    id: "idUser",
                    fields: {
                        idUser: {},
                        email: {},
                        password: {},
                        name: {},
                        last_login: {},
                        status: {}
                    }
                }
            }
        });

        $("#grid").kendoGrid({
            dataSource: dataSource,
            pageable: true,
            sortable: {
                mode: "single",
                allowUnsort: false
            },
            reorderable: true,
            resizable: true,
            scrollable: false,
            toolbar: ["create"],
            columns: [
                {                    
                    field: "user_id",
                    editor: function (container, options) {     // This is where you can set other control types for the field.                                                                   
                        $('<input name="' + options.field + '"/>').appendTo(container).kendoComboBox({
                            dataSource: usersSource,
                            dataValueField: "idUser",
                            dataTextField: "name",                            
                        });
                    },
                    title: "ID Utente"
                },
                { field: "business_unit_id", title: "Business Unit"},
                { field: "permission", title: "Permission"},
                { command: ["edit", "destroy"], width: "230px"}],
            editable: "inline"
        });

    });

</script> 
```

我怎样才能在编辑模式和查看模式下做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:26:24.503

为了实现这一点，您必须首先编辑读取操作的查询，查看您的示例数据，它必须是这样的

```
SELECT  a.idPermission, b.name, a.business_unit_id, a.permission 
FROM TABLE_A AS a 
JOIN TABLE_B(users) AS B ON a.user_id=b.user_id; 
```

json 对数据进行编码并发送到客户端

并在您的剑道网格中将列 user_id 更改为 name

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T00:07:38.740

我知道您在询问 HTML/JavaScript 方式，但使用 MVC，这是一种很好的替代方式：

[http://decisivedata.net/kendo-ui-grid-and-entity-framework-code-first-foreign-key-fields/](http://decisivedata.net/kendo-ui-grid-and-entity-framework-code-first-foreign-key-fields/)

# ios - AFHTTPClient 线程安全吗？

> ID：14896312
> 
> 赞同：1
> 
> 时间：2013-02-15T13:57:03.750
> 
> 标签：ios, afnetworking

AFNetworking 文档建议`AFHTTPClient`为每个 Web 服务创建一个通用（单例）子类。在我的应用程序中，可以从多个后台工作线程访问 Web 服务。可以从多个线程安全地调用该单例吗？

或者，更简单地说，可以从多个线程安全地使用 a 的单个实例`AFHTTPClient`，还是每个线程应该有一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:45:48.000

因为 AFHTTPClient 操作是自包含的。由于 AFHTTPClient 在内部使用 NSOperationQueue 并且 NSOperationQueue 文档说：

> 在多个线程中使用单个 NSOperationQueue 对象是安全的，而无需创建额外的锁来同步对该对象的访问。

如果每个 AFHTTPClient 操作由一个线程管理，那么从多个线程使用一个 AFHTTPClient 实例应该是安全的。

# php - 如何在 Amazon API 中按颜色对产品详细信息进行排序/过滤？

> ID：14896317
> 
> 赞同：-1
> 
> 时间：2013-02-15T13:57:19.837
> 
> 标签：php, amazon-web-services, amazon-s3, amazon

我正在使用 Amazon API 集成。我也在发送请求并获取响应。但我需要按**颜色**排序/过滤。我正在使用此代码获取响应值。

```
$request = aws_signed_request('com', array(
'Operation' => 'ItemSearch',
'Keywords' => $keywords,
"SearchIndex" => $search_index,
"MaximumPrice" => $highprice,
"MinimumPrice" => $lowprice,
"Color" => $color,
"Count" => '24',"Brand" => $brand,
"MerchantId" => $MerchantId,
'ResponseGroup' => 'Large,EditorialReview'), $public_key, $private_key, $associate_tag); 
```

在那个编码中，我需要在亚马逊产品中按颜色过滤。这怎么可能？请给我建议..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:09:48.660

根据[AWS 文档](http://docs.aws.amazon.com/AWSECommerceService/latest/DG/USSortValuesArticle.html)，目前不支持按颜色排序

编辑：也不是[按颜色过滤](http://docs.aws.amazon.com/AWSECommerceService/latest/DG/ItemSearch.html)

# java - takePicture 失败并出现与堆相关的错误

> ID：14896320
> 
> 赞同：11
> 
> 时间：2013-02-15T13:57:29.380
> 
> 标签：java, android, android-camera

首先要做的事情：以下错误发生在 2 个不同的 HTC Desires 上，一个带有 2.3.3，一个带有 4.0.4。

尝试调用 .takePicture 时收到以下错误消息：

```
E/MemoryHeapBase(104): error opening /dev/pmem_camera: No such file or directory
E/QualcommCameraHardware(104): failed to construct master heap for pmem pool /dev/pmem_camera
E/QualcommCameraHardware(104): initSnapshot X failed with pmem_camera, trying with pmem_adsp 
```

此错误后永远不会调用相应的 PictureCallback。

我能找到的唯一解释是 a) startPreview 没有被调用；b) 尝试拍照太快（在调用图片回调之前）；c) 未设置正确的用途/权限

我在这里做 a)，在我的 FullscreenActivity的**onResume()中：**

```
//open the camera resource
cam = Camera.open();

Camera.Parameters params = cam.getParameters();
//change Parameters
params.setJpegQuality(100);//best quality
params.setFlashMode(Parameters.FLASH_MODE_TORCH);
//params.setZoom(2);
List<Size> supportedPreviewSizes = cam.getParameters().getSupportedPreviewSizes();
params.setPreviewSize(supportedPreviewSizes.get(0).width, supportedPreviewSizes.get(0).height);
cam.setParameters(params);

SurfaceView sv = (SurfaceView)this.findViewById(R.id.surfaceView1);
SurfaceHolder mHolder = sv.getHolder(); 
mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS); 
mHolder.setSizeFromLayout();
mHolder.addCallback(this);

try {
    cam.setPreviewDisplay(mHolder);
} catch (IOException e) {
    Log.d(TAG, "Error setting camera preview: " + e.getMessage());
}

//Log.d(TAG, "Starting Preview");
cam.startPreview(); 
```

b) 不适用于我，因为我只尝试拍一张照片

c）：使用我的**清单**的一部分：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="8" />
<uses-permission android:name="android.permission.CAMERA"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.FLASHLIGHT"/>
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus"/>
<uses-feature android:name="android.hardware.camera.flash"/> 
```

**一些额外的代码：**

我调用 takePicture 的地方（请注意，此处的记录意味着允许 AsyncTask 在完成后再次调用 takePicture。但不相关，因为错误仍然存​​在而无需调用 AsyncTask）：

```
findViewById(R.id.snap_button).setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {

        recording = !recording;

        Button btn = (Button)findViewById(R.id.snap_button);
        if(recording) {
            //update buttontext
            btn.setText("Stop");
            //start recording by taking a picture
            cam.takePicture(null,null, mPicture);

        } else {
            //update button text
            btn.setText("Start");
        }

    }
}); 
```

**编辑：** 稍微改变我的布局后，终于调用了pictureCallback，我得到了有效的数据（耶），但是错误仍然存​​在。这是我目前的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <SurfaceView
        android:id="@+id/surfaceView1"
        android:layout_width="0dp"
        android:layout_height="369dp"
        android:layout_weight="1.55" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <Button
            android:id="@+id/snap_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Capture" />

        <ProgressBar
            android:id="@+id/progressBar1"
            style="?android:attr/progressBarStyleLarge"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T01:38:23.757

我会说你在步骤中有一些错误。

你应该看看这个例子： [cw-android - camera preview](https://github.com/commonsguy/cw-advandroid/blob/master/Camera/Preview/src/com/commonsware/android/camera/PreviewDemo.java) (line 127+)。我猜你不会等到你的第一次`surfaceChanged`，`SurfaceHolder.Callback`通常你应该调用`startPreview()`方法，因此你的解释

> a) startPreview 没有被调用；
> 
> b) 尝试拍照太快（在调用图片回调之前）；

可能都是正确的。

# java - 使用来自 Java 的摘要式身份验证使用 WCF 服务

> ID：14896324
> 
> 赞同：4
> 
> 时间：2013-02-15T13:57:44.133
> 
> 标签：java, soap, jax-ws, axis2, java-metro-framework

我想在 Java 中创建一个连接到需要摘要式身份验证的 Web 服务的客户端。由于对java和java stack不熟悉，所以研究了一下，遇到了jax-ws、axis2、xcf、metro。我了解到 JAX-WS 是一个 API，JDK 中有一个参考实现，但它缺乏摘要授权支持。

我的第一次尝试是使用axis2，因为Eclipse IDE 中内置了对它的支持。以下代码似乎遵循摘要身份验证工作流程，但不知何故它最终仍然未能通过授权。

```
Service1Stub stub = new Service1Stub();

HttpTransportProperties.Authenticator authenticator = new Authenticator();
List<String> authSchemes = new ArrayList<String>();
authSchemes.add(Authenticator.DIGEST);
authenticator.setAuthSchemes(authSchemes);
authenticator.setUsername("doman user");
authenticator.setPassword("domain password");
authenticator.setPreemptiveAuthentication(true);
Options options = stub._getServiceClient().getOptions();
options.setProperty(org.apache.axis2.transport.http.HTTPConstants.AUTHENTICATE, authenticator);
options.setProperty(org.apache.axis2.transport.http.HTTPConstants.CHUNKED, org.apache.axis2.Constants.VALUE_FALSE);

GetData getData = new GetData();
getData.setValue(25);
GetDataResponse data = stub.getData(getData);
System.out.println(data.getGetDataResult()); 
```

我的第二次尝试是使用 Metro 框架，但我得到了一些与 JAXB 版本相关的错误。

`java.lang.LinkageError: JAXB 2.1 API is being loaded from the bootstrap classloader, but this RI needs 2.2 API.`

我必须使用 JDK 1.6.0_03，所以我猜这是因为 JDK 版本不匹配而发生的，但我也不想使用建议的“认可目录机制”，因为它可能会在部署过程中造成很多麻烦。

我完全迷失了，我正在寻找最简单、最快和最新的方式来使用需要 Java 中的摘要式身份验证的 Web 服务？最好尽可能少的依赖。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T22:09:30.803

Java 类加载是一团糟，抱歉。根本原因是没有像 .NET 世界中那样的强名称，因此运行时链接器会采用类路径中首先出现的任何匹配项，无论这是否是编译代码所针对的库版本。OSGi 系统解决了这个问题，但它从未获得主流采用。

您引用的错误消息：

> java.lang.LinkageError：正在从引导类加载器加载 JAXB 2.1 API，但此 RI 需要 2.2 API。

是非常有用和具体的，大多数时候发生的事情是你盯着一个`NoSuchMethodError`或类似的东西。随着时间的推移，您将学会将这些识别为库版本不匹配。在这种情况下，库作者编写了代码来识别常见错误情况并打印更好的错误消息（祝福他们）。

咆哮，这里有一些信息，我希望能让你走上正轨：

*   Java 类加载器是分层的，分辨率是自下而上的
*   *但是*在层次结构的根部有一个有福的类加载器，负责加载核心运行时库
*   供应商的恶作剧导致很多东西被包含在核心运行时库中，这些东西真的不应该在那里，因为这是在达尔文主义选择过程中占据主导地位的捷径。正如您刚刚发现的那样，JAXB 就是其中之一。JAXB2 实际上相当不错，但它的发展独立于核心运行时，好吧，我们在这里。
*   JDK 和 JRE 安装有一个名为的文件夹`lib\endorsed`，您可以在其中添加需要由根加载程序加载的 JAR 文件，甚至绕过`rt.jar`.

总之，如果您手动将 2.2 版本的 JAXB 库添加到`%JAVA_HOME%\lib\endorsed`，那么它应该覆盖包含的 2.1 版本并且您的 Web 服务客户端将部署。这必须在每个运行 Web 服务客户端的系统上发生，直到 JDK 更新到包含 JAXB 2.2 的 7.x 版本。如果同一个 JVM 正在运行其他基于 JAXB 的应用程序，则这些应用程序可能会或可能不会因此而中断。

是的，这很痛苦。您可以调查的一个切线是故意使用为 JAXB 2.1 构建的旧版 Metro。只要您一定要在 上进行部署`1.6.0_03`，这可能是更好的选择，尽管失去了 Metro 中最近的一些改进。

更新：这里有一篇关于这个主题的[博客文章。](http://weblogs.java.net/blog/ramapulavarthi/archive/2007/01/problems_using.html)它包含一些指向更多信息的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:47:54.420

Metro 框架配置起来太复杂了，而且我发现的文档不完整。所以我已经使用[Apache Axis2](http://axis.apache.org/axis2/java/core/)完成了它。

要遵循的步骤：

*   下载并解压 Apache Axis2 二进制文件。
*   引用所有jar文件
*   转到 /bin 文件夹并使用 wsdl2java 生成客户端代码。

> wsdl2java -S src -uri "wsdl_file_location"

将文件夹下的所有内容复制`src`到您的 java 应用程序并连接到服务，如下所示：

```
//Fictious is the name of the web service
FictiousStub stub = new FictiousStub("servicelocation/fictiousService.php");

HttpTransportProperties.Authenticator authenticator = new Authenticator();
List<String> authSchemes = new ArrayList<String>();
authSchemes.add(Authenticator.DIGEST);
authenticator.setAuthSchemes(authSchemes);
authenticator.setUsername("admin");
authenticator.setPassword("12345");
authenticator.setPreemptiveAuthentication(true);
Options options = stub._getServiceClient().getOptions();
options.setProperty(org.apache.axis2.transport.http.HTTPConstants.AUTHENTICATE, authenticator);
options.setProperty(org.apache.axis2.transport.http.HTTPConstants.CHUNKED, org.apache.axis2.Constants.VALUE_FALSE); 
```

# vim - UltiSnips 和 YouCompleteMe

> ID：14896327
> 
> 赞同：138
> 
> 时间：2013-02-15T13:57:54.510
> 
> 标签：vim, autocomplete, macvim, ultisnips

我在我的 macvim 上安装了 bundle ultisnips 和 youcompleteme。问题是 ultisnips 不起作用，因为 tab 受 ycm 约束。我尝试 put`let g:UltiSnipsExpandTrigger = "<s-tab>"`以便可以使用 shift-tab 触发代码段完成，但由于某些未知原因它不起作用。我可以使用大写作为触发器，但到目前为止我还没有找到这样做的方法。

你们中有人一起使用这两个附加组件吗？我该怎么做才能使 shift-tab 工作？你能推荐另一个触发片段的键吗？

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2014-03-07T15:01:04.343

另一种选择是使用 SuperTab 插件：

```
" if you use Vundle, load plugins:
Bundle 'ervandew/supertab'
Bundle 'Valloric/YouCompleteMe'
Bundle 'SirVer/ultisnips'

" make YCM compatible with UltiSnips (using supertab)
let g:ycm_key_list_select_completion = ['<C-n>', '<Down>']
let g:ycm_key_list_previous_completion = ['<C-p>', '<Up>']
let g:SuperTabDefaultCompletionType = '<C-n>'

" better key bindings for UltiSnipsExpandTrigger
let g:UltiSnipsExpandTrigger = "<tab>"
let g:UltiSnipsJumpForwardTrigger = "<tab>"
let g:UltiSnipsJumpBackwardTrigger = "<s-tab>" 
```

此处 YouCompleteMe 绑定到不同的组合`Ctrl``n`，但随后该组合通过 SuperTab 绑定到制表符。UltiSnips 和 SuperTab 配合得很好，所以你可以直接将 UltiSnips 绑定到 tab，一切都会好起来的。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2013-06-30T09:26:15.370

在 YouCompleteMe 问题跟踪器的[页面](https://github.com/Valloric/YouCompleteMe/issues/36)上尝试此建议。在你的 .vimrc 中：

```
let g:UltiSnipsExpandTrigger="<c-j>" 
```

虽然此设置将使扩展片段**共享在片段中向前跳转的默认映射**，但它模拟了 UltiSnips 帮助标签中提到的 TextMates 的行为。

由于我已将 Caps Lock 键映射到 Ctrl，因此此映射工作得非常顺利。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2013-09-08T16:11:08.910

将以下代码复制到您的 vimrc 中，然后享受。此函数将处理 YCM 和 UltiSnips 之间的所有问题。

```
function! g:UltiSnips_Complete()
    call UltiSnips#ExpandSnippet()
    if g:ulti_expand_res == 0
        if pumvisible()
            return "\<C-n>"
        else
            call UltiSnips#JumpForwards()
            if g:ulti_jump_forwards_res == 0
               return "\<TAB>"
            endif
        endif
    endif
    return ""
endfunction

au BufEnter * exec "inoremap <silent> " . g:UltiSnipsExpandTrigger . " <C-R>=g:UltiSnips_Complete()<cr>"
let g:UltiSnipsJumpForwardTrigger="<tab>"
let g:UltiSnipsListSnippets="<c-e>"
" this mapping Enter key to <C-y> to chose the current highlight item 
" and close the selection list, same as other IDEs.
" CONFLICT with some plugins like tpope/Endwise
inoremap <expr> <CR> pumvisible() ? "\<C-y>" : "\<C-g>u\<CR>" 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-02-16T09:53:35.707

我的 vimrc 里有这个

```
"" YouCompleteMe
let g:ycm_key_list_previous_completion=['<Up>']

"" Ultisnips
let g:UltiSnipsExpandTrigger="<c-tab>"
let g:UltiSnipsListSnippets="<c-s-tab>" 
```

这就是我第一次尝试时所做的，但我用 Ultisnips 拼错了 UltiSnips .. 哦，好吧，最后成功了！

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2014-08-27T17:25:53.367

我个人选择不`<tab>`与 YouCompleteMe 一起使用，而是手动导航。

所以我将此添加到我的`.vimrc`：

```
let g:ycm_key_list_select_completion=[]
let g:ycm_key_list_previous_completion=[] 
```

这只是禁用了`tab`YCM 的密钥。相反，您使用移动键（箭头或[`CTRL-N`](http://vimhelp.appspot.com/insert.txt.html#i_CTRL%2dN)/ [`CTRL-P`](http://vimhelp.appspot.com/insert.txt.html#i_CTRL%2dP)）并使用 选择条目`CR`。UltiSnips 默认使用`tab`.

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-12-04T11:45:46.470

只需将 Michaelslec、Joey Liu 的答案以及我在[这个问题线程](https://github.com/Valloric/YouCompleteMe/issues/36)和[这个人的 vimrc](https://github.com/fatih/dotfiles/blob/master/vimrc)中找到的解决方案放在一起，我现在有了这个解决了几乎所有问题的解决方案。

```
function! g:UltiSnips_Complete()
  call UltiSnips#ExpandSnippet()
  if g:ulti_expand_res == 0
    if pumvisible()
      return "\<C-n>"
    else
      call UltiSnips#JumpForwards()
      if g:ulti_jump_forwards_res == 0
        return "\<TAB>"
      endif
    endif
  endif
  return ""
endfunction

function! g:UltiSnips_Reverse()
  call UltiSnips#JumpBackwards()
  if g:ulti_jump_backwards_res == 0
    return "\<C-P>"
  endif

  return ""
endfunction

if !exists("g:UltiSnipsJumpForwardTrigger")
  let g:UltiSnipsJumpForwardTrigger = "<tab>"
endif

if !exists("g:UltiSnipsJumpBackwardTrigger")
  let g:UltiSnipsJumpBackwardTrigger="<s-tab>"
endif

au InsertEnter * exec "inoremap <silent> " . g:UltiSnipsExpandTrigger     . " <C-R>=g:UltiSnips_Complete()<cr>"
au InsertEnter * exec "inoremap <silent> " .     g:UltiSnipsJumpBackwardTrigger . " <C-R>=g:UltiSnips_Reverse()<cr>" 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-02-24T05:54:13.980

虽然我知道这篇文章有点旧，但我有自己的功能，比上面给出的更优化：

```
function! g:UltiSnips_Complete()
  call UltiSnips#ExpandSnippetOrJump()
  if g:ulti_expand_or_jump_res == 0
    if pumvisible()
      return "\<C-N>"
    else
      return "\<TAB>"
    endif
  endif

  return ""
endfunction 
```

当然，如果您只保留 Joey Liu 提供的设置，然后使用此功能，一切都会完美无缺！

编辑：另外，我使用另一个函数来增加 YouCompleteMe 和 UltiSnips 之间的后退功能。我会告诉你我的意思：

```
function! g:UltiSnips_Reverse()                                                                                               
  call UltiSnips#JumpBackwards()                                                                                              
  if g:ulti_jump_backwards_res == 0        
    return "\<C-P>"                                                                                                           
  endif                                                                                                                       

  return ""                                                                                                                   
endfunction 
```

然后把它放在你的 .vimrc 中：

```
au BufEnter * exec "inoremap <silent> " . g:UltiSnipsJumpBackwardTrigger . " <C-R>=g:UltiSnips_Reverse()<cr>" 
```

以及`let g:UltiSnipsJumpBackwardTrigger="<s-tab>"`和你的设置！

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-09-03T21:02:07.890

根据 Siegfried 的回答，我正在使用以下看起来更自然的方法：

```
let g:ycm_key_list_select_completion = ['<C-j>']
let g:ycm_key_list_previous_completion = ['<C-k>']

let g:UltiSnipsExpandTrigger = "<C-l>"
let g:UltiSnipsJumpForwardTrigger = "<C-j>"
let g:UltiSnipsJumpBackwardTrigger = "<C-k>" 
```

我还在`c-hjkl`其他地方使用绑定（从一个窗格切换到另一个），但这只会在正常模式下，所以没有问题。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-02-15T20:52:39.223

我一起使用它们。默认情况下，YouCompleteMe 绑定`<Tab>`并`<Down>`选择下一个完成项，`<S-Tab>`并`<Up>`选择上一个完成项。您可以使用 [g:ycm_key_list_select_completion](https://github.com/Valloric/YouCompleteMe#the-gycm_key_list_select_completion-option)和[g:ycm_key_list_previous_completion](https://github.com/Valloric/YouCompleteMe#the-gycm_key_list_previous_completion-option)选项更改 YouCompleteMe 绑定。请注意，当从单个字符串更改为字符串列表时，最近将更改这些选项的名称。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-01-11T02:39:44.653

虽然许多答案在这篇文章中运行良好，但我只想说问题是由 YCM 和 UltiSnip 之间的键绑定冲突引起的，而 YCM 默认支持 UltiSnip 片段，它采用默认的 UltiSnip 扩展触发器`<tab>`作为其完成选择键，所以UltiSnip 片段不会被扩展`<tab>`。给他们不同的键绑定将解决问题，我个人使用YCM 和 UltiSnip 的默认`<c-n`值。您可以使用vim 中的 doc 获取更多详细信息。`<c-p>``<tab>``help youcompleteme`

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-06-01T07:28:46.130

我在 YouCompleteMe 插件之后安装了 UltiSnips 插件，所以我认为它们是冲突的，但实际上我有更多干扰：

```
set paste 
```

`.vimrc`如果它存在，请确保将其删除。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-01-14T06:47:48.333

我`;`用来扩展 UltiSnips，这对我来说太棒了

```
let g:UltiSnipsExpandTrigger = ";" 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-08-16T05:18:15.633

我用`kj`. 这就是我的`.vimrc`：

`let g:UltisnipsExpandTrigger="kj"`.

我很少会遇到其中包含`kj`的单词。`k`如果是这种情况，我会在输入和输入后等待几秒钟`j`。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-05-22T22:46:59.690

正如其他人所提到的，将 Cj 映射到 ultisnips 效果很好。
`let g:UltiSnipsExpandTrigger="<c-j>"`

现在，如果你走得更远一点，安装 xcape 并使用
`xcape -e "Shift_L=Control_R|J"`

您释放了仅使用 utlitsnips 的 shift 键的力量。

# c - 在初始化 C 字符串数组时从字符串 const 转换为 char* 的警告

> ID：14896329
> 
> 赞同：0
> 
> 时间：2013-02-15T13:57:57.040
> 
> 标签：c, arrays, string, initialization

我曾经执行以下操作来声明和初始化 C 中的字符串数组：

```
char *myTable[] = {
   "ABC",  "Y", "*",  "*",
   "WXYZ", "Y", "*",  "*",
   "MNO",  "Y", "*",  "*",
   NULL,   NULL,NULL, NULL
}; 
```

NULL 供内部使用。

自从我迁移到 gcc 4.4.6 后，我收到一个警告：

```
abc.cpp:74: warning: deprecated conversion from string constant to ‘char*’ 
```

初始化我的数组的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T14:01:18.277

这是因为您正在尝试删除这些字符串文字的常量性，并且编译器足够体贴地警告您，因为尝试修改存储这些常量字符串文字的内存会导致**未定义的行为**[1]

将您的数组声明为`const char *myTable[]`

* * *

[1]：**C99 标准：6.7.8 初始化§32**：

> 声明`char *p = "abc";`定义`p`了类型''指向''的指针，`char`并将其初始化为指向`char`长度为4的''array of ''类型的对象，其元素使用字符串文字初始化。**如果尝试使用`p`来修改数组的内容，则行为未定义。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T13:58:46.540

尝试使用`const char *`而不仅仅是`char*`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T13:59:37.367

这是因为字符串文字是常量，所以你必须使用`const char *myTable[]`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T14:02:12.983

一个看起来像“hello world”的字符串是一个不可变的字符串常量。你必须声明

```
const char *myTable[] = {
   "ABC",  "Y", "*",  "*",
   "WXYZ", "Y", "*",  "*",
   "MNO",  "Y", "*",  "*",
   NULL,   NULL,NULL, NULL
}; 
```

# ember.js - 将 findQuery 与 FixtureAdapter 一起使用

> ID：14896333
> 
> 赞同：1
> 
> 时间：2013-02-15T13:58:10.143
> 
> 标签：ember.js, ember-data

我在开发应用程序时使用 FixtureAdapter 在本地加载数据。

这些是我的带有夹具数据的页面模型：

```
App.Page = DS.Model.extend({
    name : DS.attr('string'),
    parent : DS.belongsTo('App.Page'),
    subpages : DS.hasMany('App.Page')
});

App.Page.FIXTURES = [{
    id: 1,
    name: 'Home',
    subpages: [ 2, 3, 4 ]
},{
    id: 2,
    name: 'About',
    parent: 1
},{
    id: 3,
    name: 'Contact',
    parent: 1
},{
    id: 4,
    name: 'Search',
    parent: 1
},{
    id: 5,
    name: 'Blog',
    parent: 2
}]; 
```

这是返回我的 Fixture 中所有 Page 对象的代码

```
App.PagesRoute = Ember.Route.extend({
    model: function() {
        return App.Page.find();
    }
}); 
```

这是我的应用商店：

```
App.store = DS.Store.create({
    revision : 11,
    adapter: DS.FixtureAdapter
}); 
```

这很好用，但是如何返回根页面？

当我更改`return App.Page.find()`时，`App.Page.findQuery(App.Page,{ id: 1 })`我收到以下错误： `Uncaught Adapter is either null or does not implement 'findQuery' method`

- 更新 -

当我更改`return App.Page.find()`时，`App.Page.find({ name: 'Home' })`我收到以下错误： `Uncaught TypeError: Cannot call method '_create' of undefined`

我想那是因为我的数据当时没有加载。但我认为 Ember 会为我处理这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-03T13:05:41.100

这适用于 Ember Data 0.13：

```
App.fixtureStore = DS.Store.create({
  adapter: DS.FixtureAdapter.extend({
    queryFixtures: function(fixtures, query, type) {
      return fixtures;
    }
  })
}); 
```

并且在测试时一定要这样做：

```
App.store = App.fixtureStore;
DS.set('defaultStore', App.fixtureStore); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:48:33.860

这是定义商店的正确方法：

```
App.Store = DS.Store.extend({
    revision : 11,
    adapter: DS.FixtureAdapter
}); 
```

请注意**Store**中的**extend**而不是**create**和大写字母**S。**有关详细信息，请参阅[Ember 指南](http://emberjs.com/guides/models/defining-a-store/)。

# jquery - jQuery Mobile - 页面和同一页面 id 链接

> ID：14896335
> 
> 赞同：1
> 
> 时间：2013-02-15T13:58:11.000
> 
> 标签：jquery, jquery-mobile

提前感谢您解决问题...

请找到以下链接... [http://jsfiddle.net/yesvin/KrKvb/](http://jsfiddle.net/yesvin/KrKvb/)

和代码...

```
<!DOCTYPE html>
<html>
    <head>
        <title>Jquery Mobile</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <script>
            $(function() {
                $('ul.tabs-v, ul.tabs').each(function() {
                    var $active, $content, $links = $(this).find('a');
                    $active = $($links.filter('[href="'+location.hash+'"]')[0] || $links[0]);
                    $active.addClass('ui-btn-active');
                    $content = $($active.attr('href'));

                    $links.not($active).each(function() {
                        $($(this).attr('href')).hide();
                    });

                    $(this).on('click', 'a', function(e) {
                        //alert($(this));
                        $active.removeClass('ui-btn-active');
                        $content.hide();
                        $active = $(this);
                        $content = $($(this).attr('href'));

                        $active.addClass('ui-btn-active');

                        $content.show();

                        e.preventDefault();
                    });
                });
            });

        </script>
    </head>
    <body>
        <div data-role="page">

            <div data-role="header" class="hea"  data-position="fixed">
                <h2>Header</h2>
            </div>

            <div data-role="content">
                <div style="width: 20%; float: left;">
                    <ul class="tabs-v" data-role="listview">
                        <li><a href="#tab1"> <img src="http://jquerymobile.com/demos/1.2.0/docs/lists/images/album-bb.jpg" /> <h3>Link 1</h3> </a></li>
                        <li><a href="#tab2"> <img src="http://jquerymobile.com/demos/1.2.0/docs/lists/images/album-bb.jpg" /> <h3>Link 2</h3> </a></li>
                        <li><a href="#tab3"> <img src="http://jquerymobile.com/demos/1.2.0/docs/lists/images/album-bb.jpg" /> <h3>Link 3</h3> </a></li>
                    </ul>
                </div>

                <div style="width: 77%; float: right;">
                    <div id="tab1">Tab 1 Content</div>
                    <div id="tab2">Tab 2 Content</div>
                    <div id="tab3">Tab 3 Content</div>
                </div>

            </div>

            <div data-role="footer" data-position="fixed">
                <div data-role="navbar">
                    <ul>
                        <li><a href="#tab1">One</a></li>
                        <li><a href="#tab2">Two</a></li>
                        <li><a href="#tab3">Three</a></li>
                    </ul>
                </div>          
            </div>

        </div>      
    </body>
</html> 
```

我有一个带有页眉、页脚、内容左、右列和导航栏的 jquery 移动选项卡式模板。在这里，左列 ul li 工作正常，可以使用 jquery 函数显示 id 引用的选项卡内容（ui-btn-active 也可以正常工作）。

在 jquery mobile/ 的导航栏组件中同样不起作用，或者如果它起作用，当前按钮不会被 ui-btn-active 类替换。

因此，我不需要更改底部导航栏的页面。

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:07:13.270

它将以这种方式工作，事实上，这就是它对我的工作方式。

首先，您必须将类**选项卡**`<ul>`添加到**navbar**。

```
<div data-role="navbar">
  <ul class="tabs"> 
```

然后，复制 ui-btn-active CSS 样式。

```
<style type="text/css">
.ui-btn-active-custom { /* any name */
border:1px solid #2373a5;
background:#5393c5;
font-weight:bold;
color:#fff;
cursor:pointer;
text-shadow:0 1px 1px #3373a5;
text-decoration:none;
background-image:-webkit-gradient(linear,left top,left bottom,from( #5393c5 ),to( #6facd5 ));
background-image:-webkit-linear-gradient( #5393c5,#6facd5 );
background-image:-moz-linear-gradient( #5393c5,#6facd5 );
background-image:-ms-linear-gradient( #5393c5,#6facd5 );
background-image:-o-linear-gradient( #5393c5,#6facd5 );
background-image:linear-gradient( #5393c5,#6facd5 );
font-family:Helvetica,Arial,sans-serif
}
</style> 
```

在您的 JS 代码中，将所有内容替换`ui-btn-active`为`ui-btn-active-custom`

自己试试吧：http: [//jsfiddle.net/KrKvb/7/](http://jsfiddle.net/KrKvb/7/)

# django - django：通过具有基于类的视图的复杂应用程序路由用户

> ID：14896338
> 
> 赞同：0
> 
> 时间：2013-02-15T13:58:21.193
> 
> 标签：django, django-class-based-views

我是 django 和 python 的高级初学者。我正在编写一个应用程序来处理会议的注册和摘要提交，并且我正在尝试使用基于类的视图。用户会收到一个电子邮件链接，该链接在 url 中包含他们的注册码。从这个 url 开始，用户会浏览一系列收集所有必要信息的视图。

复杂性来自这样一个事实，即用户经常在中途停下来，然后想在几天或几周后完成该过程。这意味着他们可能会从当前页面继续，或者他们可能只是单击该原始链接。此外，几周后他们可能会错过某些截止日期，例如，他们不能再提交摘要（但他们仍然可以注册）。在此过程中，他们已经选中或取消选中了各种选项，这些选项也会影响他们应该通过应用程序采取的路径。

我的问题是：将确定当前是否允许用户查看该页面的逻辑放置在哪里的最佳位置，如果不允许，则将它们也重定向到最佳 url？我想我会创建一个自定义视图类，例如，覆盖调度方法以包括全局检查（例如，会议注册是否开放？），然后子类可以添加额外的检查（例如，用户是否输入了所有必要的信息她的摘要？）。我遇到的问题是检查以错误的顺序运行（我希望先运行基类检查）。然后我开始研究自定义视图装饰器或自定义中间件。在这一点上，我意识到我可以使用一些专家建议来了解采取哪种方法。（如果重要，我没有使用 django 身份验证系统。）提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:37:59.413

也许[表单向导](https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/)可以帮助您管理查看顺序。

一般来说， [django graybeards](https://docs.djangoproject.com/en/1.0/topics/db/models/#model-methods)主张将逐行逻辑保留在 中，将逐`Models`表逻辑保留在 中`Managers`，因此将复杂的视图逻辑保留在主视图类中似乎是合适的。

向导类可以帮助维护视图的顺序，但是要恢复过时的会话，您可能需要进行一些模型保存（这可能很快变得过于复杂）或一些 cookie 处理。

以往遇到类似情况时，我采取最简单的路线，将*用户*注册和用户想要执行的任务（事件注册）分开。用户注册*一次*，但如果他们弄乱了事件注册，他们只需要在以后重新登录并再次注册（他们的麻烦 - 不是你的！）。

# java - 继承，动态绑定，超类中的构造函数。爪哇

> ID：14896340
> 
> 赞同：1
> 
> 时间：2013-02-15T13:58:28.893
> 
> 标签：java

为什么第一个 System.out.println 不打印值 10？它打印一个 0。首先创建一个新的子对象，它调用父对象中的构造函数。由于动态绑定，Parent 中的构造函数调用 Child 中的查找。那么为什么在 Child 中查找返回零而不是十呢？

```
public class Main332 {
    public static void main(String args[]) {

        Child child = new Child(); 
        System.out.println("child.value() returns " + child.value());//Prints 0

        Parent parent = new Child();
        System.out.println("parent.value() returns " + parent.value());//Prints 0

        Parent parent2 = new Parent();
        System.out.println("parent2.value() returns " + parent2.value());//Prints 5
    }
}

public class Child extends Parent { 
    private int num = 10; 

    public int lookup() {
        return num;
    }
}

public class Parent {
    private int val;

    public Parent() {
        val = lookup();
    }

    public int value() {
        return val;
    }

    public int lookup() {
        return 5;// Silly
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:00:53.310

in的字段初始值设定项`num`在构造函数调用 in*之后*`Child`执行。因此返回 0，因此设置为 0。*`Parent``lookup()``Parent.val`*

 *要观察这一点，请更改`Child.lookup()`以打印出它即将返回的内容。

有关创建新实例时的执行顺序的详细信息，请参阅[Java 语言规范的第 12.5 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)*

# eclipse - 通过 plugin.xml 定义的排序菜单

> ID：14896346
> 
> 赞同：2
> 
> 时间：2013-02-15T13:58:55.457
> 
> 标签：eclipse, eclipse-rcp

我通过 plugin.xml 将某些子菜单添加到菜单中。现在我希望这些子菜单按字母顺序排列，而不管它们在 plugin.xml 中定义的顺序如何

有没有办法做到这一点？

Eclipse 使用 Window -> Show View 执行类似的操作。您可以看到按字母顺序排列的视图的所有子菜单。

谢谢，沙尚克

# php - php在ie上获取数据编码

> ID：14896349
> 
> 赞同：0
> 
> 时间：2013-02-15T13:59:17.807
> 
> 标签：php, encoding, get

我正在使用 javascript 函数将一些表单数据（使用 get）发送到弹出窗口。两个页面都有 utf-8 编码。但弹出显示特殊值错误（如 �）。此问题仅在 Internet Explorer 上发生。当我将编码更改为 windows-1254 时，它返回正常。页面编码应该保持不变。使用 mb_detect_encoding() 检查 $_GET 数据；它给出了 UTF-8 结果。知道什么会导致这种情况吗？

```
function NewCustomer(field1,field2,field3){
OpenPopup('Customer/New.php?field1='+ field1 +'&field2='+ field2 +'&field3='+ field3 +'', 'NewCustomer', 'channelmode=0, directories=0, fullscreen=0, width=550, height=460, location=0, menubar=0, resizable=0, scrollbars=1, status=0, titlebar=1, toolbar=0', false);
}

echo $_GET['fieldname'];

 function OpenPopup( url, winname, features )
   {
    if(winname==''){
     window.open( url, winname, features, false );
     return;
    }
    if ( !findWindow( url, winname, features ) )
    {
     var handle = window.open( url, winname, features, false );
     if ( handle != null ) handle.focus();
    }
   }

   function findWindow( url, winname, features )
   {
    var handle = window.open( '', winname, features, false );
    if ( handle != null )
    {
     if (( handle.location != 'about:blank' ) && ( handle.location != '' ))
     {
      handle.focus();
      return true;
     }
    }
    return false;
   } 
```

**编辑**

我用 iconv 修复了 IE 问题。但现在，问题开始出现在其他浏览器上。

```
iconv('windows-1254', 'UTF-8', $_GET['field']); 
```

**最后编辑**

这是最终的解决方案。

```
<?php if(isset($_GET['fieldname'])) {
preg_match('/MSIE (.*?);/', $_SERVER['HTTP_USER_AGENT'], $matches);
if (count($matches)>1){ echo iconv('windows-1254', 'UTF-8', $_GET['fieldname']); } else { echo $_GET['fieldname']; }
 } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:07:37.080

检查文件编码。一些文本编辑器（如 Notepad++）以该编码存储文件代码内容。

我认为 javascript 文件不是 UTF-8 编码的。

如果它适用于除 IE 之外的所有浏览器，您将不会下地狱。责怪微软并忘记 Internet Explorer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:08:27.500

在你的 $_GET var 中，使用这个：

```
echo utf8_encode($_GET['my_var']); 
```

或者

```
echo utf8_decode($_GET['my_var']); 
```

更新：我测试过，看起来不错

```
echo iconv("UTF-8", "ISO-8859-1//TRANSLIT", $field); 
```

我希望它有帮助；）

萨卢多斯。

# android - Android Asynctask 发布到服务器错误

> ID：14896352
> 
> 赞同：0
> 
> 时间：2013-02-15T13:59:29.660
> 
> 标签：android

我是 android 新手，正在开发一个 android 应用程序，该应用程序在单击按钮时将搜索项（由用户提供到 EditText）发布到服务器，该项目被发布到服务器。我正在使用 Asynctask 类。我有错误findViewById（未定义）。我的问题是在哪里放置 onclick 方法和视图的引用。这里是代码

```
public class Server_Post extends AsyncTask<String, Void, String> {

  private static final int REGISTRATION_TIMEOUT = 3 * 1000;
    private static final int WAIT_TIMEOUT = 30 * 1000;
    private final HttpClient httpclient = new DefaultHttpClient();
     final HttpParams params = httpclient.getParams();
      HttpResponse response;

      Button Submit = (Button) findViewById(R.id.submitButton);
      EditText textvalue = (EditText)findViewById(R.id.searcheditText);

      //Onclick Listener
      Submit.setOnClickListener(onClickListener) 
      private OnClickListener onClickListener = new OnClickListener() {
          @Override
          public void onClick(final View v) {
              switch(v.getId()){
                  case R.id.submitButton:
                break;
          }
      };

    protected void onPreExecute() {
    //any code    

    }

@Override
protected String doInBackground(String... arg0) {
    String URL = "url";
    String username = "abc";
    String password = "xyz";

    try {
        HttpConnectionParams.setConnectionTimeout(params, REGISTRATION_TIMEOUT);
        HttpConnectionParams.setSoTimeout(params, WAIT_TIMEOUT);
        ConnManagerParams.setTimeout(params, WAIT_TIMEOUT);

        HttpPost httpPost = new HttpPost(URL);

        //Any other parameters you would like to set
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("username",username));
        nameValuePairs.add(new BasicNameValuePair("password",password));
        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 

        //Response from the Http Request
        response = httpclient.execute(httpPost);

        StatusLine statusLine = response.getStatusLine();
        //Check the Http Request for success
        if(statusLine.getStatusCode() == HttpStatus.SC_OK){
            ByteArrayOutputStream out = new ByteArrayOutputStream();
            response.getEntity().writeTo(out);
            out.close();

        }
        else{
            //Closes the connection.
            Log.w("HTTP1:",statusLine.getReasonPhrase());
            response.getEntity().getContent().close();
            throw new IOException(statusLine.getReasonPhrase());
        }

    } catch (ClientProtocolException e) {

    } catch (IOException e) {

    }catch (Exception e) {

    }
    return null;

}

protected void onCancelled() {

}

protected void onPostExecute(String content) {

}

private void connecttopostdata() {  
    Server_Post task = new Server_Post();  
    task.execute(textvalue.getText().toString());  
  }

 } 
```

响应在 xml 中，我还想在 listviews 上显示响应。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:07:49.163

您需要一个活动类的上下文才能从 findviewbyid 获取按钮。创建一个构造函数并从那里找到您的视图。喜欢..

```
// give context from where you are calling your AsyncTask
 public Server_Post (Context context)
{
    Button Submit = (Button) context.findViewById(R.id.submitButton);
    EditText textvalue = (EditText)context.findViewById(R.id.searcheditText);
} 
```

# git - 自 1.7.9 版以来，git 在代理后面不起作用

> ID：14896359
> 
> 赞同：10
> 
> 时间：2013-02-15T13:59:54.350
> 
> 标签：git, proxy

自 git 1.7.9 以来，我无法通过代理服务器克隆、获取或推送到存储库。它适用于版本 1.7.8，但较新的版本，包括最新版本，会抛出此错误：

```
error: Failure when receiving data from the peer while accessing http://github.com/...
fatal: HTTP request failed 
```

我在 git config 中设置了 http.proxy 属性，这在 1.7.8 中就足够了。我能够运行新版本的 git 的唯一方法是使用 cntlm。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T19:05:53.077

我在代理后面使用 git1.7.9+（最近是 1.8+）进行克隆。

但是，我没有在*git*配置中设置 http.proxy。
我会在 Windows 或 Unix 上设置环境变量：

```
HTTP_PROXY=http://user:password@proxy.fr.domain:80/
HTTPS_PROXY=http://user:password@proxy.fr.domain:80/
NO_PROXY=*.domain 
```

我克隆/推送/拉取 GitHub 存储库没有任何问题。

# r - 从R中的函数绘制多个对象

> ID：14896360
> 
> 赞同：0
> 
> 时间：2013-02-15T13:59:59.393
> 
> 标签：r, quantmod

我正在尝试一个函数来绘制`quantmod`图表和一些矩形。从 cmd 运行时它工作正常，但是当包装在一个函数中时，要么只显示矩形，要么只显示图形，或者有时两者都不显示。示例代码：

```
f1 <- function() { 
require(quantmod)
s <- get(getSymbols('PRGO'))["2012::"]
chart_Series(s)
u<-par("usr")
d<-data.frame(Buttom=c(100,90),Top=c(110,95))
rect(u[1],d[,'Buttom'],u[2],d[,'Top'],col=rgb(1,0,0,alpha=0.2),border=0)
} 
```

*   您可能需要运行 plot.new()
*   如果您从函数返回图表对象并打印它，它可以工作，但我还没有找到返回图表对象和矩形的方法（矩形也是一个列表）
*   我知道函数在临时环境中工作 - 我还没有找到在全局环境中运行函数的方法。我不知道如何`assign`在`chob`全球环境中调整。
*   该功能最终将完成所有绘图 - 我想添加更多线条、标签等。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:06:43.910

如果你把你的`chart_Series()`内部包裹起来`print`，它似乎可以工作？

```
f1 <- function() { 
  require(quantmod)
  s <- get(getSymbols('PRGO'))["2012::"]
  print(chart_Series(s))
  u<-par("usr")
  d<-data.frame(Buttom=c(100,90),Top=c(110,95))
  rect(u[1],d[,'Buttom'],u[2],d[,'Top'],col=rgb(1,0,0,alpha=0.2),border=0)
}

f1() 
```

![在此处输入图像描述](../Images/4c8382e75b1b892c43e345d87c128e48.png)

# cocos2d-iphone - 重启游戏后cocos2d中的进度条消失

> ID：14896363
> 
> 赞同：0
> 
> 时间：2013-02-15T14:00:05.590
> 
> 标签：cocos2d-iphone, progress-bar

我创建了一个问答游戏，它实现了一个时间栏。第一次玩没问题，但是如果在游戏结束后，玩家点击“重新开始”，游戏可以正常进行，但时间条消失了！

这是我从 GameOverLayer 到 Game 的代码：

```
-(void) restart {
    [[CCDirector sharedDirector] replaceScene:[HelloWorldLayer node]];
} 
```

这里创建一个新问题的功能

```
-(void)creaDomanda{

    //bar
    CCProgressFromTo *to1 = [CCProgressFromTo actionWithDuration:MaxTime from:100 to:0];
    bar = [CCProgressTimer progressWithFile:@"barra.png"];
    bar.type = kCCProgressTimerTypeHorizontalBarLR;
    [bar setPosition:ccp(size.width - 250 , size.height - 18)];

    int randomValue =  (arc4random() % 4) + 1; 
    NSString *stringa = [NSString stringWithFormat:@"Domanda%i", randomValue];
    dictionary = [plistData objectForKey:stringa];
    domanda = [dictionary valueForKey:@"Titolo"];
    labelDomanda = [CCLabelTTF labelWithString:domanda fontName:@"Marker Felt" fontSize:24];
    labelDomanda.position =  ccp( size.width /2 , 400 );
    [self addChild: labelDomanda];
    int rispostaEsatta = [[dictionary valueForKey:@"Soluzione"] intValue];
    menu = [CCMenu menuWithItems:nil];
    for (int i = 1; i<5;i++)
    {
        if(rispostaEsatta == i){
item = [CCMenuItemFont itemFromString:[dictionary valueForKey:
                                                               [NSString stringWithFormat:@"Risposta%i",i] ]
                                                       target:self selector:@selector(corretto)];
        }else{
            item = [CCMenuItemFont itemFromString:[dictionary valueForKey:
                                                               [NSString stringWithFormat:@"Risposta%i",i] ]
                                                       target:self selector:@selector(sbagliato)];
        }
        [menu addChild:item];
    }
//[..]
    [self addChild:menu];
    [self addChild:bar];
    [bar runAction:to1];
} 
```

毕竟，这里有一个正确/错误的方法（类似），它创建了一个新问题：

```
-(void)sbagliato{
    CCLOG(@"Sbagliato");

    if (menu) [self removeChild:menu cleanup:YES];
    if (labelDomanda) [self removeChild:labelDomanda cleanup:YES];
    if (bar) [self removeChild:bar cleanup:YES];

    labelRisultato = [CCLabelTTF labelWithString:@"Hai sbagliato!" fontName:@"Marker Felt" fontSize:24];
    [labelRisultato setColor:ccc3(255, 1, 1)];
    labelRisultato.position = ccp(size.width / 2, 280);

    [self addChild:labelRisultato];
    [self gameOver:2 punteggio:0];
    // Richiamiamo il metodo per eliminare la label dopo 0,3 secondi
    [self performSelector:@selector(eliminaLabel) withObject:nil afterDelay:0.5];

    increment = increment - 20;
    [pointLabel setString: [NSString stringWithFormat: @"Punti: %i", increment]];

    // new question
    [self performSelector:@selector(creaDomanda) withObject:nil afterDelay:0.5];
} 
```

谁能向我解释一下为什么当我重新启动时间栏消遣器时？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:32:43.683

我最好的猜测：

CCProgressFromTo 操作仍在运行。由于进度下降到 0，CCProgressTimer 最终不再显示它的任何部分。即使您在进度计时器上运行另一个 CCProgressFromTo 操作，这也可能会继续。

解决方案：确保在运行另一个动作之前停止任何正在运行的 CCProgressFromTo 动作。

如果这不能解决它，那么我想 CCProgressTimer 需要通过将百分比设置回 100 来重置。

# javascript - 包装一个重新定义“this”的 JavaScript 回调

> ID：14896365
> 
> 赞同：3
> 
> 时间：2013-02-15T14:00:09.367
> 
> 标签：javascript

我知道`call`和`apply`使用 JavaScript，但我目前遇到以下情况。

我正在使用**Benchmarkjs**，它的 API 定义如下：

```
.on(eventType, listener) 
```

所以我会这样做，例如：

```
/* Register the onStart callback */
suite.on('start', onStart); 
```

我的`onStart`函数将被调用，以便`this === suite`.

我该怎么做才能定义其中`arguments`之一`onStart`？

我的代码是这样的：

```
foo = function() {
   this.suite.on('start', this.onStart);
} 
```

我希望我的`onStart`函数能够引用`foo`.

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:04:39.430

您可以调用`Function.prototype.bind`以创建部分应用程序/咖喱函数。

`.bind()`将*上下文*作为第一个参数，所有后续传入的参数将用作绑定函数调用的*形式参数*。

```
suite.on( 'start', this.onStart.bind( this, foo ) ); 
```

引用`foo`现在将`onStart()`作为第一个参数提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:02:48.157

您可以通过`this`将`onStart`其包装在函数中来传递。

```
foo = function() {
    this.suite.on('start', function(arguments){onStart(arguments, this)});
} 
```

我更喜欢传递它而不是使用`bind`，因为`bind`IE 8 和更低版本不支持它。

# three.js - 用比例尺分割世界位置

> ID：14896367
> 
> 赞同：3
> 
> 时间：2013-02-15T14:00:24.040
> 
> 标签：three.js

我正在尝试在片段着色器中获取世界位置。我目前在顶点着色器中使用它：

```
"varying vec3 vPosition;", 
```

...

```
"vPosition = modelViewMatrix * position;", 
```

**编辑**

变量 vPosition 被传递到片段着色器中。本质上，我试图在鼠标所在的地方用红色圆圈绘制网格。然后在片段着色器中使用 vPosition 来确定是否需要绘制网格。

这很好用，但当我缩放网格时就不行了。请看下面的图片：

没有缩放： ![在此处输入图像描述](../Images/72d74acb0e561a4f6b7a46b0b57c690a.png)

使用 2X 缩放： ![在此处输入图像描述](../Images/7a1c12b90616e0c686a4a02231ec6785.png)

我不完全了解整个管道。我了解了大部分内容 - 但我猜我尝试的内容不正确......？

**编辑** 这是片段着色器中网格绘制代码的样子：

```
// Draw the ring and grid on the terrain for when we are editing it.
"if (show_ring == true){",
   "float distance = sqrt((vPosition.x - ring_center.x) * (vPosition.x - ring_center.x) + (vPosition.z - ring_center.z) * (vPosition.z - ring_center.z));",
   "if (distance < ring_radius + ring_width / 2.0 && distance > ring_radius - ring_width / 2.0) {",
   "gl_FragColor.r += ring_color.r;",
   "gl_FragColor.b += ring_color.b;",
   "gl_FragColor.g += ring_color.g;",
   "gl_FragColor.a += ring_color.a;",
   "gl_FragColor *= 2.0;",
   "gl_FragColor = normalize(gl_FragColor);",                   
"}",

// Grid overlay
"float gridDist = ring_radius / 4.0 * 3.0;",
"if (distance < gridDist ) {",
   "float tiles = 1.0 / 100.0;",
   "float val = mod(vUv.y, tiles);",
   "if (mod(vUv.x, tiles) < .001 || mod(vUv.y, tiles) < .001) {",
   "gl_FragColor = gl_FragColor * (distance / gridDist);",
   "gl_FragColor.a = 1.0;",
"}", 
```

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:52:27.250

我能够通过使用“worldPosition”来实现这一点：

"vec4 worldPosition = modelMatrix * vec4(位置, 1.0);",

# java - 如何在数据库中插入唯一值

> ID：14896371
> 
> 赞同：1
> 
> 时间：2013-02-15T14:00:43.410
> 
> 标签：java, android, sql

我正在使用以下方法在数据库中插入名称

```
 public void insertContact(String name) 
 {
 ContentValues newContact = new ContentValues();
 newContact.put("name", name);

 open(); // open the database
 database.insert("contacts", null, newContact);
 close(); // close the database
 } // end method insertContact 
```

我可以做一些检查来停止数据重复吗？我的意思是说，如果数据库中已经存在名称，则不应插入新名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:05:19.490

最简单的方法是在表的数据库中为列上的唯一值添加规则。然后，如果您尝试添加重复值，则会引发异常。

请参阅此示例以设置唯一规则：[http ://www.w3schools.com/sql/sql_unique.asp](http://www.w3schools.com/sql/sql_unique.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:06:02.740

MS SQL 中的语法：

```
ALTER TABLE [tablename] ADD CONSTRAINT my_const_1 UNIQUE( [columnname] ); 
```

# c# - 如何使用 c#.net 将行索引用作数据集索引

> ID：14896373
> 
> 赞同：0
> 
> 时间：2013-02-15T14:00:51.953
> 
> 标签：c#, ado.net

我是 c# 的新手，我正在做一个项目，我正在尝试遍历包含不同值的数据表，并且我的数据库的歌曲 ID 为：1,2,3,4,6,8,9,10 但数据集将此值作为分别为 0,1,2,3,4,5,6,7...谢谢

```
String sql = "select  title, song_id from up_song where Song_type='Mp3 Tracks' ";
    adpt = new SqlDataAdapter(sql, cn);
    ds = new DataSet();

    adpt.Fill(ds, "title");
    var maxvalue = ds.Tables["title"].AsEnumerable().Max(x => x.Field<int>("song_id"));
    var minvalue = ds.Tables["title"].AsEnumerable().Min(x => x.Field<int>("song_id"));
    for (i =maxvalue; i >= minvalue; --i)
        {
            try
            {
                hyperlink[i] = new HyperLink();
                hyperlink[i].ID = "hyperlink" + i;
                hyperlink[i].Text = ds.Tables["title"].Rows[i].ItemArray[0].ToString();
                hyperlink[i].NavigateUrl = "Downloadpage.aspx";
                hyperlink[i].ForeColor = System.Drawing.Color.White;
                Panel1.Controls.Add(hyperlink[i]);
                Panel1.Controls.Add(new LiteralControl("<br>"));
                HttpCookie coo = new HttpCookie("song");
                coo["sogtit"] = ds.Tables["title"].Rows[i].ItemArray[0].ToString();
                Response.Cookies.Add(coo);
            }
            catch (Exception ex)
            {
                Response.Write(ex.Message);
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:10:53.700

您正在使用循环变量来访问`DataTable`此处的行：

```
coo["sogtit"] = ds.Tables["title"].Rows[i].ItemArray[0].ToString(); 
```

但是该变量是从您`min`的.`max``song_id`

我根本不知道你为什么需要这些值，你为什么不循环`DataRows`：

```
foreach(DataRow row in ds.Tables["title"].Rows)
{
    // ...
    int songID = row.Field<int>("song_id")
    Hyperlink hl = new HyperLink(); // you don't need the array of hyperlinks neither
    hl.ID = "hyperlink" + songID;
    string title = row.Field<string>("title);
    hl.Text = title;
    coo["sogtit"] = title;
    Panel1.Controls.Add(hl);
    // ...
} 
```

**更新**

> 我想访问那些最新的上传歌曲，所以我使用 for 循环和索引作为最小值和最大值。我的意思是要访问最新上传的至少 6 首歌曲

您可以使用 Linq 获取最近上传的 6 首歌曲：

```
var last6Uploaded = ds.Tables["title"].AsEnumerable()
    .OrderByDescending(r => r.Field<int>("song_id"))
    .Take(6);

foreach(DataRow row in last6Uploaded)
{
    // ...
} 
```

请注意，您应该使用`DateTime`字段而不是主键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:08:37.323

数组索引 ( `i`) 和 song_id 的值*应该*没有任何关系。如果你的 song_id 从 1000 开始呢？或者，如果您的数据库按 song_id 降序索引？

# javascript - 按钮上的简单 onclick 功能不起作用

> ID：14896376
> 
> 赞同：0
> 
> 时间：2013-02-15T14:01:00.127
> 
> 标签：javascript, jquery, css

单击按钮时，我正在尝试更改按钮的类别。为什么我的不工作：看我的[小提琴](http://jsfiddle.net/VUmza/20/)

HTML：

```
<button id="repeatMon" onclick="changeStyle()"><span> Mon </span></button> 
<br/>
<button id="repeatTues" data-bind="checked: repeatTues" onclick="changeStyle()"><span> Tues </span></button> 
<br/>
<button id="repeatWeds" data-bind="checked: repeatWeds" onclick="changeStyle()"><span> Weds </span></button> 
<br/>
<button id="repeatThurs" data-bind="checked: repeatThurs" onclick="changeStyle()"><span> Thurs </span></button> 
<br/>
<button id="repeatFri" data-bind="checked: repeatFri" onclick="changeStyle()"><span> Fri </span></button> 
<br/>
<button id="repeatSat" data-bind="checked: repeatSat" onclick="changeStyle()"><span> Sat </span></button> 
<br/>
<button id="repeatSun" data-bind="checked: repeatSun" onclick="changeStyle()"><span> Sun </span></button> 
<br/> 
```

CSS：

```
button{
    width: 60px;
    height: 35px;
    border-radius: 0px;
    color: #cfcfcf;
    background: #0a4a58;
}

.active{
    color: #fff;
    background: ##02AEFF;
} 
```

jQuery：

```
function changeStyle(){
    $(this).toggleClass('active');
} 
```

谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T14:02:49.430

您正在使用 jQuery，删除内联 JS 并以正确的方式进行操作：

```
$('[id^="repeat"]').on('click', function() {
    $(this).toggleClass('active');
}); 
```

[**小提琴**](http://jsfiddle.net/VUmza/27/)

要同时在一个按钮上切换活动状态：

```
$('[id^="repeat"]').on('click', function() {
    $(this).toggleClass('active').siblings().removeClass('active');
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T14:02:20.397

```
<button id="repeatSun" data-bind="checked: repeatSun" onclick="changeStyle(this)"><span> Sun </span></button> 

function changeStyle(btn){
    $(btn).toggleClass('active');
} 
```

* * *

或者，更好的方法是使用 jQuery添加[单击事件处理程序。](http://api.jquery.com/click/)

将相同的类添加到所有按钮并将单击事件处理程序应用于该类：

```
<button id="repeatSun" data-bind="checked: repeatSun" class="changestyle"><span> Sun </span></button>

$(".changestyle").click(function(){
   $(".changestyle").removeClass('active');
   $(this).addClass('active');
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T14:12:18.473

您正在使用 jquery，因此您不必重复自己。从按钮中删除`onclick`并使用 jquery

```
<button id="repeatMon"><span> Mon </span></button> <br/>
<button id="repeatTues" data-bind="checked: repeatTues"><span> Tues </span></button><br/>
<button id="repeatWeds" data-bind="checked: repeatWeds"><span> Weds </span></button><br/>
<button id="repeatThurs" data-bind="checked: repeatThurs"><span> Thurs </span></button><br/>
<button id="repeatFri" data-bind="checked: repeatFri"><span> Fri </span></button><br/>
<button id="repeatSat" data-bind="checked: repeatSat"><span> Sat </span></button><br/>
<button id="repeatSun" data-bind="checked: repeatSun"><span> Sun </span></button><br/> 
```

在 class active 中从 css 中的颜色中删除多余的哈希 (#)

```
.active {
    color: #fff;
    background: #02AEFF;
} 
```

并编写脚本

```
$(function() {
    var buttons = $('button[id^="repeat"]');
    buttons.click(function() {
        buttons.removeClass('active');
        $(this).addClass('active');
    });
}); 
```

[jsfiddle](http://jsfiddle.net/n7ehx/3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T14:03:21.143

您需要传递按钮。

```
function changeStyle(e){
    $(e).toggleClass('active');
} 
```

在 HTML 中：

```
<button id="repeatSun" data-bind="checked: repeatSun" onclick="changeStyle(this)"><span> Sun </span></button> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T14:03:33.890

像这样的东西怎么样：

```
$("button").click(function () {
    $(this).toggleClass('active');
}); 
```

[http://jsfiddle.net/VUmza/26/](http://jsfiddle.net/VUmza/26/)

编辑：一次只有一个按钮。

[http://jsfiddle.net/VUmza/39/](http://jsfiddle.net/VUmza/39/)

```
$("button").click(function () {
    $( "button" ).each(function() {
      $(this).removeClass("active");
    });

    $(this).toggleClass('active');
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-15T14:03:52.997

尝试这个：

```
<button id="repeatMon" class="clickable"><span> Mon </span></button> 
```

Jquery 里面的 document.ready()

```
$('.clickable').click(function(){
    $(this).toggleClass('active');
}); 
```

[演示](http://jsfiddle.net/rCZSN/)

# sql - 抵达日期后的出发日期

> ID：14896378
> 
> 赞同：1
> 
> 时间：2013-02-15T14:01:06.730
> 
> 标签：sql, date

这可能是一个简单的答案，但我不知道，我如何确保出发日期在到达日期之后。

谢谢

韦恩

```
DATEADD(day, ABS(CHECKSUM(NEWID()) % 365), '1 Jan 2010') as ArrivalDate,
DATEADD(day, ABS(CHECKSUM(NEWID()) % 365), '1 Jan 2010') as DepatureDate, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:11:06.720

您可以使用`DATEDIFF ('day', DepatureDate, ArrivalDate)`.

这样，您可以从 DepatureDate 中减去 ArrivalDate。如果您得到否定的答案，则 DepatureDate 在 ArrivalDate 之前。

看看这个链接：

[日期差异](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

编辑：

```
DECLARE @var1 int;
DECLARE @var2 int;
SET @var1 = ABS(CHECKSUM(NEWID()) % 365);
SET @var2 = ABS(CHECKSUM(NEWID()) % (365-@var1));
select @var1, @var2, DATEADD(day, @var1, '1 Jan 2010') as ArrivalDate, DATEADD(day, @var2, DATEADD(day, @var1, '1 Jan 2010')) as DepatureDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T16:23:12.407

我认为最简单的方法是使用`case`语句：

```
(case when ArrivalDate < DepartureDate then 1 else 0 end) as IsArrivalBefore 
```

这还具有标准语法和几乎所有数据库都可以理解的优点。（您的问题没有提到您正在使用的数据库。）

# c# - C# 可扩展属性

> ID：14896383
> 
> 赞同：0
> 
> 时间：2013-02-15T14:01:23.263
> 
> 标签：c#, properties, expansion

我可以将具有复杂类型的属性扩展到更多具有原始属性的属性（动态（运行时）也可以）吗？

例如，不要写这个（其中 PointExapnder 是用户定义的某种类型的扩展）：

```
class A
{
   public Point Pt
   {
      get;
      set;
   } 

   public int X
   {
      get {return Pt.X;}
      set {Pt.X = value; }
   }

   public int Y
   {
      get {return Pt.Y;}
      set {Pt.Y = value; }
   }

} 
```

我可以写类似的东西：

```
class A
{
   [Expand(Expander = typeof(PointExpander)]
   public Point Pt
   {
      get;
      set;
   } 

} 
```

# delphi - 带圆角的 VCL 样式

> ID：14896389
> 
> 赞同：1
> 
> 时间：2013-02-15T14:02:06.603
> 
> 标签：delphi, delphi-xe2, vcl-styles

一些 VCL 样式（Delphi XE2）有圆角。如何将一种样式（例如 Metro Blue (not rounded)）更改为 rounded ？

# routing - 克隆数据包并将其转发到多个 IP 地址

> ID：14896390
> 
> 赞同：8
> 
> 时间：2013-02-15T14:02:11.860
> 
> 标签：routing, iptables, multicast, portforwarding

我正在尝试将所有传入的 TCP 数据包转发到多个 IP 地址。

设置：

```
A - 10.10.10.10
B - 10.10.10.11
C - 10.10.10.12
D - 10.10.10.13 
```

我希望 B、C 和 D 接收（在端口 8000 上）**A**的端口 12345 上的所有传入数据包。理想情况下，我希望 A 这样做。

我可以在 A 上使用此规则转发到一台机器：

```
iptables -t nat -A PREROUTING -p tcp --dport 12345 -j REDIRECT --to 10.10.10.11:8000 
```

我还可以使用 TEE 选项克隆数据包：

```
iptables -t mangle -A PREROUTING -p tcp --dport 8000 -d 10.10.10.11 -j TEE --gateway 10.10.10.12 
```

到目前为止一切正常。问题是 C 将收到目标 IP 为 B 而不是 C 的数据包。此外，我不知道如何转发到 D 和/或更多其他目的地。

**如何使用 iptables 规则使 A 将端口 12345 上的所有传入数据包发送到所有其他机器（B、C 和 D）到端口 8000？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-10T09:14:15.800

您必须使用 POSTROUTING ：

```
iptables -t nat -A POSTROUTING -p tcp --dports 8080 -j SNAT --to-source 10.10.10.12 
```

但是您需要找到一种方法来区分哪个数据包是针对 B 或 C 的，否则它们都会以 C 的 IP 到达。如果您有不同的接口，则应该使用接口完成；我想在您更改网关时就是这种情况，例如：

```
iptables -t nat -A POSTROUTING -o eth3 -p tcp --dports 8080 -j SNAT --to-source 10.10.10.12 
```

所以只有传出到接口 eth3 的数据包，成像它是到 C 的路由路径，才会将目标 ip 更改为 C ip。

# javascript - 在 svg 元素上设置自定义属性 (Raphael)

> ID：14896395
> 
> 赞同：3
> 
> 时间：2013-02-15T14:02:26.340
> 
> 标签：javascript, dom, svg, attributes, raphael

当我将 id 设置为 svg 元素时

```
var circle = paper.circle(x, y, r);
circle.node.id = 'circle-id'; 
```

一切都很好，当使用调试器浏览文档时，我可以看到这样的预期结果：

```
<circle cx="320" cy="240" r="4" fill="none" stroke="#000" id="circle-id" /> 
```

然后我可以通过 id 通过`document.getElementById`方法或通过 jQuery 获取这个元素。但是添加一些其他属性失败了。如果我尝试添加属性`custom`：

```
circle.node.custom = 'custom-attr'; 
```

我看没有效果。

我们可以使用 Raphael 向 SVG 元素添加什么样的属性以及如何添加任意属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T14:03:53.590

`node`是一个 DOM 元素，`id`是元素的标准属性，用于快速读取/写入其值。使用`setAttribute`方法设置非标准属性。

```
circle.node.setAttribute('custom', 'custom-attr'); 
```

# django - Django：在 urls.py 中为亚马逊 s3 制作别名？

> ID：14896397
> 
> 赞同：0
> 
> 时间：2013-02-15T14:02:31.080
> 
> 标签：django, amazon-s3, angularjs, django-urls, django-media

我在 Django 中设置 URL 时遇到问题。

为了提供我的媒体文件，我有这个 Amazon S3 存储桶：

```
https://somebucket.s3.amazonaws.com/ 
```

我在里面设置媒体网址`settings.py`如下：

```
MEDIA_URL = https://somebucket.s3.amazonaws.com/media/ 
```

在里面`urls.py`我设置代码如下：

```
urlpatterns += patterns('',
    (r'^media/(?P<path>.*)$', 'django.views.static.serve', {
    'document_root': settings.MEDIA_URL})); 
```

我的意图是，当我指向一个图像文件时，假设`<img src="/media/image.jpg"/>`它会自动指向`http://somebucket.s3.amazonaws.com/media/image.jpg`

我怎样才能做到这一点？我尝试了很多方法，但它总是返回 404。

但是，如果我尝试直接访问该文件，`http://somebucket.s3.amazonaws.com/media/image.jpg`它就可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:04:48.457

你为什么想这么做？这违背了首先拥有外部存储的大部分目的。这意味着对于每个媒体请求，它必须通过 Django 本身来解析 URL 并生成到 S3 的重定向，这意味着所有开销。

相反，正如 sneawo 在评论中所建议的那样，您应该简单地将 img src 属性设置为通过 S3 URL 指向图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T01:16:08.747

原来，django 会自动将 media_url 附加到图像字段 url 的前面。

我的印象是我必须附加 media_url，这导致我寻找更简单的解决方案。

***Django Admin 只显示相对路径***

![django admin 显示相对路径][1]

```
http://i.stack.imgur.com/aZGPy.png 
```

***但是，美味派给了我绝对的道路***

```
http://i.stack.imgur.com/SEdaX.png 
```

所以我现在不必再担心网址了......再次感谢大家:)

# ruby-on-rails - 生成路由时出现 Rake 错误

> ID：14896398
> 
> 赞同：1
> 
> 时间：2013-02-15T14:02:32.733
> 
> 标签：ruby-on-rails, rake

我正在尝试生成路线（对于我正在处理的应用程序来说，这在几周内都可以正常工作），突然间，我看到了以下消息：

```
You have already activated rake 10.0.3, but your Gemfile requires rake 0.9.2.2\. Using bundle exec may solve this. 
```

执行 bundle exec 并不能解决问题。浏览 Gemfile.lock，我看到以下内容：

```
railties (3.2.3)
  actionpack (= 3.2.3)
  activesupport (= 3.2.3)
  rack-ssl (~> 1.3.2)
  rake (>= 0.8.7)
  rdoc (~> 3.4)
rake (0.9.2.2) 
```

我尝试将最后一行更改为：

```
rake (>= 0.9.2.2) 
```

这给了我以下错误消息：

```
There was an error in your Gemfile, and Bundler cannot continue. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:06:00.277

检查`rake`您的 Gemfile 中是否存在。如果不是，请添加它，并指定“您已激活”的版本。

然后，您需要告诉 bundle 更新它用于您的应用的 rake 版本：

`bundle update rake`

它会`Gemfile.lock`为您更新。

原因：

如果您没有`rake`在 gemfile 中提及会发生什么，那么新版本的 rails 会在您这样做时自动为您安装最新的 rake `bundle install`。但是您的**gemfile**被旧版本锁定。这会导致问题和您看到的错误。

所以你需要做的是首先你卸载使用命令安装的最新 rake 版本

```
gem uninstall rake 
```

然后在你的 gemfile 中提到 rake 并执行 -

```
bundle update rake 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:07:08.407

或者你可以试试 gem uninstall rake。系统将询问您是否要删除所有版本 - 输入 - 是，然后捆绑安装

# android - 我的 android 应用 Force 在 Android 2.3.x 版本中关闭

> ID：14896404
> 
> 赞同：0
> 
> 时间：2013-02-15T14:03:04.963
> 
> 标签：android, android-manifest, forceclose

我开发了一个应用程序。它在除 2.3.x 版本之外的所有版本中都能正常工作。我已经在 2.3.6 和 2.3.3 版本的三星 Galaxy y 手机上进行了测试，但它无法在其中工作

这是我在 Manifest.xml 中使用的权限

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="me.radhakrishna.buddyreader"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-permission android:name="android.permission.RECEIVE_SMS" />

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <supports-screens android:smallScreens="true"
                      android:normalScreens="true"
                      android:largeScreens="true"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="me.radhakrishna.buddyreader.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <receiver android:name=".TextMessageReceiver">
            <intent-filter> 
                <action android:name="android.provider.Telephony.SMS_RECEIVED" /> 
            </intent-filter> 
        </receiver>
    </application>

</manifest> 
```

我该如何解决这个问题，即使它在我上面在 Manifest.xml 中提到的所有 API 级别的模拟器中都能正常工作

错误日志

```
02-18 18:44:16.920: I/TextToSpeech.java(345): initTts() successfully bound to service
02-18 18:44:40.639: V/(345): 9866235007
02-18 18:44:40.639: I/TextToSpeech.java - speak(345): speak text of length 64
02-18 18:45:04.080: W/KeyCharacterMap(345): No keyboard for id 0
02-18 18:45:04.080: W/KeyCharacterMap(345): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
02-18 18:45:05.189: E/ActivityThread(345): Activity me.radhakrishna.buddyreader.MainActivity has leaked ServiceConnection android.speech.tts.TextToSpeech$1@40520cf0 that was originally bound here
02-18 18:45:05.189: E/ActivityThread(345): android.app.ServiceConnectionLeaked: Activity me.radhakrishna.buddyreader.MainActivity has leaked ServiceConnection android.speech.tts.TextToSpeech$1@40520cf0 that was originally bound here
02-18 18:45:05.189: E/ActivityThread(345):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:938)
02-18 18:45:05.189: E/ActivityThread(345):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:833)
02-18 18:45:05.189: E/ActivityThread(345):  at android.app.ContextImpl.bindService(ContextImpl.java:867)
02-18 18:45:05.189: E/ActivityThread(345):  at android.content.ContextWrapper.bindService(ContextWrapper.java:347)
02-18 18:45:05.189: E/ActivityThread(345):  at android.speech.tts.TextToSpeech.initTts(TextToSpeech.java:467)
02-18 18:45:05.189: E/ActivityThread(345):  at android.speech.tts.TextToSpeech.<init>(TextToSpeech.java:433)
02-18 18:45:05.189: E/ActivityThread(345):  at me.radhakrishna.buddyreader.MainActivity.onActivityResult(MainActivity.java:59)
02-18 18:45:05.189: E/ActivityThread(345):  at android.app.Activity.dispatchActivityResult(Activity.java:3908)
02-18 18:45:05.189: E/ActivityThread(345):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2528)
02-18 18:45:05.189: E/ActivityThread(345):  at android.app.ActivityThread.handleSendResult(ActivityThread.java:2574)
02-18 18:45:05.189: E/ActivityThread(345):  at android.app.ActivityThread.access$2000(ActivityThread.java:117)
02-18 18:45:05.189: E/ActivityThread(345):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:961)
02-18 18:45:05.189: E/ActivityThread(345):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-18 18:45:05.189: E/ActivityThread(345):  at android.os.Looper.loop(Looper.java:123)
02-18 18:45:05.189: E/ActivityThread(345):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-18 18:45:05.189: E/ActivityThread(345):  at java.lang.reflect.Method.invokeNative(Native Method)
02-18 18:45:05.189: E/ActivityThread(345):  at java.lang.reflect.Method.invoke(Method.java:507)
02-18 18:45:05.189: E/ActivityThread(345):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-18 18:45:05.189: E/ActivityThread(345):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-18 18:45:05.189: E/ActivityThread(345):  at dalvik.system.NativeStart.main(Native Method) 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:13:34.620

此行是问题的原因：

```
02-18 18:45:05.189: E/ActivityThread(345): Activity me.radhakrishna.buddyreader.MainActivity has leaked ServiceConnection android.speech.tts.TextToSpeech$1@40520cf0 that was originally bound here
02-18 18:45:05.189: E/ActivityThread(345): android.app.ServiceConnectionLeaked: Activity me.radhakrishna.buddyreader.MainActivity has leaked ServiceConnection android.speech.tts.TextToSpeech$1@40520cf0 that was originally bound
at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:938) 
```

检查您的 MainActivity，此错误可能是由于误用静态类变量引起的。

# jquery - 在 Rails 3 中奇怪地加载 jQuery

> ID：14896405
> 
> 赞同：0
> 
> 时间：2013-02-15T14:03:07.867
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, coffeescript

我有一个带有标准资产管道的 Rails 3.2 应用程序——也就是说，控制器在单独的 CoffeeScript 文件中定义了自己的 Javascript。

我今天注意到在开发模式下（当所有 JS 文件在每个页面上单独加载时）它们在某个时间点后停止工作。我假设这是因为它上面的一个文件中的某个地方存在一个神秘错误。控制台显示两个与该页面上未找到的元素相关的错误（意料之中，因为它们来自不同的控制器）。

但是，我查看了生产应用程序，同样的事情正在发生。我在主页的页面控制器上，查看了小型化的 JS 文件并找到了对完全独立控制器的引用。同样的错误也存在，说在该页面上找不到元素。再一次，在那之后的 JS 都失败了并且无法正常工作。

我假设 Rails 只编译了控制器 JS？如果不是这种情况，我该怎么做才能让某些 JS 只出现在某些页面上？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:24:31.043

您可以将函数放在 if 语句后面，这样它们只会在页面上存在某些元素时触发。

```
if $("#element-id")
  namedFunction = ->
    etc.... 
```

# windows - 即使文件已更改，Git 状态也是干净的

> ID：14896409
> 
> 赞同：1
> 
> 时间：2013-02-15T14:03:24.243
> 
> 标签：windows, git, github

自从我第一次开始使用 Git 以来，我已经花了很多时间来努力解决那些在没有被触及时被报告为已更改的文件，并`core.filemode = false`解决了这些问题......但今天我遇到了相反的问题。（除非另有说明，我从 Windows 7 中的 Git Bash (1.7.10.msysgit.1) 执行此操作。）

情况：

1.  在我的`master`分支上，我确实`git pull upstream master`提取了最新的更改 - 这表示一切都是最新的（我仔细检查了最后一次提交在我的本地主服务器、我的原始分支和上游 Github 存储库上是相同的，所以我有理由确定这是对的）

2.  我修改了一个现有文件。TortoiseGit 1.8.0.0 中的差异显示了更改，尽管它的覆盖仍然显示目录是干净的。奇怪的。`git status`是……还是干净的。很奇怪。

3.  我删除了一个文件：`rm Readme.md`. 文件消失。`git status`仍然很干净。显然，git 实际上不再跟踪我的文件了。

（为了记录，设置`core.filemode = true`然后运行`git status`只是让我胡说八道关于在我的 Windows 系统和 Github 之间的某个时间点改变了模式的文件，但仍然没有列出已删除或真正修改的文件）

我在这里遗漏了一些东西，我希望有人能告诉我它是什么！我已经通过我在 Github 上的 fork 从这台机器向同一个存储库提交了数十次提交，所以我有理由确定这个环境有效，而且我通常知道我在做什么，但显然有些事情发生了变化，我不能把我的手指现在。

根据要求编辑我在 Bash 中遵循的 Git 工作流程（由于问题出现在 master 中，因此无需费心检查新分支）：

```
Emma Burrows@PC ~/Documents/Dropbox/gitproject (test)
$ git checkout master
Switched to branch 'master'

Emma Burrows@PC ~/Documents/Dropbox/gitproject (master)
$ git status
# On branch master
nothing to commit (working directory clean)

Emma Burrows@PC ~/Documents/Dropbox/gitproject (master)
$ git pull upstream master
From git://github.com/company/gitproject
 * branch            master     -> FETCH_HEAD
Already up-to-date.

Emma Burrows@PC ~/Documents/Dropbox/gitproject (master)
$ rm Readme.md

Emma Burrows@PC ~/Documents/Dropbox/gitproject (master)
$ git status
# On branch master
nothing to commit (working directory clean) 
```

Readme.md 是一个跟踪文件，存在于我在 Github 上的分叉存储库和原始上游存储库中。我希望这有帮助吗？

**新编辑**我已将文件夹从 Dropbox 移到本地驱动器上的本地文件夹，但问题仍然存在。必须戳 .git 文件夹。我希望找出它有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:03:34.063

感谢所有试图提供帮助的人。在我将整个文件夹（包括 .git 文件夹）移动到本地硬盘驱动器上的另一个位置后，问题仍然存在。我只能假设不同机器上的两个 repo 副本试图一次同步 git 文件夹并导致本地 repo 损坏。我最终重新克隆了该文件夹（暂时从 Dropbox 中删除），一切都恢复正常了。

# android - 如何访问由 Google 的 Play 音乐应用创建的播放列表？

> ID：14896410
> 
> 赞同：2
> 
> 时间：2013-02-15T14:03:28.617
> 
> 标签：android, playlist, android-music-player

如何找到由 Google 的音乐播放应用程序创建的播放列表列表（例如，它是 Galaxy Nexus 上的默认播放列表）。

[如何访问由 android 默认音乐应用创建的播放列表并调用音乐应用播放它](https://stackoverflow.com/questions/7370278/how-can-i-access-playlist-created-by-android-default-music-app-and-call-the-musi)中提出的解决方案？不起作用 - 它仅显示在应用程序之外创建并复制到手机的播放列表。

有任何想法吗？

# python - 如何通过代理发送带有 smtplib 模块的电子邮件？

> ID：14896411
> 
> 赞同：4
> 
> 时间：2013-02-15T14:03:32.053
> 
> 标签：python, proxy, smtp, smtplib

我对 python 的模块 smtplib 有问题：在工作中，pc 是通过代理连接的。当我运行代码时：

```
server = smtplib.SMTP()
server.connect('smtp.gmail.com:587')
server.login('username','password')
server.sendmail('from', 'to', 'msg')
server.quit() 
```

出现此错误消息：

> 文件“C:\Python32\lib\socket.py”，第 386 行，在 getaddrinfo(host, port, 0, SOCK_STREAM) 中的 res 的 create_connection 中：socket.gaierror: [Errno 11001] getaddrinfo failed

我认为这是由代理引起的，它阻止了连接。电脑可以上网。如何通过代理发送电子邮件？ps：（我是意大利人，对不起我的“意大利语”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:39:51.447

以下将起作用：

```
server = smtplib.SMTP_SSL('smtp.gmail.com',port=465)
server.login('username@gmail.com','password')
server.sendmail('from', 'to', 'msg') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:29:24.520

问题是您的 DNS 解析不起作用。这就是错误告诉你的。

# php - 使用 $_GET 循环浏览提要并找到正确的数据

> ID：14896414
> 
> 赞同：0
> 
> 时间：2013-02-15T14:03:35.233
> 
> 标签：php, get

我试图设置一个工作变量，以便稍后在我的代码中使用，我`id`在 url 中有一个引用外部数据馈送中的属性的 url。[您可以在此处](http://whdn.williamhill.com/pricefeed/openbet_cdn?action=template&template=getHierarchyByMarketType&classId=5&marketSort=HH&filterBIR=N)查看 xml 提要的副本

id 像这样在 url 中出现 -`/page.php?id=52115351`

目前我将我的工作变量设置为波纹管，但它只是被设置为“市场”的第一个实例，而不是被设置`id`为与 url 中的实例相同的实例。

```
 $wh_odds = $wh_xml->response->williamhill->class->type->market->participant;
  $wh_odds_attrib = $wh_odds->attributes();
  $wh_odds_attrib['name'];//name 
```

我将如何`$_GET['id']`使用这个块来实现，以便它可以`$wh_odds_attrib['name']`从 xml 提要中正确的“市场”实例的参与者中生成工作变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:53:55.950

如果您使用的是 simpleXML，您可以尝试以下操作：

```
$simpleXml = simplexml_load_file('test.xml');
$marketNode = $simpleXml->xpath("/oxip/response/williamhill/class/type/market[@id='{$_GET['id']}']");
$attributes = $marketNode[0]->participant->attributes();

echo $attributes['name']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:17:48.920

我不完全确定您要做什么，但您可以将 $_GET['id'] 分配给您想要的任何内容，即 $id = $_GET['id'] 允许您在字符串操作中使用它（通过sprintf 或其他）。

有关您正在尝试做的事情的更多信息会有所帮助

# android - 在 Android 中从 sdcard 中检索文件

> ID：14896416
> 
> 赞同：0
> 
> 时间：2013-02-15T14:03:38.663
> 
> 标签：android, image, file

在我的应用程序中，我从 sdcard 中检索文件，在检查它是 .jpg oe .png 图像后，我将文件路径存储在 File 数组中。但我得到 NullPointerException 也存在文件路径。以下代码有什么问题。请帮忙

```
 File[] image;
  File f = new File("/sdcard/download");//or Environment.getExternalStorageDirectory().getPath()
        File[] files = f.listFiles();

        int j=0;
        for(int i = 0; i < files.length; i++,j++) {
            File file1 = files[i];

            String myfile = file1.getPath().substring(file1.getPath().lastIndexOf("/")+1,file1.getPath().length()).toLowerCase(); 
            System.out.println("file is : "+files[i]);
            if(myfile.endsWith(".jpeg")||myfile.endsWith(".png")|| myfile.endsWith(".gif") || myfile.endsWith(".jpg"))
            {
                System.out.println("file is : "+files[i]);
                image[j]=files[i];//here i'm getting exception
                }
            } 
```

例外——

```
 02-15 19:28:36.463: E/AndroidRuntime(12918): FATAL EXCEPTION: main
02-15 19:28:36.463: E/AndroidRuntime(12918): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.my.zproject/com.my.zproject.ImportFile}: java.lang.NullPointerException
02-15 19:28:36.463: E/AndroidRuntime(12918):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
02-15 19:28:36.463: E/AndroidRuntime(12918):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-15 19:28:36.463: E/AndroidRuntime(12918):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-15 19:28:36.463: E/AndroidRuntime(12918):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-15 19:28:36.463: E/AndroidRuntime(12918):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-15 19:28:36.463: E/AndroidRuntime(12918):    at android.os.Looper.loop(Looper.java:123)
02-15 19:28:36.463: E/AndroidRuntime(12918):    at android.app.ActivityThread.main(ActivityThread.java:4627)
02-15 19:28:36.463: E/AndroidRuntime(12918):    at java.lang.reflect.Method.invokeNative(Native Method)
02-15 19:28:36.463: E/AndroidRuntime(12918):    at java.lang.reflect.Method.invoke(Method.java:521)
02-15 19:28:36.463: E/AndroidRuntime(12918):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-15 19:28:36.463: E/AndroidRuntime(12918):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-15 19:28:36.463: E/AndroidRuntime(12918):    at dalvik.system.NativeStart.main(Native Method)
02-15 19:28:36.463: E/AndroidRuntime(12918): Caused by: java.lang.NullPointerException
02-15 19:28:36.463: E/AndroidRuntime(12918):    at com.my.zproject.ImportFile.onCreate(ImportFile.java:76)
02-15 19:28:36.463: E/AndroidRuntime(12918):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:14:21.357

你需要`image`像这样初始化数组

```
File[] image;
File f = new File("/sdcard/download");//or Environment.getExternalStorageDirectory().getPath()
    File[] files = f.listFiles();
    image = new File[files.length]
    int j=0; 
```

# python - 芹菜中的python vipscc缺少参数

> ID：14896418
> 
> 赞同：0
> 
> 时间：2013-02-15T14:03:42.817
> 
> 标签：python, python-imaging-library, celery

我正在尝试编写一个用于处理大型 tif 文件的 celery 任务。根据过去的经验，我发现 vipscc 使用比 pil 更少的内存来处理/调整 tif 的大小，所以我喜欢使用该模块。问题是，当我尝试在工人执行的芹菜任务中导入 vipscc 时，我收到以下消息：

致命的 Python 错误：无法初始化模块 vips vipsmodule：缺少 -c 的参数

我试过从芹菜工人外面的外壳执行脚本，它工作正常

我完全被难住了，我什至无法找出 -c 的用途，有人有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:14:19.033

好的，我意识到只有在调试模式下运行 celery 时才会发生这种情况。除此之外它工作正常

# keyboard-shortcuts - Monodevelop / Mac - 循环打开文档

> ID：14896424
> 
> 赞同：1
> 
> 时间：2013-02-15T14:03:57.703
> 
> 标签：keyboard-shortcuts, monodevelop

环境是 MonoDevelop 3.1.1 / Mac OS X 10.8.2 / Macbook Pro w/北美英语键盘

什么键盘快捷键在打开的文档中向前/向后循环？

我看到这个[文件](http://kureus.com/2011/02/26/monodevelop-keyboard-shortcuts/)似乎建议`CTRL`+`PgDn`和`CTRL`+ `PgUp`，但是它对我不起作用（在所描述的笔记本电脑上，所以我使用了`CTRL`+ `fn`+`DownArrow`和`CTRL`+ `fn`+ `UpArrow`）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:07:59.667

在 OSX 10.8.2 上的 Xamarin Studio 4.0 中，用于在选项卡（表示打开的文档）之间切换的键盘快捷键是*Option + Command + LeftArrow*和*Option + Command + RightArrow*。

Xamarin Studio 基于 MonoDevelop，因此键盘快捷键可能相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-23T23:01:20.210

从 MonoDevelop 4.0 开始，`ctrl`+`tab`允许您循环浏览打开的选项卡/文档（在 Windows 和 Mac 环境中）。

# uitableview - 使用两个 NSFetchedResultsController 从 CoreData 获取大量数据

> ID：14896433
> 
> 赞同：1
> 
> 时间：2013-02-15T14:04:49.280
> 
> 标签：uitableview, core-data, fetch, nsfetchedresultscontroller, prefetch

我正在尝试使用 NSFetchedResultsController 从 UITableView 中的 CoreData 获取 10000 条记录，并尝试使其尽可能快（因为请求具有排序描述符，因此获取这么多数据需要更长的时间）。

我正在尝试使用第一个和主要 NSFetchedResultsController（在表的委托方法中使用）从 CoreData 获取 100 条记录，这些记录显示在表上，而在另一个队列中，我在 viewDidAppear 中开始另一个获取 auxiliarFRC 上的所有 10000 条记录。在 AuxFRC 中的提取结束后，我将 AuxFRC 分配给主 FRC，以便传输所有记录并重新加载表。

我的问题是 UITableView 卡在第一个加载的行，直到 AuxFRC 结束提取，即使我分派 performFetch，我也不明白为什么会发生这种情况，或者如果这种方式是错误的，还有什么其他方式可以用来获取 10000 条记录如果数据发生变化并保持最新状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:52:00.980

我猜问题出在 NSManagedObjectContext - 这不是线程安全的，我对两个提取都使用了同一个。我创建了原始副本的副本，并在第二个上下文中更改了 AuxFRC。这解决了一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:32:16.320

诀窍是使用 FRC 的**缓存机制**并协调**异步获取**与显示线程。

一切都总结在[这个](https://stackoverflow.com/questions/14707201/efficiently-display-100-000-items-using-core-data/14710475#14710475)答案中。

# c++ - 如何将静态二维数组的指针传递给结构/类？

> ID：14896436
> 
> 赞同：5
> 
> 时间：2013-02-15T14:05:01.970
> 
> 标签：c++

当我尝试将数组的指针（其中包含程序中某些函数所需的参数）传递给一个结构时，我遇到了一个问题，然后应该将其传递给这些函数。例如，GSL 希望我以这种方式传递参数。

一个小示例程序如下所示：

```
#include <iostream>

using namespace std;

struct myparams
{
    double  * a;
    double ** b;
};

int main()
{
    double c[10]   = {0,1,2,3,4,5,6,7,8,9};
    double d[4][3] = {{1,2,3},{4,5,6},{7,8,9},{10,11,12}};

    double** e = new double*[4];
    for (int i = 0; i < 4; i++) {
       e[i] = new double[3];
    }

    myparams params;

    // THIS WORKS:
    params.a = c;
    for (int i = 0; i < 10; i++) {
        cout << params.a[i] << endl;
    }

    // THIS DOESN'T WORK
    params.b = d;

    // THIS WORKS:
    params.b = e;

    delete[] e;
} 
```

有什么问题

```
 params.b = d 
```

编译器抱怨`"cannot convert 'double[4][3]' to 'double**' in assignment"`或类似的东西（从德语翻译）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T14:16:15.087

`double d[4][3];`是一个数组数组。`double b**;`是指向指针的指针。这些类型并不相同（您可能在 Internet 上阅读的常见“数组只是指针”是**错误**的）。

的元素`d`属于 type `double[3]`。数组在传递时会衰减为指向其第一个元素的指针（参见 C++ 标准的第 4.2 节）。`d`将衰减到`double(*)[3]`（指向 3 个双精度数组的指针）。

长话短说，`double(*)[3]`不能转换成`double**`这就是编译器告诉你的。

如果需要保持`d`原样，则需要将 b 声明为`double (*b)[3]`;

有关更深入的解释，请参阅[此 SO question](https://stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-15T14:08:32.297

这是因为指向指针（或可以用作指针数组）的指针与数组数组不同。内存中的布局不兼容。

例如，假设我们有这两个声明：

```
char aa[2][2] = { { 'a', 'b' }, { 'c', 'd' } };
char **pp;

pp = new char*[2];
pp[0] = new char[2];
pp[1] = new char[2]; 
```

数组`aa`在内存中如下所示：

```
+----------+----------+----------+----------+
| aa[0][0] | aa[0][1] | aa[1][0] | aa[1][1] |
+----------+----------+----------+----------+ 
```

“数组”`pp`同时看起来像这样：

```
+------+------+
| a[0] | a[1] |
+------+------+
   |      |
   |      v
   |      +---------+---------+
   |      | a[0][0] | a[0][1] |
   |      +---------+---------+
   V
   +---------+---------+
   | a[0][0] | a[0][1] |
   +---------+---------+ 
```

“数组”`pp`包含指向另一个“数组”的指针

# multithreading - 如何在 Visual Studio (C++) 中找出某个线程的调用者？

> ID：14896442
> 
> 赞同：0
> 
> 时间：2013-02-15T14:05:09.437
> 
> 标签：multithreading, visual-studio

让我们假设...

ClassA::caller() 创建 ThreadA 的实例并启动该线程。

在那之后...

如果我用 Visual Studio 暂停该过程，并查看 ThreadA 的 Stack-Trace 窗口，那么我无法找出调用者是谁。

在这种情况下，ClassA::caller() 是调用者。

有没有办法在 Visual Studio 中找出某些线程的调用者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:15:26.770

“ClassA::caller() 是调用者”——恐怕你对线程的操作有误解。特别是，调用创建线程“调用者”的这段代码并没有真正的帮助。这个函数只是一个被调用的函数，然后导致另一个线程的创建。除了这个短暂的集合之外，线程和它启动的代码之间没有任何联系。

你为什么在乎？你想知道什么？此外，如果您提到您使用的是哪种语言，这可能会有所帮助。

# c - 在 C 中使用 const struct 而不是定义来对配置参数进行分组是否有效？

> ID：14896451
> 
> 赞同：1
> 
> 时间：2013-02-15T14:05:33.443
> 
> 标签：c, struct, c-preprocessor, buildconfiguration

我正在考虑使用全局常量结构来管理某些子系统的配置。这意味着我想使用类似的东西：

```
const struct SystemConfig {
  .channels = 5,
  .mode = NORMAL_MODE,
} SYSTEM_CONFIG; 
```

然后像往常一样在我的代码中使用它：

```
...
numberOfChannels = SYSTEM_CONFIG.channels;
mode = SYSTEM_CONFIG.mode;
... 
```

我想用这种方法跳过`#define`'s.

我的问题是，考虑到一切都是不变的，编译器是否会意识到这一点并在编译时用它们各自的值替换这些值？

**编辑：**很抱歉标记了**C**和 C++，它现在已修复，我的问题仅与**C**相关。我使用的编译器是带有 ARM Cortex-M4 目标的 GCC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:49:58.347

我会使用 static const 所以你的结构在链接级别不可见。例如：

```
static const unsigned int channels = 5;
unsigned numberOfChannels = channels; 
```

肯定会被编译器优化。所以我看不出为什么任何现代编译器也无法优化您的示例。

如果是我，我会找到编译器选项来输出它放置的代码。这是一个有趣的练习。

# c# - 将 PHP cURL 转换为 C# 请求

> ID：14896454
> 
> 赞同：0
> 
> 时间：2013-02-15T14:05:51.627
> 
> 标签：c#, php, .net, curl

我在 PHP 中有以下代码，它返回一个 XML 文件并且效果很好。我的问题是我需要使用 C# 实现相同的功能。由于我对 .NET 相当陌生，有人能指出我正确的方向吗？

```
$url = "http://myDestinationDomain.com";
$ch = curl_init($url);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch,CURLOPT_SSL_VERIFYPEER,true);
$temp = curl_exec($ch);
curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:16:56.957

试试这个代码。尽管您应该能够解决它，但它可能有一些错误

我从这个链接 [http://forums.asp.net/t/1178426.aspx/1](http://forums.asp.net/t/1178426.aspx/1)

```
 public static XmlDocument getXMLDocumentFromXMLTemplate(string inURL)
        {
            HttpWebRequest myHttpWebRequest = null;     //Declare an HTTP-specific implementation of the WebRequest class.
            HttpWebResponse myHttpWebResponse = null;   //Declare an HTTP-specific implementation of the WebResponse class
            XmlDocument myXMLDocument = null;           //Declare XMLResponse document
            XmlTextReader myXMLReader = null;           //Declare XMLReader

            try
            {
                //Create Request
                myHttpWebRequest = (HttpWebRequest) HttpWebRequest.Create(inURL);
                myHttpWebRequest.Method = "GET";
                myHttpWebRequest.ContentType = "text/xml; encoding='utf-8'";

                //Get Response
                myHttpWebResponse = (HttpWebResponse) myHttpWebRequest.GetResponse();

                //Now load the XML Document
                myXMLDocument = new XmlDocument();

                //Load response stream into XMLReader
                myXMLReader = new XmlTextReader(myHttpWebResponse.GetResponseStream());
                myXMLDocument.Load(myXMLReader);
            }
            catch (Exception myException)
            {
                throw new Exception("Error Occurred in AuditAdapter.getXMLDocumentFromXMLTemplate()", myException);
            }
            finally
            {
                myHttpWebRequest = null;
                myHttpWebResponse = null;
                myXMLReader = null;
            }
            return myXMLDocument;
        } 
```

# c# - 使用委托发送字符串

> ID：14896457
> 
> 赞同：3
> 
> 时间：2013-02-15T14:06:05.023
> 
> 标签：c#, string, visual-studio, delegates

当我尝试从 Form B 发送一个字符串以形成 a 时，我的代码中有一个非常烦人的问题。我收到错误消息：

```
Object reference not set to an instance of an object. 
```

我对这个错误很熟悉，通常我知道如何解决这个问题，但是这个不同。

我需要将时钟名称从一个表单发送到主表单，我正在尝试使用下面的代码来实现这一点：

```
delegate void ClockClocknameReceivedEventHandler(object sender, Clock.ClocknameReceivedEventArgs e);

    internal class ClocknameReceivedEventArgs : EventArgs
    {
        string _clockname;

        public string Clockname
        {
            get { return _clockname; }
        }

        public ClocknameReceivedEventArgs(string clockname)
        {
            _clockname = clockname;
        }
    }

    // An event that clients can use to be notified whenever the
    // elements of the list change.
    public event ClockClocknameReceivedEventHandler ClocknameReceived;

    // Invoke the Changed event; called whenever list changes
    protected void OnClocknameReceived(Clock.ClocknameReceivedEventArgs e)
    {
        ClocknameReceived(this, e);
    } 
```

按下按钮时会触发以下代码，然后表单将关闭：

```
OnClocknameReceived(new Clock.ClocknameReceivedEventArgs(ClockName)); 
```

我收到的错误（对象引用未设置为对象的实例。）发生在

```
ClocknameReceived(this, e); 
```

我正在使用完全相同的代码，从另一个类到主表单来发送一个工作正常的字节数组，但是这个给了我这个错误。

有人有什么想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T14:08:04.997

代表可以是`null`. 仅在不是时才调用它`null`：

```
protected void OnClocknameReceived(Clock.ClocknameReceivedEventArgs e)
{
    ClockClocknameReceivedEventHandler handler = ClocknameReceived;
    if (handler != null)
    {
        handler(this, e);
    }
} 
```

* * *

委托是`null`当您尚未为事件订阅事件处理程序时。订阅事件处理程序：

```
formB.ClocknameReceived += FormB_ClocknameReceived; 
```

和

```
void FormB_ClocknameReceived(object sender, Clock.ClocknameReceivedEventArgs e)
{
    MessageBox.Show(e.Clockname);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:09:28.880

您不检查是否`ClocknameReceived`已分配事件（即有任何订阅者）。典型的事件处理代码通常如下所示：

```
var handler = ClocknameReceived;
if (handler != null)
{
    handler(this, e);
} 
```

这种类型的方法还可以（在一定程度上）缓解事件处理程序的竞争条件，因为它可能在您触发它时未被分配。

查看您的代码，您绝对可以整理一下。一方面，你的`EventArgs`类可以用更少的代码重写：

```
internal class ClocknameEventArgs : EventArgs
{
    public ClockNameEventArgs(string name)
    {
        Name = name;
    }

    public string Name { get; private set; }
} 
```

然后在您的表单中，如果您有特定类型的 ，则不需要委托`EventArgs`，您的事件可以声明为：

```
public event EventHandler<Clock.ClocknameEventArgs> ClocknameReceived; 
```

然后你在某个地方连接到这个事件（也许在`FormCreate`事件中？）：

```
ClocknameReceived += (sender, args) {
    FormB.PassName(args.Name);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T14:11:07.480

您必须检查事件是否有委托

```
if( ClocknameReceived != null)
    ClocknameReceived(this, e); 
```

# ios - 使用 Sudzc [iOS] 读取复杂的肥皂响应，具有 ID 和 IDREFs 节点

> ID：14896459
> 
> 赞同：0
> 
> 时间：2013-02-15T14:06:13.587
> 
> 标签：ios, xml, soap, touchxml, sudzc

我在使用 Sudzc（ARC 分支）解析肥皂响应时遇到问题。我有一些 WCF 服务为我们的应用程序存储数据。我设法连接到网络服务，我可以成功获得响应，但是当其中一个响应带有 z:ref 属性时，我被卡住了。没有例子就很难解释吧？;) /我已经用例如“#someid”替换了重要数据，所以不要指出这是一个问题;)

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<s:Header>
    <ActivityId>#some credentials </ActivityId>
</s:Header>
<s:Body>
    <GetMessagesResponse >
        <GetMessagesResult  xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
            <AllItemsCount>2</AllItemsCount>
            <Items>
                <Message z:Id="i1" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/">
                    <GlobalId>#msgid</GlobalId>
                    <Content>bbbbbbbb</Content>
                    <CreatedDate>2013-02-14T16:33:07</CreatedDate>
                    <Priority>Normal</Priority>
                    <Receiver z:Id="i2">
                        <GlobalId>#receiverid</GlobalId>
                        <CountryId>37</CountryId>
                        <CreationDate>2013-01-31T16:12:40</CreationDate>
                        <Gender>Male</Gender>
                        <IsDeleted>false</IsDeleted>
                        <Picture i:nil="true" />
                        <UserName>tobiasz</UserName>
                    </Receiver>
                    <Sender z:Id="i3">
                        <GlobalId>#senderid</GlobalId>
                        <CountryId>6</CountryId>
                        <CreationDate>2013-02-04T13:08:40</CreationDate>
                        <Gender>Male</Gender>
                        <IsDeleted>false</IsDeleted>
                        <Picture >
                            #"picture info"
                        </Picture>
                        <UserName>tobiasz2</UserName>
                    </Sender>
                    <Topic>RE: 56765765</Topic>
                </Message>
                <Message z:Id="i4" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/">
                    <GlobalId>#msgid2</GlobalId>
                    <Content>aaaaaaa</Content>
                    <CreatedDate>2013-02-14T16:31:01</CreatedDate>
                    <Priority>High</Priority>
                    <Receiver z:Ref="i2"/>
                    <Sender z:Ref="i3"/>
                    <Topic>RE: 56765765</Topic>
                </Message>
            </Items>
            <PageIndex>0</PageIndex>
            <RetrievedDateTime>2013-02-15T13:14:57.0813487Z</RetrievedDateTime>
        </GetMessagesResult>
    </GetMessagesResponse>
</s:Body> 
```

如您所见，有几行将 Receiver 节点标识为 i2 并进一步您可以看到来自同一发送者和同一接收者的另一条消息的节点

sudzc 生成的用于解析此 xml 的类：

```
@interface ResultOfGetMessages : SoapObject{
    int _AllItemsCount;
    NSMutableArray* _Items;
    int _PageIndex;
    NSDate* _RetrievedDateTime;
}

@interface Message : WSGlobalObject{
    NSString* _Content;
    NSDate* _CreatedDate;
    NSString* _Priority;
    User* _Receiver;
    User* _Sender;
    NSString* _Topic;
}

@interface User : WSGlobalObject{
    int _CountryId;
    NSDate* _CreationDate;
    NSString* _Gender;
    BOOL _IsDeleted;
    PictureInfo* _Picture;
    NSString* _UserName;
} 
```

带有 Touchxml 的 Sudz 无法读取（获取 null 接收方和发送方），响应被解析为：

```
<ResultOfGetMessages>
<AllItemsCount>2</AllItemsCount>
<Items>
    <Message>
        <GlobalId>###</GlobalId>
        <Content>bbbbbbbb</Content>
        <CreatedDate>2013-02-14T16:33:07.000</CreatedDate>
        <Priority>Normal</Priority>
        <Receiver>
            <GlobalId>####</GlobalId>
            <CountryId>37</CountryId>
            <CreationDate>2013-01-31T16:12:40.000</CreationDate>
            <Gender>Male</Gender>
            <IsDeleted>false</IsDeleted>
            <Picture i:nil="true" ></Picture>
            <UserName>tobiasz</UserName>
            <Version>11</Version>
        </Receiver>
        <Sender>
            <GlobalId>e4bda93c-a11c-4ae2-baf1-a15b00e918e7</GlobalId>
            <CountryId>6</CountryId>
            <CreationDate>2013-02-04T13:08:40.000</CreationDate>
            <Gender>Male</Gender>
            <IsDeleted>false</IsDeleted>
            <Picture >
                ####
            </Picture>
            <UserName>tobiasz2</UserName>
            <Version>11</Version>
        </Sender>
        <Topic>RE: 56765765</Topic>
    </Message>
    <Message>
        <GlobalId>###</GlobalId>
        <Content>aaaaaaa</Content>
        <CreatedDate>2013-02-14T16:31:01.000</CreatedDate>
        <Priority>High</Priority>
        <Receiver>
            <CountryId>0</CountryId>
            <IsDeleted>false</IsDeleted>
        </Receiver>
        <Sender>
            <CountryId>0</CountryId>
            <IsDeleted>false</IsDeleted>
        </Sender>
        <Topic>RE: 56765765</Topic>
    </Message>
</Items>
<PageIndex>0</PageIndex> 
```

我认为问题在于反序列化的深度。解析器 (if) 尝试获取具有指定 id 的接收器节点，但是它失败了，因为用此 id 标记的接收器节点位于其他节点（上一个项目节点）中。

提前感谢您的帮助和您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T19:47:05.143

当soap.m序列化节点时，我遇到了一个类似的问题。不得不这个代码：

```
// Deserializes the element in a dictionary.
+(id)deserializeAsDictionary:(CXMLNode*)element {

if([element childCount] == 1) {
CXMLNode* child = [[element children] objectAtIndex:0];
if([child kind] == CXMLTextKind) 
{
     NSLog(@"The Child Node: %@", [[[element children] objectAtIndex:0] stringValue]);
    return [[[element children] objectAtIndex:0] stringValue];

}
}

NSMutableDictionary* d = [NSMutableDictionary dictionary];
for(CXMLNode* child in [element children]) {
id v = [Soap deserialize:child];
if(v == nil) { v = [NSNull null]; }
[d setObject:v forKey:[child name]];
}
return d;
} 
```

至：

```
// Deserializes the element in a dictionary.
+(id)deserializeAsDictionary:(CXMLNode*)element {

if([element childCount] == 1) {
CXMLNode* child = [[element children] objectAtIndex:0];
if([child kind] == CXMLTextKind) 
{
     NSLog(@"The Child Node: %@", [[[element children] objectAtIndex:0] stringValue]);
    return [[[element children] objectAtIndex:0] stringValue];

}
}

NSMutableDictionary* d = [NSMutableDictionary dictionary];
for(CXMLNode* child in [element children]) {
id v = [Soap deserialize:child];
if(v == nil) { v = [NSNull null]; }
[d setObject:v forKey:[child name]];

if( check != nil ) {             
NSInteger next = 1;             
key = [NSString stringWithFormat:@"%@%04d", [child name], next];
check = [d objectForKey:key]; 
while( check != nil ) {                 
    next++; 
    key = [NSString stringWithFormat:@"%@%04d", [child name], next]; 
    check = [d objectForKey:key]; 
} 
[d setObject:v forKey:key]; 
} else {
[d setObject:v forKey:[child name]];
} 
```

# performance - 为什么我的 worklight 项目的构建/部署速度比同事慢得多？

> ID：14896460
> 
> 赞同：0
> 
> 时间：2013-02-15T14:06:14.037
> 
> 标签：performance, mobile, ibm-mobilefirst

我最近在 Eclipse 中安装了 worklight，以便开发 iPad 应用程序，但我注意到与其他开发人员相比，我构建和部署所需的时间要长得多。其他的每个构建大约需要 5-7 分钟，而我的大约需要 25-30 分钟。我不确定可能是什么原因，并希望对它可能是什么提出一些建议？

有人告诉我，在构建过程中，worklight 会将您的项目内容复制到您机器上的另一个目录中，我认为该目录的位置可能是问题所在，但我不确定如何检查以查看发生这种情况的位置。

**编辑：**按要求提供更多详细信息：

我的机器和我同事的机器都运行 Windows 7 Enterprise，具有 Intel 双核和 8G RAM。

包含项目的工作区位于本地 C: 驱动器的基础上，但用户配置文件/文件夹（例如我的文档）存储在共享网络驱动器上。项目本身为 143mb。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:05:55.113

据我所知，影响构建时间的因素很少：

*   项目大小（例如 100MB）
*   项目中的文件数（例如 1200 个文件）
*   你的环境进入了一个奇怪的状态。
*   有人报告[了添加新 Java 代码时的](https://www.ibm.com/developerworks/forums/thread.jspa?messageID=14931032)性能问题。
*   硬件

你可以试试：

*   通过删除不必要的文件、使用[有损压缩](https://en.wikipedia.org/wiki/Lossy_compression)压缩图像等来减小项目的大小。
*   连接 JS 和 CSS 文件等资源。
*   尝试使用托管在其他服务器上的资源，至少用于开发，例如：

    < script data-dojo-config="async: 1" src="http//ajax.googleapis.com/ajax/libs/dojo/1.8.1/dojo/dojo.js">

    <script src="http://code.jquery.com/jquery-1.9.1.min.js">

*   尝试创建一个新的 Workspace 并导入您的项目或删除（先备份！）项目的元数据目录和文件 ( `Workspace/WorklightServerHome`, `bin/`)。您可能会成功删除和重新创建本机环境文件夹。还有一个`-clean`标志[可以传递给 eclipse](http://www.eclipsezone.com/eclipse/forums/t61566.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T16:22:02.077

我能够解决我自己的问题，worklight 使用的是存储在我的共享网络驱动器上的 .wlapp。通过将 TEMP 和 TMP 环境变量更改为确定为本地的文件夹，例如 C:\TEMP，worklight 然后只访问本地文件，从而大大加快了构建过程。

# jquery - 无法让 .delay() 工作

> ID：14896462
> 
> 赞同：3
> 
> 时间：2013-02-15T14:06:20.700
> 
> 标签：jquery, delay

我对 jQuery 的经验几乎为零，所以就这样吧……我已经做了很多研究，但我就是不知道我做错了什么……

我希望两个 DIV 依次淡入，但在第一个和第二个之间有延迟。这是我到目前为止所拥有的：

```
 <script type="text/javascript">

$(document).ready(function(){

        $("div.1").hide();
        $("div.2").hide();
        $("div.1").fadeIn(400);
        $("div.2").delay(800).fadeIn(400);
});

</script>
<div class="1">
This is DIV1</div>
<div class="2">
This is DIV2</div> 
```

我真的希望你们能帮助我！提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:09:18.043

您需要使用回调函数：

```
("div.1").fadeIn(400, function() {$("div.2").delay(800).fadeIn(400);}); 
```

这样就完成了`div.2`will fire **after的淡入** `div.1` `fadeIn`

**不延误**

```
("div.1").fadeIn(400, function() {$("div.2").fadeIn(400);}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T14:36:43.833

[.delay 方法](http://api.jquery.com/delay/)是在 jQuery 1.4 中添加的，所以如果您正在加载 jQuery 1.3，正如您在评论中指出的那样，那就是您的问题。您的代码在 1.4 或更高版本中应该可以正常工作。

# jquery - 如何让同位素与动态 DOM 节点一起工作？

> ID：14896464
> 
> 赞同：4
> 
> 时间：2013-02-15T14:06:22.510
> 
> 标签：jquery, backbone.js, jquery-masonry, jquery-isotope

在 Backbone 视图的上下文中，我在 DOM 中添加和删除视图。但是，包含同位素元素的容器仅在初始加载期间有效；之后，当容器被移除并再次添加时，Isotope 没有按预期工作。

我在这里做了快速的 JSfiddle：http: [//jsfiddle.net/mulderp/T8aSQ/6/](http://jsfiddle.net/mulderp/T8aSQ/6/) -->

当我添加同位素容器时：

```
var list = '<div data-foo="bar" id="container"><div class="item red"></div><div class="item blue"></div></div>';
$container.html(list);
$container.isotope('shuffle'); 
```

Isotope 不再运行，尽管 DOM 结构看起来与第一个相似。

任何人都知道会发生什么，以及如何让同位素在第一次初始化期间重新读取元素？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T15:13:03.590

前段时间我偶然发现了同样的问题，如果你想在操作之间保持同位素的动画，我会以这种方式解决它：

在您的删除功能而不是`$container.html('');`写：

```
var elToRemove = $container.data('isotope').$filteredAtoms;
$container.isotope('remove',elToRemove); 
```

在您的 create 函数中，而不是`$container.html(list);`：

```
$container.isotope('insert',$(list)); 
```

否则，如果您不需要操作之间的动画，您可以保持函数原样，并在调用 shuffle 之前在 create 函数中重新初始化 Isotope。

工作小提琴：http: [//jsfiddle.net/T8aSQ/7/](http://jsfiddle.net/T8aSQ/7/)

# wordpress - 负边距 IE8 问题

> ID：14896465
> 
> 赞同：2
> 
> 时间：2013-02-15T14:06:22.743
> 
> 标签：wordpress, internet-explorer-8, margin

我正在尝试让我们的 Wordpress 博客在 IE8 及更低版本中显示得更好一些（它在 IE9、Firefox 和 Chrome 中运行良好）。一个大问题似乎是 IE8 缺乏对负边距的支持，因此我们在帖子列和侧面小部件之间存在的差距在 IE8 中不存在。

网址：[http ://trekcore.com/blog](http://trekcore.com/blog)

控制这种分离的 CSS 在这里：

```
#secondary {
float:right;
width:300px;
margin-right:-320px;
} 
```

任何有关在 IE8 及以下解决此问题的条件 CSS 建议的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:56:56.003

您应该验证您的 html 标记，35 个错误和 11 个警告将无济于事。

同时，试试这个修复：

```
.negative-margin-element {
    zoom: 1; /* ie hax*/
    position: relative; /* ie forced behavious*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:03:16.137

您正在使用 HTML5 元素，而 IE8 不理解它们并将忽略它们，并且您不能将 CSS 应用于它们，因为 IE8 不会知道它们存在。要修复 IE，您需要添加[html5shiv](http://code.google.com/p/html5shiv/)。这会将这些元素添加到 IE8 的 DOM 树中并将它们设置为块级别。

您可以编写自己的代码和 CSS 来做同样的事情，但 shiv 很方便。

# ruby-on-rails - Rails 中的会话 - 动态

> ID：14896466
> 
> 赞同：0
> 
> 时间：2013-02-15T14:06:24.093
> 
> 标签：ruby-on-rails, session, cookies

我[在这里问过类似的问题](https://stackoverflow.com/questions/14890795/rails-session-management/14890849#comment20885374_14890849)

现在我遇到了最后一个问题。我用：

```
config.action_controller.session_store = :cookie_store 
```

和

```
ActionController::Base.session = { 
     #:domain      => :all,
     :key         => 'xxxxxxxx',
     :secret      => 'xxxxxxxxxxx...',
     :expire_after => 5.minutes
      } 
```

这很好用，它确实设置了一个 cookie 5 分钟不活动。我现在要做的是当用户在登录之前点击记住我时，我想给它一个更长的超时值：

这是我使用的登录操作：

```
session_user = User.authenticate(params[:user][:email], params[:user][:password])   
    if session_user

      session[:user] = session_user.id
      @user=User.find(session[:user])
      @user.update_attributes(:last_login_time => Time.now(),:is_logged => true)
      @user.save
      flash[:message]  = "Login successful."
      redirect_to "/admin"
      #cookies[:userd] = {:value => session_user, :expires => Time.now + 12}
      if params[:remember_me]

        #base.request.session_options = request.session_options.dup
        #base.request.session_options[:expire_after]= 10000.minutes
        #base.request.session_options.freeze
        #session[:expire_after] = 96000.seconds.from_now
        #ActionController::Base.session_options[:expire_after] = 1.years
        #session[:expires] = Time.now + 1
      session[:expires_at] = 5.days
      end
    else
      flash[:warning] = "Your email or password is incorrect. Please re-enter."
    end
  end 
```

正如您在 IF 中看到的（当用户单击记住我时执行），我尝试了许多不同的方法，但除了 ActionController::Base.session_options[:expire_after] = 1.years 之外，它们都不起作用，但它似乎永久覆盖了 [expire_after] 变量。

我需要做什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-15T14:36:24.270

不是覆盖 ActionController::Base 设置你想要的吗？如果您将其设置为一年，那么您所说的是“永久”吗？删除块中除第 5 条注释行之外的所有内容`If`，并测试存储在会话中的内容以供下次登录。如果它持续超过 5 分钟，那么您已经回答了自己的问题。

要进行故障排除，请从浏览器中删除 cookie，或者通过`reset_session`输入登录操作（这将使 cookie 保留在原位，但数据为空），然后删除该行以进行下一次登录。

```
ActionController::Base.session_options[:expire_after] = 1.years 
```

应该管用。

# iphone - 如何将 uiwebview 的 url 编码为目标 c 中该 url 的确切 url？

> ID：14896467
> 
> 赞同：1
> 
> 时间：2013-02-15T14:06:25.630
> 
> 标签：iphone, objective-c, uiwebview, nsstring

我在 iOS 中遇到一个与提取字符串相关的问题。我从 WebView [http://m.youtube.com/index?&desktop_uri=%2F](http://m.youtube.com/index?&desktop_uri=%2F)获取 NSURL 值，但是我只需要提取[http://m.youtube.com](http://m.youtube.com)，我尝试了很多步骤，但是没有t工作，请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:43:16.070

看看`NSURL` [类引用](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)，我可以看到一个`NSURL`对象具有各种属性，可以满足您的需求：

```
http://m.youtube.com
|  A  |      B     |

A: Scheme
B: Host 
```

所以我认为你需要做的就是：

```
NSURL *url = ...;
NSString *scheme = url.scheme;
NSString *host = url.host;
NSLog(@"%@%@", scheme, host); 
```

任务完成。下一个！

# jquery - BlueImp Plugin jQuery File Upload：如何使用 fileInput 选项以便 fileupload() 可以绑定新的动态添加的输入？

> ID：14896468
> 
> 赞同：2
> 
> 时间：2013-02-15T14:06:29.233
> 
> 标签：jquery, file-upload, blueimp

我使用 BlueImp 插件上传我的文件。用户单击“添加文件”时会动态添加新的文件输入。
然后，当用户上传文件时，它会通过 AJAX 存储在我的 web 文件夹中。

我的第一个想法是在生成的 id 上调用 fileupload 方法（例如：`$('#files_0').fileupload( { //ajax processing } );`
但是这个解决方案不起作用，因为加载页面时输入不存在。

所以我需要类似的东西，`$('#files_0').live('click, function ({ fileupload( { //ajax processing } ) )};`但这也不起作用。

所以我检查了文档和论坛，发现这是使用该`fileInput`选项的解决方案。所以在这里我做了什么，但这不起作用..任何帮助都会很棒！

```
$('#myDiv').
    fileupload(
    {
        fileInput : $('#files_0),
        dataType: 'json',
        url:'{{ path('MyBundle_ajax_upload_picture') }}',
         progressall: function (e, data) 
         {
            var progress = parseInt(data.loaded / data.total * 100, 10);
            $('#progress .bar').css(
                'width',
                progress + '%'
            );
          },
         add: function (e, data) 
         {
            $(this).fileupload('process', data).done(function () {
            data.submit();
            });
          },
         done: function (e, data) 
         {
            $.each(data.result.files, function (index, file) {
            $('<p/>').text(file.name).appendTo(document.body);
            });
         },
        always: function (e, data) 
        {
           console.log(data);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T13:08:09.597

尝试这个：

```
$('#myDiv').on('change', '#files_0', function (e) {
    var $fileupload = $(this);
    $fileupload.fileupload({
        url: {{ path('MyBundle_ajax_upload_picture') }},
        dataType: 'json'
    });

    $fileupload.fileupload('add', {
        fileInput: $(this)
    });
}); 
```

# git - 了解文件上的 git diff

> ID：14896469
> 
> 赞同：0
> 
> 时间：2013-02-15T14:06:37.907
> 
> 标签：git, git-diff

以下输出`git diff`是什么意思？

```
diff --git a/README.md b/README.md
index 24aa464..49c20f4 100644
--- a/README.md
+++ b/README.md
@@ -1,3 +1,2 @@
 LINE1
-LINE2
 LINE3 
```

我想我理解“-”新 LINE2 表示工作区中的版本没有暂存的 LINE2，但这是什么`@@ -1,3 +1,2 @@`意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:11:34.507

这是 diff 与该块相关的行范围，即 a/README.md 中的第 1 到 3 行和 b/README.md 中的第 1 到 2 行。

# unit-testing - Jenkins 和 Google 测试（死亡测试）使用 fork()

> ID：14896473
> 
> 赞同：1
> 
> 时间：2013-02-15T14:06:59.230
> 
> 标签：unit-testing, jenkins, fork, googletest

我们为我们的项目使用 Jenkins 和 Google Test。

我为我们的代码编写了 GTest 死亡测试 (EXPECT_EXIT)。它分叉被测试的代码并捕获其返回代码。我的测试代码要么以信号 6 终止，要么以退出代码 0 终止。在我的本地机器上运行测试运行良好，它正确捕获了代码。

另一方面，詹金斯可能不会分叉（）？单元测试以信号 6 终止，构建失败。

任何想法如何解决这个问题？

# ruby-on-rails - 如何让 Google 忘记我有一个带有 Heroku SSL 的 SSL 网站

> ID：14896479
> 
> 赞同：1
> 
> 时间：2013-02-15T14:07:43.410
> 
> 标签：ruby-on-rails, ssl, heroku, google-search-console

我有一个网站[http://www.scubastic.com](http://www.scubastic.com)，我将其用作 Ruby on Rails 开发和 SEO hacking 的游乐场应用程序。我遇到了一个我自己似乎无法解决的问题，它围绕着 SSL、SEO 和 Heroku。

TL;DR：我有一个 SSL 站点，但我禁用了它，但 Google 仍然记得 SSL 站点。当 SSL 站点仍然响应但出现证书错误时，如何让 Google 切换到非 SSL 站点？

基本上，当我第一次创建 Scubastic.com 时，我将 Heroku SSL 设置为学习它的练习。我设置了 Google Web Master Tools 并开始尝试 SEO 的各个方面。在我满意之后，我禁用了 Heroku SSL 并停止了每月的账单。

现在我有一个非常有趣的问题。Google 似乎无法忘记我网站的 HTTPS 版本，并且索引已经过时了。更糟糕的是，人们在 Google 中获得的链接会以 SSL 证书问题（*.herokuapp.com 证书与 www.scubastic.com 问题不匹配）打招呼，这对我的页面排名没有任何帮助。如果我手动单击 SSL 错误，我确实会到达该网站。我觉得这很奇怪，因为我完全删除了 Heroku SSL，应用程序仍然响应 SSL 请求……对我来说，这是 Heroku 中的一个错误，我希望我能更好地控制这种情况。唉，我转而尝试在应用层处理这个问题，因为 SSL 请求仍然会命中 Rails 堆栈（即使这些请求根本不应该响应！）

因此，如果有任何请求以 SSL 形式进入应用程序，我第一次尝试修复 Google 索引是设置 301 Moved Permanently 重定向。

```
class ApplicationController < ActionController::Base

  before_filter :redirect_ssl

  private 

  #only need this until Google doesn't link to HTTPS anymore
  def redirect_ssl
    if request.ssl?
      redirect_to "http://#{request.host_with_port}#{request.fullpath}", 
                  :status => :moved_permanently
    end
  end
end 
```

如果你去谷歌搜索我的网站名称，你会看到我遇到的问题：

[https://www.google.com/?q=scubastic](https://www.google.com/?q=scubastic)

我基本上只是希望 Google 停止链接到我的 SSL 网站并使用最新内容进行刷新。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:43:47.130

我能够用我原来的帖子和**很大的耐心**解决这个问题。谷歌花了 5 天时间更新其索引，但现在谷歌提供给我的网站的链接是非 ssl 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:56:32.163

重定向目前无济于事，因为当浏览器在尝试建立与 Heroku 的 SSL 连接时获得无效证书时会出现问题，而那是在任何 HTTP 完成之前。我认为这不是 Heroku 的错误：您删除了 SSL（并暗示了证书），这让 Heroku 无法正确响应对您域的 SSL 连接请求。

以下是您可以执行的操作：

1.  在 Heroku 上重新添加 SSL
2.  添加您拥有的重定向
3.  等待谷歌适应变化
4.  移除 SSL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T09:01:54.123

还可以选择主动要求 Google 删除该页面，因为它已经过时/不再可用：查看网站管理员工具帮助以了解如何[“从 Google 中删除旧的或已删除的信息”](https://support.google.com/webmasters/answer/1663691?hl=en)。

# git - 一个 git 存储库可以跟踪颠覆和 git 远程吗？

> ID：14896481
> 
> 赞同：3
> 
> 时间：2013-02-15T14:07:48.247
> 
> 标签：git, git-svn, multiple-repositories

我将为我们的合作伙伴建立额外的存储库，而我们的官方存储库是 svn，我可以自由地为我们的合作伙伴选择存储库。

我的想法是使用 git-svn 克隆我们的 repo（我们称之为 repo1），为我们的合作伙伴创建 git 存储库并使用 repo1 跟踪合作伙伴存储库。这可能不会让 git-svn 感到困惑吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T23:07:32.497

您的建议是 git-svn 不支持开箱即用。核心代码认为 git-svn 是一个类似 git 的 svn 客户端，但不是一个完整的 git 存储库环境。[这是Pro Git](http://git-scm.com/book/en/Git-and-Other-Systems-Git-and-Subversion)的摘录，这是一本免费的在线手册，其中包含有关 git-svn 的详细信息：

> 不要在单独的 Git 服务器上设置和协作。可能有一个为新开发人员加速克隆，但不要向它推送任何没有 git-svn-id 条目的东西。你甚至可能想要添加一个 pre-receive 钩子来检查每个提交消息的 git-svn-id 并拒绝包含没有它的提交的推送。

原因与 git-svn 分配 git-svn-id 的方式有关。对于您的用例，我会尝试[Subgit](http://subgit.com/)。允许 git 存储库网络和旧版 SVN 存储库之间的完全集成。

# c++ - 在另一个类中调用一个类的方法？

> ID：14896483
> 
> 赞同：-1
> 
> 时间：2013-02-15T14:07:54.373
> 
> 标签：c++, class, syntax, methods, linked-list

我为链表中的节点定义了以下类：

```
template <class T>
struct ListItem
{
    T value;
    List<T> wordList; // <--------
    ListItem<T> *next;
    ListItem<T> *prev;

    ListItem(T theVal)
    {
       this->value = theVal;
       this->next = NULL;
       this->prev = NULL;
    }
}; 
```

上面的类包含另一个类，即List，它有自己的功能，其中一个是insertAtEnd。我创建了一个 ListItem，我想通过调用 insertAtEnd 来更改它的 wordList 组件的值。这样做的语法是什么？

这是列表类：

```
template <class T>
class List
{
    ListItem<T> *head;

public:

    // Constructor
    List();         //done

    //test function
    void displaylist();

    // Copy Constructor
    List(const List<T>& otherList);       //done

    // Destructor
    ~List();

    // Insertion Functions
    void insertAtHead(T item);        //done
    void insertAtTail(T item);        //done
    void insertAfter(T toInsert, T afterWhat);    //done
    void insertSorted(T item);                    //done

    // Lookup Functions
    ListItem<T> *getHead();                       //done
    ListItem<T> *getTail();                       //done
    ListItem<T> *searchFor(T item);               //done

    // Deletion Functions
    void deleteElement(T item);                   //done
    void deleteHead();
    void deleteTail();                            //done

    // Utility Functions
    int length();                                 //done
 }; 
```

这是 insertAtTail 函数的实现。

```
template <class T>
void List<T>::insertAtTail(T item)
{
    ListItem<T>* a = new ListItem<T>(item);

    if(head==NULL)
    {
        head=a;
    }

    else
    {
        ListItem<T>* temp;
        temp=head;

        while(temp->next!=NULL)
        {
            temp=temp->next;
        }
        temp->next=a;
        a->prev=temp;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:11:05.760

就像是

```
wordList.insertAtEnd( .... arguments ....); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:12:39.763

1.  我不知道你的确切用例，但我**真的怀疑**a`ListItem`应该有`List`
2.  简单地使用`wordList`do `this->wordList.insertAtEnd(........)`(`this`在这里不是必须的)。

# iphone - UISearchbar 以编程方式 iphone

> ID：14896485
> 
> 赞同：1
> 
> 时间：2013-02-15T14:07:59.527
> 
> 标签：iphone, ios, objective-c

是否有可能以编程方式使 UISearchbar 类似于下图？

![在此处输入图像描述](../Images/a689d0d053752cd5cbd18e5006ec2cab.png)

我不知道继续，请帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:14:38.293

您可以简单地使用背景图像：

```
[[UISearchBar appearance] setSearchFieldBackgroundImage:[UIImage imageNamed:@"bgimage.png"]forState:UIControlStateNormal]; 
```

或者您可以继承 UISearchBar 并覆盖 layoutSubviews 方法，就像在这个线程中解释的那样：

[在 iPhone 应用程序开发中自定义搜索栏](https://stackoverflow.com/questions/8654967/customizing-search-bar-in-iphone-application-development)

# c# - 泛型规则和类型约束

> ID：14896487
> 
> 赞同：6
> 
> 时间：2013-02-15T14:08:03.150
> 
> 标签：c#, .net, generics

只是出于好奇，为什么编译器对待不受约束的泛型类型与 typeof(object) 有任何不同？

```
class Bar { }

class Foo
{
    void foo(object thing)
    {
        ((Bar)thing).ToString();
    }
}

class Foo<T>
{
    void foo(T thing)
    {
        ((Bar)thing).ToString();
    }
} 
```

在上面，将“T thing”转换为 Bar 会导致编译器错误。然而，将“对象事物”转换为 Bar 是编译器允许我做的事情，当然风险自负。

我不明白为什么。毕竟在 .net 中的对象是一个包罗万象的对象，运行时类型可以是装箱的值或任何类型的对象。所以我看不出编译器有什么逻辑理由来区分这两种情况。我能做的最好的事情是“程序员希望编译器对泛型类型进行类型检查，而不是对对象进行类型检查”。:) 这就是它的全部内容吗？

顺便说一句，我知道我仍然可以在 Foo 案例中完成我的演员表，只需编写

```
((Bar)(object)thing).ToString(); 
```

我只是想了解为什么编译器会这样做......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T14:14:11.030

这里的意义在于`object`。如果第一个示例**不是其他`object`**示例，它的行为将相同。基本上，你现在在这里说的是：

```
(Bar)thing 
```

是：“将a转换`T`为a `Bar`”；在一般情况下，这远不合法。通过添加`object`你使它：

```
(Bar)(object)thing 
```

这是“将 a 转换`T`为`object`...” - 这始终是合法的，因为`object`它是所有托管类型的根；并注意这可能会涉及一个框 - “......然后再次将其转换`object`为一个`Bar`”; 它在编译时总是合法的，并且在运行时涉及类型检查（“unbox-any”）。

例如：假设`T`是`DateTime`...

```
DateTime thing = ...
Bar bar = (Bar)(object)thing; 
```

完全有效；确定它会在运行时失败，但是：这是您需要牢记的场景。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T14:19:32.710

它归结为创建泛型的语义和目的。如果你有一个通用类型 T，编译器不会让你随意将它直接转换为任何其他对象。这是有道理的，因为 T 的目的是强制程序员指定 T 实际上是什么类型。它不会是“对象”，而是特定类型的对象。在编译时，编译器无法知道 T 中的内容，因此无法转换它。

从对象进行强制转换是因为它是一个匿名对象 - 与在其使用中定义的 KNOWN 对象类型相反。

这可以通过“where”子句进行扩展。例如，您可以指定 T 必须是 IBar 类型；

```
interface IBar { }

class Bar : IBar { }

class Foo<T>
    where T : IBar
{
    void foo(T thing)
    {
        ((IBar)thing).ToString();
    }
} 
```

继承也适用于 where 子句；

```
class Bar { }

class Foo<T>
    where T : Bar
{
    void foo(T thing)
    {
        // now you don't need to cast at all as the compiler knows
        // exactly what type T is (at a parent level at least)
        thing.ToString();
    }
} 
```

# javascript - javascript做while，不写最后一个循环

> ID：14896491
> 
> 赞同：0
> 
> 时间：2013-02-15T14:08:11.470
> 
> 标签：javascript, do-while

我正在做一些功课，最后一个问题是我的屁股，每次我运行它时，它都不会显示最后输入的信息循环。所以输入 3 个循环，只会显示 2 个。

感谢您的任何帮助。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Casino_Eric</title>
    <script type="text/javascript">

        document.write( "<h1>Casino_Eric</h1>" );
        var CashierID, CustomerCount=0, TotalChips, OverAllValue, EndOrContinue;
        var BlueValue = 5, BlackValue = 20, RedValue = 50, GreenValue = 100;
        var BlueQty, BlackQty, RedQty, GreenQty;
        var BlueResult, BlackResult, RedResult, GreenResult;

        CashierID = window.prompt("Enter 6 digit cashier ID.", "000000");
            do{
                BlueQty = window.prompt("Enter Number of Blue Chips", "0");
                BlackQty = window.prompt("Enter Number of Black Chips", "0");
                RedQty = window.prompt("Enter Number of Red Chips", "0");
                GreenQty = window.prompt("Enter Number of Green Chips", "0");

                BlueResult = BlueQty * BlueValue;
                BlackResult = BlackQty * BlackValue;
                RedResult = RedQty * RedValue;
                GreenResult = GreenQty * GreenValue;
                OverAllValue = BlueResult + BlackResult + RedResult + GreenResult;

                EndOrContinue = parseInt(window.prompt("Would you like to end your shift now "+CashierID+" or count the chips for another customer?  Enter 1 to contiue, or N to quit.", "n"));
                    if(isNaN(EndOrContinue));
                    else{
                    CustomerCount++;
                    document.write("<p>Cashier ID: "+CashierID+", Customer : "+CustomerCount+"</br> Number of Blue Chips: "+BlueQty+", total value of Blue Chips is: "+BlueValue+"</br>Number of Black Chips: "+BlackQty+", total value of Black Chips is: "+BlackValue+"</br>Number of Red Chips: "+RedQty+", total value of Red Chips is: "+RedValue+"</br>Number of Green Chips: "+GreenQty+", total value of Green Chips is: "+GreenValue+"</br>This customer's total value is "+OverAllValue+".</p>");

                    }
                }
            while(!isNaN(EndOrContinue));

        </script>
    </head>
    <body>  
        <p>Reload for another conversion</p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:29:22.167

这是由于 if 语句的错误放置。现在它会为你工作

```
 <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Casino_Eric</title>
        <script type="text/javascript">

            document.write( "<h1>Casino_Eric</h1>" );
            var CashierID, CustomerCount=0, TotalChips, OverAllValue, EndOrContinue;
            var BlueValue = 5, BlackValue = 20, RedValue = 50, GreenValue = 100;
            var BlueQty, BlackQty, RedQty, GreenQty;
            var BlueResult, BlackResult, RedResult, GreenResult;

            CashierID = window.prompt("Enter 6 digit cashier ID.", "000000");
                do{
                    BlueQty = window.prompt("Enter Number of Blue Chips", "0");
                    BlackQty = window.prompt("Enter Number of Black Chips", "0");
                    RedQty = window.prompt("Enter Number of Red Chips", "0");
                    GreenQty = window.prompt("Enter Number of Green Chips", "0");

                    BlueResult = BlueQty * BlueValue;
                    BlackResult = BlackQty * BlackValue;
                    RedResult = RedQty * RedValue;
                    GreenResult = GreenQty * GreenValue;
                    OverAllValue = BlueResult + BlackResult + RedResult + GreenResult;

                        document.write("<p>Cashier ID: "+CashierID+", Customer : "+CustomerCount+"</br> Number of Blue Chips: "+BlueQty+", total value of Blue Chips is: "+BlueValue+"</br>Number of Black Chips: "+BlackQty+", total value of Black Chips is: "+BlackValue+"</br>Number of Red Chips: "+RedQty+", total value of Red Chips is: "+RedValue+"</br>Number of Green Chips: "+GreenQty+", total value of Green Chips is: "+GreenValue+"</br>This customer's total value is "+OverAllValue+".</p>");

                    EndOrContinue = parseInt(window.prompt("Would you like to end your shift now "+CashierID+" or count the chips for another customer?  Enter 1 to contiue, or N to quit.", "n"));
                        if(!isNaN(EndOrContinue)){
                        CustomerCount++;
                        }
                    }while(!isNaN(EndOrContinue));

            </script>
        </head>
        <body>  
            <p>Reload for another conversion</p>
        </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:28:42.390

作为一个“家庭作业”示例/问题（感谢您的诚实），我的回答就是这样的思想 - 您必须自己做作业，但这应该会有所帮助：

```
 EndOrContinue = parseInt(window.prompt("Would you like to end your shift now "+CashierID+" or count the chips for another customer?  Enter 1 to contiue, or N to quit.", "n"));
                    if(isNaN(EndOrContinue));
                    else{
                    CustomerCount++;
                    document.write("<p>Cashier ID: "+CashierID+", Customer : "+CustomerCount+"</br> Number of Blue Chips: "+BlueQty+", total value of Blue Chips is: "+BlueValue+"</br>Number of Black Chips: "+BlackQty+", total value of Black Chips is: "+BlackValue+"</br>Number of Red Chips: "+RedQty+", total value of Red Chips is: "+RedValue+"</br>Number of Green Chips: "+GreenQty+", total value of Green Chips is: "+GreenValue+"</br>This customer's total value is "+OverAllValue+".</p>");

                    }
                }
            while(!isNaN(EndOrContinue)); 
```

在这里，您根据问题设置值 - 好的。

*   然后在对之前的条目进行任何操作**之前**检查问题中设置的值
*   然后你忘记（跳过）对那些以前的条目做你需要做的事情
*   然后你检查问题的回答（再次）

为什么你甚至第一次检查（在你的循环内）？你能把它去掉吗？

# jquery - div 滚动在 Firefox 中不会触发

> ID：14896493
> 
> 赞同：0
> 
> 时间：2013-02-15T14:08:16.393
> 
> 标签：jquery, twitter-bootstrap

我有一个 div 在滚动时 jQuery 事件不会触发。我已经尝试过如下以及`$(".assignments-my-overflow")`. 它在 IE 中运行良好，类似的代码在 Firefox 中的精简示例中运行，但是我们网站中包含的 js 或 css 中的某些内容导致它无法在 Firefox 中运行。我目前正在使用 twitter bootstrap 2.0.4。我一直在寻找`preventDefault()`可能会阻止它但没有看到任何明显的呼叫。有没有一种更简单的方法来弄清楚为什么它不工作，而不是一次又一次地消除一点点的 css/js/html，这有点乏味？

```
<div id='assignments-my-overflow' style="height:<%=percent%>; overflow:auto">

...

$("div").on("scroll", function(){
   // alert('scroll');
   console.log("scroll");
   $(".combo-input").hide();
   $(".combo-input").show();       
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:15:42.153

这在 Firefox 中对我有用。

[http://jsfiddle.net/EvDL4/1/](http://jsfiddle.net/EvDL4/1/)

```
$("div").on("scroll", function(){
   alert('scroll');
   $(".combo-input").hide();
   $(".combo-input").show();       
}); 
```

# jmx - 使用现有 MBean 为 Java 应用程序启用 SNMP 监控

> ID：14896501
> 
> 赞同：1
> 
> 时间：2013-02-15T14:08:33.510
> 
> 标签：jmx, snmp, java-7, snmp4j

我正在寻找一个示例来公开已经通过带有 SNMP 的 MBean 服务器公开的方法。

我读到自 Java6 以来，JDK 已经支持这一点，但我也发现 snmp4j 作为一个库。但我找不到任何适合我的场景的例子，或者会有所帮助。

我已经将 MBean 注册到 MBeanServer，并且我正在寻找一种方法来增强我已经拥有的类，以使它们适合 SNMP。我不能使用 mibgen，因为它会反过来。

也许有人可以给我一个例子，说明我需要做什么才能通过一些 SNMP 管理器监控我的应用程序。

一个示例 MBean 将是

```
public interface ExporterMXBean {
public static String BEANNAME = "exporter:type=Exporter,name=Exporter";
String getOutputDirectory();
void setOutputDirectory(String outputDirectory);
void startExport();
    int getNumberOfThreadsWorking();
} 
```

我需要在接口的实现中添加什么，如何将其注册到 MIB，以及如何将其公开/查看给经理？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:26:46.913

我建议在 SNMP4J-Agent 和 SNMP4J 之上使用 SNMP4J-AgentJMX，就像在名为 JvmManagementMibInst.java 的 SNMP4J-AgentJMX 示例中一样。

使用这种方法，您无需修改​​现有的类 (MBean)。相反，您的程序或生成使用上述 API 的映射。

[SNMP4J-AgentJMX HowTo](https://oosnmp.net/confluence/x/DwBJ)中描述了基于 MBean 服务器的某些 MBean 创建 SNMP 代理的必要步骤的基本操作方法

# c++ - 只绑定一个参数，然后再绑定其余的

> ID：14896502
> 
> 赞同：0
> 
> 时间：2013-02-15T14:08:35.287
> 
> 标签：c++, boost, c++11, bind

我想测试不同的算法来计算加速（单核、cuda、多核）。函数头如下所示：

```
void fraktale_cpu_single(pfc::bitmap * bmp,
                         pfc::RGB_3_t * color_table,
                         const par::complex<float> C) 
```

我总是要初始化相同的数据，所以我想写一个函数来调用函数指针。

```
void do_function_with_pic(
    std::function<void(pfc::bitmap * bmp,
                       pfc::RGB_3_t * color_table,
                       const par::complex<float> C)> Func,
    const string pic_name) 
```

在单核和 cuda 中没问题，在多核中我希望能够更改正在解决问题的线程数量，所以我的多核函数还有一个参数：

```
void fraktale_cpu_multi(size_t threads,
                        pfc::bitmap * bmp,
                        pfc::RGB_3_t * color_table,
                        const par::complex<float> C) 
```

我正在尝试这个：

```
do_function_with_pic(bind(fraktale_cpu_multi, 1), "cpu_multi.bmp"); 
```

但我得到一个错误，因为没有设置其他参数，我该怎么办？- 也可以使用 Boost 库！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T14:11:35.123

您必须为函数的其余参数使用**占位符：**

```
#include <functional>

using std::bind;
using namespace std::placeholders; // Namespace for _1, _2, ...

do_function_with_pic(bind(fraktale_cpu_multi, 1, _1, _2, _3), "cpu_multi.bmp"); 
```

`std::bind``fraktale_cpu_multi()`将返回一个函数对象，该对象在第一个参数设置为 的情况下调用您的函数`1`，并将其三个参数`fraktale_cpu_multi()`作为第二个、第三个和第四个参数转发给。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:11:27.733

你需要这样的东西：

```
#include <functional>

std::bind(fraktale_cpu_multi, 1,
          std::placeholders::_1, std::placeholders::_2, std::placeholders::_3) 
```

# xml - 如何使用 xPath 1.0 检查 id 引用是否有效？

> ID：14896508
> 
> 赞同：0
> 
> 时间：2013-02-15T14:08:46.763
> 
> 标签：xml, xslt, xpath

我是 xml、xsl 和 xPath 的初学者。我想知道如何检查我所有的 refid 属性是否有效？

换句话说，如果每个 refid 属性都有一个匹配的 ID 属性（当然具有相同的值），我希望有一个返回 TRUE 的 xPath 1.0 查询。所有产品都不需要有 ref 节点。

例如：如果 cookie 指向面包，面包指向牛奶，牛奶指向 cookie，则返回 TRUE，否则返回 FALSE。

我一直在尝试解决这个问题，并在网上搜索了一个没有运气的好例子。帮助将不胜感激！

这是我的 XML：

```
<shop>
 <product>
    <cookie ID="01">
    <price>2</price>
    </cookie>
    <ref refid="02"/>
 </product>

  <product>
    <bread ID="02">
    <price>5</price>
    </bread>
    <ref refid="03"/>
 </product>

 <product>
   <milk ID="03">
   <price>2</price>
   </milk>
   <ref refid="01"/>
</product>

</shop> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:46:25.317

随着问题被标记`xslt`以及`xpath`我敢于建议使用密钥的 XSLT 1.0 方法：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

<xsl:key name="id" match="product" use="*[1]/@ID"/>

<xsl:template match="/">
  <xsl:choose>
    <xsl:when test="//ref[not(key('id', @refid))]">FALSE</xsl:when>
    <xsl:otherwise>TRUE</xsl:otherwise>
  </xsl:choose>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:53:50.597

你可以使用`boolean()`. 以下将返回`true`or `false`：

```
boolean(not(//@refid[not(.=//@ID)])) 
```

XSLT 示例：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/">
        <xsl:value-of select="boolean(not(//@refid[not(.=//@ID)]))"/>
    </xsl:template>

</xsl:stylesheet> 
```

`boolean()`也可以用于 Martin 更高效的`xsl:key`版本：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:key name="id" match="product" use="*[1]/@ID"/>

    <xsl:template match="/">
        <xsl:value-of select="boolean(not(//ref[not(key('id', @refid))]))"/>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T15:01:41.633

查找所有`@refid`不匹配的属性`@id`。

```
//@refid[not(//@ID = .)] 
```

如果您计算结果并将其与零进行比较，它将返回`true`有效输入和`false`损坏的引用。

```
count(//@refid[not(//@ID = .)]) = 0 
```

# java - 直接在玻璃板上绘图：不工作

> ID：14896509
> 
> 赞同：0
> 
> 时间：2013-02-15T14:08:47.390
> 
> 标签：java, swing, glasspane

我正在使用 Swing 开发一个应用程序。当用户与应用程序交互时，帮助数据可能会在屏幕的封闭部分中可用，当这种情况发生时，我想画一个指向该部分的小箭头。

为此，我扩展了一个 JPanel 并将其添加为应用程序 jframe 的玻璃窗格。自定义玻璃窗格类的名称是 AlertGlassPane。

AlertGlassPane 执行此操作：等待新的帮助数据可用。当发生这种情况并且帮助部分关闭时，它会在屏幕上找到帮助部分的位置，然后在其旁边绘制一个动画箭头。

为了绘制箭头，我扩展了玻璃窗格的 paintComponent 方法。

为了使箭头动画化，我创建了一个每 100 毫秒循环一次的小线程，在玻璃窗格上调用 repaint。

问题：Java 忽略了我的绘图……如果触发动画开始并静止不动，则什么也不会发生。应用程序上不显示任何绘图。

我知道循环正在运行并且正在调用paintComponent，但是自定义绘制没有生效。

但是，如果我将鼠标移到应该呈现箭头的区域上，它确实如此！但就在鼠标移动的时候。如果停止移动鼠标，动画也会停止，并且箭头会在鼠标停止（或离开该区域）之前的最后一个位置冻结。

我尝试了很多东西（例如设置绘图的剪辑区域），但似乎没有任何效果。唯一有效的是当我从paintComponent 内部错误地调用repaint 时。

此时我正在寻找一种方法来与渲染系统通信，即我的玻璃窗格的给定区域需要重新绘制（repaint(x, y, w, h) 不起作用......）。也许将自定义渲染移动到 JLabel，然后将此标签添加到玻璃窗格？我不喜欢这种方法...

在此处发布代码段之前，我将尝试清理代码。这会有帮助吗？

提前致谢！

片段：

```
package br.com.r4j.test;

import java.awt.AlphaComposite;
import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridLayout;
import java.awt.Rectangle;
import java.awt.RenderingHints;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ComponentAdapter;
import java.awt.event.ComponentEvent;
import java.awt.event.FocusAdapter;
import java.awt.event.FocusEvent;
import java.awt.image.BufferedImage;
import java.util.Date;
import java.util.HashMap;
import java.util.Map;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.text.JTextComponent;

/**
 *
 * @author 
 */
public class TestGlassPaneAnimation extends JPanel
{
    private static TestGlassPaneAnimation gvp = new TestGlassPaneAnimation();

    public static void main(String args[])
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                JFrame f = new JFrame("Anitest in glass");
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                //f.setResizable(false);
                f.setLayout(new GridLayout(5, 3));

                f.add(new JLabel("First Name :"));
                f.add(new JTextField(20));
                f.add(new JLabel("Last Name :"));
                f.add(new JTextField(20));
                f.add(new JLabel("Phone Number :"));
                f.add(new JTextField(20));
                f.add(new JLabel("Email:"));
                f.add(new JTextField(20));
                f.add(new JLabel("Address :"));
                f.add(new JTextField(20));
                JButton btnStart = new JButton("Click me, please!");
                f.add(btnStart);

                btnStart.addActionListener(new ActionListener()
                {
                    public void actionPerformed(ActionEvent e)
                    {
                        gvp.startAnimation();
                    }
                });

                f.setGlassPane(gvp);

                f.pack();
                f.setVisible(true);
                gvp.setVisible(true);
            }

        });
    }

    private BufferedImage icon;
    private boolean animate = false;
    private long timeStart = 0;
    private Thread thrLastActive = null;

    public TestGlassPaneAnimation()
    {
        setLayout(null);//this is the exception to the rule case a layoutmanager might make setting Jlabel co-ords harder
        setOpaque(false);
        Icon icon1 = UIManager.getIcon("OptionPane.warningIcon");
        int imgW = icon1.getIconWidth();
        int imgH = icon1.getIconHeight();
        this.icon = ImageUtilities.getBufferedImageOfIcon(icon1, imgW, imgH);
        this.animate = false;
    }

    public void startAnimation()
    {
        this.animate = true;
        this.timeStart = (new Date()).getTime();

        if (this.thrLastActive != null)
            this.thrLastActive.interrupt();

        this.thrLastActive = new Thread(new Runnable() 
        {
            public void run()
            {
                try
                {
                    while (true)
                    {
                        // int x = 250, y = 250;
                        // int width = 60, height = 60;

                        Thread.currentThread().sleep(100);

                        // frmRoot.invalidate();
                        // repaint(x, y, width, height);
                        repaint(new Rectangle(x, y, width, height));
                        // repaint(new Rectangle(10, 10, 2000, 2000));
                        // repaint();
                        // paintComponent(getGraphics());
                    }
                }
                catch (Exception e)
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });

        this.thrLastActive.start();
    }

    protected void paintComponent(Graphics g)
    {
      try
      {
            // enables anti-aliasing
            Graphics2D g2 = (Graphics2D) g;
            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            java.awt.Composite composite = g2.getComposite();

            System.err.println("b1: " + g.getClipBounds());

            if (this.animate)
            {
                long timeSpent = (new Date()).getTime() - timeStart;

                int x = 10, y = 150;
                int width = 60, height = 60;
                float maxAlpha = 0.8f;
                x += (-100*Math.sin(5*2*Math.PI*timeSpent/10000)+50)/15;
                System.err.println("painting::x: " + x + ", y: " + y + ", sin: " + (Math.sin(6*2*Math.PI*timeSpent/10000)));

                // g.setClip(x-10, y-10, width, height);
                System.err.println("b2: " + g.getClipBounds());

                AlphaComposite alpha2 = AlphaComposite.SrcOver.derive(maxAlpha);
                g2.setComposite(alpha2);
                g2.drawImage(this.icon, x, y, null);
                g2.setComposite(composite);

                g2.setComposite(composite);
            }
      }
      catch (Throwable e)
      {
          System.err.println("Errr!");
          e.printStackTrace();
      }
    }

}

class ImageUtilities {

    public static BufferedImage resize(BufferedImage image, int width, int height) {
        BufferedImage bi = new BufferedImage(width, height, BufferedImage.TRANSLUCENT);
        Graphics2D g2d = (Graphics2D) bi.createGraphics();
        g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
        g2d.drawImage(image, 0, 0, width, height, null);
        g2d.dispose();
        return bi;
    }

    public static BufferedImage getBufferedImageOfIcon(Icon icon, int imgW, int imgH) {
        BufferedImage img = new BufferedImage(imgW, imgH, BufferedImage.TYPE_INT_ARGB);
        Graphics2D g2d = (Graphics2D) img.getGraphics();
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        icon.paintIcon(null, g2d, 0, 0);
        g2d.dispose();
        return img;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:59:41.290

嗯，不确定你给出的代码片段到底是怎么回事，但看起来它是从我的片段中获取的，所以我写了另一个例子（我不得不在`showWarningIcon(Component c)`和`refreshLocations()`方法中更改 1 或 2 行代码，但没什么大不了的：

如果键入了除了*david之外的任何内容，并且单击了按钮（**请单击我*），它将显示以下内容：

![在此处输入图像描述](../Images/68e4202d98f705fa6d5a27e637528008.png)

```
import java.awt.Component;
import java.awt.Graphics2D;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.RenderingHints;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ComponentAdapter;
import java.awt.event.ComponentEvent;
import java.awt.image.BufferedImage;
import java.util.HashMap;
import java.util.Map;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

public class TestGlassPaneAnimation {

    private static GlassValidationPane gvp = new GlassValidationPane();

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame f = new JFrame("Anitest in glass");
                f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                //f.setResizable(false);
                f.setLayout(new GridBagLayout());

                GridBagConstraints gc = new GridBagConstraints();
                gc.fill = GridBagConstraints.HORIZONTAL;
                gc.weightx = 1;
                gc.weighty = 1;
                gc.insets = new Insets(15, 15, 15, 15);//give some space so icon doesnt cover components when shown

                gc.gridx = 0;
                gc.gridy = 0;
                f.add(new JLabel("First Name:"), gc);

                final JTextField jtf = new JTextField(20);
                gc.gridx = 1;
                f.add(jtf, gc);

                gc.gridx = 0;
                gc.gridy = 1;
                f.add(new JLabel("Surname:"), gc);

                final JTextField jtf2 = new JTextField(20);
                gc.gridx = 1;
                f.add(jtf2, gc);

                JButton btnStart = new JButton("Click me, please!");
                gc.gridx = 2;
                f.add(btnStart, gc);

                btnStart.addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        if (!jtf.getText().equalsIgnoreCase("david")) {
                            gvp.showWarningIcon(jtf);
                        }
                    }
                });

                f.addComponentListener(new ComponentAdapter() {//so wjen frame is resized icons follow
                    @Override
                    public void componentResized(ComponentEvent ce) {
                        super.componentResized(ce);
                        gvp.refreshLocations();
                    }
                });
                f.setGlassPane(gvp);

                f.pack();
                f.setVisible(true);
                gvp.setVisible(true);
            }
        });
    }
}

class GlassValidationPane extends JPanel {

    private HashMap<Component, JLabel> warningLabels = new HashMap<>();
    private ImageIcon warningIcon;

    public GlassValidationPane() {
        setLayout(null);//this is the exception to the rule case a layoutmanager might make setting Jlabel co-ords harder
        setOpaque(false);
        Icon icon = UIManager.getIcon("OptionPane.warningIcon");
        int imgW = icon.getIconWidth();
        int imgH = icon.getIconHeight();
        BufferedImage img = ImageUtilities.getBufferedImageOfIcon(icon, imgW, imgH);
        warningIcon = new ImageIcon(ImageUtilities.resize(img, 24, 24));
    }

    void showWarningIcon(Component c) {
        if (warningLabels.containsKey(c)) {
            return;
        }

        JLabel label = new JLabel();
        label.setIcon(warningIcon);

        //int x=c.getX();//this will make it insode the component
        int x = c.getX() - warningIcon.getIconWidth();//this makes it appear outside/next to component if space
        int y = c.getY();

        label.setBounds(x, y, warningIcon.getIconWidth(), warningIcon.getIconHeight());
        add(label);
        revalidate();
        repaint();
        warningLabels.put(c, label);
    }

    public void removeWarningIcon(Component c) {
        for (Map.Entry<Component, JLabel> entry : warningLabels.entrySet()) {
            Component component = entry.getKey();
            JLabel jLabel = entry.getValue();
            if (component == c) {
                remove(jLabel);
                revalidate();
                repaint();
                break;
            }
        }
        warningLabels.remove(c);
    }

    public void refreshLocations() {
        for (Map.Entry<Component, JLabel> entry : warningLabels.entrySet()) {
            Component c = entry.getKey();
            JLabel label = entry.getValue();
            //int x=c.getX();//this will make it insode the component
            int x = c.getX() - label.getIcon().getIconWidth();//this makes it appear outside/next to component
            int y = c.getY();

            label.setBounds(x, y, label.getIcon().getIconWidth(), label.getIcon().getIconHeight());
            revalidate();
            repaint();
        }
    }
}

class ImageUtilities {

    public static BufferedImage resize(BufferedImage image, int width, int height) {
        BufferedImage bi = new BufferedImage(width, height, BufferedImage.TRANSLUCENT);
        Graphics2D g2d = (Graphics2D) bi.createGraphics();
        g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
        g2d.drawImage(image, 0, 0, width, height, null);
        g2d.dispose();
        return bi;
    }

    public static BufferedImage getBufferedImageOfIcon(Icon icon, int imgW, int imgH) {
        BufferedImage img = new BufferedImage(imgW, imgH, BufferedImage.TYPE_INT_ARGB);
        Graphics2D g2d = (Graphics2D) img.getGraphics();
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        icon.paintIcon(null, g2d, 0, 0);
        g2d.dispose();
        return img;
    }
} 
```

如果您正在寻找更成熟的库，请查看[JXLayer-Validation Overlays](http://www.pushing-pixels.org/2007/08/01/validation-overlays-using-jxlayer.html)和[Validation overlays using glass pane](http://www.pushing-pixels.org/2007/08/02/validation-overlays-using-glass-pane.html)。

也可能想在[这里](https://stackoverflow.com/questions/14305921/detecting-jtextfield-deselect-event/14305952#14305952)阅读它显示了许多验证文本字段数据（除了按钮按下）之类的方法`DocumentFilter`等`InputVerifier`。

# sql-server - 启用文件流 - 添加文件组文件流不起作用

> ID：14896521
> 
> 赞同：2
> 
> 时间：2013-02-15T14:09:27.640
> 
> 标签：sql-server

我正在尝试在我的数据库中启用 Filestream（我正在处理 (localdb)\v11.0）。

我去了 SQL 服务器配置管理器并启用了文件流，到目前为止一切顺利，然后我去了我的对象资源管理器并打开了我的服务器的属性，并在高级选项卡中我将 FileStream 访问级别更改为启用完全访问。

我查询为我的文件流添加一个文件组，但我总是收到以下错误：消息 5598，级别 16，状态 3，第 1 行用户实例不支持 FILESTREAM 功能。

这是我试图执行的查询：

```
ALTER DATABASE QuizDatabase ADD
FILEGROUP FileStreamQuizDatabase CONTAINS FILESTREAM;
GO 
```

我不知道我做错了什么，或者我是否应该启用其他功能。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-15T11:47:37.860

LocalDB 不支持文件流，使用 SQL Express 或完整版。

这是一个特征矩阵：

[http://blogs.msdn.com/b/jerrynixon/archive/2012/02/26/sql-express-v-localdb-v-sql-compact-edition.aspx](http://blogs.msdn.com/b/jerrynixon/archive/2012/02/26/sql-express-v-localdb-v-sql-compact-edition.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-21T12:03:49.110

（VS 集成）Microsoft SQL Server Data Tools（您似乎正在使用）似乎不支持文件流

根据[这个](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/ceeaf961-fe8e-430a-99b7-c83ff9de77c3/filestream-feature-is-not-supported-on-user-instances?forum=ssdt)（同样的问题）你必须使用普通的sql server

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-09T20:50:38.473

您必须在服务级别启用文件流。

1.  转到 SQL Server 配置工具文件夹 --> SQL Server 配置管理器 --> SQL Server 服务 --> 您的实例。
2.  双击并导航到文件流选项卡。
3.  启用并应用。
4.  重新启动您的实例，您应该一切顺利。

# css - p:commandButton 布局与 div 冲突

> ID：14896528
> 
> 赞同：0
> 
> 时间：2013-02-15T14:10:02.097
> 
> 标签：css, jsf-2, primefaces

我认为这是一个CSS问题。

我在页面顶部有一个固定栏，我想把它放在那里，向右对齐，ap:commandButton。但是 p:commandButton 呈现在 div 之外的左侧。

我已经检查过这可能是属性显示的问题，因为 h:form（必须封装 p:commandButton）将它定义为 display:block。如果我将按钮放在表单之外，它会在我想要的地方呈现为一种魅力 - 但是，当然，它不起作用..当我使用 h:form 时，按钮位置会改变。

我正在使用的CSS：

```
/*** Navigation bar ***/
body {
    padding: 0; /* Gets rid of the automatic padding */
    margin: 0; /*   on HTML documents */
    font-family: Lucida Grande, Helvetica, Arial, sans-serif;
    font-size: 12px;
}

#navigation {
    position: fixed;
    top: 0;
    width: 100%;
    color: #ffffff;
    height: 55px;
    padding-top: 0px;
    /* Adds shadow to the bottom of the bar */
    -webkit-box-shadow: 0px 0px 8px 0px #000000;
    -moz-box-shadow: 0px 0px 8px 0px #000000;
    box-shadow: 0px 0px 8px 0px #000000;
    /* Adds the transparent background */
    background-color: rgba(1, 1, 1, 0.9);
    color: rgba(1, 1, 1, 0.9);
}

#navigation a {
    font-size: 14px;
    padding-left: 15px;
    padding-right: 15px;
    color: white;
    text-decoration: none;
}

#navigation a:hover {
    color: grey;
}

#navigation img {
    padding-left: 250px;
} 
```

# wpf - 来自文件的 XAML 作为元素

> ID：14896529
> 
> 赞同：1
> 
> 时间：2013-02-15T14:10:05.950
> 
> 标签：wpf, xaml

嗨，我想在程序从外部文件启动期间加载我的元素。下面是我的代码：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:FromFile3d" x:Class="FromFile3d.MainWindow"

    Title="MainWindow" Height="400" Width="800">

<Grid>
    <Grid.Background>
        <LinearGradientBrush EndPoint="0.789,0.541" StartPoint="0.225,0.543">
            <GradientStop Color="Black" Offset="0.849"/>
            <GradientStop Color="#FF232323" Offset="1"/>
        </LinearGradientBrush>
    </Grid.Background>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="527*"/>
        <ColumnDefinition Width="265*"/>
    </Grid.ColumnDefinitions>

    <Button Content="Button" Grid.Column="1" HorizontalAlignment="Left" Height="26" Margin="161,28,0,0" VerticalAlignment="Top" Width="75"/>
    <Viewport3D x:Name="_viewport3D"  />
</Grid> 
```

最后一个 cs 用 load 方法

```
private void LoadCore()
    {
        string path = System.IO.Path.Combine(Directory.GetCurrentDirectory(), "test.xaml");
        if (path != null)
        {
            try
            {
                StreamReader mysr = new StreamReader(path);
                _viewport3D= XamlReader.Load(mysr.BaseStream) as Viewport3D;

            }
            catch (Exception e)
            {
                MessageBox.Show(
                    String.Format("Unable to parse file:\r\n\r\n{0}",
                    e.Message), "Error", MessageBoxButton.OK, MessageBoxImage.Error);
            }
        }
    } 
```

我要加载的文件是带有我的场景和模型的 Viewport3d 定义，并以 /Viewport3D 结尾（我无法粘贴它，不知道为什么）

我做错了什么？因为当程序启动时没有任何反应，我的模型是不可见的：>（这不是视口代码的问题，因为它在移动到外部文件之前工作正常）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:23:29.127

```
_viewport3D = XamlReader.Load(mysr.BaseStream) as Viewport3D; 
```

你不能像那样操纵控制树。相反，您应该附加元素。

首先，`Viewport3D`从 XAML 中删除 。

其次，给你的网格起一个名字，比如说`_grid`。

第三，将上述行更改为：

```
_grid.Children.Add(XamlReader.Load(mysr.BaseStream) as Viewport3D); 
```

这是操作控制树的适当方式。

# ruby-on-rails - 如何控制纯文本电子邮件视图 (.text.erb) 中的换行符

> ID：14896532
> 
> 赞同：9
> 
> 时间：2013-02-15T14:10:15.917
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer, plaintext

与大多数纯文本电子邮件相关的问题不同，我的问题是Rails 发送的纯文本电子邮件中有**太多换行符。**

为简单起见，我完全放弃了 HTML 电子邮件，只使用纯文本电子邮件（使用 .text.erb 视图）。我的问题出现在视图中有条件行的地方，因为我的视图文件中的新代码行会转移到电子邮件中。

例如：

```
 Line 1
    <%= "Line 2" if false %>
    Line 3 
```

将呈现为：

```
 Line 1

    Line 3 
```

而不是预期的输出：

```
 Line 1
    Line 3 
```

我目前的技巧是使用以下内容：

```
 Line 1
    <%= "Line 2\n" if false %>Line 3 
```

当连续有多个条件时，这可能会变得非常混乱。

肯定有更好的办法！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-01T04:56:30.393

This is to answer Felix' question on Andy Waite's answer (I don't think multi-line code is possible in comments and this question is *about* multi-line code).

I think `<%= "foo\n" if something -%>` would work, but this seems cleaner to me:

```
Line 1
<% if something -%>
foo
<% end -%>
Line 3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T14:36:23.617

如果您以此结束 ERB 标记`-%>`，则应避免多余的空格：

```
<%= "foo" -%> 
```

# git - Git“NO-HEAD”声明

> ID：14896533
> 
> 赞同：30
> 
> 时间：2013-02-15T14:10:29.690
> 
> 标签：git, egit

我正在为 Eclipse 使用 EGit 插件，但是每当我将项目添加到 Git 时，该插件都会在 Eclipse 目录视图中的项目文件夹旁边放置一个“NO-HEAD”指示。难道我做错了什么 ？这是什么意思 ？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-15T14:42:12.773

它可以简单地表示，在您进行第一次添加和首次提交之前，您没有分支（甚至没有分支`master`），因此没有`HEAD`引用任何分支。

请参阅“[为什么我需要显式推送新分支？](https://stackoverflow.com/a/17096880/6309) ”中的更多内容。

# c++ - 为什么我在检查核心转储时进入 gdb“无法访问地址 0x 的内存...”？

> ID：14896534
> 
> 赞同：17
> 
> 时间：2013-02-15T14:10:31.847
> 
> 标签：c++, memory-management, assembly, gdb, coredump

当我在分析核心转储时尝试打印以下行时收到此消息。

```
(gdb) p/x *($esi)
Cannot access memory at address 0xe6d3a030 
```

我提到指向的地址`%esi` `(0xe6d3a030)`应该指向一些有效的分配数据。（当我自己运行这个程序并按照相同的指令中断时，这个打印有一些有意义的信息）

造成这种情况的可能原因是什么？我错过了核心转储中的一些信息吗？

如果是，我缺少什么信息？核心转储不应该包含所有已分配内存的快照吗？

编辑：当我在加载核心转储时在 gdb“维护信息部分”命令中使用时，我得到下面显示的信息。我可以看到地址 0xe6d3a030 在范围内 `0xe6d00000->0xe6dfb000 at 0x0f5aa000: load93 ALLOC LOAD HAS_CONTENTS`这不是说它被加载了吗？

```
(gdb) maintenance info sections 
Exec file:
    `/home/Administrator/Documents/coredump/myproc-debug-8.1.bin', file type elf32-i386.
    0x8048134->0x8048147 at 0x00000134: .interp ALLOC LOAD READONLY DATA HAS_CONTENTS
    0x8048148->0x8048168 at 0x00000148: .note.ABI-tag ALLOC LOAD READONLY DATA HAS_CONTENTS
    0x8048168->0x804818c at 0x00000168: .note.gnu.build-id ALLOC LOAD READONLY DATA HAS_CONTENTS
    0x804818c->0x80acd94 at 0x0000018c: .gnu.hash ALLOC LOAD READONLY DATA HAS_CONTENTS
    0x80acd94->0x8180d14 at 0x00064d94: .dynsym ALLOC LOAD READONLY DATA HAS_CONTENTS
    0x8180d14->0x839a757 at 0x00138d14: .dynstr ALLOC LOAD READONLY DATA HAS_CONTENTS
    0x839a758->0x83b4f48 at 0x00352758: .gnu.version ALLOC LOAD READONLY DATA HAS_CONTENTS
    0x83b4f48->0x83b50c8 at 0x0036cf48: .gnu.version_r ALLOC LOAD READONLY DATA HAS_CONTENTS
    0x83b50c8->0x83b5150 at 0x0036d0c8: .rel.dyn ALLOC LOAD READONLY DATA HAS_CONTENTS
    0x83b5150->0x83b5950 at 0x0036d150: .rel.plt ALLOC LOAD READONLY DATA HAS_CONTENTS
    0x83b5950->0x83b5980 at 0x0036d950: .init ALLOC LOAD READONLY CODE HAS_CONTENTS
    0x83b5980->0x83b6990 at 0x0036d980: .plt ALLOC LOAD READONLY CODE HAS_CONTENTS
    0x83b6990->0x8d9771c at 0x0036e990: .text ALLOC LOAD READONLY CODE HAS_CONTENTS
    0x8d9771c->0x8d97738 at 0x00d4f71c: .fini ALLOC LOAD READONLY CODE HAS_CONTENTS
    0x8d97740->0x904ef6a at 0x00d4f740: .rodata ALLOC LOAD READONLY DATA HAS_CONTENTS
    0x904ef6c->0x9099588 at 0x01006f6c: .eh_frame_hdr ALLOC LOAD READONLY DATA HAS_CONTENTS
    0x9099588->0x92015b4 at 0x01051588: .eh_frame ALLOC LOAD READONLY DATA HAS_CONTENTS
    0x92015b4->0x923e63a at 0x011b95b4: .gcc_except_table ALLOC LOAD READONLY DATA HAS_CONTENTS
    0x923f63c->0x923fbe8 at 0x011f663c: .ctors ALLOC LOAD DATA HAS_CONTENTS
    0x923fbe8->0x923fbf0 at 0x011f6be8: .dtors ALLOC LOAD DATA HAS_CONTENTS
    0x923fbf0->0x923fbf4 at 0x011f6bf0: .jcr ALLOC LOAD DATA HAS_CONTENTS
    0x923fbf4->0x923fce4 at 0x011f6bf4: .dynamic ALLOC LOAD DATA HAS_CONTENTS
    0x923fce4->0x923fce8 at 0x011f6ce4: .got ALLOC LOAD DATA HAS_CONTENTS
    0x923fce8->0x92400f4 at 0x011f6ce8: .got.plt ALLOC LOAD DATA HAS_CONTENTS
    0x9240100->0x929032c at 0x011f7100: .data ALLOC LOAD DATA HAS_CONTENTS
    0x9290340->0x9302aa8 at 0x0124732c: .bss ALLOC
    0x0000->0x0087 at 0x0124732c: .comment READONLY HAS_CONTENTS
    0x0000->0x19810 at 0x012473b3: .debug_aranges READONLY HAS_CONTENTS
    0x0000->0x1b9b06 at 0x01260bc3: .debug_pubnames READONLY HAS_CONTENTS
    0x0000->0x1666e04 at 0x0141a6c9: .debug_info READONLY HAS_CONTENTS
    0x0000->0x18736b at 0x02a814cd: .debug_abbrev READONLY HAS_CONTENTS
    0x0000->0x2f1118 at 0x02c08838: .debug_line READONLY HAS_CONTENTS
    0x0000->0x1f9f4 at 0x02ef9950: .debug_frame READONLY HAS_CONTENTS
    0x0000->0x321836 at 0x02f19344: .debug_str READONLY HAS_CONTENTS
    0x0000->0x3b2f6e at 0x0323ab7a: .debug_loc READONLY HAS_CONTENTS
    0x0000->0x115b29 at 0x035edae8: .debug_pubtypes READONLY HAS_CONTENTS
    0x0000->0x48290 at 0x03703611: .debug_ranges READONLY HAS_CONTENTS
Core file:
    `/home/Administrator/Documents/coredump/core.myproc.20815', file type elf32-i386.
    0x0000->0x7eb4 at 0x000016f4: note0 READONLY HAS_CONTENTS
    0x0000->0x0044 at 0x00001750: .reg/21153 HAS_CONTENTS
    0x0000->0x0044 at 0x00001750: .reg HAS_CONTENTS
    0x0000->0x00a0 at 0x0000183c: .auxv HAS_CONTENTS
    0x0000->0x006c at 0x000018f0: .reg2/21153 HAS_CONTENTS
    0x0000->0x006c at 0x000018f0: .reg2 HAS_CONTENTS
    0x0000->0x0200 at 0x00001970: .reg-xfp/21153 HAS_CONTENTS
    0x0000->0x0200 at 0x00001970: .reg-xfp HAS_CONTENTS
    0x0000->0x0044 at 0x00001c10: .reg/21158 HAS_CONTENTS
    0x0000->0x006c at 0x00001c6c: .reg2/21158 HAS_CONTENTS
    0x0000->0x0200 at 0x00001cec: .reg-xfp/21158 HAS_CONTENTS
    0x0000->0x0044 at 0x00001f8c: .reg/20924 HAS_CONTENTS
    0x0000->0x006c at 0x00001fe8: .reg2/20924 HAS_CONTENTS
    0x0000->0x0200 at 0x00002068: .reg-xfp/20924 HAS_CONTENTS
    0x0000->0x0044 at 0x00002308: .reg/21205 HAS_CONTENTS
    0x0000->0x006c at 0x00002364: .reg2/21205 HAS_CONTENTS
    0x0000->0x0200 at 0x000023e4: .reg-xfp/21205 HAS_CONTENTS
    0x0000->0x0044 at 0x00002684: .reg/21204 HAS_CONTENTS
    0x0000->0x006c at 0x000026e0: .reg2/21204 HAS_CONTENTS
    0x0000->0x0200 at 0x00002760: .reg-xfp/21204 HAS_CONTENTS
    0x0000->0x0044 at 0x00002a00: .reg/21156 HAS_CONTENTS
    0x0000->0x006c at 0x00002a5c: .reg2/21156 HAS_CONTENTS
    0x0000->0x0200 at 0x00002adc: .reg-xfp/21156 HAS_CONTENTS
    0x0000->0x0044 at 0x00002d7c: .reg/21201 HAS_CONTENTS
    0x0000->0x006c at 0x00002dd8: .reg2/21201 HAS_CONTENTS
    0x0000->0x0200 at 0x00002e58: .reg-xfp/21201 HAS_CONTENTS
    0x0000->0x0044 at 0x000030f8: .reg/21157 HAS_CONTENTS
    0x0000->0x006c at 0x00003154: .reg2/21157 HAS_CONTENTS
    0x0000->0x0200 at 0x000031d4: .reg-xfp/21157 HAS_CONTENTS
    0x0000->0x0044 at 0x00003474: .reg/21150 HAS_CONTENTS
    0x0000->0x006c at 0x000034d0: .reg2/21150 HAS_CONTENTS
    0x0000->0x0200 at 0x00003550: .reg-xfp/21150 HAS_CONTENTS
    0x0000->0x0044 at 0x000037f0: .reg/21203 HAS_CONTENTS
    0x0000->0x006c at 0x0000384c: .reg2/21203 HAS_CONTENTS
    0x0000->0x0200 at 0x000038cc: .reg-xfp/21203 HAS_CONTENTS
    0x0000->0x0044 at 0x00003b6c: .reg/21200 HAS_CONTENTS
    0x0000->0x006c at 0x00003bc8: .reg2/21200 HAS_CONTENTS
    0x0000->0x0200 at 0x00003c48: .reg-xfp/21200 HAS_CONTENTS
    0x0000->0x0044 at 0x00003ee8: .reg/21154 HAS_CONTENTS
    0x0000->0x006c at 0x00003f44: .reg2/21154 HAS_CONTENTS
    0x0000->0x0200 at 0x00003fc4: .reg-xfp/21154 HAS_CONTENTS
    0x0000->0x0044 at 0x00004264: .reg/21202 HAS_CONTENTS
    0x0000->0x006c at 0x000042c0: .reg2/21202 HAS_CONTENTS
    0x0000->0x0200 at 0x00004340: .reg-xfp/21202 HAS_CONTENTS
    0x0000->0x0044 at 0x000045e0: .reg/20830 HAS_CONTENTS
    0x0000->0x006c at 0x0000463c: .reg2/20830 HAS_CONTENTS
    0x0000->0x0200 at 0x000046bc: .reg-xfp/20830 HAS_CONTENTS
    0x0000->0x0044 at 0x0000495c: .reg/20917 HAS_CONTENTS
    0x0000->0x006c at 0x000049b8: .reg2/20917 HAS_CONTENTS
    0x0000->0x0200 at 0x00004a38: .reg-xfp/20917 HAS_CONTENTS
    0x0000->0x0044 at 0x00004cd8: .reg/22600 HAS_CONTENTS
    0x0000->0x006c at 0x00004d34: .reg2/22600 HAS_CONTENTS
    0x0000->0x0200 at 0x00004db4: .reg-xfp/22600 HAS_CONTENTS
    0x0000->0x0044 at 0x00005054: .reg/20928 HAS_CONTENTS
    0x0000->0x006c at 0x000050b0: .reg2/20928 HAS_CONTENTS
    0x0000->0x0200 at 0x00005130: .reg-xfp/20928 HAS_CONTENTS
    0x0000->0x0044 at 0x000053d0: .reg/21258 HAS_CONTENTS
    0x0000->0x006c at 0x0000542c: .reg2/21258 HAS_CONTENTS
    0x0000->0x0200 at 0x000054ac: .reg-xfp/21258 HAS_CONTENTS
    0x0000->0x0044 at 0x0000574c: .reg/20918 HAS_CONTENTS
    0x0000->0x006c at 0x000057a8: .reg2/20918 HAS_CONTENTS
    0x0000->0x0200 at 0x00005828: .reg-xfp/20918 HAS_CONTENTS
    0x0000->0x0044 at 0x00005ac8: .reg/20915 HAS_CONTENTS
    0x0000->0x006c at 0x00005b24: .reg2/20915 HAS_CONTENTS
    0x0000->0x0200 at 0x00005ba4: .reg-xfp/20915 HAS_CONTENTS
    0x0000->0x0044 at 0x00005e44: .reg/20923 HAS_CONTENTS
    0x0000->0x006c at 0x00005ea0: .reg2/20923 HAS_CONTENTS
    0x0000->0x0200 at 0x00005f20: .reg-xfp/20923 HAS_CONTENTS
    0x0000->0x0044 at 0x000061c0: .reg/21206 HAS_CONTENTS
    0x0000->0x006c at 0x0000621c: .reg2/21206 HAS_CONTENTS
    0x0000->0x0200 at 0x0000629c: .reg-xfp/21206 HAS_CONTENTS
    0x0000->0x0044 at 0x0000653c: .reg/21160 HAS_CONTENTS
    0x0000->0x006c at 0x00006598: .reg2/21160 HAS_CONTENTS
    0x0000->0x0200 at 0x00006618: .reg-xfp/21160 HAS_CONTENTS
    0x0000->0x0044 at 0x000068b8: .reg/21151 HAS_CONTENTS
    0x0000->0x006c at 0x00006914: .reg2/21151 HAS_CONTENTS
    0x0000->0x0200 at 0x00006994: .reg-xfp/21151 HAS_CONTENTS
    0x0000->0x0044 at 0x00006c34: .reg/22042 HAS_CONTENTS
    0x0000->0x006c at 0x00006c90: .reg2/22042 HAS_CONTENTS
    0x0000->0x0200 at 0x00006d10: .reg-xfp/22042 HAS_CONTENTS
    0x0000->0x0044 at 0x00006fb0: .reg/20929 HAS_CONTENTS
    0x0000->0x006c at 0x0000700c: .reg2/20929 HAS_CONTENTS
    0x0000->0x0200 at 0x0000708c: .reg-xfp/20929 HAS_CONTENTS
    0x0000->0x0044 at 0x0000732c: .reg/20925 HAS_CONTENTS
    0x0000->0x006c at 0x00007388: .reg2/20925 HAS_CONTENTS
    0x0000->0x0200 at 0x00007408: .reg-xfp/20925 HAS_CONTENTS
    0x0000->0x0044 at 0x000076a8: .reg/20919 HAS_CONTENTS
    0x0000->0x006c at 0x00007704: .reg2/20919 HAS_CONTENTS
    0x0000->0x0200 at 0x00007784: .reg-xfp/20919 HAS_CONTENTS
    0x0000->0x0044 at 0x00007a24: .reg/21159 HAS_CONTENTS
    0x0000->0x006c at 0x00007a80: .reg2/21159 HAS_CONTENTS
    0x0000->0x0200 at 0x00007b00: .reg-xfp/21159 HAS_CONTENTS
    0x0000->0x0044 at 0x00007da0: .reg/21155 HAS_CONTENTS
    0x0000->0x006c at 0x00007dfc: .reg2/21155 HAS_CONTENTS
    0x0000->0x0200 at 0x00007e7c: .reg-xfp/21155 HAS_CONTENTS
    0x0000->0x0044 at 0x0000811c: .reg/20815 HAS_CONTENTS
    0x0000->0x006c at 0x00008178: .reg2/20815 HAS_CONTENTS
    0x0000->0x0200 at 0x000081f8: .reg-xfp/20815 HAS_CONTENTS
    0x0000->0x0044 at 0x00008498: .reg/21165 HAS_CONTENTS
    0x0000->0x006c at 0x000084f4: .reg2/21165 HAS_CONTENTS
    0x0000->0x0200 at 0x00008574: .reg-xfp/21165 HAS_CONTENTS
    0x0000->0x0044 at 0x00008814: .reg/20920 HAS_CONTENTS
    0x0000->0x006c at 0x00008870: .reg2/20920 HAS_CONTENTS
    0x0000->0x0200 at 0x000088f0: .reg-xfp/20920 HAS_CONTENTS
    0x0000->0x0044 at 0x00008b90: .reg/20921 HAS_CONTENTS
    0x0000->0x006c at 0x00008bec: .reg2/20921 HAS_CONTENTS
    0x0000->0x0200 at 0x00008c6c: .reg-xfp/20921 HAS_CONTENTS
    0x0000->0x0044 at 0x00008f0c: .reg/21216 HAS_CONTENTS
    0x0000->0x006c at 0x00008f68: .reg2/21216 HAS_CONTENTS
    0x0000->0x0200 at 0x00008fe8: .reg-xfp/21216 HAS_CONTENTS
    0x0000->0x0044 at 0x00009288: .reg/21189 HAS_CONTENTS
    0x0000->0x006c at 0x000092e4: .reg2/21189 HAS_CONTENTS
    0x0000->0x0200 at 0x00009364: .reg-xfp/21189 HAS_CONTENTS
    0x742000->0x743000 at 0x0000a000: load1a ALLOC LOAD READONLY CODE HAS_CONTENTS
    0x743000->0x743000 at 0x0000b000: load1b ALLOC READONLY CODE
    0x760000->0x761000 at 0x0000b000: load2 ALLOC LOAD READONLY HAS_CONTENTS
    0x761000->0x762000 at 0x0000c000: load3 ALLOC LOAD HAS_CONTENTS
    0x764000->0x765000 at 0x0000d000: load4a ALLOC LOAD READONLY CODE HAS_CONTENTS
    0x765000->0x765000 at 0x0000e000: load4b ALLOC READONLY CODE
    0x8ed000->0x8ed000 at 0x0000e000: load5 ALLOC READONLY
    0x8ee000->0x8f0000 at 0x0000e000: load6 ALLOC LOAD READONLY HAS_CONTENTS
    0x8f0000->0x8f1000 at 0x00010000: load7 ALLOC LOAD HAS_CONTENTS
    0x8f1000->0x8f4000 at 0x00011000: load8 ALLOC LOAD HAS_CONTENTS
    0x8f6000->0x8f7000 at 0x00014000: load9a ALLOC LOAD READONLY CODE HAS_CONTENTS
    0x8f7000->0x8f7000 at 0x00015000: load9b ALLOC READONLY CODE
    0x90d000->0x90e000 at 0x00015000: load10 ALLOC LOAD READONLY HAS_CONTENTS
    0x90e000->0x90f000 at 0x00016000: load11 ALLOC LOAD HAS_CONTENTS
    0x90f000->0x911000 at 0x00017000: load12 ALLOC LOAD HAS_CONTENTS
    0x913000->0x914000 at 0x00019000: load13a ALLOC LOAD READONLY CODE HAS_CONTENTS
    0x914000->0x914000 at 0x0001a000: load13b ALLOC READONLY CODE
    0x93b000->0x93c000 at 0x0001a000: load14 ALLOC LOAD READONLY HAS_CONTENTS
    0x93c000->0x93d000 at 0x0001b000: load15 ALLOC LOAD HAS_CONTENTS
    0x93f000->0x940000 at 0x0001c000: load16a ALLOC LOAD READONLY CODE HAS_CONTENTS
    0x940000->0x940000 at 0x0001d000: load16b ALLOC READONLY CODE
    0xa20000->0xa24000 at 0x0001d000: load17 ALLOC LOAD READONLY HAS_CONTENTS
    0xa24000->0xa26000 at 0x00021000: load18 ALLOC LOAD HAS_CONTENTS
    0xa26000->0xa2c000 at 0x00023000: load19 ALLOC LOAD HAS_CONTENTS
    0xa2e000->0xa2f000 at 0x00029000: load20a ALLOC LOAD READONLY CODE HAS_CONTENTS
    0xa2f000->0xa2f000 at 0x0002a000: load20b ALLOC READONLY CODE
    0xa4b000->0xa4c000 at 0x0002a000: load21 ALLOC LOAD HAS_CONTENTS
    0xa4e000->0xa4f000 at 0x0002b000: load22a ALLOC LOAD READONLY CODE HAS_CONTENTS
    0xa4f000->0xa4f000 at 0x0002c000: load22b ALLOC READONLY CODE
    0xa55000->0xa56000 at 0x0002c000: load23 ALLOC LOAD READONLY HAS_CONTENTS
    0xa56000->0xa57000 at 0x0002d000: load24 ALLOC LOAD HAS_CONTENTS
    0xd68000->0xd69000 at 0x0002e000: load25 ALLOC LOAD READONLY CODE HAS_CONTENTS
    0x8048000->0x8049000 at 0x0002f000: load26a ALLOC LOAD READONLY CODE HAS_CONTENTS
    0x8049000->0x8049000 at 0x00030000: load26b ALLOC READONLY CODE
    0x923f000->0x9291000 at 0x00030000: load27 ALLOC LOAD HAS_CONTENTS
    0x9291000->0x9303000 at 0x00082000: load28 ALLOC LOAD HAS_CONTENTS
    0x9303000->0x9303000 at 0x000f4000: load29 ALLOC
    0xa5b6000->0x11091000 at 0x000f4000: load30 ALLOC LOAD HAS_CONTENTS
    0xdcf00000->0xdcf4a000 at 0x06bcf000: load31 ALLOC LOAD HAS_CONTENTS
    0xdcf4a000->0xdcf4a000 at 0x06c19000: load32 ALLOC READONLY
    0xdd100000->0xdd138000 at 0x06c19000: load33 ALLOC LOAD HAS_CONTENTS
    0xdd138000->0xdd138000 at 0x06c51000: load34 ALLOC READONLY
    0xdd2f4000->0xdd2f5000 at 0x06c51000: load35 ALLOC LOAD READONLY HAS_CONTENTS
    0xdd2f5000->0xddffe000 at 0x06c52000: load36 ALLOC LOAD HAS_CONTENTS
    0xddffe000->0xddfff000 at 0x0795b000: load37 ALLOC LOAD READONLY HAS_CONTENTS
    0xddfff000->0xde9ff000 at 0x0795c000: load38 ALLOC LOAD HAS_CONTENTS
    0xde9ff000->0xdea00000 at 0x0835c000: load39 ALLOC LOAD READONLY HAS_CONTENTS
    0xdea00000->0xdf400000 at 0x0835d000: load40 ALLOC LOAD HAS_CONTENTS
    0xdf400000->0xdf462000 at 0x08d5d000: load41 ALLOC LOAD HAS_CONTENTS
    0xdf462000->0xdf462000 at 0x08dbf000: load42 ALLOC READONLY
    0xdf500000->0xdf521000 at 0x08dbf000: load43 ALLOC LOAD HAS_CONTENTS
    0xdf521000->0xdf521000 at 0x08de0000: load44 ALLOC READONLY
    0xdf600000->0xdf641000 at 0x08de0000: load45 ALLOC LOAD HAS_CONTENTS
    0xdf641000->0xdf641000 at 0x08e21000: load46 ALLOC READONLY
    0xdf7ff000->0xdf800000 at 0x08e21000: load47 ALLOC LOAD READONLY HAS_CONTENTS
    0xdf800000->0xe0200000 at 0x08e22000: load48 ALLOC LOAD HAS_CONTENTS
    0xe0200000->0xe0221000 at 0x09822000: load49 ALLOC LOAD HAS_CONTENTS
    0xe0221000->0xe0221000 at 0x09843000: load50 ALLOC READONLY
    0xe0300000->0xe0321000 at 0x09843000: load51 ALLOC LOAD HAS_CONTENTS
    0xe0321000->0xe0321000 at 0x09864000: load52 ALLOC READONLY
    0xe0400000->0xe0421000 at 0x09864000: load53 ALLOC LOAD HAS_CONTENTS
    0xe0421000->0xe0421000 at 0x09885000: load54 ALLOC READONLY
    0xe0500000->0xe0521000 at 0x09885000: load55 ALLOC LOAD HAS_CONTENTS
    0xe0521000->0xe0521000 at 0x098a6000: load56 ALLOC READONLY
    0xe0600000->0xe0621000 at 0x098a6000: load57 ALLOC LOAD HAS_CONTENTS
    0xe0621000->0xe0621000 at 0x098c7000: load58 ALLOC READONLY
    0xe0700000->0xe0742000 at 0x098c7000: load59 ALLOC LOAD HAS_CONTENTS
    0xe0742000->0xe0742000 at 0x09909000: load60 ALLOC READONLY
    0xe0800000->0xe0821000 at 0x09909000: load61 ALLOC LOAD HAS_CONTENTS
    0xe0821000->0xe0821000 at 0x0992a000: load62 ALLOC READONLY
    0xe09ff000->0xe0a00000 at 0x0992a000: load63 ALLOC LOAD READONLY HAS_CONTENTS
    0xe0a00000->0xe1400000 at 0x0992b000: load64 ALLOC LOAD HAS_CONTENTS
    0xe1400000->0xe1438000 at 0x0a32b000: load65 ALLOC LOAD HAS_CONTENTS
    0xe1438000->0xe1438000 at 0x0a363000: load66 ALLOC READONLY
    0xe15fc000->0xe15fd000 at 0x0a363000: load67 ALLOC LOAD READONLY HAS_CONTENTS
    0xe15fd000->0xe1ffd000 at 0x0a364000: load68 ALLOC LOAD HAS_CONTENTS
    0xe1ffd000->0xe1ffe000 at 0x0ad64000: load69 ALLOC LOAD READONLY HAS_CONTENTS
    0xe1ffe000->0xe29fe000 at 0x0ad65000: load70 ALLOC LOAD HAS_CONTENTS
    0xe29fe000->0xe29ff000 at 0x0b765000: load71 ALLOC LOAD READONLY HAS_CONTENTS
    0xe29ff000->0xe33ff000 at 0x0b766000: load72 ALLOC LOAD HAS_CONTENTS
    0xe33ff000->0xe3400000 at 0x0c166000: load73 ALLOC LOAD READONLY HAS_CONTENTS
    0xe3400000->0xe3e00000 at 0x0c167000: load74 ALLOC LOAD HAS_CONTENTS
    0xe3e00000->0xe3ebc000 at 0x0cb67000: load75 ALLOC LOAD HAS_CONTENTS
    0xe3ebc000->0xe3ebc000 at 0x0cc23000: load76 ALLOC READONLY
    0xe3ffd000->0xe3ffe000 at 0x0cc23000: load77 ALLOC LOAD READONLY HAS_CONTENTS
    0xe3ffe000->0xe49fe000 at 0x0cc24000: load78 ALLOC LOAD HAS_CONTENTS
    0xe49fe000->0xe49ff000 at 0x0d624000: load79 ALLOC LOAD READONLY HAS_CONTENTS
    0xe49ff000->0xe53ff000 at 0x0d625000: load80 ALLOC LOAD HAS_CONTENTS
    0xe53ff000->0xe5400000 at 0x0e025000: load81 ALLOC LOAD READONLY HAS_CONTENTS
    0xe5400000->0xe5e00000 at 0x0e026000: load82 ALLOC LOAD HAS_CONTENTS
    0xe5e00000->0xe5efd000 at 0x0ea26000: load83 ALLOC LOAD HAS_CONTENTS
    0xe5efd000->0xe5efd000 at 0x0eb23000: load84 ALLOC READONLY
    0xe5f00000->0xe5f21000 at 0x0eb23000: load85 ALLOC LOAD HAS_CONTENTS
    0xe5f21000->0xe5f21000 at 0x0eb44000: load86 ALLOC READONLY
    0xe6000000->0xe6044000 at 0x0eb44000: load87 ALLOC LOAD HAS_CONTENTS
    0xe6044000->0xe6044000 at 0x0eb88000: load88 ALLOC READONLY
    0xe61ff000->0xe6200000 at 0x0eb88000: load89 ALLOC LOAD READONLY HAS_CONTENTS
    0xe6200000->0xe6c00000 at 0x0eb89000: load90 ALLOC LOAD HAS_CONTENTS
    0xe6c00000->0xe6c21000 at 0x0f589000: load91 ALLOC LOAD HAS_CONTENTS
    0xe6c21000->0xe6c21000 at 0x0f5aa000: load92 ALLOC READONLY
    0xe6d00000->0xe6dfb000 at 0x0f5aa000: load93 ALLOC LOAD HAS_CONTENTS
    0xe6dfb000->0xe6dfb000 at 0x0f6a5000: load94 ALLOC READONLY
    0xe6e00000->0xe6e21000 at 0x0f6a5000: load95 ALLOC LOAD HAS_CONTENTS
    0xe6e21000->0xe6e21000 at 0x0f6c6000: load96 ALLOC READONLY
    0xe6f00000->0xe6f21000 at 0x0f6c6000: load97 ALLOC LOAD HAS_CONTENTS
    0xe6f21000->0xe6f21000 at 0x0f6e7000: load98 ALLOC READONLY
    0xe7000000->0xe7021000 at 0x0f6e7000: load99 ALLOC LOAD HAS_CONTENTS
    0xe7021000->0xe7021000 at 0x0f708000: load100 ALLOC READONLY
    0xe7100000->0xe7137000 at 0x0f708000: load101 ALLOC LOAD HAS_CONTENTS
    0xe7137000->0xe7137000 at 0x0f73f000: load102 ALLOC READONLY
    0xe7200000->0xe7221000 at 0x0f73f000: load103 ALLOC LOAD HAS_CONTENTS
    0xe7221000->0xe7221000 at 0x0f760000: load104 ALLOC READONLY
    0xe7300000->0xe7321000 at 0x0f760000: load105 ALLOC LOAD HAS_CONTENTS
    0xe7321000->0xe7321000 at 0x0f781000: load106 ALLOC READONLY
    0xe7400000->0xe7421000 at 0x0f781000: load107 ALLOC LOAD HAS_CONTENTS
    0xe7421000->0xe7421000 at 0x0f7a2000: load108 ALLOC READONLY
    0xe75ff000->0xe7600000 at 0x0f7a2000: load109 ALLOC LOAD READONLY HAS_CONTENTS
    0xe7600000->0xe8000000 at 0x0f7a3000: load110 ALLOC LOAD HAS_CONTENTS
    0xe8000000->0xe8100000 at 0x101a3000: load111 ALLOC LOAD HAS_CONTENTS
    0xe8100000->0xe8121000 at 0x102a3000: load112 ALLOC LOAD HAS_CONTENTS
    0xe8121000->0xe8121000 at 0x102c4000: load113 ALLOC READONLY
    0xe8200000->0xe8300000 at 0x102c4000: load114 ALLOC LOAD HAS_CONTENTS
    0xe83f6000->0xe83f7000 at 0x103c4000: load115 ALLOC LOAD READONLY HAS_CONTENTS
    0xe83f7000->0xe8df7000 at 0x103c5000: load116 ALLOC LOAD HAS_CONTENTS
    0xe8df7000->0xe8df8000 at 0x10dc5000: load117 ALLOC LOAD READONLY HAS_CONTENTS
    0xe8df8000->0xe97f8000 at 0x10dc6000: load118 ALLOC LOAD HAS_CONTENTS
    0xe97f8000->0xe97f9000 at 0x117c6000: load119 ALLOC LOAD READONLY HAS_CONTENTS
    0xe97f9000->0xea1f9000 at 0x117c7000: load120 ALLOC LOAD HAS_CONTENTS
    0xea1f9000->0xea1fa000 at 0x121c7000: load121 ALLOC LOAD READONLY HAS_CONTENTS
    0xea1fa000->0xeabfa000 at 0x121c8000: load122 ALLOC LOAD HAS_CONTENTS
    0xeabfa000->0xeabfb000 at 0x12bc8000: load123 ALLOC LOAD READONLY HAS_CONTENTS
    0xeabfb000->0xeb5fb000 at 0x12bc9000: load124 ALLOC LOAD HAS_CONTENTS
    0xeb5fb000->0xeb5fc000 at 0x135c9000: load125 ALLOC LOAD READONLY HAS_CONTENTS
    0xeb5fc000->0xebffc000 at 0x135ca000: load126 ALLOC LOAD HAS_CONTENTS
    0xebffc000->0xebffd000 at 0x13fca000: load127 ALLOC LOAD READONLY HAS_CONTENTS
    0xebffd000->0xec9fd000 at 0x13fcb000: load128 ALLOC LOAD HAS_CONTENTS
    0xec9fd000->0xec9fe000 at 0x149cb000: load129 ALLOC LOAD READONLY HAS_CONTENTS
    0xec9fe000->0xed3fe000 at 0x149cc000: load130 ALLOC LOAD HAS_CONTENTS
    0xed3fe000->0xed3ff000 at 0x153cc000: load131 ALLOC LOAD READONLY HAS_CONTENTS
    0xed3ff000->0xeddff000 at 0x153cd000: load132 ALLOC LOAD HAS_CONTENTS
    0xeddff000->0xede00000 at 0x15dcd000: load133 ALLOC LOAD READONLY HAS_CONTENTS
    0xede00000->0xee800000 at 0x15dce000: load134 ALLOC LOAD HAS_CONTENTS
    0xee800000->0xeea00000 at 0x167ce000: load135 ALLOC LOAD HAS_CONTENTS
    0xeea00000->0xeea2b000 at 0x169ce000: load136 ALLOC LOAD HAS_CONTENTS
    0xeea2b000->0xeea2b000 at 0x169f9000: load137 ALLOC READONLY
    0xeeb00000->0xeeb2c000 at 0x169f9000: load138 ALLOC LOAD HAS_CONTENTS
    0xeeb2c000->0xeeb2c000 at 0x16a25000: load139 ALLOC READONLY
    0xeec00000->0xeec21000 at 0x16a25000: load140 ALLOC LOAD HAS_CONTENTS
    0xeec21000->0xeec21000 at 0x16a46000: load141 ALLOC READONLY
    0xeed64000->0xeedfb000 at 0x16a46000: load142 ALLOC LOAD HAS_CONTENTS
    0xeedfb000->0xeedfc000 at 0x16add000: load143 ALLOC LOAD READONLY HAS_CONTENTS
    0xeedfc000->0xef7fc000 at 0x16ade000: load144 ALLOC LOAD HAS_CONTENTS
    0xef7fc000->0xef7fd000 at 0x174de000: load145 ALLOC LOAD READONLY HAS_CONTENTS
    0xef7fd000->0xf01fd000 at 0x174df000: load146 ALLOC LOAD HAS_CONTENTS
    0xf01fd000->0xf01fe000 at 0x17edf000: load147 ALLOC LOAD READONLY HAS_CONTENTS
    0xf01fe000->0xf0bfe000 at 0x17ee0000: load148 ALLOC LOAD HAS_CONTENTS
    0xf0bfe000->0xf0bff000 at 0x188e0000: load149 ALLOC LOAD READONLY HAS_CONTENTS
    0xf0bff000->0xf15ff000 at 0x188e1000: load150 ALLOC LOAD HAS_CONTENTS
    0xf15ff000->0xf1600000 at 0x192e1000: load151 ALLOC LOAD READONLY HAS_CONTENTS
    0xf1600000->0xf2000000 at 0x192e2000: load152 ALLOC LOAD HAS_CONTENTS
    0xf2000000->0xf2100000 at 0x19ce2000: load153 ALLOC LOAD HAS_CONTENTS
    0xf2100000->0xf2121000 at 0x19de2000: load154 ALLOC LOAD HAS_CONTENTS
    0xf2121000->0xf2121000 at 0x19e03000: load155 ALLOC READONLY
    0xf2200000->0xf2221000 at 0x19e03000: load156 ALLOC LOAD HAS_CONTENTS
    0xf2221000->0xf2221000 at 0x19e24000: load157 ALLOC READONLY
    0xf234d000->0xf23fd000 at 0x19e24000: load158 ALLOC LOAD HAS_CONTENTS
    0xf23fd000->0xf23fe000 at 0x19ed4000: load159 ALLOC LOAD READONLY HAS_CONTENTS
    0xf23fe000->0xf2dfe000 at 0x19ed5000: load160 ALLOC LOAD HAS_CONTENTS
    0xf2dfe000->0xf2dff000 at 0x1a8d5000: load161 ALLOC LOAD READONLY HAS_CONTENTS
    0xf2dff000->0xf37ff000 at 0x1a8d6000: load162 ALLOC LOAD HAS_CONTENTS
    0xf37ff000->0xf3800000 at 0x1b2d6000: load163 ALLOC LOAD READONLY HAS_CONTENTS
    0xf3800000->0xf4200000 at 0x1b2d7000: load164 ALLOC LOAD HAS_CONTENTS
    0xf4200000->0xf4221000 at 0x1bcd7000: load165 ALLOC LOAD HAS_CONTENTS
    0xf4221000->0xf4221000 at 0x1bcf8000: load166 ALLOC READONLY
    0xf4349000->0xf43fd000 at 0x1bcf8000: load167 ALLOC LOAD HAS_CONTENTS
    0xf43fd000->0xf43fe000 at 0x1bdac000: load168 ALLOC LOAD READONLY HAS_CONTENTS
    0xf43fe000->0xf4dfe000 at 0x1bdad000: load169 ALLOC LOAD HAS_CONTENTS
    0xf4dfe000->0xf4dff000 at 0x1c7ad000: load170 ALLOC LOAD READONLY HAS_CONTENTS
    0xf4dff000->0xf57ff000 at 0x1c7ae000: load171 ALLOC LOAD HAS_CONTENTS
    0xf57ff000->0xf5800000 at 0x1d1ae000: load172 ALLOC LOAD READONLY HAS_CONTENTS
    0xf5800000->0xf6200000 at 0x1d1af000: load173 ALLOC LOAD HAS_CONTENTS
    0xf6200000->0xf6300000 at 0x1dbaf000: load174 ALLOC LOAD HAS_CONTENTS
    0xf6339000->0xf6366000 at 0x1dcaf000: load175 ALLOC LOAD HAS_CONTENTS
    0xf6366000->0xf6367000 at 0x1dcdc000: load176 ALLOC LOAD READONLY HAS_CONTENTS
    0xf6367000->0xf6d67000 at 0x1dcdd000: load177 ALLOC LOAD HAS_CONTENTS
    0xf6d67000->0xf6d68000 at 0x1e6dd000: load178 ALLOC LOAD READONLY HAS_CONTENTS
    0xf6d68000->0xf77ae000 at 0x1e6de000: load179 ALLOC LOAD HAS_CONTENTS
    0xf77b7000->0xf77bb000 at 0x1f124000: load180 ALLOC LOAD HAS_CONTENTS
    0xfff0b000->0xfff21000 at 0x1f128000: load181 ALLOC LOAD HAS_CONTENTS 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-15T14:33:01.930

这看起来像是对我的内核内存引用（高于 0xc0000000，假设 Linux 和 32 位进程）。要找出答案，请查看 /proc/{yourpid}/maps

> 核心转储不应该包含所有已分配内存的快照吗？

它应该，但是如果某些东西损坏了你的进程的内存，你就会得到一个损坏的程序状态的快照，因此可能会在需要有效指针的地方找到一些垃圾。

> 造成这种情况的可能原因是什么？我错过了核心转储中的一些信息吗？

我注意到在 64 位系统上运行 32 位可执行文件时，进程可以使用完整的 4GB 地址空间。例如

```
ia32kernel# pmap `pidof cat` 
004e8000    108K r-x--  /lib/ld-2.11.1.so
00503000      4K r----  /lib/ld-2.11.1.so
00504000      4K rw---  /lib/ld-2.11.1.so
006d3000   1380K r-x--  /lib/tls/i686/cmov/libc-2.11.1.so
0082c000      8K r----  /lib/tls/i686/cmov/libc-2.11.1.so
0082e000      4K rw---  /lib/tls/i686/cmov/libc-2.11.1.so
0082f000     12K rw---    [ anon ]
00f64000      4K r-x--    [ anon ]
08048000     48K r-x--  /bin/cat
08054000      4K r----  /bin/cat
08055000      4K rw---  /bin/cat 
```

对比

```
amd64kernel# pmap `pidof cat` 
0000000008048000     48K r-x--  /home/martin/cat
0000000008054000      4K r----  /home/martin/cat
0000000008055000      4K rw---  /home/martin/cat
0000000009e1d000    132K rw---    [ anon ]
00000000f766c000      4K rw---    [ anon ]
00000000f766d000   1280K r-x--  /lib32/libc-2.11.3.so
00000000f77ad000      4K -----  /lib32/libc-2.11.3.so
00000000f77ae000      8K r----  /lib32/libc-2.11.3.so
00000000f77b0000      4K rw---  /lib32/libc-2.11.3.so
00000000f77b1000     12K rw---    [ anon ]
00000000f77c0000      8K rw---    [ anon ]
00000000f77c2000      4K r-x--    [ anon ]
00000000f77c3000    112K r-x--  /lib32/ld-2.11.3.so
00000000f77df000      4K r----  /lib32/ld-2.11.3.so
00000000f77e0000      4K rw---  /lib32/ld-2.11.3.so 
```

因此，如果您尝试在 32 位机器上检查在 64 位机器上捕获的 coredump，即使是相同的 32 位机器，那些高地址库（如 libc.so）也无法按预期映射两个系统都使用二进制文件。

# java - 实现多个接口

> ID：14896537
> 
> 赞同：0
> 
> 时间：2013-02-15T14:10:40.317
> 
> 标签：java

在接口 ONE 我有一个方法`A`，在接口 2 我有方法`B`。这两种方法都在 class 中实现`Three`。现在我将一个 3 的实例分配给 ONE，但我仍然可以调用`B`SECOND 的方法吗？

即使这是可能的，它是正确的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T14:17:08.907

假设你有这个：

```
public interface A
{
    public void methodA();
}

public interface B
{
    public void methodB();
}

public class C implements A,B
{
    public void methodA(){...}
    public void methodB(){...}
} 
```

你应该能够做到这一点：

```
A a = new C();
a.methodA(); 
```

但不是这个：

```
a.methodB() 
```

另一方面，您可以这样做：

```
B b = new C();
b.methodB(); 
```

但不是这个：

```
b.methodA(); 
```

编辑：

这是因为您将 object 定义`a`为 的实例`A`。尽管您使用具体类进行初始化 ( `new C()`)，但您正在*对接口进行编程，*因此只有该接口中定义的方法可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:39:03.937

请记住，您只能调用可用于**分配**的类/接口的方法 - 实际对象支持哪些方法并不重要，就编译器而言，它只查看分配的引用及其具有的方法。

因此，在您的情况下，如果您分配：

```
Three three = new Three(); // all of the methods in One, Two and Three (if any) can be invoked here
One one = three;    // Only the methods on One can be invoked here
Two two = three;    // Only the methods on Two can be invoked here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T14:28:57.063

此外，如果`One`extends `Two`，您将能够做到这一点。这可能不是一个解决方案，但我只是指出另一种方法可以做到这一点。

```
interface Two
{
void a();
}

interface One extends Two 
{
void b();
}

class Three implements One
{
@Override
public void b() {}

@Override
public void a() {}
} 
```

然后你可以拥有

```
One one = new Three();
one.a();
one.b(); 
```

# ajax - Magento 搜索表单迷你重复功能障碍

> ID：14896538
> 
> 赞同：2
> 
> 时间：2013-02-15T14:10:46.063
> 
> 标签：ajax, forms, magento, search

在我的网站中，我有两个菜单顶部栏。一个停留在标题部分，其他仅在用户到达滚动的某个点时显示（我在这里使用了一个简单的 jQuery 代码）。这里的问题是，两个顶部栏都包含了迷你搜索表单，但只有在第一个呈现的（在我的情况下，'#hiddenMenu'顶部栏）中，ajax 实时搜索有效。

只是为了让你理解，**header.phtml**文件：

```
<div id="hiddenMenu">
    <?php echo $this->getChildHtml('topMenu') ?>
    <?php echo $this->getChildHtml('topBar') ?>
</div>
<div class="header-container">
<div class="quick-access">
    <?php echo $this->getChildHtml('topLinks') ?>
</div>

<div class="header">
    <?php if ($this->getIsHomePage()):?>
    <h1 class="logo"><a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a></h1>
    <?php else:?>
    <h1 class="logo"><a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a>
    <?php endif?></h1>
</div>

<div id="menu">
    <?php echo $this->getChildHtml('topMenu') ?>
    <?php echo $this->getChildHtml('topBar') ?>
</div>

<?php echo $this->getChildHtml('topContainer'); ?> 
```

如您所见，它们两者之间的唯一区别在于它们的放置位置，因为 search.mini.form 由**getChildHtml('topBar')**调用。但是在 search.mini.form 的第二次出现中，由于某种原因，ajax 实时搜索不起作用。

我的**form.mini.phtml**文件仍然是原始文件：

```
<?php $catalogSearchHelper =  $this->helper('catalogsearch'); ?>
<form id="search_mini_form" action="<?php echo $catalogSearchHelper->getResultUrl() ?>" method="get">
   <div class="form-search">
        <div class="search-mini">
            <input id="search" placeholder="Busque" type="text" name="<?php echo $catalogSearchHelper->getQueryParamName() ?>" class="input-text" />
            <button type="submit" title="<?php echo $this->__('Go') ?>" class="button"><img src="<?php echo $this->getSkinUrl('images/ico-search.png') ?>"></button>   
        </div>
        <div id="search_autocomplete" class="search-autocomplete"></div>
        <script type="text/javascript">
           //<![CDATA[
               var searchForm = new Varien.searchForm('search_mini_form', 'search', 'Search');
               searchForm.initAutocomplete('<?php echo $catalogSearchHelper->getSuggestUrl() ?>', 'search_autocomplete');
           //]]>
        </script>
    </div>
</form> 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:36:42.633

您的两个搜索表单具有相同的名称。

你打电话时 ：

new Varien.searchForm('search_mini_form'

它仅指第一个，然后将 Live Search Ajax 附加到这个。

只有这一个。

您应该有 2 个不同的名称，并将 Ajax 设置为两种形式。

问候

# android-emulator - Android 虚拟设备管理器中可用的 API 级别

> ID：14896541
> 
> 赞同：1
> 
> 时间：2013-02-15T14:10:49.180
> 
> 标签：android-emulator

我正在运行 ADT/Eclipse 21.1.0，我想用不同的 API 版本来模拟我的应用程序的行为。我通过 Android SDK 管理器安装了一堆不同的 API 版本。我将最低 SDK 版本设置为 11，并在项目属性（项目构建目标）中更改目标 SDK。这一切似乎工作正常。但是，当我转到 Android Virtual Device manager 并尝试创建不同的设备时，我只能更改 Device 字段，并且唯一可用的 Target 选项是“Android 4.2 - API level 17”。

有没有办法创建运行不同 Android 版本的设备？

谢谢，

韦利科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T21:19:40.193

您现在可能已经解决了这个问题，但是如果您没有重新启动 Android 虚拟设备管理器，这可能就是它看不到新安装的 SDK 的原因。

# ipad - iPad 邮件应用程序将附件浮动在 SSRS 报告的正文上

> ID：14896542
> 
> 赞同：1
> 
> 时间：2013-02-15T14:10:50.550
> 
> 标签：ipad, email, reporting-services, attachment

我们有一个 .NET 应用程序，可以通过电子邮件发送 SSRS 报告和文件附件。在 iPad 或 iPhone 上查看这些电子邮件时，附件似乎漂浮在电子邮件正文上，从而掩盖了我们报告中的内容。

看起来邮件应用程序无法检测到我们电子邮件正文的结尾，并将其附件控件放在其顶部。

有没有人遇到过类似的问题？我们可以在报告中修复什么，以便邮件应用程序可以更好地处理它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:30:27.560

问题是 Apple 的邮件应用程序将 MHT 呈现为我们发送的电子邮件正文。但它无法检测到 MHT 文档的结尾，并且放错了附件控件。补救措施是改用html。

当我们开始使用 HTML 时，我们必须强制 HTML 从 Quirks 模式进入 Strict 模式以使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-23T12:58:56.987

我有一个类似的问题，附件按钮覆盖在 HTML 页面的顶部。Amol 的回答是正确的，需要强制 HTML 进入[严格模式](https://www.quirksmode.org/css/quirksmode.html)，以便 Apple 的收件箱正确定位其附件按钮。

我想分享我的解决方案：

```
html = html.Replace("PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\"", ""); 
```

在发送报告之前，我进行了字符串替换以从文档类型中删除代码。这可以防止 Apple 的邮件应用程序进入[Quirks 模式](https://www.quirksmode.org/css/quirksmode.html)。

# jquery - 使用两行 Header 进行表格排序

> ID：14896548
> 
> 赞同：3
> 
> 时间：2013-02-15T14:11:03.253
> 
> 标签：jquery, sorting

我的表结构如下：

![在此处输入图像描述](../Images/78797ae367ca967d1e22778467440f3f.png)

这是我的 HTML：

```
<table id="jackpotwatch" style="width:700px;">
        <thead>
          <tr>

              <th>Location</th>
              <th colspan="2">Full Name</th>
              <th>Amount</th>

          </tr>
          <tr >
            <th>Asset</th>
            <th>Patron ID</th>
            <th>User</th>
            <th>Date/Time</th>
          </tr>
        </thead>
        <tbody>
           <tr>
              <td>Salem</td>
              <td colspan="2">Bob galvin</td>
              <td>$3400</td>
           </tr>
           <tr>
             <td>assert1</td>
             <td>1148</td>
             <td>sjauser</td>
             <td>11/12 10:39 AM</td>
           </tr>
           <tr>
              <td>chennai</td>
              <td colspan="2">sally n safer</td>
              <td>$400</td>
           </tr>
           <tr>
             <td>sdfsdgt1</td>
             <td>4747</td>
             <td>sjauser</td>
             <td>11/12 10:39 AM</td>
           </tr>
           <tr>
              <td>Mazdgfdg</td>
              <td colspan="2">afdagadg</td>
              <td>789769</td>
           </tr>
           <tr>
             <td>qwqeqe</td>
             <td>47467</td>
             <td>sjauser</td>
             <td>11/12 10:39 AM</td>
           </tr>
           <tr>
              <td>hurtyry</td>
              <td colspan="2">afadfadg</td>
              <td>$12000</td>
           </tr>
           <tr>
             <td>afadsf</td>
             <td>25426546</td>
             <td>sjauser</td>
             <td>11/12 10:39 AM</td>
           </tr>
        </tbody>
        </table> 
```

当我单击“金额”标题时，应对金额值（3400 美元、400 美元、12000 美元）等进行排序。就像那个日期/时间字段也应该根据值进行排序。

我使用[了 Tablesorter](http://tablesorter.com/docs/)插件，但该插件没有对所有列进行排序。它没有对该表中的最后一列和第二行标题进行排序。我也使用[了 Tinysort](http://tinysort.sjeiti.com/)插件，但它在排序时会改变表结构本身。

我无法更改表结构，因为这是我们客户最大的要求。请提供一些关于这个排序问题的指南，这对我非常有用。

我们可以应用的任何自定义排序意味着请建议我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:32:51.903

在此处查看[演示](http://jsfiddle.net/4Zbcz/)。

我没有适合您的插件，但我针对您的具体情况提出了以下方法：

```
/**
 * This approach assumes that records are always comprised of 2 rows. It is possible to make this configurable.
 */
;(function() {
  //Get the table
    var table = $("#jackpotwatch");

    //Make head header in the THEAD sortable.
    $("thead th", table).on("click", onSortableClicked);

    //Handle the sortable clicked event.
    function onSortableClicked(e) {
        //Find the column position.
        var c = -1, child = e.target;
        while ((child = child.previousSibling) != null)
            if (child.nodeType == 3) ++c;

        //Find the row position.
        var r = -1, child = e.target.parentNode;
        while ((child = child.previousSibling) != null)
            if (child.nodeType == 3) ++r;

        var subject = $("tbody", table);

        var replacement = sort(subject, r, c);

        subject.replaceWith(replacement);
    }

    function sort(subject, r, c) {
        var rows = $("tr", subject); //Get all the rows from the tbody.
        var sorted = document.createElement("tbody");

        var vals = [];
        for (var i = 0; i < rows.length; i+=2) {
            var record = [rows.get(i), rows.get(i+1)]; //Record is two rows.
            var sub = record[r].children[c].innerText; //This is our sort subject.

            vals.push({"sub": sub, "record": record});
        }

        vals.sort(compare);

        for (var i = 0; i < vals.length; ++i) {
            var val = vals[i];
            sorted.appendChild(val.record[0]);
            sorted.appendChild(val.record[1]);
        }

        return sorted;
    }

    function compare(a, b) {
        var atext = a.sub.toLowerCase();
        var btext = b.sub.toLowerCase();
        return atext < btext ? -1 : atext > btext ? 1 : 0;
    }
})(); 
```

这使得`TH`元素中的每个元素都是`THEAD`可排序的。它根据文本的小写比较对其进行排序。

硬编码只能处理 2 行集的记录，但可以扩展以允许配置多少行组成一条记录，甚至可以通过计算`THEAD`.

我在以下 HTML 中使用了它：

```
<table id="jackpotwatch">
    <thead>
        <tr>
            <th>Location</th>
            <th colspan="2">Full Name</th>
            <th>Amount</th>
        </tr>
        <tr>
            <th>Asset</th>
            <th>Patron ID</th>
            <th>User</th>
            <th>Date/Time</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Salem</td>
            <td colspan="2">Bob galvin</td>
            <td>$3400</td>
        </tr>
        <tr>
            <td>assert1</td>
            <td>1148</td>
            <td>sjauser</td>
            <td>11/12 10:39 AM</td>
        </tr>
        <tr>
            <td>chennai</td>
            <td colspan="2">sally n safer</td>
            <td>$400</td>
        </tr>
        <tr>
            <td>sdfsdgt1</td>
            <td>4747</td>
            <td>sjauser</td>
            <td>11/12 10:39 AM</td>
        </tr>
        <tr>
            <td>Mazdgfdg</td>
            <td colspan="2">afdagadg</td>
            <td>789769</td>
        </tr>
        <tr>
            <td>qwqeqe</td>
            <td>47467</td>
            <td>sjauser</td>
            <td>11/12 10:39 AM</td>
        </tr>
        <tr>
            <td>hurtyry</td>
            <td colspan="2">afadfadg</td>
            <td>$12000</td>
        </tr>
        <tr>
            <td>afadsf</td>
            <td>25426546</td>
            <td>sjauser</td>
            <td>11/12 10:39 AM</td>
        </tr>
    </tbody>
</table> 
```

确保将脚本放在 HTML 之后，或者放在准备好的事件处理程序中：

```
$(document).ready(function() {
    //Sorting code from above goes here.
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:35:51.317

大概您希望每个条目的两行保持组合在一起，在这种情况下，Tablesorter 并非旨在执行您想要的操作。但是，如果您准备将每对行放入自己的行中，Tinysort 可以工作`tbody`：

```
<table id="jackpotwatch" style="width:700px">
    <thead>
      <tr>
          <th>Location</th>
          <th colspan="2">Full Name</th>
          <th>Amount</th>
      </tr>
      <tr >
        <th>Asset</th>
        <th>Patron ID</th>
        <th>User</th>
        <th>Date/Time</th>
      </tr>
    </thead>
    <tbody>
       <tr>
          <td>Salem</td>
          <td colspan="2">Bob galvin</td>
          <td>$3400</td>
       </tr>
       <tr>
         <td>assert1</td>
         <td>1148</td>
         <td>sjauser</td>
         <td>11/12 10:39 AM</td>
       </tr>
    </tbody>
    <tbody>
       <tr>
          <td>chennai</td>
          <td colspan="2">sally n safer</td>
          <td>$400</td>
       </tr>
       <tr>
         <td>sdfsdgt1</td>
         <td>4747</td>
         <td>sjauser</td>
         <td>11/12 10:39 AM</td>
       </tr>
    </tbody>
    ...
</table> 
```

由于 Tinysort 显然可以对任何类型的元素进行排序，因此您应该能够告诉它对`tbody`元素而不是行进行排序。您的脚本可以做这样的事情，松散地基于 Tinysort 文档中的表格示例：

```
$(document).ready(function() {
    var aAsc = [];
    $("#jackpotwatch>thead th").each(function(nr) {
        $(this).click(function() {
            aAsc[nr] = aAsc[nr] == 'asc' ? 'desc' : 'asc';
            $("#jackpotwatch>tbody").tsort('td:eq(' + nr + ')', {order: aAsc[nr]});
        });
    });
}); 
```

这依赖于标题行中的单元格数量与每个 tbody 的行中的单元格数量完全相同。

# java - HQL：查询 java.util.Map 的值

> ID：14896549
> 
> 赞同：7
> 
> 时间：2013-02-15T14:11:04.717
> 
> 标签：java, hibernate, jpa, map, hql

我尝试了这个 hql 查询，但是当我在以下查询中使用**actProp[:key] = :value时，它​​会引发 UnsupportedOperationException：**

选择地图 act​​ionProperties 中包含值对 x,y 或 z,y 的所有动作：

```
Query query = getSession().createQuery(
    "select a from Action a                     " +
    " join a.actionProperties actProp           " +
    "   where (index(actProp) = :key            " +
    "           and actProp[:key] = :value )    " +
    "     or  (index(actProp) = :key2           " +
    "           and actProp[:key2] = :value )   "); 
```

例外：

```
java.lang.UnsupportedOperationException
        at org.hibernate.hql.ast.tree.IdentNode.resolveIndex(IdentNode.java:67) 
```

在实体动作中：

```
@CollectionOfElements(fetch = FetchType.EAGER)
private Map<String, String> actionProperties; 
```

我也尝试为此使用 Hibernate Criteria，但我认为这是不可能的。

有人知道用工作代码替换 : **actProp[:key] = :value吗？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T15:45:02.140

经过一番反复试验，我终于找到了解决方案，但这并不是那么简单。

```
Query query = getSession().createQuery(
        " from Action a " +
        " join a.actionProperties actProp                      " +
        "   where( (index(actProp) = :key                      " +
        "           and :value in elements(a.actionProperties))" +
        "       or (index(actProp) = :key2                     " +
        "           and :value in elements(a.actionProperties)) )"
        ); 
```

因此，为了匹配键，我使用了`index()`函数，为了匹配值，我使用了`elements()`函数。

如果您知道更好的解决方案，请告诉我。

# ruby-on-rails - Capybara为什么在页面工作时会抛出错误？

> ID：14896553
> 
> 赞同：0
> 
> 时间：2013-02-15T14:11:12.087
> 
> 标签：ruby-on-rails, tdd, capybara

我有一个非常简单的水豚脚本，用于使用设计的自定义注册表单：

```
 scenario "allow me to register and should take me to the new partner page" do
    visit '/registrations/become_partner'
    response.should be_success
  end 
```

当我尝试运行测试时，出现以下错误：

```
 ActionView::Template::Error:
       undefined method `first_name' for #<User:0x00000004d259e8> 
```

即使此方法已定义。我的模型中有`attr_accesible`集合，页面呈现，我可以从 rails 控制台调用这个方法。当其他地方没有问题时，为什么水豚会抛出这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:18:58.407

看起来您的测试环境还不知道该属性-显然您已`first_name`在开发环境中添加了该字段，但尚未在测试环境中添加。

要更新您的测试环境，只需运行

```
rake db:test:prepare 
```

它会起作用。您应该在运行迁移后始终执行此操作，这是一个常见的错误。

# java - 十进制转二进制码

> ID：14896554
> 
> 赞同：0
> 
> 时间：2013-02-15T14:11:13.233
> 
> 标签：java

我正在做一个 java 项目，我必须从二进制数和小数转换。我现在正在从十进制转换为二进制。这是我拥有的代码。我不知道如何在这段代码中多次循环余数。

```
public static void decimalToBinary()   {
  Scanner input = new Scanner (System.in);
  System.out.println ("Input decimal number");
  String decimal = input.next();
  int x = Integer.parseInt(decimal);
  int remainder = x%2;
  char[] charArray = decimal.toCharArray();
} 
```

我不知道如何继续这个。到目前为止，感谢您的回答，但我想用一个数组来完成这个问题，这就是问题的挑战。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:16:51.870

Integer 类有方法来做你想做的事。

```
public static void decimalToBinary(){
    Scanner input = new Scanner (System.in);
    System.out.println ("Input decimal number");
    String decimal = input.next();
    String binary = Integer.toBinaryString(Integer.parseInt(decimal));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T14:18:08.673

您可以使用 Integer 中的静态辅助方法将十进制转换为二进制字符串，这将为您提供大部分方法：

```
String inBinary = Integer.toBinaryString(10);   // result will be 1010 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T14:15:20.833

```
public static void decimalToBinary(){
    Scanner input = new Scanner (System.in);
    while (!*terminatingCondition*) {
      System.out.println ("Input decimal number");
      String decimal = input.next();
      System.err.println(Integer.toString(new Integer(decimal), 2));
  }
} 
```

希望有帮助...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T14:47:09.207

```
public static void binaryPrint(int n) throws Exception
{
    if(n > 0)
    {
        binaryPrint(n/2);
        System.out.print(n%2);
    }
    else if(n < 0)
        throw new Exception();          
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T14:18:01.127

```
public static String binaryRepresentation(int i32)
{
   String binary;
   for(int i = 31; i >= 0; i--){
     if((i32 & (1 << i)) > 0) binary += "1";
     else binary += "0";
   }
   return binary;
} 
```

`//...`

`String representation = binaryRepresentation(x);`

这是如果你不喜欢`Integer.toBinaryString(int)`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T14:25:12.060

我认为你需要这样的东西：

```
public static void decimalToBinary(){
    Scanner input = new Scanner (System.in);
    System.out.println ("Input decimal number");
    String decimal = input.next();
    int x = Integer.parseInt(decimal);
    int remainder = x%2;
    char[] charArray = decimal.toCharArray();
}

public static char[] findBinary(int decimal) {
    if (decimal == 0) { // base condition
        return new char[0];
    }

    int remainder = decimal % 2;
    char[] remainderCharArray = findBinary(remainder); // Use recursion
    char[] decimalCharArray = decimal.toCharArray();

    char[] resultCharArray = /* Combine two arrays */;

    return resultCharArray;
} 
```

我不确定数字和余数的二进制表示是如何组合的，但你需要在我放`/* Combine two arrays */`.

如果你不熟悉递归的概念，我建议你阅读一下它。

# java - 在 Java 中显示 unicode 字符

> ID：14896557
> 
> 赞同：3
> 
> 时间：2013-02-15T14:11:23.473
> 
> 标签：java, unicode

我试图在 java swing 组件中显示僧伽罗语 (80: 0D80–0DFF) 范围内的一些 unicode 字符。这些字母在 Eclipse 控制台中正确显示，但在 JButtons、JTextArea、JTextPane 等中显示为框。

```
import java.awt.BorderLayout;
import javax.swing.*;

public class Unicode extends JFrame{

    public Unicode(){

        super("ක් කැ කැ කු අ ඉ");

        add(new JButton("ක් කැ කැ කු අ ඉ \u0D88"),BorderLayout.NORTH);
        add(new JTextField("ක් කැ කැ කු අ ඉ"), BorderLayout.CENTER);

        setSize(500,500);
        setVisible(true);
    }

    public static void main(String a[]){
        new Unicode();
    }
 } 
```

我尝试使用字符和字符代码来显示，但都不起作用。谷歌给出的许多答案都不起作用。请帮帮我。我正在使用带有 java 1.6 的 windows 7。

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T07:53:53.660

请设置“IskolaPotha”字体。我认为它可以正常工作。（我使用了这种字体）。但是 Swing 组件（没有 JFrame）不能正确显示“ක්‍යෝ”unicode 字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T15:27:46.707

如果 eclipse 能够渲染僧伽罗字体，那么可以肯定的是，您的字体文件具有僧伽罗字形。现在 swing 组件无法选择该字体，因此您需要明确强制选择要显示的文件。

为了制定通用解决方案，您需要遍历代码页并且必须找到支持僧伽罗语范围的 unicode。

请查看此链接以获取更多信息：

[http://content.hccfl.edu/polllock/Java/Fonts.htm](http://content.hccfl.edu/pollock/Java/Fonts.htm)

# android - 找不到与给定名称（样式）匹配的资源

> ID：14896564
> 
> 赞同：1
> 
> 时间：2013-02-15T14:11:46.847
> 
> 标签：android

我正在尝试将新样式添加到我的 styles.xml 文件中。

我在 res/values/styles.xml 中写了这个

```
<style name="spinnerSettings"> 
    <item name="android:textColor">#000000</item>
    <item name="android:background">#FFFFFF</item>
</style> 
```

当我尝试将我的样式添加到微调器时（在 res/layout/activity_settings.xml 中创建）

```
 <Spinner
    style="@styles/spinnerSettings"     
    android:id="@+id/levelSpinner"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"      
    android:spinnerMode="dialog"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="10dp"
    android:layout_marginRight="10dp"
    android:padding="5dp"       
    android:drawSelectorOnTop = "true" /> 
```

我收到此错误：

**错误：错误：找不到与给定名称匹配的资源（在“样式”处，值为“@styles/spinnerSettings”）**

这里`style="@styles/spinnerSettings"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:05:43.630

应该是`style="@style/spinnerSettings"`（`s`最后没有）

# java - oracle-javamail csv 附件下载

> ID：14896565
> 
> 赞同：0
> 
> 时间：2013-02-15T14:11:48.460
> 
> 标签：java, oracle, email

最近我在通过 oracle-javamail 从我的电子邮件中下载 CSV 时遇到了问题。我发现第一个工作正常（来自大型机服务器）但是第二个 csv 附件似乎作为“application/vnd.ms-excel”出现，因为它显然是一个 .csv 文件，就像另一个文件一样下载完全没问题。

我对它们都使用了相同的代码，但找不到有关此问题的任何信息。

如果我将那封电子邮件转发给自己，我可以神奇地下载附件而不会出现任何问题。任何帮助，将不胜感激。一旦我完成这项工作，另一项日常任务就会自动化！

```
 if(content instanceof java.lang.String){
    //emailBody = (String)content;
} else if(content instanceof Multipart){
    System.out.println("is Multipart");
    Multipart mp = (Multipart)content;
    for (int j=0; j < mp.getCount(); j++) {
        Part part = mp.getBodyPart(j);
        String disposition = part.getDisposition();
        if (disposition == null) {
            // Check if plain
            MimeBodyPart mbp = (MimeBodyPart)part;
            if (mbp.isMimeType("text/plain")) {                             
                //emailBody += (String)mbp.getContent();
            } else {                            
                // Special non-attachment cases here of 
                // image/gif, text/html, ...                                
                String fileName = decodeName(part.getFileName());
                File savedir = new File(path+"\\"+fileName);
                saveFile(savedir, part);                                
            }
        } else if ((disposition != null) &&  
                (disposition.equals(Part.ATTACHMENT) || disposition.equals(Part.INLINE))){
                // Check if plain
                MimeBodyPart mbp = (MimeBodyPart)part;
                if (mbp.isMimeType("text/plain")) {                             
                    System.out.println("has disp of plain");
                    //emailBody += (String)mbp.getContent();
                } else {                            
                    System.out.println("has disp of else");
                    String fileName = decodeName(part.getFileName());
                    File savedir = new File(path+"\\"+fileName);
                    saveFile(savedir, part);                    
                }
        }
    }
}
else{
    System.out.println(message.getContentType());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:00:28.973

Although it appears that java knows what type of email it is receiving it turns out that it doesn't. Since this isn't a standard type it will return it as an Input Stream. I was able to see the contents of the file with the below code.

Also note that the only reason this came over as a application/vnd.ms-excel file type is because the body of the email was empty.

```
 InputStream emailIn = (InputStream) message.getContent();
    Scanner s = null;
    try{
        s = new Scanner(emailIn).useDelimiter("\\A");
    while(s.hasNext())
        System.out.println(s.next());
    }
    finally{
        s.close();
    } 
```

# php - 成功交易后更新用户/将散列密码存储为会话变量

> ID：14896566
> 
> 赞同：0
> 
> 时间：2013-02-15T14:12:06.077
> 
> 标签：php, authentication, login

我有一个包含免费和付费计划的网络应用程序。

用户选择一个计划，然后注册。注册后，在他付款之前，我使用免费帐户登录用户。一旦他付款并且交易回调成功，我想用他支付的新计划再次登录他。我想到的一种方法是：

1）用户注册 2）他注册了一个免费帐户，并且散列密码存储为 php session var 3）他支付 4）交易成功 5）我调用一个查找散列密码 session var 的 php 文件和基于此更新用户

这种方法有什么明显的问题吗？可以使用散列密码作为会话变量吗？此流程是否存在明显的安全风险？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:26:26.890

从安全的角度来看，我总是远离任何标识符的密码。加！- 用户可以有相同的密码，所以它可能不是唯一的（当然，你可能会加盐你的哈希，但取决于你的盐的唯一性，你仍然可能有这个问题......）

在您的会话中，我假设您正在为用户存储自己的唯一标识符。这就是你要查找的方式。然后，您可以更改用户（或计划）在数据库中的角色。

如果您需要立即进行实时更改，您有两种选择：

您的用户身份验证和授权系统可以在每个页面加载时访问数据库以获取最新的用户信息。这可能不是一个好主意，因为您只需要在用户的“生命周期”中使用此功能一次。

第二个选项是在付款后使用用户的会话设置一个设置，告诉它只在每次页面加载时检查数据库。一旦您更新了数据库，并且用户看到了更改，并将其应用于当前用户，该标志可能会被关闭，因此它不会继续查询数据库。

当然还有其他选择：您可以在临时文件或数据库中删除用户的会话（如果您使用数据库来存储会话信息）并强制他们登录。我敢肯定还有更多，但我会建议上面的临时主动方法（第 2 点）。

如果您需要更多说明，我很乐意提供帮助。发表评论！:)

# android - 从字符串类型变量解析json

> ID：14896570
> 
> 赞同：1
> 
> 时间：2013-02-15T14:12:22.863
> 
> 标签：android, json, parsing

我有一个这样的字符串类型变量：

```
String response_str="[{"Code":"AC_70","Id":1,"Lat":23.847153,"Lon":88.254636,"Name":"Rejinagar"},{"Code":"AC_51","Id":2,"Lat":25.024795,"Lon":88.118248,"Name":"Englishbazar"}]
"; 
```

现在，我创建了一个方法，如下所示：

```
public void parse_json_str(String json_str)
    {

        Log.i("String: ",json_str);

    } 
```

[我在这里](http://androidsnips.blogspot.in/2010/08/json-parsing-in-android.html)浏览了教程并找到了一种方法。

```
private void JsonParsing() {
  JSONObject jObject;
  String jString = "{\"menu\": {\"id\": \"file\", \"value\": \"File\", \"popup\": { \"menuitem\": [ {\"value\": \"New\",   \"onclick\": \"CreateNewDoc()\"}, {\"value\": \"Open\", \"onclick\": \"OpenDoc()\"}, {\"value\": \"Close\", \"onclick\": \"CloseDoc()\"}]}}}";
  try {
   jObject = new JSONObject(jString);

   JSONObject menuObject = jObject.getJSONObject("menu");
   String attributeId = menuObject.getString("id");
   System.out.println(attributeId);

   String attributeValue = menuObject.getString("value");
   System.out.println(attributeValue);

   JSONObject popupObject = menuObject.getJSONObject("popup");
   JSONArray menuitemArray = popupObject.getJSONArray("menuitem");

   for (int i = 0; i < 3; i++) {
    Log.i("Value",menuitemArray.getJSONObject(i)
      .getString("value").toString());
    Log.i("Onclick:", menuitemArray.getJSONObject(i).getString(
      "onclick").toString());
   }
  } catch (Exception e) {
   e.printStackTrace();
  }

 } 
```

问题是，JSON 具有不同的结构，我想以相同的方式解析我的 json。我的 json 不包含任何母节点。任何关于如何解析 json 的建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:22:46.103

你应该仔细看看结构。这个 JSON 是一个包含 2 个对象的数组。因此，在创建 JSONArray 之后，您应该遍历其中所有可能的 JSON 对象。

```
[
   {
      "Code":"AC_70",
      "Id":1,
      "Lat":23.847153,
      "Lon":88.254636,
      "Name":"Rejinagar"
   },
   {
      "Code":"AC_51",
      "Id":2,
      "Lat":25.024795,
      "Lon":88.118248,
      "Name":"Englishbazar"
   }
] 
```

代码：

```
private void JsonParsing()
{
    JSONArray lJSONArray;
    String jString = "your JSON here";
    try
    {
        lJSONArray = new JSONArray( jString );

        JSONObject lJSONObject;
        for ( int i = 0; i < lJSONArray.length(); i++ )
        {
            lJSONObject = lJSONArray.getJSONObject( i );
            // PARSE FIELD HERE
            String lCode = lJSONObject.getString( "Code" );
            // ETC

        }
    }
    catch( Exception e )
    {
        e.printStackTrace();
    }

} 
```

试试这个:)

# android - 如何从服务调用活动中的方法

> ID：14896574
> 
> 赞同：31
> 
> 时间：2013-02-15T14:12:34.410
> 
> 标签：android, android-intent, android-service, android-handler

有一种服务可以监听一些声音。如果语音与字符串匹配，则会在服务对象中调用某个方法。

```
public class SpeechActivationService extends Service {

     public static Intent makeStartServiceIntent(Context pContext){    

         return new Intent(pContext, SpeechActivationService.class);
     }

     //...

     public void onMatch(){
         Log.d(TAG, "voice matches word");
     }

     //...
} 
```

这就是我在活动中启动服务的方式：

```
Intent i = SpeechActivationService.makeStartServiceIntent(this);
startService(i); 
```

从这个服务方法中，我如何调用驻留在活动对象中的方法？我不想从活动访问到服务，而是从服务到活动。我已经阅读了有关处理程序和广播者的信息，但找不到/理解任何示例。有任何想法吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2014-08-07T00:42:29.940

假设您的 Service 和 Activity 在同一个包中（即同一个应用程序），您可以使用 LocalBroadcastManager 如下：

在您的服务中：

```
// Send an Intent with an action named "my-event". 
private void sendMessage() {
  Intent intent = new Intent("my-event");
  // add data
  intent.putExtra("message", "data");
  LocalBroadcastManager.getInstance(this).sendBroadcast(intent);
} 
```

在您的活动中：

```
@Override
public void onResume() {
  super.onResume();

  // Register mMessageReceiver to receive messages.
  LocalBroadcastManager.getInstance(this).registerReceiver(mMessageReceiver,
      new IntentFilter("my-event"));
}

// handler for received Intents for the "my-event" event 
private BroadcastReceiver mMessageReceiver = new BroadcastReceiver() {
  @Override
  public void onReceive(Context context, Intent intent) {
    // Extract data included in the Intent
    String message = intent.getStringExtra("message");
    Log.d("receiver", "Got message: " + message);
  }
};

@Override
protected void onPause() {
  // Unregister since the activity is not visible
  LocalBroadcastManager.getInstance(this).unregisterReceiver(mMessageReceiver);
  super.onPause();
} 
```

来自@Ascorbin 链接的第 7.3 节：[http ://www.vogella.com/tutorials/AndroidBroadcastReceiver/article.html#ownreceiver_localbroadcastmanager](http://www.vogella.com/tutorials/AndroidBroadcastReceiver/article.html#ownreceiver_localbroadcastmanager)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-15T14:24:00.500

我会在 Activity 中注册一个 BroadcastReceiver 并从服务向它发送一个 Intent。请参阅本教程：[http](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html) ://www.vogella.com/articles/AndroidBroadcastReceiver/article.html 它可能看起来有点长，但你还是想学习如何使用它们；）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T14:24:41.577

有许多不同的方法可以实现这一目标。其中之一使用`Handler`和`Messanger`类。该方法的思想是将`Handler`对象从`Activity`to 传递给`Service`。每次`Service`想要调用它的某个方法时，`Activity`它只是发送一个`Message`并`Activity`以某种方式处理它。

活动：

```
public class MyActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final Handler handler = new Handler() {
            @Override
            public void handleMessage(Message msg) {
                showToast(msg.what);
            }
        };

        final Intent intent = new Intent(this, MyService.class);
        final Messenger messenger = new Messenger(handler);

        intent.putExtra("messenger", messenger);
        startService(intent);
    }

    private void showToast(int messageId) {
        Toast.makeText(this, "Message  " + messageId, Toast.LENGTH_SHORT).show();
    }
} 
```

服务：

```
public class MyService extends Service {
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        if (intent != null) {
            final Messenger messenger = (Messenger) intent.getParcelableExtra("messenger");
            final Message message = Message.obtain(null, 1234);

            try {
                messenger.send(message);
            } catch (RemoteException exception) {
                exception.printStackTrace();
            }
        }

        return START_NOT_STICKY;
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-29T22:02:45.273

经过一些研究，我发现在我的情况下发送和接收广播的时间如下。我在同一过程中有服务。

sendBroadcast（如果两个组件在同一进程中，则不推荐）34 秒

LocalBroadcastManager.getInstance(this).sendBroadcast(intent); 接近 30 秒

**使用 AIDL 和 RemoteCallbackList 实现** 将适用于相同的进程或不同的进程

为您服务

```
public final RemoteCallbackList<ICallBackAidl> mDMCallbacks = new RemoteCallbackList<ICallBackAidl>();

public void registerDMCallback(ICallBackAidl cb) {
    Logger.d(LOG_TAG, "registerDMCallback " + cb);
    if (cb != null)
        mDMCallbacks.register(cb);
} 
```

当您需要从服务中调用 Application/Acitvity 中的方法时

```
public void callMehodsInApplication() {
    final int N = mDMCallbacks.beginBroadcast();
    for (int i = 0; i < N; i++) {
        try {
            mDMCallbacks.getBroadcastItem(i).method1();
        } catch (RemoteException e) {
            e.printStackTrace();
        }
    }
    mDMCallbacks.finishBroadcast();
} 
```

在您的类中扩展应用程序或活动。

```
private ISyncmlServiceDMCallback mCallback = new ISyncmlServiceDMCallback.Stub() {
 // Implement callback methods here
  public void method1() {
       // Service can call this method
  }
}

 public void onServiceConnected(ComponentName name, IBinder service) {   
        svc.LocalBinder binder = (svc.LocalBinder) service;
        mSvc = binder.getService();
        mSvc.registerDMCallback(mCallback);
 } 
```

以这种方式调用几乎是从同一进程广播和接收的瞬间

# objective-c - 我可以隐藏或阻止外国课程的分配/初始化吗？

> ID：14896575
> 
> 赞同：1
> 
> 时间：2013-02-15T14:12:34.863
> 
> 标签：objective-c, class

我可以隐藏或防止`[[Foo alloc] init]`在 Foo 类之外的代码中使用吗？

我只想使用自定义代码`createFooObject`，而不是`alloc/init`成语。

可以躲在`alloc/init`课堂上吗？

# asp.net-mvc - 在 url 中传递用户输入

> ID：14896577
> 
> 赞同：0
> 
> 时间：2013-02-15T14:12:36.440
> 
> 标签：asp.net-mvc

我需要将用户输入传递给 url。我的 CourseController 操作是：

```
public ActionResult Parameter(DateTime start, DateTime end)
    {
       //some operations

            return View();
    } 
```

在我看来，我从用户那里获得了开始和结束时间。我想看到这样的网址： Course/Parameter/start=userinput && end=userinput 任何帮助将不胜感激。

```
My model is:
      public class MachineSql{

       public List<Machines> SqlAccessParameter(DateTime startDate, DateTime endDate)
    {

        SqlConnection myConnection = new SqlConnection(connstr);
        myConnection.Open();
        SqlCommand myCommand = new SqlCommand("DateRange",myConnection);
        myCommand.CommandType = CommandType.StoredProcedure;
        myCommand.Parameters.Add("@SP_startDate", SqlDbType.DateTime).Value = startDate;
        myCommand.Parameters.Add("@SP_endDate", SqlDbType.DateTime).Value = endDate;

        SqlDataAdapter dataAdapter = new SqlDataAdapter();
        myCommand.ExecuteNonQuery();
        dataAdapter.SelectCommand = myCommand;

        DataSet dSet = new DataSet();
        dataAdapter.Fill(dSet);

        myConnection.Close();

        List<Machines> machinePost = new List<Machines>();
        foreach (DataRow row in dSet.Tables[0].Rows)
        {
            Machines mac = new Machines();
            mac.AutoKey = (int)row["AUTOKEY"];
            mac.MachineGroup = (string)row["MACHINEGROUP"];
            mac.Duration = (int)row["DURATION"];
            mac.StartDate = (DateTime)row["STARTTIME"];
            mac.EndDate = (DateTime)row["ENDTIME"];
            machinePost.Add(mac);
        }
        return machinePost;
    }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:02:28.763

由于您使用的是 Ajax 帮助程序，因此添加 url 参数很容易：

```
@using(ajax.beginform('Parameter',
                      'Course', 
                       //here is how you add url params
                       new { 
                             start = @Model.StartDate, 
                             end = @Model.EndDate  
                           } 
                       // Any ajax actions needed such as HyypMethod,
                       // OnSuccess, etc...
                       new AjaxOptions
                           {
                              //options here 
                           }, 
                       )) 
```

这将为您提供一个如下所示的 URL：

```
Course/Parameter?start=userinput&end=userinput 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:15:08.993

只需确保将两个字段放在名为的表单中`start`，`end`并且它们应该是提交给该控制器方法的表单的一部分。当路由与该控制器方法匹配时，ASP.NET MVC 将自动将值转换为 DateTime。

如果您使用的是 jQuery ajax，则通过设置传入`data`：

```
{
    start: value,
    end: value
} 
```

并设置`dataType`为“json”。

有关详细信息，请参阅[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)。

# php - xml 新手：将子数据放入 php 变量中

> ID：14896579
> 
> 赞同：-2
> 
> 时间：2013-02-15T14:12:42.147
> 
> 标签：php, xml-parsing

我的确认表需要一个简单而精益的解决方案。我从服务器 XML 响应中检索联系人电子邮件地址。即如下：

```
<users>
<User LoginName="test1" Owner="" Alias="" UserType="PAID" ClientType="OBM" 
Quota="10737418240" Timezone="GMT+08:00 (CST)" Language="en" DataFile="1" 
DataSize="1536" RetainFile="0" RetainSize="0" EnableMSSQL="Y" EnableMSExchange="Y"
EnableOracle="Y" EnableLotusNotes="Y" EnableLotusDomino="Y" EnableMySQL="Y" 
EnableInFileDelta="Y" EnableShadowCopy="Y" EnableExchangeMailbox="N" 
ExchangeMailboxQuota="0" EnableNASClient="Y" EnableDeltaMerge="Y" EnableMsVm="N" 
MsVmQuota="0" EnableVMware="N" VMwareQuota="0" Bandwidth="0" Notes="" 
Status="ENABLE" RegistrationDate="1302687743242" SuspendPaidUser="N" 
SuspendPaidUserDate="20140503" LastBackupDate="1302699594652" EnableCDP="Y" 
EnableShadowProtectBareMetal="Y" EnableWinServer2008BareMetal="Y" 
Hostname="123.abc.com">
<Contact Name=""Email="www@qqq.com"/>
</user> 
…
</users> 
```

我得到了以下结果：

```
object(SimpleXMLElement)#7 (1) { [0]=> string(6) "Company" } 
object(SimpleXMLElement)#8 (1) { [0]=> string(26) "email@address.ext" } 
```

现在我需要这些变量。我似乎无法完成这一点。我的代码到这里：

```
 $request = "http://$SERVER/obs/api/GetUser.do?
    SysUser=$SYSUSER&SysPwd=$SYSPWD&LoginName=$logonname";
    // Execute the API Call and place the XML output in an Array variable
    $response = simplexml_load_file($request);
    // Retrieve the LoginName attribute from the Array
    foreach($response->children() as $child) {   
        foreach($child->attributes() as $data) {
            echo var_dump($data);
        }
     } 
```

任何新手的帮助都会受到欢迎。谢谢

坦率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:27:19.043

这是一个从 XML 中读取名称和电子邮件的简单示例：

```
$response = simplexml_load_file($request);

foreach($response->User as $user)
{
    foreach($user->Contact as $contact)
    {
        $name = $contact->attributes()->Name;
        $email = $contact->attributes()->Email;

        echo $name;
        echo $email;
    }
} 
```

[演示](http://codepad.org/4QFqx2vD)

# python - matplotlib 连接到主页/后退/前进按钮事件

> ID：14896580
> 
> 赞同：18
> 
> 时间：2013-02-15T14:12:44.280
> 
> 标签：python, matplotlib

有谁知道如何从 matplotlib 图中“获取”“home”、“back”和“forward”按钮事件？

我需要事件来调用我的一些函数，以便在按下这些按钮时我的绘图行为正确，即默认行为没有做我需要它做的事情

Matplotlib 假设底层数据集是恒定的，它需要做的就是重置 x/y 轴限制并重新绘制这些按钮 - 不幸的是，这个假设对我的情况不正确 - 我有一个需要推送和弹出的数据堆栈按钮事件被触发

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-27T10:06:06.903

Matplotlib 不提供 'home'、'back' 或 'forward' 按钮事件。

要添加将使用“home”、“back”或“forward”按钮事件调用的回调，一种常见的方法是子类化 matplotlib 后端。
但我不赞成这种做法。我认为它有两个缺点：

1.  如果要使用不同的后端，则必须对它们中的每一个进行子类化。
2.  在 matplotlib 之外部署自己的后端并非易事。您的后端必须是一个必须在 PYTHONPATH 中的模块。

由于 matplotlib 提供的后端都没有覆盖' `NavigationToolbar2`s`home`和方法。我更喜欢更简洁的猴子补丁方法。 例如，您可以用自己的方法替换's 。`back``forward`
`NavigationToolbar2``home`

```
import matplotlib.pyplot as plt
from matplotlib.backend_bases import NavigationToolbar2

home = NavigationToolbar2.home

def new_home(self, *args, **kwargs):
    print 'new home'
    home(self, *args, **kwargs)

NavigationToolbar2.home = new_home

fig = plt.figure()
plt.text(0.35, 0.5, 'Hello world!', dict(size=30))
plt.show() 
```

我们甚至可以模仿 matplotlib 的`mpl_connect`风格。

```
import matplotlib.pyplot as plt
from matplotlib.backend_bases import NavigationToolbar2, Event

home = NavigationToolbar2.home

def new_home(self, *args, **kwargs):
    s = 'home_event'
    event = Event(s, self)
    event.foo = 100
    self.canvas.callbacks.process(s, event)
    home(self, *args, **kwargs)

NavigationToolbar2.home = new_home

def handle_home(evt):
    print 'new home'
    print evt.foo

fig = plt.figure()
fig.canvas.mpl_connect('home_event', handle_home)
plt.text(0.35, 0.5, 'Hello world!', dict(size=30))
plt.show() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-27T07:10:47.150

我不知道这个问题的后端独立解决方案。但是当你使用 Qt4Agg 后端时，你可以试试这个：

```
import matplotlib
matplotlib.use("Qt4Agg")
import pylab as p

def home_callback():
    print "home called"

def back_callback():
    print "back called"

def forward_callback():
    print "forward called"

p.ion()
p.plot(p.random((10)))

fm = p.get_current_fig_manager()

fm.toolbar.actions()[0].triggered.connect(home_callback)
fm.toolbar.actions()[1].triggered.connect(back_callback)
fm.toolbar.actions()[2].triggered.connect(forward_callback) 
```

首先我得到当前的图形管理器，这样我就可以访问它的工具栏。然后我可以将其他回调连接到它的操作。

如果您不能选择使用 QT4Agg 作为后端，我们可以尝试对其他后端做类似的事情。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-27T00:32:25.957

如果您可以在 x 或 y 轴调整大小时只调用某个函数而侥幸逃脱，那么最简单的技巧就是绑定到您的轴生成的事件`xlim_changed`。`ylim_changed`例如：

```
 def on_xlim_change(*args):
          print "do your pushing and popping here..."
   ax = gca()
   ax.callbacks.connect('xlim_changed',on_xlim_change) 
```

每当您按下前进、后退或主页键以及使用平移或缩放工具（至少使用 WX 和 GTK 后端）时，都会执行此回调。但是，它仍然在 matplotlib 已经完成其通常的轴重新缩放之后执行。

如果您真的想直接访问这些按钮回调，那么我看不到一种简单的后端独立方式，因为事件处理的工作方式会根据您使用的后端而有所不同。我认为基本方法是继承`matplotlib.backends.backend_<name>.NavigationToolbar2<name>`和覆盖`forward`,`back`和`home`方法。您仍然需要根据您使用的特定后端确切地确定如何合并新的工具栏类。

如果您想实现一些与设置轴限制无关的自定义“前进/后退”控件，则最好使用[小部件](http://matplotlib.org/api/widgets_api.html)。

# javascript - jQuery UI 选项卡加载事件有时似乎过早触发

> ID：14896581
> 
> 赞同：1
> 
> 时间：2013-02-15T14:12:52.117
> 
> 标签：javascript, jquery-ui, jquery

这是一个奇怪的问题。我有一组通过 AJAX 加载的 jQuery UI 选项卡。load 事件应该在选项卡的内容加载并准备好后触发，有时在计算内容高度之后触发，有时在计算之前触发。

情况如下：第一个选项卡包含两个`.resizable()`div - 有一条中心线，您可以向左或向右拖动以使一个或另一个面板更大。我能让它们工作的唯一方法是绝对定位它们。

问题是，因为它们是绝对定位的，所以包含的 div 不能自动调整到它们的高度。为了让它们适合里面，我必须先找到它们的高度（内容是动态的，所以高度可能会改变），然后告诉包含的 div 比该高度高 70 像素。这是一个简单的功能：

```
function setTabHeight() {
    // The problem is only with Tab1, because of the absolute positioning. Any other tab, height can be set automatically.
    if ($("#tabs").tabs('option', 'active') != 0) { $("#tabs").height('auto'); return false; }
    // Tab1 contains two side-by-side divs, which we'll call "east" and "west".
    // This figures out which is taller and makes the containing div taller than that.
    var westDiv = $("#westDiv").height();
    var eastDiv = $("#eastDiv").height();
    if (westDiv > eastDiv) { $("#tabs").height(westDiv + 70); }
    else { $("#tabs").height(eastDiv + 70);
} 
```

我这样称呼该函数：

```
$(#tabs).tabs({
    load: function (e, ui) {
        [a bunch of other code, mostly the call to .resizable()]
        setTabHeight();
    }
}); 
```

除了有时有效，有时无效。我可以坐在那里重新加载完全相同的信息，有时它会调整包含的 div，有时它不会。我把`console.log($('#westDiv').height())`我的加载函数放在最后，再一次，有时它知道 div 的高度，有时它认为它的高度为零。

我能得出的唯一结论是，jQuery UI 选项卡的加载事件的触发速度比可以计算的内部 div 的高度快一点。我可以通过使用来使它工作`setTimeout(setTabHeight, 10)`，但这看起来非常笨拙，而且我担心如果我的任意十毫秒数被证明是错误的，那么在较慢计算机上的用户可能仍然会遇到麻烦。

对于更通用的解决方案有什么想法 - 具体来说，一种*仅在*计算元素高度后触发函数的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:33:13.403

我认为你可以使用[jQuery.Deferred](http://api.jquery.com/category/deferred-object/)解决这个问题。

像这样的东西：

```
function getDivHeight(strDivId) {
    var def = $.Deferred(), $div = $("#" + strDivId);

    setInterval(function () {
        var intDivHeight = $div.height();

        if (intDivHeight > 0) {
            def.resolve(intDivHeight);
        }
    }, 40);

    return def.promise();
}

$.when(getDivHeight("westDiv")).then(function (divHeight) {
    // Do something with the westDiv's height here.
}); 
```

这并不多，您需要一些额外的逻辑才能使其适用于您的特定情况，但我认为这可能是您制定可行解决方案的正确方向。

# asp.net-mvc - 在一系列值上查询我的模型

> ID：14896585
> 
> 赞同：0
> 
> 时间：2013-02-15T14:13:05.620
> 
> 标签：asp.net-mvc, entity-framework

我从事 ASP.NET MVC4 解决方案。

我有一个带有搜索条件的页面，如下所示：

*   来自 : _ _ _ _ _ 的运输号码
*   运输号码至：_ _ _ _ _ _

现在我想查询我的模型以获取该范围。

```
[DataContract]
public class SearchParametersTransportDTO
{
    [DataMember]
    public string TransportNumberFrom { get; set; }

    [DataMember]
    public string TransportNumberTo { get; set; }
}

public SearchResultDTO<Transport> SearchTransports(SearchParametersTransportDTO dto)
{
    using (var unitOfWork = UnitOfWorkFactory.Create())
    {
        var transportRepository = unitOfWork.Create<Transport>();
        var transports = transportRepository.GetAll();
        transports = transports.Where(s => s.TransportNumber.Contains(dto.TransportNumberFrom));
        ...
    }
    ... 
```

我找不到任何方法来搜索从...到的特定范围。

请注意，我的运输号码不是整数而是字符串（例如：'AZE.12/0009'、'AZE.12/0010'、...）

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:40:28.797

一个相关的问题有这个答案：[LINQ Between Operator](https://stackoverflow.com/questions/1447635/linq-between-operator)

对于您想要的东西来说，这可能有点矫枉过正，但查询的表达肯定是干净利落的。

```
var query = transports.Between(
            t => 
            t.TransportNumber, TransportNumberFrom, TransportNumberTo); 
```

# jsf - Primefaces：禁用数据表过滤器的 ajaxStatus

> ID：14896586
> 
> 赞同：1
> 
> 时间：2013-02-15T14:13:08.507
> 
> 标签：jsf, jsf-2, primefaces

我正在使用 Primefaces 3.5 并在我的 xhtml 中有一个表格。通过单击单独的`commandButton`，我刷新了表数据。由于数据量很大，我使用`ajaxStatus`来显示“正在加载...”对话框。

现在问题来了：表格必须对每一列都是可过滤的。到目前为止一切正常，但是当我输入一些过滤条件时，加载对话框也会出现。

**是否可以禁用`ajaxStatus`my 中的列`dataTable`？**我尝试了该参数`global="false"`，但没有任何成功。最好的解决方案是是否可以仅启用某些组件而不是禁用某些组件。

任何意见，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:03:07.870

也许您会从像[BlockUI](https://www.primefaces.org/showcase/ui/misc/blockUI.xhtml)这样的目标 UI 反馈组件中受益更多。使用该组件，您的 blockUI 将仅由命令按钮触发，并且数据表保持独立于该组件

# php - 在构造函数中返回值以避免代码重复

> ID：14896588
> 
> 赞同：4
> 
> 时间：2013-02-15T14:13:17.043
> 
> 标签：php, oop

据我所知，构造函数不返回值。我在下面面临的问题是，我必须`check_error()`在子类的每个方法中重复调用，以查看父`$error`数组是否有任何错误。

是否有机会更改我的代码以删除复制以使其更加用户友好和可维护？

谢谢

```
class RestfulRequest extends Restful
{
  public function __construct()
  {
     parent::__construct();

     if (is_array($this->error))
     {
        return 'Error found';
     }
  }
..
..
..
} 
```

我知道上面的代码是不可能的，但我只是添加给你看我首先需要什么。没有重复，每次启动只需检查一次。

```
abstract class Restful
{
  public $error = array('error1', 'error2');
  abstract public function check_error();
  abstract public function method_one();
  abstract public function method_two();
}

class RestfulRequest extends Restful
{
  public function __construct()
  {
     parent::__construct();
  }

  public function check_error()
  {
     return (is_array($this->error)) ? false : true;
  }

  public function method_one()
  {
     if ($this->check_error() === false)
     {
        return 'Error found';
     }

     return 'No error';
  }

  public function method_two()
  {
     if ($this->check_error() === false)
     {
        return 'Error found';
     }

     return 'No error';
  }
}

$obj_restful = new RestfulRequest();
echo $obj_restful->method_one();
echo $obj_restful->method_two(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:16:53.563

构造函数不能返回值，但可以抛出异常。

```
Class RestfulRequest extends Restful
{
  public function __construct()
  {
     parent::__construct();

     if (is_array($this->error))
     {
        throw new Exception('Error found.');
     }
  }
..
..
..
} 
```

# asp.net - 如何将静态下拉值插入数据库或单个表

> ID：14896589
> 
> 赞同：0
> 
> 时间：2013-02-15T14:13:17.513
> 
> 标签：asp.net, drop-down-menu, insert

我有一个下拉列表，在这个列表中有很多列表项是静态的

```
<asp:dropdownlist id = "abc" runat ="server">
<ListItem>1</ListItem>
<ListItem>2</ListItem>
<ListItem>3</ListItem>
<ListItem>4</ListItem>
 .....   
 .....    
 .....  
<ListItem>200</ListItem>         
</asp:dropdownlist> 
```

我想将所有下拉列表值插入到数据库或单个表中。

我创建了一个测试页面并尝试在加载时应用循环，但它不起作用。

所以任何机构都可以建议我以任何方式将所有值插入数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:35:19.753

在您的 aspx 中，项目需要是 asp:ListItems

```
<asp:DropDownList id="abc" runat ="server">
  <asp:ListItem>1</asp:ListItem>
  <asp:ListItem>2</asp:ListItem>
  <asp:ListItem>3</asp:ListItem>
  <asp:ListItem>4</asp:ListItem>
  <asp:ListItem>200</asp:ListItem>         
</asp:DropDownList> 
```

然后在页面加载中（其中 SqlInsert 是您进行数据库插入的方法）。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        foreach (ListItem item in abc.Items)
        {
            SqlInsert(item.Value, item.Text);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:26:13.460

将列表大小分配给变量，然后遍历列表并根据需要进行分配。前任：

```
 Dim listSize as Integer = abc.Items.Count
    For i as Integer = 0 to listSize
         'Do code here with items
          'abc.Items.Item(i) = ??
    Next 
```

# windows - OpenVPN 连接失败/此系统上的所有 TAP-Win32 适配器当前都在使用中

> ID：14896590
> 
> 赞同：66
> 
> 时间：2013-02-15T14:13:26.783
> 
> 标签：windows, networking, adapter, vpn, openvpn

^^

如果我要连接到任何 OpenVPN 网络，我会收到此错误。

```
All TAP-Win32 adapters on this system are currently in use. 
```

**这是一个屏幕截图。** -> [http://www.abload.de/image.php?img=openvpn_failbhjde.jpg](http://www.abload.de/image.php?img=openvpn_failbhjde.jpg)

**在我发布这个之前我做了什么？**

*   卸下 TAP-Win32 适配器 OAS
*   重新安装openvpn
*   重新安装openvpn gui

我有两台电脑的问题。 **为什么？**

**我的系统：**

*   Windows 7 专业版 64 位
*   普通网络接口
*   VirtualBox 网络接口
*   TAP-Win32 适配器 OAS

一切*合法*。所有*最新的*（最新的，稳定的版本）。

**解决方案**

1.  手动下载 OpenVPN：http: [//openvpn.net/index.php/download/community-downloads.html](http://openvpn.net/index.php/download/community-downloads.html)

:)

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2013-03-22T16:43:45.080

我找到了解决方案。这是该死的巫术，但它有效。

安装客户端时，打开**控制面板 > 网络连接**。

您将看到 TAP 安装程序添加的禁用网络连接（本地连接 3 或类似的）。

右键单击它，单击**启用**。

设备不会将自身重置为启用，但这没关系；尝试再次与客户端连接。它会工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-20T18:20:30.500

在我看来，您使用的版本错误...

TAP-Win32 不应安装在 64 位版本上。下载正确的并重试！

# android - 如何设置列表视图行高

> ID：14896591
> 
> 赞同：1
> 
> 时间：2013-02-15T14:13:33.270
> 
> 标签：android, listview

我有 listview 从我的手机加载一些数据并显示它..我的问题是 listvew 行太小而且高度不同..有人可以给我样品吗 ![在此处输入图像描述](../Images/4abdaa8cfa17d8c9452e9d4e90f0c2bb.png)

我的代码：包 info.superkiki.pocket.sampler；

```
import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class Activityone extends Activity{

     ListView musiclist;
     Cursor musiccursor;
     int music_column_index;
     int count;
     MediaPlayer mMediaPlayer;

     /** Called when the activity is first created. */
     @Override
     public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);
           setContentView(R.layout.main);
           init_phone_music_grid();

     }

     private void init_phone_music_grid() {
           System.gc();
           String[] proj = { MediaStore.Audio.Media._ID,
MediaStore.Audio.Media.DATA,
MediaStore.Audio.Media.DISPLAY_NAME,
MediaStore.Video.Media.SIZE };
           musiccursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
proj, null, null, null);
           count = musiccursor.getCount();
           musiclist = (ListView) findViewById(R.id.PhoneMusicList);
           musiclist.setAdapter(new MusicAdapter(getApplicationContext()));

           musiclist.setOnItemClickListener(musicgridlistener);
           mMediaPlayer = new MediaPlayer();
     }

     private OnItemClickListener musicgridlistener = new OnItemClickListener() {
           public void onItemClick(AdapterView parent, View v, int position,
long id) {
                 System.gc();
                 music_column_index = musiccursor
.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);
                 musiccursor.moveToPosition(position);
                 String filename = musiccursor.getString(music_column_index);
Intent person = new Intent();
Bundle backpack = new Bundle();
backpack.putString("arnswer", filename);
person.putExtras(backpack);
setResult(RESULT_OK, person);
finish();
           }
     };

     public class MusicAdapter extends BaseAdapter {
           private Context mContext;

           public MusicAdapter(Context c) {
                 mContext = c;
           }

           public int getCount() {
                 return count;
           }

           public Object getItem(int position) {
                 return position;
           }

           public long getItemId(int position) {
                 return position;
           }

           public View getView(int position, View convertView, ViewGroup parent) {
                 System.gc();
                 TextView tv = new TextView(mContext.getApplicationContext());
                 String id = null;
                 if (convertView == null) {
                       music_column_index = musiccursor
.getColumnIndexOrThrow(MediaStore.Audio.Media.DISPLAY_NAME);
                       musiccursor.moveToPosition(position);
                       id = musiccursor.getString(music_column_index);
                       music_column_index = musiccursor
.getColumnIndexOrThrow(MediaStore.Audio.Media.SIZE);
                       musiccursor.moveToPosition(position);
                       id += musiccursor.getString(music_column_index);
                       tv.setText(id);
                 } else
                       tv = (TextView) convertView;
                 return tv;
           }
 }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:33:48.287

首先，为了让您自己更轻松，您应该创建一行作为布局 xml 文件。

然后在你的`getView`方法中做这样的事情：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
  View row = convertView;
  if(row == null)
  {
      LayoutInflater inflater = getLayoutInflater();
      row = inflater.inflate(R.layout.row_layout_name, parent); 
  }

  //use row.findViewById(...) to get your elements from the layout.

  …

  return v;
} 
```

有关更多信息，请参阅此答案： [设置 ListView 项目高度](https://stackoverflow.com/questions/9439401/set-listview-item-height)

# objective-c - iOS6.0从横向viewController纵向推送新的viewController

> ID：14896607
> 
> 赞同：0
> 
> 时间：2013-02-15T14:14:36.743
> 
> 标签：objective-c, uiinterfaceorientation, autorotate, ios6

我的应用程序是基于导航的，主要以纵向运行，但一个视图控制器同时支持纵向和横向。现在的问题是，当我从横向视图控制器推送新视图控制器时，新视图控制器也会以横向模式推送，尽管我希望它处于纵向模式。

此外，当我从横向控制器弹出视图控制器时，弹出的视图控制器将以纵向模式显示。

我不知道我的代码有什么问题。

这是用于这些方向支持的我的代码片段和信息。

在 info.plist 文件中，我保持对所有方向的支持，但纵向倒置。

我还为导航控制器类别添加了类别，如下所示。

```
@implementation UINavigationController(Rotation_IOS6)
-(BOOL)shouldAutorotate
{
    return [[self.viewControllers lastObject] shouldAutorotate];
}

-(NSUInteger)supportedInterfaceOrientations
{
    return [[self.viewControllers lastObject] supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
}
@end 
```

我还创建了一个 UIViewController 子类，它充当所有类的超类。以下是超类的定向方法。

```
@implementation ParentViewController

- (BOOL)shouldAutorotate{
    return NO;
}

- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait;
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
    return (toInterfaceOrientation == UIInterfaceOrientationPortrait);
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation{
    return UIInterfaceOrientationPortrait;
}
@end 
```

支持横向的方向方法控制器如下。

```
@implementation LandscapeController
#pragma mark -
#pragma mark Orientation Methods
- (BOOL)shouldAutorotate{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait|UIInterfaceOrientationMaskLandscape;
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
    return (toInterfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}
@end 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:45:12.303

这是推送视图的方法。进行对象切换

在 switch.m

```
+ (void)loadController:(UIViewController*)VControllerToLoad andRelease:(UIViewController*)VControllerToRelease
{

VControllerToLoad.navigationController.navigationBar.frame=CGRectMake(0, 0, 568, 44);
CGRect statusBarFrame = [[UIApplication sharedApplication] statusBarFrame];
CGRect windowFrame = [[UIScreen mainScreen] bounds];
CGRect firstViewFrame = CGRectMake(statusBarFrame.origin.x, statusBarFrame.size.height, windowFrame.size.width, windowFrame.size.height - statusBarFrame.size.height);
VControllerToLoad.view.frame = firstViewFrame;

//check version and go

if (IOS_OLDER_THAN_6)
{
    [((AppDelegate*)[UIApplication sharedApplication].delegate).window addSubview:VControllerToLoad.view];
}
else
{
    [((AppDelegate*)[UIApplication sharedApplication].delegate).window setRootViewController:VControllerToLoad];

}
  [VControllerToRelease.view removeFromSuperview];
} 
```

您可以使用上述方法从横向模式推送到纵向视图

```
 PortraitViewController *portraitVC=[[PortraitViewController alloc]initWithNibName:@"PortraitViewController" bundle:nil];

  [Switch loadController:portraitVC andRelease:self]; 
```

在横向视图控制器.m

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    self.navigationController.title=@"Landscape";
    appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    appDelegate.navigationController.navigationBarHidden = NO;
    if (IOS_OLDER_THAN_6)
        [[UIApplication sharedApplication] setStatusBarOrientation:UIDeviceOrientationLandscapeLeft animated:NO];
    // Do any additional setup after loading the view from its nib.
}

#ifdef IOS_NEWER_OR_EQUAL_TO_6

-(BOOL)shouldAutorotate  
{
    return YES; 
 }

- (NSUInteger)supportedInterfaceOrientations    
 {
    return UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskLandscapeLeft; 
 }

#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:07:49.713

我有一个类似的问题。在我的情况下，这个视图控制器必须始终以横向显示，并且在返回的路上其他视图控制器必须设置回纵向。

我在 FAQ 中找到了以下解决方案： [iPhone Landscape FAQ and Solutions](https://stackoverflow.com/questions/2953351/iphone-landscape-faq-and-solutions/10146270#10146270)

该想法的关键在于，只能通过一种方式强制设备进入某个方向： 1\. 设置状态栏的方向。2\. 以模态方式（！）呈现任何支持目标方向的视图控制器。

好吧，您不想以模态方式呈现任何东西吗？不用担心。没有什么能阻止你...... 3\. 一旦出现，立即关闭该视图控制器。当您这样做时，用户甚至不会看到它。但是一旦完成，您的设备就会保持这个方向。4\. 推送您想要显示的视图控制器，甚至在您使用情节提要的情况下继续使用它。

对我来说，这似乎是唯一可行的解​​决方案。除了常见问题解答中的答案之外，其他所有内容也必须正确设置。整个项目支持的设备方向必须基本全部。每个视图控制器支持的方向必须是每个视图控制器支持并`shouldAutoRotate`应该返回的方向`YES`。如果涉及标签栏控制器，则会变得更加困难。如果您的应用基于标签栏，请回复我。

# android - 多个片段的树视图

> ID：14896609
> 
> 赞同：1
> 
> 时间：2013-02-15T14:14:38.170
> 
> 标签：android, android-layout, android-fragments

我正在寻找一种优雅的方式来显示片段的层次结构（树）。

我的想法是在不同的片段上显示每个级别。通过单击一个叶子，我将进入层次结构的下一个级别（这里也有一个漂亮的滑动动画会很高兴）。最后我会到达一个我有叶子的地方，这应该会导致一个细节视图。

我已经知道树视图的实现（例如[http://code.google.com/p/tree-view-list-android/](http://code.google.com/p/tree-view-list-android/)），但我希望每个级别都位于不同的片段上。在 Mac 文件浏览器中的大屏幕（平板电脑）上显示多个级别也很酷。

主要原因是，我想根据请求从服务器加载每个级别的数据（树很大），其次我想有一个清晰的布局。另一方面，我不想让每个级别片段单独实现，因为深度可以从一个分支到另一个分支。

我的数据目前的形式是，每个树节点都由一个 TreeElement 对象表示，该对象具有一个 id、一个名称、TreeElementType（节点或叶）和一个 TreeElements 列表作为子项。如果必须修改此结构，那将是可行的。

谁能想到实现这一点的好方法？

最好的，埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:40:42.253

我终于找到了一个可行的解决方案：

我的 TreeElement 类如下所示：

```
public class TreeElement
{
private int id;
private TreeElementType type;
private String name;

/**
 * List that holds a set of all the children tree elements.
 */
private List<TreeElement> children = new ArrayList<TreeElement>();

/**
 * List that holds a set of the courses associated to the TreeElement.
 * 
 * @see Course
 */
private List<Course> courses = new ArrayList<Course>();

public TreeElement()
{
    this.type = TreeElementType.NODE;
    this.children = new ArrayList<TreeElement>();
}

public TreeElement(int id)
{
    this();
    this.id = id;
}

public TreeElement(int id, String name)
{
    this( id );
    this.name = name;
}

public TreeElement(int id, TreeElementType type, String name)
{
    this( id, name );
    this.type = type;
}

public int getId()
{
    return id;
}

public void setId(int id)
{
    this.id = id;
}

public TreeElementType getType()
{
    return type;
}

public void setType(TreeElementType type)
{
    this.type = type;
}

public String getName()
{
    return name;
}

public void setName(String name)
{
    this.name = name;
}

public List<TreeElement> getChildren() {
    return children;
}

public void setChildren(List<TreeElement> children) {
    this.children = children;
}

public void addChild(TreeElement child) {
    this.children.add(child);
}

public void addChildren(List<TreeElement> children) {
    this.children.addAll(children);
}

public List<Course> getCourses() {
    return courses;
}

public void setCourses(List<Course> courses) {
    this.courses = courses;
}

public void addCourse(Course course) {
    this.courses.add(course);
}

public void addCourses(List<Course> courses) {
    this.courses.addAll(courses);
}
} 
```

因此，这些 TreeElements 会生成一个分层树。每个 TreeElement 还可以包含一些我想在树中显示的课程。

包含页面的所有寻呼机的片段是这个：

```
public class BrowserSectionFragment extends Fragment {
private BrowserFragmentPagerAdapter mAdapter;
private ViewPager mPager;
private List<Fragment> fragments = new Vector<Fragment>();

public BrowserSectionFragment() {
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.fragment_browser, container, false);

    /*
     * Add the root TreeElement-fragment, holding the categories of lowest
     * level.
     */
    fragments.add(new BrowserPageFragment(this,TreeContainer.getTreeElement(TreeContainer.ROOT_ID)));

    mAdapter = new BrowserFragmentPagerAdapter(this.getFragmentManager(), fragments);

    mPager = (ViewPager) view.findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);

    mPager.setOnPageChangeListener(new OnPageChangeListener() {
        @Override
        public void onPageScrollStateChanged(int arg0) {}

        @Override
        public void onPageScrolled(int arg0, float arg1, int arg2) {}

        @Override
        public void onPageSelected(int arg0) {
            while (arg0 < fragments.size()-1) {
                fragments.remove(fragments.size()-1);
            }

            /*
             * notify the adapter of the changes being made
             * causes the adapter to check all elements, if they are still in the
             * list of fragments
             */
            mAdapter.notifyDataSetChanged();
        }
    });

    return view;
}

/**
 * Adds a new fragment to the fragment manager. The data is taken from
 * the children list of the TreeElement.
 * 
 * @param clickedElement
 */
public void addFragmentFromElement(TreeElement clickedElement) {
    fragments.add(new BrowserPageFragment((this),clickedElement));
    mPager.setCurrentItem(fragments.size()-1, true);
}
} 
```

现在我需要一个 PagerAdapter，在本例中是 FragmentStatePagerAdapter，来组织 Fragment：

```
public class BrowserFragmentPagerAdapter extends FragmentStatePagerAdapter {
/**
 * List that holds all the fragments which are currently accessible
 * through the Pager.
 */
private List<Fragment> mFragments;

/**
 * Constructor that initializes the list of fragments.
 * 
 * @param fm FragmentsManager
 * @param fragments
 */
public BrowserFragmentPagerAdapter(FragmentManager fm, List<Fragment> fragments) {
    super(fm);
    mFragments = fragments;
}

@Override
public Fragment getItem(int position) {
    return mFragments.get(position);
}

@Override
public int getCount() {
    return mFragments.size();
}

@Override
public int getItemPosition(Object item) {
    /*
     * See if fragment is still in the list.
     * If yes, the position in the list is returned, if not, POSITION_NONE, 
     * which causes the Pager to delete the related view.
     */
    Fragment fragment = (Fragment) item;
    int position = mFragments.indexOf(fragment);

    if (position >= 0) {
        return position;
    } else {
        return POSITION_NONE;
    }
}
} 
```

最后我实现了一个显示 ListView 的 PageFragment：

```
public class BrowserPageFragment extends ListFragment {
public static final String ARG_ELEMENT_ID = "element_id";
TreeElement element;
BrowserSectionFragment frag;
Context context;

public BrowserPageFragment() {
    super();
}

public BrowserPageFragment( BrowserSectionFragment frag, TreeElement element ) {
    this();
    this.frag = frag;
    this.element = element;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
    /* Creating an array adapter to store the list of countries **/
    BrowserListAdapter adapter = new BrowserListAdapter(inflater.getContext(),element);
    /* Setting the list adapter for the ListFragment */
    setListAdapter(adapter);

    return super.onCreateView(inflater, container, savedInstanceState);
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {

    Object clickedElement = l.getAdapter().getItem(position);

    if (clickedElement instanceof TreeElement) {
        frag.addFragmentFromElement((TreeElement) clickedElement);
    } else if (clickedElement instanceof Course) {
        /*
         * Start a new fragment which shows a detail view of the course.
         */
        Course course = (Course) clickedElement;
        int courseId = course.getId();
        CourseContainer.setCourse(courseId, course);

        Fragment fragment = new DetailsFragment();
        Bundle args = new Bundle();
        args.putInt( DetailsFragment.ARG_COURSE_NUMBER, courseId);
        fragment.setArguments(args);

        getActivity().getSupportFragmentManager().beginTransaction().replace(R.id.container, fragment).commit();
    }
}
} 
```

为了使其完整，我的自定义 ListAdapter 如下所示：

```
public class BrowserListAdapter extends BaseAdapter {
private final LayoutInflater mInflater;
TreeElement element;
List<Object> elements = new ArrayList<Object>();

public BrowserListAdapter(Context context, TreeElement element) {
    mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    this.element = element;

    elements.addAll(element.getChildren());
    elements.addAll(element.getCourses());
}

@Override
public int getCount() {
    return elements.size();
}

@Override
public Object getItem(int position) {
    return elements.get(position);
}

@Override
public long getItemId(int position) {
    Object item = elements.get(position);
    if (item instanceof TreeElement) {
        return ((TreeElement) item).getId();
    } else if (item instanceof Course) {
        return ((Course) item).getId();
    }

    return -1;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View itemView = (View) mInflater.inflate(android.R.layout.simple_list_item_1, parent, false);
    bindView(itemView, position);
    return itemView;
}

private void bindView(View itemView, int position) {
    Object item = getItem(position);
    String text = null;

    if (item instanceof TreeElement) {
        text = ((TreeElement) item).getName();
    } else if (item instanceof Course) {
        text = ((Course) item).getTitle();
    }

    itemView.setId((int) getItemId(position));
    TextView title = (TextView) itemView;
    title.setText(text);
}
} 
```

也许这个解决方案可以帮助某人。这里唯一剩下的问题是：

*   BrowserPageFragment 的构造函数有一个带参数的构造函数，这不是很好。
*   更改方向时，寻呼机跳到第一页。
*   后退按钮不会转到上一页。

# java - 更新语句卡住线程：取消或关闭语句，中断线程不起作用

> ID：14896610
> 
> 赞同：0
> 
> 时间：2013-02-15T14:14:39.793
> 
> 标签：java, multithreading

我一直在阅读很多关于停止线程的信息，但我无法找到解决我的问题的方法：

我有一个连接了 3 个线程的 Sybase DB 连接。加上一个线程来监视这 3 个线程。

然而，因为服务器超载（我知道：我应该解决这个问题，但我们还没有钱），调用：Statement stmt.executeUpdate("update something from some_table"); 永远不会回来。

这是线程大致执行的操作（不可编译，因为它无论如何都不可重现）：

```
class runQuery implements Runnable {
    public Connection conn;
    public long lastQueryRunTime = 0;
    public Statement stmt;
    public volatile keepongoing = true;

    runQuery(Connection conn, String Probe, String Server, int thisthread) {
         this.conn = conn;
         Class.forName("com.sybase.jdbc2.jdbc.SybDriver");
         conn = DriverManager.getConnection("jdbc:sybase:Tds:"+Server+":4100?SERVICENAME="+Probe,"login","password");
    }

    public void run () {
        while(keepongoing) {
        query = "update something from some_table";
        lastQueryRunTime = System.currentTimeMillis()/1000;
        stmt = conn.createStatement();
        stmt.setQueryTimeout(4);
        int result = stmt.executeUpdate(query);
        lastQueryRunTime = 0;
    }
} 
```

这应该给出一个粗略的想法。另一方面，我有一个“MonitorThemAll”线程来检查 lastQueryRunTime：如果它太长，我想......做点什么！

因此，从监控线程中，我尝试过：更改 keepongoing 标志 ...但由于线程卡在更新查询中，它并没有做太多然后：stmt.cancel(), stmt.close() =>它似乎没有多大作用。执行 kill -3 表明线程仍然停留在 executeUpdate 行上。

我转向更有力的解决方案： conn.close() => 从那里开始，每次尝试 stmt.cancel/close 时都会出现异常“JZ0C0：连接已关闭”（这些异常是由 stmt.cancel/close 命令引发的: 即：它们在 MonitorThemAll 线程中，而不是在 runQuery 线程中......）而且：mythread.interrupt() => 之后仍然停留在更新查询中！

我在这里和谷歌上找到的解决方案已经用完了......因为 thread.close() 已被弃用（即使，我想避免，以便我可以恢复所使用的资源），我不知道我还能尝试什么...

会有人知道要尝试的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:23:58.357

假设您的问题是 sql 查询太长而无法执行，您可以将 sql 查询传递给后台线程以执行查询并在查询完成时获取结果（通过回调侦听器或队列）。

# extjs - Ext.form.field.File 禁用按钮

> ID：14896611
> 
> 赞同：3
> 
> 时间：2013-02-15T14:14:41.490
> 
> 标签：extjs, extjs4

我有以下文件字段：

```
{
    xtype: 'filefield',
    name: 'photo',
    fieldLabel: 'Photo',
    labelWidth: 50,
    allowBlank: false,
    buttonText: 'Select Photo...'
} 
```

我尝试使用以下方法禁用文件字段的按钮：

```
if (f instanceof Ext.form.field.File) { //f is a field in my form
    f.button.setDisabled(true)
} 
```

这就像我在视觉上所期望的那样工作，但是在启用此按钮后，不再调用该按钮的处理程序。
我能听到你在想*你为什么不在`setDisabled()`球场上打电话？*..因为如果该字段被禁用，表单将不会提交其值。我实现了我自己的使用 CSS 禁用项目的方法。

我的问题是：**如何禁用按钮****`filefield`*****在 ExtJS 4.1.2 中？*****

 **** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:09:10.083

这似乎是ExtJs 4.1 中[的一个错误](http://www.sencha.com/forum/showthread.php?242022)。

这在 ExtJS 4.1.3 版本中得到解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:48:42.893

为什么不在按钮上放一个小面具？可以手动控制。***

# html - 如何在移动设备上使图像全屏而不在桌面上？

> ID：14896612
> 
> 赞同：3
> 
> 时间：2013-02-15T14:14:43.097
> 
> 标签：html, css, layout, mobile, fullscreen

我放了一张图片来通知我的网站正在建设中。这是一个 800x600 的图像，当您在桌面访问时保持其原始大小。这是页面中唯一的内容。

当人们从手机访问它时，我想让它适合整个屏幕。如何？

```
<style type="text/css">
    body { background-color: #6BC5C5; }
</style>
<title>Size is being moved to another server</title>
<div style="margin: 0; padding: 0; left: 0; top: 0; border: 0; position: absolute;">
<img src="movedatacenter.jpg" alt="Under Maintenance" width="595" height="1021" align="left"></div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T14:21:45.710

您要使用的是媒体查询。使用媒体查询，您可以根据屏幕大小强制执行不同的 CSS 规则。

例如：

```
@media only screen and (max-width: 600px) {

    img#underconstruction {width: 100%; height: 100%; margin: 0; padding; 0;}
} 
```

如果设备屏幕为 600px 或更小，这将强制具有 underconstruction 的 id 的 img 变为全宽和全高。600 是一个不错的尺寸，因为较新的 iphone 的高度大于 480。

此外，您需要在具有以下元标记的移动设备上将视口强制为 1:1：

```
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="HandheldFriendly" content="true"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T14:22:52.847

使用以下内容设置图像的样式：

```
width: 100%;
height: 100%;
max-width: 800px;
max-height: 600px; 
```

这会将图像的大小扩展到父级，最大为 800x600。确保父元素也是窗口的宽度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T14:23:10.313

您可以为此使用 CSS 媒体查询

```
@media all and (max-width: 768px) {
/* 768px is usually the width of tablets in portrait orientation */
/* You can use any other size you see fit */

    img {width: 100%;}
} 
```

这将仅在宽度低于给定时应用样式信息`max-width`。

# ios - 需要双向展开uitableviewcell

> ID：14896616
> 
> 赞同：0
> 
> 时间：2013-02-15T14:14:51.033
> 
> 标签：ios, uitableview

我在 tablebiew 的单元格上实现了捏合手势。捏合时，细胞膨胀（我增加细胞高度），但增加是朝向底部方向。

我也想让细胞向顶部方向扩张，以便将细胞向前推向顶部。

在ios中可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:41:50.363

我认为你只能向下增加高度，但是无论你增加高度，改变 tableview 的 contentOffset 以便内容向上滚动高度增加的一半。这样，单元格将出现在上方和下方扩展。一旦停止收缩，如果 contentSize 小于表视图的边界，请记住将 contentOffset 恢复为 CGSizeZero。

# ios - iOS6 在非越狱设备上切换 WiFi

> ID：14896622
> 
> 赞同：2
> 
> 时间：2013-02-15T14:15:05.227
> 
> 标签：ios, ios6, wifi, iphone-privateapi

我正在开发一个内部 iOS 应用程序（**不适用于 APPLE STORE**，所以我很高兴使用私有 API）并且我希望能够以编程方式打开或关闭 wifi。我之所以要这样做的原因是，对于某些 WiFi 路由器，每当互联网连接中断时，iPad 就无法恢复 WiFi——然而，打开/关闭 WiFi 可以解决问题。

在 SO 和 Google 上搜索了一天后，我找不到任何最近的帖子。在 iOS 6 上是否可以在**不越狱设备**的情况下使用私有 API 打开/关闭 WiFi。有人有他可以分享的源代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:13:45.330

我认为看看**SystemConfiguration.framework**是有意义的。

它有一组 API 来处理不同的连接接口，这些接口[在这里](http://developer.apple.com/library/mac/#documentation/Networking/Reference/SCNetworkConfiguration/Reference/reference.html)定义：

但是，需要明确的是，这只是一个猜测。我不确定这些 API 是否允许打开/关闭 wifi。

# android - 如何从云端获取数据到安卓

> ID：14896626
> 
> 赞同：0
> 
> 时间：2013-02-15T14:15:17.957
> 
> 标签：android, list, cloud

我已经完成了将数据从 android 插入到云中，我想要做的是，我想从云中获取存储的数据（在我的理解中）列出对象“在云中包含字符串数据类型”和将其设置为 TextView 这是我的代码：

```
package com.cloud.test;

import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;

import com.parse.FindCallback;
import com.parse.Parse;
import com.parse.ParseException;
import com.parse.ParseObject;
import com.parse.ParseQuery;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //id from the cloud and perfectly working
        Parse.initialize(this, "idp7tOItFQ1TeQ87NqG5okzgsTzBZSfOmTh3LjbJ", "sPlps2HcBLzfBcZTG8uUFPi5gHkGbwFYVGHhGtwd");

    }
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.btn1:
            /**
             * this is for inserting data to cloud
             */
            EditText et1 = (EditText)findViewById(R.id.et1);
            EditText et2 = (EditText)findViewById(R.id.et2);
            EditText et3 = (EditText)findViewById(R.id.et3);
            String name = et1.getText().toString();
            int price = Integer.parseInt(et2.getText().toString());
            String desc = et3.getText().toString();
            ParseObject test = new ParseObject("Wardrobe");

            test.put("price", price);
            test.put("name", name);
            test.put("description", desc);
            test.saveInBackground();
            break;

        case R.id.btn2:
            /**
             * below is my problem, i don't know how do i actually get the data from the list
             * which is all String
             */
            ParseQuery query = new ParseQuery("Wardrobe");
            query.whereEqualTo("description", "male");
            query.findInBackground(new FindCallback() {
                @Override
                public void done(List<ParseObject> dataList, ParseException e) {
                    // TODO Auto-generated method stub
                     if (e == null) {
                         TextView tv1 = (TextView)findViewById(R.id.tv1);
                         TextView tv2 = (TextView)findViewById(R.id.tv2);
                         TextView tv3 = (TextView)findViewById(R.id.tv3);
                            /**
                             * here i want to set the data to the TextView to be viewed by the user
                             */
                            Log.d("score", "Retrieved " + dataList.size() + " scores");
                        } else {
                            Log.d("score", "Error: " + e.getMessage());
                        }
                }
            });
            break;
        default:
            break;
        }

    }
} 
```

提前感谢您帮助我

这是我使用的更新`String.value(dataList);`，我得到的是这个`com.parse.ParseObject@44f904b8, com.parse.ParseObject@44f90a30`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:37:26.493

```
public void done(List<ParseObject> dataList, ParseException e) {
                    // TODO Auto-generated method stub
                     if (e == null) {

                           TextView tv1 = (TextView)findViewById(R.id.tv1);
                        for(int x = 0; x < scoreList.size(); x++)
                        {
                         String d =  scoreList.get(x).getString("name");                         
                         tv1.setText(tv1.getText()+" "+d);
                        }
                            Log.d("score", "Retrieved " + dataList.size() + " scores");
                        } else {
                            Log.d("score", "Error: " + e.getMessage());
                        }
                }
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:28:45.447

除非您有一个重写的 toString 方法来打印出不同的东西，否则它会打印出类以及我认为是内存地址或类似的东西。如果你想使用 String.value（或 toString - 同样的东西），你需要重写 ParseObject 的 toString 方法。如果您不想或无权访问该代码，则需要从 ParseObject 类提供的 getter 方法手动构建所需的字符串。

# macos - Cocos2d-X：如何为 macosx 创建构建？

> ID：14896629
> 
> 赞同：2
> 
> 时间：2013-02-15T14:15:28.430
> 
> 标签：macos, cocos2d-x

我一直在寻找（没有成功）使用 cocos2d-x 创建 MACOSX 项目的模板。我怎样才能做到这一点？涉及的步骤？

干杯! 费尔南多

# c# - 在 Metro 应用程序中拉伸和居中弹出窗口

> ID：14896630
> 
> 赞同：1
> 
> 时间：2013-02-15T14:15:38.490
> 
> 标签：c#, visual-studio-2012, popup, microsoft-metro

我有一个弹出窗口，但在视觉设计器中它既不拉伸也不居中。为什么是这样？我怎样才能达到这个效果？

这就是我在可视化树中设置它的方式：

```
 <Popup x:Name="namePromptPopup" IsLightDismissEnabled="True" Grid.Row="1" Grid.Column="1">
        <Popup.ChildTransitions>
            <TransitionCollection>
                <PopupThemeTransition/>
            </TransitionCollection>
        </Popup.ChildTransitions>
        <StackPanel>
            <Border BorderBrush="White" BorderThickness="5" >
                <Border.Background>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="#FF600F0F"/>
                        <GradientStop Color="#FFB81C1C" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBox Text="Generic Name" FontSize="38" HorizontalAlignment="Center" Width="320" />
                    <Button Content="Submit" Click="namePromptSubmit" HorizontalAlignment="Center" />
                </StackPanel>
            </Border>
        </StackPanel>
    </Popup> 
```

似乎弹出控件根本不响应布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:37:58.110

我检查了网络，感谢[这个人](http://winrtprogramming.wordpress.com/2012/10/16/making-a-popup-window-in-c-windows-metro-winrt/)，他有一个你可以使用的解决方案。

他只是计算窗口宽度/高度并使用弹出窗口宽度/高度来给出偏移量。

```
//Here is where I get a bit tricky.  You see namePromptPopup.ActualWidth will show
//the full screen width, and not the actual width of the popup, and namePromptPopup.Width
//will show 0 at this point.  So we needed to calculate the actual
//display width.  I do this by using a calculation that determines the
//scaling percentage from the height, and then calculates that against my
//original width coding.
namePromptPopup.HorizontalOffset = (currentWindow.Bounds.Width / 2) - (400 / 2);
namePromptPopup.VerticalOffset = (currentWindow.Bounds.Height / 2) - (150 / 2); 
```

[再次参考](http://winrtprogramming.wordpress.com/2012/10/16/making-a-popup-window-in-c-windows-metro-winrt/)

# php - Codeigniter result_array() 何时返回单维或多维数组？

> ID：14896633
> 
> 赞同：5
> 
> 时间：2013-02-15T14:15:47.083
> 
> 标签：php, codeigniter

返回 $query->result_array();
有时我会得到多个这样的单个数组：

```
Array
(
    [user_id] => 32
    [username] => johnd
    [cat_id] => 7
)
Array
(
    [user_id] => 33
    [username] => Janed
    [cat_id] => 6

) 
```

虽然有时我会得到这样的多维数组：

```
Array
(
    [0] => Array
        (
            [user_id] => 33
            [username] => Janed
            [cat_id] => 6
        )

    [1] => Array
        (
            [user_id] => 32
            [username] => Johnd
            [cat_id] => 7
        )

) 
```

是否与查询有关，是否有特定原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:55:53.053

`$query->result_array()` **总是**返回一个二维数组（除非数据库没有返回结果，否则它返回一个空数组）。

它会返回一个“结果”数组的数组。每个结果数组都包含该行的字段。

文档：[http ://ellislab.com/codeigniter/user-guide/database/results.html](http://ellislab.com/codeigniter/user-guide/database/results.html)

# c# - 重用模型 MVC

> ID：14896634
> 
> 赞同：0
> 
> 时间：2013-02-15T14:15:49.530
> 
> 标签：c#, razor, asp.net-mvc-4

我有以下场景，目前我从外部服务（我无法控制）检索整个人，包括他们的地址。我只想显示地址的一个实例，然后有一个模型来显示其余的（如果需要）。目前我通过这个想法然后对外部服务进行另一次查找，但是由于我已经有了数据，所以效率很低。

任何人都可以提供一个好的策略来帮助传输地址列表的最佳方式吗？

注意我以简化的形式重新输入了代码，所以请忽略任何错别字

楷模

```
public class PersonModel
{
    Public int Id {get;set}
    Public String Name {get; set;}
    Public IEnumerable Address {get; set;}
    // Single Address from the collection 
    Public DisplayAddress {get;set;}
}

public class AddressesViewModel
{
    public IEnumerable<Address> Address { get; set; }
} 
```

风景

```
@model PersonModel  
<span>@Model.Name</span>
<ol>
                        @if (Model.DisplayAddress != null)
                        {
                            <li>@Model.DisplayAddress.Line1</li>

                        <li>@Model.DisplayAddress.Line2</li>
                        <li>@Model.DisplayAddress.Line3 </li>

                        <li>@Model.DisplayAddress.Town</li>
                        <li>@Model.DisplayAddress.County</li>
                        <li>@Model.DisplayAddress.PostalCode</li>
                        <li>@Model.DisplayAddress.Country</li>
                        }
                    </ol>
 <a id="showalladdresses" title="View all addresses" href="#">View All Addressess</a>

@section scripts {
<script type="text/javascript">
    $(function () {
        $('#Modal').dialog({
            autoOpen: false,
            height: 600,
            width: 800,
            resizable: false,
            modal: true
        });

        $('#showalladdresses').click(function () {
            $('#Modal').load("@Url.Action("ViewAddresses", new { id = Model.Id })", function () {
                $(this).dialog('open');
            });
            return false;
        });

    });

 } 
```

控制器

```
 public ActionResult PersonBanner(long? Id)
    {
        if (!Id.HasValue)
            return RedirectToAction("Index", "HomeController");

        var result = new PersonModel();
        result = unitOfWork.GetPersonSummaryDetails(Id.Value)

        return View(result);
    }
public ActionResult ViewAddresses(long Id)
    {

        var model = new AddressesViewModel
            {
             Address = unitOfWork.GetAddressesById(Id);
            };
        if (Request.IsAjaxRequest())
            return PartialView(model);
        return View(model);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:26:33.257

可以再次获取数据。只需将 PatientSummaryDetails 放入缓存即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:27:32.430

> 但是，由于我已经拥有数据，因此效率低下。

不，你还没有。据我了解，这`PersonBanner`是`ViewAddresses`两个单独的 HTTP 请求：一个是页面请求，另一个是通过 AJAX。您的 Web 应用程序是无状态的，因此您需要在每次请求时加载所需的所有数据。

如果你发现你*真的*需要性能，你可以在你的 UI 和你的服务之间引入一个缓存层，它会`PersonModel`在第一个请求时缓存 a，并在后续请求时从缓存中返回它。缓存有时会产生围绕数据陈旧的问题，因此仅在需要时才进行探索。

# c# - 如何解决使用 MS Access 的“无法启用约束”异常？

> ID：14896638
> 
> 赞同：0
> 
> 时间：2013-02-15T14:16:01.997
> 
> 标签：c#, asp.net, ms-access, ms-access-2010

我正在使用 ASP.net 3.5 开发一个网站，我也在使用 MS Access 2013 作为数据库，在后面的代码中我编写了以下代码，以从数据库中获取数据：

```
list = adapter.GetData().Rows.Cast<DataRow>().Select(row =>
     new Item()
     {
           ID = Convert.ToInt32(row["ID"]),
           gbName = (string)row["gbName"],
           gbLocation = (string)row["gbLocation"],
           gbBodyContent = (String)row["gbBodyContent"],
           gbDate = (string)row["gbDate"]
     }).ToList(); 
```

在`gbBodyContent`我选择“长文本”作为类型，但是当我输入长文本时，我收到以下异常：

> 无法启用约束。一行或多行包含违反非空、唯一或外键约束的值。

任何人都可以解释这一点！？

# android - 触摸显示屏时更改 onDraw Bitmap

> ID：14896640
> 
> 赞同：0
> 
> 时间：2013-02-15T14:16:07.870
> 
> 标签：android, bitmap, touch-event, ondraw

我对我的代码有疑问。我希望每次有人触摸显示器时我的位图都会改变。

```
protected boolean processTouch(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {

        player.setGraphic(BitmapFactory.decodeResource(Game.res, R.drawable.sprite2));

    } 
    return true;
} 
```

在我的 player.java 文件中，我输入：

```
public class Player extends Sprite
{
public Player(int x, int y)
{
    super(BitmapFactory.decodeResource(Game.res, R.drawable.sprite1), x-350, y, 50, 17, 5, 2);

}
public void update()
{
getGraphic();
}

public Bitmap getGraphic() 
{
    return bitmap;
}
public void setGraphic(Bitmap bitmap)
{
    this.bitmap = bitmap;
}

private Bitmap bitmap;} 
```

我的 Sprite 类包含：

```
 public Sprite(Bitmap bitmap, int x, int y, int width, int height, int fps, int frameCount) 
{
    this.bitmap = bitmap;

}
public Bitmap getGraphic() 
{
    return bitmap;
}
private Bitmap bitmap; 
```

然后我想显示它：

```
canvas.drawBitmap(s.getGraphic(), s.getSourceRect(), destRect, null); 
```

但是，当我尝试启动游戏时，它崩溃了。我怎么解决这个问题？

**编辑**：

日志：

```
02-15 15:29:51.174: I/ActivityManager(18563): Displayed com.example.nic_beta/.Game: +488ms
02-15 15:29:51.197: W/dalvikvm(29635): threadid=11: thread exiting with uncaught exception (group=0x419cb930)
02-15 15:29:51.197: E/AndroidRuntime(29635): FATAL EXCEPTION: Thread-23004
02-15 15:29:51.197: E/AndroidRuntime(29635): java.lang.NullPointerException
02-15 15:29:51.197: E/AndroidRuntime(29635):    at android.graphics.Canvas.throwIfRecycled(Canvas.java:1025)
02-15 15:29:51.197: E/AndroidRuntime(29635):    at android.graphics.Canvas.drawBitmap(Canvas.java:1127)
02-15 15:29:51.197: E/AndroidRuntime(29635):    at com.example.nic_beta.Panel.onDraw(Panel.java:70)
02-15 15:29:51.197: E/AndroidRuntime(29635):    at com.example.nic_beta.RunnerThread.run(Panel.java:187)
02-15 15:29:51.213: W/ActivityManager(18563):   Force finishing activity com.example.nic_beta/.Game
02-15 15:29:51.260: W/ActivityManager(18563):   Force finishing activity com.example.nic_beta/.Menu 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:57:48.830

对于 throwIfRecycled 错误，[这是一个可能的解决方案](http://www.nowherenearithaca.com/2011/06/solved-bizarre-null-pointer-thrown-in.html)。

但是，就像 Gabe 所说，您应该在创建应用程序时对 Bitmap 进行一次解码，然后在需要时绘制它。

# c - MinGW GCC 4.7.0 警告我将 double [][] 传递给 const double(*)[]

> ID：14896645
> 
> 赞同：1
> 
> 时间：2013-02-15T14:16:28.250
> 
> 标签：c, windows, gcc, mingw

我在主函数中有两种类型的双二维数组。我有将array1复制到array2的函数。我将两个数组都传递给该函数。第一个数组不需要更改，所以我将形式参数 od first array 声明为 const 类型，但 MinGW GCC 给 ma 一个警告：

```
main.c:14:5: warning: passing argument 1 of 'Copy' from incompatible pointer type [enabled by default]
main.c:2:6: note: expected 'const double (*)[3]' but argument is of type 'double (*)[3]' 
```

除该警告外，程序还可以工作，但是如果我只想从中读取，可以声明 const 类型的形式参数。我想保护被改变的实际论点。

```
#include <stdio.h>
void Copy( const double (*)[3], double (*)[3], int);

int main(void)
{
    double array[4][3] =
    { 
        {79.2, 12.6, 111.9}, 
        {56.4, 139.2, 111.5}, 
        {11.1, 99.7, 21.0}, 
        {91.0, 11.2, 45.5}
    };
    double arrCopy[4][3];
    Copy(array, arrCopy,  4);

    for(int i = 0; i < 4; i++)
    {
        for(int j = 0; j < 3; j++)
        {
            printf("%.2f ", *(*(arrCopy + i) + j));
        }
        putchar('\n');
    }
    return 0;
}

void Copy( const double (*array)[3], double (*arrCopy)[3], int n )
{
    for(int i = 0; i < n; i++)
    {
        for(int j = 0; j < 3; j++)
        {
            *(*(arrCopy + i) + j) = *(*(array + i) + j);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:19:43.367

从

```
void Copy( const double (*array)[3], double (*arrCopy)[3], int n ) 
```

# actionscript-3 - 如何在 AS3 中停止影片剪辑中的所有子影片剪辑？

> ID：14896655
> 
> 赞同：0
> 
> 时间：2013-02-15T14:16:58.873
> 
> 标签：actionscript-3, flash, movieclip

我有一个电影剪辑，它是游戏中的角色。在这个movieclips 中有几个movieclips，其中包含具有动画的肢体。那么有人对如何 gotoAndStop(1) 提出建议吗？在角色内部的所有电影剪辑上，而不必手动调用每个肢体对象？

角色动画剪辑总共包含 4 帧上的 20 个动画剪辑，所以我只想停止角色内部的所有动画剪辑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T14:36:01.437

如果我理解正确（即：停止另一个影片剪辑中的所有影片剪辑），这应该有效：

```
function stopAllClips(mc:MovieClip):void
{
    var n:int = mc.numChildren;
    for (var i:int=0;i<n;i++)
    {
        var clip:MoviceClip = mc.getChildAt(i) as MovieClip;
        if (clip)
            clip.gotoAndStop(1);
    }
} 
```

就这样称呼它：

```
stopAllClips(yourMovieClip); 
```

yourMovieClip 是角色。

* * *

## 编辑

从 Flash Player 11.8 / AIR 3.8 开始，所有 DisplayObjectContainer 都有一个内置方法，称为[stopAllMovieClips](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#stopAllMovieClips())。

```
commonParent.stopAllMovieClips(); 
```

请记住，这将递归地停止所有孩子和孙子，这与仅停止直接孩子的原始答案不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-04T17:29:23.947

我认为最简单的方法：

```
// MovieClip propotype function that stop all running clips (current and inside clips)
MovieClip.prototype.stopAllClips = function():void {
    var mc:MovieClip = this;
    var n:int = mc.numChildren;
    mc.gotoAndStop(1);
    for (var i:int=0; i<n; i++) {
        var clip:MovieClip = mc.getChildAt(i) as MovieClip;
        if (clip) {
            clip.gotoAndStop(1);
            clip.stopAllClips();
        }
    }
} 
```

所以它是递归的，并且可以从 MovieClip 本身调用：

```
myMovieClip.stopAllClips(); // Stop the clip and inner clips 
```

* * *

## 编辑

从 Flash Player 11.8 / AIR 3.8 开始，所有 DisplayObjectContainer 都有一个内置方法，称为[stopAllMovieClips](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#stopAllMovieClips())。

```
commonParent.stopAllMovieClips(); 
```

# matlab - 获得组成图的线段方程

> ID：14896659
> 
> 赞同：0
> 
> 时间：2013-02-15T14:17:14.850
> 
> 标签：matlab, linear-regression, piecewise

我有一个值数组，在绘制时会给出这个图表。

[http://imageshack.us/photo/my-images/15/schermatadel20130215150.png](http://imageshack.us/photo/my-images/15/schermatadel20130215150.png)

我需要获得组成它的段的方程，即将这个图细分为段（不完全是，而是接近实际值的段）并获得这些段的方程。我认为它被称为分段线性回归。

可以在matlab中实现吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:38:02.643

如果你想输入段数，你确实可以尝试[文件交换提供的解决方案](http://www.mathworks.com/matlabcentral/fileexchange/29387-brokenstickregression)

但是，如果您已经知道每个部分的开始和结束位置，那么您自己做起来并不难。

1.  拆分数据，使每个段包含一个向量
2.  获取每个段的方程
3.  结合你的结果

请注意，如果您使用此方法，您的段通常不会端到端连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:28:55.057

那并没那么简单。你可以在这里找到有用的东西：http: [//www.mathworks.com/matlabcentral/fileexchange/29387-brokenstickregression](http://www.mathworks.com/matlabcentral/fileexchange/29387-brokenstickregression)

# ios - 使用谷歌地图计算 x 和 y 距离，而不是两个地方之间的位移

> ID：14896662
> 
> 赞同：0
> 
> 时间：2013-02-15T14:17:18.827
> 
> 标签：ios, google-maps-api-3, maps

我需要使用谷歌地图 api 来计算两个地方之间的 x 和 y 距离，因为谷歌地图使用墨卡托投影。我不需要两个地方之间的距离，而是delta x（沿经线）和delta y（沿平行线）。如果有两个坐标为 (x1,y1) 和 (x2,y2) 的地方有 lat-longs (lat1,long1) 和 (lat2, long2)，我想计算 x2-x1 和 y2-y1，总和这两个的平方当然给出了两个地方之间的位移平方。google maps api可以直接返回笛卡尔坐标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:34:10.943

试试这个**haversine公式**来测量PHP中两个坐标之间的距离

```
function haversineGreatCircleDistance($latitudeFrom, $longitudeFrom, $latitudeTo, $longitudeTo, $earthRadius = 6371000)
{
  // convert from degrees to radians
  $latFrom = deg2rad($latitudeFrom);
  $lonFrom = deg2rad($longitudeFrom);
  $latTo = deg2rad($latitudeTo);
  $lonTo = deg2rad($longitudeTo);

  $latDelta = $latTo - $latFrom;
  $lonDelta = $lonTo - $lonFrom;

  $angle = 2 * asin(sqrt(pow(sin($latDelta / 2), 2) +
    cos($latFrom) * cos($latTo) * pow(sin($lonDelta / 2), 2)));
  return $angle * $earthRadius;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:56:32.740

有几种方法`GMSProjection`可以在坐标（经纬度）和点之间进行转换。

```
/** Maps an Earth coordinate to a content coordinate. */
- (CGPoint)pointForCoordinate:(CLLocationCoordinate2D)coordinate;

/** Maps a content coordinate to an Earth coordinate. */
- (CLLocationCoordinate2D)coordinateForPoint:(CGPoint)point; 
```

我认为没有获得点之间距离的方法，但您应该能够使用标准公式。[这是一个](http://blog.digitalagua.com/2008/06/30/calculate-distance-between-two-points-in-objective-c/)：

```
CGFloat DistanceBetweenTwoPoints(CGPoint point1,CGPoint point2)
{
    CGFloat dx = point2.x - point1.x;
    CGFloat dy = point2.y - point1.y;
    return sqrt(dx*dx + dy*dy );
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T16:37:00.653

在 WGS84 度中给出两点：

```
(lon1, lat1),
(lon2, lat2) 
```

要获得三角洲纬度：

```
dLat = lat2- lat1; 
```

longitide 也一样

```
dLon = lon2 - lon1; 
```

delta 结果现在以度为单位。

如果您希望结果以米为单位，则必须采用 x,y 中的投影坐标

```
deltaXMeter = x2 - x1;
deltayMeter = y2 - y1; 
```

当 x 和 y 是笛卡尔米坐标系中的坐标时。

# php - PHP：根据日期数组检查日期以获取最近的日期

> ID：14896669
> 
> 赞同：1
> 
> 时间：2013-02-15T14:17:50.577
> 
> 标签：php, arrays, date

我需要检查一个特定的日期是否已通过，如果已通过，则将根据日期数组检查哪个日期最接近。

我已经开始了，但是

编码：

```
<?php

    function getCurrDate ($c_id){   

// Fetch the course date    
$course_nxt_date = "2013-02-03";

// fetch current date
   $today = date("Y-m-d");

// Check if course date is in the future
if($course_nxt_date > $today){
    $course_date = $course_nxt_date;
    return $course_date;
}
// Check if course date is exactly today
elseif($course_nxt_date == $today){
    $course_date = $course_nxt_date;
    return $course_date;    
}
// Check if course date is passed
else{   

// Since course date is passed, get an array of future dates from database
$all_course_dates_query = @mysql_query("select * from pub_calendar_dates where course_id = '$c_id' order by course_date asc");

//Loop through the array
        $all_course_dates_arr = array();
        while ($all_course_dates_row = @mysql_fetch_assoc($all_course_dates_query)){
// assign each variable in the $all_course_dates_row to a new array $all_course_dates_arr
                  $all_course_dates_arr[] = $all_course_dates_row['course_date'];
        }

// This is where I became blank on what to do next and Im stucked...Need help from here

        return $course_date;        
}   

    }

?> 
```

更多细节：

如果 $course_nxt_date 已通过，则将针对同一课程、特定数据库表中某处的某些现有未来日期进行检查。在对照数组 $all_course_dates_arr[] 检查 $course_nxt_date 时，我需要获取最接近 $course_nxt_date 的日期

```
Example of dates that could be in the array - $all_course_dates_arr[]:

        $all_course_dates_arr[0] = "2013-01-25"; 
        $all_course_dates_arr[1] = "2013-04-08"; 
        $all_course_dates_arr[2] = "2013-06-13";
        $all_course_dates_arr[3] = "2013-08-03";
        $all_course_dates_arr[4] = "2013-02-17"; 
```

自从

```
$course_nxt_date = "2013-02-03"; 
```

该函数应输出最近的日期，如下所示：

```
echo getCurrDate(18);

Output - 2013-02-17 
```

我会很高兴得到这方面的帮助...谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:26:11.383

你最好在数据库中这样做：

```
SELECT DATEDIFF(curdate(), course_date) AS diff
...
WHERE course_date >= curdate()
ORDER BY diff ASC
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T14:24:05.923

您可以使用 strtotime 获取时间戳，然后遍历数组，同时跟踪最小的差异：

```
$date_check = strtotime("02-15-2013"); // Gives you a timestamp of the date

$difference       = NULL; // Holds the difference of the closest date
$difference_index = NULL; // Holds the index in the array

for($i = 0; $i < count($dates_arr); $i++) {
    $d = $dates_arr[$i]; // May need to convert $d into a timestamp if it isn't already

    $diff = abs($d - $date_check); // abs to get the absolute difference

    // If the difference is smaller than the absolute difference of the last date
    // we need to update our values here
    if($difference == NULL || $diff < $difference) {
        $difference = $diff;
        $difference_index = $i;
    }
}

print "The closest should be at index " . $difference_index; 
```

类似的东西 - 还没有时间测试它。只是在这里输入，但我相信逻辑是合理的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T14:31:21.423

如果使用 php5.3+，这可能是最简单的方法。

```
$days = getDifference("2013-02-03","2013-01-25");

function getDifference($date1, $date2){

    // Format for date variables is "YYYY-MM-DD"
    $objDate1 = new DateTime($date1);
    $objDate2 = new DateTime($date2);
    $interval = $objDate1->diff($objDate2);

    return $interval->days; //This would return the difference in number of days
} 
```

由于您不包括时间，因此您可以匹配的最短时间跨度是几天。因此，现在您可以发送 2 个变量并获取差异，并在循环中检查哪个变量的差异最短。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T14:26:40.217

我会在 sql 中进行检查，如下所示。这样做时请确保您的 sql 是安全的。

```
$result = @mysql_query("select TOP 1 * from pub_calendar_dates where course_id = '$c_id' AND course_date >= '$course_nxt_date' order by course_date asc"); 
```

所以这将返回一个结果，下一门课程的日期最接近给定日期。

希望这有帮助，祝你好运 ：）

# ios - 应用于 UIView 的实时文件管理器？

> ID：14896670
> 
> 赞同：0
> 
> 时间：2013-02-15T14:17:52.770
> 
> 标签：ios, uiview, filter, core-image

我正在尝试在名为 srcView 的 UIView 实例上添加过滤器视图。我正在做的事情如下：

```
//Generate the screenshot of srcView
UIGraphicsBeginImageContext(srcView.bounds.size);
[srcView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

NSData *imageData = UIImageJPEGRepresentation(image, 1); // convert to jpeg
image = [UIImage imageWithData:imageData];

//A custom filter effect applied on a image
imageView.image = [image boxblurImageWithBlur:kStyleBlur]; 
```

它工作正常。但是当设备旋转时，由于 srcView 会重新布局它的子视图，我正在做的是在设备旋转（`UIApplicationDidChangeStatusBarOrientationNotification`）之后重新生成 srcView 的屏幕截图，所以 imageView 似乎有点“跳跃”。有没有办法避免它“跳跃”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:04:32.540

你愿意实现动画吗？你可以试试：

```
CGAffineTransform transform = CGAffineTransformMakeRotation(3.14159/2);
imageView.transform = transform;

// Repositions and resizes the imageview.
CGRect contentRect = //the new rect
imageView.bounds = contentRect; 
```

# c - 为什么线程在linux中没有以正确的优先级运行

> ID：14896672
> 
> 赞同：1
> 
> 时间：2013-02-15T14:17:57.283
> 
> 标签：c, linux

我有以下代码，它改变了当前线程的优先级。我传递了 90 作为参数，但看起来线程正在以优先级 19 运行。我有：

*   检查 ulimit -r 是否设置为 99
*   进程以root身份运行

我怎么知道该进程以优先级 19 运行。我执行了以下命令。如您所见，pri 是 19。rtprio 和 pri 之间有什么区别？我正在使用来自 redhat Enterprise linux 6.3 版的 2.6 内核。因为，这不是实时 linux，所以`if(pthread_setschedparam(pthread_self(), SCHED_RR, &param))`当我将调度程序设置为时，这一行在代码中是否有效`SCHED_RR`

```
ps -p 10834 -o pid,tid,class,rtprio,ni,pri,psr,pcpu,stat

PID   TID CLS RTPRIO  NI PRI PSR %CPU STAT
10834 10834 TS       -   0  19   9 99.9 R+ 
```

```
void changePriority(int tPriority)
{
    int  policy;
    struct sched_param param;

    pthread_getschedparam(pthread_self(), &policy, &param);
    param.sched_priority = tPriority;
    if(pthread_setschedparam(pthread_self(), SCHED_RR, &param))
            err_sys("error while setting thread priority to %d", tPriority);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:01:21.987

引用`PRI`vs. `RTPRIO`，逐字逐句地来自`man ps`：

> 进程的 PRI 优先级。数字越大，优先级越低
> 
> ...
> 
> RTPRIO 实时优先级。

* * *

`PRI`可以使用`nice()`系统调用或`nice`命令行工具设置。`PRI`是进程的主线程的优先级。对于 Linux，这还设置了进程的非实时线程的优先级*。

来自`man 1 nice`：

> Nicenesses 范围从 -20（最有利的调度）到 19（最不利的调度）。

`Niceness`并且`PRI`是同义词。

**实时线程是具有不同于 和 的调度策略的线程，`SCHED_OTHER`因为有：和。`SCHED_BATCH``SCHED_IDLE``SCHED_FIFO``SCHED_RR`*

* * *

`RTPRIO`调度策略可以通过OP中提到的功能进行设置。

调度策略保证提供至少 32 个不同的级别。使用`sched_get_priority_min`和`sched_get_priority_max`确定实施范围。

# android - 通过 TCP/IP 将 NMEA 发送到 Android 设备

> ID：14896674
> 
> 赞同：0
> 
> 时间：2013-02-15T14:18:07.917
> 
> 标签：android

我有没有集成 GPS 模块的 Android 设备。我还有外部 GPS，它可以通过 TCP/IP 向我发送 NMEA 消息。我想在此 Android 设备上使用定位服务，例如用于 Navionics。问题 - 如何将收到的 NMEA 消息传递给此应用程序？所以模拟 GPS 设备，但通过网络。Android 可以通过蓝牙连接 GPS，所以我希望我可以编写一个应用程序来与网络数据进行相同的思考。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:35:04.823

此类应用程序使用 Mock Location Provider，我认为无法创建虚拟蓝牙 GPS。[检查这个应用程序。](https://play.google.com/store/apps/details?id=com.rbc.gpsbridge&hl=ru)

# jsf - FacesContext 仅第一次丢失其上下文值

> ID：14896676
> 
> 赞同：0
> 
> 时间：2013-02-15T14:18:17.580
> 
> 标签：jsf, facelets, jsf-1.2

我有一个 Facelets 页面和一个`h:commandLink`.

```
<h:commandLink value="#{View} &#187;" 
    onclick="return myJavaScript('#{myBean.param1}');">
</h:commandLink>

function myJavaScript(paramReceived)
{
   var relPath = "/myWarName/Pages/myReceiptPage.jsf?"
                    + myActionValue;
    billWindow = window.open(relPath, '', 'width=' + width + ',height='
                    + height + ',top=' + top + ',left=' + left
                    + ',scrollbars=1,resizable=1');
    billWindow.focus();
} 
```

下面是我的`myReceiptPage.xhtml`页面代码，

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<div xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core">
    <head>
    </head>
      <f:view>
          <body>
             <h:form>
               <ui:insert>
                           <ui:include src="/someOtherPage.xhtml" />
               </ui:insert>

                <h:outputText value="#{facesContext.externalContext.requestParameterMap.UserID}" /> 

                          </h:form>
                     <body>
             </f:view>
      <div> 
```

当我单击时，Java Script 被调用并打开一个窗口，但**只有第一次出现**`h:commandLink`下面的异常。从第二次开始，当我再次单击 时，窗口将打开，没有异常，并且数据已正确填充。**`h:commandLink`**

 **当我单击`h:commandLink`PhaseListener 被调用时，它正在调用一种方法。下面是代码，

```
public void getUserId()
    {
        try
        {
            FacesContext context = FacesContext.getCurrentInstance(); 
            ExternalContext externalContext = context.getExternalContext();
                    //Code continues
        }
            Catch(Exception E)
            {
              //Am getting to know the exception here
             }
      } 
```

下面是例外（显示在窗口上），

```
javax.faces.FacesException: javax.el.ELException: /view.xhtml @192,150 userID="#{myBean.userID}": Error reading 'userID' on type com.myBean
        at javax.faces.component.UIOutput.getValue(UIOutput.java:187)
        at org.richfaces.component.UITabPanel.getValue(UITabPanel.java:103)
        at org.richfaces.renderkit.TabPanelRendererBase.encodeTabs(TabPanelRendererBase.java:309)
        at org.richfaces.renderkit.html.TabPanelRenderer.doEncodeBegin(TabPanelRenderer.java:228)
        at org.richfaces.renderkit.html.TabPanelRenderer.doEncodeBegin(TabPanelRenderer.java:180)
        at org.ajax4jsf.renderkit.RendererBase.encodeBegin(RendererBase.java:100)
        at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:813)
        at javax.faces.component.UIComponent.encodeAll(UIComponent.java:928)
        at javax.faces.render.Renderer.encodeChildren(Renderer.java:148)
        at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:837)
        at javax.faces.component.UIComponent.encodeAll(UIComponent.java:930)
        at javax.faces.component.UIComponent.encodeAll(UIComponent.java:933)
        at com.sun.facelets.FaceletViewHandler.renderView(FaceletViewHandler.java:592)
        at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:189)
        at org.jboss.portletbridge.application.PortletViewHandler.renderView(PortletViewHandler.java:247)
        at org.ajax4jsf.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:100) 
```

这可能是什么原因？

**编辑**： 的内容`view.xhtml`粘贴在下面。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:t="http://myfaces.apache.org/tomahawk">
<head>
</head>
<h:form id="myFormId">
<ui:insert>
    <ui:include src="/myWarName/Pages/someOtherPage.xhtml" />  //Guess, problem is with this include. 
//This include is also there in myReceiptPage.xhtml page.
</ui:insert>

<rich:tabPanel selectedTab="#{myBean.getSelectedTab}">
    <rich:tab name="Tab Name">
        <h:panelGroup>
            <ui:insert>
               <ui:include src="somePage1.xhtml" />
            </ui:insert>
        </h:panelGroup>
        <h:panelGroup>
            <ui:insert>
                <ui:include src="somePage2.xhtml" />
            </ui:insert>
        </h:panelGroup>
</rich:tab>
</h:form
</html> 
```

**要添加到例外列表**：`<rich:tabPanel selectedTab="#{someBean.getSelectedTab}">`

`getSelectedTab`上面的方法看起来像这样，

```
public class myBean implements Serializable{
 public String getSelectedSubTab()
 {
   FacesContext con=FacesContext.getCurrentInstance();  
   ExternalContext externalContext = con.getExternalContext();
   String remoteUserId = externalContext.getRemoteUser();
   User user = UserServiceUtil.getUserById(Long.parseLong(remoteUserId));
   this.userID = user.getScreenName();          
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:57:35.053

我必须说我仍然没有`#{myBean.userID}`在任何 xhtml 文件中看到表达式，但问题可能是因为你的 getter 方法`getUserId()`被声明为`void`，所以`userId`这里的属性被认为是不可读的。您必须从 getter 返回属性。**

# iphone - 导致多个图像的矛盾代码

> ID：14896677
> 
> 赞同：-1
> 
> 时间：2013-02-15T14:18:32.310
> 
> 标签：iphone, ios, image, image-resizing

我有一些代码可以让我放大然后缩小到正常大小的图片，但是如果我点击图片太多次，它会创建该图片的大版本或之前视图中的图片，它无法被调整大小。我不确定，但我认为这两条代码的 addSubview 语句之间可能存在矛盾或某些东西。这是`ImageEnlarge`.

```
@implementation ImageEnlarge

-(UIImageView *)internal{
return internal;
}

-(id)initWithFrame:(CGRect)frame{

    self = [super initWithFrame:frame];
      if (self) {
    internal = [[UIImageView alloc] initWithFrame:self.bounds];
    [internal setBackgroundColor:[UIColor blackColor]];
    [internal setContentMode:UIViewContentModeScaleToFill];
    [self addSubview:(internal)];
    }
   return self;
}

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)touch {

   if (isLarge) [self makeSmall];
   else [self makeFull];
}

-(void) makeFull {

  [[self superview] bringSubviewToFront:self];
  isLarge = YES;    
  CGSize largePicSize = CGSizeMake(156, 156);
  CGPoint largePicOrigin = CGPointMake(110, 96);
  CGRect largeFrame;
  largeFrame.size = largePicSize;
  largeFrame.origin = largePicOrigin;
  [UIView beginAnimations:nil context:NULL];
  [UIView setAnimationDuration:0.8];
  [internal setFrame:self.bounds];
  [self setFrame:largeFrame];
  [UIView commitAnimations];
}

-(void) makeSmall {

  isLarge = NO;    
  CGSize normPicSize = CGSizeMake(100, 100);
  CGPoint normPicOrigin = CGPointMake(82, 74);
  CGRect original;
  original.size = normPicSize;
  original.origin = normPicOrigin;
  [UIView beginAnimations:nil context:NULL];
  [UIView setAnimationDuration:0.8];
  [internal setFrame:self.bounds];
  [self setFrame:original];
  [UIView commitAnimations];

}

@end 
```

这是我的图像上的实现。

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSData *albumArtImageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.churchwebserver.org/imagename.jpg"]];

    dispatch_async(dispatch_get_main_queue(), ^{
        UIImage *albumArt = [UIImage imageWithData:albumArtImageData];
        CGSize picSize = CGSizeMake(100, 100);
        CGPoint picOrigin = CGPointMake(110, 96);
        CGRect picFrame;
        picFrame.size = picSize;
        picFrame.origin = picOrigin;
        ImageEnlarge * imEn =[[ImageEnlarge alloc]initWithFrame:picFrame];
        [[imEn internal]setImage:albumArt];
        [self.view addSubview:(imEn)]; 
```

问题还在于为什么图像最初需要两次触摸才能响应，然后每次触摸都会起作用，为什么我可以在靠近图像的地方触摸并且仍然感觉到我正在触摸实际图像？这么多的问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-15T15:00:29.687

它正在围绕图像进行触摸，因为图像可能具有黑色边框。你检查了吗？

# bash - 如何将两行之间的内容变成单行？

> ID：14896678
> 
> 赞同：-1
> 
> 时间：2013-02-15T14:18:34.823
> 
> 标签：bash

我有与此模式匹配的文本文件：

```
### EVENT ###
param1=value1;
param2=value2;
### END EVENT ###
### EVENT ###
param3=value3;
param4=value4;
...
### END EVENT #### 
```

我的问题是如何遍历整个文件，并且任何时候 EVENT 和 END EVENT 行之间有多行将它们变成单行？文件中的某些行已经是一种行格式，但无法弄清楚如何正确解析它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:28:20.800

Perl 解决方案：

```
perl -pe '/^### (?:END )?EVENT ###$/ or chomp;/### END EVENT ###/ and s/^/\n/' 
```

# qt - QML 是否需要 libQtDeclarative？

> ID：14896684
> 
> 赞同：1
> 
> 时间：2013-02-15T14:18:55.007
> 
> 标签：qt, qt4, qml, qtdeclarative

我不确定 QML 是否需要 libQtDeclarative.a。是吗？如果不是，它究竟是为了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:31:00.047

显然是的。从[文档](http://doc.qt.digia.com/stable/qmlruntime.html)中：

> QML 文档由 QML 运行时加载和执行。这包括声明式 UI 引擎以及内置的 QML 元素和插件模块，它还提供对第三方 QML 元素和模块的访问。
> 
> 使用 QML 的应用程序需要调用 QML 运行时才能执行 QML 文档。这可以通过创建 QDeclarativeView 或 QDeclarativeEngine 来完成，如下所述。此外，Declarative UI 包还包括 Qt QML Viewer 工具，它可以加载 .qml 文件。该工具可用于开发和测试 QML 代码，而无需编写 C++ 应用程序来加载 QML 运行时。

在我的 Qt 构建（Windows）上，使用 Dependency Walker，您可以看到`QDeclarativeView`和`QDeclarativeEngine`（和其他）在这个库中定义。

可以在[此处](http://doc.qt.digia.com/stable/qtdeclarative.html)找到有关此模块的更多信息。

# c++ - 在 Win7 64 位上因未处理的第一次机会异常而崩溃（在 XP 32 位、Linux 64 位上没有问题）

> ID：14896688
> 
> 赞同：1
> 
> 时间：2013-02-15T14:18:58.163
> 
> 标签：c++, visual-studio-2010, opengl, 64-bit, first-chance-exception

我在 Visual Studio Express 2010 下用 C++ 编写 OpenGL 程序时遇到了一个奇怪的问题。
我使用：Windows 7 64bit，OpenGl 4.x
我的伙伴使用：Windows XP 32bit，Visual Studio Express 2010，OpenGl 2.x

到目前为止，我们只是为我们的模型绘制了顶点，并且它在两个系统上都可以正常工作（我知道，我知道：已弃用，但我们仍然是初学者）。现在他包含了一个库来导入 3d 网格并制作动画。对他来说一切正常，但我明白了

> Ant Simulation.exe 中 0x0055f838 处的第一次机会异常：0xC0000005：访问冲突读取位置 0x00bb0000。
> Ant Simulation.exe 中 0x0055f838 处未处理的异常：0xC0000005：访问冲突读取位置 0x00bb0000。

使用调试器，我将问题追溯到该行

> glDrawArrays(GL_QUADS,0,n_data);

我试图**捕捉**代码，但没有触发任何东西。很奇怪，昨天我可以用调试器在这条线上重复 2-3 次，直到它崩溃，今天它直接崩溃了。我昨天检查了**n_data**每次都是一样的。如果我在 Windows 中执行 *.exe，它会崩溃（下面的错误代码）。当我的伙伴向我发送他的 *.exe 时，它​​通常不起作用，但我可以启动它 1 次。我在其他窗口上重现了该错误。我们在 Linux 64bit 上试过，没有问题。我尝试在兼容模式下运行它，但问题仍然存在（仍然崩溃）。

我四处搜索，发现：
[https ://blogs.msdn.com/b/debugger/archive/2010/05/12/visual-studio-debugger-fails-to-catch-unhandled-exception-for-a-windows -form-or-wpf-application.aspx?Redirected=true](https://blogs.msdn.com/b/debugger/archive/2010/05/12/visual-studio-debugger-fails-to-catch-unhandled-exception-for-a-windows-form-or-wpf-application.aspx?Redirected=true)

不确定我是否理解正确。有一个我无法捕获但会杀死应用程序的异常 - 但为什么其他系统没有出现此异常的问题？

我试图按照链接中描述的方式解决它，但似乎在 VS Express 中我没有抛出第一次机会异常的菜单。我会尝试获得 VS 2012，但我还是想知道：这是一个完全 Windows 的东西，还是我的代码有问题导致崩溃（如链接中的评论之一所建议）？我也非常感谢解释实际发生的事情......

运行 *.exe 时出现的错误：

> 问题事件名称：APPCRASH
> 
> 应用程序名称：Ant Simulation.exe
> 应用程序版本：0.0.0.0
> 
> 应用程序时间戳：511d99a3
> 
> 故障模块名称：StackHash_0a9e
> 
> 故障模块版本：0.0.0.0
> 故障模块时间戳：00000000
> 
> 异常代码：c0000005
> 
> 异常偏移量：0037f278
> 
> 操作系统版本： 6.1.7601.2.1.0.256.48
> 
> 区域设置 ID：1031
> 
> 附加信息 1：0a9e
> 
> 附加信息 2：0a9e372d3b4ad19135b953a78882e789
> 
> 附加信息 3：0a9e
> 
> 附加信息 4：0a9e372d3b4ad19135b953a78882e789

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T14:51:37.737

Windows 中的“第一次机会异常”不是 C++ 异常，它意味着运行时系统检测到程序的非法行为，例如取消引用无效指针。事实上，“访问冲突读取位置 0x00bb0000”非常表明这就是正在发生的事情。

取消引用无效指针不一定会在不同系统上或什至在同一台机器上的不同运行上导致相同的行为：有关更多信息，请参阅[Windows 中的 C 代码崩溃等问题，但在 Linux中则不然。](https://stackoverflow.com/questions/11803784/c-code-crashes-in-windows-but-not-in-linux)在这种情况下，错误似乎发生在 GL 实现内部，但这可能是由于早期的应用程序代码提供了错误信息造成的。

检查所有启用的顶点数组是否至少有`n_data`元素。（要特别小心，确保它们不只有`n_data - 1`元素，并且`n_data`保持您期望的值。）您还应该检查您之前传递给 GL 函数的任何指针是否有效。还有更多的 GL 状态需要检查，但这是我的第一个猜测。

# asp.net-mvc-3 - MVC 单元测试中的“自动重定向太多”错误

> ID：14896689
> 
> 赞同：0
> 
> 时间：2013-02-15T14:18:59.843
> 
> 标签：asp.net-mvc-3, unit-testing

这个简单生成的单元测试调用了一个控制器

```
 [TestMethod()]
    [HostType("ASP.NET")]
    [AspNetDevelopmentServerHost("E:\\Backup\\Proyecto", "/Proyecto")]
    [UrlToTest("http://localhost:40053/Proyecto/")]
    public void BatchUpdateTest()
    {
        FacturaController target = new FacturaController(); // TODO: Initialize to an appropriate value
        Factura Factura = null; // TODO: Initialize to an appropriate value
        JsonResult expected = null; // TODO: Initialize to an appropriate value
        JsonResult actual;
        actual = target.BatchUpdate(Factura);
        Assert.AreEqual(expected, actual);
        Assert.Inconclusive("Verify the correctness of this test method.");
    } 
```

但给我这个错误：

> “无法连接到页面 'localhost:40053/Proyecto' 的 Web 服务器。尝试了太多自动重定向。请检查 Web 服务器是否正在运行并且在网络上可见，以及指定的页面是否存在。”

我可以使用 Visual Studio 的浏览器连接到集成的 Web 服务器

与此相关但无法帮助我：[在 .NET 中使用 httpWebRequest 时出现“尝试了太多自动重定向”错误消息](https://stackoverflow.com/questions/518181/too-many-automatic-redirections-were-attempted-error-message-when-using-a-http)。

我应该以某种方式保存cookie吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:12:32.993

刚刚在 TestMethod 声明之后删除了修改器并且它起作用了：

```
[TestMethod()]
public void BatchUpdateTest()
{
...
} 
```

# java - 带有可选键的Web服务，带有骆驼的值映射？

> ID：14896690
> 
> 赞同：0
> 
> 时间：2013-02-15T14:19:13.720
> 
> 标签：java, web-services, map, apache-camel

拥有 WSDL：

```
<definitions targetNamespace="http://MyWebService/" name="MyWebService">
    <types>
        <xsd:schema>
            <xsd:import namespace="http://MyWebService/" schemaLocation="http://localhost:8081/MyWebService?xsd=1"/>
        </xsd:schema>
    </types>
    <message name="doIt">
        <part name="Word" type="xsd:string"/>
        <part name="SomeParameters" type="tns:MapWrapper"/>
    </message>
    <message name="doItResponse">
        <part name="return" type="xsd:string"/>
    </message>
    <portType name="MyWebService">
        <operation name="doIt" parameterOrder="Word SomeParameters">
            <input message="tns:doIt"/>
            <output message="tns:doItResponse"/>
        </operation>
    </portType>
...
</definitions> 
```

和相关的xsd：

```
<xs:schema version="1.0" targetNamespace="http://MyWebService/">
    <xs:complexType name="MapWrapper">
        <xs:sequence>
            <xs:element name="map">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="entry" minOccurs="0" maxOccurs="unbounded">
                            <xs:complexType>
                                <xs:sequence>
                                    <xs:element name="key" minOccurs="0" type="xs:string"/>
                                    <xs:element name="value" minOccurs="0" type="xs:string"/>
                                </xs:sequence>
                            </xs:complexType>
                        </xs:element>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:schema> 
```

发布此 WebService 以获取 WS 的输入参数以使用的最佳/最简单的方法是什么。路线应如下所示：(1) WS -> (2) InputParameters -> (3) inputParameters 的一些处理步骤 -> (4) 取决于 (2) 中的参数。

我试图从 camel-example-cxf 获取知识；但是有很多东西混合在一起，很难理解 imo。

一些 Java DSL 代码片段会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:58:16.930

最简单的方法是使用`Spring`. 例如：如果您要创建自定义 bean 并希望在将消息路由到实际端点之前修改您的消息，您可以执行以下操作：

```
public class CustomProcessor {

    public void processDoIt(Exchange exchange) {
        DoIt smth = exchange.getIn().getBody(DoIt.class); //Your message's body              
    }

} 
```

和使用 Spring 的骆驼路线：

```
<bean id="processor" class="your.custom.CustomProcessor"/>

<camel:camelContext trace="true" id="camelContext" >

    <camel:route id="camelRoute">
        <camel:from uri="cxf:bean:yourWebServiceListenerEndpoint?dataFormat=POJO&amp;synchronous=true" />
        <camel:choice>
            <camel:when>
                <camel:simple>${headers.operationName} == 'doIt'</camel:simple>
                <camel:bean ref="processor" method="processDoIt"/>
            </camel:when>
        </camel:choice>
        <camel:to uri="cxf:bean:yourWebServiceTargetEndpoint"/>
    </camel:route>

</camel:camelContext> 
```

根据操作名称骆驼将消息路由到相应的处理器。您也可以将您的消息路由到其他地方。它是由你决定。这只是一个如何完成的例子。

**也可以看看：**

*   [使用 Spring 配置 CamelContext](http://camel.apache.org/spring.html)
*   [骆驼CXF组件](http://camel.apache.org/cxf.html)

# java - 在 .bat 文件中设置 java 路径

> ID：14896697
> 
> 赞同：0
> 
> 时间：2013-02-15T14:19:42.253
> 
> 标签：java, windows-8, environment-variables

在 Windows 8 上，我有一个包含以下内容的 bat 文件：

```
@echo off
echo Setting JAVA_HOME
set JAVA_HOME=C:\Program Files\Java\jdk1.6.0_39
echo setting PATH
set PATH=C:\Program Files\Java\jdk1.6.0_39\bin;%PATH%
echo Display java version
java -version 
```

我试图用它来切换java版本。当我运行 .bat 文件时，它将版本输出为 1.6.0_39，但实际上并没有切换版本。相反，每次我想使用不同的版本时，我都必须手动更改路径变量。我设置路径的方式有问题吗？当我在运行它之后查看路径环境变量时，它看起来并没有改变，你会认为它会相当明显......

当前版本：

```
@echo off
echo Setting JAVA_HOME
setx JAVA_HOME "C:\Program Files\Java\jdk1.7.0_09"
echo Display java version
java -version 
```

与 %JAVA_HOME%\bin; 在我的路径变量的前面。似乎没有在看 %JAVA_HOME%

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:21:24.847

该语句仅为*当前进程*`SET`设置环境变量。

 *设置环境变量的全局（默认）值，使用`setx`.

请注意，甚至`setx`不会影响现有进程，因此您只会在新的命令提示符窗口中注意到更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:30:17.310

通常不支持 SETX。您还可以更改注册表设置。看[>>这篇文章](https://superuser.com/questions/135056/set-permanent-environmental-variable-in-windows-xp)*

# c++ - C++程序中浮点溢出的诊断

> ID：14896699
> 
> 赞同：16
> 
> 时间：2013-02-15T14:19:56.397
> 
> 标签：c++, floating-point, double, overflow, numeric

`double`我有一种情况，其中一些数值结果（涉及使用和的浮点运算`float`）对于大输入大小变得不正确，但对于小输入则不正确。

一般来说，我想知道哪些工具可用于诊断诸如数值溢出和有问题的精度损失等情况。

换句话说：是否有**工具**抱怨溢出等问题，就像 valgrind 抱怨内存错误一样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T14:49:27.507

如果启用浮点异常，则 FPU 可以在溢出时抛出异常。具体如何工作取决于操作系统。例如：

*   在 Windows 上，您可以使用[_control87](http://msdn.microsoft.com/en-us/library/e9b52ceh%28VS.80%29.aspx)取消屏蔽 _EM_OVERFLOW 以便在溢出时获得 C++ 异常。
*   在 Linux 上，您可以使用[feenableexcept](http://linux.die.net/man/3/feenableexcept)在 FE_OVERFLOW 上启用异常，以便在溢出时获得[SIGFPE](http://linux.die.net/man/7/signal)。例如，要启用所有例外，请调用`feenableexcept(FE_ALL_EXCEPT)`您的`main`. 要启用溢出并除以零，请调用`feenableexcept(FE_OVERFLOW | FE_DIVBYZERO)`.

请注意，在所有情况下，第三方代码都可能会禁用您已启用的异常；这在实践中可能很少见。

这可能不如 Valgrind 好，因为它更像是一个调试器和手动检查，而不是一个很好的总结，但它确实有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T14:59:53.927

要诊断溢出，您可以使用浮点异常。参见例如[cppreference](http://en.cppreference.com/w/cpp/numeric/fenv/FE_exceptions)。请注意，您可能需要使用特定于实现的函数来配置浮点错误的行为。

请注意，即使它们通常被称为“异常”，浮点错误也不会导致 C++ 异常。

cppreference 代码显示了基于 IEEE 754 的实现的默认行为：您可以在发现合适时检查浮点异常标志。您应该在输入计算之前清除这些标志。您可能希望等到计算完成后再查看它是否设置了任何标志，或者您可能希望检查您怀疑容易出错的每一个操作。

可能存在特定于实现的扩展，以使此类“异常”触发您无法忽略的事情。在可能是“结构化异常”（不是真正的 C++ 异常）的 Windows/MSVC++ 上，在可能是 SIGFPE 的 Linux 上（因此您需要一个信号处理程序来处理错误）。您将需要特定于实现的库函数甚至编译器/链接器标志来启用这种行为。

我仍然认为溢出不太可能是你的问题。如果您的某些输入变大而其他值仍然很小，则在组合它们时可能会丢失精度。一种控制方法是使用区间算术。有各种各样的库，包括[boost interval](http://www.boost.org/doc/libs/1_53_0/libs/numeric/interval/doc/interval.htm)。

免责声明：我没有使用这个库（也没有其他区间算术库）的经验，但也许这可以让你开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T16:50:32.690

也许您需要调试一个您可能犯了编码错误并想要跟踪正在执行的浮点计算的算法的实现。也许您需要一个钩子来检查所有正在操作的值，寻找似乎超出您预期范围的值。在 C++ 中，您可以定义自己的`floating point`类并使用运算符重载以自然方式编写计算，同时保留检查所有计算的能力。

例如，这里有一个程序，它定义了一个`FP`类，并打印出所有的加法和乘法。

```
#include <iostream>
struct FP {
    double value;
    FP( double value ) : value(value) {}
};
std::ostream & operator<< ( std::ostream &o, const FP &x ) { o << x.value; return o; }
FP operator+( const FP & lhs, const FP & rhs ) {
    FP sum( lhs.value + rhs.value );
    std::cout << "lhs=" << lhs.value << " rhs=" << rhs.value << " sum=" << sum << std::endl;
    return sum;
}
FP operator*( const FP & lhs, const FP & rhs ) {
    FP product( lhs.value * rhs.value );
    std::cout << "lhs=" << lhs.value << " rhs=" << rhs.value << " product=" << product << std::endl;
    return product;
}

int main() {
    FP x = 2.0;
    FP y = 3.0;
    std::cout << "answer=" << x + 2 * y << std::endl;
    return 0;
} 
```

哪个打印

```
lhs=2 rhs=3 product=6
lhs=2 rhs=6 sum=8
answer=8 
```

**更新：**我已经增强了程序（在 x86 上）以在每次浮点运算后显示浮点状态标志（只实现了加法和乘法，其他可以很容易地添加）。

```
#include <iostream>

struct MXCSR {
    unsigned value;
    enum Flags {
        IE  = 0, // Invalid Operation Flag
        DE  = 1, // Denormal Flag
        ZE  = 2, // Divide By Zero Flag
        OE  = 3, // Overflow Flag
        UE  = 4, // Underflow Flag
        PE  = 5, // Precision Flag
    };
};
std::ostream & operator<< ( std::ostream &o, const MXCSR &x ) {
    if (x.value & (1<<MXCSR::IE)) o << " Invalid";
    if (x.value & (1<<MXCSR::DE)) o << " Denormal";
    if (x.value & (1<<MXCSR::ZE)) o << " Divide-by-Zero";
    if (x.value & (1<<MXCSR::OE)) o << " Overflow";
    if (x.value & (1<<MXCSR::UE)) o << " Underflow";
    if (x.value & (1<<MXCSR::PE)) o << " Precision";
    return o;
}

struct FP {
    double value;
    FP( double value ) : value(value) {}
};
std::ostream & operator<< ( std::ostream &o, const FP &x ) { o << x.value; return o; }
FP operator+( const FP & lhs, const FP & rhs ) {
    FP sum( lhs.value );
    MXCSR mxcsr, new_mxcsr;
    asm ( "movsd %0, %%xmm0 \n\t"
          "addsd %3, %%xmm0 \n\t"
          "movsd %%xmm0, %0 \n\t"
          "stmxcsr %1 \n\t"
          "stmxcsr %2 \n\t"
          "andl  $0xffffffc0,%2 \n\t"
          "ldmxcsr %2 \n\t"
          : "=m" (sum.value), "=m" (mxcsr.value), "=m" (new_mxcsr.value)
          : "m" (rhs.value)
          : "xmm0", "cc" );

    std::cout << "lhs=" << lhs.value
              << " rhs=" << rhs.value
              << " sum=" << sum
              << mxcsr
              << std::endl;
    return sum;
}
FP operator*( const FP & lhs, const FP & rhs ) {
    FP product( lhs.value );
    MXCSR mxcsr, new_mxcsr;
    asm ( "movsd %0, %%xmm0 \n\t"
          "mulsd %3, %%xmm0 \n\t"
          "movsd %%xmm0, %0 \n\t"
          "stmxcsr %1 \n\t"
          "stmxcsr %2 \n\t"
          "andl  $0xffffffc0,%2 \n\t"
          "ldmxcsr %2 \n\t"
          : "=m" (product.value), "=m" (mxcsr.value), "=m" (new_mxcsr.value)
          : "m" (rhs.value)
          : "xmm0", "cc" );

    std::cout << "lhs=" << lhs.value
              << " rhs=" << rhs.value
              << " product=" << product
              << mxcsr
              << std::endl;
    return product;
}

int main() {
    FP x = 2.0;
    FP y = 3.9;
    std::cout << "answer=" << x + 2.1 * y << std::endl;
    std::cout << "answer=" << x + 2 * x << std::endl;
    FP z = 1;
    for( int i=0; i<310; ++i) {
        std::cout << "i=" << i << " z=" << z << std::endl;
        z = 10 * z;
    }

    return 0;
} 
```

最后一个循环将一个数字乘以`10`足够的次数以显示发生溢出。您会注意到精度错误也会发生。一旦溢出，它就会以无穷大的值结束。

这是输出的尾部

```
lhs=10 rhs=1e+305 product=1e+306 Precision
i=306 z=1e+306
lhs=10 rhs=1e+306 product=1e+307
i=307 z=1e+307
lhs=10 rhs=1e+307 product=1e+308 Precision
i=308 z=1e+308
lhs=10 rhs=1e+308 product=inf Overflow Precision
i=309 z=inf
lhs=10 rhs=inf product=inf 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T19:09:36.130

除了已经发布的优秀建议之外，这里还有另一种方法。编写一个函数来检查您的浮点数据结构，进行范围和一致性检查。在主循环中插入对它的调用。为了检查其他变量，您可以在检查器发现问题后在检查器中设置断点。

与启用异常相比，这需要更多的设置工作，但可以发现更微妙的问题，例如不一致和比预期更大的数字，而不是无限的，从而导致检测接近原始问题。

# windows-phone-8 - 辅助磁贴导航 wp8 中的启动画面

> ID：14896701
> 
> 赞同：0
> 
> 时间：2013-02-15T14:20:12.490
> 
> 标签：windows-phone-8, windows-phone, windows-phone-8-emulator

从辅助磁贴导航时是否需要显示启动画面？因为应用程序正在使用新实例打开。注意：在 Windows 手机认证要求中，它指出“当应用仍在尝试加载时，该应用可能会在 XAP 包的根目录中名为 SplashScreenImage.jpg 的文件中提供启动屏幕图像”。

[Windows Phone 的技术要求](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184840%28v=vs.105%29.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:56:45.337

认证要求不要求您手动显示启动图像。您提到的启动图像 SplashScreenImage.jpg 由操作系统自动显示，您无需担心手动处理。

# sql - 尝试在 SQL 中从另一个表更新一个表 - 返回“多个值”错误

> ID：14896704
> 
> 赞同：3
> 
> 时间：2013-02-15T14:20:17.813
> 
> 标签：sql, sql-server-2008

我知道这看起来像是重复的，但我一直在处理看起来相似的问题，但我仍然无法克服这个错误。

我不明白为什么这个 SQL UPDATE 查询返回“子查询返回超过 1 个值”错误。

```
UPDATE ph
SET ph.manufacturerPartNumber = t.DocID
FROM #tmp t
INNER JOIN PartHeader ph ON ph.partID = t.partID 
```

涉及的数据如下。

```
SELECT t.partID,t.DocID,ph.partID,ph.manufacturerPartNumber
FROM #tmp t
INNER JOIN PartHeader ph ON ph.partID = t.partID 
```

![在此处输入图像描述](../Images/b5969e49218f321dcda14e53add1438d.png)

我不明白“超过 1 个值”的来源。来自 t 的每个 partID 在 ph 中恰好有 1 个 partID。

我也尝试了以下相同的错误。

```
UPDATE PartHeader
SET PartHeader.manufacturerPartNumber = (SELECT t.DocID
FROM #tmp t
INNER JOIN PartHeader ph ON ph.partID = t.partID) 
```

我确定我错过了一些简单的东西，但我肯定错过了它。

谢谢你的帮助，丹

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T14:51:48.053

由于您确定您编写的 SQL 没有问题，我想建议您可能在表上有一个 ON UPDATE/AFTER UPDATE 触发器，该触发器不是为了处理一次更新的多行而编写的。

这可以通过禁用任何与更新相关的触发器并尝试再次运行更新来快速验证。

编辑：

如果您在测试时禁用了触发器，请确保稍后重新启用它。您不能保证更新只会影响一行，因此您需要修复触发器 - 假设您希望触发器的任何进程（也许是审计？）继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:23:00.230

我不明白为什么你的结果不起作用。如果您的 Temp 表为每个 PartId 返回多个 DocId，您的第二个查询可能会产生您上面列出的错误。但是，您的第一个查询应该可以工作。

看到这个小提琴：[http ://sqlfiddle.com/#!3/9d34b/1](http://sqlfiddle.com/#!3/9d34b/1)

SQL Server 只会跳过重复的记录并进行相应的更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T14:32:10.300

您在下面使用的查询返回不止一行。

```
SELECT t.partID,t.DocID,ph.partID,ph.manufacturerPartNumber
FROM #tmp t
INNER JOIN PartHeader ph ON ph.partID = t.partID 
```

所以当你尝试这样做时

```
UPDATE ph
SET ph.manufacturerPartNumber = t.DocID
FROM #tmp t
INNER JOIN PartHeader ph ON ph.partID = t.partID 
```

您没有单个 t.DocID，因为#tmp 返回了多行。因此，请确保`=`更新中的 RHS 仅返回一个值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T14:46:57.103

如果您确信子查询不包含重复行，请尝试更改：

```
UPDATE PartHeader
SET PartHeader.manufacturerPartNumber = (SELECT t.DocID
FROM #tmp t
INNER JOIN PartHeader ph ON ph.partID = t.partID) 
```

对此：

```
UPDATE PartHeader
SET PartHeader.manufacturerPartNumber = (SELECT max(t.DocID)
FROM #tmp t
INNER JOIN PartHeader ph ON ph.partID = t.partID) 
```

但是，如果这是我的问题，我会更多地查询我的临时表，而不是简单地假设我比软件更聪明。

# xml - 无法在 Wordpress 帖子中显示 XML

> ID：14896707
> 
> 赞同：7
> 
> 时间：2013-02-15T14:20:31.083
> 
> 标签：xml, wordpress, post, blogs

如果你想在 WordPress 文章中显示一个 XML 片段 - 你是怎么做的？

假设你想显示这个：

```
<家庭>
    <dad>随便</dad>
    <妈妈>随便</妈妈>
</家庭>

```

使用`[sourcecode language="xml"]`没有帮助，因为它破坏了 XML。此外，我相信，插件不能与免费版本的 WordPress（即 wordpress.com）一起使用 - 所以，这可能不是一个选择。

使用 HTML`<pre>`标记有效，但不能提供正确的外观和感觉。谁能告诉我他们是怎么做到的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T14:31:28.037

wordpress codex 有一整页关于在您的帖子中编写代码。

[http://codex.wordpress.org/Writing_Code_in_Your_Posts](http://codex.wordpress.org/Writing_Code_in_Your_Posts)

他们的建议是在`<pre>`or`<code>`标记中使用 html 实体代码

```
&lt;family&gt;
    &lt;dad&gt;whatever&lt;/dad&gt;
    &lt;mom&gt;whatever&lt;/mom&gt;
&lt;/family&gt; 
```

如果您的帖子中有很多代码要显示，这可能会很乏味。我建议编写一个可以为您执行此操作的小短代码。

```
<?php
function xml_shortcode( $atts, $content ) {
    return '<pre>' . htmlentities( $content ) . '</pre>';
}

add_shortcode( 'xml', `xml_shortcode` );
?> 
```

如何在帖子中使用您的简码

```
[xml]your code here[/xml] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-01T01:23:31.140

Wordpress.com 现在[内置支持](https://en.support.wordpress.com/code/posting-source-code/)使用简码以多种语言突出显示代码`[code]`。我发现我在高亮 XML 的时候还是要使用 html 实体代码，但是其他语言也很好用（JavaScript、C# 等），而且它对读者来说看起来比你的基本`<pre>`或`<code>`标签要好得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-30T09:00:38.800

我最近遇到了这个问题。
对我来说，工作是以**文本模式**输入代码。代码的选择。`code formatting`从格式菜单应用。

后来，我使用了蜡笔语法高亮插件。该插件运行良好，您必须遵循与上述相同的过程，唯一的区别是在选择要突出显示的代码后选择选项而不是`code formatting`选项。`crayon`

[您可以在此处查看突出显示](http://www.theconstructsim.com/ros-projects-create-hopper-robot-gazebo-step-step)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-27T09:46:26.933

如果 [sourcecode] 可用，但您无法安装其他插件或添加短代码（wordpress.com 上就是这种情况），据我所知，除了在复制有问题的字符之前对其进行编码之外，您别无选择。

以下是详细步骤：

1.  使用 HTML 编码对您的代码片段进行编码，例如使用免费的在线编码器
2.  以 HTML 模式编辑您的帖子
3.  添加[源代码语言=“xml”]
4.  经过编码的源代码
5.  添加[/源代码]

# php - 从phar运行的PHPUnit不起作用

> ID：14896714
> 
> 赞同：1
> 
> 时间：2013-02-15T14:21:04.133
> 
> 标签：php, phpunit, phar

我需要从 PHAR 而不是 Pear 运行 PHPUNIt。我得到的唯一输出是帮助文件。我根本看不到我的测试运行。这是我的代码：

```
<?php
include 'phpunit.phar';
include 'phar://phpunit.phar/phpunit.php';

class ArrayTest extends PHPUnit_Framework_TestCase
{

    public function setUp(){ }
    public function tearDown(){ }

    public function testNewArrayIsEmpty()
    {
        // Create the Array fixture.
        $fixture = array();

        // Assert that the size of the Array fixture is 0.
        $this->assertEquals(0, sizeof($fixture));
    }

} 
```

我正在这样运行它：

```
$ php index.php 
```

谢谢

<< **UPDATE** >> 在我运行这个之后：

```
$ php phpunit.phar index.php 
```

我收到了这个错误：

```
Class 'index' could not be found in '/home/ericp/public_html/dev/_test/phpunit/index.php'. 
```

我通过添加“../”更改路径来意外修复它。我不知道为什么会修复它，但它确实有效。***我的 index.php 文件与我的 phpunit.phar 文件位于同一目录中***。工作示例如下所示：

```
<?php
include '../phpunit.phar';
include '../phar://phpunit.phar/phpunit.php';

class ArrayTest extends PHPUnit_Framework_TestCase
{

    public function setUp(){ }
    public function tearDown(){ }

    public function testNewArrayIsEmpty()
    {
        // Create the Array fixture.
        $fixture = array();

        // Assert that the size of the Array fixture is 0.
        $this->assertEquals(0, sizeof($fixture));
        $this->assertEmpty($fixture);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:27:50.627

我不确定是否使用 PHPUnit 的 Phar，但请在命令行上尝试以下操作：

```
php phpunit.phar index.php 
```

我假设 PHPUnit 正在阅读`$argv`以查找要运行的测试。

或者，您可以尝试在目录中创建一个`phpunit.xml.dist`文件，然后简单地运行`phpunit`，这应该可以。

如前所述，我对Phars一无所知

# hibernate - 用hibernate查询地图，jpql

> ID：14896715
> 
> 赞同：2
> 
> 时间：2013-02-15T14:21:06.657
> 
> 标签：hibernate, jpa, map, jpql

我想知道在使用 hibernate jpql 查询地图时出现以下错误：

**休眠版本** 4.1.5

```
/** Map */
@ElementCollection(targetClass = Credential.class)
@Enumerated(EnumType.STRING)
private Map<Musician, EMusicGroupCredential> members; 
```

# 测试查询 1

```
`1\. select o from Group o join o.members member where key(member).address.country = :country; 
```

# 测试查询 2

```
2\. select o from Group o join o.members member where key(member.address.country) = :country; 
```

通过这两个测试，我正在关注取消引用的错误。第一个说我不能取消引用关键属性。第二个说我不能取消引用标量集合元素：地址。

我相信这是 Hibernate、jpql、jpa 的限制，但我想对这个问题有一些其他的看法。

问候。

# jquery - 提交时的rails表单逻辑

> ID：14896716
> 
> 赞同：0
> 
> 时间：2013-02-15T14:21:12.440
> 
> 标签：jquery, ruby-on-rails

我有一个包含选择器的表单。有一个“添加新”选项，当它被选中时，会使用 jquery 动态生成一个文本输入。现在我需要做的是在提交时检查是否存在文本输入，如果存在，则使用其中的信息更新表格并忽略选择器。我的问题是我应该在带有表单验证的模型中这样做吗？或者有没有更合适的方法？

选择器：

```
<%= builder.select(:line_id, ['~ Add New ~'] + Line.all.collect {|p| [p.title, p.id ]}, { :include_blank => 'select line' }, :id => "line_selector") 
```

jQuery：

```
$(document).ready(function(){
    $("#line_selector").on("change", function() {
        if($(this).prop("selectedIndex") == 1) { 
            console.log($("#line_selector").prop("selectedIndex"));
            var new_line_title = prompt('Please enter a line title');
            if(!new_line_title.length) {
                console.log("no entry");
                return;
            };
            console.log(new_line_title);
            $(this).after($(document.createElement("input"))
                .attr("type", "text")
                .attr("id", "text")
                .attr("name", "text")
                .attr("value", new_line_title));
        };
    });
}); 
```

![在此处输入图像描述](../Images/9ce1a503571730218ad73ecc2b61e5d3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:42:01.010

我不知道是否有更好的方法，但正如您所提到的，我会在模型中使用自定义验证来实现。对我来说，这是定义应用程序行为的最佳场所。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:40:07.730

我只需要一个用于文本字段的 attr_accesor 并在您的模型中有一个 after_initialize 回调来设置 line 属性。

此外，这与您的问题本身无关，但是您是否打算在从下拉列表中选择其他值时隐藏输入？如果是这样，而不是动态添加元素，为什么不直接切换（）并禁用/启用文本字段？

# sorting - 使用 hadoop 对一个巨大的文本文件进行排序

> ID：14896719
> 
> 赞同：1
> 
> 时间：2013-02-15T14:21:21.333
> 
> 标签：sorting, hadoop, mapreduce, cloudera

是否可以使用只有 map 任务和零 reduce 任务的 mapreduce 作业按字典顺序对巨大的文本文件进行排序？

文本文件的记录由换行符分隔，文件大小约为 1 Terra Byte。

如果有人能提出一种方法来实现对这个巨大文件的排序，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T08:30:26.883

在 Map 方法中使用 TreeSet 将整个数据保存在输入拆分中并将其持久化。最后我得到了排序的文件！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T22:18:05.403

实际上有一个与 Hadoop 捆绑在一起的排序示例。[您可以通过检查类org.apache.hadoop.examples.Sort](http://svn.apache.org/viewvc/hadoop/common/tags/release-1.0.3/src/examples/org/apache/hadoop/examples/Sort.java?view=markup)查看示例代码的工作原理。这本身工作得很好，但如果你想要更灵活的排序，你可以检查[一下](http://grepalex.com/2012/09/10/sorting-text-files-with-mapreduce/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T14:27:07.340

Hadoop 中的排序是使用分区器完成的 - 您可以编写自定义分区器以根据您的业务逻辑需求进行排序。请参阅此链接以编写自定义分区[器 http://jugnu-life.blogspot.com/2012/05/custom-partitioner-in-hadoop.html](http://jugnu-life.blogspot.com/2012/05/custom-partitioner-in-hadoop.html)

我不提倡使用普通的 linux 排序命令对 TB 的数据进行排序——您需要拆分数据以适应内存以对大文件大小进行排序：[Linux 中的并行排序](http://linuxwebdev.blogspot.com/2009/02/howto-simple-parallel-sort-in-linux.html "linux中的并行排序")

改用 Hadoop MergeSort 会更好、更方便： [Hadoop MergeSort](http://grepcode.com/file/repo1.maven.org/maven2/org.jvnet.hudson.hadoop/hadoop-core/0.19.1-hudson-2/org/apache/hadoop/util/MergeSort.java "Hadoop 合并排序")

您可以在此处查看来自 Yahoo Hadoop 团队（现为 Hortonworks）的一些 Hadoop 排序基准和分析：[Hadoop 排序基准](https://developer.yahoo.com/blogs/hadoop/hadoop-sorts-petabyte-16-25-hours-terabyte-62-422.html "Hadoop 排序基准")

# java - 从 WSDL 创建 Java 类

> ID：14896723
> 
> 赞同：1
> 
> 时间：2013-02-15T14:21:37.673
> 
> 标签：java, maven, jaxb, cxf, wsdl2java

我正在尝试使用 maven cxf-codegen-plugin 从 WSDL 创建一个 Java 类，但是当我尝试这样做时，它只显示一个错误并且没有生成的类。

我不明白为什么我有这个错误，我的 pom 文件对我来说看起来不错。

我的`pom.xml`样子

```
 <dependencies>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>3.2.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-frontend-jaxws</artifactId>
        <version>2.7.3</version>
    </dependency>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-transports-http-hc</artifactId>
        <version>2.7.3</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.17</version>
    </dependency>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-bundle</artifactId>
        <version>2.5.1</version>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <compilerArguments>
                    <endorseddirs>${endorsed.dir}</endorseddirs>
                </compilerArguments>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <configuration>
                <failOnMissingWebXml>false</failOnMissingWebXml>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.1</version>
            <executions>
                <execution>
                    <phase>validate</phase>
                    <goals>
                        <goal>copy</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${endorsed.dir}</outputDirectory>
                        <silent>true</silent>
                        <artifactItems>
                            <artifactItem>
                                <groupId>javax</groupId>
                                <artifactId>javaee-endorsed-api</artifactId>
                                <version>6.0</version>
                                <type>jar</type>
                            </artifactItem>
                        </artifactItems>
                    </configuration>
                </execution>
            </executions>
        </plugin>

        <plugin>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-codegen-plugin</artifactId>
            <version>2.7.3</version>

            <executions>
                <execution>
                    <id>generate-sources</id>
                    <phase>generate-sources</phase>
                    <configuration>
                        <sourceRoot>${project.build.directory}/generated/cxf</sourceRoot>
                        <wsdlOptions>
                            <wsdlOption>
                                <wsdl>${basedir}/src/main/resources/CurrentTimeService.wsdl</wsdl>
                            </wsdlOption>
                        </wsdlOptions>
                    </configuration>
                    <goals>
                        <goal>wsdl2java</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>

        <plugin>
            <groupId>org.jvnet.jaxb2.maven2</groupId>
            <artifactId>maven-jaxb2-plugin</artifactId>
            <executions>
                <execution>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                    <configuration>
                        <schemaIncludes>
                            <include>jaxb/try/*.xsd</include>
                        </schemaIncludes>
                        <episodeFile>${project.build.directory}/generated-sources/xjc/META-INF/jaxb-try.episode</episodeFile>
                    </configuration>
                    <id>jaxb-generate-try</id>
                </execution>
                <execution>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                    <configuration>
                        <schemaIncludes>
                            <include>jaxb/try/*.xsd</include>
                        </schemaIncludes>
                        <episodeFile>${project.build.directory}/generated-sources/xjc/META-INF/jaxb-try.episode</episodeFile>
                        <generatePackage>q1.q2</generatePackage>
                    </configuration>
                    <id>jaxb-generate-try_1</id>
                </execution>
                <execution>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                    <configuration>
                        <schemaIncludes>
                            <include>jaxb/try2/*.xsd</include>
                        </schemaIncludes>
                        <episodeFile>${project.build.directory}/generated-sources/xjc/META-INF/jaxb-try2.episode</episodeFile>
                    </configuration>
                    <id>jaxb-generate-try2</id>
                </execution>
            </executions>
            <configuration>
                <catalog>src/main/resources/jaxb/catalog.xml</catalog>
                <catalogResolver>org.jvnet.jaxb2.maven2.resolver.tools.ClasspathCatalogResolver</catalogResolver>
                <forceRegenerate>true</forceRegenerate>
                <generateDirectory>${project.build.directory}/generated-sources/xjc</generateDirectory>
                <verbose>true</verbose>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

当我使用 Maven 构建项目时，我看到以下错误

```
Failed to execute goal org.apache.cxf:cxf-codegen-plugin:2.7.3:wsdl2java (generate-sources) on project WebServicesTest: org.xml.sax.SAXParseException; systemId: jar:file:/C:/Users/user/.m2/repository/com/sun/xml/bind/jaxb-xjc/2.2.6/jaxb-xjc-2.2.6.jar!/com/sun/tools/xjc/reader/xmlschema/bindinfo/binding.xsd; lineNumber: 86; columnNumber: 48; src-resolve: Cannot resolve the name 'xjc:globalJavaType' to a(n) 'group' component. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T14:30:03.863

看看这个帖子：

[无法解析 jaxb-xjc-2.2.5-2.jar 中的名称“xjc:globalJavaType”](https://stackoverflow.com/questions/14373733/cannot-resolve-the-name-xjcglobaljavatype-in-jaxb-xjc-2-2-5-2-jar)

您的本地 Maven 存储库的路径中可能包含非拉丁字符。尝试更改您的 settings.xml 以将其设置为仅包含拉丁字符的其他目录，看看是否有帮助。

# java - 使用带有 ObjectMapper 的注释 Mixins 时出错

> ID：14896726
> 
> 赞同：1
> 
> 时间：2013-02-15T14:21:59.757
> 
> 标签：java, jackson, mixins

我正在尝试使用以下代码为我的一个 POJO 创建一个 mixin：

```
interface CustomerStatsIgnoreMixIn {
    @JsonIgnoreProperties({"ref"});
}

public class CustomerStatsJob extends Job {
    private void updateCustomer(Customer customer) {
        ObjectMapper mapper = new ObjectMapper();
        mapper.getSerializationConfig().addMixInAnnotations(Customer.class,
                CustomerStatsIgnoreMixIn.class);
    }
} 
```

我在 Eclipse 中遇到以下错误`@JsonIgnoreProperties({"ref"});`

> 此行有多个标记 - 语法错误，插入“枚举标识符”以完成 EnumHeaderName - 语法错误，插入“EnumBody”以完成 EnumDeclaration

我确定这很愚蠢，但有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:31:16.963

JsonIgnoreProperties 注释是一个类型注释......它应该在接口定义行的正上方，而不是在接口的主体中。

喜欢：

```
@JsonIgnoreProperties({"ref"});
interface CustomerSTatesIgnoreMixin { 
```

希望这可以帮助。

# google-chrome - 用于控制鼠标/关键字的 Chrome 扩展程序

> ID：14896728
> 
> 赞同：8
> 
> 时间：2013-02-15T14:22:05.473
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools

鉴于安全隐患，您无法在 JavaScript 中执行此操作。是否有任何其他类型的 Google 扩展/开发 API 可以让我从 Chrome 执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T11:10:07.177

是的，有一个 Pointer Lock API 来控制鼠标，检查此代码作为 Pointer Lock API 的参考。

# 示范

转到[http://www.google.co.in/](http://www.google.co.in/)并单击 Google 的徽标，您可以从中自定义此代码以控制鼠标移动和动作。

### 清单.json

添加内容脚本并为页面设置所有权限。

```
{
    "name":"Pointer Lock",
    "description":"http://stackoverflow.com/questions/14896728/chrome-extension-to-control-mouse-keyword",
    "version":"1",
    "manifest_version":2,
    "content_scripts": [
        {
          "matches": ["http://www.google.co.in/"],
          "js": ["myscript.js"]
        }
    ],
    "permissions":["<all_urls>"]
} 
```

### myscript.js

此代码锁定指针移动。

```
//Check whether browser supports locking or not
var havePointerLock = 'webkitPointerLockElement' in document;
//Get some random element in http://www.google.co.in/ page
var element = document.getElementById("hplogo");
//Bind an event Listener
element.addEventListener("click", function () {
    if (havePointerLock) {
        // Ask the browser to lock the pointer
        element.requestPointerLock = element.webkitRequestPointerLock;
        element.requestPointerLock();
        //Register lock change callback
        document.addEventListener('webkitpointerlockchange', changeCallback, false);
        //Register callback for all errors
        document.addEventListener('webkitpointerlockerror', errorCallback, false);
    } else {
        alert("Your browser does not support Pointer Lock, Please Upgrade it");
    }
});

function moveCallback(e) {
    //Track all mouse movements
    console.log("Mouse Moved ...");
    console.log(e.webkitMovementX);
    console.log(e.webkitMovementY);
}

function changeCallback() {
    //Check for element whether locked is expected element or not
    if (document.webkitPointerLockElement == element) {
        // Pointer was just locked
        // Enable the mousemove listener
        document.addEventListener("mousemove", moveCallback, false);
    } else {
        // Pointer was just unlocked
        // Disable the mousemove listener
        document.removeEventListener("mousemove", moveCallback, false);
    }
}

function errorCallback(e) {
    //Log Errors
    console.log(e);
} 
```

# 参考

*   [指针锁定 API](http://www.html5rocks.com/en/tutorials/pointerlock/intro/)
*   [内容脚本](https://developer.chrome.com/extensions/content_scripts.html)

# java - 如果对象在 selenium webdriver java 中不可见，如何使用 xpath 验证对象

> ID：14896731
> 
> 赞同：0
> 
> 时间：2013-02-15T14:22:09.040
> 
> 标签：java, selenium-webdriver

如何使用 selenium webdriver 中的 xpath 验证仅在不正确的数据输入（文本框之前的标签，例如：登录场景）上启用的不可见对象。

如果所有标签都显示错误消息（例如用户名标签和密码标签），我能够验证和捕获文本（错误消息）。xpath 用户名：.// *[@id='loginForm']/p[1]/p/label xpath 密码：.//* [@id='loginForm']/p[2]/p/label

但是，如果我输入正确的用户名，Webdriver 会继续在 Xpath 中搜索 username(.//*[@id='loginForm']/p[1]/p/label) 并且没有响应。

HTML 仅在出现错误时可见： label class="error" generated="true" for="userName" label class="error" generated="true" for="passwordField

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:11:07.697

使用 WebDriverWait：

```
WebDriverWait waiting = new WebDriverWait(driver, 15, 100);
waiting.until(ExpectedConditions.invisibilityOfElementLocated(By.xpath("//*[@id='loginForm']/p[1]/p/label"))); 
```

上面将创建一个 Web 驱动程序等待对象，该对象将等待长达 15 秒（每 100 毫秒检查一次条件）以使元素变得不可见。如果在触发代码行时元素已经不可见，这将立即消失。

**根据以下评论进行编辑**

如果你只是想找出一个元素是否存在，你可以这样做：

```
List<WebElement> labelCount = driver.findElements(By.xpath("//*[@id='loginForm']/p[1]/p/label")); 
```

如果大小为 0，则标签不存在，否则存在，例如：

```
if(labelCount.size() == 0){
    //Get tab text
} else {
    //Enter second field data
} 
```

# android - TextView.setText() 处的 NullPointerException

> ID：14896732
> 
> 赞同：0
> 
> 时间：2013-02-15T14:22:10.280
> 
> 标签：android, listview, dialog, textview

我的 textView 在我的 DialogBox 上。我有一个所有列表的列表视图，当我单击列表中的一个项目时，会弹出一个带有文本视图的对话框。但每次单击都会出现空指针异常。在 textViewReason.setText(transferPurpose);

```
if(status.equals("Disapproved"))
                 {
                    TextView textViewReason = (TextView)findViewById(R.id.textViewReasonDenied);                         
                    textViewReason.setText(transferPurpose);
                     Dialog formDialog = onCreateDialog(1);    

                     //((TextView)formDialog.findViewById(R.id.textViewReasonDenied)).setText(transferPurpose);

                     formDialog.show();
                 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:29:11.603

尝试这个 ：

```
if(status.equals("Disapproved"))
{
  Dialog formDialog = onCreateDialog(1);   
  TextView textViewReason = (TextView)formDialog.findViewById(R.id.textViewReasonDenied);                         
  textViewReason.setText(transferPurpose);          
  formDialog.show();
 } 
```

还要检查你的 transferPurpose 字符串是否不为空:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:36:45.480

“R.id.textViewReasonDenied”必须是TextView类型的组件，在main.xml或者activity_main布局中。祝你好运，

# java - 在本地存储来自 JSON Feed 的数据 Android

> ID：14896733
> 
> 赞同：1
> 
> 时间：2013-02-15T14:22:12.980
> 
> 标签：java, android, xml, json

嗨，我正在尝试了解如何在手机上本地存储 JSON 提要，以便它可以在全球范围内和离线使用。例如，在 iOS 中，我将它写到一个空的 pList 中，我正在寻找与 Android 上相同的内容。
例如，写入 XML 或创建 .JSON 文件是否更好，以及如何写入/读取此文件以重用数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:35:25.163

您可以将数据保存在DB中，也可以保存json文件并在需要时读取数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:38:03.583

我有一个类可以获取 json 提要，然后将其转换为字符串并将其与当前使用的 cookie 一起保存在数据库中。所以我可以重新检查 onResume() 的登录状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T15:01:10.310

最简单的存储方式是将其保存在 SharedPreferences 中。这是存储 JSON 的字符串值的快速且保存/安全的方式；)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T15:02:02.443

适用于 Android 的 Google I/O 应用程序：[iosched](http://www.youtube.com/watch?v=xHXn3Kg2IQE)是一个很好的例子，它使用 /res/raw 中的 .json 来存储其数据。

此外，如果您使用 json 数据， *google-gson将为您节省大量时间，并且在开发时您会感到惊讶。*

最后，如果您需要知道如何在全局和离线情况下重用数据。这个视频[Android REST 客户端应用程序](http://www.youtube.com/watch?v=xHXn3Kg2IQE)真的很有用。

# multithreading - 方法指针分配线程安全吗？

> ID：14896734
> 
> 赞同：10
> 
> 时间：2013-02-15T14:22:20.853
> 
> 标签：multithreading, delphi

## *例子：*

假设，我会有以下线程（请不要考虑这个例子的线程上下文执行方法中使用了什么，它只是为了解释）：

```
type
  TSampleThread = class(TThread)
  private
    FOnNotify: TNotifyEvent;
  protected
    procedure Execute; override;
  public
    property OnNotify: TNotifyEvent read FOnNotify write FOnNotify;
  end;

implementation

procedure TSampleThread.Execute;
begin
  while not Terminated do
  begin
    if Assigned(FOnNotify) then
      FOnNotify(Self); // <- this method can be called anytime
  end;
end; 
```

然后假设，我想随时`OnNotify`从主线程更改事件的方法。该主线程将事件处理程序方法实现为`ThreadNotify`此处的方法：

```
type
  TForm1 = class(TForm)
    Button1: TButton;
    Button2: TButton;
    procedure Button1Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);
  private
    FSampleThread: TSampleThread;
    procedure ThreadNotify(Sender: TObject);
  end;

implementation

procedure TForm1.ThreadNotify(Sender: TObject);
begin
  // do something; unimportant for this example
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  FSampleThread.OnNotify := nil; // <- can this be changed anytime ?
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
  FSampleThread.OnNotify := ThreadNotify; // <- can this be changed anytime ?
end; 
```

## *问题：*

更改可以随时从另一个线程的上下文中从工作线程调用的方法是否安全？执行上面示例中显示的操作是否安全？

我不确定，如果这绝对安全，至少因为方法指针实际上是一对指针，我不知道我是否可以将它作为原子操作。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-15T14:26:52.880

不，它不是线程安全的，因为该操作永远不会是“原子的”。由`TNotifyEvent`两个指针组成，这些指针永远不会同时被赋值：一个被赋值，另一个被赋值。

为赋值生成的 32 位汇编器`TNotifyEvent`由两条不同的汇编器指令组成，如下所示：

```
MOV [$00000000], Object
MOV [$00000004], MethodPointer 
```

如果它是单个指针，那么您将有一些选项，因为该操作是*原子*操作：您拥有的选项取决于 CPU 的内存模型有多强：

*   如果 CPU 支持“顺序一致性”模型，那么在您写入内存之后发生的任何读取都会看到新值，这是有保证的。如果是这种情况，您可以简单地编写您的值，不需要内存屏障或使用`Interlocked`方法。
*   如果 CPU 对重新排序存储和加载更放松，那么您需要一个“内存屏障”。如果是这种情况，最简单的解决方案是使用[InterlockedExchangePointer](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683609%28v=vs.85%29.aspx)

不幸的是，我不知道当前 Intel CPU 的内存模型有多强大。有一些间接证据表明可能会发生一些重新订购，`Interlocked`推荐使用那些，但我还没有看到英特尔的明确声明说其中一个或另一个。

证据：

*   现代 CPU 使用“预取”——这会自动暗示某种程度的加载/存储重新排序。
*   SSE 引入了处理 CPU 缓存的具体指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T17:10:49.787

除了寄存器大小之外，还涉及两个操作。检查并稍后执行。要最小化，请创建一个本地 var 并使用它。但无论如何，这仍然不是 100% 线程安全的

```
var
  LNotify: TNotifyEvent;
begin
  ...
  LNotify := FOnNotify;
  if Assigned(LNotify) then
    LNotify(Self);
end; 
```

# html - 根据其尺寸的图像加载性能

> ID：14896740
> 
> 赞同：0
> 
> 时间：2013-02-15T14:22:59.090
> 
> 标签：html

尺寸为：

```
2x2 | 4x4 | 8x8 | 16x16 | 32x32 | 64x64 | 128x128 | 256x256 | 512x512

// so on . . . . 
```

等等更容易加载和显示？我在某处读到过类似这些尺寸的计算机，并且性能非常好。它是否也适用于 HTML 文档？如果是这样，我们应该在 and 中制作图标和所有这些`16x16`东西`32x32`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:27:35.800

虽然在其他地方可能是正确的（如 Favicon，见下文），但 HTML 文档中的普通图像并非如此。HTML 图像可以具有您希望它具有的任何尺寸。

为获得最佳性能，请确保图像的物理尺寸与 HTML`image`标记的尺寸相同，这样浏览器就不必进行任何大小调整。

> 如果是这样，我们应该在 16x16 和 32x32 中制作图标和所有这些东西吗？

[网站图标](http://en.wikipedia.org/wiki/Favicon)应该有一定的定义尺寸。

但是在 HTML 文档中，使用 16x16 而不是 17x17 像素的图像的唯一原因是设计考虑。肯定跟性能没关系。

# linux - Bsign：从标准输入读取密码

> ID：14896743
> 
> 赞同：0
> 
> 时间：2013-02-15T14:23:04.707
> 
> 标签：linux, bash, gnupg

晚上好。

是否可以`bsign`从标准输入而不是终端接受密码？

或者，有没有办法改变密码输入程序？我希望我的脚本能够在将所有二进制文件上传到测试台之前对其进行自动签名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:28:52.237

`bsign`知道`-P`将参数传递给的标志`gpg`。

`--passphrase-fd 0`将使您能够从标准输入读取密码。或者，您可以使用`--passphrase-file`从文件中读取它，甚至`--passphrase string`直接传递它。

```
bsign -P '--passphrase-fd 0' ...                       # Read from STDIN
bsign -P '--passphrase-file /path/to/file-or-pipe' ... # Read from a file
bsign -P '--passphrase "my password"' ...              # Pass password as parameter 
```

如果是第二个或第三个选项，请确保您正确转义，因为参数的内容将被再次解析（例如，`\\\\`如果您的密码包含单个反斜杠）。

# ruby - Compass css_parser 错误：无法构建 gem 原生扩展

> ID：14896748
> 
> 赞同：1
> 
> 时间：2013-02-15T14:23:20.757
> 
> 标签：ruby, terminal, gem

我刚刚开始安装 SASS 和 COMPASS。下一步是安装 CSS_PARSER。这是一个非常简单的步骤，但是......我按照他们[网站](http://thesassway.com/beginner/getting-started-with-sass-and-compass)的说明插入了。将其插入终端：

```
sudo gem install css_parser 
```

几秒钟后，它开始安装，但我收到此警报并且卡住了：

```
sudo gem install compass
Successfully installed compass-0.12.2
1 gem installed
Installing ri documentation for compass-0.12.2...
Installing RDoc documentation for compass-0.12.2...
Daniels-MacBook-Pro:~ DanielRamirez$ sudo gem install css_parser
Building native extensions.  This could take a while...
ERROR:  Error installing css_parser:
    ERROR: Failed to build gem native extension.

        /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
mkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/ruby.h

Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/json-1.7.7 for inspection.
Results logged to /Library/Ruby/Gems/1.8/gems/json-1.7.7/ext/json/ext/generator/gem_make.out 
```

这是什么意思，我该如何遵循？

# c++ - 'min' : 不是 TRandom 的成员和其他编译器错误

> ID：14896750
> 
> 赞同：1
> 
> 时间：2013-02-15T14:23:22.977
> 
> 标签：c++, visual-studio, visual-studio-2012, compiler-errors

将`TRandom`课程添加到我的项目后，我开始收到这些错误：

```
Error   1   error C2039: 'result_type' : is not a member of 'TRandom'   e:\programy\microsoft visual studio 11.0\vc\include\xutility    3450
Error   2   error C2146: syntax error : missing ';' before identifier '_Ty1'    e:\programy\microsoft visual studio 11.0\vc\include\xutility    3450
Error   3   error C4430: missing type specifier - int assumed. Note: C++ does not support default-int   e:\programy\microsoft visual studio 11.0\vc\include\xutility    3450
Error   4   error C2065: '_Ty1' : undeclared identifier e:\programy\microsoft visual studio 11.0\vc\include\xutility    3452
Error   5   error C2070: ''unknown-type'': illegal sizeof operand   e:\programy\microsoft visual studio 11.0\vc\include\xutility    3452
Error   6   error C2065: '_Ty1' : undeclared identifier e:\programy\microsoft visual studio 11.0\vc\include\xutility    3453
Error   7   error C2923: 'std::_If' : '_Ty1' is not a valid template type argument for parameter '_Ty2' e:\programy\microsoft visual studio 11.0\vc\include\xutility    3453
Error   8   error C2955: 'std::_If' : use of class template requires template argument list e:\programy\microsoft visual studio 11.0\vc\include\xutility    3453
Error   9   error C2039: 'min' : is not a member of 'TRandom'   e:\programy\microsoft visual studio 11.0\vc\include\random  3600 
```

现在我的项目中什至没有那个类（因为我删除了它以找出原因），但我仍然得到了那些。我认为这可能是某种错误，因为即使我不再有这个`TRandom`类，最后一个错误仍然提到它。我正在使用 MS Visual Studio 2012。

以防万一我还粘贴了我`TRandom`班级的代码：

cp文件：

```
#include "stdafx.h"
#include "TRandom.h"

using namespace std;
//using namespace tr1;

mt19937 TRandom::twister = mt19937();

TRandom::TRandom(void)
{
}

TRandom::~TRandom(void)
{
}

int TRandom::randomInt(int max, int min)
{
    //mt19937 twister;
    uniform_int_distribution<int> dist(max, min);
    return dist(twister);
}

double TRandom::randomDouble(double max, double min)
{
    //mt19937 twister;
    uniform_real_distribution<double> dist(max, min);
    return dist(twister); 
} 
```

H 文件：

```
#if !defined(_TRANDOM_H)
#define _TRANDOM_H

#include <random>

class TRandom
{

private:
    static std::tr1::mt19937 twister;

public:
    TRandom(void);
    ~TRandom(void);

    static int randomInt(int max, int min);
    static double randomDouble(double max, double min);
};

#endif //_TRANDOM_H 
```

# ruby - Guard Sass - gem 文件

> ID：14896751
> 
> 赞同：1
> 
> 时间：2013-02-15T14:23:27.017
> 
> 标签：ruby, rubygems, gem, guard

我正在使用[警卫](https://github.com/guard/guard-shell)来观察文件系统的变化并运行一些脚本。我不熟悉红宝石环境。到目前为止，要使用 watcher，我只需要安装 Shell（没有 gem 文件）。现在，我也尝试按照[此处](https://github.com/guard/guard-sass)的说明添加 Sass 。

我通过安装它 `gem install guard-shell`

但是，当尝试下一个命令时 `gem 'guard-sass', :require => false`

它给出了错误

```
$ gem 'guard-sass', :require => false
ERROR:  While executing gem ... (RuntimeError)
    Unknown command guard-sass, 
```

怎么了？我需要一个 gem 文件吗（不知道应该是什么内容，或者我为什么需要这个）

```
guard list
+------------+--------------+
|  Available Guard plugins  |
+------------+--------------+
| Plugin     | In Guardfile |
+------------+--------------+
| Sass       | ✘          |
| Shell      | ✔          |
+------------+--------------+ 
```

保护文件：

```
guard 'shell' do
  watch(/(.*).md/) {`python render.py` }
end 
```

## 编辑：

跳过捆绑器，给出了这个消息。不知道有什么含义，但`guard init sass`没有添加任何东西到我的

```
 guard init sass
10:03:05 - INFO - Guard here! It looks like your project has a Gemfile, yet you are running
> [#] `guard` outside of Bundler. If this is your intent, feel free to ignore this
> [#] message. Otherwise, consider using `bundle exec guard` to ensure your
> [#] dependencies are loaded correctly.
> [#] (You can run `guard` with --no-bundler-warning to get rid of this message.)
10:03:05 - ERROR - Could not load 'guard/sass' or '~/.guard/templates/sass' or find class Guard::Sass 
```

添加了一个gemfile，然后像这样运行

```
bundle exec guard init sass
10:04:31 - ERROR - Could not load 'guard/sass' or '~/.guard/templates/sass' or find class Guard::Sass 
```

如上所述，我安装了 sass

```
sudo gem install sass 
```

和 gemfile 看起来像：

# 示例 Gemfile

```
source "https://rubygems.org"
# gem "rails"
group :development do
  gem 'guard'
  gem "sass"
  gem 'guard-sass', :require => false     
end
gem 'rb-fsevent', '~> 0.9.1' 
```

# 编辑2：

这是权限问题，请参阅[https://github.com/hawx/guard-sass/issues/29](https://github.com/hawx/guard-sass/issues/29)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:45:49.443

如果您重新阅读 Github 上的指南，您会注意到它说要添加`gem 'guard-sass', :require => false`到您的 Gemfile，而不是在您的终端中运行它。

现在，如果文档是正确的，你所要做的就是运行`guard init sass`

# android - adb“geo fix”命令到Android的真实设备？

> ID：14896763
> 
> 赞同：4
> 
> 时间：2013-02-15T14:24:02.317
> 
> 标签：android, command-line

如何在真实设备上测试 GPS？

我连接到模拟器，一切正常。

```
jdev@jdev-K ~ $ adb devices
List of devices attached 
4df10455333395f1        device

jdev@jdev-K ~ $ telnet 4df10455333395f1
telnet: could not resolve 4df10455333395f1/telnet: Name or service not known 
```

哪个港口？

告诉我，我找不到。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-06-26T10:35:47.643

> 不幸的是，地理修复不适用于真实设备。

不是开箱即用，但这就是为什么我为此编写了一个应用程序:) - 它是[开源](https://github.com/luv/mockgeofix)的，提供与模拟器完全相同的界面（telnet 到：5554 并运行“geo fix ...”或“geo nmea”） : 在应用商店[MockGeoFix](https://play.google.com/store/apps/details?id=github.luv.mockgeofix&hl=en)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T14:33:16.727

不幸的是，地理修复不适用于真实设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-01T19:01:49.080

您可以以编程方式设置它。如果您查看最底部[的文档](http://developer.android.com/reference/android/location/LocationManager.html)`setTestProviderLocation()`，它有一个. 这可能会奏效。但是我没有使用它。

# ios - 在虚拟机上开发应用程序

> ID：14896765
> 
> 赞同：0
> 
> 时间：2013-02-15T14:24:12.310
> 
> 标签：ios, macos, vmware

我有 PC -Intel i5，dell inspiron 5520。我已经安装了 vmware 并且我已经安装了 mac OS lion 10.7。

1.  在 vmware 上开发应用程序是否合法？
2.  如果它是合法的，它是否会创建相同的机器代码，由原始 mac 创建。
3.  如果它创建相同的机器代码，那么我们可以成功地将应用程序部署到应用程序商店。

# asp.net-mvc-4 - ASP.NET MVC 4 C# - 使用默认 SimpleMembership 的 Internet 应用程序模板，错误：System.Data.SqlClient.SqlException：用户 xxx 登录失败

> ID：14896767
> 
> 赞同：0
> 
> 时间：2013-02-15T14:24:17.320
> 
> 标签：asp.net-mvc-4, visual-studio-2012, localhost, simplemembership, sql-server-2012-express

我在本地（本地主机）运行应用程序，并且由于我已经注册，我可以正确登录，然后可以定期浏览我的应用程序的所有页面。然后在不注销的情况下，我关闭了 IIS express。但是当我再次启动 IIS Express 并再次从 Visual Studio 调试我的应用程序时，我的浏览器中显示以下错误：“'/' 应用程序中的服务器错误。异常详细信息：System.Data.SqlClient.SqlException：用户登录失败'xxx'。”。其中“xxx”是我的 sqlserver 管理员名称。因此，如果我理解正确，由于我之前的访问没有注销，它会尝试使用我的 SQL Server 管理员凭据登录。

另一件事是，如果我将从另一个浏览器运行我的应用程序，则没有问题，因为它在没有人登录的情况下显示应用程序，那么我将使用与我在该浏览器中相同的用户名登录该浏览器（第二个）第一个浏览器（在重新启动 IIS Express 之前）并刷新第一个浏览器并再次开始工作（在重新启动 IIS Express 之前使用我的第一种方法的用户名登录）。

此外，当我在 Url 中使用我的 ip 而不是 localhost 时，不会出现此问题。

最后一点，我对 ASP.NET 以及一般网络和服务器端 Web 应用程序的经验并不丰富。

我正在使用 Windows 8、Visual Studio 2012、SQL Server 2012、IIS Express

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:31:01.560

最终，我找到了解决问题的方法。它与默认连接数据库（简单成员）的初始化有关。

更准确地说，我移动了这一行“WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);" 从 Filters -> InitializeSimpleMembershipAttribute.cs 到 Global.asax，以便尽快进行初始化。

# java - 通过意图将时间和日期添加到谷歌日历

> ID：14896768
> 
> 赞同：1
> 
> 时间：2013-02-15T14:24:17.423
> 
> 标签：java, android, date, time, calendar

我目前正在尝试`calendar`使用我存储在我的数据库中的对象向谷歌添加一个事件。存储在数据库中的日期以 Date 格式存储，时间以字符串形式存储。

目前，除了事件的时间部分，一切都在工作。日期正确传递，但时间默认为 0:00。我该怎么做才能正确度过时间？

```
@Override
public void onClick(View arg0) {
if(arg0.getId() == R.id.btnAddToCal)
 { 

    long startTime = 0, endTime=0;

    String startDate = blankevent.EventDate;
    try {
        Date date = new SimpleDateFormat("yyyy-MM-dd").parse(startDate);
        startTime=date.getTime();
    }
    catch(Exception e){ }   

    Calendar cal = Calendar.getInstance();              
    Intent calintent = new Intent(Intent.ACTION_EDIT);
    calintent.setType("vnd.android.cursor.item/event");
    calintent.putExtra("eventLocation", blankevent.EventLocation);
    calintent.putExtra("title", blankevent.EventName);
    calintent.putExtra("description", blankevent.EventDetails);

    calintent.putExtra("beginTime",startTime);
    calintent.putExtra("dtstart", blankevent.EventTime);

  startActivity(calintent);
   return;
 } 
```

我附上了实际问题区域的屏幕截图。日期是正确的，但时间我不正确。

![在此处输入图像描述](../Images/c681dba5893e651196a26f7371fd9edc.png)

已解决的代码

```
@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub
    Log.e("cal","sel2");
    if(arg0.getId() == R.id.btnAddToCal)
     { 

        String startDate = blankevent.EventDate;
        String startHour = blankevent.EventTime;
        Date fulldate = null;

        try {
            fulldate = new SimpleDateFormat("yyyy-MM-dd-HH:mm").parse(startDate+"-"+startHour);
        } catch (ParseException e) {
            e.printStackTrace();
        }

        Calendar cal = Calendar.getInstance();              
        Intent calintent = new Intent(Intent.ACTION_EDIT);
        calintent.setType("vnd.android.cursor.item/event");
        calintent.putExtra("eventLocation", blankevent.EventLocation);
        calintent.putExtra("title", blankevent.EventName);
        calintent.putExtra("description", blankevent.EventDetails);
        calintent.putExtra("beginTime",  fulldate.getTime());   
        calintent.putExtra("endTime",fulldate.getTime()+60*60*1000);

      startActivity(calintent);
       return;
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:07:59.717

您的 Starttime 需要以毫秒为单位。此外，我并没有真正了解您的意图额外字段名称。

由于您只解析 dd--MM--YYYY 时间仍留在 00:00 ，并且事件的默认持续时间为 1 小时。因此，您可能只需要设置 Date 对象的时间 (startTime)，然后调用 startTime.getMillis();

```
String startDate = blankevent.EventDate;
String startHour = blankevent.EventTime;
Date date = new SimpleDateFormat("yyyy-MM-dd-HH:mm").parse(startDate+"-"+startHour); 
```

[此外，这是来自www.developer.com](http://www.developer.com/ws/android/programming/android-calendaring-tutorial-android-4.0.html)的一个干净的示例作者：Lauren Darcey 和 Shane Conder

```
Intent calIntent = new Intent(Intent.ACTION_INSERT);
calIntent.setData(Events.CONTENT_URI);
calIntent.putExtra(Events.TITLE, "Google IO Afterparty");
calIntent.putExtra(Events.EVENT_LOCATION, "The W Hotel Bar on Third Street");
calIntent.putExtra(Events.DESCRIPTION, "Hang out after Google IO for a drink and geeky conversation.");
Calendar startTime = Calendar.getInstance();
startTime.set(2012, 5, 29, 18, 0);
Calendar endTime = Calendar.getInstance();
endTime.set(2012, 5, 29, 22, 30);
calIntent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME,
startTime.getTimeInMillis());
calIntent.putExtra(CalendarContract.EXTRA_EVENT_END_TIME,
endTime.getTimeInMillis());
startActivity(calIntent); 
```

# php - 不能使用 AFNetworking 上传超过 10 个文件

> ID：14896769
> 
> 赞同：1
> 
> 时间：2013-02-15T14:24:18.387
> 
> 标签：php, iphone, ios, afnetworking

我正在开发一个应用程序。其中需要在服务器上上传100多张图片。在这里使用 AFNetworking 的 ima 是我的代码

```
AFHTTPClient *client= [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:@"http://myserver/upload_video.php"]];
        NSDictionary* params = [NSDictionary dictionaryWithObjectsAndKeys:@"saveMediaVideo", @"methodName",userID,@"user_id",[NSString stringWithFormat:@"%d",[imageArray count]],@"img_count",@"480.0000",@"img_height" , nil];

        NSMutableURLRequest *request = [client multipartFormRequestWithMethod:@"POST" path:@"http://myserver/upload_video.php" parameters:params constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
            for (int i =0; i<[imageArray count]; i++) {
                NSData *imageToUpload = UIImageJPEGRepresentation([imageArray objectAtIndex:i], 1.0);
            [formData appendPartWithFileData: imageToUpload name:@"media[]" fileName:[NSString stringWithFormat:@"temp_%d.jpg",i] mimeType:@"image/jpeg"];
            }
        }];
       AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

        [operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
            NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);
        }];
        [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
            NSString *response = [operation responseString];
            NSLog(@"response: [%@]",response);
           [self performSelector:@selector(killHUD) withObject:@"Processing..."];
            CustomAlertPopUp *alert = [[CustomAlertPopUp alloc]initWithHeaderText:@"Message" detailText:@"Spin uploaded on Server." buttonTitle:@"Ok" withTag:10 forTarget:self];
            [alert showView:self.view];
        } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
            [self performSelector:@selector(killHUD) withObject:@"Processing..."];
            if([operation.response statusCode] == 403){
                NSLog(@"Upload Failed");
                return;
            }
            NSLog(@"error: %@", [operation error]);
            CustomAlertPopUp *alert = [[CustomAlertPopUp alloc]initWithHeaderText:@"Error" detailText:@"Error from server, Please try again." buttonTitle:@"Ok" withTag:0 forTarget:self];
            [alert showView:self.view];
        }];
        [operation start]; 
```

`

在`NSLog`我可以观察到完整的过程，

```
2013-02-15 19:15:37.755 MyProject[5815:907] Sent 6856280 of 6871277 bytes
2013-02-15 19:15:37.757 MyProject[5815:907] Sent 6859176 of 6871277 bytes
2013-02-15 19:15:37.759 MyProject[5815:907] Sent 6862072 of 6871277 bytes
2013-02-15 19:15:37.760 MyProject[5815:907] Sent 6864968 of 6871277 bytes
2013-02-15 19:15:37.762 MyProject[5815:907] Sent 6867864 of 6871277 bytes
2013-02-15 19:15:37.780 MyProject[5815:907] Sent 6871277 of 6871277 bytes 
```

这意味着过程完成。但在服务器端，我只能获得 10 张图像。请指导我..为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:33:51.203

这很可能是服务器端问题。PHP 的一些设置能够限制单个请求中可以传输的数据量。

设置如下 -

*   [`upload_max_filesize`](http://www.php.net/manual/en/ini.core.php#ini.upload-max-filesize)
*   [`post_max_size`](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)

两者都可以在[`php.ini`文件中设置。](http://www.php.net/manual/en/ini.core.php). 可以通过运行找到特定文件的位置`phpinfo()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:29:31.690

这是一个服务器问题。我有一个带有两个`.ini`文件的专用服务器，支持人员将其值更改`max_file_uploads`为 500。它工作正常。

# c# - 将文件压缩成具有特定目录结构的 .zip 文件 - C#/.Net

> ID：14896770
> 
> 赞同：-2
> 
> 时间：2013-02-15T14:24:30.133
> 
> 标签：c#, .net, vb.net, compression, zip

我正在使用 C# 开发一个应用程序，并且我正在尝试将来自不同位置的几个文件压缩成一个压缩文件。

我的问题是我希望这个 zip 文件中的结构与文件中的结构不同。

例子：

```
FileA -> example.zip: \DirX\DirY
FileB -> example.zip: \DirX\DirZ
FileC -> example.zip: \DirW 
```

我可以保留文件夹结构但不能更改“目标”路径。.Net 中是否有任何外部工具或以编程方式来实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:28:46.463

你试过[dotnetzip](http://dotnetzip.codeplex.com)吗？- 这很简单，只需使用`AddEntry`/`AddFile`方法在 zip 文件中使用不同的路径作为名称。

另请参阅[DotNetZip：将文件添加到动态创建的存档目录](https://stackoverflow.com/questions/8764892/dotnetzip-add-files-to-dynamically-created-archive-directory)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:38:24.727

强大的解决方案 - 按条目处理 zip 文件，然后使用替换路径提取/压缩文件（可以是文件的实际路径，您可以在压缩之前将其放入临时文件夹或在提取后复制到所需位置）。文件的原始路径可以保存为文本，然后也存储在 zip 中（因为它无论如何都会具有您指定的结构，因此您可以保留让我们说“extract.txt”文件来存储原始文件位置以进行提取）。

您可以使用库（ICSharpCode.SharpZipLib 或其他）或使用 .net framework 4.5 [ZipArchive](http://msdn.microsoft.com/en-us/library/system.io.compression.ziparchive.aspx)对 zip 文件本身执行基本操作。

# vb.net - AutoMapper .ForMember 方法编译错误。无效重载

> ID：14896772
> 
> 赞同：8
> 
> 时间：2013-02-15T14:24:38.293
> 
> 标签：vb.net, automapper

我正在尝试使用 Automapper 进行映射

这是我当前的映射：

```
Mapper.CreateMap(Of NameAddress, PersonalDetails)() _
            .ForMember(Function(dest) dest.Forenames, Function(opt) opt.MapFrom(Function(src) src.Forename)) _
            .ForMember(Function(dest) dest.TelephoneNumber, Function(opt) opt.MapFrom(Function(src) src.TelephoneNo1)) _
            .ForMember(Function(dest) dest.MobileNumber, Function(opt) opt.MapFrom(Function(src) src.MobilePhoneNo)) _
            .ForMember(Function(dest) dest.NationalInsuranceNumber, Function(opt) opt.MapFrom(Function(src) src.NINo)) _
            .ForMember(Function(dest) dest.DateOfBirth, Function(opt) opt.MapFrom(Function(src) src.BirthDate)) 
```

因此，我想从 NameAddress 源对象映射到 PersonalDetails 目标对象。源和目标上的其余属性是相同的，因此没有明确定义映射。

但是，当我尝试使用此映射进行编译时，会出现以下编译时错误。

```
Overload resolution failed because no accessible 'ForMember' can be called with these arguments:
    'Public Function ForMember(name As String, memberOptions As System.Action(Of AutoMapper.IMemberConfigurationExpression(Of Infrastructure.NameAddress))) As AutoMapper.IMappingExpression(Of Infrastructure.NameAddress, Core.TaxiLicensing.PersonalDetails)': Lambda expression cannot be converted to 'String' because 'String' is not a delegate type.
    'Public Function ForMember(name As String, memberOptions As System.Action(Of AutoMapper.IMemberConfigurationExpression(Of Infrastructure.NameAddress))) As AutoMapper.IMappingExpression(Of Infrastructure.NameAddress, Core.TaxiLicensing.PersonalDetails)': Expression does not produce a value.
    'Public Function ForMember(destinationMember As System.Linq.Expressions.Expression(Of System.Func(Of Core.TaxiLicensing.PersonalDetails, Object)), memberOptions As System.Action(Of AutoMapper.IMemberConfigurationExpression(Of Infrastructure.NameAddress))) As AutoMapper.IMappingExpression(Of Infrastructure.NameAddress, Core.TaxiLicensing.PersonalDetails)': Expression does not produce a value. 
```

我错过了什么？我的映射不正确吗？它似乎正在尝试使用我不打算使用的函数的重载。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-15T15:12:18.877

我的错...

应该一直在使用：

```
Mapper.CreateMap(Of NameAddress, PersonalDetails)() _
            .ForMember(Function(dest) dest.Forenames, Sub(opt) opt.MapFrom(function(src) src.Forename)) _
            .ForMember(Function(dest) dest.TelephoneNumber, sub(opt) opt.MapFrom(function(src) src.TelephoneNo1)) _
            .ForMember(Function(dest) dest.MobileNumber, Sub(opt) opt.MapFrom(function(src) src.MobilePhoneNo)) _
            .ForMember(Function(dest) dest.NationalInsuranceNumber, sub(opt) opt.MapFrom(function(src) src.NINo)) _
            .ForMember(Function(dest) dest.DateOfBirth, Sub(opt) opt.MapFrom(function(src) src.BirthDate)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-14T20:54:49.593

```
 Mapper.CreateMap(Of Category, DTOCategory)() _
         .ForMember(Function(c) c.ID, Sub(opt) opt.Ignore()) _
         .ForMember(Function(c) c.NAME, Sub(opt) opt.Ignore()) 
```

# objective-c - 沙盒应用程序：以 MB/GB 为单位检索文件夹大小

> ID：14896775
> 
> 赞同：0
> 
> 时间：2013-02-15T14:24:49.590
> 
> 标签：objective-c, cocoa, sandbox

我想以 MB/GB 为单位找到给定路径的大小。我之前尝试过使用 NSFileManager，但由于应用程序沙盒（令人沮丧），每个结果都会变成零。有没有有效的方法？我想找到隐藏文件夹的大小。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:32:16.770

它是默认情况下您无权访问的路径，例如用户的主文件夹吗？然后，您需要通过显示她的标准打开对话框 (NSPanel) 来请求用户访问它。如果您想在启动之间保留此访问权限，则需要生成安全范围的书签并将其存储到该位置。

# gcc - gcc 不起作用

> ID：14896776
> 
> 赞同：-1
> 
> 时间：2013-02-15T14:24:54.453
> 
> 标签：gcc

我只是从另一个 Fedora 复制 gcc 并将其放入我的 Fedora。

在另一个 Fedora 中，如果我这样做：

```
./gcc
i586-meego-linux-gnu-gcc: no input files 
```

但对我来说，如果我这样做：

```
./gcc
//there is nothing 
```

有什么问题？我确定我是否这样做：文件 ./gcc 和 ldd ./gcc 和 ls -all ./gcc，它们是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:30:05.530

编译器应该适合您的计算机体系结构。如果您的计算机是 x86，并且您复制了另一台计算机，例如 i586 或 arm，它肯定无法正常运行。

# java - 将数组中的重复元素更改为 0，其他元素更改为 1

> ID：14896783
> 
> 赞同：-1
> 
> 时间：2013-02-15T14:25:17.200
> 
> 标签：java, arrays, algorithm

我想将数组的每个元素与其他元素进行比较。如果两个元素相等，则应将一个更改为 1，将另一个更改为 0。

我做错了什么？

```
package org.kodejava.example.io;

import java.util.Arrays;

public class Root {

    public static void main(String[] args) {
        System.out.println(Arrays.toString(arr()));
    }

    public static int[] arr() {
        int[] arc ={1,2,5,76,8,0,6,5,1,4,8,4,6,};

        for (int i=0;i<13;i++){
            for (int j=1;j<13;j++){

                if (arc[i] == arc[j] ) {

                    arc[i]=1;
                    arc[j]=0;

                }
                else { 
                    arc[i]=1;
                }
            }
        }

        return arc;
    }

} 
```

在这个例子中，我想得到这样的一行：`[1, 1, 1, 1, 1, 1, 1, 0, 0, 1...]`

但是，我的尝试以`[1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]`

提前致谢！

另一个例子，如果我们有一个序列，`[1,1,4,6]`那么最终结果应该是`[1,0,1,1]`. 因此，如果多次遇到该元素，则只有一个必须等​​于 1，其他必须等于 0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T15:09:35.460

也许这是您想要的功能：

```
public static int[] arr() {
    int[] arc ={1,2,5,76,8,0,6,5,1,4,8,4,6};

    for (int i=0;i<arc.length;i++){
        for (int j=i+1;j<arc.length;j++){

            if (arc[i] == arc[j] && arc[i] != 0) {
                arc[i]=1;
                arc[j]=0;
            }
        }

        if(arc[i] != 0) {
            arc[i] = 1;
        }
    }

    return arc;
} 
```

注意`arc.length`并`arc[i] != 0`检查内部循环从`i+1`.

**更新**

我重写了我的函数，以便它现在满足第一个 0 最终应该是 1 的条件。它现在将数组作为参数。有一些优化，因为如果相应索引上的元素已经为 0，内部循环将不会运行。

```
import java.util.Arrays;

public class Root {

    public static void main(String[] args) {
        int[] arc = {1,2,5,76,8,0,6,5,1,4,8,4,6};
        System.out.println(Arrays.toString(arr(arc)));
    }

    public static int[] arr(int[] arc) {
        int indexOfTheFirstZero = -1;

        // find the first 0 and store its index
        for (int i=0;i<arc.length;i++){
            if(arc[i] == 0) {
                indexOfTheFirstZero = i;
                break;
            }
        }

        // main loop
        for (int i=0;i<arc.length;i++){

            // need work only if item is not 0
            if(arc[i] != 0) {

                for (int j=i+1;j<arc.length;j++){
                    if (arc[i] == arc[j]) {
                        arc[j] = 0;
                    }
                }

                arc[i]=1;
            }
        }

        // change first 0 (if it exists) to 1
        if(indexOfTheFirstZero != -1) {
            arc[indexOfTheFirstZero] = 1;
        }

        return arc;
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T15:10:33.367

```
public static int[] arr() {
    int[] arc = {1, 1, 4, 6};
    int[] result = new int[arc.length];
    for (int i = 0; i < arc.length; i++) { // Changed 13 to arc.length
        result[i] = 1; // Suppose not duplicate until proven wrong
        for (int j = 0; j < i; j++) { // first element is 0, only need to check up to current elememt
            if (arc[i] == arc[j]) {
                result[i] = 0; // Found a duplicate. Element i should be zero   
//             arc[j]=0; No need to change arc[j]. 
                break; // No need to check the rest of the array
//         } else {  // The else is now unnecessary

            }
        }
    }
    return result;
} 
```

# node.js - 当 Node.js 发出某些东西时，将 iPhone 应用程序置于最前面

> ID：14896784
> 
> 赞同：0
> 
> 时间：2013-02-15T14:25:18.627
> 
> 标签：node.js, cordova

嗨，我正在使用`phonegap` 我的`Node.js`服务器开发一个 iPhone 应用程序，并且工作正常。

我设计了一个简单的聊天应用程序，它的工作也很好......

现在我想做的是，如果我按下`iPhone`应用程序上的圆形按钮，就会进入后台。它在后台运行时不断接收消息。当应用程序在后台运行时收到事件时，我想将此应用程序置于最前面（最大化）。

怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T14:29:06.697

你不能。这是简短的答案。

应用程序只能由用户购买到前台，大多数应用程序使用 PuchNotification 来提醒用户应用程序需要关注。

大多数应用程序无法在后台运行，它们在进入后台时会被挂起。VOIP、音频、位置和附件应用程序除外。

# php - 在 AJAX 响应中返回多个复选框

> ID：14896786
> 
> 赞同：0
> 
> 时间：2013-02-15T14:25:28.480
> 
> 标签：php, ajax, checkbox, responsetext

我有 2 个 php 页面，第 1 页包含（html + javascript + php 代码），第 2 页仅包含 php 代码。

因此，在 page1 内，有一个下拉列表包含许多值，如果我选择其中一个，AJAX 代码将值传递给 page2.php，如下所示：

如果我用下拉替换复选框输入，脚本可以完美运行，但在这种情况下，它不起作用。

目的是将 page2 的结果显示为 page1 上的复选框。任何想法？

Page1.php：

HTML 代码：

```
 <select onChange="getdids(this.value)" id="groupSelect" name="groupSelect" >
        <option value="0">xxx</option>
            <option value="1">yyy</option>
            <option value="2">zzz</option>
            <option value="3">vvv</option>
  </select> 

  <input type="checkbox" id="alldids" name="alldids" value="0">did<br> 
```

阿贾克斯代码：

```
 <script>
  function getdids(str)
  {
    if (str=="")
      {
       document.getElementById("alldids").innerHTML="";
       return;
      }
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
       {
        document.getElementById("alldids").innerHTML=xmlhttp.responseText;
       }
    }
  xmlhttp.open("GET","page1.php?groupName="+str,true);
  xmlhttp.send();
 }

 </script> 
```

页面2.php：

PHP代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Get dids</title>
    </head>

    <?php
    require_once('../functions.php');
    include('../variables.php');
    $didGrpName=$_GET['groupName'];
    $didGrpId=GroupId($table_groups,$didGrpName);
    $x=array();
    $x=showDidOfGroup($didGrpId);

    $i=1;
    while($i <= $x[$i]){ ?>
    <input type="checkbox" value="<?php echo $x[$i]; ?>"><?php echo $x[$i]; ?><br>
    <?php $i++; } ?>

    <body>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:32:39.023

您永远不会调用`getdids`您的复选框，并且一组复选框的值比（非多个）选择元素的值更复杂。

从复选框组构造 application/x-www-url-form-encoded 数据的算法是：

```
Create an empty array
For each "checkbox" in "group of checkboxes with same name":
    if checkbox.checked:
        append encodeURIComponent(name) + "=" + encodeURIComponent(checkbox.value) to array
JOIN array with "&" 
```

# android - 如何显示包含自定义 SurfaceView 的片段

> ID：14896798
> 
> 赞同：0
> 
> 时间：2013-02-15T14:26:25.590
> 
> 标签：android, android-layout, android-fragments, surfaceview

以下设置不起作用，有人知道原因吗（我似乎无法在片段中找到自定义表面视图的示例）。

我的 surfaceView 类目前只是空心的：

```
class MySurfaceView extends SurfaceView implements Runnable{

public MySurfaceView(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

@Override
public void run() {
    // TODO Auto-generated method stub

}

} 
```

我的片段 XML 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout2"
    android:layout_width="500dp"
    android:layout_height="600dp"
    android:layout_gravity="fill"
    android:background="#000000" >

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <com.example.android.fragments.MySurfaceView
        android:id="@+id/surfaceview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

    </LinearLayout> 
```

然后在我调用的 OnCreateView 上的实际 Fragment 本身中：

```
 return inflater.inflate(R.layout.article_view, container, false); 
```

任何想法为什么这不挂在一起？

它与 XML 有关，因为当我这样做时

```
<SurfaceView
    android:id="@+id/surfaceview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/> 
```

然后它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T11:39:03.727

如果您只想在片段中显示您的自定义 SurfaceView ('MySurfaceView')，那么只需执行以下操作：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return new MySurfaceView(getActivity());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:39:04.997

如果您检查，答案很简单：

[http://developer.android.com/guide/components/fragments.html#Creating](http://developer.android.com/guide/components/fragments.html#Creating)

您将看到在 onCreateView 上您应该返回 View 将用于呈现 Fragment

```
@Override
    public View onCreateView( String name , Context context , AttributeSet attrs )
    {
        // TODO Auto-generated method stub
        return super.onCreateView( name , context , attrs );
    } 
```

你应该返回 View 所以基本上你应该返回那里

```
MySurfaceView 
```

//编辑

```
public MySurfaceView ( Context context , AttributeSet attrs , int defStyle )
    {
        super( context , attrs , defStyle );
        // TODO Auto-generated constructor stub
    }

    public MySurfaceView ( Context context , AttributeSet attrs )
    {
        super( context , attrs );
        // TODO Auto-generated constructor stub
    }

    public MySurfaceView ( Context context )
    {
        super( context );
    } 
```

尝试实现此视图的所有 3 个构造函数

# asp.net - ASP NET 如何将事件从 ASPX 发送到 ASCX

> ID：14896805
> 
> 赞同：1
> 
> 时间：2013-02-15T14:26:39.260
> 
> 标签：asp.net, sitecore, sitecore6

我有一些旧的 sitecore asp net 应用程序。而且我发现在布局（aspx）上我有应该改变网站语言的 ImageButton 控件。

```
 protected void btnLanguage_Click(object sender, EventArgs e)
    {
        ImageButton flag = (ImageButton)sender;
        if (string.IsNullOrEmpty("") == false)
        {
           UserContext.CurrentCulture = LanguageManager.GetLanguage(flag.CommandArgument);                     
        }
        else
        {
            SC.Context.Language = LanguageManager.GetLanguage(flag.CommandArgument);
        }
    } 
```

但是我有很多控件应该在调用此事件后进行翻译。通过 asp 网页生活方式过程，这不是好的行为，但无论如何我需要用它做点什么。在我的情况下，最好的方法是什么？应该如何以正确的方式完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:30:04.113

Alistair Deneys 记录了如何使用事件来允许组件相互通信。值得了解这种机制，请查看 Alistair 的帖子[Decoupling Through the Sitecore Event Pool](http://adeneys.wordpress.com/2012/10/21/decoupling-through-the-sitecore-event-pool/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:54:21.577

如果这是一个 Sitecore 应用程序，那么只需让 Sitecore 处理它，将您的图像按钮更改为带有超链接的常规图像并传入语言参数（使用 LinkManager）：

`/en-CA/some-folder/some-page.aspx`

`/some-folder/some-page.aspx?sc_lang=en-CA`

然后，您可以根据以下内容设置系统文化`Sitecore.Context.Lanaguge`

这篇文章中的一些有用[信息](http://briancaos.wordpress.com/2010/03/12/multiple-languages-in-sitecore/)，也请参阅评论。

# c# - 匿名拉姆达？

> ID：14896807
> 
> 赞同：1
> 
> 时间：2013-02-15T14:26:41.773
> 
> 标签：c#

最接近下面的东西是什么？不幸的是，下面给我一个方法名称编译错误。

```
int val = delegate(string s)
{
    return 1;
}("test"); 
```

我也尝试了 (...)=>{...} 语法，但弄错了

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T14:28:56.767

两种形式的匿名函数（lambda 表达式和匿名方法）都需要转换为特定类型。所以这是有效的：

```
int val = ((Func<string, int>)(delegate(string s)
{
    return 1;
}))("test"); 
```

这是这样的：

```
int val = ((Func<string, int>)(s => 1))("test"); 
```

我实际上并不建议*使用*它们中的任何一个。使用单独的局部变量更具可读性：

```
Func<string, int> del = s => 1;
int val = del("test"); 
```

（根据 yBee 的回答，您也可以使用类似构造函数的语法 - 但我个人更喜欢 cast 风格的语法。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T14:30:38.527

```
new Func<string, int>(s => 1)("test") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-15T14:28:49.637

以下将编译：

```
int val = ((Func<string, int>)(s => 1))("test"); 
```

但这对我来说似乎不是很有用。

# mysql - 从子类别sql查询中获取项目

> ID：14896816
> 
> 赞同：1
> 
> 时间：2013-02-15T14:27:24.490
> 
> 标签：mysql, database, database-design

我有以下数据库结构：

```
[CATEGORY]
category_id
parent(default 0)
title

[PRODUCT]
product_id
title

[PRODUCT_TO_CATEGORY]
product_id
category_id 
```

**CATEGORY**的样本数据：

```
1   0   TV
2   1   PLASMA
3   1   LED
.   .   ... 
```

**产品**样本数据：

```
1   Sony
2   Sharp
3   Samsung
.   ... 
```

**PRODUCT_TO_CATEGORY**的示例数据：

```
1(Sony)    1(TV)
2(Sharp)   2(PLASMA)
3(Samsung) 2(PLASMA) 
```

首先我想问一下我的结构好不好。例如，我应该为每个产品分配类别和子类别 ID，还是单个类别效果好？

然后基于每个产品属于一个类别并且一个类别可能有一个或多个父类别的假设，我如何检索当前和每个子类别的产品？
例如，点击电视类别应列出索尼、夏普和三星，而不仅仅是索尼项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:34:25.627

> 父级（默认 0）

使用 NULL 而不是 0。这将允许您使用正确的 FOREIGN KEY（如下图所示）。

* * *

> 我应该为每个产品分配类别和子类别 ID

你不应该。只需分配适用于该产品的最具体的子类别。所有超类别都可以从`CATEGORY`表中定义的层次结构中推断出来，因此将它们（甚至其中之一）存储在产品中是多余的。

出于性能原因，有时可以证明这种冗余是合理的，但是您必须在它们与**数据一致性**之间取得平衡。在这种情况下，没有很好的声明方式来保持冗余数据与“主”数据同步——你必须通过触发器或（上帝保佑）应用程序代码来做到这一点，这样做可能会引入并发错误，除非您*非常非常*仔细地考虑您的锁定策略。

* * *

> 然后基于每个产品属于一个类别的假设......

这种假设使您的模型不正确。要正确建模这种 N:1 关系，您不需要联结表`PRODUCT_TO_CATEGORY`，您只需要产品和类别之间的外键：

![在此处输入图像描述](../Images/c18792a240f822409641442ab32c700c.png)

注意：`PRODUCT.CATEGORY_ID`如果您想允许无类别产品（即您的关系实际上是 N:0..1 而不是 N:1），请使 NULL-able。

你的数据看起来像：

```
CATEGORY:

1   TV      NULL
2   PLASMA  1
3   LED     1

PRODUCT:

1   Sony    1 (TV)
2   Sharp   2 (PLASMA)
3   Samsung 2 (PLASMA) 
```

* * *

> 如何检索当前和每个子类别的产品？

首先识别属于所需“子树”的所有类别，然后检索连接到它们的产品。在这种情况下，搜索所有电视可以这样完成：

1.  获取您正在搜索的“顶级”类别的 ID：1（电视）。

    `SELECT CATEGORY_ID FROM CATEGORY WHERE TITLE = 'TV'`

2.  获取所有子类别的 ID：2 (PLASMA) 和 3 (LED)。

    `SELECT CATEGORY_ID FROM CATEGORY WHERE PARENT_ID IN (1)`

3.  重复步骤 (2)，直到到达层次结构的“底部”：

    `SELECT CATEGORY_ID FROM CATEGORY WHERE PARENT_ID IN (2, 3)`

    上面的查询将为您的示例数据返回一个空结果集，因此您知道可以停止。在更精细的层次结构中，您可能需要多次重复上述查询，始终将 IN 列表替换为最近检索到的类别“层”。

    如果您的数据碰巧有一个循环，请注意无限迭代！

4.  将所有产品连接到任何已识别的类别：1 (TV)、2 (PLASMA) 和 3 (LED)。

    `SELECT * FROM PRODUCT WHERE CATEGORY_ID IN (1, 2, 3)`

不幸的是，MySQL 不支持那种允许您在单个数据库往返中完成所有这些的递归查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T22:37:56.183

阅读用于对产品进行分组的嵌套集。 [http://en.wikipedia.org/wiki/Nested_set_model](http://en.wikipedia.org/wiki/Nested_set_model)

它允许您在关系数据库中创建一个很好的结构来将产品分配给类别。比大多数人提出的典型的 child->parent 模型要好得多。

# entity-framework - 具有多个 Web 配置转换的实体框架迁移

> ID：14896821
> 
> 赞同：7
> 
> 时间：2013-02-15T14:27:40.650
> 
> 标签：entity-framework, asp.net-mvc-4, entity-framework-5

我在 Visual Studio 2010 中使用启用了迁移的 Entity Framework 5 创建了一个 ASP.NET MVC 4 项目。我有多个针对不同环境（调试、暂存、发布）的 Web 配置文件，它们将根据环境指定不同的数据库连接字符串。如何使用`Update-Database`包管理器控制台中的命令和多个配置文件来处理迁移？每次我运行此命令时，它默认为主 Web.config 连接字符串。感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-20T18:08:32.780

为了使事情尽可能简单，我在远程登台和生产服务器上运行迁移的方法是从包控制台运行以下命令（数据源和用户/密码将根据哪个服务器而改变我想针对）运行迁移：

```
Update-Database -Verbose -ConnectionString "Data Source=ServerName;Initial Catalog=db;User Id=user;Password=pass;" -ConnectionProviderName "System.Data.SqlClient" 
```

到目前为止，这对我有用，以防其他人正在寻找。多谢大家的评价。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:47:26.290

要迁移到不同的环境，您应该使用[Web 配置转换工具](http://msdn.microsoft.com/en-us/library/dd465318%28v=vs.100%29.aspx)，我认为这不是 Entity Framework Migrations 的责任。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T18:27:12.687

[http://msdn.microsoft.com/en-us/data/jj618307.aspx](http://msdn.microsoft.com/en-us/data/jj618307.aspx)

EF Code First Migrations 附带一个迁移工具，可让您通过命令提示符运行“更新”命令。

我不太确定您的设置方式，但我们做了类似的事情，通过 CI 服务器 (Jenkins) 部署代码。然后我添加了一个部署后步骤以通过命令行运行更新数据库。

它的优点是您也可以指定连接字符串。

同样，这完全取决于这如何适合您的流程，您甚至可以使用 Nant 为您执行此操作。

希望这可以帮助。

# loops - 简单循环查询

> ID：14896824
> 
> 赞同：0
> 
> 时间：2013-02-15T14:27:56.850
> 
> 标签：loops

我的大脑显然没有开动所有的气缸，但我正在研究一个程序来发现一个数字是否是素数。下面的循环有效，但我不明白为什么。如果素数(test[k]) 是 5 并且 i = 3；如果 3 * 3 > 5，为什么循环继续？

```
 int [] test = new int[] {15,14,2,3,19,70,7,9,11,12,13,14,21,23,0,107};
int test2 = 7;

for(int k= 0; k <test.length; k++)
{
    boolean IsPrime= true;
    if(test[k]==2)
    {
        System.out.println(test[k] + " is a prime number");
        IsPrime = true;
        continue;
    }

    else if (test[k] % 2 == 0)
    {
        IsPrime = false;
        System.out.println(test[k] + " is NOT a prime number");
        continue;
    }

    else
        {
            for(int i = 3; i * i <= test[k]; i+= 2)
            {
                System.out.println(i);
                if(test[k] % i == 0)
                {
                    IsPrime =false;
                }
            }
                if(IsPrime == true)
                System.out.println(test[k] + " is a prime number");

                else
                {
                    System.out.println(test[k] + " is NOT a prime number");
                }
        }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:46:51.490

循环不会继续，它确实按预期工作。
让我们看看 test[k] = 5 的代码：

```
1) IsPrime = true (Line: 7)
2)  if (test[k] == 2) is false
3)  else if (test[k] % 2 == 0) is false
4)  we are in the else
4.1) i = 3
4.2) i*i <= 5 ? false
4.3) It does not go in the loop!
4.4) Is Prime == true is true;
--End-- 
```

那么问题出在哪里？为什么你认为它会进入循环？

# django - Django：显示用户名而不是 ID，如何？

> ID：14896825
> 
> 赞同：4
> 
> 时间：2013-02-15T14:28:02.773
> 
> 标签：django, django-rest-framework

我有以下序列化程序类。

```
class ProfileSerializer(serializers.ModelSerializer):
    class Meta:
        model = Profile
        fields = ('id', 'name', 'active', 'type', 'user') 
```

列出所有配置文件时，用户字段会显示用户 ID。如何更改它以显示 user.username？我知道我的模型只是将它添加到我的元类中，但没有创建用户模型（它是 Django 的一部分）。调用用户时如何告诉 Django 显示用户名而不是 id？

非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T15:55:41.870

两种明显的方法可以解决这个问题：

首先，您可以使用`dotted.notation`强制字段的[源参数](http://django-rest-framework.org/api-guide/fields.html#core-arguments)而不是默认值。`user``user.username``user`

```
class ProfileSerializer(serializers.ModelSerializer):
    user = serializers.Field(source='user.username')

    class Meta:
        model = Profile
        fields = ('id', 'name', 'active', 'type', 'user') 
```

请注意，这`Field`是一个标准的只读字段，因此您将无法使用此序列化程序更新用户。

或者，如果您希望用户成为可写字段，则可以使用[SlugRelatedField](http://django-rest-framework.org/api-guide/relations.html#slugrelatedfield)像这样...

```
class ProfileSerializer(serializers.ModelSerializer):
    user = serializers.SlugRelatedField(slug_field='username')

    class Meta:
        model = Profile
        fields = ('id', 'name', 'active', 'type', 'user') 
```

如果您愿意，您也可以使用第二种方法，但使用只读字段，方法是添加`read_only=True`到`SlugField`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-10-19T21:20:51.483

这个线程很旧，但是由于我最近遇到了同样的问题，所以我想为其添加现代答案。我们必须像这样使用 DRF 的内置 SerializerMethodField()：

```
class ProfileSerializer(serializers.ModelSerializer):
  user = serializers.SerializerMethodField()

  def get_user(self, obj):
      return obj.user.username

  class Meta:
      model = Profile
      fields = ('id', 'name', 'active', 'type', 'user') 
```

# xtify - 如何使用 xtify 取消通知？

> ID：14896826
> 
> 赞同：1
> 
> 时间：2013-02-15T14:28:03.810
> 
> 标签：xtify

我正在使用 xtify 发送 GCM 通知。我通过 OnMessage 事件收到它，但我想保留此通知，对其进行修改并发送新通知。但是我收到了两个通知。如何取消第一个？

如果我决定不显示它，它会起作用。但是，如果我显示我的通知，则会出现这两个。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:53:53.740

如果您想通过 OnMessage 接收通知数据，然后显示通知（不显示 SDK 默认通知），您只需将通知操作设置为 NONE（在 API 或网站中），例如：

**网址：** [http ://api.xtify.com/2.0/push](http://api.xtify.com/2.0/push)

**内容类型：** `application/json`

HTTP 实体主体：

```
{
    "apiKey": "xxxxxx-xxxxx-xxxx-xxxxx",
    "appKey": "xxxxxx-xxxxx-yyyy-xxxxx",
    "xids": ["xxxxxxxxxxxxxxxxxx"],
    "sendAll": true,
    "content": {
        "subject": "Greetings Earthlings",
        "message": "Take me to your leader",
        "action": {
            "type": "NONE" // All visual and audible alerts will be suppressed
        }
    }
} 
```

所有动作的行为都记录[在这里](http://developer.xtify.com/display/APIs/Push+API+2.0)：

> **NONE**：将抑制所有视觉和听觉警报。使用此功能将数据发送到应用程序而不会中断用户。

# json - 播放 2.1 Scala - JSON - 具有嵌套数据结构的对称格式对象未正确序列化

> ID：14896827
> 
> 赞同：0
> 
> 时间：2013-02-15T14:28:05.713
> 
> 标签：json, scala, playframework-2.1

我在 Play 2.1 Scala 中为某些 JSON 编写 Format 对象时遇到了一些麻烦。我的（大大简化的）JSON 看起来像这样：

```
{
  "id": "id-1",
  "data": {
    "foo": "teststr1",
    "bar": "teststr2"
  }
} 
```

我想将其序列化/反序列化为稍微简单的扁平格式：

```
case class TestData(id: String, foo: String, bar: String) 
```

我最初的尝试是这样的：

```
implicit val testCaseFormat: Format[TestData] = (
  (__ \ "id").format[String] and
  (__ \ "data" \ "foo").format[String] and
  (__ \ "data" \ "bar").format[String]
)(TestData.apply, unlift(TestData.unapply)) 
```

这在*读取*`bar`数据时工作正常，但在输出 JSON 中仅写入最后一个“数据”值 ( ) 时，可能是因为`data`每个后续值都覆盖了该对象：

```
{
   "id" : "id-1",
   "data":{
     "bar":"teststr2"
   }
 } 
```

有没有正确的方法来进行这种扁平化和非扁平化，而不诉诸分离`Reads`和`Writes`对象？我的实际数据结构非常大（虽然不太复杂），所以简洁性很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T11:24:45.497

如果我理解正确，您可以/应该以常规方式创建您的格式：

```
(__ \ "id").format[String] and
(__ \ "data").format(
  (__ \ "foo").format[String] and
  (__ \ "bar").format[String]
  tupled
) 
```

然后只是提供不同`apply`的`unapply`方法。

```
def specialApply(data:(String, (String, String))) = {
  val(id, (foo, bar)) = data
  TestData(id, foo, bar)
}

def specialUnapply(data:TestData):Option[(String, (String, String))] =
  Option(data) map { testData =>
    (testData.id, (testData.foo, testData.bar))
  } 
```

## 编辑

您可以通过组合 apply 和 unapply 方法来避免将方法添加到伴随对象：

```
implicit val testCaseFormat: Format[TestData] = (
    // ...
)(TestData.tupled.compose { data:(String, (String, String)) => 
    val (id, (foo, bar)) = data
    (id, foo, bar)
  }), unlift(TestData.unapply)) 
```

# c++ - 有没有像 Dependency Walker 这样的工具可以在 Windows CE 6.5 移动设备上运行？

> ID：14896829
> 
> 赞同：0
> 
> 时间：2013-02-15T14:28:13.520
> 
> 标签：c++, dll, dependencies, windows-ce, windows-mobile-6.5

我正在尝试将应用程序从 eMbedded Visual C++ 4.0 移植到 Visual Studio 2008，并尝试让它与 Windows Embeded Handheld (6.5 Professional) 一起使用。

我已经修复了所有编译器错误，但是现在我遇到了一个错误，当 VS2008 尝试在设备上部署的 exe 上运行调试模式时会弹出一个错误。我收到错误消息：`Unable to start program '%CSIDL_PROGRAM_FILES%\APP_NAME\APP.exe'. An error occurred that usually indicates a corupt installation (code 0x8007007e). If the problem persists, repair your visual studio installation via 'Add or Remove Programs' in your Control Panel`

这显然是与缺少 DLL 文件相关的错误，我已经找到并修复了几个，但似乎还有更多。我想知道是否有像 Dependency Walker 这样的工具可以在 Windows CE 6.5 移动设备上运行。这将使查找丢失的 DLL 变得更加容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:19:23.697

如果这确实是一个依赖问题，您会在运行 PEInfo 的设备上找到它（免费软件：[http](http://s-k-tools.com/index.html?m_util.html) ://sk-tools.com/index.html?m_util.html ）。将PEInfo复制/安装到设备，然后启动它并选择文件/打开并打开exe文件。PEInfo 检查导入并验证引用的 DLL 的加载（可加载）。PEInfo 确实是一个很好的免费软件工具来分析此类负载问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:13:03.060

我不知道，但桌面上的depends.exe 可以检查设备文件。当它遇到 coredll.dll 依赖时，它通常会感到困惑，但你知道 coredll 对其他任何东西都没有依赖，所以这不是问题。

# python - Web.py 守护进程通信

> ID：14896832
> 
> 赞同：1
> 
> 时间：2013-02-15T14:28:21.127
> 
> 标签：python, web.py

我尝试使用 web.py 创建一个 Web 服务器，以便与守护进程通信。

目标是通过 HTTP 向我的 web.py 发送命令（在我的主守护进程打开的线程中执行）；然后使用管道将命令传输到我的主程序。

最终的程序会有几个进程和线程，web.py 接口将是软件的入口点。

我的问题是 web.py 为每个请求实例化一个新类，所以我找不到将管道传递给请求处理程序的简单方法。我尝试使用钩子或处理器，但它似乎不起作用。

有人成功将对象传递给 web.py 处理程序吗？或者有没有办法将对象存储在网络对象的某个地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:45:04.980

我找到了解决方案，但在文档中并不清楚。

我刚刚使用 web.ctx 创建了一个 load_hook 来存储我的对象：

```
def load_hook():
    web.ctx.pipe = input_p

app = web.application(urls, globals())
    app.add_processor(web.loadhook(load_hook))
    app.run() 
```

然后我可以在我的所有课程中访问 web.ctx.pipe。做起来很简单，但在文档中很难找到。

# c# - MVC如何在IF语句后返回视图

> ID：14896833
> 
> 赞同：1
> 
> 时间：2013-02-15T14:28:32.827
> 
> 标签：c#, asp.net-mvc

我的页面有一个搜索框，其中有几个单选按钮。根据选择的单选按钮将取决于显示的视图。

但是，我不知道如何返回视图。

我的代码是

```
 public ActionResult Index(string jobType)
    {
        if (jobType.ToLower() == "this")
            CandidateResults();
        else
            JobResults();
    }

    private ActionResult CandidateResults()
    {
        var model = //logic
        return View(model);
    }
    private ActionResult JobResults()
    {
        var model = //logic
        return View(model);
    } 
```

但这不会在屏幕上显示任何内容（白页）。这是有道理的，但我**不想**返回索引，我想返回一个新页面（称为 JobResults 或 Candidates）并为这两个新页面创建一个视图，但是当我右键单击我的方法时（JobResults() 或Candidates()) 我没有添加视图的选项。

在这个阶段我迷路了，任何人都可以提供建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:31:19.927

从 Index 返回视图或重定向到 CandidateResults 或 JobResults 操作。

```
public ActionResult Index(string jobType)
{
    if (jobType.ToLower() == "this")
        return CandidateResults();
    else
        return JobResults();
}

private ActionResult CandidateResults()
{
    var model = //logic
    return View(model);
}
private ActionResult JobResults()
{
    var model = //logic
    return View(model);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T14:34:13.867

尝试这个

```
public ActionResult Index(string jobType)
{
    return (jobType.ToLower() == "this") ?
        RedirectToAction("CandidateResults") :
        RedirectToAction("JobResults");
}

private ActionResult CandidateResults()
{
    var model = //logic
    return View(model);
}
private ActionResult JobResults()
{
    var model = //logic
    return View(model);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T14:35:01.543

在您的私有方法中，您必须指定要显示的实际视图。

```
public ActionResult Index(string jobType)
{
    if (jobType.ToLower() == "this")
        CandidateResults();
    else
        JobResults();
}

private ActionResult CandidateResults()
{
    var model = //logic
    return View("CandidateResults", model);
}
private ActionResult JobResults()
{
    var model = //logic
    return View("JobResults", model);
} 
```

发生这种情况是因为视图引擎的工作方式。当前请求的动作名称总是`Index`在调用索引函数时。即使您调用另一个方法，视图引擎也会使用当前操作的名称，而不是当前正在执行的函数的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T14:34:45.317

只需要将用户重定向到正确的控制器方法，该方法将返回`View`如下：

```
public ActionResult Index(string jobType)
    {
        if (jobType.ToLower() == "this")
            return RedirectToAction("CandidateResults","ControllerName");
        else
            return RedirectToAction("JobResults","ControllerName");
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T14:42:10.377

```
public ActionResult Index(string jobType)
{
    if (jobType.ToLower() == "this")
        return RedirectToAction("CandidateResults");

    return RedirectToAction("JobResults");
}

private ActionResult CandidateResults()
{
    var model = //logic
    return View(model);
}
private ActionResult JobResults()
{
    var model = //logic
    return View(model);
} 
```

# c++ - 包装 unordered_map 以构建不可修改（不可变）的地图

> ID：14896841
> 
> 赞同：2
> 
> 时间：2013-02-15T14:28:54.557
> 
> 标签：c++, unordered-map, container-data-type

我正在玩容器类型，更多地了解细节并尝试构建一个不可修改（或不可变）的地图。

为此，我构建了某种类似于复制构造函数的方法，将来自另一个 unordered_map 的所有元素添加到我的 UnmodifiableMap（它基本上是 std::unordered_map 的包装器）中。为了使其不可修改，我只提供了 const 迭代器和只读方法。但是我被构造函数卡住了，我确定我错过了一些东西，也许有人可以在这里指出我的问题。也许这是一个完全错误的方式，但他是迄今为止尝试过的：

```
template <typename Key, typename T,
    typename HashFcn = std::hash<Key>,
    typename EqualKey = std::equal_to<Key>,
    typename Alloc = std::allocator<std::pair<const Key, T> > > 
class UnmodifiableMap {
public:
    // The actual data
    typedef std::unordered_map<T, Key, HashFcn, EqualKey> base;

    typedef Key key_type;
    typedef T data_type;
    typedef T mapped_type;
    typedef std::pair<const key_type, data_type> value_type;
    typedef HashFcn hasher;
    typedef EqualKey key_equal;
    typedef Alloc allocator_type;

    typedef typename base::size_type size_type;
    typedef typename base::const_iterator const_iterator;
    typedef typename base::iterator iterator;

private:
    base _map;

    /**
     * Constructs an empty unordered_map 
     */
    UnmodifiableMap(
        size_type n = 0, const hasher& hf = hasher(),
        const key_equal& eql = key_equal(),
        const allocator_type &alloc = allocator_type())
            : _map(n, hf, eql, alloc) {}

public:
    /** Constructs a copy of unordered_map */
    UnmodifiableMap(const base& other)
    : _map(static_cast<const base&>(other)) {}

    ~UnmodifiableMap() {}   

    iterator begin() { return _map.begin(); }
    iterator end() { return _map.end(); }
    const_iterator begin() const { return _map.begin(); }
    const_iterator end() const { return _map.end(); }

    bool empty() const { return _map.empty(); }

    bool contains(const key_type& key) const { 
        return _map.find(key) != _map.end(); }
}; 
```

这里是主体：

```
int main(int argc, char **argv) {
    typedef std::unordered_map<int, std::string> Items;
    Items map;

    map[1] = "first string";
    map[4] = "string 4";
    map[5] = "string 5";
    map[22] = "string 22";
    map[12] = "string 12";
    map[18] = "string 18";

    typedef UnmodifiableMap<int, std::string> ReadOnlyItems;
    ReadOnlyItems readonlymap(map);

    return 0;
} 
```

我得到的错误是

```
Unmodifiable_map.cpp: In function ‘int main(int, char**)’:
Unmodifiable_map.cpp:56:25: error: no matching function for call to ‘UnmodifiableMap<int, std::basic_string<char> >::UnmodifiableMap(Items&)’
Unmodifiable_map.cpp:56:25: note: candidates are:
Unmodifiable_map.h:45:2: note: UnmodifiableMap<Key, T, HashFcn, EqualKey, Alloc>::UnmodifiableMap(const base&) [with Key = int, T = std::basic_string<char>, HashFcn = std::hash<int>, EqualKey = std::equal_to<int>, Alloc = std::allocator<std::pair<const int, std::basic_string<char> > >, UnmodifiableMap<Key, T, HashFcn, EqualKey, Alloc>::base = std::unordered_map<std::basic_string<char>, int, std::hash<int>, std::equal_to<int>, std::allocator<std::pair<const std::basic_string<char>, int> > >]
Unmodifiable_map.h:45:2: note:   no known conversion for argument 1 from ‘Items {aka std::unordered_map<int, std::basic_string<char> >}’ to ‘const base& {aka const std::unordered_map<std::basic_string<char>, int, std::hash<int>, std::equal_to<int>, std::allocator<std::pair<const std::basic_string<char>, int> > >&}’
Unmodifiable_map.h:37:2: note: UnmodifiableMap<Key, T, HashFcn, EqualKey, Alloc>::UnmodifiableMap(UnmodifiableMap<Key, T, HashFcn, EqualKey, Alloc>::size_type, const hasher&, const key_equal&, const allocator_type&) [with Key = int, T = std::basic_string<char>, HashFcn = std::hash<int>, EqualKey = std::equal_to<int>, Alloc = std::allocator<std::pair<const int, std::basic_string<char> > >, UnmodifiableMap<Key, T, HashFcn, EqualKey, Alloc>::size_type = long unsigned int, UnmodifiableMap<Key, T, HashFcn, EqualKey, Alloc>::hasher = std::hash<int>, UnmodifiableMap<Key, T, HashFcn, EqualKey, Alloc>::key_equal = std::equal_to<int>, UnmodifiableMap<Key, T, HashFcn, EqualKey, Alloc>::allocator_type = std::allocator<std::pair<const int, std::basic_string<char> > >]
Unmodifiable_map.h:37:2: note:   no known conversion for argument 1 from ‘Items {aka std::unordered_map<int, std::basic_string<char> >}’ to ‘long unsigned int’
Unmodifiable_map.h:14:7: note: UnmodifiableMap<int, std::basic_string<char> >::UnmodifiableMap(const UnmodifiableMap<int, std::basic_string<char> >&)
Unmodifiable_map.h:14:7: note:   no known conversion for argument 1 from ‘Items {aka std::unordered_map<int, std::basic_string<char> >}’ to ‘const UnmodifiableMap<int, std::basic_string<char> >&’
Unmodifiable_map.h:14:7: note: UnmodifiableMap<int, std::basic_string<char> >::UnmodifiableMap(UnmodifiableMap<int, std::basic_string<char> >&&)
Unmodifiable_map.h:14:7: note:   no known conversion for argument 1 from ‘Items {aka std::unordered_map<int, std::basic_string<char> >}’ to ‘UnmodifiableMap<int, std::basic_string<char> >&&’ 
```

希望有人可以对此有所了解。另外我认为我需要在复制构造函数中做更多的事情，适当地复制元素（如`swap`函数）和`operator=`?!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:42:06.053

您正在交换包装类中的类型定义`T`和类型定义中的角色：`Key``base`

```
template <typename Key, typename T,
    typename HashFcn = std::hash<Key>,
    typename EqualKey = std::equal_to<Key>,
    typename Alloc = std::allocator<std::pair<const Key, T> > > 
class UnmodifiableMap {
public:
    // typedef std::unordered_map<T, Key, HashFcn, EqualKey> base; // ERROR
    typedef std::unordered_map<Key, T, HashFcn, EqualKey> base; // OK
    ... 
```

因此，您的底层映射最终是 a`unordered_map<string, int>`而不是 a `unordered_map<int, string>`，并且编译器会抱怨不匹配。

另请注意，`static_cast`您的构造函数中有一个不必要的：

```
UnmodifiableMap(const base& other)
// : _map(static_cast<const base&>(other)) {} // NOT NEEDED. Just do:
   : _map(other) {} 
```

# git - 有人可以帮我理解 git 和 svn 中差异的含义吗

> ID：14896853
> 
> 赞同：-5
> 
> 时间：2013-02-15T14:29:35.687
> 
> 标签：git, svn, diff

这是我得到的差异输出

```
diff --git a/README.md b/README.md
index cda48bc..95ce355 100644
--- a/README.md
+++ b/README.md
@@ -1,3 +1,3 @@
 THIS IS LINE 1
-THIS IS LINE 2
+THIS IS LINE X
 THIS IS LINE 3 
```

工作区中的文件如下所示

```
 THIS IS LINE 1
 THIS IS LINE X
 THIS IS LINE 3 
```

暂存文件如下所示

```
 THIS IS LINE 1
 THIS IS LINE 2
 THIS IS LINE 3 
```

那么以下是什么意思...我真的不明白 diff 输出

```
diff --git a/README.md b/README.md
index cda48bc..95ce355 100644
--- a/README.md
+++ b/README.md
@@ -1,3 +1,3 @@
 THIS IS LINE 1
-THIS IS LINE 2
+THIS IS LINE X
 THIS IS LINE 3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T14:33:38.983

统一差异的格式和含义[在 Wikipedia 上有很好的解释](http://en.wikipedia.org/wiki/Diff#Unified_format)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T14:33:14.480

你可以这样读：

- 这是第 2 行

+这是第 X 行

在第一个文件中，“这是第 2 行”这一行不存在，而是由“这是第 X 行”代替。

# jquery - jQuery选择框验证

> ID：14896854
> 
> 赞同：17
> 
> 时间：2013-02-15T14:29:38.897
> 
> 标签：jquery, jquery-validate

我在 jQuery 中有以下代码。当元素
的选项值为“0”时，我需要显示验证消息“需要年份”。`select`

```
<script type="text/javascript">
$(document).ready(function () {
   $("#register").validate({
       debug: true,
       rules: {
           year: {
               required: function () {
                   if ($("#year option[value='0']")) {
                       return true;
                   } else {
                       return false;
                   }
               }
           }
       },
       messages: {
           year: "Year Required",
       },
   });
})
</script> 
```

选择框

```
<select name="year"  id="year">
    <option value="0">Year</option>
    <option value="1">1919</option>
    <option value="2">1920</option>
    <option value="3">1921</option>
    <option value="4">1922</option>
</select> 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-15T21:45:16.460

由于您无法`value=""`在第一个中设置，因此您需要使用[内置](http://docs.jquery.com/Plugins/Validation/Validator/addMethod)[方法](http://docs.jquery.com/Plugins/Validation/Validator/addMethod)`option`创建自己的规则。[`addMethod()`](http://docs.jquery.com/Plugins/Validation/Validator/addMethod)

**jQuery** :

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        rules: {
            year: {
                selectcheck: true
            }
        }
    });

    jQuery.validator.addMethod('selectcheck', function (value) {
        return (value != '0');
    }, "year required");

}); 
```

**HTML**：

```
<select name="year">
    <option value="0">Year</option>
    <option value="1">1955</option>
    <option value="2">1956</option>
</select> 
```

**工作演示：http: [//jsfiddle.net/tPRNd/](http://jsfiddle.net/tPRNd/)**

* * *

**原答案：（** 只有你可以`value=""`在第一个内设置`option`）

要使用 jQuery Validate 插件正确验证`select`元素，只需要第一个`option`包含`value=""`. 所以删除`0`from`value="0"`并且它是固定的。

**jQuery** :

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        rules: {
            year: {
                required: true,
            }
        }
    });

}); 
```

**HTML**：

```
<select name="year">
    <option value="">Year</option>
    <option value="1">1955</option>
    <option value="2">1956</option>
</select> 
```

**演示：http: [//jsfiddle.net/XGtEr/](http://jsfiddle.net/XGtEr/)**

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-15T16:00:04.550

要将要求规则放在选择列表上，您只需要***一个具有空值的选项***

```
<option value="">Year</option> 
```

那么只需要自己申请就足够了

```
<script>
    $(function () {
        $("form").validate();
    });
</script> 
```

有形式

```
<form>
<select name="year" id="year" class="required">
    <option value="">Year</option>
    <option value="1">1919</option>
    <option value="2">1920</option>
    <option value="3">1921</option>
    <option value="4">1922</option>
</select>
<input type="submit" />
</form> 
```

**[小提琴在这里](http://jsfiddle.net/rm5X2/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T09:53:19.017

[http://docs.jquery.com/Plugins/Validation/Methods/required](http://docs.jquery.com/Plugins/Validation/Methods/required)

如下编辑“选择”的代码，以检查选择列表中的 0 或空值选择

```
case 'select':
var options = $("option:selected", element);
return (options[0].value != 0 && options.length > 0 && options[0].value != '') && (element.type == "select-multiple" || ($.browser.msie && !(options[0].attributes['value'].specified) ? options[0].text : options[0].value).length > 0); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-13T04:09:10.977

Jquery Select Box Validation.You 可以根据您的要求通过警报或将消息放入 Div 中的警报消息。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="message"></div>
<form method="post">
<select name="year"  id="year">
    <option value="0">Year</option>
    <option value="1">1919</option>
    <option value="2">1920</option>
    <option value="3">1921</option>
    <option value="4">1922</option>
</select>
<button id="clickme">Click</button>
</form>
<script>
$("#clickme").click(function(){

if( $("#year option:selected").val()=='0'){

alert("Please select one option at least");

  $("#message").html("Select At least one option");

}

});

</script>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T14:45:18.027

稍微简化一下，用逗号修复一些会炸毁一些浏览器的问题：

```
 $(document).ready(function () {
       $("#register").validate({
           debug: true,
           rules: {
               year: {
                   required: function () {
                       return ($("#year option:selected").val() == "0");
                   }
               }
           },
           messages: {
               year: "Year Required"
           }
       });
   }); 
```

跳到一个假设，你的选择应该没有这个属性`validate="required:true"`吗？

# c# - async/await 是否适用于 IO 和 CPU 绑定的方法？

> ID：14896856
> 
> 赞同：43
> 
> 时间：2013-02-15T14:29:42.290
> 
> 标签：c#, asynchronous, async-await, c#-5.0

MSDN 文档似乎声明`async`并`await`适用于 IO-bound 任务，而`Task.Run`应该用于 CPU-bound 任务。

我正在开发一个应用程序，该应用程序执行 HTTP 请求以检索 HTML 文档，然后对其进行解析。我有一个看起来像这样的方法：

```
public async Task<HtmlDocument> LoadPage(Uri address)
{
    using (var httpResponse = await new HttpClient().GetAsync(address)) //IO-bound
    using (var responseContent = httpResponse.Content)
    using (var contentStream = await responseContent.ReadAsStreamAsync())
        return await Task.Run(() => LoadHtmlDocument(contentStream)); //CPU-bound
} 
```

这是对 and 的好和合适的使用`async`，`await`还是我过度使用它？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-15T20:20:46.957

已经有两个很好的答案，但是要添加我的 0.02 ......

如果您正在谈论*使用*异步操作，那么`async`/`await`对 I/O 密集型和 CPU 密集型都非常有效。

我认为 MSDN 文档确实略微倾向于*生成*异步操作，在这种情况下，您确实希望将`TaskCompletionSource`（或类似的）用于 I/O-bound 和`Task.Run`（或类似的）用于 CPU-bound。创建初始`Task`包装器后，最好由and*使用*它。`async``await`

对于您的特定示例，这实际上取决于需要多少时间`LoadHtmlDocument`。如果删除`Task.Run`，您将在调用的同一上下文中执行它`LoadPage`（可能在 UI 线程上）。Windows 8 指导方针规定，任何超过 50 毫秒的操作都应进行`async`......请记住，您的开发人员机器上的 50 毫秒可能在客户端机器上更长......

所以如果你能保证`LoadHtmlDocument`运行时间少于 50ms，你可以直接执行它：

```
public async Task<HtmlDocument> LoadPage(Uri address)
{
  using (var httpResponse = await new HttpClient().GetAsync(address)) //IO-bound
  using (var responseContent = httpResponse.Content)
  using (var contentStream = await responseContent.ReadAsStreamAsync()) //IO-bound
    return LoadHtmlDocument(contentStream); //CPU-bound
} 
```

但是，我建议`ConfigureAwait`@svick 提到：

```
public async Task<HtmlDocument> LoadPage(Uri address)
{
  using (var httpResponse = await new HttpClient().GetAsync(address)
      .ConfigureAwait(continueOnCapturedContext: false)) //IO-bound
  using (var responseContent = httpResponse.Content)
  using (var contentStream = await responseContent.ReadAsStreamAsync()
      .ConfigureAwait(continueOnCapturedContext: false)) //IO-bound
    return LoadHtmlDocument(contentStream); //CPU-bound
} 
```

使用`ConfigureAwait`，如果 HTTP 请求没有立即（同步）完成，那么这将（在这种情况下）导致`LoadHtmlDocument`在线程池线程上执行而无需显式调用`Task.Run`.

如果您对`async`这个级别的性能感兴趣，您应该查看 Stephen Toub 的[视频](http://channel9.msdn.com/Events/BUILD/BUILD2011/TOOL-829T)和[MSDN 文章](http://msdn.microsoft.com/en-us/magazine/hh456402.aspx)关于该主题。他有大量有用的信息。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-15T15:39:03.083

它适用于`await`任何异步操作（即由 a 表示`Task`）。

关键是对于 IO 操作，只要有可能，您都希望使用提供的方法，即，在它的核心，异步，而不是使用`Task.Run`阻塞同步方法。如果您在执行 IO 时阻塞了一个线程（甚至是线程池线程），那么您就没有利用`await`模型的真正力量。

一旦您创建了一个`Task`代表您的操作的操作，您就不再关心它是否受 CPU 或 IO 限制。对于调用者来说，这只是一些需要`await`-ed 的异步操作。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-02-15T16:03:33.437

有几件事情需要考虑：

*   在 GUI 应用程序中，您希望在 UI 线程上执行尽可能少的代码。在这种情况下，将 CPU 绑定操作卸载到另一个线程使用`Task.Run()`可能是一个好主意。尽管您的代码的用户可以自己执行此操作，如果他们愿意的话。
*   在像 ASP.NET 应用程序中，没有 UI 线程，您只关心性能。在这种情况下，使用`Task.Run()`而不是直接运行代码会有一些开销，但如果操作实际上需要一些时间，这应该不会很重要。（此外，返回同步上下文会产生一些开销，这也是为什么您应该在库代码中使用`ConfigureAwait(false)`大多数s 的另一个原因。）`await`
*   如果你的方法是异步的（顺便说一句，它也应该反映在方法的名称中，而不仅仅是它的返回类型），人们会期望它不会阻塞同步上下文线程，即使对于 CPU 密集型工作也是如此。

考虑到这一点，我认为`await Task.Run()`在这里使用是正确的选择。它确实有一些开销，但也有一些优势，这可能很重要。

# javascript - 使用 CF8 或 JS 根据选择框中的 2 个选项自动填充输入表单域

> ID：14896858
> 
> 赞同：0
> 
> 时间：2013-02-15T14:29:43.613
> 
> 标签：javascript, coldfusion, coldfusion-8

我对开发比较陌生，主要使用 MSSQL '05 作为我的 DBMS，ColdFusion 8 用于处理和标记。当用户从下拉（选择）菜单中设置某个选项时，我需要动态填写（简单文本/输入类型）字段。该值来自数据库中的单个记录。我找到并成功修改了这段代码：

[http://jsfiddle.net/zunrk/](http://jsfiddle.net/zunrk/)

然而，这只适用于一维数组......在我的应用程序的上下文中，我需要一个二维数组或一个相当大的代码块`cfif`，`cfswitch`这将打破一个基本规则，DRY 此外，`cfif`代码不允许场的动态变化（反正我不知道）

我更喜欢 JS 解决方案，因为 a）我已经在使用它，并且 b）想学习更多 JS。我也愿意接受有关如何重新排列此代码（尤其是设置数组元素）以使其更紧凑和可读的指针。我对 JS 真的不是很舒服，但我觉得在 CF 方面相当有能力。

我相信我已经包含了我的代码的所有相关部分，但是如果您想查看更多信息，请在回复中告诉我，我会发布其余部分。提前谢谢你，SOers！

PS：为了清楚起见，我想我也应该解释一下业务逻辑。该数据库是在我在这里开始之前构建的，并且在设计时并未考虑索引“位置”和“类型”变量。这个想法是，例如，用户正在区域设置“West”（[2]）进行类型“hair”（[3]）的测试，并希望将“amt”表单字段填写为一旦他们输入这两个标准。因此代码应将 'amt' 设置为 LOC[2][3] 或直接设置为`#rsf.phr#`.

代码：

```
<query name="rsf" datasource="test">  
  SELECT * FROM fees WHERE company = '#trim(rsc.clientname)#'  
</cfquery>

 <script type="text/javascript">
  var LOC = new Array(6);
  for (var i=0; i < 6; i++){
    LOC[i] = new Array(8);
  }

<cfoutput>
  LOC[0][0] = "";
  LOC[0][1] = "#rsf.pua#";
  LOC[0][2] = "#rsf.pba#";
  LOC[0][3] = "#rsf.phr#";
  LOC[0][4] = "#rsf.pbld#"; 
  LOC[0][5] = "#rsf.pdna#"; 
  LOC[0][6] = "#rsf.ppt#"; 
  LOC[0][7] = "#rsf.pphy#";
  LOC[1][0] = "";
  LOC[1][1] = "#rsf.pua#";
  LOC[1][2] = "#rsf.pba#";
  LOC[1][3] = "#rsf.phr#";
  LOC[1][4] = "#rsf.pbld#"; 
  LOC[1][5] = "#rsf.pdna#"; 
  LOC[1][6] = "#rsf.ppt#"; 
  LOC[1][7] = "#rsf.pphy#";
  LOC[2][0] = "";
  LOC[2][1] = "#rsf.pua#";
  LOC[2][2] = "#rsf.pba#";
  LOC[2][3] = "#rsf.phr#";
  LOC[2][4] = "#rsf.pbld#"; 
  LOC[2][5] = "#rsf.pdna#"; 
  LOC[2][6] = "#rsf.ppt#"; 
  LOC[2][7] = "#rsf.pphy#";
  LOC[3][0] = "";
  LOC[3][1] = "#rsf.pua#";
  LOC[3][2] = "#rsf.pba#";
  LOC[3][3] = "#rsf.phr#";
  LOC[3][4] = "#rsf.pbld#"; 
  LOC[3][5] = "#rsf.pdna#"; 
  LOC[3][6] = "#rsf.ppt#"; 
  LOC[3][7] = "#rsf.pphy#";
  LOC[4][0] = "";
  LOC[4][1] = "#rsf.mpua#";
  LOC[4][2] = "#rsf.mpba#";
  LOC[4][3] = "#rsf.mphr#";
  LOC[4][4] = "#rsf.mpbld#"; 
  LOC[4][5] = "#rsf.mpdna#"; 
  LOC[4][6] = "#rsf.mppt#"; 
  LOC[4][7] = "#rsf.mpphy#";
  LOC[5][0] = "";
  LOC[5][1] = "#rsf.cpua#";
  LOC[5][2] = "#rsf.cpba#";
  LOC[5][3] = "#rsf.cphr#";
  LOC[5][4] = "#rsf.cpbld#"; 
  LOC[5][5] = "#rsf.cpdna#"; 
  LOC[5][6] = "#rsf.cppt#"; 
  LOC[5][7] = "#rsf.cpphy#";
</cfoutput>  

  function LOC(){
    x = document.getElementById("location");
  }

  function CHOICE(){
    y = document.getElementById("type");
      document.getElementById("LOC").value = LOC[x.selectedIndex][y.selectedIndex];
  }

</script>

  <tr>
    <td><br><b>Encounter Information:</b></td>    
  </tr>
<cfoutput>  
  <tr><td style="vertical-align:top">

    CoC:<input type="text" name="coc" size="10" maxlength="20" value="">
    Auth. No.:&nbsp;<input type="text" name="auth" size="10" maxlenght="20" value="">
    Reason:<select name="reason" id="reason">
        <option value="Pre-Emp">Pre-Employment</option>
        <option value="Random">Random</option>
        <option value="Post Acc.">Post-Accident</option>
        <option value="RTD">RTD(Return-to-Duty)</option>
        <option value="Reason. Sus">Reasonable Suspicion</option>
        <option value="Personal">Personal</option> </select>
    Type:<select name="type" id="type" onChange="CHOICE();">
        <option value="0"></option>
        <option value="1">UA</option>
        <option value="2">BA</option>
        <option value="3">Hair</option>
        <option value="4">Blood</option>
        <option value="5">DNA</option>
        <option value="6">Paternity</option>
        <option value="7">Physical</option></select><br>
    Amt:$<input type="text" id="TP" name="amt">
    <form>
      <input type="checkbox" name="obs" value="Y"><em>Observed</em>
      <input type="checkbox" name="dot" value="Y"><em>DOT</em>    
    &nbsp;&nbsp;&nbsp;&nbsp;    
    Location:<select name="location" id="location" onChange="LOC();">
        <option value="0"></option>
        <option value="1">Amidon</option>
        <option value="2">West</option>
        <option value="3">Tyler</option>
        <option value="4">Mobile</option>
        <option value="5">Callout</option></select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:21:31.740

ColdFusion 已经编写了执行此操作所需的所有 javascript。要访问它，您可以在 cfinput 标签中使用关键字“bind”。[cfinput](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=ajaxdata_03.html)的文档将帮助您入门。他们甚至有例子。

# javascript - javascript，为什么 console.log 在 IE 中工作

> ID：14896861
> 
> 赞同：0
> 
> 时间：2013-02-15T14:29:54.573
> 
> 标签：javascript

我正在使用 console.log 记录所有错误消息。

```
console.log('foo'); 
```

它适用于 chrome 和 firefox，但在 IE9 中，我得到控制台未定义。解决方法是。

```
window.console && console.log('foo'); 
```

现在，在 IE9 中它可以工作，但我不知道它为什么会工作。我的理解是

1.  window.console 将检查此控制台功能是否存在。
2.  然后如果它确实存在，我们使用 console.log 来记录消息。

在 IE9 中，我希望 window.console 失败，console.log('foo') 永远不应该被触发。

为什么它有效，为什么我可以在 IE9 开发人员工具中看到记录的消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:32:37.503

只有在控制台实际打开时它才会起作用。

# mysql - MYSQL 错误 #1005

> ID：14896862
> 
> 赞同：2
> 
> 时间：2013-02-15T14:29:58.257
> 
> 标签：mysql, database

我一直在尝试使用 nbrseats 创建一个外键，但我一直收到错误 1005。有人能帮我吗！？

```
create table theater (
    name varchar(30) primary key,
    nbrseats int not null
) ENGINE=INNODB;

create table reservation (
    nbr integer auto_increment,
    users_username varchar(30),
    cinemashow_showdate date,
    movies varchar(30),
    nbrseats int not null,
    primary key (nbr),
    foreign key (nbrseats) references theater(nbrseats),
    foreign key (users_username) REFERENCES users(username)
        on delete cascade,
    foreign key (cinemashow_showdate, movies) references cinemashow(showdate, movie_title)
       on delete cascade
) ENGINE=INNODB; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:32:49.833

为了`FOREIGN KEY`在另一个表中，您必须在 上创建一个索引`theater.nbrseats`。为了能够可靠地引用特定行，它应该是一个`UNIQUE`索引。否则，如果您有重复的值，引用表将无法识别它引用的行。尽管 InnoDB 允许您在非唯一索引上创建关系，但它可能不是您正在寻找的行为。

有关该位的更多信息，请参阅[此问题](https://stackoverflow.com/questions/588741/can-a-foreign-key-reference-a-non-unique-index)。

```
create table theater (
  name varchar(30) primary key,
  nbrseats int not null,
  UNIQUE INDEX `idx_nbrseats` (nbrseats)
) ENGINE=INNODB; 
```

您的表中的其他`FOREIGN KEY`定义也是如此`reservation`，尽管我们没有看到此处发布的它们引用的表。规则是：

*   引用的列必须被索引（独立于它上面的任何其他复合索引）
*   引用列必须具有完全相同的数据类型。

然而，这种方式会质疑您的设计。如果您在预订中附加了多个座位，那么预订的座位数量是否与剧院中的可用座位数量*完全一致？*这也意味着您不能拥有两个座位数相同的剧院。

您可能需要在这里重新考虑您的设计，并可能创建一个`FOREIGN KEY`引用`theater.name`而不是`theater.nbrseats`.

# asp.net-mvc - ASP.NET MVC 剑道窗口弹出

> ID：14896863
> 
> 赞同：0
> 
> 时间：2013-02-15T14:29:58.213
> 
> 标签：asp.net-mvc, kendo-ui, popupwindow

我是剑道 UI 的新手。我正在使用[Kendo UI](http://docs.kendoui.com/api/web/window)创建一个弹出窗口。我能够创建一个 Kendo 窗口并将其显示为具有自定义宽度和高度的弹出窗口。现在它工作正常。但是当我尝试在弹出窗口（父窗口）中创建弹出窗口（子窗口）时，我无法应用自定义宽度和高度。

我的代码如下：

**父窗口：**

```
<div id="kendopopupAddContact" style="display: none;">
                @{ 
                    @(Html.Kendo().Window()
                .Name("window_AddContact")
                .Width(1000)
                .Events(e => e
                    .Close("ContactWindow_close")
  )
               )   
                }
            </div> 
```

**子窗口：**

```
 <div id="kendoPopupAddCompany" style="display: none;">
        @{ 
            @(Html.Kendo().Window()
                .Name("addCompanyPopup")
                .Width(280).HtmlAttributes(new {@style="width: 280px !important"})
                .Events(e => e
                    .Close("addCompanyPopup_close")
                    )
               )   
        }
    </div> 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:51:31.490

没有*子*窗口这样的概念。请阅读[此](http://www.kendoui.com/forums/ui/window/kendowindow-appendto-boundaries.aspx)。

# c++ - 如何将参数绑定到 boost::function 中？

> ID：14896866
> 
> 赞同：0
> 
> 时间：2013-02-15T14:30:10.407
> 
> 标签：c++, boost, boost-bind, boost-function

从 boost::bind 文档（[http://www.boost.org/doc/libs/1_53_0/libs/bind/bind.html#with_functions](http://www.boost.org/doc/libs/1_53_0/libs/bind/bind.html#with_functions)）中，“绑定的参数被复制并由返回的函数在内部保存对象”，但是如果有办法可以将参数复制到那些函数对象中？

IE：

```
#include <boost/function.hpp>
#include <boost/bind.hpp>
#include <string>

using namespace std;

void doSomthing(std::string str)
{
}

int main()
{    
    boost::function<void(void)> func_obj = boost::bind(&doSomthing, "some string");
    //how can I get the std::string argument("some string") through func_obj?
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:47:18.533

Boost.Function 对象除了调用它外，实际上并没有什么可以做的——这是设计使然。（您可以复制它、销毁它、与 NULL 比较，但仅此而已）。

考虑以下代码：

```
void Foo () {}
void Bar ( int i ) { printf ( "%d", i ); }

boost::function<void(void)> fFoo (Foo);
boost::function<void(void)> fBar = boost::bind (Bar, 23); 
```

这两个对象被设计为同等对待。它们是相同的类型，并且行为相同。boost 函数中没有区分它们的机制。

有关 Boost.Function（和其他地方）中使用的技术的详细描述，请查看 Nevin Liber[在 Boostcon 2010 上的类型擦除演讲](http://blip.tv/boostcon/nevin-liber-type-erasure-3989198)

# qt - Qt Creator：分发应用程序

> ID：14896867
> 
> 赞同：1
> 
> 时间：2013-02-15T14:30:12.013
> 
> 标签：qt, qt-creator, distribution

我是 Qt 的新手 - 请有人告诉我如何构建一个应用程序，以便我可以在没有 Qt 的其他计算机上运行吗？

我下载了 Qt for Mac，我可以运行提供的示例。现在我想将生成的应用程序分发到一个独立的包中，这样用户就不必安装或做任何事情。我需要做什么？

我有最新的 5.0.1 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:33:52.743

这记录在 Qt 的文档中：

[http://qt-project.org/doc/qt-5.0/qtdoc/deployment.html](http://qt-project.org/doc/qt-5.0/qtdoc/deployment.html)

请注意，目前，Qt 5.0 的静态构建不起作用。（4.8 个作品。）

# cruisecontrol.net - 基于多个触发器触发一个项目

> ID：14896870
> 
> 赞同：0
> 
> 时间：2013-02-15T14:30:27.293
> 
> 标签：cruisecontrol.net

我想在每周的星期五下午 1:00 执行一个项目，如果在该特定周的任何时间都没有运行构建。

有什么可以帮助我编写巡航控制项目的触发器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:27:11.193

使用设置为每周下午 1:00 运行的间隔触发器和条件块来检查最后一次构建时间是否在该周运行，如下所示：

```
<conditional>
  <conditions>
    <lastBuildTimeCondition>
       <time unit="hours">168</time>
    </lastBuildTimeCondition>
   </conditions>
   <tasks>
     <msbuild />
   </tasks>
  <elseTasks>
    <!-- Something else, maybe comment task -->
  </elseTasks>
</conditional> 
```

# php - 两个日期范围将所有日期输入数据库

> ID：14896886
> 
> 赞同：0
> 
> 时间：2013-02-15T14:31:53.427
> 
> 标签：php, mysql, date

我有一个数据库，每个条目可能输入 10 个日期。用户将选择开始和结束日期，我希望将所有日期输入到我的日历页面的数据库中。

```
$date1 = '2013-01-31';
$date2 = '2013-02-05';

for($one = $date1;$one>$date2;$one = strtotime(date('m/d/Y',$one)." -1 day"))
{
    echo $one;
} 
```

首先我需要提取所有的日期。以上不起作用。这意味着需要将日期 31/01/02/03/04/05 输入到数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:33:40.450

DateTime 使这变得更容易：

**对于 PHP 5.3+ 用户**

```
$start    = new DateTime('2013-01-31');
$end      = new DateTime('2013-02-05');
$interval = DateInterval::createFromDateString('1 day');
$period   = new DatePeriod($start, $interval, $end);

foreach ($period as $dt)
{
  echo $dt->format("m/d/Y") . PHP_EOL;
} 
```

**对于 PHP 5.2 用户**

```
$start    = new DateTime('2013-01-31');
$end      = new DateTime('2013-02-05');
while ($start <= $end)
{
    echo $start->format("m/d/Y") . PHP_EOL;
    $start->modify("+1 day");
} 
```

**参考**

*   [约会时间](http://www.php.net/manual/en/class.datetime.php)
*   [日期期间](http://www.php.net/manual/en/class.dateperiod.php)
*   [日期间隔](http://www.php.net/manual/en/class.dateinterval.php)

# php - 如何使用 JavaScript 打印行

> ID：14896888
> 
> 赞同：0
> 
> 时间：2013-02-15T14:31:56.173
> 
> 标签：php, javascript, html

我目前正在使用

```
rows.length 
```

在 JS 中，它给了我输出的行数。

实际代码是这样的

```
oResources.html("<h3>Number of Rows = "+ rows.length+"</h3>"); 
```

输出是`Number of Rows = 1`

但我想查看行的值而不是行数。

编辑后整个函数如下图所示：

```
 this.get_resources = function(rows)
    {   var oResources = $('#resources-'+ options.plugin_uuid);
        //oResources.html("<h3>Number of Rows = "+ rows.length+"</h3>");
        //oResources.html("<h3>Content of Rows = "+ rows.join(' :: ')+"</h3>");
        var data = "";                      // Temporary `data` variable
        for(var key in rows) {              // Loop through the rows
            if(rows.hasOwnProperty(key)){
                data += rows[key] + "<br />\n"; // Add the current row to the data
                }
        }
        oResources.html(data);              // Display the data
        //console.log(rows.length);
    }; 
```

现在打印出来了`[object] [object]`

我的问题是：

输出应该是**电子邮件 ID**而不是`[object] [object]`. 如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:35:03.687

类似的东西？

```
oResources.html("<h3>Content of Rows = "+ rows.join(' :: ')+"</h3>"); 
```

编辑：由于您的数据格式似乎有另一个层次的深度，我做了一个小提琴来提供一些关于您可以做什么的见解。[http://jsfiddle.net/TyeQE/](http://jsfiddle.net/TyeQE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:36:26.133

是的，“行”看起来像一个数组。您需要一个 for 循环来遍历数组并将其打印出来。

```
var str = ""
for(var i = 0; i < rows.length; i++) {
  str = rows[i] + "<br>";
}
oResources.html($str); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T14:47:44.927

试试这个：

```
var data = "";                      // Temporary `data` variable
for(var key in rows) {              // Loop through the rows
    if(rows.hasOwnProperty(key)){
        data += rows[key] + "<br />\n"; // Add the current row to the data
    }
}
oResources.html(data);              // Display the data 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T14:33:56.800

试试`console.log(rows)`。在浏览器中打开控制台（通常是 F12）以查看结果。

# java - Java 时区错误

> ID：14896895
> 
> 赞同：2
> 
> 时间：2013-02-15T14:32:16.527
> 
> 标签：java, timezone, soapui

如下图可以看出，系统时间和SoapUI的时间值是不同的。

![系统和soapui时间](../Images/cab3e8ef6c4781655517b5917c3b2ee4.png)

SoapUI 使用 JRE 时间，这就是为什么它应该是 Java 本身的错误，因为；*下面的代码也*给出了：`Venezuela Time`

```
String tzn = TimeZone.getDefault().getDisplayName();
System.out.println(tzn); 
```

**我尝试过但失败了：**

*   使用 regedit 并更改时区，然后将其恢复正确。
*   在控制面板/Java/ JRE`-Duser.timezone="Europe/Istanbul"`设置/运行时参数中提供或在`JAVA_OPTS`变量内提供相同的参数。
*   更改时间或时区并将其取回。

我确实检查了这个[问题](https://stackoverflow.com/questions/2106525/java-incorrect-timezone)，以编程方式更正时区是可行的，但我需要更正影响自动化测试结果的 SoapUI 时区。因为测试是时间相关的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:07:27.633

我真的很努力地解决了这个问题，好几天了。我真的不知道为什么最合理的两种方法不能正常工作：

*   创建`JAVA_OPTS`具有以下值的系统变量：`-Duser.timezone="Turkey"`
*   从命令行传递 vm 参数。

最后我放弃并为每个特定程序设置此参数，以便能够为 SoapUI 执行此操作，转到`SoapUI Home Path/bin`文件夹并右键单击`soapui-pro.bat`并选择编辑。（如果使用的是社区版，bat文件的名称会有所不同）

然后转到以 set 开头的第 29 行`JAVA_OPTS=-Xms128m...`并插入时区参数：`-Duser.timezone="Turkey"`。现在执行bat文件，它将开始正常工作！

# python - Python和landscape_api

> ID：14896897
> 
> 赞同：0
> 
> 时间：2013-02-15T14:32:32.387
> 
> 标签：python, ubuntu-12.04

我正在通过 Python api 管理 Canonical CM Landscape。我不知道是否有人可以帮助我，但我陷入了困境，我不知道这是否是该特定库的简单 Python 错误。这是较大脚本的一部分，但当我尝试使用此清单中的最后一个函数时它会丢失。

```
 import os, json, sys, subprocess, csv, datetime, time
    from landscape_api.base import API, HTTPError
    from subprocess import Popen,PIPE,STDOUT,call

    uri = "xxxxxxxxxxxxxxxxxxxxxxxx"
    key = "xxxxxxxxxxxxxxxxxxxx"
    secret = "xxxxxxxxxxxxxxxxxxxxxxx"

    api = API(uri, key, secret)

    proc=Popen('zenity --entry --text "Fill with machine Tag to be searched" --entry-      text "Type Tag"', shell=True, stdout=PIPE, ) #Input from zenity window
    output=proc.communicate()[0] 
    user="root"
    script="2408"
    mac = api.execute_script(query="tag:%s", script_id="script_id:%s", username="user:%s" %(output, script, user)) 
```

最后一个函数 api.execute_script 返回错误

```
 Traceback (most recent call last):
       File "Python_MAC_IP.py", line 35, in <module>
       mac = api.execute_script(query="tag:%s", script_id="script_id:%s", username="user:%s" %(output, script, user))
       TypeError: not all arguments converted during string formatting 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:40:32.547

您只能`%`在单个字符串上使用运算符，而不能跨多个字符串使用。您当前要求 Python 做的是将多个变量插入到仅定义了一个的字符串中。

更改此行：

```
mac = api.execute_script(query="tag:%s", script_id="script_id:%s", username="user:%s" %(output, script, user)) 
```

对此：

```
mac = api.execute_script(query="tag:%s" %tag, script_id="script_id:%s" %script, username="user:%s" %user 
```

# php - 使用 php 和 codeigniter 通过电子邮件发送实际页面

> ID：14896902
> 
> 赞同：0
> 
> 时间：2013-02-15T14:32:47.803
> 
> 标签：php, codeigniter, email

我想通过电子邮件发送实际页面，我可以发送它，问题是当我打开邮件时，html 显然没有 css，但我怎样才能让它看起来像浏览器？

首先，我在隐藏输入中设置页面的 html：

```
var codigo = $("body").html();
$("#codigohtml").val(codigo); 
```

然后我通过选择器 .val() 将其放入电子邮件的消息中，我将邮件的类型设置为 html .. 问题出在 css 上。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:21:01.350

无需使用单独的 CSS 样式表，只需将 CSS 直接放在 head 标签中即可：

```
<head>
    <style>
        /* CSS goes here */
    </style>
</head>
<body>
    <!-- Rest of email -->
</body> 
```

# ios6 - iOS 6 标签栏应用程序：shouldAutorotate 不起作用

> ID：14896904
> 
> 赞同：3
> 
> 时间：2013-02-15T14:32:53.697
> 
> 标签：ios6, uitabbarcontroller, uiinterfaceorientation

我正在使用 iOS 6 和 Xcode 4.5 在 Storyboard 中开发一个带有标签栏和一些导航视图控制器的应用程序

通常应用程序应该支持所有界面方向，但我有两个只应该支持纵向模式的视图。

所以我在视图控制器中添加了以下代码：

```
-(BOOL)shouldAutorotate
{
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationPortrait;
} 
```

在我在 iOS 6 上开发的另一个没有故事板和导航视图控制器的应用程序上，它可以工作，但她不行！：/

我希望有人可以提供帮助，因为我发现了其他一些没有帮助的帖子...

德国致以最诚挚的问候

劳伦兹

**编辑：**

我也试过 - 不起作用！：

```
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T11:28:39.923

据我所知，之所以会出现这个问题，是因为 UITabBarController 和 UINavigationController 正在为 -(BOOL)shouldAutorotate 和 -(NSUInteger)supportedInterfaceOrientations 返回它们自己的默认值。

一种解决方案是通过类别（或只是子类）扩展这两个类，以便从您自己在视图控制器中的这些方法的实现中返回适当的值。这对我有用（你可以把它放到你的 App Delegate 中）：

```
@implementation UITabBarController(AutorotationFromSelectedView)

- (BOOL)shouldAutorotate {
    if (self.selectedViewController) {
        return [self.selectedViewController shouldAutorotate];
    } else {
        return YES;
    }
}

- (NSUInteger)supportedInterfaceOrientations {
    if (self.selectedViewController) {
        return [self.selectedViewController supportedInterfaceOrientations];
    } else {
        return UIInterfaceOrientationMaskAllButUpsideDown;
    }
}

@end

@implementation UINavigationController(AutorotationFromVisibleView)

- (BOOL)shouldAutorotate {
    if (self.visibleViewController) {
        return [self.visibleViewController shouldAutorotate];
    } else {
        return YES;
    }
}

- (NSUInteger)supportedInterfaceOrientations {
    if (self.visibleViewController) {
        return [self.visibleViewController supportedInterfaceOrientations];
    } else {
        return UIInterfaceOrientationMaskAllButUpsideDown;
    }
}
@end 
```

默认情况下，您的所有视图控制器将继续自动旋转。在应该只支持纵向模式的两个 View Controller 中，实现以下内容：

```
-(BOOL)shouldAutorotate {
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-13T07:38:48.510

乔纳森的出色回答。

我稍微修改了他的代码，以便在一个片段中处理导航控制器。

```
- (BOOL)shouldAutorotate {
    if (self.selectedViewController) {
        if ([self.selectedViewController isKindOfClass:[UINavigationController class]]) {
            return [[[(UINavigationController*)self.selectedViewController viewControllers] lastObject] shouldAutorotate];
        }
        return [self.selectedViewController shouldAutorotate];
    } else {
        return YES;
    }
}

- (NSUInteger)supportedInterfaceOrientations {
    if (self.selectedViewController) {
        if ([self.selectedViewController isKindOfClass:[UINavigationController class]]) {
            return [[[(UINavigationController*)self.selectedViewController viewControllers] lastObject] supportedInterfaceOrientations];
        }
        return [self.selectedViewController supportedInterfaceOrientations];
    } else {
        return UIInterfaceOrientationMaskAllButUpsideDown;
    }
} 
```

# selenium - 在 Jenkins 中运行 Selenium 测试

> ID：14896905
> 
> 赞同：4
> 
> 时间：2013-02-15T14:32:54.553
> 
> 标签：selenium, jenkins, automated-tests, selenium-ide

我用 Selenium IDE 记录了一些简单的 selenium 测试。现在我想在 Jenkins 中运行这些测试。我需要 Jenkins 的哪个插件来做到这一点？以及如何逐步运行测试？帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T07:00:04.283

您可以使用录制的 selenium IDE 脚本和 selenium-server.jar 文件从 Jenkins 运行它。步骤如下：

1.  转到 SeleniumHQ 页面并下载 Selenium Server 文件 例如：selenium-server-standalone-2.33.0.jar
2.  修复 html 测试套件 使用 Selenium IDE 记录然后保存为 html 测试用例和测试套件，然后将它们放在同一个文件夹中，例如：TestCase.html、TestSuite.html
3.  在詹金斯
    *   插件 Seleniumhq
    *   配置 Selenium runner 文件 Manage Jenkins > Configure System > Selenium Remote Control: htmlSuite Runner = 您在步骤 1 中下载的文件的路径
    *   配置要运行的作业 在构建字段中单击“添加构建步骤”，然后选择“seleniumhq htmlSuite 运行”浏览器：*firefox 或 *iexploer .... startURL：[http](http://www.google.com) ://www.google.com 或 ...suiteFile：绝对输入步骤 2 中保存的 TestSuite.html 文件的路径 resultFile：输入将保存结果的文件的绝对路径

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-03T07:41:37.403

我做了同样的事情，但发生了以下错误：无法找到 HTML 运行器。这通常是因为您没有在 CLASSPATH 上下载或提供“selenium-leg-rc”jar。您的测试将不会运行。[从http://www.seleniumhq.org/download/](http://www.seleniumhq.org/download/)下载 Selenium HTML Runner并使用它代替 selenium-server-standalone.jar 以获得运行 HTML 套件的最简单方法。

# css - 浏览器与媒体查询触发点的差异

> ID：14896906
> 
> 赞同：1
> 
> 时间：2013-02-15T14:32:56.877
> 
> 标签：css, cross-browser, media-queries

我注意到媒体查询断点在 Chrome 与所有其他浏览器（IE9、Chrome、Opera）中的触发方式不同。

参考以下截图帮助解释（请忽略占位符图片）。首先，断点在 chrome 中：

![在此处输入图像描述](../Images/0a5d72359a7cac0770052dc4eb39cffa.png)

现在，让我们看看下面所有其他浏览器的媒体查询触发位置。我们将使用 Firefox 作为示例，但对于 IE9 和 Opera 也是如此。

![在此处输入图像描述](../Images/47d6a09017b1ca6c3825df8937d4ad2d.png)

区别：

1.  在 chrome 中，媒体查询的触发点在 1190px。在所有其他浏览器中，触发点位于 1173px。差异是 17 像素。

2.  17px也是浏览器本身实际宽度的差值。我的意思是什么？我在 Chrome 和 Firefox 上触发媒体查询之前和之后的截图。在 Photoshop 中，我使两个浏览器的 jpg 图像的宽度保持一致。出于某种原因，媒体查询在除 Chrome 之外的所有浏览器中都会提前 17 像素触发。

实际的媒体查询 CSS 代码：

```
@media (min-width: 1190px) and (max-width: 1254px) {

    .visible-large {
        display: inherit !important;
    }

}

@media (max-width: 1189px) {

    .visible-large {
        display: none !important;
    }

} 
```

我的问题：**有没有办法让媒体查询在所有浏览器中同时触发？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:46:16.113

我认为某些浏览器可能会计算溢出宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-27T02:55:40.320

真正的区别在于基于 chrome 的浏览器考虑窗口/文档宽度的方式。在基于 chrome 的浏览器中，不考虑右侧滚动条的宽度（可能是因为移动浏览器必须这样做 - 移动浏览器中的滚动条是“虚拟的”并放置在文档的前面，而不是文档的宽度之外） .

据我所知，规范化跨浏览器媒体查询的文档到窗口宽度的唯一方法只能在 javascript 中完成，因为基于 chrome 的浏览器处理滚动条的方式，这有点否定了媒体查询首先带到 CSS 中。

# symfony - symfony 默认语言

> ID：14896908
> 
> 赞同：0
> 
> 时间：2013-02-15T14:32:58.297
> 
> 标签：symfony, translation, locale

我正在尝试在我的网站上更改语言三个小时。

我使用的是 2.1.7 版，我发现一些来自 2.0 版语言环境的文章可以通过会话访问。但现在是通过请求。

所以我在文档中发现了这个：

```
 $request=$this->getRequest();
        $locale=$request->getLocale();

        echo $locale; 
```

好的..这有效...但我看到'en'是parameters.yml中的默认值...我有文件messages.en.yml ...工作正常。

但是当我尝试时：（其中 $localExtension ='fr' ... 使用现有的 messages.fr.yml 文件..）

```
 public function changeLanguageAction($localExtension) 
{
        $request=$this->getRequest();
        echo $localExtension;
        $request->setLocale($localExtension);

        return $this->redirect($request->headers->get('referer'));
} 
```

重定向后，我仍然看到'en' ...怎么了？：/

或者我如何不仅在一个页面上为每个页面设置Locale ...

# asp.net - 如何防止 IISExpress 和我的网站文件夹弄乱我的文档文件夹？

> ID：14896911
> 
> 赞同：31
> 
> 时间：2013-02-15T14:33:09.267
> 
> 标签：asp.net, visual-studio, iis-express

我最近注意到 IISExpress 和我的网站文件夹被添加到我的 Windows 7 机器上的我的文档文件夹中。我最近安装了 VS2012，所以我猜这是罪魁祸首，但如果可能的话，我无法在网上找到任何解释如何更改这些默认值的东西。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-07-11T10:18:16.620

微软把我的“文档”文件夹和他们所有的程序（垃圾）文件夹弄得乱七八糟，这也让我发疯了。`Data`我通过在我的文件夹下创建一个文件夹来让步`Documents`，我将所有 MS 应用程序（以及其他应用程序，如 Firefox 的配置文件文件夹）指向所有（通常不需要的）文件夹，并为每个程序/套件创建一个子文件夹。至少这样我可以在备份“文档”文件夹时轻松备份所有设置。

无论如何，VS2012 安装了 IIS Express，这就是导致创建这些文件夹的原因。我找到了两种处理不需要的文件夹的解决方案。

1.  卸载 IIS Express。您可以从控制面板的普通 Windows“卸载程序”部分执行此操作。

2.  更改 IIS Express 使用的文件夹位置，如下所示。请注意：如果您不知道自己在做什么，任何这样做的人都有可能导致他们的计算机出现问题，因此您需要自担风险。请在此过程中也进行适当的备份！

    **a)**关闭 Visual Studio。

    **b)**为 IIS Express 子文件夹创建一个新文件夹：

    例如。`D:\My Documents\Data\Microsoft\IISExpress`

    **c)**将现有不需要的 IISExpress 子文件夹 ( `config, Logs, TraceLogFiles`) 从您的`My Documents > IISExpress`文件夹移动到在步骤 b) 中创建的文件夹。

    **d)**为文件夹创建一个新文件`My Web Sites`夹，我建议也在步骤 b) 中创建的文件夹下。

    例如。`D:\My Documents\Data\Microsoft\IISExpress\Websites`

    在此文件夹下，为默认的 IIS Express 网站创建一个网站（以防它“自动神奇地”重新出现，稍后它又是丑陋的头）。

    例如。`D:\My Documents\Data\Microsoft\IISExpress\Websites\Default`

    **e)**转到新定位的`config`文件夹：

    例如。`D:\My Documents\Data\Microsoft\IISExpress\config`， 和：

    **一世。**在文本编辑器（例如记事本）中打开文件`applicationhost.config`。

    **ii.** 找到`sites > site > application path > virtualDirectory path`WebSite1 的节点，并将`physicalPath`值从更改为您在步骤 d) 中创建`%IIS_SITES_HOME%\WebSite1`的 IIS Express**默认网站文件夹。**

    例如。`%IIS_SITES_HOME%\Websites\Default`.

    请注意，`%IIS_SITES_HOME%`指向您的“文档”文件夹（这似乎是 IIS Express 的“功能”，我找不到更改它的方法，并且它似乎是在 IIS Express 启动时自动配置的，它确实通过使用该`applicationhost.config`文件）。

    对 IIS Express 创建的任何其他站点执行相同的操作。

    **f）**创建一个新的注册表项，将 IIS Express 指向您创建的新文件夹（此处由 MS 部分解释：[http ://www.iis.net/learn/extensions/introduction-to-iis-express/iis-80-express -自述文件](http://www.iis.net/learn/extensions/introduction-to-iis-express/iis-80-express-readme)）。仅供参考，注册表项以前不存在，因为 IIS Express 使用我的默认值，`Documents`除非此项存在：

    **一世。**打开 Windows 的“运行”框，例如。`(Windows Key) + R`

    **ii.** 类型`regedit`

    **iii.** 导航到键：`HKEY_CURRENT_USER\Software\Microsoft`

    **iv.** **右键单击*​​ *`Microsoft`键（您刚刚导航到的键），然后选择：`New > Key`

    **v.**类型`IISExpress`

    **六。****右键单击*​​ *`IISExpress`您刚刚创建的密钥，然后选择：`New > String Value`

    **七。**输入`CustomUserHome`，然后按`Enter`键保存。

    **八。**双击该`CustomUserHome`字符串为其输入一个值，然后在该`Value Data:`字段中输入您在步骤 b) 中创建的新 IIS Express 文件夹的路径，例如：`D:\My Documents\Data\Microsoft\IISExpress`. 按确定，您现在可以关闭注册表编辑器。

    **g)**重新打开 Visual Studio，它应该开始使用新文件夹，并且`Documents`不再在您的文件夹中创建文件夹。耶！！！！！

仅供参考，当我完成这一切时，我实际上是以稍微不同的顺序（首先创建注册表项）进行的，但这个顺序是解释这一切的最简单方法。只要您完成所有步骤，您是先创建密钥还是最后创建密钥都无关紧要。祝你好运！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-09-19T06:08:23.040

一个棘手的解决方案

1.  先复制你的`C:\Users\<user>\Documents\IISExpress`文件夹
2.  使用以下命令 在文件夹内创建一个名为**IISExpress的符号文件夹**`C:\Users\<user>\Documents`
    *   `mklink /J C:\Users\<user>\Documents\IISExpress D:\IISExpress`
3.  将复制的**IISExpress**中的所有内容移动到 D:\IISExpress
4.  就这样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-18T06:54:45.340

如果您只是想整理 Documents 文件夹，一种简单的解决方法是将不需要的文件夹设置为`hidden`不再可见。

您可以通过右键单击 IISExpress 文件夹 > 属性并检查`hidden`底部的属性来执行此操作。该文件夹仍将保留在您的 Documents 文件夹中，但对您不可见。如果由于某种原因您想再次访问这些文件夹，您可以在文件资源管理器的“视图”选项卡中切换隐藏项目的可见性。

# .net - 我正在尝试在 Visual Basic 中的 Web api mvc 4 应用程序上创建自定义授权属性

> ID：14896917
> 
> 赞同：0
> 
> 时间：2013-02-15T14:33:20.183
> 
> 标签：.net, vb.net, asp.net-mvc-4, asp.net-web-api, custom-attributes

我正在尝试在我的项目中实现继承 system.web.http.authorizeAttribute 的自定义授权属性我有一个 web api mvc 4 模板和一个带有 windows 身份验证的 mvc4 Internet 应用程序模板作为客户端。我在 web api 控制器中有一些方法，如果他点击具有自定义属性的按钮，我试图让发送请求的经过身份验证的用户无法访问这些方法，应该返回 401。而且如果他没有经过身份验证，客户不应该看到无权看到的东西

请帮助一些代码示例！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T03:45:13.923

要创建从 System.Web.Http.AuthorizeAttribute 派生的自定义 AuthorizeAttribute，您应该重写 IsAuthorized() 方法。这很简单，如下所示。

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool IsAuthorized(HttpActionContext actionContext)
    {
        // Do some condition check here

        // Return the result of the condition check
        return isAuthenticated;
    }
} 
```

现在将`[MyAuthorizeAttribute]`属性添加到您想要保护的方法。这将导致对这些方法的所有未经身份验证的请求返回 401。

更好的方法是添加`[MyAuthorizeAttribute]`到控制器`[AllowAnonymous]`中并为不需要身份验证的方法添加属性。

# ruby-on-rails - Rails 中更干净的资源 URL

> ID：14896921
> 
> 赞同：0
> 
> 时间：2013-02-15T14:33:28.393
> 
> 标签：ruby-on-rails, url, routes

我正在寻求一些帮助，以使我的 URL 对我的 Rails 应用程序中的用户更具吸引力。该应用程序在 3.2.11 上，我正在运行 ruby​​ 1.9.2p320

我目前有两个模型，我认为它们在 URL 表示中可能会更清晰，Company 和 Consultant。

他们都有唯一的字段，公司有：名称，顾问有：用户名。公司 has_many :consultants 顾问 belongs_to :company

我正在使用friendly_id，因此这两个资源在 URL 中都有这些唯一 ID：

```
http://localhost:3000/company/:name 
```

和

```
http://localhost:3000/consultants/:username 
```

我的路线如下所示：

```
resources :company, :path => '/company'

resources :consultants, :path => '/consultants' 
```

现在我想知道是否有任何巧妙的方法可以让公司的网址看起来像这样：

```
http://localhost:3000/:name 
```

对顾问来说是这样的：

```
http://localhost:3000/:name/:username 
```

如果可能的话，我将非常感谢您对此事的任何帮助，谢谢！如果我遗漏了任何需要的重要信息，我会立即道歉。

/拉斯穆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:44:56.310

您可以将 :path 更改为您想要的任何内容，例如：

```
resources :company, :path => '/company' 
```

至

```
resources :company, :path => '' 
```

这将从您的网址中删除 /company/

这是一个你也可以使用的 gem，但它有很多功能，所以我想它对你的需求来说很重： [friendly_id](https://github.com/norman/friendly_id)

这是关于路由和命名空间的一个很好的指南：[Rails routing from the outside in](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)

# passwords - 在数据库中为密码哈希存储未加密的盐

> ID：14896922
> 
> 赞同：-1
> 
> 时间：2013-02-15T14:33:34.590
> 
> 标签：passwords, cryptography

在密码哈希中使用盐时，为什么建议为每个密码使用不同的盐并将其未加密地存储在数据库中？

似乎太没有意义了。当然，如果攻击者可以访问数据库并且他们发现了盐，那就像根本没有盐一样？

如果他们试图通过暴力破解密码，并且他们在与加密密码相同的行中有未加密的普通盐，他们可以将盐与他们要尝试的所有单词/短语连接起来，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:36:33.367

加盐的目的是防止有人同时攻击所有密码。由于每个密码都有不同的盐，攻击者必须单独攻击它们。这大大减少了他可以为每个帐户尝试的可能密码的数量。

否则，攻击者可以散列十亿个可能的密码，然后将每个散列密码与他的列表进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:37:01.407

首先参见[http://en.wikipedia.org/wiki/Rainbow_table](http://en.wikipedia.org/wiki/Rainbow_table)。

如果您对每个密码使用随机盐，黑客就无法使用彩虹表。

您需要存储未加密的盐，以便能够散列字符串以检查它是否与原始密码的加盐散列匹配。

一些 crypt 函数将未加密的盐（除其他外）连接到加密的盐化密码。例如 Der php bcrypt 河豚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T14:37:20.620

公共盐使得破解密码列表变得更加耗时。但是，在破解单个密码时，它不会使字典攻击更加困难。攻击者可以访问加密密码和盐，因此在运行字典攻击时，攻击者可以在尝试破解密码时简单地使用已知的盐。

[http://en.wikipedia.org/wiki/Salt_%28cryptography%29](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T14:38:25.340

要暴力破解散列密码，攻击者需要尝试散列所有可能的字母和符号组合，并将其与他拥有的散列值进行比较。

如果攻击者曾经暴力破解过一次这样的明文 > 哈希组合，他就知道所有相同哈希的明文。

在散列之前将盐添加到明文中，因此相同的明文散列到不同的散列，迫使攻击者尝试每个散列的所有字母组合，大大降低了他的速度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T14:38:38.137

你需要盐来制作彩虹桌和那些没用的东西。

当然，盐可以加密存储，这使得破解单个密码变得更加复杂。

但是看看它通常是如何工作的：你将盐发送给客户端，客户端使用它来散列盐+密码。因此，您的客户必须首先解密盐，在许多情况下，这可以由任何攻击者完成。在攻击者没有机会观察客户端行为的情况下，加密的哈希可能会提高安全性（通过默默无闻的安全性）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T14:40:27.750

如果有人掌握了您的数据库，由于各种原因，您将遇到大麻烦。理论上，攻击者获得（或猜测）一种盐会容易得多。如果他们知道您使用的唯一盐，他们可以同时暴力破解所有密码。如果您为每个用户使用不同的盐，攻击者必须知道每个盐才能有效攻击。

至于加密存储的盐..我想这样做没有任何问题，只是希望攻击者能够转储您的整个数据库的情况很少见。如果可以的话，他们可能无论如何都能够获得他们想要的东西，即使不必绕过身份验证。

# java - 在 Websphere Application Server 7 中使用 Coda Hale Yammer Metrics 库

> ID：14896924
> 
> 赞同：0
> 
> 时间：2013-02-15T14:33:36.400
> 
> 标签：java, websphere, metrics

我正在尝试将指标库添加到 WAS 7 上的现有 Web 服务。我遇到错误

错误 404：javax.servlet.UnavailableException：SRVE0203E：Servlet [AdminServlet]：找到 com.yammer.metrics.reporting.AdminServlet，但缺少另一个必需的类。SRVE0206E: 此错误通常意味着 servlet 最初是使用服务器无法定位的类编译的。SRVE0187E: 检查您的类路径以确保 servlet 所需的所有类都存在。SRVE0210I: 可以通过仅使用应用程序的运行时类路径中的类重新编译 servlet 来调试此问题 SRVE0234I

metrics-servlet-2.2.0 所需的其他运行时依赖项是什么？

我的 WEB-INF\lib 文件夹中有 metrics-core-2.2.0.jar 和 metrics-servlet-2.2.0.jar。

线程、ping 和 healthcheck servlet 工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T05:27:11.067

我认为您缺少一些更多必需的 jar，您是否没有使用 maven 或 gradle`dependency management` 请参阅此处以了解所有`metrics-servlet-2.2.0.jar`依赖的必需 jar。[http://mvnrepository.com/artifact/com.yammer.metrics/metrics-servlets/3.0.0-BETA1](http://mvnrepository.com/artifact/com.yammer.metrics/metrics-servlets/3.0.0-BETA1)

我的建议是，如果没有 Maven/Gradle 或任何其他构建工具，总是很难维护依赖关系 :)。

# magento - magento 将产品导入默认类别

> ID：14896925
> 
> 赞同：0
> 
> 时间：2013-02-15T14:33:38.027
> 
> 标签：magento, import

我正在使用 Amartinez 自定义导入/导出扩展。我正在尝试通过 .csv 文件向 magento 1.6.2 插入产品列表。我可以很好地插入类别，但问题是我的产品没有添加到“默认类别”中，仅添加到默认类别的子类别中。我已经搜索了我可以在哪里设置它，但我还没有找到任何东西。

我尝试在 csv 中的新行上添加“默认类别”，当我运行 cron 时，它说创建了一个名为“默认类别”的新类别，但我在类别，并且产品仍然与之前的类别相同。任何帮助是极大的赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-04T18:26:57.917

来自 Itera Research 的问候，

我很高兴分享我们 Magento 团队负责人的回复。

请检查下面，

*   将“category_ids”列添加到您的 CSV 文件并将“默认类别”ID 设置为此列，您可以在 admin > Catalog > Manage Categories 中查找默认类别 ID

聊天愉快，

仁佐里娜

伊特拉研究

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:30:52.460

检查默认类别是否设置为锚点，在目录 > 管理类别 > 选择默认类别并单击显示设置选项卡...这是第三个下拉列表，将其更改为是。

# django - Django 等价于 ASP.NET UserControl

> ID：14896934
> 
> 赞同：0
> 
> 时间：2013-02-15T14:34:04.863
> 
> 标签：django, django-templates, django-views

如果这里有人是 ASP.NET 专业人士，您可能知道我所说的用户控制是什么意思。我希望在 django 中创建一个类似的。

所以，我的问题是我的网站上有几个页面，但我需要一个搜索栏出现在每个页面中。由于我需要views.py来操作这个搜索栏，我不能做一个简单的方法

```
{% include 'something.html' %} 
```

因此，任何人都可以建议我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:46:54.103

有几种方法可以完成您想要做的事情：

[上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#subclassing-context-requestcontext)

[模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)

无论加载哪个模板，上下文处理器都可以用值扩充模板上下文。它们类似于 Rails 中的过滤器。

模板标签，如上下文处理器，可以完成你在 Python 中可以做的任何事情，但是是在模板级别实现的。

如果您需要在每个模板上显示某些内容，实现此目的的最简单方法之一是使用包含标记，该标记也可以接受传递给它的值。包含标记可以在您的最高级别模板（即 MasterPage）中实现，只要您不将其放入块中并覆盖它，它就会出现在其继承链中包含该模板的每个页面上。

如果它只是你想在每个页面上包含的东西，并且不需要做任何处理，你应该能够将你想要的代码放在最顶层的模板中，并让后续模板继承它。

我通常有一个“base.html”模板，我的所有模板都继承自该模板。如果我需要在每一页中都有一些东西，我就把它放在那里。如果默认情况下我想要它，但希望能够在后续模板中增加它，我会将它放入一个块中。该块将允许您包含或覆盖其默认内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-10T19:48:44.107

我知道这篇文章有点老了，但我只是偶然发现它并找到了一种可行的解决方案。我称之为一种解决方案，因为它是一种解决方法。

我有几个不同的站点，我想在这些站点上显示日志记录信息。此显示始终看起来相同（它具有相同的 html），并且在其后面具有相同的数据库表和模型类。

我的解决方案/解决方法使用 django 过滤器：

1.  在views.py中，我将日志条目列表放在上下文中

    ```
    context = {'list_log': Log.objects.filter(condition = True) }    
    template = loader.get_template('my_html_file.html')    
    return HttpResponse(template.render(context, request)) 
    ```

2.  在 my_html_file.html 我使用自定义过滤器

    ```
    {{ list_log|get_log_uc|safe }} 
    ```

3.  在 filters.py 我用这个自定义过滤器加载另一个 html 文件

    ```
    @register.filter
    def get_log_uc(list_log):
        template = loader.get_template('user_control_log.html')
        context = { 'list_log' : log }
        return template.render(context) 
    ```

4.  在 user_control_log.html 我有用户控制等效 html

    ```
    {% for log in list_log %}
       <p>log.something</p>
    {% endfor % 
    ```

# asp.net - 设置 SelectedIndex -1 ASP.NET DropDownList

> ID：14896939
> 
> 赞同：0
> 
> 时间：2013-02-15T14:34:20.507
> 
> 标签：asp.net, .net

有没有办法选择 -1 索引而`new ListItem("", "-1",true))`不像 jQuery 那样在后面添加代码？

这是一个例子：

[http://jsfiddle.net/eL8sn/](http://jsfiddle.net/eL8sn/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:36:39.497

你的意思是这样吗？

```
DropDownList1.SelectedIndex = -1; 
```

这就是人们通常从代码隐藏中做到这一点的方式。

ETA：我现在明白你在说什么了。而且恐怕我看不到如何从服务器端完成它。您在服务器端所能做的就是控制渲染。据我所知，即使您渲染此代码：

```
<select id="testSelect" selectedIndex="-1"> 
```

...它仍然出现，顶部选项似乎已被选中。

看起来好像只有在渲染后使用 javascript 将其显式设置为 -1 才会出现，并且绝对没有选择任何内容。*看起来*好像它不能在 HTML 中以声明方式完成。

如果您可以找到一种在 HTML 中编写标记的方法，以便它在加载时以这种方式显示，那么您可以在代码隐藏（使用`.AddAttribute()`或类似）中调整呈现，但如果不能通过声明来完成，它'将需要javascript。

（您当然可以编写一个 jQuery 片段来将所有下拉列表更改为 selectedIndex = -1，但您会想到这一点！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:43:32.573

如果您在**Page_Load**事件上绑定它，**`(AutoPostBack='True')`**它会回发。每次更改索引时它都会重新绑定

```
if (!IsPostBack)
{  
    BindDropDownList1();      
} 
```

（或者）

如果上述解决方案不起作用，请尝试添加一个空项目，如图所示：

```
this.myDropDownList.Items.Add(new ListItem("Select...", "")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T06:24:11.173

你可以这样做

字符串 selectStr = "选择"; 字符串 allStr = "全部"

ListItem allLI = new ListItem(allStr,allStr);
ListItem selectLI = new ListItem(selectStr,selectStr);

DropDownList.Items.Add(selectLI); DropDownList.Items.Add(allLI);

//用查询返回的列表填充 DropDownList 的代码

DropDownList.SelectedValue = selectStr;

# r - 临时安装一个 R 包，仅用于当前会话

> ID：14896941
> 
> 赞同：22
> 
> 时间：2013-02-15T14:34:28.377
> 
> 标签：r

有时在 Stack Overflow 上，有一个与我的系统上未安装的软件包相关的问题，并且我不打算以后重用。

如果我使用 安装包`install.packages()`，它将被放入我的 R 安装库之一，然后会占用一些存储空间并在每次运行时更新`update.packages()`。

有没有办法只为当前的 R 会话安装包？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-15T14:34:28.377

您可以使用以下功能临时安装软件包：

```
tmp.install.packages <- function(pack, dependencies=TRUE, ...) {
  path <- tempdir()
  ## Add 'path' to .libPaths, and be sure that it is not
  ## at the first position, otherwise any other package during
  ## this session would be installed into 'path'
  firstpath <- .libPaths()[1]
  .libPaths(c(firstpath, path))
  install.packages(pack, dependencies=dependencies, lib=path, ...)
} 
```

您可以通过这种方式简单地使用它：

```
tmp.install.packages("pkgname") 
```

该软件包安装在一个临时目录中，并且应在下次系统重新启动时删除其文件（至少在 linux 系统上）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-15T14:58:04.723

这个问题的另一个解决方案是`devmode`从`devtools`. Devmode 允许您将软件包安装到开发存储库，因此如果您安装开发版本，您的其他软件包不会受到影响。例如：

```
library(devtools)
devmode()
install_github('ggplot2', 'hadley')
devmode() 
```

您会注意到您的版本没有更改。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-15T15:04:37.200

`pacman`处理这样的包管理问题：

```
library(pacman) 
```

现在您可以使用：

```
p_load("pkgname")   #installs or loads package if already installed
#at end of session:
p_delete("pkgname") #deletes package from lib 
```

这是在您的目录中安装然后在最后删除它的快速方法（不是真正的临时安装）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-24T03:56:50.700

作为 Tyler 回答的`p_temp`补充，最近在**pacman**包中添加了一个功能，该功能完全符合问题的要求。

```
library(pacman)
p_temp(pkgname) # or p_temp("pkgname") either work... 
```

这将临时安装包和任何依赖项。

**披露：泰勒和我是pacman**软件包的共同作者......

# php - Codeigniter 是否在每个 Http 请求上自动加载库/帮助程序

> ID：14896947
> 
> 赞同：2
> 
> 时间：2013-02-15T14:34:40.783
> 
> 标签：php, codeigniter, codeigniter-2

我基于 Codeigniter 在我的应用程序中启用了分析，我得到了一些令人惊讶的结果。

在进一步调试中，我意识到以下值非常高，即使对于像 aboutus 等没有 DB 交互或 php 处理的静态页面加载时间：基类控制器执行时间总执行时间

我尝试使用配置文件并意识到如果我删除了几个模型和库的自动加载，上述 3 个变量的值会显着下降

我假设如果某些东西留在内存中就会自动加载。这是正确的吗 ？

如果我有一个模型在代码中需要 70% 的时间，我还要查看结果，如果我仍然不自动加载它并且仅在需要时加载以提高性能。

有没有其他选择

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:39:58.197

自动加载它不是运行一次并且存储在所有请求的内存中。每次发出请求时，根目录中的 index.php 都会启动，并且每次都必须从头开始加载所有内容。自动加载的好处是您不必每次想调用它时都自己加载它，因为 Codeigniter 已经为您完成了。它使编码更容易。您应该在每次用户执行任何请求或使某些功能全局化时使用模块时自动加载。例如，我`url_helper`在所有视图中都使用了它，所以我只是自动加载它，所以我不必自己手动加载它。

自动加载模型不会提高性能。

要手动加载内容，请参阅[http://ellislab.com/codeigniter/user-guide/libraries/loader.html](http://ellislab.com/codeigniter/user-guide/libraries/loader.html)

# batch-file - DIR /p 暂停不起作用...？

> ID：14896948
> 
> 赞同：0
> 
> 时间：2013-02-15T14:34:41.957
> 
> 标签：batch-file, dir

我有问题。我需要我的代码列出一个大目录中的所有文本文件，并在每个全屏时暂停。我进行了设置，以便用户能够输入列表中每个 txt 文件旁边列出的数字，但 /p 参数拒绝暂停列表...

```
DIR SAVES\*.txt /B /P |FIND /V /N "//"
ECHO.
ECHO (Press "Q" to EXIT to the main menu)
ECHO.
CHOICE /C DLVQ /N /M "Would you like to DELETE, LOAD, or VIEW a file [D/L/V]?"
     IF ERRORLEVEL 4 GOTO MENU
     IF ERRORLEVEL 3 GOTO VIEW
     IF ERRORLEVEL 2 GOTO LOAD1
     IF ERRORLEVEL 1 GOTO DELETE

:DELETE
ECHO.
SET /P C=Choose the file number [#] to DELETE (and press ENTER):
FOR /F "usebackq tokens=1,2* delims=[]" %%d IN (`DIR SAVES\*.txt /B ^|FIND /V /N "//"`) DO (
    IF /I !C! EQU q (GOTO MENU)
    IF !C! EQU %%d (
        ECHO.
        CHOICE /N /M "Are you sure you want to DELETE %%e [Y/N]?"
            IF ERRORLEVEL 2 GOTO LOAD       
        DEL /Q "SAVES\%%e"
        DEL /Q "SAVES\"%%~ne"_stats"
        IF EXIST "SAVES\%%e" (
            IF EXIST "SAVES\"%%~ne"_stats" (
                GOTO DELETE1 
```

该文件夹可能有数百个 txt 保存文件，我需要能够在其自己的 cmd 窗口中运行此脚本并在屏幕填满信息时暂停。将我的整个实用程序作为 .bat 运行意味着没有滚动条可供用户查看所有文件。如何使 /P 暂停参数起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:37:55.740

您正在通过管道输出`dir`to `find`。`find`本身不进行分页，只是输出它在输入中匹配的任何内容。在这种情况下， dir 本身无法进行分页，因为 find 将无法进行输入以前进到下一页，因此您有效地禁用了分页。

尝试

```
dir | find | more 
```

# java - 公共与私人

> ID：14896949
> 
> 赞同：1
> 
> 时间：2013-02-15T14:34:43.353
> 
> 标签：java, private, public

以下是我作为课程练习所做的 Java 代码。我有一个名为 SavingsAccount 的类。它有余额和利息变量。但是，我将它们设置为公开，但如果我想单独处理帐户，是否需要将它们设为私有并为这些变量提供“get/set”方法？我可以不公开变量吗？其余代码具有使用这些变量进行计算的方法。

```
public class SavingsAccount { //This class has three different variables that define it
    public double balance; //Double for account balance
    public static double annualInterestRate; //Class method for interest rate
    public final int ACCOUNT_NUMBER; //Constant int for keeping track of accounts

public SavingsAccount (int ACCOUNT_NUMBER, double balance) { //Constructor that takes down account number and balance to keep track of
        this.ACCOUNT_NUMBER = ACCOUNT_NUMBER;
        this.balance = balance;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T14:37:37.350

您当然*可以*将变量公开，但是这里有很多人会为此追捕您……
这是OO范式中的[封装问题。](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)一般来说，物体不应该能够戳到彼此的内脏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:38:56.480

> 但是，我将它们设置为公开，但如果我想单独处理帐户，是否需要将它们设为私有并为这些变量提供“get/set”方法？

首先，您的类的每个实例都被视为一个单独的 SavingAccount。

```
SavingAccount acct1 = new SavingAccount(....); //represents one Saveing account
SavingAccount acct2 = new SavingAccount(....); //represents another Saveing account 
```

如果您的属性被标记为公共或私有，这并不重要。通常，如果你想封装你的类，你可以将你的属性设为私有并拥有公共的 getter/setter 方法，这样其他对象就不能直接访问你的属性。他们只能通过 getter/setter 访问它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T14:36:36.877

为**Data Encapsulation**设置私有字段是个好主意。数据封装是一种限制和控制对字段的访问以防止程序员进行不良操作的做法。如果您不这样做，程序员可能会以不受控制的方式访问或更改实例上的变量，这可能会破坏事情。换句话说，控制对变量的访问使破坏和引入错误变得更加困难。

基本上，您的课程应该像“黑匣子”一样工作。从外部看，另一个程序员看不到，也不关心内部（即私有字段）是如何工作的。您只能通过使用显式声明的操作（即公共方法）与框进行交互。这些操作将根据需要操纵内部结构。

当然，你可以做任何你想做的事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T14:36:51.633

如果您将变量定义为 public，则它们可以直接访问/设置。
如果将它们定义为私有，则需要 getter 和 setter。

控制访问是可取的，将它们声明为私有。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T14:39:59.203

将其设为私有很好。假设我正在访问您的课程并设置如下值。

SavingsAccount sa = 新的 SavingsAccount(12345,25000);

现在我可以直接使用对象设置我的余额，如下所示：

sa.balance = -300;

sa.ACCOUNT_NUMBER = 6789;

你的班级没有提供安全保障。这是 OOP 中的一个重要概念，称为数据封装。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T14:40:15.330

除非您在设置值时执行某种验证（即余额不是负数），`public`否则请尽可能使用。

为仅返回或分配值的属性创建 getter 和 setter，而无需额外的逻辑，实际上会将您的属性公开为`public`并为代码提供不必要的混乱（就可读性而言）。直接使用公共属性使代码更干净。

**示例 1：**

*您希望允许帐户仅具有正余额。每次分配值时，您都必须执行检查以查看是否为其分配了负值。

最好的方法是使用 setter 方法。这使您摆脱了必须`if(newBalance < 0)`在各处进行大量检查的麻烦。

要强制执行您只需要正余额值这一事实，请创建属性`private`。这限制了可能想要为`balance`属性 (*) 分配负值的程序员。为了使 balance 属性中保存的值再次可访问，您需要为私有值添加一个 getter。

您现在拥有“某种”`public`属性，您可以对其实施限制（不能设置为负数）。

**示例 2：**

您想为每个帐户做笔记。你将`String notes;`在你的类中有一个属性。

如果您不想强制执行任何限制，最好在这里使用`public`修饰符。

考虑以下哪段代码更干净：

```
accountA.setNotes(accountB.getNotes()); 
```

或者

```
accountA.notes = accountB.notes; 
```

它们都`notes`从一个帐户复制到另一个帐户，但后者更易于阅读。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-15T14:42:23.797

始终建议设置一些字段`private`而不是`public`.
因为，使用正确的方法来访问它们可以提供简洁的代码和更少的错误。
想想你自己，有人想知道你的帐号，以现金的方式给你礼物。
你更喜欢什么 那个人会及时询问你并拿到你的空调。否或您公开宣布您的 A/C 号，而该人在不通知您的情况下自己获得 A/C 号。
第一个似乎使它`private`和使用`get`/`set`方法。
第二个似乎成功了`public`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-15T16:16:18.597

我认为可以指出两种不同的情况，你想要和不想使用公共字段。

第一个是当您使用不可变数据结构时。我完全相信不可变数据结构是您想要努力实现的目标。不可变结构的优缺点可以在其他地方找到；关于公共领域，不可变结构暗示了显而易见的事情 - 将所有领域公开。好吧，结构是不可变的，所以你只能读取值。在这种情况下，getter 是完全没有必要的，只会弄乱你的代码。

显然，第二个是当您使用可变结构时。在这种情况下，使用 getter 和 setter 是合理的；您完全有可能将一些逻辑放入设置器中，并且在这里封装数据字段是必须的：您真的不希望有人意外更改您的数据。但是，我认为可变 DTO 是邪恶的，应该避免。我看到它们使用的唯一原因是与某些 API（如 Hibernate）的兼容性。

当它们包含您不希望任何人访问的内部状态时，您还应该隐藏字段。实现某些行为（服务、DAO 等）的类就是这种情况。在这种情况下，您通常甚至不想创建 getter 和 setter。

所以，简而言之，我会给出以下建议：使用具有公共字段的不可变对象作为您的 DTO，并使在这些 DTO 上工作的行为类尽可能封闭。

# google-chrome-extension - 从 Google Chrome 扩展沙箱页面打开并写入新窗口

> ID：14896954
> 
> 赞同：0
> 
> 时间：2013-02-15T14:34:52.040
> 
> 标签：google-chrome-extension

（交叉张贴[在这里](https://groups.google.com/a/chromium.org/d/topic/chromium-extensions/n3BvWwSJxAw/discussion)）

你好，

我有一个沙盒页面（在我的清单中指定），它被加载到我的扩展程序背景页面中的 iframe 中。在我的沙盒页面中，我想打开一个新窗口并写入它，即：

var win = window.open(); win.document.write('<p>Hello!</p>');

这适用于我的扩展程序的背景页面和常规网页，但是当从内容脚本或我的沙盒页面调用时，窗口会打开，但我无法访问 win 对象（它已定义，但为空---console.log 输出“窗户 {}”）。

我认为这是由于同源策略（在沙盒环境中每个窗口都被赋予一个 uinque-origin）。但是，由于窗口打开了 about:blank 页面，我很困惑为什么这很重要。

这是一个功能吗？我可以在清单中添加一个参数来避免这种情况吗？有没有人知道不涉及使用 postMessage 返回我的背景页面的解决方法？我理想的解决方案是让我的沙盒脚本打开一个新窗口并直接与之交互，而不是通过消息传递。

如有必要，我可以提供一个完整的例子，但我希望有人可能会马上知道。如果有帮助，我在 Mac 上运行 Chrome 24.0.1312.57，在 Ubuntu 上运行 24.0.1312.68。

谢谢，

汉克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:29:32.713

根据定义，内容脚本是您加载的外部常规网页的一部分，因此我不确定您的脚本如何在“常规网页”上运行，而不是内容脚本。您的意思是当您将代码嵌入到您自己的页面中时该代码有效，但通过内容脚本在其他页面中无效？

无论如何，如果脚本在您的后台页面上正常工作，您可以随时尝试发送消息。（更多在这里：http: [//developer.chrome.com/extensions/messaging.html](http://developer.chrome.com/extensions/messaging.html)）

沙盒/内容脚本的脚本：

```
//send message to background page
chrome.extension.sendMessage({todo: "newWindow"}); 
```

在后台页面中：

```
//create a listener
chrome.extension.onMessage.addListener(
  function(request, sender) {   
    if (request.todo === "newWindow") {
    //do your stuff here
        var win = window.open(); win.document.write('<p&gtHello!</p>');
    }
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T16:58:51.917

[根据此处](https://groups.google.com/a/chromium.org/d/topic/chromium-extensions/n3BvWwSJxAw/discussion)的交叉帖子，问题确实在于打开的窗口具有独特的来源。这是有意为之，因为标准工作组 (SWG) 的成员认为，对于继承沙盒起源的 about:blank 页面不做例外处理会更安全。

但是，为了解决这个问题，至少出于我的目的，我可以使用以下方法。首先，忘记沙盒。此解决方法使用嵌入在背景页面中的 iframe，并将 src url 设置为`data:text/html,...`. 这为 iframe 提供了一个独特的来源，因此它不再位于扩展空间中。这意味着可以使用 eval 而无法访问 chrome api。与沙盒不同，从 iframe 打开的窗口与 iframe 共享相同的来源，允许访问创建的窗口。例如：

在后台 html 页面中：

```
<html>
<head>
    ...
    <script src="background.js"></script>
    ...
</head>
<body>
    ...
    <iframe id="myframe"></iframe>
    ...
</body>
</html> 
```

在 background.js 中：

```
...
document.getElementById('myframe').setAttribute('src', 'data:text/html,'+ 
    encodeURI('<html><head>'+
    '<script src='+chrome.extension.getURL('jquery.js')+'></script>'+
    '<script src='+chrome.extension.getURL('myscript.js')+'></script>'+
    ...
    '</head><body></body></html>'
));
... 
```

在 myscript.js 中

```
jQuery(document).ready(function(){
    ...
    // To receive messages from background.js.
    window.addEventListener('message', function(e){ ... } );

    // To send messages to background.js.
    parent.postMessage({...}, '*');

    // To open AND ACCESS a window.
    var win = window.open();
    win.document.write('Hello'); // Fails in sandbox, works here.

    // Eval code, if you want. Can't do this from an extension
    // page loaded normally unless you allow eval in your manifest.
    // Here, it's okay!
    eval( 'var x = window.open(); x.document.write("Hi!")' );

    // No chrome apis.
    chrome.log( chrome.extension ); // -> undefined
    chrome.log( chrome.windows ); // -> undefined

    // No direct access to background page (e.g., parent).
    chrome.log( parent ); // -> Window with no properties.
    ...
}); 
```

# c# - iTextSharp.HTMLWorker 坏转换 html 加密 UTF-8

> ID：14896966
> 
> 赞同：2
> 
> 时间：2013-02-15T14:35:42.867
> 
> 标签：c#, asp.net, encryption, itextsharp

对不起，我的英语不是很好。我希望你能帮助我。我有这个来自 xslt trans. 的字符串：

```
"<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<html>\r\n  <head />\r\n  <body style=\"font-family: Verdana, sans-serif;\">\r\n  ĚŠČŘŽŘÝŽÝÁÁÍÉŮ ěščřžýáíéůú\r\n       </body>\r\n</html>" 
```

当我尝试将此html字符串转换为pdf时：

```
private static byte[] CreatePdfUsingXslt(string htmlText)
    {
        var msOutput = new MemoryStream();
        var reader = new StringReader(htmlText);

        var document = new Document(PageSize.A4, 30, 30, 30, 30);
        var pdfWriter = PdfWriter.GetInstance(document, msOutput);
        var worker = new HTMLWorker(document);

        document.Open();
        worker.StartDocument();
        worker.Parse(reader);
        worker.EndDocument();
        worker.Close();
        document.Close();

        return msOutput.GetBuffer();
    }

protected void SavePDF(byte[] storeData, string fileName)
    {
        Response.Clear();
        Response.ClearContent();
        Response.ClearHeaders();

        Response.AddHeader("content-disposition", "attachment;filename=" + fileName);
        Response.ContentType = "application/pdf";
        Response.Charset = Encoding.UTF8.ToString();
        Response.ContentEncoding = Encoding.UTF8;
        Response.Buffer = true;

        Response.BinaryWrite(storeData);
        Response.Flush();
        Response.End();
    } 
```

我得到了这样的东西：`ŠŽÝŽÝÁÁÍÉ šžýáíéú`这是错误的......我的结果没有像`Ě,Č,Ř,Ů,...`这些是捷克语字符这样的字符。

* * *

我尝试像这样使用 XMLParser：

```
private static byte[] CreatePdfUsingXslt(string htmlText, string serverPath)
    {
        var msInput = new MemoryStream(Encoding.UTF8.GetBytes(htmlText));
        var msOutput = new MemoryStream();

        msInput.Position = 0;
        msOutput.Position = 0;

        var doc = new Document(PageSize.A4, 30, 30, 30, 30);
        PdfWriter pdfWriter = PdfWriter.GetInstance(doc, msOutput);

        var htmlPipelineContext = new HtmlPipelineContext();
        var cssResolver = XMLWorkerHelper.GetInstance().GetDefaultCssResolver(true);

        var cssPath = String.Format("{0}XsltTemplates\\print.css", serverPath);

        cssResolver.AddCssFile(cssPath,true);

        var pipeline = new CssResolverPipeline(cssResolver,
                                               new HtmlPipeline(htmlPipelineContext, new PdfWriterPipeline(doc, pdfWriter)));
        var xmlWorker = new XMLWorker(pipeline, true);
        var xmlParser = new XMLParser(true, xmlWorker);

        xmlParser.Parse(new StreamReader(msInput, Encoding.UTF8));
        xmlParser.Flush();

        doc.Close();
        return msOutput.ToArray();
    } 
```

但函数`xmlParser.Parse(new StreamReader(msInput, Encoding.UTF8));`抛出 NullReferenceException。

这对我来说更重要。你有任何想法，我如何解决它？

# javascript - IE9 后退按钮无法与锚 div 一起正常工作

> ID：14896975
> 
> 赞同：0
> 
> 时间：2013-02-15T14:36:21.080
> 
> 标签：javascript, internet-explorer, onclick, internet-explorer-9, browser-history

据我所知，这是一个特定于 IE 的问题，我在 IE9 中也遇到过。

如果您查看此 jsFiddle： http: [//jsfiddle.net/dvrcthewrld/uaP3v/17/](http://jsfiddle.net/dvrcthewrld/uaP3v/17/) ，您可能会发现它在框架中运行良好。即：仅当模态框可见时，单击偏移 div 或覆盖 div 会导致 history.back 事件，从而导致模态框消失。

```
<div id="dbw" name="dbw" class="dumbBoxWrap">
    <div class="dumbBoxOverlay" onclick="history.back()" >
        &nbsp;
    </div>
    <div class="vertical-offset" onclick="history.back()" >
        <div class="dumbBox" onclick="event.stopPropagation ? event.stopPropagation() : (event.cancelBubble=true)
;">
    <p>Content goes here</p>
        </div>
    </div>
</div> 
```

但是，如果您完整地查看它，而不是在一个框架中：http: [//fiddle.jshell.net/uaP3v/18/show/](http://fiddle.jshell.net/uaP3v/18/show/) 那么您会发现 IE9 适当地更改了 url，但模式并没有按预期消失。无论是通过单击 div 还是使用浏览器的后退按钮触发后退事件，都会发生这种情况。

这似乎是 IE9 中的一个错误，我也假设是早期版本。有没有适当的方法来处理这个问题而无需大幅修改我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:16:22.163

这是一个 hacky 解决方案，但它似乎有效

```
window.onhashchange = function(){
    document.body.className = document.body.className + "";
} 
```

运行示例：[jsFiddle](http://fiddle.jshell.net/G7thu/show)

# oracle - PL/SQL 用“IN”子句重写连接查询

> ID：14896977
> 
> 赞同：1
> 
> 时间：2013-02-15T14:36:22.553
> 
> 标签：oracle, plsql, where-clause, dynamic-sql

目前，我的 pl/sql 代码中有以下语句：

```
-- vList looks like '1,2,3,4'     
vStatement := 'SELECT NAME FROM T_USER WHERE ID IN ( ' || vList || ' ) '; 
Execute Immediate vStatement BULK COLLECT INTO tNames; 
```

我认为如果不好的做法连接查询，所以我想在不使用 stings 的情况下进行此查询。重写这个的方法是什么？

PS也许这里的人可以指出为什么查询连接不好，因为我没有足够的理由证明这种风格不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:43:16.747

我的猜测是您之前采取了一些步骤将 vList id 转换为分隔字符串（您没有说 vList 是如何填充的）。为什么不保留一个查询？

```
begin
...
select name
bulk collect into tNames
from t_user
where id in (select id from some_table where ...);
... 
```

多次运行时的上下文切换可能会很痛苦，但对我来说，最糟糕的是你盲目地接受参数输入是一个数字列表，而实际上它可能是任何东西。它可能（无辜地）是'1,2,X'，你会得到一个运行时错误“invalid number”。或者更糟的是，它可能是 SQL 注入攻击。它通常是不好的做法（动态 sql 确实有它的位置），但绝对不是你如何使用它。

尝试这样的事情：

```
create or replace type t_num_tab as table of number;

create or replace procedure test_proc(i_list in t_num_tab) as
  type t_name_tab is table of varchar2(100);
  l_names t_name_tab;
begin
  -- get names
  select name
  bulk collect into l_names
  from user_table
  where id in (select * from table(i_list));

  -- do something with l_names
  dbms_output.put_line('Name count: ' || l_names.count);

end; 
```

如果您需要比数字列表更复杂的东西，您可以创建一个对象类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:08:31.280

不仅仅是连接很慢。plsql 中的动态查询真的很慢。这是一个很好的关于如何以及为什么这样做的文章：

[问汤姆：我怎样才能在“列表中”做一个变量](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:210612357425)

# python - SQLAlchemy 版本化对象不起作用

> ID：14896982
> 
> 赞同：0
> 
> 时间：2013-02-15T14:36:30.920
> 
> 标签：python, sqlalchemy, bottle

我使用 SQLAlchemy 版本化对象示例作为参考。

示例：[http ://docs.sqlalchemy.org/en/rel_0_7/orm/examples.html#versioned-objects](http://docs.sqlalchemy.org/en/rel_0_7/orm/examples.html#versioned-objects)

当我更新记录时，我没有收到任何错误。正在创建 case_history 表，但版本号保持在 '1' 并且 case_history 表为空。

（是的，我知道我使用“case”作为类名。这很糟糕吗？）

这是我的代码片段：

模型.py：

```
from history_meta import Versioned, versioned_session

# set up the base class
class Base(object):

    @declared_attr
    def __tablename__(cls):
            return cls.__name__.lower()

    id              = Column(Integer, primary_key = True)
    header_row      = Column(SmallInteger)

    def to_dict(self):
            serialized = dict((column_name, getattr(self, column_name))
                    for column_name in self.__table__.c.keys())
            return serialized

Base = declarative_base(cls=Base)

class case(Versioned, Base):

    title                   = Column(String(32))
    description             = Column(Text)

    def __repr__(self):
            return self.title 
```

应用程序.py：

```
engine = create_engine(SQLALCHEMY_DATABASE_URI)
Session = sessionmaker(bind=engine)
versioned_session(Session)
db = Session()

...

@app.route('/<name>/:record', method='POST')
def default(name, record):
    myClass = getattr(sys.modules[__name__], name)
    db.query(myClass).filter(myClass.id == record).update(request.json)

    for u in db.query(case).filter(case.id == record):
            print u.version # Version is always 1

    db.commit() # I added this just to test versioning. 
```

关于为什么没有发生版本控制的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-02T21:22:23.683

对于其他在这里找到自己的方式的人......

请记住：即使`filter()`返回单个对象，该`update()`方法也是批量操作，并且行为不同。版本可能仅在`after_update()`不会触发批量操作的事件上增加。

[`update()`在此处阅读有关操作注意事项的更多信息。](http://docs.sqlalchemy.org/en/rel_1_0/orm/query.html#sqlalchemy.orm.query.Query.update)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:12:16.803

即使数据更改，更新查询也不会导致版本增加。可能有办法“倾听”这种变化，但我不知道。

您必须更改映射类的属性：

```
#Get an instance of the class
myItem = db.query(myClass).get(record)

#Change an attribute
myItem.title="foo"

#Commit if necessary                 
db.commit() 
```

# linux - bash内置函数bash源码

> ID：14896983
> 
> 赞同：6
> 
> 时间：2013-02-15T14:36:32.110
> 
> 标签：linux, bash, shell, built-in

如何找到内置 bash 函数的来源？

我知道这是一个函数：

```
$type -t MY_APP
function 
```

我看到它的代码：

```
type MY_APP
code 
```

问题是：

1.  它存储在哪里？
2.  我该如何修改它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T14:48:11.503

你可以这样做：

```
# Turn on debug
$ shopt -s extdebug

# Print out the function's name, line number and file where it was sourced from
$ declare -F my_function
my_function 46 /home/dogbane/.bash/.bash_functions

# Turn off debug
shopt -u extdebug 
```

要编辑函数，请打开包含函数定义的文件（您从上面找到的）。编辑函数并保存文件。然后将其源到您的 shell 中，如下所示：

```
$ . /path/to/function_file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:48:24.310

函数通常存储在`.bashrc`文件中（或在 中`/etc/bash.bashrc`，也存在`/etc/bashrc`于某些系统中）。[SuperUser 的这个答案](https://superuser.com/a/49292/113093)有一些关于`.bashrc`文件是什么的很好的细节。同样， Unix & Linux 站点上的[这个问题](https://unix.stackexchange.com/questions/30925/in-bash-when-to-alias-when-to-script-and-when-to-write-a-function)详细说明了何时最好使用别名、何时编写脚本以及何时编写函数。

# php - 从 codeigniter 中的结果查询中删除项目

> ID：14896985
> 
> 赞同：1
> 
> 时间：2013-02-15T14:36:34.777
> 
> 标签：php, arrays, codeigniter

我无法从 php + codeigniter 中的查询结果数组中删除项目。

这是我的代码

```
if($query->num_rows > 0)
    {
    $rows = $query->result();
        foreach ($rows as $key => $row)
        {
            $i = 0;
            $fornecedor = $row->fornecedor;
            $marca = $row->marca;
            $modelo = $row->modelo;
            $versao = $row->versao;
            $preco = $row->preco;

                foreach ($rows as $row2)
                {
                    $fornecedor2 = $row2->fornecedor;
                    $marca2 = $row2->marca;
                    $modelo2 = $row2->modelo;
                    $versao2 = $row2->versao;
                    $preco2 = $row2->preco;

                    if(($fornecedor == $fornecedor2) && ($marca == $marca2) && ($modelo == $modelo2) && ($versao == $versao2) && ($preco == $preco2))
                    {
                        $i++;
                    }
                }

            if($i > 3)
            {
                unset($row[$key]);
            }
        }
        return $query;
    } 
```

我已经在 stackoverflow 中检查了一些示例，但我无法完成这项工作。我看不到问题ty

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:39:35.430

也是`$row`，`$rows[$key]`也许我不明白一些东西，但在我看来你必须写`unset($rows[$key]);`

# windows - Windows Socket TCP 客户端仅每 200 毫秒接收一次数据 (QTCPSocket)

> ID：14896990
> 
> 赞同：2
> 
> 时间：2013-02-15T14:36:40.933
> 
> 标签：windows, macos, qt, sockets, tcp

我正在使用`QTCPSocket`连接到 TCP 服务器（在 Ubuntu 上运行）。服务器至少每 40 毫秒发送一个 1 字节的数据包。我的应用程序是实时的，因此以增加网络流量为代价尽可能快地接收数据非常重要。

从 Windows 连接 TCP 客户端后，我开始接收数据包。但是，`readyRead()`来自 的信号`QTCPSocket`仅每 200 毫秒发出一次（数据包中有 5 个字节）。我查看了 Wireshark 中的数据包，它们实际上是 5 字节的数据包。

但是，`QTCPSocket`在 Mac 上使用（实际上是完全相同的代码），我每次都会收到单独的数据包，我发送的所有 1 字节数据包都作为单字节数据包到达，这很棒。

我尝试创建一个原始 Windows 套接字（不使用`QTCPSocket`），并获得与`QTCPSocket`Windows 相同的行为。

导致 Mac 套接字以更高的时间分辨率接收数据包的区别是什么？有什么我可以设置的东西可以`setsockopt()`防止这 200 毫秒的缓冲发生吗？

我知道`TCP_NODELAY`在服务器端设置可能会解决我的问题，但是看到 Mac TCP 客户端按预期工作，必须有一种方法可以在 Windows 上获得相同的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:23:44.317

设置 mySocket->setSocketOption(QAbstractSocket::LowDelayOption, 1); 在服务器端是我发现解决这个问题的唯一方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-01T19:34:45.700

对于其他偶然发现来自搜索引擎的人：

[oggmonster](https://stackoverflow.com/users/590032/oggmonster)的上述（正确）答案也可以通过以下方式描述：

```
int on = 1;
if (setsockopt(sock, IPPROTO_TCP, TCP_NODELAY, (char*)&on, sizeof(on)))
  {
  return -1;
  } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-15T14:38:22.647

您需要确认收到的每个数据字节，以向回复 ACK 提供一些数据以供捎带。与设计您的协议的人交谈。

尝试回答诸如“为什么它在 X 上而不在 Y 上起作用”之类的问题只有在两种行为都不正确时才有用。如果它没有应用程序级别的确认，那么这两种行为都是正确的。如果其中一个不正确，那么协议应该有一种机制来控制它，例如应用层确认。如果不是，则协议已损坏。试图弄清楚为什么一个损坏的协议不起作用是没有意义的——它不起作用是因为它被损坏了。

# actionscript-3 - 使用按钮单击的actionscript 3.0函数调用

> ID：14896999
> 
> 赞同：0
> 
> 时间：2013-02-15T14:37:07.803
> 
> 标签：actionscript-3, flash

我使用按钮创建了一个简单的 Flash 播放列表，在我的舞台上，我有 4 个按钮，分别是歌曲 1、歌曲 2、停止和播放的按钮。我有一个工作代码，但我决定修改它，因为我以前的代码就像，每首歌都有每个停止和播放按钮，所以我创建了这个有一个动态停止和播放，我创建了一个函数每首歌曲，该函数将更改要加载的歌曲的文件名，

这就是问题所在，所以我首先选择一首歌曲（歌曲 1 或歌曲 2）然后单击停止，然后当我选择一首新歌曲时出现此错误

错误：错误 #2037：函数调用顺序不正确，或者之前的调用不成功。在 flash.media::Sound/_load() 在 flash.media::Sound/load() 在 playlist_fla::MainTimeline/songSelect1()

我认为它没有调用第二个函数，因为我看不到我放入其中的跟踪，无论如何这是我的代码，对于长篇文章感到抱歉，

**提前致谢**

```
var mySound:Sound = new Sound();
var myChannel:SoundChannel = new SoundChannel();
var myTransform = new SoundTransform();
var lastPosition:Number = 0;
var song;

song1.addEventListener(MouseEvent.CLICK,songSelect1);
function songSelect1(e:MouseEvent):void{
    song = "<filenameofthe1stsong>";
    mySound.load(new URLRequest(song));
    myTransform.volume = 0.5;
    myChannel.soundTransform = myTransform;
    lastPosition=0;
    trace(1);
}

song2.addEventListener(MouseEvent.CLICK,songSelect2);
function songSelect2(e:MouseEvent):void{
    song = "<filenameofthe2ndsong>";
    mySound.load(new URLRequest(song));
    myTransform.volume = 0.5;
    myChannel.soundTransform = myTransform;
    lastPosition=0;
    trace(2);
}

btnStop.addEventListener(MouseEvent.CLICK,onClickStop);
function onClickStop(e:MouseEvent):void{
    lastPosition = myChannel.position;
    myChannel.stop();
}

btnPlay.addEventListener(MouseEvent.CLICK,onClickPlay);
function onClickPlay(e:MouseEvent):void{
    myChannel = mySound.play(lastPosition);
    myChannel.soundTransform = myTransform();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:32:29.670

**更正：**

[根据 Adob​​e：](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html#load%28%29)

> 在 Sound 对象上调用 load() 后，您以后不能将不同的声音文件加载到该 Sound 对象中。要加载不同的声音文件，请创建一个新的 Sound 对象。

因此，创建一个新的声音对象将是修复它的唯一方法。

*- - - 原帖 - - -*

如果您在闪存设置中启用调试，则更容易确定究竟是哪一行导致了问题。也就是说，除了两次定义声音变换之外，您的代码看起来并没有错误。尝试这个：

```
var mySound:Sound = new Sound();
var myChannel:SoundChannel = new SoundChannel();
var myTransform = new SoundTransform();
myChannel.soundTransform = myTransform;

var lastPosition:Number = 0;
var song;

song1.addEventListener(MouseEvent.CLICK,songHandler);
song2.addEventListener(MouseEvent.CLICK,songHandler);
btnStop.addEventListener(MouseEvent.CLICK,onClickStop);
btnPlay.addEventListener(MouseEvent.CLICK,onClickPlay);

function songHandler(e:MouseEvent):void {
    switch (e.currentTarget.name) {
        case "song1":
            songSelect("<filenameofthe1stsong>")
            break;
        case "song2":
            songSelect("<filenameofthe2ndsong>")
            break;
    }
}

function songSelect(songPath:String):void {
    mySound.load(new URLRequest(songPath));
    myChannel.soundTransform.volume = 0.5;
    lastPosition = 0;
    trace("Loading " + songPath);
}

function onClickStop(e:MouseEvent):void {
    lastPosition = myChannel.position;
    myChannel.stop();
}

function onClickPlay(e:MouseEvent):void {
    myChannel = mySound.play(lastPosition);
    myChannel.soundTransform = myTransform();
} 
```