# StackOverflow 问答 13788000-13788999

# actionscript-3 - 在浏览器中调整 Flash 网页

> ID：13788007
> 
> 赞同：1
> 
> 时间：2012-12-09T13:52:17.870
> 
> 标签：actionscript-3, flash, actionscript, web

我正在使用 Adob​​e Flash CS6 开发一个网站。我给了我的文档大小为 1024 像素 x 768 像素。但是当我发布 cwebsite 时，我不知道如何使 flash 文档具有浏览器大小......例如：incontextediting.adobe.com。它完全采用 Flash 设计，但具有浏览器的尺寸。如何达到那种效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T14:01:00.180

```
stage.align = StageAlign.TOP_LEFT;
stage.scaleMode = StageScaleMode.NO_SCALE;
stage.addEventListener(Event.RESIZE, onResize); 
```

此代码使您的应用程序进入无缩放模式。在`onResize`处理程序中，您必须编写适合当前屏幕尺寸的组件和图形的代码。`Stage.stageWidth and Stage.stageHeight`属性中可用的舞台宽度和高度

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T00:41:23.480

你必须在 Flash 端做这些安排

```
stage.align = StageAlign.TOP_LEFT;
stage.scaleMode = StageScaleMode.NO_SCALE; 
```

并且您必须使用此事件侦听器使用调整大小算法调整所有内容的大小：

```
stage.addEventListener(Event.RESIZE, function(event:Event):void{
ExampleObject.x = Math.floor(stage.stageWidth/2 - ExampleObject.width/2);
ExampleObject.y = Math.floor(stage.stageHeight/2 - ExampleObject.height/2);
/*
For example: 
Centering an object
*/
}); 
```

当然，你必须做一些浏览器端的安排。我结合使用 swffit 和 swfobject，

[http://code.google.com/p/swffit](http://code.google.com/p/swffit)

[http://code.google.com/p/swfobject](http://code.google.com/p/swfobject)

# ruby - 遍历数组时删除重复项

> ID：13788014
> 
> 赞同：1
> 
> 时间：2012-12-09T13:52:48.583
> 
> 标签：ruby, hash

我有不同的包含单位的散列，分组为单位类型。我的代码旨在确定应返回哪种单元类型以进行进一步处理。但是，当检查每个列表时，会出现很多重复。第一个 if 与第一个 elsif 完全相同。如何以最好的方式干燥代码？

```
from_unit = "gr"
to_unit = "kg"

WEIGHT = {
"gr" => 1000.0,
"kg" => 1.0,
}

MEASURE = {
"mm" => 1000.0,
"cm" => 100.0,
"m" => 1.0
}

if WEIGHT.has_key?(from_unit) or WEIGHT.has_key?(to_unit)
  if WEIGHT.has_key?(from_unit) && WEIGHT.has_key?(to_unit)
    return WEIGHT
  elsif WEIGHT.has_key?(from_unit)
    raise RuntimeError, "#{to_unit} is not a known unit"
  else
    raise RuntimeError, "#{from_unit} is not a known unit"
  end
elsif MEASURE.has_key?(from_unit) or MEASURE.has_key?(to_unit)
  if MEASURE.has_key?(from_unit) && MEASURE.has_key?(to_unit)
    return WEIGHT
  elsif MEASURE.has_key?(from_unit)
    raise RuntimeError, "#{to_unit} is not a known unit"
  else
    raise RuntimeError, "#{from_unit} is not a known unit"
  end
else
  raise RuntimeError, "You can't convert #{from_unit} into #{to_unit}"
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T14:27:35.050

为简单起见，此代码段执行的检查比您的要少（真的有必要吗？），但可以完成工作：

```
def get_table(from_unit, to_unit)
  [WEIGHT, MEASURE].detect do |table|
    table[from_unit] && table[to_unit]
  end or fail("You can't convert #{from_unit} into #{to_unit}")
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T13:57:49.313

你可以这样做：

```
if !MEASURE.has_key?(from_unit) and !WEIGHT.has_key?(from_unit)
    raise RuntimeError, "#{from_unit} is not a known unit"

if !MEASURE.has_key?(to_unit) and !WEIGHT.has_key?(to_unit)
    raise RuntimeError, "#{to_unit} is not a known unit"

if WEIGHT.has_key?(from_unit) and WEIGHT.has_key?(to_unit)
    return WEIGHT

if MEASURE.has_key?(from_unit) and MEASURE.has_key?(to_unit)
    return MEASURE # Was this a typo?

raise RuntimeError, "You can't convert #{from_unit} into #{to_unit}" 
```

# android - 我们如何将 Flurry 添加到 AdMobs 或 AdWhirl 中介？

> ID：13788020
> 
> 赞同：3
> 
> 时间：2012-12-09T13:53:21.210
> 
> 标签：android, admob, adwhirl, flurry

我们如何将 Flurry 集成到 Admobs 或 AdWhirl 中介？那么我们不能使用网页乱舞，我们需要使用代码添加它吗？我在 Android 上工作，我们该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T18:14:01.850

您可以使用“自定义事件”来尝试集成不受支持的广告网络（因为 Flurry 看起来不像他们有可以与 AdWhirl 一起使用的开箱即用适配器）。

看看如何在[这里](http://code.google.com/p/adwhirl/wiki/CustomEvents)创建自定义事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T20:41:51.960

不幸的是你不能。

如果中介没有提供集成特定广告网络的选项，则实际上无法“扩展”他们的代码并包含额外的广告网络。

当您的中介无法满足广告请求时，我们使用的一种您可能想要了解的策略就是将流量发送到额外的广告网络（在本例中为 Flurry）。

# php - php无法连接到mysql

> ID：13788024
> 
> 赞同：-3
> 
> 时间：2012-12-09T13:54:08.853
> 
> 标签：php, mysql, extract-error-message

我不断收到此错误消息。这是什么意思？！

[09-Dec-2012 21:44:32] **PHP 警告：mysql_query(): Access denied for user ''@'localhost' (using password: NO)** in C:\www\IT3126Prac\Project\try.php 在线5

[09-Dec-2012 21:44:32] **PHP 警告：mysql_query()：无法**在第 5 行的 C:\www\IT3126Prac\Project\try.php中建立到服务器的链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:57:18.177

这意味着用户没有访问数据库的权限。用户名和/或密码错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T14:17:35.623

Mybe，您为数据库编写了错误的服务器/主机

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T15:36:01.520

用户名或密码错误，否则如果您尝试从另一台服务器访问数据库，则必须可以远程访问 mysql 服务器。询问您的数据库提供商是否允许从其他服务器访问，如果不允许，您将无法连接到它。尝试使用 127.0.0.1 或服务器 IP 地址作为主机名而不是 localhost。请记住，您必须首先连接到数据库，例如：

```
mysql_connect('localhost', 'username', 'password');
mysql_select_db('database'); 
```

# java - Android 从列表视图中选择两个文件

> ID：13788026
> 
> 赞同：0
> 
> 时间：2012-12-09T13:54:18.443
> 
> 标签：java, android, android-intent

我有代码在带有复选框的列表视图中显示 SD 卡的文件。它可能会加载完整的文件，而不仅仅是它们的路径！我希望用户选择两个文件，然后获取输入流的文件路径以将它们合并到第三个文件。

代码是 MainActivity.java

```
package com.example.joiner;

import java.io.File;
import java.io.FileFilter;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.SequenceInputStream;
import java.util.ArrayList;
import java.util.List;

import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {
    private Button mButton;
    private List<Model> list;
private ListView mainListView ;
 public String msg="kumkum";
 File[] sdDirectories;
 ArrayList<String> planetList;
 private List<File> h;

 ArrayAdapter<Model> adapter ;

    /** Called when the activity is first created. */

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mButton = (Button)findViewById(R.id.Button);
        //mButton.setOnClickListener(this);
        mainListView = (ListView) findViewById( R.id.mainListView );
        mButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {

                int temp;
                //Model[] a=(Model[]) list.toArray();
                for(int i=0;i<list.size();i++)
                {
                    Model b=list.get(i);
                    if(b.isSelected())
                    {
                        //Toast.makeText(MainActivity.this, b.getName(), Toast.LENGTH_LONG).show();
                        for(int counter=0;counter<sdDirectories.length;counter++)
                        {
                            if(b.getName().equals(sdDirectories[counter].getName()))
                            {
                                Toast.makeText(MainActivity.this,sdDirectories[counter].getPath(), Toast.LENGTH_LONG).show();
                                h.add(sdDirectories[counter]);
                                //h.get(0).getPath();
                            }
                        }
                    }
                }

            }

        });
        String extState = Environment.getExternalStorageState();
        //you may also want to add (...|| Environment.MEDIA_MOUNTED_READ_ONLY)
        //if you are only interested in reading the filesystem
        if(!extState.equals(Environment.MEDIA_MOUNTED)) {
          Toast.makeText(MainActivity.this, "no sd card found", Toast.LENGTH_LONG).show();

        }
        else{

            planetList = new ArrayList<String>();
            planetList.add("wajeeh");

            //for(int i=0;i<sdDirectories.length;i++)
            //planetList.add(sdDirectories[i].getName());

            planetList.add(msg);

            adapter = new Inadopter(MainActivity.this,getModel());

// Set the ArrayAdapter as the ListView's adapter.
            mainListView.setAdapter( adapter );

          }
    }
    private List<Model> getModel() {
        list = new ArrayList<Model>();
        list.add(get("Linux"));
        list.add(get("a"));
        // Initially select one of the items
        File sd = Environment.getExternalStorageDirectory();
        FileFilter MP3ANDdirectoryOnly = new FileFilter() {
            private String getExtension(File f) {
                String ext = null;
                String s = f.getName();
                int i = s.lastIndexOf('.');

                if (i > 0 &&  i < s.length() - 1) {
                    ext = s.substring(i+1).toLowerCase();
                }
                return ext;
            }

            public boolean accept(File file) {
                if(file.isDirectory()||!file.isHidden())
                    return true;

                String extension = getExtension(file);
                if (extension != null||!file.isHidden()) {
                    if (extension.equals("mp3"))
                        {
                            return true;
                    }
            }
                return false;
        }};
        sdDirectories = sd.listFiles(MP3ANDdirectoryOnly);
        for(int i=0;i<sdDirectories.length;i++)
            list.add(get(sdDirectories[i].getName()));

        list.get(1).setSelected(true);
        return list;
      }
    private Model get(String s) {
        // TODO Auto-generated method stub
        return new Model(s);
    }
} 
```

`

> InAdapter.java

```
 package com.example.joiner;

import java.util.List;

import android.app.Activity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.TextView;

public class Inadopter extends ArrayAdapter<Model> {

  private final List<Model> list;
  private final Activity context;

  public Inadopter(Activity context, List<Model> list) {
    super(context, R.layout.simpleroow, list);
    this.context = context;
    this.list = list;
  }

  static class ViewHolder {
    protected TextView text;
    protected CheckBox checkbox;
  }

  @Override
  public View getView(int position, View convertView, ViewGroup parent) {
    View view = null;
    if (convertView == null) {
      LayoutInflater inflator = context.getLayoutInflater();
      view = inflator.inflate(R.layout.simpleroow, null);
      final ViewHolder viewHolder = new ViewHolder();
      viewHolder.text = (TextView) view.findViewById(R.id.label);
      viewHolder.checkbox = (CheckBox) view.findViewById(R.id.check);
      viewHolder.checkbox
          .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
              Model element = (Model) viewHolder.checkbox
                  .getTag();
              element.setSelected(buttonView.isChecked());

            }
          });
      view.setTag(viewHolder);
      viewHolder.checkbox.setTag(list.get(position));
    } else {
      view = convertView;
      ((ViewHolder) view.getTag()).checkbox.setTag(list.get(position));
    }
    ViewHolder holder = (ViewHolder) view.getTag();
    holder.text.setText(list.get(position).getName());
    holder.checkbox.setChecked(list.get(position).isSelected());
    return view;
  }
} 
```

我需要获取两个文件的路径并将其发送到此代码

```
public class ConcateSongActivity extends Activity {
    Button mbutt;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mbutt = (Button)findViewById(R.id.button_Click_Karo);
        mbutt.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                try {
                    FileInputStream fis1 = new FileInputStream("/sdcard/viv0.wav");
                    FileInputStream fis2 = new FileInputStream("/sdcard/viv1.wav");
                    SequenceInputStream sis = new SequenceInputStream(fis1,fis2);

                    FileOutputStream fos = new FileOutputStream(new File("/sdcard/vis.wav"));

                    int temp;

                    try {
                        while ((temp = sis.read())!= -1){

                            fos.write(temp);

                        }
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:46:16.337

随着反馈链接更改为问题“这篇文章对您有用吗？” 当我尝试点击它时，除了在此处留作回答的地方提出问题外，我别无他法。

你的问题到底是什么？你不能提取两个路径还是不能合并两个文件？

# ios - 如何同时滚动三个 UIScrollView？

> ID：13788029
> 
> 赞同：0
> 
> 时间：2012-12-09T13:54:33.600
> 
> 标签：ios, uiscrollview

我正在创建一个应用程序，它是课程表。我想在窗口中显示表格。像这样：

![上代表周，左代表时间线，左下代表课程](../Images/a00cbb1c88ef2775b5842c96fb551097.png)

> 上代表周，左代表时间线，左下代表课程

因为`UIImageView`太大了，iPhone 窗口无法显示满，所以我用三个`UIScrollViews`来表示课程表。我的想法是手动移动左下角 `UIScrollView`，同时自动滚动三个`UIScrollViews`。但我无法实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:45:54.860

也许：

```
//grab scroll offset of scrolled uiscrollview
CGPoint scrollOffsetOne = self.scrollViewOne.contentOffset;

//apply that offset to the others
self.scrollViewTwo.contentOffset = scrollOffsetOne;
self.scrollViewThree.contentOffset = scrollOffsetOne; 
```

# ios - 立即高亮 TableViewCell

> ID：13788030
> 
> 赞同：1
> 
> 时间：2012-12-09T13:54:46.043
> 
> 标签：ios, uitableview

我想创建一个没有按钮的 tableView 单元格。为此，我使用 UITableViewDelegate：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [[tableView cellForRowAtIndexPath:indexPath] setSelected:YES animated:NO];
} 
```

但我有一个问题：在触地和突出显示状态出现之间有第二次延迟。如何实现高亮显示在触地时立即出现而没有延迟？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T13:55:44.687

您应该取消选中 IB 上 TableView 的 delaysContentTouches 属性。或以编程方式取消选中：

```
self.tableView.delaysContentTouches = NO; 
```

# java - ViewScoped NPE 与 Richfaces 的 mediaOutput

> ID：13788034
> 
> 赞同：0
> 
> 时间：2012-12-09T13:55:11.167
> 
> 标签：java, jsf, nullpointerexception, richfaces, view-scope

我在处理包含`<rich:fileUpload>`+ `<a4j:mediaOutput>`组件的页面时遇到了托管 Bean ViewScoped 的问题。

当我尝试上传图像时，我总是得到一个空指针异常，上传完成后将显示（=渲染）。我的页面与 Richfaces 组件的用例非常相似：http://showcase.richfaces.org/richfaces/component-sample.jsf?demo [= fileUpload&skin=blueSky](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=fileUpload&skin=blueSky)

这是异常的堆栈跟踪：

> Servlet.service()" 为 servlet FacesServlet 注入一个通用异常：com.sun.faces.mgbean.BeanManager$ScopeManager$ViewScopeHandler.getFromScope(BeanManager.java:563) 处的 java.lang.NullPointerException [jsf-impl-2.1\. 7-jbossorg-2.jar:] 在 com.sun.faces.mgbean.BeanManager$ScopeManager.getFromScope(BeanManager.java:477) [jsf-impl-2.1.7-jbossorg-2.jar:] [...其他一些痕迹...]

我的代码是这样的：

```
<rich:fileUpload fileUploadListener="#{movie_Add.uploadImage}" id="upload"
    acceptedTypes="jpg, gif, png, bmp"
    ontyperejected="alert('Only JPG, GIF, PNG and BMP files are accepted');"
    maxFilesQuantity="1" >
    <a4j:ajax event="uploadcomplete" execute="@form" render="info" />
</rich:fileUpload>
<h:panelGroup id="info" layout="block">
    <rich:panel bodyClass="info">
        <f:facet name="header">
            <h:outputText value="#{msg['admin.movies.add.image.preview']}" />
        </f:facet>
        <h:outputText value="#{msg['admin.movies.add.image.preview.nofiles']}"
            rendered="#{movie_Add.files.size()==0}" />
        <rich:dataGrid columns="1" value="#{movie_Add.files}" var="file"
            rowKeyVar="row">
            <rich:panel bodyClass="rich-laguna-panel-no-header">
                <h:panelGrid columns="2">
                    <a4j:mediaOutput element="img" mimeType="image/jpeg"
                        createContent="#{movie_Add.paint}"
                        value="#{row}" style="width:130px; height:130px;"
                        cacheable="false">
                    </a4j:mediaOutput>
                </h:panelGrid>
            </rich:panel>
        </rich:dataGrid> 
    </rich:panel>                                
</h:panelGroup> 
```

我更改了范围，替换`@ViewScoped`为`@SessionScoped`，它可以工作。但是，我不想要这个范围，因为我不关心将我的信息保存在我的托管 bean 中。另外，我在这里看到了一个快速修复但仍然很脏：[https](https://community.jboss.org/thread/168523) : //community.jboss.org/thread/168523 结合 SessionScoped 和 ViewScoped，这比我的第一次修复要好。

但我真的很想用只是，`@ViewScoped`但也许它没用，我不知道。所以如果你能解释我为什么会得到这个异常，我可以找到一个解决方案。

提前致谢。

# c - 为什么'extern'声明不适用于C中的静态函数？

> ID：13788035
> 
> 赞同：5
> 
> 时间：2012-12-09T13:55:10.660
> 
> 标签：c, static, extern

假设代码：

```
extern int foo(void);

static int foo(void)
{
        return 0;
} 
```

尝试用 GCC 编译

```
$ gcc -Wall -std=c99 1.c 
1.c:3:12: error: static declaration of ‘foo’ follows non-static declaration
1.c:1:12: note: previous declaration of ‘foo’ was here
1.c:3:12: warning: ‘foo’ defined but not used [-Wunused-function] 
```

那么，如何*声明*静态函数呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-09T13:56:08.903

> **为什么声明 by`extern`不适用于`static`函数？**

因为`extern`表示**外联**，而`static`表示**内联**。显然，你不能同时拥有相同的功能。

简单来说，当你`static`在函数上使用时，你告诉编译器请将此函数的范围仅限于这个**[翻译单元](https://stackoverflow.com/questions/1106149/what-is-a-translation-unit-in-c)**，并且不允许任何人从另一个翻译单元访问它。
虽然`extern`默认情况下函数声明，但当您`extern`明确指定时，您会告诉编译器，请允许其他翻译单元的所有人访问此函数。
很明显，编译器不能同时做这两个。

因此，请做出选择，您是否希望该功能仅在翻译单元中可见。
如果前者成功`static`而忘记`extern`。如果后者只是删除`static`.

**好读：**
[什么是外联和内联？](https://stackoverflow.com/questions/1358400/what-is-external-linkage-and-internal-linkage-in-c)

尽管上面的 Q 是针对 C++ 的，但所讨论的大部分内容也适用于 C。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T13:57:44.613

你用`static`

```
static int foo(void);

static int foo(void)
{
        return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T14:00:11.490

`extern`表示函数在不同的翻译单元（文件）中定义。 `static`表示它仅在定义它的翻译单元中使用。两者是互斥的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-07-28T05:53:40.067

不是静态可以通过像File1.c这样的外部（al）链接来解决吗？

```
static int fx(void)
{
    return int;
} 
```

文件2.c

```
extern int fx(void);

/*call */
fx(); 
```

# php - SQLTable 与另一个表中的行的链接

> ID：13788036
> 
> 赞同：2
> 
> 时间：2012-12-09T13:55:14.157
> 
> 标签：php, mysql, sql, database

我想实现一个食谱数据库。一张桌子应该存放配料及其单位，另一张桌子应该存放菜肴的食谱。但不知何故，我不知道如何实现它。菜肴表中的一个条目包含菜肴的名称和成分表中的几个 id，其中一个因子（双）表示该成分的多少单位。

现在我的问题是，我怎样才能让一道菜的这个条目包含几个带有 ingredentID 和因子的条目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T13:59:31.910

我建议你使用 3 个表：

1.  菜肴（包含菜肴 ID、名称和一些一般信息）
2.  成分（所有现有成分的列表）
3.  Recipiec（包含 3 列的表：菜 id、成分 id 和此成分的编号应用于当前菜）。

所以每道菜都会有几行：每种成分一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T14:01:03.837

你至少需要一张桌子。

```
dish
-----
dish_id
name
other_things

dish_ingredient
----------------
dish_id
ingredient_id
amount
order?
mixing_instructions?
other_stuff

ingredient
-----------
ingredient_id
other_stuff 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T14:07:27.290

基本上，您可以为此创建三个具有多对多关系的表

所有食谱的列表

```
CREATE TABLE RecipeList
(
    RecipeID INT, 
    RecipeName VARCHAR(50),
    -- .... other fields,
    CONSTRAINT tb_pk PRIMARY (RecipeID),
    CONSTRAINT tb_uq PRIMARY (RecipeName),
) 
```

所有成分的清单

```
CREATE TABLE IngredientList
(
    IngredientID INT, 
    IngredientName VARCHAR(50),
    -- .... other fields,
    CONSTRAINT tb_pk1 PRIMARY (IngredientID),
    CONSTRAINT tb_uq1 PRIMARY (IngredientName),
) 
```

和另一张桌子，其中包含每个食谱的成分

```
CREATE TABLE IngredientList
(
    IngredientID INT, 
    RecipeName INT,
    Amount INT,
    Units INT,
    InnerAmountInGrams DECIMAL(10,2),
    -- .... other fields,
    CONSTRAINT tb_pk3 PRIMARY KEY (IngredientID, RecipeName),
    CONSTRAINT tb_fk1 FOREIGN KEY (RecipeID) 
        REFERENCES  RecipeList(IngredientID),
    CONSTRAINT tb_fk2 FOREIGN KEY (RecipeName) 
        REFERENCES IngredientList(IngredientID),
) 
```

# java - 如何在 RootPanel 上显示 GWT 小部件？

> ID：13788042
> 
> 赞同：0
> 
> 时间：2012-12-09T13:56:01.073
> 
> 标签：java, html, gwt, gwt-widgets

我有一个`<div>`文件`My.html`：

```
<html><head>
<script type="text/javascript" language="javascript" src="
 path/biz.path.nocache.js"></script></head>
 <div id = "div_test"> </div> 
```

现在我写了一个`java`类来获取`test division`using `Dom`。

```
private void AddWidget() throws Exception{
 _obj = new testWidget(this._session);
 _obj.setSize("100%", "100%");
 _obj.AddTestWidget();
 RootPanel rootpanel = getViewRootPanel(div_test); // returns the division id 
 rootpanel.clear();
 rootpanel.add(_obj);   
} 
```

以下是`TestWidget.java`：

```
public class TestWidget extends ContentContainer{
  HorizontalPanel _base = new HorizontalPanel();
  protected FlexTable _bill = new FlexTable();
  Label lblTitle;

  public TestWidget(Session s) {
    super(s);
    _base.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_LEFT);
    _base.setWidth("100%");
    initWidget(_base);
    this._session= s;
    _inheritwidget = new InheritWidget(session);
  }
  public Widget AddTestWidget() {
    System.out.println("In widget");
    lblTitle= new Label("Details");
    lblTitle.setStyleName(Resources.INSTANCE.cssElements().labelBig());
    lblTitle.getElement().getStyle().setPadding(3, Unit.PX);
    _inheritwidget .setWidget(1, 0, lblBillingTitle);
    _inheritwidget .setWidget(2, 0, billingWidget);
    _base.add(_billing);
return _base;
}
} 
```

类从哪里`InheritWidget`扩展`ContentContainer`。我还检查了控制台，它显示了我`In Widget`。这意味着代码流是正确的。请告诉我应该怎么做才能加载`AddTestWidget`in的内容`HTML div`。

有没有我遗漏的部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T19:45:47.347

是什么`ContentContainer`？我无法在 GWT 库中找到它。您`TestWidget`没有扩展 GWT Widget 类。因此，您不能将其用作小部件。如果你必须扩展`ContentContainer`你的编码需求，你可以实现 GWT`isWidget`接口让 GWT 知道它是一个小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:13:46.540

```
RootPanel.get().add(Your widget) 
```

# spring - 实体检索过滤器

> ID：13788043
> 
> 赞同：0
> 
> 时间：2012-12-09T13:56:05.737
> 
> 标签：spring, hibernate, jpa, spring-roo

我有本地化的实体，我想实现一个语言过滤器。

```
@Entity
@RooJavaBean
@RooToString
@RooJpaEntity
@RooJpaActiveRecord
public class MyEntityI18n {

    @Column(columnDefinition = "text")
    @Basic(fetch=FetchType.LAZY)
    private String description;

    @NotNull
    @ManyToOne(targetEntity = MyEntity.class)
    private MyEntity backedEntity;

    @NotNull    
    private String languageCode;

    @NotNull
    @Length(min=3, max=60)
    private String name;

} 
```

有没有办法设置一个始终存在的过滤器，只要检索实体，它就会在 languageCode 字段上添加额外的条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:54:03.357

由于您使用的是 activeRecord 模式，您可以推送相关方法：

*   找到AllXxxx
*   查找XxxxEntries
*   countXxxx
*   找Xxxx

否则，您可以使用 entityManager 拦截器，或者您可以使用 jpa 存储库而不是 activeRecord 模式。

# android - 带有复选框的自定义 ListView

> ID：13788049
> 
> 赞同：2
> 
> 时间：2012-12-09T13:57:05.800
> 
> 标签：android, listview, checkbox, checked

我如何知道何时检查了 android 应用程序中自定义列表视图中的所有复选框？我有一个自定义列表视图，我只想知道列表中的所有复选框何时被选中并向用户显示一条消息，对不起我的英语。

这是我的适配器的代码，但它不起作用......

```
public class MeuAdapter extends ArrayAdapter<LinhaItem>
{

    private final List<LinhaItem> lista;
    private final Activity contexto;
    private final boolean[] pegos;
    private double total = 0;

    public MeuAdapter(Activity contexto, List<LinhaItem> lista)
    {
        super(contexto, R.layout.produtos, lista);
        this.contexto = contexto;
        this.lista = lista;
        pegos = new boolean[this.lista.size()];
        for(int i = 0; i < this.lista.size(); i++)
        {
            pegos[i] = false;
        }
    }

    static class ViewHolder
    {
        protected TextView texto;
        protected CheckBox checkbox;
        protected EditText edit;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        View view = null;
        final int posicao = position;
        if(convertView == null)
        {
            LayoutInflater inflater = contexto.getLayoutInflater();
            view = inflater.inflate(R.layout.produtos, null);
            final ViewHolder viewHolder = new ViewHolder();
            viewHolder.texto = (TextView) view.findViewById(R.id.txtDescricao);
            viewHolder.checkbox = (CheckBox) view.findViewById(R.id.chkProduto);
            viewHolder.edit = (EditText) view.findViewById(R.id.txtValor);

            viewHolder.checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
                {
                    LinhaItem elemento = (LinhaItem) viewHolder.checkbox.getTag();
                    elemento.setSelecionado(buttonView.isChecked());
                    if(elemento.Selecionado())
                    {
                        pegos[posicao] = true;
                    }
                    total += lista.get(posicao).getValor();

                    boolean cheia = true;

                    for(int i = 0; i < lista.size(); i++)
                    {
                        cheia = pegos[i];
                        //Toast.makeText(contexto, "pego["+i+"]"+pegos[i], 10000).show();
                    }

                    if(cheia)
                    {
                        Toast.makeText(contexto, "Compra finalizada,  valor total: " + total, 10000).show();
                    }
                }   
            });

            view.setTag(viewHolder);
            viewHolder.checkbox.setTag(lista.get(position));

        }
        else
        {
            view = convertView;
            ((ViewHolder) view.getTag()).checkbox.setTag(lista.get(position));
        }
        ViewHolder holder = (ViewHolder) view.getTag();
        holder.texto.setText(lista.get(position).getTexto());
        holder.checkbox.setChecked(lista.get(position).Selecionado());
        holder.edit.setText(Double.toString((lista.get(position).getValor())));

        return view;
    }

} 
```

我的新代码是：

```
package br.com.boitata.cadastroprodutos;

import java.util.List;
import java.util.ArrayList;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Color;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.widget.*;

public class CadastroProdutosActivity extends Activity {

    private Button btnInserir;
    private EditText txtDescricao;
    private EditText txtValor;
    private TextView txtTotal;
    private ListView lstProdutos;
    private ProdutoBD bd;
    private MeuAdapter adapter;

    List<Produto> lista;
    List<LinhaItem> linhas;

    private double total = 0;

    public void preencheLista(List<Produto> lp, ListView lista)
    {
        int tam = lp.size();        
        linhas = new ArrayList<LinhaItem>();

        for(int i = 0; i < tam; i++)
        {
            Produto p = lp.get(i);              
            linhas.add(getLinha(p.getDescricao()));
        }

        adapter = new MeuAdapter(this, linhas);

        //ArrayAdapter<String> adapter = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1, android.R.id.text1, valores);

        lista.setAdapter(adapter);
    }

    public LinhaItem getLinha(String texto)
    {
        return new LinhaItem(texto);
    }   

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_cadastro_produtos);

        btnInserir = (Button) findViewById(R.id.btnInserir);
        txtDescricao = (EditText) findViewById(R.id.txtDescricao);
        txtValor = (EditText) findViewById(R.id.txtValor);
        txtTotal = (TextView) findViewById(R.id.txtTotal);
        lstProdutos = (ListView) findViewById(R.id.lstProdutos);

        lstProdutos.setBackgroundColor(Color.BLACK);       

        bd = new ProdutoBD(getApplicationContext());

        lista = bd.listaProdutos();         

        preencheLista(lista, lstProdutos);          

        btnInserir.setOnClickListener(new OnClickListener() {
            public void onClick(View v)
            {
                String checados = "";
                for(int i = 0; i < lista.size(); i++)
                {
                    checados += "pego[" + i + "]" + " " + pegos[i] + " - ";
                }
                Toast.makeText(getApplicationContext(), checados, 40000).show();
            /*  Produto p = new Produto();
                p.setDescricao(txtDescricao.getText().toString());
                p.setValor(Double.parseDouble(txtValor.getText().toString()));
                bd.insere(p);           

                lista = bd.listaProdutos();

                preencheLista(lista, lstProdutos);

                int i = 0;
                total = 0;
                while(i < lista.size())
                {
                    p = lista.get(i);
                    total += p.getValor();
                    i++;
                }

                txtTotal.setText("Total: " + Double.toString(total));*/

            }
        });

    }

    private boolean[] pegos;
    private boolean[] passados;

    public class MeuAdapter extends ArrayAdapter<LinhaItem>
    {

        private final List<LinhaItem> lista;
        private final Activity contexto;        
        private double total = 0;
        private  int qtde = 0;

        public MeuAdapter(Activity contexto, List<LinhaItem> lista)
        {
            super(contexto, R.layout.produtos, lista);
            Toast.makeText(contexto, "Construindo", 10000).show();
            this.contexto = contexto;
            this.lista = lista;
            qtde = this.lista.size();
            pegos = new boolean[qtde];
            passados = new boolean[qtde];
            for(int i = 0; i < this.lista.size(); i++)
            {
                pegos[i] = false;
                passados[i] = false;
            }
        }

        public class ViewHolder
        {
            protected TextView texto;
            protected CheckBox checkbox;
            protected EditText edit;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent)
        {
            View view = null;
            final int posicao = position;
            if(convertView == null)
            {
                LayoutInflater inflater = contexto.getLayoutInflater();
                view = inflater.inflate(R.layout.produtos, null);
                final ViewHolder viewHolder = new ViewHolder();
                viewHolder.texto = (TextView) view.findViewById(R.id.txtDescricao);
                viewHolder.checkbox = (CheckBox) view.findViewById(R.id.chkProduto);
                viewHolder.edit = (EditText) view.findViewById(R.id.txtValor);

                viewHolder.checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                    @Override
                    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
                    {
                        LinhaItem elemento = (LinhaItem) viewHolder.checkbox.getTag();
                        elemento.setSelecionado(buttonView.isChecked());

                        pegos[posicao] = isChecked;

                        if(elemento.Selecionado())
                        {
                            pegos[posicao] = true;
                            qtde--;
                        }
                        else if(qtde < lista.size() && passados[posicao])
                        {
                            qtde++;
                        }                       

                        total += lista.get(posicao).getValor();

                        boolean cheia = true;

                        for(int i = 0; i < lista.size(); i++)
                        {
                            if(!pegos[i])
                            {
                                cheia = false;
                                break;
                            }
                            //Toast.makeText(contexto, "pego["+i+"]"+pegos[i], 10000).show();
                        }

                        if(cheia || qtde == 0)
                        {
                            Toast.makeText(contexto, "Compra finalizada,  valor total: " + total, 10000).show();
                        }

                    //  Toast.makeText(contexto, "Quantidade não selecionada: " + qtde, 5000).show();
                    }   
                });

                view.setTag(viewHolder);
                viewHolder.checkbox.setTag(lista.get(position));

            }
            else
            {
                view = convertView;
                ((ViewHolder) view.getTag()).checkbox.setTag(lista.get(position));
            }
            ViewHolder holder = (ViewHolder) view.getTag();
            holder.texto.setText(lista.get(position).getTexto());
            holder.checkbox.setChecked(lista.get(position).Selecionado());
            holder.edit.setText(Double.toString((lista.get(position).getValor())));

            passados[posicao] = true;

            return view;
        }

    }

} 
```

这仅适用于当前出现的行...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:09:29.057

要测试您是否选中`CheckBox`了列表行中最后一个未选中的，您可以使用多种方法。这是一个：

```
boolean allChecked = true;
for(int i = 0; i < lista.size(); i++) {
     if (!pegos[i]) {
          // it appears that one of our ChckBoxes is currently unchecked so
          // we already know that not all CheckBoxes are checked 
          allChecked = false;
          break;
     }
if (allChecked) {
    // if we get here and allChecked is true than all CheckBoxes are checked
    Toast.makeText(contexto, "All checked!!", 10000).show();
} 
```

为了避免每次用户检查时都循环该布尔数组，`CheckBox`您可以在适配器中有一个`int`字段，该字段最初是布尔数组的大小。当用户从该字段中选中`CheckBox`您减少的`1`值时，当用户取消选中`CheckBox`您在`1`该字段中增加的值时。在同一个侦听器中，您测试以查看该字段是否`0`在这种情况下所有`CheckBoxes`都被检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T15:49:16.443

您可以使用以下代码 -

```
public class MeuAdapter extends ArrayAdapter {

    private final List<LinhaItem> lista;
    private final Activity contexto;
    private final boolean[] pegos;
    private double total = 0;

    public MeuAdapter(Activity contexto, List<LinhaItem> lista)
    {
        super(contexto, R.layout.produtos, lista);
        this.contexto = contexto;
        this.lista = lista;
        pegos = new boolean[this.lista.size()];
        for(int i = 0; i < this.lista.size(); i++)
        {
            pegos[i] = false;
        }
    }

    static class ViewHolder
    {
        protected TextView texto;
        protected CheckBox checkbox;
        protected EditText edit;
    }

    public boolean isAllChecked() {
        boolean allChecked = true;
        for(int i = 0; i < lista.size(); i++) {
             if (!pegos[i]) {
                  allChecked = false;
                  break;
             }
        return allChecked;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        View view = null;
        final int posicao = position;
        if(convertView == null)
        {
            LayoutInflater inflater = contexto.getLayoutInflater();
            view = inflater.inflate(R.layout.produtos, null);
            final ViewHolder viewHolder = new ViewHolder();
            viewHolder.texto = (TextView) view.findViewById(R.id.txtDescricao);
            viewHolder.checkbox = (CheckBox) view.findViewById(R.id.chkProduto);
            viewHolder.edit = (EditText) view.findViewById(R.id.txtValor);

            viewHolder.checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
                {
                    LinhaItem elemento = (LinhaItem) viewHolder.checkbox.getTag();
                    elemento.setSelecionado(buttonView.isChecked());
                    if(elemento.Selecionado())
                    {
                        pegos[posicao] = true;
                    }
                    total += lista.get(posicao).getValor();

                    boolean cheia = true;

                    for(int i = 0; i < lista.size(); i++)
                    {
                        cheia = pegos[i];
                        //Toast.makeText(contexto, "pego["+i+"]"+pegos[i], 10000).show();
                    }

                    if(cheia)
                    {
                        Toast.makeText(contexto, "Compra finalizada,  valor total: " + total, 10000).show();
                    }
                }   
            });

            view.setTag(viewHolder);
            viewHolder.checkbox.setTag(lista.get(position));

        }
        else
        {
            view = convertView;
            ((ViewHolder) view.getTag()).checkbox.setTag(lista.get(position));
        }
        ViewHolder holder = (ViewHolder) view.getTag();
        holder.texto.setText(lista.get(position).getTexto());
        holder.checkbox.setChecked(lista.get(position).Selecionado());
        holder.edit.setText(Double.toString((lista.get(position).getValor())));

        return view;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T15:51:03.713

那样的呢？

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    textStrings = new String[]{"I'm Bob", "I'm Alice"};
    checkedArray = new boolean[textStrings.length];

    final ListView lv = (ListView) findViewById(R.id.mylist);
    lv.setAdapter(new MyBaseAdapter(this, textStrings, checkedArray));
}

private String[] textStrings;
private boolean[] checkedArray;

private class MyBaseAdapter extends BaseAdapter {

    private LayoutInflater pInflater;
    private Holder pHolder;
    private String[] pTextStrings;
    private boolean[] pCheckedArray;
    private Context pContext;

    public MyBaseAdapter(Context context, String[] textStrings,
            boolean[] checkedArray) {
        this.pContext = context;
        this.pTextStrings = textStrings;
        this.pCheckedArray = checkedArray;
        this.pInflater = (LayoutInflater) context
                .getSystemService(Service.LAYOUT_INFLATER_SERVICE);

        makeAllFalse(pCheckedArray);

    }
    private void makeAllFalse(boolean[] pCheckedArray2) {
        for (Boolean b : pCheckedArray2) {
            b = false;
        }

    }
    @Override
    public int getCount() {
        return pTextStrings.length;
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        convertView = this.pInflater.inflate(R.layout.listing, null);
        this.pHolder = new Holder();
        this.pHolder.chbox = (CheckBox) convertView
                .findViewById(R.id.chbox);
        this.pHolder.chbox.setText(pTextStrings[position]);

        final int positionItem = position;
        this.pHolder.chbox
                .setOnCheckedChangeListener(new OnCheckedChangeListener() {

                    @Override
                    public void onCheckedChanged(CompoundButton buttonView,
                            boolean isChecked) {

                        checkedArray[positionItem] = isChecked;

                        if (countChecked())
                            Toast.makeText(pContext,
                                    "All checkboxes are checked",
                                    Toast.LENGTH_SHORT).show();

                    }
                });

        convertView.setTag(this.pHolder);

        return convertView;
    }

    private boolean countChecked() {
        for (boolean b : checkedArray) {
            if (!b) {
                Log.d("xxx", "not all is checked");
                return false;
            }
        }
        Log.d("xxx", "all is checked");
        return true;

    }

    private class Holder {
        CheckBox chbox;
    }

}

} 
```

布局首先是主要的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Random Text Here"
        android:textSize="30sp" />

    <ListView
        android:id="@+id/mylist"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

这是列表布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <CheckBox
        android:id="@+id/chbox"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="item" >
    </CheckBox>

</LinearLayout> 
```

这只是一个例子。如果您不知道，请在我的答案下发布。

样本：

![并非全部点击](../Images/7c47f63d86bfc6974385516f1ece6e14.png)

> 12-09 15:53:32.290: D/xxx(620): 不是所有的都被检查

![在此处输入图像描述](../Images/4f2d584d7f8132f9f68e3915ec72ac8a.png)

> 12-09 15:54:04.150: D/xxx(620): 全部检查

# facebook - 如何在 IOS App 中使用 Facebook 登录缓存 Facebook 用户信息

> ID：13788061
> 
> 赞同：3
> 
> 时间：2012-12-09T13:58:12.280
> 
> 标签：facebook, ios5, facebook-login

我正在将 Facebook SDK 3.1 集成到我的 iOS 5 应用程序中。Facebook登录后，我必须像这样查询才能获取用户信息

```
NSString *query = @"SELECT uid, name, pic_big,username FROM user where uid = me()";

NSDictionary *queryParam =
[NSDictionary dictionaryWithObjectsAndKeys:query, @"q", nil];

[FBRequestConnection startWithGraphPath:@"/fql"
                             parameters:queryParam
                             HTTPMethod:@"GET"
                      completionHandler:^(FBRequestConnection *connection,
                                          id result,
                                          NSError *error) { .... 
```

现在这种方法有两个问题：

1- 用户刚刚等待通过 Facebook 对自己进行身份验证，现在他必须再次等待从网络获取他的基本个人资料信息。

-Q- 如何通过 Facebook 登录网络调用获取此信息？

-2- 当用户从登录屏幕重新打开应用程序时，如果 FBSession 仍然打开并且有效的 Facebok 将重新验证该用户，但我仍然需要
从网络获取他的基本个人资料信息......

-Q- 如何在我的应用中缓存用户的基本资料信息？FBSession 对象中是否有可以缓存用户信息的 id？

提前致谢。摩恩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:45:15.303

> 1- 用户刚刚等待通过 Facebook 对自己进行身份验证，现在他必须再次等待从网络获取他的基本个人资料信息。
> 
> -Q- 如何通过 Facebook 登录网络调用获取此信息？

如果使用得当，最初的等待时间应该最短。您不能将 API 调用“附加”到登录请求。Facebook 曾经有一个 preload_fql 工具，但不再支持。

> -2- 当用户从登录屏幕重新打开应用程序时，如果 FBSession 仍然打开并且有效的 Facebok 将重新验证该用户，但我仍然需要从网络获取他的基本个人资料信息......
> 
> -Q- 如何在我的应用中缓存用户的基本资料信息？FBSession 对象中是否有任何 id 可以缓存用户信息？

这是您的应用程序设计的问题。我的建议是创建一个 NSMutableDictionary 作为类属性，然后调用它`cached_user_data`或其他东西。在那里保存用户数据。

# django - 包含名称空间的 url 之前的 django url 参数

> ID：13788062
> 
> 赞同：2
> 
> 时间：2012-12-09T13:58:14.630
> 
> 标签：django, django-templates, django-urls

在我的最后一个问题中，我询问了如何在包含 urls.py 之前让 url 为参数工作，并且它起作用了。 [Django {% url %} 当 url 带有以下参数时： url(r'^foo/<parameter>/$', include(some.urls))](https://stackoverflow.com/questions/13521172/django-url-when-urls-with-parameters-like-urlrfoo-parameter-incl)

现在我想将相同的包含 urls.py**与 namespaces**一起使用。

*网址.py*

```
urlpatterns = patterns('',
    url(r'^/foo/(?P<parameter_1>\d+)/', include('bar.urls', namespace='foo', app_name='foo')),
    ) 
```

*bar.urls.py*

```
urlpatterns = patterns('',
    url(r'^/bar/$', 'bar.views.index', name='bar'),
    url(r'^/bar/(?P<parameter_2>\d+)/$', 'bar.views.detail', name='bar_detail'),
    ) 
```

要获取模板中的 url，我使用：

```
1\. {% url foo:bar parameter_1=1 %} or {% url for:bar 1 %}
2\. {% url foo:bar_detail parameter_1=1 parameter_2=1 %} or {% url foo:bar_detail 1 1 %} 
```

我希望得到 url: 1.`/foo/1/bar/`和 2.`/foo/1/bar/1`但它不起作用。

有趣：如果我打电话：

```
1\. {% url foo:bar %}
2\. {% url foo:bar_detail parameter_2=1 %} or {% url foo:bar_detail 1 %} 
```

我得到了网址：1.`/foo/(?P<parameter_1>%5Cd+)/bar/`和 2。`/foo/(?P<parameter_1>%5d+)/bar/1`

我的问题：我的代码有问题还是代码没有用，我想做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:18:46.513

我再次搜索并发现了故障。中存在一个错误`/django/core/urlresolvers.py`。

[我在https://code.djangoproject.com/ticket/11559#no1](https://code.djangoproject.com/ticket/11559#no1)找到了票。

要解决此问题，您必须使用[https://github.com/django/django/commit/02dcbe3317](https://github.com/django/django/commit/02dcbe3317)`/django/core/urlresolvers.py`中更改的文件替换。

`python manage.py runserver`使用url-tags重新启动 def-server 后，解析正确。我`/foo/1/bar/`从而`{% url foo:bar 1 %}`不是`/foo/(?P<parameter_1>%5Cd+)/bar/`.

# maven - maven编译器插件冲突

> ID：13788063
> 
> 赞同：2
> 
> 时间：2012-12-09T13:58:23.867
> 
> 标签：maven, compiler-construction

我使用 maven 编译器插件版本 2.3.2 并更新了第三方包，从那时起，当我执行时，`mvn clean install`我得到：

> [错误] 无法执行目标 org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project adserver：编译失败：编译失败：[错误] \amobee\svn\afs -wurfl\adserver-parent\adserver\src\main\java\com\amobee\datamodel\mediation\Publisher.java:[8,42] 包 edu.emory.mathcs.backport.java.util 不存在 Blockquote

我查看了第三方包的 pom，我看到他们从这个插件的 2.3 版本转移到了 2.0.2。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:29:20.077

根据消息“Publisher.java:[8,42] package edu.emory.mathcs.backport.java.util 不存在”，它看起来更像是缺少依赖项而不是插件问题。

# java - 为什么可以声明没有初始值的变量？

> ID：13788067
> 
> 赞同：7
> 
> 时间：2012-12-09T13:59:16.513
> 
> 标签：java, variables, declaration

我正在阅读 Gilles Dowek 的*《语言编程原理》*：

他说，也可以声明一个变量而不给它一个初始值，而且我们必须小心不要使用一个没有初始值声明的变量并且没有被赋值。这会产生错误。

**注意：**本书的作者提到了在 Java 上声明没有初始值的变量的可能性。

那么，为什么这个变量声明是有效的呢？我什么时候使用它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T14:01:50.267

例如，你可以有这样的东西：

```
int i;
if (first_condition)
    i = 1;
elseif (second_condition)
    i = 2;
else
    i = 0; 
```

您的变量需要在外部声明`if`以供以后使用，但其值在`if`条件内是固定的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-09T15:22:45.950

许多不同的语言有许多不同的原因。

**内存**
当您声明一个变量时，您需要一些内存来保存该变量。这涉及向操作系统的内核请求内存，或某种跟踪内存的监视程序。简而言之，这可能是一项昂贵的操作。因此，在许多情况下，希望同时分配对象所需的所有内存，然后再分配以后必须分配给它的任何值。这样，您可以提高程序在关键部分的性能。这个用例很常见，以至于允许在没有初始化的情况下声明的特性是允许的。然而，良好的实践断言，在所有其他情况下，您应该在分配时初始化变量。

将内存分配视为官僚机构。文书工作太多了。因此，如果您知道稍后将使用大量内存，您可以在单个事务中预先请求大量内存，而不是每次都请求内核。

**昂贵的初始化**
这一点与上面的一点非常相似。假设您有一个 100 万乘以 100 万的数组。初始化这样一个数组是一个昂贵的过程。使用默认值这样做是愚蠢的，因此，这样的功能是分配内存然后根据需要使用。

在这里，就像您购买大量乐高积木来构建某些东西，但您想以默认蜘蛛侠的形状购买它们。无论如何，当您以后要重塑它们时，店主或您将不得不更加努力地将它们制成蜘蛛侠的形状。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-09T14:23:52.793

如果你真的看看当你声明一个变量并初始化它（分配一个初始值）时会发生什么，你会发现在机器指令级别或 Java 的字节码中，这两者都使用了大量的计算能力脚步。

1.  声明变量意味着分配内存、创建请求类型的实例等
2.  然后初始化该内存位置，再次需要更多处理以将默认值移动到分配的内存位置，例如如果默认值为 0，则用 0 填充它。（注意：当随机内存位置分配给内存可能包含的变量时任何模式，由前一个值留在那里）

因此，如果用户在没有首先为其类型提供可接受的值的情况下使用变量，那么如果存在的值不正确，则可能会出现错误。

因此，如果一种语言强制你在声明时初始化一个变量（或自己这样做），那么它会减少出错的机会，但它可能会浪费处理能力来处理你并不真正想要的东西。

另一方面，如果它允许您在不初始化变量的情况下声明变量，它会给您控制权，并且可能会为您节省一些计算能力，但会增加出错的机会。（假设您有一个场景，变量的初始值取决于其他一些条件，这些条件将相应地考虑并分配变量。在这种情况下，在声明时初始化 var 可能只是浪费处理能力）。

语言决定他们想走哪条路，主要取决于他们认为自己的力量是什么。

如果它是为了让程序员有机会控制并制作高度优化的程序，那么除了更多的东西之外，他们通常会允许在不初始化的情况下声明变量。

但是，如果该语言是关于强迫程序员编写更多无错误的程序，那么它将采用另一条路径。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-06T00:34:26.850

如果 Java 要求类对象的字段必须始终在读取之前写入，这将要求要么

*   类对象的构造函数必须写入该对象的所有字段，包括那些在以后没有第二次编写的情况下编码永远不会读取的字段；这既丑陋又低效。

*   每个字段都必须能够保存一个`never been written`不同于可以写入它的任何其他值的值。

*   编译器必须解决停止问题以确定是否可以在未写入的情况下读取字段。

*   语言必须接受在没有用户代码编写的情况下读取字段的可能性。

在这些可能的选择中，#4 是最不邪恶的。为了避免未定义的行为，Java 定义了读取从未写入的字段的行为：它将包含其类型的默认值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-09T14:07:53.953

例如，您可以在验证脚本中声明一个空 var，

```
$error='';
if(empty($_POST['first_name']{
$error=$error."You did not enter a name"; 
```

}

像这样，但我只会在代码重新声明它之后立即使用它，如上所述，这样它就不会被“放错”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-01T12:57:08.450

好的，这是一个例子。我目前正在设置在 PDF 论坛上设置为持久的全局值。对于这个应用程序，我想将这些值用作数据存储，就像文本字段一样。不是最好的方法，但它适用于这个例子。我可以将值设置为持久的全局变量，而不是用数百个隐藏的文本字段填充我的论坛。

如果我的初始减速度设置为**0**或**“”**作为变量的值，它将不会在会话之间保留数据。论坛的初始化会将值重置为空。就像 Scrips 一样，论坛按顺序运作。在分配值以传递变量之前，它将首先识别文档中的所有脚本。因此有必要声明没有值的变量，以便初始化不会替换值。

一般来说，在顶部声明所有变量也是很好的内务管理。可以随时声明它们，但我发现当向脚本添加新元素时，我必须上下移动行以保持代码干净。如果变量在使用时就声明了，那么在声明之前使用变量也变得非常容易，这是行不通的。

此外

在声明时分配值是有效的，但不是通用的占位符值。在大多数脚本中，int 并不像说**int x = 5 那样简单；** 更多时候我们调用诸如**this.getField("TextBox3").value;这样的数据。**或其他一些行代码。通过分配诸如**“”**或**0**或**true**之类的通用值，即使您未能正确使用某个值，您的函数也可以工作。通过不分配值，如果您未能利用变量，那么您的函数将失败，从而允许您在解决问题时缩小可能性。如果**int x;** 在您使用**x**时仍然是**NaN****而您的数据收集和验证可能是问题的根源。**

 ****一般来说**，在顶部声明所有值并避免设置通用值，除非你必须这样做。如果您要稍后定义**x**的值，请不要将其设置为***int x = 0;*** .

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-02T00:35:27.703

我是 C++ 新手，但我认为这些信息也可能会有所帮助。

**来自：*编程：使用 C++ 的原则和实践***：

> 为什么 C++ 同时提供声明和定义？声明/定义的区别反映了我们需要使用什么（接口）和我们需要什么来做它应该做的事情（一个实现）之间的根本区别。对于变量，声明提供类型，但只有定义提供对象（内存）。对于函数，声明再次提供类型（参数类型加上返回类型），但只有定义提供函数体（可执行语句）。请注意，函数体作为程序的一部分存储在内存中，因此可以公平地说函数和变量定义会消耗内存，而声明则不会。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-09T14:02:17.217

就像是：

```
//declare without giving value.
int i;

//set value
i=9; 
```**

# java - ImageIcon 方法不适用于所有图像

> ID：13788068
> 
> 赞同：1
> 
> 时间：2012-12-09T13:59:17.450
> 
> 标签：java, image, swing, imageicon

我试图让 jpeg 显示在 JFrame 上，我注意到有些图像文件可以工作，而另一些则不能。我正在使用 Eclipse，我所有的图像都在项目的根目录中。当我运行调试器并且它到达我的断点时，它会在不会显示的图像上将图像高度和图像宽度报告为 -1。它会在显示的图像上报告正确的值。

起初我认为这与图像大小有关，但在使用 mspaint 中的分辨率后，我意识到事实并非如此。

到目前为止，这是我的代码：

```
import java.awt.*;
import java.awt.image.*;
import java.awt.event.*;
import javax.swing.*;
import javax.imageio.*;
import java.io.File;

public class icon {

    public static void main(String[] args) {
        constructVNCForm();
    }

public static void constructVNCForm() {
        //Vars for GUI and essential layout code
        final JFrame frame = new JFrame("This should be on top");
        frame.setSize(800, 640);
        Container content = frame.getContentPane();
        frame.setVisible(true);

        //image code here:
        ImageIcon image = new ImageIcon("trial4.jpg");
        //ABOVE WORKS

        JLabel imageLabel = new JLabel(image);
        FlowLayout flow = new FlowLayout(FlowLayout.CENTER);
        //add the image to the frame
        content.add(imageLabel);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        content.setLayout(flow);
    }
} 
```

你们中有人对 ImageIcons 有任何问题吗？我所有的 jpeg 都是 300x300 以下的各种尺寸。我是 Java 新手，所以如果您对我的代码有任何建议，请提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T14:21:00.783

测试了几个不同大小的图像，以下工作正常。通常`setVisible(true)`方法应该在最后被调用。

```
public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame("This should be on top");
                frame.setSize(800, 640);
                ImageIcon image = new ImageIcon("someImage.jpg");
                JLabel imageLabel = new JLabel(image);
                FlowLayout flow = new FlowLayout(FlowLayout.CENTER);
                frame.getContentPane().add(imageLabel);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(flow);
                frame.pack();
                frame.setVisible(true);
            }
        });
    } 
```

# php - URL 缩短代码以缩短实际页面

> ID：13788069
> 
> 赞同：1
> 
> 时间：2012-12-09T13:59:20.017
> 
> 标签：php, url

我正在尝试将此脚本[https://github.com/briancray/PHP-URL-Shortener](https://github.com/briancray/PHP-URL-Shortener)用于我自己的网站。在自述文件中，它在这里说明了这一点

要使用 PHP 以编程方式缩短 URL，请使用以下代码：

```
$shortenedurl = file_get_contents('http://yourdomain.com/shorten.php?longurl=' . urlencode('http://' . $_SERVER['HTTP_HOST']  . '/' . $_SERVER['REQUEST_URI'])); 
```

如果我将此代码添加到我网站的任何页面，它应该缩短实际的站点链接。但它不会向我显示链接并缩短它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:02:52.850

正在做

```
$shortenedurl = file_get_contents('http://yourdomain.com/shorten.php?longurl=' . urlencode('http://' . $_SERVER['HTTP_HOST']  . '/' . $_SERVER['REQUEST_URI'])); 
```

只会缩短它并将其保存为变量。要显示它，您需要使用 显示变量的内容[`echo`](http://php.net/manual/en/function.echo.php)。试试这个：

```
$shortenedurl = file_get_contents('http://yourdomain.com/shorten.php?longurl=' . urlencode('http://' . $_SERVER['HTTP_HOST']  . '/' . $_SERVER['REQUEST_URI']));
echo $shortenedurl; 
```

# javascript - BNF 或任何其他符号中的 Excel 公式语法

> ID：13788074
> 
> 赞同：4
> 
> 时间：2012-12-09T14:00:12.107
> 
> 标签：javascript, bnf

我正在寻找 BNF 或其他符号中的 excel 公式的语法。我必须在 BNF 或类似符号中创建语法，然后使用 javascript，我们需要解析输入公式以进行有效性检查，并且实际的公式评估发生在服务器端。

~拉梅什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-16T07:36:59.997

[MS-XLS](http://msdn.microsoft.com/en-us/library/dd908135%28v=office.12%29.aspx)有一个自由形式的语法（试图成为一个 EBNF 但远非正式）

[MS-OE376](http://msdn.microsoft.com/en-us/library/ff533995%28v=office.12%29.aspx)和 ECMA-376 的 L.2.16 部分提供了更多提示。

但是要回答你的问题，没有官方的 BNF

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-05T20:03:27.033

[MS-XLSX]的第 2.2.2 节（第 32 页）[：Office Open XML SpreadsheetML 文件格式的 Excel (.xlsx) 扩展](https://interoperability.blob.core.windows.net/files/MS-XLSX/%5bMS-XLSX%5d.pdf)具有描述 Excel 公式的有用语法。[该规范的其他版本](https://docs.microsoft.com/en-us/openspecs/office_standards/ms-xlsx/2c5dee00-eff2-4b22-92b6-0738acd4475e)也可用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-10T23:35:05.340

这是作者在 javascript 中解析 Excel 公式的网站。他的解析器还有其他版本可用。

[http://ewbi.blogs.com/develops/2004/12/excel_formula_p.html](http://ewbi.blogs.com/develops/2004/12/excel_formula_p.html)

# codeigniter - 如何禁用从此钩子加载默认模板？

> ID：13788078
> 
> 赞同：0
> 
> 时间：2012-12-09T14:01:17.343
> 
> 标签：codeigniter, hook, codeigniter-2

我越来越多地搜索像 cakephp 这样最好的简单布局系统，我发现了这篇文章

[CodeIgniter 布局而不使用额外的库](http://www.syahzul.com/blogs/item/codeigniter-layout-without-using-additional-library)

**现在我需要在需要时禁用此布局功能，但我不知道如何禁用它？** 如果我禁用了钩子，我认为它已被禁用，任何人都知道这样做的方法或任何方法

控制器示例

```
class Welcome extends CI_Controller {

    public $layout = 'default';

    public function index()
    {
        $this->load->view('welcome_message');
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:05:47.070

嗨，只需将另一个布局名称传递给 $layout 变量。

```
class Welcome extends CI_Controller {

    public $layout = 'my_inner';

    public function index()
    {
        $this->load->view('welcome_message');
    }
} 
```

my_inner 应该在 application/views/layout 目录中

如果你想禁用布局，只需将 null 传递给 $layout

```
class Welcome extends CI_Controller {

    public $layout = null;

    public function index()
    {
        $this->load->view('welcome_message');
    }
} 
```

# sharepoint - 创建多 SharePoint 页面代码

> ID：13788084
> 
> 赞同：-2
> 
> 时间：2012-12-09T14:01:58.777
> 
> 标签：sharepoint, properties, web-parts, publishing

使用 C# 代码在 sharepoint 上创建发布页面并添加一个包含 webpart 属性窗格的 webpart。

需要帮助，因为我必须制作很多页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T09:01:14.937

解决方案是使用 Power shell。

# symfony - Silex 子表单集合

> ID：13788086
> 
> 赞同：0
> 
> 时间：2012-12-09T14:02:12.193
> 
> 标签：symfony, twig, silex

我正在使用 Silex 并尝试构建一个包含一组字段的表单，这些字段属于一个组。

可以做类似于下面代码的事情吗？（我的示例目前没有产生任何错误，但 Twig 中没有列出任何内容。）

**在我的路线中：**

```
$builder = $app['form.factory']->createBuilder('form');

$tags[] = array('label' => 'Tag A', 'data' => 1);
$tags[] = array('label' => 'Tag B', 'data' => 2);

foreach($tags as $key => $tag) {
  $builder->add('tags', 'collection', array(
    'type'   => 'text',
    'allow_add' => true,
    'allow_delete' => true,
    'options'  => array(
      'label' => $tag['label'],
      'constraints' => array(new Assert\NotBlank()),
      'data' => $tag['data']
    ),
  ));
}

$form = $builder->getForm(); 
```

**在树枝中：**

```
<ul class="tags">
  {% for tag in form.tags %}
    <li>{{ form_row(tag) }}</li>
  {% endfor %}
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:40:35.683

我有一段时间没有使用 Silex，但原理应该与 Symfony 相同。

您不应该在这样的循环中创建集合。您基本上是为每个标签创建多个集合。相反，您想要所有标签的单个集合。我没有对此进行测试，但这些方面的东西应该可以工作......

```
// form variables ...
$tags[] = array('label' => 'Tag A', 'data' => 1);
$tags[] = array('label' => 'Tag B', 'data' => 2);
$data = array( 'tags' => $tags );

$builder = $app['form.factory']->createBuilder('form', $data);
$builder->add('tags', 'collection', array(
    'type'   => 'text',
    'allow_add' => true,
    'allow_delete' => true,
    'options'  => array(
        'constraints' => array(new Assert\NotBlank()),
    ),
)); 
```

# jquery - 使用 jQuery 的 MVC3 缓慢的请求时间

> ID：13788088
> 
> 赞同：3
> 
> 时间：2012-12-09T14:02:13.290
> 
> 标签：jquery, asp.net-mvc, windows, performance, request

我的产品服务器上的 MVC3 应用程序有问题（我在 VS12 中没有任何问题）。

*   jQuery 1.8.2
*   自动常见问题
*   存储库模式
*   log4net
*   自动映射器

该应用程序在 _Layout.cshtml 中有一些列表，必须通过 jQuery 每 5 秒更新一次。

代码看起来或多或少是这样的：

```
<script type="text/javascript">
    var products = $("#products ul");

    function updateProducts() {
        setTimeout(function() {
            $.post("/Product/List", { rows: 10 }, function(html) {
                products.before(html).remove();
                products = $("#products ul");

                // To avoid multiple posts update the list until the post is done
                updateProducts();
            });
        }, 5000);
</script> 
```

控制器看起来像这样：

```
public PartialViewResult List(int rows)
{
    var products = productService.GetNewest(rows);
    return PartialView(products);
} 
```

该服务如下所示：

```
public class ProductService : Service<Product>, IProductService
{
    private IRepository<Product> repository;

    public ProductService(IUnitOfWorkFactory unitOfWorkFactory)
    {
        IUnitOfWork unitOfWork = unitOfWorkFactory.Create();
        this.repository = unitOfWork.ProductRepository();
        base.Repository = this.repository;
        base.UnitOfWork = unitOfWork;
    }
}

public List<Product> GetNewest(int rows)
{
    var products = repository.GetAllQueryable(); //=> returns a IQueryable
    products.OrderBy(o => o.CreateDate).Take(rows);

    return products.ToList();
} 
```

存储库（EF 5.0 代码优先）：

```
public class Repository<T> : IRepository<T> where T : Base
{
    private RepositoryContext _dataContext;
    private IDbSet<T> _dbset;

    public virtual IQueryable<T> GetAllQueryable()
    {
        var all = _dbset;
        return all;
    }
} 
```

工作单位：

```
public class UnitOfWork : Disposable, IUnitOfWork
{
    private RepositoryContext _dataContext;
    private Repository<Product> _productRepository;

    public IUnitOfWork GetCurrent()
    {
        _dataContext = _dataContext ?? (_dataContext = new RepositoryContext());

        return this;
    }

    public IRepository<Product> ProductRepository()
    {
        _productRepository = _productRepository ?? new Repository<Product>(_dataContext);

        return _productRepository;
    }
} 
```

部分视图仅包含一个返回产品名称的 foreach。

即使我只有一个需要更新**的列表，页面加载速度也会变慢**并且是随机的。我还使用 log4net 来检查当 jQuery 尝试获取产品时是否发生了某些事情，但日志是空的 :)。

我还调查了 MiniProfiler 的问题。最慢的（最多 15 秒）是 ASP.NET 开始请求。

产品服务器：

*   视窗 2008
*   3GB 内存
*   2 个其他 .NET 应用程序
*   SQL08

**编辑**

看来问题已经解决了，耶！感谢@vtortola 对会话的提示。我做了一些研究，发现了很好的链接。然后我创建了一个新的控制器，上面有 [SessionState(SessionStateBehavior.ReadOnly)]。就是这样，一个属性解决了我的问题:)！

这是一个有用的链接，尤其是当您想要像 ReadAndWrite 这样的 SessionStateBehavior [http://www.davidcoombes.co/?p=151](http://www.davidcoombes.co/?p=151)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:07:53.320

您当时更新了多少列表？会话对象使用悲观的并发方法，这意味着同一会话只能同时处理一个请求。如果您正在并行执行多个请求，请尝试禁用该控制器中的会话，或将会话设置为只读。看一下 SessionStateAttribute。

干杯。

# visual-studio - Visual Studio 2012 - %(Link.OutputFile)

> ID：13788091
> 
> 赞同：1
> 
> 时间：2012-12-09T14:02:44.427
> 
> 标签：visual-studio, visual-studio-2012

我正在尝试使用 Visual Studio 2012 在 Windows 8 上构建[Horde3d](http://horde3d.org/wiki/index.php5?title=Building_Horde3D)。我得到的错误非常明确，但我仍然不知道我必须改变什么。例如我找不到`%(Link.OutputFile)`任何地方

> > C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppBuild.targets(1137,5): 警告 MSB8012: TargetPath(C:\horde3d\Horde3D\Samples\Chicago../ ../Build/Sample Chicago/Debug\Sample Chicago.exe) 与链接器的 OutputFile 属性值 (C:\horde3d\Horde3D\Build\Sample Chicago\Debug\Sample_Chicago.exe) 不匹配。这可能会导致您的项目构建不正确。**要更正此问题，请确保 $(OutDir)、$(TargetName) 和 $(TargetExt) 属性值与 %(Link.OutputFile) 中指定的值匹配**。1
> 
> C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppBuild.targets(1139,5): 警告 MSB8012: TargetName(Sample Chicago) 与链接器的 OutputFile 属性值 (Sample_Chicago) 不匹配）。这可能会导致您的项目构建不正确。**要更正此问题，请确保 $(OutDir)、$(TargetName) 和 $(TargetExt) 属性值与 %(Link.OutputFile) 中指定的值匹配**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T19:58:37.293

我自己解决了。我用cmake输出了一个vs2012项目。

# javascript - Javascript 滑块标题宽度（按文本）

> ID：13788094
> 
> 赞同：0
> 
> 时间：2012-12-09T14:03:09.200
> 
> 标签：javascript, css, slider, width, caption

我在 themeforest 的 clickr 登陆页面上有 Slider Cycle（我已经购买了它）。

我将滑块添加到效果很好的图像的标题，但是 - 我需要修复一件事：标题宽度！

标题是相同的标题，不会随文本的宽度而变化。用短文本看到大宽度，这对眼睛不好。

这是JS：

```
// -- Cycle Slider Settings --

$(document).ready(function(){
    $('#slider').cycle({
        fx: 'scrollHorz',
        before: onBeforeCallbackFunction,
        after: onAfterCallbackFunction,
        speed:  1300, 
        timeout: 4000,
        easing:'easeInOutBack',     
        sync:1,
        pause:1,        
        pager:'#pager',     
        // callback fn that creates a thumbnail to use as pager anchor 
        pagerAnchorBuilder: function(idx, slide) { 
            return '<li><a href="#"></a></li>'; 
        }
    });
})

function onBeforeCallbackFunction(curr, next, opts) {
    //slide out the caption
    $('.caption').animate({ right: -220}, 300);
    $('.caption one').animate({ right: -120}, 200);
}

function onAfterCallbackFunction(curr, next, opts) {
    var index = opts.currSlide; //zero based index of slides
    // adjust prev/next visibility
    $('#prev')[index == 0 ? 'hide' : 'show']();
    $('#next')[index == opts.slideCount - 1 ? 'hide' : 'show']();
     //  slide in the caption  
    $('.caption').eq(index).animate({ right: 0}, 600);
    console.log(index)
} 
```

这是CSS：

```
/* -- 4\. SLIDER -- */

.caption{ position:absolute; top:75%; background: #333; color:#FFF; font-size:14px; width:200px;height:1em; padding:.5em 5px 10px 5px; right:-220px; z-index:20}

.caption one{ position:absolute; top:75%; background: #333; color:#FFF; font-size:14px; width:100px;height:1em; padding:.5em 5px 10px 5px; right:-120px; z-index:20}

.slider_wrap { position:relative; overflow:hidden; margin:0px; padding:0px; width:392px; height:274px; background:#fbfdff; border:1px solid #e0e4ea; padding:7px; border-radius:6px; -moz-border-radius:6px; -webkit-border-radius:6px; -khtml-border-radius:6px }
#slider { position:relative; overflow:hidden; margin:0px; padding:0px; list-style:none }
#slider li { float:left; width:392px; height:274px; overflow:hidden }
#pager { position:relative; overflow:hidden; text-align:center; margin:0px; padding:12px 0px 0px; list-style:none; z-index:999; line-height:0px; background:url(images/slider_shadow.png) 50% 0px no-repeat }
#pager li { display:inline-block; width:10px; margin:0px 2px }
#pager li a { display:block; width:10px; height:11px; background:url(images/pager.png) -14px 0px no-repeat }
#pager li.activeSlide a { background-position:0px 0px } 
```

请参阅此处的页面：[Clickr Slider Cycle](http://cor.co.il/landing/click/index.html)

或者，如果您愿意：[JSfiddle](http://jsfiddle.net/rami7250/yWdSe/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:52:00.313

所以问题来自于集合`width=200px;`。为了使其可调整，请在以下代码中找到`style.css`：

```
.caption{ ..... width:200px; } 
```

并将其更改为`width: auto;`. 这应该使标题宽度与文本一样宽。

# php - 尝试添加文本 PHP 时图像变得混乱

> ID：13788101
> 
> 赞同：0
> 
> 时间：2012-12-09T14:03:51.110
> 
> 标签：php, image-processing

我正在尝试将文本添加到预定义的图像，但没有这样做。我正在使用的代码如下：

```
<?php   
header("Content-type: image/png");
if(file_exists("stats_gen.png")){ unlink("stats_gen.png");} //delete old version
$string = "text";
$im     = imagecreatefrompng("stats.png");
$textcolor = imagecolorallocate($im, 0, 0, 255);
imagestring($im, 5, 0, 0, $string, $textcolor);
imagepng($im); //show the image for debug purposes
imagepng($im, "stats_gen.png"); //save the image
imagedestroy($im);
?> 
```

stats.png 看起来像这样：哦，不支持图像格式。好吧，这个： http: [//lolmewn.nl/stats/stats.png](http://lolmewn.nl/stats/stats.png)并最终像[http://lolmewn.nl/stats/stats_gen.png](http://lolmewn.nl/stats/stats_gen.png)看起来很垃圾。我究竟做错了什么？谷歌似乎没有给出任何答案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:03:04.760

使图像背景不透明。呵呵。

# c++ - makefile，缺少分隔符错误

> ID：13788103
> 
> 赞同：7
> 
> 时间：2012-12-09T14:03:53.927
> 
> 标签：c++, g++, makefile, cygwin

我写了一个很简单`makefile`的`c++`程序，但是它返回`makefile:2: *** missing separator. Stop.`错误。它出什么问题了？

`makefile`：

```
all:
[tab]g++ function.cpp -o out 
```

`cygwin`我在和中编译程序`Ubuntu`。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T14:09:37.677

您需要一个真正的制表符而不是 g++ 命令前面的空格，也不需要放入`function.h`g++ 命令。

```
all:
    g++ function.cpp  -o out
^^^ tab here 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T14:04:50.937

而不是 4 (8?) 个空格，而是`<tab>`在第二行的开头使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-17T12:25:55.943

[正如这里](http://www.gnu.org/software/make/manual/html_node/Error-Messages.html)所指出的，导致此错误的最常见原因是，当`make`需要制表符时，行会缩进空格。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-09T14:04:53.223

第二行必须以制表符开头。

第一行是目标，然后在目标下面定义规则。规则行必须全部以制表符开头。

# authentication - 如何使用 Passport.js 访问 OAuth 的状态参数？

> ID：13788107
> 
> 赞同：28
> 
> 时间：2012-12-09T14:04:19.870
> 
> 标签：authentication, passport.js

我正在使用 Passport.js 进行身份验证，并且根据[Google 的 OAuth2 文档](https://developers.google.com/accounts/docs/OAuth2Login#formingtheurl)，我传入了一个状态变量：

```
app.get('/authenticate/googleOAuth', function(request, response) {
  passport.authenticate('google', {
    scope:
    [
      'https://www.googleapis.com/auth/userinfo.profile',
      'https://www.googleapis.com/auth/userinfo.email'
    ],
    state: { blah: 'test' }
  })(request, response);
}); 
```

但是，我以后似乎无法访问该变量：

```
passport.use(new googleStrategy(
{
    clientID: '...',
    clientSecret: '...',
    callbackURL: '...',
    passReqToCallback: true
},
function(request, accessToken, refreshToken, profile, done) {
  console.log('state: ' + request.query.state);
  login(profile, done);
})); 
```

request.query.state 未定义。request.param("state") 也不起作用。

身份验证回调后如何获取该变量？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-04-21T16:56:13.663

这不起作用的原因是因为您将状态作为对象而不是字符串传递。似乎护照并没有为您确定该值。如果你想通过 state 参数传递一个对象，你可以这样做：

```
passport.authenticate("google", {
  scope: [
    'https://www.googleapis.com/auth/userinfo.profile',
    'https://www.googleapis.com/auth/userinfo.email'
  ],
  state: base64url(JSON.stringify(blah: 'test'))
})(request, response); 
```

正如 Rob DiMarco 在他的回答中指出的那样，您可以访问`state`回调`req.query`对象中的参数。

我不确定编码应用程序状态并将其传递到`state`参数中是一个好主意。OAuth 2.0 RFC[第 4.1.1 节](https://www.rfc-editor.org/rfc/rfc6749#section-4.1.1)将状态定义为“不透明值”。它旨在用于[CSRF 保护](https://www.rfc-editor.org/rfc/rfc6749#section-10.12)。在授权请求和回调之间保留应用程序状态的更好方法可能是：

1.  生成一些`state`参数值（例如 cookie 的哈希）
2.  `state`在启动授权请求之前将应用程序状态作为标识符持久化
3.  `state`使用从 Google 传回的参数在回调请求处理程序中检索应用程序状态

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T06:20:31.890

对此进行简要测试，使用 Node.js v0.8.9，Google OAuth 2.0 授权请求的运行时配置参数最终通过库中的`getAuthorizeUrl`方法进行格式化`node-auth`。此方法依赖于`querystring.stringify`格式化重定向 URL：

```
exports.OAuth2.prototype.getAuthorizeUrl= function( params ) {
  var params= params || {};
  params['client_id'] = this._clientId;
  params['type'] = 'web_server';
  return this._baseSite + this._authorizeUrl + "?" + querystring.stringify(params);
} 
```

（以上复制自[https://github.com/ciaranj/node-oauth/blob/efbce5bd682424a3cb22fd89ab9d82c6e8d68caa/lib/oauth2.js#L123](https://github.com/ciaranj/node-oauth/blob/efbce5bd682424a3cb22fd89ab9d82c6e8d68caa/lib/oauth2.js#L123)）。

使用您指定的状态参数在控制台中进行测试：

`querystring.stringify({ state: { blah: 'test' }})`=>`'state='`

作为一种解决方法，您可以尝试对对象进行 JSON 编码，或使用单个字符串，这应该可以解决您的问题。然后，您可以`state`在回调请求处理程序中通过`req.query.state`. `JSON.parse(req.query.state)`访问时请记住。

# javascript - 输入的设置值不适用于子元素

> ID：13788113
> 
> 赞同：0
> 
> 时间：2012-12-09T14:05:01.617
> 
> 标签：javascript, jquery, html, children

我似乎无法理解这一点，我在`each`循环中有这段代码：

```
$('#prices_table tbody tr:last').children().eq(2).val("Y U NO WORK?!"); 
```

现在上面的代码不起作用，但是如果我尝试设置文本或 html 它确实指定了权利并更改了文本，但是设置值似乎不起作用。

不用说，具体元素是文本输入。

我在[这个](https://stackoverflow.com/questions/10654595/jquery-setting-hidden-input-value-not-working-as-expected-in-ie7-and-ie8)问题中看到作者似乎能够解决元素的 attr 问题，这意味着：

```
$('#prices_table tbody tr:last').children().eq(2).attr("value","Y U NO WORK?!"); 
```

但这也没有用。我的页面上没有错误，知道可能是什么问题吗？

我应该提到，寻址元素是由上面的克隆 1 行创建的，使用：

```
$('#prices_table tbody tr:first').clone(true).appendTo('#prices_table').show(); 
```

以防万一，这是元素的html：

```
<input class="itext product_prices_inputs" type="text" name="prices[]" value="0"/> 
```

我的代码在`(document).ready`.

由于我的大部分代码都是用 PHP 生成的，因此这是特定的输出 HTML `tr`：

```
<tr style="">
<td>
<select class="iselect pricelist_products_select" name="pricelist_product[]" >
     //very big select
    </select>
</td>
<td class="product_price">85</td>

<td>
<input class="itext product_prices_inputs" type="text" name="prices[]" value="0">
</td>
<td>
<a href="#" class="delete_price">delete</a>
</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:17:17.120

`th`您正在尝试将输入标签作为 tr 的子标签来访问，因为除了标签之外或`td`内部标签之外，不可能有任何`tr`标签。您应该更深入地`DOM`发现该元素的级别更低。

这样的事情应该做：

```
$('#prices_table tr:last input') 
```

访问该表最后一行内的输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T14:19:47.227

Arash Milanis 的回答让我意识到我正在尝试设置`val()`，`td`而不是它的孩子。这段代码最终奏效了，因为`td`只有 1 个孩子：

```
$('#prices_table tbody tr:last').children().eq(2).children().eq(0).val("Y U NO WORK?!"); 
```

# c++ - c++中的叉积

> ID：13788114
> 
> 赞同：3
> 
> 时间：2012-12-09T14:05:15.720
> 
> 标签：c++, python

给定以下 Python（来自[http://norvig.com/sudoku.html](http://norvig.com/sudoku.html)）

```
def cross(A, B):
    "Cross product of elements in A and elements in B."
    return [a+b for a in A for b in B]

cols     = '123456789'
rows     = 'ABCDEFGHI'
squares  = cross(rows, cols) 
```

这会产生：

```
['A1', 'A2', 'A3', 'A4', 'A5', 'A6', 'A7', 'A8', 'A9', 'B1', 'B2', 'B3', ...] 
```

作为练习，我想在 C++ 中做同样的事情。目前我有：

```
#include <iostream>
#include <map>
#include <vector>

using std::string;
using std::vector;

static vector<string> cross_string(const string &A, const string &B)
{
    vector<string> result;

    for (string::const_iterator itA = A.begin(); itA != A.end(); ++itA) {
        for (string::const_iterator itB = B.begin(); itB != B.end(); ++itB) {
            char s[] = {*itA, *itB, 0};
            result.push_back(string(s));
        }
    }
    return result;
}

int main(int argc, char** argv)
{
    const char digits[] = "123456789";
    const char rows[]   = "ABCDEFGHI";

    vector<string> res = cross_string(rows, digits);

    for (vector<string>::const_iterator it = res.begin();
         it != res.end(); ++it) {
        std::cout << *it << std::endl;
    }
} 
```

这行得通，但我希望有更好的方法。这也只做字符串，而 python 做任何列表......

* * *

编辑：

感谢所有的答复。我接受了我最了解的那个，但阿尔夫的回答紧随其后。我注意到所有人都使用 C++11，并且想知道作为 C++ 的新手，我是否应该直接采用它而不是学习旧标准。但这也许最适合另一个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T14:40:01.447

好吧，只展示代码比解释要短：

```
#include <iostream>         // std::wcout, std::endl
#include <string>           // std::string
#include <utility>          // std::begin, std::end
#include <vector>
using namespace std;

string sum( char const a, char const b ) { return string() + a + b; }

template< class Container >
auto cross( Container const& a, Container const& b )
    -> vector< decltype( sum( *begin( a ), *begin( b ) ) ) >
{
    typedef decltype( sum( *begin( a ), *begin( b ) ) ) ResultItem;
    vector< ResultItem >   result;

    for( auto&& itemA : a ) for( auto&& itemB : b )
    {
        result.push_back( sum( itemA, itemB ) );
    }
    return result;
}

wostream& operator<<( wostream& stream, string const& s )
{
    return (stream << s.c_str());
}

template< class Item >
wostream& operator<<( wostream& stream, vector<Item> const& v )
{
    stream << "[";
    bool isFirstItem = true;
    for( auto&& item : v )
    { 
        if( !isFirstItem ) { stream << ", "; }
        stream << item;
        isFirstItem = false;
    }
    stream << "]";
    return stream;
}

int main()
{
    string const cols       = "123456789";
    string const rows       = "ABCDEFGHI";
    auto const squares      = cross( cols, rows );

    wcout << squares << endl;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T14:51:02.297

奇怪的`cross_product`是，C++ 算法库中缺少它。它可以很容易地添加，但正如 Jerry 和 Alf 的回答所显示的，对于如何做到最好，意见不一。事实上，我仍然会做不同的事情。Jerry 的接口符合其他 C++ 算法的接口，但他没有抽象出叉积运算，我会这样做：

```
template <typename InputIt1,
          typename InputIt2,
          typename OutputIt,
          typename F>
void cross_product(InputIt1 begin1,
                   InputIt1 end1,
                   InputIt2 begin2,
                   InputIt2 end2,
                   OutputIt out,
                   F f) {
    for (auto i = begin1; i != end1; ++i)
        for (auto j = begin2; j != end2; ++j)
            *out++ = f(*i, *j);
} 
```

在您的示例中，该调用将如下所示：

```
auto digits = "1234546789";
auto chars = "ABCDEFGHI";
vector<string> result;

cross_product(digits, digits + strlen(digits),
              chars, chars + strlen(chars),
              back_inserter(result),
              [](char a, char b) { return string() + a + b; }); 
```

（我不只是喜欢 C++11 吗？是的，我喜欢。）

在一个适当的库中，我会提供第二个重载，它提供一个默认`f`操作，该操作创建一个类似于 Jerry 的代码所做的元组。甚至可以将其进一步抽象以允许两个以上的范围——毕竟，Python 列表推导允许您迭代两个以上的范围）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-09T14:43:23.377

你当然可以使这个通用：

```
template <class InIt1, class InIt2, class OutIt>
void cross_product(InIt1 b1, InIt1 e1, InIt2 b2, InIt2 e2, OutIt out) {  
    for (auto i=b1; i != e1; ++i) 
        for (auto j=b2; j != e2; ++j) 
            *out++ = std::make_pair(*i, *j);
} 
```

请注意，您通常不希望模板参数是集合中对象的类型，而是集合迭代器的类型。例如，您可以这样使用：

```
std::ostream &operator<<(std::ostream &os, std::pair<char, int> const &d) { 
    return os << d.first << d.second;
}

int main() { 
    std::vector<char> a{'A', 'B', 'C', 'D'};
    std::vector<int> b{ 1, 2, 3, 4};

    cross_product(a.begin(), a.end(), b.begin(), b.end(),
        infix_ostream_iterator<std::pair<char, int> >(std::cout, ", "));
    return 0;
} 
```

...应该产生这样的输出：

```
A1, A2, A3, A4, B1, B2, B3, B4, C1, C2, C3, C4, D1, D2, D3, D4 
```

另请注意，我在大部分代码中都使用了一些 C++11 功能。如果您使用的是较旧的编译器（或来自 Microsoft 的编译器），则需要进行一些编辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T14:22:37.357

为 A 类和 B 类模板化。然后成对`std::pair<A, B>`

# javascript - 用\"替换引号

> ID：13788118
> 
> 赞同：0
> 
> 时间：2012-12-09T14:07:14.920
> 
> 标签：javascript, string, replace, quotation-marks

我正在使用带有一些 javascript 的 html 页面。我想要做的是在按下提交按钮后显示一条消息和一个按钮。在按下这个新按钮时，文档状态应该会回到之前的状态。我的尝试：

```
function Submin()
{
  var str=document.Inputs.innerHTML;
  newstr = str.replace("\"", "\\\"");
  document.Inputs.innerHTML="<p style=\"text-align:center\">The data has been successfully submitted <br /><input type=\"button\" value=\"Back\" onclick=\"document.Inputs.innerHTML=\\\"" + newstr + "\\\" \/></p>";
} 
```

我完全被逃避和双重逃避的事情弄糊涂了。但在我看来，它应该以某种方式工作。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:13:40.400

首先，您可以在双引号字符串中使用单引号。其次，不要在这里使用内联事件处理程序。最好的选择是使用真正的事件处理程序：

```
function Submin() {
    var str=document.Inputs.innerHTML;
    document.Inputs.innerHTML="<p style='text-align:center'>The data has been successfully submitted <br /><input type='button' value='Back' ></p>";
    document.Inputs.getElementsByTagName("input")[0].onclick = function() {
        document.Inputs.innerHTML = newstr;
    };
} 
```

# wordpress - Wordpress 页面布局/模板

> ID：13788122
> 
> 赞同：2
> 
> 时间：2012-12-09T14:07:50.927
> 
> 标签：wordpress, templates

我已经成功创建了我的第一个 wp 主题，但我遇到了一个小问题，我敢肯定它缺乏经验。

这是我的问题；我根据我在 Dreamweaver 中的 index.html 创建了我的主题。现在我正在尝试添加一个新页面（关于），但问题是我的 index.html 和 about.html 的内容布局不一样。

我可以创建一个模板，以便我可以为 wordpress 中的每个页面选择我想要保留的区域和不需要的区域吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T14:13:25.387

是的，这是自定义页面模板的 codex 链接；

[http://codex.wordpress.org/Theme_Development#Custom_Page_Templates](http://codex.wordpress.org/Theme_Development#Custom_Page_Templates)

您可以创建一个新模板，并根据需要使其看起来与默认模板完全不同，然后将该模板应用于后端页面，如下图所示；

![在此处输入图像描述](../Images/57272fef322a64e52b27ed5708433e1e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T22:32:33.593

你应该添加

```
<?php
/*
Template Name: Name of your template
*/
?> 
```

所以被识别为模板，将文件保存在 .php

# java - 如何从子类创建多个对象

> ID：13788124
> 
> 赞同：1
> 
> 时间：2012-12-09T14:07:57.377
> 
> 标签：java, static, subclass, superclass

> **可能重复：**
> [无法对非静态字段进行静态引用](https://stackoverflow.com/questions/8101585/cannot-make-a-static-reference-to-the-non-static-field)

我在这里创建了这段代码：http: [//mibpaste.com/naGV58](http://mibpaste.com/naGV58) 使用 arraylists 来获得所需的结果。如您所见，每个代理都使用到达（PVector）; 方法。

我尝试通过实现继承和多态性来重新配置整个过程，以创建一些子类等。这里的新代码：http: [//mibpaste.com/WwZBWz](http://mibpaste.com/WwZBWz) 当我尝试应用特定方法时会产生问题。错误是：

无法对非静态字段 MW2.location 进行静态引用

你知道如何解决它吗？我想我必须从每个子类创建新对象，但我不知道如何......

我尝试过的任何事情都已经失败了。我什至不确定语法。

任何帮助将非常感激！

```
agents = new ArrayList<Capsule>(); // creating the agents

for (int i = 0; i < 85; i++) {
if (i < 20) agents.add(new MW1(random(width),random(height),color(255,0,0),i));
else if (i < 45) agents.add(new FW1(random(width),random(height),color(0,255,0),i));
else if (i < 65) agents.add(new MW2(random(width),random(height),color(155,0,0),i));
else agents.add(new FnW2(random(width),random(height),color(0,155,0),i));
}
}

//--------------configuring the canvas & the counter-------------

void draw() {
background(255);
time(); //reference to the visual timer

if(millis() - time >= wait){
println(counter);//if it is, do something
temp=counter;
time = millis();//also update the stored time
counter++; // counter augmentation

if(counter >180){ // check whether time exceeds 180 sec. aka 24:00 hours
counter=0; 
}
}

//-------------------------------------------------------------

work.Default(); //main-basic functions of (W) facility
retail.Default(); //main-basic functions of (R) facility
school.Default(); //main-basic functions of (S) facility
leisure.Default(); //main-basic functions of (L) facility

PVector vectorOfwork = new PVector(work.location.x, work.location.y); 
PVector vectorOfretail = new PVector(retail.location.x, work.location.y); 
PVector vectorOfschool = new PVector(school.location.x, school.location.y); 
PVector vectorOfleisure = new PVector(leisure.location.x, leisure.location.y); 

for( Capsule agent : agents) { // instancing - creating objects
agent.Default(); // global separation that affects ALL the agents
agent.separate(agents); // global separation that affects ALL the agents

if (counter>0 && counter<=30) {

if (agent instanceof FnW2)
agent.arrive(MW2.location); 
}
}
} 
```

# regex - 将带参数的url重定向到不带参数的相同url

> ID：13788128
> 
> 赞同：1
> 
> 时间：2012-12-09T14:08:51.177
> 
> 标签：regex, apache, .htaccess, redirect, http-status-code-301

使用文件 .htaccess，我正在尝试像这样重定向 url：

```
http://www.mysite.com/a-page/?fp=123&sp=456&tp=789 
```

到：

```
http://www.mysite.com/a-page/ 
```

所以基本上将不关心参数值的url重定向到没有任何参数的相同url。

我使用过 RewriteCond/RewriteRule、Redirect 和 RedirectMatch，但没有任何运气。

我最近的尝试是：

```
 RewriteCond %{QUERY_STRING} ^.+$
 RewriteRule ^a-page/$ http://www.mysite.com/a-page/? [L,R=301] 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:04:03.740

好吧，我找到了解决方案：

```
RewriteCond %{QUERY_STRING} . [NC]
RewriteCond %{REQUEST_URI} /a-page/
RewriteRule ^ a-page/? [L,R=301] 
```

# windows-phone-7 - Windows Phone 呼叫状态

> ID：13788130
> 
> 赞同：1
> 
> 时间：2012-12-09T14:09:01.893
> 
> 标签：windows-phone-7, windows-phone-8

我今天为 windows Phone 开发而生，希望我能从社区的好评中得到新事物和新想法，我想知道 windows phone API 中有什么方法可以检测通话状态吗？我来自 android 开发，在 android 中有电话状态侦听器和呼叫，它提供三种状态，如空闲、摘机和响铃，有什么方法可以在 windows 手机中检测到相同的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T17:07:52.810

没有任何关于调用的 API。

# command-line - 将 jar 设置为文件的默认程序

> ID：13788132
> 
> 赞同：0
> 
> 时间：2012-12-09T14:09:15.777
> 
> 标签：command-line, jar, file-format, default-programs

我想用我自己的 jar 文件打开一个特定的文件格式。这意味着：我想双击 test.bo2 文件，这应该打开我的 java 程序并发送该文件的路径（可能作为命令行参数）。这样的事情可能吗？

目前我猜 .jar 文件不是程序，那么是否有一种解决方法可以从 .exe 或类似的东西运行 java 文件？有什么建议么？

而且，更进一步，如何在第一次启动时自动设置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:43:31.100

当您谈论“.exe”时，我假设您使用的是 Windows。

`ftype`您可以使用and注册一个新的扩展和相应的程序`assoc`：

打开命令行窗口，然后键入以下内容：

1.  注册新的扩展：

    `assoc .bo2=GenaeDocument`

2.  将新类型与程序相关联：

    `ftype GenaeDocument=javaw.exe -jar \path\to\your\program.jar "%1"`

您显然需要调整 jar 文件的路径。这也假设`javaw.exe`可以在路径上找到。如果不是这种情况，只需使用`javaw.exe`.

在此之后，双击`.bo2`文件应该会启动您的应用程序。我假设您使用的是 Swing (GUI) 应用程序，因此 ftype 使用的是`javaw.exe`. 如果您的应用程序是控制台程序，则应使用`java.exe`

（请注意，这也可以通过 ConrolPanel/Explorer 以某种方式完成，但我发现使用命令行更快更容易）

# objective-c - 从索引中提取的 Objective C 可变数组

> ID：13788136
> 
> 赞同：0
> 
> 时间：2012-12-09T14:09:25.870
> 
> 标签：objective-c, arrays, indexing

嗨，我有两个数组，一个有 200 + 个对象（从不更改），另一个是整数数组（作为 NSNumber 对象）什么是创建第三个数组的最简单方法，该数组将是数组 1 中所有对象的数组包含在数组 2 的索引数组中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T14:22:27.130

一种选择是将索引数组转换为 an`NSIndexSet`然后使用`objectsAtIndexes:`

```
NSArray *objects = @[@"A", @"B", @"C", @"D", @"E", @"F", @"G"];
NSArray *indexArray = @[@(0), @(2), @(6)];

NSMutableIndexSet *indexSet = [NSMutableIndexSet indexSet];
for (NSNumber *number in indexArray) {
    [indexSet addIndex:[number unsignedIntegerValue]];
}
NSArray *filtered = [objects objectsAtIndexes:indexSet]; 
```

结果：`A, C, G`

当然，如果可以的话，最好直接使用索引集，而不是数组。

或者你可以只使用一个简单的循环。

```
NSMutableArray *filtered = [[NSMutableArray alloc] 
                             initWithCapacity:indexArray.length];
for (NSNumber *number in indexArray) {
    [filtered addObject:objects[[number unsignedIntegerValue]]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T14:18:11.043

您可以创建集合并使用方法`NSMutableSet`

```
NSArray *array1 = @[ @1, @2, @3 ];
NSArray *array2 = @[ @2 ];

NSMutableSet *set = [NSMutableSet setWithArray:array1];
[set intersectSet:[NSSet setWithArray:array2]];

NSLog(@"%@", set.allObjects);

//=>( 2 ) 
```

# c# - c#泛型类型的重载错误

> ID：13788139
> 
> 赞同：6
> 
> 时间：2012-12-09T14:10:10.267
> 
> 标签：c#, generics, overloading

我想根据不同的泛型类型使用方法重载来获得不同的结果。这没用。我的代码清楚地显示了它。

```
static class Helper
{

    public static bool Can(int i)
    {
        return true;
    }

    public static bool Can(Object o)
    {
        return false;
    }
}

class My<T>
{
    public static bool can = Helper.Can(default(T));
}

Console.WriteLine(Helper.Can(default(int)));//True,it is OK

Console.WriteLine(My<int>.can);//false?? why the overload doesn't work
Console.WriteLine(My<Object>.can);//false 
```

为什么`My<int>`调用 Helper.Can(Object o) 而不是 Helper.Can(int i)？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T14:11:32.940

它不是那样工作的。

重载完全在编译时解决；泛型类型参数在运行时解析。由于编译器不
知道，您的代码将始终调用.`T``int``Can(Object)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T14:27:06.480

*通常，它会在编译时解析为 Object，但您可以使用dynamic*关键字告诉它等到运行时：

```
class My<T>
{
   public static bool can = CanWithDynamic();

   private static bool CanWithDynamic() {
      dynamic runtimeT = default(T);
      return Helper.Can(runtimeT);
 } 
```

因此，这将适用于您正在尝试做的事情，并且将调用正确的重载。但是，与在运行时解决的任何问题一样，都会产生与之相关的性能成本。可能不多，但是如果您经常调用此方法，它可能会产生影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T14:23:26.537

它有点冗长，但你可以通过使用反射来实现你想要的：

```
class My<T>
{
    static bool doStuff()
    {
        var rightMehod = typeof(Helper).GetMethods().Where(p =>
            {
                if (!p.Name.Equals("Can"))
                    return false;

                if (!p.ReturnType.Equals(typeof(bool)))
                    return false;

                if (p.GetParameters().Length != 1)
                    return false;

                var par = p.GetParameters().First();
                return par.ParameterType.Equals(typeof(T));
            }).FirstOrDefault();

        if (rightMehod == null)
        {
            return Helper.Can(default(T));
        }
        else
        {
            return (bool)rightMehod.Invoke(null, new object[] { default(T) });
        }
    }

    public static bool can = doStuff();
} 
```

这边走，

```
My<string>.can == false
My<int>.can == true
My<object>.can == false 
```

当然，通过一些额外的技巧（和泛型类型的使用），您将能够在许多不同的情况下广泛地重用该片段。

补充一点：在这个例子中，我对你的具体例子使用了直接类型比较。请注意，在处理继承类型时，这将无法正常工作（当然，还有一些额外的歧义：）。

# c# - 使用 DotNetZip 压缩和解压缩文件

> ID：13788140
> 
> 赞同：1
> 
> 时间：2012-12-09T14:10:11.817
> 
> 标签：c#, compression, zip, dotnetzip

我正在使用 DotNetZip。使用它来压缩 mp3 文件。

```
ZipFile zip = new ZipFile();
zip.Password = "123";
zip.AddFile("R:\\abc\\a\\a 2 z.mp3");
zip.Save("R:\\abc\\a\\aaa.zip"); 
```

提取 aaa.zip 后，我得到一个损坏的 mp3 文件。原来有 3.62MB 时有 3.31MB 数据。如何解决这个问题？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T14:18:23.720

该文档[在此处](http://dotnetzip.herobo.com/DNZHelp/html/547e4c24-4683-96df-036e-19bc34ba27e4.htm)说明：

> 请注意，ZipFile 类实现了 IDisposable 接口。为了让 ZipFile 生成一个有效的 zip 文件，您可以在 using 子句中使用它（在 VB 中使用），或者显式调用 Dispose() 方法。请参阅示例以了解如何使用 using 子句。

因此，尝试将您的代码包装在一个`using`块中：

```
using (ZipFile zip = new ZipFile())
{
   zip.Password = "123";
   zip.AddFile("R:\\abc\\a\\a 2 z.mp3");
   zip.Save("R:\\abc\\a\\aaa.zip");
} 
```

[`Save`](http://dotnetzip.herobo.com/DNZHelp/html/22db64c9-849a-9069-4d15-2da91c318f02.htm)另请参阅文档页面上的各种示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:40:44.177

这个问题真的是未知数。该问题仅发生在该指定文件上。我尝试了其他文件，没有发现任何问题。感谢你们。

# objective-c - 如何访问子视图及其属性？

> ID：13788141
> 
> 赞同：0
> 
> 时间：2012-12-09T14:10:19.533
> 
> 标签：objective-c, rubymotion

我正在使用 Rubymotion 开发一个 iOS 应用程序。我需要访问视图的子标签来更改它的文本。

如何访问子视图（及其属性）来修改它们？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:53:59.623

如果您使用 Xcode (Interface Builder) 来设计您的视图，那么您将需要使用标记来访问您的子视图。RubyMotion中没有`properties`。可以使用`attr_accessor`为属性定义 setter/getter，但是由于 Xcode 不理解 Ruby 代码，因此无法告诉 Interface Builder 如何将控件与属性名称相关联。我已经成功完成了一个最初用 Objective-C 编写的项目，并在 RubyMotion 项目中使用了`.xib`和文件。`.storyboard`在这种情况下，如果您使用`ivars`与 Objective-C 中的属性相同的名称创建，那么一切都会正常工作。

如果您`UIView`以编程方式创建您的 s，那么您可以`ivar`在将子视图添加到视图之前将每个子视图存储在一个中。

# batch-file - 通过批处理文件从注册表中读取值

> ID：13788142
> 
> 赞同：1
> 
> 时间：2012-12-09T14:10:25.443
> 
> 标签：batch-file

在我的批处理文件中，我需要检查机器上安装的 oracle 的版本。我想阅读机器包含的 oracl_home。我在注册表中有一个路径，例如：KEY_LOCAL_MACHINE\SOFTWARE\zdf\oracle，我想读取 oracle 下的属性名称。我该怎么做？？？？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:17:41.147

1.  我认为您在“KEY_LOCAL_MACHINE”中错过了“H”。
2.  使用 reg 查询：

    `reg query "HKEY_LOCAL_MACHINE\SOFTWARE\zdf\oracle" /s`

`/s`递归查询所有子键和值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T14:18:29.870

假设你的注册表路径下的 oracle 是 10.0

```
 @echo off
regedit /e C$D$L$A$.bxt "HKEY_LOCAL_MACHINE\your\regisgry\path"
echo "set" > C$D$L$A$.bat
find "oracle" <C$D$L$A$.bxt >>C$D$L$A$.bat 
```

# c++ - 1 字节整数不转换 i/o 格式

> ID：13788143
> 
> 赞同：3
> 
> 时间：2012-12-09T14:10:28.753
> 
> 标签：c++, hex, uint, iomanip

我写了下面的代码，它以十六进制格式输入一个数字并以十进制格式输出：-

```
#include<iostream>
#include<iomanip>
#include<stdint.h>

using namespace std;

int main()
{
  uint8_t c;
  cin>>hex>>c;
  cout<<dec<<c;
  //cout<<sizeof(c);
  return 0;
} 
```

但是当我输入 c（12 的十六进制）时，输出又是 c（而不是 12）。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T14:16:55.900

这是因为`uint8_t`通常是`typedef`for `unsigned char`。所以它实际上读`'c'`作 ASCII `0x63`。

改为使用`int`。

```
#include <iostream>
#include <iomanip>
using namespace std;

int main()
{
    int c;
    cin>>hex>>c;
    cout<<dec<<c<<'\n';
    return 0;
} 
```

程序输出：

```
$ g++ test.cpp 
$ ./a.out 
c
12

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T14:17:05.653

`uint8_t`这实际上是一个不幸的副作用`unsigned char`。因此，当您存储 c 时，它存储 c 的 ASCII 值（十进制 99），而不是数值 12。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-05T04:32:08.853

`uint8_t`是一个别名，`unsigned char`不幸的是`ostream`试图将它作为一个字符输出。这已在 C++20 中修复[`std::format`](https://en.cppreference.com/w/cpp/utility/format/format)：

```
#include <format>
#include <iostream>
#include <stdint.h>

int main() {
  uint8_t n = 42;
  std::cout << std::format("{}", n);
} 
```

输出：

```
42 
```

# c++ - 如何使用 Marsyas 创建 MEL 滤波器组？

> ID：13788144
> 
> 赞同：3
> 
> 时间：2012-12-09T14:10:31.597
> 
> 标签：c++, audio, filter, mel

我正在使用 Marsyas 库开发一个应用程序。

我将一些 MarSystems 添加到“系列”-MarSystem。现在我想*添加一个 MEL 或 BARK**滤波器组***（带通滤波器）来计算每个波段的能量。我会使用“ **TriangularFilterBank** ”来完成此操作，但如何正确使用此 MarSystem 设置 MEL 滤波器组？

之后我想***一次访问******两个****连续帧****的每个****波段的**处理数据*******。你是怎样做的？******

 ******所描述场景的代码：

```
Marsyas::MarSystem *net = manager.create("Series", "net");
net->addMarSystem(manager.create("SoundFileSource","src"));

// ... 

net->addMarSystem(manager.create("Windowing", "ham")); // creates "frames"
net->addMarSystem(manager.create("Spectrum", "spec"));
net->addMarSystem(manager.create("PowerSpectrum", "powerSpec"));

// How to add a mel filter band here? <---

net->addMarSystem(manager.create("Energy", "en"));

// ...  

while (net->getctrl("SoundFileSource/src/mrs_bool/hasData")->to<Marsyas::mrs_bool>()) 
{
    // This processes one frame at a time at the moment:
    net->tick(); 
    Marsyas::mrs_realvec vec = net->getctrl("mrs_realvec/processedData")->to<Marsyas::mrs_realvec>(); 

    // How can I access the pocessed data of EACH band of WTO consecutive 
    // frames at ONCE here? <--    -

} 
```

1.) 如何在系统中添加 mel 滤波器波段？

2.) 如何一次访问两个连续窗口的每个波段的处理数据？******

# python - Python：如何从另一个程序中获取和更新值？

> ID：13788145
> 
> 赞同：1
> 
> 时间：2012-12-09T14:10:38.783
> 
> 标签：python, sockets, networking

对，现在我做了一个小警报。

首先，它从用户那里获得价值。此值设置为限制。

其次，输入第二个值，然后检查它是否超过“限制”值，如果超过，它会循环发出警报，直到程序关闭。否则，它会再次请求该值，然后重新检查它。

这一切都很好。但这里的实际意图是让它流式传输值或让它们每半秒更新一次。（我可以做计时）来自另一个同时运行的程序。

我决定选择 Core Temp，它有这个插件，显然充当服务器，可以从 CPU 询问状态信息。

有人告诉我我的任务很简单，（在 Google Group 上被问过一次，之后他们再也没有回来过）

我被告知

> 编写一个打开网络套接字的小函数或类，连接到该插件并询问它您需要的信息。

然后我需要找出这个插件用于通信的网络协议。

有人可以告诉我具体怎么做吗？并解释我可能正在使用的步骤和模块或“功能”（？）？

这是我到目前为止写的：

```
print("\t\tTemperature Alarm\n\n")
print("Please enter the value at which the temperature\n should not exceed\n")
try:
    Limit = int(input("\nLimit: "))
except ValueError:
    print("You must have not entered a numerical value, please do so\n or the program will close")
    Limit = int(input("\nLimit: "))
xvalue = int(input("Enter a test value to test if it works: "))

while xvalue < Limit:
    xvalue = int(input("Update please: "))
else:
    while True:
        print("Temperature exceeded by:",xvalue-Limit,"units")
        print("\a") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:37:20.693

我建议看看 ZeroMQ。它是一个消息传递库，能够将用多种语言编写的程序相互连接。

[http://www.zeromq.org/](http://www.zeromq.org/)

# virtual - Meteor 如何处理多个虚拟主机？

> ID：13788146
> 
> 赞同：4
> 
> 时间：2012-12-09T14:10:53.627
> 
> 标签：virtual, meteor, hosts

Meteor 如何处理多个虚拟主机？

www.Some-Client-Domain.com --> www.Our-CName-URL.com --> Meteor 应用程序。

我们需要 Meteor 应用程序服务于相同的站点/应用程序，但具有特定于请求的原始 URL (Some-Client-Domain.com) 的数据。

在我们当前的原型中，我们在 Rails 前面有 NGINX，并且有几种不同的方法可以做到这一点，包括将 NGINX 连接到数据库以定义许多虚拟主机。这很好用，因为如果有新客户端注册，我们可以更新数据库，然后 NGINX 会立即知道该虚拟主机，而无需任何进一步的 NGINX 配置。

这将如何在 Meteor 中实现？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-16T02:45:37.110

好吧，如果您现在只是忽略 SSL（或者以后想自己弄清楚 SSL），那么下面的指南应该可以工作：

### 基本思想

.. 是根据基本 URL 生成具有不同数据库（mongo，通常情况下）的同一应用程序的多个实例。

我们将为虚拟主机使用以下设置：

*   *网站#1：`www.example1.com`*
    *   流星端口：`3000`
    *   MongoDB端点/网址：`mongodb://localhost:27017/example1`
*   *站点#2：`www.example2.com`*
    *   流星端口：`3001`
    *   MongoDB端点/网址：`mongodb://localhost:27017/example2`

### 准备`meteor`实例

1.  `foreman`通过安装`rubygems`：

2.  在您的流星项目目录中创建一个`foreman` `Procfile`文件。使用上面的数据（不包括项目符号：D）：

    *   `web1: ROOT_URL=http://www.example1.com/ PORT=3000 MONGO_URL=mongodb://localhost:27017/example1 meteor`
    *   `web2: ROOT_URL=http://www.example.com/ PORT=3001 MONGO_URL=mongodb://localhost:27017/example2 meteor`
3.  -或- 如果您使用该`meteor bundle`版本：

    *   `web1: ROOT_URL=http://www.example1.com/ PORT=3000 MONGO_URL=mongodb://localhost:27017/example1 node bundle/main.js`
    *   `web2: ROOT_URL=http://www.example2.com/ PORT=3001 MONGO_URL=mongodb://localhost:27017/example2 node bundle/main.js`
4.  然后您可以`foreman start`直接在同一目录上运行（`&`在末尾添加一个以发送到后台）。或者您可以通过以下方式将其安装为服务/新贵脚本`foreman export`（对于其他 linux 发行版，这可能会有所不同，请参阅 Foreman 文档：[http](http://ddollar.github.io/foreman/) ://ddollar.github.io/foreman/ ）：

    *   `sudo foreman export --app meteors --user <meteor files owner> upstart /etc/init`

### 准备 nginx

从这里开始，nginx 的配置现在应该非常简单：

```
server {
  listen 80;

  server_name www.example1.com example1.com; 

  location / {
    proxy_pass        http://localhost:3000;
    proxy_set_header  X-Real-IP  $remote_addr;
  }
}

server {
  listen 80;

  server_name www.example2.com example2.com; 

  location / {
    proxy_pass        http://localhost:3001;
    proxy_set_header  X-Real-IP  $remote_addr;
  }
} 
```

让我知道这是否适合您，尽管您提到您已经使用 SilkJS，但我将把它留在这里，供其他对解决方案感兴趣的人使用。

# c++ - 从 WinAPI 窗口创建控制台窗口？

> ID：13788151
> 
> 赞同：1
> 
> 时间：2012-12-09T14:11:46.413
> 
> 标签：c++, winapi, mingw, codeblocks

好吧，我有一个项目要做，需要一些帮助。我对该项目的目的是在用户按下 WinAPI 窗口上的“开始”按钮时创建一个控制台窗口。我不希望窗口在启动时显示。`WM_COMMAND`当按下“开始”按钮时，我需要在机箱中添加什么来创建控制台窗口？

我在 MinGW 中使用 WinAPI (C++) & Code::Blocks。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:15:49.020

[`AllocConsole`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681944%28v=vs.85%29.aspx).

掌握[*阅读文档*](ftp://rtfm.mit.edu/)的艺术很重要。

在 MSDN Library 中浏览以熟悉它。

试着找东西，例如，我建议试着找`WScript.Echo`。

例如。

# driver - 用于智能卡模拟的 PC/SC 驱动程序。如何开始？

> ID：13788152
> 
> 赞同：3
> 
> 时间：2012-12-09T14:11:58.970
> 
> 标签：driver, smartcard, pcsc

我需要开发一个 Windows 驱动程序来模拟插入的智能卡读卡器（以便 Windows 将其显示在插入的设备列表中）和一张智能卡。取而代之的是，它将根据特定协议从/向文件读取/写入数据。

我应该采取什么方法来模拟智能卡读卡器和卡？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T19:03:13.013

我花了一些时间寻找，但我把它找回来了。请查看文章“虚拟智能卡读卡器的 UMDF 驱动程序”。这是一篇出色的书面文章，实际上也提供了代码。

[http://www.codeproject.com/Articles/134010/An-UMDF-Driver-for-a-Virtual-Smart-Card-Reader](http://www.codeproject.com/Articles/134010/An-UMDF-Driver-for-a-Virtual-Smart-Card-Reader)

简而言之，它使用用户模式驱动程序框架来创建“虚拟”智能卡驱动程序。模拟器可以很容易地基于此。

请注意，实现模拟智能卡的行为取决于您的需要。

# matlab - 积分可变极限

> ID：13788154
> 
> 赞同：3
> 
> 时间：2012-12-09T14:12:09.903
> 
> 标签：matlab, variables, integration, nonlinear-functions

嗨，我正在努力使用 matlab 解决以变量为极限的积分，我遇到的两个最大问题是 matlab 无法显式找到积分，并且除了变量之外，许多数值方法都不会

我需要解决

```
0=H/2R  - integral (z(x) between b and 1)

z(x)= (((x/((a*x*x)+1-a))^2)-1)^-0.5
b= (sin(t)+sqrt(t^2 + 4a(a-1)))/2a 
```

我知道 H、R 和 t，我的想法是先求解积分，然后求解 a 的非线性方程，我知道对非线性方程使用 fzero/fsolve，但我正在努力求解积分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:42:15.943

![在此处输入图像描述](../Images/8560b3db213a777c3b9d970f128aff12.png)

您可以尝试一种射击方法 - 猜测 a 的值并从那里进行数值求解，直到找到求解最后一个方程的 a 值。这是应该起作用的东西（尽管我随机猜测数值并没有让它收敛）

```
function test

    a_guess = .1
    fzero(@(a) solveWithA(a), a_guess)

    function res = solveWithA(a)

    t = .9;

    H = 1.5;
    R = 1.1;

    z = @(x) (((x/((a*x*x)+1-a))^2)-1)^-0.5;
    b = (sin(t)+sqrt(t^2 + 4*a*(a-1)))/(2*a);

    lower_limit = b;

    integrand = z;

    [T, Y] = ode45(@(t, x) integrand(x),[lower_limit 1],0);

    res = norm((H/2/R - Y(end)))

    end

end 
```

但是a的解析表达式...我认为它的笔和纸:)尝试手动进行不定积分，然后应用限制？但是，从被积函数中删除 a 仍然会留下令人讨厌的结果。这可能有一个“技巧”可以更好地体现在数学溢出上。

![在此处输入图像描述](../Images/2b9c7876c5c81ab632fdf7096e6cc22a.png)

# entity-framework - 为相同上下文的不同连接字符串设置不同的初始化器

> ID：13788155
> 
> 赞同：1
> 
> 时间：2012-12-09T14:12:11.257
> 
> 标签：entity-framework, ef-code-first, connection-string, entity-framework-5

我使用 EF5 代码优先并在配置中设置我的初始化程序。我想在一个应用程序中使用多个相同上下文类型的数据库。我的连接字符串如下所示：

```
<add name="DatabaseProduction" connectionString="Server=localhost; Database=DatabaseProduction; User Id=***; password=***" providerName="System.Data.SqlClient"/>
<add name="DatabaseTest" connectionString="Server=localhost; Database=DatabaseTest; User Id=***; password=***" providerName="System.Data.SqlClient"/> 
```

我可以像这样在代码中使用我的上下文

```
var _contextProd = new MyContext("DatabaseProduction");
var _contextTest = new MyContext("DatabaseTest"); 
```

设置数据库初始值设定项的常规方法是[这里](http://msdn.microsoft.com/en-us/data/jj556606.aspx)解释的配置文件。但据我了解，我可以在每个上下文的基础上设置初始化程序，但不能为每个连接字符串设置一个。错误的？

问题是：如何在生产数据库上设置例如`DropCreateAllwaysInitializer`测试`CreateDatabaseIfNotExistsInitializer`数据库？

============ 编辑回答格特的评论并澄清 ============

我通常定义我的初始化程序的方式是

```
<contexts>
  <context type=" Namespace.MyContext, MyAssembly">
    <databaseInitializer type="Namespace.MyCustomContextInitializer, MyAssembly" />
  </context>
</contexts> 
```

我当然可以在这里添加第二个并为**另一个上下文**`<context...>`定义初始化程序。但是如何判断在哪个连接字符串中使用了哪个初始化器呢？换句话说，我的问题：

 **1.  连接字符串不知道存在哪个上下文。
2.  上下文（在上下文部分）不知道它链接到哪个连接字符串
3.  在后面的代码中，我告诉上下文要使用哪个连接字符串
4.  特定上下文的初始化器似乎对于每种上下文类型都是静态的。

同样，我如何为一**对上下文和连接字符串**定义一个特定的初始化程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:37:57.540

我能想到的唯一方法是为每个连接字符串派生一个上下文：

```
public class MyProductionContext : MyContext
{
  public MyProductionContext()
    : base( "DatabaseProduction" )
  {
  }
} 
```

和

```
public class MyTestContext : MyContext
{
  public MyTestContext()
    : base( "DatabaseTest" )
  {
  }
} 
```

然后，您可以为每个派生上下文设置初始化程序。**

# c# - 循环遍历 DataGridView 单元格

> ID：13788156
> 
> 赞同：8
> 
> 时间：2012-12-09T14:12:15.997
> 
> 标签：c#, visual-studio-2010, excel, loops, datagridview

我正在创建一个生成条形码然后打印运输标签的程序。

我有一个允许用户将电子表格上传到数据网格视图的功能。列名称之一是“跟踪号”。

我希望能够遍历每个具有跟踪号的单元格，然后将条形码生成到名为“条形码”的列中的新单元格中。

我知道有一个循环功能，但我以前从未使用过它。

生成条形码的代码如下，它调用了两个类：

```
 Image barc = Rendering.MakeBarcodeImage(txtTrack.Text, int.Parse(txtWidth.Text), true);
 pictBarcode.Image = barc; 
```

任何帮助将非常感激。我很乐意回答任何其他问题。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-07-16T18:19:46.643

要遍历每个单元格，您可以使用 foreach 循环

```
foreach(DataGridViewRow row in yourDataGridView.Rows)
{
    foreach(DataGridViewCell cell in row.Cells)
    {
        //do operations with cell
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T20:11:40.713

您可以循环`DataGridView`使用以下内容：

```
foreach (DataGridViewRow row in dgvNameOfYourGrid.Rows)
{
    if (row["Tracking Number"].ToString != "")
    {
        string trackingNumber = row.Cells["Tracking Number"].ToString();

        // do stuff with the tracking number
    }
} 
```

但是要在另一个单元格中显示条形码，您需要将其转换为 a `DataGridViewImageCell`（或者最好将整个列转换为 a `DataGridViewImageColumn`）。

# android - 小部件在模拟器中运行良好，在设备本身上不做任何事情

> ID：13788165
> 
> 赞同：1
> 
> 时间：2012-12-09T14:13:04.617
> 
> 标签：android, widget, emulation, tablet

我正在尝试开发一个小部件，这是三星 Galaxy Note 10.1 上的一大遗漏：一个 S-pen note 小部件。

到目前为止，我刚刚获得了界面，并且只有一个操作（显示和隐藏一些按钮）。在模拟器上它显示一切都很好，但在我的 note10.1 上它只是坐在屏幕上，什么都不做。没有崩溃，但也没有功能。（它也不显示我的烤面包机消息，模拟器也显示得很好）

我的清单中提到了接收器，如下所示：

```
 <receiver android:name="WidgetProvider">
        <intent-filter >
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE"/>
            <action android:name="org.Note.Widget.ACTION_widgetClick"/>
        </intent-filter>

        <meta-data android:name="android.appwidget.provider"
                   android:resource="@xml/note_widget"/>
        </receiver> 
```

我已经尝试了许多示例作为我的 Java 代码的指南。这就是我现在拥有的：

```
@Override
public void onReceive(Context context, Intent intent) {

    if(intent.getAction().equals(CLK))
    {
        ToggleRibbon(context);
    }
    else
    {           
        Toast.makeText(context, "action is: "+intent.getAction(), Toast.LENGTH_LONG).show();
        super.onReceive(context, intent);
    }
}

static void ToggleRibbon(Context context)
{
    RemoteViews localRemoteViews = BuildUpdate(context);
    ComponentName localComponentName = new ComponentName(context, WidgetProvider.class);
    AppWidgetManager.getInstance(context).updateAppWidget(localComponentName, localRemoteViews);
}

private static RemoteViews BuildUpdate(Context context)
{
    RemoteViews rv = new RemoteViews(context.getPackageName(),R.layout.widget_layout);
    Intent active = new Intent(context, WidgetProvider.class);
    active.setAction(CLK);
    PendingIntent actionPendingIntent = PendingIntent.getBroadcast(context, 0, active, 0);
    rv.setOnClickPendingIntent(R.id.note_ribbon, actionPendingIntent);

    if(ShowRibbon)
    {
        ShowRibbon = false;
        rv.setViewVisibility(R.id.note_ribbon, View.INVISIBLE);
        Toast.makeText(context, "You clicked the Note!! (ribbon invisible)", Toast.LENGTH_LONG).show();
    }
    else
    {
        ShowRibbon = true;
        rv.setViewVisibility(R.id.note_ribbon, View.VISIBLE);
        Toast.makeText(context, "You clicked the Note!! (ribbon visible)", Toast.LENGTH_LONG).show();
    }

    return rv;
}

protected PendingIntent getPendingSelfIntent(Context context, String action)
{
    Intent intent = new Intent(context, getClass());
    intent.setAction(action);
    return PendingIntent.getBroadcast(context, 0, intent, 0);
}

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    for (int i = 0; i < appWidgetIds.length; ++i) 
    {
        int appWidgetId = appWidgetIds[i];
        //Intent intent = new Intent(context, WidgetProvider.class);
        //intent.setAction("click");
        //PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);

        RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
        remoteViews.setOnClickPendingIntent(R.id.widget_root, getPendingSelfIntent(context, CLK));
        remoteViews.setOnClickPendingIntent(R.id.menu_btn, getPendingSelfIntent(context, "menu click"));
        //remoteViews.setOnClickPendingIntent(R.id.widget_root, pendingIntent);
        //remoteViews.setOnClickPendingIntent(R.id.menu_btn, pendingIntent);

        // update widget
        appWidgetManager.updateAppWidget(appWidgetId, remoteViews);
    }

    super.onUpdate(context, appWidgetManager, appWidgetIds);
} 
```

我的猜测是，这将是我忘记的一些愚蠢的事情，但我真的希望有人可以帮助我让我的小部件做更多的事情，而不仅仅是坐在那里：P（只有烤面包机的消息已经有很大帮助了！）

提前致谢 ;）

# bash - 如何在 Bash 中删除字符串的第一部分？

> ID：13788166
> 
> 赞同：20
> 
> 时间：2012-12-09T14:13:10.857
> 
> 标签：bash, shell

这段代码将给出第一部分，但我怎样才能删除它并在没有第一部分的情况下获取整个字符串？

```
echo "first second third etc"|cut -d " " -f1 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-09T14:15:34.170

你应该看看`info cut`，它会解释什么`f1`意思。

实际上，我们只需要（和）第二个字段之后的字段。`-f`告诉命令按字段搜索，`2-`表示第二个和后续字段。

```
echo "first second third etc" | cut -d " " -f2- 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-09T14:17:08.203

您可以为此使用[子字符串删除](http://mywiki.wooledge.org/BashFAQ/100#Removing_part_of_a_string)。不需要外部工具：

```
$ foo="a b c d"
$ echo "${foo#* }"
b c d 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-09T14:15:36.937

你可以做：

```
echo "first second third etc" | cut -d " " -f2-
>> second third etc 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-09T14:15:43.233

尝试这样做：

```
echo "first second third etc" | cut -d " " -f2- 
```

它解释在

```
 man cut | less +/N- 
```

> N- 从第 N 个字节、字符或字段到行尾

只要你有[Bash 标签](https://stackoverflow.com/questions/tagged/bash)，你可以像这样使用[Bash 参数扩展](http://wiki.bash-hackers.org/syntax/pe)：

```
x="first second third etc"
echo ${x#* } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-09T14:16:49.133

试试这个：

```
 echo "first second third etc" | cut -d " " -f2- 
```

# matlab - matlab 将绘图导出为矢量格式

> ID：13788168
> 
> 赞同：10
> 
> 时间：2012-12-09T14:13:21.197
> 
> 标签：matlab, latex, vector-graphics

以前我一直以光栅格式（JPG，PNG）导出 Matlab 图形

有没有办法以矢量格式（SVG）从 Matlab 导出绘图。我需要它将绘图插入到 LaTeX 文档中。

到目前为止，我发现的唯一一件事是[mathworks的插件和](http://www.mathworks.com/matlabcentral/fileexchange/7401-scalable-vector-graphics-svg-export-of-figures)[stackexchange](https://stackoverflow.com/questions/6490576/wpf-image-vector-format-export-xps)的答案，但这看起来太复杂了

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T14:48:48.057

还有[matlab2tikz](http://www.mathworks.com/matlabcentral/fileexchange/22022-matlab2tikz)和[matlabfrag](http://www.mathworks.com/matlabcentral/fileexchange/21286-matlabfrag)导出到带有注释的 eps 以导入到 LaTeX。

[这](http://www.mediafire.com/?atstyyu4bj198wp)是我使用 matlabfrag 的示例。

我还与一位 Mathworks 工程师讨论过这个问题，他同意这种事情没有一个很好的工具，因为每个人都想用它做不同的事情（我已经提到了两种不同的 LaTeX 方法）。所以 imo 最好的办法是使用不同的工具，看看哪个最适合你。

大多数时候，我不得不对坐标轴、标签的字体大小等进行大量修改，才能得到我想要的（顺便说一句，调整图例是最大的地狱）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T16:14:32.487

我通常在 Latex 文档中使用这两个 Matlab 图。我通常使用的是.eps格式，是Matlab可以很好导出的矢量格式。您应该在 Matlab 中尽可能多地编辑它，并在图中使用代码或手册。然后只需转到文件 -> 导出设置并单击“扩展轴以填充图形”，配置您想要的任何内容并导出为 .eps，然后您可以将图像导入任何基于矢量的软件、Inkscape 或 Adob​​e Illustrator 以根据需要进行最终调整. 只需将 eps 撞到乳胶中，它就完美了。此外，pdflatex 通常会将 EPS 转换为 PDF，因此如果您想节省时间，可以先从 Inkscape 或 Illustrator 将其转换为 PDF。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-09T15:55:12.047

对于我的出版物，我将绘图保存为 EPS（矢量化），然后在 Inkscape 中进行最后的润色。然后通过 Inkscape，您可以将其导出为 SVG 之类的东西。Inkscape 有很多工具可以方便地清理绘图（例如简化路径和着色）。

这就是我制作以下[Ts图](http://www.charlesrcook.com/archive/2012/09/15/normal-shock-t-s-diagram.aspx)的方式：

![Ts 上的正常冲击解](../Images/a85ef7f6293409aa660309b7d70b0140.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T21:44:22.997

.eps 文件很容易导出并与 LaTeX 一起使用。我在每个项目中使用一个函数来格式化和保存绘图到 LaTeX 项目。它很容易工作。以下行中的“eps”可以更改为任何 Matlab 图像类型。

就像是：

```
figures = sort(findobj('MenuBar','figure'));
for ii = 1:length(figures)
    saveas(gcf,['Figures/',num2str(ii)],'eps')
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T19:42:06.480

我目前使用 FEX 包[plot2svg](http://www.mathworks.com/matlabcentral/fileexchange/7401-scalable-vector-graphics-svg-export-of-figures)来完成您提到的任务。

它非常易于使用：将包含脚本的文件夹添加到您的 matlab 路径后，您可以执行以下操作

```
 plot2svg('myplot.svg',gcf); 
```

将您当前的数字保存在 svg 中。（当然您可以将[`gcf`](http://www.mathworks.it/it/help/matlab/ref/gcf.html)(= GetCurrentFigure) 更改为另一个句柄以保存其他打开的图形。）

事实上，这是我发现以 PDE 工具箱生成的矢量方式图导出的唯一方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T17:21:48.567

我已经在 .eps 中导出了一个 matlab 图形，然后使用 GIMP 将其转换为 .png。事实证明，这种方式获得的 .png 文件比直接从 MATLAB 图形文件通过 export 或 saveas 选项获得的 .png 文件质量要高得多。请注意，我在 GIMP 中打开 .eps 文件时使用了更高的分辨率。我还在 matlab 导出设置中选择了“缩放字体：自动”。我使用 pdf-latex

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-20T15:45:39.387

自 2014a 以来，Matlab 矢量图形在根级别被破坏。
所以不要费心从 .png 格式切换。

在 matlab 问答部分进一步参考我的忧郁问题： [https ://se.mathworks.com/matlabcentral/answers/290313-why-is-vector-graphics-chopped-into-pieces](https://se.mathworks.com/matlabcentral/answers/290313-why-is-vector-graphics-chopped-into-pieces)

# javascript - 保护本地主机 JavaScript ajax 请求

> ID：13788172
> 
> 赞同：2
> 
> 时间：2012-12-09T14:14:06.070
> 
> 标签：javascript, python, ajax, localhost

我编写了一个应用程序，python 充当一个简单的 Web 服务器（我为此使用了瓶子框架）和一个 HTML + JS 客户端。整个事情在本地运行。在这种情况下，网页充当 GUI。

在我的代码中，我实现了一个文件浏览器界面，因此我可以从 JavaScript 访问本地文件结构。

服务器只接受本地连接，但困扰我的是：例如，如果有人知道我在本地运行我的应用程序，并伪造一个向本地主机发出 AJAX 请求的站点？我以某种方式访问​​了他的网站，我的本地文件会被攻击者看到吗？

我的主要问题是：有什么办法可以确保这一点？我的意思是我的服务器会确定该请求来自我本地提供的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:47:39.237

防止这种攻击的最直接方法是每个请求都需要一个长而复杂的密钥。只需在处理请求之前让您的本地代码进行身份验证即可。这实质上就是保护 Internet 上的 Web 服务的方式。

您可能还想考虑以其他形式（如 DBUS 或 unix 套接字）进行进程间通信。我不确定您使用的是哪个操作系统，但是进程间通信有很多选项不会让您以这种方式受到攻击。

# javascript - Handsontable：预填充列

> ID：13788175
> 
> 赞同：0
> 
> 时间：2012-12-09T14:14:52.220
> 
> 标签：javascript, jquery, handsontable

我想做一个类似于[http://handsontable.com/demo/prepopulate.html](http://handsontable.com/demo/prepopulate.html)的事情，除了我想预先填充列而不是行。

我明白我必须使用一个函数来定义默认渲染。但是，它似乎只在添加行而不是列时才有效：新闻行填充了“默认”而不是列。

这是我尝试过的：

```
function defaultValueRenderer(instance, td, row, col, prop, value, cellProperties) {
  var args = $.extend(true, [], arguments);
  if (args[5] === null) {
      td.style.color = 'red';
      args[5] = "default";      
  }
  Handsontable.TextCell.renderer.apply(this, args);
}

var myData = [
    ["", "Kia", "Nissan", "Toyota", "Honda"],
    ["2008", 10, 11, 12, 13],
    ["2009", 20, 11, 14, 13],
    ["2010", 30, 15, 12, 13]
    ];

$("#exampleGrid").handsontable({
    data: myData,
    minSpareCols: 1,
    minSpareRows: 1,
    cells: function (row, col, prop) {
            var cellProperties = {};
            cellProperties.type = {renderer: defaultValueRenderer}
            return cellProperties;
        }
});​ 
```

添加备用列（仅用于备用行）时，似乎没有调用 defaultValueRenderer 函数。

[http://jsfiddle.net/QtGau/2/](http://jsfiddle.net/QtGau/2/)

谢谢你的提示

*编辑*：该值似乎是一个空字符串。我可能会将其用作解决方法，但是我相信我在这里误解了一些东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T19:50:04.997

由于我没有得到回复，我正在回答我自己。我使用 === null 或 === "" 来破解。它有效，它很丑陋，总比没有好;）

# c# - 使用 NEST 的 Elasticsearch：如何配置分析器来查找部分单词？

> ID：13788178
> 
> 赞同：4
> 
> 时间：2012-12-09T14:15:00.377
> 
> 标签：c#, elasticsearch, nest

我试图通过部分单词进行搜索，忽略大小写并忽略某些字母的重音。是否可以？我认为带有默认标记器的 ngram 应该可以解决问题，但我不明白如何使用 NEST 来做到这一点。

示例：“musiic”应匹配包含“music”的记录

我使用的 Elasticsearch 版本是 1.9。

我正在这样做，但它不起作用......

```
var ix = new IndexSettings();
        ix.Add("analysis",
            @"{
               'index_analyzer' : {
                          'my_index_analyzer' : {
                                        'type' : 'custom',
                                        'tokenizer' : 'standard',
                                        'filter' : ['lowercase', 'mynGram']
                          }
               },
               'search_analyzer' : {
                          'my_search_analyzer' : {
                                        'type' : 'custom',
                                        'tokenizer' : 'standard',
                                        'filter' : ['standard', 'lowercase', 'mynGram']
                          }
               },
               'filter' : {
                        'mynGram' : {
                                   'type' : 'nGram',
                                   'min_gram' : 2,
                                   'max_gram' : 50
                        }
               }
    }");
        client.CreateIndex("sample", ix); 
```

谢谢，

大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T20:36:00.697

**简答**

我认为您正在寻找的是一个[模糊查询](http://www.elasticsearch.org/guide/reference/query-dsl/fuzzy-query.html)，它使用[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)算法来匹配相似的单词。

**nGrams 上的长答案**

nGram 过滤器根据定义的最小/最大范围将文本拆分为许多较小的标记。

例如，从您的“音乐”查询中，过滤器将生成： `'mu', 'us', 'si', 'ic', 'mus', 'usi', 'sic', 'musi', 'usic', and 'music'`

如您所见`musiic`，与这些 nGram 令牌中的任何一个都不匹配。

**为什么选择 nGram**

nGrams 的一个好处是它使通配符查询*显着*更快，因为所有潜在的子字符串都是在插入时预先生成和索引的（我已经看到使用 nGrams 的查询从几秒加速到 15 毫秒）。

如果没有 nGram，则必须在查询时搜索每个字符串以查找匹配项 [O(n^2)]，而不是直接在索引中查找 [O(1)]。作为伪代码：

```
hits = []
foreach string in index:
    if string.substring(query):
        hits.add(string)
return hits 
```

对比

```
return index[query] 
```

请注意，这是以使插入速度变慢、需要更多存储空间和更重的内存使用为代价的。

# c# - 为什么 MVC 2 中的 ViewModel 子对象为空？

> ID：13788179
> 
> 赞同：0
> 
> 时间：2012-12-09T14:15:10.930
> 
> 标签：c#, .net, asp.net-mvc-2, viewmodel

我有一个 Web 应用程序，我想在其中显示一个 Test 对象的表单。不同的测试实例可以有不同的模式。我可以很好地显示它，但它不会将表单中的所有数据填充回我的模型中。

这是我的模型类：

```
public class EnterTestData
{
    public string StudyId { get; set; }
    public Test Test { get; set; }
}

public sealed class Test
{
    public string Identity { get; set; }
    public string Name { get; set; }
    public IEnumerable<TestField> Fields { get; set; }
}

public sealed class TestField
{
    public string Identity { get; set; }
    public string Name { get; set; }
    public string Value { get; set; }
    public string Type { get; set; }
} 
```

这是我的观点的相关部分：

```
<% Html.BeginForm("PostTestData", "StudiesUserInterface"); %>
<table>
    <%
        foreach (var testField in Model.Test.Fields)
            Html.RenderPartial("UserControls/TestFieldUserControlascx", testField);

        foreach (var category in Model.Test.Categories)
        {
    %>
    <tr>
        <td colspan="2" style="font-style: italic; text-align: center;">
            <%=category.Name %>
        </td>
    </tr>
    <% 
            foreach (var testField in category.Fields)
                Html.RenderPartial("UserControls/TestFieldUserControlascx", testField);

        }
    %>
    <tr>
        <td colspan="2" style="text-align: right;">
            <input type="submit" name="newsletter" value="Enter Result" />
        </td>
    </tr>
</table>
<% Html.EndForm(); %> 
```

以及实际文本框的部分视图：

```
<tr>
    <td>
        <%= Model.Name %>
    </td>
    <td>
        <%
            switch (Model.Type)
            {
                case "date":
                case "text":
                case "number":
        %>
        <%=  Html.TextBox(Model.name, Model.Value) %>
        <%  break;
                default: %><%= Html.Label("Unknown data type") %><% break;
            }
        %>
    </td>
</tr> 
```

**更新**控制器方法：

```
 public ActionResult EnterTestData(string studyId, string testId)
    {
        var testDefinition = ServiceKitLocator.GetStudyService().GetTestDefinition(testId);

        return View(new EnterTestData { StudyId = studyId, Test = testDefinition });
    }

    public ActionResult PostTestData(EnterTestData model)
    {
        //I'm just putting a break point here and checking the model in the debugger for now
        return RedirectToAction("Index");
    } 
```

问题是`Test`当它回到我的控制器时它是空的。我如何让它被填充？为什么它是空的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:30:54.533

我认为问题在于 Html.TextBox 元素。如果视图中的模型是“Test”类型是正确的，但在控制器操作中，您希望绑定到“EnterTestData”类型，该类型具有名为“Test”的“Test”类型属性，那么您的 TextBox 应该被初始化为

```
Html.TextBox("Test.Name", Model.Value) 
```

重要的部分是名称参数。modelbinder 将此名称与您发布操作中模型类型的属性相匹配，在您的情况下为“EnterTestData”。

您还可以使用编辑器模板视图。这与您的局部视图相同。在您的项目中，转到 Views\Shared\ 并创建一个名为 EditorTemplates 的文件夹（如果不存在）。在此文件夹中创建一个局部视图，并将其命名为模板应为的类/类型。在您的情况下为“TestField.ascx”。实际上，您可以复制和重命名现有的局部视图。在您的主视图中，您必须更改两件事： - 使用 for 而不是 foreach - 在循环中调用编辑器模板，例如：

```
for(int i = 0; i < Model.Test.Fields.Count(); i++)
            Html.EditorFor(Model => Model.Test.Fields[i]); 
```

在模板视图中，您必须更改一件事： - 用户 TextBoxFor 而不是 TextBox，例如：

```
Html.TextBoxFor(Model => Model.Value) 
```

我经常使用这种模式。它使绑定复杂模型变得容易。你可以看看生成的 HTML

# data-structures - 批量更新二进制堆中的节点优先级？

> ID：13788180
> 
> 赞同：1
> 
> 时间：2012-12-09T14:15:31.360
> 
> 标签：data-structures, binary-heap

我发布了相当混乱的问题，所以我从头开始重写......

这实际上是纯粹的理论问题。

说，我们有二进制堆。让堆为 MaxHeap，因此根节点的值最大，每个节点的值都大于其子节点。我们可以在这个堆上做一些常见的低级操作：“交换两个节点”、“比较两个节点”。

使用这些低级操作，我们可以实现通常的高级递归操作：“sift-up”、“sift-down”。

使用这些 sift-up 和 sift-downs，我们可以实现“插入”、“修复”和“更新”。我对“更新”功能感兴趣。假设我已经有了要更改的节点位置。因此，更新函数非常简单：

```
function update (node_position, new_value){
    heap[node_position] = new_value;
    sift_up(node_position);
    sift_down(node_position);
} 
```

我的问题是：（数学上）是否有可能制作更高级的“更新”功能，可以一次更新更多节点，在某种程度上，所有节点都将它们的值更改为 new_values，然后，它们的位置被纠正？像这样的东西：

```
function double_update (node1_pos, node2_pos, node1_newVal, node2_newVal){
    heap[node1_pos] = node1_newVal;
    heap[node2_pos] = node2_newVal;
    sift_up(node1_position);
    sift_down(node1_position);
    sift_up(node2_position);
    sift_down(node2_position);
} 
```

我用这个“double_update”做了一些测试，它工作了，虽然它没有证明什么。

“三重更新”呢，等等……

我用“多重更新”做了一些其他测试，我改变了所有节点的值，然后调用 { sift-up(); 筛选（）；} 以随机顺序对它们中的每一个执行一次。这不起作用，但结果离正确不远。

我知道这听起来没什么用，但我对它背后的理论很感兴趣。如果我让它发挥作用，我实际上确实有一个用途。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:26:17.767

Here's a trick and possibly funky algorithm, for some definition of funky:

(Lots of stuff left out, just to give the idea):

```
template<typename T> class pseudoHeap {
  private:
    using iterator = typename vector<T>::iterator;
    iterator max_node;
    vector<T> heap;
    bool heapified;

    void find_max() {
      max_node = std::max_element(heap.begin(), heap.end());
    }

  public:
    void update(iterator node, T new_val) {
      if (node == max_node) {
          if (new_val < *max_node) {
               heapified = false;
               *max_node = new_val;
               find_max();
           } else {
               *max_node = new_val;
           }
      } else {
          if (new_val > *max_node) max_node = new_val;
          *node = new_val;
          heapified = false;
     }

    T& front() { return &*max_node; }

    void pop_front() {
        if (!heapified) {
            std::iter_swap(vector.end() - 1, max_node);
            std::make_heap(vector.begin(), vector.end() - 1);
            heapified = true;
        } else {
            std::pop_heap(vector.begin(), vector.end());
        }
    }        
}; 
```

Keeping a heap is expensive. If you do `n` updates before you start popping the heap, you've done the same amount of work as just sorting the vector when you need it to be sorted (`O(n log n)`). If it's useful to know what the maximum value is all the time, then there is some reason to keep a heap, but if the maximum value is no more likely to be modified than any other value, then you can keep the maximum value always handy at amortized cost O(1) (that is, `1/n` times it costs `O(n)` and the rest of the time it's `O(1)`. That's what the above code does, but it might be even better to be lazy about computing the max as well, making `front()` amortized `O(1)` instead of constant `O(1)`. Depends on your requirements.

As yet another alternative, if the modifications normally don't cause the values to move very far, just do a simple "find the new home and rotate the subvector" loop, which although it's `O(n)` instead of `O(log n)`, is still faster on short moves because the constant is smaller.

In other words, don't use priority heaps unless you're constantly required to find the top k values. When there are lots of modifications between reads, there is usually a better approach.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T17:15:35.790

这样做绝对是可能的，但是如果您打算更改二进制堆中的大量键，您可能需要查看其他堆结构，例如 Fibonacci 堆或配对堆，它们可以比二进制堆。在具有 n 个节点的二进制堆中更改 k 个键需要 O(k log n) 时间，而在 Fibonacci 堆中需要 O(k) 时间。这是渐近最优的，因为你甚至不能在不做至少 Ω(k) 工作的情况下接触 k 个节点。

要考虑的另一件事是，如果您一次更改多个 Ω(n / log n) 键，您将至少做 Ω(n) 个工作。在这种情况下，通过使用标准 heapify 算法在 Θ(n) 时间内从头开始重建堆来实现更新可能更快。

希望这可以帮助！

# android - 我应该使用数组还是数据库

> ID：13788185
> 
> 赞同：1
> 
> 时间：2012-12-09T14:15:46.283
> 
> 标签：android, database, arrays

我正在编写一个包含项目列表及其信息的应用程序。当用户打开应用程序时，他们会看到列表，当他们选择特定项目时，他们将获得有关该项目的所有信息。

现在我的方法是将数据存储在 java 源文件中的多维数组中。当我推送新的更新时，我可能会在 java 源文件中添加新项目（因此数组变得更大）。我想知道这是否是最好的方法。我尝试在网上查找有关数组和数据库的相关信息，但似乎找不到我需要的信息。对我有什么建议吗？

另外，如果将来我创建一个功能让用户将自己的项目添加到列表中，会有什么影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:22:51.920

如果用户应该能够更新它，如果你应该能够动态更新它（例如从互联网更新），那么数据库是必须的。

如果该数据是静态的，除非您更新应用程序，否则不会更改，您可以将其存储在代码中或更好的文件中（您可以以 JSON 格式存储以便于阅读和解析）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T14:18:58.397

如果使用数组，用户新添加的项目将在应用程序重新启动时消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T14:23:13.853

您可以使用直接存储在手机上的 SQLite 数据库（例如 SD 卡）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T14:25:42.680

可以在[此处](http://developer.android.com/guide/topics/data/data-storage.html)找到对存储选项及其常用用途的分析。我个人建议使用 SQLite 数据库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T14:26:42.147

数据库适用于永久数据，但如果不是真的需要写入磁盘，它可能会造成瓶颈。

我正在重构一个应用程序以不再使用 SQLite。我一次插入大量（10,000-100,000）新行，根据我对状态的日志反馈，这看起来需要一个小时。当我将它保存在内存中时，它在大约 5 秒内全部加载完毕。

# windows-8 - Winjs.ui.listview 加载时在页面顶部显示进度条

> ID：13788188
> 
> 赞同：3
> 
> 时间：2012-12-09T14:16:06.620
> 
> 标签：windows-8, winjs

Winjs.UI.ListView 获取数据时如何在页面顶部显示不确定的进度条。是否有任何内置功能可以显示 Winjs 的进度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:11:22.400

假设您获取 daya 的方法是`getData()`.

```
function getData(){
var progress = document.createElement("progress");
document.getElementById("someDiv").appendChild(progress); //we have created and appended an undetermined progress bar.
//do the data fetching, and, when it's over and ítems have been asigned to the ListView remove the progress element from the div.
} 
```

否则，在 HTML 中：

```
<progress></progress> 
```

# spring - MVC 模板项目中的 pom.xml 错误

> ID：13788190
> 
> 赞同：1
> 
> 时间：2012-12-09T14:16:14.937
> 
> 标签：spring, maven, spring-mvc, pom.xml

我使用 STS 并创建了 Spring MVC 模板项目。但是 pom.xml 告诉我有一个错误，它写道：

```
"No plugin found for prefix 'war' in the current project and in the plugin groups [] available from the repositories [local (C:\Users\m1e\.m2\repository), central (http://repo.maven.apache.org/maven2)]" 
```

我是第一次使用 STS 和 Maven，我是菜鸟。我真的不明白这到底是什么意思。伙计们，请帮忙。谢谢！

这是我的 pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.andrew</groupId>
    <artifactId>mvc</artifactId>
    <name>NewMVC</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>
    <properties>
        <java-version>1.6</java-version>
        <org.springframework-version>3.1.1.RELEASE</org.springframework-version>
        <org.aspectj-version>1.6.10</org.aspectj-version>
        <org.slf4j-version>1.6.6</org.slf4j-version>
    </properties>
    <dependencies>
        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                 </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        <!-- AspectJ -->
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>${org.aspectj-version}</version>
        </dependency>   

                <!-- Database -->
        <dependency>
            <groupId>mssql</groupId>
            <artifactId>sqljdbc</artifactId>
            <version>4.0</version>
        </dependency>

        <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.15</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.mail</groupId>
                    <artifactId>mail</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.jms</groupId>
                    <artifactId>jms</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jdmk</groupId>
                    <artifactId>jmxtools</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jmx</groupId>
                    <artifactId>jmxri</artifactId>
                </exclusion>
            </exclusions>
            <scope>runtime</scope>
        </dependency>

        <!-- @Inject -->

        <!-- Servlet -->
<!--        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency> -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>

        <!-- Hibernate -->
        <dependency>
            <groupId>hibernate</groupId>
            <artifactId>hibernate-commons-annotations</artifactId>
            <version>1.0</version>
        </dependency>
        <!-- Hibernate -->
        <dependency>
            <groupId>hibernate</groupId>
            <artifactId>hibernate-annotations</artifactId>
            <version>1.0</version>
        </dependency>
        <dependency>
            <groupId>hibernate</groupId>
            <artifactId>hibernate</artifactId>
            <version>3.0</version>
        </dependency>
        <dependency>
            <groupId>persistence</groupId>
            <artifactId>persistence</artifactId>
            <version>1.0</version>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <additionalProjectnatures>
                        <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                    </additionalProjectnatures>
                    <additionalBuildcommands>
                        <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
                    </additionalBuildcommands>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArgument>-Xlint:all</compilerArgument>
                    <showWarnings>true</showWarnings>
                    <showDeprecation>true</showDeprecation>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <configuration>
                    <mainClass>org.test.int1.Main</mainClass>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T21:48:55.290

mmm 我要检查的第一件事是 Maven 版本。

您使用的是什么 STS 版本？最后一个是**3.1.0**，它提供了**Maven 3.0.4 版本**

那么你为什么要使用旧的 Maven 2 版本呢？

问题似乎取决于缺少特定的 Maven 插件

尝试：

1) 删除 ./m2 目录中的存储库文件夹，然后进入 STS 并对项目进行干净或 maven 安装，看看它是否有效（有时理解你下载任何东西都是错误的）

如果不能使用最新的 Maven 版本，可能是旧版本在 Spring Template 项目的 pom.xml 文件中声明的插件有问题......也是最新版本的Maven！

# html - 停止 div 容器调整大小

> ID：13788192
> 
> 赞同：8
> 
> 时间：2012-12-09T14:16:21.673
> 
> 标签：html, css, resize

我在一个 html 页面中有两列，一列向右浮动，另一列向左浮动。我已将两个容器的高度设置为 100%，将两个容器的宽度设置为 50%。我希望这两个容器适合主窗口。当用户水平调整窗口大小时，我不希望内容调整大小。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-09T14:32:20.020

有很多方法可以实现这一目标。首先，最简单的方法是将 css 值设置为 min-width！因此，如果您希望它调整大小但停止在 960 像素（例如），您只需执行以下操作：

```
 myCoolDiv{
         width: 100%;
         height: 50%;
         min-width: 960px;
   } 
```

那会给你最好的结果。否则，如果您根本不希望内容调整大小，并且选择器的宽度等于初始屏幕的 100%，我会这样使用 jQuery：

```
 $(document).ready(function() {
       //Call a variable to know the width of the window
       var screenWidth = $(window).width();
       $('myCoolDiv').css('width', screenWidth + 'px');
    }); 
```

希望它有所帮助！如果我的答案不够清楚，或者您不理解其中的一部分，请告诉我！

干杯!

# ember.js - 当 ember-data 完成加载并呈现元素时应用 JQuery 效果

> ID：13788194
> 
> 赞同：3
> 
> 时间：2012-12-09T14:16:33.997
> 
> 标签：ember.js

我有一个我想要拖动的项目列表。我正在使用 ember-data 从我的 API 中获取项目，然后使用 ArrayController 在视图中呈现它们。我可以成功加载项目并渲染它们，但我不知道何时何地放置 JQuery 可拖动函数。

我尝试在我的视图上使用 didInsertElement 但这会在呈现视图时触发，而不是在加载项目时触发。我还尝试在我的 ArratController 上放置一个观察者，以便在数组长度更改时（即，将元素添加到数组中时）运行代码这些东西都不起作用。

有任何想法吗？

我的 JS 代码：

```
var REVISION = 9; 

// Application namespace
var App = Ember.Application.create({
    ApplicationView: Ember.View.extend({
        templateName:  'application',
        classNames: ['application-view']
    }),
    ApplicationController: Ember.Controller.extend(),
    RewardsView:  Em.View.extend({
        templateName:  'rewards',
        click: function(event) {
            console.log(event);
            //window.location.href = event
        },
        didInsertElement: function() {
            this.$(".draggable").draggable();
        }
    }),
    RewardsController:  Em.ArrayController.extend({
        rewardAdded: function() {
        $(".draggable").draggable({
            cursor: 'move',          // sets the cursor apperance
            revert: 'invalid',       // makes the item to return if it isn't placed into droppable
            revertDuration: 900,     // duration while the item returns to its place
        });
        }.observes('length')
    }),
    ready: function(){
        console.log("Created App namespace");
    },
    Router: Ember.Router.extend({
        goToRewards:  Ember.Route.transitionTo('root.rewards'),
        root:  Ember.Route.extend({
            index:  Ember.Route.extend({
                route:  '/',
            }),
            rewards:  Ember.Route.extend({
                route: '/rewards',
                enter: function ( router ){
                  console.log("The rewards sub-state was entered.");
                },
                connectOutlets:  function(router, context){
                  router.get('applicationController').connectOutlet('content','rewards', App.store.findAll(App.Rewards));
                }
            }),
        })
    })
});

App.Rewards = DS.Model.extend({
    provider: DS.attr('string'),
    name: DS.attr('string'),
    description: DS.attr('string'),
    discount: DS.attr('string'),
    img: DS.attr('string'),
    video: DS.attr('string'),
    price: DS.attr('string'),
    available_quantity: DS.attr('string'),

    didLoad: function() {
        console.log('model loaded', this);
    }
});

App.store = DS.Store.create({
    revision: REVISION,
    adapter: DS.DjangoTastypieAdapter.extend({
      serverDomain: "http://example.com",
      namespace: "api/v1"
    }),
});

// Start!
App.initialize(); 
```

我的车把模板：

```
{% handlebars "rewards" %}
<div class="row-fluid">
  <div class="span6">
    <div class="box paint color_7">
      <div class="title">
        <div class="row-fluid">
          <h4> Available Rewards </h4>
        </div>
      </div>

      <!-- End .title -->
      <div class="content">
        <div class="accordion" id="accordion2">
          {{#each reward in controller}}
            <div class="draggable accordion-group">
              {{#with reward}}
                {{#if isLoaded}}
                  <div class="accordion-heading"> 
                    <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#accordion2" {{bindAttr href="reward.id"}}> {{name}} {{id}} </a> 
                  </div>
                  <div {{bindAttr id="reward.id"}} class="accordion-body collapse" style="height: 0px; ">
                    <div class="accordion-inner"> {{description}} </div>
                  </div>
                {{else}}
                    Loading...
                {{/if}}
              {{/with}}
            </div>
          {{/each}}

        </div>
      </div>
      <!-- End .content --> 
    </div>
    <!-- End .box --> 
  </div>
{% endhandlebars%} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:12:24.027

使用`findQuery`而不是`findAll`

```
router.get('applicationController').connectOutlet('content','rewards',App.store.findQuery(App.Rewards)); 
```

您获得了`isLoaded`内容的属性，现在您可以在属性上添加观察者`isLoaded`来运行所需的功能，如下所示

```
startDraggableFunctionality: function(){
  if(this.get('content.isLoaded'){
    /*Your code goes here...*/
  }
}.observes('content.isLoaded') 
```

**渲染+数据加载后**
在视图里面添加如下方法如下

```
看法
```

```
//This method will be executed when the view has finished rendering
afterRender: function(){
  this.get('controller').set("viewRendered", true);
} 
```

```
控制器
```

```
viewRendered: false, //set it to false initially
startDraggableFunctionality: function(){
  if(this.get('content.isLoaded') && this.get('viewRendered')){
    /*Your code goes here...*/
  }
}.observes('content.isLoaded', 'viewRendered') 
```

这样，如果视图在加载内容之前呈现，请`isLoaded`确保仅在加载数据后执行该函数，反之亦然

# php - 在mysql中使用复选框存储和删除数据

> ID：13788208
> 
> 赞同：0
> 
> 时间：2012-12-09T14:17:42.023
> 
> 标签：php, mysql, checkbox

我有一点问题，我正在尝试使用复选框存储数据，但我似乎无法弄清楚。现在我制作了一个脚本，可以显示多个具有相同名称的复选框。所以我现在的问题是，我如何制作发送数据的页面以使它们分开？像：

```
<input type='checkbox' checked name='cpu-link[]' value='1' />
<input type='checkbox' checked name='cpu-link[]' value='2' />
<input type='checkbox' checked name='cpu-link[]' value='3' /> 
```

如何将它存储在 mysql 数据库中的新行中的每个复选框？所以它会像：

1.  数据 1
2.  数据 2
3.  数据 3

然后我有一个相关的问题，如果它们已经在数据库中，我该怎么做才能删除未选中的复选框。所以如果是这样：

```
<input type='checkbox' checked name='cpu-link[]' value='1' />
<input type='checkbox' name='cpu-link[]' value='2' />
<input type='checkbox' name='cpu-link[]' value='3' /> 
```

然后 id 为 2 和 3 的行将被删除，但 id 为 1 的行将被创建，或者如果它已经在数据库中，则保留。

这都是 2 个表之间的一种链接。我有一个带有 pc 的表和一个带有硬件的表。然后我有一个带有链接的表，所以如果我选择一个需要在机器中运行的硬件，它将在链接表中创建一行，以便当我显示 pc 时，它显示了硬件 oppotionity。

对不起，我的英语不好。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:30:52.480

```
$all_cpu_links = array(); // here is your array with all possible values of cpu-link
$previously_checked = array(); // array of values that are already in your database
$to_be_removed = array();
$to_be_inserted = array();

// It is better to use here here a prepared statement by the way
foreach ($_POST['cpu-link'] as $cpu_link)
{
    if (!in_array($cpu_link, $previously_checked))
    {
        // validate $cpu_link here
        mysql_query("INSERT INTO table (`cpu_link`) VALUES (".$cpu_link.");");
    }

}

foreach ($all_cpu_links as $cpu_link)
{
    if (!in_array($cpu_link, $_POST['cpu-link']) && in_array($cpu_link, $previously_checked))
        $to_be_removed[] = $cpu_link;
}

mysql_query("DELETE FROM table WHERE `cpu_links` IN (".implode(' ,', $to_be_removed).");"); 
```

# javascript - 如何在 Javascript 中为 Bing Azure 搜索 API 设置 AppId？

> ID：13788217
> 
> 赞同：1
> 
> 时间：2012-12-09T14:18:40.593
> 
> 标签：javascript, json, bing-api

如何在 Javascript 中验证我的请求？使用旧 API，请求的结构是： [http](http://api.search.live.net/json.aspx?AppId=) ://api.search.live.net/json.aspx? AppId= &Query=&sources=web

使用必应 Azure 搜索 API，所需语法为： [https](https://api.datamarket.azure.com/Bing/Search/Web?Query=) ://api.datamarket.azure.com/Bing/Search/Web?Query= 'Xbox'&$top=10&$skip=20&$format=ATOM

如何在 Javascript 中指定 AppId？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-17T19:58:01.787

> 在字符串 ":"+yourAppIDKey 上使用这样的 Base64 编码

```
//initialize Base64 object
var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="";var n,r,i,s,o,u,a;var f=0;e=Base64._utf8_encode(e);while(f<e.length){n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a)}return t},decode:function(e){var t="";var n,r,i;var s,o,u,a;var f=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length){s=this._keyStr.indexOf(e.charAt(f++));o=this._keyStr.indexOf(e.charAt(f++));u=this._keyStr.indexOf(e.charAt(f++));a=this._keyStr.indexOf(e.charAt(f++));n=s<<2|o>>4;r=(o&15)<<4|u>>2;i=(u&3)<<6|a;t=t+String.fromCharCode(n);if(u!=64){t=t+String.fromCharCode(r)}if(a!=64){t=t+String.fromCharCode(i)}}t=Base64._utf8_decode(t);return t},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r)}else if(r>127&&r<2048){t+=String.fromCharCode(r>>6|192);t+=String.fromCharCode(r&63|128)}else{t+=String.fromCharCode(r>>12|224);t+=String.fromCharCode(r>>6&63|128);t+=String.fromCharCode(r&63|128)}}return t},_utf8_decode:function(e){var t="";var n=0;var r=c1=c2=0;while(n<e.length){r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r);n++}else if(r>191&&r<224){c2=e.charCodeAt(n+1);t+=String.fromCharCode((r&31)<<6|c2&63);n+=2}else{c2=e.charCodeAt(n+1);c3=e.charCodeAt(n+2);t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63);n+=3}}return t}}

$.ajax
({
  type: "POST",
  url: url,
  data: "json",
  headers:{
    'Authorization': 'Basic ' + Base64.encode(":"+youAppIdKey)
  },
  success: function (data){
    console.log("yo");
    console.log(JSON.stringify(data));
    console.log(data['d']['results'][0]['MediaUrl']);
  },
  error: function(XMLHttpRequest, textStatus, errorThrown) {
       console.log("some error", XMLHttpRequest, textStatus, errorThrown);
    }
}); 
```

> 如果您遇到 CORS 错误，请使用您网站文件夹中的 SimpleHTTPServer 进行本地测试，方法是在终端中键入

```
$ python -m SimpleHTTPServer 
```

# c# - 如何在 Visual Studio 的 TextAdornment 模板的编辑器中插入文本？

> ID：13788221
> 
> 赞同：2
> 
> 时间：2012-12-09T14:19:30.030
> 
> 标签：c#, visual-studio, visual-studio-extensions

我按照此页面中的步骤[http://blogs.msdn.com/b/visualstudio/archive/2009/12/09/building-and-publishing-an-extension-for-visual-studio-2010.aspx](http://blogs.msdn.com/b/visualstudio/archive/2009/12/09/building-and-publishing-an-extension-for-visual-studio-2010.aspx)

我创建了一个 TextAdornment 项目和一个搜索框。我想在这个页面做一些不同的事情。我想查询一个链接，在 WPF 用户控件中获取一个列表，然后将信息写入编辑器。所以问题是我不知道如何将文本写回 seachbox（WPF 用户控件）中的编辑器？我搜索了很多，并获得了一种使用代码的方法，如下所示：

```
IVsTextManager txtMgr = (IVsTextManager)GetService(typeof(SVsTextManager));
        IVsTextView vTextView = null;
        int mustHaveFocus = 1;
        txtMgr.GetActiveView(mustHaveFocus, null, out vTextView);
        IVsUserData userData = vTextView as IVsUserData;
        if (userData == null)
        {
            return null;
        }
        else
        {
            IWpfTextViewHost viewHost;
            object holder;
            Guid guidViewHost = DefGuidList.guidIWpfTextViewHost;
            userData.GetData(ref guidViewHost, out holder);
            viewHost = (IWpfTextViewHost)holder;
            return viewHost;
        } 
```

但是，方法“GetService”也说没有找到。我认为原因是这种方法适用于 VSPackage。不适合装饰项目。

请帮助指出如何将文本从 WPF 用户控件写回编辑器。谢谢！

==================================================== =====================================

**解决方法：** 在创建SearchBox（WPF用户控件）时，通过IWpfTextView传递给WPF控件，然后在SearchBox.xaml.cs中使用即可。还需要注意使用 Dispatcher 函数来保持 UI 线程处于活动状态。

```
Dispatcher.Invoke(new Action(() =>
        {

            ITextEdit edit = _view.TextBuffer.CreateEdit();
            ITextSnapshot snapshot = edit.Snapshot;

            int position = snapshot.GetText().IndexOf("gist:");
            edit.Delete(position, 5);
            edit.Insert(position, "billmo");
            edit.Apply();
        })); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T19:52:14.893

如果您在一个包中并且您正在尝试找出当前处于活动状态的视图，那么您拥有的代码是......这对于您正在尝试做的事情来说太过分了。

假设您从 TextAdornment 模板开始，则在构造函数中为装饰对象提供了 IWpfTextView。（如果没有，您可能有一个实现，`IWpfTextCreationListener.TextViewCreated`您需要通过线程处理它。） IWpfTextView 派生具有 ITextBuffer 属性的 ITextView。从这里，您可以调用 CreateEdit() 并从那里编辑文本。

# javascript - 在 CoffeeScript / JavaScript 中导入命名空间

> ID：13788222
> 
> 赞同：2
> 
> 时间：2012-12-09T14:19:33.490
> 
> 标签：javascript, oop, namespaces, coffeescript

是否可以为 JavaScript / CoffeeScript 文件导入命名空间？
这个想法是避免输入完全限定的名称空间。

假设我在我的初始化代码中定义了波纹管。

```
window.Editor = { } 
```

这是 CoffeeScript 文件，我希望避免在其中一遍又一遍地键入完全限定的命名空间：

```
class Editor.Editor
  constructor: (@width, @hight) ->
    @canvas = new Editor.Canvas(@width,  @hight)
    @backGround = new Editor.BackGround(@canvas)
    @frontGround = new Editor.FrontGround(@canvas) 
```

例如，我可以导入类似于在 Java 中导入包的命名空间吗

```
import Editor.*; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:20:34.507

尝试这样的事情：

编辑器.coffee：

```
Editor = {}

root = exports ? window
root.Editor = Editor 
```

主咖啡：

```
{Editor} = require './Editor' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T14:40:23.427

你可以试试

```
for key, value of Editor
  window[key] = value 
```

但是你应该**非常小心**。因为你可以重新定义你真正需要的东西。

# android - Android NDK - 使用本地主机时关闭套接字

> ID：13788228
> 
> 赞同：2
> 
> 时间：2012-12-09T14:20:25.803
> 
> 标签：android, c++, linux, sockets, android-ndk

我在使用 Android NDK 的 C++ 代码中使用某些套接字时遇到问题。创建了两个套接字，一个从另一个中读取。这适用于 Android 上的网络连接，无论*在*另一*台*机器上是否有网络连接，但*不适***用于**没有网络连接的 Android。

这是套接字关闭之前的*netstat输出。*感兴趣的线是

```
tcp        0      0 127.0.0.1:32993        127.0.0.1:46810        ESTABLISHED

Proto Recv-Q Send-Q Local Address          Foreign Address        State
tcp        0      0 0.0.0.0:32993          0.0.0.0:*              LISTEN
tcp        0      0 0.0.0.0:45549          0.0.0.0:*              LISTEN
tcp        0      0 127.0.0.1:5037         0.0.0.0:*              LISTEN
tcp        0      0 0.0.0.0:5555           0.0.0.0:*              LISTEN
tcp        0      0 127.0.0.1:46811        127.0.0.1:32993        ESTABLISHED
tcp        0      0 127.0.0.1:32993        127.0.0.1:46811        ESTABLISHED
tcp        0      0 127.0.0.1:46810        127.0.0.1:32993        ESTABLISHED
tcp        0      0 127.0.0.1:32993        127.0.0.1:46810        ESTABLISHED
tcp        0      0 10.0.2.15:5555         10.0.2.2:34217         ESTABLISHED
udp        0      0 10.0.2.15:49667        10.0.2.3:53           
udp        0      0 0.0.0.0:60262          0.0.0.0:* 
```

然后我尝试从套接字 127.0.0.1:46810 读取 10 个字节（header_length - 填充 = 10）：

```
bytes = read(fd, header, header_length - filled); 
```

但是，会读取 0 个字节。TCP_NODELAY 已在套接字上设置。这是读取后的*netstat输出。*

```
Proto Recv-Q Send-Q Local Address          Foreign Address        State
tcp        0      0 0.0.0.0:32993          0.0.0.0:*              LISTEN
tcp        0      0 127.0.0.1:5037         0.0.0.0:*              LISTEN
tcp        0      0 0.0.0.0:5555           0.0.0.0:*              LISTEN
tcp        0      0 127.0.0.1:46811        127.0.0.1:32993        FIN_WAIT2
tcp        0      1 127.0.0.1:32993        127.0.0.1:46811        CLOSE_WAIT
tcp        0      0 127.0.0.1:46810        127.0.0.1:32993        FIN_WAIT2
tcp        0      0 127.0.0.1:32993        127.0.0.1:46810        CLOSE_WAIT
tcp        0      0 10.0.2.15:5555         10.0.2.2:34217         ESTABLISHED
udp        0      0 0.0.0.0:60262          0.0.0.0:* 
```

有网络连接时没有问题，使用的地址仍然是127.0.0.1。为什么在没有网络连接时无法读取 localhost 上的任何字节？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T19:59:37.910

原来这是由另一个问题引起的。在将 IP 地址解析为 char 数组后的一段时间，在数组上调用了 delete[]。当没有网络连接时，指针被直接重新分配到 127.0.0.1，所以程序在 delete[] 上崩溃了。使用将 IP 复制到阵列中

```
strcpy(ip, "127.0.0.1"); 
```

表示指针仍然指向数组，调用delete[]时程序不会崩溃。

# python - 机器学习非常简单的文本分类？

> ID：13788229
> 
> 赞同：15
> 
> 时间：2012-12-09T14:20:40.970
> 
> 标签：python, algorithm, machine-learning, text-analysis

> **可能的重复：**
> [文本分类到类别](https://stackoverflow.com/questions/8136677/text-classification-into-categories)

我目前正在研究一种解决方案，以根据他们的描述在包含 10k 家餐厅的数据库中获取食物类型。我正在使用关键字列表来决定提供哪种食物。

我读了一点关于机器学习的书，但我根本没有这方面的实践经验。任何人都可以向我解释是否/为什么它会更好地解决像这样的简单问题吗？我发现准确性比性能更重要！

简化示例：

```
["China", "Chinese", "Rice", "Noodles", "Soybeans"]
["Belgium", "Belgian", "Fries", "Waffles", "Waterzooi"] 
```

一个可能的描述可能是：

“Hong's Garden Restaurant 为我们的顾客提供美味、价格合理的**中餐**。如果您发现自己在周六晚上 8 点突然想吃 **米饭**、**面条**或**大豆**，请不要担心！我们 7 天营业一周，提供外卖服务，**薯条**也可以在这里买！”

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-12-09T14:44:46.623

您确实在描述一个*分类*问题，可以通过机器学习来解决。

在这个问题中，你的特征是描述中的文字。您应该使用[**Bag Of Words**](http://en.wikipedia.org/wiki/Bag-of-words_model)模型 - 它基本上表示每个单词的单词及其出现次数对分类过程很重要。

**为了解决您的问题，您应该执行以下步骤：**

1.  **创建一个特征提取器**- 给出餐厅的描述，返回这家餐厅的“特征”（在上面解释的词袋模型下）（在文献中表示为示例）。
2.  **手动标记一组示例**，每个示例都将标有所需的类别（中国、比利时、垃圾食品……）
3.  将您标记的示例输入到学习算法中。它将**生成一个分类器**。从个人经验来看，[SVM](http://en.wikipedia.org/wiki/Support_vector_machine)通常会给出最好的结果，但也有其他选择，例如[Naive Bayes](http://en.wikipedia.org/wiki/Naive_Bayes_classifier)、[Neural Networks](http://en.wikipedia.org/wiki/Artificial_neural_network)和[Decision Trees](http://en.wikipedia.org/wiki/Decision_tree_learning)（通常使用[C4.5](http://en.wikipedia.org/wiki/C4.5_algorithm)），各有优势。
4.  当一个新的（未标记的）示例（餐厅）出现时——提取特征并将其提供给你的分类器——它会告诉你它认为它是什么（通常——分类器正确的概率是多少）。

* * *

**评估：**
您的算法评估可以通过[交叉验证](http://en.wikipedia.org/wiki/Cross-validation_%28statistics%29)来完成，或者从您的标记示例中分离出一个测试集，这些示例仅用于评估算法的准确性。

* * *

**优化：**

根据个人经验 - 以下是我发现对特征提取有帮助的一些优化：

1.  [词干](http://en.wikipedia.org/wiki/Stemming)和消除[停用词](http://en.wikipedia.org/wiki/Stop_words)通常有很大帮助。
2.  使用[Bi-Grams](http://en.wikipedia.org/wiki/Bigram)往往会提高准确性（尽管会显着增加特征空间）。
3.  一些分类器容易出现大的特征空间（不包括 SVM），有一些方法可以克服它，例如降低特征的维数。[PCA](http://en.wikipedia.org/wiki/Principal_component_analysis)是可以帮助您的一件事。[遗传算法](http://en.wikipedia.org/wiki/Genetic_algorithm)也（根据经验）非常适合子集选择。

* * *

**图书馆：**

不幸的是，我对 python 不够流利，但这里有一些库可能会有所帮助：

*   [Lucene](http://lucene.apache.org/core/)可能会在文本分析方面为您提供很多帮助，例如 - 可以使用[EnglishAnalyzer](http://lucene.apache.org/core/old_versioned_docs/versions/3_1_0/api/all/org/apache/lucene/analysis/en/EnglishAnalyzer.html)进行词干提取。有一个 python 版本的 lucene 叫做[PyLucene](http://lucene.apache.org/pylucene/)，我相信它可以帮助你。
*   [Weka](http://www.cs.waikato.ac.nz/ml/weka/)是一个开源库，它为机器学习实现了许多有用的东西——包括许多分类器和特征选择器。
*   [Libsvm](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)是一个实现 SVM 算法的库。

# c# - .NET for Windows Store 中的 System.IO.Directory

> ID：13788230
> 
> 赞同：1
> 
> 时间：2012-12-09T14:20:40.953
> 
> 标签：c#, .net, windows-store-apps

问题很简单：

我想`System.IO.Directory`在 Windows Store Apps 中实现与类（尤其是与获取目录相关的方法）类似的功能。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:24:16.613

查看[StorageFolder](http://msdn.microsoft.com/library/windows/apps/BR227230)类，如果它符合您的要求，请告诉我。

# flash - 如果在 transform-style:preserve-3d 中，Firefox 不会显示 flash

> ID：13788233
> 
> 赞同：1
> 
> 时间：2012-12-09T14:21:11.750
> 
> 标签：flash, firefox, css, transform

我在coverflow 风格的显示器中嵌入了一个Flash 播放器。

我在 flash 的祖先之一上使用 css3 `transform-style:preserve-3d;`，以便根据它们的 3d 方向（而不是它们在 DOM 中的顺序）对保存我的 flash 嵌入的元素进行 z 索引。

如果它的祖先之一具有 preserve-3d css 属性，Firefox 会隐藏 Flash 嵌入。如果我删除此属性，它将呈现闪光灯。

其他浏览器将正确呈现此内容。

这是一个测试用例小提琴：http: [//jsfiddle.net/ek59Y/1/](http://jsfiddle.net/ek59Y/1/)

这是预期的行为吗？这是一个错误吗？

我的浏览器：

*   firefox 17.0（也在 15.0 上测试过）
*   铬 23.0

**编辑：**

将 transform-style 设置为 flat 会产生与完全删除属性相同的结果（正确渲染）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:11:39.967

显然，这是一个 Firefox 错误。

我在 bugzilla 中打开了一张票，Mozilla 代表表示 Firefox 不支持使用`wmode=window`和显示 Flash 视频`preserve-3d`。

[https://bugzilla.mozilla.org/show_bug.cgi?id=819763](https://bugzilla.mozilla.org/show_bug.cgi?id=819763)

# web-services - Dynamics CRM Web 服务执行返回“服务器无法处理请求”。

> ID：13788234
> 
> 赞同：0
> 
> 时间：2012-12-09T14:21:19.097
> 
> 标签：web-services, dynamics-crm, dynamics-crm-4

我对 DCRM 网络服务发疯了，

我正在尝试动态创建两个潜在客户之间的连接。我收到以下错误：

```
"0x80040216
  An unexpected error occurred.
  Platform
  An unexpected error occurred.

Type:Microsoft.Crm.CrmException ErrorCode:0x80040216
Object reference not set to an instance of an object." 
```

这是我的代码：

```
Guid connectionRoleID = new Guid("64f33a74-0342-e211-b55e-00155d00041e");
connectionroleobjecttypecode connroleobjecttypecode = new connectionroleobjecttypecode() { connectionroleid = new Lookup(){Value = connectionRoleID}, associatedobjecttypecode = EntityName.lead.ToString()};

connection conn = new connection();
List<Property> list = new List<Property>();

Lookup lookup = new Lookup();
lookup.Value = customers[i].ID.Value.Value;
lookup.name = EntityName.lead.ToString();

Lookup lookup2 = new Lookup();
lookup2.Value = customers[j].ID.Value.Value;
lookup2.name = EntityName.lead.ToString();

conn.record1roleid = new Lookup() { name = "duplicate", Value = new Guid("64f33a74-0342-e211-b55e-00155d00041e") };
conn.record2roleid = new Lookup() { name = "duplicate", Value = new Guid("64f33a74-0342-e211-b55e-00155d00041e") };
list.Add(new LookupProperty(){Name = "record1id", Value = lookup});
list.Add(new LookupProperty(){Name = "record2id", Value = lookup2});
list.Add(new LookupProperty(){Name = "record1roleid", Value = conn.record1roleid});
list.Add(new LookupProperty() { Name = "record2roleid", Value = conn.record2roleid }); 
```

我试过跟踪（没有帮助），在事件查看器中我得到一个错误，但没有有用的信息。

我要死在这里了！请帮忙... ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:54:03.957

为要查找的实体添加类型

```
Lookup lookup2 = new Lookup();
lookup2.Value = customers[j].ID.Value.Value;
lookup2.name = EntityName.lead.ToString();
**lookup2.type = "lead";** 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:09:51.620

我认为这是因为你在做：

```
conn.record1roleid = new Lookup() { name = "duplicate", Value = new Guid("64f33a74-0342-e211-b55e-00155d00041e") }; 
```

`name`应该是实体的名称，例如联系人、领导、事件。在这种情况下，我相信您应该使用：connectionrole。

```
conn.record1roleid = new Lookup() { name = "connectionrole", Value = new Guid("64f33a74-0342-e211-b55e-00155d00041e") }; 
```

我建议在[Sample: Create a Connection (Early Bound)](http://msdn.microsoft.com/en-us/library/gg509054.aspx)。

# opengl-es - 片段着色器距离精度

> ID：13788235
> 
> 赞同：2
> 
> 时间：2012-12-09T14:21:35.683
> 
> 标签：opengl-es, opengl-es-2.0, glsles

我的片段着色器有问题。我想在 2d 中实现每帧照明。我使用`distance`函数来测量到光源的距离。如果我的对象靠近原点 (0, 0)，它可以正常工作。如果我的对象远离那里（比如说 (5000, 0)），那么我的不精确性非常明显。我试过`highp`但没有帮助。哪个是测量模型坐标中任意点到片段的距离的好方法？

# database - 数据库架构帮助 - 创建用于创建会员网站的会员网站

> ID：13788237
> 
> 赞同：0
> 
> 时间：2012-12-09T14:21:48.970
> 
> 标签：database, schema

我正在创建一个网络应用程序，用户可以在其中注册并创建拥有自己用户的会员网站。这是我的数据库架构[https://dl.dropbox.com/u/558799/schema.pdf的开始](https://dl.dropbox.com/u/558799/schema.pdf)

所以一个用户可以属于很多站点，一个站点可以有很多用户。但是用户需要作为每个站点的单独用户输入，以便他们可以拥有不同的密码和配置文件。示例用户 A 是站点 A 和站点 B 的成员。用户 A 需要能够在站点 A 中更改其密码而不影响站点 B 的密码。我想我可以在用户表上添加 site_id 作为外键，这样用户就可以在其中两次。

我还应该在每个表中为其他表放置一个 site_id 外键吗？因此，webapp 上的每个查询都将 site_id 作为参数。因此，当我为用户查找订单时，我会将 site_id 和 user_id 作为参数。

这是设计此类应用程序的最佳方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:29:22.110

也许考虑将密码移动到关联表中。

```
user
------
user_id

site
-------
site_id

user_site
----------
user_id
site_id
password   <--- here you will get a different password per site 
```

还可以考虑向关联表 user_site_id 或其他内容添加一个 id - 然后您可以将其用作所有其他引用的键

# math - 如何在 PowerPoint 2010 中更改公式的字体？

> ID：13788238
> 
> 赞同：9
> 
> 时间：2012-12-09T14:22:02.963
> 
> 标签：math, fonts, editor, powerpoint

在 PowerPoint 2010 中，如何将公式的字体从默认的 Cambria Math 更改为 Times 或 Arial？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-09T17:07:16.133

选择方程式，然后在“设计”选项卡的“工具”组中，选择“普通文本”。

![引导的可视化](../Images/534f0075bd4eff97c7f3c0f00004b8cf.png)

然后，您可以选择方程式的内容并选择另一种字体。不是所有的文本都会改变；有些可能必须保持原样，因为并非所有字体都包含所有需要的符号。

# asp.net - 用于 Umbraco 的 NivoSlider

> ID：13788239
> 
> 赞同：1
> 
> 时间：2012-12-09T14:22:09.547
> 
> 标签：asp.net, slider, slideshow, umbraco

我的 Umbraco 项目需要一个滑块，所以我搜索它并找到[这个链接](http://our.umbraco.org/projects/website-utilities/nivoslider-for-umbraco/)。我下载并阅读[了这个关于它的 pdf](http://our.umbraco.org/FileDownload?id=2974)。然后创建一个名为“NivoSliderImage”的所需媒体类型。但我不明白如何使用这种媒体类型和包裹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:35:17.853

您将需要创建一个新的 MediaType，这可以在 Umbraco 的“设置”部分中完成。设置树下有一个名为“媒体类型”的文件夹。

在此处创建新的媒体类型并按照 PDF 中的说明进行操作。媒体类型需要称为“NivoSliderImage”，它需要添加 PDF 中详述的属性。

然后，您需要在“媒体库”部分创建一个文件夹，专门用于添加您从媒体类型对象“NivoSliderImage”创建的媒体。例如，创建文件夹后，您可以右键单击该文件夹，选择“创建”，然后从框中的菜单中选择“NivoSliderImage”。

在文件夹中有几张图像后，转到“设置 > 模板”文件夹并选择一个模板。将光标放在您希望放置 nivo 滑块的位置，然后单击工具栏中的“插入宏”。希望会有一个名为 NivoSlider 的选项。选择此选项后，您将获得 PDF 中详述的一系列选项。顶部选项将是您希望使用的媒体库文件夹。您应该选择您创建并放置 NivoSliderImage 图像的那个。

# forms - 操作getSubmitUrl($_product)的文件在哪里？> Magento 产品视图页面中的表单操作

> ID：13788240
> 
> 赞同：-1
> 
> 时间：2012-12-09T14:22:12.060
> 
> 标签：forms, magento, action

我看到 app\design\frontend\base\default\template\catalog\product\view.phtml 文件中有以下代码：

```
<form action="<?php echo $this->getSubmitUrl($_product) ?>" method="post" id="product_addtocart_form"<?php if($_product->getOptions()): ?> enctype="multipart/form-data"<?php endif; ?>> 
```

是否有执行此操作的文件`action="<?php echo $this->getSubmitUrl($_product) ?>"`？

什么文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:07:02.657

在 magento 中，每个“.phtml”文件都与一个包含可用模板方法的块文件相关联。

template\catalog\product\view.phtml 模板的块位于

> /app/code/core/Mage/Catalog/Block/Product/View.php
> 
> Mage_Catalog_Block_Product_View 类扩展了 Mage_Catalog_Block_Product_Abstract

但是 getSubmitUrl($_product) 继承自`Mage_Catalog_Block_Product_Abstract`

> /app/code/core/Mage/Catalog/Block/Product/Abstract.php

```
public function getSubmitUrl($product, $additional = array())
{
    ...
} 
```

阅读更多@[布局简介](http://www.magentocommerce.com/design_guide/articles/intro-to-layouts)

# node.js - node.js 简单的 tcp 聊天服务器

> ID：13788241
> 
> 赞同：0
> 
> 时间：2012-12-09T14:22:12.917
> 
> 标签：node.js, tcp, network-programming

我正在尝试构建一个没有 socket.io 的简单 tcp 聊天服务器。现在，我可以通过连接到服务器的所有套接字广播数据。

我的问题是为每个连接分配一个套接字标识符并从一个对象中检索它们。

这是代码：

```
var net = require('net');

//keep track of sockets
var allSockets = {
  sockets: {},
  addSocket: function(socket, nick, table) {
    this.sockets[table+nick] = socket;
  },
  removeSocket: function(nick, table) {
    if (this.sockets[table+nick] !== undefined) {
      this.sockets[table+nick] = null;
      delete this.sockets[table+nick];
    }
  }
};

// create the server
var server = net.createServer(function (socket) {
  var connected = false;
  var jsoncommand = true;

  //first data sent MUST BE json formatted string in this format 
  //{"nick":"someid","table":"tablenumber"}

  var thisnick = "";
  var thistable = "";

  // get client ip
  socket.name = socket.remoteAddress;

  //write something on each connect
  socket.write("You are connecting from " + socket.name + "\n");
  socket.write(socket.name + " joined chat\n");

  //handle data streams
  socket.on('data', function (data) {
    if (jsoncommand) {
      //JSON.parse the first data stream
      var some = JSON.parse(data);

      //assign a socket.id based on nick and table
      allSockets.addSocket(socket, some.table, some.nick);

      socket.write(some.nick + " joined " + some.table + "\n");
      thisnick = some.nick;
      thistable = some.table;

      connected = true;

      //no longer waiting for first stream as JSON
      jsoncommand = false;
    } else if (connected) {
      //write whatever data it recieves (function is below)
      broadcast(data, thistable);
    } else {
      socket.write("You are not connected to any table");
      socket.destroy();
      connected = false;
      jsoncommand = true;
      thisnick = "";
      thistable = "";
    }
  });

  // remove the socket from allSockets but broadcast 
  //only to other users on the same table
  socket.on('end', function () {
    allSockets.removeSocket(thisnick, thistable);
    broadcast(thisnick + " has left table " + thistable, thistable);
  });

  //this function should select from the allSockets object, 
  //only those, whose property matches "table"
  //and write to those sockets only, when called

  function broadcast(message, table) {
    allSockets.sockets.forEach(function(socket) {
      if (socket.hasOwnProperty(table)) {
        socket.write(message);
      }
    });
  }
});

server.listen(8000);
console.log("running at port 8000\n"); 
```

只需将其部署在您的机器上并使用 nc 连接到端口 8000 并确保您发送的第一件事是 {"nick":"mynick","table":"mytable"} 您将看到一条消息，您的尼克加入了你的餐桌。

现在，如果您向它发送其他内容，基于它存储了您的表名这一事实，它应该回显您发送的任何内容，发送给您和其他具有不同昵称但在同一张表上的连接，但服务器死机，抛出错误allSockets 对象没有“for”或“forEach”方法或 indexOf 或任何其他方法。

那么，我该如何纠正呢？

如果我的昵称是“john”并且我加入了“my_table”，并且“mary”、“lisa”和“ana”也加入了同一个“my_table”，假设我不知道他们的昵称，但我知道他们在“my_table”，我如何从 allSockets 对象中选择那些包含“my_table”的套接字。

我尝试了 hasOwnProperty，但它返回布尔值，它只告诉我有具有该属性的套接字，但是我如何将它们放入 for 或 foreach 循环中以便写入它们。

我知道这可能是一个愚蠢的问题，或者我什至没有正确地解决这个问题，但我是一个 node.js 初学者，所以任何建议都非常受欢迎。

顺便说一句，我将这些来自网络上的示例放在一起。

至于 JSON 字符串，它首先由桌面应用程序在连接时发送。无论如何，我选择它是出于测试目的，所以不要理会它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:50:10.427

我想关于 forEach 的错误发生在这里：

```
allSockets.sockets.forEach(function(socket) { 
```

虽然 allSockets.sockets 不是 Array，但它是对象（key > value 模型，如哈希表）。

因此，要遍历其中的每个套接字，您应该将循环更改为：

```
for(var key in allSockets.sockets) {
  var socket = allSockets.sockets[key];
  // your logic here
} 
```

# c++ - 从旧字符串创建新字符串

> ID：13788242
> 
> 赞同：0
> 
> 时间：2012-12-09T14:22:15.493
> 
> 标签：c++, windows, string, pointers, copy

我正在使用 C++（Windows 环境）。我有一个 ：

```
LPCWSTR mystring; 
```

这有效：

```
mystring = TEXT("Hello"); 
```

但是怎么做呢？：

```
mystring = ((((create a new string with text = the content which is in another LPCWSTR 'myoldstring')))) 
```

提前非常感谢！

PS：

```
mystring = myoldstring; 
```

会工作，但它不会创建一个新字符串，它将是同一个指针。我想创建一个新字符串！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T14:50:53.487

要使用 C++ 标准字符串，您需要包含`<string>`标头。由于您正在处理`LPCWSTR`（强调这`W`部分）您正在处理宽字符，因此您想使用宽字符串（即，`std::wstring`而不是`std::string`）。

```
#include <string>
#include <iostream>
#include <windows.h>

int main() { 
    LPCWSTR x=L"This is a string";

    std::wstring y = x;
    std::wcout << y;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T14:55:45.643

```
LPTSTR mystring;
mystring = new TCHAR[_tcslen(oldstring) + 1];
_tcscpy(mystring, oldstring);

... After you are done ...

delete [] mystring; 
```

这是一个完整的程序

```
#include <tchar.h>
#include <windows.h>
#include <string.h>

int main()
{
    LPCTSTR oldstring = _T("Hello");

    LPTSTR mystring;
    mystring = new TCHAR[_tcslen(oldstring) + 1];
    _tcscpy(mystring, oldstring);

    // Stuff

    delete [] mystring;

} 
```

它编译得很好`cl /DUNICODE /D_UNICODE a.cpp`

我用过`tchar`宏。如果您不想使用它，那么

```
#include <windows.h>
#include <string.h>

int main()
{
    LPCWSTR oldstring = L"Hello";

    LPWSTR mystring;
    mystring = new WCHAR[wcslen(oldstring) + 1];
    wcscpy(mystring, oldstring);

    // Stuff

    delete [] mystring;

} 
```

编译良好`cl a.cpp`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T14:33:01.323

关于什么

```
string myNewString = std::string(myOldString); 
```

只需使用字符串库的复制构造函数。

# android - 解析带引号的字符串

> ID：13788246
> 
> 赞同：0
> 
> 时间：2012-12-09T14:22:30.467
> 
> 标签：android, string, html-parsing

我一直在尝试解决这个问题一段时间，但仍然没有找到答案。目的是从 HTML 网页中获取一些数据。我可以做所有与互联网相关的部分，但我遇到了问题。这是我的字符串：

类=“数据流图值”> 496

问题是那些引号，否则我的应用程序将能够获得“496”，这是重要的数据，但是有了它们，我无法获得我的数据。

哪个是获取这些数据的好方法？（请注意，在“>”符号之后有一个“\n”）

谢谢小伙伴们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:36:49.340

虽然我通常不推荐正则表达式来读取 xml，但带有 XML 解析器的 HTML 可能是一场噩梦。

使用以下示例。

```
<a class="datastream-graph-value" href="http=blah" > 496</a>
<a class="other"> 496</a> 
```

使用下面的正则表达式应该可以很好地处理它。

```
(class=["][^>"]*["]) 
```

给出了如何使用该正则表达式的一个很好的例子。 [http://www.vogella.com/articles/JavaRegularExpressions/article.html](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

如果您需要代码示例回复，我们会看到我们无法解决的问题。

编辑：

我很无聊，所以我想为什么不把样品放在一起

```
package temp;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class RegexTestPatternMatcher {
  public static final String EXAMPLE_TEST = "<a class=\"datastream-graph-value\" href=\"http=blah\" > 496</a> <a class=\"other\"> 496</a>";

  public static void main(String[] args) {
    Pattern pattern = Pattern.compile("(class=[\"][^>\"]*[\"])");
    // In case you would like to ignore case sensitivity you could use this
    // statement
    // Pattern pattern = Pattern.compile("\\s+", Pattern.CASE_INSENSITIVE);
    Matcher matcher = pattern.matcher(EXAMPLE_TEST);
    // Check all occurance
    while (matcher.find()) {
      System.out.print("Start index: " + matcher.start());
      System.out.print(" End index: " + matcher.end() + " ");
      String match = matcher.group();
      match = match.replace("class=", "");
      System.out.println(match);
    }
    // Now create a new pattern and matcher to replace whitespace with tabs
    Pattern replace = Pattern.compile("\\s+");
    Matcher matcher2 = replace.matcher(EXAMPLE_TEST);
    System.out.println(matcher2.replaceAll("\t"));
  }
} 
```

# javascript - 图像缓存图像准备就绪

> ID：13788248
> 
> 赞同：0
> 
> 时间：2012-12-09T14:22:37.677
> 
> 标签：javascript, drupal

我正在尝试使用 java 脚本在图像上添加标签。图像缓存在第一次加载图像时创建缓存图像，因此当 java 脚本代码尝试在图像上添加标签时，由于图像尚未准备好，它会将它们放置在错误的位置。它将它们作为一条线放置。当第二次调用 java 脚本代码时，它会将标签放置在正确的位置，因为已经创建了缓存图像。

我如何在 java 脚本域中理解图像缓存完成了它的工作并创建了缓存的图像？

图像放置在 id 为 '#tag_container' 的 div 中，图像的 id 为 '#imagecache_taggable_image'

```
Drupal.behaviors.tagRestore = function (context) {
   ...
   ...
    $('#tag_container').addAnnotations(tag_locations );
    // first time I called addAnnotations #imagecache_taggable_image is not ready
    // so that it places tags wrong places  as a line
   ...
   ...

} 
```

亲切的问候...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:33:51.187

我相信图像的 onload 事件应该对此有好处。

[http://www.w3schools.com/jsref/dom_obj_image.asp](http://www.w3schools.com/jsref/dom_obj_image.asp)

这是示例 jQuery 代码：

```
$('#imagecache_taggable_image').bind('load', function() {
    console.log('loaded', this);
    //do custom code here
}); 
```

# iphone - 以编程方式全局 IP 地址

> ID：13788250
> 
> 赞同：1
> 
> 时间：2012-12-09T14:22:58.770
> 
> 标签：iphone, objective-c, ios

我需要在我的 iOS 应用程序中获取全局 IP 地址。

我搜索但找不到任何有关获取全球 IP 地址的帖子。其中大多数是用于获取本地 IP 地址。

我试过这个代码：[如何找到 iPhone 的 IP 地址](http://www.makebetterthings.com/iphone/how-to-find-ip-address-of-iphone/)。但这会返回本地 IP 地址。

对于我的应用程序，我需要获取网站显示的 IP 地址，例如：

[http://myipaddress.com/show-my-ip-address/](http://myipaddress.com/show-my-ip-address/)和 [http://whatismyipaddress.com/](http://whatismyipaddress.com/)

是否可以通过编程方式在 iOS 应用程序中获取全局 IP 地址？一种选择是使用上述 Web 服务，但来自这些网站的响应将是 HTML。是否有任何可以返回简单 JSON 或 XML 的免费网络服务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T14:49:32.007

****编辑 06/29/16：** ** 我已经更新了 API 的 URL，因为旧的不再起作用了。

您可以使用：[https ://api.ipify.org/?format=text](https://api.ipify.org/?format=text)

这是一个普通的字符串。您可以获取 responseObject 并将其存储并在您的应用程序中使用。我推荐 AFNetworking，它是一个简单的调用和返回，你不需要 JSON 或 xml。

```
NSURL *URL = [NSURL URLWithString:@"http://api-sth01.exip.org/"];
NSString *URLPath = @"?call=ip";

// Start Connection
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:URL];
[httpClient setDefaultHeader:@"Accept" value:@"application/json"];
NSMutableURLRequest *request = [httpClient requestWithMethod:@"GET" path:URLPath parameters:nil];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc]initWithRequest:request];
[operation  setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {

    // SAVE responseObject to your app

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {

    // Failed
    NSLog(@"error: %@",  operation.responseString);

}];

[operation start]; 
```

但是如果你想要 JSON，你可以使用：[https ://api.ipify.org/?format=json](https://api.ipify.org/?format=json)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T14:47:50.617

不——不可能严格使用代码以编程方式检索您的外部（全局）IP 地址。关于使用服务查看您的外部 IP，我会调查您正在逃避的问题：解析或抓取从您提到的两个站点或[CheckIP](http://checkip.dyndns.org)返回的 HTML 。

```
[NSData dataWithContentsOfURL:url] 
```

CheckIP 返回的示例如下，它非常简单，可以使用 RegEx 轻松获取

```
<html>
 <head>
  <title>
   Current IP Check
  </title>
 </head>
 <body>
  Current IP Address: 108.66.182.170
 </body>
</html> 
```

编辑：使用@gmogames 回答中的 URL，您只需执行以下操作即可将数据转换为字符串：

```
NSURL *theURL = [[NSURL alloc] initWithString:@"http://api-sth01.exip.org/?call=ip"];
NSString* myIP = [[NSString alloc] initWithData:[NSData dataWithContentsOfURL:theURL]
                                     encoding:NSUTF8StringEncoding]; 
```

# java - 损坏的功能，即使它看起来是正确的

> ID：13788251
> 
> 赞同：0
> 
> 时间：2012-12-09T14:22:58.720
> 
> 标签：java, eclipse, libgdx

我今天一直在测试我的应用程序，但在我做了一个完全不相关的更改后，不知何故一个功能坏了，最重要的是我不明白为什么它不应该工作。

这里是：

```
public static int componentStrId(String string)
    {
        for(int i = 0; i < GameMain.ComponentNames.length; i++)
        {
            Gdx.app.log("GameCoordinator", "componentStrId index: " + i);
            if(string == GameMain.ComponentNames[i])
            {
                return i;
            }
        }
        return -1;
    } 
```

在你问之前，是的，我输入的字符串存在于我搜索的数组中，但函数返回 -1。它只是在数组中毫无意义地循环。

我有一种 Eclipse 吓坏了的感觉，虽然也许我只是瞎了眼，看不到明显的错误……那到底是前者还是后者？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T14:24:21.197

而不是这个...

```
if(string == GameMain.ComponentNames[i]) 
```

用这个 ...

```
if(string.equals(GameMain.ComponentNames[i])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T14:26:04.183

如果您提供

```
GameMain.ComponentNames[3] 
```

作为参数它会返回`3`。

如果你单独构造一个字符串，它总是返回-1，`==`只有当两个引用都指向同一个对象时才会返回true。

# c++ - VS 2010 - 将 Win32 应用程序向导打开为 .html 文件

> ID：13788253
> 
> 赞同：5
> 
> 时间：2012-12-09T14:23:13.450
> 
> 标签：c++, visual-studio-2010, windows-7

我有点不愿意问问题，因为它已经[在这里](https://stackoverflow.com/questions/7766942/visual-studio-2010-when-creating-new-project-vs2010-wants-to-open-html-file-of)问过了，但问题是，它没有得到足够的回答，所以我不得不第二次问它。

所以，就像之前提到的提问者一样，我正在尝试在 Microsoft Visual 2010 中创建新项目。它没有显示普通窗口，而是[提示](https://i.stack.imgur.com/mRA1V.png)我保存 .html 文件，如下图所示。

![在此处输入图像描述](../Images/60ad87a976b880a409668867209db13c.png)

保存并打开它会导致[以下窗口：](https://i.stack.imgur.com/7TWhq.png)

![在此处输入图像描述](../Images/6a6ca64b2290fa4be05f5916f7eac048.png)

尽管它什么也没做——只是页面，对项目完全没有影响。

值得注意的是，这不仅发生在 Win32 应用程序中，而且也发生在 MFC 应用程序中。至于这件事的原因，我不知道。正如您从第一个屏幕截图中看到的那样，我之前在做 Web 应用程序，但我根本没有改变任何偏好（尽管，我猜测它以某种方式连接）。

至于解决这个问题，我尝试卸载 IE8，如上一主题所述，但这没有帮助。此外，我尝试执行工具 -> 导入和导出设置 -> 重置，但也无济于事。

请，如果有人知道这个问题的解决方案，请告诉我 - 我对这个问题失去了理智。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-23T03:01:16.357

出现此问题的原因是某些 Visual Studio 设置已损坏。

我想建议重置设置，例如开始 > 运行 > devenv.exe /resetsettings

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T01:48:40.353

不幸的是，这个案例的许多部分都与文件之间的干扰或冲突有关。根据我的经验，最近安装的一些程序可能会引起这种担忧。

我想建议安装 VS 2010 的所有服务包和更新补丁，然后再试一次。如果它没有修复，重新安装 VS 将是一个相关的解决方案，可以节省您的时间并保持您的热情。

# java - 获取 FormDataParam 属性和属性

> ID：13788254
> 
> 赞同：2
> 
> 时间：2012-12-09T14:23:15.787
> 
> 标签：java, web-services, forms, post, jersey

```
 @POST
    @Path("post")
    @Consumes("multipart/form-data")
    public Response postCategory(@FormDataParam("text1") String text1,
            @FormDataParam("file1") InputStream file1,
            @FormDataParam("text2") String text2,
            @FormDataParam("file2") InputStream file2) {
        System.out.println("CategoryService.postCategory()");
        System.out.println("text1:" + text1);
        System.out.println("text2:" + text2);

        String uploadedFileLocation = "d://uploaded/test.jpg";
        writeToFile(file1, uploadedFileLocation);

        return Response.ok().build();
    } 
```

使用此代码，我可以获得**HtmlInputFile**作为**InputStream**，**HtmlInputText**作为**String**，但我想获得**HtmlInputText**的另一个属性，`id, name, class`甚至更多：我的动态属性如下：

```
<input type='text' myattr='myattr-value' name='inpp'/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:46:06.177

提交表单时（根据[WC3 规范](http://www.w3.org/TR/html401/interact/forms.html)），名称和值将发送到服务器。要获得其他值，我建议创建一些额外的隐藏输入。

```
<input type="hidden" name="valueOne" value="">
<input type="hidden" name="valueTwo" value=""> 
```

还有一些 javascript 在提交时设置这些字段。

```
<script>
    document.yourForm.elements["valueOne"].value = "someValue";
    document.yourForm.elements["valueTwo"].value = "someOtherValue";
</script>

<form name="yourForm" method="POST" onSubmit="setValues();"> 
```

但是，您可能想问为什么 id 和类对表单提交很重要。这种类型的设计可能会将您的后端控制器与前端标记耦合得太紧。这可能会导致一些问题。

# javascript - TideSDK：有没有办法设置菜单样式？

> ID：13788257
> 
> 赞同：3
> 
> 时间：2012-12-09T14:23:55.010
> 
> 标签：javascript, css, menu, tidesdk

我正在使用 TidSDK 的菜单...

```
var menu2 = Ti.UI.createMenu();

//Create menu items
var subMenu1 = menu2.addItem('',function(){history.back();},'back.png');

Ti.UI.currentWindow.setMenu(menu2); 
```

我想知道：有没有办法给它们设计样式？比如高度、宽度、背景、图标大小等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T20:38:43.550

抱歉不行。本机菜单绑定到系统样式。如果用户更改其操作系统的主题，TideSDK 应用程序中的原生菜单也会改变其外观。

如果您想拥有完整的可样式化窗口/上下文菜单，则必须使用 HTML/CSS 创建它们并通过 JavaScript 控制它们。

# android - 如何在android编程中使用wait()方法进行启动？

> ID：13788260
> 
> 赞同：0
> 
> 时间：2012-12-09T14:24:02.743
> 
> 标签：android, splash-screen, time-wait

我想为我的 android 应用程序大放异彩。功能是当应用打开时，首先显示启动页面。直到从 GPS 获得第一个数据，然后它才转向主要活动。logcat 报告的我的代码中的 wait() 存在一些问题。

```
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.Handler;
import android.widget.TextView;

public class splash extends Activity
{   int waittime;
    public void onCreate(Bundle icicle)
    {
        super.onCreate(icicle);
        setContentView(R.layout.splash);
        final TextView text=(TextView)findViewById(R.id.textView1);
        text.setText("Waiting for the GPS data update!");
        LocationManager locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
        String provider = locationManager.GPS_PROVIDER;
        int c=0;
        for(int i=0; i<20;i++)
        {  
            Location location = locationManager.getLastKnownLocation(provider);
                 //get the location data from every loop
            if(location!=null)//if get the data, then turn to the main activity
            {
                new Handler().postDelayed(new Runnable() {
                    public void run() {

                        Intent mainIntent = new Intent(splash.this, MainActivity.class);
                        splash.this.startActivity(mainIntent);
                    splash.this.finish();
                    }
                }, 1000);
            }
                else
                {
                    try {
                        wait(3000);//if not get the data, wait 3 seconds until the next loop
                    } catch (InterruptedException e) {

                        e.printStackTrace();
                    }
                }
            }

        }
    } 
```

logcat信息如下： ![在此处输入图像描述](../Images/4214374f1411265e68b16673dba1d786.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-08T11:50:07.483

使用 Thread.sleep 而不是 wait() 之类的

```
 try {
            Thread.sleep(1500);
     }
    catch (InterruptedException e)
     {
              e.printStackTrace();
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T15:00:10.913

为了在对象上调用 wait()，您必须在该对象上持有同步锁（尽管锁实际上是在线程等待时释放的）。如果效果更好，还有thread.sleep，但我不确定它是否会。

# debian - Aptana Studio 3 无法在 Debian Squeeze KDE 中运行

> ID：13788261
> 
> 赞同：2
> 
> 时间：2012-12-09T14:24:07.280
> 
> 标签：debian, aptana3, kde

我刚刚在一个全新的 64 位 Debian Squeeze KDE 系统上安装了 Aptana Studio 3。当我尝试运行它时，我得到一个弹跳的 aptana 图标，然后什么也没有发生。启动画面永远不会出现。

网络搜索发现一位说西班牙语的用户也有同样的问题，但从未收到答案。 [http://foro.ubuntu-guia.com/Instalacion-Aptana-Studio-3-En-Debian-Testing-KDE-64-Bits-td4025304.html](http://foro.ubuntu-guia.com/Instalacion-Aptana-Studio-3-En-Debian-Testing-KDE-64-Bits-td4025304.html)

Aptana Studio 是 Eclipse IDE 的一个版本，其中内置了 python 开发支持。我尝试安装 eclipse 和 openjdk 以查看是否缺少先决条件。

```
$ sudo apt-get install -y eclipse 
```

然而它没有帮助。

有没有人有解决这个问题的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T17:37:53.483

需要更换

```
Exec=/opt/aptana/AptanaStudio3 
```

为了

```
Exec=/opt/aptana/aptana 
```

# python - 无法检索行

> ID：13788262
> 
> 赞同：1
> 
> 时间：2012-12-09T14:24:13.297
> 
> 标签：python, scrapy

我在用`scrapy 0.14`

下面是我的代码

```
start_urls = ['http://lakebagger.com/ur/']

def parse(self, response):
    hxs = HtmlXPathSelector(response)
    stores=hxs.select('//table[@id]//tr')
    print len(stores) 
```

我无法访问**tbody**中的行（tr） ，而不是我只能访问**thead**行。我如何访问行？

提前致谢 。看起来 HtmlXpathSelector 无法准确地排序 xpath

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:30:36.163

在这一点上，我会说它是环境问题，尽管不是操作系统问题，因为我设法让一个类似的脚本在 Windows 7 上运行。键入“pip freeze”的结果是什么？

矿：

```
Scrapy==0.16.2
Twisted==12.2.0
distribute==0.6.32
egenix-pyopenssl==0.13.0-1.0.0g-1
lxml==3.0.1
pyOpenSSL==0.9
pywin32==216
w3lib==1.2
zope.interface==3.8.0 
```

另外，我确实认为您应该发布完整的蜘蛛代码以供检查，因为缺少的行中可能存在导致问题的内容。

编辑：根据您的评论，这可能与您运行 0.14 的版本有关。有没有考虑升级？

注意：我按照[这些步骤](https://github.com/scrapy/scrapy/wiki/How-to-Install-Scrapy-0.14-in-a-64-bit-Windows-7-Environment)安装了scrapy。

# android - 如何控制显示屏的亮灯时间

> ID：13788263
> 
> 赞同：0
> 
> 时间：2012-12-09T14:24:13.257
> 
> 标签：android

我想在应用程序运行时保持显示屏打开，即我不希望设备在应用程序运行时被锁定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:34:05.837

我认为你想要的是 WakeLock。你应该看看这个：http: [//developer.android.com/reference/android/os/PowerManager.WakeLock.html](http://developer.android.com/reference/android/os/PowerManager.WakeLock.html)

你需要这个权限：android.permission.WAKE_LOCK

然后你可以做这样的事情：

> PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
> mWakeLock = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK | PowerManager.ON_AFTER_RELEASE, "我的标签");
> mWakeLock.acquire();

要删除 WakeLock，只需调用：

> mWakeLock.release();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T14:30:06.097

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK, "My Tag");
wl.acquire(); 
```

还需要将 android.permission.WAKE_LOCK 添加到 manifest。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T14:42:03.003

除了使用唤醒锁，您还可以使用：

`getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);`

# ruby - 一次运行所有 selenium ruby webdriver 脚本。

> ID：13788266
> 
> 赞同：0
> 
> 时间：2012-12-09T14:24:27.163
> 
> 标签：ruby, selenium, webdriver

目前，我在 Ruby 命令提示符窗口上运行每个 Selenium Ruby Webdriver 脚本 (*.rb)，语法如下：ruby test.rb。它运作良好。

但是，我还有一些其他脚本，现在我想运行一次所有脚本而不是调用 ruby​​ test1.rb，然后等待这个脚本完成，然后继续运行：ruby test2.rb.....然后，ruby test3 .rb......

有人请指导我一次运行我创建的所有脚本的方法吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T14:46:50.997

您可以使用 rake `gem`，为此您需要创建一个名为 的文件`rakefile.rb`，然后粘贴以下内容：

```
task :default do
    FileList['file*.rb'].each { |file| ruby file }
end 
```

现在打电话给`rake`你的终端，你应该很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T14:53:05.487

制作一个功能文件并运行整个功能怎么样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-13T10:26:34.730

只需像这样创建一个 ruby​​ 文件：

```
require './Test1.rb'
require './Test2.rb' 
```

运行它并查看结果

# codeigniter - pyrocms（codeigniter 图像库）不创建拇指

> ID：13788277
> 
> 赞同：0
> 
> 时间：2012-12-09T14:25:35.407
> 
> 标签：codeigniter, image-resizing, pyrocms

嘿伙计们，我有这个问题，我花了 4-5 个小时寻找解决方案这是我的代码

```
$config = array(
            'upload_path' => './uploads/menus',
            'allowed_types' => 'gif|jpg|jpeg|png',
            'max_size' => '15000'
        );
        $this->upload->initialize($config);

        if ($this->upload->do_upload('image'))
        {

                $image_data = $this->upload->data();
                $thumbnail = 'thumb_' . $image_data['file_name'];
                $thumb['image_library'] = 'gd2';
                $thumb['source_image'] = $image_data['full_path'];
                $thumb['create_thumb'] = TRUE;
                $thumb['thumb_marker'] = '';
                $thumb['new_image'] = $image_data['file_path'] . 'thumbs/' . $thumbnail;
                $thumb['maintain_ratio'] = TRUE;
                $thumb['width'] = 90;
                $thumb['height'] = 90;
                $this->load->library('image_lib', $thumb);
                if($this->image_lib->resize())
                {
                    $img_details = array(
                                        'menu_id' => $this->db->insert_id(),
                                        'full_path' => $image_data['full_path'],
                                        'image_name' => $image_data['file_name'],
                                        'thumb_path' => $thumb['new_image'],
                                        'thumb_name' => $thumbnail,
                                    );

                    $upload = $this->db->insert('menus_images', $img_details);
                    return $upload;
                }
        } 
```

我正在使用 PyroCMS，我正在开发一个需要上传图像的模块。到目前为止一切顺利，我的问题是：图像被上传，调整大小检查没有问题通过，在 db 中插入正确的数据，但是在“thumbs”文件夹中没有创建任何拇指。如果您有任何建议，请给我一些帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:33:02.997

您可以使用 Stream APi 来开发您的模块。顺便说一句，我使用 PyroCMS 并且刚刚完成了一个新模块，并且我使用 codeigniter lib 毫无问题地创建了 thumb。你的代码是正确的，我唯一可以建议你的是以这种方式分离 image_lib 的加载和它的初始化：

```
$this->load->library('image_lib');

$thumbnail = 'thumb_' . $image_data['file_name'];
$thumb['image_library'] = 'gd2';
$thumb['source_image'] = $image_data['full_path'];
$thumb['create_thumb'] = TRUE;
$thumb['thumb_marker'] = '';
$thumb['new_image'] = $image_data['file_path'] . 'thumbs/' . $thumbnail;
$thumb['maintain_ratio'] = TRUE;
$thumb['width'] = 90;
$thumb['height'] = 90;

$this->image_lib->initialize($thumb); 
```

这样你应该没有任何问题。如果它不起作用尝试将主图像和拇指分开，您可以创建第一个图像，然后创建具有两个分离功能的拇指。

# excel - 我怎样才能得到一个单元格的列字母（需要使它工作超过 Z 列，如 AA，AB）

> ID：13788279
> 
> 赞同：7
> 
> 时间：2012-12-09T14:25:43.400
> 
> 标签：excel, vba

> **可能重复：**
> [将列号转换为字母的 VBA 函数？](https://stackoverflow.com/questions/12796973/vba-function-to-convert-column-number-to-letter)

我想让列字母超过 Z 列，在 Z 列之前有很多技术可以得到它，但是在 Z 之后，似乎没有任何效果有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-10T02:49:31.637

另一种方法：

```
Public Function ColumnLettersFromRange(rInput As Range) As String

    ColumnLettersFromRange = Split(rInput.Address, "$")(1)

End Function 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-09T16:17:53.900

这应该做的工作：

```
函数 ColumnName(rng As Range) 作为字符串
    暗淡为字符串
    s = rng.地址（假，假）
    ColumnName = Left(s, Len(s) - Len(Format(rng.Row, "0")))
结束功能

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T16:55:26.880

使用工作表函数来计算列字母并不是一个好的计划。使用 Peter Albert 的 VBA 方法是一种更好的方法！

我尝试使用工作表函数制作一个，只是为了好玩：/

A-ZZ

```
=IF(A1<27,CHAR(64+A1),IF(A1<703,CHAR(64+INT(A1/26))&CHAR(A1-INT(A1/26)+64),"TOO BIG!")) 
```

A-XFD（不起作用）

```
=IF(A1<27,CHAR(64+A1),IF(A1<703,CHAR(64+INT(A1/26))&CHAR(A1-(INT(A1/26)*26)+64),CHAR(64+INT(A1/676))&CHAR(64+(INT(A1-(INT(A1/676)*676))/26))&CHAR(64+INT(A1-((INT(A1-(INT(A1/676)*676))/26)*26))))) 
```

最后一个在尝试计算地址中的第三个字符时失败了，我只是不能打扰，因为使用它不是一个好计划！

# facebook - 如何显示 Facebook 评论分类器和更多按钮？

> ID：13788284
> 
> 赞同：0
> 
> 时间：2012-12-09T14:26:14.760
> 
> 标签：facebook

我正在创建一个 Facebook iframe 游戏，并使用以下代码允许玩家发表评论：

```
<div class="comments">
<h1>Comments</h1>
<fb:comments data-href="http://www.facebook.com/xxxx/app_222222222222222" data-colorscheme="dark" data-width="440" data-order-by="reverse_time"></fb:comments>
</div> 
```

我见过其他页面有类似的评论部分，但他们有一个像这样的下拉排序器

![在此处输入图像描述](../Images/335331d783618495447960ea43bc1255.png)

你能告诉我你是如何生成分拣机的吗？

此外，他们有一个按钮，您可以按下以显示更多评论，如下所示：

![在此处输入图像描述](../Images/13d3bb2215eb0e251d70dd195f39bedd.png)

你知道你是如何生成那个按钮的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:49:42.050

该功能是插件固有的。文档[在这里](https://developers.facebook.com/docs/reference/plugins/comments/)。此选项可能仅在评论开始时出现足够的活动时才会出现。

# ruby-on-rails-3 - 上限部署：迁移失败，无法找到 Gemfile

> ID：13788286
> 
> 赞同：1
> 
> 时间：2012-12-09T14:26:24.330
> 
> 标签：ruby-on-rails-3, capistrano, gemfile

我正在处理我的第一个 Rails 部署，但遇到了一个我无法解决的问题。mac osx 10.8.2 ruby​​ 1.8.7 Rails 3.2.6 rvm 1.17.2

我一直在关注本教程[http://brandnewrails.wordpress.com/](http://brandnewrails.wordpress.com/)并被困在 7c 上。我在 RVM 中进行了设置，让 git 在服务器上运行`bundle install`，在应用程序中运行，并在 my_app/config/deploy.rb 中编写了 Capistrano 配方

然后我跑了：

`$ capify .`没问题

`$ cap deploy:setup`没有错误

`$ cap deploy:check`回来`You appear to have all necessary dependencies installed`

`$ cap deploy:migrations`是问题发生的地方。成功运行一堆命令后，capistrano 失败。见下文：

```
2012-12-10 00:43:56 executing `bundle_install'
* executing "cd /home/{servername}/party/releases/20121209134354 && bundle install --path vendor/bundle"
servers: ["{servername}"]
[{servername}] executing command
** [out :: {servername}] Could not locate Gemfile
command finished in 694ms

failed: "sh -c 'cd /home/alexchee/party/releases/20121209134354 && bundle install --path vendor/bundle'" on {servername} 
```

有谁知道该怎么做？当我检查应用程序目录时，Gemfile 就在那里。任何想法或进一步的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:10:08.333

在这种情况下 capistrano 无法找到 Gemfile 似乎是没有在本地应用程序中启动 git 的症状，即在我自己的计算机上。

我的直觉是，由于 Gemfile 是上面列表中的第一个文件，这就是它首先创建错误的原因。如果程序继续运行，它可能还会出现其他错误。

即使 git 在服务器上运行并且应用程序已正确捆绑，您也必须在本地启动 git 并将其定向到服务器上的相应文件，以便部署工作。

此处列出了很好的说明：http: [//brandnewrails.wordpress.com/2012/10/14/lesson-7b/](http://brandnewrails.wordpress.com/2012/10/14/lesson-7b/)

# radiobuttonlist - RadioButton 列表中的选定项目进行页面传输

> ID：13788287
> 
> 赞同：0
> 
> 时间：2012-12-09T14:26:37.923
> 
> 标签：radiobuttonlist

我有一个单选按钮列表，如下所示：

```
<asp:RadioButtonList ID="RBjobSector" runat="server" style="font-size: medium">
    <asp:ListItem>apple</asp:ListItem>
    <asp:ListItem>orange</asp:ListItem>
</asp:RadioButtonList> 
```

如果用户在单击“开始”按钮后选择其中任何一个，我如何引导用户转到 apple.aspx 或 orange.aspx 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:54:01.557

将以下代码放入 selectedIndex 更改事件

```
if (RBjobSector.SelectedIndex == 0)
   Reponse.Redirect("apple.aspx")

if (RBjobSector.SelectedIndex == 1)
   Reponse.Redirect("orange.aspx") 
```

# javascript - 像 jQuery mobile 一样用动画改变页面？

> ID：13788290
> 
> 赞同：-1
> 
> 时间：2012-12-09T14:26:48.607
> 
> 标签：javascript, html

可以更改位置栏中的 URL 并使用 jQuery 移动框架中的动画加载新页面。

如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:14:19.393

是的，这是可能的：任何可以使用 jQuery mobile（或任何其他 javascript 库/框架）完成的事情也可以使用 vanilla Javascript 完成。由于您没有提供任何源代码，我想您希望得到有关如何执行此操作的提示（如果您提供已经尝试过的代码，堆栈溢出用户通常更有动力提供帮助）。

假设您至少要使用 jQuery（或其他 js 框架）：

*   `jQuery.get()`使用（您必须将其检索为“html”）加载新页面。
*   将响应文本保存在 jQuery 对象中：`var myPage = jQuery(MyCallResponseText)`.
*   使用 jQuery 的函数`find`来获取一个特定的 div，从中获取`myPage`您要显示的内容的包装（请注意，不会在其中找到 header 和 body 标签`myPage`）。
*   创建一个`myContainer`宽度和高度为 100%、位置固定、z-index 为 10 的新 div，并且不显示任何内容。
*   附加到`myContainer`整个`myPage`对象（或其内容），将 div 添加到当前页面的主体，最后进行动画处理。

关于脚本的注意事项：其中包含的任何脚本在`myPage`添加到 DOM 时都会被评估，但头部中的脚本不会被评估。

对于动画，您可以使用 jQuery 的`Animate`函数。例如：将 opacity of 设置`myContainer`为 0 并将 display 设置为 block，然后将 opacity 从 0 设置为 1 动画，这样您将获得一个 fadeIn 动画。当然，同样的动画也可以通过调用`myContainer.fadeIn()`来代替。

# java - Java 泛型：地图上的 put() 不适用于参数 (String, AbstractClass)

> ID：13788294
> 
> 赞同：5
> 
> 时间：2012-12-09T14:27:06.303
> 
> 标签：java, generics, capture

我正在尝试为从一个共同父级扩展的多个类实现一种实习生工厂。大部分逻辑是相同的，但它不能真正被继承，因为查找需要是静态的。所需的语法类似于：

```
Car c = AbstractClass.valueOf(Car.class, "Ford"); 
```

Car 具有与汽车相关的特定方法，但实例存储在公共缓存中。这是我到目前为止所拥有的。我的编译错误在构造函数中：

“类型 Map 中的 put(String, capture#3-of ? extends AbstractClass) 方法不适用于参数 (String, AbstractClass)”

```
import java.util.Collection;
import java.util.HashMap;
import java.util.LinkedHashMap;
import java.util.Map;
import java.util.Set;
import java.util.TreeSet;

public abstract class AbstractClass {

    private static Map<Class<? extends AbstractClass>, LinkedHashMap<String, ? extends AbstractClass>> map = new HashMap<Class<? extends AbstractClass>, LinkedHashMap<String, ? extends AbstractClass>>();

    private static synchronized <T extends AbstractClass> Map<String, T> getNameMap(Class<T> clazz) {
        LinkedHashMap<String, T> nameToEnum = (LinkedHashMap<String, T>) map.get(clazz);
        if (nameToEnum == null) {
            nameToEnum = new LinkedHashMap<String, T>();
            map.put(clazz, nameToEnum);
        }

        return nameToEnum;
    }

    public static <T extends AbstractClass> T valueOf(Class<T> clazz, String name) {
        return getNameMap(clazz).get(name);
    }

    public static <T extends AbstractClass> Collection<T> VALUES(Class<T> clazz) {
        return getNameMap(clazz).values();
    }

    public static <T extends AbstractClass> Set<T> SORTED_VALUES(Class<T> clazz) {
        return new TreeSet<T>(getNameMap(clazz).values());
    }

    AbstractClass(String name) {
        AbstractClass.getNameMap(this.getClass()).put(name, this);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T15:05:07.193

根据 javadoc for `Object.getClass()`，返回的类型是表达式的基于通配符的编译时类型。由于编译器只知道`this`返回 AbstractClass 实例，因此`this.getClass()`返回`Class<? extends AbstractClass>`.

这意味着您`getNameMap`在构造函数中的调用将返回一个`Map<String, ? extends AbstractClass>`. 这意味着，虽然返回的 Map 具有特定（非通配符）类型的值，但该确切类型在编译时是未知的；编译器只知道 Map 的值必须是 AbstractClass 或从 AbstractClass 继承的东西。所以编译器不能安全地添加`this`一个值，因为在编译时不知道 AbstractClass 的子类型`this`代表哪个。

举一个更简单的例子：如果返回了一个方法`Map<String, ? extends Number>`，那么编译器将不知道将 Integer 添加到 Map 是否安全，因为 Map 的实际非通配符类型可能是`Map<String, Double>`,`Map<String, Short>`等。

至于解决方案：我认为没有办法让 Map 使用泛型将每个单独的键的类型与其对应的值的类型匹配。我会忘记在内部地图的值上使用有界类型，而是使用动态转换：

```
private static Map<Class<? extends AbstractClass>, Map<String, AbstractClass>> map = new HashMap<>();

private static synchronized Map<Class<? extends AbstractClass>, Map<String, AbstractClass>> getNameMap(Class<T> clazz) {
    // same as before
}

public static <T extends AbstractClass> T valueOf(Class<T> clazz, String name) {
    return clazz.cast(getNameMap(clazz).get(name));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T14:49:20.320

如果您只想存储任何抽象类，只需将您的地图声明为

```
private static Map<Class<? extends AbstractClass>, LinkedHashMap<String, AbstractClass>> map = 
    new HashMap<Class<? extends AbstractClass>, LinkedHashMap<String, AbstractClass>>(); 
```

这将允许您将 AbstractClass 或其子类的任何实例存储在内部映射中，针对 AbstractClass 或其子类之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T20:26:19.787

您的问题基本上可以归结为：

给定具有此签名的方法：

```
public static <T> void foo(T x, Class<T> y); 
```

和任何引用类型的变量：

```
<any reference type> bar; 
```

不可能传递`bar`到`bar.getClass()`这个方法：

```
foo(bar, bar.getClass()); // error 
```

即使可以证明总是存在一些`T`它是正确的（即`T`= 的实际运行时类型`bar`）。

这是由于`.getClass()`导致此问题的类型的语言中的特殊情况。

我可以想到两种方法来解决这个问题：

1）将类对象强制转换为与引用相同的类型（即使这在技术上是不正确的）：

```
AbstractClass(String name) {
    AbstractClass.getNameMap((Class<AbstractClass>)this.getClass()).put(name, this);
} 
```

2) 将对象转换为与类方法的参数相同的类型。由于类类型中的通配符，这将需要一个捕获助手：

```
private static <T> void helper(Class<T> clazz, String name, Object obj) {
    AbstractClass.getNameMap(clazz).put(name, (T)obj);
}
AbstractClass(String name) {
    helper(this.getClass(), name, this);
} 
```

（如果您不想要未经检查的演员表，您可以这样做`AbstractClass.getNameMap(clazz).put(name, clazz.cast(obj));`）

# java - 请求中不存在“X_FORWARDED_FOR”标头

> ID：13788295
> 
> 赞同：2
> 
> 时间：2012-12-09T14:27:23.257
> 
> 标签：java, tomcat, proxy

在我的Web应用程序中，我需要为代理后面的客户端提取真实IP地址，经过搜索我发现可能的方法是读取“X_FORWARDED_FOR”标头的内容，我正在使用java servlet和传入的标头请求不包含“X_FORWARDED_FOR”标头，那么为什么标头不包含在请求中？

我正在使用 java 1.7、tomcat v7、代理服务器：TMG 并配置为使用“X_FORWARDED_FOR”标头。

请指教。

提前致谢。

更新 ：

*   该请求来自对 servlet 的 jquery ajax 请求。
*   我读取可用标题的代码：

    `String ip = request.getHeader("X-Forwarded-For");` //返回空

    ```
     if (ip == null || ip.length() == 0 || "unknown".equalsIgnoreCase(ip)) {  
                ip = request.getHeader("Proxy-Client-IP");  //return null
            }  
            if (ip == null || ip.length() == 0 || "unknown".equalsIgnoreCase(ip)) {  
                ip = request.getHeader("WL-Proxy-Client-IP");  //return null
            }  
            if (ip == null || ip.length() == 0 || "unknown".equalsIgnoreCase(ip)) {  
                ip = request.getHeader("HTTP_CLIENT_IP");  //return null
            }  
            if (ip == null || ip.length() == 0 || "unknown".equalsIgnoreCase(ip)) {  
                ip = request.getHeader("HTTP_X_FORWARDED_FOR");  //return null
            }  
            if (ip == null || ip.length() == 0 || "unknown".equalsIgnoreCase(ip)) {  
                ip = request.getRemoteAddr();  //return proxy server IP
            } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T15:38:33.677

X-Forwarded-For 以及您测试的其他标头是自定义的（它[几乎是标准](http://en.wikipedia.org/wiki/X-Forwarded-For)的，但不完全是）。代理不必设置任何此类标头，因此您必须测试代理服务器将设置哪个标头（如果有）。

但是，如果要设置它，您将使用

```
request.getHeader("X-Forwarded-For"); 
```

HTTP_X_FORWARDED_FOR 将是 PHP 命名，如果您不使用 PHP，请不要使用它...

我会迭代所有传入的标头，看看是否有任何标头包含 ip。如果他们都没有，那你就不走运了。

您可以使用迭代所有标题

```
enames = request.getHeaderNames();
while (enames.hasMoreElements()) {
  String name = (String) enames.nextElement();
  String value = request.getHeader(name);
  // "name" and "value" variables contain the header + its value
} 
```

另请注意，对于 java 应用程序，传递给 servlet 的通常是内部请求，您需要首先请求外部请求以获取具有标头的 httpservletrequest 实例。

另请注意，即使您实际上从该标头中获得了 ip，您仍然应该考虑这是否是可用的信息。关于它的更多细节在[这里](http://rod.vagg.org/2011/07/handling-x-forwarded-for-in-java-and-tomcat/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-31T14:37:20.583

这可能有效：

```
 public static String X_FORWARDED_FOR_HEADER = "X-Forwarded-For";

 public static boolean isNullOrEmpty(String val) 
  {
    if (val == null || val.length() == 0) 
    {
      return true;
    }
    return false;
  } 

 public static String getRemoteAddress(HttpServletRequest request) {
  String remoteAddr = request.getHeader(X_FORWARDED_FOR_HEADER);
  if (!isNullOrEmpty(remoteAddr)) {
      int pos = remoteAddr.indexOf(',');
      if (pos < 0) {
          return remoteAddr;
      }
      return remoteAddr.substring(0,pos); // if more then 1, take first one 
  }
  return request.getRemoteAddr();
  } 
```

# java - 使用 GridBagConstraints 更新布局

> ID：13788298
> 
> 赞同：2
> 
> 时间：2012-12-09T14:27:46.700
> 
> 标签：java, swing, layout, awt, layout-manager

我使用 GridBagConstraints 来更新我的布局，当单击按钮时，会出现一些输入字段。

```
private class EventListener implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            input_panel.removeAll();
               String str = e.getActionCommand();
               System.out.print(str);

               JLabel jl = new JLabel("Label ");
            // Create constraints
               GridBagConstraints textFieldConstraints = new GridBagConstraints();
               GridBagConstraints labelConstraints = new GridBagConstraints();

               labelConstraints.gridx = 0;
               labelConstraints.gridy = 0;

               input_panel.add(jl,textFieldConstraints);
        }
    } 
```

这个函数运行成功，但是有个奇怪的问题，当我点击按钮时，它会更新，但不会立即显示，我必须调整窗口大小才能看到它。发生什么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T14:28:54.713

```
input_panel.add(jl,textFieldConstraints);
input_panel.revalidate(); //try to add this
input_panel.repaint(); // and this 
```

# ember.js - 在 Ember 的自定义事件中传递参数（通过视图层次结构冒泡）？

> ID：13788300
> 
> 赞同：0
> 
> 时间：2012-12-09T14:27:52.750
> 
> 标签：ember.js

[使用我在此处](https://stackoverflow.com/questions/12918112/how-can-i-make-custom-events-that-bubble-through-the-view-hierarchy)找到的 Ember 的自定义事件时，我找不到传递参数的方法。我更喜欢避免专门针对“父”视图的解决方案，例如[这个](https://stackoverflow.com/questions/9379345/how-to-pass-events-to-a-parent-view-passing-the-child-view-that-triggered-the-e)，因为我们失去了“冒泡”。

我的用法如下

插件.js

> ```
> Em.Object.reopen({
>     triggerEvent: function (eventName) {
>         this.$().trigger(eventName, this);
>     }
> }); 
> ```

MyView.js

> 点击：函数（）{
> 
> ```
>  this.triggerEvent('stepClicked'); 
> ```
> 
> }

Ember (0.96+) 中的代码显示传递一个额外的参数被认为是一个管理器，它不会被传递

> ```
> rootElement.delegate('.ember-view', event + '.ember', function(evt, triggeringManager) {
>     ...
>     if (manager && manager !== triggeringManager) {
>           result = self._dispatchEvent(manager, evt, eventName, view);
>     } else if (view) {
>           result = self._bubbleEvent(view,evt,eventName);
>      } 
> ```

提前超级感谢，
奥伦鲁宾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:47:13.157

您可以传递一个事件对象，该对象将告诉您正在单击哪个元素：

```
click: function(event){     
  // will be called when when an instance's     
  // rendered element is clicked
  console.log("element clicked: " + this.get('elementId') );
  return false; // return true if you want the click event to bubble up to parent view (default it true)
} 
```

我认为更好的方法是`{{action}}`在您的模板中使用。以[这个答案](https://stackoverflow.com/a/9381052/527559)为例。

# sql - 使用本地 XSD 更新 SQL 数据库定义

> ID：13788302
> 
> 赞同：0
> 
> 时间：2012-12-09T14:28:03.840
> 
> 标签：sql, vb.net, sql-server-2005, xsd

我正在尝试`XSD`从 SQL 服务器实例中检索表及其数据类型、键约束的定义，并将其与本地副本进行比较，以自动生成 SQL 命令来更新服务器，以便`XSD`我的程序与服务器匹配。

我已经查看了架构和系统表，但我觉得架构表不是我应该查看的地方，因为它们似乎是数据库集合的配置。我在哪里可以找到`XSD`我搜索的这个 .Net？

这里有一些地方对我研究这个问题有帮助。我已经发布了一长串可能对其他人有所帮助的网站和小笔记。 [http://twentysixseconds.blogspot.com/2012/12/research-on-retrieving-xsd-from-sql.html](http://twentysixseconds.blogspot.com/2012/12/research-on-retrieving-xsd-from-sql.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T14:35:02.723

也许 SQLMetal 可以帮助你。

[http://msdn.microsoft.com/en-us/library/bb386987.aspx](http://msdn.microsoft.com/en-us/library/bb386987.aspx)

特别是 /map 输出，这将生成数据库模式的 XML 文件。

希望这可以帮助

# c - 如何返回定义参数

> ID：13788304
> 
> 赞同：2
> 
> 时间：2012-12-09T14:28:10.937
> 
> 标签：c, c-preprocessor

我有这个定义

```
#define LED_CLOCK_PIN (DDRD, PORTD, PD6) 
```

我想再写两个定义，以便获取`PORTD`和`PD6`值，像这样

```
#define GET_PORT(_PORT_) /*some magic goes here*/
#define GET_PIN(_PIN_) /*some magic goes here*/

uint8_t port = GET_PORT(LED_CLOCK_PIN);
uint8_t pin = GET_PIN(LED_CLOCK_PIN); 
```

可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T14:44:40.560

你的意思是这样的：

```
#define LED_CLOCK_PIN (DDRD, PORTD, PD6)

#define SND(A, B, C) B
#define GET_PORT(X) SND X

uint8_t port = GET_PORT(LED_CLOCK_PIN); 
```

`gcc -E`将其处理为`uint8_t port = PORTD;`. ~~我不确定这是否完全可移植并由标准保证。~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T14:48:31.100

如果您被允许更改，您首先定义为：

```
#define LED_CLOCK_PIN  DDRD, PORTD, PD6 
```

然后使用 C99 你可以做（​​未经测试）：

```
#define GET_PORT(x)  (((int[]){x})[1]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T14:54:47.017

您是否有理由要参数化端口而不是直接按名称访问它？也就是说，而不是

```
#define GET_PORT 
```

有类似的东西会更有意义吗

```
#define GET_PORT_D (port.D)
#define LED_CLOCK_PIN 0x10 //Bit 5 of the port.D register, for example
#define GET_LED_CLOCK_PIN ( (port.D & LED_CLOCK_PIN) >> 4) 
```

这样，您对端口所做的事情就不会产生歧义，因此它提高了可读性。其次，您更改`LED_CLOCK_PIN`实际含义的可能性（因为它访问硬件）可能非常低，所以为什么不让代码明确。

# r - as.dendrogram 中的错误

> ID：13788306
> 
> 赞同：3
> 
> 时间：2012-12-09T14:28:17.290
> 
> 标签：r, dendrogram, hclust

我正在尝试使用大数据制作树状图

我正在使用**stats**，**phyclust**库，

```
distances <- phyclust.edist(Data[,],edist.model = .edist.model[3]) 
dataHClust <- hclust(distances, "ave")
dhc <- as.dendrogram(dataHClust) 
```

`hclust`工作正常，我可以绘制它并正确绘制它。在我使用该`as.dendrogram`功能后，它不会给我一个错误。但是当我要么：

*   尝试绘制它
*   用于`dendrapply`应用功能。

它说：

```
Error in lapply(args, is.character) : node stack overflow 
Error in dev.flush() : node stack overflow 
```

as.dendrogram 的问题是无法处理大型数据集（~30000）吗？如果是这样，是否有替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T05:08:26.927

我认为绘制大型数据集是个问题，因为我能够让您的代码在小型数据集上运行。

您可以尝试切割树状图以使其适合带有`h`or`height`参数的绘图`as.dendrogram`。

# c# - 在 Fluent NHibernate 中自动截断字符串

> ID：13788308
> 
> 赞同：1
> 
> 时间：2012-12-09T14:28:27.040
> 
> 标签：c#, .net, sql-server, nhibernate, fluent-nhibernate

首先，我读[了这篇文章](https://stackoverflow.com/questions/831452/automatically-truncating-strings-in-nhibernate-sql-server)，[这篇](https://stackoverflow.com/questions/1981955/fluent-nhibernate-truncate-string-automatically)文章和[这篇](https://stackoverflow.com/questions/5322838/nhibernate-validator-using-attributes-vs-using-validationdefs)文章，但我仍然有一个问题。所以我需要一个具体的 C# 解决方案来解决使用以下任何解决方案截断的问题： IUserType、拦截或[ValidationDef](http://fabiomaulo.blogspot.com/2009/10/nhibernatevalidator-extending_26.html)。我想声明这样的字段：

```
public class MyEntity {
    [Truncate(length=255)]
    public virtual string Comments { get; set; }
} 
```

我需要在更新/保存 NHibernate 操作之前自动截断字符串行。在这种情况下，我不会得到一个例外 System.Data.SqlClient.SqlErrorCollection

> 字符串或二进制数据将被截断

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T01:27:35.927

老实说，最简单、最易读的解决方案是让类来处理它。像这样的东西：

```
public class MyEntity {
  private string comments;
  public virtual string Comments { 
    get {return comments;}  
    set {comments = str.Substring(0, Math.Min(value.Length, 255))}; 
   }
} 
```

但我认为这不是你要问的。除此之外，您可以使用具有多种方法（如 OnSave）的 IInterceptor 执行某些操作。您需要为该方法编写类似的内容（注意这是伪代码，因为它有很多东西！）：

```
 public boolean OnSave(object entity,
                          object id,
                          object[] state,
                          string[] propertyNames,
                          IType[] types)
    {

            for ( int i=0; i<propertyNames.Length; i++ )
            {
                if ( objectHasAttributeOnproperty(propertyNames[i], Truncate))
                {
                    trucate(entity, propertyNames[i])
                    return true;
                }
            }

        return true;
    } 
```

然后使用休眠会话注册拦截器。保存的每个实体都将通过它并检查需要截断的字符串。

这是NHibernate中拦截器的文档： [http ://www.nhforge.org/doc/nh/en/index.html#manipulatingdata-interceptors](http://www.nhforge.org/doc/nh/en/index.html#manipulatingdata-interceptors)

检查 Stack Overflow 以获取属性值并通过反射调用属性设置器。

# javascript - Express 和 ejs <%= 渲染 JSON

> ID：13788314
> 
> 赞同：83
> 
> 时间：2012-12-09T14:29:16.913
> 
> 标签：javascript, json, express, ejs

在我的 index.ejs 我有这个代码：

```
var current_user = <%= user %> 
```

在我的节点中，我有

```
app.get("/", function(req, res){
    res.locals.user = req.user
    res.render("index")
}) 
```

但是，在我获得的页面上

```
var current_user = [object Object] 
```

如果我写

```
var current_user = <%= JSON.stringify(user) %> 
```

我得到：

```
var current_user = {&quot;__v&quot;:0,&quot;_id&quot;:&quot;50bc01938f164ee80b000001&quot;,&quot;agents&quot;:... 
```

有没有办法传递一个**JS 可读**的 JSON ？

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2012-12-09T14:32:18.770

哦，这很简单，不要使用`<%=`，`<%-`而是使用。例如：

```
 <%- JSON.stringify(user) %> 
```

第一个将以 HTML 呈现，第二个将呈现变量（因为它们是 eval）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-21T09:30:42.023

注意力！

如果用户可以通过 API 调用创建，<%- 会给你留下严重的 XSS 漏洞。可以在这里找到可能的解决方案：

[在 ExpressJS 中将变量传递给 JavaScript](https://stackoverflow.com/questions/16098397/pass-variables-to-javascript-in-expressjs/16098699#16098699)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-24T01:38:47.740

如果像我一样，您的对象可以包含转义字符，例如`/`或者`"`然后使用这个更强大的解决方案

```
var current_user = <%- JSON.stringify(user).replace(/\\/g, '\\\\') %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-05T16:08:46.763

这现在可以在 Express 的最新版本中使用

# haskell - 为什么 Parsec 不考虑我的 <|> 替代方案的右侧？

> ID：13788319
> 
> 赞同：7
> 
> 时间：2012-12-09T14:29:56.697
> 
> 标签：haskell, lexical-analysis, parsec

我正在尝试解析 C++ 代码。因此，我需要一个上下文相关的词法分析器。在 C++ 中，`>>`是一个或两个标记（`>>`或`>` `>`），具体取决于上下文。更复杂的是，还有一个令牌`>>=`，无论上下文如何，它总是相同的。

```
punctuation :: Bool -> Parser Token
punctuation expectDoubleGT = do
    c <- oneOf "{}[]#()<>%;:.+-*/^&|~!=,"
    case c of
        '>' ->
            (char '=' >> return TokGTEq) <|>
            if expectDoubleGT
                then (string ">=" >> return TokRShiftEq) <|> return TokGT
                else (char '>' >> ((char '=' >> return TokRShiftEq) <|> return TokRShift)) <|> return TokGT 
```

`expectDoubleGT`什么时候`False`，这个函数工作正常。但是，当`expectDoubleGT`是`True`（上面的倒数第二行）时，当输入为 时会出错`>>`。

```
*Parse> parseTest (punctuation True) ">"
TokGT
*Parse> parseTest (punctuation True) ">>="
TokRShiftEq
*Parse> parseTest (punctuation True) ">>"
parse error at (line 1, column 2):
unexpected end of input
expecting ">=" 
```

当输入为 时，为什么表达式`(string ">=" >> return TokRShiftEq) <|> return TokGT`会引发错误而不是返回？（第一个已经用完了）`TokGT``>``>`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-09T14:34:04.490

Parsec 只尝试第二个解析器

```
p1 <|> p2 
```

如果`p1`在不消耗任何输入的情况下失败。在输入`">>"`上，在第一个`'>'`被消耗之后，

```
string ">=" 
```

使用 left over 后失败`'>'`，因此不使用第二个解析器。

你需要一个`try`

```
try (string ">=" >> return TokRShiftEq) 
```

在那里，如果`string ">="`失败，则不消耗任何输入并使用替代解析器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-04T20:47:11.837

使用`libclang`. 它可以解析所有的 C++。不管你怎么努力，你都做不到。

# qt - 沿 QTreeView 和 QTreeWidgetItem 使用 QFileSystemModel

> ID：13788323
> 
> 赞同：0
> 
> 时间：2012-12-09T14:30:10.280
> 
> 标签：qt, structure, qtreewidget, qfilesystemmodel, qtreewidgetitem

我有一个“项目结构”，就像这样。

```
-Project Main File
--Project Subfile 1
--Project Subfile 2
--Project Subfolder 1
---Project Subfolder 2
----Project Subfile 3 
```

我正在使用 QFileSystemModel 来获取指定路径上的文件。然后在识别出什么是文件夹和什么是文件后，我想将它们显示在具有上方结构的视图上。我所使用的是使用 QTreeWidgetItem 的 QTreeView。

这可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:35:05.393

`QFileSystemModel`是一个树模型。`QTreeWidget`是一个树*小部件*，它只接受***单个项目中的***数据。

您正在寻找的是`QTreeView`小部件，它接受 a`QAbstractItemModel`作为其数据结构。使用 的`setModel()`功能`QTreeView`并将其传递给您的`QFileSystemModel`.

有关详细信息，请参阅[目录视图示例](http://doc.qt.digia.com/qt/itemviews-dirview.html)。（忽略它说它使用的事实`QDirModel`，如果你有最新的 Qt SDK，它确实使用`QFileSystemModel`）。

# javascript - ruby on rails 咖啡脚本输入表单

> ID：13788324
> 
> 赞同：1
> 
> 时间：2012-12-09T14:30:10.513
> 
> 标签：javascript, jquery, ruby-on-rails, twitter-bootstrap, coffeescript

我在 rails 应用程序中使用 fullcalender。我有以下咖啡脚本代码：

```
select: (start, end, allDay) ->
  title = prompt("Event Title:", "")
  hours = prompt("Hours", "")
  if title
  ... 
```

我想要一个包含两个数据字段的小弹出窗口，而不是使用 2 个提示代码行。我应该如何完成它？我应该使用引导模式吗？

谢谢

好的 --- 我创建了这个模式，它显示得很好：

```
 <div id="calModal" class="modal hide fade" tabindex="-1" role="dialog" aria-   labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Create Labor</h3>
  </div>
  <div class="modal-body">
    <form class="form-inline" method="get">
      <input type="text" id="title" class="input" placeholder="Title" name="title">
      <input type="floating" id="hours" class="input" placeholder="Hours" name="hours">
    </form>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div>` 
```

但是，title 和 hours 的值在我的其余咖啡脚本代码中不可用：

```
 select: (start, end, allDay) ->
      $('#calModal').modal('show')
      title = $(".modal-body #title").val
      hours = $(".modal-body #hours").val
      if title
        $.create "/events/",
          event:
            title: title,
            starts_at: "" + start,
            ends_at: "" + end,
            all_day: allDay,
            workorder_id: 1,
            # need a modal for inputing these fields
            hours: hours,
            employee_id: 1
            # pickup the current employee
        $('#calendar').fullCalendar('refetchEvents')` 
```

这些语句不起作用：

```
 title = $(".modal-body #title").val
   hours = $(".modal-body #hours").val 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:41:01.623

您的代码存在一些错误，但重要的是您需要将事件处理程序绑定到 Save Changes 按钮。您的代码期望 #title 和其他字段的值在显示模态后立即出现，当然它不会出现。Save Changes 按钮上的事件处理程序应该 1) 关闭模式 2) 检查表单字段的值。

我必须向 Save Changes 按钮添加一个 id 以轻松引用它：

```
 <button id="savebtn" class="btn btn-primary">Save changes</button> 
```

并且还发现当您需要调用 jQuery.val() 时您正在使用 jQuery.val - 即调用该方法而不仅仅是引用它

以下 Coffeescript 将在页面加载时打开模式，然后在单击 Save Changes 时关闭模式并将表单字段值记录到 Javascript 控制台（我使用的是 coffeescript 1.3.1，因为我碰巧有这个）

```
$ ->
    $('#savebtn').bind 'click', (event) =>
        $("#calModal").modal('hide')
        title = $(".modal-body #title").val()
        hours = $(".modal-body #hours").val()
        console.log title
        console.log hours
        return

    $('#calModal').modal('show') 
```

通过上述代码段的运行，您应该能够使其余代码正常工作。

# c# - asp.net MVC 4控制器中的多个参数

> ID：13788330
> 
> 赞同：0
> 
> 时间：2012-12-09T14:31:26.453
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing, asp.net-mvc-controller

我在我的项目中使用 VS2010 和 ASP.NET MVC 4。我需要一个应该获得 2 个参数的控制器。

这是我的控制器方法：

```
[AcceptVerbs(HttpVerbs.Get)]
public ActionResult AcceptBid(int? Id, int? Accept)
{
    if (Id != null && Accept != null)
    {
          //my code...
    }
} 
```

我创建了这样的操作链接：

```
@Html.ActionLink("Accept", "AccpetBid", "Project", new { area = "Service", Id = item.ProjectId, Accept = item.Id }, null) 
```

当我单击此链接时，控制器无法正常工作并引发此错误：

> “/”应用程序中的服务器错误。
> 
> 无法找到该资源。
> 
> 说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

请注意，此控制器类中的其他控制器方法正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:34:20.330

操作名称为“AcceptBid”，但您的链接正在尝试访问“AccpetBid”。

# objective-c - 检查 NSString 的正确格式

> ID：13788332
> 
> 赞同：0
> 
> 时间：2012-12-09T14:31:44.917
> 
> 标签：objective-c, regex, macos, nsstring, nsregularexpression

我的代码中有这个方法：

```
- (void) fullDMXReceived:(NSString*)finalData { 
```

当输入完整的一行`<DMX>255,255,255,255,255</DMX>`并且该行存储在“finalData”中时调用它。

在将“finalData”发送到解析器之前，我需要一些代码来确定其格式是否正确：

```
NSArray* allIncomingParseDMX1 = [finalData componentsSeparatedByString:@"<DMX>"];
NSString *parseDMXString1 = [allIncomingParseDMX1 objectAtIndex:1];

NSArray* allIncomingParseDMX2 = [parseDMXString1 componentsSeparatedByString:@"</DMX>"];
NSString *parseDMXString2 = [allIncomingParseDMX2 objectAtIndex:0];

NSArray* allIncoming = [parseDMXString2 componentsSeparatedByString:@","];

[redSlider setStringValue:[allIncoming objectAtIndex:0]];
[greenSlider setStringValue:[allIncoming objectAtIndex:1]];
[blueSlider setStringValue:[allIncoming objectAtIndex:2]];
[strobeSlider setStringValue:[allIncoming objectAtIndex:3]];
[strobeRandomSlider setStringValue:[allIncoming objectAtIndex:4]];
[self controlChange]; 
```

有时，finalData 错误地以其他方式出现，而不是`<DMX>255,255,255,255,255</DMX>`应用程序崩溃时。当 finalData 不是`<DMX>255,255,255,255,255</DMX>`我只想让它完全忽略它并等待一个好的。

我正在考虑使用符合此条件的 if 语句：

1.  字符串仅包含 ONE`<DMX>`且仅包含 ONE `</DMX>`。
2.  字符串正好包含 4 个“，”
3.  字符串包含至少 5 个数字 - 在本例中`<DMX>0,0,0,0,0</DMX>`，并且不超过 15 个数字 - 在本例`<DMX>255,255,255,255,255</DMX>`中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:59:24.083

在这种情况下，我通常有一些专门用于执行有效性检查的方法。

您可以在此方法中添加尽可能多的检查，并在需要时添加新检查。

遍历您的 finalData，测试每一行的有效性，并且仅在其有效时提取滑块值。

在你的情况下，一个简单的第一次检查是

```
- (BOOL) validityCheck:(NSString *) testString
{
    if (!testString)
    {
        // Received nil as a parameter, so just bail here.

        return NO;
    }

    BOOL valid = YES;

    // Look for reasons string may be invalid...

    // Check for expected prefix / suffix...

    if (![testString hasPrefix:@"<DMX>"] || ![testString hasSuffix:@"</DMX>"])
    {
        valid = NO;
    }

    // Check number of elements is in valid range...

    int numOfElements = [testString count];

    if (numOfElements >= 5 && numOfElements <= 15)
    {
        valid = NO;
    }

    // Add more tests for validity...

    // And eventually, return the result...

    return valid;
} 
```

您应该在代码中通常添加其中一些技术，因为除了想要检测格式错误的输入之外，您不希望代码在这些情况下崩溃。例如，不要假设当您使用 coponentsSeparatedBy... 提取数组时，它会返回预期数量的元素 - 先检查，然后优雅地处理错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T15:12:57.140

您应该查看[NSRegularExpression](http://developer.apple.com/documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)。并用于`Regular Expression`匹配您的字符串。

```
//Generate the RegularExpression: <DMX>((?:(?:25[0-5]|2[0-4]\d|[01]?\d?\d)\,){4}(?:25[0-5]|2[0-4]\d|[01]?\d?\d))</DMX>
NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"<DMX>((?:(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d)\\,){4}(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d))</DMX>"
                                                                       options:NSRegularExpressionCaseInsensitive
                                                                         error:&error];
//Our test strings
NSString *stringMatch = @"<DMX>255,255,255,255,255</DMX>";
NSString *stringNotMatch = @"<DMX>255,255,255,255,299</DMX>";
NSString *stringNotMatch2 = @"<DMX>0,0,0,0</DMX>";

//Get numberOfMatchesInString
NSUInteger resultA = [regex numberOfMatchesInString:stringMatch
                                            options:0
                                              range:NSMakeRange(0, [stringMatch length])];

NSUInteger resultB = [regex numberOfMatchesInString:stringNotMatch
                                            options:0
                                              range:NSMakeRange(0, [stringNotMatch length])];

NSUInteger resultC = [regex numberOfMatchesInString:stringNotMatch2
                                            options:0
                                              range:NSMakeRange(0, [stringNotMatch2 length])];

//resultA should be 1\. resultB should be 0\. resultC should be 0.
NSLog(@"ResultA:%d",resultA);
NSLog(@"ResultB:%d",resultB);
NSLog(@"ResultC:%d",resultC); 
```

# python - Python ArgumentParser 嵌套参数

> ID：13788333
> 
> 赞同：4
> 
> 时间：2012-12-09T14:31:47.053
> 
> 标签：python, argparse

我想创建具有以下签名的参数解析器：

`./myapp [-a [-b BVAL] | -c]`

换句话说，用户`-b BVAL`只有在他提供了参数的情况下才能提供参数`-a`。

`-a`创建and的互斥组很容易`-c`，但我不知道如何创建关系`allow -b only if -a provided`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T03:15:29.650

您可以从 ArgumentParser 继承以添加一些自定义功能。在这里，我提出了一个例外，但您可以修改它以实现您想要的任何内容。只需更改`on_dependency_error()`方法以满足您的需求。

```
from argparse import ArgumentParser

class FancyParser(ArgumentParser):
    # {'b': 'a'} Where b depends on a
    dependencies = {}

    def on_dependency_error(self, arg, depends_on):
        raise FancyParser.DependencyError(
                    'Argument %s depends on %s' % (arg, depends_on))

    def add_argument(self, *args, **kwargs):
        depends_on = kwargs.get('depends_on')
        if depends_on:
            self.dependencies[kwargs.get('dest') or args[0]] = depends_on
            del kwargs['depends_on']
        return super(FancyParser, self).add_argument(*args, **kwargs)

    def parse_args(self, *args, **kwargs):
        args = super(FancyParser, self).parse_args(*args, **kwargs)
        for arg, depends_on in self.dependencies.iteritems():
            if getattr(args, arg) and not getattr(args, depends_on):
                self.on_dependency_error(arg, depends_on)
        return args

    class DependencyError(Exception):
        def __init__(self, *args, **kwargs):
            return super(FancyParser.DependencyError,
                         self).__init__(*args, **kwargs) 
```

然后你可以像这样使用它 -

```
args = ['-a', '-b', 'BVAL', '-c']
parser = FancyParser()
parser.add_argument('-a', dest='a', action='store_true')
parser.add_argument('-b', dest='b', depends_on='a')
parser.add_argument('-c', dest='c', action='store_true')
try:
    parser.parse_args(args)
except FancyParser.DependencyError as e:
    # Whatever here...
    pass 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-08T14:38:53.340

[Docopt](https://github.com/docopt/docopt)完全按照我的意愿去做。了不起！

```
docopt('./myapp [-a [-b BVAL] | -c]') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T10:06:44.853

如果您不想使用子解析器，您可以使用 parser.error 自己处理您的参数值。

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument('-a', dest='a', default='')  # you can use other defaults surely
parser.add_argument('-b', dest='b', default='')
parser.add_argument('-c', dest='c', default='')

args = parser.parse_args()

if args.b and not args.a:
    parser.error("Option 'b' can't be specified without 'a'") 
```

但仍然考虑使用子解析器，以防您可能扩展逻辑

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-09T16:23:55.137

这不完全是您正在寻找的东西，但也许您可以使用`add_subparsers()`（[doc](http://docs.python.org/2/library/argparse.html#sub-commands)）？

执行以下操作：

```
import argparse
parser = argparse.ArgumentParser()
subparsers = parser.add_subparsers(help='sub-command help')
a = subparsers.add_parser('a')
c = subparsers.add_parser('c')
a.add_argument('b') 
```

# pdf - LibreOffice：使用 --convert-to 将 PDF 转换为纯文本

> ID：13788338
> 
> 赞同：3
> 
> 时间：2012-12-09T14:32:28.770
> 
> 标签：pdf, libreoffice

我正在尝试使用以下命令将 pdf 文件转换为纯文本文件

```
soffice --headless --convert-to txt xyz.pdf --outdir ~/ 
```

但是转换后的文件不包含文本，而是一堆无法识别的字符。以下是它创建的一些文本

```
 PK^C^D^T^@^@^H^@^@Ås<89>A<85>l9<8a>.^@^@^@.^@^@^@^H^@^@^@mimetypeapplication/vnd.oasis.opendocument.spreadsheetPK^C^D^T^@^@^H^@^@Ås<89>A4éæSq^B^@^@q^B^@^@^H^@^@^@meta.xml<?xml version="1.0" encoding="UTF-8"?>
<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:ooo="http://openoffice.org/2004/office" xmlns:grddl="http://www.w3.org/2003/g/data-view#" office:version="1.2"><office:meta><meta:document-statistic meta:table-count="1" meta:cell-count="2103" meta:object-count="0"/><meta:generator>LibreOffice/3.6$Linux_x86 LibreOffice_project/360m1$Build-102</meta:generator></office:meta></office:document-meta>PK^C^D^T^@^H^H^H^@Ås<89>A^@^@^@^@^@^@^@^@^@^@^@^@^L^@^@^@settings.xmlµWÛRâ@^P}ß¯ æ]^C¨,¤^@^K±\ÝeÕ"è^Þ&IC¦<9c>L§æBd¿~'^D,^WC­Fç»...2<97>s:§»ÏLú§<8f>)o,A*<86>b@Z<87>MÒ^@^QaÌÄb@îf^W^G]r:üÔÇù<9c>EàÇ^X<99>^T<84>>P µ]¢^Zv»P~9= F
^_©bÊ^W4^EåëÈÇ^LÄv<9b>ÿ|µ¿&+G^^9^S^O^C<92>h<9d>ù<9e><97>çùa~t<88>ráµz½<9e>·<9e>Ý.<8d>PÌÙâµTåêçT<88>øDTl(<83>Y<93>µ<9b>Íc¯|&<8d>M<90>Ï¤i<93>áV<87>íë^Oû^[<82>òç<80>iH^Km^Z<9b>á"´^A±<94>þ<92>Aþ¤^Z©Ú÷ï<9e>{¦XÈa$<81>Î0#ÛI½Êì$^S<9a>^L<9b>}ï%È<9b><80>'0×n<90>^?°X'UÐíæq·Û{7þ%°ER^Y{·Ó9i<9d>T^ST^L^V)y}^RË^A#©¶%ñ<96>lN<90>ÆS 1 
```

如果我尝试将 PDF 文件转换为 HTML 或 DOC，情况也是如此

我做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-04T14:57:50.917

尝试将“文本”放在“txt”之后。例如：

```
libreoffice --invisible --convert-to txt:Text filename.doc 
```

假设“libreoffice”和“soffice”足够相同

# c# - 在单独的类中放置方法以检索与类相关的数据

> ID：13788339
> 
> 赞同：1
> 
> 时间：2012-12-09T14:32:28.880
> 
> 标签：c#, java, oop, coding-style

考虑以下简化的类：

```
class Book {
   string title;
   Author author;
} 
```

很简单。但是，当添加类似的方法时`getBookFromDatabase(int bookId)`，应该将其作为`static` **方法放在同一个**类中，**还是**放在**单独****的**（即）`BookManager`类中？

 **使用示例：

```
Book b = Book.getBookFromDatabase(42); 
```

对比

```
Book b = BookManager.getBookFromDatabase(42); 
```

我确实意识到这在某种程度上是一个品味问题，但是遵循 OOP 指南的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T14:45:27.080

我更喜欢使用 a`Repository`来为后备存储中的对象补充水分。以下内容可能是一个很好的起点。

```
public interface IBookRepository{
    Book Load(int id);
    void Save(Book book);
} 
```

这样，您可以拥有多个不同的存储库实现，而不必依赖于使用数据库。例如，您可能有一个`InMemoryBookRepository`可用于测试和一个`DatabaseBookRepository`用于类似生产环境的环境。

从风格上讲，我也会避免使用静态方法，例如：

```
BookManager.getBookFromDatabase(42); 
```

它更难测试，并且生成的代码更紧密地耦合在一起，这将使测试和更改变得更加困难。

您可以查看这个[StackOverflow 问题](https://stackoverflow.com/questions/3175/repository-pattern-tutorial-in-c-sharp)，了解在哪里可以了解有关实现存储库的更多信息。 [Microsoft](http://msdn.microsoft.com/en-us/library/ff649690.aspx)和[Martin Fowler](http://martinfowler.com/eaaCatalog/repository.html)也更详细地描述了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T14:35:24.003

就个人而言，我喜欢 " `Manager`" 类的方法。它分离了逻辑，因此 a`Book`不必知道如何获取自身。此外，`BookManager`这里可以是单例 - 直到实际需要获取`Book`.

此外，`BookManager`可以执行额外的簿记任务*（没有双关语）*，例如缓存，或者可能有一些`Book`事件需要在全局级别订阅。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T15:53:09.323

我假设您的 Book 类是域/业务类，因此将从数据库中检索数据的责任放在类本身上，您正在创建数据库和业务层之间的高度耦合，这违反了良好的原则设计。

我会推荐你​​阅读[http://en.wikipedia.org/wiki/GRASP_(object-oriented_design](http://en.wikipedia.org/wiki/GRASP_(object-oriented_design) )

如果你愿意的话，得到一份

应用 UML 和模式：面向对象分析、设计和迭代开发简介 - Craig Larman 着 ISBN13：978-0131489066

这本书是最受欢迎的软件开发书籍之一，强烈推荐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T14:41:22.877

我相信使用单独的类会更好。这可能是 BookManager，但也许有更适合图书馆或书店之类的工作的东西。该对象应包含对数组或 ArrayList 中书籍的引用（我建议使用 ArrayList），如下所示：

```
public class BookManager {
    ArrayList<Book> books = new ArrayList<Book>();

    public Book getBook(int index) {
        return books.get(index);
    }

    public void addBook(Book book) {
        books.add(book);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T14:42:29.727

这取决于。

如果您的所有`Book`类的行为都是存储从数据库中检索的字段，那么您可能更简单地添加从数据库获取数据的行为，即`getBookFromDatabase(int bookId)`在同一个类上，因为所有类都会关注从数据库中检索一本书并将其连贯地呈现给程序的其余部分。

但是，如果您打算让您的类具有其他行为，也许是特定于您的应用程序的某些 Book 业务逻辑，那么将*业务逻辑与**持久性逻辑*分开`Book`可能更有意义。

 **这里的指导性启发式应该是[单一责任原则，关于它](http://en.wikipedia.org/wiki/Single_responsibility_principle)[的 stackoverflow](https://stackoverflow.com/search?q=single+responsibility+principle)还有很多其他问题。

还要记住，在单独但相关的注释中，[静态方法是可测试性的死亡](http://misko.hevery.com/2008/12/15/static-methods-are-death-to-testability/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-09T14:43:54.953

您的两种方法都使用本质上非 OOP 的静态方法。最好的解决方案是拥有一个`BookDatabase`对象，并且该对象应授予对其包含的书籍的非静态访问权限。

这将解决静态方法带来的问题。例如，如果您将来有两个或更多 BookDatabases 怎么办？使用静态方法，这会变得混乱。使用数据库对象，您只需拥有更多此类（或子类）的实例来处理不同的数据库。****

# php - fpdf 文档仅打印 1 页

> ID：13788342
> 
> 赞同：1
> 
> 时间：2012-12-09T14:32:53.670
> 
> 标签：php, fpdf

我是 fpdf 的新手，无法弄清楚我在以下代码中做错了什么。

我需要每页打印两条记录。

第一页生成正常，但没有生成其他页面。

可能是我的循环中有错误...请帮助

当我给出 $pic[$i] 之类的变量时，alo 图片不会被打印，但是当我输入绝对路径（图片/1.jpg）时，它们会被打印。虽然图片正在使用 $pic[$i] 打印在其他文档中。

```
<?php
    session_start();
if(isset($_SESSION['user']))
{
    $cr = $_POST['cour'];
    $s = $_POST['sem'];
    $title = $cr." ".$s." ".'2012-13';
    require('fpdf.php');
    include('../includes/connection.php');
    $sql = "SELECT * FROM `student` WHERE AppliedCourse ='$cr'";
    $rs = mysql_query($sql) or die($sql. "<br/>".mysql_error());
    if(0 == mysql_num_rows($rs))
    {
        $_SESSION['db_error'] = "<h2><font color = 'RED'>No such course found! Pease select again.</font></h2>";
        header('Location: printAC.php');
    }
    else {

    while($row = mysql_fetch_array($rs))
     {
            $formno[] = $row ['FormNo']; 
            $rno[] = $row ['rollno'];
            $snm[] = $row ['StudentNm'];          
            $fnm[] = $row ['FathersNm'];
            $mnm[] = $row ['MothersNm'];
            $addr[] = $row['Address'];
            $pic[] = $row['imagenm'];
            $comm[] = $row['SocialCat'];
     }
     $pdf = new FPDF('P','pt','A4');
     $pdf->SetFont('Times','B',16);
     $pdf->SetMargins(44.737,90.20,44.737);
     $pdf->SetAutoPageBreak('true',95);
     $i = 0;
     while($i < count($row))
     {

        $j = $i + 1;

            $pdf->AddPage();

             // Block 1

            $pdf->SetFont('Times','B',16);
            $pdf->SetXY(186.70,50.20);
            $pdf->Cell(204.16,30,$title,0,0,'C');

            // Block 1

            $pdf->Image('pictures/1.jpg',475.34,30.20,64.5,79);
            $pdf->Cell(165,260,' ',0,1,'');

            // Block 1

            $pdf->SetXY(55,80);
            $pdf->SetFont('Helvetica','',14);
            $pdf->Cell(60,20,'Roll No. : ',0,0,'L');
            $pdf->Cell(60,20,$rno[$i],0,0,'L');
            $pdf->Cell(70,20,'Form No. : ',0,0,'L');
            $pdf->Cell(60,20,$formno[$i],0,0,'L');
            $pdf->Cell(80,20,'Community : ',0,0,'L');
            $pdf->Cell(60,20,$comm[$i],0,1,'L');

            // Block 1  

            $pdf->SetXY(55,95);
            $pdf->Cell(55,20,'Name :',0,0,'L');
            $pdf->Cell(412,20,$snm[$i],0,1,'L');

            // Block 1

            $pdf->SetXY(55,115);
            $pdf->Cell(170,12,"Father's/Husband's Name :",0,0,'L');
            $pdf->Cell(323,12,$fnm[$i],0,1,'L');

            // Block 1

            $pdf->SetXY(55,130);
            $pdf->Cell(105,12,"Mother's Name :",0,0,'L');
            $pdf->Cell(372,12,$mnm[$i],0,1,'L');

            // Block 1

            $pdf->SetXY(55,145);
            $pdf->Cell(60,12,"Address :",0,0,'L');
            $pdf->Cell(165,60,$addr[$i],0,0,'');

            //****************************************//

            // Block 2

            $pdf->SetFont('Times','B',16);
            $pdf->SetXY(186.70,450.20);
            $pdf->Cell(204.16,30,$title,0,0,'C');

            // Block 2

            $pdf->Image('pictures/2.jpg',475.34,430.20,64.5,79);
            $pdf->Cell(165,260,' ',0,1,'');

            // Block 2

            $pdf->SetXY(55,480);
            $pdf->SetFont('Helvetica','',14);
            $pdf->Cell(60,20,'Roll No. : ',0,0,'L');
            $pdf->Cell(60,20,$rno[$j],0,0,'L');
            $pdf->Cell(70,20,'Form No. : ',0,0,'L');
            $pdf->Cell(60,20,$formno[$j],0,0,'L');
            $pdf->Cell(80,20,'Community : ',0,0,'L');
            $pdf->Cell(60,20,$comm[$j],0,1,'L');

            // Block 2  

            $pdf->SetXY(55,493);
            $pdf->Cell(55,20,'Name :',0,0,'L');
            $pdf->Cell(412,20,$snm[$j],0,1,'L');

            // Block 2

            $pdf->SetXY(55,510);
            $pdf->Cell(170,12,"Father's/Husband's Name :",0,0,'L');
            $pdf->Cell(323,12,$fnm[$j],0,1,'L');

            // Block 2

            $pdf->SetXY(55,525);
            $pdf->Cell(105,12,"Mother's Name :",0,0,'L');
            $pdf->Cell(372,12,$mnm[$j],0,1,'L');

            // Block 2

            $pdf->SetXY(55,540);
            $pdf->Cell(60,12,"Address :",0,0,'L');
            $pdf->Cell(165,60,$addr[$j],0,0,'');

            $i++;

        }

             $pdf->Output();
    }
    mysql_close($con);
}
?> 
```

# java - 来自导入 jar 的 logback.xml 会导致警告

> ID：13788346
> 
> 赞同：2
> 
> 时间：2012-12-09T14:33:12.323
> 
> 标签：java, neo4j, logback

我在我的应用程序中使用 Neo4j 服务器，使用 REST 服务器启动嵌入式图形数据库。现在，neo4j-server 工件包含`logback.xml`在其中。我也在使用 logback 进行日志记录 => 我得到了

```
16:17:13,233 |-WARN in - Resource [logback.xml] occurs multiple times on the classpath.
16:17:13,233 |-WARN in - Resource [logback.xml] occurs at [file:/D:/dev/graph-server/target/classes/logback.xml]
16:17:13,233 |-WARN in - Resource [logback.xml] occurs at [jar:file:/C:/Users/user123/.m2/repository/org/neo4j/app/neo4j-server/1.8/neo4j-server-1.8.jar!/logback.xml] 
```

`logback.xml`多次出现的警告。

我应该怎么办？我不想关闭 logback 状态日志记录，每次启动应用程序时看到这条消息有点令人不安。

谢谢。

亚历克斯

PS - 我的 logback.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <appender name="Console" class="ch.qos.logback.core.ConsoleAppender">
        <Target>System.out</Target>
        <encoder>
            <pattern>%d{dd/MM/yyyy HH:mm:ss } [%t] %-5p %logger{32} - %m%n</pattern>
        </encoder>
    </appender>
    <logger name="com.myapp" level="INFO"/>
    <root level="WARN">
        <appender-ref ref="Console"/>
    </root>
</configuration> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-16T15:36:49.063

只需将您的 logback.xml 重命名为 logback-test.xml，它就会选择您的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:53:08.610

解决这个问题在 Neo4j 的路线图上，但现在没有 ETA。作为一种解决方法，您可以解压缩 jar，删除`logback.xml`并重新打包它，然后`logback.xml`在类路径中提供自己。

# django - Django URLconf 包括：包导入不起作用

> ID：13788347
> 
> 赞同：1
> 
> 时间：2012-12-09T14:33:14.807
> 
> 标签：django, django-registration, urlconf

我正在制作一个简单的 django 站点，为此我使用了 django-registration 扩展。我可能应该补充一点，我刚刚将 django-registration 源复制到我的项目中，就好像它是我自己的应用程序一样 - 我正在和其他人一起做这个网站，我们的 django 环境配置不同，但我们通过共享网站的代码svn - 我不希望我们每个人都单独安装 django-registration。

在根 urls.py 文件中，我有：

```
import registration
...
urlpatterns = (
   ...
   url(r'^accounts/',include(registration.backends.default.urls),
) 
```

'backends' 和 'default' 是注册应用程序中的包。

在 Aptana 中，代码检查错误消息指出：“Undefined variable from import: backends” 在我的测试服务器的调试模式中，错误是“'module' object has no attribute 'backends'”

如果我这样做`from registration import backends`，`include(backends.default.urls)`则找不到“默认”。

当我这样做时它可以工作`from registration.backends import default`，`include(default.urls)`但我不想这样做，因为我无法快速看到它链接到什么......

为什么环境不能正确加载包？在同一个文件中，我使用其他 URLconf 包含包含包名称之类`include(django.contrib.admin)`的路径，并且这些路径没有问题。是不是因为我复制了注册源而不是安装应用程序？如果是这样，那么提供所需源代码可移植性的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:31:39.013

尝试将注册 url 的路径指定为字符串，而不是在 urls.py 中导入注册模块：

```
url(r'^accounts/',include('registration.backends.default.urls'), 
```

# php - PHP HTML preg_match_all

> ID：13788348
> 
> 赞同：1
> 
> 时间：2012-12-09T14:33:26.790
> 
> 标签：php, preg-match, preg-match-all

```
<div class="comment">
  <div class="pros">text1</div>
   <noindex>
    <div class="contras">text2</div>
   </noindex>
   <p>text3</p>
   <a few tags...>
</div>

 <div class="comment">
      <div class="pros">text1</div>
       <noindex>
        <div class="contras">text2</div>
       </noindex>
       <p>text3</p>
       <a few tags...>
    </div> 
```

如何获取块的内容？

文本 1 文本 2

文本3

```
preg_match_all ('/<div class=\"comment\"><div class=\"pros\">(.*?)<\/div><noindex><div class=\"contras\">(.*?)<\/div><\/noindex><p>(.*?)<\/p><\/div>/Uisu',$content,$found4); 
```

解析器不提供

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:29:44.333

您也可以使用 html-parser 库。

[http://htmlparser.sourceforge.net/samples.html](http://htmlparser.sourceforge.net/samples.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T15:06:32.530

```
<?php
 $html = new DOMDocument();
 @$html->loadHTML($source)
 $xpath = new DOMXPath( $html );
 $proslist = $xpath->query( "//*[contains(@class, 'pros')]" );
 foreach ($proslist as $list)
 {
    echo $list->nodeValue."\n";
 }
?> 
```

这将帮助您提取`text1`div 中指定的类`pros`.$source 代表您的 html。如上一条评论中所述，您必须查看使用 php 解析 html，我希望这个[使用 php 解析 html 的参考链接对](http://php.net/manual/en/class.domxpath.php)您有所帮助。

# python - 堆队列有什么用？

> ID：13788349
> 
> 赞同：10
> 
> 时间：2012-12-09T14:33:48.993
> 
> 标签：python

[阅读 Guido对使用 Python 在 2MB RAM 中排序一百万个 32 位整数](http://neopythonic.blogspot.fr/2008/10/sorting-million-32-bit-integers-in-2mb.html)的问题的臭名昭著的答案，我发现了模块[heapq](http://docs.python.org/2.7/library/heapq.html)。

我还发现我不了解杰克，也不知道我能用它做什么。

你能向我解释一下（众所周知的 6 岁目标）堆队列算法是做什么用的，你能用它做什么？

您能否提供一个**简单**的Python 片段，在其中使用它（与`heapq`模块一起）解决的问题将用它而不是其他东西更好地解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-09T15:17:44.340

`heapq`实现[二进制堆](https://en.wikipedia.org/wiki/Binary_heap)，这是一种部分排序的数据结构。特别是，它们具有三个有趣的操作：

*   `heapify`在 O( *n* ) 时间内将列表原地转换为堆；
*   `heappush`*在 O(lg n* ) 时间内向堆中添加一个元素；
*   `heappop`在 O(lg *n* ) 时间内从堆中检索*最小元素。*

 *许多有趣的算法依赖于堆来提高性能。最简单的可能是部分排序：获取列表的*k*个最小（或最大）元素，而不对整个列表进行排序。`heapq.nsmallest`( `nlargest`) 这样做。的[实现`nlargest`](http://hg.python.org/cpython/file/70ee0b76239d/Lib/heapq.py#l183)可以解释为：

```
def nlargest(n, l):
    # make a heap of the first n elements
    heap = l[:n]
    heapify(heap)

    # loop over the other len(l)-n elements of l
    for i in xrange(n, len(l)):
        # push the current element onto the heap, so its size becomes n+1
        heappush(heap, l[i])
        # pop the smallest element off, so that the heap will contain
        # the largest n elements of l seen so far
        heappop(heap)

    return sorted(heap, reverse=True) 
```

分析：设 N 为 中的元素个数`l`。`heapify`运行一次，成本为 O(n)；这可以忽略不计。然后，在一个运行 Nn = O(N) 次的循环中，我们以 O(lg n) 的成本执行 a`heappop`和 a `heappush`，总运行时间为 O(N lg n)。当 N >> n 时，与其他明显的算法 相比，这是一个巨大的胜利`sorted(l)[:n]`，后者需要 O(N lg N) 时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T15:09:57.307

例如：你有一组 1000 个浮点数。您想从集合中重复删除最小的项目并将其替换为 0 到 1 之间的随机数。最快的方法是使用 heapq 模块：

```
heap = [0.0] * 1000
# heapify(heap)   # usually you need this, but not if the list is initially sorted
while True:
    x = heappop(heap)
    heappush(head, random.random()) 
```

每次迭代所花费的时间是堆长度的对数（即大约 7 个单位，对于长度为 1000 的列表）。其他解决方案需要线性时间（即大约 1000 个单位，慢 140 倍，并且随着长度的增加变得越来越慢）：

```
lst = [0.0] * 1000
while True:
    x = min(lst)    # linear
    lst.remove(x)   # linear
    lst.append(random.random()) 
```

或者：

```
lst = [0.0] * 1000
while True:
    x = lst.pop()   # get the largest one in this example
    lst.append(random.random())
    lst.sort()      # linear (in this case) 
```

甚至：

```
lst = [0.0] * 1000
while True:
    x = lst.pop()   # get the largest one in this example
    bisect.insort(lst, random.random())   # linear 
```*

# java - 寻找用于范围计算的良好 Java IPV6 库

> ID：13788350
> 
> 赞同：3
> 
> 时间：2012-12-09T14:33:49.140
> 
> 标签：java, networking, ipv6

我正在寻找一个 java 库来处理 IPV6 范围计算，例如：
范围 A 是否与范围 B 重叠？
范围 A 是否包含在范围 B 中？
IP A 是否包含在范围 B 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:18:56.973

我在 Guava 库中找到了范围实用程序：

# [范围集](https://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained)

# [范围](https://code.google.com/p/guava-libraries/wiki/RangesExplained)

查看 RangeSet、RangeMap 和 Range 类。
我相信通过相关的 IPv6 类型，它可以提供必要的功能。
由于我还没有机会进行真正的测试，如果有人有一些真正的经验，那么听到它会很棒。

# javascript - 使用 Google Apps 脚本抓取动态网页

> ID：13788353
> 
> 赞同：1
> 
> 时间：2012-12-09T14:33:55.857
> 
> 标签：javascript, google-apps-script, web-scraping, urlfetch

我想从其他网站读取一些使用[Google Script](https://script.google.com/)的项目的数据。有问题的页面是*动态*的；它们包含在初始页面加载后通过对服务器的 JavaScript 调用加载的内容。通常，对于一些静态内容，这可以正常工作，但我是 JavaScript 和 Google Apps 脚本的新手，因此如果通过 JavaScript（例如通过 AJAX）异步加载内容，我不知道如何获取内容。

可以在[此处](http://www.radiohamburg.de/popup/webradio/titelanzeige.html)找到一个示例，该示例显示了广播电台播放的最后曲目。但是，这些曲目是使用 JavaScript 加载的，而不是包含我得到的字符串的表

```
<td class="row2"><span id="track_2">&nbsp;</span></td> 
```

当我使用：

```
UrlFetchApp.fetch(url).getContentText(); 
```

但是，如果我将 HTML 保存在浏览器中，则会出现正确的数据字符串：

```
<td class="row2" id="track_2">15:12 Will Smith - Men In Black</td>
                     ^^^^^^^  ^^^^^ ^^^^^^^^^^   ^^^^^^^^^^^^ 
```

有没有办法用 Google Apps 脚本做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T19:10:27.610

一般不会，不会。如果您可以对它正在做的事情进行逆向工程，您也许可以执行相同的 JavaScript 调用，但如果它需要任何服务器协调，则可能性不大。理论上，可以在 Google Apps Script（如 env-js）中运行一个 JavaScript 浏览器实现，它可以做到这一点，但在实践中，我认为即使不是不可能，也是非常困难的。

# html - 固定页脚的 CSS

> ID：13788357
> 
> 赞同：13
> 
> 时间：2012-12-09T14:34:14.327
> 
> 标签：html, css

我有一个非常基本的 HTML 页面。代码如下所示：

```
<body>
  <header style="min-height: 255px;">
  </header>

  <article style="padding-bottom: 60px; width: 900px; margin: 0 auto;">
    Body text goes here.
  </article>

  <footer style="position: absolute; bottom: 0px; width: 100%; height: 60px; background-color: black;">
    Copyright information
  </footer>
</body> 
```

通常，我的正文相当大。文本足够大，需要滚动条。看起来页脚位于底部的文本顶部。然后，当我向下滚动时，页脚不会保持固定。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-09T14:40:52.080

您需要`position:fixed;`在页脚中：

```
<body>
  <header style="min-height: 255px;">
  </header>

  <article style="padding-bottom: 60px; width: 900px; margin: 0 auto;">
    Body text goes here.
  </article>

  <footer style="position: fixed; bottom: 0px; width: 100%; height: 60px; background-color: black;">
    Copyright information
  </footer>
</body> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-09T14:37:54.160

将页脚更改`position: absolute`为`position: fixed`.

[http://jsfiddle.net/SUQuX/](http://jsfiddle.net/SUQuX/)

为什么？这解释了它们的不同之处[https://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/](https://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)我认为在你的情况下，问题是`absolute`元素附着在身体上，因此它将随着身体滚动。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-09T14:42:34.437

### 使用`position: fixed`而不是`position: absolute`.

```
<footer style="position: fixed;"> 
```

为什么？这解释了它们的不同之处[https://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/](https://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)我认为在你的情况下，问题是绝对元素附着在身体上，因此它会随着身体滚动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-14T15:48:11.533

我写这个答案是因为我认为它可能会在未来帮助某人。`height`即使在定义了页脚和`margin-bottom`正文之后，我也面临一个问题。问题是，如果您有响应式网站，其中页脚的高度会根据屏幕尺寸动态变化，您将有内容重叠。为了解决这个问题，我使用了 jQuery——除了页脚和页脚之外，`margin-bottom`保持所有设置相同。`body``height`

```
var footerHeight = $('#main_footer').outerHeight(); // get the footer height excluding margin
    $('#main_footer').css('height', footerHeight + "px");
    $('body').css('margin-bottom', footerHeight + 10 + "px"); 
```

即使页脚高度发生变化并且不会有重叠内容，这将始终将页脚保持在底部。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-18T12:11:40.477

使用 flexbox 是另一种方式，非常适用于响应式页面布局。

```
body {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100vh;
    margin: 0;
}

header {
    background-color: darkslategray;
    color: teal;
    padding: 0 15px;
}

section#main {
    flex: 1;
    overflow-y: auto;
    background-color: teal;
    color: aquamarine;
    padding: 0 15px;
}

footer {
    background-color: darkslategray;
    color: teal;
    padding: 5px 15px;
}
```

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" Paragraph="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="site.css">
</head>
<body>
    <header>
        <h1>
            Header
        </h1>
    </header>
    <section id="main">
        <h2>Section</h2>
        <p>Paragraph 1</p>
        <p>Paragraph 2</p>
        <p>Paragraph 3</p>
        <p>Paragraph 4</p>
        <p>Paragraph 5</p>
        <p>Paragraph 6</p>
        <p>Paragraph 7</p>
        <p>Paragraph 8</p>
        <p>Paragraph 9</p>
        <p>Paragraph 10</p>
        <p>Paragraph 11</p>
        <p>Paragraph 12</p>
        <p>Paragraph 13</p>
        <p>Paragraph 14</p>
        <p>Paragraph 15</p>
        <p>Paragraph 16</p>
        <p>Paragraph 17</p>
        <p>Paragraph 18</p>
        <p>Paragraph 19</p>
        <p>Paragraph 20</p>
    </section>
    <footer>
        Footer
    </footer>
</body>
</html>
```

# windows - 自定义文件拖放

> ID：13788360
> 
> 赞同：0
> 
> 时间：2012-12-09T14:34:32.943
> 
> 标签：windows, winapi, drag-and-drop

如何将自定义文件拖放功能注册到 Windows 资源管理器？

例如，当您在按住 alt 键的同时抓取文件并将其从文件夹拖放到另一个文件夹时，它会创建文件的快捷方式，或者按住 shift 键会将文件移动到目标位置。

我想要实现的是注册一个新的组合键（比如 alt + control）或覆盖现有的组合键。任何想法，将不胜感激。

# c++ - 在 C++/WinAPI 程序中读取 Trackbar 控件值

> ID：13788361
> 
> 赞同：3
> 
> 时间：2012-12-09T14:34:38.567
> 
> 标签：c++, winapi, visual-c++, trackbar

我正在用 Visual C++/Windows API 编写一个简单的 GUI 应用程序。我在资源中定义的对话框上有一个 Trackbar 控件：

```
CONTROL "",IDC_SLIDER1045,"msctls_trackbar32",0x50010000,23,52,141,16,0x00000000 
```

我想在静态文本控件上显示轨迹栏值，所以我写道：

```
case WM_NOTIFY:
if(lParam == TRBN_THUMBPOSCHANGING)
{
    Pos1 = SendMessage(GetDlgItem(hwndDlg, 1045), TBM_GETPOS, 0, 0);

    wsprintf(szPos1, "Change IP address every %d minutes", Pos1);

    SetDlgItemText(hwndDlg, 1044, szPos1);
}
break; 
```

我也试过：

```
case WM_NOTIFY:
    Pos1 = SendMessage(GetDlgItem(hwndDlg, 1045), TBM_GETPOS, 0, 0);

    wsprintf(szPos1, "Change IP address every %d minutes", Pos1);

    SetDlgItemText(hwndDlg, 1044, szPos1);
break; 
```

两个代码都不起作用。首先不执行任何操作，然后挂起应用程序。

我的问题是：如何获取 Trackbar 值并将其实时显示在静态文本控件上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T16:21:29.110

请务必阅读 Trackbar 的[SDK 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760149%28v=vs.85%29.aspx)。标题为“跟踪栏通知消息”的部分告诉您控件如何告诉您有关位置的信息。

请注意它如何记录您应该侦听 WM_HSCROLL 或 WM_VSCROLL 消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T19:50:44.937

正如其他答案所指出的那样，只要设置了适当的控件样式，Trackbar 控件就会发送传统的 WM_HSCROLL 和 WM_VSCROLL 通知消息。但是，这些通知仅支持 16 位范围。从 Windows Vista 开始，API 包括新的基于 WM_NOTIFY 的通知[TRBN_THUMBPOSCHANGING ，它在随附的结构](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760172.aspx)[NMTRBTHUMBPOSCHANGING](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760153.aspx)中发送 32 位位置数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T14:49:20.007

什么是`1045`和`1044`你的代码？可能您`IDC_SLIDER1045`的意思是静态控制资源ID。如有必要，请包含`resource.h`到源文件中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T16:54:00.437

我已经解决了我的问题。

对于其他需要解决方案的人：

来自 MSDN：

> 轨迹栏通过向父窗口发送 WM_HSCROLL 或 WM_VSCROLL 消息来通知其父窗口用户操作。具有 TBS_HORZ 样式的轨迹栏发送 WM_HSCROLL 消息。具有 TBS_VERT 样式的轨迹栏发送 WM_VSCROLL 消息。

代码：

```
case WM_HSCROLL:
    Pos1 = SendMessage(GetDlgItem(hwndDlg, IDC_SLIDER1045), TBM_GETPOS, 0, 0);

    wsprintf(szPos1, "Change IP address every %d minutes", Pos1);

    SetDlgItemText(hwndDlg, IDC_CHECKBOX1044, szPos1);
break; 
```

# python - 从 Python 中的图形中读取值

> ID：13788363
> 
> 赞同：1
> 
> 时间：2012-12-09T14:34:44.593
> 
> 标签：python, plot

我目前正在尝试在 python 中绘制来自 SPICE 模拟的数据。我已成功绘制信息，但现在我需要从特定点提取值，例如我想找到`x`给定值的值，`y`反之亦然。

```
pylab.figure(1)
pylab.title('NMOS')
pylab.semilogy(row.ngm_id[81*0:81*1],row.nidw[81*0:81*1],label='L = 0.35u')
pylab.xlabel('gm/ID [S/A]',fontsize=20)
pylab.ylabel('ID/W [A/m]',fontsize=20)
pylab.legend()
pylab.grid()
pylab.show() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:55:48.497

最好的方法是在尝试绘制数据之前获取数据，但如果您找不到任何其他方法，您可以从绘图中获取的线对象中取回数据：

```
# other commands
lines = pylab.semilogy(...)
#other commands
x,y = lines[0].get_data() 
```

# php - PHP - 无法打开流：权限被拒绝

> ID：13788368
> 
> 赞同：0
> 
> 时间：2012-12-09T14:35:23.270
> 
> 标签：php, file-upload

我无法将文件上传到我的网站。

编码：

```
$tmpFilePath = $_FILES['upload']['tmp_name'][$i];
  //filepath
  if ($tmpFilePath != ""){

    //Setup the new file path
    $newFilePath = "./uploads/$keuze/" . $_FILES['upload']['name'][$i];

    //Upload the file into the temp dir
    if(move_uploaded_file($tmpFilePath, $newFilePath)) {

       //unfinished

    } 
```

这与 xampp 完美配合，但现在网站在线，我收到以下错误：警告：move_uploaded_file(./uploads/barbeque 2012/endless.jpg) [function.move-uploaded-file]：无法打开流：第 36 行 /home/arnoudi26/domains/creemersa.be/public_html/upload.php 中的权限被拒绝

我已设置读取/写入整个地图的权限，但仍然无法正常工作。

# java - 发布一个在没有持有用于发布的锁的情况下构造的 @NotThreadSafe 实例是否安全？

> ID：13788369
> 
> 赞同：2
> 
> 时间：2012-12-09T14:35:37.153
> 
> 标签：java, concurrency, thread-safety

这是一份安全的出版物吗？

给定班级：

```
@NotThreadSafe
public class Pub {
   int drinkers;
   public Pub(int drinkers) {
      this.drinkers = drinkers;
   }
} 
```

T1 调用`publish()`和 T2 调用`inspect`：

```
private final Object lock = new Object();

@GuardedBy("lock")
private Pub shared;

void publish() {
  Pub p = new Pub(12);
  synchronized(lock) {
      this.shared = p;  // publish  
  }
}

Pub inspect() {
  synchronized(lock) {
     return shared;
  }
} 
```

T2 能保证看到`shared.drinkers == 12`吗？还是我们在持有锁时没有*构建*Pub 的事实构成了不安全的发布？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T14:49:42.627

这是一个完全有效的操作。Pub 将为 null 或正确初始化。这是因为初始化和赋值是在同一个线程上相继发生的。

# ajax - 使用 partialViews 上传 Asp.Net Mvc ajax 文件？

> ID：13788372
> 
> 赞同：2
> 
> 时间：2012-12-09T14:36:18.933
> 
> 标签：ajax, asp.net-mvc, file-upload, partial-views

是否可以使用部分视图上传 ajax 文件？

我尝试通过以下方式做到这一点：

**_Upload.cshtml（部分视图）**

```
<script type="text/javascript">
$(document).ready(function () {
    $("#upload").click(function () {
        var val = $("#galeries").val();
        if (val == null || val == "") {
            val = 0;
        }
        var form = $("#form");
        $.ajax({
            url: form.attr('action'),
            type: form.attr('method'),
            data: { galeryId: val, formElements: form.serialize() },
            complete: function () {

            },
            error: function (jqXhr, textStatus, errorThrown) {
                alert("Error '" + jqXhr.status + "' (textStatus: '" + textStatus + "', errorThrown: '" + errorThrown + "')");
            },
            success: function (data) {

            }
        });
    });
});
</script>

@using (Html.BeginForm("_Upload", "Admin", FormMethod.Post, new { enctype = "multipart/form-data", id = "form" }))
{
    <input type="file" name="file" id="file" />
    <input type="button" value="Yükle" id="upload" />
} 
```

**控制器**

```
[HttpPost]
public ActionResult _Upload(IEnumerable<HttpPostedFileBase> files, int galeryId,FormCollection formElements)
{
    foreach (var file in files)
    {
        if (file.ContentLength > 0)
        {
            var fileName = Path.GetFileName(file.FileName);
            var path = Path.Combine(Server.MapPath("~/Images/Galery_" + galeryId), fileName);
            file.SaveAs(path);
        }
    }

    return View();
} 
```

我不知道，我应该将哪些参数类型传递给控制器​​操作。我用这种情况调试它。

```
galeryId = 1;
formElements = "";
files = null; 
```

如果可能（带有部分视图的 ajax 文件上传），我该怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:22:03.357

序列化方法不适用于文件上传（文件输入类型被忽略）。根据您的目标浏览器，您可以使用[FormData](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData)方法（对于 IE，它必须是 10+），或者开始使用 iframe 来异步发布您的表单。

# java - Java中的解压错误

> ID：13788373
> 
> 赞同：4
> 
> 时间：2012-12-09T14:36:22.653
> 
> 标签：java, unzip, 7zip

嗨，我对 zip 格式很陌生，我使用 Java 的 util 实现来解压缩文件，但是每次我尝试打开文件时都会引发 ZipException。我检查了文件是否已损坏，这不是因为我可以使用 winRar 打开它。

所以我继续前进并尝试使用`appache.commons.vfs`package 来做同样的事情，这也导致了失败。

作为最后一次尝试，我尝试了库 7-zip-jbinding，它能够读取 Zip 存档的内容，但我无法提取它。

这是我的本机 java 实现代码：

```
BufferedOutputStream dest = null;
    FileInputStream fis = new FileInputStream(archive);
    ZipInputStream zis = new ZipInputStream(new BufferedInputStream(fis));
    ZipEntry entry;
    File destFile;

    destinationDir.mkdir();

    while ((entry = zis.getNextEntry()) != null) {

        String currentfileName = entry.getName();
        destFile = new File(destinationDir, currentfileName);
        File destinationParent = destFile.getParentFile();

        destinationParent.mkdirs();

        if (!entry.isDirectory()) {
            int currentByte;
            byte data[] = new byte[BUFFER_SIZE];

            FileOutputStream fos = new FileOutputStream(destFile);
            dest = new BufferedOutputStream(fos, BUFFER_SIZE);

            while ((currentByte = zis.read(data, 0, BUFFER_SIZE)) != -1) {
                dest.write(data, 0, currentByte);
            }
            dest.flush();
            dest.close();

        }
    }
    fis.close();
    zis.close(); 
```

我的 appache commons vfs 代码

```
 public void unpack(final File outputDir,URI packLocation) throws IOException
   {
 this.packLocation = packLocation;
 this.fileSystemManager = VFS.getManager();

 outputDir.mkdirs();

  final FileObject packFileObject =   fileSystemManager.resolveFile(packLocation.toString());
  try
  {
     final FileObject zipFileSystem = fileSystemManager.createFileSystem(packFileObject);
     try
     {
        fileSystemManager.toFileObject(outputDir).copyFrom(zipFileSystem, new AllFileSelector());
     }
     finally
     {
        zipFileSystem.close();
     }
  }
  finally
  {
     packFileObject.close();
  }
 } 
```

有什么很明显的我想念的吗？如果有人使用 7-zip-jbinding 将 zip 文件提取到文件系统中，请告诉我它是如何完成的。

编辑1：

在该文件的mac终端中执行解压缩时，它向我显示了以下警告

警告：在 zipfile 的开头或内部有 84 个额外字节。这会以某种方式影响 Zip 输入流吗？

编辑2：

zip 文件中的额外字节似乎搞砸了 zip 输入流。在终端上使用 unzip 会显示添加到 zip 文件中的额外字节数。我使用 RandomAccessFile 跳过（n）个字节并且 Zip 输入流开始正常工作.. 现在我需要做的就是找到一种方法来删除 Zip 文件中的额外字节..

编辑后的代码粘贴在下面，以供将来从中受益的任何人使用。

```
 final int BUFFER_SIZE = 1024;

    RandomAccessFile randomAccessFile = new RandomAccessFile(archive, "r");
    randomAccessFile.skipBytes(84); // The extra bytes 

    FileChannel channel = randomAccessFile.getChannel();

    BufferedOutputStream dest = null;
    ZipInputStream zis = new ZipInputStream(new BufferedInputStream(Channels.newInputStream(channel)));
    ZipEntry entry;
    File destFile;

    destinationDir.mkdir();

    while ((entry = zis.getNextEntry()) != null) {

        String currentfileName = entry.getName();
        destFile = new File(destinationDir, currentfileName);
        File destinationParent = destFile.getParentFile();

        destinationParent.mkdirs();

        if (!entry.isDirectory()) {
            int currentByte;
            byte data[] = new byte[BUFFER_SIZE];

            FileOutputStream fos = new FileOutputStream(destFile);
            dest = new BufferedOutputStream(fos, BUFFER_SIZE);
            while ((currentByte = zis.read(data, 0, BUFFER_SIZE)) != -1) {
                dest.write(data, 0, currentByte);
            }
            dest.flush();
            dest.close();

        }
    }
    zis.close(); 
```

如果有人知道跳过额外字节的方法，我会全神贯注:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T01:21:58.153

终于在朋友的帮助下解决了

跳过空字节的天真方法是继续阅读，直到遇到“PK”签名。因此，在程序中，输入流读取字节直到它到达“PK”，然后它初始化 Zip inputStream 并传递后面的字节流。

下面是快速而肮脏的方法。会有比这更优雅的解决方案.. 但目前这可行。

```
 InputStream zipStarterStream, emptyBytecountStream;
    ZipInputStream zis;
    int BUFFER = 2048;

    /* Primary Checking to see if there is a zip file */
    File file = new File(filePath);
    if (file.exists()) {
        System.out.println("Zip found");
    } else {
        System.out.println("Zip Not found");
        return;
    }
    try {
        emptyBytecountStream = new FileInputStream(filePath);
        Charset encoding = Charset.defaultCharset();
        Reader reader = new InputStreamReader(emptyBytecountStream,
                encoding);
        int r1, r2;
        int charSkipped = 0;
        boolean foundHeader = false;

        // This is the check to skip the initial few bytes

        while ((r1 = reader.read()) != -1 && (r2 = reader.read()) != -1) {
            char ch1 = (char) r1;
            char ch2 = (char) r2;
            if (ch1 == 'P' && ch2 == 'K') {
                foundHeader = true;
                break;
            }
            charSkipped += 2;
        }
        emptyBytecountStream.close();

        zipStarterStream = new FileInputStream(filePath);
        zis = new ZipInputStream(new BufferedInputStream(zipStarterStream));

        if (foundHeader && charSkipped > 0) {
            zipStarterStream.skip(charSkipped);
        }

        String outputPath = getPublicStorageDir("")
                + "/"
                + filePath.substring(filePath.lastIndexOf("/") + 1,
                        filePath.length());

        new File(outputPath).mkdir();
        ZipEntry entry;

        while ((entry = zis.getNextEntry()) != null) {

            String currentfileName = entry.getName();
            File destFile = new File(outputPath, currentfileName);
            File destinationParent = destFile.getParentFile();

            destinationParent.mkdirs();

            if (!entry.isDirectory()) {
                int currentByte;
                byte data[] = new byte[BUFFER];

                // write the current file to disk
                FileOutputStream fos = new FileOutputStream(destFile);
                BufferedOutputStream dest = new BufferedOutputStream(fos,
                        BUFFER);

                // read and write until last byte is encountered
                while ((currentByte = zis.read(data, 0, BUFFER)) != -1) {
                    dest.write(data, 0, currentByte);
                }
                dest.flush();
                dest.close();
            }

            if (currentfileName.endsWith(".zip")) {
                extractZipFolder(destFile.getAbsolutePath());
            }
        }
        zis.close();
    } catch (IOException e) {
        e.printStackTrace();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T19:44:20.623

确切的异常消息是什么？

请注意，ZIP 文件可能存在格式差异。例如：您是否使用了加密？这对于内置的 java 例程来说是个问题。

并且：您是否尝试过使用其他 ZIP 工具重新打包？

# sql - 从具有不同特定列的两个表中提取记录

> ID：13788376
> 
> 赞同：0
> 
> 时间：2012-12-09T14:36:28.693
> 
> 标签：sql

有没有更好的方法来编写这个查询：

```
 INSERT INTO #Temp (MinDateTime, VehicleID)
    SELECT Min(CAST(RDate AS smalldatetime) + RTime) as MinDateTime, T.VehicleID
    FROM (
        SELECT D.RDate, D.RTime, D.VehicleID
        FROM DELETED AS D 
        JOIN INSERTED AS I ON D.ReceiptID = I.ReceiptID
        AND (D.[RDate] <> I.[RDate] OR D.[RTime] <> I.[RTime] OR D.VehicleID <> I.VehicleID OR D.Liters <> I.Liters OR D.OdometerReading <> I.OdometerReading)
        UNION ALL
        SELECT I.RDate, I.Rtime, I.VehicleID
        FROM INSERTED AS I 
        JOIN DELETED AS D ON I.ReceiptID = D.ReceiptID
        AND (I.[RDate] <> D.[RDate] OR I.[RTime] <> D.[RTime] OR I.VehicleID <> D.VehicleID OR I.Liters <> D.Liters OR I.OdometerReading <> D.OdometerReading)
        UNION ALL
        SELECT D.RDate, D.RTime, D.VehicleID
        FROM DELETED AS D 
        LEFT JOIN INSERTED AS I ON D.ReceiptID = I.ReceiptID
        WHERE I.ReceiptID IS NULL
        UNION ALL
        SELECT I.RDate, I.Rtime, I.VehicleID
        FROM INSERTED AS I 
        LEFT JOIN DELETED AS D ON I.ReceiptID = D.ReceiptID
        WHERE D.ReceiptID IS NULL
    ) AS T
    GROUP BY T.VehicleID
    ORDER BY MinDateTime, T.VehicleID 
```

这是更新后触发器的一部分，它评估已删除/添加/插入的记录，并查看 5 列中的一列是否已被修改，它会生成车辆列表和日期/时间，以便触发器可以执行重新计算受影响记录的存储过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:27:19.703

我怀疑内部查询可以写成：

```
 SELECT D.RDate, D.RTime, D.VehicleID
    FROM DELETED D full outer JOIN
         INSERTED I
         ON D.ReceiptID = I.ReceiptID
    where ((D.[RDate] <> I.[RDate] OR D.[RTime] <> I.[RTime] OR D.VehicleID <> I.VehicleID OR D.Liters <> I.Liters OR D.OdometerReading <> I.OdometerReading) or
           (I.[RDate] <> D.[RDate] OR I.[RTime] <> D.[RTime] OR I.VehicleID <> D.VehicleID OR I.Liters <> D.Liters OR I.OdometerReading <> D.OdometerReading) or
         I.ReceiptID IS NULL or
         D.ReceiptID IS NULL
        ) and
        (coalesce(i.ReceiptId, d.receiptId) is not null)  -- check that at least one has a value 
```

换句话说，我用 a 替换了联合序列，`full outer join`然后将所有条件放在一个`where`子句中，用 s 分隔`or`。

# sql - 保留 AUTO_INCREMENT 字段是不恰当的设计？

> ID：13788379
> 
> 赞同：3
> 
> 时间：2012-12-09T14:36:55.770
> 
> 标签：sql, normalization, rdbms, database

在一个数据库中，我看到了许多`Primary-Key(PK)`is`AUTO_INCREMENT`类型的表。

假设我有一个`Children`如下创建的表：

```
CREATE TABLE Children(
  childNo INTEGER AUTO_INCREMENT NOT NULL PRIMARY KEY,
  name    VARCHAR(25),
  age     INTEGER,
  address VARCHAR(100) 
) 
```

*   `ChildNo`是`AUTO_INCREMENT`，但是一旦我插入了一行，**我怎么知道为孩子（名字）分配了哪个值？**和不好的选择`PK`。

*   如果我**搜索孩子的名字，效率会很低**（并且不能保证是唯一的）。出于这个原因，我认为保留`AUTO_INCREMENT`为主键**表示弱模式设计？**

*   假设我有另一张桌子`Parents`，我需要保留`ChidNo`为`Foreign Key (FK)`. 那么它会很复杂。

*   如果存在递归关联，那么将 PK 保持为 AUTO_INCREMENT 会非常糟糕。

**保持关系中的自动增量字段表示规范化不合适？**

在某些表中，为了引入一个额外的`AUTO_INCREMENT`字段，我想将所有列保留为 PK。我错了吗？

因为我的想法是反对使用`AUTO_INCREMENT`，请建议我也可以使用保持`AUTO_INCREMENT`字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T18:47:00.800

自增 PK 列可以称为[*代理键*](http://en.wikipedia.org/wiki/Surrogate_key)。

在某些情况下，使用代理键可能是一种有用的优化：

*   如果表中没有其他列集可以可靠地被视为候选键。对于您的示例，可能无法保证 (name, age, address) 的组合在所有情况下都能唯一标识行。似乎*不太可能*有两个同名、同龄、住在同一个地址的人。但这仍然不是*无效*的。在这种情况下，使用代理键可以使所有其他列不唯一。
*   可能希望 PK 保持不变。例如，一个人可以更改他们的名字，但他们仍然是同一个人。当然，SQL 允许 PK 值更改，但是所有其他按值引用 PK 的数据也必须更改。如果您的 RDBMS 支持使用 ON UPDATE CASCADE 的外键，您可以自动执行此操作。但是，如果您没有 ON UPDATE CASCADE（例如 Oracle），或者您没有外键（例如较旧的 MySQL 或 SQLite），或者您的数据存储在 RDBMS 之外怎么办？使用代理键意味着任何“自然”数据列都可以在不更改行标识的情况下自由更改值。代理键值是任意的，与自然数据无关，因此键永远不需要更改。
*   即使有可以用作候选键的列，也可能需要使用较大的列子集作为复合主键。密钥的存储变得庞大，当然比单个整数要庞大得多。因此，使用代理键在存储效率方面具有优势。
*   操作多列 PK 也使开发人员的编码工作更多，因为他们需要在 JOIN 和 WHERE 子句中编写更长的条件。此外，如果需求发生变化使得（姓名、年龄、地址）不再是足够的 PK，您需要在 PK 中添加第四列，现在您必须更改所有应用程序中的所有 SQL 代码。

所以代理键有合法的好处。

也就是说，代理键经常被过度使用。许多应用程序框架（例如 Ruby on Rails）使用默认值，即每个表都有一个整数代理键`ID`，无论它是否合适。可以逐表指定PK列，但很多程序员都以默认为*规则*，这导致他们有一些毫无意义的表设计。我见过的最糟糕的例子是每个多对多表都有一个多余的`ID`列。

对于它的价值，使用代理键与规范化无关。也就是说，规范化规则既不鼓励也不阻止使用代理键。

每个支持代理键的数据库还提供了一个函数，该函数返回当前会话中最近生成的 id 值。正如@JStead 提到的，在 SQL Server 中它是`@@IDENTITY`or `SCOPE_IDENTITY()`。在 MySQL 中，它是`LAST_INSERT_ID()`. 等等。

这些函数只返回一个值，因此如果在单个 INSERT 语句中插入多行，则无法获取所有生成的 id 值。这是一个限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T15:29:40.873

我同意这已被过度使用，但它确实在 RDBMS 世界中占有一席之地。您没有指定数据库，这更像是一场哲学辩论，然后是任何实现，所以我将在下面的示例中使用 sql server。

auto_increment 或标识的最佳情况是，在很多情况下，它比自然键更有效且更易于使用，其中自然键是宽列或多列自然键。

让我们看下表。

```
CREATE TABLE TABLE_OBJECT (
 Table_ID int identity(1,1),
 Server_NME varchar(128),
 Database_NME varchar(128),
 Table_NME varchar(128)
)

CREATE TABLE COLUMN_OBJECT (
 Column_ID int identity(1,1),
 Table_ID int not null,
 Server_NME varchar(128),
 Database_NME varchar(128),
 Table_NME varchar(128),
 Column_NME varchar(128)
) 
```

现在让我们说在这种情况下我们想要将两个表连接在一起并且我们没有身份。

```
select * from TABLE_OBJECT to
inner join COLUMN_OBJECT co on co.Server_NME = to.Server_NME
                          and co.Database_NME = to.Database_NME
                          and co.Table_NME = to.Table_NME 
```

最糟糕的是，写它的效率也很低，我不得不读取 6*(128) 个字节来比较一行。

现在将其与以下的简单性进行比较。

```
select * from TABLE_OBJECT to
inner join COLUMN_OBJECT co on co.Table_id = to.Table_ID 
```

在上面的例子中，我只需要读取 2*(4) 个字节来比较一行。当您有很多行时，这是一个巨大的差异。

然后还有简单的存储方面。

```
CREATE TABLE COLUMN_OBJECT (
     Server_NME varchar(128),
     Database_NME varchar(128),
     Table_NME varchar(128),
     Column_NME varchar(128)
    ) 
```

相对

```
CREATE TABLE COLUMN_OBJECT (
     Column_ID int identity(1,1),
     Table_ID int not null,
     Column_NME varchar(128)
    ) 
```

其上的存储是身份版本 2*(4) + 128 字节与自然密钥版本 4*128 字节。

唯一性也可以通过对 table_id 和 column_nme 的唯一约束来保证。然后在父表中对 table_nme、database_nme、server_nme 进行唯一约束。老实说，虽然我也很可能创建了一个数据库表，并且表对 database_id 和 table_nme 有唯一的约束，但你明白了。如果为唯一索引选择了正确的列，则唯一性永远不会成为问题。

在大多数语言中，获取先前插入的身份或 auto_incremenet 的值也很简单。

```
select @@IDENTITY
or
select LAST_INSERT_ID() 
```

每种语言都有获得最后一种语言的方法。

# python - 二维列表如何在 Python 中工作

> ID：13788380
> 
> 赞同：1
> 
> 时间：2012-12-09T14:36:55.467
> 
> 标签：python

我正在做[Project Euler Problem 15](http://projecteuler.net/problem=15)。我使用了正确的算法，但它似乎不起作用。这是我的代码：

```
f = [[0] * 21] * 21

# init the list
for i in range(21):
    f[0][i] = 1
    f[i][0] = 1

for i in range(21):
    for j in range(21):
        f[i][j] = f[i-1][j] + f[i][j-1]

print f[20][20] 
```

当我完成初始化列表时，我打印了它。我期待它像`[[1, 1, 1...], [1, 0, 0...]...]`，但它变成了`[[1, 1, 1...], [1, 1, 1...]...]`，我不知道为什么。

我曾经使用类 C 语言，我认为 Python 中的列表有点像 C 中的数组，所以我以相同的方式使用它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T14:42:35.580

将列表相乘时，您不是创建单独的列表，而是创建对*同一*列表的多个*引用。*

 *相反，请执行以下操作：

```
f = [[0 for _ in range(21)] for _ in range(21)] 
```

`id()`使用函数时可以看出区别：

```
>>> f = [[0]*21]*21
>>> for nested in f[:3]:
...     print id(nested)
... 
4523317152
4523317152
4523317152
>>> f = [[0 for _ in range(21)] for _ in range(21)] 
>>> for nested in f[:3]:
...     print id(nested)
... 
4523317512
4523317440
4523317656 
```

单独的对象具有单独的内存 id 值，而您的列表对于每个`id()`调用都有相同的结果，表明它们都是*相同的 list*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T14:40:45.090

在第一行，使用这个：

```
f = [[0] * 21 for _ in xrange(21)] 
```

您编写的内容将创建一个长度为 21 的列表（这就是内部`[0]*21`所做的），然后创建一个包含*相同*内部列表 21 次的外部列表。这意味着每当您修改内部列表中的元素时，它会在*所有*副本中被修改，即在矩阵的每一行中。

对于它的价值，您可能想查看该`numpy`模块（当然首先安装[NumPy](http://www.numpy.org)），它为您提供了一个“正确的”n 维数组结构。*

# c# - c# 尝试从 webbrowser 检索 url 时出现异常错误

> ID：13788384
> 
> 赞同：0
> 
> 时间：2012-12-09T14:37:32.303
> 
> 标签：c#, exception, browser

我正在使用的当前代码是

```
 WebBrowser browser = new WebBrowser();
        browser.Url = new Uri("http://www.youtube.com/user/RayWilliamJohnson");
        label1.Text = browser.Url.ToString(); 
```

但它给了我一个“未设置为对象实例的对象引用”。上`label1.Text = browser.Url.ToString();`线。我不知道它为什么会这样做，或者我该如何解决这个问题，这让我很紧张，所以任何帮助都将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:44:37.643

当调试器因异常中断时，您可以：

*   将鼠标悬停在编辑器中的变量上，或
*   查看“Locals”调试窗口

看看他们的价值观是什么。你应该能够很容易地看到是什么`null`。然后沿着调用链往上走，看看它应该在哪里初始化。

![在此处输入图像描述](../Images/2f23791e79800e5b1ca5f9275fba47fb.png)

如果您想成为一名高效的开发人员，您将需要学习如何进行这种简单的调试。

# .net - Facebook 喜欢框不刷新喜欢的页面

> ID：13788385
> 
> 赞同：-1
> 
> 时间：2012-12-09T14:37:46.037
> 
> 标签：.net, facebook, asp.net-mvc-3, facebook-graph-api

在我的应用程序中，我使用 Facebook like-box 插件：

```
<div class="likedialog" title="Like">
    <div>
       <fb:like-box href="@ViewBag.PageLink" width="370" height="72" show_faces="false"      stream="false" header="false"></fb:like-box>
        </div>
     </div> 
```

问题是：点赞后这个赞不刷新页面。我在我的 js 文件中用于订阅事件：

```
window.FB.Event.subscribe('edge.create',
    function (response) {
        top.location.href = response + "?sk=app_" + window.AppId;
    }
); 
```

但是这个事件没有火。有人可以告诉我这有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:41:44.263

没有任何错误信息，我们只能猜测。

首先，使用此代码：[https ://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

第二：检查浏览器控制台是否有错误，并检查是否调用了边缘事件。您是否初始化了 JavaScript SDK？否则，您不能使用“FB”。

您需要这个（将 xxxxxx 替换为您的 App ID）：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/de_DE/all.js#xfbml=1&appId=xxxxxx";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

另外，不要忘记命名空间：

```
<html xmlns:fb="http://ogp.me/ns/fb#"> 
```

顺便说一句，这似乎有一个错误：[https ://developers.facebook.com/bugs/378710432185222/](https://developers.facebook.com/bugs/378710432185222/)

# c++ - D3DX10CreateEffectFromFile 在另一台计算机上返回 E_FAIL

> ID：13788391
> 
> 赞同：1
> 
> 时间：2012-12-09T14:38:43.410
> 
> 标签：c++, direct3d10

我有一个小型应用程序，它可以加载模型并在没有照明或其他任何东西的情况下显示它。我一直在尝试构建一个版本并在另一台计算机上运行它，但 D3DX10CreateEffectFromFile 不断返回 E_FAIL。

效果文件在我的开发机器上完美编译并且完美运行，但在另一台 PC 上却不行。pc的规格没有那么不同。两者都是Windows7，都有GeForce显卡。唯一真正的区别是我尝试运行该版本的计算机具有兼容 DirectX 11 的显卡。

## 我的发布版本的文件夹看起来像这样......

## G:\模型加载器

d3dx10_43.dll

模型查看器.exe

简单的.fx

test.txt（模型文件）

这在我的开发机器上运行得非常好（我已经注释掉了大部分代码，所以我所做的就是打开一个窗口，initD3D10 并尝试加载一个效果）。在另一台 PC 上一切正常，直到...

```
ID3D10Blob* l_pBlob_Errors = NULL;

HRESULT hr = D3DX10CreateEffectFromFile(L"Simple.fx", 
    NULL, 
    NULL, 
    "fx_4_0",
    //D3D10_SHADER_ENABLE_STRICTNESS || D3D10_SHADER_WARNINGS_ARE_ERRORS, 
    0,
    0, 
    pD3DDevice, 
    NULL, 
    NULL, 
    &modelObject->pEffect,
     &l_pBlob_Errors ,
     NULL); 

if (FAILED(hr))
{
       LPVOID l_pError = NULL;
    if( l_pBlob_Errors )
    {
          l_pError = l_pBlob_Errors->GetBufferPointer();
          char* myChar = (char*)l_pError;
          MessageBoxA(0, myChar, 0,0);
           }
else
{
     MessageBox(0,0,0,0);
        }
    return false;
 } 
```

我认为着色器不包含任何错误，因为它可以在我的开发电脑上正确编译

```
matrix Projection;

// PS_INPUT - input variables to the pixel shader
// This struct is created and fill in by the 
// vertex shader
struct PS_INPUT
{
float4 Pos : SV_POSITION;
float4 Color : COLOR0;
};

PS_INPUT VS(float4 Pos : POSITION, float4 Color : COLOR)
{
PS_INPUT psInput;

// Pass through both the position and the color
psInput.Pos = mul( Pos, Projection );
psInput.Color = Color;

return psInput;
}

float4 PS(PS_INPUT psInput) : SV_Target
{
return psInput.Color;
}

// Define the technique
technique10 Render
{
pass P0
{
    SetVertexShader( CompileShader( vs_4_0, VS() ) );
    SetGeometryShader( NULL );
    SetPixelShader( CompileShader( ps_4_0, PS() ) );
}
} 
```

L"simple.fx" 也是正确的文件路径，因为我可以使用 std::ifstream 从中读取。我已经搜索了几个小时并且无法找到答案，所有相关问题都证明是效果文件中的错误，该文件可以在我的开发机器上编译。

当我将错误添加到效果文件并在我的开发机器上运行它时，错误会显示在消息框中。当我在我的另一台电脑上运行相同的错误代码时，没有打印错误并且 l_pBlob_Errors == 0

它可能真的很菜鸟和容易，但我只是不明白发生了什么。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-14T22:29:24.587

问题的根本原因是您同时依赖**d3dx10_43.dll**和 d3dcompile_43.dll。D3DX10 开始使用 D3DCompile，而不是在 DirectX SDK（2007 年 4 月）版本中拥有另一个 HLSL 编译器副本。见这篇[文章](http://blogs.msdn.com/b/chuckw/archive/2010/04/22/what-s-up-with-d3dcompiler-xx-dll.aspx)和这篇[文章](http://blogs.msdn.com/b/chuckw/archive/2012/05/07/hlsl-fxc-and-d3dcompile.aspx)。

还请记住，许可证不允许您仅将 D3DX10*.DLL 或 D3DCompiler #43 与您的应用程序并排复制。您必须使用旧版 DirectSetup REDIST。您还应该使用[更新的版本](http://blogs.msdn.com/b/chuckw/archive/2011/04/19/dxsetup-update.aspx)，而不是 DirectX SDK（2010 年 6 月）附带的版本。

当然，更好的解决方案是直接放弃 Direct3D 10，迁移到 Direct3D 11，并完全避免使用[旧版 DirectX SDK](http://blogs.msdn.com/b/chuckw/archive/2013/08/21/living-without-d3dx.aspx) ...另外，许可证允许您并排复制 D3DCompile #46 或 #47与您的应用程序。

# jquery - 如何将同一 DOM 级别的按钮事件的 INPUT 值设置为“1”？我的代码有什么错误

> ID：13788392
> 
> 赞同：1
> 
> 时间：2012-12-09T14:38:58.383
> 
> 标签：jquery, input, hidden

我的代码如下。似乎我无法精确定位名称为 delete[] 的输入标签。谢谢。

```
<div id="rc1" class="actionitem">
<fieldset>
<legend>Action Item</legend>
<table>
</table>
<input type="hidden" value="" name="aid[]">
<input type="hidden" value="" name="delete[]">
<button onclick="remove(this);" type="button">Remove</button>
</fieldset>
</div>

<script>
function remove(element){
    if (confirm("Please press OK to confirm")) {
        $(element).parent().find('delete').val('1');
        $(element).parent().parent().slideUp('slow', function() {
            $(element).parent().parent().hide();
        });
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:52:25.110

您应该通过其名称属性找到该元素。将该行更改为此以使其正常工作

```
$(element).parent().find("input[name='delete[]']").val('1'); 
```

您编写该代码的方式会强制 jQuery`<delete>`在`DOM`not a element 中查找具有`name`属性值的元素`delete[]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T14:55:57.583

试试这个

```
<div id="rc1" class="actionitem">
<fieldset>
<legend>Action Item</legend>
<table>
</table>
<input type="hidden" value="" name="aid[]">
<input type="hidden" value="" name="delete[]">
<button class="removeBtn" type="button">Remove</button>
</fieldset>
</div> 
```

​</p>

```
$(function(){
  $("button.removeBtn").click(function(){
    var el = this;
    if (confirm("Please press OK to confirm")) {
        $(el).parents("fieldset").find("input[name='delete[]']").val('1');
        $(el).parents(".actionitem").slideUp('slow', function() {
            $(el).parents(".actionitem").hide();
        });
    }
  })
​})​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T14:57:59.980

代替

```
.find('delete') 
```

为什么不尝试选择器语法，例如

```
.find('input[name="delete[]"]') 
```

# javascript - Javascript增加列表列表

> ID：13788393
> 
> 赞同：1
> 
> 时间：2012-12-09T14:39:10.397
> 
> 标签：javascript, jquery, arrays

如果我有这样的列表：

```
var a=  [['1'[0]],['2'[0]],['3'[0]],['4'[0]]]; 
```

如果条件应该另一个变量等于 '1','2','3','4' 然后增加它们列表的值，例如：

```
for(var i=0; i<a; i++{
 if(a[i] == z) {
   a[i] += z;
    }
} 
```

我知道上面的代码行不通，但是我怎样才能让每个“内部”元素都起作用呢？

我是一个javascript新手，所以请原谅代码中的任何错误。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T14:47:38.720

这些最里面的数组位于`[1]`第一组内部数组的索引处，假设您的数组的实际格式是：

```
// Note the commas between the inner elements which you don't have above.
var a = [['1',[0]],['2',[0]],['3',[0]],['4',[0]]]; 
```

所以你快到了，你需要访问`a[i][1][0]`和增加它`++`而不是`+= z`.

例子：

```
console.log(a[1][1][0]);
// 0  (at element '2')

// z is the string value you are searching for...
for(var i=0; i < a.length; i++) {
  // Match the z search at a[i][0]
  // because a[i] is the current outer array and [0] is its first element
  if(a[i][0] == z) {
    // Increment the inner array value which is index [i][1][0]
    // Because the 1-element inner array is at [i][1] and its first element is [0]
    a[i][1][0]++;
  }
} 
```

所以对于`z = '2'`：

```
// Flattened for readability:
a.toString();
// "1,0,2,1,3,0,4,0"
//-------^^^ 
```

然后`z = '4'`：

```
// This time the '4' element gets incremented
a.toString();
// "1,0,2,1,3,0,4,1"
//-------^^^-----^^^ 
```

[这是关于jsfiddle的演示......](http://jsfiddle.net/YL99y/2/)

### 更新：这是更新值所在的位置：

![控制台示例](../Images/e74222b08451fb147d99f82cb6085c96.png)

是的`Array[1] 0: 1` 增量值`z == '4'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T14:49:58.680

我不确定你想要完成什么，但我认为它是这样的：

```
var lists = {
    '1': [0],
    '2': [0]
};

function incrementList(listKey, value) {
    if (lists[listKey]) {
        lists[listKey] = lists[listKey].map(function(num) {
            return num + value;
        });
    }        
}

incrementList('1', 2);
console.log(lists['1'][0]); // 2

incrementList('1', 4);
console.log(lists['1'][0]); // 6 
```

​</p>

# google-chrome - chome 上的“translate3d”奇怪渲染/使字体看起来不同

> ID：13788395
> 
> 赞同：0
> 
> 时间：2012-12-09T14:39:15.517
> 
> 标签：google-chrome, webkit, leaflet, translate3d

我有一张传单地图，它使用`-webkit-transform: translate3d`.

```
<div id="map"></div>
<div id="foo">some text</div> 
```

假设我们有上面的代码并且`foo`位于`map`. 并且（及其边缘）上`foo`的所有项目都在某种程度上失去了原来的视图。`map`例如，文本变得略有不同。如果有一个 div`map`在左边框上方有边框，有时（！？）可能会丢失。

这个错误是在我的 OS X chrome 上生成的。Safari似乎可以很好地呈现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:01:26.803

我`-webkit-font-smoothing: antialiased;`在html标签上加了，现在好像已经解决了。

# ios - Three20：很多语义问题

> ID：13788396
> 
> 赞同：3
> 
> 时间：2012-12-09T14:39:18.757
> 
> 标签：ios, three20

我已经使用终端将 Three20 导入到我的新项目中。当我构建项目时，我遇到了 13 个错误，即语义问题。如何解决这个或任何其他想法？

截屏：[![](../Images/ad45a572d16adee786048b0fcaf3188c.png)](https://i.stack.imgur.com/0hMMm.png)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:00:27.547

该框架不再维护。但是，如果您想获得没有任何 xcode 4.5 问题的版本，请下载项目的开发分支[https://github.com/facebook/three20/tree/development](https://github.com/facebook/three20/tree/development)。

这应该包括您正在寻找的修复程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T15:07:08.883

据我所知，那个图书馆一团糟。

至于错误：

您使用的是哪个编译器？新编译器（*Apple LLVM 4.1*，如果我是正确的话）会自动创建那些“下划线 ivars”，而无需您合成它们：

例如（在新编译器之前）：

`@property (nonatomic) NSObjectTypeOrWhatever *tapCount`

`@synthesize tapCount=_tapCount`

使用新的编译器，您只需要声明属性并为您生成“下划线 ivars”。

所以我想你有两个选择，

1.  更改您的编译器以匹配新的编译器（LLVM 4.1）
2.  手动合成这些属性

（第一个更快）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T15:29:29.480

就扔自己吧。例如，在所有内容的前面，第一行应该是 self.tapCount 而不是 _tapCount。

# java - 许多 JButton 的一个 ActionListener

> ID：13788399
> 
> 赞同：5
> 
> 时间：2012-12-09T14:39:36.683
> 
> 标签：java, swing, jbutton, actionlistener

我想`ActionListener`在一组按钮中添加一个。有没有包装按钮的类？类似的东西`GroupJButtons`或更一般的东西组对象？所以我可以`ActionListener`为所有这些设置一个。毕竟我并不关心按下了哪些按钮，我只想更改他的文本，所以我需要做的就是将其转换为 a`JButton`并更改文本。

整个过程将减少 1 或 2 中的代码行（以防您使用循环），但我想这样做，因为它在逻辑上听起来更好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T14:44:23.133

在这种情况下，您可以扩展 AbstractAction 类并简单地将相同的操作应用于许多按钮。

```
 class MyAction extends AbstractAction {
       public MyAction(String text, ImageIcon icon,
                  String desc, Integer mnemonic) {
       super(text, icon);
       putValue(SHORT_DESCRIPTION, desc);
        putValue(MNEMONIC_KEY, mnemonic);
   }
   public void actionPerformed(ActionEvent e) {
        //do the action of the button here
    }
  } 
```

然后，对于您希望发生相同事情的每个按钮，您可以：

```
 Action myAction = new MyAction("button Text", anImage, "Tooltip Text", KeyEvent.VK_A);
 button = new JButton(myAction); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T14:41:57.917

您可以使用它来创建每个按钮

```
private JButton createButton(String title, ActionListener al) {
    JButton button = new JButton(title);
    button.addActionListener(al);
    return button;
} 
```

这是处理动作

```
public void actionPerformed (ActionEvent ae) {
    JButton button = (JButton)ae.getSource();
    button.setText("Wherever you want");
} 
```

# cakephp - CakePHP 中的荷兰语本地化（日期等）？

> ID：13788401
> 
> 赞同：0
> 
> 时间：2012-12-09T14:39:51.773
> 
> 标签：cakephp, localization, cakephp-2.1

我已经在文件中使用了`setLocale(LC_TIME, "nl_NL")`和，但它们似乎都不起作用。请注意，我不想翻译任何内容（这是我在搜索此内容时经常遇到的内容），因为该网站将完全使用荷兰语。我只想要本地化，包括例如月份名称和其他内容。有没有一种简单的方法可以做到这一点？`setLocale(LC_ALL, "nl_NL")``bootstap.php`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:41:36.403

你检查 setlocale() 的返回值了吗？只有当您尝试设置的语言环境在您的服务器上实际可用时，它才会起作用。在终端中使用`locale -a`以检查可用的语言环境。还可以查看[CakePHP 手册](http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html#localization-in-cakephp)了解如何在 Cake 中完成本地化。您可以将 TimeHelper 和 NumberHelper 用于本地化时间和货币。TimeHelper 需要您的语言环境的 LC_TIME 文件。

# java - 如何修复Android中某些特殊字符周围的间距？

> ID：13788402
> 
> 赞同：1
> 
> 时间：2012-12-09T14:39:51.423
> 
> 标签：java, android, fonts

某些特定字符（例如`♭♯`）在 Android 中显示效果不佳。这些角色的前后都有很大的空间。如何避免这种情况？

不要混淆`♭♯`与`b#`，因为那样间距是正确的。但要完美，我想要扁平而尖锐的角色。

# c# - 业务层 (BLL) 数据访问层 (DAL) 和 UI 之间的通用结构？

> ID：13788411
> 
> 赞同：4
> 
> 时间：2012-12-09T14:40:57.320
> 
> 标签：c#, .net, user-interface, data-access-layer, business-layer

我希望我的所有层 BLL、DAL 和 UI 共享类（具体或接口）。

这真的是一个坏习惯吗？

我不想从我的 DAL 方法返回数据表，而是返回 BLL 可以直接使用的对象。

我想要一个单独的 VS 项目，其中包含所有层都应该知道的类。

示例：我想定义一个所有层都应该知道的很多类。UI 应该能够接收批次类，以便显示或使用户能够提交要处理的批次。此外，DAL 应该能够使用批次类查询数据库并返回它们。另一方面，BLL 应该获得这些批次并将业务规则应用于它们。

如果这是完全错误的，还有哪些选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T19:06:31.083

> 我希望我的所有层 BLL、DAL 和 UI 共享类（具体或接口）。

这取决于什么类型的类。如果您需要它们来访问公共域实体，那么当然可以。

重要的部分是您**允许**这些层对这些类做什么。您的客户端/UI 层不应该通过一些集中的业务逻辑来修改域实体（并保留它们）。这意味着您的用户界面不应访问您的 DAL，尽管它们都可以共享通用实体、接口等......

一种常见的方法是这样的：

> UI -> BLL -> DAL -> 持久性存储（数据库、文件等...）

这些层中的每一层都可以访问公共类。只要 UI 不能直接访问 DAL，就应该没问题。为此，您有几个选择：

*   使 BLL 可通过服务（WCF 等）访问
*   将 DAL 和 BLL 放在同一个项目中，并将 DAL 设置为内部，以便只有 BLL 可以访问它

你最终会得到类似的东西：

> UI -> 服务 -> BLL -> DAL -> 持久性存储（数据库、文件等...）

我强烈推荐Martin Fowler[的企业应用架构模式。](https://rads.stackoverflow.com/amzn/click/com/0321127420)它将为您分层应用程序提供良好的基础。

> 我不想从我的 DAL 方法返回数据表，而是返回 BLL 可以直接使用的对象。

这是个好主意。这就是[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)的想法发挥作用的地方。DAL 通常会知道如何与 DB 对话，并且 DAL 也会知道如何将特定于 DB 的结构转换为您的域模型。域实体进出 DAL。在 DAL 中，域实体在持久化数据时被转换为特定于 DB 的结构。反之亦然：当 BLL 请求数据时，DAL 检索数据并将其转换为域实体，然后再将其传回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T19:15:29.580

为了快速回答您的问题，人们通常会创建[POCO](https://stackoverflow.com/questions/250001/poco-definition)类和/或[DTO](http://msdn.microsoft.com/en-us/library/ff649585.aspx) 对象以在 DAL <-> BLL 之间进行通信

# php - PHP中带有外来字符的SEO友好URL

> ID：13788412
> 
> 赞同：0
> 
> 时间：2012-12-09T14:41:02.470
> 
> 标签：php, url, encoding, utf-8, seo

为了 SEO 目的，我将一些用户提供的内容放在我的 URL 中，使用以下代码对其进行清理：

```
/**
* Create URL friendly strings or filenames
* @param type $str
* @param type $replace
* @param type $delimiter
* @return type
*/
public static function toAscii($str, $replace=array(), $delimiter='-') {
  if(!empty($replace)) {
    $str = str_replace((array)$replace, ' ', $str);
  }
  $clean = iconv('UTF-8', 'ASCII//TRANSLIT', $str);
  $clean = preg_replace("/[^a-zA-Z0-9\/_|+ -]/", '', $clean);
  $clean = strtolower(trim($clean, '-'));
  $clean = preg_replace("/[\/_|+ -]+/", $delimiter, $clean);
  return $clean;
} 
```

然而，我发现这还不够。一篇带有一些希伯来字符的文章给了我：

> iconv()：在输入字符串中检测到非法字符

是否有一个灵丹妙药的功能可以安全地将字符串变成漂亮的 URL？至少我希望它不会崩溃。然后，如果 URL 仍然看起来不错并且对 SEO 友好，那就太好了。

今天是希伯来语，但明天可能是俄语、汉语、克林贡语……

# php - 如何在 PHP 中检索当前的 windows 代码页

> ID：13788415
> 
> 赞同：0
> 
> 时间：2012-12-09T14:41:40.070
> 
> 标签：php, utf-8, locale

PHP 中存在一个错误，它会在上传时破坏文件名 - 请参阅[http://bugs.php.net/bug.php?id=47096](http://bugs.php.net/bug.php?id=47096)。因此，我使用一个函数将文件名转换为正确的 UTF8。

功能的核心是：

```
 if ( 'WIN' == substr( PHP_OS, 0, 3 ) ) {
            $codepage = 'Windows-' . trim( strstr( setlocale( LC_CTYPE, 0 ), '.' ), '.' );
            if ( function_exists( 'iconv' ) ) {
                    $filename = iconv( 'UTF-8', $codepage, $filename );
            } elseif ( function_exists( 'mb_convert_encoding' ) ) {
                    $filename = mb_convert_encoding( $filename, 'UTF-8', $codepage );
            }
    } 
```

这适用于较旧的 PHP 版本（<5.2）。但是对于最近的 PHP 版本，该命令

```
setlocale( LC_CTYPE, 0 ) 
```

返回 '​​C' - 这显然不是 Windows 代码页，因此转换失败。

是否有可靠或替代方法来检索 PHP 中的当前 Windows 代码页？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T14:50:14.457

有趣的是它适用于旧版本的 PHP。如果没有显式设置语言环境，则返回值`C`表示尚未设置语言环境并且正在使用默认值。

您可以调用`setlocale( LC_CTYPE, '' )`which 将强制将语言环境显式设置为默认系统语言环境。使用空字符串调用方法的返回值应该是新设置的语言环境（而不是使用 0 调用并期望语言环境被查询并返回给您而不修改）。

空字符串是一种将当前语言环境显式设置为默认值的方法，而不是仅仅查询它。

# delphi - 需要 TFrame 子级的 OnCreate 事件

> ID：13788418
> 
> 赞同：3
> 
> 时间：2012-12-09T14:42:00.817
> 
> 标签：delphi, delphi-7

我在 Delphi 7 中遇到框架和继承问题。

`visible=false`假设我用（在设计时）定义了一个框架。现在我将这个框架嵌入到某个表单中，并设置`visible=true`在表单内框架的嵌入实例上（也在设计时）。

现在假设我想根据在设计时设置的可见属性初始化嵌入框架。问题是简单地覆盖框架的构造函数不起作用，因为在构造函数中我总是得到`visible=false`（我猜是因为尚未读取 DFM 属性）。我也不想把初始化代码放在Form单元里面，因为这个逻辑只属于Frame。

处理此类案件的最佳经验法则是什么？

**澄清** `Frame.Visible`只是一个例子。该问题与在设计时设置的框架或其内部组件的所有其他属性相关。例如，假设我们正在讨论 Frame 内 TEdit 的颜色。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T04:26:31.513

您不能在构造函数中编写对属性敏感的代码，因为正如您所指出的，当构造函数运行时，还没有必要读取 DFM 属性。相反，覆盖`Loaded`框架类的方法并将代码放在那里。在从 DFM 加载属性后调用它。

添加注意，`Visible`不适用于该技术，但其他属性可以。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T15:01:20.660

Visible 属性在设计时被忽略。所有关于可见的信息都只存储在 Frame 的 dfm 中。在使用框架的表单中将实例的可见性设置为 true 不会存储在表单的 dfm 中。手动添加它没有帮助，它会在下次保存时被忽略并删除。

澄清后，它可以显示为例如属性颜色。在设计时创建了一个框架颜色 clBlack，在 Form used 2 Frames 中，颜色设置为 clRed 和 clBlue。

```
unit Unit7;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TCallOnCreate=Procedure(Sender:TObject) of object;

  TFrame7 = class(TFrame)
    Button1: TButton;
    Procedure Loaded;override;
  private
    { Private-Deklarationen }
  public
    { Public-Deklarationen }
    Public Constructor Create(AOwner:TComponent);Override;
  end;

implementation
uses RTTI;
{$R *.dfm}

{ TFrame7 }

constructor TFrame7.Create(AOwner: TComponent);
var
   ToCall    : TCallOnCreate;
   Routine : TMethod;
begin

  inherited;
     Showmessage('Created ' + IntToStr(Color));

   Routine.Data := Pointer(AOwner);
   Routine.Code := AOwner.MethodAddress('InfoOnFrameCreate');
   if Assigned(Routine.Code) then
      begin
        ToCall:= TCallOnCreate(Routine);
        ToCall(Self);
      end;

end;

procedure TFrame7.Loaded;
begin
  inherited;
    Showmessage('Loaded ' + IntToStr(Color));
end;

end. 
```

通过以下示例，如何在将使用 Frame 的窗体中实现代码。

```
unit Unit6;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, Unit7;

type
  TForm6 = class(TForm)
    Frame71: TFrame7;
    Procedure InfoOnFrameCreate(Sender:TObject);
  private

    { Private-Deklarationen }
  public

    { Public-Deklarationen }
  end;

var
  Form6: TForm6;

implementation

{$R *.dfm}

{ TForm6 }

procedure TForm6.InfoOnFrameCreate(Sender: TObject);
begin
  Showmessage('Frame Created');
end;

end. 
```

# php - CodeIgniter：分离管理员、用户和合作伙伴站点

> ID：13788424
> 
> 赞同：1
> 
> 时间：2012-12-09T14:42:46.180
> 
> 标签：php, codeigniter, codeigniter-2

我的 CodeIgniter Web 应用程序必须分为三大部分：

1.  管理员 - 无限制地编辑、删除和创建数据
2.  用户 - 只读
3.  合作伙伴 - 对编辑数据的访问受限，不能删除，不能创建

所有部分相互独立，但使用相同的数据库。

我的问题是 - 将它们分开的最佳方法是什么？

我看到两种可能的方法：

1.  控制器目录中的子文件夹。不好 - 如果我创建一个 Admin 子文件夹，我将无法执行类似 admin/events/controller_name.php 或 admin/places/controller_name.php 之类的操作。如果没有这样的分离，那将是一团糟。
2.  子域上的单独应用程序（admin.sitename.com/、partner.sitename.com/）。也不是很好 - 我将不得不复制所有模型（在所有情况下都是相同的）、库等。

有没有更好的方法来做到这一点？如果我能以某种方式使用不同的控制器集并且只使用一组模型/库，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:03:41.793

每个单独的控制器库。

*   用户 - 普通控制器
*   管理员 - admin_controller 扩展控制器
*   合作伙伴 - partner_controller 扩展控制器

在这里阅读：http: [//philsturgeon.co.uk/blog/2010/02/CodeIgniter-Base-Classes-Keeping-it-DRY](http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-Base-Classes-Keeping-it-DRY)

控制器和视图中的单独文件夹以保持功能分开。使用您的路线对您到达每个路线的方式进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T20:01:40.810

domain.com/admin/page/231

domain.com/user/page/231

domain.com/partner/page/231

你甚至不必路由它——会自动转到不同的类——它们可以共享相同的模型。还 - 通过调用方法（可能在模型中）在类构造函数中进行登录验证，例如 IF $this->login_model->verifyAdmin() 这样您就可以稍后更改 verifyAdmin() 的机制，而您不会必须更改类构造函数中的任何内容。

# java - ListActivty 中使用的适配器出现 IllegalStateException

> ID：13788429
> 
> 赞同：0
> 
> 时间：2012-12-09T14:43:39.603
> 
> 标签：java, android, android-arrayadapter, listactivity

我遇到了一个问题，在调用`ListActivity`我猜的时候，它告诉我系统功能之前不起作用`onCreate`。我看到这`onCreate`被称为（根据我的代码），但它给了我一个`IllegalStateException`我以前从未处理过的。顺便说一句，我正在使用`SherlockListActivity`. 这是我的代码：

```
 public class MenuActivity extends SherlockListActivity {
    ListView scroll;
    int time;       

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);         
        scroll = this.getListView();
        this.setListAdapter(new MyAdapter());           
    }

    public View find(int x){
        return findViewById(x);
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        switch (position){
        case (0):{
            Toast.makeText(getApplicationContext(), "Hello you just chose \"Splash\"", Toast.LENGTH_SHORT).show();
        }break;
        case (1):{
            Toast.makeText(getApplicationContext(), "Its another one here !", Toast.LENGTH_SHORT).show();
        }break;
        case (2):{
            Toast.makeText(getApplicationContext(), String.valueOf(id) +" and "+ position, Toast.LENGTH_SHORT).show();

        }break;
        }

    }

    public void showToast(String toast){
        Toast.makeText(getApplicationContext(), toast, Toast.LENGTH_SHORT).show();
    }

}

class MyAdapter extends ArrayAdapter<String>{       

    LayoutInflater inf = LayoutInflater.from(this.getContext());

    public MyAdapter() {
        super(new MenuActivity() , 0 ,stringArray);
        // TODO Auto-generated constructor stub
    }

    public static String[] stringArray= new String[]{"Splash"   , "Another Example" , "Future Checkable"};

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        if (convertView == null){
            inf.inflate(R.layout.normal_row, parent , false);
        }
        switch(position){
        case(0):
            convertView = (LinearLayout) inf.inflate(R.layout.row_switch, parent,false);

            break;
        }

        return super.getView(position, convertView, parent);
    }

} 
```

还有我的堆栈跟踪：

```
 12-09 16:19:45.144: E/AndroidRuntime(28754): FATAL EXCEPTION: main
12-09 16:19:45.144: E/AndroidRuntime(28754): java.lang.RuntimeException: Unable to start activity ComponentInfo{seaskyways.testingproject/seaskyways.testingproject.MenuActivity}: java.lang.IllegalStateException: System services not available to Activities before onCreate()
12-09 16:19:45.144: E/AndroidRuntime(28754):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-09 16:19:45.144: E/AndroidRuntime(28754):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-09 16:19:45.144: E/AndroidRuntime(28754):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-09 16:19:45.144: E/AndroidRuntime(28754):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-09 16:19:45.144: E/AndroidRuntime(28754):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-09 16:19:45.144: E/AndroidRuntime(28754):    at android.os.Looper.loop(Looper.java:137)
12-09 16:19:45.144: E/AndroidRuntime(28754):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-09 16:19:45.144: E/AndroidRuntime(28754):    at java.lang.reflect.Method.invokeNative(Native Method)
12-09 16:19:45.144: E/AndroidRuntime(28754):    at java.lang.reflect.Method.invoke(Method.java:511)
12-09 16:19:45.144: E/AndroidRuntime(28754):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-09 16:19:45.144: E/AndroidRuntime(28754):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-09 16:19:45.144: E/AndroidRuntime(28754):    at dalvik.system.NativeStart.main(Native Method)
12-09 16:19:45.144: E/AndroidRuntime(28754): Caused by: java.lang.IllegalStateException: System services not available to Activities before onCreate()
12-09 16:19:45.144: E/AndroidRuntime(28754):    at android.app.Activity.getSystemService(Activity.java:4463)
12-09 16:19:45.144: E/AndroidRuntime(28754):    at android.widget.ArrayAdapter.init(ArrayAdapter.java:310)
12-09 16:19:45.144: E/AndroidRuntime(28754):    at android.widget.ArrayAdapter.<init>(ArrayAdapter.java:128)
12-09 16:19:45.144: E/AndroidRuntime(28754):    at seaskyways.testingproject.MyAdapter.<init>(MenuActivity.java:82)
12-09 16:19:45.144: E/AndroidRuntime(28754):    at seaskyways.testingproject.MenuActivity.onCreate(MenuActivity.java:26)
12-09 16:19:45.144: E/AndroidRuntime(28754):    at android.app.Activity.performCreate(Activity.java:5104)
12-09 16:19:45.144: E/AndroidRuntime(28754):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-09 16:19:45.144: E/AndroidRuntime(28754):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-09 16:19:45.144: E/AndroidRuntime(28754):    ... 11 more 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:51:00.740

不要将 new 实例`Activity`化为`Context`您的适配器，而是传递`this`您实例化适配器的位置：

```
LayoutInflater inf; 

public MyAdapter(Context context) {
    super(context, 0 ,stringArray);
    inf = LayoutInflater.from(context);
} 
```

并在`MenuActivity`'`onCreate`方法中：

```
this.setListAdapter(new MyAdapter(this)); 
```

此外，在您的`getView()`方法中`convertView`，通过 super 调用返回而不是视图返回：

```
return convertView; 
```

# android - webview 不会在 onClick 加载

> ID：13788432
> 
> 赞同：1
> 
> 时间：2012-12-09T14:44:09.173
> 
> 标签：android, button, webview, onclick

我有 2 个按钮，分别加载 2 个不同的 html 网站。

```
public class Information extends Activity implements OnClickListener {

Button b1, b2 ;
private WebView webview;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.info);

    b1=(Button) findViewById(R.id.b1);
    b2=(Button) findViewById(R.id.b2);

    b1.setOnClickListener(this);
    b2.setOnClickListener(this);

    webview=(WebView) findViewById(R.id.webview);
    webview.setWebViewClient(new WebViewClient(){

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url)
    {
        view.loadUrl(url);
        return true;

    }

    });

}

@Override
public void onClick(View v){

    switch(v.getId()) {

    case R.id.b1:
        showOne();
        break;

    case R.id.b2:
        showTwo();
        break;

    }

}

public void showOne(){
    webview.loadUrl("some url");

    }

public void showTwo() { 
    webview.loadUrl("some url here");
} 
```

}

这会导致强制应用程序结束的错误。当我删除 webview 部分时，按钮会被显示，但是当我单击它们时没有任何反应。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:58:45.777

检查 R.layout.info 中有一个名为 webview 的 webview 吗？

webview=(WebView) findViewById( **R.id.webview** ); 编译器找不到这个 webview。

并尝试添加 , com.yourpackagename.R;

# mysql - Mysql - 查找仅由两个用户进行的对话

> ID：13788433
> 
> 赞同：2
> 
> 时间：2012-12-09T14:44:13.910
> 
> 标签：mysql, sql, count, having

我有一个名为参与者的表，其中包含以下字段：

*   ID
*   用户身份
*   对话ID

背景是至少有两个或更多参与者的对话。我想查找仅由两个指定用户进行的对话，对话中没有其他用户。

我想出了以下几点：

```
SELECT * 
FROM participants
WHERE user_id = 1 OR user_id = 2
GROUP BY conversation_id
HAVING COUNT(*) = 1 
```

鉴于此内容

![参与者表图像](../Images/65a3405c12fd202f93a62787e93ac9c5.png)

您可以看到用户 1 和 2 与用户 3 共享一个对话（对话 1），但也有一个单独的对话（对话 2）。

上面的查询实际上返回了正确的conversation_id（即2）-但我不确定查询是否正确。当我说它`HAVING COUNT(*) = 2`返回对话 1 时，我不知道为什么。直觉上，我使用了 count - 如果设置为 1，它似乎可以工作 - 但我不确定它在这种情况下会做什么。

查询是否正确？如果是这样，为什么？如果没有，我需要更改什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T14:46:19.960

使用您的查询将不起作用，因为该`where`子句过滤掉了 user_ids。采用

```
SELECT * FROM participants
GROUP BY conversation_id
HAVING sum(user_id not in (1,2)) = 0 
```

`user_id not in (1,2)``1`如果`user_id`不是`1,2`在对话中，则返回，`0`否则返回。所以使用`SUM`你可以加起来所有的情况。如果没有找到，则总和为`0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-03T20:52:54.143

```
select conversation_id
from participants
where user_id in (1,2)
group by conversation_id
having count(user_id) = 2 
```

返回两个用户的conversation_id

# vba - 未从收件箱中读取所有邮件

> ID：13788436
> 
> 赞同：1
> 
> 时间：2012-12-09T14:44:38.080
> 
> 标签：vba, outlook

请参阅下面的代码。我编写的子程序应该查看今天收到的所有电子邮件，并且只移动那些主题为“每日统计”的电子邮件。我特意给自己发了两封主题为“每日统计”的电子邮件。收件箱中还有另一封没有适当主题的电子邮件。总共有三封电子邮件。当 Sub MoveHarpStatMail 运行时，它只移动主题为“每日统计”的正确电子邮件之一。另一个似乎被忽略了。我的过滤器串有什么问题吗？我在另一个子程序中使用了完全相同的过滤器字符串，它在那里工作得非常好，阅读了今天收到的所有电子邮件。我想我需要另一双能指出我哪里出错的眼睛。

艾伦

```
Public StatsArchiveFolder As Outlook.Folder
'StatsArchiveFolder is set elsewhere in another subroutine
Public Const SubjectTitle As String = "daily stats"
_______________________________________________

Sub MoveHarpStatMail()

Dim olapp As Outlook.Application
Dim olappns As Outlook.NameSpace
Dim oitem As Object
Dim ItemsToProcess As Outlook.Items
Dim myFolder As MAPIFolder
Dim sFilter As String
Dim tempMailItem As Outlook.MailItem

On Error GoTo LocalErr

'set outlook objects

Set olapp = New Outlook.Application
Set olappns = olapp.GetNamespace("MAPI")
Set myFolder = olappns.GetDefaultFolder(olFolderInbox)
'Filter for only MailItems received today
sFilter = "[ReceivedTime] >= " & AddQuotes(Format(Date, "ddddd"))
Set ItemsToProcess = Session.GetDefaultFolder(olFolderInbox).Items.Restrict(sFilter)

For Each oitem In ItemsToProcess
 If TypeName(oitem) = "MailItem" Then
   Set tempMailItem = oitem
   Debug.Print tempMailItem.Subject
   If CheckSubject(tempMailItem.Subject) Then
     MoveToArchiveFolder tempMailItem
   End If
 End If
Next oitem

ExitProc:
Set olapp = Nothing
Set olappns = Nothing
Set myFolder = Nothing
Set ItemsToProcess = Nothing

Exit Sub

LocalErr:
    If Err.Number <> 0 Then
     Msg = "Sub MoveHarpStatMail" & vbCrLf & "Error # " & Str(Err.Number) & " was generated by " _
         & Err.Source & Chr(13) & "Error Line: " & Erl & Chr(13) & Err.Description
     MsgBox Msg, , "Error", Err.HelpFile, Err.HelpContext
     End If
End Sub

____________________________________________

Private Function AddQuotes(MyText) As String
  AddQuotes = Chr(34) & MyText & Chr(34)
End Function

_______________________________________________

Sub MoveToArchiveFolder(Item As Outlook.MailItem)

    If StatsArchiveFolder Is Nothing Then
      MsgBox ("The ArchiveFolder object is not set.")
    End If

    Item.Move StatsArchiveFolder

End Sub
________________________________________________

Function CheckSubject(Subject As String) As Boolean

  If LCase(Trim(Subject)) = LCase(Trim(SubjectTitle)) Then
    CheckSubject = True
  Else
    CheckSubject = False
  End If

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:54:21.887

我怀疑你的循环“过早地”退出，因为你的循环每次都递增，并且你同时递减堆栈（`ItemsToProcess`），所以你自然会跳过大约一半的项目。
为避免这种情况，您可以使用以下方法从顶部循环到底部：

```
For i = ItemsToProcess.Count To 1 Step -1 
```

并`i`用作引用 MailItems 的索引。

# ios - 错误：无法分配区域

> ID：13788438
> 
> 赞同：0
> 
> 时间：2012-12-09T14:44:43.527
> 
> 标签：ios, opengl-es

好吧，我在这里碰壁了。

我不知道为什么我的 Xcode 4.5.2 说我在崩溃前使用了 4.16 GB 内存：

```
ExampleEngine(11672,0xac70f2c0) malloc: *** mmap(size=4160753664) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug 
```

我使用 Instruments - Leaks & Allocations 运行了我的 OpenGL ES 应用程序。它显示我使用的分配内存总量为 1.46 MB Live Bytes。

我正在尝试遵循 Ian Terrel 的 OpenGL ES 教程：

[http://games.ianterrell.com/how-to-draw-2d-shapes-with-glkit-part-2/](http://games.ianterrell.com/how-to-draw-2d-shapes-with-glkit-part-2/)

我被`EERegularPolygon`课程的最后一部分困住了（所有以前的形状，如三角形、矩形、椭圆都工作得很好）。我的代码是这样的（与他的略有不同，因为我使用的是 Xcode 4.5.2 的 auto `@synthesize`）：

```
// EERegularPolygon.h file
#import "EEShape.h"

@interface EERegularPolygon : EEShape

@property (readonly) int numSides;
@property (nonatomic) float radius;

-(id)initWithNumSides:(int)numSides;

@end

// EERegularPolygon.m file
#import "EERegularPolygon.h"

#define M_TAU (2 * M_PI)

@implementation EERegularPolygon

-(id)initWithNumSides:(int)numSides
{
    self = [super init];

    if(self)
    {
        _numSides = numSides;
    }

    return self;
}

-(void)updateVertices
{    
    for(int i = 0; i < self.numSides; i++)
    {
        float theta = ((float) i) / self.numSides * M_TAU;
        self.vertices[i] = GLKVector2Make(cos(theta) * self.radius, sin(theta) * self.radius);
    }
}

-(void)setRadius:(float)radius
{
    _radius = radius;

    [self updateVertices];
}

@end

// HexagonScene.h file
#import "EEScene.h"
#import "EERegularPolygon.h"

@interface HexagonScene : EEScene
{
    EERegularPolygon *polygon;
}

@end

// HexagonScene.m file
#import "HexagonScene.h"

@implementation HexagonScene

-(id)init
{
    self = [super init];

    if(self)
    {
        polygon = [[EERegularPolygon alloc] initWithNumSides:6];
        polygon.radius = 1;
    }

    return self;
}

-(void)render
{
    [super render];

    [polygon render];
}

@end

// AppDelegate DidFinishLaunchingWithOptions: method
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    EAGLContext *context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];
    [EAGLContext setCurrentContext:context];

    GLKView *view = [[GLKView alloc] initWithFrame:[[UIScreen mainScreen] bounds] context:context];
    view.delegate = self;

    GLKViewController *controller = [[GLKViewController alloc] init];
    controller.delegate = self;
    controller.view = view;

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.rootViewController = controller;
    [self.window makeKeyAndVisible];

    scene = [[HexagonScene alloc] init];
    scene.left = -3;
    scene.right = 3;
    scene.bottom = -2;
    scene.top = 2;
    scene.clearColor = GLKVector4Make(0.25, 0.25, 0.25, 1.0);

    return YES;
} 
```

任何人都知道为什么 Xcode 报告试图分配 4.16 GB 的内存？

我也尝试为该类手动编写 get 和 set 方法，`EERegularPolygon`但这也没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:07:56.110

好的，在尝试调试问题后，我神奇地偶然发现了解决方案。

首先是两个变化：

1）我忘了覆盖以下方法：

```
-(int)numVertices 
{ 
    return self.numSides 
} 
```

2) 阻止应用程序崩溃并显示六边形形状的一行是 NSLog() 行：

```
-(id)initWithNumSides:(int)numSides
{
    self = [super init];

    if(self)
    {
        _numSides = numSides;

        // ---------------------------------
        // IF THIS LINE IS COMMENTED OUT,
        // THE APP CRASHES, 
        //
        // BUT IF THE LINE IS NOT COMMENTED
        // THE APP WORKS, THE HEXAGON IS
        // RENDERED TO SCREEN AS DESIRED
        //
        // I WANT TO KNOW WHY :(
        // ---------------------------------
        NSLog(@"M_TAU = %lf", M_TAU);
    }

    return self;
} 
```

在上面的代码行中实际调用 #define 预处理器指令之前，一定有一些我不明白的地方。

任何 C 或 Objective C 大师可以解释一下吗？

我也会挖掘谷歌，看看我是否能理解为什么在上面的代码中调用 NSLog 之前#define 无法工作。

除非它是编译器或 Xcode 的错误，否则看起来很荒谬。

## 编辑

好的，进一步发现，并不是#define 被破坏了，我需要在初始化中像这样调用 M_TAU 常量：

```
NSLog(@"M_TAU = %lf", M_TAU); 
```

出于某种奇怪的原因，我似乎需要在我的 init 函数中有一行 NSLog ，任何东西。

# count - 数位数的最简单方法

> ID：13788442
> 
> 赞同：0
> 
> 时间：2012-12-09T14:45:26.223
> 
> 标签：count, numbers, counting, digits

最近，在 Java 中以编程方式进行打印机布局时，我偶然发现了对齐某些数字并将它们右对齐的问题，我需要计算每个数字中的位数。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:45:26.223

当我对如何最简单地做到这一点的算法感到头疼时，我的一个朋友指出了一个非常简单的解决方案：只需将数字放入一个字符串并计算它的长度;-)。无需用数学公式让自己变得困难！以 Java 为例：

```
String number_s = ""+number;
int digits = number_s.length(); 
```

这也可以应用于十进制数，在分隔分隔符（通常是 . 或 ,）上拆分字符串之后。

希望我至少可以节省一些时间。

# python - PyQt：如何在没有继承的情况下处理事件

> ID：13788452
> 
> 赞同：6
> 
> 时间：2012-12-09T14:46:57.607
> 
> 标签：python, events, pyqt, pyqt4, handler

如何在没有继承的情况下处理鼠标事件，用例可以描述如下：

假设我想让 QLabel 对象为 handel `MouseMoveEvent`，教程中的方式通常是我们创建一个继承自 QLabel 的新类。但是我可以只使用 lambda 表达式来处理没有继承的事件，就像

```
ql = QLabel()
ql.mouseMoveEvent = lambda e : print e.x(), e.y() 
```

所以我不需要编写一个完整的类，只需使用简单的 lambda 表达式来实现一些简单的事件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-09T16:59:32.167

最灵活的方法是安装一个可以代表对象接收事件的[事件过滤器：](https://qt-project.org/doc/qt-4.8/qobject.html#installEventFilter)

```
from PyQt4 import QtGui, QtCore

class Window(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.label = QtGui.QLabel(self)
        self.label.setText('Hello World')
        self.label.setAlignment(QtCore.Qt.AlignCenter)
        self.label.setFrameStyle(QtGui.QFrame.Box | QtGui.QFrame.Plain)
        self.label.setMouseTracking(True)
        self.label.installEventFilter(self)
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.label)

    def eventFilter(self, source, event):
        if (event.type() == QtCore.QEvent.MouseMove and
            source is self.label):
            pos = event.pos()
            print('mouse move: (%d, %d)' % (pos.x(), pos.y()))
        return QtGui.QWidget.eventFilter(self, source, event)

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.show()
    window.resize(200, 100)
    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T16:54:11.547

是的，你可以这样做，但是在 python2 中你不能`print`在你的 lambda 中使用，因为它是一个语句而不是一个函数并且不返回一个值。

试试这个：

```
ql = QLabel()
def event_handler(e):
    print e.x(), e.y()
ql.mouseMoveEvent = event_handler 
```

# eclipse - dyld：Mac 上 Eclipse Nsight 上的库未加载错误

> ID：13788457
> 
> 赞同：0
> 
> 时间：2012-12-09T14:47:39.453
> 
> 标签：eclipse, cuda, nvcc, dyld, nsight

我已经在我的 iMac 上安装了 Cuda 5.0（预生产版本），它有一个支持 NVIDIA GeForce 9400 Cuda 的 GPU。使用捆绑的 Eclipse Nsight，我创建了一个项目并成功构建它。但是，当我尝试运行它时，Eclipse 会向我显示以下错误消息：

> dyld：库未加载：@rpath/libcudart.dylib 引用自：/Users/home/cuda-workspace/sample_project/Release/sample_project
> 原因：找不到图像

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:14:15.017

1.  请使用 CUDA SDK 的生产版本。
2.  请注意，Nsight 应该从 shell 运行，从 finder 中双击应用程序包时它不起作用。

这是在 5.0 生产版本中启动 Nsight 的 shell 脚本：

```
#!/bin/sh
PATH=$PATH:/usr/local/cuda-5.0/bin LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda-5.0/lib:/usr/local/cuda-5.0/lib64 UBUNTU_MENUPROXY=0 LIBOVERLAY_SCROLLBAR=0 /usr/local/cuda-5.0/libnsight/nsight $@ 
```

# c# - 如何绑定事件组合框-TextBox

> ID：13788463
> 
> 赞同：1
> 
> 时间：2012-12-09T14:48:14.157
> 
> 标签：c#, event-handling, dynamic-controls

我有一个关于某事的计算并像这样动态地创建一个表格。

```
 comboboxAdet.Size = new System.Drawing.Size(100, 300);
            comboboxAdet.Location = new System.Drawing.Point(515, 5);
            comboboxAdet.Margin = new Padding(2, 3, 2, 3);
            comboboxAdet.SelectedIndexChanged += new EventHandler(combobox_SelectedindexChanged);
            /**************************************************/
            TextBox textSatirtoplam = new TextBox();
            textSatirtoplam.Text = satirhesapla(i);
            textSatirtoplam.Name = "labelSatirToplam" + i.ToString();
            textSatirtoplam.Size = new System.Drawing.Size(100, 300);
            textSatirtoplam.Location = new System.Drawing.Point(630, 5);
            textSatirtoplam.MouseClick += new MouseEventHandler(combobox_SelectedindexChanged);
            textSatirtoplam.Visible = true; 
```

问题是当我更改comboxBoxSelected 项目时如何更改文本框。我尝试了事件处理程序但失败了。这意味着如何到达文本框？

![在此处输入图像描述](../Images/90b18d4eb366d2ba194960aee6e7f99b.png)

如果你帮助我，我会真的很开心！谢谢，我希望很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:08:17.700

如果我正确理解了您的问题，您希望更新与`SelectIndexChanged`事件发生在同一行的文本框。

您可以使用委托并将闭包传递给您的事件以获取对文本框的引用。

```
var combox = new ComboBox();
// code left out

var txtBox = new TextBox();
// code left out

combox.SelectedIndexChanged += delegate(Object sender, EventArgs e)
{
    var destTextBox = txtBox;  // important assign closure to a local variable.
    var srcCombo = (ComboBox) sender;

    destTextBox.Text = srcCombo.SelectedText;
}; 
```

# python - 用列表中的项目替换字符串中的单词

> ID：13788466
> 
> 赞同：0
> 
> 时间：2012-12-09T14:48:42.833
> 
> 标签：python, string, list, enumerate

我正在用 Python 创建一个词云程序，但我被困在一个词替换功能上。我正在尝试用有序列表中的单词替换 html 文件中的一组数字（所以我正在使用字符串）。因此 000 将替换为列表中的第一个单词，001 将替换为第二个单词，依此类推。

下面的方法在通过相对简单的字符串时有效：

```
def textReplace():  
  text = '000 this is 001 some 002 text 003 '
  word = ['foo', 'bar', 'that', 'these']
  for a in word:    
    for y, w in enumerate(text):      
      x = "00"+str(y)
      text = text.replace(x, a)
  print text 
```

我正在处理一个 html 文件（我将文件的一部分放在下面的字符串中），而不是用列表中的连续项目替换 000,001,002 等的每个实例，而是用第一项替换所有数字。为什么此方法适用于上述字符串，但不适用于以下字符串。任何帮助表示赞赏。谢谢！

```
def htmlReplace():
  text = '<p><span class="newStyle0" style="left: 291px; top: 258px">000</span></p> <p><span class="newStyle1" style="left: 85px; top: 200px">001</span></p> <p><span class="newStyle2" style="left: 580px; top: 400px; width: 167px; height: 97px">002</span></p> <p><span class="newStyle3" style="left: 375px; top: 165px">003</span></p>'
  word = ['foo', 'bar', 'that', 'these']
  for a in word:    
    for y, w in enumerate(text):      
      x = "00"+str(y)
      text = text.replace(x, a)
  print text 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T14:56:24.957

像这样的东西最好写成（对于您的非 HTML）：

```
>>> text = '000 this is 001 some 002 text 003'
>>> word = ['foo', 'bar', 'that', 'these']
>>> word_list = iter(word)
>>> import re
>>> re.sub(r'\d+', lambda L: next(word_list), text)
'foo this is bar some that text these' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:46:08.350

不幸的是，对于这类问题，您的方法是完全错误的，因为它们是[模板引擎](http://en.wikipedia.org/wiki/Template_engine_%28web%29)的良好候选者。

您可以尝试使用可用模板引擎的数量，或者我可以建议[Jinja2](http://jinja.pocoo.org/)来满足您的目的这是[Jinja2的示例](http://jinja.pocoo.org/)

```
>>> text = """
{% for style in styles %}
<p><span class="newStyle{{ style.styleno }}"
{% for orin in style.orin %}
style="{{ orin.orin }}: {{ orin.attrib }}px
{% endfor %}
">{{ style.val }}</span></p>
{% endfor %}
"""
>>> styles = [{'no':1,
           "orin":[{"orin":"left", "attrib":291},
               {"orin":"top", "attrib":258}],
           "val":"000"},
           {'no':2,
        "orin":[{"orin":"left", "attrib":100},
            {"orin":"top", "attrib":222},
            {"orin":"height", "attrib":222},
            {"orin":"width", "attrib":222}],
        "val":"001"}]
>>> template = Template(text)
>>> template.render(styles = styles)
u'\n\n<p><span class="newStyle"\n\nstyle="left: 291px\n\nstyle="top: 258px\n\n">000</span></p>\n\n<p><span class="newStyle"\n\nstyle="left: 100px\n\nstyle="top: 222px\n\nstyle="height: 222px\n\nstyle="width: 222px\n\n">001</span></p>\n'
>>> 
```

# c# - 没有 ViewData 错误没有解决方案

> ID：13788473
> 
> 赞同：1
> 
> 时间：2012-12-09T14:49:39.100
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, visual-studio-2010

我收到这个错误

```
There is no ViewData item of type 'IEnumerable<SelectListItem>' that has the key 'CategoryList'. 
```

我已经阅读了关于这个问题的所有其他关于 stackoverflow 的帖子，但我无法解决它！它应该可以工作，因为我创建了一个测试 mvc3 项目做完全相同的事情并且没有问题。

这是控制器代码：

```
 public ViewResult EditProduct(Guid id)
    {
        var product = _repository.Products.FirstOrDefault(x => x.ID == id);

        ViewBag.CategoryList = _repository.Categories.Select(x => new SelectListItem { Text = x.Name, Value = x.ID.ToString(), Selected = productToEdit.ID == x.ID }) as IEnumerable<SelectListItem>;

        return View(product);
    }

    [HttpPost]
    public ActionResult EditProduct(Product productToEdit)
    {
        ViewBag.CategoryList = _repository.Categories.Select(x => new SelectListItem { Text = x.Name, Value = x.ID.ToString(), Selected = productToEdit.ID == x.ID }) as IEnumerable<SelectListItem>;

        if (ModelState.IsValid)
        {
            _repository.SaveProduct(productToEdit);
            TempData["message"] = string.Format("{0} has been saved", productToEdit.Title);
            return RedirectToAction("Product");
        }          

        return View(productToEdit);
    } 
```

这是剃须刀代码：

```
 <span class="field">
         @Html.DropDownList("CategoryList");
    </span> 
```

我也试过：

```
 <span class="field">
         @Html.DropDownList("CategoryList", ViewBag.CategoryList as IEnumerable<SelectListItem>);
    </span> 
```

附带说明一下，在`<span>`内部还有`AjaxBeginForm`对模型的其他调用。

我试过在 CategoryList 前面放一个 _0。那也不应该是个问题。我知道我什至不需要第二个参数类型来转换列表，因为我的测试项目不需要它。我知道我不必使用 ViewModel，因为这应该可以工作，MvcMusicStore 显示它可以工作。

为什么它对我不起作用？

感谢您的帮助，我将不胜感激示例代码，以使我更容易理解。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:39:21.130

使用视图模型：

```
public class ProductViewModel : ViewModelBase
{
    public IEnumerable<Product> Products { get; set; }
    public IEnumerable<SelectListItem> SelectItems { get; set; }
    public Guid SelectedItem { get; set; }
} 
```

在 ActionResult 中使用它：

```
public ActionResult CreateProduct()
{
    var vm = new ProductViewModel()
        {
            SelectItems = _repository.Categories.AsEnumerable().Select(x => new SelectListItem { Text = x.Name, Value = x.ID.ToString() })
        };

    return View("Create", vm);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T19:56:33.577

我已经走到这一步了。

我从一个调用 View EditProduct`ViewResult CreateProduct()`

所以我想我必须通过 ViewBag ！我以为它会通过 EditProduct 初始化？！

代码：

```
 public ViewResult CreateProduct()
    {
        ViewBag.CategoryList = _repository.Categories.Select(x => new SelectListItem { Text = x.Name, Value = x.ID.ToString() });
        return View("EditProduct", new Product());
    } 
```

我猜这行得通！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T15:22:05.383

你可以使用.`Html.DropDownListFor`并且你必须通过 CategoryList 通过`ViewData`.try 以下：

```
<span class="field">
         @Html.DropDownListFor(e=>e.Category , (IEnumerable<SelectListItem>) ViewData["CategoryList"]);
</span> 
```

在控制器中：

```
ViewData["CategoryList"] = _repository.Categories.Select(x =>
new SelectListItem { 
Text = x.Name, Value = x.ID.ToString(), Selected = productToEdit.ID == x.ID }) 
as IEnumerable<SelectListItem>; 
```

# c# - 这是某种形式的换位吗？

> ID：13788476
> 
> 赞同：1
> 
> 时间：2012-12-09T14:49:56.340
> 
> 标签：c#, cryptography

我一直在尝试为基本加密开发一种好的转置方法（不会在现实中使用）

这是否符合要求：

```
for (int k = 0; k < Plaintext.Length; k++) //transpose
{
     Swapchars(ResultArray, k, (key.length * k) % Plaintext.Length); 
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:36:09.217

这仅使用密钥长度，而不是密钥内容。因此`"aaa"`，`"bbb"`密钥将以相同的方式加密。

这是合并关键内容的简单方法（请注意，此代码当然是教育性的。它不是真正的加密货币）：

```
var mulConstant = key.Sum(c => (int)c); //derive constant from key contents
for (int k = 0; k < Plaintext.Length; k++) //transpose
{
     Swapchars(ResultArray, k, (mulConstant * k) % Plaintext.Length); 
} 
```

我们不乘以`key.Length`，而是使用取决于整个键的所有键字符的总和。当您更改任何字符时，整个键都会更改。

仍然存在明显的弱点。密钥`"ab"`和`"ba"`加密方式相同。

# android - Android - SMS - 备份技术

> ID：13788479
> 
> 赞同：0
> 
> 时间：2012-12-09T14:50:12.843
> 
> 标签：android

我正在制作一个将备份所有 SMS 消息的应用程序。

这些是我的选择，

1.  读取每条短信详细信息，然后将其存储到服务器（一个接一个）。

2.  读取每条短信详细信息，然后将其存储到服务器（按批次，如每批次 100 条短信）

最好的方法应该是什么？

在选择 1 上，用户将等到备份完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:54:19.793

*   选择 n°2 以提高效率：读取所有尚未备份的 SMS（您可以保留自己的备份消息数据库，例如 ID + 基于 sms 内容的哈希）并作为大请求发送。缺点：例如，如果手机丢失，您可能会丢失一些短信
*   选择 n°1 安全：收到短信后立即备份。缺点：从连接的角度来看效率较低。

所以它归结为你想为你的用户提供什么。我认为拥有这两个选项不需要更多的代码，所以我只需将其作为偏好设置留给用户：“即时备份”或“计划备份”）。

在第一次运行应用程序时，无论如何我都会发送一批所有现有的 SMS，而不是一个接一个地发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T14:55:26.453

选项 1 需要非常好的互联网连接，并且发送每条消息需要更多时间。选项 2 效率更高，您只需要一个连接和一个对服务器的请求。

# javascript - Javascript 通用字符串类型解析器

> ID：13788484
> 
> 赞同：-1
> 
> 时间：2012-12-09T14:50:35.330
> 
> 标签：javascript, jquery, string-parsing

在 HTML 表单中，我有一个可以在其中输入文本的字段。文本可以是数字、布尔值或字符串。我想要一个函数来读取字符串并将解析的值返回为最适用的类型。使用 jQuery。这是我为此编写的代码。任何意见？

```
var isIntegerRegex = /^\s*(\+|-)?\d+\s*$/,
    isDecimalRegex = /^\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*$/;

function parseVal(value) {
    if ($.type(value) !== "string") {
        return value;
    } else if (value.search(isIntegerRegex) != -1) {
        return parseInt(value,10);
    } else if (value.search(isDecimalRegex) != -1) {
        return parseFloat(value);
    } else if (value.toLowerCase()==="true") {
        return true;
    } else if (value.toLowerCase()==="false") {
        return false;
    } else {
        return value;
    }
} 
```

正则表达式取自： http: [//ntt.cc/2008/05/10/over-10-useful-javascript-regular-expression-functions-to-improve-your-web-applications-efficiency.html](http://ntt.cc/2008/05/10/over-10-useful-javascript-regular-expression-functions-to-improve-your-web-applications-efficiency.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T15:12:35.387

那这个呢：

```
​function parse(string) {
    var number = parseFloat(string);

    if (!isNaN(number)) return number;
    if (string.toLowerCase() === "true") return true;
    if (string.toLowerCase() === "false") return false;
    return string;
}; 
```

# git - 从 Git Bash 终端在 Bitbucket 上创建新的仓库？

> ID：13788485
> 
> 赞同：77
> 
> 时间：2012-12-09T14:50:38.867
> 
> 标签：git, bitbucket

是否可以使用命令行 Git 在 Bitbucket 中创建新的存储库？我尝试了以下方法：

```
git clone --bare https://username@bitbucket.org/username/new_project.git 
```

我收到这条消息：

> 克隆到裸存储库“new_project.git”...
> 致命：`https://username@bitbucket.org/username/new_project.git/info/refs`未找到：您是否在服务器上运行了 git update-server-info？

不用去网络应用程序就可以做到这一点。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-12-09T15:24:55.583

您可以使用 Bitbucket REST API 和 cURL。例如：

```
curl --user login:pass https://api.bitbucket.org/1.0/repositories/ \
--data name=REPO_NAME 
```

创建名为`REPO_NAME`.

有关详细信息，请参阅[使用 Bitbucket REST API](https://confluence.atlassian.com/bitbucket/use-the-bitbucket-cloud-rest-apis-222724129.html)。

更新

对于 Bitbucket V2，请参阅[POST a new repo](https://confluence.atlassian.com/bitbucket/repository-resource-423626331.html#repositoryResource-POSTanewrepository)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-11-11T17:38:18.487

[https://confluence.atlassian.com/bitbucket/repository-resource-423626331.html](https://confluence.atlassian.com/bitbucket/repository-resource-423626331.html)

```
$ curl -X POST -v -u username:password -H "Content-Type: application/json" \
  https://api.bitbucket.org/2.0/repositories/teamsinspace/new-repository4 \
  -d '{"scm": "git", "is_private": "true", "fork_policy": "no_public_forks" }' 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-09-09T19:47:57.720

这是[@hannesr 的脚本](https://stackoverflow.com/a/22042884/241211)，稍作调整以接受来自提示的输入：

```
# startbitbucket - creates remote bitbucket repo and adds it as git remote to cwd
function startbitbucket {
    echo 'Username?'
    read username
    echo 'Password?'
    read -s password  # -s flag hides password text
    echo 'Repo name?'
    read reponame

    curl --user $username:$password \
         https://api.bitbucket.org/1.0/repositories/ \
         --data name=$reponame \
         --data is_private='true'
    git remote add origin git@bitbucket.org:$username/$reponame.git
    git push -u origin --all
    git push -u origin --tags
} 
```

你应该把它放在你的`.bashrc`or`.bash_aliases`中。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-11-03T01:56:41.643

我对[上面 script 的@pztrick](https://stackoverflow.com/a/25752479/1159415)做了一些修改。这个新脚本应该可以正常工作，但它使用更新的 2.0 API：

```
function startbitbucket {
    echo 'Username?'
    read username
    echo 'Password?'
    read -s password  # -s flag hides password text
    echo 'Repo name?'
    read reponame

    curl -X POST -v -u $username:$password  -H "Content-Type: application/json" \
  https://api.bitbucket.org/2.0/repositories/$username/$reponame \
  -d '{"scm": "git", "is_private": "true", "fork_policy": "no_public_forks" }'

    git remote add origin git@bitbucket.org:$username/$reponame.git
    git push -u origin --all
    git push -u origin --tags
} 
```

您可以将它放在您的 .bashrc 或 .bash_aliases 文件中（就像原始脚本一样）。

请注意，它还会将其创建为私人仓库。您可以将 "is_private": "true" 更改为 "is_private": "false" 以使其成为公共仓库。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-26T13:28:41.457

我制作了一个快速的 shell 脚本，负责在当前工作目录中创建本地 git，执行“初始提交”，然后创建 bitbucket 存储库（使用 Mareks curl 方法），最后完成推送初始所需的所有操作致力于比特桶。

（请注意，这仅适用于私人回购，但正如 Patrick 所述，这很容易改变）

像这样使用它：

```
fillbucket <user> <password> <reponame> 
```

代码在[http://bitbucket.org/hannesr/fillbucket](http://bitbucket.org/hannesr/fillbucket)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-08-28T06:10:47.703

cURL 的最佳答案对我来说效果不佳，所以我最终在 Python 中使用[Bitbucket-API](https://bitbucket-api.readthedocs.org/en/latest/index.html)完成了它。这是关于[repository.create()](https://bitbucket-api.readthedocs.org/en/latest/bitbucket.html#bitbucket.repository.Repository.create)调用的文档。

安装：

```
pip install bitbucket-api 
```

Python：

```
>>> from bitbucket.bitbucket import Bitbucket
>>> bb = Bitbucket(username, password)
>>> bb.repository.create('awesome-repo', scm='git', private=True)
(True, {u'scm': ...}) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-03-04T05:14:31.877

*   如果您使用的是 Bitbucket Cloud(bitbucket.org)，您可以使用 Bitbucket REST API 和 cURL，还可以为存储库指定项目密钥，您可以使用：-

`curl -X POST -v -u $username:$password "https://api.bitbucket.org/2.0/repositories/$username/$reponame" -H "Content-Type: application/json" -d '{"scm": "git", "is_private": "true", "fork_policy": "no_public_forks", "project": {"key": "'$project_key'"}}'`

这将在特定项目下创建一个存储库。

*   如果您想在 Bitbucket 服务器 V1.0 中创建存储库，则可以使用 REST API。该命令如下所示：-

`curl -u $username:$password -X POST -H "Content-Type:application/json" -d '{"name": "'$reponame'","scmId": "git","forkable": true}' http://localhost:7990/rest/api/1.0/projects/${project_key,,}/repos`

您可以提及您的公司网址（例如 - birbucket.xyz.com）来代替 localhost:7990。

有关 bitbucket 服务器的更多信息，请参阅[使用 Bitbucket 服务器 REST API](https://docs.atlassian.com/bitbucket-server/rest/5.9.0/bitbucket-rest.html#idm29455402736)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-12T10:58:49.723

@hannester 我分叉并稍微修改了您的脚本。

您的远程 URL 不正确（您在脚本中留下了用户名）。将其修改为在脚本文件中包含用户名和密码。

并重命名，并说明如何在此处添加到路径：

[https://bitbucket.org/oscarmorrison/newgit](https://bitbucket.org/oscarmorrison/newgit)

# c# - 如何使用 .NET 框架设置作业调度？

> ID：13788488
> 
> 赞同：4
> 
> 时间：2012-12-09T14:50:53.747
> 
> 标签：c#, .net, windows, scheduling, job-scheduling

如何使用 C#/.NET 进行简单的作业调度？

假设我有一个方法（某个类），我想*每天*、*每小时*、*每周*等自动运行。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-09T15:07:46.073

您可以通过三种方式在 .net 中执行此操作

1）创建一个windows服务。如果在 Windows 上（假设您使用的是 Windows 7），您点击开始按钮并键入“查看本地服务”，然后单击结果，您在此处看到的所有内容都是 Windows 服务。当您编写 Windows 服务代码时，它基本上是一个包含在代码中的控制台应用程序，用于安装服务并设置调度时间。有很多关于如何创建 Windows 服务的教程。这是微软的指南： http: [//msdn.microsoft.com/en-us/library/zt39148a (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/zt39148a(v=vs.80).aspx)

2）创建一个“exe”应用程序，然后放入“任务计划程序”。再次，点击开始按钮并搜索“任务计划程序”。这与 Windows 服务的不同之处在于您可以从任务调度程序而不是在您的应用程序中控制调度。此外，过去您必须在重新启动时重新启动计划任务，因为 Windows 服务可以设置为在操作系统启动时启动（我不确定此规则是否仍然适用，我没有使用任务计划程序一阵子）。这是微软关于如何做到这一点的指南：http: [//windows.microsoft.com/en-GB/windows7/schedule-a-task](http://windows.microsoft.com/en-GB/windows7/schedule-a-task)

3) 您还可以查看 Quartz.NET，它是一个企业级作业调度框架。我已经用了好几次了，效果很好。Quartz.NET 可以在这里找到：http: [//quartznet.sourceforge.net/](http://quartznet.sourceforge.net/)

您可能还想看的另一件事是“Topshelf”。这使得开发 Windows 服务更容易：[http](http://topshelf-project.com) ://topshelf-project.com 。我自己没有用过，但认识很多人用过，他们推荐过。

**在将更多细节添加到问题后进行编辑**

如果您正在寻找一种可以使用某种 cron 作业等效项调用类上的方法的方法，那么没有办法做到这一点。您需要使此类成为应用程序 (exe) 的一部分，然后使用上述方法之一来安排该 exe 的执行。

最快和最简单的方法（不一定是最好的，具体取决于您的应用程序需求）是创建一个简单的控制台应用程序（[http://msdn.microsoft.com/en-us/library/ms438026(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/ms438026(v=office.14).aspx)）。将您正在谈论的类复制到其中，然后调用您希望在应用程序的 main 方法中安排的方法。然后如上所述使用任务调度程序。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T16:25:44.720

如果您有一个 ASP.NET 应用程序，最简单的方法是让 Windows 任务计划程序在您的应用程序中调用一个特殊的 URL，使用`curl.exe`.

Windows 任务计划程序也可用于启动您的自定义 EXE。

# java - Tomcat 无法访问由 java API 创建的文件

> ID：13788491
> 
> 赞同：1
> 
> 时间：2012-12-09T14:51:09.337
> 
> 标签：java, tomcat, runtime.exec

在创建基于 Java 的 Web 应用程序的过程中，我遇到了这个问题：

创建一个新目录：

```
Runtime.getRuntime().exec("mkdir /home/me/web/export")); 
```

复制图像：

```
Runtime.getRuntime().exec("cp /home/me/images/a.jpg /home/me/web/export" 
```

接下来，我将在我的 JSP 文件中创建指向“a.jpg”的下载链接。到目前为止，一切正常，但是当我在 tomcat 上部署我的 webaplication 并尝试下载文件时，我收到以下消息：

```
Http Status 404 - The requested resource (/export/a.jpg) is not available. 
```

我已经检查了目录，并且图像在那里可用。值得一提的是，在我将图像重命名为“b.jpg”并再次将其重命名为“a.jpg”后，链接就可以正常工作了。

**编辑 1**
此问题也会影响由 JAVA API 创建的文件。我使用 Filewriter 在同一目录中创建“data.xml”，当我尝试通过 JSP 页面中的链接访问它时，我得到了与以前相同的页面。

我拼命尝试通过将所有可用权限授予每个人“chmod 777 文件”来解决这个问题，但没有任何成功。

**编辑 2**
我意识到在停止 tomcat 并重新启动它之后，一切都恢复正常并且链接现在工作正常。我假设tomcat以某种方式保存了这个新创建的文件，所以这一切都说我能做些什么来解决这个问题？

**最终编辑：**
这恰好是服务器问题，因此将其移至 ServerFault 是合乎逻辑的。
感谢大家的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T08:48:44.480

我昨天在做另一个 J2EE 项目时遇到了类似的问题。令我惊讶的是，问题源于 IDE 本身。我在项目中使用了 Netbeans IDE，并将客户端上传的图像保存到项目目录中**的“/web/export/” 。**

那时我没有意识到的是，Netbeans 将文件从**“/build/web”**部署到 tomcat，而不是**“/web”**，并且在运行时放置在“/web/export”中的图像不一定会传播异步构建目录。重新启动服务器会启动构建过程，将所有更改传播到构建目录并解决给定的问题。

我想如果我手动将war文件部署到tomcat服务器，我一开始就不会遇到这些问题。

# udp - IP转发。UDP 聊天

> ID：13788497
> 
> 赞同：0
> 
> 时间：2012-12-09T14:51:55.417
> 
> 标签：udp, ip, ip-address, forwarding

我在本地主机上使用 UDP 编写了客户端/服务器聊天，它工作得很好。然后我通过 Skype 将我的服务器发送给我的朋友，他告诉我他的 IPAddress，它也运行良好。当我试图向他发送客户端程序并告诉他我的外部 IP 地址时，他无法连接到我。我在不同的电脑上尝试过，不成功。这可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T19:12:29.123

我是该网站的新手，还在上学，但我会尽力回答这个问题。

从本地主机到外部公共网络意味着您需要在路由器上打开正确的端口。因此路由器可以阻止该端口，或者计算机自己的防火墙可以阻止该端口。检查您的路由器（以及您和互联网之间的任何中间跃点）并检查该框自己的防火墙（Linux 上的 iptables 等）。也意味着您的 ISP 必须支持您使用这些端口并通过它自己的网络转发它们。这就是为什么一个简单的 http 端口 80 网络服务器通常只需打开路由器就可以使用。而端口 25 上的邮件服务器有时会被阻塞，因为在垃圾邮件、开放中继等中恶意使用该流量。阻塞不一定是双向的，流量可以在一个端口上以一种方式去，但不能在另一个方向上 - - 这是可能的。

因此，假设在您的 LAN 之外，他们可以看到您的网络服务器，但看不到其他聊天应用程序。如果您打开了正确的端口，那么您可能想从您的 ISP 那里找出哪些端口是打开和阻止的。

您刚刚补充说您正在使用端口 50000。这是您的家庭网络吗？在学校还是公司网络？有时会阻止高端口以扼杀洪流活动。再次与您的 ISP 核实。

# php - PHP 爆炸数组返回文本“数组”

> ID：13788505
> 
> 赞同：1
> 
> 时间：2012-12-09T14:53:00.447
> 
> 标签：php, arrays, foreach

我正在使用面包屑脚本，因为它的用途很明显，我正试图`&anyqueryafterhere`从结果中删除。我正在使用 for each 通过数组来删除它，但它返回“数组”。我的代码是

```
if(empty($breadcrumbs)===false){
    foreach($breadcrumbs as &$r){
        $r = explode("&", $r);  
    }
} 
```

目前，如前所述，它只是返回`Array`，所以它显示为类似`Array » Array`. 所以第一个问题，这是什么原因，第二个，我该如何分类？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T15:02:32.967

尝试

```
foreach($breadcrumbs as &$r){
                        ^-----is reference operator ..remove this Those are references, they are similar to "pointers" in C or C++. 

foreach($breadcrumbs as $r){ 
```

和

```
if(empty($breadcrumbs)===false){ 
```

更好的方法是

```
 if(!empty($breadcrumbs)){...} 
```

**好读**

[“&”怎么写 运算符在 PHP 函数中工作？](https://stackoverflow.com/questions/3957584/how-does-operator-work-in-php-function)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T14:54:24.647

### 代替

```
foreach($breadcrumbs as &$r){ 
```

### 和：

```
foreach($breadcrumbs as $r){ 
```

删除`&`.

# linux - 如何使用 grep 搜索从 1900 到 2100 的年份？

> ID：13788509
> 
> 赞同：1
> 
> 时间：2012-12-09T14:53:32.043
> 
> 标签：linux, bash, sed, grep

如何使用 grep 搜索从 1900 到 2100 的年份？

例如，如果我有一个变量，`20123320`我想打印`2012`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T15:08:30.627

**使用 bash**的有趣方式（`sh`用户小心！）：

如果您想匹配并打印出现在文件行首的所有这些年份`file`：

```
printf "^%s\n" {1900..2100} | grep -of - file 
```

如果您有一个`variable`包含以下内容的变量`20123320`：

```
variable=20123320
printf "^%s\n" {1900..2100} | grep -of - <(echo "$variable") 
```

现在请详细说明您到底想做什么，以便我们给您最合适的答案。

**编辑。**[当我看到使用bash](/questions/tagged/bash "显示标记为“bash”的问题")和[grep](/questions/tagged/grep "显示标记为“grep”的问题")以外的其他工具的其他答案时，这是一个 100% 的[bash](/questions/tagged/bash "显示标记为“bash”的问题")解决方案：

```
variable="20123320"
# take the first 4 characters of variable:
year="${variable:0:4}"
# check that year is an integer and that it falls into the given range
if [[ "$year" =~ ^[[:digit:]]+$ ]] && (( 1900<=year && year<=2100)); then
    echo "$year"
else
    # Do whatever you want here
    echo "You dumbo, I couldn't find a valid year in your string"
fi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T15:27:00.870

```
awk 'BEGIN{FIELDWIDTHS="4 "}{if($1~/^[0-9]+$/&&$1>=1900&&$1<=2100)print $1}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T15:00:26.623

尝试这样做：

```
echo "$var" | grep -Eo '\b(((19|20)[0-9][0-9])|2100)' 
```

或者查看我的[perl](/questions/tagged/perl "显示标记为“perl”的问题")解决方案，因为我认为`regex`在这里使用不是最好的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T15:19:02.950

[grep](/questions/tagged/grep "显示标记为“grep”的问题")不是更好的工具，Perl 将更适合、更容易和更健壮地测试数字范围：

```
echo "$var" | perl -lne '
    $year = substr($_, 0, 4);
    print $year if $year <= 2100 && $year >= 1900 && $year =~ /^\d+$/
' 
```

或与[awk](/questions/tagged/awk "显示标记为“awk”的问题")具有相同的逻辑：

```
echo "$var" | awk '
{
    year = substr($0, 0, 4)
    if (year <= 2100 && year >= 1900 && $1 ~ /^[0-9]+$/) {
        print year
    }
}' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T15:23:46.880

如果你坚持使用`grep`这个，你可以。

我假设您要匹配一个以 1900 到 2100 范围内的 4 位数字开头的变量，并且您只想打印这 4 位数字。

```
echo "$var" | grep -Eo '^(((19|20)[0-9][0-9])|2100)' 
```

这忽略了前 4 位数字后面可能出现的任何内容（因为我想不出一种方法来检查字符串的其余部分而不打印它）。

但这`grep`不是这项工作的明显工具，正则表达式也不是匹配一系列数字的最佳工具。例如，如果您需要匹配从 1950 到 2100 的数字，则正则表达式必须大不相同。

就个人而言，我会使用 Perl：

```
echo "$var" | perl -ne 'if (/^(\d{4})\d{4}$/ and $1 >= 1900 and $1 <= 2100) { print "$1\n" }' 
```

这会检查是否`$var`恰好包含 8 个十进制数字。如果要检查它们是否构成有效日期，则需要更多代码。

您也可以在 awk 中相当干净地完成它，这可能会更快一些。

# jquery - 在延迟加载期间使用 JQuery 滚动事件处理程序时如何防止多个 AJAX 调用？

> ID：13788510
> 
> 赞同：6
> 
> 时间：2012-12-09T14:53:36.213
> 
> 标签：jquery, ajax, scroll, lazy-loading, side-scroller

我使用 3 个不同的函数通过 AJAX 将数据加载到我的 DIV 中。当浏览器滚动条保持在我延迟加载数据的 DIV 底部时，我试图阻止多个 AJAX 调用。

这可行，但有时（只是有时）滚动条仍位于我的 div 的底部，这将导致发生许多 AJAX 调用。我该如何防止这种情况发生？

```
$(document).ready(function() {

    //form submit by click
    $("#submit").click(function(e) {
        // Prevent Default Action In Case to Load data by form
        e.preventDefault();

        //prevent select to post empty data
        $('select').each(function() {
            if ($(this).val() == '') {
                $(this).attr('disabled', 'disabled');
            }
        });

        // Define what we need
        var loading = "<img src='/zojfa/images/loading.gif' alt='Loading...' />";
        var scrolltop = $('#scrollbox').attr('scrollTop');
        var scrollheight = $('#scrollbox').attr('scrollHeight');
        var windowheight = $('#scrollbox').attr('clientHeight');
        var post = $(this).attr("name") + "=" + $(this).val();
        var form_data = $('#search_form').serialize() + "&" + post;
        var scrolloffset = 20;

        //empty content if another value sent to code
        $('#content').empty();
        //load data
        loaddata(form_data, 0);
    });

    //listen to scroll function
    $('#scrollbox').scroll(function() {

        //define what we need
        var scrolltop = $('#scrollbox').attr('scrollTop');
        var scrollheight = $('#scrollbox').attr('scrollHeight');
        var windowheight = $('#scrollbox').attr('clientHeight');
        var scrolloffset = 20;

        //get number of div which will append to script in case of limit database to page 2 or 3 or...
        size = $('#content > div').children().size();

        //if we reach to bottom of div we are going to call to ajax function
        if (scrolltop >= (scrollheight - (windowheight + scrolloffset))) {
            var form_data = $('#formdata').val();

            //if remain of size(count of div) is 0 then we have more data to show because we limit data provided by script to 7 field(we handle situation that we had 14 or 21 respond from database in "next step" because if there is no data to show we dont have to let script to run)
            if (size % 7 == 0) {
                //call to load data function
                setTimeout(function() { loaddata(form_data, size) }, 1500);
            } else {
                //do nothing its just in case we need to append something like no more data to load
            }
        }
    });

    // page load finish
});

//function to load data
function loaddata(form_data, size) {
    number = "&size=" + size;
    //fetch new items
    $.post('dosearch.php', form_data + number, function(newitems) {
        //next step : if page echoing "" then do nothing
        if (newitems == '') {} else {
            //if we have data append these data to our div's #content
            $('#content').append(newitems);
        }
    });
}​ 
```

**更新**

我按照亲爱的`@Kent Pawar`和亲爱的`@E.J. Brennan`说的做了，但是现在当我到达 div 的底部时，我收到了更多的 AJAX 调用，但它仍然不能正常工作。

```
$("#submit").click(function(e) {
    // Do some Default
    e.preventDefault();

    $('select').each(function() {
        if ($(this).val() == '') {
            $(this).attr('disabled', 'disabled');
        }
    });

    // var what we need
    var loading = "<img src='/zojfa/images/loading.gif' alt='Loading...' />";
    var scrolltop = $('#scrollbox').attr('scrollTop');
    var scrollheight = $('#scrollbox').attr('scrollHeight');
    var windowheight = $('#scrollbox').attr('clientHeight');
    var post = $(this).attr("name") + "=" + $(this).val();
    var form_data = $('#search_form').serialize() + "&" + post;
    var scrolloffset = 20;

    $('#content').empty();

    //load data
    loaddata(form_data, 0);
    $('select').each(function() {
        if ($(this).val() == '') {
            $(this).removeAttr('disabled');
        }
    });
});

$('#scrollbox').scroll(function() {
    //var what we need
    var scrolltop = $('#scrollbox').attr('scrollTop');
    var scrollheight = $('#scrollbox').attr('scrollHeight');
    var windowheight = $('#scrollbox').attr('clientHeight');
    var scrolloffset = 20;

    // when we reach
    size = $('#content > div').children().size();

    if ($('#scrollbox').data('ajaxready') === false)
        return;

    if (scrolltop >= (scrollheight - (windowheight + scrolloffset))) {
        $('#scrollbox').data('ajaxready', false);
        var form_data = $('#formdata').val();

        if (size % 7 == 0) {
            setTimeout(function() { loaddata(form_data, size) }, 1500);
        } else {

        }
    }
    $('#scrollbox').data('ajaxready', true);

    // page load finish
});

function loaddata(form_data, size) {
    number = "&size=" + size;
    //fetch new items
    $.post('dosearch.php', form_data + number, function(newitems) {
        if (newitems == '') {} else {
            $('#content').append(newitems);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T15:54:58.597

那么问题不在于滚动条位于页面底部，而在于事件处理程序的工作方式。有时滚动条会位于页面底部，例如当没有更多帖子要加载时……例如观察 Facebook 的墙。

**目前，滚动**发生时会触发JQuery[滚动](http://api.jquery.com/scroll/)事件。

 **> **jQuery 文档：**
> 
> 无论原因如何，只要元素的滚动位置发生变化，就会发送滚动事件。在滚动条上单击或拖动鼠标、在元素内拖动、按箭头键或使用鼠标滚轮都可能导致此事件。

现在它的脚本的工作是进行单个 AJAX 调用以检查是否有要加载的内容。您需要修改您的脚本以阻止在此期间发生多个 AJAX 调用，正如我所见`@E.J. Brennan`，已经提出了相同的建议:)。

*您可以按如下方式添加标志：*

```
//listen to scroll function
  $('#scrollbox').scroll(function(){

        //[Kent] Before we service the event, we check if the last scroll event was handled/completed.
        //If it is not yet compelted, don't start another one and jump out of the code.
        if ($(window).data('ajax_in_progress') === true)
            return;

        //define what we need
        var scrolltop=$('#scrollbox').attr('scrollTop');
        var scrollheight=$('#scrollbox').attr('scrollHeight');
        var windowheight=$('#scrollbox').attr('clientHeight');
        var scrolloffset=20;

        //get number of div which will append to script in case of limit database to page 2 or 3 or...
        size =  $('#content > div').children().size();

        //if we reach to bottom of div we are going to call to ajax function
        if(scrolltop>=(scrollheight-(windowheight+scrolloffset))){
            $(window).data('ajax_in_progress', true);  //[Kent] prevent more scroll events as AJAX request will soon begin. 

            var form_data = $('#formdata').val();

            // if remain of size(count of div) is 0 then we have more data to show because 
            // we limit data provided by script to 7 field(we handle situation that we had 
            // 14 or 21 respond from database in "next step" because if there is no data to 
            // show we dont have to let script to run)
            if(size % 7 == 0){
                //call to load data function
                setTimeout(function(){loaddata(form_data, size)}, 1500);
            }else{
                //do nothing its just in case we need to append something like no more data to load
            }
        }
    });    

//function to load data
function loaddata(form_data, size){
    number = "&size=" + size;
    //fetch new items
    $.post('dosearch.php', form_data+number, function(newitems){
        // [Kent] This is the callback funciton that gets executed ONLY
        // when the AJAX request has completed. We will append the data
        // into the DOM and then reset the FLAG.

        //next step : if page echoing "" then do nothing
        if(newitems == ''){
        }else{
            //if we have data append these data to our div's #content
            $('#content').append(newitems).each(function() {
                //Adding a callback to append.
                // So we reset the flags here to indicate the scroll event 
                // has been handled/completed and so we turn scrolling events back on
                $(window).data('ajax_in_progress', false);
            });
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T15:36:32.177

不是 100% 清楚你的确切问题，但我也遇到了类似的问题，即在第一个事件完成之前，Firefox 触发了大量滚动事件，而 chrome 没有。

我所做的是在开始（从 ajax）加载新数据时添加一个标志，并在完成时取消设置标志，这解决了我的问题。

像这样的东西：

```
 $(window).scroll(function () {

    //if last scroll is not done, don't start another one.
    if ($(window).data('ajaxready') === false)
        return;

    if ($(window).scrollTop() >= $(document).height() - $(window).height() - 100) {
        $(window).data('ajaxready', false);  //prevent more scroll events
        YourFunctionCallToGetGetMoreData();  //go get the data here.
    }

    //turn scrolling events back on
    $(window).data('ajaxready', true);
}); 
```

在您的情况下，将滚动返回的调用将进入 ajax 数据加载的回调函数。**

# c - 循环遍历 C 中的字符串会导致分段错误（核心转储）

> ID：13788514
> 
> 赞同：0
> 
> 时间：2012-12-09T14:53:50.110
> 
> 标签：c, segmentation-fault

对于下面的代码，我得到

```
Segmentation fault (core dumped) 
```

错误信息，有人可以帮我吗？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(void){

    char s[] = "helloWorld";

    int i;
    for(i = 1; i < strlen(s); i++)
    {
        printf("Letter is %s\n", s[i]);
    }

    return(0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T14:55:12.447

```
printf("Letter is %s\n", s[i]); 
```

是错误的，`%s`期望 a `const char *`，而你给它 a `char`。将此行更改为

```
printf("Letter is %c\n", s[i]); 
```

因为`%c`格式说明符用于打印单个字符。

此外，在 C 中，数组是从零开始的，因此您也应该使用初始化`i`为零`i = 0;`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T14:57:09.200

您正在逐个字符打印，因此请使用`%c`而不是`%s`.

`%s`需要一个字符串，但`s[i]`实际上是一个字符。

也每次你打电话`strlen(s)`。并且`strlen`没有改变，所以最好使用一个变量，并且在进入循环之前只调用一次。

像这样更优化的方式：

```
int len=strlen(s);
for(i = 0; i < len; i++)
    {
        printf("Letter is %c\n", s[i]);
    } 
```

# mysql - mysql加入2个表，2列

> ID：13788515
> 
> 赞同：2
> 
> 时间：2012-12-09T14:53:58.920
> 
> 标签：mysql, sql

假设我有

表`student_data`和字段是

```
╔════╦════════════╦════════════╗
║ ID ║ CREATED_BY ║ UPDATED_BY ║
╠════╬════════════╬════════════╣
║ 1 ║ 1 ║ 2 ║
╚════╩════════════╩════════════╝

```

表`creator_updater`和字段是

```
╔════╦════════════════╗
║身份证║姓名║
╠════╬════════════════╣
║ 1 ║ 造物主 ║
║ 2 ║ 第二创造者 ║
╚════╩════════════════╝

```

所以我想知道确切的代码是什么所以它会显示

```
学生数据

╔════╦═══════════════╦════════════════════════
║ ID ║ CREATED_BY_ID ║ LATEST_UPDATED_BY_ID ║
╠════╬═══════════════╬══════════════════⣕╕
║ 1 ║ 造物主 ║ 第二造物主 ║
╚════╩═══════════════╩════════════════════════

```

我试过加入语法，但似乎不同

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T14:56:55.783

您需要加入`creator_updater`表格两次，以便获得两列的名称。

```
SELECT  a.id,
        b.name created_by_id,
        c.name latest_updated_by_id
FROM    student_data a
        INNER JOIN creator_updater b
            ON a.created_by = b.id
        INNER JOIN creator_updater c
            ON a.updated_by = c.id 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/9c28e/1)

*但是如果其中一列可以为空*，则上面的代码将不起作用，如果是这种情况，请使用`LEFT JOIN`而不是`INNER JOIN`

```
SELECT  a.id,
        b.name created_by_id,
        c.name latest_updated_by_id
FROM    student_data a
        LEFT JOIN creator_updater b
            ON a.created_by = b.id
        LEFT JOIN creator_updater c
            ON a.updated_by = c.id 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/d4f760/2)

有关联接的更多信息

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# iphone - 方法完成后浮点数不保留其值

> ID：13788518
> 
> 赞同：1
> 
> 时间：2012-12-09T14:54:02.953
> 
> 标签：iphone, ios, xcode, floating-point

我正在制作一个货币转换器应用程序，但我在存储最新汇率时遇到了一些问题。我有一个名为 applicationDidUpdateCurrency 的方法，可以使用按钮从应用程序内手动调用，或者在应用程序启动时通过单击是警报来调用。该方法获取最新汇率并将它们添加到数组中。然后，我让应用程序循环执行一系列语句，其中 NSArray 中的项目被移动到浮点值，然后记录到控制台。所有这些工作正常。

```
+(void)applicationDidUpdateCurrency
{
    NSError *error;

    // Load .csv file. 

    NSString *allStates = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://download.finance.yahoo.com/d/quotes.csv?s=USDUSD=X,CNYUSD=X,GBPUSD=X,EGPUSD=X,CADUSD=X,EURUSD=X,&f=sl1d1t1ban&e=.csv"] encoding:NSUTF8StringEncoding error:&error];

    // Remove all quotes from file, replace them with nothing. 

    NSString *strippedPartOne = [allStates stringByReplacingOccurrencesOfString:@"\"" withString:@""];

    // Remove excess new lines from the csv file. 

    NSString *strippedPartTwo = [strippedPartOne stringByReplacingOccurrencesOfString:@"\r" withString:@""];

    // Add strippedPartTwo to array. 

    NSArray *rows = [strippedPartTwo componentsSeparatedByString:@"\n"];

    //   NSArray *components;

    for(int i=0; i<[rows count]; i++)
    {        
        components = [[rows objectAtIndex:i] componentsSeparatedByString:@","];

        // NSLog(@"Conversion: %@ Value: %@", [components objectAtIndex:0], [components objectAtIndex:1]);

        if ([[rows objectAtIndex:i] isEqualToString:@""]) {
            continue;
        }

        if (i==0) {
            float floatUSD = 1;

            NSLog(@"USD2: %f", floatUSD);
            continue;
        }

        if (i==1) {  
            float beforeFloatCNY = [[components objectAtIndex:1] floatValue];
            float floatCNY = 1 / beforeFloatCNY;
            NSLog(@"CNY2: %f", floatCNY);
        }

        if (i==2) {  
            float beforeFloatGBP = [[components objectAtIndex:1] floatValue];
            float floatGBP = 1 / beforeFloatGBP;
            NSLog(@"GBP2: %f", floatGBP);
        }

        if (i==3) {  
            float beforeFloatEGP = [[components objectAtIndex:1] floatValue];
            float floatEGP = 1 / beforeFloatEGP;
            NSLog(@"EGP2: %f", floatEGP);
        }

        if (i==4) {  
            float beforeFloatCAD = [[components objectAtIndex:1] floatValue];
            float floatCAD = 1 / beforeFloatCAD;
            NSLog(@"CAD2: %f", floatCAD);
        }

        if (i==5) {
            float beforeFloatEUR = [[components objectAtIndex:1] floatValue];
            float floatEUR = 1 / beforeFloatEUR;
            NSLog(@"EUR2: %f", floatEUR);
        }

    }

} 
```

此方法位于与具有货币列表的表视图控制器关联的同一文件中。我只是试图将这些值放回该数组，以便它们可以更轻松地通过委托发送回主视图控制器。

在调用 applicationDidUpdateCurrency 方法后，我似乎无法使用简单的 NSLog(@"USD2: %f", floatUSD); 再次显示该值。它在定义后立即正确记录，但即使在下一个 if 语句之后它也只显示为 0.000000。

我使用此代码在 .h 文件中声明 floatX 值。

```
@property (nonatomic, assign) float floatUSD; 
```

谁能帮我解决这个问题？我只是想定义一个浮点值，将其放入数组中，然后在表视图控制器中选择项目时将其发送回主视图控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:59:06.340

因为您正在重新声明变量并且新声明的变量（现在在最内部的范围内）隐藏了实例变量。（如果你在打开警告的情况下编译它，你会得到一些关于这个的警告）。你不需要，事实上你不应该**重新**声明这些。

此外，访问*属性*本身，而不是支持实例变量。所以，总而言之，而不是

```
float floatUSD = 1; 
```

写

```
self.floatUSD = 1; 
```

# ios - 如何使用 FlowLayout 确定 UICollectionView 的高度

> ID：13788522
> 
> 赞同：133
> 
> 时间：2012-12-09T14:54:26.470
> 
> 标签：ios, height, uicollectionview, autolayout

我有一个`UICollectionView`with `UICollectionViewFlowLayout`，我想计算它的内容大小（用于`intrinsicContentSize`通过 AutoLayout 调整其高度所需的返回）。

问题是：即使我对所有单元格都有一个固定且相等的高度，我也不知道`UICollectionView`. 我也无法通过数据源中的项目数确定该计数，因为表示数据项的单元格的宽度不同，因此我在`UICollectionView`.

由于我在官方文档中找不到有关此主题的任何提示，并且谷歌搜索并没有给我带来任何进一步的帮助，因此非常感谢任何帮助和想法。

* * *

## 回答 #1

> 赞同：271
> 
> 时间：2012-12-09T15:09:55.207

哇！出于某种原因，经过数小时的研究，我现在找到了一个非常简单的问题答案：我完全在错误的地方搜索，翻遍了我能找到的所有文档`UICollectionView`。

简单易行的解决方案在于底层布局：只需调用`collectionViewContentSize`您的`myCollectionView.collectionViewLayout`属性，即可获得内容的高度和宽度为`CGSize`. 就这么简单。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-10-07T08:53:47.613

如果您使用的是**Auto layout**，那么您可以创建一个子类`UICollectionView`

如果您使用下面的代码，那么您不必为集合视图指定任何高度约束，因为它会根据集合视图的内容而有所不同。

下面给出的是实现：

```
@interface DynamicCollectionView : UICollectionView

@end

@implementation DynamicCollectionView

- (void) layoutSubviews
{
    [super layoutSubviews];

    if (!CGSizeEqualToSize(self.bounds.size, [self intrinsicContentSize]))
    {
        [self invalidateIntrinsicContentSize];
    }
}

- (CGSize)intrinsicContentSize
{
    CGSize intrinsicContentSize = self.contentSize;

    return intrinsicContentSize;
}

@end 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-02-07T04:40:53.703

您`viewDidAppear`可以通过以下方式获得它：

```
float height = self.myCollectionView.collectionViewLayout.collectionViewContentSize.height; 
```

也许当您重新加载数据然后需要使用新数据计算新高度时，您可以通过以下方式获得它：添加观察者以在您`CollectionView`完成重新加载数据时收听`viewdidload`：

```
[self.myCollectionView addObserver:self forKeyPath:@"contentSize" options:NSKeyValueObservingOptionOld context:NULL]; 
```

然后在collectionview完成重新加载后添加波纹管功能以获得新的高度或做任何事情：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary  *)change context:(void *)context
{
    //Whatever you do here when the reloadData finished
    float newHeight = self.myCollectionView.collectionViewLayout.collectionViewContentSize.height;    
} 
```

并且不要忘记删除观察者：

```
[self.myCollectionView removeObserver:self forKeyPath:@"contentSize" context:NULL]; 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-11-06T06:33:10.767

user1046037 答案的 Swift 3 代码

```
import UIKit

class DynamicCollectionView: UICollectionView {

    override func layoutSubviews() {
        super.layoutSubviews()
        if !__CGSizeEqualToSize(bounds.size, self.intrinsicContentSize) {
            self.invalidateIntrinsicContentSize()
        }

    }

    override var intrinsicContentSize: CGSize {
        return contentSize
    }

} 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-04-20T15:09:34.917

user1046037 用 Swift 回答...

```
class DynamicCollectionView: UICollectionView {
    override func layoutSubviews() {
        super.layoutSubviews()
        if bounds.size != intrinsicContentSize() {
            invalidateIntrinsicContentSize()
        }
    }

    override func intrinsicContentSize() -> CGSize {
        return self.contentSize
    }
} 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-03-23T03:01:15.847

斯威夫特 4

```
class DynamicCollectionView: UICollectionView {
  override func layoutSubviews() {
    super.layoutSubviews()
    if !__CGSizeEqualToSize(bounds.size, self.intrinsicContentSize) {
      self.invalidateIntrinsicContentSize()
    }
  }

  override var intrinsicContentSize: CGSize {
    return collectionViewLayout.collectionViewContentSize
  }
} 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2019-01-09T17:43:57.877

斯威夫特 4.2

```
class DynamicCollectionView: UICollectionView {
    override func layoutSubviews() {
        super.layoutSubviews()
        if bounds.size != intrinsicContentSize {
            invalidateIntrinsicContentSize()
        }
    }

    override var intrinsicContentSize: CGSize {
        return self.contentSize
    }
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-04-19T05:38:30.323

现在回答这个问题为时已晚，但我最近经历了这个问题。
@lee[上面的答案](https://stackoverflow.com/a/28378625/6325474)对我得到答案有很大帮助。但是这个答案仅限于**Objective-c**并且我正在**swift**中工作。
@lee参考您的回答，请允许我让快速用户轻松解决此问题。为此，请按照以下步骤操作：

在声明部分声明一个`CGFloat`变量：

```
var height : CGFloat! 
```

您`viewDidAppear`可以通过以下方式获得它：

```
height = self.myCollectionView.collectionViewLayout.collectionViewContentSize().height 
```

也许当您`reload`的数据然后需要用新数据计算新高度时，您可以通过以下方式获得它：在您完成重新加载数据时`addObserver`收听：`CollectionView``viewWillAppear`

```
override func viewWillAppear(animated: Bool) {
        super.viewWillAppear(true)
        ....
        ....
        self.shapeCollectionView.addObserver(self, forKeyPath: "contentSize", options: NSKeyValueObservingOptions.Old, context: nil)
    } 
```

然后添加波纹管功能以获得新的高度或`collectionview`完成重新加载后做任何事情：

```
override func observeValueForKeyPath(keyPath: String?, ofObject object: AnyObject?, change: [String : AnyObject]?, context: UnsafeMutablePointer<Void>) {
        let newHeight : CGFloat = self.myCollectionView.collectionViewLayout.collectionViewContentSize().height

        var frame : CGRect! = self.myCollectionView.frame
        frame.size.height = newHeight

        self.myCollectionView.frame = frame
    } 
```

并且不要忘记删除观察者：

```
override func viewWillDisappear(animated: Bool) {
    super.viewWillDisappear(true)
    ....
    ....
    self.myCollectionView.removeObserver(self, forKeyPath: "contentSize")
} 
```

我希望这将帮助您迅速解决您的问题。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-10-21T08:24:24.670

这个答案基于@Er。维哈尔的回答。您可以使用 RxSwift 轻松实现该解决方案

```
 collectionView.rx.observe(CGSize.self , "contentSize").subscribe(onNext: { (size) in
        print("sizer \(size)")
    }).disposed(by: rx.disposeBag) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-03-01T17:28:11.070

@user1046037 的 Swift 版本：

```
public class DynamicCollectionView: UICollectionView {

    override public func layoutSubviews() {
        super.layoutSubviews()
        if !bounds.size.equalTo(intrinsicContentSize) {
            invalidateIntrinsicContentSize()
        }
    }

    override public var intrinsicContentSize: CGSize {
        let intrinsicContentSize: CGSize = contentSize
        return intrinsicContentSize
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-05-06T17:54:38.287

**斯威夫特 4.2、Xcode 10.1、iOS 12.1：**

出于某种原因，`collectionView.contentSize.height`它看起来比我的收藏视图的解析高度要小。首先，我使用了相对于父视图高度的 1/2 的自动布局约束。**为了解决这个问题，我将约束更改为相对于视图的“安全区域”。**

这使我可以使用以下方法设置单元格高度以填充我的集合视图`collectionView.contentSize.height`：

```
private func setCellSize() {
    let height: CGFloat = (collectionView.contentSize.height) / CGFloat(numberOfRows)
    let width: CGFloat = view.frame.width - CGFloat(horizontalCellMargin * 2)

    let layout = collectionView.collectionViewLayout as! UICollectionViewFlowLayout
    layout.itemSize = CGSize(width: width, height: height)
} 
```

**前**

[![相对于超级视图的高度约束](../Images/1dbc24647669e95a1000c284f3e32b01.png)](https://i.stack.imgur.com/8HDy3.png) [![模拟器结果不好](../Images/3e0edbc3aea8c4c9689b6c80380274a1.png)](https://i.stack.imgur.com/WWTj2.png)

**后**

[![相对于安全区域的高度限制](../Images/865f1b22861c53a4b5189c9cb9dcf729.png)](https://i.stack.imgur.com/KA9pj.png) [![良好的模拟器结果](../Images/f57eec8744639dc37ef50f676a200ff9.png)](https://i.stack.imgur.com/Kk5Qp.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-10-29T03:25:07.507

In addition，you'd better calling `reloadData` before getting the height:

```
theCollectionView.collectionViewLayout.collectionViewContentSize; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-12-11T16:44:10.087

假设您的 collectionView 被命名为**collectionView**您可以采用如下高度。

```
let height = collectionView.collectionViewLayout.collectionViewContentSize.height 
```

# regex - 正则表达式匹配 {asdf} 但不匹配 {{asdf}}

> ID：13788523
> 
> 赞同：5
> 
> 时间：2012-12-09T14:54:42.960
> 
> 标签：regex, vbscript

我有一个非常直接的问题。

我正在使用这个正则表达式来匹配`{somestring}`.

```
\{{1}(\w+?)\}{1} 
```

问题是我需要它来忽略 的实例`{{somestring}}`，但当然，它与内部`{somestring}`的 in匹配`{{somestring}}`。

知道如何调整表达式以跳过类似的内容`{{somestring}}`吗？

我正在使用 vbscript 的正则表达式引擎。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T14:59:33.127

如果您的正则表达式引擎支持[lookarounds](http://www.regular-expressions.info/lookaround.html)，那么它们就是要走的路：

```
(?<!\{)\{\w+\}(?!\}) 
```

这确实是你想要的。向后看断言没有`{`在你的前面`{`，而向前看断言没有`}`在你的后面`}`。

请注意，`{1}`它永远不会做任何事情。曾经。

另请注意，您不需要不`\w+`贪心，因为它无论如何都不能消耗`}`。

最后，我只想把它放在这里，这是一种替代转义的方法`{`，`}`就是把它放到一个单字符的字符类中。您更喜欢哪一个是一个口味问题，但我更喜欢这个的可读性：

```
(?<![{])[{]\w+[}](?![}]) 
```

**编辑：**

[似乎 VBScript 不支持lookbehinds。](http://www.regular-expressions.info/vbscript.html)

这有点问题。你能得到的最接近的是：

```
(^|[^{])[{]\w+[}](?![}]) 
```

但是，如果在字符串的开头没有找到匹配，这将在匹配中包含前面的字符。这本身不是问题，因为您可以通过捕获子字符串函数或其他东西来摆脱该字符。但是，匹配不能重叠，因此如果您有这样的输入，`{some}{string}`您将不会轻易获得两个匹配（因为第一个`}`必须是第二个匹配的一部分）。一些引擎提供`\G`了作为持续匹配的等价物`^`，但 VBScript 似乎也不支持。因此，从这里开始它会变得丑陋。

您可以做的是`}`从比赛中排除收盘（使用另一个前瞻）：

```
(^|[^{])[{]\w+(?=[}](?![}])) 
```

现在您将获得匹配项`{some`and `}{string`，因此必须在每个匹配项中附加`}`并删除不在字符串开头的每个匹配项中的第一个字符。或者，如果您可以获得捕获的结果，您可以使用

```
(^|[^{])([{]\w+)(?=[}](?![}])) 
```

然后检索捕获组`2`并附加`}`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-24T03:31:52.540

这个表达式完美地工作：

```
^{{1}(\w+?)}{1}$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T15:17:20.913

在这种特殊情况下，您可以使用**^** {{1}(\w+?)}{1} **$** - 这将匹配 {something}，但不会匹配 {{something}}，但它也不会匹配`something else and {something} after that`. 如果您希望最后一个字符串与您的正则表达式匹配，那么前面的答案正是您所需要的。

# networking - 在校园网中实现InterVlan Routing

> ID：13788526
> 
> 赞同：0
> 
> 时间：2012-12-09T14:54:53.427
> 
> 标签：networking, routing, cisco

祝大家有美好的一天！

我的任务是比较在校园网络中**实现 VLAN 间路由的不同方法。**Google 建议仅使用 Cisco 技术进行此类查询。但我还需要其他公司的解决方案（如戴尔、惠普）、实施成本、利弊等。此外，一些描述问题的一般概述的文章也会很有用。任何帮助表示赞赏！提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T23:35:37.907

您提到的每家公司都有可供您使用的解决方案。“Intervlan 路由”是您列出的唯一要求。所有企业网络设备供应商都提供此功能。所以你不需要把它当作一个要求，我会说 - 你会从任何人那里得到它。您应该与网络经销商/顾问讨论此问题，以便他们能够发现您的真正需求（例如 IP 电话的以太网供电等），并希望您可以共同设计一个满足您的要求和预算限制的解决方案。

# jpa - 在级联 EntityManager 上删除

> ID：13788527
> 
> 赞同：0
> 
> 时间：2012-12-09T14:54:54.773
> 
> 标签：jpa, cascade, entitymanager, cascading-deletes

情况如下：我有 2 个实体交易者和客户： - 一位客户与一位交易者相关联 - 一位交易者可以与一位或多位客户相关联，同时使用 EntityManager.remove(t) 删除交易者，然后提交，所有客户相关给该交易者的信息将被自动删除。很好，因为它是级联删除。问题 ：

1 - 我怎样才能删除我的交易者并将其客户重新影响到另一个客户？

2 - 解决方案是否存在于取消 mySQL 中的级联效应或它同时存在于 entityManager 和 MySQL 中？非常感谢您的帮助。

客户实体

```
public class Client implements Serializable {
    @Transient
    private PropertyChangeSupport changeSupport = new PropertyChangeSupport(this);
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "id_client")
    private Integer idClient;
    @Column(name = "id_portefeuille")
    private Integer idPortefeuille;
    @Column(name = "id_entreprise")
    private Integer idEntreprise;
    @Column(name = "id_trader")
    private Integer idTrader;
    //other attributes 
    @JoinColumn(name = "id_trader", referencedColumnName = "id_trader", updatable = false, insertable = false)
    @ManyToOne
    private Trader idTrader2;
    //getters and setters 
```

交易者实体

```
public class Trader implements Serializable {
        @Transient
        private PropertyChangeSupport changeSupport = new PropertyChangeSupport(this);
        private static final long serialVersionUID = 1L;
        @Id
        @GeneratedValue(strategy = GenerationType.IDENTITY)
        @Basic(optional = false)
        @Column(name = "id_trader")
        private Integer idTrader;
        @Column(name = "nom")
        //other attributes
        @OneToMany(cascade = CascadeType.ALL, mappedBy = "idTrader2")
        private Collection<Client> clientCollection;
        //getters and setters 
```

主要代码

```
//Getting The trader selected in a JTable        
 Trader t = traderList.get(tableTrader.getSelectedRow());

 for (Iterator<Client> it = t.getClientCollection().iterator(); it.hasNext(); ) {

           //Getting the Clients releated to this trader
            Client c = it.next();

           //Affecting the client to an other trader 
           // i chose an existing one randomly 
            c.setIdTrader2(traderList.get(2));
           traderList.get(2).getClientCollection().add(c);

           it.remove();
    }
            entityManager.flush();
            entityManager.remove(t);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:03:34.157

级联配置中不应该有删除，在 MySQL 中也不应该在实体映射中。因此，该方法看起来像这样（假设存在双向关联，并且`getClients()`直接返回持久列表，而不制作防御性副本或将其包装到未修改的代理中）：

```
public void deletedTrader(Trader toDelete, Trader newAssignedTrader) {
    for (Iterator<Client> it = toDelete.getClients().iterator(); it.hasNext(); ) {
        Client c = it.next();
        c.setTrader(newAssignedTrader);
        newAssignedTrader.getClients().add(c);
        it.remove();
    }
    em.remove(toDelete);
} 
```

# c# - DevExpress 11.1 Grid Control 缺少参考

> ID：13788529
> 
> 赞同：0
> 
> 时间：2012-12-09T14:55:13.883
> 
> 标签：c#, wpf, vb.net, visual-studio-2010, devexpress

我刚刚下载了 DevExpress Universal Trial 以在 VB.Net WPF 项目上试用。

我的问题是我不能使用我需要的网格控件和树列表控件。

我第一次添加其中一个时会出现错误弹出窗口

> **对象引用未设置为对象的实例**

然后我尝试直接添加到xaml，出现错误。

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <dxg:GridControl Name="gridControl1" DataSource="{StaticResource list}">
        <dxg:GridControl.Columns>
            <dxg:GridColumn FieldName="Name" />
            <dxg:GridColumn FieldName="AreaKM2" />
            <dxg:GridColumn FieldName="Population" />
        </dxg:GridControl.Columns>
        <dxg:GridControl.View>
            <dxg:GridColumnView NavigationStyle="CellNavigation" />
        </dxg:GridControl.View>
    </dxg:GridControl>
</Grid> 
```

错误说：

> 错误 1 **​​找不到类型“dxg:GridControl”。确认您没有丢失程序集引用并且所有引用的程序集都已构建。**

我离 Visual Studio 的中级用户还差得很远，所以我真的希望这里有人能提供帮助。

干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:02:58.050

问题是您使用的是 dxg XML 命名空间，但您从未在 XAML 中定义它。查看 Window 标记中的所有这些 xmlns 定义吗？您还需要为 dxg 添加一个。我不确定哪一个适合您的特定控制版本。我在 DevExpress 文档中找到了这一点，但该文档适用于 DX 12.2，因此它可能无法完美运行。

在您正在处理的文件的 XAML 中的其他 xmlns 标记附近添加以下行。

```
xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid" 
```

那应该可以解决您遇到的问题。查看下面的链接以获得更多帮助。

[DXGrid](http://documentation.devexpress.com/#WPF/CustomDocument6084)

[XAML 命名空间](http://documentation.devexpress.com/#WPF/CustomDocument7385)

此外，请确保在您的项目中引用了 DevExpress DLL。即使您更正了命名空间问题，如果您的项目没有引用 DLL，那么您将继续遇到问题。请参阅以下教程了解如何做到这一点（基本上在 DX 指南中说 12.2 的任何地方，只要想 11.1 并做同样的事情）。您可能需要查看自己的文档以获取更准确的信息：

[DevExpress WPF 部署所需的 DLL](http://documentation.devexpress.com/#XtraReports/CustomDocument9370)

[如何在 Visual Studio 2010 中添加对 DLL 的引用](http://msdn.microsoft.com/en-us/library/wkze6zky%28v=vs.100%29.aspx)

# javascript - Math.round() 控制小数位不起作用

> ID：13788531
> 
> 赞同：1
> 
> 时间：2012-12-09T14:55:17.683
> 
> 标签：javascript, formatting

我试图在下面的代码中四舍五入到两位小数，但是，在许多情况下，控制小数位数的数学四舍五入方法对我不起作用。

```
 var newKitAmount = 1;
   var priceNumber =  168;
   var updatedTotal = Math.round(priceNumber * newKitAmount*100)/100;
   alert("total is : " + updatedTotal); //OUTPUTS 168 instead of 168.00 
```

生成的输出：`168`

期望的输出：`168.00`

示例二：`5 * 2 = 10`

期望的输出：`10.00`

[JS小提琴](http://jsfiddle.net/8dcYY/)

我究竟做错了什么？我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T14:57:15.487

如果要在字符串中的点后获得固定位数，则应使用[toFixed ：](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)

```
var updatedTotal = (priceNumber * newKitAmount).toFixed(2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-25T19:33:48.263

您应该使用函数进行舍入，因为 Firefox 和 Chrome 之间的差异与 toFixed 的舍入方式不同...

```
function toFixed(a,b){ //where a is the number and b is the number of decimals
    var m = Math.pow(10,b);
    return Math.round(parseFloat(a)*m)/m;
} 
```

# javascript - 在 Javascript 中解析特定的日期时间格式

> ID：13788533
> 
> 赞同：0
> 
> 时间：2012-12-09T14:55:26.050
> 
> 标签：javascript, datetime, datejs

我有以下格式的日期：

`2012-12-09T02:08:34.6225152Z`

我正在使用[datejs javascript 库](http://code.google.com/p/datejs/wiki/APIDocumentation)并希望解析上述日期，但我似乎无法找出正确的格式字符串。我尝试了以下方法，但它不起作用。

```
Date.parse('2012-12-09T02:08:34.6225152Z', 'yyyy-MM-ddTHH:mm:ss.fffffffZ'); 
```

如果它更容易，我也愿意在本机 javascript 中解析字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:02:42.280

DateJS 似乎不支持毫秒解析。DateJS 附加组件上有`u`FormatSpecifier 可以工作（尚未测试）。

[http://code.google.com/p/datejs/wiki/FormatSpecifiers](http://code.google.com/p/datejs/wiki/FormatSpecifiers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:54:15.963

我最终通过在发送到 Javascript 时更改字符串的格式来解决这个问题。我没有使用以下代码将JSON`2012-12-09T02:08:34.6225152Z`序列化程序更改为输出：`1363607010099`

```
var serializer = new JsonNetSerializer(new JsonSerializerSettings
{
    DateFormatHandling = DateFormatHandling.MicrosoftDateFormat,
    NullValueHandling = NullValueHandling.Ignore
}); 
```

然后我更改了我的 javascript 以使用我找到的这个函数来解析日期：

```
String.prototype.toDate = function () {
    "use strict";
    var match = /\/Date\((\d{13})\)\//.exec(this);
    return match === null ? null : new Date(parseInt(match[1], 10));
}; 
```

最后，我使用这段代码输出日期（利用 DateJS 库）：

```
myTime.toDate().toString('h:mm:ss tt dd-MMM-yyyy') 
```

它有效。这似乎有点骇人听闻，所以我非常愿意考虑替代方案。

# iphone - IOS播放短音

> ID：13788534
> 
> 赞同：2
> 
> 时间：2012-12-09T14:55:42.900
> 
> 标签：iphone, ios, audio

我正在尝试在我的 iphone 应用程序中播放一个简短的警报声，我正在使用我找到的这段代码，但它不会播放任何声音。

```
NSString *toneFilename = [[NSBundle mainBundle] pathForResource:@"alarm" ofType:@"wav"];
    NSURL *toneURLRef = [NSURL fileURLWithPath:toneFilename];
    SystemSoundID Sound;

    AudioServicesCreateSystemSoundID(
                                     (__bridge CFURLRef) toneURLRef,
                                     &camerSound
                                     );

    AudioServicesPlaySystemSound(Sound); 
```

当我尝试使其振动时，它可以工作：

```
AudioServicesPlayAlertSound(kSystemSoundID_Vibrate); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T15:16:05.743

使用 AVFoundationFramework

添加`AVFoundation.framework`到项目。

```
#import <AVFoundation/AVFoundation.h>

NSString *toneFilename = [[NSBundle mainBundle] pathForResource:@"alarm" ofType:@"wav"];
NSURL *toneURLRef = [NSURL fileURLWithPath:toneFilename];
AVAudioPlayer *player = [[AVAudioPlayer alloc] initWithContentsOfURL: toneURLRef error: nil];
player.currentTime = 0;
player.volume = 1.0f;
[player play]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T15:39:54.423

`Sound`创建声音时，您没有正确处理变量。相反，您正在使用`camerSound`. `AudioServicesPlayAlertSound`使用正确的参数调用应该可以。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-20T06:26:20.103

这对我来说很完美。

将 AVFoundation 和 AudioToolBox 框架添加到项目中

```
#import <AVFoundation/AVFoundation.h>
#import <AudioToolbox/AudioToolbox.h>

@interface TestViewController : UIViewController
{
    SystemSoundID SoundID;
}

@implementation TestViewController
-(void) viewDidLoad {
    [super viewDidLoad];
    NSURL *url = [[NSBundle mainBundle] URLForResource:@"test" withExtension:@"caf"];
    AudioServicesCreateSystemSoundID((__bridge CFURLRef)url, &SoundID);  //When using ARC, make sure to use __bridge
 }

-(void) playSound {
     AudioServicesPlaySystemSound(SoundID);
 } 
```

# matlab - Matlab 下标索引必须是实数正整数或逻辑数

> ID：13788551
> 
> 赞同：1
> 
> 时间：2012-12-09T14:57:41.367
> 
> 标签：matlab, subscript, bsxfun, matrix-indexing

我哪里做错了？问题出在：**R = sqrt(bsxfun(@minus,XX,(XX)').^2+bsxfun(@minus,YY,(YY)').^2);**

```
EO = 8.8541e-12; %eps0
A2 = 1.0e-2; %2a
N = 100; %num of subareas in a plate
M = sqrt(N); %num of subareas in one axis
DX = A2/M; % 2b
DY = DX; %2b
DL = DX; %2b

%  SECOND, CALCULATE THE ELEMENS OF THE COEFFICIENT MATRIX A
% Write all the subareas centers coordinates to X and Y 
%  SECOND, CALCULATE THE ELEMENS OF THE COEFFICIENT MATRIX A
% Write all the subareas centers coordinates to X and Y 
x = linspace(DL*0.5,DL*(M-0.5),M);
y = x;
[XX,YY]=meshgrid(x,y);
%%L = NaN(N,N);
**R = sqrt(bsxfun(@minus,XX,(XX)').^2+bsxfun(@minus,YY,(YY)').^2);**
idx_diagL = find(eye(N)~=0);
idx_not_diagL = find(eye(N)==0);
L(idx_not_diagL) = DL^2./(4.*pi*EO*R(mod(idx_not_diagL,10),floor(idx_not_diagL/N)));
L(idx_diagL)  = DL*0.8814/(pi*EO); %ln(1+sqrt(2)= 0.8814 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T15:15:23.913

问题*不*在于您所说的位置，而在于以下行：

```
L(idx_not_diagL) = DL^2./(4.*pi*EO*R(mod(idx_not_diagL,10),floor(idx_not_diagL/N))); 
```

简而言之，您的问题是您为 matrix 指定了零索引`R`，但在 MATLAB 中，零索引是非法的（它们从 1 开始，而不是 0！）。

现在，你从哪里得到零索引？您可以`R(..., ...)`使用以下行和列下标进行索引：

```
mod(idx_not_diagL, 10) 
```

和

```
floor(idx_not_diagL / N)) 
```

两者偶尔都会得到零值。

作为修复，我建议对行索引使用以下内容：

```
mod(idx_not_diagL, 10) + 1 
```

至于列索引，还有另一个问题。表达式的`floor(...)`范围从 0 到 99。一旦你修复它（我不确定你想要达到什么目的），它就会起作用。

# javascript - javascript 代码适用于 Firefox 和 IE，但不适用于 Chrome。怎么了？

> ID：13788556
> 
> 赞同：0
> 
> 时间：2012-12-09T14:58:08.263
> 
> 标签：javascript, google-chrome

正如标题所暗示的，这在 Chrome 之外的任何地方都有效，如果可能的话，我想修复它。用户可以从下拉框中选择一种颜色，并将其保存在 cookie 中，以供下次加载。但在 Chrome 中，下拉框不起作用。代码通过了验证器文本。

无论如何，如果你能提供帮助，那就太好了。

```
 <html>
        <head>
        <meta http-equiv="Content-Language" content=en-us>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <title>Background Color selection</title>
    </head>

    <body>
    <form onsubmit="return false;" action="">
    <p><select name="color_select" size="1" onchange="return setColor(this, global_name)">
      <option style="background-color: aliceblue;" value="aliceblue">aliceblue (#F0F8FF)</option>
      <option style="background-color: antiquewhite;" value="antiquewhite">antiquewhite (#FAEBD7)</option>
      <option style="background-color: aqua;" value="aqua">aqua (#00FFFF)</option>
      <option style="background-color: aquamarine;" value="aquamarine">aquamarine (#7FFFD4)</option>
      <option style="background-color: azure;" value="azure">azure (#F0FFFF)</option>
      <option style="background-color: beige;" value="beige">beige (#F5F5DC)</option>

    </select>&nbsp;
    <input type="button" value="Delete Cookie"
     onclick="delCookie(global_name); return getColor(color_select, global_name)"></p>
    </form>

    <script type="text/javascript">
    <!--//
    var global_name = 'color';
    //
    function getColor(sel, cookie_name) {
        var cookie_value = getCookie(cookie_name);
        if (!cookie_value) cookie_value = 'white';
        document.body.style.backgroundColor = cookie_value;
        var opt = sel.options;
        var x, len = sel.length;
        for (x=0; x<len; x++) {
            if (opt[x].value == cookie_value) {
                opt[x].selected = true;
                break;
            }
        }
        return true;
    }
    getColor(document.forms[0].color_select, global_name);
    //
    function setColor(sel, cookie_name) {
        var opt = sel.options[sel.selectedIndex].value;
        var oneDay = 24 * 60 * 60 * 1000;
        var oneYear = 365 * oneDay;
        var expDate = new Date();
        expDate.setTime(expDate.getTime() + oneYear);
        setCookie(cookie_name, opt, expDate);
        return getColor(sel, cookie_name);
    }
    // ---------------------------------------- //
    function getCookie(name) {
      var arg = name + "=";
      var alen = arg.length;
      var clen = document.cookie.length;
      var i = 0;
      while (i < clen) {
        var j = i + alen;
        if (document.cookie.substring(i, j) == arg)
          return getCookieVal (j);
        i = document.cookie.indexOf(" ", i) + 1;
        if (i == 0) break;
      }
      return null;
    }
    function getCookieVal(offset) {
      var endstr = document.cookie.indexOf (";", offset);
      if (endstr == -1)
        endstr = document.cookie.length;
      return unescape(document.cookie.substring(offset, endstr));
    }

    function setCookie(name, value) {
      var argv = setCookie.arguments;
      var argc = setCookie.arguments.length;
      var expires = (argc > 2) ? argv[2] : null;
      var path = (argc > 3) ? argv[3] : null;
      var domain = (argc > 4) ? argv[4] : null;
      var secure = (argc > 5) ? argv[5] : false;
      document.cookie = name + "=" + escape (value) + 
         ((expires == null) ? "" : ("; expires=" + expires.toGMTString())) + 
         ((path == null) ? "" : ("; path=" + path)) +  
         ((domain == null) ? "" : ("; domain=" + domain)) +    
         ((secure == true) ? "; secure" : "");
    }

    function delCookie(name) {
      exp = new Date();
      exp.setTime(exp.getTime() - (24*60*60*1000));
      var cval = getCookie(name);
      cval = (cval == null) ? "" : cval;
      document.cookie = name + "=" + cval + "; expires=" + exp.toGMTString();
    }

    //-->
    </script>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T15:50:59.563

正如[Germán Enríquez 的 jsfiddle](http://jsfiddle.net/zsf7S/)所展示的，该代码可以在 Google Chrome 中运行（至少在 24.0 beta 版中）。

我可以建议两件事：

1.  通过导航到 chrome://extensions/ 禁用 Google Chrome 的扩展 - 其中一个可能会以某种方式干扰。
2.  导航到 chrome://settings/content 并启用 cookie（如果它们被禁用）。

另外，您说代码已通过验证。对于初学者来说，HTML 页面需要一个 doctype，很抱歉，但它没有通过。您可以在这里自己尝试：http: [//validator.w3.org/#validate_by_input](http://validator.w3.org/#validate_by_input)

此外，尝试在[http://www.jslint.com/](http://www.jslint.com/)上对 JavaScript 代码进行 linting，您会惊讶于它会在您的代码中发现多少麻烦。例如，`var argv = setCookie.arguments;`这不是访问函数参数的最佳方式，并且肯定会在严格模式下中断。此外，您的`exp = new Date();`语句会将`exp`变量泄漏到全局范围内。

如果这没有帮助，请提供有关该问题的更多详细信息，我们将作出相应的答复。

## 更新

我刚刚注意到您在评论中提到您将 HTML 复制到文件中并在浏览器中打开它。您是否使用 访问您的文件`file://`？如果是这样，那可能就是 Chrome 给您带来问题的原因。实际上，谷歌浏览器：

> ...出于各种原因，故意禁用 file:// 上的 cookie...

这是自 2008 年以来**Chrome 中的 WontFix 问题 535 ，请参阅**[http://code.google.com/p/chromium/issues/detail?id=535](http://code.google.com/p/chromium/issues/detail?id=535)

尝试运行本地服务器并通过`http://localhost/`或打开文件`http://127.0.0.1/`

# javascript - SproutCore：在 Buildfile 中设置代理不起作用

> ID：13788557
> 
> 赞同：0
> 
> 时间：2012-12-09T14:58:21.087
> 
> 标签：javascript, database, web-applications, proxy, sproutcore

我在构建文件中添加了以下行： `proxy "/tasks", :to => "localhost:3000"`

然而，我得到的错误是`GET http://localhost:4020/tasks 404 (Not Found)`. 这意味着，代理设置尚未生效。我哪里错了？

这是构建文件：

```
config :todos, :required => :sproutcore
proxy "/tasks", :to => 'localhost:3000' 
```

注意：我也尝试重新启动服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:14:47.033

通过将行添加到项目构建文件而不是应用程序构建文件来修复它。

# android - Android.mk 中的后编译、预链接构建步骤

> ID：13788558
> 
> 赞同：0
> 
> 时间：2012-12-09T14:58:38.907
> 
> 标签：android, android-ndk, android-build, custom-build-step

我需要使用`ar`从包含的源构建的几个目标文件创建一个库，`LOCAL_SRC_FILES`然后在构建最终库时链接它。

这是可能的，如果是的话 - 我该怎么做？

我看着 int`BUILD_SHARED_LIBRARY`用它的扩展变体代替，但兔子洞太深了（即我还没有那么绝望）。

我想这样做的原因是因为我已经将几个小型库合并为一个并尝试将其构建为一个整体。我知道将它们分隔在不同的模块中，这些模块用它们自己的 Android.mk 文件构建为 stat 是一个更好的解决方案，但我的时间很短。

**编辑**：问题的前提不再有效，因为我忘记将一些库的源文件添加到`Android.mk`文件中，而只添加了主库的文件。同时，我将依赖项的标头添加到`LOCAL_C_INCLUDES`，这样它们就变成了链接时依赖项，而不是我想要的编译时依赖项。因此我实际上不需要在编译和链接之间建立一个库。

改写后的问题：

是否有可能，如果是，如何将自定义构建步骤添加到 Android.mk 文件中，该文件在源文件编译**之后但****在**将它们链接到最终库/可执行文件之前执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:43:17.717

您始终可以将预编译的对象或库添加到您的链接命令，例如

```
LOCAL_LDLIBS += ../external/obj1.o /full/path/obj2.o /other/path/libOther.a 
```

# r - R：由于 UseMethod("getModelInfo",model) 中的错误，多图无法正常工作

> ID：13788563
> 
> 赞同：3
> 
> 时间：2012-12-09T14:59:30.510
> 
> 标签：r, ggplot2

在 R 中，我准备了多个`ggplot2`图形，它们保存到如下变量中：

```
flashplot <- ggplot(flash, aes(x=flash$Year, y=flash$Proc)) 
+ stat_smooth(method="lm", formula = "flash$Proc ~ poly(flash$Year, 2, raw=TRUE)", n=14, level=0.9) 
+ geom_point(shape=19) + ylab("Percentage of total existing versions") 
+ xlab("Years of Existence") + scale_x_continuous(breaks = c(0,2,4,6,8,10,12,14,16,18,20)) 
```

绘制单个图形按预期工作，但我想使用 multiplot 绘制 4 个图形（2 x 2），如[R 食谱中所述](http://wiki.stdout.org/rcookbook/Graphs/Multiple%20graphs%20on%20one%20page%20%28ggplot2%29/)。

当我遇到错误时，我尝试了食谱中的示例，我认为它可以工作，但它给了我同样的错误：

```
> multiplot(p1, p2, p3, p4, cols=2)
Error in UseMethod("getModelInfo", model) : 
  no applicable method for 'getModelInfo' applied to an object of class "c('gg', 'ggplot')" 
```

我在 Windows 7 下使用 R 2.15.2，以及最新的包`ggplot2`和`coefplot`：

```
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: i386-w64-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=German_Austria.1252  LC_CTYPE=German_Austria.1252   
[3] LC_MONETARY=German_Austria.1252 LC_NUMERIC=C                   
[5] LC_TIME=German_Austria.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] coefplot_1.1.8 ggplot2_0.9.3 

loaded via a namespace (and not attached):
 [1] colorspace_1.2-0   dichromat_1.2-4    digest_0.6.0       grid_2.15.2       
 [5] gtable_0.1.2       labeling_0.1       MASS_7.3-22        munsell_0.4       
 [9] plyr_1.8           proto_0.3-9.2      RColorBrewer_1.0-5 reshape2_1.2.2    
[13] scales_0.2.3       stringr_0.6.2      useful_1.1.6 
```

任何帮助我解决问题的提示将不胜感激。我错过了什么吗？我已经在网上搜索过，但没有发现任何有用的信息

-- 根据要求，这里是示例数据：

```
library(ggplot2)

# This example uses the ChickWeight dataset, which comes with ggplot2
# First plot
p1 <- 
    ggplot(ChickWeight, aes(x=Time, y=weight, colour=Diet, group=Chick)) +
    geom_line() +
    ggtitle("Growth curve for individual chicks")

# Second plot
p2 <- 
    ggplot(ChickWeight, aes(x=Time, y=weight, colour=Diet)) +
    geom_point(alpha=.3) +
    geom_smooth(alpha=.2, size=1) +
    ggtitle("Fitted growth curve per diet")

# Third plot
p3 <- 
    ggplot(subset(ChickWeight, Time==21), aes(x=weight, colour=Diet)) +
    geom_density() +
    ggtitle("Final weight, by diet")

# Fourth plot
p4 <- 
    ggplot(subset(ChickWeight, Time==21), aes(x=weight, fill=Diet)) +
    geom_histogram(colour="black", binwidth=50) +
    facet_grid(Diet ~ .) +
    ggtitle("Final weight, by diet") +
    theme(legend.position="none")        # No legend (redundant in this graph) 

multiplot(p1, p2, p3, p4, cols=2) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-19T21:46:48.240

通过使用名为`grid.arrange()`. 您需要安装调用的包`gridExtra`才能使用它：

```
grid.arrange(p1,p2,p3,p4, ncol = 2, main = "Main title") 
```

[参考](http://rstudio-pubs-static.s3.amazonaws.com/2852_379274d7c5734f979e106dcf019ec46c.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:05:00.723

问题解决了。我以为我应该使用包中的预定义`multiplot`函数`coefplot`，但实际上我必须使用自定义函数，该函数已在[R 食谱页面](http://wiki.stdout.org/rcookbook/Graphs/Multiple%20graphs%20on%20one%20page%20%28ggplot2%29/)上定义。

```
multiplot <- function(..., plotlist=NULL, file, cols=1, layout=NULL) {
  require(grid)

  # Make a list from the ... arguments and plotlist
  plots <- c(list(...), plotlist)

  numPlots = length(plots)

  # If layout is NULL, then use 'cols' to determine layout
  if (is.null(layout)) {
    # Make the panel
    # ncol: Number of columns of plots
    # nrow: Number of rows needed, calculated from # of cols
    layout <- matrix(seq(1, cols * ceiling(numPlots/cols)),
                    ncol = cols, nrow = ceiling(numPlots/cols))
  }

 if (numPlots==1) {
    print(plots[[1]])

  } else {
    # Set up the page
    grid.newpage()
    pushViewport(viewport(layout = grid.layout(nrow(layout), ncol(layout))))

    # Make each plot, in the correct location
    for (i in 1:numPlots) {
      # Get the i,j matrix positions of the regions that contain this subplot
      matchidx <- as.data.frame(which(layout == i, arr.ind = TRUE))

      print(plots[[i]], vp = viewport(layout.pos.row = matchidx$row,
                                      layout.pos.col = matchidx$col))
    }
  }
} 
```

# winapi - 什么是右键单击窗口标题栏菜单？是否有一个 winapi 调用来获取这个菜单的句柄？

> ID：13788564
> 
> 赞同：1
> 
> 时间：2012-12-09T14:59:31.433
> 
> 标签：winapi, menu, window, windows-xp

当用鼠标左键单击标题栏中的左上角图标时，会显示相同的菜单，然后在任务栏中的窗口表示上单击鼠标右键会再次显示该菜单。有没有办法获得这个菜单的句柄，添加我自己的命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T15:04:02.827

好的，我找到了，它叫[系统菜单](http://msdn.microsoft.com/en-us/library/ms647985.aspx)

# scrapy - Scrapy 教程：Sublime 编辑器中的“未命名模块”

> ID：13788567
> 
> 赞同：0
> 
> 时间：2012-12-09T14:59:44.983
> 
> 标签：scrapy

**情况：**我正在从头开始学习网络爬虫。我正在做[Scrapy 教程](http://doc.scrapy.org/en/latest/intro/tutorial.html)。

**问题：**没有名为 scrapy.item 的模块

```
Traceback (most recent call last):
  File "/Users/Thomas/Desktop/test sublime.py", line 4, in <module>
    from scrapy.item import Item, Field
ImportError: No module named scrapy.item
[Finished in 0.4s with exit code 1] 
```

在此先感谢我是初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:18:09.143

如果你输入，会显示什么路径`which scrapy`？在命令行？

尝试将该路径添加到 Python.sublime-build 文件（转到 Preferences->Browse Packages->Python->Python.sublime-build）

例如：

```
{
    "path": "/usr/bin/",
    "cmd": ["python", "-u", "$file"],
    "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
    "selector": "source.python"
} 
```

# r - 按角度投影 - 结果具有随机顺序

> ID：13788573
> 
> 赞同：3
> 
> 时间：2012-12-09T15:01:44.160
> 
> 标签：r, for-loop, mask

我一直在编写一些代码来对我一直在使用的天体物理学模型（特别是 sph）的数据进行一些分析。我目前遇到一个问题，即下面的代码输出图（其中十个）虽然它们看起来是正确的，但顺序不正确，即。一个自称为 30 度图形的图形看起来应该输出一个 50 度，80 应该是 40 等等，没有明显的模式。任何可以提供解决此问题的帮助将不胜感激。

```
#Set inclincations of observation
id <- c(0, 10, 20, 30, 40, 50, 60, 70, 80, 90)
i <- (id * pi) / 180

#Determine sign of velocity vector in direction of observer, then magnitude of said vector (using mask)
for (i in 1:length(i)) {
GD$vecdir <- (GD$Xvel * sin(i) + GD$Zvel * cos(i))
mask <- (GD$vecdir >= 0)
if (sum(mask) > 0) { 
  GD$vecmag[mask] <- sqrt((GD$Xvel^2 * sin(i)^2 ) + (GD$Zvel^2 * cos(i)^2))
}
if (sum(mask) < length(mask)) { 
  GD$vecmag[!mask] <- -(sqrt((GD$Xvel^2 * sin(i)^2 ) + (GD$Zvel^2 * cos(i)^2)))
}  
h2 <- hist(GD$vecmag, breaks=720,  plot=FALSE)
jpeg(paste("VMLOS", (i-1)*10, ".jpeg", sep = ""), width = 1280, height = 720)
print(plot(h2$mids, h2$counts, type="p", pch=4, lty=3, xlab="Velocity Vector Magnitude", ylab="counts", main=paste("VMLOS", (i-1)*10, sep="")))
print(lines(lowess(h2$mids, h2$counts, f=0.05), lwd=4, col="red"))
dev.off()
} 
```

对于上下文，i 是 xz 平面中的倾角，从该平面观察原点处的对象，以弧度为单位，从代码中显示的度数转换，然后 vecdir 部分计算出集合或粒子的矢量大小相对于观察者，远离原点的移动应该是正的或负的，然后掩码部分计算这样的大小。此外，代码的掩码部分返回警告：

```
1: In GD$vecmag[mask] <- sqrt((GD$Xvel^2 * sin(i)^2) + (GD$Zvel^2 *  ... :
  number of items to replace is not a multiple of replacement length
2: In GD$vecmag[!mask] <- -(sqrt((GD$Xvel^2 * sin(i)^2) +  ... :
  number of items to replace is not a multiple of replacement length 
```

对于每次使用（所以 20 个警告），这似乎不会对代码的输出产生负面影响，但很烦人，到目前为止我还无法修复它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T15:13:34.570

对于警告，您可能需要这个（注意右手表达式上的索引）：

```
GD$vecmag[mask] <- sqrt((GD$Xvel^2 * sin(i)^2 ) + (GD$Zvel^2 * cos(i)^2))[mask]

# ...

GD$vecmag[!mask] <- -(sqrt((GD$Xvel^2 * sin(i)^2 ) + (GD$Zvel^2 * cos(i)^2)))[!mask] 
```

这将改变结果。

此外，您没有迭代正确的值。1:length(i) 不是 i 中的值。改变这个：

```
i <- (id * pi) / 180

#Determine sign of velocity vector in direction of observer, then magnitude of said vector (using mask)
for (i in 1:length(i)) { 
```

对此：

```
angles <- (id * pi) / 180

#Determine sign of velocity vector in direction of observer, then magnitude of said vector (using mask)
for (i in angles) { 
```

原始代码使用 sin(1)、sin(2)、...，而不是向量中的值。这也会改变结果（并且使用错误的角度可能并不明显）。

# java - 在 Java 中使用 ENUMS 验证值组合的最佳方法是什么？

> ID：13788574
> 
> 赞同：1
> 
> 时间：2012-12-09T15:01:47.873
> 
> 标签：java, validation, enums

我正在通过定义如下 ENUM 来验证从数据库中检索到的记录的状态

```
public enum RecordStatusEnum {
    CREATED("CREATED"),
    INSERTED("INSERTED"),   
    FAILED("FAILED");

private String recordStatusValue;

    RecordStatusEnum (String status) {
        recordStatusValue= status;
    }

    public boolean isSuccess() {
        return (this.equals(CREATED) || this.equals(INSERTED));
    }

} 
```

isSuccess() 方法用于检查检索记录的状态（来自员工的列状态）

```
if (!(employee.getStatus().isSuccess())) {
            // return error
        } 
```

根据新要求，引入了一组条件，例如 A、B 和 C；对他们来说，员工表“条件”中有一个列。

所以我需要检索状态和条件，看看它是否属于两者结合的集合。

例如： isSuccess() 应该检查以下内容：

```
CREATED and A 
CREATED and B
INSERTED and C 
```

必须实现这一点，以便我可以轻松地将新组合“插入和 B”添加到列表中。

解决上述问题的最佳方法是什么？

***注意**：在实际的业务场景中，有很多不同的组合状态和检查（例如 isFailed() canBeModified() 等）*

***并且可以建议任何方法，即使它不使用 ENUMS。我提到了 ENUMS，因为我不想偏离现有的实现太多***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T15:23:17.660

有很多可能性，但你可以这样做（我删除了字符串状态，它不添加任何值，因为它等于枚举的名称）：

```
public enum RecordStatusEnum {
    CREATED(Condition.A, Condition.B),
    INSERTED(Condition.C),   
    FAILED();

    private Set<Condition> successConditions;

    RecordStatusEnum(Condition... successConditions) {
        this.successConditions = EnumSet.copyOf(Arrays.asList(successConditions));
    }

    public boolean isSuccess(Condition c) {
        return successConditions.contains(c);
    }
} 
```

编辑：

具有两组条件的示例：

```
public enum RecordStatusEnum {
    CREATED(EnumSet.of(Condition.A, Condition.B),
            EnumSet.of(Condition.C)),
    INSERTED(EnumSet.of(Condition.C),
             EnumSet.of(Condition.B),
    FAILED(EnumSet.noneOf(Condition.class),
           EnumSet.noneOf(Condition.class));

    private Set<Condition> successConditions;
    private Set<Condition> modificationConditions;

    RecordStatusEnum(Set<Condition> successConditions,
                     Set<Condition> modificationConditions) {
        this.successConditions = successConditions;
        this.modificationConditions = modificationConditions;
    }

    public boolean isSuccess(Condition c) {
        return successConditions.contains(c);
    }

    public boolean canBeModified(Condition c) {
        return modificationConditions.contains(c);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T15:32:23.703

您还可以比较序数值，如下所示：

```
public enum RecordStatusEnum {
   CREATED,
   INSERTED,   
   UPDATED,
   NEW,
   FAILED,
   FAILED_NO_DB,
   FAILED_CONSTRAINT_VIOLATION;

 public boolean isPersisted(RecordStatusEnum status) {
    return status.ordinal < NEW.ordinal;
 }

 public boolean isError(RecordStatusEnum status){
    return status.ordinal >= FAILED.ordinal;
 } 
```

}

# java - 获取球衣后端的所有输入文件

> ID：13788577
> 
> 赞同：1
> 
> 时间：2012-12-09T15:02:11.740
> 
> 标签：java, forms, post, input, jersey

我有一个带有动态数量的`<input type='file' />`文件和文本框的 html 表单`<input type='text' />`。我怎样才能在球衣后端获取所有这些数据？..我已经为这样的静态输入数量完成了它：

```
@POST
    @Path("post")
    @Consumes("multipart/form-data")
public Response postCategory(@FormDataParam("text1") String text1,FormDataMultiPart  fm,
            @FormDataParam("file1") InputStream file1,
            @FormDataParam("text2") String text2,
            @FormDataParam("file2") InputStream file2) {

        System.out.println("CategoryService.postCategory()");
        System.out.println("text1:" + text1);
        System.out.println("text2:" + text2);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T02:30:40.840

您可以使用 FormDataMultiPart 通过字段名称或字段索引获取所有表单字段值：

```
 @POST
    @Consumes("multipart/form-data")
    public Response create(FormDataMultiPart multiPart ) {

        String text1 = multiPart.getField("text1").getEntityAs(String.class);
        byte[] file1 = multiPart.getField("file1").getEntityAs(byte[].class);

        String text2 = multiPart.getBodyParts().get(2).getEntityAs(String.class);
        byte[] file2 = multiPart.getBodyParts().get(3).getEntityAs(byte[].class);

        return Response.ok().build();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T18:28:28.417

可能这就是您要寻找的东西：

```
 @POST
  @Consumes("application/x-www-form-urlencoded")
  public void post(MultivaluedMap<String, String> formParams) {

  } 
```

一旦你有了它，`Map`那么你几乎可以做任何事情。您可以连接`file + i`并检查地图是否包含该键，如果是，则取值直到`i`地图中没有此类键的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-17T01:02:56.210

希望下面的代码会有所帮助。

```
@POST
@Path("/fileupload")
@Produces(MediaType.TEXT_PLAIN)
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response uploadFile(
        final FormDataMultiPart multiPart) {
    Map<String,List<FormDataBodyPart>> formFields = multiPart.getFields();
    try {
        dir = "/yourdir/";

        for (Map.Entry<String,List<FormDataBodyPart>> e : formFields.entrySet()) {
            String fieldname = e.getKey(); // Field name of the form, you can add or check the form name here
            List<FormDataBodyPart> bodyParts= e.getValue();
            if (bodyParts != null) {
                for (int i = 0; i < bodyParts.size(); i++) {
                    BodyPartEntity bodyPartEntity = (BodyPartEntity) bodyParts.get(i).getEntity();
                    String fileName = bodyParts.get(i).getContentDisposition().getFileName();
                    String path = dir + File.separator + fileName;
                    // you'r own file IO Utility 
                    FileIOUtil.writeToFile(bodyPartEntity.getInputStream(), path);
                }
            }
        }
    } catch(Exception e) {
        e.printStackTrace();
    }
    // ... ... ... building response 
```

祝你好运

# cross-browser - 浏览器支持混合背景位置值

> ID：13788578
> 
> 赞同：2
> 
> 时间：2012-12-09T15:02:16.103
> 
> 标签：cross-browser, css

从 CSS2.1 开始，可以混合 CSS 背景位置值，如`background-position: center 20px`或`background-position: 200px bottom`。

现在我需要知道这个浏览器支持有多好，因为我听说 Opera 版本 < 8 和真正早期的 Firefox 版本（大约 V1）有问题或不支持它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T15:53:34.693

当您仅考虑 2012 年重要的浏览器和版本时，浏览器对此的支持是完美的。您提到的 Opera 和 Firefox 版本是**8 年前**发布的！

也就是说，为了历史的缘故：

*   此更改列在[Opera 8 的更改日志中](http://www.opera.com/docs/changelogs/windows/800)。所以是的，以前的版本不支持它。

*   Mozilla 通过[这个增强](https://bugzilla.mozilla.org/show_bug.cgi?id=219829)在 Gecko 1.7 中实现了它。Gecko 1.7 被 Mozilla 1.7 和 Firefox 1.0 使用（尽管它可能也在一些后期的 0.9 版本中）。因此，从技术上讲，Firefox 从其第一个稳定版本开始就一直基本支持此更改。

*   KDE 在 KHTML 中实现了它，修复[了这个错误](https://bugs.kde.org/91572)。当然，这在 Safari 1.3 的 WebKit 中得到了采用。Safari 1.2 及以下不实施此更改。

*   惊喜！IE 一直支持这种语法（至少从 IE5.0 开始），我相信这可能是改变 CSS2.1 开始的部分原因。

`y x`请注意，当您混合单位时，较新的版本可能会“正确”解释值，而实际上[它们不应该如此](http://www.w3.org/TR/CSS21/colors.html#propdef-background-position)。但既然你应该首先编写有效的 CSS，那也不重要。

# macos - 使用 node-orm（在 osx 10.6.8 下）使 node.js 应用程序连接到 PostgreSQL 时出现问题

> ID：13788579
> 
> 赞同：6
> 
> 时间：2012-12-09T15:02:16.763
> 
> 标签：macos, node.js, express

我正在尝试让一个小型 nodejs 应用程序在 osx (10.6.8) 下运行，并连接到我的本地主机 Postgres 数据库。我正在使用 node-orm (https://github.com/dresende/node-orm2) 以及 Postgres 绑定 (https://github.com/brianc/node-postgres)。

出于某种原因，当我使用`orm.connect`并将连接 url 作为字符串提供给它时​​，它失败了：

```
Error: getaddrinfo ENOENT
    at errnoException (dns.js:31:11)
    at Object.onanswer [as oncomplete] (dns.js:123:16) 
```

如果我将 localhost 更改为 127.0.0.1。它也会因超时异常而死。

使用 vanilla postgress 绑定连接到数据库，使用相同的连接字符串是成功的，我什至设法让一些测试查询运行，得到结果等。

我尝试使用 vanilla postgress api 手动设置 DB 客户端，然后使用`orm.use`. 这设法成功连接到数据库，但每次我尝试执行查询时，什么都没有发生。它不会产生错误，但 sinply 会卡在 QueryQueue 中并且不会调用成功回调。我检查了数据库日志，似乎也没有检测到查询。

我该怎么办？我有一点疑惑

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-03-15T15:32:03.023

我在飞机上遇到了这个问题。我只在未连接到网络时收到`Error: getaddrinfo ENOENT`，即使我在本地运行数据库服务器。这是我为修复它所做的：

而不是使用`localhost`，使用`127.0.0.1`。

所以你的连接字符串将从

```
 postgresql://user:pass@localhost:5432/db_name 
```

至

```
postgresql://user:pass@127.0.0.1:5432/db_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T11:35:15.943

无法从问题中找出真正的问题。看起来您的连接字符串是错误的。但这是一个与[https://github.com/brianc/node-postgres一起使用的代码块](https://github.com/brianc/node-postgres)

`

```
var application_root = __dirname,
        pg = require('pg');

    // database

    var conString = "postgres://username:password@172.28.6.250:5432/db_name";

    function processReqResSql(req, res, sql) {
        pg.connect(conString, function (err, client) {
            if (err) {
                res.writeHead(404, {
                    'Content-Type': 'application/json'
                });
                res.write('{couldnt connect to db}');
            } else {

             var query = client.query(sql);
                /
                var dbResponse ="";
                query.on('row', function(row) {
                 console.log(row);

                  dbResponse = dbResponse+JSON.stringify(row);
                 });

                query.on('end', function() { 
                  client.end();
                   res.writeHead(200, {"Content-Type": "application/json"});
                   res.write("{ results:{"+dbResponse+"}");

                   res.end();
             });

            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-22T16:39:34.717

检查您的 postgre 服务器是否已启动。您可以通过给出以下命令来启动它：

```
pg_ctl -D <db-name> -l logfile start 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-10T06:51:00.977

就我而言，我忘记根据需要添加标题。`Content-Type = application/json`

如果这不是导致错误的情况，您可以将您的数据库配置替换为：

**旧**：

```
var config = {
        host: 'localhost',
        database: 'dbname',
        user: 'postgres',
        password: 'secret',
        port: 5432
    }; 
```

**替换代码：**

```
var config = {
    host: '127.0.0.1',
    database: 'dbname',
    user: 'postgres',
    password: 'secret',
    port: 5432
}; 
```

**并使用此配置连接数据库：**

```
const {
        Pool
    } = require('pg');
    const pool = new Pool(config);

    pool.connect((err, client, done) => {
// Your code logic
}; 
```

# javascript - Extjs 4 表单提交 dom 未定义

> ID：13788580
> 
> 赞同：1
> 
> 时间：2012-12-09T15:02:22.497
> 
> 标签：javascript, extjs

我将一个表单变量传递给我的窗口，并且记录是从网格/存储中填充的。以下是代码：

```
{
    tooltip: 'Edit', 
    handler: function(grid, rowIndex, colIndex){
        var rec=grid.getStore().getAt(rowIndex); 
        var edit_app=Ext.create('Ext.Window',{ 
            title: 'Edit Applicant: ' + rec.ge('app_name'),
            items:[app_form],
            buttons:[{
                text: 'Update',
                handler:function(){
                    if(edit_app.down('form').getForm().isValid()){ //or  app_form.getForm().isValid(
                        edit_app.down('form').getForm().submit({ 
                             url: 'api/api.php',
                             waitMsg: '..submitting',
                             success: function(form,actns){
                                 edit_app.hide();
                             },
                             failure: function(fomr,actnz){
                                 alert('Error with submission');
                                 edit_app.close();
                             }
                         });
                    }
                }
            }, {
                text: 'Close', 
                handler: function(){
                    edit_app.hide();
                }
            }]
        }).show();

        var form = edit_app.down('form').getForm(); //app_form.getForm()
        form.loadRecord(rec);
    }
} 
```

当我第一次填充表单时，它提交更新就好了。但是，当我第二次尝试相同的操作时，我收到以下消息：

> me.getRenderTarget(...).dom 未定义
> 
> ```
> targetNodes = me.getRenderTarget().dom.childNodes, 
> ```

我一直在尝试使用谷歌搜索解决方案，但直到现在还没有成功。帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T03:49:28.247

我相信问题可能是你使用“Ext.create”来构建一个新的窗口对象，每次调用处理程序，并将表单作为变量引用传递，并在何时使用“隐藏”和“关闭”你已经完成了表格。这可能会导致很多冲突，因为 Ext 尝试访问原始对象，并且找不到子对象，这就是您的错误的样子。表单仍然可以与原始对象相关联，或者您的窗口选择器可能正在获取原始窗口，该窗口现在不再具有表单。无论哪种方式，Ext 的选择器都是混乱的。

要对此进行测试，请尝试将 Window 创建移到处理程序之外，并调用“myWindow.show()”和您的表单填充代码。

# smalltalk - Smalltalk 绑定

> ID：13788585
> 
> 赞同：2
> 
> 时间：2012-12-09T15:02:33.737
> 
> 标签：smalltalk, pharo, squeak

我对 smalltalk 不是很熟悉，但是当我初始化自己的类时，我想做的是覆盖另一个“新”类。这与 Class>>bindingOf: 有什么关系？

编辑：

我想要实现的是：如果 ObjectA 调用`new`，则 ObjectB 处理请求。
ObjectB 与 ObjectA 无关。
这可以通过仅更改 ObjectB 的实现来完成吗？

编辑：我`ObjectB`在这个故事中是一个`ObjectTracer`，我想要它做的是表现得有点像`ObjectA`. 我是否更改`ObjectA`了`new`使用类的方法字典的实现以及如何完成？

编辑：这是我想要实现的：

```
| obj |
obj := ObjectA new.
obj aMethod. 
```

真正发生的事情是，当`new`被发送到时`ObjectA`，它被替换为（包装器）提供的实现，就像他们的答案中提到`ObjectB`的 aka.nice 和 Hernan 一样，处理用于. 从本质上讲，我是否有可能只需要替换's ？`ObjectB``#doesNotUnderstand``ObjectA`
`ObjectB``ObjectA``#new`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T20:21:53.857

大多数跟踪器、分析器和采样器都监视系统的执行。如果您想开发一个实际修改系统的示踪剂，您必须非常了解它的动态以避免附带影响。

这是示踪剂的基本公式：

*   您将使用 Tracer (anObjectB) 包装 anObjectA
*   使用“object”实例变量创建一个 Tracer 类（大多数 Tracers 子类都来自 nil 左右）
*   在 Tracer 的类端实现#initialize 删除超类指针（超类：= nil）
*   在 Tracer 的类端实现 #on:anObjectA 以将 anObjectA 存储在 Tracer 的对象中 iv

在 Tracer 的实例端实现#doesNotUnderstand: aMessage，就像这个模板：

```
doesNotUnderstand: aMessage
"trace the selector then pass the message on"

| result |
aMessage arguments size = 0
  ifTrue:
    [result := object perform: aMessage selector]
  ifFalse:
    [result := object perform: aMessage selector withArguments: aMessage arguments].
^result 
```

在 #perform: send 之前的情况下，您可能会访问 ObjectA 方法字典并将“aMessage”CompiledMethod 替换为另一个。要访问某个类的方法字典，只需在一些 Smalltalks 中发送#methodDictionary 或#>>。

你可以在你知道如何进行反射的情况下放置一个新的编译方法，甚至替换整个字典：

```
| methodDictionary |
methodDictionary := MethodDictionary new.
methodDictionary at: #basicNew put: (Object compilerClass new
                                compile: 'basicNew ^Point basicNew'
                                in: Object
                                notifying: nil
                                ifFail: []) generate. 
```

请注意，您不需要将方法驻留在要评估的 MethodDictionary 中。查看#valueWithReceiver:arguments 的发件人：

最后你发送到你的新对象

```
anObjectA := MyTracer on: ObjectA new.
anObjectA example1. 
```

是的，你也可以把它放在 ObjectA 的新方法中。你最好阅读一些关于 Smalltalk 中反射的章节，网络上有很多内容，因为 Smalltalk 是进行计算反射的最佳平台。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T16:06:47.737

不，#bindingOf: 与编译方法有关。

可通过多种方法访问的变量，如全局变量、类变量或池变量，通过在方法文字中存储相同的绑定来共享。绑定是一种关联，其键是变量名，值是变量值。

当您的代码使用变量时，该方法将#value 发送到引擎盖下的绑定，并且当您将值存储到变量中时，它会发送#value：

但是请注意，根据 Smalltalk 的风格，这些操作可能会在字节码中进行优化，并替换为直接访问绑定的第二个实例变量（值）。

因此编译器需要检索 bindingOf: aSymbol 才能访问任何共享变量，其中 aSymbol 是变量的名称。因为变量访问的范围取决于类（只有一个类及其子类可以访问类变量......），所以会查询该方法编译到的类以获取该信息。

如果你想覆盖 YourClass 中的实例创建，只需在类侧覆盖#new（我们说 YourClass class>>#new）。如果您使用 Squeak/Pharo 方言，大多数情况下，您可以通过在实例端 (YourClass>>#initialize) 重写 #initialize 来实现特定的实例化，因为 #new 将调用 #initialize。

**编辑**

如果您想使用 ObjectTracer 捕获 #new 到 ObjectA 的发送，您可以执行以下操作：

```
| theTrueObjectA |
theTrueObjectA := ObjectA.
[Smalltalk globals at: #ObjectA put: (ObjectTracer on: ObjectA).
"insert the code you want to test here"
ObjectA new]
    ensure: [Smalltalk globals at: #ObjectA put: theTrueObjectA]. 
```

**EDIT2**最后一句可以替换为`ensure: [ObjectA xxxUnTrace]`

然而，现代的 squeak 调试器是侵入性的，它本身会向 ObjectTracer 发送许多消息，导致其他调试器弹出......您应该首先打开一个 Preferences 窗口并禁用 logDebuggerStackToFile。

请注意，所涉及的机制是消息#doesNotUnderstand：由对象在它不理解消息时发送。ObjectTracer 覆盖 #doesNotUnderstand: 以弹出调试器。

你可以继承 ProtoObject 来安装你自己的 #doesNotUnderstand: 处理（就像只是在转录或文件中写一些东西）。

另请注意，ObjectTracer #inheritsFrom: ProtoObject 和 ProtoObject 本身 #respondsTo: 许多消息不会被 ProtoObject>>#doesNotUnderstand 捕获：

最后说明：我在上面用#表示可以理解的消息。

**编辑 3：**一种可能的解决方案是定义一种新的 ObjectTracer，其中包含两个实例变量 tracedObject 和 messageMapping 以及此实例创建：

```
MessageInterceptor class>>on: anObject interceptMessages: aDictionary
    "Create an interceptor intercepting some messages sent to anObject.
    aDictionary keys define message selectors that should be intercepted.
    aDictionary values define block of code that should be evaluated in place.
    These blocks always take one argument for passing the traced Object,
    plus one argument per message parameter.
    snip..."

MessageInterceptor>>doesNotUnderstand: aMessage
    mapping := messageMapping at: aMessage selector
        ifAbsent:
            ["We don't intercept this message, let the tracedObject handle it"
            ^aMessage sendTo: tracedObject].
    ^mapping valueWithArguments: {tracedObject} , aMessage arguments 
```

例如，您可以这样使用它：

```
| interceptor |
interceptor := MessageInterceptor on: ObjectA interceptMessages:
    ({#new -> [:class | ObjectTracer on: class new]} as: Dictionary).
[Smalltalk globals at: #ObjectA put: interceptor.
"insert the code you want to test here"
ObjectA new yourself]
    ensure: [interceptor xxxUnTrace]. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-12T20:04:05.040

对象可以理解的方法存储在该对象的类中。如果你想重写实例创建 #new 方法发送到你在类的类上操作过的类，即它的元类

```
meta := ObjectA class. 
```

您可以在此处阅读有关元类的信息：[CSE 341：Smalltalk 类和元类](http://courses.cs.washington.edu/courses/cse341/04wi/lectures/17-smalltalk-classes.html)。

每个类，包括类的类（元类），都将它们的实例可以理解的消息存储在方法字典中，在 Pharo 中是名为 methodDict 的实例变量。如果您希望一个对象能够接收一条消息，您必须在该字典中插入一个 CompiledMethod，它将作为您的消息发送的结果执行。Smalltalk 中的类有一个方便的编译方法，可用于在类中安装 CompiledMethods，例如

```
ObjectA 
    compile: 'new
        ^ObjectB new'
    classified: 'instance creation' 
```

如果您的 ObjectA 已经定义了 #new 方法，这将覆盖它。您必须缓存旧的 CompiledMethod 以保留它以供以后恢复。

在现实生活中，您将使用 Method Wrappers 来实现您想要在这里实现的目标，请查看[Wrappers to the Rescue](https://www.researchgate.net/publication/221496556_Wrappers_to_the_Rescue)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T00:07:10.897

在我看来，您只需要实现 ObjectA 类>>new。你可以这样做：

```
new
  inst := self basicNew.
  ^ ObjectB wrapping: inst 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T16:53:01.603

在我碰巧打开的当前 Moose (Pharo) 图像中，有 171 个新的实现和 1207 个初始化的实现。这表明您更有可能需要覆盖初始化而不是新的。浏览它们时，我发现以下想要覆盖 new 的常见情况：

*   抽象类，只创建我的子类
*   单例，改为调用 uniqueInstance
*   使用默认值创建
*   价值对象
*   与其他方言的兼容性

# image-processing - 使用 OpenCV 检测特定形状

> ID：13788588
> 
> 赞同：8
> 
> 时间：2012-12-09T15:02:53.543
> 
> 标签：image-processing, opencv, pattern-matching, shape, matching

我仍然是 OpenCV 的初学者。

目前，我正在尝试使用 OpenCV 检测以下链接中的图像中的特定形状。

![在此处输入图像描述](../Images/66ca096f694f183757977ae1e7d7b8df.png)

我已经阅读了许多关于使用 OpenCV 检测形状的博客和文章，但我没有发现任何与我正在从事的工作相关的内容。

另外，我不能使用 cvHistogram 之类的方法，因为我不想在两张几乎相同的图片中找到匹配项，而是想检测特定的形状，而不是矩形、圆形等几何形状。

你知道一种方法吗？

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T15:11:45.110

很难说如何检测这种形状。您应该指定一些关于您想要检测的形状的标准。例如在你的情况下：

1.  这应该总是在另一个轮廓内吗？
2.  它应该有那么大的黑色斑点吗？

等等。

在此之后，将更容易找到好的检测算法。

顺便说一下，阅读这些文档会很有用：

1.  [在图像中查找轮廓](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/find_contours/find_contours.html)
2.  [结构分析和形状描述符](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html)

# c++ - lambda 对象的 C++ 地址作为函数的参数

> ID：13788590
> 
> 赞同：8
> 
> 时间：2012-12-09T15:03:01.077
> 
> 标签：c++, c++11, lambda

根据我的经验，似乎：

*   在函数调用中创建的 lambda 表达式在调用后立即销毁
*   调用期望 a 的函数`std::function`会从 lambda 中创建一个临时对象 (std::function)，并且该对象在调用后被销毁

可以通过以下代码片段观察到此行为：

```
const function<void()>* pointer;

void a(const function<void()> & f)
{
    pointer = &f;
}

void b()
{
    (*pointer)();
}

int main()
{
    int value = 1;
    std::cout << &value << std::endl;

    // 1: this works    
    function<void()> f = [&] () { std::cout << &value << std::endl; };
    a(f);

    // 2: this doesn't
    a([&] () { std::cout << &value << std::endl; });

    /* modify the stack*/
    char data[1024];
    for (int i = 0; i < 1024; i++)
        data[i] = i % 4; 

    b();

    return 0;
} 
```

在第二种情况下到底发生了什么？是否有正确的调用方法`a()`而不创建显式`std::function`对象？

**编辑:** : 这两个版本（1 和 2）编译得恰到好处，但会产生不同的输出：

版本 1：

```
0x7fffa70148c8
0x7fffa70148c8 
```

版本 2：

```
0x7fffa70148c8
0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T15:20:31.567

如果您创建一个临时文件，它将在行尾消失。正如您正确指出的那样，这意味着存储指向它的指针是一个坏主意。

如果要存储指向 a `std::function`（或其他任何东西）的指针，则需要确保在停止使用指针之前它的生命周期不会结束。这意味着您确实需要一个类型为 的命名对象`std::function`。

至于在第二种情况下发生了什么：您创建一个临时 lambda 以传递给函数。由于该函数需要 a ，因此将从 lambda 创建`std::function`一个临时值。`std::function`这两个都将在行尾被销毁。因此，您现在有一个指向已经销毁的临时对象的指针，这意味着尝试使用指向的对象会将您牢牢地带入未定义的行为领域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T15:06:31.380

*无状态 lambdas*没关系。无状态 lambda 具有到函数指针类型的隐式转换。

此外，无论实际的可调用类型如何，*总是*存在到 std::function<> 的隐式转换。

**但是，保留指向临时对象的指针存在问题**。我在第一次阅读代码时没有注意到这一点。

当然，这与 std::function 无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T16:05:00.377

临时对象在创建它们的语句结束时被销毁。您刚刚使用 lambda 演示了这一点。

你第一次传递的std函数不是临时的，所以它和变量一样长。它实际上存储了临时的副本。

要让您的 lamdas 持续超过一条线，您需要将其存储在某个地方并确定其使用寿命。

有很多方法可以做到这一点。标准函数是一种基于类型擦除的存储方式——即，存储标准函数而不是指向标准函数的指针。将类型更改`pointer`为非指针（和非常量），在分配给它时去掉`&`它，然后直接调用它。

通常避免将 const 引用函数参数的地址作为临时绑定来获取和存储，除非您在另一个重载中发现右值引用的可能性。

# opencl - PyOpenCL 图像处理 Vrs OpenCL 图像处理

> ID：13788594
> 
> 赞同：1
> 
> 时间：2012-12-09T15:03:59.547
> 
> 标签：opencl, pyopencl

就图像处理的实时实现而言`algorithm(fitering,segmentation,matching)`，哪个速度更快：**PyOpenCL**还是**OpenCL**？

1.  如何开始使用 PyOpenCL？
2.  哪些 IDE 可用于在 PyOpenCL 中编程？
3.  PyOpenCL 是否有单独的 SDK，或者我们是否使用 Nvidia 或 AMD 提供的相同 OpenCL SDK？

PyOpenCL 中没有太多可用的示例代码，因为它们在 OpenCL 中，请指定任何使所有内容都与 PyOpenCL 友好的链接......！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T19:17:42.917

PyOpenCL（用于 Python）和 OpenCL（用于 C/C++）只是框架。您可以根据应用程序使用的语言选择框架。这些都没有预先构建图像处理算法。如果您想要图像处理算法，请尝试构建在 OpenCL 之上的库。我在[ArrayFire for OpenCL](http://accelereyes.com/arrayfire)上工作，它具有图像处理功能（从 1 周开始可用），可能对您的工作有用。祝你好运！

# php - 随机抽奖，无需更换

> ID：13788600
> 
> 赞同：1
> 
> 时间：2012-12-09T15:05:30.673
> 
> 标签：php, mysql, sql, algorithm, random

我想要一个 PHP 代码从 MySQL 数据库中的表中一个一个地绘制一些 id 而无需随机替换。

现在我像这样实现它：

有一张桌子叫盒子

```
CREATE TABLE box
(
id INT UNSIGNED AUTO_INCREMENT,
PRIMARY KEY (id)
); 
```

假设它包含 15 条记录，

盒子

```
id:
=====
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
===== 
```

已抽出的 id 将在下次抽奖时记录并排除。

例如，

一开始，绘图的 SQL 将是

```
SELECT id FROM box RAND() LIMIT 1;`. 
```

说结果是4。

然后我画了4，下一个绘制的SQL会是

```
SELECT id FROM box WHERE id != 4 ORDER BY RAND() LIMIT 1; 
```

说这次结果是6。

也就是我画了4和6，所以下一个绘制的SQL会是

```
SELECT id FROM box WHERE id != 4 AND id != 6 ORDER BY RAND() LIMIT 1;" 
```

问题是：

如果表'box'包含2000条记录并且我已经绘制了1000+个id，那么下一个用于绘制的SQL会很长。**我想知道更长的 SQL 语句会使 MySQL 中的程序或进程运行得更慢吗？**如果是，是否有解决此问题的**解决方案/设计/算法**？**表中的记录可能会增加，因此我无法在绘图之前对 id 进行随机序列。**

* * *

更多关于这个问题：

PHP代码将被多个用户调用，因此每个用户都有一些他/她绘制的不同id。

实际上，在我当前的设计中，用户绘制的 id 存储在 PHP 会话变量中。当用户想要绘图时，存储在会话变量中的 id 将被访问用于绘图 SQL，如上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:10:11.613

为什么不在表格中添加另一列来指示该数字是否已绘制？

然后你的查询就变成了：

`SELECT id FROM box WHERE drawn = 0 ORDER BY RAND() LIMIT 1`

然后，之后：

`UPDATE box SET drawn = 1 WHERE id = 43`或您绘制的任何 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T15:11:19.020

编写的大多数查询将花费与您的查询大致相同的时间。

顺便说一下，查询中的条件等同于 NOT IN，您可能更容易应用 NOT IN

```
SELECT * FROM box WHERE id NOT IN (a[0],a[1]...) 
```

现在关于增加查询大小是否会减慢 MySQL 的答案是否定的，不是真的。

一篇关于为什么它不会减慢速度的文章在[这里](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:7565644027229)（记住你的查询相当于一个 not in）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T15:42:45.810

如果盒子有固定数量的记录，那么我会倾向于采用用户更多空间但应该运行得更快的方法。您的方法需要全表扫描来检索下一个值，因为`order by rand()`.

相反，为每个用户创建一个单独的“盒子”并最初进行随机排序：

```
CREATE TABLE userbox (
    userboxid INT UNSIGNED AUTO_INCREMENT,
    int boxid,
    userid int,
    PRIMARY KEY (userboxid),
    KEY (userid, userboxid)
); 
```

然后，当用户启动时，插入该用户的框中：

```
insert into userbox
    select id, <userid>
    from box
    order by rand() 
```

后续检索将使用 select 语句，例如：

```
select boxid
from userbox
where userboxid > <last user box id> and userid = <userid>
limit 1 
```

这种方法的优点是，在填充盒子的开销之后，每次检索下一个 id 应该只需要查看索引中的下一个值并从数据页中获取盒子 id。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T15:38:22.050

您可以为每个用户绘制的数字创建另一个表格

```
user_id     id
  1         129
  1         832
  2         23
 ... 
```

然后

```
SELECT id FROM box WHERE id NOT IN (SELECT id FROM user_drawn WHERE user_id=1) RAND() LIMIT 1; 
```

# php - PHP 命令行窗口宽度

> ID：13788601
> 
> 赞同：1
> 
> 时间：2012-12-09T15:05:35.063
> 
> 标签：php, console, command-line-interface

在我的 php 项目中，我输出了几个长度很长的字符串。我想将这些字符串切成小块（长度相同）来格式化我的输出。为了知道这些部分应该有多长，我需要知道我的输出窗口的宽度。（命令行模式）

有什么方法可以跨平台检测控制台宽度？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T15:25:53.553

看看[newt_get_screen_size](http://php.net/manual/en/function.newt-get-screen-size.php)。这为您提供了终端的行和列（窗口宽度）。

如果您仅在 Linux/Unix 上，您还可以使用[`stty -a`](http://linux.die.net/man/1/stty)和解析输出或使用[`tput cols`](http://linux.die.net/man/1/tput).

另请参阅[如何从 PHP cli 获取 linux 控制台 $COLUMNS 和 $ROWS？](https://stackoverflow.com/q/2203437/1741542).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-06T15:30:24.317

```
exec('mode con', $output); 
```

然后解析返回的内容。

# javascript - 更新月/年更改的日期字段-Jquery Date Picker

> ID：13788602
> 
> 赞同：2
> 
> 时间：2012-12-09T15:05:39.860
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-ui-datepicker

我正在尝试自定义 Jquery 日期选择器。我需要**在更改年份或月份而不单击日期的情况下更新输入字段上的日期。也就是说，如果 field 中已有日期，即使没有单击 date(days)，Datepicker 也必须更新该字段**。是否可以像这样更新*“目标日期字段”*？

我做了很多搜索，但找不到可行的解决方案。

```
<input type="text" id="DatePickerTest">

$(document).ready(function() {

$("#DatePickerTest").datepicker({

changeMonth:true,
changeYear:true,
showButtonPanel:true

}); 
```

请分享您的知识。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-21T09:52:33.790

尝试这个

**准备好内部文件**

```
//To Add DatePicker
        $("#DatePickerTest").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: "dd/M/yy",
            onChangeMonthYear: function (year, month, inst) {
                var date = $("#DatePickerTest").val();
                if ($.trim(date) != "") {
                    var newDate = month + "/" + inst.currentDay + "/" + year;
                    $("#DatePickerTest").val($.datepicker.formatDate('dd/M/yy', new Date(newDate)));
                }
            }
        }); 
```

# c# - 邮件合并成word

> ID：13788604
> 
> 赞同：4
> 
> 时间：2012-12-09T15:05:57.947
> 
> 标签：c#, ms-word, mailmerge

创建标签的最佳方式是使用现有的行业标准工具，例如 Microsoft Word。

您如何执行此操作并设置运输标签？

我不确定如何将合并字段映射到数据网格视图列。这是我到目前为止的代码：

```
// Create a new empty document.
DocumentModel document = new DocumentModel();

// Add document content.
document.Sections.Add(
    new Section(document,
        new Paragraph(document,
            new Field(document, FieldType.MergeField, "FullName"))));

// Save the document to a file and open it with Microsoft Word.
document.Save("TemplateDocument.docx");
// If document appears empty in Microsoft Word, press Alt + F9.
Process.Start("TemplateDocument.docx");

// Initialize mail merge data source.
var dataSource = new { FullName = "John Doe" };

// Execute mail merge.
document.MailMerge.Execute(dataSource);

// Save the document to a file and open it with Microsoft Word.
document.Save("Document.docx");
Process.Start("Document.docx"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:37:55.183

首先，您应该学习如何制作标签模板文档。例如，按照以下视频教程：[www.youtube.com/watch ?v=tIg70utT72Q](http://www.youtube.com/watch?v=tIg70utT72Q)

在保存模板文档之前，删除在邮件合并过程中创建的邮件合并数据源，因为您将使用 .NET 对象作为邮件合并数据源。要删除邮件合并数据源，请转到邮件选项卡 -> 开始邮件合并 -> 选择普通 Word 文档，如图所示： ![删除邮件合并数据源](../Images/82085a446d2c62347232073abae4a527.png)

将文档保存到文件中，例如“LabelTemplate.docx”。当您按 Alt + F9 时，您应该会看到如下图所示的域代码： ![标签模板内容](../Images/33c94c48c8c71d545aff188f54956690.png)

现在您已准备好使用[GemBox.Document](http://www.gemboxsoftware.com/document/overview)组件（您在问题中使用的代码）执行程序化邮件合并。这是如何执行邮件合并的 C# 代码：

```
// Set licensing info.
ComponentInfo.SetLicense("FREE-LIMITED-KEY");
ComponentInfo.FreeLimitReached += (sender, e) => e.FreeLimitReachedAction = FreeLimitReachedAction.ContinueAsTrial;

// Create mail merge data source. 
// You should use DataGridView.DataSource property - it will return DataView or DataTable that is data-bound to your DataGridView.
var dataTable = new DataTable()
{
    Columns =
    {
        new DataColumn("Name"),
        new DataColumn("Surname"),
        new DataColumn("Company")
    },
    Rows =
    {
        { "John", "Doe", "ACME" },
        { "Fred", "Nurk", "ACME" },
        { "Hans", "Meier", "ACME" }
    }
};

var document = DocumentModel.Load("LabelTemplate.docx", LoadOptions.DocxDefault);

// Use this if field names and data column names differ. If they are the same (case-insensitive), then you don't need to define mappings explicitly.
document.MailMerge.FieldMappings.Add("First_Name", "Name");
document.MailMerge.FieldMappings.Add("Last_Name", "Surname");
document.MailMerge.FieldMappings.Add("Company_Name", "Company");

// Execute mail merge. Each mail merge field will be replaced with the data from the data source's appropriate row and column.
document.MailMerge.Execute(dataTable);

// Remove any left mail merge field.
document.MailMerge.RemoveMergeFields();

// Save resulting document to a file.
document.Save("Labels.docx"); 
```

生成的“Labels.docx”文档应如下所示： ![标签邮件合并结果](../Images/58c5087f7aac3eb6c032cc60c282962d.png)

促销标头会自动添加，因为该组件是在试用模式下使用的。 [GemBox.Document 邮件合并](http://www.gemboxsoftware.com/Document/help/html/Mail_Merge.htm)非常灵活，它支持[分层邮件合并，通过处理](http://www.gemboxsoftware.com/Document/help/html/Mail_Merge.htm#Nested)[FieldMerging 事件](http://www.gemboxsoftware.com/Document/help/html/E_GemBox_Document_MailMerging_MailMerge_FieldMerging.htm)或指定[合并字段格式字符串](http://www.gemboxsoftware.com/Document/help/html/P_GemBox_Document_MailMerging_MailMerge_DefaultFormattingCulture.htm)来自定义每个字段的合并。

# css - Netbeans 没有显示带有最后一个 CSS 标记的页面

> ID：13788606
> 
> 赞同：-2
> 
> 时间：2012-12-09T15:06:30.677
> 
> 标签：css, caching, netbeans

我正在 NetBeans 上开发一个网页，并且我正在使用 CSS 文件来设置该页面的样式。当我从 NetBeans 运行该页面时，它没有将我最近对 ​​CSS 所做的更改（在我的情况下为背景颜色）。

但是，如果我使用 Chrome 从我的目录中运行该页面，一切都会很好，并且 CSS 文件中的最后一个添加内容会在我的网页上可见。

有谁知道解决方案？我猜 netbeans 正在缓存很多，并且没有在我的文件中添加最后一个内容？

我已经删除了缓存文件夹：`C:\Users\martins0011\AppData\Local\NetBeans` 但它仍然没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T19:37:31.637

修复了谢谢，我创建了另一个css文件并在我的html文件上使用了那个新的CSS文件..不知道为什么不使用其他：s无论如何谢谢..

# codeigniter - ExpressionEngine 中的 URL 段按年份分页

> ID：13788608
> 
> 赞同：0
> 
> 时间：2012-12-09T15:06:31.610
> 
> 标签：codeigniter, expressionengine

我正在尝试按年份显示频道条目的页面，但是如果没有年份（segment_4），我想显示所有结果，每页 10 个。

问题是第一年之前的结果不会显示，因为我现在已经设置了 segment_4 的问题。“下一页”链接包括“P10”作为段_4，这打破了我设置的逻辑。

谁能推荐一种技术，您可以使用 URLsegments 按年份显示频道条目，但不显示所有年份。

没有 segment_4 时运行的标记：

```
{exp:channel:entries channel="communications" limit="10" orderby="entry_date" sort="desc" dynamic="no"} 
```

当有 segment_4 时运行的标签：

```
{exp:channel:entries channel="communications" limit="10" orderby="entry_date" sort="desc" year="{segment_4}" month="{segment_5}"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:29:10.123

有两个插件可以帮助你。Switchee，除了是一个很好的案例逻辑外，还为您提供了正则表达式，您可以通过它检测分页。另一个您可能会查看 Mo 变量，它具有“如果分页”条件，也用于检测 URL 中的分页段。两者都可以在 devot-ee.com 上找到

# php - preg_replace 数组 php 简单的 html dom 解析器

> ID：13788610
> 
> 赞同：0
> 
> 时间：2012-12-09T15:06:31.957
> 
> 标签：php, preg-replace

我想替换数组的重复单词，所以我这样做：

```
$thisarray = preg_replace ("/HELLO/"), "BYE", $thisarray);

echo $thisarray[0]; 
```

这很完美......当我使用 PHP SIMPLE HTML DOM PARSER 指令“纯文本”时，问题就来了

```
$thisarray = preg_replace ("/HELLO/"), "BYE", $thisarray);

echo $thisarray[0]->plaintext; 
```

它说：**注意：试图获取非对象的属性**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T15:11:21.363

`$thisarray`是字符串数组或 simple_html_dom 实例数组。 *选一个*。

如果是前者，它们甚至都不是对象，因此不能有`plaintext`属性。

如果是后者，请小心将其传递给需要字符串的函数。需要字符串的函数要么阻塞对象，要么根据需要对它们进行字符串化。即使假设 a`simple_html_dom`知道如何将自己转换为字符串，`preg_replace`也会*返回*一个字符串（或字符串数​​组）。这意味着一旦`preg_replace`做了它的事情，你`$thisarray`用返回值替换，不管它以前是什么，*现在你有一个字符串数组*。看上面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T15:13:57.517

首先，如果您只想替换世界而不是模式，那么 preg_replace 不是一个高性能的函数。对于你的情况，`str_replace`更好。

然后，您只是滥用 $thisarray 变量。在您的函数之前，它是一个对象，之后，它不再是一个对象，因为 preg_replace 返回一个字符串或一个数组。

所以，你可以有一些更干净的代码：

```
$textToReplace = array('/HELLO/','other world to replace');
replacementText = array('BYE','other replacemnt text');
$cleanText = str_replace($textToReplace,$replacementText,$thisarray[0]->plaintext);
echo $cleanText; 
```

# ios - 如何以编程方式从越狱的 iPhone 应用程序中删除应用程序图标？

> ID：13788611
> 
> 赞同：4
> 
> 时间：2012-12-09T15:06:32.047
> 
> 标签：ios, ios5, jailbreak

如何为我的应用程序功能删除我的应用程序图标？我只想在越狱设备中这样做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T16:14:53.110

您必须修改应用程序包中的 Info.plist 文件以包含以下内容：

```
<key>SBAppTags</key>
<array>
    <string>hidden</string>
</array> 
```

（[来源](http://www.ifans.com/forums/threads/hide-applications.76176/)）

# php - PHP 从 $_GET[] 元素创建命名空间路径并使用它

> ID：13788612
> 
> 赞同：0
> 
> 时间：2012-12-09T15:07:05.283
> 
> 标签：php, namespaces, get

我想从这样的网址：example.com/?module=index&controller=index&action=hello 通过 $_GET[] 获取值，然后创建命名空间路径，如 application\modules\index\controllers\IndexController 然后

```
use application\modules\index\controllers\IndexController as IndexController;
$IndexController = new IndexController;
$IndexController->hello(); 
```

例如，但是当我尝试以随机方式创建路径时-> 错误和.. 我不知道该怎么做，请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:30:09.410

正如我在评论中提到的：你不能在 use 语句中使用变量，你必须在创建新实例时在变量中使用完全命名空间的类名。

所以它看起来像这样：

```
$module = $_GET['module'];
$ctrl = $_GET['controller'];
//Remember to use double backslashes in strings
$class = "application\\modules\\{$module}\\controllers\\{$ctrl}Controller";

$controller = new $class;
$controller->{$action}(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T15:22:59.267

更多代码会很有用，但这有帮助吗？

```
namespace Foobar;

class Foo {
    static public function test() {
        echo "Hello";
    }
}

call_user_func(__NAMESPACE__ .'\Foo::'.$_GET['action']); 
// or
call_user_func(array(__NAMESPACE__ .'\Foo', $_GET['action'])); 
```

# android - 语音转文本功能如何与应用程序集成？

> ID：13788615
> 
> 赞同：0
> 
> 时间：2012-12-09T15:07:12.203
> 
> 标签：android, speech-recognition, speech-to-text

我想做一个简单的游戏，它具有PICK、LEFT、Right和停止的功能。

我的问题是我想使用android的语音到文本功能将游戏的这些功能变成语音识别。我使用 eclipse 作为我的 IDE，我想知道如何将它与应用程序集成。

希望你能给我一个样品，这将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:18:24.277

```
Intent i = new Intent(
                        RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
                i.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
                        RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
                i.putExtra(RecognizerIntent.EXTRA_PROMPT, "Say the command!");
                startActivityForResult(i, 10); 
```

然后添加活动结果。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == 10 && resultCode == RESULT_OK) {
        ArrayList<String> s = data
                .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);

//Do whatever you want with the data here.      
    super.onActivityResult(requestCode, resultCode, data);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:14:16.600

那么你需要两件事。

1.  在后台运行语音识别器，这样就不会有干扰游戏的烦人对话

2.  可靠地识别您的目标词

对于#1。您需要[SpeechRecognizer](http://developer.android.com/reference/android/speech/SpeechRecognizer.html)和一个循环来运行它，例如使用[this](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/activation/WordActivator.java)的循环，或者我想您可以使用对话版本。无论哪种方式开始使用[这个抽象类](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/SpeechRecognizingAndSpeakingActivity.java)给你一个良好的开端。

对于＃2，您必须进行一些测试。下载[Android Sensor Playground](https://play.google.com/store/apps/details?id=root.gast.playground&hl=en)应用程序，看看识别器是否能够可靠地识别您的单词。如果这是真的，只需使用一个简单`Sting<Set>`的来匹配任何识别结果。（或者你可以使用[这个方便](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/text/match/WordMatcher.java)的类）如果识别器在某些单词上给你带来麻烦，那么你需要一些词干或语音匹配。看[这堂课](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/text/match/SoundsLikeWordMatcher.java)。

# java - JAXB 编组 Java 以输出 XML 文件

> ID：13788617
> 
> 赞同：17
> 
> 时间：2012-12-09T15:07:32.253
> 
> 标签：java, xml, jaxb, marshalling

问题是如何生成 XML 文件输出而不是 system.out？

```
package jaxbintroduction;

import java.io.FileOutputStream;
import java.io.OutputStream;

public class Main {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        itemorder.Book quickXML = new itemorder.Book();

        quickXML.setAuthor("Sillyme");
        quickXML.setDescription("Dummie book");
        quickXML.setISBN(123456789);
        quickXML.setPrice((float)12.6);
        quickXML.setPublisher("Progress");
        quickXML.setTitle("Hello World JAVA");

        try {            
            javax.xml.bind.JAXBContext jaxbCtx = javax.xml.bind.JAXBContext.newInstance(quickXML.getClass().getPackage().getName());
            javax.xml.bind.Marshaller marshaller = jaxbCtx.createMarshaller();
            marshaller.setProperty(javax.xml.bind.Marshaller.JAXB_ENCODING, "UTF-8"); //NOI18N
            marshaller.setProperty(javax.xml.bind.Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
            marshaller.marshal(quickXML, System.out);
            OutputStream os = new FileOutputStream( "nosferatu.xml" );
            marshaller.marshal( quickXML, os );

        } catch (javax.xml.bind.JAXBException ex) {
            // XXXTODO Handle exception
            java.util.logging.Logger.getLogger("global").log(java.util.logging.Level.SEVERE, null, ex); //NOI18N
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-10T19:36:18.640

如果您使用的是 JAXB 2.1 或更高版本，则可以直接编组到`java.io.File`对象：

```
 File file = new File( "nosferatu.xml" );
 marshaller.marshal( quickXML, file ); 
```

**对应的Javadoc**

*   [http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Marshaller.html#marshal%28java.lang.Object,%20java.io.File%29](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Marshaller.html#marshal%28java.lang.Object,%20java.io.File%29)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-09T15:09:33.690

您已经编组到`nosferatu.xml`. 只需删除或评论该行：

```
marshaller.marshal(quickXML, System.out); 
```

如果您不想显示输出并关闭`OutputStream`：

```
os.close(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T15:09:51.800

`Marshaller#marshall(...)`方法将 OutputStream 或 Writer 作为参数。如果你看过的话，你肯定会在 API 中找到这个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-27T09:25:08.177

这只是从 java 对象到 xml 文件的转换过程。它与序列化非常相似，您必须确定序列化和编组。在这里，我已经完成了编组的示例。您可以以类似的方式进行解组。

**带有 jaxp 注释的 bean 类：**

```
package com.ofs.swinapps;

import javax.xml.bind.annotation.XmlRootElement;

    @XmlRootElement
    public class Employee {
    private String name;
    private String id;
    private String department;
    private int age;
    private int salary;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
    public String getId() {
        return id;
    }
    public void setId(String id) {
        this.id = id;
    }

    public String getDepartment() {
        return department;
    }

    public void setDepartment(String department) {
        this.department = department;
    }

    public int getAge() {
        return age;
}

    public void setAge(int age) {
        this.age = age;
    }

    public int getSalary() {
        return salary;
    }
    public void setSalary(int salary) {
        this.salary = salary;
    }
    } 
```

**编组：**

```
import java.io.File;
import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;

public class Java2XMLExample {
    public static void main(String[] args) throws JAXBException {
 Employee employee = new Employee();
 employee.setName("Kowthal ganesh");
 employee.setAge(23);
 employee.setDepartment("Chola-ccms");
 employee.setId("947");
 employee.setSalary(8333);
 File file = new File("D:/build.xml");
 JAXBContext jaxbContext = JAXBContext.newInstance(Employee.class);
 Marshaller jaxbMarshaller = jaxbContext.createMarshaller();
 jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
 jaxbMarshaller.marshal(employee, file);
    }
} 
```

# exception - 我想使用 opencv 替换 vc++ 中的特定像素颜色并将该新图像存储在磁盘上

> ID：13788618
> 
> 赞同：0
> 
> 时间：2012-12-09T15:07:42.533
> 
> 标签：exception, opencv

这是我的编码部分

这是我的代码块

我越来越`System.Runtime.InteropServices.SEHException @ cvSaveImage("foo.jpg",depth_ipl);`

我也 `cv::imwrite("E:\image1.jpg",depth_ipl);`用过`cvSaveImage("foo.jpg",depth_ipl);`

它给了我`System.AccessViolationException`。

请帮忙。

```
 #include "stdafx.h"
  #include <tchar.h>
  #include <cv.h>
  #include <cxcore.h>
  #include <highgui.h>
  #include <iostream>

 using namespace cv;

int _tmain(int argc, _TCHAR* argv[])
{       
    cv::Mat3b image =cv::imread("image.jpg");

    for(Mat3b::iterator it=image.begin(); it!=image.end();it++)
    {
        if(*it==Vec3b(255,255,255))
        {
            (*it=Vec3b(0,0,255));
        }
    }
    IplImage* depth_ipl = new IplImage(image);

    cvSaveImage("foo.jpg",depth_ipl);

    return 0; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:24:19.230

我最好的猜测是您需要更改线路：

```
cv::imwrite("E:\image1.jpg",depth_ipl); 
```

至

```
cv::imwrite("E:\\image1.jpg",image); // notice the double backslash 
```

# amazon-ec2 - boto 并将 ebs 附加到 ec2 ...现在呢？

> ID：13788619
> 
> 赞同：0
> 
> 时间：2012-12-09T15:07:44.513
> 
> 标签：amazon-ec2, boto

我已使用以下内容使用 boto 将卷附加到 ec2。我正在使用 ubuntu 12.04。

```
region_id=boto.ec2.get_region(region,aws_access_key_id=aws_access_key_id, aws_secret_access_key=aws_secret_access_key)
    conn = ec2.connection.EC2Connection(region=region_id,aws_access_key_id=aws_access_key_id, aws_secret_access_key=aws_secret_access_key)
    vol = conn.create_volume(gigs,placement)
    vol.attach(intsance_id, '/dev/sdh') 
```

我不是驱动方面的专家。我想用它来做mongo。我假设我必须登录实例并准备 EBS。我的问题是如何？我尝试了以下。

```
grep -q xfs /proc/filesystems || sudo modprobe xfs
sudo mkfs.xfs /dev/sdh
sudo mkfs.xfs /dev/sdh
/dev/sdh: No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:56:19.210

在最近的 Ubuntu 机器上，设备被映射到`/dev/xvdX`. 在您的情况下，这应该是`/dev/xvdh`. 尝试使用此设备 ID 创建文件系统，然后挂载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:13:39.113

It's possible it didn't get attached as /dev/sdh/. Try doing:

```
$ sudo fdisk -l 
```

to find the correct device name.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-02T00:15:08.103

首先是您附加广告的方式和额外的不必要步骤。所以将其附加为 /dev/sdh1 ，以下将起作用。否则，您还需要使用 fdisk 在磁盘上创建一个分区。

实例启动后，您需要在设备上创建文件系统，然后挂载它。

看起来像这样

创建 xfs 文件系统

```
mkfs.xfs -f /dev/xvdh1 
```

挂载（将新文件系统附加到目录）：

```
mkdir /mnt/more_storage
mount -t xfs /dev/xvdh1 /mnt/more_storage 
```

最后，如果您想在下次重新启动时看到这一点，您需要在 /etc/fstab 中添加类似以下内容

```
/dev/xvdh1    /mnt/more_storage xfs     defaults,noatime  0   0 
```

此示例使用 xfs，您可以选择 ext3/ext4 或任何您喜欢的。

/mnt/more_storage 目录实际上可以是系统上的任何空目录。在运行 mount 命令之前该目录需要存在并且必须为空。它可以很容易地成为 /var/mongo/data。

不过，正如您所说，这是针对 mongo 的，但我将提出进一步的建议。将您需要的空间至少划分为 5 个，但可能是 8 个或 10 个。因此，如果您需要 100GB，则创建 5 个每个 20GB 的 EBS 卷或每个 10GB 的 10 个。然后像原来一样附加它们，而不是指定分区号或 /dev/sdh。因此，例如，我将坚持使用 5 来节省打字，尽管有些地方大约 8 会为您提供最佳吞吐量。所以现在您已经附加了 /dev/sdh、/dev/sdi、/dev/sdj、/dev/sdk 和 /dev/sdl。

现在，您需要从上面执行一个额外的步骤来跨这些 EBS 卷创建条带化 RAID

```
mdadm --create --verbose /dev/md0 --level=0 --raid-device=5 /dev/xvdh /dev/xvdi /dev/xvdj /dev/xvdk /dev/xvdl 
```

这将创建一个位于 /dev/md0 的新设备。现在将上述示例中的 /dev/xvdh1 替换为 /dev/md0 并创建文件系统并挂载它。

```
mount -t xfs /dev/md0 /mnt/more_storage
/dev/md0    /mnt/more_storage xfs     defaults,noatime  0   0 
```

您还希望它在重新启动后工作，因此您需要以下命令：

```
echo "DEVICE /dev/xvdh /dev/xvdi /dev/xvdj /dev/xvdk /dev/xvdl" >> /etc/mdadm.conf
mdadm --detail --scan >> /etc/mdadm.conf
echo "/dev/md0    /mnt/more_storage xfs     defaults,noatime  0   0" >> /etc/fstab 
```

# android - 如何显示和隐藏图像视图

> ID：13788621
> 
> 赞同：0
> 
> 时间：2012-12-09T15:07:52.397
> 
> 标签：android

如果你看图片 [http://store3.up-00.com/Nov12/MYo64560.png](http://store3.up-00.com/Nov12/MYo64560.png)

它显示一个学生列表，每个学生都有计算按钮

单击计算按钮后，如果总和超过 10，系统将进行一些计算，因此它会在学生附近显示一个红色圆圈，否则知道我使用适配器什么也没发生

我的问题是在计算中的计算之后如何显示方法 getview 中的图像

另外，如果我想在不点击的情况下更改 redCircle，我想自动更改

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:11:10.800

```
ImageView redCircleView;

@Override
public View getView(int position, View convertView, ViewGroup parent) {

holder.redCircle = (ImageView) convertView.findViewById(R.id.redCircle);// for red Circle
redCircleView = holder.redCircle; 
StudentID = student.get(holder.position).get(StudentID); // get id for the student
and i have 
new Calculations().execute();//do some Calculations which i will do the Calculation  the sum
} 
```

您需要在 Async （标准源-> 覆盖和实现）等中实现 onProgressUpdate，然后使用 publishProgress() 方法，该方法将调用 onProgress 并执行您所做的任何事情。

```
if ((sum) >= 10) {
publishProgress("addPic");
                    } 
```

然后还有这个

```
@Override
    protected void onProgressUpdate(String... values) {
if(values[0].contentEquals("addPic"){
redCircleView.setVisibility(View.VISIBLE);
}
} 
```

# javascript - javascript firefox(17.01) parser.parseFromString 字符串太大，错误 NS_ERROR_XPC_BAD_CONVERT_JS

> ID：13788624
> 
> 赞同：1
> 
> 时间：2012-12-09T15:07:56.593
> 
> 标签：javascript, xml, firefox, xml-parsing

利用 firefox (17.01)，我正在从上传的 .csv 文件生成 xml 代码。之后这段代码将被转换为 xhtml，但在此之前，我需要创建有效的 xml 文件。

我的整个代码是

```
var parser = new DOMParser();
var xml_doc = parser.parseFromString(xml_code,'text/xml');
var xslhttp = new XMLHttpRequest();
xslhttp.open("GET",xsl_code,false);
xslhttp.send();
var xsl_doc = xslhttp.responseXML;

var xsltProcessor = new XSLTProcessor();
xsltProcessor.importStylesheet(xsl_doc);
var xhtml_code = xsltProcessor.transformToFragment(xml_doc,document); 
```

它可以正常工作，除非我处理大文件。特别是，当 xsl_code 与 112.039.355 (xml_code.length) 一样大时，脚本会失败。

错误信息是

```
NS_ERROR_XPC_BAD_CONVERT_JS: Could not convert JavaScript argument arg 0 [nsIDOMParser.parseFromString] 
```

对此有什么解释吗？火狐有什么限制吗？我知道如果我从文件中删除内容，最终将正确生成 xml_doc

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T19:34:40.760

使用测试`childNodes`查看文档是否超过 Firefox 设置的 4096 个字符限制。如果是这样，请使用循环连接子节点：

```
var nodes = xml_code.childNodes;
var xml_string = '';
var xml_doc;

if (nodes.length > 1)
  {
  for (var i = 0; i < nodes.length; i++)
    {  
    xml_string += nodes[i].nodeValue;
    }      
  }
else
  {
  xml_string = xml_code;
  }

with (new DOMParser() )
  {
  xml_doc = parseFromString(xml_string, "application/xml")
  } 
```

**参考**

*   [JavaScript XML 文本节点是否有 4096 个字符的限制？](https://stackoverflow.com/questions/1967741/1113772)

*   [DOMParser 限制](http://search.gmane.org/?query=domparser+limit)

*   [Mozilla 的 4096 个字符文本节点限制](http://www.benjaminlhaas.com/blog/mozillas-4096-character-textnode-limit)

*   [Firefox 4K XML 节点限制](http://www.coderholic.com/firefox-4k-xml-node-limit/)

# c# - 如何防止 JsonConvert.SerializeObject 添加 $id

> ID：13788625
> 
> 赞同：0
> 
> 时间：2012-12-09T15:08:12.657
> 
> 标签：c#, json.net

我有这个代码：

```
 JsonSerializerSettings settings = new JsonSerializerSettings()
            {

                PreserveReferencesHandling = PreserveReferencesHandling.None

            };

            var obj = JsonConvert.SerializeObject(result[0], settings); 
```

无论我做什么，SerializeObject 都坚持将 $id 添加到 json 结果中。如何使 $id 消失？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-09T15:18:37.817

事实证明，这个 Json.NET 是一个真正的垃圾。

最终使用了这个：

```
 JavaScriptSerializer ser = new JavaScriptSerializer();
          var obj =   ser.Serialize(result[0]); 
```

# android - listview 项目移动到第一个动画

> ID：13788632
> 
> 赞同：0
> 
> 时间：2012-12-09T15:09:12.350
> 
> 标签：android, listview, animation

我想将列表视图项移动到第一个。

所以我应该将项目相对于列表视图移动到（0,0）。

我像这样在xml中使用动画

```
< translate android:duration="5000" android:fromYDelta="0" android:toYDelta="0%p"/ > 
```

但它不起作用。

`0%p`不意味着列表视图的开始？

非常感谢任何帮助，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:15:36.260

使用应该使用 .setSelection 去开始列表视图，

**ListView.setSelection(0);**

# asp.net - asp.net mvc 4 脚手架不起作用

> ID：13788633
> 
> 赞同：0
> 
> 时间：2012-12-09T15:09:12.443
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-scaffolding

我在类库中有以下类

```
 public class ExpenseDTO
{
    [Key]
   public Int32 ExpenseId { get; set; }
   public Int32 ExpenseTypeId { get; set; }

    [Display(ResourceType = typeof(Resource), Name = "ExpenseDate")]
    [Required(ErrorMessageResourceType = typeof(Resource), ErrorMessageResourceName = "ExpenseDataRequired")]
    [DataType(DataType.Date,ErrorMessageResourceName="InvalidDateFormat"
        ,ErrorMessageResourceType=typeof(Resource))]
    [DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", ApplyFormatInEditMode = true)]
   public DateTime ExpenseDate { get; set; }

    [MaxLength(200, ErrorMessageResourceType = typeof(Resource), ErrorMessageResourceName = "ExpenseNoteMaxLength")]
    [Display(ResourceType = typeof(Resource), Name = "ExpenseNote")]
   public  String ExpenseNote { get; set; }

    [Required(ErrorMessageResourceType = typeof(Resource), ErrorMessageResourceName = "ExpenseAmountRequired")]
    [Display(ResourceType = typeof(Resource), Name = "ExpenseAmount")]
    public decimal ExpenseAmount { get; set; }

    public ExpenseDTO()
    {
        ExpenseNote = String.Empty;

    }

} 
```

我还有一个 asp.net MVC 4 项目，它有一个名为 ExpenseEditView 的类，其定义如下

```
public class ExpenseEditView
{
    public ExpenseDTO Expense { get; set; }
    public IEnumerable<SelectListItem> ExpenseTypeList { get; set; }
    public ExpenseEditView(ExpenseDTO Expense, IEnumerable<SelectListItem> ExpenseTypeList)
    {
        this.Expense = Expense;
        this.ExpenseTypeList = ExpenseTypeList;
    }
} 
```

在我的控制器的创建方法中，我有以下行：

```
public ActionResult Create()
    {
        ExpenseEditView ExpenseEdit = new ExpenseEditView(new ExpenseDTO(), GetExpenseTypeList());
        return View(ExpenseEdit);
    } 
```

当我尝试使用 Asp.net mvc Scaffolding 模板进行“创建”操作时，它创建了一个空视图，而没有为类 ExpenseDTO 中的属性生成任何代码？

谁能指出我所缺少的，以便可以为 ExpenseEditView 自动生成模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T00:27:00.363

将视图命名为“创建”并不是让您执行创建操作的原因。相反，您必须：

1.  选中“创建强类型视图”复选框

2.  选择一个模型类。您要使用的模板的下拉菜单已启用。

3.  将下拉菜单从“空”（你得到的）更改为“创建”。

这将解决你的问题。

相关：[https ://stackoverflow.com/a/16072432/176877](https://stackoverflow.com/a/16072432/176877)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:08:39.880

我没有使用它，但这里有一些想法

[http://msdn.microsoft.com/en-us/library/dd405231(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd405231(v=vs.100).aspx)

[如何在 ASP.NET MVC 3 中创建自己的脚手架模板？](https://stackoverflow.com/questions/4692311/how-do-i-create-my-own-scaffold-template-in-asp-net-mvc-3)

[代码生成：自定义控制器模板](https://stackoverflow.com/questions/8998855/mvc-4-custom-controller-templates)

# java - Java Pattern.matches() 因长字符串而失败

> ID：13788634
> 
> 赞同：0
> 
> 时间：2012-12-09T15:09:23.940
> 
> 标签：java, html, regex

我正在尝试从 HTML 源中获取信息。当我只测试源的正确部分时，一切正常。但是当我测试整个源代码时，Pattern.matches() 会返回 true，即使它应该与模式匹配。

不起作用：

```
 String response = " <!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"     \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"><html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"de\" lang=\"de\">  <head>      <meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\" />      <meta http-equiv=\"Content-Language\" content=\"de\" />     <meta name=\"description\" content=\"arenakampf.de - Die Herausforderung\" />       <meta name=\"keywords\" content=\"Arenakampf, AK, arenakampf.de, Arena, Gilden, Kampf\" />          <link rel=\"shortcut icon\" href=\"grafik/favicon.ico\" />              <link rel=\"stylesheet\" media=\"screen\" type=\"text/css\" href=\"css/reset.css\" />       <link rel=\"stylesheet\" media=\"screen\" type=\"text/css\" href=\"css/layout.css\" />      <link rel=\"stylesheet\" media=\"screen\" type=\"text/css\" href=\"css/content.css\" />     <link rel=\"stylesheet\" media=\"screen\" type=\"text/css\" href=\"css/jquery.ui.css\" />    <title>            Arenakampf - Die Herausforderung!    </title>       <script type=\"text/javascript\" src=\"js/jquery.js\"></script>     <script type=\"text/javascript\" src=\"js/jquery.ui.js\"></script>      <script type=\"text/javascript\" src=\"js/jquery.plugin.tablesorter.js\"></script>      <script type=\"text/javascript\" src=\"js/jquery.AK.functions.js\"></script>                                        <script type=\"text/javascript\">          var rTime = 0;      var pTime = 0;      var showTime = 0;      var name = \"Fredo\";      var d = new Date();      var rTime = Math.ceil(rTime);      var pTime = Math.ceil(pTime);      var startdate = Math.floor(d.getTime() / 1000);      var rTimeEnd = startdate + rTime;      var pTimeEnd = startdate + pTime;      var rTimerActive = window.setInterval(\"rTimer()\", 100);      var pTimerActive = 0;      var skyBannerAppear = 0;      var worldChat = 0;   </script>   <script type=\"text/javascript\" src=\"js/AK.WorldChat.js\"></script>     </head>  <body>       <div class=\"wrap\" >           <div class=\"root\">                <div class=\"top_header\">                  <a title=\"arenakampf.de\" href=\"?site=start\">                        <img src=\"grafik/background.top.jpg\" alt=\"Banner von Arenakampf.de\" />                  </a>                    <form method=\"post\" id=\"quickchange\" action=\"?site=overview\">                     <select name=\"quickchange\" onchange=\"javascript:document.getElementById('quickchange').submit()\"><option value=\"4339\">Aegis 100/100</option><option value=\"4340\" selected=\"selected\">Fredo 100/100</option><option value=\"4341\">Ymir 100/100</option><option value=\"4342\">Todos 100/100</option></select></form>                  <div class=\"information_header\">                      <div class=\"char_information\">                                                                                        Fredo<br />                             Zwerg, 7                                                        <div id=\"dek\">                                    <h2>Charakterinformationen</h2>                                 Regenerationszeit:  <span id=\"rcounter\">0:00</span><br />                                 Angriffsschutz: <span id=\"pcounter\">0:00</span><br />                                 Trefferpunkte: 106/106<br />                                                                                                Geld: 2n, 12k                               </div>                                                                                                  </div>                      <div class=\"message\">                         <a href=\"http://forum.arenakampf.de/showthread.php?p=66276#post66276\" target=\"_blank\"><font size=\"2\" color=\"#cccccc\"><b>Newsthread updated</b></font></a>                       </div>                      <div class=\"social_networks\">                         <a href=\"http://www.facebook.com/pages/Arenakampf/169687129766829?ref=hnav\" target=\"_blank\" title=\"ArenaKampf bei Facebook\">                              <img src=\"grafik/like_facebook.png\" alt=\"ArenaKampf bei Facebook\" />                            </a>                                <a href=\"https://plus.google.com/112562504705381850039?prsrc=3\" target=\"_blank\" title=\"ArenaKampf bei GooglePlus\">                                                                <img src=\"https://ssl.gstatic.com/images/icons/gplus-16.png\" alt=\"Arenakampf bei GooglePlus\" />                             </a>                            </div>                          <div class=\"online_counter\">                                           Online: 54,                            <a href=\"http://webchat.quakenet.org/?channels=arenakampf&uio=d4\" target=\"_blank\" title=\"Offizieller irc-Webchat von Arenakampf\">Q-Net: #arenakampf</a>                       </div>                  </div>                          </div>              <div class=\"main\">                    <div class=\"navigation\">                                          <div class=\"status_bars\">                         <div id=\"health\"></div>                           <div id=\"ers\"></div>                          <div id=\"exp\" style=\"width: 73%;\">                                                                              </div>                      </div>                          <script type=\"text/javascript\">          hpwidth = 100;          erswidth = 100;          document.getElementById('ers').style.width = erswidth + '%';          document.getElementById('health').style.width = hpwidth + '%';          if (106 != 0) {            setInterval( \"if (hpwidth + 0.13888888888889 * 20 <= 100) {hpwidth += 0.13888888888889 * 20;document.getElementById('health').style.width = hpwidth + '%'}\", 20000);            setInterval( \"if (erswidth + 0.27777777777778 * 20 <= 100) {erswidth += 0.27777777777778 * 20;document.getElementById('ers').style.width = erswidth + '%'}\", 20000);          }        </script>                       <ul >           <li>        <a href=\"?site=messages&pmpage=pmentry\">Nachrichten</a>           </li>       </ul>               <ul>            <li>                    <a href=\"?site=overview\">Übersicht</a>      </li>      <li>        <a href=\"?site=editcharstats\">Werte</a>      </li>            <li>        <a href=\"?site=skills\">Fertigkeiten</a>      </li>      <li>         <a href=\"?site=achievements\">Erfolge</a>      </li>       </ul>                                       <ul>            <li>            <a href=\"?site=itemshop\">Waffenladen</a>          </li>       <li>            <a href=\"?site=itemshop&cat=magical\">Magieladen</a><br />             </li>       <li>            <a href=\"?site=matshop\">Materialladen</a><br />           </li>      </ul>              <ul>              <li>                        <a href=\"?site=gilde\">Gilde</a>         </li>        <li>             <a href=\"?site=worldchat\">Weltchat</a>                        </li>       <li>        <a href=\"?site=handel\">Marktplatz</a>         </li>       <li>            <a href=\"?site=crafting\">Werkstatt</a>        </li>      </ul>            <ul>        <li>            <a href=\"?site=kalender\">Kalender</a>         </li>      </ul>            <ul>        <li>            <a href=\"?site=fight\">Arena</a>       </li>       <li>            <a href=\"?site=battlelogs\">Kampfbuch</a>          </li>       <li>                        <a href=\"?site=money\">Kassenbuch</a>          </li>       <li>            <a href=\"?site=adressbook\">Kontaktbuch</a>        </li>       </ul>        <h2 id=\"section_spiel\">Spiel</h2>    <ul class=\"section_spiel\">        <li>            <a href=\"http://forum.arenakampf.de/showthread.php?t=4288\" target=\"_blank\">Regeln</a>                   </li>       <li>            <a href=\"?site=intro\">Intro</a>               </li>       <li>            <a href=\"?site=changes\">News</a>                  </li>       <li><a href=\"?site=umfrage\">Umfrage</a></li><li><a href=\"?site=messages&pmpage=newpm&toname=Support\">Support</a></li>   </ul>       <ul>        <li>            <a href=\"?site=faq\">Anleitung</a>                 </li>       <li>            <a href=\"http://forum.arenakampf.de/showthread.php?t=5151\" target=\"_blank\">Wegweiser</a>                    </li>       <li>                                <a href=\"?site=ipcalculator\">IP-Berechnung</a>                                        </li>       <li>            <a href=\"http://forum.arenakampf.de\" target=\"_blank\">Forum</a>      </li>       <li>            <a href=\"?site=impressum\">Impressum</a>       </li>   </ul>   <h2>Rankings</h2>   <ul>        <li>            <a href=\"?site=craftrank\">Handwerker</a>                          </li>       <li>            <a href=\"?site=guildrank\">Gilden</a>                  </li>   </ul><ul>   <li>        <a href=\"?site=account\">Einstellungen</a> </li>   <li>        <a href=\"?site=editchars\">Charakter</a>           </li></ul>      <ul>        <li>            <a href=\"?site=logout\">LOGOUT</a>         </li>       </ul>           </div>                          <script type=\"text/javascript\">                           setBackgroundAttachment();          </script>                       <div class=\"content\">                                 <br /><br />                  <h2 class=\"player_name\">Fredo</h2><br /><br /><table class=\"tabletop\" width=\"85%\">  <tr>    <td width=\"55%\">      <table class=\"tabletop2\" width=\"100%\">        <tr><td colspan=\"2\">Account</td></tr>        <tr class=\"tablemid\"><td width=\"55%\">Name:</td>          <td width=\"45%\">eisfreak</td>        </tr>        <tr class=\"tablemid\"><td width=\"55%\">Ruhmpunkte:</td>          <td width=\"45%\">8</td>        </tr>        <tr><td></td></tr>        <tr><td colspan=\"2\">Charakter&uuml;bersicht:</td></tr>        <tr class=\"tablemid\"><td width=\"55%\">Name:</td><td width=\"45%\">Fredo</td></tr>        " +
            "<tr class=\"tablemid\"><td width=\"55%\">Stufe:</td><td width=\"45%\">7</td></tr>" +
            "        <tr class=\"tablemid\"><td width=\"55%\">Erfahrung:</td><td width=\"45%\">8899</td></tr>        <tr class=\"tablemid\"><td width=\"55%\">Erfahrung bis zur n&auml;chsten Stufe:</td><td width=\"45%\">554</td></tr>        <tr class=\"tablemid\"><td width=\"55%\">Geld:</td><td width=\"45%\"><small>2n, 12k</small></td></tr>        <tr class=\"tablemid\"><td width=\"55%\">Beruf:</td><td width=\"45%\">arbeitslos</td></tr>        <tr class=\"tablemid\"><td width=\"55%\">Berufserfahrung (Wert):</td><td width=\"45%\">0 <br /><small><i>(--- zu ---%)</i></small></td></tr>        <tr class=\"tablemid\"><td width=\"55%\">Ranglistenplatz:</td><td width=\"45%\">---</td></tr>        <tr><td></td></tr>        <tr><td colspan='2'>Statistik:</td></tr>        <tr class=\"tablemid\"><td width=\"55%\">K&auml;mpfe:</td><td width=\"45%\">93</td></tr>        <tr class=\"tablemid\"><td width=\"55%\">Davon gewonnen:</td><td width=\"45%\">86</td></tr>        <tr class=\"tablemid\"><td width=\"55%\">Davon verloren:</td><td width=\"45%\">7</td></tr>        <tr class=\"tablemid\"><td width=\"55%\">Verh&auml;ltnis:</td><td width=\"45%\">92%</td></tr>       </table>    </td>    <td align=\"center\" class=\"centered\"><img src=\"charpics/nopic.gif\" class=\"playerpic\" alt=\"Charbild\" /></td>  </tr>  <tr>    <td width=\"45%\">      <table class=\"tabletop2\" width=\"100%\">         <tr><td colspan='2'>Resistenzen:</td></tr>        <tr class=\"tablemid\"><td width=\"55%\">Hieb:</td><td width=\"45%\">10</td></tr>        <tr class=\"tablemid\"><td width=\"55%\">Schlag:</td><td width=\"45%\">0</td></tr>        <tr class=\"tablemid\"><td width=\"55%\">Stich:</td><td width=\"45%\">-10</td></tr>        <tr class=\"tablemid\"><td width=\"55%\">Feuer:</td><td width=\"45%\">-10</td></tr>        <tr class=\"tablemid\"><td width=\"55%\">Frost:</td><td width=\"45%\">-10</td></tr>        <tr class=\"tablemid\"><td width=\"55%\">Licht:</td><td width=\"45%\">-10</td></tr>        <tr class=\"tablemid\"><td width=\"55%\">Gift:</td><td width=\"45%..."; 
```

是否有效：

```
String response = "<tr class=\"tablemid\"><td width=\"55%\">Stufe:</td><td width=\"45%\">7</td></tr>"; 
```

正则表达式：

```
String attribute = "Stufe";         
String attributeValue;
if (source.matches("<tr class=\"tablemid\"><td width=\"55%\">" + attribute + ":</td><td width=\"45%\">(.*?)</td></tr>")){
    attributeValue = source.replaceAll("<tr class=\"tablemid\"><td width=\"55%\">" + attribute + ":</td><td width=\"45%\">(.*?)</td></tr>", "$1");
} else {
    attributeValue = "Error loading '" + attribute + "'";
} 
```

有什么建议我可以对此做些什么吗？字符串长度真的有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:27:30.283

除了分享 Hovercraft 的观点——JSoup 太邪恶了——你没有正确使用火柴。Matches 确保正则表达式匹配整个字符串，并且不检查字符串是否*包含*正则表达式。我认为你需要类似的东西

```
source.matches(".*<tr class=\"tablemid\"><td width=\"55%\">" + attribute + ":</td><td width=\"45%\">(.*?)</td></tr>.*")) 
```

这个。您将不得不仔细检查`.*`. 即使这样可行，正则表达式也需要大量缓冲，使其非常慢。所以试试 Jsoup，我保证你会很高兴的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:22:04.010

您也可以尝试以下 [Html Parser](http://htmlparser.sourceforge.net/)。

> HTML Parser 是一个 Java 库，用于以线性或嵌套方式解析 HTML。主要用于转换或提取，它具有过滤器、访问者、自定义标签和易于使用的 JavaBeans。它是一个快速、强大且经过良好测试的软件包。

# c - 部分和任务openmp之间的区别

> ID：13788638
> 
> 赞同：65
> 
> 时间：2012-12-09T15:09:43.237
> 
> 标签：c, parallel-processing, openmp

OpenMP 之间有什么区别：

```
#pragma omp parallel sections
{
    #pragma omp section
    {
       fct1();
    }
    #pragma omp section
    {
       fct2();
    }
} 
```

和 ：

```
#pragma omp parallel 
{
    #pragma omp single
    {
       #pragma omp task
       fct1();
       #pragma omp task
       fct2();
    }
} 
```

我不确定第二个代码是否正确...

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-12-09T16:08:37.933

任务和部分之间的区别在于代码将执行的时间范围。部分包含在`sections`构造中，并且（除非`nowait`指定子句）线程不会离开它，直到所有部分都已执行：

```
 [    sections     ]
Thread 0: -------< section 1 >---->*------
Thread 1: -------< section 2      >*------
Thread 2: ------------------------>*------
...                                *
Thread N-1: ---------------------->*------ 
```

这里`N`线程遇到一个`sections`有两个部分的构造，第二个比第一个花费更多的时间。前两个线程各执行一个部分。其他`N-2`线程只是在 section 构造末尾的隐式屏障处等待（此处显示为`*`）。

任务尽可能在所谓的任务调度点排队和执行。在某些情况下，可以允许运行时在线程之间移动任务，即使在它们的生命周期中也是如此。这样的任务被称为 untied 并且 untied 任务可能开始在一个线程中执行，然后在某个调度点它可能被运行时迁移到另一个线程。

尽管如此，任务和部分在许多方面都是相似的。例如，以下两个代码片段实现了基本相同的结果：

```
// sections
...
#pragma omp sections
{
   #pragma omp section
   foo();
   #pragma omp section
   bar();
}
...

// tasks
...
#pragma omp single nowait
{
   #pragma omp task
   foo();
   #pragma omp task
   bar();
}
#pragma omp taskwait
... 
```

`taskwait`工作方式与任务非常相似`barrier`- 它确保当前执行流程将暂停，直到所有排队的任务都已执行。它是一个调度点，即它允许线程处理任务。需要该`single`构造以便仅由一个线程创建任务。如果没有`single`构造，每个任务都会获得创建`num_threads`时间，这可能不是人们想要的。构造中的`nowait`子句`single`指示其他线程不要等到`single`构造被执行（即在`single`构造结束时移除隐式屏障）。所以他们`taskwait`立即点击并开始处理任务。

`taskwait`为了清楚起见，这里显示了一个明确的调度点。还有隐式调度点，尤其是在屏障同步内部，无论是显式的还是隐式的。因此，上面的代码也可以简单地写成：

```
// tasks
...
#pragma omp single
{
   #pragma omp task
   foo();
   #pragma omp task
   bar();
}
... 
```

如果存在三个线程，以下是一种可能发生的情况：

```
 +--+-->[ task queue ]--+
               |  |                   |
               |  |       +-----------+
               |  |       |
Thread 0: --< single >-|  v  |-----
Thread 1: -------->|< foo() >|-----
Thread 2: -------->|< bar() >|----- 
```

此处显示的`| ... |`是调度点的操作（`taskwait`指令或隐式屏障）。基本上线程`1`并`2`暂停他们当时正在做的事情并开始处理队列中的任务。处理完所有任务后，线程将恢复其正常执行流程。请注意，线程`1`和可能在线程退出构造`2`之前到达调度点，因此左s 不需要对齐（如上图所示）。`0``single``|`

甚至在其他线程能够请求任务之前，线程也可能`1`完成处理`foo()`任务并请求另一个任务。所以两者都`foo()`可能`bar()`被同一个线程执行：

```
 +--+-->[ task queue ]--+
               |  |                   |
               |  |      +------------+
               |  |      |
Thread 0: --< single >-| v             |---
Thread 1: --------->|< foo() >< bar() >|---
Thread 2: --------------------->|      |--- 
```

如果线程 2 来得太晚，单出线程也可能执行第二个任务：

```
 +--+-->[ task queue ]--+
               |  |                   |
               |  |      +------------+
               |  |      |
Thread 0: --< single >-| v < bar() >|---
Thread 1: --------->|< foo() >      |---
Thread 2: ----------------->|       |--- 
```

在某些情况下，编译器或 OpenMP 运行时甚至可能完全绕过任务队列并串行执行任务：

```
Thread 0: --< single: foo(); bar() >*---
Thread 1: ------------------------->*---
Thread 2: ------------------------->*--- 
```

如果区域代码中不存在任务调度点，则 OpenMP 运行时可能会在它认为合适的时候启动任务。例如，所有任务都可能被推迟，直到`parallel`达到区域末端的障碍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-17T17:14:11.640

我不是 OpenMP 方面的专家，但尝试在我的机器上使用`task`和测试 fib 序列`sections`

**部分**

```
int fib(int n)
{
    int i, j;
    if (n < 2)
        return n;
    else
    {
#pragma omp parallel sections       
{
#pragma omp section             
{
                i = fib(n - 1);
            }
#pragma omp section             
{
                j = fib(n - 2);
            }
        }
        printf("Current int %d is on thread %d \n", i + j, omp_get_thread_num());
        return i + j;
    }
}

int main()
{
    int n = 10;

#pragma omp parallel shared(n)  {
#pragma omp single      {
            printf("%d\n", omp_get_num_threads());
            printf("fib(%d) = %d\n", n, fib(n));
        }
    }
} 
```

**任务**

```
#include <stdio.h>
#include <omp.h>
int fib(int n)
{
  int i, j;
  if (n<2)
    return n;
  else
    {
       #pragma omp task shared(i) firstprivate(n)
       i=fib(n-1);

       #pragma omp task shared(j) firstprivate(n)
       j=fib(n-2);

       #pragma omp taskwait
    printf("Current int %d is on thread %d \n", i + j, omp_get_thread_num());
       return i+j;
    }
}

int main()
{
  int n = 10;

  #pragma omp parallel shared(n)
  {
    #pragma omp single
    {
    printf("%d\n", omp_get_num_threads());
        printf ("fib(%d) = %d\n", n, fib(n));
    }
  }
} 
```

部分结果：

```
12
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 1 is on thread 0
Current int 3 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 5 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 1 is on thread 0
Current int 3 is on thread 0
Current int 8 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 1 is on thread 0
Current int 3 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 5 is on thread 0
Current int 13 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 1 is on thread 0
Current int 3 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 5 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 1 is on thread 0
Current int 3 is on thread 0
Current int 8 is on thread 0
Current int 21 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 1 is on thread 0
Current int 3 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 5 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 1 is on thread 0
Current int 3 is on thread 0
Current int 8 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 1 is on thread 0
Current int 3 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 5 is on thread 0
Current int 13 is on thread 0
Current int 34 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 1 is on thread 0
Current int 3 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 5 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 1 is on thread 0
Current int 3 is on thread 0
Current int 8 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 1 is on thread 0
Current int 3 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 5 is on thread 0
Current int 13 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 1 is on thread 0
Current int 3 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 5 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 1 is on thread 0
Current int 3 is on thread 0
Current int 8 is on thread 0
Current int 21 is on thread 0
Current int 55 is on thread 4
fib(10) = 55 
```

任务结果：

```
12
Current int 1 is on thread 3
Current int 2 is on thread 3
Current int 1 is on thread 8
Current int 2 is on thread 8
Current int 1 is on thread 8
Current int 1 is on thread 4
Current int 1 is on thread 11
Current int 1 is on thread 11
Current int 2 is on thread 11
Current int 3 is on thread 11
Current int 1 is on thread 11
Current int 2 is on thread 11
Current int 1 is on thread 11
Current int 1 is on thread 11
Current int 2 is on thread 11
Current int 3 is on thread 11
Current int 1 is on thread 11
Current int 2 is on thread 11
Current int 1 is on thread 11
Current int 1 is on thread 11
Current int 2 is on thread 11
Current int 3 is on thread 11
Current int 5 is on thread 11
Current int 8 is on thread 11
Current int 1 is on thread 8
Current int 2 is on thread 8
Current int 3 is on thread 8
Current int 5 is on thread 8
Current int 13 is on thread 8
Current int 1 is on thread 7
Current int 2 is on thread 7
Current int 1 is on thread 7
Current int 1 is on thread 7
Current int 1 is on thread 0
Current int 1 is on thread 0
Current int 2 is on thread 0
Current int 3 is on thread 0
Current int 1 is on thread 1
Current int 1 is on thread 6
Current int 2 is on thread 6
Current int 1 is on thread 9
Current int 2 is on thread 9
Current int 1 is on thread 2
Current int 2 is on thread 7
Current int 3 is on thread 7
Current int 5 is on thread 7
Current int 2 is on thread 5
Current int 5 is on thread 5
Current int 1 is on thread 5
Current int 2 is on thread 5
Current int 1 is on thread 5
Current int 1 is on thread 5
Current int 2 is on thread 5
Current int 3 is on thread 5
Current int 1 is on thread 5
Current int 2 is on thread 5
Current int 1 is on thread 5
Current int 1 is on thread 5
Current int 2 is on thread 5
Current int 3 is on thread 5
Current int 5 is on thread 5
Current int 1 is on thread 5
Current int 2 is on thread 5
Current int 1 is on thread 11
Current int 2 is on thread 11
Current int 1 is on thread 8
Current int 2 is on thread 8
Current int 5 is on thread 8
Current int 3 is on thread 1
Current int 8 is on thread 1
Current int 21 is on thread 1
Current int 1 is on thread 10
Current int 3 is on thread 10
Current int 8 is on thread 0
Current int 1 is on thread 4
Current int 3 is on thread 4
Current int 1 is on thread 9
Current int 3 is on thread 9
Current int 8 is on thread 9
Current int 3 is on thread 2
Current int 5 is on thread 3
Current int 13 is on thread 3
Current int 5 is on thread 6
Current int 13 is on thread 7
Current int 8 is on thread 10
Current int 21 is on thread 10
Current int 34 is on thread 3
Current int 55 is on thread 1
fib(10) = 55 
```

在分配计算资源时，似乎任务比部分更明智

- - - - - - - - - - - - - - -编辑 - - - - - - - - - - ---------

对于寻找此问题的答案的人，请参阅此帖子下的评论。

# javascript - 从 DIV 内容生成图像

> ID：13788640
> 
> 赞同：0
> 
> 时间：2012-12-09T15:09:51.040
> 
> 标签：javascript, jquery, html

我有一个与国际象棋非常相似的 HTML 棋盘游戏。这个棋盘游戏基于一组带有背景图像的 div，我希望我可以从一个游戏中拍摄整个棋盘的照片，其中包含特定项目的选项卡位置。

我怎么能用 jQuery 做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:32:42.173

使用 jquery 是不可能的。

# java - 用于 EJB2 和 EJB3 的 Maven vanilla 项目

> ID：13788643
> 
> 赞同：0
> 
> 时间：2012-12-09T15:10:04.530
> 
> 标签：java, jakarta-ee, jboss, ejb, ejb-3.0

我有一个需求，我有两个开发两个项目，一个使用 EJB2.1，一个使用 EJB3.x。EJB2.1 将是现有项目的扩展，因此它是 v2.1 并且还不能迁移到 3.x。

这两个项目都必须使用 Maven 构建，这就是我苦苦挣扎的地方。信不信由你，过去 3 天我一直在试图找到一个使用 Maven 构建的无状态 EJB 项目的简单示例，但没有运气。

这是我通过谷歌搜索找到的几个指针，但它们都不起作用。

*   使用 Eclipse 创建项目

Eclipse 允许您创建 EJB3 项目。最新版本不允许您创建 EJB2 项目。此外，您不能创建 Maven EJB 项目。

*   使用 Maven 原型。

我在 Maven 中尝试了以下原型，但它们都不起作用

```
ejb2-j2ee13
ejb2-j2ee14
ejb-javaee6
ejb-jee5
ear-jee5
ejb-jee5 
```

上述原型仅适用于 EJB3 或那些适用于 v2.x 的原型，将会缺少一些依赖项。

*   Jboss 示例项目

我还在 Jboss 文档[http://anonsvn.jboss.org/repos/jbossas/projects/ejb3/trunk/docs/tutorial/reference21_30/](http://anonsvn.jboss.org/repos/jbossas/projects/ejb3/trunk/docs/tutorial/reference21_30/)上找到了以下教程。我打算在 Jboss v5.1 上使用 EJB。此 URL 上的项目是 Maven 项目，但它们也抱怨缺少依赖项（ant 构建确实有效）。

如果有人能指出我可以在哪里下载适用于 EJB2.x 和 EJB3.x 的香草“Hello world”maven 项目（这将在 Jboss 5.1.x 上运行），我将不胜感激。

我在谷歌上花了这么多时间，最后决定在这里问，因为我无处可去。我怀疑他们可能很难找到这些依赖项，因为他们不希望人们再使用 EJB2.x。问题是有些人别无选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:19:44.077

你真的不需要 Java EE5 的原型，或者 JEE6 的样板代码太少了，你只需要一个常规的 java 原型并添加对

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>6.0</version>
    <scope>provided</scope>
</dependency> 
```

或者

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>5.0</version>
    <scope>provided</scope>
</dependency> 
```

添加你的 beans.xml，你就完成了。避免任何 JBoss 依赖实际上是一种很好的做法，因为这可以确保您的应用程序保持可移植性。

注意：如果要模拟或使用相应 javax.XXX 包中的任何类，则需要将应用程序服务器特定的依赖项包含到 maven 测试范围中。这是因为 Sun/Oracle 更改了 API jar 的字节码，以保证没有人意外使用这些类，而不是服务器提供的类。

# python - 无法使用 Iceweasel 初始化 Web 驱动程序

> ID：13788648
> 
> 赞同：0
> 
> 时间：2012-12-09T15:11:09.030
> 
> 标签：python, selenium, debian

我正在尝试使用 Iceweasel 在 Debian 6 中安装 Selenium。没有显示器，所以我安装了`xvfb`. 这是我的代码：

```
from selenium import webdriver
import os

os.environ["DISPLAY"]=":56017"

url = "www.python.com"

driver = webdriver.Firefox()
driver.implicitly_wait(30)
driver.get(url) 
text = driver.page_source
driver.quit() 
```

`driver = webdriver.firefox()`返回此错误：

```
WebDriverException: Message: 'Can\'t load the profile. Profile Dir: 
/tmp/tmp8R_yRq Firefox output: Xlib:  extension "RANDR" missing on display ":
56017.0".\n*** e =
[Exception... "Component returned failure code: 0x80570016 
(NS_ERROR_XPC_GS_RETURNED_FAILURE) [nsIJSCID.getService]"  nsresult: 
"0x80570016 (NS_ERROR_XPC_GS_RETURNED_FAILURE)"  location: "JS frame :: chrome:
//browser/content/utilityOverlay.js :: getShellService :: line 312"  data: no]
\n' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:03:55.413

您使用的是哪个版本的 Selenium？最新版本不适用于 Debian 挤压中的 iceweasel。我一直在使用 Selenium 和 Firefox：

```
deb http://packages.linuxmint.com debian import 
```

它确实适用于最新的 Selenium IDE。我没有将 Selenium 与 xvfb 一起使用，但如果你告诉我版本号，我可以测试一下。

注意：这不是现在的答案，而是当你给我详细信息时。我没有足够的代表。发表评论，对不起。

# c# - 使用 C# 进行文件压缩的 最佳方法

> ID：13788649
> 
> 赞同：0
> 
> 时间：2012-12-09T15:11:09.217
> 
> 标签：c#, encryption, compression, zip

文件压缩是当今非常重要的事情。我是一名 C# 程序员。我听说过 DotNetZip、SharpZibLib、GZipStream 等。对哪个是最好的感到困惑。我需要的是：

**1：**更快的压缩速度

**2：**更好的加密

**3：**压缩、解压缩工具

**4：**密码保护

**5：**免费且足够的参考/教程

**6：**初学者更容易

**7：**添加.mp3、.txt等格式的文件

**8：**可以处理多个文件（一次说 500 个，总共 1/2 GB）

提前致谢

**更新：**时间比空间更昂贵:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T15:20:53.890

我在一些项目中使用过 DotNetZip，它支持你想要的所有东西。考虑到速度，您必须在压缩速度之间进行选择，这就是 zip 的工作原理。该库提供了一个选项供您选择所需的压缩级别。

该库有据可查，对初学者来说非常容易。从它开始只需安装 1 个 nuget 包并调用 zipFile.AddFile 和 zipFile.Save。

[http://nuget.org/packages/DotNetZip](http://nuget.org/packages/DotNetZip)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T15:27:38.513

它们有不同的用途。该类是框架[`GZipStream`的](http://msdn.microsoft.com/en-US/library/system.io.compression.gzipstream%28v=VS.80%29.aspx)一部分，具有压缩单个文件的能力。

如果您想将多个文件压缩到一个存档中（可以由其他人解压缩），您需要一个添加该功能的库。此类库还可以设置来控制性能和压缩率之间的平衡，以实现比内置类更好的性能或更好的压缩率。

# macos - mac osx 上的 git：如何将文件名案例推送到原点？

> ID：13788657
> 
> 赞同：3
> 
> 时间：2012-12-09T15:11:37.000
> 
> 标签：macos, git, github, filenames, hfs+

我已经更改了 git 存储库中某些目录的大小写。然后我推送它们并注意到未更新的情况。

然后我发现了这个问题： [git mv and only change case of directory](https://stackoverflow.com/questions/3011625/git-mv-and-only-change-case-of-directory)

我已按照以下建议使用：

```
git add -A
git commit --amend -m 'updated cases'
git push origin 
```

但 git 服务器不是成功返回：

```
To git@github.com:kyogron/example.git
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'git@github.com:kyogron/example.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details. 
```

我现在可以做些什么来更新案例而不破坏我的 git 存储库？

问候，

博多

PS：为避免以后出现此问题，您可以使用：

```
git config core.ignorecase false 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T15:12:51.953

你需要：

```
git push --force 
```

因为您已经用 --amend 重写了最后一个 SHA1，所以在[使用`git mv`](https://stackoverflow.com/questions/3888944/git-mv-records-move).

它不会破坏您的存储库，除非您有其他协作者已经从您之前的提交中撤出，如“[如何将修改后的提交推送到远程 git 存储库？](https://stackoverflow.com/questions/253055/how-do-i-push-amended-commit-to-the-remote-git-repo) ”中所述。
（在这种情况下，您将[需要其他选项](https://stackoverflow.com/a/10510586/6309)来发布您的固定提交）

* * *

在 OsX 上，[这个答案](https://stackoverflow.com/a/8482021/6309)确实建议（以避免这个问题）：

```
git config --unset-all core.ignorecase
git config --system core.ignorecase false 
```

* * *

[OP kyogron](https://stackoverflow.com/users/1246987/kyogron) [报告](https://stackoverflow.com/questions/13788657/git-on-mac-osx-how-to-push-filename-cases-to-origin/13788665#comment18965030_13788665)找到了一个可行的解决方案：

> *   创建一个新分支并签出这个新分支。
> *   然后删除`.DS_Store`损坏目录的目录中的文件并将其重命名为新名称。
> *   然后删除存储库中的错误目录（您可以使用 来查看它们`git ls-files`）并提交此更改。
> *   再次删除`.DS_Store`并现在将目录重命名为您想要的小写名称`git mv`

# debugging - 基于 Windows 8 html5 画布的应用程序中的奇怪行为

> ID：13788659
> 
> 赞同：1
> 
> 时间：2012-12-09T15:11:52.453
> 
> 标签：debugging, windows-8, html5-canvas

我正在开发一个 Windows 8 JavaScript 应用程序。

我尝试在画布中加载图像，但是当我直接使用`CTRL + F5`应用程序运行应用程序时，画布上没有图像。

当我在不放置断点的情况下调试应用程序并且应用程序直接打开但仍然没有图像时。

当我调试应用程序并放置一个`breakpoint`然后在图像生成代码完成时逐步运行代码时，我通过单击调试标志继续调试，现在图像显示在画布中。我不知道这里发生了什么，为什么它只显示带有断点的调试图像。为什么我在没有调试的情况下正常运行它时不显示图像？

这是图像生成的代码。

```
Init: function (canvas,ctx) {

    this.ghostCanvas = canvas;
    this.ghostCanvasCtx = ctx;

    var banner = new Image();
    banner.src = "images/banner.jpg";

    ctx.drawImage(banner, 100, 100);
} 
```

当我放置断点并逐行运行时，此代码有效。此外，我正在使用两个画布，一个在另一个之上。但是这个画布的 z-index 更大，所以应该没有问题。是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T19:35:36.330

在画布上绘制之前，您需要等待图像加载。在您的图像对象上为“加载”事件添加一个事件处理程序，并在调用该事件时在画布**中**绘制图像。

# php - 将 WP_DEBUG_LOG 设置为 true，在 debug.log 中没有显示调试输出，为什么？

> ID：13788660
> 
> 赞同：12
> 
> 时间：2012-12-09T15:12:04.137
> 
> 标签：php, debugging, wordpress

我正在尝试使用 WordPress 为我正在开发的插件启用基本调试输出。到目前为止，我设法得到了一些，但未能将其重定向到`wp-content/debug.log`. 我一直在大致遵循[Douglas Neiner 的指南](http://fuelyourcoding.com/simple-debugging-with-wordpress/)。这是我所做的：

我将这段代码添加到末尾`wp-config.php`：

```
@ini_set ('display_errors', 0);
define ('WP_DEBUG', true);
define ('WP_DEBUG_DISPLAY', false);
define ('WP_DEBUG_LOG', true); 
```

我手动创建了`debug.log`文件并确保`www-data`用户可以访问它（我在本地运行 WordPress，在 Ubuntu 12.04 上）：

```
septi@norbert:~$ sudo su www-data -c 'ls -l /usr/share/wordpress/wp-content/debug.log'
-rw-rw-r-- 1 root www-data 0 Dec  9 22:12 /usr/share/wordpress/wp-content/debug.log
septi@norbert:~$ sudo su www-data -c 'ls -l /srv/www/localhost/wp-content/debug.log'
-rw-rw-r-- 1 root www-data 0 Dec  9 22:12 /srv/www/localhost/wp-content/debug.log
septi@norbert:~$ sudo su www-data -c 'echo i can write >> /usr/share/wordpress/wp-content/debug.log'
septi@norbert:~$ 
```

在插件激活钩子中添加了一些假定的调试输出语句，以及故意错误：

```
include ('i fail wp');

register_activation_hook (__FILE__, 'hello_world_activate');

function hello_world_activate()
{
    error_log ('I love debug output when it works!');
} 
```

我期望的是一条关于缺少包含文件的错误消息`debug.log`以及“我喜欢调试输出，当它工作时！” 消息，页面上没有任何内容。我得到的是页面消息中缺少的包含文件，而`debug.log`. 但是，调试输出消息并未完全丢失。我在以下位置找到它`/var/log/apache2/error.log`：

```
[Sun Dec 09 22:58:18 2012] [error] [client 127.0.0.1] PHP Warning:  include(i fail wp): failed to open stream: No such file or directory in /usr/share/wordpress/wp-content/plugins/helloworld2085/helloworld2085.php on line 28, referer: http://localhost/wp/wp-admin/plugins.php?deactivate=true&plugin_status=all&paged=1&s=
[Sun Dec 09 22:58:18 2012] [error] [client 127.0.0.1] PHP Warning:  include(): Failed opening 'i fail wp' for inclusion (include_path='.:/usr/share/php:/usr/share/pear') in /usr/share/wordpress/wp-content/plugins/helloworld2085/helloworld2085.php on line 28, referer: http://localhost/wp/wp-admin/plugins.php?deactivate=true&plugin_status=all&paged=1&s=
[Sun Dec 09 22:58:18 2012] [error] [client 127.0.0.1] I love debug output when it works!, referer: http://localhost/wp/wp-admin/plugins.php?deactivate=true&plugin_status=all&paged=1&s=
[Sun Dec 09 22:58:18 2012] [error] [client 127.0.0.1] PHP Warning:  include(i fail wp): failed to open stream: No such file or directory in /usr/share/wordpress/wp-content/plugins/helloworld2085/helloworld2085.php on line 28, referer: http://localhost/wp/wp-admin/plugins.php?deactivate=true&plugin_status=all&paged=1&s=
[Sun Dec 09 22:58:18 2012] [error] [client 127.0.0.1] PHP Warning:  include(): Failed opening 'i fail wp' for inclusion (include_path='.:/usr/share/php:/usr/share/pear') in /usr/share/wordpress/wp-content/plugins/helloworld2085/helloworld2085.php on line 28, referer: http://localhost/wp/wp-admin/plugins.php?deactivate=true&plugin_status=all&paged=1&s= 
```

我怀疑该`error_log()`函数不是用于输出到的正确函数`debug.log`，但我找不到正确的方法。哦，当然我可以硬编码文件路径并附加到它，但是，你知道......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-20T08:02:23.777

我在 Fedora 19 上的 Apache 2.4 中运行 WordPress 时遇到了同样的问题。error_log() 的输出落在 /var/log/httpd/error_log 而不是 wp-content/debug.log 中。Httpd 进程对 /var/www/html/wp-content 目录具有写入权限 (+775)，但无法创建 wp-content/debug.log 文件。

我的 wp-config.php 调试设置是：

```
@ini_set(‘display_errors’,0);
define('WP_DEBUG',         true);
define('WP_DEBUG_DISPLAY', false);
define('WP_DEBUG_LOG', true); 
```

事实证明，真正的原因是 SELinux。我更改了 SELinux 策略并允许 httpd 使用以下命令写入 wp-content。（请参阅 SELinux Troubleshooter 以获取安装的实际命令）

```
semanage fcontext -a -t httpd_sys_rw_content_t '/var/www/html/wp-content'
restorecon -v '/var/www/html/wp-content' 
```

在此调试消息开始出现在 wp-content/debug.log 之后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T22:01:13.900

error_log() 函数写入 Web 服务器的错误日志（例如 /var/log/httpd/error_log）；你想要的是[trigger_error()](http://php.net/manual/en/function.trigger-error.php)。

# c# - 要显示的流式阅读器

> ID：13788671
> 
> 赞同：-1
> 
> 时间：2012-12-09T15:13:35.177
> 
> 标签：c#, io, streamreader

我仍然是 C# 的第一步，这是我的第一篇文章/问题。如何实现 Streamreader 以显示（输出）就像单击 Dataretrieve 按钮后，我想检索位于“D:\Savedata.txt”上的数据并将其显示在 lblDisplay

这是我的代码，我错过了什么吗？

```
void DataretrieveClick(object sender, EventArgs e)
{
   StreamReader read = File.OpenText("D:\\Savedata.txt");
   lblDisplay.Text = "Last Name: " +textBox1.Text.Trim();
   read.Close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T15:16:38.300

像这样的东西应该是你正在寻找的东西。

```
void DataretrieveClick(object sender, EventArgs e)
{
    using (StreamReader reader = File.OpenText("D:\\Savedata.txt"))
    {
        lblDisplay.Text = reader.ReadToEnd();
    }
} 
```

创建实现接口 IDisposable 的类的实例时，应将其包装在 using() 语句中，以确保在离开 using() 范围时释放它的资源。此外，您可以在[此处](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)查看 StreamReader 的文档，它可以帮助您了解可用的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T15:21:10.363

类中有一个非常方便的静态方法[`ReadAllText`](http://msdn.microsoft.com/en-us/library/ms143368.aspx)，`File`它会打开一个文本文件，读取文件的所有行，然后关闭文件：

```
lblDisplay.Text = File.ReadAllText("D:\\Savedata.txt"); 
```

在内部，此方法完全符合您要实现的功能（创建`StreamReader`并读取从当前位置到流末尾的所有字符）：

```
using (var reader = new StreamReader(path, Encoding.UTF8, true, 0x400, true))
{
    return reader.ReadToEnd();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T15:16:34.447

你正在寻找`read.ReadToEnd()`.

# haskell - haskell中具有循环依赖的数据结构

> ID：13788676
> 
> 赞同：12
> 
> 时间：2012-12-09T15:14:23.403
> 
> 标签：haskell, cyclic-reference

我正在尝试使用`parsec`库在haskell中实现简单的解析器（用于学习目的）。所以我写了一堆数据结构和相关函数，如下所示：

```
data SourceElement 
    = StatementSourceElement Statement
    | FunctionSourceElement FunctionName FunctionBody

data Statement 
    = IfStatement Expr Statement Statement
    | WhileStatement Expr Statement

data FunctionBody = FunctionBody [SourceElement]

parseSourceElement :: Parser SourceElement
parseSourceElement = ...

parseFunctionBody :: Parser FunctionBody
parseFunctionBody = ... 
```

它工作正常。现在我想把这些东西分成两个模块来分开`FunctionBody`和`Statement`数据结构（因为可读性问题）。但我不能！原因是 和 之间的循环`SourceElement`依赖`FunctionBody`。

那么，有没有办法解决这个问题呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-09T15:20:22.493

我打破依赖循环的典型方法是参数化一些东西。在这种情况下，您的`Function`模块可能会为您的语言执行函数解析器，但以这样一种方式表示，即无论该语言的其余部分如何，它都可以这样做。因此：

```
module Function where 

data FunctionBody e = FunctionBody [e]

parseFunctionBody :: Parser e -> Parser (FunctionBody e) 
```

和

```
module AST where

data SourceElement
    = StatementSourceElement Statement
    | FunctionSourceElement FunctionName (FunctionBody SourceElement) 
```

因此相互递归被抽象为简单的递归+参数化。我认为参数化至少与将不同的东西分成不同的文件一样重要，所以一个强迫另一个是很好的（也有点烦人）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-09T16:39:35.703

`.hs-boot`Haskell 实际上允许递归模块，而 GHC 支持它们（写入文件有一点不便）。请参阅[如何编译相互递归的模块](http://www.haskell.org/ghc/docs/latest/html/users_guide/separate-compilation.html#mutual-recursion)。

我认为在这里使用此功能没有任何问题。

# html - 如何在 HTML5 中使用 100% DIV 高度？

> ID：13788678
> 
> 赞同：0
> 
> 时间：2012-12-09T15:14:31.480
> 
> 标签：html, css

我曾尝试关注许多文章并在 SO 中使用了许多链接，但我无法修复页面的 CSS。该页面可以在这里看到：http: [//tinyurl.com/d3ru8tf](http://tinyurl.com/d3ru8tf)

截屏：

![在此处输入图像描述](../Images/7ecec35774b6d9f0a6af5691a9bc0dcd.png)

我的 CSS

```
html, body {
   height:100%
}

body{
   line-height:1;
   color:#454545;
   background:url(/assets/imgs/bg.png);
   font:11px Tahoma,Arial,sans-serif
}

#soul{
   display:block;
   margin:0 auto;
   width:920px;
   background:url(/assets/imgs/back.png) repeat-y right #fff;
   padding:0;
   position:relative;
   height:100%
} 
```

我的HMTL5

```
<!DOCTYPE html>
<html>
   <head>
       <meta charset="UTF-8">
       <title></title>
   </head>
   <body>
       <div id="soul">

          This is my content which does not sit fluid.

       </div>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T15:19:21.767

`<hr style="clear:both;" />`在关闭 CSS 之前添加和从CSS`</div>`中`#soul`删除。`height:100%``#soul`

![在此处输入图像描述](../Images/d6aac399b3490271055ad6e20df1b630.png)

此外，使用`min-height:100%`或更好，但在这种情况下根本不要使用该属性。

**编辑**

阅读有关浮动 div 的更多信息：http: [//css-tricks.com/all-about-floats/](http://css-tricks.com/all-about-floats/)

此外，您似乎希望它们的高度相等。

![在此处输入图像描述](../Images/b2b088cdf37cbaa920e4cf85a11cdf52.png)

看看这个： http: [//matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

# c++ - EndDialog 与 DestroyWindow

> ID：13788680
> 
> 赞同：2
> 
> 时间：2012-12-09T15:14:50.343
> 
> 标签：c++, windows, winapi, win32gui, windows-messages

嗨，我正在创建 Windows 上下文菜单的模仿。

显示对话框执行以下操作：

1.  使用创建一个对话框`CreateDialogIndirectParam`
2.  运行消息循环：

    ```
    while ( ContinueModal() && GetMessage(&msg, NULL, 0, 0) )
    {
        TranslateMessage( &msg );
        DispatchMessage( &msg );
    } 
    ```

3.  在我寻找新窗口的失去焦点事件的对话框中，我将`ContinueModel`标志设置为 false 并调用`EndDialog`/ `DestroyWindow`。

    *   打电话`EndDialog`不会杀死我的对话，`DestroyWindow`会。这样可以吗，谁能解释一下为什么？

谢谢！D.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T15:18:59.080

就像它在文档的第一行中所说的那样，[`EndDialog`结束 modal dialogs](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645472%28v=vs.85%29.aspx)。您的对话框不是模态`EndDialog`的，错误的功能也是如此。[文档`CreateDialogIndirectParam`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645441%28v=vs.85%29.aspx)说

> 要销毁对话框，请使用 DestroyWindow 函数。

# android - 从 FragmentActivity 访问 Fragment 中的 TextView

> ID：13788683
> 
> 赞同：0
> 
> 时间：2012-12-09T15:15:35.490
> 
> 标签：android, textview, android-viewpager

我需要在 FragmentActivity 的 Fragment 内的 TextView 中设置文本。

> ((TextView) findViewById(R.id.textview_in_fragment)).setText("Text")

在 FragmentActivity 中不起作用。我发现了如何在 Fragment 中设置文本，但我需要在 FragmentActivity 的片段布局中设置文本。我搜索了很多，但我找不到直接的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:07:13.220

您可以尝试在下面编写代码，

只需在您的片段中创建和方法来设置它的值

```
public void setText(String text) 
{ 
    button.setText(text);  
} 
```

![在此处输入图像描述](../Images/6dbf756b20b98bfaa3c629279a903c53.png)

**基本片段**

```
import android.app.Activity;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.Toast;

public class BasicFragment extends Fragment {
    Button button;  

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_basic, container, false);
        button = (Button) view.findViewById(R.id.fragment_button);
        button.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Activity activity = getActivity();

                if (activity != null) {
                    Toast.makeText(activity,
                            "toast_you_just_clicked_a_fragment",
                            Toast.LENGTH_LONG).show();
                }
            }

        });

        return view;
    }

    public void setText(String text ){
        button.setText(text);
    }
} 
```

**基本片段活动**

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class BasicFragmentActivity extends FragmentActivity {
    BasicFragment b;
    Button btn;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_fragment);
        btn = (Button) findViewById(R.id.button1);

        btn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                b.setText("test");          
            }
        });

        FragmentManager fm = getSupportFragmentManager();
        Fragment fragment = fm.findFragmentById(R.id.fragment_content);

        if (fragment == null) {
            b = new BasicFragment();
            FragmentTransaction ft = fm.beginTransaction();
            ft.add(R.id.fragment_content, b);
            ft.commit();
        }

    }
} 
```

**活动片段**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"           
        android:text="btn_in_fragmentactivity" />

    <FrameLayout
        android:id="@+id/fragment_content"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </FrameLayout>

</LinearLayout> 
```

**片段按钮**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" android:background="#ffffaa">

    <Button
        android:id="@+id/fragment_button"
        android:text="BtnFragment"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

# variables - flash builder 4.6将变量从应用程序传递到项目渲染器

> ID：13788685
> 
> 赞同：0
> 
> 时间：2012-12-09T15:15:54.930
> 
> 标签：variables, flash-builder, itemrenderer

我正在尝试将一个变量从我的主应用程序传递给 itemRenderer。我知道，在使用自定义组件时，您可以公开声明一个变量，然后您可以从主应用程序访问该变量并将其传递给组件，但是使用 itemRenderers 这似乎不起作用。

我似乎无法在 Adob​​e 论坛或此站点上找到我正在尝试做的确切事情。你们中有人知道如何处理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:56:39.637

不确定这是否是您想要做的，但在您的主应用程序文件中，您可以声明一个公共变量并在项目渲染器中使用`this.parentApplication.myVariable`. 我一直这样做，包括在项目渲染器中，以确定用户是使用平板电脑还是手机。

前任：`myComponent.setStyle("fontSize", this.parentApplication.isTablet ? 18 : 16);`

# javascript - 保存主干嵌套模型

> ID：13788687
> 
> 赞同：0
> 
> 时间：2012-12-09T15:16:13.377
> 
> 标签：javascript, backbone.js

我有骨干嵌套模型：

```
var ModelA = Backbone.Model.extend({
    defaults: {
        title: "",
        modelB: null
    }
});

var ModelB = Backbone.Model.extend({
    defaults: {
        text: ""
    }
}); 
```

我希望 ModelA 每次更改 ModelB 的成员时都能保存自己`text`。我该怎么做？
在不同的模型中分配事件监听器是否合适？
以后如何取消绑定这些事件？

（我不能使用 Backbone Relational 插件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:35:30.110

[此 Fiddle](http://jsfiddle.net/rdiaz/Rdttb/)`ModelA`显示了构造函数绑定的示例。`ModelB`当垃圾收集器销毁它的实例时，事件绑定将被丢弃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T21:41:51.443

在 ModelA 定义中：

```
initialize:function(modelB){
  this.set("modelB",modelB);
  modelB.on("change:text",this.save(),this);
} 
```

（未测试）

# python - 在 python 上避免使用 utf-8

> ID：13788688
> 
> 赞同：0
> 
> 时间：2012-12-09T15:16:18.900
> 
> 标签：python, linux, json

我正在使用 python 代码从我的服务器获取数据。但是，我不断将“u”作为 JSON 中每个键的前缀

如下：

```
"{u'BD': 271, u'PS': 48, u'00': 177, u'CA': 5, u'DE': 15, u'FR': 18, u'UM': 45, u'KR': 6, u'IL': 22181, u'GB': 15}" 
```

我的python代码如下：

```
from json import dumps
ans = select something from the database    
json.dumps(ans) 
```

有谁知道如何避免它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T15:17:42.840

这`u''`意味着该值是一个 unicode 文字。一切都按预期工作，你不需要摆脱那些。

JSON 是一个原生支持 Unicode 值的标准，因此`json`模块在将 Python 值转换为 JSON 时接受 unicode 字符串：

```
>>> import json
>>> ans={u'BD': 271, u'PS': 48, u'00': 177, u'CA': 5, u'DE': 15, u'FR': 18, u'UM': 45, u'KR': 6, u'IL': 22181, u'GB': 15}
>>> json.dumps(ans)
'{"BD": 271, "PS": 48, "00": 177, "IL": 22181, "UM": 45, "KR": 6, "CA": 5, "DE": 15, "FR": 18, "GB": 15}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T15:24:09.997

我认为这里有些东西混淆了。您发布的结果看起来像是 dict 的 Python 表示。准确地说：json.dumps 返回一个字符串，所以它的结果应该用引号引起来，像这样：

```
>>> import json
>>> json.dumps({'foo': 'bar'})
'{"foo": "bar"}' 
```

# ios6 - ACAccount Facebook：必须使用活动访问令牌来查询有关当前用户的信息

> ID：13788689
> 
> 赞同：5
> 
> 时间：2012-12-09T15:16:20.660
> 
> 标签：ios6, facebook-access-token, social-framework, acaccount

我正在使用 iOS 6 社交框架来访问用户的 Facebook 数据。我正在尝试在我的应用程序中使用`ACAccount`和来获得当前用户的喜欢`SLRequest`。我有一个`ACAccount`名为的有效 Facebook 帐户引用`facebook`，我正试图以这种方式获得用户的喜欢：

```
SLRequest *req = [SLRequest requestForServiceType:SLServiceTypeFacebook requestMethod:SLRequestMethodGET URL:url parameters:nil];
req.account = facebook;
[req performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
     //my handler code.
} 
```

在我`url`的`@"https://graph.facebook.com/me/likes?fields=name";`处理程序中，我收到以下响应：

```
{
error =     {
    code = 2500;
    message = "An active access token must be used to query information about the current user.";
    type = OAuthException;
};
} 
```

访问令牌不应该由框架处理吗？我发现了一篇类似的帖子[通过新的 iOS6 社交框架查询 Facebook 用户数据，](https://stackoverflow.com/questions/11270755/querying-facebook-user-data-through-new-ios6-social-framework)但是将访问令牌参数硬编码到 URL 中是没有意义的，因为从逻辑上讲，访问令牌/登录检查应该由框架自动处理. 在我见过的所有示例中，没有人手动使用访问令牌：

[http://damir.me/posts/facebook-authentication-in-ios-6](http://damir.me/posts/facebook-authentication-in-ios-6)

[iOS 6 Facebook 发布过程以“remote_app_id 与存储的 id 不匹配”错误](https://stackoverflow.com/questions/12644229/ios-6-facebook-posting-procedure-ends-up-with-remote-app-id-does-not-match-stor) 等结束。

我正在使用带有内置社交框架的仅限 iOS6 的方法，并且我没有使用 Facebook SDK。我错过了什么吗？

谢谢，

能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-20T03:05:22.240

您需要保留对帐户来自的 ACAccountStore 的强引用。如果存储被释放，它看起来会导致这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T03:14:06.683

确保将您的捆绑包 ID 输入到您的 Facebook 应用程序的配置中。您的开发/调试版本可能有不同的包 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-01T18:44:51.127

尝试在实际设备而不是模拟器上运行。这对我有用。

# php - php递归，函数不返回任何值

> ID：13788690
> 
> 赞同：-1
> 
> 时间：2012-12-09T15:16:32.340
> 
> 标签：php, recursion, return

我希望我的函数返回整个 url，从具有给定 id 的节点开始，并为父母搜索，最后一个的 parent_id = 1。我的功能几乎可以工作，在 echo"$wholeUrl"; 我有我的网址，但功能不会重新调整它，我不知道 wtf，请帮忙。

这是我的*代码*：

函数 getUrl($xml,$id){

```
$wholeUrl="";
$wholeUrl= getMyUrl($xml,$id,$wholeUrl);
return $wholeUrl; 
```

}

函数 getMyUrl($xml,$idWew, $wholeUrl){

```
foreach($xml as $node) {
    $par = $node->parent_id;
    $ide = $node->id;
    $url = $node->url;
    $name = $node->name;
    settype($par,'integer');
    settype($ide,'integer');

    if($ide==$idWew){

        $wholeUrl=$url."/".$wholeUrl;

        if($par==1){
            echo"$wholeUrl ";
            return $wholeUrl;
            break;
        }else{

            getMyUrl($xml,$par,$wholeUrl);
        }
    }

}
}

print_r(getUrl($xmlcat,1877)); 
```

**$xmlcat**是具有这种结构的平面数组：

```
SimpleXMLElement Object ( [id] => 1876 [parent_id] => 1 [name] => blablabla, bla, bla [url] => bla-bla-bla-bla ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T15:18:43.963

您需要返回 getMyUrl：

```
 /* .... */
    }else{

        return getMyUrl($xml,$par,$wholeUrl);
    }
    /* .... */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T15:19:53.230

你也必须`return getMyUrl($xml,$par,$wholeUrl);`这样做。否则外层`getMyUrl`继续`foreach`循环并搜索下一个节点。

# c# - 与 C# 相比，在 Java 中使用 foreach

> ID：13788694
> 
> 赞同：-4
> 
> 时间：2012-12-09T15:16:46.680
> 
> 标签：c#, java

我正在尝试使用 foreach 从现有播放器中选择一个 Creature，该 Creature 存在于下的 Creature Vector 中，`m_creature`但是我无法在 Java 中锻炼 foreach 的格式。

我已经编写了代码，就像我用 C# 编写的一样，我希望有人能指出我应该应用的差异，以便在我的 Java 应用程序中工作。我一直在使用向量而不是列表。

```
public List<Creature> SelectCreature(String Name)
    {
        List<Creature> foundCreature = new List<Creature>();

        //For the customer name that equals what has been searched...
        foreach (Creature c in m_creature)
        {
            //
            if (c.CreatureName.Equals(Name, StringComparison.OrdinalIgnoreCase))
                foundCreature.Add(c);
        }

        return foundCreature;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T15:22:42.223

`foreach`java中的命令使用相同的旧`for`关键字：

```
public List<Creature> SelectCreature(String Name)
{
    // List is an interface, you must use a specific implementation
    // like ArrayList:
    List<Creature> foundCreature = new ArrayList<Creature>();

    //For the customer name that equals what has been searched...
    for ( Creature c: m_creature)
    {
        //
        if (c.CreatureName.equalsIgnoreCase(Name))
            foundCreature.add(c);
    }

    return foundCreature;
} 
```

查阅 Java API 以及使用带有代码完成和对象属性列表的 IDE（例如 Eclipse）对您很有帮助。

此外，与 C# 不同，请注意 Java 中的常见做法是让对象方法小写驼峰式，因此列表方法是`add`，而比较方法是`equals`，正如评论中指出的那样。

有用的链接： [字符串 API](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)

[声明](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)

[列表 API](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)

# android - 如何更改相机帧速率以在 Android 中创建慢动作或延时视频

> ID：13788696
> 
> 赞同：4
> 
> 时间：2012-12-09T15:16:51.490
> 
> 标签：android, parameters, camera, frame-rate, mediarecorder

我有一个班级设置，现在可以预览我的表面视图并允许我录制视频文件。我想增加 FPS 以创建慢动作视频并降低 FPS 以创建延时视频。我已经尝试使用 recorder.setVideoFrameRate() 并确保我以正确的顺序调用它，但是每当我尝试更改录制的任何设置时，我都会不断收到非法状态异常。

谁能给我指一个关于如何有效控制相机设置的教程或示例？

干杯。

# java - 管理任务的最佳选择是什么

> ID：13788700
> 
> 赞同：0
> 
> 时间：2012-12-09T15:17:18.893
> 
> 标签：java, scheduled-tasks

我有成千上万的用户，对于每个用户，我都有几百个需要完成的任务。因为我不想完成一个用户而其他所有用户都会等待，所以我最好的选择是同时运行它们，所以如果我有两个任务的用户，所以他没有等待有 100 个任务的用户，当然，例如，如果有用户进入队列但他在 100 位，所以我不希望他等待他之前的所有 99 个用户完成。在 JAVA 中这样做的最佳选择是什么？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-09T15:25:13.523

您需要使用线程。

我建议您为每个用户运行一个不同的线程，这样只有少数线程的用户不会等待其他人完成。

# c# - 在 Razor 中将十进制字段显示为 int

> ID：13788704
> 
> 赞同：4
> 
> 时间：2012-12-09T15:17:43.730
> 
> 标签：c#, visual-studio-2010, razor, asp.net-mvc-4

我使用实体框架从我的 oracle 数据库中获取模型，然后使用 ADO dbcontext 生成器来创建我的类，问题是 oracle 中的“数字”字段作为“十进制”传递，我想要做的是将它们显示在我的表喜欢整数。

例如，我有一个带有表格的 cshtml 视图，它显示

number_of_prod 123.00

我希望它像这样显示：

```
number_of_prod
123 
```

也许用 [DisplayFormat .....] ，但我不知道如何使用它 XD！..

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T15:24:48.127

只需投射到`int`页面上：

```
@((int)myDecimal) 
```

你当然也可以事先施放它们。无论如何，强制转换会截断任何小数位。如果你需要对它们进行四舍五入，那么你应该使用`Math.Round()`.

# delphi - 如何获取 CPU Level 1 缓存（主缓存）信息？

> ID：13788715
> 
> 赞同：3
> 
> 时间：2012-12-09T15:19:06.227
> 
> 标签：delphi, hardware

我尝试使用 WMI 获取 CPU 缓存信息，效果很好，但仅适用于 2 级和 3 级缓存，所以我的问题是，如何获取 CPU 1 级缓存信息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T16:25:09.817

这是使用该[`GetLogicalProcessorInformation`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683194%28v=vs.85%29.aspx)函数的WinAPI方式。如果您至少有 Delphi XE2，则不需要以下定义，它们已经在`Windows`单元中：

```
type
  TLogicalProcessorRelationship = (
    RelationProcessorCore = 0,
    RelationNumaNode = 1,
    RelationCache = 2,
    RelationProcessorPackage = 3,
    RelationGroup = 4,
    RelationAll = $FFFF
  );
  TProcessorCacheType = (
    CacheUnified,
    CacheInstruction,
    CacheData,
    CacheTrace
  );
  TCacheDescriptor = record
    Level: Byte;
    Associativity: Byte;
    LineSize: Word;
    Size: DWORD;
    pcType: TProcessorCacheType;
  end;
  PSystemLogicalProcessorInformation = ^TSystemLogicalProcessorInformation;
  TSystemLogicalProcessorInformation = record
    ProcessorMask: ULONG_PTR;
    Relationship: TLogicalProcessorRelationship;
    case Integer of
      0: (Flags: Byte);
      1: (NodeNumber: DWORD);
      2: (Cache: TCacheDescriptor);
      3: (Reserved: array [0..1] of ULONGLONG);
  end;

function GetLogicalProcessorInformation(
  Buffer: PSystemLogicalProcessorInformation;
  var ReturnLength: DWORD): BOOL; stdcall;
  external kernel32 name 'GetLogicalProcessorInformation'; 
```

以及如何显示所有 1 级缓存条目的缓存类型、级别和大小的示例：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  S: string;
  I: Integer;
  ReturnLength: DWORD;
  Buffer: array of TSystemLogicalProcessorInformation;
begin
  SetLength(Buffer, 1);
  if not GetLogicalProcessorInformation(@Buffer[0], ReturnLength) then
  begin
    if GetLastError = ERROR_INSUFFICIENT_BUFFER then
    begin
      SetLength(Buffer, 
        ReturnLength div SizeOf(TSystemLogicalProcessorInformation) + 1);
      if not GetLogicalProcessorInformation(@Buffer[0], ReturnLength) then
        RaiseLastOSError;
    end
    else
      RaiseLastOSError;
  end;

  for I := 0 to High(Buffer) do
  begin
    if (Buffer[I].Relationship = RelationCache) and
      (Buffer[I].Cache.Level = 1) then
    begin
      S := 'Type: ';
      case Buffer[I].Cache.pcType of
        CacheUnified: S := S + 'Unified cache';
        CacheInstruction: S := S + 'Instruction cache';
        CacheData: S := S + 'Data cache';
        CacheTrace: S := S + 'Trace cache';
      end;
      S := S + sLineBreak;
      S := S + 'Level: ' + IntToStr(Buffer[I].Cache.Level) + sLineBreak;
      S := S + 'Size: ' + IntToStr(Buffer[I].Cache.Size) + ' B';
      ShowMessage(S);
    end;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T16:05:15.213

您可以使用[`Win32_CacheMemory`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394080%28v=vs.85%29.aspx)WMI 类，试试这个代码：

```
{$APPTYPE CONSOLE}

uses
  SysUtils,
  ActiveX,
  ComObj,
  Variants;

procedure  GetWin32_CacheMemoryInfo;
const
  WbemUser            ='';
  WbemPassword        ='';
  WbemComputer        ='localhost';
  wbemFlagForwardOnly = $00000020;
var
  FSWbemLocator : OLEVariant;
  FWMIService   : OLEVariant;
  FWbemObjectSet: OLEVariant;
  FWbemObject   : OLEVariant;
  oEnum         : IEnumvariant;
  iValue        : LongWord;
begin;
  FSWbemLocator := CreateOleObject('WbemScripting.SWbemLocator');
  FWMIService   := FSWbemLocator.ConnectServer(WbemComputer, 'root\CIMV2', WbemUser, WbemPassword);
  FWbemObjectSet:= FWMIService.ExecQuery('SELECT MaxCacheSize, Purpose  FROM Win32_CacheMemory','WQL',wbemFlagForwardOnly);
  oEnum         := IUnknown(FWbemObjectSet._NewEnum) as IEnumVariant;
  while oEnum.Next(1, FWbemObject, iValue) = 0 do
  begin
    Writeln(Format('MaxCacheSize    %d',[Integer(FWbemObject.MaxCacheSize)]));
    Writeln(Format('Purpose         %s',[String(FWbemObject.Purpose)]));
    FWbemObject:=Unassigned;
  end;
end;

begin
 try
    CoInitialize(nil);
    try
      GetWin32_CacheMemoryInfo;
    finally
      CoUninitialize;
    end;
 except
    on E:EOleException do
        Writeln(Format('EOleException %s %x', [E.Message,E.ErrorCode]));
    on E:Exception do
        Writeln(E.Classname, ':', E.Message);
 end;
 Writeln('Press Enter to exit');
 Readln;
end. 
```

# php - 当我加载会话类时，页面不加载 CodeIgniter

> ID：13788719
> 
> 赞同：1
> 
> 时间：2012-12-09T15:19:34.743
> 
> 标签：php, class, codeigniter, session

我正在使用 CodeIgniter 2.1.3，当我尝试加载会话类时，页面没有加载，也没有显示任何错误，看看我想要做什么：（ PS：我已经设置了加密键已经）（它是主控制器的索引......）

```
 public function index() {

    $this->load->library('session');

    $this->load->helper('assets_helper');

    $data['assets_url'] = assets_url();

    $this->load->view(domain_template() . '/index', $data);

} 
```

如果我喜欢上面，代码将不会加载页面，但如果我这样说：

```
 public function index() {

    //$this->load->library('session');

    $this->load->helper('assets_helper');

    $data['assets_url'] = assets_url();

    $this->load->view(domain_template() . '/index', $data);

} 
```

它已加载，为什么会发生？我解决不了！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:27:34.270

将您的 CI 环境设置为 DEVELOPMENT 以显示错误，遵循柯林斯建议在配置级别启用错误报告。您可能还希望跟踪您的日志。在 LAMP 堆栈上，它是 /var/log/apache2/error_log 或 /var/log/httpd/error_log。使用 tail -f PATH_TO_ERRORLOG 并重新加载页面，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:18:19.020

我总是在自动加载时加载会话，但如果你想在特定控制器上加载，请使用：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Perfil extends CI_Controller {

function __construct()
{
    parent::__construct();
    $this->load->library('session');
}

function index() {

} 
```

默认情况下不显示 MAMP 错误。你应该激活。

# c++ - 如何#define 宏仅针对特定文件？

> ID：13788722
> 
> 赞同：6
> 
> 时间：2012-12-09T15:19:43.483
> 
> 标签：c++

我在 macro.h 中定义了一个特殊宏，但我希望它仅在我的部分源文件 (h/cpp) 中有效，我该怎么做？

恐怕有些“坏”用户在不熟悉宏的源文件之前包含了macro.h。

我该如何预防？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-04T13:40:31.623

可以使用`#undef`. 例如：

```
#define MACRO 1

int a = MACRO;

#undef MACRO

int b = MACRO; // ERROR 
```

但是，除非您依赖包含的顺序，否则这不适用于文件，这很糟糕。

如果您想使用`macro.h`在源代码中定义的宏，您可以有第二个`unmacro.h`并将其包含在源代码的末尾：

```
 // foo.cpp
 // other includes
 #include "macro.h"
 // no other includes!

 // contents of the source

 #include "unmacro.h" 
```

但是，我不会推荐它，因为它容易出错。如果您需要使用宏，最好重新考虑。在现代 C++ 中，它们的有效用途极为罕见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T15:21:40.203

你不能。如果它在 中`macro.h`，并且该文件是公开的，则无法绕过它。

一种常见的技术是有条件地定义宏：

```
#ifdef SOME_CONDITION
#define MY_MACRO
#endif 
```

但是“坏”用户也可以定义`SOME_CONDITION`.

您应该做的是将公共标头与私有标头分开。正如您所说的问题，您想要隐藏的宏可能根本不应该在公共标题中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T15:21:48.597

您无法控制宏的影响区域，特别是如果您将它放在随处包含的 .h 中。

如果您希望它仅存在于几个 .h 和 .cpp 文件中，那么一种选择是在这些 cpp 文件的顶部（重新）定义它。您还可以将这些宏单独分离，`.h`并将其仅包含在需要它的 cpp 文件中，而不将其公开给代码的用户。

如果您想要更具体的答案，您可能想举一个更具体的例子

# coldfusion - 检查会话是否仍然存在

> ID：13788725
> 
> 赞同：2
> 
> 时间：2012-12-09T15:19:58.110
> 
> 标签：coldfusion, coldfusion-9, coldfusion-8, coldfusion-10

在登录时，coldfusion 服务器分配给我 a`CFID`和 a `CFTOKEN`。稍后使用这些`CFID`以及`CFTOKEN`如何检查我的会话是否仍然存在。

换句话说，我想要一个函数，它将判断会话是否`CFID`与`CFTOKEN`这些会话相关`CFID`并且`CFTOKEN`仍然存在。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T15:37:41.037

实现这一点的最简单方法是在用户登录时在会话中设置一个标志。

例如

```
<cfset session.loggedin = true /> 
```

那么当你想检查用户是否仍然有一个有效的会话时，你可以做

```
<cfparam name="session.loggedin" default="false" />
<cfif NOT session.loggedin>
  <!--- do something here --->
</cfif> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:15:05.617

克里斯的回答没有任何问题，通常是检查会话时的标准规范。

这两个 cookie 旨在将您的浏览器与您的会话“链接”，而不是实际维护该会话（事实上，我相信这些 cookie 将在 30 年内到期（？），如果您使用的`J2EE session management`话，甚至会被忽略'我没有弄错）。从[文档](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec0c35c-7fef.html)：

> 要使用客户端和会话变量，ColdFusion 必须能够识别客户端。它通常通过在客户端系统上设置以下两个 cookie 值来实现：
> 
> **CFID：**顺序客户端标识符
> 
> **CFToken：**随机数客户端安全令牌 这些 cookie 将客户端唯一标识到 ColdFusion，ColdFusion 还维护变量的副本作为会话和客户端范围的一部分。

正如你[在这里](http://www.bennadel.com/blog/1537-The-Same-CFID-CFTOKEN-Values-Are-Used-Across-ColdFusion-Session-Timeouts.htm)所读到的，Ben Nadel 做了一些玩弄`CFID`，`CFTOKEN`CF 使用相同的地方`CFID`和`CFTOKEN`cookie 在过期后创建新会话。

至于您的“ColdFusion Proper”方式，您*可以*考虑使用[CFLOGIN](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_j-l_07.html)和[其他旨在帮助处理身份验证的安全标签](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_j-l_07.html)，但我不相信很多人使用它，因为正如 Chris 所展示的那样，维护您的会话非常容易。

# asp.net - WebGrid 寻呼机样式

> ID：13788737
> 
> 赞同：1
> 
> 时间：2012-12-09T15:21:27.270
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, webgrid

有没有办法将样式应用于 WebGrid 寻呼机？

我发现这样做的唯一方法是从客户端编写 Jquery 代码，但这似乎有点脏。

有什么正常的方法可以为这个 GridHelper 提供 css 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T10:16:56.100

您可以像往常一样使用 CSS 来设置寻呼机中的链接样式。您只需要确保您可以通过 CSS 选择器识别链接。如果您将 Pager 调用放在可识别的元素中，这很容易：

```
<div id="pager">
    @grid.Pager()
</div> 
```

现在您可以访问样式链接：

```
#pager a {
    color: pink;
    text-decoration: none;
}
#pager a:hover {
    color: green;
    text-decoration: underline;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-12T23:00:18.993

用css很简单。 [![在此处输入图像描述](../Images/ba27025d0d60761cf34354421affc072.png)](https://i.stack.imgur.com/zg0ys.png)

将页脚样式设置为`table-pager`

```
@grid.GetHtml(
  mode: WebGridPagerModes.All,
  columns: gridColumns,
  tableStyle: "table table-striped table-condensed table-responsive table-hover",
  rowStyle: "table-row-clickable",
  footerStyle: "table-pager"
) 
```

并添加这个 CSS：

```
.table-pager > td {
  padding-top: 10px;
}

  .table-pager > td > a {
    background-color: #f5f5f5;
    border: 1px solid #ccc;
    border-radius: 3px;
    padding: 3px 7px;
  }

  .table-pager > td > a:hover {
    background-color: #f0f0f0;
  } 
```

# java - 在 Android 应用程序中使用 JAVA RMI

> ID：13788738
> 
> 赞同：10
> 
> 时间：2012-12-09T15:21:26.557
> 
> 标签：java, android, rmi

我已经阅读了很多关于这个问题的帖子，但我看不到一个“真正的”解决方案。

我做了一个java项目——它是一个rmi服务器，我有一个android应用程序，它也应该是一个rmi客户端。

当我检查服务器是否工作时，我没有足够的智慧在一个 android 项目上测试客户端，我在一个简单的 java 项目上做了一个测试客户端。

现在，当我尝试将我的 android 应用程序连接到服务器时，我失败了，因为 android 项目无法识别 java rmi 包。

为什么会这样？我应该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T17:07:42.840

我有同样的问题并将我的通信更改为套接字通信！

据我所知，Java.rmi 不幸没有随 Android 提供，因此无法使用它。

[但是，这篇](https://stackoverflow.com/questions/5321906/how-to-find-the-jar-of-java-rmi-package)文章中有更多的讨论。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-07T09:17:39.660

您还可以使用以下库[LipeRMI](http://lipermi.sourceforge.net/)

这是一个 Android 客户端通过 LipeRMI 与 Java Server 交互的示例。为 Java 应用程序创建以下 2 个类和一个接口。

```
//TestService.java
package test.common;

public interface TestService {

    public String getResponse(String data);
}

//TestServer.java
import java.io.IOException;
import java.net.Socket;

import test.common.TestService;

import lipermi.exception.LipeRMIException;
import lipermi.handler.CallHandler;
import lipermi.net.IServerListener;
import lipermi.net.Server;

public class TestServer implements TestService {

    public TestServer() {
        try {
            CallHandler callHandler = new CallHandler();
            callHandler.registerGlobal(TestService.class, this);
            Server server = new Server();
            server.bind(7777, callHandler);
            server.addServerListener(new IServerListener() {

                @Override
                public void clientDisconnected(Socket socket) {
                    System.out.println("Client Disconnected: " + socket.getInetAddress());
                }

                @Override
                public void clientConnected(Socket socket) {
                    System.out.println("Client Connected: " + socket.getInetAddress());
                }
            });
            System.out.println("Server Listening");
        } catch (LipeRMIException | IOException e) {
            e.printStackTrace();
        }
    }

    @Override
    public String getResponse(String data) {
        System.out.println("getResponse called");
        return "Your data: " + data;
    }

}

//TestMain.java
public class TestMain {

    public static void main(String[] args) {
        TestServer testServer = new TestServer();
    }
} 
```

安卓客户端：

```
//MainActivity.java
package com.example.lipermidemoandroidclient;

import java.io.IOException;

import test.common.TestService;

import lipermi.handler.CallHandler;
import lipermi.net.Client;
import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Looper;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class MainActivity extends Activity {

    private String serverIP = "192.168.1.231";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button btnGet = (Button) findViewById(R.id.btnGet);
        btnGet.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                new Conn().execute();
            }
        });

    }

    class Conn extends AsyncTask<Void, Void, MainActivity> {

        @Override
        protected MainActivity doInBackground(Void... params) {
            Looper.prepare();
            try {
                CallHandler callHandler = new CallHandler();
                Client client = new Client(serverIP, 7777, callHandler);
                TestService testService = (TestService) client.getGlobal(TestService.class);
                String msg = testService.getResponse("qwe");
                //Toast.makeText(MainActivity.this, testService.getResponse("abc"), Toast.LENGTH_SHORT).show();
                Toast.makeText(MainActivity.this, msg, Toast.LENGTH_SHORT).show();
                client.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
            Looper.loop();
            return null;
        }

    }
}

//TestService.java
package test.common;

public interface TestService {

    public String getResponse(String data);
} 
```

将 LipeRMI 库添加到两个项目
中确保在 Android 项目中添加 INTERNET 权限
另外确保在两个地方都将 TestService.java 文件放在相同的包名中，例如。test.common package here
还将 Android MainActivity.java 中的 serverIP 变量的值更改为运行 Java 代码的机器的 IP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T09:42:23.237

Android 不支持 RMI。您应该更改为套接字或原始 TCP 通信。

# c++ - 将 & 运算符与 char 数据类型一起使用

> ID：13788739
> 
> 赞同：-1
> 
> 时间：2012-12-09T15:21:28.720
> 
> 标签：c++, visual-c++, addressof

> **可能重复：**
> [为什么不显示字符数据的地址？](https://stackoverflow.com/questions/4860788/why-is-address-of-char-data-not-displayed)

我正在尝试使用 & 运算符并被困在这个程序中：

```
#include<iostream>
using namespace std;

int main() {
    char i='a';
    cout<<&i;
    return 1;
} 
```

我期待*变量 i 的地址*作为输出，但输出是*变量 i*本身的值。

任何人都可以解释刚刚发生的事情吗？提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T15:23:25.833

那是`cout::operator<<`因为`const char*`. 你需要一个明确的演员来打印地址：

```
cout<<static_cast<void*>(&i); 
```

这将使用 as 参数调用重载`void*`，这是用于打印地址的参数。

另请注意，您的代码会遇到未定义的行为。那里只有一个字符，并且重载需要一个以空字符结尾的 C 字符串。

# jquery - 使用jquery隐藏多选的所有字段

> ID：13788742
> 
> 赞同：0
> 
> 时间：2012-12-09T15:21:31.257
> 
> 标签：jquery, select

我想知道是否可以使用 jQuery 隐藏多选的所有字段，无论它们的值是什么。

我稍后想做的是根据在同一页面的另一个多选中选择了哪些字段来显示其中一些字段。

两个多选元素之间的链接位于使用 servlet 发送到页面的 HashMap 中。

先感谢您。

# excel - VBA将活动表的名称传递给函数

> ID：13788749
> 
> 赞同：1
> 
> 时间：2012-12-09T15:22:33.393
> 
> 标签：excel, excel-2010, vba

我创建了一个函数来接收三个参数。：

*   字符串数组
*   工作表名称
*   字符串数组的索引

当我编译时，我收到一个编译错误，说明：

编译错误：预期：=

我的电话是：

```
Sub C_Button_ImportBOM_Click()

  Dim strFilePathName As String
  Dim strFileLine As String
  Dim v As Variant
  Dim RowIndex As Long
  Dim mySheet As Worksheet

  ActiveSheet.Name = "Import"

  mySheet = Worksheets("Import")

  strFilePathName = ImportFilePicker

  v = QuickRead(strFilePathName)
  For RowIndex = 0 To UBound(v)
    PopulateNewLine (v(RowIndex), mySheet, RowIndex)
  Next

End Sub 
```

函数声明为：

```
Function PopulateNewLine(SourceString As String, ImportSheet As Worksheet, CurrentRow As Long) 
```

我尝试了很多事情都无济于事。最初只声明并使用了第一个参数，这可以正常工作。

任何想法都非常感谢。

Excel 2010 VBA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:45:17.050

你调用你的函数就像一个子程序，也就是说，你没有从它返回一个值并将它分配给一个变量，就像你通常对一个函数所做的那样。这意味着您需要在没有围绕参数的括号的情况下调用它：

```
PopulateNewLine v(RowIndex), mySheet, RowIndex 
```

如果你真的没有从中返回任何东西，为了清楚起见，你可能应该把它变成一个 Sub：

```
Sub PopulateNewLine(SourceString As String, ImportSheet As Worksheet, CurrentRow As Long)
... your code here
End Sub 
```

另一方面，您应该限定您的 mySheet 参考，正如我在评论中提到的，使用`Set`. 它应该看起来像：

```
Set mySheet = ActiveWorkbook.Worksheets("Import") 
```

替换`ActiveWorkbook`上面的任何工作簿导入。

# eclipse - 在 Eclipse 中工作时如何为 Android 模拟器充电？

> ID：13788754
> 
> 赞同：2
> 
> 时间：2012-12-09T15:22:46.427
> 
> 标签：eclipse, android-emulator

我已经尝试过以下过程：

1.  单击开始，然后单击控制面板。2 .在控制面板主页上，单击程序。
2.  在程序和功能部分中，单击打开或关闭 Windows 功能。
3.  如果出现“用户帐户控制”对话框，请确认它显示的操作是您想要的，然后单击“继续”。
4.  在 Windows 功能列表中，选择 Telnet 客户端，然后单击确定。

成功安装后，运行相同的 telnet 命令。

三）。类型：电源容量100

遵循上述过程后，模拟器停止工作？如果有人可以在这方面帮助我，请发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:35:36.257

只有电源命令使模拟器停止吗？尝试在 telnet 上运行其他命令并告诉我

如果只是电源不起作用，那么试试这个

在您的 avd 管理器中检查您的模拟器的详细信息。确保 hw.battery 是 yes，然后再次运行模拟器并尝试使用 telnet localhost 的 power capacity 100 命令。它应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T10:34:37.883

使用 telnet 命令：
电源状态放电

# vbscript - 在 excel 列值中逐行搜索字符串

> ID：13788755
> 
> 赞同：0
> 
> 时间：2012-12-09T15:22:54.397
> 
> 标签：vbscript

我有一个有 200 列的 Excel 表。现在行数是 3500。所以我必须搜索一个字符串，如果它出现在每一行的任何列中。现在为了使过程更胖，我正在寻找任何替代循环技术。有没有这样的？

```
IntRow6 = 2
DataCount = 0

Do While objSheet6.Cells(IntRow6,1).Value <> ""
  For DataCount = 0 to UBound(VMHArray)
        IntClmn3 = 1        
        Do While 1 = 1
            If objSheet6.Cells(IntRow6,IntClmn3).Value = VMHArray(DataCount) Then
                objSheet6.Cells(IntRow6,IntClmn3+2).Value=objSheet6.Cells(IntRow6,IntClmn3+5).Value
                Exit Do
            End If
            IntClmn3 = IntClmn3 + 1
        Loop
    Next
    IntRow6 = IntRow6 + 1
Loop 
```

以上花费了很多时间，因此我正在寻找可以运行更快搜索的等效 VBScript 代码。

**编辑：**

```
ParentColmnCount=ParentColmnCount-1
IntRow6=2
DataCount=0

Do While objSheet6.Cells(IntRow6,1).Value <> ""
    For DataCount=0 to UBound(VMHArray)
        If objSheet6.Range(objSheet6.Cells(IntRow6,1),objSheet6.Cells(IntRow6,ParentColmnCo‌​unt)).Find(VMHArray(DataCount)) <> Nothing Then
            MsgBox("Hi")
        End If
    Next
    IntRow6=IntRow6+1
Loop 
```

我在上面代码的 Range 行收到任何错误消息，即“未设置对象变量”错误。

***更新***

我已根据您的建议更新了我的代码，并修改了变量的声明如下：

选项显式

暗淡 objExcel1,objWorkbook

暗淡 strPathExcel1

暗淡 objSheet6,objSheet3

调暗 IntRow6,IntRow3

昏暗的 IntClmn3

Dim DataCount,ParentColmnCount

昏暗的法尔格

暗淡任务计数器

Dim r As Range Dim s As Variant

但我再次收到错误：“Dim r As Range”行中的预期语句结束

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T15:31:01.800

签出`Range.Find`（返回一个`Range`对象）。它比循环快。

例子：

```
Sub Test()
    Dim r As Range
    Dim matched As Range

    'Get the second row
    Set r = Sheet1.Range("2:2")
    Set matched = r.Find("myString")

    'Do stuff with matched
End Sub 
```

**UDPATE：**

假设您正在使用`CreateObject("Excel.Application")`，则该`Range`对象将存在（`CreateObject`将返回一个包含`Range`对象和功能的 Excel 实例）。

`Range`为了进一步证明，您已经使用对象（[`Cells`is a `Range`object](http://msdn.microsoft.com/en-us/library/office/ff196273.aspx) ）遍历工作表。

**更新：**

这是一个更高级的示例。假设在 on 中有以下数据`Sheet1`：

```
fred    ethel   ricky   bobby   1   2   3   4
lucy    myrtle  fonzy   rickie  1   2   3   4
joanie  chachie donna   patty   1   2   3   4
selma   homer   lisa    bart    1   2   3   4 
```

您可以像这样遍历范围：

```
Sub test()
    Dim r As Range
    Dim names(3) As String
    Dim s As Variant

    names(0) = "ethel"
    names(1) = "fonzy"
    names(2) = "patty"
    names(3) = "selma"

    For Each s In names
        For Each r In Sheet1.Cells.CurrentRegion.Find(s)
            r.Offset(0, 4).Value = r.Offset(0, 4).Value + 1000
        Next r
    Next s
End Sub 
```

例程完成后，数据现在是：

```
fred    ethel   ricky   bobby   1   1002    3   4
lucy    myrtle  fonzy   rickie  1   2   1003    4
joanie  chachie donna   patty   1   2   3   1004
selma   homer   lisa    bart    1001    2   3   4 
```

**更新：** 我刚刚看到您对您的问题的评论（并编辑了您的问题以包含更新的代码）。

您在该行上收到“未设置对象变量”，因为您不能使用`<>`与对象的比较。将行更改为：

```
If Not objSheet6.Range(objSheet6.Cells(IntRow6,1),objSheet6.Cells(IntRow6,ParentColmnCo‌​unt)).Find(VMHArray(DataCount)) Is Nothing Then 
```

# java - HttpPost 不接受 Java 中的冗长 url

> ID：13788758
> 
> 赞同：2
> 
> 时间：2012-12-09T15:23:16.720
> 
> 标签：java, android, json, http, http-post

这是我的 android 应用程序中的 httppost 方法。它不接受冗长的网址。冗长的网址没有响应/例外。当我在浏览器中手动输入相同的网址时，它工作正常。谁能在这里指出这个问题？

```
 try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

更新：添加了一个示例网址。当在浏览器中手动输入相同的 url 并给出响应时，它可以正常工作。

```
 url.com/data?format=json&pro={%22merchanturl%22:%22http://url.com/logo.pn‌​g%22,%22price%22:599,%22productDesc%22:%22Apple%2032GBBlack%22,%22prodID%22:%2291‌​3393%22,%22merchant%22:%224536%22,%22prourl%22:%22http://url.com/data%22,%22name%‌​22:%22Apple%2032GB%20%2D%20Black%22,%22productUrl%22:%22http://www.url.com/image.‌​jpg%22,%22myprice%22:550,%22mercname%22:%22hello%22,%22mybool%22:false} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:39:55.837

我想您的网址包含类似`index.php?call=getUsers&something=bla`

要解决此问题，您可以使用`NameValuePair`：

```
String url = "http://example.com/index.php";

ArrayList<NameValuePair> nvp = new ArrayList<NameValuePair>();
nvp.add(new BasicNameValuePair("call", "getUsers"));
nvp.add(new BasicNameValuePair("something", "bla"));

try {
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(url);
    post.setEntity(new UrlEncodedFormEntity(nvp));
    HttpResponse response = client.execute(post);
    HttpEntity entity = response.getEntity();
    [...]
} catch (Exception e) {
    [...]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T15:45:30.267

```
public void postData() {
// Create a new HttpClient and Post Header
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.yoursite.com/script.php");

try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("id", "12345"));
    nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T16:26:40.750

您可以尝试使用以下代码。你应该有[Json API](http://www.json.org/)。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;
import java.net.URL;
import java.nio.charset.Charset;

import org.json.JSONException;
import org.json.JSONObject;

public class JsonReader {

  private static String readAll(Reader rd) throws IOException {
    StringBuilder sb = new StringBuilder();
    int cp;
    while ((cp = rd.read()) != -1) {
  sb.append((char) cp);
}
return sb.toString();
  }

  public static JSONObject readJsonFromUrl(String url) throws IOException, JSONException {
    InputStream is = new URL(url).openStream();
    try {
      BufferedReader rd = new BufferedReader(new InputStreamReader(is, Charset.forName("UTF-8")));
  String jsonText = readAll(rd);
  JSONObject json = new JSONObject(jsonText);
  return json;
} finally {
  is.close();
    }
  }

  public static void main(String[] args) throws IOException, JSONException {
    JSONObject json = readJsonFromUrl("https://graph.facebook.com/19292868552");
    System.out.println(json.toString());
    System.out.println(json.get("id"));
  } 
```

# asp.net - asp.net mvc3 控制器参数来自哪里？

> ID：13788761
> 
> 赞同：0
> 
> 时间：2012-12-09T15:23:31.007
> 
> 标签：asp.net, asp.net-mvc-3

我对 MVC3 比较陌生，并且对控制器中的参数有疑问。

我有一个需要 id 的控制器

```
public ActionResult ChooseItem(string id) ... 
```

这个控制器的视图创建了一个表单，当用户提交表单时它发布到这个控制器

```
[HttpPost]
        public ActionResult ChooseApp(string id, string itemID)... 
```

奇怪的是，即使我没有隐藏变量存储`id`在正在发布到此控件的视图中，id 参数设置正确。这实际上是一件好事，但我不明白价值来自哪里。我检查了 Chrome 开发工具中的 POST 值，并且发布的表单值中没有 id。什么是正确设置 id 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:27:36.673

如果您的查询字符串中有一个 id 值，或者您的路由已定义，并且它可以在 URL 中找到一个 id 元素，它将使用它们。此链接描述了默认活页夹的工作原理以及值来自[http://www.howmvcworks.net/OnModelsAndViewModels/TheBeautyThatIsTheModelBinder的优先级](http://www.howmvcworks.net/OnModelsAndViewModels/TheBeautyThatIsTheModelBinder)

# python - Python：引用列表的类对象列表

> ID：13788762
> 
> 赞同：1
> 
> 时间：2012-12-09T15:23:36.060
> 
> 标签：python, python-3.x, member-access

我对python相当陌生。我试图定义一个类，然后我想从一个文件创建一个实例，然后引用它的特定部分，但似乎不能。这是 Python 3.3.0

这里是课堂......

```
class Teams():

    def __init__(self, ID = None, Team = None, R = None, W = None, L = None):
        self._items = [ [] for i in range(5) ]
        self.Count = 0

    def addTeam(self, ID, Team, R=None, W = 0, L = 0):
        self._items[0].append(ID)
        self._items[1].append(Team)
        self._items[2].append(R)
        self._items[3].append(W)
        self._items[4].append(L)
        self.Count += 1

    def addTeamsFromFile(self, filename):
        inputFile = open(filename, 'r')
        for line in inputFile:
            words = line.split(',')
            self.addTeam(words[0], words[1], words[2], words[3], words[4])

    def __len__(self):
        return self.Count 
```

这是 Main 中的代码

```
startFileName = 'file_test.txt'
filename = startFileName

###########
myTestData = Teams()

myTestData.addTeamsFromFile(startFileName) 
```

文件中的样本数据

```
100,AAAA,106,5,0
200,BBBB,88,3,2
300,CCCC,45,1,4
400,DDDD,67,3,2
500,EEEE,90,4,1 
```

我想我在这里很好（不是 100% 肯定），但现在我如何参考这些数据来查看......我没有正确创建类吗？如何查看一个实例是否大于另一个实例...

即，`myTestData[2][2] > myTestData[3][2]`<-----这是我感到困惑的地方，因为这不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:43:17.717

你为什么不创建一个这样的`Team`类：

```
class Team():
    def __init__(self, ID, Team, R=None, W = 0, L = 0)
      # set up fields here 
```

然后在`Teams`

```
class Teams():
   def __init__(self):
       self._teams = []
   def addTeam (self, ID, Team, R=None, W = 0, L = 0)
       team = Team (ID, Team, R=None, W = 0, L = 0)
       self._teams.append (team) 
```

* * *

现在，如果我做对了，您想覆盖`>`操作员的行为。

要做到这一点超载`__gt__(self, other)` [[链接]](http://docs.python.org/2/reference/datamodel.html#special-method-names)

所以会是

```
class Team ():
   # init code from above for Team

    def __gt__ (self, otherTeam):
        return self.ID > otherTeam.ID # for example 
```

还要确保将这些字符串转换为数字，因为您比较的是字符串而不是数字。为此使用`int`功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:18:54.410

您遇到的直接问题是您访问团队数据的代码没有说明您的`myTestData`价值是对象而不是列表。您可以通过以下方式修复它：

```
myTestData._items[2][2] > myTestData._items[3][2] 
```

不过，如果你打算做那么多，我建议重命名`_items`为显然应该公开的东西。您可能还想让该`addTeamsFromFile`方法在将其读取的某些值传递给`addTeam`方法之前将其转换为整数（而不是将它们保留为字符串）。

另一种方法是让您的`Teams`班级支持直接成员访问。您可以通过创建一个名为的方法来做到这一点`__getitem__`（`__setitem__`如果您希望能够直接分配值）。就像是：

```
def __getitem__(self, index):
    return self._items[index] 
```

@Aleksandar 关于为团队数据项创建课程的答案也是一个很好的答案。事实上，为单个团队创建一个类可能比一个包含多个团队的类更有用。您可以用实例列表替换`Teams`该类。`Team`我猜这取决于你要用它做什么。

# plot - Gnuplot：在绘图之外添加键而不调整绘图大小

> ID：13788764
> 
> 赞同：15
> 
> 时间：2012-12-09T15:23:46.083
> 
> 标签：plot, gnuplot, image-resizing

[在 gnuplot 中，我可以使用以下命令](http://gnuplot.sourceforge.net/demo/key.html)将密钥放在绘图之外：

```
set key outside;
set key right top; 
```

但正如[本页](http://gnuplot.sourceforge.net/demo/key.html)所示，键的放置将自动调整绘图区域的大小，以使生成的图像的大小保持不变。无论我将钥匙放在情节区域外的哪个位置，是否有一种简单的方法可以保持情节区域相同？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T19:52:36.990

以画布大小为单位的绘图大小是使用“set size”命令设置的。但是key被认为是绘图的一部分，所以当你使用“set key outside”时，实际的图形总是会缩小，这样graph+key就会服从你用“set size”设置的大小。

您需要做的是首先通过水平缩小绘图为键腾出空间，例如“set size .75, 1”。然后手动定位钥匙。与其说“在外面设置键”，不如尝试“在 x,y 处设置键”，其中 x 和 y 以轴为单位。x 的值将是一些边距 + 键长度 + x 轴长度，并且 y 的值将略小于 y 轴的顶部。您将需要进行一些试验以获得您喜欢的位置，但您会发现图形大小不会随着您使用此命令移动键而改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-18T13:46:24.367

老问题但一个简单的解决方案是简单地设置一个 rmargin 并将图例放在其中。例子：

```
f(x) = x
g(x) = x**2

set multiplot layout 2,1

set rmargin 30
set key at screen 1, graph 1

plot f(x) title "Legend 1 blablabla"

plot g(x) title "Legend 2"

unset multiplot 
```

[![例子](../Images/930b08fc36953ee7ea90bb37213299d2.png)](https://i.stack.imgur.com/nF8GU.png)

您只需要为您的传奇留出足够大的边距。默认单位是字符宽度。

# jquery - 将复杂对象数组发送到 MVC 控制器的问题

> ID：13788766
> 
> 赞同：0
> 
> 时间：2012-12-09T15:23:53.923
> 
> 标签：jquery, ajax, asp.net-mvc, arrays, controller

在这里使用提琴手是发布的数据：

```
first.Id=1&first.Value=This+is+my+first+name.&second.Id=2&second.Value=The+second+one. 
```

在控制器上：

```
[HttpPost]
public void Set(EditSettings[] settings)
{
   //the settings is always null
} 
```

我在这里尝试了很多问题，但没有一个有效！

**因为我只有两个设置，所以我设法分离参数并在我的 ajax 发布请求中使用 falttened 对象。**

现在我的问题是应该将哪种类型的字符串而不是我的初始字符串传递给模型绑定器？由于没有“第一个”或“第二个”参数名称，应该在那里更改什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:02:45.130

您不能在控制器操作中使用数组访问这些值，因为它们没有使用索引发送。您可以执行以下操作以将数据作为数组发送

```
$.ajax({
 url="Url For Action",
data = { data[0].Id : "0" ,  data[0].Value : "This is my first name" , data[1].Id : "1" ,  data[1].Value : "This is my second one"};
});
public void Set([DataBind(Prefix="data")] EditSettings[] settings)
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T23:15:51.383

为什么发布查询字符串而不是 JSON。如果我是你，我会使用 JSON.stringify，它会是这样的：

```
var settings= new Array();
settings.push({ "id": "1", "value": "This+is+my+first+name." }); 
```

然后在您的 JQuery ajax 调用中执行以下操作：

```
$.ajax({
        url: 'You URL',
        type: 'POST',
        datatype: "json",
        traditional: true,
        data: { 
            settings: JSON.stringify(settings),          
        },
        success: function () { window.alert('success'); },
        error: function (event, request, settings) {  
            window.alert('AjaxError' + ' : ' + settings); },
        timeout: 20000
}); 
```

# spring - Spring JMS - 显示订阅者列表或接收（）请求

> ID：13788767
> 
> 赞同：0
> 
> 时间：2012-12-09T15:23:58.237
> 
> 标签：spring, jms, activemq, publish-subscribe

我正在将 Spring-JMS 与 AcriveMQ 一起使用，我有一个简短的问题：是否可以在某种列表中查看所有订阅者？和/或是否可以显示所有正在运行的线程轮询接收（）方法？

谢谢 stetro

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:32:36.907

好吧，您可以使用 JMX 来获取特定主题的所有订阅者。不过，您将获得的信息有点有限。查看随附的 jconsole 清单

![jconsole 示例](../Images/d791cf30eb1849e5883c033d638ada53.png)

# php - AJAX div 刷新只是清除 div 内容

> ID：13788769
> 
> 赞同：1
> 
> 时间：2012-12-09T15:24:10.180
> 
> 标签：php, ajax

我所拥有的是页面上的帖子列表，然后每个帖子都有一个图标可以添加到收藏夹（也有一个观看按钮，但它的工作原理与此完全相同）当点击它时，它会调用带有脚本的页面来添加这个帖子您在数据库中的收藏夹列表。（在使用 ajax 之前，我使用了一个 php 重定向，它返回到上一页）当页面被刷新时，数据库会检查您在收藏夹列表中的帖子，并将根据它是否在您的收藏夹列表中显示适当的图像.

当我单击链接时，它似乎做了它应该做的事情（转到页面并运行对数据库的更新查询），而不是刷新 div 它只是清除它。当我按 f5 刷新页面时，图像现在按应有的方式显示勾选的图像，因此当我单击并且 div 得到某种刷新时对数据库进行查询，但它需要适当的刷新才能显示。

```
echo '<div id = "favwatchbox'.$ID.'">';
if($_SESSION['Valid'] == "True" ){

    $userid = $_SESSION['ID'];

    $check= "SELECT * from UserFavoritePost WHERE UserID='$userid' AND PostID='$ID'";
    $resultcheck = $db->query($check);
    $num_resultcheck = $resultcheck->num_rows;

    $checklater= "SELECT * from UserViewLaterPost WHERE UserID='$userid' AND PostID='$ID'";
    $resultchecklater = $db->query($checklater);
    $num_resultchecklater = $resultchecklater->num_rows;
    $prelogin = $_SERVER["REQUEST_URI"];
    if($num_resultcheck >= 1)
    {
        echo "<a id = 'favdel".$ID."' href='#'><img id='Fav' title='Favorited' src='images/site-design/Favoritecheck.png'></a>";
        ?>
        <script>
            $(function() {
              $("#favdel<?echo$ID;?>").click(function(evt) {
              $("#favwatchbox<?echo$ID;?>").load("sql-scripts/deletefavorite.php?post=<?echo $ID;?>&user=<?echo $userid;?>&pre=<?echo $prelogin;?>")
                 evt.preventDefault();
              })
            })
        </script> 
        <?
    }
    else
    {
        echo "<a id = 'favadd".$ID."' href='#'><img id='Fav' title='Mark as Favorite' src='images/site-design/Favorite.png'></a>";
        ?>
        <script>
            $(function() {
              $("#favadd<?echo$ID;?>").click(function(evt) {
              $("#favwatchbox<?echo$ID;?>").load("phpincludes/markasfavorite.php?post=<?echo $ID;?>&user=<?echo $userid;?>&pre=<?echo $prelogin;?>")
                evt.preventDefault();
              })
            })
        </script> 
        <?
    }
} 
```

从收藏夹中删除的页面

```
<?php   
        include '../phpincludes/dbconnection.php';

        $userid = $_GET['user'];
        $postid = $_GET['post'];

        $query = "DELETE FROM UserFavoritePost WHERE UserID='$userid' And PostId='$postid'";
        $result = $db->query($query);
        $presubmit = $_GET['pre'];  

        if($presubmit == "/myaccount.php")
        {
        header("location:".$presubmit."");
        }
        ?> 
```

我在从收藏夹 php 文件中删除时包含了一个 img src，现在当您单击它时会更新并更新图像，但是当我再次单击链接以重新添加到我的收藏夹时，它只会将我带到页面顶部。如果我刷新并单击它将运行添加脚本，但它仍然没有正确刷新 div

# r - R文本挖掘包通过修改或删除现有文档来更新语料库

> ID：13788770
> 
> 赞同：1
> 
> 时间：2012-12-09T15:24:15.730
> 
> 标签：r, text, text-mining

我想通过做这样简单的事情来修改由语料库索引的现有文档

```
myCorpus[[10]] = "hey I am the new content of this document" 
```

这是有效的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T16:46:56.947

目前尚不清楚你想用你的语料库做什么。追加您的语料库或修改第 10 个元素？

我想说的是，作为语法它是正确的，但语义是错误的。

从概念上讲，语料库是元数据和 TextDocument 的列表。因此，您可以使用“[[”或“$”作为任何 R 列表访问此列表。

所以如果你这样做（最好使用 <- 比 = 甚至在这里它们是等价的）

```
myCorpus[[10]] <- "hey I am the new content of this document" 
```

这将创建或更改第 10 个元素，但使用类**字符**元素而不是**TextDocument**。所以你不能在课堂上应用使用方法

所以要更新 10 个文本文档的内容：

```
Content(myCorpus[[10]]) <- "hey I am the new content of this document" 
```

要创建新元素，请使用：

```
tmUpdate(ovid, DirSource(txt)) 
```

检查源文件中尚不存在于文档集合中的新文件。被解析并添加到现有文档集合中。

# r - R：提取关键字后的值和行（文本文件挖掘）

> ID：13788774
> 
> 赞同：4
> 
> 时间：2012-12-09T15:24:47.363
> 
> 标签：r, keyword, text-mining

设置：我有（简单的）.csv 和 .dat 文件，这些文件是从实验室设备和其他存储测量或计算信息的程序创建的。我发现这个适用于其他语言，但也适用于 R

问题：使用 R，我试图提取值以快速显示结果而无需打开创建的文件。在此我有两个典型的设置：

a) 我需要在已知关键词之后读取先验未知值 b) 我需要在已知关键词或行之后读取行

我无法使 scan() 和 grep() 等函数工作。

c）最后我想循环一个文件夹中的几十个文件并给我一个摘要（为了使图片完整：我将管理这部分）

我将不胜感激任何形式的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:47:42.007

好的，它适用于键值（虽然可能不是很好）

```
 variable<-scan("file.csv", what=character(),sep="") 
```

返回所有内容的字符向量

```
 variable[grep("keyword", ks)+2]     # + 2 as the actual value is stored two places ahead 
```

返回 seaked 值的字符。

```
 as.numeric(lapply(variable, gsub, patt=",", replace=".")) 
```

为了完成：必须将数据更改为数字和“，”和“。” 需要解决的问题。

在一行中： data=as.numeric(lapply(ks[grep("Ks_Boden", ks)+2], gsub, patt=",", replace=".​​"))

坚持不懈并不是一件坏事；-)

剩下的还没写完，等写完再发。

# c++ - 将向量容器传递给其他函数

> ID：13788776
> 
> 赞同：0
> 
> 时间：2012-12-09T15:24:57.970
> 
> 标签：c++, list, graph, vector, nodes

这个问题是这个问题的一个连续体[，](https://stackoverflow.com/questions/13783090/sigbart-error-vectorlistmyclass)
我的 Node 类中有一个列表向量，这些列表没有传递给其他函数。

这是 Node.h

```
#include "MyGraph.h"

//The Node Class will take the information from the graph class and
//convert the information into a format so we can perform DFS on our
//graph.

enum VertexState { White, Gray, Black };

class Node {
    private:
    string nodeId;
    VertexState status; //whether or not the vertex Node has been visited or not
    vector<Node> nodeList;
    vector<list<Node> > *edgeList;

public:
    Node(): nodeId(), status(){}

    //copy constructor
    Node(string vertex){
    nodeId=vertex;
    status = White;
    }
    ~Node(){}

   //Setter and Getter methods for our class variables
    void setId(string vertex){
       nodeId = vertex;
    }
    void setStatus(VertexState newStatus){
        status = newStatus;
    }

    string getNodeId(){
        return nodeId;
    }

    VertexState getStatus(){
        //status == White then it is not visited
        //status == Gray its being processed
        //status == Black then it has been visited
        return status;

    }

    vector<Node> getNodeList(){
        return nodeList;
    }
    vector<list<Node> > getEdgeList(){
        return *edgeList;
    }

    //create nodes from vertex list in the graph object
    void createNodeList(MyGraph graphObject){
        vector<string> vertexList;
        vertexList = graphObject.getVertexList();
        vector<string>::iterator it;
        vector<Node>placeNodeList;
        for (it = vertexList.begin(); it !=vertexList.end(); it++){
            Node newNode(*it);
            placeNodeList.push_back(newNode);
        }

        nodeList = placeNodeList;

        cout << "Size of initial nodeList: " << nodeList.size()<<endl;
    }

    //creates container for edge lists from the graph object
    void createEdgeList(MyGraph graphObject){
        vector<list<string> > newEdgeList;
        newEdgeList = graphObject.getEdgeList();

        vector<list<Node> > myEdgeList;

        vector<list<string> >::iterator it;
        for (it = newEdgeList.begin() ; it != newEdgeList.end(); it++) {
            list<string> edgeString;
            list<string>::iterator eIt;
            edgeString =*it;
            list<Node> edgeContainer; //creates a list container to be pushed on to our edgeList variable
            for (eIt = edgeString.begin(); eIt != edgeString.end(); eIt++) {
                Node newNode(*eIt);
                edgeContainer.push_back(newNode);
            }
            myEdgeList.push_back(edgeContainer);
        }
        edgeList = &myEdgeList;

        cout << "Size of intial edgeList: "<<edgeList->size() <<endl;

    }

    //The operational methods that will work on the Nodes of the graph
    vector<Node> dephtFirstSearch(Node vertex);//will determine if our graph is connected.
    vector<Node> DFS2(vector<Node> copyNodeList);
    bool isGraphConnected(vector<Node> nodeList);
    bool isEdgeConnected(Node vertex1, Node vertex2);//will determine if there is an edge between two nodes
    bool findElementaryCycles();
    void findArticulationPoints();
    void removeVertex(Node myNode, vector<Node>copyNodeList, vector<list<Node> >copyEdgeList);

    }; 
```

当我尝试在我的其他函数中调用向量 edgeList 时，使用：edgeList->empty; 该函数不应该是空的。每次我需要使用 createEdgeList 函数时都会调用它，因此它不为空。如何将数据从我的私有变量传递给函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:27:19.963

```
vector<list<Node> > myEdgeList;    
...
edgeList = &myEdgeList; 
```

您正在存储指向局部变量的指针 - 这充其量是未定义的行为。

为什么不将 edgelist 设为法线向量并直接添加到它`createEdgeList`

# javascript - 在 javascript 正则表达式中访问 string.replace() 之外的 $1 等？

> ID：13788779
> 
> 赞同：0
> 
> 时间：2012-12-09T15:25:11.773
> 
> 标签：javascript, regex, backreference

众所周知`$1`，等等是在使用正则表达式时对 string.replace() 中捕获的组的反向引用，因此您可以执行以下操作：

```
string.replace(/(http:\/\/\S*)/g, '<a href="$1" target="_blank">link<\/a>') 
```

现在我的问题是是否有办法`$1`在替换之外访问捕获的数据等等。比如`backrefarray[1]`为了`$1`什么...

这样的事情可能吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T15:27:08.327

是的，您可以使用 match ：

```
var array = str.match(/(http:\/\/\S*)/g); 
```

（但数组从索引 0 开始）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T15:28:15.987

您可以使用函数代替固定字符串：

```
string.replace(/(http:\/\/\S*)/g, function() {
    return '<a href="'+arguments[1]+'" target="_blank">link<\/a>';
}) 
```

整个模式和每个组的匹配作为参数传递给函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T17:18:59.863

## 正则表达式.$1

此外，在任何正则表达式操作完成后`$1`，`$2`捕获变量（如果存在）可作为全局 RegExp 对象的属性在全局范围内使用。匹配成功后试试这个：

```
alert(RegExp.$1); 
```

# c# - 何时使用弱事件？

> ID：13788787
> 
> 赞同：15
> 
> 时间：2012-12-09T15:26:31.293
> 
> 标签：c#, .net, mef

我正在参考有关弱事件的 MSDN 教程。我了解了基础知识。我正在从事一个非 WPF 项目，我的班级正在公开某些事件。我的问题是，弱事件是否完全取代了旧的事件模式？每个暴露事件的类都使用它好吗？随意使用弱事件有什么副作用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-09T16:02:19.430

根据我所做的阅读，使用 Wea​​kEvents 似乎没有任何特定的负面影响，除了这样做更冗长。此外，在大多数情况下，您应该能够在不再需要事件时手动取消注册。在某些情况下，这是不可能的。例如，您引用的 MSDN 页面提到何时应该使用 Wea​​kEvents：

[http://msdn.microsoft.com/en-us/library/aa970850.aspx](http://msdn.microsoft.com/en-us/library/aa970850.aspx)

> 某些场景本身就适合弱事件模式的应用。一种这样的场景是数据绑定。在数据绑定中，源对象通常完全独立于作为绑定目标的侦听器对象。WPF 数据绑定的许多方面已经在如何实现事件中应用了弱事件模式。

唯一向他们提出任何负面意见的人是这个博客：

[http://blog.catenalogic.com/post/2011/11/23/A-weak-event-listener-for-WPF-Silverlight-and-Windows-Phone-7.aspx](http://blog.catenalogic.com/post/2011/11/23/A-weak-event-listener-for-WPF-Silverlight-and-Windows-Phone-7.aspx)

> 一般来说，使用弱事件侦听器有一些缺点：
> 
> *   它的符号很丑陋，“原始” .NET 方式看起来好多了
> *   您必须按字符串命名事件，这很糟糕（如果您知道更好的方法，请联系我！）
> *   它只能使用 EventHandler 的处理程序来处理事件
> *   你变成了一个懒惰的开发者，不关心订阅

本质上，它们应该用于您的对象将在其存在的整个期间订阅的事件，并且仅在对象被释放时断开连接。对于其他一切，首选使用传统事件并手动注册/注销事件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-20T03:11:06.567

弱事件必须考虑两个问题：

1.  弱事件允许订阅者订阅事件（消息），即使不知道引发事件的类的身份。在某些情况下，这可能是需要的，甚至是必要的。但是，在某些情况下，这可能会引入不必要的复杂性和一定程度的间接性，使代码在运行时更难管理或控制。
2.  使用弱事件的主要缺点是它可能会鼓励开发人员忽略他们取消订阅事件（消息）的部分。在这种情况下，即使在订阅者“超出范围”之后，也可以调用事件处理程序。考虑一个没有显式取消订阅并且变为可垃圾回收但尚未被垃圾回收的订阅者。弱事件管理器将无法检测到该状态，因此它仍将调用该订阅者的事件处理程序。这可能会导致各种意想不到的副作用。

[在弱事件模式很危险](http://ladimolnar.com/2015/09/14/the-weak-event-pattern-is-dangerous/)中查看更多详细信息。
请参阅使用 MvvMCross 消息传递插件作为弱事件管理器来说明此问题的[源代码。](https://github.com/ladimolnar/Samples/tree/master/Sources/WeakEvents)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-07T00:38:01.743

**什么时候使用弱事件？**

来自[MSDN](https://msdn.microsoft.com/en-us/library/aa970850%28v=vs.110%29.aspx)

> 监听事件可能导致内存泄漏

所以你应该使用弱事件来避免这些泄漏

**每个暴露事件的类都使用它好吗？随意使用弱事件有什么副作用？**

请参阅[为什么 C# 中的事件实现默认不使用弱事件模式？](https://stackoverflow.com/a/29064996/1102585). 从“强”事件中泄漏并不常见，弱事件会带来性能成本，并且在每种情况下都可能存在语义差异，滥用弱引用可能会导致事件间歇性地不触发（与滥用导致内存泄漏的正常事件）

**可以避免的示例内存泄漏**

静态类和单例在谈论内存泄漏时是恶棍，当它们获取对其他对象的引用时，它们将阻止对象被垃圾收集，因此，在应用程序的生命周期内泄漏对象，[这](https://stackoverflow.com/q/30088798/1102585)是我遇到的一个例子需要弱引用以避免内存泄漏

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-29T22:06:57.227

首先，弱事件并不总是必要的，就像其他人所说的，只有当源对象比订阅者更长寿时。如果是这样，那么是的，你应该使用它，这就是人们所说[的弱事件模式](https://csharpvault.com/blog/weak-event-pattern/)。

副作用只是您将不得不编写更多代码。Microsoft 提供了 WeakEventManager 类，并且在 WPF 中存在一些特定的实现，但您可以创建自己的继承自基础 WeakEventManager。

它的工作方式是使用从源对象到侦听器的[弱引用](https://csharpvault.com/blog/weak-references/)，因此这种关系不会阻止 GC 收集这些对象。对于某些特定的应用程序，这可以解决很多性能问题。

# c++ - 如何确定参数是否为纯函数指针？

> ID：13788788
> 
> 赞同：1
> 
> 时间：2012-12-09T15:26:30.903
> 
> 标签：c++, function, function-pointers, functor, typetraits

我想写一个名为is_pure_func_ptr的trait-checker，它可以判断类型是否为纯函数指针，如下：

```
#include <iostream>

using namespace std;

void f1()
{};

int f2(int)
{};

int f3(int, int)
{};

struct Functor
{
    void operator ()()
    {}
};

int main()
{
    cout << is_pure_func_ptr<decltype(f1)>::value << endl; // output true
    cout << is_pure_func_ptr<decltype(f2)>::value << endl; // output true
    cout << is_pure_func_ptr<decltype(f3)>::value << endl; // output true
    cout << is_pure_func_ptr<Functor>::value << endl;      // output false
    cout << is_pure_func_ptr<char*>::value << endl;        // output false
} 
```

我的问题是：**如何实施？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T15:37:49.217

正如 Joachim Pileborg 所说，[`std::is_function`](http://en.cppreference.com/w/cpp/types/is_function)将完成这项工作。如果这不是您的选择，但您确实支持 C++11（这意味着您只想知道如何自己实现它，或者您的标准库还不存在），您可以执行以下操作：

```
template<typename T>
struct is_pure_func_ptr: public std::false_type {};
template<typename Ret, typename... Args>
struct is_pure_func_ptr<Ret(Args...)>: public std::true_type {};//detecting functions themselves
template<typename Ret, typename... Args>
struct is_pure_func_ptr<Ret(*)(Args...)>: public std::true_type {};//detecting function pointers 
```

[这](http://ideone.com/53hjDt)可行，但在支持具有不同调用约定和/或 cv 限定指针的函数时，您可能需要额外的工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T15:29:45.813

如果您有 C++11 标准库，请尝试[`std::is_function`](http://en.cppreference.com/w/cpp/types/is_function).

# javascript - Javascript使用类中的变量调用类方法

> ID：13788791
> 
> 赞同：0
> 
> 时间：2012-12-09T15:27:05.440
> 
> 标签：javascript, oop, prototype, encapsulation

我对 javascript 非常陌生，类和方法的工作方式让我感到困惑。

基本上我有这样的代码：

```
function container(x, y, z) {
  this.x = x;
  this.y = y;
  this.z = z;

  this.sumUp = function addUp(x, y, z) {
    var a = x + y + z;
  };
} 
```

我想要做的是在我的代码的其他地方使用容器中定义的函数，使用容器中的值。我该怎么做呢？

类似的东西

```
container1 = new container (1, 2, 3);
container.sumUp(this.x, this.y, this.z); 
```

或类似的东西。我很困惑，认为我把整件事都搞错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T15:31:50.137

我想你想要这样的东西：

```
function Container(x, y, z){
  this.x = x;
  this.y = y;
  this.z = z;

  this.sumUp = function addUp(x, y, z){
    alert(this.x + this.y + this.z);
  };
}

container_instance = new Container(1, 2, 3);
container_instance.sumUp(); 
```

但我建议：

```
function Container(x, y, z){
  this.x = x;
  this.y = y;
  this.z = z;
}

Container.prototype.sumUp = function addUp(x, y, z){
  alert(this.x + this.y + this.z);
};

container_instance = new Container(1, 2, 3);
container_instance.sumUp(); 
```

***这就是它的工作原理（简短）：***

在 JavaScript 中`objects`，它们就像哈希：

```
var obj = {
  'a': 1,
  'b': 2,
  'c': 3
}; 
```

您可以通过键获取或设置值：

```
alert(obj.a); // alerts 1
alert(obj['a']); // same thing
obj['c'] = 4; 
```

在您的情况下`Container`，函数将构建您的对象。当你这样做时`new Container(1, 2, 3);`，它会创建一个空对象，并在对象的上下文中执行函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T15:34:28.713

```
function Container(x, y, z){
  this.x = x;
  this.y = y;
  this.z = z;
}
// There is no point to put parameters there since they are already instance variables.
Container.prototype.sumUp = function addUp(){
  alert(this.x + this.y + this.z);
};

container_instance = new Container();
container_instance.sumUp(); 
```

# c# - 如何计算某些符号的出现次数？

> ID：13788793
> 
> 赞同：5
> 
> 时间：2012-12-09T15:27:17.467
> 
> 标签：c#, string

在我的程序中，您可以编写一个可以编写变量的字符串。

例如：

> 我的狗的名字是 %x%，他有 %y% 岁。

我可以替换的词是介于`%%`. 所以我需要一个函数来告诉我在那个字符串中有哪些变量。

```
GetVariablesNames(string) => result { %x%, %y% } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T15:31:17.247

我会使用[正则表达式](http://msdn.microsoft.com/en-us/library/ms228595.aspx)来查找任何看起来像变量的东西。

如果您的变量是百分号、任意字字符、百分号，那么以下应该有效：

```
string input = "The name of my dog is %x% and he has %y% years old.";

// The Regex pattern: \w means "any word character", eq. to [A-Za-z0-9_]
// We use parenthesis to identify a "group" in the pattern.

string pattern = "%(\w)%";     // One-character variables
//string pattern ="%(\w+)%";  // one-or-more-character variables

// returns an IEnumerable
var matches = Regex.Matches(input, pattern);

foreach (Match m in matches) { 
     Console.WriteLine("'{0}' found at index {1}.", m.Value, m.Index);
     var variableName = m.Groups[1].Value;
} 
```

MSDN：

*   [`Regex.Matches`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.matches.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T15:41:02.750

您可以使用正则表达式来获取出现次数，并将它们分组以计算每个事件的出现次数。例子：

```
string text = "The name of my dog is %x% and he has %y% years old.";

Dictionary<string, int> keys =
  Regex.Matches(text, @"%(\w+)%")
  .Cast<Match>()
  .GroupBy(m => m.Groups[1].Value)
  .ToDictionary(g => g.Key, g => g.Count());

foreach (KeyValuePair<string,int> key in keys) {
  Console.WriteLine("{0} occurs {1} time(s).", key.Key, key.Value);
} 
```

输出：

```
x occurs 1 time(s).
y occurs 1 time(s). 
```

# android - 真实设备和模拟器/模拟器有什么区别？

> ID：13788795
> 
> 赞同：-3
> 
> 时间：2012-12-09T15:27:21.447
> 
> 标签：android, ios, testing, android-emulator, ios-simulator

最近在 QCon 上，Gerard Meszaros 说我们应该只在模拟器上运行自动化测试以提高效率。我们也在考虑移动自动化测试。但我不确定是否会有一些只能在真实设备中发现的问题？或者无法在模拟器/模拟器中测试某些组件，如相机、重力传感器？谢谢！

编辑：

您可以在此处找到 Gerard 的幻灯片：[http](http://www.slideshare.net/pinot_noir/ensuring-quality-in-cloud-and-mobile-applications) ://www.slideshare.net/pinot_noir/ensuring-quality-in-cloud-and-mobile-applications 。

我再次阅读幻灯片，发现我误解了他的观点。他真正的意思是我们应该尽量避免在硬件上进行调试（第 41 页）。他还提到我们可以捕获传感器和其他服务的传出请求，然后注入它们的响应。或许我们可以挑选一些在模拟器中无法完全测试的案例，然后在真机上进行测试。

感谢您的所有评论！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:41:37.117

> 最近在 QCon 上，Gerard Meszaros 说我们应该只在模拟器上运行自动化测试以提高效率。

这是一个奇怪的建议，如果梅萨罗斯先生真的这么说的话。在模拟器上运行测试很好，但“仅”是一个过分的建议。在设备上运行自动化测试并没有什么坏处，你可以从中学到很多东西。

> 但我不确定是否会有一些只能在真实设备中发现的问题？

当然。

*   许多设备具有多核 CPU，而模拟器此时仅模拟单核
*   设备存储的运行速度往往比模拟器上的存储慢很多
*   设备制造商以不会出现在运行股票 Android 的模拟器上的方式修补 Android
*   仿真器仅松散地仿真与电源、互联网（例如，没有移动数据、没有 WiFi）、GPS、传感器、相机等相关的硬件。
*   模拟器不支持部分设备功能，如新 V2 版地图、Play 商店、Android 4.2 上的多个帐户等。

等等。

> 或者无法在模拟器/模拟器中测试某些组件，如相机、重力传感器？

那些很难以自动化方式进行测试，期间。

# sql - 根据另一个表中的值更新表

> ID：13788801
> 
> 赞同：1
> 
> 时间：2012-12-09T15:27:57.520
> 
> 标签：sql, plsql, oracle11g, sql-update

我有两个表，我想通过表 A 中的列中`bcnt`的值更新表 b 中的列，`acnt`其中表 A 中的 worlds 列与表 B 中的单词列匹配，表 B 中的 id 与表 A 中的 id 匹配。

```
create table a 
( 
    id number(9),
    words varchar2(2), 
    acnt number(9)
);

insert into a values(1,'Cairo',20);
insert into a values(1,'UK',10);
insert into a values(2,'KL',2);
insert into a values(2,'Cairo',2);
insert into a values(2,'London',30);
insert into a values(3,'Cairo',5);
insert into a values(4,'KSA',15);

create table b 
(
     id number(2), 
     words varchar2(20), 
     bcnt number
);

insert into b values(1,'Cairo',null);
insert into b values(1,'UK',null);
insert into b values(2,'KL',null);
insert into b  values(2,'Cairo',null);
insert into b values(3,'Cairo',null);
insert into b values(4,'KSA',null); 
```

我使用了这个 SQL 代码，但它不正确。

```
update b 
set bcnt = (select acnt 
            from a 
            where a.id = b.id and a.words = b.words); 
```

预期成绩：

```
1   cairo  20
1   uk     10
2    kl     2
2   cairo   5 
4   ksa     12 
```

SQL向我展示了以下内容

```
SQL> /

        ID WORDS                      BCNT
---------- -------------------- ----------
         1 Cairo
         1 UK                           10
         2 KL                            2
         2 Cairo
         3 Cairo
         4 KSA

6 rows selected. 
```

SQL>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:45:13.437

是您的 SQL 使用的问题`word`而不是`words`表定义中的问题吗？

```
update b
    set bcnt=(select acnt from a where a.id=b.id and a.words=b.words ); 
```

此外，您的数据类型在这两个表中不正确。您的创建表语句应该是一致的：

```
create table a (id number(9),words varchar2(20), acnt number);
create table b (id number(9), words varchar2(20), bcnt number); 
```

发生的情况是第一个表中超过 2 个字符的值被截断为两个字符。因此，值不是“Cairo”，而是“Ca”（以适应 varchar2(2)）。结果，您在联接中没有匹配项。

# node.js - Box API 不规则标题

> ID：13788804
> 
> 赞同：0
> 
> 时间：2012-12-09T15:28:23.613
> 
> 标签：node.js, http, box-api

我正在尝试使用 box API 和[`request module`](https://github.com/mikeal/request). 我尝试了提供的 curl 示例，没有任何问题。

我有一个要求像这样的所有设置

```
var request = require("request");
var fs = require("fs");
var path = require("path");

request({
    url: "https://api.box.com/2.0/files/content",
    method: "POST",
    form: {
        filename: fs.createReadStream(path.join(__dirname, "midguts.jpg")),
        folder_id: "0"
    },
    headers: {
        api_key: "<API_KEY>",
        auth_token: "<AUTH_TOKEN>"
    }
}, function (error, response, body) {
    console.log(error);
    console.log(body);
}); 
```

当我到达标题部分时，问题就出现了。[`box API`](http://developers.box.com/docs/#files-upload-a-file)对标头字符串的调用

```
"Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN" 
```

但是我使用请求模块只能发送键值对的对象。我还查看了节点的文档[`http.request`](http://nodejs.org/api/http.html#http_http_request_options_callback)，发现它有同样的问题。

所以问题是，为什么 API 不遵循标准密钥对格式，我怎样才能发送有效的 POST 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:19:22.977

`Authorization`是 HTTP 标头的名称（[另请参阅](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)）。这可能会更好：

```
headers: {
    Authorization: "BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN"
} 
```

# php - 使用 PHP 和 HTML 的“测验”

> ID：13788805
> 
> 赞同：1
> 
> 时间：2012-12-09T15:28:56.627
> 
> 标签：php

我正在做一个个人项目，这个想法的一部分涉及用户回答五个问题，并且根据回答，它会将您导航到 3 个不同的故事之一。我目前正在使用[CSS-Tricks](http://css-tricks.com/building-a-simple-quiz/)中的一个简单测验作为模板，并且通过使用 elseif 语句对其进行了修改以接受所有正确答案。我现在遇到的问题是，我不完全确定如何根据响应使其指向不同文件之一。

该脚本通过提出问题（如您在网站上看到的，如果您愿意）来工作，这些问题在此处输出、收集和显示。

相对简单，所有“A”答案都指向一个故事，所有“B”答案都指向另一个故事，“C”也是如此。显然，由于我正在尝试编辑的测验的性质，它想要对它们进行“评分”，而不是收集结果并据此做出决定。

```
<?php

   $answer1 = $_POST['question-1-answers'];
   $answer2 = $_POST['question-2-answers'];
   $answer3 = $_POST['question-3-answers'];
   $answer4 = $_POST['question-4-answers'];
   $answer5 = $_POST['question-5-answers'];

   $responseA = 0;
   $responseB = 0;
   $responseC = 0;

   if ($answer1 == "A") { $responseA++; }
   elseif ($answer1 == "B") {$responseB++; }
   elseif ($answer1 == "C") {$responseC++; }

   if ($answer2 == "A") { $responseA++; }
   elseif ($answer2 == "B") {$responseB++; }
   elseif ($answer2 == "C") {$responseC++; }            

   if ($answer3 == "A") { $responseA++; }
   elseif ($answer3 == "B") {$responseB++; }
   elseif ($answer3 == "C") {$responseC++; }            

   if ($answer4 == "A") { $responseA++; }
   elseif ($answer4 == "B") {$responseB++; }
   elseif ($answer4 == "C") {$responseC++; }            

   if ($answer5 == "A") { $responseA++; }
   elseif ($answer5 == "B") {$responseB++; }
   elseif ($answer5 == "C") {$responseC++; }            

   if ($responseA) { echo '<a href="sin.php">Next Page</a>'; }
   elseif ($responseB) { echo '<a href="mys.php">Next Page</a>'; }
   elseif ($responseC) { echo '<a href="ils.php">Next Page</a>'; }

?> 
```

因此，如果有人能指出我正确的方向，我将不胜感激。当我想到它时，这听起来很简单，但它比我计划的学习项目要复杂得多！

**编辑**

我已经更新了代码以反映 cbronson 的建议，它确实比以前好很多！我现在遇到的问题是，似乎 responseC 没有被计算在内。前两个变量运行良好，它们的任何组合都会导致 A 或 B，但是当我选择所有 C 时，它会吐出指向“mys.php”而不是“ils.php”的链接。

**编辑 2**

让它再次工作。傻，傻，傻。感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:41:05.683

代替单个响应变量，为每个答案（A、B 和 C）创建三个单独的变量，并为每个 var 分别添加一个测试结果。然后哪个响应变量有更多结果（最常选择），将是您的总体答案。打破平局将取决于您。

例如，如果我回答测验： 1)A 2)B 3)C 4)A 5)A; 变量应该是：responseA = 3，responseB = 1，responseC = 1。变量响应 A 大于 B 和 C，所以请指出我的响应 A 的故事。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-09T17:04:42.403

我认为 php 不是正确的方法。我使用 javascript 来制作类似的更简单的代码。如果有帮助，我可以给你。只是评论回来！谢谢！

# java - MVC 模板项目看不到 hibernate.cfg.xml

> ID：13788815
> 
> 赞同：0
> 
> 时间：2012-12-09T15:30:04.930
> 
> 标签：java, spring, hibernate, spring-mvc, hibernate.cfg.xml

我是 Spring MVC 的新手。我正在使用 STS，并且创建了 Spring MVC 模板项目（默认使用 Maven）。我正在尝试使用 Hibernate，我知道在默认的 Java 项目中我必须将 hibernate.xml.cfg 放在 /src 文件夹中。我已经读过，在我的情况下（使用带有 maven 的 Spring MVC 模板）我必须将 hibernate.cfg.xml`src/main/resources`和`/WEB-INF/classes`. 但这也没有帮助。我仍然有 ClassNotFoundException：

```
 SEVERE: Servlet.service() for servlet [appServlet] in context with path [/mvc] threw exception [Handler processing failed; nested exception is java.lang.ExceptionInInitializerError] with root cause
java.lang.ClassNotFoundException: org.dom4j.DocumentException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at com.andrew.hibernate.HibernateUtil.<clinit>(HibernateUtil.java:18)
    at com.andrew.hibernate.DAO.getStudent(DAO.java:48)
    at com.andrew.mvc.HomeController.home(HomeController.java:37)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

这是我的 hibernate.cfg.xml：

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
    "-//Hibernate/Hibernate Configuration DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>

    <session-factory>

      <!-- Database connection settings -->
        <property name="connection.driver_class">com.microsoft.sqlserver.jdbc.SQLServerDriver</property>
        <property name="connection.url">jdbc:sqlserver://localhost:1433</property>
        <property name="connection.username">hibernate</property>
        <property name="connection.password">123456</property>

      <!-- SQL dialect -->
        <property name="dialect">org.hibernate.dialect.SQLServerDialect</property>

      <!-- JDBC connection pool (use the built-in) -->
        <property name="connection.pool_size">1</property>

      <!-- Enable Hibernate's automatic session context management -->
        <property name="current_session_context_class">thread</property>

      <!-- Disable the second-level cache -->
        <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>

      <!-- Echo all executed SQL to stdout -->
        <property name="show_sql">true</property>

      <!-- Mapping files -->
          <mapping class="com.andrew.ModelPackage.Student"/>
          <mapping class="com.andrew.ModelPackage.Subject"/>

    </session-factory>

</hibernate-configuration> 
```

我的 HibernateUtil 类：

```
public class HibernateUtil {

    private static final SessionFactory sessionFactory;

    static {

        try {

            // Create the SessionFactory from hibernate.cfg.xml
            //AnnotationConfiguration
            sessionFactory = new Configuration().configure().buildSessionFactory();

        } catch (Throwable ex) {
            // Make sure you log the exception, as it might be swallowed
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory() {

        return sessionFactory;

    }
} 
```

也许我应该在 web.xml 或 servlet-context.xml 中写一些关于 hibernate.cfg.xml 的内容？我正在解决这个问题大约 7 个小时，我什至尝试将 hibernate.cfg.xml 放在项目的每个文件夹中，但它没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:54:40.373

IMO 的位置​​不是问题`hibernate.cfx.xml`，但看起来像一个缺少的库。你应该`dom4j.jar`在你的类路径中添加。

# php - 不再支持带有非常量操作数的 PHP 'break' 运算符

> ID：13788816
> 
> 赞同：0
> 
> 时间：2012-12-09T15:30:07.220
> 
> 标签：php

我正在运行此代码，但出现此错误。

```
 $no=0;
    out:for($i=0;$i<count($r);$i++){
            foreach ($r as $q){
                if($no++>$noOfQuestion)break out;
           }
    } 
```

这是我的错误

```
'break' operator with non-constant operand is no longer supported 
```

我正在运行 php 5.4.3。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T15:34:13.673

使用`break 2;`而不是`break out;`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T15:38:58.480

检查新的***** [`goto`](http://php.net/manual/en/control-structures.goto.php)运算符。

*** 版本 >= 5.3.0**

# mysql - Rails & Mysql - 优化和改写查询

> ID：13788818
> 
> 赞同：1
> 
> 时间：2012-12-09T15:30:18.163
> 
> 标签：mysql, sql, ruby-on-rails, activerecord

多亏了对我以前的问题和[这篇文章的](http://lukaszwrobel.pl/blog/sql-having-clause-in-rails-activerecord)[回答](https://stackoverflow.com/questions/13788433/mysql-find-conversation-only-being-held-by-two-users/13788449#13788449)，我找到了一种改写这个查询的方法：

```
SELECT * FROM participants
GROUP BY conversation_id
HAVING sum(user_id not in (1,3)) = 0 
```

对此 Rails 样式查询：

```
Participant.find(:all, group: "conversation_id HAVING sum(user_id not in (1,3)) = 0") 
```

我是 Rails 新手，但在我看来这是旧语法 - 最困扰我的是我在那里使用了很多 sql，而不是全部使用 Rails 语法。

我怎样才能更进一步地改写上面的查询，以便它只用 Rails 语法编写，可能不需要引号？我需要确保这将与不同的数据库一起运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:37:33.507

Rails 3 的方式是：

```
Participant.group("conversation_id").having("sum(user_id not in (1,3)) = 0") 
```

您将无法取消 having 子句中的字符串。你对字符串有什么顾虑？上面的查询应该是相当可移植的。

# c# - OracleBulkCopy 给 BatchSize 和不给 BatchSize 有什么区别

> ID：13788819
> 
> 赞同：1
> 
> 时间：2012-12-09T15:30:51.570
> 
> 标签：c#, sql, oracle, ado.net, sqlbulkcopy

[`BatchSize`](http://docs.oracle.com/html/E10927_01/OracleBulkCopyClass.htm#CHDCDEIA)任何人都可以给出使用和不使用`BatchSize`in之间的性能和行为差异[`OracleBulkCopy`](http://docs.oracle.com/html/E10927_01/OracleBulkCopyClass.htm)。目前我没有指定`BatchSize`. 我的`BatchSize`可能从 100 到 200000 不等。请提出最佳方法。

```
try
{
     var columnMapping =
         from table in orgTable.Columns.Cast<DataColumn>()
         select
             new OracleBulkCopyColumnMapping(table.ColumnName, table.ColumnName);
     using (var bulkcopy
         = new OracleBulkCopy(ConnectionString, OracleBulkCopyOptions.Default))
     {                    
         bulkcopy.DestinationTableName = GoldOrgTable;                                        
         foreach (var mapping in columnMapping)
             bulkcopy.ColumnMappings.Add(mapping);
         bulkcopy.BulkCopyTimeout = TimeOut.Value;
         bulkcopy.WriteToServer(orgTable);
         orgTable.Dispose();
     }
     return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:53:17.470

最佳批量大小应设置在 500~5000 左右。

使用批量复制的优点是：

*   提高插入数据库的性能（减少所需时间）
*   即时操作大量插入（多行插入）

但是，它也有一些我们需要关注的缺点：

*   当批量复制中有一行遇到错误时，更难进行故障排除
*   可能不知道数据的插入或截断是否存在某些数据类型整理或转换问题（unicode 和非 unicode），即使批量复制过程已成功完成，某些数据也可能未正确插入（脏数据）

进一步讨论您可以在以下网站上找到它：http: [//docs.oracle.com/html/E10927_01/OracleBulkCopyClass.htm#CHDCDEIA](http://docs.oracle.com/html/E10927_01/OracleBulkCopyClass.htm#CHDCDEIA) 或 [使用 .NET 批量插入到 Oracle](https://stackoverflow.com/questions/343299/bulk-insert-to-oracle-using-net)

# android - 防止 ndk-build 自动清理模块

> ID：13788824
> 
> 赞同：6
> 
> 时间：2012-12-09T15:31:36.933
> 
> 标签：android, android-ndk, android-build

在我当前的设置（ndk r8c）上`ndk-build`执行一个干净的步骤（`V=1`显示在行动中）而没有明确`rm`发出。`clean`我想改变这种行为 - 我目前遇到链接问题并且（重新）编译需要超过 5 分钟。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T15:59:15.937

我想您正在解决 NDK r8c 的错误。请参阅此线程：[http](http://code.google.com/p/android/issues/detail?id=39810) ://code.google.com/p/android/issues/detail?id=39810 。您可以降级到以前的 NDK 版本或应用建议的补丁。

该补丁是将单行 289`build/core/definitions.mk`从

```
$1: $$(__ndk_file_dir) 
```

至

```
$1: | $$(__ndk_file_dir) 
```

# asp.net-mvc - 如何实现不改变页面的表单按钮

> ID：13788828
> 
> 赞同：1
> 
> 时间：2012-12-09T15:32:10.633
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我对以下代码有一个看法：

```
@using (Html.BeginForm("GenerateQrCode", "QrCodeGenerator", FormMethod.Post ))
{
    <input type="submit" value="Generate" />
} 
```

它只是一个提交按钮，它调用我控制器中的代码：

```
 public void GenerateQrCode()
    {

    } 
```

我的控制器中的方法是否可以从表单返回一个值，但不转到不同的页面？因为我注意到当前，在按下表单按钮时，它会尝试导航到不存在的“GenerateQrCode”页面（与控制器方法同名）。

更新：

我尝试过让控制器方法返回一个 ActionResult，并返回一个“RedirectToAction”，然后简单地调用相同的视图。但是，我在这个方法中也有代码 'ViewBag.Message = "myMessage"; 然后在我看来，我有代码'@ViewBag.Message'，所以我希望视图会使用 ViewBag 消息属性进行更新，但事实并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:37:13.757

您正在使用的版本`Html.BeginForm`告诉提交按钮发布到`GenerateQrCode`操作。也许您可以尝试另一种更适合您的目的的[重载？](http://msdn.microsoft.com/en-us/library/dd493012%28v=vs.108%29.aspx)`Html.BeginForm`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T18:15:36.147

最简单的方法是使用 RedirectToAction 方法，在参数中指定控制器的名称。我还使用 TempData 变量将结果（在本例中只是一个字符串值）传递回视图，并传递给 ViewBag 变量。

```
 public ActionResult QrCodeGenerator()
    {
        ViewBag.Message = TempData["Message"];
        return View();
    }

    public ActionResult GenerateQrCode()
    {
        TempData["Message"] = "myMessage";
        return RedirectToAction("QrCodeGenerator");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T15:42:42.453

使用 javascript：处理点击事件。在处理程序中，阻止默认操作并停止事件传播。使用表单数据对服务器进行 AJAX 调用。得到回应并采取进一步行动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T15:42:50.863

所以如果我有这个权利，你想提交一个动作而不实际考虑服务器的响应。听起来你需要 jQuery `post`：

```
$.post(url, $("form selector").serialize(), function () {
    // This is where you put a callback function.
}); 
```

这就是你所需要的。这将发布数据。您可以做的是从按钮`click`事件而不是表单提交按钮调用它。或者，您可以覆盖`submit`表单上的事件并将其作为您的第一行代码：

```
e.preventDefault(); 
```

`e`你的事件参数在哪里。这将防止发生默认操作，在这种情况下是提交表单和加载响应。

# java - 如何为 HTTP GET 的多个键值参数设计 REST URI

> ID：13788830
> 
> 赞同：12
> 
> 时间：2012-12-09T15:32:18.217
> 
> 标签：java, web-services, http, rest, soa

我正在设计一个 RESTful API。

一项服务应该为多个键值对提供查询功能。例如，客户端可以使用一个 HTTP GET 请求来查询不同的产品和相关的数量。

客户想要查询金额为 44 的产品 1 和金额为 55 的产品 2。我实际上不希望我的 URI 看起来像这样：

```
/produkt?productId1=1&productquantity1=44&productId2=2&productquantity2=55 
```

因为我不知道查询了多少产品。

或者像这样：

```
/produkt?product=1,44&product=2,55 
```

因为客户怎么知道逗号之前是productId，逗号之后是数量。

有没有人有其他解决方案？或者提供一个请求查询多个产品的可能性不是 RESTful 吗？提供仅查询具有相关数量的一种产品的可能性是否更好，如果客户想要查询更多产品，他们应该发送更多请求？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T16:00:20.430

这是传递参数的一种想法：

```
/products?productDetail=[{"key":"key0","value":"key1"},{"key":"key2","value":"key2"},{"key":"key3","value":"key3"}] 
```

在哪里

```
[{"key":"key0","value":"key1"},{"key":"key2","value":"key2"},{"key":"key3","value":"key3"}] 
```

是`List<kv>`类的 JSON 表示

```
class kv {
    String key;
    String value;

    public kv(String key, String value) {
        super();
        this.key = key;
        this.value = value;
    }

    public String getKey() {
        return key;
    }

    public void setKey(String key) {
        this.key = key;
    }

    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }

} 
```

因此您可以轻松地将查询参数转换`productDetail`为`List<kv>`使用

```
new Gson().fromJson(productDetail,kv.class); 
```

比你可以轻松地迭代所有元素。

另一个建议是，如果您不知道查询了多少产品，请使用`POST`请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T15:44:24.187

我会通过为产品的各个部分添加明确的名称来扩展您的第二个建议，并使用分号代替逗号来分隔产品属性，因为顺序无关紧要^*。

```
/products?id=1;qty=44&qty=55;id=2 
```

注意第二个产品的`id`和`qty`是如何切换的，因为属性的顺序无关紧要。

* * *

^*有一个约定，当顺序很重要时使用逗号，当顺序不重要时使用分号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-28T23:15:45.190

我能想到的最惯用的 HTTP GET 方式：

```
/produkt?productId=1&productquantity=44&productId=2&productquantity=55 
```

我最近遇到了类似的情况，客户需要能够通过为每个产品任意定义的“产品属性”进行搜索。客户还需要能够轻松地创建这些链接并通过电子邮件等传递它们。我不想创建自定义查询字符串，因为我不想创建自定义解析器，它增加了一个额外的步骤，其中客户可能会犯错误。而且我不想传递 json，因为它在某些情况下依赖于客户端来生成该 JSON。

虽然 HTTP 规范没有对每个参数的多个值采取强硬立场，但我能找到的每个示例都表明保留了顺序。Java 示例：

```
String[] productIds = this.request.getParameterValues("productId");
String[] productQuantities = this.request.getParameterValues("productquantity");

productIds[0]; // 1
productQuantities[0]; // 44
productIds[1]; // 2
productQuantities[1]; // 55 
```

我将把错误和索引范围检查作为练习留给读者。

# android - 带有 TextureBuffer 指针的 Android OpenGL 中的按钮类

> ID：13788831
> 
> 赞同：0
> 
> 时间：2012-12-09T15:32:20.463
> 
> 标签：android, opengl-es, textures, uv-mapping

我正在创建一个按钮类，如果它没有被按下，它将显示一个蓝色圆圈，如果它被按下，它将显示一个红色圆圈。我首先构建一个由两个三角形组成的 4 顶点四边形。我生成自己的位图并在位图上从左到右画两个圆圈。然后我用 4 个 uv 点创建一个纹理缓冲区，我用 8 个创建它，一个映射出蓝色圆圈，一个映射出红色圆圈。然后我想在按下按钮时渲染红色圆圈。理想情况下，我想打电话给

```
gl.glTexCoordPointer 
```

方法并传入偏移量，但这不起作用。这是我用来生成位图的方法，使用画布在位图上绘制并绘制对象，然后尝试映射纹理。请注意，我必须生成一个 2 次幂的纹理，因此其中有一些数学运算允许我根据构造函数中指定的按钮的宽度和高度变量生成比我需要的更大的位图。

```
public void InitializeButton(GL10 gl, int upcolor, int downcolor, String symbol)
    {
        //Our variables for creating a bitmap and texture
        Canvas canvas   = null; 
        Bitmap bitmap   = null;
        Paint  paint    = null;

    //Set up the bitmap type
    Bitmap.Config conf = Bitmap.Config.ARGB_8888;

    /*
     * We now want to calculate the size of the texture. Remember it is best to be a square
     * texture or at least a power of 2\. The below equation below will do this. For example
     * if the width of the button was say 20, we need to find the smallest power of 2 that is
     * greater than 20\. In this case we know it is 32\. But how do we calculate that? First we
     * have to find out the exponent of what 2^x = 20\. Then we find the ceiling of tha number.
     * In order to make that calculation we have to take the log of that, but in order to use
     * the log function which is base 10, we have to switch to base 2 so that means 
     * we have to take the log(width)/log(2) to switch to base 2, then get the ceiling of that
     * number because it would be between 4 and 5 in this case. When we take the ceiling we get
     * 5 and 2^5 is 32.
     * 
     * Side note, we want to double the size to make sure there is room for the up and the down
     * actions.
     */
    widthTexture = (int) Math.pow(2,Math.ceil((Math.log(this.width*2)/Math.log(2))));
    heightTexture = (int) Math.pow(2,Math.ceil((Math.log(this.height*2)/Math.log(2))));

    /*
     * Now we will create the bitmap for the creation of the button
     */
    bitmap = Bitmap.createBitmap(widthTexture,heightTexture,conf);

    //Now create a new canvas from that bitmap
    canvas = new Canvas(bitmap);

    //Create a new Paint
    paint = new Paint();

    /*
     * Now we want to render the draw the up and down button on the texture. We are just going
     * to use two different colors to represent up and down. So we will draw the up circle button
     * starting at 0 0 and the down button off to the right.
     */
    paint.setColor(upcolor);
    paint.setAlpha(120);
    canvas.drawOval(new RectF(0,0,width,height), paint);
    paint.setColor(Color.BLACK);
    canvas.drawText(symbol, width/2, height/2, paint);
    paint.setColor(Color.WHITE);
    canvas.drawText(symbol, width/2+3, height/2+3, paint);

    //Draw the down color button
    paint.setColor(downcolor);
    paint.setAlpha(120);
    canvas.drawOval(new RectF(width,0,width*2,height), paint);
    paint.setColor(Color.WHITE);
    canvas.drawText(symbol, width+(width/2), height/2, paint);
    paint.setColor(Color.BLACK);
    canvas.drawText(symbol, width+(width/2)+3, height/2+3, paint);

    float widthpercent  =  ((float)width/(float)widthTexture);
    float heightpercent =  ((float)height/(float)heightTexture);

    /*
     * Now create two texture maps. One for the up button and one for the down button
     * You can change the offset of the draw texture thing to change the animations now
     */
    float uvTextures[] = {0f,                   heightpercent,
                          widthpercent,         heightpercent,
                          widthpercent,         0f,
                          0f,                   0f,
                          widthpercent,         heightpercent,
                          widthpercent*2,       heightpercent,
                          widthpercent*2,       0f,
                          widthpercent,         0f,
                          };

    /*
     * Allocate the byte buffer so it is a normal array of floats and not a java array.
     * load the uvTexture values inside.
     */
    ByteBuffer tbb = ByteBuffer.allocateDirect(uvTextures.length*4);
    tbb.order(ByteOrder.nativeOrder());
    textureBuffer = tbb.asFloatBuffer();
    textureBuffer.put(uvTextures);
    textureBuffer.position(0);  

    int [] textures = new int[1];

    gl.glGenTextures(1, textures,0);
    gl.glBindTexture(GL10.GL_TEXTURE_2D,  textures[0]);
    textureID = textures[0];
    gl.glTexParameterf(GL10.GL_TEXTURE_2D,GL10.GL_TEXTURE_MIN_FILTER,GL10.GL_LINEAR);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D,GL10.GL_TEXTURE_MAG_FILTER,GL10.GL_LINEAR);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D,GL10.GL_TEXTURE_WRAP_S,GL10.GL_REPEAT);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D,GL10.GL_TEXTURE_WRAP_T,GL10.GL_REPEAT);
    GLUtils.texImage2D(GL10.GL_TEXTURE_2D,0,bitmap,0);

    //Don't forget to deallocate the bitmap
    bitmap.recycle();
} 
```

所以最终在渲染方法中，我希望能够将纹理贴图上的不同坐标渲染到相同的顶点。所以我调用 glTexCoordPointer 并将偏移量更改为“计数器”，其中计数器应该是 6*4（每个浮点数 6 个顶点乘以 4 个字节）但这不起作用，所以我尝试将计数器设置为 0 并将其递增，但从未发现神奇将映射红色按钮的数字。顺便说一句，当我尝试这样做时，我会画出非常奇怪的图案，有时会显示 10 到 15 个迷你蓝色和红色圆圈。

```
 if(isdown)
        gl.glTexCoordPointer(2,GL10.GL_FLOAT,counter,textureBuffer);
    else
        gl.glTexCoordPointer(2,GL10.GL_FLOAT,0,textureBuffer); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:15:11.307

@Harism 对我的情况是正确的。我希望我仍然正确使用它。我在想步幅变量可以改变，但我不得不改变缓冲区的位置。这适用于 3D 表面上的纹理动画。我不知道这是否是“最好”的方法，但在那之前我会使用它。

# asp.net-mvc - 设置复选框 Asp.net MVC、Html.CheckBox 的值

> ID：13788839
> 
> 赞同：1
> 
> 时间：2012-12-09T15:33:11.673
> 
> 标签：asp.net-mvc

在我看来，我有以下将其显示为复选框：

```
<td style="padding:3px"><%= Html.CheckBox("Statistik3", (Boolean)ViewData["Statistik3"], new { @tabindex = "10" })%>     </td> 
```

控制器：

```
[AcceptVerbs(HttpVerbs.Get | HttpVerbs.Post)]
        public ActionResult FormularStatistikKennzeichen(string button, string decision1, FormEntries entries)
        {

if (i > 0)
            {
                ViewData["Statistik3"] = true;
            }
            if (i == 0)
            {
                ViewData["Statistik3"] = false;
            }
            i = i + 1;
} 
```

首先我可以将复选框初始化为真或假，但之后我无法更改和控制复选框中的值？你知道怎么做吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:42:41.270

你的意思是服务器端还是客户端？如果是服务器端，那么您需要跟踪会话中的计数器。您不能使用实例变量，因为每次发出请求时都会重新创建控制器，这意味着请求始终为零。除非您想在用户之间共享状态，否则您不能使用静态变量。即使这样，它也会在每次应用程序池回收时重新初始化。如果您希望状态是持久的，那么您需要将其作为页面状态的一部分进行跟踪（即，每次使用表单回发当前值）或使用会话状态。

如果您指的是客户端，您应该知道复选框助手将输出两个输入，一个是复选框，另一个是具有相同名称且值为 false 的隐藏值。这是为了确保在表单发布时，复选框具有映射到模型/参数中的（必需）布尔值的值。当使用 JavaScript 在客户端更新它时，您应该注意只修改复选框的值，而不是隐藏字段，以获得一致的结果。

# multithreading - 我的 Java 线程在“OutputStreamWriter out = new OutputStreamWriter(connection.getOutputStream());”处停止 没有任何错误？

> ID：13788842
> 
> 赞同：4
> 
> 时间：2012-12-09T15:33:32.570
> 
> 标签：multithreading, url, outputstream, urlconnection

所以我目前正在编写一个用于访问网站和检索信息的程序。该程序的功能部分如下：

```
URL url = new URL("website name");
URLConnection connection = url.openConnection();
connection.setDoOutput(true);
OutputStreamWriter out = new OutputStreamWriter(connection.getOutputStream()); 
```

我正在尝试使用线程来实现这个程序，以便创建的每个新线程都会打开一个新连接。我已经与线程分开测试了这个程序，并且这段代码工作得很好，但是当把这段代码放入我的 Thread 类的 run() 方法时，它就停止工作了。我在每一行代码之后都放置了打印语句，让我知道程序在哪里停止，最后的生命迹象始终是“setDoOutput(true)”，之后什么也没有发生。没有错误，什么都没有，程序就停止了。到底是怎么回事？

# forms - 表单密钥预览不起作用

> ID：13788845
> 
> 赞同：1
> 
> 时间：2012-12-09T15:34:10.593
> 
> 标签：forms, delphi, keypreview

我创建了 mainform（自动创建表单）和 Form1（可用表单）。我用来调用form1的方法是这样的

```
procedure Tmainform.Button2Click(Sender: TObject);
var
f : Tform1;
begin
f:=Tform1.create(self);
f.parent:=Tabsheet1;
f.visible:=true;
f.align:=alClient;
end; 
```

问题是为什么 Form1 中的 KeyPreview 不起作用，即使我已经激活了他的 KeyPreview 是真的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:28:39.063

如果存在，则在`function TWinControl.DoKeyDown(var Message: TWMKey): Boolean;`调用中委托给父级。

步骤

```
procedure TWinControl.KeyDown(var Key: Word; Shift: TShiftState);
begin
  if Assigned(FOnKeyDown) then FOnKeyDown(Self, Key, Shift);
end; 
```

如果 Form 是父级，则不会被调用

```
function TWinControl.DoKeyDown(var Message: TWMKey): Boolean;
var
  ShiftState: TShiftState;
  Form, FormParent: TCustomForm;
  LCharCode: Word;
begin
  Result := True;
  { First give the immediate parent form a try at the Message }
  Form := GetParentForm(Self, False);
  if (Form <> nil) and (Form <> Self) then 
  begin
    //  >> -- the DoKeyDown of the parent (not of your form) will be called 
    if Form.KeyPreview and TWinControl(Form).DoKeyDown(Message) then
      Exit;
    { If that didn't work, see if that Form has a parent (ie: it is docked) }
    if Form.Parent <> nil then 
    begin
      FormParent := GetParentForm(Form);
      if (FormParent <> nil) and (FormParent <> Form) and FormParent.KeyPreview and
          TWinControl(FormParent).DoKeyDown(Message) then
        Exit;
    end;
  end;
...... 
```

# objective-c - UIToolbar在状态栏下滑动

> ID：13788847
> 
> 赞同：1
> 
> 时间：2012-12-09T15:34:22.370
> 
> 标签：objective-c, ios, uitoolbar

我有一个`UIToolbar`在顶部有一个模态视图。在这个视图中，我提出了另一个模态视图。问题是，当第二个视图关闭时`UIToolbar`，第一个模态视图似乎在应用程序状态栏下滑动，当第一个模态视图出现时不会发生这种情况，只有在第二个模态视图被关闭时才会发生这种情况。

知道如何解决这个问题吗？

重新显示视图时视图框架会发生变化

```
2012-12-11 14:53:49.976 app[11225:907] toolbar frame: {{0, 0}, {320, 44}}
2012-12-11 14:53:49.979 app[11225:907] view frame: {{0, 20}, {320, 460}}
2012-12-11 14:54:07.496 app[11225:907] toolbar frame: {{0, 0}, {320, 44}}// here the second modal view is dismissed 
2012-12-11 14:54:07.498 app[11225:907] view frame: {{0, 0}, {320, 480}} 
```

该应用程序不使用全屏...

第一个视图控制器只是一个模态视图

```
 [self performSegueWithIdentifier:@"SettingsSegue" sender:self]; 
```

当用户点击按钮时，呈现的视图被关闭

```
 [self dismissModalViewControllerAnimated:YES]; 
```

没什么花哨的......嗯......这个问题发生在设备上测试时......它似乎在模拟器中工作正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T03:04:41.417

您呈现的视图控制器是否响应`supportedInterfaceRotations`错误`shouldAutorotate`？当以模态方式呈现时，根本不覆盖这些方法会更简单。

这发生在我身上 - 看到[这个问题和答案](https://stackoverflow.com/questions/13349018/statusbarframe-0-after-stacked-presentviewcontroller)。

# javascript - JS - 这不应该写得更好吗？一个函数与多个函数？

> ID：13788850
> 
> 赞同：2
> 
> 时间：2012-12-09T15:34:44.690
> 
> 标签：javascript, jquery, frontend

我有一个推文流，其中新推文添加在顶部，旧推文被推下。您可以单击整条推文，然后一个面板向下滑动以显示“回复”、“转发”、“收藏”等。该面板将添加到流中添加的每条新推文中。

下面的代码有效。这不应该写得更好，以便只拨打一个电话吗？或者，随着新推文的添加。我是否只需要使用 div#tc4、ul#tb4 等添加到代码中？

```
$(document).ready(function () {
    $("div#tc1").click(function () {
        $("ul#tb1").slideToggle("fast");
    });
    $("div#tc2").click(function () {
        $('ul#tb2').slideToggle("fast");
    });
    $("div#tc3").click(function () {
        $('ul#tb3').slideToggle("fast");
    });
}); 
```

添加标记：

```
<div id="tc1" class="tweetcontainer">
<div class="avatarcontainer">
  <div class="avatar"></div>
</div>
<div class="content">
  <div class="tweetheader">
    <div class="name">
      <h1>John Drake</h1>
    </div>
    <div class="tweethandle">
      <h2>@Drakejon</h2>
    </div>
    <div class="tweettime">10m</div>
  </div>
  <div>
    <p>Exceptional Buys Ranger To Give Monitoring Shot In The Arm To Its 'DevOps' Platform <a href="http://tcrn.ch/11m3BrO">http://tcrn.ch/11m3BrO</a> by <a href="#">@sohear</a> </p>
  </div>
</div>
</div>
  <!-------------Tool Bar -------------------------------->
<ul id="tb1" class="toolbar">
  <li><a class="reply" href="#"><span>reply</span></a></li>
  <li><a class="retweet" href="#"><span>retweet</span></a></li>
  <li><a class="favorite" href="#"><span>favorite</span></a></li>
  <li><a class="track" href="#"><span>track</span></a></li>
  <li><a class="details" href="#"><span>details</span></a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T03:25:18.170

我强烈建议您将您的 javascript 与您的详细页面功能分开。最好的方法是将转发面板*放在*推文容器中，然后你甚至不需要给它一个 id 或者在关于你的 html 结构和 ids 的 javascript 信息中进行编码。然后你可以这样做：

```
$('.tweetcontainer').on('click', function(event) {
    if ($(event.target).is(':descendantof(.toolbar)')) {
       //ignore all clicks within the toolbar itself
       return;
    }
    $(this).find('.toolbar').slideToggle();
});​ 
```

就*这么*容易！[在 jsFiddle 中查看它的实际效果](http://jsfiddle.net/ErikE/jZJ6U/)。

现在，您可以向页面添加任意数量的推文容器——而且您的 javascript 不必更改任何内容。需要了解链接到特定 id 的特定 id 的其他解决方案是次优的。

请注意，`descendantof`伪选择器是自定义的（请参阅小提琴以了解其工作原理）。此外，由于您没有提供任何 css，我不得不选择一些——它很快，所以不要期望太多。（哎呀，我刚刚看到你更新了你的问题，以提供一个带有 css 的 jsFiddle，给出了一个更漂亮的结果——但我现在不会改变我的。）我确实必须为实际的推文本身添加一个类，但可能有一个更好的方式来设计它。

如果您想要单击显示的工具栏本身（链接外部）以允许折叠工具栏，请将上面的代码更改为`:descendantof(a)`.

如果您不想更改页面布局，另一种方法是使用`data`属性在 html 本身中对有关 html 部分之间链接的信息进行编码。更改您的 tweetcontainer div 以添加一个`data`带有 jQ​​uery 样式选择器的属性，该选择器将正确定位目标：

```
<div class="tweetcontainer" data-target="#tb1"> 
```

如果您在其他地方使用它，您实际上不必删除它，但我希望您看到您不再需要它。然后在 document.ready 上：

```
$('.tweetcontainer').click(function () {
   $($(this).data('target')).slideToggle('fast');
}); 
```

这是[另一个 jsFiddle](http://jsfiddle.net/ErikE/Z3JBQ/)演示了这种替代技术（尽管在我看来它不太优雅）。

最后，我想提一下，您似乎有一点“div-itis”。（我们都去过那里。）工具栏锚元素内部有不必要的跨度。推文名称`h1`元素在一个 div 中，但也可以是一个`h1`带有 class="name" 的元素。

一般来说，如果 div 中只有一个项目，并且您可以更改样式表以消除 div，则不需要 div。你的 html 中有很多嵌套的 div，我鼓励你尽可能多地删除它们。将样式应用于您使用的其他块元素，并且至少不需要一些（如果不是很多）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T15:39:08.853

我建议（尽管目前未经测试）：

```
$('div[id^="tc"]').click(function(){
    var num = parseInt(this.id.replace(/\D+/g,''),10);
    $('#tb' + num).slideToggle("fast");
}); 
```

虽然你不需要`num`是一个数字（它*可以*作为一个字符串），你可以安全地省略`parseInt()`.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-09T15:40:37.090

是的，您可以像这样更紧凑地编写此代码：

```
$(document).ready(function() {
    for (var i = 1; i < 3; i++) {
        $("div#tc" + i).click(function() { $("ul#tb" + i).slideToggle("fast"); } );
    }
}); 
```

# android - 带有 Android 小部件控制的 OpenGL

> ID：13788851
> 
> 赞同：-2
> 
> 时间：2012-12-09T15:34:45.797
> 
> 标签：android, opengl-es, android-activity, surfaceview, glsurfaceview

我想将加速 2d 图形 (OpenGL) 与标准 android 控件小部件一起使用，以便与 OpenGL 中的对象进行交互。

RayPicking 已经实现。虽然我可以选择对象。

但是它如何与视图等一起使用，以便使用 Android 的标准控件，例如按钮、滑块等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:04:41.917

OpenGL 根本不与 android 小部件进行交互。

如果你想同时使用这两者，你可以`FrameLayout`在 GLSurfaceView 之上使用一个和布局的 android 小部件，但它们并没有真正交互。OpenGL 不知道小部件，并且小部件不受 OpenGL 以任何方式控制。

# wcf - Windows 服务总线 1.0、Appfabric、Netmessaging 绑定失败

> ID：13788855
> 
> 赞同：3
> 
> 时间：2012-12-09T15:34:53.070
> 
> 标签：wcf, appfabric, servicebus

当我尝试在 Windows Server AppFabric 中托管使用​​ netmessagingbinding 从 Windows Service Bus 1.0 队列接收消息的 WCF 服务时，我似乎一遍又一遍地遇到同样的问题。AppFabric 中止服务，所以如果我在 service?wsdl 上按 F5，那么有时会出现故障，有时会生成一个不错的 WSDL。我的错误在哪里？很难找到使用 AppFabric、netmessagingbinding 和 Windows 服务总线（不是 Azure）的示例，所以我无法找到我的错误......

```
[ServiceContract]
public interface ISBMessageService
{
    [OperationContract(IsOneWay = true, Action = "DoSomething")]
    [ReceiveContextEnabled(ManualControl = true)]
    void DoSomething(string something);
}

[ServiceBehavior]
public class SBMessageService : ISBMessageService
{
    [OperationBehavior]
    public void DoSomething(string something)
    {
        Trace.WriteLine(String.Format("You sent {0}", something));

        // Get the BrokeredMessageProperty from the current OperationContext
        var incomingProperties = OperationContext.Current.IncomingMessageProperties;
        var property = incomingProperties[BrokeredMessageProperty.Name] as BrokeredMessageProperty;

        ReceiveContext receiveContext;

        if (ReceiveContext.TryGet(incomingProperties, out receiveContext))
        {
            receiveContext.Complete(TimeSpan.FromSeconds(10.0d));
        }
        else
        {
            throw new InvalidOperationException("...");
        }             
    }
}

<?xml version="1.0"?>
<configuration>
  <appSettings>
  <!-- Service Bus specific app setings for messaging connections -->
  <add key="Microsoft.ServiceBus.ConnectionString"       
      value="Endpoint=sb://LRNcomp/LRNnamespace"/>
  </appSettings>
 <system.web>
     <compilation debug="true" targetFramework="4.0"/>
     <httpRuntime/>
 </system.web>
 <system.serviceModel>
  <!-- These <extensions> will not be needed once our sdk is installed-->
    <extensions>
      <bindingElementExtensions>
        <add name="netMessagingTransport"      type="Microsoft.ServiceBus.Messaging.Configuration.NetMessagingTransportExtensionElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
  </bindingElementExtensions>
  <bindingExtensions>
    <add name="netMessagingBinding" type="Microsoft.ServiceBus.Messaging.Configuration.NetMessagingBindingCollectionElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
  </bindingExtensions>
  <behaviorExtensions>
    <add name="transportClientEndpointBehavior" type="Microsoft.ServiceBus.Configuration.TransportClientEndpointBehaviorElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
  </behaviorExtensions>
</extensions>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="True" httpHelpPageEnabled="True"/>
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="securityBehavior">
      <transportClientEndpointBehavior>
        <tokenProvider>
          <sharedSecret issuerName="owner" issuerSecret="somthing"/>
        </tokenProvider>
      </transportClientEndpointBehavior>
    </behavior>
  </endpointBehaviors>
</behaviors>
<bindings>
  <netMessagingBinding>
    <binding name="messagingBinding" closeTimeout="00:03:00" openTimeout="00:03:00" receiveTimeout="00:03:00" sendTimeout="00:03:00" sessionIdleTimeout="00:01:00" prefetchCount="-1">
      <transportSettings batchFlushInterval="00:00:01"/>
    </binding>
  </netMessagingBinding>
</bindings>
<services>
  <service name="SBExamples.SBMessageService">
    <endpoint name="Service1" address="sb://LRNcomp:9354/LRNnamespace/test/myqueue2" binding="netMessagingBinding" bindingConfiguration="messagingBinding" contract="SBExamples.ISBMessageService" behaviorConfiguration="securityBehavior"/>
  </service>
</services>
</system.serviceModel>
<system.webServer>
  <modules runAllManagedModulesForAllRequests="true"/>
  <!--
    To browse web app root directory during debugging, set the value below to true.
    Set to false before deployment to avoid disclosing web app folder information.
  -->
  <directoryBrowse enabled="true"/>
</system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:23:37.763

WCF 合同中的错误产生了许多奇怪的异常，例如我的传输通道被中止。发送方和接收方之间正确共享合同起到了作用。

# opencv - 用于智能手机的 SIFT 硬件加速器

> ID：13788858
> 
> 赞同：1
> 
> 时间：2012-12-09T15:35:32.713
> 
> 标签：opencv, sift, accelerator

我是一名刚毕业的电子工程师，我有计算机视觉方面的经验。我想问一下是否可以制作 SIFT 算法的硬件加速器 - 或任何其他 openCV 算法 - 用于智能手机而不是当前的软件执行？

有哪些优点（计算量低得多、功耗低、会出现更复杂的应用......）和缺点（不比当前的软件实现更好......）？

你对此有见解吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:01:11.307

您可能有兴趣查看 NEON 优化 - Nvidia Tegra 3 架构支持的一种 SIMD 指令。一些 OpenCV 函数是 NEON 优化的。

从阅读这篇不错的文章[Realtime Computer Vision with OpenCV](http://queue.acm.org/detail.cfm?id=2206309)开始，它对使用 NEON 等进行了性能比较。

我还建议您从[这里](https://stackoverflow.com/search?tab=relevance&q=opencv%20neon)和[这里](http://answers.opencv.org/questions/scope:all/sort:votes-desc/query:neon/page:1/)开始，您会发现很多见解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T15:57:48.617

Opencv 支持 cuda 和（实验性的）opencl

许多手机/平板电脑中使用的 Nvidia 的 Tegra 芯片组都有特定的优化。不知道有没有手机用opencl

# java - 准备好的语句似乎在 java servlet 中总是返回 null

> ID：13788864
> 
> 赞同：1
> 
> 时间：2012-12-09T15:36:27.893
> 
> 标签：java, mysql, nullpointerexception, prepared-statement

我正在做一个项目，用户应该在表单中填写他想要的标准，然后根据这些标准，servlet 从数据库中返回适当的结果；我正在使用mysql服务器。我的问题是我使用的 Prepared Statement（因为用户可以使用可变数量的条件进行搜索）总是返回 null，所以我得到一个

```
Exception: null java.lang.NullPointerException at    
Servlet_GrowerResults.doGet(Servlet_GrowerResults.java:102) 
```

这是 GetData 类中的 fetchGrowers 方法，它将 ResultSet 返回给 Servlet_GrowerResults

```
private PreparedStatement stmt_growers=null;
private ResultSet rs_growers;
private final String getGrowersQuery="select * from grower where name like ? and surname like ? and area like ? and partnership like ?;";

public ResultSet fetchGrowers(String criteria_name,String criteria_surname,String criteria_area, String criteria_partnership){
    try{
        stmt_growers=dbcon.getConnection().prepareStatement(getGrowersQuery);
        stmt_growers.setString(1, criteria_name);
        stmt_growers.setString(3, criteria_surname);
        stmt_growers.setString(5, criteria_area);
        stmt_growers.setString(7, criteria_partnership);

        rs_growers=stmt_growers.executeQuery();
        return rs_growers;
    }
    catch(Exception e9){
        errorMessage = "Error while getting all growers from database!<br>" + e9.getMessage();
        return null;
    } 
```

这是初始化 ResultSet 的行。如果涵盖所有提交的标准案例，还有其他其他方法

```
 try{
        getData.getDBcon().open();
        ResultSet rsAreas=getData.fetchGrowerAreas();
        ResultSet rsPartnership=getData.fetchGrowerPartnership();
        ResultSet rsGrowersReturned;

        String sqlWildcard="%";

        //Cases of criteria submited by the user,
        //in order to send the apropriate parameters
        //to the PreparedStatement

        //1st case: searching without names criteria
        if( (criteriaNames.length()>0) && (!(criteriaAreas.length()>0)) && (!(criteriaPartnerships.length()>0)) ){
            rsGrowersReturned=getData.fetchGrowers(sqlWildcard,sqlWildcard,criteriaAreas,criteriaPartnerships);
        } 
```

这是异常指向的行。更具体地说，第 102 行是：while(rsGrowersReturned.next())

```
 if((sorting.equals("περιοχή"))){
        while(rsAreas.next()){
                out.println("<table>");
                String area=rsAreas.getString("area");
                area = new String(area.getBytes("ISO-8859-1"), "ISO-8859-7");
                out.println("<tr><th>"+rsAreas.getString("area")+"</th></tr>");

    /*line 102*/ while(rsGrowersReturned.next()){
                    if(rsGrowersReturned.getString("area").equals(rsAreas.getString("area"))){
                        String name=rsGrowersReturned.getString("name");
                        name = new String(name.getBytes("ISO-8859-1"), "ISO-8859-7");
                        String surname=rsGrowersReturned.getString("surname");
                        surname = new String(surname.getBytes("ISO-8859-1"), "ISO-8859-7");
                        String partnership=rsGrowersReturned.getString("partnership");
                        partnership = new String(partnership.getBytes("ISO-8859-1"), "ISO-8859-7");

                        out.println("<tr><td>"+name+" "+surname+"</td>");
                        out.println("<td>"+partnership+"</td></tr>");
                    }//end of neaced if
                }//end of second while
            }//end of first while
            out.println("</table>");
        }//end of if 
```

我可以看到确实出现了问题，因为在到达第二个之前，它会按预期打印第一个区域，然后是异常！！！

我尝试了直接对mysql服务器的sql查询，它可以工作，我只是找不到问题！每一个答案都将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T15:47:22.777

您需要`PrepareStatement`按顺序为您设置输入参数：

```
stmt_growers.setString(1, criteria_name);
stmt_growers.setString(2, criteria_surname);
stmt_growers.setString(3, criteria_area);
stmt_growers.setString(4, criteria_partnership); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T15:46:44.753

我敢打赌这里会吞下一个 SQLException：

```
catch(Exception e9){
    errorMessage = "Error while getting all growers from database!<br>" + e9.getMessage();
    return null;
} 
```

修复它以记录发生的异常或重新引发适当的更高级别的异常。在错误时默默地返回 null**总是**一个坏主意。

当您将发生的异常添加到您的帖子中时，我们可以尝试帮助您追踪原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T15:44:38.980

fetchGrowers 有一个次优的错误处理。你只是在捕获异常，创建一条未使用的消息并返回 null，这会导致稍后出现空指针，我们不知道为什么。你至少应该记录一些东西，更好的是（重新）抛出一个异常。

# ruby-on-rails - 无法测试使用延迟作业“延迟”方法时是否调用了方法

> ID：13788867
> 
> 赞同：3
> 
> 时间：2012-12-09T15:36:35.287
> 
> 标签：ruby-on-rails, delayed-job, mocha.js, testunit

我使用 Mocha、Test::Unit 和 delay_job 并想测试是否已执行 mailer 方法，如下所示：

```
 test "should send info about paid payment" do
    payment = Payment.new :contractor_name => "notempty", :address => "notempty"

    UserMailer.expects(:send_payment_info)

    payment.set_paid!

  end

  # model method
  def set_paid!
    self.status = 'paid'
    self.paid_at = Date.today
    self.save!

    UserMailer.delay.send_payment_info self
  end 
```

不使用延迟方法测试按预期工作，但是使用它（并且我在初始化配置中有 Delayed::Worker.delay_jobs = !Rails.env.test?）我得到：

> NoMethodError：未定义的方法`deliver' for nil:NilClass app/models/payment.rb:33:in`set_paid！测试/单元/payment_test.rb:50:in `test_should_send_info_about_paid_payment'

我不知道如何解决这个问题？也许我应该以不同的方式处理 UserMailer？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T16:21:17.067

这种解决方法有助于：

```
UserMailer.stubs(:delay).returns UserMailer
UserMailer.expects(:send_payment_info) 
```

不知道这是否是合法的方式，但它有效

# iphone - 使用 GCD 完成块

> ID：13788873
> 
> 赞同：0
> 
> 时间：2012-12-09T15:37:42.417
> 
> 标签：iphone, ios, ios5, grand-central-dispatch, nsoperationqueue

我正在开发一个需要完成块和“障碍”功能的应用程序。据我所知，`NSOperation`API 有一个`completionBlock`属性，而 GCD API 有`dispatch_barrier_(a)sync`处理障碍需求的功能。

我应该怎么做才能满足这两个需求？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:13:33.033

dispatch_group 应该有你需要的所有部分。只需 dispatch_group_async/dispatch_group_enter 用于您的工作单元，然后 dispatch_group_notify 用于您的完成处理程序。

# android - Phonegap App 上的 Android Datepicker 崩溃

> ID：13788878
> 
> 赞同：1
> 
> 时间：2012-12-09T15:38:19.703
> 
> 标签：android

我正在使用 phonegap 开发适用于 Android 的应用程序

我有“日期”类型的输入，它打开 android 日期选择器。

但是当我试图点击设置选定的日期时，应用程序崩溃了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T07:33:06.727

嗨，伙计们，我发现并**解决了这个问题**。这是这里提到的问题的原因[Invoke native date picker from web-app on iOS/Android](https://stackoverflow.com/questions/4946919/invoke-native-date-picker-from-web-app-on-ios-android?answertab=votes#tab-top)

显然我不得不选择一个看起来像原生的 JS 日期选择器来解决这个问题。当然需要更改为**“文本”**

我使用 mobipick [http://mobipick.sustainablepace.net/](http://mobipick.sustainablepace.net/) - 效果很好！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-21T10:59:29.273

这不是固定的。仅供参考，本机日期选择器会发生这种情况（未使用插件）。就我而言，如果我为 1 选择任何日期，我有 2 个，另一个不起作用。它会弹出本机日期选择器，但是如果我按下设置它什么也不做，过了一会儿就会被冻结（静态，我无能为力，必须杀死应用程序）

仅供参考 - 网络视图（如果我从浏览器浏览它）它可以正常工作，但不能在应用程序中。我使用 build.phonegap 来构建应用程序

# mysql - 如果不是交互式的，来自 Microsoft Access VBA 的 mySQL 查询会失败吗？

> ID：13788880
> 
> 赞同：4
> 
> 时间：2012-12-09T15:38:29.387
> 
> 标签：mysql, excel, vba, ms-access, odbc

我正在与一个真正困扰我的 VBA 非交互式问题作斗争：我有一个对 mysql 数据库的直通查询，如果用户双击它，它工作得很好。但是，如果首先没有进行交互，则从 VBA 自动化会话（从 excel 调用）调用它会失败。最奇怪的是：在 GUI 上单击一段时间*后，它可以从 VBA 工作（可能是 odbc mysql 连接超时）。*

直通查询在 DSN 和连接字符串中有它的密码（以解决存储问题）。链接表的行为相同。

调用的有问题的 VBA 代码如下所示：

```
CurrentProject.Connection.Execute "INSERT INTO [SomeLocalTable] (id) SELECT id FROM [somePassThroughOrLinkedMySQLTable]" 
```

该错误是通用 odbc 连接失败 80004005。

虽然这种类型的查询一直有效：

```
Dim cnn As New ADODB.Connection
cnn.Open ("Driver=MySQL ODBC 5.2w Driver;SERVER=myserver;UID=user;DATABASE={db};PORT=3306;DFLT_BIGINT_BIND_STR=1;PWD=secret") 
```

我可以像 UI 那样“初始化”直通查询以使其工作吗？或者我可以使用第二种查询插入到本地 MS Access 表中吗？

环境：Win8-64bit，Office2013，mysql-odbc-5.2w

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T08:56:37.163

我认为问题正在发生，因为您将 Access 数据库称为外部 ADODB 数据源，而我将使用 Access 的实例来通过 DAO 运行查询。下面的示例子创建了一个不可见的 Access 实例并执行查询，然后在完成后退出。我在这个例子中使用了后期绑定和 DAO 3.6 版，所以你可能需要稍微修改一下或者使用早期绑定：

```
Sub ExecPassThru()

Dim acApp As Object
Dim acDb As Object

    Set acApp = CreateObject("Access.Application")
    Set acDb = CreateObject("DAO.DBEngine.36") 'May need slight alteration
    acApp.OpenCurrentDatabase ("C:\db1.mdb") 'Amend as required

    Set acDb = acApp.CurrentDb

    acDb.Execute "INSERT INTO [SomeLocalTable] (id) SELECT id FROM [somePassThroughOrLinkedMySQLTable]"

    acDb.Close
    acApp.Quit 2

End Sub 
```

这是使用 Excel 2003 编码的，但应该很容易转换到更高版本的 office。

# javascript - 是否会支持 node.js 中的原始套接字，例如创建 ping 数据包？

> ID：13788883
> 
> 赞同：5
> 
> 时间：2012-12-09T15:38:57.980
> 
> 标签：javascript, node.js, raw-sockets

是否会支持 node.js 中的原始套接字，例如创建 ping 数据包？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T10:48:45.030

一个名为[node-raw-socket](https://www.npmjs.com/package/raw-socket)的新模块为使用 nodejs 的真实原始套接字提供了完美的解决方案。

而且，对于创建 ping (ICMP) 数据包，同一个开发人员也有一个非常好的基于 node-raw-sockets 的工作（使用它）解决方案：[node-net-ping](https://www.npmjs.com/package/net-ping)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T16:55:13.930

Node 支持 TCP、UDP 和 unix 套接字。Ping包是ICMP包，此时节点不能直接创建。您可以执行外部`ping`子流程或考虑编写 C 扩展。大多数节点的低级操作系统 API 都是围绕相应 C API 的瘦 javascript 包装器，因此您可以遵循现有的完善模式并将其实现为围绕相应操作系统级 API 的小型 JS 包装器层。

[http://nodejs.org/docs/latest/api/all.html#all_class_net_socket](http://nodejs.org/docs/latest/api/all.html#all_class_net_socket)

但是，基于此要求，节点/javascript 对您的项目来说是一个糟糕的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T10:28:47.497

`net-ping`模块可能适合您的需要。要安装它，您可以使用以下命令：

```
npm install net-ping 
```

带有示例的文档包含[在此处](https://npmjs.org/package/net-ping)。

# dll - 如何在 Netbeans 中包含 DLL？

> ID：13788885
> 
> 赞同：2
> 
> 时间：2012-12-09T15:38:58.387
> 
> 标签：dll, netbeans, deployment, glassfish

我有一个在 Glassfish 服务器上运行的 Java Web 服务，它使用带有 WindowsAuthentication 的 JDBC 连接到 SQL Server 数据库，因此它需要 sqljdbc_auth dll。我已经将该 dll 复制到 glassfish bin 文件夹中，并且在我启动服务器时它可以工作。
我的问题是，当我对 NetBeans 中的代码进行更改并部署 web 服务时，它不再工作（说没有为 Windows 身份验证配置），我猜这是因为它不包括 dll。如何将它包含在 NetBeans 中？我已将 DLL 放在项目的根目录中，但它不起作用......
在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:13:08.550

我也通过将 sqljdbc4.jar 放在 glassfish lib 文件夹中来解决它（而不是仅在 NetBeans 中导入）。

# c# - C# 中的 Xcopy - 如何调用它？

> ID：13788886
> 
> 赞同：-3
> 
> 时间：2012-12-09T15:39:08.050
> 
> 标签：c#

在这里，我应该将文件从附近的本地 IP 地址复制到我的本地系统我已经使用以下代码使用`Xcopy`命令进行复制，然后启动进程，但是如果我在命令提示符下执行，则通过提到的代码中的 Argumentsetting 进行复制，它正在复制，但通过代码是不复制请告诉是什么问题。有任何想法吗？通过代码不复制什么。

```
string Porocess = String.Format("\"{0}\\xcopy.exe\"", Environment.SystemDirectory.ToString());

string SolutionSettings = string.Format("\"\\\\{0}\\C$\\Documents and Settings\\All Users\\Application Data\\Symantec\\Common Client\\settings.bak\"", IPaddress);

string TargetSettings = string.Format("\"C:\\Documents and Settings\\All Users\\Application Data\\Symantec\\settings.bak\"");

string Argumentsetting = /*"\"" +*/ SolutionSettings + " " + TargetSettings + " /Y";// parameters to launch process

int iret1 = LauncProcess(Porocess, Argumentsetting, Environment.SystemDirectory.ToString());

 public static int LauncProcess(string sProcess, string sParams, string sWorkingDir)
        {
            int iRet = 0;
            Process process = null;

            try
            {

                ProcessStartInfo startInfo = new ProcessStartInfo();
                startInfo.FileName = sProcess;
                startInfo.Arguments = sParams;
                startInfo.WorkingDirectory = sWorkingDir;
                startInfo.WindowStyle = ProcessWindowStyle.Hidden;
                startInfo.CreateNoWindow = true;

                startInfo.UseShellExecute = false;

                process = Process.Start(startInfo);

                process.WaitForExit();

                Console.WriteLine("Copy has finished.");

                if (process.HasExited)
                {
                    Console.WriteLine("Process has exited.");
                    if (process.ExitCode != 0)
                    {

                        iRet = 1;

                    }
                    else
                    {
                        iRet = 0;
                    }
                }
                else
                {

                    iRet = 1;

                }
            }
            catch (Exception ex)
            {

                iRet = 1;
            }
            finally
            {
                process.Dispose();
            }
            return iRet;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T19:31:45.917

检查源地址和目的地址是否正确给出

```
 Process process = new Process();
  process.StartInfo.Arguments= @"D:\sourcePath F:\DestinationPath /e /y /I";
  process.Start(); 
```

# java - 写入文件的最有效方法？

> ID：13788891
> 
> 赞同：1
> 
> 时间：2012-12-09T15:39:48.583
> 
> 标签：java, file, compression

我正在用 Java 编写自己的图像压缩程序，我将熵编码数据存储在需要写入文件的多个数组中。我知道写入文件的不同方法，但我想知道在尝试使用尽可能少的存储空间时需要考虑什么。例如，我应该使用什么字符集（我只需要写入正数和负数），我是否能够向文件写入不到 1 个字节，我是否应该使用 Scanners/BufferedWriters 等。提前致谢，我可以如果需要，请提供更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T15:45:27.820

阅读[有关 IO 的 Java 教程](http://docs.oracle.com/javase/tutorial/essential/io/index.html)。

你应该

*   不使用 Writers 和字符集，因为您要写入二进制数据
*   使用缓冲流来避免过多的本机调用并加快写入速度
*   不使用扫描仪，因为它们用于读取数据，而不是写入数据

不，您将无法在文件中写入少于一个字节。字节是可以存储在文件中的最小信息量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T15:48:57.190

> 我应该使用什么字符集

您需要将数据写入字节，而不是字符，所以忘记字符集。

> 我可以向文件写入不到 1 个字节吗

不，这是不可能的。但是要遵循解码器预期的位流，您可能需要从 5 位和 3 位之类的东西构造一个字节，然后再将该字节写入文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T17:46:13.680

压缩几乎总是比文件 IO 更昂贵。除非您知道这是一个瓶颈，否则您不应该担心写入速度。

> 我正在用 Java 编写自己的图像压缩程序，我将熵编码数据存储在需要写入文件的多个数组中。我知道写入文件的不同方法，但我想知道在尝试使用尽可能少的存储空间时需要考虑什么。

以二进制格式写入数据，它将是最小的。这就是为什么几乎所有图像格式都使用二进制的原因。

> 比如我应该使用什么字符集（我只需要写正负数），

字符编码用于编码字符，即文本。您通常不会以二进制格式使用它们（除非它们包含一些您最初不太可能执行的文本）。

> 我可以向文件写入不到 1 个字节吗？

从技术上讲，您可以使用小于磁盘上的块大小，例如 512 字节或 4 KB。您可以写入比这更少的任何数量，但它不会使用更少的空间，如果这样做也没关系，因为磁盘数量太小而无需担心。

> 我应该使用 Scanners/BufferedWriters 等吗？

不，这些是用于文本的，

而是使用 DataOutputStream 和 DataInputStream 因为它们是二进制的。

# jquery - 将 HTML 字符串转换为 jQuery 元素集

> ID：13788893
> 
> 赞同：1
> 
> 时间：2012-12-09T15:39:52.613
> 
> 标签：jquery

我目前使用 $.get() 从另一个文件中获取 HTML 标记。如何将结果添加到当前 DOM 的当前 jQuery 匹配元素集？

我认为 add() 可以解决问题，但事实并非如此。例如，这不起作用：

```
$.get('file.html', function(data) {
    $('body').add(data)
}); 
```

但理想情况下，如果 file.html 有，比如说，''，我希望能够像在当前元素集中一样使用#result，使用 $('#result').html(..)。

我可以做的一件事是使用 $.load('file.html #result')... 但我必须多次这样做，因为我将使用多个元素。

我当时的想法可能是使用

```
sub$ = jQuery.sub(); 
```

并将返回的 HTML 字符串从 $.get 添加到它，但不知道是否可能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T15:59:58.643

您可以将整个 html 响应转换为 jQuery 对象，而无需将其插入 DOM。这允许您操作或查找特定元素或值，并对响应的不同部分执行不同的操作。

例子：

```
$.get('file.html', function(data) {
    var $response=$(data);
    var myButton=$response.find('button');

     var someDiv= $response.find('#someDiv').css('color','red')
     $('#someForm').append( myButton)

     $('body').append( someDiv)
}); 
```

您还可以检查响应中是否存在某些元素或某些值并相应地处理响应。

```
$.get('file.html', function(data) {
   var $response=$(data);

    if( $response.find('#someDiv').length){
      doThis();
    }else{
       doThat();
    }

}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:21:41.797

只需查看 jQuery 文档[http://api.jquery.com/html/](http://api.jquery.com/html/)

您必须使用 html 方法：

```
$.get('file.html', function(data) {
    $('body').html(data);
}); 
```

# android - 如何在android中保持javamail连接？

> ID：13788895
> 
> 赞同：1
> 
> 时间：2012-12-09T15:39:53.597
> 
> 标签：android, jakarta-mail

我在我的 android 项目中使用了 javamail api，并在“邮件主题”和“邮件内容”中解析字符串。在我的 gmail 中有很多邮箱，例如旅行、工作、照片……我需要浏览所有邮箱并在我的条件下搜索邮件。但是我发现当调用**getData()**时它会登录 gmail 并再次建立连接。

我的问题是

1.如何在android中保持连接？

2.如何同时搜索所有邮箱？

***感谢帮助。***

```
private String downloadUrl () throws IOException {

    receiveMail("username", "password");
    return null; 
} 
```

接收邮件部分

```
 private static List<Message> receiveMail(String username, String Password) {

    try {

        Properties props = System.getProperties();
        props.setProperty("mail.store.protocol", IMAPS_PROTOCOL);

        Session session = Session.getDefaultInstance(props, null );
        session.setDebug(false);
        final Store store = session.getStore(IMAPS_PROTOCOL);
        store.connect(IMAPS_MAIL_HOTS , username, Password);

        getData(store, "travel");
        getData(store, "job");            
        getData(store, "photo");

    } catch(Exception ex) {
        ex.printStackTrace();
    }

    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:44:41.110

如果要为每个文件夹重复使用单个连接，则需要确保在打开下一个文件夹之前关闭该文件夹。

# java - VLCJ：打包的 Jar 双击时无法加载 libvlc 库，但通过控制台完美运行

> ID：13788897
> 
> 赞同：3
> 
> 时间：2012-12-09T15:39:58.473
> 
> 标签：java, vlcj

我对 vlc 有问题。我正在使用 Eclipse 并制作了一个小应用程序来使用 vlcj 框架播放视频文件。在 Eclipse 内部一切正常，但是当我通过 Eclipse 制作 jar 可执行文件并双击它时（在 Windows 64 上：已测试仅在此平台上）没有任何反应。然后我尝试使用“cd myjarfilepath”，然后使用“java -jar myjarname.jar”，一切正常。为什么会发生这种情况以及如何解决？

在此先感谢 stackoverflow 的社区。

编辑：

在路径位置：C:\Users\user\Documents\31\Latest_Win64\Needed 我有以下文件：

```
plugins(directory)  
axvlc.dll  
axvlc.dll.manifest  
libvlc.dll  
libvlc.dll.manifest  
libvlccore.dll  
npvlc.dll  
npvlc.dll.manifest  
vlc.exe.manifest 
```

在我的类路径中，我包含了以下文件：

```
jna-3.5.1.jar  
platform-3.5.1.jar  
vlcj-2.2.0.jar  
vlcj-2.2.0-javadoc.jar  
vlcj-2.2.0-sources.jar 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T00:23:52.883

这听起来像是加载所需的 VLCj 文件的问题。不仅需要 dll，还需要插件目录。随着执行位置从 eclipse 内部移动到文件系统中，这些文件的路径可能设置不正确。

听起来你让它在 eclipse 中工作。这将向我表明你所拥有的应该工作。首先，我建议通过提供如下所示的 VM 参数来获取 VLC dll 等，而不是在代码中设置它。请记住注释掉您在代码中所做的任何加载，以便您依赖命令行参数。

```
-Djna.library.path={Application Location}/lib
example: -Djna.library.path=C:/myapp/lib

Directory Contents:
lib
-- libblc.dll
-- libvlc5.dll
-- {etc}
/plugins
   /3dnow
   /access
   {etc} 
```

如果您仍然遇到问题，请添加以下参数以将 VLCj 置于调试模式。这对于确定失败的地方非常有帮助。

```
-Dvlcj.log=DEBUG 
```

希望有帮助。

# ios - cocos2D中的CCProgressTimer

> ID：13788898
> 
> 赞同：1
> 
> 时间：2012-12-09T15:40:07.093
> 
> 标签：ios, cocos2d-iphone

也许这个问题已经重复了很多次，但我找不到有用的材料。这也是我在 cocos2D 中的第一个项目，我想在 cocos2D 中实现 ProgressBar、CCProgressTimer。我有两个精灵，第一个是移动的，第二个是玩家（你可以移动到它），如果用户成功吃掉了第一个移动的物体，那么进度应该增加，否则如果它错过了，那么进度将减少。我需要你的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T21:57:12.330

这是我用于舍入 CCProgressTimers 的代码（它看起来像时钟）。您可能需要有一个背景精灵和背景精灵上方的“可移动”精灵。

```
CCSprite *movableSprite = [CCSprite spriteWithFile:@"health100.png"];
CCProgressTimer *healthBar = [CCProgressTimer progressWithSprite:movableSprite];
healthBar.type = kCCProgressTimerTypeRadial; // This is for round progress timer. Possible value for horizontal bar will be kCCProgressTimerTypeHorizontalBarLR

healthBar.midpoint = ccp(0,0.5); // Here is where all magic is
healthBar.barChangeRate = ccp(1, 0); // If you need horizontal bar progress play with these parameters.

// Here we will start an animation process. 
// You can do it without animation just setting up healthBar.progress = 45.0f; (45%)
[healthBar runAction:[CCProgressFromTo actionWithDuration:2.0f from:0.0f to:100.0f]];        

healthBar.position = ccp(100, 100); // It's your position

[self addChild:healthBar]; 
```

# c - C 发送广播。需要修改IP源字段

> ID：13788901
> 
> 赞同：1
> 
> 时间：2012-12-09T15:40:33.840
> 
> 标签：c, ip-address, send, broadcast

我需要做下一个。

我正在为我的最终学位项目做一些在 openwrt 固件中运行的 C 嗅探器。我已经完成了所有，但我还有一件事我不知道如何开始。

我有下一个私网：http: [//img443.imageshack.us/img443/999/sinttulo2de.png](http://img443.imageshack.us/img443/999/sinttulo2de.png)

我的嗅探器所做的是嗅探通过我的路由器运行的所有数据包，当其中一个数据包到达我连接的任何 PC 时，如果该 PC 处于睡眠状态，它将唤醒它。好像它是局域网上的自动唤醒。

所以，我有问题。假设 PC3 向 PC4 发送一个数据包，来自交换机的 arp 表知道 PC4 在哪里，并将该数据包引导到 PC4 网关。如果发生这种情况，我的嗅探器将永远看不到该数据包，因为嗅探器在路由器的处理器中运行，并且只能看到通过它的数据包。

我需要做下一个。当 PC4 进入睡眠状态并且我的嗅探器检测到它（已经这样做了）时，嗅探器必须发送带有来自 PC4 的 IP 地址源的虚假广播，以欺骗交换机并使其认为 PC4 现在连接到网关路由器。因此，从 PC3 发送到 PC4 的下一个数据包将转到路由器而不是 PC4，我的嗅探器会看到它。

我希望你能理解我。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:51:43.740

您正在寻找的是所谓的“[免费 ARP](http://wiki.wireshark.org/Gratuitous_ARP) ”。

[我在这里](http://ex-parrot.com/~chris/tmp/20061222/gratuitousarp.c)找到了 ac 实现。

但是，在我看来，如果它没有通过您的路由器，请不要嗅探它。

# sql-server - 为什么数据库行被自动删除sql 2008

> ID：13788904
> 
> 赞同：1
> 
> 时间：2012-12-09T15:40:51.737
> 
> 标签：sql-server

每天，我的一些数据库行都会被自动删除。

甚至日志文件也被删除了，所以我无法检查谁删除了这些文件。

我不明白该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T15:46:21.770

如果 SQL 服务器是预生产的，您可以将所有删除权限拉到目标表中，然后等着看谁在抱怨。如果无论如何都不允许在此表上删除，即使在生产中也是如此，那么限制该功能向前发展将是一个好主意。

除此之外，尝试向表中添加删除触发器以进行审计。您可以获取源 IP 地址、登录用户信息等。如果需要，您甚至可以回滚删除。

这是一篇关于使用触发器进行审计的好文章。

[http://weblogs.asp.net/jgalloway/archive/2008/01/27/adding-simple-trigger-based-auditing-to-your-sql-server-database.aspx](http://weblogs.asp.net/jgalloway/archive/2008/01/27/adding-simple-trigger-based-auditing-to-your-sql-server-database.aspx)

编辑：

如果要停止对表的所有删除，可以使用以下触发器。

```
CREATE TRIGGER dbo.MyTable_Delete_Instead_Of_Trigger
ON dbo.MyTable
INSTEAD OF DELETE
AS
BEGIN

     raiserror('Deletes are not allowed.', 16, 1)
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T16:28:04.130

对捕获所有 RPC Completed 和 SQL BatchCompleted 事件的数据库运行 SQL Profiler 并查看它以查找执行删除的任何内容。

# xml - 在 XSLT 中组合两个参数的路径

> ID：13788908
> 
> 赞同：1
> 
> 时间：2012-12-09T15:41:31.300
> 
> 标签：xml, templates, xslt, path

我有一个简单的问题。如何组合来自两个模板参数的路径？我想做这样的事情：

```
<xsl:template match="*[namespace-uri()='show:show']">
<xsl:param name="arg1"/>
<xsl:param name="arg2"/>
<tr>
  <td>
    <xsl:value-of select="concat($arg1,$arg2)"/>
  </td>
</tr> 
```

获得如下路径：arg1/arg2 但它不起作用。我怎样才能正确地做到这一点？
或者你可以做某事吗

```
<xsl:value-of select="path/path/$arg2"/> 
```

?
**arg1**是从根开始的完整路径，**arg2**是单个元素名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:21:29.397

要将路径表达式构建为字符串然后评估它们，您需要一个扩展函数（至少在 XSLT 1.0 和 2.0 中），核心规范中没有任何内容支持它，但大多数处理器都提供了合适的函数。表达方式

```
<xsl:value-of select="concat($arg1,'/',$arg2)"/> 
```

将产生一个包含 的字符串值`arg1`、斜线和 的字符串值的字符串`arg2`。但是，如果 arg1 是一个节点集并且您将 arg2 限制为只是一个元素名称，那么您可以执行类似这样的操作

```
<xsl:value-of select="$arg1/*[local-name() = $arg2]"/> 
```

（或`copy-of`酌情）并调用模板

```
<xsl:with-param name="arg1" select="/path/to/interesting/stuff" />
<xsl:with-param name="arg2" select="'elementname'" /> 
```

如果您想允许 arg2 命名属性而不是元素，请使用

```
$arg1/@*[.....] 
```

或者允许它是（假设目标`arg1`没有属性*和*同名的子元素）

```
$arg1/node()[......] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:10:36.187

You can do like this

```
<xsl:value-of select="concat($arg1,'/',$arg2)"/> 
```

# ember.js - 如何使用 ember.js 实时更新 jqPlot 图？

> ID：13788914
> 
> 赞同：2
> 
> 时间：2012-12-09T15:42:16.353
> 
> 标签：ember.js, jqplot

我知道如何在*不*使用 ember 的情况下更新和重绘 jqPlot 对象...

我创建了以下小提琴来显示“问题”：http: [//jsfiddle.net/QNGWU/](http://jsfiddle.net/QNGWU/)

在这里，每秒调用 的函数`load()`并`App.graphStateController`更新控制器内容中的系列数据。

第一个问题：系列的更新似乎没有传播到视图。

第二个问题：即使他们愿意，我在哪里可以打电话更新情节（即`plotObj.drawSeries()`）？

我已经尝试在视图`didInsertElement`函数中注册一个观察者：

```
didInsertElement : function() {
  var me = this;
  me._super();
  me.plotObj = $.jqplot('theegraph', this.series, this.options);
  me.plotObj.draw();
  me.addObserver('series', me.seriesChanged);    
},
seriesChanged: function() {
  var me = this;
  if (me.plotObj != null) {
    me.plotObj.drawSeries({});
  }
} 
```

但这没有用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:07:22.323

好吧，想通了，请参阅[更新的小提琴](http://jsfiddle.net/QNGWU/39)。

秘诀是更新整个`graphState`对象（不仅仅是它的属性）`App.graphStateController`：

```
var newState = App.GraphState.create();
newState.set('series', series);
me.set('content', newState); 
```

然后在以下位置附加一个观察者`App.graphStateView`：

```
updateGraph : function() {
  [...]
}.observes('graphState') 
```

该`updateGraph`函数并不漂亮，因为 jqPlot 的数据系列存储为 [x,y] 对。

我猜，整个问题是对象本身的属性和`series`对象本身不是派生自的，因此不会为它们触发任何事件。另一种解决方案可能是将其也更改为。`options``App.graphState``Ember.object``Ember.objects`

# java - 如何在矢量中实现按钮

> ID：13788915
> 
> 赞同：0
> 
> 时间：2012-12-09T15:42:18.723
> 
> 标签：java, swing, jdbc, jtable, jbutton

在我的桌子上。我想在我可以按下的每一行中放置一些按钮。但我不知道该怎么做

```
public static DefaultTableModel buildTableModel(ResultSet rs)
        throws SQLException {
    java.sql.ResultSetMetaData metaData = rs.getMetaData();

    // names of columns
    Vector<String> columnNames = new Vector<String>();
    int columnCount = metaData.getColumnCount();
    for (int column = 1; column <= columnCount; column++) {
        columnNames.add(metaData.getColumnName(column));
    }

    // data of the table
    Vector<Vector<Object>> data = new Vector<Vector<Object>>();
    while (rs.next()) {
        Vector<Object> vector = new Vector<Object>();
        for (int columnIndex = 1; columnIndex <= columnCount; columnIndex++) {
            vector.add(rs.getObject(columnIndex));
        }

        data.add(vector);
    }
    return new DefaultTableModel(data, columnNames);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:02:32.993

为此，您必须首先查看，

1.  [编辑器和渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)

2.  如何将单元格呈现`JTable`为[Button 示例](http://tips4java.wordpress.com/2009/07/12/table-button-column/)。

不仅是上述示例，您还有许多显示如何在 JTable 单元格中添加按钮的资源。

# jqgrid - tableToGrid & 淘汰赛

> ID：13788916
> 
> 赞同：2
> 
> 时间：2012-12-09T15:42:38.257
> 
> 标签：jqgrid, knockout.js

我有一个带有 jqgrid 的 pb 与 knockoutjs 一起使用。我有一个 HTML 表格女巫包含使用 konckoutjs 绑定的复选框，效果很好，但是当我触发 JQGRID 的 tableToGrid 函数时，我的复选框失去了它们的绑定。

谢谢

JS

```
 var listuserProfile = [];
 var viewModel = {
     userProfile: ko.observableArray(listuserProfile)
};

$(document).ready(function () {               
    //Fire knockoutjs
    ko.applyBindings(viewModel);

    //Init the user profiles list
    viewModel.userProfile(@Html.Raw(Json.Encode(Model.UserProfiles)));

    tableToGrid("#userProfiles");

}); 
```

HTML

```
 <table id="userProfiles">
            <thead>
                <tr>
                    <th>User</th>
                    <th>Admin</th>
                    <th>Manager</th>
                    <th>ADV</th>
                    <th>HR</th>
                    <th>DG</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: userProfile">
                <tr>
                    <td><span data-bind="text: User"></span></td>
                    <td><input disabled="disabled" type="checkbox" data-bind="checked: Admin" /></td>
                    <td><input disabled="disabled" type="checkbox" data-bind="checked: Manager" /></td>
                    <td><input disabled="disabled" type="checkbox" data-bind="checked: ADV" /></td>
                    <td><input disabled="disabled" type="checkbox" data-bind="checked: HR" /></td>
                    <td><input disabled="disabled" type="checkbox" data-bind="checked: DG" /></td>                
                </tr>            
            </tbody>
        </table> 
```

没有 tabletogrid 的调用它工作正常！！！

# apache - apache mod_rewrite：如何添加 url 重写？

> ID：13788922
> 
> 赞同：0
> 
> 时间：2012-12-09T15:43:05.153
> 
> 标签：apache, mod-rewrite

如何使用 apache mod_rewrite将[http://example.com/about](http://example.com/about)重定向到[http://example.com/about-us ？](http://example.com/about-us)

我在 .htaccess 文件中编写了以下代码。但是我收到太多重定向错误。

```
#RewriteRule about    http://example.com/about-us [R=301,L] 
```

帮助我找到解决此问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:53:21.750

试试这个（正则表达式`^about$`不匹配`about-us`。）：

```
RewriteRule ^about$    http://example.com/about-us [R=301,L] 
```

在这种情况下，您可以改用`RedirectMatch`指令。

# php - 从foursquare /user/self/checkins 数据中解析场地

> ID：13788924
> 
> 赞同：1
> 
> 时间：2012-12-09T15:43:20.817
> 
> 标签：php, json, foursquare

我正在尝试获取我的用户场所的数据（来自用户签到信息的场所的详细信息）。我正在使用用户访问令牌来获取数据。这是我正在使用的代码：

```
if($_GET['code']){
$authkey = file_get_contents("https://foursquare.com/oauth2/access_token?   client_id=".$client_id."&client_secret=".$secret."&grant_type=authorization_code&redirect_uri=".$redirect."&code=".$_GET['code']);
$decoded_auth = json_decode($authkey,true);
$venueinfo = file_get_contents("https://api.foursquare.com/v2/users/self/checkins?oauth_token=$access_token&v=$version");
$decoded_venueinfo = json_decode($venueinfo, true);
foreach ($decoded_venueinfo->response->checkins->items->venue as $result){
    echo $result->name;
        echo $result->id;
        echo $result->location->address;
        echo $result->location->city;
        echo $result->location->country;    
    }
} 
```

我得到一个空白页。我试图用 echo "error" 在第一个 "if" 的末尾添加 "else"，并显示它，所以我猜我的 "if" 语句条件是错误的。我对 PHP 还很陌生，我边走边学。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:08:58.563

_GET['code'] 指的是请求 URL 中的“&code=”GET 参数。此参数将出现在foursquare 向您的应用发出的用于对用户进行身份验证的请求中。听起来您正在手动发出请求以测试您的应用程序，在这种情况下，您需要在 URL 中提供 code 参数。

# ruby - 使用 start_time 和 end_time 的 ice_cube gem 单次发生事件

> ID：13788926
> 
> 赞同：4
> 
> 时间：2012-12-09T15:43:48.600
> 
> 标签：ruby, ruby-on-rails-3, ice-cube

这里一定有一些简单的东西被忽略了......

我一直在尝试各种方法来创建基本`IceCube`时间表（[https://github.com/seejohnrun/ice_cube](https://github.com/seejohnrun/ice_cube)）。总体目标是`IceCube`在“房间预订”rails 应用程序中使用“价格表”。

第一种情况是创建一个`schedule`具有特定`start_time`且`end_time`仅发生一次的基础。`IceCube`可以这样做，对吗？

时间表将从 开始并在`start_time`结束`end_time`。我希望能够检查`occurs_on?`此时间表的日期或时间，以确定是否应调整房价。

因此，在控制台中，我尝试创建一个基本时间表，并希望它`5.days`从现在开始发生，因为`start_time`is`Time.now`和`end_time`is `Time.now + 30.days`。但它似乎永远不会返回真实......

```
1.8.7 :001 > schedule = IceCube::Schedule.new(Time.now, :end_time => Time.now + 30.days)
 => #<IceCube::Schedule:0xb619d604 @all_recurrence_rules=[], @duration=nil, @end_time=Tue Jan 08 09:13:11 -0600 2013, @all_exception_rules=[], @start_time=Sun Dec 09  09:13:11 -0600 2012> 
1.8.7 :002 > schedule.occurs_on? Date.today + 5.days
 => false 
1.8.7 :005 > schedule.occurs_at? Time.now + 5.days
 => false 
1.8.7 :006 > schedule.occurring_at? Time.now + 5.days
 => false 
```

添加重复规则

```
1.8.7 :018 > schedule.rrule IceCube::Rule.monthly
=> [#<IceCube::MonthlyRule:0xb687a88c @validations={:base_day=>[#<IceCube::Validations::ScheduleLock::Validation:0xb6875b0c @type=:day>], :base_hour=>[#<IceCube::Validations::ScheduleLock::Validation:0xb6875abc @type=:hour>], :interval=>[#<IceCube::Validations::MonthlyInterval::Validation:0xb6875d28 @interval=1>], :base_min=>[#<IceCube::Validations::ScheduleLock::Validation:0xb6875a6c @type=:min>], :base_sec=>[#<IceCube::Validations::ScheduleLock::Validation:0xb6875a1c @type=:sec>]}, @interval=1>] 
```

然后检查`Date.today`工作...

```
1.8.7 :025 > schedule.occurs_on? Date.today
 => true 
```

但检查发生_on？for`Date.today + 10.days`仍然返回 false ......为什么？

```
1.8.7 :026 > schedule.occurs_on? Date.today + 10.days
 => false 
```

那么我忽略了什么/做错了什么？或者设置一个`IceCube::Schedule start_time`和`end_time`- 它们似乎没有效果......有什么意义？

`IceCube`不适用于具有开始和结束时间的单次事件？

另一个示例场景是，房主希望提高假日季节的房价。因此，房主创建了一个从 2012 年 12 月 1 日开始到 2013 年 1 月 7 日结束的价格表。（不必*重复*，但如果业主愿意，可以重复）。

然后当人们在搜索房间时，如果请求的住宿`occurs_on?`是假期价格表，价格将被调整

我是否需要在日程表之外存储`start_time`并`end_time`手动检查或其他什么？

或者是否有更适合的 gem / 工具来协助这种日程管理？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-17T07:57:57.613

您误解了时间表和规则的工作方式。

首先，重要的是要了解`start_time`。计划的每次发生都基于此，并且计划返回与从开始时间开始的特定间隔匹配的时间。间隔由规则确定。

您的示例不起作用，因为“从现在起 5 天”不是从计划开始时间开始的每月间隔。从开始时间算起的 28、30 或 31 天将匹配，具体取决于月份。

```
start = Time.utc(2013, 05, 17, 12, 30, 00) # 2013-05-17 12:30:00 UTC
schedule = IceCube::Schedule.new(start)
schedule.add_recurrence_rule IceCube::Rule.monthly

schedule.occurs_on? start + 5.days #=> false
schedule.occurs_on? start + 31.days #=> true 
```

其次，`end_time`与`start_time`一起设置*每次*发生的持续时间。因此，如果您的开始时间是 09:00，结束时间是 17:00，那么每次事件的持续时间为 8 小时。

`occurs_at?(t1)`这在和之间产生了区别`occurring_at?(t1)`：第一个仅在给定时间与事件的开始完全匹配时才为真；第二个在持续时间内的任何时间都是正确的。`occurs_on?(d1)`匹配给定日期的任何时间。

```
arrival = Time.utc(2013, 5, 1,  9, 0, 0)
departure  = Time.utc(2013, 5, 1, 17, 0, 0)
schedule = IceCube::Schedule.new(arrival, end_time: departure)
schedule.add_recurrence_rule IceCube::Rule.weekly.day(1, 2, 3, 4, 5) # M-F

schedule.occurs_at? arrival            #=> true
schedule.occurs_at? arrival + 1.second #=> false

schedule.occurring_at? arrival + 1.second   #=> true
schedule.occurring_at? departure + 1.second #=> false 
```

对于您正在做的事情，您可以尝试以下两种方法之一：

1.  长达一个月的事件
2.  一个月后结束的日常事件

这取决于您需要如何根据计划显示或验证时间。这是两者的示例：

```
arrival = Time.utc(2013, 5, 1)
departure = Time.utc(2013, 5, 31)

# single occurrence
schedule = IceCube::Schedule.new(arrival, duration: 31.days)

# daily occurrence
schedule = IceCube::Schedule.new(arrival, duration: 1.day)
schedule.add_recurrence_rule IceCube::Rule.daily.until(departure) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T06:18:20.320

经过更多测试后，我认为使用 IceCube 的 SingleOccurrenceRule 是单次发生事件的正确方法。

要有一个只发生在日程表和我之间的日子的日程表`start_time`，`end_time`我可以做如下的事情。

创建一个`IceCube::Schedule`带有 start 和 end_time 的：

```
1.8.7 :097 > schedule = IceCube::Schedule.new(Time.now, :end_time => Time.now + 30.days)
 => #<IceCube::Schedule:0xb63caabc @all_recurrence_rules=[], @duration=nil, @end_time=Wed Jan 09 00:03:36 -0600 2013, @all_exception_rules=[], @start_time=Mon Dec 10 00:03:36 -0600 2012> 
```

将计划中发生的所有日期放入一个数组中。

```
1.8.7 :098 > days_in_schedule = []
 => [] 
1.8.7 :099 > schedule.start_time.to_date.upto(schedule.end_time.to_date) { |d| puts d; days_in_schedule << d } 
```

遍历数组并为计划中的每一天创建一个 SingleOccurrenceRule。然后测试几个日期。在 30 天内，发生_on? 是真的，在 30 天之外，发生？是假的。这似乎是正确的，除了在检查 if 时它仍然返回 false `schedule.occurs_on? Date.today`。**为什么？！？！？**

```
1.8.7 :100 > days_in_schedule.each { |d| schedule.rtime Time.parse(d.to_s) }
1.8.7 :109 > schedule.terminating?
 => true 
1.8.7 :110 > schedule.occurs_on? Date.today + 5.days
 => true 
1.8.7 :111 > schedule.occurs_on? Date.today + 55.days
 => false 
1.8.7 :135 > schedule.occurs_on? Date.today
 => false 
```

# html - 如何使元素不触发滚动条？

> ID：13788929
> 
> 赞同：3
> 
> 时间：2012-12-09T15:44:06.033
> 
> 标签：html, css

我有一个固定高度的页面，661px，横向模式下 iPad 上 Safari 的高度。在 iPad 上，我不希望它滚动；内容应该完全适合。

然而，在更高的浏览器窗口中，我希望在 661px 折叠下方显示一些额外的内容（版权行）。但同样，在窗口高度小于 661 像素之前不应出现滚动条，即在滚动条出现之前应剪掉页脚。

```
+--------+    +--------+    +--------+ ^
|        |    |        |    |        | #
|        |    |        |    |        | v
+--------+    +--------+
  Footer 

   (1)           (2)           (3) 
```

1.  窗口高于 661px；没有滚动条
2.  窗口正好 661px；页脚被剪裁，但仍然没有滚动条
3.  窗口小于 661px；出现滚动条

我的简化标记如下：

```
<body>
  <div class="all">
    ... main content ...
    <div class="footer">Copyright!</div>
  </div>
</body> 
```

以及相应的CSS：

```
.all {
  height: 661px;
  overflow: visible;
}

.footer {
  position: absolute;
  left: 0px;
  top: 661px;
} 
```

这会将所有元素放在正确的位置，但不知何故，页脚仍然会影响页面高度并因此触发滚动条，即使它位于高度较小的元素内。`overflow`和`height`on没有组合`html`，`body`并且`.all`似乎可以解决这个问题，无论是在 Chrome 还是在 Firefox 中。

这样做的正确方法是什么？

而且我还想问一个更普遍的问题：窗口上的滚动条是如何触发的？显然，如果 的高度`body`大于窗口，这不仅仅是因为 Chrome 检查器显示两者都`html`具有`body`预期的 661px 高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T15:53:30.047

为什么不使用条件样式表？添加以下标签

```
media="screen AND (max-height:661px)" 
```

到样式表，它只适用于浏览器窗口的最大高度为 661 像素的屏幕查看，根据您的计算，这将包括 iPad，但不会更大。然后，您可以在此表中制作您的版权信息`display:none`，以将其从文档流中删除。

* * *

刚看到你的编辑。您应该能够使用 media 属性的 height 属性来做您想做的事情。我假设您的内容将被缩小到像素以适应 661 像素高的屏幕，所以您真正需要做的就是为任何更高的屏幕插入版权信息。较小的屏幕会自动有滚动条，而 661px 的 iPad 屏幕应该正好合适。

我无法对此进行测试，所以如果您告诉我它是如何工作的（或不工作），我将不胜感激:)

# wordpress - Wordpress I18n 生成器：缺少键

> ID：13788930
> 
> 赞同：1
> 
> 时间：2012-12-09T15:44:14.737
> 
> 标签：wordpress, internationalization

我从以下网址下载了 I18n 生成器包：[http](http://codex.wordpress.org/I18n_for_WordPress_Developers#Generating_a_POT_file) ://codex.wordpress.org/I18n_for_WordPress_Developers#Generating_a_POT_file 。我现在想为我创建的模板生成一个 pot 文件：

```
php makepot.php  /home/mr/workspace/blog/wp-content/themes/myTheme/ de_DE.pot 
```

执行此命令后，我得到一个 de_DE.pot，其中包含一些 WP 标准密钥。但是找不到我的新密钥。但如果我手动将它们添加到文件中并上传，它们将被翻译。为什么 WordPress 不获取我所有的密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:12:03.907

I have used the poEdit in the following way.

1.  File Menu > New Catalog
2.  Set the language as per your need. Set utf8
3.  Set the paths as . and ..(if you want to place your .mo file at languages folder).
4.  Define the functions from which the strings to take( ie *, _*, _e, _n, _x, _ex etc).
5.  Now save the file to your template's folder as templateName.po
6.  Now update catalog.
7.  Upon saving the .mo file will be generated in the same folder.
8.  Now rename the .mo file to the specific Locale (for mine bn_BD.mo, for your case de_DE.mo)

I would suggest a few tips from [here](http://www.solostream.com/blog/tutorials/translate-wordpress-theme/)

# ios - iOS：在初始化期间获取视图大小

> ID：13788931
> 
> 赞同：0
> 
> 时间：2012-12-09T15:44:16.093
> 
> 标签：ios, opengl-es, uiview, size

在`iOS` `OpenGL`应用程序中，我想获取`GLKView`. 看起来视图的大小是 (0, 0) in`viewDidLoad`和其他回调。

基本上`GLKView`我使用的尺寸是固定的，但`Retina-/Non-Retina-Devices`实际尺寸不同，我也想处理未来可能的设备。

谷歌搜索，在我看来，初始化期间大小还没有固定。但是在初始化期间检测视图的大小似乎是一个标准问题，我想知道这通常是如何处理的？有没有办法检测一次大小，或者我（例如）是否需要每次检测大小`drawInRect()`并在检测到更改时重新初始化？

感谢您的任何提示，托斯滕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:17:32.943

> 但是在初始化期间检测视图的大小似乎是一个标准问题，我想知道这通常是如何处理的？

它通常不在初始化时处理，而是在稍后将要呈现视图时处理。例如，在`viewWillAppear:`回调中。检查您是否可以将 GL 初始化推迟到那时。

# c# - 使用 SVG 文件作为 Windows 应用商店应用程序 (Metro) 的背景

> ID：13788934
> 
> 赞同：7
> 
> 时间：2012-12-09T15:44:33.247
> 
> 标签：c#, xaml, windows-8

我有一个简单的 Windows 应用商店应用程序，我想使用 SVG 图像作为背景。我使用 Inkscape 创建了一个并将其添加到 Assets 文件夹并检查它是否设置为 Content。

对于 XAML，我有以下内容；

```
<Grid>
    <Grid.Background>
        <ImageBrush ImageSource="/Assets/Background.svg"/>
    </Grid.Background>

</Grid> 
```

什么都没有显示，是我做错了什么还是无法使用 SVG 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T16:43:52.237

不直接（参见[图像文件格式](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh868203.aspx#Image_file_formats)）。但是，有一些转换器和其他控件可以让您利用 SVG 资产。其中一些将矢量 SVG 格式转换为矢量 XAML 格式。

对我的 Bing 搜索会产生以下（以及更多）。但是请注意，这些并不是专门针对 Windows 8 的，并且与 WPF 和 Silverlight 存在一些 XAML 方言差异。我没有专门将它们用于 Windows 8，所以这不是一种认可，而只是一些值得研究的选项。

[Inkscape](http://inkscape.org/)（包括 XAML 导出选项）

[SVG图像控制](http://www.codeproject.com/Articles/92434/SVGImage-Control)

[SharpVectors](http://sharpvectors.codeplex.com/)

[查看器Svg](http://www.ab4d-graphics.com/ViewerSvg.aspx)

# oracle - 错误 0152：找不到“Oracle.DataAccess.Client”ADO.NET 提供程序的实体框架提供程序

> ID：13788936
> 
> 赞同：7
> 
> 时间：2012-12-09T15:44:48.077
> 
> 标签：oracle, entity-framework, visual-studio-2012, odac

我有 Windows 7 x64、带有“ODAC 11.2 Release 5 和 Oracle Developer Tools for Visual Studio (11.2.0.3.20)”的 Visual Studio 2012。然后我连接到 Oracle db，创建 .edmx 模型。但是当我尝试使用EF来操作一些数据时

```
var ent = new Entities();
var res = ent.table1.ToList(); 
```

错误发生

```
Schema specified is not valid. Errors: 

Model.ssdl(2,2) : error 0152: No Entity Framework provider found for 
'Oracle.DataAccess.Client' ADO.NET provider. Make sure the provider is registered in 
the 'entityFramework' section of the application config file. See 
http://go.microsoft.com/fwlink/?LinkId=260882 for more information. 
```

我检查了我的 AppConfig，所有部分都正常。我还安装了 ODAC1120320Xcopy_x64 （并添加了一个环境变量）。但没有任何改变。

如果我这样做，一切正常

```
EntityConnection econn = new EntityConnection("name=Entities");
econn.Open();
EntityCommand ecmd = econn.CreateCommand();
ecmd.CommandText = "SELECT e.NAME FROM Entities.table1 as e";
EntityDataReader ereader = ecmd.ExecuteReader(CommandBehavior.SequentialAccess);
while (ereader.Read()) { ... } 
```

你有什么想法吗？将非常感谢任何帮助。

# eclipse - 带有 Emacs 键绑定的 Eclipse：重新绑定 Ctrl+J 以结束行和缩进？

> ID：13788939
> 
> 赞同：1
> 
> 时间：2012-12-09T15:45:14.783
> 
> 标签：eclipse, emacs, keyboard-shortcuts

我需要使用 Eclipse 来编辑一种在 Emacs 中没有好的主要模式的语言。我正在使用它所宣传的“Emacs 键绑定方案”，但它有几个区别，其中一些只是经常发生，而且当它们发生时真的很烦人。

一个这样的键绑定是`Ctrl+J`, 或者是对 Emacs 更友好的格式：`C-j`. 这种组合通常会在插入符号之前插入新行和缩进（与`Enter`or不同`RET`，它只插入行结束字符）。

所以，我去了首选项面板，按键设置，但我找不到任何可以简单地插入换行符的东西。即我可以取消绑定`C-j`组合，但我似乎无法分配它来进行插入。有什么办法吗？我只找到“插入线（上/下）当前行”命令，但没有类似`self-insert-command`等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:03:21.430

这是emacs对我来说更重要的键绑定之一，所以我真的需要让它工作。

转到`preferences->keys`，选择`emacs`作为方案，搜索`ctrl+j`并取消绑定。它`incremental search`默认设置为，所以我将其更改为`ctrl+s`. 一旦它未绑定，它就会按应有的方式工作。这对我来说一直`eclipse 3.x`有效`Juno`。

# php - BitTorrent 跟踪器响应中的“已下载”条目代表什么？

> ID：13788942
> 
> 赞同：1
> 
> 时间：2012-12-09T15:45:40.530
> 
> 标签：php, bittorrent

示例响应：

```
Array(4
   complete   =>  3147
   downloaded =>  33
   incomplete =>  71
   name       =>  ubuntu-12.10-desktop-i386.iso
) 
```

从[BT 规范](http://wiki.theory.org/BitTorrentSpecification#Metainfo_File_Structure)来看，它看起来是`complete`指种子`incomplete`的数量和正在下载的对等点的数量。

但这是什么`downloaded`意思？每次我提出新请求时，它似乎都会发生变化，就像完成/不完整一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:57:47.873

它代表完全下载文件并在线的用户数

# c++ - 在 curl 和 c++ 中测量下载速度。我做得对吗？

> ID：13788943
> 
> 赞同：0
> 
> 时间：2012-12-09T15:45:45.597
> 
> 标签：c++, curl

我试图弄清楚如何在下载许多文件的文件夹时计算当前的下载速度（它不是我正在下载的单个文件）。而且我无法正确地做到这一点，现在经历了好几个小时，它变得太混乱了。下载速度有时会太高，有时会为 0。

我正在使用 curl 和 C++。

在我的下载功能中，程序递归下载每个文件，直到所有文件都被下载。

这就是我设置 curl 以在下载期间调用 TraceProgress 函数的方式：

```
curl_easy_setopt( curl, CURLOPT_PROGRESSFUNCTION, TraceProgress );
curl_easy_setopt( curl, CURLOPT_PROGRESSDATA, &response );
curl_easy_setopt( curl, CURLOPT_NOPROGRESS, 0 ); 
```

这是剩余的代码：

```
 double totalDownloadableSize = 0; // total size of the download, set prior to starting download of the first file
    double downloadedSizeTillNow = 0; // total size downloaded till now - keep adding file size that just completed downloading
    double currentDownloadingSize = 0; // size that we are downloading - downloadedSizeTillNow + bytes downloaded of the current file (in TraceProgress Function)
    double oldDownloadNow = 0; // size of the old download bytes of that particular file

    string fileDownloading = "";
    string tempFileDownloading = "";

    time_t startSeconds;
    time_t oldSeconds;

    int downloadIterationCounter = 0;

    int TraceProgress( void *clientp, double dltotal, double dlnow, double ultotal, double ulnow )
    {

        // add size downloaded till now of this file to the total size downloaded till now
        currentDownloadingSize = downloadedSizeTillNow + dlnow;

        double rem = ( ( totalDownloadableSize - currentDownloadingSize ) / 1024 ) / 1024;

        // get current time in seconds
        time_t currentSeconds = time (NULL);

        // get elapsed time since last itiration
        time_t secondsElapsedSinceLastItiration = currentSeconds - oldSeconds;

        double downloadSinceLastIteration;
        if ( oldDownloadNow < dlnow )// so that we don't get wrong data when download file changes
        {
            downloadSinceLastIteration = dlnow - oldDownloadNow;
        }
        else
        {
            downloadSinceLastIteration = dlnow;
        }

        // calculate current download speed : (dlnow - oldNow) / (current time - oldTime)
        double currentDownloadSpeed = downloadSinceLastIteration / (double)secondsElapsedSinceLastItiration;

        // if downloading file name is not same as it was in the last call to this function
        // change the display text and save the name in the temp. This approach will avoid unnecessory
        // text change calls.
        if ( fileDownloading.compare( tempFileDownloading ) != 0 )
        {
             tempFileDownloading = fileDownloading;
             string dlfilename = "Downloading:  " + fileDownloading;
             SetWindowText( hDownloadingSTATIC, dlfilename.c_str() );// set text to static control
        }

        if ( downloadIterationCounter == 4 )
        {
             std::ostringstream strs_dn;
             strs_dn << (unsigned int)( rem );
             std::string downloadNow = strs_dn.str();

             string remSize = "Remaining:  " + downloadNow + " MB";
             SetWindowText( hRemainingDownloadSTATIC, remSize.c_str() );// set text to static control

             double idownloadSpeed = currentDownloadSpeed / 1024;

             std::ostringstream strs_dnSp;
             strs_dnSp << (unsigned int)( idownloadSpeed );
             std::string downloadSpeed = strs_dnSp.str();

             string downSize = "Download Speed:  " + downloadSpeed + " KB/s";
             SetWindowText( hDownloadSpeedSTATIC, downSize.c_str() );// set text to static control

             oldSeconds = currentSeconds;// save in old
             oldDownloadNow = dlnow;// save in old

             downloadIterationCounter = 0;
        }
        else
        {
             downloadIterationCounter++;
        }

        return 0;
    } 
```

任何帮助表示赞赏。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:08:18.777

~~`dlnow - oldDownloadNow`可能是错的。你应该只是使用`dlnow`。你根本不需要`oldDownloadNow`，除非你想显示下载速度*的变化率*。~~

> [我被 `dltotal` 和 `dlnow` 的名字弄糊涂了。`dltotal` 是下载的*预期*总字节数，`dlnow` 是到目前为止下载的字节数。所以确实需要 `oldDownloadNow`，而 `dlnow - oldDownloadNow` 是当前的增量。]

这个片段

```
 if ( oldDownloadNow < dlnow )
    {
        downloadSinceLastIteration = dlnow - oldDownloadNow;
    }
    else
    {
        downloadSinceLastIteration = dlnow;
    } 
```

有错误：`oldDownloadNow == dlnow`表示自上次以来没有下载任何内容。在这种情况下，当前的瞬时下载速度为零。片段应替换为

```
 downloadSinceLastIteration = dlnow - oldDownloadNow; 
```

没有任何检查。如果`libcurl`突然决定`oldDownloadNow > dlnow`，这将适时显示负下载速度，这是正确的做法。永远不要故意隐藏错误。

另外，`time()`分辨率太粗。使用某种细粒度的计时器。

# git - 如何从远程分支中挑选？

> ID：13788945
> 
> 赞同：180
> 
> 时间：2012-12-09T15:45:55.707
> 
> 标签：git

我在挑选樱桃时遇到了麻烦。在我的本地机器上，我目前在我的“主”分支上。我想从另一个名为“zebra”的分支中挑选提交。“斑马”分支是一个远程分支。

所以git状态：

```
# On branch master
nothing to commit (working directory clean) 
```

好的，现在我尝试挑选我想要的提交：

```
git cherry-pick xyz
fatal: bad object xyz 
```

其中“xyz”是我感兴趣的提交的签名，它发生在分支“zebra”上。

所以第一个明显的问题是，为什么 git 找不到我引用的提交？老实说，我真的不明白这首先是如何工作的。对于所有其他分支，git 是否在我的工作目录中本地存储类似提交数据库的东西？执行cherry-pick 命令时，它是否会搜索本地数据库以找到我正在谈论的提交？

由于“斑马”是一个远程分支，我想我在本地没有它的数据。所以我切换了分支：

```
git checkout zebra
Switched to branch 'zebra' 
```

所以现在在我的本地机器上，我可以看到目录中的文件正确地反映了斑马的状态。我切换回master，再次尝试挑选（希望提交数据现在可用），但我遇到了同样的问题。

我对这里发生的事情有一个基本的误解，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：248
> 
> 时间：2012-12-09T16:45:09.700

> 由于“斑马”是一个远程分支，我想我在本地没有它的数据。

您是正确的，您没有正确的数据，但试图以错误的方式解决它。要从远程源本地收集数据，您需要使用`git fetch`. 当你这样做时，`git checkout zebra`你切换到该分支的状态是你最后一次获取的任何状态。所以先从远程获取：

```
# fetch just the one remote
git fetch <remote>
# or fetch from all remotes
git fetch --all
# make sure you're back on the branch you want to cherry-pick to
git cherry-pick xyz 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-01-09T18:24:51.253

正如 OP 接受的答案的附录：

如果您遇到问题

```
fatal: bad object xxxxx 
```

那是因为您无权访问该提交。这意味着您没有在本地存储该存储库。然后：

```
git remote add LABEL_FOR_THE_REPO REPO_YOU_WANT_THE_COMMIT_FROM
git fetch LABEL_FOR_THE_REPO
git cherry-pick xxxxxxx 
```

其中 xxxxxxx 是您想要的提交哈希。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2019-05-14T20:13:36.287

### 添加我们要从中挑选的远程仓库（作为“foo”）

```
$ git remote add foo git://github.com/foo/bar.git 
```

### 获取他们的分支

```
$ git fetch foo 
```

### 列出他们的提交（这应该列出 fetched 中的所有提交`foo`）

```
$ git log foo/master 
```

### Cherry-pick 你需要的提交

```
$ git cherry-pick 97fedac 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-10-14T05:26:14.173

在将一个开发分支合并到master之后，我通常会删除这个开发分支。但是，如果我想在开发分支中挑选提交，我必须使用**合并提交**哈希来避免“坏对象”错误。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-03-06T11:27:11.623

需要先在本地驱动器上提取两个分支数据。

发生的事情是您尝试从分支-a 到分支-b 进行挑选，您当前在分支-b 上，但分支-a 的本地副本尚未更新（您需要执行 git pull on首先是两个分支）。

步骤：
- git checkout 分支-a
- git pull origin 分支
-a - git checkout 分支-b
- git pull origin 分支-b
- git cherry-pick <hash>

输出：
[branch-b <hash>] 日志数据
作者：作者 <作者
1 文件更改，1 插入（+），3 删除（-）

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-12-04T16:25:20.180

提交应该存在于您的本地，使用`git log`.

如果提交不存在，则尝试`git fetch`使用最新的远程更新本地。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-12-15T20:15:59.460

在使用拉取请求提交 ID 选项卡中的提交 ID 后，我返回了此错误。该提交随后被压缩并合并。在 github 拉取请求中，查找此文本：“merged commit xxxxxxx into...”，而不是尝试使用提交选项卡中的提交 ID。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-07-23T06:53:30.377

只需 2 个小步骤：

1.  获取
2.  git cherry-pick ur-commit-hash

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-10-01T04:58:54.303

如果您已获取，但仍然发生这种情况，可能是以下原因。

您尝试选择的提交可能不再属于任何分支。这可能会在您变基时发生。

在这种情况下，在远程仓库：

1.  `git checkout xxxxx`
2.  `git checkout -b temp-branch`

然后在你的仓库中，再次获取。将获取新分支，包括该提交。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-03-03T15:16:02.087

我通过提交我想要挑选的提交在分支上解决了这个问题。

```
git checkout <branch With Commit To Cherry-Pick> 
```

使用日志查找提交哈希

```
git log 
```

当您在记事本上找到您的哈希剪切和粘贴时。如果使用命令只是向上滚动以获取哈希，然后签出您要放置提交的分支。

```
git checkout < branch I Want To Place My Cherry-Picked-Hash In> 
```

最后从 git 调用cherry-pick（注意） -x 是将您的cherry-pick 消息附加到原始消息中。“在记录提交时，在原始提交消息中附加一行“（从提交中挑选的樱桃......）”，以指示从哪个提交中挑选出此更改。

```
git cherry-pick -x <your hash commit to add to the current branch> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-01-03T09:24:24.067

这也可以通过 SourceTree 轻松实现：

*   签出你的主分支
*   打开“日志/历史”选项卡
*   找到 xyz 提交并右键单击它
*   点击“合并...”

完毕 ：）

# css - 如何为 chrome、mozila 编写特定的 css top 属性

> ID：13788949
> 
> 赞同：-2
> 
> 时间：2012-12-09T15:46:46.367
> 
> 标签：css

我为 mozila 和 chrome 编写 css 顶部。

```
 -moz-top : 20px;
    -webkit-top: 75px; 
```

但它显示错误“未知的属性名称”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-26T02:50:57.897

我参加聚会有点晚了，但这对我有用：

```
/* this sets standard, which gets IE and others (all except chrome and mozilla) */ 

#EXAMPLE{
    top: -10px;
}

/* this gets mozilla */
@-moz-document url-prefix() {
    #EXAMPLE{
        top: -10px;
    }
}

/* this gets chrome */
@media screen and (-webkit-min-device-pixel-ratio:0) { 
     #EXAMPLE{
     top: -5px !important;
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T15:55:12.200

只需使用`top`

所有浏览器都支持

# python - 在 Python 中从字符串中读取子字符串

> ID：13788951
> 
> 赞同：1
> 
> 时间：2012-12-09T15:46:51.823
> 
> 标签：python, string, python-3.x

我正在做一些研究，我在一个大文本文件中有 +25,000 份报告。每个报告均按“TEXTSTART[UNIQUE-ID]”和“TEXTEND”划分。

到目前为止，我已经成功地使用以下代码从 txt 文件中读取了一个报告（即标识符之间的文本）：

```
f = open("samples_combined_incomplete.txt","r" )
report = f.read()
f.close()

rstart = "TEXTSTART"
rend = "TEXTEND"

a = ((report.split(rstart))[1].split(rend)[0])
print (a) 
```

我的问题是这个；如何根据 TEXTSTART[UNIQUE-ID] 将文本文档划分为唯一可识别的子字符串？以及应该如何返回ID？

我才刚刚开始，所以任何关于文档、有用功能等的建议都会非常有用。

* * *

谢谢你，就像一个魅力！ID 是数字和字符的组合，仅供参考。

```
f = open("samples_combined_incomplete.txt","r" )
report = f.read()
f.close()

rstart = "TEXTSTART"
rend = "TEXTEND"
a = 0

dict = re.findall('TEXTSTART\[(.*?)\](.*?)TEXTEND', report, re.DOTALL)

while a < 10:
    print (dict[a])
    a += 1 
```

如果我想在容器中搜索特定关键字并返回键，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T15:52:52.950

```
import re
print dict(re.findall('TEXTSTART\[([^\]]+)\](.*?)TEXTEND', report, re.DOTALL)) 
```

# c++ - 如何创建联合类结构？

> ID：13788953
> 
> 赞同：0
> 
> 时间：2012-12-09T15:47:00.547
> 
> 标签：c++, class, boost

假设 A 类有方法`do();`，B 类有字段`data;`。我想知道是否有办法（例如使用 Boost）从 A 和 B 创建一个具有方法`do()`和字段的类联合`data`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:52:11.483

union 在 c 和 c++ 中有特定的含义，并不是你想要的。听起来你想要的是多重继承，一个`C`继承自`A`和的类`B`。或者，您也可以拥有一个`C`包含类实例的类`A`和`B`. 通常组合（“has-a”）优于继承（“is-a”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T15:48:37.487

做梦都别想。这将需要反射，这在 C++ 语言中目前不存在，即使它确实存在，任何人都不太可能实现这样的事情，因为你为什么要这样做。你能得到的最接近的是如果你从两个类继承。

# java - Specify timezone and method name in pattern-formatter for logging in JBoss AS7

> ID：13788957
> 
> 赞同：2
> 
> 时间：2012-12-09T15:47:32.087
> 
> 标签：java, logging, jboss7.x, pattern-layout

How can I specify IST Timezone and the method name in the pattern-formatter of JBoss AS7 logging subsystem? I found that we can specify the UTC timezone as:

```
<pattern-formatter pattern="%z{utc}%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c] %s%E%n"/> 
```

But what about IST(Indian Standard Time, GMT+5.30) and the method name?

I have tried to use `{ist}` in place of `{utc}` for testing purpose, but that didn't work. When I have specified `{ist}` it is taking UTC time.

# php - Redirect to a URL, once the page is created

> ID：13788958
> 
> 赞同：2
> 
> 时间：2012-12-09T15:47:35.617
> 
> 标签：php, redirect

I want to present the user with a holding page that is replaced with the index.html page of a new website once the website has been created.

At the moment, I can only do it by having a timed refresh.

```
<?php
//DB connection and posting 

$location="http://" . $id;
header("refresh: 240; url=$location");
?>

<?
ob_start(); 
?> 

..... HTML code of holding page

<? 
echo ob_get_clean();
?> 
```

Slightly out of my depth with this but have tried putting the holding page code at the beginning of the code and then inserting the following code at the end to validate the index.html file. But no luck . Any help much appreciated

```
<?
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $location);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_NOBODY, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_MAXREDIRS, 10);

start:
$retcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch);

if ($retcode == "200")
    {
     header("url=$location");
    }   
else
    {
        sleep(5);
    goto start;
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:58:54.977

代替

```
if ($retcode == "200")
    {
     header("url=$location");
    } 
```

尝试使用

```
if ($retcode == "200")
    {
     echo '<META HTTP-EQUIV="refresh" CONTENT="0;URL='.$location.'">';
    } 
```

它将进行客户端重定向。我想这会对你有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T15:53:45.337

我怀疑是否有一个干净纯粹的 html 解决方案。

您应该为此使用客户端脚本：您嵌入了一个小的 javascript 函数，该函数可以定期轮询服务器，或者（首选）使用长轮询策略来确定 html 页面是否已经存在。如果结果是肯定的，它会重定向浏览器。

# mysql - SQL：要合并的两个不同查询

> ID：13788961
> 
> 赞同：1
> 
> 时间：2012-12-09T15:47:49.997
> 
> 标签：mysql

我有这两个不同的查询。

此查询根据回复计数器从“posts”表中提取记录。此查询仅返回带有回复的帖子：

```
SELECT posts.title, posts.num, posts.status, COUNT( posts_replies.post_num)  AS count
FROM posts_replies
INNER JOIN posts ON ( posts_replies.post_num = posts.num )
WHERE posts.status = 1
AND posts.category='uncategorized'
GROUP BY posts.num 
```

这是一个新查询，我想与上述查询合并，以根据 gps 提取和排序记录。

```
SELECT num, title, ( 3959 * acos( cos( radians( 37 ) ) * cos( radians( lat ) ) * cos( radians( lon ) - radians( -122 ) ) + sin( radians( 37 ) ) * sin( radians( lat ) ) ) ) AS distance
FROM posts
HAVING distance <75
ORDER BY distance 
```

此查询使用 lat 和 long 列来返回用户 75 英里半径内的记录。

我不是 sql 专家，不知道如何合并两个查询以收集具有以下条件的结果：

1.  仅返回带有回复的帖子
2.  按距离排序
3.  按回复数排序

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T15:55:54.803

第二个查询中的`having`子句看起来不正确。在大多数 SQL 方言中，如果没有`group by`. 我忘记了 MySQL t 是否隐式将整个查询视为聚合（返回一行），或者是否将其`having`转换为`where`. 无论哪种情况，您都应该明确并`where`在没有聚合时使用。

您可以通过放入`where`子句来组合它们。我会用子查询来做，以使变量定义更清晰：

```
 SELECT p.title, p.num, p.status, p.distance,
             COUNT( p_replies.post_num)  AS count
      FROM posts_replies pr  INNER JOIN
           (select p.*,
                   ( 3959 * acos( cos( radians( 37 ) ) * cos( radians( lat ) ) * cos( radians( lon ) - radians( -122 ) ) + sin( radians( 37 ) ) * sin( radians( lat ) ) ) ) AS distance
            from posts p
           ) p
           ON pr.post_num = p.num
      WHERE p.status = 1 AND
            p.category='uncategorized' and
            distance < 75
      GROUP BY p.num
      order by distance 
```

# c++ - 高效搜索大字符串数据库中的部分匹配

> ID：13788962
> 
> 赞同：3
> 
> 时间：2012-12-09T15:47:57.533
> 
> 标签：c++, database, algorithm, search

我想创建一个图书馆书名数据库，可以有效地搜索子字符串匹配。也就是说，如果我搜索“Programming”，那么将返回所有包含“programming”一词的书名。该数据库可以进行预处理，并将完全存储在内存中。

什么是有效的数据结构和搜索算法来解决这个问题？我想完全用 C++ 实现它，所以请不要使用 3rd 方库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T15:52:01.077

[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)是一种高效的子串搜索数据结构。

这个想法是：
创建你的后缀树数据结构，并从每个叶子连接到与这个后缀代表的书相关的条目。
在查询时 - 使用子字符串遍历树 - 并从您到达的终点（最长匹配） - 进行一些遍历（例如[DFS](http://en.wikipedia.org/wiki/Depth-first_search)）并检索与查询作为前缀的所有后缀相关的所有条目。

* * *

当然，如果您只想要单词而不是所有子字符串，则映射（基于树/哈希）可能就足够了，并且更容易实现和使用（`map<string,list<book> >`例如，类型应该是基于树的方法，它会映射从每个单词到包含标题中包含该单词的所有书籍的列表）。
您还可以使用[trie](http://en.wikipedia.org/wiki/Trie)来实现地图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T16:48:53.187

对于子字符串匹配，有一个简单的方案：将完整标题拆分为“块”并以下列方式创建数据库：

*   每本书都有唯一标识（ID/指针）
*   每个“块”指向一组书籍标识符

当用户查询系统时，以相同的方式将她的请求分成块以识别匹配的书籍。

通过这个简单的方案，您有 2 个功能定制点：如何派生块以及如何对书籍进行排名；和 1 点技术定制：如何“合并/加入”不同匹配块的集合，这取决于您想要对书籍进行排名的方式。

> 如何派生块？

一种简单（但有效）的方法是在单词边界上拆分：`The C++ Programming Language`变成`{the, c++, programming, language}`.

注意：通常，有些词会被忽略（列入黑名单）。例如，`The`可能出现在 80% 的标题中，因此大多数时候考虑它是没有用的。

注意：搜索可能不区分大小写。

> 如何对书籍进行排名？

一个简单的算法是返回所有匹配项。更好的方法是根据查询中与该 ID 匹配的块数对它们进行排名。一个更好的方法是对那些单词以与查询相同的顺序出现的标题（最长的子匹配）排名更高。当然，您也许应该考虑*同义词*。

排名可能是系统的核心，谷歌很受欢迎，因为它的排名算法运行良好，这意味着如果找到你想要的。

> 如何实现合并/加入？

除非您只想返回与原始查询中的*所有*块匹配的搜索结果（这很有用，但由于同义词而烦人），否则您应该保留有序集并为每个块构建它们的交集：

*   `chunk1`：`{B1, B2, B7, B9, B15}`
*   `chunk2`：`{B1, B7, B8, B13, B15}`
*   `chunk3`：`{B1, B3, B4, B7, B9, B12, B13, B14, B15}`

`chunk1`然后，与和的集合相交`chunk2`，导致`{B1, B7, B15}`与 相交`chunk3`（这不会改变任何东西）。

注意：从较小的集合开始可以让您保留较小的中间结果，从而加快结果。

注意：当一个小集合与一个更大的集合相交时，大集合的线性游走可能比二分搜索慢得多。

另一方面，如果您想对搜索结果进行排名，那么您可能需要保留地图 ID -> 分数作为中间结果。该映射可能是二叉搜索树或哈希映射（后者对于非常大的集合更快，但对于小型集合通常有一些开销）。

请注意，这个排名的东西通常很慢，但很容易并行化。这就是 Google 使用 MapReduce 所做的。

# javascript - SQL statement querying result which is within a time range

> ID：13788973
> 
> 赞同：0
> 
> 时间：2012-12-09T15:49:47.170
> 
> 标签：javascript, sql, node.js, postgresql

I want to do a sql statement which queries by timestamp using javascript.

Here is how i set my timestamp:

```
var startTime = new Date(year, month, day, 0, 0);
var endTime = new Date(year, month, day, 23, 59); 
```

My sql statement is:

```
'SELECT * FROM proximate.user WHERE join_timestamp >= $1 ' +
'AND join_timestamp<=$2 ORDER BY user_id ASC'; 
```

$1 is startTime and $2 is endTime. Given if the startTime is `Sat Dec 01 2012 00:00:00 GMT+0800 (SGT)` and endTime is `Sat Dec 01 2012 23:59:00 GMT+0800 (SGT)`, the executed statement returns results which include timestamp that is a day before the startTime.

Anyone has any idea why?

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:04:24.090

我的猜测是您收到了正确的结果，但忘记将返回的结果集的时间戳列转换为 GMT+8：“Sat Dec 01 2012 00:00:00 GMT+0800”= Fri Nov 30 16:00:00 UTC”。另一个选项 - 以 UTC 传递日期。实际上这取决于您想要获得什么：如果您需要在 12 月 1 日 GMT+8 加入的所有用户，则需要转换结果集，如果您需要在 12 月 1 日 UTC 加入的用户，则通过 UTC日期：“2012 年 12 月 1 日星期六 00:00:00 UTC”

# iphone - iPhone: Can't scroll over a UIWebView contained in a tableView

> ID：13788974
> 
> 赞同：1
> 
> 时间：2012-12-09T15:49:51.060
> 
> 标签：iphone, objective-c, uiwebview, ios6, scroll

I've seen many similar questions on the web, i've tried many approaches but none worked.

I have a UITableview which contains custom cells and some UIWebViews, the problems is that i can't scroll the UITableView if the scroll starts on the UIWebview.

The closest I got is by setting webView.userInteractionEnabled to NO but then I can't access the link anymore...

Do you have any idea or pointers on how to do it ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:54:23.400

利用 ：

```
webview.scrollView.setuserInteractionEnabled = NO 
```

反而。

# javascript - Javascript form summary page

> ID：13788975
> 
> 赞同：1
> 
> 时间：2012-12-09T15:49:53.147
> 
> 标签：javascript, html, forms

I have created a Javascript form with multiple functions, and I want to generate a summary page of all the values entered in the form after the submit button has been clicked. My question is how do I generate this summary page? (Please see my code below)

Thanks

```
<script type='text/javascript'>
function formValidator(){
  // Make quick references to our fields
  var firstname = document.getElementById('firstname');
  var lastname = document.getElementById('lastname');
  var addr = document.getElementById('addr');
  var pcode = document.getElementById('pcode');
  var course = document.getElementById('course');
  var username = document.getElementById('username');
  var email = document.getElementById('email');
  // Check each input in the order that it appears in the form!
  if(isAlphabet(firstname, "Please enter only letters for your name")){
    if(isAlphanumeric(addr, "Numbers and Letters Only for Address")){
      if(isNumeric(pcode, "Please enter a valid post code")){
        if(madeSelection(course, "Please Choose a Course")){
          if(lengthRestriction(username, 6, 8)){
            if(emailValidator(email, "Please enter a valid email address")){
              return true;
            }
          }
        }
      }
    }
  }
  return false;
}

function notEmpty(elem, helperMsg){
  if(elem.value.length == 0){
    alert(helperMsg);
    elem.focus(); // set the focus to this input
    return false;
  }
  return true;
}

function isNumeric(elem, helperMsg){
  var numericExpression = /^[0-9]+$/;
  if(elem.value.match(numericExpression)){
    return true;
  }else{
    alert(helperMsg);
    elem.focus();
    return false;
  }
}

function isAlphabet(elem, helperMsg){
  var alphaExp = /^[a-zA-Z]+$/;
  if(elem.value.match(alphaExp)){
    return true;
  }else{
    alert(helperMsg);
    elem.focus();
    return false;
  }
}

function isAlphanumeric(elem, helperMsg){
  var alphaExp = /^[0-9a-zA-Z]+$/;
  if(elem.value.match(alphaExp)){
    return true;
  }else{
    alert(helperMsg);
    elem.focus();
    return false;
  }
}

function lengthRestriction(elem, min, max){
  var uInput = elem.value;
  if(uInput.length >= min && uInput.length <= max){
    return true;
  }else{
    alert("Please enter between " +min+ " and " +max+ " characters");
    elem.focus();
    return false;
  }
}

function madeSelection(elem, helperMsg){
  if(elem.value == "Please Choose a Course"){
    alert(helperMsg);
    elem.focus();
    return false;
  }else{
    return true;
  }
}

function emailValidator(elem, helperMsg){
  var emailExp = /^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/;
  if(elem.value.match(emailExp)){
    return true;
  }else{
    alert(helperMsg);
    elem.focus();
    return false;
  }
}

</script>

<form name="javaform" action="javasummary.html" method="post" onsubmit="return formValidator();">
  <label>First Name:</label> <input type='text' id='firstname' size='50'/><br />
  <label>Last Name:</label> <input type='text' id='lastname' size='50'/><br />
  <label>Address:</label> <input type='text' id='addr' size='50' /><br />
  <label>Post Code:</label> <input type='text' id='pcode' size='50'/><br />
  <label>Course:</label> <select id='course'>
  <option>Please Choose a Course</option>
  <option>PHP | £500 | 18/02/2012</option>
  <option>CSS | £400 | 03/03/2011</option>  
  <option>HTML | £550 | 04/02/2012</option>
  <option>FLASH(NEW) | £1220 | 25/12/2012</option>
</select><br />
  <label>Username(6-8 characters):</label>
  <input type='text' id='username' size='50'/><br />
  <label>Email:</label>
  <input type='text' id='email' size='50'/><br />
  <input type='submit' value='Submit'>
</form> 
```

# ios - 从数组中为自定义 UITableViewCell 设置文本

> ID：13788976
> 
> 赞同：1
> 
> 时间：2012-12-09T15:50:00.950
> 
> 标签：ios, cocoa-touch, uitableview

目前我使用这种方法填充我的单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    // builds the settingsView tableView
    if (menuList) {
        static NSString *cellIdentifier = @"coachingCell";

        UITableViewCell *cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
        if (!contentLoaded) {
            numberOfCells = 0;
        }
        if (contentLoaded) {
            [cell.textLabel setText:[names objectAtIndex:numberOfCells]];
            NSLog(@"Entries: %@", [names objectAtIndex:numberOfCells]);
            if (numberOfCells == [names count]) {
                numberOfCells = 0;
            }
        numberOfCells ++;
        }
        //add a switch
        coachingSwitch = [[UISwitch alloc] initWithFrame:CGRectZero];
        cell.accessoryView = coachingSwitch;
        [coachingSwitch setOn:YES];

        return cell;
    }
    ... 
```

但是，如果我将全部滚动到底部，然后将一个对象滚动到顶部，则会出现错误。那是因为我在柜台上填满了单元格：`numberOfCells`。

现在我的问题是：我该如何解决这个问题才能真正迭代我的数组以获得正确的`indexPath.section`和`indexPath.row`？

该`names`数组包含：

```
2012-12-09 16:34:22.373 Test[18817:c07] Entries: Mein Bauchumfang
2012-12-09 16:34:22.375 Test[18817:c07] Entries: Mein Gewicht
2012-12-09 16:34:22.375 Test[18817:c07] Entries: Mein Entspannungsniveau
2012-12-09 16:34:22.376 Test[18817:c07] Entries: Häufigkeit der Entspannungsmomente
2012-12-09 16:34:22.377 Test[18817:c07] Entries: Rauchverhalten
2012-12-09 16:34:22.378 Test[18817:c07] Entries: Verlangen nach einer Zigarette
2012-12-09 16:34:22.378 Test[18817:c07] Entries: Systolischer Wert
2012-12-09 16:34:22.379 Test[18817:c07] Entries: Diastolischer Wert
2012-12-09 16:34:23.713 Test[18817:c07] Entries: Meine bewusste Ernährung mit Diabetes
2012-12-09 16:34:23.964 Test[18817:c07] Entries: Meine Blutzucker-Werte
2012-12-09 16:34:25.384 Test[18817:c07] Entries: Mein Befinden
2012-12-09 16:34:25.584 Test[18817:c07] Entries: Meine Aktivitäten 
```

这是我也可以使用的多维数组：

```
2012-12-09 17:23:06.891 stuff[19161:c07] ArrayList: (
    {
    "Bauchumfang & Gewicht" =         (
        "Mein Bauchumfang",
        "Mein Gewicht"
    );
    "Blutdruck & Puls" =         (
        "Systolischer Wert",
        "Diastolischer Wert"
    );
    "Blutzucker & Diabetes" =         (
        "Meine bewusste Ern\U00e4hrung mit Diabetes",
        "Meine Blutzucker-Werte"
    );
    "Mein Rauchverhalten" =         (
        Rauchverhalten,
        "Verlangen nach einer Zigarette"
    );
    "Meine Stimmung" =         (
        "Mein Befinden",
        "Meine Aktivit\U00e4ten"
    );
    "R\U00fccken & Bewegung" =         (
        "Umsetzung meiner R\U00fccken\U00fcbungen",
        "Das Befinden meines R\U00fcckens",
        "Meine sportlichen Aktivit\U00e4ten"
    );
    Schlafrhythmus =         (
        "Meine Schlafqualit\U00e4t",
        "Mein Energieniveau"
    );
    "Schrittz\U00e4hler" =         (
        "Meine Schritte"
    );
    "Stress & Entspannung" =         (
        "Mein Entspannungsniveau",
        "H\U00e4ufigkeit der Entspannungsmomente"
    );
}
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T16:04:43.887

为什么不直接使用 indexPath.row 而不是 numberOfCells：

```
[cell.textLabel setText:[names objectAtIndex:indexPath.row]]; 
```

编辑：

您可以使用以下方法获得合适的数组索引：

```
int rowsUntilHere=indexPath.row;
 for (int i=0;i<indexPath.section;i++){
   rowsUntilHere+=[tableView numberOfRowsInSection:i];
   //rowsUntilNow++; //If the array contains the section titles too
 }

 [cell.textLabel setText:[names objectAtIndex:rowsUntilHere]]; 
```

希望这可以帮助

霍夫·达斯·希尔夫特

# php - Composer phar package not found

> ID：13788977
> 
> 赞同：2
> 
> 时间：2012-12-09T15:50:09.500
> 
> 标签：php, composer-php

I am trying to create a new composer library package. I created the composer.json file using the

`composer.phar create-project xlix vendor/xlix/xlix 0.3`

command.

In the filesystem the file composer.json exists under `vendor/xlix/xlix` and for testing purposes I copied it to `vendor/xlix`.

The composer.json file content is the following:

```
{
    "name": "xlix/xlix",
    "type": "library",
    "description": "XLIX package",
    "keywords": ["core"],
    "homepage": "http://myhomepage",
    "license": "GPL",
    "authors": [
        {
            "name": "Florian Kasper",
            "email": "florian.kasper@mymail"
        }
    ],
    "require": {
        "php": ">=5.2.4"
    },
    "autoload": {
        "psr-0" : {
            "Xlix\\Bundle" : "lib/"
        }
    },
    "extra": {
        "branch-alias": {
            "dev-master": "1.0"
        }
    }
} 
```

Then I tried the following commands:

```
git:(master) ✗  php composer.phar require xlix/xlix
git:(master) ✗  php composer.phat require vendor/xlix
...

git:(master) ✗  php composer.phar install vendor/xlix
git:(master) ✗  php composer.phar install xlix/xlix
... 
```

Every time the same output:

```
Please provide a version constraint for the xlix/xlix requirement: *
composer.json has been updated
Loading composer repositories with package information
Updating dependencies
Your requirements could not be resolved to an installable set of packages.

  Problem 1
    - The requested package xlix/xlix could not be found in any version, there may be a typo in the package name.

Potential causes:
 - A typo in the package name
 - The package is not available in a stable-enough version according to your minimum-stability setting
   see <https://groups.google.com/d/topic/composer-dev/_g3ASeIFlrc/discussion> for more details. 
```

In my **ROOTDIR/composer.json** file the package is registered in the require section.

```
"jms/security-extra-bundle": "1.2.*",
"jms/di-extra-bundle": "1.1.*",
"kriswallsmith/assetic": "1.1.*@dev",
"xlix/xlix": ">=0.*" 
```

Now I am on the edge of despair an don't know what to do anymore.

Question:

Are there any mistakes I've made or is there anything i missed?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T19:23:01.140

软件包存在于互联网上，而不是您的文件系统上。

默认情况下，Composer 会搜索一个`xlix/xlix`在[packagist](https://packagist.org/)上调用[但不存在](https://packagist.org/search/?q=xlix%2Fxlix)的包。您可以使用`repositories`配置添加更多包存储库，更多信息[请参阅文档](http://getcomposer.org/doc/04-schema.md#repositories)。

因此，为了要求您的包带有作曲家，您需要在`xlix`某处上传您的目录。

* * *

我没有看到您在`lxix`目录中尝试做什么？您在`lxix`包中，为什么要在同一个包中要求它？看起来您不了解这些命令的作用以及作曲家的工作原理。也许好好阅读他们自己的文档——或者其他一些关于 Composer 的教程（比如[nettuts+](http://net.tutsplus.com/tutorials/php/easy-package-management-with-composer/)上的那个）——会帮助你更好地理解 composer。

# java - AJAX Play Framework

> ID：13788978
> 
> 赞同：0
> 
> 时间：2012-12-09T15:50:18.267
> 
> 标签：java, javascript, ajax, playframework, playframework-1.x

> **Possible Duplicate:**
> [Play! Framework: Best practice to use URLs in separate JavaScript files?](https://stackoverflow.com/questions/4209420/play-framework-best-practice-to-use-urls-in-separate-javascript-files)

we are able to insert successfully values in database with this code:

```
$.ajax({type: "POST", url: "@{Receipes.add('nameIng','quantity')}", 
```

but not with the parameters like:

$.ajax({type:

```
"POST", url: "@{Receipes.add(':nameIng',':quantity')}",
                    data: {nameIng: "Potato", quantity: "2" } }); 
```

any clues?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:25:41.373

您正在寻找的是[jsAction](http://www.playframework.org/documentation/1.2.5/tags#jsaction)模板标签。在你的情况下，它可以这样使用：

```
var addReceipeAction = #{jsAction @Receipes.add(':nameIng', ':quantity') /};
$.ajax({type: "POST", url: addReceipeAction({nameIng: "Potato", quantity: 2})}); 
```

# uikit - Strange bug in cocos2d-x

> ID：13788979
> 
> 赞同：0
> 
> 时间：2012-12-09T15:50:20.623
> 
> 标签：uikit, cocos2d-x

I have found one bug that causes the cocos2d view to stop rendering its contents. The bug can be reproduced using the example project found in Jpsarda's post about integration between UIKit and cocos2d-x. The link to the website is: [http://jpsarda.tumblr.com/post/24983791554/mixing-cocos2d-x-uikit](http://jpsarda.tumblr.com/post/24983791554/mixing-cocos2d-x-uikit) and the link to the project is: [http://dl.dropbox.com/u/12856650/Cocos2dxOnUikit.zip](http://dl.dropbox.com/u/12856650/Cocos2dxOnUikit.zip).

To reproduce the bug it is sufficient to trigger several times between uikit views and cocos2d views by pressing repeatedly the "Cocos2d-x GO!" button on the first view followed by the "Close" button on the second view. I have also done a video that shows how to reproduce the bug: [http://youtu.be/EIvf-Ao6u5I](http://youtu.be/EIvf-Ao6u5I). The bug occurs only on a real device and not on the simulator. Because of this bug it is pretty difficult to create applications that allow the user to switch frequently between cocos2d views and uikit views such the one on which I am working. For the moment I can't understand the root cause and I haven't received a reply on the forum yet. Is there anyone that have an idea/intution/suggestion about the possible cause?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:19:49.540

我找到了原因。EAGLView 永远不会被释放，这会导致资源泄漏。要解决 JPSARDA 示例中的错误，添加以下行就足够了：

[[EAGLView sharedEGLView] 发布];

在 CCEGELView::release 方法的末尾。这将解决 JPSARDA（和我的应用程序：D）的问题，但该解决方案可能不适用于以不同方式处理 EAGLView 生命周期的项目

# java - Character higher than "s" cant be encrypted?

> ID：13788981
> 
> 赞同：4
> 
> 时间：2012-12-09T15:50:34.233
> 
> 标签：java, encryption

I made simple encryption and decryption methods by following this video: [http://www.youtube.com/watch?v=8AID7DKhSoM&feature=g-hist](http://www.youtube.com/watch?v=8AID7DKhSoM&feature=g-hist) however when its implemented in my program any character higher than "s" is encrypted to a "?" and then decrypted to a 3\. It doesn't seem to happen in the tutorial however even though some of his characters get increased by large numbers. So why does this happen? Btw here's the relevant part of my program:

```
public class crypt {
public String encrypt(String pass){
        String cryppass_string="";
        int l= pass.length();
        char ch;
        for (int i=0; i<l; i++){
            ch= pass.charAt(i);
            ch+= 12;
            cryppass_string+= ch;
        }
        return cryppass_string;
    }

    public String decrypt (String cryppass_string){
        String pass_string= "";
        int l= cryppass_string.length();
        char ch;
        for (int i=0; i<l; i++){
            ch= cryppass_string.charAt(i);
            ch-= 12;
            pass_string += ch;              
        }
        return pass_string;
    }
} 
```

Here's an example : a password ("astu") needs to be encrypted so its entered, this is done:

```
 char[] newpass= newPassField.getPassword();
        char[] repass= rePassField.getPassword();
        if(Arrays.equals( newpass , repass ))
        {
            if(number==1)
            {

            Login_info.McIntosh_custom_pwd= fileob.string_to_char(cryptob.encrypt(fileob.char_to_string(newpass)));
            fileob.evr_tofile();
            } 
```

In another class McIntoshcrypted is declared as:

```
McIntosh_custom_pwd= fileob.string_to_char(cryptob.decrypt(FileData[0])); 
```

fileob is an object of class Files

cryptob is an object of class crypt

```
public class Files {

File f= new File("Eng Dept.txt");
public Formatter x;

public void openfile(){ 
try{
    x= new Formatter ("Eng Dept.txt");

}
catch (Exception error){
    System.out.println("error");
}
    }

public void writing(String towrite){
try{    
String filename= "Eng Dept.txt";
String newLine = System.getProperty("line.separator");
FileWriter fw = new FileWriter(filename,true);
fw.write(towrite);
fw.write(newLine);
fw.close();
    }
catch (Exception eror){
    System.out.println("error");
                        }
}

public String reading_string(int linenum){
    String readline= "";
    String filename= "Eng Dept.txt";
    int lineno;
    try{
        FileReader fr= new FileReader(filename);
        BufferedReader br= new BufferedReader(fr); 
        for (lineno=1; lineno<= 1000; lineno++){
                if(lineno== linenum){
                    readline= br.readLine();
                                    }
                else 
                    br.readLine();
                                            }
        br.close();
        }
        catch (Exception eror){
            System.out.println("error");    
    }
    return readline;
}

public String char_to_string(char[] toconv){
    int l= toconv.length;
    String converted= "";
    for (int i=0; i<l; i++)
    {
        converted+= toconv[i];
    }
    return converted;
}

public char[] string_to_char(String toconv){
    int l= toconv.length();
    char[] converted = new char[l];
    for (int i= 0; i<l; i++)
    {
        converted[i]=toconv.charAt(i);
    }
    return converted;
}

public void evr_tofile()
{
    f.delete();
    openfile();
    writing(char_to_string(Login_info.McIntosh_custom_pwd));

     } 
```

In the txt file "as??" is seen, and the result of

```
System.out.print(Login_info.McIntosh_custom_pwd); 
```

is "as33". Hope I explained this correctly...

edit: tried solution

```
public String encrypt(String pass){
        String cryppass_string="";
        int l= pass.length();
        int x=0;
        char ch;
        for (int i=0; i<l; i++){
            ch= pass.charAt(i);
            x= ((ch - 32) + 12) % 126 + 32;
            ch = (char)x;
            cryppass_string+= ch;
        }
        return cryppass_string;
    }

    public String decrypt (String cryppass_string){
        String pass_string= "";
        int l= cryppass_string.length();
        int x=0;
        char ch;
        for (int i=0; i<l; i++){
            ch= cryppass_string.charAt(i);
            x= ch-32;
            ch= (char)x;
            if (ch < 0)
                x= ch+126;
            ch= (char)x;
            x= ch-12+32;
            ch= (char)x;
            pass_string += ch;              
        }
        return pass_string;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:00:23.663

我猜您使用将不可打印字符转换为 的操作将值输出到文本文件（网页？）`?`，然后当您读回它时会发生解密问题。如果您想做类似的事情，您您需要将加密限制为仅输出可打印字符。一种方法是使用模运算来确保您的加密字符在可打印集（ASCII 32 到 ASCII 126）内。如果您读/写二进制文件，您拥有的代码将正确转换，但如果您将其输出为 ASCII 文本，则不会。

加密

```
ch = (char)((ch - 32) + 12) % 126 + 32; // extended expression to show rebasing/modulus 
```

解密

```
ch = ch - 32;
if (ch < 0) ch = ch + 126;
ch = ch - 12 + 32; 
```

# android - How to drag an item in a GridView and drop to another item?

> ID：13788984
> 
> 赞同：1
> 
> 时间：2012-12-09T15:50:56.363
> 
> 标签：android, gridview, drag-and-drop

I have a gridview. I want to drag an item that contains textview and drop to another item. and on drop their text will swap.

The dragged text will be transferred to the item where the text is dropped and the text where the item is dropped will be transferred to the item where the text is dragged.

```
droppeditemtext = draggeditemtext

draggeditemtext = droppeditemtext 
```

Can somebody help me on how to do this or provide simple explanation on how to use drag and drop?

I saw some tutorials but they are complicated and hard for me to understand.

# qt4 - Landscape mode broken, incorrect displayed

> ID：13788988
> 
> 赞同：3
> 
> 时间：2012-12-09T15:51:03.410
> 
> 标签：qt4, symbian, qml, nokia

I picked up the development for an abandoned Qt app about a month ago. It's almost complete, but I'm facing one bug that I can't manage to fix. When I simulate the app, everything works fine, both portrait as landscape. However, when I install the app on my Nokia E7-00 running on nokia belle refresh (Qt 4.8), landscape mode breaks. Is there any solution to this? I found 1 topic that described similar problems, but didn't find a real solution in that one.

code concerning the QmlApplicationViewer in main.cpp:

```
QScopedPointer<QmlApplicationViewer> tQmlApplicationViewer(QmlApplicationViewer::create());
tQmlApplicationViewer->setResizeMode(QDeclarativeView::SizeRootObjectToView);

// Load the QML entrypoint
tQmlApplicationViewer->setMainQmlFile(QLatin1String("qml/BeTrains/main.qml"));

tQmlApplicationViewer->showFullScreen(); 
```

The code in main.qml

```
import QtQuick 1.1
import com.nokia.symbian 1.1
import com.nokia.extras 1.1
import "pages"
import "components"
import "js/utils.js" as Utils
import "js/storage.js" as Storage
import QtQuick 1.0

Window{
    id: window

    property string __schemaIdentification: "2"

    Component.onCompleted: {
        Storage.initialize()
    }

    //
    // Window structure
    //

    PageStackWindow {
        id: pagestackwindow1
        initialPage: mainPage
        showStatusBar: true
        showToolBar: true

        onRotationChanged: console.log("rotated!")
        Page {
            id: mainPage
           // orientationLock: PageOrientation.LockPortrait
            tools: toolBarLayout

             TabGroup {
                id: tabGroup
                currentTab: liveboardStack
                anchors.fill: parent

                PageStack {
                    id: liveboardStack
                    Component.onCompleted: liveboardStack.push(liveboardPage)
                }

                PageStack {
                    id: travelStack
                    Component.onCompleted: travelStack.push(travelPage)
                }

             }
        }

    }

    //
    // Toolbar
    //

    ToolBarLayout {
        id: toolBarLayout

        // Back buton
        ToolButton {
            property bool closeButton: tabGroup.currentTab.depth <= 1
            flat: true
            iconSource: closeButton ? "icons/close.svg" : "toolbar-back"
            onClicked: closeButton ? Qt.quit() : tabGroup.currentTab.pop();
        }

        // Tab bar

        ButtonRow {
            TabButton { id: tabBtnLiveboard; tab: liveboardStack; iconSource: "toolbar-list" }
            TabButton {id:tabBtnTravel;tab: travelStack; iconSource: "toolbar-search" }
        }

        // Menu
        ToolButton {
            iconSource: "toolbar-menu"
            onClicked: {
                if (!window.menu)
                    window.menu = Utils.loadObjectByComponent(menuComponent, window)
                window.menu.open()
            }
        }

    }

    //
    // Objects
    //

    // Statically loaded objects
    property variant liveboardPage: LiveboardPage {}
    property variant travelPage: TravelPage {}

    // Dynamically loaded objects
    property variant aboutDialog

    // In-line defined menu component
    property variant menu
    Component {
        id: menuComponent

        Menu {
            id: menu
            content: MenuLayout {
                // About
                MenuItem {
                    text: qsTr("About")
                    onClicked: {
                        if (!aboutDialog)
                            aboutDialog = Utils.loadObjectByPath("components/AboutDialog.qml", menu)
                        aboutDialog.open()
                    }
                }

                // Quit
                MenuItem {
                    text: qsTr("Quit")
                    onClicked: Qt.quit()
                }
            }
        }
    }

    Text {
        id: statustext
        x: 2
        y: 2
        width: 230
        height: 22
        color: "#ffffff"
        text: qsTr("BeTrains")
        font.pixelSize: 20
    }
} 
```

The last text object was for testing purposes, and it rotated as it should... Image that shows the problem:

(I can't embed the image, so here's the link: [http://i.stack.imgur.com/LXsxe.jpg](http://i.stack.imgur.com/LXsxe.jpg) )

The simulator result is on the left side, screenshots from my E7 on the right. The problem is circled in red.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:25:13.693

不知道是什么原因，但你的 main.qml 很奇怪...... PageStackWindow 已经是一个窗口，为什么你用另一个窗口包装它？尝试删除 Window 并将 PageStackWindow 用作 main.qm 中的顶层

（@Dickson 评论的答案）

# reporting-services - How to add time (data type) as parameter

> ID：13788989
> 
> 赞同：0
> 
> 时间：2012-12-09T15:51:19.267
> 
> 标签：reporting-services

I need to create a report that allows the user to give a date and time range for a report. I can set up the StartDate and EndDate (DateTime data type), but I can't seem to figure out how to add StartTime and EndTime.

This is a report where they want to view what was processed between a certain date *and time*. Is there anything that I can do so that the user can choose/enter a value for time in a report?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:21:02.637

正如@WillA 在评论中提到的，SSRS 中没有日期**+**时间选择器。但是，带有 DateTime 参数的日期选择器确实允许手动输入时间组件。

首先，如果您在选择器中仅选择一个日期，会发生以下情况：

![只选择一个日期](../Images/44b9dfd79fa707be4704dcf0da322e9f.png)

如果您在具有格式 string 的 TextBox 中呈现它`HH:mm:ss, MMM d `yy`，这将变为：

> 2012 年 12 月 9 日 00:00:00

但是，如果用户*手动*:'( 输入时间组件，*它将*起作用，例如

![也选择一个时间](../Images/5e0f134da39f81f0dad17f47b3c22118.png)

这将被渲染（使用相同的格式），如下所示：

> 2012 年 12 月 9 日 15:27:00

虽然这不是一个非常用户友好的解决方案。

# c++ - Updating a graph through C++ and GLUT

> ID：13788996
> 
> 赞同：3
> 
> 时间：2012-12-09T15:52:13.667
> 
> 标签：c++, xcode, glut

I have written a c++ program in Xcode to implement Symbolic Regression & Genetic Programming. I'd like to create a window to visualize the reference data (an array of 2d points) and the best function that the program generates each generation.

To put it simply, I'd like the window to show 2 graphs, and have it be updated with a for loop. From what I understand, GLUT seems like a good framework, and I've written a function to display the reference data (std::vector is how I'm storing the "referenceDataSet" variable):

```
void renderScene(){
    // The min/max variables are just for scaling & centering the graph
    double minX, maxX, minY, maxY;
    minX = referenceDataSet[0].first;
    maxX = referenceDataSet[0].first;
    minY = referenceDataSet[0].second;
    maxY = referenceDataSet[0].second;
    for (int i = 0; i < referenceDataSet.size(); i++) {
        minX = min(minX, referenceDataSet[i].first);
        maxX = max(maxX, referenceDataSet[i].first);
        minY = min(minY, referenceDataSet[i].second);
        maxY = max(maxY, referenceDataSet[i].second);
    }
    glLoadIdentity ();
    glClear(GL_COLOR_BUFFER_BIT);
    glBegin( GL_LINE_STRIP );
    glColor4f( 1.0, 0.0, 0.0, 1.0);
    for (int i = 0; i < referenceDataSet.size(); i++) {
        glVertex2f((referenceDataSet[i].first-minX)/(maxX-minX)-0.5, (referenceDataSet[i].second-minY)/(maxY-minY)-0.5);
    }
    glEnd();
    glFlush();
}

void renderInit(int argc, char **argv){
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);
    glutInitWindowSize(600, 600);
    glutCreateWindow("");
    glutDisplayFunc(renderScene);
    glutCheckLoop();
} 
```

The problem with this is that I'm not sure how I should go about updating the window, or drawing a second graph that constantly changes.

Also, this is my first question on Stack Overflow, so I apologize if I'm not doing something correctly here, or if any of this is difficult to understand. I searched as best I could for the answer, but couldn't really find anything relevant.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T15:58:44.123

在 glut 或 OpenGL 中，`glutIdleFunc(void (*func)(void))`用于更新场景。`glutDisplayFunc`每次场景刷新时，idle 函数都会调用。

参考在这里[http://www.opengl.org/resources/libraries/glut/spec3/node63.html](http://www.opengl.org/resources/libraries/glut/spec3/node63.html)

我猜`renderScene()`是你的`glutDisplayFunc`。并且您需要使用`glutIdleFunc`. 在空闲函数中，您可以更改不断变化的第二张图的参数，并`renderScene()`在空闲函数更改完成后再次调用。

# xaml - 控制出现在我的 WinRT pp 上的 AdDuplex 广告

> ID：13788998
> 
> 赞同：1
> 
> 时间：2012-12-09T15:52:30.670
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

我有一个 Windows 8 应用程序，并且已将 adduplex 与它集成。有没有办法控制 adduplex 在我的应用程序上投放的广告尺寸？目前我看到 300x250 弄乱了我的 UI

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:01:58.100

明白了，它使用 size 属性，例如 size="90x720" 就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:15:45.550

不确定 AdDuplex 是否使用 WebView 来展示广告，但如果没有，那么也许你可以将它放在 Viewbox 中以缩小它。

# java - 接收安卓短信

> ID：13788999
> 
> 赞同：0
> 
> 时间：2012-12-09T15:52:34.913
> 
> 标签：java, android, sms

我一直在尝试很多不同的方法来让这个演示运行，但我无法让它正常运行..

这是我的 Manifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.messagekeeper"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="9" />

<uses-permission android:name="android.permission.RECEIVE_SMS" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name="com.example.messagekeeper.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver android:name=".SmsReciever"> 
        <intent-filter> 
            <action android:name="android.provider.Telephony.SMS_RECEIVED" /> 
        </intent-filter> 
    </receiver> 

</application>

</manifest> 
```

这是我的 MainActivity 类（什么都不做）：

```
package com.example.messagekeeper;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

这是 SmsReciever 类：

```
package com.example.messagekeeper;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.telephony.SmsMessage;
import android.util.Log;

class SmsReciever extends BroadcastReceiver{
@Override
  public void onReceive(Context context, Intent intent){
    Object[] pdus=(Object[])intent.getExtras().get("pdus");
    SmsMessage shortMessage=SmsMessage.createFromPdu((byte[]) pdus[0]);

        Log.d("SMSReceiver","SMS message sender: "+
               shortMessage.getOriginatingAddress());
        Log.d("SMSReceiver","SMS message text: "+
               shortMessage.getDisplayMessageBody());

  }

} 
```

当我收到一条消息时，我希望它在我的应用程序上看到它。在这种情况下，我的意思是当我使用此代码并在模拟器上运行我的应用程序并从一个模拟器向另一个模拟器发送消息时，我的应用程序崩溃并且我收到此错误： http: [//puu.sh/1yZub](http://puu.sh/1yZub)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:08:29.337

如果您完全按原样复制代码，那么您可能只是缺少`public`开头的关键字。

改变`class SmsReciever extends BroadcastReceiver{`

至`public class SmsReciever extends BroadcastReceiver{`