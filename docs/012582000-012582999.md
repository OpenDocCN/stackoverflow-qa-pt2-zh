# StackOverflow 问答 12582000-12582999

# sql - 一个 Access SQL 查询中的多个 UPDATE

> ID：12582002
> 
> 赞同：5
> 
> 时间：2012-09-25T11:27:22.937
> 
> 标签：sql, ms-access, ms-access-2007

我正在尝试进行这样的查询：

```
UPDATE table1 SET col1 = 'foo', col2 = 'bar';
UPDATE table2 SET hi = 'bye', bye = 'hi'; 
```

但是当我去保存时，访问错误：

> SQL 语句结束后发现的字符

经过一番搜索，这似乎是因为 Access 一次只能执行一个查询。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T11:29:33.033

你在哪里工作？您可以在 VBA 中或通过宏运行多个查询。一些例子：

```
CurrentDB.Execute "UPDATE table1 SET col1 = 'foo', col2 = 'bar';", dbFailOnError
CurrentDB.Execute "UPDATE table2 SET hi = 'bye', bye = 'hi';", dbFailOnError 
```

已保存查询：

```
CurrentDb.Execute "Query5", dbFailOnError 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-16T13:21:46.397

我找到了这个样本：

[MS ACCESS 2007：使用另一个表中的值更新一个表中的值的更新查询](http://www.techonthenet.com/access/queries/update2_2007.php)

使用设计器轻松创建查询：

```
UPDATE Big INNER JOIN Bot ON Big.PART = Bot.PART
SET Bot.MFG = [Big].[MFG]; 
```

# javascript - 在页面加载时隐藏 ul

> ID：12582012
> 
> 赞同：0
> 
> 时间：2012-09-25T11:28:10.610
> 
> 标签：javascript, jquery, menu, hide

我想我的问题需要更多解释。我正在尝试让我的下拉菜单在 ipad 上正常运行。我有顶级菜单项和子菜单项。当我点击顶层时，子菜单会下拉，这是正确的。然后，当我从子菜单项中点击一个时，我的 html 页面会加载到我的 index.html (#!affordable-holidays.html) 中。问题是当 html 动态加载时，子级别下拉菜单不会消失。因此，一旦我点击了父项，子菜单就会永远存在。

我认为在动态加载的 html 顶部有一些 javascript 来隐藏 ul 会起作用。

我不确定页面如何加载的正确术语，因为这是购买的模板。例如，mysite.com 将是索引，然后当我转到另一个页面时，它是 mysite.com#!second-page.html

页面加载时如何在菜单中隐藏 ul？这是我的html

```
<li><a href="#">Tester</a>
    <ul class="menu-hide">
       <li ><a href="#!pay-as-you-go.html"><span class="title">PAY AS YOU GO</span></a></li>
       <li ><a href="#!affordable-holidays.html"><span class="title">AFFORDABLE HOLIDAYS ALWAYS</span></a></li>
       <li ><a href="#!how-points-work.html"><span class="title">HOW POINTS WORK</span></a></li>
       <li ><a href="#!more-than-a-room.html"><span class="title">MORE THAN A ROOM</span></a></li>
    </ul>
</li> 
```

这是我发现的接近我想要的javascript：

```
<script type="text/javascript">$("div.menu-hide").hide()</script> 
```

但我似乎无法定位 ul.menu-hide。我试过这个

```
<script type="text/javascript">$("ul.menu-hide").hide()</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:30:45.523

您似乎缺少您的 document.ready 电话

```
<script type="text/javascript">$(document).ready(function(){$("ul.menu-hide").hide()});</script> 
```

还要确保在您的其他 javascript**之前声明到您的 jQuery 库的链接**

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T11:29:38.440

尝试这个

```
<script type="text/javascript">
  $(window).load(function () {

   $("div.menu-hide").hide()
  })
</script> 
```

你也可以使用

```
 $(window).ready(function () {

       $("div.menu-hide").hide()
      }) 
```

但不同之处在于，即使尚未加载所有图形，当加载 HTML 文档并且 DOM 准备好时，文档就绪事件也会执行。

窗口加载事件在整个页面完全加载后执行，包括所有框架、对象和图像。

**好读**

[$(document).ready 与 $(window).load](http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T11:32:19.413

通过 JavaScript 在页面加载时隐藏 HTML 元素将导致该元素在显示然后隐藏时产生闪烁效果。

我会用你的 css 文件隐藏元素，然后通过 JavaScript 显示。

CSS代码：

```
.menu-hide{ display: none; } 
```

jQuery 显示代码：

```
$(function(){
    $('.menu-hide').show();
}); 
```

# c# - 如何以编程方式为 log4net 中的两个附加程序获取记录器？

> ID：12582014
> 
> 赞同：2
> 
> 时间：2012-09-25T11:28:35.710
> 
> 标签：c#, .net, log4net

> **可能重复：**
> [在每次应用程序启动时在代码滚动中配置 log4net RollingFileAppender](https://stackoverflow.com/questions/11801899/configure-log4net-rollingfileappender-in-code-rolling-once-per-application-start)

我正在创建两个附加程序，如下所示：

```
private RollingFileAppender GetNewFileApender()
{
  log4net.Appender.RollingFileAppender appender = new log4net.Appender.RollingFileAppender();
  appender.Name = _serviceName;
  appender.File = _configFileName;
  appender.AppendToFile = true;
  appender.MaxSizeRollBackups = 10;
  appender.MaximumFileSize = "10MB";
  appender.StaticLogFileName = true;
  appender.RollingStyle = RollingFileAppender.RollingMode.Size;
  appender.DatePattern = "yyyy.MM.dd";
  appender.Layout = new log4net.Layout.PatternLayout("%d %p %m%n");
  appender.ActivateOptions();
  return appender;
} 
```

它们在文件名日志文件方面都不同。现在我想为特定的 appender 获取 ILog。

一般来说，我希望有两个 ILog 类型的变量，这样我就可以在应用程序的任何地方写入特定的日志文件。

## 更新

这是我面临的问题的完整代码：

```
using System;
using System.Collections;
using log4net;
using log4net.Appender;
using log4net.Repository.Hierarchy;

namespace Log4netTest
{
  public class Logger4net 
  {
    private static ArrayList ServicesNames = new ArrayList();

    private ILog _logger;
    private string _serviceName;
    private string _configFileName;

    private Logger4net(string ServiceName)
    {
      if (ServicesNames.Contains(ServiceName))
        throw new Exception(string.Format("Service {0} exists", ServiceName));
      ServiceName = ServiceName.Trim();

      _serviceName = ServiceName;
      _configFileName = string.Format("{0}.log", _serviceName);
    }

    private RollingFileAppender GetNewFileApender()
    {
      log4net.Appender.RollingFileAppender appender = new log4net.Appender.RollingFileAppender();

      appender.Name = _serviceName;
      appender.File = _configFileName;
      appender.AppendToFile = true;
      appender.MaxSizeRollBackups = 10;
      appender.MaximumFileSize = "10MB";
      appender.StaticLogFileName = true;
      appender.RollingStyle = RollingFileAppender.RollingMode.Size;
      appender.DatePattern = "yyyy.MM.dd";

      var layout = new log4net.Layout.PatternLayout("%d %p %m%n");
      appender.Layout = layout;

      layout.ActivateOptions();
      appender.ActivateOptions();
      return appender;
    }

    public static Logger4net AddNewLogger4net(string ServiceName)
    {
      Logger4net result = new Logger4net(ServiceName);

      var newappender = result.GetNewFileApender();
      log4net.Config.BasicConfigurator.Configure(newappender);

      result._logger = log4net.LogManager.GetLogger(ServiceName);
      Logger l = (Logger)result._logger.Logger;
      l.AddAppender(newappender);

      return result;
    }

    public void AddInfo(string message)
    {
      _logger.Info(string.Format("{0}: {1}", _serviceName, message));
    }
  }

  class Program
  {
    static void Main(string[] args)
    {
      Logger4net log1 = Logger4net.AddNewLogger4net("Service1");
      Logger4net log2 = Logger4net.AddNewLogger4net("Service2");

      log1.AddInfo("Test 1");
      log2.AddInfo("Test 2");

      /*
      in Service1.log I have:
      2012-09-25 14:49:30,666 INFO Service1: Test 1
      2012-09-25 14:49:30,666 INFO Service1: Test 1
      2012-09-25 14:49:30,666 INFO Service2: Test 2

      in Service2.log I have:
      2012-09-25 14:49:30,666 INFO Service1: Test 1
      2012-09-25 14:49:30,666 INFO Service2: Test 2
      2012-09-25 14:49:30,666 INFO Service2: Test 2
       * 
       * i would like to have Test 1 in Service1.log and Test 2 in Service2.log 
      */
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:54:51.697

使用类的`GetLogger`方法`log4net.LogManager`来获取`ILog`指定记录器名称或类型作为输入参数的类型变量。例如，您可以使用以下代码创建 ILog 静态对象：

```
private static readonly ILog log = LogManager.GetLogger(loggerName) 
```

要使用特定的 appender，您必须创建特定的 logger 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:09:31.363

The problem I had solved by setting Additivity to false, that was the reason why appenders were generating mixed output.

# ruby-on-rails - 在警卫中跳过特定的 rspec 测试

> ID：12582021
> 
> 赞同：1
> 
> 时间：2012-09-25T11:28:58.720
> 
> 标签：ruby-on-rails, rspec, guard

我试图让警卫跳过一些测试（那些需要硒才能运行的测试）。我已经向它们添加了 browser_required 标记，并使用“--tag ~browser_required”运行 rspec 将它们过滤掉。

但是我不能让守卫不运行它们，我在守卫文件中设置了 :cli => "--tag ~browser_required" 。这是我的完整保护文件[http://pastebin.com/pGuWAQm8](http://pastebin.com/pGuWAQm8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:40:19.803

在您的要点中，它确实有两个 rspec 块（一个带有 cli，另一个没有）。也许删除第二个至少会让这个工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:30:46.887

检查我的配置：[https](https://github.com/lucassus/locomotive/blob/master/Guardfile) ://github.com/lucassus/locomotive/blob/master/Guardfile 您可以将 cli 参数传递给 rspec 命令，并使用`--filter`您可以拒绝某些规范的选项

`guard 'rspec', :version => 2, :cli => "--drb --color --tag ~slow:true" {}`

在您的示例中，您可以使用`--tag ~js:true`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-16T21:00:10.667

该`cli`选项在 Rspec 3 中已弃用。请`cmd`改用。例如：

```
guard :rspec, cmd: "bundle exec rspec --color --tag ~speed:slow", failed_mode: :focus do
  require "guard/rspec/dsl"
  dsl = Guard::RSpec::Dsl.new(self)

  # RSpec files
  rspec = dsl.rspec
  watch(rspec.spec_helper) { rspec.spec_dir }
  watch(rspec.spec_support) { rspec.spec_dir }
  watch(rspec.spec_files)

  watch(%r{\Aapp/(.+)\.rb\z})   { |m| "spec/#{m[1]}_spec.rb" }
end 
```

[在此处](https://relishapp.com/rspec/rspec-core/docs/command-line/tag-option)阅读有关 Rspec 标签的更多信息

# hibernate - 无法使用休眠从表中获取不同的值

> ID：12582022
> 
> 赞同：0
> 
> 时间：2012-09-25T11:28:58.580
> 
> 标签：hibernate

我想从表中获得不同的记录。但我总是只得到一个记录。这是我的代码片段，请建议。

select distinct * from employee where employee_id=23567-- 给我 3 条记录，但低于 hibernate 只给我 1 条记录..

```
Criteria crit = session.createCriteria(employee.class);
        crit.add(Restrictions.eq("employeeid", Long.valueOf(employeeId.substring(0,7))));
        crit.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY);
        employeeList= crit.list();
        System.out.println("size--->"+employeeList.size()); 
```

我在这里错过了什么吗？

# talend - talend - 丢失了几条未插入数据库的记录

> ID：12582024
> 
> 赞同：3
> 
> 时间：2012-09-25T11:29:16.940
> 
> 标签：talend

我对 talend 很陌生，两周以来我一直在努力解决这个问题

我需要诊断工作中发生的问题（见图）

当我执行我在屏幕上看到的作业时，它说有 1000 行已提交到数据库，但是当您转到数据库时，记录较少

有没有办法说明为什么提交给数据库的记录比屏幕上显示的要少？

![工作](../Images/f26a48d539697d1c8cad9e879d758ae1.png)

地图：

![地图](../Images/4133db39f9acf7d93074047ad460e90f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:26:12.383

与几位同事交谈后，我得到了一些有趣的答案。关于您的问题，您可以在 tMysqlOutput 之后添加拒绝链接以查看它是否有任何记录。

例如：tMysqlInput--main--tMap--out1--tMysqlOutput---reject--tLogRow

希望这可以帮助！数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-16T13:59:01.530

我认为您应该检查所有查找的 tMap 连接类型。通过更改查找类型，您将获得所需的输出。见附图。![在此处输入图像描述](../Images/10f40261c8fdaecbb7c9ddc1ebf1fb56.png)

# c# - 如何在 Visual Studio 测试运行程序中排除某些测试？

> ID：12582025
> 
> 赞同：34
> 
> 时间：2012-09-25T11:29:20.280
> 
> 标签：c#, visual-studio, unit-testing, visual-studio-2012

我在某些测试中具有理想情况下不想在每个构建上运行的属性。我的大多数测试都是普通的单元测试，我确实希望它们在每次构建时都运行。

**那么：如何按类别或项目类型排除测试？**

例如，我想排除`CodedUItests`：

```
[CodedUITest]
public class SearchViewTests 
```

...或排除给定的测试`TestCategory`：

```
[TestMethod]
[TestCategory("Database Integration")]
public void ContactRepositoryGetByIdWithIdExpectCorrectContact() 
```

我特别想排除编码的 UI 测试，因为它们会破坏我继续工作的能力，而所有其他测试都会在后台愉快地运行而不会打扰我。

最初这个问题是关于 Visual Studio 2012 的，所以我更喜欢在该版本及更高版本中工作的解决方案。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2014-10-29T10:53:04.920

**TL;DR 版本：**

![测试资源管理器显示 -Trait：](../Images/f7013eaeed9eab449342d88eaa7cb3b1.png)

其他答案评论了解决方法和使用更新的`Traits`选项。但是，没有一个完全告诉您如何专门**排除对 trait 的测试**。为此，只需使用`-`（减号）来否定搜索框中的过滤器，例如：

```
-Trait:"DatabaseIntegration" 
```

这将排除所有具有该特征的测试。有关这些功能的[MSDN 文档](http://msdn.microsoft.com/en-us/library/hh270865.aspx#BKMK_Search_and_filter_the_test_list)有以下解释：

> 要排除过滤器结果的子集，请使用以下语法：
> 
> `FilterName:"Criteria" -FilterName:"SubsetCriteria"`
> 
> 例如，
> 
> `FullName:"MyClass" - FullName:"PerfTest"`
> 
> 返回名称中包含“MyClass”的所有测试，但名称中还包含“PerfTest”的测试除外。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-03T08:43:37.043

我发现唯一可行的“解决方案”（或更好的解决方法）是指定一个“FullName”过滤器。基本上我通常像这样构建我的解决方案

*   项目A
*   ProjectA.UnitTests
*   ProjectA.IntegrationTests

等等。现在我可以在测试资源管理器中指定一个过滤器，`FullName: "UnitTests"`这似乎可以工作。
*（我希望能够在搜索名称中使用正则表达式，但似乎不受支持。）*

![在此处输入图像描述](../Images/8223db4795f7b48f00e7c384696ced8f.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-10T05:59:54.083

Visual Studio 2012 Update 1 CTP 在测试资源管理器中添加了对按项目和类别（特征）进行分组的支持。 [http://blogs.msdn.com/b/visualstudioalm/archive/2012/10/08/visual-studio-2012-update-1-ctp.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2012/10/08/visual-studio-2012-update-1-ctp.aspx) [http://go.microsoft.com/fwlink/?LinkId= 268021](http://go.microsoft.com/fwlink/?LinkId=268021)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-25T14:08:25.810

您可以使用单元文本资源管理器中的搜索过滤器。

![单元测试资源管理器](../Images/f208b351a3b6217e16d9d4d5d3b2d146.png)

在 2012 附带的新 Test Exlorer 中，您可以按“测试结果”、“文件名”等对测试进行分组，但在 RTM 构建组/按“TestCategory”搜索时，测试资源管理器中不存在。但是，在命令行和 TeamBuild 中有一个过滤器，基于 VS2012 中的 TestCategory（在 VS 2012 RC 中使用 TestCaseFilter 运行选择性单元测试）。

从 VS 开发团队的一名成员那里，他们了解了这个缺失功能​​的重要性。它在积压中，应该可以在未来的构建/更新中使用。

以下博客提供了更多详细信息：http: [//blogs.msdn.com/b/vikramagrawal/archive/2012/07/23/running-selective-unit-tests-in-vs-2012-rc-using-testcasefilter.aspx](http://blogs.msdn.com/b/vikramagrawal/archive/2012/07/23/running-selective-unit-tests-in-vs-2012-rc-using-testcasefilter.aspx)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-04T18:10:22.733

您可以在测试资源管理器上应用一个过滤器。特征：“UnitTest”此过滤器将仅拾取具有 TestCategory("UnitTest") 属性的测试，而忽略其他属性。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-07-15T13:19:45.690

聚会有点晚了我遇到了同样的问题，所有开发人员在解决方案中运行所有单元测试时都会遇到破坏性的 CodedUI。我的解决方法是将以下内容添加到 CodedUI 项目的 AssemblyInitializer 中：

```
 if(!ConfigurationManager.AppSettings["MachinesToRunCodedUI"].Split(',').Contains(Environment.MachineName))
        Assert.Inconclusive("CodedUI Tests are skipped."); 
```

只有当机器是该 MachinesToRunCodedUI 列表的一部分时，它才会运行 CodedUI 测试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-25T14:19:01.563

你看过这篇文章吗？ [如何：使用测试类别对自动化测试进行分组和运行](http://msdn.microsoft.com/en-us/library/dd286683%28v=vs.100%29.aspx)

我还没有在 VS 2012 上尝试过这个，但它仍然可能是有效的。据我所知，没有对 TFS 的引用，所以这应该指向普通的 VS 测试运行器。

# perl - 子程序/函数参数的数据类型？

> ID：12582028
> 
> 赞同：0
> 
> 时间：2012-09-25T11:29:22.620
> 
> 标签：perl

在 Perl 中，可以为子程序的参数指定数据类型吗？例如，在像 exit 这样的数字上下文中使用 dualvar 时：

```
use constant NOTIFY_DIE_MAIL_SEND_FAILED       => dualvar 3, 'NOTIFY_DIE_MAIL_SEND_FAILED';
exit NOTIFY_DIE_MAIL_SEND_FAILED; 
```

在这种情况下，Perl 如何知道 exit 需要一个数字参数？我没有看到像在 Java 中那样为子例程的参数定义数据类型的方法？（我可以理解数据类型是如何被明确定义的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:38:56.990

在 Perl 中，标量同时是数字和字符串。区分字符串和数字的不是变量本身，而是您使用的*运算符*。虽然加法`+`仅使用数字，但连接`.`仅使用字符串。

在更强类型的语言中，例如Java，加法运算符兼作加法和连接运算符，因为它可以访问类型信息。

`"1" + 2 + 3`在 Java 中仍然存在问题，而 Perl 可以清楚地区分`"1" + 2 + 3 == 6`和`"1" . 2 . 3 eq "123"`。

`0`您可以通过添加或连接空字符串来强制变量的数字或字符串上下文：

```
sub foo {
  my ($var) = @_;
  $var += 0;  # $var is numeric
  $var .= ""; # $var is stringy now
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T11:43:28.440

dualvar 的全部意义在于它根据您的需要表现为数字或文本。在不明显的情况下（对你来说比对 perl 更重要），然后说清楚。

```
exit 0 + NOTIFY_DIE_MAIL_SEND_FAILED; 
```

至于显式键入参数，这不是内置的。Perl 是一种比 Java 更加动态的语言，因此检查/强制每个参数或变量的类型并不常见。特别是，perl sub 可以接受不同数量的参数甚至不同的结构。

如果您想验证参数（例如对于外部 API），请尝试使用[Params::Validate](http://search.cpan.org/dist/Params-Validate/)

此外，[Moose](http://search.cpan.org/perldoc?Moose)和[Moo](http://search.cpan.org/perldoc?Moo)允许一定程度的属性类型甚至强制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T11:35:09.080

Perl 与 Java 的不同之处在于 -`Perl`是`dynamically typed`语言，因为它不需要在`compile time`. 处输入变量，而`Java`is `statically typed`（如您所知）

Perl 根据使用的变量确定变量的类型`context`。

只能有`two context`：-

*   列出上下文
*   标量上下文

上下文由使用的`operator`or定义`function`。

对于EG：-

```
# Define a list
@arr = qw/rohit jain/; 

# Define a scalar
$num = 2

# Here perl will evaluate @arr in scalar context and take its length..
# so, below code will evaluate to : - value = 2 / 2
$value = @arr / $num;

# Here since it is used with a foreach loop, @arr will be taken as in list context
foreach (@arr) {
    say $_;
}
# Above foreach loop will output: - `rohit` \n `jain` to the console.. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T11:44:57.707

您可以通过以下方式强制类型：

```
use Scalar::Util qw(dualvar);
use constant NOTIFY_DIE_MAIL_SEND_FAILED => dualvar 3, 'NOTIFY_DIE_MAIL_SEND_FAILED';
say NOTIFY_DIE_MAIL_SEND_FAILED;
say int(NOTIFY_DIE_MAIL_SEND_FAILED); 
```

**输出：**

```
NOTIFY_DIE_MAIL_SEND_FAILED
3 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T02:19:56.940

> 在这种情况下，Perl 如何知道 exit 需要一个数字参数？

**exit**期望一个数字作为其规范的一部分，如果您传递一个非整数值（即您不应该这样做），它的行为是一种未定义的。

**现在，在这种特殊情况下， dualvar**如何根据上下文返回任一值类型？

我不知道 Scalar::Util 的**dualvar**是如何实现的，但你可以用[**重载**](http://perldoc.perl.org/overload.html#fallback)来编写类似的东西。

您当然可以修改受祝福对象的行为：

```
#!/usr/bin/env perl

use strict;
use warnings;

{package Dualvar;

use overload
    fallback => 1,
    '0+' => sub { $_[0]->{INT_VAL} },
    '""' => sub { $_[0]->{STR_VAL} };

sub new {
  my $class = shift;
  my $self = { INT_VAL => shift, STR_VAL => shift };
  bless($self,$class);
}

1;
}

my $x = Dualvar->new(31,'Therty-One');

print $x . " + One = ",$x + 1,"\n";    # Therty-One + One = 32 
```

**从文档来看，重载**似乎实际上改变了声明范围内的行为，因此您应该能够在本地为任何操作数更改一些常用运算符的行为。

如果**exit**确实使用这些可重载操作之一将其参数评估为整数，那么此解决方案就可以了。

> 我没有看到像在 Java 中那样为子例程的参数定义数据类型的方法？

正如其他人已经说过的那样......在 Perl 中不是这种情况，至少在编译时不是这样，除了子例程[**原型**](http://docstore.mik.ua/orelly/perl4/prog/ch06_04.htm)，但这些没有提供太多的类型粒度（如 int 与字符串或不同的对象类）。

Richard 提到了一些您可以使用的运行时替代方案。如果您不介意性能损失，我个人会推荐**Moose 。**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T11:44:38.723

Rohit Jain 所说的是正确的。希望输入遵循某些规则的函数只需明确检查输入是否有效。

例如

```
sub foo 
{
    my ($param1,$param2) = shift;
    $param1 =~ /^\d+$/ or die "Parameter 1 must be a positive integer.";
    $param2 =~ /^(bar|baz)$/ or die "Parameter 2 must be either 'bar' or 'baz'";

    ...
} 
```

这可能看起来很痛苦，但是：

*   获得的额外灵活性通常超过了这样做所涉及的工作。
*   仅仅拥有正确的数据类型通常不足以确保您的输入有效，因此即使在 Java 这样的语言中，您最终还是会做很多这样的事情。

# asp.net-mvc - 从 mvc 控制器调用 REST 服务时出现 401 错误

> ID：12582038
> 
> 赞同：0
> 
> 时间：2012-09-25T11:29:42.467
> 
> 标签：asp.net-mvc, rest, credentials

我正在尝试向 REST 方法发出请求并接收 XML 中的数据，但这一切都很顺利，但是当我想为方法使用凭据时，因为对于这种方法，您需要提供凭据。

[https://handshake:16a144bc5f480692d5c8d926068d2db5@rest-api.pay.nl/v2/Transaction/getStatus/xml/?orderId=236750347X6d2ee7](https://handshake:16a144bc5f480692d5c8d926068d2db5@rest-api.pay.nl/v2/Transaction/getStatus/xml/?orderId=236750347X6d2ee7)

但是当我在浏览器中使用它时它可以工作，但这在我的控制器上不起作用。

```
 // 
    // GET: /Home/Succes
    public ActionResult Succes(string orderId)
    {
        string token = PaymentCalls.Login();
        ViewBag.Token = token;

        string _URL = "https://handshake:" + token + "@rest-api.pay.nl/v2/Transaction/getStatus/xml/?orderId=" + orderId;

        NetworkCredential cr = new NetworkCredential("handshake", token);

        XDocument doc = XDocument.Load(_URL);
        var output = from feed in doc.Descendants("data")
                     select new Status
                     {
                          amount = feed.Element("amount").Value,
                          consumerAccountNumber = feed.Element("consumerAccountNumber").Value,
                          consumerCity = feed.Element("consumerCity").Value,
                          consumerEmail = feed.Element("consumerEmail").Value,
                          consumerName = feed.Element("consumerName").Value,
                          consumerZipcode = feed.Element("consumerZipcode").Value,
                          countryCode = feed.Element("countrCode").Value,
                          entranceCode = feed.Element("entranceCode").Value,
                          ipAddress = feed.Element("ipAddress").Value,
                          orderId = feed.Element("orderId").Value,
                          statsAdded = feed.Element("statsAdded").Value,
                          paymentSessionId = feed.Element("paymentSessionId").Value,
                          result = feed.Element("result").Value,
                          statusAction = feed.Element("statusAction").Value
                     };

        return View(output); 
```

因此，当我们调用此控制器时，我们会收到 401 错误，但在浏览器中使用相同的 url 可以正常工作。所以我不知道，但我怎样才能设置通过凭据或其他东西？

# css - css page-break-before 属性仅适用于页面中的第一个表格元素（firefox）

> ID：12582039
> 
> 赞同：2
> 
> 时间：2012-09-25T11:29:45.343
> 
> 标签：css, printing, page-break

我想制作漂亮的大表格打印件，每个表格都有自己的 ID，并将每个表格放在一张新纸上。我将 css 样式 page-break-before 直接应用于样式表中的每个表 ID。

像这样的 HTML：

```
<table id="T1">...</table>
<table id="T2">...</table> 
```

像这样的CSS：

```
#div1 #div2 #T1, #div1 #div2 #T2, ... {diplay: inline; page-break-before: always;} 
```

这在 Chromium 中不起作用，在 Firefox 中，它只将分页符放在第一个元素上并忽略下表元素。该样式是“高度选择的”，作为萤火虫中的顶级属性。

我把“显示：内联；” 属性，因为我读到分页符属性不适用于绝对定位的元素，所以我对块显示也有疑问......

我真的想不通我做错了什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:15:16.257

根据此链接：

[https://developer.mozilla.org/en-US/docs/CSS/page-break-before](https://developer.mozilla.org/en-US/docs/CSS/page-break-before)

它仅适用于块元素。因此，您应该使用`display:block`或将显示值保留为自动，这将呈现为表格*（表格是块元素）*。`position:absolute`如果混合会起作用，我会感到非常惊讶`page-break-before`......所以我建议你尝试不使用绝对定位，看看会发生什么。

还有什么理由让您对选择器如此具体：

```
#div1 #div2 #T1, #div1 #div2 #T2, ... 
```

只是为了确保那里没有错误，最好只使用：

```
#T1, #T2, ... {} 
```

毕竟 ID 应该是唯一的。

另一方面，上面的链接说明了关于尝试使用`break-before`......你可以试试看它是否有帮助？

# c++ - 了解双重调度 C++

> ID：12582040
> 
> 赞同：18
> 
> 时间：2012-09-25T11:29:48.800
> 
> 标签：c++, double-dispatch

我试图了解双重调度是如何工作的。我创建了一个从抽象类 Creature 派生的怪物和战士可以战斗的示例。类 Creature 有方法“fight”，它在派生类中定义，并且在每个派生类中定义了如果战士与战士或怪物等战斗会发生什么。我编写了以下代码：

```
#include<iostream>
using namespace std;

class Monster;
class Warrior;

class Creature{
public:
    virtual void fight(Creature&) =0;
};

class Monster: public Creature{
    void fightwho(Warrior& w) {cout<<"Monster versus Warrior"<<endl; }
    void fightwho(Monster& m) {cout<<"Monster versus Monster"<<endl; }
public:
    void fight(Creature& c)  {c.fightwho(*this);}
};

class Warrior: public Creature{
    void fightwho(Warrior& w) {cout<<"Warrior versus Warrior"<<endl; }
    void fightwho(Monster& m) {cout<<"Monster versus Warrior"<<endl; }
public:
    void fight(Creature& c) {c.fightwho(*this);}
};

int main()
{
Warrior w;
Monster m;
w.fight(m);
} 
```

这会导致编译器错误，我预见到：

ex12_10.cpp：在成员函数'virtual void Monster::fight(Creature&)'中：ex12_10.cpp:17:30：错误：'class Creature'没有名为'fightwho'的成员

ex12_10.cpp：在成员函数'virtual void Warrior::fight(Creature&)'中：ex12_10.cpp:24:29：错误：'class Creature'没有名为'fightwho'的成员</p>

但我不知道如何从这里开始......请帮忙。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-25T11:34:19.490

好吧，很明显，你真的没有`fightwho`在你的`Creature`类中声明，所以你需要在那里声明它，并将它声明为`virtual`.

双重调度的工作方式是 for call （假设`Warrior& w = ...`，不是`Warrior w`）：

```
w.fight(m); 
```

首先虚拟机制将选择`Warrior::fight`代替，`Monster::fight`然后重载机制将选择`Monster::fightwho(Warrior& m)`代替`Warrior::fightwho(Warrior& m)`。请注意，如果您有以下内容会更有意义：

```
Warrior w;
Monster m;
Creature& c1 = w;
Creature& c2 = m;
c1.fight(c2); // not w.fight(m) 
```

因此，最终将被调用的方法将根据您调用它的对象的类型和作为参数发送的对象的类型进行分派，即*双重分派*

此外，请注意，这可能不是最好的示例，因为您的类型是同一层次结构的成员。访问者设计模式是在不支持它作为一等公民的语言中双重分派实现的一个很好的例子（即 C++ 和衍生品：Java、C#...）

正如@CrazyCasta 正确指出的那样，当您的类层次结构开始增长时，这种方法变得更加难以维护并且可能导致方法数量激增，因此请谨慎选择......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-17T06:06:10.250

我对上述答案的贡献是提供经过充分测试的示例，以阐明现实中的双重调度概念。如果您查看以下代码，您将找到**我如何自己实现**的答案。

```
#include <iostream>

using namespace std;

class A;
class A1;
class A2;
class B1;
class B2;

class B {
    public:
        // dispatcher function to A
        virtual void collide(const A& a) const = 0;

        // actual collision logic B with types of A
        virtual void collide(const A1& a) const = 0;
        virtual void collide(const A2& a) const = 0;
};

class A {
    public:
        // dispatcher function to B
        virtual void collide(const B& b) const = 0;

        // actual collision logic A with types of B
        virtual void collide(const B1& b) const = 0;
        virtual void collide(const B2& b) const = 0;
};

class A1 : public A {
    public:
        void collide(const B& b) const {
            // dispatch to b
            b.collide(*this);
        }
        void collide(const B1& b) const {
            cout << "collision with B1 and A1" << endl;
        }
        void collide(const B2& b) const {
            cout << "collision with B2 and A1" << endl;
        }
};

class A2 : public A {
    public:
        void collide(const B& b) const {
            // dispatch to a
            b.collide(*this);
        }
        void collide(const B1& b) const {
            cout << "collision with B1 and A2" << endl;
        }
        void collide(const B2& b) const {
            cout << "collision with B2 and A2" << endl;
        }
};

class B1 : public B {
    public:
        void collide(const A& b) const {
            b.collide(*this);
        }
        void collide(const A1& b) const {
            cout << "collision with A1 Bnd B1" << endl;
        }
        void collide(const A2& b) const {
            cout << "collision with A2 Bnd B1" << endl;
        }
};

class B2 : public B {
    public:
        void collide(const A& a) const {
            a.collide(*this);
        }
        void collide(const A1& a) const {
            cout << "collision with A1 Bnd B2" << endl;
        }
        void collide(const A2& a) const {
            cout << "collision with A2 Bnd B2" << endl;
        }
};

int main() {

    A* a = new A1();
    B* b = new B2();

    // first dispatch is done by polymorphism ( a is resolved as a A1 )
    // second dispatch is done in collide function by the function overloading
    // ( in collide function we are sending A1 to collide function of B )
    a->collide(*b);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:33:03.423

如果你想这样做，你将需要使用 RTTI。你需要检查传入的东西的类型。一般来说，如果你可以避免的话，这不是最好的设计模式。如果要与两个对象交互，通常需要使用另一个对象的标准接口。例如，您可能会说 bio.attack(other_creature) 和 attack 可能会查询另一个生物的防御，并基于此和它自己的统计信息发布对 other_creature 的 hp 更新。

# android - 是否可以在 id 字段自动递增的表中插入具有给定 id 的行？

> ID：12582042
> 
> 赞同：0
> 
> 时间：2012-09-25T11:29:53.203
> 
> 标签：android, sql, sqlite

我已经在 android 上尝试过了，它似乎只是忽略了分配给 id 字段的给定值，只是为其分配了一个自动递增的值（默认行为）。

有没有办法做到这一点？我想做一些类似插入表（id，name）值（100，“我的名字”）的事情。当表为空时，让 sqlite 插入 id=100 而不是 id=1 的行。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:52:30.490

当您为列指定值时，将使用该值。（请参阅[文档](http://www.sqlite.org/autoinc.html)。）

对我来说，它有效：

```
> CREATE TABLE t(id INTEGER PRIMARY KEY);
> INSERT INTO t VALUES(NULL);
> INSERT INTO t VALUES(123);
> INSERT INTO t VALUES(NULL);
> SELECT * FROM t;
1
123
124 
```

# java - JDOM getChildren() 返回空列表

> ID：12582044
> 
> 赞同：1
> 
> 时间：2012-09-25T11:29:58.807
> 
> 标签：java, xml, jdom

这是我的xml：

例子：

```
<?xml version="1.0" encoding="UTF_8" standalone="yes"?>
<StoreMessage xmlns="http://www.xxx.com/feed">
    <billingDetail>
        <billingDetailId>987</billingDetailId>       
        <contextId>0</contextId>
        <userId>
            <pan>F0F8DJH348DJ</pan>
            <contractSerialNumber>46446</contractSerialNumber>            
        </userId>            
        <declaredVehicleClass>A</declaredVehicleClass>
    </billingDetail>
    <billingDetail>
        <billingDetailId>543</billingDetailId>       
        <contextId>0</contextId>
        <userId>
            <pan>F0F854534534348DJ</pan>
            <contractSerialNumber>4666546446</contractSerialNumber>            
        </userId>            
        <declaredVehicleClass>C</declaredVehicleClass>
    </billingDetail>
</StoreMessage> 
```

使用 JDOM 解析器，我想从中获取所有`<billingDetail>`xml 节点。

我的代码：

```
SAXBuilder builder = new SAXBuilder();
try {
    Reader in = new StringReader(xmlAsString);
    Document document = (Document)builder.build(in);
    Element rootNode = document.getRootElement();
    List<?> list = rootNode.getChildren("billingDetail");

    XMLOutputter outp = new XMLOutputter();
        outp.setFormat(Format.getCompactFormat());

        for (int i = 0; i < list.size(); i++) {

            Element node = (Element)list.get(i);

            StringWriter sw = new StringWriter();
            outp.output(node.getContent(), sw);
            StringBuffer sb = sw.getBuffer();

            String text = sb.toString();
            xmlRecords.add(sb.toString());
        }

} catch (IOException io) {
    io.printStackTrace();
} catch (JDOMException jdomex) {
    jdomex.printStackTrace();
} 
```

但我从来没有像字符串一样输出xml节点：

```
<billingDetail>
    <billingDetailId>987</billingDetailId>       
    <contextId>0</contextId>
    <userId>
        <pan>F0F8DJH348DJ</pan>
        <contractSerialNumber>46446</contractSerialNumber>            
    </userId>            
    <declaredVehicleClass>A</declaredVehicleClass>
</billingDetail> 
```

我做错了什么？如何使用 JDOM 解析器获得此输出？

编辑

以及为什么如果 XML 以

`<StoreMessage>`而是喜欢`<StoreMessage xmlns="http://www.xxx.com/MediationFeed">`

然后工作？这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T11:50:40.200

问题是 getChildren 方法有两个版本：

java.util.List getChildren(java.lang.String name) 这将返回直接嵌套在此元素内（一层深）的所有子元素的列表，具有给定的本地名称并且不属于任何命名空间，作为 Element 对象返回。

和

java.util.List getChildren(java.lang.String name, Namespace ns) This returns a List of all the child elements nested directly (one level deep) within this element with the given local name and belonging to the given Namespace, returned as Element objects.

The first one doesn't find your node if it belongs to a namespace, you should use the second one.

# java - 使用 Tomcat Servlet 容器如何将 jsp 文件作为 html 文件提供

> ID：12582045
> 
> 赞同：1
> 
> 时间：2012-09-25T11:30:01.703
> 
> 标签：java, jsp, tomcat, servlets, tomcat7

因此，我的 Web 应用程序 widget.war 中有 index.jsp 和 download.jsp 等文件，并且正在使用 Tomcat 7。我希望这些文件可以作为 html 文件从 Internet 访问，即

*   http://www.mycompany.com/widget/index.html
*   http://www.mycompany.com/widget/download.html

问题：

1.  我该怎么做，我知道可以像大约 5 年前那样做，但不记得怎么做。

2.  这是个好主意吗，这似乎是个好主意，因为用户熟悉 html 但 jsps，并且以 jsps 的形式返回显示了实现细节，但这有关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:43:03.990

您可以`*.html`通过应用程序的 web.xml映射到`jsp`在 tomcat_path/conf/web.xml 中定义的 servlet。

```
<servlet-mapping>
    <servlet-name>jsp</servlet-name>
    <url-pattern>*.html</url-pattern>
</servlet-mapping> 
```

但是，扩展通常是一个实现细节，因此如果 URL 以 .html 或 .jsp 结尾，对您的用户没有太大影响。无论如何，大多数人可能都不在乎。

# sql - 从 db sql 查询中选择

> ID：12582047
> 
> 赞同：2
> 
> 时间：2012-09-25T11:30:13.173
> 
> 标签：sql, select

我有这个查询：

```
$query = mysql_query ("SELECT *
                         FROM saledb.application
                       WHERE app_id = (
                                       SELECT app_id
                                         FROM saledb.applicationdetails
                                        WHERE is_hot = '1'
                                      ) LIMIT $Kvet,$Zet
                      "); 
```

我有以下错误：

> 无法在第 68 行的 /home/lemondo/lemondosales.itnovations.ge/content/tpl/gtpl/main.php 中保存结果集

当我用 MAX(app_id) 更改选择项时，它可以工作，但我需要显示所有结果。我知道问题 mysql 无法在一个查询中选择多个 ID，但我需要替代查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T11:31:26.520

使用`IN`谓词而不是`=`像 os：

```
SELECT * 
FROM saledb.application 
WHERE app_id IN
  (SELECT app_id 
   FROM saledb.applicationdetails 
   WHERE is_hot = '1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:34:49.347

```
$query = mysql_query ("SELECT * FROM saledb.application WHERE app_id IN (SELECT app_id FROM saledb.applicationdetails WHERE is_hot = '1') LIMIT $Kvet,$Zet"); 
```

这应该够了吧。如果您离开 '=' 并且子查询返回多于一行，您将收到该错误。要匹配 saledb.application 中在结果集中具有 app_id 的所有行，您需要使用“IN”:)

# .htaccess - Cakephp 更改管理员前缀

> ID：12582053
> 
> 赞同：0
> 
> 时间：2012-09-25T11:30:25.743
> 
> 标签：.htaccess, cakephp, url-rewriting, cakephp-1.3, routes

我在 cakePHP 中开发了一个巨大的管理面板，我可以使用 SITE_URL/admin 访问它。现在我想通过 SITE_URL/jpaneladmin 更改这个 url，而不更改我用 admin_ 前缀定义的任何函数。有任何想法吗）？

我可以通过任何路由规则来更改此网址吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T11:58:20.857

设置路线：

```
Router::connect('/jpaneladmin/:controller', array('action' => 'index', 'prefix' => 'admin', 'admin' => true));
Router::connect('/jpaneladmin/:controller/:action/*', array('prefix' => 'admin', 'admin' => true)); 
```

# git - 每次推送后我必须手动克隆吗？

> ID：12582057
> 
> 赞同：0
> 
> 时间：2012-09-25T11:30:30.953
> 
> 标签：git

我有一个 github 项目，我在本地编辑它（我们称之为地方 A），然后提交/推送更改。

我现在已将此 github 项目克隆到另一台计算机（位置 B）。

如果我在地点 B 进行更改并提交/推送到 github，那么当我在地点 A 打开本地时，地点 A 将不会与 github 保持同步。

我的问题是，当我在 Place A 和 Place B 之间移动时，我是否需要每次手动克隆 github 项目以确保所有内容始终同步。

我是 git 的新手，所以我只是确保我以正确的方式做这件事。

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:33:06.427

不，您只需执行拉动操作即可。

这将只获得新的更改，因此无需克隆。

克隆可以第一次完成。之后，就是提交、推送、拉取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:36:15.330

只需使用：“git pull”然后“git up”“git clone http//...”仅在您第一次要获取源文件时使用

# mysql - MySQL 仅在 null 时将 double 转换为 varchar

> ID：12582059
> 
> 赞同：2
> 
> 时间：2012-09-25T11:30:38.847
> 
> 标签：mysql, casting

我正在尝试`DOUBLE`从数据库中获取类型值以用于报告。如果这个值是`NULL`，那么报告应该说明`"N/A"`。

我只是在使用 sql 来完成这项工作时遇到了一些困难：

```
SELECT CAST(IFNULL(billablerate, 'N/A'), CHAR(5)) AS billablerate FROM rates 
```

有些东西告诉我这些功能不能像这样组合，但我不知道如何让它们同时进入。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:41:42.247

试试这个：

```
SELECT IFNULL(CAST(billablerate AS char (5)), 'N/A') AS billablerate FROM rates 
```

效劳于：

```
SELECT IFNULL(CAST(null AS char (5)), 'N/A') AS exp; // N/A
SELECT IFNULL(CAST(10 AS char (5)), 'N/A') AS exp; // 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:41:31.760

我怀疑它给你带来麻烦的功能的顺序。

尝试：

```
SELECT IF(billablerate IS NULL, 'N/A', CONVERT(billablerate, CHAR(5))) as billablerate FROM rates 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:53:21.833

原来我的命令中的错误是语法错误，见下文：

我的原始代码：

```
SELECT CAST(IFNULL(billablerate, 'N/A'), CHAR(5)) AS billablerate FROM rates 
```

修复：

```
SELECT CAST(IFNULL(billablerate, 'N/A') AS CHAR(5)) AS billablerate FROM rates 
```

# android - 使用soap webservice在android自己的应用程序中推送通知

> ID：12582062
> 
> 赞同：0
> 
> 时间：2012-09-25T11:31:03.213
> 
> 标签：android, push-notification

我已经使用soap webservice成功开发了一个列表视图。在这里我必须在我的数据库中插入2个项目意味着时间（插入2个新项目）通知消息会自动出现在顶部，单击通知将直接带您进入应用程序并显示带有 2 个新项目的列表视图。即使我的应用程序关闭也像 gmail 一样执行。在 gmail 中收到任何新消息意味着显示通知消息的时间，单击该通知消息意味着直接转到收件箱并查看该消息. 我该如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:16:59.283

您可以为此使用 GCM，

> Google Cloud Messaging for Android (GCM) 是一项服务，可帮助开发人员将数据从服务器发送到他们在 Android 设备上的 Android 应用程序。这可能是一条轻量级消息，告诉 Android 应用程序有新数据要从服务器获取（例如，朋友上传的电影），也可能是一条包含高达 4kb 有效负载数据的消息（因此应用程序如即时通讯可以直接消费消息）。GCM 服务处理消息排队和传递到目标设备上运行的目标 Android 应用程序的所有方面

本文档描述了如何使用 GCM 提供的帮助程序库（客户端和服务器）编写 Android 应用程序和服务器端逻辑。

检查这些链接，

[http://developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)

[http://developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html)

[http://www.basic4ppc.com/forum/basic4android-getting-started-tutorials/19226-android-push-notification-gcm-framework-tutorial.html](http://www.basic4ppc.com/forum/basic4android-getting-started-tutorials/19226-android-push-notification-gcm-framework-tutorial.html)

[http://fundroiding.wordpress.com/2012/06/29/google-cloud-messaging-for-android-gcm-simple-tutorial/](http://fundroiding.wordpress.com/2012/06/29/google-cloud-messaging-for-android-gcm-simple-tutorial/)

对于客户端应用程序，您可以在此处找到代码

[https://github.com/marknutter/GCM-Cordova](https://github.com/marknutter/GCM-Cordova)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:21:49.057

SOAP 服务消息仅在设备向服务器请求某些内容时才获得。如果您想使用 SOAP，您需要从服务器请求每次是否有新项目（这不是很好的做法）。然后，如果有一个新项目，您可以通过 SOAP 请求该项目并将该项目插入到您的数组列表中并刷新表。

一个更好的方法是使用 GCM（适用于 Android 的 Google Cloud Messaging）：http: [//developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)

在那里，您可以创建一个服务器端应用程序，每当插入新订单时，您都会在其中通知您的设备。您有一个 onMessage() 方法，您可以在其中处理消息并将其插入列表中。

这取决于你到底想要什么，这个问题可以更详细地展开。

# mysql - 如何在 MySQL 中重写“使用 WITH 子句的递归查询”以获取子记录的所有级别的父记录

> ID：12582076
> 
> 赞同：2
> 
> 时间：2012-09-25T11:31:53.140
> 
> 标签：mysql, sql, parent-child

我需要在 MySQL 中重写一个查询，该查询最初是使用该`WITH`子句在 MS SQL Server 中编写的。这基本上是为了获取子记录的所有级别的父记录。这里，我以Oracle数据库`EMPLOYEES`中的schema的经典表`HR`为例。

表中的原始数据`EMPLOYEES`就是这种格式。

```
select employee_id, manager_id
from employees
order by 1,2;

---------------------------------------------
EMPLOYEE_ID            MANAGER_ID             
---------------------- ---------------------- 
100                                           
101                    100                    
102                    100                    
103                    102                    
104                    103                    
107                    103                    
124                    100                    
141                    124                    
142                    124                    
143                    124                    
144                    124                    
149                    100                    
174                    149                    
176                    149                    
178                    149                    
200                    101                    
201                    100                    
202                    201                    
205                    101                    
206                    205 
```

我的要求是查看子记录的所有级别的父记录。我可以使用 Oracle 和 MS SQL Server 中的以下查询来实现这一点。

```
WITH Asd(Child,
     Parent
    )
AS (SELECT Employee_Id,
           Manager_Id
      FROM Employees
    UNION ALL
    SELECT E.Employee_Id,
           A.Parent
      FROM Employees E, Asd A
      WHERE E.Manager_Id = A.Child
   )
SELECT Child,
       Parent
  FROM Asd
  WHERE Parent IS NOT NULL
  ORDER BY Child, Parent;

----------------------------------------------------------
CHILD                  PARENT                 
---------------------- -----------------------------------
101                    100                    
102                    100                    
103                    100                    
103                    102                    
104                    100                    
104                    102                    
104                    103                    
107                    100                    
107                    102                    
107                    103                    
124                    100                    
141                    100                    
141                    124                    
142                    100                    
142                    124                    
143                    100                    
143                    124                    
144                    100                    
144                    124                    
149                    100                    
174                    100                    
174                    149                    
176                    100                    
176                    149                    
178                    100                    
178                    149                    
200                    100                    
200                    101                    
201                    100                    
202                    100                    
202                    201                    
205                    100                    
205                    101                    
206                    100                    
206                    101                    
206                    205                    

36 rows selected 
```

如您所见，我将所有父母以及祖父母都放在查询中的 PARENT 列下。

但是，这种方法在 MySQL 中不起作用，因为不支持 WITH 子句。谁能帮助我如何在 MySQl 中重写这个查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:44:32.233

至于 2012 年 9 月，在 MySQL 上没有直接替代 MS SQL Server 的*公用表表达式 (CTE)*。您应该依赖存储过程。

[在 SO 中检查这个](https://stackoverflow.com/questions/5291054/generating-depth-based-tree-from-hierarchical-data-in-mysql-no-ctes/5291159#5291159)对另一个相同问题的答案。它应该回答你所有的疑问。我没有复制任何代码，因为链接上的所有内容都非常详细和解释。

# javascript - 在代码片段 HTML 中呈现 xml 和 html 标记

> ID：12582080
> 
> 赞同：0
> 
> 时间：2012-09-25T11:32:18.113
> 
> 标签：javascript, jquery, html

简单地说，如何使用`<html>`这样的标签呈现代码片段

```
<div id="container">
   <div id="header_area"><tiles:insertAttribute name="header"  /></div>
   <div id="body_area"><tiles:insertAttribute name="body" /></div>
   <div id="sidebar_area"><tiles:insertAttribute name="sidebar" /></div>
   <div id="footer_area"><tiles:insertAttribute name="footer" /></div>
</div> 
```

我找到了这段代码。但它为所有代码添加了结束标签`/>`

```
function encodePreElements() {
    var pre = document.getElementsByTagName('pre');
    for(var i = 0; i < pre.length; i++) {
        var encoded = htmlEncode(pre[i].innerHTML);
        pre[i].innerHTML = encoded;
    }
};

function htmlEncode(value) {
   var div = document.createElement('div');
   var text = document.createTextNode(value);
   div.appendChild(text);
   return div.innerHTML;
} 
```

所以上面的代码会是这样的

```
<div id="container">
    <div id="header_area"><tiles:insertattribute name="header"></tiles:insertattribute></div>
    <div id="body_area"><tiles:insertattribute name="body"></tiles:insertattribute></div>
    <div id="sidebar_area"><tiles:insertattribute name="sidebar"></tiles:insertattribute></div>
    <div id="footer_area"><tiles:insertattribute name="footer"></tiles:insertattribute></div>
</div> 
```

`.innerHTML`在 javascript 中正确呈现`alert`。那么我怎样才能像第一个那样渲染代码片段呢？执行此过程的简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:53:32.580

好的，所以我假设在您的问题中，第一个引用的块嵌入在一个`<pre>`元素中，如下所示： `<pre> <div id="container"> ... </div> </pre>`

您正在尝试将其转换为： `<pre> &lt;div ... </pre>`

问题是当页面加载时，内容`<pre>`被*加载到 DOM*中。当您获取 的值时`pre[i].innerHTML`，它会返回一个准确表示 DOM 状态的值，但与您的原始 HTML 不同。

如果要保留页面中使用的确切 HTML，则需要*在生成页面时对该 HTML 进行编码*。当任何 JavaScript 可以访问内容时，为时已晚 - 原始 HTML 已经消失，您只剩下 DOM 内容。

# c++ - 简单循环不适用于随机数

> ID：12582085
> 
> 赞同：3
> 
> 时间：2012-09-25T11:32:40.703
> 
> 标签：c++, loops, double, long-integer

我是一个编程新手。我需要一个简单的函数来将任何带小数点 X.YZ 的数字转换为 XYZ。我通过将它乘以 10 次并使用*double*到*int*转换来做到这一点。

* * *

```
 int main()
  {
    std::cout << "Number: " << std::endl;
    double a;
    // the uninitialized b was pointed out, its not the issue
    long b = 0;

    std::cin >> a;

       while(b!=a)
             {
              a*=10;
              b=a;
             }

    std::cout << a << std::endl;
    return 0;
  } 
```

* * *

这在 90% 的情况下都有效。对于像 132.54 这样的数字，程序运行的时间是无限长的。它以应有的方式处理 132.547（应该使用比 132.54 更多的内存）。

所以我的问题是：为什么对于 long int 的内存范围内的数字不能 100% 工作？为什么是 132.54 和类似的数字？

我正在使用代码块和 GNU GCC 编译器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T11:44:26.003

许多十进制浮点数不能用二进制精确表示。你只能得到一个接近的近似值。

如果 132.54 表示为 132.539999999999999，您将永远找不到匹配项。

打印循环中的值，您将看到会发生什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T11:34:35.493

您的问题是您从未初始化`b`，因此具有*未定义的行为*。

你应该做这个：

```
 long b = 0; 
```

现在您可以将 b 与其他东西进行比较并获得良好的行为。

还应将 a`float`与`integral`类型进行比较，就像与适当的 epsilon 值进行比较一样：

```
 while(fabs(an_int - a_float) < eps) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T11:44:54.980

问题是大多数十进制值不能完全表示为浮点值。因此，只有几个数字的十进制值并不能保证乘以足够多的十倍会产生一个没有小数部分的浮点值。要看到这一点，`a`通过循环显示每次的值。低位有很多噪音。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T12:02:14.210

与其将其读取为双精度，不如将其读取为字符串并解析它。这样你就不会遇到浮动精度问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T11:39:10.420

```
long b; 
```

在这里你*定义* `b`. 从这一点来看，变量包含垃圾值。该值可以是绝对随机的，基本上它只是分配时内存中发生的事情。之后，您在以下条件下使用此变量：

```
 while(b!=a) 
```

这将导致*未定义的行为*，这基本上意味着任何事情都可能发生，包括应用程序似乎正在运行的机会（如果你幸运的话），基于`b`.

为避免这种情况，您需要`b`使用一些值来初始化 ，例如`long b = 0`.

# android - 在 Android 中将数据从 SQLite 数据库检索到 ListView（具有 TextViews）的障碍：

> ID：12582088
> 
> 赞同：0
> 
> 时间：2012-09-25T11:32:56.627
> 
> 标签：android

当我想将数据从数据库检索到一些文本视图然后将这些文本视图放入列表视图时，我遇到了一些问题。让我解释一下我的数据库中有两列，如日期和标题。我想将它们检索到它们的每个文本视图中并将这些文本放入列表视图。我知道这对其他人来说可能是一个愚蠢的问题，但我是这个领域的新手。我对 SimpleCursorAdapter 有所了解，但不知道如何以及在哪里使用它。它可能会通过这个来解决。所以请指导我。

我的类::我为 database.MyArrayAdapter 类创建了一个 DBAdapter 类。一个主类称为 Head.java。

**DBAdapter.java**

```
 public class DBAdapter  {

//EditText mHead;
public static final String KEY_ROWID="_id";
public static final String KEY_DATE="date";
public static final String KEY_HEAD="head";
private static final String TAG="DBAdapter";

private static final String DATABASE_NAME="accounting";
private static final String DATABASE_TABLE="accounts";
private static final int DATABASE_VERSION=1;

private static final String DATABASE_CREATE=
        "create table accounts (_id integer primary key autoincrement," +
        "date datetime not null, head text not null);";

private final Context context;

private DataBaseHelper DBHelper;
private SQLiteDatabase db;

public DBAdapter(Context ctx){
     this.context=ctx;
     DBHelper=new DataBaseHelper(context);
}
private static class DataBaseHelper extends SQLiteOpenHelper {

    DataBaseHelper(Context context){

        super(context,DATABASE_NAME,null,DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        try {
            db.execSQL(DATABASE_CREATE);

        }catch(SQLException e){
            e.printStackTrace();
        }

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

        Log.w(TAG, "Updrading database from version "+oldVersion+" to "+newVersion+"," +
                "which will destroy all old data");
        db.execSQL("drop table if exists accounts");
        onCreate(db);
    }
      }

public DBAdapter open() throws SQLException{
db=DBHelper.getWritableDatabase();
return this;

       }

public void close(){
DBHelper.close();
    }

**//--insert  contact in the database--**
public long insertContact(String date,String head)
    {

ContentValues initialvalue=new ContentValues();
initialvalue.put(KEY_DATE, date);
initialvalue.put(KEY_HEAD, head);
return db.insert(DATABASE_TABLE, null, initialvalue);

    }

     //--delete a particular contact--
     public boolean deleteContact(long rowId){

return db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null)>0;

    }

    //--Retrieving all the contacts--
    public Cursor getAllContacts(){
return db.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_DATE,KEY_HEAD}, null,               null, null, null,null);

    }
   //--Retrieve a particular contact--
    public Cursor getContact(long rowId)throws SQLException{
Cursor mCursor=
        db.query(true, DATABASE_TABLE, new String[]        {KEY_ROWID,KEY_DATE,KEY_HEAD},
                KEY_ROWID + "="+ rowId, null, null, null,
                null, null);
if(mCursor != null){
    mCursor.moveToFirst();
}
return mCursor;

     }
     //--update a contact--
    public Boolean updateContact(long rowId,String date,String head){
ContentValues args=new ContentValues();
args.put(KEY_DATE, date);
args.put(KEY_HEAD, head);
return db.update(DATABASE_TABLE, args, KEY_ROWID  + "=" +rowId,null)>0;

    }

} 
```

* * *

**MyArrayAdapter.java**

```
public class MyArrayAdapter extends ArrayAdapter<Object>{

private final Context context;
private final String[] values;

//@SuppressWarnings("unchecked")
public MyArrayAdapter(Context context,String[] values){
    super(context,R.layout.list_things,values);
    this.context=context;
    this.values=values;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    //return super.getView(position, convertView, parent);
    LayoutInflater inflate=(LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowview=inflate.inflate(R.layout.list_things, parent, false);
    TextView mDate=(TextView)rowview.findViewById(R.id.tvdate);
    TextView mHead=(TextView)rowview.findViewById(R.id.tvhead);
    mDate.setText(values[position]);
    mHead.setText(values[position]);
    return rowview;
} 
```

}

**最后是我想做所有事情的头类**

**头.java**

```
public class Head extends ListActivity {
String date = "";
String head;
TextView display;
EditText headname;
ListView list;
LayoutInflater inflate;
Layout layout;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.head);
    display=(TextView)findViewById(R.id.tvCurrentDate);
    display.setText(date);
    // Intent intent=new Intent();
    DBAdapter db=new DBAdapter(this);
    SimpleCursorAdapter adapter=new SimpleCursorAdapter(Head.this, R.layout.list_things, null, null, null);

    //Cursor cursor=getContentResolver().query("/data/data/com.crypto.ranjit/DBAdapter",
            //new String []{db., selection, selectionArgs, sortOrder)
    Bundle b = getIntent().getExtras();
    if (b != null) {
        date = b.getString("date");

    }

    Button btnSave = (Button) findViewById(R.id.btnSave);
    btnSave.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            headname=(EditText)findViewById(R.id.etHeadname);
            date=display.getText().toString();

            head=headname.getText().toString();

            DBAdapter dba = new DBAdapter(Head.this);
            dba.open();
            long id = dba.insertContact(date, head);
            // id=dba.insertContact(head, date);

            dba.close();

        }
    });
    //DBAdapter db=new DBAdapter(Head.this);
    //db.open();

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T12:56:03.070

这里有一些愚蠢的错误让我当时感到困惑。

解决方案： 1：通过 Head.java 中定义的静态值填充文本视图。2：使用ArrayList<HashMap<String,String>>获取数据，填写适配器类。

# iphone - 当设备连接到 XCODE 和调试模式时，应用程序继续运行。但是不连接xcode的时候就不会继续了

> ID：12582093
> 
> 赞同：0
> 
> 时间：2012-09-25T11:33:03.823
> 
> 标签：iphone, xcode, arrays, background, bluetooth

我正在创建一个将继续在后台运行的应用程序。当设备连接到 MAC 并调试时，但当我断开连接并独立运行应用程序时，它将在 10 分钟内完成。是否有任何设置或我的编码错误？

我的代码是 appdeledate.h 是

```
#import <UIKit/UIKit.h>
#import <GameKit/GameKit.h>

@class TashouNoEnViewController;

@interface TashouNoEnAppDelegate : NSObject <UIApplicationDelegate,GKSessionDelegate,GKPeerPickerControllerDelegate> {
    UIWindow *window;
    TashouNoEnViewController *viewController;
    GKSession *mySession;
    IBOutlet UITextField *messageTextField;
    UIBackgroundTaskIdentifier backgroundTaskIdentifer;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet TashouNoEnViewController *viewController;

@property (nonatomic, retain) IBOutlet UINavigationController *navigationController;
@end 
```

appdelegate.M 是

```
#import "TashouNoEnAppDelegate.h"
#import "TashouNoEnViewController.h"
#define kSessionID @"_tashounoen"

@implementation TashouNoEnAppDelegate

@synthesize window;
//=_window;
@synthesize viewController;
@synthesize navigationController=_navigationController;

NSString *message102;

NSString* a_home_dir;
NSString* a_doc_dir;
NSString* a_path;
NSString *switchcheck;
NSInteger myselfint;
NSInteger swithchcheckint;
NSInteger runcount;
NSInteger runcount2;
NSInteger totalruncount;
UIBackgroundTaskIdentifier bgTask;
NSTimer *caallTimer;
NSTimer *caallTimer2;
 NSString *message100;
 NSString *message200;

- (void)applicationDidFinishLaunching:(UIApplication *)application {    

    // Override point for customization after app launch    
    [window addSubview:viewController.view];
    [window makeKeyAndVisible];
}

- (void)dealloc {
    [viewController release];
    [window release];
    [super dealloc];
}

- (void)applicationWillResignActive:(UIApplication *)application
{
 /**
    NSLog(@"applicationWillResignActive");
    // NSLog(@"%s", __PRETTY_FUNCTION__);
    UIApplication* app = [UIApplication sharedApplication];
    NSAssert(backgroundTaskIdentifer == UIBackgroundTaskInvalid, nil);
    backgroundTaskIdentifer = [app beginBackgroundTaskWithExpirationHandler:^{

        //  NSLog(@"expired!");
        dispatch_async(dispatch_get_main_queue(), ^{
            if (backgroundTaskIdentifer != UIBackgroundTaskInvalid) {
                [app endBackgroundTask:backgroundTaskIdentifer];
                backgroundTaskIdentifer = UIBackgroundTaskInvalid;
            }
        });
    }];
    **/
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    self.window.rootViewController = self.navigationController;
    runcount=0;
    totalruncount=0;
    NSLog(@"applicationDidEnterBackground");
   caallTimer = [NSTimer scheduledTimerWithTimeInterval:5 target:self selector:@selector(CAALL2) userInfo:nil repeats:NO];

    void (^handler)(void)  = ^{
            bgTask = UIBackgroundTaskInvalid;
    };
   bgTask = [application beginBackgroundTaskWithExpirationHandler:handler];
    [application setKeepAliveTimeout:600 handler:^{

         bgTask = [application beginBackgroundTaskWithExpirationHandler:handler];
        [caallTimer invalidate];
        caallTimer = nil;

        caallTimer = [NSTimer scheduledTimerWithTimeInterval:5 target:self selector:@selector(CAALL2) userInfo:nil repeats:NO];

    }];

}

- (void)applicationWillEnterForeground:(UIApplication *)application
{

    NSLog(@"applicationWillEnterForeground");
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{

    NSLog(@"applicationDidBecomeActive");
}

- (void)applicationWillTerminate:(UIApplication *)application
{

    NSLog(@"applicationWillTerminate");
}

- (void)session:(GKSession *)session connectionWithPeerFailed:(NSString *)peerID withError:(NSError *)error {
}

- (void)session:(GKSession *)session didFailWithError:(NSError *)error {

}

- (void)session:(GKSession *)session didReceiveConnectionRequestFromPeer:(NSString *)peerID {

    NSError *error;
    if(![mySession acceptConnectionFromPeer:peerID error:&error]) {
    } else {

    }
}

-(void)CAALL2

{

            [mySession disconnectFromAllPeers];
            [mySession release];
            mySession = nil;
            mySession = [[GKSession alloc] initWithSessionID:kSessionID displayName:nil sessionMode:GKSessionModePeer];
            mySession.delegate = self;
            [mySession setDataReceiveHandler:self withContext:nil];
            mySession.available = YES;

caallTimer = [NSTimer scheduledTimerWithTimeInterval:500 target:self selector:@selector(CAALL2) userInfo:nil repeats:NO];
  //  if (totalruncount<21){

  //  }

}
- (void)session:(GKSession *)session peer:(NSString *)peerID didChangeState:(GKPeerConnectionState)state {
    switch (state) {
        case GKPeerStateAvailable:
            NSLog(@"GKPeerStateAvailable");
            [mySession connectToPeer:peerID withTimeout:31.0f];
            break;
        case GKPeerStateUnavailable:
            break;
        case GKPeerStateConnected:
            [self btnSend:peerID];
   break;
        case GKPeerStateDisconnected:
            break;
        case GKPeerStateConnecting:
            break;
        default:
            break;
    }
}

- (void) receiveData:(NSData *)data fromPeer:(NSString *)peer inSession:(GKSession *)session context:(void *)context {

    message100 = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
 //   NSLog(@"frompeerid%@",peer);
 //   NSLog(@"get%@",message100);
    int checkdata = [message100 intValue ];
    if (checkdata==111)
    {
        message100 =@"111";
        UIApplication *app  = [UIApplication sharedApplication];
        UILocalNotification *notification = [[UILocalNotification alloc] init];
        NSDate *notificationDate = [NSDate dateWithTimeIntervalSinceNow:0];
        notification.soundName = UILocalNotificationDefaultSoundName;
        notification.fireDate  = notificationDate;
        notification.timeZone  = [NSTimeZone systemTimeZone];
        notification.alertBody = message100;
        [app scheduleLocalNotification:notification];
        [notification release];
    }
    else if (checkdata==110)
    {
        message100 =@"110";
        UIApplication *app  = [UIApplication sharedApplication];
        UILocalNotification *notification = [[UILocalNotification alloc] init];
        NSDate *notificationDate = [NSDate dateWithTimeIntervalSinceNow:0];
        notification.soundName = UILocalNotificationDefaultSoundName;
        notification.fireDate  = notificationDate;
        notification.timeZone  = [NSTimeZone systemTimeZone];
        notification.alertBody = message100;
        [app scheduleLocalNotification:notification];
        [notification release];
    }

}

- (void) mySendDataToPeers:(NSData *) data:(NSString *)peerID
{
    NSError* error = nil;
    NSLog(@"senddata");
    if (mySession)
       NSLog(@"mypeerid%@",peerID);

                [mySession sendData:data toPeers:[NSArray arrayWithObject:peerID] withDataMode:GKSendDataReliable error:&error];
    if (error) {
        NSLog(@"%@", error);
    }
}

-(void) btnSend:(NSString *)peerID{

    a_home_dir = NSHomeDirectory();
    NSString* a_doc_dir = [a_home_dir stringByAppendingPathComponent:@"Documents"];
    a_path = [a_doc_dir stringByAppendingPathComponent:@"userdata.plist"];

    NSDictionary *plist2 = [NSDictionary dictionaryWithContentsOfFile:a_path];
    switchcheck =[plist2 objectForKey:@"switchcheck"];
    swithchcheckint = [switchcheck intValue];

    if(swithchcheckint==1)
    {
        message102 =@"111";
    }
    else if(swithchcheckint==0)
    {
        message102 =@"110";
    }
    //---convert an NSString object to NSData---
    NSData* data;
     [messageTextField setText:message102];
     data = [message102 dataUsingEncoding:NSUTF8StringEncoding];
    [self mySendDataToPeers:data:peerID];
}

@end 
```

请有人帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:26:15.363

Apple 只允许应用程序的后台处理持续 10 分钟（过去只有 5 分钟），除非应用程序是音乐、VOIP 或导航，在这种情况下，您需要在 Plist 文件中指定。

这就是为什么您的应用程序在 10 分钟后停止的原因，默认情况下 Xcode 将在您调试时继续运行应用程序。

# bash - 使用 bash 脚本自动安装 - 如何回答用 ncurses 编写的对话框

> ID：12582097
> 
> 赞同：0
> 
> 时间：2012-09-25T11:33:29.053
> 
> 标签：bash, ubuntu, automation, ncurses, apt-get

如何在 Ubuntu 安装过程中自动回答对话框（用 ncurses 编写）？例如在 postfix 安装期间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:12:14.053

这些对话框是`debconf`Debian 软件包配置工具的一部分。它有很多前端，`ncurses`就是其中之一。

您可以使用`dpkg-reconfigure -f noninteractive`, use`debconf`的 Bash 库，将`debconf`自身重新配置为始终非交互，等等。

还有一个包叫做`debconf-utils`：

> 该软件包包含一些帮助用户和开发人员的小实用程序。有一些实用程序可以帮助管理 debconf 数据库，其他一些可以管理翻译的模板文件，还有一个程序可以从命令行直接与 debconf 通信。

# android - Android中的AsyncTask：如何使用背景图像设置ProgressBar？

> ID：12582098
> 
> 赞同：2
> 
> 时间：2012-09-25T11:33:30.720
> 
> 标签：android, android-asynctask

如何使用 Asynctask（onPreExecute() 方法）使第一个看起来像 BBC News android 应用程序。请帮帮我，我的助手类代码在这里...

UrlImageViewHelper.java

```
package com.warriorpoint.androidxmlsimple;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.util.ArrayList;
import java.util.Hashtable;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.params.HttpClientParams;
import org.apache.http.params.BasicHttpParams;
import org.apache.http.params.HttpParams;

import android.app.Activity;

import android.content.Context;
import android.content.res.AssetManager;
import android.content.res.Resources;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.net.http.AndroidHttpClient;
import android.os.AsyncTask;
import android.util.DisplayMetrics;

import android.widget.ImageView;

public final class UrlImageViewHelper {
    private static final String LOGTAG = "UrlImageViewHelper";
    public static int copyStream(InputStream input, OutputStream output) throws IOException
    {
        byte[] stuff = new byte[1024];
        int read = 0;
        int total = 0;
        while ((read = input.read(stuff)) != -1)
        {
            output.write(stuff, 0, read);
            total += read;
        }
        return total;
    }

    static Resources mResources;
    static DisplayMetrics mMetrics;
    private static void prepareResources(Context context) {
        if (mMetrics != null)
            return;
        mMetrics = new DisplayMetrics();
        Activity act = (Activity)context;
        act.getWindowManager().getDefaultDisplay().getMetrics(mMetrics);
        AssetManager mgr = context.getAssets();
        mResources = new Resources(mgr, mMetrics, context.getResources().getConfiguration());
    }

    private static BitmapDrawable loadDrawableFromStream(Context context, InputStream stream) {
        prepareResources(context);
        final Bitmap bitmap = BitmapFactory.decodeStream(stream);
        //Log.i(LOGTAG, String.format("Loaded bitmap (%dx%d).", bitmap.getWidth(), bitmap.getHeight()));
        return new BitmapDrawable(mResources, bitmap);
    }

    public static final int CACHE_DURATION_INFINITE = Integer.MAX_VALUE;
    public static final int CACHE_DURATION_ONE_DAY = 1000 * 60 * 60 * 24;
    public static final int CACHE_DURATION_TWO_DAYS = CACHE_DURATION_ONE_DAY * 2;
    public static final int CACHE_DURATION_THREE_DAYS = CACHE_DURATION_ONE_DAY * 3;
    public static final int CACHE_DURATION_FOUR_DAYS = CACHE_DURATION_ONE_DAY * 4;
    public static final int CACHE_DURATION_FIVE_DAYS = CACHE_DURATION_ONE_DAY * 5;
    public static final int CACHE_DURATION_SIX_DAYS = CACHE_DURATION_ONE_DAY * 6;
    public static final int CACHE_DURATION_ONE_WEEK = CACHE_DURATION_ONE_DAY * 7;

    public static void setUrlDrawable(final ImageView imageView, final String url, int defaultResource) {
        setUrlDrawable(imageView.getContext(), imageView, url, defaultResource, CACHE_DURATION_THREE_DAYS);
    }

    public static void setUrlDrawable(final ImageView imageView, final String url) {
        setUrlDrawable(imageView.getContext(), imageView, url, null, CACHE_DURATION_THREE_DAYS);
    }

    public static void loadUrlDrawable(final Context context, final String url) {
        setUrlDrawable(context, null, url, null, CACHE_DURATION_THREE_DAYS);
    }

    public static void setUrlDrawable(final ImageView imageView, final String url, Drawable defaultDrawable) {
        setUrlDrawable(imageView.getContext(), imageView, url, defaultDrawable, CACHE_DURATION_ONE_DAY);
    }

    public static void setUrlDrawable(final ImageView imageView, final String url, int defaultResource, long cacheDurationMs) {
        setUrlDrawable(imageView.getContext(), imageView, url, defaultResource, cacheDurationMs);
    }

    public static void loadUrlDrawable(final Context context, final String url, long cacheDurationMs) {
        setUrlDrawable(context, null, url, null, cacheDurationMs);
    }

    public static void setUrlDrawable(final ImageView imageView, final String url, Drawable defaultDrawable, long cacheDurationMs) {
        setUrlDrawable(imageView.getContext(), imageView, url, defaultDrawable, cacheDurationMs);
    }

    private static void setUrlDrawable(final Context context, final ImageView imageView, final String url, int defaultResource, long cacheDurationMs) {
        Drawable d = null;
        if (defaultResource != 0)
            d = imageView.getResources().getDrawable(defaultResource);
        setUrlDrawable(context, imageView, url, d, cacheDurationMs);
    }

    private static boolean isNullOrEmpty(CharSequence s) {
        return (s == null || s.equals("") || s.equals("null") || s.equals("NULL"));
    }

    private static boolean mHasCleaned = false;

    public static String getFilenameForUrl(String url) {
        return "" + url.hashCode() + ".urlimage";
    }

    private static void cleanup(Context context) {
        if (mHasCleaned)
            return;
        mHasCleaned = true;
        try {
            // purge any *.urlimage files over a week old
            String[] files = context.getFilesDir().list();
            if (files == null)
                return;
            for (String file : files) {
                if (!file.endsWith(".urlimage"))
                    continue;

                File f = new File(context.getFilesDir().getAbsolutePath() + '/' + file);
                if (System.currentTimeMillis() > f.lastModified() + CACHE_DURATION_ONE_WEEK)
                    f.delete();
            }
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }

    private static void setUrlDrawable(final Context context, final ImageView imageView, final String url, final Drawable defaultDrawable, long cacheDurationMs) {
        cleanup(context);
        // disassociate this ImageView from any pending downloads
        if (imageView != null)
            mPendingViews.remove(imageView);

        if (isNullOrEmpty(url)) {
            if (imageView != null)
                imageView.setImageDrawable(defaultDrawable);
            return;
        }

        final UrlImageCache cache = UrlImageCache.getInstance();
        Drawable d = cache.get(url);
        if (d != null) {
            //Log.i(LOGTAG, "Cache hit on: " + url);
            if (imageView != null)
                imageView.setImageDrawable(d);
            return;
        }

        final String filename = getFilenameForUrl(url);

        File file = context.getFileStreamPath(filename);
        if (file.exists()) {
            try {
                if (cacheDurationMs == CACHE_DURATION_INFINITE || System.currentTimeMillis() < file.lastModified() + cacheDurationMs) {
                    //Log.i(LOGTAG, "File Cache hit on: " + url + ". " + (System.currentTimeMillis() - file.lastModified()) + "ms old.");
                    FileInputStream  fis = context.openFileInput(filename);
                    BitmapDrawable drawable = loadDrawableFromStream(context, fis);
                    fis.close();
                    if (imageView != null)
                        imageView.setImageDrawable(drawable);
                    cache.put(url, drawable);
                    return;
                }
                else {
                    //Log.i(LOGTAG, "File cache has expired. Refreshing.");
                }
            }
            catch (Exception ex) {
            }
        }

        // null it while it is downloading
        if (imageView != null)
            imageView.setImageDrawable(defaultDrawable);

        // since listviews reuse their views, we need to 
        // take note of which url this view is waiting for.
        // This may change rapidly as the list scrolls or is filtered, etc.
        //Log.i(LOGTAG, "Waiting for " + url);
        if (imageView != null)
            mPendingViews.put(imageView, url);

        ArrayList<ImageView> currentDownload = mPendingDownloads.get(url);
        if (currentDownload != null) {
            // Also, multiple vies may be waiting for this url.
            // So, let's maintain a list of these views.
            // When the url is downloaded, it sets the imagedrawable for
            // every view in the list. It needs to also validate that
            // the imageview is still waiting for this url.
            if (imageView != null)
                currentDownload.add(imageView);
            return;
        }

        final ArrayList<ImageView> downloads = new ArrayList<ImageView>();
        if (imageView != null)
            downloads.add(imageView);
        mPendingDownloads.put(url, downloads);

        AsyncTask<Void, Void, Drawable> downloader = new AsyncTask<Void, Void, Drawable>() {

            @Override
            protected Drawable doInBackground(Void... params) {
                AndroidHttpClient client = AndroidHttpClient.newInstance(context.getPackageName());
                try {
                    HttpGet get = new HttpGet(url);
                    final HttpParams httpParams = new BasicHttpParams();
                    HttpClientParams.setRedirecting(httpParams, true);
                    get.setParams(httpParams);
                    HttpResponse resp = client.execute(get);
                    int status = resp.getStatusLine().getStatusCode();
                    if(status != HttpURLConnection.HTTP_OK){
//                        Log.i(LOGTAG, "Couldn't download image from Server: " + url + " Reason: " + resp.getStatusLine().getReasonPhrase() + " / " + status);
                        return null;
                    }
                    HttpEntity entity = resp.getEntity();
//                    Log.i(LOGTAG, url + " Image Content Length: " + entity.getContentLength());
                    InputStream is = entity.getContent();
                    FileOutputStream fos = context.openFileOutput(filename, Context.MODE_PRIVATE);
                    copyStream(is, fos);
                    fos.close();
                    is.close();
                    FileInputStream  fis = context.openFileInput(filename);
                    return loadDrawableFromStream(context, fis);
                }
                catch (Exception ex) {
//                    Log.e(LOGTAG, "Exception during Image download of " + url, ex);
                    return null;
                }
                finally {
                    client.close();
                }
            }

            @Override
            protected void onPostExecute(Drawable result) {
                if (result == null)
                    result = defaultDrawable;
                mPendingDownloads.remove(url);
                cache.put(url, result);
                for (ImageView iv: downloads) {
                    // validate the url it is waiting for
                    String pendingUrl = mPendingViews.get(iv);
                    if (!url.equals(pendingUrl)) {
                        //Log.i(LOGTAG, "Ignoring out of date request to update view for " + url);
                        continue;
                    }
                    mPendingViews.remove(iv);
                    if (result != null) {
                        final Drawable newImage = result;

                        Drawable newSize=resize(newImage);

                        final ImageView imageView = iv;

                        imageView.setImageDrawable(newSize);
                    }
                }
            }

            private BitmapDrawable resize(Drawable newImage) {
                // TODO Auto-generated method stub

                Bitmap d = ((BitmapDrawable)newImage).getBitmap();
                Bitmap bitmapOrig = Bitmap.createScaledBitmap(d, 75, 75, false);
                return new BitmapDrawable(bitmapOrig);                                              
            }
        };
        downloader.execute();
    }

    private static Hashtable<ImageView, String> mPendingViews = new Hashtable<ImageView, String>();
    private static Hashtable<String, ArrayList<ImageView>> mPendingDownloads = new Hashtable<String, ArrayList<ImageView>>();
} 
```

我的主要活动是 MessageList.java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:19:46.243

像这样

```
private final ProgressDialog dialog = new ProgressDialog(this.context);
    @Override
    protected void onPreExecute() {
          this.dialog.setMessage("Fecthing Image");
          this.dialog.setTitle("Please Wait");
          this.dialog.setIcon(R.drawable."Any Image here");
          this.dialog.show();
    } 
```

# android - 用安卓打印

> ID：12582101
> 
> 赞同：1
> 
> 时间：2012-09-25T11:33:37.120
> 
> 标签：android, printing, wifi

我想通过蓝牙或 WiFi 从我的应用程序在 android 8 中打印文本文件。请建议我解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:39:54.367

这是一个样本

```
package com.example.untitled2;

import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

import java.io.IOException;
import java.io.OutputStream;
import java.util.Set;
import java.util.UUID;

public class MyActivity extends Activity {
    private static final UUID MY_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");

    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button btn = (Button) findViewById(R.id.button);
        btn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
                if (mBluetoothAdapter == null) {
                    Toast.makeText(MyActivity.this, "no device", Toast.LENGTH_LONG).show();
                }
                if (!mBluetoothAdapter.isEnabled()) {
                    mBluetoothAdapter.enable();
                }
                Set<BluetoothDevice> bluetoothDevices = mBluetoothAdapter.getBondedDevices();
                if (bluetoothDevices.size() == 0)
                    return;
                OutputStream mmOutStream;
                BluetoothDevice device = bluetoothDevices.iterator().next();
                try {
                    BluetoothSocket socket = device.createRfcommSocketToServiceRecord(MY_UUID);
                    socket.connect();
                    mmOutStream = socket.getOutputStream();
                    /*String textPrint = ""+(char) 27 + (char)116 + (char) 27;*/
                    String textPrint = "this is example text"+(char)10;
                    mmOutStream.flush();
                    mmOutStream.write(textPrint.getBytes());
                    mmOutStream.flush();
                    for (int i = 0; i < 10; i++) {
                        mmOutStream.write(textPrint.getBytes());
                    }
                    mmOutStream.flush();
                    //mmOutStream.wait();
                    mmOutStream.close();
                    socket.close();
                } catch (IOException e) {
                    Toast.makeText(MyActivity.this, e.getMessage(), Toast.LENGTH_LONG).show();
                }

            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T05:49:01.173

这是我的代码 [在网上找到并根据我的要求修改] 以连接到蓝牙打印机，完美运行......尝试了 n 测试。:-)

```
package com.nvsoft.s2pay.mmsl.bluetoothprinter;

import android.app.Activity;
import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.Set;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;

import com.nvsoft.s2pay.sms.DynaCCSmsServiceConstants;
import com.nvsoft.s2pay.util.StringUtil;

import java.util.HashSet;

import org.json.me.JSONObject;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

//This class is meant for wrapping the Bluetooth connecting interface provided by android devices.......
//Basically is a state machine, and the communications will happen in a separate thread so as not to obstruct the main UI
public class BTWrapperActivity extends Activity {
public static final int REQUEST_CONNECT_BT = 0x2300;//8960
public static final int REQUEST_ENABLE_BT = 0x1000;//4096
public static final String DEVICES_DISCOVERED = "DD";
public static final String EXTRA_DEVICE_ADDRESS = DynaCCSmsServiceConstants.PRINTER_MAC_ADDRESS;
private static final String ERROR = "ecode";
private static final String ERROR_MSG = "emsg";
public static int ERROR_CODE = 0;
int request;
static private BluetoothAdapter mBluetoothAdapter = null;
static private Set<BluetoothDevice> btDevices = null;
String deviceNames = null;
JSONObject jobj = new JSONObject();
Intent parentIntent = null;
BluetoothDevice selectedDevice = null;

    static private BluetoothSocket mbtSocket = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Bundle bundle = getIntent().getExtras();
    deviceNames = bundle.getString(EXTRA_DEVICE_ADDRESS);

    parentIntent = getIntent();
    request = bundle.getInt(BluetoothFilePrinter.REQUEST_CODE);

    try {

            if (request != DynaCCSmsServiceConstants.EXIT_ACTIVITY_REQUEST){
                if (initDevicesList() != 0) {
                this.finish();
                return;
                } 
            }
    } catch (Exception ex) {
        getIntent().putExtra(ERROR, 701);
        getIntent().putExtra(ERROR_MSG, ex.getMessage());

        finish();
        return;
    }
    // Register the Broadcast receiver for handling new BT device discovery
    //IntentFilter btIntentFilter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
    //this.registerReceiver(mBTReceiver, new IntentFilter(DynaCCSmsServiceConstants.ACTION_EXIT_ACTIVITY));
    this.registerReceiver(mBTReceiver, new IntentFilter(BluetoothDevice.ACTION_FOUND));
    this.registerReceiver(mBTReceiver, new IntentFilter(BluetoothDevice.ACTION_ACL_CONNECTED));
    this.registerReceiver(mBTReceiver, new IntentFilter(BluetoothDevice.ACTION_ACL_DISCONNECT_REQUESTED));
    this.registerReceiver(mBTReceiver, new IntentFilter(BluetoothDevice.ACTION_ACL_DISCONNECTED));
    this.registerReceiver(mBTReceiver, new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED));
    this.registerReceiver(mBTReceiver, new IntentFilter(Intent.ACTION_SCREEN_ON));
    this.registerReceiver(mBTReceiver, new IntentFilter(Intent.ACTION_SCREEN_OFF));

    if (request == DynaCCSmsServiceConstants.EXIT_ACTIVITY_REQUEST) {
        unregisterReceiver(mBTReceiver);
        this.finish();
    }
}

public static BluetoothSocket getSocket() {
    return mbtSocket;
}

private void flushData() {
    try {
        /*if (mbtSocket != null) {
         mbtSocket.close();
         mbtSocket = null;
         }*/

        if (mBluetoothAdapter != null) {
            mBluetoothAdapter.cancelDiscovery();
        }

        if (btDevices != null) {
            btDevices.clear();
            btDevices = null;
        }
        if (deviceNames!=null) {
            deviceNames = null;
        }
        finalize();
       } catch(Exception ex){
            getIntent().putExtra(ERROR, 702);
            getIntent().putExtra(ERROR_MSG, ex.getMessage());
    } catch (Throwable e) {
        getIntent().putExtra(ERROR, 702);
        getIntent().putExtra(ERROR_MSG, e.getMessage());
    }

}

// This method will Connect to our SPP Bluetooth Device after discovering and pairing if required
// Do not forget to add the permission for Bluetooth to use this method
// Also this method is very tightly coupled with the above method, for getting the status of bt connection  
private int initDevicesList() {
    // Flush any Pending Data to rediscover devices
    if (request == DynaCCSmsServiceConstants.DISCOVER_REQUEST) {
        flushData();
    }
    // Get the Bluetooth Adaptor of the device
    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    if (mBluetoothAdapter == null) {
        return -1;
    }
    if (mBluetoothAdapter.isDiscovering()) {
        mBluetoothAdapter.cancelDiscovery();
    }
    // ENABLE BLUETOOTH on DEVICE if not ALREADY TURNED ON
    Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
    try {
        startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
    } catch (Exception ex) {
        return -2;
    }
    return 0;
} // End getDeviceList

@Override
protected void onActivityResult(int reqCode, int resultCode, Intent intent) {
    super.onActivityResult(reqCode, resultCode, intent);
    if (intent == null) {
        intent = getIntent();
    }
    switch (reqCode) {
        case REQUEST_ENABLE_BT:
            if (request == DynaCCSmsServiceConstants.DISCOVER_REQUEST) {
                if (resultCode == RESULT_OK) {
                    // Start getting the paired devices list
                    Set<BluetoothDevice> btDeviceList = mBluetoothAdapter.getBondedDevices();
                    // If there are paired devices
                    try {
                        if (btDeviceList.size() > 0) {
                            // Loop through paired devices
                            for (BluetoothDevice device : btDeviceList) {
                                jobj.put(device.getName(), device.getAddress());
                                if (btDeviceList.contains(device) == false) {
                                    btDevices.add(device); // Add the device to the device list
                                    jobj.put(device.getName(), device.getAddress());
                                }
                            }
                            if (jobj != null) {
                                intent.putExtra(DEVICES_DISCOVERED, jobj.toString());
                            }
                            setResult(Activity.RESULT_OK, intent);
                            finish();

                        } else {
                            mBluetoothAdapter.startDiscovery();
                        }
                    } catch (Exception ex) {
                        getIntent().putExtra(ERROR, 704);
                        getIntent().putExtra(ERROR_MSG, ex.getMessage());
                        setResult(Activity.RESULT_CANCELED, intent);
                    }
                } else {
                    getIntent().putExtra(ERROR, 704);
                    getIntent().putExtra(ERROR_MSG, "Permission to enable Bluetooth on the device was denied. Please enable Bluetooth and retry.");
                    setResult(Activity.RESULT_CANCELED, intent);
                    finish();
                }
            }//end of discovery
            else if (request == DynaCCSmsServiceConstants.CONNECT_REQUEST || request == DynaCCSmsServiceConstants.PRINT_REQUEST) {
                    if (resultCode == RESULT_OK) {
                        if (deviceNames!=null) {
                            connect(deviceNames);
                        }else{
                            getIntent().putExtra(ERROR, 704);
                            getIntent().putExtra(ERROR_MSG, "Could not find any printer.");
                            setResult(Activity.RESULT_CANCELED, intent);
                            finish();
                        }
                    }else{
                        getIntent().putExtra(ERROR, 704);
                        getIntent().putExtra(ERROR_MSG, "Permission to enable Bluetooth on the device was denied. Please enable Bluetooth and retry.");
                        setResult(Activity.RESULT_CANCELED, intent);
                        finish();
                    }
            }
            break;
        case REQUEST_CONNECT_BT:
            if (resultCode == Activity.RESULT_OK) {
                setResult(Activity.RESULT_OK, intent);
            } else {
                setResult(Activity.RESULT_CANCELED, intent);
            }
            finish();
            break;
    }
}

private final BroadcastReceiver mBTReceiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        // Get the BluetoothDevice object from the Intent
        BluetoothDevice device ;
        // When discovery finds a device
        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            try {
                // No paired device found
                if (btDevices == null) {
                    btDevices = new HashSet<BluetoothDevice>();
                    btDevices.add(device);
                    jobj.put(device.getName(), device.getAddress());
                } else {
                    if (!btDevices.contains(device)) {
                        btDevices.add(device);
                        jobj.put(device.getName(), device.getAddress());
                    }
                }
                intent.putExtra(DEVICES_DISCOVERED, jobj.toString());
            } catch (Exception ex) {
                  getIntent().putExtra(ERROR, 705);
                  getIntent().putExtra(ERROR_MSG, ex.getMessage());
            }
        } else if (BluetoothDevice.ACTION_ACL_CONNECTED.equals(action)) {
            intent.putExtra("IS_CONNECTED", true);
        } else if (BluetoothDevice.ACTION_ACL_DISCONNECT_REQUESTED.equals(action)) {
//#ifndef REMOVE_DEBUG               
                logger.debug("BTWrapperActivity - ", " Device is about to disconnect");
//#endif                
            } else if (BluetoothDevice.ACTION_ACL_DISCONNECTED.equals(action)) {
//#ifndef REMOVE_DEBUG               
                logger.debug("BTWrapperActivity - ", "Device has disconnected");
//#endif        
                    intent.putExtra("IS_CONNECTED", false);
            } else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
//#ifndef REMOVE_DEBUG               
                logger.debug("BTWrapperActivity - ", "DISCOVERY FINISSHED");
//#endif
                if (request == DynaCCSmsServiceConstants.DISCOVER_REQUEST) {
                    intent.putExtra(DEVICES_DISCOVERED, jobj.toString());
                    sendDiscoveryResult(intent);
                }
            }else if(Intent.ACTION_SCREEN_ON.equals(action)){
//#ifndef REMOVE_DEBUG               
                logger.debug("BTWrapperActivity - ", "SCREEN ON");
//#endif
            }else if(Intent.ACTION_SCREEN_OFF.equals(action)){
//#ifndef REMOVE_DEBUG               
                logger.debug("BTWrapperActivity - ", "SCREEN OFF");
//#endif
        }
        }
    };

private void connect(final String deviceAddress) {
    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    if (mBluetoothAdapter == null) {
        return;
    } else {
        selectedDevice = mBluetoothAdapter.getRemoteDevice(deviceAddress);
    }
    // Cancel the dicovery if still going on
    if (mBluetoothAdapter.isDiscovering()) {
        mBluetoothAdapter.cancelDiscovery();
    }
    if (mbtSocket != null) {
        try {
            mbtSocket.close();
        } catch (IOException ex) {
            getIntent().putExtra(ERROR, 706);
            getIntent().putExtra(ERROR_MSG, ex.getMessage());
            setResult(Activity.RESULT_CANCELED, getIntent());
            finish();
        }
        mbtSocket = null;
    }

    // Try to connect with the selected device,
    // made the thread different as the connecting proceedure might break down the system
    Thread connectThread = new Thread(new Runnable() {
        @Override
        public void run() {
           Intent intent = getIntent();
           String errMsg = "";
           try {
                try {
                    Method m = selectedDevice.getClass().getMethod("createInsecureRfcommSocket", new Class[]{int.class});
                    try {
                        mbtSocket = (BluetoothSocket) m.invoke(selectedDevice, 1);
                    } catch (IllegalArgumentException e) {
                        errMsg = e.getMessage();
                        getIntent().putExtra(ERROR, 707);
                        getIntent().putExtra(ERROR_MSG, errMsg);
                    } catch (IllegalAccessException e) {
                        errMsg = e.getMessage();
                        getIntent().putExtra(ERROR, 708);
                        getIntent().putExtra(ERROR_MSG, errMsg);
                    } catch (InvocationTargetException e) {
                        errMsg = e.getMessage();
                        getIntent().putExtra(ERROR, 709);
                        getIntent().putExtra(ERROR_MSG, errMsg);
                    }finally{
                        if (!StringUtil.isEmpty(errMsg) && intent.getExtras().getInt(ERROR)>0) {
                            setResult(Activity.RESULT_CANCELED, getIntent());
                            finish();
                        }
                    }
                } catch (SecurityException e) {
                    errMsg = e.getMessage();
                    getIntent().putExtra(ERROR, 710);
                    getIntent().putExtra(ERROR_MSG, errMsg);
                    setResult(Activity.RESULT_CANCELED, getIntent());
                    finish();
                } catch (NoSuchMethodException e) {
                    errMsg = e.getMessage();
                    getIntent().putExtra(ERROR, 711);
                    getIntent().putExtra(ERROR_MSG, errMsg);
                    setResult(Activity.RESULT_CANCELED, getIntent());
                    finish();
                }
                //mbtSocket = 

selectedDevice.createRfcommSocketToServiceRecord(SPP_UUID);
                    ERROR_CODE = intent.getExtras().getInt(ERROR);
//#ifndef REMOVE_DEBUG                    
                    logger.debug("ERROR = ", ERROR_CODE);
//#endif                    
                    if (ERROR_CODE == 0) {
                        mbtSocket.connect();
//#ifndef REMOVE_DEBUG                        
                        logger.debug("@@BTWrapperActivity - ", "Connected to selectedDevice = " + (String) intent.getExtras().get(EXTRA_DEVICE_ADDRESS));
//#endif

                    intent.putExtra("IS_CONNECTED", true);
                    setResult(Activity.RESULT_OK, intent);
                } else {
                    intent.putExtra(ERROR, ERROR_CODE);
                    intent.putExtra(ERROR_MSG,errMsg);
                    setResult(Activity.RESULT_CANCELED, intent);
                    finish();
                }
            } catch (IOException ex) {
                getIntent().putExtra(ERROR, 712);
                getIntent().putExtra(ERROR_MSG, "Unable to Connect to the Printer. Please verify the printer settings and try again.");
                getIntent().putExtra("IS_CONNECTED", false);
                ex.printStackTrace();

                setResult(Activity.RESULT_CANCELED, intent);
                finish();
            }finally{

               finish();
            }
        }
    });
    connectThread.start();

}

private Runnable socketErrorRunnable = new Runnable() {
    @Override
    public void run() {
        getIntent().putExtra(ERROR, 714);
        getIntent().putExtra(ERROR_MSG,"Cannot establish connection");

        mBluetoothAdapter.startDiscovery();
    }
};

protected void onStop() {

    unregisterReceiver(mBTReceiver);
    super.onStop();
}

private void sendDiscoveryResult(Intent mIntent){
    mIntent.putExtra(DEVICES_DISCOVERED, jobj.toString());
    setResult(Activity.RESULT_OK, mIntent);
    finish();
}

private String getDisplayMessage(){
    String message = "Please Wait!!";
    switch(request) {
        case DynaCCSmsServiceConstants.DISCOVER_REQUEST :
            message = "Discovery in progress!!";
            break;
        case DynaCCSmsServiceConstants.CONNECT_REQUEST:
            message = "Connecting...Please Wait!!";
            break;
        case DynaCCSmsServiceConstants.PRINT_REQUEST:
            message = "Printing in progress!!";
            break;
    }
    return message;
}} // End of class definition 
```

# bash - 提取文件名 shell 脚本的一部分

> ID：12582103
> 
> 赞同：7
> 
> 时间：2012-09-25T11:33:44.433
> 
> 标签：bash, shell

在 bash 中，我想提取许多文件名的一部分并将该输出保存到另一个文件中。

这些文件的格式为 coffee_{SOME NUMBERS I WANT}.freqdist。

```
#!/bin/sh
for f in $(find . -name 'coffee*.freqdist) 
```

该代码将找到所有的 coffee_{SOME NUMBERS I WANT}.freqdist 文件。现在，如何创建一个仅包含 {SOME NUMBERS I WANT} 的数组并将其写入文件？

我知道要写入文件一将以以下内容结束该行。

```
 > log.txt 
```

我错过了如何过滤文件名列表的中间部分。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-25T11:47:38.337

您可以`bash`按以下方式本地执行此操作：

```
filename=coffee_1234.freqdist
tmp=${filename#*_}
num=${tmp%.*}
echo "$num" 
```

这是一个纯粹的 bash 解决方案。不涉及外部命令（如`sed`），因此速度更快。

使用以下命令将这些数字附加到文件中：

```
echo "$num" >> file 
```

（您需要在开始循环之前删除/清除文件。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T11:42:58.253

如果目的只是将数字写入文件，则不需要 find 命令：

```
ls coffee*.freqdist
coffee112.freqdist  coffee12.freqdist  coffee234.freqdist 
```

下面应该这样做，然后可以将其重定向到文件：

```
$ ls coffee*.freqdist | sed 's/coffee\(.*\)\.freqdist/\1/'
112
12
234 
```

大师。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T15:29:14.640

以前的答案已经表明了一些必要的技术。这个答案以一种简单的方式组织了管道，也可能适用于其他工作。（如果您`sed`不支持 ';' 作为分隔符，请将 ';' 替换为 '|sed'。）

```
$ ls */c*; ls c*
 fee/coffee_2343.freqdist
 coffee_18z8.x.freqdist  coffee_512.freqdist  coffee_707.freqdist
$ find . -name 'coffee*.freqdist' | sed 's/.*coffee_//; s/[.].*//' > outfile
$ cat outfile 
 512
 18z8
 2343
 707 
```

# jquery - jQuery、Rails 和 fullCalendar：如何使用 jQuery 或 fullCalendar 在 url 上设置 DELETE 方法

> ID：12582104
> 
> 赞同：0
> 
> 时间：2012-09-25T11:33:44.717
> 
> 标签：jquery, ruby-on-rails, coffeescript, fullcalendar

几天来，我一直在思考 fulLCalendar、jQuery on Rails 3.2.8 的可能性。

我使用 as_json, url 来访问 model/ActiveRecords 中的记录，如下图所示：

```
class ZigzagPlan < ActiveRecord::Base
  belongs_to :user
  has_many :calories_journals

  attr_accessor :no_of_cycles
  attr_accessible :zz_type_used, :normal_mn_ratio_used, :start_date, :no_of_cycles

    # need to override the json view to return what full_calendar is expecting.
    # http://arshaw.com/fullcalendar/docs/event_data/Event_Object/
    def as_json(options = {})
        {
            :id => self.id,
            :title => self.zz_type_used,
            :start => self.start_date.rfc822,
            :end => self.end_date.rfc822,
            :allDay => true,
            :url => Rails.application.routes.url_helpers.zigzag_plan_path(id),  ****
            :color => 'darkGrey',
            textColor: 'white'
        }
    end  
end 
```

我很好奇是否可以在 url 上设置 DELETE 方法，因为我正在尝试开发一个删除功能，该功能不仅会删除日历上的事件，还会在 javascript/coffeescript 对话框确认框后从数据库或活动记录中删除事件。

```
$(document).ready ->  
  $('#calendar').fullCalendar      
    header:
      left: '',
      center: 'title',
      right: 'prev,next today',

    eventSources: [{
      url: '/zigzag_plans'
    },
    {
      url: '/calories_journals'
    }],

    eventClick: (calEvent, jsEvent, view) ->
      alert "Deleting!" if confirm "Delete '#{calEvent.title} Journals from: #{calEvent.start} to: #{calEvent.end}' - Are you sure?" if not calEvent.title.match(/(Low|High) Day/)
      removeEvent(calEvent.id) if not calEvent.title.match(/(Low|High) Day/)

removeEvent = (calEvent_id) -> $('#calendar').fullCalendar("removeEvents", calEvent_id) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:04:22.113

使用 jquery 发送删除请求

```
 $.ajax({
    url: "/path/to/resource",
    type: "POST",
    data: { _method:'DELETE' },

    success: function(msg) {
        // do something with result
    }
 }); 
```

# javascript - 将自定义数据添加到 Addresspicker 结果

> ID：12582109
> 
> 赞同：2
> 
> 时间：2012-09-25T11:33:57.273
> 
> 标签：javascript, jquery, autocomplete

我正在尝试修改[jQuery Addresspicker 小部件](http://xilinus.com/jquery-addresspicker/demos/index.html)，以便除了 Google Maps Geocoder 结果之外，它还可以从自定义数据数组返回自动完成结果。目标是让用户能够搜索商店名称，然后将其放在地图的中心，或者街道/城市/地区名称，将在未修改的小部件中显示。

问题是，我无法让小部件将自定义数据保存为其本地/方法变量。我的猜测是它与闭包有关，我已经四处寻找解决方案，但到目前为止我仍然一无所知。

自定义数据数组在小部件初始化期间设置：

```
 var marker = createCustomDataArray();

var addresspicker = $( "#searchbox" ).addresspicker({
          mapOptions: {
            zoom: 17, 
            regionBias: "id",
            center: pos,    
            scrollwheel: true,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            componentRestrictions: { country: "id" },
            types: ['geocode']
          },
          elements: {
            map:      "#mapholder",
            lat:      "#lat",
            lng:      "#lng",
            locality: '#locality',
            country:  '#country'
          },
          customData: marker
        }) 
```

这是修改后的脚本：

```
$.widget( "ui.addresspicker", {
options: {
    appendAddressString: "",
    draggableMarker: true,
    regionBias: "id",
    mapOptions: {
        zoom: 12, 
        center: new google.maps.LatLng(-5, 106.84517200000005), 
        scrollwheel: false,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    },
    elements: {
        map: false,
        lat: false,
        lng: false,
        locality: false,
        country: false,
        type: false
    },
    customData: null
}, 

setCustomData: function(data) {
    this.customData = data;
    return 42;
},

_create: function() {
  this.geocoder = new google.maps.Geocoder();
  this.element.autocomplete({

    source: $.proxy(this._geocode, this),
    focus:  $.proxy(this._focusAddress, this),
    select: $.proxy(this._selectAddress, this)
  });

  this.lat      = $(this.options.elements.lat);
  this.lng      = $(this.options.elements.lng);
  this.locality = $(this.options.elements.locality);
  this.country  = $(this.options.elements.country);
  this.type     = $(this.options.elements.type);
  if (this.options.elements.map) {
    this.mapElement = $(this.options.elements.map);
    this._initMap();
  }
  this.setCustomData(this.options.customData);

}, 
```

有任何想法吗？

# c# - 在 C# 中创建带有命名空间的 XML 文档

> ID：12582111
> 
> 赞同：-1
> 
> 时间：2012-09-25T11:34:09.083
> 
> 标签：c#, .net, xml

我正在尝试生成如下所示的 XML 文档。我尝试了几种解决方案，但是当我添加命名空间时，我几乎到处都有命名空间，比如

```
<FieldB xlmns="">BBBBB</FieldB> 
```

你知道如何得到这个吗？

```
<?xml version="1.0" encoding="UTF-8" standalone="true"?>
<value attributeA="A" attributeB="B" xmlns:XXX="http://MyURLA" xmlns="http://MyURLB">
    <FieldA>AAAAA</FieldA>
    <FieldB>BBBBB</FieldB>
    <FieldB>BBBBB</FieldB>
    <status attributeC="C">
        <FieldC>ValueFieldC</FieldC>
    </status>
    <LastUpdate date="2011-02-11T10:00:56.350" login="testing"/>
    <XXX:Infos>
        <XXX:Info>
            <XXX:InfoA>false</XXX:InfoA>
            <XXX:InfoB>false</XXX:InfoB>
        </XXX:Info>
    </XXX:Infos>
</value> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:48:56.307

您可以使用 XNamespace：

```
public class Program
{
    static void Main()
    {
        XNamespace nsA = "http://MyURLA";
        XNamespace nsB = "http://MyURLB";
        var doc = new XDocument(
            new XDeclaration("1.0", "utf-8", "yes"),
            new XElement(
                nsB + "value",
                new XAttribute(XNamespace.Xmlns + "XXXX", nsA),
                new XAttribute("attributeA", "A"),
                new XAttribute("attributeB", "B"),
                new XElement("FieldA", "AAAA"),
                new XElement("FieldA", "BBBB"),
                new XElement("FieldC", "CCCC"),
                new XElement(
                    "status", 
                    new XAttribute("attributeC", "C"),
                    new XElement("FieldC", "ValueFieldC")
                ),
                new XElement(
                    "LastUpdate", 
                    new XAttribute("date", DateTime.Now), 
                    new XAttribute("login", "testing")
                ),
                new XElement(
                    nsA + "Infos",
                    new XElement(nsA + "InfoA", false),
                    new XElement(nsA + "InfoB", false)
                )
            )
        );
        Console.WriteLine(doc.ToString());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:51:16.467

我怀疑问题是您没有将`FieldA`, `FieldB`etc 放在正确的名称空间中-您不希望在 XML 中有明确的名称空间声明，但是您显示的 XML 实际上会将它们放在带有 URL 的名称空间中`http://MyURLB`，由于默认值的继承方式。

我怀疑你是否只使用：

```
XNamespace nsB = "http://MyURLB";

var doc = ... {
    new XElement(nsB + "value", 
        ...
        new XElement(nsB + "FieldA", "AAAA");
        new XElement(nsB + "FieldB", "BBBB");
        new XElement(nsB + "FieldC", "CCCC");
        ...
    )
}; 
```

然后就好了。( `FieldA`etc) 元素不会有明确的命名空间引用，因为它们与其父元素位于相同的命名空间中。

# c - 如何保存文件内容

> ID：12582113
> 
> 赞同：0
> 
> 时间：2012-09-25T11:34:11.373
> 
> 标签：c, file-io

感谢您的回答，但在此之前我的代码可以从文件中读取并打印出该区域的值！我的问题是如何在“FOR LOOP”之外使用这些值。因为我不想在需要值的任何时候继续读取文件，假设数组 data[][] 包含文件的所有内容.......是否可以在循环外调用数组及其打印出所有的文件内容？

```
//file
S (20,22)(129,37)
S (10,18)(40,200)
S (10,20)(39,15)
S (30,400)(750,200)
S (160,70)(240,20)
S (40,40)(10,39)
S (6,65)(94,2)
S (404,40)(110,39)
S (86,61)(50,19)

  //part of code.........

      int count=1;   

       for (i=0; i <= count; i++)
       {
         while(fscanf(file, "S (%d,%d)(%d,%d)\n", &a, &b, &c, &d) !=EOF)
         {

 data[i][0] =a;
 data[i][1] =b;
 data[i][2] =c;
 data[i][3] =d;

 printf("%d,%d,%d,%d\n",data[i][0], data[i][1], data[i][2], data[i][3]);
  XDrawLine(display_ptr, win, gc_grey,a, b, c, d);

    count++;
   }

 // want to call the array data[i][j] here outside the iteration above..
  int j1=0;  
       for (i=0; i <= 19, j1<=3; i++) {
        printf("%d\n",data[i][0]);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:37:10.127

你永远不会`i`在你的循环中增加。此外，外循环什么也不做。

尝试这样的事情：

```
int i;

for (i = 0; fscanf(...) != EOF; ++i)
{
    // if i == current array size of data, reallocate or break

    data[i][0] = a;
    data[i][1] = b;
    data[i][2] = c;
    data[i][3] = d;

    // etc.
}

// Now data[k] holds data for k in [0, i) 
```

您必须考虑当文件中的行数多于数组元素时会发生什么。您可以重新分配（如果数组是动态的），也可以将整个构造包装在另一个循环中，该循环以块的形式处理文件。您还应该检查`fscanf`操作是否成功提取所有数据！

# iphone - 如何使用 APS 获取最新版本信息

> ID：12582119
> 
> 赞同：0
> 
> 时间：2012-09-25T11:34:37.240
> 
> 标签：iphone

我正在开发一个应用程序。我想使用 Apple Push Notifications 获取我的应用程序信息的最新版本。所以请告诉我如何做这个。我在一些帖子中看到，因为他们提到在苹果中配置 APNS网站并将二进制信息发送给苹果服务提供商。获取最新版本信息是否足够。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:12:45.543

您将需要创建自己的服务器，为您的用户存储标识符。有了这个，您就可以向允许来自您的应用程序的通知的用户发送通知。

这样做可能会非常复杂，因此您可能需要使用诸如[Urban Airship](http://urbanairship.com)之类的服务来提供服务器，以及如何在您的应用程序中实现 APNS 的说明。完成此操作后，从他们的网站向您的用户发送推送通知会非常简单。

# php - JQuery/PHP动态连接网络sql server数据库

> ID：12582127
> 
> 赞同：1
> 
> 时间：2012-09-25T11:35:34.123
> 
> 标签：php, jquery, html5builder

我对此完全陌生，老实说，我什至很难找到有关该主题的任何基本文档/教程。

我正在使用 Embacadero HTML5 Builder 尝试创建一个 iphone 基本应用程序

我有一个带有 2 个编辑框和一个按钮的基本表单。我要做的就是当用户单击按钮时，它会从编辑中获取用户名和密码并尝试连接到 sql server (2012)。

我知道服务器的 IP 地址和数据库名称。

如果由于登录错误导致连接失败，则会显示警告消息。如果连接有效，那么它应该打开“下一页”，无论是什么。

到目前为止，我所拥有的一切，我知道下面是行不通的，但你得到了一般的要点。

```
function btnLoginClick($sender, $params)
{
    $mysqlsvr = new SQLConnection('10.10.1.27', $edUsername.Text, $edPassword.Text, 'exp_main');
    $mysqlsvr.open;

    if fails then
        WARNING
    else
        Open new page
} 
```

如果连接正常，我想通过这个数据库连接，或者只是将它存储在全局某个地方以供使用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:19:50.670

# 访问用户输入

您使用错误的标识符来访问用户输入的用户*名*和*密码*。

```
$text = $this->ComponentName->Text; // Right.
$text = $ComponentName.Text; // Wrong. 
```

# 连接到 MSSQL 服务器

要使用 HTML5 Builder 配置 MSSQL 连接，请遵循文档的这些页面：

*   **[服务器数据库连接](http://docwiki.embarcadero.com/HTML5_Builder/en/Server_Database_Connections)**（*配置连接的一般信息*）
*   **[微软 SQL 服务器](http://docwiki.embarcadero.com/HTML5_Builder/en/Microsoft_SQL_Server)**

HTML5 Buider 还包括一个工具**[Data Explorer](http://docwiki.embarcadero.com/HTML5_Builder/en/Data_Explorer)**，您可以使用该工具将 IDE 本身连接到您的服务器，因此您可以将表*拖放*到 Designer 中以生成用于连接的组件，而不是手动创建和配置这些组件。

# PHP

最后，我看到您正在为事件处理程序使用类似 Delphi 的代码。HTML5 Builder 是 Embarcadero 产品，是的，但它使用 JavaScript 或 PHP 等 Web 编程语言。对于服务器端事件处理程序，您必须使用后者。

虽然使用 HTML5 Builder 不需要高水平的 PHP，但您应该学习基础知识。H5B 文档包括一些对 PHP[文档资源](http://docwiki.embarcadero.com/HTML5_Builder/en/Documentation#PHP)和[教程](http://docwiki.embarcadero.com/HTML5_Builder/en/Tutorials#PHP)的引用的页面。我将从**[W3Schools 教程](http://www.w3schools.com/php/default.asp)**开始，它将为您提供基础知识，您会发现**[官方的 PHP 文档](http://www.php.net/manual/en/)**，虽然在某些方面有点混乱，但它确实很有帮助，并且几乎涵盖了您可能需要的所有内容。

# macos - 在 XCode 4.2 中使用未声明的标识符“”

> ID：12582128
> 
> 赞同：1
> 
> 时间：2012-09-25T11:35:40.233
> 
> 标签：macos, xcode4.2, osx-mountain-lion

```
void CityXMLManager::print_patch_to_xml (
     patch_type _type, 
     vector <patch_type> & _neighbours_types, 
     vector <pair<Vector3, float > > & _obstacles) 
```

嗨，我想问一下上面的行在语法上是否被接受？这行代码以前在 Window 和 Visual Studio 2008 编译中运行良好。然后，当将相同的代码投入到 mac os x 环境中时，就会出现错误。有人把这些代码传给了我，我不明白这一行发生了什么。

抱怨的错误是：

```
Use of undeclared identifier 'patch_type'
Variable has incomplete type 'void'
'_neighbours_types' was not declared in this scope
'_patch_types' was not declared in this scope
Reference to 'vector' is ambiguous 
```

提前致谢！

# maven - 激活部署服务器上安装的基于 Maven 配置文件的软件包

> ID：12582130
> 
> 赞同：3
> 
> 时间：2012-09-25T11:35:43.353
> 
> 标签：maven, maven-2, build, pom.xml

我正在使用 Maven 2.2.1 来构建和部署应用程序。

我有一个要求，如果要在服务器上部署应用程序，它应该检查要部署应用程序的服务器是否安装在系统中。如果服务器没有安装，那么它应该跳过所有剩余的进程并退出构建过程。

我可以使用配置文件执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:58:09.027

是的，您可以通过存在文件来激活配置文件来执行此操作。由于您的要求是“系统上安装了应用程序”，因此您可以查找该服务器软件已知使用的文件。

例如，如果我想在服务器上安装 WebSphere MQ 时激活配置文件，我可以按如下方式激活配置文件

```
<file>
    <exists>/opt/mqm/java/lib/com.ibm.mq.jar</exists>
</file> 
```

请注意，这仅在服务器软件始终安装在同一位置时才有效。

参考： http: [//www.sonatype.com/books/mvnref-book/reference/profiles-sect-activation.html](http://www.sonatype.com/books/mvnref-book/reference/profiles-sect-activation.html)

# python - 根据 NaN 检查 Arrayfire 数组

> ID：12582140
> 
> 赞同：3
> 
> 时间：2012-09-25T11:36:40.467
> 
> 标签：python, arrayfire

我在 Python 上使用 Arrayfire，但我不能使用 af.sum() 函数，因为我的输入数组中有 NaN，它会将 NAN 作为总和返回。

由于速度问题，不能使用 numpy.nansum/numpy.nan_to_num 。

我只需要一种方法将这些 NaN 转换为 arrayfire 中的浮点零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:43:25.730

瓶颈值得研究。他们对 numpy.nanxxx 函数进行了多项优化，根据我的经验，这使其比 numpy 快 5 倍左右。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:40:10.997

您可以使用[numpy.nansum](http://docs.scipy.org/doc/numpy/reference/generated/numpy.nansum.html)，它`nan`在数组总和中视为 0。

```
numpy.nansum(arrayfire) 
```

# css - 仅具有轮廓的字体系列的颜色

> ID：12582144
> 
> 赞同：1
> 
> 时间：2012-09-25T11:36:54.650
> 
> 标签：css, font-face

我有一个只有轮廓的字体。它没有任何填充颜色。在这里你可以看到这个fone。

[http://www.dafont.com/comica-bd.font](http://www.dafont.com/comica-bd.font)

我在我的网页（字体）中使用这种字体。当我改变字体的颜色时，它的轮廓就会改变。**有没有办法使用 CSS 来改变填充颜色？**还是我使用图像的最后选择？

这就是我要的： ![这就是我想做的](../Images/d16a7be1c95fdf5a557c62940d3b46b1.png)

这就是我可以用 CSS 和 fontface 做的。 ![在此处输入图像描述](../Images/a6b6157d37c7eda5103836f9f7c80d0c.png)

任何 CSS 属性来填充背景或其他东西。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:46:34.550

不，没有办法在css中填充字体。对于 css 目的，空格不能被视为字体的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:39:35.900

** 编辑 - 我没有在其他浏览器中检查过这个。这是一个非常粗略的实现。我不建议做这样的事情。**

该解决方案使用 HTML5、CSS3，因此具有一些浏览器支持条件。

请参阅此[codepen](http://codepen.io/keithwyland/pen/tbfcE) [http://codepen.io/keithwyland/pen/tbfcE](http://codepen.io/keithwyland/pen/tbfcE)（如果 codepen 不起作用，请参见下面的代码）

我使用了 Google Web Font Jacques Francois Shadow (http://www.google.com/webfonts)，它是 Jacques Francois 的姊妹字体。基本上，阴影字体具有与您正在使用的字体一样的轮廓字体。另一种字体相同但不是轮廓，它是填充的。

我所做的是设置一个 data- 属性来重复元素的文本，然后在 CSS 中使用它。我还使用伪元素来吐出该数据属性的值。它并不完美（主要是间距），但是如果您的第二字体可以具有与原始字体完全相同的字母宽度并且只是填充而不是轮廓，这将有所帮助。

CSS

```
@import url(http://fonts.googleapis.com/css?family=Jacques+Francois+Shadow);
@import url(http://fonts.googleapis.com/css?family=Jacques+Francois);

body {
    background-color: red;
    font-family: 'Jacques Francois Shadow', cursive;
    color: #000;
    font-weight: bold;
}

h1 {
    position: relative;
    word-spacing: 2px;
    font-size: 300%;
  z-index: 1;
}

h1:after {
    font-family: 'Jacques Francois', cursive;
    content: attr(data-ttl);
    position: absolute;
    color: blue;
    top: 0;
    left: 0;
  letter-spacing: 0.06em;
    word-spacing: -0.055em;
  text-shadow:  1px 0 blue;
  z-index: -1;
}

p {
  font-size: 300%;
} 
```

HTML

```
<h1 data-ttl="Stuff with fill">Stuff with fill</h1>
<p>No fill</p> 
```

# java - java.lang.IndexOutOfBoundsException 错误

> ID：12582145
> 
> 赞同：-1
> 
> 时间：2012-09-25T11:36:58.360
> 
> 标签：java, java-me, j2mepolish

我正在为吉他商店制作一个小型 j2me 应用程序。但我收到 java.lang.IndexOutOfBoundsException 错误。我认为变量声明存在问题，但无法解决。有人可以帮我吗。

```
import javax.microedition.midlet.*;
import javax.microedition.lcdui.*;
import java.util.*;

public class guitarStore extends MIDlet implements CommandListener
{
    public int guitartype=0, guitarsize=0;

    Form frm1;
    Form frm2;
    Form frm3;
    Form frm4;
    Form frm5;
    Form frm7;  

    TextField tfUName;
    TextField tfPswd;
    TextField Amount;

    String s1, s2, s3;
    ChoiceGroup cgAccount;
    ChoiceGroup cgTrans;

    Command cmdOk; //frm1
    Command cmdExit1;//frm1
    Command cmdLogin;//frm2
    Command cmdBack;//frm2
    Command cmdNextTR;//frm3
    Command cmdBackLG;//frm3
    Command cmdBackAC;//frm4
    Command cmdPAmount;//frm4
    Command cmdBackTR;//frm5
    Command cmdNote;//frm5
    Command cmdExit2;//page7
    Command cmdExit4;//page7

    private Display display;

    private Ticker frmTicker;

    public guitarStore()
    {
        try
        {
            frm1 = new Form("Welcome");
            frm2 = new Form("Member Login");
            frm3 = new Form("Guitar Type");
            frm4 = new Form("Guitar Style");
            frm5 = new Form("Amount Page");
            frm7 = new Form("Receipt");

            display = Display.getDisplay(this);

            frmTicker = new Ticker ("Furtados Guitar Store ");
            frm1.setTicker(frmTicker);

            cmdOk=new Command("NEXT",Command.SCREEN,1);//frm1
            cmdExit1=new Command("EXIT",Command.EXIT,0);//frm1 
            tfUName=new TextField("Enter User Name : ","",30,TextField.ANY);
            tfPswd=new TextField("Enter Password : ","",30,TextField.PASSWORD);
            cmdBack=new Command("BACK",Command.BACK,0);//frm2
            cmdLogin=new Command("Login",Command.SCREEN,1);//frm2

            cgAccount=new ChoiceGroup("Guitar Style : ",Choice.EXCLUSIVE);
            cgAccount.append("Acoustic Guitar",null);
            cgAccount.append("Electric Guitar",null);
            cgAccount.append("Bass Guitar",null);
            cmdBackLG=new Command("BACK",Command.BACK,0);//frm3
            cmdNextTR=new Command("NEXT",Command.SCREEN,1);//frm3

            cgTrans=new ChoiceGroup("Size Selection : ",Choice.EXCLUSIVE);
            cgTrans.append("Small ",null);
            cgTrans.append("Medium",null);
            cgTrans.append("Jambo",null);
            cmdBackAC=new Command("BACK",Command.BACK,0);//frm4
            cmdPAmount=new Command("NEXT",Command.SCREEN,1);//frm4

            Amount=new TextField("Total Quantity : ","",10,TextField.ANY);
            cmdBackTR=new Command("BACK",Command.BACK,0);//frm5
            cmdNote=new Command("Next",Command.SCREEN,1);//frm5

            cmdExit2=new Command("BACK",Command.BACK,0);//page7

            cmdExit4=new Command("EXIT",Command.BACK,0);//page7

        }
        catch(Exception e)
        {
            System.out.println (e);
        }
    }

    public void startApp()
    {
        frm1.addCommand(cmdOk);
        frm1.addCommand(cmdExit1);

        try
        {
            Image im = Image.createImage("/airplane.png");
            frm1.append(new ImageItem(null, im, ImageItem.LAYOUT_CENTER , null));
            display.setCurrent(frm1);
        }
        catch (java.io.IOException e)
        {
            System.err.println("Unable to locate or read the image file");
        }

        frm1.setCommandListener(this); 

        frm2.addCommand(cmdBack);
        frm2.addCommand(cmdLogin);
        frm2.append(tfUName); 
        frm2.append(tfPswd);
        display=Display.getDisplay(this);
        frm2.setCommandListener(this);

        String msg = "Please select the Guitar type";
        frm3.append(msg);
        frm3.append(cgAccount);
        frm3.addCommand(cmdBackLG);
        frm3.addCommand(cmdNextTR);
        frm3.setCommandListener(this);
        display=Display.getDisplay(this);

        frm4.append(cgTrans);
        frm4.addCommand(cmdBackAC);
        frm4.addCommand(cmdPAmount);
        frm4.setCommandListener(this);
        display=Display.getDisplay(this);

        frm5.addCommand(cmdBackTR);
        frm5.addCommand(cmdNote);
        frm5.append(Amount); 
        display=Display.getDisplay(this);
        frm5.setCommandListener(this);

        frm7.addCommand(cmdExit2);
        frm7.addCommand(cmdExit4);
        display=Display.getDisplay(this);
        frm7.setCommandListener(this);

    }
    public void pauseApp(){

    }

    public void destroyApp(boolean unconditional) {
        notifyDestroyed();
    }

    public void commandAction(Command c,Displayable d)
    {

        try
        {
            if(c==cmdExit1)
            {
                destroyApp(false);
                notifyDestroyed(); 
            }
            if(c==cmdOk)
            {
                display.setCurrent(frm2); 
            }
            if(c==cmdLogin)
            {
                s2 = tfUName.getString();
                s3 = tfPswd.getString(); 
                if((s2.equals("admin"))&&(s3.equals("sumesh")))
                {
                    display.setCurrent(frm3);
                }
            }
            if(c==cmdBack)
            {
                display.setCurrent(frm1);
            }

            if(c==cmdNextTR)
            {
                boolean choice1;
                choice1 = cgTrans.isSelected(0);
                boolean choice2;
                choice2 = cgTrans.isSelected(1); 
                boolean choice3;
                choice3 = cgTrans.isSelected(3);

                if(choice1==true)
                {
                    guitartype=1; 

                }
                if(choice2==true)
                {
                    guitartype=2; 
                }

                if(choice3==true)
                {
                    guitartype=3;
                }

                display.setCurrent(frm4);
            }

            if(c==cmdBackLG)
            {
                guitartype=0;
                display.setCurrent(frm2);
            }

            if(c==cmdPAmount)
            {
                boolean choice4;
                choice4 = cgTrans.isSelected(0);
                boolean choice5;
                choice5 = cgTrans.isSelected(1); 
                boolean choice6;
                choice6 = cgTrans.isSelected(3);

                if(choice4==true)
                {
                    guitarsize=3000; 

                }
                if(choice5==true)
                {
                    guitarsize=5000; 
                }

                if(choice6==true)
                {
                    guitarsize=7000;
                }

                display.setCurrent(frm5);
            }

            if(c==cmdBackLG)
            {
                guitarsize=0;
                display.setCurrent(frm3);
            }

            if(c==cmdNote)
            {
                s1 = Amount.getString();
                int s4 = Integer.parseInt(s1);
                if(s4>10)
                {
                    Alert bal1 = new Alert("Transaction not allowed","Not more than 10 guitars can be purchased at a time", null, AlertType.INFO);
                    bal1.setTimeout(5000);
                    display.setCurrent(bal1,frm7);
                }
                else
                {
                    int prize,totalprize;
                    prize=s4*(guitartype*guitarsize);
                    totalprize=prize;

                    frm7.append("Total cost of purchase is Rs: " + prize + "");
                    display.setCurrent(frm7);
                }
            }

            if(c==cmdBackTR)
            {
                display.setCurrent(frm4);
            }

            if(c==cmdExit2)
            {
                display.setCurrent(frm4);
            }

            if(c==cmdExit4)
            {
                destroyApp(false);
                notifyDestroyed(); 
            }
        }
        catch(Exception e)
        {
            System.out.println(e);
        }  
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:53:07.683

您正在尝试检查第 4 个选定索引（在 2 个位置）：

```
choice3 = cgTrans.isSelected(3); 
```

但只用 3 个项目填充了您的`ChoiceGroup`小部件。更好地使用：

```
choice3 = cgTrans.isSelected(2); 
```

# postgresql - PostgreSQL 中的第 n 行用于 p 分位数

> ID：12582151
> 
> 赞同：1
> 
> 时间：2012-09-25T11:37:38.220
> 
> 标签：postgresql, cursor, limit, offset, quantile

我正在尝试获取查询结果的第 n 行。其他帖子建议使用`OFFSET`或`LIMIT`但禁止使用变量（`ERROR: argument of OFFSET must not contain variables`）。此外，我阅读了游标的用法，但即使在阅读了他们的 PostgreSQL 手册页之后，我也不太确定如何使用它们。关于如何使用游标的任何其他建议或示例？

我的主要目标是计算一行的 p 分位数，由于 PostgreSQL 默认不提供此功能，我必须自己编写它。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:56:14.813

以下返回结果集的第 5 行：

```
select *
from (
   select <column_list>,
          row_number() over (order by some_sort_column) as rn
) t
where rn = 5; 
```

您*必须*包含一个`order by`，否则“第 5 行”的概念没有意义。

您提到“使用变量”，所以我不确定您实际上想要达到什么目标。但是您应该能够将该值`5`作为此查询（甚至是子选择）的变量提供。

您可能还想进一步研究窗口函数。因为有了它，您可以例如对当前行（或类似结构）之前的 3 行执行 sum() - 这也可能对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:08:11.813

如果您想获得第 10 条记录，下面的查询也可以正常工作。

```
 select * from table_name order by sort_column limit 1 offset 9 
```

OFFSET 只是在开始返回行之前跳过那么多行，如 LIMIT 子句中所述。

# dll - 如何在 Inno Setup 的安装和卸载时使用具有依赖关系的 DLL？

> ID：12582153
> 
> 赞同：3
> 
> 时间：2012-09-25T11:37:52.093
> 
> 标签：dll, inno-setup, pascalscript

卸载应用程序时，我想在我的 .iss 中导入两个 dll。我找不到办法做到这一点。

```
procedure Installed();
external 'Installed@files:StatisticInstallInfo.dll,adcore.dll cdecl  setuponly ';

procedure Uninstalled();
external 'Uninstalled@{app}\StatisticInstallInfo.dll cdecl  uninstallonly'; 
```

`adcore.dll`我也想在程序中导入`Uninstalled`。它失败了，如下所示；

```
[Files]
Source: {#MyDefaultPackDir}\adcore.dll; DestDir: "{app}"
Source: {#MyDefaultPackDir}\StatisticInstallInfo.dll; DestDir: "{app}" 
```

```
[Code]
procedure Uninstalled();
external 'Uninstalled@files:StatisticInstallInfo.dll,adcore.dll cdecl  uninstallonly'; 
```

这没用。

`Installed()`并且`Uninstalled()`在 中`StatisticInstallInfo.dll`，这取决于`adcore.dll`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T12:24:08.687

当安装程序运行时，Inno 可以访问设置的内容，因此可以使用`files:file1.dll,file2.dll`语法提取所需的任何文件。

在卸载时，Inno 不再可以访问设置的内容，因此它需要依赖于您在安装时使用普通`[Files]`条目提取的任何内容。因此，它不再关心依赖关系并将其留给您。

```
[Files]
Source: "StatisticInstallInfo.dll"; DestDir: "{app}"
Source: "adcore.dll"; DestDir: "{app}"

[Code]
procedure Installed();
external 'Installed@files:StatisticInstallInfo.dll,adcore.dll cdecl setuponly';

procedure Uninstalled();
external 'Uninstalled@{app}\StatisticInstallInfo.dll cdecl uninstallonly'; 
```

根据您调用该函数的时间（如果在安装本身之后），您可以放弃`files:...`语法并`{app}\StatisticInstallInfo.dll`在两种情况下都使用。

# android - 从街道方向获取地理位置

> ID：12582154
> 
> 赞同：0
> 
> 时间：2012-09-25T11:37:56.863
> 
> 标签：android, geolocation, maps

我的用户可以使用地理位置创建事件。然而，提示他们引入正确的地理位置远非最佳，并且要求他们指向地图然后转换按下的地理位置是一种非常不准确的方法。

有没有接受字符串并返回地理位置的免费服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:44:43.560

[地理](http://developer.android.com/reference/android/location/Geocoder.html)编码器可用于将街道地址转换为地理位置，反之亦然（称为“反向地理编码”。

# javascript - 如何在同一个地方设置 JavaScript 和 SASS 常量？

> ID：12582157
> 
> 赞同：3
> 
> 时间：2012-09-25T11:38:16.803
> 
> 标签：javascript, metaprogramming, constants, sass

有时需要设置一些常量两次：在 SASS 和 JS 中（例如为了更好的性能）。有谁知道同步 SASS/SCSS 和 JavaScript 变量以从 JavaScript 或从 SASS 到 JavaScript 访问 SCSS 变量的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:11:43.707

我知道这是大约一年前提出的问题，但我将这个答案作为下一个遇到此问题的可怜草皮的参考。那里可能有更好的解决方案，但这是我唯一能找到/想出的解决方案。

由于 JavaScript 似乎无法`.scss`直接从任何文件中获取变量，因此我们必须使用正则表达式从文件中获取所需的值。但是因为我们不想让它搜索整个 SASS 文件：

## 创建一个包含变量的 SASS 文件

我们创建一个新文件 ,`_variables.scss`供 JavaScript 搜索。假设它看起来像这样：

```
$menuMobileArrowRotate: 90;
$articleScale: 1.1; 
```

## 将其导入我们的主 SASS 文件

`@import "variables";`通过在样式表顶部附近添加将其导入 SASS 。然后我们可以在整个文件中使用这些变量，而不是手动输入值。

## 将其导入 JavaScript

我要让 JavaScript 读取`_variables.scss`并将其转换为字符串：

```
var sassVariables = new XMLHttpRequest();
sassVariables.open("GET", 'http://www.use-absolute-url.com/_variables.scss', false);
sassVariables.send(null); 
```

*注意：要支持 IE6 及更早版本，请替换`var xmlhttp = new XMLHttpRequest();`为：*

```
 if (window.XMLHttpRequest) {
      var sassVariables = new XMLHttpRequest();
    }
    else {
      var sassVariables = new ActiveXObject("Microsoft.XMLHTTP");
    } 
```

[（来源）](http://msdn.microsoft.com/en-us/library/ms537505%28v=vs.85%29.aspx)

如果我设置异步。到`true`，Firebug 向我显示一个声称`fileContent`不存在的错误。而且由于我的文件只有 4KB，因此我不必担心潜在的性能问题，因为我必须等待它加载。

现在，我要声明我的变量：

```
var fileContent = sassVariables.responseText, //a string holding the contents of my file
    menuMobileArrowRotate = null,
    articleScale = null; 
```

我在确保文件实际加载之前声明`menuMobileArrowRotate`，`articleScale`因为我不希望 JavaScript 给我一个错误并因为它没有加载而搞砸一切。

如果一切正常，我将使用 RegEx 找出每个变量的值。至少我只是浏览一个小文件，而不是搜索整个样式表。

```
if (sassVariables.status === 200) { //if everything loaded nice and dandy
    menuMobileArrowRotate = fileContent.match(/(?:menuMobileArrowRotate.\s*?)(\d+)/)[1];
    articleScale = data.match(/(?:articleScale.\s*?)((\d+)\.*(\d+)*)/)[1];
} 
```

注意`[1]`after `.match()`: RegEx 返回一个数组，我只想要第一个匹配项（在我的情况下，它也是唯一的匹配项）。

对于所有的 JS 放在一起：

```
if (window.XMLHttpRequest) {
  var sassVariables = new XMLHttpRequest();
}
else {
  var sassVariables = new ActiveXObject("Microsoft.XMLHTTP");
}

sassVariables.open("GET", 'http://mysite.com/sass/_variables.scss', false);
sassVariables.send(null);
var fileContent = sassVariables.responseText,
    menuMobileArrowRotate = null,
    articleScale = null;

if (sassVariables.status === 200) {
    menuMobileArrowRotate = fileContent.match(/(?:menuMobileArrowRotate.\s*?)(\d+)/)[1];
    articleScale = fileContent.match(/(?:articleScale.\s*?)((\d+)\.*(\d+)*)/)[1];
}
console.log(menuMobileArrowRotate); //shows 90
console.log(articleScale); //shows 1.1 
```

我现在可以在这段代码之后在我的 JavaScript 文件中的任何地方使用这些变量。

## 奖励：媒体查询变量

SASS 不允许您*在*媒体查询中使用变量。但是，我可以[使整个 dang 查询成为 mixin](http://css-tricks.com/media-queries-sass-3-2-and-codekit/)，并将其放入`_variables.scss`：

```
@mixin mediaQuery($point) {
  @if $point == 'mobile' {
    @media only screen and (max-width: 600px) { @content; }
  }
  @if $point == 'somethingElse' {
    @media only screen and (max-width: 1000px) { @content; }
  }
} 
```

在`style.scss`中，我可以拥有：

```
@include mediaQuery(mobile) {
    //blah
}
@include mediaQuery(somethingElse) {
    //blah
} 
```

然后我可以使用相同的过程来获得所需的值（即 600 和 1000），只是使用不同的 RegEx。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-15T21:51:22.123

您可以尝试在 SASS/CSS 注释块中编写 JSON：

```
/*
    {
        "blue"  : "#{$blue}",
        "green" : "#{$green}"
    } 
```

然后在客户端提取和[解析](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse)它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-09T16:21:29.030

如果您使用 webpack 和 CSS 模块和 SASS（例如使用 React），您可以使用 :export 伪选择器，如此[处](https://github.com/css-modules/icss.)或[此处所述](https://www.bluematador.com/blog/how-to-share-variables-between-js-and-sass)

# mysql - Mysql：从每只猫获得2个结果[一对多关系]

> ID：12582162
> 
> 赞同：6
> 
> 时间：2012-09-25T11:38:41.603
> 
> 标签：mysql, sql, performance, join

**我正在寻找使用数据库获取结果的最佳方法，其中包含超过 100000 个帖子和超过 100000 个猫**

这是我的桌子

**猫**

```
-----------------
-  id   | name  |
-----------------
-  1    | x     |
-----------------
-  2    | y     |
----------------- 
```

**邮政**

```
--------------------------------------
-  id   | cat_id | title  | content  |
--------------------------------------
-  1    | 1      | Post 1 | .. . .  .|
--------------------------------------
-  2    | 1      | Post 2 | . . . . .|
--------------------------------------
-  3    | 2      | Post 3 | .. . .  .|
--------------------------------------
-  4    | 1      | Post 4 | . . . . .|
--------------------------------------
-  5    | 1      | Post 5 | .. . .  .|
--------------------------------------
-  6    | 2      | Post 6 | . . . . .|
--------------------------------------
-  7    | 1      | Post 7 | .. . .  .|
--------------------------------------
-  8    | 2      | Post 8 | . . . . .|
-------------------------------------- 
```

这是我想要得到的结果

**结果**

```
--------------------------------------
-Postid | cat_id | title  | content  |
--------------------------------------
-  1    | 1      | Post 1 | .. . .  .|
--------------------------------------
-  2    | 1      | Post 2 | . . . . .|
--------------------------------------
-  3    | 2      | Post 3 | .. . .  .|
--------------------------------------
-  6    | 2      | Post 4 | . . . . .|
-------------------------------------- 
```

**这是我刚写的查询，但我寻找最佳查询**

```
SELECT
  *
From 
  post
WHERE posts.cat_id = 1 limit 2

UNION

SELECT
  * 
From 
  post
WHERE posts.cat_id = 2 limit 2 
```

**如果我想在一次查询中从 10 只猫中获取信息，会发生什么**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:51:45.733

```
set @i := 0, @cat_id = 0;
select 
    post.id as Postid,
    cat_id,
    title,
    content
from 
    post
    inner join (
    select 
        id,
        case 
            when @cat_id = cat_id then @i := @i + 1
            else @i := 1
        end as i,
        case when @cat_id != cat_id then @cat_id := cat_id end
    from (
        select id, cat_id
        from post
        -- where cat_id in (1, 2) uncomment this to limit categories
        order by cat_id
    ) a
) s on s.id = post.id
where i <= 2
order by cat_id, post.id 
```

问题标题说明了每个类别，问题说明了 10 个类别，因此我评论了 where 子句以使其成为可选。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-25T12:18:23.897

为了获得更好的性能，请使用该`exists`子句

```
select * from posts p where exists
(select c.id from cats c) 
```

检查[sqlfiddle](http://www.sqlfiddle.com/#!8/a0b60/11)。

# javascript - 如何删除两个特定字符之间的子字符串

> ID：12582164
> 
> 赞同：8
> 
> 时间：2012-09-25T11:38:54.360
> 
> 标签：javascript, regex, substring

所以我有一个字符串：

```
"this is the beginning, this is what i want to remove/ and this is the end" 
```

如何使用 Javascript 来定位逗号和正斜杠之间的字符串？（我也想删除逗号和斜线）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T11:41:18.790

```
string = string.replace( /,.*?\//, '' ); 
```

在[regexp](http://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)中，`,`匹配自身，`.*?`匹配任何字符序列（由于`?`修饰符，首选最短匹配）并`\/`匹配斜杠。（斜杠需要用反斜杠转义，因为它也用作正则表达式分隔符。不幸的是，JavaScript 不支持替代正则表达式文字分隔符，因此您只需要应对[倾斜牙签综合症](http://en.wikipedia.org/wiki/Leaning_toothpick_syndrome)。）

请注意，上面的代码删除了字符串中从第一个逗号到第一个斜杠的*所有*内容*。*如果可能有多个逗号或斜杠，根据您想要发生的情况，有多种方法可以修改正则表达式的行为。例如：

*   `.replace( /,.*\//, '' )`删除从第*一个*逗号到*最后一个*斜杠的所有内容；
*   `.replace( /^(.*),.*?\//, '$1' )`删除从*最后一个*逗号后跟一个斜线到下一个斜线的所有内容；
*   `.replace( /^(.*),.*\//, '$1' )`删除从*最后一个*逗号后跟一个斜线到字符串中*最后一个斜线的所有内容；*
*   `.replace( /,[^\/]*\//, '' )`与原始正则表达式相同，即删除从第一个逗号到后面第一个斜杠的所有内容（即使中间有其他逗号）；
*   `.replace( /,[^,\/]*\//, '' )`删除第一个以逗号开头并以斜杠结尾且中间*不包含任何逗号或斜杠的*子字符串；
*   `.replace( /^(.*),[^,\/]*\//, '$1' )`删除以逗号开头并以斜杠结尾的*最后一个*子字符串，中间没有逗号或斜杠；和
*   `.replace( /^,[^,\/]*\//g, '' )`删除*所有*以逗号开头并以斜杠结尾且中间没有逗号或斜杠的子字符串。

另请注意，由于正则表达式语法的历史怪癖，`.`元字符实际上将匹配*除*换行符 ( `"\n"`) 之外的任何字符。大多数正则表达式实现都提供了一些方法来关闭这个怪癖并`.`真正匹配所有字符，但由于某种原因，JavaScript 没有。`.`如果您的字符串可能包含换行符，您应该用一些[变通方法](https://stackoverflow.com/questions/1068280/javascript-regex-multiline-flag-doesnt-work)替换上述正则表达式中所有出现的 of ，例如`[\s\S]`（适用于大多数 PCRE 风格的正则表达式引擎）或`[^]`（更短，但特定于 JavaScript 的正则表达式风格）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T11:41:57.673

由于您的问题用正则表达式标记，您似乎想要`.replace`：

```
return str.replace(/, this is what i want to remove\//, ""); 
```

如果您不知道中间的字符串，请使用

```
/,(.+?)\// 
```

或使用 a`*`而不是`+`if 字符串也可以为空

使用字符串函数，它将是

```
var cpos = str.indexOf(","),
    spos = str.indexOf("/");
if (cpos > -1 && spos > cpos)
    return str.substr(0, cpos)+str.substr(spos+1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T11:44:58.627

```
return str.split(',')[1].split('/')[0]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-25T11:40:57.770

```
var commaIndex=str.indexOf(',')
var slashIndex=str.indexOf('/')
var finalString=str.substring(commaIndex,slashIndex) 
```

希望它会起作用

# xcode - 如何在 Xcode 中显示 JSON 数组？

> ID：12582166
> 
> 赞同：1
> 
> 时间：2012-09-25T11:38:57.667
> 
> 标签：xcode, arrays, json

我得到了这个 json 响应，我为 nsdictionary 创建了一个对象并保存在那里

```
NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error]; 
```

下一步我保存为数组

```
NSArray *country=[json objectForKey:@"results"]; 
```

然后我在控制台中得到了以下结果。

```
2012-06-18 09:22:07.647 TableView[468:f803] (
                {
                "Countries" = Iceland;
                 "id"=9046567;
                  "name"=abceeeffdsg;

            },
                {
                "Countries" = Greenland;
                "id"=3524695;
                "name"=gsfjgfsethju;
    },
                {
                 "Countries" = Switzerland;
                 "id"=4613583;
                 "name"=hdfkdgs;
        ) 
```

但实际上我想在 UITableView 中显示这些数据。谁能帮我完成我的工作……谢谢你的好意……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:44:28.923

在 tableview 数据源方法中

```
1\. numberof RowInSection use the [country count];
2\. In the cellForRowAtIndexPath

    cell.textLabel.text = [[country objectAtIndex:indexPath.row] objectForKey:@"Countries"]; 
```

如果您需要更多详细信息，请告诉我。

# php - 使用 PHP 根据关联数组的键更改一个数组中的值

> ID：12582169
> 
> 赞同：0
> 
> 时间：2012-09-25T11:39:14.883
> 
> 标签：php, arrays

我希望我的问题能够充分描述我所追求的......

这是情况。我有以下带有值的数组。

```
categories['t-shirts'] = 10
categories['shorts'] = 11
...

clothing[0] = 't-shirts'
clothing[1] = 'shorts'
... 
```

我想将服装数组（T 恤、短裤）中的值替换为类别数组中与其匹配的数字。

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T11:41:27.230

```
foreach($clothing as $key => $val){
    if(isset($categories[$val])){
         $clothing[$key] = $categories[$val];
    }
} 
```

[键盘示例](http://codepad.org/XpDBWjLI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:41:24.947

你可以使用简单的php

```
categories[clothing[0]] = "some value" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:42:34.493

从你的问题来看，它看起来像

```
$newArray=array_keys($originalArray); 
```

应该做的伎俩。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T11:45:30.313

```
$count = count($clothing);
for($i=0; $i<$count; $i++)
    $clothing[$i] = (array_key_exists($clothing[$i], $categories))
        ? $categories[$clothing[$i]] : 0; 
```

用于将没有任何计数的 $clothings 设置为 0

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T11:46:59.153

```
$categories = array();
$categories['t-shirts'] = 10;
$categories['shorts'] = 11;

$clothing = array();
$clothing[0] = 't-shirts';
$clothing[1] = 'shorts';

array_walk($clothing,
           function(&$value) use($categories) {
               if (isset($categories[$value]))
                   $value = $categories[$value];
           }
);
var_dump($clothing); 
```

# asp.net - 加密连接字符串时出错（未找到配置部分“connection1”。）

> ID：12582171
> 
> 赞同：0
> 
> 时间：2012-09-25T11:39:24.667
> 
> 标签：asp.net, c#-4.0, web-config, connection-string

```
C:\WINDOWS\Microsoft.NET\Framework\v2.0>aspnet_regiis.exe -pef connection1
"C:\Website1" -prov "RSAProtectedConfigurationProvider"
Encrypting configuration section...
The configuration section 'connection1' was not found.
Failed! 
```

以上是我在加密连接字符串时遇到的错误的屏幕截图

网络配置文件如下，

```
<configuration>

    <connectionStrings>
        <add name="connection1" connectionString="Data Source=inpun2-s4pvh8bs;uid=cusa;pwd=csusa;Initial Catalog=ChemTrack"/>
    </connectionStrings>
</configuration> 
```

* * *

对此有任何想法吗？

我从 Visual Studio 2010 命令提示符运行它。我使用的空调也是管理员组的成员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:51:17.950

试试这个：

```
aspnet_regiis.exe -pef "connectionStrings" "C:\Website1" 
```

更多信息：http: [//www.codeproject.com/Tips/304638/Encrypt-or-Decrypt-Connection-Strings-in-web-confi](http://www.codeproject.com/Tips/304638/Encrypt-or-Decrypt-Connection-Strings-in-web-confi)

# android - Android windowSoftInputMode="adjustResize" 在横向模式下不起作用

> ID：12582174
> 
> 赞同：3
> 
> 时间：2012-09-25T11:39:38.243
> 
> 标签：android, android-layout, android-manifest

我有一个应该显示在底部的按钮布局，即使当键盘出现时它也应该显示在键盘上方所以我在 AndroidManifest.xml 中为 Activity 添加了 $windowSoftInputMode="adjustResize" 现在这在纵向模式下工作正常，但在横向模式下失败.

# git - 尝试拉取远程仓库时 git 中的错误被拒绝

> ID：12582175
> 
> 赞同：1
> 
> 时间：2012-09-25T11:39:46.463
> 
> 标签：git

1.  我创建了我的 repo (A) 并在初始提交时添加了所有文件。
2.  然后我在该存储库 (A) 中提取了几个文件，并在另一个未连接到 (A) 的 git 存储库 (B) 中检查它们。
3.  repo (B) 转换为 github repo
4.  然后从 repo (A) 我做了 git remote add githubrepo git@github....
5.  然后从 repo (A) 我做了 git branch newbranch
6.  然后从 repo (A) 我做了 git checkout newbranch
7.  然后从 repo (A) 我做了 git pull githubrepo master:newbranch

我得到

```
rom github.com:user2323/githubrepo 
! [rejected]        master     -> master:newbranch  (non-fast-forward) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:24:46.450

Git 建议拉动会导致非快进更新，换句话说，`master`repos A 和 B 之间的分支历史是不同的。考虑到第 2 步，这听起来完全合理。您可能希望在本地跟踪该分支，而不是依赖于`git pull`：

`git checkout --track -b newbranch githubrepo/master`

# html - 更改自动对焦样式

> ID：12582191
> 
> 赞同：1
> 
> 时间：2012-09-25T11:40:41.327
> 
> 标签：html, css

我在页面上有一个文本字段，并且我已经设置了自动对焦，以便将光标放置在文本字段中输入，我的问题是......

我已将边框半径设置为 30px，以便文本字段在浏览器中显得更智能，对眼睛更友好，但是自动自动对焦不考虑弯曲边缘并将文本字段突出显示为矩形，这看起来很愚蠢。

有没有办法通过使用 CSS 来改变它，以便自动对焦突出显示弯曲的文本字段，而不是默认的方形边缘？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:49:05.627

```
input[type='text']:focus{
 border-radius:30px;
 outline:none;
}​

<input type="text" autofocus="true"/>​ 
```

[演示](http://jsfiddle.net/afshinprofe/um4PZ/1/)

# javascript - Jquery/Java Script：通过链接选项（例如形状、颜色）自定义图像/头像

> ID：12582194
> 
> 赞同：2
> 
> 时间：2012-09-25T11:40:55.353
> 
> 标签：javascript, jquery, avatars, avatar-generation

许多网站允许您通过更改选项来自定义图像。

例如，这个[芭比网站](http://shop.mattel.com/styledByMeBarbie/index.jsp)让您可以创建自己的芭比娃娃。您可以在单击时单击各种发型和衣服以及主要图像更新。

其他服装网站也做类似的事情。

是否有任何教程向您展示如何使用 Java Script 或 Jquery 执行此操作？

理想情况下，我正在寻找可以让您在不同情况下重用代码的模板。

我找到了一些教程，但它们都使用 PHP： [Bokehman](http://bokehman.com/do_it_yourself_avatars/) - 这个网站说它使用 Javascript，但它实际上使用的是 PHP [Code Canyon](http://codecanyon.net/item/php-avatar-maker/2903116) - 这个脚本是模板化的，可以轻松换出元素，但再次使用 PHP。

我知道[Javascript 确实不支持写入文件](https://stackoverflow.com/questions/3731933/jquery-javascript-library-for-avatar-creation)，因此您必须使用 PHP 解决方案来保存图像。但是，我只是在寻找一些东西来创建图像。在这个阶段，我不关心储蓄。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T11:56:14.130

这就是我最终做到的方式。

**1) 为每个资产创建一个单独的 CSS 类。**

连接由多个变量组成的资产的类。创建一个`.input`父类来显示选择表单的图像资产。创建一个`.preview`子类以在完成的头像上显示图像资产

例如

```
.skin-brown .preview .preview-body {
background-image(<<image-asset>>);
}

.input .input-skin-brown {
background-image(<<image-asset>>);
}

.input .input-hair-style-1 {
background-image(<<image-asset>>);
}

.hair-style-1.hair-colour-black .preview .preview-hair {
background-image(<<image-asset>>);
} 
```

**2) 创建 HTML。**将默认资产选项分配给包装器元素。

例如

```
<div id="wrapper" class="hair-style-1 hair-colour-black skin-brown">

<div class="inputs">
Put your input FORM here. Use a HTML form element.
</div>

<div class="preview">
The finished avatar goes here.
<div class="preview-hair"></div>
<div class="preview-eyes"></div>
<div class="preview-body"></div>
</div>

</div> 
```

**3) 当输入表单中的选项被点击时，使用 Jquery 来操作包装器上的类。**

例如，如果用户单击 hair-style-2，则包装器中的 hair-style-1 类将更改为 hair-style-2

我对此有一个单独的问题： [jQuery: Swap Classes based on Class position](https://stackoverflow.com/questions/12641910/jquery-swap-classes-based-on-class-position)

这基本上就是它的全部内容。一旦您编写了 css 类和用于切换类工作的 Jquery 代码，它实际上非常简单。因为您将所有输入存储为表单，所以当用户单击提交时，您可以将值发送到另一个进程。

**尖端：**

**1) 使用 SASS/SCSS 编写 css。** 您可以创建一个数组并在 sass 中循环遍历它，这使得维护 css 变得容易。我在这里有一个问题： [Sass: Using two @each lists in SCSS](https://stackoverflow.com/questions/12645962/sass-using-two-each-lists-in-scss) [CSS - SASS: Using @each based mixins to generate multiple backgrounds](https://stackoverflow.com/questions/12825039/css-sass-using-each-based-mixins-to-generate-multiple-backgrounds)

**2) 避免使用 CSS 精灵。** 尽管精灵对加载时间有很大帮助，但我认为你会疯狂地尝试维护它（取决于所涉及的资产）。有一些工具可以为您维护它，但因为这是一个边缘案例，我认为这些工具不能很好地工作。

**3) 加载速度是个问题** 当用户点击头像元素时，CSS 加载会有短暂的延迟。这是一个问题，因为用户认为他们的点击尚未注册。为了解决这个问题，创建一个隐藏的 div，它使用`display:none`. 然后使用 CSS3 多重背景属性将每个资产附加到此 DIV（作为背景）。这样，您的所有资产都会在开始时加载，因此用户点击时不会有延迟。同样，为此使用 SASS 循环和数组，因为数组会自动将所有资产添加到隐藏的 DIV。

**4) 仔细考虑类和资产名称。** 我最初选择友好的名称（例如 haircolourblack、historybob），因为我认为这样更容易理解代码。然而，事后看来，我希望我已经选择了编号名称（头发颜色 1、发型 1），因为如果您的资产发生变化，事情会变得很棘手（此外，使用数字可以很容易地针对多个化身维护代码）。同样，使用 SASS 数组来减少对此的维护。

**5) 使用类前缀** （例如`.preview .preview-eye`，代替`.preview .eye`或`.preview .preview-hair-style`代替`.preview .hair` ）。这样做的原因是很多名称非常通用，可能会在页面上的多个位置使用（例如，用于 .preview 和 .input 部分）。如果使用前缀，则更容易定位特定类。另外，您可以使用`[class*="preview-"]`或`[class*="input-"]` 定位前缀的所有成员，而不必在代码中乱扔许多共享类（例如`[class*="-hair-"]`，无需将单独的头发类应用于每个头发元素即可获取所有头发元素。

**6) 考虑 SVG** 如果您将 SVG 用于您的图像资产，您可以保持文件较小，并且它们可以放大到任意大小。请务必注意 SVG 浏览器兼容性 ( [http://caniuse.com/svg](http://caniuse.com/svg) )

**7) 考虑 CSS 背景大小** 您还可以使用`background-size: contain`缩放图像资源，这样可以轻松地为 .preview 和 .input 实例重用相同的图像。但是，它也存在兼容性问题。

它看起来确实是一个令人生畏的项目，主要是因为没有任何关于如何构建它的资源。但如果你把它分解，它实际上很容易。主要是代码维护是个问题，所以一定要计划好！

# php - 如何处理神奇实现的方法的“类中找不到方法”警告？

> ID：12582202
> 
> 赞同：55
> 
> 时间：2012-09-25T11:41:30.503
> 
> 标签：php, phpstorm

我坐在一个包含几个类的大型代码库上，这些类通过神奇地实现的方法（使用`__call`和`__callStatic`）公开功能。例如：

```
class Foo {
    public function __call($name, $parameters) {
        echo "You called $name().\n";
    }
}

$f = new Foo;
$f->test();   // runs fine, but PhpStorm flags as a warning 
```

问题是PhpStorm认为该`test()`方法不存在，所以在调用处给出警告。这有点烦人，因为代码当然会按预期运行和表现。

我已经通过检查“如果类中存在 __magic 方法，则降级严重性”选项来调低严重性，但我更愿意：

1.  *仅*针对特定类完全禁用此功能，或
2.  与 IDE 合作而不是反对它——向它提供我已经拥有的信息，以便我们的观点一致

**以上任何一种可能吗？如果是这样，怎么做？**

额外的奖励问题：考虑方法调用被链接的情况。

```
$f = new Foo;
$f->test()->chain()->moreChain();   // potentially runs fine 
```

假设魔术调用`$f->test()`返回适当的后续（可能但不一定也是魔术）调用将正常工作。但是，由于我不知道有什么方法可以告诉 IDE`test()`返回什么，因此它会将调用链的其余部分也标记为缺少方法。更糟糕的是，“降级严重性”设置不适用于这些警告，因为 IDE 不知道这些中间对象应该是什么类。

**有没有可以涵盖这种情况的解决方案？**

## 更新

尽管用`@method`注释记录魔法方法似乎有效，但我不得不假设这种方法目前存在几个问题，因为我只花了一点工作就发现了这些相关的错误：

*   [方法参数的类型提示不适用于原语](http://youtrack.jetbrains.com/issue/WI-13654)
*   [注释适用于一个调用，但不适用于链接调用](http://youtrack.jetbrains.com/issue/WI-13731)

我确实希望他们在合理的时间范围内修复它们。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-25T12:36:49.947

好吧，您可以转到首选项菜单，在*Inspections*下，转到*Undefined -> Undefined Method*并检查**Downgrade severity if __magic methods are present**。

这将使标志不那么严重（而不是警告，作为信息），这仍然会给您的文件检查开绿灯。

除了针对可能使用的每个方法在目标类上使用 PHPDoc 表示法`@property`之外，我不知道其他任何事情。`@method`

![在此处输入图像描述](../Images/ad7e90302aff137a4e443916c460c87b.png)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2016-09-29T14:27:37.223

无需通过降低检查的严重性来全局关闭检查，您可以在单行中添加注释以忽略该特定检查。

```
 /** @noinspection PhpUndefinedMethodInspection */
    Assertion::NullOrAssertionDoesNotExist(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-18T10:08:47.693

基于 Madara 所说的，我发现无论我将其设置为何种严重性，它都不会降级到我喜欢的程度，因此我为未定义的方法创建了一个新的严重性，该方法*没有任何属性*，并关闭了降级复选框（见下图）

[![在此处输入图像描述](../Images/c3249b13895610dec4bf4a9edd10081d.png)](https://i.stack.imgur.com/megzg.png)

如果我现在将鼠标悬停在我的魔法方法上，它仍然会弹出弹出消息，但不会分散我的注意力。比仅仅关闭检查要好一步，因为至少通过这种方式，仍然可以通过将鼠标悬停在名称上来检测实际的未定义方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-28T14:00:12.150

您可以使用动态变量：

```
$test = 'test';
$chaine = $f->$test();   // no phpStorm flag, & the code works 
```

# ubuntu - 了解 CPU 架构缩写

> ID：12582204
> 
> 赞同：2
> 
> 时间：2012-09-25T11:41:34.353
> 
> 标签：ubuntu, cpu, intel, amd-processor

我已经在电脑上安装了 ubuntu。现在我想知道它的CPU架构。我已经读过 uname -a 可以用于此，所以：

```
~$ uname -a
Linux desknode1 3.2.0-23-generic #36-Ubuntu SMP Tue Apr 10 20:39:51 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

从这个页面：

[http://en.wikipedia.org/wiki/X86-64](http://en.wikipedia.org/wiki/X86-64)

我推断它是一个AMD cpu。但是如果我运行：

```
~$ grep --color "model name" /proc/cpuinfo
model name  : Intel(R) Xeon(R) CPU           E5430  @ 2.66GHz
model name  : Intel(R) Xeon(R) CPU           E5430  @ 2.66GHz
model name  : Intel(R) Xeon(R) CPU           E5430  @ 2.66GHz
model name  : Intel(R) Xeon(R) CPU           E5430  @ 2.66GHz
~$ 
```

表明它是英特尔四核。我也尝试过运行**lscpu**：

```
$ lscpu
Architecture:          x86_64
CPU op-mode(s):        32-bit, 64-bit
Byte Order:            Little Endian
CPU(s):                4
On-line CPU(s) list:   0-3
Thread(s) per core:    1
Core(s) per socket:    4
Socket(s):             1
NUMA node(s):          1
Vendor ID:             GenuineIntel
CPU family:            6
Model:                 23
Stepping:              6
CPU MHz:               2659.954
BogoMIPS:              5320.00
Virtualization:        VT-x
L1d cache:             32K
L1i cache:             32K
L2 cache:              6144K
NUMA node0 CPU(s):     0-3 
```

供应商 ID：GenuineIntel

表示英特尔 CPU。那么这台机器上的cpu是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-13T19:04:36.197

"uname -a" 只显示编译的架构内核。例如，在 64 位 cpu (/proc/cpuinfo) 上使用 32 位内核 (uname) 是没有问题的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:44:22.433

我不确定您从哪里获得 AMD。x86_64 意味着您有一个 64 位处理器并且它是一个 x86 处理器。这可以是英特尔或 AMD。既然其他一切都说英特尔，那么你就有了英特尔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-27T17:51:40.100

您有一个 Family 6 Model 23 Stepping 6。

Google 透露您拥有 Intel(R) Core(TM)2 Extreme CPU X9650 @ 3.00 GHz。

换句话说，你有一个 8 超线程 CPU 的 4 核 CPU。

[http://www.jackcobben.nl/?p=2013](http://www.jackcobben.nl/?p=2013)

# python - 使用 django 的 Epydoc

> ID：12582206
> 
> 赞同：0
> 
> 时间：2012-09-25T11:41:46.537
> 
> 标签：python, django, documentation-generation

感谢epydoc，我正在尝试生成文档。我写了 confdoc.txt

我的模块输入来自：C:\Documents and Settings\drale\Desktop\new\project。

我有一个错误：`Could not find a file or object named C:\Documents and Settings\drale\Desktop\new\project.`

这是包含我所有 django 项目的项目目录的路径。我认为这是因为路径中的空间。但我尝试使用“”，甚至使用其中三个，使用\，但同样的错误再次发生。

我在窗户上工作。如果你有任何想法谢谢

# android - Android ArrayAdapter/ListView 在 Fragment 中不更新

> ID：12582208
> 
> 赞同：1
> 
> 时间：2012-09-25T11:41:49.723
> 
> 标签：android, android-listview, android-fragments, android-linearlayout, android-arrayadapter

我在通过 Android 片段中的 ArrayAdapter 更新 ListView 时遇到问题。

我有一个处理从服务器检索到的 .csv 的方法。它解析 .csv 并执行以下操作：

```
for(int i =0; i< lines.length; i++){
    String[] words = lines[i].split(",");
        for(int j = 0;j<words.length; j++)
            if ( j%6 == 1 || j%6 == 2)
                getArrayAdapter().add(words[j]); 
```

使用断点，我可以看到“words[j]”是一个有效的字符串。getArrayAdapter 方法如下：

```
private ArrayAdapter<String> getArrayAdapter(){
   if (aa == null){
        ListView lv = (ListView)   getCurrentActivity().findViewById(R.id.list);
        aa = new ArrayAdapter<String>(
                getCurrentActivity(),
                android.R.layout.simple_list_item_1);
        aa.setNotifyOnChange(true);
        lv.setAdapter(aa);
    }
    return aa;
} 
```

如果“getArrayAdapter().add(words[j]);” 被调用时，ArrayAdapter 中的方法“notifyDataSetChanged()”被调用，因为它应该：

```
@Override
public void notifyDataSetChanged() {
    super.notifyDataSetChanged();
    mNotifyOnChange = true;
} 
```

通过其父级，它到达执行此操作的 DataBaseObservable：

```
public void notifyChanged() {
    synchronized(mObservers) {
        // since onChanged() is implemented by the app, it could do anything, including
        // removing itself from {@link mObservers} - and that could cause problems if
        // an iterator is used on the ArrayList {@link mObservers}.
        // to avoid such problems, just march thru the list in the reverse order.
        for (int i = mObservers.size() - 1; i >= 0; i--) {
            mObservers.get(i).onChanged();
        }
    }
} 
```

观察者数组有一个“AdapterDataSetObserver”，其中包含对我的适配器和 ListView 的所有类型的引用。我查看了 AdapterDataSetObserver 的 onChanged() 中发生了什么，但我真的不知道该看什么。

我的 table_fragment.xml 看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent" 
  android:orientation="vertical" 
  android:id="@+id/top">
    <ListView android:layout_width="match_parent"
              android:layout_height="0dip"
              android:layout_weight="2"
              android:numColumns="2"
              android:columnWidth="30dp"
              android:id="@+id/list">
    </ListView>
</LinearLayout> 
```

包含 Fragment 的活动的 xml 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <fragment android:name="com.example.TableFragment"
              android:id="@+id/table_fragment"
              android:layout_weight="0"
              android:layout_width="match_parent"
              android:layout_height="0dip" />
</LinearLayout> 
```

在查看日志时，没有什么奇怪的。一切似乎都很好，但屏幕没有显示任何字符串。

我在这里想念什么？可能缺少一些微不足道的东西，因为我是 Android 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:46:22.060

```
android:layout_height="0dip" 
```

这是错误的。你应该让`ListView`所有可用的空间。改进去`fill_parent`

然后：

```
aa = new ArrayAdapter<String>(
                getCurrentActivity(),
                android.R.layout.simple_list_item_1); 
```

您需要向 Apdater 提交要显示的数据集。为此，您应该使用此[构造函数](http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter%28android.content.Context,%20int,%20T%5B%5D%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:44:20.193

事实证明，ListView 的 layout_height 可以为 0（它会自动扩展）。但是，在包含该片段的 Activity 的 xml 中，layout_height 无法设置为 0（它不会自动展开）。我也把它放在了 0dip 上（在 Eclipse 的建议之后）。更改为“match_parent”完成了这项工作（尽管有 Eclipse 警告）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T21:48:39.950

@Jos，您选择的答案不是正确答案。高度可以而且`ListView`应该是 0dp。为了使`ListView`to 以默认方式运行，您需要将 Id 更改`ListView`为完全`android:id="@id/android:list"`，您还可以添加一个`TextView`or`ProgressBar`以在列表为空时显示，也是 的默认功能`ListView`，如下所示：

```
<TextView
android:id="@id/android:empty"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center_horizontal|center_vertical"
android:text="@+string/empty_list_message" /> 
```

同样，id 必须完全匹配，其他所有内容都可以根据您的需要进行更改。这是完整的 xml 的样子：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <ListView
        android:id="@id/android:list"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:drawSelectorOnTop="false" 
        android:listSelector="@drawable/list_selector"/>

    <TextView
        android:id="@id/android:empty"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center_horizontal|center_vertical"
        android:text="@string/empty_list_message" />

</LinearLayout> 
```

`layout_weight`和是我的程序所特有的`listSelector`，您可能需要也可能不需要这些。

# sql-server - 将列连接在一起，列可以为空

> ID：12582220
> 
> 赞同：0
> 
> 时间：2012-09-25T11:42:38.813
> 
> 标签：sql-server, tsql

我需要将值组合在一起并将其复制到不同的列。

```
COLUMN 1 | COLUMN 2 |  COLUMN 3 | COLUMN 4 
Hallo      out         there      Hallo out there
My         NULL        name is    My name is
I'm        a           rabbit     I'm a rabbit 
```

如何合并第 1、2、3 列并将其复制到以空格分隔的第 4 列。

列可以为空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T11:45:36.427

```
UPDATE dbo.table
  SET column4 = COALESCE(column1, '') 
      + COALESCE(' ' + column2, '')
      + COALESCE(' ' + column3, ''); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T11:51:32.580

SQL Server 2012

```
UPDATE table
SET Column4 = CONCAT(Column1 + ' ', Column2 + ' ', Column3) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T11:44:58.893

只需使用 + 号

```
 select ISNULL([COLUMN 1],'')+' ' +
         isnull([COLUMN 2],'')+' ' +
         isnull([COLUMN 3],'') 
  from your_table 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T11:45:54.347

使用`ISNULL`

```
UPDATE table
SET Column4 = 
ISNULL(Column1+' ','') + 
ISNULL(Column2+' ','') + 
ISNULL(Column3,'') 
```

或者您可以考虑使用计算列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T11:47:05.833

```
update yourtable SET COlumn4= ltrim(rtrim(isnull([COLUMN 1],'') +' '+isnull([COLUMN 2],'') +' '+  isnull([COLUMN 3],''))) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T11:53:54.910

```
select isnull(convert(varchar(255),[COLUMN1]),'')+' '+isnull(convert(varchar(255),[COLUMN2]),'')+' '+isnull(convert(varchar(255),[COLUMN3]),'')
from table

UPDATE table
SET COLUMN4 = isnull(convert(varchar(255),[COLUMN1]),'')+' '+isnull(convert(varchar(255),[COLUMN2]),'')+' '+isnull(convert(varchar(255),[COLUMN3]),'') 
```

根据数据类型，上述代码可能无法正常工作，因此您可以先将其转换为 varchar。

# c#-4.0 - 如何将 csv 文件中的数据读入 C# 控制台应用程序

> ID：12582223
> 
> 赞同：3
> 
> 时间：2012-09-25T11:42:41.653
> 
> 标签：c#-4.0

```
using System;
namespace jagged_array
{
class Program
{
static void Main(string[] args)
{
string[][] Members = new string[10][]{
new string[]{"amit","amit@gmail.com",         "9999999999"},
new string[]{"chandu","chandu@gmail.com","8888888888"},
new string[]{"naveen","naveen@gmail.com", "7777777777"},
new string[]{"ramu","ramu@gmail.com",       "6666666666"},
new string[]{"durga","durga@gmail.com",     "5555555555"},
new string[]{"sagar","sagar@gmail.com",      "4444444444"},
new string[]{"yadav","yadav@gmail.com",    "3333333333"},
new string[]{"suraj","suraj@gmail.com",        "2222222222"},
new string[]{"niharika","niharika@gmail.com","11111111111"},
new string[]{"anusha","anusha@gmail.com",  "0000000000"},
};

for (int i =0; i < Members.Length; i++)
{
System.Console.Write("Name List ({0}):", i + 1);
for (int j = 0; j < Members[i].Length; j++)
{
System.Console.Write(Members[i][j] + "\t");
}
System.Console.WriteLine();
}``
Console.ReadKey();
}
}
} 
```

* * *

以上是我的 C# 控制台程序的代码，在该程序中我使用了锯齿状数组并手动分配了值，但现在我的要求是“无需手动分配到数组中，我希望将相同的详细信息从 csv 文件导入到我的程序中（位于我光盘中的某个位置）。那么如何做到这一点我应该使用哪些功能，请帮我举个例子。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-28T04:04:26.007

```
static void Main()
        {
            string csv_file_path=@"C:\Users\Administrator\Desktop\test.csv";

            DataTable csvData = GetDataTabletFromCSVFile(csv_file_path);

            Console.WriteLine("Rows count:" + csvData.Rows.Count);

            Console.ReadLine();
        }

private static DataTable GetDataTabletFromCSVFile(string csv_file_path)
        {
            DataTable csvData = new DataTable();

            try
            {

            using(TextFieldParser csvReader = new TextFieldParser(csv_file_path))
                {
                    csvReader.SetDelimiters(new string[] { "," });
                    csvReader.HasFieldsEnclosedInQuotes = true;
                    string[] colFields = csvReader.ReadFields();
                    foreach (string column in colFields)
                    {
                        DataColumn datecolumn = new DataColumn(column);
                        datecolumn.AllowDBNull = true;
                        csvData.Columns.Add(datecolumn);
                    }

                    while (!csvReader.EndOfData)
                    {
                        string[] fieldData = csvReader.ReadFields();
                        //Making empty value as null
                        for (int i = 0; i < fieldData.Length; i++)
                        {
                            if (fieldData[i] == "")
                            {
                                fieldData[i] = null;
                            }
                        }
                        csvData.Rows.Add(fieldData);
                    }
                }
            }
            catch (Exception ex)
            {
            }
            return csvData;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:48:58.500

将 CSV 文件视为 Excel 工作簿，您会在网络上找到很多示例，说明您需要做什么。

```
ExcelFile ef = new ExcelFile();

// Loads file.
ef.LoadCsv("filename.csv");

// Selects first worksheet.
ExcelWorksheet ws = ef.Worksheets[0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T11:49:11.200

我不会详细介绍，但您可以使用[`File.ReadAllLines`](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx).
一旦你有了这些行，你可以使用将它们分成几部分[`String.Split`](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)（至少如果 CSV 文件包含非常简单的信息，例如你的示例，这将起作用）。

# stored-procedures - Firebird 存储过程总是返回零

> ID：12582224
> 
> 赞同：0
> 
> 时间：2012-09-25T11:42:45.190
> 
> 标签：stored-procedures, firebird, c++builder-xe2

这是我的存储过程：

```
SET TERM ^ ;
CREATE PROCEDURE INSERT_ETYPE (
    E_ID Integer,
    E_NAME Varchar(20) CHARACTER SET NONE )
RETURNS (
    NEW_ID Integer)
AS
declare variable addr varchar(20);
declare variable type smallint;
declare variable ord smallint;
declare variable cmd varchar(255);
declare variable answr varchar(255);
begin
  insert into ETYPE
  select * from ETYPE where ID=:e_id;
  select max(ID) from ETYPE into :new_id;

  update ETYPE set NAME = :e_name where ID = :new_id;
  for 
    select ADDR,REGTYPE,ORD from ETYPEREGS 
      where ETYPE_ID=:e_id
      into :addr,:type,:ord
    do
      begin
        insert into ETYPEREGS
          (ETYPE_ID,ADDR,REGTYPE,ORD)
         values
          (:new_id,:addr,:type,:ord);
      end 
  for 
    select CMD,ANSWR,ORD,REGTYPE from ETYPESPECIAL 
      where ETYPE_ID=:e_id
      into :cmd,:answr,:ord,:type
    do
      begin
        insert into ETYPESPECIAL
          (ETYPE_ID,CMD,ANSWR,ORD,REGTYPE)
         values
          (:new_id,:cmd,:answr,:ord,:type);
      end
end^
SET TERM ; ^ 
```

这是我在 C++ 中的代码：

```
StoredProc_InsertEType->ParamByName("E_ID")->AsInteger = src_id;
StoredProc_InsertEType->ParamByName("E_NAME")->AsString = _name;
try
{
 StoredProc_InsertEType->ExecProc();
 new_id = StoredProc_InsertEType->ParamByName(L"NEW_ID")->AsInteger;
}
catch(EDBEngineError & e)
{
 errors->Add(e.Message);
 return false;
} 
```

无论表 ETYPE 不为空，变量 new_id 始终为零。当我`SELECT MAX(ID) FROM ETYPE`从管理工具 FlameRobin 运行命令时，它返回正确的数字（~180）。我应该怎么做才能获得 NEW_ID 参数的正确值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:53:03.210

你需要添加

```
suspend; 
```

在你的 sp

并查询

```
select * from your_sp 
```

暂停解释 [http://www.janus-software.com/fbmanual/manual.php?book=psql&topic=104](http://www.janus-software.com/fbmanual/manual.php?book=psql&topic=104)

问候，

# ruby - 仅安全随机十六进制数字

> ID：12582226
> 
> 赞同：8
> 
> 时间：2012-09-25T11:42:49.217
> 
> 标签：ruby, ruby-on-rails-3

尝试使用 SecureRandom 类轨道生成随机数字。我们能否使用 SecureRandom.hex 创建一个仅包含数字且不包含字母的随机数。

例如：

代替

```
SecureRandom.hex(4)
=> "95bf7267" 
```

它应该给

```
SecureRandom.hex(4)
=> "95237267" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T11:49:19.733

查看 SecureRandom 的 api：[http ://rails.rubyonrails.org/classes/ActiveSupport/SecureRandom.html](http://rails.rubyonrails.org/classes/ActiveSupport/SecureRandom.html)

我相信您正在寻找一种不同的方法：#random_number。

```
SecureRandom.random_number(a_big_number) 
```

由于#hex 返回一个十六进制数，因此要求仅包含数字字符的随机结果是不寻常的。

对于基本用例，使用#rand 很简单。

```
rand(9999) 
```

编辑：

我不知道有一个库会生成指定长度的随机数，但编写一个似乎很简单。这是我的通行证：

```
def rand_by_length(length)
  rand((9.to_s * length).to_i).to_s.center(length, rand(9).to_s).to_i
end 
```

#rand_by_length 方法将指定长度的整数作为参数，并尝试根据长度生成随机数的最大位数。String#center 用于用随机数字字符填充缺失的数字。最坏的情况为指定长度的每个数字调用#rand。这可能会满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T16:49:11.507

数字 id 很好，因为它们更容易通过电话阅读（查理没有 c）。

试试这个

```
length = 20
id = (SecureRandom.random_number * (10**length)).round.to_s # => "98075825200269950976" 
```

并为奖励积分将其分解以便于阅读

```
id.split(//).each_slice(4).to_a.map(&:join).join('-') # => "9807-5825-2002-6995-0976" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T07:10:59.783

```
length = 4

[*'0'..'9'].sample(length).join 
```

就如此容易 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-08T12:05:30.677

这将创建一些所需的长度。

```
length = 11

rand(10**length..(10**length+1)-1).to_s 
```

# android - 在Android中替换字符串

> ID：12582230
> 
> 赞同：0
> 
> 时间：2012-09-25T11:42:54.773
> 
> 标签：android, string, replace

我试图用另一个字符串替换一个字符串但没有成功。这是我的问题：

```
str1="http://www.youtube.com/v/apbp_-0Gbo8"; 
```

我想替换`"/v/"`为`"/embed/"`

我已经尝试过这种方式，但没有办法：

```
String newString = str1.replace("\\/v\\/", "\\/embed\\/"); 
```

关于我可能做错什么的任何想法？我看过很多例子，但我无法使用任何

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T11:45:11.513

尝试这个。

```
String str1="http://www.youtube.com/v/apbp_-0Gbo8";
String test = str1.replace("/v/", "/embed/");   
Log.i("===== Repalce",test); 
```

**输出 - ===== Replce [http://www.youtube.com/embed/apbp_-0Gbo8](http://www.youtube.com/embed/apbp_-0Gbo8)**

# android - 将图像源从 R.drawable 更改为外部源，如 CoverFlow 的 SD 卡

> ID：12582232
> 
> 赞同：1
> 
> 时间：2012-09-25T11:42:57.740
> 
> 标签：android, external, drawable, sd-card, coverflow

我想知道为什么我的图片没有出现在封面上。有任何想法吗？这是基于 android 画廊应用程序的封面流。它从 R.drawable 获取图像作为源。我将其更改为从 SD 卡中取出图像。而且我不知道如何使用作者推荐的代码。

这是有关如何从外部源获取代码的原始作者示例：

```
 //Use this code if you want to load from resources
         ImageView i = new ImageView(mContext);
         i.setImageResource(mImageIds[position]);
         i.setLayoutParams(new CoverFlow.LayoutParams(130, 130));
         i.setScaleType(ImageView.ScaleType.MATRIX);            
         return i; 
```

这就是我的尝试方法：首先注释掉 R.drawable 引用的代码；

```
 public class ImageAdapter extends BaseAdapter {
      int mGalleryItemBackground;
      private Context mContext;

      private FileInputStream fis;

      private Integer[] mImageIds = {

     //     R.drawable.pic01,
       //   R.drawable.pic02,
        //    R.drawable.pic03,
        //    R.drawable.pic04,
        //    R.drawable.pic05,
        //    R.drawable.pic06,
        //    R.drawable.pic07,
        //    R.drawable.pic08,
        //    R.drawable.pic09
      };

    private ImageView[] mImages;

           public View getView(int position, View convertView, ViewGroup parent) {

        ImageView i = new ImageView(mContext.getApplicationContext());
            imagecursor.moveToPosition(position);
            int id = imagecursor.getInt(image_column_index);
            i.setImageURIUri.withAppendedPathMediaStore.Images.Media.EXTERNAL_CONTENT_URI, ""+ id));
            i.setLayoutParams(new CoverFlow.LayoutParams(130, 130));
            i.setScaleType(ImageView.ScaleType.MATRIX);         

            return i;

        //return mImages[position];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:50:07.753

您应该使用原始代码，但像这样：

```
i.setImageBitmap(BitmapFactory.decodeFile(PATH_TO_YOUR_IMAGE_FILE_ON_SDCARD)); 
```

您可以用数字命名图像文件：image_1.png, image_2.png ... 然后使用：

```
i.setImageBitmap(BitmapFactory.decodeFile("image_" + position)); 
```

或者您可以将所有图像预解码为一个数组...

# date - 2个日期和时间之间的分钟差？

> ID：12582233
> 
> 赞同：4
> 
> 时间：2012-09-25T11:43:00.947
> 
> 标签：date, datetime, abap

我需要使用四个输入参数 DATE_FROM、DATE_TO、TIME_FROM、TIME_TO 计算时​​差（以分钟为单位）。还有一个输出参数 DIFF_TIME。我创建了一个功能模块，我需要编写一个以分钟为单位计算时间差异的公式。

任何帮助都会很棒！

谢谢，赛。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T17:19:19.667

用于[**`CL_ABAP_TSTMP=>TD_SUBTRACT`**](https://help.sap.com/doc/abapdocu_753_index_htm/7.53/en-US/index.htm?file=abencl_abap_tstmp.htm)获取两个日期/时间对之间的秒数。

（然后，要获得分钟数，请将秒数除以 60）。

例子：

```
DATA(today_date) = CONV d( '20190704' ).
DATA(today_time) = CONV t( '000010' ).
DATA(yesterday_date) = CONV d( '20190703' ).
DATA(yesterday_time) = CONV t( '235950' ).

cl_abap_tstmp=>td_subtract(
  EXPORTING
    date1    = today_date
    time1    = today_time
    date2    = yesterday_date
    time2    = yesterday_time
  IMPORTING
    res_secs = DATA(diff) ).

ASSERT diff = 20\. " verify expectation or short dump 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T17:29:34.300

如果保证这些值在同一时区，那么您不需要任何特殊的功能模块或实用程序方法就很容易了。阅读[这篇](https://help.sap.com/saphelp_snc700_ehp01/helpdata/en/fc/eb334a358411d1829f0000e829fbfe/content.htm?no_cache=true)文章，然后得到日期的差异并将其乘以 24 * 60 并得到时间的差异（以秒为单位）并将其除以 60。总结一下就可以了。

# android - CustomSimpleAdapter 和基于文本条件的行颜色

> ID：12582238
> 
> 赞同：1
> 
> 时间：2012-09-25T11:43:13.093
> 
> 标签：android, listview, simpleadapter

我正在使用 SimpleAdapter 做一个 ListView .. 我正在尝试根据传递的数据设置 textcolour。

在主要活动中：

```
ArrayList<HashMap<String, Object>> data=new ArrayList<HashMap<String,Object>>();     

    for(int i=0;i<Db.risposteDate.size();i++){
            Esame e = Db.risposteDate.get(i);

            HashMap<String,Object> EsamiMap=new HashMap<String, Object>();

            EsamiMap.put("num", e.getDomandaNum()); 
            EsamiMap.put("testo", Html.fromHtml(e.getTesto()+"<br />")); 
            EsamiMap.put("ris", e.getRispostaData());
            data.add(EsamiMap);  
    }

    String[] from={"num","testo","ris"}; //dai valori contenuti in queste chiavi
    int[] to={R.id.tv1,R.id.tv2,R.id.tv3};//agli id delle view
//costruzione dell adapter
    customAdapter adapter=new customAdapter(
                    getApplicationContext(),
                    data,
                    R.layout.riga_lista, 
                    from,
                    to);
((ListView)findViewById(R.id.tabellaRisultati)).setAdapter(adapter); 
```

我创建了一个customAdapter：

```
class customAdapter extends SimpleAdapter {

public customAdapter(Context context, List<? extends Map<String, ?>> data, int resource, String[] from, int[] to) {
    super(context, data, resource, from, to);   
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View view = super.getView(position, convertView, parent);

    return view;
}
} 
```

但我不知道getView（）是如何工作的......我希望我读取数据内部的一个值，如果是正确的，我想要textcolour RED。

主要问题是我不知道如何“查看”内部数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:13:15.300

几天前我回答了一个类似的问题。看我的自定义适配器，里面有一个getView方法。

如果您有疑问，请随时提问。

这是链接：[https ://stackoverflow.com/questions/12525785/how-to-use-custom-list-adapter-for-android](https://stackoverflow.com/questions/12525785/how-to-use-custom-list-adapter-for-android)

# c++ - 命名管道linux

> ID：12582239
> 
> 赞同：7
> 
> 时间：2012-09-25T11:43:16.543
> 
> 标签：c++, qt, named-pipes

我做了2个线程，一个必须读另一个必须写。但是我得到了未定义的行为，有时我可以读取 1 行，有时可以读取 1000 行。这对我来说没有多大意义。

我所做的如下： 1\. 我在 main.cpp 中使用 mkfifo() 创建一个先进先出 2\. 我启动 2 个线程，一个读取，另一个写入。阅读器.cpp，作家.cpp

在这些线程中，每个循环我都会打开 fifo 并关闭它，因为如果我只在循环外执行一次，它就不会工作，我觉得这也很奇怪。

我一直在寻找好的例子，但我没有找到。

我的问题很简单，我怎样才能让fifo（阅读器）等待传入数据并在可用时读取它。它应该能够以 4Mhz 运行。

我希望有人可以帮助我，因为这是我第三天在这件事上头破血流。如果我使用 Qt 4.8 很重要。

编辑：我找到了解决问题的方法：

主文件

```
#include <QtCore/QCoreApplication>
#include "reader.h"
#include "writer.h"
#include <sys/types.h>  // mkfifo
#include <sys/stat.h>   // mkfifo
#include <fcntl.h>

int main(int argc, char *argv[]) {

    QCoreApplication a(argc, argv);

    int fifo = mkfifo("/tmp/fifo", S_IWUSR | S_IRUSR | S_IRGRP | S_IROTH);

    Reader r;
    Writer w;
    r.start();
    w.start();

    return a.exec();
} 
```

作家.h

```
#ifndef WRITER_H
#define WRITER_H

#include <QThread>
#include <stdio.h>
#include <iostream>
#include <errno.h>
#include <string.h>
#include <fcntl.h>

class Writer : public QThread {

    Q_OBJECT

public:
    explicit Writer(QObject *parent = 0);

private:
    void run();

};

#endif // WRITER_H 
```

读者.h

```
#ifndef READER_H
#define READER_H

#include <QThread>
#include <stdio.h>
#include <iostream>
#include <errno.h>
#include <string.h>
#include <fcntl.h>

class Reader : public QThread {

    Q_OBJECT

public:
    explicit Reader(QObject *parent = 0);

private:
    void run();

};

#endif // READER_H 
```

作家.cpp

```
#include "writer.h"

char * phrase = "Stuff this in your pipe and smoke it\n";

using namespace std;

Writer::Writer(QObject *parent) : QThread(parent) {}

void Writer::run() {

    int num, fifo;
    if ((fifo = open("/tmp/fifo", O_WRONLY)) < 0) {
       printf("%s\n", strerror(errno));
       return;
    }
    while (true) {

        if ((num= write(fifo, phrase, strlen(phrase)+1)) < 0) {
            printf("ERROR: %s\n", strerror(errno));
        }
    }
    close(fifo);

} 
```

阅读器.cpp

```
#include "reader.h"

using namespace std;

Reader::Reader(QObject *parent) : QThread(parent) {}

void Reader::run() {

    int num, fifo;
    char temp[38];
    if ((fifo = open("/tmp/fifo", O_RDONLY)) < 0) {
        printf("%s\n", strerror(errno));
        return;
    }
    while (true) {
        if ((num = read(fifo, temp, sizeof(temp))) < 0) {
            printf("%s\n", strerror(errno));
        }
        printf("In FIFO is %d %s \n", num, temp);
    }
    close(fifo);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T12:06:52.590

基本的 read() 和 write() 函数不承诺读取或写入所有可用数据。

你需要类似的东西：

```
int tot = 0;
while (tot < sizeof(temp))
{
    num = read(fifo, temp + tot, sizeof(temp) - tot);
    if (num < 0)
        break;
    tot += num;
} 
```

写也是一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:19:09.670

定期打开和关闭单个管道时遇到了同样的问题。重新创建管道（在阅读器进程中，当遇到 EOF 时）将是一个解决方案。

# ruby - 找不到ubuntu ruby gem

> ID：12582241
> 
> 赞同：1
> 
> 时间：2012-09-25T11:43:24.710
> 
> 标签：ruby, rubygems, installation, ubuntu-12.04

我想在 Ubuntu Precise 中使用 rbgccxml。这颗宝石需要 nokogiri。因此，我首先安装了 ruby​​-nokogiri (v1.5.0) Ubuntu 软件包。然后我尝试通过“gem install”安装 rbgccxml，但它也总是尝试安装 nokogiri (> 1.4)。为了防止这种情况，我使用了“gem install --ignore-dependencies rbgccxml”。

```
$ gem which rbgccxml
/var/lib/gems/1.8/gems/rbgccxml-1.0.3/lib/rbgccxml.rb
$ gem which nokogiri
/usr/lib/ruby/vendor_ruby/nokogiri.rb 
```

现在我得到奇怪的行为。以下脚本：

```
require 'nokogiri'
puts 'step 1'
require 'rubygems'
puts 'step 2'
require 'rbgccxml'
puts 'step 3' 
```

输出：

```
step 1
step 2
/usr/lib/ruby/vendor_ruby/1.8/rubygems/dependency.rb:247:in `to_specs': Could not find nokogiri (~> 1.4.0) amongst [rbgccxml-1.0.3] (Gem::LoadError)
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/specification.rb:771:in `activate_dependencies'
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/specification.rb:760:in `each'
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/specification.rb:760:in `activate_dependencies'
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/specification.rb:744:in `activate'
from /usr/lib/ruby/vendor_ruby/1.8/rubygems.rb:209:in `try_activate'
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:58:in `require'
from test3.rb:8 
```

那么，为什么在 rbgccxml 中通过 require 而不是通过 require 找到 nokogiri？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:54:28.310

`rbgccxml`指定`nokogiri`使用[悲观版本约束](http://docs.rubygems.org/read/chapter/16#page74)的依赖关系，如下所示：

```
gem "nokogiri", "~>1.4.0" 
```

这相当于：

```
gem "nokogiri", ">= 1.4.0", "< 1.5.0" 
```

这意味着`rbgccxml`在您安装的版本之前需要一个 nokogiri 版本。

如果您不是特别需要 nokogiri 1.5.0，那么让 ruby​​gems 为您解析并安装依赖项。

# c# - Parallel.ForEach - 使用 ForEach 中的列表

> ID：12582248
> 
> 赞同：0
> 
> 时间：2012-09-25T11:43:42.600
> 
> 标签：c#, multithreading, list, .net-4.0, parallel.foreach

我对 Parallel.ForEach 感到很困惑。
请你帮我用 Parallel.ForEach 重写下面的代码：

```
 #region Register

    private void btnStartRegister_Click(object sender, EventArgs e)
    {
        if (backgroundWorker2.IsBusy)
        {
            btnStartRegister.Enabled = false;
            lblStatusOfaccMValue.Text = "Canceling...";
            backgroundWorker2.CancelAsync();
        }
        else
        {
            txtLogInRegister.Text = string.Empty;
            btnStartRegister.Text = "Cancel";
            lblUserCreatedCountValue.Text = "---";
            lblStatusOfaccMValue.Text = "Running...";

            backgroundWorker2.RunWorkerAsync();
        }
    }

    private void backgroundWorker2_DoWork(object sender, DoWorkEventArgs e)
    {
        backgroundWorker2.ReportProgress(Convert.ToInt32(0));

        int UsersCount = int.Parse(txtUsersCount.Text);
        UsersCreatedCount_Step = 0;
        string path = Application.StartupPath;
        string accfilePath = path + @"\acc.txt";
        string logfilePath = path + @"\log.txt";
        string Ok_ip_port = string.Empty;
        string[] Separator = new string[] { "__" };
        int list_lines_acc_Current = -1;

        string[] lines_acc = File.ReadAllLines(accfilePath);
        List<string> list_lines_acc = new List<string>(lines_acc);
        List<string> list_lines_acc_new = new List<string>(list_lines_acc);

        foreach (string line_acc in list_lines_acc)
        {
            if (backgroundWorker2.CancellationPending)
            {
                e.Cancel = true;
                break;
            }

            list_lines_acc_Current++;
            string[] line_acc_ar = line_acc.Split(Separator, StringSplitOptions.None);
            if (line_acc_ar.Length == 3)
            {
                string username = line_acc_ar[0];
                string password = line_acc_ar[1];
                string email = line_acc_ar[2];
                string[] email_ar = email.Split('@');
                email = email_ar[0] + "%40" + email_ar[1];

                list_lines_acc_new[list_lines_acc_Current] += "__" + txtSuffixURL.Text + "__" + txtServerNumber.Text + "__" + "127.0.0.1:2222";

                try
                {
                    bool[] RegisterMethod_res = RegisterMethod(bla bla bla);
                    bool failed = RegisterMethod_res[0];
                    bool world_full = RegisterMethod_res[1];
                    if (!failed)
                    {
                        UsersCreatedCount_Step++;
                        backgroundWorker2.ReportProgress(Convert.ToInt32(UsersCreatedCount_Step * (100.0 / UsersCount)));
                        list_lines_acc_new[list_lines_acc_Current] += "__" + "Y";
                    }
                    else
                    {
                        if (world_full)
                        {
                            list_lines_acc_new[list_lines_acc_Current] += "__" + "N";
                            e.Cancel = true;
                            break;
                        }
                        else
                        {
                            list_lines_acc_new[list_lines_acc_Current] += "__" + "N";
                        }
                    }

                    File.WriteAllLines(accfilePath, list_lines_acc_new.ToArray());
                }
                catch (Exception ex)
                {
                    list_lines_acc_new[list_lines_acc_Current] += "__" + "N";

                    File.WriteAllLines(accfilePath, list_lines_acc_new.ToArray());
                }

                if (UsersCount == UsersCreatedCount_Step)
                {
                    break;
                }
            }
        }

        File.WriteAllLines(accfilePath, list_lines_acc_new.ToArray());
    }

    private bool[] RegisterMethod()
    {
        bla bla bla
        ...
        ...
        return RegisterMethod_res;
    }

    private void backgroundWorker2_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        progressBar2.Value = e.ProgressPercentage;
        lblUserCreatedCountValue.Text = UsersCreatedCount_Step.ToString();
    }

    private void backgroundWorker2_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        btnStartRegister.Text = "Start Register";
        btnStartRegister.Enabled = true;

        if (e.Error != null)
        {
            MessageBox.Show(e.Error.Message);
            return;
        }
        if (e.Cancelled)
        {
            lblStatusOfaccMValue.Text = "Cancelled...";
        }
        else
        {
            lblStatusOfaccMValue.Text = "Completed";
        }
    }

    #endregion 
```

我想`foreach (string line_acc in list_lines_acc)`用`Parallel.ForEach`.
我不能这样做...
正如您所见，有一个用于写入的 acc 文件 ( **acc.txt** ) 和一些用于读取和写入的列表 ( **list_lines_acc** + **list_lines_acc_new )。**
它们在并行模式下总是存在问题。
**编辑：**
问题是关于这些行->

```
 if (UsersCount == UsersCreatedCount_Step)
        {
            break;
        } 
```

我想在那种情况下停止它。
但我不知道`UsersCreatedCount_Step`在并行模式下如何工作？

非常感谢您的帮助。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T11:48:13.790

我不确定它是否可以安全地完成。这里有很多问题，包括您试图从多个线程写入同一个文件的事实：

```
File.WriteAllLines(accfilePath, list_lines_acc_new.ToArray()); 
```

该部分不仅需要锁，而且如果您有机械磁盘，还会降低性能。

# javascript - 输入类型=带有和不带表单标签的按钮

> ID：12582249
> 
> 赞同：6
> 
> 时间：2012-09-25T11:43:44.027
> 
> 标签：javascript, html, button, input

我使用 etc 为大量页面（通常在表格单元格内的每个页面底部连续 5-10 个）创建了许多按钮`input type="button" name="..." value="..." onclick="some javascript event handler"`，基本上是为了链接到同一组的其他页面。所有这些页面最终都从单个页面上的 iframe 标记链接。这些按钮至少在我的 PC 上离线工作正常。但是，现在我突然意识到我没有为这些按钮使用任何“表单”标签。

所以我的问题是，这个“表单”标签真的有必要吗？上传后会有什么问题吗？如果不是真的有必要，我现在不希望将表单标签添加到这么多页面，因为这将是一个真正的拖累。但是，我也不想以后受苦。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T08:55:33.163

有两个问题需要关注：

*   它是有效的 HTML 吗？

结果证明它是有效的 HTML（请参阅[Is <input> wellformed without a <form>?](https://stackoverflow.com/questions/3294572/is-input-well-formed-without-a-form)），所以你在这里是安全的。

*   所有常见的浏览器都会接受吗？

在谷歌搜索之后，我没有看到任何关于使用 Input 标签的问题的信息。这表明所有常见的浏览器都接受这个有效的 HTML（因为它们应该）。在开发任何可供公众访问的网站时，我总是会进行手动跨浏览器检查，以发现某些浏览器可能对我的网站有任何异常。

问题是您很可能无法通过查看服务器日志来判断某些浏览器是否存在 HTML 问题。它可能无法在 IE 6 上运行，除非有心怀不满的客户打电话通知您，否则您永远无法找到它。

如果这是一个普遍可访问的网站，请获取最常用浏览器的一些统计信息，确定您要支持哪些浏览器，并验证该网站在其他浏览器上的行为是否正常。这是一个痛苦的屁股，但我不知道如何解决这个问题。浏览器可能无法正确响应有效的 HTML。

根据经验，Firefox、Chrome 和 Safari 表现异常良好，并且由于自动更新，大多数人将安装最新版本。如果最新版本的浏览器可以正常工作，我不会太担心使用旧版本的用户会遇到问题。

真正的测试总是 Internet Explorer。虽然版本 8 和 9 非常符合标准，但 IE 7 肯定需要检查。IE 6 是异常行为的最严重违规者。它于 2002 年推出，但今天仍有 6% 的人口使用它！其中大部分来自中国的 Windows XP 破解副本，但在企业网络中也大量使用，其中操作系统和浏览器集中部署，管理员自 2000 年初以来一直没有取得进展。

结论：您的代码不寻常但没问题，请在您期望的浏览器上手动测试它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T11:45:52.527

不，只要您不执行任何 Get/Post 并将表单元素分组在一起，就没有必要。它们应该可以在没有表单标签的情况下完全正常工作。

# android - 有没有办法让 HTML5 Builder 在 Android 项目中获得土耳其语字符编码？

> ID：12582253
> 
> 赞同：0
> 
> 时间：2012-09-25T11:43:59.123
> 
> 标签：android, character-encoding, radphp, html5builder

首先我编辑`MPage encoding`. 然后我在设计视图上添加了一些移动组件。

我`caption/list properties`用包括`Turkish characters`.

但是在模板视图`HTML5 Builder`中没有正确显示这些字符。

有没有办法做到这一点？还是不支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:13:34.210

我认为这更多地取决于您稍后使用的浏览器。如果您想将其打包为一个 android 应用程序并且您的手机支持土耳其语字符，那么在 webview 中查看它应该是完全可以的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:35:14.483

UTF-8 支持的步骤在文档中的**[UTF-8 设置](http://docwiki.embarcadero.com/HTML5_Builder/en/UTF-8_Setup)**页面中进行了描述：

*   **更改 PHP 编码。**有关*Home → Options → PHP*页面外观的详细信息，请参阅文档。
*   **更改文件编码。**在页面的*代码*视图中，右键单击代码中的任意位置，然后选择*文件格式 → UTF8*。
*   **更改 (M)Page 编码。**在*Design*视图中，使用 Object Inspector 将*Encoding*属性设置为*Unicode | UTF-8* .

如果您的系统使用**土耳其语言环境**，它应该可以工作。在 Windows 7 上：*开始 → 控制面板 → 更改显示语言 → 管理（选项卡）→ 非 Unicode 程序的语言*

如果所有内容，模板预览仍然显示磨损的字符，请确保您的模板中有以下代码，在 <head></head> 中：

```
<meta charset='utf-8'> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:04:54.183

在对编码进行了一些更改并重新启动 IDE 后，问题得到了部分解决。模板视图仍然无法以某种方式识别编码。但是我可以将应用程序部署到虚拟设备或真实设备，而不会出现任何与编码相关的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T07:47:38.477

我以前遇到过这样的问题，尝试更改系统语言，例如：Windows 7 控制面板 > 区域和语言 > 管理 > 更改系统区域设置并告诉我 :)

# uml - 在 UML 配置文件上的 Enterprise Architect 中的格式良好检查

> ID：12582256
> 
> 赞同：1
> 
> 时间：2012-09-25T11:44:03.380
> 
> 标签：uml, enterprise-architect, well-formed

我在 Enterprise Architect 中创建了我自己的带有新原型的 UML 配置文件，并制定了一些基本规则，这些新原型必须如何连接。现在我想对我创建的模型进行格式良好的检查。

我发现有一个带有一些基本 UML Well-Formedness 检查的模型验证，但我不知道如何创建自己的规则，应该检查这些规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:04:13.177

要创建自己的模型验证规则，您必须编写一个插件。

检查自动化 - 加载项模型 - 广播事件 - 模型验证广播下的帮助文件。里面有一个例子。

如果您从未编写过加载项，请查看[Geert Bellekens 的博客](http://geertbellekens.wordpress.com/2011/01/29/tutorial-create-your-first-c-enterprise-architect-addin-in-10-minutes/)（不是我），以获得很好的快速入门介绍。

# php - 如何使用php从电子邮件中提取信息

> ID：12582262
> 
> 赞同：0
> 
> 时间：2012-09-25T11:44:25.477
> 
> 标签：php, email

我有一个电子邮件地址，用于接收有关新广告活动的信息，以便我在我的网站上发布。我正在尝试做的是提取活动国家和到期日期等信息......

如果您能指出正确的方向，那将非常有帮助，这样我就可以继续我的研究。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:49:16.113

@Zinger，您可以使用[API](http://en.wikipedia.org/wiki/Application_programming_interface)选项执行此操作

一些电子邮件提供商允许直接在网站上访问电子邮件。

看到这个链接[https://dev.twitter.com/discussions/1737](https://dev.twitter.com/discussions/1737)

# javascript - 切换滑动显示/隐藏错误阅读更多 WP 插件

> ID：12582267
> 
> 赞同：1
> 
> 时间：2012-09-25T11:44:41.330
> 
> 标签：javascript, wordpress, show-hide, jquery

你好 Js 新手问题。

我很高兴使用滑动阅读更多 Wordpress 插件 ( [http://wordpress.org/support/plugin/sliding-read-more](http://wordpress.org/support/plugin/sliding-read-more) )。

如果您切换以显示/隐藏相同的“阅读更多”，则一切正常。

但是，当您切换一个然后切换另一个而不关闭前一个时，“阅读更多/阅读更少”文本会出现不匹配。

你可以在这里看到这个错误：[http ://www.cntlsn.com/sandbox](http://www.cntlsn.com/sandbox)

这是所有魔术发生的代码

```
var $jslide = jQuery.noConflict();

$jslide(document).ready(function() {

    // initialise the visibility check
    var is_visible = false;

    // append show/hide links to the element directly preceding the element with a class of "toggle"
    $jslide('.toggle').prev().append(' <a href="#" class="toggleLink">'+showText+'</a>');

    // hide all of the elements with a class of 'toggle'
    $jslide('.toggle').hide();

    // capture clicks on the toggle links
    $jslide('a.toggleLink').click(function() {

        // switch visibility
        is_visible = !is_visible;

        // change the link depending on whether the element is shown or hidden
        $jslide(this).html( (!is_visible) ? showText : hideText);

        // toggle the display - uncomment the next line for a basic "accordion" style
        //$('.toggle').hide();$('a.toggleLink').html(showText);
        $jslide(this).parent().next('.toggle').toggle('slow');

        // return false so any link destination is not followed
        return false;

    });
}); 
```

我试过自己编辑但没有结果......你能帮忙吗？

谢谢

# php - 如何从 url 上传视频到 youtube

> ID：12582269
> 
> 赞同：4
> 
> 时间：2012-09-25T11:44:47.130
> 
> 标签：php, javascript, cakephp, youtube-api

我可以选择让用户分享视频。我使用 filepicker.io 来处理我的上传。我正在使用 zend gdata 插件，它适用于存储在我的服务器上的视频。但它不适用于保存在 amazon s3 服务器上的视频。我可以将 s3 上的视频上传到 youtube。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T15:35:33.140

YouTube 数据 API 要求您将要上传的视频的实际字节数作为上传请求的一部分发送。您不能仅在上传请求中提供对远程 URL 的引用，并期望 YouTube API 服务器从该 URL 检索视频文件。

如果您的视频在 Amazon S3 上，并且您的代码在无法直接访问视频文件的地方运行，那么您将不得不临时将其下载到您的代码可以访问的地方，然后包括YouTube 上传请求中的视频文件。

# caching - 在线播放视频并在本地缓存以供离线播放？

> ID：12582271
> 
> 赞同：0
> 
> 时间：2012-09-25T11:44:56.957
> 
> 标签：caching, video, cordova, local-storage

我们开发了一个应用程序，可以下载离线播放视频。但是由于视频的大小要大得多，我们不可能让用户等待很长时间才能下载和播放视频。所以我们想在播放视频时实现渐进式下载，但也想将视频保存在本地以便在本地播放。有没有办法或有可能在离线模式下缓存视频？我们还可以实现任何功能，其中播放或缓冲的视频的一部分在本地保存并在离线模式下播放。我们也可以从用户在线时停止的点开始或恢复缓冲吗？任何的意见都将会有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:13:41.873

我认为您需要使用[FileTransfer.download()](http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#FileTransfer_download)独立于播放视频来下载视频。然后，如果用户想再次观看，您可以将视频缓存在文件系统上并离线播放。

# iphone - 向 UITextField 添加文本反射

> ID：12582281
> 
> 赞同：1
> 
> 时间：2012-09-25T11:45:22.873
> 
> 标签：iphone, ios, cocoa, uitextfield, mirror

我正在开发一个应用程序，其中要求在文本视图中有文本。我必须为该文本视图文本提供镜像效果。我在谷歌上搜索，但找不到任何解决方案。

我该如何解决？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:48:36.287

[`UILabel`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UILabel_Class/Reference/UILabel.html)在文本字段下方添加一个右侧。应用比例[变换](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/transform)来镜像它。将 y 轴缩放 -1，将 x 轴缩放 1。然后您所要做的就是在每次文本字段更改时更新标签中的文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T12:17:59.090

看看这个[演示项目](http://aptogo.co.uk/2011/08/no-fuss-reflections/)。它有你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T14:06:42.563

不久前我写了一篇使用视图的 CAReplicatorLayer的[博客文章。](http://saveme-dot-txt.blogspot.com/2011/06/dynamic-view-reflection-using.html)它设计用于处理具有反射的视图的动态更新。该帖子使用 UIWebView，但您可以只使用 UITextView。

# ios - 如何使用 Xcode 4.5 为 iPhone 4 和 iPhone 5 创建 xib

> ID：12582283
> 
> 赞同：1
> 
> 时间：2012-09-25T11:45:28.767
> 
> 标签：ios, xcode4.5

我已将部署目标设置为 iOS 4.3 并使用 xib 创建视图控制器。但 XCode 4.5 只为 iPhone 5（4 英寸）创建 xib。如何为 iPhone 4 创建单独的 xib？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T11:54:07.777

在视图属性检查器的“模拟指标”部分中，您可以选择 3,5" 或 4" 尺寸。选择 3,5"，并使您的视图和子视图可调整大小，iOS 将自动缩放您的视图以适应 iPhone 5 的屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:57:30.000

在您的 xib 中，选择控制器并在属性窗口中设置您想要保留视图的大小。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T21:22:48.060

我也在寻找相同问题的解决方案。我有一组视图，里面有图像视图，现有图像在 iPhone 5 中看起来很糟糕。不幸的是，我们需要支持所有 4.3+ iOS 版本，我别无选择，只能缩放图像视图为两个不同的 iPhone 使用单独的图像。这是我以前做的，

```
 float height = 480.0f;
    NSString *imageName = @"image640x480";
    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
    {
        CGSize result = [[UIScreen mainScreen] bounds].size;
        height = result.height;
        imageName = @"image640x568";
    }
    // Set the height of your image view to the height calculated above and use the imageName variable to load the correct image 
```

# android - Android 饱和度过滤器矩阵

> ID：12582288
> 
> 赞同：1
> 
> 时间：2012-09-25T11:45:49.153
> 
> 标签：android, filter, matrix, imagefilter

我已经为饱和度编写了以下矩阵，但它没有给出正确的结果。有人可以告诉我这里有什么问题吗？

```
 ColorMatrix colorMatrix = new ColorMatrix(saturationFilter(0.3f));
   ColorMatrixColorFilter matrix = new ColorMatrixColorFilter(colorMatrix);

    public static float[] saturationFilter(float x){

    float lumR = 0.3086f;
    float lumG = 0.6094f;
    float lumB = 0.0820f;
    float matrix[] = {lumR*(1-x)+x,lumG*(1-x),lumB*(1-x), 0, 0, 0,0,
                      lumR*(1-x)+x,lumG*(1-x),lumB*(1-x), 0, 0, 0,0,
                      lumR*(1-x)+x,lumG*(1-x),lumB*(1-x), 0, 0, 0,0,
                      0f, 0f, 0f, 1f, 0f,
                      0f ,0f, 0f, 0f ,1f};

    return matrix;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:06:03.387

我已经通过正确编写矩阵来纠正上述函数，因为在所有错误的情况下我都在增加红色通道。这工作正常。

```
 public static float[] saturationFilter(float saturation){

    float p_val = cleanValue(saturation,100);
    float x = 1+((p_val > 0) ? 3*p_val/100 : p_val/100);
    float lumR = 0.3086f;
    float lumG = 0.6094f;
    float lumB = 0.0820f;
    float matrix[] = {lumR*(1-x)+x, lumG*(1-x),  lumB*(1-x), 0, 0, 
                      lumR*(1-x),   lumG*(1-x)+x, lumB*(1-x), 0, 0,
                      lumR*(1-x),   lumG*(1-x),   lumB*(1-x)+x, 0, 0,
                      0f, 0f, 0f, 1f, 0f,
                      0f ,0f, 0f, 0f ,1f};

    return matrix;
   }

     private static float cleanValue(float p_val, float p_limit){
         return Math.min(p_limit, Math.max(-p_limit, p_val));
} 
```

# iphone - jQuery Mobile - 后退按钮在 Web 应用程序中不起作用

> ID：12582289
> 
> 赞同：2
> 
> 时间：2012-09-25T11:45:49.443
> 
> 标签：iphone, web-applications, jquery-mobile, iphone-web-app

我是 Jquery mobile 的新手，我开发了一个可以在 Iphone safari 浏览器中正常运行的网站，但是当我创建其主屏幕快捷方式并将其作为 Web 应用程序运行时，如果我后退一步，它的工作正常，但是当我后退两步时不工作它会刷新网页。

例如，当我从 A 移动到 B 然后返回 A 时，我的网站 A、B、C 中有三个页面，其工作正常与从 B 移动到 C 然后返回 B 时的工作正常相同。但是当我将 A 移动到 B 然后 C 然后返回到 B 时它工作正常但是当我移动到 A 时它会刷新页面而不是从历史记录中获取页面。我的后退按钮代码如下

```
 <a href="SearchMembers.aspx" data-rel="back" direction="reverse" id="btnBackMemberDetail"
            class="back-button" data-inline="true">Back</a> 
```

任何人都可以在这方面帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:48:27.190

尝试将 href="SearchMembers.aspx" 更改为 href="/"

编辑：

```
<a href="/" data-icon="back" data-rel="back" class="ui-btn-left" data-role="button" data-iconpos="notext" >Back</a> 
```

我使用它，这对我来说很好。我使用 jquery.mobile-1.1.1.min.js

# unit-testing - BizTalk 测试平面文件映射

> ID：12582291
> 
> 赞同：-1
> 
> 时间：2012-09-25T11:45:53.403
> 
> 标签：unit-testing, maps, biztalk

我已经为以 XML 作为源、以平面文件模式作为目标的地图编写了单元测试。

我可以将地图的“TestMap 输出”属性设置为 XML 或原生。然后，当我在解决方案资源管理器中右键单击地图并选择测试地图时，效果很好，我得到一个 XML 文件或平面文件，具体取决于我为“TestMap 输出”属性选择的值。在这两种情况下，所有预期的字段都使用来自输入 XML 文档的正确值进行填充。

当我使用 Microsoft.BizTalk.TestTools.Mapper.TestableMapBase 类的 TestMap 方法执行单元测试时，我的问题就出现了。我收到错误“对象引用未设置为对象的实例”，这是堆栈跟踪：

```
at Microsoft.BizTalk.TOM.CXSDSchemaTree.CreateNativeInstance(String strXMLInstFileName, String strNativeInstanceOutputFileName, InstanceGenerationOptions options, ITOMErrorInfo[]& errInstanceCreationErrors)
at Microsoft.BizTalk.TOM.CXSDSchemaTree.CreateNativeInstanceFromXMLInstance(String strXMLInstFileName, String strNativeInstFileName, ITOMErrorInfo[]& errInstCreationErrors)
at Microsoft.BizTalk.TestTools.Mapper.TestableMapBase.TestMap(String inputInstanceFilename, InputInstanceType inputType, String outputInstanceFilename, OutputInstanceType outputType)
at x.Int.WMS.Testing.Unit.UnitTests.FromAx.UnitTest_CanonicalCustomer_2_MLS_MRE.CallMap(TestableMapBase target) in C:\Development\x.Int.WMS\Dev\V1.0\Src\Solutions\WMS\x.Int.WMS.Testing.Unit\UnitTests\FromCanonical\UnitTest_CanonicalCustomer_2_MLS_MRE.cs:line 68
at x.Int.WMS.Testing.Unit.UnitTests.FromAx.UnitTest_CanonicalCustomer_2_MLS_MRE.SetupTest() in C:\Development\x.Int.WMS\Dev\V1.0\Src\Solutions\WMS\x.Int.WMS.Testing.Unit\UnitTests\FromCanonical\UnitTest_CanonicalCustomer_2_MLS_MRE.cs:line 33
at x.Int.WMS.Testing.Unit.UnitTests.FromAx.UnitTest_CanonicalCustomer_2_MLS_MRE.RecordID_IsMapped() in C:\Development\x.Int.WMS\Dev\V1.0\Src\Solutions\WMS\x.Int.WMS.Testing.Unit\UnitTests\FromCanonical\UnitTest_CanonicalCustomer_2_MLS_MRE.cs:line 45 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:07:00.023

问题是由 GAC 中的旧程序集引起的。

# javascript - Chrome 窗口 onunload 事件

> ID：12582292
> 
> 赞同：0
> 
> 时间：2012-09-25T11:45:53.333
> 
> 标签：javascript, events, google-chrome

我正在尝试执行以下代码

```
window.onunload = function () { 
     var sTag = document.createElement('script'); 
     sTag.src = 'mysrc'; 
     document.getElementsByTagName('head')[0].appendChild(sTag); 
     return false; };
} 
```

它似乎在 FF 中工作正常，但在 chrome 中，一旦触发 unload 事件，我就会将下载状态取消。我在 SO 中看到了一些带有 ajax 解决方案的帖子，但我正在跨域 iframe 中执行此脚本。我只是想记录我的 api 在每个访问者的页面中存在的时间。因此，我正在发送一些有关卸载页面的时间日志信息。上面有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:49:15.810

出于您所描述的目的，您可以将该脚本加载到您的页面或父窗口中（您是说它是一个 iframe 对吗？）并在 window.unload 上运行一个函数：

```
window.onunload = function(){
   window.top.logtime(); // if it is in the parent, or 
   window.logtime() //if it is in the same window
}; 
```

并且不要返回 false，unload 事件无法取消。（在最好的情况下，用户会收到一个警告对话框，该对话框将覆盖 return false 语句。）

我认为它的不同之处在于它执行新功能的速度有多快，在身体被卸载之前。操作 DOM 肯定比调用慢得多。

# xml - Heroku 恢复快照 XML 错误

> ID：12582297
> 
> 赞同：7
> 
> 时间：2012-09-25T11:46:08.563
> 
> 标签：xml, heroku, restore, snapshot

我在尝试访问 Heroku Postgres 备份快照时遇到 XML 错误。我不能从网站下载它，它不会恢复！

是否有其他人在下载或恢复快照时看到此错误？

这是 Heroku 网站的错误：

此 XML 文件似乎没有任何与之关联的样式信息。文档树如下所示。

```
<Error>
<Code>NoSuchKey</Code>
<Message>The specified key does not exist.</Message>
<Key>app*****@heroku.com/a193.dump</Key>
<RequestId>****************</RequestId>
<HostId>
*************/*************************
</HostId>
</Error>` 
```

问候凯文

# iphone - 使 id 符合协议，是否需要？

> ID：12582300
> 
> 赞同：0
> 
> 时间：2012-09-25T11:46:18.223
> 
> 标签：iphone, objective-c, cocoa-touch

我刚刚查看了一些旧代码，这让我开始思考要使用其中的哪一个，它们似乎都可以毫无怨言地工作。当我发现差异时，我只是好奇。

这个：

```
id <UIApplicationDelegate> appDelegate = [[UIApplication sharedApplication] delegate]; 
```

或者

```
id appDelegate = [[UIApplication sharedApplication] delegate]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:20:29.413

虽然 meronix 的答案是正确的，但它错过了一个重要的点。

*您应该始终将变量声明为尽可能具有最具体的类型。*

通过这样做，您可以为编译器提供最大数量的信息来验证您的代码。因此，这是更可取的，因为它告诉编译器将对选择器的搜索限制为最小数量：

```
id <UIApplicationDelegate> appDelegate = ...; 
```

请注意，`id<SomeProtocol>`将有效选择器集限制为*仅存*在于`SomeProtocol`. 这就是为什么您有时会看到协议声明为也在实现`<NSObject>`，或者您会看到`id<SomeProtocol, NSObject>`（或`NSObject<SomeProtocol>*`）作为类型声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T11:54:05.037

我想这取决于你对 appDelegate 的要求

我的意思是，如果您要使用 UIApplicationDelegate 协议中定义的属性“窗口”：

```
NSLog(@"%@",  appDelegate.window); 
```

那么你应该使用：

```
id <UIApplicationDelegate> appDelegate = [[UIApplication sharedApplication] delegate]; 
```

但如果你尝试：

```
id appDelegate = [[UIApplication sharedApplication] delegate];
NSLog(@"%@",  appDelegate.window); 
```

你会得到一个错误...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:20:06.737

尝试这个..

```
YourAppDelegate *appDelegate = (YourAppDelegate *)[[UIApplication sharedApplication]delegate]; 
```

避免任何形式的警告

# git - git存储库中的流浪框？

> ID：12582303
> 
> 赞同：4
> 
> 时间：2012-09-25T11:46:32.793
> 
> 标签：git, virtual-machine, vagrant

我计划很快使用 vagrant 来轻松管理跨多个程序员的 Web 应用程序的服务器配置。虽然我想知道将盒子传播给同事的最佳做法是什么？我担心如果我在 git 版本控制中包含该框，git 会变得**巨大**。我认为将配置文件放在 git 中并通过 HTTP 传播该框会更好。如果盒子“丢失”了，我们仍然可以从配置文件重建盒子。

这是一个好主意吗？是否有更好的工作流程，或者我不应该担心 git 存储库的大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:16:55.903

这是一个完全合理的想法。如果配置文件允许您从 vanilla 模板（理想情况下是公共模板）重建 box，则只需对文件本身进行版本控制，而不是 box。

一般来说，git 在大多数存储库上都表现良好。对于包含巨大二进制文件的大型存储库来说，情况并非如此。如果您认为您会经常更换该基础盒，请避免版本控制，只需在应用程序设置中进行一步下载即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-04T11:42:45.850

确实，我可能是错的，但我认为盒子的整个想法是提供一个模板，您可以在该模板上构建您的环境，一个起点。应该在 vagrant 文件中更改 env 并通过 git 发送。配置可以轻松共享，但不能通过盒子 afaik 共享。

# youtube - 在 iOS6 应用程序中嵌入 Youtube 视频在 Safari 中打开视频

> ID：12582305
> 
> 赞同：1
> 
> 时间：2012-09-25T11:46:34.387
> 
> 标签：youtube, embed, youtube-api, ios6

使用 iOS6，旧的嵌入代码不再有效，它只是在 Safari 中打开视频

我尝试使用新的嵌入代码，但是当我使这个动态时，它会在 Safari 中打开视频。

当我在 webview 中添加一个静态条目时，它可以工作，但是速度很慢，并且注入了很多 dom 元素

新嵌入代码的示例；

```
<iframe type="text/html" width="640" height="385" src="http://www.youtube.com/embed/VIDEO_ID" frameborder="0"> </iframe> 
```

我正在考虑使用 HTML5 视频标签并找出视频的 url，但这可能违反了 Youtube TOS

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:54:44.730

解决方法是在 Phonegap 设置中将 OpenAllWhitelistURLsInWebView 设置为 YES

# php - 谷歌翻译 API 错误

> ID：12582306
> 
> 赞同：4
> 
> 时间：2012-09-25T11:46:44.320
> 
> 标签：php, google-translate

使用 Google 翻译 API 时出现以下错误：

> {“错误”：{“错误”：[{“域”：“usageLimits”，“原因”：“accessNotConfigured”，“消息”：“未配置访问”}]，“代码”：403，“消息”： “未配置访问”} }

我已启用计费、激活服务、注册我的 API 密钥并允许 URL。经过一番搜索，没有人提供一个确凿的答案。

使用以下 CURL 调用对 Google 的请求：

```
$curl_handle=curl_init();
curl_setopt($curl_handle, CURLOPT_URL,'https://www.googleapis.com/language/translate/v2?userIp=' . $_SERVER['REMOTE_ADDR'] . '&key={MYKEY}&source=en&target=fr&q=hello%20there');
curl_setopt($curl_handle, CURLOPT_CONNECTTIMEOUT, 2);
curl_setopt($curl_handle, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl_handle, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($curl_handle, CURLOPT_SSL_VERIFYPEER, 0);

$query = curl_exec($curl_handle);
$info = curl_getInfo($curl_handle);
$error = curl_error($curl_handle); 
```

请注意：我放了“{key}”来隐藏我的密钥。

有谁知道如何解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:11:30.593

我遇到了同样的问题，就我而言，我通过在 Curl exec 之前添加这一行来解决它：

```
curl_setopt($ch, CURLOPT_REFERER, 'INSERT YOUR GOOGLE TRANSLATE API ALLOWED DOMAIN HERE'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-28T15:43:23.633

根据[Google Translation API docs](https://developers.google.com/translate/v2/getting_started#intro)，这是一项付费服务​​。引用：

> Google Translate API 是一项付费服务​​。对于网站翻译，我们鼓励您使用 Google 网站翻译小工具。

此外，[从常见问题解答](https://developers.google.com/translate/v2/faq)：

> 有免费配额吗？不可以，Google Translate API 仅作为付费服务提供。有关详细信息，请参阅定价和支持。但是，我们确实提供了 Google 网站翻译小工具，它可以免费翻译您的网站。

另请记住，您需要一个有效的应用程序密钥，[如此处所述](https://developers.google.com/translate/v2/getting_started#auth)（您已经拥有该密钥）。

简而言之，我认为这意味着您尚未为您的应用程序设置定价/计费计划。

# usb - 如何调试没有驱动程序的 USB HID 设备？

> ID：12582307
> 
> 赞同：1
> 
> 时间：2012-09-25T11:46:50.407
> 
> 标签：usb, driver, hid

我有一个[单按钮 USB 控制器](http://www.youtube.com/watch?v=wH3FoGl-Ix8)，但它没有附带任何驱动程序（只是一个 Windows 程序，它直接与其通信以达到预期目的）。

**USB**
Fidget 供应商 ID：0x1d34
产品 ID：0x0001
产品名称：DL100A Dream Cheeky 通用控制器

所以，我希望能够读取按钮是否被按下。我的主要开发环境是 Mac，但我也希望该解决方案也可以在 Windows 上运行。因此，理想情况下，跨平台解决方案将是最好的。

我可以找到同一制造商的其他设备[的](https://github.com/derrick/dream_cheeky)[代码](http://www.lunarlamp.co.uk/usb-panic-button-linux)[片段](http://www.johnbruin.net/index.php/2008/11/30/new-software-for-your-usb-panic-button/) ，但产品 ID 存在差异，因此代码不起作用，而且我缺乏了解更改供应商/产品以外的任何内容。

据我了解，我需要使用功能请求数据包轮询 USB 设备？

是否有一些软件可以用来“监视”USB 设备，以便在按下按钮时查看实际发生的情况？如果没有，我将如何自己写一些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:50:49.590

我不知道任何跨平台的方式来处理它。这是我向人们介绍如何为随机的 HID 硬件创建驱动程序应用程序的演示文稿：

[https://developer.apple.com/videos/wwdc/2011/?id=207](https://developer.apple.com/videos/wwdc/2011/?id=207)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T13:29:40.770

基本上在 MacO 上，大量的 USB 设备通过 IOUserClient 工作。这个标准类为用户模式程序提供了在没有内核模式驱动程序的情况下控制设备的能力（通过使用 IOKit 框架的用户模式部分）。要嗅探 USB 数据包，您可以使用 USB Prober，从这篇文章开始[http://developer.apple.com/library/mac/#qa/qa1370/_index.html](http://developer.apple.com/library/mac/#qa/qa1370/_index.html)

在 Windows 标准方式上 - 标准 USB 驱动程序 + 标准 HID 驱动程序，如果他们不开发超出标准的一些附加功能，则不需要特定供应商驱动程序。您可以使用任何商业或免费软件工具来嗅探 USB 数据包 - 就像这个[http://www.hhdsoftware.com/usb-monitor](http://www.hhdsoftware.com/usb-monitor)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-11T16:38:38.810

用于测试/访问 HID 设备，即

*   获取功能报告（马特的原始问题）
*   发送功能报告
*   发送输出报告
*   接收输入报告

我建议使用 signal11/hidapi 的跨平台 HID 库中包含的“HIDAPI 测试工具”/“testgui [”](http://www.signal11.us/oss/hidapi/)。

在 Windows 上，您需要额外的[3rd 方包](https://github.com/downloads/signal11/hidapi/hidapi-externals.zip)来编译 testgui 应用程序，但它非常简单，而且 GUI 工具比我看到的其他代码示例和工具更简单。（我可以交叉检查是否允许我发布 VS2008 编译版本。）

发送输出报告和接收输入报告的另一个免费选项是我们自己的“Docklight”工具（在评估模式下，无限时间，只是不存储），请参阅[Docklight Scripting HID USB](http://docklightnews.blogspot.com/2014/02/debugging-usb-hid-applications.html)。

# sql - 如何从 MySQL 表中提取格式化的最大日期值

> ID：12582308
> 
> 赞同：1
> 
> 时间：2012-09-25T11:46:51.103
> 
> 标签：sql, string, date, max, date-format

在我的数据库中，字段日期值以格式`dd/MM/yyyy hh:mm:ss`保存`varchar`

假设我的数据库包含日期`21/09/2012 01:01:01`和`02/10/2012 03:04:08`

我想找出最大日期，所以我通过以下查询将字符串转换为日期

`SELECT max(str_to_date(dt.date,'%d/%m/%Y %H:%i:%s')) as max_date from employee emp where emp_id=1;`

这将返回正确的结果，但格式如下：`2012-10-02 03:04:08`

但我想要这种格式的结果：`02/10/2012 03:04:08`. 所以我使用了以下查询，但它返回了结果：

`SELECT max(date_format(str_to_date(emp.date,'%d/%m/%Y %H:%i:%s'),'%d/%m/%Y %H:%i:%s')) as max_date from employee emp where emp_id=1;`

结果：`21/09/2012 01:01:01`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T15:19:32.633

这似乎太简单了，但您是否尝试过切换调用函数的顺序？

代替`SELECT max(date_format(str_to_date(emp.date,'%d/%m/%Y %H:%i:%s'),'%d/%m/%Y %H:%i:%s')) as max_date from employee emp where emp_id=1;`

尝试`SELECT date_format(max(str_to_date(emp.date,'%d/%m/%Y %H:%i:%s')),'%d/%m/%Y %H:%i:%s') as max_date from employee emp where emp_id=1;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T06:34:54.297

max() 函数不需要将日期转换为字符串即可正常工作。您应该能够运行以下查询并获得所需的结果：

```
SELECT date_format(max(emp.date), '%d/%m/%Y %H:%i:%s') FROM employee emp WHERE emp_id=1 
```

# php - 使用 Zend_Filter_Input 验证日期

> ID：12582309
> 
> 赞同：0
> 
> 时间：2012-09-25T11:46:51.513
> 
> 标签：php, validation, zend-framework, zend-validate

我正在使用 ZF 1.11 并想验证非`Zend_Form`with `Zend_Filter_Input`。我已经成功设置了我的基本验证，但我正在尝试在将信用卡到期日期发送到处理器之前预先验证信用卡到期日期，使其大于今天的月份/年份。

这可能吗？除了将月/年字段都验证为一定范围内的数字外，我还没有在[他们的文档上看到任何特定的日期验证。](http://framework.zend.com/manual/1.12/en/zend.filter.input.html)

编辑：我想在不创建新的验证类（或扩展/实现现有的验证类）的情况下做到这一点，正如我在其他关于 SO 的问题上看到的那样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:41:09.847

一般来说，我建议编写一个自定义验证器，因为我认为这是在 ZF 中处理此类情况的最简洁的方法。

据我所知，日期验证器仅检查日期的正式有效性，但不能比较两个日期。然而，考虑到只能使用 Zend Framework 中内置的验证器的限制，我想出了一个使用 GreaterThan 验证器的有点老套的解决方案：

```
<?php
$year = 2012;
$month = 1;
$inputDatePast = intval(sprintf('%4d%02d', $year, $month)); //201201

$year = 2016;  // if you read this after september 2016: add a few more years here ;)
$month = 9;
$inputDateFuture = intval(sprintf('%4d%02d', $year, $month)); //201609

$prevMonth = intval(date('Ym', mktime(12, 0, 0, date('n')-1, 1, date('Y'))));

$validator = new Zend_Validate_GreaterThan($prevMonth);
$validator->isValid($inputDatePast); // false
$validator->isValid($inputDateFuture); // true
?> 
```

所以想法是从上个月的年月中创建一个整数，并比较给定的年月是否大于该值。该整数由四位数字表示年份和两位数字（前导零很重要）表示月份。

例如，2012 年 9 月是 201209。如果用户输入 2011 年 10 月，这将是 201109，它小于 201209，因此评估为假。另一方面，如果用户输入 2014 年 1 月，这将是 201401，大于前一个日期。

请注意，这只是一个未经测试的草图，可能需要更多的考虑和验证。

# mysql - 从属位于 LAN 后面的 MySQL 复制

> ID：12582312
> 
> 赞同：0
> 
> 时间：2012-09-25T11:46:59.500
> 
> 标签：mysql, networking, replication

我们有这种情况，我们将在其中一台服务器位于本地网络内的情况下进行循环主-主复制，

首先的问题是，即使互联网连接中断，公司也可以在其本地服务器上工作，

如何将此服务器公开到 Internet ？

这个用例还有另一种解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:05:19.923

您可以通过 selfip.com 之类的服务公开其 IP 地址来公开您的服务器。当然，它也对外部攻击开放。

# java - 当在 Vector 对象上等待的线程数大于 6 时，wait 和 notifyAll 机制无法按预期工作

> ID：12582316
> 
> 赞同：0
> 
> 时间：2012-09-25T11:47:17.800
> 
> 标签：java, multithreading, concurrency, thread-safety

我的应用程序中有一个要求，其中“N”个产品可以与报价相关联。屏幕布局将有两个部分。顶部有一个包含报价相关信息的表格，底部用于容纳多个产品。我通过在底部放置 iframe 来实现此功能。单击按钮（使用 javascript）将添加/删除产品。每个 Product 窗口中显示的内容将由相同的 Action (ProductLinesAction.java)、JSP (ProductLines.jsp) 和其他相关资源呈现。这里的要点是，只要在屏幕上加载新的产品窗口，就会创建该 Action 类的多个实例。我在加载窗口时没有问题，因为它只是准备要显示的表单。虽然要保存报价，所有这些产品表单都将被提交，我合并的逻辑是 1 到 N-1 个动作实例将表单值放入一个 VO 中，该 VO 添加到 Vector 对象并保存在会话中（以便其他动作实例可以接受它从会话并在其上添加）。第 N 个动作实例旨在共同保存所有这些产品值。业务规则验证也在保存之前执行，因此第 N 个操作实例将与错误一起可用，这些错误应该显示在每个产品窗口中。第 N 个动作实例旨在共同保存所有这些产品值。业务规则验证也在保存之前执行，因此第 N 个操作实例将与错误一起可用，这些错误应该显示在每个产品窗口中。第 N 个动作实例旨在共同保存所有这些产品值。业务规则验证也在保存之前执行，因此第 N 个操作实例将与错误一起可用，这些错误应该显示在每个产品窗口中。

为了确保所有其他操作实例也能利用与其窗口对应的错误，我实现了等待和 notifyAll 机制，当尝试保存超过 6 个产品时，事情就会出错。代码如下。这段代码适用于小于或等于 6 的产品（我的意思是最多 6 个动作实例）。加载并保存第 7 个产品时，第 7 个实例在调试模式下根本不可见或可追溯（提交表单时实例未达到预期方法）。

任何人都可以对这里犯下的导致这个问题的错误有所了解。

```
public String submitProducts()
        throws Exception {

    String resultValue = "";
    /* Algorithm: */
    // 1\. Read the Vector object from Session.
    // 2\. Check whether the size of the Vector matches the Total Product windows count.
    // 3\. If yes, call the Save operation and remove the list from session.
    // 4\. If not, copy the values from current Action instance to VO.
    // 5\. Add to List object and place in session.

    synchronized (productVOsInVector) {
        productVOsInVector = getProductVOVectorFromSession();
        if (productVOsInVector == null) {
            productVOsInVector = new Vector <ProductVO>();
        }
        log.info("Window Number is " + activeWindowNumber + ". List size is " + productVOsInVector.size());
        if (productVOsInVector.size() == (prodWindowCount - 1)) {
            productVOsInVector = mapActionToVO(productVOsInVector);
            resultValue = saveOperation(productVOsInVector);
            if (resultValue.equalsIgnoreCase(SUCCESS)) {
                session.put("OperationStatus", SUCCESS);
            }
            session.remove("productVOMapData");
        }
        else {
            if (quoteSaveStatus) {
                quoteSaveStatus = false;
            }
            session.put("OperationStatus", "");
            productVOsInVector = mapActionToVO(productVOsInVector);
            session.put("productVOMapData", productVOsInVector);
        }
        waitForOperationStatus();
    }
    System.out.println("Came out of sync block");
    System.out.println("Action Instance" + activeWindowNumber + " is resuming.");
    // Code to display the Error messages
    return resultValue;
}

public void waitForOperationStatus() {

    String opStatus = getOperationStatusFromSession();
    synchronized (productVOsInVector) {
        if (!opStatus.equalsIgnoreCase(SUCCESS)) {
            try {
                System.out.println("Window # " + activeWindowNumber + " Waiting");
                productVOsInVector.wait();                  
            }
            catch (InterruptedException e) {
                e.printStackTrace();
            }
            opStatus = getOperationStatusFromSession();
        }
        productVOsInVector.notifyAll();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T12:36:28.433

以下问题本身已经是一个严重的问题：

```
synchronized (productVOsInVector) {
    productVOsInVector = getProductVOVectorFromSession();
    if (productVOsInVector == null) {
        productVOsInVector = new Vector <ProductVO>();
    }
    ...
} 
```

您正在同步 引用的对象`productVOsInVector`，并立即将引用指向另一个对象。因此，下一个线程将在与第一个线程不同的对象上同步。

然后你在等待这个对象，并希望有人会通知你。

我没有分析更多，但你有一个严重的设计问题。首先，您不应该在 servlet 容器的线程之间进行同步。如果池中只有 6 个线程，并且它们都在等待第 7 个线程完成，那么就会出现死锁。如果池中有 12 个线程，并且有 2 个客户端同时执行此操作，那么也会出现死锁。即使你没有死锁，你也会让几个线程不可用，除了等待之外什么都不做，希望后续的 HTTP 请求会通知它们。如果最后一个请求由于某种原因没有出现（例如，用户关闭了他的浏览器，那么您有 6 个线程被永久阻塞。

因此，我的建议是：不要乱用线程。寻找另一种方式。

# extjs - 带有日期的 Ext.Ajax.request

> ID：12582318
> 
> 赞同：1
> 
> 时间：2012-09-25T11:47:20.250
> 
> 标签：extjs, extjs4

我正在使用 ExtJs，我需要在 Ext.Ajax.request 中传递一个日期，但我不知道该怎么做。我正在尝试以下代码：

```
dateController: function(botao){
    Ext.Ajax.request({
        url: Webapp.link("research/2012-09-18T14:30:00/8"),
        method: 'get',
        success: function(response){
            console.log(response);
        }
    });
} 
```

URL 中的第一个参数是日期，第二个参数是产品 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:55:26.577

怎么样

```
dateController: function(botao){
    Ext.Ajax.request({
        url: "YourUrl?research=2012-09-18T14:30:00",
        method: 'get',
        success: function(response){
            console.log(response);
        }
    });
} 
```

或者你可以使用参数来做到这一点（*我从来没有用 get 试过这个，但它应该也能工作*）

```
Ext.Ajax.request({
    url : 'YourUrl',
    method:'get', 
    params : {
       research: Ext.encode("2012-09-18T14:30:00")
    },
    scope : this,
    //method to call when the request is successful
    success : this.onSuccess,
    //method to call when the request is a failure
    failure : this.onFailure
 }); 
```

# java - Java RMI 服务器：在事件上调用的方法

> ID：12582319
> 
> 赞同：1
> 
> 时间：2012-09-25T11:47:24.420
> 
> 标签：java, rmi

我想知道 Java RMI 服务器 API 中是否有某种回调机制。我想要实现的是，我接到了以下事件的电话：

*   打开的连接
*   方法被调用
*   封闭式连接
*   ...

RMI 东西本身运行良好，而且我也知道 RMI 的日志记录可能性。但我有兴趣更深入地了解服务器的性能、创建一些统计数据等。

一种可能性当然是为我的每个远程对象的方法添加一个方法调用，但这很丑陋，因为我的统计部分独立于所提供功能的实际实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:09:20.023

方法调用的回调相当简单，只是`java.lang.reflect.Proxy`.

然而，RMI 为使您与连接和断开事件隔离开来麻烦很多。您将无法在没有很多麻烦的情况下找到那些，并且由于客户端连接池，事件不会像您想象的那样显示太多。您必须实现一个 RMIClientSocketFactory ，它在创建套接字时提供回调，并返回一个提供回调 on 的包装套接字`close()`，并且当从服务器下载 RMIClientSocketFactory 时，您还必须设计一种方法让所有这些代码都可以访问给您的客户，以便它可以注册其回调。仅后者是不平凡的。

# objective-c - 同时运行两个动作

> ID：12582322
> 
> 赞同：3
> 
> 时间：2012-09-25T11:47:33.807
> 
> 标签：objective-c

我有一个逻辑问题。我不知道如何同时运行两件事。

我想做的事：

当用户关闭按钮（UIAlertView）时，将执行一个操作。这个动作需要最少。2分钟。这很长，所以我想添加一个进度条来告诉用户进度。

我知道如何创建 ProgressView/Bar，但我不知道如何将 Progressbar 与 NSTask 结合使用。

我运行一个 NSTask ，在此期间我想加载一个进度视图:)

谁能帮我？:)

谢谢你。

我尝试使用 while（nstask 等）但 while/for 语句仅用于布尔值:) NSTask 是否有布尔方法？像（任务已完成）什么的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T13:35:55.497

所有与用户界面交互的代码都必须在主线程上运行以保证稳定性，但所有其他事情都可以在单独的线程上运行。

要运行后台任务，只需使用：

```
[self performSelectorInBackground:<#(SEL)#> withObject:<#(id)#>]; 
```

# c# - 自定义布局感知控件

> ID：12582327
> 
> 赞同：1
> 
> 时间：2012-09-25T11:47:45.453
> 
> 标签：c#, .net, windows-8, windows-runtime, visualstatemanager

我想编写一个自定义控件，并希望它在页面是纵向或对齐时具有不同的填充。我注意到页面继承自 LayoutAwarePage，它创建了对以下视图状态的支持：

*   全屏横向
*   填充
*   全屏人像
*   抢购

我是否需要将类似的代码添加到我的新控件（它继承自 Control）。如果不是，为什么 LayoutAwarePage 必须这样做？另外，我可以将以下 VisualStateManager 粘贴到我的控件的 ControlTemplate 中并让它尊重页面布局还是这太容易了。

```
<VisualStateGroup x:Name="ApplicationViewStates">
    <VisualState x:Name="FullScreenLandscape"/>
    <VisualState x:Name="Filled"/>
    <VisualState x:Name="FullScreenPortrait">
        <Storyboard>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Padding">
                <DiscreteObjectKeyFrame KeyTime="0" Value="1,2,3,4"/>
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
    </VisualState>
    <VisualState x:Name="Snapped">
        <Storyboard>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Padding">
                <DiscreteObjectKeyFrame KeyTime="0" Value="5,6,7,8"/>
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
    </VisualState>
</VisualStateGroup> 
```

**编辑：**看起来控件默认不支持这些状态，必须添加它们。看来 ButtonBase 确实支持这些状态，因为它在其样式中使用它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:02:37.283

如果您查看 Windows 8 项目中的默认“详细信息”页面，您会发现它希望您订阅页面上的事件。您将在翻转视图中找到以下内容`ItemTemplate`：

```
<FlipView.ItemTemplate>
    <UserControl Loaded="StartLayoutUpdates" Unloaded="StopLayoutUpdates">
        <ScrollViewer x:Name="scrollViewer" Style="{StaticResource HorizontalScrollViewerStyle}"
            <!-- "Child Controls Here" -->
                <VisualStateManager.VisualStateGroups>
                    <!-- "Visual states manuiplating the child controls above" -->
            </VisualStateManager.VisualStateGroups>
        </ScrollViewer>
    </UserControl>
</FlipView.ItemTemplate> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:09:08.700

我对用户控件所做的就是让它们继承 LayoutAwarePage。接下来将内容放置在网格中并将 VisualStateGroup 移动到此网格中。希望这会有所帮助，它对我有用。

# javascript - 隐藏 div（它只包含脚本标签）

> ID：12582331
> 
> 赞同：0
> 
> 时间：2012-09-25T11:47:50.310
> 
> 标签：javascript, jquery

嗨，我想在我的网页上隐藏一些 div，它们只包含脚本标签……我该怎么做？

例如..

```
<div>
   <div>
       <div>
        <script type="text/javascript">some js code</script>
       </div>
    <script type="text/javascript">some js code</script>
   </div> 
</div> 
```

基本上这些 div 是空的，但它们有脚本标签，所以使用空是行不通的。谁能建议我如何删除这些 div。如果任何孩子都没有价值，我的目标是删除父标签本身。

我如何确定给定父母的所有孩子都是空的。（我想检查空子节点，即使它有脚本我想忽略它并将其视为空，最后如果所有子节点都是空的，我想删除父节点）

例如考虑这个......（可以有任意数量的孩子，如果所有孩子都是空的，那么删除父母）（我想忽略脚本标签，如果没有其他值，则认为它是空的然后脚本标签）

```
 <div class="printpage">
<div class="flip">
    <div>empty div</div>
    <div>
        <div>
        <div>empty div</div>
            <div>
            <div>empty div</div>
                <div>
                    <script>script</script>
                    <div>empty div</div>
                </div>
            <script>script</script>
            </div>
        </div>
    </div>
</div>
<div class="flip">
    <div>empty div</div>
    <div>
        <div>
        <div>empty div</div>
            <div>
            <div>empty div</div>
                <div>
                    <script>script</script>
                    <div>empty div</div>
                </div>
            <script>script</script>
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:52:18.913

**编辑**这比听起来更难。这是@VisioN 观察到脚本元素自己的文本没有被忽略后的更新答案。

这应该检查除了元素之外的任何元素是否`<script>`包含任何文本输出。

```
$('div').each(function() {
    var $this = $(this);
    var $c = $this.contents();
    for (var i = 0, n = $c.length; i < n; ++i) {
        var c = $c.get(i);
        var tag = c.tagName;
        if (tag === 'SCRIPT') continue;                 // ignore script tag
        if (tag === 'IMG' || tag === 'CANVAS') return;  // non-text output
        if ($.trim($(c).text()).length > 0) {           // check text content
            return;
        }
    }
    $this.hide();
});​ 
```

见[http://jsfiddle.net/alnitak/PdCnL/](http://jsfiddle.net/alnitak/PdCnL/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T11:49:32.180

~~您可以使用`:has`选择器：~~

 ~~```
$('div:has(script)').hide(); 
```~~ 

或者：

```
$('div > script').parent().hide() 
```

 ~~* * *

```
$('div > script').parent().filter(function() {
    return !$('script', this).siblings().length
}).remove() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T11:57:02.230

您可以使用`jQuery filter`. 以下代码将确保只有那些仅包含脚本标签的 div 才会被隐藏。

```
var divs = $("div")​.filter(function(){
    console.log();
 return $(this).text().replace(/\s/gi,'') == $('script', this).text().replace(/\s/gi,'');    

}).hide();
alert(divs.length); // return 3 
```

​</p>

[演示](http://jsfiddle.net/mH4Tp/)~~

# listview - Win8 WinJS (Javascript) 在 ListView 中拖放

> ID：12582336
> 
> 赞同：3
> 
> 时间：2012-09-25T11:48:15.757
> 
> 标签：listview, windows-8, winjs

如何为 WinJS ListView 控件实现拖放。我似乎找不到任何例子。基本上我有一个待办事项列表，我希望能够拖放元素来对优先级进行排序。谢谢你的帮助！

# 更新

WinJS 2.0 现在支持此功能 [http://msdn.microsoft.com/en-us/library/windows/apps/bg182879.aspx#DragAndDropListView](http://msdn.microsoft.com/en-us/library/windows/apps/bg182879.aspx#DragAndDropListView)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:19:50.840

这篇[文章](http://www.progware.org/Blog/post/Drag-and-Drop-in-WinJSUIListView-for-repositioning-items-in-Windows-Store-Apps.aspx)对如何做到这一点有完整的解释

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-05T14:50:54.740

WinJS 2.0 现在支持此功能 [http://msdn.microsoft.com/en-us/library/windows/apps/bg182879.aspx#DragAndDropListView](http://msdn.microsoft.com/en-us/library/windows/apps/bg182879.aspx#DragAndDropListView)

# time - 如何设置遵循主机服务器时间的基于服务器的 swf 时钟

> ID：12582345
> 
> 赞同：0
> 
> 时间：2012-09-25T11:48:29.657
> 
> 标签：time, webserver, flash

我在服务器上托管 SWF 时钟，问题是我无法将其设置为跟随主机服务器时间，而是跟随我电脑上的时钟，有没有办法让时钟跟随服务器时间？

[这是时钟的链接](https://secure.telexperience.co/5005-orange.swf?TimeZone=MST&)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T14:35:03.207

SWF 在客户端上执行，因此如果时钟调用确定当前时间的方法，它将是客户端上的时间。也就是说，当然可以构建一个跟随服务器时间的时钟。为此，服务器上的服务需要提供当前时间信息并将其发送给客户端。

一个相关的想法是仅将客户端上找到的时间与服务器上的时间调整一次，然后显示客户端时间+调整，例如参见[获取服务器端时间和客户端时间之间的差异并显示它](https://stackoverflow.com/questions/7287539/get-the-difference-between-a-server-side-time-and-client-side-time-and-display-i?lq=1)

# gcc - 用于存储和递增的 gcc 原子扩展

> ID：12582350
> 
> 赞同：0
> 
> 时间：2012-09-25T11:48:46.770
> 
> 标签：gcc, atomic

是否存在任何 gcc 扩展来原子地执行类似的操作

C 中的 a = b++。对于这种微不足道的操作，使用互斥锁似乎有点过头了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:58:12.487

您不需要使用任何扩展；只需使用`<stdatomic.h>`：

```
#include <stdatomic.h>

atomic_store(&a, atomic_fetch_add(&b, 1)); 
```

# vb.net - 组织 vb.net 项目/解决方案

> ID：12582363
> 
> 赞同：1
> 
> 时间：2012-09-25T11:49:33.967
> 
> 标签：vb.net

Ia 正在尝试以我在 VB6 中使用的方式在磁盘上组织几个 vb.net 项目，但没有成功。

问题是 IDE 中的“新项目”选项打开了解决方案的新根目录以及项目文件、已编译项目等的整个子目录树...

为什么我会喜欢这种“旧方式”？因为所有这些项目都使用相同的可靠目录，如“images”、“setup”等。此外，一些 VB 文件必须通过项目“共享”。

然后我尝试将所有这些文件从几个项目中转储到一个目录中，因为子文件夹具有相同的名称（例如“我的项目”），所以这些文件不起作用。

是否有可能通过使用 vb.net 的“正常方式”获得这样的功能？

...我的（发布）exe 将位于主项目目录中，并且在这些目录中我有多个包含所有文件的项目。

# java - 关于 ImageViewer.gwt.xml 的问题

> ID：12582365
> 
> 赞同：0
> 
> 时间：2012-09-25T11:49:46.900
> 
> 标签：java, gwt, gxt

我们的 GXT 人员出任陪审团，我正试图找出我们应用程序中 ImageViewer.gwt.xml 文件的问题。

我们的模型中有一个名为 Global.gwt.xml 的文件，其中包含以下内容：

```
<module>
  <source path=""/>
</module> 
```

我们这样做是因为我们正在导入模型中定义的常量以在 UI 层中使用。这些常量与这个 xml 文件在同一个包中。然后，我们通过执行以下操作在 ImageViewer.gwt.xml 文件中指向该 XML 文件：

```
<module>
  <inherits name="com.company.app.model.Global"/>
.... 
```

我假设由于没有名为 global 的类，因此有一些魔法可以将其转换为某种类，该类将类汇总在同一个包中并使它们可用于前端。

所以现在我创建了一个框架库，它为我们所有的 GXT 应用程序导入相同的类。我在各个方面都模仿了这一点，但是当我启动它时，我得到了一个线程错误。当我在设计器中打开一个类时，它告诉我它找不到 com.company.framework.model.Global，这是我的新 XML 文件的名称，该文件汇总了该目录中的常量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:03:01.213

嗬！我是个白痴。我拼错了包裹。不是继承中的那个，而是实际的包名。这很糟糕，但至少很容易修复。

# iphone - 更改 iPad 方向时 Xcode 4.5 的问题

> ID：12582366
> 
> 赞同：2
> 
> 时间：2012-09-25T11:49:55.563
> 
> 标签：iphone, objective-c, ios, xcode, ipad

自从我升级到 XCODE 4.5 后，我就面临这个问题。

我有各种 UI 元素

`UIButton *button1; UIButton *button2; UIButton *button3;`

```
- (void)viewDidLoad
 {
    button1 =[[UIButton alloc]init ];
    button1.backgroundColor=[UIColor yellowColor];
[self.view addSubview:button1];

button2 =[[UIButton alloc]init ];
button2.backgroundColor=[UIColor yellowColor];
[self.view  addSubview:button2];

button3 =[[UIButton alloc]init ];
button3.backgroundColor=[UIColor yellowColor];
[self.view  addSubview:button3];
} 
```

其帧被声明在

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
 {  
 if(interfaceOrientation==UIInterfaceOrientationPortrait ||[interfaceOrientation==UIInterfaceOrientationPortraitUpsideDown )
 {

 button1.frame=CGRectMake(10,10,10,10);
 button2.frame=CGRectMake(10,30,10,10);

 button3.frame=CGRectMake(10,50,10,10);
 }
      if(interfaceOrientation ==UIInterfaceOrientationLandscapeLeft ||interfaceOrientation==UIInterfaceOrientationLandscapeRight)
{
 button1.frame=CGRectMake(20,10,10,10);
 button2.frame=CGRectMake(20,30,10,10);

 button3.frame=CGRectMake(20,50,10,10);
  }

 return YES;

} 
```

但框架没有在 Xcode 4.5 中设置。在以前的版本中它工作正常。

我需要在我的应用程序中自动调整大小。所以帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T12:09:25.143

您应该需要在 viewController 中实现新方法（在 'ios 6' 中引入）以进行定位

```
- (BOOL)shouldAutorotate
{

    return TRUE; 
```

}

```
- (NSUInteger)supportedInterfaceOrientations
{
     return UIInterfaceOrientationMaskAll;

} 
```

并修改您的代码将您的代码放在下面的方法中

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)  interfaceOrientation duration:(NSTimeInterval)duration
{

 } 
```

还要检查您的窗口，您需要将窗口上的控制器添加为 rootviewController 而不是像下面的 addSubview

self.window.rootViewController=viewController;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:10:19.060

**当设备方向改变时，一些类会自动调整大小，**例如从纵向到横向，但其他类（如 UILabel 和 UITextView）需要一些配置。

setAutoresizesSubviews属性控制每个对象**是否**会在其边界更改时自动调整大小。

setAutoresizingMask属性控制每个对象如何自动调整大小**。**UILabel 只需要担心调整其宽度，但由于 UITextView 是可滚动的，它需要在其边界发生变化时调整其宽度和高度。

您还应该确保将**shouldAutorotateToInterfaceOrientation**方法配置为返回**YES**；否则当设备方向改变时你的视图不会做任何事情！

**示例代码：**

```
[self.myLabel setAutoresizesSubviews:YES];
[self.myLabel setAutoresizingMask:UIViewAutoresizingFlexibleWidth];

[self.myTextView setAutoresizesSubviews:YES];
[self.myTextView setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight]; 
```

**有关更多详细信息，您可以访问** [这里](http://userflex.wordpress.com/2011/09/22/autoresize-uiview-orientation/)

# java - 在没有堆栈跟踪的情况下获取“ArrayIndexOutOfBoundsException：null”

> ID：12582370
> 
> 赞同：27
> 
> 时间：2012-09-25T11:50:04.977
> 
> 标签：java, logging, logback, stack-trace, bytecode

在我们的日志文件中，我们发现以下内容：

```
[2012-09-24 00:09:32.590 +0000UTC] ERROR host server1 [] [] somepackage.someclass [] [Unknown] [V3rAqPaDvvAAAAExEXhdWGyh] [pjsQwTGHzxcAAAE5j4YdGvWV] "ThreadName"  Some error happened:  java.lang.ArrayIndexOutOfBoundsException: null 
```

只有这一行，没有异常堆栈跟踪。

发生此异常的`try`块正在执行使用 javassist 创建的动态生成的 Java 字节码。

我想知道两件事：

1.  :`java.lang.ArrayIndexOutOfBoundsException`空
2.  `logger.error("message", theException)`尽管在块内部调用了日志挂钩，但缺少堆栈跟踪，`catch`这通常会导致在日志文件中打印完整的堆栈跟踪。

我的问题：

1.  什么样的代码会导致日志输出“java.lang.ArrayIndexOutOfBoundsException: null”。我尝试用一​​个没有运气的测试程序来重现这个。我总是得到类似“java.lang.ArrayIndexOutOfBoundsException：Index：3”或类似的东西。

2.  *缺少*堆栈跟踪的原因可能是该代码是在运行时动态生成的，因此记录器/JVM 不“知道”堆栈跟踪或相关的行号？

我们目前正在调试和调查以获取更多信息，但也许这对某些人来说听起来很熟悉。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-25T12:02:57.210

1.  `String`与`null`参考连接可能会给您这样的消息：

    ```
    Object obj = null;
    throw new ArrayIndexOutOfBoundsException("" + obj); 
    ```

2.  如果您使用的是 Oracle JVM，您可能需要添加`-XX:-OmitStackTraceInFastThrow`一个附加参数以查看它是否有帮助。对于一些基本的异常，JVM 会在一段时间后重用同一个异常实例，在这种情况下不再有堆栈跟踪。此选项可防止重用，因此您始终会获得堆栈跟踪。

编辑说明：最后一个也适用于 OpenJDK 的最新版本（例如 1.8）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-06-06T09:39:42.433

我发现与令人失望的日志几乎相同的行为，如下所示：

```
java.lang.ArrayIndexOutOfBoundsException: null 
```

In my case, the problem was in concurrent ArrayList.add calls (two separate threads added elements into shared unsynchronized list). The most interesting thing: **first** ArrayIndexOutOfBoundsException always had stacktrace and descriptive message, **all future** ArrayIndexOutOfBoundsExceptions were without stacktrace and message. Tried to reproduce on separate project with plain java threads - no luck (always got full stacktraces etc).

PS. OpenJDK 11, jetty server.

# qt - 如何在 TableView 中设置不同的 QLineEdit 文本

> ID：12582371
> 
> 赞同：0
> 
> 时间：2012-09-25T11:50:12.353
> 
> 标签：qt, qtableview, qt4.7, model-view, qlineedit

我有 3 个`QLineEdits`（比如姓名、地址和电话号码）、一个`QPushButton`（添加按钮）和一个`QTableView`.

当我在`QLineEdits`所有.`QLineEdits``QTableView`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:45:04.977

```
...
QStandardItemModel *model = new QStandardItemModel();
model->setRowCount(3);

yourTableView->setModel(model);

connect(yourBtn, SIGNAL(clicked()), this, SLOT(addData()));
...

void YourClass::addData()
{
    QStandardItem *nameItem = new QStandardItem(nameEdit->text());
    QStandardItem *addressItem = new QStandardItem(addressEdit->text());
    QStandardItem *phoneItem = new QStandardItem(phoneEdit->text());

    QList<QStandardItem*> row;
    row << nameItem << addressItem << phoneItem;

    model->appendRow(row);
} 
```

# php - 在 iis7 / php 中禁用 web.config

> ID：12582372
> 
> 赞同：2
> 
> 时间：2012-09-25T11:50:13.930
> 
> 标签：php, iis-7

我在运行 PHP 应用程序的 IIS7 中遇到启动错误 (500)。

将 system.webServer/httpErrors 设置为*详细*说明了问题：

```
Module  IIS Web Core
Notification    BeginRequest
Handler Not yet determined
Error Code  0x80070005
Config Error    Cannot read configuration file due to insufficient permissions
Config File \\?\C:\opt\php\public\web.config 
```

将 web.config 添加到公共目录并没有帮助，事实上它变得更糟，没有文件，只是启动错误，文件持久错误。

iusr 有权访问目录和文件，尝试使用 webconfig 中的虚拟内容。

服务器上没有 .NET / .ASP - 只有 PHP。感谢您提供任何简单修复的提示。

# android - 在 Android 的 OS 4.1 的网络视图中打开谷歌文档？

> ID：12582374
> 
> 赞同：0
> 
> 时间：2012-09-25T11:50:20.420
> 
> 标签：android, webview

我正在开发应用程序，我需要在提供的 URL 的帮助下在谷歌文档中打开 pdf。我为此使用 Web 视图。它在我测试过的所有操作系统（如 2.2.）上都可以正常工作，但在我的客户端的 Android OS 4.1 设备上无法正常工作。

```
if(NetworkAvailablity.checkNetworkStatus(ShowPdfInWebView.this))
        {
            WebView webview = (WebView) findViewById(R.id.pdf_webview);

            String pdfURL=this.getIntent().getExtras().getString("PDFURL");
            webview.getSettings().setJavaScriptEnabled(true); 
            webview.loadUrl("http://docs.google.com/gview?embedded=true&url=" + pdfURL);

        } 
```

我正在使用此代码。

请让我知道，如果它需要一些不同的逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:52:49.773

有一个很好的技巧可以做到这一点......您可以使用谷歌文档在 WebView 中打开您的 pdf：

```
webview.loadUrl("http://docs.google.com/gview?embedded=true&url=http://yoururl.com/yourpdf.pdf"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T15:09:22.050

这是一个完整的指南：

[http://weimenglee.blogspot.dk/2013/05/android-tip-displaying-pdf-document.html](http://weimenglee.blogspot.dk/2013/05/android-tip-displaying-pdf-document.html)

# disruptor-pattern - 是否可以在不使用固定长度数组的情况下使用 Disruptor/Ringbuffer 模式？

> ID：12582379
> 
> 赞同：3
> 
> 时间：2012-09-25T11:50:38.780
> 
> 标签：disruptor-pattern

我们有一个具有固定长度数组的 Disruptor 实现。是否可以实现一个不依赖于该数组，而是包含（可能是自描述的）可变长度对象列表的模式版本。例如，Protobuf 对象的 Ringbuffer？

我知道固定长度数组用于“预分配”步骤，但我认为可以用一个或多个对象池来近似该步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:03:47.547

Java 版本的中断器中的环形缓冲区是对对象的任何引用数组。您可以通过您创建的 EventFactory 实例将您想要的任何对象放入其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T17:54:10.777

绝对有可能实现一个不受对象数组支持的破坏器版本，但它不会是高性能的。在 LMAX Exchange Disruptor 的设计和实施中投入了大量的思想和机械的同情。

本质上，环形缓冲区是一个预先分配的对象池。根据我的经验，我从来不用担心在任何现实世界的代码中直接管理环形缓冲区的资源。必要时干扰器会自动施加背压。

该库提供了一个很好的 DSL 来为您的应用程序构建依赖关系图，并且基本上免费为您提供并行性。

# box-api - 2 Legged Flow for service account authentication BOX

> ID：12582381
> 
> 赞同：1
> 
> 时间：2012-09-25T11:50:44.613
> 
> 标签：box-api

获得 BOX 令牌后，有什么方法可以绕过所需的登录页面。我需要以管理员身份使用 BOX 帐户，因此是否有任何解决方法可以以编程方式完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:36:09.373

您无需打开浏览器即可轻松填写并提交表单。如果您使用的是 Python，则可以使用 Mechanize 或 Clientform 执行此操作。我想你也可以用其他语言做同样的事情。但我不确定重点是什么，因为您需要对您的用户进行身份验证，而 Box 登录页面可以很好地完成这项工作。如果您不想让用户每次都登录，则使用时间戳序列化令牌，表示您希望它可以使用多长时间并使用该令牌直到它过期。

祝你好运，迈克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:06:39.723

如果通过登录页面，您指的是凭据页面：

```
https://www.box.com/api/1.0/auth/{your ticket} 
```

在从以下位置获得票证后将用户重定向到：

```
GET https://www.box.com/api/1.0/rest?action=get_ticket&api_key={your api key} 
```

那么目前的答案是否定的。据我所知，没有计划支持涉及直接提供凭据的身份验证方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-14T19:46:21.380

自从这个问题发布以来已经有了新的发展，现在可以使用 JWT (JSON Web Token) 和 Box Developers Edition 来访问 Box。

如果您创建开发者帐户，您将能够创建应用程序用户并使用企业令牌和私钥文件登录。查看文档以获取更多信息：[Box Developer Edition](https://developers.box.com/developer-edition/)

此外，[boxsdk 还](https://github.com/box/box-python-sdk)支持 Box Developer Edition

# ios - 映射叠加层的独立操作 -xcode

> ID：12582384
> 
> 赞同：0
> 
> 时间：2012-09-25T11:50:57.407
> 
> 标签：ios, xcode, map, action, overlay

如何添加独立操作来映射叠加层？例如，请参阅我的代码：我不确定是否应该使用循环或 if 语句。如果我使用 If 语句应该如何？先感谢您..

```
- (void)configureOverlay {
if (self.location) {
    [self.mapView removeAnnotations:[self.mapView annotations]];        
    [self.mapView removeOverlays:[self.mapView overlays]];

    radiusSmall = 100;

        circleOverlaySmall *overlaysmall = [[circleOverlaySmall alloc] initWithCoordinate:self.location.coordinate radius:radiusSmall];
    [self.mapView addOverlay:overlaysmall];
    [self updateSmall]; <--this action called

            CircleOverlay *overlay = [[CircleOverlay alloc] initWithCoordinate:self.location.coordinate radius:self.radius];
    [self.mapView addOverlay:overlay];

    GeoQueryAnnotation *annotation = [[GeoQueryAnnotation alloc] initWithCoordinate:self.location.coordinate radius:self.radius];
    [self.mapView addAnnotation:annotation];

    [self updateLocations]; <--this action called

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:51:01.253

只需拖动 [self uploadSmall]; 在 [self updateLocations] 下方；

# javascript - 来自图像数组的随机元素及其在页面刷新时各自的链接

> ID：12582388
> 
> 赞同：1
> 
> 时间：2012-09-25T11:51:21.430
> 
> 标签：javascript, jquery, image

我有一个无序列表的图像。我希望这些图像中的每一个都具有 href 属性（因为我想在单击时使用灯箱弹出窗口来显示相关图像），但是在刷新页面时每个图像都是随机的。

简而言之，对于每个图像加上它的href 是随机的，但ul 的顺序保持不变。实现这一目标的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:08:10.100

```
var img_array = []; //assuming your array is called this and full of porn pictures

//fisher-yates algorithm. Google it
(function(){
    var tmp, current, top = img_array.length;
    if(top) while(--top) {
        current = Math.floor(Math.random() * (top + 1));
        tmp = img_array[current];
        img_array[current] = img_array[top];
        img_array[top] = tmp;
    }
})();

//target html element where the images are appended
var target = document.getElementById('someTargetDiv');

for(var i=0, len=img_array.length; i<len; i++){
    var link = document.createElement('a'),
        img = document.createElement('img');

    link.setAttribute('href', img_array[i]);
    img.setAttribute('src', img_array[i]);

    link.appendChild(img);
    target.appendChild(link);
} 
```

这不是进行此类操作的优化方式。为了您的理解，我已经使它稍微冗长了。

这段代码最大的错误是不断创建许多不同的元素，并一次将它们附加到 DOM 中。真正应该做的是构建一串生成的html，并在一次操作中更改目标div的innerHTML。

```
var html = [];
for(var i=0, len=img_array.length; i<len; i++){
    html.push('<a href="'+ img_array[i] +'"><img src="'+ img_array[i] +'"></a>');
}

target.innerHTML = html.join(''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:10:03.507

希望我做对了。

使用 jQuery，你可以这样做[jsfiddle](http://jsfiddle.net/xMJcH/1/)：

```
$('ul').children('li').sort(function() {
    return Math.round(Math.random()); // randomly get 0 or 1
}).appendTo('ul'); 
```

在服务器端使用 PHP 会更有意义，但由于您没有数据库资源左右，您必须制作一个静态数组 image:link 对，然后对其进行洗牌并生成一个随机列表。

**更新**

也许这更接近解决方案：

[jsfiddle](http://jsfiddle.net/xMJcH/3/)

```
var contents = new Array(),
    $list = $('li');

$list.each(function() { contents.push($(this).children()); });

contents.sort(function() {
    return 0.5 - Math.random();
});

$list.each(function() {
    $(this).append(contents.shift());
}); 
```

# netbeans - glassfish 和 netbeans，我无法执行 asadmin 命令

> ID：12582392
> 
> 赞同：0
> 
> 时间：2012-09-25T11:51:29.007
> 
> 标签：netbeans, glassfish, glassfish-3, netbeans-7, asadmin

我使用 Netbeans 7.1，在安装过程中我设置了 glassfish 服务器 3.1。我总是通过 IDE 工具启动服务器，但现在我试图通过 shell 来完成，但不支持 asadmin 命令，我错在哪里？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:13:58.973

如果你正在使用`Windows`你已经导航到`bin`glassfish 的目录。例如：我的 glassfish 安装到：`C:\Program Files (x86)\glassfish-3.1.2\bin`. 如果我打开`cmd` 我需要运行：`cd C:\Program Files (x86)\glassfish-3.1.2\bin`然后`asadmin start-domain domain1`. 然后它工作。

# c# - 在 C# 中使用动态 linq 进行内部连接

> ID：12582395
> 
> 赞同：1
> 
> 时间：2012-09-25T11:51:33.303
> 
> 标签：c#, linq, dynamic

我正在尝试使用动态 LINQ 进行“加入”，但我做不到。给出此错误的代码：

```
var dados = (from a in db.Usuario
             join b in db.Pessoa on a.PessoaID equals b.PessoaID
             join c in db.TipoPessoa on b.TipoPessoaID equals c.TipoPessoaID
             join d in db.Sexo on b.SexoID equals d.SexoID)
            .Where("(EmpresaID == " + _EmpresaID + " || EmpresaID == 0) && Apagado == \"N\"")
            .OrderBy(sidx + " " + sord)
            .Skip(pageIndex * pageSize)
            .Take(pageSize)
            .Select("new (ID = a.UsuarioID,Login = a.Login )"); 
```

但是，这里的代码，而不是“加入”没有问题。

```
var EspecialidadeMedicaLista = (from lista in db.EspecialidadeMedica
                               .Where("(EmpresaID == " + _EmpresaID + " || EmpresaID == 0) && Apagado == \"N\"")
                               .OrderBy(sidx + " " + sord)
                               .Skip(pageIndex * pageSize)
                               .Take(pageSize)
                                select lista); 
```

秘诀是什么？

Tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:42:43.663

我认为这可能是因为您加入时的结果为 null，也许在您最终选择之前检查 null 会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:06:54.090

解决方案：

```
 var dados = from a in db.Usuario
                    join b in db.Pessoa on a.PessoaID equals b.PessoaID
                    join c in db.TipoPessoa on b.TipoPessoaID equals c.TipoPessoaID
                    join d in db.Sexo on b.SexoID equals d.SexoID
                    select new
                    {
                        ID = a.UsuarioID,
                        Login = a.Login,
                        Fixo = a.Fixo,
                        Nome = b.Nome,
                        EmpresaID = a.EmpresaID,
                        Apagado = a.Apagado
                    };
        dados = dados.Where("(EmpresaID == " + _EmpresaID + " || EmpresaID == 0) && Apagado == \"N\"");
        dados = dados.OrderBy(sidx + " " + sord);
        dados = dados.Skip(pageIndex * pageSize);
        dados = dados.Take(pageSize); 
```

tks 帮助...

# java - 如何模拟行 Integer.Parseint(authenticationmap.get("userid");

> ID：12582396
> 
> 赞同：2
> 
> 时间：2012-09-25T11:51:38.950
> 
> 标签：java, jmockit

我如何在 jmockit class A { private Map authenticationMap 中模拟此代码；. . . public boolean createFirstTimerProfile（字符串密码，字符串用户名，字符串安全答案，字符串安全问题）{

```
 String encryptedNewPassword = null;
    int userId;
    try {
        if(Util.isEmpty(password)||Util.isEmpty(userName)||Util.isEmpty(securityAnswer)||Util.isEmpty(securityQuestion))
            throw new CustomerEntryExceptions("values are null or empty");

        encryptedNewPassword =  encryptPassword(password);

        userId =(Integer.parseInt(authenticationMap.get("userid")));
        Connection con = Util.getConnection();
        if(clientUserManagement.addorupdatesecurityquestion(userName,securityQuestion, securityAnswer,userId,con)){
            String updatestatus = updateUserPassword(userId, encryptedNewPassword,
                     Boolean.parseBoolean(ServiceLocator.getConfigValue("authentication.fail_pwdchange_ind")),Integer.parseInt(ServiceLocator.getConfigValue("authentication.pwd_reason_firstlogin")));
            if(updatestatus.equals("updated")){
                velocityContextMembers = new HashMap<String,String>();
                velocityContextMembers.clear();
                velocityContextMembers.put("name", userName);
                velocityContextMembers.put("securityquestion", securityQuestion);
                velocityContextMembers.put("securityanswer", securityAnswer);
                velocityContextMembers.put("password", password);
                mailToUser(userId,"Authetication Profile Information","authenticationProfile_email_html.vm");
                return true;
            } else{
                throw new CustomerEntryExceptions("Password not updated");
            }
        } else{
            throw new CustomerEntryExceptions("Authentication profile not updated");
        }
    } catch (CustomerEntryExceptions e) {
        logger.error("createFirstTimerProfile() --> "+e.getMessage());
        return false;
    }

} 
```

}

如何模拟行 Integer.Parseint(authenticationmap.get("userid");

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T12:48:19.760

我同意 jan.vdbergh，我不确定嘲笑是最好的解决方案。

但是如果你想模拟一个静态方法可以这样处理：

```
@Test
public void myTestMethod(){
      new Expectations(){
          @Mocked 
          Integer integer= null;

          {
               Integer.parseInt(anyString);
               result = new NumberFormatException();

          }

       }
} 
```

# visual-studio-2010 - 在 Visual Studio 安装项目中自定义安装日志位置

> ID：12582397
> 
> 赞同：0
> 
> 时间：2012-09-25T11:51:39.840
> 
> 标签：visual-studio-2010, setup-project, visual-studio-setup-proje

Visual Studio 中的安装项目将在 temp 文件夹下有其安装日志，名称格式如“%temp%\ .log”

我可以在此处进行一些自定义，以便这些安装日志将转到特定文件夹吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:25:22.983

您可以通过使用参数调用 MSIEXEC 来更改写入 MSI 日志的位置[`/L <logfilepath>`](http://technet.microsoft.com/en-us/library/cc759262%28v=ws.10%29.aspx#BKMK_SetLogging)。如果您无法更改命令行参数（例如，如果安装可执行文件调用 MSI），[请编辑注册表以更改默认日志位置](http://support.microsoft.com/kb/223300)。

# php - 编写更好的代码/查询

> ID：12582398
> 
> 赞同：1
> 
> 时间：2012-09-25T11:51:42.213
> 
> 标签：php, mysql, performance, loops, while-loop

在我的网站中，用户可以更新，其他人可以评论更新，就像其他社交网站一样。

在做什么：

```
query = fetches first name, last name, user id, update id, update post UNION same details for the user who has logged in i.e /* Updates Of Current Logged In User + Updates Of People He Is Following */

loop {
prints first name last name and update
} 
```

后来我介绍了评论功能，所以现在我在循环中调用查询并再次运行循环以获取评论..

```
loop {
prints first name last name and update

commentquery = fetches firstname, last name, user id, comment, of the particulat post
    again loop {
         prints first/last name of the person who commented, and his comment
     }
} 
```

现在根据我的说法，我想这可以通过 SQL 查询来完成，当我检索帖子时，我可以获取它的评论，或者这是正确的方法？问题是当外部循环运行时，内部循环也运行以获取适当的评论，所以我可以加入表来检索与帖子/更新相关的评论吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:11:31.870

如果没有您的数据库结构或实际 SQL，这很难回答，但我已尝试尽可能概括。您尝试做的事情应该通过带有两个查询和一个循环的 SQL 来完成，如下所示。

**编辑**您的精细循环并重新执行查询。您可以使用 SQL 一次性获取所有这些数据，但您将在每次调用中重复分配信息。为了可扩展性和可读性，我会坚持使用两个查询和两个循环

```
/** updated after op's comments **/

SELECT data, that, you, want, for, one, post
FROM posts AS a
INNER JOIN users AS b ON b.id = a.user_id

loop over query results () {

    /** output the post data **/

    /** Then select the users who have posted on this post **/
    SELECT a.comments, b.username
    FROM comments AS a
    INNER JOIN users AS b ON b.id = a.id
    INNER JOIN posts AS c ON c.id = a.post_id AND c.post_id = '[post id value]'
    ORDER BY a.date_posted;

    loop comments here {
      /** output comments here **/
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:34:00.097

我认为将它合并到仅查询中可能是可能的，但不是很好。

但是，如果我理解正确，您不喜欢的是评论查询是在循环中使用不同的 WHERE 子句执行的。您可以通过在查询数据库以获取更新**之前获取您在一个查询中显示的所有更新的所有评论来消除这种情况：**

```
query = select all comments for all updates joined with usernames and whatnot
loop{
    $comments[postid][] = data
} 
```

在此之后，您可以正常查询更新并从预加载的数组而不是数据库中访问评论。不确定这是否是更好的解决方案。从好的方面来说，你只有一个查询更新，一个评论，而不是一个更新，一个更新的评论。（当你有 10 个更新时，像 2 个查询而不是 11 个）。不确定差异是否真的很大。

缺点是，您之前的代码更加明显，因此其他人更容易阅读。

# actionscript-3 - 创建垂直滚动条

> ID：12582399
> 
> 赞同：0
> 
> 时间：2012-09-25T11:51:47.370
> 
> 标签：actionscript-3, apache-flex, flex3, flex2

我想创建一个垂直滚动条，以便我们可以执行以下操作：

1.  更改滚动条箭头图标的颜色。
2.  更改滚动条箭头图标的背景颜色。
3.  更改滚动条的 TrackColor。
4.  更改滚动条的 ThumbColor。

# android - Android ActionBar 兼容性中的向上按钮，有可能吗？

> ID：12582403
> 
> 赞同：1
> 
> 时间：2012-09-25T11:52:04.863
> 
> 标签：android, android-actionbar, back, up-button

我正在`actionBar`为我的应用程序使用兼容性 api。

我正在尝试在应用程序图标的左侧显示向上按钮。我知道如何用原始`ActionBar`类做到这一点，但我不知道如何用 ActionBar Compat 做同样的事情

（我没有像`setDisplayHomeAsUpEnabled(true)`原来的 ActionBar 类那样的任何方法）。

有人知道怎么做吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:55:21.957

您不能将 ActionBar 与 Android Compat 库一起使用，在 API 10 或更低版本上将[ActionBarSherlock用于 ActionBar。](http://actionbarsherlock.com)

# php - OpenShift 上的 PHP：如何启用错误和警告？

> ID：12582409
> 
> 赞同：4
> 
> 时间：2012-09-25T11:52:32.633
> 
> 标签：php, openshift

我已将我的应用程序移至 OpenShift，现在，为了方便它实际工作，我想启用页内错误和警告。目前，我看到一个空白页。

如何启用错误？

在 PHP 中，它位于`php.ini`

```
error_reporting = E_ALL
display_errors = 1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T13:00:59.850

在 IRC 频道 #openshift 上，有人告诉我这目前不可配置

> (05:06:58 PM) pmorie: ozizka-ntb: 看起来它是由购物车提供的 - 我不相信你可以用你自己的代替

我需要同时使用

```
error_reporting(E_ALL);
ini_set('display_errors', 1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-23T09:42:03.823

您可能希望将 APPLICATION_ENV 设置为开发。

> $ rhc 环境设置 APPLICATION_ENV=development

根据[https://developers.openshift.com/en/php-getting-started.html](https://developers.openshift.com/en/php-getting-started.html)，

> 在开发模式下，您的应用程序将：
> 
> 1.  在浏览器中显示更详细的错误
> 2.  显示启动错误
> 3.  启用 Xdebug PECL 扩展
> 4.  启用 APC 统计检查
> 5.  忽略您的 composer.lock 文件（如果适用）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:01:51.450

如果您无法访问，请在页面`php.ini`顶部写下`php`：

```
<?php
error_reporting(22527);
?> 
```

这将显示页面中的所有错误和警告。

# bash - 从变量读入变量

> ID：12582410
> 
> 赞同：0
> 
> 时间：2012-09-25T11:52:42.440
> 
> 标签：bash

如何使用 IFS 和变量“读取”变量？

我正在尝试遍历一些由管道配对的数据以进行拆分和处理。我得到的错误是`read: 'site|database': not a valid identifier`

```
SITES="abc|abc xyz|asdf"
for site in $SITES;
do
  IFS="|" read domain database <<< echo $site; # es no bueno mi amigo
  echo "Site: $domain \t\t\t Database: $database";
done; 
```

我只是在艰难地这样做吗？我不是土生土长的巴舍尔。;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:59:15.510

您正在混合两种语法：

```
read a b <<<$variable 
```

和

```
read a b < <(command) 
```

我会试试这个（不要弄乱`$IFS`）：

```
read domain database <<<${site/|/ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:12:27.000

您的脚本的问题是您没有正确传递Here[字符串](http://tldp.org/LDP/abs/html/x17700.html)`read`。应该这样做：

```
IFS=$"|" read domain database <<< "$site" # es no bueno mi amigo 
```

记住也要引用变量。

然后你的脚本就可以工作了。

这是固定的脚本：

```
SITES="abc|abc xyz|asdf"
for site in $SITES
do
  IFS="|" read domain database <<< "$site" # es no bueno mi amigo
  echo -e "Site: $domain \t\t\t Database: $database"
done 
```

它打印：

```
Site: abc                        Database: abc
Site: xyz                        Database: asdf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:58:42.303

我认为写起来更简单：

```
SITES="abc|abc xyz|asdf"
for site in $SITES
do
  domain=${site%|*}      # removes everything from '|' onward
  database=${site#*|}    # removes everything up through '|'
  echo "Site: $domain \t\t\t Database: $database"
done 
```

有关和符号的信息，请参阅[*Bash 参考手册*](http://www.gnu.org/software/bash/manual/bash.html#Shell-Parameter-Expansion)[中的 §3.5.3 Shell 参数扩展](http://www.gnu.org/software/bash/manual/bash.html#Shell-Parameter-Expansion)。`${*parameter*%*word*}``${*parameter*#*word*}`[](http://www.gnu.org/software/bash/manual/bash.html#Shell-Parameter-Expansion)

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T12:01:48.823

`IFS`会影响分词，但文本仍然是逐行读取的。但是（假设您的记录都不包含换行符），您可以执行以下操作：

```
SITES="abc|abc xyz|asdf"
echo "$SITES" | tr \| '\012' | while read domain database; do
  echo "Site: $domain \t\t\t Database: $database";
done 
```

为了澄清第一句话，请考虑以下行为：

```
echo "$SITES" | while read a b c; do echo "a=$a, b=$b"; done 
```

和

```
echo "$SITES" | while IFS=\| read a b c; do echo "a=$a, b=$b"; done 
```*

# sql-server - 在 SqlServer 中创建一个不返回任何内容的函数

> ID：12582413
> 
> 赞同：17
> 
> 时间：2012-09-25T11:52:54.177
> 
> 标签：sql-server, function

我正在创建一个向表中插入一行的简单函数。插入后，我不需要该函数返回任何内容。我刚刚检查了 MSDN 中的函数创建语法，似乎函数必须返回一个值。我也尝试创建一个函数，但出现语法错误。

我想知道是否有一种方法可以创建一个不返回任何值的函数。

谁能告诉我是否有办法创建这样的功能？提前致谢：）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-25T11:54:28.650

然后使用存储过程来实现您的要求。因为函数是用来返回值的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-25T11:54:53.707

创建存储过程而不是函数

```
Create proc my_proc()
as
BEGIN
<your insert statement >

END 
```

在此处查看[示例](http://www.codeproject.com/Articles/126898/Sql-Server-How-to-write-a-Stored-procedure-in-Sql)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-25T12:22:48.920

除了其他答案，我将添加一个明显的答案：

> 我正在创建一个向表中插入一行的简单函数。

函数不能向表中插入行（根据定义，SQL Server 中的函数不应该有任何副作用，这与其他语言中的函数不同），所以无论您是否关心返回值，无论如何都做不到。您将需要改用存储过程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-07T19:28:20.247

根据 SQL Server，你不能有一个没有返回值的函数。它必须返回一个值。在您的情况下，我建议您使用存储过程。

# java - Apache 速度无法找到资源

> ID：12582419
> 
> 赞同：2
> 
> 时间：2012-09-25T11:53:13.253
> 
> 标签：java, apache, plugins, velocity, rcp

我正在尝试以速度加载模板。我唯一拥有的是文件的路径。但我似乎无法用这个绝对路径加载文件。你需要怎么做？

文档对于阅读绝对模板非常模糊......

我正在尝试在 RCP 程序的插件中使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:42:08.640

将您的模板放在插件项目中的文件夹“templates/template1.vt”中，并确保将此文件夹添加到 build.properties 中。您可以尝试通过以下任一方式获取模板文件。

```
one:
 URL url= Activator.getDefault().getBundle().getEntry("templates/template1.vt");
 url = FileLocator.toFileURL(url);
 File file = new File(url.toURI());

second:
url = new URL("platform:/plugin/<plugin id>/templates/template1.vt");
url = FileLocator.toFileURL(url);
File file = new File(url.toURI()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T07:20:08.613

我认为您最好的选择是查看 Velocity 中的资源加载器概念。这是 Velocity 提供的从任意来源加载模板的方式。[有关详细信息，请参阅此处](http://velocity.apache.org/engine/releases/velocity-1.7/developer-guide.html#Configuring_Resource_Loaders)的文档。

您可以查看可用的，以供参考他们是如何做到的。如果配置正确，有一个[FileResourceLoader](http://velocity.apache.org/engine/releases/velocity-1.7/apidocs/org/apache/velocity/runtime/resource/loader/FileResourceLoader.html)可能完全符合您的需要。

如果这不起作用，您可以从基础[ResourceLoader](http://velocity.apache.org/engine/releases/velocity-1.7/apidocs/org/apache/velocity/runtime/resource/loader/ResourceLoader.html)类派生。然后，您的 ResourceLoader 将简单地从您传递给 getTemplate() 调用的名称映射到实际文件。

# javascript - 重写 URL 哈希以获取变量

> ID：12582421
> 
> 赞同：0
> 
> 时间：2012-09-25T11:53:31.727
> 
> 标签：javascript, jquery, .htaccess, url-rewriting

我正在一个具有动态内容的网站上工作。

当您单击一篇文章时，它会更改为使用推送状态的地址。

例子：

[http://www.some-site.com/news/](http://www.some-site.com/news/) - 点击新闻之前

[http://www.some-site.com/news/dynamic-url/](http://www.some-site.com/news/dynamic-url/) - 点击新闻后

但由于 pushstate 在 IE 或更旧的浏览器中不起作用，我已将其重写为使用 jQuery.address，因此它会更改 url 中的哈希值，而仅适用于 IE。

现在的问题是，假设有人将指向该站点的链接发送给他们从 Chrome 复制的朋友并且他们的朋友使用 IE，它将开始将新的链接附加到该 URL。

例子：

[http://www.some-site.com/news/dynamic-url/](http://www.some-site.com/news/dynamic-url/) - 发送给朋友的 URL

[http://www.some-site.com/news/dynamic-url/#!/dynamic-url](http://www.some-site.com/news/dynamic-url/#!/dynamic-url) - 朋友访问该网站后的 URL

所以，我坚持如何重写/重定向它们。因为，哈希永远不会被发送到 Apache。我在推特上看到过，他们做的正是我想要的，但我不知道怎么做。

[https://twitter.com/#!/google](https://twitter.com/#!/google)被重定向到[https://twitter.com/google](https://twitter.com/google)并且它在 IE 中工作。

非常感谢任何帮助，如果您不明白，请让我详细说明。

正如大卫托马斯所建议的，这里是函数。

```
var permalink = function(title, id, permalink){
    var current = siteUrl + type + (order ? '/orderBy/' + order : '');
    var newUrl = current + '/' + permalink + '/';
    if(jQuery.browser.msie){
        newUrl = '/' + permalink + '/';
        jQuery.address.value(newUrl);
    }
    else{
        stateNum++;
        window.history.pushState({state: stateNum}, title, newUrl);
    }
    jQuery('title').html('SITE - ' + title);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:10:25.113

您需要做的是使用插件（如 jquery 历史记录）或自己创建一个事件来检查哈希更改。然后，您读取散列（去掉“！”），然后根据需要处理散列。您可能想用它做 ajax（例如加载域/哈希）并将内容放在页面上的某个位置。

明白了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:42:22.870

想了很久，只能找到一个解决办法。

如果有人遇到类似情况，我会在这里发布。

我的解决方案有点老套。如果浏览器是 IE 并且在某个点之后有一个 url 片段，我将其视为新闻项目的名称。获得名称后，我会将它们重定向到合适的 url。

```
var permalink = function(title, id, permalink){
    var current = siteUrl + type + (order ? '/orderBy/' + order : '');
    var newUrl = '/' + permalink + '/';
    if(jQuery.browser.msie){
        jQuery.address.value(newUrl);
    }
    else{
        current = siteUrl + type + (order ? '/orderBy/' + order : '');
        newUrl = current + '/' + permalink + '/';
        stateNum++;
        window.history.pushState({state: stateNum}, title, newUrl);
    }
    jQuery('title').html('SITE - ' + title);
}
jQuery(document).ready(function(){
    jQuery.address.crawlable(true);
    if(jQuery.browser.msie){
        if(jQuery.address.value() == '/'){
            var currentPermalink = window.location.toString();
            currentPermalink = currentPermalink.split(type);
            if(currentPermalink[1] !== '/'){
                window.location = siteUrl + type + '/#!' + currentPermalink[1];
                jQuery.address.value(newUrl);
            }
        }
    }
}); 
```

# python - Python提取文本文件

> ID：12582432
> 
> 赞同：0
> 
> 时间：2012-09-25T11:54:21.600
> 
> 标签：python, file, search, text

1.  我有几个测试文件保存在一个目录中
2.  我想转到每个文件并搜索一些文本“文本 1”和“文本 2”并在输出文件中打印此文本前面的所有内容......
3.  这是我使用python脚本完成的.....
4.  但接下来我只想要每个文件中“Text 1”和“Text 2”的第一个实例。如果我添加`break`当前脚本，我将无法打印输出文件..

请指导我..我是python初学者...

```
import os
path = "D:\test"
in_files = os.listdir(path)
desc = open("desc.txt", "w")
print >> desc, "Mol_ID,   Text1,  Text2"
moldesc = ['Text1', 'Text2']
for f in in_files:
    file = os.path.join(path, f)
    text = open(file, "r")
    hit_count = 0
    hit_count1 = 0
    for line in text:
        if moldesc[0] in line:
            Text1 = line.split()[-1]
        if moldesc[1] in line:
            Text2 = line.split()[-1]
            print >> desc, f + "," + Text1 + "," + Text2
text.close()
print "Text extraction done !!!" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:03:40.923

您的代码有几个问题：

*   您`text.close()`应该与`for line in text`循环处于同一级别。
*   该语句不合适：只有在定义了和`print >> desc`时才应该打印。您可以在循环外将它们设置为 None ，并测试它们是否都不是。（或者，您可以在测试中设置和测试）。在这种情况下，打印输出并使用 a来转义循环。`Text1``Text2``for line in text``None``hit_count0=1``if moldesc[0]``hit_count1=1``if moldesc[1]``hit_count0 and hit_count1``break`

（所以，用纯代码：）

```
for f in in_files:
    file = os.path.join(path, f)
    with open(file, "r") as text:
        hit_count = 0
        hit_count1 = 0
        for line in text:
            if moldesc[0] in line:
                Text1 = line.split()[-1]
                hit_count = 1
            if moldesc[1] in line:
                Text2 = line.split()[-1]
                hit_count1 = 1
            if hit_count and hit_count1:
                print >> desc, f + "," + Text1 + "," + Text2
                break 
```

还有第三个问题：

**你提到想要之前** 的文字`Text1`？然后你可能想要使用`Text1 = line[:line.index(moldesc[0])]`而不是你的`Text1 = line.split()[-1]`......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:19:08.590

我会选择`mmap`并可能使用 CSV 作为结果文件方法，比如（未经测试）和边缘粗糙......（需要更好的错误处理，可能想要使用 mm.find() 而不是正则表达式，一些代码是从 OP 等逐字复制的……我的电脑电池快没电了……）

```
import os 
import csv
import mmap
from collections import defaultdict

PATH = r"D:\test"  # note 'r' prefix to escape '\t' interpretation
in_files = os.listdir(path)

fout = open('desc.txt', 'w')
csvout = csv.writer(fout)
csvout.writerow( ['Mol_ID', 'Text1', 'Text2'] )

dd = defaultdict(list)

for filename in in_files: 
    fin = open(os.path.join(path, f))
    mm = mmap.mmap(fin.fileno(), 0, access=mmap.ACCESS_READ)
    # Find stuff
    matches = re.findall(r'(.*?)(Text[12])', mm) # maybe user finditer depending on exact needs
    for text, matched in matches:
        dd[matched].append(text)
    # do something with dd - write output using csvout.writerow()...
    mm.close()
    fin.close()
csvout.close() 
```

# c# - 字符串查找和替换方法

> ID：12582434
> 
> 赞同：5
> 
> 时间：2012-09-25T11:54:26.590
> 
> 标签：c#, string

我需要找到字符串值的特定部分，如下所示，我需要将“会议 ID”更改为特定数字。

这个数字来自多个数字的下拉列表，所以我不能简单地使用查找和替换。因为文本可能会在用户满意之前更改为多个数字之一。

字符串的“0783”部分永远不会改变，“会议ID”后面总是跟一个“，”。

> 所以我需要到达“0783，**INSERT TEXT** ”，然后在 Index Changed 事件中插入新数字。

这是一个例子： -

> 商务邀请，开始时间，M 问题，518-06-xxx，9999 999 0783，**会议 ID**，xxx ??

每次找到此字符串并替换测试的最佳方法是什么？

我希望这是有道理的家伙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:03:03.810

好的，有几种方法可以做到这一点，但这似乎是你可以控制的字符串，所以我要说这就是你想要做的。

```
var myString = string.Format("Business Invitation, start time, M Problem, 518-06-xxx, 9999 999 0783, {0}, xxx ??", yourMeetingId); 
```

如果你无法控制它，那么你将不得不更聪明一点：

```
var startingIndex = myString.IndexOf("0783, ");
var endingIndex = myString.IndexOf(",", startingIndex + 6);
var pattern = myString.Substring(startingIndex + 6, endingIndex - (startingIndex + 6));
myString = myString.Replace(pattern, yourMeetingId); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:01:57.200

您应该将“当前”存储`Meeting ID`在一个变量中，随用户的操作一起更改它，然后在需要字符串时使用相同的全局变量。

这样，您不必担心字符串中的内容*，*也不必弄乱数组索引。你也可以免受魔法数字/字符串的伤害，这些数字/字符串在未来的某个时候一定会在你的脸上爆炸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:01:44.997

您可以尝试使用`Regex.Replace`方法

```
 string pattern = @"\d{3},";
    Regex regex = new Regex(pattern);

    var inputStr = "518-06-xxx, 9999 999 0783";
    var replace = "..."
    var outputStr = regex.Replace(inputStr, replace); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T12:03:50.700

使用 Regex.Split by token "0783," 然后在数组中的第二个字符串中返回 split by token "," 字符串数组中的第一个元素将是您插入新文本的位置。然后使用 string.Join 用“0783”加入第一个拆分，用“，”加入第二个拆分。

```
 string temp = "Business Invitation, start time, M Problem, 518-06-xxx, 9999 999 0783, Meeting ID, xxx ??";
        string newID = "1234";
        string[] firstSplits = Regex.Split(temp, "0783,");
        string[] secondSplits = Regex.Split(firstSplits[1], ",");
        secondSplits[0] = newID;
        string @join = string.Join(",", secondSplits);
        firstSplits[1] = @join;

        string newString = string.Join("0783,", firstSplits); 
```

# maven - 从 rpc wsdl 生成 java

> ID：12582437
> 
> 赞同：1
> 
> 时间：2012-09-25T11:54:29.127
> 
> 标签：maven, rpc, wsdl2java

我有一个从 RPC wsdl 生成一些 java 代码的[pom 。](http://bit.ly/SjMwfc)问题是永远不会生成代码。

```
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>axistools-maven-plugin</artifactId>
<version>1.4</version>
<configuration>
  <sourceDirectory>src/main/resources</sourceDirectory>
  <outputDirectory>${project.build.directory}/generated/rpc</outputDirectory>
  <packageSpace>com.company.wsdl</packageSpace>
  <testCases>false</testCases>
  <serverSide>true</serverSide>
  <subPackageByFileName>false</subPackageByFileName>
</configuration>
<executions>
  <execution>
    <goals>
      <goal>wsdl2java</goal>
    </goals>
  </execution>
</executions>
</plugin> 
```

关于为什么这不生成java代码的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:32:07.257

在查看了您的 pom 后，我意识到了您的问题。它与根据您所做的配置调用 mvn its 无关。

您已经在 pluginManagement 区域配置了axistools-maven-plugin。在这种情况下，您需要在构建区域中执行此操作，如下所示：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.codehaus.mojo</groupId>
      <artifactId>axistools-maven-plugin</artifactId>
      <version>1.4</version>
      <configuration>
       ..
      </configuration>
      <executions>
        <execution>
          <goals>
           <goal>wsdl2java</goal>
          </goals>
        </execution>
      </executions>
    </plugin>
  </plugins>
  ...
</build> 
```

代替：

```
<build>
 <pluginManagement>
   <plugins>
    ...
  </plugins>
 </pluginManagement>
  ...
</build> 
```

如果配置正确，您可以使用 mvn clean package 或 mvn clean install 而不是调用 mvn axistools:wsdl2java ...

# java - 如何在 java jsch channelsftp setPermission(int 权限，字符串路径) 中设置 chmod 权限

> ID：12582444
> 
> 赞同：1
> 
> 时间：2012-09-25T11:55:04.950
> 
> 标签：java, sftp, jsch

如何转换 755 之类的 chmod 值，使其适合 channelSftp setPermission(int permission, String path)？

我想不通。:(

编辑：这里说我想使用位掩码。但我也不确定如何做到这一点。 [http://epaul.github.com/jsch-documentation/javadoc/com/jcraft/jsch/SftpATTRS.html#setPERMISSIONS(int](http://epaul.github.com/jsch-documentation/javadoc/com/jcraft/jsch/SftpATTRS.html#setPERMISSIONS(int) )

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T12:06:31.133

```
Permission perm = new Permission();
//set the permissions you want.
setPermission(perm.getDecimalCode(), path); 
```

您可以从这里获取 Permission 类：

[http://svn.cyberduck.ch/tags/release-2-3/source/ch/cyberduck/core/Permission.java](http://svn.cyberduck.ch/tags/release-2-3/source/ch/cyberduck/core/Permission.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-07T15:21:39.510

```
channelSftp.chown(0755, f.getName()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-15T12:58:43.970

我知道它正在挖掘一个旧坟墓，但我有更好的解决方案 - SftpChannel.chmod 需要十进制整数，而 unix 格式（644、777 等）是八进制。您所要做的就是简单的转换：

SftpChannel.chmod(Integer.parseInt(""+, 8), path);

# javascript - 选择性地显示背景图像

> ID：12582445
> 
> 赞同：1
> 
> 时间：2012-09-25T11:55:11.950
> 
> 标签：javascript, jquery, html, css

我正在尝试创建一个有球的交互式页面。当我点击它时，页面上会出现 2-3 个随机球。每一个，当点击时，会产生2-3个自己的球，页面慢慢地填满这样的球。我已经使用 Jquery 完成了这一部分。

现在页面有一个对用户隐藏的背景图像，他看到的只是“白色”。当一个新球出现时，它后面的圆形区域（区域的大小是球的两倍）变得透明以显示背景图像的那部分，有点像帝国时代根据位置显示地图的方式玩家走了。

如何根据新创建的 div 的位置实现背景图像的选择性显示？甚至可以仅使用 jquery/css 和 NO flash 来完成吗？

我用于创建新球的 Jquery 代码如下所示：

```
$(document).on("click",".ball_link", function makeDiv(){
count=0;
//ajax code to fetch no. of divs to be created from table

    while(count< no_of_divs)
    {

    //code to calculate random x,y coordinates and save them to posx and posy

    var newdivid='div'+count;
    $newdiv = $('<div/>').css({
    'position':'absolute',
    'left':posx+'px',
    'top':posy+'px',
    'display':'none',
    'background':'ball.png'
    }).appendTo( '.page-wrap' ).delay(900 * count).fadeIn(600).effect("bounce", { times:6, distance:15 },300);
    count++;
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:36:20.690

您可以使用CSS`background-clip`和. 您新创建的 div 应该比带有一些边界半径的“ball.png”大，因此它们显示为圆形。`background-position``border-radius`

然后您可以将背景位置设置为等于负 div 的位置：
如果 div 处于打开状态，`left: 100px; top: 40px`则`background-position`应该是：`-100px -40px`

此处的工作示例：http: [//jsfiddle.net/bndcS/](http://jsfiddle.net/bndcS/)

**编辑**

请在此处查看小提琴：http: [//jsfiddle.net/UX3B6/](http://jsfiddle.net/UX3B6/) “球”出现效果和延迟。
只需要添加一行 CSS :-)

**编辑 2**

至于背景和它的负坐标：想象你有一个大`div`的背景中有一个漂亮的图像。现在你在大的上面创建一个小`div`的。您将其设置在左上角 (0,0) 并将背景设置为与大 div 相同的图像。图像完美匹配。现在你想移动你的小 div 一点点（假设 20px 向右，20 px 向下）。现在图像不匹配 - 为了使事情再次正常工作，您需要将小 div 的背景图像沿您移动 div 本身的相反方向移动，因此负坐标：（左 20px，上 20px = -20px）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:05:39.517

您可以在此处使用 css3 转换是示例和教程，它可能有用

[http://css3.bradshawenterprises.com/transitions/](http://css3.bradshawenterprises.com/transitions/)

# javascript - 使用浮动 div 滚动到特定的 li

> ID：12582446
> 
> 赞同：0
> 
> 时间：2012-09-25T11:55:12.720
> 
> 标签：javascript, jquery, scroll

我已经阅读了这篇文章：[滚动到 li element - jquery](https://stackoverflow.com/questions/4583476/scrolling-to-li-element-jquery)，并使用了 jquery 代码，即 this。

```
var ul = $('ul.myul');
var li = $('li.item', ul)
ul.scrollTop(li.position().top); 
```

UL 位于浮动的 div 上，并且 UL 具有设定的高度，并且溢出设置为自动。LI 设置了填充和边距。

上面的滚动代码不起作用。卷轴的设置比实际项目要远得多。偏移量计算不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:27:23.313

你 ul 有多个列表项，因此变量“li”有多个 li 元素。试试这个

```
var ul = $('ul.myul');
var li = $('li.item:eq(0)', ul);
ul.scrollTop(li.position().top); 
```

祝你好运 ！！

# javascript - three.js - 围绕管几何创建立方体

> ID：12582449
> 
> 赞同：0
> 
> 时间：2012-09-25T11:55:22.050
> 
> 标签：javascript, html5-canvas, webgl, three.js

请找到管几何的 URL：[以 JSON 格式传递 200 个数据点的 3d 管。](https://stackoverflow.com/questions/12530637/three-js-move-camera-inside-tube-geometry)

由于点的数量随管的长度而变化，我如何动态地围绕管几何创建一个透明的立方体以覆盖立方体内的整个管结构，并且整个场景看起来像表面内的管道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:14:09.737

geometry.computeboundingbox() 调整盒子的比例和盒子应该放置的位置

```
scaleX = (max.x -min.x);
scaleY = (max.y -min.y);
scaleZ = (max.z -min.z);

positionX = min.x + scaleX/2;
positionY = min.y + scaleY/2;
positionZ = min.z + scaleZ/2; 
```

# android - 方向更改后片段中的覆盖小部件

> ID：12582454
> 
> 赞同：2
> 
> 时间：2012-09-25T11:55:39.120
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock

在我的 Android 应用程序中，我使用带有选项卡的操作栏在显示选项卡内容的片段之间切换。一切正常，直到方向改变：然后 Android 开始将小部件绘制在彼此之上，以便片段的内容混合在一起。我的`TabListener`：

```
private class TabListener implements ActionBar.TabListener {
    private final Activity mActivity;
    private final String mTag;

    public TabListener(Activity activity, String tag) {
        mActivity = activity;
        mTag = tag;
    }

    @Override
    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction ft) {
        Fragment mFragment = MyActivity.this.getSupportFragmentManager().findFragmentByTag(mTag);
        if (mFragment == null) {
            mFragment = new MyFragment();
            ft.add(android.R.id.content, mFragment, mTag);
        } else {
            ft.attach(mFragment);
        }
    }

    @Override
    public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction ft) {
        Fragment mFragment = MyActivity.this.getSupportFragmentManager().findFragmentByTag(mTag);
        if (mFragment != null) {
            ft.detach(mFragment);
        }
    }

    @Override
    public void onTabReselected(ActionBar.Tab tab, FragmentTransaction ft) {
        // Do nothing
    }
} 
```

我唯一注意到的是，在每次方向更改时，`onTabUnselected()`都不会被调用，但仍会`onTabSelected()`被调用（因此当前选项卡将被附加两次，而不会在两者之间分离）。如果这是问题所在，我不知道如何解决。如果这不是问题，我不知道在哪里看。如果有人有建议，我会很高兴。

旁注：我正在使用 ActionBarSherlock 的操作栏。这个问题出现在我测试过的所有 Android 版本（2.3、4.0、4.1）上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:33:29.853

> 我不确定，但您可以按照以下步骤操作

*   在您的 Activity onCreate() 方法之前获取 Bundle 参考。

    捆绑 b1；

*   在您的 onCreate() 方法中，将 Bundle 值放入 b1

    ```
    @Override
    public void onCreate(Bundle savedInstanceState) {b1=savedInstanceState; 
    ```

    > ...................... }

*   `onTabSelected`在您的方法中使用此 b1作为

    ```
    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction ft) {
        Fragment mFragment = MyActivity.this.getSupportFragmentManager().findFragmentByTag(mTag);

     if (b1!=null){
     ft.detach(mFragment); 
    ```

> //和其余代码

```
 ................}
        } 
```

> 它是一个结论，我在处理片段时已经得出结论，但我还没有使用 TabListener 完成它。所以当你完成时告诉我，或任何其他解决方案。

# java - 如何在 Java 中解析这个日期？

> ID：12582456
> 
> 赞同：-3
> 
> 时间：2012-09-25T11:55:41.837
> 
> 标签：java, android

我想将日期解析为我的格式，`02:09 AM 25/09/2012`但我不能。我使用了这段代码。

```
SimpleDateFormat sdf1 = new SimpleDateFormat("MMMM, DD yyyy HH:mm:ss Z");

//September, 25 2012 02:09:42 +0000
Date date = sdf1.parse(String.valueOf(PUNCH_TIME)); 

SimpleDateFormat sdf2 = new SimpleDateFormat("HH':'mm a 'on' DD'/'MMMM'/'yyyy");

SimpleDateFormat sdf2 = new SimpleDateFormat("MM");
String timeformat=sdf2.format(date);
txtHomePunchStatus.setText("You have Punched In at "+timeformat); 
```

我得到了`You have punched IN at 7:52 AM on 25/01/2012`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:26:55.347

您可能对时区有疑问。输入字符串`September, 25 2012 02:09:42 +0000`是 UTC 的时间戳（偏移量`+0000`）。当您以所需格式格式化日期时，您没有指定时区，因此该`SimpleDateFormat`对象将在您的本地时区显示您的日期，这可能不是 UTC。

您可以在`SimpleDateFormat`用于格式化日期的对象上设置时区。例如：

```
DateFormat df1 = new SimpleDateFormat("MMMM, dd yyyy HH:mm:ss Z");
Date date = df1.parse(PUNCH_TIME);

DateFormat df2 = new SimpleDateFormat("HH:mm a 'on' dd/MM/yyyy");
df2.setTimeZone(TimeZone.getTimeZone("UTC"));
String result = df2.format(date);

System.out.println(result); 
```

**注意**：你必须使用`dd`而不是`DD`为天；`DD`表示一年中的`dd`天数，表示月份中的天数（参见 API 文档`SimpleDateFormat`）。

ps：您对“解析”和“格式”这两个词的使用令人困惑。**解析**的意思是：从字符串转换为`Date`对象，**格式化**的意思正好相反：从`Date`对象转换为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:13:36.423

首先你有一个双重声明`sdf2`。然后，您需要使用`hh`and`mm`数小时和数分钟。阅读文档：[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)就像在这个例子中：

```
 SimpleDateFormat sdf1 = new SimpleDateFormat("MMMM, DD yyyy HH:mm:ss Z");

    //September, 25 2012 02:09:42 +0000
    Date date = null;
    try {
        date = sdf1.parse(String.valueOf(PUNCH_TIME));
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 

    SimpleDateFormat sdf2 = new SimpleDateFormat("hh:mm a 'on' DD/MM/yyyy");

    String timeformat=sdf2.format(date); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-17T04:44:00.607

# php - Omnicompletion 停止提供有用的预测

> ID：12582458
> 
> 赞同：7
> 
> 时间：2012-09-25T11:55:45.877
> 
> 标签：php, vim, ctags, omnicomplete

我正在尝试在 Ubuntu 12.04.1 (LTS) 上使用 ctags 5.9~svn20110310 在 vi​​m 7.3 中为 PHP 设置全能补全，但我遇到了一个非常奇怪的问题，其中补全为同一类的实例提供了截然不同的预测。

我有以下两个文件：

```
// Foo.php
class Foo {
        public function do_stuff() {
                echo 'Working...';
        }
}

// index.php
require 'Foo.php';
$f = new Foo();
$f->[cursor position 1]

$g = new Foo();
$g->[cursor position 2] 
```

当光标位于位置 1 并且我按`CTRL`+ `X` `CTRL`+时，它会按照我们的预期`O`完成该行。`do_stuff(`但是当我在第二个位置按`CTRL`+ `X` `CTRL`+`O`时，我会得到一个以 开头的预测列表`key, next, rewind`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T20:01:38.303

**编辑：**关于您的具体问题，如果您有旧版本的 phpcomplete.vim，您可能只能通过使用特殊的 phpdoc 标签（[请参阅此问题](https://stackoverflow.com/questions/1224838/vim-php-omni-completion)）或重新生成您的标签来正确完成变量声明变量后的文件。

很可能，您没有做错任何事。ctags 中的 PHP 支持非常基础，也不是很严格，不幸的是，这也意味着缺乏对 Vim 的支持。快速浏览 ctags 模块可以说明问题：

[ctags/php.c](http://ctags.svn.sourceforge.net/viewvc/ctags/trunk/php.c?revision=804&content-type=text/plain)

而已。只是几个相对基本的正则表达式。底部的解析器内容不再使用，而且很长一段时间都没有使用过。

使问题更加复杂的是，Vim 中 PHP 的标准全功能函数充其量是 hackish。可以说它涉及*在所有打开的窗口之间切换*作为其完成过程的一部分（Vim 文档明确谴责这种做法）。看看你自己：

[phpcomplete.vim/autoload/phpcomplete.vim](https://github.com/shawncplus/phpcomplete.vim/blob/master/autoload/phpcomplete.vim)

很长一段时间以来，我一直在为 Vim 中糟糕的 PHP 完成而苦苦挣扎，并确定只有彻底检修才能产生令人满意的结果。我已经加入了 ctags 开发邮件列表，并且我计划在那里改进 PHP 支持，然后再继续使 Vim 的全完备功能在解释语言中尽可能正常地工作。目前，不幸的是，解决方案是等到支持更好，或者自己修复它。

# java - Java 使用 Thread.sleep() 或继续询问

> ID：12582460
> 
> 赞同：0
> 
> 时间：2012-09-25T11:56:02.993
> 
> 标签：java, multithreading, sleep

我有一个场景：**我想等待，直到某些事情是错误的。**通常需要20秒左右。

```
while(foo) {
    try {
        Thread.sleep(5000);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
} 
```

还是就这样走？

```
while(foo) {

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T11:59:03.657

忙着等待 20 秒不是一个好主意——睡 5 秒意味着您可能会错过 5 秒的信号。您不能使用其他方式，例如[CountdownLatch](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)：

```
CountDownLatch latch = new CountDownLatch(1);

//code that triggers the signal
latch.countDown();

//code that waits for the signal
try {
    latch.await();
} catch (InterruptedException e) {
    //handle interruption
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T11:58:43.533

这只是一个单元测试，我将使用第一个示例。它不一定很漂亮。

如果这是生产代码，最好使用不同的结构，例如 Condition 或 Future。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T11:59:42.597

第二种形式会消耗大量的 CPU 周期。它会尽可能快地检查，可能每秒十万次。这不是一个好主意。

`Thread.sleep()`更好，一点点。`foo`如果是一个非易失性字段和/或它不在一个`synchronized`块中，那么这里还有另一个问题。实际上并不能保证它会看到来自另一个线程的更新。

`java.util.concurrent`像这样使用原语`CountDownLatch`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T12:08:05.363

当然，不能使用第二种形式。这可能会占用 CPU 并导致问题。第一种形式更好。

什么会改变价值？

如果它只是另一个线程，那么您可以考虑使用等待/通知或任何并发构造。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T12:09:44.200

没有人喜欢等待/通知了吗？它比 Sleep() 循环更高效、更简单，并且比 'CountDownLatch' 输入更少。

# python - 哪个 XML 解析器具有最易读的错误报告？

> ID：12582463
> 
> 赞同：2
> 
> 时间：2012-09-25T11:56:14.547
> 
> 标签：python, xml, xml-parsing, python-2.7, minidom

标准安装提供的 python 中有很多方法来处理 XML，甚至更多作为外部包，请参阅[http://wiki.python.org/moin/PythonXml](http://wiki.python.org/moin/PythonXml)。

对于我使用的项目`minidom`，它可以满足我的需要，但错误报告是相当电报的，例如：

```
no element found: line 7, column 0 
```

这是正确的，但不是很容易阅读，没有提示可能需要哪个元素。由于缺乏信息，我无法向用户报告错误。

这只是一个例子，但在更多情况下 minidom 可以更详细但不是。所以我需要一些详细的东西，一个足够详细的错误，我可以将解析错误传回给用户。

### 哪个标准的 XML“处理解决方案”有最详细的错误报告，如果没有哪个 XML 支持的外部包有这个功能？

用于解析的 xml 文件，在代码中按原样使用`config.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<widget xmlns="http://www.w3.org/ns/widgets">
    <icon src="icon.png"/>
    <content src="index.html"/>
<name>sample</name> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T11:57:29.033

我尝试对上述链接中的所有解析器进行调查，以查看哪个具有最有用的错误报告，我停在 lxml：

```
import xml.dom.minidom as  md
md.parse("config.xml")
#xml.parsers.expat.ExpatError: no element found: line 7, column 0

import elementtree.ElementTree as ET
tree = ET.parse("config.xml")
#xml.parsers.expat.ExpatError: no element found: line 7, column 0

from xml import sax
parser = sax.make_parser()
parser.parse("config.xml")
#xml.sax._exceptions.SAXParseException: config.xml:7:0: no element found

import xml.etree.cElementTree as et
et.parse("config.xml")
#cElementTree.ParseError: no element found: line 7, column 0

import xml.dom.pulldom as pd
doc = pd.parse("config.xml")
for event, node in doc:
     print event, node

#xml.sax._exceptions.SAXParseException: <unknown>:7:0: no element found

import lxml.etree
tree = lxml.etree.parse("config.xml")

#lxml.etree.XMLSyntaxError: Premature end of data in tag widget line 2, line 7, column 1 
```

结论是该`lxml`库具有上述列表中最好的错误报告：

```
"Premature end of data in tag widget line 2, line 7, column 1" 
```

# c# - 如何在同一个 C# 字符串赋值中使用 @ 符号和字符串变量？

> ID：12582465
> 
> 赞同：-1
> 
> 时间：2012-09-25T11:56:21.643
> 
> 标签：c#, string, literals

到目前为止，我一直在使用以下连接字符串：

`public static String connectionString = @"Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\Ahmad\documents\visual studio 2010\Projects\DBtestApp1\DBtestApp1\TestDB.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";`

但是，由于 MDF 文件与运行自身的 EXE 位于同一目录中，并且由于该目录可以更改，所以我现在要使用`Directory.GetCurrentDirectory()`..检索当前目录

问题是，这样的字符串分配不起作用：

`connectionString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=\"" + currentDirectory + "TestDB.mdf\";Integrated Security=True;Connect Timeout=30;User Instance=True";`

在哪里`currentDirectory`保存`Directory.GetCurrentDirectory()`..的输出

那么解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:02:28.253

这实际上应该有效，但根据`Directory.GetCurrentDirectory()`路径的返回值可能会被破坏。

而不是连接字符串中的路径，您应该为此使用`Path.Combine()`提供的内部`System.IO`，它将处理要连接的部分之间的额外/缺失的反斜杠：

```
string DbFile = Path.Combine(Directory.GetCurrentDirectory(), "TestDB.mdf"); 
```

然后，您应该能够简单地将这个字符串添加到您的完整连接字符串中，这也可以使用`String.Format()`：

```
string connectionString = String.Format(@"...AttachDbFilename={0};Integrated...", Path.Combine(Directory.GetCurrentDirectory(), "TestDB.mdf")); 
```

我还没有尝试过，但它不应该只使用`.\TestDB.mdf`文件名吗？还是必须是绝对路径？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:00:33.327

你总是可以把它放在 App_Data 文件夹中（理想情况下它应该驻留的地方）并像这样调用它。

```
Data Source=|DataDirectory|\TestDB.mdf; 
```

# symfony - symfony2 app.php debug参数的区别

> ID：12582466
> 
> 赞同：1
> 
> 时间：2012-09-25T11:56:24.640
> 
> 标签：symfony

我有一个 symfony2 项目运行良好，在对 html 进行了一些修改后，当我在 app.php 中设置时，我总是得到一个空白页：

```
$kernel = new AppKernel('prod', false); 
```

但是如果我将调试参数设置为 true：

```
$kernel = new AppKernel('prod', true); 
```

一切正常，我在 prod.log 中没有看到任何日志。我在我的服务器上使用 php apc 和 fastCGI。谁能告诉我参数之间的区别？或者这只是缓存的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:25:36.507

你说

> 在对html进行一些修改后

这是什么原因？这绝对不足以让我们帮助您解决问题。尝试设置

```
ini_set('display_errors', 1);
error_reporting(-1); 
```

在您的 app.php 文件中。至少必须有您可以提供的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T12:20:57.633

最后，我找到了问题所在。我在我的 appache 日志中再次搜索，我收到了这个错误：[Fri Oct 26 14:12:19 2012] [error] [client 127.0.0.1] PHP Fatal error: require() [function.require]: Failed opening required 'D:/workspace/symfony_bannieres/app/cache/devprod/doctrine/orm/Proxies\AcmeModerationBundleEntityModerationObjectStatusProxy.php' (include_path='.;d:\software\wamp\bin\php\php5.3.9\pear') 在 D :\workspace\symfony_bannieres\vendor\doctrine\lib\Doctrine\ORM\Proxy\ProxyFactory.php 在第 85 行

好的，这意味着我没有实体代理文件。我在开发环境中检查了这个文件，它存在。所以我弄清楚这是我的实体类的问题。我在我的实体类中发现了一个未定义的关系，

```
 /**
 * @var AddepiUser
 *
 * @ORM\ManyToOne(targetEntity="AddepiUser")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="addepi_user_id", referencedColumnName="id")
 * })
 */
private $addepiUser; 
```

事实上我没有这个实体。所以我删除了这个并使用

```
php app/console cache:warmup --env=prod --no-debug 
```

预热 prod 环境。一切正常。

# android - Android：添加字体.. 例如。Roboto 在整个应用程序中始终如一

> ID：12582467
> 
> 赞同：1
> 
> 时间：2012-09-25T11:56:38.540
> 
> 标签：android, typeface

> **可能重复：**
> [Android：想要为整个应用程序而不是运行时设置自定义字体](https://stackoverflow.com/questions/4395309/android-want-to-set-custom-fonts-for-whole-application-not-runtime)

我可以通过一个简单的代码将字体添加到我的应用程序中：

```
TextView txt = (TextView) findViewById(R.id.myText);
Typeface font = Typeface.createFromAsset(getAssets(),
        "Americana Dreams Upright Bold.ttf");
txt.setTypeface(font); 
```

但是如果我想在整个应用程序中添加这种字体，我必须为我必须使用的每个文本添加它。有没有一种更简单的方法可以在整个应用程序中一致地使用字体。

我的 XML 可以显示我手动指定的字体类型（字体）吗？默认字体为：Normal、Sans、Serif、Monospace。请让我知道是否有添加字体的方法。

# c - 如何在系统启动时监控密码过滤器 dll 加载？

> ID：12582468
> 
> 赞同：0
> 
> 时间：2012-09-25T11:56:44.077
> 
> 标签：c, windows, debugging, dll, remote-debugging

我`Password filter`有用 C 编写的自定义 dll。这个 dll 将由`lsass`进程使用。此 dll 在系统启动时加载。由于某种原因 dll 没有被加载并且机器崩溃。我想知道是否有任何方法可以监视此 dll 加载以及 m/c 崩溃的原因。我们可以使用 Visual Studio 的远程调试器吗？我不想在 dll 中添加代码来编写`Eventlog`。

# objective-c - 将 xcode 更新到 4.5 后归档应用程序时出错

> ID：12582470
> 
> 赞同：3
> 
> 时间：2012-09-25T11:56:44.717
> 
> 标签：objective-c, xcode, ios6, testflight, xcode4.5

在更新存档过程之前运行良好，但在更新后当我存档应用程序时，它会向 TestFlight 库错误提供链接器错误：-

```
ld: file is universal (3 slices) but does not contain a(n) armv7s slice: /Users/dhirajchoudhary/Documents/MyWorldOfExpo/HRWeekIndia/TestFlightSDK1.0/libTestFlight.a for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

有谁知道如何在 Xcode 4.5、iOS 6.0 中链接 testflight 库

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T12:13:48.827

这几乎就是错误消息所说的：您的应用程序支持多种架构，包括 armv7s。您正在尝试与不包含 armv7s 架构的 TestFlightSDK 链接。

您需要：

*   使用包含新 armv7s 架构的更新版本的 TestFlight SDK。我不确定这是否存在
*   从您的应用程序中删除 armv7s 架构。它*应该*仍然适用于 iPhone 5（这是目前唯一使用 armv7s 的设备），但您需要测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T01:32:56.630

您需要安装支持 arm7 的 Test Flight SDK 1.1

# android - 安卓通知问题

> ID：12582471
> 
> 赞同：0
> 
> 时间：2012-09-25T11:56:50.567
> 
> 标签：android, notifications

我正在开发一个 Android 应用程序。该应用程序就像本机短信应用程序。我在通知部分遇到问题。在本机应用程序中，它们以下列方式处理通知。

1）如果是来自特定号码的消息，则点击通知将进入相应联系人的聊天页面，通知将被清除。

2）如果来自不同号码的消息，那么点击通知将导致主页，通知不会清除。

我已经完成了第一部分，但我不知道要做第二部分。有没有办法让通知部分不明确并调用意图。？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T12:01:54.937

你必须添加一个标志：

```
 notification.flags |= Notification.FLAG_ONGOING_EVENT; 
```

这是一个完整的例子：

```
 private static final int NOTIFICATION_EX = 0;
 private NotificationManager notificationManager; 
```

...

在 onCreate 中：

```
 notificationManager = (NotificationManager) 
    getSystemService(Context.NOTIFICATION_SERVICE);

int icon = R.drawable.youricon;
    CharSequence tickerText = "Sticky notification";
    long when = System.currentTimeMillis();

    Notification notification = new Notification(icon, tickerText, when);

    Context context = getApplicationContext();
    CharSequence contentTitle = "Sticky notification";
    CharSequence contentText = "...click here and it wont go away...";
    Intent notificationIntent = new Intent(this, mainmenu.class).setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
            | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent contentIntent = PendingIntent.getActivity(this, 
        0, notificationIntent, 0);

    notification.setLatestEventInfo(context, contentTitle, 
        contentText, contentIntent);
    notification.flags |= Notification.FLAG_ONGOING_EVENT;

    notificationManager.notify(NOTIFICATION_EX, notification); 
```

您可以根据自己的喜好调整意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:03:49.973

您将必须创建两种不同类型的通知，第一种您已经实现，第二种您可以复制第一个并检查数字是否不同，使用第二个通知并将标志设置为不清除`notification2.flags |= Notification.FLAG_ONGOING_EVENT;`单击其中的 HomeActivity`PendingIntent`有`Intent`：

# javascript - 强制关闭网页

> ID：12582472
> 
> 赞同：1
> 
> 时间：2012-09-25T11:56:57.867
> 
> 标签：javascript, html, webforms

我有一个页面（比方说 page1），它使用以下方法打开 page2：

```
showModalDialog(page2, '', 'dialogWidth:55em; dialogHeight:50em; status:0'); 
```

我面临 2 个问题（在这篇文章中，我将写第一个）：

**1** ) 当我想使用 javascript 代码关闭第二个页面时，它总是询问我该页面正在尝试自行关闭，我是否允许这样做。我想强行关闭它而不问我任何问题。我尝试了以下方法：

```
function CloseSelection(id) {
    window.opener = "page1"
    window.returnValue = id;
    window.close();
} 
```

并在 Form 标签`target="_self"`中。但是什么也没发生，弹出窗口继续显示。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:19:50.040

您不需要设置**window.opener**，因为它默认设置为打开器页面的对象。
在第 2 页上，代码将是：

```
function CloseSelection(id) {    
   window.returnValue = id;
   window.close();
} 
```

在第 1 页

```
var returnVal = showModalDialog("page2.html", '', 'dialogWidth:55em; dialogHeight:50em; status:0');
// here returnVal will contain the data which is return by page2 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:25:04.427

您不能强制窗口在新窗口中打开。它可能适用于某些浏览器，但不是全部。

为了关闭一个窗口，你可以这样做：

```
// open
var win = window.open("someurlgoeshere");
// close
win.close(); 
```

我相信如果窗口本身试图自行关闭，你只会收到“你确定你希望离开这个页面”的消息（`window.close()`）

# java - 在 linux 服务器上创建和访问会话变量 - 玩 1.2.5

> ID：12582477
> 
> 赞同：1
> 
> 时间：2012-09-25T11:57:10.833
> 
> 标签：java, ubuntu, playframework, playframework-1.x

我在 Windows 上创建了一个 play .1.2.5 应用程序。我将该应用程序部署在 Linux Ubuntu 服务器上。当我在服务器上运行应用程序时，会话变量附近出现错误。

`Error: "NumberFormatException occured : null".`

我知道为什么会发生这个错误（因为不能类型转换为 null），但在此之前应该在服务器上创建 Session 变量。任何帮助表示赞赏。谢谢。

```
 long nCustomerID=Long.parseLong(Session.current().get("customerId")); 
```

# java - IntelliJ IDEA 多实例

> ID：12582478
> 
> 赞同：2
> 
> 时间：2012-09-25T11:57:11.323
> 
> 标签：java, debugging, intellij-idea

默认情况下，IntelliJ IDEA 具有调试/运行同一程序的多个实例的功能。

例如; 如果我在 Project X 上运行调试并且它的主线程正在等待，有时我会返回并再次运行它，因为 DEBUG 按钮未指示当前正在执行的会话。IntelliJ 也不会阻止您运行同一程序的另一个会话（项目 X）

为什么需要此功能，如何关闭它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T12:09:44.083

a) 当您想在新实例中重新运行配置时，该功能非常好。例如，您想在多个实例中启动一个简单的客户端，而无需任何其他努力。

b) 你不能真的把它关掉。

这将启动一个新的运行或调试会话：

![启动新的运行/调试会话](../Images/dc39565aa3fe18d95312da88d0a9e867.png)

这将重新运行当前的调试会话：

![重新运行当前调试会话](../Images/6bea16629c906040cdd6eb942c30727a.png)

这将显示您当前的调试会话：

![当前运行的会话](../Images/f4e67e08b4306ad6dcf7b4d2ab9cae9e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-21T14:28:45.030

您可以启用该`Single instance only`选项。去做这个，

1.  转到按钮`Edit Configurations...`左侧的下拉菜单中`Run`。
2.  选择适当的配置。
3.  单击`Single instance only`复选框。

# php - Google 应用引擎上的 Facebook 应用（php Graph api）

> ID：12582479
> 
> 赞同：0
> 
> 时间：2012-09-25T11:57:11.177
> 
> 标签：php, google-app-engine

我已经在谷歌应用引擎中使用 java 安装了 Quarcus，并且 php 工作正常。

现在我真的很想在应用程序引擎中使用 facebook。但我在中间感到震惊。

我成功获得了访问令牌，我使用下面的代码来获取用户 ID

```
$url =  "https://graph.facebook.com/me?access_token=".$access_token;
 $response = file_get_contents($url);
    echo $url; 
```

但我得到以下错误

**警告：/me 无法读取 [file_get_contents] [https://graph.facebook.com/me?access_token=sdfsdfsft0GhbgkL54nwRjlF8oZCkdgFhb0b2M45JfVIZBX9PMZCvgkTPmjDawHSFt7KiZA67PVRws2OG3x6R5tKksdfsdfsf](https://graph.facebook.com/me?access_token=sdfsdfsft0GhbgkL54nwRjlF8oZCkdgFhb0b2M45JfVIZBX9PMZCvgkTPmjDawHSFt7KiZA67PVRws2OG3x6R5tKksdfsdfsf)**

但是当我在浏览器中访问上述网址时，它工作正常。请提供任何帮助。

ps：听说 curl 在谷歌应用引擎上不起作用..是真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:06:33.713

应用程序没有直接访问互联网，您必须使用 urlfetch。

您必须找到从 php 运行 java 函数并使用它的方法。

对于 Java，您可以在此处查看文档： [https ://developers.google.com/appengine/docs/java/urlfetch/overview](https://developers.google.com/appengine/docs/java/urlfetch/overview)

低级：[https ://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/urlfetch/package-summary](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/urlfetch/package-summary)

# cocos2d-x - 检查动画是否在 cocos2d-x 中运行

> ID：12582481
> 
> 赞同：6
> 
> 时间：2012-09-25T11:57:14.170
> 
> 标签：cocos2d-x

我目前正在学习 cocos2D-x 并且正在做一些精灵动画。
我的目标是，当单击按钮时，对象会向左移动并带有一些动画。现在，如果您快速单击多次，动画会立即发生，看起来熊是在希望而不是在行走。

它的解决方案看起来很简单，我应该检查动画是否已经在运行，以及是否不应该运行新动画。

以下是我的代码的一部分。

```
CCSpriteFrameCache::sharedSpriteFrameCache()->addSpriteFramesWithFile("AnimBear.plist");
CCSpriteBatchNode* spriteBatchNode = CCSpriteBatchNode::create("AnimBear.png", 8);

this->addChild(spriteBatchNode,10);
        CCArray *tempArray = new CCArray();
char buffer[15];
for (int i = 1; i <= 8 ; i++) 
    {
sprintf(buffer,"bear%i.png", i);
tempArray->addObject(CCSpriteFrameCache::sharedSpriteFrameCache()->spriteFrameByName(buffer));      
}

CCAnimation *bearWalkingAnimation = CCAnimation::create(tempArray,0.1f);
startAnimation = CCSprite::createWithSpriteFrameName("bear1.png");
startAnimation->setPosition(ccp (350 , CCDirector::sharedDirector()->getWinSize().height/2 -100));
startAnimation->setScale(0.5f);

startAnimation->setTag(5);

//Animation for bear walking    

bearAnimate = CCAnimate::create(bearWalkingAnimation); 
```

这里 BearAnimate 是一个全局变量，我想知道它当前是否正在播放动画。

我该怎么做。？
谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-25T23:14:00.420

假设运行动作的 Sprite 是

```
CCSprite* bear; 
```

我认为你可以使用类似的东西

```
bear->numberOfRunningActions() 
```

`numberOfRunningActions( )`返回一个无符号整数，因此要检查是否没有操作，您必须检查它是否返回`0`

```
if ( bear -> numberOfRunningActions( ) == 0 ) {
   CCLOG( "No actions running." );
} else {
   CCLOG( "Actions running." );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:52:16.853

BearAnimate (CCAnimate) 有一个方法来检查它。

```
if (bearAnimate.isDone())
    doWhatYouWant(); 
```

该方法继承自CCAction。祝你好运。

# c# - .dll 文件无法访问

> ID：12582484
> 
> 赞同：9
> 
> 时间：2012-09-25T11:57:54.360
> 
> 标签：c#, .net, file, dll, reference

我正在尝试将 dll 添加到我的项目中。当我“添加参考”并尝试添加它时，它告诉我：

> “无法添加对 ... 的引用。请确保文件可访问，并且它是有效的程序集或 COM 组件”。

顺便说一句，我正在尝试添加 g729.dll

**如何添加dll？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T19:00:43.240

您必须先将`register`您的 dll 在寄存器库中`add reference`

您可以使用`Regsvr32 tool`

链接：http: [//msdn.microsoft.com/en-us/library/ms859484.aspx](http://msdn.microsoft.com/en-us/library/ms859484.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-18T07:12:11.753

通过在下面提供正确的路径来注册您的 dll：-

打开你的 Visual Studio 的命令提示符并注册你的 dll

c:\Windows\System 32> regsvr32 yourdll.dll

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-10T15:51:58.950

如果您知道程序集名称和版本，如下所示，您可以卸载项目并在编辑模式下打开 csproj。然后找到引用并添加你的 dll 引用

例子

```
 <Reference Include="ReferenceDllAssemblyName, Version=1.0.0.0, Culture=neutral, PublicKeyToken=5a159fbc978150a3, processorArchitecture=MSIL">
      <SpecificVersion>False</SpecificVersion>
      <HintPath>..\TempPath\ReferenceDllAssemblyName.dll</HintPath>
    </Reference> 
```

# yii - 如何在 ny yii 中添加作为模块和行为开发的扩展？

> ID：12582485
> 
> 赞同：1
> 
> 时间：2012-09-25T11:57:54.357
> 
> 标签：yii, yii-extensions

如何在 yii 中添加作为模块开发的扩展？任何人都可以将扩展解释为 Yii 模块并将扩展解释为 Yii 行为吗

[参考](https://stackoverflow.com/questions/12578217/unable-to-add-yii-extension-to-my-project/12578491#12578491)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:49:23.207

Q 的第一部分与此 q**重复：** [https ://stackoverflow.com/questions/12008314/modules-in-yii-explain](https://stackoverflow.com/questions/12008314/modules-in-yii-explain/12008877#12008877)

关于“**如何使用模块**”部分。模块可能是扩展 yii 最简单的方法，因为您需要做的只是[两个小步骤](http://www.yiiframework.com/doc/guide/1.1/en/basics.module#using-module)：

1.  提取基本目录下的代码`/protected/modules`。
2.  在应用程序配置中声明使用的模块：

```
return array(
  ...
  'module' => ('moduleName', 'some argument', 'another argument'),
  ...
); 
```

我强烈建议先看一下上面的文档，然后再看一下[User-Module](http://www.yiiframework.com/extension/yii-user/)（作为代码示例），以便更好地理解 yii 模块。

至于“**通过行为扩展 Yii** ”，我自己也困惑了一段时间，直到我有机会使用[Multi-Lingual_Behavior](http://www.yiiframework.com/extension/multilingual-behavior/#hh1)

没有用行为扩展 Yii 的典型方法，仅仅是因为有多个选项（如您在[此处](http://www.yiiframework.com/doc/guide/1.1/en/extension.use#behavior)和[此处](http://www.yiiframework.com/doc/guide/1.1/en/basics.component#component-behavior)的文档中所见）用于使用（附加）行为到组件（应用程序、模型、控制器等）

也就是说，那里的大多数 yii 扩展都得到了良好的`Usage`文档的支持，这些文档在大多数情况下足以让它们正常工作。

# git - 当某些子文件夹已经是 git repos 时，从现有项目中初始化 git repo 的最干净的方法是什么？

> ID：12582486
> 
> 赞同：4
> 
> 时间：2012-09-25T11:57:55.620
> 
> 标签：git

我开始在生产服务器上的旧代码库上工作。我需要制作一个本地副本，所以我认为明智的做法是：

```
cd docroot
git init
git add .
git commit -m "Files before I started work"
git push origin // github account 
```

然后将 repo 克隆到我的开发箱。但是，生产服务器上的一些子文件夹是单独的 git 存储库，用于已开发的各种插件。这会弄乱我正在创建的主要存储库吗？理想情况下，我希望将它们作为子模块，但是如何在不干扰生产文件的情况下整理 init 过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:27:41.623

在添加“一切”之前，您可以创建一个`.gitignore`文件以引用实际上是 git repos 的子目录的路径。
他们不会被添加。

那样：

*   您的第一次提交将仅代表您需要的内容（即不是子模块）
*   您可以稍后在该新存储库的本地克隆中将子存储库作为子模块引用。

# sdk - Dynamics CRM 使用 C# 代码合并两个联系人，来自 SDK 的修改示例

> ID：12582489
> 
> 赞同：2
> 
> 时间：2012-09-25T11:58:04.943
> 
> 标签：sdk, merge, crm, records, microsoft-dynamics

我一直在尝试让 Dynamics CRM 2011 SDK 中的 Merge 示例正常工作。 [http://msdn.microsoft.com/en-us/library/hh547408.aspx](http://msdn.microsoft.com/en-us/library/hh547408.aspx)

我稍微修改了一下。我创建了两个联系人而不是帐户（尽管代码中的一些变量名称可能另有说明。例如 _account1Id 实际上是联系人 1 的 GUID。）

第一个联系人记录已填写姓名、姓氏和电话字段。第二个联系人记录填写了姓名、姓氏和电子邮件字段。

发生合并的部分如下。原始代码可以从顶部的链接中看到。

当我通过以下修改运行示例时，电子邮件地址不会合并到新的联系人记录中。我得到的是一个合并的联系人，其中包含来自其中一条记录的值，添加了地址数据，但没有电子邮件。我认为这应该用第二条记录中的非空字段填充主记录的空字段。

作为 Dynamics CRM 的新手，经过大量谷歌搜索和调试后，我无法理解原因。如果有人能给我一些关于问题可能是什么的反馈，我会很高兴。

提前致谢。

```
 _serviceProxy.EnableProxyTypes();
            CreateRequiredRecords(); // created two contacts with same name, surname. first record has telephone1 filled, second record has emailaddress filled.
            EntityReference target = new EntityReference();
            target.Id = _account1Id;
            target.LogicalName = Contact.EntityLogicalName;
            MergeRequest merge = new MergeRequest();
            merge.SubordinateId = _account2Id;
            merge.Target = target;
            merge.PerformParentingChecks = false;
            Contact updateContent = new Contact();
            updateContent.Address1_Line1 = "test";
            merge.UpdateContent = updateContent;
            MergeResponse merged = (MergeResponse)_serviceProxy.Execute(merge);
            Contact mergeeAccount =
                (Contact)_serviceProxy.Retrieve(Contact.EntityLogicalName,
                _account2Id, new ColumnSet(allColumns: true));
            if (mergeeAccount.Merged == true)
            {
                Contact mergedAccount =
                    (Contact)_serviceProxy.Retrieve(Contact.EntityLogicalName,
                    _account1Id, new ColumnSet(allColumns: true));
            } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T12:21:05.300

这种行为将如预期的那样 - 合并将为您将子记录从下属移动到主记录（因此潜在的机会，地址等），但不会尝试锻炼您想要复制的字段。推理（我猜）是潜在的业务逻辑影响是无穷无尽的——你想复制电子邮件吗？如果填写了所有电子邮件字段怎么办？自定义字段呢？还有很多其他的案例我相信每个人都能想到。

编辑：

为了解决这个问题，`MergeRequest`类上有一个名为`UpdateContent`. 如果您更新此属性上的字段，这些值将合并到父记录中。

您实际上可以在您发布的链接中看到这一点：

```
// Create another account to hold new data to merge into the entity.
// If you use the subordinate account object, its data will be merged.
Account updateContent = new Account();
updateContent.Address1_Line1 = "test"; 
```

# algorithm - 神经网络基础

> ID：12582493
> 
> 赞同：2
> 
> 时间：2012-09-25T11:58:19.117
> 
> 标签：algorithm, neural-network, genetic-algorithm, genetic

我是一名计算机科学专业的学生，​​对于今年的项目，我需要创建遗传算法并将其应用于某些东西。我认为神经网络应用它是一件好事，但我无法理解它们。我完全理解这些概念，但没有一个网站真正解释了以下阻碍我理解的内容：

如何决定有多少节点。节点实际代表什么和做什么。权重和偏差实际上在分类中起什么作用。

有人可以为我解释一下吗？

此外，如果您对我可以应用 GA 的内容有任何类似的想法，我将不胜感激。

非常感谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:42:35.933

[您可能会发现这个关于增强拓扑的神经进化 (NEAT) 的](http://en.wikipedia.org/wiki/Neuroevolution_of_augmenting_topologies)维基百科页面很有趣。NEAT 是应用遗传算法创建神经网络拓扑的一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:35:27.033

解释人工神经网络 (ANN) 的最佳方式是提供它试图模拟的生物过程——神经网络。一个最好的例子是人脑。那么大脑是如何工作的（*对于 CS 来说高度简化了*）？

1.  大脑的功能单元（为了我们的目的）是神经元。它是潜在的蓄能器和“分散器”。这意味着在达到一定量的电势（想想用空气填充气球）之后，它会“发射”（气球爆裂）。它会向它拥有的任何连接发送电信号。

2.  神经元是如何连接的？突触。这些突触可以具有不同的权重（在现实生活中，由于来自较厚/较薄连接的更强/更弱的突触）。这些权重允许一定数量的发射信号通过。

因此，您拥有大量由突触连接的神经元——您的 ANN 的基本表示。请注意，其他人描述的输入/输出结构是应用人工神经网络的问题类型的产物。理论上，任何神经元也可以接受输入。然而，它在计算任务中几乎没有用处。

* * *

现在谈谈ANN。

**神经元**：人工神经网络中的神经元与其生物学对应物非常相似。它们被建模为函数（在某个组合输入信号之后发出“1”信号，或在所有其他时间发出“0”信号），或者产生连续输出的`step`稍微复杂的触发序列（`arctan`,等），尽管缩放相似`sigmoid`一步。这更接近生物现实。

**突触**：这些在人工神经网络中非常简单——只是描述神经元之间连接的权重。仅用于对连接到当前神经元的神经元进行加权，但仍起着至关重要的作用：*突触是网络输出的原因*。需要澄清的是，具有集合结构和神经元激活功能的 ANN 的训练只是对突触权重的修改。这就对了。从“哑”网到产生准确结果的网没有其他变化。

**结构**：神经网络没有“正确”的结构。这些结构要么是 a) 手动选择的，要么是 b) 允许作为学习算法的结果而增长（如 Cascade-Correlation Networks）。

假设是精心挑选的结构，实际上是通过仔细分析问题和预期的解决方案来选择的。“隐藏”神经元/层太少，并且您的结构不够复杂，无法逼近复杂的函数。太多了，你的训练时间会很快变得笨拙。出于这个原因，输入（“特征”）的选择和神经网络的结构是 IMO 问题的 99%。相比之下，人工神经网络的训练和使用是微不足道的。

* * *

现在解决您的 GA 问题，这是通过修改突触权重来训练网络的众多努力之一。为什么？因为最终，神经网络的输出只是一个 N 维的极高阶曲面。*任何*表面优化技术都可以用来求解权重，遗传算法就是这样一种技术。简单的反向传播方法类似于基于降维梯度的优化技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:58:21.333

你的问题很复杂，我不认为一个小的答案会让你完全满意。还是让我试试吧。

首先，你的神经网络必须至少有三层（假设是一个简单的前馈层）。第一个是输入层，每个输入会有一个神经元。第三层是输出层，每个输出值将有一个神经元（如果您正在分类，可能会有多个 f 您想为每个神经元分配“属于”含义）。剩下的层是隐藏的一个，它将位于输入和输出之间。确定其大小是一项复杂的任务，您可以在以下参考资料中看到：

*   [comp.ai 常见问题](http://www.faqs.org/faqs/ai-faq/neural-nets/part3/section-10.html)
*   [关于堆栈交换的帖子](https://stats.stackexchange.com/questions/181/how-to-choose-the-number-of-hidden-layers-and-nodes-in-a-feedforward-neural-netw)

尽管如此，最好的方法是让您更清楚地说明您的问题（尽可能地工业保密），并让我们更多地考虑您的背景。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T21:38:47.000

> ...我理解这一点的主要障碍是理解隐藏层的实际工作原理；我不太了解神经元的功能以及权重的用途...

中间层的每个节点都是一个“特征检测器”——它会（希望）“点亮”（即，被强烈激活）以响应输入中的一些重要特征。权重是强调前一层的一个方面；也就是说，神经元的输入权重集合对应于前一层中的哪些节点对该特征很重要。

如果连接`myInputNode`到的权重`myMiddleLayerNode`为 0，那么您可以看出这对于检测`myInputNode`到的任何特征都不重要`myMiddleLayerNode`。但是，如果连接`myInputNode`到的权重`myMiddleLayerNode`非常大（正或负），您知道这`myInputNode`非常重要（如果非常负，则意味着“不，几乎可以肯定此特征不存在”，而如果非常正则意味着“是的，这个功能几乎肯定存在”）。

所以一个推论是你希望你的中间层节点的数量与需要多少特征来分类输入有对应关系：中间层节点太少，在训练过程中很难收敛（因为每个中间层节点将不得不在其特征检测上“加倍”），而太多的中间层节点可能会过度拟合您的数据。

所以......遗传算法的一个可能用途是设计您的网络架构！即使用一个GA来设置中间层节点的数量和初始权重。人口的一些实例将更快地收敛并且更健壮——这些可以为后代选择。（就个人而言，我从来没有觉得这是对 GA 的一种*很好的*使用，因为我认为通过反复试验进入一个体面的 NN 架构通常会更快，但是以这种方式使用 GA 并不少见。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T21:21:21.040

输入和输出节点的数量取决于您拥有的输入和输出的数量。中间节点的数量由您决定。没有“正确”的数字。

想象一个简单的网络：输入（年龄、性别、国家、已婚）输出（今年的死亡几率）。您的网络可能有两个“隐藏值”，一个取决于年龄和性别，另一个取决于国家和已婚。你把重量放在每个人身上。例如，Hidden1 = 年龄 * 体重 1 + 性别 * 体重 2。隐藏 2 = 国家 * 体重 3 + 已婚 * 体重 4。然后，您制作另一组权重，Hidden3 和 Hidden4 连接到输出变量。

然后你从人口普查中获取数据，并通过你的神经网络运行以找出与数据最匹配的权重。您可以使用遗传算法来测试不同的权重集。如果您有太多边而无法尝试所有可能的权重，这将很有用。你需要找到好的权重，而不是穷尽所有可能的权重，所以 GA 可以让你“进化”一组好的权重。

然后你根据来自不同人口普查的数据测试你的权重，看看它的效果如何。

# c# - 使用绑定属性在 Metro 风格应用程序中打开 appbar

> ID：12582497
> 
> 赞同：1
> 
> 时间：2012-09-25T11:58:28.500
> 
> 标签：c#, xaml, windows-runtime, winrt-xaml

我的主页有 appbar，它在不同的页面之间共享。我编写了以下代码以在单击 gridview 项目时打开应用程序栏。

XAML

```
<AppBar Opened="AppBar_Opened" IsOpen="{Binding IsAppBarOpen}"> 
```

后端

```
private void Clock_SelectionChanged(object sender, SelectionChangedEventArgs e)
{            
    App.ViewModel.SelectedClock = (Clock)ThemeGridView.SelectedItem;
    App.WorldViewModel.IsAppBarOpen = true;                  
}

 private void ThemeGridView_ItemClick(object sender, ItemClickEventArgs e)
    {
        App.ViewModel.SelectedClock = (Clock)ThemeGridView.SelectedItem;
        App.WorldViewModel.IsAppBarOpen = true;
    } 
```

世界观模型

```
private bool _IsAppBarOpen;

public bool IsAppBarOpen
{
   get { return _IsAppBarOpen; }
   set { base.SetProperty(ref _IsAppBarOpen, value); }
} 
```

网格视图 XAML

```
<GridView
        Grid.Row="1"
        Grid.Column="1"

         x:Name="ThemeGridView"                    
                ItemsSource="{Binding Clocks}" 
                ItemTemplate="{StaticResource WorldClockTemplate}"
                SelectionChanged="Clock_SelectionChanged"
                SelectionMode="None"
                IsItemClickEnabled="True"
                ItemClick="ThemeGridView_ItemClick"
                >
        <GridView.ItemsPanel>
            <ItemsPanelTemplate>
               <WrapGrid />
            </ItemsPanelTemplate>
        </GridView.ItemsPanel>
    </GridView> 
```

但是当我选择 gridview 项目时，appbar 没有弹出。没有绑定错误，所以它真的很神秘！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T03:08:56.017

没有办法[根据 msdn](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.appbar.isopen)绑定 IsOpen 属性：

> **注意** 绑定到`IsOpen`属性没有预期的结果，因为`PropertyChanged`设置属性时不会发生通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:30:58.387

```
<AppBar Opened="AppBar_Opened" IsOpen="{Binding IsAppBarOpen, **Mode=TwoWay**}"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T19:20:32.960

这对我有用。我使用 MVVM Light Toolkit。

```
public bool AppBarIsOpen
{
    get { return this._appBarIsOpen; }

    set
    {
        if (this._appBarIsOpen == value) { return; }

        this._appBarIsOpen = value;
        this.RaisePropertyChanged("AppBarIsOpen"); // without INotifyPropertyChanged it doesn't work
    }
}

<AppBar
    IsSticky="True"
    IsOpen="{Binding Path=AppBarIsOpen, Mode=TwoWay}"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-30T15:29:23.587

无需为应用栏关闭事件使用代码隐藏处理程序即可完成这项工作的另一种方法：

```
public class AppBarClosedCommand
{
    public static readonly DependencyProperty CommandProperty = DependencyProperty.RegisterAttached("Command", typeof(ICommand),
        typeof(AppBarClosedCommand), new PropertyMetadata(null, CommandPropertyChanged));

    public static void SetCommand(DependencyObject attached, ICommand value)
    {
        attached.SetValue(CommandProperty, value);
    }

    public static ICommand GetCommand(DependencyObject attached)
    {
        return (ICommand)attached.GetValue(CommandProperty);
    }

    private static void CommandPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        // Attach click handler
        (d as AppBar).Closed += AppBar_onClose;
    }

    private static void AppBar_onClose(object sender, object e)
    {
        // Get GridView
        var appBar = (sender as AppBar);

        // Get command
        ICommand command = GetCommand(appBar);

        // Execute command
        command.Execute(e);
    }
} 
```

然后在 XAML 中你可以像这样使用它：

```
common:AppBarClosedCommand.Command="{Binding AppBarClosedCommand}" 
```

命令功能如下所示：

```
public void OnAppBarClosed()
    {
        AppBarOpen = false;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-15T16:42:34.907

您应该以两种方式绑定 IsOpen 和 IsSticky ，否则您将遇到问题，例如必须点击两次以取消选择项目（一次关闭应用栏，一次取消选择），这将有助于您的应用栏表现更明显（将在选择项目时阻止App Bar弹出点击）。
要显示应用栏，您需要执行以下操作（顺序很重要）：

```
this.IsAppBarSticky = true;
this.IsAppBarOpen = true; 
```

并隐藏它，请执行以下操作：

```
this.IsAppBarSticky = false;
this.IsAppBarOpen = false; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-14T23:17:41.507

有同样的问题，通过添加 Closed 事件并从后面的代码更新 ViewModel 来解决它。由于 TwoWay 绑定没有像 Roman 指出的那样工作，所以没有其他方法。

XAML

```
<AppBar x:Name="BottomAppBar1"
                AutomationProperties.Name="Bottom App Bar"
                Closed="BottomAppBar1_Closed"
                IsOpen="{Binding IsOpen, Mode=TwoWay}"
                IsSticky="True"> 
```

后面的 C# 代码

```
private void BottomAppBar1_Closed(object sender, object e)
{
  MainViewModel vm = this.DataContext as MainViewModel;
  vm.IsOpen = false;
} 
```

C# 主视图模型

```
public const string IsOpenPropertyName = "IsOpen";

private bool isOpen = false;

/// <summary>
/// Sets and gets the IsOpen property.
/// Changes to that property's value raise the PropertyChanged event. 
/// </summary>
public bool IsOpen
{
  get
  {
    return isOpen;
  }
  set
  {
    RaisePropertyChanging(IsOpenPropertyName);
    isOpen = value;
    RaisePropertyChanged(IsOpenPropertyName);
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-23T15:53:15.677

Roman Weisert 的回答正确地说明了它不起作用的可能原因，尽管您还必须按照 Zack Weiner 的建议进行双向绑定（我不确定后者的原因，因为绑定在目标到 -无论如何来源方向）。您的视图模型`AppBar.IsOpen`可能无法反映的当前值。`IsAppBarOpen`在这种情况下，您尝试更新值时，可能不会`PropertyChanged`引发任何事件，因为您实际上可能并未更新值。相反，您可能只是将值设置为 from `false`to`false`或 from `true`to `true`。除非有实际更改，否则大多数`SetProperty`方法实现不会引发事件，我认为您的方法是相同的。`PropertyChanged`

要解决此问题，请考虑按如下方式修改您的视图模型：

```
public bool IsAppBarOpen
{
    get { return _IsAppBarOpen; } //changes initiated from UI not reflected
    set //not updated from UI
    {
        _IsAppBarOpen = value;
        base.OnPropertyChanged();
    }
}
bool _IsAppBarOpen; 
```

与您的视图模型代码的显着区别在于，即使在后备存储等于新引入的值时，也会在`SetProperty`此处调用它。`PropertyChanged`如果您的基类不同，请注意我的有一个`OnPropertyChanged`带有签名的方法

```
void OnPropertyChanged( [CallerMemberName] string propertyName = null ) 
```

这有助于引发`PropertyChanged`事件。

但是，从您对代码隐藏的使用中，我可以看出您并没有真正遵循 MVVM。如果您不关心 MVVM，那么您可以`IsAppBarOpen`完全放弃该属性并直接设置`AppBar.IsOpen`. 然而，作为一个虔诚地坚持 MVVM 的人，我不建议你进一步朝那个（有罪的）方向前进。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-09T13:39:27.513

我遇到了同样的问题，并且将 Caliburn Micro 用于 WinRT，并且这段代码对我有用：

```
<AppBar IsOpen="{Binding AppBarsOpen}" Name="MainAppBar" Padding="10,0,10,0" AutomationProperties.Name="Bottom App Bar">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="50*" />
            <ColumnDefinition Width="50*" />
        </Grid.ColumnDefinitions>
        <StackPanel x:Name="LeftPanel" Orientation="Horizontal" Grid.Column="0" HorizontalAlignment="Left">
            <Button Name="ShowFlyout"  Style="{StaticResource BookmarksAppBarButtonStyle}" />
        </StackPanel>
        <StackPanel x:Name="RightPanel" Orientation="Horizontal" Grid.Column="1" HorizontalAlignment="Right">
            <Button Style="{StaticResource SaveAppBarButtonStyle}" />
        </StackPanel>
    </Grid>
</AppBar> 
```

这就是您在 ViewModel 中的属性：

```
public bool AppBarsOpen
{
    get { return _appBarsOpen; }
    set
    {
        if (value.Equals(_appBarsOpen)) return;
        _appBarsOpen = value;
        NotifyOfPropertyChange(() => AppBarsOpen);
    }
} 
```

# entity-framework - 如何在 EF 4.1 的数据库的可为空列中插入空值或有效值

> ID：12582498
> 
> 赞同：0
> 
> 时间：2012-09-25T11:58:27.790
> 
> 标签：entity-framework

我在场景中，我需要使用 EF 4.1 在数据库中插入一个 dateTime 值。数据库中的 DateColumn 为 Nullable。

在创建实体时，我将其填充为，

```
 DTCLOSE = referenceProblemLog.DateClosed.HasValue ? 
            referenceProblemLog.DateClosed.Value.ToFeedFormatString() : 
            System.DBNull.Value.ToString(), 
```

其中 ToFeedFormatString 是一个扩展方法。

现在我观察到的问题是，如果我有一个正确的值，那么它会正确插入，但是 **当我没有正确的日期值时，我想在数据库列中插入 NULL。但是 EF 正在使用空字符串保存列**

我试图将字段的 StoreGeneratedPattern 更改为“身份”，但问题是，我无法为 DTCLose 字段分配值。

我怎样才能同时拥有这两种东西？1\. EF 应在没有正确值时在数据库中插入 NULL 2\. 否则为正确值

请帮忙

谢谢阿努普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:56:08.807

这是错误`System.DBNull.Value.ToString()`的，因为最后你将拥有字符串对象，ToString() 永远不会返回 null。

你必须设置`DTCLOSE = null`

此外，您不必使用 EF `DBNull`，您只需定义可为空的属性并设置它`null`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-02-10T02:17:43.617

你可以使用这个：

```
 Nullable<DateTime> date=null;
 var entity = new Model()
            {
                GoDate = date
            };

DataContext.Models.Add(entity);
DataContext.SaveChanges(); 
```

# templates - C++模板：自动为成员提供成员所有者类

> ID：12582499
> 
> 赞同：1
> 
> 时间：2012-09-25T11:58:30.343
> 
> 标签：templates, visual-c++

我正在编写我的“属性”类来摆脱设置并从我的代码中得到地狱。我几乎成功了，但我想为班级成员提供“所有者班级”。

目前我应该使用这样的属性：

```
class PropertyUser
{
private:
PROPERTY_PROVIDE(PropertyUser);
                 ^^ I should provide the current class manually here.
public:
PROPERTY_DECLARE(~);
}; 
```

我尝试了很多最后一个是这样的：

```
template<typename T>
struct OwnerClassTrait
{ };

template<typename T, class C>
struct OwnerClassTrait<T C::*>
{
    typedef C Class;
};

#define PROVIDE_CURRENT_CLASS() \
    void __Dummy_Func__(){ }; \
    typedef OwnerClassTrait<decltype(&__Dummy_Func__)>::Class CurrentClassType

#define SOME_FUNCTION(Name) \
    SomeOtherMember<CurrentClassType> Name

class Foo
{
public:
    PROVIDE_CURRENT_CLASS();
    SOME_FUNCTION(ThisTypeAutomaticallyDetectsCurrentClassType);
}; 
```

它给了我错误：错误 C2039: 'Class' : is not a member of 'OwnerClassTrait' 我认为这意味着 decltype 错误（删除当前范围类 C::) 向 OwnerClassTrait 提供类型。

请注意，我现在使用的是 vs2012。我是不是有些不对劲？或者有另一种方法可以很好地解决这个问题？

# python - 不同目录中的测试调用相同时测试发现失败

> ID：12582503
> 
> 赞同：73
> 
> 时间：2012-09-25T11:58:43.020
> 
> 标签：python, unit-testing, pytest, autodiscovery

使用 py.test，在不同目录中调用相同的两个测试会导致 py.test 失败。这是为什么？如何在不重命名所有测试的情况下更改它？

复制做：

```
; cd /var/tmp/my_test_module
; mkdir -p ook/test           
; mkdir -p eek/test
; touch ook/test/test_proxy.py
; touch eek/test/test_proxy.py
; py.test
============================= test session starts ==============================
platform linux2 -- Python 2.7.3 -- pytest-2.2.4
collected 0 items / 1 errors 

==================================== ERRORS ====================================
___________________ ERROR collecting ook/test/test_proxy.py ____________________
import file mismatch:
imported module 'test_proxy' has this __file__ attribute:
  /home/ygolanski/code/junk/python/mymodule/eek/test/test_proxy.py
which is not the same as the test file we want to collect:
  /home/ygolanski/code/junk/python/mymodule/ook/test/test_proxy.py
HINT: remove __pycache__ / .pyc files and/or use a unique basename for your test file modules
=========================== 1 error in 0.01 seconds ============================ 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-09-26T11:03:54.770

放一个`__init__.py`是解决冲突的一种方法。与鼻子不同，当前的 pytest 不会尝试卸载测试模块以导入具有相同导入名称的测试模块。我曾经认为这种自动取消导入有点神奇，并且可能会扰乱人们对导入机制所做的期望；有时人们依赖于测试模块的全局状态，并且自动卸载会丢失它（从另一个测试模块导入的测试模块可能会做意想不到的事情）。但也许这不是一个实际问题，因此 pytest 可以添加类似的 hack ...

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-02-21T18:34:58.683

这是 py.test 的一个实际功能。[您可以在pytest.org - 良好集成实践 - 选择测试布局/导入规则](http://docs.pytest.org/en/latest/goodpractices.html#choosing-a-test-layout-import-rules)中找到此行为的原因：

> *   避免`__init__.py`测试目录中的文件。这样，您的测试可以轻松地针对已安装的 . 版本运行`mypkg`，而与已安装的软件包是否包含测试无关。

因为这是使用 py.test 的推荐工作流程：使用 安装正在开发的包`pip install -e`，然后对其进行测试。

因此，我自己以约定优于配置的方式选择了唯一的测试名称。它还确保您不会在各种测试运行输出中得到模棱两可的测试名称。

如果您需要保留测试名称并且不关心上述功能，您应该可以将`__init__.py`.

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-09-17T16:23:17.970

我有同样的错误，但解决方案与初始化文件或测试文件上的名称无关。我的**macbook**和**Docker**容器上有**不同的 python 版本。**我从项目根目录的 macbook 的 bash 中启动了一次测试，而不是容器的 bash。

 ****解决方案是通过运行（从容器的 bash 中）删除错误创建的文件：

```
find -name '*.pyc' -delete
find -name __pycache__ -delete 
```

然后再次启动测试（仍然来自容器的 bash），一切正常：

```
py.test 
```****

# html - 单选按钮和复选框标签定位

> ID：12582506
> 
> 赞同：1
> 
> 时间：2012-09-25T11:58:49.047
> 
> 标签：html, css

我有一个表单，其中单选按钮和复选框如下所示： ![在此处输入图像描述](../Images/804f865f0c94190ac72bca8688c64398.png)

我想知道我是否可以以某种方式摆脱按钮与其标签之间的距离。我也喜欢将按钮移动到表单的最左侧。几乎在题号之下。

这是目前我的单选按钮的 CSS：

```
.radio{
direction: ltr;
  padding: 0 5px 0 0px;
  display: block;
  clear: left;
  float: left;
} 
```

如果有帮助，我的整个表单也可以在一个名为风格化的 CSS 下工作，如下所示：

```
/* ----------- stylized ----------- */
#stylized{
    border:solid 2px #b7ddf2;
    background:#ebf4fb;
}
#stylized h1 {
    font-size:14px;
    font-weight:bold;
    margin-bottom:8px;
}

#stylized p{
    font-size:11px;
    color:#666666;
    margin-bottom:20px;
    border-bottom:solid 1px #b7ddf2;
    padding-bottom:10px;
}
#stylized label{
    display:block;   
    text-align:right;
    width:140px;
    float:left;
}
#stylized link {
    font-family: verdana,arial,sans-serif;
    font-size:11px;
    color:#333333;
    text-decoration:none;
    color: #FFA500;
}
#stylized .small{
    color:#666666;
    display:block;
    font-size:11px;
    font-weight:normal;
    text-align:right;
    width:140px;
}
#stylized input{
    float:left;
    font-size:12px;
    padding:4px 2px;
    border:solid 1px #aacfe4;
    width:200px;
    margin:2px 0 20px 10px;
    background-color: #EEE8AA
}
#stylized input:active { background: #FF7F00 !important; color: black; }
#stylized input:focus { background: yellow; color: black; }

#stylized select{
    float:left;
    font-size:12px;
    padding:4px 2px;
    border:solid 1px #aacfe4;
    width:205px;
    margin:2px 0 20px 10px;
    background-color:#C1FFC1;
    direction: ltr
}

#date select{
    float:left;
    font-size:10px;
    padding:4px 2px;
    border:solid 1px #aacfe4;
    width:60px;
    margin:2px 0 20px 10px;
    background-color:#FFDAB9
}

#stylized textArea{
    float:left;
    font-size:10px;
    font-family: verdana,arial,sans-serif;
    padding:4px 2px;
    border:solid 1px #aacfe4;
    width:330px;
    height:100px;
    margin:2px 0 20px 10px;
    background-color: #EEDD82
}
#stylized textarea:active { background: #FF7F00 !important; color: black; }
#stylized textArea:focus { background: yellow; color: black; } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T12:05:28.500

处理 CSS 样式问题的最佳方法是在 Google Chrome 中打开页面，然后右键单击有问题的部分，然后单击“检查元素”。然后您将在右侧样式显示中看到负责您选择的内容的 css。您可以从那里更改这些项目，而无需重新加载页面。

所以我建议你这样做，然后在`display: block;`右侧显示屏上，将其更改为`display: none;`. 您可以在整个过程中进行这样的细微更改，直到获得所需的外观，然后更新您的实际 css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:56:19.320

您的标签文本正确对齐：

```
#stylized label{
  display:block;   
  text-align:right;
  width:140px;
  float:left;
} 
```

因此，文本与其容器对齐。

# c# - 使用 web.config 中的位置标记重定向到安全页面

> ID：12582508
> 
> 赞同：0
> 
> 时间：2012-09-25T11:58:55.153
> 
> 标签：c#, asp.net, security

我正在用 ASP.net4.0 开发 Web 应用程序，

我的网络应用程序库。再有一个文件夹“受保护”，它具有单独的 web.config，其位置标签具有登录表单的路径，该路径位于受保护的文件夹之外。在调用安全页面时，它给了我预期的登录页面，但是在单击登录按钮后输入登录信息时，它无法重定向到安全页面。

所以，请给我这个问题的解决方案，因为我希望重定向到安全页面。

先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:06:27.320

如果您想在成功登录后发送到 /secured，请尝试在 web.config 中设置 defaultUrl 属性：

```
<system.web>
  <authentication mode="Forms">
    <forms defaultUrl="~/secured" loginUrl="~/login.aspx" />
  </authentication>
</system.web> 
```

# cocoa-touch - 从 iOS5 到 iOS6 的 TableView 和 SearchBar 行为有何不同？

> ID：12582509
> 
> 赞同：1
> 
> 时间：2012-09-25T11:58:56.677
> 
> 标签：cocoa-touch, uitableview, uisearchbar, hidden, floating

在我的应用程序中，我使用 UITableView 和 SearchBar，没什么特别的。SearchBar 添加为 tableHeaderView

```
self.searchDisplayController.searchBar.delegate = self;
     self.myTableView.tableHeaderView = self.searchDisplayController.searchBar; 
```

比我使用下面的代码让 SearchBar 保持打开状态，这样它在滚动时就不会被隐藏。

```
- (void) scrollViewDidScroll:(UIScrollView *)scrollView {

    CGRect tableBounds = self.myTableView.bounds;
    CGRect searchBarFrame = self.searchDisplayController.searchBar.frame;

    self.searchDisplayController.searchBar.frame = CGRectMake(tableBounds.origin.x, tableBounds.origin.y, searchBarFrame.size.width, searchBarFrame.size.height);
} 
```

这在 iOS5 和 iOS5.1 中很好用，但在 iOS6 中不行，但我不知道发生了什么变化，有人有什么想法吗？

帮助将不胜感激。

iOS5 和 iOS5.1 中的 SearchBar ![iOS5 中的搜索栏](../Images/21437dad4fe6ae02825bdfa16c2b0d3d.png)

iOS6 中的 SearchBar 是隐藏的 ![iOS6中隐藏的搜索栏](../Images/50c36ab4473e311ee5bc10ec5ba44743.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:55:03.667

我不确定它为什么会改变，但让它在 iOS 6 上运行相当简单。

不要将 设置`UISearchBar`为`tableHeaderView`，而是使用纯`UIView`文本，然后将搜索栏添加为该视图的子视图。

# c++ - 使用类成员作为 WNDPROC/DLGPROC，带或不带全局

> ID：12582511
> 
> 赞同：1
> 
> 时间：2012-09-25T11:59:11.690
> 
> 标签：c++, winapi, callback, wrapper, wndproc

我将继续对此进行总结，如何使用作为类成员的对话过程？我正在创建一个窗口包装类，但`CreateDialogParam`需要一个全局对话框过程，所以我尝试了这个解决方法：

我已经对这个主题进行了一些搜索。我正在创建一个`Dialog`类，我将其子类化为 a`CMainWnd`然后实例化它。在`Dialog`类中，我有一个成员函数定义为`INT_PTR CALLBACK Dialog::cb_proc(HWND,UINT,WPARAM,LPARAM)`. 现在，我知道windows必须有一个全局函数作为回调过程。

所以我制作了一个`std::map<HWND,Dialog*> DlgProcs`映射来将对话框窗口句柄与其 Dialog 类指针相关联。

所以`INT_PTR CALLBACK DlgMainProc(HWND,UINT,WPARAM,LPARAM)`我可以将它传递给`CreateDialogParam()`. 在`DlgMainProc(...)`我的正文中搜索地图以使用`hWnd`参数查找`Dialog*`并返回其`cb_proc(..)`成员。

我的问题是没有任何消息得到处理，这是因为我的`Dialog`班级中的成员过程永远不会被调用。即使当我在语句中放入一个in`MessageBox()`时，消息框也会一遍又一遍地显示，直到我不得不从 Visual Studio 2008 中止程序。这告诉我它正在我的地图中找到 。奇怪的是，如果我把它放在之后的语句中，它也会这样做，这与我矛盾地告诉我它没有在地图中找到。`DlgMainProc``if (DlgProcs.find(hWnd) != DlgProcs.end()) {``hWnd``else``hWnd`

如果我在成员函数中放置一个消息框，`cb_proc`它根本不会显示。但在此期间，我从未遇到任何编译器、链接器或运行时错误。当我从中删除消息框时（不必中止程序，它只是为了调试目的）程序运行但没有处理任何消息，X 按钮不会关闭程序，按钮单击什么也不做。

* * *

这是 PasteBin 代码：[http](http://pastebin.com/GsGUBpZU) ://pastebin.com/GsGUBpZU 顺便说一句，我对它进行子类化没有问题，我的窗口创建得很好，只是没有处理任何消息，`cb_proc`只是永远不会被调用。

**编辑：**这是代码的相关部分

```
map<HWND,Dialog*> g_DlgProcs;

INT_PTR CALLBACK g_MainDlgProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam) {
        if (g_DlgProcs.find(hWnd) != g_DlgProcs.end()) {
                Alert("blah"); // Gets executed repeatedly
                return g_DlgProcs[hWnd]->cb_proc(hWnd, msg, wParam, lParam);
        } else {
                Alert("blah"); // Removing the above alert, this gets
                               // executed repeatedly, erm, as well.. O.o strange
                return FALSE;
        }
}

Dialog::Dialog(int id, HWND parent /* = HWND_DESKTOP */) {
        _id = id;
        _parent = parent;

        // Tried this before CreateDialogParam
        g_DlgProcs.insert(make_pair(_handle, this));

        _handle = CreateDialogParam(
                (HINSTANCE)GetModuleHandle(NULL),
                MAKEINTRESOURCE(id), _parent,
                (DLGPROC)g_MainDlgProc, NULL
        );

        // Then tried it after CreateDialogParam
        g_DlgProcs.insert(make_pair(_handle, this));
}

INT_PTR CALLBACK Dialog::cb_proc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam) {
        Alert("blah"); // Never gets executed

        bool handled = true;

        switch (msg)
        {
        case WM_INITDIALOG:
                OnInitialize();
                break;
        case WM_COMMAND:
                if (HIWORD(wParam) == 0 || HIWORD(wParam) == 1) {
                        OnMenuCommand((HIWORD(wParam) == 1), (int)LOWORD(wParam));
                } else {
                        OnCtrlCommand((int)HIWORD(wParam), (int)LOWORD(wParam), (HWND)lParam);
                }
                break;
        case WM_NOTIFY:
                {
                        LPNMHDR head = (LPNMHDR)lParam;
                        OnNotification(head->code, head->idFrom, head->hwndFrom);
                }
                break;
        case WM_CLOSE:
                OnClose(); // DestroyWindow(_handle)
                break;
        case WM_DESTROY:
                OnDestroy(); // PostQuitMessage(0)
        default:
                handled = ProcessMsg(msg, wParam, lParam);
        }

        // Convert bool to Windows BOOL enum
        return ((handled == true) ? TRUE : FALSE);
} 
```

* * *

有人知道为什么它永远不会被调用吗？或者也许只是引导我以另一种方式将成员函数用作 DLGPROC？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:00:53.053

标准解决方案是将您的`this`指针作为最后一个参数传递给`Create,DialogParam`，将其存储`DWLP_USER`在您的`WM_INITDIALOG`处理程序中，然后从中检索它`DWLP_USER`。基本上你用`DWLP_USER`你的地图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T12:29:10.027

我尝试了您的代码并且它有效：`cb_proc`被调用。您将错过返回`WM_INITDIALOG`前发送的任何消息（例如 ）`CreateDialogParam`。

您可以通过将窗口句柄和对象添加到`g_MainDlgProc`. 如果您收到有关未知窗口的消息，您就知道它属于您正在创建的窗口；将对象放在全局中，您可以将句柄/对象添加到地图中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-21T23:53:58.633

我只是在这里添加它，以防有人发现它有用；使用 C++11 lambda 和模板的魔力，您可以拥有一个简单的包装模板，这意味着您不必不断地重写样板代码来保存和加载窗口和对话框过程中的用户数据。

这是该函数的示例`DialogBoxParam`，但同样的技术也可以应用于`CreateDialogParam`and `CreateWindowEx`。

```
template <typename T, INT_PTR (T::*P)(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)>
INT_PTR DialogBoxThis(T* pThis, HINSTANCE hInstance, LPCWSTR lpTemplateName, HWND hWndParent)
{
    return ::DialogBoxParam(hInstance, lpTemplateName, hWndParent, [](HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam) -> INT_PTR {
        if (uMsg == WM_INITDIALOG) SetWindowLongPtr(hWnd, DWLP_USER, lParam);
        T* pThis = reinterpret_cast<T*>(GetWindowLongPtr(hWnd, DWLP_USER));
        return pThis ? (pThis->*P)(hWnd, uMsg, wParam, lParam) : FALSE;
    }, reinterpret_cast<LPARAM>(pThis));
} 
```

你会像这样使用它：

```
class MyClass
{
    INT_PTR MyDlgProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam);
};

// from inside MyClass, we can show a dialog that uses member function MyDlgProc as the dialog procedure
// note it is NOT a static function

DialogBoxThis<MyClass, &MyClass::MyDlgProc>(this, hInstance,
    MAKEINTRESOURCE(IDD_MYDIALOG), hWndParent); 
```

# javascript - jQuery 使用数组使这段代码更短

> ID：12582515
> 
> 赞同：-1
> 
> 时间：2012-09-25T11:59:27.117
> 
> 标签：javascript, jquery, html

谁能帮我修改这个jQuery代码更短？

HTML 代码：

```
 <div id="blinker1"><img src="aaa.png" /></div>
 <div id="blinker2"><img src="bbb.png" /></div>
 <div id="blinker3"><img src="ccc.png" /></div>
 <div id="blinker4"><img src="ddd.png" /></div>
 <div id="blinker5"><img src="eee.png" /></div> 
```

jQuery代码：

```
function smBlink(){
    //blink 3times
    for(i=0;i<3;i++) {
        $("#blinker1, #blinker2, #blinker3, #blinker4, #blinker5").fadeTo('normal', 0.3).fadeTo('normal', 1.0);
    }
}; 
```

这些标记 ID 具有相同的前缀 (#blinker)，后跟序号。我认为数组函数会有所帮助......但我不知道如何。这些 div 将来会增加或减少。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T12:00:43.030

您可以使用[“属性开始于”选择器](http://api.jquery.com/attribute-starts-with-selector/)：

```
$("div[id^='blinker']").fadeTo('normal', 0.3).fadeTo('normal', 1.0); 
```

这将允许您根据需要添加/删除具有匹配 ID 的元素。

如果您能够修改标记，则将`id`属性替换为共享类名会更有效。然后，您可以使用普通的类选择器：

```
$(".blinker").fadeTo('normal', 0.3).fadeTo('normal', 1.0); 
```

这种方法意味着选择器引擎可以利用`getElementsByClassName`可用的本机函数的速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T12:01:10.530

这是一种解决方案：

```
$("div[id^='blinker']").fadeTo("normal", 0.3).fadeTo("normal", 1.0); 
```

这是另一个更精确的解决方案：

```
$("div").filter(function() {
    return /^blinker\d+$/.test(this.id);
}).fadeTo("normal", 0.3).fadeTo("normal", 1.0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T12:04:23.713

我会添加一些所有 div 通用的类。

```
 <div class="blinker" id="blinker1"><img src="aaa.png" /></div>
 <div class="blinker" id="blinker2"><img src="bbb.png" /></div>
 <div class="blinker" id="blinker3"><img src="ccc.png" /></div>
 <div class="blinker" id="blinker4"><img src="ddd.png" /></div>
 <div class="blinker" id="blinker5"><img src="eee.png" /></div> 
```

然后：

```
function smBlink(){
    //blink 3times
    for(i=0;i<3;i++) {
        $(".blinker").fadeTo('normal', 0.3).fadeTo('normal', 1.0);
    }
}; 
```

这是作为“属性开始于”的替代方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T12:02:06.383

```
function smBlink(){
    //blink 3times
    for(i=0;i<3;i++) {
        $('[id^="blinker"]').fadeTo('normal', 0.3).fadeTo('normal', 1.0);
    }
}; 
```

你可以用这个。id^= 表示任何以“”开头的 ID。通过这种方式，您可以确保代码可以正常工作，而无需在每次修改 HTML 时都对其进行修改。

您可以做的另一件好事是为他们声明一个类，并使用它来代替 ID。

# opengl - 为什么即使只请求 1x1 mipmap 级别，glGetTexImage 也会传输所有 mipmap 纹理？

> ID：12582518
> 
> 赞同：0
> 
> 时间：2012-09-25T11:59:46.167
> 
> 标签：opengl, gpu, gpgpu, render-to-texture

我在 FBO 中渲染到浮点纹理，并且需要 CPU 上该纹理的所有像素的平均值。所以我认为使用 mipmapping 来计算 1x1 mipmap 的平均值非常方便，因为我节省了 CPU 计算时间，我只需要将 1 个像素传输到 CPU，而不是 1024x1024 像素。

所以我使用这条线：

`glGetTexImage(GL_TEXTURE_2D, variableHighestMipMapLevel, GL_RGBA, GL_FLOAT, fPixel);`

但尽管我只特别要求最高的 mipmap 级别，它的大小始终为 1x1 像素，但完成该行代码所需的时间取决于纹理的级别 0 mipmap 的大小。这对我来说毫无意义。例如，在我的测试中，1024x1024 基础纹理的这条线比 32x32 基础纹理花费的时间大约长 12 倍。

fPixel 中的结果是正确的，只包含想要的像素，但时间清楚地表明整个纹理集被转移，这对我来说是主要的原因，因为转移到 CPU 显然是我的瓶颈。

我使用 Win7 和 opengl 并在 ATI Radeon HD 4800 和 GeForce 8800 GTS 上进行了测试。

有谁知道这个问题，或者有一种聪明的方法只将最高 mipmap 的一个像素传输到 CPU？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:51:32.010

```
glGenerateMipmap( GL_TEXTURE_2D );
float *fPixel = new float[4];
Timer.resume();
glGetTexImage(GL_TEXTURE_2D, highestMipMapLevel, GL_RGBA, GL_FLOAT, fPixel);
Timer.stop(); 
```

让这成为您的一个教训：始终提供*完整*的信息。

它花费 12 倍的时间是因为您正在测量*生成*mipmap 所需的时间，而不是将 mipmap 传输到 CPU 所需的时间。`glGenerateMipmap`，像大多数渲染命令一样，在它返回时实际上并没有完成。事实上，它甚至还没有*开始*的可能性很大。这很好，因为它[允许 OpenGL 独立于 CPU 运行。您发出一个渲染命令，它会在稍后的某个时间完成。](http://www.opengl.org/wiki/Synchronization)

但是，当您开始从该纹理读取时，OpenGL 必须停止 CPU 并等待所有将接触该纹理的内容完成。因此，您的时间是测量对纹理执行所有操作所需的时间以及将数据传回的时间。

如果您想要更准确的测量，请在启动计时器`glFinish` *之前发出 a。*

更重要的是，如果要执行像素数据的异步读取，则需要[读取缓冲区对象。](http://www.opengl.org/wiki/Pixel_Buffer_Object)这允许 OpenGL 避免 CPU 停顿，但它仅在您有其他工作可以同时进行时才有用。

例如，如果您这样做是为了计算 HDR 色调映射的场景的整体照明，您应该对*前一帧的*场景数据执行此操作，而不是当前的。没有人会注意到。所以你渲染一个场景，生成mipmaps，读入一个缓冲区对象，然后渲染下一帧的场景，生成mipmaps，读入一个不同的缓冲区对象，然后开始从前一个场景的缓冲区中读取。

这样，当您开始读取前一次读取的结果时，它们实际上会在那里，并且不会发生 CPU 停顿。

# android - 客户使用 GCM 是否需要 Google Play 商店和 Google 帐户？

> ID：12582520
> 
> 赞同：2
> 
> 时间：2012-09-25T11:59:53.777
> 
> 标签：android, cloud, google-cloud-messaging

我读到了 Google Cloud Messaging for Android (GCM)，我很喜欢它，但我害怕缺点和误解

1）我们是否必须强制客户端应用最终用户至少拥有一个谷歌帐户才能使用 GCM？

2) 客户使用 GCM 需要 Google Play 商店吗？

如果是，它是由客户端应用程序用户还是由服务器应用程序端用户完成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:05:14.353

> 我们是否必须强制客户端应用最终用户至少拥有一个谷歌帐户才能使用 GCM？

在旧设备上，是的。引用[文档](http://developer.android.com/guide/google/gcm/gcm.html)：

> 对于 3.0 之前的设备，这要求用户在其移动设备上设置其 Google 帐户。运行 Android 4.0.4 或更高版本的设备不需要 Google 帐户。

> 客户使用 GCM 是否需要 Google Play 商店？

不，但需要 Google 服务框架，并且通常具有 Google 服务框架的设备具有 Play 商店。

# .net - 如何为windows服务添加命令行界面

> ID：12582524
> 
> 赞同：1
> 
> 时间：2012-09-25T11:59:59.853
> 
> 标签：.net, powershell, windows-services

我有一个 Windows 服务应用程序。目前所有的管理任务都是通过配置编辑完成的。

我想添加某种命令行界面 - 我希望它通过 powershell 来完成。

而且我不知道我应该从哪里开始 - 在这种情况下我该如何创建应用程序界面。powershell 应该如何与服务通信？在这种情况下还需要远程功能。

（在该功能中可能还有其他管理工具 - 使用 GUI 或通过浏览器。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T21:55:27.053

稍微扩展一下 LB 的简短评论：让特权服务与用户桌面交互并不是最好的想法，因为这样做可能会打开特权提升的途径。[例如，粉碎攻击](http://en.wikipedia.org/wiki/Shatter_attack)就是这样工作的。

处理与用户交互的更好方法是在 localhost（例如`127.0.0.1:5555`）上有一个非特权侦听器，它将显示通过该端口提交的消息，并让特权服务连接到侦听器以向用户发送消息。

下面的代码片段 - 虽然留有很大的改进空间 - 应该让您大致了解这样的侦听器的外观：

```
$addr = "127.0.0.1"
$port = 5555

[byte[]]$byte = @(0)
$enc = [System.Text.Encoding]::ASCII
[System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")

$socket = New-Object System.Net.Sockets.TcpListener([System.Net.IPAddress]::Parse($addr), $port)
$socket.Start()
while ( $true ) {
  $client = $socket.AcceptTcpClient()
  $stream = $client.GetStream()
  [byte[]]$input = @()
  while ( ($i = $stream.Read($byte, 0, 1)) -ne 0 ) { $input += $byte }
  $client.Close()
  [System.Windows.Forms.MessageBox]::Show($enc.GetString($input), "Title")
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T04:34:37.123

Windows 服务最初看起来像这样：

```
using System.ServiceProcess;
internal partial class MyService : ServiceBase
{
    static void Main()
    {
        ServiceBase[] ServicesToRun = new ServiceBase[] { new MyService() };
        ServiceBase.Run( ServicesToRun );
    }
} 
```

我所做的是修改`Main()`，以便我可以使用它来启动服务和处理命令行内容，如下所示：

```
using System;
using System.Runtime.InteropServices;
using System.ServiceProcess;
internal partial class MyService : ServiceBase
{
    const int ATTACH_PARENT_PROCESS = -1;

    [DllImport( "kernel32.dll" )]
    static extern bool AttachConsole( int dwProcessId );
    [DllImport( "kernel32.dll" )]
    static extern bool FreeConsole();

    static void Main()
    {
        if ( Environment.UserInteractive ) {
            try {
                // Redirect console output to the parent process.
                AttachConsole( ATTACH_PARENT_PROCESS );

                // Process command line arguments here...
            } catch {
                // Handle exceptions here...
            } finally {
                // Detach from the console.
                FreeConsole();
            }
        } else {
            ServiceBase[] ServicesToRun = new ServiceBase[] { new MyService() };
            ServiceBase.Run( ServicesToRun );
        }
    }
} 
```

构建可执行文件后，我像往常一样在操作系统中注册它（[实际上，我使用 -install 命令行选项来执行此操作](https://stackoverflow.com/questions/1195478/how-to-make-a-net-windows-service-start-right-after-the-installation/1195621#1195621)）。服务启动时，`UserInteractive`标志为**false**，因此服务照常启动。但是，在命令提示符下，`UserInteractive`标志为**true**，因此命令行处理会接管。

此时您需要的只是让可执行文件的命令行实例通过某种 IPC（套接字、管道、共享内存、WCF 等）与可执行文件的服务实例进行通信。

# mfc - 将事件处理程序添加到用户定义的窗口类

> ID：12582530
> 
> 赞同：0
> 
> 时间：2012-09-25T12:00:31.007
> 
> 标签：mfc

我正在使用 MFC MDI。我创建了一个窗口主文档窗口。我创建另一个窗口（我们称之为第二个窗口）作为 MDI 窗口视图的子窗口，然后创建第二个窗口的子窗口（第三个窗口）。我再次需要创建另一个窗口，第三个窗口的子窗口。我在功能区上有一个按钮，我想在第三个窗口中调用消息处理程序来处理这个命令。我添加了消息映射和所有必需的东西，但它没有调用消息处理程序。如果我在 MDI 窗口视图中定义消息处理程序，它会捕获事件。如果我不在我的主 CWinApp 类或 MDI 窗口视图类中取消消息处理程序，则该按钮将显示为禁用。

我所有的子视图类都是从 CWnd 继承的，主 MDI 窗口是从 CView 派生的。请让我知道我在这里缺少什么。

萨巴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T01:21:08.287

我在这里不知所措。您正在使用 MFC；为什么使用事件？使用命令消息和命令消息处理程序代替事件。使用 MFC 实现且运行良好的命令路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:15:29.753

MFC 不会将通过单击功能区按钮生成的消息路由到子窗口。如果我们想向 MDI 窗口的子窗口发送消息，我们需要自己做。功能区按钮的消息要么传递给活动的 MDI 窗口，要么传递给 CWinApp 类。

# android - 可以滥用 webview 吗？

> ID：12582541
> 
> 赞同：0
> 
> 时间：2012-09-25T12:01:21.937
> 
> 标签：android

使用 webview，您可以使用纯 html 进行布局，假设您不需要通过代码更改任何内容，只使用 webview 可以吗？整体性能与原生组件相同还是有所下降？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:10:10.103

是的。这就是使用 phonegap 或钛创建应用程序的方式。

看看那些。使用这些框架制作的整个应用程序都由应用程序内的单个 webview 查看。基本上，该应用程序是一个在您的手机上使用的网站，打包为 apk。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:11:43.933

您可以，但一般体验会比使用原生控件更流畅。

或者，您可以使用为您执行此操作的工具，这为您提供对此类移动开发的更多支持，有时还提供原生控件和功能，暴露在 javascripts 对象中，非常方便

这里有些例子 ：

*   [电话间隙： http](http://phonegap.com/) ://phonegap.com/
*   触发器.io：[http://trigger.io](http://trigger.io)
*   Tutanium Appcelerator： http: [//www.appcelerator.com/](http://www.appcelerator.com/)

# iphone - 用于绘制 A4 尺寸纸的 pdf 文件的 UiView 的大小是多少？

> ID：12582542
> 
> 赞同：1
> 
> 时间：2012-09-25T12:01:25.340
> 
> 标签：iphone, ios5, cocos2d-iphone, pdf-generation, ios6

任何人都可以帮我解决用于 A4 尺寸纸张的 UIView For Drawing pdf 的大小。

我使用的是以下尺寸，但我的 pdfView 对象（如标签、图像）不是我为绘图提供的尺寸。

我创建 .xib 并手动绘制 UILabels、图像和线条 然后使用标签属性我提供了用于绘制的框架，但它们根据 .xib 绘制不同的位置我提供了与 .xib 中相同的大小（0、0、792、 1122)。

```
UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, 792, 1122), nil);

+(void)drawLabels:(NSMutableArray*)arr isData:(BOOL)isdata
{

    NSArray* objects = [[NSBundle mainBundle] loadNibNamed:@"PDFView" owner:nil options:nil];

    UIView* mainView = [objects objectAtIndex:0];

    if (isdata) 
    {
        for (int i=1;i<=[arr count];i++)
        {
            UILabel *lbl=(UILabel*)[mainView viewWithTag:i];
            [self drawText:[arr objectAtIndex:i-1] inFrame:lbl.frame isData:isdata];
        }
    }
} 
```

**//这是我的绘制方法**

```
+(void)drawText:(NSString*)textToDraw inFrame:(CGRect)frameRect isData:(BOOL)isdata
{
    int length=[textToDraw length];
    CFStringRef string = (__bridge CFStringRef) textToDraw; 
    CFMutableAttributedStringRef currentText = CFAttributedStringCreateMutable(kCFAllocatorDefault, 0); 
    CTFontRef font = CTFontCreateWithName((CFStringRef)@"Helvetica Neue Bold", 12.0f, nil);
    if (isdata) 
    {
        font = CTFontCreateWithName((CFStringRef)@"Helvetica Neue ", 12.0f, nil);
    }
    CFAttributedStringReplaceString (currentText,CFRangeMake(0, 0), string);
    CFAttributedStringSetAttribute(currentText,CFRangeMake(0, length),kCTFontAttributeName,font);
    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(currentText);
    CGMutablePathRef framePath = CGPathCreateMutable();
    CGPathAddRect(framePath, NULL, frameRect);
    CFRange currentRange = CFRangeMake(0, 0);
    CTFrameRef frameRef = CTFramesetterCreateFrame(framesetter, currentRange, framePath, NULL);
    CGPathRelease(framePath);
    CGContextRef    currentContext = UIGraphicsGetCurrentContext();
    CGContextSetTextMatrix(currentContext, CGAffineTransformIdentity);
    CGContextTranslateCTM(currentContext, 0, frameRect.origin.y*2);
    CGContextScaleCTM(currentContext, 1.0, -1.0);
    CTFrameDraw(frameRef, currentContext);
    CGContextScaleCTM(currentContext, 1.0, -1.0);
    CGContextTranslateCTM(currentContext, 0, (-1)*frameRect.origin.y*2);
    CFRelease(frameRef);
    CFRelease(framesetter);
} 
```

**// 对于线条图，我使用下面的代码**

```
for (int j=1001;j<=1003;j++)
        {
            UILabel *lbl=(UILabel*)[mainView viewWithTag:j];

            CGPoint lblPoint=CGPointMake(lbl.frame.origin.x, lbl.frame.origin.y);
            CGPoint lblPoint2=CGPointMake(lbl.frame.origin.x+lbl.frame.size.width, lbl.frame.origin.y);
            [self drawLineFromPoint:lblPoint toPoint:lblPoint2];
        }

+(void)drawLineFromPoint:(CGPoint)from toPoint:(CGPoint)to
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(context, 2.0);
    CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();
    CGFloat components[] = {0.2, 0.3, 0.2, 0.4};
    CGColorRef color = CGColorCreate(colorspace, components);
    CGContextSetStrokeColorWithColor(context, color);
    CGContextMoveToPoint(context, from.x, from.y);
    CGContextAddLineToPoint(context, to.x, to.y);
    CGContextStrokePath(context);
    CGColorSpaceRelease(colorspace);
    CGColorRelease(color);
} 
```

**这是我的 .xib** ![在此处输入图像描述](../Images/1690a81408478a30f38e1728dadc0b61.png)

**这是我绘制后的 .pdf 文件**

![在此处输入图像描述](../Images/942ff3018eb2834345162669d5409967.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:17:33.390

如果从[http://www.raywenderlich.com/6818/how-to-create-a-pdf-with-quartz-2d-in-ios-5-tutorial-part-2](http://www.raywenderlich.com/6818/how-to-create-a-pdf-with-quartz-2d-in-ios-5-tutorial-part-2)下载了项目，似乎该`drawText:`方法中的 CTM 计算可以得到改进。问题是在修改变换矩阵时没有考虑到矩形的高度。

如果你更换

```
CGContextTranslateCTM(currentContext, 0, frameRect.origin.y*2);
...
CGContextTranslateCTM(currentContext, 0, (-1)*frameRect.origin.y*2); 
```

和

```
CGContextTranslateCTM(currentContext, 0, frameRect.origin.y*2 + frameRect.size.height);
...
CGContextTranslateCTM(currentContext, 0, (-1)*frameRect.origin.y*2 - frameRect.size.height); 
```

那么结果似乎更准确。

此外，Xcode 静态分析器报告了`currentText`该方法中的内存泄漏，因此您应该添加

```
CFRelease(currentText); 
```

添加结尾`drawText:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:23:08.593

做这个：

```
NSArray *aArrPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) ;

NSString *aStrPrintPdfPath = [[aArrPaths objectAtIndex:0] stringByAppendingPathComponent:@"MyDocument.pdf"];
CGContextRef aCgPDFContextRef = [self createPDFContext:CGRectMake(0, 0, 612, 892) path:(__bridge_retained CFStringRef)aStrPrintPdfPath];

CGContextBeginPage(aCgPDFContextRef,nil);
  //turn PDF upsidedown
    CGAffineTransform aCgAffTrans = CGAffineTransformIdentity;
    aCgAffTrans = CGAffineTransformMakeTranslation(0,892);
    aCgAffTrans = CGAffineTransformScale(aCgAffTrans, 1.0, -1.0);
    CGContextConcatCTM(aCgPDFContextRef, aCgAffTrans);

//capture whole view screenshot
[self.view.layer renderInContext:aCgPDFContextRef]; //add QuartzCore framework and import it
    [aPageNote release]; 
    CGContextEndPage (aCgPDFContextRef);

CGContextRelease (aCgPDFContextRef);
NSLog(@"Pdf Successfully Created"); 
```

还要添加这个方法：

```
-(CGContextRef) createPDFContext:(CGRect)aCgRectinMediaBox path:(CFStringRef) aCfStrPath
{

  CGContextRef aCgContextRefNewPDF = NULL;
  CFURLRef aCfurlRefPDF;
  aCfurlRefPDF = CFURLCreateWithFileSystemPath (NULL,aCfStrPath,kCFURLPOSIXPathStyle,false);
  if (aCfurlRefPDF != NULL) {
    aCgContextRefNewPDF = CGPDFContextCreateWithURL (aCfurlRefPDF,&aCgRectinMediaBox,NULL);
    CFRelease(aCfurlRefPDF); 
  }
  return aCgContextRefNewPDF;
} 
```

# android - 在 Nexus 7 / Android 4.1.1 上未完成启动视频的意图

> ID：12582543
> 
> 赞同：0
> 
> 时间：2012-09-25T12:01:32.797
> 
> 标签：android, video, android-intent, android-appwidget

我有一个启动视频的应用程序小部件。它适用于我所有的旧设备，甚至我的 4.1 模拟器，但不适用于我的目标设备，即 Nexus 7。在旧设备上，包括 S2，当您点击小部件时，视频播放。在 Nexus 7 上，小部件被突出显示，但没有触发。

配置活动中创建意图的代码非常简单：

```
Intent videoIntent = new Intent(Intent.ACTION_VIEW);
videoIntent.setDataAndType(Uri.parse(selectedPath), "video/*");
PendingIntent pendingIntent = PendingIntent.getActivity(getBaseContext(), 0,    videoIntent, PendingIntent.FLAG_UPDATE_CURRENT);

RemoteViews views = new RemoteViews(getBaseContext().getPackageName(), R.layout.widgetlayout);
views.setImageViewBitmap(R.id.widgetButton, thumbnail);
views.setOnClickPendingIntent(R.id.widgetButton, pendingIntent); 
```

我似乎找不到比 Intent.ACTION_VIEW 更多的与设备无关的方法来启动视频。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T01:01:35.017

我找到了答案。这可能适用于运行 Android 4.1.1 的任何东西，尽管我不需要为运行 4.1 的模拟器执行此操作

我的原始代码是：

```
Intent videoIntent = new Intent(Intent.ACTION_VIEW);
videoIntent.setDataAndType(Uri.parse(selectedPath), "video/*");
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, videoIntent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

但是由于某种原因，我必须使用 File() 和 Uri.fromFile。

```
Intent videoIntent = new Intent(Intent.ACTION_VIEW);
File file = new File(selectedPath);
videoIntent.setDataAndType(Uri.fromFile(file), "video/mp4");
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, videoIntent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

# c# - 在仍然显示页面的同时设置 404 响应

> ID：12582550
> 
> 赞同：0
> 
> 时间：2012-09-25T12:01:49.077
> 
> 标签：c#, asp.net, http

我有产品的详细信息页面。该产品是通过查询字符串中的 id 获取的，如果在数据库中找到具有该 id 的产品，我们将显示详细信息，否则我们将显示“无法找到该项目”消息。很标准的东西。我想做的是在详细信息页面上显示“找不到此项目”消息，但发送 404 响应。这样 Google 将取消对已删除项目的索引。

所以我有这样的东西（简化）：

```
<asp:Panel ID="pnlDetails" runat="server" Visible="false">
    item details go here
</asp:Panel>

<asp:Panel ID="pnlError" runat="server" Visible="false">
    <p>The specified  item could not be found.</p>
</asp:Panel>

And in the code behind:

if(itemFound)
{
   showDetails();
}
else
{
   showError();
}

private void showDetails()
{
   pnlDetails.Visible = true; 
   //fill in details
}

private void showError()
{
    //set response
    Response.StatusCode = 404;
    pnlError.Visible = true;
} 
```

现在发生的事情是我看到了错误面板，但我仍然收到 200 响应。谁能告诉我我做错了什么？任何建议将不胜感激，非常感谢！

**编辑：**我在`Page_Load`事件处理程序中调用这些方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:02:26.963

我明白了......因为你的代码不会抛出 404，你实际上也想要它，所以谷歌会自然地清理你的死链接......试试这个：[stackoverflow.throwing404errorsForMissingParameters](https://stackoverflow.com/questions/4091684/automatically-throw-404-errors-when-missing-parameters-for-asp-net-mvc)

此外，这很有帮助（接近底部）[forums.asp.net/throwing404InHTTPResponse](http://forums.asp.net/t/1438586.aspx)。例如 HttpContext.Current.Respone.StatusCode = 404;

```
protected void Page_Load(object sender, EventArgs e) 
{ 
    Response.StatusCode = 404; 
    Response.End(); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:53:14.833

谷歌说..

> 如果您网站的过期页面出现在搜索结果中，请确保页面在标题中返回 404（未找到）或 410（已消失）状态。

[这是源](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=64033)
所以你可以做什么..

1.  如果找不到该项目 - 重定向到您的自定义 404 页面。
2.  在 404 页面的 Page_Load 事件中添加这个..

    Response.StatusCode = 404;

但只要这样做，它就会返回 HTTP 302 重定向代码，然后返回 HTTP 200 - ok 代码。因此该页面不会从 Google 的索引中删除。
3\. 打开 Global.asax 文件（如果不存在，添加它）。添加以下代码来处理 404（找不到页面）错误

```
 protected void Application_Error(object sender, EventArgs e)
{
    Exception ex = Server.GetLastError();
    if (ex is HttpException)
    {
        if (((HttpException)(ex)).GetHttpCode() == 404)
            Server.Transfer("~/404.aspx");
    }
    Server.Transfer("~/AnyOtherError.aspx");
} 
```

但是，在这种情况下，请确保您在 web.config 中没有针对 404 的 customErrors 配置。希望对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T12:55:33.143

在方法中设置状态码`Render`，所以它可能看起来像这样：

```
protected override void Render(HtmlTextWriter writer) 
{ 
    base.Render(writer); 
    Response.StatusCode = 404; 
    pnlError.Visible = true;
} 
```

# html - 始终显示浏览器滚动条以防止页面跳转

> ID：12582555
> 
> 赞同：35
> 
> 时间：2012-09-25T12:01:57.423
> 
> 标签：html, css, browser, scrollbar

> **可能重复：**
> [如何使用 javascript 在浏览器中始终显示滚动条？](https://stackoverflow.com/questions/4050076/how-to-always-show-scrollbar-in-browser-using-javascript)

有些页面我有很多内容，其他页面只有几行，所以当我在页面之间单击时，有些页面在浏览器上有滚动条，而其他页面没有。因此，由于在页面之间单击时有额外的空间，页面会一直跳转。

是否有可能让滚动条始终可见，或者如果没有很多内容可以阻止页面跳转，则滚动条变灰？

它可以在所有浏览器上运行，希望有人可以提供帮助，

干杯

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-09-25T12:05:45.790

尝试阅读 Chris Coyer 的这篇[文章](http://css-tricks.com/eliminate-jumps-in-horizontal-centering-by-forcing-a-scroll-bar/)，它解释得很好。

来自文章：

> 将 overflow-y 分配给滚动确实有效，它适用于 Firefox、Safari 和 IE 6，这使其成为最佳解决方案：

```
html {
    overflow-y: scroll; 
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-25T12:08:30.933

```
html {
    overflow-y: scroll; 
} 
```

这是最好的解决方案。

# java - 无法在 java/android 中的 int 数组上收集值

> ID：12582556
> 
> 赞同：0
> 
> 时间：2012-09-25T12:01:59.073
> 
> 标签：java, android

我正在尝试在 int 数组中收集一些值，这些值是通过使用它来自 Web 服务的。这里我使用 SOAP 方法进行消费。

当我试图收集 int 数组中的值时，我无法运行模拟器。

如何克服这个错误？请找到我的来源以供参考。

**Main_WB.java**

```
 public class Main_WB extends Activity 
 {
EditText edt1,edt2;
TextView txt_1;
Button btn;

 @Override
 public void onCreate(Bundle savedInstanceState) 
 {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    edt1 = (EditText)findViewById(R.id.editText1);
    edt2 = (EditText)findViewById(R.id.editText2);
    btn = (Button)findViewById(R.id.button1);

    btn.setOnClickListener(new View.OnClickListener()
    {
    public void onClick(View v) 
    {
        getTMSChart(edt1.getText().toString(),edt2.getText().toString());
    }     
    });
  }

 private void getTMSChart(String FromDate,String ToDate)
 {
     txt_1 = (TextView)findViewById(R.id.textView1);

     System.setProperty("http.keepAlive", "false");        
     SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);        

     envelope.dotNet = true;

     String NAMESPACE = "http://tempuri.org/";
     String URL = "http://54.251.60.177/TMSOrdersService/TMSDetails.asmx";
     String METHOD = "GetTMSChart";

     SoapObject request = new SoapObject(NAMESPACE, METHOD);        
     request.addProperty("FromDate", FromDate);               
     request.addProperty("ToDate", ToDate);

     envelope.setOutputSoapObject(request);
     HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

     try 
     {
         androidHttpTransport.call(NAMESPACE + METHOD, envelope);

         SoapObject result = (SoapObject) envelope.bodyIn;

         SoapObject root =  (SoapObject) ((SoapObject)(result).getProperty(0)).getProperty("NewDataSet");

         int tablesCount = root.getPropertyCount();

      for (int i = 0; i < tablesCount; i++)
      {
         SoapObject table = (SoapObject) root.getProperty(i);
         int propertyCount = table.getPropertyCount();

      for (int j = 0; j < propertyCount; j++)
      {           

    //  String orderNo =  table.getPropertyAsString("Order_No");
    //  String freight =  table.getPropertyAsString("Freight_Rate");
    //  String percent =  table.getPropertyAsString("Margin_Percent");

       int orderNo = Integer.parseInt(table.getPropertyAsString("Order_No"));
       int freightRate = Integer.parseInt(table.getPropertyAsString("Freight_Rate"));
       int marginPercent = Integer.parseInt(table.getPropertyAsString("Margin_Percent"));

       int[] ord = new int[orderNo];
       int[] frei = new int[freightRate];
       int[] margin = new int[marginPercent];

     // whatever you do with these values

       txt_1.setText(ord);
       txt_1.setText(frei);
       txt_1.setText(margin);
          }                   
       }
    }   
    catch (Exception e) 
    {
    }   
    }    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:15:11.777

这是一个编译错误，该错误是不言自明的：

```
The method setText(CharSequence) in the type TextView is not applicable for the arguments (int[]) 
```

这意味着该方法的参数`setText()`必须是 CharSequence 类型，但是您使用类型的参数调用它`int[]`，而不是 CharSequence。

将`int[]`数组转换为字符串，并在 String 实现 CharSequence 时，将生成的字符串传递给`setText()`. 例如：

```
txt_1.setText(Arrays.toString(ord)); 
```

此外，我真的看不出在同一个文本字段上使用三个不同的参数调用 setText() 的意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:13:29.060

```
 int orderNo = Integer.parseInt(table.getPropertyAsString("Order_No"));
   int freightRate = Integer.parseInt(table.getPropertyAsString("Freight_Rate"));
   int marginPercent = Integer.parseInt(table.getPropertyAsString("Margin_Percent"));

   int[] ord = new int[orderNo];
   int[] frei = new int[freightRate];
   int[] margin = new int[marginPercent];

 // whatever you do with these values

   txt_1.setText(ord);
   txt_1.setText(frei);
   txt_1.setText(margin); 
```

你想在这里做什么？从那段（无用的）代码看来，您似乎缺乏基本的编程知识，也许应该阅读更多教程。

也就是说，我要指出你在那里实际做的事情：

```
 int orderNo = Integer.parseInt(table.getPropertyAsString("Order_No")); 
```

在这里，您将属性“Order_No”请求为字符串值并将其转换为 int。到现在为止还挺好。

```
 int[] ord = new int[orderNo]; 
```

在这里，您创建一个元素数量等于 的 int 数组`orderNo`。因此，如果您的 orderNo 是 12345，您将创建一个包含 12345 个元素的 int 数组。我不认为那是你的本意。

```
 txt_1.setText(ord); 
```

在这里，您将那个巨大的（未初始化的）int 数组作为参数传递给 txt_1 的 setText 方法。该方法显然需要一个字符串值而不是一个 int 数组。

那你想做什么？

**编辑：**

要回答有关创建 int 数组的问题：

```
int[] ord = new int[propertyCount];
int[] frei = new int[propertyCount];
int[] margin = new int[propertyCount];

for (int j = 0; j < propertyCount; j++)
{           
    int orderNo = Integer.parseInt(table.getPropertyAsString("Order_No"));
    int freightRate = Integer.parseInt(table.getPropertyAsString("Freight_Rate"));
    int marginPercent = Integer.parseInt(table.getPropertyAsString("Margin_Percent"));

    ord[j] = orderNo;
    frei[j] = freightRate;
    margin[j] = marginPercent;

}                   

// process the arrays; 
```

我假设您希望每个表有一个数组，因此我在内部循环**之外创建数组并将它们填充到循环中。**

之后您可以处理这些数组。请注意，将为外部循环中的每个表重新创建数组。

希望有帮助。

# android - 2048x1536 是 Android 设备上常见的相机分辨率吗？

> ID：12582558
> 
> 赞同：1
> 
> 时间：2012-09-25T12:01:59.770
> 
> 标签：android, camera, resolution

我的应用程序针对处理 2048x1536 大小的图像进行了优化。我可以安全地假设大多数配备至少 5MP 摄像头的现代 Android 手机都支持此分辨率吗？

我不会完全依赖此解决方案的可用性，但我想知道这是否是涵盖大多数常见设备的良好公分母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:54:35.147

无合约 Android 手机越来越受欢迎，您可以看到这些带有 3 MP 摄像头的手机。大多数中端到高端手机将拥有更高的百万像素数。顺便说一句：2048x1536 略高于 3 MP。

它应该是一个相当安全的目标。请注意 RAM 分配，尤其是在 3.0 之前，因为它使用大约 9.4 兆的 RAM 作为未压缩的 RGB24

# c# - 如何在 3.5 框架中使用 c# 设置 HttpResponse.RedirectLocation 时传递数据

> ID：12582562
> 
> 赞同：0
> 
> 时间：2012-09-25T12:02:05.007
> 
> 标签：c#, asp.net

我正在使用 Visual Studio 2008（我坚持使用此版本）进行 SEO 友好的重定向，如下所示：

```
公共静态类 RedirectExtension
    {
        public static void RedirectPermanent（这个 HttpResponse 响应，字符串 pathUrl）
        {
            响应。清除（）；
            response.Status = "301 永久移动";
            response.RedirectLocation = pathUrl;
            响应。结束（）；
        }
    }
}
```

重定向是通过在下拉列表中选择一个项目发生的，该下拉列表显示标志图像（使用流行的 jquery 下拉扩展）和选定的区域。对于某些选择，由于我们没有所选区域的子域，我重定向到同一个地方。（由于未知的原因，我被迫重定向，否则会显示页面名称，这是 SEO 人员不想要的。）

我需要传递以某种方式选择的索引，以便我可以生成下拉列表的适当第一项。我总是显示第一个项目。（我不想强制选择一个项目，因为这会进入无限重定向和选择循环。）

我能做的事情非常有限，因为一切都在我继承的一个可怕的旧站点中运行，我什至无法调试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:26:30.100

一种简单的方法是将索引作为查询字符串参数添加到 Url，例如：

```
public static void RedirectPermanent(this HttpResponse response, string pathUrl, int selectedIndex)
{
    response.Clear();
    response.Status = "301 Moved Permanently";
    response.RedirectLocation = pathUrl + "?index=" + selectedIndex.ToString();
    response.End();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:39:51.437

如果查询字符串不起作用，最后一种方法是使用 cookie。在重定向之前设置 cookie。根据要求，您应该检查是否设置了 cookie。

# c# - 如何在 asp.net 中单击按钮时使会话过期

> ID：12582563
> 
> 赞同：1
> 
> 时间：2012-09-25T12:02:07.510
> 
> 标签：c#, asp.net, session

我有一个 aspx 页面，其中包含 2 个用于用户名和密码的文本框。单击提交按钮时，它会重定向到另一个页面。此页面有 2 个按钮，名为“过期会话”和“转到个人资料页面”。现在单击第二个按钮将用户带到另一个页面，他可以在其中看到该页面的内容。我希望当用户单击过期会话按钮时，会话应该过期，然后当用户单击“转到个人资料页面”时按钮，他将被重定向到页面，但由于会话现在已经结束，因此没有内容可见。这是提交按钮编码。

```
 protected void clicked(object sender, System.EventArgs e)
    {
        Session["username"] = textbox_username.Text.ToString();
        Session["password"] = textbox_password.Text.ToString();
        message.Text = "Session saved!";
        textbox_username.Text = null;
        textbox_password.Text = null;
        Response.Redirect("SessionTest.aspx");
    } 
```

我不知道如何通过单击“过期会话”按钮使会话过期。我是新手。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T12:03:41.450

简短问题的简短回答：

```
//Destroys the session
Session.Clear();
Session.Abandon();
Response.Redirect("Default.aspx"); 
```

在上面的代码之前使用`Session.Clear();`，如果你想清理会话值，但是`Session.Abandon();`你会破坏它。

检查会话

```
if(Session["username"] == null) { } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T12:04:26.477

您可以尝试使用此代码

```
 Session.Clear();
    Session.Abandon();
    //FormsAuthentication.SignOut(); // If you are using FormsAuthentication
    Response.Redirect("Your.aspx"); 
```

你可以在这里查看

```
if(Session["username"] == null)
{
...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T12:10:12.307

当您单击“过期会话”按钮时，您不会，那么您的所有会话都应该过期

因此，您可以在按钮单击事件中使用以下功能：

```
 protected void btnExpireSession_Click(object sender, EventArgs e)
 {
     Session.Abandon();
 } 
```

我想这会对你有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T12:12:35.807

`Session.Abandon()`销毁会话。这可能在用户注销时使用。 `Session.Clear()`只是从对象中删除所有值（内容）。

# date-formatting - 日期格式问题 - PHP

> ID：12582571
> 
> 赞同：0
> 
> 时间：2012-09-25T12:02:30.657
> 
> 标签：date-formatting, php

我有一个数组：

```
$multiple_dates[0] = 2013-06-09 00:00:00;
$multiple_dates[1] = 2014-06-13 12:23:00; 
```

这是我的代码：

```
$format = "d-m-Y h:m:s";
for ($i = 0; $i < count($multiple_dates); $i++) {
$date_display = date_format(date_create($multiple_dates[$i]), $format);
      $fdate = date_translate($format, $date_display);
      echo $fdate;
} 
```

但输出是：

09-06-2013 12:06:00
13-06-2014 12:06:00

时间不正确...知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T12:04:46.670

那是因为分钟分数是`i`，而不是`m`（即月份）

所以

```
$format = "Y-m-d H:i:s"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T12:03:43.857

您的格式无效。尝试：

```
$format = "d-m-Y h:i:s"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T12:05:48.610

应该是这样的“我”

```
$format = "d-m-Y h:i:s"; 
```

像这样编辑你可以得到它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T12:05:57.847

正确的格式是

```
$format = "d-m-Y H:i:s"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T12:06:49.287

检查此代码 -

```
<?php

$mydate = '2014-06-13 12:23:00';

$format = "d-m-Y h:i:s";
echo $date_display = date_format(date_create($mydate), $format); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T12:07:51.463

去`$timestamp = strtotime("09-06-2013 12:06:00")`设置日期('dmY h:m:s', $timestamp);

```
for ($i = 0; $i < count($multiple_dates); $i++) {
      $timestamp = strtotime($multiple_dates[$i]));
      $fdate=date('d-m-Y h:m:s', $timestamp);
      echo $fdate;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-25T12:08:43.920

你可以只使用[`strtotime`](http://php.net/manual/en/function.strtotime.php). 例如：

```
foreach ($multiple_dates as $date) {
  echo date($format, strtotime($date));
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-25T12:12:27.660

试试这个更容易....

```
for ($i = 0; $i < count($multiple_dates); $i++) {
echo date('d-m-Y H:i:s',strtotime($multiple_dates[$i]));
} 
```

我更喜欢这个

# html - CSS中水平到垂直的子菜单

> ID：12582572
> 
> 赞同：1
> 
> 时间：2012-09-25T12:02:35.770
> 
> 标签：html, css, drop-down-menu, navigation, blogger

我在 html 中的当前菜单导航栏：-

您可以通过单击此链接查看我的博客直播：- [www.4time2fun.com](http://www.4time2fun.com)

```
<div id="topmenu"> 
<div id="navigation">
<ul class="categories">

<li class="articles"> <a href="#Link"><img src="http://4.bp.blogspot.com/-9vOA-2QWrsA/UF7oc4Cgn5I/AAAAAAAAE1k/hVusG2XkwKU/s1600/home.png"></a></li>

<li class="tags mega"><a href="#">Category 4 Fun</a>

<ul class="two">

<li class="tag-item"><a title="#Title" href="#Link">Accessories</a></li> 
<li class="tag-item"><a title="#Title" href="#Link">Automotive</a></li> 
<li class="tag-item"><a title="#Title" href="#Link">Beauty</a></li> 
<li class="tag-item"><a title="#Title" href="#Link">Clothing/Apparel</a></li>

</ul> </li>

<li class="about"><a href="#Link">Team 2 Hire</a>
</li> <li class="about"><a href="# Link">Who We Are</a></li> 
<li class="articles"><a href="#Link">2 Contact Us</a></li>

</ul> </div></div> 
```

我在 Css 中的当前菜单导航栏：-

```
#topmenu {
    background: none repeat scroll 0 0 #FBFBFB;
    display: block;
    height: 70px;
    padding-top: 15px;
    text-transform: uppercase;
    width: 990px;
}
#navigation {
    padding: 0 0 5px;
}
#navigation ul li {
    display: inline;
    margin-left: 0;
}
#navigation ul li a {
    padding: 8px 15px;
}
#header #navigation li.mega ul li a {
    font-family: 'Cuprum',arial,serif;
    font-weight: normal;
    text-transform: lowercase;
}
li.mega ul {
    background-color: rgba(255, 255, 255, 0.97);
    border-top: 2px solid #22C3EB;
    padding: 10px 0;
    position: absolute;
    top: 50px;
    z-index: 2;
}
li.mega ul li {
    display: block;
    float: left;
    width: 145px;
}
li.mega ul li a {
    line-height: 30px;
}
#navigation ul li.tags a {
    background: url("http://3.bp.blogspot.com/-ftBEvkZbSMo/TwKvUPTt-II/AAAAAAAAECE/Wrh6HobGwak/s000/arrow_rewards.gif") no-repeat scroll 160px 14px transparent;
    padding-right: 25px;
}
#navigation ul li.tags a:hover {
    background: url("http://3.bp.blogspot.com/-ftBEvkZbSMo/TwKvUPTt-II/AAAAAAAAECE/Wrh6HobGwak/s000/arrow_rewards.gif") no-repeat scroll 160px -10px transparent;
}
#navigation ul li.tags li a, #navigation ul li.tags li a:hover {
    background: none repeat scroll 0 0 transparent;
}
#navigation ul li.tags li a {
    display: block;
    padding: 0 15px;
}
#navigation ul li.tags li a:active {
    border: medium none;
}
#navigation ul li.tags li {
    float: left;
    width: 160px;
}
li.mega ul.two.second {
    display: none !important;
}
li.mega ul {
    left: -9999px;
    position: absolute;
}
li.mega:hover ul, li.mega li ul:hover {
    left: auto;
}
body.category-articles #navigation ul li.articles a, body.category-bestoftheweek #navigation ul li.bestoftheweek a, body.category-about #navigation ul li.about a, body.page-template-page-about-php #navigation ul li.about a, body.page-template-page-contact-php #navigation ul li.contact a {
    background-color: #22C3EB;
    color: #FFFFFF;
}
#topmenu #navigation a {
    color: #616060;
    font-family: 'Cuprum',arial,serif;
    font-size: 18px;
    font-weight: normal;
    text-transform: uppercase;
}
#topmenu #navigation a:hover {
    border-radius: 50px 50px 50px 50px;
    color: #BBBBBB;
} 
```

现在我的子菜单以水平线打开，现在我想通过使用 ul 类“two”和 li 类“tag-item”以垂直方式创建我的子菜单（4 类乐趣）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:10:01.573

将此样式添加到您的 CSS 代码中

```
.two{
  width:100px;
  margin-left:50px;
 } 
```

[演示](http://jsfiddle.net/afshinprofe/haYEP/)

# javascript - eclipse构建我的Java EE应用程序时的Javascript缩小？

> ID：12582574
> 
> 赞同：4
> 
> 时间：2012-09-25T12:02:36.660
> 
> 标签：javascript, eclipse, jakarta-ee, eclipse-plugin, yui

我有 Java EE 应用程序，我在其中使用 ANT 来完成我的所有任务。为了缩小 JavaScript，我使用了 YUI Compressor 及其 ANT 插件，并用于在构建期间压缩我的文件。现在我的问题是我想使用默认的 eclipse 构建并获得相同的结果。我想知道是否可以在 eclipse 构建我的项目期间或在创建战争档案时缩小我的项目中使用的 JavaScript？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:06:28.160

在构建 Java EE 应用程序时，我个人使用 ant 和 Google 的闭包编译器来连接和缩小我的所有 CSS 和 javascript 文件。

步骤是

*   将所有css文件合并为一个
*   连接所有的js文件
*   对 js 连接的文件应用缩小

我有这样的事情：

```
<target name="minify-m3" depends="init">
    <description>build the compacted/minified version </description>
    <echo>Concatenating the css...</echo>
    <concat destfile="${somevar.dir}/pmc.concat.css">
        <fileset dir="${somevar.dir}/skins/contrast">
           <filename name="*.css"/>
           <not><filename name="**/pmc.concat.css"/></not>
      </fileset>
    </concat>

    <echo>Concatenating javascript...</echo>
    <concat destfile="${somevar.dir}/pmc.concat.js">
        <!-- Attention : ensure there is no  Unicode BOM in the files -->
        <!-- attention : keep js files in order! -->
        <filelist dir="src/webapp/m3">
            <file name="graphic_utils.js" />
            <file name="Rect.js" />
            ...
        </filelist>
    </concat>

    <echo>Concatenating using the Closure Compiler...</echo>
    <jscomp compilationLevel="simple" warning="quiet" debug="false" output="${somevar.dir}/pmc.min.js">
        <sources dir="src/webapp/m3">
            <file name="pmc.concat.js" />
        </sources>
    </jscomp>
    <echo>Finished</echo>
</target> 
```

# android - 更新语言环境需要覆盖 OnConfigurationChange，它不指向 layout-land xml，这又是需要的

> ID：12582576
> 
> 赞同：1
> 
> 时间：2012-09-25T12:02:45.530
> 
> 标签：android, android-configchanges

我一直在使用 Locale 作为应用程序语言，在方向更改时需要重新配置。

但是在我的代码中，我必须将我的活动定向到我需要销毁并重新创建我的活动以重置 Xmls 的布局区域。

谁能告诉我如何在`OnConfigurationChange(Configuraion config)`不破坏活动的情况下覆盖并仍然将我的布局定向到布局土地。

这可能吗 ？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-25T12:25:39.620

Okkk 这就是我所做的...我在清单文件上评论了 android:config 选项卡...并且没有覆盖 onConfigurationChange(Configuration config) 这将重新创建我的方向更改活动...我复制粘贴了我的 updateConfig(Locale locale ) 到我的 onCreate() ..它工作得很好..没有改变我的视图状态

感谢帮助

# c# - WPF中的快速像素绘制

> ID：12582577
> 
> 赞同：8
> 
> 时间：2012-09-25T12:02:48.723
> 
> 标签：c#, wpf, raytracing

我想用 WPF 写一个简单的光线追踪器。这是一个学习项目，因此我更喜欢可配置性而不是性能（否则我会选择 C++）。

我仍然想要相对快速的像素绘图。StackOverflow 上的上[一个问题](https://stackoverflow.com/questions/443867/drawing-pixels-in-wpf)包含通过获取 GDI 位图在 WPF 中实现此目的的代码。从我对Windows编程的了解相对较少，

1.  GDI 很慢
2.  DirectX 速度很快
3.  WPF 在下面使用 DirectX（虽然不确定 WPF 的哪些部分）

是否可以通过 WPF Canvas（或类似的）使用 DirectX（不是 GDI）获得像素级访问？

如果可能的话，我还将考虑在 WPF 窗口（以及其他 WPF 控件）中合并 DirectX API 调用的建议。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T12:29:09.770

有趣，但使用光线追踪，将像素写入屏幕将（不应该）是缓慢的部分。不过，您可以`WriteableBitmap`用于此目的。对于您想要的东西，它肯定足够快。

[http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx)

（有关信息，我在这个 emu/IDE 中使用它 - [http://0x10c-devkit.com/](http://0x10c-devkit.com/) - 它可以刷新具有出色性能的低分辨率显示。在 github 存储库中有源代码，即 LEM1802 插件。 )

啊，这一点：[https](https://github.com/kierenj/0x10c-DevKit/blob/master/PluginAPI/NyaElektriska.LEM1802/GPU.cs) ://github.com/kierenj/0x10c-DevKit/blob/master/PluginAPI/NyaElektriska.LEM1802/GPU.cs - 见`UpdateDisplay`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T13:48:30.627

另一种解决方案是[WriteableBitmapEx](https://github.com/reneschulte/WriteableBitmapEx)。它扩展了内置的 WriteableBitmap。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T12:21:50.637

有一个名为 Direct Canvas 的开源项目，它是一个硬件加速的 2D 绘图 API，支持矢量图形、多媒体文件、可扩展像素着色器、混合模式等等！

[http://directcanvas.codeplex.com/](http://directcanvas.codeplex.com/)

演示[http://www.youtube.com/user/jdollah69#p/u](http://www.youtube.com/user/jdollah69#p/u)

# php - 站点缓存被禁用，但无法弄清楚它在哪里被禁用？

> ID：12582578
> 
> 赞同：0
> 
> 时间：2012-09-25T12:02:51.323
> 
> 标签：php, html, caching

我的 PHP 网站的 HTML`<head>`标签包括：

```
<meta http-equiv="Cache-Control" content="max-age=300"/> 
```

然而标题显示：

```
 Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-
        check=0
    Pragma: no-cache 
```

我在我继承的 PHP 站点中找不到禁用缓存的任何地方（我对“缓存”进行了完整的文件内容搜索，但没有找到任何相关内容）。

我不知道还能去哪里看，所以我想问**一下可以在 PHP 站点中禁用缓存的所有不同方式是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:17:03.197

将以下内容放在页面顶部 - 如果可以修复它 - 然后可能检查您的 .htaccess 或控制面板/php.ini 中的某个位置 - 只是在那里猜测..

```
header("Cache-Control: private, max-age=6000, pre-check=6000"); 
header("Pragma: private"); 
header("Expires: " . gmdate("D, d M Y H:i:s"). " GMT"); 
```

来源：[点击这里](https://stackoverflow.com/questions/6161864/php-cache-control-doesnt-seem-to-work)

作者：[这里](https://stackoverflow.com/users/661872/lawrence-cherone)

# c# - 从数据库中读取word文档的最佳方法

> ID：12582583
> 
> 赞同：0
> 
> 时间：2012-09-25T12:03:09.077
> 
> 标签：c#, .net, oracle10g

我有大约 200 个使用控制台应用程序生成的 word 文档。哪个更好：将文档原样存储在数据库中还是仅将路径存储在文件系统中？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:18:47.813

200 美元。你更喜欢什么。您可以控制文件系统中的锁，但在数据库中可能更容易。如果是 200,000，那么基于卷的文件系统将更有理由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:06:22.940

您应该将文件本身存储在文件系统上，并且只存储数据库中每个文件的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:10:18.693

与将文件名/位置存储在数据库中相比，将实际文档的内容存储在数据库中对服务器来说是更多的工作和压力。做的好你就可以把文档的内容调用成HTML或者类似的没问题。

# python - Pyramid 无包静态资产规范

> ID：12582596
> 
> 赞同：2
> 
> 时间：2012-09-25T12:03:52.917
> 
> 标签：python, pyramid

我正在尝试在不使用脚手架生成器的情况下制作一个简单的金字塔应用程序。该代码由单个 app.py 文件组成。

问题是：由于 app.py 不是包的一部分，我如何将目录指定为静态资产规范？我知道始终可以使用绝对路径，但我可以使用相对于 app.py 文件的路径吗？

当应用程序运行时，以下内容似乎可以正常工作，`wsgiref.simple_server`但可以保证在所有情况下都能正常工作（例如，使用 mod_wsgi 或 uwsgi 部署时？）

```
config.add_static_view('static', 'static') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:24:57.817

从[pyramid.config](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/api/config.html#module-pyramid.config) API 文档：

> path 参数是静态文件所在的磁盘路径。这可以是绝对路径、包相对路径或资产规范。

此外，我查看了 Pyramid 的来源，它似乎并不依赖于以任何方式使用的 WSGI。因此，从我的角度来看，它似乎总是将其视为调用脚本的相对路径。这取决于配置器的放置位置或执行的脚本，这通常是相同的。

所以我得出结论，它应该适用于任何符合 WSGI 的系统。

# c# - 库中的 System.Timers.Timer Elapsed 异常处理

> ID：12582598
> 
> 赞同：1
> 
> 时间：2012-09-25T12:03:56.840
> 
> 标签：c#, exception-handling, timer

我想在我的 WPF 应用程序中处理发生的 System.Timers.Timer elapsed 异常（在我的 DLL 库中）。但我无法做到这一点。它抛出我的 DLL 库，应用程序将崩溃......有人知道我该如何解决这个问题吗？

这是我的代码：

```
public partial class MainWindow : Window
{
    MyClass _myClassInstance = null;

    public MainWindow()
    {
        InitializeComponent();

        try
        {
            _myClassInstance = new MyClass();
        } 
        catch(Exception ex)
        {
            //Here i would like to receive the exception
            //But it never goes in there
            MessageBox.Show(ex.Message);
        }
    }
}

public class MyClass
{
    private System.Timers.Timer _timer = null;

    public MyClass()
    {
        _timer = new Timer();
        _timer.Interval = 2000; //2 Seconds
        _timer.Elapsed += new ElapsedEventHandler(_timer_Elapsed);
        _timer.Start();
        ConnectTo();
    }

    void _timer_Elapsed(object sender, ElapsedEventArgs e)
    {
        //If timer is elapsed I have to raise an exception
        throw new Exception("It's taking longer than expected. Progress cancelled!");
    }

    private void ConnectTo()
    {
        //Just an example implementation

        //Do something!!
        //Connect to SerialPort and wait for correct response

        //If connected than
        _timer.Stop();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:07:20.997

异常会在另一个线程上引发（根据您对 Timing.Timer 的选择）。

在 1 个程序集中试试这个：你也抓不到它。它在 DLL 中并不重要。

你只能通过重新思考问题并选择另一个解决方案来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:09:01.830

异常发生在事件内部。这是在另一个线程上运行的，因此它永远不会回到原来的线程。

以不同方式执行此操作的两种可能性。

1.  您的串行端口 com 库具有某种超时功能（也许），只需使用它即可。
2.  在单独的步骤上进行串行端口检查。如果您的时间用完了，请杀死该线程。

    ```
    public class MyClass
    {
        private System.Timers.Timer _timer = null;
        private Thread t;

        public MyClass()
        {
            _timer = new Timer();
            _timer.Interval = 2000; //2 Seconds
            _timer.Elapsed += new ElapsedEventHandler(_timer_Elapsed);
            _timer.Start();
            t = new Thread(new ThreadStart(ConnectTo));
            t.Start();
            t.Join();
        }

        void _timer_Elapsed(object sender, ElapsedEventArgs e)
        {
            //If timer is elapsed I have to raise an exception
            if (t != null)
                t.Abort();
        }

        private void ConnectTo()
        {
            //Just an example implementation

            //Do something!!
            //Connect to SerialPort and wait for correct response

            //If connected than
            _timer.Stop();
        }
    } 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T12:23:18.607

作为一种替代方法，而不是尝试使用异常来控制您的应用程序流程，您可以使用事件来代替，例如

```
public partial class MainWindow : Window
{
    MyClass _myClassInstance = null;

    public MainWindow()
    {
        InitializeComponent();
        _myClassInstance = new MyClass();
        _myClassInstance.TimedOut += delegate (object sender, EventArgs e) {
            ((MyClass)sender).CancelConnect();
            MessageBox.Show("Timeout!");
        };
        _myClassInstance.ConnectTo();
    }
}

...

public class MyClass
{
    Timer _timer = new Timer();

    public event EventHandler TimedOut;

    void _timer_Elapsed(object sender, ElapsedEventArgs e)
    {
        OnTimedOut();
    }

    private void OnTimedOut()
    {
        var handler = TimedOut;
        if (handler != null)
        {
            handler(this, EventArgs.Empty);
        }
    }

    public void ConnectTo(int timeout = 2000)
    {
        CancelConnect();
        _timer.Interval = timeout; // pass timeout in so it's flexible
        _timer.Elapsed += new ElapsedEventHandler(_timer_Elapsed);
        _timer.Start();
        // do connect stuff...
        _timer.Stop();
    }

    public void CancelConnect()
    {
        _timer.Stop();
        // cancel connect stuff...
    }
} 
```

我认为你的构造函数中发生了太多事情，`MyClass`所以我将它移到`ConnectTo`你直接从你的`MainWindow`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-18T08:33:23.220

不行：

## MessageBox.Show(e.Message); 多恩的投掷

```
public class MyClass
{
    private System.Timers.Timer _timer = null;
    private Thread t;

    public MyClass()
    {
        try
        {
        _timer = new System.Timers.Timer();
        _timer.Interval = 5000; //2 Seconds
        _timer.Elapsed += new ElapsedEventHandler(_timer_Elapsed);
        _timer.Start();
        t = new Thread(new ThreadStart(ConnectTo));
        t.Start();
        t.Join();
        }
        catch (Exception e)
        {

            MessageBox.Show(e.Message);
        }
    }

    void _timer_Elapsed(object sender, ElapsedEventArgs e)
    {
        //If timer is elapsed I have to raise an exception
        if (t != null)
        {
            t.Abort();
        }
    }

    private void ConnectTo()
    {
        //Just an example implementation

        //Do something!!
        try
        {
            //Connect to SerialPort and wait for correct response
            using (SqlConnection _SC = new SqlConnection("aaaa"))
            {
                _SC.Open();
            }
        }
        catch (Exception)
        {

            throw;
        }
        finally
        {
            //If connected than
            _timer.Stop();
        }

    }
} 
```

# c++ - 模板函数实例化的可移植性问题

> ID：12582599
> 
> 赞同：3
> 
> 时间：2012-09-25T12:04:10.337
> 
> 标签：c++, templates, c++builder, function-templates, c++builder-xe2

我正在从`MSVC`to移植一个项目，`Borland C++`但在`template functions`. 例如，以下

```
void fn(const char *buffer)
{
  vector<string> output;
  boost::split(output, string(buffer), is_any_of(","));
  // ... 
```

导致编译器错误：

```
[BCC32 Error] example.cpp(208): E2285 Could not find a match for 'split<SequenceSequenceT,RangeT,PredicateT>(vector<string,allocator<string> >,string,is_any_ofF<char>)' 
```

而修改后的例子

```
void fn(const char *buffer)
{
  vector<string> output;
  string sBuffer(buffer);
  boost::split(output, sBuffer, is_any_of(","));
  // ... 
```

编译得很好。

如文章标题所示，这个问题的概括是，在某些情况下`BCC`，如果参数作为在函数参数列表中构造的临时对象传入，则似乎与模板函数不匹配。

在更改所有受影响的代码之前，我想了解为什么`BCC`认为第一个示例是错误的。这是编译器的缺陷，还是我的代码不符合`C++`标准？

我正在使用`RAD Studio / C++ Builder XE2`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:33:11.427

来自 Boost 手册

```
template<typename SequenceSequenceT, typename RangeT, typename PredicateT> 
  SequenceSequenceT & 
  split(SequenceSequenceT & Result, RangeT & Input, PredicateT Pred, 
        token_compress_mode_type eCompress = token_compress_off); 
```

似乎该函数确实通过引用获取其参数，因此您的“解决方法”实际上是使用它的正确方法。

众所周知，MSVC 允许绑定到非常量引用作为“扩展”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T12:34:35.993

这不是因为函数是模板；而是因为函数是模板。这是因为由于某种原因，它将其`Input`参数作为非`const` *左值*引用，如此[处](http://www.boost.org/doc/libs/release/doc/html/boost/algorithm/split_id819641.html)所述：

```
template<typename SequenceSequenceT, typename RangeT, typename PredicateT> 
  SequenceSequenceT & 
  split(SequenceSequenceT & Result, RangeT & Input, PredicateT Pred, 
        token_compress_mode_type eCompress = token_compress_off); 
```

在标准 C++ 中，您不能将临时*右值*（例如 ）绑定`string(buffer)`到此类引用。在微软对语言的富有想象力的重新诠释中，您可以。

解决方案是完全按照您所做的：引入一个可以通过引用传递的命名非临时变量。

# html - 修复背景问题

> ID：12582604
> 
> 赞同：3
> 
> 时间：2012-09-25T12:04:29.900
> 
> 标签：html, css

我正在创建一个应用程序，我希望它有一个修复背景图像。我正在使用 html5、css3 和 javascript。我像往常一样制作了我的 css 来修复我的背景图像，就像这样：

```
 body{ background:#1F1F1F url(../assets/bg.png) fixed;} 
```

好的，即使在 IE8 中并且背景图像已修复，浏览器中的所有内容都可以正常工作。但是当涉及到我的移动设备的默认浏览器时，图像不再固定了！

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:06:52.927

您是否在网络视图中尝试过，或者您只是在浏览器中打开它。我想如果你制作一个应用程序，它将被打包在一个 webview 中。您应该先尝试一下，看看它的行为如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:07:30.290

如何指定固定的背景图像：

```
body
 { 
 background-color: #1F1F1F;
 background-image:url('../assets/bg.png');
 background-repeat:no-repeat;
 background-attachment:fixed;
 } 
```

background-attachment 属性设置背景图像是固定的还是与页面的其余部分一起滚动。所有主流浏览器都支持 background-attachment 属性。

注意：IE7 及更早版本不支持值“inherit”。IE8 需要一个!DOCTYPE。IE9 支持“继承”。

# c# - 遍历所有 listViewItems

> ID：12582605
> 
> 赞同：2
> 
> 时间：2012-09-25T12:04:40.093
> 
> 标签：c#, wpf, listview, listviewitem

我写了一个listView

```
<ListView 
  SelectionChanged="MySelectionChanged" 
  ScrollViewer.CanContentScroll="False"
  Background="Transparent" 
  x:Name="uiListView" 
  ItemTemplate="{StaticResource ItemTemplate}" 
  ItemsSource="{Binding Albums}" 
  Width="117" 
  Height="Auto"
  BorderThickness="0" 
  ScrollViewer.HorizontalScrollBarVisibility="Hidden"
  ScrollViewer.VerticalScrollBarVisibility="Hidden" /> 
```

并将其绑定到

```
public class ListImage
{
    public ListImage(string cover, string title, string isvideo)
    {
        Cover = cover;
        Title = title;
        isVideo = isvideo;

    }

    public string Cover { get; set; }
    public string Title { get; set; }
    public string isVideo { get; set; }
} 
```

我以这种方式添加项目：

```
uiListView.Items.Add(new ListImage(@"C:\tablet\3kings_full.jpg", @"Title", "false"));
uiListView.Items.Add(new ListImage(@"C:\tablet\3kings_full.jpg", @"Title", "true"));
uiListView.Items.Add(new ListImage(@"C:\tablet\3kings_full.jpg", @"Title", "false"));
uiListView.Items.Add(new ListImage(@"C:\tablet\3kings_full.jpg", @"Title", "true"));
uiListView.Items.Add(new ListImage(@"C:\tablet\3kings_full.jpg", @"Title", "false"));
uiListView.Items.Add(new ListImage(@"C:\tablet\3kings_full.jpg", @"Title", "true"));
uiListView.Items.Add(new ListImage(@"C:\tablet\3kings_full.jpg", @"Title", "false"));
uiListView.Items.Add(new ListImage(@"C:\tablet\3kings_full.jpg", @"Title", "true"));
uiListView.Items.Add(new ListImage(@"C:\tablet\3kings_full.jpg", @"Title", "false"));
uiListView.Items.Add(new ListImage(@"C:\tablet\3kings_full.jpg", @"Title", "true")); 
```

一切都很好。我现在需要访问被点击元素的 ListViewItem 所以

```
private void MySelectionChanged(object sender, SelectionChangedEventArgs e)
{
    MessageBox.Show(uiListView.Items[uiListView.SelectedIndex].GetType().ToString());
} 
```

但这会返回 ListImage 类型而不是 ListViewItem。我怎样才能访问它？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:09:54.710

您可以使用`ListBox.ItemContainerGenerator`或者更有可能改变您的方法。您可能会使用该`ListBox.ItemContainerStyle`属性来设置`ListBoxItem`您需要的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:35:11.843

user1697180，不知道你是不是有WinForms背景的？

WPF 更具声明性，至少在 XAML 中是这样，我发现在进行切换时，您必须以不同的方式思考问题。

我注意到你们都绑定到一个物品来源，然后你单独提供物品。项目源应该是您的项目集合，因此您也不需要将它们添加到项目中。

此外，您通常在您的项目上使用一些属性，该属性绑定到您想要在 listViewItem 上的任何属性，因此您永远不需要访问项目本身。

# c# - 如何在不写入文件的情况下将 DataVisualization.Charting.Chart 的图像获取到 iTextSharp.text.Image？

> ID：12582608
> 
> 赞同：4
> 
> 时间：2012-09-25T12:05:05.557
> 
> 标签：c#, winforms, image, charts, itextsharp

我正在编写一个用于可视化测量数据的软件。为此，我使用 System.Windows.Forms.DataVisualization.Charting.Chart 并且我知道我可以通过 chartObj.SaveImage 获取显示的图像以将其存储到文件中。

我的软件应该有一个 PDF 导出，其中应该包含图片。为此，我正在使用 iTextSharp。同样，我确实知道如何通过 iTextSharp.text.Image.GetInstance 将存储在文件中的图片放入 PDF 中。

所以现在我可以拍摄图表的照片，将其放入文件（例如 .jpg 文件）并再次加载此文件以将其放入我的 PDF 中。现在我正在寻找一个很好的解决方案，将图片放入 PDF 而不将其存储到文件中，可能通过 Stream 或类似的东西。我已经尝试了一段时间，但直到现在我都没有成功。我想到了类似的东西

```
Stream imageStream = image of chartObj;
iTextSharp.text.Image picture = iTextSharp.text.Image.GetInstance(imageStream); 
```

据我了解，我未能将 chartObj 中的图片放入 Stream 而不是文件中。如果我有这个，我想我可以通过 iTextSharp.text.Image.GetInstance 加载流。

有没有人可以提供一些帮助？猜猜这并不难，但我是 C# 和 iText 的新手，所以我有点卡在这里。

提前感谢您对此的每一个想法！

安娜

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T16:57:53.047

SaveImage 到 MemoryStream：

```
using (var chartimage = new MemoryStream())
  {
    chart.SaveImage(chartimage, ChartImageFormat.Png);
    return chartimage.GetBuffer();
  } 
```

来自： [Microsoft Chart Controls to PDF with iTextSharp and ASP.NET MVC](http://www.mikesdotnetting.com/Article/115/Microsoft-Chart-Controls-to-PDF-with-iTextSharp-and-ASP.NET-MVC)

# sql-server - 我怎么知道触发器是否被触发？

> ID：12582615
> 
> 赞同：2
> 
> 时间：2012-09-25T12:05:28.627
> 
> 标签：sql-server, sql-server-2008, triggers

我在 Windows 7 机器上使用 SQL Server 2008 R2。我有一个应该在插入时触发的触发器，但不幸的是它没有。我没有 SQL Profiler，因为我有一个速成版。有没有其他方法可以查看出了什么问题？使用 SQL Server 的导入向导将插入到表中，我从 .CSV 导入到表中。

```
CREATE TRIGGER teams.process ON teams
AFTER INSERT
AS
BEGIN
    DECLARE @homeTeamId INT
    DECLARE @awayTeamId INT
    DECLARE @maxTeamId INT
    DECLARE @matchId INT

    SELECT @maxTeamId = 0
    SELECT @maxTeamId = ISNULL(MAX(teamId), 0) from tblTeams

    --- Check if home team has already been inserted into the table.
    SELECT @homeTeamId = -1
    SELECT 
        @homeTeamId = teamId 
    FROM 
        tblTeams t
        JOIN inserted i
        ON t.teamName = i.hometeam
    IF (@homeTeamId = -1) 
    BEGIN
        SELECT @homeTeamId = @maxTeamId + 1
        SELECT @maxTeamId = @maxTeamId + 1
        INSERT INTO tblTeams SELECT @homeTeamId, i.hometeam FROM inserted i
    END

    --- Check if away team has already been inserted into the table.
    SELECT @awayTeamId = -1
    SELECT 
        @awayTeamId = teamId 
    FROM 
        tblTeams t
        JOIN inserted i
        ON t.teamName = i.awayteam
    IF (@awayTeamId = -1) 
    BEGIN
        SELECT @awayTeamId = @maxTeamId + 1
        SELECT @maxTeamId = @maxTeamId + 1
        INSERT INTO tblTeams SELECT @awayTeamId, i.awayteam FROM inserted i
    END

    -- insert a record into the matches table with the home team ID and away team ID.
    SELECT @matchId = 0
    SELECT @matchId = ISNULL(MAX(MatchId), 0) FROM tblMatches
    INSERT INTO tblMatches 
    SELECT @matchId + 1, @homeTeamId, @awayTeamId, i.score 
    FROM inserted i
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:49:34.937

好的。`tblTeams`如果我们可以稍微更改和的表定义`tblMatches`，以便它们使用 来维护自己的`ID`列`IDENTITY`，那么我们可以将触发器修复为对多行插入安全：

```
create table teams (
    hometeam varchar(10) not null,
    awayteam varchar(10) not null,
    score int not null
)
create table tblteams (
    teamId int IDENTITY(1,1) not null,
    teamName varchar(10) not null
)
create table tblmatches (
    matchId int IDENTITY(1,1) not null,
    HomeTeamID int not null,
    AwayTeamID int not null,
    Score int not null
)
go
CREATE TRIGGER process ON teams
AFTER INSERT
AS
SET NOCOUNT ON
declare @TeamIDs table (TeamID int not null,TeamName varchar(10) not null)

;with AllTeams as (
    select hometeam as teamName from inserted
    union
    select awayteam from inserted
)
merge into tblTeams tt using AllTeams at on tt.teamName = at.teamName
when matched then update set teamName = at.teamName
when not matched then insert (teamName) values (at.teamName)
output inserted.TeamID,inserted.teamName into @TeamIDs;

insert into tblmatches (HomeTeamID,AwayTeamID,Score)
select ht.TeamID,at.TeamID,i.Score
from inserted i
inner join @TeamIDs ht on i.hometeam = ht.TeamName
inner join @TeamIDs at on i.awayteam = at.TeamName
GO 
```

然后我们测试一下：

```
insert into teams (hometeam,awayteam,score) values
('abc','def',10),
('def','ghi',5),
('jkl','mno',7)
go
insert into teams (hometeam,awayteam,score) values
('abc','ghi',19),
('pqr','stu',11)
go
select * from tblteams
select * from tblmatches 
```

您现有触发器的问题在于它无法处理包含多行的问题 - 每个*语句*`inserted`触发一次，而不是每*行*触发一次。所以例如这些行是错误的：

 **```
SELECT @homeTeamId = @maxTeamId + 1
    SELECT @maxTeamId = @maxTeamId + 1
    INSERT INTO tblTeams SELECT @homeTeamId, i.hometeam FROM inserted i 
```

因为可能有多个`homeTeam`值需要处理。

它也不能很好地处理并发性——并行发生的两次触发器调用可能最终得到*相同* `@maxTeamId`的值——然后尝试插入`tblTeam`具有相同`TeamId`值的行——而使用`IDENTITY`列时，SQL Server 会自动为我们处理这个问题.

上面唯一的小技巧是`MERGE`用于插入新团队 - 该`WHEN MATCHED`行将`UPDATE`对现有行执行 No-Op（因为我们知道`teamName`双方的匹配项），但查找现有行`INSERT`和单个语句中的新行。

* * *

我刚刚意识到您说过您正在使用导入数据向导。我有一种感觉，它生成的 SSIS 包使用[Fast Load](http://msdn.microsoft.com/en-us/library/ms141237.aspx)创建了一个目的地，并且没有指定`FIRE_TRIGGERS`. 那也可能让你失望。

您可以使用向导生成包，然后编辑属性，或者使用向导插入临时表，然后从该表执行普通`INSERT`/`SELECT`到我们的`teams`表中，然后让触发器以这种方式触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:06:57.280

批量插入向导/数据导入向导通常会绕过目标表上的触发器。**

# css - 什么是用户代理样式表？

> ID：12582624
> 
> 赞同：584
> 
> 时间：2012-09-25T12:05:49.380
> 
> 标签：css, google-chrome

我正在 Google Chrome 中处理网页。它使用以下样式正确显示。

```
table {
    display: table;
    border-collapse: separate;
    border-spacing: 2px;
    border-color: gray;
} 
```

重要的是要注意我没有定义这些样式。在 Chrome 开发者工具中，它**使用用户代理样式表**代替 CSS 文件名。

现在，如果我提交表单并发生一些验证错误，我会得到以下样式表：

```
table {
    white-space: normal;
    line-height: normal;
    font-weight: normal;
    font-size: medium;
    font-variant: normal;
    font-style: normal;
    color: -webkit-text;
    text-align: -webkit-auto;
}

table {
    display: table;
    border-collapse: separate;
    border-spacing: 2px;
    border-color: gray;
} 
```

这些`font-size`新款式的出现扰乱了我的设计。有没有办法强制我的样式表，如果可能的话，完全覆盖 Chrome 的默认样式表？

* * *

## 回答 #1

> 赞同：275
> 
> 时间：2012-09-25T12:12:15.223

目标浏览器是什么？不同的浏览器设置不同的默认 CSS 规则。尝试包含 CSS 重置，例如[meyerweb CSS 重置](https://meyerweb.com/eric/tools/css/reset/)或[normalize.css](https://necolas.github.io/normalize.css/)，以删除这些默认值。谷歌“CSS 重置与规范化”以查看差异。

* * *

## 回答 #2

> 赞同：177
> 
> 时间：2015-10-22T14:11:03.520

如果`<!DOCTYPE>`在您的 HTML 内容中丢失，您可能会遇到浏览器优先于“用户代理样式表”而不是您的自定义样式表。添加 doctype 解决了这个问题。

* * *

## 回答 #3

> 赞同：126
> 
> 时间：2012-09-25T16:25:51.180

关于“用户代理样式表”的概念，请参阅CSS 2.1 规范中的[Cascade部分。](http://www.w3.org/TR/CSS21/cascade.html#cascade)

用户代理样式表会被您在自己的样式表中设置的任何内容覆盖。它们只是最底层：在页面或用户没有提供任何样式表的情况下，浏览器仍然必须以*某种方式*呈现内容，而用户代理样式表只是描述了这一点。

因此，如果您认为您的用户代理样式表有问题，那么您的标记或样式表或两者都有问题（您对此一无所知）。

* * *

## 回答 #4

> 赞同：52
> 
> 时间：2015-08-13T07:45:56.820

通过第一行的正确文档类型将文档标记为 HTML5，解决了我的问题。

```
<!DOCTYPE html>
<html>... 
```

* * *

## 回答 #5

> 赞同：37
> 
> 时间：2016-02-20T17:45:24.633

用户代理样式表是浏览器（例如 Chrome、Firefox、Edge 等）提供的“默认样式表”，以便以满足“一般呈现期望”的方式呈现页面。例如，默认样式表将为字体大小、边框和元素之间的间距等内容提供基本样式。通常使用[重置](https://css-tricks.com/reboot-resets-reasoning/)样式表来处理浏览器之间的不一致。

从规范...

> 用户代理的默认样式表应该以满足文档语言的一般呈现期望的方式呈现文档语言的元素。~[级联](https://www.w3.org/TR/CSS2/cascade.html)。

有关一般用户代理的更多信息，请参阅*[用户代理](https://www.w3.org/TR/UAAG20/#def-user-agent)*。

* * *

## 回答 #6

> 赞同：30
> 
> 时间：2019-03-18T06:28:33.277

回答标题中的问题，什么是用户代理样式表，浏览器中的默认样式集：以下是其中的一些（以及当今网络中最相关的样式）：

*   壁虎（火狐）：[https ://searchfox.org/mozilla-central/source/layout/style/res/html.css](https://searchfox.org/mozilla-central/source/layout/style/res/html.css)

*   铬（铬）：[https ://chromium.googlesource.com/chromium/src/third_party/+/master/blink/renderer/core/html/resources/html.css](https://chromium.googlesource.com/chromium/src/third_party/+/master/blink/renderer/core/html/resources/html.css)

*   WebKit（Safari）：[https ://trac.webkit.org/browser/trunk/Source/WebCore/css/html.css](https://trac.webkit.org/browser/trunk/Source/WebCore/css/html.css)

个人意见：不要和他们吵架。它们具有良好的默认值，例如，在 rtl/bidi 情况下，并且现在是一致的。重置您认为与您无关的内容，而不是一次全部重置。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2012-09-25T12:07:29.910

在您自己的 CSS 内容中定义您不想从 Chrome 的用户代理样式中使用的值。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-03-08T17:50:04.623

一些浏览器使用自己的方式来读取 .css 文件。所以打败这个的正确方法：如果你直接在.html源代码中键入命令行，这会打败.css文件，这样你就直接告诉浏览器要做什么，浏览器处于不读取的位置.css 文件中的命令。请记住，写在 .html 文件中的命令比写在 .css 文件中的命令强。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-10-01T21:12:42.983

我遇到了同样的问题，因为我的 <div> 之一的边距由浏览器设置。这很烦人，但后来我发现正如大多数人所说，这是一个标记错误。

我回去检查了我的 <head> 部分，我的 CSS 链接如下所示：

`<link rel="stylesheet" href="ex.css">`

我将其包含`type`在其中并使其如下所示：

`<link rel="stylesheet" type="text/css" href="ex.css">`

我的问题解决了。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-04-16T15:40:33.980

我只是想根据我从 Ire Aderinokun那里[读到的内容来扩展 @BenM 的回复。](https://bitsofco.de/a-look-at-css-resets-in-2018/)因为用户代理样式表提供了有用的默认样式，所以在覆盖它之前要三思。

我有一个愚蠢的错误，按钮元素在 Chrome 中看起来不正确。我对它进行了部分样式设置，因为我不希望它看起来像一个传统的按钮。但是，我省略了边框、边框颜色等样式元素。因此，Chrome 正在介入以提供它认为我缺少的部分。

`border: none`一旦我添加了诸如等样式，问题就消失了。

因此，如果其他人遇到此问题，请确保您明确地覆盖了元素的所有适用的默认用户代理样式，如果您发现它看起来很不稳定，特别是如果您不想完全重置用户代理样式。它对我有用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-20T18:19:19.063

每个浏览器都提供一个默认样式表，称为用户代理样式表，以防 HTML 文件未指定。您指定的样式会覆盖默认值。

因为您没有为表格元素的框指定值，所以已应用默认样式。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-10-09T16:31:33.180

我遇到了同样的问题，这是因为我使用的是非语义 html

```
<!--incorrect-->
<ul class="my-custom-font">
  <button>
    <a>user agent styles applied instead of my-custom-font</a>
  <button>
</ul>

<!--correct-->
<ul class="my-custom-font">
  <li>
    <a>now inherits from from my-custom-font</a>
  </li>
</ul> 
```

更新 HTML 后，样式已正确应用

* * *

## 回答 #13

> 赞同：-4
> 
> 时间：2020-01-16T17:07:40.563

我有一个解决方案。检查这个：

错误

```
<link href="assets/css/bootstrap.min.css" rel="text/css" type="stylesheet"> 
```

正确的

```
<link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css"> 
```

* * *

## 回答 #14

> 赞同：-7
> 
> 时间：2016-02-08T10:38:43.180

将以下代码放入您的 CSS 文件中：

```
table {
    font-size: inherit;
} 
```

# jquery - 表单已停止提交，ASP.NET

> ID：12582625
> 
> 赞同：0
> 
> 时间：2012-09-25T12:05:56.133
> 
> 标签：jquery, asp.net, postback

我正在开发的网站有问题。我的网站上有几个详细视图、网格视图和其他元素用于提交信息。

到目前为止，它一直完美无缺，现在我遇到了表单无法提交的问题。那些不起作用的是：

*   从我的详细信息视图插入
*   提交数据的按钮
*   网格视图中编辑模式下的保存按钮

单击它们时没有任何反应。然而，其他需要回发的事情确实有效，例如取消、删除和类似的功能。使用我的浏览器调试功能，我可以看到没有进行网络尝试，因此客户端回发似乎存在某种问题。

我猜想将 ASP 回发与 jQuery 一起使用可能会出现问题，但我之前已经在这个网站上成功使用过它。我还尝试将元素放在 jquery ui 之外并且不完全包括 jquery 文件，但这似乎没有帮助。

在 Opera、IE9 和 Firefox 中尝试过

任何形式的帮助或积分将不胜感激！

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:28:29.243

也许您的验证器与您的提交控件具有相同的 ValidationGroup。但是你告诉它在另一个asp文件中，所以如果文件没有“链接”，我觉得很奇怪......

仅供参考：当您有 OnClientClick="[...] return false;" 在控件上，它不会触发回发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:29:03.483

解决了。

另一个 asp 文件（！）中有一个 rangevalidor 导致错误。我仍然不确定为什么，但是删除这些范围验证器使事情再次起作用，这很奇怪。

更新：他们没有使用验证组，这似乎把事情搞砸了

# php - 这是 PHP 的 gmstrftime() 函数中的错误吗？

> ID：12582628
> 
> 赞同：1
> 
> 时间：2012-09-25T12:06:02.620
> 
> 标签：php

我遇到了 PHP 的 gmstrftime() 函数的问题。敬请期待：

```
<?
$ts[]=1348573985; // '2012-09-25 13:53:05' (date returned from mysql's from_unixtime() function)
$ts[]=1233958620; // '2009-02-06 23:17:00' (date returned from mysql's from_unixtime() function)

foreach($ts as $t) {
    echo $t." => ".gmstrftime( "%d %B %Y - %H:%M", $t )."\n";
}
?> 
```

输出将是：

```
1348573985 => 25 September 2012 - 11:53
1233958620 => 06 February 2009 - 22:17 
```

如您所见，第一个时间戳是 2 小时（来自 mysql 的输出），由于时区设置，这是正常的。但是第二个只有 1 小时的休息时间，但我没有更改两个 gmstrftime() 调用之间的时区？？

这是 PHP 的 gmstrftime() 函数中的错误，还是其他任何错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:16:09.823

从[手册中`gmstrftime`](http://uk.php.net/manual/en/function.gmstrftime.php)：

> 行为与 strftime() 相同，只是返回的时间是格林威治标准时间 (GMT)。

格林威治标准时间全年相同。这与英国当地时间不同，在冬季设置为格林威治标准时间，而在夏季设置为“英国夏令时间”（GMT+1，即比格林威治标准时间提前一小时）。西欧也是如此，冬天是 GMT+1，而夏天是 GMT+2。

您的 MySQL 数据库大概配置为欧洲本地时间，因此在转换夏季发生的 Unix 时间戳时，它会增加一个额外的小时以与夏季时间调整保持一致。

*在我看来*，最好的策略是将所有系统设置为使用“UTC”（基本上与 GMT 相同），然后“在最后一分钟”转换为本地时区。您可以对其他时区进行标准化，但 UTC 可以作为调试的良好基准。

# java - 当我尝试从网络摄像头捕获图像时，它会拍摄全黑图像

> ID：12582630
> 
> 赞同：2
> 
> 时间：2012-09-25T12:06:06.020
> 
> 标签：java

我已经下载了一个与我的网络摄像头交互的[java 项目](http://webcamapplet.sourceforge.net/)。我正在尝试添加通过网络摄像头拍照的功能，或者只是捕获当前图像并将其保存在我的 C: 目录中

我创建了一个名为 Capture (startC) 的按钮并做了一个 ActionListener

**动作监听器**

```
startC.addActionListener(new ActionListener()
        {           
            @Override
            public void actionPerformed(ActionEvent e)
            {               
                  // Grab a frame                 
                 FrameGrabbingControl fgc = new FrameGrabbingControl() {

                        @Override
                        public Component getControlComponent() {
                            // TODO Auto-generated method stub
                            return null;
                        }                       

                        @Override
                        public Buffer grabFrame() {
                            // return null;
                            return new Buffer();
                        }
                    };  
                  player.getControl("javax.media.control.FrameGrabbingControl");    
                  buf = fgc.grabFrame();                  

                  // Convert it to an image               
                  BufferToImage btoi = new BufferToImage((VideoFormat)buf.getFormat());
                  // btoi = new BufferToImage((VideoFormat)buf.getFormat());    
                  img = btoi.createImage(buf);       

                  // show the image 
                  //imgpanel.setImage(img);       

                  // save image 
                  try {
                    saveJPG(img,"c:\\test.jpg");                    
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }   
            }
        }); 
```

**更新的动作监听器**

```
startC.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                Vector devices = CaptureDeviceManager.getDeviceList(null);
                CaptureDeviceInfo cdi = null;
                for (Iterator i = devices.iterator(); i.hasNext();) {
                    cdi = (CaptureDeviceInfo) i.next();
                    /*
                     * Get the first Video For Windows (VFW) capture device. Use
                     * the JMF registry tool in the bin directory of the JMF
                     * distribution to detect available capture devices on your
                     * computer.
                     */
                    if (cdi.getName().startsWith("vfw:"))
                        break;
                }

                try {
                    player = Manager.createRealizedPlayer(cdi.getLocator());
                    player.start();
                } catch (NoPlayerException e2) {
                    e2.printStackTrace();
                } catch (CannotRealizeException e3) {
                    e3.printStackTrace();
                } catch (IOException e4) {
                    e4.printStackTrace();
                }

                // start the Timer with 3s intervals
                new Timer(3000, this).start();

                // Grab a frame from the capture device
                FrameGrabbingControl fgc = (FrameGrabbingControl) player.getControl("javax.media.control.FrameGrabbingControl");
                buf = fgc.grabFrame();
                BufferToImage btoi = new BufferToImage((VideoFormat) buf
                        .getFormat());
                img = btoi.createImage(buf);
}); 
```

**保存JPG方法**

```
 public static void saveJPG(Image img, String s) throws IOException    
      {       
        BufferedImage bi = new BufferedImage(640, 480, BufferedImage.TYPE_INT_RGB);
        File outputfile = new File("C:\\saved.jpg");
        ImageIO.write(bi, "png", outputfile);
} 
```

问题是当我单击捕获时，只是将屏幕保存为全黑，而这不是网络摄像头所关注的。

有人可以帮忙吗？

**@更新**

第 520 行 =`buf = fgc.grabFrame();`

```
Exception in thread "AWT-EventQueue-1" java.lang.NullPointerException
    at com.colorfulwolf.webcamapplet.WebcamApplet$6.actionPerformed(WebcamApplet.java:520)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:25:23.147

通过搜索和谷歌搜索，我找到了解决问题的方法。

**解决方案**

```
startC.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                OpenCVWebCam webCam = (OpenCVWebCam) cam;
                try {
                    webCam.start();
                } catch (Exception e3) {                    
                    e3.printStackTrace();
                }

                OpenCVFrameGrabber grabber = new OpenCVFrameGrabber(0);
                try {
                    grabber.start();
                } catch (Exception e3) {            
                    e3.printStackTrace();
                }

                try {
                    IplImage frame = grabber.grab();
                    BufferedImage out = frame.getBufferedImage();   
                    File outputfile = new File("c:\\saved.png");
                    ImageIO.write(out, "png", outputfile);
                } catch (Exception e2) {                    
                    e2.printStackTrace();
                }
}
}); 
```

目标已达到，图像已保存。之后，随着图像保存在我的服务器中，我的控制台选项卡中会出现一条消息。

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x776a224d, pid=5864, tid=5576
#
# JRE version: 7.0_05-b05
# Java VM: Java HotSpot(TM) Client VM (23.1-b03 mixed mode, sharing windows-x86 )
# Problematic frame:
# C  [ntdll.dll+0x3224d]  EtwEventEnabled+0x1ca
#
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# An error report file with more information is saved as:
# C:\Users\lucas\workspace\WebcamApplet\bin\hs_err_pid5864.log
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
# 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:23:26.220

已经有一段时间了，但请尝试：

```
public static void saveJPG(Image img, String s) throws IOException { 
    File outputfile = new File("C:\\saved.jpg"); 
    ImageIO.write(img, "jpg", outputfile); 
} 
```

# qt - 如何忽略不输出字符的按键事件

> ID：12582633
> 
> 赞同：1
> 
> 时间：2012-09-25T12:06:26.643
> 
> 标签：qt

我正在开发一种虚拟音乐键盘，它允许您按下键盘上的键并让它弹奏音符。所以在我的 MainWindow 类中，我重新实现了 keyPressEvent。我想忽略由修饰符（Control、Alt、Shift 等）生成的事件，以及由其他非字符键（如 Tab、Backspace 和 Enter）生成的事件。像这样的东西是理想的：

```
void MainWindow::keyPressEvent(QKeyEvent *event)
{
    if (!event->key().isCharacter()))
    {
        event->ignore();
        return;
    }

    // handle the event
} 
```

有没有办法做这样的事情（没有单独测试每个可能的非字符键）？如果没有，如果它是修饰符，是否至少有一种方法可以轻松忽略该事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T12:19:58.890

看起来像你想要`QKeyEvent::text()`的。

# java - Java 子窗口：Netbeans

> ID：12582644
> 
> 赞同：2
> 
> 时间：2012-09-25T12:07:19.327
> 
> 标签：java, swing, netbeans, jframe

我`JFrames`在 NetBeans 编辑器中设计了两个（mainFrame.java 和 child.java）。我想`JFrame`从第一帧调用第二个作为子窗口。我怎么称呼它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:09:14.430

*   不要使用两个[JFrames](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)，[最好的建议是为什么不，或者 ei 是](https://stackoverflow.com/a/9554657/714968)回答`@Andrew Thompson`

*   看看[JDialog](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

*   检查[JDialog(Dialog owner, boolean modal)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDialog.html#JDialog%28java.awt.Dialog,%20boolean%29)或[ModalityTypes](http://docs.oracle.com/javase/7/docs/api/java/awt/Dialog.ModalityType.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:56:06.250

制作第一帧的对象，然后在第二帧调用它。

```
firstframe fm = new firstframe();
fm.setVisible(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-13T04:43:32.020

如果我理解正确，您希望在其中有一个带有子/子窗口的主窗口。如果是这样，请查看以下代码。

截屏：[![在此处输入图像描述](../Images/69b72c9bf10d7c05815c252f8034b8c4.png)](https://i.stack.imgur.com/r79aL.png)

```
import javax.swing.JDesktopPane;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
/**
 * Sample demonstrates using JInternalFrame as a child window of a main
 * JFrame window  TicTacToe class extends JInternalFrame.
 * @author Kirk
 *
*/
public class BoardBuilder extends JFrame {

    private TicTacToe board;
    JDesktopPane desktopPane = new JDesktopPane();

    public BoardBuilder() {
        SwingUtilities.invokeLater(new Runnable() {
           public void run() {
               board = new TicTacToe("TicToc Toe", true);
               board.setSize(250, 250);
               board.setClosable(true);
               board.setIconifiable(true);
               board.setDefaultCloseOperation(TicTacToe.DISPOSE_ON_CLOSE);
               if (!board.isVisible())
                   board.setVisible(true);

               desktopPane.add(board);
               add(desktopPane);
           }
       });

   }

   public static void main(String[] args) {
       BoardBuilder builderBoard = new BoardBuilder();
       builderBoard.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
       builderBoard.setSize(640, 480);
       builderBoard.setVisible(true);

    }

   } 
```

调用子窗口将此代码块放在按钮单击事件侦听器中

```
SwingUtilities.invokeLater(new Runnable() {
               public void run() {
               board = new TicTacToe("TicToc Toe", true);
               board.setSize(250, 250);
               board.setClosable(true);
               board.setIconifiable(true);
               board.setDefaultCloseOperation(TicTacToe.DISPOSE_ON_CLOSE);
               if (!board.isVisible())
                   board.setVisible(true);

               desktopPane.add(board);
               add(desktopPane);
           }
       }); 
```

有关未来信息，请查看此链接[docs.oracle-InternalFrames](https://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)

# node.js - 在 node.js 中使用 imagemagick 调整图像大小

> ID：12582652
> 
> 赞同：2
> 
> 时间：2012-09-25T12:08:01.160
> 
> 标签：node.js, imagemagick

在我的应用程序中，我尝试使用 imagemagick 调整图像大小，但在调整大小时出现以下错误错误：imagesexecvp(): No such file or directory.this is my code

```
 im.resize({
  srcPath:  '/tmp/Images/' + req.files.image.name,
  dstPath: 'resized_'+req.files.image.name ,
  width:42,
  height:42
}, function(err, stdout, stderr){
  if (err) {

      console.log('error while resizing images' + stderr);
  };
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:58:15.743

imagemagick 模块使用`convert`and`identify`命令，您描述的错误可能会发生，因为找不到命令。确保命令位于路径环境变量引用的文件夹中，或者您可以在节点应用程序中引用命令：

```
var im = require('imagemagick');    
im.identify.path = '/opt/ImageMagick/bin/identify'
im.convert.path = '/opt/ImageMagick/bin/convert'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T01:07:55.933

看起来您正在尝试在不更改目标的情况下调整文件大小。试试这个：

```
im.resize({
  srcPath:  process.cwd() + '/tmp/Images/' + req.files.image.name,
  dstPath:  process.cwd() + '/tmp/Images/resized_'+req.files.image.name ,
  width:42,
  height:42
}, function(err, stdout, stderr){
  if (err) {
      console.log('error while resizing images' + stderr);
  };
  console.log( process.cwd() + '/tmp/Images/' + req.files.image.name + 'has been resized and saved as ' + process.cwd() + '/tmp/Images/resized_'+req.files.image.name)
}); 
```

您还可以检查您的权限 (ls -l)`/tmp/Images/`以确保它们设置正确

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:27:46.070

您需要安装图像魔术命令行工具。尝试`brew install imagemagick`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T23:10:41.617

如果您在 ubuntu 上，请像这样安装软件包：

```
apt-get install imagemagick 
```

之后，再试一次：D

# eclipse - 如何在 Eclipse 中“使用文件 > 导入 > 从文件安装软件项目”“安装依赖项”为 Mylyn 设置引导工作区？

> ID：12582653
> 
> 赞同：0
> 
> 时间：2012-09-25T12:08:01.620
> 
> 标签：eclipse, installation, mylyn

我正在按照[Eclipse Mylyn Open Source Project](http://www.eclipse.org/mylyn/)的[说明设置“引导”（“自托管”）工作区](http://wiki.eclipse.org/index.php/Mylyn/Contributor_Reference#Self-hosting)。但我被困在第三步：

*   使用 File > Import > Install Software Items from File 安装依赖项：mylyn-bootstrap.p2f

我选择“文件”>“导入”并展开“导入”对话框中的所有文件夹，但看不到“从文件安装软件项目”。（我确实在 Team 文件夹下的第四步中看到了“Team Project Set”。）

这些说明是否假设我从第一步安装了“Eclipse 3.7 或更高版本”以外的其他东西？

我正在运行一个（迄今为止）未修改的“Java 开发人员的 Eclipse IDE，版本：Helios 服务版本，构建 ID：20110218-0911”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:18:24.317

您的 Helios (3.6) 太旧了。*从文件安装软件项目*是[在 3.7 中引入的](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.user/whatsNew/platform_whatsnew.html)。

您仍然可以在编辑器中打开该文件并将更新站点 URL 复制/粘贴到 Eclipse 中，这样您就可以手动安装插件。但是，第一个组件（BIRT 3.7）很可能没​​有安装在您的 Eclipse 3.6 上。

我通常会建议为您想要贡献的每个 Eclipse 项目设置一个 Eclipse 安装，因为它们的依赖项和支持的运行时有很大不同（例如，要么需要 Juno 作为依赖项，要么支持回到 3.4 的所有内容）。

# facebook - 如何在 Struts 2 中实现 Facebook 登录？

> ID：12582661
> 
> 赞同：-1
> 
> 时间：2012-09-25T12:08:28.860
> 
> 标签：facebook, facebook-graph-api, struts2

我正在 Struts2 中开发一个应用程序，我想在其中使用 Facebook 实现身份验证。我已经在 FaceBook 中注册了我的应用程序，并获得了 AppId 和 App Secret。使用这个我正在做facebook登录 `<a href="https://www.facebook.com/dialog/oauth?client_id=241562345966486&redirect_uri=http://localhost:8080/myApp//jsps/loginFacebookUser.action&scope=email,user_birthday&state=1"><b>Facebook Connect</b></a>`

但拿不到`access_taken`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:05:53.057

由于您没有发布任何代码，因此很难确定究竟是什么问题。

我对FB的登录API不是特别熟悉；然而，底层机制是 Web 服务，即您向它发送数据，它会将数据返回给您。

因此，首先，确保您收到来自 FB 的回复（通常是会话 ID 或类似的东西）。

如果您收到它，您必须将数据保存在会话对象中，然后明确授予用户进入您系统的权限。FB不会为你这样做；你必须在你的系统上这样做。

希望这是有道理的。查看有关 FB API 的信息：http: [//developers.facebook.com/docs/guides/web/#login](http://developers.facebook.com/docs/guides/web/#login)

# ruby-on-rails-3 - 侧边栏需要包含所有类别但没有

> ID：12582664
> 
> 赞同：0
> 
> 时间：2012-09-25T12:08:41.863
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我有一个应用程序，我在其中添加了一个边栏，其中列出了产品所属的所有类别。

该功能运行良好，但存在问题。

该代码仅扫描当前页面上的产品，而不是可用的实际类别。那是：

在我的应用程序中有 5 个产品类别（有），但在当前页面上只有 3 个产品。所以代码只显示了 3 个类别，而不是实际的 5 个。我该如何解决这个问题？这与实例变量有什么关系吗？

这是来自 application.html.erb 的代码

```
<div>
  <% a = [""] %>
    <h1>Categories</h1>
    <% @products.each do |product| %>
    <% a = a + [product.category] %>
    <% a = a.uniq %>        
  <% end %>

  <% a.each do |c| %>
     <p class="text-error"><%= c %></p>
  <% end %>
</div> 
```

迁移文件..

```
class CreateProducts < ActiveRecord::Migration
   def change
     create_table :products do |t|
       t.string :name
       t.text :description
       t.date :delivery_date
       t.decimal :price

       t.timestamps
    end
   end
 end

 class CreateCommentsTable < ActiveRecord::Migration
  def up
    create_table :comments do |t|
      t.string :commenter
      t.text :body
      t.references :product

      t.timestamps
    end
    add_index :comments, :product_id
  end

  def down
  end
 end

 class AddCategoryToProducts < ActiveRecord::Migration
   def change
     add_column :products, :category, :string
   end
end 
```

路线..

```
resources :products do
    resources :comments 
end 
```

该代码位于[https://github.com/abhishekdagarit/sample-app.git](https://github.com/abhishekdagarit/sample-app.git)

可能需要你快速浏览一下来回答这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:11:14.083

如果您将单独的`Category`模型映射到`categories`表，那么`Category.select(:name).uniq`将返回唯一的类别。

在您的情况下，您在表格中有类别列。所以在那种情况下

`Product.select(:category).uniq`将返回具有唯一类别的产品列表。

所以现在你的模板会更干净：

```
<% for product in Product.select(:category).uniq %>
   <%= product.category %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T02:47:37.450

如果您想显示所有类别，只需执行

```
<% for category in Category.all %>
   <%= category.name %>
<% end %> 
```

除非您尝试显示附加产品的类别

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:14:46.923

我假设您的侧边栏也使用与页面布局其余部分相同的请求进行处理（即没有单独的控制器操作）。

`@products`您很可能会在两个地方使用...一种用于获取主页的产品，另一种用于获取所有产品...您可能必须重命名它们并相应地对其进行修改...

如果这没有帮助，请显示更多代码......与渲染页面的支持相关......

# perl - 用于 http 的 Perl tcp_proxy

> ID：12582668
> 
> 赞同：1
> 
> 时间：2012-09-25T12:09:02.617
> 
> 标签：perl, tcp, proxy, http-headers

再会！我不太擅长编写 Perl，但有一个可怕的需求。我为该组织找到了一个完整的解决方案，因为它反向代理......

```
#!/usr/bin/perl

use warnings;
use strict;

use IO::Socket::INET;
use IO::Select;

my @allowed_ips = ('all');
my $ioset = IO::Select->new;
my %socket_map;

my $debug = 1;

sub new_conn {

    my ($host, $port) = @_;
    return IO::Socket::INET->new(
        PeerAddr => $host,
        PeerPort => $port
    ) || die "Unable to connect to $host:$port: $!";
}

sub new_server {
    my ($host, $port) = @_;

    my $server = IO::Socket::INET->new(
        LocalAddr => $host,
        LocalPort => $port,
        ReuseAddr => 1,
        Listen    => 100
    ) || die "Unable to listen on $host:$port: $!";
}

sub new_connection {
    my $server      = shift;
    my $remote_host = shift;
    my $remote_port = shift;

    my $client    = $server->accept;
    my $client_ip = client_ip($client);

    unless (client_allowed($client)) {

        print "Connection from $client_ip denied.\n" if $debug;
        $client->close;
        return;
    }
    print "Connection from $client_ip accepted.\n" if $debug;

    my $remote = new_conn($remote_host, $remote_port);
    $ioset->add($client);
    $ioset->add($remote);

    $socket_map{$client} = $remote;
    $socket_map{$remote} = $client;
}

sub close_connection {
    my $client = shift;

    my $client_ip = client_ip($client);
    my $remote    = $socket_map{$client};

    $ioset->remove($client);
    $ioset->remove($remote);

    delete $socket_map{$client};
    delete $socket_map{$remote};

    $client->close;
    $remote->close;

    print "Connection from $client_ip closed.\n" if $debug;
}

sub client_ip {
    my $client = shift;

    return inet_ntoa($client->sockaddr);
}

sub client_allowed {
    my $client = shift;

    my $client_ip = client_ip($client);
    return grep { $_ eq $client_ip || $_ eq 'all' } @allowed_ips;
}

die "Usage: $0 <local port> <remote_host:remote_port>" unless @ARGV == 2;

my $local_port = shift;
my ($remote_host, $remote_port) = split ':', shift();

print "Starting a server on 0.0.0.0:$local_port\n";
my $server = new_server('0.0.0.0', $local_port);
$ioset->add($server);

while (1) {

    for my $socket ($ioset->can_read) {

        if ($socket == $server) {

            new_connection($server, $remote_host, $remote_port);
        }
        else {

            next unless exists $socket_map{$socket};
            my $remote = $socket_map{$socket};
            my $buffer;
            my $read = $socket->sysread($buffer, 4096);

            if ($read) {

                $remote->syswrite($buffer);
            }
            else {

                close_connection($socket);
            }
        }
    }
} 
```

一切正常，但我将客户端重定向到的 Web 服务器看不到 HTTP_X_FORWARDED_FOR 和 HTTP_X_REAL_IP。标准模块越低越好。我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:03:46.277

它不会看到它。因为您进行的是 TCP 重定向，而不是 HTTP 重定向，并且代理不会添加新的标头。如果要获取此字段，则需要在 HTTP 级别进行重定向。

# excel - 如何使用 Excel VBA 创建文件夹？

> ID：12582678
> 
> 赞同：1
> 
> 时间：2012-09-25T12:09:35.970
> 
> 标签：excel, vba

这是从导入 Excel 文档到使用 Excel 电子表格创建文件夹的全部代码。

```
Sub Update_JL()

Dim wsJL As Worksheet 'Open Orders
Dim wsJOD As Worksheet 'Jobs Data
Dim wsJAR As Worksheet 'JL Archive
Dim wbBK1 As Workbook
Dim wbBK2 As Workbook
Dim wsBOR As Worksheet
Dim lastrow As Long, fstcell As Long, strCompany As String, strPart As String, strPath As String, strFile As String
Dim cell As Range, newFolder As String, PhotoDir As String

Set wsJL = Sheets("Open Orders")
Set wsJOD = Sheets("Jobs Data")
Set wsJAR = Sheets("JL Archive")
Set wbBK1 = ThisWorkbook
Set wbBK2 = ActiveWorkbook

Application.ScreenUpdating = False    ' Prevents screen refreshing.
Application.Calculation = xlCalculationManual

With wsJOD
    .Columns("A:Q").Clear
    wsJL.Range("B2:I2").Copy wsJOD.Range("A1")
    .Range("I1").Formula = "=COUNTIFS('Open Orders'!$B:$B,$A1,'Open Orders'!$D:$D,$C1)"
    .Range("J1").Formula = "=IF(I1,""Same"",""Different"")"
End With

strFile = Application.GetOpenFilename()
Set wbBK2 = Application.Workbooks.Open(strFile)
Set wsBOR = Sheets(Replace(wbBK2.Name, ".csv", ""))

lastrow = wsBOR.Range("C" & Rows.Count).End(xlUp).Row
wsBOR.Range("B6:E" & lastrow).Copy wsJOD.Range("A2")
wsBOR.Range("G6:H" & lastrow).Copy wsJOD.Range("E2")
wsBOR.Range("L6:L" & lastrow).Copy wsJOD.Range("G2")
wsBOR.Range("N6:N" & lastrow).Copy wsJOD.Range("H2")
wbBK2.Close

lastrow = wsJOD.Range("A" & Rows.Count).End(xlUp).Row
wsJOD.Range("I1:J1").Copy wsJOD.Range("I2:J" & lastrow)
wsJOD.Range("I2:J" & lastrow).Calculate

lastrow = wsJL.Range("B" & Rows.Count).End(xlUp).Row
wsJL.Range("P2:R2").Copy wsJL.Range("P3:R" & lastrow)
wsJL.Range("P3:R" & lastrow).Calculate

With Intersect(wsJL.UsedRange, wsJL.Columns("Q"))
    .AutoFilter 1, "<>Same"
    With Intersect(.Offset(2).EntireRow, .Parent.Range("B:U"))
        .Copy wsJAR.Cells(Rows.Count, "B").End(xlUp).Offset(1)
        .EntireRow.Delete
    End With
    .AutoFilter
End With

lastrow = wsJOD.Range("A" & Rows.Count).End(xlUp).Row

With Intersect(wsJOD.UsedRange, wsJOD.Range("J2:J" & lastrow))
    .AutoFilter 1, "<>Different"
    .SpecialCells(xlCellTypeVisible).EntireRow.Delete
End With

wsJOD.Range("A2:H" & lastrow).Copy wsJL.Cells(Rows.Count, "B").End(xlUp).Offset(1)
wsJOD.Columns("A:Q").Clear

lastrow = wsJL.Range("B" & Rows.Count).End(xlUp).Row
wsJL.Range("J3:K3").Copy wsJL.Range("J4:K" & lastrow)
wsJL.Range("B3:N3").Copy
wsJL.Range("B4:N" & lastrow).Borders.Weight = xlThin
wsJL.Range("B4:N" & lastrow).Font.Size = 11
wsJL.Range("B4:N" & lastrow).Font.Name = "Calibri"
wsJL.Range("J3:K" & lastrow).Calculate

'Sort PO Tracking 
With wsJL
    .Sort.SortFields.Clear

'Sort Reds
    .Sort.SortFields.Add(.Range("K3:K" & lastrow), _
    xlSortOnIcon, xlAscending, , xlSortNormal).SetIcon Icon:=ActiveWorkbook. _
    IconSets(4).Item(1)

    .Sort.SortFields.Add Key:=Range( _
    "K3:K" & lastrow), SortOn:=xlSortOnValues, Order:=xlDescending, DataOption:= _
    xlSortNormal

'Sort Yellows
    .Sort.SortFields.Add(.Range("J3:J" & lastrow), _
    xlSortOnIcon, xlAscending, , xlSortNormal).SetIcon Icon:=ActiveWorkbook. _
    IconSets(4).Item(2)

'Sort Greens
    .Sort.SortFields.Add(.Range("J3:J" & lastrow), _
    xlSortOnIcon, xlAscending, , xlSortNormal).SetIcon Icon:=ActiveWorkbook. _
    IconSets(4).Item(3)

    .Sort.SortFields.Add Key:=Range( _
    "J3:J" & lastrow), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:= _
    xlSortNormal

    With .Sort
        .SetRange wsJL.Range("B2:U" & lastrow)
        .Header = xlYes
        .MatchCase = False
        .Orientation = xlTopToBottom
        .SortMethod = xlPinYin
        .Apply
    End With
    lastrow = wsJL.Range("B" & Rows.Count).End(xlUp).Row
    wsJL.Range("B3:N" & lastrow).Select
    wsJL.Range("B3:N" & lastrow).VerticalAlignment = xlCenter
    wsJL.Range("A1").Select
End With

With wsJL

    strCompany = CleanName(Range("C3")) ' assumes company name starts in C
    strPart = CleanName(Range("D3")) ' assumes part in D
    strPath = wbBK1.path & Application.PathSeparator & "Photos" & Application.PathSeparator

    If Not FolderExists(strPath & strCompany) Then
        'company doesn't exist, so create full path
        FolderCreate strPath & strCompany & Application.PathSeparator & strPart
    Else
        'company does exist, but does part folder
        If Not FolderExists(strPath & strCompany & Application.PathSeparator & strPart) Then
            FolderCreate strPath & strCompany & Application.PathSeparator & strPart
        End If
    End If

    Range("J:M").Calculate

End With

Application.ScreenUpdating = True
Application.Calculation = xlCalculationAutomatic

MsgBox "Open Orders Updated!"

End Sub 
```

功能：

```
Function FolderCreate(ByVal path As String) As Boolean

FolderCreate = True
Dim fso As New FileSystemObject

If FolderExists(path) Then
    Exit Function
Else
    On Error GoTo DeadInTheWater
    fso.CreateFolder path ' could there be any error with this, like if the path is really screwed up?
    Exit Function
End If

DeadInTheWater:
    MsgBox "A folder could not be created for the following path: " & path & ". Check the path name and try again."
    FolderCreate = False
    Exit Function

End Function

Function FolderExists(ByVal path As String) As Boolean

FolderExists = False
Dim fso As New FileSystemObject

If fso.FolderExists(path) Then FolderExists = True

End Function

Function CleanName(strIn As String) As String
'will clean part # name so it can be made into valid folder name
'may need to add more lines to get rid of other characters

Dim objRegex As Object
Set objRegex = CreateObject("vbscript.regexp")
With objRegex
.Global = True
.Pattern = "[,\/\*\.\\""""]+"
CleanName = .Replace(strIn, vbNullString)
End With
End Function 
```

[![错误](../Images/75c2a492fd2b6254346f903e976eb776.png)](https://i.stack.imgur.com/wzOuy.jpg)
[（来源：[kaboomlabs.com](http://www.kaboomlabs.com/excel/img/error6.jpg)）]

正如您在上面看到的，应该清理 C3。我没有保护或锁定文件夹。我昨天创建了该文件夹，希望它能够正常工作。

此处的代码和信息：[CreateFolder 工作表和脚本](http://www.kaboomlabs.com/excel/examples/CreateFolder.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:42:52.627

尝试将您的代码更改为

```
 If Not FolderExists(strPath & strCompany) Then
        'Company doesn't exist, so first create company folder and then part folder
        FolderCreate strPath & strCompany
        FolderCreate strPath & strCompany & Application.PathSeparator & strPart
    Else
        'company does exist, but does part folder
        If Not FolderExists(strPath & strCompany & Application.PathSeparator & strPart) Then
            FolderCreate strPath & strCompany & Application.PathSeparator & strPart
        End If
    End If 
```

**编辑：**

替换这个位：

```
If Not FolderExists(strPath & strCompany) Then
    'company doesn't exist, so create full path
    FolderCreate strPath & strCompany & Application.PathSeparator & strPart
Else
    'company does exist, but does part folder
    If Not FolderExists(strPath & strCompany & Application.PathSeparator & strPart) Then
        FolderCreate strPath & strCompany & Application.PathSeparator & strPart
    End If
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:54:00.290

没问题

问题是您创建文件夹的方式将只允许您一次创建一个。所以你需要建立路径，也许是这样的：

```
Function CreatePath(path As String) As Boolean
Dim pPath As String
Dim x as long
Dim arr

arr = Split(path, "\")

For x = LBound(arr) To UBound(arr)
    If x = 0 Then
        pPath = arr(x)
    Else
        pPath = pPath & "\" & arr(x)
    End If
    If Len(Dir(pPath, vbDirectory)) = 0 Then MkDir pPath
Next x

If Len(Dir(pPath, vbDirectory)) > 0 Then CreatePath = True

End Function 
```

这将创建任何深度的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:08:27.577

好的，它使用我拥有的旧脚本，明智地向工作簿单元格添加了更多内容，但它也以我需要的方式工作。

这是代码：

```
Dim baseFolder As String, newFolder As String
    lastrow = wsJL.Cells(Rows.Count, "B").End(xlUp).Row
    wsJL.Range("S2:U2").Copy wsJL.Range("S3:U" & lastrow)
    Range("J3:M" & lastrow).Calculate
    Range("S3:U" & lastrow).Calculate
    baseFolder = wbBK1.path & Application.PathSeparator & "Photos" & Application.PathSeparator
     'folders will be created within this folder - Change to sheet of your like.

    If Right(baseFolder, 1) <> Application.PathSeparator Then _
     baseFolder = baseFolder & Application.PathSeparator

       For Each cell In Range("S3:S" & lastrow)   'CHANGE TO SUIT

           'Company folder - column S

           newFolder = baseFolder & cell.Value
           If Len(Dir(newFolder, vbDirectory)) = 0 Then MkDir newFolder

           'Part number subfolder - column T

           newFolder = newFolder & Application.PathSeparator & cell.Offset(0, 1).Value
           If Len(Dir(newFolder, vbDirectory)) = 0 Then MkDir newFolder

       Next

        End With 
```

我在 S 和 T 中是这样的：

**小号**

`=TRIM(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE($C2,",","")," "," "),".",""),"/","-"),"""",""),"*",""))`

**吨**

`=TRIM(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE($D2,",","")," "," "),".",""),"/","-"),"""",""),"*",""))`

这会修剪我们看不到的任何空白区域的所有单元格的末尾，并清理单元格，以便准确且可以在其中创建文件夹。

# java - j2mepolish 中的 java.io.File 不起作用

> ID：12582684
> 
> 赞同：0
> 
> 时间：2012-09-25T12:09:56.167
> 
> 标签：java, java-me, io, j2mepolish, nokia-s40

我需要在应用程序的子文件夹中创建一个图像，以便使用 java.io.File 和 java.io.FileOutputStream；但是当我构建项目时，会发生此错误：

```
error: cannot find symbol
    [javac]java.io.File

error: cannot find symbol
    [javac] import java.io.FileOutputStream; 
```

我该如何解决这个问题，或者有另一种创建文件的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T10:50:33.130

导入微版本，如import javax.microedition.io.file.FileConnection；

# session - 在java中删除会话超时的cookie

> ID：12582689
> 
> 赞同：2
> 
> 时间：2012-09-25T12:10:11.713
> 
> 标签：session, jakarta-ee, cookies, web.xml, logout

我正在开发一个 java web 应用程序，我在其中配置`session-timeout`为等于 4 分钟。该应用程序还使用 cookie。

我的问题是 4 分钟不活动后 HttpSession 过期但 cookie 仍保留在浏览器中（年龄设置为 -1）。会话超时后有什么方法可以删除 cookie？

PS 设置 cookie 年龄等于 4 分钟不会有帮助。cookies 应该在 4 分钟**不活动**后被删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:26:15.877

如果您将 cookie 年龄设置为 4 分钟，并在每次服务器发送响应时重新设置 cookie 年龄，那么 cookie 将在 4 分钟不活动后超时。

# authentication - Yii - 错误 400 无法验证 CSRF 令牌

> ID：12582691
> 
> 赞同：0
> 
> 时间：2012-09-25T12:10:14.397
> 
> 标签：authentication, yii, csrf, bad-request

我有一个非常奇怪的问题。我在 Yii 中有一个登录表单，效果很好。将网站移动到另一台服务器后，我得到

> 错误 400 无法验证 CSRF 令牌

我不明白为什么它可以在开发服务器上运行，但不能在新服务器上运行。这是我的代码：

```
<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'login-form',
    'enableClientValidation'=>true,
    'clientOptions'=>array(
       'validateOnSubmit'=>true,
    ),
)); ?>

<div class="row">
    <?php echo $form->labelEx($model,'username'); ?>
    <?php echo $form->textField($model,'username'); ?>
    <?php echo $form->error($model,'username'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model,'password'); ?>
    <?php echo $form->passwordField($model,'password'); ?>
    <?php echo $form->error($model,'password'); ?>
</div>

<div class="row buttons">
    <?php echo CHtml::submitButton('Submit'); ?>
</div>

<?php $this->endWidget(); ?> 
```

这是我的配置文件中的 csrf 配置：

```
'enableCsrfValidation' => !isset($_POST['dontvalidate']) ? true : false, 
```

如果您需要查看示例。[这](http://marionette-cola.linkmesrl.com/admin/)是一个正在工作的，[这](http://www.marionettecolla.org/admin)是一个有问题的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:44:22.083

我打开第一个示例，在源代码中找到了这个 html，这是正确的。

```
<input type="hidden" value="df5a0fc9ab86f85cdcdabe6b2ee62e85d3ac0323" 
      name="YII_CSRF_TOKEN" /> 
```

在第二个示例页面上，我没有找到上述任何 html 代码。这意味着**enableCsrfValidation**在第二个示例 中设置为**false**。

尝试在此页面（或 config/main.php ）中调试 $_POST['dontvalidate'] 。

# php - 使用php构建概率树？

> ID：12582692
> 
> 赞同：5
> 
> 时间：2012-09-25T12:10:17.257
> 
> 标签：php, tree, probability

> **可能重复：**
> [排列 - 所有可能的数字集](https://stackoverflow.com/questions/5506888/permutations-all-possible-sets-of-numbers)

我有一个包含选项列表的数组，每个选项都是唯一的，不能重复。

我想使用以下选项构建概率树：

```
$options = array('1','2','3','4','A','E','I','O'); 
```

所以一条有效的线可能是`1-2-E-3-O-I-4-A`

我怎样才能做到这一点？（或者至少指出我正确的方向！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:12:09.750

递归可能是实现这一点的最简单方法，但它不能很好地扩展到大型数据集。

基本上编写一个函数，该函数接受一系列选项，将一个选项从调用本身中剔除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:14:21.073

```
<?php

function pc_permute($items, $perms = array( )) {
    if (empty($items)) { 
        print join('-', $perms) . "<br />";
    }  else {
        for ($i = count($items) - 1; $i >= 0; --$i) {
            $newitems = $items;
            $newperms = $perms;
            list($foo) = array_splice($newitems, $i, 1);
            array_unshift($newperms, $foo);
            pc_permute($newitems, $newperms);
        }
    }
}

$options = array( '1','2','3','4','A','E','I','O' );
$mass = pc_permute( $options );

?> 
```

# java - 使用 XML onClick 时出现 Android Dialog NoSuchMethodException 错误

> ID：12582695
> 
> 赞同：3
> 
> 时间：2012-09-25T12:10:21.743
> 
> 标签：java, android, dialog, onclick, nosuchmethod

我是 Java 和 Android 的新手，我正在开发我的第一个测试应用程序。

我已经取得了进展，但我被对话框阻止了。

我显示来自 Activity 的对话框，如下所示：

```
//BuyActivity.java
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_shop);

    initialize_PR();
    display_PR();
    BuyDialog=new Dialog(this);
    BuyDialog.setContentView(R.layout.dialog_buy);

}
public void Action_ShowDialog_Buy(View view) {
    BuyDialog.show() ;
} 
```

当单击触发 Action_ShowDialog_Buy 的 Activity 按钮时，对话框正确显示。但在那之后，Dialog 本身就有了一个按钮：

```
<!-- dialog_buy.xml -->
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<!-- Other stuff -->

<Button
    android:id="@+id/Button_Buy"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/Some_Other_Stuff"
    android:layout_centerHorizontal="true"
    android:text="@string/button_buy"
    android:onClick="Action_ShowDialog_Buy" />

</RelativeLayout> 
```

在Activity上实现了按钮方法Action_ShowDialog_Buy：

```
public void Action_ShowDialog_Buy(View view) {
    BuyDialog.dismiss() ;
} 
```

但是当我单击对话框中的按钮时，我收到错误：

```
java.lang.IllegalStateException: Could not find a method BuyActivity.Action_ShowDialog_Buy(View) in the activity class android.view.ContextThemeWrapper for onClick handler on view class android.widget.Button with id 'Button_Buy' 
```

及以下：

```
Caused by: java.lang.NoSuchMethodException:BuyActivity.Action_ShowDialog_Buy 
```

但正如您在上面看到的，该方法存在于 Activity 上。

我想我理解这是某种范围问题，但我无法理解它。请注意，我已阅读[在布局 xml 中使用 onClick 属性会导致 Android 对话框中出现 NoSuchMethodException，](https://stackoverflow.com/questions/4243704/using-onclick-attribute-in-layout-xml-causes-a-nosuchmethodexception-in-android)但我需要了解，而不仅仅是复制代码。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:15:21.603

您正在尝试调用方法“Action_ShowDialog_Buy”，但 Dialog 对象中不存在此方法！如果在 xml 中指定，则此方法不应在 Activity 中。如果要处理 Activity 中的单击，则应以编程方式设置 onClickListener：

```
Button b=(Button)BuyDialog.findViewById(R.id.Button_Buy);
b.setOnClickListener(new OnClickListener(){
    @Override
    onClick(View v){
      BuyDialog.dismiss();
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:51:57.607

您必须在 xml 文件中使用 set clickable true 。

```
<!-- dialog_buy.xml -->
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

    <!-- Other stuff -->

        <Button
            android:id="@+id/Button_Buy"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/Some_Other_Stuff"
            android:layout_centerHorizontal="true"
            android:text="@string/button_buy"
            android:onClick="Action_ShowDialog_Buy"
            android:clickable="true" />

        </RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T12:18:49.603

及以下：

```
Caused by: java.lang.NoSuchMethodException:BuyActivity.ActionShowDialog_Buy 
```

锁定在此`ActionShowDialog_Buy`您忘记`_`了方法名称中的simbol

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-08T18:05:13.403

[对话框使用 ContextThemeWrapper](https://stackoverflow.com/questions/4243704/using-onclick-attribute-in-layout-xml-causes-a-nosuchmethodexception-in-android#4244804)

现在，我们得到的例外...

```
java.lang.IllegalStateException: Could not find a method android:onClick="method" 
in the activity class android.view.ContextThemeWrapper
for onClick handler on view class android.widget.RadioButton with id 'statusSuspend' 
```

要摆脱这种情况，只需使用适当的充气机

**LayoutInflater.from(context)**代替

1.  ((LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE))

2.  getLayoutInflater()

避免使用 void setContentView(int layoutResID) 而是使用 void setContentView(View view)

并在 Dialog 构造函数中使用相同的**上下文，即 super(context)**

最后请不要忘记在 Activity 中定义 android:onClick="method" 而不是在您的自定义类中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T21:20:08.437

感谢所有试图提供帮助的人。

我已经设法通过创建一个从 Dialog 派生的类并使用它来解决这个问题，使用以下代码：

```
import android.app.Dialog;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.widget.RelativeLayout;

public class BuyDialogClass extends Dialog
{

//Ensure this Dialog has a Context we can use
Context mContext ;

public BuyDialogClass(Context context) {
    super(context);
    mContext=context; //Store the Context as provided from caller
}

@Override
 protected void onCreate(final Bundle savedInstanceState)
 {
  super.onCreate(savedInstanceState);
  RelativeLayout ll=(RelativeLayout) LayoutInflater.from(mContext).inflate(R.layout.dialog_buy, null);
  setContentView(ll); 
 }

} 
```

这使我可以这样调用对话框：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_shop);

    initialize_PR();
    display_PR();
    BuyDialog=new BuyDialogClass(this);
    //The setContentView is not necessary here as we call it on the onCreate

    //We can NOT access Dialog widgets from here,
    //because the dialog has not yet been shown.

}
public void Action_ShowDialog_Buy(View view) {
    BuyDialog.show() ;

    //NOW, after showing the dialog, we can access its widgets
    jobject_SeekBar_buy= (SeekBar) BuyDialog.findViewById(R.id.SeekBar_Dialog_Buy) ;
    jobject_SeekBar_buy.setMax(PR_num_coins/currentPR_buy_price) ;
    jobject_SeekBar_buy.setOnSeekBarChangeListener(this);

}
public void Action_Buy_PR(View view) {
    BuyDialog.dismiss() ;
} 
```

[我通过阅读在布局 xml 中使用 onClick 属性会在 Android 对话框中导致 NoSuchMethodException](https://stackoverflow.com/questions/4243704/using-onclick-attribute-in-layout-xml-causes-a-nosuchmethodexception-in-android)来设法做到这一点，但我仍然不明白这个上下文问题。

# python - 在 Manifest.in 中使用父目录

> ID：12582700
> 
> 赞同：10
> 
> 时间：2012-09-25T12:10:35.270
> 
> 标签：python

我知道 MANIFEST.in 可以识别相对路径。但是，我可以使用指向项目外部目录的相对路径吗？

例如：

```
/home
    /random_dir
    /python_project
        MANIFEST.in
        setup.py
        /packages 
```

然后在 MANIFEST.in

```
graft ../random_dir/ 
```

如果没有，除了将目录复制并粘贴到项目中之外，还有其他方法可以包含此类目录吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-26T00:11:59.077

我为你测试过。它似乎不想低于项目根目录。

请改用[符号链接](https://en.wikipedia.org/wiki/Symbolic_link)。根据数据和您的工作结构，[git 子模块](http://git-scm.com/docs/git-submodule)可以更好地解决您的情况。

# ios6 - UINavigationBar titleView 中的 iOS 6 和 UIActivityIndi cator 问题

> ID：12582703
> 
> 赞同：5
> 
> 时间：2012-09-25T12:10:44.427
> 
> 标签：ios6, uiactivityindicatorview, uinavigationitem

自 iOS 6 以来一直有这个问题。我真的不知道发生了什么变化会导致这种行为。这曾经在 5 中完美运行。现在活动指示器没有及时出现或根本没有出现。任何帮助将非常感激。

```
-(void)myMethod
{
    UIView *currentTitleView = [[self navigationItem] titleView];

    // Create an activity indicator and start it spinning in the nav bar
    UIActivityIndicatorView *aiview = [[UIActivityIndicatorView alloc]     initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];

    [[self navigationItem] setTitleView:aiview];
    [aiview startAnimating];

    // Start of Block code
    void (^block)(arg1, arg2) =
    ^(arg1, arg2)
    {
       block code;
       [aiview stopAnimating];
       [[self navigationItem] setTitleView:currentTitleView];
    };
// End of Block code

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:58:33.033

听起来像是`myMethod`从后台线程调用的。作为一般规则，与 UIKit 元素（包括`UIActivityIndicatorView`）的所有交互都应始终在主线程上完成。尝试使用 GCD 将 UI 代码移动到主队列（也称为主线程）。

```
-(void)myMethod {
    dispatch_async(dispatch_get_main_queue(), ^{
        UIView *currentTitleView = [[self navigationItem] titleView];

        // Create an activity indicator and start it spinning in the nav bar
        UIActivityIndicatorView *aiview = [[UIActivityIndicatorView alloc]     initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];

        [[self navigationItem] setTitleView:aiview];
        [aiview startAnimating];
    });

    // Start of Block code
    void (^block)(arg1, arg2) =
    ^(arg1, arg2)
    {
       block code;

        dispatch_async(dispatch_get_main_queue(), ^{
           [aiview stopAnimating];
           [[self navigationItem] setTitleView:currentTitleView];
        });
    };
// End of Block code
} 
```

# c# - 反射 v 表达式

> ID：12582707
> 
> 赞同：2
> 
> 时间：2012-09-25T12:10:58.567
> 
> 标签：c#, lambda, expression-trees

我正在查看[另一个问题](https://stackoverflow.com/questions/2624823/copy-values-from-one-object-to-another)，该问题说明 Expression 如何比反射快得多，因为它可以预编译为 IL。

我不确定如何使用它。这是用于 Value Oject（在 DDD 意义上）的基类中使用的一些代码，其基本思想是使用所有公共属性的值来确定相等性，它通过反射获得。通过使用此基类，您无需为具有值对象的子类实现相等性。

```
protected virtual bool HasSameObjectSignatureAs(BaseObject compareTo) 
{
var signatureProperties = GetType().GetProperties();
foreach (var property in signatureProperties)
{
    var valueOfThisObject = property.GetValue(this, null);
    var valueOfCompareTo = property.GetValue(compareTo, null);

    if (valueOfThisObject == null && valueOfCompareTo == null) {
        continue;
    }

    if ((valueOfThisObject == null ^ valueOfCompareTo == null) ||
        (!valueOfThisObject.Equals(valueOfCompareTo))) {
            return false;
    }
} 
```

如何使用 Expression 重写此代码？

干杯，
贝里尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T12:54:18.433

`And`您可以通过为要比较的每个属性构建一个嵌套表达式来做到这一点：

```
protected Expression<Func<BaseObject, bool>> CreatePropertiesEqualExpression(BaseObject other)
{
    if (! other.GetType().IsSubclassOf(this.GetType())) throw new ArgumentException();

    var properties = this.GetType().GetProperties();
    Expression trueExpr = Expression.Constant(true);
    Expression thisExpr = Expression.Constant(this);
    ParameterExpression paramExpr = Expression.Parameter(typeof(BaseObject), "compareTo");
    Expression downCastExpr = Expression.Convert(paramExpr, other.GetType());

    MethodInfo eqMethod = typeof(object).GetMethod("Equals", BindingFlags.Public | BindingFlags.Static);

    Expression propCompExpr = properties.Aggregate(trueExpr, (expr, prop) =>
    {
        Expression thisPropExpr = Expression.Property(thisExpr, prop);
        Expression compPropExpr = Expression.Property(downCastExpr, prop);
        Expression eqExpr = Expression.Call(null, eqMethod, Expression.Convert(thisPropExpr, typeof(object)), Expression.Convert(compPropExpr, typeof(object)));

        return Expression.And(expr, eqExpr);
    });

    return Expression.Lambda<Func<BaseObject, bool>>(propCompExpr, paramExpr);
} 
```

然后你可以像这样使用它：

```
public class SubObject : BaseObject
{
    public int Id { get; set; }
    public string Name { get; set; }
    private Func<BaseObject, bool> eqFunc;

    public bool IsEqualTo(SubObject other)
    {
        if(this.eqFunc == null)
        {
            var compExpr = this.CreatePropertiesEqualExpression(other);
            this.eqFunc = compExpr.Compile();
        }
        return this.eqFunc(other);
    }
} 
```

# language-agnostic - 如何知道要传递给脚本的参数

> ID：12582708
> 
> 赞同：1
> 
> 时间：2012-09-25T12:10:59.153
> 
> 标签：language-agnostic

抛开运行某人给我的脚本的安全隐患，我怎么能提前知道该脚本需要一定数量的参数？无需阅读代码。

如果有人只是给我一个脚本，有没有办法知道它需要 4 个参数或任何情况？

我想我正在寻找最佳实践答案。我显然不是开发人员，只是好奇某些事情是如何完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:18:27.330

你想知道什么样的剧本？Shell 或 Windows Batch 或 Ruby 或 Python ？

对于 Python 中的脚本，不阅读代码就不可能知道参数的数量。在 Python 中，我们可以将任何参数传递给 Python 脚本。脚本决定是否使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:07:57.757

脚本作者提供描述以下部分或全部的文档是符合礼节的：脚本的目的、预期的参数和操作模式。

某些脚本在使用适当的帮助开关（例如 或 ）运行时会生成缩写的用法消息（列出接受的`theScript -h`参数`theScript --help`）`theScript /?`。

构成可安装工具、包或应用程序一部分的脚本可能具有关联的“手册页”( `man theScript`) 或已发布的文档，例如超文本页面、文本文件、印刷手册或 Internet 上的页面。可以通过浏览文件系统/开始菜单 (Windows)/提供的材料和原始安装媒体或通过搜索 Web 找到此类文档。

当然，这仅适用于惯例；通常没有由计算机系统在脚本上强制执行的合同。如果有人“给你一个脚本”（来源有问题），那么以上都不能保证。

如果您明确收到一个脚本（包含在编辑器中可读的文本而不是二进制乱码），那么内容可能包括一段包含有用信息的散文，而您无需阅读和理解“代码”。

# osgi - OSGi 和应用服务器

> ID：12582709
> 
> 赞同：13
> 
> 时间：2012-09-25T12:11:01.983
> 
> 标签：osgi, application-server

我无法理解这两个平台的区别？两者似乎都为部署和管理应用程序提供了环境。首先，我认为应用服务器在后台使用 OSGi，我现在不这么认为，但我看到大型 AS（jboss、glassfish、websphere 等）使用 OSGi。大局是什么？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T12:49:58.033

有（在某种程度上）术语“应用程序”的重载。

OSGi 是**模块化**Java 应用程序的运行时环境（和开发模型）。在这种情况下，术语“应用程序”可能非常非常低级。例如，应用服务器可以被认为是这样的“应用程序”。

应用程序服务器也是 Java 应用程序的运行时环境（和开发模型）。然而，在这种情况下，术语“应用程序”通常是指更高级别的应用程序类型（例如，Web 应用程序）。应用程序服务器通常包括一组丰富的高级功能和编程 API，用于构建 Web 应用程序 (Servlet)、将数据持久保存到数据库 (JPA) 和集群功能。如今，大多数应用服务器都由模块组成（例如，核心、servlet 引擎、EJB 容器等）。一些应用程序服务器在幕后使用 OSGi。其他人有自己的模块化运行时环境，也提供 OSGi 功能。

但也可以仅使用 OSGi 运行时环境直接开发更高级别的应用程序（例如 Web 应用程序）。但是，OSGi 框架本身不包含任何附加功能。它必须自己组装。有一些“发行版”包括一个框架和几个模块。

# javascript - Chrome，jquery 动画摆动

> ID：12582710
> 
> 赞同：2
> 
> 时间：2012-09-25T12:11:04.573
> 
> 标签：javascript, jquery, google-chrome, jquery-animate

我有一个只影响 Chrome 的问题。此外，它仅在屏幕处于特定宽度时可见。

我创建了一个可以复制问题的小提琴。

[http://jsfiddle.net/T8LvA/63/](http://jsfiddle.net/T8LvA/63/)

当您翻转红色框时，父级的宽度会被动画化以显示更多的红色框。

在看到摆动之前，您可能需要多次调整 html 窗格的宽度，

关于如何最好地解决这个问题的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:16:13.100

使用`float:right`而不是绝对定位它。

[http://jsfiddle.net/T8LvA/70/](http://jsfiddle.net/T8LvA/70/)

发生这种情况是因为当您更改宽度时，它会向右延伸 - 然后它会回流并移回左侧到正确的位置，这会导致摆动。将它浮动到右边总是保持它在那里。

澄清一下：您需要在 #widget 和 .hidden 上替换 position: absolute width float: right 以获得正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:19:31.213

如果你使用 postion 你需要使用`left`and `top`，在这种情况下它是没用的。以这种方式尝试 fx you css

```
#wrapper{
    width: 100%;  // was 600px
    height: 100px;
    margin: 0 auto;
    //position: relative; 
} 
```

# ios-simulator - 在 xcode 4.4 iOS 模拟器上安装的应用程序的位置

> ID：12582712
> 
> 赞同：1
> 
> 时间：2012-09-25T12:11:17.127
> 
> 标签：ios-simulator, xcode4.4

我试图访问我在模拟器中安装的应用程序的 .db 文件。似乎 xcode 4.4 有不同的位置。任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:39:20.753

XCode 将模拟器的应用程序放入文件夹`~/Library/Application Support/iPhone Simulator/6.0/Applications`

# ruby - 用 ruby 创建 sqlite 数据库需要很长时间

> ID：12582713
> 
> 赞同：3
> 
> 时间：2012-09-25T12:11:24.603
> 
> 标签：ruby, sqlite

我使用 sqlite-ruby 将 txt 文件传输到 sqlite3 数据库，每个 txt 文件大约 3.5 MB，ruby 读取速度非常快，但是每个文件填充数据库需要 10 多分钟。我不知道这是否正常，我想不是。有人可以告诉我一个更快的方法来做到这一点，或者我是否在做一些疯狂的事情？下面的代码和txt方案，谢谢。

编辑：每个文件超过 30 分钟...

```
require 'sqlite3'

db = SQLite3::Database.new( "firstTest.db" )

filename="file1.txt" # this file is 3.5 MB

streetArray=[]
mothertablename="tmother"
coordstablename="tcoords"

db.execute("create table '#{mothertablename}' (id INTEGER,stName TEXT,stBC TEXT,stPrice INTEGER,stUrl TEXT);")
db.execute("create table '#{coordstablename}' (id INTEGER,num INTEGER,xcoord DOUBLE,ycoord DOUBLE);")

f=[]
File.open("_history/" + "#{filename}").each{|line| f.push(line)}

counter=0

for i in 1...f.length
    f[i].gsub!("&apos;","") #get rid of comma character
    ptsArray=f[i].split(';')

    if ptsArray[0]==ptsArray[1]
        streetArray.push(f[i])
    end

    if ptsArray[0]=="next\n"
        counter +=1
        namestreetArray=f[i-1].split(';')
        stname=nil
        stprice=nil
        stbc=nil
        sturl=nil
        if namestreetArray[0]=="name"
            stname=namestreetArray[1]
            if namestreetArray.length>2
                stprice=namestreetArray.last
            else
                stprice=nil
            end
        end

        db.execute(  "insert into '#{mothertablename}' (id, stName, stBC, stPrice, stUrl) 
        values ('#{counter}','#{stname}','#{stbc}','#{stprice}','#{sturl}');")

        localcounter=0

        streetArray.each do |coord|
            localcounter +=1
            xcoord=coord.split(";")[3].to_f
            ycoord=coord.split(";")[2].to_f
            db.execute(  "insert into '#{coordstablename}' (id, num, xcoord, ycoord) 
            values ('#{counter}','#{localcounter}','#{xcoord}','#{ycoord}');")
        end
        streetArray.clear
    end
end 
```

这是txt方案

```
206358589;206358589;37.3907322;-5.9885633
195966401;195966401;37.3909862;-5.988974
195969491;195969491;37.3910908;-5.9891081
195969493;195969493;37.3911863;-5.9893141
195969494;195969494;37.3912954;-5.9895115
813726831;813726831;37.3914352;-5.98973
name;Calle Descalzos;3085
next
440230342;440230342;37.3918677;-5.9905477
813726823;813726823;37.3916168;-5.9905285
192037929;192037929;37.3916184;-5.9905125
195970140;195970140;37.391872;-5.990398
440230342;440230342;37.3918677;-5.9905477
next
192009475;192009475;37.3875271;-5.9937949
710633000;710633000;37.3875013;-5.9941761
name;Calle Felipe Perez;
next
195982576;195982576;37.387349;-5.9937755
308836571;308836571;37.3873649;-5.9936472
next
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T13:01:22.997

请参阅[sqlite 的常见问题解答“INSERT 真的很慢 - 我每秒只能执行几十个 INSERT”](http://www.sqlite.org/faq.html#q19)

简而言之，你可以通过两种方式加速sqlite：

*   使用 BEGIN...COMMIT 对多个 INSERT 语句进行分组，以将插入插入到一个事务中。在 ruby​​ 中，您应该执行以下操作：

    ```
    database.transaction do |db| db.execute( "insert into table values ( 'a', 'b', 'c' )" ) ... end 
    ```

*   或者简单地运行 PRAGMA synchronous=OFF。

并记住在执行之前准备好语句。

# c - 以 2 个字节交换位长度

> ID：12582714
> 
> 赞同：1
> 
> 时间：2012-09-25T12:11:25.770
> 
> 标签：c, byte, swap

我想输入 2 个无符号字符变量：a 和 b。如果将 a(0) 用于 a 中的位 0，我想将 a(6) 交换为 a(1)，并将 b(6) 交换为 b(1)。最后，我希望获得 2 个新的 unsigned char_type 变量：a1 和 b1 交换了所需的位。我很想知道有没有用 C 语言解决这个问题的方法？

进一步的要求是添加 2 个变量：pa 和 pb 来决定长度的起始位置。例如：如果 pa=6，pb=7，我必须将 a(6) 换成 a(1)，将 b(7) 换成 b(2)。

有什么好的解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:19:52.243

我倾向于使用异或掩码：

```
mask = 0x3e;    // 0b00111110
diff = (a & mask) ^ (b & mask);
a1 = a ^ diff;
b1 = b ^ diff; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:22:03.713

啊哈。我现在明白了

```
unsigned const char mask = 0x3e;

usigned char a,b; // input somehow

unsigned char a2=a, b2=b;

a2 = (a2 & ~mask) | (b & mask);
b2 = (b2 & ~mask) | (a & mask); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:31:01.787

给定整数，例如：

```
uint32_t a = 0xff00ff00;
uint32_t b = 0x00ff00ff; 
```

这是交换整个值的方式：

```
a ^= b;
b ^= a;
a ^= b; 
```

如果您只想交换特定位，请在此处添加一个掩码：

```
uint32_t mask = 0x0000ffff; // only swap the lower 16 bits
a ^= (b & mask);
b ^= (a & mask);
a ^= (b & mask); 
```

以上需要 6 次按位运算，而[ecatmur 的解决方案](https://stackoverflow.com/a/12582841/412080)只需要 5 次。

# regex - 在 Django 模板中使用正则表达式

> ID：12582715
> 
> 赞同：4
> 
> 时间：2012-09-25T12:11:30.993
> 
> 标签：regex, django, django-templates

我想知道是否可以在 Django 模板中使用正则表达式：

```
<a href="#{{form.deal_template_name.value}} ????" data-toggle="tab">{{form.deal_template_name.value}}</a> 
```

我想用_替换空格和点。（否则链接会与目标有问题）

```
{{form.deal_template_name.value}}

.replace(/ /g,"_").replace(/\./g,"_") 
```

如何直接在模板中做到这一点，这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T12:14:31.260

如果您真的想在脚上开枪：

[执行此操作的自定义 django 过滤器](http://djangosnippets.org/snippets/60/)：

```
{% load replace %} {{ mystring|replace:"/l(u+)pin/m\1gen" }} 
```

# python - 如何在python中检查文件夹中的文件是否已更改？

> ID：12582720
> 
> 赞同：16
> 
> 时间：2012-09-25T12:12:05.047
> 
> 标签：python, inotify

每当在特定目录中添加/删除/修改新文件时，我都需要在 python 中知道有没有办法？我正在寻找一个类似“inofity”的功能（来自 POSIX）。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-08-11T07:41:07.197

您可以将[inotify 用于 python](https://pypi.python.org/pypi/inotify)，它与**PyInotify**（旧）*不同。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-19T05:58:04.133

正如在[类似问题](https://stackoverflow.com/q/182197/321973)中提到的，您可能想看看[http://packages.python.org/watchdog/](http://packages.python.org/watchdog/)也适用于 Windows。

# ios - iOS 6 中不显示本地通知

> ID：12582728
> 
> 赞同：1
> 
> 时间：2012-09-25T12:12:43.570
> 
> 标签：ios, notifications, ios6, nsnotificationcenter

我会按时收到本地通知，但它们只是在制造声音。我已禁用“请勿打扰”选项并将通知警报样式设置为“警报”。

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:22:55.477

当应用程序未处于活动状态时（在前台），操作系统将显示警报、播放声音和/或创建徽章。当应用程序处于活动状态时，不会发生这样的事情。相反，它会在您的应用程序委托上调用 application:didReceiveLocalNotification: 方法，您必须在其中创建自己的警报、播放自己的声音等。

参考：http: [//developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)

# java - 如何在 Swing 中获取事件发生状态？

> ID：12582732
> 
> 赞同：0
> 
> 时间：2012-09-25T12:13:05.630
> 
> 标签：java, swing, event-handling

我扩展了一个具有所有事件处理的类，当超类中发生事件时，我想在子类中运行一个方法。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:17:51.170

从描述中我认为这更像是一个继承类型的问题：

1.  在超类中创建抽象方法，在超类中调用并在子类中实现。当然需要声明超类抽象
2.  用一种方法创建接口，让超类实现它。将方法的空实现添加到超类并在子类中覆盖它。您可以在超类中调用此方法，如果您有子类的实例，将使用来自子类的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:42:04.667

1.  了解您感兴趣的活动。
2.  找出触发该事件时在超类中调用的方法。
3.  在您的子类中覆盖它，同时确保仍然调用初始函数。

试试这个：

```
public class SubComponent extends SuperComponent {
    // override actionEvent in SuperComponent
    @Override
    public void actionEvent() {
        super.actionEvent();
        doAdditionalStuff();
    }
} 
```

# winapi - 如何在没有 Application.Caller 的情况下点击形状

> ID：12582737
> 
> 赞同：0
> 
> 时间：2012-09-25T12:13:20.407
> 
> 标签：winapi, vba, excel

如何在不使用`Application.Caller`? 的情况下检索单击以运行宏的形状。它的名称或形状本身作为一个对象。

我不能使用`Application.Caller`，因为如果形状名称大于 30 个字符，它只会检索前 30 个字符。

也许有一个 API 可以检索 Sape 对象？

**编辑：**

1.  我不想在表格中循环形状。循环遍历工作簿中的所有形状需要太多时间。
2.  我无法重命名形状。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:36:54.300

您可以重命名工作表中的形状对象吗？

```
Private Sub Workbook_Open()
Dim shp As shape
Dim i As Integer

For Each shp In ThisWorkbook.Sheets(1).Shapes
    shp.Name = "Shape" & Format(i, "0000")
    i = i + 1
Next shp
End Sub 
```

或者，您可以手动设置每个形状的 .OnAction 属性以将形状名称传递给您的函数：

```
Sub RenameShapes2()

    Dim shp As shape
    Dim i As Integer

    For Each shp In ThisWorkbook.Sheets(1).Shapes
        shp.name = "Shape" & "abcdefghijklmnopqrstuvwxyz0123456789_" & Format(i, "0000")
        shp.OnAction = "'userFunction """ & shp.name & """'"
        i = i + 1
    Next shp

End Sub

Sub userFunction(name As String)
    MsgBox name
End Sub 
```

这允许您拥有长度超过 30 个字符的形状名称。虽然有点丑

# android - 如何搭建安卓应用开发环境？

> ID：12582742
> 
> 赞同：1
> 
> 时间：2012-09-25T08:13:20.820
> 
> 标签：android, ide, eclipse, sdk

我一直在研究安装 android sdk 和相关工具的过程。访问[Android Developers](http://developer.android.com/training/basics/firstapp/index.html)页面后，我首先安装了android sdk，然后从安装软件选项中为我的indigo版本安装了eclipse插件。但是，在开发人员页面中提到了：

下载安卓 SDK。为 Eclipse 安装 ADT 插件（如果您将使用 Eclipse IDE）。使用 SDK 管理器下载最新的 SDK 工具和平台。

我已经下载了sdk并安装了eclipse的adt插件。我只需要将eclipse指向sdk的位置。但是，我被困在最后一步，要求我使用 sdk 管理器下载最新的工具。管理器界面弹出，我在那里看到很多选项。我不知道我必须选择和安装哪些。如果有人可以在这里帮助我并告诉我选择和安装哪些选项（如果可能的话，用屏幕截图），这对我来说将非常有益。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:11:35.060

实际上，我自己只是完成了设置。

在大多数情况下，您会通过反复试验很快找出您需要什么。如果您使用的是 Eclipse，它会在您丢失某些东西时对您大喊大叫，您只需在 SDK 管理器中找到您丢失的内容并安装它。

也就是说，这是我需要通过非常基本的设置来启动和运行（假设使用 Android 4.1，如果您计划为早期版本构建，那么您需要从该版本下载相应的库）：

*   SDK平台
*   ARM EABI v7a 系统映像（可选，如果您计划为其中一个平台开发，您还可以获取 Intel x86 Atom 和/或 Mips 系统映像；据我所知，ARM 是默认设置）
*   Android SDK 平台工具

您只需转到 Android SDK 管理器（您的 SDK 文件夹/工具/android；或单击 Eclipse 中的“SDK 管理器”按钮），选择您需要的内容，然后单击“安装包”即可获得这些。一旦你这样做了，你可以按照你链接的指南的其余部分来构建你的第一个应用程序（我强烈推荐它，它非常有益），你的应用程序应该可以毫无问题地运行。

![Android SDK 管理器](../Images/2652b8a226e8af0346e66a41adc910ee.png)

# asp.net-mvc-4 - MVC SiteMap - 当不同的节点指向同一个动作时 SiteMap.CurrentNode 没有映射到正确的路由

> ID：12582748
> 
> 赞同：6
> 
> 时间：2012-09-25T12:13:50.460
> 
> 标签：asp.net-mvc-4, mvcsitemapprovider

## 设置：

我正在使用带有 mvcSiteMapProvider 的 ASP.NET MVC 4 来管理我的菜单。

我有一个自定义菜单生成器，它评估一个节点是否在当前分支上（即，如果它`SiteMap.CurrentNode`是 CurrentNode 或 CurrentNode 是否嵌套在它下面）。代码包含在下面，但本质上是检查每个节点的 url 并将其与 currentnode 的 url 进行比较，直至 currentnodes “家谱”。

我的自定义菜单构建器使用 CurrentBranch 来添加一个突出显示 CurrentBranch 上的菜单项的类。

## 问题：

我的自定义菜单工作正常，但我发现`mvcSiteMapProvider`似乎并没有以一致的方式评估`url`的：`CurrentNode`

***当两个节点指向同一个动作并且仅通过动作的一个参数来区分时，SiteMap.CurrentNode 似乎没有使用正确的路由（它忽略区分参数并默认为映射到定义的动作的第一个路由节点）。***

## 问题示例：

在我拥有的应用程序中`Members`。

成员具有`MemberStatus`可以是“未处理”、“活动”或“非活动”的字段。要更改 MemberStatus，我有一个`ProcessMemberController`名为 Admin 的区域。处理是使用 上的`Process`操作完成的`ProcessMemberController`。

我的 mvcSiteMap 有两个节点都映射到`Process`动作。它们之间的唯一区别是`alternate`参数（例如我客户的域语义），在一种情况下具有“已处理”的值，而在另一种情况下具有“未处理”的值：

**节点：**

```
 <mvcSiteMapNode title="Process" area="Admin" controller="ProcessMembers" action="Process" alternate="Unprocessed" />
    <mvcSiteMapNode title="Change Status" area="Admin" controller="ProcessMembers" action="Process" alternate="Processed" /> 
```

**路线：**

到这两个节点的对应路由是（同样，唯一能区分它们的是alternate 参数的值）：

```
context.MapRoute(
                    "Process_New_Members",
                    "Admin/Unprocessed/Process/{MemberId}",
                    new { controller = "ProcessMembers", 
                        action = "Process", 
                        alternate="Unprocessed", 
                        MemberId = UrlParameter.Optional }
                );

context.MapRoute(
                    "Change_Status_Old_Members",
                    "Admin/Members/Status/Change/{MemberId}",
                    new { controller = "ProcessMembers", 
                        action = "Process", 
                        alternate="Processed", 
                        MemberId = UrlParameter.Optional }
                ); 
```

## 什么有效：

Html.ActionLink 助手使用路由并生成我期望的 url：

```
@Html.ActionLink("Process", MVC.Admin.ProcessMembers.Process(item.MemberId, "Unprocessed")

// Output (alternate="Unprocessed" and item.MemberId = 12):   Admin/Unprocessed/Process/12

@Html.ActionLink("Status", MVC.Admin.ProcessMembers.Process(item.MemberId, "Processed")

// Output (alternate="Processed" and item.MemberId = 23):   Admin/Members/Status/Change/23 
```

在这两种情况下，输出都是正确的，正如我所料。

## 什么不起作用：

假设我的请求涉及第二个选项，即 ，`/Admin/Members/Status/Change/47`对应于 alternate = "Processed" 和 MemberId 47。

调试我的静态 CurrentBranch 属性（见下文），我发现 SiteMap.CurrentNode 显示：

```
PreviousSibling: null
Provider: {MvcSiteMapProvider.DefaultSiteMapProvider}
ReadOnly: false
ResourceKey: ""
Roles: Count = 0
RootNode: {Home}
Title: "Process"
Url: "/Admin/Unprocessed/Process/47" 
```

即，对于 /Admin/Members/Status/Change/47 的请求 url，`SiteMap.CurrentNode.Url`计算结果为`/Admin/Unprocessed/Process/47`. 即，它忽略了`alternate`参数并使用了错误的路线。

## CurrentBranch 静态属性：

```
/// <summary>
        /// ReadOnly. Gets the Branch of the Site Map that holds the SiteMap.CurrentNode
        /// </summary>
        public static List<SiteMapNode> CurrentBranch
        {
            get
            {
                List<SiteMapNode> currentBranch = null;
                if (currentBranch == null)
                {
                    SiteMapNode cn = SiteMap.CurrentNode;
                    SiteMapNode n = cn;
                    List<SiteMapNode> ln = new List<SiteMapNode>();
                    if (cn != null)
                    {
                        while (n != null && n.Url != SiteMap.RootNode.Url)
                        {
                            // I don't need to check for n.ParentNode == null
                            // because cn != null && n != SiteMap.RootNode
                            ln.Add(n);
                            n = n.ParentNode;
                        }
                        // the while loop excludes the root node, so add it here
                        // I could add n, that should now be equal to SiteMap.RootNode, but this is clearer
                        ln.Add(SiteMap.RootNode);

                        // The nodes were added in reverse order, from the CurrentNode up, so reverse them.
                        ln.Reverse();
                    }
                    currentBranch = ln;
                }
                return currentBranch;
            }
        } 
```

## 问题：

我究竟做错了什么？

正如我所料，这些路线由 Html.ActionLlink 解释，但不像我所料那样由 SiteMap.CurrentNode 评估。换句话说，在评估我的路线时，SiteMap.CurrentNode 忽略了可区分的备用参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:30:54.520

我认为这是因为您试图从参数中获取路由。基本上，MVC 只是试图猜测您可能指的是什么路线。

正确的方法是按名称处理路线。所以站点地图应该引用一个路由名称而不是控制器、操作等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T12:22:09.993

## 附录 - 我已经开始工作了！！：

**最大的绊脚石：**

当使用不同的路由指向同一个控制器动作时，一个有不同的节点时，我遇到的大问题如下：

**你必须给不同的节点一个密钥！！！否则站点地图将不会呈现！**

例如，仅路由属性本身是不够的，您必须为指向同一操作的每个节点分配一个唯一键以将它们彼此区分开：

```
<mvcSiteMapNode title="Edit Staff" area="Admin" controller="EditStaff" route="Admin_AdministratorDetails" action="Start" key="administrators_details" />
<mvcSiteMapNode title="Edit Staff" area="Admin" controller="EditStaff" route="Admin_StaffDetails" action="Start" key="staff_details" /> 
```

一旦我意识到这一点，它现在就一帆风顺了。否则，一切都是晦涩难懂的。

**笔记：**

在问题中，被不同路由调用的动作是 Process 动作。我将其更改为对不同操作的调用。但是在编辑我的对象（律师）时，我不能这样做，因为编辑是由一个 MVC 向导完成的，就像我的自定义菜单构建器一样，我已经编写并且工作得很好。根本不可能（或者更确切地说，干）重新创建向导三次。所以我必须让我的菜单突出显示在指向同一动作的不同路线上正常工作。

没有 Un-DRY 软糖可以。我的客户不值得。

**解决方案（有关操作和路线与问题不同的原因，请参见注释）：**

Carlos Martinez 的建议有效，但您需要使用 Html.RouteLink 而不是 Html.ActionLink，并结合编辑的站点地图，详细说明路线。

本质上，在您的节点中，您需要使用 route 属性：

```
<mvcSiteMapNode title="Details Active Solicitor" area="Solicitors" controller="EditSolicitor" action="Start" route="Active_Details" key="company_activeSolicitors_details"/> 
```

然后，在您的视图中，您使用 RouteLink 帮助程序而不是操作链接：

```
@Html.RouteLink("Details", "Active_Details", new { action="Start", controller="EditSolicitor", idSolicitor = item.SolicitorId, returnUrl = Request.RawUrl }) 
```

在您的路由注册文件中，您现在可以编写调用相同操作的路由：

```
context.MapRoute(
                "Unprocessed_Details",
                "Unprocessed/Edit/{idSolicitor}/{action}",
                new { action = "Start", controller = "EditSolicitor", idSolicitor = UrlParameter.Optional }
            );

            context.MapRoute(
                "Inactive_Details",
                "Inactive/Edit/{idSolicitor}/{action}",
                new { controller = "EditSolicitor", action = "Start", idSolicitor = UrlParameter.Optional }
            );

            context.MapRoute(
                "Active_Details",
                "Solicitors/Edit/{idSolicitor}/{action}",
                new { controller = "EditSolicitor", action = "Start", idSolicitor = UrlParameter.Optional }
            ); 
```

如您所见，这三个路由调用的操作完全相同。只要我在 mvcSiteMapNode 中指定路由名称，当我的菜单被构建并且突出显示根据需要工作时，路由就可以正确区分。

**对 XML 感到困惑的注意事项：**

我非常讨厌 XML，非常真实。它让我感到困惑和困惑，尤其是当我感冒的时候。

问题是将路由属性添加到 mvcSiteMapNodes 增加了混淆的可能性。

我很困惑我得到了

我最初尝试了 Carlos 的建议，但没有奏效。不知道错误是什么，但用梳子梳理了一下，现在可以正常工作了。令人讨厌的是，我不确定自己做错了什么。

**活在希望中：**

我希望这记录了 mvcSiteMapNode 的一个边缘方面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:35:08.783

以防万一，您可以尝试以下方法：

```
context.MapRoute(
                    "Process_New_Members",
                    "Admin/{alternate}/Process/{MemberId}",
                    new { controller = "ProcessMembers", 
                        action = "Process", 
                        alternate="Unprocessed", 
                        MemberId = UrlParameter.Optional }
                ); 
```

这样，您将通过需要此附加参数来区分每条路线。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-15T08:22:29.380

您可以`url`在您的`mvcSiteMapNode`. 如下所示：

```
<mvcSiteMapNode title="Process" area="Admin" controller="ProcessMembers" action="Process" aurl="/Admin/ProcessMembers/Process/Unprocessed"/>
<mvcSiteMapNode title="Change Status" area="Admin" controller="ProcessMembers" action="Process" url="/Admin/ProcessMembers/Process/Processed" /> 
```

当然，您应该使用适当`RoutConfig`的 url 来工作。[这里](https://stackoverflow.com/questions/56128350/2-nodes-in-mvc-sitemap-refers-to-1-action-with-different-parameters-and-they-are/56144411#56144411)有一个样本。

# java - 如何序列化地图 > 使用 FlexJSON

> ID：12582752
> 
> 赞同：3
> 
> 时间：2012-09-25T12:14:15.273
> 
> 标签：java, json, jsonserializer, flexjson

我有一个要序列化为 JSON 的对象。该对象是一个包含特定对象列表的地图。这看起来与它相似：

```
Map<String, List<Object>> map = new Map<String, List<Object>>(); 
```

我正在使用 FlexJSON。我只能与`flexjson.JSONSerializer`. 有我的尝试：

```
JSONSerializer jsonSerializer = new JSONSerializer();
//        jsonSerializer.include("map");
//        jsonSerializer.include("map.myList.object");
jsonSerializer.transform(new MapTransformer(), "map");
jsonSerializer.exclude("*.class"); 
```

如您所见，我现在正在尝试`Transformer`上课，但没有成功。`List<Object>`如我所料，如果我有自己的名字，那么注释行将起作用`myList`。但它没有自己的名字，因为它是`values`我的地图。

如何使用 FlexJSON 将此类对象序列化为 JSON？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T18:20:55.247

Quoi 是正确的，并且很可能是您想要使用的答案。但是，为了了解更多关于它是如何工作的信息，您可以这样做：

```
new JSONSerializer().include("values.values").serialize( myMap ); 
```

Maps 和 Lists 是容器，对其中包含的元素有特殊的表达方式。当您想谈论容器的值的路径时，您可以在路径中使用“值”表达式。Map 的两个特殊表达式“键”和“值”。其他集合具有“价值”。

另一种选择是使用通配符，如下所示：

```
 new JSONSerializer().include("values.*").serialize( myMap ); 
```

您还可以看到 Quoi 的答案中使用的通配符来排除类属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T12:19:48.880

尝试

```
String jsonString = new JSONSerializer().exclude("*.class").deepSerialize(map); 
```

deepSerialize 方法执行目标实例的深度序列化。默认情况下，它将包含所有集合、映射和数组，因此包含被忽略，除非您想要包含被注释排除的内容。

# javascript - 每当在其中加载新文本时，Div 不会显示第一行

> ID：12582754
> 
> 赞同：0
> 
> 时间：2012-09-25T12:14:22.793
> 
> 标签：javascript, jquery, html, text

我在页面中有 id 为“TrancriptBox”的 div。它包含行数的文本。

当我在 iPad 上滚动它时，它工作正常。但是，如果我滚动并更改该 div 的文本。它不显示更改文本的第一行。它显示滚动位置而不是第一行的新文本。

代码：

```
$("#TrancriptBox").text("");
$("#TrancriptBox").text(trancriptText); 
```

“trancriptText”是传递给 div 的文本参数。

请建议在 div 中加载新文本时如何显示第一行文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:18:58.200

只需调用`scrollTop()`：

```
$("#TrancriptBox").text(trancriptText).scrollTop(0); 
```

鉴于您正在显式重置`text()`元素的 ，您无需先取消设置文本（使用`.text('')`），只需使用传入的新变量直接应用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:18:43.540

尝试：

```
$("#TrancriptBox").empty().html(trancriptText); 
```

# spring - 如何在 Netbeans 或 Eclipse 上使用 Maven、Spring、Hibernate (JPA)

> ID：12582757
> 
> 赞同：1
> 
> 时间：2012-09-25T12:14:35.210
> 
> 标签：spring, hibernate, maven, jpa

作为 Java EE 的新手，我正在尝试构建一个带有数据库层的 rest api。

我正在使用 Netbeans 7.2 和 Glassfish，因为它们很容易安装在我的 Mac OSX Lion 上。从 netbeans 我用 Maven 打开一个项目，选择 archetype `weby`。我想要的是 Maven、Spring 和带有 JPA 的 Hibernate。我还在为我的 Rest API 层使用 restlet。无论如何，我在网上找到的教程以及这本书`Spring persistence with Hibernate [electronic resource] / Paul Tepper Fisher and Brian D. Murphy`一直引用/src/main/resources/META-INF/spring/spring-master.xml。但是该项目没有这样的文件夹。相反，该项目有 /main/resources/hibernate.cfg.xml 和一个关于 jdbc 连接的文件夹。

基本上我被卡住了。一些问题：

我使用的是正确的 Maven Archetype 吗？有没有另一种方法来获得我正在寻找的东西（在我的 Mac 上使用 Netbeans 或 Eclipse）？我不想旋转太多，这就是为什么我没有手动添加/src/main/resources/META-INF/spring/spring-master.xml，特别是因为我不知道该放什么.

非常感谢其他意见。

# javascript - 使用javascript根据输入显示动态验证消息（基于图像）的方法

> ID：12582760
> 
> 赞同：0
> 
> 时间：2012-09-25T12:14:53.803
> 
> 标签：javascript, html

我是网络编程和脚本的新手；我有一个要求，我必须在输入文本框上动态显示由 onblur 或 onchange 等事件触发的验证消息。对我来说具有挑战性的部分是，共有 5 个验证应用于相同的输入，我必须同时以静态列表的形式在右侧显示所有验证的结果。列表中的每条消息前面都会有一个绿色检查图像（用于有效验证）和红色检查图像（用于无效验证）。列表中的消息数量是固定的，唯一的事情是在每条消息之前切换图像（红色/绿色勾号），取决于相应的验证是否通过或不。我正在考虑以下方法：我制作了 CSS 10 个 div，每个有效检查图像 5 个，无效交叉图像 5 个。

问题是代码是固定的、有限的；但是它解决了我的目的，它冗长，我没有使用任何数据结构，这都是由于我的知识有限。有人能告诉我如何以更好和有效的方式解决这个问题吗？

```
**CSS CODE**

#divRule10
{
background-image: url('common/images/invalid_rule.png') ;
width:16px;
height:16px;
}
#divRule11
{
background-image: url('common/images/valid_rule.png') ;
width:16px;
height:16px;
}
#divRule20
{
background-image: url('common/images/invalid_rule.png') ;
width:16px;
height:16px;
}
#divRule21
{
background-image: url('common/images/valid_rule.png') ;
width:16px;
height:16px;
}
#divRule30
{
background-image: url('common/images/invalid_rule.png') ;
width:16px;
height:16px;
}
#divRule31
{
background-image: url('common/images/valid_rule.png') ;
width:16px;
height:16px;
}
#divRule40
{
background-image: url('common/images/invalid_rule.png') ;
width:16px;
height:16px;
}
#divRule41
{
background-image: url('common/images/valid_rule.png') ;
width:16px;
height:16px;
}
#divRule50
{
background-image: url('common/images/invalid_rule.png') ;
width:16px;
height:16px;
}
#divRule51
{
background-image: url('common/images/valid_rule.png') ;
width:16px;
height:16px;
}

**JS CODE**

  function errorMessage()
      {

      var valuePassword=document.getElementsByName("newpwd")[0].value;

      if(valuePassword.length<8)
      {

      document.getElementById('divRule10').style.display='';
       document.getElementById('divRule11').style.display='none';
     // alert("Error: password must contain at least 8 chars"); 
      }
      else
      {
      document.getElementById('divRule11').style.display='';
       document.getElementById('divRule10').style.display='none';

      }
     re = /[0-9]/;
      if(!re.test(valuePassword)) 
      { 
      document.getElementById('divRule20').style.display='';
       document.getElementById('divRule21').style.display='none';

      } 
      else
      {
      document.getElementById('divRule21').style.display='';
       document.getElementById('divRule20').style.display='none';

      }
      re = /[!@#\$%]/; 
      if(!re.test(valuePassword)) { 
     document.getElementById('divRule30').style.display='';
      document.getElementById('divRule31').style.display='none';

      } 
      else
      {
      document.getElementById('divRule31').style.display='';
       document.getElementById('divRule30').style.display='none';

      }
      re= /\s/g;

     if(re.test(valuePassword))
      {
      document.getElementById('divRule50').style.display='';
       document.getElementById('divRule51').style.display='none';

       }
       else
      {
      document.getElementById('divRule51').style.display='';
       document.getElementById('divRule50').style.display='none';

      }

       if(null==(valuePassword.match(/^[A-Za-z0-9].+$/)))
       {
        document.getElementById('divRule40').style.display='';
         document.getElementById('divRule41').style.display='none';
            //alert(' Error: 1st letter must be a letter');
       }
       else
       {

       document.getElementById('divRule41').style.display='';
       document.getElementById('divRule40').style.display='none';

       }
    }
</script>

**HTML CODE**

<html:password property="newpwd"  size="20" maxlength="15" onblur="restore(),errorMessage()"   name="ChangePwdForm" styleClass="loginUserId"></html:password>

<table>

            <tr>
            <td>
            <div id="divRule10" style="display:none;">

            </div>
            <div id="divRule11" style="display:none;">

            </div>
            </td>
            <td>
            Must be of atleast 8 characters.
            </td>
            </tr>
            <tr>
            <td>
            <div id="divRule20" style="display:none;">

            </div>
            <div id="divRule21" style="display:none;">

            </div>
            </td>
            <td>
            Atleast 1 number
            </td>
            </tr>
            <tr>
            <td>
            <div id="divRule30" style="display:none;">

            </div>
            <div id="divRule31" style="display:none;">

            </div>
            </td>
            <td>
            Atleast 1 special character
            </td>
            </tr>
            <tr>
            <tr>
            <td>
            <div id="divRule40" style="display:none;">

            </div>
            <div id="divRule41" style="display:none;">

            </div>
            </td>
            <td>
            Begin with letter or number
            </td>
            </tr>
            <tr>
            <tr>
            <td>
            <div id="divRule50" style="display:none;">

            </div>
            <div id="divRule51" style="display:none;">

            </div>
            </td>
            <td>
            Cannot have spaces.
            </td>
            </tr>

            </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:00:43.663

您的 javascript 验证：

```
function validate (element_id) {

    // element
    el = document.getElementById(element_id);

    // validation sign
    el_sign = document.getElementById(element_id + '_sign');

    // do some validations here and ...
    if (valid == true)
        el_sign.className = 'valid';
    else
        el_sign.className = 'invalid';

} 
```

您的 HTML 代码：

```
// element 1, validation sign
<div id="el_1_sign"></div>

// element 1
<input id="el_1" type="text">

// element 2, validation sign
<div id="el_2_sign"></div>

// element 2
<input id="el_2" type="text"> 

// continue ... 
```

你的 CSS 代码：

```
.valid {
    background-image: url('common/images/valid_rule.png') ;
    width:16px;
    height:16px;
}

.invalid {
    background-image: url('common/images/invalid_rule.png') ;
    width:16px;
    height:16px;
} 
```

# html - 在 html 控件的工具提示中显示上标字符？

> ID：12582761
> 
> 赞同：1
> 
> 时间：2012-09-25T12:14:57.713
> 
> 标签：html

我想知道，可以在 html 控件的工具提示中显示上标字符。

```
$(tblth).attr("title","name <sup>a</sup>"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:18:18.873

由于它不是 HTML（它是本机渲染的并且取决于操作系统），所以您不能这样做。

通常的解决方案是制作自己的工具提示（或使用众多库之一）。好消息是这很容易。

# google-chrome - 删除 Chrome 中的 Google Favicons

> ID：12582762
> 
> 赞同：0
> 
> 时间：2012-09-25T12:14:58.130
> 
> 标签：google-chrome

我在我的网站上安装了 ssl。但是我在 chrome 的 url 栏上看到了这个不安全的图标。当我打开控制台时，我收到了这条消息：

```
The page at https://www.pm-sson.nl/index.php displayed insecure content from http://www.google.com/s2/favicons?domain=www.mysite.com. 
```

我怎样才能删除这个？我有自己的网站图标，但它不会删除它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:23:42.590

您可以在页面中指定图标的 url。

```
<link rel="shortcut icon" href=”favicon.ico” /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:25:39.420

```
<!DOCTYPE html 
      PUBLIC "-//W3C//DTD HTML 4.01//EN"
      "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en-US">
<head profile="http://www.w3.org/2005/10/profile">
<link rel="icon" 
      type="image/png" 
      href="http://example.com/myicon.png">
[…]
</head>
[…]
</html>
that allow put your own favicon 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-14T16:53:41.853

SEO Meta Inspector 扩展显然会导致这个问题。看

[Google 产品论坛匹配问题](https://productforums.google.com/forum/?fromgroups#!topic/analytics/W3KKl3H1gjo)

弗里茨

# java - （如何）外包 GWT 国际化？

> ID：12582764
> 
> 赞同：1
> 
> 时间：2012-09-25T12:15:11.807
> 
> 标签：java, gwt, maven-3

我的项目团队使用具有 Maven 结构的 GWT 开发浏览器游戏：

*   家长
    *   api
    *   领域
    *   服务
    *   看法

GWT 主要用在视图中（除了将其他模块继承到视图中），我们在那里实现了国际化。到目前为止，此配置正在运行。

现在我们还想国际化不同的错误消息，这些错误消息将被抛出到用户的视图中，但来自服务模块。因此，访问与视图模块相同的属性文件将是有利的。问题是（显然）我们无法从服务访问视图，因为它在父 pom.xml 中的顺序。

是否可以将国际化接口外包到 api 中，以便我们可以从任何地方访问它？

提前致谢。

* * *

专业化：

不管是不是我想的那么容易，还是我做错了什么。我尝试专门解决我的问题以检查我遇到的问题。

我在 Api 模块（de.ba.sy.api）中有一个 Api.gwt.xml，引用了我的包：

```
<module>
<!-- <inherits name="de.ba.sy.api.manager.IUserManager" /> -->
<inherits name="com.google.gwt.user.User" />

<!-- Hier können weitere packages eingefügt werden -->
<source path="dao" />
<source path="encoder" />
<source path="entity" />
<source path="exceptions" />
<source path="language" />
<source path="mail" />
<source path="manager" />
<source path="user" />
<source path="validator" />
</module> 
```

接口 ILanguage 以及属性位于语言包中。

*   de.ba.sy.api.language
    *   语言类
    *   ILanguage_de.properties
    *   ILanguage_en.properties
    *   ILanguage.properties

在 View-module 中有结构：

*   de.ba.sy.view
    *   Application.gwt.xml（继承 Api 模块）
    *   客户
        *   应用程序类

在 Application.class 我现在有代码：

```
package view.client;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.core.shared.GWT;
import com.google.gwt.user.client.ui.RootPanel;

import de.ba.sy.api.language.ILanguage;

/**
 * @author stubbe
 * Entry point classes define <code>onModuleLoad()</code>.
 */
public class Application implements EntryPoint {

    /**
     * This is the entry point method.
     */
    public void onModuleLoad() {
        /* Internationalisierung */
        final ILanguage languages = GWT.create(ILanguage.class);

        LoginPageForm login = new LoginPageForm(languages);
        RootPanel.get().add(login);
    }
} 
```

所以就像我说的，如果我将 ILanguage 及其属性保留在 View-module 中就没有问题，但是当我将它移到 Api-module 中时，我得到：

```
[INFO] --- gwt-maven-plugin:2.5.0-rc1:compile (default-cli) @ View ---
[INFO] auto discovered modules [view.Application]
[INFO] Compiling module view.Application
[INFO]    Validating units:
[INFO]       Ignored 5 units with compilation errors in first pass.
[INFO] Compile with -strict or with -logLevel set to TRACE or DEBUG to see all errors.
[INFO]    Computing all possible rebind results for 'de.ba.sy.api.language.ILanguage'
[INFO]       Rebinding de.ba.sy.api.language.ILanguage
[INFO]          Invoking generator com.google.gwt.i18n.rebind.LocalizableGenerator
[INFO]             Processing interface de.ba.sy.api.language.ILanguage
[INFO]                Generating method body for email()
[INFO]                   [ERROR] No resource found for key 'email'
[INFO] com.google.gwt.i18n.rebind.AbstractResource$MissingResourceException: No resource found for key 'email'
[INFO]  at com.google.gwt.i18n.rebind.MessagesMethodCreator.createMethodFor(MessagesMethodCreator.java:1086)
[INFO]  at com.google.gwt.i18n.rebind.AbstractLocalizableImplCreator.delegateToCreator(AbstractLocalizableImplCreator.java:501)
[INFO]  at com.google.gwt.i18n.rebind.MessagesImplCreator.emitMethodBody(MessagesImplCreator.java:92)
[INFO]  at com.google.gwt.user.rebind.AbstractGeneratorClassCreator.genMethod(AbstractGeneratorClassCreator.java:277)
[INFO]  at com.google.gwt.user.rebind.AbstractGeneratorClassCreator.emitMethods(AbstractGeneratorClassCreator.java:239)
[INFO]  at com.google.gwt.user.rebind.AbstractGeneratorClassCreator.emitClass(AbstractGeneratorClassCreator.java:118)
[INFO]  at com.google.gwt.i18n.rebind.AbstractLocalizableImplCreator.generateConstantOrMessageClass(AbstractLocalizableImplCreator.java:225)
[INFO]  at com.google.gwt.i18n.rebind.LocalizableGenerator.generate(LocalizableGenerator.java:151)
[INFO]  at com.google.gwt.i18n.rebind.LocalizableGenerator.generate(LocalizableGenerator.java:124)
[INFO]  at com.google.gwt.core.ext.IncrementalGenerator.generateNonIncrementally(IncrementalGenerator.java:40)
[INFO]  at com.google.gwt.dev.javac.StandardGeneratorContext.runGeneratorIncrementally(StandardGeneratorContext.java:657)
[INFO]  at com.google.gwt.dev.cfg.RuleGenerateWith.realize(RuleGenerateWith.java:41)
[INFO]  at com.google.gwt.dev.shell.StandardRebindOracle$Rebinder.rebind(StandardRebindOracle.java:79)
[INFO]  at com.google.gwt.dev.shell.StandardRebindOracle.rebind(StandardRebindOracle.java:276)
[INFO]  at com.google.gwt.dev.shell.StandardRebindOracle.rebind(StandardRebindOracle.java:265)
[INFO]  at com.google.gwt.dev.DistillerRebindPermutationOracle.getAllPossibleRebindAnswers(DistillerRebindPermutationOracle.java:91)
[INFO]  at com.google.gwt.dev.jjs.impl.UnifyAst$UnifyVisitor.handleGwtCreate(UnifyAst.java:355)
[INFO]  at com.google.gwt.dev.jjs.impl.UnifyAst$UnifyVisitor.handleMagicMethodCall(UnifyAst.java:433)
[INFO]  at com.google.gwt.dev.jjs.impl.UnifyAst$UnifyVisitor.endVisit(UnifyAst.java:237)
[INFO]  at com.google.gwt.dev.jjs.ast.JMethodCall.traverse(JMethodCall.java:243)
[INFO]  at com.google.gwt.dev.jjs.ast.JModVisitor.traverse(JModVisitor.java:361)
[INFO]  at com.google.gwt.dev.jjs.ast.JModVisitor.accept(JModVisitor.java:273)
[INFO]  at com.google.gwt.dev.jjs.ast.JModVisitor.accept(JModVisitor.java:265)
[INFO]  at com.google.gwt.dev.jjs.ast.JVisitor.accept(JVisitor.java:116)
[INFO]  at com.google.gwt.dev.jjs.ast.JCastOperation.traverse(JCastOperation.java:65)
[INFO]  at com.google.gwt.dev.jjs.ast.JModVisitor.traverse(JModVisitor.java:361)
[INFO]  at com.google.gwt.dev.jjs.ast.JModVisitor.accept(JModVisitor.java:273)
[INFO]  at com.google.gwt.dev.jjs.ast.JModVisitor.accept(JModVisitor.java:265)
[INFO]  at com.google.gwt.dev.jjs.ast.JVisitor.accept(JVisitor.java:116)
[INFO]  at com.google.gwt.dev.jjs.ast.JCastOperation.traverse(JCastOperation.java:65)
[INFO]  at com.google.gwt.dev.jjs.ast.JModVisitor.traverse(JModVisitor.java:361)
[INFO]  at com.google.gwt.dev.jjs.ast.JModVisitor.accept(JModVisitor.java:273)
[INFO]  at com.google.gwt.dev.jjs.ast.JModVisitor.accept(JModVisitor.java:265)
[INFO]  at com.google.gwt.dev.jjs.ast.JVisitor.accept(JVisitor.java:116)
[INFO]  at com.google.gwt.dev.jjs.ast.JDeclarationStatement.traverse(JDeclarationStatement.java:48)
[INFO]  at com.google.gwt.dev.jjs.ast.JModVisitor$ListContextImmutable.traverse(JModVisitor.java:170)
[INFO]  at com.google.gwt.dev.jjs.ast.JModVisitor.acceptWithInsertRemoveImmutable(JModVisitor.java:336)
[INFO]  at com.google.gwt.dev.jjs.ast.JBlock.traverse(JBlock.java:83)
[INFO]  at com.google.gwt.dev.jjs.ast.JModVisitor.traverse(JModVisitor.java:361)
[INFO]  at com.google.gwt.dev.jjs.ast.JModVisitor.accept(JModVisitor.java:273)
[INFO]  at com.google.gwt.dev.jjs.ast.JVisitor.accept(JVisitor.java:137)
[INFO]  at com.google.gwt.dev.jjs.ast.JVisitor.accept(JVisitor.java:133)
[INFO]  at com.google.gwt.dev.jjs.ast.JMethodBody.traverse(JMethodBody.java:82)
[INFO]  at com.google.gwt.dev.jjs.ast.JModVisitor.traverse(JModVisitor.java:361)
[INFO]  at com.google.gwt.dev.jjs.ast.JModVisitor.accept(JModVisitor.java:273)
[INFO]  at com.google.gwt.dev.jjs.ast.JModVisitor.accept(JModVisitor.java:265)
[INFO]  at com.google.gwt.dev.jjs.ast.JMethod.visitChildren(JMethod.java:426)
[INFO]  at com.google.gwt.dev.jjs.ast.JMethod.traverse(JMethod.java:395)
[INFO]  at com.google.gwt.dev.jjs.ast.JModVisitor.traverse(JModVisitor.java:361)
[INFO]  at com.google.gwt.dev.jjs.ast.JModVisitor.accept(JModVisitor.java:273)
[INFO]  at com.google.gwt.dev.jjs.ast.JModVisitor.accept(JModVisitor.java:265)
[INFO]  at com.google.gwt.dev.jjs.impl.UnifyAst.mainLoop(UnifyAst.java:902)
[INFO]  at com.google.gwt.dev.jjs.impl.UnifyAst.exec(UnifyAst.java:627)
[INFO]  at com.google.gwt.dev.jjs.JavaToJavaScriptCompiler.precompile(JavaToJavaScriptCompiler.java:604)
[INFO]  at com.google.gwt.dev.jjs.JavaScriptCompiler.precompile(JavaScriptCompiler.java:33)
[INFO]  at com.google.gwt.dev.Precompile.precompile(Precompile.java:278)
[INFO]  at com.google.gwt.dev.Precompile.precompile(Precompile.java:229)
[INFO]  at com.google.gwt.dev.Precompile.precompile(Precompile.java:141)
[INFO]  at com.google.gwt.dev.Compiler.run(Compiler.java:232)
[INFO]  at com.google.gwt.dev.Compiler.run(Compiler.java:198)
[INFO]  at com.google.gwt.dev.Compiler$1.run(Compiler.java:170)
[INFO]  at com.google.gwt.dev.CompileTaskRunner.doRun(CompileTaskRunner.java:88)
[INFO]  at com.google.gwt.dev.CompileTaskRunner.runWithAppropriateLogger(CompileTaskRunner.java:82)
[INFO]  at com.google.gwt.dev.Compiler.main(Compiler.java:177)
[INFO]                   [WARN] Searched the following resources:
[INFO]    [ERROR] Errors in 'view/client/Application.java'
[INFO]       [ERROR] Line 23: Failed to resolve 'de.ba.sy.api.language.ILanguage' via deferred binding
[INFO]    [WARN] For the following type(s), generated source was never committed (did you forget to call commit()?)
[INFO]       [WARN] de.ba.sy.api.language.ILanguage_ 
```

再次感谢你。我刚开始使用 GWT，因此我不知道这是否微不足道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:55:29.743

从 GWT 2.5 开始，您可以`GWT.create()`在 JVM 中使用（即在服务器上），前提是有一个作为参数传递的类的注册提供程序；它内置了国际化，因此您可以使用您的界面并`GWT.create()`在服务器上调用。

然后回答您的问题：是的，您可以将接口和属性文件移动到您的 Api 模块。

* * *

请注意，您必须使用`com.google.gwt.core.shared.GWT`类，而不是`com.google.gwt.core.client.GWT`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:23:22.923

一种方法是为可以从服务器抛出的不同类型的错误创建一个自定义枚举。然后，您可以使用枚举类型的实例变量在服务器抛出的异常中设置错误类型。收到异常后，客户端会将枚举值转换为“真实”错误消息，很可能使用 switch-case 语句。

你也可以使用多种异常类型而不是枚举来做同样的事情，但我个人更喜欢使用枚举。

# php - 列出常用名称的短名称的字典？

> ID：12582766
> 
> 赞同：0
> 
> 时间：2012-09-25T12:15:28.017
> 
> 标签：php, dictionary

如果有任何可用的字典可以列出我需要在我的 PHP 代码中使用的常用名称的短名称集，谁能建议我。

例如。

```
Bill = William
Dick = Ricard 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-25T12:19:31.870

您可以像这样定义名称。

```
define ("Bill", "William"); 
```

你可以像这样使用这些名称。

```
echo Bill; 
```

# lync - UCMA API 中 ConferenceScheduleInformation 的 ExpiryTime 有什么限制？

> ID：12582768
> 
> 赞同：0
> 
> 时间：2012-09-25T12:15:40.937
> 
> 标签：lync, lync-2010, ucma, lync-server-2010, ucma2.0

Microsoft.Rtc.Collaboration.ConferenceManagement 的 ConferenceScheduleInformation.ExpiryTime 属性的上限（最大日期）是多少？

如果我给了 ConferenceScheduleInformation.ExpiryTime=null 怎么办？空值是否意味着它永不过期或者是别的什么？

我们有什么方法可以生成永不过期的会议 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:55:35.073

我在 MSDN 中搜索了“ConferenceScheduleInformation.ExpiryTime”，并找到了 UCMA 2 的主题，其中包括以下文本：

评论

日期和时间必须介于服务器上当前日期和时间的前一年和后 10 年之间。

*   [约翰克拉克森](http://social.msdn.microsoft.com/profile/john%20clarkson/?ws=usercard-mini)和[马克 R 帕克](http://social.msdn.microsoft.com/profile/mark%20r%20parker/?ws=usercard-mini)

# forms - 经典 ASP Request.Form 有时不会在发布时返回任何值

> ID：12582770
> 
> 赞同：0
> 
> 时间：2012-09-25T12:15:51.213
> 
> 标签：forms, asp-classic, request

我有一个经典的asp页面。此页面使用通过 post 方法重定向另一个 asp 页面。

但是重定向的页面偶尔会从 Request.Form 集合中获取任何价值。

我们在表中记录 HTTP 错误。当我检查日志时，我发现了一个共同点。浏览器主要是Mozilla。

下面是一些类似的浏览器详细信息；

```
Mozilla/3.0 (compatible; Indy Library)
Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)
Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 2.0.50727; InfoPath.2; .NET CLR 3.0.04506.648; .NET CLR 3.5.21022)
Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0)
Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET CLR 2.0.50727)
Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET CLR 2.0.50727; .NET CLR 3.0.04506.30; .NET4.0C; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; .NET4.0E)
Mozilla/4.05 [en] (WinXP; I)
Mozilla/5.0 (BlackBerry; U; BlackBerry 9800; tr) AppleWebKit/534.8+ (KHTML, like Gecko) Version/6.0.0.546 Mobile Safari/534.8+
Mozilla/5.0 (compatible; AhrefsBot/3.0; +http://ahrefs.com/robot/)
Mozilla/5.0 (compatible; AhrefsBot/3.1; +http://ahrefs.com/robot/)
Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)
Mozilla/5.0 (compatible; bingbot/2.0; +http://www.bing.com/bingbot.htm)
Mozilla/5.0 (compatible; Ezooms/1.0; ezooms.bot@gmail.com)
Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)
Mozilla/5.0 (compatible; MJ12bot/v1.4.3; http://www.majestic12.co.uk/bot.php?+)
Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.0; Trident/5.0)
Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)
Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0)
Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; BOIE9;TRTR)
Mozilla/5.0 (iPad; CPU OS 5_0_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9A405 Safari/7534.48.3
Mozilla/5.0 (iPad; CPU OS 5_1_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B206 Safari/7534.48.3
Mozilla/5.0 (iPad; U; CPU OS 4_3_5 like Mac OS X; tr-tr) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8L1 Safari/6533.18.5
Mozilla/5.0 (iPhone; CPU iPhone OS 5_0_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9A406 Safari/7534.48.3
Mozilla/5.0 (iPhone; CPU iPhone OS 5_1_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B206 Safari/7534.48.3
Mozilla/5.0 (iPhone; CPU iPhone OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A403 Safari/8536.25
Mozilla/5.0 (iPhone; CPU iPhone OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A5376e Safari/8536.25
Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_2_1 like Mac OS X; tr-tr) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8C148 Safari/6533.18.5
Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_3_5 like Mac OS X; tr-tr) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8L1 Safari/6533.18.5
Mozilla/5.0 (Linux; U; Android 2.2.1; tr-tr; HTC_Wildfire_A3333 Build/FRG83D) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1
Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/534.57.5 (KHTML, like Gecko) Version/5.1.7 Safari/534.57.4
Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11
Opera/9.80 (Series 60; Opera Mini/6.5.29700/28.1857; U; tr) Presto/2.8.119 Version/11.10
Opera/9.80 (Windows NT 5.1; U; tr) Presto/2.8.131 Version/11.11
Opera/9.80 (Windows NT 6.1; U; tr) Presto/2.10.289 Version/12.00
TurnitinBot/2.1 (http://www.turnitin.com/robot/crawlerinfo.html)
Windows-Live-Social-Object-Extractor-Engine/1.0 
```

我在不同的浏览器和操作系统中尝试过很多次。但我只是一次代表同样的情况，但我什么也抓不住。再来一张登录表。

我该怎么做？

我以前没有使用经典的asp。尝试调试问题也是对我的另一个挑战。

提前致谢

发布的表格如下

```
<form name="form1" method="post" action="redirect.asp">
      <table width="511" border="0" align="center" cellpadding="0" cellspacing="0">
        <tr>
          <td height="30" align="left" valign="middle" class="icerik_txt_11"><strong>Aracın Markası</strong></td>
          <td align="left" valign="middle" class="icerik_txt_11"><strong>:</strong></td>
          <td height="30" align="left" valign="middle"><select name="markaoto" class="list1">
              <%
            set markalar=conn.execute("select * from dbtable ORDER BY field")
            do while not markalar.eof
            %>
              <option value="<%=markalar("idfield")%>"><%=markalar("field")%></option>
              <%
            markalar.movenext
            loop
            %>
          </select></td>
        </tr>
        <tr>
          <td height="30" align="left" valign="middle" class="icerik_txt_11"><strong>Kullanım Tipi</strong></td>
          <td align="left" valign="middle" class="icerik_txt_11"><strong>:</strong></td>
          <td height="30" align="left" valign="middle"><select name="tarz" class="list1">
              <option value="0" selecteud="selected">Tümü</option>
              <option value="1" >Hususi</option>
              <option value="2" >Hafif Ticari</option>
              <option value="3" >Ağır Ticari</option>
          </select></td>
        </tr>
        <tr>
          <td height="30" align="left" valign="middle" class="icerik_txt_11"><strong>Şehir</strong></td>
          <td align="left" valign="middle" class="icerik_txt_11"><strong>:</strong></td>
          <td height="30" align="left" valign="middle"><select name="iloto" class="list1">
              <%
            set iller=conn.execute("SELECT * FROM TBL_ILLER ORDER BY IL")
            do while not iller.eof
            if iller("ILKOD")=34 then
            %>
              <option selected="selected" value="<%=iller("ILKOD")%>"><%=iller("IL")%></option>
              <% else %>
              <option value="<%=iller("ILKOD")%>"><%=iller("IL")%></option>
              <%
            end if
            iller.movenext
            loop
            %>
            </select>
          </td>
        </tr>

        <tr>
          <td width="103" height="30" align="left" valign="middle" class="icerik_txt_11">&nbsp;</td>
          <td width="19" align="left" valign="middle" class="icerik_txt_11">&nbsp;</td>
          <td width="389" height="30" align="left" valign="middle"><a href="#" onclick="anlasmalioto();" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image5','','images/index/ara_hl.gif',1)"><br />
            <img src="images/index/ara.gif" name="Image5" width="85" height="23" border="0" id="Image5" /></a>
            <div id="Waiting" style="visibility:hidden">Lütfen Bekleyiniz</div>
            </td>
        </tr>
      </table>
      </form> 
```

获取发布表单值的重定向页面服务器端代码如下；

```
 <%
        Dim regEx
        Set regEx = New RegExp
        regEx.Global = true
        regEx.Pattern = "[^0-9a-zA-Z]"
                marka=regEx.Replace(Request.Form("markaoto"), "")
        tarz=regEx.Replace(Request.Form("tarz"), "")
        il=regEx.Replace(Request.Form("iloto"), "")

        On Error Resume Next
            set marka_ad_al=conn.execute("select * from servisListMarka_V2 where markaId = "&marka)
            marka_ad=marka_ad_al("marka")
        If Err.Number <> 0 Then
            conn.execute("insert into ErrorLogTable(CodeRowNumber,LogPage,LogString)values(103 , 'anlasmali_cam_servisleri2.asp' , 'marka=" & marka & " / tarz=" & tarz & " / il=" & il & "')")
        else
            set marka_ad_al=conn.execute("select * from servisListMarka_V2 where markaId = "&marka)
            marka_ad=marka_ad_al("marka")
        end if
        set il_ad_al=conn.execute("SELECT * FROM TBL_ILLER WHERE ILKOD="&il)
        il_ad=il_ad_al("IL")
                If tarz = "0" Then

                sql = "WITH L AS(SELECT ST.SERVICE_TYPE_ID,S.*,CAST('<M>' + REPLACE(BRAND, ',','</M><M>')+ '</M>' AS XML) AS BRAND_ID FROM SERVICE S INNER JOIN SERVICE_TYPES ST ON S.SERVICE_ID = ST.SERVICE_ID where S.IS_ACTIVE = 1 and ST.SERVICE_TYPE_ID IN (1,2,3,4,5) AND S.STATUS = 1 AND S.CITY_ID = "& il &") SELECT L.*, SPLIT.A.value('.', 'VARCHAR(100)') AS BRAND_ID FROM L CROSS APPLY BRAND_ID.nodes('/M') SPLIT(A) WHERE SPLIT.A.value('.', 'VARCHAR(100)')='" & marka & "' ORDER BY SERVICE_TYPE_ID asc,EHOM DESC , ASU DESC"

            'sql = "SELECT * FROM SERVICE WHERE (BRAND LIKE '%," & marka & "%' OR BRAND LIKE '%" & marka & ",%' OR BRAND = '" & marka & "') AND CITY_ID = "& il &" AND SERVICE_TYPE = 1 AND STATUS = 1 AND IS_ACTIVE = 1 ORDER BY EHOM DESC , ASU DESC"

        Else

            'sql = "SELECT * FROM SERVICE WHERE (BRAND LIKE '%," & marka & "%' OR BRAND LIKE '%" & marka & ",%' OR BRAND = '" & marka & "') AND CITY_ID = "& il &" AND USAGE_STYLE LIKE '%,"& tarz &",%' AND STATUS = 1 AND IS_ACTIVE = 1 AND SERVICE_TYPE = 1 ORDER BY EHOM DESC , ASU DESC"

            sql="WITH L AS(SELECT ST.SERVICE_TYPE_ID,S.*,CAST('<M>' + REPLACE(BRAND, ',','</M><M>')+ '</M>' AS XML) AS BRAND_ID FROM SERVICE S INNER JOIN SERVICE_TYPES ST ON S.SERVICE_ID = ST.SERVICE_ID where S.IS_ACTIVE = 1 and ST.SERVICE_TYPE_ID IN (1,2,3,4,5) AND S.STATUS = 1 AND S.CITY_ID = "& il &" AND USAGE_STYLE LIKE '%"& tarz &"%') SELECT L.*, SPLIT.A.value('.', 'VARCHAR(100)') AS BRAND_ID FROM L CROSS APPLY BRAND_ID.nodes('/M') SPLIT(A) WHERE SPLIT.A.value('.', 'VARCHAR(100)')='" & marka & "' ORDER BY SERVICE_TYPE_ID asc,EHOM DESC , ASU DESC"

        End If

        sql_uk = sql

        set bul=conn180.execute(sql)
        If Not bul.eof then
        %> 
```

这是发布下面表格的javascript代码；

```
function anlasmalioto(){

btn = document.getElementById("Image5");
btn.style.visibility = "hidden";

waiting = document.getElementById("Waiting");
waiting.style.visibility = "visible";

document.form1.submit(); 
```

}

# gradle - TeamCity 发布构建信息

> ID：12582771
> 
> 赞同：0
> 
> 时间：2012-09-25T12:15:51.917
> 
> 标签：gradle, artifactory, teamcity-7.0

TeamCity 有一个功能，它将始终将构建信息发布到工件。（默认情况下）。如果我们检查发布构建信息选项（在第 3 步中 - 我使用 gradle 作为 Runner），发布的信息将记录在 Artifactory 中，以便我们可以追溯到生成工件的构建。现在，如果构建是人员构建，我想禁用发布构建信息。如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T08:31:22.177

[如果不自定义TeamCity Artifactory 插件](https://github.com/JFrogDev/teamcity-artifactory-plugin)或[Gradle Artifactory 插件](https://github.com/JFrogDev/build-info/tree/master/build-info-extractor-gradle)，这是不可能的。

构建信息描述符部署当前决定使用布尔变量，但自定义任一插件以执行您需要的操作应该相当容易。

# mysql - MySQL 前端软件

> ID：12582772
> 
> 赞同：0
> 
> 时间：2012-09-25T12:15:53.913
> 
> 标签：mysql

我有一个 MySQL 数据库，我需要一个类似 Excel 的前端，以便系统管理员可以将 Excel/CSV 文件直接导入数据库。

我曾经使用 Navicat，但这样做有一些问题。是否有任何具有相同功能的免费软件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:18:06.347

我也使用 Navicat for MySQL，坦率地说，我在导入/导出 Excel/CSV 数据时没有遇到问题……无论如何，你可以尝试[HeidiSQL](http://www.heidisql.com/)、[MySQL-Front](http://www.mysqlfront.de/)或[DevArt MySQL Studio](http://www.devart.com/dbforge/mysql/studio/) ……

# c++ - XPath 表达式失败。（C 中的 libxml2）

> ID：12582774
> 
> 赞同：0
> 
> 时间：2012-09-25T12:15:57.027
> 
> 标签：c++, c, xpath, libxml2

我在 C 程序中使用 libxml2 在 XML 文档中做一些事情。现在......如果我查看以下 XPath，我会得到一个空结果。

```
/scheda_conservatore[1]/patrimonio_archivistico[1]/lower_list[@type='risorsa_informativa']/risorsa_informativa_nested[@id='037006-001-2012-ri002']

```

但是...如果我查找以下 XPAth，我会得到一个非空结果，其中包含即使从第一个也应该匹配的元素。

```
/scheda_conservatore[1]/patrimonio_archivistico[1]/lower_list/risorsa_informativa_nested[@id='037006-001-2012-ri002']

```

现在...如果我一步一步检查我的 XPath 我有...

```
/scheda_conservatore[1] -> 非空节点集
/scheda_conservatore[1]/patrimonio_archivistico[1] -> 非空节点集
/scheda_conservatore[1]/patrimonio_archivistico[1]/lower_list[@type='risorsa_informativa'] -> 空节点集。

```

正如我之前所说，XML 文档确实包含一个有效路径，但此请求不匹配。更多：如果我要求 jEdit 或其他支持 XPath 的编辑器为我解决 XPath 表达式，结果是非空节点集。

我要疯了。我看了数千次 XPath 表达式，肯定有什么非常错误的地方，至少在我眼里是非常隐蔽的，即使它在别人看来肯定很精彩。

* * *

更多... 以下只是询问“类型”属性而不查看它的值，给出了有效的结果。但值也是正确的。/scheda_conservatore[1]/patrimonio_archivistico[1]/lower_list[@type]/risorsa_informativa_nested[@id='037006-001-2012-ri002']

* * *

这是较大 XML 文档的“导演剪辑版”

```
 <?xml version="1.0" encoding="iso-8859-1"?>
  <scheda_conservatore    anno_rilevazione="2012" stato="non-storicizzata">  
     <!-- scheda 2012 per Bologna -->  
     <patrimonio_archivistico> 
        <lower_list type="complesso_archivistico"> 
           <complesso_archivistico_nested id="037006-001-2012-ca001" inventariazione="n"> 
              <lower_list type="altro_luogo_collocazione"> 
                 <altro_luogo_collocazione_nested id="037006-001-2012-alc001"> 
                    <!-- altro luogo 1 per bologna 2012 -->  
                    <upper_list type="complesso_archivistico"> 
                       <upper ref="ca002"/>  
                       <upper ref="ca003"/> 
                    </upper_list>  
                    <ubicazione>sotterraneo da botola segreta</ubicazione>  
                    <bridge_list type="sede"> 
                       <bridge ref="s001"/> 
                    </bridge_list>  
                 </altro_luogo_collocazione_nested>  
              </lower_list>  
              <!-- complesso 1 per bologna 2012 -->  
              <identificazione> 
                 <denominazione>Archivi dei Comprensori della provincia di Bologna</denominazione>  
                 <lista_altre_denominazioni> 
                    <!-- Modificato -->  
                    <altra_denominazione>Archivi dei Comprensori bolognesi</altra_denominazione>  
                    <altra_denominazione>Archivi dei Comprensori felsinei</altra_denominazione> 
                 </lista_altre_denominazioni>  
                 <livello>Complesso di fondi, Superfondo</livello> 
              </identificazione>  
              <dati_giuridici> 
                 <tipologia>Pubblico</tipologia>  
                 <notificato_dichiarato presente="y"> 
                    <data>20100304T000000</data> 
                 </notificato_dichiarato> 
              </dati_giuridici>  
              <lower_list type="titolare"> 
                 <titolare_nested id="037006-001-2012-t001"> 
                    <!-- titolare 1 per bologna 2012 -->  
                    <upper_list type="complesso_archivistico"> 
                       <upper ref="ca001"/>  
                       <upper ref="ca002"/> 
                    </upper_list>  
                 </titolare_nested> 
              </lower_list> 
           </complesso_archivistico_nested>  
        </lower_list>  
        <lower_list type="risorsa_informativa"> 
           <risorsa_informativa_nested id="037006-001-2012-ri001"> 
              <bridge_list type="complesso_archivistico"> 
                 <bridge ref="ca001"/>  
                 <bridge ref="ca002"/> 
              </bridge_list>  
              <!-- risorsa 1 per bologna 2012 -->  
              <descrizione> 
                 <autore>CSR - Centro studi e ricerche</autore>  
                 <titolo>Atti degli uffici: inventario-mappa topografica del...</titolo>  
                 <anno indicativo="y">1986</anno>  
                 <qualifica> 
                    <opz pubbl="y">Strumenti di ricerca archivistici</opz> 
                 </qualifica>  
                 <scelta_multipla nome="standard"> 
                    <opz valore="AACR2"/>  
                    <opz valore="Altro">EAD</opz> 
                 </scelta_multipla>  
                 <descr_estrinseca>Dattiloscritto (relativo a: documentazione post 1945 conservata in Viale Martiri della Libert&amp;#x2026;)</descr_estrinseca> 
              </descrizione>  
              <lista_pubblicazioni> 
                 <pubblicazione> 
                    <edita presente="y">stampa</edita>  
                    <edita_stampa> 
                       <curatore/>  
                       <edito_in/>  
                       <luogo/>  
                       <data/>  
                       <pagine/>  
                       <sbn/>  
                       <note/> 
                    </edita_stampa>  
                    <url/>  
                    <ultima_consultazione>20120611T165400</ultima_consultazione>  
                    <nota>Nessuna nota</nota> 
                 </pubblicazione>  
                 <pubblicazione> 
                    <edita presente="y">web</edita>  
                    <edita_stampa/>  
                    <url>www.risorsainformativa.gov</url>  
                    <ultima_consultazione/>  
                    <nota>Nessuna nota web</nota> 
                 </pubblicazione> 
              </lista_pubblicazioni>  
              <informatizzazione presente="y"> 
                 <scelta_multipla nome="applicativi_utilizzati"> 
                    <!-- MODIFICATO!! -->  
                    <opz valore="Access (database)"/>  
                    <opz valore="Altro">eXtraWay</opz> 
                 </scelta_multipla>  
                 <partecipazione_sistemi_informativi presente="y"> 
                    <descrizione>x.dams</descrizione> 
                 </partecipazione_sistemi_informativi> 
              </informatizzazione> 
           </risorsa_informativa_nested>  
        </lower_list>  
        <lower_list type="intervento"> 
           <intervento_nested autor_sovraintendenza="y" id="037006-001-2012-i001" in_corso="y"> 
              <!-- intervento 1 per bologna 2012 -->  
              <descrizione>Restauro archivi dei comprensori della provincia di Bologna</descrizione>  
              <scelta_multipla nome="tipologia"> 
                 <opz valore="Riordino"/>  
                 <opz valore="Altro">Pulizia</opz> 
              </scelta_multipla>  
              <avvio>20111101T000000</avvio>  
              <conclusione_prevista>20120701T000000</conclusione_prevista>  
              <conclusione_effettiva/>  
              <autore/>  
              <promotore/>  
              <scelta_multipla nome="standard_descrittivi"> 
                 <opz valore="ISAD"/>  
                 <opz valore="Altro">Descrizione altro standard descrittivo</opz> 
              </scelta_multipla>  
              <informatizzazione presente="y"> 
                 <scelta_multipla nome="applicativo_utilizzato"> 
                    <opz valore="Access (database)"/>  
                    <opz valore="Altro">eXtraWay</opz> 
                 </scelta_multipla>  
                 <partecipazione_sistemi_informativi presente="y"> 
                    <descrizione>x.dams</descrizione> 
                 </partecipazione_sistemi_informativi> 
              </informatizzazione>  
              <bridge_list type="complesso_archivistico"> 
                 <bridge ref="ca001"/> 
              </bridge_list> 
           </intervento_nested>  
        </lower_list>  
        <note/> 
     </patrimonio_archivistico>  
     <note/>
     <?xw-meta Dbms="ExtraWay" DbmsVer="24.3.1" OrgNam="3D Informatica" OrgVer="1.0" Classif="1.0" ManGest="3.1" ManTec="0.0.4" DocType="" InsUser="admin" InsTime="20120910175739" ModUser="rtirabassi" ModTime="20120925145347"?>
     <?xw-crc key32=e324f581-406521b5?>

  </scheda_conservatore> 
```

* * *

好的，现在问题是假设另一个方面。可能我必须“关闭”这个并传递给另一个问题。

XPath 在原始（更广泛的）XML 文档上是正确的，现在我知道问题出在哪里，但不知道如何解决它。

*   如果我只在 XML 文档上执行一次 XPath 表达式，我就有了预期的结果；
*   如果我在同一个 XML 文档上执行相当大的 XPath 序列，复杂的 XPath（包含有关属性值的条件）会失败（那些并且只有那些）；

所以我看了一下我们是如何实现 XPath 评估的，发现 XPathContext 从来没有被释放。所以我更改了代码，以便在每次 XPath 评估后释放上下文并每次都创建一个新的，但是......没有任何变化。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:43:17.710

XPath 工作正常。您正在寻找`@id='037006-001-2012-ri002`并且属性值为`037006-001-2012-ri001`. 将 xml 更改为`ri002`匹配后，libxml 返回正确的 nodesetval。

如果它不能真正解决问题：也许`id`属性以特殊方式处理？尝试将其更改为`idx`. 请参阅[Java XML DOM：id 属性有何特别之处？](https://stackoverflow.com/questions/3423430/java-xml-dom-how-are-id-attributes-special)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:26:30.880

好的，找到问题。很抱歉这个误报。libxml2 可以正常工作，但在 XPath 评估周期期间，XML 文档发生了变化，这改变了场景，导致我相信 XPath 处理器出现故障。深度调试会话向我们展示了其他问题，只有具有属性条件（但不是最后一个条件）的 XPath 表达式失败。这促使我们找到了解决方案。我的错。对不起。

# r - 在 R 中，如何从多个文件创建数据框，其中每个文件包含单独类别的测量值？

> ID：12582778
> 
> 赞同：2
> 
> 时间：2012-09-25T12:16:03.617
> 
> 标签：r

假设我有一个文件`A`，其中包含 10 名接受某种治疗的受试者的测量结果，还有一个文件`B`包含另外 10 名接受不同治疗的受试者的测量结果。我想对方差进行单向分析，所以我使用 R 的`anova`/`aov`函数。但是，`aov`期望数据位于数据框中，其中第一列包含类别（即此处为`A`or `B`），第二列包含相应的样本。如何读取这两个文件并自动构建数据框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:30:28.433

这是我最近编写的一些代码来解决同样的问题。对我来说，数据位于名为 的 CSV 文件中`blahblah_series_trials.csv`，其中`blahblah`确定了实验类型。

```
filenames <- dir(".", "*.series_trials.csv")
types <- sub('.*?([a-zA_Z]*)_series_trials.*', '\\1', filenames)
data <- adply(data.frame(f=I(filenames), t=types), 1,
              with, cbind(read.csv(f), exp_type=t)) 
```

这会读取每个文件，`exp_type`根据它来自哪个文件添加一列，并将其全部绑定到一个数据框中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:16:03.617

我必须这样做，所以我在这里提出解决方案。

```
# Define a new function: files is a vector of file names.
# The return value is a data frame where the x column contains the category
# (the file name) and the y column contains the corresponding samples.
read.files <- function(files) {
    l <- lapply(files, function (x) read.table(x)$V1)
    return(data.frame(
        x = factor(unlist(lapply(seq_along(l), function(i) sapply(c(1:length(l[[i]])), function(x) files[i])))),
        y = unlist(l)
    ))
}

f <- read.files(c("A", "B"))

anova(aov(y ~ x, f)) 
```

f 的输出如下所示：

```
 x    y
1  A 10.0
2  A 10.1
3  A 11.1
4  A 12.9
5  A 10.7
6  A  9.6
7  A 10.4
8  A 10.8
9  A 10.1
10 A  9.3
11 B 20.5
12 B 21.1
13 B 25.2
14 B 13.2
15 B 13.3
16 B 17.4
17 B 18.9
18 B 20.2
19 B 23.8 
```

这适用于任意数量的文件，但每个文件仅限于单个列。这些文件可以有不同的行数。

# html - HTML5 离线应用缓存：强制刷新所有内容？

> ID：12582782
> 
> 赞同：3
> 
> 时间：2012-09-25T12:16:12.540
> 
> 标签：html, offline-caching, html5-appcache

我的小型 HTML5 应用程序需要在服务器上重新部署。我知道我只需触摸 .appcache 文件即可让每个浏览器在下次访问时更新到文件的最新版本。

清单如下所示：

```
CACHE MANIFEST
#Version: 201209251353

index.html
apple-touch-icon.png
css/styles.css
data/dump.bin
img/background.png
img/sprites.png
js/core.js
js/jquery-1.8.1.min.js
vid/walkthrough.mov 
```

为了“触摸”，我添加了一条评论 (#Version:)，我的意思是在内容更改时随时更新。

奇怪的是，一些文件被更新了。并非全部，例如，一位同事获得了最新的 core.js，但仍显示旧的 walkthrough.mov。

是否有一种简单的机制来强制更新缓存中的所有文件？

我在 SO 上找到了以下代码并将其包含在脚本中，希望它有所帮助。不知道它有多需要:(

```
 // Application cache refresh
    window.addEventListener('load', function(e) {

      window.applicationCache.addEventListener('updateready', function(e) {
        if (window.applicationCache.status == window.applicationCache.UPDATEREADY) {
          // Browser downloaded a new app cache.
          // Swap it in and reload the page to get the new hotness.
          window.applicationCache.swapCache();
          if (confirm('A new version of this site is available. Load it?')) {
            window.location.reload();
          }
        } else {
          // Manifest didn't changed. Nothing new to server.
        }
      }, false);

    }, false); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T13:20:13.477

您在清单和内容上设置了哪些[到期标题](http://httpd.apache.org/docs/2.2/mod/mod_expires.html)？

如果您已将（例如）到期时间设置为`vid/walkthrough.mov`未来一个月，并且该文件足够小以进入*浏览器*缓存（注意：不是*应用程序*缓存），那么浏览器将从版本刷新应用程序缓存在浏览器缓存中而不是再次通过网络请求它（如果它获取文件不到一个月）。

如果您在清单文件上设置了未来的到期日期，那么在某些浏览器的某些版本中，这可能会导致无法检测到更新的清单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-02T18:20:00.830

我正在使用但不漂亮的另一个解决方案是重命名 appcache 文件。然后所有内容都将被刷新，因为 appcache 将丢失。

# regex - RegularExpressionAttribute javascript 编码

> ID：12582783
> 
> 赞同：0
> 
> 时间：2012-09-25T12:16:18.280
> 
> 标签：regex, asp.net-mvc-3, attributes, custom-attributes

假设您的 ViewModel 中有一个属性名称：

```
[Required(ErrorMessage = "{0} is required.")]       
[RegularExpressionAttribute("[a-zA-Z äöåÄÖÅ]+", ErrorMessage = "Field {0} must contain only letters.")]      
public string Name{ get; set; } 
```

在某些浏览器中，这是有效的，因为它没有被编码：

```
<input class="name valid" data-val="true" data-val-regex="Field Name must contain only letters." data-val-regex-pattern="[a-zA-Z äöåÄÖÅ]+" data-val-required="Name is required." name="Name" type="text" value=""> 
```

但是在某些浏览器中，这会被编码，因此正则表达式不起作用

```
<input class="name valid" data-val="true" data-val-regex="Field Name must contain only letters." data-val-regex-pattern="[a-zA-Z &amp;#228;&amp;#246;&amp;#229;&amp;#196;&amp;#214;&amp;#197;]+" data-val-required="Name is required." name="Name" type="text" value=""> 
```

我调查并发现 javascript 有问题 [https://stackoverflow.com/a/4044768/1241400](https://stackoverflow.com/a/4044768/1241400)。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:21:38.457

您可以尝试 Unicode 转义：

```
"[A-Za-z \\u00E4\\u00F6\\u00E5\\u00C4\\u00D6\\u00C5]+" 
```

# html - 在块元素周围环绕文本

> ID：12582784
> 
> 赞同：3
> 
> 时间：2012-09-25T12:16:44.993
> 
> 标签：html, css

这里示例代码

```
<div id="field_one">
    <p>   ndustry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchange</p>

<div id="field_two">
    <ul>
        <li>one</li>
        <li>one</li>
        <li>one</li>
    </ul>
</div>
</div> 
```

CSS

```
div#field_one {
    width:400px; 
    height: 200px; 
    float: left;
}
div#field_two{ 
    float:right; 
    width:200px; 
    height: 100px;
    background: green
} 
```

我需要你将文本包裹在块元素周围，并与他处于同一水平；这是我想要实现的[jsfiddle上的链接，但文本应该包含该 div 元素](http://jsfiddle.net/h58Ra/14/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:32:22.270

您不能简单地将 a`margin`放在浮动元素上以重新定位它；这不会使它按您的意愿工作。

相反，更改元素的顺序：http: [//jsfiddle.net/h58Ra/26/](http://jsfiddle.net/h58Ra/26/)

编辑：

如果您无法更改 HTML 代码中元素的顺序，请考虑使用 jQuery 更改元素的顺序：http: [//jsfiddle.net/h58Ra/30/](http://jsfiddle.net/h58Ra/30/)

我在这里所做的 jQuery 将浮动元素保存在变量中，将其从旧位置删除，然后将其添加到父 div 中。

```
var field_two = $("#field_two");
field_two.remove();
$("#field_one").prepend(field_two); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:30:39.323

简单的答案 - 将您的 div#field2 放在 P 之前（并摆脱负上边距）

例如

```
<div id="field_one">
  <div id="field_two">
    <ul>
      <li>one</li>
      <li>one</li>
      <li>one</li>
    </ul>
  </div>
  <p>   ndustry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchange</p>
</div> 
```

从语义的角度来看，这并不好，但它是使其工作的最简单方法。

编辑：虽然我想到了，但 jsfiddle 中的 CSS 也有点损坏（在高度值和第二个浮点数之间缺少分号分隔符（这不是必需的）

# java - Java Spring Web 应用程序的报告框架

> ID：12582785
> 
> 赞同：1
> 
> 时间：2012-09-25T12:16:45.177
> 
> 标签：java, spring, spring-mvc

我正在开发一个 java spring web 应用程序。我想为它实现报告功能。我想在报告中实现的主要功能是我应该能够选择一些参数。取决于应生成的报告。参数选择的意思：我选择了2个日期，应该为这2个日期内的数据生成报告。这只是一个例子。谁能建议我应该使用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-10-31T09:49:44.990

在评论部分中关于在 JasperReports 中使用参数的问题从您的问题出发：

> 4.1。参数 参数用于将数据传递给报表引擎，它在其数据源中找不到 > 或者当数据根据不同的运行时 > > 条件发生变化时。
> 
> 我们还可以在报表填充操作中使用接收到的参数更改部分甚至整个 SQL 查询。

[博客](https://www.baeldung.com/spring-jasper)的第 4.1 节应该可以帮助您创建带有参数的查询语句。

# delphi - 如何追踪内存不足异常？

> ID：12582787
> 
> 赞同：3
> 
> 时间：2012-09-25T12:16:51.603
> 
> 标签：delphi

堆栈看起来像这样

```
:7576b9bc KERNELBASE.RaiseException + 0x58
:671c57ad ; F:\invariant data - not DropBox\3rd_party_vcl\MAD collection\madExcept\Dlls\madExcept32.dll
:671c953f ; F:\invariant data - not DropBox\3rd_party_vcl\MAD collection\madExcept\Dlls\madExcept32.dll
:71a80013 
System._ReallocMem(???,???)
:0040497d @ReallocMem + $45
System._DynArraySetLength
IdIOHandler.TIdIOHandler.ReadFromSource(True,-2,True)
IdIOHandler.TIdIOHandler.ReadLn(#$A,-1,16384,$D3B6FF0)
IdIOHandler.TIdIOHandler.ReadLn(nil)
IdCmdTCPServer.TIdCmdTCPServer.ReadCommandLine($7CC1AFB4)
IdCmdTCPServer.TIdCmdTCPServer.DoExecute($7CC1AFB4)
IdContext.TIdContext.Run
IdTask.TIdTask.DoRun
IdThread.TIdThreadWithTask.Run
IdThread.TIdThread.Execute
:004ccf91 HookedTThreadExecute + $2D
System.Classes.ThreadProc($7A486F84)
System.ThreadWrapper($7BFBEFF8)
:004cce73 CallThreadProcSafe + $F
:004ccee0 ThreadExceptFrame + $3C
:7559339a kernel32.BaseThreadInitThunk + 0x12
:76f39ef2 ntdll.RtlInitializeExceptionChain + 0x63
:76f39ec5 ntdll.RtlInitializeExceptionChain + 0x36 
```

这些都不是我的代码。它看起来像 INDY 代码，但我意识到，如果我的代码有问题，那么由于我占用了所有内存，异常仍然可以在其他地方抛出。

我正在运行 MAD，除了泄漏检测。如果我运行一段时间并关闭程序，它会报告没有泄漏。如果我让程序运行几个小时，我会得到内存不足的异常。

我只有两次对 Create() 的调用，它们都在计时器处理程序中，并且我已将计时器持续时间设置为一秒以进行压力测试。处理程序非常简单，并且总是 Free() 创建的对象。

除了计时器处理程序的代码之外，我还有什么可以看的吗？

这是代码如果有人真的需要看的话……这是我唯一的两个`Create()`对象……

```
procedure TMainForm.ServerAliveTimerTimer(Sender: TObject);

   var timestamp : LongInt;
       ADConnection: TADConnection;
       theDialogForm : TDialogFormForm;
begin
   ServerAliveTimer.Enabled := False;
   TraceInfo('ServerAliveTimer expired after ' + IntToStr(ServerAliveTimer.Interval div 1000) + ' seconds');

   try
      ADConnection := TADConnection.Create(Self);
      ADConnection.DriverName := 'mysql';
      ADConnection.Params.Add('Server=' + MAIN_STOREROOM_IP_ADDRESS);
      ADConnection.Params.Add('Database=XXX');
      ADConnection.Params.Add('User_Name=XXX');
      ADConnection.Params.Add('Password=XXX');
      ADConnection.Params.Add('Port=3306');
      ADConnection.Connected := True;

   except
      on E : Exception do
      begin
         StopAllTimers();

         TraceError('Database error. Failed to create ADO connection');

         ADConnection.Free();

         theDialogForm := TDialogFormForm.Create(Nil);
         theDialogForm.ShowTheForm('Database problem'+#13+#10+''+#13+#10+
                                   E.ClassName+#13+#10+
                                   E.Message);

         StopTheApplication();
         Exit;
      end;
   end;

   if isMainStoreRoom then
   begin
      CheckIfStoreRoomIsAlive(SECONDARY_STOREROOM_IP_ADDRESS);
   end
   else
   begin
      CheckIfStoreRoomIsAlive(MAIN_STOREROOM_IP_ADDRESS);
   end;

   // Now, update our own timestamp
   try
      timestamp  := GetCurrentUnixTimeStamp();
      ADConnection.ExecSQL('UPDATE server_status SET alive_timestamp="' + IntToStr(timestamp) + '" WHERE ip_address="' + ipAddress + '"');

   except
      on E : Exception do
      begin
         TraceError('Database error. Failed to upate timestamp for ip_address = "' +
                        ipAddress + ' in table "server_status"' + #13#10#13#10 +
                        E.ClassName+#13+#10+
                        E.Message);
         ADConnection.Free();
         Exit;
      end;
   end;

   ADConnection.Free();
   ServerAliveTimer.Enabled := True;
end;     // ServerAliveTimerTimer() 
```

和

```
procedure TMainForm.CheckEndOfScheduleTimerTimer(Sender: TObject);
   var ADConnection : TADConnection;
       ADQuery : TADQuery;
       secondsSinceMidnight : LongInt;
       timeNow : LongInt;
       today : LongInt;
       checkoutDay : LongInt;
       checkoutExpireTime : LongInt;
       theDialogForm : TDialogFormForm;
       rfidTag : String;
       i : integer;
begin
   CheckEndOfScheduleTimer.Enabled := False;

   ADConnection := Nil;
   ADQuery := Nil;

   try
      TraceInfo('CheckEndOfScheduleTimer expired after ' + IntToStr(CheckEndOfScheduleTimer.Interval div 1000) + ' seconds');

      secondsSinceMidnight := GetSecondsSinceMidnight();
      timeNow := GetCurrentUnixTimeStamp();
      today := timeNow - secondsSinceMidnight;

      ADConnection := TADConnection.Create(nil);
      ADConnection.DriverName := 'mysql';
      ADConnection.Params.Add('Server=' + MAIN_STOREROOM_IP_ADDRESS);
      ADConnection.Params.Add('Database=XXX');
      ADConnection.Params.Add('User_Name=XXX');
      ADConnection.Params.Add('Password=XXX');
      ADConnection.Params.Add('Port=3306');
      ADConnection.Connected := True;

      ADQuery := TADQuery.Create(ADConnection);
      ADQuery.Connection := ADConnection;
      ADQuery.Open('SELECT * FROM tagged_chemicals');
      ADQuery.FetchAll();

      for i := 0 to Pred(ADQuery.Table.Rows.Count) do
      begin
         if ADQuery.Table.Rows[i].GetData('checked_out') = 'N' then
            Continue;

         checkoutDay        := ADQuery.Table.Rows[i].GetData('checkout_day');
         checkoutExpireTime := ADQuery.Table.Rows[i].GetData('checkout_expire_time');

         if (today + secondsSinceMidnight) > (checkoutDay + checkoutExpireTime) then
         begin
            rfidTag := ADQuery.Table.Rows[i].GetData('rfid_tag');

            TraceInfo('End of pouring time for RFID tag (' + IntToStr(secondsSinceMidnight) + ' seconds after midnight');

            ADConnection.ExecSQL('UPDATE tagged_chemicals ' +
                                    'SET checked_out="N", ' +
                                        'checkout_day="0", ' +
                                        'checkout_expire_time="0" ' +
                                 ' WHERE  rfid_tag="' + rfidTag + '"');
         end;
      end;

      ADQuery.Free();
      ADConnection.Free();

   except
      On E: Exception do
      begin
         ADQuery.Free();
         ADConnection.Free();
         TraceError('Databse exception (' + E.ClassName + ') : "' + E.Message + '"');

         theDialogForm := TDialogFormForm.Create(Nil);
         theDialogForm.ShowTheForm('Database error when checking end of pouring time'+#13+#10+''+#13+#10+
                    E.ClassName+#13+#10+
                    E.Message);
      end;
   end;

   CheckEndOfScheduleTimer.Enabled := True;
end;     // CheckEndOfScheduleTimerTimer() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:47:17.697

尝试使用[Sysinternals](http://technet.microsoft.com/en-us/sysinternals/bb545027)工具 VMMap 和 Process Explorer，这应该会告诉您内存的去向。

# html - 使用 iOS 6 从横向到纵向的文本输入占位符属性

> ID：12582788
> 
> 赞同：7
> 
> 时间：2012-09-25T12:16:53.977
> 
> 标签：html, ios6, landscape, viewport, placeholder

更新到 iOS 6 后，我遇到了一个让我发疯的问题。

看起来任何时候我在输入字段上都有属性“占位符”，同时从纵向旋转到横向并再次回到纵向时，页面会在左侧移动一些像素，从而导致水平条。

经过长时间的研究，我得出结论，它必须与元视口相关，因为每次我使用 content="width=device-width" 时都可以正常工作。

PS是的，我真的需要在输入上有一个百分比宽度，以便进行液体设计:)

这是重新创建问题的示例。谢谢...

```
<html>
<head>
    <title>test</title>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport"/>
</head>
<body>

    <div style="width:100%;background-color:red">
        <input id="testInput"  placeholder="test" style="width:90%;" />
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T04:06:46.230

应用“溢出：隐藏；” 在包含元素上为我解决了这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T01:47:42.063

我发现了这个问题。并修复它。

（网址：[http](http://mooki83.tistory.com/2656550) ://mooki83.tistory.com/2656550 （韩文））

[测试网址： http](http://mooki83.da.to/m/testios6.html) ://mooki83.da.to/m/testios6.html

javascript：

```
/* Optimized PLACEHOLDER for iOS6 - Mooki ( http://mooki83.tistory.com ) */

$(document).ready(function(){
    $(window).bind("orientationchange.fm_optimizeInput", fm_optimizeInput);
});

function fm_optimizeInput(){
    $("input[placeholder],textarea[placeholder]").each(function(){
        var tmpText = $(this).attr("placeholder");
        if ( tmpText != "" ) {
            $(this).attr("placeholder", "").attr("placeholder", tmpText);
        }
    })
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T14:36:10.910

CSS 修复：

```
body>div {
    overflow-y: auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-19T06:38:40.173

非js回答

添加`overflow:hidden`到父元素，它会像一个魅力

# html - 未定义的属性名称 (xmlns)

> ID：12582792
> 
> 赞同：4
> 
> 时间：2012-09-25T12:17:03.103
> 
> 标签：html, xml, eclipse, sdk, html-validation

这是我的 HTML 页面的开头：

```
1\. <?xml version="1.0" encoding="utf-8" ?>
2\. <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
3\. <html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
4\.     (...)
5\. </html> 
```

不管有没有这个`<?xml ... ?>`部分，Eclipse 在第**3 行给我返回一个警告事件**

> 未定义的属性名称 (xmlns)。

这个`xmlns`属性是正确验证所必需的，所以我不明白为什么 Eclipse 返回一个警告。

此外，我将*Eclipse Indigo 3.7.2*与 Eclipse 数据库中的最后一个 PHP Developer Tool 一起使用。

有人知道如何删除此警告，或找到跳过此警告的方法吗？

感谢阅读和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T20:34:42.730

这里有类似案例的错误：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=313859](https://bugs.eclipse.org/bugs/show_bug.cgi?id=313859)

```
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
<head>
<title>Title of the document</title>
</head>

<body>
<div>The content of the document.</div>
</body>

</html> 
```

应该验证。在 Eclipse Juno 和此处验证良好：http: [//validator.w3.org](http://validator.w3.org)。

# linux - 限制Linux下R中的内存使用

> ID：12582793
> 
> 赞同：15
> 
> 时间：2012-09-25T12:17:07.797
> 
> 标签：linux, r, memory-management

我们在 linux 集群环境中运行 R。当用户无意中使用 R 进程占用了所有内存时，头节点有几次挂起。有没有办法限制linux下的R内存使用？我宁愿不建议使用全局 ulimit，但这可能是唯一的出路。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-06-29T10:44:44.400

[`unix::rlimit_as()`](https://rdrr.io/cran/unix/man/rlimit.html)允许使用在 shell中也使用的[相同机制为正在运行的 R 进程设置内存限制。](http://linux.die.net/man/2/getrlimit)不支持`ulimit`Windows 和[macOS 。](https://stackoverflow.com/q/3274385/946850)

在我的`.Rprofile`我有

```
unix::rlimit_as(1e12, 1e12) 
```

将内存使用限制为 ~12 GB。

## 在那之前...

[`ulimit`](https://github.com/krlmlr/ulimit)我创建了一个具有类似功能的小型 R 包。

使用从 GitHub 安装它

```
devtools::install_github("krlmlr/ulimit") 
```

要将 R 可用的内存限制为 2000 MiB，请调用：

```
ulimit::memory_limit(2000) 
```

现在：

```
> rep(0L, 1e9)
Error: cannot allocate vector of size 3.7 Gb 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-25T12:53:29.310

`?"Memory-limits"`建议使用`ulimit`or `limit`。

有一个命令行标志：`--max-mem-size`可以设置*初始*限制。这可以由用户在会话期间通过使用来增加`memory.limit`。

# c++ - C++ / Windows：HeapAlloc() 用于无争用的每线程堆

> ID：12582794
> 
> 赞同：2
> 
> 时间：2012-09-25T12:17:13.757
> 
> 标签：c++, windows, visual-c++, heap-memory, crt

我有一个使用`boost::thread`. 出于性能原因，我希望每个线程都有一个独立的堆。

我可以使用创建堆，`HeapCreate()`但不清楚如何将其连接到 CRT 库，以便在创建`new`的`malloc`堆上分配内存。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:33:41.040

> 如何才能做到这一点？

如果不完全替换整个内存分配器，就无法完成。例如，可扩展内存管理器[Hoard](http://www.hoard.org/)就是这样做的。但是替换内存分配器并不适合胆小的人。

如果您想使用 per-thread heap with `HeapCreate`，并且您的分配/解除分配代码被合理地包含，那么您可以简单地在您的线程代码中显式调用`HeapAlloc`和调用。`HeapFree`但是，如果这与性能良好的标准 CRT 分配器一样快，我会感到惊讶。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T12:34:28.007

不幸的是，没有安全且记录在案的方法来替换 CRT 堆。仅限黑客。

对于`new`/`delete`语句，您可以提供全局`operator new()`，`operator delete()`它将根据当前线程在所需的堆中分配/释放内存。线程本地存储（TLS）通常用于存储线程本地堆句柄。

对于`malloc`/`free`没有这样的记录方式来替换。大多数 hack 都在[此处](https://stackoverflow.com/questions/858592/windows-malloc-replacement-e-g-tcmalloc-and-dynamic-crt-linking)进行了描述。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T12:34:42.860

您可以提供一个“全局运算符 new”，您可以使用它来检查您所在的线程并从适当的堆中返回内存。当然，您还需要提供自己的“全局删除”。

当然，这只会“捕获”实际使用 new 和 delete 的情况:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T15:26:05.577

另一种方法：使用多个 DLL，除了名称之外，每个 DLL 都相同。每个线程加载不同的 DLL。

# ada - 让 Ada（用 GNAT 编译）从当前目录之外导入文件？

> ID：12582796
> 
> 赞同：10
> 
> 时间：2012-09-25T12:17:18.637
> 
> 标签：ada, gnat

我正在做大学编程课程的介绍，选择的语言是 Ada。我正在用 Kate 编码并使用 GNAT 4.6.3 进行编译。我们必须为我们的程序使用教师提供的库，如下所示：

```
with foo;
use  foo; 
```

当然，该文件`foo.adb`必须包含在与我的源文件相同的目录中。由于多个项目依赖于这个库，并且我喜欢将每个项目保存在自己的子目录中，因此我必须将库文件复制到每个新项目中。更不用说我的库代码和源代码都在同一个目录中。

那么有什么办法可以去：

```
with ../../lib/foo
use ../../lib/foo 
```

?

我试过环顾四周，但我发现的只是关于编译器选项的东西。我宁愿不必搞乱这些，特别是因为只有某些项目需要这个特定的库，所以将它添加到全局编译器设置并让编译器毫无意义地搜索它不需要的路径是没有意义的不需要搜索。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T17:21:20.407

我会使用带有命令行的 GNAT 项目工具`gnatmake`。

我只是设置了一个小例子（所以我可以确定我所说的有效！）。我有 3 个目录；`teacher/`包含教师提供的源代码，我假设您不想更改并且可能无论如何都没有写入权限，`jacks_lib/`包含`teacher.gpr`指向`teacher/`（您也可以将自己的库代码放在那里）并`jack/`包含您的代码`main.adb`和`main.gpr`.

`jacks_lib/teacher.gpr`：

```
project Teacher is
   --  This project calls up the teacher-supplied source.

   --  This is a list of paths, which can be absolute but
   --  if relative are relative to the directory where this .gpr
   --  is found.
   for Source_Dirs use ("../teacher");

   --  Keep the built objects (.ali, .o) out of the way. Use the -p
   --  gnatmake flag to have directories like this built
   --  automatically.
   for Object_Dir use ".build";
end Teacher; 
```

`jack/main.gpr`：

```
--  teacher.gpr tells where to find library source and how to build it.
with "../jacks_lib/teacher";

project Main is
   --  for Source_Dirs use ("."); (commented out because it's the default)

   --  Keep built objects out of the way
   for Object_Dir use ".build";

   --  Build executables here rather than in Object_Dir
   for Exec_Dir use ".";

   --  What's the main program? (there can be more than one)
   for Main use ("main.adb");
end Main; 
```

`jack/main.adb`：

```
with Foo;
procedure Main is
begin
   null;
end Main; 
```

那么，在`jack/`，

```
$ gnatmake -p -P main.gpr
object directory "/Users/simon/tmp/jacks_lib/.build" created for project teacher
object directory "/Users/simon/tmp/jack/.build" created for project main
gcc -c -I- -gnatA /Users/simon/tmp/jack/main.adb
gcc -c -I- -gnatA /Users/simon/tmp/teacher/foo.ads
gnatbind -I- -x /Users/simon/tmp/jack/.build/main.ali
gnatlink /Users/simon/tmp/jack/.build/main.ali -o /Users/simon/tmp/jack/main 
```

我应该补充一点，我在 Mac OS X 上使用 GCC 4.7.0，但这应该适用于任何最近的 GNAT。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T13:00:31.843

编译器选项*是*您管理构建源代码位置的方式 - 定义“搜索路径” - 特别是基于 gcc（如 GNAT）和大多数其他编译器的“-I”（包含）选项。

如果您是从命令行构建，则只需：

```
gnatmake -I../../lib/foo -Iother/path -Iyet/another/path project1_main.adb

gnatmake -I../../lib/foo -Isome/path -Iyet/another/path project2_main.adb 
```

如果您使用 GPS (GNAT Programming Studio)，则打开 Project Properties 对话框，选择 Source dirs 选项卡，然后在其中添加搜索路径。（您也可以直接直接编辑项目属性文件（“.gpr”），但我很少这样做。YMMV。）编译器设置很容易在每个项目的基础上设置，因此不存在“全局编译器设置”问题哪一个必须关心自己。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-26T08:09:49.180

到目前为止，答案中没有明确提到它，所以我会说：

Ada 中的`with`&`use`子句***没有声明***废弃和使用过的单元的位置，只***声明***它们存在。

当涉及到实际查找单元时，这完全取决于`make`脚本、`.gpr`文件和编译选项或您想出的任何其他内容。

这就是 Ada 如何创建一定程度的代码可移植性（通过不将代码绑定到目录结构！），您只需要更正编译选项 :)

此外，了解编译器选项几乎从来都不是一个坏主意，它会在 Ada 和许多其他语言中为您提供良好的服务。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-25T16:09:27.733

放大@MarcC 的答案，[*GNAT 用户指南*](http://gcc.gnu.org/onlinedocs/gcc-4.6.3/gnat_ugn_unw/)`gnatmake`在第 6 章第 6.2 节gnatmake*的开关：源和库搜索路径开关*下进行了介绍；该指南应包含在您的发行版中。

该`gnatmake`命令是一个方便的目标`make`，如本[例](http://home.roadrunner.com/~jbmatthews/gtk/lady.html#Makefile)所示。

# backbone.js - yeoman install somePackage 是如何工作的？

> ID：12582798
> 
> 赞同：0
> 
> 时间：2012-09-25T12:17:44.210
> 
> 标签：backbone.js, handlebars.js, yeoman

当我运行时，`yeoman install handlebars`我得到以下输出：

```
Running "bower:install:handlebars" (bower) task
bower cloning git://github.com/components/handlebars.js
bower cached git://github.com/components/handlebars.js
bower fetching handlebars 
```

它不会将把手复制到当前项目的插件或供应商目录。它退出而没有错误消息。这是正确的行为吗？

对我来说，这似乎是一个错误，所以我在 yeoman 的 github 页面上创建了一个[问题。](https://github.com/yeoman/yeoman/issues/542)但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:43:47.227

为了解决这个问题，这就是我所做的。我意识到 yeoman 没有为我安装 bower，它依赖于 bower 来安装库。因此，要解决此问题 - 像这样手动安装 bower：`npm install bower -g`

# android - 无法获取相机运行状态

> ID：12582799
> 
> 赞同：1
> 
> 时间：2012-09-25T12:17:47.067
> 
> 标签：android, camera

要检查相机是否正在运行，我正在编写这些代码

```
ActivityManager actvityManager = (ActivityManager)this.getSystemService(ACTIVITY_SERVICE);
    String packageName = actvityManager.getRunningTasks(1).get(0).topActivity.getPackageName();
    if(packageName.equals("android.hardware.camera")||packageName.equals("com.android.camera")){
        Camera_status = "STATUS_ON";
        System.out.println("===on===");
    }else{
        Camera_status = "STATUS_OFF";
        System.out.println("====off====");
    } 
```

通过使用它，我能够在 android 模拟器中获得正确的结果，但是在真实设备中进行测试时，我无法获得正确的结果。根据CommonsWare在[此处](https://stackoverflow.com/questions/7885367/camera-activity-not-found)发布的答案，我认为他是正确的。所以朋友们可能知道如何以编程方式获取相机开/关状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:27:06.857

试试这个它的工作！

```
Camera _camera;
    boolean qOpened = false;
    try {
        _camera=Camera.open();
        qOpened=(_camera!=null);
        if(qOpened){
            Camera_status = "STATUS_OFF";
        }else{
            System.out.println("==nothing to do====");
        }

    } catch (Exception e) {
        Camera_status = "STATUS_ON";
        System.out.println("=====Camera running=====");
    } 
```

# php - 如何使用 PHP strtotime & date 函数转换 Datepicker 日期？

> ID：12582800
> 
> 赞同：2
> 
> 时间：2012-09-25T12:17:47.690
> 
> 标签：php, datepicker

我在前端使用 datePicker 进行日期选择。我已经显示了这样的日期：

```
September,30 2012 
```

但是当我在 PHP 中收到它并尝试将其转换为日期格式时，它会生成错误的日期。

```
$var = date('Y-m-d', strtotime('September,30 2012')); 
```

以上给了我 1970/01/01。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T12:21:27.363

只需`,`从日期选择器的输出中删除..就可以了

```
$var = date('Y-m-d', strtotime('September 30 2012')); 
```

给你 2012-09-30

并删除逗号，使用

```
$daf = 'September 30 2012';
echo str_replace(',','',$daf); // gives September 30 2012 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:24:49.137

这可能有效

```
 $var = date('F d y', strtotime('September 30 2012')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:23:12.327

我认为它是这样做的逗号......删除逗号给你正确的答案..试试这个

```
echo date('Y-m-d',strtotime('September 30 2012')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T12:25:03.213

只需删除逗号即可获得解决方案

```
<?php
    $date = 'September,30 2012';
echo $var = date('Y-m-d', strtotime('September-30-2012')); //this gave me 1970/01/01 
```

或者只是删除它在两种情况下都有效的破折号

[**这是工作解决方案**](http://codepad.viper-7.com/67PVTE)

# delphi - 在 Delphi 中获取闪存盘的制造商序列号

> ID：12582806
> 
> 赞同：0
> 
> 时间：2012-09-25T12:18:08.777
> 
> 标签：delphi, usb, serial-number

我已经用 Windows XP sp3 在我的 USB 闪存盘上尝试了[此问题](https://stackoverflow.com/questions/4292395/how-to-get-manufacturer-serial-number-of-an-usb-flash-drive)上显示的所有代码，它总是返回此消息“I/O 错误 105”而不显示任何序列号。解决办法是什么 ？

# hadoop - 旧 API 到新 API

> ID：12582810
> 
> 赞同：4
> 
> 时间：2012-09-25T12:18:25.750
> 
> 标签：hadoop, mapreduce

[我的原始问题](https://stackoverflow.com/questions/12577128/how-to-access-mapper-counter-value-in-a-reducer/12579138#comment16954278_12579138)

[因为在这个问题中只找到了对该问题](https://stackoverflow.com/questions/5450290/accessing-a-mappers-counter-from-a-reducer?rq=1)的可行 答案，而答案在旧 API 中。所以这迫使我提出**一个愚蠢的问题**，将这些行翻译成**New API**：

```
private long mapperCounter;

     @Override
     public void configure(JobConf conf) {
               JobClient client = new JobClient(conf);
               RunningJob parentJob = 
               client.getJob(JobID.forName( conf.get("mapred.job.id") ));
               mapperCounter = parentJob.getCounters().getCounter(MAP_COUNTER_NAME);
      } 
```

注意：我希望在 reducer 中使用此代码，因此可用的继承函数有：

```
 @Override
    protected void setup(Context context) throws IOException,
            InterruptedException {

    }

    @Override
    protected void cleanup(Context context) throws IOException,
            InterruptedException {

    }

    @Override
    public void run(Context context) throws IOException,
            InterruptedException {
        Job job=new Job(context.getConfiguration());

    }

    @Override
    public void reduce(ImmutableBytesWritable key,Iterable<ImmutableBytesWritable> result,Context context )
    {

    } 
```

谢谢 ：） ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:34:38.930

[本](http://www.slideshare.net/sh1mmer/upgrading-to-the-new-map-reduce-api)演示文稿总结了新旧 API 之间的变化。

# internationalization - 字段信息和错误的 i18n 消息 ID 是什么？

> ID：12582812
> 
> 赞同：1
> 
> 时间：2012-09-25T12:18:31.407
> 
> 标签：internationalization, playframework-2.0

我想为`views.html.helpers._`输入生成的标记翻译默认约束和错误消息。我在文档中找不到它，并且已经开始浏览代码，但是如果有人比我快，请回答并获得奖励。

这是示例模板代码：

```
@inputText(regForm("Login"), 'id-> "username", 'placeholder -> "Login", 'required -> "yes", 'autofocus -> "yes") 
```

这是生成的 HTML：

```
<div id="username_field" class="error clearfix">
<div class="input">

<input type="text" id="username" name="Login" value="" id="username" placeholder="Login" required="yes" autofocus="yes">

  <span class="help-inline">This field is required</span>
  <span class="help-block">Required</span>
</div> 
```

我想翻译出现在最后两个跨度中的文本。

**编辑：我已经**[从文档](https://github.com/playframework/Play20/wiki/ScalaI18N)中 知道翻译是如何工作的。没有说明的是，对于未满足字段约束的消息（错误消息）和一般信息，显示了默认消息 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:35:18.133

您必须在自己的文件中覆盖[源消息文件](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/resources/messages)`messages.xy`中的标签。

如果默认语言的文件没有 lang 扩展名，也请看一下[其他答案。](https://stackoverflow.com/questions/11263712/overriding-default-i18n-messages-for-play-2-0/11265036#11265036)AFAIK 它在那个答案之后得到了修复，但是如果你检查它并在评论中确认当前状态会很酷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:05:21.520

浏览我在文档中找到的代码。[在Constraints](http://www.playframework.org/documentation/api/2.0.3/scala/index.html#play.api.data.validation.Constraints) trait 文档中简短地提到了这些键。您必须展开约束生成器的定义才能阅读它。[表单处理文档](https://github.com/playframework/Play20/wiki/ScalaForms)中介绍了如何使用约束。但是还有另一种方法没有涵盖 - 通过使用像这里这样的输入属性：

```
@inputText(regForm("Login"), 'id-> "username", 'placeholder -> "Login", 'required -> "yes", 'autofocus -> "yes") 
```

以下是`/Play20/framework/src/play/src/main/scala/play/api/data/validation/Validation.scala`（主分支）中实现的 ID：

*   `nonEmpty`（即有`'required`属性的字段）
    *   信息：`constraint.required`
    *   错误：`error.required`
*   `min`（即带有`'min`属性的字段；带有一个参数的消息）
    *   信息：`constraint.min(minValue)`
    *   错误：`error.min(minValue)`
*   `max`（即带有`'max`属性的字段；带有一个参数的消息）
    *   信息：`constraint.max(maxValue)`
    *   错误：`error.max(maxValue)`
*   `minLength`（即有`'minLength`属性的字段）
    *   信息：`constraint.minLength(length)`
    *   错误：`error.minLength(length)`
*   `maxLength`（即有`'maxLength`属性的字段）
    *   信息：`constraint.maxLength(length)`
    *   错误：`error.maxLength(length)`
*   `pattern`（即有`'regex`属性的字段）
    *   信息：`constraint.pattern(regex)`
    *   错误：`error.pattern(regex)`

上面提到的属性是在 HTML5 中引入的，所以它们不会被所有浏览器处理，但是框架验证会处理它。

# asp.net-mvc - VB.NET - 使用 ListBoxFor 和 DropDownList

> ID：12582822
> 
> 赞同：0
> 
> 时间：2012-09-25T12:19:00.280
> 
> 标签：asp.net-mvc, vb.net, html.listboxfor

我对这个 ASP.net MVC 的东西很陌生，并且真的被困在 ListBoxFor 和 DropDownListFor 上。

我该如何使用它们？有什么例子吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T12:33:49.673

这真的没那么难。与往常一样，您从定义视图模型开始：

```
Public Class MyViewModel
    Public Property SelectedItems As IEnumerable(Of String)
    Public Property SelectedItem As String
    Public Property Items As IEnumerable(Of SelectListItem)
End Class 
```

然后是控制器：

```
Public Class HomeController
    Inherits System.Web.Mvc.Controller

    Function Index() As ActionResult
        Dim model = New MyViewModel With {
            .Items = {
                New SelectListItem() With {.Value = "1", .Text = "item 1"},
                New SelectListItem() With {.Value = "2", .Text = "item 2"},
                New SelectListItem() With {.Value = "3", .Text = "item 3"}
            }
        }
        Return View(model)
    End Function

    Function Index(model As MyViewModel) As ActionResult
        ' Here you can use the model.SelectedItem which will
        ' return you the id of the selected item from the DropDown and 
        ' model.SelectedItems which will return you the list of ids of
        ' the selected items in the ListBox.
        ...
    End Function
End Class 
```

最后是相应的强类型视图：

```
@ModelType MvcApplication1.MyViewModel

@Using Html.BeginForm()
    @Html.DropDownListFor(Function(x) x.SelectedItem, Model.Items)
    @Html.ListBoxFor(Function(x) x.SelectedItems, Model.Items)
    @<input type="submit" value="OK" />
End Using 
```

# c - 访问 C 程序中的字符串

> ID：12582826
> 
> 赞同：0
> 
> 时间：2012-09-25T12:19:16.957
> 
> 标签：c, string, pointers

假设我有一个字符串“nice to meet you!”，我想打印不带第一个字母的字符串，而不是只打印“ice to meet you!”。

我尝试如下操作，但是程序在编译运行后会自行关闭。

```
#include <stdio.h>

int main(void)
{
 char *s = "nice to meet you!";

 printf("Original string: %s\n",*s);

 printf("Pointer plus one gives: %s\n", *(s+1));

 return 0;
} 
```

我的程序有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T12:21:35.403

你应该打印`s`而不是`*s`

%s 格式标记需要一个指针。 `s`是指向字符串的指针，而`*s`是字符串中第一个字符的值。 `printf("%s", *s)`将从字符串中第一个字符的字符代码的地址开始打印一个字符串。此地址可能对您的进程无效，因此您将获得未处理的异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T12:25:27.567

*s 取消引用导致 char 的指针。所以尝试以下方法：

```
#include <stdio.h>

int main()
{
 char *s="nice to meet you!";

 printf("Original string: %s \n",s);
 printf("Original first char: %c\n", *s);

 printf("Pointer plus one gives: %s\n", (s+1));

 return 0;
} 
```

来看看区别。

问候

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T12:22:22.940

嗯，您使用指向字符串指针的指针而不是指向字符串的指针（使用 printf）。尝试

```
printf ("aaa %s bbb\n", s ); 
```

或者

```
printf ("aaa %s bbb\n", s+1 ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T12:23:50.153

> 我尝试如下操作，但是程序在编译运行后会自行关闭。

通过终端运行您的程序。你用什么来编译和运行你的程序？

> 我的程序有什么问题？

*(s+1) 是单个字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T13:59:29.667

代码正在做你告诉它做的事情，我想你可能不明白你告诉它做什么。

```
char *s = "nice to meet you!";

// s is a pointer to a character
// s* is the character that "s" points to 
```

您已`s`指向字符“n”。`s`也**恰好**指向以 NULL 结尾的字符串文字中的第一个字符。

```
printf("Original character: %c\n",*s); //Note the %c, we're looking at a character
output-> Original character: n

printf("Original string: %s\n",s); //Note the %s, and we're feeding the printf a pointer now
output-> Original string: nice to meet you! 
```

当涉及到偏移量时：

```
*s     = the character s is pointing at, 'n'
*(s+1) = the next character s is pointing at, 'i' 
```

与：

```
s     = the address of the string "nice to meet you"
(s+1) = the address of the string "ice to meet you" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T12:26:00.853

试试这个，只需将 dowhatopwant 函数与您的字符串一起使用：

```
void my_putchar(char c)
{
  write(1, &c, 1);
}

void dowhatopwant(char *str)
{
  int cnt = 1;
  while (s[cnt])
  {
     my_putchar(s[cnt]);
     cnt++;
  }
} 
```

# user-interface - 如何在黑莓中使主屏幕透明？

> ID：12582828
> 
> 赞同：0
> 
> 时间：2012-09-25T12:19:23.060
> 
> 标签：user-interface, blackberry, java-me

我想创建一个应用程序，当某些事件发生时我想在其中获得一个对话框。我能够得到对话框，但在这之后我得到一个白屏。我不要那个屏幕。有什么办法可以使屏幕透明吗？

```
public final class LoadingPopupScreen extends PopupScreen
{
    Background  background;
    HorizontalFieldManager hfm;
    int width;
    int height;
    public LoadingPopupScreen( int width, int height)
    {  
        super(new VerticalFieldManager());
        background = BackgroundFactory.createLinearGradientBackground(Color.ROYALBLUE, Color.BLACK, Color.ROYALBLUE, Color.BLACK);
        setBackground(background);
        add(new LabelField("ROAMING"));
        add(new SeparatorField());
        add(new SeparatorField());
        hfm = new HorizontalFieldManager();
        Bitmap bitmap = Bitmap.getBitmapResource("splash.png");
        BitmapField  bit= new BitmapField(bitmap);
        hfm.add(bit);
        hfm.add(new LabelField("want to check In Roaming or not?"));
        add(hfm);
        hfm = new HorizontalFieldManager(Manager.FIELD_HCENTER);
        ButtonField ok = new ButtonField("OK", HorizontalFieldManager.FIELD_HCENTER);
        ButtonField cancel = new ButtonField("CANCEL", HorizontalFieldManager.FIELD_HCENTER);
        hfm.add(ok);
        hfm.add(cancel);
        add(hfm);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:49:47.310

我已经使用：

```
Ui.getUiEngine().pushGlobalScreen(new LoadingPopupScreen(300,300), 0, UiEngine.GLOBAL_QUEUE); 
```

# c# - 跟踪全局鼠标事件以进行拖放处理

> ID：12582848
> 
> 赞同：0
> 
> 时间：2012-09-25T12:20:11.900
> 
> 标签：c#, events, mouse, hook

> **可能重复：**
> [将 Drop 从 .NET 应用程序拖放到资源管理器](https://stackoverflow.com/questions/3398989/drag-drop-from-net-application-to-explorer)

在我的应用程序中，要求用户能够从文件拖放`ListView`到 Windows 资源管理器。该文件位于服务器上，因此我需要下载它们以放置哪个用户点。为此，我决定设置`WH_MOUSE_LL`用于跟踪全局鼠标事件的钩子，以获取用户放置文件的文件夹的句柄，然后使用它来获取加载文件的绝对路径。这是带有 HOOK 功能的 id DLL：

```
 [StructLayout(LayoutKind.Sequential)]
        public class MouseHookStruct
        {
            public POINT pt;
            public int hwnd;
            public int wHitTestCode;
            public int dwExtraInfo;
        }

        [StructLayout(LayoutKind.Sequential)]
        private struct MSLLHOOKSTRUCT
        {
            public POINT pt;
            public uint mouseData;
            public uint flags;
            public uint time;
            public IntPtr dwExtraInfo;
        }

        private enum MouseMessages
        {
            WM_LBUTTONDOWN = 0x0201,
            WM_LBUTTONUP = 0x0202,
            WM_MOUSEMOVE = 0x0200,
            WM_MOUSEWHEEL = 0x020A,
            WM_RBUTTONDOWN = 0x0204,
            WM_RBUTTONUP = 0x0205
        }

        [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]
        public static extern int CallNextHookEx(int idHook, int nCode,
        IntPtr wParam, IntPtr lParam);

        public int LowLevelMouseProc(int nCode, IntPtr wParam, IntPtr lParam)
        {
            //Marshall the data from the callback.
            //MouseHookStruct MyMouseHookStruct = (MouseHookStruct)Marshal.PtrToStructure(lParam, typeof(MouseHookStruct));

            MSLLHOOKSTRUCT MyMouseHookStruct = (MSLLHOOKSTRUCT)Marshal.PtrToStructure(lParam, typeof(MSLLHOOKSTRUCT));

            if (nCode >= 0 &&
            MouseMessages.WM_LBUTTONDOWN == (MouseMessages)wParam)
            {
                String strCaption = "x = " +
                        MyMouseHookStruct.pt.x.ToString("d") +
                        "  y = " +
                MyMouseHookStruct.pt.y.ToString("d");
                //You must get the active form because it is a static function.
                Console.WriteLine(strCaption);

            }
            return CallNextHookEx(hHook, nCode, wParam, lParam);

        }
    }
} 
```

然后我注册它`SetWindowsHookEx`：

```
[DllImport("kernel32.dll")]
public static extern IntPtr LoadLibrary(string dllToLoad);
IntPtr pDll = LoadLibrary(@"C:\Users\вова\Documents\visual studio    2010\Projects\MouseHook\MouseHook\bin\Debug\MouseHook.dll");
MouseHookProcedure = new HookProc(msHookObj.LowLevelMouseProc);

hHook = SetWindowsHookEx(WH_MOUSE,
            MouseHookProcedure,
            pDll, 
            0); 
```

结果我的应用程序不跟踪全局事件。请帮忙，我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:23:42.197

我决定使用你关于拖放的建议，所以我开始使用 Shell API。但我有问题：因为我的文件不在系统中，所以我不能使用 CF_HDROP 格式进行传输。所以我认为我必须使用 CFSTR_FILECONTENTS。

这是我的代码：

```
 public class DataObjectEx :
        DataObject, System.Runtime.InteropServices.ComTypes.IDataObject
    {
        private static readonly TYMED[] ALLOWED_TYMEDS =
            new TYMED[] { 
            TYMED.TYMED_ENHMF,
            TYMED.TYMED_GDI,
            TYMED.TYMED_HGLOBAL,
            TYMED.TYMED_ISTREAM, 
            TYMED.TYMED_MFPICT};
        public void FormDataObject(ListViewItem item)
        {
            var formatmumber=(Int16)DataFormats.GetFormat(NativeMethods.CFSTR_FILECONTENTS).Id;

            //формируем структуру для shell
            formatetc = new FORMATETC();
            formatetc.cfFormat = formatmumber;
            formatetc.ptd = IntPtr.Zero;
            formatetc.dwAspect = DVASPECT.DVASPECT_CONTENT;
            formatetc.lindex = -1;
            formatetc.tymed = TYMED.TYMED_ISTREAM;

            //формируем структуру для передачи данных в shell
            medium = new STGMEDIUM();
            medium.tymed = TYMED.TYMED_ISTREAM;
            MemoryStream = GetFileContents(item);
            //IStream ob1;
            medium.unionmember = Marshal.GetComInterfaceForObject(iStream, typeof(MemoryStream));
            //medium.unionmember = iStream;

            ((System.Runtime.InteropServices.ComTypes.IDataObject)ob).SetData(ref formatetc, ref medium, true);

        } 
```

在行中： IStream iStream = (IStream)GetFileContents(item);- function GetFileContents(item)- 连接到服务器并发送文件下载请求

```
public static MemoryStream  get_file_Istream(string file_id)
    {
        string data = "cmd=get_file&id=" + file_id + "&token=" + Token.curent_token;
        string Uri = URL.address;

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(Uri);

        request.Method = "POST";
        request.AllowAutoRedirect = true;
        request.ContentType = "application/x-www-form-urlencoded";
        byte[] EncodedPostParams = Encoding.UTF8.GetBytes(data);
        request.ContentLength = EncodedPostParams.Length;
        request.GetRequestStream().Write(EncodedPostParams, 0, EncodedPostParams.Length);
        request.GetRequestStream().Close();

        HttpWebResponse response = (HttpWebResponse)request.GetResponse();

        MemoryStream mm = new MemoryStream();
        response.GetResponseStream().CopyTo(mm);

        return mm;
        //ResponseStream = response.GetResponseStream();
    } 
```

我从来没有做过这样的事情，只是大致了解它是如何工作的。我得到下一个错误：

- 传递的类型必须是接口。参数名称：t。在这一行：medium.unionmember = Marshal.GetComInterfaceForObject(iStream, typeof(MemoryStream));

- 方法或操作未实现。在这一行：((System.Runtime.InteropServices.ComTypes.IDataObject)ob).SetData(ref formatetc, ref medium, true);

据我了解，从上一个错误开始-我使用了 SetDate 方法，但在互联网上没有找到任何信息。至于第一个错误，我认为它与错误的参数类型有关（MemoryStram insted Istream）

有人知道如何解决它们吗？

特纳克斯

# ios - NSURLConnectionDownloadDelegate expectedTotalBytes 在 iOS 6 中为零

> ID：12582849
> 
> 赞同：4
> 
> 时间：2012-09-25T12:20:13.300
> 
> 标签：ios, ipad, nsurlconnection, ios6

我有一个问题

```
connection:didWriteData:totalBytesWritten:expectedTotalBytes: 
```

iOS 6 下的**NSURLConnectionDownloadDelegate**方法。

在**iOS 5 模拟器**下它工作得很好，给了我正确的 expectedTotalBytes 值。

在**iOS 6 Simulator**上，expectedTotalBytes 始终返回 0。totalBytesWritten 值仍然正确。

相同的请求，相同的 URL，只是操作系统版本不同。

有没有人遇到过类似的问题或知道可能导致这种情况的原因？

干杯金

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T19:55:00.550

刚刚花了很多时间调查同样的问题。原来是在iOS6中，请求首先是用HEAD发出来调查headers的，这并没有那么异常。

但是，似乎忽略了对实际 GET 请求的响应的标头。**因此，如果您的服务器不支持 HEAD 或针对给定 URL 的 HEAD 请求返回 0 内容长度，iOS NSURLConnection 将使用错误信息。**

我的问题是我的自定义服务器不支持我正在下载的文件的 HEAD 请求，而是返回了一个 405（HTTP 错误 405 方法不允许），它在它自己的响应中包含一个内容长度，然后 iOS6 在返回 expectedTotalBytes 时使用，而不是从 GET 响应中纠正一个。

为了解决我的问题，我首先为我的文件下载请求启用了 HEAD，然后确保返回了正确的内容长度。验证：

```
curl -v -I http://url
...
< Content-Length: 23493947
Content-Length: 23493947 
```

不确定这是否是 iOS6 中的错误，或者只是更好地符合 HTTP 标准。希望对其他人有所帮助。

# java - X509序列号使用java

> ID：12582850
> 
> 赞同：12
> 
> 时间：2012-09-25T12:20:24.020
> 
> 标签：java, security, x509certificate, x509, certificate

我需要从 X509 证书中获取一些数据。

如果我在 Windows 中打开证书文件，它会以这种格式显示其序列号。

```
ex. 39 65 70 eb d8 9f 28 20 4e c2 a0 6b 98 48 31 0d 
```

我试图使用 java 获取相同的数据。加载后，我使用

```
x509.getSerialNumber();
and result is : 76292708057987193002565060032465481997 
```

那么这两者有什么区别呢？我希望结果为上一个。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-25T12:39:24.327

Windows 显示序列号的十六进制表示，而 Java`BigInteger`从[`X509Certificate.getSerialNumber()`](http://docs.oracle.com/javase/7/docs/api/javax/security/cert/X509Certificate.html#getSerialNumber%28%29).

要将 显示`BigInteger`为十六进制值，只需调用`toString(16)`.

```
BigInteger bi = new BigInteger("76292708057987193002565060032465481997");
System.out.println(bi.toString(16)); 
```

将输出：

```
396570ebd89f28204ec2a06b9848310d 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T12:34:47.460

第一个是证书的十六进制值。另一种是十进制。

现在取决于您如何转换初始证书字节数组以将其打印出来。

假设这是您的证书：

```
byte[] cert = { (byte) 0xFD, (byte) 0xB1, (byte) 0xDD, ..., (byte) 0x00 };
BigInteger certVal = new BigInteger(cert);  
System.out.println("And result is  (hex): " + certVal.toString(16)); 
```

# jquery - 用于绘制多线图的 Jqplot dateaxisrenderr 问题，过去 30 分钟

> ID：12582851
> 
> 赞同：1
> 
> 时间：2012-09-25T12:20:31.667
> 
> 标签：jquery, jquery-ui, charts, jqplot

我正在动态绘制滴答间隔。例如。过去一小时，过去 24 小时，过去 7 天……

几天和 24 小时我都很好。当我尝试在最后一小时重新绘制它时，问题就来了。Dateaxisrender 从午夜 12:00 开始渲染图表。我尝试使用与我的数据最接近的最小日期，但仍然没有运气。我以毫秒为单位提供滴答间隔...

那是我在这里俯瞰的东西吗..？提前致谢...![在此处输入图像描述](../Images/f2f0c31ff69a00b8a7b410f9974c53f1.png)

注意：mainArray = data dFormat = 日期时间的字符串格式

```
var plot2 = $.jqplot(div, mainArray, {
                        title:chartValue[1],
                        seriesDefaults: {
                            lineWidth:1,
                            markerOptions: { show:true, size:3 },
                            rendererOptions: {
                                smooth: true
                            }
                        },
                        axesDefaults: {
                            labelOptions:{textColor:'#313233', fontSize:'11px',fontWeight:'Bold', fontFamily:'Arial'}
                        },
                        axes:{
                            xaxis:{
                                renderer: $.jqplot.DateAxisRenderer,
                                rendererOptions:{
                                    tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                                    tickInset:0
                                },
                                //tickRenderer:$.jqplot.CanvasAxisTickRenderer,
                                tickOptions:{
                                    autoscale:true,
                                    fontSize:'10px',
                                    fontFamily:'Arial',
                                    angle:-90,
                                    formatString: dFormat
                                },
                                //min: minDate,
                                //max: maxDate,
                                tickInterval:timeInterval
                            },
                            yaxis:{
                                min: 0,
                                max: maxV.length > 1 ? parseInt(maxV) + ((parseInt(maxV)/10)): parseInt(maxV)+2,
                                tickOptions: {
                                    formatString: '%d',
                                    fontSize:'10px',
                                    fontFamily:'Arial',
                                    showGridline: true,
                                    showLabel: true
                                },
                                base: Math.E,
                                forceTickAt0: true
                            }
                        },

                        legend: {
                            show: true,
                            labels: legendNames,
                            //placement: 'outsideGrid'
                            renderer:$.jqplot.EnhancedLegendRenderer,
                            location: 'ne',     // compass direction, nw, n, ne, e, se, s, sw, w.
                            xoffset: 10,        // pixel offset of the legend box from the x (or x2) axis.
                            yoffset: 10        // pixel offset of the legend box from the y (or y2) axis.
                        },

                        cursor:{
                            show:true,
                            style:'auto',
                            followMouse:true,
                            zoom:true,
                            looseZoom:true,
                            showTooltip:false
                        }

                    }); 
```

传递的数据 = [[[18:10:02,1],[18:10:12,1],[18:10:13 ,2],[18:14:10,1],[18:14: 15,1],[18:14:20,1],][[18:15:25,1],[18:15:30,1]]] 这样

# asp.net - 在同一网页中自动回发

> ID：12582857
> 
> 赞同：0
> 
> 时间：2012-09-25T12:20:57.327
> 
> 标签：asp.net, webforms, checkbox, autopostback

我有一个页面（比方说 page1），它使用以下方法打开 page2：

```
showModalDialog(page2, '', 'dialogWidth:55em; dialogHeight:50em; status:0'); 
```

我面临 2 个问题（在这篇文章中，我将写第一个）：

1-我在第 2 页中有几个允许自动回发的复选框，以便对表单本身进行一些更改。正如我之前提到的，page2 是由 page1 使用 javascript 打开的。所以每次我检查这些复选框中的任何一个时，页面都会打开第二个表单（与 page2 相同但有更改）

我怎样才能限制这是相同的形式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:47:19.303

我不知道 showmodalDialog 但是在 javascript 中我们确实喜欢

如何打开新的浏览器窗口？

答：要打开一个新的浏览器窗口，请使用 window.open() 方法。例如，以下代码在新窗口中打开此页面。

myRef = window.open(''+self.location,'mywin','left=20,top=20,width=500,height=500,toolbar=1,resizable=0');

sName 字符串，指定新窗口的名称。此名称可用于与框架集内的框架标签中提供的框架名称相同的结构中。例如，您可以使用表单的超链接，超链接目标页面将显示在您的新窗口中。

如果具有此名称的窗口已经存在，则 window.open() 将在该现有窗口中显示新内容，而不是创建新内容。

有关更多信息，请在“javascript 仅打开单个窗口”上进行谷歌搜索

# android - Android - 1 条记录的加载器

> ID：12582860
> 
> 赞同：0
> 
> 时间：2012-09-25T12:21:11.513
> 
> 标签：android

为单个项目（只读）详细活动加载数据的最佳方式是什么？我应该使用 LoaderManager 还是直接使用 AsyncTask？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:32:12.537

使用 Asyntask 以获得最佳结果：

```
Public class example extends AsyncTask<Void,Void,Void>
  {
        private ProgressDialog dialog;

        public example(Context context){
              dialog = new ProgressDialog(context);
        }

        @Override
        protected void onPreExecute() {
            dialog.setTitle("Demo");
            dialog.setMessage("Please Wait..");
            dialog.show();
        }

        @Override
        protected Void doInBackground(Void... arg0) {
            // TODO Auto-generated method stub

            return null;
        }

        @SuppressLint("NewApi")
        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);
            dialog.dismiss();
        }
  } 
```

# java - 如何使用'for each'将.（例如）数字分配给第二维数组

> ID：12582861
> 
> 赞同：-1
> 
> 时间：2012-09-25T12:21:12.820
> 
> 标签：java

我的老师要求使用“for each”将数字分配给数组的第二维。我尝试使用以下代码执行此操作，但它不起作用：

```
int[][] Square = new int[5][5];

for(int row : Square[])

         for(int col : Square[][])

               ----- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T12:23:22.660

尝试：

```
for ( int[] row : Square ) {
  for ( int col : row ) {
    // your code
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T12:23:39.403

循环遍历 int 的二维数组会为您提供一个 int 的一维数组。循环遍历一维数组会给你一个 int。

```
for (int row[] : Square) {
    for(int col : row) {

    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T12:24:24.520

也许你的意图是

```
int[][] square = new int[5][5];
for(int[] row : square)
     for(int col : row) 
```

但是，这通常不是很有用，因为您还需要知道索引。

```
int[][] square = new int[5][5];
for(int row=0; row < square.length; row++) {
     for(int col=0; col < square[row].length; col++) {
         int i = square[row][col];
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T12:26:04.307

像这样？

```
int[][] Square = new int[5][5];
for(int[] row : Square) {
  for(int col : row) {
    System.out.println("Col = " + col);
  }
} 
```

见[http://javafiddle.net/xfMLMy](http://javafiddle.net/xfMLMy)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T12:22:56.837

由于这被标记为作业，我不会给你完整的答案。

但是，如果您想获取数组的大小，则需要获取相关数组的*长度*，例如

```
Square.length 
```

获取数组数组的长度，以及

```
Square[x].length 
```

获取数组的长度`x`。请注意，这为您提供了适当的数组索引，这可能是有用的。您可以使用以下方法进行迭代：

```
for (int[] row : Square) {
  ... 
```

等等，它不会给你索引。查看[for 循环中的 Oracle 基本知识部分以](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)获取更多信息。

（顺便说一句，我会将变量重命名为`square`，而不是。使用首字母大写字母命名*类类型*`Square`是Java 惯例）

# triangulation - 等高线三角剖分

> ID：12582862
> 
> 赞同：0
> 
> 时间：2012-09-25T12:21:19.123
> 
> 标签：triangulation

我写了我的研究，当我尝试对表面的轮廓进行三角测量时被卡住了。当它是 2D 时，它可以。当它在 3D 中遇到三角角检测问题时，我尝试了：

Triange 有 3 个顶点 v1、v2、v3 我从 v2v1 和 v2v3 创建 2 个向量（vec21，vec23）然后 vec21 x vec23 并在我定义跨度角的支架上获得矩阵的 det 我还检查边缘是否不交叉，如果任何一点都不在三角形区域内。

但是当它在 3D 中我选择多边形周围的点时，这个方法不起作用

我想对平面多边形进行三角剖分的轮廓点：[https ://docs.google.com/open?id=0Bw5-VXnqutXBckRJMGNJMW9JaXc](https://docs.google.com/open?id=0Bw5-VXnqutXBckRJMGNJMW9JaXc)

结果不好：[https ://docs.google.com/open?id=0Bw5-VXnqutXBMzV5elIxX1FaeDQ](https://docs.google.com/open?id=0Bw5-VXnqutXBMzV5elIxX1FaeDQ)

二维：

2D 点：https://docs.google.com/open?id=0Bw5-VXnqutXBWVE4bWJsZ09mOVk

好结果：https://docs.google.com/open?id=0Bw5-VXnqutXBdGFKM2Z4UnFRdXc

我在哪里犯错了？你能解释一下吗？

问候！

PS。我对最后一种情况下的算法感兴趣：http://www.cosy.sbg.ac.at/~held/projects/triang/triang.html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:41:52.360

通常，人们会为 2D 案例使用 Delaunay 三角剖分。对于 3D 情况，您可以将点投影到 2D、三角剖分并将三角形投影回 3D。这当然只有在要三角剖分的补丁可以投影到 2D（没有自相交）时才有效。

# ios6-maps - iOS 6 Maps API：车队管理和商业资产跟踪

> ID：12582867
> 
> 赞同：3
> 
> 时间：2012-09-25T12:21:42.443
> 
> 标签：ios6-maps

在 iOS 6 之前，ios maps api 对开发人员有限制，这是由 Google 强加的，其中一些限制如下：

> 10.9 将服务或内容与任何产品、系统或应用程序一起使用，以用于或与之相关：
> 
> (a) 实时导航或路线引导，包括但不限于与用户的传感器设备位置同步的逐向路线引导；(b) 用于自动或自主控制车辆行为的任何系统或功能；(c)**调度、车队管理、商业资产跟踪或类似**的企业应用程序（Google Maps API 可用于跟踪资产（例如汽车、公共汽车或其他车辆），只要跟踪应用程序**可供公众使用免费**。例如，您可以提供免费的公共 Maps API 实现，以显示实时公共交通或其他交通状态信息。

（取自[http://code.google.com/apis/maps/iphone/terms.html。Apple](http://code.google.com/apis/maps/iphone/terms.html)的 Map Kit 框架也指向那里。）

尽管 Google 不再提供地图，这些限制是否仍然适用于 ios 6？在网上（和 Apple 的文档）搜索答案，但没有找到答案。

我将构建一个应用程序来管理公司的租赁车队（私人），并且需要为此使用地图解决方案。直到 ios 6，我都倾向于使用 openlayers + webview，但如果可能的话，我宁愿使用原生解决方案。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:26:44.517

也许情况并非如此，但似乎如果您使用 CoreLocation 来获取车辆位置，然后以某种方式用于车队管理，那么只要它与[App Review Guidelines](https://developer.apple.com/appstore/resources/approval/guidelines.html) 4.3相抵触，您就**不允许这样做：**

```
4.3
Apps that use location-based APIs for dispatch, fleet management, or emergency services will be rejected 
```

**UPD（2015 年 2 月 1 日）：**正如 lan 所注意到的，该指南不再出现在列表中。

# c# - FileSystemWatcher 和写完成

> ID：12582874
> 
> 赞同：0
> 
> 时间：2012-09-25T12:22:05.777
> 
> 标签：c#

我正在实现一个事件处理程序，它必须打开和处理由我无法控制的第三方应用程序创建的文件的内容。“C# 4.0 in a nutshell”（第 495 页）中的一条注释警告我，在文件完全填充之前打开文件的风险；所以我想知道如何处理这种情况。为了将事件处理程序的负载保持在最低限度，我正在考虑让处理程序简单地将文件名插入队列中，然后使用不同的线程来管理处理，但是，无论如何，我如何确保写入完成并且文件读取是安全的？文件大小可以是任意的。

有什么想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:27:57.723

我们的解决方法是观察特定的扩展。上传文件时，扩展名为“.tmp”。完成上传后，它被重命名为具有适当的扩展名。

另一种选择是让服务器尝试在 try/catch 块中移动文件。如果文件没有上传完成，移动文件的尝试会抛出异常，所以我们等待并重试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:33:10.227

实现您想要的可靠方法可能是使用 FileSystemWatcher + NTFS USN 日志。可能比您预期的要复杂，但仅 FileSystemWatcher 并不能确定新创建的文件已关闭

-首先是 FileSystemWatcher，用于了解文件的创建时间。从那里您可以获得完整的文件路径，并且距离获取文件唯一 ID 仅 1 或 2 个 pinvokes （这可以帮助您在其整个生命周期内跟踪它）。

- 然后，阅读 USN 日志，它会跟踪您驱动器上发生的所有事情。过滤与您的新文件 ID 对应的条目，并阅读日志，直到到达带有“关闭”事件的条目。

从那里开始，除非您的文件以特殊方式操作（由生成它的应用程序多次打开和关闭），否则您可以假设读取它并执行您想做的任何事情是安全的。

一个非常棒的 USN 日志解析器的 C# 实现是 StCroixSkipper 的工作，可在此处获得：http: [//mftscanner.codeplex.com/](http://mftscanner.codeplex.com/)

如果您有兴趣，我可以为您提供有关 USN 期刊的更多帮助，因为我在我的项目中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:12:22.983

实际上，你无法知道。如果其他应用程序的“写”操作是打开文件而拒绝其他人的写访问，那么当它完成后，关闭文件。当您收到通知时，您只需打开请求写入权限的文件，如果失败，您就知道操作未完成。但是，如果“写”操作是打开文件、写入、关闭文件、再次打开文件、再次写入等等，那么你就很不走运了。

我见过的最好的解决方案是在最后一次通知之后设置一个计时器。当计时器结束时，尝试打开文件进行写入——如果可以的话，假设“操作”已经完成并做你需要做的事情。如果打开失败，假设操作仍在进行中并等待一段时间。

当然，没有什么是万无一失的。尽管如此，当您对文件执行您想要的操作并导致交互问题时，可能会启动另一个操作。

# python - C 数组到 PyArray

> ID：12582875
> 
> 赞同：11
> 
> 时间：2012-09-25T12:22:18.807
> 
> 标签：python, numpy, python-c-api, python-c-extension

我正在编写一个不使用 Cython 的 Python C 扩展。

我想在 C 中分配一个双精度数组，在内部函数中使用它（恰好在 Fortran 中）并返回它。我指出 C-Fortran 接口在 C 中完美运行。

```
static PyObject *
Py_drecur(PyObject *self, PyObject *args)
{
  // INPUT
  int n;
  int ipoly;
  double al;
  double be;

  if (!PyArg_ParseTuple(args, "iidd", &n, &ipoly, &al, &be))
    return NULL;

  // OUTPUT
  int nd = 1;
  npy_intp dims[] = {n};
  double a[n];
  double b[n];
  int ierr;

  drecur_(n, ipoly, al, be, a, b, ierr);

  // Create PyArray
  PyObject* alpha = PyArray_SimpleNewFromData(nd, dims, NPY_DOUBLE, a);
  PyObject* beta = PyArray_SimpleNewFromData(nd, dims, NPY_DOUBLE, b);

  Py_INCREF(alpha);
  Py_INCREF(beta);

  return Py_BuildValue("OO", alpha, beta);
} 
```

我调试了这段代码，当我尝试从 alpha 中创建 alpha 时出现分段错误。到那里一切正常。函数 drecur_ 有效，如果将其删除，我会遇到同样的问题。

现在，围绕 C 数据定义 PyArray 的标准方法是什么？我找到了文档，但没有很好的例子。另外，内存泄漏怎么办？在返回之前对 INCREF 是否正确，以便保留 alpha 和 beta 的实例？当不再需要它们时，释放怎么办？

**编辑** 我终于用[NumPy cookbook](http://www.scipy.org/Cookbook/C_Extensions/NumPy_arrays)中的方法做对了。

```
static PyObject *
Py_drecur(PyObject *self, PyObject *args)
{
  // INPUT
  int n;
  int ipoly;
  double al;
  double be;
  double *a, *b;
  PyArrayObject *alpha, *beta;

  if (!PyArg_ParseTuple(args, "iidd", &n, &ipoly, &al, &be))
    return NULL;

  // OUTPUT
  int nd = 1;
  int dims[2];
  dims[0] = n;
  alpha = (PyArrayObject*) PyArray_FromDims(nd, dims, NPY_DOUBLE);
  beta = (PyArrayObject*) PyArray_FromDims(nd, dims, NPY_DOUBLE);
  a = pyvector_to_Carrayptrs(alpha);
  b = pyvector_to_Carrayptrs(beta);
  int ierr;

  drecur_(n, ipoly, al, be, a, b, ierr);

  return Py_BuildValue("OO", alpha, beta);
}

double *pyvector_to_Carrayptrs(PyArrayObject *arrayin)  {
  int n=arrayin->dimensions[0];
  return (double *) arrayin->data;  /* pointer to arrayin data as double */
} 
```

随时对此发表评论，并感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:55:58.103

因此，看起来可疑的第一件事是您的数组`a`并且`b`在函数的本地范围内。这意味着在返回后您将获得非法的内存访问。

所以你应该用

```
double *a = malloc(n*sizeof(double)); 
```

然后，您需要确保稍后您创建的对象释放了内存。请参阅文档的此引用：

> PyObject *PyArray_SimpleNewFromData(int nd, npy_intp* dims, int typenum, void* data)
> 
> > 有时，您希望将在其他地方分配的内存包装到 ndarray 对象中以供下游使用。这个例程使它很容易做到这一点。前三个参数与 PyArray_SimpleNew 中的相同，最后一个参数是指向 ndarray 应该用作其数据缓冲区的连续内存块的指针，它将以 C 风格的连续方式解释。返回对 ndarray 的新引用，但 ndarray 不会拥有它的数据。当这个 ndarray 被释放时，指针不会被释放。
> > 
> > 您应该确保在返回的数组存在时不释放提供的内存。处理此问题的最简单方法是数据是否来自另一个引用计数的 Python 对象。传入指针后，该对象的引用计数应增加，返回的 ndarray 的基成员应指向拥有数据的 Python 对象。然后，当 ndarray 被释放时，base-member 将被适当地 DECREF'd。如果您希望在释放 ndarray 后立即释放内存，则只需在返回的 ndarray 上设置 OWNDATA 标志。

对于您的第二个问题，`Py_INCREF(alpha);`通常仅当您打算将引​​用保留在全局变量或类成员中时才需要。但是由于您只是包装一个函数，因此您不必这样做。可悲的是，该函数可能`PyArray_SimpleNewFromData`没有将引用计数器设置为 1，如果是这种情况，您将不得不将其增加到 1。我希望这是可以理解的；）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:32:32.240

一个问题可能是您的数组 (a,b) 必须至少与包含它的 numpy-array 一样长。您已经在本地范围内创建了数组，因此当您离开该方法时它们将被销毁。

尝试让python分配数组（例如使用`PyArray_SimpleNew`），将您的内容复制到其中并传递一个指针。如果可以选择针对 boost 构建，您可能还想使用[boost::python](http://www.boost.org/doc/libs/1_51_0/libs/python/doc/tutorial/doc/html/index.html)来处理这些细节。

# macos - mach内核，锁的最佳用法

> ID：12582877
> 
> 赞同：3
> 
> 时间：2012-09-25T12:22:22.930
> 
> 标签：macos, locks, kernel-extension

我正在寻找有关如何设计 Mac OS X 网络内核扩展的特定部分以尽可能快速和高效的建议或指示——C 语言。

**描述：** 我有两组 TAILQ 列表。一个用于 A 型结构，另一个用于 B 型结构。大多数情况下，我分别处理它们，因此每个都有一个 lock_mtx。有时，我需要修改 A，然后是 B，然后同时修改两者。它看起来像这样：

```
Function1:
{
Modify List or Struct A
Modify List or Struct B
Modify List or Struct A & B
Modify List or Struct B
Modify List or Struct A
}

Function2:
{
Modify List or Struct B
Modify List or Struct A & B
Modify List or Struct A
Modify List or Struct A & B
} 
```

我不熟悉锁的使用。所以我只看到两个选项： 1\. 使用一个锁来保护两个列表。那将是一种浪费，因为它会阻止仅修改 A 的函数在执行时仅执行修改 B 的函数（反之亦然）。

1.  依次获取两个锁，然后释放它们。那会给我：

.

```
 Function1:
    {
    lock A
    Modify List or Struct A
    unlock A

    lock B
    Modify List or Struct B
    unlock B

    lock A
    lock B
    Modify List or Struct A & B
    unlock B
    unlock A

    lock B
    Modify List or Struct B
    unlock B

    lock A
    Modify List or Struct A
    unlock A
    } 
```

我认为这将是相当昂贵的，拿走所有这些锁。有没有更好的方法来保护 A 和 B 的交叉修改？

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:30:44.333

最初，我在上述问题的背景下寻找设计建议。

好吧，事实证明，使用内核级互斥锁似乎是正确的选择，没有明确的答案。太多依赖于函数的确切结构以及花费在不需要在锁定上下文中执行的副工作上的时间。

在这种情况下，由 dario_ramos 和 pmjordan 暗示的最佳答案是分析可行的选项并做出选择。

感谢大家的帮助。

# asp.net - 浏览器显示白页，直到从服务器获得响应

> ID：12582885
> 
> 赞同：0
> 
> 时间：2012-09-25T12:22:48.987
> 
> 标签：asp.net

在我的 .net Web 应用程序中，有许多 href 元素用于从一个页面导航到另一个页面。当我点击屏幕上的href时，在此期间加载页面需要10秒，浏览器显示白页。如何解决这个问题？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:28:18.070

您可以使用`Asynchronous Page`以解决此问题

链接：http: [//msdn.microsoft.com/en-us/magazine/cc163725.aspx](http://msdn.microsoft.com/en-us/magazine/cc163725.aspx)

# cordova - 是否可以在移动 safari/PhoneGap 中构建拆分选择器？

> ID：12582893
> 
> 赞同：0
> 
> 时间：2012-09-25T12:23:25.157
> 
> 标签：cordova, user-interface, mobile-safari

是否可以在移动 Safari 中构建拆分选择器？类似于闹钟时间选择器的东西，您可以在同一个选择器上选择小时、分钟和上午/下午？

PhoneGap 中有什么东西可以让我这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:53:49.497

我在我的项目中使用过 Mobiscroll，效果很好……

[移动卷轴](http://mobiscroll.com/)

![截屏](../Images/4e758a0bf56e4ef8046ee8d6726a0520.png)

# mysql - mysql表中同时更新1个以上

> ID：12582897
> 
> 赞同：0
> 
> 时间：2012-09-25T12:23:32.497
> 
> 标签：mysql, sql

我的 php 代码中有这个查询：

```
$diminui = mysql_query("
      UPDATE config_cliente 
      SET saldo = saldo - $price 
      WHERE accountcode='$accountcode'"); 
```

我怀疑如果有超过 1 个脚本同时运行此查询，会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:27:26.100

如果您的存储数据库引擎设置为 InnoDB，您不必太担心……[在此处阅读更多](http://dev.mysql.com/doc/refman/5.0/en/innodb-transaction-model.html)关于事务隔离级别的信息。

# sass - 指南针在“/image”而不是“/img”中定义精灵的路径

> ID：12582900
> 
> 赞同：1
> 
> 时间：2012-09-25T12:23:45.413
> 
> 标签：sass, compass-sass, assetic

这是我`config.yml`的 Symfony2 ：

```
assetic:
    debug:          %kernel.debug%
    use_controller: false
    bundles:        [ MnpirlMainBundle, MnpirlDashboardBundle ]
    filters:
        cssrewrite: ~
        sass:    ~
        compass: ~

parameters:
    assetic.filter.compass.images_dir:            %kernel.root_dir%/../web/img
    assetic.filter.compass.generated_images_path: %kernel.root_dir%/../web/img
    assetic.filter.compass.http_path: img/ 
```

问题是，当通过罗盘过滤器转储资产时，它在 css 文件中引用它们，如下所示：

```
/* Arrow */
/* line 50, icons/arrow/*.png */
.arrow-sprite, .arrow-breadcrumb, .arrow-min_down {
  background: url('img/images/icons/arrow-s8a519b0bc8.png') no-repeat;
} 
```

唯一的问题是精灵包含在`web/img/icons`而不是`/img/images/icons`。

我真的不知道为什么会自动添加路径中的“图像”。

谢谢你的帮助。

# php - 没有在php中获取文件的值

> ID：12582902
> 
> 赞同：0
> 
> 时间：2012-09-25T12:23:51.327
> 
> 标签：php

我在获取图像名称时遇到问题。
我使用以下代码更新上传文件夹下的图像。
我正在更新图像路径 `$image= time()."_".strtolower(str_replace($tokan, "" ,$file));`

时间函数用于在图像名称之前添加时间戳。
但问题只是时间_路径更新我没有得到文件名。

例如：
如果我使用诸如 sunset.jpg 之类的文件类型浏览图像，
我只会得到“time_”而不是 sunset.jpg...

```
<?php
    $host="localhost"; 
    $username="root"; 
    $password=""; 
    $db="training_swapnil"; 
    $tbl="gallary"; 
    $tb="album";
    $img_id=$_GET['id'];
    mysql_connect("$host", "$username", "$password")or die("cannot connect");
    mysql_select_db("$db")or die("cannot select DB");
    $q="SELECT * FROM $tbl WHERE eid='$img_id'";
    $r=mysql_query($q);
    $rw= mysql_fetch_assoc($r);
    echo $img=stripslashes($rw['image']);?>                

  <form name="update_img">
    <table border="0"><tr>
     <td><label>Uploaded Image:</label></td>
      <td><?php echo "<img src=\"uploads/$img\" width=\"150\" height=\"150\" />";?></td></tr>
       <tr><td><label>Upload New Image:</label></td><td>    <input type="file" name="file" id="file"/></td></tr>
       <tr><td><input type="submit" name="submit" value="upload"></td></tr>

    <?php     
         echo"here in post";
         $file=$_POST['file'];
        //$str=$HTTP_POST_FILES['file']['name'];
          echo "str file =$str";
         $tokan = array(" ", "'","`","’");
        //$image= time().".$file.";         
        $image= time()."_".strtolower(str_replace($tokan, "" ,$file));
        $path= "uploads/".$image;
        echo "path using file=$image";
        $sql="UPDATE gallary  set image='$image', path='$path' WHERE eid='$img_id'"; 
        echo $sql;
        $res=mysql_query($sql);
        $res=mysql_query($s);
            if($res>0)
        {
            if($file !=none)
            {                                      if(copy($HTTP_POST_FILES['file']['tmp_name'], $path))              {                                               //header("location:viewalbum.php");
        }
        else
        {
            echo "Error";
        }
    }
 }
?>
</table></form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:28:37.250

用这个替换你的表单标签。

```
<form name="update_img" action="action.php" method="post" enctype="multipart/form-data"> 
```

您的表单中缺少**enctype="multipart/form-data"**属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:28:54.160

替换`$file=$_POST['file']`为`$file=$_FILES['file']['name']`

更多细节在这里： http: [//php.net/manual/en/features.file-upload.post-method.php](http://php.net/manual/en/features.file-upload.post-method.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:28:55.457

您的代码绝对不准备在任何地方上线，存在巨大的安全问题。例如，$img_id 没有被清理，等等。

无论如何，首先将表单设置为实际接受文件上传，将其设置为多部分数据，如下所示：

```
<form enctype="multipart/form-data" ... 
```

# php - php : 在 Google 应用引擎上解析 json

> ID：12582905
> 
> 赞同：1
> 
> 时间：2012-09-25T12:23:57.377
> 
> 标签：php, json, google-app-engine, facebook-graph-api

我使用下面的代码来获取一个 url，这成功了，它返回一个 json 数据

```
$url =  "https://graph.facebook.com/me?access_token=".$access_token;

    function fetch_url($url){

        import java.net.URL;
        import java.io.BufferedReader;
        import java.io.InputStreamReader;

        $java_url = new URL($url);
        $java_bufferreader = new BufferedReader(new InputStreamReader($java_url->openStream()));

        while (($line = $java_bufferreader->readLine()) != null) {
            $content .= $line;
        }

        return $content;
    }

    // Sample usage:
    $friends = fetch_url($url); 
```

当我回显 $friends 时，我得到以下 json 代码，

{

```
 "id": "100003185423323",
   "name": "hnu Chid",
   "first_name": "hnu",
   "last_name": "Chid",
   "link": "http://www.facebook.com/ilovaddddd",
   "username": "ilddddd",
   "education": [
      {
         "school": {
            "id": "182225911846032",
            "name": "Sunean"
         },
         "type": "High School"
      },
      {
         "school": {
            "id": "105504952817559",
            "name": "Sathya University"
         },
         "type": "College"
      }
   ],
   "gender": "female",
   "timezone": 5.5,
   "locale": "en_US",
   "verified": true,
   "updated_time": "2012-09-18T18:37:57+0000"
} 
```

我不能在 GAE 上使用 json 解码，当我尝试 json 解码时出现服务器错误，有没有其他方法可以在 php 上解析它，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:34:05.073

1\. 确保 json_decode 存在（已启用）。

```
<?php
if (function_exists('json_decode')) {
    echo "json_decode functions is available.<br />\n";
} else {
    echo "json_decode functions is not available.<br />\n";
}
?> 
```

2\. 使用try catch 捕捉解析错误。

```
<?php
try {
     $response = json_decode($friends, true);
     print_r($response);
} catch (Exception $ex) {
     echo 'Caught exception: ',  $ex->getMessage(), "<br/>\n";
     var_dump($friends);
}
?> 
```

3\. 在[http://php.net/manual/en/function.json-decode.php阅读更多内容](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:39:01.173

如果功能正常，也尝试在此处验证 JSON 响应。 [http://jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/) 我试过发布的，它看起来有效。但我建议您出于安全原因可能会更改某些内容。

# python - 我如何编写这个主要打印到文件的函数？

> ID：12582907
> 
> 赞同：0
> 
> 时间：2012-09-25T12:24:09.930
> 
> 标签：python, python-2.7

所以我昨天发布了这段代码的另一部分，但我遇到了另一个问题。我为 RPG 制作了一个字符生成器，​​我试图让程序将字符表函数的输出输出到 .txt 文件，但我认为发生的事情是该函数可能会返回`None`一些统计数据的值（这完全是正常，）然后当我尝试写入 .txt 文件时出现错误。我完全被难住了，非常感谢您的帮助！

```
# Character Sheet Function.
def char_shee():
    print "Name:", name
    print "Class:", character_class
    print "Class Powers:", class_power
    print "Alignment:", alignment
    print "Power:", pow, pow_mod()
    print "Intelligence:", iq, iq_mod()
    print "Agility:", agi, agi_mod()
    print "Constitution:", con, con_mod()
    print "Cynicism:", cyn, cyn_mod()
    print "Charisma:", cha, cha_mod()
    print "All Characters Start With 3 Hit Dice"
    print"""
\t\t{0}'s History
\t\t------------------
\t\tAge:{1}
\t\t{2}
\t\t{3}
\t\t{4}
\t\t{5}
\t\t{6}
\t\t{7}
\t\t{8}
\t\t{9}
\t\tGeneral Disposition: {10}
\t\tMost important thing is: {11}
\t\tWho is to blame for worlds problems: {12}
\t\tHow to solve the worlds problems: {13}
""".format(name, age, gender_id, ethnic_pr, fcd, wg, fogo_fuck, cur_fam,fam_fuk, nat_nur, gen_dis, wha_wor, who_pro, how_pro)

char_shee()
print "Press enter to continue"
raw_input()

# Export to text file? 
print """Just because I like you, let me know if you want this character
saved to a text file. Please remember if you save your character not to 
name it after something important, or you might lose it. 
"""
text_file = raw_input("Please type 'y' or 'n', if you want a .txt file")
if text_file == "y":
    filename = raw_input("\nWhat are we calling your file, include .txt")
    target = open(filename, 'w')
    target.write(char_shee()
    target.close
    print "\nOk I created your file."
    print """
Thanks so much for using the Cyberpanky N.O.W Character Generator
By Ray Weiss
Goodbye
"""
else:
    print """
Thanks so much for using the Cyberpanky N.O.W Character Generator
By Ray Weiss
Goodbye
""" 
```

编辑：这是我得到的输出：

```
> Please type 'y' or 'n', if you want a .txt filey
> 
> What are we calling your file, include .txt123.txt <function char_shee
> at 0x2ba470> Traceback (most recent call last):   File "cncg.py", line
> 595, in <module>
>     target.write(pprint(char_shee)) TypeError: must be string or read-only character buffer, not None 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:26:33.043

使用`print`writes to `sys.stdout`，它不会*返回*值。

您想要`char_shee`返回字符表字符串以将其写入文件，您只需构建该字符串即可。

为了简化字符串的构建，请使用列表来收集字符串：

```
def char_shee():
    sheet = []
    sheet.append("Name: " + name)
    sheet.append("Class: " + character_class)
    # ... more appends ...

    # Return the string with newlines
    return '\n'.join(sheet) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:26:06.843

您在这里忘记了括号：

```
target.write(char_shee())
target.close() 
```

正如@Martijn Pieters 指出的那样，您应该从 中返回值`char_shee()`，而不是打印它们。

# c - 有人可以告诉我我的错误吗？

> ID：12582908
> 
> 赞同：-7
> 
> 时间：2012-09-25T12:24:22.410
> 
> 标签：c, file-io, queue, fopen

这应该将我的输入保存到另一个 txt 文件中。该程序将询问您的 txt 文件的名称。

```
FILE *save;
char filename[100];

scanf ("%s", filename);

save = fopen ("filename", "w");

current = head;

while (current != NULL)
{
    fprintf (save, " %s %s %d", current -> name, current -> tel, current -> age);
    current = current -> next;
}

fclose(save); 
```

有人可以告诉我我的错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T12:26:02.200

那会在这里：

```
 scanf ("%s", filename);

    save = fopen ("filename", "w"); 
```

你能看到你在那里做了什么吗？（提示，`filename`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T12:54:32.847

在行

```
save = fopen("filename",w); 
```

您引用了文件名，使其成为文字字符串文件名，而不是变量文件名。它应该是

```
save = fopen(filename,w); 
```

# android - 如何更改不同屏幕分辨率的视图？

> ID：12582909
> 
> 赞同：1
> 
> 时间：2012-09-25T12:24:22.503
> 
> 标签：android, sencha-touch-2, screen-resolution

我正在使用`sencha touch 2`.

在应用程序中，我使用一些图像作为按钮和一些默认按钮。甚至一些其他组件也在那里。

问题是，当我为不同的 android 设备测试它时，UI 无法正常显示。

假设当我测试时`Samsung S2`，它适合屏幕。但是在测试时`480 * 360 screens`，它会出现在屏幕之外。

我如何处理 android 的不同屏幕尺寸？有示例代码吗？？

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:26:50.460

这是支持多种屏幕尺寸的文档：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

我建议您在设置图像大小时使用密度像素（dp），这也会根据屏幕密度设置大小。

欲知更多详情，请随时询问。

# java - Jersey get 方法将被调用

> ID：12582921
> 
> 赞同：4
> 
> 时间：2012-09-25T12:25:13.473
> 
> 标签：java, jersey

我正在尝试实现`ContainerRequestFilter`它将检查应该调用的方法是否用@Authorize注释，如果是，则调用方法将检查用户是否被授权并根据返回值返回`not Authorized`或继续请求。

现在我想知道如果我继续请求，是否有一种简单的方法可以获取有关将调用哪个方法的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:05:23.523

看看`RolesAllowedResourceFilterFactory`球衣随附的 wich 以了解它应该如何工作。工厂实现`ResourceFilterFactory`，其唯一的实现方法是：

```
 List<ResourceFilter> create(AbstractMethod am); 
```

这样你就可以掌握你被要求的方法。您可以将抽象方法传递给您的过滤器或预先构建正确的过滤器。

# ios - 安装 iOS 6 sdk 文档时出错

> ID：12582931
> 
> 赞同：1
> 
> 时间：2012-09-25T12:25:49.837
> 
> 标签：ios, iphone, ios6, xcode4.5

当我去：

**Xcode -> 首选项 -> 下载**

我有以下屏幕：

![在此处输入图像描述](../Images/fcb054ce0ca55a2f3fc2d991553cb116.png)

下载后出现以下错误`iOS 6.0 Library`：

> 安装路径 /Users/user/Library/Developer/Shared/Documentation/DocSets/com.apple.adc.documentation.AppleiOS6.0.iOSLibrary.docset 指向一个看起来不像用于更新的有效文档集的文件夹。

可以做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:45:43.837

我使用 App Store 下载和安装的 Xcode 4.5 (4G182) 将文档称为文档集，而不是库：

> iOS 6.0 文档集 (v. 41.39)

它的版本号高于您的 iOS 6.0 库。

![在此处输入图像描述](../Images/6f419dbd8f0d1e664bb729fdcda1a31a.png)

# css - 用 css 隐藏所有不包含 {selector} 的元素

> ID：12582939
> 
> 赞同：0
> 
> 时间：2012-09-25T12:26:09.263
> 
> 标签：css, css-selectors

我有[示例（js-fiddle）](http://jsfiddle.net/f7JgP/1/) 我想隐藏所有 tbody 元素，不包含没有类“day_label”和“hide”的元素 tr 元素在这个例子中我有一天的统计数据，如果有我需要隐藏一整天没有任何记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:38:10.723

*使用 CSS （在这个特定的冻结时刻）*无法根据孩子的孩子有效地选择父母 - 你在问什么 - 是不可能的。

你有~~二~~三个 ;) 选项：

1.  在生成 HTML（使用服务器端语言或在 JS 中）时，使用描述子级状态的类生成父级。这样您就可以直接定位到父级。

2.  使用 JavaScript 定位你的父母，然后计算它是否有合适的孩子。如果是这样，则应用一个添加您需要的样式的类名。

3.  对于其他情况，您也可以按照 Abe Petrillo 的说明进行操作 - 这是为了反转您的逻辑，并且仅在找到特定选择器时启用。但是，我相信这对您尝试做的事情不起作用，因为它涉及比可以实现的更复杂的“条件逻辑”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T12:49:47.077

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T12:31:12.053

不确定您的意思，但您可以隐藏所有行，然后显示相关的行：

```
tbody tr { display:none; }
tbody tr.day_label { display: block; } 
```

# java - 运行 jar 文件而不指定支持的 jar 文件

> ID：12582943
> 
> 赞同：2
> 
> 时间：2012-09-25T12:26:24.503
> 
> 标签：java, jar, executable-jar

我创建了一个新的 jar 文件。当我使用

```
java -jar UpdateAvailable.jar com.dao.mysql.UpdateAvailable 
```

我得到了以下异常。

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/codehaus/jettison/json/JSONException
Caused by: java.lang.ClassNotFoundException: org.codehaus.jettison.json.JSONException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

但是我复制了`UpdateAvailable.jar`. 现在我的要求是运行 jar 文件而不指定支持的 jar，比如

```
java -jar UpdateAvailable.jar com.dao.mysql.UpdateAvailable 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:33:22.687

在使用 JAR 文件和 ClassPath 时，请记住以下几点： -

*   为了让你的 JVM 找到类，你的类路径应该设置到包含类的目录。在这种情况下，您有 JAR。
*   因此，您需要提供路径，直到您的 Jar 文件名
*   现在，由于您在当前运行的 Jar 文件中有您的 Jar 文件，因此您无法将类路径设置到 Jar 中的文件夹，因此基本上您将无法为内部 Jar 文件设置类路径。
*   因此，显然 JVM 将无法在您的内部 Jar 中看到类。
*   因此，请确保您所需的 JAR 文件位于所有 JAR 文件之外（我的意思是 - 避免嵌套 JAR 文件）..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:03:01.457

我不确定您是如何打包 jar 文件的，但听起来您需要[One-Jar](http://one-jar.sourceforge.net/)之类的东西来帮助您将文件和所有支持库打包到一个 jar 中。One-Jar 带有它自己的类加载器，允许它加载所有包含在可执行 jar 文件中的 jar。

配置相当简单且易于使用。如果您使用的是 Maven，则可以使用[one-jar maven 插件](http://code.google.com/p/onejar-maven-plugin/)来帮助您配置要包含的库。

您还可以使用其他类似的包来代替 One-Jar，例如[JarJar](http://code.google.com/p/jarjar/)和[ProGuard](http://proguard.sourceforge.net/)。还可以快速查看[这个 SO question](https://stackoverflow.com/q/81260/827480)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T05:43:58.267

在可执行 jar 中无法读取 jar 中的任何支持 jar 文件。因此，将所有支持的 jar 保存在一个文件夹中，并将可执行的 jar 放在同一目录中。并在“MANIFEST.MF”文件中添加“Class-Path”作为“支持的jar文件以空格分隔”。现在运行 jar

```
java -jar UpdateAvailable.jar com.dao.mysql.UpdateAvailable 
```

# azure - 使用 Azure 网站扩展 Orchard

> ID：12582947
> 
> 赞同：1
> 
> 时间：2012-09-25T12:26:39.663
> 
> 标签：azure, orchardcms, azure-web-app-service

我目前正在尝试使用最近发布的“网站”功能在 Azure 上安装 Orchard。

我已经使用图库中的模板成功安装和设置了 Orchard，到目前为止一切似乎都很顺利。

我的问题是：如果我扩大站点以使用 3 个实例，我需要做些什么特别的事情来确保所有实例都从同一个缓存中工作吗？因此，一个新页面会同时出现在所有实例上。

我对 Umbraco 有一点经验，我必须将文档和缓存推送到 blob 存储中才能正常工作。

这是否已经由模板处理？

谢谢你的帮助，

担

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:15:03.903

[Orchard 网站上](http://docs.orchardproject.net/Documentation/Deploying-Orchard-to-Windows-Azure)有一个指南，解释了如何部署到 Windows Azure Web 角色（云服务）。我还没有看到支持多个保留实例的 Windows Azure 网站的实现。

为了使 Orchard 在多个保留实例上工作，您需要将其配置为使用 AzureBlobStorageProvider，这将确保文件被持久化到 blob 存储而不是本地文件系统。这是您配置[Sites.config](http://orchard.codeplex.com/SourceControl/changeset/view/95f0539354b2#src/Orchard.Azure/Orchard.Azure.Web/Config/Sites.config)的方式：

```
 <component instance-scope="per-lifetime-scope"
             type="Orchard.Azure.FileSystems.Media.AzureBlobStorageProvider, Orchard.Azure"
             service="Orchard.FileSystems.Media.IStorageProvider">
  </component> 
```

在您的 Global.asax.cs 中，您还需要确保从 web.config 读取存储帐户信息：

```
 CloudStorageAccount.SetConfigurationSettingPublisher(    
            (configName, configSetter) =>    
                configSetter(ConfigurationManager.AppSettings[configName])    
            ); 
```

# facebook - iOS 6 使用设备帐户获取 Facebook 访问令牌

> ID：12582950
> 
> 赞同：3
> 
> 时间：2012-09-25T12:27:06.893
> 
> 标签：facebook, ios5, ios6, access-token

我正在开发的应用程序同时支持 iOS 5 和 6。对于 iOS 5，我使用 FBSession 对象获取访问令牌。同样的事情适用于 iOS 6，但不允许我使用设备上已经存在的 ACAccount，并且总是要求用户输入电子邮件/密码。

由于 Facebook 在几周内不会更新他们的 SDK 以支持此功能，而且我没有等待那么久的选项，我想知道如何使用帐户或社交框架获取访问令牌。

我花了几个小时寻找答案，但仍然没有运气。所以提前感谢大家。

*编辑*

这是使用 Facebook SDK 3.1+ 获取访问令牌的代码

```
[FBSession openActiveSessionWithReadPermissions:permissions
                                       allowLoginUI:YES
                                  completionHandler:^(FBSession *session, FBSessionState status, NSError *error){
                                      if (session.isOpen) {
                                          switch (status) {
                                              case FBSessionStateOpen:
                                                      // here you get the token
                                                      NSLog(@"%@", session.accessToken);
                                                  break;
                                              case FBSessionStateClosed:
                                              case FBSessionStateClosedLoginFailed:
                                                  [[FBSession activeSession] closeAndClearTokenInformation];
                                                  break;
                                              default:
                                                  break;
                                          } // switch
                                      }]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:07:25.707

Facebook SDK 3.1 已修复此问题。

# c - 从字符串中删除空格尾部（char *）

> ID：12582955
> 
> 赞同：0
> 
> 时间：2012-09-25T12:27:28.283
> 
> 标签：c, string, file, removing-whitespace

你好我有行格式的文本文件

```
1|few ewf ew fewfew 
```

我需要解析它，但我不知道如何从我不知道的第二个值中删除空格尾部。

`segmentation fault`到目前为止，这是我的尝试

```
char* token1;
char* token2;
char* search = "|";
char* search2 = "  "; // double space because string can contains single space
while (fgets(line, 150, f)) {
  token1 = strtok(line, search);
  token2 = strtok(search, search2); // <- segfault
  //token2 = strtok(NULL, search); <- contains a lot of spaces in tail 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:30:00.993

看看这个`deblank`功能。这是一个链接： http: [//www.mathworks.com/help/matlab/ref/deblank.html](http://www.mathworks.com/help/matlab/ref/deblank.html)

# javascript - 是否可以在 jQuery 中选择 $(this) 并使用选择器

> ID：12582956
> 
> 赞同：12
> 
> 时间：2012-09-25T12:27:31.120
> 
> 标签：javascript, jquery, jquery-selectors

我想知道在对它们运行函数之前是否可以使用 $(this) 以及类选择器。

所以与其做；

```
$(this).toggleClass('open');
$('.closed').toggleClass('open'); 
```

做一些更像;

```
$(this, '.closed').toggleClass('open'); 
```

而实际上，上面将在“.close”的上下文中选择“this”

问候，

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-25T12:28:06.860

您可以使用[`add()`](http://api.jquery.com/add/)：

```
$(".closed").add(this).toggleClass("open"); 
```

它将元素添加`this`到匹配元素的集合中（即`.closed`）。

# flash - 将变量传递给函数作为参考

> ID：12582959
> 
> 赞同：0
> 
> 时间：2012-09-25T12:27:42.533
> 
> 标签：flash, actionscript, reference, actionscript-2

我很难将变量作为参考传递给函数。这是我的代码的一部分，它是麻烦制造者：

```
onMouseDown = function ():Void
{
    mouseListener(openCategory, [control[current]]);
};

function mouseListener(callback:Function, callbackParams:Array):Void
{
    for (var index in categories)
    {
        var category:MovieClip = categories[index];
        if (category.hitTest(root._xmouse, root._ymouse))
        {
                control[current] = category;
                callback.apply(null, callbackParams);
        }
    }
} 
```

现在我想要发生的是存储在其中的函数`callback`接收对它的引用`control[current]`或至少是它的最新值。实际发生的是将 的值`control[current]`传递给`mouseListener`。

我怎样才能让这个功能工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:50:03.807

AS 中的基元永远不会通过引用传递，您需要将其装箱为复杂类型并传递装箱值 - 这些始终通过引用传递。在您的情况下，请传递整个`control`，无论是什么，然后阅读`control[current]`inside `callback`。

# java - Java中大型查找值的高效实现

> ID：12582967
> 
> 赞同：1
> 
> 时间：2012-09-25T12:28:18.067
> 
> 标签：java, optimization, hashmap

我有这个 TCP/UDP 端口号列表及其字符串描述：

[http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers](http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers)

现在这是一个***HashMap 的形式，其中端口号作为键，字符串描述作为值***。它可能不是那么大，但我必须在数据包到来时实时查找端口描述，正如您可以想象的那样，这需要有效的检索，否则会大大减慢处理速度。

最初我想实现巨大的 switch case/break 逻辑或者 if，else if 但是这听起来太破旧了，所以我想出了这个 hashMap。

现在我想知道如果查询总是相同的，Java 是否有类似缓存机制来加速？像大多数查询的端口将是 80、443、23、22 等，很少有其他服务类型的数据包可能到达。

**我的选择：**

*   我是否应该在开始时对最常见的类型进行几次 else-if 检查，然后如果之前没有找到，则恢复到这个 hashMap

*   我是否应该继续使用此 hashMap 为我进行搜索

*   我应该恢复到其他一些聪明的方式吗？

请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T12:32:30.990

你*测量*过这需要多长时间吗？我怀疑与你正在做的任何其他事情相比，在具有合理数量的桶的哈希映射中查找将是*微不足道的。*

与这些问题一样，在处理之前测量假定的性能问题是非常值得的。正如[他们所说，](http://shreevatsa.wordpress.com/2008/05/16/premature-optimization-is-the-root-of-all-evil/)*过早的优化是万恶之*源。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T12:32:55.187

> 它大大减慢了处理速度。

HashMap 的查找通常需要大约 50 ns。鉴于从套接字读取数据通常需要 10,000 - 20,000 ns，我怀疑这不是您认为的问题。

如果您想要真正快速查找，请使用数组，因为这样会更快。

```
String[] portToName = new String[65536]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T12:32:37.153

HashMap 对 get 操作有保证的 O(1) 访问时间。从任何角度来看，你现在的做法都是完美的。

维护 if/else if 结构在加速方面容易出错且无用（对于大型列表，它实际上会更糟，具有 O(n) 渐近时间）。

# msbuild - 为什么 msbuild 在 web.config 转换中重复条目？

> ID：12582968
> 
> 赞同：4
> 
> 时间：2012-09-25T12:28:22.490
> 
> 标签：msbuild, visual-studio-2012, web-config-transform

我正在使用 web.config 转换将条目插入 web.config 以用于某些构建配置。

例如我的 Web.Test.config 有这个条目：

```
<elmah>
    <errorMail from="me@me.com" to="me@me.com" async="false" smtpPort="25" smtpServer="mail" subject="test.senegal.co.uk Exception" xdt:Transform="Insert" />
</elmah> 
```

这在视觉工作室中构建得非常好。

但是，当使用 msbuild 创建部署包时，该条目会在 web.config 中重复。这显然会导致异常。

有任何想法吗？

**更新**

我的“主”配置是 Web.Master.config*而不是*Web.config。web.config 文件在 Visual Studio 中构建时被覆盖。我想这一定与此有关。

我认为正在发生的是 msbuild 正在转换 web.config 而不是使用 Web.Master.config。

问题是如何告诉它使用正确的主人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T13:07:13.910

我添加`/p:TransformWebConfigEnabled=false`了 msbuild 参数，因为我的 web.config 已经在 BeforeBuild 目标中进行了转换，如下所示：

```
<Target Name="BeforeBuild">
   <TransformXml Source="$(MSBuildProjectDirectory)\Web.Master.config" Transform="$(MSBuildProjectDirectory)\Web.$(Configuration).config" Destination="$(MSBuildProjectDirectory)\Web.config" />
</Target> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-30T06:19:02.040

在我的情况下，重复是由`xdt:Transform="Insert"`. 如果将其从 Web..config 中删除并保留其余部分，它将正常工作，例如：

```
<!-- doesn't work -->
<add name="EventLog" type="System.Diagnostics.EventLogTraceListener" initializeData="My" 
     xdt:Transform="Insert" /> 
```

对比

```
<!-- works -->
<add name="EventLog" type="System.Diagnostics.EventLogTraceListener" initializeData="My" 
     /> 
```

# android - android动画在onTouch中不起作用

> ID：12582971
> 
> 赞同：1
> 
> 时间：2012-09-25T12:28:42.010
> 
> 标签：android, android-relativelayout, touch-event

我正在开发一个翻转 UI 屏幕，我使用“android.view.animation.Animation”类在 onClick 中为它设置动画，但在 ontouch 中它不起作用，这是我的代码

```
 Animation cardTwoAnimation = cardTwoAnimation = new RotateAnimation(-100f, -180f,
 Animation.RELATIVE_TO_SELF, 0.5f, Animation.ABSOLUTE, 1);

 cardTwoAnimation.setDuration(1000); 
 cardTwoAnimation.setRepeatCount(0); 
 cardTwoAnimation.setRepeatMode(Animation.ZORDER_TOP); 
 cardTwoAnimation.setFillAfter(true);
 fmbCardLayoutTwo.setAnimation(cardTwoAnimation); 
```

在 onTouch 中，我使用相同的方法来旋转这些布局，在相对布局中有三个线性布局，onTouch 方法调用但问题是没有在屏幕上显示动画（所有 system.out 语句都在逐行执行）

```
<RelativeLayout
            android:id="@+id/fmb_asker_questions_relative_layout"
            android:layout_width="wrap_content"
            android:layout_height="170dp"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:clickable="true" >

            <LinearLayout
                android:id="@+id/question_card_two_linear_layout"
                android:layout_width="110dp"
                android:layout_height="150dp"           
                android:layout_marginBottom="196dp"
                android:layout_marginLeft="90dp"
                android:layout_marginTop="160dp"
                android:background="@drawable/fmb_asker_card_style"
                android:orientation="vertical" >                             

            </LinearLayout>

            <LinearLayout
                android:id="@+id/question_card_one_linear_layout"
                android:layout_width="110dp"
                android:layout_height="150dp"
                android:layout_alignParentBottom="true"
                android:layout_marginBottom="196dp"
                android:layout_marginLeft="90dp"
                android:layout_marginTop="160dp"
                android:background="@drawable/fmb_asker_card_style"
                android:clickable="true"
                android:orientation="vertical" >            

            </LinearLayout>

            <LinearLayout
                android:id="@+id/question_card_three_linear_layout"
                android:layout_width="110dp"
                android:layout_height="150dp"
                android:layout_alignParentBottom="true"
                android:layout_marginBottom="196dp"
                android:layout_marginLeft="90dp"
                android:layout_marginTop="160dp"
                android:background="@drawable/fmb_asker_card_style"
                android:orientation="vertical" >

            </LinearLayout>

            <LinearLayout
                android:id="@+id/fmb_ascker_question_card_submit_button"
                android:layout_width="110dp"
                android:layout_height="120dp"
                android:layout_alignParentBottom="true"
                android:layout_marginBottom="196dp"
                android:layout_marginLeft="90dp"
                android:layout_marginTop="100dp"
                android:background="@drawable/fmb_asker_fliping_submit_button_style"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="10dp"
                    android:layout_marginTop="25dp"
                    android:text="SELECT"
                    android:textSize="20dp"
                    android:textColor="#ffffff"
                    android:textStyle="bold" />
            </LinearLayout>

            <Button
                android:id="@+id/button_right"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_marginRight="15dp"
                android:text="Right" />

            <Button
                android:id="@+id/button_left"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/button_right"
                android:layout_alignBottom="@+id/button_right"
                android:layout_alignLeft="@+id/layout2"
                android:text="Left" />
        </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:08:29.380

尝试使用 LinearLayout 代替 RelativeLayout。

# service - System.ServiceProcess 未出现在 C# Express 2010 中

> ID：12582976
> 
> 赞同：1
> 
> 时间：2012-09-25T12:28:57.063
> 
> 标签：service, visual-c#-express-2010

我正在尝试使用 C# 2010 Express 编写服务，但我在最早的步骤中遇到了障碍。我的计算机上似乎不存在 System.ServiceProcess 命名空间。

简而言之，命名空间似乎完全丢失了。唯一存在的以 S 开头的 System 命名空间是 System.Security。列表中没有其他内容。

我在这台机器上安装了 .Net 3.5 和 4.0。这是一台公司计算机，因此是按照别人的严格标准建造的。

我需要下载和安装 Windows SDK 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:34:20.847

我的猜测是您需要引用相应的程序集。

是的，所以我查了一下：

`System.ServiceProcess`（在 System.ServiceProcess.dll 中）

# c - IRC 通讯细节

> ID：12582978
> 
> 赞同：1
> 
> 时间：2012-09-25T12:29:04.207
> 
> 标签：c, irc

最近我读了一些关于 Socket Programming in C 的基本知识，为了练习这些基本知识，我尝试编写一个程序，它应该在用户和 IRC 服务器之间进行一点对话。

这是相关的代码：

初始化通信套接字：

```
void init(char *s[])
{
    struct sockaddr_in server;
    printf("%s : connect . . .\n",s[0]);
    server.sin_family = AF_INET;
    inet_pton(AF_INET,s[1],&server.sin_addr.s_addr);
    server.sin_port = htons(atoi(s[2]));
    if((sock = socket(AF_INET,SOCK_STREAM,0))!= 0)
        printf("%s : socket succesfully initialized.\n",s[0]);
    if(connect(sock,(struct sockaddr *)&server,sizeof(server))==0)
        printf("%s : succesfully connected.\n",s[0]);
} 
```

发送消息：

```
void putmessage(char *s)
{
    write(sock,s,sizeof(s));
}

/*--------*/
(...)
    do
    {
        scanf("%s",input);
        putmessage(strcat(input,"\r\n"));
    }while(strcmp(input,"quit"));
(...) 
```

接收消息：

```
char *getmessage(void)
{
    int i,t = 0;
    char *p1,*p2;
    p1 = malloc(sizeof(*p1));
    *p1 = '\0';
    p2 = malloc(sizeof(*p2));
    *p2 = '\0';
    do
    {
         i = read(sock,buf,BUFSIZE-1);
         buf[i] = '\0';
         t += i+1;
         p2 = malloc(t);
         strcpy(p2,p1);
         strcat(p2,buf);
         free(p1);
         p1 = p2;
    }while(i == BUFSIZE-1);
    return p1;
} 
```

在分叉进程以使用一个用于接收和一个用于发送之后，它只是被无限调用。通信基本正常，因为我从我尝试过的不同 irc 服务器（irc.quakenet.org，irc.debain.org/com）收到的消息总是与我发送的消息相关的错误消息，说我错过了参数。

现在我的问题是：为什么我可以通过 telnet 客户端正确连接到那些 irc 网络，但不能使用我自己的代码使用相同的消息（PASS、NICK、USER）。什么对我来说可能很重要，比如编码（gcc 通常使用什么编码？）？

该程序在 Ubuntu 12.04 下运行。如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:41:44.087

由于您尝试在套接字文件描述符上写入的方式，您的客户端没有发送输入的全部消息。

```
void putmessage(char *s)
{
    write(sock,s,sizeof(s));
} 
```

在这种情况下，运算符`sizeof`不是您想要使用的，因为您将发送`sizeof(char*)`字节，即指针的大小。

你应该使用类似的东西`strlen(s)`。

# jquery - 使用 IMG src 的淘汰模型 - 不保存新值

> ID：12582982
> 
> 赞同：0
> 
> 时间：2012-09-25T12:29:10.637
> 
> 标签：jquery, knockout.js

我第一次使用淘汰赛，我正在尝试制作一个网页以允许用户创建包含图像 url 的项目列表。我已经设法对 img src 属性进行数据绑定，但是如果我稍后使用 jquery 函数对其进行更新，则在保存淘汰模型时，不会采用新的 src 值。

这是我的页面的简化版本的小提琴 - [http://jsfiddle.net/TurUh/4/](http://jsfiddle.net/TurUh/4/)

如果单击保存按钮，您可以看到模型采用原始图像 src (test.png)。如果您随后使用更改图像按钮将图像 src 更新为 (changed.png)，您可以使用 firebug 进行测试以确认 html 已更改。如果您随后再次单击保存按钮，模型将使用旧的 src 值 (test.png)。

难道我做错了什么？谁能建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:52:26.933

您走在正确的轨道上，但是您已经不再在代码中使用 Knockout 对象，而不是在单击按钮时更新 ViewModel。

我在这里更新了您的代码以正常运行，看看您的想法：

[http://jsfiddle.net/TurUh/6/](http://jsfiddle.net/TurUh/6/)

对于其他解决此问题的人，changeImage 函数需要放入 ViewModel 并且 ViewModel 对象需要更新，例如：

```
// Update the whole project array
self.changeImages = function() {
   for(var i=0; i < self.projects().length; i++)
   {
         self.projects()[i].ImageURL('changed.png');
   }
}; 
```

请记住，ImageURL 还需要在项目数组中制作成一个可观察的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T15:26:45.667

管理错误的最佳方法：

```
 ko.bindingHandlers.img = {

    // Mise à jour de l'image
    update: function (element, valueAccessor) {
        // Données de l'observable
        var value = ko.utils.unwrapObservable(valueAccessor()),
            src = ko.utils.unwrapObservable(value.src),
            fallback = ko.utils.unwrapObservable(value.fallback),
            $element = $(element);

        // On set l'url de l'image, si fichier innaccesible alors on set le src à fallback (url par défaut)
        if (src) {
            $element.attr("src", src);
        } else {
            $element.attr("src", fallback);
        }
    },

    // Init de l'image
    init: function (element, valueAccessor) {
        var $element = $(element);

        $element.error(function () {
            var value = ko.utils.unwrapObservable(valueAccessor()),
                fallback = ko.utils.unwrapObservable(value.fallback);

            $element.attr("src", fallback);
        });
    }
};

<img class="img-rounded img-responsive center-block" data-bind="img: { src: pictureUrl, fallback: _pictureDefault }" /> 
```

# mysql - Ruby on Rails @model.id 保存后返回负 id 并且与数据库中的 id 不同

> ID：12582983
> 
> 赞同：0
> 
> 时间：2012-09-25T12:29:17.343
> 
> 标签：mysql, ruby-on-rails

我正在对运行 Ruby 1.8.7 和 Rails 2.3.5 的 Ruby on Rails 应用程序进行一些维护。使用的数据库是 MySQL。

我在我的一个模型上遇到了一个非常奇怪的错误。在保存之前，id 为 nil（因为尚未通过保存到 db 来分配它）。然后，当我执行@model.save 时，它​​会将记录保存在数据库中，但是当我调用@model.id 时，它会返回一个负值（-294731885），而不是在数据库中分配给它的 id（4000235410）。

为了调试，我在我的 shopping_cart 模型中添加了以下内容：

```
before_save :print_object_before
after_save :print_object_after

def print_object_before
  logger.debug "ShoppingCartBeforeSave: " + self.inspect
end

def print_object_after
  logger.debug "ShoppingCartAfterSave: " + self.inspect
end 
```

在我的控制器中，我调用：

```
@shopping_cart.save! 
```

我在日志中得到的输出如下：

```
ShoppingCartBeforeSave: #<ShoppingCart id: nil, user_id: 4000001127, created_at: nil, updated_at: nil, currency_code: "zar", coupon_code: nil>
ShoppingCartAfterSave: #<ShoppingCart id: -294731885, user_id: 4000001127, created_at: "2012-09-25 12:02:05", updated_at: "2012-09-25 12:02:05", currency_code: "zar", coupon_code: nil> 
```

可能是什么问题？模型上没有定义其他前置或后置过滤器。我以为我可能已经用完了 MySQL 上的 id，但事实并非如此，因为尽管在 rails 中返回了不同的值，但它仍将记录正确（并且具有正 id）保存在数据库中。（有关信息，在模型的迁移中，id 定义为整数。）

更多信息：似乎负值的值不断增加（较小的负值），例如，在一次尝试中，id 将包含 -294731885，在下一次尝试时将包含 -294731884，在下一次尝试时将包含 -294731883，等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:15:42.127

我不确定这一点，但您的`id`列类型可能存在问题，它似乎不足以容纳您获得的数字。也许问题出在红宝石方面。我无法确定，因为我没有安装正确的版本，也没有足够的关系数据库经验。希望这可以帮助 ！

# c++ - Clang 链接器不查看 LD_LIBRARY_PATH

> ID：12582987
> 
> 赞同：9
> 
> 时间：2012-09-25T12:29:57.683
> 
> 标签：c++, cmake, clang, ld

我正在尝试使用 clang (3.0) 构建和链接基于 cmake 的 C++ 项目。此项目链接到安装在自定义目录 /my/dir/ 中的几个库。此目录包含在 LD_LIBRARY_PATH 和 LIBRARY_PATH 环境变量中。项目可以使用 g++ 构建和链接。

cmake 生成并执行的链接命令如下所示：

```
/usr/bin/clang++ -O3 stuff.cpp.o -o stuff -rdynamic -lmylib 
```

ld 然后抱怨以下消息：

```
/usr/bin/ld: cannot find -lmylib 
```

每当我手动添加`-L/my/dir/`. 有没有办法在不指定`-L`标志的情况下进行链接？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T12:33:13.283

环境变量（以及它在其他基于 UNIX 的平台上的`$LD_LIBRARY_PATH`各种替代品）在*运行*时而不是*链接时*用于查找库。

使用`-L`是正确的方法，不能避免。

注意：在 Linux 下更好的方法（你没有指定你的平台，所以我猜）是正确配置文件`/etc/ld.so.conf.d/`并避免`$LD_LIBRARY_PATH`完全使用。

# javascript - jquery html() 和 append() 不起作用

> ID：12582995
> 
> 赞同：-4
> 
> 时间：2012-09-25T12:30:30.913
> 
> 标签：javascript, jquery, html

由于某种原因，这两种方法的结果都是 TextNode。这意味着浏览器不解析附加字符串的内容。

例如

```
var code = "<div><p>Some</p> words are <span>here</span></div>"
$("#news_details").append(code); 
```

在页面上我确实有内容

```
"<div><p>Some</p> news are <span>here</span></div>" 
```

这个

```
$("#news_details").contents() 
```

显示带有 html 源的字符串作为单个文本节点附加（出于某种我不知道的原因）

但如果会输入萤火虫

```
var text = $('#news_detaisl').text()
$('#news_details').contents().remove()
$('#news_details').append(text) 
```

之后，它被解析并以正确的方式显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:34:55.703

用户`html()`

```
var code = "<div><p>Some</p> words are <span>here</span></div>"
$("#news_details").html(code); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:37:17.817

由于您没有直接提出问题，因此我只能假设您想要什么。试试这个，告诉我它是否有帮助，如果它是你想要的：

```
var code = "<div><p>Some</p> words are <span>here</span></div>"
$("#news_details").append($(code)); 
```

哦，$().append 和 $().html 的行为方式不同。$().append 将输入添加为新的子元素，而 $().html 返回元素的 innerHTML 或设置它。取决于你是否设置了参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:08:50.103

只有这段代码可以正常工作，但是这种奇怪的行为

```
var content = news.newsDetails(here async ajax request which load html snippet with content);  //content is a string with html snippet from server

$("#news_content").append(content);
var value = $(".news_title").text();
$(".news_title").contents().remove();
$(".news_title").append(value);
$(".news_details").css('display','block') 
```

和 html 片段

```
<div class="news_details">
    <img class="pointer" src="/static/img/close6.png" alt="close" width='16' height='16'>
    <div class="news_head gradient">
        <span>{{ item.pub_date|date:"d M Y"  }}</span>{{ item.title }}
    </div>
    <div class="clear"></div>
<div class="news_title">{{ item.full_text }}</div> 
```

# sql - 从具有相同名称但不同值的sql行中获取值

> ID：12582998
> 
> 赞同：2
> 
> 时间：2012-09-25T12:30:49.557
> 
> 标签：sql

我需要有关 sql 查询的帮助。首先，我有一个具有以下结构的数据库（示例）：

> ID NAME VALUE
> 123 ABC_A Text Text Text
> 123 ABC_A Some more Text
> 123 ABC_A Even more Text
> 123 ABC_B some other text

现在，我想获取名称为“ABC_A”的行的所有不同值。我试图通过 group by 和 have 来获得这些，但没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T12:32:04.220

这是你想要的吗？

```
SELECT DISTINCT Value
FROM tableName
WHERE ID = 123 AND Name = 'ABC_A' 
```

但如果*ID 和 Name 的值是唯一的，*那么您可以*省略* `distinct`（*以避免过度杀伤服务器*）

```
SELECT Value
FROM tableName
WHERE ID = 123 AND Name = 'ABC_A' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T12:34:49.520

> 我想获取名称为“ABC_A”的行的所有不同值

例如：

```
SELECT value, count(value) FROM tbl WHERE name = 'ABC_A' GROUP BY value; 
```

如果您不需要一个值出现的次数，请将其删除，或使用`DISTINCT`：

```
SELECT DISTINCT value FROM tbl WHERE name = 'ABC_A'; 
```

如果您还希望通过 ID 获得不同的行值，

```
SELECT value, count(value)
    FROM tbl
    WHERE id = 123 AND name = 'ABC_A'
    GROUP BY value; 
```

或者，如果您想要“全部”不同的值（也有重复值），请删除`GROUP BY`（并且您不再可以使用`count()`，它始终为 1）：

```
SELECT value FROM tbl WHERE id = 123 AND name = 'ABC_A'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T12:36:18.903

除了 John，如果您使用关键字 Distinct，您只能获得不同的值，因此

```
SELECT DISTINCT Value
FROM tableName
WHERE ID = 123 AND
        Name = 'ABC_A' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T12:38:15.067

该`GROUP BY`语句与聚合函数一起使用，以按一列或多列对结果集进行分组。
在上述情况下，为什么不使用简单的 where 子句

```
select * from <tableName> where name ='ABC_A' 
```