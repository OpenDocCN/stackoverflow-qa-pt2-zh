# StackOverflow 问答 12823000-12823999

# jpa - 在回调事件上执行自动 Bean 验证时违反了 Bean 验证约束：'prePersist'

> ID：12823000
> 
> 赞同：23
> 
> 时间：2012-10-10T15:28:02.090
> 
> 标签：jpa, jpa-2.0, bean-validation

我想存储`birthdate`，所以我选择`date`了 MySQL，当我基于我的数据库创建实体时，结果是这样的：

```
import java.util.Date;

    // ..code
    @NotNull(message="fill you birthdate")
    @Temporal(TemporalType.DATE)
    private Date birthdate; 
```

但是当我尝试坚持时，它给了我这个错误：

> 对回调事件执行自动 Bean 验证时违反了 Bean 验证约束：'prePersist'。有关详细信息，请参阅嵌入式 ConstraintViolations。

我在这里做错了什么？我正在阅读有关在 Google 中定义时区的内容，我来自巴西，我该怎么做？

**编辑**

```
package entity;

import java.io.Serializable;
import javax.persistence.*;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;

import org.hibernate.validator.constraints.Email;

import java.util.Date;
import java.util.List;

/**
 * The persistent class for the user database table.
 * 
 */
@Entity
public class User implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    private Integer id;

    @Temporal(TemporalType.DATE)
    private Date birthdate;

    @NotNull(message="informe seu e-mail")
    @Email(message="e-mail inválido")
    private String email;

    @NotNull(message="informe seu gênero")
    private String gender;

    private String image;

    @NotNull(message="informe seu nome completo")
    private String name;

    @Size(min=6,max=16, message="senha com no mínimo: 6 dígitos e no máximo 16 dígitos")
    @NotNull(message="informe sua senha")
    private String password;

    //bi-directional many-to-one association to Document
    @OneToMany(mappedBy="user")
    private List<Document> documents;

    //bi-directional many-to-one association to QuestionQuery
    @OneToMany(mappedBy="user")
    private List<QuestionQuery> questionQueries;

    //bi-directional many-to-one association to Team
    @OneToMany(mappedBy="user")
    private List<Team> teams;

    public User() {
    }

    public Integer getId() {
        return this.id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public Date getBirthdate() {
        return this.birthdate;
    }

    public void setBirthdate(Date birthdate) {
        this.birthdate = birthdate;
    }

    public String getEmail() {
        return this.email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getGender() {
        return this.gender;
    }

    public void setGender(String gender) {
        this.gender = gender;
    }

    public String getImage() {
        return this.image;
    }

    public void setImage(String image) {
        this.image = image;
    }

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getPassword() {
        return this.password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public List<Document> getDocuments() {
        return this.documents;
    }

    public void setDocuments(List<Document> documents) {
        this.documents = documents;
    }

    public List<QuestionQuery> getQuestionQueries() {
        return this.questionQueries;
    }

    public void setQuestionQueries(List<QuestionQuery> questionQueries) {
        this.questionQueries = questionQueries;
    }

    public List<Team> getTeams() {
        return this.teams;
    }

    public void setTeams(List<Team> teams) {
        this.teams = teams;
    }

    public void print() {
        System.out.println("User [id=" + id + ", birthdate=" + birthdate + ", email="
                + email + ", gender=" + gender + ", image=" + image + ", name="
                + name + ", password=" + password + "]");
    }

} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-06-05T21:43:08.973

我遇到了同样的问题，但经过数小时寻找答案，我终于找到了....您应该编辑***AbstractFacade.java***类并添加此代码

```
public void create(T entity) {

    ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
    Validator validator = factory.getValidator();
    Set<ConstraintViolation<T>> constraintViolations = validator.validate(entity);
    if(constraintViolations.size() > 0){
        Iterator<ConstraintViolation<T>> iterator = constraintViolations.iterator();
        while(iterator.hasNext()){
            ConstraintViolation<T> cv = iterator.next();
            System.err.println(cv.getRootBeanClass().getName()+"."+cv.getPropertyPath() + " " +cv.getMessage());

            JsfUtil.addErrorMessage(cv.getRootBeanClass().getSimpleName()+"."+cv.getPropertyPath() + " " +cv.getMessage());
        }
    }else{
        getEntityManager().persist(entity);
    }
} 
```

现在，此方法将提醒您哪个属性以及它未通过验证的原因。我希望这对你有用，就像对我一样。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-04-25T08:43:07.633

我有一个捷径，在你持久化实体的地方捕获以下异常。在我的例子中，它在 EJB add 方法中。我在哪里`em.persist()`。然后检查服务器日志，您将看到哪个属性违反了约束。

```
catch (ConstraintViolationException e) {
       log.log(Level.SEVERE,"Exception: ");
       e.getConstraintViolations().forEach(err->log.log(Level.SEVERE,err.toString()));
    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-11T05:48:06.147

该错误显示您尝试保留的实体未通过数据库约束，因此请在实际插入之前尝试确定您要插入数据库的确切值。

并通过评论/省略注释来尝试`@NotNull`。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-16T11:39:28.237

我为解决我的问题所做的是颠倒顺序`@Size`和`@NotNull`

前：

```
@Size(min=6,max=16, message="senha com no mínimo: 6 dígitos e no máximo 16 dígitos")
@NotNull(message="informe sua senha")
private String password; 
```

后：

```
@NotNull(message="informe sua senha")
@Size(min=6,max=16, message="senha com no mínimo: 6 dígitos e no máximo 16 dígitos")
private String password; 
```

我不知道为什么这个命令这么重要，但它确实 =] 谢谢大家！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-11-08T13:24:41.813

当然，Iomanip 的回答是完全正确的！我只是将其扩展了一点。也许这也有帮助：

```
 private boolean constraintValidationsDetected(T entity) {
    ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
    Validator validator = factory.getValidator();
    Set<ConstraintViolation<T>> constraintViolations = validator.validate(entity);
    if (constraintViolations.size() > 0) {
      Iterator<ConstraintViolation<T>> iterator = constraintViolations.iterator();
      while (iterator.hasNext()) {
        ConstraintViolation<T> cv = iterator.next();
        System.err.println(cv.getRootBeanClass().getName() + "." + cv.getPropertyPath() + " " + cv.getMessage());

        JsfUtil.addErrorMessage(cv.getRootBeanClass().getSimpleName() + "." + cv.getPropertyPath() + " " + cv.getMessage());
      }
      return true;
    }
    else {
      return false;
    }
  }

  public void create(T entity) {
    if (!constraintValidationsDetected(entity)) {
      getEntityManager().persist(entity);
    }
  }

  public T edit(T entity) {
    if (!constraintValidationsDetected(entity)) {
      return getEntityManager().merge(entity);
    }
    else {
      return entity;
    }
  }

  public void remove(T entity) {
    if (!constraintValidationsDetected(entity)) {
      getEntityManager().remove(getEntityManager().merge(entity));
    }
  } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-12-02T16:46:09.803

当我试图持久化一个实体时，我花了几个小时来解决这个错误。

```
Bean Validation constraint(s) violated while executing Automatic Bean Validation on callback event:'preUpdate'. Please refer to embedded ConstraintViolations for details. 
```

此错误消息没有帮助，相当混乱......

无论如何，在我的情况下，错误的原因是 - Enity 中的注释之间的区别

```
@Size(min = 1, max = 10)
@Column(name = Utilizator.JPA_DISCRIMINATOR)
private String jpaDiscriminator; 
```

和数据库列定义：

`jpaDiscriminator`VARCHAR(15) 非空，

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-12-15T10:18:24.583

我有类似的问题。在我的情况下，引用的 PK 和 FK 的大小不同（参见示例）。

实体 A：

```
some_pk   INTEGER NOT NULL,
fk_b      VARCHAR2(5 CHAR)
... 
```

fk_b 引用实体 B 的 ID 字段

实体 B：

```
id VARCHAR2(4 CHAR)
... 
```

id在这里是一个PK。

注意 ID( **4** ) 和 FK_B( **5** ) 的大小。将 B 的 ID 更改为**5 CHAR**后，错误消失了。

# android - 生成 SDP 文件

> ID：12823002
> 
> 赞同：0
> 
> 时间：2012-10-10T15:28:07.017
> 
> 标签：android, streaming, vlc, rtp, sdp

我正在尝试从本地 PC 主机上的我的 android 设备流式传输。所以，我使用了一些 sipvoip 库，比如 sipdroidsocket。问题是wireshark 从我的android 设备中捕获了所有数据包，但是VLC 无法播放数据流（Rtp），并且错误弹出窗口告诉您需要SDP 文件格式。我谷歌它，它似乎是一个准备媒体播放器的信息文件。

如何生成这个文件？它是在我的 android 应用程序上生成并发送到 PC 还是仅部署在运行 VLC 的 PC 上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:06:59.523

从 RtspServer 发送到 PC...参见[RFC2326或](http://www.ietf.org/rfc/rfc2326.txt)[我](http://www.codeproject.com/Articles/507218/Managed-Media-Aggregation-using-Rtsp-and-Rtp)在 Codeproject 上的文章

# git - 撤消 Git 清理

> ID：12823005
> 
> 赞同：12
> 
> 时间：2012-10-10T15:28:22.313
> 
> 标签：git

所以我不小心从工作树中删除了一些新的、未跟踪的文件`git clean -f`。有没有办法撤消清理或重新添加那些未跟踪的文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T15:31:04.053

如果您的文件已被 Git 清理，那么 Git 不会首先跟踪它们。不幸的是，您只能使用其他任何方法从备份中恢复文件。

这不是 Git 可以帮助您解决的问题。

# applescript - Applescript：从邮件中解析

> ID：12823006
> 
> 赞同：0
> 
> 时间：2012-10-10T15:28:22.993
> 
> 标签：applescript

我正在寻找一个通过我的邮件获取所需结果的applescript：

电子邮件主题：Registrierung fuer die Badener Hochzeitstage - 2587（这里我需要号码）

我需要的电子邮件的内容是“Frau/Herr/Firma”之后的名称，直到下一个“空格”

我的 php/mysql 代码中有一个错误，因此我的数据库中没有这个，所以我需要解析大约 400 封电子邮件。

```
tell application "Mail"

set theMessages to message 1 of mailbox "INBOX" of account "Die Badenerhochzeitstage" whose subject begins with "Registrierung fuer"
set theContent to content of theMessages

set someData to paragraphs of theContent
repeat with someData in theContent

    if someData begins with "Firma" then
        set theURL to paragraph of someData
    else
        set theURL to paragraph 10 of theContent -- this works but this line can change weekly
    end if
end repeat

end tell 
```

在这里我尝试过，但结果我只得到了一些线条，而不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T01:25:26.433

尝试这个...

```
set theAccount to "Die Badenerhochzeitstage"
set subjectText to "Registrierung fuer"
set subjectSearch to "-"
set contentSearch to "Frau/Herr/Firma"
set theResults to {}

tell application "Mail"
    try
        set theMessages to messages of mailbox "INBOX" of account theAccount whose subject begins with subjectText
        if theMessages is {} then
            display dialog "No Messages were found which begins with:" & return & subjectText buttons {"OK"} default button 1
            return
        end if

        repeat with aMessage in theMessages
            tell aMessage
                set theSubject to subject
                set theContent to content
            end tell
            set theNumber to my getFirstWordAfterSearchText(subjectSearch, theSubject)
            set theWord to my getFirstWordAfterSearchText(contentSearch, theContent)
            set end of theResults to {theNumber, theWord}
        end repeat
    on error theError
        display dialog theError buttons {"OK"} default button 1
        return
    end try
end tell
return theResults

(*============== SUBROUTINES =================*)
on getFirstWordAfterSearchText(searchString, theText)
    try
        set {tids, AppleScript's text item delimiters} to {AppleScript's text item delimiters, searchString}
        set textItems to text items of theText
        set AppleScript's text item delimiters to tids
        return (first word of (item 2 of textItems))
    on error theError
        return ""
    end try
end getFirstWordAfterSearchText 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T20:03:35.497

尝试这个：

```
 set TID to text item delimiters
set myRecords to {}

set outputFile to quoted form of (POSIX path of ((path to desktop as text) & "LaunchAgent_Alert.txt")) -- represents "MacHD:Users:david:Desktop:result.txt"

tell application "Mail" to set theMessages to every message of mailbox "INBOX" of account "Badener Hochzeitstage" whose subject begins with "Registrierung fuer"

repeat with aMessage in theMessages
   tell application "Mail" to set {mSubject, mContent} to {subject, content} of aMessage
   set AppleScript's text item delimiters to "-"
   set mSubject to text item 2 of mSubject

   set AppleScript's text item delimiters to "Herr/Frau/Firma "
   set mContent to first word of (text item 2 of mContent)

   set end of myRecords to {mSubject & return & mContent & return & return}

end repeat

set myRecords to myRecords as text
do shell script "echo " & myRecords & " > " & outputFile

set text item delimiters to TID 
```

# function - grep 报告在上下文中包含函数名称

> ID：12823013
> 
> 赞同：3
> 
> 时间：2012-10-10T15:28:38.703
> 
> 标签：function, grep, git-diff

git-diff 报告包含更改的直接函数名称，如下所示：

```
$ git diff
diff --git a/apps/cli/elmo.py b/apps/cli/elmo.py
index ac056e9..1b7c1d0 100644
--- a/myfile.c
+++ b/myfile.c
@@ -100,12 +106,20 @@ int myioctl(unsigned int cmd, int size, int direction, unsigned long arg
                rc = myfunc1(ioargp);
                break;

-       case IOCTL_1:
-               rc = myfunc1(ioargp);
+       case IOCTL_2:
+               rc = myfunc2(arg);
                break; 
```

有没有办法让 grep 报告匹配的函数上下文，类似于 git-diff （即，@@ int myioctl(...) 在上述情况下）？或者是否有一些 grep 的替代工具，其行为类似于 grep 但也会报告函数上下文？

我经常 grep 通过源代码，知道包含匹配行的函数很有帮助，而无需打开文件并查找特定的模式或行号。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T23:12:26.900

这并不完全可行，因为我认为您不能使用正则表达式来表示所有形式的函数语句。你需要一个语法。

反正

所以，你有文件名

现在您需要找出匹配发生的行号。

```
grep -n "pattern" MYFILE | sed -r 's/([0-9]*):.*/\1/' 
```

您想知道上面打印的行是什么功能

```
grep -n "pattern" MYFILE | sed -r 's/([0-9]*):.*/\1/' | while read lineNo
do
    head -n $lineNo MYFILE | tac | egrep -m 1 "[[:alnum:]]+[[:space:]]+[[:alnum:]](.*)[[:space:]]*{"
done 
```

这将为您提供包含匹配行的函数的名称（希望如此）。
*（我正在使用**egrep**，所以我可以使用**'+'**运算符。）*

请注意，此模式与函数声明匹配，如下所示：

```
<function-type> <function-identifier> ( <things> ) { 
```

您将需要对其进行扩展，以便它可以表示更多形式的函数语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-04T02:24:02.937

您可以使用内置[`git-grep`](https://git-scm.com/docs/git-grep)选项来显示整个函数的上下文行：

> -W
> --function-context
> 显示从包含函数名称的前一行到下一个函数名称之前的周围文本，有效地显示找到匹配项的整个函数。函数名称的确定方式与 git diff 计算补丁块头的方式相同（请参阅在 [gitattributes[5]](https://git-scm.com/docs/gitattributes#_defining_a_custom_hunk_header)中定义自定义块头）。

例子：`git grep -W 'myioctl' -- path/to/myfile.c`

# c# - 页面仍在加载时返回数据

> ID：12823015
> 
> 赞同：0
> 
> 时间：2012-10-10T15:28:41.167
> 
> 标签：c#, asp.net-mvc, c#-4.0, asp.net-mvc-4, monotorrent

我有一个带有 ASP.Net MVC 4 和 MonoTorrent 库的 TorrentLeech 应用程序。我想显示下载进度。我不知道该怎么做，但我只知道该页面不应停止加载，因为该操作停止工作。有谁能够帮助我？

这是我的行动，但它仍然是基本的：

```
public ActionResult Tr()
{
    MonoTorrent.Common.Torrent t = null;
    t = MonoTorrent.Common.Torrent.Load(@"E:\Downloads\[isoHunt] Men in Black 3 [ENG] 2012 DVDRip XviD-LPD.torrent");
    MonoTorrent.Client.TorrentManager tm = new MonoTorrent.Client.TorrentManager(t, @"E:\Downloads\[isoHunt] Men in Black 3 [ENG] 2012 DVDRip XviD-LPD\", new MonoTorrent.Client.TorrentSettings(0, 60, 0, 0));

    return View();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:40:47.983

您可以有一个控制器动作，它立即返回一个视图，您将在其中显示一些微调器动画并将 AJAX 请求发送到另一个将执行实际任务的控制器动作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:35:19.553

如果加载功能超时，页面将停止工作。它永远不会到达 return View(); 线。尝试线程加载函数调用，您的页面应该加载。

编辑：更好的是，如果这 3 行中的任何一个超时，它将无法加载。

# java - 是否有 BitmapFactory 分辨率来修复“位图太大而无法上传到纹理中”？

> ID：12823020
> 
> 赞同：1
> 
> 时间：2012-10-10T15:28:59.063
> 
> 标签：java, android, view

在某些设备上，位图形式的图像对于要容纳它们的 ImageView 来说似乎太大了。

图像将通过相机和网络获取。它们将在允许您移动图像、缩放等以查看缺陷的活动中一次显示 1 个。

似乎在使用来自相机的图像时，我们得到“位图太大而无法上传到纹理中”。

我不想硬编码比例，但我想拍摄任何图像，并通过位图工厂，生成适合 Imageview 的图像。然后我会拍摄该图像，因为它不是太大，并通过将矩阵与 ImageView 相关联来捏缩放它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:19:03.387

我正在查看 stackoverflow 以了解如何解决此问题。我得出以下结论：

1.  它基于一个单独的设备 GL_MAX_TEXTURE_SIZE，根据：[“位图太大而无法上传到纹理中”](https://stackoverflow.com/questions/10271020/bitmap-too-large-to-be-uploaded-into-a-texture)和 jptsetung 的答案以及也指向[硬件加速活动的基础评论 - 如何获得 OpenGL 纹理大小限制？](https://stackoverflow.com/questions/7428996/hw-accelerated-activity-how-to-get-opengl-texture-size-limit)这让 Romain Guy 给出了深刻的理解。
2.  您需要了解您的设备可以处理哪些类型的数据。
3.  当您执行以下代码时，使用 2 将缩小图像大小的四分之一。

    ```
    BitmapFactory.Options ops = new BitmapFactory.Options();
    opts.inSampleSize = 2; 
    ```

    这种理解来自这样一个概念，即它将宽度和高度减半，因此尺寸减半。

4.  如果您不想像我一样对其进行硬编码。您可以使用 GL_MAX_TEXTURE_SIZE 来帮助确定它是什么。

最后一点，我所做的是我使用位图获取图像视图，并为其分配一个 MATRIX，然后将矩阵缩放

```
Matrix m = new Matrix();
m.postScale(scaleX,scaleY); 
```

这使您可以获取图像样本以使其更小，然后将其放大以保持相同的大小。inSampleSize 是 scaleX 和 scaleY 的大小，以使其按比例放大。

可能的问题：像素化。根据图像的大小，它不会太糟糕，但你会看到一些。

这是为了解决设备的限制。我会检查图像的宽度和高度有多大，如果它 > GL_MAX_TEXTURE_SIZE，它会做一些数学运算并使其低于 balue。

我相信下一个标准的事情是：

1.  ...

2.  利润！

# php - Symfony 2 中的实体管理器和 phpunit 的问题

> ID：12823021
> 
> 赞同：5
> 
> 时间：2012-10-10T15:29:00.653
> 
> 标签：php, symfony, doctrine-orm, phpunit, symfony-2.1

我在 phpunit 中的实体管理器有问题。

这是我的测试：

```
public function testValidChangeEmail()
{
    $client = self::createAuthClient('user','password');

    $crawler = $client->request('GET', '/user/edit/30');
    $crawler = $client->submit($crawler->selectButton('submit')->form(array(
        'form[email]' => 'new@email.com',
    )));

    /*
     * With this em, this work perfectly 
     * $em = $client->getContainer()->get('doctrine.orm.entity_manager');
     */

    $user = self::$em->getRepository('MyBundle:User')->findUser('new@email.com');

    die(var_dump($user->getEmail()));
} 
```

这是我的 WebTestCase 扩展原始 WebTestCase ：

```
class WebTestCase extends BaseWebTestCase
{
    static protected $container;
    static protected $em;

    static protected function createClient(array $options = array(), array $server = array())
    {
        $client = parent::createClient($options, $server);
        self::$em = $client->getContainer()->get('doctrine.orm.entity_manager');
        self::$container = $client->getContainer();

        return $client;
    }

    protected function createAuthClient($user, $pass)
    {
        return self::createClient(array(), array(
            'PHP_AUTH_USER' => $user,
            'PHP_AUTH_PW'   => $pass,
        ));
    } 
```

如您所见，我在创建客户端时替换了 self::$em。

我的问题：

在我的测试中，`die()`给我旧电子邮件而不是`new@email.com`在测试中注册的新电子邮件 ( )。但是在我的数据库中，我已`new@email.com`正确保存。

当我在数据库中检索我的用户时，我使用`sefl::$em`. 如果我`$em`在评论中使用，我会检索到正确的新电子邮件。

我不明白为什么在我的 WebTestCase 中，我可以访问新的实体管理器......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T18:06:06.187

您无法访问新的实体管理器，因为 Symfony 的客户端类在每次请求之前关闭内核，这意味着它会擦除整个服务容器并从头开始重新构建它。

因此，在第二次请求之后，您将获得与您自己的 WebTestCase 类中的一个非常不同的实体管理器。（我在第二次之后说，因为客户端关闭的内核只有在已经执行了任何请求的情况下）

问题是——你真的需要在你的 WebTestCase 类中使用相同的实体管理器吗？实际上，您可能想要使用相同的实体管理器，因为您想要控制请求之间的事务。但是在这种情况下，您应该创建自己的测试客户端类扩展 symfony 的类，并在那里定义静态连接或实体管理器，并在每次请求之前将其放入容器中。

看例子： [http ://alexandre-salome.fr/blog/Symfony2-Isolation-Of-Tests](http://alexandre-salome.fr/blog/Symfony2-Isolation-Of-Tests)

# jquery - 使用远程页面中的上一个/下一个按钮作为选项卡

> ID：12823028
> 
> 赞同：0
> 
> 时间：2012-10-10T15:29:22.737
> 
> 标签：jquery, jquery-ui-tabs

我有一系列显示来自远程源的内容的选项卡。最终结果将是每个选项卡中的一系列表单，当用户填写并单击按钮时，它们会将它们带到下一个选项卡。只有具有焦点的选项卡将被启用，所有其他选项卡将被禁用。我有所有这一切发生的基本功能 - 但是，我在使用远程 HTML 页面的上一个和下一个按钮时遇到问题。我有一个基本控件工作的小提琴设置 - 但没有远程页面调用。

[JSFiddle](http://jsfiddle.net/k4Hua/1/)

父页面的 HTML：

```
 <div id="tabs">
  <ul>
            <li><a href="#tabs-1">General Information</a></li>
            <li><a href="#tabs-2">Phone Information</a></li>
            <li><a href="#tabs-3">Emergency Contact Information</a></li>
            <li><a href="#tabs-4">Job Related Information</a></li>
            <li><a href="#tabs-5">Miscellaneous Information</a></li>
  </ul>

<div id="tab-content">
        <div id="tabs-1">
        </div>
        <div id="tabs-2">
        </div>
        <div id="tabs-3">
        </div> 
        <div id="tabs-4">
        </div>        
        <div id="tabs-5">
        </div>  
 </div> 
```

选项卡脚本：这就是我加载数据的方式

```
<script>
    $('#tabs-1').load('nes/data/EmployeeGenInfo.htm');
    $('#tabs-2').load('nes/data/EmployeePhoneInfo.htm');
    $('#tabs-3').load('nes/data/EmployeeEmergInfo.htm');
    $('#tabs-4').load('nes/data/EmployeeJobInfo.htm');
    $('#tabs-5').load('nes/data/EmployeeMiscInfo.htm');
</script> 
```

这是第二部分：

我需要从 SERVLET 获取数据，并让该数据填充每个表单选项卡中的子页面。到目前为止，我已经为选项卡工作了正确的功能-您可以在这里看到一个准工作示例[-JSFiddle-](http://jsfiddle.net/5V5um/14/)选项卡内容无法显示，因为它是被远程调用的。这是 TAB 控件的 JAVASCRIPT：

```
$(function() {

    $("#tabs").tabs({disabled: [0,1,2,3,4,5]});

    var $emptabs = $('#tabs').tabs();

    $('#tabs').on('click', '#submit1', function() {
        var selected = $emptabs.tabs('option', 'selected');
        $emptabs.tabs("option", "disabled", []);
        $emptabs.tabs('select', selected+1);
        $emptabs.tabs("option", "disabled", [0,2,3,4,5]);
    });

    $('#tabs').on('click', '#submit2', function() {
        var selected = $emptabs.tabs('option', 'selected');
        $emptabs.tabs("option", "disabled", []);
        $emptabs.tabs('select', selected+1);
        $emptabs.tabs("option", "disabled", [0,1,3,4,5]);
    });

    $('#tabs').on('click', '#submit3', function() {
        var selected = $emptabs.tabs('option', 'selected');
        $emptabs.tabs("option", "disabled", []);
        $emptabs.tabs('select', selected+1);
        $emptabs.tabs("option", "disabled", [0,1,2,4,5]);
    });

    $('#tabs').on('click', '#submit4', function() {
        var selected = $emptabs.tabs('option', 'selected');
        $emptabs.tabs("option", "disabled", []);
        $emptabs.tabs('select', selected+1);
        $emptabs.tabs("option", "disabled", [0,1,2,3,5]);
    });

    $('#tabs').on('click', '#submit5', function() {
        var selected = $emptabs.tabs('option', 'selected');
        $emptabs.tabs("option", "disabled", []);
        $emptabs.tabs('select', selected+1);
        $emptabs.tabs("option", "disabled", [0,1,2,3,4]);
    });

        $('#tabs').on('click', '#reset', function() {
        var selected = $emptabs.tabs('option', 'selected');
        $emptabs.tabs("option", "disabled", []);
        $emptabs.tabs('select', selected-5);
        $emptabs.tabs("option", "disabled", [0,1,2,3,4,5]);
    });

}); 
```

所有的 HTML 还是一样的。我需要知道如何以及在哪里为每个按钮放置我的 AJAX 调用。我知道它看起来像这样：

```
var v = $("#form1").validate({
        submitHandler: function() { 
             $.ajax({
                        type:"post",
                        url:"ActionServlet",
                        data:'JSON',
                        success: function(response){
                            alert("FORM SHOULD SUBMIT HERE");
                        // Change only the header of the file.
                    if (v2.form()) {
                        $emptabs.tabs('select', selected+1);
                        $emptabs.tabs("option", "disabled", [0,2,3,4,5]);
                        }
                    }
            }); 
```

我已经从以前的项目中使用了 Accordions 而不是选项卡的 SERVLET 设置，所以我知道过程几乎相同。但是手风琴的设置与标签的设置大不相同。如果您需要查看其他内容，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:12:08.637

问题可能是当您定义 click() 函数时，您的按钮在 DOM 中不存在。

尝试委派点击事件：

```
$('#myTabs').on('click', '#finish1', function() {
    etc. 
```

这允许在最初加载 DOM 之后添加按钮。

# html - 使用 Visual Studio 对 AJAX-y UI 进行单元测试

> ID：12823029
> 
> 赞同：0
> 
> 时间：2012-10-10T15:29:31.497
> 
> 标签：html, unit-testing, visual-studio-2012

我的 UI 将大量使用 HTML 5、css、jquery 和 kendo。理想情况下，我真的很想编写模拟用户执行操作的测试。我对整个单元测试的事情有点陌生。我了解它如何与程序代码一起使用。但是，我不确定它如何与基于事件的代码（例如 HTML 5 UI）一起工作。

有人可以给我一些关于如何使用 Visual Studio 自动测试 HTML UI 的想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:30:17.640

您可以使用 Visual Studio 2012 中的 CodedUI 测试来帮助自动化 UI 测试。随着最新的更新，我们现在也启用了跨浏览器测试，即您可以在 IE 上记录这些操作并在 IE、Firefox、Chrome 上进行测试

在此处查看详细信息：http: [//blogs.msdn.com/b/visualstudioalm/archive/2012/10/30/introducing-cross-browser-testing-with-coded-ui-tests.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2012/10/30/introducing-cross-browser-testing-with-coded-ui-tests.aspx)

# c - 为静态数组的动态数组分配内存

> ID：12823033
> 
> 赞同：1
> 
> 时间：2012-10-10T15:29:42.197
> 
> 标签：c, arrays, pointers, malloc, typedef

我已经阅读了很多关于此的帖子，但似乎我的问题更具体一些。我想我会设法分配一个动态二维数组。

由于现有代码，我必须使用`typedef`一个静态数组。现在我想暂时存储未知数量的这些数组。我已经尝试了几种带有指针的变体，但我什至无法编译它。

以下代码应该解释我正在尝试做的事情：

```
int                     iCount, i;
typedef unsigned char   Buffer[1024];

Buffer       *          BufferArray=NULL;

BufferArray = malloc(iCount * sizeof Buffer*);

for(i=0;i<iCount;i++)
{
    BufferArray[i] = malloc(sizeof(Buffer));
} 
```

这是我的错误最少的版本。剩下的只有一个

> 错误 C2106：“=”左操作数必须是左值

我知道这个话题很乏味，而且经常发生。虽然，我对`typedef`已经是一个静态数组的 感到很困惑。所以我想，`**`这里不需要指针。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:46:39.127

如果 typedef 让您感到困惑，则将其删除（在您的脑海中）：

```
typedef unsigned char   Buffer[1024]; 
```

因此，当我们看到 时`Buffer`，将其视为 [1024] 的无符号字符数组。

```
Buffer * BufferArray=NULL; // really it's: unsigned char[] * 
```

现在，您希望保留未知数量的这些阵列。好吧，您并没有真正使用 2D 动态数组，而只是一个恰好保存静态数组的动态数组：

```
typedef unsigned char Buffer[1024];

int main(void) {
    Buffer * BA = NULL;
    int iCount = 5;
    BA = malloc(iCount * sizeof(Buffer));
    BA[0][0] = 10;
    return 0; 
} 
```

现在`BA`是一个动态创建的数组，您可以使用它来临时保存`iCount`一些静态无符号字符数组 ( `Buffer`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T18:36:46.800

如果要将动态数组的元素从动态数组复制到静态数组。下面有一个简单的解决方案。

```
#include<stdio.h>
#include<malloc.h>
#define r 2
#define c 5

int main()
{
    char *p;
    char a[r][c];
    int i,j;

    p=(char*)malloc(r*c*sizeof(char));
    gets(p);
    puts(p);

    while(*p!='\0')
    {
        for(i=0;i<=r-1;i++)
        {
            for(j=0; j<=c-1; j++)
            {
                a[i][j] =* p;
                ("%c",a[i][j]);
                p++;
            }
        }
    }
    printf("\n");
    return (0);
} 
```

# c++ - C++ 标准是否需要二进制机器？

> ID：12823034
> 
> 赞同：6
> 
> 时间：2012-10-10T15:29:44.663
> 
> 标签：c++, language-lawyer

我在标准中找到：

> 整数类型的表示应使用纯二进制计数系统定义值

但我的理解是，这不是 C++ 必须在基于硬件基础 2 的机器上实现的要求；换句话说，这似乎只是程序员应该看到的要求。

C++ 标准是否需要二进制 CPU，或者是否可以在三进制或十进制机器上实现有效的 C++ 实现？

* * *

^(微小的背景信息：在历史上，已经有计算机具有十进制、三进制或 C++ 字节长度为 36 位的计算机 (PDP-10))

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T15:36:14.343

尽管从未在标准中直接说明，但有一条“好像”规则适用于 C++（和 C）标准中的所有要求。

换句话说，你可以打破任何你想打破的规则，只要你产生相同的外部可观察效果，​​就好像你遵守了规定的规则一样。尽管标准本身没有说明，但该规则在 C 标准的基本[原理](http://www.open-std.org/jtc1/sc22/wg14/www/C99RationaleV5.10.pdf)*中*明确说明。据我所知，C++ 标准没有匹配的基本原理，但两者之间的关系非常密切，我认为将规则应用于两者几乎没有问题。

# visual-studio-2010 - 共享点列表中是/否（复选框）列的 SPFieldType

> ID：12823035
> 
> 赞同：1
> 
> 时间：2012-10-10T15:29:45.490
> 
> 标签：visual-studio-2010, sharepoint, splist, spfield

我想知道我是否在我的共享点网站的列表中添加了一个是/否（复选框）列，然后假设在 Visual Studio 中我想从该列中检索数据，该列的等效 SPFieldType 是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:56:20.093

[SPFieldBoolean](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfieldboolean.aspx)是您要查找的字段类型。

# oracle - oracle 可以配置为缓存插入吗？

> ID：12823042
> 
> 赞同：0
> 
> 时间：2012-10-10T15:30:22.697
> 
> 标签：oracle

我有一个带有自动生成的主键和一个 DateTime 字段的表。我们有几个客户端插入记录，使用来自客户端计算机的时钟作为日期/时间（即它不是真正的“时间戳”字段）。当记录按主键排序时，我遇到过很多日期/时间是小时的情况。起初，我认为客户端计算机时钟已关闭。但我越来越多地认为它可能是数据库上的某种缓存机制。

有什么可以解释的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:39:30.763

Oracle 不缓存插入或更新：当 DML 语句完成时，意味着更改已经完成。当您提交时，它们是永久性的。

但是，Oracle 可以缓存标识符的生成。如果您的主键是由序列生成的，默认情况下 Oracle 将缓存 20 个键，并且不保证这些键将按照它们被询问的顺序分布。

使用[`ORDER`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_6015.htm#SQLRF54342)关键字：

> [...] 保证按照请求的顺序生成序列号。如果您使用序列号作为时间戳，则此子句很有用。对于用于生成主键的序列，保证顺序通常并不重要。

例子：

```
CREATE SEQUENCE your_sequence ORDER 
```

当然，这假设所有插入也使用[`SYSTIMESTAMP`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions192.htm#i999835)or [`SYSDATE`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions191.htm#i79216)，如果它们使用客户端日期设置，Oracle 无法对插入进行排序。

最终，它真的很重要吗？对于大多数应用程序来说，只有唯一性很重要，并且可以用 GUID 替换自动增量字段。特别是因为您已经有一个时间戳列。

# java - 在 Swing 中为 MVC 模型使用撤消/重做？

> ID：12823044
> 
> 赞同：1
> 
> 时间：2012-10-10T15:30:25.667
> 
> 标签：java, swing, model-view-controller, undo-redo

我有一个 MVC 模型，我试图向它添加一个撤消/重做功能。用户可以在 JTextField 中放置一个数字，当他们单击 UNDO 按钮时，它应该被删除。我已经为实现这一点的类提供了代码。我得到的错误在底部。

控制包：

# ButtonnGUIControl.java

包装控制；

/** * 该类将控制 GUI 的按钮动作。它实现了 actionListener() 方法 * 并根据被点击的按钮初始化模型类中的对应组件。* */

```
public class ButtonGUIControl implements ActionListener{
private SudokuModel model;
private ButtonGUI bgui;
final UndoManager manager = new UndoManager();

public ButtonGUIControl(SudokuModel model) {
    this.model = model;
}

/*This method will listen for user events, and act accordingly
 * */

public void actionPerformed(ActionEvent e) {
    try {   
         if(e.getActionCommand().equals("Check My Answer!")){

            model.checkGame();
        }

         else if (e.getActionCommand().equals("Undo")){

             try {

                    manager.undo();
                } catch (CannotUndoException ex) { ex.printStackTrace(); }
                finally {
                    //updateButtons();
                }                   
         }
         else if (e.getActionCommand().equals("Redo")){

             manager.redo();
             System.out.println("e.getActionCommand().equals redo");
         }

        //otherwise, it simply places the selected number in the grid
        else{

            model.setNumber(Integer.parseInt(e.getActionCommand()));
        }

    } catch (NumberFormatException e1) {}

    catch (IOException e1) {}
    catch (CannotUndoException ex) {
        System.out.println("Unable to undo: " + ex);
        ex.printStackTrace();
        }
    catch (CannotRedoException ex) {
        System.out.println("Unable to redo: " + ex);
        ex.printStackTrace();
    }    

}

public void undoableEditHappened(UndoableEditEvent evt) {

    manager.addEdit(evt.getEdit());

    //bgui.updateButtons();

} 
```

}

* * *

视图包中：ButtonGUI.java

我向按钮添加了一个 actionListner：

RedoBttn.addActionListener(buttonController);

UndoBttn.addActionListener(buttonController);

* * *

在扩展 JTextField 的 Grid.java 中：

```
public class Grid extends JTextField {
private int x;       
private int y; 

final UndoManager manager = new UndoManager();

public Grid(int x, int y) {
    super("");
    this.x = x;
    this.y = y;
    getDocument().addUndoableEditListener(manager);

    setPreferredSize(new Dimension(40, 40));
    setBorder(BorderFactory.createLineBorder(Color.GREEN));
    setOpaque(true);
}

public void setNumber(int number, boolean userInput)  {

    if(number > 0 & !userInput){
        setText(""+number);
        setEditable(false);

    }

    //These set of numbers are the only ones that the user can undo/redo
    else if (number > 0 & userInput){
        setText(""+number);
        setEditable(true);
}
    else
    setText(""); 
```

* * *

我还在视图包的另一个类中为每个 JTextField 添加了一个鼠标侦听器。所以我认为我有正确的撤消/重做结构。当我运行程序时，我可以选择一个数字并将其放在 JTextField(grid) 中，但是一旦我点击“撤消”，我就会得到以下异常：

```
 javax.swing.undo.CannotUndoException
at javax.swing.undo.UndoManager.undo(UndoManager.java:411)
at control.ButtonGUIControl.actionPerformed(ButtonGUIControl.java:76)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6505)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
at java.awt.Component.processEvent(Component.java:6270)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4861)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2713)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
at java.awt.EventQueue.access$000(EventQueue.java:101)
at java.awt.EventQueue$3.run(EventQueue.java:666)
at java.awt.EventQueue$3.run(EventQueue.java:664)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:680)
at java.awt.EventQueue$4.run(EventQueue.java:678)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

第 76 行是我打电话的地方：

```
 manager.undo() 
```

在 try/catch 块中。

知道有什么问题吗？是我的撤消/重做实现还是其他？

谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:29:12.333

尝试`manager.undo();`像这样包装：

```
if(manager.canUndo())
    manager.undo(); 
```

我怀疑默认的 UndoListener 实现`JTextField`不会添加系统更新（即调用`setText(""+number);`撤消队列） - 仅来自 UI 的更新。

**编辑**

在进行了一些测试之后，该`setText("")`函数似乎确实向 中添加了撤消`UndoManager`，所以这不是您遇到的问题。因此，您可以通过确保有任何可撤消的操作可以撤消来防止错误；但是，如果您没有在 中获得任何可撤消的操作`UndoManager`，则问题可能发生在代码中的其他地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:08:02.467

作为替代方案，考虑[`JFormattedTextField`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFormattedTextField.html). 默认情况下，*reset-field-edit*操作绑定到`ESC`键，但您可以根据需要将该操作绑定到另一个键，例如`KeyEvent.VK_Z`，如[*如何使用操作*](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)中所示。对于跨平台兼容性，请使用[此处](https://stackoverflow.com/a/8105344/230513)`getMenuShortcutKeyMask()`提到的。

# iphone - iOS6 不显示 MKAnnotationView 标注

> ID：12823046
> 
> 赞同：2
> 
> 时间：2012-10-10T15:30:27.440
> 
> 标签：iphone, ios, ios6, mkannotationview, ios6-maps

我一直在寻找可能是这个问题的根源，但我看不出出了什么问题。我希望你能在这里帮助我。

我正在尝试在 mapView 中显示注释，图钉被丢弃但无法看到标注，直到我先点击用户位置注释（蓝点），然后返回并点击注释，然后显示注释并一切正常。另一种方法是在引脚周围随机敲击，有时在内部敲击，运气好的话，它会显示标注。如果我在地图上放下另一个别针，我必须执行相同的程序。

这只发生在 iOS6、模拟器和设备中。iOS5 完美运行。

这是我用于 viewForAnnotation 的代码

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {

    MKAnnotationView *annotationView = nil;

    //Check if this annotation is not the blue dot for user location
    if(annotation != mapView.userLocation) {

        //Try to rehuse a previous annotation
        annotationView = (MKAnnotationView *) [mapView dequeueReusableAnnotationViewWithIdentifier:@"searchResult"];

        //If we don't have any, create it
        if (annotationView == nil) {
            annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"searchResult"];
        }
        else {//Or re use it
            annotationView.annotation = annotation;
        }

        [annotationView setImage: [UIImage imageNamed:@"customMarker.png"]];
        annotationView.enabled = YES;
        annotationView.canShowCallout = YES;
        annotationView.centerOffset = CGPointMake(0,-16);
        annotationView.rightCalloutAccessoryView = nil;//Avoid again the detail button because is a geographic reference

    }
    else {//Show a text when the blue dot for user location is pressed
        [mapView.userLocation setTitle:NSLocalizedString(@"you_are_here", nil)];
    }

    return annotationView;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:33:44.433

我发现了问题。

我创建自定义 MKAnnotation 的方式如下：

使用这个自定义类： http: [//gist.github.com/3866874](http://gist.github.com/3866874) 然后这段代码：

```
MapAnnotation *location = [[MapAnnotation alloc] init];
location.title = @"some title";
location.subtitle =@"some subtitle";
location.coordinate = mapRegion.center;
location.placeData = resultSet;
[map setDelegate:self];
[map addAnnotation:location];
[map selectAnnotation:location animated:YES]; //THIS LINE WAS CAUSING THE PROBLEM IN IOS6 
```

我刚刚删除了这条线

```
[map selectAnnotation:location animated:YES]; 
```

现在标注显示正确。

# java - 处理重复的完全限定名称

> ID：12823048
> 
> 赞同：2
> 
> 时间：2012-10-10T15:30:41.173
> 
> 标签：java, import, jar, dependencies, fully-qualified-naming

正如标题所说，有没有办法解决这个问题？我已经导入了两个独立的第三方库，它们有一个完全限定的类名冲突。

现在这两个库都以 jar 形式导入，似乎在某些环境（命令行调用、Eclipse）中找到了正确的类，而在其他环境（Maven）中找到了错误的类，我得到了一个缺少的方法异常。如果找不到解决方案，我可以回退到重构这些库之一并重建 jar，但我宁愿不必在每次库有更新时都重复这项工作。

**编辑：** 如果以后有人看到这个并且感到困惑，我接受了 Dave Newton 的回答，因为如果你在编写所有代码之前足够勤奋地发现这个问题，这将是正确的方法。正如我所怀疑的，在编写完所有代码后自动修复导入似乎是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:32:03.177

您要么遮蔽，将它们分开并删除欺骗，要么...

当您有多个实现时，除非您采取积极措施来减轻欺骗，否则您将受到类加载器的摆布。

[在这个 SO question](https://stackoverflow.com/questions/11311252/how-to-deal-with-two-versions-of-an-api)进一步讨论。

# batch-file - 开始批量使用 reg 查询

> ID：12823049
> 
> 赞同：0
> 
> 时间：2012-10-10T15:30:42.437
> 
> 标签：batch-file, registry

我想知道如何批量使用 reg 查询来做出 if else 决定

我到目前为止是：

```
 set ANSWR = ('reg query "hklm\system\controlset001\control\nls\language" /v Installlanguage')

if %ANSWR% == "0415" (goto DUTCH) else (goto OTHER)

:DUTCH
MSG * windows is in dutch

EXIT

:OTHER

MSG * CANT FIND VERSION

EXIT
pause 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:35:15.927

有一些问题，但这是一个可行的

```
@ECHO off
FOR /f "tokens=3" %%a IN ('reg query^
 "HKLM\SYSTEM\ControlSet001\control\nls\language" /v InstallLanguage') DO (
    SET answer=%%a
) 
IF %answer%==0415 (
    GOTO :DUTCH
) ELSE (
    GOTO :OTHER
)

:DUTCH
MSG * windows is in dutch
GOTO :END

:OTHER
MSG * CANT FIND VERSION
GOTO :END

:END
pause 
```

# sql - MS-Access 存储过程中的语法错误或访问冲突？

> ID：12823051
> 
> 赞同：0
> 
> 时间：2012-10-10T15:30:44.157
> 
> 标签：sql, ms-access, stored-procedures, ms-access-2003, squirrel-sql

我试图在 MS-Access 2003 中使用一个参数创建一个非常简单的存储过程。

```
CREATE PROC procTest(lname VARCHAR(50)) AS 
SELECT * FROM T_Employees t WHERE t.LastName = lname; 
```

我得到错误：

```
Error: [Microsoft][ODBC Microsoft Access Driver]Syntax error or access violation
SQLState:  37000
ErrorCode: 55 
```

我是存储过程的真正 n00b，所以我不确定这里的问题是什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:41:14.770

您正在尝试从 ODBC 连接创建过程。

```
Error: [Microsoft][ODBC Microsoft Access Driver] 
```

`CREATE PROCEDURE`在 Jet 4 中引入，AFAIK 只能从 ADO 执行，而 ODBC 只支持 DAO，不支持 ADO。

我怀疑您将无法从 Squirrel SQL 创建该参数查询。您必须从 Access 中或通过 ADO 连接创建它。

或者，如果您可以从 Squirrel 中运行 VBScript，请创建一个使用 ADO 连接来创建该查询的脚本。

# javascript - 为什么 "\001" === "\u0001" 在 javascript 中为真？

> ID：12823052
> 
> 赞同：1
> 
> 时间：2012-10-10T15:30:48.283
> 
> 标签：javascript, escaping

代码是：

```
console.log("\1" === "\u0001");//true
console.log("\01" === "\x01");//true
console.log("\001" === "\u0001");//true 
```

为什么 `"\001" === "\u0001"`是真的，谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T15:33:00.257

所有这些字符串都是一个字符；即，[Unicode 代码点 1](http://en.wikipedia.org/wiki/C0_and_C1_control_codes)。

这些是在[string literal](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#String_literals)中转义它的不同方法。

# java - Java 资源池线程问题

> ID：12823056
> 
> 赞同：0
> 
> 时间：2012-10-10T15:31:02.173
> 
> 标签：java, multithreading

我在高性能环境中遇到问题，可以用散文描述如下：

我有一个外部 Java API，它调用具有 64 个资源的 FPGA 卡。我需要一种机制来在应用程序中的数百个线程之间安全地共享这些资源的子集。每个资源都应该被认为不是线程安全的。

所以我需要一个带有方法 update() 的 ResourcePool，然后调用 resource.update()。

我认为这是一个相当普遍的习语，但我很难将自己的头脑融入 Java 概念。我想说在一个 ResourcePool 中有 4 个资源。我猜每个人都应该生活在他们自己的线程中（因此需要一个线程池）。

我将如何实现这一点，以便我可以记录错误并在所有 4 个资源都在使用时继续？

希望这是有道理的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:43:10.303

我会将代表每个资源的对象放入 LinkedBlockingQueue。

要获取资源，您可以根据需要 poll()、remove() 或 take()。

要返回资源，您可以添加它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T16:14:23.723

正如@Peter 所建议的那样，使用 LinkedBlockingQueue 来池化资源是可以的，只要每个线程只需要一个资源。如果多个线程需要多个线程，那么在简单情况下可能会出现问题，即多个线程已经获取了一些资源，但不足以让它们中的任何一个继续进行 - 死锁。

您可以使用由一个锁保护的两个队列。一个“池”资源实例队列，一个“等待”线程实例队列等待获取资源。线程类的方法返回它当前正在等待的资源数量。

任何需要资源的线程都会获取锁并首先检查池队列计数。如果有足够的资源，它会将它们出列并退出锁。如果不够，它会将自己排入等待队列，退出锁并等待..

任何可以释放其资源的线程都会获得锁。如果等待队列为空，则将资源释放回池中，释放锁并退出。如果等待队列不为空，它会对其进行迭代，构建一组等待线程，这些线程可以准备好等待释放的资源和池中剩余资源的总和。然后它应用某种算法来决定哪些等待线程可以准备好。如果没有，它只是将资源释放回池并退出锁。如果有，它会用资源加载这些线程，通知它/它们，释放锁并退出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T03:36:37.977

对于BlockingQueue，它对于生产者-消费者模式非常有用，您必须在该资源之后由用户更新或添加它，但可能资源的初始化性能较差。它是一个阻塞队列，如果你想在池为空或满时处理一些信息，队列是可以的。

对于锁，如果这些资源被初始化后没有变化，给这些资源加锁比较好。

这是我的意见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T13:24:45.610

由于您基本上可以将某些东西视为有限数量的通用资源，因此您可以应用任何通用资源池库。谷歌第一次返回[pool4j](http://code.google.com/p/pool4j/)，这可能就是你所需要的。它基于`java.util.Stack`. 或者您可以推出自己的解决方案。

# javascript - 从文档正文中注入元标记？

> ID：12823059
> 
> 赞同：4
> 
> 时间：2012-10-10T15:31:05.817
> 
> 标签：javascript, jquery, html, meta-tags

我需要向`<meta name="apple-itunes-app" content="app-id=xxxxx">`某个页面添加一个元标记（特别是 ），但是我们的模板设置方式，我无法直接编辑 HEAD 标记的代码（出于公司而非技术原因）。

因此，有没有办法在 BODY 标签中使用 JQuery 来添加这个元标签？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T15:32:23.707

也许你可以试试这个：

**jQuery：**

```
$('head').append('<meta name="apple-itunes-app" content="app-id=xxxxx">'); 
```

**Javascript：**

```
document.getElementsByTagName('head')[0].appendChild('<meta name="apple-itunes-app" content="app-id=xxxxx">'); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-10T15:33:00.887

您可以添加元标记，但由于它们在正文被解析之前就已使用，因此没有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-16T09:09:57.540

$('head').append(""); << 不起作用，我什至在 document.ready 中看到了这一点，就像 dystroy 说的那样：在解析正文之前，您需要标签....

对我来说，这完成了工作：

1.  把它放在head部分，它会在解析body之前检测并写入meta。如果没有任何条件，只需将html粘贴到head部分即可：

> ```
> <script type="text/javascript">
>      var isiPad = navigator.userAgent.match(/iPad/i) != null;
>         if(isiPad === false){
>           document.write('<meta name="apple-itunes-app" content="app-id={xxxxx}">');
>         }
> </script> 
> ```

# python - KeyError：'没有这样的路线命名 '

> ID：12823060
> 
> 赞同：0
> 
> 时间：2012-10-10T15:31:07.977
> 
> 标签：python, python-3.x, pyramid

`__init__.py`定义：

```
config.add_route('to_login', '/manage')        
config.add_route('login', '/manage/login') 
```

访问`http://xxx.xxx.0.1:6543/manage/`成功进入login.pt

但在 html 形式中：

```
<div class="login-form">
<form class="login" action="/manage/login" method="post">
<h1 i18n:translate="">登录</h1> 
```

提交后我得到一个错误：

```
2012-10-11 11:22:39,365 ERROR [waitress][Dummy-1] Exception when serving /manage
/login
Traceback (most recent call last):
  File "D:\Py3Env\lib\site-packages\pyramid_debugtoolbar-1.0.2-py3.2.egg\pyramid
_debugtoolbar\toolbar.py", line 122, in toolbar_tween
    response = _handler(request)
  File "D:\Py3Env\lib\site-packages\pyramid_debugtoolbar-1.0.2-py3.2.egg\pyramid
_debugtoolbar\panels\performance.py", line 69, in noresource_timer_handler
    result = handler(request) 
```

.......... .......... response = view(request) 文件“d:\py3env\scripts\dyncms\dyncms\view\login.py”，第 51 行，在login login_url = request.route_url(login) File "D:\Py3Env\lib\site-packages\pyramid-1.3.3-py3.2.egg\pyramid\url.py"，第 208 行，在 route_url 中引发 KeyError( '没有这样的路由名为 %s' % route_name) KeyError: '没有这样的路由名为 '

```
During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Py3Env\lib\site-packages\waitress-0.8.1-py3.2.egg\waitress\channel.py
", line 329, in service
    task.service() 
```

.........................文件“D:\Py3Env\lib\site-packages\pyramid_debugtoolbar-1.0.2-py3.2.egg\pyramid_debugtoolbar\tbtools.py” , line 386, in sourcelines source = f.read() UnicodeDecodeError: 'gbk' codec can't decode bytes in position 2080-2081: illegal l multibyte sequence

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:38:13.083

我想你想改变

```
request.route_url(login) 
```

至

```
request.route_url('login') 
```

# java - Android应用程序中没有互联网连接

> ID：12823061
> 
> 赞同：0
> 
> 时间：2012-10-10T15:31:14.070
> 
> 标签：java, android, ocr

我正在使用 mezzofanti OCR 开源，我正在尝试下载一种语言，但它说我没有互联网连接，我设备上的互联网连接是开放的并且可以工作，我的 android 清单上有互联网权限，

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

所以我不明白为什么它不起作用？

这是日志猫：

```
10-10 18:10:27.925: V/MLOG: Download.java:(12289): DownloadFile opened connection
10-10 18:10:27.930: V/MLOG: Download.java:(12289): java.io.FileNotFoundException: /sdcard/tessdata/temp/languages.txt: open failed: ENOENT (No such file or directory)
10-10 18:10:27.970: D/dalvikvm(12289): GC_FOR_ALLOC freed 94K, 3% free 10046K/10311K, paused 19ms
10-10 18:10:27.990: V/MLOG: OCR.java:(12289): GetLanguage(): eng
10-10 18:10:28.115: W/SurfaceView(12289): CHECK surface infomation creating=false formatChanged=false sizeChanged=false visible=false visibleChanged=true surfaceChanged=true realSizeChanged=false redrawNeeded=false left=false top=false
10-10 18:11:04.680: V/MLOG: Download.java:(12289): DownloadLanguageBrief (http://www.itwizard.ro/mezzolang/languages.txt)
10-10 18:11:05.005: V/MLOG: Download.java:(12289): DownloadFile opened connection
10-10 18:11:05.010: V/MLOG: Download.java:(12289): java.io.FileNotFoundException: /sdcard/tessdata/temp/languages.txt: open failed: ENOENT (No such file or directory)
10-10 18:11:05.080: V/MLOG: OCR.java:(12289): GetLanguage(): eng
10-10 18:11:05.100: D/dalvikvm(12289): GC_CONCURRENT freed 566K, 7% free 9897K/10567K, paused 7ms+3ms
10-10 18:15:07.385: E/WindowManager(12289): Activity com.itwizard.mezzofanti.PreferencesActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4167e4a0 that was originally added here
10-10 18:15:07.385: E/WindowManager(12289): android.view.WindowLeaked: Activity com.itwizard.mezzofanti.PreferencesActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4167e4a0 that was originally added here
10-10 18:15:07.385: E/WindowManager(12289):     at android.view.ViewRootImpl.<init>(ViewRootImpl.java:386)
10-10 18:15:07.385: E/WindowManager(12289):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
10-10 18:15:07.385: E/WindowManager(12289):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
10-10 18:15:07.385: E/WindowManager(12289):     at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
10-10 18:15:07.385: E/WindowManager(12289):     at android.view.Window$LocalWindowManager.addView(Window.java:537)
10-10 18:15:07.385: E/WindowManager(12289):     at android.app.Dialog.show(Dialog.java:278)
10-10 18:15:07.385: E/WindowManager(12289):     at android.app.AlertDialog$Builder.show(AlertDialog.java:932)
10-10 18:15:07.385: E/WindowManager(12289):     at com.itwizard.mezzofanti.PreferencesActivity.ShowAlert(PreferencesActivity.java:229)
10-10 18:15:07.385: E/WindowManager(12289):     at com.itwizard.mezzofanti.PreferencesActivity.CreateDownloadableLangsSubMenu(PreferencesActivity.java:342)
10-10 18:15:07.385: E/WindowManager(12289):     at com.itwizard.mezzofanti.PreferencesActivity.onCreate(PreferencesActivity.java:195)
10-10 18:15:07.385: E/WindowManager(12289):     at android.app.Activity.performCreate(Activity.java:4465)
10-10 18:15:07.385: E/WindowManager(12289):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
10-10 18:15:07.385: E/WindowManager(12289):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
10-10 18:15:07.385: E/WindowManager(12289):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
10-10 18:15:07.385: E/WindowManager(12289):     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3363)
10-10 18:15:07.385: E/WindowManager(12289):     at android.app.ActivityThread.access$700(ActivityThread.java:127)
10-10 18:15:07.385: E/WindowManager(12289):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1163)
10-10 18:15:07.385: E/WindowManager(12289):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-10 18:15:07.385: E/WindowManager(12289):     at android.os.Looper.loop(Looper.java:137)
10-10 18:15:07.385: E/WindowManager(12289):     at android.app.ActivityThread.main(ActivityThread.java:4507)
10-10 18:15:07.385: E/WindowManager(12289):     at java.lang.reflect.Method.invokeNative(Native Method)
10-10 18:15:07.385: E/WindowManager(12289):     at java.lang.reflect.Method.invoke(Method.java:511)
10-10 18:15:07.385: E/WindowManager(12289):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
10-10 18:15:07.385: E/WindowManager(12289):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
10-10 18:15:07.385: E/WindowManager(12289):     at dalvik.system.NativeStart.main(Native Method)
10-10 18:15:07.440: V/MLOG: Download.java:(12289): DownloadLanguageBrief (http://www.itwizard.ro/mezzolang/languages.txt)
10-10 18:15:08.120: V/MLOG: Download.java:(12289): DownloadFile opened connection
10-10 18:15:08.120: V/MLOG: Download.java:(12289): java.io.FileNotFoundException: /sdcard/tessdata/temp/languages.txt: open failed: ENOENT (No such file or directory)
10-10 18:15:08.185: V/MLOG: OCR.java:(12289): GetLanguage(): eng
10-10 18:15:11.375: D/dalvikvm(12289): GC_CONCURRENT freed 173K, 5% free 10128K/10567K, paused 3ms+5ms 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:36:56.333

您的错误消息并没有告诉您您没有互联网，而是告诉您找不到给定的文件。您必须验证该文件是否存在。

# android - 使用 Color.rgb() 不适用于完整的 0...255 范围

> ID：12823063
> 
> 赞同：0
> 
> 时间：2012-10-10T15:31:20.120
> 
> 标签：android, opengl-es

我正在使用 opengl 编写一个 android 游戏。我正在使用：

```
colour = Color.rgb(theR,theG,theB); 
```

（所有整数）存储矩形的颜色。然后我解析出 RGB 来渲染矩形：

```
colorR = Color.red(color);
colorG = Color.green(color);
colorB = Color.blue(color); 
```

例如，对于颜色 53,130,255，这应该会导致蓝色，但在我的应用程序上会导致白色。如果我使用 1,1,1 我会变白。如果我使用 0,0,0 我会变黑。如果我使用 0,1,0 我会得到绿色等。所以看起来任何超过 1 的值都被视为 1，所以我没有得到完整的 0...255 范围。我尝试使用`Color.argb`其中`color = Color.parseColor(theColor)`颜色是一个字符串。我在 opengles 应用程序中使用它。我有一个类来显示一个颜色的矩形。这绝对可以正常工作，因为渲染了正确大小的矩形，而不是使用高于 1 的值的颜色。我也使用纹理，一切都显示正常。有任何想法吗？太感谢了

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T15:32:59.337

大多数 OpenGL 函数接受颜色作为浮点数，0 是最小强度，1 是最大强度。

在传递给 OpenGL 之前，只需将 RGB 值除以 255.f 就可以了。

# .net - 是否可以从转储中获取引发异常的行？

> ID：12823066
> 
> 赞同：2
> 
> 时间：2012-10-10T15:31:29.163
> 
> 标签：.net, debugging, windbg

我有一个转储文件并用 WinDbg 加载它。

我使用 !pe （打印异常）来查看异常（空引用异常）。但是，它向我指出了一个包含约 100 行的方法。

是否可以找出抛出异常的行？

```
 0:000> !pe
   Exception object: 00000000822e7e28
    Exception type:   System.NullReferenceException
    Message:          Object reference not set to an instance of an object.
    InnerException:   <none>
    StackTrace (generated):
SP               IP               Function
00000000001FBDC0 000007FF06468F6B Utils.Page.OnActivate()+0x6db 
```

+0x6db 是什么意思？

非常感谢，丹

编辑：

我有源文件，但我无法重现此问题。这就是为什么我想找出确切的路线

EDIT2：（在布赖恩建议使用 !u 命令之后）

这是使用 !u 命令后的快照

```
 0:000> !u 000007ff03af9a38
   Normal JIT generated code
  Page.OnActivate()
  Begin 000007ff06468890, size 84b
  000007ff`06468890 53              push    rbx
  000007ff`06468891 55              push    rbp
  000007ff`06468892 56              push    rsi
  000007ff`06468893 57              push    rdi
  000007ff`06468894 4883ec78        sub     rsp,78h
  000007ff`06468898 488d6c2430      lea     rbp,[rsp+30h]
  000007ff`0646889d 488bf2          mov     rsi,rdx 
```

等等...

将 6db 添加到 06468890（第一个指针）是否正确？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T15:34:44.380

`+0x6db``OnActivate`是抛出异常的方法的偏移量。您看不到行号的原因是您没有正确的 PDB 文件。如果您有 PDB 文件，请将您的路径设置为包含这些文件。

如果不这样做，您仍然可以很好地指示异常发生的位置。该`!u`命令将列出代码的 .NET 注释版本，您应该能够从中获取源代码中的位置。有关使用该命令的更多详细信息，请参阅[此答案。](https://stackoverflow.com/questions/12692747/determine-line-number-of-innerexception-from-minidump-using-windbg/12693833#12693833)`!u`

# apache - CakePHP 和 EasyPHP URL 重写

> ID：12823068
> 
> 赞同：2
> 
> 时间：2012-10-10T15:31:46.580
> 
> 标签：apache, cakephp, localhost, easyphp

我想让 CakePHP 2.2.3 在我的本地机器上与 EasyPHP 12.1 一起工作。我从 Cake 那里得到一个错误，上面写着：

> 您的服务器上未正确配置 URL 重写。

1.  请帮我配置一下
2.  我不/不能使用 URL 重写

我按照“帮助我配置它”页面上的所有说明操作，但没有成功。我刚刚安装了 EasyPHP 和 Cake，并且只修改了`http.conf`文件。

我还使用 EasyPHP 的内置形式创建了一个虚拟主机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:16:23.990

Check if your `.htaccess` files are these. First, in your root directory:

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

In `app` directory:

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule    ^$    webroot/    [L]
   RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

And `webroot` directory:

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

# php - PHP 占位符

> ID：12823069
> 
> 赞同：-5
> 
> 时间：2012-10-10T15:31:53.507
> 
> 标签：php, mysql

```
$query = '
PREPARE statement FROM
"INSERT INTO games_new
(
    gamedate,
    hometeam,
    visitors,
    result,
    matchreport,
    battedfirst,
    fieldedfirst,
    battedfirstruns,
    battedfirstextras,
    battedfirsttotal,
    battedsecond,
    fieldedsecond,
    battedsecondruns,
    battedsecondextras,
    battedsecondtotal
)
VALUES
(
    ?,?,?,?,?,?,?,?,?,?,?,?,?,?,?
)
"';
$result = mysql_query($query);
if (!$result) {die("Database access failed: " . mysql_error());}
$query =
'SET @gamedate = $_POST["gamedate"],' .
'@hometeam = $_POST["hometeam"],' .
'@visitors = $_POST["visitors"],' .
'@result = $_POST["result"],' .
'@matchreport = $_POST["matchreport"],' .
'@battedfirst = $_POST["battedfirst"],' .
'@fieldedfirst = $_POST["fieldedfirst"],' .
'@battedfirstruns = $_POST["battedfirstruns"],' .
'@battedfirstextras = $_POST["battedfirstextras"],' .
'@battedfirsttotal = $_POST["battedfirsttotal"],' .
'@battedsecond = $_POST["battedsecond"],' .
'@fieldedsecond = $_POST["fieldedsecond"],' .
'@battedsecondruns = $_POST["battedsecondruns"],' .
'@battedsecondextras = $_POST["battedsecondextras"],' .
'@battedsecondtotal = $_POST["battedsecondtotal"]'
;
$result = mysql_query($query);
if (!$result) {die("Database access failed: " . mysql_error());}
$query = '
EXECUTE statement USING
    @gamedate,
    @hometeam,
    @visitors,
    @result,
    @matchreport,
    @battedfirst,
    @fieldedfirst,
    @battedfirstruns,
    @battedfirstextras,
    @battedfirsttotal,
    @battedsecond,
    @fieldedsecond,
    @battedsecondruns,
    @battedsecondextras,
    @battedsecondtotal
';
$result = mysql_query($query);
if (!$result) {die("Database access failed: " . mysql_error());}
$query = 'DEALLOCATE PREPARE statement';
$result = mysql_query($query);
if (!$result) {die("Database access failed: " . mysql_error());} 
```

我收到此语法错误：

> 数据库访问失败：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 '["gamedate"],@hometeam = $_POST["hometeam"],@visitors = $_POST["visitors"],@resu' 附近使用正确的语法

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T15:36:51.367

首先，了解php中单（`'`）和双（`"`）[引号字符串](http://php.net/manual/en/language.types.string.php)的区别。

其次，[不建议](http://www.php.net/manual/en/function.mysql-connect.php)再使用`mysql_`函数。使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或[PDO](http://www.php.net/manual/en/intro.pdo.php)。

所以你应该使用：

```
"SET @gamedate = '{$_POST['gamedate']}'" 
```

而不是用`'`. 或者更确切地说：

```
'SET @gamedate = "' . mysql_real_escape_string( $_POST['gamedate'], $conn) . '"' 
```

或者您可以以正确的方式进行操作（例如使用[`PDO::prepare`](http://www.php.net/manual/en/pdo.prepare.php)）：

```
$sql = 'SET @gamedate = :gamedate';
$sth = $dbh->prepare($sql); // $dbh is instance of PDO
$sth->execute(array(':gamedate' => '...')); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T15:43:13.087

为此用途：

```
mysqli_prepare ( $link , $query ); 
```

例子：

```
$mysqli = new mysqli("localhost", "user", "pwd", "db");
$stmt = mysqli_prepare($link, "INSERT INTO games_new
( gamedate, hometeam, visitors, result, matchreport, battedfirst, fieldedfirst, battedfirstruns, battedfirstextras, battedfirsttotal, battedsecond, fieldedsecond, battedsecondruns, battedsecondextras, battedsecondtotal )
VALUES
(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)");

mysqli_stmt_bind_param($stmt, "ssssssssssssss",
    $_POST["hometeam"],
    $_POST["visitors"],
    $_POST["result"],
    $_POST["matchreport"],
    $_POST["battedfirst"],
    $_POST["fieldedfirst"],
    $_POST["battedfirstruns"],
    $_POST["battedfirstextras"],
    $_POST["battedfirsttotal"],
    $_POST["battedsecond"],
    $_POST["fieldedsecond"],
    $_POST["battedsecondruns"],
    $_POST["battedsecondextras"],
    $_POST["battedsecondtotal"]
);

mysqli_stmt_execute($stmt);
mysqli_stmt_close($stmt);
mysqli_close($link); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T15:34:54.610

```
$query =
'SET @gamedate = $_POST["gamedate"],' . 
```

因为这是在单引号中，`$_POST["gamedate"]`所以不评估。你应该这样做：

```
$query =
"SET @gamedate = {$_POST['gamedate']}," . 
```

但是，`$_POST`像这样直接使用参数最终**会使**您的网站通过 SQL 注入被黑客入侵。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-10T15:35:25.177

```
'@battedsecond = $_POST["battedsecond"],' 
```

由于您使用的是简单引号，因此您不能将变量直接放入字符串中。要么使用双引号，要么使用连接。

```
"@battedsecond = {$_POST["battedsecond"]},"
//OR
'@battedsecond = '.$_POST["battedsecond"].',' 
```

# c# - C# 改变 TIFF 光度解释

> ID：12823072
> 
> 赞同：0
> 
> 时间：2012-10-10T15:31:56.097
> 
> 标签：c#, tiff, aforge

我有以下方法可以调整图像大小并将新调整大小的图像作为 TIFF 返回（我使用的是 AForge 库，它是 ResizeBilinear 对象的来源）。

```
private System.Drawing.Image shrinkImageBilinear(System.Drawing.Image original, float newWidthInches, float newHeightInches)
    {
        float imageProportion = (float)original.Width / (float)original.Height;
        float newWidthPixels = original.HorizontalResolution * newWidthInches;
        float newHeightPixels = newWidthPixels / imageProportion;

        ResizeBilinear filter = new ResizeBilinear((int)newWidthPixels, (int)newHeightPixels);
        Bitmap image = new Bitmap(original);
        image = filter.Apply(image);
        Rectangle imageRect = new Rectangle(0, 0, image.Size.Width, image.Size.Height);
        image = image.Clone(imageRect, PixelFormat.Format1bppIndexed);

        MemoryStream byteStream = new MemoryStream();
        image.SetResolution(200, 200);

        image.Save(byteStream, ImageFormat.Tiff);

        Image returnImage = System.Drawing.Image.FromStream(byteStream);
        return returnImage;
    } 
```

我需要写的规范是 TIFF 标头中的光度解释不能利用调色板，因此光度解释只能是 0 或 1，在这种情况下它是 3，因为我使用的是 PixelFormat.Format1bppIndexed。我正在写的规范中的另一个要求是图像必须是 1bpp。

所以我的问题是，如何在不利用调色板（从而使光度解释为 1 或 0）、保持 1bpp、将分辨率保持在 200 ppi 并将格式保持为 TIFF 的情况下创建此图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:05:35.663

如果您查看 aforge 代码本身，（下载完整源代码）您将有足够的笔记来找到您的答案。

# c - 在 c 和 c++ 中处理字符串

> ID：12823077
> 
> 赞同：0
> 
> 时间：2012-10-10T15:32:12.787
> 
> 标签：c, string, char, constants, formatted

我不确定如何将不同的字符串类型传递给 C 中的函数。

我有一个接收格式化字符串的函数

```
void Logger::info(const char *logstring, ...) 
{

    // So I basically can write a preliminary message "DATA:" to a buffer
    // and then use vsnprintf() to write the const char *logstring to the buffer as well.

    int offset = 0;
    va_list argp;
    char buf[STRSIZE + 1];

    va_start(argp, logstring);
    offset = sprintf(buf, "DATA: ");
    vsnprintf(&buf[offset], STRSIZE - offset, logstring, argp);
    va_end(argp);

    // Then I write the buffer to stderr

    fprintf(stderr, "%s\n", buf);
} 
```

我想做的是将所有这些更深入地移动到函数中。但我无法让它工作，因为我不知道如何成功地将格式化字符串“logstring”传递给函数并让它从另一边出来。

所以我想这样做......

```
info(const char *logstring, ...)
{
    writeToFile("Data:",logstring);
} 
```

然后我可以更集中地完成日志文件的写入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:46:31.373

好的，很可能我没有在这里找到您要寻找的地方，但愿意试一试并刻录答案。以下是尽可能基本的记录器，但演示了如何集中消息构建。底部包含一些测试条件，我特意缩小了初始缓冲区大小，以便您在调试器中浏览并以交互方式查看调整大小。毫无疑问，您会想放大它的大小。

无论如何，如果我碰巧碰巧并正确理解了这个问题，我希望如果它不能直接解决您的问题，您至少会得到一些想法。谢谢。

编辑： OP 要求使用 std::string 和缓冲区调整大小进行压制，以符合其嵌入式系统环境的有限编译能力。因此，使用了固定长度的缓冲区，并且`vsnprintf()`仅在内容实际适合时才信任来自的输出。

```
#include <stdio.h>
#include <stdarg.h>
#include <string.h>

class Logger
{
    static const size_t STRSIZE = 256;

public:
    void error(const char* fmt, ...)
    {
        va_list argptr;
        va_start(argptr,fmt);
        log("ERROR", fmt, argptr);
    };

    // two different logging interfaces.
    void info(const char* fmt, ...)
    {
        va_list argptr;
        va_start(argptr,fmt);
        log("INFO", fmt, argptr);
    };

    void debug(const char* fmt, ...)
    {
        va_list argptr;
        va_start(argptr,fmt);
        log("DEBUG", fmt, argptr);
    };

private:
    void log(const char *msg, const char* fmt, va_list& vl)
    {
        // uses a fixed size message buffer
        char str[STRSIZE+1] = {0};
        strncpy(str, msg, sizeof(str)-1);
        strncat(str, ": ", (sizeof(str)-1) - strlen(str));

        // needed for sizing limits of variadic printf, then send
        //  output as a single line message to stderr.
        size_t mlen = strlen(str);
        if (vsnprintf(str + mlen, sizeof(str)-mlen-1, fmt, vl) >= 0)
            fprintf(stderr, "%s\n", str);
        else
            fprintf(stderr, "%s: (max log message length exceeded)\n", msg);
    };
};

int main(int argc, char *argv[])
{
    Logger logger;

    logger.debug("Numbers %d %d %d", 1,2,3);
    logger.error("Strings %s %s %s", "1", "2", "3");
    logger.info("Mixed %s %d %p", "1", 2, "3");
    logger.info("No additional parameters required for this message.");

    // demonstrate automatic cutoff.
    char sbig[] = "0123456789012345678901234567890123456789"
                  "0123456789012345678901234567890123456789";

    logger.debug("Oversized params: %d-%s %d-%s %d-%s %d-%s", 
                 1, sbig, 2, sbig, 3, sbig, 4, sbig);
    return 0;
} 
```

# java - 将 Base64 编码的 md5 转换为可读的字符串

> ID：12823079
> 
> 赞同：0
> 
> 时间：2012-10-10T15:32:14.443
> 
> 标签：java, string, base64, md5

我有一个密码作为 md5 哈希存储在 ldap 中：`{MD5}3CydFlqyl/4AB5cY5ZmdEA==` 从外观上看，它是 base64 编码的。如何将从 ldap 接收的字节数组转换为可读的 md5 哈希样式字符串，如下所示：`1bc29b36f623ba82aaf6724fd3b16718`？哈希或 ldap 的一部分是否`{MD5}`添加了它并且应该在解码之前将其删除？

我尝试使用 commons base64 lib，但是当我这样称呼它时：

```
String b = Base64.decodeBase64(a).toString(); 
```

它返回这个 - `[B@24bf1f20`。可能这是一个错误的编码，但是当我将它转换为 UTF-8 时，我看到了不可读的字符。那么，我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:22:12.553

上面的答案似乎是针对 C# 的，因为 Java 中的 StringBuilder 类没有这样的 AppendFormat 方法。

这是正确的解决方案：

```
public static String getMd5Hash(String str) throws NoSuchAlgorithmException, UnsupportedEncodingException
{
  MessageDigest md = MessageDigest.getInstance("MD5");
  byte[] thedigest = md.digest(str.getBytes("UTF-8"));

  StringBuilder hexString = new StringBuilder();

  for (int i = 0; i < thedigest.length; i++)
  {
      String hex = Integer.toHexString(0xFF & thedigest[i]);
      if (hex.length() == 1)
          hexString.append('0');

      hexString.append(hex);
  }

  return hexString.toString().toUpperCase();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:37:28.720

decodeBase64 返回一个字节数组

要将其转换为十六进制数字字符串：

```
public static string ByteArrayToString(byte[] ba)
{
  StringBuilder hex = new StringBuilder(ba.Length * 2);
  foreach (byte b in ba)
    hex.AppendFormat("{0:x2}", b);
  return hex.ToString();
} 
```

# ios - 是否有任何有效的方法来搜索大型远程 XML 文件中的信息？

> ID：12823082
> 
> 赞同：1
> 
> 时间：2012-10-10T15:32:22.917
> 
> 标签：ios, xml, cocoa, parsing

我在一个 iOS 应用程序中工作，客户希望该应用程序在他的服务器提供的 XML 中执行搜索。问题是文件大小约为6MB。所以下载加解析加搜索可能会花费很多时间。所以我想知道是否有更有效的方法来执行这项任务？还是必须以不同的方式完成（根本没有 XML 文件）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:34:01.500

IMO，您应该做的是定义一个 API，让服务器在设备上解析和检索您需要的信息。

这种方法有很多优点，并且是最合适的，除非您的应用需要离线工作。在这种情况下，唯一可用的选项是下载文件并在本地解析它，但是，如您所见，这将在所需时间方面有其自身的成本。

# android - 更改移动热点配置

> ID：12823083
> 
> 赞同：1
> 
> 时间：2012-10-10T15:32:28.983
> 
> 标签：android, android-wifi

我正在尝试使用新名称和开放可访问性运行热点。

```
 wifiConfig.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN);
    wifiConfig.SSID = "\"MySSID\"";
    wifiConfig.networkId = 1;
    methodNum = getMethodNumber("setWifiApEnabled");
    try {
        wmMethods[methodNum].invoke(wifiManager, wifiConfig, true);
    } catch (IllegalArgumentException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (IllegalAccessException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (InvocationTargetException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } 
```

我得到了正确的方法，似乎它启动了手机上的热点，但配置没有改变。

我尝试使用 getWifiApConfiguration 获取当前配置数据，但我一无所获，没有 ssid，也没有当前加密。

我正在使用 HTC Evo 3d 进行调试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T08:04:08.650

一些 htc 手机似乎使用*HotspotProfile*类型的类来保持其配置。因此，在调用*setWifiApEnabled*之前，您需要以 htc 的方式设置 ssid：

```
if (isHtc) setHTCSSID(config);
methodNum = getMethodNumber("setWifiApEnabled");
try {
    wmMethods[methodNum].invoke(wifiManager, wifiConfig, true);
    ... 
```

isHtc 可以这样计算：

```
 try { isHtc = null!=WifiConfiguration.class. getDeclaredField("mWifiApProfile");  }
 catch (java.lang.NoSuchFieldException e) { isHtc = false } 
```

和 setHCSSID 将是：

```
public void setHTCSSID(WifiConfiguration config) {
    try {
        Field mWifiApProfileField = WifiConfiguration.class.getDeclaredField("mWifiApProfile");
        mWifiApProfileField.setAccessible(true);
        Object hotSpotProfile = mWifiApProfileField.get(config);
        mWifiApProfileField.setAccessible(false);

        if(hotSpotProfile!=null){
            Field ssidField = hotSpotProfile.getClass().getDeclaredField("SSID");
            ssidField.setAccessible(true);
            ssidField.set(hotSpotProfile, config.SSID);
            ssidField.setAccessible(false);

        }
    } catch(Exception e) {
        e.printStackTrace();
    }
} 
```

我在一些中文博客中找到了这个信息：http: [//xiaxingwork.iteye.com/blog/1727722](http://xiaxingwork.iteye.com/blog/1727722)和[http://blog.sina.com.cn/s/blog_53dd443a010109i8.html](http://blog.sina.com.cn/s/blog_53dd443a010109i8.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:21:27.127

看来是HTC的问题。我的一些朋友在 HTC 和其他设备上尝试过类似的代码。没有在HTC上工作，在其他人身上工作。

# visual-studio-2010 - VS 2010 滚动问题查看.cs 文件 C# 代码

> ID：12823084
> 
> 赞同：0
> 
> 时间：2012-10-10T15:32:32.190
> 
> 标签：visual-studio-2010, scroll

出于某种原因，当我从 *.cs 文件滚动代码时，VS2010 弄乱了不同的行（代码符号）。当我选择代码行时（当前行）显示正确，但所有其他行都混乱了。似乎 VS 在滚动期间不刷新屏幕。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:17:59.137

你有安装任何附加组件吗？如果是这样，当您尝试滚动时，其中之一可能会导致 VS 中的性能/渲染问题。禁用每个以查看问题是否自行解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T15:34:21.463

通过重新安装 Windows 7 和 VS 2010 解决了问题。

# javascript - 观察来自几个 jQuery UI 对话框的事件

> ID：12823085
> 
> 赞同：1
> 
> 时间：2012-10-10T15:32:33.150
> 
> 标签：javascript, jquery, jquery-ui, events, javascript-events

我需要从几个 jQuery UI 对话框中观察事件。它们都标配有[一些](http://api.jqueryui.com/dialog/#event-beforeClose)您可以收听的事件。到目前为止没有问题。

我可以使用它来将函数绑定到打开事件：

```
$(document).bind('dialogopen', function() {}); 
```

但是我需要区分事件起源于哪个对话框。例如：

```
$('#dialog1').dialog();
$('#dialog2').dialog(); 
```

打开它们中的任何一个都会触发相同的事件。绑定到文档的函数将在两个对话框打开时触发。这不是我所希望的。我找到了两种可能的解决方案，但都感觉不错，但至少可以完成这项工作。

**方案一：**通过open事件的回调函数触发自定义事件

```
// Trigger events
$('#dialog1').dialog({open: function() {
        $(this).trigger('dialog1open')
    }
});
$('#dialog2').dialog({open: function() {
        $(this).trigger('dialog2open')
    }
});

// Observe events
$(document).bind('dialog1open', function() {
    //actions specifik to dialog 1 open event
});
$(document).bind('dialog2open', function() {
    //actions specifik to dialog 2 open event
}); 
```

这种方式需要我为所有事件编写自定义函数，在启动它们时在所有对话框上，只是用特定于每个对话框的事件名称转发它。

**解决方案2：** 在事件参数中捕获目标。它看起来像这样：

```
$(document).bind('dialogopen', function(event) {
    el = event.target; // get the element triggering the event
    switch(el.id) { // Action depending on the triggers id
        case dialog1:
            //do something
            break;
        case dialog2:
            //do something else
            break
    }
}); 
```

另一方面，这种方式要求我为我有兴趣捕获的每个事件都有大量的切换案例。

在这里写一个包装插件是个好主意吗？一个插件，它强制你给`id`每个对话框一个。然后它将使用`id`as 前缀或后缀重新触发每个事件。例如，打开`#dialog1`会触发自定义事件`dialog1open`。

想法或具体解决方案将在这里受到赞赏

编辑：我没有提到的一个重要的事情是我有观察者，主题（喜欢`#dialog1`和`#dialog2`）不知道。必须考虑到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:51:05.223

我可能是错的，但似乎你在这里想多了这个问题。

如果您想绑定到单个对话框的打开事件，那么您正在使用解决方案 1 沿着正确的路径前进，但您不想触发该事件，因为一旦您进入该函数，该事件就已经被触发了。 .

```
// Trigger events
$('#dialog1').dialog({open: function() {
        // Don't do this.
        // $(this).trigger('dialog1open')

        // Just do what you want to do in response to this particular dialog opening.
    }
});
$('#dialog2').dialog({open: function() {
        // Again, don't do this.
        // $(this).trigger('dialog2open')

        // Just do what you want to do in response to this particular dialog opening.
    }
}); 
```

现在，如果您想获得一些代码重用（AKA，也许响应几乎相同），您可以编写一个单独的函数并传入参数来自定义响应。所以......像这样的东西：

```
$('#dialog1').dialog({
    open: openAlert("dialog1");
});
$('#dialog2').dialog({
    open: openAlert("dialog2");
});

function openAlert(dialogName) {
    alert(dialogName + " just opened up!");
} 
```

这样，您可以获得一些重用，但避免所有 case 语句等。（当然，您可以根据您的特定目的使这更复杂。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:57:51.253

我会将所有对话包装在一个 div 中，并为其附加一个侦听器。

```
$("#dialog_wrapper").delegate(".dialog", "dialogopen", function(e){
    var open_dialog_id = $(this).attr("id"); //get id of child dialog

    /* do whatever */
}); 
```

但我同意 JasCav，你可能想多了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T20:02:34.730

MalSu 用`.delegate`. 将 jQuery UI 和 jQuery 升级到我能够使用的最新版本`.on`

这是我的测试示例

**从`body`**

```
<div id="dialog1">Dialog number one</div>
<div id="dialog2">Dialog number two</div>
<button id="d1Opener">Open Dialog One</button>
<button id="d2Opener">Open Dialog Two</button> 
```

**从`<script>`**

```
$(document).ready(function() {
    $('#dialog1, #dialog2').dialog({
        modal: true,
        autoOpen: false
    });
    $('#d1Opener').click(function() {
        $('#dialog1').dialog('open');
    });
    $('#d2Opener').click(function() {
        $('#dialog2').dialog('open');
    });
    $(document).on('dialogopen', function() {
        console.log('A dialog was opened');
    });
    $(document).on('dialogopen', '#dialog1', function() {
        console.log('Dialog1 was opened');
    });
    $(document).on('dialogopen', '#dialog2', function() {
        console.log('Dialog2 was opened');
    });
}); 
```

# ios - performSegueWithIdentifier 在某些设备上不起作用

> ID：12823086
> 
> 赞同：2
> 
> 时间：2012-10-10T15:32:40.780
> 
> 标签：ios, ios6, uistoryboardsegue

我遇到了一个完全困扰我的问题。performSegueWithIdentifier 在大多数设备上都可以正常工作，但是当我在 ios 6.0 版的 iPad 上运行我的程序时，segue 没有发生。

这是我的代码的工作方式：

我打电话给 performSegue：

```
[self performSegueWithIdentifier:@"watchSegue" sender:self]; 
```

![故事板转场](../Images/ff0f0eb7baf14879caf986eb2ee06e11.png) 触发目标视图控制器的 initWithCoder ：

```
-(id) initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if ( self ) {

    }

    return self;
} 
```

触发 prepareForSegue：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender  {   
  ...
} 
```

这就是事情的不同之处。对于所有工作的设备，目标视图控制器的 viewDidLoad 被调用：

```
- (void)viewDidLoad
{
.... 
```

然而，对于 iPad iOS6.0，它不会被调用，也不会实际执行 segue。

需要注意的是，我实际上并没有不同的 iPad 应用程序，我只是在 iPad 上运行 iPhone 应用程序，因此代码和情节提要是相同的。

------------更新 1：我刚刚能够在运行 5.1.1 的 iPhone 上重现此错误。我无法理解为什么我的 segues 一直在工作（并且在这个版本中工作）并且在这种情况下他们停止工作......

-----------更新2：遗憾的是，这个答案不会对这个问题有更好的理解，也不会阻止它再次发生。然而，我确实解决了这个问题。

通过删除 segue 并将其重新添加到情节提要中，我能够解决问题。现在调用 viewDidLoad 并执行 segue。

如果有人能洞察可能出了什么问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:35:28.677

我不确定这是否 100% 正确，因为这似乎没有在 Apple 中记录，iOS6 的视图加载顺序已经改变。

在 iOS5 中，在调用 :prepareForSegue 之前，您的目标视图控制器已准备就绪并已加载视图。但是在 iOS6 中，目标视图控制器还没有加载视图。因此，如果您的代码修改了任何与 UI 相关的内容，它将无法在 iOS6 上运行。

我对此的解决方案是在 :prepareForSegue 中显式调用 [destVC loadView]

# ios - 当文件确实存在时，为什么 copyItemAtPath:toPath:userPath 无法复制文件？NSFileNoSuchFileError，可可错误代码 4

> ID：12823090
> 
> 赞同：2
> 
> 时间：2012-10-10T15:32:46.340
> 
> 标签：ios, cocoa, file, sqlite, copy-item

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
// Override point for customization after application launch.
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
UISplitViewController *splitViewController = (UISplitViewController *)self.window.rootViewController;
UINavigationController *navigationController = [splitViewController.viewControllers lastObject];
splitViewController.delegate = (id)navigationController.topViewController;
}

NSString *dbFilename = @"CoordinatesDatabase.sql";
NSString *userPath = [[CoordinatesAppDelegate applicationDocumentsDirectory] stringByAppendingPathComponent: dbFilename];
NSString *srcPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent: dbFilename];
NSLog(@"userPath %@", userPath);
NSLog(@"srcPath %@", srcPath);
NSFileManager *fileManager = [NSFileManager defaultManager];

BOOL foundInBundle = [fileManager fileExistsAtPath: srcPath];
BOOL foundInUserPath = [fileManager fileExistsAtPath: userPath];
BOOL copySuccess = FALSE;

NSError *error;

if(foundInBundle)
{
    if(!foundInUserPath)
    {
        NSLog(@"don't have copy, copy one");
        copySuccess = [fileManager copyItemAtPath: srcPath toPath: userPath error: &error];
    }
    if(!copySuccess)
    {
        NSLog(@"Failed with message: %@'.", [error localizedDescription]);
    }
}
else
{
    NSLog(@"Some error");
}
return YES;
} 
```

根据foundInBundle，CoordinatesDatabase.sql 存在于应用程序包中。为什么不能出现“copySuccess = [fileManager copyItemAtPath: srcPath toPath: userPath error: &error];” 成功的？

它产生的错误类似于“无法完成操作。可可错误 4”。根据我的谷歌搜索，Cocoa Code Error 4 表示 NSFileNoSuchFileError 但我很确定 CoordinatesDatabase.sql 存在于应用程序包中。

或者我错了 CoordintesDatabase.sql 确实存在于应用程序包中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:44:53.273

您无法创建、删除或更改应用程序包中的文件。您必须将文件写入正确的文档或缓存文件夹。这也有点复杂，因为 iOS4 和 iOS5 之间的规则发生了变化。

此外，您的应用程序可能会因在错误的文件夹中创建文件而被拒绝。我最终编写了一种方法来根据他们正在运行的操作系统版本来处理文档文件夹的创建......并且当用户升级手机中的操作系统时，它支持将数据从旧文件夹迁移到新文件夹。你也应该这样做。

我建议你看看这里处理这个问题的其他问题：[iOS PhoneGap app denied because of the use of localStorage](https://stackoverflow.com/questions/12282032/ios-phonegap-app-rejected-because-of-the-use-of-localstorage)

# uitableview - 在iOS6中使用NSLayoutConstraints做一个UITableView的页脚，贴到最后一段的底部，贴到UIScrollView的底部？

> ID：12823095
> 
> 赞同：3
> 
> 时间：2012-10-10T15:32:58.927
> 
> 标签：uitableview, uiscrollview, table-footer, nslayoutconstraint

在 Interface Builder 中，当使用`UITableViewController`我添加了一个空白视图的表页脚视图时，似乎不可能直接向它添加约束。

当我选择表的页脚视图，然后选择一个约束时，所有的约束都是灰色的。这是一个错误还是（更有可能）我错误地假设您不能将表格页脚视图限制为`UIScrollView`

- - - 编辑 - - -

另外，我尝试在代码中添加它...

```
[self.tableView.tableFooterView setTranslatesAutoresizingMaskIntoConstraints:NO];

//      Setup constraints
//
NSDictionary *viewsDictionary = @{@"superView" : self.view, @"tableView" : self.tableView,  @"tableFooterView" : self.tableView.tableFooterView};

//          Footer
//
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[tableFooterView]|"
                                                                                       options:0
                                                                                       metrics:nil
                                                                                         views:viewsDictionary]]; 
```

但我只是在输出中得到这个：

```
2012-10-10 16:29:04.606 myApp[632:c07] *** Assertion failure in -[UITableView layoutSublayersOfLayer:], /SourceCache/UIKit_Sim/UIKit-2372/UIView.m:5776
2012-10-10 16:29:04.608 myApp[632:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Auto Layout still required after executing -layoutSubviews. UITableView's implementation of -layoutSubviews needs to call super.'
*** First throw call stack:
(0x199b012 0x17c0e7e 0x199ae78 0x1256f35 0x7589ef 0x17d46b0 0x622fc0 0x61733c 0x622eaf 0x7f78cd 0x7401a6 0x73ecbf 0x73ebd9 0x73de34 0x73dc6e 0x73ea29 0x741922 0x7ebfec 0x738bc4 0x738dbf 0x738f55 0x741f67 0x705fcc 0x706fab 0x718315 0x71924b 0x70acf8 0x27e8df9 0x27e8ad0 0x1910bf5 0x1910962 0x1941bb6 0x1940f44 0x1940e1b 0x7067da 0x70865c 0x6d4d 0x2615)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:10:45.507

我也遇到了同样的[错误](https://stackoverflow.com/questions/13627452/customtablecellviews-implementation-of-layoutsubviews-needs-to-call-super-ns)，但在你的情况下尝试 **临时修复：** 禁用自定义单元格 Xib 中的自动布局，然后构建

# spring - 在 Spring Batch 中打开新事务 - @AfterJob 事件？

> ID：12823099
> 
> 赞同：1
> 
> 时间：2012-10-10T15:33:17.527
> 
> 标签：spring, transactions, spring-batch

我正在使用 Spring Batch 框架，我想知道是否可以在事件中打开新`@AfterStep`事务`@AfterJob`？

我看到当我尝试在这些事件中执行 SQL 查询时，当前事务已关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T12:40:48.760

您是否尝试使用 @Transactional 注释和使用 REQUIRES_NEW 来注释您的方法？

# java - EGit 2.1.0 和 Eclipse 4.2.1 的 Ignored Resources 是否损坏？

> ID：12823101
> 
> 赞同：1
> 
> 时间：2012-10-10T15:33:19.430
> 
> 标签：java, eclipse, git, eclipse-plugin, egit

我已经使用 Eclipse 和 EGit 好几个月了，在最近运行 Eclipse 更新程序时，我发现 EGit 似乎并不尊重 Ignored Resources 首选项。

EGit 是否将其配置存储在其他地方？这两个版本之间有错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:08:54.970

从 EGit 2.1 开始，“被忽略的资源”不再受到尊重。您应该使用`.gitignore`文件中的条目明确忽略它们并提交文件。

此更改的原因是该`.gitignore`文件也可以在 Eclipse 之外使用，例如，当您使用命令行或其他人使用不同的工具时。

有关详细信息，请参阅[错误 359052](https://bugs.eclipse.org/bugs/show_bug.cgi?id=359052)。

# asp-classic - 在经典 ASP 中控制空数组

> ID：12823102
> 
> 赞同：0
> 
> 时间：2012-10-10T15:33:28.203
> 
> 标签：asp-classic

好的，我是 ASP 的新手。

我有一个加载不同内容的客户端，具体取决于数组中传递的内容。

```
select case lcase(arURL(4)) 
```

有时，`arURL(4)`可能是空的，在这种情况下，我会收到以下错误：

错误运行函数`functionName()`，错误是：

> 下标超出范围

有人知道解决这个问题的方法吗？

谢谢

按要求确定进一步的代码。这是可怕的代码，我并不是要让任何人头疼，所以请原谅。再次感谢 ........

```
function GetContent()
    dim strURL, arURL, strRetval
    select case lcase(request.ServerVariables("URL"))
        case "/content.asp"
            strURL = ""
            arURL = split(request.querystring("url"), "/")
            if request("page") = "" then
                select case lcase(arURL(2))
                    case "searches"
                        select case lcase(arURL(1))
                            case "looking"
                                select case lcase(arURL(3))
                                    case "ohai"
                                        strRetval = "Lorem"
                                    case "blahblah"
                                        strRetval = "Lorem Ipsum"                        
                                    case "edinburgh"
                                        select case lcase(arURL(4))
                                            case "ohai"
                                                strRetval = "Ipsum"
                                            case "ohno"
                                                strRetval = "Lorem"
                                        end select
                                    case "bristol"
                                        select case lcase(arURL(4))
                                            case "some_blahblah"
                                                strRetval = "LOREM"
                                            case "overthere"
                                                strRetval = "LOREM"
                                            case "blahblah"
                                                strRetval = "LOREM"
                                        end select
                                    case "cambridge"
                                        select case lcase(arURL(4))
                                            case "some_rubbish"
                                                strRetval = "Lorem"
                                        end select
                                    case else
                                        strRetval = " "
                                end select
                            case else
                                strRetval = " "
                        end select
                    case else
                        strRetval = " "
                end select 
            end if
    end select 
    strRetval = strRetval & "<style>h2{border: 0px);</style>"
    GetContent = strRetval
end function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T07:49:47.417

您正在使用通过查询字符串传递的值并将其拆分为“/”字符 - 当该值不包含“足够”的斜杠时，您将收到错误并且代码将崩溃。

例如，如果查询字符串参数`url`只有“/something”，那么甚至`arURL(2)`会失败，因为数组只有两个项目。（第一个是空字符串，第二个是“something”）

为了避免所有这些混乱，我建议的最好方法是编写自定义函数，该函数将数组和索引作为其参数，如果存在则返回给定索引中的项目，否则返回空字符串：

```
Function GetItemSafe(myArray, desiredIndex, defValue)
    If (desiredIndex < LBound(myArray)) Or (desiredIndex > UBound(myArray)) Then
        If IsObject(defValue) Then
            Set GetItemSafe = defValue
        Else  
            GetItemSafe = defValue
        End If
    Else  
        If IsObject(myArray(desiredIndex)) Then
            Set GetItemSafe = myArray(desiredIndex)
        Else  
            GetItemSafe = myArray(desiredIndex)
        End If
    End If
End Function 
```

（最终得到更通用的版本，让调用代码决定默认值是什么，以防索引超出数组范围）

有了这个，更改您的代码以使用该函数而不是直接访问数组。

例如这一行：

```
select case lcase(arURL(2)) 
```

应该变成这个：

```
select case lcase(GetItemSafe(arURL, 2, "")) 
```

相应地更改这些行的其余部分，当给定值无效时，您将不再收到错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:37:38.737

该错误在最基本的层面上说的是您试图从不存在的数组元素中获取信息，例如 arURL 可能已为 3 个元素声明，但访问第 4 个元素会生成“下标超出范围“ 错误。

如果您键入数组中的最后一个元素，您可能会查看 UBound() 函数，它返回数组中的高索引元素，例如：

```
select case lcase(arURL(ubound(arURL)) 
```

但是，代码中可能会发生其他事情，这会改变您确定应将哪个元素用作“选择案例”的目标的方式，因此建议发布更多代码。

# c++ - 将库和 dll 包含到 c++ 项目中

> ID：12823105
> 
> 赞同：0
> 
> 时间：2012-10-10T15:33:44.270
> 
> 标签：c++, visual-studio-2010, dll, dynamic-linking

我有一个第三方库（比如 tp.lib）和第三方 dll（比如 tp.dll），我需要在我的 C++ 项目中使用它们（我的项目制作了一个 dll，我们称之为 my.dll）。

我已经在头文件中包含了带有#pragma comment(lib, "libraryname") 的库，并且还在我的 C++ Visual Studio 项目的*configurationproperties->linker->additional library 目录中包含了库文件的路径。*

代码编译和链接正常。但无法执行。当我使用依赖检查我是否遗漏了什么时，我观察到找不到 tp.dll。tp.dll 位于 tp.lib 所在的同一库文件夹中。

我应该怎么做才能将 tp.dll 包含到 my.dll 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:41:05.287

DLL 有不同的搜索路径。[从文档](http://msdn.microsoft.com/en-us/library/7d83bc18%28v=vs.110%29.aspx)中引用以下内容：

> 对于隐式和显式链接，Windows 首先搜索“已知 DLL”，例如 Kernel32.dll 和 User32.dll。然后 Windows 按以下顺序搜索 DLL：
> 
> 1.  当前进程的可执行模块所在的目录。
>     
>     
> 2.  当前目录。
>     
>     
> 3.  Windows 系统目录。GetSystemDirectory 函数检索此目录的路径。
>     
>     
> 4.  Windows 目录。GetWindowsDirectory 函数检索此目录的路径。
>     
>     
> 5.  PATH 环境变量中列出的目录。
>     
>     
> 
> 注意 不使用 LIBPATH 环境变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:37:19.987

运行时的搜索路径不包括放置 lib 库的文件夹，因此将 DLL 与 lib 一起放置不会使操作系统在运行时找到它。您可以将其添加到路径中，或移动 DLL。[搜索优先级列表在 MSDN](http://msdn.microsoft.com/en-us/library/7d83bc18%28v=vs.80%29.aspx)上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:38:32.113

您不能“将 dll 包含到另一个 dll 中”。您需要将它们部署在一起，或者将依赖项 dll 放在[Windows 可以找到它](http://msdn.microsoft.com/en-us/library/7d83bc18%28v=vs.80%29.aspx)的位置。

# javascript - 如何在我的 CRM 4 自定义表单上实施“全选”复选框？

> ID：12823108
> 
> 赞同：0
> 
> 时间：2012-10-10T15:34:02.490
> 
> 标签：javascript, dynamics-crm-4

我正在开发一个自定义 CRM 表单，其中包含许多按部分组织的复选框。我想为表单实现一个“全选”功能，并试图了解如何格式化 JavaScript。到目前为止，我的研究表明我可以使用 FOR 语句来遍历我想要处理的部分中的所有元素，并相应地设置它们的值，但我不确定使用哪种 document.getElements ... 方法。

这是与我上面提到的 FOR 迭代相关的现有 SO 问题：

[如何在 javascript 中获取特定 HTML 标记的所有元素？](https://stackoverflow.com/questions/6842710/how-do-i-get-all-elements-of-a-particular-type-in-javascript)

我不确定我是否知道我需要使用该方法为我的字段引用什么标签名称。它们是 BIT 类型，与标签名称相同吗？我已经导出了实体的自定义文件并且可以访问该组字段的类 ID，是否有我可以使用的方法来传递该数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:36:49.937

我想到了; 通过 JavaScript 使用 DOM，我能够遍历表单部分中的复选框项目。

```
var section = document.getElementById("{5d86cfd1-4612-e211-8c63-0015c5f7fc75}");
var fields = section.getElementsByTagName("input");

if (crmForm.all.tmi_selectallwtm.DataValue == true) {
    for (i = 0; i < fields.length; i++) {
        if (fields[i].className == "ms-crm-CheckBox") {
            fields[i].DataValue = true;
        }//end IF
        else {}

    }//end FOR
}//end IF
else {
    for (i = 0; i < fields.length; i++) {
        if (fields[i].className == "ms-crm-CheckBox") {
            fields[i].DataValue = false;
        }//end IF
        else {}
    }//end FOR
}//end ELSE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:06:42.477

在您的 crm 表单中，为“全选”复选框选择更改属性，并将以下内容添加到 on change 方法中

```
crmForm.all.[one of my checkboxen].DataValue = crmform.all.[my select all box].DataValue; 
```

将 [one of my checkboxen] 替换为复选框的名称（可能是 new_something），将 [my select all box] 替换为您的全选框的名称。

为您要控制的每个复选框添加一行。

这不是一个理想的解决方案，因为每次添加或删除复选框时都必须不断更新代码，但它具有可以工作的优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:25:07.233

```
var section = document.getElementById('a');
var fields = section.getElementsByTagName("input");

    for (i = 0; i < fields.length; i++) {

            fields[i].checked= true;

    } 
```

# javascript - 有没有办法只使用 javascript 而没有正则表达式来获取当前目录？

> ID：12823110
> 
> 赞同：0
> 
> 时间：2012-10-10T15:34:05.383
> 
> 标签：javascript

有没有办法只获取当前目录（包含正在使用的网页的目录），而不使用正则表达式来分解 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:39:53.650

不确定这是否是您正在寻找的，但是

```
location.host 
```

或者

```
location.pathname 
```

可能会给你你正在寻找的东西。如果是这样，请查看有关位置对象 [http://www.w3schools.com/jsref/obj_location.asp的更多信息](http://www.w3schools.com/jsref/obj_location.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:43:06.480

尝试关注

```
 var urlChunks = location.href.split('/');
 alert(urlChunks[urlChunks.length - 1]); 
```

[http://jsfiddle.net/SEXnh/5/](http://jsfiddle.net/SEXnh/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:45:18.873

不会。网页在浏览器中加载时没有目录。它有一个 URL（浏览器获取网页所遵循的路径），但该 URL 不一定与原始 html 页面存储在处理请求的服务器上的路径结构相关。

# html - 垂直对齐父级中的 div

> ID：12823113
> 
> 赞同：0
> 
> 时间：2012-10-10T15:34:22.783
> 
> 标签：html, css

我想垂直对齐 div“.person-user”，使其垂直位于父元素“.person”的中心（文本位于照片的中心但在右侧）我该怎么做?

谢谢

[http://jsfiddle.net/mpBW5/5/](http://jsfiddle.net/mpBW5/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:39:53.750

**接下来是标记和样式的组合，无需 JavaScript 和 JQuery 即可**完成您想要的。

### 标记：

```
<div class="person">
    <img class="profile" src="http://sphotos-a.xx.fbcdn.net/hphotos-ash4/320450_10151028382307410_534533150_n.jpg"/>
    <div class="profile">
        <div class="name">Colin Pacelli</div>
        <div class="fact">Ohio University</div>
    </div>
</div>​​​​​​​ 
```

### 风格：

```
.person {
    display: table;
}

.person img.profile{
    height: 50px;
    margin-right: 10px;
    /*border-radius: 4px 4px 4px 4px;*/
}

.person div.profile {
    display: table-cell;
    vertical-align: middle;
    /*font-family: calibri;
    font-size: 14px;
    color: #444;*/
}

/*.person .profile .name {
    font-weight: bold;
}*/ 
```

我已经注释掉了主要不影响解决方案的规则，因此所有人都可以看到如果做得好，CSS 需要多少。与使用在虚拟机上运行的 32Kb 客户端代码运行的 10 行代码相比。你认为 Adob​​e Flash Player 是邪恶的。我不太介意 JQuery，尤其是对于它可以做得很好的事情，但坦率地说，将 JQuery 包含在纯粹风格的明确案例中有点过分了。

正如您可能想象的那样，我已经编辑了您的 JSFiddle，去除了不必要的内容并将其缩减为一个最小的示例，该示例展示了所需的行为，同时保留了视觉效果。

由于您将`html`and指定`css`为标记，并且由于在几乎所有情况下都可以避免使用 JavaScript/JQuery 是一个更好的主意，因此我真的会使用像上面这样的标记和样式解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:47:03.977

这应该是简单的事情，但实际上是一件很痛苦的事情。这是一个快速的 jsFiddle，在 person div 上使用 display: table，在图片包装器和 info div 上使用 display: table-cell：

[http://jsfiddle.net/2yfDs/1/](http://jsfiddle.net/2yfDs/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:07:29.427

最精确的方法是使用 jQuery 并为每个 div 动态计算它。如果某些/所有图像/文本 div 具有不同的高度，这将很有用。[例子](http://jsfiddle.net/mpBW5/15/)。_ 编码：

```
$("div.person-user").each(function() {
    $(this).css("marginTop", function() {
        var imgH = $(this).prev("div.person-user-pic").height(),
        thisH = $(this).height(),
        h = (imgH/2) - (thisH/2);
    return h;
    });
});​ 
```

但是：如果每个 div 和图像具有相同的高度，你可以这样做：

```
div.person-user {margin-top: 8px;} 
```

我希望这能回答你的问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T15:40:17.230

这是一个非常常见的问题，到目前为止最好的解释在这里：

[http://phrogz.net/css/vertical-align/index.html](http://phrogz.net/css/vertical-align/index.html)

# django - Django 随机查询

> ID：12823116
> 
> 赞同：1
> 
> 时间：2012-10-10T15:34:31.917
> 
> 标签：django

在views.py

我想用我的过滤器随机选择一条记录：

```
a=Entry.objects.filter(first_name__contains='Br')).order_by('?')[0]
b=a.id
c=Entry.objects.filter(first_name__contains='Br')).order_by('?')[0]
d=c.id 
```

b 和 d 可能相同。

但我的目标是每次获取不同的条目对象和 ID。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:45:55.973

在同一个查询中获取两个对象怎么样？这样你就知道你有两个不同的条目。

```
a, c = Entry.objects.filter(first_name__contains='Br')).order_by('?')[0:2]
b = a.id
d = c.id 
```

请注意，`ValueError`如果过滤器匹配的条目少于两个，这将引发 a。

# sql - 如何获取系统间缓存中的模式列表？

> ID：12823127
> 
> 赞同：5
> 
> 时间：2012-10-10T15:35:11.503
> 
> 标签：sql, intersystems-cache

我正在使用 ODBC 驱动程序连接到 Caché 数据库，并且我想进行查询以获取模式列表。在 Microsoft SQL Server 中，我可以使用如下查询：

```
SELECT * FROM INFORMATION_SCHEMA.SCHEMATA 
```

我怎样才能在 Caché 中做到这一点？我也在使用 ADO.NET 架构集合，但架构似乎在那里不可用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T00:02:52.400

架构 %dictionary 包含您要查找的表。您可以从 %dictionary.compiledclass 中选择

# jsf - 如何在 c:forEach 循环中动态设置结束值和开始值？

> ID：12823128
> 
> 赞同：1
> 
> 时间：2012-10-10T15:35:12.807
> 
> 标签：jsf, facelets, icefaces, mojarra

下午好。

我有以下问题，属性值结束

```
<c: foreach should vary for each row in the datatable, eh trying with expression language but simply does not work. 
```

这是代码：

```
<ace:dataTable  value="#{TreeTableBk.rubros}" var="rubro"
                paginator="true" paginatorPosition="bottom" rows="10" style="font-size: 12px; font-family: Tahoma, Verdana, Arial, Sans-Serif">
                <ace:column
                    headerText="Informacion">
                    <div align="left">
                    <h:panelGroup>
                        <c:forEach begin="0" end="#{rubro.nivel}">
                            <h:outputText value="__*"></h:outputText>
                        </c:forEach>
                        <h:inputText 
                        value      = "#{rubro.codigoPadre}"
                        rendered   = "#{rubro.final_ == 'N'}"
                        styleClass = "SMRInputTextNegrilla6" 
                        style      = "background-color:#A5CCE7">
                        </h:inputText>
                    <h:inputText 
                        value      = "#{rubro.codigoPadre}"
                        rendered   = "#{rubro.final_ == 'S'}"
                        styleClass = "SMRInputTextNegrilla6" >
                    </h:inputText>
                    <h:inputText 
                        value      = "#{rubro.codigo}"
                        styleClass = "SMRInputTextNegrilla6" 
                        style      = "background-color:#D1F2C7">
                    </h:inputText>
                    <h:inputText 
                        value      = "#{rubro.descripcion}"
                        styleClass = "SMRInputTextNegrilla6" >
                    </h:inputText>
                    <h:inputText value="#{rubro.nivel}" styleClass="SMRInputTextNegrilla6">
                    </h:inputText>
                    </h:panelGroup>
                    </div>
                </ace:column>
            </ace:dataTable> 
```

任何想法如何解决这个问题都会有所帮助。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:20:23.427

标记处理程序（例如`<c:forEach>`在构建视图期间运行，而不是在渲染视图期间运行）。UI 组件`<h:dataTable>`在渲染视图期间运行，而不是在构建视图期间运行。因此，在运行的那一刻`<c:forEach>`，`<h:dataTable>`它没有运行，因此它`var="rubro"`在 EL 范围内永远不可用，因此`#{rubro}`inside`<c:forEach>` *总是*评估为`null`.

因此，`<c:forEach>`对于这个特定的功能需求来说，这是完全不可能的。您最好的选择是使用`<ui:repeat>`. 但是，这不支持类似 的`begin`and`end`属性的任何东西`<c:forEach>`。但是，您可以创建一个[自定义 EL 函数](https://stackoverflow.com/questions/7079978/how-to-create-a-custom-el-function/7080174#7080174)，该函数创建一个给定大小的虚拟数组，然后将其提供给`<ui:repeat value>`.

例如

```
<ui:repeat value="#{my:createArray(robro.nivel)}">
    <h:outputText value="__*" />
</ui:repeat> 
```

和

```
public static Object[] createArray(int size) {
    return new Object[size];
} 
```

JSF 实用程序库[OmniFaces 正好](http://omnifaces.org)有一个功能用于此目的，另[请](http://showcase.omnifaces.org/functions/Arrays)`of:createArray()`参见[展示示例](http://showcase.omnifaces.org/functions/Arrays)。[`of:createArray()`](http://showcase.omnifaces.org/functions/Arrays)

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)
*   [如何创建自定义 EL 函数来调用静态方法？](https://stackoverflow.com/questions/7079978/how-to-create-a-custom-el-function/7080174#7080174)

# php - 未设置静态变量？

> ID：12823130
> 
> 赞同：0
> 
> 时间：2012-10-10T15:35:14.780
> 
> 标签：php, variables, static, set

我搜索了一下，发现了这个问题，这对我有帮助： [php static variable is not getting set](https://stackoverflow.com/questions/7049379/php-static-variable-is-not-getting-set)

然而，它并没有解决我的全部问题。

代码：

```
Class DummyClass {
    public static $result;

    function __construct() {
        $this->_setResultCode('testing');
    }

    public function getResultCode() {
        return self::$result['code'];
    }

    private function _setResultCode($val) {
        echo 'Im gonna set it to: ' . $val . '<br />';
        self::$result['code'] = $val;
        echo 'I just set it to: ' . $this->getResultCode;
        die();
    }
} 
```

输出：

```
Im gonna set it to: testing
I just set it to: 
```

这里发生了什么？这怎么可能？

* * *

**编辑：**问题是我在调用 getResultCode() 时错过了括号。但是，我现在有另一个问题。我似乎无法从类中获取 resultCode（稍后在 DummyClass 的另一个实例中）。

这是我的相关代码（没有更多示例代码，因为我似乎把它搞砸了）：

```
Class lightweightContactFormPlugin {

// Set up/Init static $result variable
public static $result;

function __construct() {
    //echo 'I just inited<br/><pre>';
    //var_dump($this->getResultCode());
    //echo '</pre><br/>';
}

public function run() {

    // Set default value for resultCode
    $this->_setResultCode('no_identifier');

    // Check if form was posted
    if(isset($_POST['cfidentifier'])) {
        $fields = $this->_get_fields_to_send();
        $valid = $this->_validate_fields($fields);

        // Only continue if validatation was successful
        if($valid == true) {
            // Store mail result in $mail
            $mail = $this->_send_mail($fields);

            // Yay, success!
            if($mail) {
                $this->_setResultCode('sent_successfully');
                return;
            } else {
                // Couldn't send mail, bu-hu!
                $this->_setResultCode('not_sent');
                return;
            }
        }
        $this->_setResultCode('validation_fail');
        return;
    }
}

    // Get and Set methods
public function getResultCode() {
    return isset(self::$result['code']) ? self::$result['code'] : '';
}

private function _setResultCode($val) {
    self::$result['code'] = $val;
}
} 
```

留下一些不相关的方法。其他方法都没有设置或获取 resultCode，这无关紧要。

有什么想法为什么我无法在对象的另一个实例中访问 $result['code'] （页面下方）？

当我访问它时，我会这样做：

```
 $plugin = new lightweightContactFormPlugin();
    $cfstat = $plugin->getResultCode();
    echo '<pre>';
    var_dump($fstat);
    echo '</pre>'; 
```

结果是：

```
NULL 
```

奇怪的是，如果我取消注释 __construct() 中的代码，正确的值会被打印出来！但是如果我之后尝试从 getResultCode() 访问它，它会再次返回 NULL。到底是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:37:53.227

```
echo 'I just set it to: ' . $this->getResultCode; 
```

我认为您在这里缺少一些括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:39:12.113

您必须调用 getResultCode() 作为方法。

```
 echo 'I just set it to: ' . $this->getResultCode(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:24:57.547

A. 你的代码是错误的......`__constructor`它应该是 PHP中的任何东西

```
 function __construct() { 
```

B. 您的代码还应返回以下内容，因为`getResultCode`未设置

```
 Notice: Undefined property: DummyClass::$getResultCode 
```

你应该打电话

```
 echo 'I just set it to: ' . $this->getResultCode(); 
```

你的最终代码：

```
class DummyClass {
    public static $result;

    function __construct() {
        $this->_setResultCode('testing');
    }

    public function getResultCode() {
        return self::$result['code'];
    }

    private function _setResultCode($val) {
        echo 'Im gonna set it to: ' . $val . '<br />';
        self::$result['code'] = $val;
        echo 'I just set it to: ' . $this->getResultCode();
        die();
    }
}

new DummyClass(); 
```

输出

```
Im gonna set it to: testing
I just set it to: testing 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T15:37:03.800

你没有回报`getResultCode()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T15:38:34.630

像这样使用返回

```
public function getResultCode() {
    return self::$result['code'];
} 
```

并使用`$this->getResultCode();`

**编辑**

我能看到的唯一问题是你刚刚写`return;`了，因为它返回了`NULL`，把它改成

```
return $this->getResultCode(); 
```

# jquery - jQuery调整大小仅部分工作

> ID：12823135
> 
> 赞同：0
> 
> 时间：2012-10-10T15:35:23.560
> 
> 标签：jquery, window-resize, jquery-resizable

好的，首先，我不太熟悉javascript，所以如果这看起来是一个非常愚蠢的问题，请原谅......

这是我的代码，用于根据**窗口高度**（徽标、标题）和导航栏根据**动态大小的徽标和标题的宽度**动态调整标题项的大小：

```
function titlesize (){
  var winsize = {
    width: document.documentElement.clientWidth || window.innerWidth || document.body.offsetWidth,
    height: document.documentElement.clientHeight || window.innerHeight || document.body.offsetHeight
  };

  var titlefont = $(".title");
  var logo= $(".logo");
  var logow = winsize.height * 0.2;
  var logoh = winsize.height * 0.15;
  var titlefontsize = winsize.height * 0.03;
  var titlew = titlefontsize * 7;

  if (winsize.height > 580) {
    logo.css({width: logow, height: logoh});
    titlefont.css('font-size', function(){return (titlefontsize);});
    titlefont.css('width', function(){return (titlew);});
  }
  else {
    var logow = "150";
    var logoh = "100";
    var titlew = "122.5";
    logo.css({width: logow, height: logoh});
    titlefont.css({'font-size': "17.5px", width: titlew});
  }

  if ((winsize.width > 480) && ((winsize.width * 0.9) < (logow + titlew + 420))) {
    $("nav").css({float: "left"});
  }
}
$(document).ready(function() {titlesize(); $(window).resize(titlesize);$(window).load(titlesize);}); 
```

解释：我有一个标题徽标和文本根据**窗口高度**而不是通常的宽度动态调整大小，因此整体标题不会占用太多屏幕（尤其是在横向移动设备上）。

然后将放置导航栏：如果有足够的空间，则位于右上角（默认），或位于标题下方（float:left）。

问题是：窗口调整大小确实可以很好地调整徽标和文本的大小，但不能调整导航栏。这只会对重新加载做出反应，而不会对调整大小做出反应。有什么理由吗？

我怀疑这是因为从第一个 if else 语句派生的那些动态变量的依赖性。我很确定有一个简单的解决方案，但是什么？

谢谢你的帮助。

PS：试图制作一个 jsfiddle，但它给了我 POST 错误（不知道为什么，没有表单提交或类似的东西）

**编辑和解决方案**

弄清楚为什么它不起作用：只是在 var 声明中犯了一个错误

我将`else`函数 vars *logow*和*titlew的部分设置为***引号**中的固定值，因此 js 将它们视为文本而不是数字。因此，导航的计算就搞砸了。将这些变量声明为数字 ( `var logow = 150;`) 就可以了。

尽管如此，感谢您的帮助和高度媒体查询的重要提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:35:31.950

多米尼克六月是对的。您可以对高度使用媒体查询：

[http://trentwalton.com/2012/01/11/vertical-media-queries-wide-sites/](http://trentwalton.com/2012/01/11/vertical-media-queries-wide-sites/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:42:06.480

您正在准备好在文档中调整大小。如果你有：

```
$(document).ready(function(){
//some code
});

$(window).resize(function(){
//your resize code
}); 
```

它应该一直有效。尽管媒体查询看起来要简单得多。

# c++ - 如何在 QString/QDebug 中使用 Unicode 字符？

> ID：12823136
> 
> 赞同：0
> 
> 时间：2012-10-10T15:35:23.620
> 
> 标签：c++, qt, unicode, utf-8, qt-creator

> **可能重复：**
> [在实例化 QApplication 后 qDebug() 时，我失去了“unicodeness”](https://stackoverflow.com/questions/7667407/i-lose-unicodeness-when-qdebuging-after-instancing-a-qapplication)

我正在尝试在我的项目中使用 Unicode 字符，但是 Unicode 字符正在转换为某些值（例如：？）。

```
#include <QtCore/QCoreApplication>
#include <QTextCodec>
#include <QDebug>
int main(int argc, char *argv[]) {
  QCoreApplication a(argc, argv);
  QTextCodec *codec = QTextCodec::codecForName("UTF-8");
  QTextCodec::setCodecForCStrings(codec);
  //Unicode character here is '
  QString unicode = "Hello I’ve to go";
  qDebug() << "Unicode String: " << unicode;
  return a.exec();
} 
```

上面的代码将字符串值打印为**Hello I?ve to go**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:55:56.187

C++11 增加了对 unicode 字符的支持。尝试正确转义该 Unicode 字符：

```
u8"Hello I\u2019ve to go" 
```

[这对我有用](http://ideone.com/dyalc)。尽管您的字体中完全有可能没有 U+2019 代码点，但它会将其绘制为`?`正确字符的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:10:33.853

**test.txt** (utf-8)

> 你好我得走了。
> 
> 这是另一个测试。

**主文件**

```
#include <QtCore>

int main(int argc, char *argv[]) {
  QCoreApplication a(argc, argv);
  QString unicode = QString::fromUtf16(L"Hello I\u2019ve to go");
  qDebug() << "Unicode String: " << unicode;

  QFile in_file("test.txt");

  if (!in_file.open(QIODevice::ReadOnly | QIODevice::Text)) {
    return -1;
  }

  QTextStream in(&in_file);
  while(!in.atEnd()) {
    QString line = in.readLine();
    qDebug() << line;
  }
} 
```

**输出：**

```
Unicode String:  "Hello I’ve to go" 
"Hello I’ve to go." 
"Here is another test." 
```

它使用硬编码值和运行时读取的值工作。我怀疑在您读取文件时出现问题，即您使用了错误的编码或转换为 Latin-1 编码或其他东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:59:06.807

编译器将字符串文字从源编码转换为执行编码。您使用的执行编码显然无法处理该字符，因此将其替换为“？”。

如果您的编译器支持该执行编码（gcc 使用 flag ），您需要选择不同的执行编码，`-fexec-charset`或者欺骗不支持该执行编码的编译器（例如 Visual Studio）不执行此转换，方法是对源编码撒谎是。

您可以通过将源代码设置为不带签名的 UTF-8 来对 VS 撒谎。VS 将假定源编码是系统的“非 Unicode 程序的编码”，这与它用于执行编码的相同。因为它会认为编码是相同的，所以它不会执行任何转换并且字符串文字将是 UTF-8。您必须小心避免源代码中编译器需要知道正确编码的其他任何内容。例如，如果您这样做，那么宽字符串文字将无法正确转换。

另一个解决方案是新的 C++11 UTF-8 字符串文字：`u8"Hello I’ve to go"`. 这些由编译器从源编码转换为 UTF-8，而不是执行编码。不幸的是，Visual Studio 还不支持 UTF-8 字符串文字。

* * *

在上面的评论中你说“在我的真实项目中，这个值是从文件名中读取的。” 这表明与您的问题中所展示的问题完全不同。解决这个问题将需要有关您如何准确获取文件名的详细信息。

向您展示如何修复您发布的代码不会解决您的实际问题，因为您发布的代码中的问题和您的实际问题是不同的。不会有解决这两个问题的“通用解决方案”。

# gridview - Chrome的Gridview垂直标题文本

> ID：12823139
> 
> 赞同：2
> 
> 时间：2012-10-10T15:35:30.023
> 
> 标签：gridview, text

我正在使用 `-webkit-transform: rotate(270deg)`来旋转我的gridview中的标题文本，使其垂直。问题是每个单元格上方的标题宽度保持不变而不是变小。有没有办法改变每个标题单元格的宽度，所以文本的两边都没有多余的空间？

# ios - 如果应用程序在前台，是否可以使本地通知不出现在历史记录中？

> ID：12823140
> 
> 赞同：1
> 
> 时间：2012-10-10T15:35:43.813
> 
> 标签：ios

我认为本地通知只有在应用程序到期时未运行时才会出现在通知中心历史记录中。然而，这不是我所观察到的，所以我一定是误会了。

是否可以安排本地通知，如果它在我的应用程序当前处于前台时过期，通知不会出现在通知历史记录中？

请注意，我无法清除通知历史记录，因为它可能包含我的应用收到的我不想删除的推送通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:46:45.473

如果应用程序处于活动状态，请尝试在应用程序委托的 didReceiveLocalNotification 方法中取消通知：

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification {
    if (application.applicationState == UIApplicationStateActive) {
        [[UIApplication sharedApplication] cancelLocalNotification:notification];
    }
} 
```

# youtube-api - iframe 视频的 Youtube 设计更改 - 完整的屏幕按钮消失了

> ID：12823141
> 
> 赞同：1
> 
> 时间：2012-10-10T15:35:47.817
> 
> 标签：youtube-api

我和我的同事上个月为一位客户创建了一个网站，里面有几个 Youtube 视频。 [http://www.doepfner.de/filme.html](http://www.doepfner.de/filme.html)

它工作得很好，客户很高兴。然后我有2个星期的假期。现在播放器的设计略有变化。最大的问题：全屏按钮消失了。我试图使用 fs 参数来强制它，但什么也没发生。

有人可以告诉我是否可以恢复全屏按钮或其他设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:34:32.137

这很可能是由于您通过 Flash 获得了 HTML5 视频播放器。这可能发生在几个方面。最有可能的是您没有安装 Flash（或曾经没有安装）并且选择了参加实验。您可以[访问 http://www.youtube.com/html5](http://www.youtube.com/html5)选择退出 HTML5 实验。这只会影响您的浏览器而不影响您的用户，但我猜他们没有同样的问题（假设他们安装了 Flash）。

另一种选择有点像黑客（有点）。如果您将 webkitallowfullscreen 和 mozallowfullscreen 作为属性添加到 iframe。这将允许 js 全屏 api 在 Firefox 和 Chrome 中工作。这个 api 还不是一个最终的标准，但应该很快。

# javascript - 如果没有类或 ID，是否可以通过其 href 获取链接？

> ID：12823144
> 
> 赞同：1
> 
> 时间：2012-10-10T15:35:49.237
> 
> 标签：javascript, jquery, html, tags

我正在使用其他人的应用程序，并希望更改具有特定 href 的任何 <a></a> 标记之间的 innerHTML。但是这些链接没有与之关联的类或 ID，我无法编辑代码来为它们提供类或 ID。有没有办法通过 JavaScript 中的 href 来获取标签？我想做类似的事情：

```
var theLink = document.getElementByHref("example.com"); 
```

否则，如果这是不可能的，我可以遍历页面中的所有链接并选择具有我正在寻找的特定 href 和 innerHTML 的链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:57:13.173

您可以使用 DOM3-attribute-selector ( [jQuery doc](http://api.jquery.com/category/selectors/attribute-selectors/)`href` ) 来获取在其属性中包含特定文本的所有元素。它看起来像

```
$('a[href*="example.com"]') 
```

但是，这可能不是您真正想要的 - 不仅该域的 url 可能包含此字符串。你可能会做类似开始的事情：

```
$('a[href^="http://example.com"]') 
```

但要获得精确且可能更复杂的匹配，您无需绕过自定义[过滤器](http://api.jquery.com/filter/)：

```
$('a[href]').filter( function() {
     return this.hostname == "example.com";
     // or check other properties of the anchor element
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:39:56.647

***选择属性中具有example.com***值的所有元素`href`：

**现场演示：http:** [//jsfiddle.net/NTGQz/](http://jsfiddle.net/NTGQz/)

```
$('a[href*="example.com"]'); 
```

* * *

您也可以尝试这个，只是为了更具体并遵循 OP ***“理想”***答案：

**现场演示：http:** [//jsfiddle.net/ksZhZ/](http://jsfiddle.net/ksZhZ/)

```
jQuery.fn.getElementsByHref = function(str){ return $('a[href*="' + str + '"]'); };

$(document).ready(function(){        
   elems = $(this).getElementsByHref('example.com');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:40:03.197

jQuery 有[很多选择器](http://api.jquery.com/category/selectors/)。您在这里想要的是属性选择器。

```
$('a[href="example.com"') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T15:40:05.490

您可以使用属性选择器：

```
$('a[href="http://example.com"]') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T15:40:18.563

使用 JQuery[属性选择器](http://api.jquery.com/attribute-equals-selector/)，您可以这样做：

```
$('a[href="example.com"]') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T15:40:22.940

试试这个

```
$('a[href*="example.com"]'); 
```

这将选择在 href 属性中包含 example.com 的链接。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-10T15:41:05.240

```
$('a[href="http:google.com"]') 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-10T15:43:03.290

你可以用jquery做到这一点：http: [//api.jquery.com/attribute-equals-selector/](http://api.jquery.com/attribute-equals-selector/)

例如：linksToGoogle = $('a[href="http://google.com"]');

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-10T15:46:04.233

你可以在没有 jQuery 的情况下做到这一点。

```
var links = document.querySelectorAll('a[href*="example.com"]'); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-10T15:49:56.253

如果您的用户在[IE8+ 或任何其他浏览器上，您可以使用](http://caniuse.com/queryselector)[**querySelectorAll**](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelectorAll)本地执行此操作。此方法返回匹配元素的*NodeList*。

 *```
document.querySelectorAll('a[href="exact/value.html"]');    // exact match
document.querySelectorAll('a[href*="partial/value.html"]'); // partial match
document.querySelectorAll('a[href^="starts/with"]');        // href starts with
document.querySelectorAll('a[href$=".html"]');              // href ends with 
```*

# javascript - 修改可滚动div中的内容保持位置

> ID：12823146
> 
> 赞同：0
> 
> 时间：2012-10-10T15:36:09.157
> 
> 标签：javascript, jquery

我有一个 div，里面包含大约 20 个小 div，所以当你点击一个时，大 div 会滚动到小 div 的中心；那么它的利润就会增加。问题是，当边距增加时，小 div 被向下推，因为滚动位置保持在同一个位置。我可以触发另一个事件来补偿运动，但它看起来并不漂亮，存在竞争条件并且效果并不完全相反。

有没有办法让 div 在滚动中居中，然后将邻居推离它？

# ruby-on-rails - 索引视图返回空值

> ID：12823151
> 
> 赞同：0
> 
> 时间：2012-10-10T15:36:16.090
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, erb

我的控制器中有这个：

```
class TeamsController < ApplicationController
  respond_to :json 
  def index
    @teams = Teams.all
    respond_with @teams 
  end
  def show
    @team = Teams.find params[:id]
    respond_with @team
  end 
```

这就是我的观点：

```
<%= render partial: "team", object: @team %> #file-show.json.erb
[<%= render partial: "team", collection: @teams, spacer_template: "comma" %>] #file-index.json.erb
<%= @team.to_json.html_safe %> #file- _team.json.erb 
```

但是 team.json 的响应总是 [null, null, null] 而 teams/1.json 的响应是正确的 {"id"...} 知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:40:31.713

在您的部分中，您正在使用仅在您的表演动作中设置`_team.json.erb`的变量。`@team`如果您`team`改用它，它应该可以工作，因为部分渲染过程分别在 show 和 index 的情况下将其设置为一个`@team`或每个。`@teams`

所以，你的部分应该是：

```
<%= team.to_json.html_safe %> 
```

# java - 如何将从数据库中检索的字符串值与程序中定义的字符串值进行比较

> ID：12823153
> 
> 赞同：2
> 
> 时间：2012-10-10T15:36:25.117
> 
> 标签：java, mysql, string, comparison

我有一个程序，我必须从数据库中检索数据。我以字符串的形式检索了它。该字符串包含大约 100 个值。现在我必须将这些值与我给出的 String 的值进行比较。如果值匹配，则它应该执行 if 条件，否则不执行。

这是我的代码...

```
String str = "9035"; Manually Given by me.
AreaCode = rs.getString("AreaCode"); Retrieved from database with 100 records.. 
```

我正在使用`if(AreaCode.equals(str))`，但它不起作用....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T15:53:59.730

调试方法如下：

```
 String str = "9035";
  while (rs.next()) {
        String areaCode = rs.getString("AreaCode");
        if(str.equals(areaCode)){
           System.out.println("!!!!!!It matched: " + str);
           break;
        } else {
           System.out.println("No match with: " + areaCode);
        }
  } 
```

从您的问题来看，您似乎只是在比较第一条记录，您需要做的是遍历上面的每个结果并进行比较。找到记录后，您将使用 break 语句退出循环。

当然，更好的解决方案是使用包含 areaCode 的 where 子句进行选择，如果你得到一条记录，那么它就在那里，如果没有，你知道它不是。

就像是

```
select count(0) as tot from your_table_name where AreaCode = '9035' 
```

然后用那个做的 ResultSet

```
if(rs.getInt("AreaCode") != 0){
  //found the/a match
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:53:51.490

如果您的 Areacode 包含 100 条记录，我假设 Areacode 是某种集合。您不能将集合与字符串“str”进行比较

如果 Areacode 是一个集合，则遍历该集合，然后将其与“str”进行比较

这可能会帮助您入门。

```
Iterator itr = Areacode.iterator();
while(itr.hasNext()){
   if(AreaCode.equals(str)){
   //do something
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:08:10.527

而不是迭代 - 向查询添加另一个“相等”条件。这肯定会更容易和更有效。

# python - 在 For 循环中创建列表列表

> ID：12823156
> 
> 赞同：1
> 
> 时间：2012-10-10T15:36:34.820
> 
> 标签：python, list, for-loop

如何在`for`循环中制作列表列表？

这是我现在编码的内容：

```
 a = 0
    xy=[[[],[]],[[],[]],[[],[]],[[],[]],[[],[]],[[],[]],[[],[]],[[],[]],[[],[]],[[],[]],[[],[]],[[],[]]]
    for liness in range(len(NNCatelogue)):
        a=0
        for iii in range(len(NNCatelogue[liness])):

            while a < len(catid):

                if catid[a]==NNCatelogue[liness][iii]:

                    xyiii = (catid[a], a)
                    xy.append(xyiii)   
                a += 1 
```

正如预期的那样，我得到的输出是一个冗长的对列表。它看起来像下面这样：

```
 [...,('C-18-1262', 30908),
     ('C-18-1264', 30910),
     ('C-18-1265', 30911),
     ('C-18-1267', 30913),
     ('C-18-1250', 30896),
     ('C-18-1254', 30900),...] 
```

不过，我想将这个对列表转换为对列表。有 1268 次迭代，每个列表的长度应该是 12。（所以 1268 个列表，每个列表有 12 个元素）。在循环中如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T15:48:47.393

可能是这样的。请注意，我直接在列表上使用迭代来节省大量不必要的索引。

```
xy = []
for line in NNCatelogue:
    l = []
    for c in line:
        for a, ca in enumerate(catid):
            if ca == c:
                l.append((ca, a))
    xy.append(l) 
```

如果您只是使用内部循环来搜索类别索引，我怀疑您是这样，那么字典可能是避免内部循环的有用补充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:49:49.013

我有一些友好的建议：

1.  首先，一开始的 a=0 是多余的。您在第一个 for 循环中使用 a=0 执行相同的操作两次。

2.  其次，为什么要在顶部声明 xy 的列表元素的巨大框架？你可以随时 append() 你需要的东西。

3.  最后，您的 while 循环只是一个简单的 for 循环：

    ```
    for n in range(len(catid)): 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T02:11:40.167

您可以使用列表扩展来制作列表列表，如下所示：

```
list_of_lists = [[j for j in range(0, 3)] for _ in range(0, 3)] 
```

输出一个 3x3 列表：

```
[ [0, 1, 2], 
  [0, 1, 2], 
  [0, 1, 2]
] 
```

# ios - iOS6 中使用 QLPreviewController 渲染上下文的问题

> ID：12823160
> 
> 赞同：2
> 
> 时间：2012-10-10T15:36:53.953
> 
> 标签：ios

我已经搜索了互联网来回答这个问题，但还没有找到答案。

我正在编写一个使用 QLPrieviewController 显示文档的应用程序。我想把屏幕复制到外部显示器上。我让它适用于 ios5，代码如下。此代码不再适用于 ios6。

```
 UIGraphicsBeginImageContextWithOptions(self.previewController.view.frame.size, NO, 0.0);
    [self.previewController.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage * clonedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    [mirrorWebPageView setImage: clonedImage]; 
```

我尝试使用渲染前窗来查看使用以下代码会得到什么。

```
 NSArray * currentwindows = [[UIApplication sharedApplication] windows]; 
    UIWindow *trythisone = [currentwindows objectAtIndex:0];
    UIGraphicsBeginImageContextWithOptions(trythisone.frame.size, NO, 0.0);
    [trythisone.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage * clonedImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    [mirrorWebPageView setImage: clonedImage]; 
```

我显示了导航栏和底部工具栏，但视图中未显示 QLPreviewController 的内容。

我已阅读 RenderIncontext 存在一些问题，但无法确定这是否是我的问题。

有关如何解决此问题的任何想法都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:34:00.937

我尝试在 iOS6 上以编程方式进行屏幕捕获，它只会捕获背景视图。在 iOS5 上它可以工作。它可能是一种安全功能，可以防止程序捕获您正在查看的内容并将其发送到某个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T09:42:08.060

这是不可能的，因为在最新版本的 iOS 上，您的进程不再显示预览的文档。预览机制由另一个进程处理。

# python - glob 文件用作来自 python 脚本的 python 脚本的输入。

> ID：12823165
> 
> 赞同：1
> 
> 时间：2012-10-10T15:36:57.427
> 
> 标签：python, stdin, glob

代替

```
cat $$dir/part* | ./testgen.py 
```

我想 glob 文件，然后在我的 python 脚本中使用 ./testgen.py 的标准输入。我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:38:40.367

你可以让外壳为你做这件事：

```
./testgen.py $$dir/part* 
```

这会将每个匹配的文件名作为单独的参数传递给您的程序。然后，您只需从`sys.argv[1:]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:43:24.523

可以使用`glob`和[fileinput](http://docs.python.org/library/fileinput.html)的组合：

```
from glob import glob
import fileinput

for line in inputfile.input(glob('dir/part*')):
    print line # or whatever 
```

虽然如果你让 shell 来扩展它 - 你可以使用`inputfile.input()`它，它会从`sys.argv[1:]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-27T22:24:07.350

nneonneo 关于 shell 扩展是正确的，但它不适用于 Windows。这是一个简单的、完全防弹的跨平台版本：

```
import sys
from glob import glob

def argGlob(args=None):
    if args is None: args = sys.argv

    return [subglob for arg in args for subglob in glob(arg)] 
```

`argGlob`将返回与 Unix 样式的 shell 扩展完全相同的内容，并且它也不会搞砸任何已经扩展的 args 列表。

# cucumber - BDD：明确的例子 - 适当的代词？

> ID：12823170
> 
> 赞同：2
> 
> 时间：2012-10-10T15:37:15.640
> 
> 标签：cucumber, bdd, gherkin, scenarios

在编写场景时，是否有人强烈主张选择以下样式中的一种而不是另一种？

```
Feature: Search Product

As a customer
I want to search for a product
So that I can easily locate what I want to purchase

Scenario: Multiple Products Found (First Person Style)
Given the following products exist:
|Product      |
|Normal Orange|
|Large Orange |
When I search for "orange" <---
Then the system should display the following products:
|Product      |
|Normal Orange|
|Large Orange | 
```

或者...

```
Scenario: Multiple Products Found (Generic Third Person Style)
Given the following products exist:
|Product      |
|Normal Orange|
|Large Orange |
When the customer searches for "orange" <---
Then the system should display the following products:
|Product      |
|Normal Orange|
|Large Orange | 
```

或者...

```
Scenario: Multiple Products Found (Specific Person Style)
Given the following products exist:
|Product      |
|Normal Orange|
|Large Orange |
When "John" searches for "orange" <---
Then the system should display the following products:
|Product      |
|Normal Orange|
|Large Orange | 
```

它们似乎都工作得很好——我想知道我是否遗漏了一个明显的陷阱，因为很多例子似乎都使用了参与者的特定值（不仅仅是输入/结果的特定值）。

我反对使用的唯一论点：

```
When the customer searches for "orange" 
```

如果其他参与者也可以使用相同的功能，则必须定义单独的等效步骤。

就个人而言，我认为“我”读起来很好（尽管我觉得我不知道）。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T20:26:19.543

无论哪种方式都很好，但是有细微的差别。

如果结果的好处是为了用户，我有时喜欢用第一人称来表达事情，如果结果的好处是为了用户以外的人，我喜欢用第三人称来表达。

例如，您可能有一个故事：

```
In order to prevent bots from spamming the site
As a moderator
I want users to prove that they are human. 
```

相关的场景可以是：

```
Given a user is not registered
When they try to register
Then they should be presented with a CAPTCHA
When they fill in the CAPTCHA
Then they should be successfully registered 
```

或者：

```
Given I am not registered
When I try to register
Then I should be presented... what, wait, no, I shouldn't! 
```

在这种情况下，很明显与“我应该得到一个验证码”的想法存在认知脱节，因为它们很烦人，没有人想要它们。把这个场景放在第三人身上，很明显，好处可能不适合那个人。

我偶尔会为用户起名——例如，普通用户的 Ursula Usual 和管理员的 Andy Admin。以这种方式使用第三人称对于呼唤不同的角色和角色也很有用。

还有其他场景，角色相同，但两个不同的人扮演它。

```
Given Doctor Donald has filled out Priscilla Patient's prescriptions
When Doctor Diana looks for her file // <-- different doctor!
Then she should be able to find those prescriptions. 
```

在其他参与者可以使用相同功能的情况下，他们的角色或权限的上下文将改变行为，并且无论如何该上下文都应该包含在场景中，即使它只是隐含在他们的名字中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:53:25.617

我认为只要故事对开发人员和非开发人员一样清晰，我认为`I`就可以使用。在顶部，您已经澄清了这`I`是一个`customer`. 我认为我们并不关心哪个特定客户在进行搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T15:57:40.660

我认为这基本上取决于场景。

如果该场景只涉及客户，那么“客户”可能是最合适的。

如果一个场景可能涉及除客户之外的用户类别，那么使用“John”（或“Jane”，如果您愿意的话）更通用，并减少对一类用户的关注。

一般来说，系统是为其他人使用而构建的，所以虽然我同意第一人称（“我”）风格读起来很好，但不使用它可能有很好的心理原因。

当然，我可能会完全糊涂——我对 BDD 还很陌生。

# ios - 'NSInternalInconsistencyException'，原因：'尝试将第 0 行插入第 0 节，但更新后第 0 节只有 0 行'

> ID：12823176
> 
> 赞同：1
> 
> 时间：2012-10-10T15:37:31.113
> 
> 标签：ios, tableview

我对 iOS 编程很陌生，我正在尝试制作这个预算应用程序。我想将我的预算类的实例类添加到我的表格视图中。但是当我点击完成按钮时，就会出现这个错误。我一直在论坛上搜索我的问题的答案。

到目前为止，我发现 Aby 和我有同样的问题（http://stackoverflow.com/questions/11706254/nsinternalinconsistencyexception-reason-attempt-to-insert-row-0-into-section?answertab=active#tab -top）但我无法在那篇文章中得到明确的答案/解决方案。

我确定我知道为什么会发生此错误，但是我不知道如何解决它:-(任何可以帮助我解决此问题的人？

我想发布一些我的代码图片，但由于垃圾邮件保护，stackoverflow 不允许我。

AddBugdetViewController.m

```
(IBAction)done
{
    [self.presentingViewController dismissViewControllerAnimated:YES completion:nil];

    Budget *budget = [[Budget alloc] init];
    budget.name = self.textField.text;
    budget.amount = [Budget convertStringToNSNumber:self.textField.text];

    [self.delegate addBudgetViewController:self didFinishAddingItem:budget];
} 
```

预算视图控制器.m

```
(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.budget.items count];
}

(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Budgets"];

    Budget *item = [self.budget.items objectAtIndex:indexPath.row];

    [self configureTextForCell:cell withChecklistItem:item];

    return cell;
}

- (void)addBudgetViewController:(AddBudgetViewController *)controller didFinishAddingItem:(Budget *)NewBudget
{
    NSLog(@"Adding budget: %@", NewBudget.name);
    NSLog(@"Budget amount: %@", NewBudget.amount);

    [self.tableView beginUpdates];

    int newRowIndex = [self.budget.items count];
    [self.budget.items addObject:NewBudget];

    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:newRowIndex inSection:0];
    NSArray *indexPaths = [NSArray arrayWithObject:indexPath];
    [self.tableView insertRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationAutomatic];

    [self.tableView endUpdates];

    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

如果您需要更多信息来追踪问题并解决它，请告诉我:-)

干杯安德斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:00:27.523

您的 BudgetViewController 似乎定义了一个名为“预算”的属性。无论创建和显示 BudgetViewController 的代码都应该将该属性设置为应该在视图控制器中显示的任何预算对象。

# javascript - 获取特定命名空间的内置读取操作

> ID：12823178
> 
> 赞同：0
> 
> 时间：2012-10-10T15:37:32.270
> 
> 标签：javascript, facebook-graph-api, facebook-opengraph

我正在尝试获取特定命名空间的所有内置读取操作，但应用程序配置中的文档和获取代码链接提供了类似 /me/news.reads 的内容，它提供了每个命名空间上所有读取操作的列表。

我试过 /me/{namespace}:{action-type}/{object-type} 但它不适用于内置操作。有什么方法可以直接查询命名空间的内置操作，或者我需要在批量结果中排序和提取我感兴趣的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:47:36.157

目前唯一的方法是获取所有结果并在本地过滤结果。

# datatable - 带有 inputText 的 primefaces 数据表

> ID：12823179
> 
> 赞同：0
> 
> 时间：2012-10-10T15:37:32.793
> 
> 标签：datatable, primefaces

我有以下数据表：

```
<p:dataTable var="indentifier" value="#{identifierBean.identifiers}">
        <p:column>
            <f:facet name="header">
                <h:outputText value="#{indentifier.key}" />
            </f:facet>
            <h:outputText value="#{indentifier.key}" />
            <p:inputText id="userValue" required="true" value="#{identifier.userValue}">
            </p:inputText>
        </p:column>
    </p:dataTable> 
```

和命令按钮

```
 <p:commandButton            
        value="Search" ajax="false" action="#{identifierBean.saveIdentifiers}">     
    </p:commandButton> 
```

identifierBean 如下：

```
public class IdentifierBean {
private List<Identifier> identifiers;
private String country;
private List<Patient> patients;
public IdentifierBean() {
    identifiers = new ArrayList<Identifier>();

}

public IdentifierBean(List<Identifier> identifiers) {
    this.identifiers = identifiers;
}

public List<Identifier> getIdentifiers() {
    return identifiers;
}

public void saveIdentifiers(){
    try {           
        System.out.println("-"+this.identifiers.size()+"-");
    } catch (Exception ex) {
        //ex.printStackTrace();
    }

}

public void setIdentifiers(List<Identifier> identifiers) {
    this.identifiers = identifiers;

}

public String getCountry() {
    return country;
}

public void setCountry(String country) {
    this.country = country;     
    Vector vec = Service.getCountryIdsFromCS(this.country);
    for (int i = 0; i < vec.size(); i++) {
        Identifier id = new Identifier();
        id.setKey(Service.getPortalTranslation(
                ((SearchMask) vec.get(i)).getLabel(),
                LiferayUtils.getPortalLanguage()));
        id.setDomain("");
        this.identifiers.add(id);
    }
    System.out.println("-"+this.identifiers.size()+"-");
}

public List<Patient> getPatients() {
    return patients;
}

public void setPatients(List<Patient> patients) {
    this.patients = patients;
} 
```

}

该表只有一行（这意味着 identifierBean 在标识符列表中有一个元素），但是当我尝试在 saveIdentifiers 方法中使用标识符列表时，它是空的。有什么帮助吗？非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:36:51.740

`RequestScope`太窄了。请参阅[BalusC 对范围的描述](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ManagedBeanScopes)。

# javascript - 命名与匿名函数：相同？

> ID：12823187
> 
> 赞同：0
> 
> 时间：2012-10-10T15:38:04.343
> 
> 标签：javascript

> **可能重复：**
> [JavaScript: var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)
> [这两种函数语法类型有什么区别](https://stackoverflow.com/questions/375150/what-is-the-difference-between-these-2-function-syntax-types)

在 JavaScript 中，我们可以使用以下方法之一定义一个稍后将调用的函数。也就是说，使用命名函数并将匿名函数分配给变量。

```
function myAdd(a, b) {
    console.log(a + b);
}
myAdd(3, 2);

var mySubtract = function (a, b) {
    console.log(a - b);
}
mySubtract(3, 2); 
```

它们基本上*总是*相同的吗？相同，我的意思是没有可能使它们不同的特殊上下文。例如，事实证明[多个左手赋值有一些微妙之处](https://stackoverflow.com/a/1758912)，可能会根据上下文导致不同的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:44:30.620

函数声明被提升（并且可以在范围内的任何地方使用），函数表达式只有在赋值之后才可用。

# php - 使用文本链接在 MYSQL 中设置值？

> ID：12823188
> 
> 赞同：0
> 
> 时间：2012-10-10T15:38:07.720
> 
> 标签：php, mysql, messages

我正在尝试建立一个消息系统。到目前为止，我有结果图。用户可以发送和接收消息。

我试图让用户通过单击最右侧列的删除文本来删除消息。

删除文本从下面脚本中显示的回显运行。

```
<?php   
if ($inbox['deleted'] == 0)  {

echo "Delete"; 

}

?> 
```

该页面是使用表格设置的：

```
My Messages
- - - - - - - - - - - - - - - - - - - - - - - - -

- - - - - - - - - - - - - - - - - - - - - - - - -
Date Received    From      Read/Unread    Delete

10/09/2012       James      Read          Delete 
```

有没有办法使删除文本可点击并具有一个功能，以便当用户单击它时，这会在我的“ptb_messages”mysql 数据库中的“已删除”表中设置一个从“0”到“1”的值。导致消息从用户收件箱中隐藏。

当谈到 php、ajax 和查询时，我真的很笨，所以如果你能提供帮助，请尽可能简单地向我解释。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:41:54.663

而不是纯文本回显锚链接......

```
echo '<a href="mylink">Delete</a>'; 
```

然后，在该目的地，页面简单地评估用户是否被授权这样做，如果是，则删除记录（并可能重定向回来或其他）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:03:02.250

假设

*   你有一个mysql数据库的连接
*   要输出的数据的结果对象
*   结果行保存在`$inbox`
*   每个结果行中的一个 ID

这会起作用：

```
<?php
if (isset($GET['delete'])) {
    markEntryAsDeleted((int) $GET['delete']); // writes to DB
}

// fetch data from DB

if($inbox['deleted'] == 0) {
    echo $row['date'], $row['from'], $row['read'];
    echo '<a href="?delete=' . $row['id'] . '">Delete</a>";
} else {
    // Either echo nothing or a entry marked as deleted
}
?> 
```

我建议您获得一个不错的 php 和 mysql 教程并阅读它。详细记录了如何从 mysql 数据库中获取数据以及如何处理这些数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:41:57.563

像这样使用它

```
echo "<a href='?del_id=your_id' onClick='your_function'>Delete</a>"; 
```

并在页面开头写下这个

```
if(isset($_GET['del_id']))
{
    // query for delete.
}
// rest of your code 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T15:43:13.983

尝试将删除按钮设为提交按钮，并将 onclick 属性设置为 javascript 函数，将隐藏输入字段设置为 0 到 1。这是一个示例 javascript 函数：

```
function changeVal{
document.getElementById('hiddenDeleteInput').value=1;
} 
```

这是html：

```
<form action="deletepage.php" method="post">
<input type="submit" onclick="changeVal();" value="Delete"/>
<input type="hidden" value="0" name='hiddenDeleteInput' id="hiddenDeleteInput"/>
</form> 
```

或者，如果您愿意，您可以只使用一个指向删除页面的锚标记，该页面会自动知道您要在没有删除值的情况下删除它。

# jquery - 重新运行窗口调整高度的脚本？

> ID：12823194
> 
> 赞同：0
> 
> 时间：2012-10-10T15:38:33.803
> 
> 标签：jquery, resize, reset

我将元素“.portfolio-set-height”的高度设置为所有这些元素的最高高度（它们具有不同的高度），然后我将此高度用作另一个元素的最小高度。随附的代码适用于此。但是当窗口调整大小时，我无法让 jquery 重新运行脚本。有任何想法吗？

（我已经尝试`$(window).resize(function()`过没有运气）

```
$(document).ready(function() {
   var maxHeight = -1;

   $('.portfolio-set-height').each(function() {
     maxHeight = maxHeight > $(this).height() ? maxHeight : $(this).height();
   });

   $('.portfolio-set-height').each(function() {
     $(this).height(maxHeight);
   });
 });

$(document).ready(function() {
  $(".work-slider").css("min-height", function(){ return $(".portfolio-set-height").height() });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:04:34.420

您在 $(document).ready 中指定的函数是本地可用的。当 $(document).ready once 被触发时，代码无法从外部访问。您应该在 $(document).ready() 之外指定方法。例如：

```
$(document).ready(function(){ready1();}); 
$(document).ready(function(){ready2();});
var ready1 = function () { 
    var maxHeight = -1;
      $('.portfolio-set-height').height(''); 
    $('.portfolio-set-height').each(function() { maxHeight = maxHeight > $(this).height() ? maxHeight : $(this).height(); }); 
    $('.portfolio-set-height').each(function() { $(this).height(maxHeight); }); 
} 
var ready2 = function () {
    $(".work-slider").css("min-height", function(){ return $(".portfolio-set-height").height() });
}
$(window).resize(function(){ ready1(); ready2(); }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T15:40:29.830

检测窗口大小调整的唯一函数是 .resize。您需要在 JQuery 中使用 .resize：http: [//api.jquery.com/resize/](http://api.jquery.com/resize/)

```
$(window).resize(function() {
    // the window has been resized, make changes
}); 
```

如果这不是工作，那么你的逻辑有问题。发布一个 jsfindle 复制粘贴。

这是一个 jsFidel：http: [//jsfiddle.net/uVkrS/7/](http://jsfiddle.net/uVkrS/7/)

# css - CSS/Chrome：YouTube 视频嵌入导致不需要的 1px 垂直空间

> ID：12823196
> 
> 赞同：1
> 
> 时间：2012-10-10T15:38:35.983
> 
> 标签：css, google-chrome, youtube

# 问题：

当我在我的页面中嵌入 Youtube 视频时，Chrome 会在我的页面左侧显示一个垂直的 1px 空白区域。

问题仅限于**Chrome**和**嵌入了 YouTube**的页面。

# 现场示例：

*   **有**问题的页面（嵌入 YouTube）：[http ://tinyurl.com/978349d](http://tinyurl.com/978349d)
*   **没有**问题的页面（没有嵌入 YouTube）： [http ://tinyurl.com/95qq379](http://tinyurl.com/95qq379)

# 我试过的：

1.  我尝试将视频嵌入的大小调整为更小的宽度，但无济于事。
2.  我尝试通过 Chrome 的元素检查器剖析 CSS，但无济于事。

# 我的问题：

任何人都可以建议为什么当页面包含 YouTube 嵌入时 Chrome 会添加这个不需要的空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:12:13.027

我能找到的唯一解决方法是将`#main`容器设置为宽度 959 像素而不是 960 像素。可能不是正确的解决方案，但它有效

# c# - 在单个 ContentControl 中管理多个视图/视图模型

> ID：12823197
> 
> 赞同：4
> 
> 时间：2012-10-10T15:38:39.770
> 
> 标签：c#, wpf, mvvm, wpf-controls, mvvm-light

我有一个应用程序，它在 ContentControl 中一次显示一个视图。我有一个当前的解决方案，但很好奇是否有更好的内存管理解决方案。

我当前的设计在需要显示时创建新对象，并在它们不再可见时销毁它们。我很好奇这是否是更好的方法，或者维护对每个视图的引用并在这些引用之间进行交换更好？

这是我的应用程序布局的更多解释：

我的 MainWindow.xaml 的一个非常简化的版本如下所示：

```
<Window ... >
  <Window.Resources>
    <DataTemplate DataType="{x:Type vm:SplashViewModel}">
        <view:SplashView />
    </DataTemplate>
    <DataTemplate DataType="{x:Type vm:MediaPlayerViewModel}">
        <view:MediaPlayerView />
    </DataTemplate>
  </Window.Resources>
  <Grid>
    <ContentControl Content="{Binding ActiveModule}" />
  </Grid>
</Window> 
```

在我的 MainViewModel.cs 中，我将 ActiveModule 参数与新初始化的 ViewModel 交换。例如，我用于交换内容的伪代码逻辑检查将类似于：

```
if (logicCheck == "SlideShow")
  ActiveModule = new SlideShowViewModel();
else if (logicCheck == "MediaPlayer")
  ActiveModule = new MediaPlayerViewModel();
else
  ActiveModule = new SplashScreenViewModel(); 
```

但是，仅仅保持一个参考在速度和内存使用方面会更合适吗？

Alt 选项 1：创建对每个 ViewModel 的静态引用并在它们之间交换...

```
private static ViewModelBase _slideShow = new SlideShowViewModel();
private static ViewModelBase _mediaPlayer = new MediaPlayerViewModel();
private static ViewModelBase _splashView = new SplashScreenViewModel();

private void SwitchModule(string logicCheck) {
  if (logicCheck == "SlideShow")
    ActiveModule = _slideShow;
  else if (logicCheck == "MediaPlayer")
    ActiveModule = _mediaPlayer;
  else
    ActiveModule = _splashView;
} 
```

我并没有在这里不断地创建/销毁，但在我看来，这种方法浪费了内存，未使用的模块只是闲置。或者......是否有一些特殊的 WPF 在幕后做以避免这种情况？

替代选项 2：将每个可用模块放在 XAML 中并在那里显示/隐藏它们：

```
<Window ... >
  <Grid>
    <view:SplashScreenView Visibility="Visible" />
    <view:MediaPlayerView Visibility="Collapsed" />
    <view:SlideShowView Visibility="Collapsed" />
  </Grid>
</Window> 
```

同样，我很好奇在我不熟悉的背景中可能发生的内存管理。当我折叠某物时，它会完全进入某种休眠状态吗？我读过一些东西（没有命中测试，事件，关键输入，焦点，......）但是动画和其他东西呢？

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:06:36.250

我曾经遇到过这种情况，我的视图创建起来非常昂贵，所以我想将它们存储在内存中，以避免在用户来回切换时重新创建它们。

我的最终解决方案是重用一个`TabControl`我用来完成相同行为的扩展（在切换选项卡时阻止 WPF 破坏 TabItems），它存储`ContentPresenter`切换选项卡时的内容，并在切换回来时重新加载它。

我唯一需要改变的是我必须覆盖`TabControl.Template`所以唯一显示的是`SelectedItem`TabControl 的实际部分

我的 XAML 最终看起来像这样：

```
<local:TabControlEx ItemsSource="{Binding AvailableModules}"
                    SelectedItem="{Binding ActiveModule}"
                    Template="{StaticResource BlankTabControlTemplate}" /> 
```

扩展的实际代码`TabControl`如下所示：

```
// Extended TabControl which saves the displayed item so you don't get the performance hit of 
// unloading and reloading the VisualTree when switching tabs

// Obtained from http://www.pluralsight-training.net/community/blogs/eburke/archive/2009/04/30/keeping-the-wpf-tab-control-from-destroying-its-children.aspx
// and made a some modifications so it reuses a TabItem's ContentPresenter when doing drag/drop operations

[TemplatePart(Name = "PART_ItemsHolder", Type = typeof(Panel))]
public class TabControlEx : System.Windows.Controls.TabControl
{
    // Holds all items, but only marks the current tab's item as visible
    private Panel _itemsHolder = null;

    // Temporaily holds deleted item in case this was a drag/drop operation
    private object _deletedObject = null;

    public TabControlEx()
        : base()
    {
        // this is necessary so that we get the initial databound selected item
        this.ItemContainerGenerator.StatusChanged += ItemContainerGenerator_StatusChanged;
    }

    /// <summary>
    /// if containers are done, generate the selected item
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    void ItemContainerGenerator_StatusChanged(object sender, EventArgs e)
    {
        if (this.ItemContainerGenerator.Status == GeneratorStatus.ContainersGenerated)
        {
            this.ItemContainerGenerator.StatusChanged -= ItemContainerGenerator_StatusChanged;
            UpdateSelectedItem();
        }
    }

    /// <summary>
    /// get the ItemsHolder and generate any children
    /// </summary>
    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();
        _itemsHolder = GetTemplateChild("PART_ItemsHolder") as Panel;
        UpdateSelectedItem();
    }

    /// <summary>
    /// when the items change we remove any generated panel children and add any new ones as necessary
    /// </summary>
    /// <param name="e"></param>
    protected override void OnItemsChanged(NotifyCollectionChangedEventArgs e)
    {
        base.OnItemsChanged(e);

        if (_itemsHolder == null)
        {
            return;
        }

        switch (e.Action)
        {
            case NotifyCollectionChangedAction.Reset:
                _itemsHolder.Children.Clear();

                if (base.Items.Count > 0)
                {
                    base.SelectedItem = base.Items[0];
                    UpdateSelectedItem();
                }

                break;

            case NotifyCollectionChangedAction.Add:
            case NotifyCollectionChangedAction.Remove:

                // Search for recently deleted items caused by a Drag/Drop operation
                if (e.NewItems != null && _deletedObject != null)
                {
                    foreach (var item in e.NewItems)
                    {
                        if (_deletedObject == item)
                        {
                            // If the new item is the same as the recently deleted one (i.e. a drag/drop event)
                            // then cancel the deletion and reuse the ContentPresenter so it doesn't have to be 
                            // redrawn. We do need to link the presenter to the new item though (using the Tag)
                            ContentPresenter cp = FindChildContentPresenter(_deletedObject);
                            if (cp != null)
                            {
                                int index = _itemsHolder.Children.IndexOf(cp);

                                (_itemsHolder.Children[index] as ContentPresenter).Tag =
                                    (item is TabItem) ? item : (this.ItemContainerGenerator.ContainerFromItem(item));
                            }
                            _deletedObject = null;
                        }
                    }
                }

                if (e.OldItems != null)
                {
                    foreach (var item in e.OldItems)
                    {

                        _deletedObject = item;

                        // We want to run this at a slightly later priority in case this
                        // is a drag/drop operation so that we can reuse the template
                        this.Dispatcher.BeginInvoke(DispatcherPriority.DataBind,
                            new Action(delegate()
                        {
                            if (_deletedObject != null)
                            {
                                ContentPresenter cp = FindChildContentPresenter(_deletedObject);
                                if (cp != null)
                                {
                                    this._itemsHolder.Children.Remove(cp);
                                }
                            }
                        }
                        ));
                    }
                }

                UpdateSelectedItem();
                break;

            case NotifyCollectionChangedAction.Replace:
                throw new NotImplementedException("Replace not implemented yet");
        }
    }

    /// <summary>
    /// update the visible child in the ItemsHolder
    /// </summary>
    /// <param name="e"></param>
    protected override void OnSelectionChanged(SelectionChangedEventArgs e)
    {
        base.OnSelectionChanged(e);
        UpdateSelectedItem();
    }

    /// <summary>
    /// generate a ContentPresenter for the selected item
    /// </summary>
    void UpdateSelectedItem()
    {
        if (_itemsHolder == null)
        {
            return;
        }

        // generate a ContentPresenter if necessary
        TabItem item = GetSelectedTabItem();
        if (item != null)
        {
            CreateChildContentPresenter(item);
        }

        // show the right child
        foreach (ContentPresenter child in _itemsHolder.Children)
        {
            child.Visibility = ((child.Tag as TabItem).IsSelected) ? Visibility.Visible : Visibility.Collapsed;
        }
    }

    /// <summary>
    /// create the child ContentPresenter for the given item (could be data or a TabItem)
    /// </summary>
    /// <param name="item"></param>
    /// <returns></returns>
    ContentPresenter CreateChildContentPresenter(object item)
    {
        if (item == null)
        {
            return null;
        }

        ContentPresenter cp = FindChildContentPresenter(item);

        if (cp != null)
        {
            return cp;
        }

        // the actual child to be added.  cp.Tag is a reference to the TabItem
        cp = new ContentPresenter();
        cp.Content = (item is TabItem) ? (item as TabItem).Content : item;
        cp.ContentTemplate = this.SelectedContentTemplate;
        cp.ContentTemplateSelector = this.SelectedContentTemplateSelector;
        cp.ContentStringFormat = this.SelectedContentStringFormat;
        cp.Visibility = Visibility.Collapsed;
        cp.Tag = (item is TabItem) ? item : (this.ItemContainerGenerator.ContainerFromItem(item));
        _itemsHolder.Children.Add(cp);
        return cp;
    }

    /// <summary>
    /// Find the CP for the given object.  data could be a TabItem or a piece of data
    /// </summary>
    /// <param name="data"></param>
    /// <returns></returns>
    ContentPresenter FindChildContentPresenter(object data)
    {
        if (data is TabItem)
        {
            data = (data as TabItem).Content;
        }

        if (data == null)
        {
            return null;
        }

        if (_itemsHolder == null)
        {
            return null;
        }

        foreach (ContentPresenter cp in _itemsHolder.Children)
        {
            if (cp.Content == data)
            {
                return cp;
            }
        }

        return null;
    }

    /// <summary>
    /// copied from TabControl; wish it were protected in that class instead of private
    /// </summary>
    /// <returns></returns>
    protected TabItem GetSelectedTabItem()
    {
        object selectedItem = base.SelectedItem;
        if (selectedItem == null)
        {
            return null;
        }

        if (_deletedObject == selectedItem)
        { 

        }

        TabItem item = selectedItem as TabItem;
        if (item == null)
        {
            item = base.ItemContainerGenerator.ContainerFromIndex(base.SelectedIndex) as TabItem;
        }
        return item;
    }
} 
```

我也不肯定，但我认为我的空白 TabControl 模板看起来像这样：

```
<Style x:Key="BlankTabControlTemplate" TargetType="{x:Type local:TabControlEx}">
    <Setter Property="SnapsToDevicePixels" Value="true"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:TabControlEx}">
                <DockPanel>
                    <!-- This is needed to draw TabControls with Bound items -->
                    <StackPanel IsItemsHost="True" Height="0" Width="0" />
                    <Grid x:Name="PART_ItemsHolder" />
                </DockPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:17:13.900

您可以选择继续当前的方法；假如 ：

*   ViewModel 对象易于构建/重量轻。如果您从外部注入对象的内部细节（遵循依赖注入原则），这是可能的。
*   您可以缓冲/存储内部细节，然后在构造视图模型对象时注入。
*   在您的视图模型上实施 IDisposable 以确保您在处置期间清除内部细节。

将视图模型缓存在内存中的缺点之一是它们的绑定。如果在视图超出范围时必须停止绑定通知以在视图和视图模型之间流动，则将视图模型设置为 null。如果视图模型构建是轻量级的，您可以快速构建视图模型并分配回视图数据上下文。

然后，您可以缓存视图，如方法 2 所示。我相信如果视图模型插入了正确的数据，那么重复构建视图是没有意义的。当您将 viewmodel 设置为 null 时，由于绑定 datacontext 视图将清除所有绑定。稍后将新视图模型设置为数据上下文，视图将加载新数据。

注意：确保视图模型得到正确处理而没有内存泄漏。使用[SOS.DLL](http://msdn.microsoft.com/en-us/library/yy6d2sxs.aspx)通过 Visual Studio 调试检查视图模型实例数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T17:18:21.687

另一个需要考虑的选择：这是使用 IoC 容器和依赖注入框架之类的场景吗？通常，DI 框架支持对象的容器管理生命周期。如果您喜欢 Unity Application Block 或 MEF，我建议您查看它们。

# c# - C# 客户端中的 DataContract 和 KnowType 属性

> ID：12823201
> 
> 赞同：3
> 
> 时间：2012-10-10T15:38:53.930
> 
> 标签：c#, wcf, attributes

> **可能重复：**
> [C# WCF：什么时候适合使用 KnownType 属性？](https://stackoverflow.com/questions/3167932/c-sharp-wcf-when-is-it-appropriate-to-use-the-knowntype-attribute)

不久前，我们需要在课堂上创建一个 C# Web 客户端作为项目的一部分。老师指示我们将属性放在`DataContract`将要通过的每个班级之上。

然后老师告诉我们，如果你有这样的事情：

```
               一种
              / \
             / \
            公元前

```

您需要按以下方式编写A类：

```
[DataContract]
[KnownType(typeof(B))]
[KnownType(typeof(C))]
public class A
{
} 
```

这不是完全违背了多态性的想法吗？为什么一个类应该知道谁继承了这个类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T15:46:15.830

这与 C# 和多态性没有任何关系。而不是序列化。WCF 基础结构需要能够从网络中取出字节数组之类的东西并从中创建一个对象。如果类`A`是一种`abstract`类型，则无法实例化该对象。框架需要知道它可能通过线路接收什么类型，以便它可以检查元数据并实例化正确类型的对象。

换句话说，属性不会告诉类有关它的继承者的任何信息（实际上，列表不需要包括所有继承者）；这是严格的，所以框架将知道它可以期望被要求构造什么类型。

不过，我要补充一点，并不总是需要添加`DataContract`and属性。`DataMember`它们可用于您可能希望进行更细粒度控制的场景，例如从序列化中排除公共属性。通常，如果类型是可序列化的，则可以在没有属性的情况下传递它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:49:48.110

WCF 序列化程序将继承的概念与多态性的概念分开。CLR 继承仅意味着就序列化程序而言，基类成员自动添加到派生类中，并不意味着 XML 文档中的两个元素之间存在任何类型的关系。要获得多态性，您必须明确告诉序列化程序派生类的 XML 表示可以替代基类的 XML 表示。

我个人觉得区分很方便。我有时使用 CLR 继承而不`KnownType`向类添加公共属性，而不暗示它们之间存在任何类型的业务关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:01:49.660

首先，正如 Daniel 所说，您说的是 Windows 通信基金会 (WCF)，而不是 web。

通过装饰类，您是在告诉客户他必须知道两个类才能使用类“A”，例如

```
[DataContract]
[KnownType(typeof(B))]
[KnownType(typeof(C))]
public class A
{
    [DataMember] 
    private SuperClass myProp;
}

public Class B : SuperClass  {}
public Class C : SuperClass  {} 
```

请查看此链接以获取更多信息：[MSDN DataContract](http://msdn.microsoft.com/en-us/library/ms730167.aspx)

# asp.net-mvc - ViewModel 不显示相关数据

> ID：12823204
> 
> 赞同：0
> 
> 时间：2012-10-10T15:39:03.453
> 
> 标签：asp.net-mvc, ef-code-first

我有一个名为 RegisterViewModel 的视图模型 -

```
public class RegisterViewModel
    {
        public string UserName { get; set; }
        public string Email { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
} 
```

以及两个名为 User 和 UserDetails 的模型

```
public class User
    {
        [Key]
        public string UserName { get; set; }
        public string Email { get; set; }

        public virtual ICollection<Role> Roles { get; set; }
        public virtual UserDetails UserDetails { get; set; }
}

 public class UserDetails
    {

        [Key]
        public string UserName { get; set; }
        public string Firstname { get; set; }
        public string Lastname { get; set; }

        [Required]
        public virtual User User { get; set; }
} 
```

在我的用户控制器中，我的详细信息方法有以下内容 -

```
public ViewResult Details(string id)
        {
            User user = context.Users
                .Include (i => i.UserDetails)
                .Where(i => i.UserName == id)
                .Single();

            user.UserDetails = new UserDetails();

            RegisterViewModel viewModel = new RegisterViewModel{
                UserName = user.UserName,
                FirstName = user.UserDetails.FirstName,
                LastName = user.UserDetails.LastName,
                Salary = user.UserDetails.Salary,
                Email = user.Email,
                Roles = user.Roles
            };
            return View(viewModel);
        } 
```

在我的详细信息视图中 -

```
@model TRS.ViewModels.RegisterViewModel
<table>
<tr>
    <td>User Name</td>
    <td>@Model.UserName</td>
</tr>
<tr>
    <td>Email</td>
    <td>@Model.Email</td>
</tr>
<tr>
    <td>First Name</td>
    <td>@Model.FirstName</td>
</tr>
<tr>
    <td>Last Name</td>
    <td>@Model.LastName</td>
</tr>
<tr>
    <td>Roles</td>
    <td>@foreach (Role role in Model.Roles) {
        @role.RoleName<br />
    }</td>
</tr> 
```

但我只从用户模型中获取日期，对 UserDetails 没有任何内容。所以我可以看到用户名、电子邮件和卷，但看不到名字或姓氏。

你能看出我哪里出错了吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:41:01.020

删除线

```
user.UserDetails = new UserDetails(); 
```

这样做，您将创建一个新的空`UserDetails`实例。

并且`user.UserDetails`来自您的上下文的内容被那个空实例所取代。

**编辑**

可能更好地避免 NRE

```
user.UserDetails = user.UserDetails ?? new UserDetails(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T06:39:39.737

不要使用 user.UserDetails = new UserDetails() 它将详细信息从 db 更改为新的详细信息。您可以在 linq 请求中获取您的视图模型：

```
public ViewResult Details(string id)
    {
        var viewmodel = context.Users
            .Where(i => i.UserName == id)
            .Select(user=>new RegisterViewModel
                {
                    UserName = user.UserName,
                    FirstName = user.UserDetails.FirstName,
                    LastName = user.UserDetails.LastName,
                    Salary = user.UserDetails.Salary,
                    Email = user.Email,
                    Roles = user.Roles
                })
            .Single();

        return View(viewModel);
    } 
```

# ajax - ajax函数后重定向到另一个页面

> ID：12823206
> 
> 赞同：1
> 
> 时间：2012-10-10T15:39:12.623
> 
> 标签：ajax, redirect, download, counter

任何人都可以帮助我，我正在尝试为我的网站创建一个下载计数器。我有一个 ajax 脚本，当用户单击下载链接时，该脚本计数为 1，我遇到的问题是在某些浏览器上它会在完成 ajax 计数脚本之前转到下载链接。脚本完成后，有没有办法可以重定向到下载文件。目前我有如下

**这是链接：-**

```
<a href='downloads/".$downfile."' onclick=\"Counter('$referid');\"'>Download File</a> 
```

**这是计数器脚本：-**

```
<script type="text/javascript">
    function Counter(id)
        {
      $.get("clickcounter.php?id="+id);
      {
          return false;
      }
    }
</script> 
```

这是 php 脚本 (clickcounter.php)

```
<?php
include('dbutils.php'); 

$referid = $_GET['id'];

$q = "SELECT * FROM downloads WHERE downid =".$referid;
$r = mysql_query($q);
while ($row = mysql_fetch_array($r))
{
$click = stripslashes(trim($row['downcount']));
$download = $row['downfile'];

}

$countup = $click + 1;

$qUpdate = "UPDATE downloads
SET downcount=$countup
WHERE downid=$referid";
$rUpdate = mysql_query($qUpdate);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:56:31.117

一些相对较小的修改应该可以解决问题。首先，将 onclick 更改为以下内容：

```
onclick=\"Counter('$referid', this); return false;\" 
```

我们所做的是将**this**作为第二个参数发送给 Counter 函数，这样我们就有了对点击链接的引用。其次，我们添加了**return false**，它会阻止浏览器导航到 href 中指定的 url。

修改后的计数器函数如下所示：

```
function Counter(id, link) {
   $.get("clickcounter.php?id=" + id, function() {
      location.href = $(link).attr("href");
   });
} 
```

我们现在有了对点击链接的引用。现在已将一个函数指定为 $.get() 的第二个参数。这是成功函数，在成功调用 ajax 调用时调用。在该函数中，我们现在重定向到单击链接的 href 属性中指定的 url。

我觉得我应该指出，推荐的方法是使用与 html 分开的 jQuery 绑定 onclick。referid 可以存储在数据属性中（我选择将其称为 data-rid）：

```
<a href='downloads/".$downfile."' class='dl' data-rid='$referid'>Download File</a> 
```

然后为所有下载链接（具有“dl”类的元素）绑定 onclick：

```
$(function() {
    $("a.dl").click(function() {
       var id = $(this).attr("data-rid");
       var href = $(this).attr("href");

       $.get("clickcounter.php?id=" + id, function() {
          location.href = href;
       });   

       return false;
    });
});​ 
```

（我觉得我应该指出该代码尚未经过测试，因此有可能是某个地方出现了拼写错误）

# java - ManyToOne Cascade 导致在母表中重复持久化

> ID：12823211
> 
> 赞同：0
> 
> 时间：2012-10-10T15:39:32.123
> 
> 标签：java, jpa, ejb

我有两个实体：问卷调查和问卷调查时间。Questionnaire's id 是 QuestionnaireTime 中的外键。所以我的 QuestionnaireTime 实体中的关系如下所示：

```
@JoinColumn(name = "questionnaireid", referencedColumnName = "id")
@ManyToOne(cascade = CascadeType.PERSIST)
private Questionnaire questionnaireid; 
```

所以我想要做的是为一个问卷添加多个 QuestionnaireTime 记录。如果我删除了我的关系中的 CascadeType.PERSIST 部分，我的坚持就没有完成。当我使用 cascade 时，我在主表 Questionnaire 中获得了几条新记录，这不是我想要的。

例如，当我想为某个问卷添加三个 QuestionnaireTime 时，这三个记录插入到我的 QuestionnaireTime 表中，但问卷中也添加了 3+1 条记录。

如果您需要更多解释。这是我的托管 bean，我试图在一个问卷中添加多个 QuestionnaireTime 记录的部分：NB - current is my Questionnaire object

```
else if (current.getType().equals("frequent")) {
                int iteration = 1;
                currentQuestionnaireTime = new QuestionnaireTime();
                if (!selectDateList.isEmpty()) {
                    for (String insertedDate : selectDateList) {                    
                        currentQuestionnaireTime.setId(0);
                        currentQuestionnaireTime.setQuestionnaireid(current);
                        getEjbQuestionnaireTimeFacade().create(currentQuestionnaireTime);
                        iteration++;
                    }
                }
            }
            try {
                getFacade().create(current); // my Questionnaire facade
            } catch (EJBException ejbe) {
                ejbe.getCause();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:59:05.113

一些东西，

调查表id - 这是一个非常糟糕的字段名称，调查表是有意义的。

currentQuestionnaireTime.setId(0); - 您不应该更改现有对象的 id，而是创建一个新对象

getEjbQuestionnaireTimeFacade().create() - 这是做什么的？如果您需要对当前的引用，则应首先保留当前。如果你EJB远程？如果是，那么要么将其设为本地，要么确保您使用 merge() 而不是 persist()，因为您的新对象具有对分离对象的引用。或者在当前持久化上下文中找到引用。

# asp.net - ASP.NET Web 窗体网站中的路由

> ID：12823212
> 
> 赞同：0
> 
> 时间：2012-10-10T15:39:33.033
> 
> 标签：asp.net, routing, webforms

我正在尝试在我的 ASP.NET Web 窗体 - 站点中实现路由机制。不幸的是，我可以找到所有关于如何做到这一点的教程描述 ASP.NET Web 表单 - 应用程序场景，带有 Global.asax 文件。我显然没有这个文件。我有哪些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:41:08.097

单击解决方案资源管理器顶部的显示所有文件图标，您应该能够看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:41:11.950

您应该查看 MVC 设计模式。

# mysql - 在 Rails 控制台中创建记录

> ID：12823215
> 
> 赞同：1
> 
> 时间：2012-10-10T15:39:40.963
> 
> 标签：mysql, ruby-on-rails-3.2

我是 ruby​​ on rails 的新手，我正在关注 Lynda 的 Ruby on Rails 3 Essential Training 2010。

我在 Rails 控制台中创建记录时遇到问题，即使我创建了它返回 nil 的主题。这是来自控制台的代码：

> vane@vane-HP-G70-Notebook-PC:~/Sites/simple_cms$ rails c
> 
> 加载开发环境（Rails 3.2.8）
> 
> 1.9.3-p194 :001 > subject = Subject.new(:name => "Fourth Subject", :position => 4, :visible => true)
> 
> => 主题 id：nil，名称：nil，位置：nil，可见：false，created_at：nil，updated_at：nil>
> 
> 1.9.3-p194 :002 > subject.save (0.1ms) BEGIN SQL (0.4ms) INSERT INTO `subjects`( `created_at`, `name`, `position`, `updated_at`, `visible`) VALUES ('2012-10-10 15:06:11', NULL, NULL, '2012 -10-10 15:06:11', 0) (56.4ms) 提交
> 
> => 真

它没有显示任何错误，所以我现在不知道该怎么做。任何帮助将不胜感激。

这就是我在 app>models subject.rb 中的内容：

```
 class Subject < ActiveRecord::Base 
    attr_accessor :name, :position, :visible 
    attr_accessible :name, :position, :visible
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T07:45:18.370

After i removed this line

> attr_accessor :name, :position, :visible

from subject.rb the problem got solved.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:41:29.280

您可能需要使您的属性[可访问](https://stackoverflow.com/questions/1789996/attr-accessible-in-rails-active-record)，以便可以在您的`new`调用中分配它们。

# android - 管理 IP 客户端应用程序的生命周期

> ID：12823223
> 
> 赞同：0
> 
> 时间：2012-10-10T15:40:04.603
> 
> 标签：android, network-programming, lifecycle

我有具有以下对象的 IP 客户端应用程序：

1.  `Socket`实例连接到 IP 服务器。

2.  `Thread`例如，执行`ThreadFunction`. 此函数在连接时连续读取套接字。

现在我试图了解，当重新创建活动时（例如，在更改屏幕方向后）我应该怎么做。`Socket`实例丢失了吗？会发生什么`ThreadFunction`？查看另一端行为（IP 服务器），我看到客户端 Android 应用程序没有断开连接。那么，在这种情况下我的策略应该是什么：我应该再次创建这些资源，还是尝试通过某种方式恢复它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:47:52.053

我建议使用[Service](http://developer.android.com/guide/components/services.html)。它旨在满足您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:59:36.473

与应用程序被销毁时资源会发生什么有关的问题的答案是，一切都消失了，包括套接字和可运行文件。

即使从服务器端，只要服务器尝试通过它进行通信，套接字就会消失。

如前所述，您最好的解决方案是使用服务对其进行管理。使用活动非常相似，我鼓励你看几个例子。

如果您真的想在不使用服务的情况下使您现在拥有的内容保持一致，您可以禁用屏幕旋转添加`android:configChanges="orientation"`到`AndroidManifest.xml`

# reporting-services - 如何在 Microsoft Reporting Services 2008 R2 中生成每日报告？

> ID：12823228
> 
> 赞同：-1
> 
> 时间：2012-10-10T15:40:22.487
> 
> 标签：reporting-services

我有 sql 2008 中的数据库。每天在这个数据库中插入一些数据。我必须自动生成报告而不给出日期，即今天是 2012 年 10 月 10 日。我必须在 2012 年 11 月 10 日每天查看 2012 年 10 月 10 日的报告。它应该自动发生，即以前的日期条目应该在当前日期生成，而无需每天更改日期。无论是 SSRS 报告中的可能还是我们必须更改存储过程，请给出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:47:34.927

对的，这是可能的。我刚刚做完。

两种选择：

*   1 指定报告参数（日期）并为其提供默认参数。（使用公式 - 提示，在公式编辑器中查找 DateAdd）
*   2 在 SQL 中使用 DateAdd 设置查询

获得报告后，创建订阅。

文档中介绍了如何执行所有这些操作，可以从 SSRS 网站上的帮助中获得，或者在报告生成器中按 F1。

# rst2pdf - 突出显示代码行

> ID：12823232
> 
> 赞同：1
> 
> 时间：2012-10-10T15:40:29.297
> 
> 标签：rst2pdf

rst2pdf 是否支持源代码中的行高亮？像这样：

```
.. code-block:: c
   :include: example.c
   :emphasize-lines: 12,15-18 
```

有一个默认样式`pygments-hll`，应该使用，但不知道如何使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:22:20.650

目前，不，没有。使用 reporlab 似乎并不简单，也许为这些行设置一个固定的背景可能会起作用。

# c# - 如何创建包含 RSA 私钥/公钥的 PEM 文件

> ID：12823239
> 
> 赞同：1
> 
> 时间：2012-10-10T15:40:45.887
> 
> 标签：c#, .net, encryption, rsa

在文件中存储 RSA 私钥/公钥的标准方法是什么。我们如何创建这些文件。创建这些文件后，我们如何使用标准 .NET Framework 类来读取它们。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:49:18.057

> 在文件中存储 RSA 私钥/公钥的标准方法是什么。

RSA 公钥通常以[DER 或 PEM](http://en.wikipedia.org/wiki/X.690)格式存储为 SubjectPublicKeyInfo ASN.1 对象。或者，它们通常包含在 X509 证书中（同样是 DER 或 PEM 格式）。

RSA 私钥通常以加密方式存储在[PKCS#8 文件](http://www.rsa.com/rsalabs/node.asp?id=2130)中。

> 我们如何创建这些文件。

OpenSSL 可用于生成上述格式的 RSA 密钥对。请参阅 Google 了解如何执行此操作。

> 创建这些文件后，我们如何使用标准 .NET Framework 类来读取它们。

[在 .net 框架中使用先前生成的 RSA 公钥/私钥](https://stackoverflow.com/questions/1528928/using-a-previously-generated-rsa-public-private-key-with-the-net-framework?rq=1)

# c# - 问题：无法创建 Telerik.Sitefinity.Web.UI.ContentUI.Config.ContentViewDefinitionElement 的实例，因为它是一个抽象类

> ID：12823240
> 
> 赞同：0
> 
> 时间：2012-10-10T15:40:46.887
> 
> 标签：c#, asp.net, sitefinity, sitefinity-5

我正在使用 sitefinity 开展一个项目，但遇到了一个似乎无法解决的错误。我尝试实施此[评论通知](http://www.sitefinity.com/devnet/forums/general-discussions-/email-notification-for-new-comments-at-blogposts#V9jIpvuffUS0zyYp7qRH3Q)修复，但发生了一些事情。用我自己的 ViewType 名称更改后，我收到此错误：

> 无法创建 Telerik.Sitefinity.Web.UI.ContentUI.Config.ContentViewDefinitionElement 的实例，因为它是一个抽象类。

我无法查看任何带有博客小部件的页面......这就是全部！

我从工作备份中恢复了数据库，但错误仍然存​​在。我似乎找不到太多关于如何解决这个问题的信息，有没有人遇到过这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:49:37.243

自己解决了。我更改了不应该更改的名称。

# cordova - 在pageinit上将jquery mobile与cordova结合起来

> ID：12823246
> 
> 赞同：0
> 
> 时间：2012-10-10T15:40:58.617
> 
> 标签：cordova, jquery-mobile, ibm-mobilefirst

我正在尝试找出构建它的最佳方法。我正在将外部 html 页面加载到我的应用程序中。我有一个 pageinit 函数，它用一些数据填充页面。我也想用这个来获取手机的地理位置，但我需要检查设备是否可以使用cordova。当cordova准备好时，我如何确保函数会被触发？

我有以下内容，但每次都会收到警报“代码：2，消息：无法启动地理定位服务”。

```
var onSuccess = function(position) {

    $('#latnlng').html(position.coords.latitude + ', ' + position.coords.longitude );
};

function onFailure(error){
    alert('code: ' + error.code + '\n' +
          'message: ' + error.message + '\n');
}

jq( document ).delegate("#singleCompany", "pageinit", function() {
    retrieveCompany("527378C0D3465729A2F0B8C063396C5D");

    navigator.geolocation.getCurrentPosition(onSuccess,onFailure);
}); 
```

我想我需要将它与以下内容结合起来，但我不确定如何

```
document.addEvenListener("deviceready", onDeviceReady, false);

function onDeviceReady(){
navigator.geolocation.getCurrentPosition(onSuccess,onFailure);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:02:05.127

您应该`navigator.geolocation...`从事件处理程序中删除代码并在`pageinit`事件处理程序中运行它`deviceready`。`deviceready`在事件触发之前，Cordova 公开的地理位置 API 将不可用。

例如：

```
jq( document ).delegate("#singleCompany", "pageinit", function() {
    retrieveCompany("527378C0D3465729A2F0B8C063396C5D");
});

document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady(){
    navigator.geolocation.getCurrentPosition(onSuccess,onFailure);
} 
```

**更新**

要仅对单个页面（不是起始页面）运行地理位置代码，您可以设置一个标志来确定`deviceready`事件是否已触发。

例如：

```
var isDeviceReady = false;
function onDeviceReady(){
    isDeviceReady = true;
}
document.addEventListener("deviceready", onDeviceReady, false);

jq( document ).delegate("#singleCompany", "pageinit", function() {
    retrieveCompany("527378C0D3465729A2F0B8C063396C5D");

    if (isDeviceReady) {
        navigator.geolocation.getCurrentPosition(onSuccess,onFailure);
    } else {
        //here you could set an interval to check the value of `isDeviceReady` and then call the geo-location code when it is set to `true`
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T07:03:45.990

实际上，如果您使用的是 Worklight，那么将您的代码或从 wlEnvInit 或 wlCommonInit 函数内部调用一个函数就可以解决问题。

# google-docs-api - Google Drive API 比 Documents List API 慢

> ID：12823256
> 
> 赞同：2
> 
> 时间：2012-10-10T15:41:18.477
> 
> 标签：google-docs-api, google-drive-api

我最近将我们的 web 应用程序从 GDocs 迁移到 GDrive，我注意到即使`files.list`调用所需的时间也比相应的 Docs 调用长约 3 倍（约 2.5 秒）。

这似乎并不取决于响应的大小（实际上，在我的测试中，Docs 的 XML 比 Drive 的 JSON 大）。在通过 Google 的 OAuth Playground 进行简单请求时，我也遇到过同样的行为，因此我会排除任何本地连接或库问题。

有什么方法可以加快 API 调用速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:45:48.737

Check the Google Drive SDK documentation for performance tips:

[https://developers.google.com/drive/performance](https://developers.google.com/drive/performance)

Tips include using gzip and partial response/update.

# javascript - 为什么我的 while 循环不重复？

> ID：12823258
> 
> 赞同：1
> 
> 时间：2012-10-10T15:41:24.353
> 
> 标签：javascript, while-loop

```
 var num = [1,1];
 var total = 0;
 var i = num.length;
 do {
    i++;
    num[i] = num[num.length-1] + num[num.length-2];
    total+=num[i];
    console.log(total);
 }
 while(num[num.length] < 4000000); 
```

我已经研究了一两天的 Project Euler 问题，希望能扩展我的知识和实用性。在第二个问题上，我一直在想出一种（不好的）方法来获得斐波那契数列。但是，我的代码将打印“2”到控制台，因为它应该但随后停止。我遇到的另一个问题是，仅使用“while(X IS TRUE/FALSE) { DO STUFF }”是行不通的。不知道为什么。

我可能只是在犯愚蠢的错误，但有人请赐教:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:43:25.520

`num.length`将始终比 的最后一个索引大 1 `num`，即如果`num.length`为 5，`num`则索引为 0 到 4，`num[5]`则不存在。

最高可用索引将在您的情况下`num.length - 1`尝试`num[num.length - 1]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:49:39.543

您的`num`数组有 2 个元素，因此`num.length`（也`i`）是 2。`do`块中的第一条语句是`i++`. 现在`i`是3。

你正在设置`num[3]`，这意味着`num`现在`[1, 1, undefined, 1]`。

此外，在您的`while`, 您正在检查`num[num.length]`. 由于数组是零索引的，所以这*永远不会*起作用，就像`num.length`现在 4 一样。

我的建议是：`i`设置元素后递增。因此，您推送一个新元素，然后增加长度计数器。

```
var num = [1, 1],
    total = 0,
    i = 2;  // we already know the length, no need to get it
do {
    // we don't need the i++ here
    num[i] = num[i - 1] + num[i - 2]; // add the last 2 elements to the end
    total += num[i];
    console.log(total);
}
while (num[i++] < 4000000);  // "i++" increments i and returns its old value 
```

# javascript - 我无法用 javascript 和 regex 正确替换

> ID：12823262
> 
> 赞同：1
> 
> 时间：2012-10-10T15:41:28.937
> 
> 标签：javascript, jquery, regex, replace

我有这个字符串：

```
var value = recordsArray_f006b490[]=1&recordsArray_9715b841[]=1&recordsArray_afb085e2[]=1&recordsArray_fc542e23[]=1&recordsArray_19490084[]=1&recordsArray_615a5055[]=1&recordsArray_32841aa6[]=1&recordsArray_a02a35c7[]=1&recordsArray_d32b5b88[]=1&recordsArray_d32d5339[]=1&recordsArray_56c2b8e10[]=1&recordsArray_8ce9f4211[]=1&recordsArray_5a87afc12[]=1&recordsArray_2b13c0113[]=1&recordsArray_afb085e14[]=1&recordsArray_51db9f216[]=1&recordsArray_2a7470415[]=1&recordsArray_d51057a17[]=1&recordsArray_b274ee918[]=1&recordsArray_d0812dd19[]=1&recordsArray_b1ede8920[]=1&recordsArray_9d76ae821[]=1&recordsArray_0ae779d22[]=1&recordsArray_871777923[]=1&recordsArray_9e22c9f24[]=220236&recordsArray_787c57e25[]=220236&recordsArray_499e25726[]=1&recordsArray_a0600da27[]=220236&recordsArray_9ef1fca28[]=220236&recordsArray_67eee1929[]=220236&recordsArray_24c3a0b30[]=220236&recordsArray_5d2090831[]=220236 
```

我想用“_”替换“[]=”，我有下一个javascript代码：

```
var regex = new RegExp("[]=", "g");
alert(value.replace(regex, "_")); 
```

但它并没有改变任何东西，我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T15:44:58.227

转义第一个`[`以表明它没有定义*字符类*；

```
 var regex = new RegExp("\\[]=", "g"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:44:10.247

方括号在正则表达式中保留。您需要转义它们以进行匹配

```
var regex = new RegExp("\\[\\]=", "g"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T15:44:24.677

转义括号，因为它们具有特殊含义。

```
var regex = new RegExp("\\[\\]=", "g"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T15:48:38.683

正如其他人所指出的，您需要转义方括号，因为它们在正则表达式中具有特殊含义。我还想指出，最清晰、最简洁的方法是使用 JavaScript 的正则表达式文字符号：

```
 var regex = /\[]=/g; 
```

您还只需要转义左`[`括号。右括号（`]`字符）仅在字符类内部具有特殊含义，就像在[字符类](http://www.regular-expressions.info/charclass.html)`[`之外仅具有特殊含义一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T15:45:41.620

您不能在正则表达式中包含括号。用于`\\[`此。

# javascript - 使用纯javascript获取body标签中的所有元素

> ID：12823264
> 
> 赞同：55
> 
> 时间：2012-10-10T15:41:31.800
> 
> 标签：javascript, html

我正在尝试使用纯 javascript 在数组中获取 HTML 页面的 Body 标记内的所有元素（标记）。我的意思是不使用任何框架（例如 JQuery）。

我发现您可以使用`document.all`，但这将返回整个文档中的所有元素，包括脚本。

反正我可以得到这些标签吗？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-10-10T16:06:15.130

如果您想要 body 标签内的所有元素，而不仅仅是一级子元素，您可以简单地使用`getElementsByTagName()`通配符：

```
var elems = document.body.getElementsByTagName("*"); 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-10-10T15:43:17.397

你可以使用[`document.querySelectorAll()`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)它。

如果你真的想要所有（包括嵌套标签），使用这个

```
 var elements = document.querySelectorAll( 'body *' ); 
```

如果您只想要直接子节点，请使用

```
 var elements = document.querySelectorAll( 'body > *' ); 
```

# joomla - 如何在 joomla 中去除 URL 中的查询？

> ID：12823271
> 
> 赞同：0
> 
> 时间：2012-10-10T15:41:59.280
> 
> 标签：joomla

我正在 Joomla 中开发一个自定义搜索模块。它通过 GET 方法搜索所有数据。因此，当有人搜索时，它会在 url 后给出“boys=boys&letter=G”。但我希望它像男孩/字母/G 一样显示。我知道它可以通过 .htaccess 来完成，我也通过 REWRITErule 完成了它，但它不会影响任何事情。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T00:28:56.513

您需要为搜索结果制作路由器。你可以看看核心搜索组件是如何做到的。 [http://docs.joomla.org/Search_Engine_Friendly_URLs#Custom_Routing](http://docs.joomla.org/Search_Engine_Friendly_URLs#Custom_Routing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T00:41:30.960

此外，您可以使用[JoomSEF](http://www.artio.net/joomla-extensions/joomsef)或[AceSEF 之](http://www.joomace.net/joomla-extensions/acesef-joomla-seo-sef-urls)类的组件。

这将为您提供 SEO 友好的 url，无论您正在呈现什么组件，并且无需对每个组件进行编码。

# python - 创建类型 liblas.point.Point 以使用 Liblas 模块保存 *.las 文件

> ID：12823274
> 
> 赞同：0
> 
> 时间：2012-10-10T15:42:10.310
> 
> 标签：python, formatting, type-conversion, lidar

我有一个数据集：

```
 s
'308342.38 6964462.78 122.15 16 1 1 0 0 1 0 114.985 7.1653 '

type (s)
<type 'str'> 
```

我想做的是创建一个 liblas.point.Point 并将它（有几百万个点）保存在一个 *.las 文件中

```
file_out = lasfile.File(outFile,mode='w') 
```

这是消息错误：

```
file_out.write(s)
Traceback (most recent call last):
File "<interactive input>", line 1, in <module>
File "C:\Python27\lib\site-packages\liblas\file.py", line 382, in write
'be of type liblas.point.Point' % pt) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:45:48.130

您可以`Point`通过实例化它来创建实例：

```
pt = liblas.point.Point() 
```

然后，您只需填写其字段（`x`、`y`、`z`等）即可`write`。

# visual-c++ - Visual Studio 2010 中的 C++ 强类型枚举

> ID：12823282
> 
> 赞同：2
> 
> 时间：2012-10-10T15:42:35.440
> 
> 标签：visual-c++

当我在 VS2010 中使用强类型枚举时，例如：

```
enum eTest : long long
{
_test1                  = 0x0000000000000001,
_test2                  = 0x0000000000000002,
}; 
```

我收到这个警告：

[http://msdn.microsoft.com/en-us/library/ms173702.aspx](http://msdn.microsoft.com/en-us/library/ms173702.aspx)

使用了非标准扩展：为枚举“枚举”指定基础类型

为什么是这样？我以为VS2010支持C++11？在 64-32 位 VS2010 编译器之间基于 64 位的枚举是否安全？

编辑：

关于我问题的第二部分：我询问了 32 与 64 位，因为在针对 32 位时来自 64 位枚举的 OR'ing 位标志会导致编译器错误。但是我发现原因是因为启用微软的代码分析会导致这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:05:10.977

C++11 枚举是这样完成的：

```
enum class eTest : long long
{
    _test1                  = 0x0000000000000001,
    _test2                  = 0x0000000000000002,
}; 
```

请参阅[强类型枚举](http://en.wikipedia.org/wiki/C++11#Strongly_typed_enumerations)

[**编辑**:] 而且我相信 VS 2010 没有支持这一点的编译器。[我认为MSVC++ 10 编译器](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)仅部分支持 C++11 枚举

至于大小：查看[这个](http://msdn.microsoft.com/en-us/library/s3f49ktz%28v=vs.80%29.aspx)关于数据类型大小的页面。Microsoft 在其编译器的 32 位和 64 位版本之间没有太大差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-08T15:03:17.377

VS 2010 不是完整的 C++11 实现：[支持 C++11/14/17 功能（现代 C++）](https://docs.microsoft.com/en-us/previous-versions/hh567368(v=vs.140)#stl)

来自 Microsoft VS2010 文档：[C++ 枚举声明](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2010/2dzy4k6e%28v%3Dvs.100%29)

枚举的定义：

```
enum [tag] [: type] {enum-list} [declarator]; 
```

> **type**是标识符的基础类型。这可以是任何标量类型，例如 int、short 或 long 的有符号或无符号版本。也允许使用 bool 或 char。

它什么也没说`long long`（也许文档没有更新）。

# tridion - 从页面发布路径获取 Tridion URI？

> ID：12823283
> 
> 赞同：1
> 
> 时间：2012-10-10T15:42:35.457
> 
> 标签：tridion, tridion-2011

我想从 Tridion Page PublishPath （来自公共站点的 URL）获取页面 URI。

我知道我可以使用 WebDavURL 来获取页面 - 但在很多情况下这与页面路径不匹配（例如页面文件名是“新闻主页”但文件名是“索引”的情况）。

我目前认为这在 Tridion 中是不可能的，并考虑了以下解决方案：

1.  将页面发布路径存储在 Tridion Solr 索引中（通过扩展它） [自定义 Tridion 搜索索引处理程序：页面 url 的自定义与标准字段？](https://stackoverflow.com/questions/11881419/customized-tridion-search-index-handler-custom-vs-standard-field-for-page-url)
2.  使用事件系统并将 PublishPath 和 Uri 持久化到外部 DB / KeyValueStore。

其他想法？

此代码将用于更新许多页面的脚本，但也用于编辑器使用页面 URL 打开页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:54:16.487

这可能被认为是一种奇怪的方法，但是您是否可以通过 URL 查询 Broker 以获取 PageMeta，然后您将能够从 PageMeta 对象访问 URI？

只是一个想法——但它可能并不理想——你能分享更多关于这个问题的背景吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:52:25.327

我假设你需要做这个 CME 方面？性能是一个因素吗？

您可以在 Tom.net 或 CoreService 中构建一个函数来拆分您拥有的路径并循环遍历 sgs 和页面，直到您到达正确的内容页面。只要页面发布后路径信息没有更改，就应该映射在一起。

# html - 当我的表单自动调整大小时，如何阻止网站元素被向上推？

> ID：12823293
> 
> 赞同：1
> 
> 时间：2012-10-10T15:43:14.100
> 
> 标签：html, css, forms, positioning

我正在制作一个测试登录页面并使用重力表单进行注册，我的问题是当表单在完成后自动调整大小（只为确认消息留出空间）时，它会向上推其下方的元素并破坏布局。我确定它是一个简单的解决方案，但我似乎找不到它。代码结构：

```
<h3 style="line-height: 15px;">SOME TEXT</h3>
<h3>MORE TEXT</h3>
<h3 style="line-height: 15px;">MORE TEXT</h3>
<h4>MORE TEXT</h4>
<img class="alignnone size-full wp-image-492" style="position: absolute; top: 430px; left: 80px;" src="image.png"width="350" height="202" /></a>
<div style="width: 40%; 
            background-color: #ffce32; 
            border: 3px solid #8E0F0F; 
            position: relative; bottom: 180px; left: 610px; 
            padding: 10px; border-radius:20px;">[my gravity form]</div>

<div style="position: relative; bottom: 160px;">
    <h4 style="text-align: center;">TEXT</h4>
    <img>
    <h4 style="text-align: center;">TEXT</h4>
    <div class="my_gallery" style="margin-left: 110px;"></div>
    <h4 style="text-align: center;">TEXT</h4>
    <p>TEXT</p>
    <h4 style="text-align: center;">TEXT</h4>
</div> 
```

问题在于表单正下方的 div 被向上推并在表单缩小时破坏了布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:54:11.940

如果您不想在事物消失时移动事物，您可以尝试在 div 中添加一个不间断的空间，以便它仍然被渲染。还要为 div 添加一个最小高度，这样它就不会太小，比如：

```
<div style="width: 40%; 
        background-color: #ffce32; 
        border: 3px solid #8E0F0F; 
        position: relative; bottom: 180px; left: 610px;
        min-height:400px; /*you'll have to experiment here to figure out what works*/
        padding: 10px; border-radius:20px;">[my gravity form] &nbsp;</div> 
```

我还建议使用类和 css 文件，而不是为每个 div 添加样式。

# sql - 按非字母排序，但在 postgresql 中按字母在 group by/order by 中显示

> ID：12823298
> 
> 赞同：2
> 
> 时间：2012-10-10T15:43:28.530
> 
> 标签：sql, postgresql, aggregate-functions, group-by

我有一个这样的数据库：

```
 descr    | hours |   timer    
----------+-------+------------
 foo      |   1.3 | 2012-07-14
 foo      |   2.5 | 2012-07-15
 foo      |  2.35 | 2012-07-16
 bar      |     1 | 2012-08-16
 baz      |     1 | 2012-08-16
 buh      |     5 | 2012-08-17 
```

这符合我的期望：

```
abc=# select extract('month' from timer) as Month, sum(hours) from foo group by Month     order by 1;

 month | sum  
 ------+------
 7     | 6.15
 8     |    7 
```

这并不完全符合我的预期：

```
abc=# select to_char(timer, 'Month'), sum(hours) from foo group by 1 order by 1 asc;

 to_char  | sum  
----------+------
August    |    7
July      | 6.15 
```

期望的结果是：

```
month     | sum
----------+-----
July      | 6.15
August    |    7 
```

我理解为什么会在 #3 中发生事情，但是如何在 PostgreSQL 中以最有效的方式实现预期的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:15:12.070

您可以在部分中使用提取表达式`ORDER BY`：

```
SELECT to_char(timer, 'Month'), SUM(hours)
FROM foo
GROUP BY to_char(timer, 'Month'), extract('Month' from timer)
ORDER BY extract('Month' from timer) ASC; 
```

这个查询得到了想要的结果。

# android - Application onCreate 和加载的资源之间的竞争条件？

> ID：12823300
> 
> 赞同：8
> 
> 时间：2012-10-10T15:43:46.870
> 
> 标签：android

我的应用程序有以下应用程序类。当应用程序启动时，我想从首选项中获取一些设置并启动后台服务。

```
public class MyApplication extends Application {

    public void onCreate() {
            SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
            String key = getResources().getString(R.string.prefkey_updateinterval);
            ...
    } 
```

这通常工作正常，但偶尔从 eclipse“运行”启动我的程序时，我会收到此错误：

```
10-10 08:25:47.016: E/AndroidRuntime(26402): Caused by: android.content.res.Resources$NotFoundException: String resource ID #0x7f0a0004
10-10 08:25:47.016: E/AndroidRuntime(26402):    at android.content.res.Resources.getText(Resources.java:216)
10-10 08:25:47.016: E/AndroidRuntime(26402):    at android.content.res.Resources.getString(Resources.java:269)
10-10 08:25:47.016: E/AndroidRuntime(26402):    at com.karwosts.MyApp.PortfolioStore.onCreate(PortfolioStore.java:40)
10-10 08:25:47.016: E/AndroidRuntime(26402):    at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:969)
10-10 08:25:47.016: E/AndroidRuntime(26402):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3395) 
```

这个 id 来自我的 R.java：

```
public static final int prefkey_updateinterval=0x7f0a0004; 
```

由于这在大多数情况下都可以正常工作，因此我必须假设 onCreate 和正在加载的资源之间存在某种竞争条件？

如果是这样，是否建议不要在Application onCreate中读取资源？

如果是这样，是否有更好的地方在应用程序启动时初始化服务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T15:51:52.390

> 由于这在大多数情况下都可以正常工作，因此我必须假设 onCreate 和正在加载的资源之间存在某种竞争条件？

如果*同一个*APK 文件——没有重新编译，没有重新安装等——没有始终如一地产生错误，那么它可能是某种竞争条件，尽管这会让我感到惊讶。

如果*同一个*APK 文件一直失败，那么这是一个更常见的资源与代码剩余部分不同步的问题，清理项目将清除它。

> 应用程序启动时是否有更好的地方来初始化服务？

恕我直言，需要“在应用程序启动时初始化服务”的应用程序数量极少，以至于我无法想到一个好的计划。这并不是说您没有这种情况，但在我的书中这是一种严重的代码异味，没有任何解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:58:54.407

我注意到在使用大量资源（并在 R.java 中生成）的情况下，在运行之前清理应用程序可以解决这些问题。所以我认为这不是竞争条件——而是 Eclipse 或 Android SDK 的问题，没有刷新资源。至于代码的放置 - 在我看来，它与任何其他选项一样好。

# php - Safari 在使用 html5 音频后终止会话

> ID：12823304
> 
> 赞同：2
> 
> 时间：2012-10-10T15:43:59.670
> 
> 标签：php, zend-framework, html5-audio, safari, safari6

我正在尝试使用 html5 音频播放 *.wav。客户端js看起来像

```
<script>    
    document.getElementById("player").src = "/moh/play/?track_id=1";
    document.getElementById("player").play();
</script> 
```

服务器端 php+Zend 1.8 看起来像

```
public function responceWav(MyNameSpace_Model_Track $model_track)
    {
        $this->getResponse()->setHeader("Content-Length", @filesize($model_track->getWAVPath()))
            ->setHeader("Connection", "Keep-Alive")
            ->setHeader("Content-Disposition", "attachment; filename=\"" . $model_track->getFileName() . "\".wav")
            ->setHeader("ETag", md5($model_track->getWAVPath() . time()))
            ->setHeader("Content-Type", "audio/x-wav");

        @readfile($model_track->getWAVPath());

        $this->view->layout()->disableLayout();
        $this->_helper->viewRenderer->setNoRender(true);

    } 
```

在 FF 中它工作得很好，但在 Safari 6.0.1 中，当我尝试跟踪时，会话（通过 cookie）被终止。通过wireshark转储：

1 个来自 Safari 的请求

```
GET /moh/play/?track_id=1 HTTP/1.1
Host: domain.com
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.14 (KHTML, like Gecko) Version/6.0.1 Safari/536.26.14
Accept: */*
Range: bytes=0-1
Accept-Encoding: identity
Referer: http://domain.com/
X-Playback-Session-Id: E8F45DB5-D018-4088-8BD3-9077ECE23F31
Cookie: PHPSESSID=d0hl91519jfm2jopklbdcsre14
Connection: keep-alive

HTTP/1.1 200 OK
Date: Thu, 11 Oct 2012 08:31:14 GMT
Server: Apache/2.2.15 (CentOS)
X-Powered-By: PHP/5.3.3
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Set-Cookie: PHPSESSID=aksnmpn4vquid961jp5rbthrk6; expires=Thu, 11-Oct-2012 09:01:14 GMT; path=/
Content-Length: 4118616
Connection: Keep-Alive, close
Content-Disposition: attachment; filename="cbde895a22ad1824b700f7118263bc08".wav
Etag: e1e7c9fad8c9a607ecdd5c045d5fd0bd
Content-Type: audio/x-wav 
```

AppleCoreMedia 的第二次请求

```
GET /moh/play/?track_id=1 HTTP/1.1
Host: domain.com
User-Agent: AppleCoreMedia/1.0.0.12C54 (Macintosh; U; Intel Mac OS X 10_8_2; ru_ru)
Accept: */*
Range: bytes=0-1
Accept-Encoding: identity
Cookie: PHPSESSID=aksnmpn4vquid961jp5rbthrk6
Connection: keep-alive

HTTP/1.1 200 OK
Date: Thu, 11 Oct 2012 08:31:14 GMT
Server: Apache/2.2.15 (CentOS)
X-Powered-By: PHP/5.3.3
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Set-Cookie: PHPSESSID=ec0fi4r90349h5icbaq4h4km64; expires=Thu, 11-Oct-2012 09:01:14 GMT; path=/
Content-Length: 4118616
Connection: Keep-Alive, close
Content-Disposition: attachment; filename="cbde895a22ad1824b700f7118263bc08".wav
Etag: e1e7c9fad8c9a607ecdd5c045d5fd0bd
Content-Type: audio/x-wav 
```

QuickTime 插件的第三次请求

```
GET /moh/play/?track_id=1 HTTP/1.1
Host: domain.com
User-Agent: QuickTime/7.7.1 (qtver=7.7.1;cpu=IA32;os=Mac 10.8.2)
Accept: */*
Cookie:  PHPSESSID=ec0fi4r90349h5icbaq4h4km64;
Connection: close

HTTP/1.1 200 OK
Date: Thu, 11 Oct 2012 08:31:14 GMT
Server: Apache/2.2.15 (CentOS)
X-Powered-By: PHP/5.3.3
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Set-Cookie: PHPSESSID=c7iu5ehbp852q0oi2m7evgjea3; expires=Thu, 11-Oct-2012 09:01:15 GMT; path=/
Content-Length: 4118616
Connection: Keep-Alive, close
Content-Disposition: attachment; filename="cbde895a22ad1824b700f7118263bc08".wav
Etag: a16b449dade53093415ac609dc5be199
Content-Type: audio/x-wav 
```

Safari 的第 4 次请求（**您好登录屏幕**）

```
POST /user/index HTTP/1.1
Host: domain.com
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.14 (KHTML, like Gecko) Version/6.0.1 Safari/536.26.14
Content-Length: 0
Accept: application/json, text/javascript, */*; q=0.01
Origin: http://domain.com
X-Requested-With: XMLHttpRequest
Referer: http://domain.com/
Accept-Language: ru
Accept-Encoding: gzip, deflate
Cookie: PHPSESSID=ec0fi4r90349h5icbaq4h4km64
Connection: keep-alive

HTTP/1.1 200 OK
Date: Thu, 11 Oct 2012 08:31:42 GMT
Server: Apache/2.2.15 (CentOS)
X-Powered-By: PHP/5.3.3
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Content-Length: 2040
Connection: close
Content-Type: text/html; charset=UTF-8 
```

我不明白可能是什么问题。

# c# - 如何获取默认的 Sharepoint AlertTemplates

> ID：12823305
> 
> 赞同：0
> 
> 时间：2012-10-10T15:44:02.617
> 
> 标签：c#, templates, sharepoint, sendmail, alert

我正在尝试创建一个自己的函数来从 SP 发送警报邮件。我知道有默认的警报和发送它们的方法。但是对于我的情况，我需要手动发送它们。

我的主要问题是如何从提供模板的文件中获取警报模板（SPAlertTemplate）：

```
C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\TEMPLATE\XML\alerttemplates.xml 
```

因此，手动发送邮件看起来与默认警报邮件相同。

我试图完成的将是代码：

```
SPAlertTemplate = ?.Get(SPAlertTemplateType.GenericList); 
```

或者

```
SPAlertTemplate = ?.[SPAlertTemplateType.GenericList]; 
```

但我不知道什么函数负责存储/管理这些模板，或者这是否是获取默认模板的正确方法。

提前致谢

油烟机

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:43:42.273

试试这个：

```
 SPAlertTemplateCollection atc = new SPAlertTemplateCollection((SPWebService)site.WebApplication.Parent);
     SPAlertTemplate newTemplate = atc["SPAlertTemplateType.GenericList"]; 
```

我刚刚在这里发布了一个更彻底的解决方案：

[https://sharepoint.stackexchange.com/questions/76085/how-can-i-create-custom-alerts-for-external-email-addresses/76086#76086](https://sharepoint.stackexchange.com/questions/76085/how-can-i-create-custom-alerts-for-external-email-addresses/76086#76086)

# python - 为 Python 项目返回全文文本的 RSS 提要服务/API

> ID：12823307
> 
> 赞同：2
> 
> 时间：2012-10-10T15:44:04.733
> 
> 标签：python, api, rss

我正在寻找自动返回提要文章的全文内容的 RSS 提要服务或 API。由于该项目的主要重点是自然语言处理，因此我想使用能够为我提供文章全文的东西，而不仅仅是摘要，还可以处理分页。我不确定这是否适用于任意提要，但如果有一项服务可以针对常见的提要（例如纽约时报、华盛顿邮报、华尔街日报）进行此操作，那就足够了。

如果没有很好的免费服务或提供此功能的 API，我也会考虑付费服务。

我已经看过[feedparser](http://code.google.com/p/feedparser/)，它似乎没有给你全文内容。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-10T15:55:11.557

[https://code.google.com/p/boilerpipe/](https://code.google.com/p/boilerpipe/)

演示： [https ://boilerpipe-web.appspot.com/](https://boilerpipe-web.appspot.com/)

# button - Open Graph 可以在 Facebook 的 Wall 和 Debuggeer 上使用，但不能使用点赞按钮

> ID：12823314
> 
> 赞同：1
> 
> 时间：2012-10-10T15:44:26.300
> 
> 标签：button, facebook-opengraph

例如，我在此页面上使用 Open Graph：

[http://www.ideeaddiocelibatoenubilato.it/addio-celibato-napoli.php](http://www.ideeaddiocelibatoenubilato.it/addio-celibato-napoli.php)

这是我页面的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN" "http://www.w3.org/MarkUp     /DTD/xhtml-rdfa-1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://ogp.me/ns/fb#">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Addio Celibato Napoli - Idee Addio Celibato E Nubilato -</title>
<meta name="description" content="Addio Celibato Napoli - Per una serata entusiasmante!"  />
<meta name="keywords" content="Addio Celibato Napoli" />
<meta property='og:image' content='http://www.ideeaddiocelibatoenubilato.it/Grafica/FacebookOG/addio-celibato-nubilato.png' />
<meta property="og:title" content=" Test OG Titolo " />
<meta property="og:description" content=" Test OG Description" /> 
```

当我发布页面链接并采用正确的图像、标题和描述时，它可以在 Facebook Walls 上工作，在调试器上工作：

[https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.ideeaddiocelibatoenubilato.it%2Faddio-celibato-napoli.php](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.ideeaddiocelibatoenubilato.it%2Faddio-celibato-napoli.php)

**但是当我或其他人单击它时，它在 Like 按钮上不起作用。在**这种情况下，它会获取在页面上找到的第一张图像以及标签的标题和描述，而不是 Open Graph 的。

我想问题出在like按钮上。

首先我导入body标签中的函数：

```
<div id="fb-root"></div>
<script type="text/javascript">(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/it_IT/all.js#xfbml=1&amp;appId=348639055215607";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

我指定我对我所做的所有 LIKE 按钮使用唯一的应用程序 ID。

然后由于验证，我将like按钮放在javascript的某个地方：

```
<div id="likeButtonDiv">
</div>
<script type="text/javascript">
   contenuto="<fb:like href='http://www.ideeaddiocelibatoenubilato.it/addio-celibato-napoli.php' send='true' layout='button_count' width='100' show_faces='false'></fb:like>";
    }
       document.getElementById('likeButtonDiv').innerHTML=contenuto;
  </script> 
```

这是我在另一个网站tendinosirotulea.it/webmaster.php 中使用的相同程序，它在那里运行良好。

# objective-c - xml 解析器终止了 Objective-C

> ID：12823318
> 
> 赞同：0
> 
> 时间：2012-10-10T15:44:32.557
> 
> 标签：objective-c, xml, nsxmlparser

我想在 Objective-C 中解析我的 xml 文件，但我得到了一个错误

```
 *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason:
'[<Presentation1Name 0x74592f0> setValue:forUndefinedKey:]: this class is not key value
coding-compliant for the key slide.'
*** First throw call stack:
(0x1c93012 0x10d0e7e 0x1d1bfb1 0xb7d711 0xafeec8 0xafe9b7 0x5129 0xbb11c7 0x48c65ee 
 0x48c5f07 0xbaf6d2 0x2008 0x157b7 0x15da7 0x16fab 0x28315 0x2924b 0x1acf8 0x1beedf9 
0x1beead0 0x1c08bf5 0x1c08962 0x1c39bb6 0x1c38f44 0x1c38e1b 0x167da 0x1865c 0x1e5d 
0x1d85)

libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

改成小写表示，我没有错误，但我无法解析 label="presentation1" 但是当我将其更改为大写 P -> Presentation 我可以解析它但进程终止

您能给我一些提示以找到问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:00:14.223

aPresentation 是您自己的课程，因此很难确切知道它是由什么组成的。但是，当您尝试这样做时，您的错误就会出现（除非您没有显示更多代码）：

```
[aPresentation setValue:currentElementValue forKey:elementName]; 
```

在这里，您说您在对象 aPresentation 中有一个名为 elementName 的属性；特别是您的错误是说没有名称为“幻灯片”的属性

是否有名称为“slide”的属性（变量）？显然不是。

我建议对 elementName 进行硬编码，因为显然它们与您的班级不相符。

根据 xml，您的属性（在 aPresentation 中）应命名为“幻灯片”，因此要么将类中的属性重命名为幻灯片，要么将元素名称更改为您所知道的名称。

```
[aPresentation setValue:currentElementValue forKey:@"slideLabel"]; 
```

其中一些是猜测工作，没有看到 Presentation1Name 的类结构

我还想指出一些你没有遵循的约定，这使得这段代码很难阅读。属性名称应该大写（第一个字母），包括类名中的数字是可以的，但不经常使用，在这种情况下可能不需要。您正在检查 elementName 是否为 Slides 或 slide 并且确实这些内容不应该更改，并且您应该能够删除其中一个语句。我还建议始终使用括号，您的其他一些陈述不要

# sql-server - SQL Server：添加 ORDER BY 时的表假脱机

> ID：12823320
> 
> 赞同：4
> 
> 时间：2012-10-10T15:44:37.843
> 
> 标签：sql-server, sql-server-2008

我有一个非常简单的查询，我正在尝试优化。issues_notes 是一个简单的表，而 meta_users 是我通过视图查询的远程数据库服务器上的一个表。

当我运行查询而不订购时，它会立即返回，但是当我添加时`ORDER BY date`，它需要大约 4 秒才能返回。我让 SQL Server 显示了执行计划，看来缓慢是在`Table Spool`仅发生在连接上的操作中引入的。有没有办法防止这种“优化”？

询问：

```
SELECT 
    [issues_notes].[date], 
    [meta_users].[firstname], 
    [meta_users].[lastname], 
    [issues_notes].[note] 
FROM 
    [issues_notes] 
    LEFT JOIN [issues_issue] 
        ON ([issues_notes].[issue_id] = [issues_issue].[id]) 
    LEFT OUTER JOIN [meta_users] 
        ON ([issues_notes].[author_id] = [meta_users].[userid]) 
WHERE 
    ([issues_issue].[issue_hash] = '%s' ) 
```

无订单执行计划：

![在此处输入图像描述](../Images/e5b54b76def91b741aba03bf5c1c4942.png)

订单执行计划：

![在此处输入图像描述](../Images/35a14150cfdf7881ca513be8c9c467b8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:02:05.167

Table Spool 是“Lazy Spool”。这意味着它会记住它看到的行，但不做任何额外的工作。因为连接左侧的行现在已排序，具有相同值的重复行将一个接一个地显示。spool 允许重复使用它们而不是再次访问远程服务器。

排序本身是一个阻塞运算符。这意味着它将在排序之前保存所有行，并仅在排序完成后返回它们。

我们在这里谈论多少行？两个查询的总执行时间是多少？

# java - 是否可以使用 Spring XML 访问字符串索引的 getter？

> ID：12823332
> 
> 赞同：2
> 
> 时间：2012-10-10T15:45:11.587
> 
> 标签：java, xml, spring, javabeans, getter

spring 上下文设置 XML 语言中是否存在“字符串索引”getter 的概念？假设我有`Person`以下原型的吸气剂：

```
class Person {
   Person getRelative(String relativeName);
   ...
} 
```

我可以用类似的东西访问它吗

```
<bean id="Bob" class="Person"/>

<bean id="Barnyard" class="Company">
   <property name="owner" ref="Bob.relative.father"/>
</bean> 
```

说 Bob 的父亲是 Barnyard 公司的老板。

`Company`原型如下：

```
class Company {
   Person getOwner();
   void setOwner(Person value);
   ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:07:27.677

您可以为此使用 Spring-El：

```
<bean id="Barnyard" class="Company">
   <property name="owner" value="#{Bob.getRelative('father')"/>
</bean> 
```

# google-chrome-devtools - 用于将焦点从 Web 开发人员工具切换到 Mac 上 Chrome 中的页面的键盘快捷键

> ID：12823333
> 
> 赞同：33
> 
> 时间：2012-10-10T15:45:12.227
> 
> 标签：google-chrome-devtools

这个问题与以下具有不同标签的现有问题直接相关：

[用于将焦点从 Web 开发人员工具切换到 Chrome 页面的键盘快捷键](https://stackoverflow.com/questions/10981973/keyboard-shortcut-to-switch-focus-from-web-developer-tools-to-page-in-chrome)

如标题所述，无论如何我们可以将焦点从 Web 开发人员工具切换到 Mac OSX 上的 Chrome 页面。

我在网上查了一下，在 Chrome Dev 上。文档和帮助论坛，那里什么都没有，但他们指向 SO 寻求答案。这里有一些关于这个问题的链接，我已经发现没用了：

*   [https://developers.google.com/chrome-developer-tools/docs/shortcuts](https://developers.google.com/chrome-developer-tools/docs/shortcuts)
*   [https://groups.google.com/forum/?fromgroups#!topic/google-chrome-developer-tools](https://groups.google.com/forum/?fromgroups#!topic/google-chrome-developer-tools)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2016-06-05T01:46:16.953

按`F6`三下。要返回 DevTools，请按一下`F6`。

`F6`按以下顺序循环焦点：

*   页
*   DevTools（如果 DevTools 已打开）
*   地址栏
*   书签

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-06-01T06:38:41.667

您可以使用“Cmd + L”将焦点移至地址栏。如果您`javascript:`输入地址栏并按回车键，您可以将焦点切换到页面。

但是`javascript:`也太长了吧？然后按照这个。

1.  转到 Chrome 设置页面 (Cmd + ,)
2.  单击“搜索”部分中的“管理搜索引擎...”
3.  添加一个新的搜索引擎
    *   任何名称，例如返回页面
    *   任何关键字，例如 j
    *   网址 -`javascript:`

![在此处输入图像描述](../Images/a56012f66546971fdd08b00e4e588d2f.png) 现在您只能使用 将焦点移至页面`j`。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-02-28T16:18:47.470

如果您未停靠开发工具，则在 Mac 上使用`Cmd`+ ```（反引号）将焦点移动到活动窗口或下一个窗口。

可以在以下位置找到并自定义此键盘快捷键：

> 系统偏好设置 -> 键盘 -> 快捷键 -> 选择*“键盘”*类别

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-10-26T00:52:09.230

我有这个完全相同的用例，我很惊讶没有一个简单的快捷方式。我做了一些研究，似乎有几个选择：

1.  用于`command + option + J`关闭控制台。这会将焦点带回网页。然后，`command + option + J`再次点击将打开控制台并再次将焦点指向那里。这可能不是最好的方法，因为每个切换都有一点点。

2.  在单独的窗口中打开开发工具。您可以通过单击开发工具右上角的三个点来找到它，然后您可以找到一个用于将工具取消停靠到单独窗口中的按钮。然后，要在网页和控制台之间切换焦点，您可以点击`command + ``.

3.  @Sangdol的上述[答案](https://stackoverflow.com/a/30567119/4478866)是将焦点从控制台切换到网页的绝佳解决方案。这可能是设置完成后最快和最好的方法。我唯一想补充的是如何将焦点切换回控制台。为此，您可以点击`command + shift + C`两次（仅点击一次将成功切换焦点，但会使浏览器处于“检查元素”模式）。我发现如果网页上的焦点在文本框中，您可能必须先点击`Esc`才能点击`command + shift + C`.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-03-16T02:53:41.683

1.  按`⌘</kbd>+`L` to go to address bar.`
2.  按`Esc`。

您现在已将焦点从 Web 开发人员工具转移到页面。切换回按焦点回按`⌘</kbd>+`⌥</kbd>+`C`.``

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-08-16T08:46:39.563

这适用于停靠但最适合未停靠的开发工具和多个窗口/选项卡。

1.  以 devtools 为重点`⌘</kbd>+`Shift`+`P``
2.  开始输入`Debuggee`
3.  看到后按回车`Focus debuggee`，完成！   

然后回到开发工具就行了`⌘</kbd>+`⌥</kbd>+`J` to focus back on the tab you left them.``

它每天都为我节省了一些时间——我的标签可以在一天之内……或几天……几周——很确定你们都去过那里——研发！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-26T05:28:28.620

OS X 10.8.3 - 山狮

自定义“将焦点移到应用程序中的下一个窗口”快捷方式，因为默认的键映射是“Command + F1”，它绑定在chrome上显示“开发者工具的快捷方式”。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-08-15T06:25:45.563

**新更新：**在 chrome 版本 92.0.4515.131 中。

*   ***当 DevTools 打开并聚焦时。***

*   按 ( `⌘ Command`+ `⌥ Option`+ `↓ Down`)**两次。**
    第一次按下 - 焦点将转移到 URL。
    第二次按下 - 焦点将转移到页面。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-10-16T10:18:13.103

打`⌘</kbd>+`⌥</kbd>+`J` twice will hide the dev tools and focus on your actual window. Do you want to focus on window without hiding dev tools?``

# blackberry - 通过 BlackBerry 移动网络链接启动 Foursquare 应用程序

> ID：12823335
> 
> 赞同：1
> 
> 时间：2012-10-10T15:45:20.247
> 
> 标签：blackberry, foursquare

有没有办法在网页上创建链接以启动 Foursquare 应用程序的 BlackBerry 本机版本？我想在应用程序中打开一个特定的场所，但我什至找不到让应用程序启动的方法。

在 Android 和 iOS 上，有 URL 方案可以完成此操作，例如在此页面上： [https ://developer.foursquare.com/resources/client](https://developer.foursquare.com/resources/client)

但是，该页面没有处理来自 BlackBerry 设备的 Web 链接。特别是，我对 BlackBerry OS 6/7 手机感兴趣。

foursquare：URL 失败并显示不支持的错误消息，并且指向foursquare.com 的http 链接只是在同一个浏览器窗口中打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:24:52.913

[在https://developer.foursquare.com/resources/client](https://developer.foursquare.com/resources/client)页面底部的“BlackBerry Native App Integration”下，您可以找到有关如何从其他 BlackBerry 应用程序启动本机foursquare 应用程序的说明。

# ios - 检索最新推文的最简单方法？

> ID：12823336
> 
> 赞同：1
> 
> 时间：2012-10-10T15:45:25.347
> 
> 标签：ios, objective-c, twitter

我一直在研究 Twitter 框架，我想知道，有没有一种简单的方法可以从用户那里检索最新的推文，而不是一次获取大量推文？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:50:33.290

您应该使用`TWRequest`或`SLRequest`（iOS 6+）。首先，您必须使用`ACAccount`. [这是](https://gist.github.com/3866796)一个例子。

然后，您必须向 twitter API 执行请求以获取最后的推文。您可以设置基数，因为您会通过不同的参数找到[她](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)的许多其他内容。

可以使用 TWRequest（在 iOS 6 中已弃用）或使用`SLRequest`（在 iOS 6 中引入）来执行请求。[这里](https://gist.github.com/3866791)是一个如何确定使用哪一个的示例。

您必须记住链接框架。

# python - 如何将变量传递给双变音功能

> ID：12823338
> 
> 赞同：0
> 
> 时间：2012-10-10T15:45:34.020
> 
> 标签：python

我已经下载了双变音功能：[https ://github.com/dracos/double-metaphone](https://github.com/dracos/double-metaphone)

它应该像这样工作：

```
>>> dm(u'aubrey')
('APR', '')
>>> dm(u'richard')
('RXRT', 'RKRT')
>>> dm(u'katherine') == dm(u'catherine')
True 
```

如何将变量传递给该函数？你总是在路上。我需要能够做到

```
dm(x)==dm(y) 
```

现在这就是发生的事情：

```
>>> x='wal mart'
>>> y='wall mart'
>>> dm(x)==dm(y)
Traceback (most recent call last):
File "<pyshell#35>", line 1, in <module>
dm(x)==dm(y)
File "<pyshell#18>", line 6, in dm
st = ''.join((c for c in unicodedata.normalize('NFD', st) if unicodedata.category(c) != 'Mn'))
TypeError: normalize() argument 2 must be unicode, not str 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T15:48:38.273

`u''`是文字字符串对象的语法，除了可以处理 Unicode 字符外，它`unicode`与常规对象相当。`str`

```
>>> type('foobar')
<type 'str'>
>>> type(u'foobar')
<type 'unicode'>
>>> 'foobar' == u'foobar'
True 
```

只要您正在调用的函数接受您的输入，您就不需要`u`. 例如：

```
x = u'richard'
dm(x) 
```

* * *

您收到 TypeError 是因为该函数需要`unicode`对象并且您正在向它传递`str`对象。更改这些行：

```
x='wal mart'
y='wall mart' 
```

至：

```
x=u'wal mart'
y=u'wall mart' 
```

如果您将使用`str`对象，那么您可以`unicode`使用`unicode()`构造函数将它们转换为对象：

```
x='wal mart'
y='wall mart'

dm(unicode(x)) == dm(unicode(y)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T15:49:05.300

```
a = u'katherine'
b = u'catherine'

dm(a) == dm(b) 
```

# android - MediaPlayer 创建方法不适用于 Galaxy s3

> ID：12823344
> 
> 赞同：6
> 
> 时间：2012-10-10T15:45:54.703
> 
> 标签：android

以下代码的 MediaPlayer 中的 create 方法不适用于 Galaxy s3。它适用于 Galaxy s2 和 s1 设备。程序在到达 create 方法时挂起，我被迫关闭应用程序。我不知道是什么问题，谁能帮我解决这个问题。谢谢

```
Uri path = Uri.parse(url);
player = MediaPlayer.create(getBaseContext(), path);
player.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:18:51.807

`MediaPlayer`在这种情况下，有时使用构造函数会有所帮助：

```
MediaPlayer player = new MediaPlayer();
Uri ringtoneUri = ...;
player.setDataSource(context, ringtoneUri);
player.prepare();
player.start(); 
```

# django - 在 Django 中更新表单。如何设计？

> ID：12823346
> 
> 赞同：1
> 
> 时间：2012-10-10T15:45:54.177
> 
> 标签：django

我是 django 新手。

我有这个模型：

```
class Item(models.Model):
    name = models.CharField(max_length=255)
    quantity = models.IntegerField() 
```

如何创建视图以更新我所有项目的数量？

意见：

```
def item_list(request):
    item = Product.objects.all()[:6]
    return render_to_response('item.html',{'item':item},context_instance=RequestContext(request)) 
```

形式：

```
from django import forms

class QuantityForm(forms.Form):
    quan = forms.IntegerField() 
```

模板：

```
{% for i in item %}
    {{ i.name }}
    {{ i.quantity }}
{% endfor %} 
```

我正在尝试做这样的事情（`quantity`在我的模型中单击“更新”值后应该实现）：

![在此处输入图像描述](../Images/8ed7fb245b53788140b66986dd619c19.png)

请任何帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:23:29.290

首先，您需要一个视图，该视图检索项目 ID 和数量值，更新相关`Item`实例并将您重定向回页面。这是一个例子：

```
from django.views.decorators.http import require_http_methods
from django.shortcuts import redirect, get_object_or_404

@require_http_methods(["POST"])
def update_item(request)
    id = request.POST.get('id', None) #retrieve id
    quantity = request.POST.get('q', None)  #retrieve quantity
    item = get_object_or_404(Item, id=id) #if no item found raise page not found
    if quantity:
        #updating item quantity
        item.quantity = quantity
        item.save()

    return redirect('my-item-list-view-name') 
```

您还需要为`urls.py`. 例如：

```
...
url(r'^update-item/$', 'update_item', name='update_item'),
... 
```

然后您可以为模板上的每个项目制作一个表单：

```
{% for i in item %}
    <form action="{% url 'update_item' %}" method="post">
        {% csrf_token %}
        {{ i.name }}
        <input name="id" type="hidden" value="{{ i.id }}" />
        <input name="q" type="text" value="{{ i.quantity }}" />
        <input type="submit" value="update" />
    </form>
{% endfor %} 
```

我试图提供一个尽可能简单的解决方案。你应该知道 django 提供了很多很酷的东西，可以帮助你更有效地解决你的问题，例如表单、模型表单、表单集......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T17:56:46.710

在`views.py`：

```
 if request.method=='POST':
      if 'txt1' in request.POST:
         if request.POST['txt1']!='':
            obj=Item.objects.get(pk=request.POST['item1'])
            obj.quantity=request.POST['txt1']
            obj.save()
      if 'txt2' in request.POST:
         if request.POST['txt2']!='':
            obj=Item.objects.get(pk=request.POST['item2'])
            obj.quantity=request.POST['txt2']
            obj.save()
      if 'txt3' in request.POST:
         if request.POST['txt3']!='':
            obj=Item.objects.get(pk=request.POST['item3'])
            obj.quantity=request.POST['txt3']
            obj.save()
      #continue this code for all 6 items 
```

**更新：**

当然你可以把它放在一个循环中：

```
for i in range(1,6):
   if 'txt'+str(i) in request.POST:
      if request.POST['txt'+str(i)]!='':
         obj=Item.objects.get(pk=request.POST['item'+str(i)]
         obj.quantity=request.POST['txt'+str(i)]
         obj.save() 
```

在`template`：

```
<form method='POST' action=''>
{% for i in item %}

      {{ i.name }}:<input type='text' id='txt{{forloop.counter}}' value='{{ i.quantity }}' /><input type='hidden' id='item{{forloop.counter}}' value='{{item.pk}}' /><input type='submit' value='increase' id='sbm{{forloop.counter}}' />

{% endfor %}
</form> 
```

**更新：** `forloop.counter`是计数器的电流，1,2,3...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T17:59:33.930

您可以为您创建一个[ModelForm](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)`item`然后使用[Formsets](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)，或者如果您可以使用 jquery 将 ajax 请求提交到 django 视图，该视图会更新所选模型的项目

```
$('<yourbuttonclass').onClick(function(e){
    e.preventdefault()
    $.post(urlToPost, dataFromTextField&csrfmiddlewaretken={{csrf_token}})
     .success('Successfully Updated')
     ....

In your view:

#Get the item id from urlconf
@ajax_request
def update_view(request, item_id)
   #Update your item
   return {'Success': 'Updated to blah'} 
```

我喜欢使用[这里](https://bitbucket.org/offline/django-annoying)`ajax_request`的装饰器来发送 ajax 响应。您也可以发送一个`HTTPResponse('Successfully updated')`

如果你想创建一个 Restful 资源也是一个好方法，然后你会得到一个接口来从单个模式中创建、更新、读取和删除。阅读[Django Tastypie](http://django-tastypie.readthedocs.org/en/latest/index.html)

# asp.net - url 显示奇怪的字符串

> ID：12823347
> 
> 赞同：2
> 
> 时间：2012-10-10T15:45:57.080
> 
> 标签：asp.net, url, iis-7

我正在本地服务器（Windows Server 2008、IIS 7.0.6）上测试我的 asp.net 网站，当我在浏览器中输入 IP 地址时，例如，

```
192.168.0.5 
```

它像这样回来：

```
http://192.168.0.5/(S(u0nmzwxobbwpuk1mtvuybwn0))/default.aspx 
```

每次我输入 ip 并按 Enter 时，.0.5/ 和 /default.aspx 之间的奇怪内容都会发生变化。

内容显示正确，但显然 url 有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:48:06.940

听起来您可能正在使用无 cookie 会话。

基本上 ASP.NET 将您的会话 ID 存储在查询字符串中，而不是将其存储在 cookie 中。看起来很恶心，但允许您在有人不接受 cookie 时使用会话状态。[你可以在这里](http://msdn.microsoft.com/en-us/library/aa479314.aspx)阅读更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:48:58.077

在这里猜测 - 在您的`web.config`文件中，您已将`sessionState` `cookieless`属性设置为`UseUri`或`true`。

请参阅有关[`sessionState`](http://msdn.microsoft.com/en-us/library/h6bb9cz9%28v=vs.100%29.aspx)元素的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T15:49:16.033

好像您启用了无 Cookie 会话。下面的文章说明了这种行为：

[MSDN - ASP.NET 中的无 Cookie 会话](http://msdn.microsoft.com/en-us/library/aa479314.aspx)

更改 Web.Config 中的设置可以更改行为：

```
<sessionState cookieless="true" /> 
```

# sql - 将 sql 查询转换为 cakephp 格式

> ID：12823349
> 
> 赞同：0
> 
> 时间：2012-10-10T15:46:03.270
> 
> 标签：sql, cakephp

**你好**

我需要将以下 sql 查询转换为 cakephp find() 格式。它自己的查询工作正常，但我需要更改它。

```
$this->Part->query(
    "SELECT `parts`.`id`,`parts`.`part_name` 
     FROM `parts`  
     LEFT JOIN ( 
         SELECT `op` . * 
         FROM `order_parts` AS `op` 
         WHERE `op`.`order_id` =".$this->Session->read('orderid')."
     ) AS `vT` 
     ON ( `parts`.`id` = `vT`.`part_id` )
     WHERE `vT`.`part_id` IS NULL"
); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:46:34.570

如果您的关系是 Order HABTM Part 并且您有一个包含列的表 orders_parts：id、order_id、part_id，您应该能够执行以下操作：

首先，获取按顺序排列的部件的 ID：

```
//each Part has one OrdersPart per order
$this->Part->bindModel(array('hasOne' => array('OrdersParts')));
$parts = $this->Part->find('list', array(
  'fields' => array('Part.name'),
  'conditions' => array(
    'OrdersParts.order_id' => $this->Session->read('orderid'),
  ),
  'recursive' => 2
)); 
```

现在获取不按顺序排列的部分：

```
$this->Part->find('all', array(
  'conditions' => array(
    "NOT" => array('Part.id' => array_keys($parts))
  ),
)); 
```

# javascript - JavaScript：状态栏不显示带有链接 IE9 的鼠标悬停文本

> ID：12823354
> 
> 赞同：3
> 
> 时间：2012-10-10T15:46:19.653
> 
> 标签：javascript, xhtml, internet-explorer-9

运行下面的代码时，它无法显示我写的文本。相反，它会在状态栏中显示链接的 URI。为什么会这样？

`<a href="link" onmouseover="self.status='your text';" onmouseout="self.status='';">link here</a>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:54:17.013

`window.status`不是标准属性。出于安全原因已将其删除。你不能在现代浏览器（包括 IE9）上这样做。

您必须找到另一种解决方案，例如在左下角制作一个小 div ：

```
<a href="link" 
onmouseover="document.getElementById('status').innerHTML='your text';"
onmouseout="document.getElementById('status').innerHTML='';">link here</a>
<div id=status style="position:fixed;bottom:0;left:0"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:58:01.863

能够修改状态栏信息是一种很好的方式来误导用户认为链接会将他们带到他们想要的地方而不是会窃取密码的地方......所以浏览器不会让页面作者弄乱它更多的。

> Internet Explorer 7 限制了网页使用脚本将信息写入状态栏的能力。对于 Internet 区域，此功能默认受到限制，并且受信任和受限站点区域的用户可配置设置的限制。这是确保用户不会被网页误导的工作的一部分。在不允许更新的情况下，对窗口状态的调用将静默失败。

— [Windows Internet Explorer 7 中的安全性和兼容性](http://msdn.microsoft.com/en-us/library/ms649488%28v=vs.85%29.aspx)

HTML 有一个 title 属性，专门用于提供有关元素的咨询信息。使用它来显示状态信息。

```
<a href="link" title="your text">link here</a> 
```

# jquery - JQuery Mobile 导致 Li 中的日期成为 iOS Safari 中的链接

> ID：12823355
> 
> 赞同：1
> 
> 时间：2012-10-10T15:46:23.507
> 
> 标签：jquery, html, ios, jquery-mobile, safari

我在为我的可排序列表实现 jquery mobile 时遇到了一些麻烦。

发生的事情是我的可排序列表工作正常，但似乎 jquery mobile 正在挑选 li 元素的日期并给它们一个 href ，从而使它们成为链接。这仅适用于 iOS Safari，在包括 Safari 桌面在内的任何其他浏览器上都可以

我读过类似的事情发生在 Jquery mobile 上，并将 href 转换为“#”，但据我所知，情况并非如此，因为 li 没有 href。

感谢您的见解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T06:17:26.807

您可以禁用自动检测 iOS 上的 Safari 宽度，代码如下：

```
<meta name="format-detection" content="telephone=no" /> 
```

此元标记用于禁用电话号码的自动检测，但它也可能适用于您的代码。

该文档在这里：
“如何禁用网页中电话号码的自动检测？”
[https://developer.apple.com/library/safari/#codinghowtos/Mobile/UserExperience/_index.html](https://developer.apple.com/library/safari/#codinghowtos/Mobile/UserExperience/_index.html)

谢谢。

# javascript - 在委托内调用取消委托

> ID：12823357
> 
> 赞同：0
> 
> 时间：2012-10-10T15:46:27.767
> 
> 标签：javascript, javascriptmvc

我在 jsmvc 的主目录上收听**$.route.delegate('someparam', ...)**，当它被触发时，我决定加载哪个控制器，并删除旧控制器（如果可用），这个问题我也使用**$ .route.delegate('some-other-param')**在控制器中，问题是当控制器被销毁时，它会尝试 $.router.undelegate('some-other-param') 导致错误：

```
 **delegate is undefined:**
file: delegate.js
73:    if(event.batchNum && delegate.batchNum === event.batchNum){ 
```

到目前为止，我可以在代码中看到，问题是因为我在查询委托的 for 循环内调用取消委托。

```
// for each delegate
            for(var i =0; i < len; i++){ 
```

有没有办法避免这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:26:22.153

I couldn't find a way to do this, in the end i used bind for the 'someparam' (which is the outer listener) and delegate for 'some-other-param' which is the inner.

That is a workaround for the delete is undefined error.

# makefile - 依赖项如何在 gnu Makefile 上工作？

> ID：12823358
> 
> 赞同：-1
> 
> 时间：2012-10-10T15:46:28.140
> 
> 标签：makefile, patch

依赖项如何在 gnu Makefile 上工作？

我想创建一个 Makefile，它： - 将应用一些补丁（在我们的示例中，在 main.c 上应用 main.patch） - 从修补的 main.c 文件创建一个名为 toto 的程序

```
my_patch=./main.patch
all: toto

patch: $(my_patch)
    echo "apply patch"

main.o: main.c
    gcc -o main.o -c main.c -Wall

toto: patch main.o $(my_patch)
    echo "build"
    gcc -o toto main.o 
```

但是，补丁总是被应用......这让我想到了我的问题：“依赖关系如何在 gnu Makefile 上工作？”

如果 main.patch 的日期小于二进制 toto，我如何告诉 gnu make 应用 main.patch 是没用的

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:47:45.840

虚假目标 ( `patch`) 令人困惑。`patch`规则修改，`main.c`所以让它成为目标：

```
my_patch=./main.patch
all: toto

main.c: $(my_patch)
    echo "apply patch"

main.o: main.c
    gcc -o main.o -c main.c -Wall

toto: main.o # no need to specify $(my_patch) here
    echo "build"
    gcc -o toto main.o 
```

**PS**，在你做的时候，你也可以引入[自动变量](http://www.gnu.org/software/make/manual/make.html#Automatic-Variables)；makefile 更干净，更易于维护：

```
main.o: main.c
    gcc -o $@ -c $< -Wall

toto: main.o # no need to specify $(my_patch) here
    echo "build"
    gcc -o $@ $^ 
```

# xsd - 表示 UML 的规范文档模式是什么？

> ID：12823359
> 
> 赞同：1
> 
> 时间：2012-10-10T15:46:29.587
> 
> 标签：xsd, uml, rdf, owl

我想使用可用的最标准约定在序列化文档中表示 UML 模型。我正在寻找一个规范的模式文档，该文档明确规定了执行此操作的最佳方法。我怀疑，如果存在这样的文档，那么它将用 XSD、RDF 和 OWL 编写。到目前为止，我只能找到有关该主题的 OMG 规范文档和学术论文。我发现了一些 XSD 模式，但它们只适用于实现的特定方面。

1.  是否有规范的文档架构？我在哪里可以找到它？如果不是，最常见的表示格式是什么，我在哪里可以找到它们的模式？

2.  是否有任何库可以帮助生成从此类格式良好的文档到图形表示（例如 SVG）的映射？理想情况下，该库应与 .NET 兼容，但这不是必需的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:01:02.680

您在寻找[XMI](http://en.wikipedia.org/wiki/XML_Metadata_Interchange)（XML 元数据交换）吗？它是用于 UML 模型的 XML 表示的 OMG 规范；当前版本似乎是[2.4.1](http://www.omg.org/spec/XMI/2.4.1/)，并且规范页面链接到两个 XSD 架构文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:52:51.217

理论上，XMI 应该回答您第一个问题的一部分。然而，XMI 并非没有危险。根据我自己尝试实现完全相同的经验，我认为首先要做的是了解其他人对此做了什么，以及如何使用这些标准文档。这些天来，我建议一个涉及[IBM RSA](http://www.ibm.com/developerworks/downloads/r/architect/)和[Sparx Enterprise Architect](http://www.sparxsystems.com.au/)的系统设置（可用的评估版本，可能需要注册，而且我不隶属于任何这些公司）。在一个工具中构建至少一个全面的 UML 模型，它可以为您提供所需的覆盖范围，然后使用 XMI 导出/导入功能在它们之间移动模型。走着瞧吧。看看这样的[公司](http://www.reischmann.com/)（TOOLBUS的制造商，不隶属于他们）并认为XMI应该如何影响他们的商业模式，但似乎并没有......

我认为成功是可以实现的，但对于（非常）狭窄的范围可能证明是可行的——范围界定是这里的关键。

至于第二部分，我认为您不会找到它，尤其是对于 .NET。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:10:04.480

XMI 是您需要的关键字。但是 XMI 只指定了文档格式。它确实指定了文档结构或内容。UML 元模型就是这样做的。org.eclipse.uml2 是一个为您服务的库——它实现了 UML 2.4 元模型并允许在 XMI 中存储和恢复它。IBM RSA 也使用这个库。正如其他几个 Java 工具所做的那样。

我不知道 .NET 语言中的 UML2 实现。

# cocoa - NSButton 在放入 M3NavigationView 时不响应单击

> ID：12823365
> 
> 赞同：0
> 
> 时间：2012-10-10T15:46:59.513
> 
> 标签：cocoa, navigation, nsbutton, nsviewcontroller

我正在使用[M3NavigationView](https://stackoverflow.com/questions/3837556/navigation-application-in-mac)进行视图导航，但是当我在里面推一个视图时出现问题（这里发生了一些动画），一个按钮大部分时间都不响应鼠标点击，我必须点击它两次,

![截屏](../Images/08b4294e9950337abb93bc05ba4b78e8.png)

我**单击了** *一次*按钮，似乎没有发生鼠标向上事件。我必须再次单击该按钮才能触发我的操作。

今天经过更多测试，我发现里面的按钮在显示2秒后可以正常工作。更奇怪。

有没有人知道这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:42:59.060

我使用了二分之一的苹果开发者支持服务，并得到了解决。双击 PXListView 的行需要稍作更改才能与 M3NavigationView 一起使用

```
if([theEvent clickCount]>1) {
    if([[self delegate] respondsToSelector:@selector(listView:rowDoubleClicked:)]) {
     [[self delegate] listView:self rowDoubleClicked:[theCell row]];
     return; //return here, this is the change
    }
} 
```

# google-app-engine - 将 AppIdentityCredential 与 Google Drive API 一起使用

> ID：12823366
> 
> 赞同：1
> 
> 时间：2012-10-10T15:47:00.303
> 
> 标签：google-app-engine, oauth-2.0, google-drive-api

我正在使用 Google App Engine Identity 访问 Google Apps 用户的 Google Drive API。我在 Google Apps 的管理 API 客户端访问中插入了 GAE URL，范围正确。

```
AppIdentityCredential credential = new AppIdentityCredential(Arrays.asList(DriveScopes.DRIVE_FILE));
    HttpTransport httpTransport = new NetHttpTransport();
    JsonFactory jsonFactory = new JacksonFactory();
    Drive service = new Drive.Builder(httpTransport, jsonFactory, credential).build(); 
```

我收到此错误：

```
com.google.appengine.repackaged.org.apache.http.impl.client.DefaultRequestDirector handleResponse
WARNING: Authentication error: Unable to respond to any of these challenges: {authsub=WWW-Authenticate: AuthSub realm="https://www.google.com/accounts/AuthSubRequest" allowed-scopes="https://www.googleapis.com/auth/drive,https://www.googleapis.com/auth/docs,https://www.googleapis.com/auth/drive.file,https://www.googleapis.com/auth/drive.readonly,https://www.googleapis.com/auth/drive.metadata.readonly"}
An error occurred: com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 OK
{
  "code" : 401,
  "errors" : [ {
    "domain" : "global",
    "location" : "Authorization",
    "locationType" : "header",
    "message" : "Invalid Credentials",
    "reason" : "authError"
  } ],
  "message" : "Invalid Credentials"
} 
```

*   是否需要在 Google Apps 的 API 客户端访问中启用 GAE 应用程序？如果没有，我如何授权 GAE 应用程序访问 API 范围？
*   是否可以在本地/Eclipse 中测试 GAE 身份？
*   总结一下，有什么问题或不足？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:24:51.457

1.  您无法在本地调试 AppEngine 凭据。调试的唯一方法是使用不同的凭据（用于生产的 AppEngine 和本地基于密钥的服务帐户）。它将需要为本地和生产环境编写不同的代码。

2.  您需要将您的 appengine 服务帐户添加到 Team。如果您为项目使用自定义 Google Apps 域，则需要在自定义域中创建电子邮件组并添加该组。所有服务帐户都应添加到此组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:19:14.583

考虑添加它尝试对其进行身份验证的范围。我的代码中出现了同样的错误，最终通过添加 drive.file 范围来解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-26T02:26:56.383

两个重要步骤

1.  获取应用程序默认凭据服务帐户 JSON 文件。
2.  使用 JSON 文件的路径设置 GOOGLE_APPLICATION_CREDENTIALS 环境变量。示例：GOOGLE_APPLICATION_CREDENTIALS=c:/myFolder/my.jsonfile

仅供参考： [https ://developers.google.com/identity/protocols/application-default-credentials](https://developers.google.com/identity/protocols/application-default-credentials)

# c# - 来自 DataRow 的 DataColumn 名称（不是 DataTable）

> ID：12823371
> 
> 赞同：50
> 
> 时间：2012-10-10T15:47:08.057
> 
> 标签：c#, .net, datarow, datacolumn

我需要从特定行迭代列名和列数据类型。我见过的所有示例都迭代了整个数据表。我想将一行传递给一个函数来做一堆条件处理。为了便于阅读，我想将条件处理分开。

这就是我所拥有的：

```
private void doMore(DataRow dr)
{
    foreach (DataColumn c in dr.ItemArray)  //loop through the columns. 
    {
        MessageBox.Show(c.ColumnName.ToString());
    }
} 
```

返回的错误是

> System.InvalidCastException：无法将“System.String”类型的对象转换为“System.Data.DataColumn”类型。

我将如何从行中获取列名，或者我别无选择，必须将整个数据表传递给函数？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-10-10T15:49:30.490

你仍然需要通过`DataTable`课程。但是您可以通过使用属性来使用您的`DataRow`实例。[`Table`](http://msdn.microsoft.com/en-us/library/system.data.datarow.table.aspx)

```
foreach (DataColumn c in dr.Table.Columns)  //loop through the columns. 
{
    MessageBox.Show(c.ColumnName);
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-10T16:10:10.487

您可以通过在 DataRow 对象上使用扩展来简化代码（如果您经常这样做），例如：

```
static class Extensions
{
    public static string GetColumn(this DataRow Row, int Ordinal)
    {
        return Row.Table.Columns[Ordinal].ColumnName;
    }
} 
```

然后使用以下命令调用它：

```
string MyColumnName = MyRow.GetColumn(5); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-10T15:51:22.700

你需要这样的东西：

```
foreach(DataColumn c in dr.Table.Columns)
{
  MessageBox.Show(c.ColumnName);
} 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-10-10T15:50:00.740

改用 DataTable 对象：

```
 private void doMore(DataTable dt)
    {
    foreach(DataColumn dc in dt.Columns)
    {
    MessageBox.Show(dc.ColumnName);
    }
    } 
```

# wpf - 从辅助窗口绑定文本框不会更新属性

> ID：12823373
> 
> 赞同：0
> 
> 时间：2012-10-10T15:47:11.103
> 
> 标签：wpf, binding, window

我需要将位于辅助窗口中的文本框的文本属性绑定到在该辅助窗口的相应视图模型中定义的属性

XAML 代码：

```
<Window x:Class="RG.IOManager.Views.PreferencesDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:genericClasses="clr-namespace:RG.IOManager.GenericClasses"
    xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
    Title="Setup" Height="131" Width="332"
    WindowStartupLocation="CenterOwner" 
    ShowInTaskbar="False"
    WindowStyle="ToolWindow"
    >

<Window.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="../ResourceDictionary.xaml" />
            <ResourceDictionary Source="../ScrollBarTemplate.xaml" />
            <ResourceDictionary Source="../Styles.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Window.Resources>

<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="10*" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <Label Content="Cycle Time"  Grid.Row="0" Grid.Column="0" Height="28" HorizontalAlignment="Left" Margin="10,10,0,20" Name="label1" VerticalAlignment="Top" />
    <StackPanel Grid.Row="0" Grid.Column="1" Width="190" Orientation="Horizontal">
        <!--
        <xctk:IntegerUpDown  Name="TbMainCycleTime" Margin="10,10,0,20" Width="50" Height="25" HorizontalContentAlignment="Right" 
                             Increment="1" Maximum="5000" Minimum="0" ShowButtonSpinner="False"/>
        -->

        <TextBox Name="TbMainCycleTime" Margin="10,10,0,20" Width="50" Height="25" HorizontalContentAlignment="Right" Validation.ErrorTemplate="{StaticResource ErrorTemplate}" Style="{StaticResource textBoxErrorTooltip}" >
            <TextBox.Text>
                <Binding Source="PreferencesDialog" Path="CycleTime" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged" >
                    <Binding.ValidationRules>
                        <genericClasses:IntegersValidation Min="0" Max="1000" />
                    </Binding.ValidationRules>
                </Binding>
            </TextBox.Text>
        </TextBox>

        <!--<TextBox Name="TbMainCycleTime" Margin="10,10,0,20" Width="50" Height="25" HorizontalContentAlignment="Right"  />-->
        <Label Content="ms" Margin="1,10,10,20"/>
    </StackPanel>
    <StackPanel Grid.Row="1" Grid.Column="1" Width="190" Orientation="Horizontal">
        <Button Content="Update" Height="23" HorizontalAlignment="Left" Margin="5,0,10,0" Name="btUpdate" VerticalAlignment="Top" Width="75" Click="btUpdate_Click" />
        <Button Content="Cancel" Height="23" HorizontalAlignment="Left" Margin="5,0,10,0" Name="btCancel" VerticalAlignment="Top" Width="75" Click="btCancel_Click" />
    </StackPanel>
</Grid> 
```

CS代码：

```
/// <summary>
/// Interaction logic for PreferencesDialogue.xaml
/// </summary>
public partial class PreferencesDialog : Window, INotifyPropertyChanged
{
    #region Binding Properties

    public event PropertyChangedEventHandler PropertyChanged;

    /// <summary>
    /// Main cycle time
    /// </summary>
    public int CycleTime
    {
        get { return _CycleTime; }
        set
        {
            _CycleTime = value;
            var handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs("CycleTime"));
            }
        }
    }
    private int _CycleTime;

    #endregion

    private IOManager _receiver;

    public PreferencesDialog(IOManager receiver)
    {
        this._receiver = receiver;
        InitializeComponent();

        //this.TbMainCycleTime.Text = _receiver.globalBindingProperties.MainCycleTime.ToString();
        this.CycleTime = _receiver.globalBindingProperties.MainCycleTime;
    }

    private void btUpdate_Click(object sender, RoutedEventArgs e)
    {
        _receiver.globalBindingProperties.MainCycleTime = Convert.ToInt32(this.TbMainCycleTime.Text);
        this.Close();
    }

    private void btCancel_Click(object sender, RoutedEventArgs e)
    {
        this.Close();
    }
} 
```

有人可以帮我找出我做错了什么吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:29:36.257

您是否已将视图模型作为数据上下文分配给窗口？（您在其中定义了 CycleTime 的类）

其次，您是否要更改 UI 的周期时间。您在 TextBox 和 CycleTime 属性之间使用两种方式绑定。

检查此[链接](http://www.codeproject.com/Articles/296256/Type-safe-textbox-in-Silverlight)是否在我创建了类型安全文本框扩展的地方。虽然，文章是关于 silverlight，但您可以轻松地在 WPF 中使用。

将您的 xaml 更改为

```
<Window x:Class="RG.IOManager.Views.PreferencesDialog" x:Name="PreferencesDialog"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:53:00.580

你的方法是错误的。但是，如果您更改这两件事，您的问题将得到解决：

首先设置Window的DataContext：

```
 public PreferencesDialog(IOManager receiver)
{
    this.DataContext = this;

    this._receiver = receiver;
    InitializeComponent();

    //this.TbMainCycleTime.Text = _receiver.globalBindingProperties.MainCycleTime.ToString();
    this.CycleTime = _receiver.globalBindingProperties.MainCycleTime;
} 
```

第二次从 TextBox.Text.Binding 中删除“源”，因为源是 dataContext。

```
 <TextBox Name="TbMainCycleTime" Margin="10,10,0,20" Width="50" Height="25" HorizontalContentAlignment="Right" Validation.ErrorTemplate="{StaticResource ErrorTemplate}" Style="{StaticResource textBoxErrorTooltip}" >
        <TextBox.Text>
            <Binding Path="CycleTime" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged" >
                <Binding.ValidationRules>
                    <genericClasses:IntegersValidation Min="0" Max="1000" />
                </Binding.ValidationRules>
            </Binding>
        </TextBox.Text>
    </TextBox> 
```

# facebook - 如何通过 Facebook 应用更新用户活动

> ID：12823375
> 
> 赞同：-1
> 
> 时间：2012-10-10T15:47:16.407
> 
> 标签：facebook, facebook-canvas

当我开始在 Facebook 上使用某个应用程序时，该应用程序显示“10K 人使用此应用程序”，但在此之前我需要“订阅”该应用程序（单击一个按钮，告诉我我将使用该应用程序) 我如何使用自己的应用程序做到这一点，以便跟踪使用它的用户数量？

此外，当有人开始使用我的应用程序（在线杂志）时，我想用“John Doe 正在阅读<应用程序名称>”之类的内容更新他们的活动

我需要 Facebook API 的哪些元素来实现这些行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:17:17.423

Facebook 会自动将“使用此应用的人数”统计数据添加到应用身份验证对话框中。如果您想在您的应用程序中（手动）显示它，您可以调用`/{your_app_id}`并使用`weekly_active_users`或`monthly_active_users`计数。

至于活动，Facebook 会自动发布“用户正在使用应用程序”。您将无法执行“用户正在阅读应用程序”，因为页面需要是接受“阅读”的对象类型。“阅读”仅在您阅读博客、文章等时才有效。

如果您仍然有兴趣追求它，您需要获得`publish_actions`许可并且您需要`read`在应用程序设置中注册该操作。facebook 文档包含您入门所需的一切。

# android - 长按home键方法

> ID：12823383
> 
> 赞同：0
> 
> 时间：2012-10-10T15:47:55.840
> 
> 标签：android

> **可能重复：**
> [在 category.HOME 活动中覆盖 Home 键长按](https://stackoverflow.com/questions/2934355/overriding-the-home-key-long-press-in-a-category-home-activity)

有谁知道2.3.3 android源码中长按home键触发的方法名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:10:22.973

主页按钮由 Android 操作系统保留。仅在 Android UI 组件上触发的事件。您无法在主页按钮上触发长按事件。如果要触发 Home 按钮的事件，则应使用 key Events 方法进行处理。

例子 ：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if(keyCode == KeyEvent.KEYCODE_BACK)
    {
        Log.d("Test", "Back button pressed!");
    }
    else if(keyCode == KeyEvent.KEYCODE_HOME)
    {
        Log.d("Test", "Home button pressed!");
    }
    return super.onKeyDown(keyCode, event); 
```

}

# security - 是什么阻止了某人使用 JS 在表单输入中读取 CSRF 令牌

> ID：12823390
> 
> 赞同：4
> 
> 时间：2012-10-10T15:48:30.257
> 
> 标签：security, frameworks, csrf

我看过的大多数框架都会在表单中插入一个隐藏的输入元素，其值为 CSRF 令牌。这是为了防止用户 Bob 登录我的网站，然后访问[http://badsite.com](http://badsite.com)，该网站嵌入了 img 标签或 JS，告诉我的网站使用 Bob 仍然登录的会话执行请求。

我没有得到的是阻止 badsite.com 上的 JS 从 AJAX 请求带有我网站上的表单的 URL，从隐藏的输入元素对 CSRF 令牌进行正则表达式，然后使用该有效的 CSRF 令牌发布到我的网站的 AJAX ?

在我看来，您可能想在运行时使用 JS 将 CSRF 令牌插入表单，从 cookie 中提取值（badsite.com 无法访问）。但是，我没有听说过这种方法，而且很多框架都使用 CSRF 令牌进行简单的隐藏输入，我想知道我的解决方案是否过度设计，并且我错过了使隐藏输入法安全的某些部分.

任何人都可以提供一些清晰度吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T15:50:02.380

> 是什么阻止了 badsite.com 上的 JS 从 AJAX 请求带有我网站上的表单的 URL

同源[策略（除非您使用过于宽松的](http://en.wikipedia.org/wiki/Same_origin_policy)[CORS](https://developer.mozilla.org/en-US/docs/HTTP_access_control)标头来颠覆它）。未经该主机许可，在站点上运行的 JavaScript 无法从托管在其他主机上的站点读取数据。

SOP 有一些变通方法，但它们都需要正在从中读取数据的主机的合作（JSON-P，CORS），或者不传递任何识别特定用户的数据（所以不能访问任何需要授权的东西）。

# jquery - jQuery html() ... 样式未从 css 文件中读取

> ID：12823393
> 
> 赞同：-1
> 
> 时间：2012-10-10T15:48:37.860
> 
> 标签：jquery, css, ajax

我有一个 DIV，它是通过 jQuery 对 perl 脚本的 ajax 调用编写的 - 然后在成功时使用 .html() 编写

编写的 html 包含多个 DIV ...每个 DIV 都有一个 ID 和一个用于样式的 css 文件中的条目。

我遇到的问题是在编写文本时会忽略样式。

例子：

HTML：

```
<link rel="stylesheet" type="text/css" href="layout.css" />
...
<div id="CONTAINER"></div> 
```

javascript:

```
$.ajax({
  url: './GetInfo.pl',
  success: function(data) {
  alert(data);             // to check the right html is returned - and it is!
    $('#CONTAINER').html(data);
  } 
}); 
```

CSS：

```
body { color: black; font-size: 10pt; }

#childDiv1 { color: #ffffff; font-size: 12pt; }
#childDiv2 { color: #ffff00; font-size: 14pt; }
#childDiv3 { color: #ff00ff; font-size: 16pt; } 
```

珀尔：

```
print <<HTML;
Content-type: text/html

  <div id="childDiv1">Info 1</div>
  <div id="childDiv2">Info 2</div>
  <div id="childDiv3">Info 3</div>
HTML 
```

....所有 DIV 都有正确的文本，但样式取自 CSS 文件中的 BODY 条目，而不是新的 DIV 条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:51:25.737

尝试将 ajaxRequest 中的 dataType 属性设置为 html。

```
dataType : 'html' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:50:31.187

哦，天哪.. 这是 CSS 文件中的错误... 与我遇到问题的行相去甚远 - 这就是我错过它的原因.. 并且没有任何影响应用程序的任何其他部分。

我很抱歉浪费了人们的时间。

# wpf - Devexpress：非静态字段需要对象引用

> ID：12823397
> 
> 赞同：0
> 
> 时间：2012-10-10T15:48:51.037
> 
> 标签：wpf, devexpress, xtrareport

我的 devexpress 代码中不断出现此错误。这是我输入的代码：

```
using System;
using System.Data;
using System.Drawing;
using System.Windows.Forms;
using System.Collections;
using System.ComponentModel;
using DevExpress.XtraReports.UI;
using System.Drawing.Printing;

namespace DD
{
    public partial class MasterReport : DevExpress.XtraReports.UI.XtraReport
    {
        //detailReport.catName.Value = ((DataRowView)e.Brick.Value).Row["EcoYear"].ToString();
        public MasterReport()
        {
            InitializeComponent();

        }

        private void xrLabel1_BeforePrint(object sender, PrintEventArgs e)
        {
         //   XRLabel l = sender as XRLabel;
         //   l.Tag = GetCurrentRow();

           ((XRLabel)sender).Tag = GetCurrentRow();
        }

        private void xrLabel1_PreviewClick(object sender, PreviewMouseEventArgs e)
        {
            DetailReport detailReport = new DetailReport();
            detailReport.CaID.Value = (int)((DataRowView)e.Brick.Value).Row["CaseID"];
            detailReport.EYear.Value = (int)((DataRowView)e.Brick.Value).Row["EcoYear"];
            detailReport.ShowPreviewDialog();
        }

        private void xrLabel1_PreviewMouseMove(object sender, PreviewMouseEventArgs e)
        {
            Cursor.Current = Cursors.Hand;
        }

        private void xrPictureBox1_BeforePrint(object sender, PrintEventArgs e)
        {
            ((XRLabel)sender).Tag = GetCurrentRow();
        }

        private void xrPictureBox1_PreviewClick(object sender, PreviewMouseEventArgs e)
        {
            PW pw = new PW();
            PW.CaID.Value = (int)((DataRowView)e.Brick.Value).Row["CaseCaseID"];
            PW.ShowPreviewDialog();
        }

        private void xrPictureBox1_PreviewMouseMove(object sender, PreviewMouseEventArgs e)
        {
            Cursor.Current = Cursors.Hand;
        }

    }
} 
```

PW.CaID.Value 和 PW.ShowPreviewDialog()；是给我这个错误的行。也许我这样做是错误的。我想要做的是单击主报告上的图标（xrPictureBox1）并让它显示子报告（PW）。我在上面的代码中为另一个子报表（detailreport）做了这个。预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:11:57.530

您的代码应为：

```
PW pw = new PW();
pw.CaID.Value = (int)((DataRowView)e.Brick.Value).Row["CaseCaseID"];
pw.ShowPreviewDialog(); 
```

请注意 PW/pw 上的情况。

# c# - 托管 UserControl 的 StatusStrip 无法调用 UserControls OnPaint 事件

> ID：12823400
> 
> 赞同：1
> 
> 时间：2012-10-10T15:48:59.463
> 
> 标签：c#, winforms, user-controls, onpaint, statusstrip

我们有一个简单的用户控件，当我们在表单中使用它时可以正常工作，但是当我们尝试通过此方法将它托管到我们的 StatusStrip 中时，永远不会调用 OnPaint 事件。MSDN 文档声明这“应该”工作，但我们什么也没看到，并确认 OnPaint 事件永远不会被调用。：

```
public partial class SimpleUserControl : UserControl
{
    public SimpleUserControl( )
    {
        InitializeComponent( );

        // Set the styles for drawing
        SetStyle(ControlStyles.AllPaintingInWmPaint |
            ControlStyles.ResizeRedraw |
            ControlStyles.DoubleBuffer |
            ControlStyles.SupportsTransparentBackColor,
            true);
    }

    [System.ComponentModel.EditorBrowsableAttribute( )]
    protected override void OnPaint( PaintEventArgs e )
    {
        Rectangle _rc = new Rectangle( 0, 0, this.Width, this.Height );
        e.Graphics.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;
        e.Graphics.DrawArc( new Pen( Color.Red ), _rc, 180, 180 );
    }

}

public Form1( )
{
    InitializeComponent( );

    SimpleUserControl suc = new SimpleUserControl( );
    suc.Size = new Size( 30, 20 );
    ToolStripControlHost tsch = new ToolStripControlHost( suc );
    statusStrip1.Items.Add(tsch);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:54:25.567

ToolStripControlHost 有一个奇怪的问题，它需要为其托管的控件设置 MinimumSize：

尝试添加这个：

```
suc.Size = new Size(30, 20);
suc.MinimumSize = suc.Size; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:44:58.293

我有他同样的问题。我的解决方案是创建一个继承自 ToolStripControlHost 的新类并覆盖 ToolStripItem.OnPaint 方法，如下所示：

```
[System.ComponentModel.DesignerCategory("code")]
[ToolStripItemDesignerAvailability(ToolStripItemDesignerAvailability.All]
public class ToolStripSimpleUserControl : ToolStripControlHost
{
    public ToolStripSimpleUserControl ()
        : base(new SimpleUserControl())
    {
    }

    public SimpleUserControl StripSimpleUserControl
    {
        get { return Control as SimpleUserControl; }
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);
        // not thread safe!
        if (e != null)
        {
            this.StripSimpleUserControl.Invalidate();
        }
    }
} 
```

公开形式1()

```
public Form1( )
{
     InitializeComponent( );

     ToolStripSimpleUserControl suc = new ToolStripSimpleUserControl( );
     suc.StripSimpleUserControl.Size = new Size( 30, 20 );

     statusStrip1.Items.Add(suc);
} 
```

有关更多规则，请访问[http://msdn.microsoft.com/en-us/library/9k5etstz.aspx](http://msdn.microsoft.com/en-us/library/9k5etstz.aspx)

并访问[http://tonyfear.netau.net/index.php?option=com_content&view=category&layout=blog&id=3&limitstart=5](http://tonyfear.netau.net/index.php?option=com_content&view=category&layout=blog&id=3&limitstart=5)

# css - 在 Bootstrap btn 中总是覆盖 btn-*

> ID：12823406
> 
> 赞同：0
> 
> 时间：2012-10-10T15:49:27.390
> 
> 标签：css, twitter-bootstrap

我有一些 Twitter Bootstrap 按钮`class="btn btn-small btn-success"`

按钮应该是绿色的，而是蓝色的。在 Chrome Web Inspector 中，绿色背景属性被划掉了，因为`btn-success`似乎被默认覆盖了`btn`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:52:36.490

这意味着蓝色优先，这可能是两个原因之一。蓝色的选择器更强（`#header #nav #item`比单独的#item“更强”）或者蓝色是稍后在样式表中完成的。

尝试将 !important 添加到最后，例如`.class { color: green !important; }`覆盖它

# vb.net - 在一个文件夹中发送多个附件，而不仅仅是一个特定的文件名......通过电子邮件

> ID：12823413
> 
> 赞同：2
> 
> 时间：2012-10-10T15:49:44.513
> 
> 标签：vb.net, email-attachments

我设法发送了一封电子邮件，其附件位于特定位置并专门命名（“C:\New\Log.txt”）

但是，我希望能够发送一封电子邮件，其中包含给定文件夹中的所有附件，无论它们叫​​什么。所有变量设置都使用 my.settings 在项目的其他位置进行配置，我希望文件夹目标也类似，即 my.settings.fileloc1 用于文件的位置

以下是我当前的代码。我很确定它会涉及getfiles，但我正在空运行....请帮助！

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Try
        Dim SmtpServer As New SmtpClient()
        Dim mail As New MailMessage()
        SmtpServer.Credentials = New  _
        Net.NetworkCredential(My.Settings.SMTPuser, My.Settings.SMTPuser)
        SmtpServer.Port = My.Settings.SMTPPort
        SmtpServer.Host = My.Settings.SMTPHost
        mail = New MailMessage()
        mail.From = New MailAddress(My.Settings.from)
        mail.To.Add(My.Settings.recipient)
        mail.Subject = My.Settings.subject
        mail.Body = My.Settings.body
        Dim Attach As Net.Mail.Attachment = New Net.Mail.Attachment("C:\New\Log.txt")
        '^^The above needs to be an actual file
        '^^I want it to select all files in a given folder and attach them!
        mail.Attachments.Add(Attach)
        SmtpServer.Send(mail)
        MsgBox("Mail Sent")
    Catch ex As Exception
        MsgBox("Email Settings are either incomplete or incorrect" & vbNewLine & "Please see below details:" & vbNewLine & vbNewLine & ex.ToString)
    End Try

End Sub 
```

感谢您提出的任何建议：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:53:43.817

尝试使用[For Each](http://www.dotnetperls.com/for-each-vbnet)循环查找[system.IO.Directory.GetFiles()中的所有文件](http://msdn.microsoft.com/en-us/library/system.io.directory.getfiles.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:43:56.200

```
' ...
For Each filePath As String In Directory.GetFiles(My.Settings.FileLoc1)
    Dim Attach As New Net.Mail.Attachment(filePath)
    mail.Attachments.Add(Attach)
Next
SmtpServer.Send(mail)
' ... 
```

# html - 具有自动大小的绝对定位元素内的 IE7 浮动块

> ID：12823419
> 
> 赞同：0
> 
> 时间：2012-10-10T15:49:58.697
> 
> 标签：html, css, internet-explorer-7

此[示例](http://jsfiddle.net/zhG9x/2/)在 Opera、Chrome、Firefox 和 IE > 7 中看起来相同。在 IE7 中，蓝色块粘在右侧。知道如何在不指定弹出宽度的情况下修复 IE7 中的布局吗？

HTML：

```
<div id="popup">
    <div class="content">content content content</div>
    <div class="buttons-container">
        <div class="buton"></div>
    </div>
</div>​ 
```

CSS：

```
#popup {
    position: absolute;
    left: 20%;
    top: 10px;
    background: green;
}

.buttons-container {
    line-height: 32px;
    float: right;
    margin-top: 12px;
}

.buton {
    display: block;
    min-width: 60px;
    height: 24px;
    background: blue;
}​ 
```

# c# - C# 中的 GridView 超链接字段

> ID：12823422
> 
> 赞同：13
> 
> 时间：2012-10-10T15:50:02.633
> 
> 标签：c#, gridview, hyperlink

看看下面的代码：

```
<asp:HyperLinkField 
    DataNavigateUrlFields="NameID" 
    DataNavigateUrlFormatString="names.aspx?nameid={0}"
    DataTextField="name" 
    HeaderText="Name" 
    ItemStyle-Width="100px"
    ItemStyle-Wrap="true" /> 
```

只需要名称 id 即可导航到下一页。我将如何包含不在 gridview 中的其他两个参数。我正在使用的导航 URL 必须采用网格视图中已经存在的关键字和数据库表中的其他两个参数。我尝试使用所有这些代码。没有什么对我有用。

```
<asp:HyperLinkField DataTextField="Keyword" DataNavigateUrlFields="Keyword"
    DataNavigateUrlFormatString="KeywordSrchSumDtl.aspx?Keyword={0}&State={1}&City={2}"
    HeaderStyle-VerticalAlign="Bottom" ItemStyle-HorizontalAlign="center" /> 
```

我不能使用上面的代码，因为州和城市不在 GridView 中，但在我的数据表中可用。

我也尝试使用以下代码，但它不起作用：

```
 <asp:TemplateField HeaderText="Keyword"  ItemStyle-HorizontalAlign="Center" FooterStyle-HorizontalAlign="Center">
    <ItemTemplate>
        <asp:HyperLink ID="link" runat="server" NavigateUrl='<% # "KeywordSrchSumDtl.aspx?Keyword="Eval("Keyword")+"&State="+Request.QueryString["State"]%>' Text='<%# Eval("Keyword") %>'>
        </asp:HyperLink>
    </ItemTemplate>
</asp:TemplateField> 
```

我也试过这个：

```
 <asp:HyperLink ID="Link1" runat="Server" NavigateUrl='<%#redirectURL()+Server.UrlEncode((Eval("Keyword")).ToString())%>' Text='<%# DataBinder.Eval(Container.DataItem,"Keyword") %>'>
        </asp:HyperLink>
    </ItemTemplate>
</asp:TemplateField> 
```

.aspx.cs

```
return "KeywordSrchSumDtl.aspx?Keyword=" + 
    //I DONNO HOW TO CALL THE KEYWORD HERE//
    + "&State=" + System.Web.HttpContext.Current.Request.QueryString["State"]
    + "&City=" + System.Web.HttpContext.Current.Request.QueryString["City"]; 
```

我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-10T16:55:50.427

将`DataNavigateUrlFields`属性、逗号分隔的值与参数字段一起使用`"KeywordSrchSumDtl.aspx?Keyword={0}&State={1}&City={2}"`

```
<asp:HyperLinkField DataNavigateUrlFields="Keyword,State,City"
                    DataNavigateUrlFormatString="KeywordSrchSumDtl.aspx?Keyword={0}&State={1}&City={2}" 
                    Text="View Details" /> 
```

几个例子：

[在 .NET 2.0 Grid-View 的超链接字段中的 DataNavigateUrlFormatString 中传递两个参数](http://techturf.wordpress.com/2007/10/15/passing-two-arguments-in-datanavigateurlformatstring-in-hyperlink-field-of-net-20-grid-view/)

[使用 ASP.NET 将多个值从 GridView 传递到另一个页面](http://www.dotnetcurry.com/ShowArticle.aspx?ID=147)

**编辑：**

事件中的一组`NavigateUrl`超链接`RowDataBound``GridView`

```
<asp:GridView ID="GridView1" runat="server" 
              AutoGenerateColumns="False" 
              DataKeyNames="Keyword"
              DataSourceID="SqlDataSource1" 
              onrowdatabound="GridView1_RowDataBound">
   <asp:TemplateField HeaderText="Keyword"  ItemStyle-HorizontalAlign="Center"          FooterStyle-HorizontalAlign="Center">
      <ItemTemplate>
          <asp:HyperLink ID="link" runat="server" Text='<%# Eval("Keyword") %>' />
      </ItemTemplate>
    </asp:TemplateField>
    .......
</asp:GridView> 
```

后面的代码：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e) 
{ 
 if (e.Row.RowType == DataControlRowType.DataRow) 
 { 
    HyperLink hl = (HyperLink)e.Row.FindControl("link"); 
    if (hl != null) 
    { 
        DataRowView drv = (DataRowView)e.Row.DataItem; 
        string keyword = drv["Keyword"].ToString(); 
        string state = Request.QueryString["State"]; 
        string city = Request.QueryString["City"]; 
        hl.NavigateUrl = "~/KeywordSrchSumDtl.aspx?Keyword=" + keyword + "&State=" + Server.UrlEncode(state) + "&City=" + Server.UrlEncode(city); 
    } 
 } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:59:29.257

您可以尝试使用`string.Format`方法

```
NavigateUrl='<%# String.Format("KeywordSrchSumDtl.aspx?Keyword={0}&State={1}&City={2}", DataBinder.Eval(Container.DataItem, "Keyword"), Request.QueryString["State"], Request.QueryString["City"]) %>' 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-12T16:52:01.800

最后它通过以下代码导航，

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e) 
{ 
 if (e.Row.RowType == DataControlRowType.DataRow) 
 { 
      HyperLink hl = (HyperLink)e.Row.FindControl("Link");
      if (hl != null)
      {
           DataRowView drv = (DataRowView)e.Row.DataItem;
           string keyword = drv["Keyword"].ToString().Trim();
           string state = strState.ToString().Trim();
           string city = strCity.ToString().Trim();                 
           hl.NavigateUrl = "KeywordSrchSumDtl.aspx?Keyword=" + keyword + "&Geo=" + geo                             + "&Site=" + site;
       }
       }
      } 
```

谢谢你们的帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-07T19:15:16.237

```
Some time we need to pass multiple parameters with hyperlink in Gridview, datagrid or any data list control then we can use following code:-</br> 

**CODE:-** 
<asp:GridView ID="gvFin" runat="server" CellPadding="1" AutoGenerateColumns="false"> 

<Columns>
     <asp:TemplateField ItemStyle-Width="4%" HeaderStyle-Width="4%" SortExpression="CDL"
    HeaderText="CDL#" HeaderStyle-Font-Bold="true">
                                                <ItemTemplate>
   <asp:HyperLink ID="lnk1" runat="server" 
   Text='<%# DataBinder.Eval(Container.DataItem,"TestValue") %>'
   NavigateUrl='<%# "javascript:ShowACP(\"" + DataBinder.Eval(Container.DataItem, "ID")     + "\",\"" + DataBinder.Eval(Container.DataItem,"ACCOUNTPLAN") + "\");" %>'                                                  ForeColor="Blue" /  </ItemTemplate>
 </asp:TemplateField>

**JavaScript Function**

function ShowACP(id, acplabel) 
{            if (acplabel == "No")
{
                window.location = "#";
            }
            else</br> 
                window.location = "Default.aspx?gid=" + id;
        } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-10T16:01:02.820

您可以使用 string[] 从 Code Behind 初始化 DataNavigateUrlFields：

```
yourHyperLinkField.DataNavigateUrlFields = new string[] { "Keyword", "State", "City" }; 
```

# windows-phone-7 - WP7 - 地图 - 在运行时编辑图钉模板的属性

> ID：12823423
> 
> 赞同：2
> 
> 时间：2012-10-10T15:50:05.563
> 
> 标签：windows-phone-7, datatemplate, bing-maps, silverlight-toolkit, pushpin

我正在开发我们的 WP7 应用程序的映射功能。目前图钉显示为圆形图形。

我正在尝试创建功能，以允许用户通过滑动条来更改图钉圆圈的大小。这个想法是用户可以在两种尺寸之间的任意位置更改图钉的尺寸。

因此，我不想在 XAML 中创建 2 或 3 个预定义的图钉模板，而只是在它们之间进行交换 - 我希望能够实时修改模板的属性（特别是椭圆的高度和宽度）当用户滑动一个栏，或按住页面，或其他任何东西时。

然而，我一直在努力做到这一点。

是否可以编辑现有模板的属性？我已经研究过实时创建模板，但这似乎也不是解决方案。

根据客户的不同，页面上显示的图钉数量可能会有很大差异。此外，我们的客户是户外类型，许多人都在为较小的图标而苦恼，而其他人则不然。因此我对这个功能的渴望。

请在下面找到 XAML，我只是希望在运行时更改椭圆的大小。提前感谢您的帮助。

```
 <ControlTemplate x:Key="PushpinControlTemplate1" TargetType="my:Pushpin">
        <Grid x:Name="ContentGrid" Width="50" Height="50" >
            <StackPanel Orientation="Vertical" >
                <Grid MinHeight="31" MinWidth="29" Margin="0">
                    <Ellipse Fill="#FFFF7F00"
                   Margin="1"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   Width="50"
                   Height="50"
                   Stroke="White"
                   StrokeThickness="3"/>
                    <ContentPresenter HorizontalAlignment="Center"
                                       Content="{TemplateBinding Content}"
                                       ContentTemplate="{TemplateBinding ContentTemplate}"
                                       Margin="4"/>
                </Grid>
            </StackPanel>
        </Grid>
    </ControlTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:27:29.747

将 Height 属性绑定到 ViewModel 的属性。

```
 <Ellipse 
           Width="50"
           Height="{Binding ItemHeight}"/> 
```

并在用户滑动栏时更改属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T06:40:13.393

```
private DataTemplate CreateDataTemplate()
{
    string xaml =
        @"<DataTemplate
        xmlns=""http://schemas.microsoft.com/winfx/2006/xaml/presentation""
        xmlns:x=""http://schemas.microsoft.com/winfx/2006/xaml"">
        <Grid>
            <Rectangle Fill=""LightGreen"" Height=""50"" Width=""250"" />
            <TextBlock Text='{Binding}' FontSize='40' />
            </Grid>       
        </DataTemplate>";
    DataTemplate dt = (DataTemplate)XamlReader.Load(xaml);
    return dt;
} 
```

你可以参考上面的代码...

[点击](http://windowsphonegeek.com/tips/wp7-dynamically-generating-datatemplate-in-code)

..................................................... …………………………………………………………………………

绑定你的财产

# asp.net - Page_PreInit 和事件

> ID：12823424
> 
> 赞同：2
> 
> 时间：2012-10-10T15:50:06.780
> 
> 标签：asp.net, .net, master-pages, page-lifecycle

我有一个问题...如果我的页面上有一个 asp:Button，并且我希望该按钮在单击时切换母版页，那是不可能的，对吧？

不可能，因为切换母版页需要在 Page_PreInit 中发生......但是按钮单击事件直到Page_PreInit 中的代码执行**后**才会发生。

因此，如果我在 Page_PreInit 块中有这个：

```
If buttonWasPressed Then
      Me.MasterPageFile = "newMaster.master"
end If 
```

它*永远不会*被执行。

那么如何通过单击按钮来更改母版页文件呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:00:51.953

在点击事件中：

```
Session("Master") = "newMaster.master"
Server.Transfer(Request.Url) 
```

在 Page_PreInit 中：

```
Me.MasterPageFile = Session("Master") 
```

# objective-c - 浏览文本字段

> ID：12823425
> 
> 赞同：0
> 
> 时间：2012-10-10T15:50:11.197
> 
> 标签：objective-c, ios, cocoa-touch

我正在尝试使用我在此处找到的 @Peylow 代码[How to navigate through textfields (Next / Done Buttons)](https://stackoverflow.com/questions/1347779/how-to-navigate-through-textfields-next-done-buttons)但是当我按下键盘**返回**按钮时没有任何反应。我的标签没问题。

标题：

```
- (BOOL)textFieldShouldReturn:(UITextField*)textField; 
```

执行：

```
- (BOOL)textFieldShouldReturn:(UITextField*)textField {
    NSInteger nextTag = textField.tag + 1;
    UIResponder* nextResponder = [textField.superview viewWithTag:nextTag];

    if (nextResponder) {
        [nextResponder becomeFirstResponder];
    } else {
        [textField resignFirstResponder];
    }
    return NO;
} 
```

我错过了什么？我的键盘没有下一步完成，只有返回。请记住，我对 iOS 很陌生。

编辑：

我尝试通过向其添加断点来调试代码并且代码没有被触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:58:28.880

我不喜欢包含标签的解决方案。相反，我会将所有输入文件按所需顺序放入一个数组中，并`-textFieldShouldReturn:`使用给定的文本字段从数组中获取它的索引。然后我会在那个索引处得到对象。

```
- (BOOL)textFieldShouldReturn:(UITextField*)textField {
    NSUInteger nextIndex = [arrayWithResponders indexOfObject:textField]+1 % [arrayWithResponders count];
    UIResponder* nextResponder = [arrayWithTextFields objectAtIndex: nextIndex];

    if (nextResponder) {
        [nextResponder becomeFirstResponder];
    } else {
        [textField resignFirstResponder];
    }
    return NO;
} 
```

* * *

You just added, that the breakpoints aren't triggered, so most likely you didn't set up the delegate.

# javascript - 火狐Nodejs Websocket

> ID：12823426
> 
> 赞同：0
> 
> 时间：2012-10-10T15:50:15.410
> 
> 标签：javascript, html, node.js, websocket, chat

我正在使用 Aurora 17、Chrome 22 和 Firefox 16，并且正在尝试创建一个简单的聊天应用程序。我正在使用节点 0.8.9。

Firefox 收到无法连接的错误消息

```
 Firefox can't establish a connection to the server at ws://localhost/. 
```

我也用端口试过了，它有同样的信息

```
Firefox can't establish a connection to the server at ws://localhost:4444/. 
```

这是我的代码：

服务器代码：

```
var http = require('http');
var net = require('net');

function onRequest(req, res) {
   // Does enough to render a page and javascript
}
http.createServer(onRequest).listen(4444);

var socket = new net.Socket();
socket.connect(4444, "localhost", function(){
    console.log("Socket Connected");
});

socket.on("message", function(message){
    console.log(message);
}); 
```

客户代码：

```
var WebSocket = window.WebSocket || window.MozWebSocket;

var connection = new WebSocket('ws://localhost:4444');

connection.onopen = function() {
    // Never runs
    alert("This never runs :(")
}

connection.onerror = function(error) {
    // Always runs here
    console.log(error)
} 
```

我从服务器上的日志语句中得到一个输出，即 Socket 已连接，但 Firefox 无法连接到该套接字。

在 Chrome 上，没有错误，但永远不会触发“onopen”。使用 connection.send("a message") 不会向服务器发送任何内容并返回 false。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:39:05.437

您正在服务器代码中创建一个普通的 TCP 客户端套接字并将其连接到您的 HTTP 服务器。这与创建浏览器可以连接的 WebSocket 服务器完全不同。使用为此目的设计的库（socket.io 非常常用，因为当浏览器不支持 WebSockets 时，它可以回退到备用传输）。

# java - 存储不同的对象

> ID：12823434
> 
> 赞同：0
> 
> 时间：2012-10-10T15:50:43.423
> 
> 标签：java

我想创建不同的类，它们应该都存储在一个 ArrayList 中。如果我使用：

```
interface ProgramInterface { 
   void someMethods();
}

public abstract class CustomProgram implements ProgramInterface { 
   // stuff
} 
```

然后我可以让我自己的课像

```
class P_randomBars extends CustomProgram { 
```

我喜欢这一点的是，来自接口的方法显示在 javadoc 中，而来自 CustomProgram 的方法显示在同一页面（CustomProgram）中。

但是我不能将它们存储在一个数组中（或者我必须将它们存储为我不想要的对象）。

另一种方法是：

```
public interface CustomProgram {
   void someMethods();
}

public abstract class ProgramBase {
  // stuff
} 
```

然后我创建一个类，如：

```
class P_randomBars extends ProgramBase implements CustomProgram{ 
```

我喜欢的是我可以将我制作的类存储在 ArrayList 中。喜欢： `ArrayList<CustomProgram> programs = new ArrayList<CustomProgram>();`

但是在javadoc中，抽象类和接口没有连接，这使得用户不清楚他必须扩展然后实现。

有解决方案吗？

# ios - 如果添加标签，presentModalViewController 无法显示

> ID：12823438
> 
> 赞同：2
> 
> 时间：2012-10-10T15:51:00.487
> 
> 标签：ios, presentmodalviewcontroller, lldb

我正在尝试将 Modal ViewController 添加到现有应用程序。要初始化并打开它，我使用以下代码

```
AddedViewController *addedOne = [[AddedViewController alloc] init];
[self.parent presentModalViewController:addedOne animated:YES]; 
```

如果带有 View 的 AdditionalViewController.xib 当然是空的，它会很好地打开，

但

如果 AdditionalViewController.xib 不为空（即），即使我在其中仅添加带有静态文本的 UILabel，这也会在加载时引发 SIGTRAP 信号（日志中的（lldb））。

我该如何处理才能拥有完全可操作的 ViewController（带有标签、按钮、文本字段等。正确打开？

========

UPD。问题很容易解决，请参阅下面的答案。=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:56:37.120

假设您试图在当前视图中呈现它，您不应该使用`self.parent`而只使用`self`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T20:02:49.350

答案是ViewController 设置的**Use Autolayout复选框，现在 TWIMC 一切正常。**=))

# r - R中计算滚动实现波动率的更快方法

> ID：12823445
> 
> 赞同：10
> 
> 时间：2012-10-10T15:51:26.867
> 
> 标签：r, xts

我想计算一组指数的滚动 20 天实际波动率。这是我用来下载指数价格、计算每日收益和 20 天实际波动率的代码。

```
library(quantmod)
library(PerformanceAnalytics)

tickers = c("^RUT","^STOXX50E","^HSI", "^N225", "^KS11")
myEnv <- new.env()
getSymbols(tickers, src='yahoo', from = "2003-01-01", env = myEnv)
index <- do.call(merge, c(eapply(myEnv, Ad), all=FALSE))

#Calculate daily returns for all indices and convert to arithmetic returns
index.ret <- exp(CalculateReturns(index,method="compound")) - 1
index.ret[1,] <- 0

#Calculate realized volatility
realizedvol <- rollapply(index.ret, width = 20, FUN=sd.annualized) 
```

一切都很快，直到最后一行。我没有计时，但它是在几分钟的范围内，而我希望它只需要几秒钟。是否有更快的方法来计算已实现的波动率？

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T16:00:21.610

您可以`runSD`在 TTR 包中使用（由 quantmod 加载），但您需要应用`runSD`到每一列，将结果转换`apply`回 xts 对象，并手动将结果年化。

```
realized.vol <- xts(apply(index.ret,2,runSD,n=20), index(index.ret))*sqrt(252) 
```

# c++ - boost::get 没有得到 boost::bad_get 异常

> ID：12823448
> 
> 赞同：1
> 
> 时间：2012-10-10T15:51:36.200
> 
> 标签：c++, boost

我正在测试以下代码：

```
typedef boost::variant<int, std::string> Type;
typedef boost::variant<std::vector<int>, std::vector<std::string> > Container;

class Setter: public boost::static_visitor<>
{
public:
    Setter(Container& container): _container(container) 
    {
    }

    template <class T>
    void operator()(const T& valueToSet) 
    {
        std::vector<T> *container = boost::get< std::vector<T> >(&_container);
        if(container->size()==0)
        {
            container->resize(1);
        }
        (*container)[0] = valueToSet;
    }

private:
    Container& _container;
}; 
```

使用以下单元测试：

```
TEST_F (TestSet, addIncorrectTypeToContainer)
{
    Container container((std::vector<std::string>()));
    Setter setter = Setter(container);
    ASSERT_THROW(boost::apply_visitor(setter, Type(int(1))), boost::bad_get);
} 
```

我没有得到 boost::bad_get 异常。相反，它返回 NULL。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:58:39.007

这是答案：

返回指向保持值的引用/指针：

```
If a pointer is passed: Returns a pointer to the held value if its type is ToType. Otherwise, returns NULL.
If a value/reference is passed: Returns a reference to the held value if its type is ToType. Otherwise, throws a bad_get exception. 
```

# mysql - 获取带有分隔符计数的表的子字符串值

> ID：12823451
> 
> 赞同：1
> 
> 时间：2012-10-10T15:51:45.013
> 
> 标签：mysql, csv, substring

我有一个带有 CSV 格式值的 2 列（value1、value2）的 tableA。我想创建一个与 tableA 具有相同字段的 tableB，但是在这 2 列中，只有有限数量的值（请注意，我不知道逗号之间存在多少个字符）。这个“限制”是 CSV 的前*n 个*元素。

**表 A**

```
+----+----------+----------------------+----------------------+
| id |   other  |        value1        |        value2        |
+----+----------+----------------------+----------------------+
| 1  |  other1  | 111,222,333,444      | 1616,17,1,8,19,2020  |
| 2  |  other2  | 55,6,7777,8,9        | 21,22,23             |
| 3  |  other3  | 10101,11.11,13,14,15 | 242424,2525,26,27    |
+----+----------+----------------------+----------------------+ 
```

**表 B（限制为 3 个元素）**

```
+----+----------+----------------------+----------------------+
| id |   other  |        value1        |        value2        |
+----+----------+----------------------+----------------------+
| 1  |  other1  | 111,222,333          | 1616,17,1            |
| 2  |  other2  | 55,6,7777            | 21,22,23             |
| 3  |  other3  | 10101,11.11,13       | 242424,2525,26       |
+----+----------+----------------------+----------------------+ 
```

## 编辑：

我没有提到这些表有大量元素（以及许多其他列，如“其他”）。因此我更喜欢使用：

```
create table tableB LIKE tableA; 
INSERT tableB SELECT * FROM tableA; 
```

然后更新 value1 和 value2 （在 2 个不同的事务中 - 实际上我有 91 个这样的列）。这可能比在单个查询中包含所有值的“创建表”更有效......

* * *

## EDITED2（解决方案）：

**SQLFiddle：**

[http://sqlfiddle.com/#!2/2e73a/1](http://sqlfiddle.com/#!2/2e73a/1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:57:26.777

您可以使用 MySQL 的[`SUBSTRING_INDEX()`](http://dev.mysql.com/doc/en/string-functions.html#function_substring-index)功能，以及[`CREATE TABLE ... SELECT`](http://dev.mysql.com/doc/en/create-table-select.html)：

```
CREATE TABLE TableB
  SELECT id,
         other,
         SUBSTRING_INDEX(value1, ',', 3) AS value1,
         SUBSTRING_INDEX(value2, ',', 3) AS value2
  FROM   TableA 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/b3de9/1/0)上查看。

# c++ - 三元和赋值运算符优先级

> ID：12823452
> 
> 赞同：1
> 
> 时间：2012-10-10T15:51:47.907
> 
> 标签：c++

在 MSVC v9.0 上，如果我这样做：

```
int myvalue;
myvalue = true ? 1 : 0; 
```

那么它似乎`?:`是在'='之前评估的。这是保证吗？我使用此表作为参考： [http ://en.cppreference.com/w/cpp/language/operator_precedence](http://en.cppreference.com/w/cpp/language/operator_precedence)

但是，两个运算符都在同一行，所以我不确定它们是否按照我期望的顺序进行评估，或者这是否得到标准的保证。任何人都可以澄清这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T15:54:44.750

在这份声明中

```
int myvalue = true ? 1 : 0; 
```

只有一个运算符，三元运算符。这里没有赋值运算符，所以优先级无关紧要。

不要将初始化与赋值混淆：

```
int myvalue;
myvalue = true ? 1 : 0; // now priorities are important 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T15:57:56.767

从您的链接：

> 同一单元格中的运算符（一个单元格中可能列出了几行运算符）在给定方向上以相同的优先级进行评估。例如，表达式 a=b=c 被解析为 a=(b=c)，而不是 (a=b)=c，因为从右到左的关联性。

由于两者`=`和`?:`都在同一个单元格中并且具有从右到左的关联性，因此可以保证首先评估三元。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:53:18.753

正如您链接的表中所写的那样，它们从右到左进行评估。它等价于：

```
int myvalue = (true ? 1 : 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T16:02:03.677

右到左：

```
int myValue1 = 20, myValue2 = 30;

myValue1 = true ? 1 : 0; // which is the same as:
myValue1 = ((true) ? (1) : (0));

// myValue == 1 && myValue2 == 30

true ? myValue1 : myValue2 = 5; // which is the same as:
(true) ? (myValue1) : ((myValue2) = (5));

// myValue == 1 && myValue2 == 30

false ? myValue1 : myValue2 = 5; // which is the same as:
(false) ? (myValue1) : ((myValue2) = (5));

// myValue == 1 && myValue2 == 5 
```

这在 C++ 语言中得到保证

# javascript - 在 ACE 编辑器中以编程方式折叠代码

> ID：12823456
> 
> 赞同：11
> 
> 时间：2012-10-10T15:51:58.310
> 
> 标签：javascript, ace-editor, bespin

[ACE](http://ace.ajax.org)（Bespin 的后继者）具有代码折叠功能。此外，还有一个事件[changeFold](http://ace.ajax.org/#nav=api&api=edit_session)会在代码折叠或展开时触发。

**如何从 JavaScript 触发/设置代码折叠？**

即折叠从第 N 行开始的函数代码。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-11T13:32:47.740

在[https://github.com/ajaxorg/ace/blob/master/lib/ace/edit_session/folding.js#L259](https://github.com/ajaxorg/ace/blob/master/lib/ace/edit_session/folding.js#L259) 和 onFoldWidgetClick 上查看 addfold [https://github.com/ajaxorg/ace/blob/master/lib/ ace/edit_session/folding.js#L685](https://github.com/ajaxorg/ace/blob/master/lib/ace/edit_session/folding.js#L685)的用法示例

# regex - perl 将字符串变量插入或替换成字符串

> ID：12823458
> 
> 赞同：1
> 
> 时间：2012-10-10T15:52:09.743
> 
> 标签：regex, perl

我的要求是检查一个字符串并根据特定的字符集插入或替换为前缀字符串

```
$prefix = "DV1"; 
```

以下是我的源 $input 字符串：

```
SS7.ABCWT2.RSND.LTE1.QR
IT4.ABCET2.VCE2.QR
Y88.ABCNT2.MIM.EDR2.QR
9C5.ABCS.MIM.EDR2.QR 
```

first 之前的第一个字符。可以是任何长度，但在第一个之后。字符 ABC 保持不变，后跟任何一个字符 - 这四个字符将始终存在于我的输入字符串中。在这 4 个字符之后，i/p 字符串可能有两个字母数字字符 - 在这种情况下为 T2。

需要做的是检查 $input 是否有“T2”（可以是任何两个字母字符），如果它有然后用 D1 替换这两个字符（来自 $prefix 的任何两个字符）

如果 $input 没有“T2”，则插入 $prefix

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:23:02.333

这可以通过一次替换非常简单地完成。这个程序演示

该模式查找`.ABC`后跟任何非点字符的序列。保护模式的`\K`那一部分不被改变。然后可能有两个可选的非点字符，后跟一个点。替换字符串是`D1`如果两个可选字符存在，或者`$prefix`如果不存在的值

```
use strict;
use warnings;

my $prefix = 'DV1';

while (<DATA>) {
  s/\.ABC[^.]\K([^.]{2})?(?=\.)/$1 ? 'D1' : $prefix/e;
  print;
}

__DATA__
SS7.ABCWT2.RSND.LTE1.QR
IT4.ABCET2.VCE2.QR
Y88.ABCNT2.MIM.EDR2.QR
9C5.ABCS.MIM.EDR2.QR 
```

**输出**

```
SS7.ABCWD1.RSND.LTE1.QR
IT4.ABCED1.VCE2.QR
Y88.ABCND1.MIM.EDR2.QR
9C5.ABCSDV1.MIM.EDR2.QR 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:05:27.487

这是您可以尝试的代码..

我假设，`T2`可以是长度为 2 的任何字母数字字符的字符串。它可以是**A4 或 5B** ...

```
#!/perl/bin
use v5.14;
use warnings;

my $str = "9C5.ABCS.MIM.EDR2.QR";
my $str1 = "SS7.ABCWT2.RSND.LTE1.QR";

my $prefix = "DV1";

my $file = 'D:\Programming\Perl\Learning Perl\chapter_1\demo.txt';

open my $fh, '<', $file or die $!;

foreach (<$fh>) {

    if (m/(^.*\.ABC\w)\w{2}\./g) {
        s/(^.*\.ABC\w)\w{2}\./$1D1\./;
    } else {
        s/(^.*\.ABC\w)\./$1$prefix\./;
    }
    say;  # Takes current line as default($_). We don't need to specify it.
} 
```

**输入文件**： -

```
SS7.ABCWT2.RSND.LTE1.QR
IT4.ABCEX4.VCE2.QR
Y88.ABCN5W.MIM.EDR2.QR
9C5.ABCS.MIM.EDR2.QR 
```

**输出： -**

```
SS7.ABCWD1.RSND.LTE1.QR  # Replace T2
IT4.ABCED1.VCE2.QR       # Replace X4
Y88.ABCND1.MIM.EDR2.QR   # Replace 5W    
9C5.ABCSDV1.MIM.EDR2.QR  # Does not contains T2\. Add DV1 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T16:03:07.427

试试下面的代码，告诉我它是否符合你的需要：

```
#!/usr/bin/perl -l

use strict;
use warnings;

my $text =<<EOF;
SS7.ABCWT2.RSND.LTE1.QR
IT4.ABCET2.VCE2.QR
Y88.ABCNT2.MIM.EDR2.QR
9C5.ABCS.MIM.EDR2.QR
EOF

my $prefix = "DV1";

for (split "\n", $text) {
    s/^(\w+\.ABC\w)T2/$1D1/ || s/^/$prefix/;
    print;
} 
```

**输出**

```
SS7.ABCWD1.RSND.LTE1.QR
IT4.ABCED1.VCE2.QR
Y88.ABCND1.MIM.EDR2.QR
DV19C5.ABCS.MIM.EDR2.QR 
```

# java - 扩展子类中的 findViewById()

> ID：12823461
> 
> 赞同：-3
> 
> 时间：2012-10-10T15:52:19.587
> 
> 标签：java, android, class, android-view

我有两个类，例如：

```
public class Game extends Activity

public class CoreGame extends Game 
```

在**CoreGame**课程中，我有：

```
public void init(){
    layout = (RelativeLayout)findViewById(R.id.rlayout);
} 
```

**CoreGame**类行的执行返回`NullPointerException`。`layout = (RelativeLayout)findViewById(R.id.rlayout);`

 **为什么？

OnCreate ：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.game);

        core = new CoreGame(this);
        core.runCoreGame();

    } 
```

Core.runCoreGame()：

```
public void runCoreGame(){
    init();
}

public void init(){
    layout = (RelativeLayout)findViewById(R.id.rlayout);
} 
```

堆栈跟踪：

```
FATAL EXCEPTION: main
    java.lang.RuntimeException: Unable to start activity ComponentInfo{gianbalex.mgs_revenge/gianbalex.mgs_revenge.Game}: java.lang.NullPointerException
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
        at android.app.ActivityThread.access$2300(ActivityThread.java:125)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:123)
        at android.app.ActivityThread.main(ActivityThread.java:4627)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:521)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
        at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.NullPointerException
        at android.app.Activity.findViewById(Activity.java:1637)
        at gianbalex.mgs_revenge.CoreGame.initVariables(CoreGame.java:118)
        at gianbalex.mgs_revenge.CoreGame.runCoreGame(CoreGame.java:84)
        at gianbalex.mgs_revenge.Game.onCreate(Game.java:28)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:49:24.477

好的...所以这段代码中存在不止一个问题，所以我将逐点解决它。

**1.您没有以正确的方式启动活动**

要开始`CoreGame`，您需要使用[Intent](http://developer.android.com/reference/android/content/Intent.html)，如下所示：

```
Intent intent = new Intent(getBaseContext(), CoreGame.class);
startActivity(intent); 
```

这将运行 Activity，Android 将调用`CoreGame.onCreate()`. 您不需要调用构造函数等。您在构造函数中所做的任何事情都应该在`onCreate()`or`onStart()`方法中完成。

现在到你的第二个问题

**2\. 修复 Intent 位后，你最终会得到一个 NPE**

我不确定发布`onCreate()`的是哪个类，所以我将把它分成两个场景：

**场景一：发布的 onCreate() 属于游戏**

在这种情况下，当您将`new CoreGame`行替换为`Intent`启动方法时，您仍然会`NullPointerException`在尝试使用`findViewById()`. 这是因为您只调用`setContentView()`了`Game`Activity，现在您将尝试`Views`从不同的`Activity`. 要解决此问题，您还必须致电`setContentView()`。`CoreGame`

**场景2：发布onCreate()属于CoreGame**

在这种情况下，您可以完全删除这两行：

```
core = new CoreGame(this);
core.runCoreGame(); 
```

相反，只需调用`runCoreGame()`就足够了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:59:50.397

使用这个，这是初始化和创建对象的正确方法。

```
 RelativeLayout layout = (RelativeLayout) findViewById(R.id.rlayout); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-10T16:10:23.600

如果我错了，请纠正我，但看起来你正在尝试

1.  声明一个变量，但你有 () 围绕类型。这应该在编译时给你一个错误消息。

2.  使用强制转换来获取变量的属性，它可能没有。`layout`实际上是`RelativeLayout`对象吗？

我的钱是第二种选择。如果对象不属于正确的类，您将得到一个异常，这就是强制转换听起来正确的原因。这是我在学习 Java 和 Objective-C 时的一个简单想法：“如果它不是正确的类型，我可以强制转换*为*正确的类型”。简单地说，没有。您似乎在这里做的是尝试从没有该属性的东西中获取/设置属性，因此该函数返回`nil`or `null`。在 Java 中，如果我没记错的话，将不惜一切代价避免这些。

您可以通过如下声明来解决此`layout`问题：

```
RelativeLayout layout = (RelativeLayout) findViewById(R.id.rlayout); 
```

这使它成为正确的类型，因此它可以正确接收任何和所有信息。现在，我是 Java 和 Android SDK 的新手，但我仍然有一个建议：在尝试使用 Java 构建真正的应用程序之前，先尝试学习 Java 并熟悉它。不幸的是，您显然并不完全熟悉该语言及其特性。如果我错了，那可能是因为我很困惑。您确实应该发布显示声明的代码，`layout`以便我们可以在那里看到任何潜在的问题。

编辑：正如 AedonEtLIRA 在对您的评论中所说，无论如何您都应该在其他地方这样做。除非你*真的很*清楚自己在*做*什么，否则将这种代码放入构造函数中是非常危险的。即使应用程序之后看起来很好，这种事情也会导致它运行得更慢并且更不稳定。其他代码可能会导致它无缘无故地崩溃。这是因为它可以在应用程序中创建僵尸和“死内存”，当其他活动需要内存时，这可能会导致问题。**

# authentication - 当 smtp 邮件返回“服务器不接受密码”时

> ID：12823464
> 
> 赞同：1
> 
> 时间：2012-10-10T15:52:24.393
> 
> 标签：authentication, passwords, phpmailer

您从 phpmailer 收到此错误。

> “服务器不接受密码：535 验证数据不正确”

这是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:52:24.393

您必须确保`Username`给定的登录信息与`SetFrom`电子邮件地址相同。

这将返回一个错误：

```
$mail->Username   = "myemailaddress@gmail.com";      // GMAIL username 
$mail->Password   = "password";                      // GMAIL password 
$mail->SetFrom('mysetfromaddress@gmail.com', 'Pagelinks'); 
```

这不应该。

```
$mail->Username   = "mysetfromaddress@gmail.com";    // GMAIL username 
$mail->Password   = "password";                      // GMAIL password 
$mail->SetFrom('mysetfromaddress@gmail.com', 'Pagelinks'); 
```

当`Username`和`SetFrom`不匹配时，身份验证失败（根据在 Google 上找到的一篇文章）。

# php - 使用 PHP 检查文件是否包含此文本

> ID：12823470
> 
> 赞同：0
> 
> 时间：2012-10-10T15:52:42.993
> 
> 标签：php

php 函数应检查文件 index.php 是否包含 CMS 链接。我尝试了以下但它不起作用：

```
 <?php
    $file = file_get_contents("./index.php");
    if (strpos($file, "http://www.wordpress.com") !== false) {
        echo "Found";
    }
    else
    {
    echo "Not found";
    }
    ?> 
```

我对 PHP 很陌生。我没有使用搜索找到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:54:36.830

```
<?php
$file = file_get_contents("./index.php");
if (preg_match("/http\:\/\/www\.wordpress\.com/", $file)) {
    echo "Found";
}
else {
    echo "Not found";
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:55:09.670

`file_get_contents`— 将整个文件读入运行以下内容的字符串：

```
 $file = file_get_contents("./index.php"); 
```

将导致`RAW PHP CODE`而不是呈现 HTML 版本， `http://www.wordpress.com`甚至可能来自数据库或任何其他资源

改用完整的 HTTP 路径

```
 $file = file_get_contents("http://www.xxxxx.com/index.php"); 
```

例子

如果你有`a.php`文件

```
<?php 
    echo "XXX" ; 
?> 
```

如果你跑

```
 var_dump(file_get_contents("a.php")); 
```

输出

```
string '    <?php 

        echo "XXX" ; 

    ?>

' (length=31) 
```

和

```
 var_dump(file_get_contents("http://localhost/a.php")); 
```

输出

```
 string '  XXX' (length=4) 
```

# java - Android：过滤谷歌地方搜索结果

> ID：12823474
> 
> 赞同：0
> 
> 时间：2012-10-10T15:53:05.457
> 
> 标签：java, android, google-maps, google-places-api, google-places

我正在开发我的第一个使用 Google Places API 的 android 应用程序。我遇到的问题是我不知道如何过滤搜索结果以仅显示我想要的特定地点，而不是该类型中的所有内容。例如，假设我有一个全国特定类型餐厅的列表，并且我只想显示那些特定的地方，我将如何过滤掉那些我想在我的应用程序中显示的结果。所以说我想要意大利餐厅，但不是随便一家，我想展示属于特定餐厅集团或特定厨师的餐厅。如果我已经有他们的位置列表，有没有办法可以过滤掉那些？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:08:59.480

使用 Places API 没有确切的方法来执行此操作。您可以`keyword`在请求中将餐厅组或厨师名称作为参数传递。正如文档所述，`keyword`参数是：

> 与 Google 已为此地点编制索引的所有内容匹配的术语，包括但不限于名称、类型和地址，以及客户评论和其他第三方内容。

如果您也有地点，则可以尝试将位置与搜索返回的位置进行匹配，但这可能不可靠，因为 Google 对该地点的确切位置可能与您对该地点的位置不同。

# java - 监听 JTable 单元格值变化并相应更新数据库的最佳方法是什么？

> ID：12823475
> 
> 赞同：10
> 
> 时间：2012-10-10T15:53:08.280
> 
> 标签：java, swing, jtable, listener, tablemodel

我正在构建多个应用程序，`JTables`我需要检测单元格值何时发生变化，以便我可以在数据库中更新它。我尝试过`TableModelListener`覆盖`tableChanged`，但**只有在我编辑单元格后单击离开**（单击另一行）时才会触发。

还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-10T19:20:57.973

您可以实现该[`CellEditorListener`](https://docs.oracle.com/javase/8/docs/api/javax/swing/event/CellEditorListener.html)接口，如本[示例](https://stackoverflow.com/a/11113648/230513)所示。请注意，[`JTable`](https://docs.oracle.com/javase/8/docs/api/javax/swing/JTable.html)它本身是一个`CellEditorListener`.

失去焦点时终止编辑也可能很方便，如下[所示](https://stackoverflow.com/a/9226137/230513)：

```
table.putClientProperty("terminateEditOnFocusLost", true); 
```

更多 Swing 客户端属性可以在[这里](http://www.java2s.com/Tutorial/Java/0240__Swing/SwingsClientPropertiesSummaryTable.htm)找到。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T19:19:47.467

我同意@mKorbel - 除非您的所有输入都是复选框和下拉菜单，否则您将要等到单元格编辑停止（您不想在每次输入字母时都提交到数据库）文本框）。

如果问题是焦点转移到另一个组件后它没有提交，请添加一个`FocusListener`当焦点在表格上丢失时停止编辑表格：

例子：

```
final JTable table = new JTable();
table.addFocusListener(new FocusAdapter() {
    @Override
    public void focusLost(FocusEvent e) {
        TableCellEditor tce = table.getCellEditor();
        if(tce != null)
            tce.stopCellEditing();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T08:43:11.040

我使用回车键，所以每次用户点击输入单元格都会更新。

```
 DefaultTableModel dtm = new DefaultTableModel(data, columnNames);
    JTable table = new JTable(dtm);

    table.addKeyListener(new KeyAdapter() {
        @Override
        public void keyPressed(KeyEvent e) {
            if (e.getKeyCode() == KeyEvent.VK_ENTER) {

                int row = table.getSelectedRow();
                int column = table.getSelectedColumn();

                // resul is the new value to insert in the DB
                String resul = table.getValueAt(row, column).toString();
                // id is the primary key of my DB
                String id = table.getValueAt(row, 0).toString();

                // update is my method to update. Update needs the id for
                // the where clausule. resul is the value that will receive
                // the cell and you need column to tell what to update.
                update(id, resul, column);

            }
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-18T09:15:34.320

如果您想通过选择更改或保存按钮停止对事件处理程序的编辑，这也很方便。

```
if (table.isEditing())
    table.getCellEditor().stopCellEditing(); 
```

# javascript - 拖动元素时出现 Windows“不允许”图标

> ID：12823482
> 
> 赞同：1
> 
> 时间：2012-10-10T15:53:18.467
> 
> 标签：javascript, jquery, css

我正在使用 jQuery 创建一个相当简单的滑块。为此，我使用了 mousedown、mousemove 和 mouseup 事件。

```
var pageX;
$handle.bind('mousedown',function(a){
    pageX = a.pageX;
    $handle.bind('mousemove',function(e){
        e.preventDefault();
        var delta = pageX - e.pageX;
        pageX = e.pageX;

        var left = $handle.position().left;
        $handle.css({left:(left-delta)+'px'});
    });
});
        $handle.bind('mouseup',function(){
            $handle.unbind('mousemove');
        }); 
```

现在，这实际上效果很好，除了当我快速拖动手柄时，会出现“块”图标（你知道，上面有一个十字的圆圈）。我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-06-14T17:51:25.370

我能够通过阻止`mousedown`事件的默认行为来修复它

```
$handle.bind('mousedown', function(a) {
    a.preventDefault()
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:02:02.143

您可以手动将光标设置为任何内容：http: [//www.echocho.com/csscursors.htm](http://www.echoecho.com/csscursors.htm)

在此示例中，您将使用：

```
.css('cursor','default'); 
```

希望有帮助。

# javascript - 解析 JSON 不起作用

> ID：12823488
> 
> 赞同：0
> 
> 时间：2012-10-10T15:53:27.953
> 
> 标签：javascript, jquery, arrays, json, parsing

包含 JSON 对象的 JS 数组位于外部文件*pairs.js*中，如下所示：

```
var objects =[{
    "name":"Joe",
    "age":"22"
  },{
    "name":"April",
    "age":"43"
  }, .......
]; 
```

我将文件包含在 html 中，如下所示：

```
<script src="pairs.js"></script> 
```

现在我的问题开始了——我无法解析这些对象。我已经这样做了：

```
var obj=jQuery.parseJSON(objects);
//also tried: jQuery.parseJSON(objects[0]);
alert(obj.name); 
```

但它不会起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T15:56:01.050

`jQuery.parseJSON()`需要一个包含 JSON 的字符串参数。但是你传递给它一个已经形成的对象。 *你根本不需要在这里解析任何东西。* 只需使用`objects`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:57:56.527

`objects`已经是一个 JavaScript 对象，并且 parseJson() 在这种情况下不起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:58:04.783

您已经传递了一个已形成的对象，因此**无需**解析它，只需尝试使用该对象即可。

# objective-c - 如何使用 Cocoa 和 CGDisplayCreateImageForRect 在 Mac OS X 中截取区域截图？

> ID：12823489
> 
> 赞同：2
> 
> 时间：2012-10-10T15:53:29.133
> 
> 标签：objective-c, macos

如何使用 Cocoa 和 CGDisplayCreateImageForRect 在 Mac OS X 中截取区域截图？我找到了如何制作全尺寸截图[How to take screenshot in Mac OS X using Cocoa or C++](https://stackoverflow.com/questions/38934/how-to-take-screenshot-in-mac-os-x-using-cocoa-or-c)，但是我如何制作区域截图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-15T15:08:11.530

抱歉，格式很丑。第二个功能正是您想要的。

```
//  this is a cute function for creating CGImageRef from NSImage.
//  I found it somewhere on SO but I do not remember the link, I am sorry..
CGImageRef CGImageCreateWithNSImage(NSImage *image) {
    NSSize imageSize = [image size];

    CGContextRef bitmapContext = CGBitmapContextCreate(NULL, imageSize.width, imageSize.height, 8, 0, [[NSColorSpace genericRGBColorSpace] CGColorSpace], kCGBitmapByteOrder32Host|kCGImageAlphaPremultipliedFirst);

    [NSGraphicsContext saveGraphicsState];
    [NSGraphicsContext setCurrentContext:[NSGraphicsContext graphicsContextWithGraphicsPort:bitmapContext flipped:NO]];
    [image drawInRect:NSMakeRect(0, 0, imageSize.width, imageSize.height) fromRect:NSZeroRect operation:NSCompositeCopy fraction:1.0];
    [NSGraphicsContext restoreGraphicsState];

    CGImageRef cgImage = CGBitmapContextCreateImage(bitmapContext);
    CGContextRelease(bitmapContext);
    return cgImage;
}

NSImage* NSImageFromScreenWithRect(CGRect rect){

    //  copy screenshot to clipboard, works on OS X only..
    system("screencapture -c -x");

    //  get NSImage from clipboard..
    NSImage *imageFromClipboard=[[NSImage alloc]initWithPasteboard:[NSPasteboard generalPasteboard]];

    //  get CGImageRef from NSImage for further cutting..
    CGImageRef screenShotImage=CGImageCreateWithNSImage(imageFromClipboard);

    //  cut desired subimage from fullscreen screenshot..
    CGImageRef screenShotCenter=CGImageCreateWithImageInRect(screenShotImage,rect);

    //  create NSImage from CGImageRef..
    NSImage *resultImage=[[NSImage alloc]initWithCGImage:screenShotCenter size:rect.size];

    //  release CGImageRefs cause ARC has no effect on them..
    CGImageRelease(screenShotCenter);
    CGImageRelease(screenShotImage);

    return resultImage;
} 
```

# c# - 在 C# 和 SQL Server 中开发开发环境需要什么？

> ID：12823493
> 
> 赞同：4
> 
> 时间：2012-10-10T15:53:37.077
> 
> 标签：c#, .net, sql-server, visual-studio-2010

我已经安装了 Visual Studio 2010，但仅此而已。

我不确定还需要安装什么才能开始通过许多可用的 C#（访问 SQL Server）。

非常感谢分步开发环境设置说明的提示和链接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T15:55:08.213

你有 Visual Studio 2010，你完成了，它安装了一个 SQL compact 库和一个 SQL express 服务器。你已准备好出发。

对于 SQL 服务器管理，您可以下载[Microsoft SQL Server 2008 Management Studio Express](http://www.microsoft.com/en-us/download/details.aspx?id=7593)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T15:57:06.200

SQL Server express 肯定会帮助你。

事实上，你需要两个基本的东西：

1.  视觉工作室（你有！）
2.  SQL 服务器。在大多数情况下，SQL server express 可以完成这项工作。

只需进行完整安装，应包括所有工具：[SQL Server Express](http://www.microsoft.com/en-us/download/details.aspx?id=29062)

# command-line - 使用 Chef Knife 的 Windows 命令行 tar“无法连接到 d：解析失败”

> ID：12823499
> 
> 赞同：17
> 
> 时间：2012-10-10T15:54:02.353
> 
> 标签：command-line, gzip, tar, chef-infra

使用安装了 cygwin、chef 和 ruby​​ 的 Windows 命令行。尝试的时候

```
knife cookbook site install mysql 
```

返回以下错误

```
Begin output of tar zxvf D:/path/to/chef-repo/cookbooks/mysql.tar.gz  
STDOUT:  
STDERR: tar<child>: Cannot connect to D: resolve failed  
gzip: stdin: undexpected end of file  
tar: Child returned status 128  
tar:  Error is not recoverable: exiting now</code> 
```

我该如何解决这个问题？我可以使用手动解压缩

```
tar zxvf mysql.tar.gz 
```

但这并不理想。我相信这与[文件名中的冒号有关，](https://unix.stackexchange.com/questions/13377/tar-extraction-depends-on-filename)但如何在刀或厨师偏好中更改它？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2016-06-23T15:45:29.700

原因是文件名中的`tar`冒号 ( ) 解释为它是另一台机器上的文件。`:`您可以使用标志禁用此行为`--force-local`。

这是来自[here](https://unix.stackexchange.com/a/13381/146563)的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-30T14:34:16.647

我不知道一个完整的答案，但最近在 Linux 机器上看到了这个：

```
$ date > today
$ tar -czf - today > to:day.tgz
$ tar -tzf to:day.tgz
ssh: connect to host to port 22: Connection refused
tar (child): to\:day.tgz: Cannot open: Input/output error
tar (child): Error is not recoverable: exiting now

gzip: stdin: unexpected end of file
tar: Child returned status 2
tar: Error is not recoverable: exiting now
$ tar -tzf - < to:day.tgz 
today
$ 
```

由于文件名中的冒号，似乎`tar`想要进行某种远程文件处理，您可以通过使用某种形式的重定向或管道来伪造它 - 用于读取和写入 tarball。我仍然想找到一个选项或其他东西来告诉`tar`不要这样做。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T16:42:23.063

如果从 cmd 运行，tar 命令会起作用吗？另外，如果输出到本地驱动器怎么办。别的试试这个

```
tar zxvf "D:/path/to/chef-repo/cookbooks/mysql.tar.gz" 
```

# ember.js - 如何防止（Ember._MetamorphView 的子类）？

> ID：12823505
> 
> 赞同：0
> 
> 时间：2012-10-10T15:54:18.990
> 
> 标签：ember.js

根据[这个 StackOverflow 线程](https://stackoverflow.com/questions/9168239/item-specific-actions-in-ember-js-collection-views)，在 {{each}} 中使用 {{view}} 是为数组的每个元素显示视图的正确方法（虽然线程很旧）。

现在我的问题是这个方法生成*（**Ember._MetamorphView**的子类）*而不是*（**MyApp.MyView**的子类）*，并且让我以后无法调用一些特定的方法，在*MyApp.MyView*中定义，它说：

```
Object <(subclass of Ember._MetamorphView):ember381> has no method 'play' 
```

我知道还有其他方法可以实现相同的目标，例如*{{collection}}*或*Ember.ContainerView*，甚至*Ember.ArrayController*。但如果不是真的必要，我真的很喜欢使用 {{each}} 方法保持简单。

有没有办法防止*（Ember._MetamorphView 的子类）*并拥有自己的类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:51:04.243

经过几个小时的尝试，我放弃了它并使用了一个集合：

```
{{#collection App.AnswersView contentBinding="answers"}}
  <div class="answer alpha">{{view.content.answer}}</div>
{{/collection}} 
```

# tsql - Visual Studio 报告中的聚合未显示

> ID：12823506
> 
> 赞同：0
> 
> 时间：2012-10-10T15:54:20.683
> 
> 标签：tsql, visual-studio-2008, reporting-services, aggregate-functions

我正在尝试创建一个联合两个数据集的报告。它需要（1）一个日期范围内特定客户的一堆订单，并将其与（标题和）（2）运输方法以及下订单和下订单之间的平均时间间隔发送。

下面的屏幕截图显示，在 SQL Server 中，查询运行良好。但是，当我在 Visual Studio 2008 中运行这个完全相同的查询来为此创建报告时，平均周转时间的实际值![在此处输入图像描述](../Images/3b840b6c61a3f426ace1988a4e9f1b1d.png)是空的。

据我所知，在 SQL Server 中，无论我给它什么参数，查询都能完美运行。我只是不明白为什么报告中的平均周转时间总是空白。

我正在运行的查询是：

```
DECLARE @turnaroundInfo TABLE
(
    [Owner Reference] VARCHAR(48),
    [Project] VARCHAR(48),
    [Carrier Type] VARCHAR(48),
    [Created Date] DATETIME,
    [Shipped Date] DATETIME,
    [Turnaround Time (hours)] INT
)
INSERT INTO @turnaroundInfo
SELECT orders.ownerReference AS [Owner Reference], p.name AS [Project], types.name AS [Carrier Type], orders.createdSysDateTime AS [Created Date], shipments.shippedDate AS [Shipped Date],  DATEDIFF(HOUR,             orders.createdSysDateTime, shipments.shippedDate) AS [Turnaround Time (hours)]
FROM datex_footprint.Orders orders
    INNER JOIN datex_footprint.Projects p ON orders.projectId = p.id
    INNER JOIN datex_footprint.CarrierServiceTypes types ON orders.preferredCarrierServiceTypeId = types.id
    INNER JOIN datex_footprint.OrderLines lines ON orders.id = lines.orderId
    INNER JOIN datex_footprint.Shipments shipments ON lines.shipmentId = shipments.id
WHERE p.name IN (@project)  AND types.name IN(@carrier)

-- Get only the type and date-ranged turnaround info we want
DECLARE @orders TABLE
(
    [Owner Reference] VARCHAR(48),
    [Project] VARCHAR(48),
    [Carrier Type] VARCHAR(48),
    [Created Date] DATETIME,
    [Shipped Date] DATETIME,
    [Turnaround Time (hours)] INT
)
INSERT INTO @orders
SELECT  *
FROM @turnaroundInfo
WHERE [Turnaround Time (hours)] >= 0 AND [Created Date] BETWEEN @startDate AND @endDate
ORDER BY [Turnaround Time (hours)], [Carrier Type] ;

-- UNION the relevant turnaround infor with headers
SELECT * FROM @orders o /*  All the orders in the date range for this project and the selected carrier(s) */
UNION ALL
SELECT 'Carrier' AS [Carrier Type], 'Avg Turnaround Time' AS [Average Turnaround], NULL AS Column3, NULL AS Column4, NULL AS Colummn5, NULL AS Column6
UNION ALL
SELECT o.[Carrier Type], CAST(AVG(o.[Turnaround Time (hours)]) AS NVARCHAR(24)) AS [Average Turnaround], NULL AS Column3, NULL AS Column4, NULL AS Colummn5, NULL AS Column6
FROM @orders o
GROUP BY o.[Carrier Type]; 
```

有人知道或看到我可能会丢失什么吗？任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:53:53.113

我弄清楚我的错误是什么。关于值 24 的列以及标题和 24 值列的大小不同。在 SQL Server 中，它似乎并不在意，但在 Visual Studio 中，它看到了大小差异，实际上从显示中删除了整个列。

在我将平均值列调整为 VARCHAR(48) 之后，它上面的列的大小是这样的，它再次正确显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:58:50.497

它不是空白的，它可能不在您期望的列中 - 我可以在您的屏幕截图中看到值“24”。

# php - 有没有办法使用幻灯片共享，但在使用一次后将其锁定？

> ID：12823519
> 
> 赞同：0
> 
> 时间：2012-10-10T15:55:06.050
> 
> 标签：php, javascript, slideshow

我正在尝试运行一个系统，在该系统中人们可以看到幻灯片，但在我的演示文稿之后内容被锁定。

有没有办法在查看后使用 PHP / Javascript 使其锁定？进一步扩展它是否可以通过网络 CMS 进行管理，即打开和关闭其可见性？

如果没有，是否有任何替代 slideshare 的方法可以让我这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:06:48.220

我建议使用 MySQL 或 MSSQL 等数据库。创建一个表格来保存对您的演示幻灯片的引用。创建另一个表来保存看过你的幻灯片的人的用户名或 IP 地址，旁边是他/她看过的幻灯片的外键和一个标志，表示用户是否可以再次看到幻灯片。您可以更改此标志以使幻灯片可见或隐藏。

现在，在 PHP 中，当用户想要访问您的幻灯片时，您检查您是否已在表格中注册了该用户。如果是，那么用户已经看过您的幻灯片，是否再次显示由您决定。如果没有，则在表格中注册用户并显示幻灯片。

# asp.net-mvc - 即使我设置了 CustomError="On"，自定义错误页面也不会显示

> ID：12823520
> 
> 赞同：8
> 
> 时间：2012-10-10T15:55:07.297
> 
> 标签：asp.net-mvc, error-handling, web-config, asp.net-mvc-4

我正在使用带有 MVC 4 框架的 Visual Studio 2012，如果未处理异常，我希望查看共享文件夹的友好错误页面。（我知道，作为开发人员，我需要查看错误详细信息，但我只是想测试此设置）
到目前为止，我知道在 web.config 的 system.web 部分中添加以下代码应该可以解决问题

```
<customErrors mode="On" /> 
```

不幸的是，我得到的不是我友好的错误页面：

> ## “/”应用程序中的服务器错误。
> 
> 运行时错误描述：服务器上发生应用程序错误。此应用程序的当前自定义错误设置阻止查看应用程序错误的详细信息。
> 
> 详细信息：要在本地服务器计算机上查看此特定错误消息的详细信息，请在位于当前 Web 应用程序根目录的“web.config”配置文件中创建一个标签。然后，此标记应将其“模式”属性设置为“RemoteOnly”。要在远程机器上查看详细信息，请将“mode”设置为“Off”。

```
 <!-- Web.Config Configuration File -->

 <configuration>
     <system.web>
         <customErrors mode="RemoteOnly"/>
     </system.web> </configuration> 
```

> 注意：您看到的当前错误页面可以通过修改应用程序配置标记的“defaultRedirect”属性以指向自定义错误页面 URL 来替换为自定义错误页面。

```
 <!-- Web.Config Configuration File -->

 <configuration>
     <system.web>
         <customErrors mode="On" defaultRedirect="mycustompage.htm"/>
     </system.web> </configuration> 
```

我想按照描述来做，而不是像向 HomeController 添加操作、设置路由或其他东西这样的解决方法。
这应该工作的参考如下：
~~[http](http://pluralsight.com/training/players/PSODPlayer?author=scott-allen&name=mvc3-building-controllers&mode=live&clip=0&course=aspdotnet-mvc3-intro)
://pluralsight.com/training/players/PSODPlayer?author=scott-allen&name=mvc3-building-controllers&mode=live&clip=0&course=aspdotnet-mvc3-intro （在左侧选择“动作过滤器”一章并跳到 3:30 分钟）~~

**更新（链接已更改）：**
[http ://pluralsight.com/training/Player?author=scott-allen&name=mvc4-building-m2-controllers&mode=live&clip=0&course=mvc4 -building](http://pluralsight.com/training/Player?author=scott-allen&name=mvc4-building-m2-controllers&mode=live&clip=0&course=mvc4-building)
（在顶部单击“ASP.NET MVC 4 中的控制器”的细线，然后单击“Action Filters”并跳到 5:00 分钟）

有人知道为什么我看不到上面提到的设置的友好错误页面吗？
提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T17:18:12.467

这是执行此操作的分步指南，

首先，首先将“customErrors”模式属性设置为“on”。（这指定启用自定义错误。）

**1.来自Web.config的代码**

```
<system.web>

    <customErrors mode="On"></customErrors>

</system.web> 
```

下面是我的控制器代码，我在控制器类上指定了 HandleError 属性。此外，为了生成错误，我从 Index 操作中抛出了一个异常。

**2\. HomeController.cs 中的代码**

```
[HandleError]
public class HomeController : Controller
{
    public ActionResult Index()
    {
    throw new Exception("Error Occured !");
    ViewBag.Message = "Welcome to ASP.NET MVC!";

    return View();
    }

    public ActionResult About()
    {
    return View();
    }
} 
```

正如您在下面的屏幕截图中看到的，我在 Views 文件夹的 Shared 文件夹中定义了一个 Error.cshtml 视图。

**3\. 解决方案资源管理器**

![在此处输入图像描述](../Images/a28c76c94ef00c7479fb29cc27f5e06e.png)

请注意，Error.cshtml 视图（如下所示）使用“System.Web.Mvc.HandleErrorInfo”模型</p>

**4\. 来自 Error.cshtml 的代码**

```
@model System.Web.Mvc.HandleErrorInfo

@{
    ViewBag.Title = "Error";
}

<h2>
    Sorry, an error occurred while processing your request.
</h2> 
```

在运行项目时，我现在得到以下输出，而不是黄色死屏。

![在此处输入图像描述](../Images/f8b8ed1d0e54291761e1b7a2f38125a4.png)

取自[这篇文章](http://yassershaikh.com/how-to-use-handleerror-in-mvc-3-with-example/)

**更新 ：**

通过创建一个新项目来尝试一下，这应该并且确实有效。我怀疑您的`Error.cshtml`文件可能没有模型，`@model System.Web.Mvc.HandleErrorInfo`或者您可能在不同的视图文件夹中有多个 Error.cshtml 页面。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-12T14:45:35.593

可能导致您遇到的情况的一个原因：

_layout 中的某些内容导致在呈现“Error.cshtml”时引发异常。

做一个测试添加

```
@{
    Layout = null;
} 
```

在您的“Error.cshtml”文件中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-14T11:25:51.513

我修复了我的.. 它实际上是 *_Layout* 页面无法呈现，因为我`_Layout.cshtml`的强类型为无法转换的基本视图模型`HandleErrorInfo`。而且您永远不会看到此页面绑定错误，因为它仅在打开时才会发生`customError`……太好了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-19T12:59:13.837

当我更新错误的`web.config`文件时，我遇到了同样的问题。

文件夹中有一个`web.config`，`Views`项目应用程序站点下也有一个。

解决方案是更新`web.config`位于项目下。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-01-26T06:25:43.723

这不适用于 Visual Studio 速成版。如果您使用的是 Visual Studio IDE 的专业版或终极版，它可以工作。

# django - 如何使用 Django 和 AngularJS 创建 POST 请求（包括 CSRF 令牌）

> ID：12823524
> 
> 赞同：23
> 
> 时间：2012-10-10T15:55:10.493
> 
> 标签：django, post, angularjs

我正在尝试使用 angular.js 为这个 Django 视图创建一个 POST 请求。

```
class PostJSON4SlickGrid(View):
    """
    REST POST Interface for SlickGrid to update workpackages
    """

    def post(self, request, root_id, wp_id, **kwargs):
        print "in PostJSON4SlickGrid"
        print request.POST
        return HttpResponse(status=200) 
```

因此我创建了这个资源。

```
myModule.factory('gridData', function($resource) {
    //define resource class
    var root = {{ root.pk }};
    return $resource('{% url getJSON4SlickGrid root.pk %}:wpID/', {wpID:'@id'},{
            get: {method:'GET', params:{}, isArray:true},
            update:{method:'POST'}
    });
}); 
```

在控制器中调用**get**方法可以正常工作。url 被翻译成`http://127.0.0.1:8000/pm/rest/tree/1/`.

```
function gridController($scope, gridData){
    gridData.get(function(result) {
        console.log(result);
        $scope.treeData = result;
        //broadcast that asynchronous xhr call finished
        $scope.$broadcast('mySignal', {fake: 'Hello!'});  
    });
} 
```

虽然我在执行更新/POST 方法时遇到问题。

```
item.$update(); 
```

URL 被翻译为`http://127.0.0.1:8000/pm/rest/tree/1/345`，缺少尾部斜杠。如果在 URL 定义中不使用斜杠，则可以轻松避免这种情况。

```
url(r'^rest/tree/(?P<root_id>\d+)/(?P<wp_id>\d+)$', PostJSON4SlickGrid.as_view(), name='postJSON4SlickGrid'), 
```

代替

```
url(r'^rest/tree/(?P<root_id>\d+)/(?P<wp_id>\d+)/$', PostJSON4SlickGrid.as_view(), name='postJSON4SlickGrid'), 
```

使用不带斜杠的解决方法，我现在得到一个 403（禁止）状态代码，这可能是因为我没有在 POST 请求中传递[CSRF](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#std:templatetag-csrf_token)令牌。因此，我的问题归结为如何将 CSRF 令牌传递到 Angular 创建的 POST 请求中？

我知道[这种](https://stackoverflow.com/a/6533544/237690)通过标头传递 csrf 令牌的方法，但我正在寻找**将令牌添加到发布请求正文的**可能性，如此处所建议[的](https://stackoverflow.com/a/6868538/237690)。是否可以在角度将数据添加到发布请求正文？

作为其他阅读材料，您可以查看这些关于资源的讨论、删除的斜杠以及资源当前具有的限制：[disc1](https://github.com/angular/angular.js/pull/1064)和[disc2](https://stackoverflow.com/a/11850027/237690)。在一次讨论中，一位作者建议目前不要使用资源，而是使用[这种](https://stackoverflow.com/a/11850027/237690)方法。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-12-10T10:48:03.257

我知道这已经超过 1 年了，但是如果有人偶然发现同样的问题，Angular JS 已经有一个 CSRF cookie 获取机制（AngularJS 的版本从 1.1.5 开始），你只需要告诉 angular 的名字是什么django 使用的 cookie，以及它应该用来与服务器通信的 HTTP 标头。

为此使用模块配置：

```
var app = angular.module('yourApp');
app.config(['$httpProvider', function($httpProvider) {
    $httpProvider.defaults.xsrfCookieName = 'csrftoken';
    $httpProvider.defaults.xsrfHeaderName = 'X-CSRFToken';
}]); 
```

现在每个请求都将具有正确的 django CSRF 令牌。在我看来，这比在每个请求上手动放置令牌要正确得多，因为它使用了两个框架（django 和 angularJS）的内置系统。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-10T17:50:12.467

你不能这样打电话吗：

```
$http({
    method: 'POST',
    url: url,
    data: xsrf,
    headers: {'Content-Type': 'application/x-www-form-urlencoded'}
}) 
```

`data`可以是您希望传递的任何内容，然后附加`&{{csrf_token}}`到该内容。

在您的资源`params:{}`中，尝试`csrfmiddlewaretoken:{{csrf_token}}`在`params`

编辑：

您可以将数据传递给请求正文

```
item.$update({csrfmiddlewaretoken:{{csrf_token}}}) 
```

并将标题作为

```
var csrf = '{{ csrf_token }}'; 
update:{method:'POST', headers: {'X-CSRFToken' : csrf }} 
```

这是一个未记录的[问题](https://github.com/angular/angular.js/issues/1290)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-19T03:52:02.697

在最近的 angularjs 版本中，提供解决方案不起作用。所以我尝试了以下

*   首先在标记中添加 django 标签 {% csrf_token %}。

*   在你的应用配置文件中添加一个 $http 检查器

```
angular.module('myApp').config(function ( $httpProvider) {
   $httpProvider.interceptors.push('myHttpRequestInterceptor'); 
});
```

*   然后定义 myHttpRequestInterceptor

```
angular.module("myApp").factory('myHttpRequestInterceptor', function ( ) {

   return {
             config.headers = { 
              'X-CSRFToken': $('input[name=csrfmiddlewaretoken]').val() } 
             } 
   return config; 
  }}; 
});
```

它将在所有角度请求中添加 X-CSRFToken

最后你需要添加 Django 中间件“django.middleware.csrf.CsrfViewMiddleware'”它会解决 CSRF 问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-01T21:46:07.803

```
var app = angular.module('angularFoo', ....

app.config(["$httpProvider", function(provider) {
  provider.defaults.headers.common['X-CSRFToken'] = '<<csrftoken value from template or cookie>>';
}]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-11T17:53:26.453

我用这个：

在 Django 视图中：

```
@csrf_protect
def index(request):
    #Set cstf-token cookie for rendered template
    return render_to_response('index.html', RequestContext(request)) 
```

在 App.js 中：

```
(function(A) {
    "use strict";
    A.module('DesktopApplication', 'ngCookies' ]).config(function($interpolateProvider, $resourceProvider) {
        //I use {$ and $} as Angular directives
        $interpolateProvider.startSymbol('{$');
        $interpolateProvider.endSymbol('$}');
        //Without this Django not processed urls without trailing slash
        $resourceProvider.defaults.stripTrailingSlashes = false; 
    }).run(function($http, $cookies) {
        //Set csrf-kookie for every request
        $http.defaults.headers.post['X-CSRFToken'] = $cookies.csrftoken;
        $http.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';
    });
}(this.angular)); 
```

要发送正确的请求，您必须将对象转换为参数形式：

```
$http.post('/items/add/', $.param({name: 'Foo'}));//Here $ is jQuery 
```

# html - 如何关注 HTML5 和 CSS3 的最新更新

> ID：12823525
> 
> 赞同：1
> 
> 时间：2012-10-10T15:55:13.533
> 
> 标签：html, css, web-standards

显然 HTML（而不是 XHTML）是未来。现在，W3C 的 HTML 和 CSS 的官方规范（例如[这个](http://www.w3.org/TR/html5/)）对初学者不是很友好，或者至少是可读的。

那么，对于初学者是否有任何替代方案，以便我们可以跟踪这些 Web 标准的最新更改/更新？更用户友好的东西......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:07:38.160

我会远离 w3schools - 他们不隶属于 W3C。有关详细信息，请参阅[http://w3fools.com/](http://w3fools.com/)。

一些更好，更可靠的资源是：

[http://dev.opera.com/articles/view/1-introduction-to-the-web-standards-cur/#toc](http://dev.opera.com/articles/view/1-introduction-to-the-web-standards-cur/#toc)（面向初学者 - 请参阅 HTML5 部分）

&

[https://developer.mozilla.org/en-US/docs/HTML/HTML5](https://developer.mozilla.org/en-US/docs/HTML/HTML5) （中级更多）

# java - 获取无法解析引用本地 ejb-ref 未实现父接口

> ID：12823527
> 
> 赞同：3
> 
> 时间：2012-10-10T15:55:15.300
> 
> 标签：java, dependency-injection, glassfish, ejb

我试图弄清楚为什么我需要实现这两个接口以避免部署问题。

## Java 代码

**ExamplePlanAssembler.java**

```
@Local
public interface ExamplePlanAssembler {
   ExamplePlan toBO(ExamplePlanEntity entity);
} 
```

**ExtendedExamplePlanAssembler.java**

```
@Local
public interface ExtendedExamplePlanAssembler 
extends ExamplePlanAssembler{
   ExtExamplePlan toBO(ExamplePlanEntity entity, ExtExamplePlanEntity extEntity);
} 
```

**ExtendedExamplePlanAssemblerImpl.java**

```
@Stateless
public class ExtendedExamplePlanAssemblerImpl 
implements ExtendedExamplePlanAssembler {
   /* Method impls removed */
} 
```

**ExamplePlanServiceImpl.java**

```
@Stateless
public class ExamplePlanServiceImpl 
implements ExamplePlanService {
   private ExamplePlanAssembler examplePlanAssembler ;
   @EJB
   public void setAssembler(ExamplePlanAssembler examplePlanAssembler) {
       this.examplePlanAssembler = examplePlanAssembler;
    }
} 
```

## 部署错误

```
[#|.507-0500|SEVERE|gf3.1.2|javax.enterprise.system.tools.deployment.org.glassfish.deployment.common
|_ThreadID=83;_ThreadName=Thread-7;|Cannot resolve reference Local ejb-ref name=
com.myco.services.business.ExampleServiceImpl/examplePlanAssembler,Local 3.x interface =
com.myco.services.assembly.ExamplePlanAssembler,ejb-link=null,lookup=,mappedName=,jndi-name=,refType=Session|#]

[#|.508-0500|SEVERE|gf3.1.2|javax.enterprise.system.core.com.sun.enterprise.v3.server
|_ThreadID=83;_ThreadName=Thread-7;|Exception while deploying the app [mycoservicesear]|#]

[#|.508-0500|SEVERE|gf3.1.2|javax.enterprise.system.core.com.sun.enterprise.v3.server
|_ThreadID=83;_ThreadName=Thread-7;|Cannot resolve reference Local ejb-ref name=
com.myco.services.business.ExampleServiceImpl/examplePlanAssembler,Local 3.x interface =
com.myco.services.assembly.ExamplePlanAssembler,ejb-link=null,lookup=,mappedName=,jndi-name=,refType=Session
java.lang.RuntimeException: Cannot resolve reference Local ejb-ref name=
com.myco.services.business.ExampleServiceImpl/examplePlanAssembler,Local 3.x interface =
com.myco.services.assembly.ExamplePlanAssembler,ejb-link=null,lookup=,mappedName=,jndi-name=,refType=Session

[#|.516-0500|SEVERE|gf3.1.2|javax...gf.deployment.admin
|_ThreadID=83;_ThreadName=Thread-7;|Exception while deploying the app [mycoservicesear] : Cannot resolve reference Local ejb-ref name=
com.myco.services.business.ExampleServiceImpl/examplePlanAssembler,Local 3.x interface =
com.myco.services.assembly.ExamplePlanAssembler,ejb-link=null,lookup=,mappedName=,jndi-name=,refType=Session|#] 
```

## 修复？！

如果我将接口 impl 更改为不仅实现`ExtendedExamplePlanAssembler`接口，还实现父`ExamplePlanAssembler`接口，我的部署错误就会消失。

**ExtendedExamplePlanAssemblerImpl.java (v2)**

```
@Stateless
public class ExtendedExamplePlanAssemblerImpl 
implements ExtendedExamplePlanAssembler,  ExamplePlanAssembler{
   /* Method impls removed */
} 
```

## 问题

*为什么*将父接口添加到我的`implements`声明中可以解决部署问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T13:09:06.280

EJB 规范是这么说的，

例如，由特定会话 bean 公开的客户端视图不会被恰好定义会话 bean 的子类继承。

```
@Stateless
public class A implements Foo { ... }
@Stateless
public class B extends A implements Bar { ... } 
```

假设 Foo 和 Bar 是本地业务接口并且没有关联的部署描述符，会话 bean A 公开本地业务接口 Foo，会话 bean B 公开本地业务接口 Bar，但不公开 Foo。

参考[这里](http://jcp.org/aboutJava/communityprocess/final/jsr318/index.html)。EJB3.1 规范第 4.9.2.1 节

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-05T05:28:57.933

你不能扩展接口我需要你尝试实现接口（你可以在同一个 bean 类中实现两个接口）但是现在你需要用“实现”替换关键字“扩展”

```
@Local
public interface ExtendedExamplePlanAssembler 
 extends ExamplePlanAssembler{
  ExtExamplePlan toBO(ExamplePlanEntity entity, ExtExamplePlanEntity  extEntity);
} 
```

# server-side - 应用中心移动身份验证中的 OAuthException 错误

> ID：12823529
> 
> 赞同：1
> 
> 时间：2012-10-10T15:55:20.113
> 
> 标签：server-side, facebook-authentication, facebook-oauth

我正在尝试从移动设备的应用中心进行身份验证，但是当我尝试为访问令牌交换代码参数时出现此错误：

```
{
    "error": {
        "message": "Error validating verification code. Please make sure your redirect_uri is identical to the one you used in the OAuth dialog request",
        "type": "OAuthException",
        "code": 100
    }
} 
```

身份验证令牌参数采用查询字符串格式，因为我的应用程序使用服务器端身份验证。

我正在调用的 url 是[https://graph.facebook.com/oauth/access_token](https://graph.facebook.com/oauth/access_token)并且我发送到的 redirect_uri 参数如下所示：

> `http://www.example.com?ref=app_directory&code=codefromfb&fb_source=appcenter_mobile&fb_appcenter=1`

www.example.com 是我在应用设置的移动网站 url 字段中设置的值。

来自应用程序中心的网络身份验证没问题。

我不明白重定向 uri 表单移动设备有什么问题......

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T05:40:32.617

我发现这篇文章引用需要在 URI 上使用斜杠

[facebook django应用程序的oauth中的redirect_uri错误](https://stackoverflow.com/questions/12996864/redirect-uri-error-in-oauth-for-facebook-django-app)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:04:00.963

我有同样的错误。我无法解决它，但找到了一种解决方法：我忽略了 Facebook 自动发送到我的移动网络应用程序的代码参数；相反，我自己请求代码，然后使用与请求代码相同的 redirect_uri 交换 access_token 的代码。

为了更轻松地应用解决方法，在您的应用程序 > 设置 > 权限中，您可以将 Auth Token Parameter 从查询字符串更改为 URI 片段。然后 Facebook 不会自动向你发送代码参数——你必须提出请求——这就是需要的。

另一种解决方法是使用 URI 片段实现客户端身份验证流程或在客户端解析 URI 片段并将 access_token 作为参数发送到服务器。我还没有测试这种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T00:34:44.473

用于应用中心身份验证的重定向 URL

```
desktop:  http://www.example.com/?fb_source=appcenter&fb_appcenter=1
mobile:   http://www.example.com/?ref=app_directory
          (part fb_source=appcenter_mobile&fb_appcenter=1 should be excluded for mobile, I think that it's FB bug) 
```

在哪里：

```
http/https      - depends on request
www.example.com - you should use exactly same string as saved at application settings (https://developers.facebook.com/apps/YOUR_APPLICATION_NUMBER/summary) Domain name is case sensitive for Facebook (also bug) 
```

# html - CSS样式类未在Excel中组合

> ID：12823531
> 
> 赞同：2
> 
> 时间：2012-10-10T15:55:27.703
> 
> 标签：html, css, excel

为什么 Excel 不结合这些样式？

> 电子表格：
> 
> ![在此处输入图像描述](../Images/ba0dbf3a07ee69fafa3a8af010a43d8e.png)
> 
> IE：
> 
> ![在此处输入图像描述](../Images/99142429e9bddcda59cb9d4ea32f71c7.png)

示例 jsFiddle：http: [//jsfiddle.net/3RtJj/](http://jsfiddle.net/3RtJj/)

HTML 源代码：

```
<html>
<style type="text/css">
.greenBack{background-color:#d7e4bc}
.redFont{color:red}
</style>
<table>
    <tr>
        <td>no style</td><td class="redFont">red font only</td>
    </tr>
    <tr>
        <td class="greenBack">green back only</td><td class="redFont greenBack">green back and red font</td>
    </tr>
</table>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T16:28:51.983

有人在[这里](http://www.excelforum.com/excel-general/373475-html-imported-to-excel-with-multiple-css-classes-on-elements.html)遇到了类似的问题。似乎 excel 只支持一个类，如果有更多，它就会将它们全部忽略。我建议有一个设置两个属性的 greenBackRedFont 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-15T02:29:49.607

*通常 "' p style="text-align: center"
在 excel 中这样写公式： "'="p style=""text-align: center"" xxx*

*"
(") 2 次 write("") 比你复制粘贴相同*

# google-app-engine - 将 GAE 本地测试与 Objectify 一起使用

> ID：12823532
> 
> 赞同：3
> 
> 时间：2012-10-10T15:55:35.800
> 
> 标签：google-app-engine, objectify

我正在尝试使用谷歌应用引擎提供的本地测试助手来对我使用 objectify 的应用进行单元测试。但是，某些测试失败并显示以下消息；

```
com.google.apphosting.api.ApiProxy$CallNotFoundException: The API package 'datastore_v3' or call 'Put()' was not found.
        at com.google.apphosting.api.ApiProxy$1.get(ApiProxy.java:164)
        at com.google.apphosting.api.ApiProxy$1.get(ApiProxy.java:162)
        at com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:90)
        at com.google.appengine.api.datastore.FutureHelper$CumulativeAggregateFuture.get(FutureHelper.java:145)
        at com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:90)
        at com.googlecode.objectify.impl.ResultAdapter.now(ResultAdapter.java:29)
        at com.googlecode.objectify.util.ResultWrapper.translate(ResultWrapper.java:20)
        at com.googlecode.objectify.util.ResultWrapper.translate(ResultWrapper.java:1)
        at com.googlecode.objectify.util.ResultTranslator.nowUncached(ResultTranslator.java:21)
        at com.googlecode.objectify.util.ResultCache.now(ResultCache.java:27)
        at com.googlecode.objectify.util.ResultWrapper.translate(ResultWrapper.java:20)
        at com.googlecode.objectify.util.ResultWrapper.translate(ResultWrapper.java:1)
        at com.googlecode.objectify.util.ResultTranslator.nowUncached(ResultTranslator.java:21)
        at com.googlecode.objectify.util.ResultCache.now(ResultCache.java:27) 
```

这是我的代码：

```
private final LocalServiceTestHelper helper = new LocalServiceTestHelper(
    new LocalDatastoreServiceTestConfig(),
    new LocalMemcacheServiceTestConfig());

@BeforeMethod(alwaysRun = true)
public void setUp() {
    helper.setUp();
}

.....
//In class constructor
ObjectifyService.register(SomeClass.class);
.....
@AfterMethod(alwaysRun = true)
public void tearDown() {
    helper.tearDown();
}

public void doTest {
    SomeClass value = ......
    ofy().save().entity(value).now(); //throws error
} 
```

这是我的依赖树：

```
[INFO] |  +- com.google.guava:guava-collections:jar:r03:compile
[INFO] |  |  +- com.google.guava:guava-annotations:jar:r03:compile
[INFO] |  |  \- com.google.guava:guava-primitives:jar:r03:compile
[INFO] |  |     \- com.google.guava:guava-base:jar:r03:compile
[INFO] |  \- com.google.inject.extensions:guice-servlet:jar:3.0:compile
[INFO] +- com.google.inject:guice:jar:3.0:compile
[INFO] |  +- com.google.api-client:google-api-client:jar:1.11.0-beta:compile
[INFO] |  |  \- com.google.oauth-client:google-oauth-client:jar:1.11.0-beta:compile
[INFO] |  |     +- com.google.code.findbugs:jsr305:jar:1.3.9:compile
[INFO] |  |     \- com.google.guava:guava:jar:11.0.1:compile
[INFO] |  +- com.google.appengine:appengine-api-1.0-sdk:jar:1.7.2:compile
[INFO] |  \- com.googlecode.objectify:objectify:jar:4.0a4:compile
[INFO] |  +- com.google.appengine.orm:datanucleus-appengine:jar:1.0.10:runtime
[INFO] |  \- com.google.appengine:appengine-tools-sdk:jar:1.7.2:compile
[INFO] +- com.google.appengine:appengine-api-labs:jar:1.7.2:test
[INFO] +- com.google.appengine:appengine-api-stubs:jar:1.7.2:test
[INFO] +- com.google.appengine:appengine-testing:jar:1.7.2:test
[INFO] +- com.google.api-client:google-api-client-appengine:jar:1.10.3-beta:compile
[INFO] |  +- com.google.oauth-client:google-oauth-client-appengine:jar:1.10.1-beta:compile
[INFO] |  |  +- com.google.oauth-client:google-oauth-client-servlet:jar:1.10.1-beta:compile
[INFO] |  +- com.google.api-client:google-api-client-servlet:jar:1.10.3-beta:compile
[INFO] |  \- com.google.http-client:google-http-client-appengine:jar:1.10.3-beta:compile
[INFO] |     \- com.google.http-client:google-http-client:jar:1.10.3-beta:compile
[INFO] |        +- com.google.code.gson:gson:jar:2.1:compile
[INFO] |        \- com.google.protobuf:protobuf-java:jar:2.2.0:compile 
```

知道我错过了什么或做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:07:39.493

我刚刚重现了这个错误并通过添加以下依赖项来修复它：

```
 <!--
      GAE libraries for local testing as described here:
      http://code.google.com/appengine/docs/java/howto/unittesting.html
    -->
    <dependency>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-api-labs</artifactId>
        <version>${gae.version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-api-stubs</artifactId>
        <version>${gae.version}</version>
        <scope>test</scope>
    </dependency> 
```

我使用本地 maven 属性来引用相同的 gae 版本。
希望这有助于
问候

# android - 为什么我的代码不能用于驱动 Android 手机的 LED？

> ID：12823534
> 
> 赞同：2
> 
> 时间：2012-10-10T15:55:40.887
> 
> 标签：android

```
package com.example.phoneled;

import android.os.Bundle;
import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.view.Menu;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.ToggleButton;

public class LedOnOff extends Activity {
    ToggleButton tb;
    final int ID_LED = 1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_led_on_off);

        tb = (ToggleButton) findViewById(R.id.toggleButton1);
        tb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                // TODO Auto-generated method stub
                NotificationManager nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
                Notification notification = new Notification();
                notification.ledARGB = 0xFF0000; // 0xFF0000 red，0x00FF00 green
                notification.ledOnMS = 100;
                notification.ledOffMS = 200;
                notification.flags = Notification.FLAG_SHOW_LIGHTS;
                nm.notify(ID_LED, notification);
//              nm.cancel(ID_LED);
            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_led_on_off, menu);
        return true;
    }
} 
```

以上代码用于驱动我的 Android 手机的 LED：HTC Sensation XE G18。但它不起作用。没有给出错误或警告，但真正的 LED 根本不会闪烁（也不会变成红色）。你可以在互联网上到处找到类似的代码。我不知道我想念什么。有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:37:04.277

你有几个问题我马上就注意到了：

1.  您必须设置默认情况下未设置的 Notification 类的某些成员，例如[`Notification#icon`](http://developer.android.com/reference/android/app/Notification.html#icon)：

    > **icon** : 可绘制的资源 id，用作状态栏中的图标。这是必需的；将不会显示具有无效图标资源的通知。

2.  与许多其他设备一样，我的 HTC 不接受自定义 LED 图案或颜色。它只会使用操作系统的默认值...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:06:38.293

尝试将颜色更改为`0xFFFF0000`. 它应该是 ARGB，并且根据文档：

> 要关闭 LED，请在 alpha 通道中为 colorARGB 传递 0，或者为 ledOnMS 和 ledOffMS 传递 0。

# java - 如何让 Rest Assured 在我的 REST 响应中返回文本（未加密或流式传输）值？

> ID：12823536
> 
> 赞同：1
> 
> 时间：2012-10-10T15:55:44.737
> 
> 标签：java, rest

我最近转移到 Java 并尝试针对 netflix REST 服务编写一些 REST 测试。

我遇到了一个问题，即我的回复使用“放心”或者想要发送 gzip 编码的响应或“InputStream”，它们都没有在响应的内容中提供实际的 XML 文本。我发现了“Accept-Encoding”标头，但使该空白似乎不是解决方案。使用 .Net，我永远不必搞砸这一点，而且我似乎找不到返回人类可读响应的正确方法。

我的代码：

```
RestAssured.baseURI = "http://api-public.netflix.com";
RestAssured.port = 80;

Response myResponse = given().header("Accept-Encoding", "").given().auth().oauth(consumerKey, consumerSecret, accessToken, secretToken).param("term", "star wars").get("/catalog/titles/autocomplete"); 
```

我的响应对象有一个“内容”值，除了对缓冲区、包装流等的引用之外什么都没有。试图获取响应的 ToString() 是行不通的。我见过的所有例子似乎都不适用于我的情况。

关于我在这里做错了什么有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-06-07T17:39:21.120

这对我有用：

```
given().config(RestAssured.config().decoderConfig(DecoderConfig.decoderConfig().noContentDecoders())).get(url) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T00:16:44.270

我猜在 Java 领域，一切都作为输入流返回。使用流阅读器获取了我需要的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-18T13:50:13.273

在其版本 1.9.0 之前，Rest-assured 一直在默认情况下在请求中提供标头“Accept-Encoding:gzip,deflate”，但无法更改它。

请参阅 [https://code.google.com/p/rest-assured/issues/detail?id=154](https://code.google.com/p/rest-assured/issues/detail?id=154)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-16T15:15:28.370

It works for me:

```
String responseJson = get("/languages/").asString(); 
```

# java - 如何使用 JNA 传递结构数组

> ID：12823540
> 
> 赞同：1
> 
> 时间：2012-10-10T15:55:55.963
> 
> 标签：java, arrays, winapi, jna, structure

我参考了另一篇 stackoverflow 文章“如何将指针映射到 JNA 中的结构数组”以提供以下代码来枚举 Windows 服务依赖项。

结构和函数声明：

```
static class SERVICE_STATUS extends Structure {
    public int dwServiceType;
    public int dwCurrentState;
    public int dwControlsAccepted;
    public int dwWin32ExitCode;
    public int dwServiceSpecificExitCode;
    public int dwCheckPoint;
    public int dwWaitHint;
    public SERVICE_STATUS(){}
}

static class ENUM_SERVICE_STATUS extends Structure {
    public ENUM_SERVICE_STATUS(){ }

    public WString lpServiceName;
    public WString lpDisplayName;
    SERVICE_STATUS serviceStatus;
}

boolean EnumDependentServicesW(Pointer hService, int serviceState, ENUM_SERVICE_STATUS serviceStatuses, int size, IntByReference bytesNeeded, IntByReference servicesReturned); 
```

如果只有一个服务依赖项，则以下代码有效：

```
IntByReference bytesNeeded = new IntByReference();
IntByReference numberOfServices = new IntByReference();
Advapi32.ENUM_SERVICE_STATUS serviceStatus = new Advapi32.ENUM_SERVICE_STATUS();
Advapi32.ENUM_SERVICE_STATUS[] serviceStatuses = (Advapi32.ENUM_SERVICE_STATUS[]) serviceStatus.toArray(1);

if (!advapi32.EnumDependentServicesW(serviceHandle, Advapi32.SERVICE_ACTIVE, null, 0, bytesNeeded, numberOfServices)) {
    if (advapi32.EnumDependentServicesW (serviceHandle, Advapi32.SERVICE_ACTIVE, serviceStatuses[0], bytesNeeded.getValue(), bytesNeeded, numberOfServices)) {
        for(int i = numberOfServices.getValue() - 1; i >= 0; i--){
            logger.debug("Service Name: " + serviceStatuses[i].lpServiceName.toString());
    }
} 
```

如果有 2 个服务依赖项，我会在 logger.debug 调用中获得 lpServiceName 的 NullPointerException：

```
IntByReference bytesNeeded = new IntByReference();
IntByReference numberOfServices = new IntByReference();
Advapi32.ENUM_SERVICE_STATUS serviceStatus = new Advapi32.ENUM_SERVICE_STATUS();
Advapi32.ENUM_SERVICE_STATUS[] serviceStatuses = (Advapi32.ENUM_SERVICE_STATUS[]) serviceStatus.toArray(2);

if (!advapi32.EnumDependentServicesW(serviceHandle, Advapi32.SERVICE_ACTIVE, null, 0, bytesNeeded, numberOfServices)) { 
    if (advapi32.EnumDependentServicesW (serviceHandle, Advapi32.SERVICE_ACTIVE, serviceStatuses[0], bytesNeeded.getValue(), bytesNeeded, numberOfServices)) {
        for(int i = numberOfServices.getValue() - 1; i >= 0; i--){
            logger.debug("Service Name: " + serviceStatuses[i].lpServiceName.toString());
    }
} 
```

正如预期的那样，上面代码的 numberOfServices 值为 2。我试图传递结构数组而不是指针，因为我希望 JNA 进行内存同步。我应该如何传递/使用结构数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:42:18.177

根据[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682610%28v=vs.85%29.aspx)，`EnumDependentServices`_

> **lpServices [输出，可选]**
> 
> > 指向 ENUM_SERVICE_STATUS 结构数组的指针，该结构接收数据库中每个依赖服务的名称和服务状态信息。***缓冲区必须足够大以容纳结构以及其成员指向的字符串。***

您几乎忽略了`bytesNeeded`. 您应该使用该`bytesNeeded`值来创建`Memory`所需大小的实例，然后使用该`Memory`实例来创建新`ENUM_SERVICE_STATUS`实例，而不是独立于所需缓冲区大小来创建结构。

# c++ - 编译使用 OpenGL 的代码时找不到 libGLESv2.dll

> ID：12823551
> 
> 赞同：2
> 
> 时间：2012-10-10T15:56:32.337
> 
> 标签：c++, visual-studio-2010, opengl

我正在尝试学习如何在第 4 版 OpenGL Super Bible 中使用 OpenGL，但每当我尝试在 Visual Studio 2010 中复制其中一个示例代码时，我都会收到**“Open_GL.exe -System Error: The program can't start因为您的计算机中缺少 libGLESv2.dll”。** 我的计算机上确实有这个 .dll，但不知道如何使它可用于 VS。但是，该站点上的预构建二进制文件确实可以工作。

我使用的代码，供参考：

```
// Block.cpp
// OpenGL SuperBible, Chapter 1
// Demonstrates an assortment of basic 3D concepts
// Program by Richard S. Wright Jr.

#include "../../shared/gltools.h"   // OpenGL toolkit
#include "../../shared/math3d.h"
#include <math.h>

// Keep track of effects step
int nStep = 0;

// Lighting data
GLfloat lightAmbient[] = { 0.2f, 0.2f, 0.2f, 1.0f };
GLfloat lightDiffuse[] = { 0.7f, 0.7f, 0.7f, 1.0f };
GLfloat lightSpecular[] = { 0.9f, 0.9f, 0.9f };
GLfloat materialColor[] = { 0.8f, 0.0f, 0.0f };
GLfloat vLightPos[] = { -80.0f, 120.0f, 100.0f, 0.0f };
GLfloat ground[3][3] = { { 0.0f, -25.0f, 0.0f },
                    { 10.0f, -25.0f, 0.0f },
                    { 10.0f, -25.0f, -10.0f } };

GLuint textures[4];

// Called to draw scene
void RenderScene(void)
{
M3DMatrix44f mCubeTransform;
M3DVector4f pPlane;

// Clear the window with current clearing color
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glShadeModel(GL_SMOOTH);
glEnable(GL_NORMALIZE);

glPushMatrix();

// Draw plane that the cube rests on
glDisable(GL_LIGHTING);
if(nStep == 5)
    {
    glColor3ub(255,255,255);
    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, textures[0]);
    glBegin(GL_QUADS);
        glTexCoord2f(0.0f, 0.0f);
        glVertex3f(-100.0f, -25.3f, -100.0f);
        glTexCoord2f(0.0f, 1.0f);
        glVertex3f(-100.0f, -25.3f, 100.0f);        
        glTexCoord2f(1.0f, 1.0f);
        glVertex3f(100.0f,  -25.3f, 100.0f);
        glTexCoord2f(1.0f, 0.0f);
        glVertex3f(100.0f,  -25.3f, -100.0f);
    glEnd();
    }
else
    {
    glColor3f(0.0f, 0.0f, 0.90f); // Blue
    glBegin(GL_QUADS);
        glVertex3f(-100.0f, -25.3f, -100.0f);
        glVertex3f(-100.0f, -25.3f, 100.0f);        
        glVertex3f(100.0f,  -25.3f, 100.0f);
        glVertex3f(100.0f,  -25.3f, -100.0f);
    glEnd();
    }

// Set drawing color to Red
glColor3f(1.0f, 0.0f, 0.0f);

// Enable, disable lighting
if(nStep > 2)
    {
    glEnable(GL_DEPTH_TEST);
    glDepthFunc(GL_LEQUAL);
    glEnable(GL_COLOR_MATERIAL);

    glLightfv(GL_LIGHT0, GL_AMBIENT, lightAmbient);
    glLightfv(GL_LIGHT0, GL_DIFFUSE, lightDiffuse);
    glLightfv(GL_LIGHT0, GL_SPECULAR, lightSpecular);
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
    glMaterialfv(GL_FRONT, GL_SPECULAR,lightSpecular);
    glMaterialfv(GL_FRONT, GL_AMBIENT_AND_DIFFUSE, materialColor);
    glMateriali(GL_FRONT, GL_SHININESS,128);
    }

// Move the cube slightly forward and to the left
glTranslatef(-10.0f, 0.0f, 10.0f);

switch(nStep)
    {
    // Just draw the wire framed cube
    case 0:
        glutWireCube(50.0f);
        break;

    // Same wire cube with hidden line removal simulated
    case 1:
        // Front Face (before rotation)
        glBegin(GL_LINES);
            glVertex3f(25.0f,25.0f,25.0f);
            glVertex3f(25.0f,-25.0f,25.0f);

            glVertex3f(25.0f,-25.0f,25.0f);
            glVertex3f(-25.0f,-25.0f,25.0f);

            glVertex3f(-25.0f,-25.0f,25.0f);
            glVertex3f(-25.0f,25.0f,25.0f);

            glVertex3f(-25.0f,25.0f,25.0f);
            glVertex3f(25.0f,25.0f,25.0f);
        glEnd();

        // Top of cube
        glBegin(GL_LINES);
            // Front Face
            glVertex3f(25.0f,25.0f,25.0f);
            glVertex3f(25.0f,25.0f,-25.0f);

            glVertex3f(25.0f,25.0f,-25.0f);
            glVertex3f(-25.0f,25.0f,-25.0f);

            glVertex3f(-25.0f,25.0f,-25.0f);
            glVertex3f(-25.0f,25.0f,25.0f);

            glVertex3f(-25.0f,25.0f,25.0f);
            glVertex3f(25.0f,25.0f,25.0f);
        glEnd();

        // Last two segments for effect
        glBegin(GL_LINES);
            glVertex3f(25.0f,25.0f,-25.0f);
            glVertex3f(25.0f,-25.0f,-25.0f);

            glVertex3f(25.0f,-25.0f,-25.0f);
            glVertex3f(25.0f,-25.0f,25.0f);
        glEnd();

        break;

    // Uniform colored surface, looks 2D and goofey
    case 2:
        glutSolidCube(50.0f);
        break;

    case 3:
        glutSolidCube(50.0f);
        break;

    // Draw a shadow with some lighting
    case 4:
        glGetFloatv(GL_MODELVIEW_MATRIX, mCubeTransform);
        glutSolidCube(50.0f);
        glPopMatrix();

        // Disable lighting, we'll just draw the shadow as black
        glDisable(GL_LIGHTING);

        glPushMatrix();

        m3dGetPlaneEquation(pPlane, ground[0], ground[1], ground[2]);
        m3dMakePlanarShadowMatrix(mCubeTransform, pPlane, vLightPos);
        //MakeShadowMatrix(ground, lightpos, cubeXform);
        glMultMatrixf(mCubeTransform);

        glTranslatef(-10.0f, 0.0f, 10.0f);          

        // Set drawing color to Black
        glColor3f(0.0f, 0.0f, 0.0f);

        glutSolidCube(50.0f);
        break;

    case 5:
        glColor3ub(255,255,255);
        glGetFloatv(GL_MODELVIEW_MATRIX, mCubeTransform);

        // Front Face (before rotation)
        glBindTexture(GL_TEXTURE_2D, textures[1]);
        glBegin(GL_QUADS);
            glTexCoord2f(1.0f, 1.0f);
            glVertex3f(25.0f,25.0f,25.0f);
            glTexCoord2f(1.0f, 0.0f);
            glVertex3f(25.0f,-25.0f,25.0f);
            glTexCoord2f(0.0f, 0.0f);
            glVertex3f(-25.0f,-25.0f,25.0f);
            glTexCoord2f(0.0f, 1.0f);
            glVertex3f(-25.0f,25.0f,25.0f);
        glEnd();

        // Top of cube
        glBindTexture(GL_TEXTURE_2D, textures[2]);
        glBegin(GL_QUADS);
            // Front Face
            glTexCoord2f(0.0f, 0.0f);
            glVertex3f(25.0f,25.0f,25.0f);
            glTexCoord2f(1.0f, 0.0f);
            glVertex3f(25.0f,25.0f,-25.0f);
            glTexCoord2f(1.0f, 1.0f);
            glVertex3f(-25.0f,25.0f,-25.0f);
            glTexCoord2f(0.0f, 1.0f);
            glVertex3f(-25.0f,25.0f,25.0f);
        glEnd();

        // Last two segments for effect
        glBindTexture(GL_TEXTURE_2D, textures[3]);
        glBegin(GL_QUADS);
            glTexCoord2f(1.0f, 1.0f);
            glVertex3f(25.0f,25.0f,-25.0f);
            glTexCoord2f(1.0f, 0.0f);
            glVertex3f(25.0f,-25.0f,-25.0f);
            glTexCoord2f(0.0f, 0.0f);
            glVertex3f(25.0f,-25.0f,25.0f);
            glTexCoord2f(0.0f, 1.0f);
            glVertex3f(25.0f,25.0f,25.0f);
        glEnd();

        glPopMatrix();

        // Disable lighting, we'll just draw the shadow as black
        glDisable(GL_LIGHTING);
        glDisable(GL_TEXTURE_2D);

        glPushMatrix();

        m3dGetPlaneEquation(pPlane, ground[0], ground[1], ground[2]);
        m3dMakePlanarShadowMatrix(mCubeTransform, pPlane, vLightPos);
        glMultMatrixf(mCubeTransform);          

        glTranslatef(-10.0f, 0.0f, 10.0f);          

        // Set drawing color to Black
        glColor3f(0.0f, 0.0f, 0.0f);
        glutSolidCube(50.0f);
        break;

    }

glPopMatrix();

// Flush drawing commands
glutSwapBuffers();
}

// This function does any needed initialization on the rendering
// context. 
void SetupRC()
{
    GLbyte *pBytes;
    GLint nWidth, nHeight, nComponents;
    GLenum format;

// Black background
glClearColor(0.0f, 0.0f, 0.0f, 1.0f );

    glTexEnvi(GL_TEXTURE_ENV,GL_TEXTURE_ENV_MODE, GL_MODULATE);
    glGenTextures(4, textures);

// Load the texture objects
    pBytes = gltLoadTGA("floor.tga", &nWidth, &nHeight, &nComponents, &format);
    glBindTexture(GL_TEXTURE_2D, textures[0]);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
glTexImage2D(GL_TEXTURE_2D,0,nComponents,nWidth, nHeight, 0,
    format, GL_UNSIGNED_BYTE, pBytes);
free(pBytes);

pBytes = gltLoadTGA("Block4.tga", &nWidth, &nHeight, &nComponents, &format);
    glBindTexture(GL_TEXTURE_2D, textures[1]);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
glTexImage2D(GL_TEXTURE_2D,0,nComponents,nWidth, nHeight, 0,
    format, GL_UNSIGNED_BYTE, pBytes);
free(pBytes);

pBytes = gltLoadTGA("block5.tga", &nWidth, &nHeight, &nComponents, &format);
    glBindTexture(GL_TEXTURE_2D, textures[2]);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
glTexImage2D(GL_TEXTURE_2D,0,nComponents,nWidth, nHeight, 0,
    format, GL_UNSIGNED_BYTE, pBytes);
free(pBytes);

pBytes = gltLoadTGA("block6.tga", &nWidth, &nHeight, &nComponents, &format);
    glBindTexture(GL_TEXTURE_2D, textures[3]);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
glTexImage2D(GL_TEXTURE_2D,0,nComponents,nWidth, nHeight, 0,
    format, GL_UNSIGNED_BYTE, pBytes);
free(pBytes);
    }

void KeyPressFunc(unsigned char key, int x, int y)
{
if(key == 32)
    {
    nStep++;

    if(nStep > 5)
        nStep = 0;
    }

// Refresh the Window
glutPostRedisplay();
}

void ChangeSize(int w, int h)
{
// Calculate new clipping volume
GLfloat windowWidth;
GLfloat windowHeight;

// Prevent a divide by zero, when window is too short
// (you cant make a window of zero width).
if(h == 0)
    h = 1;

// Keep the square square
if (w <= h) 
    {
    windowHeight = 100.0f*(GLfloat)h/(GLfloat)w;
    windowWidth = 100.0f;
    }
else 
    {
    windowWidth = 100.0f*(GLfloat)w/(GLfloat)h;
    windowHeight = 100.0f;
    }

    // Set the viewport to be the entire window
    glViewport(0, 0, w, h);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

// Set the clipping volume
glOrtho(-100.0f, windowWidth, -100.0f, windowHeight, -200.0f, 200.0f);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

glLightfv(GL_LIGHT0,GL_POSITION, vLightPos);

glRotatef(30.0f, 1.0f, 0.0f, 0.0f);
glRotatef(330.0f, 0.0f, 1.0f, 0.0f);
}

int main(int argc, char* argv[])
{
glutInit(&argc, argv);
glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGBA | GLUT_DEPTH);
glutInitWindowSize(800, 600);
glutCreateWindow("3D Effects Demo");
glutReshapeFunc(ChangeSize);
glutKeyboardFunc(KeyPressFunc);
glutDisplayFunc(RenderScene);

SetupRC();

glutMainLoop();
glDeleteTextures(4,textures);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:16:41.363

> 我的电脑上确实有这个 .dll

`libGLESv2.dll`听起来有点像 OpenGL *ES 2.0*的实现。这不会执行您的代码，因为您的代码是为桌面 OpenGL 编写的。

In short, you are linking to the wrong library. On Windows, you should be linking to `OpenGL32.lib`.

# c# - 需要审查。在线 zip 归档生成期间客户端断开连接异常

> ID：12823555
> 
> 赞同：0
> 
> 时间：2012-10-10T15:56:48.900
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3

我创建了一个自定义操作结果来发送从另一台服务器下载的多个文件的压缩存档。

抱歉，有大量代码，但它确实存在。

```
using ICSharpCode.SharpZipLib.Zip;

/// <summary>
/// Downloads the files using specified URLs and continuously streams zipped result to the client 
/// </summary>
public class MultipleFileZipResult : ActionResult
{
    private readonly ILog log;
    private const int BufferSize = 32 * 1024;

    /// <summary>
    /// Initializes a new instance of the <see cref="MultipleFileZipResult"/> class.
    /// </summary>
    /// <param name="urls">The URLs to download.</param>
    /// <param name="resultFileName">Name of the result file.</param>
    /// <param name="log">The logger.</param>
    public MultipleFileZipResult(IEnumerable<DownloadableZipDescriptor> urls, string resultFileName, ILog log)
    {
        this.log = log;
        this.Urls = urls;
        this.ResultFileName = resultFileName;
    }

    /// <summary>
    /// Gets or sets the list of URLs to download.
    /// </summary>
    public IEnumerable<DownloadableZipDescriptor> Urls { get; set; }

    /// <summary>
    /// Gets or sets the name of the zip result file.
    /// </summary>
    public string ResultFileName { get; set; }

    /// <summary>
    /// Enables processing of the result of an action method by a custom type that inherits from the <see cref="T:System.Web.Mvc.ActionResult"/> class.
    /// </summary>
    /// <param name="context">The context in which the result is executed. The context information includes the controller, HTTP content, request context, and route data.</param>
    public override void ExecuteResult(ControllerContext context)
    {
        try
        {
            context.HttpContext.Response.ContentType = "application/zip";
            context.HttpContext.Response.CacheControl = "private";
            context.HttpContext.Response.Cache.SetCacheability(HttpCacheability.NoCache);
            context.HttpContext.Response.AddHeader("content-disposition", string.Format("attachment; filename=\"{0}\"", this.ResultFileName));
            context.HttpContext.Response.Flush();

            var buffer = new byte[BufferSize];

            using (var zippedUploadStream = new ZipOutputStream(context.HttpContext.Response.OutputStream))
            {
                zippedUploadStream.SetLevel(0);

                foreach (var url in this.Urls)
                {
                    Stream downloadStream = null;
                    WebResponse response = null;

                    try
                    {
                        var request = WebRequest.Create(url.DownloadUrl);
                        request.Proxy = null;
                        response = request.GetResponse();
                        downloadStream = response.GetResponseStream();

                        if (downloadStream != null)
                        {
                            var zipEntry = new ZipEntry(url.SaveFileName);
                            zippedUploadStream.PutNextEntry(zipEntry);

                            int read;
                            while ((read = downloadStream.Read(buffer, 0, buffer.Length)) > 0)
                            {
                                zippedUploadStream.Write(buffer, 0, read);
                                context.HttpContext.Response.Flush();
                            }
                        }
                    }
                    catch (Exception exception)
                    {
                        this.log.Error(exception);
                    }
                    finally
                    {
                        if (response != null)
                        {
                            response.Close();
                        }

                        if (downloadStream != null)
                        {
                            downloadStream.Close();
                        }
                    }

                    if (!context.HttpContext.Response.IsClientConnected)
                    {
                        break;
                    }
                }

                zippedUploadStream.Finish();
            }

            if (context.HttpContext.Response.IsClientConnected)
            {
                context.HttpContext.Response.Flush();
                context.HttpContext.Response.End();
            }
        }

        catch (Exception exception)
        {
            this.log.Error(exception);
            throw;
        }
    }
} 
```

一切正常，直到客户尝试从服务器所在的同一网络下载压缩存档。这很奇怪，因为出于某种原因下载对我来说很好。

唯一明显的区别是我和他的下载速度。他的下载速度约为 11 mbps，而我的下载速度为 0.4 mbps。

记录的异常：

```
System.Web.HttpException (0x800704CD): The remote host closed the connection. The error code is 0x800704CD.
   at System.Web.Hosting.IIS7WorkerRequest.RaiseCommunicationError(Int32 result, Boolean throwOnDisconnect)
   at System.Web.Hosting.IIS7WorkerRequest.ExplicitFlush()
   at System.Web.HttpResponse.Flush(Boolean finalFlush)
   at System.Web.HttpResponseWrapper.Flush()

System.Web.HttpException (0x80004005): An error occurred while communicating with the remote host. The error code is 0x800703E3\. ---> System.Runtime.InteropServices.COMException (0x800703E3): The I/O operation has been aborted because of either a thread exit or an application request. (Exception from HRESULT: 0x800703E3)
   at System.Web.Hosting.IIS7WorkerRequest.RaiseCommunicationError(Int32 result, Boolean throwOnDisconnect)
   at System.Web.Hosting.IIS7WorkerRequest.ExplicitFlush()
   at System.Web.HttpResponse.Flush(Boolean finalFlush)
   at System.Web.HttpResponseWrapper.Flush()
   at Infrastructure.MultipleFileZipResult.ExecuteResult(ControllerContext context) 
```

# tsql - 如何使用 FOR XML PATH 避免子节点中的命名空间？

> ID：12823556
> 
> 赞同：8
> 
> 时间：2012-10-10T15:56:49.683
> 
> 标签：tsql, namespaces, for-xml-path

我想直接从数据库创建一个站点地图 xml 文件（包括图像），而不需要其他过程（如转换或其他技巧）。

我的查询是：

```
;WITH XMLNAMESPACES(
    DEFAULT 'http://www.sitemaps.org/schemas/sitemap/0.9',
    'http://www.google.com/schemas/sitemap-image/1.1' as  [image] )  
SELECT  
    (SELECT             
        'mysite'    as [loc],
        (select   
            'anotherloc'
            as [image:loc]
        for XML path('image:image'), type
        )
    for xml path('url'), type
)
for xml path('urlset'), type 
```

回报：

```
<urlset xmlns:image="http://www.google.com/schemas/sitemap-image/1.1" xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  <url xmlns:image="http://www.google.com/schemas/sitemap-image/1.1" xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
    <loc>mysite</loc>
    <image:image xmlns:image="http://www.google.com/schemas/sitemap-image/1.1" xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
      <image:loc>anotherloc</image:loc>
    </image:image>
  </url>
</urlset> 
```

但我需要这个输出，没有重复的命名空间声明：

```
<urlset xmlns:image="http://www.google.com/schemas/sitemap-image/1.1" xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  <url>
    <loc>mysite</loc>
    <image:image>
      <image:loc>anotherloc</image:loc>
    </image:image>
  </url>
</urlset> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T08:53:38.697

我确信您意识到额外的 otiose 名称空间声明不会改变 XML 文档的含义，因此如果结果将由符合 XML 的工具使用，它们应该无关紧要。尽管如此，我知道有一些工具不能正确执行 XML 命名空间，并且在大型 XML 实例中，多余的重复命名空间声明会显着增加结果的大小，这可能会导致其自身的问题。

一般来说，前缀`SELECT...FOR XML`范围内的每个语句`WITH XMLNAMESPACES`都会在其结果集中的最外层 XML 元素上生成命名空间声明，在 SQL Server 直到 SQL Server 2012 的所有支持 XML 的版本中，这是无法回避的事实。

`SELECT`在您的特定示例中，您可以通过分隔s 而不是嵌套它们，并使用`ROOT`封装根元素的语法来非常接近所需的 XML ，因此：

```
DECLARE @inner XML;
WITH XMLNAMESPACES('http://www.google.com/schemas/sitemap-image/1.1' as  [image])   
SELECT @inner =
(   
    SELECT    
        'anotherloc' AS [image:loc] 
    FOR XML PATH('image:image'), TYPE 
)

;WITH XMLNAMESPACES( 
    DEFAULT 'http://www.sitemaps.org/schemas/sitemap/0.9'
)   
SELECT              
        'mysite'    AS [loc], 
        @inner
FOR XML PATH('url'), ROOT('urlset'), TYPE 
```

结果是：

```
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  <url>
    <loc>mysite</loc>
    <image:image xmlns:image="http://www.google.com/schemas/sitemap-image/1.1" xmlns="">
      <image:loc>anotherloc</image:loc>
    </image:image>
  </url>
</urlset> 
```

但是这种方法并没有为这个问题提供一个完全通用的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-12T15:54:26.293

您可以使用 UDF。例子：

```
ALTER FUNCTION [dbo].[udf_get_child_section] (
    @serviceHeaderId INT
 )
RETURNS XML

BEGIN

    DECLARE @result XML;

    SELECT @result = 
    (
        SELECT 1 AS 'ChildElement'
        FOR XML PATH('Child')
    )

    RETURN @result

END

GO

DECLARE @Ids TABLE
( 
    ID int 
)

INSERT INTO @Ids
SELECT 1 AS ID 
UNION ALL
SELECT 2 AS ID

;WITH XMLNAMESPACES (DEFAULT 'http://www...com/content')
SELECT 
    [dbo].[udf_get_child_section](ID)
FROM 
    @Ids
FOR XML PATH('Parent') 
```

结果：

```
<Parent xmlns="http://www...com/content">
  <Child xmlns="">
    <ChildElement>1</ChildElement>
  </Child>
</Parent>
<Parent xmlns="http://www...com/content">
  <Child xmlns="">
    <ChildElement>1</ChildElement>
  </Child>
</Parent> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-27T19:45:34.380

回答可能为时已晚，但这是一个快速的解决方案。

```
`声明@PageNumber Int = 1;
声明@siteMapXml XML；
; 使用 XML 命名空间 (
    'http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd' 作为“schemaLocation”，
    'http://www.w3.org/2001/XMLSchema-instance' 作为 xsi,
    'http://www.google.com/schemas/sitemap-image/1.1' 作为 [图片],
    默认“http://www.sitemaps.org/schemas/sitemap/0.9”
    )
        选择@siteMapXml = (

                                    选择   
                                       蛞蝓定位，
                                       转换（varchar（300），[图像]）作为[图像：图像/图像：位置]
                                       ,
                                       Convert(char(10), UpdatedOnUtc, 126) 作为 lastmod，
                                       'hourly' 作为 changefreq，
                                       '0.5' 优先
                                    FROM 产品(NOLOCK)
                                    其中页码 = @PageNumber

FOR XML PATH ('url'), ROOT ('urlset'))
SELECT @siteMapXml = REPLACE(CAST(@siteMapXml AS NVARCHAR(MAX)), 'xmlns:schemaLocation=', 'xsi:schemaLocation=')
选择@siteMapXml`
```

# maven - Maven 程序集包括过滤

> ID：12823567
> 
> 赞同：6
> 
> 时间：2012-10-10T15:57:23.250
> 
> 标签：maven, maven-assembly-plugin

鉴于以下依赖项包含一个 Maven 程序集 XML...

```
<dependencySet>
  <includes>
    <include>com.company.product:library:jar:*:*</include>
  </includes> 
```

...为什么上述过滤器无法包含没有分类器的 library:jar？

```
[INFO] Reading assembly descriptor: assembly/release.xml
[WARNING] The following patterns were never triggered in this artifact inclusion filter:
o  'com.company.product:library:jar:*:*' 
```

在我的模式中使用额外通配符的原因是我还有一个配置文件，它使用分类器“qa”构建我的所有库。当我激活该配置文件时，一切正常，但在默认配置文件（构建没有分类器的库）下它失败了。

如果我将过滤器更改为：

```
<include>com.company.product:library*</include> 
```

然后 maven 构建实际上失败了，出现这个错误：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-assembly-
plugin:2.3:single (make-assembly) on project java-package: Failed to create 
assembly: Error adding file 'com.company.product:library:jar:1.0.0-SNAPSHOT' 
to archive: C:\Subversion\JavaProj\library\target\classes isn't a file. -> [Help 1] 
```

有人可以建议一种模式，包括有或没有分类器的罐子吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-09-16T09:27:55.097

检查你`<dependencies>`的 pom.xml：你在 assembly-xml 中引用的依赖项也在那里吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-18T13:13:35.897

面临同样的问题。不知道为什么，但**不**`maven-assembly-plugin`包括默认范围的依赖项。将其作为修复组装。**`compile``provided`**

 **例如，检查您的`com.company.product:library`依赖项并尝试添加`<scope>provided</scope>`它们。然后，不要`*`尝试手动列出所有库。（您也可以尝试其中一个来检查解决方案）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-30T16:31:03.727

我最近在使用*maven-assembly-plugin*（版本 3.3.0）时遇到了同样的情况。我用来解决它的步骤是：

*   在使用插件的 POM.xml 中，我添加了依赖项`<scope>provided</scope>`
*   在 assembly.xml 中，在 used 中`dependencySet`：
    *   设置`<includes><include>[groupId]:[artifactId]:jar</include></includes>`为匹配依赖
    *   添加`<scope>provided</scope>`（因为默认*范围=运行时*见[https://maven.apache.org/plugins/maven-assembly-plugin/assembly.html#class_dependencySet](https://maven.apache.org/plugins/maven-assembly-plugin/assembly.html#class_dependencySet)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T20:27:54.887

我认为`com.company.product:library*`失败是因为您需要冒号：（`com.company.product:library:*`请参阅[Maven 中的本章：完整参考](http://www.sonatype.com/books/mvnref-book/reference/assemblies-sect-controlling-contents.html)）。

但是，我建议不要为您的两个配置文件（qa 和非 qa）创建不同的[组件描述符](http://maven.apache.org/plugins/maven-assembly-plugin/examples/single/using-components.html)，而不是针对这些通配符，为这两个构建配置文件创建不同的组件描述符。一种列出具有分类器的依赖关系，一种列出没有分类器的依赖关系。

诚然，XML 文件和一些冗余内容将会激增，但它会解决您的问题。**

# python - Python从文档中去除XML标签

> ID：12823568
> 
> 赞同：12
> 
> 时间：2012-10-10T15:57:23.507
> 
> 标签：python, xml, regex

我正在尝试使用 Python 从文档中删除 XML 标记，Python 是一种我是新手的语言。这是我第一次尝试使用正则表达式，whixh 确实是一个最好的想法。

```
mfile = file("somefile.xml","w")

for line in mfile:
    re.sub('<./>',"",line) #trying to match elements between < and /> 
```

那惨遭失败。我想知道应该如何使用正则表达式。

其次，我用谷歌搜索发现：[http ://code.activestate.com/recipes/440481-strips-xmlhtml-tags-from-string/](http://code.activestate.com/recipes/440481-strips-xmlhtml-tags-from-string/)

这似乎有效。但我想知道有没有更简单的方法来摆脱所有 xml 标签？也许使用元素树？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-10T16:23:38.513

最可靠的方法可能是使用[LXML](http://lxml.de/api.html)。

```
from lxml import etree
...
tree = etree.parse('somefile.xml')
notags = etree.tostring(tree, encoding='utf8', method='text')
print(notags) 
```

它将避免使用正则表达式“解析”XML 的问题，并且应该正确处理转义和所有事情。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-09-03T11:16:52.307

不需要 lxml 外部库的耶利米答案的替代方案：

```
import xml.etree.ElementTree as ET
...
tree = ET.fromstring(Text)
notags = ET.tostring(tree, encoding='utf8', method='text')
print(notags) 
```

应该适用于任何 Python >= 2.5

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-10T15:59:06.527

> 请注意，通常用正则表达式来做是不正常的。见[耶利米的回答](https://stackoverflow.com/a/12824035/284947)。

试试这个：

```
import re

text = re.sub('<[^<]+>', "", open("/path/to/file").read())
with open("/path/to/file", "w") as f:
    f.write(text) 
```

# php - PHP - Shell Exec - Powershell 和 Ajax

> ID：12823572
> 
> 赞同：0
> 
> 时间：2012-10-10T15:57:38.047
> 
> 标签：php, ajax, powershell-2.0

我有一个 powershell 脚本，我使用 php 使用 shell_exec 执行该脚本，并在有 Ajax 调用时执行此文件。（我使用的是 codeigniter 2 环境）

我用 Ajax 调用它，因为执行 ps 文件大约需要 45 秒，所以我想我会通过 Ajax 来做，这样我就可以给用户一条消息，说它正在加载。

我的 Ajax 函数如下所示：

```
<script>
    $(document).ready(function () {
        $.fn.colorbox({href:"#inline_content", inline:true, width:"650px", height:"235px", overlayClose: false, showClose: false});
        $('#cboxClose').remove();

        var csrf = $('[name="csrf_test_name"]').val();

        $.ajax({
            type: "POST",
            url: "/index.php/ajax/addAccount",
            data: { 
                    csrf_test_name: csrf
                  },
            cache:false,
            success: 
              function(data){
                  if(data == "True"){
                        window.location = "/index.php/private";  
                  }else{
                      $(window).colorbox.close();
                      alert("There was a problem creating your account.");
                  }
              },
            error: function (xhr, ajaxOptions, thrownError) {
                    alert(xhr.status);
                    alert(thrownError);
                    $('#Loading').hide();
                  }

        }); 

    });
</script> 
```

CI Ajax 控制器只是抓取数据以提供给模型。

shell exec 函数如下所示：

```
function createCompany($companyID, $companyName, $domain){

    $psCompanyName = "t_".$companyID. "_".str_replace(" ", "", $companyName);

    $psScriptPath = "c:\\inetpub\\powershellscripts\\createCompany.ps1";
    $ps = shell_exec("powershell -command $psScriptPath -companyName '".$psCompanyName."' -domain '".$domain."'");
    return $ps;

} 
```

PS1 文件执行良好。$ps 应该包含值“True”或“False”（ps1 最后有写输出“True”或写输出“False”，我已经检查并且所有任务都已成功执行。

当我用 return "True" 或 return "False" 替换 return $ps 时， sucess: 部分工作正常（我也没有从错误中得到任何东西：要么），而且当我在 Ajax 之外运行该函数时，我得到一个结果。

这是因为 Ajax 超时了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:37:58.560

固定的。它正在执行脚本，但我需要将 shell 执行代码更改为：

```
 $ps = shell_exec("powershell -command $psScriptPath -companyName '".$psCompanyName."' -domain '".$domain."' < Nul"); 
```

不确定 < Nul 位的作用，但它正在执行 powershell 但导致错误 500

# c++ - C++ 排序类数组

> ID：12823573
> 
> 赞同：17
> 
> 时间：2012-10-10T15:57:39.090
> 
> 标签：c++

C++ 排序数组类

我有一个记录以下内容的数组对象..

这是在**classone.h**

```
ClassOne
{
string name;
int data;
float valueData;
} 
```

并且构造函数是在**classone.cpp创建的**

在 main.cpp 我创建了大小为 10 的 ClassOne 数组

```
#include "classone.h"

ClassOne cone[10]; 
```

接下来是我为对象记录了几个值

现在 ClassOne 有 3 个对象

```
cone[0]
name = "hello"
data = 1
valueData = 20

cone[1]
name = "panda"
data = 2
valueData = 15

cone[2]
name = "joe"
data = 3
valueData = 25 
```

我想要实现的是做一个排序，可以通过**valueData**最高升序形式重新排列这个数组，所以..它将是

`cone[2]`然后.. `cone[0]`_`cone[1]`

但是如果我使用冒泡排序的问题，我尝试了谷歌并找到了一些，它们是按例如排序的 `int a[]={9,6,5,23,2,6,2,7,1,8};`

但我想按类数组对象排序。并将值重新排列在一起，我该如何实现。

所以当我cout时

```
-- Highest to lowest --
1) Name: Joe , Data = 3, Value =25
2) Name: Hello , Data =1 , Value = 20
3) Name: Panda, Data = 2, Value = 15 
```

**感谢大家的帮助和指导！！**

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-10T16:00:23.123

最简单的方法是使用标准库：

```
#include <algorithm>

std::sort(cone, cone + 10,
          [](ClassOne const & a, ClassOne const & b) -> bool
          { return a.value < b.value; } ); 
```

如果您愿意在全局范围内定义比较运算符，您甚至不需要 lambda：

```
bool operator<(ClassOne const & a, ClassOne const & b)
{
    return a.value < b.value;
}

std::sort(cone, cone + 10); 
```

或者您可以使比较器成为成员函数。或者，您可以为比较器函数指定一个自定义名称，并将其作为`sort`. 在比较特定于您的情况而不是“自然”的情况下，这可能是一个好主意：

```
bool ValueCmp(ClassOne const & a, ClassOne const & b)
{
    return a.value < b.value;
}

std::sort(cone, cone + 10, ValueCmp); 
```

如果您没有 C++11 支持（对于 lambda，如第一种情况），或者如果您想在多种不同情况下重用比较器，则最后一个版本很有用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-10T16:00:31.363

使用[`std::sort`](http://en.cppreference.com/w/cpp/algorithm/sort)和合适的排序函数/函子：

```
bool comp(const ClassOne& lhs, const ClassOne& rhs)
{
  return lhs.valueData < rhs.valueData;
}

std::sort(cone, cone+10, comp); 
```

或者，在 C++11 中，

```
std::sort(std::begin(cone), std::end(cone), comp); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-06-05T18:22:10.633

您可以创建一个结构来实现标头中用于对迭代项进行排序的`operator <`方法。`std::sort``<algorithm>`

```
struct One {
string name;
int data;
float valueData;

bool operator < (const one &a) const{
return valueData <a.valueData;
}

}; 
```

那么你所要做的就是制作一个这个结构的数组并使用 sort 函数对其进行排序

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-10T16:03:16.273

查看您的冒泡排序源。在某些时候，它将相互比较`int`，可能使用小于运算符 (<) 或大于运算符 (>)。这就是 sort 函数确定这两项的相对顺序的地方。通过多次重复该比较，排序函数能够确定集合的总顺序。

您需要用您自己的比较函数替换该操作。一个函数，它接受你的类的两个对象，如果第一个应该被认为小于第二个，则返回 true，如果第二个应该被认为小于第一个，则返回 false，如果它们应该被认为相等则返回 false。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-10T15:59:47.297

您必须为您的类定义一个比较运算符。您的问题不清楚如何确定一个对象是否小于另一个对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-08T05:13:57.420

尝试这个 ... ....

```
 void ClassOne::sort(ClassOne *obj,int n)       
     {
      ClassOne temp;
      int i, j;
      for (i = 0; i < n; i++)
      for (j = n - 1; j > i; j--)
        if (obj[j].valueData <obj[j - 1].valueData )
           {
            temp = obj[j];
            obj[j] = obj[j - 1];
            obj[j - 1] = temp;
         }
         }
     ...
      int main()
      {
     ClassOne obj[3],a;
        for(int i=0;i<3;i++)
         obj[i].readdata();
        a.sort(obj,3);
        ...
  } 
```

# mysql - 如何通过多个元组（行）找到共享一个属性（列）的对？

> ID：12823575
> 
> 赞同：5
> 
> 时间：2012-10-10T15:57:41.270
> 
> 标签：mysql, sql

我试图在这个简化的示例中找到喜欢同一组电视节目的用户对

假设我有一个表格，每个用户都可以在其中获得他们喜欢的每个电视节目的条目：

```
|USER | Show        |
|-----|-------------|
|001  | Lost        |
|001  | South Park  |
|002  | Lost        |
|003  | Lost        |
|003  | South Park  |
|004  | South Park  |
|005  | Lost        |
|006  | Lost        | 
```

然后我想要一个结果：

```
|USER1 |USER2 |
|------|------|
|001   |003   |
|003   |001   |
|002   |005   |
|002   |006   |
|005   |002   |
|005   |006   |
|006   |002   |
|006   |005   | 
```

或者更好的版本是：

```
|USER1 |USER2 |
|------|------|
|001   |003   |
|002   |005   |
|002   |006   |
|005   |006   | 
```

这基本上是说：用户 1 喜欢与用户 3 相同的一组节目。

我一直在玩 GROUP BY 和 JOIN，但我仍然找不到答案:(。

到目前为止，我发现使用

```
SELECT s1.User as USER1, s2.User as USER2, s1.Show as Show 
FROM Shows s1 JOIN (SELECT * FROM Shows) s2 
ON s1.Shows=s2.Shows AND s1.User!=s2.User; 
```

这产生了成对的用户和他们共同的节目。但我不知道从这里去哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:25:22.947

如果您可以接受 CSV 而不是表格结果，您可以简单地将表格分组两次：

```
SELECT GROUP_CONCAT(User) FROM (
  SELECT   User, GROUP_CONCAT(DISTINCT `Show` ORDER BY `Show` SEPARATOR 0x1e) AS s
  FROM     Shows
  GROUP BY User
) t GROUP BY s 
```

否则，您可以将上述子查询加入到自身中：

```
SELECT DISTINCT LEAST(t.User, u.User) AS User1,
             GREATEST(t.User, u.User) AS User2
FROM (
  SELECT   User, GROUP_CONCAT(DISTINCT `Show` ORDER BY `Show` SEPARATOR 0x1e) AS s
  FROM     Shows
  GROUP BY User
) t JOIN (
  SELECT   User, GROUP_CONCAT(DISTINCT `Show` ORDER BY `Show` SEPARATOR 0x1e) AS s
  FROM     Shows
  GROUP BY User
) u USING (s)
WHERE t.User <> u.User 
```

[在sqlfiddle](http://sqlfiddle.com/#!2/8ef53/2)上查看它们。

当然，如果*保证*表中不存在重复`(User, Show)`对，则可以通过从聚合中删除关键字来提高性能。*`Shows``DISTINCT``GROUP_CONCAT()`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:40:39.883

在考虑了更多之后，我想知道，如果我将这些组分组，

```
select
    group_concat( 
      User
      order by User
      separator ', '
      ) LikeViewers
  , Shows
from
(
select
      User
    , group_concat(
        concat('"', Show, '"')
        order by Show
        separator ', '
        ) Shows
  from
    Viewings
  group by
    User
) ViewerGroups
group by
  Shows 
```

产生这样的输出

```
|LikeViewers  |Shows               |
|-------------|--------------------|
|002, 005, 006|"Lost"              |
|001, 003     |"Lost", "South Park"|
|004          |"South Park"        | 
```

诚然，结果可能更可重用，但我认为这是一个有趣的想法。

[在这里提琴](http://sqlfiddle.com/#!2/1c105/23)*

# java - 错误：“另一个未命名的 CacheManager 已存在于同一 VM 中”使用 Spring、Jersey 和 ehCache

> ID：12823576
> 
> 赞同：5
> 
> 时间：2012-10-10T15:57:46.637
> 
> 标签：java, spring, jersey, ehcache

似乎有另一个进程正在加载缓存，但无法找到它（如果错误没有告诉我撒谎）。它唯一告诉我的是，我从一个名为**InputStreamConfigurationSource**的类的某个地方开始了另一个缓存？？？

有没有人遇到过这个错误？？？

我在用

*   春天 3
*   球衣 1.6/1.7
*   ehCache 2.6

堆栈跟踪

```
SEVERE: Servlet.service() for servlet [SpringDispatcher] in context with path [/FileService] threw exception [com.sun.jersey.api.container.ContainerException: Unable to create resource class com.myapp.FileStoreAccessAction] with root cause
net.sf.ehcache.CacheException: Another unnamed CacheManager already exists in the same  VM. Please provide unique names for each CacheManager in the config or do one of following:
1\. Use one of the CacheManager.create() static factory methods to reuse same CacheManager with same name or create one if necessary
2\. Shutdown the earlier cacheManager before creating new one with same name.
The source of the existing CacheManager is: InputStreamConfigurationSource [stream=java.io.BufferedInputStream@e782a8]
at net.sf.ehcache.CacheManager.assertNoCacheManagerExistsWithSameName(CacheManager.java:521)
at net.sf.ehcache.CacheManager.init(CacheManager.java:371)
at net.sf.ehcache.CacheManager.<init>(CacheManager.java:356)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at com.sun.jersey.server.spi.component.ResourceComponentConstructor._construct(ResourceComponentConstructor.java:191)
at com.sun.jersey.server.spi.component.ResourceComponentConstructor.construct(ResourceComponentConstructor.java:179)
at com.sun.jersey.server.impl.resource.PerRequestFactory$PerRequest._getInstance(PerRequestFactory.java:182)
at com.sun.jersey.server.impl.resource.PerRequestFactory$AbstractPerRequest.getInstance(PerRequestFactory.java:144)
at com.sun.jersey.server.impl.application.WebApplicationImpl$19$1.getValue(WebApplicationImpl.java:1032)
at com.sun.jersey.server.impl.inject.AbstractHttpContextInjectable$1.getValue(AbstractHttpContextInjectable.java:104)
at com.sun.jersey.server.spi.component.ResourceComponentConstructor._construct(ResourceComponentConstructor.java:196)
at com.sun.jersey.server.spi.component.ResourceComponentConstructor.construct(ResourceComponentConstructor.java:179)
at com.sun.jersey.server.impl.resource.PerRequestFactory$PerRequest._getInstance(PerRequestFactory.java:182)
at com.sun.jersey.server.impl.resource.PerRequestFactory$AbstractPerRequest.getInstance(PerRequestFactory.java:144)
at com.sun.jersey.server.impl.application.WebApplicationImpl$19$1.getValue(WebApplicationImpl.java:1032)
at com.sun.jersey.server.impl.inject.AbstractHttpContextInjectable$1.getValue(AbstractHttpContextInjectable.java:104)
at com.sun.jersey.server.spi.component.ResourceComponentInjector.inject(ResourceComponentInjector.java:222)
at com.sun.jersey.server.spi.component.ResourceComponentConstructor.construct(ResourceComponentConstructor.java:180)
at com.sun.jersey.server.impl.resource.PerRequestFactory$PerRequest._getInstance(PerRequestFactory.java:182)
at com.sun.jersey.server.impl.resource.PerRequestFactory$AbstractPerRequest.getInstance(PerRequestFactory.java:144)
at com.sun.jersey.server.impl.application.WebApplicationContext.getResource(WebApplicationContext.java:238)
at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:83)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1480)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1411)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1360)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1350)
at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

**弹簧配置**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xmlns:context="http://www.springframework.org/schema/context"
xmlns:p="http://www.springframework.org/schema/p"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context.xsd">

<!-- Enable annotation configuration -->
<context:annotation-config/>

<context:component-scan base-package="com.myapp" />

<!-- Jackson JSON ObjectMapper -->
<bean id="objectMapper" class="org.codehaus.jackson.map.ObjectMapper" />

<!-- Cache Manager -->
<bean id="ehCacheManager"
    class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean" scope="singleton">
    <property name="configLocation" value="classpath:cacheConfig.xml" />
    <property name="shared" value="true"/>
</bean>

<!-- Data Access -->
<bean id="dataAccessFactory" class="com.myapp.DataAccessFactory" />

<!-- Application Stuff -->
<bean id="fileStoreService" class="com.myapp.FileStoreService" scope="singleton">
    <constructor-arg ref="dataAccessFactory"/>
    <constructor-arg ref="ehCacheManager" />
</bean>

</beans> 
```

**网页xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
version="2.5">

<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>/WEB-INF/classes/log4j.properties</param-value>
</context-param>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:appContext.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>
<servlet>
    <servlet-name>SpringDispatcher</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>SpringDispatcher</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>
</web-app> 
```

**缓存文件**

```
<ehcache>
<cache name="FileStoreList" maxElementsInMemory="10000" eternal="false"
    overflowToDisk="false" timeToIdleSeconds="0" timeToLiveSeconds="0"
    diskPersistent="false" diskExpiryThreadIntervalSeconds="120" />
</ehcache> 
```

**文件服务类**

```
public class FileStoreService {

private final CacheManager cacheFactory;

private final DataAccessFactory factory;

public FileStoreService(@InjectParam DataAccessFactory factory, @InjectParam CacheManager ehCacheManager) {
    this.factory = factory;
    cacheFactory = ehCacheManager;
}
... 
```

**JSON 端点**

```
public class FileStoreAccessAction {

/**
 * JSON Object Mapper - pasted in via Spring
 */
@InjectParam
private ObjectMapper mapper;

@InjectParam()
private FileStoreService service;

@GET
@Produces(MediaType.APPLICATION_JSON)
public Response list() {

.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:35:43.287

与这个问题“ [Jersey @InjectParam 创建一个新对象而不是从 Spring 中获取](https://stackoverflow.com/questions/12857390/jersey-injectparam-creating-a-new-object-instead-of-taking-from-spring)”一样，使用了错误的 servlet。所以有两个容器启动，一个通过“ *ContextLoaderListener ”用于Spring，一个通过“* *ServletContainer* ”用于Jersey 。这意味着正在启动缓存的两个实例。

使用的 Servlet 容器应该是

```
 <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class> 
```

所以 Jersey 可以附加到 Spring Container

# maps - 从 URL 传递地址字符串@给定坐标打开 iOS 6 原生地图

> ID：12823579
> 
> 赞同：1
> 
> 时间：2012-10-10T15:57:55.453
> 
> 标签：maps, ios6, url-scheme

在 iOS 6 之前，您可以使用以下 URL 打开地图应用程序并传递目标地址：

```
http://maps.google.com/maps/?daddr=Tom's%20House@40.70,-74.10 
```

注意地址格式：**mystring@latitude,longitude**

您基本上告诉应用程序将标记放置在给定坐标处并在地址字段中显示“mystring”。

在 iOS 6 中，他们将主机从 maps.google.com 更改为 maps.apple.com，但现在上述地址格式不再适用：

```
http://maps.apple.com/maps/?daddr=Tom's%20House@40.70,-74.10 
```

作为daddr，您可以传递真实地址或仅传递坐标，但显然不能同时传递两者。

Apple 文档关于此：[Apple URL Scheme Reference](https://developer.apple.com/library/safari/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html#//apple_ref/doc/uid/TP40007894-SW1)不是很有帮助，因为它们没有提及如何格式化 saddr 和 daddr 字段。

有人知道这种格式/行为是否仍以某种方式得到支持？

# jqgrid - 如何将选定的行ID传递给jqGrid中的子网格的url

> ID：12823591
> 
> 赞同：1
> 
> 时间：2012-10-10T15:58:16.027
> 
> 标签：jqgrid

我需要将一个额外的参数（即 selected `row_id`）传递给我用来显示子网格的 url。但是 Firebug 控制台面板显示没有传递额外的参数。（当然服务器端代码也没有收到它）。

下面是我的代码，

```
myGrid.jqGrid({
    url: 'server.php',
    datatype: "json",
    mtype: 'POST',
    width: 900,
    height:500,
    sortname: 'productid',
    viewrecords: true,
    sortorder: "desc",
    caption: "JSON Example",
    rowNum: 100,
    subGrid: true,
    colNames: ['Product Id', 'Product Name', 'Supplier Id', 'Unit Price'],
    colModel: [
        {
        name: 'productid',
        index: 'productid',
        search: true,
        width: 55
    }, {
        name: 'productname',
        index: 'productname',
        width: 90,
        search: true
    }, {
        name: 'supplierid',
        index: 'supplierid',
        width: 100,
        search: false
    }, {
        name: 'unitprice',
        index: 'unitprice',
        width: 80,
        search: false,
        align: "right",
        search: true
    }
    ],

    subGridRowExpanded: function (subgrid_id, row_id) {
        var subgrid_table_id, pager_id;
        subgrid_table_id = subgrid_id + "_t";
        pager_id = "p_" + subgrid_table_id;
        $("#" + subgrid_id)
                .html("<table id='" + subgrid_table_id + "' class='scroll'></table><div id='" + pager_id + "' class='scroll'></div>");
        jQuery("#" + subgrid_table_id)
                .jqGrid({
                    url: "server.php",
                    datatype: "json",
                    colNames: ['Product Id', 'Product Name'],
                    width:700,
                    colModel: [{
                        name: 'productid',
                        index: 'productid',
                        width: 55

                    }, {
                        name: 'productname',
                        index: 'productname',
                        width: 90
                    }],
                    rowNum: 20,
                    sortname: 'num',
                    sortorder: "asc"
                    data: {prodcutid: row_id}

                });
    } 
```

如何将选定的行 id 传递给子网格的 url？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:15:02.577

该`data` [参数](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions)在 jqGrid 中与`jQuery.ajax`. 所以你应该更换

```
data: {prodcutid: row_id} 
```

在子网格中

```
postData: {prodcutid: row_id} 
```

# matlab - 使用matlab进行背景减法

> ID：12823592
> 
> 赞同：2
> 
> 时间：2012-10-10T15:58:21.400
> 
> 标签：matlab, foreground

我有一张图片，我只想使用那张特定图片的前景对象。现在使用我尝试过的对象，`bwlabel()`但由于连接的组件太大，只有前景图像变得很难。除此之外，我还尝试从图像中找到“大对象” `[using max(cellfun(@numel,bwconncomp(BW).PixelIdxList));]`，从而导致不理想的输出。有没有办法找到前景物体？

# cuda - 随机访问时共享内存中的预期银行冲突数

> ID：12823597
> 
> 赞同：7
> 
> 时间：2012-10-10T15:58:33.157
> 
> 标签：cuda

让`A`是共享内存中正确对齐的 32 位整数数组。

如果单个warp 尝试`A`随机获取元素，那么预期的银行冲突数量是多少？

换句话说：

```
__shared__ int A[N];          //N is some big constant integer
...
int v = A[ random(0..N-1) ];  // <-- expected number of bank conflicts here? 
```

请假设特斯拉或费米架构。我不想详述 Kepler 的 32 位和 64 位银行配置。此外，为简单起见，让我们假设所有随机数都是不同的（因此没有广播机制）。

我的直觉暗示了一个介于 4 到 6 之间的数字，但我想找到一些数学评估。

* * *

我相信这个问题可以从 CUDA 中抽象出来并呈现为一个数学问题。我将其作为生日悖论的扩展进行了搜索，但我在那里发现了非常可怕的公式并且没有找到最终公式。我希望有一个更简单的方法...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T14:56:06.517

在数学上，这被认为是一个“箱子里的球”问题——32 个球被随机放入 32 个箱子中。您可以枚举可能的模式并计算它们的概率以确定分布。尽管模式的数量很大，但幼稚的方法是行不通的：（63！）/（32！）（31！）“几乎”是五分之一。

如果您递归地构建解决方案并使用条件概率，则可以解决问题。

查找 Charles J. Corrado 撰写的名为“多项式/狄利克雷和多元超几何频率的最大值、最小值和范围的精确分布”的论文。

下面，我们从最左边的桶开始计算每个可能落入其中的球的概率。然后我们向右移动一个，并在给定已经使用的球和桶的数量的情况下确定可能在该桶中的每个球的条件概率。

为 VBA 代码道歉，但是当我有动力回答时，我只有 VBA 可用:)。

```
Function nCr#(ByVal n#, ByVal r#)
    Static combin#()
    Static size#
    Dim i#, j#

    If n = r Then
        nCr = 1
        Exit Function
    End If

    If n > size Then
        ReDim combin(0 To n, 0 To n)
        combin(0, 0) = 1
        For i = 1 To n
            combin(i, 0) = 1
            For j = 1 To i
                combin(i, j) = combin(i - 1, j - 1) + combin(i - 1, j)
            Next
        Next
        size = n
    End If

    nCr = combin(n, r)
End Function

Function p_binom#(n#, r#, p#)
    p_binom = nCr(n, r) * p ^ r * (1 - p) ^ (n - r)
End Function

Function p_next_bucket_balls#(balls#, balls_used#, total_balls#, _
  bucket#, total_buckets#, bucket_capacity#)

    If balls > bucket_capacity Then
        p_next_bucket_balls = 0
    Else
        p_next_bucket_balls = p_binom(total_balls - balls_used, balls, 1 / (total_buckets - bucket + 1))
    End If
End Function

Function p_capped_buckets#(n#, cap#)
    Dim p_prior, p_update
    Dim bucket#, balls#, prior_balls#

    ReDim p_prior(0 To n)
    ReDim p_update(0 To n)

    p_prior(0) = 1

    For bucket = 1 To n
        For balls = 0 To n
            p_update(balls) = 0
            For prior_balls = 0 To balls
                p_update(balls) = p_update(balls) + p_prior(prior_balls) * _
                   p_next_bucket_balls(balls - prior_balls, prior_balls, n, bucket, n, cap)
            Next
        Next
        p_prior = p_update
    Next

    p_capped_buckets = p_update(n)
End Function

Function expected_max_buckets#(n#)
    Dim cap#

    For cap = 0 To n
        expected_max_buckets = expected_max_buckets + (1 - p_capped_buckets(n, cap))
    Next
End Function

Sub test32()
    Dim p_cumm#(0 To 32)
    Dim cap#

    For cap# = 0 To 32
        p_cumm(cap) = p_capped_buckets(32, cap)
    Next

    For cap = 1 To 32
        Debug.Print "    ", cap, Format(p_cumm(cap) - p_cumm(cap - 1), "0.000000")
    Next
End Sub 
```

对于 32 个球和水桶，我得到的预期最大球数约为 3.532941。

与 ahmad 比较的输出：

```
 1            0.000000
           2            0.029273
           3            0.516311
           4            0.361736
           5            0.079307
           6            0.011800
           7            0.001417
           8            0.000143
           9            0.000012
           10           0.000001
           11           0.000000
           12           0.000000
           13           0.000000
           14           0.000000
           15           0.000000
           16           0.000000
           17           0.000000
           18           0.000000
           19           0.000000
           20           0.000000
           21           0.000000
           22           0.000000
           23           0.000000
           24           0.000000
           25           0.000000
           26           0.000000
           27           0.000000
           28           0.000000
           29           0.000000
           30           0.000000
           31           0.000000
           32           0.000000 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T00:28:13.960

我会尝试一个数学答案，虽然我还没有完全正确。

您基本上想知道，给定一个扭曲中的随机 32 位字索引到一个对齐的`__shared__`数组中，“一个扭曲中映射到单个存储库的最大地址数的[预期值是多少？”](http://en.wikipedia.org/wiki/Expected_value)

如果我考虑类似于散列的问题，那么它与将散列到单个位置的预期最大项目数有关，并且本文档显示了散列 n[的 O(log n / log log n) 数量的上限](http://www.math.dartmouth.edu/archive/m19w03/public_html/Section6-5.pdf)项放入 n 个桶中。（数学很复杂！）。

对于 n = 32，计算结果约为 2.788（使用自然对数）。没关系，但在这里我修改了 ahmad 的程序以凭经验计算预期的最大值（为了清晰起见，还简化了代码和修改的名称等，并修复了一些错误）。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <algorithm>
#define NBANK 32
#define WARPSIZE 32
#define NSAMPLE 100000

int main(){  
    int i=0,j=0;

    int *bank=(int*)malloc(sizeof(int)*NBANK);
    int *randomNumber=(int*)malloc(sizeof(int)*WARPSIZE);
    int *maxCount=(int*)malloc(sizeof(int)*(NBANK+1));
    memset(maxCount, 0, sizeof(int)*(NBANK+1));

    for (int i=0; i<NSAMPLE; ++i) {
        // generate a sample warp shared memory access
        for(j=0; j<WARPSIZE; j++){
            randomNumber[j]=rand()%NBANK;
        }

        // check the bank conflict
        memset(bank, 0, sizeof(int)*NBANK);
        int max_bank_conflict=0;
        for(j=0; j<WARPSIZE; j++){
            bank[randomNumber[j]]++;       
        }

        for(j=0; j<WARPSIZE; j++) 
            max_bank_conflict = std::max<int>(max_bank_conflict, bank[j]);

        // store statistic
        maxCount[max_bank_conflict]++;
    }

    // report statistic
    printf("Max conflict degree %% (%d random samples)\n", NSAMPLE);
    float expected = 0;
    for(i=1; i<NBANK+1; i++) {
        float prob = maxCount[i]/(float)NSAMPLE;
        printf("%02d -> %6.4f\n", i, prob);
        expected += prob * i;
    }
    printf("Expected maximum bank conflict degree = %6.4f\n", expected);
    return 0;
} 
```

使用在程序中找到的百分比作为概率，预期的最大值是 products 的总和`sum(i * probability(i))`，`i`从 1 到 32。我计算的预期值为 3.529（匹配 ahmad 的数据）。它不是很遥远，但 2.788 应该是一个上限。由于上限以大 O 表示法给出，我想有一个常数因子被遗漏了。但目前就我所知。

开放性问题：这个常数因素足以解释它吗？是否可以计算 n = 32 的常数因子？调和这些，和/或找到一个封闭形式的解决方案来解决具有 32 个银行和 32 个并行线程的预期最大银行冲突程度会很有趣。

这是一个非常有用的话题，因为当共享内存寻址是有效随机的时，它可以帮助建模和预测性能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-11T08:47:35.333

我假设 fermi 32-bank 共享内存，其中每 4 个后续字节存储在后续银行中。使用以下代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#define NBANK 32
#define N 7823
#define WARPSIZE 32

#define NSAMPLE 10000

int main(){
    srand ( time(NULL) );

    int i=0,j=0;
    int *conflictCheck=NULL;
    int *randomNumber=NULL;
    int *statisticCheck=NULL;

    conflictCheck=(int*)malloc(sizeof(int)*NBANK);
    randomNumber=(int*)malloc(sizeof(int)*WARPSIZE);
    statisticCheck=(int*)malloc(sizeof(int)*(NBANK+1));
    while(i<NSAMPLE){
        // generate a sample warp shared memory access
        for(j=0; j<WARPSIZE; j++){
            randomNumber[j]=rand()%NBANK;
        }
        // check the bank conflict
        memset(conflictCheck, 0, sizeof(int)*NBANK);
        int max_bank_conflict=0;
        for(j=0; j<WARPSIZE; j++){
            conflictCheck[randomNumber[j]]++;
            max_bank_conflict = max_bank_conflict<conflictCheck[randomNumber[j]]? conflictCheck[randomNumber[j]]: max_bank_conflict;
        }
        // store statistic
        statisticCheck[max_bank_conflict]++;

        // next iter
        i++;
    }
    // report statistic
    printf("Over %d random shared memory access, there found following precentages of bank conflicts\n");
    for(i=0; i<NBANK+1; i++){
        //
        printf("%d -> %6.4f\n",i,statisticCheck[i]/(float)NSAMPLE);
    }
    return 0;
} 
```

我得到以下输出：

```
Over 0 random shared memory access, there found following precentages of bank conflicts
0 -> 0.0000
1 -> 0.0000
2 -> 0.0281
3 -> 0.5205
4 -> 0.3605
5 -> 0.0780
6 -> 0.0106
7 -> 0.0022
8 -> 0.0001
9 -> 0.0000
10 -> 0.0000
11 -> 0.0000
12 -> 0.0000
13 -> 0.0000
14 -> 0.0000
15 -> 0.0000
16 -> 0.0000
17 -> 0.0000
18 -> 0.0000
19 -> 0.0000
20 -> 0.0000
21 -> 0.0000
22 -> 0.0000
23 -> 0.0000
24 -> 0.0000
25 -> 0.0000
26 -> 0.0000
27 -> 0.0000
28 -> 0.0000
29 -> 0.0000
30 -> 0.0000
31 -> 0.0000
32 -> 0.0000 
```

我们可以得出结论，随机访问最有可能发生 3 到 4 路冲突。您可以使用不同`N`的（数组中的元素数量）、`NBANK`（共享内存中的银行数量）、`WARPSIZE`（机器的扭曲大小）和`NSAMPLE`（为评估模型而生成的随机共享内存访问的数量）来调整运行。

# c++ - Linux 上 C++ 中 usleep(0) 的效果

> ID：12823598
> 
> 赞同：11
> 
> 时间：2012-10-10T15:58:34.670
> 
> 标签：c++, linux, usleep

[usleep](http://pubs.opengroup.org/onlinepubs/7908799/xsh/usleep.html)的文档指出调用`usleep(0)`无效。但是，在我的系统（RHEL 5.2）上运行下面的 C++ 代码小片段，我发现它实际上看起来与`usleep(1)`. 这是意料之中的吗？如果是这样，为什么文档与我在现实生活中看到的内容之间存在差异？

**展品 A**

代码：

```
#include <unistd.h>

int main()
{
    for( int i = 0; i < 10000; i++ )
    {
        usleep(1);
    }
} 
```

输出：

```
$ time ./test
real   0m10.124s
user   0m0.001s
sys    0m0.000s 
```

**展品 B**

代码：

```
#include <unistd.h>

int main()
{
    for( int i = 0; i < 10000; i++ )
    {
        usleep(1);
        usleep(0);
    }
} 
```

输出：

```
$ time ./test
real   0m20.770s
user   0m0.002s
sys    0m0.001s 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-10T16:08:26.100

*从技术上讲*，它应该没有效果。但是您必须记住，传递的值用作*最小值*，而不是绝对值，因此系统可以自由地使用可能的最小间隔。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-26T08:32:19.273

我只是想指出这里使用的时间命令。如果你想检查你的程序内存、CPU、时间统计，你应该使用`/usr/bin/time`而不是只使用命令。`time`当您在没有完整路径的情况下调用 time 时，将调用内置 time 命令。看看区别。

# 没有完整路径：

```
# time -v ./a.out
-bash: -v: command not found

real    0m0.001s
user    0m0.000s
sys     0m0.001s 
```

# 完整路径：

```
# /usr/bin/time -v ./a.out
Command being timed: "./a.out"
User time (seconds): 0.00
System time (seconds): 0.00
Percent of CPU this job got: 0%
Elapsed (wall clock) time (h:mm:ss or m:ss): 0:10.87
Average shared text size (kbytes): 0
Average unshared data size (kbytes): 0
Average stack size (kbytes): 0
Average total size (kbytes): 0
Maximum resident set size (kbytes): 0
Average resident set size (kbytes): 0
Major (requiring I/O) page faults: 0
Minor (reclaiming a frame) page faults: 220
Voluntary context switches: 10001
Involuntary context switches: 1
Swaps: 0
File system inputs: 0
File system outputs: 0
Socket messages sent: 0
Socket messages received: 0
Signals delivered: 0
Page size (bytes): 4096
Exit status: 0 
```

用于手动和`man time`用于内置时间信息。 `/usr/bin/time``help time`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T16:08:17.487

我必须查看源代码以确保，但我的猜测是它并不是完全“没有效果”，但它可能仍然小于`usleep(1)`- 仍然存在函数调用开销，即使在紧密循环中也可以测量库调用只是检查它的参数并立即返回，避免了更常见的设置计时器/回调和调用调度程序的过程。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-09T22:03:00.317

`usleep()`并被`sleep()`翻译成`nanosleep()`系统调用。试试`strace`你的程序，你会看到的。从[nanosleep() 手册](http://man7.org/linux/man-pages/man2/nanosleep.2.html)：

```
 nanosleep() suspends the execution of the calling thread until either
   at least the time specified in *req has elapsed, or the delivery of a
   signal that triggers the invocation of a handler in the calling
   thread or that terminates the process. 
```

所以我认为 ulseep(0) 会产生中断和上下文切换。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-10T16:08:01.703

该文档是 1997 年的，不确定它是否适用于当前的 RHEL5，我的 Redhat dev systems man page for usleep 并未表明睡眠时间为 0 无效。

您传递的参数是睡眠的最短时间。不能保证线程会在指定的时间后唤醒。鉴于调度程序的特定动态，它可能会导致比预期更长的延迟。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-10T20:53:31.980

它还取决于 udelay 是否在短时间内实现为繁忙循环。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-08T01:51:46.887

根据我的经验，它有一个效果：它正在调用中断。
这有助于在多线程编程中以最少的时间释放处理器。

# mongodb - Inno Setup 安装先决条件

> ID：12823599
> 
> 赞同：3
> 
> 时间：2012-10-10T15:58:38.203
> 
> 标签：mongodb, inno-setup

我正在通过 Inno Setup 创建安装程序。我看到很多关于如何检测先决条件存在的代码示例，但是当我找不到它时，没有关于如何实际安装先决条件的代码示例。我确信这非常简单，但是我该如何安装先决条件呢？特别是，我希望将`mongodb`作为服务安装为我的应用程序的先决条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T07:55:32.360

查看框架的[CodePrepareToInstall.iss](https://github.com/jrsoftware/issrc/blob/master/Examples/CodePrepareToInstall.iss)示例脚本（包含在 Inno 中）。一旦你检测到你需要进行安装，在适当的点（在脚本中显示）你只是`ExtractTemporaryFile`先决条件的安装程序，然后`Exec`是它，检查是否有任何错误和 reboot-required-before-main-app-install根据需要的条件。

有关几个常见先决条件（包括下载支持）的更深入示例，请参阅[此页面](http://tonaday.blogspot.co.nz/2011/01/inno-setup-preparetoinstall-scripts.html)。

# javascript - 阻止/允许资源加载到 Internet Explorer

> ID：12823610
> 
> 赞同：1
> 
> 时间：2012-10-10T15:59:11.190
> 
> 标签：javascript, internet-explorer, trigger.io, ieaddon, forge

是否可以使用 Forge Trigger.IO 框架为 Internet Explorer 开发一个扩展，在加载之前检查资源或 HTTP 请求并任意决定允许或阻止它们？

我假设这样做的一种可能方法是在“开始”上运行一个内容脚本并添加一个侦听器来检查任何加载资源，但应该有更好的方法来做到这一点。（即 Firefox 的[nsIContentPolicy](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIContentPolicy)或 Chrome 的[webRequest API](http://developer.chrome.com/extensions/webRequest.html)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:20:12.270

不幸的是，目前 forge 无法做到这一点。

在 IE 内容脚本仅在页面加载完成并且所有页面资源都已加载后才注入，因此您将无法拦截资源加载事件。

不过，这将是一个不错的功能，我已将其添加到我们的愿望清单中。

# java - 使用@Parameter 注解或 ITestContext 读取 TestNG 配置文件？

> ID：12823611
> 
> 赞同：5
> 
> 时间：2012-10-10T15:59:16.220
> 
> 标签：java, automated-tests, testng

我发现在 testng xml 配置文件中读取参数有两种方法：

1.  使用`@Parameter`注解并在注解后定义参数名称

2.  用作`ITestContext`测试类、DataProvider 或 Factory 的参数，并使用`getCurrentXmlTest()`and`getParameter()`来读取参数。

出于任何原因，这些方式中的任何一种是否更适合另一种方式？还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T13:26:10.210

我认为区别在于范围。如果我需要在我的所有测试套件中使用相同的参数，例如。env 变量，我将在实现 ITestListener 或 ISuiteListener （用于套件范围）的侦听器中使用它，然后使用 ITestContext/Suitecontext 将值应用于我的所有测试下`<test>` 或下`<suite>`

但是，如果我需要针对特定​​测试用例的非常具体的参数，那么我会在这些特定测试用例上使用 @Parameter 注释。

此外，@Parameter 只能采用简单的值，因此在某些用例中，您的测试可能需要基于某些参数值的不同对象（而不是字符串）。在这种情况下，我更喜欢数据提供者，读取参数值（您的第二个选项，尽管我认为 testclass 的参数不正确），创建对象然后将其提供给测试。（例如，属性文件的名称可能是一个参数值，它是根据属性文件中的数据读取和创建的对象，并作为不同的测试数据提供给测试）。

# php - 高级分类查询 Wordpress

> ID：12823612
> 
> 赞同：1
> 
> 时间：2012-10-10T15:59:17.027
> 
> 标签：php, wordpress, taxonomy

我正在使用 wordpress 和商业列表。我在美国各地有大约 5000 个企业列表。每个企业列表都有一个用于州、县和市以及品牌的自定义字段。

我的企业列表是汽车经销商，每个经销商都加载到我的 wordpress 数据库中，名为经销商的自定义帖子类型。

我创建了两个分类法，称为地理（逻辑结构 = 州->县->市）和品牌（即本田、丰田），以便能够通过不同的查询选项查看经销商。我的理解是，我可以使用参数在地理和品牌分类之间进行查询，并且我已经完成了这部分工作。例如，www.xyz.com/dealers/?geography=alabama&brands=toyota。此查询将列出我的数据库中所有经销商的类别页面，这些经销商位于阿拉巴马州，品牌为 Toyota。

我现在需要为数百个不同的地理和品牌查询选项创建动态类别页面。以下是选项：

1.  美国各州的所有经销商
2.  美国各县的所有经销商
3.  美国各城市的所有经销商
4.  每个品牌的所有经销商
5.  美国每个品牌和州的所有经销商
6.  美国各品牌和县的所有经销商
7.  美国各品牌和城市的所有经销商

我假设我可以在 wordpress 中为上述每个选项创建一个类别模板。
但我只是有点困惑这将如何在 wordpress 中工作。

有人可以为我提供一些关于这如何用于创建类别页面的指导。其次，这是我想要完成的一个很好的解决方案还是有更好的方法？

还有一点需要注意的是，在查看不同的类别页面时，我需要某些导航项来特定于该查询。

例如，对于地理，导航的逻辑钻取将从州到县再到城市。因此，当我查看阿拉巴马州类别页面时，下一级导航需要是阿拉巴马州在我的数据库中有经销商记录的县。同样，当查看加利福尼亚类别页面中的经销商时，下一级导航需要是加利福尼亚州在我的数据库中有经销商记录的县。

非常感谢您的帮助。

# c# - OutofMemory 异常对象数组大小

> ID：12823615
> 
> 赞同：0
> 
> 时间：2012-10-10T15:59:27.400
> 
> 标签：c#, .net, data-structures

我正在尝试将电子表格数据捕获到二维数组中。我正在使用 VSTO。

```
int rc = 1048576;
int cc = 1638;

string[,] arr = new string[rc, cc]; 
```

最后一行抛出内存不足异常。我想显示消息告诉用户只能捕获“X”元素。

检查 MSDN 并提到行数限制为 16,777,216。数据表没有列数限制。无法找到二维数组的限制。

我的问题不在于为什么例外。我正在寻找的是，如果您正在进行 VSTO 开发，并且必须在 DataTable 中捕获工作表以执行 In-Memory 连接等，您将需要这样做：

```
string[,] arr = new string[rc, cc]; 
Microsoft.Office.Interop.Excel.Range selection 
arr = selection.Value as string[,]; 
```

然后将该数组中的数据复制到数据表中。现在，用户应该选择的元素数量的理想限制是什么。所以我可以设置行数/列数限制并在选择超过此条件时显示消息。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-10T16:09:54.923

让我们算一下。您正在尝试分配一个包含 1048576 * 1638 = 1717567488 个元素的二维字符串数组。x64 上的字符串引用大小为 8 字节 => 总共 1717567488 * 8 = 13740539904 字节。这大约是**13 GB**的连续内存空间。CLR 的单个分配的最大大小为 2GB，因此您将收到 OutOfMemoryException，因为无法分配这样的单个块。

请注意，即使所有字符串都是 1-2 个字符长，这样数量的字符串也会占用 30GB 的字符串值以及引用。除了`OutOfMemoryException`你期望得到的还有什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:54:31.593

Aleks，您要求限制您的内存分配。让我建议改变你的观点并 **限制你的**输入

*   1.1 仅使用用户选择的单元格
*   1.2 仅使用 xl.worksheet 中确实使用过的单元格

除了您的问题，我建议您注意和的区别`Range.Value`：`Range.Value2`Range.Value 包含用户输入，例如公式`=SUM(A1:B10)`，而 Range.Value2 包含该公式的结果，例如`10`。

1.1 仅使用用户选择的单元格如此[处](https://stackoverflow.com/questions/3978179/how-do-i-find-which-cells-are-selected-on-an-excel-worksheet)
所述使用 1.2 仅使用 xl.worksheet 中确实使用的单元格 使用该属性。 也许会更好。 代码示例：`Range userSelectedRange = Application.Selection;`

`Worksheet.Cells.SpecialCells`
`Worksheet.UsedRange`

```
int lastUsedRowIndex = xlWorksheet.Cells.SpecialCells(XlCellType.xlCellTypeLastCell).Row;
int lastUsedColIndex = xlWorksheet.Cells.SpecialCells(XlCellType.xlCellTypeLastCell).Column;
string rangeString = string.Format("A0:{0}{1}", SomeIndexToExcelColConverterFunc(lastUsedColIndex), lastUsedRowIndex));
Xl.Range range = xlWorksheet.Range[rangeString];
object[,] objectMatrix = range.Value2 as object[,];
Marshal.ReleaseComObject(range);    
// convert to string here if needed 
```

# django - 在 Django 上自定义已安装的应用程序

> ID：12823619
> 
> 赞同：0
> 
> 时间：2012-10-10T15:59:34.643
> 
> 标签：django, django-apps, installed-applications, django-guardian

在我的服务器中，我安装了很多应用程序，例如 facebook_connect、userena、guardian 等等...

例如，我意识到如果我自定义：

django-userena/userena/模板/userena/emails/activation_email_message.txt

```
{% load i18n %}{% autoescape off %}{% load url from future %}
{% if not without_usernames %}{% blocktrans with user.username as username %}Dear {{ username }},{% endblocktrans %}
{% endif %}
{% blocktrans with site.name as site %}Thank you for signing up at {{ site }}.{% endblocktrans %}

{% trans "To activate your account you should click on the link below:" %}

{{ protocol }}://{{ site.domain }}{% url 'userena_activate' activation_key %}

{% trans "Thanks for using our site!" %}

{% trans "Sincerely" %},
{{ site.name }}
{% endautoescape %} 
```

对于指定的网站，并且我在同一台服务器中有超过 4 个，我会在我的 django_site 中弄得一团糟。

我的问题是：

如何在不完全改变原有 django_site 的情况下自定义一些已安装应用程序中的模板或模型？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:05:12.030

您不能更改模型，但可以覆盖模板。

在与 相同的目录中`manage.py`，您将有一个名为 的目录`templates`，在那里，您可以创建以下文件夹层次结构，并放置您的自定义模板。

`templates/userena/emails/activation_email_message.txt`

# android - 为对话框定义我的自定义主题

> ID：12823622
> 
> 赞同：0
> 
> 时间：2012-10-10T15:59:47.280
> 
> 标签：android, android-dialog, android-theme

我终于明白了主题是什么以及如何将它们应用到对话框中。我想创建一个主题，我需要你的帮助来实现我想要的。我基本上想创建一个主题以应用于警报对话框和整个应用程序中的对话框。

在我的主题中，我需要定义标题背景颜色、标题文本大小、主体背景颜色和主体文本大小。我应该使用哪些物品？

这是证明我投入了一些工作的起始代码:)

```
<?xml version="1.0" encoding="utf-8"?> 
<resources>     
<style name="myGeneralDialogStyle" parent="@android:style/Theme.Dialog">    
     <item name="?"></item>     
</style> 
</resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:03:55.947

如果你得到的只是上面显示的 XML，那么如果你的问题是关于这个“？” 部分登录`name="?"`，那么您在这里只能使用已**定义**的属性。在你的情况下，你可以使用`android:*`那些。如果您需要定义自己的属性，请参见此处：[Declaring a custom android UI element using XML](https://stackoverflow.com/questions/2695646/declaring-a-custom-android-ui-element-using-xml)

# java - Grails：将属性动态放入 ConfigurationHolder.config 的替代语法

> ID：12823632
> 
> 赞同：0
> 
> 时间：2012-10-10T16:00:20.853
> 
> 标签：java, grails, groovy

所以我正在尝试编写一个函数，该函数本质上将遍历字符串列表（配置键）并将关联的值（来自表单）放入`ConfigurationHolder.config`对象中。这是为了允许管理员用户通过表单修改配置值。

我宁愿不必像这样硬编码所有属性：

```
config.my.first.property="foo"
config.my.second.property="bar"
config.etc="baz" 
```

我一直在尝试做的事情是：

```
String key = "my.first.property"
Object value = FOO
config.putAt(key, value) 
```

但是当我稍后使用时请求该值

```
config.my.first.property 
```

该值未设置为更新后的值。

有什么方法可以做我所描述的，或者我必须对每个属性进行硬编码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:22:22.667

您必须拆分“ `.`”上的键并自己深入了解各个级别。幸运的是，通过明智地使用 Groovy 的数组切片和方法，这非常容易`inject`——这适用于任何键（除了空字符串或包含两个连续点的键等异常情况）：

```
String key = "my.first.property"
Object value = FOO

// split the key into its components
def keyParts = key.split(/\./)
// do config.my.first (i.e. up to the last-but-one component) and then set
// "property" (the last component) on the resulting ConfigObject
keyParts[0..<(keyParts.size() - 1)].inject(config) {
  conf, k -> conf."${k}"
}."${keyParts[-1]}" = value 
```

# ios - Cocos2d：当游戏退出然后恢复时CCDirector会发生什么

> ID：12823636
> 
> 赞同：1
> 
> 时间：2012-10-10T16:00:25.030
> 
> 标签：ios, cocos2d-iphone

我想知道当用户从应用程序中存在时，由于以下原因之一，CCDirector 暂停和恢复呼叫会发生什么：

*   用户点击了 iPhone 主按钮并返回到 iPhone 主屏幕
*   用户点击了 Cocos2d 应用程序中的一个链接，该链接打开了一个类似这样的 URL：[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.youtube.com"]];

我注意到 CCDirector 暂停和恢复以某种方式受到影响，但我不明白对这些方法的隐藏调用在哪里。

换句话说，在我的游戏中，当用户按下暂停按钮时，我调用了 **[[CCDirector sharedDirector] pause]**方法，它似乎工作正常。但是当用户出于两个原因之一退出应用程序然后重新进入应用程序时，暂停失败（游戏已恢复），因为我认为应用程序以某种方式在某些“onEnter”方法调用 CCDirector resume（或相似的）。我在工作区中搜索但找不到。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T20:33:40.843

它们位于 AppDelegate.m 的底部

**Cocos2d 2.0**

[https://github.com/cocos2d/cocos2d-iphone/blob/develop-v2/templates/Xcode4_templates/cocos2d%20iOS.xctemplate/AppDelegate.m](https://github.com/cocos2d/cocos2d-iphone/blob/develop-v2/templates/Xcode4_templates/cocos2d%20iOS.xctemplate/AppDelegate.m)

**Cocos2d 1.0**

[https://github.com/cocos2d/cocos2d-iphone/blob/develop/templates/Xcode4_templates/cocos2d.xctemplate/AppDelegate.m](https://github.com/cocos2d/cocos2d-iphone/blob/develop/templates/Xcode4_templates/cocos2d.xctemplate/AppDelegate.m)

# objective-c - 获取 NSMethodSignature 的返回类型

> ID：12823637
> 
> 赞同：2
> 
> 时间：2012-10-10T16:00:27.230
> 
> 标签：objective-c

我需要检查 an 的返回类型`NSInvocation`以查看它是否是一个对象（从那里我可以`isKindOfClass:`用来检查对象的确切类型）。我看到`NSInvocation`有一个`NSMethodSignature`，而后者又有`methodReturnType`。但是，文档给出了以下警告：

> 此编码是特定于实现的，因此应用程序应谨慎使用它。

那么，如何安全地检查返回类型是否为对象？是否有解码变体`@encode(type-name)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:07:41.663

简而言之，你不能。至少，不是 100% 的保真度。

对于像双精度、浮点数、整数、ID 等这样的简单类型……您可以检查返回类型，然后以特定于平台的方式处理它。对于更复杂的类型——结构、C++ 对象等……——你可以尝试弄清楚 C ABI 究竟是如何在每个 ABI 的基础上布置数据的，但是您最终将在此过程中重新发明编译器。

幸运的是，有一些非常全面的例子来说明这一切是如何工作的。PyObjC 和 RubyCocoa (MacRuby) 项目都是开源的，并且为任意返回值提供了相对完整的支持。相对地; 你仍然会被复杂的类型所困扰。

总而言之，Objective-C 在调度时是纯动态的，但在参数传递和返回值方面，它是一种 C 派生的静态语言。

* * *

错过了你的最后一句话。在咖啡之前，derp很浓。

这是[可能由 . 返回的字符集`methodReturnType`](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html#//apple_ref/doc/uid/TP40008048-CH100)。

你会寻找`@`. 鉴于`methodReturnType`返回 a `const char *`，您可能会遇到对象返回类型返回的不仅仅是`@`;的情况。可能附加了修饰符。您必须测试大量方法的返回类型以查看是否确实如此（所述元数据的生成多年来发生了变化，并且还受到方法声明中使用各种关键字的影响）。

但是，*大多数时候* `@`足以断定它是一个对象返回类型。 `Most`将增加您自己声明的方法的真实性（从编译器的角度来看，希望您不要做任何非常奇怪的事情）。

# java - 在spring中创建异步事件

> ID：12823639
> 
> 赞同：3
> 
> 时间：2012-10-10T16:00:40.877
> 
> 标签：java, spring, spring-mvc

我正在考虑使用 spring 3.1 发布事件并使用侦听器来使用这些事件。但是我读过这些事件是同步的，是否可以使它们异步，也许使用 @async 注释？

我真的想在 Java/Spring 中创建一个事件驱动的架构——发布和消费事件，你认为 Spring/Java 就足够了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:35:19.650

在这种情况下，使用[Spring 集成将是完美的。](http://www.springsource.org/spring-integration)它提供了不同类型的消息传递解决方案。

[下面是关于事件驱动消费者](http://www.eaipatterns.com/EventDrivenConsumer.html)的一点解释 ：

这是与您的需求相关的 Spring 集成示例：

1.  [消息传递端点](http://static.springsource.org/spring-integration/docs/2.0.0.M3/spring-integration-reference/html/endpoint.html)
2.  [更多示例](http://www.springbyexample.org/static/1.2/html/simple-spring-integration-code-example.html)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-23T19:28:37.130

你看过[Spring Reactor](http://spring.io/blog/2013/05/13/reactor-a-foundation-for-asynchronous-applications-on-the-jvm)项目吗？

这是一段摘录：

> **反应堆有什么用？**
> 
> 虽然你可以让 Reactor 做很多事情，因为它固有的灵活性，它真的被设计为在执行相当小的无状态异步处理块时需要高吞吐量的应用程序的基础框架。现代应用程序中的大量非人为生成的数据很容易超过传统的单线程阻塞设计模型。从生成位置信息流的移动应用程序到发送大量几何数据的计算机化制造机器，再到挖掘实时日志以生成业务指标的大数据应用程序：现代数据驱动的应用程序需要比传统应用程序更好的资源利用率和更高的吞吐量命令式的，阻塞的应用程序通常可以提供。

# xna-4.0 - 试图使高斯模糊更强/更模糊 - XNA 4.0 HLSL

> ID：12823640
> 
> 赞同：3
> 
> 时间：2012-10-10T16:00:45.433
> 
> 标签：xna-4.0, blur, hlsl, gaussian, pixel-shader

我正在尝试在 Texture2D 上实现高斯模糊，并且在尝试找到任何好的教程等时遇到了麻烦。

我终于设法找到了一段很好的一次性示例代码，它明显地模糊了图像一点点，但我希望能够随着时间的推移使它变得更模糊和更少模糊，我不太了解高斯模糊如何实现这一点。

我想这一定与 PixelKernel 和 BlurWeights 有关，但我真的不知道这些值的用途/改变它们的作用。

所以我的问题基本上是：

这是在 HLSL/XNA 中进行高斯模糊的好方法吗？如果是这样，我如何使场景更模糊？作为额外的奖励，您能否指出我对高斯模糊在着色器上下文中如何工作的一个很好的解释？

谢谢你的时间，

TS

附言

刚刚意识到我应该包括代码：

```
sampler2D Tex0;

float TintColour;
int TexHeight = 640;
int TexWidth = 480;

const int KernelSize = 7;
float2 PixelKernel[7] = 
{
    {-3, 0},
    {-2, 0},
    {-1, 0},
    {0, 0},
    {1, 0},
    {2, 0},
    {3, 0},
};

const float BlurWeights[7] = 
{
    0.064759,
    0.120985,
    0.176033,
    0.199471,
    0.176033,
    0.120985,
    0.064759,
};

struct VertexShaderOutput
{
    float2 TexCoord0 : TEXCOORD0;
};

float4 PixelShaderFunction(VertexShaderOutput input) : COLOR0
{
float4 colour = 0;

float2 TexSize = float2(1.0/TexHeight, 1.0/TexWidth);

for(int p = 0; p < 7; p++)
{
    colour += tex2D(Tex0, input.TexCoord0 + (PixelKernel[p] * TexSize)) * BlurWeights[p];
}

colour.a = 1.0f;

return colour;
}

technique Technique1
{
    pass Pass1
    {
        // TODO: set renderstates here.

        PixelShader = compile ps_2_0 PixelShaderFunction();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-27T09:20:51.587

有人可能仍在寻找答案，这已经过时了：

如果您想要一些可以在现代市场（虚幻引擎 3-4 和类似引擎）中具有竞争力的质量，那么解决方案是多通道 2 通道高斯模糊。

正如您被告知的那样，使用两遍高斯模糊来减少计算的复杂性。现在，当您有算法时，您想要做的是在不同分辨率下多次通过，让我们从 3 开始。

制作全屏的 1/2 渲染目标，进行两次模糊，保留结果。制作原始、模糊的 1/4 渲染目标。将 1/8 渲染目标设为 origina，模糊。

每个都有不同的内核（使用更强的模糊来降低分辨率），现在您已经完成了将所有 RT 组合成具有良好质量的结果。

3 分辨率实际上有点老派，在虚幻引擎 3 (udk) 中用于绽放，虚幻引擎 4 使用 5 + 全分辨率缓冲模糊正在考虑中。

当然你也可以考虑框模糊，我个人会使用大内核的多通道框模糊来减少整体通过次数，但这需要一些测试。

# html - 浏览器如何反应不显示？

> ID：12823642
> 
> 赞同：1
> 
> 时间：2012-10-10T16:00:57.853
> 
> 标签：html, twain

我想了解 display: none in html 是否意味着该元素在浏览器透视图中不存在？我有以下情况：我有一个用来重复插件的元素

```
<embed width="100%" height="100%" id="embedElement"
        TYPE="Application/DynamicWebTwain-Plugin"
        PLUGINSPAGE="/gestionRH/webTwain/DynamicWebTwain.xpi"> 
</embed> 
```

代码javascript：

```
var Plugin = document.embeds[0]; 
```

当我将嵌入元素放在一个 div 中并将这个 div 的显示 css 属性设置为 none 时，javascript 似乎找不到这个元素是什么解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:06:00.300

您可以使用另一种技术来隐藏元素并仍然可以访问它：

```
.hide {
   position: absolute !important;
   top: -9999px !important;
   left: -9999px !important;
} 
```

[http://css-tricks.com/places-its-tempting-to-use-display-none-but-dont/](http://css-tricks.com/places-its-tempting-to-use-display-none-but-dont/)

# html - 下载 CSV 生成的客户端

> ID：12823643
> 
> 赞同：4
> 
> 时间：2012-10-10T16:00:59.413
> 
> 标签：html, http, dom

我想为我在浏览器中以 Javascript 生成的 CSV 提供下载链接。数据 URI 是一个显而易见的选择，但它们在 IE 中对 CSV 不起作用。

### 问题 #1：是否有任何跨浏览器的方式可以完全在客户端执行此操作？

我很确定答案是否定的。下一种方法是生成一个链接，比如`/data_download?data=...`，并拥有一个相应的服务器端资源，该资源只响应`data`来自查询字符串的字段内容。现在的问题似乎是 IE 的最大 URL 长度大约是 2 KB，我不想在我的系统中建立这个限制。

所以我创建了一个服务器端资源，这样我就可以`/data_download`使用表单数据发布到，其中“数据”属性是 CSV 内容，并使用表单的“数据”字段进行响应。这似乎可行，但这是一个痛苦的 b/c 我需要`<form>`在客户端标记中有一个，即使我设置了`mimetype`正确，我也会在浏览器中收到警告，让我认为这会在某些浏览器中中断：

> 资源解释为文档，但使用 MIME 类型 text/csv 传输：“http://localhost:8001/data_download”

### 问题 #2：有没有更好的方法来做到这一点，它具有以下部分或全部特征：

*   无状态：我不会在服务器上创建令牌或任何需要在请求之间存储状态的东西
*   使用 GET 请求：这样我就可以只拥有一个`<link>`标签而不是整个`<form>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T06:15:55.730

看看[http://tshrestha.blogspot.com/2013/05/stupid-download-of-browser-self.html](http://tshrestha.blogspot.com/2013/05/stupid-download-of-browser-self.html) FF20+ 和 Chrome 支持带有文件名的 data-uri（锚元素的下载属性）。

您可以通过以下方式使其在 IE 中完全在客户端工作：

```
if(/MSIE/.test(navigator.userAgent) && document.execCommand) {
    var oWin = window.open("about:blank", "_blank");
    oWin.document.write("your text goes here");
    oWin.document.close();
    var success = oWin.document.execCommand('SaveAs', true)
    oWin.close();
    return false; //do NOT follow the link
} 
```

问题是用户必须提供文件名 + .csv 或任何其他扩展名。:-(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T16:36:38.947

尽管该问题要求某些 IE 兼容性，但这不在问题标题中，所以我将这个解决方案发布给那些在这里用谷歌搜索的人。这是我的解决方案，将表格转换为客户端的 csv，并提供下载按钮。可能可以与 Ustaman 的解决方案相结合，形成一个完全跨浏览器的解决方案。

HTML：

```
<a download="report.csv" id="csvClick" href="#">Download CSV</a>
<table id="myTable">... </table>
<script>
makeCSV("csvClick", "myTable"); 
function makeCSV (link, targetTable) {
    var csvLink=document.getElementById(link);
    var dataurlHeader = "data:text/csv;charset=utf-8,";
    var dataurlContent = "";

    var table = document.getElementById(targetTable);
    for (var i = 0, row; row = table.rows[i]; i++) {
       // row references rows
       if (i > 0){
           dataurlContent += "\n";
       }
       for (var j = 0, column; column = row.cells[j]; j++) {
         // column references columns
         if (j > 0) {
             dataurlContent += ",";
         }
         dataurlContent += column.innerHTML;
       }  
    }
    dataurlContent = encodeURIComponent(dataurlContent);
    csvLink.href = "" + dataurlHeader + dataurlContent;
}
</script> 
```

# xml - 从 XSD/WSDL 识别 SOAP 方法前缀

> ID：12823649
> 
> 赞同：0
> 
> 时间：2012-10-10T16:01:12.453
> 
> 标签：xml, web-services, soap, xsd, wsdl

我有一个如下的 WSDL。我正在尝试确定如何从此文档中获取 SOAP 方法的前缀，有人可以帮忙吗？

下面是通过 SOAP-UI 生成的 Prefix Method，请注意方法前缀中的粗体部分**Foo**，有没有什么方法可以从 WSDL 或 XSD 中识别要使用的前缀？

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"                  xmlns:cad="http://Foobarlog.com/">
<soapenv:Header/>
<soapenv:Body>
  <**Foo**:getCADPullLogs>
     <request>
     </request>
  </**Foo**:getCADPullLogs> 
```

**WSDL 文件如下**

```
<definitions xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsp1_2="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://Foobarlog.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://Foobarlog.com/" name="FoobarLogReadWebService">
<script />
<types>
    <xsd:schema>
        <xsd:import namespace="http://Foobarlog.com/" schemaLocation="http://10.X.X.X:9099/FoobarLogWebService/FoobarLogReadWebService?xsd=1" />
    </xsd:schema>
</types>
<message name="getFoobarPullLogs">
    <part name="parameters" element="tns:getFoobarPullLogs" />
</message>
<message name="getFoobarPullLogsResponse">
    <part name="parameters" element="tns:getFoobarPullLogsResponse" />
</message>
<message name="getFoobarPushLogs">
    <part name="parameters" element="tns:getFoobarPushLogs" />
</message>
<message name="getFoobarPushLogsResponse">
    <part name="parameters" element="tns:getFoobarPushLogsResponse" />
</message>
<message name="getFoobarTxnDetails">
    <part name="parameters" element="tns:getFoobarTxnDetails" />
</message>
<message name="getFoobarTxnDetailsResponse">
    <part name="parameters" element="tns:getFoobarTxnDetailsResponse" />
</message>
<portType name="FoobarLogReadWebService">
    <operation name="getFoobarPullLogs">
        <input wsam:Action="http://Foobarlog.com/FoobarLogReadWebService/getFoobarPullLogsRequest" message="tns:getFoobarPullLogs" />
        <output wsam:Action="http://Foobarlog.com/FoobarLogReadWebService/getFoobarPullLogsResponse" message="tns:getFoobarPullLogsResponse" />
    </operation>
    <operation name="getFoobarPushLogs">
        <input wsam:Action="http://Foobarlog.com/FoobarLogReadWebService/getFoobarPushLogsRequest" message="tns:getFoobarPushLogs" />
        <output wsam:Action="http://Foobarlog.com/FoobarLogReadWebService/getFoobarPushLogsResponse" message="tns:getFoobarPushLogsResponse" />
    </operation>
    <operation name="getFoobarTxnDetails">
        <input wsam:Action="http://Foobarlog.com/FoobarLogReadWebService/getFoobarTxnDetailsRequest" message="tns:getFoobarTxnDetails" />
        <output wsam:Action="http://Foobarlog.com/FoobarLogReadWebService/getFoobarTxnDetailsResponse" message="tns:getFoobarTxnDetailsResponse" />
    </operation>
</portType>
<binding name="FoobarLogReadWebServicePortBinding" type="tns:FoobarLogReadWebService">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document" />
    <operation name="getFoobarPullLogs">
        <soap:operation soapAction="" />
        <input>
            <soap:body use="literal" />
        </input>
        <output>
            <soap:body use="literal" />
        </output>
    </operation>
    <operation name="getFoobarPushLogs">
        <soap:operation soapAction="" />
        <input>
            <soap:body use="literal" />
        </input>
        <output>
            <soap:body use="literal" />
        </output>
    </operation>
    <operation name="getFoobarTxnDetails">
        <soap:operation soapAction="" />
        <input>
            <soap:body use="literal" />
        </input>
        <output>
            <soap:body use="literal" />
        </output>
    </operation>
</binding>
<service name="FoobarLogReadWebService">
    <port name="FoobarLogReadWebServicePort" binding="tns:FoobarLogReadWebServicePortBinding">
        <soap:address location="http://10.X.X.X:9099/FoobarLogWebService/FoobarLogReadWebService" />
    </port>
</service> 
```

**XSD 如下**

```
<xs:schema xmlns:tns="http://Fooabrlog.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" version="1.0" targetNamespace="http://Fooabrlog.com/">
<script />
<xs:element name="getFoobarPullLogs" type="tns:getFoobarPullLogs" />
<xs:element name="getFoobarPullLogsResponse" type="tns:getFoobarPullLogsResponse" />
<xs:element name="getFoobarPushLogs" type="tns:getFoobarPushLogs" />
<xs:element name="getFoobarPushLogsResponse" type="tns:getFoobarPushLogsResponse" />
<xs:element name="getFoobarTxnDetails" type="tns:getFoobarTxnDetails" />
<xs:element name="getFoobarTxnDetailsResponse" type="tns:getFoobarTxnDetailsResponse" />
<xs:complexType name="getFoobarPushLogs">
    <xs:sequence>
        <xs:element name="request" type="tns:FoobarPushRequestObject" minOccurs="0" />
    </xs:sequence>
</xs:complexType>
<xs:complexType name="FoobarPushRequestObject">
    <xs:sequence>
        <xs:element name="ID" type="xs:string" minOccurs="0" />
        <xs:element name="endDt" type="xs:string" minOccurs="0" />
        <xs:element name="userName" type="xs:string" minOccurs="0" />
        <xs:element name="requestType" type="xs:string" minOccurs="0" />
        <xs:element name="startDt" type="xs:string" minOccurs="0" />
    </xs:sequence>
</xs:complexType>
<xs:complexType name="getFoobarPushLogsResponse">
    <xs:sequence>
        <xs:element name="return" type="tns:FoobarPushResponseBean" minOccurs="0" />
    </xs:sequence>
</xs:complexType>
<xs:complexType name="FoobarPushResponseBean">
    <xs:sequence>
        <xs:element name="FoobarLogsResponse" type="tns:FoobarPushRequestBean" nillable="true" minOccurs="0" maxOccurs="unbounded" />
        <xs:element name="responseCode" type="xs:int" />
        <xs:element name="responseText" type="xs:string" minOccurs="0" />
    </xs:sequence>
</xs:complexType>
<xs:complexType name="FoobarPushRequestBean">
    <xs:sequence>
        <xs:element name="data" type="xs:string" minOccurs="0" />
        <xs:element name="destination" type="xs:string" minOccurs="0" />
        <xs:element name="header" type="xs:string" minOccurs="0" />
        <xs:element name="messageStatus" type="xs:string" minOccurs="0" />
        <xs:element name="originator" type="xs:string" minOccurs="0" />
        <xs:element name="requestID" type="xs:string" minOccurs="0" />
        <xs:element name="submitDT" type="xs:string" minOccurs="0" />
        <xs:element name="treatDT" type="xs:string" minOccurs="0" />
    </xs:sequence>
</xs:complexType>
<xs:complexType name="getFoobarTxnDetails">
    <xs:sequence>
        <xs:element name="request" type="tns:FoobarTxnRequestObject" minOccurs="0" />
    </xs:sequence>
</xs:complexType>
<xs:complexType name="FoobarTxnRequestObject">
    <xs:sequence>
        <xs:element name="FoobarRequestID" type="xs:string" minOccurs="0" />
        <xs:element name="ID" type="xs:string" minOccurs="0" />
        <xs:element name="endDt" type="xs:string" minOccurs="0" />
        <xs:element name="userName" type="xs:string" minOccurs="0" />
        <xs:element name="requestType" type="xs:string" minOccurs="0" />
        <xs:element name="startDt" type="xs:string" minOccurs="0" />
    </xs:sequence>
</xs:complexType>
<xs:complexType name="getFoobarTxnDetailsResponse">
    <xs:sequence>
        <xs:element name="return" type="tns:FoobarTxnResponseBean" minOccurs="0" />
    </xs:sequence>
</xs:complexType>
<xs:complexType name="FoobarTxnResponseBean">
    <xs:sequence>
        <xs:element name="FoobarTxnResponse" type="tns:FoobarTxnRequestBean" nillable="true" minOccurs="0" maxOccurs="unbounded" />
        <xs:element name="responseCode" type="xs:int" />
        <xs:element name="responseText" type="xs:string" minOccurs="0" />
    </xs:sequence>
</xs:complexType>
<xs:complexType name="FoobarTxnRequestBean">
    <xs:sequence>
        <xs:element name="data" type="xs:string" minOccurs="0" />
        <xs:element name="header" type="xs:string" minOccurs="0" />
        <xs:element name="requestID" type="xs:string" minOccurs="0" />
        <xs:element name="status" type="xs:string" minOccurs="0" />
        <xs:element name="submitDT" type="xs:string" minOccurs="0" />
        <xs:element name="treatDT" type="xs:string" minOccurs="0" />
    </xs:sequence>
</xs:complexType>
<xs:complexType name="getFoobarPullLogs">
    <xs:sequence>
        <xs:element name="request" type="tns:FoobarPullRequestObject" minOccurs="0" />
    </xs:sequence>
</xs:complexType>
<xs:complexType name="FoobarPullRequestObject">
    <xs:sequence>
        <xs:element name="ID" type="xs:string" minOccurs="0" />
        <xs:element name="endDt" type="xs:string" minOccurs="0" />
        <xs:element name="userName" type="xs:string" minOccurs="0" />
        <xs:element name="requestType" type="xs:string" minOccurs="0" />
        <xs:element name="startDt" type="xs:string" minOccurs="0" />
    </xs:sequence>
</xs:complexType>
<xs:complexType name="getFoobarPullLogsResponse">
    <xs:sequence>
        <xs:element name="return" type="tns:FoobarPullResponseBean" minOccurs="0" />
    </xs:sequence>
</xs:complexType>
<xs:complexType name="FoobarPullResponseBean">
    <xs:sequence>
        <xs:element name="FoobarLogsResponse" type="tns:FoobarPullRequestBean" nillable="true" minOccurs="0" maxOccurs="unbounded" />
        <xs:element name="responseCode" type="xs:int" />
        <xs:element name="responseText" type="xs:string" minOccurs="0" />
    </xs:sequence>
</xs:complexType>
<xs:complexType name="FoobarPullRequestBean">
    <xs:sequence>
        <xs:element name="data" type="xs:string" minOccurs="0" />
        <xs:element name="destination" type="xs:string" minOccurs="0" />
        <xs:element name="originator" type="xs:string" minOccurs="0" />
        <xs:element name="requestID" type="xs:string" minOccurs="0" />
        <xs:element name="serviceProfileID" type="xs:string" minOccurs="0" />
        <xs:element name="submitDt" type="xs:string" minOccurs="0" />
    </xs:sequence>
</xs:complexType> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:11:43.517

您可以使用任何您喜欢的前缀，只要它映射到正确的命名空间 URI，即`targetNamespace`XSD ( `http://Fooabrlog.com/`) 的。在您提供的示例 XML 中`xmlns:cad="http://Foobarlog.com/"`（我认为应该是相同的 URI，但在问题中打错了字），所以`<cad:getCADPullLogs>`应该可以工作。

# jquery - 在我的 BB 视图中呈现时，我的 FancyBox ( Lightbox ) 事件没有触发

> ID：12823650
> 
> 赞同：0
> 
> 时间：2012-10-10T16:01:29.077
> 
> 标签：jquery, backbone.js, fancybox

不完全确定为什么..这是我的渲染：

```
render: function() {

  var html = this.template(this.model.toJSON());
  $(this.el).html(html);

  $.fancybox( this.$el.html() ); 
```

花式盒子加载。但是我的其他工作按钮都不是可点击的。如果我不将它加载到花式框中，而是传递一个位于 DOM 上某处的 $el，那么所有事件和动态内容都会正确加载。

如何将此内容加载到 FancyBox 弹出窗口中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:09:01.643

您希望将元素传递给 fancybox，而不仅仅是 HTML 字符串。试试这个：

```
render: function() {
    var html = this.template(this.model.toJSON());
    $(this.el).html(html);
    $.fancybox(this.$el);
} 
```

# sql-server - 使用 CTE 或临时表时 SQL Server 查询缓慢

> ID：12823651
> 
> 赞同：0
> 
> 时间：2012-10-10T16:01:32.913
> 
> 标签：sql-server

我有一个 SQL 查询，它需要一个日期并报告过去 7 天内已扫描到仓库中但在给定日期之前未扫描出的托盘数量。运行大约需要一秒钟。我需要报告过去 14 天的这个数字（使用 SSRS 报告）。但是 - 当我创建 CTE 或临时表来生成要报告的日期时，而不是上升到 10 秒（大约 10 个日期），它上升到超过 3 分钟！

请指教。

这是单日报告：

```
DECLARE @back integer
SET @back = 7
Declare @testDate DateTime
SET @testDate = '2012-10-09'
--opening balance query
select count(p.PalletID) as Opening_Balance
FROM [POSTALE].[dbo].[Pallet] p
join [POSTALE].[dbo].[Tracking] t on t.PalletID = p.PalletID
--scan was before indicated day
where CAST(DateAdd(hour, -6, t.TrackDateTime) as DATE) <= @testDate
--scan was after number of days to look back
and CAST(DateAdd(hour, -6, t.TrackDateTime) as DATE) >= dateadd(day, 0 - @back, @testDate)
--scanned into hub (get only the earliest occurence)
and t.TrackingID = (select top 1 tr.TrackingID from [POSTALE].[dbo].[Tracking] tr 
                where tr.TrackCode in ('SCAN OFF TRUNK HUB', 'DAYS') 
                and tr.PalletID = t.PalletID order by tr.TrackingID)
--not scanned out of hub by the indicated day
and (select count(tr.TrackingID) from [POSTALE].[dbo].[Tracking] tr where t.PalletID = tr.PalletID and 
    CAST(DateAdd(hour, -6, tr.TrackDateTime) as DATE) <= @testDate and tr.TrackCode in 
    ('SCAN ONTO TRUNK DEPOT', 'SCAN OFF TRUNK DEPOT', 'SECURITY SCAN AT DEPOT', 'SCAN OFF TRUNK DEPOT', 'SCANNER BROKEN',
    'SCAN ON DEPOT VEHICLE', 'POD ADDED','NO POD ADDED')) = 0 
```

这是将其与 CTE 连接的代码：

```
DECLARE @back integer
SET @back = 7
declare @start_date as date;
set @start_date = cast(getdate() - 14 as date);
declare @end_date as date;
set @end_date = cast(getdate() as date);
WITH DateList AS
(
    SELECT @start_date AS start_date
    UNION ALL
    SELECT DATEADD(DAY, 1, start_date)
    FROM DateList
    WHERE DATEADD(DAY, 1, start_date) < @end_date
)
SELECT
    (select count(p.PalletID) as Opening_Balance
...
,datediff(DAY, d.start_date, getdate()) as daysBack
from DateList d
order by d.start_date 
```

..这是临时表版本：

```
DECLARE @back integer
SET @back = 7
--hours into day that get pushed back to previous day
DECLARE @dayStart integer
set @dayStart = 12
--today + 12 hours as datetime
Declare @date12 as datetime
set @date12 = DateAdd(hour, @dayStart, cast(cast(getdate() as date) as datetime))
--temporary table to create list of dates to report on
DECLARE @DateList TABLE(
        DayDate DateTime
)
insert into @DateList (DayDate) Select DateAdd(day, - 14, @date12) where datepart(weekday, getdate() - 14) <> 7 and datepart(weekday, getdate() - 14) <> 1
insert into @DateList (DayDate) Select DateAdd(day, - 13, @date12) where datepart(weekday, getdate() - 13) <> 7 and datepart(weekday, getdate() - 13) <> 1
insert into @DateList (DayDate) Select DateAdd(day, - 12, @date12) where datepart(weekday, getdate() - 12) <> 7 and datepart(weekday, getdate() - 12) <> 1
insert into @DateList (DayDate) Select DateAdd(day, - 11, @date12) where datepart(weekday, getdate() - 11) <> 7 and datepart(weekday, getdate() - 11) <> 1
insert into @DateList (DayDate) Select DateAdd(day, - 10, @date12) where datepart(weekday, getdate() - 10) <> 7 and datepart(weekday, getdate() - 10) <> 1
insert into @DateList (DayDate) Select DateAdd(day, - 9, @date12) where datepart(weekday, getdate() - 9) <> 7 and datepart(weekday, getdate() - 9) <> 1
insert into @DateList (DayDate) Select DateAdd(day, - 8, @date12) where datepart(weekday, getdate() - 8) <> 7 and datepart(weekday, getdate() - 8) <> 1
insert into @DateList (DayDate) Select DateAdd(day, - 7, @date12) where datepart(weekday, getdate() - 7) <> 7 and datepart(weekday, getdate() - 7) <> 1
insert into @DateList (DayDate) Select DateAdd(day, - 6, @date12) where datepart(weekday, getdate() - 6) <> 7 and datepart(weekday, getdate() - 6) <> 1
insert into @DateList (DayDate) Select DateAdd(day, - 5, @date12) where datepart(weekday, getdate() - 5) <> 7 and datepart(weekday, getdate() - 5) <> 1
insert into @DateList (DayDate) Select DateAdd(day, - 4, @date12) where datepart(weekday, getdate() - 4) <> 7 and datepart(weekday, getdate() - 4) <> 1
insert into @DateList (DayDate) Select DateAdd(day, - 3, @date12) where datepart(weekday, getdate() - 3) <> 7 and datepart(weekday, getdate() - 3) <> 1
insert into @DateList (DayDate) Select DateAdd(day, - 2, @date12) where datepart(weekday, getdate() - 2) <> 7 and datepart(weekday, getdate() - 2) <> 1
insert into @DateList (DayDate) Select DateAdd(day, - 1, @date12) where datepart(weekday, getdate() - 1) <> 7 and datepart(weekday, getdate() - 1) <> 1
SELECT
    (select count(p.PalletID) as Opening_Balance
...
,datediff(DAY, d.DayDate, getdate()) as daysBack
from @DateList d
order by d.DayDate 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:08:45.650

您还没有描述您的索引，这显然是一个重要因素，但我注意到的一件事是您的 WHERE 子句具有不可搜索的元素，[并且](http://en.wikipedia.org/wiki/Sargable)可能是。

例如，尝试更改：

```
where CAST(DateAdd(hour, -6, t.TrackDateTime) as DATE) <= @testDate 
```

至

```
where t.TrackDateTime < dateadd(hour, 6, dateadd(day, 1, @testDate)) 
```

您需要对这一行执行类似的操作：

```
and CAST(DateAdd(hour, -6, t.TrackDateTime) as DATE) >= dateadd(day, 0 - @back, @testDate) 
```

# java - 使用 setOnClickListener (Android) 时出现语法错误

> ID：12823652
> 
> 赞同：1
> 
> 时间：2012-10-10T16:01:32.937
> 
> 标签：java, android, eclipse, onclicklistener

我刚刚开始使用 Android，并且正在阅读一本食谱并尝试代码。我的问题是每次尝试使用 setOnClickListener 时都会出现两个语法错误；一个在代码所在的位置上方，另一个在课程的末尾。我已经从书中完全复制了代码，但仍然出现错误。我试过谷歌搜索，但似乎没有其他人有同样的问题，所以我要么做错了，要么 Eclipse 中存在错误。

```
package com.example.tes;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

Button startButton = (Button) findViewById(R.id.trigger);

startButton.setOnClickListener(new View.OnClickListener() {
public void onClick(View view) {
}
});

} 
```

错误出现在第 21 行 - " `Syntax error on token "}", delete this token`" 和 " `Syntax error, insert "}" to complete ClassBody`"。当我只添加“startButton.setOnClickListener”代码时没有错误，它们只在我尝试设置 onClickListener 时出现。

我确定我在某个地方犯了错误，但老实说我看不到它。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T16:05:13.920

你得到一个错误是因为你的代码漂浮在不知名的地方，并且不在方法内。尝试使用：

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button startButton = (Button) findViewById(R.id.trigger);

    startButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

# asp.net-mvc-3 - 在 Web 应用发布后防止浏览器缓存：更改 ASP.NET MVC3 转换虚拟 URL 的方式

> ID：12823655
> 
> 赞同：1
> 
> 时间：2012-10-10T16:01:43.340
> 
> 标签：asp.net-mvc-3, spark-view-engine

我想阻止浏览器缓存我的软件给定版本的 JavaScript、CSS 和图像文件。

我正在将 ASP.NET MVC3 与 Spark 视图引擎一起使用，我相信我可以通过将自定义查询字符串参数附加到使用虚拟路径呈现的图像、脚本和样式表 URL 中来完成此操作。如，`<script type="text/javascript" src="~/path/to/script.css"></script>`将呈现为`<script type="text/javascript" src="/myApplication/path/to/script.css?2.3.0"></script>`.

这是可以做到的吗？我是在正确的轨道上，还是我可以做其他事情？

谢谢！

**编辑**

我正在查看 IIS 中的 ETag，这似乎可以很好地完成这项工作。我做了一些测试，它似乎工作。这看起来是合理的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:56:39.320

你在正确的轨道上。只需将版本号附加到您的静态资源，并在您更改它们时增加此编号。

你可以自动化这个过程。将静态资源组合到一个文件中以避免来自客户端浏览器的多个请求是一种很好的做法。在此过程中，您可以添加版本号或仅添加结果文件的哈希值。这样，如果生成的文件更改，哈希也会更改。

例如，[Web 优化框架](http://nuget.org/packages/microsoft.aspnet.web.optimization)是您可以签出的东西，它可以自动执行这些任务。

因此，在应用程序中安装`Microsoft.AspNet.Web.Optimization`NuGet 后，您可以在以下位置定义捆绑包`Application_Start`：

```
var bundles = BundleTable.Bundles;
bundles.Add(
    new ScriptBundle("~/bundles/jquery").Include("~/Scripts/jquery-{version}.js")
); 
```

然后在您的视图中按名称引用：

```
@Scripts.Render("~/bundles/jquery") 
```

当您在发布模式下运行时（`debug="false"`在您的 web.config 中），这将呈现为：

```
<script src="/bundles/jquery?v=wBUqTIMTmGl9Hj0haQMeRbd8CoM3UaGnAwp4uDEKfnM1"></script> 
```

这个框架非常强大，因为它允许您将多个静态资源组合到一个包中，并且还将它们最小化，将带宽消耗降至最低。它还负责缓存这些静态资源并根据内容附加版本号。因此，如果您的原始内容发生更改，生成的版本号也会更改，并将其从客户端浏览器缓存中逐出。

该框架随 ASP.NET MVC 4 一起提供，因此有一天当您升级应用程序时，您无需更改任何内容，因为这是现在处理静态资源的默认机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:05:29.897

这绝对是一种方法，但使用[查询字符串作为缓存破坏器并不是最好的主意。](http://www.stevesouders.com/blog/2008/08/23/revving-filenames-dont-use-querystring/)

另一种方法是在浏览器的 url 中放置一个时间戳，然后重写该服务器端。

例如，使用[url rewrite 扩展](http://www.iis.net/downloads/microsoft/url-rewrite)创建一个类似的规则：

```
<rule name="AutoVersioningOfCSSAndJS" stopProcessing="true">
  <match url="^(.*)\.[\d]{8}\.(css|js)$" ignoreCase="true" />
  <action type="Rewrite" url="{R:1}.{R:2}" />
  <conditions>
    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
  </conditions>
</rule> 
```

然后使用 8 位时间戳呈现您的标签：

```
<script type="text/javascript" src="~/path/to/script.20121010.css"></script> 
```

# .net - .net 的进程类不会将我的文件发送到打印机，但不会返回错误

> ID：12823659
> 
> 赞同：0
> 
> 时间：2012-10-10T16:02:00.987
> 
> 标签：.net, windows

我正在尝试按照 Microsoft 的这些说明使用 .NET 4.0 库中的 Process 和 ProcessInfo 类以编程方式打印文件。[http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.verbs(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.verbs(v=vs.100).aspx)

我在 \\server\printername 设置了网络打印机，并且能够在该位置打印测试页。

但是，当我在 Visual Studio 中运行此代码时，它不会打印，也不会返回任何错误，说明存在问题：

```
 Dim proc As New Process
    Dim startInfo As New ProcessStartInfo(filename)
    proc.StartInfo.FileName = filename
    proc.StartInfo.Verb = "printto"
    startInfo.Arguments = "\\server\printername"
    proc.StartInfo = startInfo
    proc.Start() 
```

据我所知，这些代码所做的只是在新窗口中打开 txt 文件。

如果我尝试从 CMD shell 运行该进程，则会收到以下错误：

```
print /d:\\servername\printername C:\path\filename.txt
unable to initialize device \\servername\printername 
```

我可以采取哪些步骤来调试此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:27:47.533

设置属性后，您将覆盖 proc.StartInfo。

尝试：

```
Dim proc As New Process
Dim startInfo As New ProcessStartInfo(filename)
startInfo.FileName = filename
startInfo.Verb = "printto"
startInfo.Arguments = "\\server\printername"
proc.StartInfo = startInfo
proc.Start() 
```

# c - 将“p = p + (*p)++ * 3 + c;” 导致未定义的行为？

> ID：12823663
> 
> 赞同：4
> 
> 时间：2012-10-10T16:02:12.237
> 
> 标签：c, standards, undefined-behavior

> **可能重复：**
> [未定义的行为和序列点](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)

正如标准中所定义的，E1 += E2 与 E1 = E1 + E2 几乎相同，只是 E1 只计算一次。因此，此外，将 "p += (*p)++ + c"; 导致未定义的行为？

在 gcc/g++ (4.7 / 4.4) 中尝试以下代码。有 2 种结果：bxxxxx (g++4.7) 或 axbxxx (gcc, g++ 4.4)。如果我们在代码中执行（1）而不是（2），我们只能得到axbxxx。

```
#include <stdio.h>

int main() {
    char s[] = "axxxxx";
    char *p = s;

    printf("s = %s in the beginning.\n"
           "p is pointed at the %d-th char.\n", s, p - s);
    //p = p + (*p)++ * 3 + 2 - 'a' * 3; // (1)
    p += (*p)++ * 3 + 2 - 'a' * 3; // (2)
    printf("p is moved ahead by %d steps\n", p - s);
    printf("s = %s after the operation.\n", s);
    return 0;
} 
```

我找不到它为什么会导致未定义的行为，也不能断言它是 gcc 的错误。

对于 axbxxx 结果，我也无法理解为什么操作数或后 ++ 会被评估两次（一次获取值，然后保存它）。由于在标准中说“1 ...被添加到它”，我认为地址应该只被评估一次。如果后 ++ 的操作数的地址只计算一次，则表达式的效果将是相同的，尽管赋值执行的顺序如何。

=== 更新 ===

在阅读了第一条评论中链接的文档后，我认为以下规则可能很重要：

"2) 此外，只能访问先验值以确定要存储的值。.

那么，“p = p + (*p)++ * 3 + c”中p的访问是否会被认为是*p的“先验值”的一部分，它与要存储在*p中的值无关?

IMO，这条规则没有被违反。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:10:14.393

不，`p = p + (*p)++ * 3 + c`不会导致任何未定义的行为，假设它`p`不指向`c`.

在这种情况下，有问题的部分是`*p`表达式内部值的读取和修改。但是，读取该值是为了确定 的新值（新值对读入的值`p`有直接的数据依赖性），因此它不违反要求。`p``*p`

我猜编译器中的错误实际上源于其在*未指定*情况下的不正确行为。请注意，该表达式有两个副作用：将新值存储在中`p`并将新值存储在 中`*p`。未指定这些副作用发生的顺序。但是，在评估`(*p)++`子表达式期间，编译器应该“修复”特定的左值参数，`++`以确保新的（增加的）值存储在该确切的对象中。看起来旧版本的编译器未能做到这一点，即`p`首先评估 的新值，然后`*p`通过 的新值存储 的*新*值`p`。这显然是不正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T05:24:59.000

注意`p += x;`不等于`p = p + x;`，而是`p = p + (x);`。`x`首先求值，然后将结果添加到 p. 在标题中给出的不带括号的公式中，中间值`p`可能指向数组之外，这确实是未定义的行为。只要结果`x`在数组内，代码中的版本就应该没问题。

> **6.5.16.2.3**形式为 E1 op= E2 的复合赋值与简单赋值表达式 E1 = E1 op (E2) 的不同之处仅在于左值 E1 只计算一次。
> 
> **J.2 未定义行为**- 将指针添加或减少到数组对象或仅超出数组对象和整数类型会产生不指向或仅超出同一数组对象的结果（6.5.6）。

此 UB 定义不限于分配的最终结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T16:19:18.163

原则上，该陈述`p += (*p)++ + c;`可能是正确的。它所做的只是将指针 ( `p`) 推进某个值，而该值恰好由`p`指向的变量确定。

你只需要确保你永远不会`p`超过`s + 7`. 我没有仔细检查您的代码以查看是否是这种情况（但请注意，您正在做出某些编码连续性假设）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T16:14:31.507

`p += (*p)++ * 3 + 2 - 'a' * 3`不是形式***的***`E1 = E1 + E2`。

*   在右侧你有一个指针（地址变量）
*   在左侧，您递增由该指针寻址的变量。

编辑：发现`p+=`

仍然不是未定义的，因为无论 右侧的每个表达式的求值顺序如何`E1 = E1 + E2`， 的值都`p`不会改变。

# php - 如何动态地使文本完全适合一个区域

> ID：12823672
> 
> 赞同：1
> 
> 时间：2012-10-10T16:02:44.483
> 
> 标签：php, html, css, layout, text

我正在设计一个与[http://Obvious.com](http://Obvious.com)具有相似布局质量的网站（将转移到 Medium）。我注意到他们的布局有一些很棒的地方，有一个方面我不知道该怎么做。

在主页上，当涉及到每篇博文标题下方的文本行时，我看到总是有一个固定的区域，并且文本在文本区域内整齐地排列。此外，如果标题较长，则下面的文字也会相应调整。

这是怎么做到的？我尝试了一种计算字符串中字符数的方法，当标题较长时，选择的字符数量会少 x 个字符……但是这样做时，有时只有一两个单词会挂在下一个单词中因此，线条看起来不均匀。（我不想要不均匀的外观）

那么有没有办法确保文本总是适合行尾？并且文本的数量会根据标题的大小而变化，同时适合吗？

这是一个 PHP 解决方案吗？也许是 CSS？Javascript？（ps这些是我知道我可以使用的语言）

请访问 Obvious.com(trans to Medium) 以供参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:11:17.840

它只是一个具有一定宽度的css div

```
<div style="width:300px; height:400px">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut tempor justo quis urna hendrerit placerat. Ut fringilla rutrum nulla at rutrum. Nullam sagittis accumsan erat et venenatis. Maecenas luctus magna rutrum neque aliquet dictum at quis libero. Mauris at felis dolor. Nam sit amet euismod purus. Etiam tincidunt laoreet dui ut fermentum.</div> 
```

这是我制作的一个 JsFiddle [http://jsfiddle.net/RZFYH/](http://jsfiddle.net/RZFYH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:12:08.870

如果查看源代码，您会看到传递给浏览器的文本比实际显示的要多。他们正在做的是返回一篇文章的前 x 个字符（在由 PHP 生成的输出 HTML 中），然后使用 CSS 裁剪容器元素。x 值需要通过反复试验来预先确定，但实际上并没有什么特别的事情发生。

有关CSS 文本剪辑的详细信息，请参阅[https://developer.mozilla.org/en-US/docs/CSS/clip](https://developer.mozilla.org/en-US/docs/CSS/clip)和[https://developer.mozilla.org/en-US/docs/CSS/text-overflow](https://developer.mozilla.org/en-US/docs/CSS/text-overflow)

# javascript - 尝试使用 gmaps4rails 单击标记时重定向

> ID：12823674
> 
> 赞同：0
> 
> 时间：2012-10-10T16:02:48.880
> 
> 标签：javascript, ruby-on-rails, callback, google-maps-markers, gmaps4rails

我在使用 gmaps4rails 时遇到问题，当我单击标记时，即使根据之前的问题我已经看到这应该可以工作，但什么也没有发生。

控制器

```
@json = User.all.to_gmaps4rails do |object|
    "\"link\": \"http://localhost:3000/users\""
end 
```

并查看

```
<%= gmaps4rails(@json) %>
<% content_for :scripts do %>
<script type="text/javascript">
function redirect_to(url) {
  window.location = url;
};
Gmaps4Rails.callback = function() { 
  function say_yo(arg) { return function(){alert('yo '+ arg + '!' );};};
    for (var i = 0; i <  Gmaps4Rails.markers.length; ++i) {
      google.maps.event.addListener(Gmaps4Rails.markers[i].google_object, 'click', redirect_to(Gmaps4Rails.markers[i].link));
    }
}
</script> 
```

另一个问题是，如果在 for 循环中 google 是您应该使用的标准变量，或者我是否遗漏了一些东西，因为我从未见过或写过调用来创建我相信的 google 变量。

插件：我知道这是一种突兀的 javascript，这很糟糕，但我从来没有找到一个我可以理解的不突兀的 javascript 教程，因此计划在未来的某个时候让它变得不突兀。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:09:53.053

我的问题现在已经过时了，我找到的上一个答案来自旧版本，显然仍然需要使用 javascript，现在要创建一个信息框，您只需要查看 wiki 的控制器部分，并且有各种带有标记的功能好。这一切都很好，我还没有发现需要使用 javascript，这很棒。

# perl - 如何在不使用 -T/-B 的情况下从二进制数据中识别源代码？

> ID：12823676
> 
> 赞同：0
> 
> 时间：2012-10-10T16:02:57.740
> 
> 标签：perl

我想在 Perl 中的二进制文件上使用 binmode。那么我怎么知道手头的文件是二进制文件还是文本文件呢？

这意味着首先我会读取完整文件以了解它是二进制文件还是文本文件，然后如果它是二进制文件，则使用设置 binmode 倒回 FP。

由于 Perl -B/-T 只检查文本的开始块，它通常将 pdf 分类为文本文件（源代码可以隐藏在任何扩展名中，如 .gif、.pdf 等）。所以我需要读取完整的文件数据来决定它是二进制文件还是文本文件。

我听说任何源代码文件（.pl、.c、.php 等）都不会包含 0x0-0x1f 和 0xff 等不可见字符。

我可以检查每个字节都在这个范围内以声明它是否是源代码文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T06:18:01.440

如果它是文本文件，您真的需要以文本模式读取文件吗？你可以`binmode`无条件使用。

如果您有一段处理文本文件的代码，它可以过滤掉任何无关的回车符 (0D)。如果你没有这样的一段代码，那么回车是否留在里面肯定没关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T16:37:23.967

如果您对安全性有疑虑，只需确保将可执行文件与数据分开即可。`binmode`对此无济于事：它可用于克服 DOS 和后代上的行尾恐惧，并可用于指定透明编码。

出于您的考虑，所有用户上传的文件*都是*敌对的。没有“安全”格式，因此将“二进制”与“文本”文件分开是没有用的。不要相信简单的启发式方法。（例如 Perl 允许[在变量名中使用控制字符](http://perldoc.perl.org/perlvar.html#The-Syntax-of-Variable-Names)！）

在处理用户数据时，您应该确保没有未经检查的输入到达 Perl 的几个关键部分：

1.  正则表达式——任意代码可以通过`(?{}) and (??{})`.
2.  `system`, `exec`, `qx()`, 反引号——不言自明
3.  `eval`— 插入变量时要小心。
4.  其他有趣的点是`open`,`glob`和 C-ish 字符串函数的参数。

`binmode`不在其中。

如果您必须提供用户指定的数据，请尝试将其传递给未处理的数据。例如，对于用户定义的样式表，它属于 php 无法解释的目录。如果是图像，您可以尝试在收到文件后转换文件并保存等效但可能安全的变体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T16:12:59.033

问题是在现代 POSIX 系统上，二进制文件和文本文件没有区别。一个字节是一个字节是一个字节。

我宁愿尝试另一种方法。如果您使用 Linux / Unix，您可以直接利用`file`使用“魔术”的实用程序来查看文件的第一个字节（或在某些情况下更远）并确定其类型；在 Windows 中，您必须先安装它。该实用程序使捕获可执行文件、zip 文件等变得相对简单。

在 Perl 中，您可以通过模块[File::Type](http://search.cpan.org/~pmison/File-Type-0.22/lib/File/Type.pm)使用它。

# android - Android 导出签名的 apk 问题

> ID：12823684
> 
> 赞同：-1
> 
> 时间：2012-10-10T16:03:21.523
> 
> 标签：android

我的项目实际上由这个项目和 2 个库项目组成。我正在尝试签署这个 apk（使用 Eclipse）。在它起作用之前！但现在我无法构建 WORKING apk！每次它有不同的大小，每次不同的功能都不起作用！它让我发疯！
它适用于调试密钥，但使用真正的密钥时应用程序不起作用。有什么方法可以使应用程序正常工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:24:51.300

我已经更新了 ADT。似乎现在有效。

# excel - Excel工作表索引搜索和合并列

> ID：12823685
> 
> 赞同：0
> 
> 时间：2012-10-10T16:03:23.887
> 
> 标签：excel, vlookup

我有两个 Microsoft excel 表 file1 和 file2。

file1 包含以下 CPU 信息。

```
hostname  | CPULoad
_________________________
server1   |   10%
server10  |   3%
server25  |   37% 
```

file2 包含内存使用信息。

```
hostname   | Memory Usage
_________________________
server12   |   8GB
server25   |   2GB
server10   |   999MB 
```

我想将此工作表合并到单个工作表中，以便从 file1 中搜索主机名并从 file2 中提取内存使用数据并将它们合并到单个文件中。我知道我们可以在 Excel 中做，但我不知道怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:28:51.820

最简单的方法是像这样使用 VLOOKUP：

=VLOOKUP（目标工作表上的第一个单元格，第二个工作表上的范围包括两列，内存使用列的编号，0）

向下拖动此公式，您将获得所有内存使用情况。

# php - 提交 html / PHP 表单时出现内部服务器错误

> ID：12823686
> 
> 赞同：4
> 
> 时间：2012-10-10T16:03:23.510
> 
> 标签：php, html, forms, internal-server-error

我正在编写一个基本网页，其中一个要求是通过 php 文件提交输入的 html 表单。

我在 html 文件中编写了以下代码：

```
<form method="post" action="formsubmit.php" name="Contact Form" id="contactform" enctype="multipart/form-data">
        <fieldset>
            <legend align="center">
                Your Details
            </legend>

            <p>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                <label for="fname">First Name: </label>
                <input type="text" id="fname" required/>

                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                <label for="sname">Surname: </label>
                <input type="text" id="sname" required/>

                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                <label for="email">Email Address: </label>
                <input type="email" id="email" required/>

                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                <label for="phone">Phone Number: </label>
                <input type="tel" id="phone" required/>
                <br />
                <br />

            </p>

        </fieldset>
                <fieldset>

            <legend align="center">
                Third Parties
            </legend>
            <p>
                <label for="sharedetails">Tick this box if you would like to recieve ticket and event information from our carefully selected third parties.</label>
                <input type="checkbox" name="sharedetails" value="sharedetailsno" id="sharedetails" />
            </p>
            <p>
                <input type="submit" value="Submit" />
                <input type="reset" value="Clear" />

            </p>
        </fieldset>
    </form> 
```

然后创建以下 php 文件：

```
<html> 
<head> 
<title>Process Feedback</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
</head>
<body>

<?php
$fname = $_POST["firstname"];
$sname = $_POST["surname"];
$email = $_POST["email"];
$phone = $_POST["phone"];

$sharedetails = $_POST["sharedetails"];

print "test test $fname $sname $email $phone test test"; 
?>

</body> 
</html> 
```

显然 php 文件仍处于测试阶段，我只希望它返回提交的数据，然后用正确的数据输出等正确格式化

但每当我提交表单时，它都会不断返回“内部服务器错误”。我在互联网上搜索了答案并找到了类似的帖子，但没有一个对我的问题有帮助

我在本地系统上运行 apache 服务器。¿问题可能是配置错误吗？

如果我可以让表单数据正确提交到 php 文件，那么我可以格式化 html 页面/输出页面的其余部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:08:46.737

您需要`name`将第一页上的表单属性设置为等于`$_POST`第二页上的数组元素。

这应该是您的代码的第一页：

```
<form method="post" action="formsubmit.php" name="Contact Form" id="contactform" enctype="multipart/form-data"> 
        <fieldset> 
            <legend align="center"> 
                Your Details 
            </legend> 

            <p> 
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 

                <label for="fname">First Name: </label> 
                <input type="text" name="fname" id="fname" required/> 

                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 

                <label for="sname">Surname: </label> 
                <input type="text" name="sname" id="sname" required/> 

                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 

                <label for="email">Email Address: </label> 
                <input type="email" name="email" id="email" required/> 

                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 

                <label for="phone">Phone Number: </label> 
                <input type="tel" name="phone" id="phone" required/> 
                <br /> 
                <br /> 

            </p> 

        </fieldset> 
                <fieldset> 

            <legend align="center"> 
                Third Parties 
            </legend> 
            <p> 
                <label for="sharedetails">Tick this box if you would like to recieve ticket and event information from our carefully selected third parties.</label> 
                <input type="checkbox" name="sharedetails" value="sharedetailsno" id="sharedetails" /> 
            </p> 
            <p> 
                <input type="submit" value="Submit" /> 
                <input type="reset" value="Clear" /> 

            </p> 
        </fieldset> 
    </form> 
```

这应该是 formsubmit.php 的代码：

```
<html>  
<head>  
<title>Process Feedback</title>  
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">  
</head> 
<body> 

<?php 
$fname = $_POST["fname"]; 
$sname = $_POST["sname"]; 
$email = $_POST["email"]; 
$phone = $_POST["phone"]; 

$sharedetails = $_POST["sharedetails"]; 

print "test test $fname $sname $email $phone test test";  
?> 

</body>  
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:09:25.400

太多的混乱只是从基础开始。

摆脱

```
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
```

您没有正确使用 ID

```
$_POST["fname"]; 
```

而不是：$_POST["firstname"];

您需要加入您的输出并回显它们

```
echo "test test ".$fname.$sname.$email.$phone."test test"; 
```

# visual-studio-2012 - 非托管导出库 VisualStudio 2012

> ID：12823687
> 
> 赞同：3
> 
> 时间：2012-10-10T16:03:30.627
> 
> 标签：visual-studio-2012

我正在使用 UnmanagedExportLibrary 模板，它运行良好。我可以将 Clarion 中的所有 .NET 组件用于 Windows 应用程序。出色的..

问题：我已经安装了 Visual Studio 2012，因为我现在也使用 Team Foundation Server 2012。当然，因为 VS2012 接缝比以前的版本好得多......无论如何，当迁移到 VS2012 时，我在编译解决方案时遇到错误：

```
ILDasm: calling 'ildasm.exe' with /quoteallnames /unicode /nobar /linenum "/out:C:\Users\omheien.S27\AppData\Local\Temp\tmp8E0D\UnmanagedExportLibrary1.il" "D:\Data\Annet\Test\UnmanagedExportLibrary1\UnmanagedExportLibrary1\bin\Debug\UnmanagedExportLibrary1.dll"
D:\Data\Annet\Test\UnmanagedExportLibrary1\UnmanagedExportLibrary1\DllExport\RGiesecke.DllExport.targets(8,5): error : Systemet finner ikke angitt fil
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========

"Systemet finner ikke filen" meens "System can not find the file" 
```

这是什么原因造成的？

# c++ - 如何在野牛语法中使用声明的c++变量

> ID：12823696
> 
> 赞同：1
> 
> 时间：2012-10-10T16:04:16.523
> 
> 标签：c++, bison

我试图在名为“mismatches”的变量中保留错误计数，我在野牛文件的第一部分中声明了该变量。

在我的野牛语法中，我为该变量设置了一个值。

然后在野牛文件的第三部分，在 main() 函数中，我计算出它的值，它是 0。

我的野牛文件的一个非常修改/缩减的版本：

```
%{
extern "C" FILE *yyin;
extern int yylineno;
extern int yynerrs;

int yylex();

// Declare 'mismatches'
int mismatches;

%}

%error-verbose

%%

expression:
          expression ADDOP term
          {
                     cout << "Parser is now here. Going to set `mismatches` to 6";
                     mismatches = 6;
          }
          | term
          ;

%%

int  main()
{         
          // Outputs 0
          cout << mismatches;

          yyparse();

          return 1;

} 
```

我应该怎么做才能在野牛文件的所有部分中使用变量'mismatches'？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T07:19:39.397

如果要计算*语法*错误，插入计数器更新的明显位置是 yyerror。

此外，您不*应该*使用

```
%{
int counter;
%} 
```

因为您将获得与包含标题在内的文件一样多的“计数器”副本。如果您从另一个文件显示“计数器”，那么显示 0 也就不足为奇了，因为您显示*了另一个*名为 counter 的变量。

如果你使用 Bison（并且足够新），你宁愿做这样的事情：

```
%code provides
{
  extern int counter;

}
%code
{
  int counter;
} 
```

或者，使用`%{...%}`来声明它（即，with ），并在第二个*之后*`extern`定义它（即，不带`extern`）。*`%%`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T19:23:09.207

我想你想在运行解析器后输出变量，就像这样

```
int  main()
{         
      yyparse();
      cout << mismatches;

      return 1;
} 
```*

# embedded - 如何设置外部 ADC 的寄存器

> ID：12823699
> 
> 赞同：-1
> 
> 时间：2012-10-10T16:04:29.890
> 
> 标签：embedded, microcontroller, avr

我是微控制器的新手，我正在尝试读取外部[ADC](http://en.wikipedia.org/wiki/Analog-to-digital_converter)值。最初我必须设置 ADC 寄存器。我正在使用[SPI](http://en.wikipedia.org/wiki/Serial_Peripheral_Interface_Bus)通信来读取 ADC 值。我正在使用[AD7798](http://www.analog.com/en/analog-to-digital-converters/ad-converters/ad7798/products/product.html) ADC。我检查了一些寄存器没有配置。要在 ADC AD7798 中配置寄存器，我必须使用通信寄存器来选择要配置的寄存器。例如，我想设置 AD7798 的配置寄存器（16 位）。我是这样写的：

```
#include <io.h> 
#define ADC_CS PORTB.3 
#define WG_CS  PORTB.4 
#define MOSI   PORTB.5 
#define MISO_PU PORTB.6 
#define MISO_PIN PINB.6 
#define SCK    PORTB.7 

//global functions.
unsigned int adcConfig;
unsigned int adcMode;
unsigned int adcId;

void init_io(void) 
{ 
DDRB = 0xBF;        // make SCK, MOSI, CS1, CS2 outputs 
ADC_CS = 1;              //disable ADC 
WG_CS = 1;               //disable WaveGenerator 
MISO_PU = 1;             //enable pull-up on MISO so we can test !RDY 
} 

unsigned char spi(unsigned char data) 
{ 
//Start transmision 
SPDR = data; 
//Wait for transmision complete 
while (!(SPSR & (1<<SPIF))); 
return SPDR; 
} 

unsigned int ReadAdIdReg(void) 
{              

SPCR = 0x5D;  
ADC_CS = 0;          
while (MISO_PIN != 0) ; 
spi(0x60); 
adcId = spi(0xFF);    
ADC_CS = 1;
 return adcId; 
} 
```

当我打印配置寄存器时，它给出的值是“16383”。但是当我关闭/打开目标时，我得到“1808（相当于0x0710）”，之后它给出的值与“16383”相同。我也用不同的配置进行了测试，但它没有改变，总是打印“16383”，除了电源关闭/打开。我认为默认值。

即使使用模式寄存器，它也总是打印“10（相当于 0x000A）”，但这是我总是得到的值，即使我将配置更改为“0x0022”。

即使我尝试读取 Id 寄存器，但它给出的是“0x48”。但在数据表中，它提到了 AD7798 的“0xX8”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:06:43.333

这个：

```
spi(0x07)<<8; 
```

一定是错的，它只是改变了`spi()`函数的返回值，然后将结果丢弃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:59:35.670

如果我的假设是正确的：

*   该`spi()`函数在 SPI 接口上写入一个字节
*   接口是 MSB 在前

那么你不需要左移...

```
 void setupADC(unsigned char configReg){
     ChipSelectAd(1);  
     spi(0x10);        // register address (including R/Wb bit?)
     spi(0x07);        // data MSB
     spi(0x10);        // data LSB
     spi(configReg);  
     ChipSelectAd(0);  
} 
```

我不确定该`spi()`函数如何用于读写。你有这方面的文档链接吗？

# glsl - 在 GLSL 中编译着色器时出错

> ID：12823706
> 
> 赞同：1
> 
> 时间：2012-10-10T16:04:49.750
> 
> 标签：glsl

除了代码，我想知道这个错误是关于什么的：

```
two vertex attribute variables (named a and n) were assigned to the same generic vertex attribute 
```

我在 Ubuntu 上使用 Nsight 在 GLSL（变换反馈实验）中编译我的顶点着色器时遇到了这个问题。我的意思是，这个错误的所有可能原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:16:42.193

看起来您正在将两个不同的顶点属性绑定到 OpenGL 代码中的同一位置。

例如，当您绑定属性时，您通常会这样做：

```
glBindAttribLocation(program, 0, "AttributeName"); 
```

您必须做的是对两个属性使用相同的索引：

```
glBindAttribLocation(program, 0, "AttributeNameOne");
glBindAttribLocation(program, 0, "AttributeNameTwo"); 
```

生成另一个通用顶点属性位置，这应该会消失。您可以使用您喜欢的任何非负数（在小范围内）。

还要记住，在链接程序之前必须调用 glBindAttribLocation。

# awk - AWK - 请求澄清示例

> ID：12823708
> 
> 赞同：2
> 
> 时间：2012-10-10T16:04:53.993
> 
> 标签：awk, gsub

我有 3 个使用 gsub 的示例：

**1.**

```
echo -e "A A\nB B\nC C" | awk '{gsub($(!/B/),"",$1); print $1 "\t" $2}' 
    A
B   B
    C 
```

**2.**

```
$ echo -e "A A\nB B\nC C" | awk '{gsub($(!/B/),"",$2); print $1 "\t" $2}'
A   
B   B
C 
```

**3.**

```
$ echo -e "A A\nB B\nC C" | awk '{gsub($(!/B/),"",$0); print $1 "\t" $2}'

. 
```

为什么在 3 示例 awk 中没有打印任何内容？awk 不应该打印吗？：

```
B   B 
```

请解释3个例子。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:35:59.320

对我来说关键点是：`$(!/B/)`. 很尴尬。这是什么意思（或者至少我猜是什么意思）？

*   **/B/**：它尝试匹配`B`整行中的字母。如果匹配则返回`1`，否则`0`。
*   **！**: 否定前面的结果代码。
*   **$()** ：它在解析先前的指令后返回整行 ( `$0`) 或第一个字段 ( )。`$1`

第三种情况没问题。

*   `B`与指令匹配时`gsub( $0, "", $0 )`，为空行。这很清楚。
*   何时`B`与指令不匹配`gsub( $1, "", $0 )`。因此，由于两个字母相同并且`gsub`逐行替换多次，因此会删除所有字符。添加另一个不同的字符，您将看到不同之处。

例如：

```
echo -e "A A 1\nB B 1\nC C 1" | awk '{gsub($(!/B/),"",$0); print $1 "\t" $2}' 
```

这会产生：

```
1

1 
```

# installation - 如何创建易于升级管理的 Spring Web App Installer？

> ID：12823709
> 
> 赞同：2
> 
> 时间：2012-10-10T16:05:01.820
> 
> 标签：installation, windows-installer, xampp, java-web-start

支持基于 Spring 的 Web 应用程序的无忧安装程序包的标准方法是什么。我的目标平台是 Windows。

我需要用户能够方便地去网页下载 msi 包/可执行文件/zip 文件。安装程序会检查是否安装了 Java，如果尚未安装 Java，则会自动为操作系统安装 Java。然后它从预先配置的位置下载所需的文件——基于spring的webapp、mysql数据库、tomcat，并将其安装在用户可以选择的目录中。

我还想创建只更新安装目录中所需文件的升级包。

我只是不希望用户去分别安装mysql、tomcat、spring webapp。

过去使用 XAMPP 和一些 .bat 文件。还有什么比这更好、更标准的吗？我只是不能指望用户单独安装 java 和其他依赖项。我可以使用[jportable](http://portableapps.com/apps/utilities/java_portable)，但更喜欢 Java 社区的标准。

没有使用过 Java Web Start，但它是否值得探索我的需求？

我应该使用 Visual Studio 创建自定义 Windows 安装程序部署吗？

还有其他建议吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:29:30.377

您描述的问题听起来很像配置：[http ://en.wikipedia.org/wiki/Provisioning#Server_provisioning](http://en.wikipedia.org/wiki/Provisioning#Server_provisioning)

我是[Puppet](http://en.wikipedia.org/wiki/Puppet_%28software%29) for Provisioning 的粉丝，而且[Puppet for Windows](http://docs.puppetlabs.com/windows/)越来越好。

您可以使用 puppet forge（puppet 模块库）中可能存在的任何现有模块来设置数据库、Java 等。或者只是自己编写整个清单。

然后您的脚本/安装程序只需要成为一个包装器即可：

*   安装人偶
*   应用你的木偶清单

升级只需要更新 puppet 清单并重新应用清单。对于数据库模式/数据升级，我建议也使用 liquibase 或类似的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T22:24:05.337

过去我不得不创建一些非常复杂的安装程序过程，并且能够使用 Nullsoft 安装系统（它的开源）来完成它。你可以在这里了解更多信息：http: [//nsis.sourceforge.net/Main_Page](http://nsis.sourceforge.net/Main_Page)

它生成一个可执行包，可以从一个相对易于管理的源脚本中复制文件、下载文件、执行其他文件等。

从他们的网站引述“NSIS 发行版包括一组插件，允许您从 Internet 下载文件、建立 Internet 连接、修补现有文件等等。”

# java - 声明的包测试与预期的包不匹配

> ID：12823710
> 
> 赞同：0
> 
> 时间：2012-10-10T16:05:03.380
> 
> 标签：java, class, package

所以，我有这个代码：

```
package test;
import test.Pi;
public class Demo {
    public static int pi = 3;   
    public static void main (String args[]) {
        System.out.println("Hello!");
        Pi.main(args);
        System.out.println("Hello again!");
    }
} 
```

但是eclipse在第一行不断抛出一个错误，说“声明的包测试与预期的包不匹配”。任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:06:24.347

这不是*导入*的问题——这意味着你试图*声明*这个类的包 ( `Demo`) 是`test`，但是编译器错误表明你把它放在了错误的地方——你把它放在了您的源路径，而不是`test`在源根目录下调用的目录中。

三种可能的变化：

*   请勿将其放入`test`包装中；鉴于您的问题的标题，尚不清楚您是否尝试这样做。您不需要导入与您声明的类在同一个包中的任何类。

*   如果还没有，请移入`Demo.java`文件夹。`test`

*   如果`Demo.java` *已经*在一个`test`文件夹中，请更改您的构建配置，以便*其父*目录是源根目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:09:37.077

**-**您收到的错误表明您使用了错误的包名称。

**-**请看，**你是否在测试目录中。**

**-**请删除你的包名前的**` 。**

# internet-explorer - 嵌套列表在 IE 中无法正确显示

> ID：12823719
> 
> 赞同：0
> 
> 时间：2012-10-10T16:05:26.693
> 
> 标签：internet-explorer, drop-down-menu, css-float, nested-lists

我有一个基于 CSS 的导航元素，它会下拉子类别，然后在下方水平运行它们。像这样：

![导航截图](../Images/0b324801f71fbfe01975a385d4f7a15b.png)

当用户将鼠标悬停在主要项目上时，它会显示银色背景，当用户将鼠标悬停在子导航项目上时，它会变为琥珀色。它也以这种方式显示在活动页面上。

该列表以典型的方式构建：

```
<div id="cv-nav">
    <ul>
        <a href="#"><li>Item 1</li></a>
        <a href="#"><li>Item2
            <ul>
                <li><a href="#">Item 2a</a></li>
                <li><a href="#">Item 2b</a></li>
            </ul>
        </li></a>
        <a href="#"><li>Item 3</li></a>
        <ahref="#"><li>Item 4
            <ul>
                <li><a href="#">Item 4a</a></li>
                <li><a href="#">Item 4b</a></li>
            </ul>
        </li></a>
        <a href="#"><li>Item 5</li></a>
    </ul>
</div> 
```

CSS 使一切正常工作：

```
#cv-nav {
    background-image: url("nav-background");
    background-position: left top;
    background-repeat: no-repeat;
    height: 50px;
    position: absolute;
    top: 165px;
    width: 1024px;
}
#cv-nav ul {
    height: 50px;
    position: relative;
    width: 1024px;
}
#cv-nav ul li {
    float: left;
    height: 50px;
    margin: 0 1px;
    padding: 0;
    text-align: center;
}
#cv-nav ul a li, #cv-nav ul li a {
    color: #D0D2D2;
    text-transform: uppercase;
    font-family: "Helvetica Neue Black Italic",Helvetica,sans-serif;
    font-size: 12px;
    letter-spacing: 1px;
    line-height: 50px;
}
#cv-nav ul li:hover ul li a {
    color: #D0D2D2;
    font-family: "Helvetica Neue Black Italic",Helvetica,sans-serif;
    text-transform: uppercase;
    font-size: 12px;
    letter-spacing: 1px;
    line-height: 30px;
}
#cv-nav ul li:hover, #cv-nav ul a li:hover, #cv-nav ul li.active {
    background-image: url("silver-button");
    background-position: left top;
    background-repeat: repeat-x;
}
#cv-nav ul li ul li:hover {
    background: none;
}

#cv-nav ul li:hover a, #cv-nav ul a li:hover, #cv-nav ul li:hover p, #cv-nav ul li.active a, #cv-nav ul a li.active, #cv-nav ul li.active p {
    color: #4f4f51;
    font-family: "Helvetica Neue Black Italic",Helvetica,sans-serif;
    text-transform: uppercase;

}

#cv-nav ul li ul li a:hover, #cv-nav ul li ul.active li a:hover, #cv-nav ul li ul.active li.active, #cv-nav ul li ul.active li.active a  {
    color: #FAB631;
    font-family: "Helvetica Neue Black Italic",Helvetica,sans-serif;
    text-transform: uppercase;
    background:none;
}

#cv-nav ul li ul {
    display: none;
    clear: both;
}

#cv-nav ul li:hover ul, #cv-nav ul li.hover ul, #cv-nav ul li ul.active {
    display: inline;
    height: 30px;
    left: 0;
    margin: 0;
    padding: 0 0 0 40px;
    position: absolute;
    top: 50px;
    width: 984px;
    background-image: url("subnav-background");
    background-position: left top;
    background-repeat: repeat-x;
}
#cv-nav ul li ul li{
    position:relative;
    float:left;
}

#cv-nav ul li ul li, #cv-nav ul li ul li a, #cv-nav ul li ul.active li, #cv-nav ul li ul.active li a {
    color: #D0D2D2;
    float: left;
    font-family: "Helvetica Neue Black Italic",Helvetica,sans-serif;
    font-size: 12px;
    height: 30px;
    letter-spacing: 0.1em;
    margin: 0;
    padding: 0px 10px 0 0;
    text-transform: uppercase;
    line-height: 30px;
}​ 
```

然而，在 IE 中，浏览器将嵌套`<ul>`的 s 视为另一个`<li>`，并将其浮动在前一项旁边：

![IE中的导航](../Images/a5907ea22a36860393e0c4c2216ad4ee.png)

您可以看到 subnav 元素的放置和样式是（有点）正确的，但嵌套`<ul>`不应该是它自己的按钮。我尝试向元素添加`clear:both;`属性`#cv-nav ul li ul`，但无济于事。

这必须是我忽略的简单事情。任何帮助表示赞赏。

这是一个小提琴：http: [//jsfiddle.net/tylonius/AD7VL/](http://jsfiddle.net/tylonius/AD7VL/)

泰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:30:49.600

我发现了这个问题：

客户希望整个`<li>`元素都是可点击的，而不仅仅是标签。对于其中没有嵌套列表的元素，它工作得很好。然而，对于那些这样做的人来说，将它们全部放在一个`<a>`元素中会混淆 IE。

将 移动`<a>`到标签周围解决了这个问题。

# wix - 使用 WiX/Burn 安装后启动应用程序

> ID：12823722
> 
> 赞同：19
> 
> 时间：2012-10-10T16:05:50.190
> 
> 标签：wix, installation, wix3.6, bootstrapper, burn

我知道 WiX MSI 中存在类似问题，但在安装后使用[Burn](http://en.wikipedia.org/wiki/WiX#Burn)创建的引导程序 EXE 文件中启动应用程序时遇到问题。我的完整包如下。

如果它对场景有任何影响，引导程序将以被动模式启动，因此用户不需要按下任何东西。

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:bal="http://schemas.microsoft.com/wix/BalExtension"
     xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">

    <Bundle Name="My Company AutoUpdater"
            Version="1.0.11"
            Manufacturer="My Company"
            UpgradeCode="--GUID--">

        <BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.HyperlinkLicense">

            <bal:WixStandardBootstrapperApplication SuppressOptionsUI="yes"
                                                    LicenseUrl=""
                                                    LogoFile="logo.png" />
        </BootstrapperApplicationRef>

        <Chain>
            <MsiPackage SourceFile="..\App1\bin\Release\App1.msi" />
            <MsiPackage SourceFile="..\App2\bin\Release\App2.msi" />
        </Chain>
    </Bundle>

    <Fragment>
        <Property Id="WixShellExecTarget" 
                  Value="[#C:\Program Files (x86)\My Company\App1.exe]" />

        <Binary Id="MyCA"
                SourceFile="[#C:\Program Files (x86)\My Company\App1.exe]"/>

            <CustomAction Id="LaunchApplication"
                          BinaryKey="MyCA"
                          ExeCommand="-switch"
                          Execute="deferred"
                          Return="check"
                          HideTarget="no"
                          Impersonate="no" />

            <InstallExecuteSequence>
                <Custom Action="LaunchApplication" 
                        After="InstallFiles" />
            </InstallExecuteSequence>
    </Fragment>
</Wix> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-11T18:02:57.020

您可以向您的 Bundle 添加一个名为“LaunchTarget”的变量，其中包含您要运行的可执行文件的路径：

```
<Variable Name="LaunchTarget" Value="[InstallFolder]\path\to\file.exe"/> 
```

安装后，安装成功屏幕将显示一个“启动”按钮，该按钮将启动您的应用程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T13:07:10.477

它有许多步骤。请记住，我是从引导程序而不是 MSI 文件运行它，因此 levarius 的回答就足够了。

基本上，我删除了原始问题中发布的任何启动逻辑，并创建了一个新包，其唯一功能是启动应用程序（使用自定义操作），并且其位置先前已保存在注册表中 -即应用程序运行时发现有更新可用，在注册表中设置此项。

仅当先前安装了其他软件包之一时才运行该软件包（以下称为 PostInstall）-通过注册表中存在的键（在每个产品的 MSI 中设置）找到。这意味着*新*安装完成后不会自动启动任何应用程序。

以下来自引导程序包（在我的情况下为 WiX 3.6）

```
<!-- Determine what items are installed in the event of an upgrade-->
<util:RegistrySearch Root="HKLM"
                     Key="SOFTWARE\CompanyName"
                     Value="ProductAInstalled"
                     Variable="ProductAInstalled"
                     Result="exists"
                     Format="raw" />
<util:RegistrySearch Root="HKLM"
                     Key="SOFTWARE\CompanyName"
                     Value="ProductBInstalled"
                     Variable="ProductBInstalled"
                     Result="exists"
                     Format="raw" />

<Chain>
    <!-- Package for .NET prerequisite. References a Package that is
         actually in the referenced WiX file WixNetFxExtension. -->
    <PackageGroupRef Id="NetFx40Web"/>

    <MsiPackage SourceFile="..\SetupProductA\bin\Release\SetupProductA.msi"
                InstallCondition="(chkProductA) OR (ProductAInstalled)" />

    <MsiPackage SourceFile="..\SetupProductB\bin\Release\SetupProductB.msi"
                InstallCondition="(chkProductB) OR (ProductBInstalled)" />

    <!-- Run PostInstall only if this was run as part of an upgrade. -->
    <!-- NB: This is the portion that kicks off the downloaded bootstrapper. -->
    <MsiPackage SourceFile="..\PostInstall\bin\Release\PostInstall.msi"
                InstallCondition="(ProductAInstalled) OR (ProductBInstalled)" />
</Chain> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-10T22:40:49.517

使用 WiX 手册*[How To: Run the Installed Application After Setup](http://wix.sourceforge.net/manual-wix3/run_program_after_install.htm)*中给出的建议。有一个内置的 WiX 扩展程序可以为您处理这个问题。您应该能够引用 WiX Util 扩展，将以下代码添加到您的项目中（当然要替换属性的值），然后安排要运行的操作：

```
<Property Id="WixShellExecTarget" 
          Value="[#myapplication.exe]" />
<CustomAction Id="LaunchApplication" 
              BinaryKey="WixCA" 
              DllEntry="WixShellExec" 
              Impersonate="yes" /> 
```

# javascript - 在执行任何绑定回调之前修改 ajax 响应

> ID：12823728
> 
> 赞同：4
> 
> 时间：2012-10-10T16:06:11.700
> 
> 标签：javascript, jquery

**问题**

在触发所有绑定回调之前，我需要一种方法来修改应用程序中的所有 ajax 响应。

**解决方案**

标准的 ajax 事件，无论是全局的还是本地的，都没有提供在触发应用绑定回调之前修改响应的好方法。

触发 ajax 事件的顺序是[jquery 的 ajax 事件文档](http://docs.jquery.com/Ajax_Events)中指示的顺序，即

*   ajaxStart（全局事件）
*   beforeSend（本地事件）
*   ajaxSend（全局事件）
*   成功（本地事件）
*   ajaxSuccess（全局事件）
*   错误（本地事件）
*   ajaxError（全局事件）
*   完成（本地事件）
*   ajaxComplete（全局事件）
*   ajaxStop（全局事件）

请注意，在响应从服务器返回之后但在运行成功/错误回调之前没有执行任何钩子，例如，一种`ajaxReturn`之后`ajaxSend`但之前`success|error`

我破解的方法是使用之前执行的[$.ajaxPrefilter](http://api.jquery.com/jQuery.ajaxPrefilter/)`ajaxStart`并将已经绑定的成功/错误回调包装在另一个函数中，这将允许我修改`options`对象，从而修改返回的数据。

下面是进行包装的实用函数和一个示例：

```
var alterResponse = function (opts) {
    var callback = function (options, originalOptions, jqXHR) {
        if (options.url.match(opts.urlMatch)) {
            // Cache original callback.
            var originalSuccess = originalOptions.success || options.success;
            originalOptions.success = options.success = function () {
                // Call wrapper that will modify the response object.
                opts.successWrapper.call(null, options, originalOptions, jqXHR, originalSuccess);
            };
        }
    };
    if (opts.dataTypes) {
        $.ajaxPrefilter(opts.dataTypes, callback)
    }
    else {
        $.ajaxPrefilter(callback);
    }
};

alterResponse({
    urlMatch: /myurl/g, // Filter urls you what to tamper with.
    successWrapper: function (options, originalOptions, jqXHR, originalFn) {
        options.data.customVar = 'customValue';
        originalFn(options, originalOptions, jqXHR);
    }
}); 
```

我不得不提到我将它用于测试目的，所以我不关心性能、内存和开销。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T21:12:51.637

如果您想在从服务器返回的数据到达事件处理程序之前对其进行修改，请使用 dataFilter：

```
 jquery.ajaxSetup({
        dataFilter: function (data, type) {
            //modify your data here

            return data;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:11:06.390

您可以使用任何全局 ajax 事件

```
$(document).ajaxSuccess(function() {
   alert("An individual AJAX call has completed successfully");
 });
 //or...
$(document).ajaxComplete(function() {
  alert("ALL current AJAX calls have completed");
});

//or.. 
$(function() {
$.ajaxSetup({
    complete: function(xhr, textStatus) {
        // will be raised whenever an AJAX request completes (success or failure)
    },
    success: function(result) {
        // will be raised whenever an AJAX request succeeds
    },
    etc ... you could use any available option
}); 
```

});

# c# - 滚动浏览器对象

> ID：12823735
> 
> 赞同：0
> 
> 时间：2012-10-10T16:06:25.783
> 
> 标签：c#, jquery, .net, webbrowser-control

我有一个在 jQuery 中运行的站点，我将它加载到 C# 中的浏览器对象中。该站点可以正常加载并按预期运行。我遇到的唯一问题是，当屏幕上出现新数据时，浏览器对象中不显示滚动条，并且内容超出浏览器对象的底部，看不见。

我正在寻找解决方案。这是我的想法：

1.  通过 Ajax 发送/接收数据时是否有 C# 浏览器对象事件传递？如果是这样，我可以告诉对象滚动到页面底部吗？

2.  有没有一种方法可以在我的网页上添加使页面自动滚动的 JS？虽然我不认为这会起作用，因为 C# 浏览器对象从技术上讲永远不会到达页面底部。只要您输入数据，它就会继续运行。

3.  还有其他任何人能想到的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:27:57.770

是否设置了 ScrollBarsEnabled 属性？

```
MyWebBrowserControl.ScrollBarsEnabled = True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:40:05.503

通过浏览器控件，您可以在您正在显示的页面上插入/编辑样式 - 请参见[此处](https://stackoverflow.com/questions/5496549/how-to-inject-css-in-webbrowser-control)。

使用这种技术，您应该能够删除或以其他方式覆盖隐藏滚动条的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T21:32:22.370

必须使用 JQuery 自动滚动屏幕。不一定首先弄清楚它为什么不起作用，但是使用 jquery 滚动是一个很好的解决方法。

# delphi - Delphi：文件访问和兼容性文件（Windows 7）

> ID：12823736
> 
> 赞同：4
> 
> 时间：2012-10-10T16:06:33.623
> 
> 标签：delphi, windows-7

假设我的应用程序名为`mysoft`，我要读取的文件是`afile.bin`. `mysoft`位于程序文件夹中。我们还假设 mysoft 没有以管理员权限执行。

```
procedure TForm1.Button1Click(Sender: TObject);
var 
  afile: File of Byte;
begin
  AssignFile(Infile, 'C:\Program Files\mysoft\afile.bin');
  Reset(afile);
  CloseFile(afile);
end; 
```

`afile.bin`上面的简单代码将在兼容性文件文件夹中创建一个副本。

我的问题是：

1.  为什么 ？我只看了该死的文件，我不想修改它。
2.  除了将文件移动到另一个文件夹中之外，如何防止这种情况发生？

同样，我只读取数据文件，我不明白。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T16:25:23.877

调用`Reset`导致文件被打开以进行写入。那是因为默认[`System.FileMode`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.FileMode)值为`fmOpenReadWrite`. 由于您的应用程序运行虚拟化，并且由于您的用户令牌没有管理员权限，因此虚拟化层启动并在虚拟存储中创建文件的副本。

使用传统 Pascal I/O 可用的解决方案是设置`FileMode`为`fmOpenRead`. 然后`Reset`将打开文件进行读取，并且不会调用虚拟化层。

请记住，这`FileMode`是一个影响所有旧版 Pascal I/O 的全局变量。如果您有线程，或者忘记设置`FileMode`回`fmOpenReadWrite`何时需要写入文件，那么您会遇到麻烦。是不是很反感？处理广泛的全局标志来控制文件访问模式！好吧，这些东西早在应用程序有线程之前就发明了。早在 OOP 被发明之前。所以我可以理解为什么会这样。

从中吸取的教训是，是时候切换到一种现代的文件访问形式了。例如，`TFileStream`。

事实上，也是时候在应用程序中禁用虚拟化了。近 6 年前，Vista 中引入了虚拟化。它旨在帮助尚未为 Vista 重新编译的旧程序。您的应用程序不应仍在使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T16:31:11.787

如果您有支持 TStreamReader 类的 Delphi 版本并且您的文件是文本，则可以使用以下代码：

```
procedure TForm1.btn1Click(Sender: TObject);
var
  SR : TStreamReader;
  line : string;
begin
  SR := TStreamReader.Create('C:\Program Files\mysoft\afile.bin');
  try
  while not SR.EndOfStream do
  begin
    line := SR.ReadLine;
  end;
  finally
  SR.Free;
  end;
end; 
```

如果不是，我建议一种适用于任何文件的更经典的方法：

```
procedure TForm1.btn2Click(Sender: TObject);
var
  FS : TFileStream;
  mem : array of byte;
begin
  FS := TFileStream.Create('C:\Program Files\mysoft\afile.bin',fmOpenRead or fmShareDenyNone);
  try
  SetLength(mem,FS.Size);
  FS.Read(mem[0],FS.Size);
  finally
  FS.Free;
  end;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:29:02.550

我相信这是因为 Windows 7 的“*新功能*”不允许您直接访问文件系统区域中的文件（%programfiles%、%systemroot%、%systemdrive% 或 %programdata%）。

尝试更改您的代码以使用打开文件`TFileStream`，并将模式设置为`fmOpenRead`。

我希望它有效。*我没有7个可以尝试*:)

# ms-access - 在两个日期之间将数据分成不同的行？

> ID：12823742
> 
> 赞同：1
> 
> 时间：2012-10-10T16:06:54.383
> 
> 标签：ms-access

当我在访问和使用中创建查询`[forms]![frmmain]![txtfrom]`并`[forms]![frmmain]![txtto]`选择显示某个日期的数据时，如果我选择两个日期，例如 01/10/2012 到 08/10/2012，它会按日期拆分数据。

无论如何将所有日期合并为一个？

嗨，对不起，如果它在某些日期之间，这是我的查询产生的结果：

[http://i.stack.imgur.com/vR7Zn.png](http://i.stack.imgur.com/vR7Zn.png)

我想知道是否有一种方法可以将同一个人的所有日期合并为一个？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:57:28.677

您的问题有点模糊和令人困惑，但我相信您正在寻找的是 Access 所指的 Totals 查询。例如，

```
SELECT CategoryField, Sum(ValueField) AS SumOfValueField
FROM MyTable
WHERE DateField Between Forms!FrmMain!txtFrom And Forms!FrmMain!txtTo
GROUP BY CategoryField 
```

您可以通过单击 sigma (Σ) 工具栏/功能区按钮在 Access 查询设计窗口中创建“总计查询”。有关更多信息，请参阅此处：[使用查询求和数据](http://office.microsoft.com/en-us/access-help/sum-data-by-using-a-query-HA010096310.aspx)

# android - 从 SOAP 响应中获取 XML 文件作为值 xml

> ID：12823748
> 
> 赞同：2
> 
> 时间：2012-10-10T16:07:13.013
> 
> 标签：android, xml, web-services, parsing, soap

我从 .net webservice 获取一个 xml 文件作为值，如下所示

```
 HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetDataForRecommendedBooksResponse xmlns="http://tempuri.org/">
      <GetDataForRecommendedBooksResult>xml</GetDataForRecommendedBooksResult>
    </GetDataForRecommendedBooksResponse>
  </soap:Body>
</soap:Envelope> 
```

我对android很陌生，我想知道有没有办法处理这个文件并从中读取数据？或者我应该只使用一些原始类型而不是 xml 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:44:57.873

有很多方法可以获取 xml 内容我给你我的方式：

您需要前 3 个主要方法：

**方法一：**

```
public static String getXML(String url){     
            String line = null;
            Log.d("-----URL STATE -----","Start getXML");
            try {
                URL u = new URL (url);
                HttpURLConnection huc =  ( HttpURLConnection )  u.openConnection (); 
                huc.setRequestMethod ("GET");  //OR  huc.setRequestMethod ("HEAD"); 
                huc.connect () ; 
                int code = huc.getResponseCode() ;
                System.out.println(code);
                Log.d("-----URL STATE -----","Checking URL");
                if (code==404){
                    line="Wrong URL";
                    Log.d("-----URL STATE -----"," Wrong URL"+code);
                }else{
                //-------------------
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                    HttpResponse httpResponse = httpClient.execute(httpPost);
                    HttpEntity httpEntity = httpResponse.getEntity();
                    line = EntityUtils.toString(httpEntity);
                }

            } catch (UnsupportedEncodingException e) {
                line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
            } catch (MalformedURLException e) {
                line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
            } catch (IOException e) {
                line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
            }

            return line;

    } 
```

**方法二：**

```
public final static Document XMLfromString(String xml){

    Document doc = null;

    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
        is.setCharacterStream(new StringReader(xml));
        doc = db.parse(is); 

    } catch (ParserConfigurationException e) {
        System.out.println("XML parse error: " + e.getMessage());
        return null;
    } catch (SAXException e) {
        System.out.println("Wrong XML file structure: " + e.getMessage());
        return null;
    } catch (IOException e) {
        System.out.println("I/O exeption: " + e.getMessage());
        return null;
    }

    return doc;

} 
```

**方法3：**

```
public static String getValue(Element item, String str) {       
    NodeList n = item.getElementsByTagName(str);        
    return XMLfunctions.getElementValue(n.item(0));
} 
```

**使用 ：**

```
String xml = getXML(url);
Document doc =XMLfromString(xml);
NodeList nodes = doc.getElementsByTagName(yourTAG); //TAG you want to get as String
ArrayList<String> TAGS=new ArrayList<String>();
for (int i = 0; i < nodes.getLength(); i++) {
Element e = (Element) nodes.item(i);
TAGS.add(getValue(e,yourTAG.toString());
} 
```

现在您可以使用 **“标签”**

并且在一切之前始终记住**“StrictMode.setThreadPolicy” ：**

```
if (android.os.Build.VERSION.SDK_INT > 9) {
            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                    .permitAll().build();
            StrictMode.setThreadPolicy(policy);
        } 
```

# android - 使用 Fragment Pager Adapter 时，getItem() 方法被调用了两次

> ID：12823752
> 
> 赞同：6
> 
> 时间：2012-10-10T16:07:29.957
> 
> 标签：android

我正在使用片段寻呼机适配器来实例化我的片段类。我可以这样做，但我的问题是我的 getItem() 方法被调用了两次，这进一步造成了问题。你能解释一下为什么会这样吗？

```
 package com.creatiosoft.rssfeed.adaptor;

    import android.content.Context;
    import android.support.v4.app.Fragment;
    import android.support.v4.app.FragmentManager;
    import android.support.v4.app.FragmentPagerAdapter;
    import android.util.Log;

    import com.creatiosoft.rssfeed.utils.RssItem;
    import com.viewpagerindicator.IconPagerAdapter;

    public class NewsFeedsAdapter extends FragmentPagerAdapter implements
            IconPagerAdapter {

        int[] icon = null;
        String[] content = null;
        String[] URLs = null;
        Context cont;

        public NewsFeedsAdapter(FragmentManager fm, Context context) {
            super(fm);
            Log.i("jk", "constructor");
            this.cont = context;
            RssItem newsFeedAppliaction = (RssItem) cont;
            /*
             * Retrieving the values of the Icons and contents from the application
             * class in utils package
             */
            icon = newsFeedAppliaction.getICONS();
            content = newsFeedAppliaction.getCONTENT();
            URLs = newsFeedAppliaction.getURL();

        }

        /** instantiate a new fragment class */
        @Override
        public Fragment getItem(int position) {
            Log.i("yt", "hello" + position);
            return TestFragment.newInstance(position % content.length, cont);
        }

        @Override
        public CharSequence getPageTitle(int position) {
            return content[position % content.length].toUpperCase();
        }

        public int getIconResId(int index) {
            return icon[index];
        }

        /** return the no of views on the basis of array items */
        @Override
        public int getCount() {

            Log.i("hi", "length" + content.length);
            return content.length;
        }
    } 
```

我用这段代码调用适配器：

```
NewsFeedsAdapter adapter = new NewsFeedsAdapter(
                getSupportFragmentManager(), getApplicationContext());
        /**
         * get the id of the view pager declared in the xml resource and set the
         * adaptor on the view pager
         */
        ViewPager pager = (ViewPager) findViewById(R.id.pager);
        pager.setAdapter(adapter);
        //pager.setCurrentItem(0);

        /**
         * Tab page indicator class is used to indicate the tabs and is accessed
         * from the library class
         */
        TabPageIndicator indicator = (TabPageIndicator) findViewById(R.id.indicator);
        indicator.setViewPager(pager); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-03T07:14:43.570

请注意，寻呼机至少要**提前**一页。这意味着在创建寻呼机时，他至少创建了两个页面——他显示的一个页面和下一个页面，以便允许“分页”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T16:14:50.247

在您的 getItem 方法中，您创建一个片段的新实例。这很糟糕。它让你处于你现在所处的境地。您正在做的是创建一个新的 annynmous 项目，该项目将按照您指定的天数使用。但是当邪恶的 Android 系统决定需要再次与您的 Fragment 对话并从您的适配器请求它时，您是在告诉它“不。我不想！” 而是给它一个与它的老兄弟完全相同的新片段。

要解决此问题，您需要提前对所有片段进行充气，然后返回正确的片段。或者，如果您愿意，请不要。但是请记录您创建的实例，以便您可以返回已创建的片段。

我不知道它被调用两次的确切原因 - 我没有搜索 v4 的源代码，但可能是为了确保该项目被实际检索或系统进入需要重新引用前一个项目的状态。

总之，保留创建的实例——**尤其是**对于像片段、视图和活动这样重的对象。

```
class Adapter extends MyWhateverAdapter {
    Fragment[] myLovelyFragments;

    public Adapter() {
        // Instantiate your fragments and place them into myLovelyFragments
    }

    public int getFragmentCount() {
        return myLovelyFragments.length;
    }

    public Fragment getItem(int position) {
        return myLovelyFragments[position];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T13:15:36.080

您可能遇到的问题不是方法的多次调用`getItem()`。经过一番研究，我发现该方法`isViewFromObject()`具有巨大的作用，并且在其文档中说[“此方法是 PagerAdapter 正常运行所必需的”。](http://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html#isViewFromObject(android.view.View,%20java.lang.Object))

我还发现实现该方法的正确方法是：

```
@Override
public boolean isViewFromObject(View view, Object object) {
    if(object != null){
        return ((Fragment)object).getView() == view;
    }else{
        return false;
    }
} 
```

你可以看[这里](https://github.com/jfeinstein10/JazzyViewPager/issues/10)。

# css - 登录框设计

> ID：12823753
> 
> 赞同：1
> 
> 时间：2012-10-10T16:07:30.660
> 
> 标签：css

jsfiddle 示例[在这里](http://jsfiddle.net/DoyleRaymond/G3VgY/1/)。

在这个例子中，我只想将“JOIN US”链接边框和登录框边框重叠起来，这样当用户点击“JOIN US”链接时，登录框就会出现，看起来就像在一个框中。

我设置：

```
border-bottom : white 
```

在“加入我们”链接中，但它没有按照我的意愿重叠和显示。一件事，我不能删除“z-index”，因为我有必要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:12:41.333

不要`border`为您的 .nav1 类使用标签，而是使用两个单独的`border-top`and `border-bottom`or 简写，但不要使用`border-right`or`border-left`属性。这是我的[jsFiddle](http://jsfiddle.net/DoyleRaymond/G3VgY/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:31:44.037

对于圆边，有一个 CSS 属性 cal `border-radius`。只需使用`element_id/class/name:hover { border-radius: 10px; }`，你就完成了。我建议你看看新的 CSS3 标签和特性。

# php - 使用 PHP/MySQL 的管理控制面板

> ID：12823755
> 
> 赞同：-5
> 
> 时间：2012-10-10T16:07:31.463
> 
> 标签：php, html, mysql

我正在寻找一个网页代码，该代码具有一些以前注册的管理员可以登录的功能，在这样做之后，他们可以从数据库中已有的产品列表中添加、修改或删除数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:17:28.253

这是一个非常开放的问题，实际上有 100 多种方法可以解决这个问题。你基本上需要两个系统

*   登录/注册（允许注册新管理员并允许他们稍后登录）

示例：[http ://net.tutsplus.com/articles/news/how-to-build-a-login-system-for-a-simple-website/?search_index=6](http://net.tutsplus.com/articles/news/how-to-build-a-login-system-for-a-simple-website/?search_index=6)

*   然后是 CRUD 部分

允许从数据库中创建、更新、插入或删除内容的系统。

一个例子是 [http://net.tutsplus.com/tutorials/php/real-world-oop-with-php-and-mysql](http://net.tutsplus.com/tutorials/php/real-world-oop-with-php-and-mysql)

同样，它可能不是最好或最简单的方法。但绝对是一个开始的地方。

# c# - 在 VS 2010 中更新 WCF 服务对 WebService 问题的引用

> ID：12823757
> 
> 赞同：1
> 
> 时间：2012-10-10T16:07:35.040
> 
> 标签：c#, visual-studio-2010, wcf, web-services

我目前的项目正在使用 VS 2010。我是 WCF 的新手。我以前使用过 WebServices，但我从来不需要生成实际的代理。我正在使用 WCF 服务引用调用 Web 服务的当前项目。相当简单明了。我添加了一个新的服务参考，并且在初始设置中一切正常。

更新 WSDL 后，我只需右键单击服务引用并选择“更新引用”。这样做之后，现在有重复的对象名称，并附加了数字“1”。例如：

从 WSDL 结果初始生成：

```
GetWidget (getWidgetRequest)
GetWidgets (getWidgetRequest)
GetWidgetGroups (getWidgetRequest) 
```

更新后，我现在有这个：

```
GetWidget (getWidgetRequest)
GetWidgets (getWidgetRequest)
GetWidgetGroups (getWidgetRequest)

GetWidget1 (getWidgetRequest1)
GetWidgets1 (getWidgetRequest1)
GetWidgetGroups1 (getWidgetRequest1) 
```

所以现在我必须使用 GetWidget1 方法来使用“更新”的服务方法。我的问题是：

1.  有没有办法覆盖以前的方法而不生成新的类型来适应更新？
2.  *每次*更新 WSDL时我都必须手动清理它吗？
3.  我是否错误地更新了服务参考？我需要使用 svcutil.exe 吗？

* * *

我在以 .datasource 结尾的服务引用中找到了 4 个文件。它们都有新的类型名称（GetWidget1.datasource、GetWidgetGroups1.datasource 等）。以下是文件内容的示例：

```
<GenericObjectDataSource DisplayName="GetWidget1" Version="1.0" xmlns="urn:schemas-microsoft-com:xml-msdatasource">
   <TypeInfo>GetWidget1, Service References.WidgetService.Reference.cs, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null</TypeInfo>
</GenericObjectDataSource> 
```

* * *

我们正在使用 Visual Studio 2010 版本 10.0.40219.1 SP1Rel

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:17:51.953

你用的是vs 2010？

这是旧版本中的错误，但已在 2010 年修复 - 请参阅[此处](http://connect.microsoft.com/VisualStudio/feedback/details/505636/update-or-configure-an-existing-service-reference-in-sl-application-you-get-duplicate-binding-and-endpoint-information)

# caching - Azure 缓存（预览版）是否跨部署保留状态？

> ID：12823758
> 
> 赞同：2
> 
> 时间：2012-10-10T16:07:36.157
> 
> 标签：caching, azure, session-state

假设我有一些启用了同位缓存的角色，然后我进行了部署和 VIP 交换。状态是否在交换中保留？我需要将我的 Web 角色的会话状态通过部署保留到暂存，然后进行 VIP 交换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:42:58.493

由于**Azure 缓存（预览版）** 利用您的可用角色实例，因此当您在环境之间执行 VIP 交换时，您将丢失状态。解决此问题的唯一方法是使用默认 Azure 缓存或直接发布到生产环境以避免 VIP 交换。

这种状态丢失可能是好也可能是坏的 - 我已经看到您更改最近发布的状态内管理的序列化对象并在 VIP 交换导致状态加载崩溃后加载它们的情况 - 因此有时删除缓存是有益的在发布期间。

# c++ - MFC CMap。将 cmap 存储在 cmap 中

> ID：12823760
> 
> 赞同：1
> 
> 时间：2012-10-10T16:07:38.280
> 
> 标签：c++, mfc

我想要一个 CMap：

```
CMap<long,long, Cmap<long,long,long,long>> 
```

所以我的数据结构将有一个长作为键，它会重定向到一个值，并且该值将是其中的 long 的 cmap。

示例：如果我收到“1”，它会将我发送到 CMap。
如果我收到 2，它将向我发送不同的 cmap。

这可能吗 ？

不能使用 std/stl 映射。在这个项目中必须使用 MFC CMap 对象。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T17:05:48.913

根据[这个答案](https://stackoverflow.com/a/9604620/416627)， a`CMap`没有复制构造函数，这就是为什么你不能在另一个中包含一个。但是，您仍然应该能够存储指向 a的*指针*`CMap`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T16:14:45.043

~~我认为您在 CMap 中存储的内容没有任何限制，因此您可以这样做，但~~
我强烈建议您使用标准库容器。它们是标准的，这是有原因的。这使它们更易于维护，并使未来的开发人员更容易阅读代码。MS 也将使用新编译器进行带外 C++ 编译器更新，因此您可以通过在未来重新编译来获得额外的改进。

```
std::map<long, std::map<long, long> > myMapOfMaps; 
```

**编辑：**
我检查了 CMap 的标头，@DaveRager 是正确的，没有复制构造函数，所以你唯一的选择是使用长到 CMap* 的 CMap 或使用 std::map。我强烈推荐标准地图。

**Edit2：**
根据您的声明，您不允许在项目中使用标准库，那么您将不得不求助于 to 的`long`映射`CMap*`。我建议您与架构师交谈，了解他们为什么不希望您使用标准库集合。一旦您了解了标准集合的设计，它们就会使代码更加简洁易读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T07:45:33.240

感谢您的回答。

存储指向 CMap 的指针的解决方案可行，但风险太大。

我们使用的另一个可能想到的解决方案是制作包含 CMap 的对象映射。该类将包含标识符和其中的 cmap。意义：

CMap LiveDisconnectionCache；

再次感谢

# php - PHP 代码在包含时是否执行

> ID：12823770
> 
> 赞同：0
> 
> 时间：2012-10-10T16:08:16.623
> 
> 标签：php, javascript, include

在我的网站上，我使用`include($_SERVER["DOCUMENT_ROOT"] . "/header.php");`包含我的标题。但在我`header.php`的头标签内有一个脚本标签。我的问题是，当我将这个脚本包含到我的页面中时，它是否会被执行。

这是我的 header.php 的一部分：http: [//pastebin.com/FbFG3B7E](http://pastebin.com/FbFG3B7E)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:10:26.717

> include 语句包含并评估指定的文件。

[http://php.net/manual/en/function.include.php](http://php.net/manual/en/function.include.php)

这意味着，PHP 被评估和执行。如果您的意思是 HTML 脚本标签：它将被打印出来。您的浏览器还将检索包含文件中的 HTML 并处理它（也执行脚本）。

编辑：我在您的页面上收到以下错误：

> SyntaxError: 后缺少名称。操作员
> 
> 窗口。||(函数(d,s){var z==函数(c){z._.push(c)},$=zs=

在那个位置你想打印一个变量`$zopim`。试试看`{$zopim}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:21:58.933

是的，使用`include();`和`require();`行为就像您只是将代码直接复制到您的页面中一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:10:57.763

如果您的意思是 JavaScript 脚本标签，那么是的，它将在浏览器加载页面时执行。

# mysql - php邮件功能多个电子邮件和mysql_fetch_array

> ID：12823776
> 
> 赞同：0
> 
> 时间：2012-10-10T16:08:42.210
> 
> 标签：mysql, arrays, php

是的，我是编码的初学者。

所以我要做的是首先我得到用户想要接收电子邮件的电子邮件地址（来自 db）

就像

```
$query = mysql_query("Select * FROM receivers WHERE id=$id")
    or die(mysql_error()); 

while ($grabit = mysql_fetch_array($query)) {

    $iAmReceiver = $grabit['email'];
} 
```

因此，如果用户有一封电子邮件将被简单地存储在其中，`$iAmReceiver`但如果用户有多个电子邮件地址用于接收电子邮件怎么办？

另外接下来我使用 php mail 功能发送电子邮件，对于一个电子邮件地址，我可以简单地做

```
$ToEmail = "$iAmReceiver;
mail($ToEmail, $EmailSubject, $MESSAGE_BODY, $mailheader) or die ("Failure"); 
```

所以在多个电子邮件地址发送邮件直接取决于我如何存储多个电子邮件地址？？......像数组一样的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:11:08.233

我猜这样的事情应该有效

```
while ($grabit = mysql_fetch_array($query)) {
    $receivers[] = $grabit['email'];
}

$ToEmail = implode("," , $receivers); 
```

也请考虑升级到 mysqli_* 或 pdo。mysql_* 已弃用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:11:10.283

您可以像这样创建逗号分隔的电子邮件：

```
while ($grabit = mysql_fetch_array($query)) {
    $iAmReceiver .= $grabit['email'].',';
}

$iAmReceiver = rtrim($iAmReceiver,',')

$ToEmail = "$iAmReceiver";

//You can pass comma separated email id as first argument of email if you want to send mail on multiple emails

 mail($ToEmail, $EmailSubject, $MESSAGE_BODY, $mailheader) or die ("Failure"); 
```

# log4net - 配置 log4net 以生成滚动日志文件，滚动编号由下划线分隔

> ID：12823785
> 
> 赞同：2
> 
> 时间：2012-10-10T16:09:15.190
> 
> 标签：log4net, log4net-configuration, log4net-appender

我正在使用 RollingFileAppender 在我的应用程序中生成日志文件。生成的文件名是`MyApp.log`, `MyApp.1.log`, `MyApp.2.log`... 等等。

我希望他们喜欢`MyApp_1.log`, `MyApp_2.log`, `MyApp_3.log`... 等等。
我们怎样才能做到这一点？

我的 log4net appender 配置看起来像 -

```
 <appender name="RollingFile" type="log4net.Appender.RollingFileAppender">
  <file value=".\\Logs\\MyApp.log" />
  <appendToFile value="true" />
  <maximumFileSize value="15360KB" />
  <staticLogFileName value="false" />
  <rollingStyle value="Size" />
  <PreserveLogFileNameExtension value="true" />
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%date %message%-5level%newline" />
  </layout>
 </appender> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:31:55.917

无法按照您想要的方式配置附加程序。您可以复制滚动文件附加程序的源代码并对其进行修改，以便附加程序按要求运行。您必须要小心一点，因为源代码中有几个地方取决于当前的文件名，但当然可以这样做。

# javascript - 文件上传：视图未在非角度事件上更新

> ID：12823788
> 
> 赞同：0
> 
> 时间：2012-10-10T16:09:22.517
> 
> 标签：javascript, angularjs

我正在尝试创建一个上传组件，但是当 onchange 事件触发时我的视图没有更新。我看到正在记录 file.names，但什么也没发生。

我正在使用一个指令，因为我希望能够将我的包放入一个项目中，然后使用`<upload url='/fileserver'></upload>`.

**控制器：**

```
var controllers = {

  UploadCtrl: function ($scope) {

    $scope.images = [];
    $scope.files = [];

    $scope.upload = function (element) {
      $scope.$apply(function ($scope) {
        $scope.files = element.files;
      });
    };

    $scope.$watch('files', function () {

      for (var i = 0; i < $scope.files.length; i += 1) {

        var current = $scope.files[i];
        var reader = new FileReader();

        reader.onload = (function (file) {
          return function (env) {
            console.log(file.name);
            $scope.images.push({ name: file.name, src: env.target.result });
          }
        }(current));

        reader.readAsDataURL(current);
      }

    }, true);

  }

}; 
```

**指令：**

```
var directives = {

  upload: function ($compile) {

    return {
      restrict: 'E',
      link: function (scope, element, attr) {
        scope.url = element.attr('url');
        element.html($compile(template)(scope));
      }
    };

  }

}; 
```

**模板变量（这是多行字符串的cs文件原因）**

```
template = """
<div ng-controller='UploadCtrl'>
  <input type='file' multiple onchange='angular.element(this).scope().upload(this)' />

  <div ng-repeat='image in images'>
    {{image.name}}: <img ng-src='{{image.src}}' width='80' height='80' />
  </div>
</div>
""" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T16:28:49.853

您可能需要使用 $apply 来更新图像：

```
$scope.$apply(function () {
    $scope.images.push({ name: file.name, src: env.target.result });
} 
```

# linux-kernel - 我将如何自然地翻译 Linux 内核中的第 3 层标头？

> ID：12823789
> 
> 赞同：3
> 
> 时间：2012-10-10T16:09:24.243
> 
> 标签：linux-kernel, netfilter

我的任务是为 Linux 内核编写一个 IPv4-IPv6 转换器 ( [RFC 6146](http://www.ietf.org/rfc/rfc6146.txt) )。简而言之，它是一个介于 IPv4 和 IPv6 网络之间的网关，并通过交换数据包头和掩码地址来实现它们之间的透明通信。

看到内核有 Netfilter，一个用于更改数据包的框架，我原本以为我可以编写一个 Netfilter 模块并从那里进行翻译。我可以拦截所有数据包，使用通常的 skb_pull/skb_push 操作调整它们的大小，覆盖一些字节，最后愉快地将它们返回给内核。

事实证明，切换协议对于 Netfilter 来说过于极端了。因为处理 IPv4 数据包的代码完全独立于处理 IPv6 数据包的代码，所以 Netfilter 模块之前和之后的代码都假定网络协议的标头仍然存在。因此，如果我将 IPv4 标头更改为 IPv6 标头，内核会发疯，因为它会继续读取标头，就好像它是 IPv4 标头一样。

（或者至少，这是我在阅读 net/ipv4/ip_input.c 后所相信的；在调用 NF_HOOK 之后内核做的第一件事就是在 ip_rcv_finish() 期间提取 IPv4 标头。）

我看到了第二种选择：从头开始推导出一个新的 sk_buff，让 Netfilter NF_DROP 原始数据包，然后以某种方式发送新数据包。

这就是我对内核原理和风格的有限熟悉使我停滞不前的地方：我想尽量减少对我的解决方案的皱眉，但是替换整个数据包而不是更改其标头似乎不自然、无效率，甚至是对 Netfilter 设计的亵渎。但我不能确定，我希望有经验的建议。另外，我认为没有其他选择。

问题：还有其他选择吗？最自然的方法是什么？

我想支持自 2.6 以来的所有内核版本。如果那是不可能的，那么更新更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:43:57.560

我曾经写过一个 ebtables 目标，该工作是用 VLAN 标记标记以太网帧。这需要在帧数据之前移动和更改以太网报头。所以它在做类似的事情，但在较低级别。skb 可以在开始时就地放大（至少大部分时间，我猜）所以性能应该没问题。

直接链接：http: [//goo.gl/3DPEB](http://goo.gl/3DPEB)

它是“008-ebt-vlan_t-0.1.diff.bz2”，位于：

[http://goo.gl/S1tVv](http://goo.gl/S1tVv)

请注意，我已经超过 4 年没有关心此代码，并且从那时起我就没有使用 Linux 网络代码。与此同时，AFAIK 已将 Ebtables 合并到 netfilter 中。但我认为基本方法应该仍然有效并且可以帮助你。

# c# - 从 Store 应用访问网络共享

> ID：12823794
> 
> 赞同：0
> 
> 时间：2012-10-10T16:09:51.580
> 
> 标签：c#, networking, windows-8, microsoft-metro

StreamReader 和 HttpClient 无法访问网络共享路径。是否可以从 Windows Store 应用程序访问 LAN 网络上的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:20:51.393

Windows 应用商店应用程序有两种访问网络文件的方法：

1.  [使用 HomeGroup 访问图片、音乐和视频库](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj150593.aspx)。只要您声明了这些功能，您就可以在没有用户输入的情况下执行此操作。但仅限于这些库。您也可以访问文档库，但它在商店认证中受到严格监管。
2.  [使用 FilePicker 要求用户选择文件](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh771180.aspx)。这需要用户输入，但允许访问用户可以访问的任何文件。

文章[快速入门：访问家庭组内容](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/JJ218967.aspx)有这些选项的更多变体。

# java - Java：将图像保存在一个特定目录中

> ID：12823796
> 
> 赞同：-2
> 
> 时间：2012-10-10T16:09:58.233
> 
> 标签：java, image-uploading

我在网上找到了这个 servlet java，它从 2 级的 xmlHttpRequest 上传图像。现在，在 servlet 中，我拥有具有我需要的所有特征的图像对象：名称、大小、尺寸、ecc ......现在我想要将图像存储在服务器的目录中。我能怎么做？

servlet 的代码如下（不是我的）：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub
    String ajaxUpdateResult = "";

    try {

        List<FileItem> items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);            
        for (FileItem item : items) {
            if (item.isFormField()) {
                ajaxUpdateResult += "Field " + item.getFieldName() + 
                " with value: " + item.getString() + " is successfully read\n\r";
            } else {
                String fileName = item.getName();
                InputStream content = item.getInputStream();
                response.setContentType("text/plain");
                response.setCharacterEncoding("UTF-8");

                // Do whatever with the content InputStream.

                System.out.println(item.getSize());

                //System.out.println(Streams.asString(content));
                ajaxUpdateResult += "File " + fileName + " is successfully uploaded\n\r";
            }
        }
    } catch (FileUploadException e) {
        throw new ServletException("Parsing file upload failed.", e);
    }
    response.getWriter().print(ajaxUpdateResult);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:11:40.977

简单地试试这个......

```
try {
    // retrieve image
    BufferedImage bi = getMyImage();
    File outputfile = new File("saved.png");
    ImageIO.write(bi, "png", outputfile);
} catch (IOException e) {
    ...
} 
```

**请参阅此链接：**

[http://www.mkyong.com/java/how-to-write-an-image-to-file-imageio/](http://www.mkyong.com/java/how-to-write-an-image-to-file-imageio/)

**////////////////////////////////////////////////////////////////////**

**两种方法来做到这一点**

**1.**`HTTP-POST`与文件一起使用`multiparted`，它需要`Apaches commons`库

```
public String postDataCreation(final String url, final String xmlQuery,final String path){

        final StringBuilder sa  = new StringBuilder();

        final File file1 = new File(path);

        Thread t2 = new Thread(new Runnable(){

            public void run() {

                try
                {
                     HttpClient client = MySSLSocketFactory.getNewHttpClient();
                     HttpPost post = new HttpPost(url);
                     FileBody bin1 = new FileBody(file1);

                     MultipartEntity reqEntity = new MultipartEntity();

                     reqEntity.addPart("dish_photo", bin1);

                     reqEntity.addPart("xml", new StringBody(xmlQuery));

                     post.setEntity(reqEntity);

                     HttpResponse response = client.execute(post);

                     HttpEntity entity = response.getEntity();
                        InputStream i = entity.getContent();

                        Log.d("Vivek", i.toString());
                        InputStreamReader isr = new InputStreamReader(i);

                        BufferedReader br = new BufferedReader(isr);

                        String s = null;

                        while ((s = br.readLine()) != null) {

                            Log.d("YumZing", s);
                            sa.append(s);
                        }

                }
                catch (Exception ex){

                }

            }

        });

        t2.start();

        try {
            t2.join();
        } catch (InterruptedException e) {

            e.printStackTrace();
        }

        System.out.println("Getting from Post Data Method "+sa.toString());
        return sa.toString();
    } 
```

**2.**使用`FTP`上传，使用`Apaches commons`库

```
 public void goforIt(){

            FTPClient con = null;

            try
            {
                con = new FTPClient();
                con.connect("xx.xx.xx.xx");

                if (con.login("Administrator", "361wl-sin"))
                {
                    con.enterLocalPassiveMode(); // important!
                    con.setFileType(FTP.BINARY_FILE_TYPE);
                    String data = "/sdcard/prerakm4a.m4a";
                    //ByteArrayInputStream in = new ByteArrayInputStream(data.getBytes());
                    FileInputStream in = new FileInputStream(new File(data));
                    boolean result = con.storeFile("/prerakm4a.m4a", in);
                    in.close();
                    if (result) System.out.println("upload result"+" succeeded");
                    con.logout();
                    con.disconnect();
                }
            }
            catch (Exception e)
            {
                e.printStackTrace();
            }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:14:58.980

```
try {
// retrieve image
BufferedImage bi = ImageIO.read(content);
File outputfile = new File(fileName);
ImageIO.write(bi, "png", outputfile);
} catch (Exception e) {
e.printStackTrace();
} 
```

# gcc - CMake：如何显示编译器的标准输出

> ID：12823799
> 
> 赞同：30
> 
> 时间：2012-10-10T16:10:07.950
> 
> 标签：gcc, cmake

这应该很简单，但我很难弄清楚。通常，使用**make**构建项目时，只显示编译器的 stderr。如何配置 CMake 以显示编译器的标准输出？如果这很重要，我正在使用 GCC。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-11T13:54:52.817

您可以使用`make VERBOSE=1`和`CMAKE_VERBOSE_MAKEFILE`变量来显示 CMake 正在运行的命令。

CMake 还会自动为源生成预处理目标，但没有目标可以同时预处理每个源。要预处理单个文件，运行`make source.i`，它会出现在`CMakeFiles/<targetname>.dir/source.i`. 实际路径可能不同，因此如果它不起作用，您可以检查`Makefile`CMake 生成的适当目标。

# java - jFreeChart：自定义线性图表轴标签

> ID：12823803
> 
> 赞同：1
> 
> 时间：2012-10-10T16:10:14.353
> 
> 标签：java, encoding, jfreechart

我正在使用 jFreechart 创建这样的折线图（取自演示）：

```
final JFreeChart chart = ChartFactory.createLineChart(
            "Line Chart Demo 1",       // chart title
            "Type",                    // domain axis label
            "Value",                   // range axis label
            dataset,                   // data
            PlotOrientation.VERTICAL,  // orientation
            true,                      // include legend
            true,                      // tooltips
            false                      // urls
        ); 
```

是否可以将范围和域转换为 unicode 编码系统？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:42:47.847

这是一个在图表图例和注释中显示 Unicode 字形的一般[示例。](https://stackoverflow.com/a/6585876/230513)更多[在这里](https://stackoverflow.com/a/6659255/230513)。另请参阅[`org.jfree.chart.axis.SymbolAxis`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/axis/SymbolAxis.html)。

![图片](../Images/56fd22c955efb13594c8164a1feba558.png)

# css - 如何获取部分字符串的超链接 - 在导航栏“li”中

> ID：12823804
> 
> 赞同：-1
> 
> 时间：2012-10-10T16:10:13.507
> 
> 标签：css, twitter-bootstrap, navbar

我想在导航栏中的“li”处显示一个字符串（例如“欢迎用户名”），而只有“用户名”是一个超链接：例如

```
 <li>Welcome <a href="/users/username">username</a></li> 
```

“欢迎[用户名](http://example.com/users/username)” <- 像这样。

在导航栏中执行此操作时，我将字符串“欢迎用户名”分成两行

请看小提琴：

[http://jsfiddle.net/9ywsY/7/show](http://jsfiddle.net/9ywsY/7/show)

已解决：http : [//jsfiddle.net/9ywsY/12/show](http://jsfiddle.net/9ywsY/12/show)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:14:58.843

```
.nav li a { display: inline-block;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:18:45.720

```
.nav > li > a {
    display: inline;
} 
```

内联块在所有浏览器上都不能正常工作:)

或者，如果您真的希望它成为一个块，您可以将所有文本放在锚标记内

```
<ul>
      <li><a href="/users/username">Welcome username</a></li>
</ul> 
```

# ruby-on-rails-3 - Rails 3：确定哪个控制器处于活动状态

> ID：12823810
> 
> 赞同：1
> 
> 时间：2012-10-10T16:10:33.170
> 
> 标签：ruby-on-rails-3, model-view-controller

我有一个可以被多个控制器访问的视图。在大多数情况下，它们显示相同的信息，但此信息从一个控制器到下一个控制器略有调整。我需要一种方法来区分在任何给定时刻正在使用哪个控制器。我通过在控制器中声明一个“@context”变量来做到这一点，例如：

```
@context = "index" 
```

或者

```
@context = "show" 
```

然后我可以轻松地在视图中检查正在使用哪个控制器。例如：

```
<% if @context == "index" %>
  <h1>Index</h2>
<% elsif @context == "show %>
  <h2>Show</h2>
<% end %> 
```

然而，这感觉很hacky，我敢肯定有一个更清洁的解决方案。有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:22:01.943

您可以使用 controller_name 和 action_name 助手，例如

```
<%= controller_name %>
<%= action_name %> 
```

# unit-testing - 我应该如何组织我的单元和集成测试？

> ID：12823813
> 
> 赞同：2
> 
> 时间：2012-10-10T16:10:54.130
> 
> 标签：unit-testing, node.js, integration-testing

我正在处理将变成一个相当大`node.js`的 javascript 应用程序的东西，并开始考虑如何组织我的测试。
该应用程序基本上是一个 REST API，因此请求经过身份验证，用户提交的数据经过验证，然后保存在数据库中。

我完全不熟悉如何组织这种规模的项目的测试。

我是否应该从模块化单元测试开始单独测试每个资源，以全面集成测试结束？
或者我应该逐层测试 - 即为每个资源分别进行身份验证、验证、持久性和集成？

**什么是常识？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T20:26:25.993

测试方法没有对错之分。重要的是进行有意义的测试以增加价值。有一些测试总比什么都没有好。

我的方法是为我正在处理的东西编写测试，而不区分单元测试和集成测试。因此，如果我正在开发 REST 服务，那么我将为 REST 服务编写测试。如果我正在研究身份验证和持久性，那么我将为身份验证和持久性编写测试。

编写还设置和管理测试所需的测试数据的测试也很重要。这很重要，这样任何人都可以执行您的测试。同样重要的是，您的测试可以在开箱即用的持续集成环境中执行。

## 测试您修复的每个缺陷

如果正在处理缺陷，那么我将编写失败的测试，即重现缺陷，然后在我的代码修复后验证我的测试是否通过。在我看来，这是最重要的事情。由于这些测试验证了问题一旦修复就会保持不变。

## 重构代码

当您进行一些代码重构时，您编写的所有测试的价值都会变得很方便。如果您的重构代码未能通过现有测试，那么您的重构代码就会损坏，需要修复，直到所有现有测试都通过。

## 当你没有时间

如果您由于时间不足或其他原因必须在测试类型之间进行选择，那么编写更广泛的测试或端到端测试或集成测试会带来最大的价值，因为这些测试直接或间接地执行身份验证、持久性等. 将此与用于持久性的单元测试进行比较，您可以从集成测试中获得更多收益，因为集成测试将间接测试您的持久性。

# javascript - 更改后伸元素内的图像

> ID：12823816
> 
> 赞同：1
> 
> 时间：2012-10-10T16:11:05.990
> 
> 标签：javascript, jquery, jquery-backstretch

目前我正在尝试实现用我的后伸改变图像的能力。Backstretch 像这样绑定到块级元素，

```
$("#background-image.slideshow").backstretch(backgroundImages, {fade: 750,duration: 4000}); 
```

然后我想要做的是能够点击一个链接获取href并添加一个新的回溯图像但是现在发生的是一个新的回溯实例被创建，这是我的点击代码，

```
$("#thumb-gallery a").click(function(e) {
// Prevent the click from actually following the href
e.preventDefault();
// Backstretch
$.backstretch( $(this).attr("href") );
}); 
```

我哪里错了？我想要做的就是更改#background-image.slideshow 中的后拉伸图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:26:19.453

您可以只替换 backstretch 生成的 div 中的图像源：

```
$('#backstretch img').attr('src','your_image_url'); 
```

# java - 安卓：onSaveInstanceState。如何将条目保存到 EditVew？

> ID：12823821
> 
> 赞同：0
> 
> 时间：2012-10-10T16:11:12.607
> 
> 标签：java, android

我正在尝试将用户条目保存到表单中，但由于某种原因我无法让它工作。当我终止应用程序并重新启动时，数据不会出现。

我的目标是，如果用户完成表单的一半并且应用程序被终止，那么当应用程序重新启动时，条目仍将保留。任何指导将不胜感激。

```
public class MainActivity extends Activity {
     public final static String EXTRA_FROM = "com.example.assignment1.FROM";
     public final static String EXTRA_TO = "com.example.assignment1.TO";
     public final static String EXTRA_CC = "com.example.assignment1.CC";
     public final static String EXTRA_BCC = "com.example.assignment1.BCC";
     public final static String EXTRA_SUBJECT = "com.example.assignment1.SUBJECT";
     public final static String EXTRA_COMPOSE = "com.example.assignment1.COMPOSE";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    protected void onSaveInstanceState(Bundle outState)
    {
        super.onSaveInstanceState(outState);
        EditText emailFrom =(EditText) findViewById(R.id.editEmailFrom);
        EditText emailTo =(EditText) findViewById(R.id.editEmailTo);
        EditText emailCc =(EditText) findViewById(R.id.editEmailCc);
        EditText emailBcc =(EditText) findViewById(R.id.editEmailBcc);
        EditText emailSubject =(EditText) findViewById(R.id.editEmailSubject);
        EditText emailCompose =(EditText) findViewById(R.id.editEmailCompose);

        String from = emailFrom.getText().toString();
        String to = emailTo.getText().toString();
        String cc = emailCc.getText().toString();
        String bcc = emailBcc.getText().toString();
        String subject = emailSubject.getText().toString();
        String compose = emailCompose.getText().toString();

        outState.putString(EXTRA_FROM, from);
        outState.putString(EXTRA_TO, to);
        outState.putString(EXTRA_CC, cc);
        outState.putString(EXTRA_BCC, bcc);
        outState.putString(EXTRA_SUBJECT, subject);
        outState.putString(EXTRA_COMPOSE, compose);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedState)
    {

        EditText emailFrom =(EditText) findViewById(R.id.editEmailFrom);
        EditText emailTo =(EditText) findViewById(R.id.editEmailTo);
        EditText emailCc =(EditText) findViewById(R.id.editEmailCc);
        EditText emailBcc =(EditText) findViewById(R.id.editEmailBcc);
        EditText emailSubject =(EditText) findViewById(R.id.editEmailSubject);
        EditText emailCompose =(EditText) findViewById(R.id.editEmailCompose);

        String from = savedState.getString(EXTRA_FROM);
        String to = savedState.getString(EXTRA_TO);
        String cc = savedState.getString(EXTRA_CC);
        String bcc = savedState.getString(EXTRA_BCC);
        String subject = savedState.getString(EXTRA_SUBJECT);
        String compose = savedState.getString(EXTRA_COMPOSE);

        emailFrom.setText(from);
        emailTo.setText(to);
        emailCc.setText(cc);
        emailBcc.setText(bcc);
        emailSubject.setText(subject);
        emailCompose.setText(compose);
    }

    public void emailSend (View sendButton) 
    {
        Intent intent = new Intent(this,DisplayEmailActivity.class);
        EditText emailFrom =(EditText) findViewById(R.id.editEmailFrom);
        EditText emailTo =(EditText) findViewById(R.id.editEmailTo);
        EditText emailCc =(EditText) findViewById(R.id.editEmailCc);
        EditText emailBcc =(EditText) findViewById(R.id.editEmailBcc);
        EditText emailSubject =(EditText) findViewById(R.id.editEmailSubject);
        EditText emailCompose =(EditText) findViewById(R.id.editEmailCompose);

        String from = emailFrom.getText().toString();
        String to = emailTo.getText().toString();
        String cc = emailCc.getText().toString();
        String bcc = emailBcc.getText().toString();
        String subject = emailSubject.getText().toString();
        String compose = emailCompose.getText().toString();

        intent.putExtra(EXTRA_FROM,from);
        intent.putExtra(EXTRA_TO,to);
        intent.putExtra(EXTRA_CC,cc);
        intent.putExtra(EXTRA_BCC,bcc);
        intent.putExtra(EXTRA_SUBJECT,subject);
        intent.putExtra(EXTRA_COMPOSE,compose);

        startActivity(intent);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:52:40.583

> 当我终止应用程序并重新启动时，数据不会出现。

当然。如果您终止应用程序（例如，任务终止程序），您保存的实例状态就会消失。要处理这种情况，您需要将数据持久化到文件、数据库等。

要测试是否`onSaveInstanceState()`有效，请旋转屏幕或进行一些其他类型的配置更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:25:58.937

要保存一些项目，最好的方法是使用 SharedPreferences。

前段时间我在这篇文章中放了一个例子：[SharedPreferences](https://stackoverflow.com/questions/12532476/permanently-adding-an-item-to-an-existing-alertdialog/12533138#12533138)。

祝你好运。

# django - Django 模型在单元测试中失败，但在 shell 中没有

> ID：12823822
> 
> 赞同：1
> 
> 时间：2012-10-10T16:11:15.370
> 
> 标签：django

我正在对我的新 Django 代码进行测试。我有以下型号：

```
class Places(models.Model):
    name = models.CharField(max_length=20)
    street = models.CharField(max_length=50)
    number = models.IntegerField()
    confirmed = models.BooleanField()
    notes = models.TextField()

    def __unicode__(self):
        return self.address

    class Meta:
        db_table = "Places" # to prevent the prefixes from being added on 
```

当我在 manage.py shell 中执行此操作时，我得到了正确的响应：

```
from my_app.models import Places

Places.objects.get(name='home').confirmed

>>> True 
```

当在我的应用程序中的单元测试（manage.py test myapp）下执行相同的代码时，我收到错误：

```
Places matching query does not exist django 
```

当我尝试使用 PDB 时，我发现 Django 将数据库读取为空（一个空集）而不是存储任何数据。

我还在代码中尝试了 RAW SQL，但也失败了，但在 shell 中工作。

我检查了 sql 本身中的数据库并且数据存在。我执行了等效的 SQL 代码，它也返回 True。

这是 Django 中的错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:21:37.843

单元测试总是针对一个新的空数据库执行。您是否在测试的设置步骤中创建了数据，或者提供了数据夹具？

# database - 数据库中的唯一实体

> ID：12823825
> 
> 赞同：1
> 
> 时间：2012-10-10T16:11:18.153
> 
> 标签：database, entity, unique

我们如何对数据库进行约束，以便只有一个实体适合所需的位置？

例如，我们想为 Country 数据库设置一个总裁。我们如何定义“is-president”属性，以便只有一个条目可以具有“true”值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T14:12:14.290

您可以在将数据插入表时执行此操作。如果要添加总裁，首先检查是否有总裁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:20:27.903

您最好以不同的方式对此进行建模 - 例如有一个`Countries`表，一个`People`表，然后是一个表，该表`Presidents`具有表的外键和`Countries`表的外键`People`。

然后，您可以对两个外键的复合值添加唯一约束，以确保`Presidents`表中每个国家/地区仅存在 1 个人。

# facebook - Facebook 喜欢按钮不显示面孔（缩略图个人资料图片）

> ID：12823826
> 
> 赞同：0
> 
> 时间：2012-10-10T16:11:23.973
> 
> 标签：facebook, facebook-like

当我将链接粘贴到包含 fb like 按钮的页面时：http: [//developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/) 我看不到人的面孔（缩略图个人资料图片）或姓名谁喜欢我的页面。

谁能给我一些建议如何进行检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:17:21.970

点赞按钮只会显示当前用户朋友的面孔。如果您认为这是错误的，请在[http://developers.facebook.com/bugs提交错误](http://developers.facebook.com/bugs)

[目前有一个高优先级错误（10 月 4 日下午 1:59），带有“Like”按钮[http://developers.facebook.com/bugs/496305530382482?browse=search_50759f368544d5574573563](http://developers.facebook.com/bugs/496305530382482?browse=search_50759f368544d5574573563)]

# css - p:confirmDialog 如何改变图片和文字颜色

> ID：12823827
> 
> 赞同：0
> 
> 时间：2012-10-10T16:11:30.307
> 
> 标签：css, image, primefaces, modal-dialog, graphic

我需要使用素面显示确认对话框。但我需要一个自定义图标（黄色三角形）和红色文本。通过使用以下内容，我得到了一个带有黑色文本的蓝色三角形，但我不确定如何使用我的图标以及设置对话框文本的样式。

```
 <p:column id="billing_address_unassign"
    headerText="#{billingAccount_msgs['addresses.table.column.unassign']}"
    styleClass="col10">
    <p:commandButton immediate="true" id="address_unassign"
        styleClass="cart-button-class" icon="delete"
        title="#{billingAccount_msgs['unassign.address.tooltip.text']}"
        oncomplete="unassignBillingAddressConfirmationDialog.show()">
        <f:setPropertyActionListener value="#{billingAddress}"
            target="#{billingAddressBean.selectedBillingAddress}" />
    </p:commandButton>
</p:column>
  </p:dataTable>

  <p:confirmDialog appendToBody="true"
id="unassignBillingAddressConfirmationDialog"
styleClass="confirm-dialog"
message="#{billingAccount_msgs['unassignBillingAddress.confirmation']}"
header="#   
    {billingAccount_msgs['unassignBillingAddress.confirmation.dialog.header']}"
   severity="alert" widgetVar="unassignBillingAddressConfirmationDialog"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T06:24:55.463

您必须创建自己的黄色图标，然后在确认对话框中放置您的图标而不是默认图标。只需使用 css 即可将文本更改为红色。

将以下内容添加到您的 css 文件中：

```
/*Red text in confirm dialog*/
.ui-confirm-dialog .ui-dialog-content p { color: red; }

/*Yellow triangle in confirm dialog */
.ui-confirm-dialog .ui-dialog-content p span { background-image: url("#resource['images:yellow-triangle.png']}") no-repeat} 
```

# matlab - 非线性函数参数估计——matlab、lsqnonlin、fzero

> ID：12823828
> 
> 赞同：3
> 
> 时间：2012-10-10T16:11:32.390
> 
> 标签：matlab, least-squares, nonlinear-functions

我在拟合问题上遇到困难。从我得到的错误中，我想边界没有正确定义，我还没有找到解决方案。任何帮助将不胜感激。

解决相同问题的替代方法也被接受。

# 描述

我必须估计以下类型的非线性函数的参数：

```
A*y(x) + B*EXP(C*y(x)) + g(x,D) = 0 
```

受参数`PAR = [A,B,C,D]`在范围内

```
LB < PAR < UB 
```

# 代码

为了解决这个问题，我使用了 Matlab 函数`lsqnonlin`和`fzero`. 使用的简化代码报告如下。

问题分为四个功能：

1.  `parameterEstimation`- （lsqnonlin 函数的包装器）
2.  `objectiveFunction_lsq`- （参数估计的目标函数）
3.  `yFun`- （返回变量 y 值的函数）
4.  `objectiveFunction_zero`- （用于计算 y 的非线性方程的目标函数）

# 错误

在数据上运行代码我得到了这个警告

> 警告：下限长度 > 长度（x）；忽略额外的界限

这个错误

> 初始用户提供的目标函数评估失败。LSQNONLIN 无法继续

这让我认为边界没有正确使用或没有正确调用，但问题可能出在其他地方。

* * *

```
function Done = parameterEstimation()
    %read inputs
    Xmeas = xlsread('filepath','worksheet','range');
    Ymeas = xlsread('filepath','worksheet','range');

    %inital values and boundary conditions
    initialGuess = [1,1,1,1]; %model parameters initial guess
    LB = [0,0,0,0]; %model parameters lower boundaries
    UB = [2,2,2,2]; %model parameters upper boundaries

    %parameter estimation
    calcParam = lsqnonlin(@objectiveFunction_lsq_2,initialGuess,LB,UB,[],Xmeas,Ymeas);
    Done = calcParam;

function diff = objectiveFunction_lsq_2(PAR,Xmeas,Ymeas)
    y_calculated = yFun(PAR,Xmeas);
    diff = y_calculated-Ymeas;

function result = yFun(PAR,X)
    y_0 = 2;
    val = fzero(@(y)objfun_y(y,PAR,X),y_0);
    result = val;

function result = objfun_y(y,PAR,X)
    A = PAR(1);
    B = PAR(2);
    A = PAR(3);
    C = PAR(4);
    D = PAR(5);

    val = A*y+B*exp(y*C)+g(D,X);
    result = val; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:47:46.443

我没有优化工具箱，但你确定你可以像这样传递常量吗？

我会这样做：

```
calcParam = lsqnonlin(@(PAR) objectiveFunction_lsq_2(PAR,Xmeas,Ymeas),initialGuess,LB,UB); 
```

# javascript - 如何比较 6 个值并确定最大值

> ID：12823829
> 
> 赞同：1
> 
> 时间：2012-10-10T16:11:33.090
> 
> 标签：javascript

我正在编写一个脚本，该脚本需要确定哪个变量中的数字最高。我有 6 个变量，每个变量在运行时都传递一个值，我需要确定哪个变量中的数字最高。

由于潜在组合的数量（6！= 6*5*4*3*2*1 = 720），直接比较是不可能的。我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T16:13:03.223

`Math.max(5,10,15,20);`将返回 20

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:14:19.737

在循环遍历每个变量时保留一个临时变量“max”，该变量将包含循环中该点的当前已知最大值。与每个索引的该变量进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:14:06.457

使用`Math.max`功能。它将返回最大元素。

# php - MYSQL 最佳行计数方法 - 大型数据库

> ID：12823835
> 
> 赞同：1
> 
> 时间：2012-10-10T16:12:07.163
> 
> 标签：php, mysql, database

我有一个包含超过 400,000 行的 MySQL 数据库。对于我的基于 Web 的脚本，我有一个页面功能。确定应该有多少页的步骤之一是返回表中的行数。

让我们假设表名是**`data`**。

我想知道只返回数据库中行数的最有效方法是什么。

我显然可以做类似的事情：

```
$getRows = mysql_query("SELECT id FROM `data`") or die(mysql_error());
$rows = mysql_num_rows($getRows); 
```

所以它只选择id。但是，这将选择 400,000 + ID 的数据并将其存储在堆栈中（我认为？），并且使用诸如查找表状态之类的方法似乎效率较低。我只是不是 100% 确定如何使用表格状态方法。

反馈和意见会很棒。多谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:14:19.453

使用**[次数](http://www.tizag.com/mysqlTutorial/mysqlcount.php)**

`SELECT count(id) FROM data`

有关获取计数的更多信息，请参阅[此问题](https://stackoverflow.com/questions/1659977/mysql-count-vs-mysql-select-which-one-is-faster)。确保您的 id 在您的表中有索引。

* * *

现在，要查找**唯一**行数，您可以执行

`SELECT count(distinct(id)) FROM data`

* * *

或者，如果您想找到**最高的 ID**号（如果您的 ID 是自动增量且唯一的），您可以尝试`SELECT max(id) FROM data`返回当前的最高 ID 号。

* * *

我强烈推荐这个网站来学习这些基本功能： [http ://sqlzoo.net/](http://sqlzoo.net/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T16:13:15.323

400,000 行根本不算多。保持简单，只需执行以下操作：

```
select count(*) 
from `data` 
```

# ruby - 在Ruby中格式化字符串的雄辩方式？

> ID：12823839
> 
> 赞同：0
> 
> 时间：2012-10-10T16:12:13.893
> 
> 标签：ruby, regex, string, ruby-1.9.3

```
str = 'foo_bar    baz  __goo' 
```

应该打印为

```
Foo Bar Baz Goo 
```

尝试使用`split /(\s|_)/`，但它返回`'_'`and`' '`和多个空格...？

红宝石 1.9.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:18:00.790

尝试这个：

```
str.split(/[\s_]+/).map(&:classify).join(" ") 
```

如果您可以获得积极的支持，或者

```
str.split(/[\s_]+/).map(&:capitalize).join(" ") 
```

如果你想要纯红宝石。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T16:37:12.520

假设您的意思是`/(\s|_)/`（斜线的方向很重要！），您的正则表达式非常接近。您在结果中获得分隔符（空格和下划线）的原因是括号：它们指示拆分器将分隔符包含在返回的数组中。

你得到额外的空字符串的原因是你正在拆分`\s`，它只匹配一个空格（或制表符），或者'_'，它只匹配一个下划线。如果您想将任意数量的空格或下划线视为单个分隔符，您需要添加`+`到您的正则表达式 - 这意味着“一个或多个先前的东西”。

but`\s|_+`表示“一个空格，或一个或多个下划线”。您想将 应用于`+`整个表达式，而不仅仅是`_`. 这让我们回到了括号。在这种情况下，您希望将两个备选方案组合在一起而不捕获（并返回）它们；语法是`(?:...)`. 所以这是结果：

```
str.split(/(?:\s|_)+/) 
```

现在，如果你想规范化大小写，你想`capitalize`在每个字符串上运行，你可以用 来做`map`，像这样：

```
str.split(/(?:\s|_)+/).map { |s| s.capitalize } 
```

或使用快捷方式：

```
str.split(/(?:\s|_)+/).map(&:capitalize) 
```

到目前为止，所有这些解决方案都返回一个字符串数组，您可以用它来做各种事情。但是，如果您只想将它​​们重新组合成一个字符串，则可以使用`join`. 例如，将它们放在一起并在它们之间留一个空格：

```
str.split(/(?:\s|_)+/).map(&:capitalize).join ' ' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T16:15:21.250

尝试拆分字符串：

```
[\s_]+ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T17:19:47.657

使用`/[\ _]+/`，它会查找一个或多个出现或空格或下划线。通过这种方式，它能够消除多个下划线、空格或两者的组合。之后你得到一个数组，所以你用它`map`来转换它们中的每一个。稍后您可以使用`join`. 查看示例 -

将它们列在列表中 -

```
str.split(/[\ _]+/).map {|s| s.capitalize }
 => ["Foo", "Bar", "Baz", "Goo"] 
```

将它们作为一个完整的字符串 -

```
str.split(/[\ _]+/).map {|s| s.capitalize }.join(" ")
 => "Foo Bar Baz Goo" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T17:19:50.783

这里是纯 Ruby 版本：

```
str = 'foo_bar    baz  __goo'
str.split(/[ _]+/).map{|s| s[0].upcase+s[1..-1]}.join(" ") 
```

# algorithm - 搜索大量潜在的解决方案

> ID：12823845
> 
> 赞同：0
> 
> 时间：2012-10-10T16:12:59.477
> 
> 标签：algorithm

我有一个相当困难的问题（甚至可能是一个 NP 难题 ^^），在大量结果中寻找解决方案。也许有一个算法。

下面的练习是人为的，但它是一个很好的例子来说明我的问题。

有一个带有整数的大数组。可以说它有 100.000 个元素。

```
int numbers[] = {-123,32,4,-234564,23,5,....} 
```

我想以一种相对快速的方式检查这个数组中任何两个数字的总和是否等于 0。换句话说，如果数组有“-123”，我想查找是否还有一个“123”数字。

最简单的解决方案是蛮力 - 检查一切。这给了 100.000 x 100.000 一个很大的数字 ;-) 显然蛮力方法可以通过优化。订单号并仅检查负数和正数。我的问题是 - 有没有比优化蛮力更好的方法来找到解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:16:31.257

首先，按值的大小对数组进行排序。

然后，如果数据包含满足您所追求的条件的一对，则它包含数组中相邻的这样一对。因此，只需扫描寻找总和为 0 的相邻对。

总体时间复杂度是`O(n log n)`排序，`O(n)`如果你使用“作弊”排序而不是仅仅基于比较。显然，它不能在少于线性的时间内完成，因为在最坏的情况下，如果不查看所有元素，您将无法完成。我认为`n log n`在计算的决策树模型中可能是最优的，但这只是因为它“感觉有点像”元素唯一性问题。

替代方法：

一次将一个元素添加到基于哈希或基于树的容器中。在添加每个元素之前，检查它的负数是否存在。如果是这样，请停止。

在有很多合适对的情况下，这可能会更快，因为您节省了对整个数据进行排序的成本。也就是说，只要数据的任何子集处于其最终顺序，您*就可以编写一个修改后的排序，通过检查相邻对来提前退出，但这是努力。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T16:16:49.597

蛮力将是一个`O(n^2)`解决方案。你当然可以做得更好。

从我的头顶上，首先排序它。堆排序的复杂度为`O(nlogn)`.

现在，对于第一个元素，比如说`a`，你知道你需要找到一个元素`b`，比如`a+b = 0`。这可以使用二进制搜索找到（因为您的数组现在已排序）。二分查找的复杂度为`O(logn)`.

`O(nlogn)`这为您提供了复杂性的整体解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T16:22:40.230

您提供的示例可以及时蛮力解决`O(n^2)`。

您可以开始将数字 ( `O(n·logn)`) 从小到大排序。如果您将一个指针放在开头（“最负数”）和另一个指针在末尾（“最正数”），您可以`O(n)`按照以下过程在附加步骤中检查是否存在这样的一对数字：

*   如果两个指针处的数字具有相同的模块，则您有解决方案
*   如果不是，则将模块较大的数字的指针移向“零”（即，如果是负侧的指针，则增加，如果是正侧的指针，则减少）
*   重复直到找到解决方案，或者指针交叉。

总复杂度为`O(n·logn)+O(n) = O(n·logn)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T16:26:46.057

使用 对数组进行排序`Quicksort`。发生这种情况后，使用两个索引，我们称它们为`positive`和`negative`。

```
positive <- 0
negative <- size - 1

while ((array[positive] > 0) and (array(negative < 0) and (positive >= 0) and (negative < size)) do
    delta <- array[positive] + array[negative]
    if (delta = 0) then
        return true
    else if (delta < 0) then
        negative <- negative + 1
    else
        positive <- positive - 1
    end if
end while
return (array[positive] * array[negative] = 0) 
```

你没有说如果 0 是数组的一部分，算法应该做什么，我假设在这种情况下应该返回 true 。

# ussd - USSD 申请流程... 如何设计或编程？

> ID：12823846
> 
> 赞同：0
> 
> 时间：2012-10-10T16:13:00.317
> 
> 标签：ussd

如何设计和 USSD 应用程序流程。我们将只获得用户和用户输入的唯一会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:39:34.063

我的方法是：

HashMap<msisdn, 有限状态机>()。

您可以使用上一个[问题](https://stackoverflow.com/questions/7492272/design-pattern-suggestion-for-ussd)了解更多信息。

# c# - 如何在 C# 中找到两个 DateTime 之间的正差

> ID：12823850
> 
> 赞同：6
> 
> 时间：2012-10-10T16:13:03.967
> 
> 标签：c#, datetime

我有两个 DateTime 变量，无论哪个在时间上大于另一个。

```
Datetime date1, date2; 
```

我应该如何在“天”的基础上找到两者的积极差异？

`(date1-date2)`可能会给出正面/负面的结果，但我也需要天数差异。

假设两者都在同一个时区

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T16:15:57.833

```
double days = Math.Abs((date1-date2).TotalDays); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T16:16:53.390

如果你想要一个（无符号）整数值：

```
Math.Abs(date1.Subtract(date2).Days) 
```

如果你想要一个（无符号）双精度值：

```
Math.Abs(date1.Subtract(date2).TotalDays) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T16:17:28.623

你可以试试：

```
Math.Abs((dateA - dateB).Days); 
```

或者如果您希望结果为小数：

```
Math.Abs((dateA - dateB).TotalDays); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T16:15:34.627

只需在时间跨度上使用[Days](http://msdn.microsoft.com/en-us/library/system.timespan.days.aspx)属性（这是来自 的结果类型`date1 - date2`）。它返回一个带符号的 int。

# javascript - 防止通过 Shift+单击进行选择

> ID：12823852
> 
> 赞同：16
> 
> 时间：2012-10-10T16:13:13.343
> 
> 标签：javascript, html, selection

> **可能重复：**
> [用于禁用文本选择突出显示的 css 规则](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting)
> [双击后防止文本选择](https://stackoverflow.com/questions/880512/prevent-text-selection-after-double-click)

即使我的事件正确地呈现默认操作，单击文本然后按住 Shift 键单击其他文本也会导致选择。在这种情况下，这是不受欢迎的行为，因为我使用 Shift-click 来多选这些元素。

我需要做些什么来专门禁用这里的选择吗？

[编辑：在这里](https://stackoverflow.com/questions/880512/prevent-text-selection-after-double-click)找到我自己的问题的解决方案。很抱歉浪费了人们的时间。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-10T16:15:37.280

将此 CSS 添加到要阻止文本选择的部分：

```
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-o-user-select: none;
user-select: none; 
```

早期版本的 IE 要求您添加属性 onselectstart，如下所示：

```
<div onselectstart="return false"> 
```

# iphone - iOS：在自动布局下更改 UITableView 高度

> ID：12823854
> 
> 赞同：4
> 
> 时间：2012-10-10T16:13:24.407
> 
> 标签：iphone, ios, uitableview, autolayout

如果您使用自动布局，有没有办法以编程方式更改 UITableView 的高度？我有一个必须使用自动布局的视图控制器。它还包含一个 UITableView，但表格视图似乎没有响应 setFrame 调用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T17:34:43.770

您绝对应该在 developer.apple.com 上观看有关 Auto Layout 主题的 WWDC 2012 视频。这些视频是：

*   第 202 课 - iOS 和 OS X 的自动布局简介
*   会话 228 - 掌握自动布局的最佳实践
*   会话 232 - 示例自动布局

这些视频展示了如何使用可视化描述语言和 IB 在代码中设置约束。它们还涵盖了过渡到自动布局时的一些“陷阱”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:21:14.043

您可以以编程方式定义自己的约束。有关如何执行此操作的更多信息，请参阅 Apple 关于[NSLayoutConstraint的文档。](https://developer.apple.com/library/ios/#documentation/AppKit/Reference/NSLayoutConstraint_Class/NSLayoutConstraint/NSLayoutConstraint.html#//apple_ref/doc/uid/TP40010628)

# java - 抽象类中的 Java 静态属性

> ID：12823858
> 
> 赞同：1
> 
> 时间：2012-10-10T16:13:27.837
> 
> 标签：java, static, attributes, abstract

我想在牛奶类中设置名称和代码静态属性。为什么这不起作用？我什至不能覆盖名称和代码的设置器/获取器。

```
 public abstract class Cow {
        private static String name;
        private static String code;

    ...
     public static String getName() {
            return name;
        }

        public static void setName(String name) {
            Cow.name = name;
        }

        public static String getCode() {
            return code;
        }

        public static void setCode(String code) {
            Cow.code = code;
        }
    ...
    }

public class Milk extends Cow{

...
    static {
            Milk.setName("asdmilk");
        Milk.setCode("KDDFA");
        }
..

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T16:16:01.087

> 为什么这不起作用？

每个子类都没有一组静态变量`Cow`，并且根本无法覆盖静态方法。静态成员基本上不是多态的。

目前尚不清楚您*为什么*要这样做，但基本上如果您声明一个静态变量，则*只有一个*变量，句号。调用`Milk.setName`完全等同于调用`Cow.setName`这里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:16:49.343

静态方法 setName 和 setCode 存在于 Cow 中，而不是 Milk 中。你应该说

```
public class Milk extends Cow{

...
static {
        Cow.setName("asdmilk");
        Cow.setCode("KDDFA");
    }
...

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:16:47.867

您将静态 getter 和 setter 更改为普通的 getter、setter。但保持变量为静态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T16:18:00.370

您不能继承和覆盖静态方法 - 请记住，静态方法适用于类（它们只存在于原始类中）。它们不会对任何对象进行操作（尽管您可以在参数中显式引用对象） . 他们不能使用多态性。

方法覆盖也是在编译时确定的，重载是在运行时确定的。

尽管您可以保留静态字段，因为 javac 认为它们是“常量”或常量：它们在您的程序生命周期中不会改变（您可以使用 final 修饰符更容易地判断这一点）。

私有字段也不会被继承。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T16:18:41.897

作为旁注，您有一个`Milk`扩展类`Cow`。通常，`extends`关键字代表一种*关系*。例如，`Poodle extends Dog`因为贵宾犬是狗的一种。牛奶不是奶牛的一种。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T16:19:25.267

**-** `static`变量是`One per Class`，由所有对象共享。

**-**此外`static`成员**不是多态**的，只是提醒你`private`变量**不是继承**的。

**-**所以你**不能**覆盖静态方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-10T16:19:36.300

静态方法不是继承的，所以它们必须在超类中被引用。使所有子类的名称和代码不同的唯一方法是让子类自己定义它们。我建议您不要完全为分层结构声明静态状态，而不是试图让它发挥作用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-10T17:00:30.383

我相信你可以使用这个想法实现你想要的：

```
public abstract class Cow {

protected static HashMap<String, String> names;
protected static HashMap<String, String> codes;

//...

     public static String getName(String key) {
            return (String) names.get(key);
        }

        public static void setName(String key, String name) {
            names.put(key, name);
        }

        public static String getCode(String key) {
            return (String) codes.get(key);
        }

        public static void setCode(String code) {
            codes.put(key, name);
        }

        protected void initialize()
        {
            setName("Cow", "foo");
            setCode("Cow", "bar");
        }

        protected static void initializeClass()
        {
            initialize();
        }
}

public class Milk extends Cow {
    protected void initialize()
    {
        setName("asdmilk");
        setCode("KDDFA");
    }
} 
```

# c - 如何在屏幕上显示搜索到的字符串？

> ID：12823859
> 
> 赞同：1
> 
> 时间：2012-10-10T16:13:32.650
> 
> 标签：c, for-loop, strstr

所以，我想做的是让用户搜索奶酪并将其显示在屏幕上。我对后者有问题。我似乎无法显示字符串，但我的代码仍在运行。这是我的代码：

```
#include<stdio.h>
#include<string.h>

    char cheeses[][20] = {
        "Cheddar",
        "White Cheddar",
        "Colby Jack",
        "Gouda",
        "Blue Cheese",
        "Gorgonzola",
        "Asiago", 
        "Limburger",
        "Feta",
        "Brie",
        "Goat",
    };

        void find_cheese(const char *search_for)
    {
        int i;
        for (i = 0; i < 5; i++) {
            if (strstr(cheeses[i], search_for))
                printf("Cheese %i: '%s'\n", i, cheeses[i]);
        }
    }

int main()
    {
        char search_for[20];
        printf("Search for: ");
        fgets(search_for, 20, stdin);
        find_cheese(search_for);
        return 0;
    } 
```

那么在这种情况下我该怎么办。我想要它，以便您可以输入“Lim”并让它显示 Limburger（将来它将能够显示有关奶酪的信息）。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:15:53.050

看起来不错，但您只搜索了第 5 个，而 Limburger 离列表末尾太近了。

这种类型的代码最好用“哨兵”来解决，即用于表示列表已经结束的特殊标记。对于字符串，您可以将数组表示为指向字符串的指针数组，而不是固定大小的数组，然后将`NULL`其用作哨兵是很自然的。

数组将变为：

```
const char *cheeses[] = { "Cheddar", "White Cheddar", "Colby Jack",
          /* ... rest of the cheeses ... */
          NULL
}; 
```

然后你可以像这样编写搜索循环：

```
int i;

for( i = 0; cheeses[i] != NULL; ++i )
{
  /* Test and handling code here, against cheeses[i] just like before. */
} 
```

# jquery - 跳过不改变输入属性元素

> ID：12823860
> 
> 赞同：0
> 
> 时间：2012-10-10T16:13:43.140
> 
> 标签：jquery

我正在使用此代码更改所有元素属性，如何跳过此代码以不更改任何元素：例如，

```
$('[id^="lbl"] ! lbl1 ! lbl2').attr("disabled", true); 
```

在该代码中 lbl1 和 lbl2 不得更改

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:16:13.777

我建议：

```
$('[id^="lbl"]').not('#lbl1, #lbl2').prop("disabled", true); 
```

请注意，您应该使用 attribute-equals/attribute-starts-with 选择器提供标识元素类型（如果可能），以减少 jQuery 查找给定元素所需的工作量。

你也可以使用`filter()`：

```
$('[id^="lbl"]').filter(
    function(){
        var id = this.id;
        return id !== 'lbl1' && id !== 'lbl2';
    }).prop('disabled',true); 
```

参考：

*   [`filter()`](http://api.jquery.com/filter/).
*   [`not()`](http://api.jquery.com/not/).
*   [`prop()`](http://api.jquery.com/prop/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:17:19.980

```
$('[id^="lbl"]:not("#lbl1, #lbl2")').attr("disabled", true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T16:16:44.897

尝试使用非选择器，

```
$('[id^="lbl"]').not('#lbl1, #lbl2').prop("disabled", true); 
```

**演示：http:** [//jsfiddle.net/vQFdM/](http://jsfiddle.net/vQFdM/)

# opengl - 绘制随机点

> ID：12823861
> 
> 赞同：2
> 
> 时间：2012-10-10T16:13:49.153
> 
> 标签：opengl

我有一个窗口大小 {0,0},{1e6,1e6}。我在这个区域内创建了 1000*1000 的网格。
我正在尝试在该区域创建随机点。

```
glEnable( GL_POINT_SMOOTH );
glEnable( GL_BLEND );
glPointSize( 200 );
for( int i = 0; i < 1e6; i++ )
{
    glColor3ub(0,255,0);
    // width and height are 1e6.
    int x = rand() % WIDTH; 
    int y = rand() % HEIGHT; 
    glBegin( GL_POINTS );
    glVertex2i( x, y );
    glEnd();
}
glFlush();  
glDisable( GL_BLEND ); 
```

x 和 y 是随机数。但是，所有点都仅绘制在窗口的左下角。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:20:05.983

确保`RAND_MAX`在您的平台上大于`1e6`. 否则，您将看到的最大 x/y 值将是`RAND_MAX-1`，而不是`1e6`您所期望的。

[或者生成不带模](https://stackoverflow.com/questions/1340729/how-do-you-generate-a-random-double-uniformly-distributed-between-0-and-1-from-c)的随机数。

# asp.net - 仅缓存子用户控件

> ID：12823867
> 
> 赞同：1
> 
> 时间：2012-10-10T16:14:17.853
> 
> 标签：asp.net, caching, user-controls, outputcache

有父用户控件，如下所示。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="TestUserControl.ascx.cs" Inherits="TestUserControl" %>
<%@ Register Src="~/UserControls/ChildUserControl.ascx" TagName="ChildUserControl" TagPrefix="FLI" %>
<div>    
    <FLI:ChildUserControl ID="child1" runat="server"/>    
</div> 
```

子 usecontrol 具有 pulic 属性`MatchDescription`，该属性`Page_Load`在父控件中设置。我想根据`MatchDescription`属性缓存子控件的多个版本。

问题是，该`MatchDescription`属性不能设置在 中`Page_Load`，因为子控件的缓存副本一旦可用就会被使用。

我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:46:50.940

看起来使用`GetVaryByCustomString`是去这里的方式。我的概念证明包括以下内容：

*   WebUserControl.ascx：测试控件。它有一个公共财产`MatchDescription`。
*   Global.asax：重写`GetVaryByCustomString`方法。
*   WebForm.aspx：承载控件的简单表单。

**WebUserControl.ascx**

将以下内容添加到控件上的标记中：

```
<%@ OutputCache Duration="120" VaryByParam="none" VaryByCustom="MatchDescription" %> 
```

这指定缓存控件的持续时间（以秒为单位）并`VaryByCustom="MatchDescription"`指定我们将缓存的参数的名称。

**WebUserControl.ascx.cs**

```
public partial class WebUserControl1 : System.Web.UI.UserControl
{
    public string MatchDescription { get; set; }

    protected void Page_Load(object sender, EventArgs e)
    {
        object description = this.Context.Application["MatchDescription"];

        if (description != null)
        {
            this.MatchDescription = description.ToString();
        }
        else
        {
            this.MatchDescription = "Not set";
        }

        Label1.Text = "Match description: " + this.MatchDescription;
    }
} 
```

这将检查该`MatchDescription`值是否存在。由于父页面中代码的工作方式，您永远不会看到“未设置”，尽管在您的实现中它可能很有用，以防该值未设置。

**全球.asax**

将`Global.asax`文件添加到您的项目并添加以下方法：

```
public override string GetVaryByCustomString(HttpContext context, string custom)
{
    if (custom == "MatchDescription")
    {
        object description = context.Application["MatchDescription"];

        if (description != null)
        {
            return description.ToString();
        }
    }

    return base.GetVaryByCustomString(context, custom);
} 
```

这是检查`MatchDescription`与缓存控件关联的位。如果没有找到该控件将正常创建。`context.Application`之所以使用，是因为我们需要一种方法来在父页面、用户控件和 global.asax 文件之间传递描述值。

**WebForm.aspx.cs**

```
public partial class WebForm : System.Web.UI.Page
{
    private static string[] _descriptions = new string[]
    {
        "Description 1",
        "Description 2",
        "Description 3",
        "Description 4"
    };

    protected override void OnPreInit(EventArgs e)
    {
        //Simulate service call.
        string matchDescription = _descriptions[new Random().Next(0, 4)];
        //Store description.
        this.Context.Application["MatchDescription"] = matchDescription;

        base.OnPreInit(e);
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        var control = LoadControl("WebUserControl.ascx") as PartialCachingControl;
        this.Form.Controls.Add(control);

        //Indicate whether the control was cached.
        if (control != null)
        {
            if (control.CachedControl == null)
            {
                Label1.Text = "Control was cached";
            }
            else
            {
                Label1.Text = "Control was not cached";
            }
        }
    }
} 
```

请注意，在此代码中，我正在方法中进行/模拟服务调用`OnPreInit`。这是必要的，因为它发生在`GetVaryByCustomString`方法之前的页面生命周期中。

请记住，如果控件已被缓存，`Page_Load`例如在方法中访问它，将需要以下形式的代码：

```
 if (control is PartialCachingControl &&
        ((PartialCachingControl)control).CachedControl =!= null)
{
    WebUserControl1 userControl = (WebUserControl1)((PartialCachingControl)control).CachedControl;
} 
```

* * *

**参考：**

我的回答的灵感来自：有[什么方法可以清除/刷新/删除 OutputCache？](https://stackoverflow.com/questions/565239/any-way-to-clear-flush-remove-outputcache)

我`Pre_Init`在这个问题中找到了提示： [Output Caching - GetVaryByCustomString based on value set in PageLoad()](https://stackoverflow.com/questions/357475/output-caching-getvarybycustomstring-based-on-value-set-in-pageload?rq=1)

这篇知识库文章讨论了为什么`PartialCachingControl.CachedControl`属性总是可以返回 null：http: [//support.microsoft.com/kb/837000](http://support.microsoft.com/kb/837000)

# javascript - 如何覆盖jquery mobile中链式对话框中关闭按钮的功能？

> ID：12823870
> 
> 赞同：1
> 
> 时间：2012-10-10T16:14:19.647
> 
> 标签：javascript, jquery-mobile, overriding, modal-dialog, jquery-ui-dialog

在 jQuery Mobile 中，当进行输入并单击“下一步”按钮时，我有几个链式对话框一个接一个地滑入/滑出。但是，只要单击对话框标题内的关闭按钮，我就想返回触发第一个对话框的初始页面。通常，每个对话框中的关闭按钮会返回到触发它的页面/框。但在我的应用程序中，我需要全部覆盖它们才能返回第一页！

我的代码：

```
<div class="ui-block-b">
    <a data-role="button" data-theme="b" data-icon="arrow-r" data-iconpos="right" 
        data-transition="slide" href="nextpage.html" data-rel="dialog">
        next
    </a>
</div> 
```

谢谢！

编辑：文档说

> 链接对话框：“请注意：如果一个对话框打开另一个对话框（链接），则使用 data-rel="back" 类型的链接关闭最后一个对话框将始终导航到上一个对话框，直到类型为 data-role 的根页面="page" 已到达。这保证了对话框之间的一致导航。[http://jquerymobile.com/demos/1.2.0-beta.1/docs/pages/page-dialogs.html]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:16:30.047

您可以覆盖为对话框定义的关闭方法`$.mobile.dialog.prototype.close`：

```
<script>

    $.mobile.dialog.prototype.close = function(){

        console.log("close");

        // DO SOMETHING HERE - EX: REDIRECTING TO MAIN PAGE
        $.mobile.changePage("index.html");
    };

    $(function() {
        console.log("document loaded");         
    });

</script> 
```

# html - Sublime Text 2 编辑器是否支持实时 HTML 和 CSS 预览？

> ID：12823873
> 
> 赞同：33
> 
> 时间：2012-10-10T16:14:23.980
> 
> 标签：html, css, sublimetext2, sublimetext

Sublime Text 2 编辑器是否支持实时 HTML 和 CSS 预览？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-10T22:24:15.697

有一个包： Giovanni Collazo 的[Browser Refresh](http://gcollazo.github.com/BrowserRefresh-Sublime/)。它支持 OS X 和 Windows 7，以及所有主流浏览器。
您可以通过 Package Control（或手动）安装它并`super+shift+r`在 Sublime Text 2 中触发它。

自从我将[CodeKit](http://incident57.com/codekit/)用于此功能以来，我还没有亲自测试过它，但它似乎很受欢迎。

* * *

更新：

**Windows XP 兼容软件**

*   [LiveReload](http://livereload.com/) (Windows 版本是 pre-alpha) - 还有一个支持[Sublime Text 2 包](https://github.com/dz0ny/LiveReload-sublimetext2)
*   [XRefresh](http://xrefresh.binaryage.com/#windows) - LiveReload 的弃用版本（值得一提的是稳定的 XP 兼容性）
*   [AutoHotKey](http://www.autohotkey.com/) -[示例](https://stackoverflow.com/a/4550269/1684247)
*   [VBS 脚本](https://stackoverflow.com/a/4690873/1684247)- 由键盘快捷键触发

**Chrome 扩展程序**

*   [刷新猴子](https://chrome.google.com/webstore/detail/refresh-monkey/ljngnafhejmefmijjoedbclkadhacebd)
*   [轻松自动刷新](https://chrome.google.com/webstore/detail/easy-auto-refresh/aabcgdmkeabbnleenpncegpcngjpnjkc)
*   ~~[Chrome重新加载](https://chrome.google.com/webstore/detail/chromereload/njoipeaphfnaplplihpbgndfojhdhmjo)~~
*   ~~[自动重新加载](https://chrome.google.com/webstore/detail/auto-reload/ofojbjgaaddibdfpmmjeonahgbacejid)~~
*   ~~[自动刷新加](https://chrome.google.com/webstore/detail/auto-refresh-plus/oilipfekkmncanaajkapbpancpelijih)~~

**火狐插件**

*   [标签自动重新加载](https://addons.mozilla.org/en-US/firefox/addon/tab-auto-reload/)
*   [重新加载每个](https://addons.mozilla.org/en-US/firefox/addon/reloadevery/)

**IE插件**

*   [自动刷新](http://download.cnet.com/AutoRefresher-for-IE/3000-12512_4-10293579.html)

注意：浏览器扩展会定期刷新，而不是在您保存文件时刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:01:39.540

我发现将 Sublime 与 live HTML 和 CSS 一起使用的最简单方法是安装 WAMP(www.wampserver.com/en/) 或 XAMPP(www.apachefriends.org/en/xampp.html) 来安装 Apache Web 服务器，您计算机上的 PHP 和 Mysql 服务器。然后您可以在 Sublime 中编辑您的文件，只要它们位于 Apache Web 根文件夹中（我相信它的 wamp/htdocs 或 xampp/htdocs），那么您可以转到 localhost//filename.html 并且有您的 html文件。保存在 Sublime 中并刷新页面，您的更改就会出现。

您也可以在 Chrome 或 Firefox 中打开 html 文件，但选择打开方式... 但是，我发现有时如果您有动态内容或链接，它们可能无法正常工作。

# java - 在 Java 中计算经过的时间

> ID：12823883
> 
> 赞同：0
> 
> 时间：2012-10-10T16:14:56.780
> 
> 标签：java, timer

是否`javax.swing.Timer timer;`足以计算经过的时间？我正在做一个俄罗斯方块项目，它还计算玩家玩游戏所花费的时间。在`play`方法中，

```
public void play() {
        reset();
        onPlay = true;
        Thread thread = new Thread(new Game());
        thread.start();
        rightPanel.setPlayButtonEnable(false);
        rightPanel.setPause(true);
        rightPanel.setStop(true);
        playItem.setEnabled(false);
        pauseItem.setEnabled(true);
        stopItem.setEnabled(true);
        setBlockColorItem.setEnabled(false);
        setBGColorItem.setEnabled(false);
        rightPanel.requestFocus();
        //time.start();
        //timeElapsed = System.currentTimeMillis();
        RightPanel.timeElapsedTextField.setText("");
        timer.start();
        startTime = System.currentTimeMillis();
    } 
```

在`stop`方法中，

```
public void stop() {
        isStop=true;
        onPlay = false;
        if (piece != null) 
            piece.isMoving = false;
        playItem.setEnabled(true);  
        rightPanel.setPlayButtonEnable(true);
        pauseItem.setEnabled(false); 
        rightPanel.setPauseButtonLabel(true);
        stopItem.setEnabled(false);   
        resumeItem.setEnabled(false);
        setBlockColorItem.setEnabled(true);
        setBGColorItem.setEnabled(true);
        rightPanel.setPause(false);
        rightPanel.setStop(false);
        reset();
        //time.stop();
        timer.stop();
        long delta = (System.currentTimeMillis() - startTime)/10;
        RightPanel.timeElapsedTextField.setText(Double.toString(delta/100.0) + " seconds");

    } 
```

这些够吗？每当尝试显示经过的时间时，JTextField 什么都不显示。有什么问题？非常感谢！

```
public void run() {
            int column = 4, style = Piece.SHAPES[(int) (Math.random() * 7)][(int) (Math.random() * 4)];
            //timer.start();
            //startTime = System.currentTimeMillis();
            while (onPlay) {

                if (piece != null) {
                    if (piece.isAlive()) {
                        try {
                            Thread.currentThread().sleep(100);
                        } 
                        catch (InterruptedException ie) {
                            ie.printStackTrace();
                        }
                        continue;
                    }
                }

                checkFullLine();  
                if (isGameOver()) {
                    playItem.setEnabled(true);
                    pauseItem.setEnabled(true);
                    resumeItem.setEnabled(false);
                    rightPanel.setPlayButtonEnable(true);
                    rightPanel.setPauseButtonLabel(true);

                    displayGameOver();
                    return;
                }
                piece = new Piece(style, -1, column, board);
                piece.start();
                //numDropped = numDropped+1;
                //RightPanel.scoreTextField.setText(numDropped+"");
                style = Piece.SHAPES[(int) (Math.random() * 7)][(int) (Math.random() * 4)];
                rightPanel.setTipStyle(style);
                numDropped = numDropped+1;
                RightPanel.numDroppedTextField.setText(numDropped+"");
                //RightPanel.numDroppedTextField = new JTextField(numDropped+"");
                long startTime = System.currentTimeMillis();
            }
            long estimatedTime = ((System.currentTimeMillis() - startTime)/1000);
            RightPanel.timeElapsedTextField.setText(estimatedTime+"");
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:18:26.287

您应该使用[nanoTime()](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#nanoTime%28%29)来计算经过的时间。

```
long startTime = System.nanoTime();
// ... the code being measured ...
long estimatedTime = System.nanoTime() - startTime; 
```

你有一个为游戏运行的线程。我认为您应该在 run() 方法的开始和 run() 方法的估计时间结束时计算 startTime。我只能推测，因为我不知道 Game 类代码。

下面是如何做到这一点的简单说明。

```
 import java.util.concurrent.TimeUnit;

  public class Demo implements Runnable {

private volatile boolean shouldRun = true;

@Override
public void run() {
    long startTime = System.nanoTime();
    while (shouldRun) {
        // do nothing
    }
    long estimatedTime = System.nanoTime() - startTime;
    System.out.println(TimeUnit.NANOSECONDS.toSeconds(estimatedTime));//Print apprx 5 seconds since time may be required to actually enter in to run method after start
}

public void stop() {
    shouldRun = false;
}

public static void main(String[] args) throws InterruptedException {
    Demo demo = new Demo();
    Thread thread = new Thread(demo);
    thread.start();
    Thread.sleep(5000);// 5 Seconds sleep
    demo.stop();// Stop the thread
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-29T03:00:28.403

# c# - 如何强制删除另一个进程正在使用的文件夹？

> ID：12823888
> 
> 赞同：5
> 
> 时间：2012-10-10T16:15:05.743
> 
> 标签：c#, .net, directory

> **可能重复：**
> [如何删除另一个进程正在使用的文件？](https://stackoverflow.com/questions/5232647/how-can-i-delete-a-file-that-is-in-use-by-another-process)

我有以下 c# 代码，但它在调用 Delete 方法时引发异常：

```
var dir = new DirectoryInfo(@"C:\mydirectory\");
dir.Delete(true); 
```

抛出以下异常：

> 该进程无法访问文件“C:\mydirectory”，因为它正被另一个进程使用。

有没有办法强制它删除这个目录，即使它被另一个进程使用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T16:18:00.790

不，不是不停止其他进程

# c - C - Vsprintf 和变量参数列表

> ID：12823895
> 
> 赞同：-1
> 
> 时间：2012-10-10T16:15:22.070
> 
> 标签：c, list, arguments, concatenation, printf

现在，该程序的目的是通过变量参数列表获取四个名称，并使用 vsprintf() 将它们连接成一个名为“total”的字符串。就目前的程序而言，只有名字出现在字符串“total”中。请问我该如何解决这个问题？谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:21:16.033

签名是`int vsprintf(char *str, const char *format, va_list ap);`。

第二个参数是通常的`printf`格式字符串......所以：

```
void concat(char *total, ...)
{
   va_list pointer;

   va_start(pointer, total);
   vsprintf(total, "%s %s %s %s", pointer);
   va_end(pointer);
} 
```

这当然只适用于正好 4 个字符串，但您要求用 来实现它`vsprintf`，这不适用于一般情况。

注意：您缺少`<stdio.h>`，它是`int main()`.

# flyway - 多个应用实例尝试同时迁移同一个数据库

> ID：12823902
> 
> 赞同：3
> 
> 时间：2012-10-10T16:15:37.043
> 
> 标签：flyway

我刚开始在一个非常标准的带有 mysql 数据库的 Spring 2.5 Web 应用程序中使用 flyway。它已经投入生产多年，拥有大量数据。

我将它连接到启动时自动迁移

```
<bean id="flyway" class="com.googlecode.flyway.core.Flyway" init-method="migrate">
    <property name="dataSource" ref="dataSource"/>
</bean> 
```

并且使 Spring 的持久性单元管理器（使用 jpa）依赖于它，因此数据库将在 JPA 初始化之前被迁移。

这工作正常。

在我们的生产环境中，我们有几个我们希望同时更新的节点。因此，如果每个实例长时间运行，它们将尝试执行相同的迁移。Flyway 的锁定功能应该可以防止这种情况。

我喜欢在生产中做任何事情之前测试这些东西，所以我做了；当两个应用程序实例同时启动并长时间运行迁移（6 分钟）时发生的情况是，过了一会儿，第二个实例失败了：

```
 Caused by: com.googlecode.flyway.core.exception.FlywayException: Unable to lock metadata table 'schema_version' in schema 'dbschema'
    at com.googlecode.flyway.core.metadatatable.MetaDataTable.lock(MetaDataTable.java:148)
    at com.googlecode.flyway.core.migration.DbMigrator$1.doInTransaction(DbMigrator.java:116)
    at com.googlecode.flyway.core.migration.DbMigrator$1.doInTransaction(DbMigrator.java:114)
    at com.googlecode.flyway.core.util.jdbc.TransactionTemplate.execute(TransactionTemplate.java:54)
    at com.googlecode.flyway.core.migration.DbMigrator.migrate(DbMigrator.java:113)
    ... 
```

堆栈跟踪的更深处是 SQLException：

```
Caused by: java.sql.SQLException: Lock wait timeout exceeded; try restarting transaction
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
    ... 
```

本质上它似乎超时。

我们正在使用 mysql 和 afaik 它试图锁定元数据表

```
select * from dbschema.schema_version for update 
```

我检查了它试图迁移的数据库及其锁定等待超时：

```
mysql> show variables like 'innodb_lock_wait_timeout';
+--------------------------+-------+
| Variable_name            | Value |
+--------------------------+-------+
| innodb_lock_wait_timeout | 120   |
+--------------------------+-------+ 
```

这是明显的罪魁祸首。但是，我不确定是否要增加数量，因为如果由于其他原因发生这种情况，我可能希望它超时。

我可能会尝试在迁移期间将其设置为更高的值。除了它似乎是一个只读变量：

```
SET innodb_lock_wait_timeout = 240;
ERROR 1238 (HY000): Variable 'innodb_lock_wait_timeout' is a read only variable 
```

如果我知道会有长时间运行的迁移，我当然可以半手动地进行部署，例如只更新一个实例并等待它通过迁移，然后更新其他实例。

有没有人有任何其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:14:58.780

有3种可能：

*   移至 MySQL 5.5，您可以在其中[设置 innodb_lock_wait_timeout 在运行时](http://dev.mysql.com/doc/innodb/1.1/en/innodb-other-changes-innodb_lock_wait_timeout.html)
*   在服务器配置中增加全局 innodb_lock_wait_timeout
*   拆分迁移，使其不超过超时

# database - 从 .Net 应用程序或使用 JDBC 使用开放式数据库连接到 IMS ..？

> ID：12823903
> 
> 赞同：1
> 
> 时间：2012-10-10T16:15:49.753
> 
> 标签：database, mainframe, ims-db

我正在寻找是否有我必须使用的特殊驱动程序才能将 .NET 应用程序连接到 IMS。
在 Internet 上，我发现一些文章说开放数据库提供 JDBC，这是一种方法。但是，它适用于 java 环境，我想使用 .NET。

我的问题是：
如何使用开放式数据库从 .NET 应用程序 (ASP.NET) 连接到 IMS？一个样本会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-28T00:47:08.293

.NET Data Provider 驱动程序可用于 IMS 版本 13。.NET 驱动程序利用 IMS V13 中引入的 NativeSQL 引擎。

[更多信息请点击这里](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/topic/com.ibm.ims.net31.doc/net_intro.htm)

另一种解决方案是使用 ODBC-JDBC 桥并利用 Java JDBC 驱动程序进行 IMS DB 访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T15:25:47.767

[IMS](https://www.ibm.com/docs/en/zos-basic-skills?topic=product-ims-database-manager)不是开源数据库管理系统。

IMS 是[分层](https://secure.wikimedia.org/wikipedia/en/wiki/Hierarchical_database_model)的，而不是[关系](https://secure.wikimedia.org/wikipedia/en/wiki/Relational_model)的。

Microsoft 提供了一个[包](http://msdn.microsoft.com/en-us/library/aa771479%28v=bts.10%29.aspx)，其中的[一部分](http://msdn.microsoft.com/en-us/library/aa770672%28v=bts.10%29.aspx)提供了您可能正在寻找的内容。

我建议您与组织中的 IMS 人员讨论如何[使用 SOAP Web 服务访问 IMS 资源](https://www.ibm.com/docs/en/ims-es/3.2.0?topic=gateway-ims-enterprise-suite-soap-overview)，这可能是一个更开放的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T13:14:12.720

我相信这个问题是指[IMS Open Database](http://www.redbooks.ibm.com/abstracts/sg247856.html)，这是一项 IBM 技术，它允许使用 DRDA 协议从分布式系统访问 IMS。它确实允许对 IMS 进行 JDBC 类型的访问（通过一些技巧将 SQL 调用转换为适当的 DLI 调用，并且有一些限制，因为 IMS 确实是一个分层数据库）。我不知道是否有适用于 .NET 的驱动程序（如果您打算使用 SQL，则需要该驱动程序），但您当然可以使用免费的[IMS Explorer](http://www-01.ibm.com/software/data/ims/soa-integration-suite/enterprise-suite/explorer/)轻松地对其进行试验。

但是，您的 IMS 环境需要运行 IMS V11+，并为开放式数据库配置 CSL、ODBM 和 IMS Connect，然后才能正常工作（并且您需要 IMS 管理员为您进行设置）。我在回复开头链接到的红皮书提供了更多详细信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-27T22:30:13.720

有一个 IMS 解决方案工具包专门展示了如何使用 IMS .NET Data Provider 连接到 IMS 数据库。该解决方案工具包包含从设置后端基础架构到编写客户端应用程序的分步示例。解决方案套件可在此处找到：

[https://www.ibm.com/support/knowledgecenter/en/SSEPH2_15.1.0/com.ibm.ims15.doc.sk/ims_openacc_net.htm](https://www.ibm.com/support/knowledgecenter/en/SSEPH2_15.1.0/com.ibm.ims15.doc.sk/ims_openacc_net.htm)

# glassfish-3 - 如何解决 Informix -255“不在事务中”错误？

> ID：12823914
> 
> 赞同：1
> 
> 时间：2012-10-10T16:16:02.970
> 
> 标签：glassfish-3, informix

在非 ANSI、无缓冲日志记录模式下使用 Informix 11.70 数据库。

我正在通过 GlassFish 3.1.2.2 服务器访问此数据库，该服务器设置了一个连接池以使用该类`javax.sql.ConnectionPoolDataSource`实现的对象`com.informix.jdbcx.IfxConnectionPoolDataSource`。

所有事务都在 JPA 提供者（在本例中为 Hibernate）的控制之下，因此没有明确`BEGIN WORK`的 ,`COMMIT WORK`或`ROLLBACK WORK`我可以控制的语句。

在此配置的一个特定部署中，我们收到`-255`错误，这表示：

*   数据库处于非日志模式（在我们的例子中不是这样）
*   数据库处于某种日志记录模式，但是`COMMIT WORK`有人发出了没有前面`BEGIN WORK`声明的

我该如何解决这个问题？哪些环境因素会在一个部署而不是另一个部署上导致此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T15:47:43.623

谢天谢地，答案与 Informix 或 Hibernate 对 Informix 的支持无关。它与 GlassFish 中模糊的自动数据源创建有关，这取决于您的部署方式。（这*可能*与 Informix 数据源提供给 GlassFish Web 控制台的默认属性有关。）

具体来说，我们的部署人员尝试在 GlassFish 上部署我们的应用程序，而没有首先创建所需的 JDBC 资源。GlassFish 报告缺少一些奇怪的 JDBC 资源：`jdbc/foobar__pm`和`jdbc/foobar__nontx`.

我们的部署人员没有发现任何问题，而是手动创建了这些资源。（GlassFish 显然通常会在您使用其 Web 控制台进行部署时[自动创建这些。）](http://docs.oracle.com/cd/E26576_01/doc.312/e24930/transaction-service.htm#beamu)

结果，我们的部署人员无意中指定了一个非事务性数据源供我们的应用程序使用，这就是这里的根本原因。

# maven - 使用自定义 Checkstyle 运行 Maven Checkstyle

> ID：12823917
> 
> 赞同：10
> 
> 时间：2012-10-10T16:16:16.920
> 
> 标签：maven, checkstyle

我跑了`mvn checkstyle:checkstyle`，但它没有使用我的自定义 checkstyle XML 文件。

请告诉我如何使用我自己的 checkstyle 文件而不是默认的/现在配置的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T17:10:25.100

您需要在以下配置文件位置`pom.xml`：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-checkstyle-plugin</artifactId>
      <version>2.9.1</version>  
      <configuration>
        <configLocation><!-- Specify file here --></configLocation>
      </configuration>
    </plugin>  
  </plugins>
</build> 
```

检查[此页面](http://maven.apache.org/plugins/maven-checkstyle-plugin/checkstyle-mojo.html)以查看其他配置选项。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-23T12:43:01.023

对于最新版本的 CheckStyle，这现在已更改，您需要使用属性声明文件位置：

```
<project
  xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  ...

  <properties>
    <checkstyle.config.location><!-- Specify file here --></checkstyle.config.location>
  </properties>

  <build>
    ...

      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-checkstyle-plugin</artifactId>
        <version>2.9.1</version>
      </plugin>
    </plugins>
  </build>

</project> 
```

取自我如何编写自定义检查样式检查的示例：

[http://blog.blundellapps.co.uk/create-your-own-checkstyle-check/](http://blog.blundellapps.co.uk/create-your-own-checkstyle-check/)

和这里的源代码：

[https://github.com/blundell/CreateYourOwnCheckStyleCheck](https://github.com/blundell/CreateYourOwnCheckStyleCheck)

# java - 在 JDBC 或 Spring JDBC 中使用 REF CURSOR 的替代方法？

> ID：12823918
> 
> 赞同：1
> 
> 时间：2012-10-10T16:16:16.743
> 
> 标签：java, oracle, spring

我用谷歌搜索了一下，在这里搜索并没有找到答案。

在将 PL/SQL 中的数据从数据库返回到 Java（使用 Spring JDBC）时，是否有使用 REF CURSOR 的替代方法？

我工作的 DBA 讨厌 REF CURSORS，因为（他们说）出错的可能性更大，如果我们返回 CURSOR 或 TYPES，他们更愿意。

有谁知道这是否可能，如果可以，怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:06:25.303

您的 DBA 绝对正确地讨厌游标：它们可能会泄漏、带来安全风险，并且具有笨拙的嘈杂语法。流水线（表）函数比游标更好的抽象。

流水线函数输出与普通表/视图没有区别。Java 客户端在执行标准 SQL 查询时将使用相同的 JDBC API 调用。同样，对于 PL/SQL，流水线函数仍然隐藏在 SQL 查询中，因此不需要特殊的数据类型。

# objective-c - 将图片加载到图库

> ID：12823919
> 
> 赞同：0
> 
> 时间：2012-10-10T16:16:22.437
> 
> 标签：objective-c, ios, caching

我需要一些建议。在我的应用程序中，人们可以上传图片。我将图像存储在服务器上。我想制作一个照片库，您可以在其中查看所有上传的图像。每个用户都有一个帐户。它将下载所有上传的图像。

关键是当您上传 1 张图片时，它必须下载 1 张图片。但是，当您上传 10 个或更多时，该应用程序必须下载所有图像并将图像缓存到您的设备。

下载所有图像并保持应用程序运行而不会卡住的最佳方法是什么。还有什么是缓存所有图像的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:37:55.687

如果您想创建一些照片库应用程序，请查看此开源[示例](https://github.com/mwaterfall/MWPhotoBrowser)。

由 Michael Waterfall 创建，其中包括来自存储在服务器或本地的图像的照片库。

您可以根据项目要求修改代码。并且很容易处理图像。

# c# - 在 ASP.Net 中从字节数组播放 AVI 文件

> ID：12823922
> 
> 赞同：4
> 
> 时间：2012-10-10T16:16:38.497
> 
> 标签：c#, asp.net

> **可能重复：**
> [是否可以在视频和音频标签中使用数据 URI？](https://stackoverflow.com/questions/2270151/is-it-possible-to-use-data-uris-in-video-and-audio-tags)

是否可以像显示数据库中的图像一样简单地播放存储在数据库中的视频文件？

要显示来自 db 的图像，这就是我使用的；

.aspx 文件

```
<asp:Image ID="PicImage" runat="server" /> 
```

.cs 文件

```
PicImage.Attributes.Add("src", "data:image/png;base64," + Convert.ToBase64String(PictureByteArray)); 
```

您认为，我可以在**不先在服务器中创建文件的情况下**使用下面的这些东西吗？

```
<embed src="video.avi" />
<img dynsrc="video.avi" />
<object data="video.avi" type="video/avi" /> 
```

我怎样才能做到这一点？

我知道 Silverlight 不播放 .avi 文件，而只播放 wmv。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T16:31:21.460

您可以使用 windows 媒体播放器播放 avi 文件。这是html代码：

```
<OBJECT ID="MediaPlayer" WIDTH="320" HEIGHT="160" CLASSID="CLSID:22D6F312-B0F6-11D0-94AB-0080C74C7E95"
 STANDBY="Loading Windows Media Player components..." TYPE="application/x-oleobject">
 <PARAM NAME="FileName" VALUE="yourFile.avi">
 <PARAM name="autostart" VALUE="false">
 <PARAM name="ShowControls" VALUE="true">
 <param name="ShowStatusBar" value="false">
 <PARAM name="ShowDisplay" VALUE="false">
 <EMBED TYPE="application/x-mplayer2" SRC="yourFile.avi" NAME="MediaPlayer"
 WIDTH="320" HEIGHT="160" ShowControls="1" ShowStatusBar="0" ShowDisplay="0" autostart="0"> </EMBED>
 </OBJECT> 
```

也可以使用 FlashPlayer。

因为您将文件作为字节数组（数据库源），所以您需要创建通用处理程序（ashx）来将此文件流式传输到媒体播放器。FileName 的 Html 参数将如下所示：

```
<PARAM NAME="FileName" VALUE="handler.ashx?file=yourFile"> 
```

确保在 ashx 处理程序中设置正确的 ContentType，如下所示：

```
context.Response.ContentType = "video/avi";
context.Response.Write(fileData, 0, fileData.Length); 
```

这是让您开始使用 ashx 文件的链接：

[http://msdn.microsoft.com/en-us/library/bb398986(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb398986(v=vs.100).aspx)

# facebook - 我网站上的“Facebook Likes”丢失了

> ID：12823924
> 
> 赞同：2
> 
> 时间：2012-10-10T16:16:43.090
> 
> 标签：facebook, facebook-like

我在我的论坛（vBulletin）的每个主题中添加了“Facebook 赞按钮”。

类似“198,286 人这样的人。成为你的第一个朋友。”

但是有一天，**某个**话题失去了它在 Facebook 上的所有点赞。

现在它又回到了“成为你的第一个喜欢这个的朋友”。

该主题的所有喜欢都丢失了？

这是为什么？以及如何解决？

我来自越南。

我正在我的论坛上举办一场比赛，“Facebook 点赞”将是每个主题的得分。

我在我的网页上找到了这段代码

```
<!-- Facebook Like --> 
    <div class="fb-like" 
     data-href="MYWEBSITE/forum/showthread.php?t=26367"; 
     data-send="true" data-layout="standard" data-width="375" 
     data-show-faces="false" data-action="like" 
     style="float: right; width: 375px;"></div> 
<!-- /Facebook Like --> 
```

结束然后我的网站将在一个框架中从FB获取数据-</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:35:52.247

右键单击您的网站并单击查看源代码，然后找到类似 facebook 的任何内容

# flash - 自动播放延迟关键帧

> ID：12823933
> 
> 赞同：1
> 
> 时间：2012-10-10T16:16:54.420
> 
> 标签：flash, delay, autoplay, flex-mx

下面的代码用于我在 FlashMX 中的幻灯片。我已经让自动播放工作了。但是，我似乎无法让关键帧之间的延迟起作用。任何帮助将不胜感激！

`function updateFrame (inc) { // 将幻灯片发送到新框架 newFrame = _root._currentFrame + inc; _root.gotoAndStop(newFrame);

```
updateStatus();

if (_root._currentFrame == 1) {
    prevBtn.gotoAndStop(2);
} else {
    prevBtn.gotoAndStop(1);
}
if (_root._currentFrame == _root._totalFrames) {
    nextBtn.gotoAndStop(2);
} else {
    nextBtn.gotoAndStop(1);
}
}function updateStatus () {
_root.statusField = _root._currentFrame + " of " + _root._totalFrames;
} function autoplayInit () {
startTime = getTimer();
hideControls();
updateStatus();
}function autoplay () {
if (autoplayStatus != 0) {
    // get the current time and elapsed time
    curTime = getTimer();
    elapsedTime = curTime-startTime;

    // update timer indicator
    indicatorFrame = int(4/(delay/(elapsedTime/1000)));
    indicator.gotoAndStop(indicatorFrame+1);

    // if delay time if met, goto next photo
    if (elapsedTime >= (delay*1000)) {
        if (_root._currentframe == _root._totalframes) {
            _root.gotoAndStop(1);
        } else {
            _root.nextFrame();
        }
        autoplayInit();
    }
}
}function hideControls () {
nextBtn.gotoAndStop(2);
prevBtn.gotoAndStop(2);
}updateFrame();
autoplayStatus = 0;' 
```

# c++ - 在 C 中存储对 lua 函数的引用

> ID：12823934
> 
> 赞同：7
> 
> 时间：2012-10-10T16:16:57.350
> 
> 标签：c++, event-handling, lua

我有一个用 C++ 实现的基本事件处理程序。我的应用程序中还有一个嵌入式 Lua 解释器，我需要与事件管理器进行交互。最终目标是能够拥有一个事件处理程序，在事件触发时执行 c++ 和 Lua 函数。

我的问题是我无法想出一种简单的方法来在我的 C++ 代码中存储对 lua 函数的引用。我知道如何从 c 执行 Lua 函数（使用`lua_getglobal`and `lua_pcall`），但我更愿意存储对函数本身的引用，以便我可以将 Lua 函数直接传递给`registerListener`

**注意**假设 userdata 将`NULL`用于所有 Lua 侦听器是可以接受的。

这是我的代码：

事件管理器.h

```
#include <string>
#include <map>
#include <vector>

using namespace std;

typedef void (*fptr)(const void* userdata, va_list args);
typedef pair<fptr, void*> Listener;
typedef map<string, vector<Listener> > CallbackMap;

class EventManager {
private:
    friend ostream& operator<<(ostream& out, const EventManager& r);

    CallbackMap callbacks;
    static EventManager* emInstance;
    EventManager() {
        callbacks = CallbackMap();
    }
    ~EventManager() {
    }
public:
    static EventManager* Instance();
    bool RegisterEvent(string const& name);
    void RegisterListener(string const &event_name, fptr callback,
            void* userdata);
    bool FireEvent(string name, ...);
};

inline ostream& operator<<(ostream& out, const EventManager& em) {
    return out << "EventManager: " << em.callbacks.size() << " registered event"
            << (em.callbacks.size() == 1 ? "" : "s");
} 
```

事件管理器.cpp

```
#include <cstdarg>
#include <iostream>
#include <string>

#include "EventManager.h"

using namespace std;

EventManager* EventManager::emInstance = NULL;

EventManager* EventManager::Instance() {
    if (!emInstance) {
        emInstance = new EventManager;
    }

    return emInstance;
}

bool EventManager::RegisterEvent(string const& name) {
    if (!callbacks.count(name)) {
        callbacks[name] = vector<Listener>();
        return true;
    }

    return false;
}

void EventManager::RegisterListener(string const &event_name, fptr callback,
        void* userdata) {
    RegisterEvent(event_name);
    callbacks[event_name].push_back(Listener(callback, userdata));
}

bool EventManager::FireEvent(string name, ...) {
    map<string, vector<Listener> >::iterator event_callbacks =
            callbacks.find(name);
    if (event_callbacks == callbacks.end()) {
        return false;
    }

    for (vector<Listener>::iterator cb =
            event_callbacks->second.begin();
            cb != event_callbacks->second.end(); ++cb) {
        va_list args;
        va_start(args, NULL);
        (*cb->first)(cb->second, args);
        va_end(args);
    }

    return true;
} 
```

luaw_eventmanager.h

```
#pragma once
#ifndef LUAW_EVENT_H
#define LUAW_EVENT_H

#include "EventManager.h"

extern "C" {

#include <lua.h>
#include <lauxlib.h>
#include <lualib.h>

void luaw_eventmanager_push(lua_State* L, EventManager* em);
int luaopen_weventmanager(lua_State* L);

}
#endif 
```

luaw_eventmanager.cpp

```
#include <assert.h>
#include <stdio.h>

#include <sstream>
#include <iostream>

#include "luaw_eventmanager.h"

using namespace std;

static int
luaw_eventmanager_registerevent(lua_State* L)
{
    int nargs = lua_gettop(L);
    if (nargs != 2) {
        return 0;
    }

    stringstream ss;
    ss << luaL_checkstring(L, 2);

    EventManager::Instance()->RegisterEvent(ss.str());
    return 1;
}

static int
luaw_eventmanager_registerlistener(lua_State* L)
{
    return 1;
}

static int
luaw_eventmanager_fireevent(lua_State* L)
{
    return 1;
}

static int
luaw_eventmanager_tostring(lua_State* L)
{
    stringstream ss;
    ss << *EventManager::Instance();
    lua_pushstring(L, &ss.str()[0]);
    return 1;
}

static const struct luaL_Reg luaw_eventmanager_m [] = {
    {"registerEvent", luaw_eventmanager_registerevent},
    {"registerListener", luaw_eventmanager_registerlistener},
    {"fireEvent", luaw_eventmanager_fireevent},
    {"__tostring", luaw_eventmanager_tostring},
    {NULL, NULL}
};

void 
luaw_eventmanager_push(lua_State* L, EventManager* em)
{
    EventManager** emUserdata = (EventManager**)lua_newuserdata(L, sizeof(EventManager*));
    *emUserdata = em;
    luaL_getmetatable(L, "WEAVE.mEventManager");
    lua_setmetatable(L, -2);
}

int 
luaopen_weventmanager(lua_State* L)
{
    luaL_newmetatable(L, "WEAVE.mEventManager");
    lua_pushvalue(L, -1);
    lua_setfield(L, -2, "__index");
    luaL_register(L, NULL, luaw_eventmanager_m);
    assert(!lua_isnil(L, -1));
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-10T17:41:24.483

所有 Lua 拥有的对象都被垃圾回收。这包括功能。因此，即使您可以获得对 Lua 函数的引用，Lua 仍然*拥有*它，因此只要 Lua 检测到它不再被引用，它就会受到 GC 的约束。

外部代码不能拥有 Lua 引用。但是外部代码可以将该引用*存储*在 Lua 代码无法到达（因此无法破坏）的地方：Lua 注册表。

[Lua 注册表](http://www.lua.org/manual/5.1/manual.html#3.5)`LUA_REGISTRYINDEX`是Lua 代码无法（直接）访问的 Lua 表（位于堆栈伪索引处，因此可以从堆栈访问）。因此，它是您存放所需物品的安全场所。由于它是一个 Lua 表，因此您可以像任何其他 Lua 表一样操作它（添加值、键等）。

但是，注册表是全局性的，如果您使用其他 C 模块，它们完全有可能开始互相跺脚。因此，为每个模块选择一个特定的注册表项并在该注册表项中构建一个表是一个好主意。

**第一步：**在初始化你的 C 接口代码时，创建一个表并将其粘贴到注册表中的一个已知键中。只是一张空桌子。

当 Lua 代码将 Lua 函数传递给您以用作回调时，从特殊键加载该表并将 Lua 函数粘贴在那里。当然，要做到这一点，您需要为每个注册的函数提供一个唯一的键（您将其存储为 Lua 函数的`void*`数据），您以后可以使用它来检索该函数。

Lua 有一个简单的机制来做到这一点：[`luaL_ref`](http://www.lua.org/manual/5.1/manual.html#luaL_ref). 这个函数将把栈顶的对象注册到给定的表中。此注册过程保证为每个注册对象返回唯一的整数键（只要您不*手动*修改系统背后的表）。`luaL_unref`发布参考，allo

由于引用是整数键，因此您*可以*从`int`to 进行转换`void*`并将其作为数据。我可能会使用显式对象（`malloc`ing an `int`），但您可以随心所欲地存储它。

**第二步：**注册Lua函数时，使用`luaL_ref`将其添加到第一步创建的注册表中。将这个函数返回的key存放`void*`在注册函数的参数中。

**第三步：**当需要调用该函数时，使用您存储在`void*`参数中的整数键来访问在步骤 1 中创建的注册表。这将为您提供该函数，然后您可以使用通常的 Lua 方法调用该函数。

**第四步：**在注销 Lua 函数时，使用`luaL_unref`释放函数（这样就避免了 Lua 的内存泄漏）。如果你`malloc`编辑内存来存储整数键，`free`它在这里。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-10T17:31:14.013

我建议将您的函数存储到*注册表*中，并使用函数提供的引用机制`luaL_ref`和`luaL_unref`.

这些函数使用 C`int`值来访问这些值。例如，将这样的整数值存储在 C++ 类成员中很容易。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-11T21:12:56.573

@Nicolas Bolas 提供了很好的说明，但对于新手（包括我自己）来说太模糊了。通过反复试验，我提出了工作示例：

### 贮存

```
lua_newtable(L);  // create table for functions
int tab_idx = luaL_ref(L,LUA_REGISTRYINDEX); // store said table in pseudo-registry
lua_rawgeti(L,LUA_REGISTRYINDEX,tab_idx); // retrieve table for functions
lua_getglobal(L, "f"); // retrieve function named "f" to store
int t = luaL_ref(L,-2); // store a function in the function table
// table is two places up the current stack counter
lua_pop(L,1); // we are done with the function table, so pop it 
```

### 恢复

```
lua_rawgeti(L,LUA_REGISTRYINDEX,tab_idx); // retrieve function table
lua_rawgeti(L,-1,t); // retreive function

//use function
//don't forget to pop returned value and function table from the stack
lua_pop(L,2); 
```

# markdown - 如何将 Markdown 格式的文本转换为 TWiki 格式的文本？

> ID：12823937
> 
> 赞同：7
> 
> 时间：2012-10-10T16:17:07.647
> 
> 标签：markdown, twiki

如何将[Markdown](http://en.wikipedia.org/wiki/Markdown)格式的文本转换为[TWiki](http://en.wikipedia.org/wiki/TWiki)格式的文本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T23:11:25.773

我会使用[https://metacpan.org/module/Markdown::Foswiki](https://metacpan.org/module/Markdown::Foswiki) :)

# php - 使 Web 服务器成为两侧之间的中继

> ID：12823939
> 
> 赞同：1
> 
> 时间：2012-10-10T16:17:15.047
> 
> 标签：php, android, web-applications, web

我想通过网络控制机器人，机器人已连接到 Android 设备。操作如下：

*   使用 JavaScript 和 HTML 编写的 Web 应用程序在台式计算机上运行，​​该计算机从用户那里获取键盘输入并将其发送到连接到机器人的 android 设备。

*   android设备接收命令，然后将它们发送到用于控制机器人的Arduino板。

但是我应该如何将数据传送到没有静态 IP 地址的 Android 设备？

我有两种方法来解决这个问题：

1.  JavaScript 应用程序将键盘输入发送到运行 PHP 和 MySQL 的 Web 服务器，然后 php 应用程序将数据存储在 MySQL 数据库中。一个应用程序在连接到该 Web 服务器的 Android 上运行，并从 MySQL 数据库中提取数据。

2.  JavaScript 将数据发送到 Web 服务器。连接到 Web 服务器的 android 应用程序直接接收数据，因此 Web 服务器仅用作中继。

第一种方法很容易做到，但速度很慢，所以我的问题是......

如何实现第二种方法以及我应该使用哪些网络技术来实现它？以及如何使网络服务器作为两端之间的中继？

PS：我打算使用 000webhost.com 作为网络服务器。所以我不会使用自己的服务器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:22:45.697

您可以让您的 Android 应用程序轮询网络服务器以获取未完成的命令。这在数据使用方面有点低效，但如果您使用的是无限的 3G 计划/wi-fi，您可以忍受它。这将非常容易实施。

或者，在您的服务器上设置 TCP 服务器，并让您的 Android 应用程序打开与服务器的套接字连接。这样，您的 Web 应用程序可以将命令发送到服务器，服务器将立即将它们流式传输到 Android 设备。实施起来会稍微困难一些，但如果做得好，会更有效和更健壮。

PS - 大多数共享服务器不允许您在主机上打开 TCP 服务器，因此您可能被迫使用第一个选项。

PPS - 我不知道 Google Cloud Messaging。对于您想要实现的目标来说，这似乎是一个很好的解决方案。你应该看看它。

# ruby - Ruby Shoes 中的西里尔字符使用 edit_line 元素

> ID：12823958
> 
> 赞同：0
> 
> 时间：2012-10-10T16:18:18.277
> 
> 标签：ruby, user-interface, utf-8, shoes

我在使用鞋子时遇到了一个奇怪的问题。我附上了我正在为 Ruby 脚本构建的一个非常简单的 GUI 的屏幕截图，我希望用它来帮助我学习俄语。但是我对西里尔字符有一个奇怪的问题。似乎当我尝试设置 edit_line 的文本时，我只得到一个问号。这是我的完整代码。

```
class Verb
    attr_accessor :infinitive,:present_first_sing,:present_second_sing,:present_third_sing,:present_first_plu,:present_second_plu,:present_third_plu
    def initialize(verb_infinitive) 
        @infinitive = verb_infinitive

        case @infinitive

        when "думать"
            @present_first_sing,@present_second_sing,@present_third_sing,@present_first_plu,@present_second_plu,@present_third_plu  = "думаю","думаешь","думает","думаем","думаете","думают"
            #puts "Added Dymat"
        when "смотреть"
            @present_first_sing,@present_second_sing,@present_third_sing,@present_first_plu,@present_second_plu,@present_third_plu  = "смотрю","смотришь","смотрит","смотрим","смотрите","смотрят"
            #puts "Added Smatret"
        else    
            puts "Dunno what to do with that dude"
        end
    end

    def get_available_conjugations
        answers = Hash.new
        answers["1st-sg-pres"] = @present_first_sing
        answers["2nd-sg-pres"] = @present_second_sing
        answers["3rd-sg-pres"] = @present_third_sing
        answers["1st-pl-pres"] = @present_first_plu
        answers["2nd-pl-pres"] = @present_second_plu
        answers["3rd-pl-pres"] = @present_third_plu
        return answers;

    end
    def to_s
        return @infinitive
    end

end 
```

这是我非常简单的动词类。这里没什么特别的。我的用户界面脚本如下

```
require "verb"

verb1 = Verb.new("думать")
verb2 = Verb.new("смотреть")

quizVerbs = Hash.new
quizVerbs[verb1.infinitive]=verb1 
quizVerbs[verb2.infinitive]=verb2
qa_hash = Hash.new

Shoes.app :width => 600, :height=> 200 do 
    stack do
        @flow1 = flow do 
            para "Subject Verb: "
            @verb_list = list_box :items => quizVerbs.keys
            @verb_list.change do |vl|
                @current_verb = vl.text
                @p1.text = @current_conjugation
            end
        end

        @flow2 = flow do
            @p1 = para "#{@current_conjugation}"
            @user_input_box = edit_line :width => 400
            @user_input_box.text = "й"
            @rwpara = para "Nothing answered yet"
        end
        @flow3 = flow do
            button("Next") do 
                @rwpara.text = ""
                @user_input_box.text.each_codepoint {|c| @rwpara.text= @rwpara.text+c}

            end
        end
        @flow4 = flow do 
            button("й") { 
                @user_input_box.text = "й"
                alert("й") 
            } 
            button("ц") { 
                @user_input_box.text = "ц"
                alert("ц") 
            }
            button("у") { alert("Good job.") }
            button("к") { alert("Good job.") }
            button("е") { alert("Good job.") }
            button("н") { alert("Good job.") }
            button("г") { alert("Good job.") }
            button("ш") { alert("Good job.") }
            button("щ") { alert("Good job.") }
            button("з") { alert("Good job.") }
            button("х") { alert("Good job.") }
            button("ъ") { alert("Good job.") }
        end
        @flow5 = flow do 
            button("ф") { alert("Good job.") }
            button("ы") { alert("Good job.") }
            button("в") { alert("Good job.") }
            button("а") { alert("Good job.") }
            button("п") { alert("Good job.") }
            button("р") { alert("Good job.") }
            button("о") { alert("Good job.") }
            button("л") { alert("Good job.") }
            button("д") { alert("Good job.") }
            button("ж") { alert("Good job.") }
            button("э") { alert("Good job.") }
            button("ё") { alert("Good job.") }
        end
        @flow6 = flow do 
            button("я") { alert("Good job.") }
            button("ч") { alert("Good job.") }
            button("с") { alert("Good job.") }
            button("м") { alert("Good job.") }
            button("и") { alert("Good job.") }
            button("т") { alert("Good job.") }
            button("ь") { alert("Good job.") }
            button("б") { alert("Good job.") }
            button("ю") { alert("Good job.") }
        end
    end
end 
```

![俄罗斯桂](../Images/4f38f78a2f21abbd224ac80890f51f7b.png)

如果我单击带有字符©的按钮，我可以看到警告框中的字符正确显示。但是我将值分配给代码中编辑行的文本

```
button("й") { 
 @user_input_box.text = "й"
 alert("й") 
} 
```

但是，如果您再次查看 gui，您会发现我只显示了一个问号。这让我发疯了。我在这里俯瞰什么？

# c++ - 不同大小数组的迭代器

> ID：12823959
> 
> 赞同：5
> 
> 时间：2012-10-10T16:18:22.193
> 
> 标签：c++, arrays, templates, c++11, iterator

以下代码在我的系统上编译良好：

```
#include <array>
#include <type_traits>

static_assert(std::is_same<std::array<int, 5>::iterator,
                           std::array<int, 7>::iterator>::value, ":("); 
```

标准是否保证了这种行为？迭代器类型是否与数组大小无关？

如果有保证，有没有办法从元素类型中抽象出来，忽略大小？

```
template<typename T, size_t n>
void foobar(std::array<T, n>::iterator it) 
```

也就是说，有没有什么方法可以在不提及 size 的情况下编写上述特定于数组的代码`n`？

请注意`T*`，即使在发布模式下迭代器可能是`T*`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:28:04.700

不，没有任何保证。标准只是说

```
typedef implementation-defined    iterator; 
```

迭代器类型可以是普通指针、属于 的类`array`或包装普通指针的单独类。

如果是成员类，则*取决于*数组大小。否则很可能不会。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T16:25:24.767

不，不能保证。每个数组类型`array<T, size_t>`都有一个名为 typedef 的嵌套成员`iterator`，其类型是实现定义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T16:27:55.343

简单的答案是让它更通用一点。为什么您只想允许来自 a 的迭代器`std::array`？

```
template <typename Iterator>
void foobar( Iterator it ) 
```

在第二段代码中，类型`T`和大小`n`处于不可推断的上下文中。从概念上讲，多个`std::array`类型可以具有相同的`iterator`类型，或者正如您提到的那样，它可以只是`T*`，并且不可能找到可能`std::array`的 a `T*`as`iterator`

# java - 用Java生成存折签名

> ID：12823960
> 
> 赞同：2
> 
> 时间：2012-10-10T16:18:23.187
> 
> 标签：java, signature, passbook

据我所知，这是第一次有人在 Java 中尝试这个，我觉得这很难相信。

我只是在尝试使用为我的 manifest.json 生成签名文件的 .pem、.p12 和 .cer 文件。这是我所拥有的，这给了我一个 InvalidKeyException 版本不匹配：（支持：00，解析：03

请参阅下面发生错误的代码中的注释。我已经查看了一些其他语言的示例，说明人们如何使用 openssl 执行此操作，但必须有一个 Java 等价物？

```
 File pemFile = new File("AWWdevCert.pem");
    File passCer = new File("pass.cer");
    File passP12 = new File("pass.p12"); 

    KeyFactory keyFactory = KeyFactory.getInstance("RSA");
    KeySpec ks = new PKCS8EncodedKeySpec(FileUtils.readFileToByteArray(passP12));
    PrivateKey privKey = keyFactory.generatePrivate(ks); // ERROR HERE

    CertificateFactory certFactory = CertificateFactory.getInstance("X.509");
    InputStream in = new ByteArrayInputStream(FileUtils.readFileToByteArray(passCer));
    X509Certificate passCert = (X509Certificate)certFactory.generateCertificate(in); //don't know what to do with this

    File inputFile = new File("WebContent/WEB-INF/Lowes.raw/manifest.json"); 
    FileInputStream freader = null;
    int sizecontent = ((int) inputFile.length());
    byte[] contentbytes = new byte[sizecontent];
    freader = new FileInputStream(inputFile);
    System.out.println("\nContent Bytes: " + freader.read(contentbytes, 0, sizecontent));
    freader.close();

    Signature signature = Signature.getInstance("Sha1WithRSA");
    signature.initSign(privKey);
    signature.update(contentbytes);

    byte[] signedData = signature.sign();

    //create signature file
    File signatureFile = new File(passDirectory.getAbsolutePath()+File.separator+"signature"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:52:44.683

在 github 上检查这个[jpasskit项目](https://github.com/bitzeche/jpasskit/blob/master/jpasskit/src/main/java/de/brendamour/jpasskit/signing/PKSigningUtil.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-20T13:41:30.807

您也可以仅使用本机 sun.security 包生成签名。这是 Scala 中的一个示例（可以很容易地为 Java 重写）

```
import java.security.cert.X509Certificate
import java.security.{MessageDigest, PrivateKey, Signature}
import java.util.Date

import sun.security.pkcs._
import sun.security.util.DerOutputStream
import sun.security.x509.{AlgorithmId, X500Name}

object PKPassSigner {
  def sign(
    signingCert: X509Certificate,
    privateKey: PrivateKey,
    intermediateCert: X509Certificate,
    dataToSing: Array[Byte]
  ): Array[Byte] = {
    val digestAlgorithmId = new AlgorithmId(AlgorithmId.SHA_oid)

    val md = MessageDigest.getInstance(digestAlgorithmId.getName)
    val attributes = new PKCS9Attributes(Array(
      new PKCS9Attribute(PKCS9Attribute.SIGNING_TIME_OID, new Date()),
      new PKCS9Attribute(PKCS9Attribute.MESSAGE_DIGEST_OID, md.digest(dataToSign)),
      new PKCS9Attribute(PKCS9Attribute.CONTENT_TYPE_OID, ContentInfo.DATA_OID)
    ))

    val signature = Signature.getInstance("Sha1WithRSA")
    signature.initSign(privateKey)
    signature.update(attributes.getDerEncoding)
    val signedData = signature.sign()

    val signerInfo = new SignerInfo(
      X500Name.asX500Name(signingCert.getIssuerX500Principal),
      signingCert.getSerialNumber,
      digestAlgorithmId,
      attributes,
      AlgorithmId.get(privateKey.getAlgorithm),
      signedData,
      null
    )

    val p7 = new PKCS7(
      Array(digestAlgorithmId),
      new ContentInfo(ContentInfo.DATA_OID, null),
      Array(signingCert, intermediateCert),
      Array(signerInfo)
    )

    val out = new DerOutputStream()
    p7.encodeSignedData(out)
    out.flush()
    val res = out.toByteArray
    out.close()
    res
  }
} 
```

# css - 像 Safari 和 Firefox 一样的抗锯齿

> ID：12823961
> 
> 赞同：0
> 
> 时间：2012-10-10T16:18:24.697
> 
> 标签：css, google-chrome, safari, antialiasing

我一直在研究一个网站，当所有浏览器上的文本都很小时，我无法让文本看起来抗锯齿。

我可以在 Safari 和 Firefox 中看到最好的结果，但是，在 IE 和 Chrome 中，文本的抗锯齿效果不好，看起来比需要的要厚。

我已经尝试了所有我找到的抗锯齿解决方案，但没有一个适合我的需要。

# javascript - 如何停止 vs2010 的 jslint 插件在 jQuery 上给出错误？

> ID：12823965
> 
> 赞同：0
> 
> 时间：2012-10-10T16:18:25.353
> 
> 标签：javascript, jquery, jslint

> **可能重复：**
> [如何更改 jslint（VS 2010 扩展）以忽略文件？](https://stackoverflow.com/questions/5069136/how-can-i-change-jslintvs-2010-extension-to-ignore-files)

我使用 jsLint 插件已经有一段时间了，但就在我开始构建时，它似乎正在查看每个 javascript 文件，并且（通常不是我的）javascript 上的错误计数超过 1000。

有没有人有任何解决这个问题的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:22:15.563

在解决方案资源管理器中右键单击 JS 文件，然后选择“跳过构建”

# perl - 文件中最常用的字符串

> ID：12823971
> 
> 赞同：3
> 
> 时间：2012-10-10T16:18:56.337
> 
> 标签：perl, file, sorting

我在这里发现了一篇文章，有人设法从文件中读取信息并整理出最常用的单词并返回每个单词的使用次数。输入来自命令行参数，但我想执行相同的脚本，然后将文件名作为输入在脚本中运行。我找不到我做错了什么。

```
print "Type the name of the file: ";
chomp(my $file = <>);

open (FILE, "$file") or die;

while (<FILE>){
    $seen{$_}++ for split /\W+/;
}

my $count = 0;
for (sort {
    $seen{$b} <=> $seen{$a}
              ||
       lc($a) cmp lc($b)
              ||
          $a  cmp  $b
} keys %seen)
{
    next unless /\w/;
    printf "%-20s %5d\n", $seen{$_}, $_;
    last if ++$count > 100;
}
close (FILE); 
```

我目前的结果是：

```
15                       0
15                       0
10                       0
10                       0
10                       0
5                        1
5                        0
5                        0
5                        0
5                        0 
```

我想要的结果是：

```
<word>             <number of occurances>
<word>             <number of occurances>
<word>             <number of occurances>
<word>             <number of occurances>
<word>             <number of occurances>
<word>             <number of occurances> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:55:06.927

线

```
printf "%-20s %5d\n", $seen{$_}, $_; 
```

与您的意图相反。`$_`是一个字符串，`$seen{$_}`是文本中出现次数的计数`$_`（一个数字），所以你想说要么

```
printf "%-20s %5d\n", $_, $seen{$_}; 
```

或者

```
printf "%5d %-20s\n", $seen{$_}, $_; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:24:34.423

在第二行中，您要将要打开的文件的名称放入 $file，而不是 $seen。所以：

```
chomp(my $file = <>); 
```

chomp 在最后摆脱了换行符（从按回车键）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:22:37.570

两件事情：

1.  您正在将用户输入的文件输入读入变量`$seen`而不是`$file`.

2.  您需要剔除收到的输入以摆脱尾随的换行符：

    ```
    my $file= <>;
    chomp($file); 
    ```

    或缩写形式：

    ```
    chomp(my $file = <>); 
    ```

# git - 如何修改 git add 来处理已删除的文件？

> ID：12823976
> 
> 赞同：34
> 
> 时间：2012-10-10T16:19:18.250
> 
> 标签：git

我从我的 git repo 中删除了一些文件，现在，根据状态查看

```
# Changes not staged for commit:
# ...
#   deleted:    project/war/favicon.ico
#   deleted:    project/war/index.html 
```

通常，我会通过发出`git add .`命令来暂存它们，但这样做不会影响 git 状态。文件仍未暂存以进行提交。

现在..我知道我可以`git rm file`解决这个问题。

问题是......我可以`git add .`以某种方式修改以也暂存已删除的文件吗？我想加“。” 照顾一切（包括已删除的文件）

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-10-10T16:22:56.320

# c# - 是否有内置服务可以从 Windows 2008 服务器获取时间（和时区）？

> ID：12823978
> 
> 赞同：-1
> 
> 时间：2012-10-10T16:19:30.643
> 
> 标签：c#, timezone

我正在创建一个从另一个 Windows 2008 服务器获取时间戳信息（在本地服务器时区）的 .NET 服务。我无法控制另一台服务器，我需要一种以编程方式从该服务器获取时区偏移量的方法，以便我可以将时间戳信息解释为 UTC 时间。是否有内置服务可以从 Windows 2008 服务器获取时间（和时区）？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:49:48.377

查看这篇文章：http: [//blogs.technet.com/b/heyscriptingguy/archive/2012/03/28/use-powershell-to-see-time-zone-information-on-remote-computers.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2012/03/28/use-powershell-to-see-time-zone-information-on-remote-computers.aspx)

它讨论了使用 powershell，您可能需要访问服务器，但如果您正在寻找一种以编程方式访问的方法，它可能会有所帮助。

如果您能够映射到服务器，您也可以尝试：

```
net time \\SERVER_NAME 
```

# java - Android：在警报管理器触发的服务中使用唤醒锁

> ID：12823980
> 
> 赞同：0
> 
> 时间：2012-10-10T16:19:33.287
> 
> 标签：java, android, service, alarmmanager, wakelock

在我的应用程序中，我有一个警报，它触发了一项从互联网下载信息并显示通知的服务。

这是我的代码的简化版本：

MyActivity 包含以下内容：

```
 Calendar cal = Calendar.getInstance();
            cal.add(Calendar.SECOND, 20);
            Intent intent = new Intent(this, AlarmService.class);
            PendingIntent pendingIntent = PendingIntent.getService(this, 0, intent, 0);
            AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
            alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), 20000, pendingIntent); 
```

AlarmService 看起来像这样：

```
public class AlarmService extends Service {

    @Override
    public void onCreate() {

        new myAsyncTask().execute();

    }

    private class myAsyncTask extends AsyncTask<Void, Void, Void> {

        @Override
        protected Void doInBackground(Void... args) {

            //Download stuff

            return null;
        }

        @Override
        protected void onPostExecute(Void arg) {
            //Show notification
        }
    }
} 
```

我真的不明白什么时候使用唤醒锁，所以我的问题是：在这种情况下，我应该使用唤醒锁吗？如果是，我应该在哪里开始和停止它？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:29:27.637

是的，您需要使用 a`WakeLock`来确保您的服务可以完成其工作。

如果使用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)满足您的设计要求，我会看看[WakefulIntentService](https://github.com/commonsguy/cwac-wakeful)。它代表您管理警报和`WakeLock`s，并且易于设置。当`WakeLock`警报触发时获取它，并且`WakefulIntentService`库负责在服务完成时释放它。

如果你走这条路，你将不想使用 AsyncTask - 你需要保持服务活跃（在它的`doWakefulWork()`方法中）以保持`WakeLock`.

# php - 我可以在 Zend 中有一个 Partial 控制器吗？

> ID：12823986
> 
> 赞同：1
> 
> 时间：2012-10-10T16:19:53.217
> 
> 标签：php, model-view-controller, zend-framework

在 Zend 框架中是否有可能有一个控制器来执行一些逻辑，然后设置一些视图变量以供部分显示？

* * *

为了澄清，我有一个实现部分的观点。

我的部分逻辑是从数据库中获取一些项目。然后显示项目。

目前，逻辑在部分视图（.pthml 文件）中。

是否有控制器或我可以用来在局部视图之外执行此逻辑的东西？

据我了解 MVP 模式，我不应该在视图中有这样的逻辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:47:45.227

将逻辑排除在您的视图之外是一件好事，这就是[视图助手](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html)的设计目的。

关于[编写自己](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.custom)的部分将是您特别感兴趣的。

这将允许您通过编写如下内容将逻辑排除在视图之外：-

```
<?php echo $this->getItems(); ?> 
```

在你看来，而不是在那里有逻辑。

例如，创建一个名为 getItems 的助手非常容易。创建`application/views/helpers/GetItems.php`并创建您的助手：-

```
class Zend_View_Helper_GetItems extends Zend_View_Helper_Abstract
{
    public function getItems()
    {
        //Do some stuff
        return $this->view->escape("Did some stuff!");
    }
} 
```

然后像上面那样调用它，你不需要做任何其他事情。

# emacs - 防止完成读取以 nil 退出

> ID：12823987
> 
> 赞同：0
> 
> 时间：2012-10-10T16:19:56.627
> 
> 标签：emacs, elisp

我正在阅读 上的文档`completing-read`，但我找不到做我需要的方法。

它说：

> （完成-读取 PROMPT COLLECTION &optional PREDICATE REQUIRE-MATCH INITIAL-INPUT HIST DEF INHERIT-INPUT-METHOD）
> 
> . . .
> 
> REQUIRE-MATCH 可以采用以下值： - t 表示不允许用户退出，除非输入是（或完成到）COLLECTION 的元素或为空。- nil 表示用户可以使用任何输入退出。- `confirm' 表示用户可以使用任何输入退出，但如果输入不是 COLLECTION 的元素，她需要确认她的选择。- `confirm-after-completion' 表示用户可以使用任何输入退出，但如果她
> 在 `minibuffer-complete-and-exit' 之前调用 `minibuffer-complete'
> 并且输入不是收藏的元素。- 任何其他行为都与 t 类似，除了键入 RET 不会退出，如果它执行非空完成。

我需要做的是：

```
(completing-read "What kind of project should I create? "
  haxe-project-kinds
  (lambda (x) (message "predicate: %s" x)) t) 
```

这不应该 return `nil`，因为如果它确实是一个错误 - 但我不想让用户通过所有其他选项，直到她发现她的第一个错误。

不仅如此，文档中宣传的行为与实际发生的情况不符。我放在第 4 个参数的位置上完全没有区别，行为没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:09:56.660

我不确定您的示例代码到底不满足您想要的哪一部分，因此很难给出一个好的答案。我的猜测是你想防止用户用空答案点击 RET。Indeed`completing-read`不会阻止这种情况，即使使用`require-match`set 也是如此。通常处理这种情况的方法是使用一个非零值作为`default`参数，在这种情况下，当用户刚刚点击 RET 时会返回这个值。

如果这还不够好，那么您可能必须使用`minibiffer-with-setup-hook`and 在钩子中，设置您为此创建的特殊键映射，其中 RET 绑定到一个新函数，如果迷你缓冲区为空，则该函数会发出错误信号，并且`minibuffer-complete-and-exit`否则调用。

# ios - iOS6/UIWebview 重定向到 App 的错误页面

> ID：12823989
> 
> 赞同：1
> 
> 时间：2012-10-10T16:20:19.090
> 
> 标签：ios, ios5, uiwebview, ios6

我们的应用程序依赖 UIWebview 在用户发起电话呼叫后返回应用程序。在咨询了一些开发者之后，我们没有对 iOS6 做任何改动，希望应用能够正常运行。

现在，发生了以下情况：

1) UIWebview 仍在工作 - 结束通话时将用户带回应用程序

2) 但是，该应用程序将用户引导到错误的屏幕 - 它正在将其带到用户应该看到的屏幕之后。用户可以记录电话的关键屏幕未显示。

3) 唯一的例外似乎是当用户注销并重新登录时——在这种情况下，他们只能看到正确的屏幕一次，然后下次打电话时他们又会进入错误的屏幕。

我不是编码员，但在浏览完代码后，看起来这是三个（几乎相同）代码片段之一，应该在电话结束时调用结束通话屏幕，但在 iOS6 下不是：

```
- (IBAction)onCall:(id)sender
{
DashCaller *caller = [[DashCaller alloc] init];

NSString *callNumber = _phone.number;
if (!callNumber)
{
    callNumber = @"No Phone number";
}
else if (callNumber.length == 0)
{
    callNumber = @"No Phone number";
}
else
{
    callNumber = [callNumber stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
}

DashDelegate.calledPhone = _phone;
DashDelegate.callLogVC.delegate = _viewController;
DashDelegate.callStartDate = [NSDate date];

NSUserDefaults *setting = [NSUserDefaults standardUserDefaults];
NSNumber *blockNumber = [setting valueForKey:BLOCK_NUMBER];
NSURL *url = nil;

if (blockNumber.boolValue)
    url = [NSURL URLWithString:[NSString stringWithFormat:@"tel://%@%@", kStringBlockNumber, callNumber]];
else {
    url = [NSURL URLWithString:[NSString stringWithFormat:@"tel://%@", callNumber]];
}

[caller callTelURL:url];
} 
```

具体来说，“DashDelegate.callLogVC.delegate = _viewController;”这一行 似乎它应该调用 CallLogVC 视图，但它会转到应该出现在该视图之后的屏幕。

任何想改变什么的人（可能会受到 iOS6 的影响）？该应用程序在 iOS5 中功能齐全。而且，为什么应用程序可能会在注销登录后仅显示一次此页面，然后停止显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:37:21.443

要返回原始应用程序，您可以使用 telprompt:// 而不是 tel:// - tell 提示符将首先提示用户，但当呼叫完成后，它将返回您的应用程序：

```
NSString *phoneNumber = [@"telprompt://" stringByAppendingString:mymobileNO.titleLabel.text];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:phoneNumber]]; 
```

您也可以尝试使用这些应用程序委托方法在调用完成后恢复应用程序。

```
- (void)applicationDidBecomeActive:(UIApplication *)application;

- (BOOL) application:(UIApplication *)application shouldSaveApplicationState:(NSCoder *)coder NS_AVAILABLE_IOS(6_0);

- (BOOL) application:(UIApplication *)application shouldRestoreApplicationState:(NSCoder *)coder NS_AVAILABLE_IOS(6_0); 
```

# mongodb - 如何将 mongo 命令生成为平面文件

> ID：12823990
> 
> 赞同：51
> 
> 时间：2012-10-10T16:20:20.523
> 
> 标签：mongodb, mongodb-java, mongodb-query

如何将 MongoDB 命令的结果导出到平面文件

例如，如果我要`db.collectionname.find()`进入一个平面文件。

我试过`db.collectionname.find() >> "test.txt"`似乎不起作用。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-10-10T16:33:43.640

您可以从命令行尝试以下操作

```
mongo 127.0.0.1/db --eval "var c = db.collection.find(); while(c.hasNext()) {printjson(c.next())}" >> test.txt 
```

假设您在 localhost 上运行了一个名为“db”的数据库和一个名为“collection”的集合，这会将所有记录导出到一个名为 test.txt 的文件中

如果您想要执行更长的脚本，您还可以创建一个 script.js 文件并使用

```
mongo 127.0.0.1/db script.js >> test.txt 
```

我希望这有帮助

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-10-10T16:31:47.800

我不知道直接从 mongo shell 执行此操作，但是您可以让 mongoexport 执行查询并将结果发送到带有 -q 和 -o 选项的文件：

```
mongoexport -h mongo.dev.priv -d models -c profiles -q '{ $query : { _id : "MRD461000" } }' -o MRD_Series1.json 
```

上述命中查询模型数据库中的配置文件集合，获取 _id = "MRD641000" 的 JSON 文档。为我工作。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-05-28T12:48:06.027

用这个

```
mongo db_name --username user --password password < query1.js >> result.txt 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-17T09:42:33.513

试试这个 - 返回一个带有查询数据的 json 文件，您可以更改`.json`for`.txt`和其他。

```
mongoexport --db products --collection clicks --query '{"createdInt":{$gte:20190101}, "clientId":"123", "country":"ES"}' --out clicks-2019.json 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-11T14:48:42.450

安装 MongoDB Compass，然后它将有一个工具将查询结果导出到 Json/CSV 文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-02T10:14:17.237

在 Peshkira 的回答中错过了需要成为实际数据库的数据库，这里是 shell 中单行的一般语法（假设没有密码）：

```
mongo <host>:<db name> --eval "var x = <db name>.<collection name>.<query>; while(x.hasNext()) { printjson( x.next() ) }" >> out.txt 
```

我在我的 Mac 和带有 Mongo 3+ 的谷歌云 Ubuntu 15 上测试了它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-25T18:23:47.673

```
mongoexport --host 127.0.0.1 --port 27017 --username youruser -p yourpass \
   -d yourDatabaseName -c collectionName --type csv \
   --fields field1,field2 -q '{"field1" : 1495730914381}' \
   --out report.csv 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-08-22T18:48:46.603

mongoexport --db db_name --collection collection_name --csv --out file_name.csv -f field1,field2, field3

# model-view-controller - 观察者模式可以从 MVC 中移除吗？

> ID：12823992
> 
> 赞同：2
> 
> 时间：2012-10-10T16:20:22.457
> 
> 标签：model-view-controller, design-patterns, class-diagram

我想知道你是否可以从 MVC 中删除观察者模式（观察者从模型到视图，通知模型中的任何更改并更新视图），如果我们删除它会有什么后果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:25:34.970

我不知道您将如何“删除”它，但如果您根本不使用它，那么后果将是您的控制器将负责使用模型的更改来更新视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:29:25.010

您可以删除它（取决于您使用的框架），但您需要警惕在多个位置显示相同数据的情况，因为它们会变得不同步。我看不出它会在设计方面或理论上引起任何问题，但在某些情况下它可能会让用户感到困惑。

# c# - 如何每次写入文本文件而不重新创建它（新）？

> ID：12823996
> 
> 赞同：0
> 
> 时间：2012-10-10T16:20:43.040
> 
> 标签：c#, file-io

我有这个按钮点击事件：

```
private void button6_Click(object sender, EventArgs e)
{
    if (File.Exists(@"d:\Keywords.txt"))
    {
        Dictionary<string,string> test = new Dictionary<string,string>();
        string value_of_each_key;
        string key_of_each_line;
        string line;
        int index;
        sr = new StreamReader(@"d:\Keywords.txt");
        while (null != (line = sr.ReadLine()))
        {
             index = line.IndexOf(",");
             key_of_each_line = line.Substring(0, index);
             value_of_each_key = line.Substring(index + 1);
             test.Add(key_of_each_line, value_of_each_key);
        }
        sr.Close();
     }

     using (var w = new StreamWriter(@"D:\Keywords.txt"))
     {
         crawlLocaly1 = new CrawlLocaly();
         crawlLocaly1.StartPosition = FormStartPosition.CenterParent;
         DialogResult dr = crawlLocaly1.ShowDialog(this);
         if (dr == DialogResult.OK)
         {
             if (LocalyKeyWords.ContainsKey(mainUrl))
             {
                 LocalyKeyWords[mainUrl].Clear();
                 //probably you could skip this part and create new List everytime
                 LocalyKeyWords[mainUrl].Add(crawlLocaly1.getText());
             }
             else
             {
                 LocalyKeyWords[mainUrl] = new List<string>();
                 LocalyKeyWords[mainUrl].Add(crawlLocaly1.getText());
             }
             foreach (KeyValuePair<string, List<string>> kvp in LocalyKeyWords)
             {
                 w.WriteLine(kvp.Key + "," + string.Join(",", kvp.Value));
             }
         }
     }  
 } 
```

文本文件的读取工作良好（现在进行测试并且工作良好）。Thep roblem 是每次我单击按钮时，它也会创建一个新的文本文件，我想要的是，当我单击按钮时，文本文件将准备好向他添加新文本，而不是每次都创建一个新的一。

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T16:22:02.410

听起来你只想改变这个：

```
new StreamWriter(@"D:\Keywords.txt") 
```

对此：

```
new StreamWriter(@"D:\Keywords.txt", true) 
```

这将使用具有第二个参数控制覆盖/附加行为的[构造函数的](http://msdn.microsoft.com/en-us/library/36b035cb.aspx)[重载。`StreamWriter`](http://msdn.microsoft.com/en-us/library/36b035cb.aspx)

或者，更易读，使用[`File.AppendText`](http://msdn.microsoft.com/en-us/library/system.io.file.appendtext.aspx)：

```
File.AppendText(@"D:\Keywords.txt") 
```

# wcf - 如何在 64 位工作站上安装 32 位 Microsoft Online Services Module for Windows PowerShell？

> ID：12823997
> 
> 赞同：0
> 
> 时间：2012-10-10T16:20:43.620
> 
> 标签：wcf, office365

我安装了适用于 Windows PowerShell 的 64 位版本的 Microsoft 在线服务模块，并且工作正常。

我在使用 Visual Web Developer Express 2010 创建使用这些 cmdlet 的 WCF Web 服务（32 位）时遇到了问题。例外只是告诉我

```
The term 'Import-Module MSOnline' is not recognized as the name of a cmdlet. 
```

默认安装程序不允许安装 32 位版本。

# windows - 在网络驱动器上的文件中搜索字符串的最佳方法

> ID：12823998
> 
> 赞同：1
> 
> 时间：2012-10-10T16:20:45.220
> 
> 标签：windows, perl, vbscript

这是我的问题：我们有一个文件服务器（Windows 2003），人们一直在上面放置包含 PII 的表单。现在的政策是，我们文件服务器上的任何表格都不再允许使用个人 SSN 的最后 4 个。我正在尝试找出一个脚本来扫描文档中的“SSN”或“最后四个”等字符串，而我所能找到的只是有关如何在本地计算机上搜索文本文件的说明/示例。我见过很多与此类似的线程，但主要是在本地文件夹中搜索 txt 文件。我见过执行此操作的 powershell 脚本，但是（不要问为什么）我们的服务器上禁用了 powershell 脚本。

这可能吗？我一直在大量阅读多本 Perl 书籍，以希望获得线索或让我朝着正确的方向前进，但运气却是 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:47:34.760

除了 i/o 速度之外，远程访问文件与本地访问文件没有真正的区别。它只是一个文件描述符。

```
C:\>perl -MFile::Slurp -E "my $dir = q|//SERVER/Share/Test|; for my $file (read_dir($dir)) { say qq|$file: |, (read_file(qq|$dir/$file|) =~ /foo/) ? q|match| : q|not match| }"
bar.txt: not match
foo.txt: match 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:53:03.157

假设您最终可以访问这些文件，那么您可以通过以下方式搜索文件目录，查找字符串匹配项。

```
use strict;
use warnings;
use File::Find;

our $CHECK_FILE_EXTENSION = qr/.txt$/;
File::Find::find({wanted=>\&find_ssn, no_chdir=>1},$_) for @ARGV;
exit;

sub find_ssn
{
    ## File::Find sets $File::Find::name with full path to file, which is the correct path to an 'open' call when 'no_chdir' is used
    return unless $File::Find::name =~ $CHECK_FILE_EXTENSION;
    open F,$File::Find::name || die "Can't read file, $File::Find::name, $!\n";
    while(<F>)
    {
        if(/SSN/)
        {   
           ## file as 'SSN' in it, do your work here
        }
    }
    close F;
} 
```