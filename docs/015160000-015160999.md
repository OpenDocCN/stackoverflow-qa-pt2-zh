# StackOverflow 问答 15160000-15160999

# stl - 算法如何访问 STL 中数据结构的组件

> ID：15160000
> 
> 赞同：2
> 
> 时间：2013-03-01T14:24:05.660
> 
> 标签：stl, theory

标准模板库 (STL) 提供数据结构和算法。但是，并非每种算法都可以与每种数据结构一起使用。假设 STL 支持使用具有数据结构 D 的算法 A。

(a) A 和 D 之间的联系是如何建立的。换句话说，A 如何访问 D 的组件？举个例子。

(b) STL 保证（即承诺）关于使用 A 和 D 的结果。保证是什么？

* * *

A) STL 还提供了各种“迭代器”来访问数据结构上的元素。迭代器有很多种类型，它们可以从头到尾直线移动，有的可以双向移动，有的可以自由移动到 D 中的任何元素。D 支持的迭代器类型将决定 A 的类型可以使用 D 运行。

B) 如果 A 可以在 D 上运行，则 STL 保证完成 A 所需的时间复杂度 (O(n))。

你好！我正在准备理论考试。我想知道你们是否都认为我在这里的答案中遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:42:54.863

“（a）A和D之间的联系是如何建立的。也就是说，A如何访问D的组件？举个例子。”

它是通过迭代器完成的。迭代器是 STL 中算法和数据结构之间的粘合剂。我将使用 c++11 作为示例：

```
std::vector<int> vec{1, 5, 3, 4};
std::list<int> l{1, 4, 8, 3};

auto foundInVecItem = std::find(vec.begin(), vec.end(), 3);
//Note: same algorithm used for different data structure.
auto foundInVecItem = std::find(l.begin(), l.end(), 3); 
```

这是有效的，因为`std::find`不对用于搜索的数据结构做出任何假设。它使用这个`ForwardIterator`概念来实现它。您可以在[此处](http://en.cppreference.com/w/cpp/iterator)查看迭代器类别。

`std::find`可以像这样实现一些东西（因为它只是为了学习而简化）：

```
template <class ForwardIterator>
ForwardIterator find(ForwardIterator b, ForwardIterator e,
                    typename ForwardIterator::value_type v) {
    while (b != e) {
      if (*b == v) {
        return b;
      }
    }
    return e; 
```

}

这里重要的一点是迭代器接口被用来访问`std::list`or`std::vector`所以算法并不关心数据结构，只要它们提供`ForwardIterator`s。

“(b) STL 保证（即承诺）关于将 A 与 D 一起使用的结果。保证是什么？”

对不起，这太笼统了，你问这个问题是什么意思？如果您指的是大 O 表示法，即渐近计算成本，是的。该标准承诺给定数据结构的每个算法的有界大 O 成本。这取决于算法和数据结构。例如`std::advance`，将迭代器推进多个步骤，保证`O(1)`为`RandomAccessIterator`s 和`O(n)`其余步骤。

"A) STL 还提供了各种“迭代器”来访问数据结构上的元素。迭代器有多种类型，它们可以从头到尾线性移动，有的可以双向移动，有的可以自由移动到D 中的任何元素。D 支持的迭代器类型将决定可以使用 D 运行的 A 的类型。”

您可以在[此处](http://en.cppreference.com/w/cpp/iterator)查看迭代器类别。

“B）如果 A 可以在 D 上运行，则 STL 保证完成 A 所需的时间复杂度 (O(n))。”

是的，这是正确的。该规范保证给定数据结构的操作的渐近计算成本。

# ruby - “记住我”选项 - 我如何实现它？

> ID：15160004
> 
> 赞同：1
> 
> 时间：2013-03-01T14:24:25.597
> 
> 标签：ruby, authentication, sinatra

我的 Sinatra 应用程序中有一个简单的身份验证系统。`session[:user_id]`当用户输入正确的登录名和密码时，它基本上设置为用户的 id，仅此而已。现在这已经**足够了**，我不会使用其他解决方案。

我需要做的是做出“记住我”的选项。那么我怎样才能为我的简单解决方案做到这一点呢？我想不通。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T14:59:31.937

我这样做的方式是这样的（我们使用 OmniAuth 进行身份验证，使用 Mongoid 进行用户存储——登录表单使用 AJAX，所以回复是 JSON）。与“记住我”复选框对应的 HTML 字段称为“记住”：

```
post '/auth/identity/callback' do
  u = User.find(env['omniauth.auth']['uid'])
  session[:user] = u
  session.options[:expire_after] = 2592000 unless params['remember'].nil? # 30 days
  [200, {:msg => 'User logged in'}.to_json]
end 
```

这里的关键是`sessions.options[:expire_after]`线。如果不设置:expire_after，浏览器退出时cookie会自动删除。设置后，cookie 会在浏览器重新启动后保持不变，并保留指定的秒数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:33:23.607

为此，您可以利用 Sinatra Cookie。也许检查“remember_me”参数并将用户 ID 分配给 cookie（如果存在）。例如，这是一个 Rails 示例，但含义是相同的：

```
def login_user
    begin
      @user = User.authenticate(params)
      if @user
        if params[:remeberme] 
          cookies.permanent[:user_id] =  @user.id.to_s
        else
          cookies[:user_id] = @user.id.to_s
        end
      end
    rescue Exception => e
      @errors = [e]
    end
  end 
```

[西纳特拉饼干](http://www.sinatrarb.com/contrib/cookies.html)

# java - 如何获取servlet中表列的参数？

> ID：15160006
> 
> 赞同：-1
> 
> 时间：2013-03-01T14:24:32.337
> 
> 标签：java, jsp, servlets

晚上好，如何使用这里的 jsp 表单获取`chk_group`servlet 内的输入参数：`request.getParameterValues`

```
 <form name="MainForm" action="DeleteServlet" method="GET">
    <table BORDER=2 BORDERCOLOR=YELLOW width="120px" id="product_table">
        <tr>
            <td></td>
            <td><b>CarId</b></td>
            <td><b>Description</b></td>
            <td><b>Quantity</b></td>
            <td><b>Price</b></td>
            <td><b>CC.No</b></td>
            <td><b>Engine</b></td>
            <td><b>Cylinder.No</b></td>
            <td><b>MaxSpeed</b></td>
            <td><b>PetrolType</b></td>
            <td><b>PetrolCapacity</b></td>
        </tr>
        <c:forEach items="${product_list}" var="car">
            <tr>
                <td><INPUT type="checkbox" name="chk_group" /></td>
                <td><c:out value="${car.carId}" /></td>
                <td><c:out value="${car.carDesc}" /></td>
                <td><c:out value="${car.quantity}" /></td>
                <td><c:out value="${car.price}" /></td>
                <td><c:out value="${car.enginCc}" /></td>
                <td><c:out value="${car.trans}" /></td>
                <td><c:out value="${car.noOfCylinder}" /></td>
                <td><c:out value="${car.topSpeed}" /></td>
                <td><c:out value="${car.fuelType}" /></td>
                <td><c:out value="${car.fuelCapacity}" /></td>
            </tr>
        </c:forEach>
    </table>
    </form> 
```

注意：对于每个复选框，我仅在使用相应的 carId 值进行检查时设置该值：

```
function setCheckBoxValue(tableID) {
    try {

        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;
        for ( var i = 0; i < rowCount; i++) {
            var row = table.rows[i];

            var chkbox = row.cells[0].childNodes[0];
            if (null != chkbox && true == chkbox.checked) {
                var carId = table.rows[i].cells[1].innerHTML;
                table.rows[i].cells[0].value = carId;

            }

        }

    } catch (e) {
        alert(e);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:33:51.760

您尚未指定复选框值。提交此表单时，您最终会收到一个空字符串作为检查值。您需要给复选框一个唯一的值，以便您可以唯一地标识选中的行。对于所有其他 HTML 输入元素，复选框值成为请求参数值。

例如，汽车 ID：

```
<input type="checkbox" name="chk_group" value="${car.carId}" /> 
```

# jquery - jquery masonry 在初始页面加载时崩溃，单击“主页”菜单按钮后工作正常

> ID：15160010
> 
> 赞同：7
> 
> 时间：2013-03-01T14:24:42.127
> 
> 标签：jquery, css, wordpress, cross-browser, jquery-masonry

我的 jquery 砌体设置在初始页面加载时工作异常。似乎将图像放在第一行很好，第二行与第一行重叠，第三行相同。页面加载后，您可以单击主页按钮或徽标并重新加载页面，它可以正常工作。

我在functions.php中有这段代码，用于将砌体和jquery脚本放入：

```
if (!is_admin()) {
    wp_enqueue_script('jquery');
    wp_register_script('jquery_min', get_template_directory_uri(). '/js/jquery.min.js', array('jquery'), '1.6.1' );
    wp_enqueue_script('jquery_min');
    wp_enqueue_script('jquery');
    wp_register_script('jquery_masonry', get_template_directory_uri(). '/js/jquery.masonry.min.js', array('jquery'), '2.1.06' );
    wp_enqueue_script('jquery_masonry');
} 
```

该脚本在 head.php 中：

```
<?php if (is_page(2)) { ?>
    <script>
        $(function(){
            $('#content').masonry({
                // options...
                itemSelector : '.product',
                columnWidth : 310,
                isAnimated: true,
                animationOptions: {
                    duration: 700,
                    easing: 'linear',
                    queue: false
                }
            });
        });
    </script>
<?php } ?> 
```

这是该[站点](http://www.catherinesic.com/)的链接。

关于为什么在初始页面加载时加载奇怪的任何想法？

我对编写任何脚本都很陌生，所以请善待。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-01T14:43:48.130

我认为这是因为脚本在内容（图像）完全加载之前正在运行。因此定位误差。

尝试这个。

```
 $(window).load(function()
  {
      $('#content').masonry({
           itemSelector : '.product',
           columnWidth : 310,
           isAnimated: true,
           animationOptions: {
                duration: 700,
                easing: 'linear',
                queue: false
           }
      });
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:08:41.017

我也有类似的问题，图像在第一次加载时重叠。我通过首先加载图像克服了这个问题。

```
$(".id").imagesLoaded(function(){
    $('.id').masonry({
        itemSelector: '.scrapcontent',
        columnWidth: 3,
        isAnimated:true,
        animationOptions: {
            duration: 700,
            easing:'linear',
            queue :false
        }
    });
} 
```

如果图像已加载，则必须开始砌体的职责。它应该可以正常工作。

# javascript - 使用 Javascript 显示和隐藏文本

> ID：15160016
> 
> 赞同：4
> 
> 时间：2013-03-01T14:25:13.093
> 
> 标签：javascript

我有一些用于我网站的常见问题解答页面的 javascript 代码。因此，您单击问题并出现答案。现在，我想不通的是，当我单击一个问题并打开时，当我单击另一个问题时，我希望前一个问题关闭。基本上，所以一次只有一个开放。找到了类似的代码，但不完全是我想要的。

任何帮助都会很棒，这是我的代码。谢谢！！！！凯特

```
<script type="text/javascript">
function unhide(divID) {
var item = document.getElementById(divID);
if (item) {
item.className=(item.className=='hidden')?'unhidden':'hidden';
}
}
</script>

<p><a href="javascript:unhide('q1');">Here is my Question???</a></p>

<div id="q1" class="hidden">
<p>The Answer goes here.</p>
</div>

<p><a href="javascript:unhide('q2');">Here is my 2nd Question???</a></p>

<div id="q2" class="hidden">
<p>The 2nd Answer goes here.</p>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:33:46.417

使用变量来存储对先前显示元素的引用，然后在显示要取消隐藏的元素之前隐藏它

```
<script type="text/javascript">
    var previous;
    function unhide(divID) {
        var item = document.getElementById(divID);

        if (previous != null)
            previous.className='hidden';

        if (item) {
            item.className=(item.className=='hidden')?'unhidden':'hidden';
            previous = item;
        }
    }
</script>

<p><a href="javascript:unhide('q1');">Here is my Question???</a></p>

<div id="q1" class="hidden">
<p>The Answer goes here.</p>
</div>

<p><a href="javascript:unhide('q2');">Here is my 2nd Question???</a></p>

<div id="q2" class="hidden">
<p>The 2nd Answer goes here.</p>
</div> 
```

示例
[http://jsfiddle.net/hLkks](http://jsfiddle.net/hLkks)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:29:55.007

给所有答案一个类名，然后将它们全部选中并隐藏它们，然后再显示您刚刚单击的答案。如果你使用 jQuery

```
$(".answers").addClass("hidden");
$("#"+id).removeClass("hidden"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T14:45:04.173

有一个非常简单的方法。改进 Wryte 的答案，只需向所有项目添加一个单击事件，该事件会向活动项目添加一个类并将其从所有其他项目中删除。

```
item.addEventListener("click", function () {
    var items = this.parentNode.childNodes;

    for (var i=0; i < items.length; i++) {
        items[i].className = "";
    }
    this.className = "active";
}, false); 
```

小提琴：http: [//jsfiddle.net/Met3T/](http://jsfiddle.net/Met3T/)

每个项目都可以是你喜欢的任何东西，你不需要任何框架，只需要简单的 ole JavaScript。

CSS 可以像这样简单：

```
li {
    height: 2em;
    background: green;
    overflow: hidden;
    margin-bottom: 5px;
}
.active {
    height: auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T14:34:41.717

```
$(".header a.toggle").click(function(){
                    if($(this).hasClass("expanded")){
                        $(this).removeClass("expanded").addClass("collapsed")
                            .parent().siblings(".body").hide()
                    }
                    else{
                        $(this).removeClass("collapsed").addClass("expanded")
                            .parent().siblings(".body").show()
                    }
                }); 
```

这是一个示例，如果类被展开或折叠，它看起来

`<a class='toggle expanded' href='#'>Text</a>`

所以在你的 CSS 中做一个展开和折叠

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T14:38:08.363

```
<script type="text/javascript">
    var currentItem;
    function unhide(divID) {
        if (currentItem) {
            currentItem.className = 'hidden';
            currentItem = null;
        }
        var item = document.getElementById(divID);
        if (item) {
            item.className = 'unhidden';
            currentItem = item;
        }
    }
</script> 
```

# plugins - Zend Framework 2 视图助手和控制器插件

> ID：15160019
> 
> 赞同：-1
> 
> 时间：2013-03-01T14:25:20.653
> 
> 标签：plugins, zend-framework2, helper

我已经尝试 zf2 几个星期了，并且通常喜欢使用它。我在决定在哪里执行特定任务时遇到了麻烦。函数是否属于模型或控制器等。目前我想了解视图助手和控制器插件的概念。任何人都可以举几个例子，什么样的功能属于视图助手？我想知道控制器插件也是如此，举几个例子让我明白为什么我要制作插件而不是在控制器中编程功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:50:07.600

视图助手扩展了视图层的功能，并在整个应用程序中实现了可重用性。控制器插件扩展了控制器层的功能。

您通常使用两者来保持控制器/视图轻巧并在应用程序中重用它们（保持代码干燥）。

# reporting-services - 从参数列表运行报告/发送电子邮件？

> ID：15160026
> 
> 赞同：0
> 
> 时间：2013-03-01T14:25:34.023
> 
> 标签：reporting-services, sqlparameter

我遇到了一个问题，虽然我觉得我的直觉有一个“简单”的解决方案，但我却一无所获！我正在运行的报告使用的数据集包含我需要使用的用户名 1) 用作运行报告的参数和 2) 用于创建电子邮件地址并将其发送给用户。我真的对 SSRS 了解不够，或者没有经验，已经创建了参数化报告（不要介意我假设需要遍历数据集），也没有设置过数据驱动订阅。在这两个问题上的任何帮助都将赢得永恒的感激。

谢谢大家....再次！

帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T06:24:46.367

一旦你经历过一次，它不会太糟糕。首先，您需要从参数数据集中获取 SQL（它在报表定义中是多余的）。然后在 Report Manager/SharePoint 中，您可以定义数据驱动订阅。将参数数据集中的 SQL 粘贴到向导中作为查询，然后根据需要在向导的后续页面上使用来自该 SELECT 的列，例如电子邮件地址...电子邮件地址。

不需要编码（除了您已经拥有的参数数据集）并且该向导是相当不言自明且有据可查的。

祝你好运！

麦克风

# php - 在选择框中调用值而不使用 zend 表单

> ID：15160029
> 
> 赞同：0
> 
> 时间：2013-03-01T14:25:42.137
> 
> 标签：php, zend-framework

我是zend框架的新手。我想在视图文件中动态调用选择框中的选项值，而不使用 zend 表单。请帮忙

我的旧密码

```
$txtCategory = new Zend_Form_Element_Select('category');        
$txtCategory->setLabel('Category')
        ->setRequired(true);
$table = new Application_Model_DbTable_Category();

foreach ($table->getcategory() as $c) {
        $txtCategory->addMultiOption($c->ExpenseCategoryID, $c->Category);
} 
```

我的类别在选择框中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T05:05:24.570

如果您不想使用 zend_form，您可以简单地在视图上回显元素

在控制器中

```
$table = new Application_Model_DbTable_Category();
$this->view->categories = $table->getcategory();
$this->view->selected = "X"; // currently selected value 
```

在视图中

```
<form>
  <select name="select2" size="3" multiple="multiple" tabindex="1">
     <?php $selected = $this->selected;
     foreach($this->categories as $c) {
       echo "<option value=\"" . $c->ExpenseCategoryID . "\"" . ($c->ExpenseCategoryID ==   $selected ? " selected=\"selected\">" : ">") . $c->Category . "</option>";
     }?>
    </select>
  //rest of the element
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:50:39.677

您将需要学习如何使用`AJAX`和 javascript 与您的 PHP 服务器对话。这会比`Zend`像现在这样使用表格要难一些。一些教程链接：

[PHP 和 AJAX 教程点](http://www.tutorialspoint.com/php/php_and_ajax.htm)

[教程点AJAX系列](http://www.tutorialspoint.com/ajax/index.htm)

# regex - 使用正则表达式设置 Google Analytics 目标

> ID：15160031
> 
> 赞同：0
> 
> 时间：2013-03-01T14:25:44.970
> 
> 标签：regex, google-analytics

我想在分析中设置一个目标来跟踪表单完成的次数。表单完成后，“#thankyou”（不带引号）将添加到 url 的末尾...例如：[http](http://www.example.com/formpage#thankyou) ://www.example.com/formpage#thankyou 。

如何设置 Google Analytics（分析）目标以查找任何末尾带有 #thankyou 的 URL？我想我需要使用正则表达式，但不太明白。

我现在拥有的截图：

![在此处输入图像描述](../Images/5eec323b635277e32763bc6621ba12ac.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:31:06.207

您可能会使用头部匹配。正则表达式必须查找以 #thankyou 结尾并且前面有任意数量的任意字符的字符串，所以应该是

```
.*#thankyou.html$ 
```

在哪里 ”。” 表示“任何字符”，“*”表示“任意数量的前面字符”（在这种情况下为任何），美元符号表示“以前面的字符结尾”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T16:33:36.827

默认情况下，Google Analytics 不包含带有片段标识符的 URL 数据。您需要稍微修改您的跟踪代码，以便**#thankyou**显示在您的报告中。配置完成后，您的目标将开始显示。修改后的代码如下：

```
_gaq.push(['_trackPageview', location.pathname + location.hash + location.search]); 
```

# windows-8 - Windows 8 上的 Windows Phone 7 模拟器

> ID：15160032
> 
> 赞同：0
> 
> 时间：2013-03-01T14:25:45.627
> 
> 标签：windows-8, windows-phone-7.1.1

我按照[这个“指南”](http://blogs.msdn.com/b/astebner/archive/2012/02/29/10274694.aspx)使我的 Windows Phone SDK 7.1.1 在我的 Windows 8 Pro 32 位上工作。

一切正常，但是当我运行应用程序时，模拟器出现，30 秒后出现消息错误“Windows 手机模拟器已停止工作”。

我有 2 Gb 的内存，我认为这不是问题，因为在我的桌面上（我在笔记本上）我有 1.5 Gb 的内存（w7）并且一切正常。

所以有什么问题 ？

我真的需要让 Windows phone sdk 在这个笔记本上运行！谢谢大家，对不起我的英语不好：S

# jsf - Primefaces 远程命令只打后端一次

> ID：15160037
> 
> 赞同：1
> 
> 时间：2013-03-01T14:25:59.277
> 
> 标签：jsf, primefaces

```
<p:remoteCommand name="contentSlideDown"
    action="#{genaricBean.createList()}"
    update=":hform:innerPanel :hform:remoteCommands"
    oncomplete="console.log('contentSlideDown log');"/> 
```

我试图从一些 JavaScript 调用这个远程命令。第一次调用它工作正常，但每次之后它都不会调用后端。我仍然可以在我的日志中看到“contentSlideDown 日志”，但`createList`实际上从未被调用。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:41:12.197

在这上面工作了 4 个小时，我才弄明白。

当您不在 primefaces 中放置“已处理”值时，它默认为 @all （出于某种原因）。页面的另一部分使该过程失败，因此整个命令失败并吞下了错误，但仍在执行未完成的工作。

所以修复是添加：

```
 process="@none" 
```

# objective-c - 错误的接收器类型“双”

> ID：15160039
> 
> 赞同：1
> 
> 时间：2013-03-01T14:26:06.503
> 
> 标签：objective-c

我知道以前有人问过这个问题，但我已经解决了之前的一些问题，但我无法将它们与我的问题联系起来。

我正在尝试在我的应用程序中开发一个类，该类将处理要执行的所有计算，但是我遇到了一个尝试返回双精度值的更简单方法调用的问题。我对 iOS 编码很陌生，所以我做错了可能很简单。无论如何这里是代码

PS我不确定我是否提供了足够的信息，所以如果我需要添加任何其他内容，请告诉我

从 .m 文件进行方法调用

```
- (void)locationManager:(CLLocationManager *)manager 
        didUpdateToLocation:(CLLocation *)newLocation 
        fromLocation:(CLLocation *)oldLocation
{
    // print the location to the device logs to aid in debugging
    NSLog(@"didUpdateToLocation: %@", newLocation);
    CLLocation *currentLocation = newLocation;

    //this is the problem line here
    //Problem solved thans to trojanfoe and H2CO3
    double currentSpeed = [[BIDCalculations calculateSpeed: newLocation] doubleValue];

    //the problem line was replace with this new line which solved the error
    double currentSpeed = [BIDCalculations calculateSpeed: newLocation];

    // if there is a location to report, print it to the screen
    if (currentLocation != nil) {
        _positionLabel.text = [NSString stringWithFormat:@"%.3f, %.3f",
                               currentLocation.coordinate.longitude,
                               currentLocation.coordinate.latitude];

    }
} 
```

来自方法所在的 .m 文件（计算类）

```
@implementation BIDCalculations

+ (double)calculateSpeed:(CLLocation *)newLocation;
{
    return newLocation.speed;
} 
```

来自计算类的 .h 文件

```
@interface BIDCalculations : NSObject

+ (double)calculateSpeed:(CLLocation *)newLocation;

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:28:16.893

您的方法已经返回 a`double`所以将问题行更改为：

```
double currentSpeed = [BIDCalculations calculateSpeed:newLocation]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:28:27.223

```
+ (double)calculateSpeed:(CLLocation *)newLocation 
```

该方法已经返回一个`double`.

```
double currentSpeed = [BIDCalculations calculateSpeed:newLocation]; 
```

足够。

# ruby - 由于正确的 MIME 类型不匹配，自动下载停止

> ID：15160047
> 
> 赞同：0
> 
> 时间：2013-03-01T14:26:29.680
> 
> 标签：ruby, mime-types, selenium-webdriver, ruby-1.9.3

我编写了一个脚本来自动从网络下载文件，如下所示：

```
#Automatically download files to a given folder profile settings
#---------------------------------------------------------------
profile = Selenium::WebDriver::Firefox::Profile.new
profile['browser.download.dir'] = 'C:\Documents and Settings\My Documents\userdata\Rubydownloads'
profile['browser.download.folderList'] = 2
profile['browser.helperApps.neverAsk.saveToDisk'] = "application/pdf,application/x-pdf,application/acrobat,application/vnd.pdf,text/pdf,text/x-pdf,image/jpeg,image/pjpeg,image/gif,image/bmp,image/x-windows-bmp,image/tif,image/x-tif,image/tiff,image/x-tiff,application/tif,application/x-tif,application/tiff,application/x-tiff"
profile['browser.download.manager.showWhenStarting'] = false
driver = Selenium::WebDriver.for :firefox, :profile => profile 
```

但我的不好，一些`.tif,.tiff and .pdf`仍然错过而没有被下载。可以做到吗，比如说 - 如果`mime type`在上述配置文件设置中找不到合适的，那么脚本应该将其添加`mime`到浏览器设置中，以继续下载？

请在这里帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T16:16:09.590

我正在解决类似的问题。

我不确定您的`neverAsk.saveToDisk`列表中是否缺少 mime 类型（看起来不像），但我建议以下内容可能会有所帮助：

```
profile['browser.helperApps.alwaysAsk.force'] = 'false' 
```

# javascript - 这个nodejs代码是循环引用吗？

> ID：15160049
> 
> 赞同：2
> 
> 时间：2013-03-01T14:26:38.463
> 
> 标签：javascript, node.js, memory-leaks, closures

它们只是 node.js 官方文档中的几行。

```
client.on('data', function(data) {
  console.log(data.toString());
  client.end();
}); 
```

我认为客户端对象具有对回调的引用，回调具有对客户端对象的闭包引用。那是对的吗？如果是，为什么鼓励这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:54:26.097

是的，这是一个循环引用，但它不是内存泄漏。仅给出此代码片段，您只有一小部分对象的小图，但是是的，只要`client`可以从您的主程序访问，所有这些对象将永远不会有资格进行垃圾回收。但是，如果您要设置`client = null;`，则包括`client`对象和匿名事件处理函数的对象图将无法从主程序访问，因此有资格进行垃圾收集，因此 A-OK。

这种模式本身并不是内存泄漏。如果您要在循环中创建客户端并将对所有客户端的引用保存在数组或对象中，而没有代码来处理过时的客户端，那么是的，那将是内存泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:51:51.307

这是对的。node.js 中的事件发射器将其侦听器存储在私有 _listeners 属性中。您的处理程序函数`client`用作封闭变量，这不是绝对必要的，因为所有处理程序都以事件发射器作为`this`引用来调用。

但是，使用`this`而不是`client`不会改变`client`闭包中的事实，它只是提示 V8 从闭包中取消引用它，因为它没有被使用。

即使它是从闭包中使用的，V8 也有足够的逻辑来处理这种循环引用并正确地从内存中释放它们。

# c# - 单一职责原则是否与类的依赖关系直接相关？

> ID：15160050
> 
> 赞同：2
> 
> 时间：2013-03-01T14:26:40.283
> 
> 标签：c#, single-responsibility-principle

如果一个类通过接口依赖于多个其他类，是否违反了 SRP，或者如果预计两个接口都会更改，这是否只是违反，或者这完全是错误的思路？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T14:29:59.353

SRP 原则上与类可能具有的依赖关系和依赖关系完全正交。

一个类可以有一个单一的职责，但如果该职责执行起来很复杂，它可能对负责这些琐碎工作的“分包商”有很多依赖。从本质上讲，您的唯一职责是“协调这些人，使 X 发生”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:31:05.753

不必要。一个类仍然可以有一个职责，但有多个依赖项。拥有多个依赖项通常*表明*一个类做了很多事情，但这并不能*证明*这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:31:18.323

如果该类只是调用那些依赖接口上的方法，那不会违反 SRP，因为它正在编排一个在不同组件上调用不同方法的进程，这就是责任。

如果没有特定的上下文，很难提供准确的答案，但简而言之：具有多个接口的依赖关系本身并不违反 SRP。

# c# - ServiceStack 中的 Fluent Validation 没有错误消息

> ID：15160053
> 
> 赞同：3
> 
> 时间：2013-03-01T14:26:50.117
> 
> 标签：c#, servicestack, fluentvalidation

我刚刚开始熟悉 ServiceStack 并接触了 FluentValidation。我按照介绍创建了一个小型 Hello App。

我的问题是，当我尝试验证请求 DTO 时，**没有返回错误消息**来描述验证失败的原因，只有一个空白 Json 对象`{}`。

我自己，我认为验证是自动连接到 DTO 的，所以我不需要编写任何额外的代码。

答案可能很明显，但我看不到。任何帮助将不胜感激。我的代码如下：

```
namespace SampleHello2
{
    [Route("/hello")]
    [Route("/hello/{Name}")]
    public class Hello
    {
        public string Name { get; set; }
    }

    public class HelloResponse
    {
        public string Result { get; set; }
    }

    public class HelloService : Service
    {
        public object Any(Hello request)
        {
            return new HelloResponse { Result = "Hello, " + request.Name };
        }
    }

    public class HelloValidator : AbstractValidator<Hello>
    {
        public HelloValidator()
        {
            //Validation rules for all requests
            RuleFor(r => r.Name).NotNull().NotEmpty().Equal("Ian").WithErrorCode("ShouldNotBeEmpty");
            RuleFor(r => r.Name.Length).GreaterThan(2);
        }
    }

    public class Global : System.Web.HttpApplication
    {
        public class HelloAppHost : AppHostBase
        {
            //Tell Service Stack the name of your application and where to find your web services
            public HelloAppHost() : base("Hello Web Services", typeof(HelloService).Assembly) { }

            public override void Configure(Funq.Container container)
            {
                //Enable the validation feature
                Plugins.Add(new ValidationFeature());
                container.RegisterValidators(typeof(HelloValidator).Assembly);
                //register any dependencies your services use, e.g:
                //  container.Register<ICacheClient>(new MemoryCacheClient());
            }
        }

        //Initialize your application singleton
        protected void Application_Start(object sender, EventArgs e)
        {
            new HelloAppHost().Init();
        }
    }
} 
```

PS 真的很喜欢使用 ServiceStack，这真的是一个很棒的项目，非常感谢。

**编辑**

例如：

调用：`http://localhost:60063/hello/Ian?format=json`返回`{"Result":"Hello, Ian"}`。而调用：`http://localhost:60063/hello/I?format=json`返回`{}`。

第二个调用返回`{}`我期望自动生成的错误消息的位置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T15:08:26.540

I found the answer. It was an overlook on my behalf:

This was in the documentation and I overlooked it:

> All Error handling and validation options described below are treated in the same way - serialized into the ResponseStatus property of your Response DTO making it possible for your clients applications to generically treat all Web Service Errors in the same way.

So all that was missing from my code was to add the following line into the `HelloResponse` class.

> public ResponseStatus ResponseStatus { get; set; }

# algorithm - 如何按字典顺序生成由`k``0's`和`l``1's`组成的集合的所有排列？

> ID：15160055
> 
> 赞同：3
> 
> 时间：2013-03-01T14:26:53.797
> 
> 标签：algorithm, permutation

如何生成由字典顺序组成`k` `0's`的集合的所有排列？`l` `1's`我正在寻找伪代码或 C++ 代码。例子 ：

```
000111
001011
001101
001110
010011
010101
010110
011001
011010
011100
100011
100101
100110
101001
101010
101100
110001
110010
110100
111000 
```

函数`next_perm01`应该像这样运行： `next_perm01(permutation_{i})=next_perm01(permutation_{i-1})`我找到了唯一的方法来生成一组不同元素的所有排列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:34:12.307

从其中包含 1 的最小数字开始`l`：`(1 << l) - 1`

然后应用[NextBitPermutation](http://graphics.stanford.edu/~seander/bithacks.html#NextBitPermutation)直到达到最高数字，即`lowest << k`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T14:42:20.627

从 k 0s 后跟 l 1s 的排列开始。重复此步骤，同时您可以：

找到q 1s (q > 0)的*最右边一段，前面是 0，后面是 r 0s (r >= 0)。*将其全部替换为 1，然后是 (r+1) 0s，然后是 (q-1) 1s。那将是你的下一个排列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T17:32:15.637

DEKnuth[生成所有排列](http://www-cs-faculty.stanford.edu/~uno/fasc2b.ps.gz)

见第一章开头的Algorithm L(lexicographic permutation generation)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T15:38:20.610

如果我理解正确，那么字符串的一般算法可能是：

```
nextPermutation string =
scan string from right to left
replace first occurrence of "01" with "10"
move all "1"'s that are on the right of the "01" to the string end*
return replaced string 
```

*感谢 nm 指出我的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T14:30:34.460

这是在 Java 中，但您可以将其视为伪代码：

```
public static boolean nextPermutation (int [] permutation)
{
    int l = permutation.length;
    if (l < 2) return false;
    else
    {
        int i = l - 1;
        while (i >= 0 && permutation [i] == 0)
            i--;

        int j = 0;
        while (i >= 0 && permutation [i] == 1)
        {
            i--;
            j++;
        }

        if (i < 0) return false;
        else
        {
            permutation [i] = 1;

            Arrays.fill (permutation, i + 1, l - j + 1, 0);
            Arrays.fill (permutation, l - j + 1, l, 1);

            return true;
        }
    }
}

public static void main(String[] args) {
    int [] permutation = new int [] {0, 0, 0, 1, 1, 1, 1};
    do
    {
        for (int i: permutation)
            System.out.print(i);
        System.out.println();
    } while (nextPermutation(permutation));
} 
```

我的输出是：

```
0001111
0010111
0011011
0011101
0011110
0100111
0101011
0101101
0101110
0110011
0110101
0110110
0111001
0111010
0111100
1000111
1001011
1001101
1001110
1010011
1010101
1010110
1011001
1011010
1011100
1100011
1100101
1100110
1101001
1101010
1101100
1110001
1110010
1110100
1111000 
```

# jquery - 如何让 jquery ui（自动完成）和 fancybox 玩得很好

> ID：15160060
> 
> 赞同：2
> 
> 时间：2013-03-01T14:27:08.013
> 
> 标签：jquery, autocomplete, fancybox, z-index

我在`fancybox`.

问题来自于`fancybox`覆盖`div`包含结果的框。自动完成工作正常，但结果在后面（不可见）返回`fancybox`

我怎样才能解决这个问题？

```
$('#calendar-wrapper').on('click','#calendar td[data-day]',function(){
            $.fancybox({href: '#newapp', title : 'New appointment'  });
            $("#newapp input[name='app_time']").val($(this).closest('tr').attr('data-hr')+':00:00');
            $("#newapp input[name='app_date']").val($(this).attr('data-day'));
        });////END OF FANCYBOX TRIGGER
     var cache = {};
    $(".ac").on('keyup.autocomplete', function(){
        var fun = $(this).attr("data-ac");
        var par=$(this).closest('FIELDSET');
        var el=$(this);
        par.find('input').not(this).val('');
        par.find('select option:selected').removeAttr('selected');
        $(this).autocomplete({
            minLength: 2,
            source: function( request, response ) {
                var term = request.term,baseurl='<?=base_url()?>';
                if ( term in cache ) {
                response( cache[ term ] );
                return;
                }
                var url=baseurl+'ajax/ac/'+fun+'/'+encodeURIComponent(term);
                $.getJSON( url, '', function( data, status, xhr ) {
                cache[ term ] = data;
                response( data );
                }).complete(function() {$('.ui-autocomplete-loading').removeClass('ui-autocomplete-loading'););
            },
            select: function(event, ui){
                for (var key in ui.item) 
                {
                var obj = ui.item[key];
                var f=par.find('[name*="'+key+'"]').first();
                if(f.length){
                    if(f.tagName == 'select'){
                        f.find('option[value="'+obj+'"]').first().attr('selected','selected');
                    }else{
                        f.val(obj);
                    }
                }
                }
            },
            messages: {noResults: '',results: function() {}}
        }); 
    });////END OF AUTOCOMPLETE 
```

如何更改`div`包含`jquery-ui-ac`结果的 z-index 以将它们显示在`fancybox`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-09T14:19:41.580

我用过这个，它对我有用。

```
<style>
     .ui-autocomplete.ui-front.ui-menu.ui-widget.ui-widget-content.ui-corner-all {
         z-index: 10000 !important;
     }
</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-20T09:10:33.483

我面临同样的问题

尝试

```
open: function(){
           $(this).autocomplete('widget').css('z-index', 999999);
           return false;
       }, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-19T10:02:34.123

这足以解决问题（使用 fancybox 2.1.5、jquery-ui 1.11.4 测试）：

```
.ui-autocomplete {
    z-index: 10000 !important;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-05T06:44:57.177

添加

```
'create': function(){$(".ui-autocomplete").css("z-index",100000);} 
```

到自动完成

```
$("#pagelink").autocomplete({
        'source':'includes/loadvals-sql-ajax.php?table=Categories',
        'minLength': 3,
        'create': function(){$(".ui-autocomplete").css("z-index",100000);}
        }); 
```

# ruby-on-rails - 如果满足条件，优雅地退出轨道？

> ID：15160061
> 
> 赞同：0
> 
> 时间：2013-03-01T14:27:07.857
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

如果发生某些事件，我有一个需要退出的代码（死的 php 版本）

trace_controller.rb 中的片段

```
def show    
  rule=Rule.new 
  @order,@order_error=rule.get_order(@order_external_id)
  @order_items, @order_items_error=rule.get_order_items(@order)
  @order_item_units, @order_item_units_error=rule.get_order_item_units(@order_items)
  @outbound_messages,   @outbound_messages_error = rule.check_outbound_messages(@order_external_id)
  @inbound_messages, @inbound_messages_error = rule.check_inbound_messages(@outbound_message)
  ...... 
```

在 show.html.erb

```
<% unless @order_error.blank? %>
      <%= @order_error.html_safe %>
      <% else %>
      <%= render "trace/display_tabular_data", :data => @order %>
  <% end %>
  .....
  .....
<% unless @order_items_error.blank? %>
      <%= @order_items_error.html_safe %>          
  <% else %>
      <% @order_items.each do |order_item| %>
          <h5>Order Item</h5>
          <%= render "trace/display_tabular_data", :data => order_item %>
      <% end %>
  <% end %>
...... 
```

我的大部分功能都取决于先前功能的结果。现在获取依赖于订单的 get_order_items 函数。如果订单不存在，则不需要计算 get_order 函数，因为它也不存在。此外，它会引发一个错误，因为它说当我对 get_order_item 中的订单执行操作时，我正在向它传递一个 NIL 对象。

此外，在 show.html.erb - @order_items 中，如果订单不存在，@order_items_error 甚至不应该存在。我只想渲染函数直到 order_error，然后停止。

现在，来自PHP背景，我忘记了rails没有死。那么有没有死亡的替代品？中止是不是。我需要它不光彩地退出。或者是我最好的使用条件的镜头，如果，除非等......但它会看起来很难看，因为页面将变得充满它们。你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:30:02.313

要切断当前动作并渲染视图，您可以使用`return`. 但是，如果您尝试在视图中使用未初始化的实例变量，这将因错误而崩溃。

您还可以使用`render nothing: true`which 停止当前操作并且不呈现任何内容。

也许也考虑重定向回来：

```
flash[:error] = 'There was no order!'
redirect_to :back 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:53:25.270

我不确定你到底想做什么。但这应该符合您的要求。

```
 def show    
   rule=Rule.new 
   @order,@order_error=rule.get_order(@order_external_id)
   unless @order.blank?
     @order_items, @order_items_error=rule.get_order_items(@order)
     @order_item_units, @order_item_units_error=rule.get_order_item_units(@order_items) unless @order_items.blank?
   end

   @outbound_messages, @outbound_messages_error = rule.check_outbound_messages(@order_external_id)
   @inbound_messages, @inbound_messages_error = rule.check_inbound_messages(@outbound_message) unless @outbound_messages.blank?
 end 
```

同样，您可以在视图文件中添加条件：

```
<% unless @order.blank? %>
  <% unless @order_error.blank? %>
    <%= @order_error.html_safe %>
  <% else %>
    <%= render "trace/display_tabular_data", :data => @order %>
  <% end %>
  .....
  .....

  <% unless @order_items.blank? %>
    <% unless @order_items_error.blank? %>
      <%= @order_items_error.html_safe %>          
    <% else %>
      <% @order_items.each do |order_item| %>
        <h5>Order Item</h5>
        <%= render "trace/display_tabular_data", :data => order_item %>
      <% end %>
    <% end %>
  <% end %>
    .......
    .......
<% end %> 
```

这只是我从您的示例中得到的一个基本想法，尽管还不够清楚地显示您想要实现的目标。所以，整个想法是在使用变量之前检查它！

还有一点我想提一下，避免使用`unless - else`，`unless`应该单独使用，如果你需要将一些逻辑放在`else`块中，为什么不使用`if - else`。这可能比`unless - else`.

# restlet - restlet 2.2，配置jackson格式支持

> ID：15160069
> 
> 赞同：0
> 
> 时间：2013-03-01T14:27:42.877
> 
> 标签：restlet, fasterxml

Restlet 2.2 使用了 fasterxml jackson 库来支持 json 序列化。

除了 json 之外，jackson 还支持其他数据绑定，并包含在 restlet 2.2 发行版中。因此，在程序启动时会加载许多 jar。以下是完整列表：

*   com.fasterxml.jackson.annotations.jar
*   com.fasterxml.jackson.core.jar
*   com.fasterxml.jackson.csv.jar
*   com.fasterxml.jackson.databind.jar
*   com.fasterxml.jackson.jaxb.jar
*   com.fasterxml.jackson.smile.jar
*   com.fasterxml.jackson.xml.jar
*   com.fasterxml.jackson.yaml.jar

如何配置 jackson 或 restlet，使其不会尝试加载我不感兴趣的格式？例如，我对微笑、yaml 或 csv 不感兴趣，但如果我不包含这些 jar，我的服务器启动时会出现类未找到异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:53:14.930

我不确定这是一个 Restlet 问题，但我不是用所有这些 jars 都做了 Restlet 和 Jackson。

如果您只想将 Jackson 用于 JSON 格式，可以添加以下 jar 文件：

*   com.fasterxml.jackson.annotations.jar：杰克逊注解
*   com.fasterxml.jackson.core.jar：杰克逊核心
*   com.fasterxml.jackson.databind.jar：杰克逊数据绑定
*   com.fasterxml.jackson.smile.jar：杰克逊微笑支持

希望它会帮助你。蒂埃里

# apache - htaccess 301 重定向到不同的域

> ID：15160075
> 
> 赞同：0
> 
> 时间：2013-03-01T14:27:51.227
> 
> 标签：apache, .htaccess, redirect

相信我，我已经到处寻找解决问题的方法，所以我不相信这是一个重复的问题。

我需要执行以下操作：

301 将 blog.example.com 重定向到 blog.newexample.com。

我所拥有的接近工作。当我转到 blog.example.com 的主页时，它会完美地重定向到 blog.newexample.com。但是，如果我访问 blog.example.com/directory/page，它不会将我定向到 blog.newexample.com/directory/page。

这是我的 .htaccess 的样子：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

RewriteCond %{HTTP_HOST} !newexample.com$ [NC]
RewriteRule ^(.*)$ http://blog.newexample.com/$1 [L,R=301] 
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:27:45.160

我不确定你的问题是什么，但这很好用：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} !newexample.com$ [NC]
RewriteRule ^(.*)$ http://blog.newexample.com/$1 [L,R=301] 
</IfModule> 
```

该 URL`http://website.com/hello/world/`将我重定向到 `http://blog.newexample.com/hello/world/`.

# css - 当我有 -pie- 前缀时，CSS3pie 不起作用

> ID：15160076
> 
> 赞同：0
> 
> 时间：2013-03-01T14:27:52.743
> 
> 标签：css, css3pie

```
.btn {

    display: inline-block;
    height: 21px; width: 130px;
    line-height: 22px;

    background: #f9bb42; /* Old browsers */
    background: -moz-linear-gradient(top,  #f9bb42 0%, #f1dd38 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f9bb42), color-stop(100%,#f1dd38)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #f9bb42 0%,#f1dd38 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #f9bb42 0%,#f1dd38 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #f9bb42 0%,#f1dd38 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #f9bb42 0%,#f1dd38 100%); /* W3C */
   -pie-background: linear-gradient(to bottom, #f9bb42, #f1dd38); /* LOOK AT THIS EVERYBODY*/

    border: solid 1px #e99a03;

    -webkit-border-radius: 2px;
       -moz-border-radius: 2px;
            border-radius: 2px;

    -webkit-box-shadow: inset 0 0 6px rgba(51, 8, 0, 0.37);
       -moz-box-shadow: inset 0 0 6px rgba(51, 8, 0, 0.37);
            box-shadow: inset 0 0 6px rgba(51, 8, 0, 0.37);

    position: relative;

    behavior: url(../../css/PIE.htc); 
```

}

我的按钮的这种样式。

问题对我来说很奇怪。在添加 -pie-background 属性之前，我可以看到边框半径，从我将 -pie-background 添​​加到代码的那一刻起，我看不到边框半径或背景中的宏大。当然这都是关于在ie8,9中显示的......

*   我确定 PIE.htc 加载
*   我将位置设置为相对

# python-2.7 - 将 Python 函数分配给 ctypes 指针变量

> ID：15160077
> 
> 赞同：0
> 
> 时间：2013-03-01T14:27:53.050
> 
> 标签：python-2.7, ctypes

我有以下编译成 DLL 的 C 源代码：

```
int (*pfuncExtB)(int a, int b);

int funcB(int a, int b)
{
    return funcExtB(a, b);
}

int funcExtB(int a, int b)
{
    return pfuncExtB(a, b);
} 
```

我想做的是让 pfuncExtB “指向”一个 Python 函数，所以这就是我在 Python 中所做的：

```
from ctypes import *

def add(a, b):
    return a + b

mutdll = cdll.LoadLibrary("my.dll")

pfuncExtB = (POINTER(CFUNCTYPE(c_int, c_int, c_int))).in_dll(mutdll, 'pfuncExtB')

funcB = mutdll.funcB
funcB.argtypes = [c_int, c_int]
funcB.restype = c_int

pfuncExtB.contents = CFUNCTYPE(c_int, c_int, c_int)(add)

print funcB(3 , 4) 
```

在此之后，我希望以下调用返回 7

```
print funcB(3, 4) 
```

但我得到：

```
Traceback (most recent call last):
..................
print funcB(3, 4)
WindowsError: exception: access violation reading 0x00000001 
```

那么我在这里做错了什么？是否可以将 Python 函数“分配”给 ctypes 函数指针变量？

编辑：在看到 Mark Tolonen 的解决方法（用 C 编写的指向函数变量的指针的集合函数）后，我发现为什么我尝试它时它对我不起作用。

这不起作用：

```
set(CFUNCTYPE(c_int,c_int,c_int)(add))
print funcB(2, 3) 
```

虽然这有效：

```
callback = CFUNCTYPE(c_int,c_int,c_int)(add)
set(callback)
print funcB(2, 3) 
```

其中 set 是一个 C 函数，它将指向函数的参数分配给全局，就像 Mark 的回答一样。正如他指出的那样，答案就在文档中：

**回调函数的重要说明：** *确保您保留对 CFUNCTYPE() 对象的引用，只要它们是从 C 代码中使用的。ctypes 不会，如果您不这样做，它们可能会被垃圾收集，从而在进行回调时使您的程序崩溃。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:57:07.697

Python 中全局变量的正确类型是`CFUNCTYPE(c_int,c_int,c_int)`(no `POINTER()`)，但是我看不到有一种方法可以更改变量的值。如果您可以添加 set 功能，它可以工作：

### C

```
typedef int (*FUNC)(int,int);

__declspec(dllexport) FUNC pfuncExtB;

__declspec(dllexport) void set(FUNC f)
{
    pfuncExtB = f;
}

int funcExtB(int a, int b)
{
    return pfuncExtB(a, b);
}

__declspec(dllexport) int funcB(int a, int b)
{
    return funcExtB(a, b);
} 
```

### Python

```
from ctypes import *

FUNC = CFUNCTYPE(c_int,c_int,c_int)

@FUNC
def add(a, b):
    return a + b

mutdll = cdll.LoadLibrary('x')

mutdll.set.argtypes = [FUNC]
mutdll.set.restype = None

mutdll.set(add) # set the global variable

pfuncExtB = FUNC.in_dll(mutdll,'pfuncExtB')
print(pfuncExtB(1,2)) # -> 3

funcB = mutdll.funcB
funcB.argtypes = [c_int, c_int]
funcB.restype = c_int

print(funcB(3 , 4)) # -> 7 
```

请注意，这不起作用：

```
pfuncExtB = POINTER(FUNC).in_dll(mutdll,'pfuncExtB')
pfuncExtB.contents(1,2) # exception! 
```

# ab-initio - 如何在 Ab Initio 中更改字符串分隔符？

> ID：15160078
> 
> 赞同：2
> 
> 时间：2013-03-01T14:27:55.270
> 
> 标签：ab-initio

在 Ab Initio 图中，我有一个输入文件，其中行中有管道分隔的值。我使用类似的 DML 文件来解析它：

```
record
  decimal("|",0, maximum_length=19, sign_reserved) v1 = NULL("");
  utf8 string("|", maximum_length=10) v2 = "";
  utf8 string("|", maximum_length=10) v3 = "";
  utf8 string("|", maximum_length=40) v4 = "";
  utf8 string("|", maximum_length=255) v5 = "";
  utf8 string("\n", maximum_length=40) v6 = "";
end 
```

为了在以后与其他数据的相等比较中使用，我想让所有这些字符串用管道分隔，所以我需要更改 v6 值。

我尝试通过将输出 DML 更改为此一个简单的 Reformat 来做到这一点，并将转换函数留空：

```
record
  decimal("|",0, maximum_length=19, sign_reserved) v1 = NULL(""); 
  utf8 string("|", maximum_length=10) v2 = "";
  utf8 string("|", maximum_length=10) v3 = "";
  utf8 string("|", maximum_length=40) v4 = "";
  utf8 string("|", maximum_length=255) v5 = "";
  utf8 string("|", maximum_length=40) v6 = "";
  string(1) newline = "\n";
end 
```

但是，这在 v6.6 中留下了垃圾字符。后来我需要过滤 v6 值以使其仅包含正确的字符。这个解决方案似乎并不整洁。

为了避免这些垃圾留在 v6 中，我尝试使用 reinterpret_as、string_concat 和其他方法，但最终没有一个好的解决方案。我应该如何以简单的方式更改 v6 的分隔符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-20T19:27:44.937

A == B 将 A 的值与 B 的值进行比较。无论 A 和 B 是否具有相同的分隔符，比较都会返回相同的结果。如果您确实需要更改字段的分隔符，那么您建议的 Reformat 方法是正确的。如果您看到 v6 值中出现垃圾，则表示 v6 中有垃圾进入。

更广泛地说，Stack Overflow 不是讨论 Ab Initio 的合适场所。您最好将问题提交给 Ab Initio 支持人员或通过 GDE 访问的专用 Ab Initio 论坛。该论坛由众多 Ab Initio 用户和员工监控，您几乎可以得到及时响应。

# c# - 拥有对象的副本而不是锁定的对象

> ID：15160079
> 
> 赞同：0
> 
> 时间：2013-03-01T14:27:56.950
> 
> 标签：c#, multithreading, locking, copy

有没有办法，而不是锁定一个对象，向访问它的人显示它的临时副本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:29:17.767

使用 TransactionScope 包装使用该对象的代码，该对象在您的情况下是关键资源，并将 IsolationLevel 设置为 Snapshot。

这样，任何试图访问同一对象的人都应该在编辑对象之前看到该值，直到事务完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:34:19.737

如果使用[volatile](http://msdn.microsoft.com/en-us/library/x13ttww7%28v=vs.71%29.aspx)修饰符，则可以避免临时副本。

> 系统总是在请求时读取 volatile 对象的当前值，即使之前的指令要求来自同一对象的值。此外，对象的值在赋值时立即写入。volatile修饰符通常用于被多个线程访问而不使用lock语句序列化访问的字段。使用 volatile 修饰符可确保一个线程检索另一个线程写入的最新值。

# ruby - 在 ruby 中编码生成的咖啡脚本的优雅方式？

> ID：15160082
> 
> 赞同：0
> 
> 时间：2013-03-01T14:28:14.320
> 
> 标签：ruby, coffeescript, sinatra

当调用 ...../coffee/xxxx.js 时，我有以下转换咖啡脚本。例如，我正在尝试加载与要加载的脚本相辅相成的变量。我应该将它加载到单独的 js 文件中，还是以任何优雅的方式将其作为咖啡脚本注入？

```
get "/coffee/*.js" do
    filename = params[:splat].first
    coffee "../public/coffee/#{filename}".to_sym
end 
```

# python - python sqlalchemy没有填写行

> ID：15160088
> 
> 赞同：2
> 
> 时间：2013-03-01T14:28:23.563
> 
> 标签：python, database, sqlalchemy

您好，我是 SQLalchemy 的新手，在列中插入数据时遇到了一些问题。

```
import sqlalchemy
from sqlalchemy import create_engine                            
from sqlalchemy.ext.declarative import declarative_base                 
from sqlalchemy import Column, Integer, String, ForeignKey, Boolean     
from sqlalchemy.orm import relationship, backref                        
from sqlalchemy.orm import sessionmaker

engine = create_engine('sqlite:///test.db')
Base = declarative_base()

class Users(Base):
    __tablename__ = 'users'

    id = Column(Integer, primary_key=True)
    name = Column(String, unique=True)
    password = Column(String)
    email = Column(String)

        def __init__(self, name, password, email):
            self._name = name
            self._password = password
            self._email = email    

Base.metadata.create_all(engine)
Session = sessionmaker(bind=engine)
Session.configure(bind=engine)
session = Session()

dm_user = Users("Dungeonmaster", "123", "email")
print dm_user.name
print dm_user.password
print dm_user.email

session.add(dm_user)

our_user = session.query(Users).filter_by(name='Dungeonmaster').first() 

session.commit() 
```

我使用 sqlite studio 查看是否添加了数据，并且我看到正在创建一个新行（使用新 id。）但没有插入数据名称、密码和电子邮件。

甚至在我尝试添加错误之前，我就看到了打印，但我不知道是什么。请帮帮我

（ dm_user = Users("Dungeonmaster", "123", "email") 也尝试使用单引号（在使用 sqlalchemy 之前帮助了我，但这里没有区别）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:35:33.183

您的 init 方法不会初始化持久列。改为尝试（删除下划线）：

```
def __init__(self, name, password, email):
    self.name = name
    self.password = password
    self.email = email 
```

# android - 仅在微调器中的图像

> ID：15160097
> 
> 赞同：1
> 
> 时间：2013-03-01T14:28:49.233
> 
> 标签：android, imageview, spinner

我有 4 张图像 ( `drawables`) 想在微调器中使用。我找到了许多使用哈希映射和覆盖来包含文本和图像的方法`arrayadapter`。

`ImageView`在每一行中处理一个似乎都非常复杂。有没有更简单的方法来做到这一点？如果不是，我将如何处理一个哈希映射`drawable`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:41:33.203

您必须为微调器的行定义布局，然后创建自定义数组适配器。看看这个链接

[http://www.coderzheaven.com/2011/07/18/customizing-a-spinner-in-android/](http://www.coderzheaven.com/2011/07/18/customizing-a-spinner-in-android/)

我希望这可以帮助你。最好的祝福

# jquery - JQuery Ui 效果不起作用

> ID：15160098
> 
> 赞同：-2
> 
> 时间：2013-03-01T14:28:57.917
> 
> 标签：jquery, effects

当我使用`hide()`或`show()`他们工作时 - 但当我使用时`effect()`，他们没有，这里有一些代码和平：

```
 <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script> 
```

我的脚本是：

```
<script type="text/javascript">
$(document).ready(function() {
    $(".palas").fadeIn(2000);
     /*$(".palas").click(function () {
          $(this).hide( "fold", 
                  {horizFirst: true }, 2000 );
    });*/
$(".palas").click(function () {
          $(this).hide();
    });
});
</script> 
```

未注释的部分运行良好，注释的部分不是，我什至尝试了更多选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:31:53.453

将 jquery ui 链接从 1.5 版更改为 1.8 版

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script> 
```

# java - 遍历数组中的两个元素

> ID：15160101
> 
> 赞同：-3
> 
> 时间：2013-03-01T14:29:06.073
> 
> 标签：java, android, for-loop

我正在尝试做很简单的事情。遍历数组并在一次迭代中获取两个元素而不是一个。这是代码，也许有人会指出我的错误:)

```
 for(int i = 0; i < temporary.size(); i = i + 2)
        {

            LayoutInflater inflater;
            inflater = (LayoutInflater) activity.getParent().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View v = inflater.inflate(R.layout.smartuilinear ,
                            null);
                Button ls1, ls2;
                ls1 = (Button) v.findViewById(R.id.ls1);
                ls2 = (Button) v.findViewById(R.id.ls2);
                ls1.setText("i= "+i+ "info " + temporary.get(i).toString());
                int j = i + 1;
                ls2.setText("i= "+j+ "info " + temporary.get(j).toString());

            linear.addView(v);
        } 
```

编辑：大小为奇数时的问题。我不想失去最后一个元素。如果大小为奇数，则通过递减值。

* * *

好吧，我想我的问题还不够清楚。循环有效，但如果列表大小不均匀，如何不丢失列表中的最后一个对象？显然，如果列表大小甚至不在最后一个循环中，则不应初始化 j。我希望这能说明一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:01:30.193

无论是什么不工作都与循环结构没有直接关系，假设临时是一个具有偶数个元素的列表。我根据您的代码编写了一个简化的测试程序：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class Test {
  public static void main(String args[]) {
    String[] data = {"aaa","bbb","ccc","ddd"};
    List<String> temporary = new ArrayList<String>();
    temporary.addAll(Arrays.asList(data));
    for (int i = 0; i < temporary.size(); i = i + 2) {
      System.out.println("i= " + i + " first " + temporary.get(i).toString());
      int j = i + 1;
      System.out.println("i= " + j + " second " + temporary.get(j).toString());
    }
  }
} 
```

它运行，输出：

```
i= 0 first aaa
i= 1 second bbb
i= 2 first ccc
i= 3 second ddd 
```

您需要查看我的测试程序中未显示的其余代码。如果没有关于故障症状和其余变量定义的线索，就不可能诊断故障。

================================================== ==============================

在澄清问题之后，这里是处理偶数或奇数临时大小的测试程序的变体：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class Test {
  public static void main(String args[]) {
    System.out.println("Odd length");
    test(new String[] { "aaa", "bbb", "ccc", "ddd", "eee" });
    System.out.println("Even length");
    test(new String[] { "xxx", "yyy" });
    System.out.println("Empty");
    test(new String[] {});
  }

  private static void test(String[] data) {
    List<String> temporary = new ArrayList<String>();
    temporary.addAll(Arrays.asList(data));
    for (int i = 0; i < temporary.size(); i = i + 2) {
      System.out.println("i= " + i + " first " + temporary.get(i).toString());
      int j = i + 1;
      if (j < temporary.size()) {
        System.out
            .println("i= " + j + " second " + temporary.get(j).toString());
      }
    }
  }
} 
```

输出：

```
Odd length
i= 0 first aaa
i= 1 second bbb
i= 2 first ccc
i= 3 second ddd
i= 4 first eee
Even length
i= 0 first xxx
i= 1 second yyy
Empty 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:33:45.807

上面的代码有可能在该行中抛出 ArrayIndexOutOfBoundsException

```
 ls2.setText("i= "+j+ "info " + temporary.get(j).toString()); 
```

因为如果临时 List 或 Vector 具有奇数个值，则在 for 循环中检查 i <temporary.size() ，因此上述代码将失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T14:35:16.740

它会在某个时候失败！

如果我是你，我会看看如何改进我在该列表中保存我的价值观的方式。

例如，你可以有更好的东西，比如

```
List<String[]> temporary = new ArrayList<String[]>();
temporary.add(new String[]{value1, value2}); 
```

然后：

```
 for(int i = 0; i < temporary.size(); i++)
    {

        LayoutInflater inflater;
        inflater = (LayoutInflater) activity.getParent().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View v = inflater.inflate(R.layout.smartuilinear ,
                        null);
            Button ls1, ls2;
            ls1 = (Button) v.findViewById(R.id.ls1);
            ls2 = (Button) v.findViewById(R.id.ls2);
            String[] subValues = temporary.get(i);
            ls1.setText("info " + subValues[0]);
            ls2.setText("info 2" + subValues[1]);
        linear.addView(v);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T14:35:36.800

我发现只增加 for 循环体内的索引比尝试跟踪多个变量然后在 for 循环声明中“双增量”更简单。

```
for(int i = 0, s=temporary.size(); i < s; **++i**)
{
    LayoutInflater inflater = (LayoutInflater) activity.getParent().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = inflater.inflate(R.layout.smartuilinear,  null);
    Button ls1 = (Button) v.findViewById(R.id.ls1);
    Button ls2 = (Button) v.findViewById(R.id.ls2);
    ls1.setText("i= "+i+ "info " + temporary.get(i).toString());
    **++i;**
    ls2.setText("i= "+i+ "info " + temporary.get(i).toString());
    linear.addView(v);
} 
```

# excel - 在文件中获取 "" 而不是预期的 "

> ID：15160105
> 
> 赞同：0
> 
> 时间：2013-03-01T14:29:23.120
> 
> 标签：excel, vbscript, excel-2007, vba

按钮单击中有一个代码，其中工作簿保存到本地文本文件中。

工作簿包含以下信息：

> 危急; 插入 ifparam 值(3498,'TAT_UNALLOCTRADESREC','STRING','IF(STRING(C5)=STRING("TCE - 外部对冲"),STRING("E"),IF(STRING(C5)=STRING(" TCE - 内部对冲"),STRING("I"),STRING(C5)))');

但是输出很关键；

```
insert into ifparam values(3498,'TAT_UNALLOCTRADESREC','STRING','IF(STRING(C5)=STRING(""TCE - External Hedge""),STRING(""E""),IF(STRING(C5)=STRING(""TCE - Internal Hedge""),STRING(""I""),STRING(C5)))'); 
```

问题是输出中有“我们正在得到”。任何人都可以帮助我得到这个，因为它在工作簿中，即；单双引号“而不是“”

请建议是否需要更改任何代码。使用的代码：

```
Private Sub CommandButton1_Click()
    Dim xlBook As Workbook, xlSheet As Worksheet
    Dim strOutputFileName As String
    Dim n As Long, i As Long, j As Long
    Dim MyData As String, strData() As String, MyArray() As String
    Dim strPath As String

    strPath = ActiveWorkbook.Path '<~~ \\plyalnppd3sm\d$\Temp\Arun\TAT\

    ThisWorkbook.SaveCopyAs strPath & "\Temp.xls"

    Set xlBook = Workbooks.Open(strPath & "\Temp.xls")

    For Each xlSheet In xlBook.Worksheets
        If xlSheet.Name <> "User_provided_data" Then
            strOutputFileName = strPath & "\" & xlSheet.Name & ".zup"
            xlSheet.SaveAs Filename:=strOutputFileName, FileFormat:=xlTextMSDOS

    n = n + 1

            ReDim Preserve MyArray(n)
            MyArray(n) = strOutputFileName
            Debug.Print strOutputFileName
        End If
    Next

    xlBook.Close SaveChanges:=False

    Kill strPath & "\Temp.xls"

    For i = 1 To UBound(MyArray)
        '~~> open the files in One go and store them in an array
        Open MyArray(i) For Binary As #1
        MyData = Space$(LOF(1))
        Get #1, , MyData
        Close #1
        strData() = Split(MyData, vbCrLf)

        '~~> Write to the text file
        Open MyArray(i) For Output As #1

        '~~> Loop through the array and check if the start and end has "
        '~~> And if it does then ignore those and write to the text file
        For j = LBound(strData) To UBound(strData)
            If Left(strData(j), 1) = """" And Right(strData(j), 1) = """" Then
                strData(j) = Mid(strData(j), 2, Len(strData(j)) - 2)
            End If
            Print #1, strData(j)
        Next j
        Close #1
    Next i
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:25:44.727

无需过多查看代码的最简单解决方案 - 在输出`strData(j)`到文本文件之前添加此行：

```
strData(j) = Replace(strData(j), """""", """") 
```

我确信有更好的方法，但这是一个非常简单、快速和肮脏的修复方法！

# android - 如何在 AIR 中访问存储在 File.applicationStorageDirectory 中的文件，适用于 Android

> ID：15160108
> 
> 赞同：3
> 
> 时间：2013-03-01T14:29:37.290
> 
> 标签：android, apache-flex, actionscript, air

我有下载一个简单文本文件并希望在 StageWebView 中显示的 actionscript 代码。文件下载成功并保存在 File.applicationStorageDirectory 中。我可以将内容输出到控制台，但是，我无法在 StageWebView 中显示该文件。根据我读过的所有内容，这应该有效。**为什么我无法在 Android 上显示我在本地下载并保存的文件？**

请注意，我无法更改 StageWebView 以从远程位置打开文件，因为用户需要能够在脱机模式下访问该文件。

我也无法将文件存储在 sdcard 上，因为我不希望用户访问该文件。

这是一个示例测试，它演示了我正在尝试做的事情。我正在使用 Apache Flex 4.9.0 并部署到 Android 4.1.2

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" applicationDPI="160" >
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations> 
```

```
 protected var webView:StageWebView = new StageWebView();
    public static const LOCAL_FILE_STORE:File = File.applicationStorageDirectory;

    protected function onClick(e:Event):void{

        trace("File.applicationStorageDirectory: "+ File.applicationStorageDirectory.nativePath);
        trace("File.desktopDirectory: "+ File.desktopDirectory.nativePath);
        trace("File.applicationDirectory: "+ File.applicationDirectory.nativePath);
        trace("File.documentsDirectory: "+ File.documentsDirectory.nativePath);

        var loader: URLLoader = new URLLoader();
        var request:URLRequest = new URLRequest("http://www.apache.org/dist/flex/4.9.1/README");
        loader.dataFormat= URLLoaderDataFormat.BINARY;
        loader.addEventListener(Event.COMPLETE, completeHandler);
        loader.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler);
        loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR, securityErrorHandler);
        loader.addEventListener(HTTPStatusEvent.HTTP_STATUS, httpStatusHandler);
        try {
            loader.load(request);
        } catch (error:Error) {
            trace("Unable to load requested document.");
        }
    }

    private function completeHandler(event:Event):void {
        var urlLoader:URLLoader = URLLoader(event.target);

        var writeFile:File = File.applicationStorageDirectory.resolvePath("test.txt");

        var writeStream:FileStream = new FileStream();
        writeStream.open(writeFile, FileMode.WRITE);
        writeStream.writeBytes(urlLoader.data);
        writeStream.close();

        //Test if we can output contents to console
        var readStream:FileStream= new FileStream();
        readStream.open(writeFile, FileMode.READ);
        var content:String= readStream.readUTF();
        trace("File Contents: "+ content);

        //Test if we can display file in stagewebview
        var sView:StageWebView= new StageWebView();
        sView.stage= this.stage;
        sView.viewPort= new Rectangle(0, 40, stage.stageWidth, stage.stageHeight);
        sView.addEventListener(ErrorEvent.ERROR, handleError);
        sView.addEventListener(Event.COMPLETE, handleComplete);

        trace("Loading file://"+writeFile.nativePath);
        sView.loadURL("file://"+writeFile.nativePath);
    }

    protected function onError(event:ErrorEvent):void
    {
        trace("UH OHHHH " + event);
    }

    private function ioErrorHandler(event:IOErrorEvent):void {
        trace("ioErrorHandler: " + event);
    }

    private function securityErrorHandler(event:SecurityErrorEvent):void {
        trace("securityErrorHandler: " + event);
    }

    private function httpStatusHandler(event:HTTPStatusEvent):void {
        trace("httpStatusHandler: " + event);
    }

    protected function handleError(event:ErrorEvent):void
    {
        trace("GOT ME AN ERROR: "+ event.errorID + "  "+ event.text);
    }

    protected function handleComplete(event:Event):void
    {
        trace("Done");
    }

]]> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:10:20.207

所以 Apache Flex 4.9.0 肯定有 bug，因为当我更新到 Flex 4.9.1 时，上面的代码开始工作了。

# sitemap - Google 站点地图中的 URL 说明

> ID：15160109
> 
> 赞同：0
> 
> 时间：2013-03-01T14:29:38.307
> 
> 标签：sitemap

是否可以在 Google 站点地图中指定 URL 元素的描述？

示例（参见描述标签）：

```
<url>
  <loc>http://www.example.com/dogs</loc>
  <description>This page for dogs, you can find new products for dogs here.</description>
  <changefreq>hourly</changefreq>
  <priority>1.00</priority>
   <image:image>
    <image:loc>http://www.example.com/image.jpg</image:loc> 
  </image:image>
</url>
<url>
  <loc>http://www.example.com/cats</loc>
  <description>This page for cats, you can find new products for cats here.</description>
  <changefreq>hourly</changefreq>
  <priority>1.00</priority>
   <image:image>
    <image:loc>http://www.example.com/image.jpg</image:loc> 
  </image:image>
</url> 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T14:37:13.693

其次[，Google 对站点地图的支持，](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=183668)您可以像站点地图一样提交 RSS 或 atom 文件（xml）。

在 RSS 或 atom 文件中，您可以对 url 进行描述。您可以阅读[RSS 的 especification](http://www.rssboard.org/rss-specification)

一个例子：

```
<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0">
<channel>
 <title>RSS Title</title>
  <description>This is an example of an RSS feed</description>
  <link>http://www.someexamplerssdomain.com/main.html</link>
  <lastBuildDate>Mon, 06 Sep 2010 00:01:00 +0000 </lastBuildDate>
  <pubDate>Mon, 06 Sep 2009 16:45:00 +0000 </pubDate>
 <ttl>1800</ttl>

 <item>
  <title>Example entry</title>
  <description>Here is some text containing an interesting description.</description>
  <link>http://www.wikipedia.org/</link>
  <guid>unique string per item</guid>
  <pubDate>Mon, 06 Sep 2009 16:45:00 +0000 </pubDate>
 </item>

</channel>
</rss> 
```

# javascript - Three.js Mesh 没有使用 AnimationHandler 进行动画处理

> ID：15160113
> 
> 赞同：1
> 
> 时间：2013-03-01T14:29:53.207
> 
> 标签：javascript, animation, three.js, webgl, blender

我无法让我的搅拌机导出的网格动画。甚至我在示例中可以清楚地看到动画的水牛也没有。（我一直试图复制无济于事。这是代码，我怀疑这是一个非常简单的丢失的东西，但我不知道。我怀疑这是一个搅拌机问题，因为我什至无法为包含的动画制作动画网格。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>three.js webgl - blender</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style>
        body {
            font-family: Monospace;
            background-color: #000000;
            margin: 0px;
            overflow: hidden;
        }

        #info {
            color: #fff;
            position: absolute;
            top: 10px;
            width: 100%;
            text-align: center;
            z-index: 100;
            display:block;

        }

        a { color: red }

        #stats { position: absolute; top:0; left: 0 }
        #stats #fps { background: transparent !important }
        #stats #fps #fpsText { color: #aaa !important }
        #stats #fps #fpsGraph { display: none }
    </style>
</head>

<body>
    <div id="info">
        <a href="http://crenet-games.com">025 Valgany</a>
    </div>

    <script src="/js/three.min.js"></script>
    <script src="/js/Detector.js"></script>
    <script src="/js/libs/stats.min.js"></script>

    <script>
        if ( ! Detector.webgl ) Detector.addGetWebGLMessage();
        var modelBB={"min":new THREE.Vector3(),"max":new THREE.Vector3() };
        var crewon, animation;
        var container, stats;
        var camera, scene, renderer, objects;
        var particleLight, pointLight;
        var skin;
        var clock = new THREE.Clock();
        init();
        function init() {
            container = document.createElement( 'div' );
            document.body.appendChild( container );
            camera = new THREE.PerspectiveCamera( 50, window.innerWidth / window.innerHeight, 0.1, 10000 );
            camera.position.set( 2, 4, 5 );
            scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2( 0x00FF00, 0.035 );
            var loader = new THREE.JSONLoader(true);
            loader.load("buffalo.js", function(geometry, materials) {
                geometry.computeBoundingBox();
                var faceMaterial = new THREE.MeshFaceMaterial( materials );
                faceMaterial.skinning = true;
                THREE.AnimationHandler.add( geometry.animation );
                crewon = new THREE.SkinnedMesh(geometry,faceMaterial, false);
                modelBB=geometry.boundingBox;
                crewon.position.set(0,0,0);
                scene.add(crewon);
                renderer.render(scene, camera);
                animation = new THREE.Animation( crewon, geometry.animation.name );
                animation.play( true, 0.5 );
            });
            // Lights
            scene.add( new THREE.AmbientLight( 0xcccccc ) );
            pointLight = new THREE.PointLight( 0xffffff, 1, 30 );
            pointLight.position.set( 5, 0, 0 );
            scene.add( pointLight );
            // Renderer
            renderer = new THREE.WebGLRenderer();
            renderer.setSize( window.innerWidth, window.innerHeight );
            container.appendChild( renderer.domElement );
            // Stats
            stats = new Stats();
            container.appendChild( stats.domElement );
            // Events
            window.addEventListener( 'resize', onWindowResize, false );
            animate();
        }
        function onWindowResize( event ) {
            renderer.setSize( window.innerWidth, window.innerHeight );
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
        }
        function animate() {
            requestAnimationFrame( animate, renderer.domElement );
            var delta = clock.getDelta();
            THREE.AnimationHandler.update( delta );
            render();
            stats.update();
        }

        function render() {
            if ( crewon ){
                crewon.rotation.y+=0.01;
            }
            if( typeof animation != 'undefined' && animation!=null){
                animation.update(0.1);
            }
            if( typeof modelBB != 'undefined' && modelBB!=null){
                camera.position.x = 0;
                camera.position.y = (modelBB.max.y-modelBB.min.y)/2;
                camera.position.z = (modelBB.max.z-modelBB.min.z)*2;
                camera.lookAt( new THREE.Vector3(
                    0,
                    (modelBB.max.y-modelBB.min.y)/2, 
                    0) );
            }
            renderer.render( scene, camera );
        }
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T20:56:45.427

问题可能在这里：

```
var faceMaterial = new THREE.MeshFaceMaterial( materials );
faceMaterial.skinning = true; 
```

meshFaceMaterial 就像其他材质的容器 - 它本身并不是真正的材质。尝试迭代其材料集合：

```
var materials = faceMaterial.materials;
for (var i = 0,length = materials.length; i < length; i++) {
    var material = materials[i];
    material.skinning = true;
} 
```

# javascript - jQuery - 同时使用 .slideToggle 和 .animate

> ID：15160120
> 
> 赞同：1
> 
> 时间：2013-03-01T14:30:09.513
> 
> 标签：javascript, jquery

我有一部分 jQuery 似乎无法正常工作。我有一个要单击的链接，[显示/隐藏]应该可以滑动切换一个 div。同时，我想对其进行动画处理，使页面滚动到 div 的顶部。当我将`animate`函数放入函数中时它会`slideToggle`起作用，就像[在这个 jfiddle 中一样](http://fiddle.jshell.net/YFR2e/2/)。

但是，这意味着我想要的 div 滑出，*然后*页面向下滚动。我喜欢设置它，以便两者同时发生，我试图在[这个 jfiddle](http://fiddle.jshell.net/JzU5G/1/)中这样做，但它根本不起作用。我也尝试过先做滚动动画，然后是滑动切换，但它不起作用 - 有没有办法实现这个？干杯!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T14:33:23.883

```
$(document).ready(function () {
    $('.click_to_hide').click(function () {
        var visible = $('.hide_on_click').is(":visible");
        $('.hide_on_click').slideToggle(500);
        if (!visible) {
            $('html, body').animate({
                scrollTop: $('.hide_on_click').offset().top
            }, 500);
        }
    });
}); 
```

[http://fiddle.jshell.net/YFR2e/3/](http://fiddle.jshell.net/YFR2e/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:38:29.980

```
$(document).ready(function () {
    $('.click_to_hide').click(function () {
        $('.hide_on_click').slideToggle(500);
        if($('.hide_on_click').is(':visible')){
          $('html, body').animate({
                scrollTop: $('.hide_on_click').offset().top
            }, 500);
        }
    });
}); 
```

尝试把它放在同一个函数中

# python - 将背景图像添加到绘图

> ID：15160123
> 
> 赞同：32
> 
> 时间：2013-03-01T14:30:27.373
> 
> 标签：python, numpy, matplotlib

假设我正在绘制一组以图像为背景的点。我在示例中使用了[Lena](https://i.stack.imgur.com/N32KD.jpg)图像：

```
import numpy as np
import matplotlib.pyplot as plt
from scipy.misc import imread

np.random.seed(0)
x = np.random.uniform(0.0,10.0,15)
y = np.random.uniform(0.0,10.0,15)
img = imread("lena.jpg")
plt.scatter(x,y,zorder=1)
plt.imshow(img,zorder=0)
plt.show() 
```

这给了我![在此处输入图像描述](../Images/758bfc25f91c7db2a680382454903e45.png).

我的问题是：如何在图中指定图像的角坐标？假设我希望左下角位于 at`x, y = 0.5, 1.0`且右上角位于`x, y = 8.0, 7.0`。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-01T14:37:16.313

使用`extent`关键字 of `imshow`。论证的顺序是`[left, right, bottom, top]`

```
import numpy as np
import matplotlib.pyplot as plt

np.random.seed(0)
x = np.random.uniform(0.0,10.0,15)
y = np.random.uniform(0.0,10.0,15)

datafile = 'lena.jpg'
img = plt.imread(datafile)
plt.scatter(x,y,zorder=1)
plt.imshow(img, zorder=0, extent=[0.5, 8.0, 1.0, 7.0])
plt.show() 
```

[![在此处输入图像描述](../Images/bb4c9cc2e9ef9f3e48fdd7b2081c722b.png)](https://i.stack.imgur.com/egaj7.png)

*   对于希望在散点图的一小块区域中显示图像的情况，请更改图的顺序 ( `.imshow`then `.scatter`) 并更改`extent`值。

```
plt.imshow(img, zorder=0, extent=[3.0, 5.0, 3.0, 4.50])
plt.scatter(x, y, zorder=1)
plt.show() 
```

[![在此处输入图像描述](../Images/da7453ed46a4f826bc14de2932ce17a8.png)](https://i.stack.imgur.com/A2dgA.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-01T14:33:46.153

您必须使用`extent`关键字参数：

```
imshow(img, zorder=0, extent=[left, right, bottom, top]) 
```

应在数据单元中指定范围的元素，以便图像可以匹配数据。例如，这可以用于将地理路径（坐标数组）覆盖在地理参考地图图像上。

# ios - 如何在 Objective-C 中可靠地阻止重复的动画调用？

> ID：15160126
> 
> 赞同：3
> 
> 时间：2013-03-01T14:30:37.717
> 
> 标签：ios, objective-c, multithreading, animation

用户可以通过滑动手势启动动画。我想阻止对动画的重复调用，以确保动画一旦开始，在完成之前不能再次启动——如果用户不小心多次滑动，可能会发生这种情况。

我想大多数人使用布尔标志 ( `BOOL isAnimatingFlag`) 以底部显示的方式实现此控制。我以前在应用程序中做过很多次这样的事情——但我从来没有 100% 确定我的标志是否保证具有我想要的值，因为动画使用块并且我不清楚我的动画完成的线程是什么块正在运行。

这种方式（阻止重复动画）对于多线程执行是否可靠？

```
/* 'atomic' doesn't 
* guarantee thread safety
* I've set up my flag as follows:
* Does this look correct for the intended usage?
*/
@property (assign, nonatomic) BOOL IsAnimatingFlag;

//…

@synthesize IsAnimatingFlag

//…

-(void)startTheAnimation{

// (1) return if IsAnimatingFlag is true
if(self.IsAnimatingFlag == YES)return;

/* (2) set IsAnimatingFlag to true
* my intention is to prevent duplicate animations
* which may be caused by an unwanted double-tap
*/
self.etiIsAnimating = YES;

    // (3) start a new animation
    [UIView animateWithDuration:0.75 delay:0.0 options:nil animations:^{

    // animations would happen here...

    } completion:^(BOOL finished) {

    // (4) reset the flag to enable further animations
        self.IsAnimatingFlag = NO;
    }];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:36:45.320

如果您不希望用户多次触发手势，请禁用手势

```
- (void)startTheAnimation:(id)sender
{
  [sender setEnabled:NO];

  [UIView animateWithDuration:0.75 delay:0.0 options:nil animations:^{

    // animations would happen here...

  } completion:^(BOOL finished) {
    [sender setEnabled:YES];
  }];
} 
```

**更新**

手势也有一个`enabled`属性，因此您可以使用与按钮相同的想法并更改它的启用状态

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T14:44:18.350

动画完成块将始终在主线程上运行。

在[UIView Class Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW111%20UIView%20Class%20Reference)的示例中，您可以看到`[view removeFromSuperview]`直接从块中调用它。这意味着完成块在主线程上运行，因为它是调用 UI 相关方法的唯一线程安全。

所以如果你`startTheAnimation`只从主线程调用，你就很好。如果不是，则无论如何都需要在主线程上调度它，因为您在其中调用了与 UI 相关的方法。

如果您需要`startTheAnimation`从主线程以外的其他线程调用，您可以执行以下操作：

```
-(void)startTheAnimation{
    dispatch_async(dispatch_get_main_queue(), ^{
        // Your code here
    });
} 
```

当然，从用户体验的角度来看，最好是禁用按钮或以其他方式修改 UI 以指示动画正在进行中。但是，它们都是相同的代码。无论您需要做什么，您首先需要在动画开始之前禁用它，并在动画完成后重新启用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:36:42.043

在调用此方法的地方，您可以尝试使用 dispatch_once GCD 函数：

```
static dispatch_once_t onceToken;
dispatch_once(&onceToken, ^{
    [myThingy startTheAnimation];
}); 
```

# html - CSS：如果在DIV上使用不透明度，里面的一切都更轻

> ID：15160127
> 
> 赞同：4
> 
> 时间：2013-03-01T14:30:44.460
> 
> 标签：html, csv, opacity

我有这样的结构：

```
<div class="abc">
  <ul>
    <li>something</li>
    ...
  </ul>
</div> 
```

我需要在`abc`div 上应用一个**不透明度**选项。如果我这样做，它会起作用，但是里面的文本`<ul>`不透明，因为`abc`DIV => 里面的文本`<ul>`更轻。

有什么方法可以应用于`opacity`DIV（其背景），但不能应用于 DIV 内的内容？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T14:37:09.813

如果不将 ul 从 div 中拉出，我能想到的唯一方法是使用 rgba 使背景颜色部分透明（如果它是纯色）：

```
background-color:rgba(0,0,0,.5); 
```

这将使背景为黑色，不透明度为 50%，但仅适用于较新的浏览器。

jsFiddle：http: [//jsfiddle.net/jdwire/XzeGE/](http://jsfiddle.net/jdwire/XzeGE/)

为了支持较旧的浏览器，您可以改为 base64 将一个小 png 编码到 css 中（或仅引用外部图像）。有关更多信息，请参阅[http://en.wikipedia.org/wiki/Data_URI_scheme ，有关在 css 或 html 中嵌入 base64 编码图像的缺点，请参阅](http://en.wikipedia.org/wiki/Data_URI_scheme)[https://stackoverflow.com/a/5258101/1721527](https://stackoverflow.com/a/5258101/1721527)。

如果背景是图像，只需将其设为部分透明的 png。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T14:35:45.323

如果背景是一种颜色，您可以使用这样的`rgba`背景颜色：

```
background-color: rgba(0, 0, 0, 0.5); 
```

这将产生一个不透明度为 50% 的黑色背景，而不会影响子元素的不透明度。

请注意，这不适用于旧版本的 IE（我认为是 6 和 7）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T14:36:51.357

您需要一个包含内容的单独 div 并将其位置设置在不透明 div 上，如下所示：

```
<div class="container">
    <div class="opacity"></div>
    <div class="content"></div>
</div> 
```

**CSS**

```
.container{
    position:relative;
}
.opacity{
    //desired opacity here
}
.content{
    position:absolute;
    top:0;
    left:0;
} 
```

`rgba`就像其他答案一样，如果我们在这里谈论背景颜色，这也是一个好方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T14:39:42.670

仅当您计划有背景图像时才使用它。指定颜色的 alpha 值。

[http://jsfiddle.net/jU8MT/](http://jsfiddle.net/jU8MT/)

```
<div class="abc">
    <div class="bgd"></div>
  <ul class="def">
    <li>something</li>
  </ul>
</div>

.abc {
    width: 200px;
    height: 200px;
    position: relative;
}
.bgd {
    background: red;
    opacity: 0.1;
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 0;
}
.def {
    z-index: 1;
} 
```

![在此处输入图像描述](../Images/54d4919a54b02fa5c25bdd9ac4ef8ca8.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T14:37:48.440

改用 RGBA

```
background-color: rgba(0,0,255,0.5); 
```

此处，最后一个值表示 0 到 1 级别的透明度

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-03T16:14:24.870

在我做任何与 Internet Explorer 相关的事情之前，我首先将 html 5 shim 调用到我的标题中

```
<!-- The HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
  <script src="js/html5shiv.js"></script>
<![endif]-->

<!--The fav and touch icons --> 
```

现在在你的 CSS 文件中，

```
div.abc ul { background-color: #333; }

div.abc ul li{background-color: #333;} 
```

我想这就是你要找的东西？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-01T14:39:11.907

您是否尝试将不透明度应用于内部元素？就像是：

```
div { 
    opacity: ....
}

div ul {
    opacity: .....
} 
```

# vb.net - 无法在具有接口的列表上使用 AddRange

> ID：15160129
> 
> 赞同：2
> 
> 时间：2013-03-01T14:30:50.993
> 
> 标签：vb.net, list

这是 .NET4 中的 Vb，但我在 C# 中有同样的问题。我们必须使用接口，原因我不会讨论。

这有效，但它不使用接口：

```
Public class PersonList
   Inherits List(of Person)
end class

Dim MyPeople as new PersonList
MyPeople.AddRange(SomeList) 
```

我需要使用 IPerson 和 IPersonList 等接口，因为我们使用依赖注入来启用这些类的测试。

当我为 PersonList 创建接口时，我再也看不到 AddRange。

使用接口的新版 PersonList

```
Public class PersonList
   Inherits List(IPerson)
   Implements IList(Of IPerson)
   Implements IPersonList
end class

Interface for the list:
Public Interface IPersonList
   Inherits IList(Of IPerson)
end interface 
```

在我尝试调用 AddRange 之前，一切都按预期构建和工作：

```
Dim MyPeople as IPersonList = new PersonList
MyPeople.AddRange(SomeList) 'BUILD ERROR AddRange is not a member of IPersonList 
```

大概`IPersonList`需要从具有`AddRange`. 但是`AddRange`是 的一部分`List(of T)`，接口不能从其继承。

那么如何让我的列表界面公开`AddRange`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:46:42.730

你可以：

1.  投射`IPersonList`到`List(Of IPerson)`，然后调用`AddRange`。这仅在所有 IPersonList 实现都继承自 时才有效`List(Of IPerson)`，因此它可能不是最佳选择。
2.  为`AddRange`_`IList(T)`
3.  使用循环而不是`AddRange`

# java - Java 对象通知父类

> ID：15160134
> 
> 赞同：0
> 
> 时间：2013-03-01T14:31:14.270
> 
> 标签：增强现实应用程序。, 视图, java, android, class, notify

我正在Android 中开发[增强现实应用程序。](/questions/tagged/augmented-reality "显示标记为“增强现实”的问题")我有一个名为 AugmentedView 的类，它扩展了[视图](/questions/tagged/view "显示标记为“查看”的问题")，它负责绘制标记。在 onDraw 方法中，当它检测到碰撞时，我想通知父类，它是主类并包含主 gui 以启用屏幕中的一个按钮。我使用以下代码在 Main 类的 onCreate 中调用 AugmentedView 类：

```
 AugmentedView augmentedView = new AugmentedView(this);
    augmentedView.setOnTouchListener(this);
    augmentedView.setLayoutParams(new LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    liveLayout.addView(augmentedView); 
```

我如何通知主类进行更改并将标记列表传递给它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:43:53.903

如果我正确理解您的问题，您想通知包含您的**AugmentedView的****Activity/Fragment**。

 **一种简单的方法是使用 java 回调。

// 在活动中

```
 //onCreate() ..

AugmentedView augmentedView = new AugmentedView(this);
augmentedView.setOnTouchListener(this);
augmentedView.setCollisionlistener(new Collisionlistener());
augmentedView.setLayoutParams(new LayoutParams(
        LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
liveLayout.addView(augmentedView);

}
 ..
public class Collisionlistener {
    public void onCollosion (){
     // write code to handle collosion
    }

}

    // in your AugmentedView

    private Collisionlistener mListener;

    public void setCollisionlistener(Collisionlistener listener){
        mListener = listener;
    }

    public void onDraw(Canvas canvas){
    // your code
    if (collosionDetected && mListener != null) {
        mListener.onCollosion();
    }

    } 
```**

# javascript - javascript回调上的registerclientscriptblock

> ID：15160137
> 
> 赞同：0
> 
> 时间：2013-03-01T14:31:26.010
> 
> 标签：javascript, asp.net, registerclientscriptblock

我有一个 javascript 函数，可以检查 lat long 并在页面加载时运行。它使用 lat long 调用页面方法。在 page 方法中，我使用 RegisterClientScriptBlock 设置了一堆变量，并返回一个 javascript 字符串以显示使用这些变量的地图。地图加载，但我得到一个错误，它期望的变量是未定义的。

```
<script type="text/javascript">       
    function check() {           
        if (navigator.geolocation) {
            var panelProg = $get('progress');
            panelProg.style.display = '';
            var panelProg = $get('map');
            panelProg.style.display = 'none';              
            navigator.geolocation.getCurrentPosition(function (position) {                   
                // Access them accordingly
                PageMethods.SetSession(position.coords.latitude, position.coords.longitude, callBack);
            });
        }
    }
    function callBack(result) {         
eval(result);
    }
</script>

 [WebMethod]
public static string SetSession(string latval, string longval)
{
    //does work, calls RegisterClientScriptBlock to set a bunch of array variables
   //var lats = new Array(); var longs = new Array(); etc...
    return "displaymap(" + latval + "," + longval + ");";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:35:19.083

它不会起作用，因为 PageMethod 不执行 Page 循环。我的意思是页面不会回发，脚本也不会呈现。

您可以通过返回脚本来解决此问题。

```
[WebMethod]
public static string SetSession(string latval, string longval)
{
    var js = "lats = new Array(); var longs = new Array();"; //etc...
    js += "displaymap(" + latval + "," + longval + ");";
    return js;
} 
```

# php - 用于 PDF 下载问题的 readfile 功能

> ID：15160142
> 
> 赞同：0
> 
> 时间：2013-03-01T14:31:33.797
> 
> 标签：php

我知道有人问过这个问题，但提供的解决方案对我不起作用。我可以下载 PDF，但 Adob​​e Reader 告诉我它已损坏或解码不正确。有没有人有替代解决方案或可能的解决方案？

```
$path = "http://www.laerdalmail.com/discoversimulation/downloads/needs_assessment_form.pdf";
header('Content-Type: application/pdf'); 
header("Content-Transfer-Encoding: Binary"); 
header("Content-disposition: attachment; filename=needs_assessment_form.pdf"); 
readfile($path); 
exit; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:28:28.907

应该给 readfile 一个文件系统路径，而不是一个 URL。像这样的东西：

```
$path = '/websitefolder/discoversimulation/downloads/needs_assessment_form.pdff';
// or
$parh = 'c:\something\needs_assessment_form.pdff'; 
```

尝试添加内容长度：

```
header('Content-Transfer-Encoding: binary');
header('Content-Length: ' . filesize($path)); 
```

# cmake - CMake：链接到具有依赖项的导入库失败

> ID：15160149
> 
> 赞同：4
> 
> 时间：2013-03-01T14:31:55.650
> 
> 标签：cmake

我有一个带有 CMakeLists.txt 的子目录，它应该使用 make 编译一个库并将结果作为导入的库导出到父目录：

```
set(static_lib ${CMAKE_CURRENT_BINARY_DIR}/lib/mylib.a)

add_custom_command(
    WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
    OUTPUT ${static_lib}
    COMMAND make
    COMMAND make install PREFIX=${CMAKE_CURRENT_BINARY_DIR}
)

add_custom_target(compile_mylib DEPENDS ${static_lib})

add_library(mylib STATIC IMPORTED)
set_property(TARGET mylib PROPERTY IMPORTED_LOCATION ${static_lib})
add_dependencies(mylib compile_mylib) 
```

父目录中的 CMakeLists.txt 如下所示：

```
add_subdirectory(deps/mylib)
add_executable(mybin source.c)
target_link_libraries(mybin mylib) 
```

在 OSX 上这工作得很好 - 但如果我在 Ubuntu 上编译它似乎忽略了子目录的 CMakeLists 并抱怨：

```
/usr/bin/ld.bfd.real: cannot find -lmylib 
```

我正在使用 Clang 进行编译。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T17:28:55.697

解决方案是将 GLOBAL 添加到您的 add_library 调用中，以便它对父 CMakeLists.txt 可见

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-06T13:34:07.553

你可以试试这个：

```
find_library(MYLIB mylib.a ${CMAKE_CURRENT_BINARY_DIR}/lib) 
```

然后设置你的链接库：

```
target_link_libraries(mybin ${MYLIB}) 
```

应该是工作。

# php - 中介者模式传递数据php

> ID：15160153
> 
> 赞同：0
> 
> 时间：2013-03-01T14:32:22.967
> 
> 标签：php

```
class Mediator {
    protected $events = array();
    public function attach($eventName, $callback) {
        if (!isset($this->events[$eventName])) {
            $this->events[$eventName] = array();
        }
        $this->events[$eventName][] = $callback;
    }
    public function trigger($eventName, $data = null) {
        foreach ($this->events[$eventName] as $callback) {
            $callback($eventName, $data);
        }
    }
}
$mediator = new Mediator;
$mediator->attach('stop', function() { echo "Stopping"; });
$mediator->attach('stop', function() { echo "Stopped"; });
$mediator->trigger('stop'); // prints "StoppingStopped" 
```

我不知道如何成功地将数据传递给模式，即我想传递数据库对象，但结果是这样的。

```
$mediator->attach('test', function($test) { echo $test; });
$mediator->trigger('test', '123'); 
```

它打印出“测试”，而不是 123。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:50:57.617

您只需要更换：

```
$callback($eventName, $data); 
```

和

```
$callback($data); 
```

[观看现场演示](http://eval.in/11379)

# java - Java HttpURLConnection 神秘死亡

> ID：15160155
> 
> 赞同：4
> 
> 时间：2013-03-01T14:32:27.870
> 
> 标签：java, try-catch, httpurlconnection, http-get

我正在尝试`java.net.HttpURLConnection`进行简单的 HTTP GET 调用，但遇到了一些我无法解释的问题：

```
public String makeGETCall(HttpURLConnection con) {
    try {
        System.out.println("About to make the request...");

        if(con == null)
            System.out.println("con is NULL");
        else {
            System.out.println("con is NOT null");

            if(con.getInputStream() == null)
                System.out.println("con's input stream is NULL");
            else
                System.out.println("con's input stream is NOT null");
        }
    } catch(Throwable t) {
        System.out.println("Error: " + t.getMessage());
    }

    System.out.println("Returning...")
    return "DUMMY DATA";
} 
```

当我运行它时，我得到以下控制台输出：

```
About to make the request...
con is NOT null 
```

然后程序终止，没有错误。不会抛出异常，不会意外退出，也不会挂起或超时......它只是死了。

`con.getInputStream()`当我检查是否存在时，它似乎正在死去`null`。但这仍然不能解释为什么它只是安静地死去，没有任何错误迹象。有任何想法吗？我愿意承认我本可以`HttpURLConnection`错误地创建了，但是，应该有更多的迹象表明是什么正在杀死我的程序......提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:54:06.507

由于这一行，您的代码不应编译：

```
 System.out.println("Returning...") 
```

缺少分号。话虽如此，我想您正在使用的应用程序的任何运行都使用旧的执行，并且没有您可能编写的新代码。

如果不是这种情况，那么您（不知何故）错误地粘贴了您的代码，我敢猜测您错过了我们需要查看的其他方面？如果您以某种方式为 StackOverflow 编辑了代码，您介意分享原始代码吗？

`Throwable`此外，除非您有充分的理由，否则我建议您不要抓捕。掩盖应用程序错误通常是不好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T11:53:58.063

同样的问题。我跟踪了我的代码，它永远卡在 con.getInputStream() 上。要重现问题，请运行下面的代码示例。（输入正确的网址）

A) 在另一台主机上启动任何 HTTPS 服务器

B) 启动客户端代码

C) 关闭 HTTPS 服务器

D) 再次启动 HTTPS 服务器

-> 卡在 con.getInputStream()

在重新启动 HTTPS 服务器时，客户端似乎发生了一些死锁。仅供参考，我使用捆绑包 org.apache.felix.http.jetty 作为 HTTP(S)-Server 并附加了 Restlet Servlet。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;
import java.security.KeyManagementException;
import java.security.NoSuchAlgorithmException;
import javax.net.ssl.HostnameVerifier;
import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLSession;
import javax.net.ssl.TrustManager;
import javax.net.ssl.X509TrustManager;

public class TestHTTPS{

public static void main(String[] args) throws InterruptedException
{
    new TestHTTPS().activate();
}

private void activate() throws InterruptedException{

    TrustManager[] insecureTrustManager = new TrustManager[] { 
            new X509TrustManager() {     
                public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                    return null;
                } 
                public void checkClientTrusted( 
                    java.security.cert.X509Certificate[] certs, String authType) {
                    } 
                public void checkServerTrusted( 
                    java.security.cert.X509Certificate[] certs, String authType) {
                }
            } 
        }; 

    try {
        SSLContext sc = SSLContext.getInstance("SSL"); 
        sc.init(null, insecureTrustManager, new java.security.SecureRandom());
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
    } catch (KeyManagementException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    } 

    HostnameVerifier allHostsValid = new HostnameVerifier() {
        public boolean verify(String hostname, SSLSession session) {
            return true;
        }
    };

    HttpsURLConnection.setDefaultHostnameVerifier(allHostsValid);

    String https_url = "https://192.168.xx.xx:8443";
    URL url;
    try {

        url = new URL(https_url);

        while(true) {
            HttpsURLConnection con = (HttpsURLConnection)url.openConnection();
            con.setConnectTimeout(1000);
            print_content(con);
            Thread.sleep(100);
        }

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

}

private void print_content(HttpsURLConnection con){
    if(con!=null){

        try {

            System.out.println("****** Content of the URL ********");           
            BufferedReader br = 
                    new BufferedReader(
                            new InputStreamReader(con.getInputStream()));

            String input;

            while ((input = br.readLine()) != null){
                System.out.println(input);
            }
            br.close();

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

欢迎任何建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:47:06.830

> `con.getInputStream()`当我检查是否为空时，它似乎正在死去。

好吧，我觉得这很难相信。

从表面上看：

*   测试引用以查看它是否`null`无法终止您的程序

*   可以`con.getInputStream()`抛出异常或返回

*   如果确实返回它不应该返回`null`......'因为 API 不允许它......你会看到一条消息

*   如果抛出异常，您会看到`Error: ...`消息

我的结论是，要么不同的线程导致应用程序退出，要么应用程序根本没有退出。

我能想到的唯一其他解释是您的编辑/编译/部署/运行过程不起作用，并且实际运行的代码与您显示使用的代码不匹配。

我建议您尝试为此创建一个[SSCCE](http://sscce.org/)，以便其他人可以重现它并找出实际发生的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-31T14:19:01.177

解决它。

```
con.setReadTimeout(1000) 
```

显然 HTTP 服务器接受连接，但是当您在服务器启动时错误连接时无法完成请求。setReadTimeout 导致线程抛出 SocketTimeoutException。

希望这可以帮助其他人解决问题...

由于在使用带有内部连接器的 RESTlet 时也可能出现此问题，因此这里是 RESTlet 的解决方案。您必须自己处理 hostnameVerifier 和 SSLContextFactory：

```
context = new Context();

context.getParameters().add("readTimeout", Integer.toString(1000));
context.getAttributes().put("sslContextFactory", new YourSslContextFactory());
context.getAttributes().put("hostnameVerifier", new YourHostnameVerifier());

client = new Client(context, Protocol.HTTPS); 
```

确保

```
org.restlet.ext.ssl 
org.restlet.ext.net
org.restlet.ext.httpclient 
```

在你的类路径中。

此致

# objective-c - 设置显示路径/图像的顺序

> ID：15160157
> 
> 赞同：-2
> 
> 时间：2013-03-01T14:32:31.007
> 
> 标签：objective-c, cocoa-touch, drawing

`UIView`我在 a和 a中有几个弧线和矩形`UIImageView`。我想要`UIImageView`在后台。我在 IB 中订购了它，以便图像视图位于我的标签和按钮后面。

首先，我需要在图像视图中放置一个图像，我不想在 IB 中这样做。我试过这段代码

```
UIImage *myImage = [UIImage imageNamed:@"image.png"];
UIImageView *myImageView = [[UIImageView alloc] initWithImage:@"myImage"]; 
```

但它不起作用。在我开始工作后，我该怎么做才能将我的路径移动到图像视图前面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:29:33.863

我认为您想绘制以放置背景图像，并在其上绘制圆（弧）。

如果我的理解是正确的。首先使用 CGContextDrawImage() 将图像绘制到视图上，然后在其上绘制弧线。（无需使用图像视图）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:34:25.090

将图像添加到`UIImageView`：

```
UIImage *myImage = [UIImage imageNamed:@"image.png"];
UIImageView *myImageView = [[UIImageView alloc] initWithImage:myImage];
[self.view addSubview:myImageView]; 
```

# c++ - 如何生成介于 1 和用户输入的数字之间的随机数？

> ID：15160161
> 
> 赞同：3
> 
> 时间：2013-03-01T14:32:45.170
> 
> 标签：c++, random

如何创建一个从 1 -> 生成十个随机数的程序`RAND_MAX`？

`RAND_MAX`必须是用户输入的数字。

```
#include <iostream>
#include <stdlib.h>

int main()
{
    using namespace std;
    int x;
    int y;

    Random:
    {
        x = rand();
        cout << x << endl;
    }

    y = y + 1;
    if (y == 10) {
        return 0;
    }

    goto Random;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T14:39:37.673

**免责声明：** 这是一种生成随机数的快速而肮脏的方法，因为它可能无法完全一致地生成数字，如果（的上限）被定义为小于您的目标范围`rand`，您会遇到一些问题。在现代 C++ 中，最好使用标题，根据问题*[Generate random numbers uniformly over an entire range](http://stackoverflow.com/questions/288739/generate-random-numbers-uniformly-over-entire-range)*。`RAND_MAX``rand``<random>`

* * *

就像是：

```
int main()
{
  int randMax;
  cin >> randMax;
  for (int y = 0; y < 10; y++)
  {
    int x = rand() % randMax; // Range = [0, randMax)
    cout << x+1 << endl; // Range = [1, randMax]
  }
} 
```

哦，一定要尽量避免`goto`（至少在我看来）。这里有[两个](https://stackoverflow.com/questions/379172/to-use-goto-or-not) [关于](https://stackoverflow.com/questions/13274661/should-i-use-goto-statement)它的问题。

# cuda - 使用带有推力的 std::bind2nd

> ID：15160162
> 
> 赞同：1
> 
> 时间：2013-03-01T14:32:45.927
> 
> 标签：cuda, thrust

我正在尝试将 std::bind2nd 与推力一起使用。我有使用主机指针编译的代码，但不是使用设备指针编译的。我认为它们是相同的，应该在这两种情况下都有效。

```
// this compiles fine
thrust::host_vector<unsigned int> h_vec(nwords);
thrust::host_vector<unsigned int> h_map(nwords);
thrust::host_vector<unsigned int> h_out1(nwords);
thrust::copy_if(h_vec.begin(), h_vec.end(), h_map.begin(), h_out1.begin(), 
                std::bind2nd(thrust::equal_to<int>(),1));

// this compilation fails with the error below
thrust::device_vector<unsigned int> d_map(nwords);
thrust::device_vector<unsigned int> d_vec(nwords);
thrust::device_vector<unsigned int> d_out1(nwords);
thrust::copy_if(d_vec.begin(), d_vec.end(), d_map.begin(), d_out1.begin(), 
                std::bind2nd(thrust::equal_to<int>(),1)); 
```

当我尝试使用 bind2nd 调用第二个 copy_if 时，出现以下错误：

```
 /opt/cuda/include/thrust/detail/internal_functional.h(99): warning: calling a
 __host__ function from a __host__ __device__ function is not allowed 
```

是否有另一种方法可以将适配器用于推力中的二进制函数？我在网络上的示例中看到有人使用“thrust::bind2nd”，但我在我们的任何头文件中都找不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:22:55.020

可以在推力中使用适配器。但是如果你想在 GPU 上使用它们，适配器必须是一个 __device__ 函数。这就是为什么第一个`copy_if`编译而第二个不编译的原因——你的谓词是一个主机函数，而不是一个设备函数，并且使用`device_vector`意味着一个设备编译轨迹。

简而言之，如果你想在GPU上使用一个适配器函数，你需要自己编写一个，标准库的（`bind1st`, `bind2nd`, `bind`）不能使用。

# javascript - jQuery 用 ASP.NET 下拉列表替换标签

> ID：15160171
> 
> 赞同：0
> 
> 时间：2013-03-01T14:33:13.143
> 
> 标签：javascript, jquery, asp.net

我正在使用我的数据库中的数据构建一个可编辑的表单，这需要使用 ASP.NET 控件。我在 HTML 中得到了这个工作，但是当我添加 .NET 部分时，我被卡住了。

情况如下：我在页面上显示了一个标签，其下方有一个编辑按钮。应该发生的是，一旦按下编辑按钮，标签就会变成一个 .NET 下拉列表，其中包含来自数据库的数据。用户单击保存后，下拉列表将返回显示所选值的标签。

我的问题是，当您单击编辑按钮时，下拉列表永远不会出现。

这是代码：

**.ASCX**

```
<li>
    Campus
    <br />
    <span class="datainfoDropdown">
        <strong>
            <asp:Literal ID="CampusAttended" runat="server" ClientIDMode="Static"/>
        </strong>
        <asp:DropDownList ID="ProfileCampusDropDown" runat="server" ClientIDMode="Static" style="display:none;" ></asp:DropDownList>
    </span>
    <a href="#" class="editlinkDropdown">Edit Info</a>
    <a class="savebtnDropdown">Save</a>
</li> 
```

**Javascript**

```
$(".editlinkDropdown").on("click", function (e) {
    e.preventDefault();
    var datasets = $(this).prevAll(".datainfoDropdown");
    var savebtn = $(this).next(".savebtnDropdown");
    datasets.each(function () {
        var theid = $(this).attr("id");
        var currval = $(this).text();
        var dropDown = $('#ProfileCampusDropDown').html();
        $('.datainfoDropdown').html(dropDown);
    });

    $(this).css("display", "none");
    savebtn.css("display", "block");
});

$(".savebtnDropdown").on("click", function (e) {
    e.preventDefault();
    var elink = $(this).prev(".editlinkDropdown");
    var datasets = $(this).prevAll(".datainfoDropdown");
    datasets.each(function () {
        var newid = $(this).attr("id");
        var einput = $("#" + newid + "-form");
        var newval = $('#ProfileCampusDropDown :selected').text();
        //einput.remove();
        $(this).html('<strong>' + newval + '</strong>');
    });

    $(this).css("display", "none");
    elink.css("display", "block");
}); 
```

如何让我的编辑按钮显示下拉列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:22:22.337

查看您的代码，您想要实现的目标并不是很清楚。我必须承认我没有看到 ids 和“-form”的意义。我肯定错过了什么。

无论如何，我想这应该做你所描述的（提供`ProfileCampusDropDown`并`savebtnDropdown`以 a 开头`display:none;`）

```
 $(".editlinkDropdown").on("click", function (e) {
        e.preventDefault();
        $(this).prevAll(".datainfoDropdown").find("strong").hide();
        $('#ProfileCampusDropDown').show();
        $(this).hide();
        $(this).next(".savebtnDropdown").show();
    });

$(".savebtnDropdown").on("click", function (e) {
    e.preventDefault();
    var strong = $(this).prevAll(".datainfoDropdown").find("strong");
    strong.html($('#ProfileCampusDropDown :selected').text());
    strong.show();
    $('#ProfileCampusDropDown').hide();

    $(this).hide();
    $(this).prev(".editlinkDropdown").show();
}); 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:07:20.487

我不知道您在 ASP.NET 中的什么位置，但很有可能您为 asp.net 控件设置的 ID 正在被服务器更改。

如果是这种情况，请设置控件的 CssClass 属性并使用`$(".class")`jQuery 的选择器。

# android - 如何动态定义 R.drawable 的名称

> ID：15160172
> 
> 赞同：2
> 
> 时间：2013-03-01T14:33:14.997
> 
> 标签：android, image, resources, drawable

有没有办法即时生成 R.drawable.... 名称？我想使用动态生成的名称设置背景图像（已经可以用作`R.drawable.example_graphic`）

所以我想找到一种方法将字符串分配给 $ABC ->`btn.setBackgroundImage(R.drawable.$ABC);`

我不想创建一个新的drawable，我想使用现有的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:41:21.547

是的。可绘制对象在编译时是常量：您确切知道存在什么。因此，在您的 Application 对象中，创建一个地图：

```
public static final Map<String, Integer> NAMED_RESOURCES;
static {
  Map<String, Integer> m = new HashMap<String, Integer>();
  m.put(KEY1, R.drawable.ABC);
  m.put(KEY2, R.drawable.DEF);
  // ...
  NAMED_RESOURCES = Collections.unmodifiableMap(m);
} 
```

现在你可以：

btn.setBackgroundImage(Application.NAMED_RESOURCES.get($ABC));

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:50:23.023

正如@CommonsWare 所分享的，我已经找到了解决方案。

`getContext().getResources().getIdentifier("flags_"+country, "drawable","mypackage")`

但是，它可能需要缓存，因为它使用反射。

因此，创建一个静态 HashMap 来保留 ResourceName 及其来自 getIdentifier 函数（整数）的结果似乎是一个好主意；对同一 ResourceName 的进一步使用只会从 HashMap 中获取值，而不是再次使用反射。

# bash - 在 bash 中干净地转储关联数组的内容的简单方法？

> ID：15160177
> 
> 赞同：5
> 
> 时间：2013-03-01T14:33:29.880
> 
> 标签：bash, associative-array, zsh

在`zsh`我可以使用单个命令轻松转储关联数组的内容：

```
zsh% typeset -A foo
zsh% foo=(a 1 b 2)
zsh% typeset foo
foo=(a 1 b 2 ) 
```

然而，尽管搜索高低，我能找到的最好的是`declare -p`，其输出包含`declare -A`：

```
bash$ typeset -A foo
bash$ foo=([a]=1 [b]=2)
bash$ declare -p foo
declare -A foo='([a]="1" [b]="2" )' 
```

有没有一种干净的方法来获得类似`zsh`输出的东西（理想情况下`foo=(a 1 b 2 )`或`foo='([a]="1" [b]="2" )'`），最好不诉诸字符串操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:39:24.530

除了字符串操作之外，似乎没有其他方法可以做到这一点。但至少我们可以避免`sed`每次都分叉一个进程，例如：

```
dump_assoc_arrays () {
    for var in "$@"; do
        read debug < <(declare -p $var)
        echo "${debug#declare -A }"
    done
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:33:48.780

> 这`declare -A`是多余的

好先生，这`declare -A`不是多余的。

```
$ foo=([a]="1" [b]="2")

$ echo ${foo[a]}
2

$ declare -A bar=([a]="1" [b]="2")

$ echo ${bar[a]}
1 
```

# c# - 在c#中将变量指向其他变量

> ID：15160179
> 
> 赞同：0
> 
> 时间：2013-03-01T14:33:31.223
> 
> 标签：c#, .net-4.0

是否可以让一个变量指向另一个变量以用于快捷方式？例如，假设我在一个名为 的类中有一个变量，`SharedResources.proxTelescope`我如何在另一个类中获取一个变量`prox`以指向第一个变量，这是一种快捷方式。我可以这样做`var prox = SharedResources.proxTelescope;`，但如果 proxTelescope 发生变化，它不会反映在 prox 上，对吗？我应该怎么做呢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T14:35:46.323

我会将事物设置为属性。

```
private <type> prox
{
    get { return SharedResources.proxTelescope; }
    set { SharedResources.proxTelescope = value }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T14:35:49.630

您可以创建一个属性，例如：

```
public YourTypeHere prox
{
    get { return SharedResources.proxTelescope; }
    set { SharedResources.proxTelescope = value; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T14:38:15.963

如果变量是类，那么它们是引用类型，因此其中一个的任何更改都将反映在另一个中。

如果变量是结构，那么它们是值类型并且你有问题，你可以制作一些函数（或属性）来获取值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T14:54:39.207

另一种方法是使用`Func<T>`：

```
public class MyClass
{
    public Func<DesiredType> ValueGetter {get;set;}
    public DesiredType Value { get { return ValueGetter(); } }
} 
```

然后可以这样使用：

```
var myClass = new MyClass();
myClass.ValueGetter = () => SharedResources.proxTelescope;

var value = myClass.Value; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T14:35:50.067

如果值应该在所有实例之间“共享”，那么最好让变量作为它所在类的静态成员存在，并创建一个实例属性来检索静态变量的值。

# java - 渲染时 JavaFX 图像 (PNG) 透明度清晰度丢失

> ID：15160181
> 
> 赞同：5
> 
> 时间：2013-03-01T14:33:34.747
> 
> 标签：java, image, png, transparency, javafx

我正在渐变背景上加载和显示透明 PNG，结果如下：

![在此处输入图像描述](../Images/26e2baab801a52841c41ef94569b4426.png)

如果我在 Paint.NET 中打开相同的文件，添加如下所示的背景：

![在此处输入图像描述](../Images/7839fe4ed16a5d819ad988f5369a21d3.png)

不知何故，JavaFX 使图像松散清晰，我担心这可能是我的应用程序中所有图像的问题，而它只是在这种特殊情况下最明显。

以下是显示我如何加载此特定图像的提取代码：

```
ImageView imgDownload = new ImageView(this.getClass().getResource("/img/docstore/document_downloaded_btn.png").toExternalForm());
imgDownload.setFitWidth(59);
imgDownload.setFitHeight(32);
GridPane.setHalignment(imgDownload, HPos.CENTER);
grid_item.add(imgDownload, 3, 0); 
```

作为参考，[这里是原始图像的链接](https://i.imgur.com/byY8whh.png)。

**我正在寻找一个答案，强调发生这种情况的可能原因**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T20:48:37.073

**更新**

Java 8 中的 JavaFX 图像现在在所有情况下都能清晰地呈现。

问题中描述的原始问题已得到解决。

Dreen 提交的有关此行为的错误[RT-28765 Incorrect subpixel placement for an Image已作为](https://javafx-jira.kenai.com/browse/RT-28765)[RT-19282 [StackPane] 不需要的 ImageView 模糊](https://javafx-jira.kenai.com/browse/RT-19282)的副本而关闭 。RT-19282 在 Java 8 中已修复。

我在 Windows 7 上测试了[Java 8 build 108。](https://jdk8.java.net/download.html)这个答案中的示例应用程序现在可以正确显示（没有模糊图像有时会在 x 或 y 方向偏移半个像素）。

* * *

这是一个很好的问题和非常好奇的行为。

我整理了一个示例程序，它提供了可能的解释和解决方法。

运行该程序并稍微拖动边框以调整其大小后，该程序的输出如下所示。左边的模糊云是`ImageView`放置在`GridPane`. 右边的清脆云是`ImageView`我的解决方法修复类（`CenteredRegion`）中的一个包裹，放置在同一个`GridPane`.

![模糊而清脆的云](../Images/666c2a6b5fc5624ee428268a7dde98da.png)

显示上图时，程序的输出为：

```
Layout SnapToPixel: true
...
fuzzy: New Bounds: BoundingBox [minX:14.5, minY:12.5, minZ:0.0, width:59.0, height:32.0, depth:0.0, maxX:73.5, maxY:44.5, maxZ:0.0]
fuzzy: xDisplacement: 0.5, yDisplacement: 0.5
crisp: New Bounds: BoundingBox [minX:84.0, minY:13.0, minZ:0.0, width:59.0, height:32.0, depth:0.0, maxX:143.0, maxY:45.0, maxZ:0.0]
crisp: xDisplacement: 0.0, yDisplacement: 0.0 
```

如您所见，模糊图像没有进行像素对齐，并且在 x 和 y 方向偏移了半个像素，导致它看起来很模糊。尽管网格区域`snapToPixel`设置为`true`.

由于包含布局的舞台是动态调整大小的，因此模糊图像将在像素对齐和非像素对齐之间交替（取决于场景宽度和高度的奇数或均匀性）。当您调整舞台边界的大小时，这会产生令人讨厌的闪烁效果，因为模糊图像在模糊和清晰之间不断交替。

当在父容器上设置为 true时，模糊图像的行为似乎是一个错误`snapToPixel`，所以我建议[针对 JavaFX 运行时项目提交一个错误并在错误中](http://javafx-jira.kenai.com)链接回这个堆栈溢出问题并放置一个链接到评论中创建的错误。

清晰版本保持清晰，因为它位于确保像素对齐的自定义区域实现中。

测试系统为win7 + jdk8b77 + ATI HD4600显卡。

```
import javafx.application.Application;
import static javafx.application.Application.launch;
import javafx.beans.value.*;
import javafx.geometry.*;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.image.*;
import javafx.scene.layout.*;
import static javafx.scene.layout.Region.USE_PREF_SIZE;
import javafx.stage.Stage;

public class TransparentPngSample extends Application {  
  public static final String IMAGE_LOC = "http://i.imgur.com/byY8whh.png";

  @Override public void start(Stage stage) {
    Pane layout = createSceneContent();
    stage.setScene(new Scene(layout));
    stage.show();

    System.out.println("Layout SnapToPixel: " + layout.snapToPixelProperty().get());
  }

  private Pane createSceneContent() {
    final Image cloudImage = new Image(IMAGE_LOC);
    final ImageView fuzzyCloud = new ImageView(cloudImage);
    final CenteredRegion crispCloud = new CenteredRegion(new ImageView(cloudImage));

    GridPane layout = new GridPane();
    layout.setHgap(10);
    layout.setVgap(10);
    layout.addRow(0, fuzzyCloud, crispCloud);
    layout.setAlignment(Pos.CENTER);
    layout.setStyle("-fx-padding: 10px; -fx-background-color: slategrey;");

    fuzzyCloud.boundsInParentProperty().addListener(new BoundsReporter("fuzzy"));
    crispCloud.boundsInParentProperty().addListener(new BoundsReporter("crisp"));

    return layout;
  }

  class CenteredRegion extends Region {
    private Node content;

    CenteredRegion(Node content) {
      this.content = content;
      getChildren().add(content);
    }

    @Override protected void layoutChildren() {
      content.relocate(
        Math.round(getWidth()  / 2 - content.prefWidth(USE_PREF_SIZE)  / 2), 
        Math.round(getHeight() / 2 - content.prefHeight(USE_PREF_SIZE) / 2)
      );

      System.out.println("crisp content relocated to: " +
        getLayoutX() + "," + getLayoutY()
      );
    }

    public Node getContent() {
      return content;
    }
  }

  class BoundsReporter implements ChangeListener<Bounds> {
    final String logPrefix;

    BoundsReporter(String logPrefix) {
      this.logPrefix = logPrefix;
    }

    @Override public void changed(ObservableValue<? extends Bounds> ov, Bounds oldBounds, Bounds newBounds) {
      System.out.println(logPrefix + ": " + 
        "New Bounds: " + newBounds
      );
      double xDisplacement = newBounds.getMinX() - Math.floor(newBounds.getMinX());
      double yDisplacement = newBounds.getMinY() - Math.floor(newBounds.getMinY());
      System.out.println(logPrefix + ": " + 
        "xDisplacement: " + xDisplacement + ", " + 
        "yDisplacement: " + yDisplacement
      );
    }
  }          

  public static void main(String[] args) { launch(args); }
} 
```

# java - JFace TableViewer 应该对更改列表做出反应

> ID：15160182
> 
> 赞同：0
> 
> 时间：2013-03-01T14:33:35.163
> 
> 标签：java, data-binding, eclipse-rcp, jface, tableviewer

我们有以下场景：一个 Eclipse 4 RCP-Application 应该写一个日志输出。这些日志通过 OSGi 服务绑定，并应使用 JFace TableViewer 显示。

这适用于这个 ViewPart 的第一次启动。（因为已经有日志了）如果另一个插件在视图启动后写入日志，这个视图也应该更新。包含视图日志（作为模型的一部分）的 ArrayList 已正确更新。

该表是这样设置的：

```
@PostConstruct 

public void createControls(Composite parent) {
    b = new TableViewerBuilder(parent);
    b.createColumn("Datum").bindToProperty("time").build();
    b.createColumn("Message").bindToProperty("message").build();
    b.createColumn("Level").bindToProperty("level").build();
    b.createColumn("Bundle").bindToProperty("bundle").build();
    m_bindingContext = initDataBindings();
} 
```

数据绑定是这样进行的：

```
protected DataBindingContext initDataBindings() {
    DataBindingContext bindingContext = new DataBindingContext();
    input = new WritableList(logItemList.getItems(), LogItem.class);
    ViewerSupport.bind(tableViewer, input, BeanProperties
        .values(new String[] { "time", "message", "level" }));
    return bindingContext; 
```

}

我们从列表中获取项目（已正确更新）并将它们放入 WritableList 中。此列表绑定到 TableViewer 并显示时间戳、消息和某种日志级别。

LogItemList 是这样设置的：

```
public class LogItemList extends ModelObject {
     [.. stuff ..]
    private List<LogItem> items;

    public List<LogItem> getItems() {
        return items;
    }
    public void addItem(LoggingItem item) {
        LogItem logItem = new LogItem(item);
        List<LogItem> tmp = items;
        items.add(logItem);

        firePropertyChange("items", tmp, items);
    }
} 
```

-Method`firePropertyChange`继承自`ModelObject`-class。

```
 public class ModelObject {
        private PropertyChangeSupport changeSupport = 
             new PropertyChangeSupport(this);
        protected void firePropertyChange(String propertyName, 
            Object oldValue,
            Object newValue) {
          changeSupport.firePropertyChange(propertyName, oldValue, newValue);
    } 
```

我认为 TableViewer/Databinding 会对这个更改事件做出反应，但事实并非如此。

有人对如何做到这一点有任何想法吗？

在此先感谢，史蒂芬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:51:29.333

`WritableList`不会自动监控列表。（怎么可能`List`没有通知界面？）

最简单的方法是`LogItemList.items`使用 with`WriteableList`而不是`ArrayList`. 不利的一面是核心模型不像它可以/应该那样干净。

或者，您可以添加一个侦听器到您`LogItemList`的传播到`WritableList.fireListChanged(...)`. 也许是一个“更清洁”的解决方案，但需要更多的工作，因为您需要将“WritableList”子类化。

或者您可以根据 EMF 实现核心模型并使用`EMFObservables.observeList(...)`. 更多的工作，但实际上，我会做到的:-)

# c# - 从局部视图中获取模型数据

> ID：15160183
> 
> 赞同：2
> 
> 时间：2013-03-01T14:33:37.163
> 
> 标签：c#, javascript, asp.net-mvc, jquery, asp.net-mvc-partialview

我正在使用 MVC 体系结构和实体框架（数据库优先）开发一个 Intranet ASP Web 应用程序。我的问题是以下一个：

我有一个实体“Person”和一个实体“PhoneCard”，其中包括作为外键的“Person”的主键（因此，Id_Person）。我使用实体框架创建了一个 CRUD 控制器“PersonController”，Visual Studio 自动生成了相应的视图（索引、详细信息、创建、编辑和删除）。然后，我创建了另一个名为“PhoneCardController”的 CRUD 控制器（始终使用 EF）。在我的 Create Person 视图中，由于 AJAX 函数，我包含了 Create PhoneCard 视图：

```
function addPhoneCardCreateView() {

    $('#divCreatePhoneCard').load("@Url.Action("Create","PhoneCard")");

} 
```

并这样称呼它：

```
<a href = "javascript:addPhoneCardCreateView()">Add a Phone card</a>
    <div id = "divCreatePhoneCard"></div> 
```

通过这样做，我调用了我的局部视图，以便在添加人员时添加电话卡。不幸的是，当我单击创建按钮时，它只会将新人添加到数据库中。这是我的 PersonController 中的 Create 操作：

```
 public ActionResult Create()
    {
        ViewBag.Id_ProductPackageCategory = new SelectList(db.ProductPackageCategories, "Id_ProductPackageCategory", "Name");
        return View();
    }

    //
    // POST: /Person/Create

    [HttpPost]
    public ActionResult Create(Person person)
    {
        if (ModelState.IsValid)
        {

            db.Persons.AddObject(person);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        ViewBag.Id_ProductPackageCategory = new SelectList(db.ProductPackageCategories, "Id_ProductPackageCategory", "Name", person.Id_ProductPackageCategory);
        return View(person);
    } 
```

我的部分观点：

```
@model BuSIMaterial.Models.PhoneCard

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Create</title>
</head>
<body>
    <script src="~/Scripts/jquery-1.7.1.min.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>

    @using (Html.BeginForm()) {
        @Html.ValidationSummary(true)

        <fieldset>
            <legend>PhoneCard</legend>

            <div class="editor-label">
                @Html.LabelFor(model => model.PhoneNumber)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.PhoneNumber)
                @Html.ValidationMessageFor(model => model.PhoneNumber)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.SimNumber)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.SimNumber)
                @Html.ValidationMessageFor(model => model.SimNumber)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.PIN)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.PIN)
                @Html.ValidationMessageFor(model => model.PIN)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.PIN2)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.PIN2)
                @Html.ValidationMessageFor(model => model.PIN2)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.PUK)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.PUK)
                @Html.ValidationMessageFor(model => model.PUK)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.PUK2)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.PUK2)
                @Html.ValidationMessageFor(model => model.PUK2)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.Id_Person, "Person")
            </div>
            <div class="editor-field">
                @Html.DropDownList("Id_Person", String.Empty)
                @Html.ValidationMessageFor(model => model.Id_Person)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.Id_PhoneSubscription, "PhoneSubscription")
            </div>
            <div class="editor-field">
                @Html.DropDownList("Id_PhoneSubscription", String.Empty)
                @Html.ValidationMessageFor(model => model.Id_PhoneSubscription)
            </div>
        </fieldset>
    }

</body>
</html> 
```

人物模型：

```
[EdmEntityTypeAttribute(NamespaceName="BuSIMaterialModel", Name="Person")]
[Serializable()]
[DataContractAttribute(IsReference=true)]
public partial class Person : EntityObject
{
    #region Factory Method

    /// <summary>
    /// Create a new Person object.
    /// </summary>
    /// <param name="id_Person">Initial value of the Id_Person property.</param>
    /// <param name="firstName">Initial value of the FirstName property.</param>
    /// <param name="lastName">Initial value of the LastName property.</param>
    /// <param name="numNat">Initial value of the NumNat property.</param>
    /// <param name="startDate">Initial value of the StartDate property.</param>
    /// <param name="upgrade">Initial value of the Upgrade property.</param>
    /// <param name="id_ProductPackageCategory">Initial value of the Id_ProductPackageCategory property.</param>
    /// <param name="houseToWorkKilometers">Initial value of the HouseToWorkKilometers property.</param>
    public static Person CreatePerson(global::System.Int64 id_Person, global::System.String firstName, global::System.String lastName, global::System.String numNat, global::System.DateTime startDate, global::System.Boolean upgrade, global::System.Int64 id_ProductPackageCategory, global::System.Decimal houseToWorkKilometers)
    {
        Person person = new Person();
        person.Id_Person = id_Person;
        person.FirstName = firstName;
        person.LastName = lastName;
        person.NumNat = numNat;
        person.StartDate = startDate;
        person.Upgrade = upgrade;
        person.Id_ProductPackageCategory = id_ProductPackageCategory;
        person.HouseToWorkKilometers = houseToWorkKilometers;
        return person;
    }

    #endregion
    #region Primitive Properties

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=true, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.Int64 Id_Person
    {
        get
        {
            return _Id_Person;
        }
        set
        {
            if (_Id_Person != value)
            {
                OnId_PersonChanging(value);
                ReportPropertyChanging("Id_Person");
                _Id_Person = StructuralObject.SetValidValue(value);
                ReportPropertyChanged("Id_Person");
                OnId_PersonChanged();
            }
        }
    }
    private global::System.Int64 _Id_Person;
    partial void OnId_PersonChanging(global::System.Int64 value);
    partial void OnId_PersonChanged();

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
    [DataMemberAttribute()]
    [Required]
    public global::System.String FirstName
    {
        get
        {
            return _FirstName;
        }
        set
        {
            OnFirstNameChanging(value);
            ReportPropertyChanging("FirstName");
            _FirstName = StructuralObject.SetValidValue(value, false);
            ReportPropertyChanged("FirstName");
            OnFirstNameChanged();
        }
    }
    private global::System.String _FirstName;
    partial void OnFirstNameChanging(global::System.String value);
    partial void OnFirstNameChanged();

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
    [DataMemberAttribute()]
    [Required]
    public global::System.String LastName
    {
        get
        {
            return _LastName;
        }
        set
        {
            OnLastNameChanging(value);
            ReportPropertyChanging("LastName");
            _LastName = StructuralObject.SetValidValue(value, false);
            ReportPropertyChanged("LastName");
            OnLastNameChanged();
        }
    }
    private global::System.String _LastName;
    partial void OnLastNameChanging(global::System.String value);
    partial void OnLastNameChanged();

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
    [DataMemberAttribute()]
    [Required]
    public global::System.String NumNat
    {
        get
        {
            return _NumNat;
        }
        set
        {
            OnNumNatChanging(value);
            ReportPropertyChanging("NumNat");
            _NumNat = StructuralObject.SetValidValue(value, false);
            ReportPropertyChanged("NumNat");
            OnNumNatChanged();
        }
    }
    private global::System.String _NumNat;
    partial void OnNumNatChanging(global::System.String value);
    partial void OnNumNatChanged();

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.DateTime StartDate
    {
        get
        {
            return _StartDate;
        }
        set
        {
            OnStartDateChanging(value);
            ReportPropertyChanging("StartDate");
            _StartDate = StructuralObject.SetValidValue(value);
            ReportPropertyChanged("StartDate");
            OnStartDateChanged();
        }
    }
    private global::System.DateTime _StartDate;
    partial void OnStartDateChanging(global::System.DateTime value);
    partial void OnStartDateChanged();

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
    [DataMemberAttribute()]
    public Nullable<global::System.DateTime> EndDate
    {
        get
        {
            return _EndDate;
        }
        set
        {
            OnEndDateChanging(value);
            ReportPropertyChanging("EndDate");
            _EndDate = StructuralObject.SetValidValue(value);
            ReportPropertyChanged("EndDate");
            OnEndDateChanged();
        }
    }
    private Nullable<global::System.DateTime> _EndDate;
    partial void OnEndDateChanging(Nullable<global::System.DateTime> value);
    partial void OnEndDateChanged();

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.Boolean Upgrade
    {
        get
        {
            return _Upgrade;
        }
        set
        {
            OnUpgradeChanging(value);
            ReportPropertyChanging("Upgrade");
            _Upgrade = StructuralObject.SetValidValue(value);
            ReportPropertyChanged("Upgrade");
            OnUpgradeChanged();
        }
    }
    private global::System.Boolean _Upgrade;
    partial void OnUpgradeChanging(global::System.Boolean value);
    partial void OnUpgradeChanged();

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
    [DataMemberAttribute()]
    [Required]
    public global::System.Int64 Id_ProductPackageCategory
    {
        get
        {
            return _Id_ProductPackageCategory;
        }
        set
        {
            OnId_ProductPackageCategoryChanging(value);
            ReportPropertyChanging("Id_ProductPackageCategory");
            _Id_ProductPackageCategory = StructuralObject.SetValidValue(value);
            ReportPropertyChanged("Id_ProductPackageCategory");
            OnId_ProductPackageCategoryChanged();
        }
    }
    private global::System.Int64 _Id_ProductPackageCategory;
    partial void OnId_ProductPackageCategoryChanging(global::System.Int64 value);
    partial void OnId_ProductPackageCategoryChanged();

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.Decimal HouseToWorkKilometers
    {
        get
        {
            return _HouseToWorkKilometers;
        }
        set
        {
            OnHouseToWorkKilometersChanging(value);
            ReportPropertyChanging("HouseToWorkKilometers");
            _HouseToWorkKilometers = StructuralObject.SetValidValue(value);
            ReportPropertyChanged("HouseToWorkKilometers");
            OnHouseToWorkKilometersChanged();
        }
    }
    private global::System.Decimal _HouseToWorkKilometers;
    partial void OnHouseToWorkKilometersChanging(global::System.Decimal value);
    partial void OnHouseToWorkKilometersChanged();

    #endregion

    #region Navigation Properties

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [XmlIgnoreAttribute()]
    [SoapIgnoreAttribute()]
    [DataMemberAttribute()]
    [EdmRelationshipNavigationPropertyAttribute("BuSIMaterialModel", "FK_bm_Persons_bm_ProductPackageCategories", "bm_ProductPackageCategories")]
    public ProductPackageCategory ProductPackageCategory
    {
        get
        {
            return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedReference<ProductPackageCategory>("BuSIMaterialModel.FK_bm_Persons_bm_ProductPackageCategories", "bm_ProductPackageCategories").Value;
        }
        set
        {
            ((IEntityWithRelationships)this).RelationshipManager.GetRelatedReference<ProductPackageCategory>("BuSIMaterialModel.FK_bm_Persons_bm_ProductPackageCategories", "bm_ProductPackageCategories").Value = value;
        }
    }
    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [BrowsableAttribute(false)]
    [DataMemberAttribute()]
    public EntityReference<ProductPackageCategory> ProductPackageCategoryReference
    {
        get
        {
            return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedReference<ProductPackageCategory>("BuSIMaterialModel.FK_bm_Persons_bm_ProductPackageCategories", "bm_ProductPackageCategories");
        }
        set
        {
            if ((value != null))
            {
                ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedReference<ProductPackageCategory>("BuSIMaterialModel.FK_bm_Persons_bm_ProductPackageCategories", "bm_ProductPackageCategories", value);
            }
        }
    }

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [XmlIgnoreAttribute()]
    [SoapIgnoreAttribute()]
    [DataMemberAttribute()]
    [EdmRelationshipNavigationPropertyAttribute("BuSIMaterialModel", "FK_bm_PhoneCards_bm_Persons", "bm_PhoneCards")]
    public EntityCollection<PhoneCard> PhoneCards
    {
        get
        {
            return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedCollection<PhoneCard>("BuSIMaterialModel.FK_bm_PhoneCards_bm_Persons", "bm_PhoneCards");
        }
        set
        {
            if ((value != null))
            {
                ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedCollection<PhoneCard>("BuSIMaterialModel.FK_bm_PhoneCards_bm_Persons", "bm_PhoneCards", value);
            }
        }
    }

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [XmlIgnoreAttribute()]
    [SoapIgnoreAttribute()]
    [DataMemberAttribute()]
    [EdmRelationshipNavigationPropertyAttribute("BuSIMaterialModel", "FK_bm_ProductAllocations_bm_Persons", "bm_ProductAllocations")]
    public EntityCollection<ProductAllocation> ProductAllocations
    {
        get
        {
            return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedCollection<ProductAllocation>("BuSIMaterialModel.FK_bm_ProductAllocations_bm_Persons", "bm_ProductAllocations");
        }
        set
        {
            if ((value != null))
            {
                ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedCollection<ProductAllocation>("BuSIMaterialModel.FK_bm_ProductAllocations_bm_Persons", "bm_ProductAllocations", value);
            }
        }
    }

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [XmlIgnoreAttribute()]
    [SoapIgnoreAttribute()]
    [DataMemberAttribute()]
    [EdmRelationshipNavigationPropertyAttribute("BuSIMaterialModel", "FK_bm_VehicleFuelCards_bm_Persons", "bm_VehicleFuelCards")]
    public EntityCollection<VehicleFuelCard> VehicleFuelCards
    {
        get
        {
            return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedCollection<VehicleFuelCard>("BuSIMaterialModel.FK_bm_VehicleFuelCards_bm_Persons", "bm_VehicleFuelCards");
        }
        set
        {
            if ((value != null))
            {
                ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedCollection<VehicleFuelCard>("BuSIMaterialModel.FK_bm_VehicleFuelCards_bm_Persons", "bm_VehicleFuelCards", value);
            }
        }
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:04:27.657

您的`Person`模型有一个集合属性`PhoneCards`，该属性在您的 Post 操作中始终为 null，因为您不尊重[`naming convention for binding to a list`](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx). 另外，您`PhoneCard.cshtml`的视图不是局部视图，而是完整视图（它包含错误`<html>`的`<body>`标签）。

我真的会向您推荐[`following article`](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)Steven Sanderson 在其中详细解释了如何实现这一目标。它使用自定义`Html.BeginCollectionItem`助手来在输入字段的名称中生成非顺序索引，从而允许动态添加和删除行。

# google-maps - OpenLayers 上的 Google 路线

> ID：15160185
> 
> 赞同：1
> 
> 时间：2013-03-01T14:33:39.627
> 
> 标签：google-maps, openlayers, map-directions

我是 OpenLayers 的忠实粉丝。我在这里唯一缺少的是方向。

由于谷歌地图支持方向，我想将这些与 OpenLayers 集成。

是否可以使用 google maps api 获取从 A 点到 B 点的方向（支持航点？），然后显示在我的地图上（作为额外的矢量图层？）？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-01T18:11:15.187

谷歌地图不支持路线。您必须使用 Google Directions API 来获取方向说明。至于在谷歌地图上显示方向，是可以做到的。前往这篇文章

[第一篇文章](https://stackoverflow.com/questions/14554078/is-there-a-way-to-show-road-directions-in-google-map-api-v2)

或者：

[第二个帖子](https://stackoverflow.com/questions/14495030/google-map-api-v2-get-driving-directions/15053901#15053901)

阅读更多。

# newline - 相当于 \n 的飞镖

> ID：15160186
> 
> 赞同：8
> 
> 时间：2013-03-01T14:33:40.763
> 
> 标签：newline, dart

是否有相当于 C++ 的“\n”的 Dart？

在以下示例中：

```
for(int j=0;j<readLines.length;j++)
{
    outputFile.writeAsStringSync(readLines[j], mode: FileMode.APPEND);
} 
```

我想将“readLines [j]”中的文本放在单独的行中。怎么可能做到这一点？

例如：

readLines 是一个字符串列表，它包含：“嘿，我的名字是 Cheshie”和“感谢大家帮忙”。

在上面的代码中，我试图将列表的内容写入一个文件，使用“outputFile”，我希望它写成如下：

*嘿，我叫切西*

*谢谢你们试图帮助*

也就是说，每个 readLines[j] 都应该写在单独的行中。

谢谢。

编码：

```
import 'dart:io';

void func (String foldername)
{
  Directory thisFolder = new Directory (foldername);

  List<File> files = thisFolder.listSync(recursive:false);
  int number=1;
  String oldContent='';
  String newContent='';
  String concatenate='';
  String name='';
  int nameStart;
  int nameLength;
  for (int i=0; i<files.length; i++)
  {
    if (files[i].name.endsWith('.in'))
    {
      oldContent=files[i].readAsStringSync(Encoding.UTF_8);
      newContent=number.toString();

      var Strings=[newContent, oldContent];
      concatenate=Strings.join();

      files[i].writeAsStringSync(concatenate);
      number++;
    } 
```

// =====================***这里开始相关部分***==================

```
 nameLength=files[i].name.length;
    nameStart=files[i].name.lastIndexOf('\\', nameLength);
    name=files[i].name.slice(nameStart+1, nameLength);
    if (name.compareTo('hello.in')==0)
    {
      File outputFile=new File('hello.out');
      if (outputFile.existsSync())
      {
        outputFile.deleteSync();
      }
      outputFile.createSync();
      List<String> readLines=files[i].readAsLinesSync(Encoding.UTF_8);
      for(int j=0;j<readLines.length;j++)
      {
        outputFile.writeAsStringSync('$readLines[j]\n', mode: FileMode.APPEND); 
        //outputFile.writeAsStringSync('\n', mode: FileMode.APPEND); 
        //  TODO:   figure out how to get to the next line.

        if (readLines[j].contains('you'))
          print(readLines[j]);
      }
    }
  }
}

void main ()
{
  func('In files');
  print('the end!');
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T14:38:51.680

`\n`不是特定于 C++ 的，您可以在将其写入文件之前将其添加到字符串的末尾。所以，使用类似的东西

```
outputFile.writeAsStringSync('${readLines[j]}\n', mode: FileMode.APPEND); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-05-12T10:18:44.980

在当前版本中它可以工作。

```
void main() {
  print('word\nsecondword');
} 
```

安慰：

```
word
secondword 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T04:36:26.350

的内容是`readLines[j]`什么？一堆字？

假设是这样的：

```
var readLines = [
  'Dart is fun',
  'It is easy to learn'
]; 
```

并假设您要输出以下内容：

```
Dart
is
fun
It
is
easy
to
learn 
```

尝试这个：

```
for (String line in readLines) {
  String split = line.replaceAll(new RegExp(r'\s+'), '\n');
  outputFile.writeAsStringSync(split, mode: FileMode.APPEND);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-25T17:49:31.517

它不适用于 Windows，因为您使用的只是`\n`换行 (LF) 字符。要在 Windows 中获取新行，您需要使用`\r\n`回车 + 换行 (CRLF)。

有关这方面的更多信息，请查看[https://en.wikipedia.org/wiki/Newline#Representation](https://en.wikipedia.org/wiki/Newline#Representation)

我已经看到了 Windows 10 和旧版本之间的一些差异。我不知道这是否与 Windows 本身或 Dart 为每个版本编译的方式有关。它需要更多的调试才能理解......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-31T15:39:21.370

以下行对我有用：

```
file.writeAsStringSync('$data\r', mode: FileMode.append); 
```

这`data`是您必须编写的字符串，`\r`并将光标移动到下一行。

# javascript - 提取所有使用的 javascript 变量

> ID：15160193
> 
> 赞同：0
> 
> 时间：2013-03-01T14:33:51.780
> 
> 标签：javascript

我在全局范围内定义了一个名为`global`. 我想动态地在我的变量 global 下找到所有引用的属性。也就是说，在代码执行期间*访问的所有属性。*

我想做静态代码分析以提取变量下的所有引用属性。我可以搜索这些模式：global.PROPERTY_NAME AND global[PROPERTY_NAM]。但是，像这些复杂的情况呢？

```
var tmp="PROPERTY_NAME";
global[tmp] 
```

或者

```
var tmp=global;
tmp.PROPERTY_NAME 
```

和其他的？

**我不想获取所有变量的属性。我只想要一个引用的列表！仅在我的源代码中引用的属性**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:36:06.940

编辑后：

您正在寻找的是 JavaScript[代理](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Proxy)对象。这是有关如何使用它们执行此操作[的教程。](http://www.kevinwestern.org/blog/2012/11/07/ecmascript-6-a-quick-look-at-proxies/)

代理对象使您可以包装对象并在访问其属性时执行方法。不幸的是，就目前而言，它们**并未**得到广泛支持。

这是目前在 JavaScript 中唯一能在不更改原始`global`对象的情况下完成此操作的方法。

您可以通过在 about:flags 选项卡中启用实验性 JavaScript 在 Chrome 中打开它们。

**在您编辑之前：**

您正在寻找的功能称为[反射](http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29)，JavaScript 原生支持它

这是一些遍历对象并获取其属性的代码

```
for(var prop in global){
    if(global.hasOwnProperty(prop)){ //this is to only get its properties and not its prototype's
        alert(prop+" => "+global[prop]);
    }
} 
```

这是相当跨浏览器的。更现代的浏览器允许您以更简单的方式执行此操作，例如[Object.keys(global)](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)返回包含其所有可枚举属性的数组，或[Object.getOwnPropertyNames(global)](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames)返回可枚举和不可枚举属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:53:03.137

由于 JavaScript 的动态特性，您无法通过静态代码分析来实现。想想这样的案例：

```
var prop = document.getElementById('prop').value;
global[prop]; 
```

不可能的。另一种选择是动态分析，这意味着您修改全局对象以记录对其属性的访问，然后运行代码。这在 JavaScript 中很容易实现，但它也对您没有帮助，因为您如何确保您已经涵盖了所有可能的访问？尤其是在 5 MB JavaScript 中，您很可能会监督一些边缘情况。

所以，如果你不能缩小你的要求，那是不可能的。

# ember.js - Ember.js：如何保持多对多关系

> ID：15160195
> 
> 赞同：1
> 
> 时间：2013-03-01T14:34:05.477
> 
> 标签：ember.js, ember-data

我正在构建一个 Ember.js 应用程序，它允许 2 个实体之间的多对多关系，例如 Post 和 Tag：

```
App.Post = DS.Model.extend({
    title: DS.attr("string"),
    body: DS.attr("string"),
    tags: DS.hasMany("App.Tag")
});

App.Tag = DS.Model.extend({
    name: DS.attr("string"),
    posts: DS.hasMany("App.Post")
}); 
```

在持久化新记录时，我很难让 Ember 序列化多对多关系。这就是我目前的做法：

```
// Create the post
post = store.createRecord(App.Post, {title: "Example", body: "Lorem ipsum..."});

// Create the tag
tag = store.createRecord(App.Tag, {name: "my-tag"});

// Add the tag to the post
post.get("tags").addObject(tag);

// Add the post to the tag
tag.get("posts").addObject(post);

// Save
store.commit(); 
```

新记录显示在 DOM 中，并发布到我的 API，但是序列化不包括它们之间的关系。例如，帖子的序列化如下所示：

```
title=Example&body=Lorem+ipsum... 
```

我希望它还包括与之关联的标签。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:01:45.457

默认情况下，如果您将关系配置为嵌入到序列化程序中，`hasMany`则关系只会序列化为 JSON 中的数组。`_ids`请查看[此答案](https://stackoverflow.com/questions/15138219/ember-data-saving-a-relationship/15145803#15145803)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T19:52:35.657

您可以通过覆盖序列化程序来使用 Ember Data 1.0.0：http: [//mozmonkey.com/2013/12/serializing-embedded-relationships-ember-data-beta/](http://mozmonkey.com/2013/12/serializing-embedded-relationships-ember-data-beta/)

# security - 如何确保我网站的 2 个用户之间的顺利交易

> ID：15160196
> 
> 赞同：0
> 
> 时间：2013-03-01T14:34:08.127
> 
> 标签：security, e-commerce

首先，我不确定这是否适合此类问题，所以如果有人想指出我更好的方向，请不要犹豫！

我目前正在开发一个允许用户在彼此之间交易真实物理对象的网站。例如，用户 1 向用户 2 交易了一枚稀有的收藏硬币，用户 2 又发送了另一枚他拥有双倍的收藏硬币。

对我来说，确保双方都得到他们的硬币，而没有任何人被骗的最安全的方法是什么？

我已经想到我会使用 Paypal API 来检查“已验证地址”。目前，我无法同时接收包裹并“重新运送”它们。我在考虑可能在两张信用卡上都保留一笔金额，直到双方都确认交货，但我想有人可以收到一个包裹并说他从未收到过。

编辑：如果我强迫他们使用运输方式并打印我在他们都同意进行交易时创建的“运输标签”，这对用户来说会不会太麻烦？这样，它将迫使他们使用签名运输方式。

非常欢迎所有想法！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:07:53.153

There really is not a 100% way to avoid a scam as a buyer can always come back and say they did not receive the item, it was damaged, not as described, file a dispute/chargeback or etc. However PayPal does have buyer and seller protections that come into play as well that help to protect buyers from such things. Plus PayPal's fraud filters and screenings some of the best in the industry.

# php - 从 file_get_contents 获取特定文本

> ID：15160199
> 
> 赞同：-2
> 
> 时间：2013-03-01T14:34:12.173
> 
> 标签：php, codeigniter, data-binding, fetch

我有一个文件，我在其中保存消息和用户名现在我想分别获取消息和名称我该怎么做我的代码是

```
 $name  =   $this->session->userdata('name');
 $msg = isset($_GET['msg']) ? $_GET['msg'] : '';
 file_put_contents($filename,$msg.$name); 
```

现在我想获取不同变量的数据

```
$response['msg']       = file_get_contents($filename,$name);
$response['name']       =   file_get_contents($filename,$msg); 
```

bt 它没有提供所需的数据...任何人都知道如何获得感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:39:14.740

我希望你正在清理你的输入，但无论如何：

您可以使用一些分隔符，即：

```
file_put_contents($file, implode(';', array($msg, $name))); 
```

和阅读：

```
$response = explode(';', file_get_contents($filename)); 
```

`$response[0]`是你的味精，`$response[1]`是你的名字。

您需要确保您的分隔符不会出现在消息或名称中。您可以为此使用正则表达式。

# c# - 如何在实体框架中实现 IDisposable？

> ID：15160200
> 
> 赞同：2
> 
> 时间：2013-03-01T14:34:14.050
> 
> 标签：c#, entity-framework, implementation, idisposable

我在一个单独的 EL 层中有我的实体框架上下文，它代表实体层，然后我移动到 DAL，然后是 BL 和我的用户接口 aspx.cs 代码页。我很困惑如何在相同的情况下使用 IDisposable。到目前为止，我在做什么，假设在我的 DAL 中我有我的实体的上下文。

```
namespace abc
{
    public class Action: IDisposable
    {
        Entities context = new Entities();
        // all the methods

        public void Dispose()
        {
            context.Dispose();
        }
    }
} 
```

这是正确的做法吗？我只是一个天真的程序员，所以请帮助我学习相同的逻辑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:45:58.200

`IDisposable`就个人而言，我会对其进行一些更改，例如：尽管我在实体框架内实现的经验很少。

```
namespace abc
{
    public class Action: IDisposable
    {
        private bool _disposed;

        Entities context= new Entities();
        // all the methods

        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);
        }

        protected virtual void Dispose(bool disposing)
        {
            if (!_disposed)
            {
                if (disposing)
                {
                    context.Dispose();
                    // Dispose other managed resources.
                }
                //release unmanaged resources.
            }
            _disposed = true;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T14:41:31.857

总的来说，是的，您的`Dispose`方法应该处理所有实现的资源`IDisposable`以及非托管资源（文件等）

但是，将 EF 上下文作为*资源*保留通常不是一个好的设计。如果您在方法中创建一个并在完成后将其处理掉，您可能会获得更好的`Context`成功`Action`。`IDisposable` *然后，如果这是您唯一的资源，则根本*不需要实施.

# android - 在android中通过gps显示当前位置

> ID：15160205
> 
> 赞同：1
> 
> 时间：2013-03-01T14:34:33.773
> 
> 标签：android, google-maps, gps

我正在开发一个应用程序，它应该在 Android 上显示设备的当前位置。`google maps`问题是我没有得到设备的确切或附近位置。

我有课：

```
public class GPSLocatorActivity extends MapActivity {
    private MapView mapView;
    private MapController mapController;

    private LocationManager locationManager;
    private LocationListener locationListener;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);    

        locationListener = new GPSLocationListener();

        locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, 
            0, 
            0, 
            locationListener);

        mapView = (MapView) findViewById(R.id.mapView);

        // enable Street view by default
//        mapView.setStreetView(true);

        // enable to show Satellite view
        mapView.setSatellite(true);

        // enable to show Traffic on map
         mapView.setTraffic(true);
        mapView.setBuiltInZoomControls(true);

//        myLocationOverlay=new MyLocationOverlay(this,mapView);
        mapController = mapView.getController();
        mapController.setZoom(16); 
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    private class GPSLocationListener implements LocationListener 
    {
        @Override
        public void onLocationChanged(Location location) {
            if (location != null) {
                GeoPoint point = new GeoPoint(
                        (int) (location.getLatitude() * 1E6), 
                        (int) (location.getLongitude() * 1E6));

                /* Toast.makeText(getBaseContext(), 
                        "Latitude: " + location.getLatitude() + 
                        " Longitude: " + location.getLongitude(), 
                        Toast.LENGTH_SHORT).show();*/

                mapController.animateTo(point);
                mapController.setZoom(16);

                // add marker
                MapOverlay mapOverlay = new MapOverlay();
                mapOverlay.setPointToDraw(point);
                List<Overlay> listOfOverlays = mapView.getOverlays();
                listOfOverlays.clear();
                listOfOverlays.add(mapOverlay);

                String address = ConvertPointToLocation(point);
                Toast.makeText(getBaseContext(), address, Toast.LENGTH_SHORT).show();

                mapView.invalidate();
            }
        }

        public String ConvertPointToLocation(GeoPoint point) {   
            String address = "";
            Geocoder geoCoder = new Geocoder(
                    getBaseContext(), Locale.getDefault());
            try {
                List<Address> addresses = geoCoder.getFromLocation(
                    point.getLatitudeE6()  / 1E6, 
                    point.getLongitudeE6() / 1E6, 1);

                if (addresses.size() > 0) {
                    for (int index = 0; index < addresses.get(0).getMaxAddressLineIndex(); index++)
                        address += addresses.get(0).getAddressLine(index) + " ";
                }
            }
            catch (IOException e) {                
                e.printStackTrace();
            }   

            return address;
        } 

        @Override
        public void onProviderDisabled(String provider) {
        }

        @Override
        public void onProviderEnabled(String provider) {
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    }

    class MapOverlay extends Overlay
    {
        private GeoPoint pointToDraw;

        public void setPointToDraw(GeoPoint point) {
            pointToDraw = point;
        }

        public GeoPoint getPointToDraw() {
            return pointToDraw;
        }

        @Override
        public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
            super.draw(canvas, mapView, shadow);                   

            // convert point to pixels
            Point screenPts = new Point();

  mapView.getProjection().toPixels(pointToDraw, screenPts);

        // add marker
        Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.red);
        canvas.drawBitmap(bmp, screenPts.x, screenPts.y - 24, null); // 24 is the height of image        
        return true;
    }
    } 
} 
```

我在 Mainfest 文件中添加了权限：

```
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />    
    <uses-permission android:name="android.permission.INTERNET" /> 
```

我添加了权限，并为地图使用了精确的 Google Api 密钥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:53:24.123

你这样试过吗。。

使用它，您可以获得当前位置的纬度和经度。然后传递值以获取地图。

```
 public class MyLocationListener implements LocationListener

{

@Override

public void onLocationChanged(Location loc)

{

loc.getLatitude();

loc.getLongitude();

String Text = “My current location is: “ +

“Latitud = “ + loc.getLatitude() +

“Longitud = “ + loc.getLongitude();

Toast.makeText( getApplicationContext(),

Text,

Toast.LENGTH_SHORT).show();

}

@Override

public void onProviderDisabled(String provider)

{

Toast.makeText( getApplicationContext(),

“Gps Disabled”,

Toast.LENGTH_SHORT ).show();

}

@Override

public void onProviderEnabled(String provider)

{

Toast.makeText( getApplicationContext(),

“Gps Enabled”,

Toast.LENGTH_SHORT).show();

}

@Override

public void onStatusChanged(String provider, int status, Bundle extras)

{

}

}

} 
```

示例链接；；

[链接1](http://wptrafficanalyzer.in/blog/showing-current-location-in-google-maps-with-gps-and-locationmanager-in-android/)

[链接2](http://android-er.blogspot.in/2009/11/mapview-to-center-on-current-location.html)

[链接3](http://www.hrupin.com/2011/04/android-gps-using-how-to-get-current-location-example)

[链接4](http://wowjava.wordpress.com/2011/02/25/geting-current-location-in-android-using-gps/)

# sql - 如何在 PostgreSQL 中为日期添加可变小时数？

> ID：15160207
> 
> 赞同：57
> 
> 时间：2013-03-01T14:34:37.023
> 
> 标签：sql, postgresql, datetime

[显然](http://wiki.postgresql.org/wiki/Working_with_Dates_and_Times_in_PostgreSQL)，PostgreSQL 没有`DATEADD`，因为您可以只使用`+`or`-`运算符。

我需要在日期上添加几个小时，这是这样完成的：

```
date_field + interval '8.25 hour' 
```

这很好，但我需要从表中的字段来的小时数。会是这样的：

```
date_field + interval start_time 'hour' 
```

我在任何地方都找不到如何做到这一点。这真的不可能吗？

我不介意诉诸丑陋的技巧，例如取字段值并除以 3600，乘以 86400。无论我需要做什么，但我也没有找到任何方法来做到这一点。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-03-01T16:00:36.103

既然你想添加*hours*，它应该是：

```
SELECT date_field + interval '1 hour' * start_time 
```

`start_time`可以是任何数值。
`'1 hour'`可以缩短为`'1h'`。
[`interval`可以乘以一个标量。](https://www.postgresql.org/docs/current/functions-datetime.html#OPERATORS-DATETIME-TABLE)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-01T14:40:43.087

[在另一个 SO 问题中](https://stackoverflow.com/questions/10909902/how-to-add-number-of-days-in-postgresql-datetime)找到了答案：

```
date + interval '1' minute * FLOOR(start_time * 60) 
```

希望对任何人都有帮助

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-09-19T21:56:22.543

为我工作的是

```
SELECT date_field + interval '1' HOUR * start_time 
```

**start_time**可以是任何数值。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-05-02T07:22:44.253

如果有人想添加时间戳，那么

```
select time '05:00' - interval '2 hours' 
```

# c# - 如何让 XElement.ToString() 在自闭合斜杠之前省略空格？

> ID：15160208
> 
> 赞同：1
> 
> 时间：2013-03-01T14:34:40.443
> 
> 标签：c#, .net, formatting, xelement

默认情况下，自闭合标签`ToString()`由`XElement`以下方式编辑：

```
<element />

<element attrib="value" /> 
```

但是，我希望它没有额外的空间，即

```
<element/>

<element attrib="value"/> 
```

`XElement`API可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:42:10.640

我想我会做一个字符串替换，将替换`" />"`为`"/>"`.

# .net - 为什么 SaveChanges 不检测实体的更改？

> ID：15160211
> 
> 赞同：1
> 
> 时间：2013-03-01T14:34:45.840
> 
> 标签：.net, entity-framework, ef-code-first

我有一个 .Net Mvc 项目，我的 Databasecontext 有问题。更具体的更新/保存更改。当我在方法（如下）中使用调试点调试代码时，它可以正常工作，但并非没有调试点。我不明白为什么？不知何故，SaveChanges 没有检测到实体的更改。

```
var user = DatabaseContext.Users.Single(u => u.Id == userId && u.Newsdesk.Id == newsdeskId);
user.Newsdesk = null;
DatabaseContext.Update(user);
DatabaseContext.SaveChanges(); 
```

我在 DatabaseContext 中的更新方法如下所示：

```
public T Update<T>(T entity) where T : class
    {
        var set = Set<T>().Attach(entity);
        Entry(entity).State = EntityState.Modified;
        return set;
    } 
```

如果有人能指出我正确的方向，我将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:47:00.117

快进快出（这就是甘道夫在一部电影中所说的...... :)*我认为*）。

我的意思是，如果某个虔诚的观察者坐在 CPU 中看着你的应用程序，他们应该看到的是你的应用程序运行以下顺序

*{ 连接、创建上下文、进行更改、提交、销毁上下文、断开连接}*

对于（几乎）它收到的每个 Web 请求，在几十毫秒内。

您实际上是在创建一个全局存在于整个应用程序中的上下文（实体容器 + 工作单元）吗？

我会推荐一种更经典且对 dbconnection 不太友好的方法（更不用说经过事务处理了）：

```
using (var context = DataContextHelper.CreateContext()) {
    var user = DataContextHelper.QueryAndSingleByLambdaBasedOnContext(
        context,
        u => u.Id == userId && u.Newsdesk.Id == newsdeskId
    );
    if (null == user)
       // complain somehow (by exception or special return value)
    user.Newsdesk = null;

    // don't mark it anymore, in the straight-forward, good'ol way
    // user will already have been marked 
    //DatabaseContext.Update(user);

    context.SaveChanges();
} 
```

以某种方式托管一个全局可访问的上下文通常是不好的（特别是如果你不小心的话），多个线程可以同时使用。

我不是在谈论访问某些属性时的并发风险。我说的是大局（也许另一个请求读取了用户并将其标记为“未修改”在您`Update`和之间的某处`SaveChanges`）。

如果不是这种情况，则不必担心与数据库的并发连接。对上下文的并发访问更难管理。

# entity-framework - EF Code First Fluent API - 所有列的首字母小写

> ID：15160212
> 
> 赞同：3
> 
> 时间：2013-03-01T14:34:53.690
> 
> 标签：entity-framework, ef-code-first

我希望建立一个 EF Code First 约定，其中属性的所有列名都有一个小写的第一个字母。

但是，我有其他流畅的 API 代码可以更改默认的列名。我似乎找不到一种方法来访问属性的*当前*列名以小写第一个字母。从 PropertyInfo 开始，如在 modelBuilder.Properties() 中是不够的，因为列名可能已经设置为与成员名不同。

我一般如何告诉 EF Code First 将所有列名的第一个字母小写？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T21:09:16.097

好的，DBA 正在发言。让我们恭敬地低下头，看看我们能做些什么。恐怕在 EF 5（及更低版本）中，您可以做的事情并不多。在 EF 6 中，[自定义代码优先约定](http://msdn.microsoft.com/en-us/data/jj819164.aspx)的这一特性实际上使它变得轻而易举。我只是尝试了一个小样本：

```
// Just some POCO
class Person
{
  public int PersonId { get; set; }
  public string PersonName { get; set; }
}

// A custom convention.
class FirstCharLowerCaseConvention : IStoreModelConvention<EdmProperty>
{
    public void Apply(EdmProperty property, DbModel model)
    {
        property.Name = property.Name.Substring(0, 1).ToLower()
                      + property.Name.Substring(1);
    }
}

class MyContext : DbContext
{
  protected override void OnModelCreating(DbModelBuilder modelBuilder)
  {
    modelBuilder.Entity<Person>();

    // Add the convention to the modelbuilder.
    modelBuilder.Conventions.Add(new FirstCharLowerCaseConvention());

    base.OnModelCreating(modelBuilder);
  }
} 
```

运行后

```
using (var db = new MyContext())
{
  db.Database.Create();
} 
```

我的数据库有一个`People`带有`personId`and的表`personName`。

一些简单的 CRUD 操作可以完美运行：

```
using (var db = new MyContext())
{
    var p = new Person { PersonName = "Another Geek" };
    db.Set<Person>().Add(p);
    db.SaveChanges();
}

using (var db = new MyContext())
{
    var x = db.Set<Person>().ToList();
} 
```

因此，如果 DBA 想要他们的约定，您可以要求一个新玩具 :)

# ios - 如何创建带有红色角的 UILabel？

> ID：15160215
> 
> 赞同：1
> 
> 时间：2013-03-01T14:35:03.640
> 
> 标签：ios, uiview, uilabel, drawrect

我的目标是创建一个`UILabel`左上角为红色的（一个边长为 10-15 点的可见三角形）。我该怎么做？

我尝试子类化`UILabel`和覆盖`drawRect`，但没有成功。`label.text`如果我不覆盖，我不仅没有得到任何红角，而且还丢失了显示的红角`drawRect`。

```
-(void) drawRect: (CGRect) rect
{

CGContextRef ctx = UIGraphicsGetCurrentContext();
CGContextBeginPath(ctx);
CGContextMoveToPoint(ctx,0,0);
CGContextMoveToPoint(ctx,10,0);
CGContextMoveToPoint(ctx,0,10);
CGContextClosePath(ctx);
CGContextSetRGBFillColor(ctx,50,0,0,1);
CGContextFillPath(ctx);

} 
```

谢谢！

尼古拉

Ps 我想添加我想要创建的标签的图像，但我需要至少 10 点的声誉才能添加它:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:40:01.767

与往常一样，阅读您正在使用的函数的文档就足够了。你做了假设，结果证明是错误的（不足为奇）。

该`CGContextMoveToPoint()`函数开始一个新的子路径**而不绘制。**如果你想画一条线，那么……好吧……使用*画线的函数：*

```
CGPoint points[] = {
    CGPointMake(0, 0),
    CGPointMake(10, 0),
    CGPointMake(0, 10),
    CGPointMake(0, 0)
};
CGContextAddLines(ctx, points, sizeof(points) / sizeof(points[0])); 
```

# java - 如何更新文本视图以显示在 android 中选择的复选框的数量？

> ID：15160217
> 
> 赞同：-4
> 
> 时间：2013-03-01T14:35:07.587
> 
> 标签：java, android, checkbox, textview

在单击活动中的按钮后，我设法检索了选中的复选框的数量，但是我希望能够更新活动中的文本视图以向用户显示所选项目的数量。

我该怎么做？

到目前为止，这是我的代码（在扩展 BaseAdapter 的 listadapter 中）：

* * *

```
private ArrayList<Compare> selectedComparePlaces = new ArrayList<Compare>();
private int numSelected;
...

// in the getView method
TextView tv = (TextView) convertView.findViewById(R.id.compareSubheading);
CheckBox cb = (CheckBox) convertView.findViewById(R.id.compareCheckbox);
cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

   @Override
   public void onCheckedChanged(CompoundButton arg0, boolean isChecked) {
       if(isChecked) {
           numSelected++;
           selectedComparePlaces.add(compareList.get(position));
           // should update the textview to say "[numberselected]/2 selected"
           // tv.setText(numSelected + "/2 selected");
   } else {
       numSelected--;
       selectedComparePlaces.remove(compareList.get(position));
       // should update the textview to say "[numberselected]/2 selected"
       // tv.setText(numSelected + "/2 selected");
   }
}               
}); 
```

我试过使用： tv.setText(String.valueOf(numSelected) + "/2 selected");

但是这两次尝试都在 tv.setText 行上给了我一个 nullPointerException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:38:36.323

只需使用 TextView 功能：

```
TextView myTextView = (TextView) findViewById(R.id.MyTextViewId);
myTextView.setText(String.valueOf(myNumber)); 
```

你能告诉我们你的代码吗？你需要在这里投

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:40:15.850

使用以下代码

```
 textview.setText( "" + count ): 
```

# timeout - 码头 9 RC2 websocket 超时

> ID：15160222
> 
> 赞同：2
> 
> 时间：2013-03-01T14:35:22.980
> 
> 标签：timeout, websocket, jetty

请参阅[https://stackoverflow.com/questions/41810306/appointment-scheduling](https://stackoverflow.com/questions/41810306/appointment-scheduling) ...。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T16:09:40.870

最近添加了对 Sesssion.setIdleTimeout(long ms) 的支持，以支持我们目前正在进行的 JSR-356 (javax.websocket) 工作。

但是，使用 9.0.0.RC2，您可以在创建 Session 之前执行以下操作以提前设置空闲超时（这个问题正在修复，希望能进入 RC3）

**服务器端选项 A：WebSocketServlet init-param**

在您`WEB-INF/web.xml`的 websocket servlet 中，指定以下 init-param

```
<init-param>
  <param-name>maxIdleTime</param-name>
  <param-value>10000</param-value>
</init-param> 
```

**服务器端选项 B：随着 WebSocketFactory 的策略更改**

在您的 WebSocketServlet.configure(WebSocketServletFactory factory) 调用中

```
@Override
public void configure(WebSocketServletFactory factory)
{
    factory.getPolicy().setIdleTimeout(10000);
} 
```

**客户端选项 A：作为 WebSocketClient 设置**

```
WebSocketClient client = new WebSocketClient();
client.getPolicy().setIdleTimeout(10000);
client.start(); 
```

**带注释的@WebSocket 选项**

这将适用于服务器或客户端 websocket。

注意：您不能将 WebSocketListener 和 @WebSocket 注释混合在一起

```
import org.eclipse.jetty.websocket.api.Session;
import org.eclipse.jetty.websocket.api.annotations.OnWebSocketClose;
import org.eclipse.jetty.websocket.api.annotations.OnWebSocketConnect;
import org.eclipse.jetty.websocket.api.annotations.OnWebSocketError;
import org.eclipse.jetty.websocket.api.annotations.OnWebSocketMessage;
import org.eclipse.jetty.websocket.api.annotations.WebSocket;

@WebSocket(maxIdleTime=10000)
public class MySocket
{
    @OnWebSocketClose
    public void onClose(int statusCode, String reason)
    {
    }

    @OnWebSocketConnect
    public void onConnect(Session sess)
    {
    }

    @OnWebSocketError
    public void onError(Throwable cause)
    {
    }

    @OnWebSocketMessage
    public void onText(String message)
    {
    }
} 
```

# jquery-ui - jQuery UI 选项卡持久性 (coffeescript)

> ID：15160229
> 
> 赞同：0
> 
> 时间：2013-03-01T14:35:34.697
> 
> 标签：jquery-ui, coffeescript, jquery-ui-tabs

我有一个带有一些 jQuery UI 选项卡的 Rails 3 应用程序来显示已发布和未发布的故事。这是erb模板：

```
<ul class="tabs">
  <li><strong>Filter:</strong></li>
  <li class="active"><%= link_to 'Published', '#published_stories' %></li>
  <li><%= link_to 'Unpublished', '#unpublished_stories' %></li>
</ul>

<div id="published_stories">
  <% @published_stories.each do |published_story| %>
    <article class="story_article">
      <h2><%= published_story.title %></h2>

      <ul>
        <li><%= link_to "Update", edit_story_path(published_story) %></li>
        <li><%= link_to "Destroy", story_path(published_story), method: "delete", confirm: "Are you sure?" %></li>
      </ul>

      <%= time_tag published_story.published_at, pubdate: true %>
      <%= markdown published_story.content.truncate(400, separator: " ") %>
    </article>

    <%= paginate @published_stories %>
  <% end %>
</div>

<div id="unpublished_stories">
  # As above to show unpublished stories
</div> 
```

我正在听 li 元素上的 click 事件来设置活动选项卡的样式。现在我想使用`jquery.cookie.js`，以便在页面刷新后之前选择的选项卡仍然存在。这是我已经拥有的：

```
jQuery ->
  $(".tab_container").tabs(
    active : ($.cookie('saved_tab') || 0),
      activate : -> (event ui)
      newIndex = ui.newTab.parent().children().index(ui.newTab)
      $.cookie('saved_tab', newIndex, { expires: 1 })
  )

  $(".tabs li").click ->
    $(this).addClass("active").siblings().removeClass("active") 
```

我得到的错误信息是它找不到变量 ui。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:05:37.510

我可以在您的 CoffeeScript 中看到一些不正确的东西。

首先，函数定义如下：

```
(arg, arg, ...) -> function_body 
```

在 CoffeeScript 所以你想说`activate: (event, ui) -> ...`。你`-> (event ui)`的解释为：

```
-> event(ui) 
```

这没有多大意义。

其次，你必须非常小心你在 CoffeeScript 中的缩进，缩进几乎是你定义代码结构的全部，所以你必须非常小心。当你这样说时：

```
 activate : -> (event ui)
  newIndex = ui.newTab.parent().children().index(ui.newTab)
  $.cookie('saved_tab', newIndex, { expires: 1 }) 
```

CoffeeScript 不会将`newIndex`赋值或`$.cookie`调用视为`activate`方法的一部分，CoffeeScript 会看到三个独立且不相关的语句。

应用上述给我们：

```
$(".tab_container").tabs(
  active : ($.cookie('saved_tab') || 0),
  activate : (event, ui) ->
    newIndex = ui.newTab.parent().children().index(ui.newTab)
    $.cookie('saved_tab', newIndex, { expires: 1 })
) 
```

# printing - awk：根据另一列的值打印列

> ID：15160241
> 
> 赞同：1
> 
> 时间：2013-03-01T14:36:04.120
> 
> 标签：printing, awk

我有一个包含六列的文件，我只想打印第六列中值 >3 的行的前两列。

此语句打印第六列 > 3 的所有行

```
awk '$6 > 3' file > out 
```

此语句打印前两列：

```
awk '{print $1,$2}' file > out 
```

任何人都知道如何将这两个命令组合成一条线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:38:53.760

你快到了，就像你说的，“结合他们”！. 试试这个：

```
awk '$6>3{print $1,$2}' file >out 
```

# jquery - Jquery 对象 innerHTML 在 Firefox 中工作但在 IE 中不工作？

> ID：15160244
> 
> 赞同：4
> 
> 时间：2013-03-01T14:36:09.973
> 
> 标签：jquery, xml-parsing, innerhtml

总之，我有一个 xml 字符串，我使用 jQuery 来查找特定节点的一些子节点。

这些子项及其值用于构建 HTML 选择框并将其附加到网页。

**XML**

```
<!--- Another node level !-->          
       <Salutation restricted="no" type="dropdownBox" tooltip="Select a title for the customer" required="yes" size="6">
           <value>Mr</value>
           <value>Sir</value>
           <value>Mrs</value>
           <value>Miss</value>
           <value>Lord</value>
       </Salutation> 
```

**编码**

```
 function dropdownBuilder( xml, element, id ) {
       // find node with specific name and get its children
       selection = $("<div>" + xml + "</div>").find(element).children();
       console.log( selection );
       // generate a select box
       var selectBox = "<select id=\"" + id + "\"> ";
       for ( var j = 0; j < selection.length; j++ ) {
        selectBox += "<option value=\"" + selection[j].innerHTML + "\">"
                + selection[j].innerHTML + "</option>";
       }
       selectBox += "</select>";

       // return html
       return selectBox;
} 
```

**输出火狐**

```
<select id="dropdownBox1" data-hasqtip="true" aria-describedby="qtip-1">
    <option value="Mr">Mr</option>
    <option value="Sir">Sir</option>
    <option value="Mrs">Mrs</option>
    <option value="Miss">Miss</option>
    <option value="Lord">Lord</option>
</select> 
```

**输出IE**

```
<select id="dropdownBox1" data-hasqtip="true" jQuery16309410884371447445="60"/> 
```

在 IE 的控制台登录中，它只显示**“LOG: [object Object]”**

我尝试使用 .val() 、 .value 、 .data 、 .attr 更改为输出

知道为什么这在 FF 中可以正常工作，但在 IE 中不行吗？

**JSFIDDLE**

[http://jsfiddle.net/BA7u6/1/](http://jsfiddle.net/BA7u6/1/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:42:38.100

你应该使用 xml 解析器来做你所追求的

看到这个：[http ://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:44:08.673

您可以用这个替换代码中的 for 循环，它应该可以工作：

```
selection.each(function(index) {
    var text = $(this).text();
    selectBox += "<option value=\"" + text + "\">" + text + "</option>";
}); 
```

# php - 带有while循环的php邮件

> ID：15160248
> 
> 赞同：1
> 
> 时间：2013-03-01T14:36:11.953
> 
> 标签：php, email, html-email

我需要在一周内按技能向求职者发送工作推荐邮件，它看起来像一个timejob模板，就像我的技能推荐的10个工作一样，我编写如下代码，但我可以通过10封电子邮件获得10个工作不在同一封电子邮件中，我的代码有什么问题？任何人都可以帮助我吗？

```
 <?php
    $today_date=date("Y-m-d");

/* jobs     
   key_skills
   id
   postdate
   reference_no
   company_id
   designation
   locations
   qualification
   industry
   job_type
   job_timing
   expr_min
   min_expmon
   expr_max
   max_expmon
   compensation_lacs
   compensation_thousand
   description
   cr_dt
   status
   interview_date
   intw_time
   intw_exptime
   t_status
   website    
 */
  //  AND j.key_skills  like '%".$get_singlekeyskill[$i_key]."%'

  "SELECT 
    j.id, 
    j.user_id, 
    j.first_name, 
    j.last_name, 
    j.mobile_no, 
    j.experience_years, 
    j.experience_months, 
    j.annual_salary_lacs, 
    j.annual_salary_thousan, 
    j.functional_type, 
    j.key_skills, 
    j.prefered_cityname, 
    j.basic_qualification, 
    j.post_qualification, 
    c.category_id, 
    c.category_name, 
    d.degree_id, 
    d.degree_name, 
    u.user_email 
FROM 
    users as u, 
    job_seeker as j, 
    category as c, 
    degree as d 
WHERE 
    c.category_id = j.functional_type 
AND 
    d.degree_id=j.basic_qualification 
AND 
    j.user_id=u.id"

$check_searching_query = mysql_query() or die (mysql_error()); 

$numtest_rows=mysql_num_rows($check_searching_query);     

    /* $fetch_allqry=mysql_fetch_array($check_searching_query);   */    

if($numtest_rows>0)
{ 
    while( $fetch_allqry=mysql_fetch_array($check_searching_query))
    {           
        $getjobseeker_id=$fetch_allqry['user_id'];      

        $get_usermailid=$fetch_allqry['user_email'];   

        $get_userfirstname=$fetch_allqry['first_name'];
        $get_usermobileno=$fetch_allqry['mobile_no'];
        $get_userexpyr=$fetch_allqry['experience_years'];
        $get_userexpmonth=$fetch_allqry['experience_months']; 
        $get_usersallac=$fetch_allqry['annual_salary_lacs'];
        $get_usersalthous=$fetch_allqry['annual_salary_thousan'];
        $get_userfuncttype=$fetch_allqry['category_name'];
        $get_userskill=$fetch_allqry['key_skills'];
        $get_userpreferedcityname=$fetch_allqry['prefered_cityname'];
        $get_userqual=$fetch_allqry['degree_name'];
        $get_singlekeyskill=explode(",",$get_userskill);    

        foreach($get_singlekeyskill as $get_userskill) {   

            /*
                job_seeker
                d
                user_id
                first_name
                last_name
                fathers_name
                dob
                gender
                marital_status
                country_id
                state_id
                city_name
                mobile_no
                tel_country_code
                tel_city_code
                phone_no
                experience_years
                experience_months
                annual_salary_lacs
                annual_salary_thousan
                functional_type
                industry_type
                key_skills
                resume_title
                prefered_city_id
                prefered_cityname
                basic_qualification
                post_qualification
                functional_type
                industry_type
                */

                /*
                category
                category_id
                category_name     
                */

                 /*
                    degree
                    degree_id
                    degree_name
                */

                  $sel_cron=mysql_query("SELECT * FROM jobs WHERE `postdate` BETWEEN DATE_SUB( NOW( ) , INTERVAL 7 DAY ) AND NOW( )  ") or die(mysql_error());  
                  $fet_cr=mysql_fetch_assoc($sel_cron) ;   

                  while($fet_cr=mysql_fetch_array($sel_cron))                     
                  {    
                    $db_job_id=$fet_cr['id'];     
                    $db_jpostdate=$fet_cr['postdate'];    
                    $num_empid=$fet_cr['company_id'];  
                    $sel_companname=mysql_query("select * from employer where `user_id`='$num_empid' ") or die(mysql_error());   
                    $fetch_companname=mysql_fetch_array($sel_companname);
                    $emp_companyname=$fetch_companname['company_name'];
                    $db_keyskill=$fet_cr['key_skills'];   
                    $db_minyear=$fet_cr['expr_min'];   
                    $db_minmon=$fet_cr['min_expmon'];   
                    $db_maxyear=$fet_cr['expr_max'];   
                    $db_maxmon=$fet_cr['max_expmon'];        
                    $db_locations=$fet_cr['locations'];             
                    $db_job_timing=$fet_cr['job_timing'];   
                    $db_designation=$fet_cr['designation'];   
                    $db_description=$fet_cr['description'];     
                    $db_interviewdate=$fet_cr['interview_date'];            
                    $db_complac=$fet_cr['compensation_lacs'];   
                    $db_compthousand=$fet_cr['compensation_thousand'];     

                    /*
                        $overall_arr[]=array($db_job_id,
                                    $db_jpostdate,
                                    $num_empid,
                                    $db_keyskill,
                                    $db_minyear,
                                    $db_minmon,
                                    $db_maxyear,
                                    $db_maxmon,
                                    $db_designation,
                                    $db_description,
                                    $db_interviewdate
                        );
                    */
                 }

                 $admin_emialid="renuka@osiztechnologies.com";

                 $content_pop="hfkhkdhfdjfjgdfjgdjgfjgdjfgjdgfj dvfdfhdgfhdgfsdgfhjdfh dhfgdhgfdjfg   " . $db_job_id;
                 $subj="Recoomended mail";

                 $headers1 = "From: JOBSITE \r\n";
                 $headers1 .= "Reply-To: ".$admin_emialid. "\r\n";
                 $headers1 .= "MIME-Version: 1.0\r\n";

                 $headers1 .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
        }
    }
    mail($get_usermailid,$subj, $content_pop,$headers1);
}
?> 
```

以上只是我尝试的一个示例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:03:16.857

如果您收到 10 封电子邮件而不是 1 封，那么您的 mail() 函数位于 foreach() 循环而不是 while() 循环内。从此更改代码的底部：

```
 $subj="Recoomended mail";
            $headers1 = "From: JOBSITE \r\n";
            $headers1 .= "Reply-To: ".$admin_emialid. "\r\n";
            $headers1 .= "MIME-Version: 1.0\r\n";
            $headers1 .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
        }
    }
    mail($get_usermailid,$subj, $content_pop,$headers1);
} 
```

...对此：

```
 }
        subj="Recommended mail";
        $headers1 = "From: JOBSITE \r\n";
        $headers1 .= "Reply-To: ".$admin_emialid. "\r\n";
        $headers1 .= "MIME-Version: 1.0\r\n";
        $headers1 .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
        mail($get_usermailid,$subj, $content_pop,$headers1);
    }
} 
```

此外，正如评论中已经提到的，mysql_ 函数已被弃用，最终将完全从 PHP 代码库中删除。您应该为查询切换到 mysqli 或 PDO 接口，以确保您的代码不会在未来的 PHP 更新中中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:58:12.573

请使用内部联接或左联接，因为在执行此类操作时不会重复记录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:00:55.203

您没有在作业表查询中提及任何 where 子句：

```
 $sel_cron=mysql_query("SELECT * FROM jobs WHERE `postdate` BETWEEN DATE_SUB( NOW( ) , INTERVAL 7 DAY ) AND NOW( )  ") or die(mysql_error()); 
```

我认为应该根据工作技能需要某种类型的where子句

# php - 使用 stdClass() 创建soap请求wsdl复杂类型

> ID：15160251
> 
> 赞同：1
> 
> 时间：2013-03-01T14:36:26.303
> 
> 标签：php, soap

在发现 PHP soap 不处理具有复杂类型的数组后，我现在使用 stdClass() 我编写了一些代码，但它以错误的顺序创建了 soap 请求。我希望 idtag 和 idtaginfo 成对出现，如下所示。

```
 <soap:Body>
     <ns:sendLocalListRequest>
     <ns:updateType>full</ns:updateType>
     <ns:listVersion>1</ns:listVersion>

     <ns:localAuthorisationList>

           <ns:idTag>1</ns:idTag>
                   <ns:idTagInfo>
                      <ns:status>good</ns:status>
                    </ns:idTagInfo>

            <ns:idTag>2</ns:idTag>
                   <ns:idTagInfo>
           <ns:status>bad</ns:status>
                    </ns:idTagInfo>

     </ns:localAuthorisationList>

  </ns:sendLocalListRequest>
   </soap:Body> 
```

我的肥皂请求是错误的，如下所示

```
 <env:Body><ns1:sendLocalListRequest><ns1:updateType>FULL</ns1:updateType>
  <ns1:listVersion>1</ns1:listVersion>

  <ns1:localAuthorisationList>
  <ns1:idTag>1</ns1:idTag><ns1:idTag>2</ns1:idTag>

 <ns1:idTagInfo><ns1:status>good</ns1:status><ns1:status>bad</ns1:status>
  </ns1:idTagInfo>
   </ns1:localAuthorisationList></ns1:sendLocalListRequest></env:Body> 
```

这是 wsdl 的相关部分

```
 <s:complexType name="SendLocalListRequest">
    <s:annotation>
      <s:documentation>Defines the SendLocalList.req PDU</s:documentation>
    </s:annotation>
    <s:sequence>
      <s:element name="updateType" type="tns:UpdateType" minOccurs="1" maxOccurs="1" />
      <s:element name="listVersion" type="s:int" minOccurs="1" maxOccurs="1" />
      <s:element name="localAuthorisationList" type="tns:AuthorisationData"
       minOccurs="1" maxOccurs="unbounded" />
      <s:element name="hash" type="s:string" minOccurs="0" maxOccurs="1" />
    </s:sequence>
  </s:complexType>

    <s:complexType name="AuthorisationData">
          <s:sequence>
       <s:element name="idTag" type="tns:string" minOccurs="1" maxOccurs="unbounded"/>
      <s:element name="idTagInfo" type="tns:IdTagInfo" minOccurs="1"
     maxOccurs="unbounded"/>
            </s:sequence>
                 </s:complexType>

  <s:simpleType name="UpdateType">
    <s:restriction base="s:string">
      <s:enumeration value="Differential"/>
      <s:enumeration value="Full"/>
    </s:restriction>
  </s:simpleType>

 <s:complexType name="SendLocalListResponse">
    <s:annotation>
      <s:documentation>Defines the SendLocalList.conf PDU</s:documentation>
    </s:annotation>
    <s:sequence>
      <s:element name="status" type="tns:UpdateStatus" minOccurs="1" maxOccurs="1" />
      <s:element name="hash" type="s:string" minOccurs="0" maxOccurs="1" />
    </s:sequence>
  </s:complexType>

 <s:complexType name="IdTagInfo">
    <s:sequence>
      <s:element name="status" type="s:string" minOccurs="1" maxOccurs="unbounded" />
      <s:element name="expiryDate" type="s:dateTime" minOccurs="0" maxOccurs="1"/>
      <s:element name="parentIdTag" type="tns:IdToken" minOccurs="0" maxOccurs="1"/>
    </s:sequence>
  </s:complexType> 
```

这是我的代码

```
$search_query = new StdClass();
$search_query->updateType = $updatetype;
$search_query->listVersion = $listversion;

 $search_query->localAuthorisationList = new StdClass();

 while ($row = $db->getResult()) {

 $search_query->localAuthorisationList->idTag[] = $row['rfid'];

 $search_query->localAuthorisationList->idTagInfo->status[] = $row['status'];

 }

   ini_set("soap.wsdl_cache_enabled", "0"); 

$path        = realpath($_SERVER["DOCUMENT_ROOT"]);
$endpoint    = $wsdl;
$soapOptions = array(    'exceptions'     => 0
                        ,'soap_version'   => SOAP_1_2
                        ,'trace'          => true
                                                                    ,'uri' => $theversion
                        ,'location' => $url
                                                    ); 

$header = new SoapHeader($theversion,'', $ppid);

$client->__setSoapHeaders($header);  

    $response = $client->SendLocalList($search_query); 
```

## 更新

我已经接近但仍然落在最后一个障碍以下将产生列表

```
while ($row2 = $db->getResult()) { 
$search_query[] = new  SoapStructAuthorisationData($row2['rfid'],array(new 
SoapStructIdTagInfo('ConcurrentTx'))); 
}

// implode with commas and remove last comma

$search_list=implode(', ', $search_query);

$search_list_nocommaend = rtrim($search_list, ', '); 
```

var_dump 生成 SoapStructAuthorisationData、SoapStructAuthorisationData、SoapStructAuthorisationData、SoapStructAuthorisationData、SoapStructAuthorisationData

如果我将上面的代码包含在语音标记中，例如“new SoapStructAuthorisationData($row2['rfid'],array(new SoapStructIdTagInfo('ConcurrentTx')))”; is 会产生整个事情，但是当我执行以下操作时这不会显示

```
 if($soapServiceSend->SendLocalList(new SoapStructSendLocalListRequest($updateType,
     $listversion, 
  array( $search_list_nocommaend )))) 
```

如果我对测试件做这样的事情，它会起作用

```
$search=new SoapStructAuthorisationData('BUKIEE',array(new 
SoapStructIdTagInfo('ConcurrentTx'))); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:44:53.953

我遇到过很多次这类问题，我找到了最简单的解决方案：[http ://www.wsdltophp.com/](http://www.wsdltophp.com/)

在这里您上传您的 WSDL，它将创建与服务器通信所需的所有类。

尝试一下，您可能会发现您不必自己处理类的创建。

*附言。我发现有时数据不能作为数组发送，所以在常规选项中取消标记“**将数组作为参数发送**”*

**编辑 - 来自 Wsdl2PHP 的代码**

```
<?php
$soap = new Saop2StructSendLocalListRequest(); 
$soap->SendLocalList(
    new Saop2StructSendLocalListRequest(
        $updateType, 
        $listversion, 
        array (
            new Saop2StructAuthorisationData(), 
            new Saop2StructAuthorisationData(), 
            new Saop2StructAuthorisationData()
        )
    )
); 
```

# php - 在 MySQL 服务器之间移植存储过程

> ID：15160260
> 
> 赞同：2
> 
> 时间：2013-03-01T14:36:45.040
> 
> 标签：php, mysql, stored-procedures, porting

我继承了一个广泛使用存储过程的 Web 应用程序项目 (PHP/MySQL)，但我不确定如何将这些转移到我的本地机器进行开发。

具体来说，我面临的困难是这些存储过程的导出和导入（最终目标是能够自动安装应用程序数据库的“基本”版本，包括存储过程）。

我将陈述我认为我理解的点点滴滴：

*   我可以导出`information_schema.ROUTINES`表，但不能将它（phpMyAdmin）导入我的本地服务器（我相信这`information_schema`是一个系统数据库？）

*   由于我没有对“在线” MySQL 服务器的 shell/命令行访问权限，因此诸如此类的工具`mysqldump`的用途非常有限（移植到我的本地测试机，但反之亦然）

*   该命令`SHOW CREATE PROCEDURE procedure_name;`应该输出可用于创建过程的 SQL，但我似乎无法正常运行（`ERROR 1305 (42000): PROCEDURE delAddress does not exist`）

*   假设上述工作正常，下一步是让它循环导出所有存储过程（..然后在其他地方通过 phpMyAdmin 运行，导入它）

请更正任何不正确的地方，并提供有关如何在数据库服务器之间自动移植的指导。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:40:25.320

事实证明，解决方案非常简单。

在导出页面上，有一个`Add CREATE PROCEDURE / FUNCTION / EVENT statement`选项。

通过选中此框，它还可以导出在以后/在另一台服务器上导入过程所需的 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:49:00.263

使用 MySQL Workbench 的迁移功能。整个过程都是免费的，而且做得非常棒。

# java - 如何处理 ConnectTimeoutException Android

> ID：15160270
> 
> 赞同：0
> 
> 时间：2013-03-01T14:37:16.773
> 
> 标签：java, android

有谁知道如何处理 ConnectTimeoutException？我正在使用 AsyncTask 将变量发布到 url，但我的互联网连接令人震惊，所以由于 ConnectTimeoutException，我正在接收空数据。处理此问题的最佳方法是什么，例如，如果发生超时，请尝试再次运行等我之前没有遇到过这个问题，所以不知道如何处理，但我觉得它需要处理以改善用户体验。所以有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:46:36.990

你可以使用[Handler](http://developer.android.com/reference/android/os/Handler.html)让你`Activity`知道你有一个`ConnectTimeoutException`

在您的 AsyncTask 中捕获此异常并向您发送消息`Handler`（然后做任何您想做的事情）

仅供参考，AsyncTask 不是为长时间运行的操作而设计的，如果是这样，您应该使用[Thread](http://developer.android.com/reference/java/lang/Thread.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:49:37.130

这是您应该检查网络状态的方式

```
 ConnectivityManager connMgr = (ConnectivityManager) 
                getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
            if (networkInfo != null && networkInfo.isConnected()) {
                //execute your AsyncTask method
            } else {

               //maketoast..."No network connection available"
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:35:54.583

创建一个名为 Activity 助手的单独类，并在您的异步任务中为您创建的任何需要 Web 服务调用的类实现它。

```
public class ActivityHelper {
    public static final String NETWORK_CONNECTION_MESSAGE = "No Network Connection. Please make sure you have a Network Connection.";

public static boolean isNetworkPresent(Context applicationContext){
    boolean hasService = false;
    NetworkInfo info=(NetworkInfo)( (ConnectivityManager)applicationContext.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo(); 
    hasService = (info==null || !info.isConnected())?false:true;
    return hasService;

}
} 
```

在“doInBackground”方法中调用 Activity Helper 有点像这样..

```
private class YourAsyncTask extends AsyncTask<String, Void, String> {
        Message message = new Message();
    String type = "";
    protected void onPreExecute() {
         ActivityHelper.onUserInteraction(getApplicationContext());
        dialog = ProgressDialog.show(LocationType.this,
                "Connecting to server", "Please wait...", true, true);
        dialog.setCancelable(false);
    }
protected String doInBackground(final String... args) {
        try {

            if(!ActivityHelper.isNetworkPresent(getApplicationContext())){
                message.what = ActivityHelper.NONETWORKCONNECTION;
                return null;
            }
} catch (Exception e) {
            Log.e(this.getClass().getName(),
                    "Exception Message");
        }
        return null;
    } 
```

# arduino - 如何在处理中从此代码中删除空指针异常

> ID：15160273
> 
> 赞同：0
> 
> 时间：2013-03-01T14:37:28.160
> 
> 标签：arduino, processing

我正在尝试做我在教学中找到的这个项目。 [http://www.instructables.com/id/Touche-for-Arduino-Advanced-touch-sensing/?ALLSTEPS](http://www.instructables.com/id/Touche-for-Arduino-Advanced-touch-sensing/?ALLSTEPS)

需要运行一个 Arduino 代码和一个处理代码来实现这个项目。代码可以在这里找到。 [https://github.com/Illutron/AdvancedTouchSensing](https://github.com/Illutron/AdvancedTouchSensing)

arduino 代码运行良好。但是正在处理的那个给出了 NullPointerException 错误，输出只是一个纯白色窗口，而不是所需的图形。完整的错误信息如下：

```
Stable Library
=========================================
Native lib Version = RXTX-2.1-7
Java lib Version   = RXTX-2.1-7
[0] "COM1"
[1] "COM12"
error, disabling serialEvent() for //./COM12
java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at                
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at processing.serial.Serial.serialEvent(Serial.java:287)
at gnu.io.RXTXPort.sendEvent(RXTXPort.java:732)
at gnu.io.RXTXPort.eventLoop(Native Method)
at gnu.io.RXTXPort$MonitorThread.run(RXTXPort.java:1575)
Caused by: java.lang.NullPointerException
at processing.core.PApplet.append(PApplet.java:7966)
at sketch_130301a.serialEvent(sketch_130301a.java:751)
... 8 more
Exception in thread "Thread-3" java.lang.NullPointerException
at processing.serial.Serial.serialEvent(Serial.java:273)
at gnu.io.RXTXPort.sendEvent(RXTXPort.java:732)
at gnu.io.RXTXPort.eventLoop(Native Method)
at gnu.io.RXTXPort$MonitorThread.run(RXTXPort.java:1575) 
```

请帮帮我。我已经被困在这里很长时间了。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:47:46.980

当 java 在该地址的数组中找不到索引时，会发生空指针异常。你确定你的串口是有效的吗？您是否在处理过程中使用另一个草图测试了串行通信？

# objective-c - 在 cocos 2d 2.0 游戏教程中使用 Open GL ES 2.0 无法完全绘制

> ID：15160274
> 
> 赞同：4
> 
> 时间：2013-03-01T14:37:31.617
> 
> 标签：objective-c, cocos2d-iphone, opengl-es-2.0

我目前正在编写本教程[http://www.raywenderlich.com/3888/how-to-create-a-game-like-tiny-wings-part-1](http://www.raywenderlich.com/3888/how-to-create-a-game-like-tiny-wings-part-1)并尝试正确绘制山丘。不过教程是在 cocos 2.0 之前写的，所以不涉及着色器。所以，我试图转换它。到目前为止，我还没有成功并获得这样的图像：

![错误1](../Images/3b7ac40a3df65a2a7d12e2d4e2a21080.png)

![错误2](../Images/b81dca4bb5d19eb46df6fe2331dbd7ae.png)

![在此处输入图像描述](../Images/9bf64bdc6d3eade971d7c5c795bc384e.png)

可以看出，它没有完全绘制山丘，山丘的颜色也是错误的。此外，它会在 2 或 3 秒后完全停止绘制它们。这是代码的一部分，我将它们绘制出来。

```
- (void) draw {

    [self.shaderProgram use];
    [self.shaderProgram setUniformForModelViewProjectionMatrix];

    ccGLBlendFunc( CC_BLEND_SRC, CC_BLEND_DST );
    ccGLBindTexture2D(_stripes.texture.name);

    glVertexAttribPointer(kCCVertexAttrib_Position, 2, GL_FLOAT, GL_FALSE, 0, _hillVertices);
    glEnableVertexAttribArray(kCCVertexAttrib_Position);

    glVertexAttribPointer(kCCVertexAttrib_TexCoords, 2, GL_FLOAT, GL_FALSE, 0, _hillTexCoords);
    glEnableVertexAttribArray(kCCVertexAttrib_TexCoords);

    glDrawArrays(GL_TRIANGLE_STRIP, 0, (GLsizei)_nHillVertices);
} 
```

如果需要，我可以分享更多代码。我希望以前遇到过这个问题的人可以帮助我或提出解决方案。

谢谢

# c++ - 运算符 != 对于 std::reverse_iterator c++ 不明确

> ID：15160276
> 
> 赞同：5
> 
> 时间：2013-03-01T14:37:38.723
> 
> 标签：c++, iterator, operator-overloading, std, reverse-iterator

我正在开发一个实现自己的迭代器的容器，我将它与 std::reverse_iterator<> 一起使用以获得反向迭代功能。我可以将反向迭代器分配给rend或rbegin，但是当我尝试访问它的任何功能（例如！=或==）时，我得到了这个：

```
1   IntelliSense: more than one operator "!=" matches these operands:
        function template "bool std::operator!=(const std::reverse_iterator<_RanIt1> &_Left, const std::reverse_iterator<_RanIt2> &_Right)"
        function template "bool avl::operator!=(const tree &left, const tree &right)"
        operand types are: std::reverse_iterator<avl::avl_iterator<avl::avltree<char, int, std::less<char>, std::allocator<std::pair<const char, int>>>>> != std::reverse_iterator<avl::avl_iterator<avl::avltree<char, int, std::less<char>, std::allocator<std::pair<const char, int>>>>> 
```

我的迭代器运算符重载：

```
bool operator == ( const avl_iterator& rhs ) const { return ( _node == rhs._node); }
    bool operator != ( const avl_iterator& rhs ) const { return ( _node != rhs._node); } 
```

以及我对反向迭代器的实现

```
typedef typename avl_iterator< tree >                               iterator;
typedef typename const_avl_iterator< tree >                         const_iterator;
typedef typename std::reverse_iterator<iterator>                    reverse_iterator;
typedef typename std::reverse_iterator<const_iterator>              const_reverse_iterator; 
```

和迭代器类型定义：

```
 typedef typename tree::node                 node;
    typedef typename tree::node_ptr             node_ptr;
    typedef typename tree::value_type*          pointer;// for std reverse iterator
    typedef typename tree::value_type&          reference;
    typedef typename tree::const_node_ptr       const_node_ptr;
    typedef typename tree::utilities            utilities;
    typedef typename tree::value_type           value_type;
    typedef std::bidirectional_iterator_tag     iterator_category;
    typedef std::ptrdiff_t                      difference_type; 
```

我如何使用运算符

```
 avltree<char,int> myTree;
    myTree.insert(std::pair<char,int>('a',1));
    myTree.insert(std::pair<char,int>('b',2));
    myTree.insert(std::pair<char,int>('c',3));

    avltree<char,int>::reverse_iterator rit = myTree.rbegin();

    for(; rit != myTree.rend(); ++rit) //fails on this line
    {
    } 
```

和迭代器类（const_iterator 是同一件事，但具有 const value_type）

```
template <class tree>
class avl_iterator {
public:
    typedef typename tree::node                 node;
    typedef typename tree::node_ptr             node_ptr;
    typedef typename tree::value_type*          pointer;// for std reverse iterator
    typedef typename tree::value_type&          reference;
    typedef typename tree::const_node_ptr       const_node_ptr;
    typedef typename tree::utilities            utilities;
    typedef typename tree::value_type           value_type;
    typedef std::bidirectional_iterator_tag     iterator_category;
    typedef std::ptrdiff_t                      difference_type;

private:
    friend class const_avl_iterator<tree>;
    node_ptr _node;
public:
    avl_iterator() : _node()  { }
    avl_iterator( const node_ptr node ) : _node ( node ) { }
    avl_iterator( const avl_iterator& iterator ) {
        (*this) = iterator;
    }
    ~avl_iterator() { _node = NULL; }

    avl_iterator& operator=(const avl_iterator& rhs) {
        _node = rhs._node;
        return (*this);
    }
    avl_iterator& operator=(const const_avl_iterator<tree>& rhs) {
        _node = rhs._node;
        return (*this);
    }

    bool operator == ( const avl_iterator& rhs ) const { return ( _node == rhs._node); }
    bool operator != ( const avl_iterator& rhs ) const { return ( _node != rhs._node); }

    avl_iterator& operator++()
    {
        _node = utilities::next_node( _node );
        return (*this);
    }
    avl_iterator operator ++( int ) {
        avl_iterator temp(*this);
        ++(*this);
        return(temp);
    }

    avl_iterator& operator -- () {
        _node = utilities::prev_node( _node );
        return (*this);
    }

    avl_iterator operator -- ( int ) {
        avl_iterator temp(*this);
        --(*this);
        return(temp);
    }

    value_type& operator * () const {
        assert( ! utilities::is_header( _node ) );
        return _node->_value;
    }

    value_type* operator -> () const {
        assert( ! utilities::is_header( _node ) );
        return &_node->_value;
    }
}; 
```

和树类：

```
template <
    class Key,
    class Type,
    class Traits = std::less<Key>,
    class Allocator = std::allocator<std::pair<Key const, Type>>
    >
    class avltree {
    private:
        typedef avltree< Key, Type, Traits, Allocator>                      tree;
    public:
        typedef std::pair<const Key, Type>                                  value_type;
        typedef Allocator                                                   allocator_type;
        typedef typename allocator_type::size_type                          size_type;
        typedef typename allocator_type::reference                          reference;
        typedef Key                                                         key_type;
        typedef Type                                                        mapped_type;
        typedef Traits                                                      key_compare;
        typedef typename avl_node< tree >                                   node;
        typedef typename node::node_ptr                                     node_ptr;
        typedef typename node::const_node_ptr                               const_node_ptr;
        typedef typename avl_utilities< tree >                              utilities;
        typedef typename avl_iterator< tree >                               iterator;
        typedef typename const_avl_iterator< tree >                         const_iterator;
        typedef typename std::reverse_iterator<iterator>                    reverse_iterator;
        typedef typename std::reverse_iterator<const_iterator>              const_reverse_iterator;
    private:
        node_ptr _header;
        std::size_t _size;
        key_compare _comparer;
        allocator_type _alloc;
    public:
            //c'tors and d'tors
         //*******************************************************
        //Iterators
        //*******************************************************
        iterator                begin()         { return iterator( node::get_left( _header ) ); }
        const_iterator          begin() const   { return const_iterator( node::get_left( _header ) ); }
        const_iterator          cbegin() const  { return const_iterator( node::get_left( _header ) ); }
        iterator                end()           { return iterator( _header ); }
        const_iterator          end() const     { return const_iterator( _header ); }
        const_iterator          cend() const    { return const_iterator( _header ); }

        reverse_iterator        rbegin()        { return reverse_iterator( _header ); }
        const_reverse_iterator  rbegin() const  { return const_reverse_iterator( _header ); }
        const_reverse_iterator  crbegin() const { return const_reverse_iterator( _header ); }
        reverse_iterator        rend()          { return reverse_iterator( node::get_left( _header ) ); }
        const_reverse_iterator  rend() const    { return const_reverse_iterator( node::get_left( _header ) ); }
        const_reverse_iterator  crend() const   { return const_reverse_iterator( node::get_left( _header ) ); }
        bool operator==(const tree& right)
        {   
            if(_size != right.size())
            {
                return false;
            }

            const_iterator lhs = cbegin();
            const_iterator rhs = right.cbegin();
            while(lhs != cend() && rhs != right.cend() )
            {
                if(lhs->first != rhs->first || lhs->second != rhs->second)
                {
                    return false;
                }
                ++lhs;
                ++rhs;
            }
            return true;
        }
        bool operator!=(const tree& right)
        {
            return (!(*this == right));
        }
        bool operator<(const tree& right)
        {
            const_iterator lhs = cbegin();
            const_iterator rhs = right.cbegin();
            while(lhs != cend() && rhs != right.cend() )
            {
                if(lhs->first != rhs->first || lhs->second != rhs->second)
                {
                    if(lhs->first < rhs->first || lhs->second < rhs->second)
                    {
                        return true;
                    }                       
                }
                ++lhs;
                ++rhs;
            }
            return false;
        }
        bool operator>(const tree& right)
        {
            return ( right < *this );
        }
        bool operator<=(const tree& right)
        {
            return ( !(right < *this) );
        }
        bool operator>=(const tree& right)
        {
            return ( !(*this < right) );
        }
};
//*******************************************************
//Relation Operators
//*******************************************************
template<class tree>
bool operator==(const tree& left,const tree& right)
{   
    if(left.size() != right.size())
    {
        return false;
    }

    tree::const_iterator lhs = left.cbegin();
    tree::const_iterator rhs = right.cbegin();
    while(lhs != left.cend() && rhs != right.cend() )
    {
        if(lhs->first != rhs->first || lhs->second != rhs->second)
        {
            return false;
        }
        ++lhs;
        ++rhs;
    }
    return true;
}
template<class tree>
bool operator!=(const tree& left,const tree& right)
{
    return (!(left == right));
}
template<class tree>
bool operator<(const tree& left,const tree& right)
{
    tree::const_iterator lhs = left.cbegin();
    tree::const_iterator rhs = right.cbegin();
    while(lhs != left.cend() && rhs != right.cend() )
    {
        if(lhs->first != rhs->first || lhs->second != rhs->second)
        {
            if(lhs->first < rhs->first || lhs->second < rhs->second)
            {
                return true;
            }                       
        }
        ++lhs;
        ++rhs;
    }
    return false;
}
template<class tree>
bool operator>(const tree& left,const tree& right)
{
    return ( right < left );
}
template<class tree>
bool operator<=(const tree& left,const tree& right)
{
    return ( !(right < left) );
}
template<class tree>
bool operator>=(const tree& left,const tree& right)
{
    return ( !(left < right) );
}
}//end namespace avl 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T15:05:50.633

在这条线上：

```
rit != myTree.rend() 
```

您正在比较两个类型的对象：

```
avltree<char,int>::reverse_iterator 
```

这又是一个别名：

```
std::reverse_iterator<avl_iterator<char, int>::iterator> 
```

C++ 标准库在`std::`命名空间中定义了一个模板`operator !=`，它与比较反向迭代器完全匹配（参见 C++11 标准的第 24.5 段）：

```
template <class Iterator1, class Iterator2>
bool operator!=(
    const reverse_iterator<Iterator1>& x,
    const reverse_iterator<Iterator2>& y) 
```

但是，您也有这个：

```
template<class tree> bool operator!=(const tree& left,const tree& right) 
```

由于模板不受约束（即使模板参数名为`tree`，但这并不意味着模板将只接受树），这也是完全匹配的，但`operator !=`反向迭代器的模板化仍然更加专业。

因此，调用不应该**是**模棱两可的。我认为这是一个编译器错误。

* * *

要解决此问题，请确保您的树的不等式运算符只接受树，这无论如何都是一个好主意（毕竟您真的不希望您的运算符比较*任何东西*）：

```
template<class T> bool operator!=(const avltree<T>& left,const avltree<T>& right) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T15:04:55.123

您`operator !=`尝试比较任何时间，包括`reverse_iterator`s，您可以尝试使用

```
template<class T> bool operator!= (const avltree<T>& left,const avltree<T>& right) {     
    return (!(left == right)); 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T15:04:56.977

似乎是一个损坏的编译器。

```
template<typename Iter>
bool std::operator!=(const std::reverse_iterator<Iter>&,
                     const std::reverse_iterator<Iter>&); 
```

是“比”更专业

```
template<class tree>
bool avl::operator!=(const tree&, const tree&); 
```

所以表达式`rit != myTree.rend()`不应该是模棱两可的。

尽管如此，声明可以应用于任何两个相同类型的对象的东西`!=`是*一个*危险的想法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-01T18:17:47.913

您尝试将 const_reverse_iterator 与 reverse_iterator 进行比较，对 rend() 的调用将始终使用非常量重载（如果可用）。对此的修复应该是显而易见的。如果我没记错的话，一些早期的 std::set 实现也存在同样的问题。

无论如何，有一种很好的方法可以解决这个问题，同时让恕我直言更加优雅：

```
for(container::iterator it=c.begin(), end=c.end(); it!=end; ++it)
    ... 
```

换句话说，始终使用在 for 循环的标头中声明的一对迭代器。使用 C++11 的“自动”，这变得更短。虽然使用任何半现代的编译器对 end() 的单个调用都不会更快，但我个人觉得它更清晰一点。

# r - 计算R中的累积二项式概率

> ID：15160281
> 
> 赞同：4
> 
> 时间：2013-03-01T14:37:54.023
> 
> 标签：r

我想计算二项式系列的累积概率：

```
a=choose(5,0)*0.5^0*0.5^5
b=choose(5,1)*0.5^1*0.5^4
c=choose(5,2)*0.5^2*0.5^3
d=choose(5,3)*0.5^3*0.5^2
e=choose(5,4)*0.5^4*0.5^1
f=choose(5,5)*0.5^5*0.5^0

cumulative=sum(a,b,c,d,e,f) 
```

有没有办法用一个命令来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T14:40:03.863

对于累积概率使用`pbinom`：

```
pbinom(0:5,5,0.5)
[1] 0.03125 0.18750 0.50000 0.81250 0.96875 1.00000 
```

对于单个值，`dbinom`：

```
dbinom(0:5,5,0.5)
[1] 0.03125 0.15625 0.31250 0.31250 0.15625 0.03125 
```

并且对于累计使用`cumsum`：

```
cumsum(dbinom(0:5,5,0.5))
[1] 0.03125 0.18750 0.50000 0.81250 0.96875 1.00000 
```

# facebook-graph-api - 使用 FQL 获取事件的所有评论

> ID：15160285
> 
> 赞同：0
> 
> 时间：2013-03-01T14:38:13.087
> 
> 标签：facebook-graph-api, facebook-fql, fql.multiquery

我正在尝试列出某个页面创建的事件的所有评论。我正在使用这样的多查询获取事件的 EID：

```
{ 'eids':'
SELECT eid, uid 
FROM event_member 
WHERE uid = 64565465464
'events':'
SELECT eid, name, venue, location, start_time, creator 
FROM event WHERE eid 
IN (SELECT eid FROM #eids) 
AND creator =  64565465464  ORDER BY start_time ASC'} 
```

我完全不知道如何使用该 EID 获取该事件的评论。

有谁知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:54:58.010

您将使用`stream`FQL 表。`source_id`此表上的`eid`与事件表的 相关。

通过上述多查询的示例查询：

```
SELECT message FROM stream WHERE source_id IN (SELECT eid FROM #eids) 
```

文档：[https ://developers.facebook.com/docs/reference/fql/stream](https://developers.facebook.com/docs/reference/fql/stream)

# watermark - ImageJ 添加水印

> ID：15160295
> 
> 赞同：1
> 
> 时间：2013-03-01T14:38:35.287
> 
> 标签：watermark, imagej

ImageJ：为图像添加水印的最佳方法是什么？

我使用两个图像，原始图像和水印图像。问题（在水印图像中）是我不能在不改变背景不透明度的情况下改变文本的不透明度。注意：如果我没有更改文本的不透明度，则背景透明度为 100%

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-18T08:43:55.907

我的建议是使用此工具： http: [//www.paintshoppro.com/en/pages/watermark-photos/](http://www.paintshoppro.com/en/pages/watermark-photos/)为您的照片添加水印，因为有时水印可以使您的照片更安全，但它们也可以很容易地去除，所以你回到你开始的地方。如果你用那个工具做一个透明的水印，它不会干扰照片的概念，但也很难去除。

# c++ - 依赖项目中的部分 C++ 模板专业化

> ID：15160297
> 
> 赞同：3
> 
> 时间：2013-03-01T14:38:41.900
> 
> 标签：c++, templates, specialization

假设我有一个库和多个依赖于该库的项目。库头文件已经有一些部分类特化。我想允许每个依赖项目用自己的部分专业化覆盖。出于性能原因，我需要静态地实现这一切。下面是一些简化的代码。

库代码：

```
template <class A, class B, class Enable=void>
struct Widget;

struct Foo
{
};

template <class B>
struct Widget<Foo, B>
{
}; 
```

用户代码：

```
template <class B>
struct DoSpecialize;

template <class B>
struct Widget<Foo, B, enable_if< DoSpecialize<B> >::type
{
}; 
```

这里的问题是我们最终会得到同一专业化的多个定义。我想我们需要一个`disable_if<>`地方。我们怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:21:09.437

我建议通过分离图层来解决它。该库有自己的专业，用户可以根据需要覆盖它们。如果这是可以接受的，以下是库代码：

```
namespace impl
{
    template <class A, class B, class Enable=void>
    struct Widget;
}

template <class A, class B, class Enable=void>
struct Widget : impl::Widget< A, B > {};

struct Foo
{
};

namespace impl
{
    template <class B>
    struct Widget<Foo, B>
    {
    };
} 
```

并且用户代码保持原样。

# sql - 用联合插入

> ID：15160298
> 
> 赞同：19
> 
> 时间：2013-03-01T14:38:48.200
> 
> 标签：sql, sql-server-2008

我有个问题。共有三个表：T1、T2、T_target。T1 和 T2 表有许多不同的列，但我只需要两者中的 ID 列。T_target 表当然有一个 ID 列和另一个：project_No。

T1 和 T2 中也出现了一些 ID，但我不想在它们之间创建重复项，如果一个 ID 出现在两个表中，则它必须仅插入 T_target 一次，但如果它已经在 T_target 中允许行动两次。另一个条件是每个新插入的 ID 在“project_No”列中的值必须为 21。所以，例如：

**T1：**

```
ID
2548
2566
2569
2843
2888
... 
```

**T2：**

```
ID
2557
2566
2569
2700
2913
2994
3018
5426
... 
```

**T_目标：**

```
ID     project_No
2976   1
3331   7
4049   7
5426   8
5915   3
6253   10
... 
```

而我想看到的结果：

**T_目标：**

```
ID     project_No
2548   21
2557   21
2566   21
2569   21
2700   21
2843   21
2888   21
2913   21
2976   1
2994   21
2018   21
3331   7
4049   7
5426   8
5426   21
5915   3
6253   10
... 
```

所以，我用这段代码尝试了它（这里的“NOT NULL”标准很重要，因为两个 T_target 列都是主键）：

```
insert into T_target (ID, project_No)
  select (select ID
  from T1 where ID is not NULL
 union
  select ID
  from T2 where ID is not NULL), 21

select * from T_target 
```

错误消息： **“消息 512，级别 16，状态 1，第 2 行子查询返回超过 1 个值。当子查询遵循 =、!=、<、<=、>、>= 或当子查询是用作表达式。语句已终止。”**

然后我尝试使用 VALUES 语句而不是第一个 SELECT 和括号，但错误是相同的。

还有一个类似的问题： [mySQL query: How to insert with UNION?](https://stackoverflow.com/questions/2958235/mysql-query-how-to-insert-with-union) 但这个解决方案对我不起作用，因为它指示 VALUE 和 SELECT 之间的语法错误。

请帮我一把。谢谢！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-01T14:41:22.810

这应该做你需要的

```
INSERT INTO T_target
            (ID,
             project_No)
SELECT ID,
       21
FROM   T1
WHERE  ID IS NOT NULL
UNION
SELECT ID,
       21
FROM   T2
WHERE  ID IS NOT NULL 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T14:58:18.673

我认为您必须稍微修改一下以避免在 select 语句中重复 ID。

```
INSERT INTO T_target
            (ID,
             project_No)

SELECT ID, 21 
FROM (
SELECT ID
FROM   T1
WHERE  ID IS NOT NULL
UNION
SELECT ID
FROM   T2
WHERE  ID IS NOT NULL 
) A 
```

# c++ - qt5.0.1 相机服务缺失

> ID：15160305
> 
> 赞同：0
> 
> 时间：2013-03-01T14:39:05.317
> 
> 标签：c++, video, camera, media, qt5

当我运行 C:\QT5\5.0.1\msvc2010 的示例时，我在我的 win7 系统中安装了 qt-windows-opensource-5.0.1-msvc2010_32-x86-offline 和 qt-vs-addin-1.2.0-opensource \examples\multimediawidgets\camera，它总是告诉我“相机服务丢失”。谁能告诉我如何解决它？很感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:56:49.767

Camera support for WMF plugin will be implemented in a future release. [https://bugreports.qt-project.org/browse/QTBUG-28047](https://bugreports.qt-project.org/browse/QTBUG-28047)

# php - 从复选框查询

> ID：15160307
> 
> 赞同：1
> 
> 时间：2013-03-01T14:39:09.147
> 
> 标签：php, mysql, sql

我的 mysql 数据库中有以下表格。我正在尝试创建一个应用程序，它可以虚拟评估某人是否可能患上食道癌

```
#tblsymptoms - 包含所有症状
######################################
症状ID | 症状    
-------------------------------------
1 喉咙肿块        
2吞咽困难   
3 最近减肥
4 胃灼热
5 声音嘶哑的咳嗽
6吐血

#tblresponse - 保存所有响应
######################################
响应ID | 回复   
-------------------------------------------------- ---
1 你的症状表明你有问题       
2 您可能患有食管癌  
3 你没有喉癌

#tblrelation - 保持反应和症状之间的关系
######################################
关系ID | 响应ID | 症状ID
-----------------------------------------
1 1 3
2 1 4
3 1 5
4 2 1
5 2 2
6 2 3
7 4 2
8 2 5
9 2 6
10 3 3
11 3 4

```

我想使用 html 表单中的复选框来查询数据库，这是表单的代码：

```
<form method="post" action="process.php">
<INPUT TYPE=CHECKBOX NAME="option[]" VALUE="Difficulty in swallowing" id="">Difficulty in swallowing<br>
<INPUT TYPE=CHECKBOX NAME="option[]" VALUE="Difficulty in swallowing" id="">Difficulty in swallowing<br>
<INPUT TYPE=CHECKBOX NAME="option[]" VALUE="Lost weight lately" id="">Lost weight lately<br>
<INPUT TYPE=CHECKBOX NAME="option[]" VALUE="Heartburn" id="">Heartburn<br>
<INPUT TYPE=CHECKBOX NAME="option[]" VALUE="Hoarse-sounding cough" id="">Hoarse-sounding cough<br>
<INPUT TYPE=CHECKBOX NAME="option[]" VALUE="Vomit blood" id="">Vomit blood<br>
<input type="submit" name="formSubmit" value="Diagnose me" />
</form> 
```

现在，以防万一有人选择：`Lost weight lately and Heartburn`脚本应该从 tblResponse>>>responseID=1 获取数据并显示给用户：`Your symptoms suggest you have a problem.`

我试过了，但它返回 0 个值

```
SELECT tblresponse.response
FROM tblrelation 
   LEFT JOIN tblresponse ON tblrelation.responseID = tblresponse.responseID
WHERE tblrelation.symptomID = '3' AND tblrelation.symptomID = '4' 
```

有人对我应该添加到带有复选框以查询数据库的 html 表单的代码有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:29:15.117

尝试这个：

```
SELECT response from tblresponse where responseID = (
SELECT responseID from tblrelation 
 where symptomID=4 or symptomID=3
 group by responseID
 having count(*) = 2
) 
```

您还需要传递全部计数（选定值的数量），在这种情况下，我使用 2 等于（选定选项）

[演示](http://www.sqlfiddle.com/#!2/d142e5/7)

编辑：对于 3,4 和 5

```
SELECT * from tblresponse where responseID = (
SELECT responseID from tblrelation 
 where symptomID=4 or symptomID=3 or symptomID=5
 group by responseID
 having count(*) = 3
) 
```

[演示2](http://www.sqlfiddle.com/#!2/d142e5/9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:19:05.530

#tblrelation 存在设计问题。

声音嘶哑的咳嗽症状将返回“问题”和“您可能患有食道癌”。

导致特定反应的症状组合需要在一行中才能确定关系是唯一的。

在你做任何其他事情之前解决这个问题，否则你永远不会得到你之后的结果。

您可以像这样创建表：

```
relationID  | responseID | symptomID
-----------------------------
1         1          3, 4, 5 
```

但这会在检索时产生丑陋的 sql 查询。

如果是我，我想我会将该处理转移到应用程序中。您可以评估哪些框已选中，哪些未选中，并找到适当的响应，而无需将其传递给 sql。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:45:03.683

一列不能有多个值。尝试这个：

```
SELECT tblresponse.response
FROM tblrelation LEFT JOIN
     tblresponse
      ON tblrelation.responseID = tblresponse.responseID
GROUP BY tblresponse.response
having sum(case when tblrelation.symptomID = '3' then 1 else 0 end) > 0 and
       sum(case when tblrelation.symptomID = '4' then 1 else 0 end) > 0 
```

这会将所有关系组合在一起以获得给定的响应。该`having`子句计算“3”的数量和“4”的数量。如果它们都大于 0，则返回响应。

顺便说一句，如果 ID 是数字，则不需要引号。

# excel - 从excel单元格中获取子字符串

> ID：15160314
> 
> 赞同：1
> 
> 时间：2013-03-01T14:39:20.603
> 
> 标签：excel

我在电子表格中有 A 列。

```
_Default = "20";
AdminBlock = "00";
CallRefused = "01";
LearnedBlock = "02"; 
```

我想要的是将它分成两列，例如

```
_Default      20
AdminBlock    00 
CallRefused   01 
LearnedBlock  02 
```

我试过的公式是：

```
=MID(A1,1,FIND("=",A1,0)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:43:22.817

如果这是一次性问题，只需使用数据菜单上的“文本到列”，指定 = 作为分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:56:59.587

B列的公式：

```
=TRIM(MID(TRIM(A1),1,FIND("=",TRIM(A1))-1)) 
```

C列的公式：

```
=TRIM(SUBSTITUTE(SUBSTITUTE(MID(TRIM(A1),FIND("=",TRIM(A1))+1,LEN(TRIM(A1))),"""",""),";","")) 
```

# django-models - 将 SessionAuthentication 与 django-rest-framework 一起使用时如何禁用导入 authtoken.models？

> ID：15160315
> 
> 赞同：2
> 
> 时间：2013-03-01T14:39:20.020
> 
> 标签：django-models, django-rest-framework

在我的 rest_framework 设置中，我将 SessionAuthentication 设置为默认身份验证类

```
'DEFAULT_AUTHENTICATION_CLASSES': (
    'rest_framework.authentication.SessionAuthentication',
) 
```

问题是我的 User DELETE api 视图试图折叠不存在的 authtoken_token 表上的删除（因为我不需要它），从而引发数据库异常。

具体来说，当在 DestroyModelMixin.destroy 中调用 obj.delete() 时，会引发此异常：

```
DatabaseError: relation "authtoken_token" does not exist
LINE 1: ...oken"."user_id", "authtoken_token"."created" FROM "authtoken... 
```

是否需要 syncdb rest_framework 的模型，即使不需要它们？

有没有办法在不包含 authtoken.models 的情况下使用 SessionAuthentication？

难道我做错了什么？

（从 rest_framework/authentication.py 中完全删除 authtoken.models.Token 似乎可以解决问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:51:02.953

这是根本原因...

[https://code.djangoproject.com/ticket/19422](https://code.djangoproject.com/ticket/19422)

同时将整理出一个解决方法，这可能只涉及确保`Token`不会在任何地方导入，除非`rest_framework.authtoken`在`INSTALLED_APPS`.

# scala - Akka.io：每个 Actor 的线程

> ID：15160324
> 
> 赞同：0
> 
> 时间：2013-03-01T14:39:41.537
> 
> 标签：scala, akka

需要异步运行 1000 次操作，我选择使用 Akka。在 Actor Ref 执行器中扭曲并向 ref 发送 1000 条消息。

我怎么能确定：

*   所有 1000 条消息都将以 asnc 方式发送
*   每个都将持有单独的、独立的线程（这是由于 io 使用而需要的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:51:33.800

您可以使用`PinnedDispatcher`来保证每个 actor 一个线程，并且 Akka 中的所有内容都是异步的，因此您可以保证消息是异步的。如果您使用`!`运营商发送消息，则消息以即发即弃的方式发送。

有关更多详细信息，请参阅[此](http://doc.akka.io/docs/akka/snapshot/scala/dispatchers.html)内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:51:10.987

尝试使用[PinnedDispatcher](http://doc.akka.io/docs/akka/snapshot/scala/dispatchers.html#Types_of_dispatchers)

配置示例和代码在[这里](http://doc.akka.io/docs/akka/snapshot/scala/dispatchers.html#More_dispatcher_configuration_examples)

在使用有界邮箱之前不会阻塞

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:08:17.700

感谢大家的回复，实际上对于我的 RoundRobinRouter （其中路由数等于预期线程数）和带有标志 thread-pool-executor.allow-core-timeout=off 的 PinnedDispatcher 的组合工作正常。

# oracle-adf - 表内的 ADF 迭代

> ID：15160327
> 
> 赞同：0
> 
> 时间：2013-03-01T14:39:48.033
> 
> 标签：oracle-adf

您好，我有一个对象列表，其中又包含一个列表。我想在表格中迭代这些。像这样的东西。

```
<af:table value="#{backingBeanScope.evaluateBackingBean.subjects}"
var="subject">

<af:forEach var="course" items="${subject.courses}">

<af:column sortable="false"
headerText="#{evaluategyansokanviewcontrollerBundle.SUBJECT}"
id="colSubject" width="200">
<af:outputText value="#{subject.name}"id="ot2"/>
</af:column>

<af:column sortable="false"
headerText="#{evaluategyansokanviewcontrollerBundle.COURSE}"
id="colCourse">
<af:outputText value="#{course.name}"id="ot3"/>
</af:column> 
```

...

我知道这段代码不起作用，但它只是为了让我知道我想要什么。

问候约翰内斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:59:49.550

对我来说，最简单的做法是在使用 JSF 进行渲染之前在 Java 中将其展平。那么你只需要在你的表中使用“正常”的语法。所以也许是一个按学科排列的课程数组列表：

```
List<CourseBySubject> coursesBySubject;

public List<CourseBySubject> getCoursesBySubject() {
    if (coursesBySubject == null) {
        coursesBySubject = new ArrayList<Object>();
        Iterator<Subject> subjectIterator = subjects.iterator();
        while (subjectIterator.hasNext()) {
            Subject subject = subjectIterator.next();
            courses = subject.getCourses();
            Iterator<Course> courseIterator = courses.iterator();
            while (subjectIterator.hasNext()) {
                Course course = courseIterator.next();
                coursesBySubject.add(new CourseBySubject(subject.name, course.name));
            }
        }

    }
    return coursesBySubject;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T16:13:03.327

You can use an af:table within an af:table > af:column. Supported upto ADF 11.1.1.6 though.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T18:32:29.803

如果您正在寻找两层数据——即带有数据的数据或带有集合子集的集合，那么 af:table 并不是真正适合使用的组件。

根据您想要实现的目标，您可能会首先考虑以下一些问题：

1.  行选择对您来说重要吗？
2.  这更像是 UI 布局（只读）还是数据布局

如果您更倾向于 UI 布局，那么 adf 有两个组件可以很好地满足您的需求：

*   af:迭代器
*   af:foreach

两者都非常相似，除了 af:foreach 仅支持 List 类型，而迭代器将在与 bindings.data.collectionModel 一起使用时提供灵活性。

还值得一提的是 af:foreach 允许您拥有组件绑定，而 af:iterator 将表示节点，这意味着它生成的布局将仅被视为服务器端的一个对象。

我假设您正在寻找具有两个级别的基于表的数据，并且行选择对您很重要。在这种情况下，af:treetable 是您最好的选择，因为您可以获得其他功能，例如折叠/取消折叠父行。

如果您没有使用绑定 collectionModel（dataControl 模型）——有些人可能看起来有问题——那么请确保您的 POJO 集合为子集合提供了访问器（设置器）。

例如。

```
public abstract class Foo {
    public abstract List<Country> getCountries();

    public static abstract class Country {
        public abstract List<City> getCities();
    }

    public static abstract class City {
    }
} 
```

以防万一您想知道为什么不能使用 af:table 主要是因为 af:treeTable 允许您同时选择父级和子级，事实上，如果选择是针对父级和子级的，您的 bean 甚至可以区分差异孩子。

话虽如此，您还可以选择使用 af:table 并错过一些 af:treeTable 功能，并且可能依赖一些自定义属性来区分您选择的内容。

# api - Heroku 应用程序的 API 子域，可以吗？

> ID：15160328
> 
> 赞同：8
> 
> 时间：2013-03-01T14:39:50.000
> 
> 标签：api, rest, heroku, subdomain

我正在尝试构建一个 API，但我担心我的所有资源要么无法通过 api.myapp.com 域访问，要么它们将“使用”错误的 uri。

我为我的域名添加了 CNAME 以指向我的 Heroku 应用程序。（例如：浏览 www.myapp.com 会将您带到[https://myherokuapp.heroku.com](https://myherokuapp.heroku.com)）

我想设置一个 API 子域，以便对 https://api.myapp.com 的 GET **[将](https://api.myapp.com)**您带到**[https://myherokuapp.heroku.com/api/v1](https://myherokuapp.heroku.com/api/v1)**

最好的情况是对**[https://api.myapp.com/accounts/12345](https://api.myapp.com/accounts/12345)**的 POST将创建一个新帐户。这甚至可能吗？

（我知道 Heroku 无法使用子域（例如：mysubdomain.myappname.heroku.com））

我相信答案可能在三个不同的地方：

1.  与 DNS 提供商转发配置有关（可能与“A”记录有关）。
2.  在 Heroku 中配置的东西，可能是处理域/子域的付费插件。
3.  处理我的应用程序中的所有子域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:56:40.433

如果您想区分 api.mydomain.com 和 www.mydomain.com 并为您的 API 请求使用不同的控制器，那么您当然可以使用受限于您的 api 子域的 Rails 路由来处理这个问题

```
constraints :subdomain => "api" do
  scope :module => "api", :as => "api" do
   resources :posts
  end
end 
```

然后它将使用应用程序的 app/controllers/api 文件夹中的 posts_controller.rb 。

然后，您将让 www.mydomain.com 和 api.mydomain.com 为您的应用程序添加一个自定义域，然后路由将处理其余部分。

您可能还想研究[Grape](https://github.com/intridea/grape) Gem 以帮助构建您的 api

# java - PropertySourcesPlaceholderConfigurer 的动态位置

> ID：15160344
> 
> 赞同：0
> 
> 时间：2013-03-01T14:40:31.450
> 
> 标签：java, spring, properties

我有占位符的基于注释的 bean 配置。在这个占位符的帮助下，我可以很容易地使用我想要的属性值。

```
@Bean
    public static PropertySourcesPlaceholderConfigurer initPlaceholder() {
        PropertySourcesPlaceholderConfigurer placeholder = new PropertySourcesPlaceholderConfigurer();
        placeholder.setLocation(new ClassPathResource("some.properties"));
        placeholder.setIgnoreUnresolvablePlaceholders(true);

        return placeholder;
    } 
```

如何使用 ${some.properties} 动态值设置此占位符？

```
placeholder.setLocation(new ClassPathResource(ANY_PROPERTIES)); 
```

我不能使用 initPlaceholder(String property)...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:39:04.813

我对此所做的是创建自己的 PropertyPlaceHolder （获取外部属性文件）

```
public class MyPropertyPlaceholderConfigurer extends PropertyPlaceholderConfigurer {

public static final String ANY_PROPERTY = "ANY_PROPERTY";

private static final Log LOG = LogFactory.getLog(MyPropertyPlaceholderConfigurer.class);

@Override
protected void loadProperties(Properties props) throws IOException {

    String anyProperty = System.getProperty(ANY_PROPERTY);

    if (StringUtils.isEmpty(anyProperty)) {
        LOG.info("Using default configuration");
        super.loadProperties(props);

    } else {
        LOG.info("Setting HDFS LOCATION PATH TO : " + anyProperty);

        try {
            Path pt = new Path(anyProperty);
            Configuration conf = new Configuration();
            conf.set(FileSystem.FS_DEFAULT_NAME_KEY, anyProperty);
            FileSystem fs = FileSystem.get(conf);
            FSDataInputStream fileOpen = fs.open(pt);
            BufferedReader br = new BufferedReader(new InputStreamReader(fileOpen));
            props.load(br);
        } catch (Exception e) {
            LOG.error(e);
        }
    }

} 
```

# iis - “由于扩展 配置，无法提供您请求的页面。” 错误信息

> ID：15160358
> 
> 赞同：0
> 
> 时间：2013-03-01T14:41:19.880
> 
> 标签：iis, asp-classic

我正在尝试在 iis 7.5 中运行类 asp 站点，我已验证 asp 功能已打开。我已经阅读了运行 aspnet_regiis.exe 将解决的其他问题。但是如何。我运行它并获得有关命令的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T06:04:16.760

尝试使用请求 Path = *.asp
Executable = C:\Windows\System32\inetsrv\asp.dll添加处理程序映射

希望这会奏效

# facebook - FB JS API - 如何只获得新评论

> ID：15160368
> 
> 赞同：0
> 
> 时间：2013-03-01T14:41:37.060
> 
> 标签：facebook, api

使用 FB JS API（图形或 fql），我如何获得自上次请求（提供的日期时间）以来的新评论。

从那以后我可以收到帖子，但是如果我同步数据，那么有人会添加评论，我似乎无法获得新评论；除了提交对所有帖子 ID 的所有评论的请求之外，我还解析了它们！

欢迎任何指点！

谢谢，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:53:32.747

FQL 中表格的文档`comment`列出了一个`time`参数。你是对的，它不可索引，但它仍然可以在查询中使用。

这种类型的查询将满足您正在寻找的内容：

`SELECT text FROM comment WHERE post_id="**POST_ID**" AND time > **UNIX_TIMESTAMP_OF_YOUR_LAST_CHECK**`

# c++ - 内联成员函数的 C++ 链接错误

> ID：15160371
> 
> 赞同：-2
> 
> 时间：2013-03-01T14:41:44.217
> 
> 标签：c++

我有以下代码：

*文件.h*

```
class IFile
{
public:
    IFile();
    ~IFile(void);

    inline bool IsValidFileType() const;
}; 
```

*文件.cpp*

```
IFile::IFile()
{
    //IsValidFileType();
}

IFile::~IFile(void)
{
}

inline bool IFile::IsValidFileType() const
{
          return true;
} 
```

*主文件*

```
int main(int argc, char* argv[])
{
    IFile* pFile = new IFile();
    pFile->IsValidFileType();

    return 0;
} 
```

编译代码时出现以下错误：error LNK2019: unresolved external symbol "public: bool __thiscall IFile::IsValidFileType(void)const" (?IsValidFileType@IFile@@QBE_NXZ) referenced in function _main

如果我更改函数的“内联”或“常量”限定符，或者在构造函数中调用它，程序将编译。你能解释一下这种行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:44:28.330

编译器如何内联一个在编译时看不到代码的函数？编译`main.cpp`时，编译器被要求执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:44:33.700

内联函数的代码被编译到每个引用它的翻译单元中（这就是想法，毕竟）。意思是，您需要在头文件中包含代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:45:08.753

`inline`关键字向编译器承诺，它将能够在使用它的每个翻译单元（*.cpp 文件）中看到定义。你违背了这个承诺，因为 main.cpp 看不到定义，尽管它包含 IFile.h。

通常带有`inline`关键字的函数应该定义在头文件中，而不是源文件中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T14:45:28.977

由于该函数是内联的，因此您必须在头文件中定义它，而不是在`cpp`文件中。

# powershell - 我需要散列（混淆）CSV 文件中的一列数据。首选脚本

> ID：15160372
> 
> 赞同：2
> 
> 时间：2013-03-01T14:41:49.723
> 
> 标签：powershell, csv, scripting, batch-file

我有一个带有标题行的管道分隔文本文件。（我在问题中说 CSV 是为了让它更容易理解......我想大多数解决方案都适用于任何一种格式。）

该文件如下所示：

```
COLUMN1|COLUMN2|COLUMN3|COLUMN4|...|
Field1|Field2|Field3|Field4|...|
... 
```

我需要隐藏（例如）第 3 列和第 9 列中的数据，而不影响文件中的任何其他条目。

我想使用 SHA1 或 MD5 之类的散列算法来执行此操作，以便相同的字符串在遇到它们的任何地方都将解析为相同的散列值。

**编辑 - 为什么我要这样做**
我需要将一些数据发送给第三方，并且某些列包含敏感信息（例如客户姓名）。我需要完整的文件，并且在替换字符串的地方，我需要在每次遇到它时都以相同的方式完成（以便保留任何映射或分组）。它不需要军事加密，只是为了难以逆转。由于我需要间歇性地这样做，因此脚本化的解决方案将是理想的。
**/编辑**

使用命令行工具或脚本实现此目的的最简单方法是什么？

根据偏好，我想要一个批处理脚本或 PowerShell 脚本，因为它不需要任何额外的软件来实现......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:16:39.723

尝试

```
(Import-Csv .\my.csv -delimiter '|' ) | ForEach-Object{     
    $_.column3 = $_.column3.gethashcode()
    $_.column4 = $_.column4.gethashcode()
    $_    
} | Export-Csv .\myobfuscated.csv -NoTypeInformation -delimiter '|' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:16:47.250

```
$md5 = new-object -TypeName Security.Cryptography.MD5CryptoServiceProvider
$utf8 = new-object -TypeName Text.UTF8Encoding

import-csv original.csv -delimiter '|' |
foreach {   
    $_.Column3 = [BitConverter]::ToString($md5.ComputeHash($utf8.GetBytes($_.Column3)))
    $_.Column9 = [BitConverter]::ToString($md5.ComputeHash($utf8.GetBytes($_.Column9)))
    $_
} |
export-csv encrypted.csv -delimiter '|' -noTypeInformation 
```

# jquery - 将命名锚点添加到 jquery 水平滑块

> ID：15160375
> 
> 赞同：0
> 
> 时间：2013-03-01T14:41:58.233
> 
> 标签：jquery, horizontal-scrolling

我正在使用水平滑块脚本在单个页面中导航 10 张幻灯片，并且我想为每张幻灯片添加命名锚点，以便可以从 css 下拉菜单导航到给定的幻灯片。

**这是我页面上的脚本：**

```
 $(function(){
        if (self.location.href == top.location.href){
            $("body").css({'z-index':'1', font:"normal 10px/13px 'trebuchet MS', verdana, sans-serif"});
            var logo=$("<a href='http://pupunzi.com'><img id='logo' border='0' style='display:none;'></a>");
            $("#logo").fadeIn();
        }

        $("#myScroll").mbScrollable ({
            width:940,
            elementsInPage:1,
            elementMargin:2,
            shadow:"",
            height:"510",
            controls:"#controls",
            slideTimer:1000,
            autoscroll:false,
            scrollTimer:3000
        });

        setTimeout(function(){$("#wrapper").fadeIn();},100);
    });
</script> 
```

**这是HTML：**

```
<div id="wrapper">
     <div id="myScroll" align="left">
        <div class="subtitles" style="background-color:#FFFFFF">About Acoustic Hailing Devices</div>
        <div class="subtitles" style="background-color:#FFFFFF">Anti-Piracy</div>
        <div class="subtitles" style="background-color:#FFFFFF">Crowd Control</div>
        <div class="subtitles" style="background-color:#FFFFFF">Public Address</div>
        <div class="subtitles" style="background-color:#FFFFFF">Search & Rescue</div>
        <div class="subtitles" style="background-color:#FFFFFF">Industrial Alerting</div>
        <div class="subtitles" style="background-color:#FFFFFF">Perimeter Security</div>
        <div class="subtitles" style="background-color:#FFFFFF">Event Broadcasting</div>
        <div class="subtitles" style="background-color:#FFFFFF">Border Enforcement</div>
        <div class="subtitles" style="background-color:#FFFFFF"><a name="animal_control" id="animal_control"></a>Animal Control</div>
    </div>

    <div id="controls">
        <div class="scroll_nav_text">first</div>
        <div class="scroll_nav_text">prev</div>
        <div class="scroll_nav_text">next</div>
        <div class="scroll_nav_text">last</div>
        <div class="pageIndex"></div>
    </div>
</div>
</div> 
```

**和 CSS（这里可能不需要？）**

```
#wrapper{
        position:absolute;
        display:none;
        margin-left:-20px;
        margin-top:50px;
        width:1040px;
        height:600px;
        z-index:1;
    }
    #myScroll .scrollEl{
        position:relative;
        display:none;
        height:510px;
        z-index:1;
        border: 1px solid #CCCCCC;
        border-radius: 4px;
        -moz-border-radius: 4px;
        -webkit-border-radius: 4px;
        padding-right: 10px;
        padding-bottom: 10px;
        padding-left: 10px;
    }
    #controls div, #controls1 div{
        margin-top:5px;
        background:#fff;
        display:inline-block;
        padding:5px 5px;
        cursor:pointer;
        -moz-border-radius: 4px;
        -webkit-border-radius: 4px;
        -moz-box-shadow:#999 2px 2px 2px;
        -webkit-box-shadow:#999 2px 2px 2px;
        z-index:1;
    }
    #controls .sel, #controls1 .sel{
        color:#000000 !important;
        font-weight:bold;
    }
    #controls .disabled, #controls1 .disabled{
        color:#333333;
    }
    #controls .page, #controls1 .page{
        padding:10px;
        color:#333333;
    } 
```

# apache - 使用 .htaccess 拒绝用户访问 php.ini 文件

> ID：15160376
> 
> 赞同：4
> 
> 时间：2013-03-01T14:42:05.637
> 
> 标签：apache, .htaccess

因为我们在 php.ini 文件中有一些自定义配置，我们显然必须将其存储在我们网站的根目录中，因此任何用户都可以看到它。

例如，我如何阻止人们通过浏览器访问它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T16:12:41.010

试着把它放在你的`.htaccess`：

```
<FilesMatch "php.ini">
    Order allow,deny
    Deny from all
</FilesMatch> 
```

它拒绝任何试图联系的人访问`php.ini`。

编辑：Allow 和 Order 在 Apache 2.4 中已弃用。你应该`Require all denied`改用。

```
<FilesMatch "php.ini">
    Require all denied
</FilesMatch> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:32:31.630

一种方法是在 php.ini 文件的开头插入类似这样的内容：

```
/***************DO NOT ALLOW DIRECT ACCESS************************************/
if ( (strpos( strtolower( $_SERVER[ 'SCRIPT_NAME' ] ), strtolower( basename( __FILE__ ) ) ) ) !== FALSE ) { // TRUE if the script's file name is found in the URL
  header( 'HTTP/1.0 403 Forbidden' );
  die( '<h2>Forbidden! Access to this page is forbidden.</h2>' );
}
/*****************************************************************************/ 
```

# java - 我应该嘲笑什么？

> ID：15160379
> 
> 赞同：6
> 
> 时间：2013-03-01T14:42:11.593
> 
> 标签：java, unit-testing, testing, junit, mockito

我也是 Mockito 和 PowerMockito 的新手。我发现我无法使用纯 Mockito 测试静态方法，所以我需要使用 PowerMockito（对吗？）。

我有一个非常简单的类，叫做 Validate 用这个非常简单的方法

```
public class Validate {
        public final static void stateNotNull(
            final Object object,
            final String message) {
    if (message == null) {
        throw new IllegalArgumentException("Exception message is a null object!");
    }
    if (object == null) {
        throw new IllegalStateException(message);
    }
} 
```

所以我需要验证：

1）当我在空消息参数上调用该静态方法时，会调用 IllegalArgumentException
2）当我在空对象参数上调用该静态方法时，会调用 IllegalStateException

从我目前得到的，我写了这个测试：

```
import static org.mockito.Matchers.anyString;
import static org.mockito.Matchers.isNull;

import org.junit.Before;
import org.junit.runner.RunWith;
import org.powermock.api.mockito.PowerMockito;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;
import org.testng.annotations.Test;

@RunWith(PowerMockRunner.class)
@PrepareForTest(Validate.class)
public class ValidateTestCase {

    @Test(expectedExceptions = { IllegalStateException.class })
    public void stateNotNullTest() throws Exception {
        PowerMockito.mockStatic(Validate.class);
        Validate mock = PowerMockito.mock(Validate.class);
        PowerMockito.doThrow(new IllegalStateException())
            .when(mock)
            .stateNotNull(isNull(), anyString());
        Validate.stateNotNull(null, null);
    }
} 
```

所以这表示我模拟了 Validate 类，并且我正在检查当在该方法上调用 mock 时，使用 null 参数作为对象，任何字符串作为消息，抛出 IllegalStateException。

现在，我真的不明白。为什么我不能直接调用那个方法，放弃整个巫术魔法来模拟那个静态类？在我看来，除非我调用 Validate.stateNotNull，否则测试无论如何都会通过......我应该模拟它的原因是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T14:45:02.567

你不应该模拟你正在测试的类和方法。您应该只模拟执行测试本身所需的方法。

例如，如果您需要来自 Web 服务的一些对象来执行测试，您可以模拟 Web 服务调用，因此您不需要实际调用 Web 服务。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-01T14:55:35.713

首先，决定你的目标是什么以及你想测试什么。您的测试不是在测试您的 Validate 类方法，而是在创建一个行为类似于该方法的模拟，正如[Fortega 指出的那样](https://stackoverflow.com/a/15160442/217324)。确定您正在测试什么（被测对象）以及执行测试所需的内容（协作者），然后查看协作者并确定它们是否易于创建或是否需要嘲笑他们。

对于像此类不依赖任何东西的东西，我建议完全不使用模拟。这里没有什么需要嘲笑的，测试可以这样写：

```
import static org.junit.Assert.*;

public class ValidateTestCase {

    @Test
    public void testHappyPath() throws Exception {
        Validate.stateNotNull("", "");
    }

    @Test
    public void testNullMessage() throws Exception {
        try {
            Validate.stateNotNull(null, null);
            fail();
        }
        catch (IllegalStateException e) {
            String expected = "Exception message is a null object!"
            assertEquals(expected, e.getMessage());
        }
    }

    @Test(expected=IllegalStateException.class)
    public void testNullObject() throws Exception {
        Validate.stateNotNull(null, "test");
    }
} 
```

这会告诉您代码是否按照您的意愿执行。

不要模拟，除非由于它是外部资源（如文件系统或数据库）或某些复杂的子系统，您希望避免将某些依赖项引入测试。模拟框架可能非常有用，但它们增加了复杂性，它们可以过度指定它们正在测试的事物的行为，使测试变得脆弱，并且它们可能使测试难以阅读。如果可以的话，不要他们。

# php - PHP中exe文件的下载计数器

> ID：15160381
> 
> 赞同：0
> 
> 时间：2013-03-01T14:42:13.607
> 
> 标签：php, download, counter

我在计算文件下载量时遇到问题。如果下载文件的链接如下所示，则没有问题：http://your.site.domain/download.php?file=filename.exe&customer=ABC_423。但是，我的客户希望从这样的链接中统计统计信息：http://your.site.domain/downloadsfolder/ABC_423/filename.exe，他还需要在其他站点上热链接该链接。

我认为 .htaccess 文件中会有解决方案，但我不知道如何进行正确的重定向。

我的 PHP 脚本如下所示：

```

```
session_start();
define('SERVER_NAME', 'www.siteaddress.domain');
define('DOWNLOAD_PATH', 'http:// siteaddress.domain/versions/download');
define('DOWNLOAD_FILE', 'Setup.exe');

$filename = DOWNLOAD_PATH . '/' . $_GET['customer'] . '/' . DOWNLOAD_FILE;

$headers = get_headers($filename);

if ($headers[0] == 'HTTP/1.1 200 OK'){
  // file exists, begin download procedure
  if(isset($_GET['customer'])){
    // begin update statistics
    // mysql query to update specified row
  }
  // headers for downloading file
  header("Content-Type: application/force-download");
  header('Content-Type: application/x-unknown');
  header("Content-Type: application/octet-stream");
  //header("Content-Type: application/download"); // not sure if needed
  header("Content-Disposition: attachment; filename=".basename($filename).";");
  header("Accept-Ranges: bytes");
  header("Content-Transfer-Encoding: binary");
  header("Content-Length: ".remote_filesize(SERVER_NAME, $filename));
  ob_clean();
  flush();
  readfile($filename);
  exit;
}else{
  echo 'File not found';
  exit;
} 
```

            回答 #1

赞同：2

时间：2013-03-01T14:51:24.863

这是一个简单`RewriteRule`的`.htaccess`. 像这样的东西：

```
RewriteEngine On
RewriteRule   ^/downloadsfolder/(.*)/(.*)     /download.php?file=$2&customer=$1    [L] 
```

观察如何检测随机字符序列`(.*)`，然后将其`$1`与`$2`翻译后的 URL 中检测到的每个项目一起使用。

希望有帮助！

```

# web.py - 使用 /(.+) 时，我在 web.py 中收到 404 错误（新手 Q）

> ID：15160386
> 
> 赞同：0
> 
> 时间：2013-03-01T14:42:24.540
> 
> 标签：web.py

这是我的代码和我的问题。

```
import web

render = web.template.render('templates/')

urls = (
    '/(.+)', 'index'
)

class index:
        def GET(self, lang):
            return render.index(lang)

if __name__=="__main__":
    app = web.application(urls, globals())
    app.run() 
```

我的 index.html 就是这个：

```
$def with (lang)

$if lang == 'en':
    I just wanted to say <em>hello</em>
$elif lang =='es' or lang == '':
    <em>Hola</em>, mundo!
$else:
    página no disponible en este idioma 
```

问题是，当我运行此代码时，出现 404 错误。我认为问题可能出在 urls 部分，特别是 /(.+)。我认为我没有正确使用它，我想让它工作，这样我就可以使用多个参数。当我使用 /(.*) 它可以工作，但不能用于多个参数，并且文档说对于多个参数我必须使用 + 而不是 *

预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:04:27.820

您应该研究正则表达式，webpy 仅将其与路径匹配并将匹配的组传递给控制器​​方法。您可以将 group 标记为可选，`?`因此如果它为空，则不会捕获它，并且默认情况下 lang 将设置为 None。

同样`.`在正则表达式中表示任何符号，以捕获您最好使用`\w`匹配任何单词字符的语言。

```
urls = (
    '/(\w+)?', 'index'
)

class index:
    def GET(self, lang=None):
        return render.index(lang) 
```

# performance - mongodb 更新导致读取速度极慢

> ID：15160392
> 
> 赞同：3
> 
> 时间：2013-03-01T14:42:44.620
> 
> 标签：performance, mongodb, memory

我对 mongoDB 比较陌生。我建立了一个带有**2 个副本集**的 shard mongo 集群；每个集合在一个分片中。-> **4个mongo恶魔**

守护进程分布在**2 个 WIN 服务器上，每个服务器有 8GB 内存**。我有一个包含 10 个 mio 文档（~ 600bytes / doc）的测试集合，并使用 c# 驱动程序连接到 mongos（primaryPreferred）

现在，如果我在分片键上运行数千个单次读取查询，我可以看到 mongo 占用了越来越多的内存并停滞在 7.2GB 左右。几乎没有更多的页面错误并且查询非常快。好的！对不同文档属性的更复杂查询也是如此（这些查询的组合索引存在）

**但**

如果我只执行几个更新查询，我的内存使用量就会大幅下降......就像 mongo 立即**释放 3GB 的 RAM**并且如此快速的读取查询变得非常慢。

如果我连续启动 500k upserts（保存），情况会变得更糟。 **一个需要 2 秒才能运行的复杂查询现在需要 22 分钟。**

对于具有相同查询参数的计数查询，我得到相同的行为。

这是一个相当正常的 mongoDB 行为还是我错过了设置？

---更新@hwatkins

1.  MongoDB版本：2.2.2
2.  为单个 upsert 扫描 1 个文档
3.  我在批量更新期间有相当高的磁盘活动

explain() 用于在 upsert 之前进行复杂的**计数查询**

```
Count Explain: { "clusteredType" : "ParallelSort", "shards" : { "set1/xxxx:1234,yyyy:1234" : [{ "cursor" : "BtreeCursor AC", "isMultiKey" : false, "n" : 20799, "nscannedObjects" : 292741, "nscanned" : 292741, "nscannedObjectsAllPlans" : 294290, "nscannedAllPlans" : 294290, "scanAndOrder" : false, "indexOnly" : false, "nYields" : 2, "nChunkSkips" : 0, "millis" : 2382, "indexBounds" : { "f.14.b" : [["A", "A"]], "f.500.b" : [[10, 50]] }, "allPlans" : [{ "cursor" : "BtreeCursor AC", "n" : 20795, "nscannedObjects" : 292741, "nscanned" : 292741, "indexBounds" : { "f.14.b" : [["A", "A"]], "f.500.b" : [[10, 50]] } }, { "cursor" : "BasicCursor", "n" : 4, "nscannedObjects" : 1549, "nscanned" : 1549, "indexBounds" : { } }], "oldPlan" : { "cursor" : "BtreeCursor AC", "indexBounds" : { "f.14.b" : [["A", "A"]], "f.500.b" : [[10, 50]] } }, "server" : "xxxx:1234" }], "set2/xxxx:56789,yyyy:56789" : [{ "cursor" : "BtreeCursor AC", "isMultiKey" : false, "n" : 7000, "nscannedObjects" : 97692, "nscanned" : 97692, "nscannedObjectsAllPlans" : 98941, "nscannedAllPlans" : 98941, "scanAndOrder" : false, "indexOnly" : false, "nYields" : 0, "nChunkSkips" : 0, "millis" : 729, "indexBounds" : { "f.14.b" : [["A", "A"]], "f.500.b" : [[10, 50]] }, "allPlans" : [{ "cursor" : "BtreeCursor AC", "n" : 6996, "nscannedObjects" : 97692, "nscanned" : 97692, "indexBounds" : { "f.14.b" : [["A", "A"]], "f.500.b" : [[10, 50]] } }, { "cursor" : "BasicCursor", "n" : 4, "nscannedObjects" : 1249, "nscanned" : 1249, "indexBounds" : { } }], "oldPlan" : { "cursor" : "BtreeCursor AC", "indexBounds" : { "f.14.b" : [["A", "A"]], "f.500.b" : [[10, 50]] } }, "server" : "yyyy:56789" }] }, "cursor" : "BtreeCursor AC", "n" : 27799, "nChunkSkips" : 0, "nYields" : 2, "nscanned" : 390433, "nscannedAllPlans" : 393231, "nscannedObjects" : 390433, "nscannedObjectsAllPlans" : 393231, "millisShardTotal" : 3111, "millisShardAvg" : 1555, "numQueries" : 2, "numShards" : 2, "millis" : 2384 } 
```

对同一查询进行 upsert 后的 explain()

```
{ "clusteredType" : "ParallelSort", "shards" : { "set1/xxxx:1234,yyyy:1234" : [{ "cursor" : "BtreeCursor AC", "isMultiKey" : false, "n" : 20799, "nscannedObjects" : 292741, "nscanned" : 292741, "nscannedObjectsAllPlans" : 294290, "nscannedAllPlans" : 294290, "scanAndOrder" : false, "indexOnly" : false, "nYields" : 379, "nChunkSkips" : 0, "millis" : 391470, "indexBounds" : { "f.14.b" : [["A", "A"]], "f.500.b" : [[10, 50]] }, "allPlans" : [{ "cursor" : "BtreeCursor AC", "n" : 20795, "nscannedObjects" : 292741, "nscanned" : 292741, "indexBounds" : { "f.14.b" : [["A", "A"]], "f.500.b" : [[10, 50]] } }, { "cursor" : "BasicCursor", "n" : 4, "nscannedObjects" : 1549, "nscanned" : 1549, "indexBounds" : { } }], "server" : "xxxx:1234" }], "set2/xxxx:56789,yyyy:56789" : [{ "cursor" : "BtreeCursor AC", "isMultiKey" : false, "n" : 7000, "nscannedObjects" : 97692, "nscanned" : 97692, "nscannedObjectsAllPlans" : 98941, "nscannedAllPlans" : 98941, "scanAndOrder" : false, "indexOnly" : false, "nYields" : 0, "nChunkSkips" : 0, "millis" : 910, "indexBounds" : { "f.14.b" : [["A", "A"]], "f.500.b" : [[10, 50]] }, "allPlans" : [{ "cursor" : "BtreeCursor AC", "n" : 6996, "nscannedObjects" : 97692, "nscanned" : 97692, "indexBounds" : { "f.14.b" : [["A", "A"]], "f.500.b" : [[10, 50]] } }, { "cursor" : "BasicCursor", "n" : 4, "nscannedObjects" : 1249, "nscanned" : 1249, "indexBounds" : { } }], "oldPlan" : { "cursor" : "BtreeCursor AC", "indexBounds" : { "f.14.b" : [["A", "A"]], "f.500.b" : [[10, 50]] } }, "server" : "yyyy:56789" }] }, "cursor" : "BtreeCursor AC", "n" : 27799, "nChunkSkips" : 0, "nYields" : 379, "nscanned" : 390433, "nscannedAllPlans" : 393231, "nscannedObjects" : 390433, "nscannedObjectsAllPlans" : 393231, "millisShardTotal" : 392380, "millisShardAvg" : 196190, "numQueries" : 2, "numShards" : 2, "millis" : 391486 } 
```

顺便说一句：*一个单一的 upsert（一个受影响的文档）让内存使用量下降了大约 600MB。--> ~ 4,5GB 内存使用仅在一些查询后达到。

*   如果我从上面获取查询并使用 mongoCursor 在结果集上循环它只需要很长时间......（查询仍在我输入时运行）:(

* * *

更新二@丹尼尔

在这里，您获得了存储在 mongoDB-Cluster 中的示例文档。 **Shard Key**是我的文档的**b**属性（它对应于电话号码）

Upsert：我通过分片键搜索现有文档并更新**f** - 数组的一些属性。然后我为所有这些文档一一调用 mongoDB 驱动程序上的 Save（比如 500k 次）。

有一个索引： { "f.14.b" : 1, "f.500.b" : 1 } 这个索引用于复杂的查询。如上所述，这些查询在批量更新之前很快，而在更新之后非常慢。

```
 {
  "_id" : ObjectId("51248d6xxxxxxxxxxxxx"),
  "b" : "33600000000",
  "f" : {
    "500" : {
      "a" : ISODate("2013-02-20T08:45:38.075Z"),
      "b" : 91
    },
    "14" : {
      "a" : ISODate("2013-02-20T08:45:38.075Z"),
      "b" : "A"
    },
    "1501" : {
      "a" : ISODate("2013-02-20T08:45:38.141Z"),
      "b" : ["X", "Y", "Z"]
    },
    "2000" : {
      "a" : ISODate("2013-02-20T08:45:38.141Z"),
      "b" : false
    }
  }
} 
```

非常感谢，布鲁姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:47:15.813

1.  你用的是什么版本的mongodb？

2.  当您执行 upsert 时，您可以对其进行操作`.explain()`以查看它正在扫描多少文档。

3.  在 upserts 期间磁盘 io 是什么样的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:25:22.263

这很有趣。首先，您的数据看起来不是很均匀分布。您的解释显示 nscanned: 292741 在第一组和 nscanned: 97692 在第二组。相当大的区别。它还显示在第一组 nyields:379 和第二组 nyields:0 上。这意味着只有你从你的集合中阅读不均匀，你可能在给它们写不均匀。如果您选择分布更均匀的分片键，您将从集群中获得更多收益。

至于为什么您的 upserts 会发生这种情况，您是否在现有文档中添加了更多数据？如果是这样，您可能是文档移动的受害者。在您的 mongodb 日志中，您是否看到任何带有 move: 1 的查询？这意味着日志中的慢查询还在磁盘上发生了文档移动，这会导致大量带有索引到数组/子文档的破坏。Mongodb 我相信如果它移动，基本上仍然必须对整个文档进行索引重建，并且必须对子文档/数组的所有索引进行一些大量更新。

文档移动的解决方法是在创建文档时预先分配额外的数据，然后立即将其从文档中删除。Mongo 在磁盘上分配具有固定空间 + 填充因子的所有文档。如果它们超出了空间，则必须将它们在磁盘上移动到更大的区域。如果您创建的文档已经包含额外的数据，然后将其删除，您将在磁盘上为自己提供大量额外的填充以适应您的文档增长。这肯定会浪费空间，但会大大节省性能。

# php - 根据从动态下拉框中选择的值预填充文本字段（在表单中）

> ID：15160395
> 
> 赞同：1
> 
> 时间：2013-03-01T14:43:02.110
> 
> 标签：php, html, mysql

我首先要说我是编码新手，所以我觉得这很困难，最近我也问了一些问题，主要是因为我真的很困，所以非常感谢所有帮助。

我有两张桌子。员工（Employee_ID、First_name、Last_name、Address 等）和培训（Training_ID、Employee_ID、First_name、Last_name、Training_type）。

对于培训表，我有一个表格，用于为员工分配培训类型。

好的，目前，员工 ID 的下拉框包含员工表中员工 ID 的值。

当我从下拉框中选择一个值时，我希望表单中的文本字段（名字和姓氏）更新显示该员工 ID 的名称。我在网上搜索过，但不知道该怎么做。

下面显示了我的表单（php）

```
<html>
   <?php
      $con = mysql_connect("localhost","root","");
      if (!$con)
      {
         die('Could not connect: ' . mysql_error());
      }

      mysql_select_db("hrmwaitrose", $con);
   ?>
   <head>
      <link type="text/css" rel="stylesheet" href="style.css"/>
      <title>Training</title>
   </head>

   <body>
      <div id="content">  
      <h1 align="center">Add Training</h1>

      <form action="inserttraining.php" method="post">
         <div>
            <p>Training ID: <input type="text" name="Training_ID"></p>
            <p>Employee ID:<select id="Employee_ID">
            <?php
               $result = mysql_query("SELECT Employee_ID FROM Employee");
               while ($row = mysql_fetch_row($result)) {
                  echo "<option value=$row[0]>$row[0]</option>";
               }
            ?>
            </select>
            <p>First name: <input type="text" name="First_name"></p>
            <p>Last name: <input type="text" name="Last_name"></p>
            <p>
               Training required?
               <select name="Training">
                  <option value="">Select...</option>
                  <option value="Customer Service">Customer Service</option>
                  <option value="Bailer">Bailer</option>
                  <option value="Reception">Reception</option>
                  <option value="Fish & meat counters">Fish & meat counters</option>
                  <option value="Cheese counters">Cheese counters</option>
               </select>
            </p>
            <input type="submit">
         </form>
      </div>

   </body>
</html> 
```

这是我按下提交按钮时的 php 代码。

```
<?php
   $con = mysql_connect("localhost","root","");
   if (!$con)
   {
      die('Could not connect: ' . mysql_error());
   }

   mysql_select_db("hrmwaitrose", $con);

   $sql="INSERT INTO training (Training_ID, Employee_ID, First_name, Last_name, Training)
         VALUES
         ('$_POST[Training_ID]','$_POST[Employee_ID]','$_POST[First_name]','$_POST[Last_name]','$_POST[Training]')";

   if (!mysql_query($sql,$con))
   {
      die('Error: ' . mysql_error());
   }
   echo "1 record added";

   mysql_close($con);
?> 
```

我认为它是由java完成的？不太确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:03:38.607

您的视图文件：

```
<?php
// First of all, don't make use of mysql_* functions, those are old
$pdo = new PDO("mysql:host=localhost;dbname=hrmwaitrose;charset=utf8", "root", "");
?>
<html>
<head>
        <link type="text/css" rel="stylesheet" href="style.css"/>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> <!-- You will need jQuery (or anyother javascript framework) to accomplish your goal cause you need ajax -->
        <title>Training</title>
    </head>

    <body>
        <div id="content">
            <h1 align="center">Add Training</h1>

            <form action="inserttraining.php" method="post">
                <div>
                    <p>
                        Training ID:
                        <input type="text" name="Training_ID">
                    </p>
                    <p>
                        Employee ID:
                        <select id="Employee_ID">
                            <option value="">Select one</option>
                            <?php
                            $st = $pdo->prepare("SELECT Employee_ID FROM Employee");
                            $st->execute();
                            $rows = $st->fetchAll(PDO::FETCH_ASSOC);
                            foreach ($rows as $row) {
                                ?><option value="<?php echo $row ['Employee_ID']; ?>"><?php echo $row ['Employee_ID']; ?></option><?php
                            }
                        ?>
                        </select>
                    <p>
                        First name:
                        <input type="text" name="First_name" id="First_name">
                    </p>
                    <p>
                        Last name:
                        <input type="text" name="Last_name" id="Last_name">
                    </p>
                    <p>
                        Training required?
                        <select name="Training">
                            <option value="">Select...</option>
                            <option value="Customer Service">Customer Service</option>
                            <option value="Bailer">Bailer</option>
                            <option value="Reception">Reception</option>
                            <option value="Fish & meat counters">Fish & meat counters</option>
                            <option value="Cheese counters">Cheese counters</option>
                        </select>
                    </p>
                    <input type="submit">
            </form>
        </div>
    <script type="text/javascript">
        $(function() { // This code will be executed when DOM is ready
            $('#Employee_ID').change(function() { // When the value for the Employee_ID element change, this will be triggered
                var $self = $(this); // We create an jQuery object with the select inside
                $.post("getEmployeeData.php", { Employee_ID : $self.val()}, function(json) {
                    if (json && json.status) {
                        $('#First_name').val(json.name);
                        $('#Last_name').val(json.lastname);
                    }
                })
            });
        })
    </script>
    </body>
</html> 
```

您的 getEmployeeData.php 文件：

```
<?php
$pdo = new PDO("mysql:host=localhost;dbname=hrmwaitrose;charset=utf8", "root", "");

header("Content-Type:application/json; Charset=utf-8");

// As you can see, here you will have where Employee_ID = :employee_id, this will be
// automatically replaced by the PDO object with the data sent in execute(array('employee_id' => $_POST['Employee_ID']))
// This is a good practice to avoid SqlInyection attacks
$st = $pdo->prepare("SELECT First_name, Last_name FROM Employee WHERE Employee_ID = :employee_id");
$st->execute(array ('employee_id' => $_POST['Employee_ID']));
$data = $st->fetch(PDO::FETCH_ASSOC);

echo json_encode(array ('status' => true, 'name' => $data ['First_name'], 'lastname' => $data ['Last_name'])); 
```

最后一些建议：正确缩进代码。关闭每个 html 标签（`<input />`例如）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:55:35.867

以一种简单的方式，您必须实现一个小的 ajax 方法（例如使用 jQuery），该方法将在您的下拉列表的 onchange 属性上触发。

```
$('select').change(function() {
    var choice = jQuery(this).val();
    $.ajax({
    url:'fakeurl.test.php',
    type:'POST'
    data : {'id' : choice},
    success : function(response) {
        $('input[name="First_name"]').val(response.firstname);
        $('input[name="Last_name"]').val(response.lastname);
    }
    });
}); 
```

当然，在你的 PHP

```
$id = $_POST['id'] ;
SELECT...WHERE employee_id = $id...
[...]
return json_encode(array(
     'lastname'=>$employee_lastname,
     'firstname'=>$employee_firstname
)); 
```

# java - Android 删除重复的文本视图

> ID：15160399
> 
> 赞同：0
> 
> 时间：2013-03-01T14:43:14.410
> 
> 标签：java, android, textview

我得到了存储一些信息的 sqlite 数据库。

```
ID  NUMBER     posX    posY

1   232342     235     346
2   345.4353   344     123
3   23         124     157 
```

我创建了拖放 onTouchlistener，它运行良好，如您所见，它在数据库中存储了一些信息。

**DragEvent.ACTION_DRAG_LOCATION：**

```
mCurX = (int) event.getX();
mCurY = (int) event.getY(); 
```

**DragEvent.ACTION_DROP**

```
final String sql = "INSERT or REPLACE INTO number_dash (numbers, X, Y) VALUES ('"+Dropped.getText()+ "', '"+ mCurX+ "', '"+ mCurY + "')";
db.execSQL(sql); 
```

在我的数据库中插入后，我使用**select**语句，它也可以完美运行。

```
 Cursor newQuery = db.query("number_dash",null, null, null, null, null, null,null);

    if (newQuery.moveToFirst()) {
      do {
        int ID = Integer.parseInt(newQuery.getString(0));
        String number = newQuery.getString(1);
        float X = Integer.parseInt(newQuery.getString(2)) - 40;
        float Y = Integer.parseInt(newQuery.getString(3)) - 40;

        TX = new TextView(MainActivity.this);
        TX.setOnTouchListener(new ChoiceTouchListener());

        TX.setText(number);
        TX.setId(ID);
        TX.setX(X);
        TX.setY(Y);
        TX.setTextColor(Color.parseColor("#FFFFFF"));
     } while (newQuery.moveToNext());
   } 
```

当我写***更新声明时，我以为我的项目快完成了***

如果我再次触摸 Texview 并拖动到另一个地方（在**相对布局**中）我的更新语句运行良好，但旧的 Texview 也保留在那里。

![在此处输入图像描述](../Images/b66536e241b3552f1dc3b8e2b0b3b21c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:01:03.967

如果我理解得很好，你不想在屏幕上有重复的值，对吗？为避免这种情况，您可能有一个空数组，并且在您想要添加值（touchlistener）之前，您可以添加 if 语句.. 像这样的东西：

```
if (!array.contains(value)) {
   array.add(value);
} 
```

只要它们没有相同的数字，这将继续添加文本视图..

# apache-pig - 如何在 Pig 中读取包列表？

> ID：15160400
> 
> 赞同：3
> 
> 时间：2013-03-01T14:43:15.277
> 
> 标签：apache-pig

如何在 Pig 中读取包列表？

我试过：

```
grunt> cat sample.txt
{a,b},{},{c,d}
grunt> data = LOAD 'sample.txt' AS (a:bag{}, b:bag{}, c:bag{});
grunt> DUMP data
({},,) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T19:43:32.933

将数据读入 Pig 的默认方法是`PigStorage('\t')`——也就是说，它假定您的数据是制表符分隔的。你的是逗号分隔的。所以你应该写`LOAD 'sample.txt' USING PigStorage(',') AS...`。

但是，您的数据不是正确的 Pig bag 格式。请记住，包是元组的集合。如果您无法预处理您的输入，则必须编写一个 UDF 来解析您给出的表单的输入。所以这*应该*有效：

```
grunt> cat tmp/data.txt
{(a),(b)},{},{(c),(d)}
grunt> data = LOAD 'tmp/data.txt' USING PigStorage(',') AS (a:bag{}, b:bag{}, c:bag{});
grunt> DUMP data;
(,,{}) 
```

什么地方出了错？您的输入字段分隔符 ( `,`) 与袋记录分隔符相同的事实使 Pig 感到困惑。它将您的输入解析为字段`{(a)`、`(b)}`和`{}`，这就是为什么只有第三个字段最终成为袋子的原因。这就是为什么您会看到类似的警告消息`Encountered Warning FIELD_DISCARDED_TYPE_CONVERSION_FAILED 2 time(s)`。

如果可以，请尝试使用制表符或空格（或分号，或...）而不是逗号：

```
grunt> cat tmp/data.txt                                                                
{(a),(b)}       {}      {(c),(d)}
grunt> data = LOAD 'tmp/data.txt' AS (a:bag{}, b:bag{}, c:bag{});                      
grunt> DUMP data;
({(a),(b)},{},{(c),(d)}) 
```

# java - JavaFX Platform.runLater 的使用和从不同线程访问 UI

> ID：15160410
> 
> 赞同：10
> 
> 时间：2013-03-01T14:43:26.827
> 
> 标签：java, multithreading, javafx-2, event-dispatch-thread

我有几个关于`Platform.runLater`. 我有一个 JavaFX 应用程序类。在这个类中，我运行一个线程（线程从网络套接字读取数据）。

现在，当我在线程内创建一个新`Stage`线程时，系统会抛出一个 execption（JavaFX 事件调度程序线程和我的 netork-read 线程不一样） - 我理解这种行为。

但另一方面是，我将网络阅读器中的文本附加到现有的`TextArea`或添加/删除 a 中的某些项目`ListView<String>`- 这不会引发异常 - 为什么？我认为 JavaFX 是单线程的（ui 库部分）。这是否与 Swing 中的相同：有时它可以工作，有时你只有垃圾（因为 EDT）？

我的问题：

*   JavaFX 事件调度程序线程何时抛出异常，何时不抛出异常？
*   关于这个有什么好的文件吗
*   是否有一种更简单（更短、更清洁）的方法来使用`Platform.runLater`方法`run()`？结合try catch（或multiple catch），看起来很奇怪

我知道`Platform.runLater`在线程中的使用不是很好（设计解决方案）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-02T01:00:20.877

亚历山大的回答抓住了关于您的问题的最重要的一点。

这个答案提供了一些补充信息。

> JavaFX 事件调度程序线程何时抛出异常，何时不抛出异常？

JavaFX 系统并不总是检查对影响活动场景图的对象的访问是否正确地限制在 JavaFX 线程中。最终，确保这种线程安全是 JavaFX 应用程序程序员的责任，而不是 JavaFX 系统。在 JavaFX 中执行多线程编程时必须非常小心，否则应用程序行为可能会失败或变得不可预测。

> 关于这个有什么好的文件吗

试试 JavaFX 教程：[JavaFX 中的并发](http://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm)。

> 有没有一种更简单（更短、更简洁）的方法来使用 Platform.runLater 和 run() 方法？

不`Platform.runLater`，就是这么简单。

* * *

作为旁白 。. .

**任务与服务**

考虑使用[Worker的](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Worker.html)[Task](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)或[Service](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Service.html)子类。这些是[FutureTask](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/FutureTask.html)的 JavaFX 包装器（又是[Runnable](http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html)）。Worker 提供了一个[调用](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html#call%28%29)方法来在后台线程上运行逻辑。它们维护执行[状态](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Worker.html#stateProperty)（通过向 JavaFX 线程发出线程安全回调通知以进行状态更改）并通过[value](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html#valueProperty)、[message](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html#messageProperty)和[exception](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html#exceptionProperty)属性返回调用结果。

`Task`利用和javadoc 示例中的设计模式`Service`来简化线程安全应用程序的创建，这些应用程序具有以下特性：

*   为 UI 更新异步获取数据。
*   任务进度的定期消息更新。
*   构建*尚未*附加到显示场景的节点图。
*   通过进度条等监控进度。

A`Worker`与 互补`Platform.runLater`。`Platform.runLater`当您在 JavaFX 应用程序线程之外执行并且想要在 JavaFX 应用程序线程上运行一些逻辑时使用。当`Worker`您在 JavaFX 应用程序线程上运行并希望在新线程上产生一些逻辑或（尤其是）I/O 时使用 a，这样您就不会阻塞 JavaFX 应用程序线程。您永远不会想在 a 的方法中进行网络 I/O `Platform.runLater`，`run`但通常希望在 a`Worker`的`call`方法中进行。

此外，`Task`and`Service`的使用与`Platform.runLater`. 例如，如果您有一个很长的运行`Task`时间，您希望定期或在缓冲区填充时将部分结果返回到 UI，那么`Platform.runLater`在任务的`call`方法中执行就是执行此操作的方法。

当您没有库提供的现有线程服务，而是创建自己的线程以在后台执行时，工作者很有用。如果您有一个现有的线程服务，那么您将需要使用`Platform.runLater`在 JavaFX 应用程序线程上执行逻辑。

请注意，即使您使用`Worker`. 您仍然必须注意不要违反标准 JavaFX 并发规则，例如从不更新活动场景图中的节点（包括不更新活动场景图中的节点绑定到的值 - 例如支持的可观察[项目](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ListView.html#itemsProperty)列表一个[列表视图](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ListView.html)）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-01T15:07:23.010

“这不会引发异常 - 为什么？” 因为并非所有此类情况都被咳嗽......可能，出于性能考虑，它可能只是一个错过的功能。

如果您想从另一个线程访问这些 JFX 对象，则必须在 JFX 线程上完成与 JavaFX 对象的所有交互（包括创建） - 使用 runLater 或 runAndWait 方法。如果它现在不抛出异常，它可能会在未来开始抛出异常。与 JFX 对象的任何交互都可能导致后续的操作和事件，这些操作和事件将被某些线程检查器检查 - 您无法确定。

我不认为，这方面有任何好的文档——只是一个简单的规则——使用 runLater 或 runAndWait。

更短更简洁的方式 - 将使用 Lambda 在 JDK 8 中提供。

# linker - 如何在 Windows 8 上正确链接 libnfc？

> ID：15160411
> 
> 赞同：0
> 
> 时间：2013-03-01T14:43:30.493
> 
> 标签：linker, nfc, dllimport

我已经成功编译了 libnfc 并且示例都可以正常工作。现在，我正在尝试自己编译其中一个示例，以了解如何去做。

我要编译的文件与 libnfc self 位于不同的文件夹中。当我编译它给我以下错误（和警告）：

```
C:\thesis\libnfc\dev>gcc -m32 test.c -o test -L"C:\thesis\libnfc\libnfc-build\libnfc" -lnfc
In file included from test.c:48:0:
utils/nfc-utils.h:97:14: warning: 'str_nfc_baud_rate' redeclared without dllimport attribute: previous dllimport ignored [-Wattributes]
C:\Users\xxxx\AppData\Local\Temp\cc2LqPG1.o:test.c:(.text+0x2e): undefined reference to `print_hex_bits'
C:\Users\xxxx\AppData\Local\Temp\cc2LqPG1.o:test.c:(.text+0xaf): undefined reference to `print_hex_bits'
C:\Users\xxxx\AppData\Local\Temp\cc2LqPG1.o:test.c:(.text+0xe8): undefined reference to `print_hex'
C:\Users\xxxx\AppData\Local\Temp\cc2LqPG1.o:test.c:(.text+0x15a): undefined reference to `print_hex'
C:\Users\xxxx\AppData\Local\Temp\cc2LqPG1.o:test.c:(.text+0xa87): undefined reference to `print_hex'
collect2.exe: error: ld returned 1 exit status 
```

这些函数在 nfc-utils 中定义。我假设这些也已编译到dll中？我已将文件夹 utils 与内容 nfc-utils.c 和 .h 放在同一个文件夹中，但这也无济于事。

test.c 文件与 nfc-anticol.c 文件的内容相同。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:39:15.217

好的，我自己找到的。

我显然忘记在 gcc -c 步骤中将 utils/nfc-utils.c 与 test.c 一起编译。分两步做了，找到了。

```
C:\thesis\libnfc\dev>gcc -m32 test.c utils/nfc-utils.c -c
In file included from test.c:48:0:
utils/nfc-utils.h:97:14: warning: 'str_nfc_baud_rate' redeclared without dllimport attribute: previous dllimport ignored [-Wattributes]
In file included from utils/nfc-utils.c:37:0:
utils/nfc-utils.h:97:14: warning: 'str_nfc_baud_rate' redeclared without dllimport attribute: previous dllimport ignored [-Wattributes]

C:\thesis\libnfc\dev>gcc -m32 test.o nfc-utils.o -o test -L"C:\thesis\libnfc\libnfc-build\libnfc" -lnfc 
```

这给出了两个警告，但是当我运行它时，它可以工作。

# android - 关于样式对话框

> ID：15160413
> 
> 赞同：0
> 
> 时间：2013-03-01T14:43:34.607
> 
> 标签：android, dialog, customization

对于我的自定义对话框，我使用`parent="@android:style/Theme.Dialog"`. [Theme.Holo.Dialog](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/frameworks/base/core/res/res/values/themes.xml) (API 11)的源代码

```
<style name="Theme.Holo.Dialog">
    <item name="android:windowFrame">@null</item>
    <item name="android:windowTitleStyle">@android:style/DialogWindowTitle.Holo</item>
    <item name="android:windowBackground">@android:drawable/dialog_full_holo_dark</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Holo.Dialog</item>
    <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>
    <item name="android:windowActionBar">false</item>
    <item name="android:windowActionModeOverlay">true</item>
    <item name="android:windowCloseOnTouchOutside">@bool/config_closeDialogWhenTouchOutside</item>

    <item name="android:colorBackgroundCacheHint">@null</item>

    <item name="android:buttonBarStyle">@android:style/Holo.ButtonBar.AlertDialog</item>
    <item name="borderlessButtonStyle">@android:style/Widget.Holo.Button.Borderless.Small</item>

    <item name="textAppearance">@android:style/TextAppearance.Holo</item>
    <item name="textAppearanceInverse">@android:style/TextAppearance.Holo.Inverse</item>

    <item name="listPreferredItemPaddingLeft">16dip</item>
    <item name="listPreferredItemPaddingRight">16dip</item>
</style> 
```

如何`<item name="android:windowCloseOnTouchOutside">false</item>`在 android 2.2(API 8) 中设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:07:44.727

从 API v1 开始，您可以使用[setCanceledOnTouchOutside()](http://developer.android.com/reference/android/app/Dialog.html#setCanceledOnTouchOutside%28boolean%29)在代码中进行设置。

# php - 如何在 PHP 中获取 SOAP 属性？

> ID：15160414
> 
> 赞同：1
> 
> 时间：2013-03-01T14:43:35.930
> 
> 标签：php, soap

使用下面的示例，我应该如何解析“HotelRef”的“HotelCode”属性？

```
<OTA_HotelAvailRQ Version="1.0" TimeStamp="2005-08-01T09:30:47+02:00" EchoToken="fb57388d" AvailRatesOnly="true" xmlns="http://www.opentravel.org/OTA/2003/05">
     <AvailRequestSegments>
        <AvailRequestSegment AvailReqType="Room">
           <HotelSearchCriteria>
              <Criterion>
                 <HotelRef HotelCode="HOTEL1"/>
              </Criterion>
           </HotelSearchCriteria>
        </AvailRequestSegment>
     </AvailRequestSegments>
  </OTA_HotelAvailRQ> 
```

我能够从 SOAP 服务器获得响应，请参阅下面的输出，但请注意 HotelRef 为空。如何访问属性？

`stdClass Object ( [AvailRequestSegments] => stdClass Object ( [AvailRequestSegment] => stdClass Object ( [HotelSearchCriteria] => stdClass Object ( [Criterion] => stdClass Object ( [HotelRef] => )`

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T12:31:14.470

```
$strXML = 'theRequestXML_OTA_HotelAvailRQ';
$objSimpleXML = new SimpleXMLElement($strXML,NULL,NULL,"http://schemas.xmlsoap.org/soap/envelope/");
foreach ($objSimpleXML->children() as $objItems) {

    $strHotelCode = $objItems->AvailRequestSegments->AvailRequestSegment->HotelSearchCriteria->Criterion->HotelRef->attributes()->{'HotelCode'};
} 
````

# c# - 制作泛型方法

> ID：15160415
> 
> 赞同：0
> 
> 时间：2013-03-01T14:43:43.887
> 
> 标签：c#, generics

我有一种过滤/搜索方法，现在是为每个`Windows Form`提供搜索的方法编写的。我正在尝试在基类中创建一个通用方法，这样我就可以避免大量重复代码。

这是我要修改的原始代码：

```
private void LoadData()
{
    GridFilter filter = new GridFilter();
    filter.AddRule(dgvColDescription.DataPropertyName, txtDescription.Text);

    if (cboColor.SelectedIndex != -1)
    {
        filter.AddRule(dgvColMaterialColorId.DataPropertyName, cboColor.SelectedValue.ToString());
    }
    ...
    //a lot more of this filter.AddRule stuff 
    ...
 } 
```

我认为这里有两件事——实例的需要`GridFilter`和我需要使用的两种类型的控件。

话虽如此，这是我对通用方法的尝试：

```
protected virtual void AddFilterRules<T>(Control ctrl, String str) where T : GridFilter
{
    T filter;
    if (ctrl is ComboBox)
    {
        if ((ctrl as ComboBox).SelectedIndex != -1)
        {
            filter.AddRule(/*dgvColMaterialColorId.DataPropertyName*/ str, (ctrl as ComboBox).SelectedValue.ToString());
        }
    }

    if (ctrl is TextBox)
    {
        filter.AddRule(/*dgvColCode.DataPropertyName*/str, ctrl.Text);
    }
} 
```

有一些评论，因为我仍然不确定是否可以将评论部分作为字符串传递，但对我来说更大的问题是我从`IDE`about`filter`变量中得到的错误是：

> 使用未分配的局部变量“过滤器”

毕竟有可能用它制作一个通用方法吗？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:47:38.563

将[`new()`约束](http://msdn.microsoft.com/en-us/library/sd2w2ew5.aspx)添加到您的方法中。

```
protected virtual void AddFilterRules<T>(Control ctrl, String str) where T : GridFilter, new() 
```

进而

```
T filter = new T(); 
```

要么将 T 作为参数传入：

```
protected virtual void AddFilterRules<T>(T filter, Control ctrl, String str) where T : GridFilter 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:47:45.353

您的语法是正确的，但您还有另外两个问题：

1.  你没有初始化`T`任何东西。它是`null`您尝试使用它时的参考。你打算传入一个`T`吗？

2.  你*没有*对`T`. 你应该*退货*吗`T`？或者将其分配给其他对象的属性？

如果传入对 a 的引用`T`，然后在方法中对其进行修改，那么这两个问题都解决了：

```
protected virtual void AddFilterRules<T>(T filter, Control ctrl, String str)
     where T : GridFilter
{
    ...
} 
```

但是，在这种情况下，您的方法根本不需要是通用的：

```
protected virtual void AddFilterRules(GridFilter filter, Control ctrl, String str)
{
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T15:24:43.450

**为什么要使用泛型方法？**

如果您的过滤器始终是 a`GridFilter`您可以在您的方法中使用该类型。即使您使用这样的派生类`SpecialGridFilter`仍然可以工作。事实上，在您的原始方法中，您`GridFilter`每次都创建一个新方法，这意味着您可以在您的新方法中这样做。因此，尽管您现在将一些值传递给它，但不需要新方法。

看起来您将类型参数与普通参数混合在一起。拥有类型参数并不意味着您获得了该类型的实例。这只是意味着您可以对不同类型使用相同的算法，而无需为每种类型显式编码。

如果你真的需要一个泛型实现，你可以对泛型参数使用类型约束`where T : GridFilter, new()`。这允许您在通用方法中创建一个`new T()`。

**新方法将在哪里实施？**

我不知道`GridFilter`现在是如何实现的，但它看起来像`AddRule`修改它。如果是这样，您不应该每次都创建一个新实例，因为所有更改都会丢失。`AddFilterRules`因此也应该是`GridFilter`类的成员，并且每个表单都应该有一个`GridFilter`.

如果您无法更改实现，`GridFilter`您仍然可以使用扩展方法。如果`GridFilter`每次都创建一个新的是正确的，那么您可以在该`Form`类型上有一个扩展方法。这取决于如何`GridFilter`工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T14:48:18.077

您应该创建一个 T 的实例：

```
T filter = new GridFilter(); 
```

如果 T 总是 a `GridFilter`，你也可以用 GridFilter 替换 T：

```
protected virtual void AddFilterRules<GridFilter>(Control ctrl, String str)
{
    GridFilter filter = new GridFilter();
    ...
} 
```

但是，我认为您根本不应该使用通用方法。您应该创建一个返回 GridFilter 的方法：

```
protected virtual GridFilter AddFilterRules(Control ctrl, String str)
{
    GridFilter filter = new GridFilter();
    ...

    return filter;
} 
```

# android - 安卓片段

> ID：15160418
> 
> 赞同：0
> 
> 时间：2013-03-01T14:43:53.073
> 
> 标签：android, android-fragments

我正在试验 Android 片段，因此我创建了两个片段`ListFragment`和`DetailFragment`. 问题是，当我单击`ListFragment`并调用一个`DetailFragment`方法来显示所选项目时，`ListFragment`没有结果显示在`DetailFragment`. 这是`DetailFragment`代码：

```
 private static final String DETAIL_FRAG_TAG = "detail_fragment";
private Context appContext = null;
private TextView lblItemDetail = null;
  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    // inflate the fragment layout
    View rootView = inflater.inflate(R.layout.fragments_detail_fragment, container, false);
    lblItemDetail = (TextView) rootView.findViewById(R.id.lbl_itemDetail);

 //at this point the TextView is not null===>see L0g.i
Log.i(DETAIL_FRAG_TAG, " ---MyDetailFragment---oncreateView()--lblItemDetail =[" +    lblItemDetail + "]");

    // get the fragment activity context
    appContext = this.getActivity();
    return rootView;
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onActivityCreated(savedInstanceState);

}

/**
 * show the details of the item selected on the listFragment.
 * @param itemDetail - the details of the item selected on ListFragment.
 */
public void showLstItemDetail(String itemDetail) {

    if (lblItemDetail != null) {
        // the View to show Text should not be Null.
        lblItemDetail.setText(itemDetail);
    }

    //at this point calling this method shows 
           that    the `TextView` is Null yet it's 
       initialized in the 
        oncreate() as a class member variable ---why am i 
   getting Null after the `oncreate` is finished.
    Log.i(DETAIL_FRAG_TAG,    "------showItemDetail---------msg=[" + itemDetail + "] txt=[" + lblItemDetail + "]");
}

//when I create an instance of `MYDetailFragment`  and call the method to show the details of item Selected on the `DetailFragment` the `TextView` will be null. Why?

   MYDetailFragment detailFrag = new MyDetailFragment();
   detailFrag.showLstItemDetail("Selected List Item"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:09:35.407

如果有任何有用的信息，请验证以下关于片段的教程**[点击这里](http://www.vogella.com/articles/AndroidFragments/article.html)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:49:10.197

在这两行中：

```
MYDetailFragment detailFrag = new MyDetailFragment();
detailFrag.showLstItemDetail("Selected List Item"); 
```

`onCreateView()`尚未调用。这意味着片段 roo​​tView 从未创建过，并且 TextView 从未创建过！

视图只会在您使用片段事务后创建，将该片段放入布局中，然后片段将附加到活动（onAttach（）），并且在更多的回调之后 onCreateView（）将被调用。只有这样才能对其进行任何设置。

将参数传递给片段的标准良好做法是使用 Bundle。看一个示例代码：

关于活动：

```
MYDetailFragment detailFrag = new MYDetailFragment();
Bundle b = new Bundle();
detailFrag.setArguments(b);
b.putString("detail", value);
// then proceed to the fragment transaction 
```

然后在你的片段上：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
// inflate the fragment layout
View rootView = inflater.inflate(R.layout.fragments_detail_fragment, container, false);
lblItemDetail = (TextView) rootView.findViewById(R.id.lbl_itemDetail);
Bundle b = getArguments();
lblItemDetail.setText(b.getString("details")); 
```

# django - 更新 django 1.5 时出错 - u“'admin' 不是注册的命名空间

> ID：15160426
> 
> 赞同：0
> 
> 时间：2013-03-01T14:44:20.277
> 
> 标签：django, django-urls, django-1.4, django-1.5

我正在将 django 从前面的 1.4 升级到 1.5，一切顺利，但是当我尝试输入 url 时，管理员方面出现了这个特定错误，而不是如何修复它，有什么想法吗？

错误：

```
NoReverseMatch at /admin/
u"'admin" is not a registered namespace
Request Method:  GET
Request URL:    http://lmgsyco.com/admin/
Django Version: 1.4.1
Exception Type: NoReverseMatch
Exception Value:    
u"'admin" is not a registered namespace
Exception Location:  /usr/local/lib/python2.6/dist-packages/django/template/defaulttags.py in render, line 424
Python Executable:  /usr/bin/python
Python Version: 2.6.6 
```

网址：

```
from django.conf.urls.defaults import *

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^$', web_page, name='web_page'),
    url(r'^login/$', 'django.contrib.auth.views.login'),
    url(r'^logout/$', cerrar_sesion, name='cerrar_sesion'),
    # Admin:
    url(r'^admin/', include(admin.site.urls)),
    # Admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:20:56.197

我有一个似乎与此有关的问题。

您的错误显示 Django 1.4.1，而从您的问题来看，您似乎正在尝试使用 1.5。

检查您的 PYTHONPATH

```
env | grep PYTHONPATH 
```

我的猜测是您在某处指向旧版本的 Django。（在我的例子中，它是我的 .bashrc 文件。我已经将 virtualenv 设置为使用 Django 1.5，但是 .bashrc 将它指向 1.4 ，并且它首先被放入了 PYTHONPATH 中）。

# javascript - Jquery鼠标事件替代

> ID：15160427
> 
> 赞同：1
> 
> 时间：2013-03-01T14:44:21.877
> 
> 标签：javascript, jquery

好吧，如果我在#nav div 之外单击，下面的代码可以正常工作。我在问是否可以将鼠标从#nav div移开以使其消失。我不想“点击”来隐藏 div。[例子](http://jsfiddle.net/sKpwV)

```
 $(document).mouseup(function (e)
    {
        var container = $("#nav");

        if (container.has(e.target).length === 0)
        {
            container.hide();
        }
    }); 
```

我尝试了 mouseenter 和 mouseleav，但它们不起作用。[示例](http://jsfiddle.net/sKpwV/1) 任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:52:31.543

试试这个：

```
$(document).ready(function(){
   $("#logo").mouseover(function() { $("#nav").fadeIn("slow"); });

   $("#nav").mouseleave(function (e){
       $(this).fadeOut("slow");
   });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:03:19.277

你需要一个鼠标离开导航我已经为你添加了它检查下面的链接

```
$(document).ready(function(){
$("#logo").mouseenter(function() { $("#nav").fadeIn("slow"); });
});

$("#nav").mouseleave(function (e)
{
       $("#nav").fadeOut('fast');
}); 
```

[http://jsfiddle.net/sKpwV/6/](http://jsfiddle.net/sKpwV/6/)

如果你想制作一个下拉菜单，我建议你看看这里的链接：http://csswizardry.com/2011/02/creating-a-pure-css-dropdown-menu/[它](http://csswizardry.com/2011/02/creating-a-pure-css-dropdown-menu/)使用纯 CSS 做一个下拉菜单，所以当用户没有启用 Javascript 时它也可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T15:05:31.337

`nav`您的div 和div之间的边距`logo`导致了问题。当用户将鼠标指向这些区域之间时，并且您`mouseout`在 div 上严格设置了一个事件`nav`，它会导致窗口关闭。解决方案是添加一个小的超时，以允许用户在关闭菜单之前有时间浏览菜单。这将避免用户不小心将鼠标移动到导航边缘并且可能在`div`.

这是我用来解决这个问题的jQuery：

```
$('#nav').mouseover(function () {
    clearTimeout($.data(this, 'mouseOutTimer'));
});
$('#nav').mouseout(function () {
    clearTimeout($.data(this, 'mouseOutTimer'));
    $.data(this, 'mouseOutTimer', setTimeout(function () {
        $("#nav").hide();
    }, 700));
}); 
```

[http://jsfiddle.net/HyUEu/](http://jsfiddle.net/HyUEu/)

# python - 正则表达式 - 如何将短语匹配到行尾？

> ID：15160428
> 
> 赞同：-1
> 
> 时间：2013-03-01T14:44:26.757
> 
> 标签：python, regex

我有一系列短语：

```
One: This is some data
Two: This is some more data
One: This is some more more data
Two: This is some more more more data
One: This is some more more more more data 
```

我正在尝试找到一个`regex`匹配所有`"Two:"`行（整行）的模式。我一直在尝试自己获得正确的模式很长一段时间没有运气，但我认为这应该很简单，对吧？

我怀疑这很重要，但我正在使用 Python。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:46:17.543

试试这个：

```
>>> re.match(r'Two:.*$') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T14:48:08.530

要匹配以字符“Two”开头到最后的行，请使用以下命令：

```
>>> re.match(r'^Two:.*$') 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-01T14:48:07.767

如果这是python，为什么不直接`if "Two:" in line:`检查是否`"Two:"`在该行中。这比使用正则表达式要容易得多。

# php - 独立的 PHP 类应该抛出异常吗？

> ID：15160432
> 
> 赞同：0
> 
> 时间：2013-03-01T14:44:36.487
> 
> 标签：php, architecture

我目前正在构建一个独立的 PHP 类，为我在公司从事的项目类型使用一些自定义代码来包装 Instagram API。当我开发我的代码时，我经常发现自己在写这样的 sutff：

```
if (!$this->accessToken)
    throw new Exception("Instagram: Access Token can't be NULL", 1); 
```

这是一个不好的做法吗？如果是这样，对于此类情况，推荐的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:50:38.113

这是一种很好的做法，因为它允许人们使用您的库来正确处理错误。当发生异常情况（例如重要值为 null）时，抛出异常总是一个好主意。

我可以建议的唯一改进是使用更具体的异常类。对于这种情况，您可能需要抛出`InvalidArgumentException`or `UnexpectedValueException`。使用更具体的异常类意味着人们可以在`catch`块中更具体地检查该类。对于更复杂的应用程序，定义自己的异常类来处理特定的异常类型是一个好主意。

此外，如果您使用`@throws`标签注释引发异常的方法，这对使用 IDE 的人非常有帮助。

# c# - 检查列表 C# 中是否存在值

> ID：15160433
> 
> 赞同：4
> 
> 时间：2013-03-01T14:44:37.303
> 
> 标签：c#

我有一个由存储过程填充的 DataTable，并且该数据表中包含`Requests(RequestNumber and Tasks(TaskId)`. 当我通过任务达到第一个请求编号时，我将它添加到我的列表中，然后使用其他数据行，我检查列表以查看它们是否存在（`if(dr["RequestNumber"].ToString() != acList[i].RequestNumber)`）如果存在，我删除数据行，如果不我将它们添加到名单。

这按顺序很好，但如果数据行和列表关闭一个，它允许添加行。是否有任何其他方法可以完成查找该值是否存在于列表中。

提前致谢。

```
foreach (DataRow dRow in dt.Rows)
{
    DataRow dr = dt.NewRow();
    dr["Project"] = dRow["Project"];
    dr["RequestNumber"] = dRow["RequestNumber"];
    dr["RequestId"] = dRow["RequestId"];
    dr["TaskType"] = dRow["TaskType"];
    dr["TaskId"] = dRow["TaskId"];
    dr["TaskStatus"] = dRow["TaskStatus"];
    dr["AssignedTo"] = dRow["AssignedTo"];
    dr["DateDue"] = dRow["DateDue"];

    if (acList.Count == 0)
    {
        acList.Add(new AssignedClass
        {
            Project = dr["Project"].ToString(),
            RequestNumber = dr["RequestNumber"].ToString(),
            RequestId = dr["RequestId"].ToString(),
            TaskType = dr["TaskType"].ToString(),
            TaskId = dr["TaskId"].ToString(),
            TaskStatus = dr["TaskStatus"].ToString(),
            AssignedTo = dr["AssignedTo"].ToString(),
            DateDue = dr["DateDue"].ToString()
        });
    }

    else
    {
        for (int i = 0; i < acList.Count; i++)
        {

        if(dr["RequestNumber"].ToString() != acList[i].RequestNumber)
        {
            acList.Add(new AssignedClass
            {
                Project = dr["Project"].ToString(),
                RequestNumber = dr["RequestNumber"].ToString(),
                RequestId = dr["RequestId"].ToString(),
                TaskType = dr["TaskType"].ToString(),
                TaskId = dr["TaskId"].ToString(),
                TaskStatus = dr["TaskStatus"].ToString(),
                AssignedTo = dr["AssignedTo"].ToString(),
                DateDue = dr["DateDue"].ToString()
            });
        }
        else
        {
            dr.Delete();
        }
      }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T14:55:46.107

使用 LINQ，它就像检查是否有任何匹配一样简单：

```
if ( !acList.Any(a => a.RequestNumber == dr["RequestNumber"].ToString() )
    acList.Add( ... ); 
```

此外，似乎一开始分配`dRow`给的代码`dr`没有任何目的。只需`dRow`在其余代码中直接使用即可。而且我认为您不想将`(acList.Count == 0)`其视为特殊情况，因为这只会导致您必须复制逻辑并因此维护相同代码的两个单独副本。所以如果我理解正确，这个简化的代码应该完成同样的事情：

```
foreach (DataRow dRow in dt.Rows)
{
    if ( !acList.Any(a => a.RequestNumber == dRow["RequestNumber"].ToString() )
    {
        acList.Add(new AssignedClass
        {
            Project = dRow["Project"].ToString(),
            RequestNumber = dRow["RequestNumber"].ToString(),
            RequestId = dRow["RequestId"].ToString(),
            TaskType = dRow["TaskType"].ToString(),
            TaskId = dRow["TaskId"].ToString(),
            TaskStatus = dRow["TaskStatus"].ToString(),
            AssignedTo = dRow["AssignedTo"].ToString(),
            DateDue = dRow["DateDue"].ToString()
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T15:06:50.103

这对于 LINQ 的**[`Union`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.union.aspx)**方法来说将是一项很棒的工作，但它需要一个`IEqualityComparer<AssignedClass>`实现。除非你经常这样做，否则它可能不值得编码（即使如果做得好它是 10 行左右）。但是，这将有所帮助：

```
acList = acList
    .Concat(from row in dt.Rows
            from ac in acList
            where ac.RequestNumber != row["RequestNumber"].ToString()
            select AssignedClassFromDataRow(row))
    .ToList(); 
```

在哪里

```
private static AssignedClass AssignedClassFromDataRow(DataRow row)
{
    // maybe some checks...
    return new AssignedClass
    {
        Project = dRow["Project"].ToString(),
        RequestNumber = dRow["RequestNumber"].ToString(),
        RequestId = dRow["RequestId"].ToString(),
        TaskType = dRow["TaskType"].ToString(),
        TaskId = dRow["TaskId"].ToString(),
        TaskStatus = dRow["TaskStatus"].ToString(),
        AssignedTo = dRow["AssignedTo"].ToString(),
        DateDue = dRow["DateDue"].ToString()
    }
} 
```

比基于散列的解决方案时间复杂一些，但实现起来足够简单。

编辑：

如果您确实需要散列提供的额外性能，您可以编写 EqualityComparer（但请记住**[这些准则](http://msdn.microsoft.com/en-us/library/ms173147%28v=vs.80%29.aspx)**）。这样的解决方案最终看起来像这样：

```
acList = acList
    .Union(
        dt.Rows.Select(AssignedClassFromDataRow),
        new MyAssignedClassRequestNumberComparer())
    .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:04:56.427

使用 linq 选项并考虑到开始代码块和检查 0 条目似乎有点多余。我认为这个过程可以归结为

```
var distinctRows = dt.Rows.GroupBy(x => x["RequestNumber"]).Select(x => x.First());
acList.AddRange(distinctRows.Select(x => x.MapToAssignedClass());

// Added Mapping method for readability
public static AssignedClass MapToAssignedClass(this DataRow dr)
{
    return new AssignedClass
    {
        Project = dr["Project"].ToString(),
        RequestNumber = dr["RequestNumber"].ToString(),
        RequestId = dr["RequestId"].ToString(),
        TaskType = dr["TaskType"].ToString(),
        TaskId = dr["TaskId"].ToString(),
        TaskStatus = dr["TaskStatus"].ToString(),
        AssignedTo = dr["AssignedTo"].ToString(),
        DateDue = dr["DateDue"].ToString()
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T14:51:08.280

您可以使用`HashSet<AssignedClass>`，您只需要创建自定义`IEqualityComarer<AssignedClass>`，在其中检查`RequestNumber`传递对象的属性，并在构造函数中传递此比较器的实例`HashSet`

**编辑**

这是可能的实现`IEqualityComarer<AssignedClass>`：

```
public class AssignedClassComparer : IEqualityComparer<AssignedClass>
{
    public bool Equals(AssignedClass x, AssignedClass y)
    {
        return x.RequestNumber == y.RequestNumber;
    }

    public int GetHashCode(AssignedClass obj)
    {
        return obj.RequestNumber.GetHashCode();
    }
} 
```

**EDIT2：** 或者您可以简单地使用 HashSet 仅存储键，同时通过行枚举：

```
var keys = new HashSet<string>();

foreach (DataRow dRow in dt.Rows)
{
    if (keys.Add(dRow["RequestNumber"].ToString()))
    {
        acList.Add(new AssignedClass
        {
            Project = dRow["Project"].ToString(),
            RequestNumber = dRow["RequestNumber"].ToString(),
            RequestId = dRow["RequestId"].ToString(),
            TaskType = dRow["TaskType"].ToString(),
            TaskId = dRow["TaskId"].ToString(),
            TaskStatus = dRow["TaskStatus"].ToString(),
            AssignedTo = dRow["AssignedTo"].ToString(),
            DateDue = dRow["DateDue"].ToString()
        });
    }
} 
```

# jquery - Nicescroll 滚动滚动

> ID：15160446
> 
> 赞同：2
> 
> 时间：2013-03-01T14:45:12.307
> 
> 标签：jquery, jquery-plugins, mousewheel, parallax, smooth-scrolling

我们正在构建具有水平滚动的视差网站。我们使用 nicescroll 插件来实现平滑的硬件加速（如果可用）滚动。

但是我们不知道如何在 nicescroll 中定义滚动步长。

这就是我们希望 nicescroll 拥有的：[动画步骤](http://sis.runningtime.am/scroll-step.html)。在这里，我们使用[jquery mousewheel](https://github.com/brandonaaron/jquery-mousewheel)插件来查找滚动方向并按定义的步骤设置动画。

这是与[nicescroll 插件](http://areaaperta.com/nicescroll/)相同的页面：[默认 nicescroll](http://sis.runningtime.am/scroll-nicescroll.html)。

这是与第一个版本混合的 nicescroll 版本：[nicescroll steps](http://sis.runningtime.am/scroll-step2.html)

问题是我怀疑我们在上一个版本中是否正确使用了 nicescroll，因为滚动不是那么流畅。我们希望滚动非常平滑，因为我们还会有一些小的视差动画，只有在滚动平滑且没有任何冻结的情况下才能看到这些动画。

任何帮助表示赞赏。谢谢。

# ios - 添加到主视图控制器时如何访问不同的子视图控制器

> ID：15160451
> 
> 赞同：3
> 
> 时间：2013-03-01T14:45:32.160
> 
> 标签：ios, objective-c

我有一个主视图控制器，我在其中添加了不同类型的子视图：IntroViewController 和 ChapterViewController。我的故事板中都有它们，这就是我添加 10 的方式（我的主视图控制器有一个滚动视图，当我向左滑动时，下一个视图控制器显示）：

```
 for(int i = 0; i<10; i++) {
     IntroViewController *introViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"View1"];
     [self addChildViewController:introViewController];

 } 
```

该函数将添加 10 个 IntroViewController 类型的视图控制器。但是现在它们具有相同的名称，我不确定现在如何访问这些不同的 introviewcontrollers，例如，如果我需要更改第 5 个视图控制器参数怎么办？就像是：

```
 introViewController.initialText = @"test"; 
```

但由于它们具有相同的名称，我不知道如何做到这一点......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T14:59:36.643

您可以通过`childViewControllers`财产获得它们。

来自[Apple 的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)：

> 子视图控制器：
> 
> 视图控制器数组，它们是视图控制器层次结构中接收器的子级。（只读）

```
@property(nonatomic, readonly) NSArray *childViewControllers 
```

它们的索引方式与它们在控制器层次结构中的方式相同。因此，在您的循环中创建的第 5 个 viewController 将与

```
(UIViewController*)[self.childViewControllers objectAtIndex: 4] 
```

# junit - 通过命令提示符使用 EMMA 从检测中排除一个类

> ID：15160456
> 
> 赞同：1
> 
> 时间：2013-03-01T14:46:11.127
> 
> 标签：junit, code-coverage, command-prompt, emma

我正在使用 EMMA 生成代码覆盖率报告，涵盖动态 Web 项目中的类。为此，我在命令提示符下使用命令*java -cp emma.jar emma instr -m overwrite -ip"....\workspace\p3"*

那仪器我想要仪器的类和Junit测试类，我想从仪器和覆盖范围中排除测试类..在EMMA帮助它声明参数*-ix ， -filter*来做包含和排除，但我不能似乎得到了正确的语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T10:27:23.113

请试试

-ix -com.....

*   排除和 + 包含。

例子

-ix +com.foo。*,-com.foo.test。*,-com.foo。*测试*

如果这不起作用；请尝试单引号内的类

-ix '-com.foo.*'

# .htaccess - 301 重定向未按预期工作

> ID：15160457
> 
> 赞同：0
> 
> 时间：2013-03-01T14:46:11.137
> 
> 标签：.htaccess, redirect

我有一个奇怪的`301 Redirect`问题。

我正在使用以下规则

```
Redirect 301   /catalog/index.php?target=news /news 
```

奇怪的是，当我访问`/catalog/index.php?target=news`

我被重定向到：`/catalog/?target=news`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:16:38.280

查询字符串不是`Redirect`模式匹配的 URI 的一部分。它已被删除，因此您无法在语句中尝试匹配它。您需要使用 mod_rewrite 和与`%{QUERY_STRING}`变量匹配的条件：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^target=news$
RewriteRule ^/?catalog/(index\.php)?$ /news? [L,R=301] 
```

这些规则应该放在文档根目录的 htaccess 文件中。

# c# - 实例化时调用类方法？

> ID：15160461
> 
> 赞同：6
> 
> 时间：2013-03-01T14:46:22.297
> 
> 标签：c#

我不知道如何更好地描述它，所以标题可能有点混乱。

我想知道是否可以通过使用实例化一个类，`... = new MyClass()`并在实例化时立即调用该类的非静态方法？

例如这样的：

```
return new MyClass().SetName("some name"); 
```

我想我以前见过类似的东西，但我找不到。做类似的事情有点烦人......

```
MyClass myclass = new MyClass();
myclass.SetName("some name");
return myclass; 
```

有没有办法缩短它或像我的第一个例子那样做？（请不要建议我使用属性来代替`SetName(string)`- 这只是一个例子）

提前致谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-01T14:49:19.207

好吧，如果你*确实*有一个属性，你可以使用一个对象初始化器：

```
return new MyClass { Name = "some name" }; 
```

如果你真的，真的必须使用一个方法，那么唯一的选择是让方法再次返回实例：

```
public Foo SomeMethod()
{
    // Do some work
    return this;
} 
```

你可以这样写：

```
return new Foo().SomeMethod(); 
```

如果你不能改变你正在调用的方法，作为一种非常*极端*的做事方式，你可以编写一个扩展方法：

```
public static T ExecuteAndReturn<T>(this T target, Action<T> action)
{
    action(target);
    return target;
} 
```

然后你可以写：

```
return new Foo().ExecuteAndReturn(f => f.SomeMethod()); 
```

但这真的很犯规。在这些情况下使用局部变量会简单*得多......*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-01T14:48:41.507

如果`SetName`返回`this`，那么您可以完全按照您在第一个代码示例中想要执行的操作。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-01T14:52:31.840

这个问题有一个**很大的误解**：

> ...并在实例化时立即调用此类的非静态方法
> 
> 例如这样的：

```
return new MyClass().SetName("some name"); 
```

事实上，调用`SetName`函数是在实例化完成*之后发生的。*它不会在“实例化时”发生。这与以下内容完全相同：

```
MyClass newInstance new MyClass();
return newInstance.setName("some name"); 
```

所以当`SetName`方法被调用时，构造函数已经完成了它需要做的所有事情，对象在堆上已经准备好了。

除此之外，它在语法上是可行的，您只需要`this`按照其他人的说明返回，当然还需要相应地指定返回类型。但是，我不会为二传手这样做……这可不好。

此外，如果您总是必须设置名称，请考虑使用期望名称作为参数的构造函数，并将其设置在构造函数中：

```
public class MyClass
{
    public String name;
    public MyClass(String initialName)
    {
        name = initialName;
    }
} 
```

然后您可以以非常简短的形式使用它：

```
MyClass instance = new MyClass("someName"); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-01T14:49:01.067

这很容易做到。通常这被称为“流利的接口”，但具有更合适的方法名称。

以下是您将如何编写 SetName 来实现这样的功能：

```
public MyClass SetName(...)
{
    ...
    return this;
} 
```

这将允许您准确地使用您想要的语法。

然后，您可以链接多个此类调用，通常链接到不同的方法：

```
return new MyClass().SetName("kkk").SetAge(44).SetAddres("..."); 
```

但是，我建议您还考虑添加一个更合适的构造来完成所有这些操作。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-01T14:48:58.890

您可以像这样使方法可链接：

```
public void SetName(String name) {
    this._name = name;
    return this;
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-01T14:49:21.457

除非`SetName`是托管它并返回的类的类型，否则`this`您无法避免中间变量。当然，您可以采用流利的语法，并让您`SetName`返回对象，但这不是 C# 的原生习惯用法。

```
class MyClass {
    public int A {get;private set;}
    public int B {get;private set;}
    public MyClass SetA(int a) {
        A = a;
        return this;
    }
    public MyClass SetB(int b) {
        B = b;
        return this;
    }
} 
```

现在你可以这样做：

```
return new MyClass().SetA(123).SetB(456); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-01T14:50:10.097

您可以创建一个静态属性作为工厂，返回一个新实例。在这种情况下，调用将如下所示：

```
MyClass.GetInstance.SetName("some name"); 
```

不确定这是否是您想要的。或者，为什么不从构造函数中调用该方法并通过构造函数传递所需的参数。

或者，第三种选择，构建一个工厂类来处理所有这些额外的步骤并返回给你一个实例。

# c# - 在 asp.net 服务器控件中处理事件

> ID：15160462
> 
> 赞同：0
> 
> 时间：2013-03-01T14:46:25.860
> 
> 标签：c#, asp.net, custom-controls

我有一个自定义的 asp.net 服务器组件，呈现如下：

```
<div id="divContentRating">
<div id="divAskForRating">
    #Question
    <br />
    <a id="likeIcon"><img src="#PositiveRateIconPath"/></a>
    <a id="neutralIcon"><img src="#NeutralRateIconPath"/></a>
    <a id="unlikeIcon"><img src="#NegativeRateIconPath"/></a>
</div>
<div id="divPositiveRating">
    <div>
        <img src="#PositiveRateIconPath"/> #PositiveAnswerMessage <br />
        <a href="javascript:void(0)" class="updateRate">Güncelle</a>
    </div>
</div>
<div id="divNegativeRating">
    <div>
        <img src="#NegativeRateIconPath"/> #NegativeAnswerMessage <br />
        <a href="javascript:void(0)" class="updateRate">Güncelle</a>
    </div>
</div>
<div id="divNeutralRating">
    <div>
        <img src="#NeutralRateIconPath"/> #NeutralAnswerMessage <br />
        <a href="javascript:void(0)" class="updateRate">Güncelle</a>
    </div>
</div>

<input type="hidden" id="HasRated" value="#HasRated">
<input type="hidden" id="Rate" value="#Rate">
<input type="hidden" id="ContentKey" value="#ContentKey">
<input type="hidden" id="RatingId" value="#RatingId">
</div> 
```

是否可以在我的 Web 控件中处理对图像的点击？我的意思是，当用户单击图像时，我想执行一些操作，但我想在我的 Web 控件中编写这些代码。

这是我的网络控件：

```
[DefaultProperty("ContentKey")]
[ToolboxData("<{0}:ContentRating runat=server></{0}:ContentRating>")]
public class ContentRating : WebControl
{
    [Bindable(true)]
    [Category("Appearance")]
    [DefaultValue("")]
    [Localizable(true)]
    public string ContentKey
    {
        get
        {
            String s = (String)ViewState["ContentKey"];
            return ((s == null) ? "[" + this.ID + "]" : s);
        }

        set
        {
            ViewState["ContentKey"] = value;
        }
    }

    [Bindable(true)]
    [Category("Appearance")]
    [DefaultValue("")]
    [Localizable(true)]
    public string PositiveRateIconPath
    {
        get
        {
            String s = (String)ViewState["PositiveRateIconPath"];
            return ((s == null) ? "[" + this.ID + "]" : s);
        }

        set
        {
            ViewState["PositiveRateIconPath"] = value;
        }
    }

    [Bindable(true)]
    [Category("Appearance")]
    [DefaultValue("")]
    [Localizable(true)]
    public string NegativeRateIconPath
    {
        get
        {
            String s = (String)ViewState["NegativeRateIconPath"];
            return ((s == null) ? "[" + this.ID + "]" : s);
        }

        set
        {
            ViewState["NegativeRateIconPath"] = value;
        }
    }

    [Bindable(true)]
    [Category("Appearance")]
    [DefaultValue("")]
    [Localizable(true)]
    public string NeutralRateIconPath
    {
        get
        {
            String s = (String)ViewState["NeutralRateIconPath"];
            return ((s == null) ? "[" + this.ID + "]" : s);
        }

        set
        {
            ViewState["NeutralRateIconPath"] = value;
        }
    }

    protected override void RenderContents(HtmlTextWriter output)
    {
        ContentRatingSettings contentRatingSettings = GetContentRatingSettings(this.ContentKey);

        if (!contentRatingSettings.Visible)
        {
            output.Write(string.Empty);
            return;
        }

        StringBuilder builder = new StringBuilder(@"
<div id=""divContentRating"">
<div id=""divAskForRating"">#Question
    <br />
    <a id=""likeIcon""><img src=""#PositiveRateIconPath""/></a>
    <a id=""neutralIcon""><img src=""#NeutralRateIconPath""/></a>
    <a id=""unlikeIcon""><img src=""#NegativeRateIconPath""/></a>
</div>
<div id=""divPositiveRating"">
    <div>
        <img src=""#PositiveRateIconPath""/> #PositiveAnswerMessage <br />
        <a href=""javascript:void(0)"" class=""updateRate"">Güncelle</a>
    </div>
</div>
<div id=""divNegativeRating"">
    <div>
        <img src=""#NegativeRateIconPath""/> #NegativeAnswerMessage <br />
        <a href=""javascript:void(0)"" class=""updateRate"">Güncelle</a>
    </div>
</div>
<div id=""divNeutralRating"">
    <div>
        <img src=""#NeutralRateIconPath""/> #NeutralAnswerMessage <br />
        <a href=""javascript:void(0)"" class=""updateRate"">Güncelle</a>
    </div>
</div>

<input type=""hidden"" id=""HasRated"" value=""#HasRated"">
<input type=""hidden"" id=""Rate"" value=""#Rate"">
<input type=""hidden"" id=""ContentKey"" value=""#ContentKey"">
<input type=""hidden"" id=""RatingId"" value=""#RatingId"">

<script type=""text/javascript"">
$(document).ready(function () {
    var protocol = location.protocol;
    var host = window.location.host;

    if ($(""#HasRated"").val() == ""True"")
    {
        var rate = $(""#Rate"").val();
        if (rate == 1) {
            setPositiveRatedView();
        }
        else if (rate == 0) {
            setNeutralRatedView();
        }
        else if (rate == -1) {
            setNegativeRatedView();
        }
        else {
            setNotRatedView();
        }
    }
    else {
        setNotRatedView();
    }

    $(""#likeIcon"").click(function () {
        alert(""like"");
        setPositiveRatedView();
        ratePage(1, """");
    });

    $(""#neutralIcon"").click(function () {
        alert(""neutral"");
        setNeutralRatedView();
        ratePage(0, """");
    });

    $(""#unlikeIcon"").click(function () {
        alert(""unlike"");
        setNegativeRatedView();
        //mkMPopClc('NegativeRatingReason', 200, 300, 0, 0);
    });

    $("".updateRate"").click(function () {
        setNotRatedView();
    });

    function setNotRatedView() {
        $(""#divNeutralRating"").fadeOut();
        $(""#divPositiveRating"").fadeOut();
        $(""#divAskForRating"").fadeIn();
        $(""#divNegativeRating"").fadeOut();
    }

    function setPositiveRatedView()
    {
        $(""#divNegativeRating"").fadeOut();
        $(""#divNeutralRating"").fadeOut();
        $(""#divAskForRating"").fadeOut();
        $(""#divPositiveRating"").fadeIn();
    }

    function setNegativeRatedView() {
        $(""#divNeutralRating"").fadeOut();
        $(""#divPositiveRating"").fadeOut();
        $(""#divAskForRating"").fadeOut();
        $(""#divNegativeRating"").fadeIn();
    }

    function setNeutralRatedView() {
        $(""#divNegativeRating"").fadeOut();
        $(""#divPositiveRating"").fadeOut();
        $(""#divAskForRating"").fadeOut();
        $(""#divNeutralRating"").fadeIn();
    }

    function ratePage(rating, comment)
    {
        //alert(rating + """" """" + comment);
        var contentKey = $(""#ContentKey"").val();
        var hasRated = $(""#HasRated"").val();
        var ratingId = $(""#RatingId"").val();

        }
        });
        </script>
        </div>");

        SetTrackingCookie();

        builder.Replace("#ContentKey", this.ContentKey);
        builder.Replace("#PositiveRateIconPath", this.PositiveRateIconPath);
        builder.Replace("#NeutralRateIconPath", this.NeutralRateIconPath);
        builder.Replace("#NegativeRateIconPath", this.NegativeRateIconPath);
        builder.Replace("#Question", contentRatingSettings.Question);
        builder.Replace("#PositiveAnswerMessage", contentRatingSettings.PositiveAnswerMessage);
        builder.Replace("#NeutralAnswerMessage", contentRatingSettings.NeutralAnswerMessage);
        builder.Replace("#NegativeAnswerMessage", contentRatingSettings.NegativeAnswerMessage);

        output.Write(builder);
    }
} 
```

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:55:18.817

如果您想将事件附加到控件，覆盖`CompositeControl`将比`WebControl`.

CreateChildControl 可以将事件路由到其子级，但 WebControl 不能。

请记住，这是您问题的另一种方法，因为它需要一些更改（来自您的原始代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:54:44.423

根据您要执行的操作，最快的选择是将`runat="server"`标记与单击事件处理程序一起添加到图像控件，而不是指向函数。

每当单击图像时，这将执行回发到 asp 页面。

如果不需要回发，那么您将需要连接 javascript 来执行基于 ajax 的回发和适当的客户端/服务器处理程序。

# extjs - 在复选框选择 ExtJS 上启用/禁用文本字段

> ID：15160466
> 
> 赞同：5
> 
> 时间：2013-03-01T14:46:31.657
> 
> 标签：extjs, checkbox

我正在使用 ExtJS 3，当我选择/取消选择复选框时，我需要启用/禁用特定的文本字段，如下面的示例所示：

```
{ 
    fieldLabel: 'myCheckBox'
    xtype: 'checkbox',
    name: 'myCheckBox'
},{
    fieldLabel: 'myTextField'
    xtype: 'textfield',
    name: 'myTextField',
    disabled: true
} 
```

据我了解，我必须像这样在“myCheckBox”中使用监听器：

```
listeners: {
   change: function() {

   }
} 
```

但我不知道将哪些参数传递给我的函数以及如何定位 ' `myTextField`' 和`.enable()` `.disable()` 它。你能帮我么？非常感谢。

* * *

基于答案的解决方案（谢谢）：

```
listeners: {
     change: function(cb, checked) {
         Ext.getCmp('myTextField').setDisabled(!checked);
 }
 } 
```

并将 id 标签添加到 textfield 组件中，如下所示：

```
id: 'myTextField' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T15:27:49.543

如果您不确定将什么作为参数传递，则 Ext.getCmp() 会为您提供组件。它将组件的 id 作为参数。在您的情况下，您必须将 id 分配给文本字段，并且可以在更改事件中将其作为 Ext.getCmp('myTextField') 获取。其中 myTextField 是文本字段的 id。组件的名称和 ID 可以相同。

```
listeners: {
 change: function() {
     Ext.getCmp('myTextField').disable();
     //or
     Ext.getCmp('myTextField').enable();
 }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T14:57:56.700

有几种方法可以参考`myTextField`。最简单的可能是给该字段一个[ref](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.Component-cfg-ref)（请注意，这种方法在 ExtJS 4 中不起作用，您最好使用组件查询）：

```
{
    fieldLabel: 'myTextField'
    xtype: 'textfield',
    name: 'myTextField',
    ref: '../myTextField'
    disabled: true
} 
```

设置 ref 将导致 textfield 组件在其所有者或其祖先之一的属性中被引用。那么你的监听器可以简单地是这样的（传递给这个函数的参数[列在 doc 中](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.form.Field-event-change)）：

```
change: function(cb, checked) {
    me.myTextField.setDisabled(!checked);
} 
```

您可能需要`ref`根据组件层次结构调整路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-09T09:51:21.747

例子：

1.  使用 setDisabled API：theStudentForm.findField('stud_name').setDisabled(true);

2.  使用 setOpacity API：theStudentForm.findField('stud_name').labelEl.setOpacity(1);

3.  使用只读 API：theStudentForm.findField('stud_name').setReadOnly(true);

# haskell - TypeRep 与“类型”GADT 之间的关系

> ID：15160470
> 
> 赞同：9
> 
> 时间：2013-03-01T14:46:48.513
> 
> 标签：haskell, scrap-your-boilerplate

在[Scrap your](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.100.6601) Boilerplate reloaded 中，作者描述了[Scrap Your Boilerplate](http://citeseerx.ist.psu.edu/viewdoc/summary;jsessionid=7D102D3B946AD3B5E0041F2863132665?doi=10.1.1.1.3176)的新演示文稿，它应该与原版等效。

但是，一个区别是它们假设了一组有限的、封闭的“基本”类型，用 GADT 编码

```
data Type :: * -> * where
  Int :: Type Int
  List :: Type a -> Type [a]
  ... 
```

在最初的 SYB 中，使用类型安全强制转换，并使用`Typeable`类实现。

我的问题是：

*   这两种方法之间有什么关系？
*   为什么为“SYB Reloaded”演示选择了 GADT 表示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T17:30:13.147

[我是“SYB Reloaded”论文的作者之一。]

**TL;DR**我们真的只是使用它，因为它对我们来说似乎更漂亮。基于类的`Typeable`方法更实用。`Spine`视图可以与类结合，`Typeable`不依赖于`Type`GADT。

该论文在其结论中指出了这一点：

> 我们的实现处理泛型编程的两个核心要素与原始 SYB 论文不同：我们使用具有显式类型参数的重载函数，而不是基于类型安全强制转换[1](http://www.andres-loeh.de/OpenDatatypes.html)或基于类的可扩展方案 [20] 的重载函数；我们使用显式脊椎视图而不是基于组合器的方法。这两个变化是相互独立的，并且是在明确的基础上做出的：我们认为 SYB 方法的结构在我们的环境中更加明显，并且与 PolyP 和 Generic Haskell 的关系变得更加清晰。我们发现，虽然脊椎视图仅限于可编写的通用函数类，但它适用于包括 GADT 在内的非常大的数据类型。
> 
> 我们的方法不能轻易地用作库，因为使用显式类型参数对重载函数的编码需要 Type 数据类型和函数（如 toSpine）的可扩展性。但是，可以将 Spine 合并到 SYB 库中，同时仍然使用 SYB 论文的技术来编码重载函数。

因此，我们选择使用 GADT 进行类型表示主要是为了清楚起见。正如 Don 在他的回答中所说，这种表示有一些明显的优势，即它维护关于类型表示的类型的静态信息，并且它允许我们实现强制转换而无需任何进一步的魔法，特别是无需使用的`unsafeCoerce`。类型索引函数也可以通过在类型上使用模式匹配直接实现，而无需回退到各种组合器，例如`mkQ`or `extQ`。

事实是我（我认为是合著者）根本就不是很喜欢这`Typeable`门课。（事实上​​，我仍然没有，尽管它现在终于变得更加自律了，因为 GHC 添加了自动派生 for `Typeable`，使其具有多态性，并最终消除了定义您自己的实例的可能性。）此外,`Typeable`并没有现在那么成熟和广为人知，因此使用 GADT 编码来“解释”它似乎很有吸引力。而且，这个时候我们也在考虑给 Haskell 添加[开放数据类型](http://www.andres-loeh.de/OpenDatatypes.html)，从而缓解 GADT 封闭的限制。

所以，总结一下：如果你真的只需要一个封闭宇宙的动态类型信息，我总是选择 GADT，因为你可以使用模式匹配来定义类型索引函数，你不必依赖`unsafeCoerce`也不需要高级编译器魔术。但是，如果宇宙是开放的，这很常见，当然对于通用编程设置，那么 GADT 方法可能是有指导意义的，但不实用，使用`Typeable`是要走的路。

然而，正如我们在论文的结论中所说的那样，选择`Type`over`Typeable`并不是我们正在做出的另一个选择的先决条件，即使用`Spine`视图，我认为这是更重要的，也是论文的核心.

论文本身（在第 8 节中）展示了一个受[“Scrap your Boilerplate with Class”](http://homepages.cwi.nl/~ralf/syb3/)论文启发的变体，它使用了一个`Spine`带有类约束的视图。但是我们也可以做一个更直接的开发，我将在下面展示。为此，我们将使用`Typeable`from `Data.Typeable`，但定义我们自己的`Data`类，为简单起见，它只包含`toSpine`方法：

```
class Typeable a => Data a where
  toSpine :: a -> Spine a 
```

数据类型现在`Spine`使用`Data`约束：

```
data Spine :: * -> * where
  Constr  :: a -> Spine a
  (:<>:)  :: (Data a) => Spine (a -> b) -> a -> Spine b 
```

该函数`fromSpine`与其他表示一样微不足道：

```
fromSpine :: Spine a -> a
fromSpine (Constr x) = x
fromSpine (c :<>: x) = fromSpine c x 
```

的实例对于`Data`平面类型来说是微不足道的，例如`Int`：

```
instance Data Int where
  toSpine = Constr 
```

对于二叉树等结构化类型，它们仍然完全简单：

```
data Tree a = Empty | Node (Tree a) a (Tree a)

instance Data a => Data (Tree a) where
  toSpine Empty        = Constr Empty
  toSpine (Node l x r) = Constr Node :<>: l :<>: x :<>: r 
```

然后本文继续定义了各种通用函数，例如`mapQ`. 这些定义几乎没有改变。我们只获得`Data a =>`论文具有以下函数参数的类约束`Type a ->`：

```
mapQ :: Query r -> Query [r]
mapQ q = mapQ' q . toSpine

mapQ' :: Query r -> (forall a. Spine a -> [r])
mapQ' q (Constr c) = []
mapQ' q (f :<>: x) = mapQ' q f ++ [q x] 
```

更高级别的函数，例如`everything`也只是丢失了它们的显式类型参数（然后实际上看起来与原始 SYB 中的完全相同）：

```
everything :: (r -> r -> r) -> Query r -> Query r
everything op q x = foldl op (q x) (mapQ (everything op q) x) 
```

正如我上面所说，如果我们现在想要定义一个通用的 sum 函数来总结所有`Int`出现的事件，我们不能再进行模式匹配，而是必须回退到`mkQ`，但是`mkQ`纯粹根据`Typeable`并且完全独立于 来定义`Spine`：

```
mkQ :: (Typeable a, Typeable b) => r -> (b -> r) -> a -> r
(r `mkQ` br) a = maybe r br (cast a) 
```

然后（再次与原始 SYB 完全相同）：

```
sum :: Query Int
sum = everything (+) sumQ

sumQ :: Query Int
sumQ = mkQ 0 id 
```

对于本文后面的一些内容（例如，添加构造函数信息），需要做更多的工作，但都可以完成。所以使用`Spine`真的完全不依赖于使用`Type`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T15:33:11.873

好吧，显然`Typeable`使用是开放的——事后可以添加新的变体，而无需修改原始定义。

不过，重要的变化是它`TypeRep`是无类型的。也就是说，运行时类型 ,`TypeRep`和它编码的静态类型之间没有任何联系。使用 GADT 方法，我们可以对类型`a`与其之间的映射进行编码`Type`，由 GADT 给出`Type a`。

因此，我们为类型 rep 静态链接到其原始类型提供证据，并且可以使用`Type a`作为我们有运行时的证据来编写静态类型的动态应用程序（例如） `a`。

在较旧的 TypeRep 案例中，我们没有这样的证据，它归结为运行时字符串相等，以及通过`fromDynamic`.

比较签名：

```
toDyn :: Typeable a => a -> TypeRep -> Dynamic 
```

与 GADT 风格相比：

```
toDyn :: Type a => a -> Type a -> Dynamic 
```

我不能伪造我的类型证据，我可以稍后在重建事物时使用它，例如查找类型类实例，以了解`a`我只有一个`Type a`.

# nsstring - 设置文本 = 字符串会使我的程序崩溃

> ID：15160472
> 
> 赞同：0
> 
> 时间：2013-03-01T14:46:56.873
> 
> 标签：nsstring, label

我是新手，所以要温柔。我有这个功能：

```
- (void) Morepoint {
    gscore ++;
    scoreString = [NSString stringWithFormat:@"%i", gscore];
    lblscore.text = scoreString;
} 
```

`gscore`全局在哪里。`scoreString`是一个 NSString 并且`lblscore`是一个标签。每次我在我的游戏循环中插入函数时，程序都会停止运行。任何人都可以弄清楚吗？如果我从游戏循环外部调用该函数，一切正常，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T04:11:54.887

您拥有`initWithFormat`您负责释放的返回对象，但您不拥有`stringWithFormat`返回自动释放字符串的返回对象，因此不需要释放它（如果您确实想拥有它的所有权，则必须保留它）。

因此，为了解决您的问题，请尝试像这样分配您的价值，

```
- (void) Morepoint 
{
    gscore ++;
    scoreString = [[NSString alloc] initWithFormat:@"%i",gscore];
    lblscore.text = scoreString;      

} 
```

希望这对您有所帮助。试一试:)

# django - 使用 ForeignKey 和 ManyToMany 查询 Django 模型

> ID：15160473
> 
> 赞同：0
> 
> 时间：2013-03-01T14:46:57.247
> 
> 标签：django

我正在尝试自学 Django 并为教师列表应用程序构建了一个简单的模型。有课程级别（小学、中学、高中等）、课程、教师和教师课程会员资格。

我想获取其教师订阅了特定会员资格的课程级别和课程。目前我正在做以下事情（显然是一个非常糟糕的做法，但由于数据库非常小，它工作正常）：

```
course_levels = CourseLevel.objects.prefetch_related('course_set')

    # get mainpage teachers
    # TODO: This is inefficient, there must be some cool way of doing the same.
    for course_level in course_levels:
        for course in course_level.course_set.
            course.visible_teachers = course.teachers.filter(membership__type=Membership.TYPE_FRONT_PAGE) 
```

这是`models.py`

```
class Teacher(models.Model):
    name = models.CharField(max_length=64)

class CourseLevel(models.Model):
    name = models.CharField(max_length=64)

class Course(models.Model):
    name = models.CharField(max_length=64)

    # courses can have levels
    level = models.ForeignKey(CourseLevel)
    teachers = models.ManyToManyField(Teacher, through='Membership')

class Membership(models.Model):
    (TYPE_FRONT_PAGE, TYPE_COURSE_PAGE, TYPE_BASIC) = (1,2,3)

    teacher = models.ForeignKey(Teacher, related_name='membership')
    course = models.ForeignKey(Course)

    MEMBERSHIP_TYPES = (
        (TYPE_FRONT_PAGE, _('Front Page')),         # Display users on the front page
        (TYPE_COURSE_PAGE, _('Course Page')),       # Display users on the front of course page
        (TYPE_BASIC, _('Basic Membership')),        # Display users after  
    )
    type = models.IntegerField(max_length=2, choices=MEMBERSHIP_TYPES) 
```

获取这些记录的更好方法是什么，而不是在 Django Query API 中迭代课程并获取相关教师？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:28:29.807

我不确定这是否完全符合您的要求，但是，这是您想要执行的搜索类型吗？

```
Membership.objects.filter(type = 1, course__level__name = 'college') 
```

我请了两位老师，他们都是第一类，都教“有趣”的课，一个在“大学”教“有趣”，另一个在“年级”教“有趣”。以下是几次搜索的这些输出：

```
>>> members = Membership.objects.filter(type=1)
>>> members
[<Membership: Membership object>, <Membership: Membership object>]
>>> members.filter(course__level__name='college')
[<Membership: Membership object>]
>>> Membership.objects.filter(type=1, course__level__name='college')
[<Membership: Membership object>] 
```

也许这个搜索最像你要求的那个：

```
>>> Membership.objects.filter(course__name='fun', type=1)
[<Membership: Membership object>, <Membership: Membership object>] 
```

# binary - 从二进制格式打开 jpeg 图像

> ID：15160475
> 
> 赞同：4
> 
> 时间：2013-03-01T14:47:00.237
> 
> 标签：binary, format, type-conversion, jpeg

我有一个二进制文件，我想打开（或转换为）jpeg 图像。我只认为该文件是二进制格式的 jpeg，因此我包含了其中的一部分，以便您可以告诉我我是否错了（因为不幸的是我以前从未见过其中一个）：

```
0000000000 0E 03 13 01 00 10 00 00 EC B0 00 1E 00 01 00 00 [................]
0000000016 00 CA 00 00 00 5C 00 0F 00 01 00 00 01 26 00 00 [.....\.......&..]
0000000032 00 00 01 2F 00 01 00 00 01 26 00 00 83 B2 00 6A [.../.....&.....j]
0000000048 00 01 00 00 84 D8 00 00 00 04 01 2C 00 01 00 00 [...........,....]
0000000064 84 DC 00 00 00 14 01 32 00 01 00 00 84 F0 00 00 [.......2........]
0000000080 00 08 07 AD 00 02 00 00 84 F8 00 00 00 19 00 0F [................]
0000000096 00 02 00 00 85 11 00 00 00 00 01 2F 00 02 00 00 [.........../....]
0000000112 85 11 00 00 0D D3 01 2C 00 02 00 00 92 E4 00 00 [.......,........]
0000000128 00 14 01 32 00 02 00 00 92 F8 00 00 00 08 07 AD [...2............]
0000000144 00 03 00 00 93 00 00 00 00 19 00 0F 00 03 00 00 [................]
0000000160 93 19 00 00 00 00 01 2F 00 03 00 00 93 19 00 00 [......./........]
0000000176 59 7B 01 2C 00 03 00 00 EC 94 00 00 00 14 01 32 [Y{.,...........2]
0000000192 00 03 00 00 EC A8 00 00 00 08 00 00 00 04 00 00 [................]
0000000208 00 02 00 00 00 00 4E 43 53 41 20 48 44 46 20 56 [......NCSA HDF V]
0000000224 65 72 73 69 6F 6E 20 34 2E 32 20 52 65 6C 65 61 [ersion 4.2 Relea]
0000000240 73 65 20 30 2C 20 44 65 63 65 6D 62 65 72 20 32 [se 0, December 2]
0000000256 2C 20 32 30 30 33 00 00 00 00 00 00 00 00 00 00 [, 2003..........]
0000000272 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 [................]
0000000288 00 00 00 00 00 00 FF D8 FF E0 00 10 4A 46 49 46 [............JFIF]
0000000304 00 01 01 00 00 01 00 01 00 00 FF DB 00 43 00 10 [.............C..]
0000000320 0B 0C 0E 0C 0A 10 0E 0D 0E 12 11 10 13 18 28 1A [..............(.]
0000000336 18 16 16 18 31 23 25 1D 28 3A 33 3D 3C 39 33 38 [....1#%.(:3=<938]
0000000352 37 40 48 5C 4E 40 44 57 45 37 38 50 6D 51 57 5F [7@H\N@DWE78PmQW_]
0000000368 62 67 68 67 3E 4D 71 79 70 64 78 5C 65 67 63 FF [bghg>Mqypdx\egc.]
0000000384 DB 00 43 01 11 12 12 18 15 18 2F 1A 1A 2F 63 42 [..C......./../cB]
0000000400 38 42 63 63 63 63 63 63 63 63 63 63 63 63 63 63 [8Bcccccccccccccc]
0000000416 63 63 63 63 63 63 63 63 63 63 63 63 63 63 63 63 [cccccccccccccccc]
0000000432 63 63 63 63 63 63 63 63 63 63 63 63 63 63 63 63 [cccccccccccccccc]
0000000448 63 63 63 63 FF C0 00 11 08 01 A0 01 C0 03 01 22 [cccc..........."]
0000000464 00 02 11 01 03 11 01 FF C4 00 1F 00 00 01 05 01 [................]
0000000480 01 01 01 01 01 00 00 00 00 00 00 00 00 01 02 03 [................]
0000000496 04 05 06 07 08 09 0A 0B FF C4 00 B5 10 00 02 01 [................] 
```

如何将其转换为 jpeg 以查看其内容（应该是图像）？这种转换是必要的，还是您会推荐一个可以按我喜欢的方式打开它的软件？我希望有人可以帮助我，在此先感谢。

**回答**

（因为我现在无法回答我自己的问题，所以我在这里做......）

最后我想出了一个解决方案，这要归功于 unwind 的输入信息。我下载了 HEX 编辑器（[http://www.hhdsoftware.com/free-hex-editor](http://www.hhdsoftware.com/free-hex-editor)）来编辑我的二进制文件。然后我搜索了 0xff 0xd8 所在的字符串（可能在第 0000000288 行）。这应该是 JPEG 文件的开头。然后我删除了之前的所有内容（还有同一行中的六对零）。然后我保存了 m 个编辑并再次尝试使用图像处理程序打开它（在我的情况下，我使用的是 ENVI），并且....它可以工作！现在二进制文件是红色的图像文件！现在的问题是我有很多这些文件（302），我需要编辑所有这些文件。而且，它们每个都包含多个 jpeg，因此我需要修改每个 ore 次。我想我需要提高我的编程知识......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:53:20.263

好吧，根据[this page](http://en.wikipedia.org/wiki/Magic_number_%28programming%29#Magic_numbers_in_files) JPEG文件以字节对开头`0xff 0xd8`，因此您可以向前搜索该序列，并丢弃它之前的数据。

在您的文件中，它发生在开头的行上`0000000288`。

# html - 固定位置 div 在相对定位的元素上不遵守 z-index

> ID：15160476
> 
> 赞同：0
> 
> 时间：2013-03-01T14:47:01.180
> 
> 标签：html, css, z-index, css-position

我的页面上有一个与用户一起滚动的固定位置，但是当在页面上相对定位的元素上移动`<div>`时我遇到了一些麻烦。`<div>`我已将固定 div 上的 z-index 设置为 10，在相对定位的元素上设置为 0。我知道设置`position:fixed;`会将元素从正常的文档流中取出，因此 z-index 在这里不会有太大用处，但它确实有助于未相对定位的元素。

所以我正在寻找一种方法让这个固定的 div 始终出现在我的页面内容的顶部，而不管相对定位的元素如何，有没有简单的方法来实现这一点，而不是制作相对定位的元素`static`（默认）？也许是一些 jQuery 插件？或解决方法？值得注意的是，这只是**IE7中的一个问题**

# android - Android - 本机代码仅在模拟器上触发 SIGILL

> ID：15160481
> 
> 赞同：0
> 
> 时间：2013-03-01T14:47:33.623
> 
> 标签：android, native-code, fault

只有当我在模拟器上运行我的应用程序时，它才会触发 SIGILL 错误。该应用程序正在使用 ActionBarSherlock 并且最低 SDK 目标是 API 级别 8。执行本机代码时会触发故障（应用程序的其余部分，用 Java 编写，似乎可以工作）。我尝试了许多不同的模拟器设置，但均未成功。没有特定的代码出错。如果我评论出错的函数，则 SIGILL 会在其他某个点由其他函数触发。我使用宏 LOGI 在控制台上写东西，并且正确调用了本机代码函数。我完全不知道发生了什么。该应用程序在两部不同的手机上完美运行（运行 android 2.3.4 的 armv6 rev 5 和运行 android 4.0.3 的 armv7 rev 9）。本机代码是我在 Windows 桌面系统上编写和测试的库，它工作没有问题。帮助！

安卓.mk

> ```
> OCAL_PATH := $(call my-dir)    
> include $(CLEAR_VARS)    
> #LOCAL_CFLAGS     := -DANDROID_NDK -Wno-psabi
> LOCAL_C_INCLUDES += png++/ 
> LOCAL_C_INCLUDES += libpng/
> LOCAL_C_INCLUDES += zlib/
> LOCAL_MODULE    := mylib
> LOCAL_SRC_FILES := /* a list of .cpp files... */
> LOCAL_SRC_FILES += $(wildcard ./*.c)
> LOCAL_SRC_FILES += $(wildcard ./zlib/*.c)
> LOCAL_SRC_FILES += $(wildcard ./libpng/*.c)
> LOCAL_LDLIBS := -llog
> LOCAL_LDLIBS += -ljnigraphics
> LOCAL_CFLAGS += -marm -march=armv6 -mfloat-abi=softfp -mfpu=vfp -fpermissive -fwrapv -O2 -fexceptions    
> include $(BUILD_SHARED_LIBRARY) 
> ```

应用程序.mk

> ```
> APP_STL := gnustl_static
> APP_OPTIM := release
> APP_CPPFLAGS += -frtti 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T13:22:06.623

我有一个类似的问题。我放弃了尝试模拟器；我认为这与 Android 模拟器上的 ARMv6 支持有关。由于我的也在设备上工作，我不再关心这个问题。

# iphone - 如何从Linux上的非越狱iphone中提取sms.db

> ID：15160483
> 
> 赞同：0
> 
> 时间：2013-03-01T14:47:35.553
> 
> 标签：iphone, sqlite, sms, fuse

目标：从Iphone 4S 中提取sms.db 短信数据库。

我已经在 ubuntu 12.04 上安装了 ifuse 并且能够浏览某些文件夹。似乎没有一个包含“sms.db”文件。

是否可以使用 Linux 上免费提供的工具来提取 sms.db？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T22:34:25.600

我还不知道如何直接从手机访问 SMS.DB 文件。但是，如果您使用 iTunes 等备份 iPhone，则可以从备份中读取 SMS.DB 文件。它将经过 SHA-1 哈希处理（文件名将是乱码），但它仍应为 .DB 文件。您将需要 iPhone Analyzer 来取消文件名的散列，或类似的东西。然后你可以将它加载到 SQLite 中。如果您找到解决方案，请在此处发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T00:59:35.627

我已经找到了一种如何使用越狱设备访问它的方法......如果你没有越狱，根据 Github 所说的（[https://github.com/libimobiledevice/ifuse](https://github.com/libimobiledevice/ifuse)） ，它可能是一样的

无论如何，打开一个终端

```
Sudo su 
```

现在在您的家中创建一个文件夹并将 iuse 指向该文件夹

```
ifuse --root /home/<INSERT NAME>/<INSERT NAME OF FOLDER> 
```

现在你必须以 root 身份打开该文件夹

```
nautilus 
```

浏览您的 /home/ 并找到该文件夹​​。

它应该在

```
/var/mobile/Library/SMS/sms.db 
```

然后，您只需将其复制到您的桌面就可以了！

# r - 在 R 中轻松去除异常值

> ID：15160485
> 
> 赞同：7
> 
> 时间：2013-03-01T14:47:39.117
> 
> 标签：r, standard-deviation

我有离散 x 值的数据，例如

```
x = c(3,8,13,8,13,3,3,8,13,8,3,8,8,13,8,13,8,3,3,8,13,8,13,3,3)
y = c(4,5,4,6,7,20,1,4,6,2,6,8,2,6,7,3,2,5,7,3,2,5,7,3,2); 
```

如何生成一个新的 x 和 y 值数据集，其中我消除了 y 值比该箱的平均值高 2 个标准差的值对。例如，在 x=3 bin 中，20 比均值高 2 个 SD 多，因此应删除数据点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T15:00:09.977

对我来说，你想要这样的东西：

```
 by(dat,dat$x, function(z) z$y[z$y < 2*sd(z$y)])
dat$x: 3
[1] 4 1 6 5 7 3 2
--------------------------------------------------------------------------------------------------------------- 
dat$x: 8
[1] 4 2 2 2 3
--------------------------------------------------------------------------------------------------------------- 
dat$x: 13
[1] 3 2 
```

**评论后编辑**：

```
 by(dat,dat$x, 
           function(z) z$y[abs(z$y-mean(z$y))< 2*sd(z$y)]) 
```

**编辑**

我稍微改变了`by`函数来获取 x 和 y，然后我调用`rbind`using`do.call`

```
 do.call(rbind,by(dat,dat$x,function(z) {
                              idx <- abs(z$y-mean(z$y))< 2*sd(z$y)
                              z[idx,]
            })) 
```

或`plyr`在单次通话中使用

```
 ddply(dat,.(x),function(z) {
                 idx <- abs(z$y-mean(z$y))< 2*sd(z$y)
                  z[idx,]}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T14:50:02.250

像这样的东西？

```
newdata <- cbind(x,y)[-which(y>2*sd(y)), ] 
```

或者你的意思是这样的？

```
Data <- cbind(x,y)
Data[-which(sd(y)>rowMeans(Data)), ] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T15:08:46.593

您可以使用`tapply`此功能，但您将丢失原始订单。

```
tapply(y,x,function(z) z[abs(z-mean(z))<2*sd(z)])
$`3`
[1] 4 1 6 5 7 3 2

$`8`
 [1] 5 6 4 2 8 2 7 2 3 5

$`13`
[1] 4 7 6 6 3 2 7 
```

# sip - 媒体行中的媒体格式（有效载荷类型编号）与 rtpmap 不同

> ID：15160486
> 
> 赞同：1
> 
> 时间：2013-03-01T14:47:39.497
> 
> 标签：sip, sdp

在测试 SIP 视频呼叫时，我在提供的媒体的答案中获得了以下媒体线路信息。这是有效的媒体线路吗？其中媒体格式编号与 rtpmap 编号不同：

```
m=video 49218 RTP/AVP 109
b=TIAS:322000
a=rtpmap:96 H264/90000
a=fmtp:96 profile-level-id=42801f; max-mbps=216000; max-fs=3600; sar=13
a=sendonly 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T11:52:07.867

这不是一个有效的会话描述，但比拉尔夫的答案更微妙的原因。109 的 PT（有效负载类型）落在[RFC 3551](https://www.rfc-editor.org/rfc/rfc3551)中定义的 RTP/AVP 配置文件的动态范围内，该配置文件适用`RTP/AVP`于`m`线路中的 。“动态”意味着它所说的：RTP/AVP 定义了一大堆标准编解码器——PCM mu-law、G.729 等等——并且还允许您定义自己的 PT。

在这里，描述说“我们将使用 109 的自定义 PT，并在 96 处定义另一个，忘记定义 109 的含义”。

定义一堆`rtpmap`属性而不使用它们是完全有效的；使用 PT 然后不定义它是无效的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:37:57.857

我会说这是一个实现错误，因为 rtpmap 属性没有引用在媒体行中指定的有效负载格式，这实际上使属性无用。

来自[Rfc4566](https://www.rfc-editor.org/rfc/rfc4566)：

```
a=rtpmap:<payload type> <encoding name>/<clock rate> [/<encoding
     parameters>]

     This attribute maps from an RTP payload type number (as used in
     an "m=" line) to an encoding name denoting the payload format
     to be used. 
```

# excel - 如果没有要自动填充的行，则获取自动填充宏以停止

> ID：15160489
> 
> 赞同：0
> 
> 时间：2013-03-01T14:47:45.387
> 
> 标签：excel, vba

我有一个电子表格，它通过自动过滤宏从数据库中提取某些项目并将它们放入不同的部分。我有公式可以输入并自动填充到每个部分的每一行。我遇到的问题是如果一个部分只有一行我的宏将调试。下面是我插入公式并自动填充它们的代码。最后一行是自动填充宏，我需要帮助。有人可以为我提供一个覆盖，说明是否没有要自动填充的行以继续下一步。我不确定这段代码会如何运行。谢谢

```
'To insert formulas
ActiveCell.Offset(0, 1).Select
ActiveCell.FormulaR1C1 = "=IF(RC5<'Data Entry'!R2C2,""*"","""")"
ActiveCell.Offset(0, 1).Select
ActiveCell.FormulaR1C1 = "=IF(RC18=TRUE,IFERROR(VLOOKUP(RC2,Database!C[-2]:C[9],11,FALSE),""""),0)"
ActiveCell.Offset(0, 1).Select
ActiveCell.FormulaR1C1 = "=IFERROR(VLOOKUP(RC2,Database!C[-3]:C[8],10,FALSE),"""")"
ActiveCell.Offset(0, 1).Select
ActiveCell.FormulaR1C1 = "=IFERROR((VLOOKUP(RC9,Pull!C1:C5,4,FALSE))*RC4,"""")"
ActiveCell.Offset(0, 1).Select
ActiveCell.FormulaR1C1 = "=IFERROR((VLOOKUP(RC9,Pull!C1:C5,5,FALSE))*RC4,"""")"
ActiveCell.Offset(0, 1).Select
ActiveCell.FormulaR1C1 = "=IFERROR(SUM(RC4,RC6:RC7),"""")"
ActiveCell.Offset(0, 1).Select
ActiveCell.FormulaR1C1 = "=IFERROR(VLOOKUP(RC2,Database!C[-7]:C[4],6,FALSE),"""")"
ActiveCell.Offset(0, 1).Select
ActiveCell.FormulaR1C1 = "=IF(RC18=TRUE,IFERROR(VLOOKUP(RC9,'Pull'!C1:C5,2,FALSE),""""),"""")"
ActiveCell.Offset(0, 1).Select
ActiveCell.FormulaR1C1 = "=IFERROR(RC8*RC10,"""")"
ActiveCell.Offset(0, 1).Select
ActiveCell.FormulaR1C1 = "=IFERROR(RC8+RC11,"""")"
ActiveCell.Offset(0, 1).Select
ActiveCell.FormulaR1C1 = "=IFERROR(RC16*R9C13,"""")"
ActiveCell.Offset(0, 1).Select
ActiveCell.FormulaR1C1 = "=IF(RC18=TRUE,IFERROR(VLOOKUP(RC9,'Pull'!C1:C5,3,FALSE),""""),"""")"
ActiveCell.Offset(0, 1).Select
ActiveCell.FormulaR1C1 = "=IFERROR(RC16*RC14,"""")"
ActiveCell.Offset(0, 1).Select
ActiveCell.FormulaR1C1 = "=IFERROR(RC12/(1-R9C13-RC14),"""")"
Range(Cells(Selection.Row, 3), Cells(Selection.Row, 17)).AutoFill Destination:=Range(Cells(Selection.Row, 3), "Q" & Range("B" & Rows.Count).End(xlUp).Row) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:45:13.570

我会设置一个 LastRow 变量，计算你已经做的方式，并测试它是否大于选择行：

```
Dim LastRow as Long

LastRow = ActiveSheet.Range("B" & Rows.Count).End(xlUp).Row
...
If LastRow > Selection.Row Then
    Range(Cells(Selection.Row, 3), Cells(Selection.Row, 17)).AutoFill Destination:=Range(Cells(Selection.Row, 3), "Q" & LastRow)
EndIf 
```

顺便说一句，如果您搜索“VBA 避免选择语句”，您将获得一些关于为什么这是一个好主意以及如何做到这一点的信息。在这种情况下，我会在代码的开头设置一个 CellWithFormula 变量：

```
Dim CellWithFormula as Excel.Range
Set CellWithFormula = Activcell
CellWithFormula.FormulaR1C1 = "=IF(RC5<'Data Entry'!R2C2,""*"","""")"
Set CellWithFormula = CellWithFormula.Offset(0, 1) 
```

... 等等。

# magento - Magento：获取捆绑产品的最高和最低价格

> ID：15160491
> 
> 赞同：2
> 
> 时间：2013-03-01T14:47:50.350
> 
> 标签：magento, bundle, max, product, min

我尝试了几个可以在谷歌上找到的想法，但几天没有人为我工作。最后，我找到了一种在自定义扩展中显示 magento 捆绑产品的“最低可能价格”和“最高可能价格”的方法：

```
 $_product_id            = YOUR_BUNDLE_PRODUCT_ID;

    // highest possible price for this bundle product
    $return_type            = 'max'; // because I used this in a helper method

    // lowest possible price for this bundle product
    // $return_type         = 'min';

    $model_catalog_product  = Mage::getModel('catalog/product'); // getting product model
    $_product               = $model_catalog_product->load( $_product_id );

    $TypeInstance           = $_product->getTypeInstance(true);
    $Selections             = $TypeInstance->getSelectionsCollection($OptionIds, $_product );
    $Options                = $TypeInstance->getOptionsByIds($OptionIds, $_product);
    $bundleOptions          = $Options->appendSelections($Selections, true);

    $minmax_pricevalue      = 0; // to sum them up from 0

    foreach ($bundleOptions as $bundleOption) {
        if ($bundleOption->getSelections()) {

            $bundleSelections       = $bundleOption->getSelections();

            $pricevalues_array  = array();
            foreach ($bundleSelections as $bundleSelection) {

                $pricevalues_array[] = $bundleSelection->getPrice();

            }
                if ( $return_type == 'max' ) {
                rsort($pricevalues_array); // high to low
                } else {
                sort($pricevalues_array);   // low to high
                }

            // sum up the highest possible or lowest possible price
            $minmax_pricevalue += $pricevalues_array[0];

        }
    }

    // echo $minmax_pricevalue;
    echo ''.Mage::helper('core')->currency($minmax_pricevalue, true, false).''; 
```

如果您有更好和更短的方法，请随时在此处发布。感谢所有相关人员！

**所有的背景**是，我做了一个自定义扩展，还想在那里展示这种配置的“最低可能价格”和“最高可能价格”。Magento-Setup 是：本机“捆绑产品”几个“捆绑项目选项”连接了我的“捆绑产品”。每个“捆绑选项”都有多个价格不同的简单产品。我认为这就是重点。

希望一切都对某人有所帮助-喜欢分享这些东西:-)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-02-05T15:22:32.000

Magento 为此目的内置了功能：

```
Mage::getModel('bundle/product_price')->getTotalPrices($_product,'min',1); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T13:43:09.837

这里再次是最终的工作代码：

```
$_product_id            = YOUR_BUNDLE_PRODUCT_ID;

// highest possible price for this bundle product
$return_type            = 'max'; // because I used this in a helper method

// lowest possible price for this bundle product
// $return_type         = 'min';

$model_catalog_product  = Mage::getModel('catalog/product'); // getting product model
$_product               = $model_catalog_product->load( $_product_id );

$TypeInstance           = $_product->getTypeInstance(true);
$Selections             = $TypeInstance->getSelectionsCollection($OptionIds, $_product );
$Options                = $TypeInstance->getOptionsByIds($OptionIds, $_product);
$bundleOptions          = $Options->appendSelections($Selections, true);

$minmax_pricevalue  = 0; // to sum them up from 0

foreach ($bundleOptions as $bundleOption) {
    if ($bundleOption->getSelections()) {

        $bundleSelections       = $bundleOption->getSelections();

        $pricevalues_array  = array();
        foreach ($bundleSelections as $bundleSelection) {

            $pricevalues_array[] = $bundleSelection->getPrice();

        }
            if ( $return_type == 'max' ) {
            rsort($pricevalues_array); // high to low
            } else {
            sort($pricevalues_array);   // low to high
            }

        // sum up the highest possible or lowest possible price
        $minmax_pricevalue += $pricevalues_array[0];

    }
}

// echo $minmax_pricevalue;
echo ''.Mage::helper('core')->currency($minmax_pricevalue, true, false).''; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T19:08:00.027

不久前我遇到了类似的问题并想出了这个问题（在[Incho 的博客](http://inchoo.net/ecommerce/magento/magento-get-bundled-items-by-bundle-product/)上获取捆绑产品系列的一些帮助）。它将与 main 关联的所有捆绑产品加载`product_id`到一个数组中。通过对数组进行排序，您可以得到底部的最小值和末尾的最大值，我用`$bundled_prices[0]`and检索了它们`array_slice($bundled_prices, -1, 1, false)`。

```
 $product_id = YOUR_PRODUCT_ID;

    $bundled_product = new Mage_Catalog_Model_Product();
    $bundled_product->load($product_id);
    $selectionCollection = $bundled_product->getTypeInstance(true)->getSelectionsCollection(
            $bundled_product->getTypeInstance(true)->getOptionsIds($bundled_product), $bundled_product
    );
    $bundled_items = array();
    foreach($selectionCollection as $option) { 
        if ($option->getPrice()!="0.0000"){                 
            $bundled_prices[]=$option->getPrice();
        }
    }

    sort($bundled_prices);

    $min_price=$bundled_prices[0];
    $max_price_tmp=array_slice($bundled_prices, -1, 1, false);
    $max_price=$max_price_tmp[0];

    echo "Min: " . $min_price . '<br>'; 
    echo "Max: " . $max_price; 
```

# centos - laravel - 无法在服务器上打开paths.php

> ID：15160499
> 
> 赞同：0
> 
> 时间：2013-03-01T14:48:21.163
> 
> 标签：centos, laravel

这是一个奇怪的。出于某种原因，出乎意料的是，每次我创建一个新项目并上传到我的服务器时，它都不允许我通过 FTP 编辑paths.php 文件。

我今天早些时候通过命令行访问了服务器来安装一个包，并注意到 path.php 文件是绿色的，并且旁边有一个星号。有谁知道这意味着什么，是否影响我打开这个文件？

问候

![在此处输入图像描述](../Images/827a9e1054478f06740e2e8c933a46e8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:13:14.833

该文件的权限为 755，这意味着：

```
755 = rwx r-x r-x
Owner has Read, Write and Execute
Group has Read and Execute only
Other has Read and Execute only 
```

查看图片，qsradmin 是文件的所有者，所以他是唯一可以编写或编辑文件的人。

要更改文件的所有者，请使用 chown 命令，如下所示：

```
chown NameOfTheUser path.php 
```

有关更多信息，请[查看 Unix 文件权限](http://docs.joomla.org/How_do_UNIX_file_permissions_work?)

# j - 和的平方减去 J 中的平方和（或如何乘坐火车？）

> ID：15160502
> 
> 赞同：2
> 
> 时间：2013-03-01T14:48:33.447
> 
> 标签：j

还在J的学习过程中……现在要解决的问题是[表示和的平方减去自然整数的平方和](http://projecteuler.net/problem=6)。

天真的解决方案是

```
(*:+/>:i.100) - (+/*:>:i.100) 
```

现在，我想使用一个 fork 来`>:i.100`只写一次列表。我的叉子应该：

```
 h
/   \
f   g
|   |
x   x 
```

其中`f`是`g`和的平方， 是平方和，`h`是负数。于是，我天真地写道：

```
((*:+/) - (+/*:)) >:i.100 
```

但它给了我一个域错误。为什么？我也试过：

```
(+/ (*: - +/) :*) >: i.100 
```

而这一次，它给了我一长串数字......我猜它与`@`连词有关，但我仍然不知道 At 是做什么的......继续我的探索，我终于得到了

```
((+/*+/) - +/@:*:) >:i.100 
```

但我不喜欢我手动计算平方而不是使用`*:`运算符这一事实，而且我真的不明白为什么我需要合`@:`取。有人可以告诉我这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:37:48.483

`(+/*:)``(*:+/)`不要做你认为他们做的事。

实际上，您的`f`是`Q (S x)`（x 的平方和）和您的`g`是`S (Q x)`（x 的平方和）。您[可以看到](http://www.jsoftware.com/help/learning/08.htm)对于任何 f,g 它是`f (g y)`= `(f @: g) y`。

所以，你可以写

```
(Q (S x)) h (S (Q x)) 
```

作为

```
((Q @: S) x) h ((S @: Q) X) 
```

*现在*相当于_

```
(f x) h (g x) 
```

或者

```
(f h g) x 
```

因此，

```
((*: @: (+/)) - (+/ @: *:)) >: i.1000 
```

另请注意，`*: @: (+/)`这与 不同`*: @: +/`，因为`+/`不是*一个*动词（like `*:`），而是一个动词 ( `+`) 和一个副词 ( `/`) 的复合动词。

# map - 使用 Bing Map Api 生成的地图的图像质量存在问题

> ID：15160504
> 
> 赞同：0
> 
> 时间：2013-03-01T14:48:37.843
> 
> 标签：map, localization, geolocation, bing-maps, bing-api

我正在开发一个应用程序，它使用 [Bing Api] 检索“Bing Maps”图像，因为我的 webService。我的问题是图像的渲染。 **如果我将缩放设置为大于**11，**或者如果我设置的尺寸太大**，恢复我的图像的结果就像“剪切”成几个加载并且给人的印象是图像没有完全下载。

**下面的示例图...**

你知道为什么图像看起来像它的背面吗？

这是我的 webService 中使用的代码。

```
 //call function 
    GetImageMap(46,6,800,800,17);

    //Get Bing map Image from the web
    public string GetImageMap(double latitude,double longitude,int mapSizeHeight, int mapSizeWidth, int zoomLevel)
    {
        string key = "asoidfz9aos78fa9w3hf9w3fh9hf7ha9wfw37fhblablablablablabla";
        MapUriRequest mapUriRequest = new MapUriRequest();

        // Set credentials using a valid Bing Maps key
        mapUriRequest.Credentials = new ImageryService.Credentials();
        mapUriRequest.Credentials.ApplicationId = key;

        // Set the location of the requested image
        mapUriRequest.Center = new ImageryService.Location();
        mapUriRequest.Center.Latitude = latitude;
        mapUriRequest.Center.Longitude = longitude;

        // Set the map style and zoom level
        MapUriOptions mapUriOptions = new MapUriOptions();
        mapUriOptions.Style = MapStyle.Aerial;
        mapUriOptions.ZoomLevel = zoomLevel;
        mapUriOptions.PreventIconCollision = true;
        // Set the size of the requested image in pixels
        mapUriOptions.ImageSize = new ImageryService.SizeOfint();
        mapUriOptions.ImageSize.Height = mapSizeHeight;
        mapUriOptions.ImageSize.Width = mapSizeWidth;

        mapUriRequest.Options = mapUriOptions;

        //Make the request and return the URI
        ImageryServiceClient imageryService = new ImageryServiceClient();
        MapUriResponse mapUriResponse = imageryService.GetMapUri(mapUriRequest);
        return mapUriResponse.Uri;
    }
    // ### END Function getImageMap 
```

和网址查询：

```
http://api.tiles.virtualearth.net/api/GetMap.ashx?c=46,6&dcl=1&w=800&h=800&b=a,mkt.en-US&z=17&token={token} 
```

结果图像..： ![在此处输入图像描述](../Images/278194811c6d7a36cbf28a028de620cb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:06:22.870

它似乎与航拍图像有关，与技术无关。我会向相应的团队报告。

顺便说一句，您应该使用 REST Imagery API，这是使用 Bing 图像的官方方式，请参阅 MSDN：

[http://msdn.microsoft.com/en-us/library/ff701724.aspx](http://msdn.microsoft.com/en-us/library/ff701724.aspx)

这是基于您的示例的示例 URL：

```
http://dev.virtualearth.net/REST/v1/Imagery/Map/Aerial/46,6/17?mapSize=800,800&key=YOURKEY 
```

# excel - 如何使用 C#/VSTO 检查 Excel 中是否存在范围

> ID：15160505
> 
> 赞同：0
> 
> 时间：2013-03-01T14:48:39.447
> 
> 标签：excel, vsto, range, exists

我目前正在使用 VSTO 和 Excel 开发一个 C# 项目。事实是我在我的程序中保存了 Ranges，但是当我在 Excel 上删除这个范围时，它在程序中给了我一个错误。而且我找不到检查单元格是否仍然存在的方法。

你知道检查范围是否存在的方法吗？

# android - 在所有应用程序生命周期中保持会话

> ID：15160510
> 
> 赞同：0
> 
> 时间：2013-03-01T14:48:56.713
> 
> 标签：android, session

我需要创建一个会话并不时更改它。在特定活动中应恢复它并将其与不同的变量进行比较并修改此会话的值。我试图为此创建一个类，但是更改了活动，将值恢复为null。我需要它一直保留到应用程序关闭。

以下：

```
import android.app.Application;

public class Util extends Application {
    private static String idCorrente;

    public void onCreate() {
        super.onCreate();
        idCorrente="0";
    }

    public static String getIdCorrente() {
        return idCorrente;
    }

    public static void setIdCorrente(String id) {
        Util.idCorrente = id;
    }
} 
```

我不知道这样做的正确方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:53:40.057

您需要以某种方式将数据存储在设备上。我建议阅读 Android 开发者指南的[存储选项](http://developer.android.com/guide/topics/data/data-storage.html)页面。

具体来说，我认为您会发现[SharedPreferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)非常适合您的应用程序。

# xslt - XSL 转换中的编码问题

> ID：15160511
> 
> 赞同：0
> 
> 时间：2013-03-01T14:48:58.840
> 
> 标签：xslt, encoding

我有类似于这里讨论的编码问题：[cross-encoding XSL transformations](https://stackoverflow.com/questions/6495875/cross-encoding-xsl-transformations)

这些问题没有给出明确的答案；这就是为什么我再次问它的原因。

我有一个以 UTF8 编码的 XML 输入文件。我有一个 XSL 转换应用于这些文件，它应该生成一个在 Windows-1252 中编码的 XML 输出。

我的 XSLT 文件中有以下两个声明：

```
<?xml version="1.0" encoding='Windows-1252'?>

<xsl:output method="text" indent="yes" encoding="Windows-1252"/> 
```

我使用 Saxon 作为 XSL 处理器。除此之外，每次遇到没有 Windows-1252 等效项的 UTF8 字符时，我仍然会遇到致命错误。实际上，我并不真正关心这些角色，我的转变可能会放弃所有这些角色。我只希望转型继续进行，不要因为它们而崩溃。

我在哪里错过了什么？为什么仍然有这个致命错误（致命错误！输出字符在此编码中不可用）？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:12:35.850

您描述的消息仅使用文本输出方法生成（使用 XML 或 HTML，序列化程序将使用数字字符实体）。规范要求此错误（请参阅[http://www.w3.org/TR/xslt-xquery-serialization/#TEXT_ENCODING](http://www.w3.org/TR/xslt-xquery-serialization/#TEXT_ENCODING)），但我可以理解为什么您可能需要更温和的回退，例如输出替代字符。

如果你不介意一点 Java 编码，可以很容易地替换你自己的 Saxon 的 TEXTEmitter 版本，它做事不同（你只需要重写一个方法）；或者，您可以将 XSLT 输出发送到 Java Writer（编码将被忽略），并使用 Java I/O 框架将字符转换为所需的编码，无论您的应用程序需要什么处理无效字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:53:28.460

UTF-8 是比 Windows-1252 更大的字符集

这意味着某些 UTF-8 字符无法转换为 windows-1252

问问自己为什么需要在编码之间进行转换

# android - 实现 Android Timeline Calendar 的最佳方式

> ID：15160522
> 
> 赞同：2
> 
> 时间：2013-03-01T14:49:49.817
> 
> 标签：android, listview, scrollview, timeline

我想像在 iPhone 中一样创建时间轴

![在此处输入图像描述](../Images/0a463d0a70960e719846e4115b0a370a.png)

事件时间可以是 9.42，它应该开始在 9.30 的虚线下方绘制，并且距离 9.30 有多远。

我能想到的唯一方法是使用`ScrollView`with`FrameLayout`并以编程方式添加时间线。

```
<ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >

        <FrameLayout
            android:id="@+id/timeline"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

        </FrameLayout>
    </ScrollView> 
```

如果我能够使用`ListView`而不是更好，`ScrollView`但我不知道如何自由地将事件放置在单元格中，因为如果事件从 10.50 开始。

描述此事件的文本必须跨越单元格。

有人可以建议我吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-23T10:45:15.430

最近碰到同样的问题。我从你的框架布局的想法开始，上面有一堆视图，但对性能和我必须做的大量工作来绘制和自定义，比如项目下方的网格，我并不满意。

所以我继续集成的一个解决方案是扩展`View`类，覆盖它的`onDraw`和相关的方法，然后在那里绘制我需要的任何东西。

在这种情况下，我可以对正在发生的事情以及我希望它的外观进行大量控制。不用说，我可以并且确实实现了一些性能改进，例如将底层网格缓存到位图等等，当您使用像布局和视图组合这样高级别的东西时，这是很难实现的。

在任何情况下，您或遇到相同问题的任何人都可能希望从简单的事情开始，例如（代码不在我的脑海中）：

```
public class MyDayTimeline extends View {
    String [] timeMarkers; // time strings, like "9.00 AM" or something
    Rect [] eventRects; // a bunch of rectangles, which correspond to your events
    final int rowCount;
    final int rowHeightPx;
    final int firstColumnWidthPx;

    // ..... constructors, size and painting initialization, event position calculation and whatnot

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawLine(firstColumnWidthPx, 0, firstColumnWidthPx, getMeasuredHeight(), delimeterLinesPaint); // draw a delimeter between time markers and the rest of the control space

        for (int i = 1; i < rowCount; i++) {
            canvas.drawLine(0, i * rowHeightPx, getMeasuredWidth(), i * rowHeightPx, delimeterLinesPaint); // draw a bunch of lines separating each hour
        }

        for(int i = 0; i < eventRects.size(); i++) { // draw a bunch rectangles, each representing an event
            canvas.drawRect(eventRects[i], eventPaintBackgroundPaint);
            canvas.drawRect(eventRects[i], eventPaintBorderPaint);
        }
    }
} 
```

乍一看，需要完成的工作量似乎相当庞大，但实际上并非如此，如果您首先计划您需要做什么，然后再去做。我选择了这样的东西：

1.  `onDraw()`首先在覆盖中绘制一个简单的时间线网格，所有尺寸和颜色都经过硬编码。
2.  覆盖`onMeasure()`和`onSizeChanged()`，开始相应地更改您的大小控制字段。`24 * rowHeightPx`无论测量规格如何，我都采用简单的尺寸来确定我在哪里占据所有可用空间的宽度，并大胆地要求高度。
3.  使用“canvas.drawText()”在时间网格中放置一堆时间里程碑。
4.  想出一个结构来定义你的事件。我选择了开始和结束日期/时间、一些主题字符串和一组矩形。当控件的大小发生变化时，我会重新计算每个事件应该采用的矩形。
5.  实施事件绘图，`onDraw()`使您先前定义的结构和位置计算到位。
6.  处理特定情况，例如跨越几天的事件。
7.  `onTouchEvent()`开始用什么东西处理水龙头。添加一些日志以查看您是否正确执行了命中测试，如果需要，开始使用突出显示的颜色重绘事件框架等等。
8.  从可重用性的角度来看，让您的控制更好。为某些属性定义 getter 和 setter，在 中定义自定义属性`attrs.xml`，在初始化代码中实现对这些属性的处理。公开一些自定义侦听器，例如 EventClickedListener 或其他东西。
9.  在此之上添加一些支持控件。将整个内容包裹在 a 中`ScrollView`，我使用 a`ViewPager`来处理水平滑动并显示前一天/第二天/一周/一个月。
10.  给定几乎准备好的一天时间线，从中提取基类并开始处理其他时间线，例如周和月的时间线。

然后继续改进你的控制，直到你和你的队友对结果感到满意。显然，您需要在每个步骤中不断地测试、调试和修复您的控件，因此拥有一堆测试用例非常有帮助。

当我处理周和月概览时，我在使用标准 Calendar API 时也遇到了一些问题，因此您可能会考虑使用其他库，例如 Joda Time，但那是另一回事了。

# mysql - 优化sql查询以查找列中非唯一值的数量

> ID：15160526
> 
> 赞同：0
> 
> 时间：2013-03-01T14:50:09.840
> 
> 标签：mysql, sql

有没有人知道如何优化下面的查询，因为它需要相当长的时间：

```
select count(*) from 
(select field1
from table
group by field1
having count(distinct field1) <> count(field1)) AS Q1 
```

该查询用于查找列中非唯一值的数量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:56:34.540

如果您想要非唯一值的数量，请使用：

```
select count(*)
from (select field1
      from table
       group by field1
       having count(*) > 1
      ) t 
```

而且，是的，索引`table.field1`会加快这一进程。

如果您想要这些值，请使用：

```
select field1
from table
group by field1
having count(*) > 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T14:51:03.093

添加一个`INDEX`on 列`field1`，例如

```
ALTER TABLE tableNAME ADD INDEX (field1) 
```

*   [MySQL 如何使用索引](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)

# ios - UIViewController 子类策略

> ID：15160529
> 
> 赞同：0
> 
> 时间：2013-03-01T14:50:13.103
> 
> 标签：ios, objective-c, cocoa-touch, uiviewcontroller, uikit

假设我有一个选项卡式应用程序，其中每个选项卡显示不同类别的相似数据（例如，Tab1：“猫图片”，Tab2：“狗图片”，Tab3：“马图片”等）。

每个选项卡的视图控制器都以相同的方式呈现数据。唯一的区别是 vc 的 title 属性和获取数据的方法的参数。那么以下选项的优缺点是什么：

*   为每个类别创建一个具有（有限）分支逻辑的 ViewController 主控。

*   为不同的类别类型创建一个 ViewController 超类和几个子类。

**编辑**

因此，为了澄清“获取数据的方法的参数”： fetch 方法可能如下所示：

```
-(void)fetchDataForType:(NSString*)type {
       if ([type isEqual:@"cat"])
           // fetch cat pics
       if ([type isEqual:@"dog"])
           // fetch dog pics
       ...
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:04:22.507

在你的情况下，我什至不会子类化。创建一个具有您将更改的属性的类，并使用不同的属性值进行实例化。

粗略的例子：

```
@interface ViewController : UIViewController
@property (retain, nonatomic) NSString *title;
- (void)getJSONWithParams:(NSDictionary *)params;
@end 
```

实例：

```
ViewController *controller1 = [[ViewController alloc] init];
controller1.title = @"First";
NSDictionary *params1 = @{@"url":@"http://graph.facebook.com", @"query":@"q=somethingInFacebook"};
[self.navigationController pushViewController:controller1];
[controller1 getJSONWithParams:params1];

ViewController *controller2 = [[ViewController alloc] init];
controller2.title = @"Second";
NSDictionary *params2 = @{@"url":@"http://api.twitter,com", @"query":@"q=somethingInTwitter"};
[self.navigationController pushViewController:controller2];
[controller2 getJSONWithParams:params2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:55:15.397

短期项目：

*   我会保留一个`UIViewController`数据源会改变的地方（在这种情况下是图片的种类）

长期项目：

*   我可能会子类，因为您可能需要在之后添加较小的差异，并且现在创建子类将在以后为您节省一些时间。即使在短期项目中，您也可以使用这种方法。由于数据源是唯一发生变化的，子类大部分是空的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:29:46.953

我根本不会子类化。您创建一个视图控制器，其属性可以在设置时更改，并为每个选项卡创建一个实例。没有什么可以阻止您创建视图控制器的多个实例。一个视图层次结构不需要一个视图控制器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T14:58:06.037

Create`AbstractViewController`包含所有公共信息并具有所有方法。随心所欲地创建几个`ViewControllers`，它们继承自`super`并用它们的行为覆盖函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T15:27:56.173

我相信一个 UIViewController 子类可以提供你需要的一切。您只需要提供支持每种不同类型图片所需*的差异。*让我们假设这些差异只是它显示的图片的描述和类型：

MyViewController.h：

```
@MyViewController : UIViewController

@property (strong, nonatomic) NSString *description;
@property (strong, nomatomic) NSString *type;

// Designated initializer
- (id)initWithNibName:(NSString *)nibName
               bundle:(NSBundle *)nibBundle
          description:(NSString *)description
                 type:(NSString *)type;

@end 
```

MyViewController.m：

```
@implementation MyViewController

 - (id)initWithNibName:(NSString *)nibName
                bundle:(NSBundle *)nibBundle
           description:(NSString *)description
                  type:(NSString *)type
{
    self = [super initWithNibName:nibName bundle:nibBundle];
    if (self != nil)
    {
        self.description = description;
        self.type = type;
    }
    return self;
}

- (NSArray *)fetchPics
{
    NSMutableArray *pics = [[NSMutableArray alloc] init];

    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://www.somewhere.com/fetchPics?type=%@", self.type]];
    ...

    return pics;
}

@end 
```

然后它应该只是在必要时创建视图控制器的情况：

```
MyViewController *catVC = [[MyViewController alloc] initWithNibNamed:@"Something" bundle:nil description:@"Cats" type:@"cat"];
... 
```

# ruby - 如何在 sinatra 应用程序中丑化咖啡脚本？

> ID：15160535
> 
> 赞同：1
> 
> 时间：2013-03-01T14:50:26.953
> 
> 标签：ruby, coffeescript, uglifyjs

在 sinatra 中使用咖啡脚本。使用以下代码。它能够即时返回和编译coffeescript 作为js。在咖啡吐出之前，有什么好方法可以丑化结果吗？希望问题很清楚

```
get "/coffee/*.js" do
    filename = params[:splat].first
    coffee "../public/coffee/#{filename}".to_sym
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:49:44.623

我想[sinatra-assetpack](https://github.com/rstacruz/sinatra-assetpack)会成功的。

# jquery - JQuery 没有选择 SELECT

> ID：15160536
> 
> 赞同：1
> 
> 时间：2013-03-01T14:50:35.497
> 
> 标签：jquery, select, blur

我正在使用 JQuery blur() 方法从“select”元素的选项中提取值，但由于某种原因，它总是提取 selectedIndex = 0 的值，而不是我选择的 selectedIndex。

这是 --> [JSFiddle](http://jsfiddle.net/t7LcX/) <-- 出于某种原因，第一行工作正常（长度），但其他行都不起作用。

在任何文本框中键入一个数字（第一个“长度”除外），然后从相邻的 SELECT 框中选择一个项目，然后单击 SELECT

您将看到代码始终在每个 SELECT 元素中选择 option=0 的值。它也无法将我的“数据隐藏”属性识别为数字（请参阅文本框元素中的 html）

有人可以帮忙吗？我已经坚持了一天了。

**另外，由于某种原因，这仅适用于 JQuery 1.7.2 而不适用于 1.9 版本（它不喜欢 'option:selected' 代码，有人知道该片段如何符合最新版本吗？

```
$('select').blur(function() {

//Get the value of the option chosen
var unit = $(this + 'option:selected').val();

//If the selectedIndex is 0 then focus on the select and make the user chose a unit.
  if ($(this).prop('selectedIndex') == 0) {
      $(this).focus();
    return;
} else {

//Remove the 'd' in front of the 'select' element ID and you will have the ID of the   textbox
        var txt = "#" + $(this).attr("id").substr(1);

//Get the numerical value of the textbox
        var mval = parseFloat($(txt).val());

            if ($(txt).attr('data-hid') == "OFF") {
                var hid = mval / unit;
                $(txt).attr('data-hid', hid);
                 alert("hid = " + hid + "\nmval = " + mval + "\nunit = " + unit);
            }
            else 
            {
                var hid = $(txt).attr('data-hid');
                var newtxt = hid * unit;
                $(txt).val(newtxt);
            }
}
main();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:54:30.157

为什么不直接使用`$(this).val()`which 为您提供所选项目的选定值？无需先专门获取选项元素。

[http://api.jquery.com/val/](http://api.jquery.com/val/)

文档甚至这么说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:56:55.407

这一行是错误的：

```
//Get the value of the option chosen
var unit = $(this + 'option:selected').val(); 
```

应该：

```
var unit = $(':selected', this).val(); 
```

要了解原因（除了查看 jQuery 文档），请在您的`blur`函数下方尝试此行：

```
console.log(this + 'option:selected'); //outputs something like [object HTMLSelectElement]option:selected 
```

您*可以*执行以下操作：

```
console.log('#' + $(this).attr('id') + ' option:selected'); //outputs something like #mySelectBox option:selected 
```

但是现在我们变得有点荒谬了：D ...但也许它可以帮助您了解 jQuery 选择器的工作原理至少 =0]

[Torsten 的](https://stackoverflow.com/a/15160608/622129)回答确实是正确的方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T14:59:39.273

如果要获取一个select的值，也就是被选中的option的值，正确的做法是：

```
$(this).val(); // Inside the .blur "this" points to your select 
```

然后，您可以检查值是否为空，如果为空则返回，而不是检查所选索引是否为 0，否则该人从您的选择中选择了有效值。

此外，在您的小提琴 html 上，第一个选项是“已选择”，您不必输入该关键字即可使第一个选项表现为默认值，如果未选择任何选项，则选择第一个选项。

此外，您确定要在模糊时触发此事件吗？不会 .change 更适合您的目的。根据您的描述，“工作流程”是在输入中键入一个数字，然后在选择中选择一个单位。当用户选择一个值时，只有在选择字段丢失焦点时，才会更改触发器。

# html - 为什么我的 qt webView 不能返回 html

> ID：15160542
> 
> 赞同：0
> 
> 时间：2013-03-01T14:50:44.830
> 
> 标签：html, pyqt, activex, qwebview

全部

前几天，我用wxpython想访问ie。但我不知道如何在 python 中使用 activex 即。我的问题链接[如何使用 IEHtmlWindow 小部件更改 html 表单](https://stackoverflow.com/questions/15106096/how-use-iehtmlwindow-widget-change-html-form)

所以我使用 pyQt 开发 GUI 程序。

```
 MainWindow.setObjectName(_fromUtf8("MainWindow"))
    MainWindow.resize(800, 600)
    self.centralwidget = QtGui.QWidget(MainWindow)
    self.webView = QtWebKit.QWebView(self.centralwidget)
    self.webView.setGeometry(QtCore.QRect(110, 30, 571, 231))
    self.webView.setUrl(QtCore.QUrl(_fromUtf8("about:blank")))
    self.webView.setObjectName(_fromUtf8("webView"))
    self.webView.load(QUrl('http://zzxh.zjsgat.gov.cn:6081/zjwwzzxh/'))
    frame = self.webView.page().mainFrame()
    print unicode(frame.toHtml()).encode('utf-8') 
```

我运行前端代码。但它也返回以下结果

```
 <html><head></head><body></body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:14:52.940

我想我知道为什么它总是返回 '' ，因为 .toHtml() 方法必须需要页面加载成功。

# visual-studio-2010 - 使用 office.interop 打印输出方法时不打印图像

> ID：15160544
> 
> 赞同：0
> 
> 时间：2013-03-01T14:50:52.390
> 
> 标签：visual-studio-2010, ms-word, image

我有一个文档，页脚中有一个图像，主体中有一个图像。

我的问题是页脚打印正常，但主体中的图像没有。如果我在 Word 中本机从文档中打印，则一切正常，但是当我使用

```
MsWord.ActiveDocument.PrintOut(Background:=False, Range:=Word.WdPrintOutRange.wdPrintAllDocument, Item:=Word.WdPrintOutItem.wdPrintDocumentContent, PageType:=Word.WdPrintOutPages.wdPrintAllPages)ied adding it as a watermark and that prints 
```

它不会在正文中打印图片。

有什么你知道的可以阻止这种情况。

仅供参考，我尝试将其添加为水印并且有效，就在它在主体中时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:59:35.757

通过使其成为具有大量空白的水印来解决它

# php - 通过将数组键与第一个子键匹配来重写数组键，可能在 php 中？

> ID：15160548
> 
> 赞同：0
> 
> 时间：2013-03-01T14:51:03.877
> 
> 标签：php

我想知道是否有一种简单的方法可以将数组键与 logo_id 匹配？

如果我找不到方法来做到这一点，我将需要使用数组搜索，这对于包含 200 个项目的数组来说会变得非常慢。正确的？

ps 这是 mysqli fetch 结果调用返回的结果。也许可以修改它以提供我需要的数组？

```
 Array
(
    [0] =&gt; Array
        (
            [logo_id] =&gt; 1
            [logo_name] =&gt; beeline
            [logo_level] =&gt; 1
            [logo_image_path] =&gt; logos/1.png
            [logo_value] =&gt; 2
            [logo_hints] =&gt; 
        )

    [1] =&gt; Array
        (
            [logo_id] =&gt; 2
            [logo_name] =&gt; geocell
            [logo_level] =&gt; 1
            [logo_image_path] =&gt; logos/2.png
            [logo_value] =&gt; 4
            [logo_hints] =&gt; 
        )

    [2] =&gt; Array
        (
            [logo_id] =&gt; 3
            [logo_name] =&gt; google
            [logo_level] =&gt; 1
            [logo_image_path] =&gt; logos/3.png
            [logo_value] =&gt; 5
            [logo_hints] =&gt; 
        )

    [3] =&gt; Array
        (
            [logo_id] =&gt; 5
            [logo_name] =&gt; coca cola
            [logo_level] =&gt; 1
            [logo_image_path] =&gt; logos/5.png
            [logo_value] =&gt; 2
            [logo_hints] =&gt; 
        )

) 
```

我解释得好吗？phh，抱歉措辞不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:58:11.447

> 这是 mysqli fetch 结果调用返回的结果。也许可以修改它以提供我需要的数组？

是的。我假设你的意思是[`mysqli_result::fetch_all`](http://php.net/manual/en/mysqli-result.fetch-all.php)。而是在循环中使用[`mysqli_result::fetch_row`](http://php.net/manual/en/mysqli-result.fetch-row.php)并使用您喜欢的任何键手动构建您的数组。

# php - 创建查询mysql数据库的下拉菜单

> ID：15160549
> 
> 赞同：1
> 
> 时间：2013-03-01T14:51:06.587
> 
> 标签：php, mysql

让我进一步解释我正在尝试做的事情。我正在使用一个表查询数据库，其中包含字段 id、书籍、作者、流派、电子邮件。

我有一个可以正常工作的插入页面，但我需要一个搜索页面，其中包含 4 个搜索，并带有一个下拉框，显示每个字段的唯一条目 - 书籍、作者、流派、电子邮件。

我遇到了一个 URL，我一直在努力显示数据库中的条目，但是当您单击一个条目时，它无处可去：（ ~~`http://www.phpsuperblog.com/php/html-form-drop-down-menu-with-data-from-mysql-datebase-as-options/`~~死链接）

我希望我做的一些基本错误。让它工作的最新尝试在这里：（ ~~`http://swapabook.hostei.com/search6.php`~~死链接）

我之前一直在尝试按照以下链接创建这些下拉菜单来查询数据库中动态变化的内容：（ ~~`http://forums.devarticles.com/mysql-development-50/drop-down-menu-populated-from-a-mysql-database-1811.html`~~死链接）

我希望我通过编辑来做正确的事情，但如果你想让我添加一个新条目，我也可以这样做。

我的html代码如下：

```
 <form action="namesearch2.php" method="post">
   Name of Book
   <SELECT NAME=name>
      <OPTION VALUE=0>Choose
   </SELECT>
   <input type="submit">
</form> 
```

php如下：

```
<?php
 $con=mysqli_connect('mysql1x.000webhost.com','a4425533_swapabo','xxxx','a4425533_swapabo');

// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

$result = mysqli_query($con,"'SELECT book FROM book'");

while($row = mysqli_fetch_array($result))
 {
  $bookselect=$row["book"];
  $options.="<OPTION VALUE=\"$bookselect\">".$bookselect.'</option>';
  }
?> 
```

我以前有它，你可以在一个字段中输入文本，它会查询数据库，但我在尝试填充这个下拉菜单时遇到了麻烦。

~~`http://swapabook.hostei.com/search2.html`~~（死链接）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:57:26.230

我想补充一下user2035638所说的......

我检查了你的 HTML .. 发现第一个条目没有关闭。

```
Name of Book
<SELECT NAME=name>
  <OPTION VALUE=0>Choose
    </SELECT>
<input type="submit"> 
```

您必须关闭第一个`<OPTION>`，以便您的代码应如下所示：

```
Name of Book
<SELECT NAME=name>
  <OPTION VALUE=0>Choose</OPTION>
    </SELECT>
<input type="submit"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:15:26.627

尝试这个;

```
<?php 
 $con=mysqli_connect('mysql1x.000webhost.com','a4425533_swapabo','xxxx','a4425533_swapabo');

// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

$result = mysqli_query("SELECT book FROM book",$con);
?>
<form action="namesearch2.php" method="post">
   Name of Book
   <SELECT NAME=name>
      <OPTION VALUE=0>Choose
      <?php  
      while($row = mysqli_fetch_array($result))
     {
      $bookselect=$row["book"];
      echo "<OPTION VALUE=\"$bookselect\">".$bookselect.'</option>';
      }
     ?>

   </SELECT>
   <input type="submit">
</form> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-01T14:54:15.463

您的代码中似乎有一个错误：

这一行：

```
$options.="<OPTION VALUE=\"$bookselect\">".$bookselect.'</option>'; 
```

改成：

```
$options.="<OPTION VALUE=\"".$bookselect".\">".$bookselect.'</option>'; 
```

# c++ - 避免重复模板参数以访问类模板中的枚举

> ID：15160557
> 
> 赞同：5
> 
> 时间：2013-03-01T14:51:27.837
> 
> 标签：c++, templates, enums

考虑一个实现容器的类模板，该容器包括一个用于选择其存储位置的选项。

```
template<class T>
class Container {
public:
  enum StorageOption {A,B};
  Container(StorageOption opt_): option(opt_) {}
private:
  StorageOption option;
}; 
```

这里`StorageOption`被选为成员，因为它只在课堂上使用。

现在，要实例化类，我需要重复模板参数，例如：

```
{
  Container<int> c( Container<int>::A );
} 
```

有没有办法避免重复参数并同时`StorageOption`成为成员，或者有没有更好的方法来实现该选项？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T14:55:21.647

它通常是通过在基类中定义它来实现的。

```
class ContainerBase {
public:
  enum StorageOption {A,B};
};

template<class T>
class Container : public ContainerBase{
public:
  Container(StorageOption opt_): option(opt_) {}
private:
  StorageOption option;
};

Container<int> c( ContainerBase::A ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-06T17:45:35.863

我自己一直在与这个问题作斗争，我真的不喜欢基类的需要以及在想要使用枚举类时如何重复基类说明符。我想出了这个解决方案：

```
namespace FuncEnum{
    enum class FuncNeighbor{
        FLOOR, CEILING, SELF
    };
    enum class FuncDirection{
        BACK, FRONT, BACKNFRONT
    };
    enum class FuncVar{
        X, Y
    };
} using namespace FuncEnum;

template<typename... Types>
class Func {}; 
```

通过这种方式，您可以拥有具有最小规范的全局可用枚举类。<类昵称> <枚举类名>之间不太可能发生冲突，但即使有， using 声明也应该隐藏（？）任何全局标识符将干扰（在特殊情况下，可以与另一个 using 再次撤消宣言）。

# eclipse - 使用 javaCore 在 Play2 Eclipse 项目中包含 Scala 和 Java 自然

> ID：15160558
> 
> 赞同：1
> 
> 时间：2013-03-01T14:51:28.743
> 
> 标签：eclipse, scala, sbt, playframework-2.1

我有一个要为 Eclipse 配置的 sbt play2 项目，以自动包含 Scala 特性和 Java 特性（在生成的 .project 文件中）。我可以通过手动添加性质在 eclipse 中执行此操作，但我希望 eclipse 插件自动为我执行此操作。

该插件的默认行为是添加这两种性质，***除非***您在 appDependencies 中包含 javaCore，我需要这样做。包含 javaCore 时，mainLang 会自动设置为 JAVA，而 Scala Nature 会在配置中排除。

请参阅：[https](https://github.com/playframework/Play20/wiki/Migration) ://github.com/playframework/Play20/wiki/Migration下更改构建文件

有没有办法覆盖 mainLang 并将其设置为 Scala？还是有另一种方法可以将 Scala Nature 与 Java Nature 一起包含在内？

```
import sbt._
import Keys._
import play.Project._

object ApplicationBuild extends Build {

  val appName         = "SampleApp"
  val appVersion      = "1.0-SNAPSHOT"

  val appDependencies = Seq(
    javaCore, javaJdbc, javaEbean
  )

  val main = play.Project(appName, appVersion, appDependencies).settings(
    // Want to set mainLang = SCALA here, but don't know how
  )
} 
```

我对所有东西都使用 sbt，所以播放命令是不受限制的（以避免额外的系统依赖）

编辑：我正在使用 play-sbt 2.1.0、Scala 2.10.1-RC1 和 sbt 0.12.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:14:31.273

通过查看 Play sbt-eclipse 源代码（[此处](https://github.com/playframework/Play20/blob/master/framework/src/sbt-plugin/src/main/scala/play/Project.scala#L38)和[此处](https://github.com/playframework/Play20/blob/master/framework/src/sbt-plugin/src/main/scala/PlayEclipse.scala)`Build.scala`），我设法使用以下文件使其工作：

```
import sbt._
import Keys._
import play.Project._

object ApplicationBuild extends Build {

  val appName         = "SampleApp"
  val appVersion      = "1.0-SNAPSHOT"

  val appDependencies = Seq(
    javaCore, javaJdbc, javaEbean
  )

  import com.typesafe.sbteclipse.core._
  import com.typesafe.sbteclipse.core.EclipsePlugin._
  import scala.xml.transform.RewriteRule

  val main = play.Project(appName, appVersion, appDependencies).settings(
    EclipseKeys.projectFlavor := EclipseProjectFlavor.Scala,
    EclipseKeys.projectTransformerFactories := Seq[EclipseTransformerFactory[RewriteRule]]()
  )
} 
```

不要忘记 3 个导入。

应该有更好的方法直接使用，`eclipseCommandSettings("SCALA")`但我没有找到。

# c++ - HippoMocks - 模拟一个返回 unique_ptr 的函数

> ID：15160565
> 
> 赞同：6
> 
> 时间：2013-03-01T14:51:53.280
> 
> 标签：c++, c++11, mocking, hippomocks

我目前没有成功模拟返回 unique_ptr 的接口。例如，给定

```
struct IFoo {     
    virtual std::unique_ptr<IFoo> foo = 0;
};

int main()
{
    MockRepository mocks;
    auto foo = mocks.Mock<IFoo>();
    mocks.OnCall( foo, IFoo::foo )
         .Return( std::unique_ptr<IFoo>() );
} 
```

这无法编译，因为`Return`实现复制了 unique_ptr

```
Call &Return(Y obj) { retVal = new ReturnValueWrapper<Y>(obj); return *this; } 
```

并且期望尝试返回 unique_ptr

```
template <typename Z>
Z MockRepository::DoExpectation(base_mock *mock, std::pair<int, int> funcno, const base_tuple &tuple)
{
    ...
    return ((ReturnValueWrapper<Z> *)call->retVal)->rv;
} 
```

我已经尝试过`Do`，正如[针对返回引用的类似问题](https://stackoverflow.com/questions/11772970/hippomocks-mocking-return-values-by-ref)所建议的那样。

我也尝试过编写自己的`ValueWrapper<T>`生成 unique_ptr 的方法，但值总是在某处被复制。现在我已经没有想法了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:12:29.500

该问题的一种解决方案是使用附加方法创建派生接口，该方法将返回值作为临时返回

```
template <class T>
class TypedReturnValueHolder : public ReturnValueHolder {
public:
    virtual T rv() = 0;
}; 
```

他们修改了原来的`ReturnValueHolder`

```
template <class T>
class ReturnValueWrapper : public ReturnValueHolder {
public:
typename no_cref<T>::type rv;
ReturnValueWrapper(T rv) : rv(rv) {}
}; 
```

继承并实现派生接口。

```
template <class T>
class ReturnValueWrapper : public TypedReturnValueHolder<T> {
    typename no_cref<T>::type prv;
public:
    ReturnValueWrapper(T rv) : prv(rv) {}
    virtual T rv() { return prv; };
}; 
```

一旦完成，return from`DoExpectation`可以写为

```
 if (call->retVal)
            return ((TypedReturnValueHolder<Z> *)call->retVal)->rv(); 
```

重写时使用的问题中的示例`Do`

```
mocks.OnCall( foo, IFoo::foo )
     .Do( [](){ return std::unique_ptr<IFoo>(); } ); 
```

然后按预期编译和运行。

# javascript - 在 WebBrowser 托管页面中为 window.external 提供 VB6 对象

> ID：15160567
> 
> 赞同：0
> 
> 时间：2013-03-01T14:51:57.587
> 
> 标签：javascript, vba, vb6, webbrowser-control, window.external

使用 .NET WebBrowser 控件，我们可以：

```
WebBrowser1.ObjectForScripting = new a_class(); 
```

where`a_class`被声明为`[ComVisible(True)]`.

之后，`a_class`页面中名为 的 javascript 可以访问该实例`window.external`。

**如何使用 VB6/VBA WebBrowser OCX 控件实现相同的功能？**

显然没有要设置的直接属性。

有和对象，两者都没有*（* 假设页面已加载），但是将某物的实例分配给后者会导致`WebBrowser1.Document.parentWindow``WebBrowser1.Document.parentWindow.external``null`

> 运行时错误 445
> 对象不支持此操作。

只是为了排除它，我让我想要传递的类[实现了`IObjectSafety`interface](http://support.microsoft.com/kb/182598)，但这没有做任何事情（`IObjectSafety`甚至没有调用成员）。

`parentWindow.external`我还尝试使用 TypeLib Information检查现有对象。`ClassClassInfoFromObject`因“不支持自动化或所需接口”`InterfaceInfoFromObject`而失败，因“下标超出范围”而失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:11:34.243

这在 VB6 中并不容易做到。`IDocHostUIHandler`您必须在控件的站点对象上实现接口`WebBrowser`并返回`IDispatch`from`GetExternal`方法。站点对象由 VB6 表单提供，因此您必须对其进行挂钩`QueryInterface`以提供（某些） VB6 站点对象的`IUnknown`自定义实现。`IDocHostUIHandler`

这是我前段时间执行的直接复制/粘贴：[https ://gist.github.com/wqweto/5065624](https://gist.github.com/wqweto/5065624)

您需要`VBOleGuids3`typelib 和一些代码清理才能使其编译为单独的项目。

# performance - 带有“collapse()”用于嵌套 for 循环的 OpenMP 在没有时性能更差

> ID：15160570
> 
> 赞同：12
> 
> 时间：2013-03-01T14:52:11.830
> 
> 标签：performance, openmp, collapse

这是我的代码：

```
double res1[NNN];  
#pragma omp parallel for collapse(3) schedule(dynamic) 
for (int i=0; i<NNN; i++)
{
    for (int j=0;j<NNN;j++)
    {
        for (int k=0;k<NNN;k++)
        {
            res1[i] = log(fabs(i*j*k));
        }
    }
}
std::cout<< res1[10] << std::endl; 
```

当我使用`collapse(3)`它需要大约 50 秒；无需`collapse(3)`约 6-7 秒。我对这种行为感到非常困惑，因为我本以为“崩溃”会比没有“崩溃”有更好的表现。

我错过了什么吗？

* * *

我做了一些实验并使用了不同的配置：

（NNN = 2500 和 24 核）

1.  `schedule(STATIC)`&& `collapse(3)`-> ~54 秒
2.  `schedule(STATIC)`&& `collapse(2)`-> ~8 秒
3.  `schedule(STATIC)`&& `collapse(1)`-> ~8 秒

我也尝试了`DYNAMIC`日程安排，但这需要大量时间（几分钟）。

* * *

在我最初的问题中，我有 4 个 DIM“for-loops”（4D 数组）：51x23x51x23。

使用 OpenMP/MPI 最小化运行时间的最佳方法是什么？我总共有大约 300 个 CPU 内核。将我的阵列分布在这些核心上的最佳方式是什么？数组的长度是灵活的（我可以以某种方式将它与 CPU 的数量相匹配）。

有什么建议么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-01T15:26:08.297

您错过了使用动态调度对 OpenMP 开销有什么影响的概念。

应该使用动态调度来帮助我们解决负载平衡问题，其中*每个循环迭代可能需要不同的时间*，而静态迭代分布很可能会在不同线程之间造成工作不平衡。工作不平衡会导致 CPU 时间浪费，因为较早完成的线程只是等待其他线程完成。动态调度通过在先到先服务的基础上分配循环块来克服这一点。但这增加了开销，因为 OpenMP 运行时系统必须实现记录哪些迭代被发出，哪些没有迭代，并且必须实现某种类型的同步。此外，每个线程在每次完成其迭代块并去寻找另一个时都必须至少调用一次 OpenMP 运行时。使用静态调度，所有迭代块最初都是预先计算的，然后每个线程在其部分上运行，而不与 OpenMP 运行时环境进行任何交互。

静态调度和动态调度之间最关键的区别是迭代块大小（即每个线程在寻求在迭代空间的另一部分工作之前所做的连续循环迭代的数量）。如果省略，则静态调度的块大小默认为 ，`#_of_iterations/#_of_threads`而动态调度的默认块大小为`1`，即每个线程必须向 OpenMP 运行时询问分布式循环的*每次迭代*。

在您的情况下发生的情况是，如果没有`collapse(3)`外部`NNN`循环的迭代块，并且每个线程`NNN*NNN`在询问 OpenMP 运行时进行另一次迭代之前运行迭代（内部循环的）。当您折叠循环时，迭代块的数量增长到`NNN*NNN*NNN`，即有更多的块，并且每个线程将在每次迭代后向 OpenMP 运行时请求一个块。

当内部循环与最外层一起折叠时，这会带来另一个问题：会发生许多线程会获得具有相同值的迭代`i`，这会破坏计算，因为不能保证执行顺序并且可能会发生最后一个线程写入`res1[i]`的不是执行两个内部循环的最后一次迭代的那个。

# sed - 如何使用 sed 在没有后跟另一个字符串时处理一个字符串

> ID：15160572
> 
> 赞同：1
> 
> 时间：2013-03-01T14:52:21.037
> 
> 标签：sed

有谁知道如何与 sed 匹配每个 'foo' 实例，当它在以下字符串中跟随 'bar' 时除外？

> 'foo boo foo foo bar foo foo foo'

期望的结果（匹配的实例以粗体显示）

> '**匹配**       嘘声      **匹配**    foo bar**匹配**     **匹配**          **匹配**'

经过大量测试，我发现：

```
sed -e "s/foo\( *\)bar/FOO\1BAR/g" -e "s/foo/MaTcHeD/g" -e "s/FOO\( *\)BAR/foo\1bar/g" 
```

它包括首先匹配“foo bar”实例并将它们替换为一些临时字符串（此处为“FOO BAR”），然后在将“foo bar”实例“返回”到其原始版本之前匹配其余的“foo”实例。 ..（我希望我很清楚......）

但无论如何，这根本不干净。我会很惊讶没有更直接的方法可以做到这一点，即使到目前为止我还没有找到它。

任何提示将不胜感激。:-)

非常感谢你，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:24:46.933

如果你必须坚持`sed`，你的想法是可以的。但是，如果原始字符串具有`FOO BAR`，您的解决方案将失败。您必须始终选择正确的临时字符串。它使您的脚本不安全。

您可以通过不选择常规字符串作为临时字符串来改进它，而是选择那些**不可见**的字符串。

例如，这条线有效：

```
sed -r 's/foo( *)bar/\x94\1\x98/g; s/foo/Matched/g;s/\x94( *)\x98/foo\1bar/g' file 
```

# c# - 在 Global.asax 中创建静态对象并从控制器调用它

> ID：15160577
> 
> 赞同：1
> 
> 时间：2013-03-01T14:52:35.023
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, singleton

我在 Global.asax 中创建了一个类，如下所示：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();

    WebApiConfig.Register(GlobalConfiguration.Configuration);
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    BundleConfig.RegisterBundles(BundleTable.Bundles);
    AuthConfig.RegisterAuth();          

   //SHOULD I PUT THE LIST DESCRIBLED BELOW IN HERE?
}

public sealed class security
{
    private static readonly Lazy<security> lazy = new Lazy<security>(() => new security());

    public static security Instance { get { return lazy.Value; } }

    private security()
    {
    }

   //OR SHOULD I PUT THE LIST DESCRIBLED BELOW IN HERE?

} 
```

问题：

1.  我正在使用它来创建一个与所有用户共享的静态列表。这就是我需要的：`public static List<permissionTemp> userPermissionSet { get; set; }`，但我不确定该行放在哪里，所以它会在应用程序启动后立即创建。
2.  创建后，我需要获取此列表以添加用户登录时创建的对象，但我不知道如何从控制器调用该类，因为它位于 Global.asax

我怀疑是否需要使用单例模式，因为每次需要向列表中添加项目时，我都需要获取此类的实例。我想是的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:58:35.203

我将创建一个包含权限集的 Singleton 类并在整个应用程序中使用它。

```
public class PermissionManager{
    private PermissionManager() { UserPermissionSet = new List<permissionTemp>(); }
    private PermissionManager _instance;
    public PermissionManager Instance{
        get{ 
            if (_instance==null) _instance=new PermissionManager();
            return _instance;
        }
    }
    public List<permissionTemp> UserPermissionSet { get; private set; }
} 
```

注意：只是一个简单的实现......您需要实现一个线程安全的构造函数

然后在您使用的代码中

```
PermissionManager.Instance.UserPermissionSet 
```

# varnish - 清漆缓存 - 年龄被重置

> ID：15160580
> 
> 赞同：0
> 
> 时间：2013-03-01T14:52:55.293
> 
> 标签：varnish

我有一个非常简单的站点，并且正在上面设置清漆缓存。服务器是 nginx。

缓存似乎在 120 秒后自动清除，因为当我访问该站点时，我看到 Age 标头被重置。

谁能指出我在哪里删除它并无限期地缓存页面或直到我手动清除清漆？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T22:02:31.007

您没有提及您的操作系统或发行版，但例如在 CentOS 上`/etc/sysconfig/varnish`为 Varnish 设置了默认值。在这些默认值中`VARNISH_TTL=120`，将默认 TTL 设置为 120 秒。

如果您只想为所有对象设置一个高 TTL，您可以在`/etc/sysconfig/varnish`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-26T14:10:50.190

如果后端发送到 Varnish 年龄标头，Varnish 会像 Web 浏览器一样将它们视为真正的到期日期，并在标头到期时清除其内容。

您应该确保后端不会将缓存控制标头发送到清漆，并且只有清漆会在向浏览器发送数据时添加缓存控制标头。

# c# - 如何在动态“文本框”上创建事件

> ID：15160581
> 
> 赞同：2
> 
> 时间：2013-03-01T14:52:55.770
> 
> 标签：c#, winforms, textbox

我设法创建`textboxes`了在每次单击按钮时在运行时创建的。当我点击它们时，我希望文本`textboxes`消失。我知道如何创建事件，但不知道动态创建的文本框。

我如何将它连接到我的新文本框？

```
private void buttonClear_Text(object sender, EventArgs e)
{
    myText.Text = "";
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T14:58:24.097

这是为每个新创建的文本框分配事件处理程序的方式：

```
myTextbox.Click  += new System.EventHandler(buttonClear_Text); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T14:55:33.337

这里的 sender 参数应该是发送的文本框，即使您需要将其转换为正确的控件类型并将文本设置为正常

```
if (sender is TextBox) {
     ((TextBox)sender).Text = "";
} 
```

将事件注册到文本框

```
myText.Click  += new System.EventHandler(buttonClear_Text); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T14:55:21.023

你的问题不是很清楚，但我怀疑你只需要使用`sender`参数：

```
private void buttonClear_Text(object sender, EventArgs e)
{
    TextBox textBox = (TextBox) sender;
    textBox.Text = "";
} 
```

（方法的名称在这里不是特别清楚，但由于问题也不是，我无法建议更好的方法......）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T14:58:56.673

当您创建 textBoxObj 时：

```
RoutedEventHandler reh = new RoutedEventHandler(buttonClear_Text);
textBoxObj.Click += reh; 
```

我认为（不是 100% 肯定）你必须将听众改为

```
private void buttonClear_Text(object sender, RoutedEventArgs e)
{
  ...
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T14:59:48.213

我猜 OP 想清除创建的所有文本`textBoxes`

```
private void buttonClear_Text(object sender, EventArgs e)
{
  ClearSpace(this);
}

public static void ClearSpace(Control control)
{
    foreach (var c in control.Controls.OfType<TextBox>())
    {
        (c).Clear();
        if (c.HasChildren)
            ClearSpace(c);
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-01T15:06:10.977

这应该可以完成工作：

```
 private void button2_Click(object sender, EventArgs e)
    {
        Button btn = new Button();
        this.Controls.Add(btn);

        // adtionally set the button location & position

        //register the click handler
        btn.Click += OnClickOfDynamicButton;
    }

    private void OnClickOfDynamicButton(object sender, EventArgs eventArgs)
    {
        //since you dont not need to know which of the created button is click, you just need the text to be ""
        ((Button) sender).Text = string.Empty;
    } 
```

# javascript - 使用 .slideToggle 显示带有 javaScript 的嵌套表的动画

> ID：15160586
> 
> 赞同：1
> 
> 时间：2013-03-01T14:53:10.053
> 
> 标签：javascript

这里是 javascript（以及一般前端）的新手，所以请原谅我的错误。

在这个[jsfiddle](http://jsfiddle.net/MMux/EZthV/1/)中，我有一个嵌套表，我想在单击三角形时显示。我想给过渡一个小动画，而不仅仅是突然打开。下面是我的代码。

```
 $(document).ready(function(){
    $(".second").hide();
    $("a").click(function(e)
        {
        e && e.preventDefault();
        var tr = $(e.currentTarget).closest('td').find(".triangle")
        .toggleClass("collapse")
        .toggleClass("expand");
        var tableId = $(e.currentTarget).attr('href');
        $(tableId).slideToggle("slow");
      });
    }); 
```

非常感谢任何有关如何显示动画的帮助。

# python - 动态函数>使用 PySide 生成表单

> ID：15160593
> 
> 赞同：0
> 
> 时间：2013-03-01T14:53:30.707
> 
> 标签：python, pyqt4, pyside

我正在探索基于另一个文件的简单类方法自动生成表单的方法。这个想法是，随着我的“items.py”包的增长，“gui.py”会自动保留标签，甚至进行一些验证。我实际上得到了一些工作：

函数文件：

```
def PrintHelloSomeone(str_someone):
  print "Hello %s" % str_someone

def PrintN(int_N):
  print "%i" % int_N

def PrintRange(int_min, int_max):
  print range(int_min, int_max) 
```

图形用户界面文件：

```
import inspect
from PySide import QtGui

class AutoForm(QtGui.QFormLayout):
  ARG2GUI = {
    'int' : (QtGui.QSpinBox, 'value'),
    'str' : (QtGui.QLineEdit, 'text'),
  }

  def __init__(self, (name, function)):
    super(AutoForm, self).__init__()
    self.function = function

    self.addRow(QtGui.QLabel(name))

    self.call_list = []
    for arg in inspect.getargspec(function).args:
      self.call_list.append(self.arg2widget(arg))

    button = QtGui.QPushButton("Run")
    button.clicked.connect(self.call_function)
    self.addRow(None, button)

  def arg2widget(self, arg):
    tp, name = arg.split('_')
    widget_obj, call = self.ARG2GUI[tp]
    widget = widget_obj()
    widget_call = getattr(widget, call)
    self.addRow(name, widget)
    return widget_call

  def call_function(self):
    args = [call() for call in self.call_list]
    self.function(*args)

if __name__ == '__main__':
  import sys
  import stuff

  app = QtGui.QApplication(sys.argv)

  w = QtGui.QWidget()
  w.show()
  w.setLayout(QtGui.QHBoxLayout())

  for function in inspect.getmembers(stuff, inspect.isfunction):
    w.layout().addLayout(AutoForm(function))

  sys.exit(app.exec_()) 
```

该代码实际上似乎有效，但我想知道是否有更好的方法来做我想做的事情。

# javascript - 启动 Chrome 打包应用程序时出现空白窗口

> ID：15160596
> 
> 赞同：0
> 
> 时间：2013-03-01T14:53:39.987
> 
> 标签：javascript, google-chrome, google-chrome-extension, chrome-web-store, google-chrome-app

当我启动我的 Chrome 打包应用程序时，它听起来但没有加载，我只得到一个空白（空）窗口。我已经检查了控制台以确保没有 javascript 错误。

我在我的 background.js 脚本上使用了这个函数

```
 chrome.app.runtime.onLaunched.addListener(function() {
     chrome.app.window.create('index.html', {
     'width': 1024,
     'height': 768,
     });
    }); 
```

这很奇怪，因为我的应用程序的声音开始了，但窗口仍然是空的。我的应用程序是使用 Sencha Animator 制作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T05:42:48.077

尽管它没有回答这个问题，但我只是想让你知道，我终于尝试了 Node-Webkit [https://github.com/rogerwang/node-webkit](https://github.com/rogerwang/node-webkit)来实现我的目标：拥有我的 HTML5 应用程序的桌面打包版本。

它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:33:24.570

您的 index.html 中的某些内容一定会导致错误。

1.  尝试其中一种[chrome-app-samples](https://github.com/GoogleChrome/chrome-app-samples)。
2.  尝试编辑您的 index.html 以使其变得微不足道，然后慢慢添加您的内容，直到找到错误为止。
3.  检查您是否正在查看背景页面和启动页面中的错误。您可以右键单击应用程序窗口并检查元素以查看它的检查器。您可以使用 chrome://extensions 查看所有页面的检查器视图。

# razor - 剃刀渲染部分不起作用

> ID：15160597
> 
> 赞同：1
> 
> 时间：2013-03-01T14:53:43.063
> 
> 标签：razor

我是一位经验丰富的 Web 开发人员，一年来一直在做项目管理而不是开发，所以我正试图重新投入其中并学习 Razor。到目前为止，这是一个令人沮丧的失败。

我在 VS2012 中创建了一个新的空 Razor 网站，并创建了以下文件：

_MainLayout.cshtml：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Razor Test</title>
    </head>
    <body>
        <div>@RenderBody()</div>
        <div>@RenderSection("testSection")</div>
    </body>
</html> 
```

ContentPage1.cshtml：

```
@{
    Layout = "_MainLayout.cshtml";
}

<div>This is the content on the Razor Test Page.</div> 
```

和 TestSection.cshtml：

```
@{
    Layout = "_MainLayout.cshtml"; 
}

@section TestSection {
    <h1>this is test section</h1>
} 
```

当我尝试运行此页面时，出现以下错误：

> 未定义部分：“TestSection”。

知道发生了什么？这应该是我能得到的最简单的。显然这*太*简单了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:00:25.607

[部分](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)应该进入你的页面而不是单独的 cshtml

ContentPage1.cshtml：

```
@{
    Layout = "_MainLayout.cshtml";
}
@section testSection {
    <h1>this is test section</h1>
}

<div>This is the content on the Razor Test Page.</div> 
```

或者，如果您想单独`cshtml`显示“类似部分”的显示，请改用部分视图。

# android - 在Android中获取surfaceView的截图

> ID：15160598
> 
> 赞同：5
> 
> 时间：2013-03-01T14:53:48.510
> 
> 标签：android, screenshot, surfaceview, screen-capture

在我的应用程序中，我有一些按钮和 SurfaceView 的视图。我必须截取这个视图的屏幕截图，但 SurfaceView 的位置只有黑场。我尝试了在 stackoverflow 上找到的解决方案，但它们对我不起作用。

这是我通常截屏的代码：

```
File folder = new File(Environment.getExternalStorageDirectory().getPath() + "/folder");
if (!folder.exists()) {
    folder.mkdir();
}
String path = folder.getAbsolutePath() + "snapshot.png";
File file = new File(path);
file.createNewFile();

View view = this.findViewById(android.R.id.content).getRootView();
view.setDrawingCacheEnabled(true);
Bitmap drawingCache = view.getDrawingCache();
Bitmap bitmap = Bitmap.createBitmap(drawingCache);

FileOutputStream fos = null;
try {
    fos = new FileOutputStream(file);
    bitmap.compress(CompressFormat.PNG, 100, fos);
} finally {
    bitmap.recycle();
    view.setDrawingCacheEnabled(false);
    if (fos != null) {
        try {
            fos.close();
        } catch (IOException e) {
            Log.e(TAG, e.getMessage(), e);
        }
    }
} 
```

也许有人可以帮忙。

# php - HTTP PUT 请求：使用文件传递参数

> ID：15160599
> 
> 赞同：3
> 
> 时间：2013-03-01T14:53:50.240
> 
> 标签：php, javascript, ajax, post, put

在通过 HTTP POST 请求上传文件的各种测试之后，看起来 HTTP PUT 请求最适合非常大的文件 +1GB 上传。

下面列出了我为 HTTP PUT 文件上传请求测试过的简单代码，效果很好：

JavaScript：

```
var req = createRequest();
req.open("PUT", "PHP/filePutLoad.php");
req.setRequestHeader("Content-type", "text/plain");
req.onload = function (event)
{
    console.log(event.target.responseText);
}
req.send(aUploadedFile.file_object); 
```

PHP：

```
include 'ChromePhp.php';
require_once 'mysqlConnect.php';

ini_set('max_execution_time', 0);

ChromePHP::log( '$_PUT :' . print_r($_PUT));

/* PUT data comes in on the stdin stream */
$putdata = fopen("php://input", "r");

/* Open a file for writing */
$fp = fopen("myputfile.ext", "w");

/* Read the data 1 KB at a time and write to the file */
while ($data = fread($putdata, 1024))
    fwrite($fp, $data);

/* Close the streams */
fclose($fp);
fclose($putdata); 
```

但是，我在从 JavaScript 上传到 PHP 的文件中传递参数和变量时遇到了困难。比如我需要下发上传目标文件夹，新数据需要存放在哪里，上传者的ID等。

*   **有没有办法将 HTTP PUT 请求与 HTTP POST 结合起来提交参数？**
*   **如果我希望通过 HTTP PUT 文件上传将参数从 JavaScript 传递到 PHP，我有哪些选择？**

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T15:12:43.933

也使用 PUT，当您在查询字符串中附加参数时，它可以工作。我也在为此寻找另一种方法。虽然，这是我目前正在使用的解决方法

curl -X PUT " [http://www.my-service.com/myservice?param1=val1](http://www.my-service.com/myservice?param1=val1) " --data @file.txt

# jquery - 使用 popunder 或在新选项卡中打开站点不间断的音乐

> ID：15160600
> 
> 赞同：3
> 
> 时间：2013-03-01T14:53:50.293
> 
> 标签：jquery, html, audio, audio-player

我本来想继续写这个讨论，但我的名声不允许我编辑或回答（对此感到抱歉）： [网站上不间断的背景音乐](https://stackoverflow.com/questions/529952/uninterrupted-background-music-on-website)

所以快速进入正题：

*   我确实讨厌网站上的音乐，但不幸的是，这次我找不到任何改变客户想法的方法。
*   我们正在通过一个通信（图形）机构工作，所以我不能告诉最终客户他是一个 xxiot，我真的需要让这个机构高兴，因为他们最近给了我们很多事情要做，现在是一件好事。

所以底线是他们想要网站上的音乐，并且他们希望可能不必在每次页面加载时重新启动。

我已经决定避免使用框架。

我在试图找到“最好”的方式之间挣扎：

*   打开一个带有音乐的小弹出窗口（想象一下：“我们建议您使用此音乐访问我们的网站..如果您只是讨厌它关闭此弹出窗口”） PRO：对于 SEO 来说应该不会太糟糕 缺点：popunder 不是非常可靠，浏览器经常更改并且它们停止工作，我不想花时间修复它.. :) 这是我尝试过的脚本[https://github.com/hpbuniat/jquery-popunder](https://github.com/hpbuniat/jquery-popunder) 但正如我所说的那样有效在 Firefox 和 IE 上，在 Chrome 25 上它作为弹出窗口打开，在 Safari 上不能正常工作。

*   反之亦然：该域在一个只有徽标、背景和音乐的页面上打开，自动打开一个带有常规站点的新标签...如果有人关闭初始标签，他们不会有音乐，但如果他们他们基本上没有连续的音乐...当他们关闭浏览器时，沉默又回来了:) PRO：应该适用于所有浏览器（或者至少我可以备份输入站点链接，对 SEO 也很有用） 缺点：搜索引擎优化呢？？？它会索引其他页面吗？输入站点链接就足够了吗？我真的很担心。:(

我讨厌自己，我讨厌网站上的音乐该死的..

谢谢你们，我希望你们会为我流泪:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:28:01.667

对我来说，让它与 ajax 一起工作似乎并不需要大量的工作，即使是这样，它也会是一个很好的体验，它会让你更好地使用和理解今天使用的技术，而不是玩弄10 年前的 hacky 代码，并从网络的黑暗面复制和粘贴一些用于 popunder 的晦涩脚本。

到现在为止所做的一切工作都没有白费，其实这就是渐进增强的原则。让它适用于所有人（包括 seo 机器人），然后改进它。

像这样的东西会将您所有的锚标记转换为 ajax 请求，但它们仍会回退到普通页面请求。

```
$('body').on('click', 'a', function() {
var url = $(this).attr('href');
$.ajax({
    url: url
}).done(function(response) {
    $('body').html(response);
});
return false;
}); 
```

您可以将 ?ajax=1 添加到请求 url 以指示后端仅在存在时返回正文。

显然，您的所有脚本/css 都必须在初始页面上提供，因为头部不会改变（除非您想让一切变得更加复杂），并且需要触发事件绑定或将其委托给 body。

你需要一个 div 为你的播放器（可能有一个固定的位置）所以代码实际上更像

```
<head>
    ...
</head>
<body>
   <div id="player></div>
   <div id="wrapper">[page html]</div>
</body> 
```

并且您将针对#wrapper 而不是正文。

# css - 未显示 Yahoo Mail 中的背景颜色 - 显示为白色

> ID：15160601
> 
> 赞同：0
> 
> 时间：2013-03-01T14:53:57.823
> 
> 标签：css, email, yahoo

在 Yahoo 邮件中，嵌套表格的 HTML 不显示选定的 BG 颜色，而是似乎重置并显示为白色。

```
<table style="display: inline-table;" border="0" cellspacing="0" cellpadding="0" width="369">
<tbody>
<tr bgcolor="#203c02">
<td bgcolor="#203c02" style="background-color:#203c02;" height="400">
<p style="font-family: Arial; color: #ffffff; font-size: 16px; margin-top: 10px;"><strong>Hi $$first_name$$.</strong></p> 
```

有任何想法吗？

# xaml - WinRT/XAML 在鼠标悬停时更改椭圆的填充颜色

> ID：15160605
> 
> 赞同：0
> 
> 时间：2013-03-01T14:54:20.127
> 
> 标签：xaml, windows-runtime

我是 WinRT/XAML 开发新手。经过数小时的网络研究和多次反复试验，我仍然无法理解如何使用 VisualStateManager 根据用户对对象的输入来更改椭圆的填充颜色。以下代码不起作用。这是今天的代码：

```
<Ellipse Stroke="White" StrokeThickness="5" Width="90" Height="90">
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="CommonStates">
                <VisualState x:Name="Normal"/>
                <VisualState x:Name="MouseOver">
                    <Storyboard>
                        <ColorAnimation To="Red" Storyboard.TargetName="Ellipse" Storyboard.TargetProperty="Fill.Color"/>
                    </Storyboard>
                </VisualState>
                <VisualStateGroup.Transitions>
                    <VisualTransition To="Normal" GeneratedDuration="00:00:01"/>
                    <VisualTransition To="MouseOver" GeneratedDuration="00:00:01"/>
                </VisualStateGroup.Transitions>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
    </Ellipse> 
```

更新：

感谢 Nicholas W. 在正确方向上的推动。我错过了模板以及正确的目标属性。以下代码按预期工作：

```
<Button>
            <Button.Template>
                <ControlTemplate>
                    <Grid>
                        <Ellipse x:Name="myEllipse" Stroke="White" StrokeThickness="5" Width="70" Height="70" Fill="Transparent"/>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ColorAnimation Storyboard.TargetName="myEllipse" To="#FF0061D4"  Storyboard.TargetProperty="(Rectangle.Fill).(SolidColorBrush.Color)" Duration="0:0:0"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                    </Grid>
                </ControlTemplate>
            </Button.Template>
        </Button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:20:39.400

这里有一些问题，首先没有任何东西导致可视状态管理器在状态之间转换，其次对“椭圆”目标的引用没有解决，第三没有定义在其上执行颜色动画的画笔。如果您要重新模板已经使用视觉状态的控件，第一部分将为您完成，否则您需要设置显式状态转换（[示例](http://msdn.microsoft.com/en-us/library/system.windows.visualstatemanager.aspx)）。要使引用生效，您可以为元素命名，并且不要将 VisualStateGroups 附加属性嵌套在元素本身中（或[根据 MSDN 示例](http://msdn.microsoft.com/en-us/library/system.windows.visualstatemanager.aspx)通过画笔的名称进行动画处理）。最后一部分只涉及最初设置一个画笔，您可以在上面设置动画`Color`财产。连同重新模板化 a 的示例`Button`：

```
 <Button>
        <Button.Template>
            <ControlTemplate>
                <Grid>
                    <Ellipse x:Name="Ellipse" Stroke="White" StrokeThickness="5" Width="90" Height="90"
                             Fill="Black"/>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="MouseOver">
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="Ellipse" To="Red"  Storyboard.TargetProperty="Fill.Color"/>
                                </Storyboard>
                            </VisualState>
                            <VisualStateGroup.Transitions>
                                <VisualTransition To="Normal" GeneratedDuration="00:00:01"/>
                                <VisualTransition To="MouseOver" GeneratedDuration="00:00:01"/>
                            </VisualStateGroup.Transitions>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                </Grid>
            </ControlTemplate>
        </Button.Template>
    </Button> 
```

# javascript - 使用 Leaflet 在底图上创建一个固定的矩形图层

> ID：15160606
> 
> 赞同：5
> 
> 时间：2013-03-01T14:54:24.367
> 
> 标签：javascript, html, css, maps, leaflet

我设法在基本地图上添加了一个图层，它看起来像这样：我通过使用 jQuery -`width`和. 我不确定这是正确的方法，请告知是否有更好的方法。`height``overflow:hidden`

我需要做的是，当我通过鼠标拖动来平移地图时，我希望顶部矩形图层保持在同一位置，但要分别更改内容，以便该矩形看起来像底图顶部的蒙版。如我所见，Leaflet 中的平移正在由

`-webkit-transform: translate3d(185px, 178px, 0)`（我在 Chrome 中）所以设置`top: 0`并`left: 0`没有帮助，矩形在平移时随着地图移动，就像它粘在地图上一样。

我相信有人处理过同样的任务，所以请告诉我。

更新：我添加了一个更好地说明我的问题的[小提琴：](http://jsfiddle.net/dgWZk/5/)

![矩形顶层](../Images/923d84167c6c190d0de7ed9ebcf5007e.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-10T00:24:58.313

## 建议 #1

您可以创建一个`clip`蒙版并将其更改`rect`为与平移相反的方向。

类似[http://jsfiddle.net/gaby/dgWZk/23/](http://jsfiddle.net/gaby/dgWZk/23/)

```
var overlay = {
    top: 50,
    left: 50,
    width: 200,
    height: 200
}

map.on('move', repositionMask) ;

map.fire('move');

function repositionMask() {
    var po = map.getPixelOrigin(),
        pb = map.getPixelBounds(),
        offset = map.getPixelOrigin().subtract(map.getPixelBounds().min);

    $(layer02._container).css({
        clip: 'rect(' + (overlay.top - offset.y) + 'px,' + (overlay.left + overlay.width - offset.x) + 'px,' + (overlay.top + overlay.height - offset.y) + 'px,' + (overlay.left - offset.x) + 'px)'
    });
} 
```

* * *

一个问题是传单方法在惯性平移时不会暴露动画变量，所以我们还不能模仿..所以我禁用`inertia`了地图..

放大/缩小时的另一个问题是，在动画期间，蒙版也会放大/缩小（*但在动画完成后会得到修复，或者您也可以`zoomAnimation:false`设置*）

* * *

## 建议#2

另一种解决方案是创建第二张地图并覆盖/同步它

类似[http://jsfiddle.net/gaby/dgWZk/24/](http://jsfiddle.net/gaby/dgWZk/24/)

```
<div id="container">
    <div id="map"></div>
    <div id="overlay"></div>
</div> 
```

和

```
#container {
    position:relative;
    height:500px;
}
#map {
    height: 500px;
    position:absolute;
    top:0;
    left:0;
    right:0;
    bottom:0;
}
#overlay {
    width: 200px;
    height: 200px;
    position:absolute;
    top:50%;
    left:50%;
    margin-left:-200px;
    margin-top:-200px;
    outline:1px solid green;
    pointer-events:none;
} 
```

和

```
var map = new L.map('map',{
    inertia:false
}).setView([51.505, -0.09], 13);
var overlay = new L.map('overlay', {
    zoomControl: false,
    inertia: false,
    keyboard: false,
    dragging: false,
    scrollWheelZoom: false,
    attributionControl:false,
    zoomAnimation:false
}).setView([51.505, -0.09], 13);
var layer01 = L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

var layer02 = L.tileLayer('http://{s}.tile.stamen.com/watercolor/{z}/{x}/{y}.jpg').addTo(overlay);

map.on('move', function () {
    var offset = overlay._getNewTopLeftPoint(map.getCenter()).subtract(overlay._getTopLeftPoint()).subtract([100,100]);
    overlay.fire('movestart');
    overlay._rawPanBy(offset);
    overlay.fire('move');
    overlay.fire('moveend');
}).on('zoomend', function () {
    overlay.setView(map.getCenter(), map.getZoom(), true);
    map.fire('move');
});

$(window).resize(function () {
    overlay.setView(map.getCenter(), map.getZoom());
    map.fire('move');
});
map.fire('move'); 
```

# facebook - FBX RTB 的端点配置

> ID：15160612
> 
> 赞同：2
> 
> 时间：2013-03-01T14:54:40.177
> 
> 标签：facebook, facebook-graph-api, ads, facebook-ads-api

我在 Facebook 的文档中找到了以下内容，但没有具体说明设置它们的位置。

[http://developers.facebook.com/docs/reference/ads-api/rtb/](http://developers.facebook.com/docs/reference/ads-api/rtb/)

> 端点配置
> 
> FBX 合作伙伴必须向 Facebook 提供其投标、通知和错误服务器的 URL 端点（这些服务器可以相同或不同）。

有人可以让我知道我可以在哪里配置这些端点。

谢谢，钱达娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:38:49.430

您作为 DSP（买方）与 Facebook 集成。Facebook 将向您发送投标请求，通知您中标并报告错误（如果有）。为此，您必须向 Facebook 提供这三个 URL，否则 FBX 将无法与您合作。所以这不是 Facebook 的问题，这是你的问题。

# c++ - 如何在 VS2012 中将自定义类型转换为字符串？

> ID：15160615
> 
> 赞同：1
> 
> 时间：2013-03-01T14:54:51.737
> 
> 标签：c++, string, visual-c++, casting, visual-studio-2012

我想将自定义类转换为在 VS2005 中编译得很好的字符串。但是在 VS2012 中我得到了编译器错误`error C2440: 'type cast' : cannot convert from 'A' to 'std::string'`。我必须改变什么？这是我的例子：

```
 #include <string>

    using namespace std;

    class A
    {
    public:
      A& operator=(const char* c);
      operator string ();
      operator const char* ();

    private:
      string value;
    };

    A::operator string () { return string((const char*)(*this)); }
    A& A::operator = (const char* aValue)   { value = aValue; return *this; }
    A::operator const char *() { const char* wort = "Hello"; return wort; }

    int main() 
    {
      A a;
      string s = (string)a; // C2440
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:03:54.390

`A`问题是从to有两种可能的显式转换`string`- 通过转换运算符 to `string`; 或通过转换运算符 to `const char *`，然后通过转换构造函数 to `string`。

简单地使转换隐式将解决歧义；第二个转换需要两个用户定义的转换，因此不能选择隐式转换：

```
string s = a; 
```

但是，该类仍然有点不稳定，因为有时您可能需要显式转换。我会考虑删除至少一个隐式转换运算符——也许用显式运算符替换它们（如果你的编译器支持这样的东西），或者用命名函数替换它们（就像`string`它本身一样`c_str()`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:03:14.190

转换是模棱两可的。

远离 C 风格的强制转换，而更喜欢使转换显式。

```
#include <string>

using namespace std;

class A
{
public:
  A& operator=(const char* c);
  explicit operator string ();
  explicit operator const char* ();

private:
  string value;
};

A::operator string () { return string(static_cast<const char*>(*this)); }
A& A::operator = (const char* aValue)   { value = aValue; return *this; }
A::operator const char *() { const char* wort = "Hello"; return wort; }

int main() 
{
  A a;
  string s = static_cast<std::string>(a);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:12:57.463

您的两个转换操作员互相踩踏。它们中的每一个都适用于隐式转换。但是显式强制转换就像直接调用构造函数。在您的代码中

```
string s = (string)a; 
```

相当于

```
string s = static_cast<string>(a); 
```

转换为类似的东西

```
string tmp(a);
string s(std::move(tmp)); // this move can be elided
// lifetime of tmp ends here 
```

关键是直接初始化`string tmp(a)`。有两个可行的字符串构造函数：`string(const string&)`并且`explicit string(const char *)`您的两个转换允许调用任何一个。由于这两种转换顺序都不是更好，因此调用是模棱两可的。

顺便说一句，使用复制初始化而没有显式转换的版本并不模棱两可：

```
string s = a; 
```

应该管用。取决于很脆，所以不推荐。

您应该制作转换运算符`explicit`（如果您使用的是 C++11）或删除其中一个。

# angularjs - 我的范围函数不在 angularjs 中运行

> ID：15160633
> 
> 赞同：1
> 
> 时间：2013-03-01T14:56:02.213
> 
> 标签：angularjs

我正在尝试制作可排序的表。我写了以下视图和控制器：

**看法：**

```
<div class="container" ng-app>
<div ng-controller="SortableTblCtrl">
    <table class="table table-hover table-bordered span12">
        <tr>
            <th ng-repeat="metadata in metadatas" ng-click="sort('{{metadata.columnProperty}}')" style="cursor: pointer">{{metadata.columnName}} </th>
        </tr>
        <tr ng-repeat="person in persons | orderBy:predicate:reverse">
            <td>{{person.firstName}}</td>
            <td>{{person.lastName}}</td>
        </tr>
    </table>
</div> 
```

**控制器：**

```
function SortableTblCtrl($scope) {
$scope.persons = [
    { "firstName": "firstname1", "lastName": "lastname1" },
    { "firstName": "firstname2", "lastName": "lastname2" },
    { "firstName": "firstname3", "lastName": "lastname3" }
];
$scope.predicate = "";
$scope.reverse = false;

$scope.sort = function (pred) {
    $scope.predicate = pred;
    $scope.reverse = !$scope.reverse;
};

$scope.metadatas = [
    { "columnProperty": "firstName", "columnName": "First Name" },
    { "columnProperty": "lastName", "columnName": "Last Name" }
]; 
```

}

当我单击列标题时，没有任何反应。我发现了一些东西，那就是当我单击每个列标题时，我将其更改`ng-click="sort('{{metadata.columnProperty}}')"`为对第一列进行排序。`ng-click="sort('firstName')"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:59:29.200

这：`ng-click="sort('{{metadata.columnProperty}}')"`应该是`ng-click="sort(metadata.columnProperty)"`。

# php - 从多维数组的列创建简单数组

> ID：15160635
> 
> 赞同：0
> 
> 时间：2013-03-01T14:56:17.363
> 
> 标签：php, arrays

如果我有一个包含来自某些 mysql 表的数据的多维数组，例如：

```
Array ( [0] => Array ( [0] => 5255071 [id] => 5255071 [1] => 2013-02-28 20:40:48 [sent] => 2013-02-28 20:40:48 ) [1] => Array ( [0] => 5253758 [id] => 5253758 [1] => 2010-11-16 12:56:39 [sent] => 2010-11-16 12:56:39 ) [2] => Array ( [0] => 5253517 [id] => 5253517 [1] => 2010-11-16 12:43:57 [sent] => 2010-11-16 12:43:57 ) [3] => Array ( [0] => 5252348 [id] => 5252348 [1] => 2010-11-16 11:19:35 [sent] => 2010-11-16 11:19:35 ) [4] => Array ( [0] => 5252343 [id] => 5252343 [1] => 2010-11-16 11:19:01 [sent] => 2010-11-16 11:19:01 ) [5] => Array ( [0] => 5252254 [id] => 5252254 [1] => 2010-11-16 11:11:26 [sent] => 2010-11-16 11:11:26 ) [6] => Array ( [0] => 5251390 [id] => 5251390 [1] => 2010-11-16 09:16:57 [sent] => 2010-11-16 09:16:57 ) [7] => Array ( [0] => 5249381 [id] => 5249381 [1] => 2010-11-16 03:01:32 [sent] => 2010-11-16 03:01:32 ) [8] => Array ( [0] => 5249086 [id] => 5249086 [1] => 2010-11-16 02:47:30 [sent] => 2010-11-16 02:47:30 ) [9] => Array ( [0] => 5247987 [id] => 5247987 [1] => 2010-11-16 01:59:34 [sent] => 2010-11-16 01:59:34 ) [10] => Array ( [0] => 5247325 [id] => 5247325 [1] => 2010-11-16 01:33:12 [sent] => 2010-11-16 01:33:12 ) ) 
```

有没有办法创建一个只包含“id”值的新单个数组？这是：

```
array(5255071, 5253758, 5253517, 5252348, ...) 
```

这个想法是避免使用 foreach 循环。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:01:16.817

你可以用[`array_map()`](http://www.php.net/manual/en/function.array-map.php)这个：

```
function extractId ($array) { return $array['id']; }
$targetArray = array_map($sourceArray, "extractId"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:00:21.163

```
$output = array_values($array['id']); 
```

请参阅：[array_values](http://php.net/manual/en/function.array-values.php)

# java - 自定义组合框模型。如何正确触发事件？

> ID：15160637
> 
> 赞同：2
> 
> 时间：2013-03-01T14:56:23.260
> 
> 标签：java, swing, events, combobox, listener

我已经实现了自己的 ComboBoxModel：

```
public class MyComboBoxModel extends AbstractListModel<MyType> 
                             implements ComboBoxModel<MyType> {} 
```

现在我显然需要覆盖`public void setSelectedItem(Object item)`，但文档说明如下：

> 此方法的实现应通知所有已注册`ListDataListeners`的内容已更改。

为此，我想我需要使用方法`AbstractListModel.fireContentsChanged(Object, int, int)`。问题`JComboBox`是，可以设置选定的项目而不必在列表中，所以当`setSelectedItem(Object)`被调用时，我不一定能确定相关项目的索引，因为它不需要在底层模型中。

我找到了在这种情况下使用的另一个问题（[https://stackoverflow.com/a/7077192](https://stackoverflow.com/a/7077192)）的答案`fireContentsChanged(item, -1, -1)`，但该人没有提供该部分代码的任何详细信息。现在我想知道，这是否是处理更改的选定项目的正确方法？

我应该总是使用 -1 作为两个索引吗？如果它实际上在模型中，我是否应该尝试获取项目的真实索引？还是我应该做一些完全不同的事情？

# c++ - 将图拆分为循环，然后拆分为路径

> ID：15160640
> 
> 赞同：2
> 
> 时间：2013-03-01T14:56:40.410
> 
> 标签：c++, math, graph-theory, discrete-mathematics, notation

首先，我应该说我对图论不熟悉，而且我的数学知识也很差。无论如何，我正在使用图形概念进行分析。

基本上，我将无向图（比如 G）分解为循环（闭合图）。我的循环的特点是它们是一个可以在两个顶点之间遍历的最短循环（因为它们是循环，但开始和结束是相同的）。根据我的示例图，我的周期是 (1,4,5,1)(1,2,3,4,1)(7,9,8,7) （我忽略长度小于 3 的周期） .

编辑：我使用深度优先搜索来获取周期，然后得到最小的周期。

后来，我进一步将这些循环制动为定向路径。在这里，我打破了边缘的循环（通过图中的红线），以便为我的新路径图插入起始节点和结束节点。所以对于循环 (7,9,8,7)=> 新的有向路径是 (a,9,c)(d,8,7,b) 编辑：仅对选定的循环进行进一步的破坏。它只是插入一个新向量并更新元素。这里不涉及任何图论相关的算法。

然后我对我的数据进行一些分析。

> 我做了以上所有事情。所以，我的问题是如何用数学符号来描述整个事物（没有我说的例子）。这对我来说很难，因为我连基础都没有。

我正在尝试和谷歌搜索，但仍然找不到描述我所做的事情的方法。我想，我所做的事情对你来说很清楚。

> > > 所以，你能帮我吗，如何描述
> > > 
> > > 1.  将无向图分解为循环（最短循环）
> > > 2.  通过边进行循环并制作有向路径图（如图所示）
> 
> 用数学符号（根据图论）

我见过很多作者使用不同的符号和符号来定义图形及其子图，但对我来说，我无法定义我的基础太差之类的东西。所以，请帮助我以一种正式的、数学的方式来表达这些事情。提前致谢。

我也插入了示例数据以获取想法。 ![在此处输入图像描述](../Images/c2a92e9a491f5d59644796847d405145.png)

注意：我添加了 c++ 标签，因为许多计算机科学家使用图论并希望得到回应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:17:10.943

在尝试将操作置于数学描述中时，您可能遇到的第一个问题是您对“最短循环”的定义，因为循环通常被定义为由边连接的一系列顶点，其中第一个也是最后一个。

## 数学速成班

在数学中，**图**通常由两个集合 V（类似于顶点）和 E（类似于边）描述。集合 E 由具有两个元素的集合组成，每个元素都是一个顶点。如

*   *V* = *{ v1, v2, ...., vn }*

*   *E* = *{ ..., {vi, vk}, ... }*

E 中的每个集合都对应于图中的一条边。

因此，（连接的）**路径**通常定义为：

顶点序列*v1* , ...., *vn具有如下性质：对于序列**vi*和*vi+1* 中的每两个连续顶点，集合*{ vi, vi+1 }*是集合*E*的一个元素。

（实际上：从顶点*vi*到顶点*vi+i*有一条边）

**循环**通常定义为具有以下属性的路径：*v1* = *vn*（因此第一个顶点也是最后一个）

有了这个定义，您的示例已经是序列：1、4、1 形成一个循环（在数学意义上）

因此，图中的每条边都将算作“最短”循环，而给出的示例肯定更长！

你说过你

> ...忽略长度小于 3 的循环

作为您描述的起点，这看起来还不错。不幸的是，我没有完全理解您要执行的后续步骤。

## 建议

我的建议，或者至少我将解决问题的方法是将相当长的描述转换为某种更短的算法描述，同时精确地改进您尝试执行任务的方式。这样得到你的最终描述应该不会太难完成。特别是不要忘记告诉算法的输入到底是什么。即使从您的描述中似乎也不太清楚。

*   您是否从一组已知的“最短”周期开始？
*   还是您只是将图表作为输入，并且必须自己确定“最短”周期？
*   如果您自己检测到它们，这是如何完成的？特别是不要忘记讲述故事的这一部分，如果它适用，因为它似乎是对您的问题最关键的部分之一。

# android - 启动 PreferenceActivity 时主要活动被破坏

> ID：15160641
> 
> 赞同：0
> 
> 时间：2013-03-01T14:56:46.520
> 
> 标签：android, android-activity, preference

我有一个非常烦人的管理活动问题。

我有 2 项活动：

1-主要活动

2- 主要活动发起的偏好活动。

在 PreferenceActivity 上，当我点击“上一个”按钮时，应用程序完成而不是返回到主要活动！我调试了代码，我注意到主要活动总是在我的偏好活动的 onCreate() 方法被调用之后被破坏！

我如何称呼偏好活动：

```
// Launch Settings activity
Intent intent = new Intent(this, SettingsActivity.class);
startActivity(intent); 
```

还有我喜欢的活动课：

```
public class SettingsActivity extends PreferenceActivity {

    private static ListView listView;

    @SuppressLint("NewApi")
    @Override
    protected void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getFragmentManager().beginTransaction()
                .replace(android.R.id.content, new MyPreferenceFragment())
                .commit();

        // Setting the list's background to be white
        listView = (ListView) findViewById(android.R.id.list);
    }

    @SuppressLint("NewApi")
    public static class MyPreferenceFragment extends PreferenceFragment
            implements OnPreferenceClickListener,
            ColorPickerDialog.OnColorChangedListener {

        /**
         * Background color preference.
         */
        private Preference prefBgColor;

        /**
         * Text color preference.
         */
        private Preference prefTextColor;

        @Override
        public void onCreate(final Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            addPreferencesFromResource(R.xml.settings);

            final Preference prefBgColor = findPreference("bg_color");
            prefBgColor
                    .setOnPreferenceClickListener(new OnPreferenceClickListener() {

                        public boolean onPreferenceClick(Preference arg0) {

                            // Create color picker dialog
                            new ColorPickerDialog(getActivity(),
                                    MyPreferenceFragment.this, prefBgColor
                                            .getKey(), prefBgColor
                                            .getSharedPreferences().getInt(
                                                    prefBgColor.getKey(), 0),
                                    prefBgColor.getSharedPreferences().getInt(
                                            prefBgColor.getKey(), 0)).show();

                            return true;
                        }
                    });

            final Preference prefTextColor = findPreference("text_color");
            prefTextColor
                    .setOnPreferenceClickListener(new OnPreferenceClickListener() {

                        public boolean onPreferenceClick(Preference arg0) {

                            // Create color picker dialog
                            new ColorPickerDialog(getActivity(),
                                    MyPreferenceFragment.this, prefTextColor
                                            .getKey(), prefTextColor
                                            .getSharedPreferences().getInt(
                                                    prefTextColor.getKey(), 0),
                                    prefTextColor.getSharedPreferences()
                                            .getInt(prefTextColor.getKey(), 0))
                                    .show();

                            return true;
                        }
                    });

        }

        @SuppressLint("NewApi")
        @Override
        public boolean onPreferenceClick(Preference pref) {

            return true;
        }

        @SuppressLint("NewApi")
        @Override
        public void colorChanged(String key, int color) {

            // Get choosed color and save it
            this.findPreference(key).getEditor().putInt(key, color).commit();
        }
    }

} 
```

编辑：我的清单文件中有活动声明：

```
 <activity
            android:name="com.meher.tools.menulauncher.MainActivity"
            android:label="@string/app_name"
            android:configChanges="orientation|screenSize"
            android:theme="@style/AppTheme"
            android:launchMode="standard" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    <!-- Settings activity  -->
    <activity 
        android:name="com.meher.tools.menulauncher.SettingsActivity"
        android:configChanges="orientation|screenSize"
        android:theme="@style/AppTheme"
        android:launchMode="standard" >
    </activity> 
```

我将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:12:13.610

我解决了这个问题，发生这种情况是因为我用finish（）覆盖了MainActivity中的onPause（），因此当我打开另一个活动时我的主要活动被破坏了......

# ios - iOS：获取 JSON 单元格值

> ID：15160644
> 
> 赞同：-4
> 
> 时间：2013-03-01T14:56:56.187
> 
> 标签：ios, cocoa-touch

所以我通过 JSON 将信息加载到我的 iOS 应用程序中的表格视图中。当您单击其中一个表格单元格时，我需要从单击的单元格中获取数据库中故事的“id”。

我还没有尝试任何东西，因为我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:01:06.517

如果您不知道从哪里开始，请从头开始。关于在 iOS 中使用 JSON 的教程怎么样？Ray Wenderlich 网站有很棒的教程。[http://www.raywenderlich.com/5492/working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)

> OS 5 有一些新的内置 API，使 JSON 的读写变得非常容易。
> 
> 如果您不知道 JSON 是什么，它是一种简单的人类可读格式，通常用于通过网络连接发送数据。
> 
> 例如，如果您有一个由三个字符串组成的数组，则 JSON 表示将简单地为：
> 
> [“test1”，“test2”，“test3”]
> 
> 如果您有一个 Pet 对象，其中包含成员变量名称、品种和年龄，那么 JSON 表示将简单地为：
> 
> {“名称”：“尘土飞扬”，“品种”：“贵宾犬”，“年龄”：7}
> 
> 就是这么简单，这就是为什么它如此易于使用和流行的原因。如需完整的规范，只需几分钟即可阅读，请查看 www.json.org。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T00:18:49.000

您必须从某个地方向表格提供数据，所以让我们假设这是一个`NSArray`对象`Story`。

当您在 tableView 中选择一行时，`didSelectRowAtIndexPath:`将调用委托方法。所选行的`tableView`耗材`indexPath`。

An`NSIndexPath`有两个属性 -`section`和`row`。所选单元格的`indexPath.row`值将对应于`NSArray`单元格从中获取`Story`对象的元素的索引。因此，如果您想检索被`Story`点击的行，您可以使用`[theArray objectAtIndex:indexPath.row]`

# database-design - 使用教义处理用户设置

> ID：15160650
> 
> 赞同：1
> 
> 时间：2013-03-01T14:57:36.210
> 
> 标签：database-design, symfony, doctrine-orm, schema

我正在使用 Symfony2 构建一个应用程序，并使用 Doctrine 作为我的 ORM。

我的用户将需要存储大量特定于他们的配置/设置（想想“您想接收我们的电子邮件吗？”作为要存储的设置的典型示例）。

我构建这个的最佳方式是什么？

我应该为每个设置向我的用户实体添加属性吗？

```
protected $receiveEmails; 
```

或者我应该创建一个'userSetting'实体，与我的用户对象有manyToMany关系并且让userSetting实体有另外两个属性：

```
protected $setting;
protected $value; 
```

?

我问的主要原因是性能。我希望在用户对象上有一个属性，因此某些设置可以是布尔类型，其他字符串等，但不希望我的网站每次获取当前用户实体时都从数据库中获取这些值（几乎每个页面，因为我的身份验证回退了我的数据库中的用户实体）。

答案是什么？我是否需要返回并重新编写使用的任何实例：

```
....getRepository('AcmeMainBundle:User')->find($id) 
```

使用仅选择我在那种情况下需要的元素的自定义存储库功能？

还是我过度优化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:04:13.473

有两种方法。

`ManyToMany`1）如您所说，创建一个具有关系的单独实体。

2）使用关系创建一个单独的实体，`OneToOne`其中实体的每个属性都是一个设置名称。

由于性能，我会选择第二个选项。一行多列优于多行一列。而且它更容易处理和实施。

# asp.net-mvc - MVC Razor：空时呈现替代内容的辅助方法

> ID：15160654
> 
> 赞同：2
> 
> 时间：2013-03-01T14:57:59.323
> 
> 标签：asp.net-mvc, razor

我有一些数据，有时这些数据是空白的。与其在我的视图上制作一堆疯狂的逻辑，我宁愿使用一个辅助方法来呈现数据（如果存在），并在字符串为空/空时呈现一些只显示“N/A”的 HTML。

理想语法：`@Helpers.RenderThisOrThat(Model.CustomerPhone)`

如果`Model.CustomerPhone`(a string) 为空，它将呈现此替代 HTML：`<span class='muted'>N/A</span>`

以下是我们目前所拥有的：

```
@helper RenderThisOrThat(string stringToRender, string methodToGetAlternateText = null)
{
    @RenderThisOrThat(MvcHtmlString.Create(stringToRender), methodToGetAlternateText)
}

@helper RenderThisOrThat(MvcHtmlString stringToRender, string methodToGetAlternateText = null)
{
    if (string.IsNullOrWhiteSpace(stringToRender.ToHtmlString()))
    {
        if (!string.IsNullOrWhiteSpace(methodToGetAlternateText)) {
            @methodToGetAlternateText
        }

        <span class='muted'>N/A</span>
    }

    @stringToRender
} 
```

这工作得很好，直到我们想要将字符串以外的东西传递给任一参数。例如，当我们有一个电子邮件地址时，我们希望它是该电子邮件的链接，而不仅仅是电子邮件的字符串。

`@Helpers.RenderThisOrThat(@<a href="mailto:@Html.DisplayFor(m => m.CustomerEmail)">@Html.DisplayFor(m => m.CustomerEmail)</a>)`

它给了我们错误：“无法将 lambda 表达式转换为类型‘字符串’，因为它不是委托类型”

我们不知道如何进行这项工作......这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:02:03.223

您正在寻找一个可以接受字符串的助手，并且：

1.  如果字符串不为空，则渲染该字符串。
2.  如果字符串不为空，则呈现给定的模板。
3.  如果字符串为空，则呈现“N/A”html。
4.  如果字符串为空，则呈现给定的模板。

将 razor 块作为参数传递给函数时，razor 将该块打包为 Func。更改辅助函数中的参数以采用该类型的委托，并且不要忘记调用这些委托（我选择传递 null）。

这些助手应该处理这些场景。

**解决方案**

```
@helper RenderThisOrThat(string stringToRender, Func<object, IHtmlString> leftTemplate = null, Func<object, IHtmlString> rightTemplate = null)
{
    var shouldRenderLeft = !string.IsNullOrWhiteSpace(stringToRender);
    leftTemplate = leftTemplate ?? (o => MvcHtmlString.Create(stringToRender));
    @RenderThisOrThat(shouldRenderLeft, leftTemplate, rightTemplate)
}

@helper RenderThisOrThat(bool shouldRenderLeft, Func<object, IHtmlString> leftTemplate, Func<object, IHtmlString> rightTemplate = null)
{
    var shouldRenderRight = !shouldRenderLeft;
    if (shouldRenderRight)
    {
        if (rightTemplate != null)
        {
            @rightTemplate(null)
        }
        else
        {
            <span class='muted'>N/A</span>
        }
    }
    else
    {
        @leftTemplate(null)
    }
} 
```

**例子**

```
1\. @Helpers.RenderThisOrThat(Model.StringWithBob)
2\. @Helpers.RenderThisOrThat(Model.StringWithNull)
3\. @Helpers.RenderThisOrThat(Model.StringWithBob, @<span>I'm @Model.StringWithBob</span>)
4\. @Helpers.RenderThisOrThat(Model.StringWithNull, @<span>I'm @Model.StringWithBob</span>)
5\. @Helpers.RenderThisOrThat(Model.StringWithBob, @<span>I'm @Model.StringWithBob</span>, @<span>What about Bob?</span>)
6\. @Helpers.RenderThisOrThat(Model.StringWithNull, @<span>I'm @Model.StringWithBob</span>, @<span>What about Bob?</span>) 
```

将输出：

1.  `Bob`
2.  `<span class='muted'>N/A</span>`
3.  `<span>I'm Bob</span>`
4.  `<span class='muted'>N/A</span>`
5.  `<span>I'm Bob</span>`
6.  `<span>What about Bob?</span>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T20:57:28.320

这是一个简单问题的非常复杂的解决方案。您不需要创建复杂的视图，实际上，您应该使用 Editor/DisplayTemplate，然后将您的逻辑放入模板中并完成一次，无需额外包含辅助函数或其他任何东西。

您还可以在这里更进一步，因为在这种情况下，您正在呈现一个电子邮件地址。您将 DataType 属性应用于模型，然后指定电话号码呈现类型。

```
public class MyModel {
    [DataType(DataType.PhoneNumber)]
    public string PhoneNumber {get;set;}
} 
```

然后在 ~/Views/Shared 中创建一个名为 DisplayTemplates 的文件夹，并在该文件夹中创建一个名为 PhoneNumber.cshtml 的文件，在其中执行以下操作：

```
@model string

@if (string.IsEmptyOrWhiteSpace(Model)) {
    @:<span class='muted'>N/A</span>
} else {
   @: <span>@Model</span>
} 
```

那么，在你看来：

```
@Html.DisplayFor(x => x.PhoneNumber) 
```

就是这样，您认为没有复杂的逻辑，到处都没有复杂的辅助函数。这是简单、容易且可维护的。您可以对电子邮件地址执行相同的操作，因为也存在 EmailAddress 数据类型。

MVC 内置了许多非常好的功能，大多数人根本不使用，因为他们没有花任何时间真正学习它。

# java - openConnection 使用 UTF-8 获取 xml

> ID：15160656
> 
> 赞同：0
> 
> 时间：2013-03-01T14:58:02.583
> 
> 标签：java, utf-8, urlconnection

我想使用 openConnection 下载并保存 xml 文件。

问题是，当我保存文件时，字符集错误。

我的代码是：

```
URL url = new URL(partnersEntity.getUrl());

            URLConnection urlConnection = url.openConnection();
            urlConnection.setRequestProperty("Content-Length", "500000");
            urlConnection.setRequestProperty("Accept-Charset", "UTF-8");
            urlConnection.setRequestProperty("Content-Type", "text/xml; charset=utf-8");

            Calendar calendar = Calendar.getInstance();
            Date now = calendar.getTime();
            Timestamp currentTimestamp = new Timestamp(now.getTime());

            File file = new File(myFile);

            FileWriter writer = new FileWriter(file);

            IOUtils.copy(urlConnection.getInputStream(), writer);
            writer.close(); 
```

之后在我的文件中我看到像“??”这样的标记 在特殊包机的地方。

我应该改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:11:26.133

在这种情况下不要使用 Reader/Writer，让 xml 保持原样。

```
 FileOutputStream out = new FileOutputStream(file);

        IOUtils.copy(urlConnection.getInputStream(), out); 
```

通过使用 FileWriter，您正在使用平台默认字符集编写 xml 数据，这绝不是您想要做的。始终将 xml 视为*二进制数据*，而不是*文本数据*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:10:11.193

(1) 检查您正在阅读的资源是否真的是 UTF-8。您要求使用“接受字符集”，但这并不能保证。然而。假设它是 UTF-8。

(2) 指定您正在使用的编写器的字符集。通过使用 FileWriter，您可以获得正在运行的环境的“默认”字符集......可能不是 UTF-8。最好使用 OutputStreamWriter 来具体说明。

```
OutputStream os = new OutputStream(file);
OutputStreamWriter writer = new OutputStreamWriter(os, "UTF-8"); 
```

(3) 告诉副本如何解释传入的流：

```
IOUtils.copy(urlConnection.getInputStream(), writer, "UTF-8"); 
```

# string - Reporting Services 表达式中的拆分字符串

> ID：15160663
> 
> 赞同：-2
> 
> 时间：2013-03-01T14:58:18.020
> 
> 标签：string, reporting-services, split, ssrs-2008

我有一个包含顾问全名的自由文本字段。

例如史密斯约翰

我想在报告服务表达式中显示为 John Smith。

我想交换名字，先带上名字。

任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:12:33.910

![在此处输入图像描述](../Images/5c1a7eff645b5af3ec15499a8d642487.png)

```
=Right(Fields!name.Value, Len(Fields!name.Value) - InStr(Fields!name.Value, " "))
    & " "
    & Left(Fields!name.Value, InStr(Fields!name.Value, " ") - 1) 
```

# xml - 如何修复 SXXP0003：XML 解析器报告的错误：与元素类型“CNDB”关联的属性“dt:dt”的前缀“dt”未绑定

> ID：15160666
> 
> 赞同：0
> 
> 时间：2013-03-01T14:58:25.377
> 
> 标签：xml, xslt, saxon

我发现了一些会生成错误消息的文件，现在我想修复这些错误。如何解决以下错误？

如果我做

```
mediainfo --Output=XML 7483.MOV >data.xml 
```

然后我编辑文件并删除了很多不需要产生错误的行，然后

```
java -jar /opt/local/share/java/saxon9he.jar data.xml test.xsl 
```

我得到错误：

```
Error on line 2 column 29 of data.xml:
SXXP0003: Error reported by XML parser: The prefix "dt" for attribute "dt:dt" associated
with an element type "CNDB" is not bound.
Transformation failed: Run-time errors were reported 
```

test.xsl 包含：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:fmp="http://www.filemaker.com/fmpxmlresult" exclude-result-prefixes="fmp date redirect"
    xmlns:saxon="http://icl.com/saxon"
    xmlns:date="http://www.jclark.com/xt/java/java.util.Date"
    xmlns:redirect="http://xml.apache.org/xalan/redirect"
    xmlns:lxslt="http://xml.apache.org/xslt"
    xmlns:dt="urn:schemas-microsoft-com:datatypes" dt:dt="binary.base64"
    xmlns:xalan="org.apache.xalan.xslt.extension.redirect"
    extension-element-prefixes="saxon xalan redirect dt">
</xsl:stylesheet> 
```

data.xml 包含：

```
<?xml version="1.0" encoding="UTF-8"?>
<CNDB dt:dt="binary.base64">Q00WIUNNFiFDTRYhQ00WIUNNFiFDTRYhQ00WIUNNFiFDTRYhQ00WIUNNFiFDTRYhQ00WIUNNFiFDTRYhQ00WIUNNFiFDTRYhQ00WIUNNFiFDTRYhQ00WIUNNFiFDTRYhQ00W
IUNNFiFDTRYhQ00WIUNNFiFDTRYhQ00WIUNNFiFDTRYhQ00WIUNNFiFDTRYhQ00WIUNNFiFDTRYhQ00WIUNNFiFDTRYhQ00WIUNNFiFDTRYhQ00WIUNNFiFDTRYhQ00WIUNNFiFDTRYhQ00WIUNNFiFDTRYhQ00W
IT1NFiE9TRYhPU0WIT1NFiE9TRYhPU0WIT1NFiE9TRYhPU0WIT1NFiE9TRYhPU0WIT1NFiE9TRYhPU0WIT1NFiE9TRYhPU0WIT1NFiE9TRYhPU0WIT1NFiE9</CNDB> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:31:58.067

错误信息非常清楚

> 与元素类型“CNDB”关联的属性“dt:dt”的前缀“dt”未绑定。

您的输入 XML 不是命名空间格式正确的，因为该`CNDB`元素有一个名为的属性`dt:dt`，但在`xmlns:dt="..."`其`CNDB`祖先之一或其中一个上没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T12:11:58.767

正如@Ian 在他的回答中所写，这个问题是由`mediainfo`产生 invalid引起的`XML`。该问题已被报告，但由于缺乏具有足够 XML 技能的开发人员来解决该问题，该问题似乎不会很快得到解决。

我现在的“解决方案”是使用`sed`以下方法修复输出：

```
mediainfo --Output=XML 7483.MOV | sed -e 's#<CNDB dt:dt=#<CNDB dt=#g' >data.xml 
```

# postgresql - 在函数中使用 ENUM 类型

> ID：15160674
> 
> 赞同：1
> 
> 时间：2013-03-01T14:58:55.393
> 
> 标签：postgresql, stored-procedures

我有一个定义如下的函数：

```
CREATE OR REPLACE FUNCTION public.somefcn(
  _somevar enum_my_type
)
RETURNS integer AS
$body$
DECLARE
   ret_id INTEGER
BEGIN
  INSERT INTO mytable(somevar) VALUES (_somevar) RETURNING id INTO ret_id;
  RETURN ret_id;
END;
$body$
LANGUAGE 'plpgsql' 
```

当我这样称呼它时

```
SELECT somefcn('validenumitem'); 
```

我收到此错误：

> 错误：列“somevar”的类型为 enum_my_type 但表达式的类型为文本

我应该如何更新我的函数或调用以使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:17:21.640

找到了。我有另一个不正确的功能

```
CREATE OR REPLACE FUNCTION public.somefcn(
  _somevar text
)
... 
```

显然，PostgreSQL 采用了那个，因为它更适合。

# php - 不显示上传文件大小> 2mb

> ID：15160676
> 
> 赞同：2
> 
> 时间：2013-03-01T14:58:57.827
> 
> 标签：php

我想检查上传输入文件的大小，但如果我的文件大于 2 mb，则变量返回 0 位，你能告诉我为什么吗？

```
$size = $_FILES['foto1']['size'];
echo $size; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:03:36.030

您需要在“php.ini”文件中更改以下内容

```
upload_max_filesize = 2M 
```

# c - 等待 system() 调用完成

> ID：15160679
> 
> 赞同：1
> 
> 时间：2013-03-01T14:59:15.510
> 
> 标签：c, multithreading, system, wait

在下面的代码中，我`system`使用`"gedit filename"`. 它正在`gedit` 正确打开指定的文件。
但是，在下一行中，我试图打印修改后的数据（我将通过 更新`gedit`），但它不会等到`gedit`退出。

```
strcpy(tt1,"gedit ");
strcat(tt1,tt);
system(tt1);                     //here gedit opens file

printf("\nFile data %s  Location %s",getFileData(tt),tt); //this line executes before finishing gedit 
```

请帮我等到`system()`通话完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:11:13.090

我相信这是由`--wait`命令行参数处理的，这似乎是[最近添加](http://git.gnome.org/browse/gedit/commit/gedit/gedit-app.c?id=ee95e4ce2844dd1277afb28780f49da560e2452f)的。您可以尝试自己构建 gedit，至少验证它是否有效（因为您的发行版可能没有足够新的构建）。

# c# - 将图表导出为高质量图像

> ID：15160680
> 
> 赞同：1
> 
> 时间：2013-03-01T14:59:21.167
> 
> 标签：c#, .net, visual-studio, image-processing, charts

我正在将图表 fx 导出到图像中，但是该图像的质量很低。

```
Chart chart1 = new Chart(); 
```

. . .

```
chart1.Export(FileFormat.Bitmap, "C:/WcfSReport/WcfSReport/WcfSReport/image.bmp"); 
```

有谁知道如何将此图表导出为高质量图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:47:39.390

试用并使用`FileFormat.Metafile`

# jquery - select2 ajax 不会显示返回的 json 数据

> ID：15160682
> 
> 赞同：5
> 
> 时间：2013-03-01T14:59:33.287
> 
> 标签：jquery, json, jquery-select2

这是从我的coldfusion页面返回的json字符串的样子`[{"client":"Asante","id":12},{"client":"City of Lancaster","id":14},{"client":"Massey Energy","id":35},{"client":"Northeast Utilities","id":68},{"client":"Washtenaw","id":50}]`：Firebug 声称一切正常，但 select2 插件中没有显示任何数据。

有谁知道问题可能是什么？它应该返回列名还是什么？

select2 调用：

```
$(".select").select2({
    allowClear: true,
    blurOnChange: true,
    openOnEnter: false,
    ajax: {
        url: "/surveymanagement/admin/client.cfc",
        dataType: 'json',
        data: function (term, page) {
            return {
                method: "GetClientsByName",
                name: term
            };
        },
        results: function (data, page) {
            return { results: data };
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T15:34:52.437

您的数据必须采用其他格式，`[{"text":"Asante","id":12}, ...]`否则您需要传递`{results: data, text: 'client'}`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T15:37:43.927

如果您的 json 字符串需要使用除此之外`"text": "something"`的其他内容，则需要添加以下内容：用于`formatResults`获取要显示的数据。这是固定版本：

```
$(".select").select2({
    allowClear: true,
    blurOnChange: true,
    openOnEnter: false,
    ajax: {
        url: "/surveymanagement/admin/client.cfc",
        dataType: 'json',
        data: function (term, page) {
            return {
                method: "GetClientsByName",
                name: term
            };
        },
        results: function (data, page) {
            return { results: data };
        }
    },
    formatResult: function (data) {
        return "<div class='select2-user-result'>" + data.client + "</div>";
    },
    formatSelection: function (data) {
        return data.client;
    }
}); 
```

否则，Arun 是对的，您只需要使用格式`[{"id":1,"text":"client"}]`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-09T08:02:26.150

是的，它太旧了 :) 但我今天需要它并像这样解决它（使用 Symfony2）：

```
$opts = [];

foreach($items as $item)

    $opts['results'][] = ['text' => $item->getXyz(), 'id' => $sk->getId()];

return new JsonResponse($opts); 
```

* * *

关键的“结果”很重要

# perl - How to create special ROOT_OPS in Template-Toolkit?

> ID：15160691
> 
> 赞同：1
> 
> 时间：2013-03-01T14:59:56.907
> 
> 标签：perl, internationalization, locale, template-toolkit, dancer

I use [Locale::TextDomain](http://search.cpan.org/~guido/libintl-perl-1.23/lib/Locale/TextDomain.pm) in a [Dancer](http://search.cpan.org/~yanick/Dancer-1.3111/lib/Dancer.pm) environment with [Template-Toolkit](http://www.template-toolkit.org/index.html).

And yes, I know [Dancer-Plugin-I18N](http://search.cpan.org/~koceasy/Dancer-Plugin-I18N-0.41/lib/Dancer/Plugin/I18N.pm) and tried it, but I don't wan't to use it!

I read [Defining_Custom_Virtual_Methods](http://template-toolkit.org/docs/manual/VMethods.html#section_Defining_Custom_Virtual_Methods) and adjusted it do my needs.

```
# load Template::Stash to make method tables visible
use Template::Stash;

$Template::Stash::ROOT_OPS->{ 'localize' }    = sub {
    return __(shift); 
}; 
```

and in a view

```
[% localize("Hello")  %] 
```

That works very well.

But I would like to wrapp all the [Locale::TextDomain functions](http://search.cpan.org/~guido/libintl-perl-1.23/lib/Locale/TextDomain.pm#EXPORTED_FUNCTIONS) like:

```
$Template::Stash::ROOT_OPS->{__}    = sub { return __x(shift) };
$Template::Stash::ROOT_OPS->{__x}   = sub { return __x(shift, @_) };
$Template::Stash::ROOT_OPS->{__n}   = sub { return __n(shift, shift, shift) };
$Template::Stash::ROOT_OPS->{__nx}  = sub { return __nx(shift, shift, shift, @_) };
$Template::Stash::ROOT_OPS->{__xn}  = sub { return __xn(shift, shift, shift, @_) };
$Template::Stash::ROOT_OPS->{__p}   = sub { return __p(shift, shift) };
$Template::Stash::ROOT_OPS->{__px}  = sub { return __px(shift, shift, @_) };
$Template::Stash::ROOT_OPS->{__np}  = sub { return __np(shift, shift, shift, shift) };
$Template::Stash::ROOT_OPS->{__npx} = sub { return __npx(shift, shift, shift, shift, @_) }; 
```

but unfortunately it is not possible the use '__' or '__x' as token.

So my question: How do I create '__' (and friends) root operations in Template-Toolkit?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-21T03:03:53.177

Template Toolkit doesnt export functions that start with _ because they are considered private. You can get around this by setting the following before your Stash operations:

```
$Template::Stash::PRIVATE = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:09:16.223

The lexer does not recognize them as identifiers. Changing the module to accept leading `_` appears to be far from trivial.

# javascript - 如何为这个文本文件编写一个简单的 pegjs 语法？

> ID：15160692
> 
> 赞同：-1
> 
> 时间：2013-03-01T15:00:07.597
> 
> 标签：javascript, parsing, peg, pegjs

我只想将此文本文件分割成行并对行进行分类。如果该行以“Qty”开头，则下一行是订单项目，直到该行以“GST”开头。

如果该行以“总金额”开头，那么这是总金额行。

```
给我做生意。'l
地址“rwqagePnnter Pro DemcRafilp
地址“mfgr Eva|uat|on Only
联络线 1
交易编号 10006
发行日期 27/02/201
时间 10:36:55
销售员 orsa orsa
数量 描述 单价 合计
1 次测试 $120.00 $120.00
消费税 $10.91
总金额 $120.00
现金 $120.00
请联系我们以获取更多关于
这张收据。
感谢您的业务。
d
.
测试

```

请告诉我如何使用 PegJS [http://pegjs.majda.cz/](http://pegjs.majda.cz/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T20:05:53.250

这是一个快速而肮脏的示例解决方案

```
{
  var in_quantity = false // Track whether or not we are in a quantity block
  var quantity    = []
  var gst         = null
  var total       = null
}

start =
  // look for a quantity, then GST, then a total and finally anything else
  (quantity / gst / total / line)+
  {
    return {quantity: quantity, gst: gst, total: total}
  }

chr = [^\n]
eol = "\n"?

quantity   = "Qty" chr+ eol        { in_quantity = true; }
gst        = "GST" g:chr+ eol      { in_quantity = false; gst = g.join('').trim(); }
total      = "Total Amount" t:line { in_quantity = false; total = t.trim(); }

line =
  a:chr+ eol
  {
    if( in_quantity ){
      // break quantities into columns based on tabs
      quantity.push( a.join('').split(/[\t]/) );
    }
    return a.join('');
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T21:35:46.473

下面的代码作为另一种解决方案怎么样。

```
{
  var result = [];
}

start
  = (!QTY AnyLine /
      set:(Quantities TotalAmount)
        {result.push({orders:set[0], total:set[1]})}
    )+ (Chr+)?
  {return result;}

QTY = "Qty"
GST = "GST"

Quantities
  = QtyLine order:(OrderLine*) GSTLine {return order;}

QtyLine
  = QTY Chr* _

OrderLine
  = !GST ch:(Chr+) _ {return ch.join('');}

GSTLine
  = GST Chr* _

TotalAmount
  = "Total Amount" total:(Chr*) _ {return total.join('');}

AnyLine
  = ch:(Chr*) _ {return ch.join('');}

Chr
  = [^\n]
_
  = "\n" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:08:40.313

您可以使用 XML，或者您可以执行以“/”结尾的每一行，然后使用 split 函数将其拆分。

```
mytext = mytext.split("/"); 
```

然后使用它。我不知道你为什么不只使用 sql 或类似的东西。

# php - 当我从谷歌驱动器将 pptx 文件导出为 png 文件时，如何访问所有幻灯片，而不仅仅是第一张幻灯片

> ID：15160695
> 
> 赞同：1
> 
> 时间：2013-03-01T15:00:20.490
> 
> 标签：php, powerpoint, google-drive-api

问题是当我使用API​​访问Google驱动器中的pptx文件时，我只能导出该文件的第一张幻灯片，但是当我使用查看器将幻灯片下载为png时，我可以下载每张幻灯片。所以有一种方法可以访问谷歌驱动器上 pptx 文件中的每张幻灯片，我们可以知道方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:17:19.000

Google 列出了[Google Docs 支持的导出格式](http://edutraining.googleapps.com/Training-Home/module-4-docs/chapter-1/3-2)。.PNG 未列为受支持的演示文稿导出格式，因此我对它无法正常工作并不感到惊讶。我确实说过您可以导出到 Microsoft PowerPoint (.ppt)、PDF (.pdf) 或文本 (.txt)。

# json - 如何在 Spring 中发送 JSON？

> ID：15160701
> 
> 赞同：2
> 
> 时间：2013-03-01T15:00:36.890
> 
> 标签：json, spring, rest, jakarta-ee

我试图找到如何在 Spring 中编写以从 REST 客户端发布 JSON。例如，我写道：

```
@RequestMapping(value = "/{userId}/add", method = RequestMethod.POST, headers = {"content-type=application/json"})
@ResponseBody
public Map<String, String> saveUser(@RequestBody User user, BindingResult result) { 
    Map<String, String> jsonResponse = new HashMap<String, String>();
    if (result.hasErrors()) {
        jsonResponse.put("Message", "Can't add the user");
        jsonResponse.put("Code", "401");
        return jsonResponse;
    }
    userService.addUser(user);
    jsonResponse.put("Message", "Success add User");
    jsonResponse.put("Code", "200");
    return jsonResponse;
} 
```

最终从 Firefox REST 客户端对其进行了测试。但我看到了 404 错误。我究竟做错了什么？感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:35:10.977

首先，如果您的请求的 URI 以“/user/2/add”结尾，它不会映射到您的方法，该方法被映射为“/{userId}/add”。这将导致您收到 HTTP 404 错误。相反，如果“userId”为 2，则您的 URI 应以“/2/add”结尾。

其次，使用 @RequestBody 注释 User 参数对于复杂的 User 类型是不够的。您需要将 JSON 请求正文转换为 User 对象。您可以使用[MappingJacksonHttpMessageConverter](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/remoting.html#rest-message-conversion)完成此操作。通过声明这种类型的 bean，您可以使用 Jackson 的注解来控制 JSON 如何解析为 User 属性。

# ruby-on-rails - 如何使用命名路由创建到给定主机的链接？

> ID：15160704
> 
> 赞同：0
> 
> 时间：2013-03-01T15:00:43.793
> 
> 标签：ruby-on-rails, ruby, hyperlink

我有这个代码：

```
<%= link_to 'Whatever', some_path(some_var) %> 
```

此代码位于电子邮件视图中，因此我想为链接指定主机。

我试过了 ：

```
<%= link_to 'Whatever', some_path(some_var, :host => 'http://my.host') %> 
```

这不起作用，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:09:18.163

Using the url version of the helper did the trick :

```
<%= link_to 'Whatever', some_url(some_var, :host => 'http://my.host') %> 
```

[Source](http://ridingtheclutch.com/post/1299774075/using-rails-3-route-helpers-outside-of-a)

# c# - 单击 DataGridView 时出现 IndexOutOfRangeException 错误

> ID：15160707
> 
> 赞同：2
> 
> 时间：2013-03-01T15:01:02.457
> 
> 标签：c#, winforms, exception, datagridview, click

我已经在这个问题上苦苦挣扎了几个小时。

这就是发生的事情：

当我的表单加载时，我有一个带有空`List<Entity>`数据源的 DataGridView。

```
DataGridView.Datasource = null;
DataGridView.Datasource = entity_list; 
```

首先，我将其设置为 null 以更新 DataGridView。

然后，我可以将实体添加到该列表中，这样每次添加时都会执行这段代码。

我遇到的问题是，在将一个实体添加到列表并更新 DataSource 后，我`IndexOutOfRangeException`在单击 DataGridView 时得到了一个。这很奇怪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:01:02.457

出现问题是因为我可以将实体添加到该列表中，并且由于某种原因，如果 DataSource 是一个空列表，则当您尝试向其中添加一个实体时会出现此异常。

因此，我使用的解决方案是在进行列表绑定之前询问该列表是否至少有 1 个实体。

```
DataGridView.DataSource = null;
if (entity_list.Count() > 0)
    {
        DataGridView.DataSource = entity_list;
    } 
```

就是这样！解决了！我读到使用 BindingLists 可以解决这个问题，但是如果您像我一样使用 List，我希望这可以帮助您！

# java - Java 多级 aes 解密/加密失败

> ID：15160714
> 
> 赞同：0
> 
> 时间：2013-03-01T15:01:27.267
> 
> 标签：java, encryption, base64, aes, encryption-symmetric

我的任务是解密使用以下标准加密的 Java 文件：

加密：

`

```
byte[] masterKey;
    if (Base64.decode(config.getProperty("encrMasterKey")) != null) {
        masterKey=aes.decrypt(Base64.decode(config.getProperty("encrMasterKey")),"password");
    } else {
        masterKey = aes.keyGeneration();
        byte[] encrMasterKey = aes.encrypt(masterKey, keyderivation("password"));
       writeToConfigFile("encrMasterKey", Base64.encode(encrMasterKey));
    }
    Cipher cipher = Cipher.getInstance("AES");
    SecretKeySpec keySpec = new SecretKeySpec(masterKey, "AES");
    cipher.init(Cipher.ENCRYPT_MODE, keySpec);
    byte[] cypherText = aes.encrypt(myJSONString,masterKey);' 
```

什么有效：

1.  我可以使用 AES 加密/解密，包括 byte[] 和密码派生密钥（keyderivation（“password”））
2.  我可以从配置文件中正确保存和加载。事实上我测试和生成的 Base64encoded(masterKey) 与 Base64.encode(aes.decrypt(Base64.decode(config.getProperty("encrMasterKey")),"password"))) 相同

什么不：

```
 Cipher cipher = Cipher.getInstance("AES");
    SecretKeySpec keySpec = new SecretKeySpec(masterKey, "AES");
    cipher.init(Cipher.ENCRYPT_MODE, keySpec); 
```

在 cipher.init java 抛出非法密钥或默认参数错误。

我真的很感激这个提示，现在一直困扰我好几天，我似乎无法修复它......

最好的祝愿

# html - 响应式 html 电子邮件：outlook

> ID：15160715
> 
> 赞同：6
> 
> 时间：2013-03-01T15:01:27.310
> 
> 标签：html, css, outlook, responsive-design, html-email

我制作了一个应该是响应式的 html 电子邮件模板。它在不同的电子邮件客户端和移动设备上显示完美。但是在 Outlook 上它被拉伸到 100%，这绝对不是很酷，因为标题是 600 像素宽。

我知道 Outlook 不支持该`max-width`属性。但是使用只会`width`导致移动浏览器显示错误。

所以基本上我的问题是：我应该做什么/更改模板以使其响应并仍以 600px 的最大宽度显示？

这是代码。首先是额外的 css（应该更好地阅读），其次是内联 css（应该在发送电子邮件时使用）。使用[http://beaker.mailchimp.com/inline-css](http://beaker.mailchimp.com/inline-css)将其呈现为内联。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- If you delete this tag, the sky will fall on your head -->
<meta name="viewport" content="width=device-width" />

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<style>
    /* ------------------------------------- 
        GLOBAL 
------------------------------------- */
* { 
    margin:0;
    padding:0;
}
* { font-family:Arial, Verdana, "Times New Roman";}

img { 
    max-width: 100%; 
}
.collapse {
    margin:0;
    padding:0;
}
body {
    -webkit-font-smoothing:antialiased; 
    -webkit-text-size-adjust:none; 
    width: 100%!important; 
    height: 100%;
    background:#F4F3F4;
}

/* ------------------------------------- 
        ELEMENTS 
------------------------------------- */
a { color: #2BA6CB;}

p.callout {
    padding:15px;
    background-color:#ECF8FF;
    margin-bottom: 15px;
}
.callout a {
    font-weight:bold;
    color: #2BA6CB;
}

/* ------------------------------------- 
        BODY 
------------------------------------- */
table.body-wrap { width: 100%;}

/* ------------------------------------- 
        TYPOGRAPHY 
------------------------------------- */
h1,h2,h3,h4,h5,h6 {
line-height: 1.1; margin-bottom:15px; color:#000;
font-family:Arial, Verdana, "Times New Roman";
}
h1 small, h2 small, h3 small, h4 small, h5 small, h6 small { font-size: 60%; color: #6f6f6f; line-height: 0; text-transform: none; }

h1 { font-weight:200; font-size: 44px;}
h2 { font-weight:200; font-size: 37px;}
h3 { font-weight:500; font-size: 27px;}
h4 { font-weight:500; font-size: 23px;}
h5 { font-weight:900; font-size: 17px;}
h6 { font-weight:900; font-size: 14px; text-transform: uppercase; color:#444;}

.collapse { margin:0!important;}

p, ul { 
    margin-bottom: 10px; 
    font-weight: normal; 
    font-size:14px; 
    line-height:1.6;
}
p.lead { font-size:17px; }
p.last { margin-bottom:0px;}

ul li {
    margin-left:5px;
    list-style-position: inside;
}

/* --------------------------------------------------- 
        RESPONSIVENESS
        Nuke it from orbit. It's the only way to be sure. 
------------------------------------------------------ */

/* Set a max-width, and make it display as block so it will automatically stretch to that width, but will also shrink down on a phone or something */
.container {
    display:block!important;
    max-width:600px!important;
    margin:0 auto!important; /* makes it centered */
    clear:both!important;
    padding:0!important;
}

/* This should also be a block element, so that it will fill 100% of the .container */
.content {
    padding:0 5px 5px 5px;
    max-width:600px;
    margin:0 auto;
    display:block; 
}

/* Let's make sure tables in the content area are 100% wide */
.content table { 
    width: 100%; 
    background:#FFF; 
    border: solid 1px #d9d9d9; 
}

/* Be sure to place a .clear element after each set of columns, just to be safe */
.clear { display: block; clear: both; }

</style>

</head>

<body>

<table class="body-wrap">
    <tr>
        <td></td>
        <td class="container" bgcolor="#F4F3F4">
            <div class="content">
            <p style="color:#666; margin:0; padding:0; font-size:10px;"><a href="{email_url}" style="color:#666; margin:0; padding:0;">Klik hier</a> om deze e-mail online te bekijken.</p>
            <table bgcolor="#FFFFFF" style="text-align:left;">
                <tr>
                    <td>
                        <p><img src="http://topografieindeklas.nl/brandingfiles/headerAlgemeen600px.jpg" /></p>

                        <!-- Callout Panel -->
                        <p class="callout">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt. <a href="#">Do it Now! &raquo;</a>
                        </p><!-- /Callout Panel -->
                        <?php if (empty($posts)) { ?>
                            <p style="padding: 15px;">Here you can start to write your message. Be polite with your readers! Do not forget the subsject of this message.</p>
                        <?php } else { ?>
                        <table cellpadding="5" style="padding: 15px;">
                            <?php foreach ($posts as $post) { setup_postdata($post); ?>
                                <tr>
                                    <td><a href="<?php echo get_permalink(); ?>"><img width="75" src="<?php echo newsletter_get_post_image($post->ID); ?>" alt="image"></a></td>
                                    <td valign="top">
                                    <a href="<?php echo get_permalink(); ?>"><h3><?php the_title(); ?></h3></a></td>
                                </tr>
                            <?php } ?>
                        </table>
                        <?php } ?>      

                        <br/>
                        <br/>                           

                    </td>
                </tr>
                <tr style="margin:0 15px;">
                    <td align="center" style="border-top: solid 1px #d9d9d9; padding:5px 0;" >
                        <p>
                            <a href="http://twitter.com/Topografie">Twitter</a> |
                            <a href="https://www.facebook.com/TopografieindeKlas">Facebook</a> |
                            <a href="{unsubscription_url}">Geen nieuws e-mails meer ontvangen</a>
                        </p>
                    </td>
                </tr>
            </table>
            </div>

        </td>
        <td></td>
    </tr>
</table><!-- /BODY -->

</body>
</html> 
```

内联 CSS：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;">
<head style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;">
<!-- If you delete this tag, the sky will fall on your head -->
<meta name="viewport" content="width=device-width" style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;">

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;">

</head>

<body style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;-webkit-font-smoothing: antialiased;-webkit-text-size-adjust: none;height: 100%;background: #F4F3F4;width: 100%;">

<table class="body-wrap" style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;width: 100%;">
    <tr style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;">
        <td style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;"></td>
        <td class="container" bgcolor="#F4F3F4" style="margin: 0 auto;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;display: block;max-width: 600px;clear: both;">
            <div class="content" style="margin: 0 auto;padding: 0 5px 5px 5px;font-family: Arial, Verdana, &quot;Times New Roman&quot;;max-width: 600px;display: block;">
            <p style="color: #666;margin: 0;padding: 0;font-size: 10px;font-family: Arial, Verdana, &quot;Times New Roman&quot;;margin-bottom: 10px;font-weight: normal;line-height: 1.6;"><a href="{email_url}" style="color: #666;margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;">Klik hier</a> om deze e-mail online te bekijken.</p>
            <table bgcolor="#FFFFFF" style="text-align: left;margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;width: 100%;background: #FFF;border: solid 1px #d9d9d9;">
                <tr style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;">
                    <td style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;">
                        <p style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;margin-bottom: 10px;font-weight: normal;font-size: 14px;line-height: 1.6;"><img src="http://topografieindeklas.nl/brandingfiles/headerAlgemeen600px.jpg" style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;max-width: 100%;"></p>

                        <!-- Callout Panel -->
                        <p class="callout" style="margin: 0;padding: 15px;font-family: Arial, Verdana, &quot;Times New Roman&quot;;margin-bottom: 15px;font-weight: normal;font-size: 14px;line-height: 1.6;background-color: #ECF8FF;">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt. <a href="#" style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;color: #2BA6CB;font-weight: bold;">Do it Now! &raquo;</a>
                        </p><!-- /Callout Panel -->
                        <?php if (empty($posts)) { ?>
                            <p style="padding: 15px;margin: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;margin-bottom: 10px;font-weight: normal;font-size: 14px;line-height: 1.6;">Here you can start to write your message. Be polite with your readers! Do not forget the subsject of this message.</p>
                        <?php } else { ?>
                        <table cellpadding="5" style="padding: 15px;margin: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;width: 100%;background: #FFF;border: solid 1px #d9d9d9;">
                            <?php foreach ($posts as $post) { setup_postdata($post); ?>
                                <tr style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;">
                                    <td style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;"><a href="&lt;?php echo get_permalink(); ?&gt;" style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;color: #2BA6CB;"><img width="75" src="&lt;?php echo newsletter_get_post_image($post-&gt;ID); ?&gt;" alt="image" style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;max-width: 100%;"></a></td>
                                    <td valign="top" style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;">
                                    <a href="&lt;?php echo get_permalink(); ?&gt;" style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;color: #2BA6CB;"><h3 style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;line-height: 1.1;margin-bottom: 15px;color: #000;font-weight: 500;font-size: 27px;"><?php the_title(); ?></h3></a></td>
                                </tr>
                            <?php } ?>
                        </table>
                        <?php } ?>      

                        <br style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;">
                        <br style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;">                         

                    </td>
                </tr>
                <tr style="margin: 0 15px;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;">
                    <td align="center" style="border-top: solid 1px #d9d9d9;padding: 5px 0;margin: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;">
                        <p style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;margin-bottom: 10px;font-weight: normal;font-size: 14px;line-height: 1.6;">
                            <a href="http://twitter.com/Topografie" style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;color: #2BA6CB;">Twitter</a> |
                            <a href="https://www.facebook.com/TopografieindeKlas" style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;color: #2BA6CB;">Facebook</a> |
                            <a href="{unsubscription_url}" style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;color: #2BA6CB;">Geen nieuws e-mails meer ontvangen</a>
                        </p>
                    </td>
                </tr>
            </table>
            </div>

        </td>
        <td style="margin: 0;padding: 0;font-family: Arial, Verdana, &quot;Times New Roman&quot;;"></td>
    </tr>
</table><!-- /BODY -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-30T22:39:36.197

尝试将模板包装在一个`width`设置为 100% 的表格中，三个单元格 ( `TD`s) 水平排列，中心单元格设置为`width="600"`（使用 HTML 属性设置宽度，而不是 CSS）。两边的两个单元格留空，没有任何宽度信息。这是获取`max-width`.

示例：http: [//jsfiddle.net/YcwM7/](http://jsfiddle.net/YcwM7/)

```
<table border="0" cellspacing="0" width="100%">
    <tr>
        <td></td>
        <td width="350">This cell should be a maximum width of 
                  350 pixels, but shrink to widths less than 350 pixels.
        </td>
        <td></td>
     </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:17:09.810

对此有几个问题，对于最佳跨客户端结果的普遍共识是在电子邮件样式方面将自己限制在 HTML2 中，而不是真正依赖 CSS。下面的链接都是过去回答的 SO 问题：

[是否有等效于 HTML 电子邮件的 CSS 最大宽度？](https://stackoverflow.com/questions/2426072/is-there-an-equivalent-of-css-max-width-that-works-in-html-emails)

[CSS 样式在 Outlook 2010 中不起作用？](https://stackoverflow.com/questions/8310609/css-styling-wont-work-in-outlook-2010)

*但是*，Outlook 确实有自己的条件语句，因此您可以为 Outlook 创建一组单独的样式规则：

[Outlook 是否有条件 CSS If？](https://stackoverflow.com/questions/4877641/is-there-a-conditional-css-if-for-outlook)

# singlestore - MemSQL 数据库中的 MemSQL 模式用途

> ID：15160716
> 
> 赞同：1
> 
> 时间：2013-03-01T15:01:28.230
> 
> 标签：singlestore

有谁知道 MemSQL 数据库中的“memsql”数据库/模式是什么？这是您启动服务时自动创建的默认架构。其中没有表、视图或例程，您无法在其上创建任何内容。我最好的猜测是它相当于 SQL Server 中的“Master”或“msdb”数据库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T00:50:07.843

与 MemSQL 的人交谈，自命名模式“memsql”确实相当于 SQL Server 上的“master”

# jqgrid - Jqgrid - 未加载子网格数据

> ID：15160720
> 
> 赞同：0
> 
> 时间：2013-03-01T15:01:47.713
> 
> 标签：jqgrid, subgrid

我正在尝试从主网格加载子网格数据。主网格加载正常，但是当我单击一行时，子网格数据不加载。不知道我错过了什么。请帮忙。

下面是我正在使用的代码。

```
<script type="text/javascript">
//<![CDATA[
$(document).ready(function () {
    var mydata = [],
        grid = $("#list");
    var mainGridPrefix = "s_";

    grid.jqGrid({
        url: '${recordsUrl}',
        datatype: 'json',
        ignoreCase: true,
        mtype: 'GET',
        colNames: ['Global Search', 'serverId', 'DeviceName', 'Description', 'Console', 'OS', 'Business Unit', 'Model', 'Manufacturer', 'Serial Number', 'LifeCycle', 'Tier'],
        colModel: [{
            name: 'globalSearch',
            index: 'globalSearch',
            width: 50,
            hidden: true,
            searchoptions: {
                searchhidden: true
            }
        }, {
            name: 'serverId',
            index: 'serverId',
            width: 10,
            hidden: true
        }, {
            name: 'deviceName',
            index: 'deviceName',
            width: 50
        }, {
            name: 'serverDesc',
            index: 'serverDesc',
            width: 70
        }, {
            name: 'console',
            index: 'console',
            width: 50
        }, {
            name: 'groupName',
            index: 'groupName',
            width: 40
        }, {
            name: 'businessUnit',
            index: 'businessUnit',
            width: 30
        }, {
            name: 'model',
            index: 'model',
            width: 30,
            editable: true,
            editrules: {
                required: true,
                edithidden: true
            },
            hidden: true,
            editoptions: {
                dataInit: function (element) {
                    $(element).attr("readonly", "readonly");
                }
            }
        }, {
            name: 'manufacturer',
            index: 'manufacturer',
            width: 30,
            editable: true,
            editrules: {
                required: true,
                edithidden: true
            },
            hidden: true,
            editoptions: {
                dataInit: function (element) {
                    $(element).attr("readonly", "readonly");
                }
            }
        }, {
            name: 'serialNumber',
            index: 'serialNumber',
            width: 30,
            editable: true,
            editrules: {
                required: true,
                edithidden: true
            },
            hidden: true,
            editoptions: {
                dataInit: function (element) {
                    $(element).attr("readonly", "readonly");
                }
            }
        }, {
            name: 'lifeCycle',
            index: 'lifeCycle',
            width: 30,
            editable: true,
            editrules: {
                required: true,
                edithidden: true
            },
            hidden: true,
            editoptions: {
                dataInit: function (element) {
                    $(element).attr("readonly", "readonly");
                }
            }
        }, {
            name: 'tier',
            index: 'tier',
            width: 30,
            editable: true,
            editrules: {
                required: true,
                edithidden: true
            },
            hidden: true,
            editoptions: {
                dataInit: function (element) {
                    $(element).attr("readonly", "readonly");
                }
            }
        }],
        postData: {},
        rowNum: 10,
        rowList: [10, 20, 40, 60],
        height: 'auto',
        autowidth: true,
        rownumbers: true,
        pager: '#pager',
        sortname: 'deviceName',
        viewrecords: true,
        sortorder: "asc",
        caption: "Records",
        emptyrecords: "Empty records",
        idPrefix: mainGridPrefix,
        loadonce: true,
        loadComplete: function () {},
        jsonReader: {
            root: "rows",
            page: "page",
            total: "total",
            records: "records",
            repeatitems: false,
            cell: "cell",
            id: "serverId"
        },
        subGrid: true,
        beforeProcessing: function (data) {
            var rows = data.rows,
                l = rows.length,
                i, item, subgrids = {};
            for (i = 0; i < l; i++) {
                item = rows[i];
                if (item.apps) {
                    subgrids[item.id] = item.apps;
                }
            }
            data.userdata = subgrids;
        },
        subGridRowExpanded: function (subgridDivId, rowId) {
            var $subgrid = $("<table id='" + subgridDivId + "_t'></table>"),
                pureRowId = $.jgrid.stripPref(mainGridPrefix, rowId),
                subgrids = $(this).jqGrid("getGridParam", "userData");

            $subgrid.appendTo("#" + $.jgrid.jqID(subgridDivId));
            $subgrid.jqGrid({
                datatype: "local",
                data: subgrids[pureRowId],
                colNames: ["App Id", "Desc"],
                colModel: [{
                    name: "appId"
                }, {
                    name: "applicationDesc"
                }],
                sortname: "applicationDesc",
                height: "100%",
                rowNum: 10000,
                autoencode: true,
                autowidth: true,
                jsonReader: {
                    repeatitems: false,
                    id: "appId"
                },
                gridview: true,
                idPrefix: rowId + "_"
            });
        }

    });

    $("#search").click(function () {
        var searchFiler = $("#filter").val(),
            f;

        if (searchFiler.length === 0) {
            grid[0].p.search = false;
            $.extend(grid[0].p.postData, {
                filters: ""
            });
        }
        f = {
            groupOp: "OR",
            rules: []
        };
        f.rules.push({
            field: "globalSearch",
            op: "cn",
            data: searchFiler
        });
        f.rules.push({
            field: "deviceName",
            op: "cn",
            data: searchFiler
        });
        grid[0].p.search = true;
        $.extend(grid[0].p.postData, {
            filters: JSON.stringify(f)
        });
        grid.trigger("reloadGrid", [{
            page: 1,
            current: true
        }]);
    });

    grid.jqGrid('navGrid', '#pager', {
        edit: false,
        add: false,
        del: false,
        search: true,
        view: true
    }, {}, {}, {}, { // search
        sopt: ['cn', 'eq', 'ne', 'lt', 'gt', 'bw', 'ew'],
        closeOnEscape: true,
        multipleSearch: true,
        closeAfterSearch: true
    }, { // vew options
        beforeShowForm: function (form) {
            $("tr#trv_id", form[0]).show();
        },
        afterclickPgButtons: function (whichbutton, form, rowid) {
            $("tr#trv_id", form[0]).show();
        }
    });

    grid.navButtonAdd('#pager', {
        caption: "Add",
        buttonicon: "ui-icon-plus",
        onClickButton: addRow,
        position: "last",
        title: "",
        cursor: "pointer"
    });

    grid.navButtonAdd('#pager', {
        caption: "Edit",
        buttonicon: "ui-icon-pencil",
        onClickButton: editRow,
        position: "last",
        title: "",
        cursor: "pointer"
    });

    grid.navButtonAdd('#pager', {
        caption: "Delete",
        buttonicon: "ui-icon-trash",
        onClickButton: deleteRow,
        position: "last",
        title: "",
        cursor: "pointer"
    });
});
//]]> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:59:12.840

您忘记添加索引：子网格中colModel的信息，如果名称大写，则还需要注意大写，那么索引也应该如此，这样jqgrid就知道需要将数据放在哪里。这是固定代码，也是一个[工作示例的链接](http://jsfiddle.net/RQtjZ/)

![在此处输入图像描述](../Images/b62e4b6758d9c96fb8f918bdffbf0a27.png)

```
//<![CDATA[
$(document).ready(function () {
var mydata = [{
    globalsearch: "1",
    serverId: "Test Name1",
    deviceName: "Test Address1",
    Console: "Test Date1"
}, {
    globalsearch: "2",
    serverId: "Test Name2",
    deviceName: "Test Address2",
    Console: "Test Date2"
}, {
    globalsearch: "3",
    serverId: "blah",
    deviceName: "hello",
    Console: "basketball"
}];
grid = $("#list");

var mydata2 = [{
    AppId: "1",
    Desc: "Test Name1"
}, {
    AppId: "2",
    Desc: "Test Name2"
}, {
    AppId: "3",
    Desc: "blah"
}];
var mainGridPrefix = "s_";

grid.jqGrid({
    datatype: 'local',
    data: mydata,
    colNames: ['globalsearch', 'serverId', 'deviceName', 'Description', 'Console', 'OS', 'Business Unit', 'Model', 'Manufacturer', 'Serial Number', 'LifeCycle', 'Tier'],
    colModel: [{
        name: 'globalsearch',
        index: 'globalsearch',
        width: 50,
    }, {
        name: 'serverId',
        index: 'serverId',
        width: 10,
        hidden: false
    }, {
        name: 'deviceName',
        index: 'deviceName',
        width: 50
    }, {
        name: 'serverDesc',
        index: 'serverDesc',
        width: 70
    }, {
        name: 'Console',
        index: 'Console',
        width: 50
    }, {
        name: 'groupName',
        index: 'groupName',
        width: 40
    }, {
        name: 'businessUnit',
        index: 'businessUnit',
        width: 30
    }, {
        name: 'model',
        index: 'model',
        width: 30,
        editable: true,
        editrules: {
            required: true,
            edithidden: true
        },
        hidden: true,
        editoptions: {
            dataInit: function (element) {
                $(element).attr("readonly", "readonly");
            }
        }
    }, {
        name: 'manufacturer',
        index: 'manufacturer',
        width: 30,
        editable: true,
        editrules: {
            required: true,
            edithidden: true
        },
        hidden: true,
        editoptions: {
            dataInit: function (element) {
                $(element).attr("readonly", "readonly");
            }
        }
    }, {
        name: 'serialNumber',
        index: 'serialNumber',
        width: 30,
        editable: true,
        editrules: {
            required: true,
            edithidden: true
        },
        hidden: true,
        editoptions: {
            dataInit: function (element) {
                $(element).attr("readonly", "readonly");
            }
        }
    }, {
        name: 'lifeCycle',
        index: 'lifeCycle',
        width: 30,
        editable: true,
        editrules: {
            required: true,
            edithidden: true
        },
        hidden: true,
        editoptions: {
            dataInit: function (element) {
                $(element).attr("readonly", "readonly");
            }
        }
    }, {
        name: 'tier',
        index: 'tier',
        width: 30,
        editable: true,
        editrules: {
            required: true,
            edithidden: true
        },
        hidden: true,
        editoptions: {
            dataInit: function (element) {
                $(element).attr("readonly", "readonly");
            }
        }
    }],
    rowNum: 10,
    rowList: [10, 20, 40, 60],
    rownumbers: true,
    pager: '#pager',
    sortname: 'deviceName',
    viewrecords: true,
    sortorder: "asc",
    caption: "Records",
    height: 'auto',
    autowidth: true,
    loadComplete: function () {},
    subGrid: true,
    beforeProcessing: function (data) {
        var rows = data.rows,
            l = rows.length,
            i, item, subgrids = {};
        for (i = 0; i < l; i++) {
            item = rows[i];
            if (item.apps) {
                subgrids[item.id] = item.apps;
            }
        }
        data.userdata = subgrids;
    },
    subGridRowExpanded: function (subgridDivId, rowId) {
        var $subgrid = $("<table id='" + subgridDivId + "_t'></table>"),
            pureRowId = $.jgrid.stripPref(mainGridPrefix, rowId),
            subgrids = $(this).jqGrid("getGridParam", "userData");

        $subgrid.appendTo("#" + $.jgrid.jqID(subgridDivId));
        $subgrid.jqGrid({
            datatype: "local",
            data: mydata2,
            colNames: ["AppId", "Desc"],
            colModel: [{
                name: "AppId",
                index: "AppId"
            }, {
                name: "Desc",
                index: "Desc"
            }],
            sortname: "applicationDesc",
            height: "100%",
            rowNum: 10000,
            autoencode: true,
            autowidth: true,
            jsonReader: {
                repeatitems: false,
                id: "appId"
            },
            gridview: true,
            idPrefix: rowId + "_"
        });
    }

});

$("#search").click(function () {
    var searchFiler = $("#filter").val(),
        f;

    if (searchFiler.length === 0) {
        grid[0].p.search = false;
        $.extend(grid[0].p.postData, {
            filters: ""
        });
    }
    f = {
        groupOp: "OR",
        rules: []
    };
    f.rules.push({
        field: "globalSearch",
        op: "cn",
        data: searchFiler
    });
    f.rules.push({
        field: "deviceName",
        op: "cn",
        data: searchFiler
    });
    grid[0].p.search = true;
    $.extend(grid[0].p.postData, {
        filters: JSON.stringify(f)
    });
    grid.trigger("reloadGrid", [{
        page: 1,
        current: true
    }]);
});

grid.jqGrid('navGrid', '#pager', {
    edit: false,
    add: false,
    del: false,
    search: true,
    view: true
}, {}, {}, {}, { // search
    sopt: ['cn', 'eq', 'ne', 'lt', 'gt', 'bw', 'ew'],
    closeOnEscape: true,
    multipleSearch: true,
    closeAfterSearch: true
}, { // vew options
    beforeShowForm: function (form) {
        $("tr#trv_id", form[0]).show();
    },
    afterclickPgButtons: function (whichbutton, form, rowid) {
        $("tr#trv_id", form[0]).show();
    }
});

grid.navButtonAdd('#pager', {
    caption: "Add",
    buttonicon: "ui-icon-plus",
    onClickButton: addRow,
    position: "last",
    title: "",
    cursor: "pointer"
});

grid.navButtonAdd('#pager', {
    caption: "Edit",
    buttonicon: "ui-icon-pencil",
    onClickButton: editRow,
    position: "last",
    title: "",
    cursor: "pointer"
});

grid.navButtonAdd('#pager', {
    caption: "Delete",
    buttonicon: "ui-icon-trash",
    onClickButton: deleteRow,
    position: "last",
    title: "",
    cursor: "pointer"
});
});
//]]>

<table id="list"></table>
<div id="pager"></div> 
```

# python - 强制唯一与模型继承

> ID：15160721
> 
> 赞同：6
> 
> 时间：2013-03-01T15:01:50.410
> 
> 标签：python, django, inheritance, django-models

我试图解决下面的问题，经过一番搜索，它似乎是 Django 中的一个开放[错误](https://code.djangoproject.com/ticket/16732)。我通过向模型子类添加一个类方法解决了这个问题，虽然这个解决方案有效，但它仍然需要使用这个子类对任何 (Model)Form 进行另一个自定义检查。我将其发布给其他人，以便比我更快地找到解决方案，也欢迎其他解决方案。

```
class Foo(models.Model):
    attr1 = models.IntegerField()
    attr2 = models.IntegerField()

    class Meta:
        unique_together = (
            ('attr1', 'attr2'),
        )

class Bar(Foo):
    attr3 = models.IntegerField()

    class Meta:
        unique_together = (
            ('attr1', 'attr3'),
        ) 
```

提出：

```
Unhandled exception in thread started by <bound method Command.inner_run of <django.contrib.staticfiles.management.commands.runserver.Command object at 0x10f85a0d0>>
Traceback (most recent call last):
  File "/Users/intelliadmin/VirtualEnvs/virtenv9/lib/python2.7/site-packages/django/core/management/commands/runserver.py", line 91, in inner_run
    self.validate(display_num_errors=True)
  File "/Users/intelliadmin/VirtualEnvs/virtenv9/lib/python2.7/site-packages/django/core/management/base.py", line 270, in validate
    raise CommandError("One or more models did not validate:\n%s" % error_text)
django.core.management.base.CommandError: One or more models did not validate:
app.Bar: "unique_together" refers to attr1\. This is not in the same model as the unique_together statement. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T15:01:50.410

一个可能的解决方案：

```
class Bar:
    # fields...

    @classmethod
    def _validate_unique(cls, self):
        try:
            obj = cls._default_manager.get(attr1=self.attr1, attr3=self.attr3)
            if not obj == self:
                raise IntegrityError('Duplicate')
        except cls.DoesNotExist:
            pass

    def clean(self):
        self._validate_unique(self)
        super(Bar, self).clean() 
```

# java - 如何使用java为亚马逊AWS的存储桶中的单个文件设置权限

> ID：15160725
> 
> 赞同：0
> 
> 时间：2013-03-01T15:02:12.880
> 
> 标签：java, amazon-web-services, amazon

我使用grantree在其下设置了一个存储桶和一个对象键。我们如何设置特定用户的权限？我试过 acl.grantPermission(new CanonicalGrantee("example canonicaluserid"), Permission.ReadAcp);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T19:20:06.670

在 Amazon Web Services 下使用 IAM。您将基本上：创建一个用户，授予用户适当的权限，为该用户创建访问密钥和秘密，在您的代码中使用此密钥/秘密组合。

# gcc - 用于虚假比较的 gcc 警告标志

> ID：15160728
> 
> 赞同：1
> 
> 时间：2013-03-01T15:02:32.097
> 
> 标签：gcc

我正在寻找与 gcc 一起使用的正确警告标志来检测以下内容：

```
#include <stdlib.h>
#include <stdio.h>
int main()
{
  const size_t n = (size_t)-1;
  for( unsigned int i = 0; i < n; ++i ) /* use `unsigned char` if you want */
    {
    printf( "%d\n", i );
    }
  return 0;
} 
```

我试过：

```
$ gcc -Wsign-conversion -Wconversion -pedantic -Wsign-compare -W -Wall -Wextra -std=c99  t.c 
```

发生的事情是我一直在修改`unsigned int`用于内存块大小的现有代码。代码以较大的文件开始失败。所以我需要检查我没有错过任何剩余的东西。

编辑：

刚刚发现`-Wtype-limits`，但这又不适合我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:36:20.700

您要求编译器检测条件在运行时始终为真。在这种情况下，这几乎没有可能，因为它总是正确的原因是一侧是恒定的，而另一侧受`unsigned int`类型的限制。我很高兴您找到了一个 g++ 标志，但是如果变量的值`n`是在不同的文件中提供的，或者没有键入为`const`，例如，编译器可能无法检测到条件仍然为真。

您也可以考虑使用静态分析器，它比编译器花费更多时间来检测运行时可能发生和可能不会发生的事情。一种开源 C 分析器是[Frama-C](http://frama-c.com/try_out_value.html)：

![函数未达到返回](../Images/8aa644ebb4cb9654badb2d8df76f9d35.png)

在屏幕截图中，红色的语句已被检测为无法访问。

开源版本只有在程序有限使用库函数的情况下才能正常工作，但即便如此，它也可以提取 g++ 警告中没有出现的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:18:23.303

好的，找到窍门了，你需要改用c++编译器：

```
$ g++ -Wextra  t.c
t.c: In function ‘int main()’:
t.c:6: warning: comparison is always true due to limited range of data type 
```

和：

```
$ g++ --version
g++ (Debian 4.4.5-8) 4.4.5
Copyright (C) 2010 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

# php - 如何在 jquery 中使用 $.ajax 获取数组

> ID：15160732
> 
> 赞同：0
> 
> 时间：2013-03-01T15:02:48.523
> 
> 标签：php, jquery, ajax

我有返回数组的页面 getorgname.php 那么如何使用 $.ajax 方法在我的 jquery 页面中获取数组？

```
$ds = my_ldap_connect(CHI_LDAP_LOCATION, CHI_LDAP_PORT, CHI_LDAP_USE_TLS);
$groups = get_all_groups($ds, CHI_LDAP_BASE_DN, CHI_LDAP_BIND_DIRECTORY, CHI_LDAP_BIND_PASSWORD);
$sr = @ldap_search($ds, "ou=people,".CHI_LDAP_BASE_DN, "(uid=*)");
$nt = ldap_get_entries( $ds, $sr );
//echo "<pre>";
//print_r($nt);
//echo "</pre>";
foreach( $nt as $each )
{
    if( is_array( $each ) )
    {

        $json[] = trim('"'.$each['o'][0].'"');

    }
} 
```

返回 $json;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:06:40.790

设置正确的 json 标头以提供 json 并以 json 格式打印数组：

```
header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json'); 

//create your array here

echo json_encode(array); 
```

然后在客户端使用 jQuery 接收数组：

```
$.ajax({
   url: 'getorgname.php',
   dataType: 'json',
   success: function(data){
       //the 'data' object contains your array
       //do stuff with it here
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:43:13.017

无需在 jQ 的`$.ajax`调用中设置数据类型，只需使用`echo`构造而不是 then `return`，就可以了。如果您开始弄乱标头，您迟早会遇到麻烦：
您只能在尚未生成任何输出的情况下设置标头，所以请注意：要么缓冲，要么将`header`调用保持在最顶部。只*知道你在做什么*。

在您的情况下，仅以结尾`echo json_encode($json);`就可以了：

```
foreach( $nt as $each )
{
    if( is_array( $each ) )
    {
        $json[] = trim($each['o'][0]);
    }
}
echo json_encode($json); 
```

这就是您需要做的所有事情，您不必手动格式化 JSON。
你的 jQ 应该是这样的：

```
$.ajax({
    url: 'yourscript.php',
    data: yourRequestObject,
    success: function(response)
    {
        console.log(response);//this'll be either an array or an object (assoc array's are objects in JS)
    }
}); 
```

# sql-server - 如何通过sql查询替换给定字符串中特定数量的字符？

> ID：15160733
> 
> 赞同：-1
> 
> 时间：2013-03-01T15:02:50.163
> 
> 标签：sql-server

像：

```
s1= 'ldoed@dldkeo@fkfok@dkf@' 
```

像'ldoedKdldkeo@fkfokKdkf@'这样的输出

用字符'K'替换字符串中的第一个@和第三个@

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:10:57.977

尝试使用`charindex()`and `stuff()`：

[小提琴演示 1](http://sqlfiddle.com/#!3/d41d8/10168)

```
declare @s1 varchar(100)= 'ldoed@dldkeo@fkfok@dkf@', @count int = 0 

select @count = charindex('@',@s1,@count+1), 
       @s1 = case isremove when 1 then 
             stuff(@s1, charindex('@',@s1,@count) ,1,'K') else @s1 end
from (values (1),(0),(1)) t(isremove) 
```

[小提琴演示 2](http://sqlfiddle.com/#!3/d41d8/10155)

```
declare @s1 varchar(100)= 'ldoed@dldkeo@fkfok@dkf@'

select stuff(stuff(@s1,first,1,'K'),third,1,'K')
from (
select charindex('@',@s1,1) first,
   charindex('@',@s1,charindex('@',@s1,charindex('@',@s1,1)+ 1)+1) third
)x 
```

# php - 如何按修改日期显示我的所有文件？

> ID：15160734
> 
> 赞同：0
> 
> 时间：2013-03-01T15:02:55.453
> 
> 标签：php, directory

我是 PHP 新手，我只是想知道是否有人可以提供帮助。我希望我的代码从目录/子目录中读取文件，并在修改日期之前显示所有文件！我的代码只显示一个文件，这是我最近更改的文件。那么如何列出所有文件呢？我希望这个问题有点道理..

```
<?php

   $last_mtimes = array(); 
   function ListFiles($dir) {

      if($dh = opendir($dir)) {

         $files = Array();
         $inner_files = Array();

         while($file = readdir($dh)) {
            if($file != "." && $file != ".." && $file[0] != '.') {
               if(is_dir($dir . "/" . $file)) {
                  $inner_files = ListFiles($dir . "/" . $file);
                  if(is_array($inner_files)) $files = array_merge($files, $inner_files); 
               } else {
                  array_push($files, $dir . "/" . $file);
                  $lmtime = filemtime($dir . "/" . $file) ;
                  $last_mtimes[$lmtime] = $dir . "/" . $file;
               }
            }
         }

        krsort($last_mtimes);

        closedir($dh);
        return ($last_mtimes);

     }
   }

   foreach (ListFiles('folder/folder/') as $key=>$file);

   echo array_shift(ListFiles('folder/folder/'));
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:27:52.477

有一个额外的分号使循环什么也不做：

```
 foreach (ListFiles('folder/folder/') as $key=>$file);
                                                     ^ remove this 
```

# git - 如何克隆 git 项目以创建不同的存储库？

> ID：15160735
> 
> 赞同：2
> 
> 时间：2013-03-01T15:02:55.957
> 
> 标签：git, github

我有一个 Github 项目 ( [https://github.com/gbrits/yeoman-less](https://github.com/gbrits/yeoman-less) )，我想将其用作其他项目的快速入门。这些其他项目中的每一个都需要获得自己的回购。

所以`git clone` [https://github.com/gbrits/yeoman-less](https://github.com/gbrits/yeoman-less)（单独）不起作用，因为我需要做一些事情，比如在克隆之后更改原点以指向不同的远程端点。

相关：您是否会从命令行在 github 中创建远程源，而不必手动创建它然后在命令行中将其链接起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:12:28.630

它看起来很容易。

**第一个克隆**

```
git clone git://.. 
```

可选择更改本地目录的名称。

**intermezzo**：创建新的远程 github 存储库（来自网站）或命令行（见下文）：（来自[是否可以在不打开浏览器的情况下从 CLI 在 GitHub 上创建远程存储库？](https://stackoverflow.com/questions/2423777/is-it-possible-to-create-a-remote-repo-on-github-from-the-cli-without-ssh/10325316#10325316_)

```
curl -u 'USER:PASS' https://api.github.com/user/repos -d '{"name":"REPO"}'
git remote add origin git@github.com:USER/REPO.git
git push origin master 
```

**更改原点**

`git remote set-url origin git://<new repo>`

**并推**

`git push -u origin master`

# hibernate - 休眠加入2行

> ID：15160737
> 
> 赞同：0
> 
> 时间：2013-03-01T15:03:00.523
> 
> 标签：hibernate, join, self, discriminator, composite-id

为了使我的java代码更容易，我想将两行合并为一，因为我真的需要这两行才能使用数据。

假设这些是我表的字段：

```
ID, FIELD1, FIELD2, DISCRIMINATOR, VALUE 
```

显然，ID 是主键。FIELD1 和 2 让我们识别 2 行的“组”，它们仅通过 DISCRIMINATOR 和 VALUE 不同（鉴别器指示值代表什么）

我希望每个“组”有一个 POJO（其中 FIELD1 和 2 将用作复合 ID），例如：

```
FIELD1, FIELD2, VALUE1, VALUE2 
```

在哪里 ：

VALUE1 = 鉴别器 A 的 VALUE

VALUE2 = 鉴别器 B 的 VALUE

在 SQL 中，我会这样请求它：

```
SELECT a.FIELD1, a.FIELD2, a.VALUE as VALUE1, b.VALUE as VALUE2
FROM TABLE a, TABLE b
WHERE a.FIELD1 = b.FIELD1 and a.FIELD2 = b.FIELD2
  AND a.DISCRIMINATOR = 'A'
  AND b.DISCRIMINATOR = 'B' 
```

不幸的是，我不知道如何让它在休眠状态下，我现在对所有的可能性感到困惑。

我宁愿将解决方案作为映射的 XML，但如果别无选择，仍然会采用注释解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:58:51.587

如果您非常简单地将表映射到 POJO（此处使用注释，但您可以使用 XML）：

```
@Entity
@Table(name = "whatever")
public class Fields {

    @Id
    @Column(name = "ID")
    private String id;

    @Column(name = "FIELD1")
    private String field1;

    @Column(name = "FIELD2")
    private String field2;

    @Column(name = "DISCRIMINATOR")
    private String discriminator;

    @Column(name = "VALUE")
    private String value;
} 
```

您可以定义一个包含字段和值的单独 POJO：

```
public class FieldValues {
    private String field1, field2, value1, value2;

    public FieldValues( String field1, String field2, String value1, String value2 ) {
        this.field1 = field1;
        this.field2 = field2;
        this.value1 = value1;
        this.value2 = value2;
    }
} 
```

然后，您可以使用 JPQL 准确编写您概述的查询，在 中执行它`EntityManager`，它仍然会参与所有 JPA 事务等等。

```
String sql =   "SELECT a.field1, a.field2, a.value as value1, b.value as value2 "
             + "  FROM Fields a, Fields b "
             + " WHERE a.FIELD1 = b.FIELD1 and a.FIELD2 = b.FIELD2 "
             + "   AND a.DISCRIMINATOR = 'A' "
             + "   AND b.DISCRIMINATOR = 'B'";
List<Object[]> result = entityManager.createQuery(sql, Object[].class);

List<FieldValues> result = new ArrayList<FieldValues>();
for (Object[] fieldSet : result) {
    String field1 = (String) fieldSet[0];
    String field2 = (String) fieldSet[1];
    String value1 = (String) fieldSet[2];
    String value2 = (String) fieldSet[3];
    result.add(new FieldValues(field1, field2, value1, value2));
} 
```

我相信您甚至可以让 Hibernate`FieldValues`为您映射，但我不记得如何。它可能就像`FieldValues`用正确的列名注释（或 XML 映射）类一样简单，然后强制 Hibernate`List<FieldValues>`从查询中返回 a 而不是。这种方法的缺点是您无法对数据库进行更改`FieldValue`并将其保存到数据库中。

另一种方法是使用普通的旧 SQL 和[`EntityManager.createNativeQuery`](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#createNativeQuery%28java.lang.String,%20java.lang.Class%29). 您必须确保在执行此操作之前刷新实体管理器；否则任何挂起的更改可能尚未写入数据库，因此您的查询不会看到。同样，我相信在这种情况下，您可以让 Hibernate 为您映射到`FieldValues`该类。

# html - 浏览器上的 WebSocket 客户端可以与 TCP Socket 服务器通信吗？

> ID：15160739
> 
> 赞同：6
> 
> 时间：2013-03-01T15:03:13.693
> 
> 标签：html, websocket, tcpsocket

是否可以运行接受来自 WebSocket 客户端的传入连接的 TCP 套接字服务器？我有一个 TCP 套接字服务器，我希望能够在浏览器中测试它。这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T16:47:52.590

**绝对地！**这就是[websockify](https://github.com/kanaka/websockify)的目的。

当然，您的 WebSocket 客户端应用程序需要能够实现 TCP 服务器的协议。例如，[noVNC](https://github.com/kanaka/noVNC)是一个浏览器 VNC 客户端，它实现了 RFB 协议，通过使用 websockify 它可以连接到一个普通的基于 TCP 的 VNC 服务器。

**免责声明**：我创建了[websockify](https://github.com/kanaka/websockify)和[noVNC](https://github.com/kanaka/noVNC)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T15:14:18.450

TCP 和 WebSocket 不是相同的协议或框架，因此盲目地将它们连接起来是行不通的。嗯......从技术上讲，websocket 是 http 的升级，它在 ssl 上分层（可选），而后者又在 tcp 上分层。

TCP 可以被认为是一个字节流，而 WebSocket 是一组帧。

WebSocket 帧可以是以下任何一种：

*   TEXT - 由组成单个 UTF8 消息的 1 个或多个帧组成
*   BINARY - 由 1 个或多个构成字节数组消息的帧组成
*   CONTINUATION - 由 TEXT 和 BINARY 用于拼凑 2 个或更多帧。
*   PING - 明显
*   PONG - 明显
*   CLOSE - 请求关闭/断开协议。

简而言之，您需要实现[websocket 协议框架](https://www.rfc-editor.org/rfc/rfc6455#section-5.2)，以便将 TCP 连接到 websocket。您需要实现基本的[HTTP UPGRADE](https://www.rfc-editor.org/rfc/rfc6455#section-4)才能达到这一点。

# windows - Windows下带有PyQt的Webkit不能通过xhr获取远程资源

> ID：15160740
> 
> 赞同：2
> 
> 时间：2013-03-01T15:03:13.327
> 
> 标签：windows, qt, webkit, xmlhttprequest, pyqt

我想编写一个 Qt 应用程序，它使用 Webkit 作为它的 gui 从服务器获取数据并显示它。我让它在 Linux 和 OS X 下运行没有问题，但在 Windows 下 XMLHttpRequest 总是返回状态 0，我不知道为什么。这是我使用的 pyqt 代码：

```
import sys, os
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtWebKit import *

app = QApplication(sys.argv)
web = QWebView()
web.page().settings().setAttribute(QWebSettings.LocalContentCanAccessRemoteUrls, True)
path = os.path.abspath(os.path.join(os.path.dirname(__file__), 'index.html'))
url = "file://localhost/" + path
web.load(QUrl(url))
web.show()
sys.exit(app.exec_()) 
```

这是我用来测试它的html HTML/JS：

```
<!DOCTYPE html>
<title>TEST</title>
<h1>TEST</h1>
<div id="test"></div>
<script type="text/javascript">
    function t(text) { document.getElementById("test").innerHTML = text }

    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function() {
        if(this.status != 0)
            t(this.responseText)
        else
            t("Status is 0")
    }
    xhr.open("GET", "https://jeena.net/")
    xhr.send()
</script> 
```

在 Linux 上，它会打开一个带有 WebKit 视图的新窗口，将 html 本地 index.html 文件加载到其中并呈现它，其中显示 TEST 标题。之后，它运行 XMLHttpRequest 代码来获取网站内容，并使用 innerHTML 将其设置到准备好的 div 中。

在 Windows 上，它会加载并显示标题，但是当它运行 xhr 代码时，状态始终为 0，并且无论我做什么，它都不会改变。

据我了解`LocalContentCanAccessRemoteUrls`，即使在 Windows 上，xhr 也可以从远程网站获取该内容，知道为什么这不起作用吗？我在我的 Windows 机器和 python v2.7 上使用 Qt 版本 4.9.6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:59:52.940

我认为有两种简单的尝试可以解决这个问题。

我的第一个想法是这可能是由于跨域请求。似乎没有简单的方法可以在 QWebkit 中禁用跨域保护。我从这个 stackoverflow 问题中得到了信息：

[QtWebkit 同源策略](https://stackoverflow.com/questions/8090462/qtwebkit-same-origin-policy)

如接受的答案所述：

“默认情况下，Qt 不公开禁用/白名单相同来源策略的方法。扩展相同 (qwebsecurityorigin.cpp) 并使其工作。”

但是，既然你已经在 linux 和 mac 上运行了一切，那么上面的可能不是原因。

另一种可能性是您没有在 Windows 上使用 Qt 启用 openssl。因为我注意到你已经请求了一个**https**页面，这应该需要 openssl。您可以将页面更改为**http**以快速测试这种可能性。

# php - 如何在 php 中使用选定的值填充多选？

> ID：15160755
> 
> 赞同：1
> 
> 时间：2013-03-01T15:03:55.447
> 
> 标签：php, codeigniter, jquery-chosen

我正在使用 codeigniter 进行开发。我需要用选定的值填充多选

这是我的 json 数组（我需要选择它）：

```
["1","2","3","4"] 
```

这是我的 php 代码：

```
function tag($selected=0){
    $query = $this->db->get('tags');
    $html='';
    foreach($query->result() as $row){

        $html .='<option value="'.$row->id.'">'.$row->tag.'</option>';

    }
    return $html;
} 
```

**$selected**包含一个 json 数组。现在我需要在 json 数组中填充竞争标签列表和选定项目。

我该怎么做？谁能告诉我我在这里使用什么方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:24:35.640

```
function tag($selected = null){
    $selected = ($selected === null) ? array() : json_decode($selected, true);
    $query = $this->db->get('tags');
    $html='';
    foreach($query->result() as $row){
        $isSelected = (in_array($row->id, $selected)) ? ' selected="selected"' : '';
        $html .='<option value="'.$row->id.'"'.$isSelected.'>'.$row->tag.'</option>';

    }
    return $html;
} 
```

# sql - System.Data.SqlClient.SqlException

> ID：15160758
> 
> 赞同：0
> 
> 时间：2013-03-01T15:04:02.800
> 
> 标签：sql, sql-server, iis, exception-handling

尝试访问特定网页时，我不断收到以下错误。

> *`allowDefinition='MachineToApplication'`使用注册为超出应用程序级别的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。*

当我进入 IIS 并将目录配置为应用程序时，正如我应该做的错误状态，页面似乎在等待响应，并显示一个空白页面，大约 1-2 分钟，然后我收到以下错误：

```
 Server Error in '/inventory' Application.

 A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.Data.SqlClient.SqlException: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +6256377
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) +245
   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, SqlConnection owningObject) +6270399
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnection owningObject) +181
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(String host, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, Int64 timerStart) +6271242
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +6271208
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +354
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +703
   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +54
   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +6272472
   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +81
   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +1657
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +88
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +6275911
   System.Data.SqlClient.SqlConnection.Open() +258
   Inventory1.welcome.Page_Load(Object sender, EventArgs e) +219
   System.Web.UI.Control.OnLoad(EventArgs e) +132
   System.Web.UI.Control.LoadRecursive() +66
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2428 
```

SQL Server 已启动并可访问站点上的所有其他页面。我一直在尝试解决这个错误好几个小时，现在已经持续了大约一周，但没有成功。我是 IIS 新手，目前我想不出其他可以尝试的方法。我想知道是否有人可以帮助我确定此错误的原因。这个特定页面大约在 2 周前加载并正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:52:46.997

看起来您在该页面上所做的任何事情都无法访问 SQL Server。你如何连接到数据库？使用 Windows 身份验证还是使用 SQL Server 登录？您在 IIS 中使用模拟吗？例如，我猜想，您要运行某个 SP，而该用户没有运行 SP 的权限。

您可以使用 IIS 中的数据库连接管理器检查数据库连接的可访问性（和可用性）吗？[此 IIS 帮助显示](http://www.iis.net/learn/extensions/database-manager/use-the-database-manager)了如何执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:00:21.420

您绝对应该将虚拟目录保留为应用程序。

SQL 错误可能是连接字符串有问题。

您说其他页面可以工作...是否有一种标准方式可以让您的所有页面都连接到 SQL？他们都从 web.config 中获取连接字符串吗？还是在页面上硬编码？

# python - 使用 Q 过滤 django 数据

> ID：15160762
> 
> 赞同：0
> 
> 时间：2013-03-01T15:04:31.753
> 
> 标签：python, django, django-q

```
category = request.GET.get('cat')
from_p = request.GET.get('from')
to_p = request.GET.get('to')

q = Q()
if category:
    q |= Q(category=category)
if from_p:
    q |= Q(price__gt=from_p)
if to_p:
    q |= Q(price__lt=to_p)

s = Sample.objects.filter(q) 
```

> www.example.com/?cat=0&from=300&to=600

如果第一个是`category`- `from_p`并且`to_p`标准不起作用。如何解决？它仅适用于一个标准。如果用户设置（例如）`category`并按`from_p`这些标准搜索，我需要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:09:15.470

**EDITED**

Here it is:

```
q_cat = Q(category=category) if category else Q()
q_from = Q(price__gt=from_p) if from_p else Q()
q_to = Q(price__lt=to_p) if to_p else Q()

q = q_cat | ( q_from  & q_to )

s = Sample.objects.filter(  q ) 
```

# video - 在 angular.js 指令中使用 video.js

> ID：15160763
> 
> 赞同：0
> 
> 时间：2013-03-01T15:04:31.140
> 
> 标签：video, angularjs, video.js

该指令应该监视 scope.tutorialNumber 变量的变化（随着用户学习教程的进行而增加），然后通过使用 tutorialNumber 作为数组 videoURLs 的索引来加载新视频，然后替换第一个硬编码的视频进入html。但是，当 tutorialNumber 更新时，$watch 似乎根本没有被触发。为什么？

```
<video data-setup="{'techOrder': ['html5', 'flash']}"  class="video-js vjs-default-skin" id="myvideo" video-loader="tutorialNumber" id="video" controls>
    <source type="video/mp4" src="file:///C:/Users/Dell/Desktop/grammar%20game/ㅗㅏregular.mp4"></source> 
    Your browser does not support the video tag.
</video>

.directive('videoLoader', function(){
    return function (scope, element, attrs){
            scope.$watch(scope.tutorialNumber, function(){          
                //element.load();           
                scope.video.src(scope.videoURLs[scope.tutorialNumber]);
                scope.video.ready(function(){
                scope.video.play();
                $(scope.video).bind('ended', function(){
                    $(scope.video).unbind('ended');
                    if (!scope.video.ended) {
                        return;
                    }
                    scope.tutorialNumber++;
                    scope.$apply();
                    scope.loadFromMenu();
                });
            });
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:14:00.450

你应该把你的 $watch 表达式写成：

```
scope.$watch('tutorialNumber', function(){ ... 
```

或者

```
scope.$watch(function(){return scope.tutorialNumber;}, function(){ ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T19:08:05.427

我读错了，还是您的范围参考写错了？

您`scope`在大多数情况下都列出了，但常见的 Angular 参考是`$scope`.

此外，还有这样的事情`$rootScope`。您可以利用`$rootScope`将值返回给应用程序（模型）的父级，然后利用指令或模块中的 $scope 来划分数据。

# css - 背景图片仅拉伸y轴，保持repeat-x

> ID：15160764
> 
> 赞同：29
> 
> 时间：2013-03-01T15:04:37.073
> 
> 标签：css, cross-browser, background-image

我将图像设置为 div 的背景图像。DIV 大小正在变化，它们内部是渐变的图像。

CSS：

```
#scroller_shadow{
    background-image:url(../img/ui/shadow.png);
    background-repeat:repeat-x;   
    background-position:top;
} 
```

我需要一个跨浏览器解决方案来使图像仅在 y 轴上适合 div 的高度，并保持重复 x。DIV 正在通过 JQuery 动态调整大小。

它们可能是使用 JQuery 的跨浏览器选项。我不介意使用脚本来实现这一点以获得跨浏览器支持（IE7+）。我不想拉伸图像，因为当您在 x 轴上拉伸图像时它会失去强度，从而使半透明的 png 图像几乎透明。

谢谢。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-03-01T17:12:30.483

我也有这个问题。在大多数浏览器中这很容易，但在 IE8 及以下浏览器中却很棘手。

现代（非 IE8 及以下）浏览器的解决方案：

```
#scroller_shadow {
    background: url(../img/ui/shadow.png) center repeat-x;
    background-size: auto 100%;
} 
```

有一些 jQuery 插件可以模拟 IE8 及以下版本的背景大小，特别是[backgroundSize.js](https://github.com/louisremi/jquery.backgroundSize.js)，但如果你想让它重复，它就不起作用。

无论如何，因此开始了我可怕的黑客攻击：

```
<div id="scroller_shadow">
    <div id="scroller_shadow_tile">
        <img src="./img/ui/shadow.png" alt="" >
        <img src="./img/ui/shadow.png" alt="" >
        <img src="./img/ui/shadow.png" alt="" >
        ...
        <img src="./img/ui/shadow.png" alt="" >
    </div>
</div> 
```

确保包含足够`<img>`的 's 以覆盖所需的区域。

CSS：

```
#scroller_shadow {
    width: 500px; /* whatever your width is */
    height: 100px; /* whatever your height is */
    overflow: hidden;
}

#scroller_shadow_tile {
    /* Something sufficiently large, you only to make it unreasonably wide if the width of the parent is dynamic. */
    width: 9999px;
    height: 100%;
}

#scroller_shadow_tile img {
    height: 100%;
    float: left;
    width: auto;
} 
```

无论如何，这个想法是从图像中创建拉伸效果。

[JSF](http://jsfiddle.net/UcYMg/)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-20T10:23:45.863

```
background-position: left top;
background-repeat-y: repeat;
background-size: 100%; 
```

# c# - 刷新强类型数据集

> ID：15160765
> 
> 赞同：2
> 
> 时间：2013-03-01T15:04:49.663
> 
> 标签：c#, ado.net, dataset, strongly-typed-dataset

我有一个调用一些存储过程的强类型数据集。在一种情况下，我使用强类型数据集在数据库中添加了一些数据。数据被添加到数据库中，但由于某种原因没有显示新数据。

这让我相信，在添加新项目后，我必须以某种方式刷新强类型数据集。我不确定我应该在这里发布什么代码，但我会发布将元素添加到数据库的代码：

```
var addBookAdapter = new QueriesTableAdapter();           

addBookAdapter.AddBook(book.Name,book.Author,book.Description,book.PublicationDate,book.CategoryId); 
```

这是执行此操作的存储过程：

```
CREATE PROCEDURE [dbo].[AddBook]
    @Name nvarchar(MAX),
    @Author nvarchar(MAX),
    @Description nvarchar(MAX),
    @Date date  ,
    @CategoryId int
AS
    INSERT INTO Books (Name , Author , Description , PublicationDate , CategoryId)
    VALUES (@Name , @Author , @Description , @Date , @CategoryId) 
```

正如我已经提到的，这很有效。新项目被添加到数据库中，但它们没有显示

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T15:17:37.990

如果数据库中的基础数据已更改，则将该信息加载到数据集中的唯一方法是手动加载。根据您的需要，您有几个选择：

*   您可以丢弃现有数据并从数据适配器重新填充数据集。
*   您可以加载数据集的第二个副本并用于[`DataSet.Merge`](http://msdn.microsoft.com/en-us/library/4swwh51k.aspx)引入任何更改。
*   您可以直接将新行添加到数据集中。

但是，当您使用强类型数据集时，目的是让您在添加新行时使用该对象，*而不是*通过表适配器将它们添加到数据库中。当您向数据集中的表添加新行时，它在内存中被跟踪为“已添加”。然后，当您通过表适配器将该数据集的更改保存回数据库时，数据集将调用适当的`InsertCommand`或`UpdateCommand`用于表的任何内容。这样，您的数据库和数据集就会同步。

使用类型化数据集的工作流程通常按其顺序包含以下步骤。合并解析逻辑和处理冲突的方式可能会变得相当复杂，但基本思想是相同的：

*   `dataAdapter.Fill(dataset)`
*   （通过类型化数据行更改类型化数据集）
*   `dataChanges = dataSet.GetChanges()`
*   `dataAdapeter.Update(dataChanges)`
*   `dataSet.Merge(dataChanges)`
*   `dataSet.AcceptChanges()`

# mobile - 使用 azure 移动服务如何从私有容器下载 blob？

> ID：15160768
> 
> 赞同：0
> 
> 时间：2013-03-01T15:04:56.730
> 
> 标签：mobile, service, azure, blob

我正在使用 Azure 移动服务来存储 Web 应用程序的图像。我已成功将图像上传到私有容器。我遵循了本介绍性指南 ( [http://code.msdn.microsoft.com/windowsapps/Upload-File-to-Windows-c9169190](http://code.msdn.microsoft.com/windowsapps/Upload-File-to-Windows-c9169190) ) 中的逻辑，即将文件上传到数据库时，SAS 由向表中插入记录时调用的节点脚本。

在移动应用程序中使用这种方法的原因之一是存储密钥不存储在应用程序源本身中。

按照这个想法，我现在正在努力寻找如何下载图像的示例。

也许我应该更新同一张表的读取函数并让它返回一个可用于访问图像的 SAS。

这听起来合理还是它们是更好的方法？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:44:05.793

在我看来，你在正确的轨道上。如果您将图像存储在私有容器中并希望移动设备读取它，那么是的，您将需要生成一个允许读取并将其返回到设备的 SAS。然后，设备代码可以使用该 SAS URL 直接调用 BLOB 存储来检索图像。

这仅适用于您希望容器私有的情况。如果容器是公开的，那么只返回 URL（就像它们在您链接到的文章中一样）应该没问题。

这还取决于您关心图像的私密性。例如，假设您为每个用户创建了一个容器。如果容器上有一个共享访问签名策略，并且过期日期非常遥远，那么从技术上讲，仍然有人需要带有 SAS 的 URL 来查看它，但是您可以创建该 SAS 并像示例一样存储它。然后，当移动应用程序从您的服务读取数据并直接访问 BLOB 时，可以为移动应用程序提供 URL，而无需创建额外的 SAS。在我看来，这个选项只有在图像不会出现很长时间的情况下才真正有效，或者你并不真正关心是否有人从他们可以访问的网络流量中嗅探 URL。

如果您希望它相当安全并且不知道图像会存在多长时间，那么当应用程序从相关表数据中读取时，您应该采用您声明的方法来获取 SAS 以供读取。SAS 可以有一个相当短的有效期，移动设备可以缓存结果。

# php - 使用 PHP 跟踪链接

> ID：15160771
> 
> 赞同：0
> 
> 时间：2013-03-01T15:04:57.530
> 
> 标签：php

我的网站上有各种指向特定表格的链接。

每当有人填写表格时，我希望能够知道是什么链接将他们引导至表格。

我想这样做，而不必为我在其中创建的每个链接创建单独的 PHP 代码行。相反，我希望有一些 PHP 代码从该链接中获取某些内容，并可能将其插入到隐藏的文本框中，该文本框从我在链接中标记的内容中获取其值或文本。

例如：

1.  用户单击链接。
2.  该链接将他们定向到表单。
3.  该链接带有激活 PHP 代码的标识
4.  当我收到表格时，我知道点击了哪个链接可以访问该表格。

我希望它也可以与我发送的电子邮件中的链接一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:08:58.573

您可以使用[HTTP Referer](http://en.wikipedia.org/wiki/HTTP_referer)来实现这一点。在 PHP 中，您可以使用

```
$referer = $_SERVER['HTTP_REFERER'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:10:36.600

使用这个例如：

```
if (isset($_SERVER['HTTP_REFERER']))
{
    $ref = $_SERVER['HTTP_REFERER'];
} 
```

然后在你的表格中：

```
<input type="hidden" value="<?php echo htmlspecialchars($ref, ENT_QUOTES); ?>" name="ref" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:12:36.027

根据您帖子中的信息，听起来您只想发送一个令牌/ ID。

```
<a href="form.php?token=xxx">Goto Form</a> 
```

现在在表单上，​​您可以获取令牌：

```
$token = $_GET['token']; // use proper testing first 
```

然后使用 a `switch`or`if`语句运行您需要的任何代码。

```
<input type="hidden" value="<?php echo $token; ?>"> 
```

**额外的：**

正如`//use proper testing first`评论所指出的，您应该确保传递的令牌是有效的并且在受到攻击时进行了清理。一种选择是在生成令牌时将令牌存储在数据库中，然后在验证时进行比较。还要检查`htmlspecialchars()`甚至`strip_tags()`消毒。

如果令牌验证失败，您不应该输出，甚至应该有一条警告消息/重定向出现错误。

# python - Windows Azure 网站 python

> ID：15160772
> 
> 赞同：4
> 
> 时间：2013-03-01T15:04:59.587
> 
> 标签：python, azure, flask, pymongo, azure-web-app-service

经过大量的努力，我最终在 Windows Azure 上运行了一个 hello world flask 应用程序，该应用程序在本地构建并且运行良好，但将其部署到 Azure 是一场噩梦。所以我在这里有两个问题。

我似乎根本无法获得堆栈跟踪，我尝试在 web.config 中进行设置，但是关于如何使用所有这些东西的文档只是令人遗憾，我所能找到的只是字面上写得很糟糕的博客文章点缀微软数以百万计的博客之一。这甚至不能帮助我解决我的问题。

第二个问题与第一个问题有关，由于一些可怕的调试方法（将我的应用程序拆开并注释掉）我觉得这可能是 pymongo 造成的，我在没有 C 扩展的情况下构建了它，它在我的站点中-包，它可以在我的本地机器上运行。但是，如果没有堆栈跟踪，我只是不知道如何解决这个问题而不想把我的头发拉出来。

任何人都可以对此有所了解吗？真的很令人失望，因为 azure 的其余部分还不错，那里有更好的网站托管替代方案，例如 heroku，实际上是 10 个命令设置。到目前为止，我一直在为此工作一整天..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:48:21.133

**解决了**

对于那些感兴趣的人，我最终解决了这个问题，我手动将错误处理添加到我的烧瓶应用程序中，完全绕过了 IIS 设置和 Windows azure 配置——太复杂了，根本没有文档。

```
from werkzeug.debug import get_current_traceback   

@app.errorhandler(500)
def internal_server_error(e):
    base = os.path.dirname(os.path.abspath(__file__))
    f = open('%s/logs/error.log' % (base), 'a')
    track = get_current_traceback(skip=1, show_hidden_frames=True, ignore_system_exceptions=False)
    track.log(f)
    f.close()

    return 'An error has occured', 500 
```

# php - 在 php 页面中使用 asp.net 回发

> ID：15160773
> 
> 赞同：1
> 
> 时间：2013-03-01T15:05:01.227
> 
> 标签：php, jquery, asp.net, postback

我有一个`php`页面（来自 Wordpress），它在其中加载了一个`asp.net`页面。

内页有一些 asp.net 控件，因此每次我单击某些内容时，它都会**自动回发，并在完全****混乱**的 url中重新加载整个页面。

我使用 jquery 的函数加载了 asp.net `load()`，我需要在这个页面内触发一些函数。

现在，当您按下 asp 按钮时，页面调用回发函数，新页面读取发布值并执行需要执行的内容。在我的情况下，帖子消息被发送到完全忽略它的 wordpress。我需要将此帖子数据转发到我的新页面吗？或者我的方式完全错误？我不想使用 iFrame，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-17T02:22:41.587

我只能假设 asp.net 在 wordpress 框架之外。然后，您似乎正在尝试使用 php 与 wordpress 函数进行通信。如果是这种情况，您可以使用此方法为 wordpress 的页面外启用 wordpress 框架工作

需要一次（目录名（**文件**）。'/wp-load.php'）；

这样做将包括 wordpress 功能，以便您可以利用内置 API。

# xna - 在哪里调用 SetRenderTarget？

> ID：15160777
> 
> 赞同：4
> 
> 时间：2013-03-01T15:05:12.520
> 
> 标签：xna, xna-4.0, pixel-shader, spritebatch, rendertarget

我想在`SpriteBatch.Begin`和之间更改我的 RenderTargets `SpriteBatch.End`。我已经知道这有效：

```
GraphicsDevice.SetRenderTarget(target1);
SpriteBatch.Begin()
SpriteBatch.Draw(...)
SpriteBatch.End()
GraphicsDevice.SetRenderTarget(target2);
SpriteBatch.Begin()
Spritebatch.Draw(...)
SPriteBatch.End() 
```

但我真的很想让这项工作：

```
SpriteBatch.Begin()
GraphicsDevice.SetRenderTarget(target1);
SpriteBatch.Draw(...)
GraphicsDevice.SetRenderTarget(target2);
Spritebatch.Draw(...)
SpriteBatch.End() 
```

我曾经见过有人这样做，但我没有找到任何原因。

编辑：关于我为什么要这样做的更多信息：

在我的项目中，我使用 SpriteSortMode.Immediate（以便能够在需要时更改 BlendState），并且我只是遍历一个排序的精灵列表，然后将它们全部绘制出来。但是现在我想在一些精灵上应用多通道着色器，但不是全部！我对着色器很陌生，但据我了解，我必须使用第一遍将我的精灵绘制在中间精灵上，并使用第二遍在最终渲染目标上绘制中间精灵。（我使用的是高斯模糊像素着色器）。这就是为什么我想在我想要的目标上绘制，使用所需的着色器，而不必重新开始/结束。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:04:07.720

问题是：为什么要在那里更改渲染目标？

您不会有任何性能改进，因为当渲染目标（或任何其他渲染状态）发生变化时，无论如何都必须拆分批处理。

SpriteBatch 尝试按公共属性对精灵进行分组，例如使用时的纹理`SpriteSortMode.Texture`。这意味着共享纹理的精灵将在同一个*绘制调用*（批处理）中绘制。减少批次可以提高性能。但是*你不能在 draw call 期间改变 GPU 状态*。因此，当您更改渲染目标时，无论如何您都必须使用两个绘制调用。

因此，即使第二个示例可行，批次数也会相同。

# c++ - Qt：MainWindow->show() 在调用时崩溃程序

> ID：15160780
> 
> 赞同：0
> 
> 时间：2013-03-01T15:05:18.643
> 
> 标签：c++, qt

我一直在使用 C++ 中的 Qt 开发这个程序，到目前为止一切都很好。但是，我随后需要将该程序移动到另一台机器上。我有颠覆，所以我提交了项目文件夹中的每个文件并在新机器上检查了它。在跳过一些障碍以使其成功构建和运行后，我收到此错误：

```
 ASSERT: "dst.depth() == 32" in file qgl.cpp,.
 invalid parameter passed to c runtime function qt 
```

我尝试单步执行程序以找到它崩溃的点，发现它是在所有内容都已初始化并且为继承 QMainWindow 类的类调用 show() 之后。*c->showView()*行调用 QMianWindow->show()。

```
 ----------main.cpp------------
 #include <QApplication>

 #include "ModelI.h"
 #include "ControllerI.h"
 #include "Model.h"
 #include "Controller.h"

 int main(int argc, char *argv[])
 {
      QApplication a(argc, argv);
      ModelI *m = new Model();
      ControllerI *c = new Controller(m);
      c->showView();                         <- ERROR HERE
      return a.exec();
 } 
```

问题中令人困惑的部分是，当调用 show() 时，该程序在我的机器上运行良好。我不知道两台机器之间有什么不同会使程序的行为如此不同。两者都使用相同版本的 Qt (SDK 2010.05)。两者都使用 Eclipse 进行开发。我能找到的唯一区别是我的编译器是 MinGW 4.5.0 而另一台机器的编译器是 MinGW 4.5.2。

**编辑1：**

这就是 Controller::showView() 的样子。

```
 void Controller::showView()
 {
     mView->show();
 } 
```

这就是 mView 的初始化方式。

```
 mView = new View(mModel, this); 
```

# database - 如何将 csv 文件从 Internet 加载到 Access 数据库中？

> ID：15160781
> 
> 赞同：0
> 
> 时间：2013-03-01T15:05:19.047
> 
> 标签：database, vb.net, ms-access, csv

我有以下包含股票代码的数组：`Public Shared tickerArray() As String = {"GOOG", "AAPL", "V", "MSFT"}`. 我需要使用这个循环：`For Each tickerValue In Form1.tickerArray`将每个股票代码的 csv 文件加载到 Microsoft Access 中的一个大表中。csv 文件位于`"http://ichart.yahoo.com/table.csv?s=" & tickerValue`. 我还需要将相应的股票代码加载到从 csv 文件导入的表格的每一行中，以使每一行都是唯一的。所以数据库中的列应该是：“Ticker, Date, Open, High, Low, Close, Volumne & Adj Close”。

我找到了有关将本地 csv 文件加载到 Access 中的信息，但我似乎无法弄清楚如何通过 vb.net 将 csv 文件从 Internet 加载到 Access 中。

另外，我需要经常更新这个表，所以我只需要从 csv 文件中插入新的唯一行。没有重复。

有什么建议么？谢谢！

***更新：*** 这是我到目前为止的代码。

```
Imports System.Data
Imports System.Data.OleDb
Imports System.Net
Imports System.IO

Public Class Form1

Public Shared tickerArray() As String = {"GOOG", "AAPL", "V", "MSFT"}

Private Sub btnUpdate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnUpdate.Click
    Dim myConnection As OleDbConnection
    Dim DBpath As String = 
    Dim sConnectionString As String = "Provider=Microsoft.ACE.OLEDB.12.0; Data Source=" & DBpath & ";Persist Security Info=True"
    myConnection = New OleDbConnection(sConnectionString)
    myConnection.Open()

    Dim strURL As String
    Dim strBuffer As String
    For Each tickerValue In Form1.tickerArray
        'Creates the request URL for Yahoo.
        strURL = "http://ichart.yahoo.com/table.csv?s=" & tickerValue
        strBuffer = RequestWebData(strURL)
        'Create array.
        Dim sReader As New StringReader(strBuffer)
        Dim List As New List(Of String)
        Do While sReader.Peek >= 0
            List.Add(sReader.ReadLine)
        Loop
        Dim lines As String() = List.ToArray
        sReader.Close()
        For Each Line In lines.Skip(1)
            MsgBox(Line)
            Dim myInsert As String = TextToInsert(Line, tickerValue)
            Dim cmd As New OleDbCommand(myInsert, myConnection)
            cmd.ExecuteNonQuery()
        Next
    Next
End Sub

Function TextToInsert(ByVal inputString As String, ByVal ticker As String)
    Dim Dt As String = inputString.Split(",")(0).Trim
    Dim Open As String = inputString.Split(",")(1).Trim
    Dim High As String = inputString.Split(",")(1).Trim
    Dim Low As String = inputString.Split(",")(1).Trim
    Dim Close As String = inputString.Split(",")(1).Trim
    Dim Volume As String = inputString.Split(",")(1).Trim
    Dim Adj_Close As String = inputString.Split(",")(1).Trim
    Dim SQLstr As String
    SQLstr = "INSERT INTO Historical (Ticker, Date, Open, High, Low, Close, Volume, Adj Close) " & "VALUES (" & "'" & ticker & "','" & Dt & "','" & Open & "','" & High & "'," & "'" & Low & "','" & Close & "','" & Volume & "','" & Adj_Close & "'" & ")"
    Return SQLstr
End Function

Private Function RequestWebData(ByVal pstrURL As String) As String
    Dim objWReq As WebRequest
    Dim objWResp As WebResponse
    Dim strBuffer As String
    'Contact the website
    objWReq = HttpWebRequest.Create(pstrURL)
    objWResp = objWReq.GetResponse()
    'Read the answer from the Web site and store it into a stream
    Dim objSR As StreamReader
    objSR = New StreamReader(objWResp.GetResponseStream)
    strBuffer = objSR.ReadToEnd
    objSR.Close()

    objWResp.Close()

    Return strBuffer
End Function

End Class 
```

我收到错误代码“OleDBException 未处理。INSERT INTO 语句中的语法错误。” 在线`cmd.ExecuteNonQuery()`请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T22:15:13.993

您可以使用 System.Data.OleDb 命名空间来定义函数以插入数据库。像（以非常粗略的方式）：

```
Dim myConnection As OleDbConnection

Dim sConnectionString  As String = "Provider=Microsoft.ACE.OLEDB.12.0; Data Source=" & DBpath & ";Persist Security Info=True"

myConnection = New OleDbConnection(sConnectionString)

myConnection.Open() 
```

然后在csv中的每一行上做一个循环

```
Dim myInsert as String= functionTextToInsert(inputString)

Dim cmd As New OleDbCommand(myInsert, myConnection)

cmd.ExecuteNonQuery() 
```

functionTextToInsert(ByVal inputString as string) 是一个函数，它在插入字符串中从 csv 转换一行："max;min;vol" -> "Insert into MYTABLE (Column_01,Column_02,Column_03) VALUES (max,min,vol );"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:13:52.080

尝试这个：

[在 .NET/C# 中将大量记录（批量插入）写入 Access](https://stackoverflow.com/questions/7070011/writing-large-number-of-records-bulk-insert-to-access-in-net-c)

我从未与 DAO 合作过，所以在这里我帮不上什么忙，但是...

如果此 MSSQL 语法适用于 MS ACCESS，请使用命令对象并将包含您的 csv 作为 varchar(max) 或类似访问数据类型的参数传递给它，这将来自您的应用程序的 CSV 内容：

```
BULK
INSERT mytable
FROM @myCSVstring
WITH
(
FIELDTERMINATOR = ',',
ROWTERMINATOR = '\n'
)
GO 
```

有两件事，SO 帖子指出 DAO 快得多，而且你的终结者可能不同，但我会从这些开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-26T07:17:28.327

我认为以前的答案是不必要的复杂。您只需发送`XMLHTTP`请求即可。这会将 CSV 数据作为字符串获取，然后可以将其解析为表。

下面是执行此操作的 VBA 子例程。我在哪里找到这些技术的文档在代码注释中。我已经在 Access 2019 中运行了它，它可以工作。

可以在将数据插入表之前或之后对问题中指示的数据进行修改。

```
Sub pImportOnlineCsvAsTable(sURL As String, sTableName As String, Optional sKey As String)

' Download a CSV file from the Internet and parse it into an Access table (all strings).

' Adapted from "www.stackoverflow.com/questions/52142757/vba-download-csv-from-a-link/#52175815"
'   This shows how to download an online CSV file into an ADO stream, then save it as a local file.
' and "www.stackoverflow.com/questions/33860833/convert-adodb-binary-stream-to-string-vba/#33883789"
'   This shows I don't need the stream, but can use the CSV data as a string and parse it into a table.

' Documentation on "XMLHTTP" object:
'   "https://docs.microsoft.com/en-us/previous-versions/windows/desktop/ms760305(v=vs.85)"

Dim oWinHttpReq As Object
Dim oDB As Database
Dim sSQL As String, sCSVdata As String, _
    asCSVrows As Variant, asCSVfields As Variant, _
    nCSVrows As Long, nCSVfields As Integer, _
    nCountRows As Long, nCountFields As Integer

Set oDB = CurrentDb()
Set oWinHttpReq = CreateObject("Microsoft.XMLHTTP")
oWinHttpReq.Open "get", sURL, False
oWinHttpReq.send
If oWinHttpReq.status = 200 Then
    sCSVdata = oWinHttpReq.ResponseText
    asCSVrows = Split(sCSVdata, Chr(10))
    nCSVrows = UBound(asCSVrows) + 1
    asCSVfields = Split(asCSVrows(0), ",")
    nCSVfields = UBound(asCSVfields) + 1
    sSQL = ""
    For nCountFields = 0 To (nCSVfields - 1)
        sSQL = sSQL & "[" & asCSVfields(nCountFields) & "] varchar(255)" & _
                    IIf(nCountFields = nCSVfields - 1, "", ", ")
      Next
    sSQL = "create table [" & sTableName & "] (" & sSQL & ");"
    oDB.Execute (sSQL)
    For nCountRows = 1 To (nCSVrows - 1)
        asCSVfields = Split(asCSVrows(nCountRows), ",")
        sSQL = ""
        For nCountFields = 0 To (nCSVfields - 1)
            sSQL = sSQL & """" & asCSVfields(nCountFields) & """" & _
                        IIf(nCountFields = nCSVfields - 1, "", ", ")
          Next
        sSQL = "insert into [" & sTableName & "] values (" & sSQL & ");"
        oDB.Execute (sSQL)
      Next
    If sKey <> "" Then _
        oDB.Execute "alter table [" & sTableName & "] add primary key ([" & sKey & "]);"
  End If

Set oWinHttpReq = Nothing
Set oDB = Nothing

End Sub     ' pImportOnlineCsvAsTable() 
```

# java - 我如何知道提交给执行者的任务是否抛出异常？

> ID：15160782
> 
> 赞同：2
> 
> 时间：2013-03-01T15:05:18.723
> 
> 标签：java, multithreading, executorservice, executor

如果我在 a 中运行一个线程，`ExecutorService`有没有办法知道该线程在开始执行时没有引发异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T15:14:45.723

根据[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#submit%28java.lang.Runnable%29)，您可以使用执行器提交您的可运行文件`submit()`

```
 ExecutorService service = Executors.newSingleThreadExecutor();
    Future f = service.submit(new Runnable() {
        @Override
        public void run() {
            throw new RuntimeException("I failed for no reason");
        }
    });
    try {
        f.get();            
    } catch (ExecutionException ee) {
        System.out.println("Execution failed " + ee.getMessage());
    } catch (InterruptedException ie) {
        System.out.println("Execution failed " + ie.getMessage());
    } 
```

此方法仅在您的异常未选中时才有效。如果您检查了异常，请重新将它们包裹在 a 中`RuntimeException`或使用`Callable`代替`Runnable`接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T15:11:52.017

```
ExecutorService executor = Executors.newFixedThreadPool (4);

Future <?> future = executor.submit (new Runnable ()
{
    @Override
    public void run () {
        // while (true);
        throw new RuntimeException ("Something bad happend!");
    }
});

Thread.sleep (1000L);

try
{
    future.get (0, TimeUnit.MILLISECONDS);
}
catch (TimeoutException ex)
{
    System.out.println ("No exceptions");
}
catch (ExecutionException ex)
{
    System.out.println ("Exception happend: " + ex.getCause ());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:19:41.853

`get()`如果正在执行任务的线程中存在异常，则`Future`抛出方法。`ExecutionException`实际发生的异常包含在此异常中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T15:07:08.403

刚刚在你的另一个问题中说了这个：使用你自己的`ThreadPoolExecutor`而不是`Executors`. 然后覆盖`afterExecute`TPE 提供的钩子，对异常做任何你想做的事情。

# xslt - 下拉选项的编号 XSLT

> ID：15160783
> 
> 赞同：0
> 
> 时间：2013-03-01T15:05:21.443
> 
> 标签：xslt, xslt-1.0

最好是xslt1.0

我有以下 xslt 代码，为所选的 productguarantee 数量重新创建。所以说我选择 5 我得到下面的下拉列表 5 次。在选择超过 1 的任何东西时，它将按顺序对它们中的每一个进行编号。

我想要的是它只对相同的项目进行编号，例如，如果选择 B 3 次，它将是 B 1、B 2、B 3。

棘手的部分是有一个“其他”框，用户可以在其中输入自由文本，所以如果它与另一个其他框匹配，那么它们将被编号，但我暂时不太担心这部分。

目前假设您选择了 5 种产品，您将获得：

选项一 1、选项一 2、选项二 3、选项四 4、选项五 5

我想要的是你只得到倍数的编号，例如

选项一 1，选项一 2，选项二，选项四，选项五

非常感谢任何帮助

代码：

```
<xsl:if test="productguarantee!=0">
<xsl:for-each select="productguarantees/productguaranteedata">
    <xsl:if test="producttypes/option[@id='A']='selected'">OptionOne</xsl:if>
    <xsl:if test="producttypes/option[@id='B']='selected'">OptionTwo</xsl:if>
    <xsl:if test="producttypes/option[@id='C']='selected'">OptionThree</xsl:if>
    <xsl:if test="producttypes/option[@id='D']='selected'">OptionFour</xsl:if>
    <xsl:if test="producttypes/option[@id='E']='selected'">OptionFive</xsl:if>
    <xsl:if test="producttypes/option[@id='F']='selected'">OptionSix</xsl:if>
    <xsl:if test="producttypes/option[@id='G']='selected'">OptionSeven</xsl:if>
    <xsl:if test="producttypes/option[@id='H']='selected'"><xsl:value-of select="otherprodtypebox"/></xsl:if>
    <xsl:if test="(../../productguarantee)!='1'">
    <xsl:value-of select="position()"/>
    </xsl:if>
    </xsl:for-each>
</xsl:if> 
```

XML:

```
<productguarantee>0</productguarantee>
    <productguarantees>
        <productguaranteedata id="0">
            <producttypes>
                <option id="A">selected</option>
                <option id="B"/>
                <option id="C"/>
                <option id="D"/>
                <option id="E"/>
                <option id="F"/>
                <option id="G"/>
                <option id="H"/>
            </producttypes>
            <otherprodtypebox/>
        </productguaranteedata>
</productguarantees> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:04:26.893

以下不是最优雅的解决方案，但时间有限，我发现将您的个人 xsl:if 语句更改为以下内容：

```
<xsl:if test="producttypes/option[@id='A']='selected'">
    <xsl:text>OptionOne</xsl:text>
    <xsl:if test="
        preceding-sibling::productguaranteedata[producttypes/option[@id='A']='selected']
        or 
        following-sibling::productguaranteedata[producttypes/option[@id='A']='selected']                    
    ">
        <xsl:value-of select="position()"/>
    </xsl:if>
</xsl:if> 
```

（以产品 A 为例，您必须相应地更改其他 xsl:if 语句）

并在循环结束时跳过 xsl:if 可能会有所帮助。

**编辑：**

```
<xsl:if test="producttypes/option[@id='A']='selected'">
    <xsl:text>OptionOne</xsl:text>
    <xsl:if test="
        preceding-sibling::productguaranteedata[producttypes/option[@id='A']='selected']
        or 
        following-sibling::productguaranteedata[producttypes/option[@id='A']='selected']                    
    ">
        <xsl:value-of select="count(preceding-sibling::productguaranteedata[producttypes/option[@id='A']='selected'])+1"/>
    </xsl:if>
</xsl:if> 
```

# c++ - 过滤 getline 收到的输入

> ID：15160788
> 
> 赞同：0
> 
> 时间：2013-03-01T15:05:37.190
> 
> 标签：c++, getline

```
#include <iostream>
#include <string>
#include <cstring>
#include <fstream>
using namespace std;

int main() {

string firstFile, secondFile, temp;

ifstream inFile;
ofstream outFile;

cout << "Enter the name of the input file" << endl;
cin >> firstFile;

cout << "Enter the name of the output file" << endl;
cin >> secondFile;

inFile.open(firstFile.c_str());
outFile.open(secondFile.c_str());

while(inFile.good()) {  

    getline(inFile, temp, ' ');

        if (   temp.substr(0,4) != "-----"
            && temp.substr(0,5) != "HEADER" 
            && temp.substr(0,5) != "SUBID#"
            && temp.substr(0,5) != "REPORT"
            && temp.substr(0,3) != "DATE"
            && temp             != ""
            && temp             != "") 
        {
            outFile << temp;
        }
}

inFile.close();
outFile.close();

return 0;   
} 
```

大家好。我正在尝试从文本文件中输出不符合控制结构中标准的所有行——即没有空行、没有符号等。但是，当我运行此代码时，它会输出所有内容，而不考虑我的具体要求。如果有人能告诉我我做错了什么，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:09:18.980

If you look at a reference [such as this](http://en.cppreference.com/w/cpp/string/basic_string/substr) you will see that the second argument to `substr` is *the number of character* not the ending position.

This means that e.g. `temp.substr(0,5)` might return `"HEADE"` which is indeed not equal to `"HEADER"`. This means that all non-empty string will be output.

Also note that right now, you don't actually read *lines* but *words* as you separate the input on space.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:19:23.580

短版（C++11）：

```
const std::vector<std::string>> filter {
    {"-----"}, {"HEADER"}, ... }; // all accepted line patterns here

while(getline(inFile, temp)) {
    for(const auto& s: filter)
        if (s.size() == temp.size() &&
            std::equal(s.begin(), s.end(), temp.begin()))

            outFile << temp; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:26:19.010

当您多次重复相同的操作时，这表明您需要一个函数：

```
bool beginsWith( const std::string &test, const std::string &pattern )
{
   if( test.length() < pattern.length() ) return false;
   return test.substr( 0, pattern.length() ) == pattern;
} 
```

首先你可以单独测试它，然后你的条件会更简单，更不容易出错：

```
if ( !beginsWith( temp,  "-----" )
      && !beginsWith( temp, "HEADER" )
      && !beginsWith( temp, "SUBID#" )
      && !beginsWith( temp, "REPORT" )
      && !beginsWith( temp, "DATE" )
      && temp != "" ) 
```

# php - Couchbase JSON 结构模型

> ID：15160789
> 
> 赞同：0
> 
> 时间：2013-03-01T15:05:38.510
> 
> 标签：php, database, json, couchbase

我想使用面向 couchbase json-document 的工作。但我不知道存储和构造数据并在以后检索它的最佳方式是什么。

是否有任何教程可以开始（couchbase.com 上的学习资源没有帮助）？

我正在使用 PHP 访问 couchbase。我有以下示例：

```
(new document)
user1
{
"uid":1,
"name":"marius"
}

(new document)
planet1
{
"pid":1,
"user_uid":1,
"name":"earth"
}

(new document)
user2
{
"uid":2,
"name":"anyone"
}

(new document)
planet2
{
"pid":2,
"user_uid":2,
"name":"saturn"
} 
```

现在将这些文档设置（插入）到数据库中的最聪明的方法是什么，以及如何通过选择获取（选择）文档。

用 SQL 说，我想 -> **SELECT * FROM user,planet WHERE user.uid=1 AND planet.user_uid=1**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:17:13.857

Couchbase 以不同于关系数据库的方式存储数据。

从 Couchbase 中获取数据的主要方法有两种：

**键/值**。这意味着您给您的文档一个键来查询，然后显然该值将是整个文档。所以对于用户：

```
 user = couch.get(123) 
```

这将返回用户 ID 123 的整个文档。

**意见**。您可以使用 map/reduce 函数在 Couchbase 中编写视图。很酷的是，这些视图可以以与 CouchDB 中的视图类似的方式访问，因此您可以执行排序和限制等操作。 [http://wiki.apache.org/couchdb/HTTP_view_API#Querying_Options](http://wiki.apache.org/couchdb/HTTP_view_API#Querying_Options)

在您的 Couchbase 门户中查看设计文档/视图。当你写一个它会给你一个 URL 来测试你的 map/reduce 东西。然后，您可以将参数添加到 URL 以进行额外的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:21:25.027

没有通用的方法来说明您的文档应该如何设计。它确实取决于您的应用程序的特性。写入与读取比率？数据是如何消耗的等等。凭借在沙发上使用视图转换数据的优势，我想您可以制作更多“通用”文档并创建特定视图来转换文档以适合您的用例。当然不是您应该应用于所有用例的解决方案（不要将其视为银弹设计）。

一个经典的例子是博客例子。您应该将评论存储在帖子中还是提取评论并自己驻留并提供参考？这取决于特性。有一些评论更常见还是通常有很多评论？

另一个样本。如果您存储订单文档怎么办。客户应该是订单的一部分还是客户的订单？可以两者兼而有之吗？是的，它可以。我会说，对于文档数据库，您需要对数据重复更加开放。难道客户文档仍然作为客户的“当前视图”存在，他的所有数据和订单都包含客户快照的片段；对应用程序中的订单上下文和一些概述有用，然后使用对实际客户文档的引用？大概。但同样，这取决于您将如何使用数据。

关于 SQL 翻译： http: [//www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-sql.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-sql.html)

# database - 如何在父表中存储记录的ID而不是文本

> ID：15160790
> 
> 赞同：1
> 
> 时间：2013-03-01T15:05:39.867
> 
> 标签：database, database-design, relational-database, database-schema

我必须从用户那里获得关于他们技能的意见。我有一个以 id 作为主键的技能表。在另一个表中，我将用户 ID 和技能 ID 存储为多对多关系。现在的问题是我怎么知道用户输入的技能已经在我的技能表中？因为我必须将技能 ID 放在多对多关系表中。我是每次运行一个 select 语句还是有一些有效的解决方案可用？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:09:19.160

这个问题没有一步到位的解决方案。首先，您需要检查技能表中是否存在技能并获取 ID，如果不存在则插入并获取 ID。然后在您的 PeopleSkills 表中插入一行，其中包含人员的 ID 和技能...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:34:51.830

> 我怎么知道用户输入的技能已经在我的技能表中？

在**并发**环境中，您无法知道这一点。即使您执行 SELECT，也只会告诉您在 SELECT 执行时行是否存在 - 它不会告诉您该行**现在**是否存在。例如，即使 SELECT 返回一个空结果，并发事务也可能在您收到 SELECT 结果的几毫秒内插入了该行。

所以你要么大幅减少并发性（例如通过表锁），要么学会忍受它......

## 当只需要 INSERT 时

我建议您简单地尝试 INSERT（不带 SELECT），然后忽略可能的 PRIMARY KEY 违规¹。

如果您执行了单独的 SELECT 和 INSERT 步骤，您仍然必须为 PK 违规做好准备，因为并发事务可以在您的 SELECT 之后但在您的 INSERT 之前执行 INSERT（并提交）。那么，为什么要首先使用 SELECT 呢？

## 当需要 INSERT 或 UPDATE 时

如果联结表包含除 FK 字段之外的其他字段，那么您可能希望将它们更新为新值，因此您必须首先执行 SELECT 以确定该行是否需要插入或更新。

在这种情况下，请考虑使用 SELECT ... FOR UPDATE（或等效语法）提前锁定行。²或者，一些 DBMS 在单个命令中提供“插入或更新”（又名“UPSERT”）（例如：MySQL [INSERT ... ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.6/en/insert-on-duplicate.html)）。

* * *

*¹但要小心**只**忽略 PK 违规 - 不要只是盲目地“吞下” FK 或 CHECK 违规等......*

*²为了避免在您有机会更新它之前将其删除（仍然可能违反 INSERT PK）。更糟糕的是，并发事务可能会更新行，让您的事务默默地覆盖其他事务的值，而不会意识到它们曾经存在过。*

# authentication - Spring Security：在我的 CRM webapp 和我的 Front webapp 之间共享安全性

> ID：15160791
> 
> 赞同：1
> 
> 时间：2013-03-01T15:05:40.083
> 
> 标签：authentication, spring-security, entry-point

我有 2 个不同的 webapp：

*   向办公室用户显示客户简历的 CRM 网络应用程序
*   面向客户用户的门户网站应用程序

我的 CRM webapp 使用`LDAPManager`和`InMemoryManager`的组合`BasicAuthenticationFilter`，`BasicAuthenticationEntryPoint` 我的门户使用带有标准的经典 JDBC 管理器`UsernamePasswordAuthenticationFilter`

现在，我需要从我的 CRM webapp 透明地访问我的门户。

例如，我在办公室工作，使用 CRM webapp。一位客户打电话给我，询问有关 Portal 中提到的内容的解释。

我可以让办公室用户从 CRM 客户帐户页面中的 http 链接以客户身份访问门户。

所以我会绕过我`LoginUrlAuthenticationEntryPoint`并直接访问客户帐户。

在迈克尔帮助后编辑，我意识到我需要跟踪哪个 CRM 用户访问哪个门户帐户：
我的问题是：
~~-我应该使用`PreAuthenticatedManager`还是`RunAsManager`？
- 我需要申报第二个`EntryPoint`吗？
- 怎么样`AuthenticationFilters`？~~
- 是否可以在我的新门户 AbstractPreAuthenticatedProcessingFilter 中恢复从我的 CRM webapp 验证的用户 BASIC？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:10:51.010

从您的解释中，我有以下假设/结论：

1）CRM用户存储库和门户用户存储库有不同的用户

2) CRM 用户不应该知道门户用户密码

我认为您不需要使用 RunAsManager。（当您使用 RunAsManager 时，这意味着您首先在门户中以 CRM 用户身份进行身份验证，然后将身份验证替换为门户用户身份验证。我认为您不能针对门户用户存储库对 CRM 用户进行身份验证。）

我建议创建自己的“AuthenticateAs”功能：当 CRM 用户按下门户用户的 CRM 页面中的链接时，它将在门户中作为门户用户进行身份验证，而无需提供密码。

这个怎么运作？

1) 当 CRM 用户点击链接时，带有加密门户用户名的参数将添加到 URL。

2) 当请求以加密的门户用户名访问门户应用程序时，新创建的 PreAuthenticatedProcessingFilter 解密用户名并对用户进行身份验证

就是这样 ：）

几个评论：

1）请使用AES-258算法加密/解密用户名

2) 请确保加密/解密的密钥不能被 HTTP 访问

3）您可以为您的 PreAuthenticatedProcessingFilter 扩展 AbstractPreAuthenticatedProcessingFilter

4) 我强烈建议在门户应用程序中创建两个角色：USER_WRITE_ROLE 和 USER_READ_ROLE。当 CRM 用户使用“AuthenticateAs”身份验证访问时 - 它应该获得 USER_READ_ROLE。当门户用户使用常规身份验证访问时 - 它应该获得 USER_WRITE_ROLE。

5）您应该考虑CRM用户将如何为门户用户执行注销（否则他总是会在第一个用户上工作）。我能想到的最简单的方法 - PreAuthenticatedProcessingFilter 应该处理每个请求（即使它已通过身份验证），并且它是否包含带有用户名的参数以清理门户用户会话并执行新的身份验证。

请告诉我您对该建议的看法，并告诉我您是否需要任何其他说明。

最好的祝福，

迈克尔

PS 在编辑问题后添加。在门户上跟踪 CRM 用户的最简单方法是将附加加密参数添加到带有 CRM 用户名的 URL

# android - 如何检测用户从哪个应用返回到您的应用？

> ID：15160795
> 
> 赞同：1
> 
> 时间：2013-03-01T15:05:48.753
> 
> 标签：android

用户在我的应用程序中按下 URL，该 URL 将在移动浏览器中打开。

**当用户从移动浏览器返回到我的应用程序时，我是否可以在我的应用程序中检测到？**

许多用户会简单地阅读 URL 的内容并按下返回以返回我的应用程序。

测试用例：

1.  用户点击 URL
2.  手机浏览器打开网址
3.  用户触摸 BACK 按钮
4.  应用程序检测到用户从移动浏览器返回到应用程序

如果我没有很好地解释这一点，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:17:15.433

我建议您使用[startActivityForResult](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)启动 URL 。然后，当用户返回到您的应用程序时，[onActivityResult](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)将被调用，并且如果 RequestCodes 对齐您就知道它是 Web 浏览器。

有关更多信息，请查看：http: [//developer.android.com/reference/android/app/Activity.html#StartingActivities](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)

# android - Android - 无法从 XML 获取资源

> ID：15160802
> 
> 赞同：1
> 
> 时间：2013-03-01T15:06:11.673
> 
> 标签：android, xml

Android - 获取资源`XML`

你好，

我正在为问答游戏开发一个android应用程序，游戏有24个问题，每个问题都有一个`String`（问题）和四个ImageButton `(answer), when user select the correct`ImageButton`，然后他们转到下一个问题。

但问题是，选择第一个正确答案后，屏幕会刷新一个新问题和一组新图像，但它会卡在那里，无论我点击什么，它都不会转到下一个问题。我已附上我的代码，任何帮助表示赞赏！

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_new_game);

// set variables
int fourImageId[] = { R.id.1_4a, R.id.1_4b,R.id.1_4c, R.id.1_4d };
questionText = (TextView) findViewById(R.id.question1);
questionList = getResources().getStringArray(R.array.question);
correctAnswerIdList = ListOfImages.getListOfCorrectImages();
imageIdList = ListOfImages.getListOfImages(); //two dimension array

// give values to four image buttons
for (int i = 0; i < 4; i++) {
    fourImages[i] = (ImageButton) findViewById(fourImageId[i]);
    final int temp = fourImageId[i];
    fourImages[i].setOnClickListener(new View.OnClickListener() {
        @Override               
        public void onClick(View v) {
            if (temp==correctAnswerIdList[index]){
                questionText.setText(questionList[index]);
                for (int i = 0; i < imageIdList[index].length; i++) {
                    fourImages[i].setImageResource(imageIdList[index][i]);}
            index++;
        }
    }
});} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:43:14.783

设置所有按钮单击侦听器后，您的临时变量永远不会改变。因此，该`if (temp==correctAnswerIdList[index])`语句只会成功执行一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:12:05.203

您的 for (int i = 0; i < 4; i++) 语句需要为每个新问题执行一次。现在它只执行一次，设置新的问题和图像按钮，但你的应用程序不知道从那里去哪里。

# maven - 在发布期间同时运行默认配置文件和生产配置文件

> ID：15160808
> 
> 赞同：1
> 
> 时间：2013-03-01T15:06:40.670
> 
> 标签：maven

我的构建如下：

第一个是正常构建（mvn clean install）另一个是属性激活的配置文件（mvn clean install -Dbuild=prod）

第一个部署到 Nexus。第二个配置文件部署到生产服务器。

如何在 Maven 发布周期中运行这两个版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:12:11.303

我会将 nexus-deploy 分离到不同的配置文件并使用多个目标执行：

创建一个不同的配置文件来满足正常的构建并在构建服务器上执行两个目标，如下所示：

```
mvn clean install -Dbuild=prod -Pdeploy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:11:53.080

mabe [Cargo](http://cargo.codehaus.org/)可以做到这一点。以 Appfuse 为例，它用于`mvn jetty:run-war`部署在 jetty 并`mvn cargo:start`开始部署到 tomcat

# java - 为什么 java 在我的变量声明中抱怨原始类型？

> ID：15160829
> 
> 赞同：1
> 
> 时间：2013-03-01T15:08:04.717
> 
> 标签：java, data-structures

```
public class Table<Key extends Comparable<Key>, Value> {

/*
* The purpose of entry is to glue together a key and a value
*
* The class that we use for Key has to implement comparable
* */
private class Entry<Key extends Comparable<Key>, Value> implements Comparable<Entry>
{
    Key key;
    Value value;

    public Entry(Key k, Value v)
    {
        key = k;
        value = v;
    }

    public int compareTo(Entry<Key,Value> entry)
    {
        return key.compareTo(entry.key);
    }
}

private BST<Table.Entry<Key, Value>> tree = new BST<Table.Entry<Key, Value>>();

//must supply public methods for the three operations

public Value lookUp(Key key)
{
    Entry<Key, Value> e = new Entry<Key, Value>(key, null);

    return tree.search(e).value;
}

public boolean insert(Key k, Value v)
{
    return tree.insert(new Entry<Key, Value>(k, v));
}

public boolean delete(Key k)
{
    //we haven't written a delete method for bst yet.
    return tree.delete(new Entry(k, null));
}
} 
```

以上是我的教授在课堂上讨论的表抽象数据类型的类声明。我一直在试图弄清楚为什么 Java 会给我以下错误消息

> 在原始类型上给出的类型参数

当我在这里声明我的变量时

```
private BST<Table.Entry<Key, Value>> tree = new BST<Table.Entry<Key, Value>>(); 
```

java中的原始类型是什么？我们已经讨论过编写泛型类。与此有关吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T15:15:00.537

您的表类需要通用参数，但您在此处将其作为原始类型引用：

> 私有 BST< **Table** .Entry> 树 = 新 BST< **Table** .Entry>();

您需要为其提供通用参数，如下所示：

```
private BST<Table<Key, Value>.Entry<Key, Value>> tree = 
    new BST<Table<Key, Value>.Entry<Key, Value>>(); 
```

正如其他人所指出的那样，其标准将泛型参数定义为一个字母字符，因此`K`代替`Key`, 而`V`代替`Value`. 它使阅读和理解代码变得***更加***容易，并有助于避免与真实类型名称混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:11:52.617

`Entry`是原始类型，而`Entry<Key, Value>`不是。o，在您的代码中，代码段：

```
public boolean delete(Key k)
{
    //we haven't written a delete method for bst yet.
    return tree.delete(new Entry(k, null));
} 
```

包括原始类型。

# hibernate - GWT RPC, Spring, JPA/Hibernate - null on callback method

> ID：15160832
> 
> 赞同：1
> 
> 时间：2013-03-01T15:08:24.293
> 
> 标签：hibernate

this is my first app. I have problem between gwt (rpc) and my db (MySQL). JUnit tests run great. Here is my code: [https://github.com/sutakjakub/game](https://github.com/sutakjakub/game)

client package:

```
UserService.Util.getInstance().addUser("kuba","tajne",
new AsyncCallback<Long>() {

@Override
public void onFailure(Throwable arg0) {
Window.alert("get se nezdaril" + arg0);

}

@Override
public void onSuccess(Long id) {
if(id == null){
Window.alert("null");
}else{
Window.alert("zapsano do db; id=" + id);
}

}

}); 
```

This method must return id of new user but it return null (in method *onSuccess(Long id)*).

I dont have some error logs. I tried almost everything. Thank you very much for some idea or solution.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:06:03.710

您的 saveOrUpdate 方法 (GenericHibernateJpaDao) 不会返回更新的实体：

```
@Override
public <ENTITY extends AbstractBussinessObject> ENTITY saveOrUpdate(ENTITY o) {
  if(o.getId() == null){
    getEntityManager().persist(o);
  }else{
    getEntityManager().merge(o);
  }
return o;
} 
```

应该变成：

```
return getEntityManager().merge(o); 
```

如果你想使用persist()，那么你可能也应该阅读[这个](https://stackoverflow.com/questions/9732453/jpa-how-to-returns-an-auto-generated-id-when-persist-an-object)。

# xslt - 为什么要在中间件中执行转换？

> ID：15160836
> 
> 赞同：2
> 
> 时间：2013-03-01T15:08:32.527
> 
> 标签：xslt, architecture, middleware

远程系统通过中间件 (MQ) 向我的应用程序发送消息。

在中间件中，转换（使用 xslt）应用于此消息。它只是重新格式化，没有丰富或验证。我的系统是这个转换后消息的唯一消费者，xslt 由我的团队维护。

所有这一切的原作者早就走了，我想知道为什么他认为在中间件而不是我的应用程序中进行转换是个好主意。我看不到将其移至中间件的价值，它使其不那么明显并且不那么易于维护。

另外我会认为 xslt 将由消息生产者而不是消费者维护。

这种架构有什么指导方针吗？他在这里做对了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:21:15.227

在中间件中修改消息体是个坏主意。这会对可维护性和性能产生负面影响。

这样做的唯一原因是试图连接两个不兼容的端点而不修改它们。这将需要目标端点理解源内容的转换。

委托中间件执行转换的动机可能是一种政治动机（端点由不同的团队维护，管理层不愿接触端点代码等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T17:01:49.277

如果您正在尝试创建一个应用程序架构，其中需要以不同格式向不同用户提供数据，并且可能以不同格式接收数据（想想天气预报或体育新闻），那么创建一个能够进行转换的中心在许多不同的格式之间非常有意义。（是否称其为“中间件”取决于您。）也许您的前任考虑过这种架构，但它从未变得足够大或复杂到足以证明设计的合理性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T16:28:57.780

从架构的角度来看，向消费者提供人类可读格式（例如 xslt）的消息或内容是一个好主意，除非使用二进制格式可以显着提高性能。

在人类可读格式的情况下，只需查看消息以验证它是否正确。在二进制情况下，必须开发一种实用程序将二进制消息转换为人类可读的形式。这种实用程序的不同实现者可能并不总是按预期解释二进制形式，它可能变成关于谁或什么是正确的指责练习。

此外，如果您正在查看队列中的内容，如果消息采用人类可读的格式，则更容易理解它。

从人类可读的格式开始并让应用程序首先运行并没有什么坏处。然后分析应用程序，看看从整体上看，转换例程是否是重要的延迟来源。如果是，则转到二进制格式。

最好让原始消息生产者提供 xslt 格式的消息，但他们必须有充分的理由去做他们所做的事情。例如，潜在的其他消费者、xslt 当时不存在、资源限制等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T03:48:30.110

阅读***[`adaptor`](http://en.wikipedia.org/wiki/Adapter_pattern)***设计模式，您将了解当前系统架构的意图。

# java - 为 Flashcard 程序创建多个包含相同架构的 SQLite 数据库，这是不好的做法吗？

> ID：15160842
> 
> 赞同：1
> 
> 时间：2013-03-01T15:08:50.580
> 
> 标签：java, sqlite

我目前正在尝试提出一种可以导入/导出数据集的方法。我需要分享一副抽认卡。每张抽认卡包括：

*   正面文字`string`，
*   反转文本`string`，
*   eFactor `float`/ `real`,
*   区间`integer`，
*   数数`integer`

我的想法是我希望用户创建一组抽认卡并能够共享该组。这个概念与 .deck/.anki 文件的概念非常相似`Anki`。目前我正在使用 SQLite3 来存储 flaschard 数据。我曾考虑使用 XML，但我觉得 SQL 是一种更合乎逻辑的方法。

我最初的计划是允许用户创建多个 SQLite DB 文件，因为我觉得这种方法有一些关键优势。

*   1) 共享 db 文件比从 SQLite 数据库导出表然后最终共享文件更容易。
*   2）如果用户想删除deck，只需删除db文件即可。

至于负面因素：我可以理解，创建多个 SQLite fb 文件可能被视为资源浪费或“混乱”。

这种方法是可行的还是会被认为是不好的编程习惯？我对解决这个问题的不同方法持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:11:40.960

我认为每个卡组有一个单独的 .db 文件是完全可以接受的。正如您所提到的，它可以更轻松地添加/移除套牌。共享套牌也简单得多——您只需发送一个文件。这比打开一些“主卡组”然后导出您希望共享的卡组要容易得多。

每个套牌之间不会有太多重复的数据（一些模式信息），所以这不是很大的浪费。但是，如果您更改方案，*则*必须小心卡组内的版本控制。对于多个文件，这可能有点棘手。

# php - 高级时间戳计算（偶数行和奇数行总计）

> ID：15160843
> 
> 赞同：0
> 
> 时间：2013-03-01T15:08:58.230
> 
> 标签：php, mysql, date, datetime, time

我正在创建一个个人时间卡系统作为一个宠物项目，除了每天和每周的总时间外，我已经完成了所有工作。假设我使用 while 循环从我的数据库中提取了 4 次拳：

```
[1] 2013-03-01 07:00:00 - IN - (FOR DAY)
[2] 2013-03-01 12:00:00 - OUT (TO LUNCH)
[3] 2013-03-01 12:30:00 - IN (FROM LUNCH)
[4] 2013-03-01 15:30:00 - OUT (FOR DAY) 
```

我的问题是我将如何创建一个总计 8 小时的运行总计？我已经考虑了好几天了，但我的脑海中没有合乎逻辑的解决方案。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:55:48.370

您可能应该*更改*表的结构。基本思想是工作周期的概念，它需要一个开始时间和一个结束时间。当前的结构将该事实分成两行。改为使用一排。

```
work_periods
time_in              time_out
--
2013-03-01 07:00:00  2013-03-01 12:00:00
2013-03-01 12:30:00  2013-03-01 15:30:00 
```

如果你有这样的表，你可以很容易地用 timestampdiff() 得到分钟的差异。

```
select time_in, time_out, 
    timestampdiff(minute, time_in, time_out) elapsed_time
from work_periods; 
```

您可以从现有表中返回相同的数据。我认为您应该只将其作为一种临时方法。这种结构使得很难识别缺少“out”的“in”和缺少“in”的“out”。

```
create table work_periods (
  work_ts datetime not null,
  in_or_out varchar(5) not null,
  primary key (work_ts)
  );

insert into work_periods values
('2013-03-01 07:00:00', 'IN'),
('2013-03-01 12:00:00', 'OUT'),
('2013-03-01 12:30:00', 'IN'),
('2013-03-01 15:30:00', 'OUT'); 
```

每个“in”的“out”是最早的“out”，比“in”晚。

```
select wp1.work_ts time_in,
       (select min(wp2.work_ts) 
        from work_periods wp2
        where wp2.work_ts > wp1.work_ts
          and wp2.in_or_out = 'OUT') time_out
from work_periods wp1
where wp1.in_or_out = 'IN'; 
```

如果让我选择，我会

*   从最后一个 SELECT 语句构建一个可更新的视图，
*   更新应用程序代码以使用视图，最后
*   用这个答案开头的基表替换视图。

# c# - HttpClient Post deserialize error on SalesForce RestApi

> ID：15160845
> 
> 赞同：1
> 
> 时间：2013-03-01T15:09:06.763
> 
> 标签：c#, json, salesforce, httpclient

I'm trying to use HttpClient to POST a new Account via SalesForce RESTApi, but I'm receiving the following error:

> message: "Can not deserialize SObject out of VALUE_STRING token at [line:1, column:1]". errorCode: "JSON_PARSE_ERROR".

I'm using the same json for WebRequest and HttpClient tests. With WebRequest, it works well.

Here is my code with HttpClient:

```
 var uri = "https://na15.salesforce.com/services/data/v27.0/sobjects/Account";

        var acc = new Account();
        acc.Name = "RestAPIHttpClient";

        var ser = new JavaScriptSerializer();
        var json = ser.Serialize(acc);

        HttpClient client = new HttpClient();

        client.DefaultRequestHeaders.Add("Authorization", "Bearer " + binding.SessionHeaderValue.sessionId);

        var response = await client.PostAsJsonAsync(uri, json);
        var stringresponse = await response.Content.ReadAsStringAsync();
        Console.WriteLine(stringresponse); 
```

The account class that im serializing is just that simple:

```
 private class Account
    {
        public string Name { get; set; }
    } 
```

**UPDATE:**

I changed the code to use PostAsync besides PostAsJsonAsync, then i added the JsonFormatter at the Content and now it is working. Would be great to know why PostAsJsonAsync doesn't work.

```
System.Net.Http.Formatting.MediaTypeFormatter jsonFormatter = 
    new System.Net.Http.Formatting.JsonMediaTypeFormatter(); 
System.Net.Http.HttpContent content = 
    new System.Net.Http.ObjectContent<Account>(acc, jsonFormatter);

var response = await client.PostAsync(uri, content); 
```

# r - Logarithmic mean of vector

> ID：15160847
> 
> 赞同：1
> 
> 时间：2013-03-01T15:09:13.567
> 
> 标签：r, mean

To follow the exact methodology presented in an article I would like to calculate the Logarithmic mean of a data vector. I did not find any functions for this in R, or any previous discussions. The case for 2 numbers is clear, but I could not work out the most efficient method to calculate the log mean for a large vector of numbers. Any suggestions?

```
# Calculating different types of means

# some data
dat <- c(0.008845299, 0.040554701)

# arithmetic mean
arith.m <- mean(dat)

# logarithmic mean
# http://en.wikipedia.org/wiki/Logarithmic_mean
log.m <- (dat[1] - dat[2])/(log(dat[1])-log(dat[2]))

# geometric mean
# http://stackoverflow.com/questions/2602583/geometric-mean-is-there-a-built-in
geo_mean <- function(data) {
  log_data <- log(data)
  gm <- exp(mean(log_data[is.finite(log_data)]))
  return(gm)
}

geo.m <- geo_mean(dat)

# show arithmetic > logarithmic > geometric
arith.m; log.m; geo.m

# how to calculate logarithmic mean for a vector?
dat.n <- c(0.008845299, 0.040554701, 0.047645299, 0.036654701, 0.017345299, 0.018754701, 0.032954701, 0.043145299, 0.026845299, 0.033054701, 0.025554701) 
```

UPDATE with calculation that strips out 0 values (BUT, as pointed out below is this valid?):

```
# add a very low number (generally considered zero in R)
nzero <- 1.940656e-324
dat.n <- c(dat.n, nzero)

# arithmetic mean
arith.m <- mean(dat.n)

geo_mean <- function(data) {
  log_data <- log(data)
  gm <- exp(mean(log_data[is.finite(log_data)]))
  return(gm)
}

geo.m <- geo_mean(dat.n)

lmv <- function(x){
  ddlog <- function(x){
    d <- rep(0, length(x))
    for (i in 1:length(x)){
      d[i] <- prod(x[i] - x[-i])
    }
    sum(log(x)[is.finite(log(x))]/d[is.finite(log(x))])
  }
  n <- length(x[which(x>0)]) - 1
  ((-1)^(n+1)*n*ddlog(x))^(-1/n)
}

log.m <- lmv(dat.n)

# show arithmetic > logarithmic > geometric
arith.m; log.m; geo.m 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T15:47:21.547

其次是 wiki（推广到 (n+1) 个值）：

[http://en.wikipedia.org/wiki/Divided_difference#Expanded_form](http://en.wikipedia.org/wiki/Divided_difference#Expanded_form)

[http://en.wikipedia.org/wiki/Logarithmic_mean#Mean_value_theorem_of_differential_calculus_2](http://en.wikipedia.org/wiki/Logarithmic_mean#Mean_value_theorem_of_differential_calculus_2)

```
ddlog <- function(x){
  d <- rep(0, length(x))
  for (i in 1:length(x)){
    d[i] <- prod(x[i] - x[-i])
  }
  sum(log(x)/d)
}

# ddlog is to get divided difference of the logarithm.

lmv <- function(x){
  n <- length(x) - 1
  ((-1)^(n+1)*n*ddlog(x))^(-1/n)
}

R > a <- c(0.008845299, 0.040554701, 0.047645299, 0.036654701, 0.017345299, 0.018754701, 0.032954701, 0.043145299, 0.026845299, 0.033054701, 0.025554701)
R > 
R > lmv(a)
[1] 0.0277 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T15:14:04.140

尝试这个：

```
> -diff(dat.n)/-diff(log(dat.n))
 [1] 0.02082356 0.04400483 0.04191009 0.02580711 0.01804083 0.02519117 0.03782146 0.03435320 0.02984241
[10] 0.02914404 
```

# oracle - 在 PL/SQL 包中重用查询结果

> ID：15160848
> 
> 赞同：1
> 
> 时间：2013-03-01T15:09:14.907
> 
> 标签：oracle

我在编写 SQL 查询时遇到了一些麻烦。在一个包函数中，我试图在其他两个查询中重用一个查询的结果。事情是这样的：

我的架构存储请求。每个请求涉及多个目的地。此外，每个请求都在另一个表 (Request_Detail) 中详细说明。此外，请求由其 ID 标识。

所以，我主要使用 3 个表。一个用于请求，另一个用于目的地，最后一个用于详细信息。这些表中的每一个都由 Request_Id 列索引。

我要优化的查询是用户想要查找所有请求，以及在两个日期之间发送的目的地和命令。

我想先查询 Request_Table 以获取所有 Request_id。然后，使用此 Request_Ids 列表查询命令表和目标表。

我找不到如何做到这一点...我不能使用 ref 游标，因为它们不能被获取两次...我只需要一些类似数组或类似列的变量来存储 Request_Ids，然后使用它变量两次或更多...

这是我要优化的原始查询：

```
 FUNCTION EXTRACT_REQUEST_WITH_DATE (ze_from_date DATE, ze_to_date DATE, x_request_list OUT cursor_type, x_destination_list OUT cursor_type,
                                        x_command_list OUT cursor_type) RETURN VARCHAR2 AS

        my_function_id  VARCHAR2(80) := PACKAGE_ID || '.EXTRACT_REQUEST_WITH_DATE';
        my_return_code  VARCHAR2(2);
    BEGIN

        OPEN x_request_list FOR
        SELECT NAME,DESTINATION_TYPE, 
        SUCCESS_CNT, STATUS, STATUS_DESCRIPTION,
        REQUEST_ID, PARENT_REQUEST_ID, DEDUPLICATION_ID, SUBMIT_DATE, LAST_UPDATE_DATE
        FROM APP_DB.REQUEST_TABLE
        WHERE SUBMIT_DATE >= ze_from_date
            AND SUBMIT_DATE < ze_to_date
        ORDER BY REQUEST_ID;

        OPEN x_destination_list FOR
        SELECT REQUEST_ID, DESTINATION_ID
        FROM APP_DB.DESTINATION_TABLE
        WHERE SUBMIT_DATE >= ze_from_date
            AND SUBMIT_DATE < ze_to_date
        ORDER BY REQUEST_ID;

        OPEN x_command_list FOR
        SELECT SEQUENCE_NUMBER, NAME, PARAMS, DESTINATION_ID 
        SEND_DATE, LAST_UPDATE_DATE,PROCESS_CNT, STATUS, STATUS_DESCRIPTION,
        VALIDITY_PERIOD, TO_ABORT_FLAG 
        FROM APP_DB.REQUEST_DETAILS_TABLE
        WHERE SUBMIT_DATE >= ze_from_date
            AND SUBMIT_DATE < ze_to_date
        ORDER BY REQUEST_ID, DESTINATION_ID, SEQUENCE_NUMBER;

        return RETURN_OK;

    END EXTRACT_REQUEST_WITH_DATE; 
```

如您所见，我们对所有 3 个查询使用相同的谓词（即 SUBMIT_DATE 条件）。我认为可能有某种方法可以通过获取 REQUEST_ID 然后在其余查询中使用它们来优化它。

谢谢你听我说！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:54:02.587

根据您发布的查询，我只需将`SUBMIT_DATE`索引添加到`REQUEST_TABLE`，`DESTINATION_TABLE`然后保持`REQUEST_DETAILS_TABLE`您的 SQL 不变。所有三个查询都将得到优化，运行速度与匹配值表一样快`REQUEST_ID`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:29:54.520

所以......我发现这种方法似乎足够有效：

首先，定义**全局**类型以用作数组。这是代码：

对象（记录）类型：

```
create or replace 
TYPE "GENERIC_ID" IS OBJECT(ID VARCHAR2(64)); 
```

GENERIC_ID 的可变大小数组

```
create or replace 
TYPE "GENERIC_ID_ARRAY" IS TABLE OF "GENERIC_ID"; 
```

然后，通过 FOR LOOP 中的 extend() 完成填充。生成的数组可以用作 SQL 请求中的表，使用：

```
TABLE(CAST(my_array_of_ids AS GENERIC_ID_ARRAY) 
```

谢谢，

# plugins - 你如何在 Compass 中为 Symfony2 包含一个插件（通过 Assetic）？

> ID：15160854
> 
> 赞同：0
> 
> 时间：2013-03-01T15:09:19.473
> 
> 标签：plugins, symfony-2.1, compass-sass, assetic

我已经安装了 compass-rgbapng 插件，但正在努力包含用于 Symfony2 的插件。

我需要将其添加`require "rgbapng"`到指南针配置文件中，但我不确定如何通过 Symfony2 执行此操作。

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:49:48.583

我认为这样的事情`app/config/config.yml`应该会有所帮助：

```
# Assetic Configuration
assetic:
    filters:
        compass:
            plugins:
                - rgbapng 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T22:23:05.223

Assetic 的罗盘过滤器会查找一个名为`assetic.filter.compass.plugins`：

所以你可以在你的`app/config/config.yml`：

```
parameters:
    assetic.filter.compass.plugins:
        - rgbapng 
```

# virtual-machine - NumPad keys dont work

> ID：15160855
> 
> 赞同：3
> 
> 时间：2013-03-01T15:09:20.423
> 
> 标签：virtual-machine, virtualbox, ubuntu-9.10

I had this problem on the virtual box virtual machine running Ubuntu, that some times, the numpad keys worked and some times they didn't. I thought it was some bug, or some issue with the guest additions, or even that it was related to starting the virtual machine while the numpad led is activated.

Nothing like that. I though I could share the solution.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T15:09:20.423

The solution is quite simple:

System -> Preferences -> Keyboard -> Tab "Mouse Key" -> deactivate "Pointer can be controlled using the keypad".

And the numpad keys work fine.

Source: [https://forums.virtualbox.org/viewtopic.php?f=1&t=18023#p77983](https://forums.virtualbox.org/viewtopic.php?f=1&t=18023#p77983)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-24T08:33:35.647

当我在笔记本电脑上使用**Ubuntu 15.10**时也出现了同样的问题。

可以通过关闭此选项（鼠标键）简单地解决。

**num 键盘无法正常工作 ubuntu 15.10：**

[![在此处输入图像描述](../Images/5337705c8d90adb6f12781534ebf50a8.png)](https://i.stack.imgur.com/I3xEd.jpg)

希望这对虚拟机也有帮助。

# cuda - ABI如何定义GPU中的寄存器数量？

> ID：15160859
> 
> 赞同：2
> 
> 时间：2013-03-01T15:09:32.927
> 
> 标签：cuda

CUDA Compiler Driver NVCC [- 用于指导 GPU 代码生成的选项对](http://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html#options-for-steering-gpu-code-generation)我来说是模棱两可的：

> 小于 ABI 要求的最小寄存器的值将被编译器提高到 ABI 最小限制。

`__global__`ABI 是否对使用的寄存器数量和`__device__`功能有任何标准或限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:50:48.987

我认为（现在找不到参考）CUDA ABI 至少需要 16 个寄存器。因此，如果您指定较低的寄存器计数（例如，使用 -maxrregcount），编译器会将指定的限制提高到 ABI 要求的最小值，并打印一条建议消息，说明它这样做了。至于每个线程可用的 32 位寄存器的最大数量，取决于 GPU 架构：sm_1x 有 124 个寄存器，sm_2x 有 63 个寄存器，sm_3x 有 254 个寄存器。

一般而言，ABI（应用程序二进制接口）是针对存储布局、向函数传递参数、将函数结果返回给调用者等架构的特定约定。ABI（包括 x86_64、ARM）通常为特定任务指定特定寄存器例如堆栈指针、函数返回值、函数参数等。由于 GPU 架构允许每个线程使用可变数量的寄存器，因此使用 ABI 需要存在最少数量的寄存器来填充这些定义的角色。如果我没记错的话，CUDA 引入了 3.0 版的 ABI，这是第一个支持 Fermi 级 GPU 的版本。

ABI 需要计算能力 2.0 或更高。较旧的 GPU 架构缺乏 ABI 所需的硬件功能。大多数较新的 CUDA 功能，例如设备端 printf() 和 malloc()，调用函数，单独编译等都依赖并需要使用 ABI，并且它默认用于编译器生成的 sm_20 代码和多于。您可以通过 -Xptxas -abi=no 禁用 ABI。我强烈建议不要这样做。

# c# - Image Source binding to file in local Storage

> ID：15160868
> 
> 赞同：1
> 
> 时间：2013-03-01T15:09:59.347
> 
> 标签：c#, wpf, image, xaml, windows-phone-8

In Windows Metro Apps (C#), I'm using a ValueConverter to pass an Image-Uri like this:

```
public class ProfileImage : IValueConverter {

    public Object Convert(Object value, Type targetType, Object parameter, String language) {

        if (value == null) {
            return "Common/images_profile/user.png";
        }

        return "ms-appdata:///local/" + (String)value;

    }

    public Object ConvertBack(Object value, Type targetType, Object parameter, String language) {
        return value;
    }

} 
```

XAML:

```
<Image x:Name="profileImage" Height="80" Width="80" Source="{Binding Path, Converter={StaticResource ProfileImage}}"/> 
```

The images are being downloaded async into localFolder.

I wanted to use this on Windows Phone 8 - but it doesn't show up any image.

```
var localFolder = ApplicationData.Current.LocalFolder;
StorageFile myFile = await localFolder.CreateFileAsync(
    UID + ".jpg",
    CreationCollisionOption.FailIfExists);

using (var s = await myFile.OpenStreamForWriteAsync()) {
    s.Write(imageBytes, 0, imageBytes.Length);
} 
```

is used for writing the Images to the LocalStorage.

If there's no content in `value`, the Image in `Common/images_profile/user.png` is being displayed properly. This one is in the package, not in the local Folder.

I need to know which format I have to use as return parameter to get the images displayed.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:41:46.707

我认为 URL 方案*ms-appdata:///*并不适用于任何地方。

我正在使用这个转换器来绑定来自隔离存储的图像：

```
public class PathToImageConverter : IValueConverter
{
    private static IsolatedStorageFile isoStorage = IsolatedStorageFile.GetUserStoreForApplication();

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        string path = value as string;

        if (string.IsNullOrEmpty(path))
            return null;

        if ((path.Length > 9) && (path.ToLower().Substring(0, 9).Equals("isostore:")))
        {
            using (var sourceFile = isoStorage.OpenFile(path.Substring(9), FileMode.Open, FileAccess.Read))
            {
                BitmapImage image = new BitmapImage();
                image.SetSource(sourceFile);

                return image;
            }
        }
        else
        {
            BitmapImage image = new BitmapImage(new Uri(path));

            return image;
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

对于绑定，您必须在您的 url 中使用*isostore:*前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:04:11.963

必须在这里遗漏一些东西..你为什么不使用 StorageFile.Path 而不是返回“return”ms-appdata:///local/”+（String）value;”

意识到它的#WP8 是另一回事。您仍然可以使用独立存储和 Silverlight Uri

# c++ - 链接 RL78/G13 的 C++ 应用程序：缺少符号

> ID：15160873
> 
> 赞同：0
> 
> 时间：2013-03-01T15:10:17.013
> 
> 标签：c++, linker, ld

我正在尝试为 Renesas RL78/G13 系列 MCU 构建 C++ 程序。我以前使用 IAR 工具链没有问题，但现在我想使用 GNU RL78 工具链，这样我就可以使用一些 Renesas 库。

我的问题是我现在无法让程序链接，似乎是因为缺少符号。任何建议将不胜感激。

这是链接器的控制台输出：

```
'Invoking: Linker'
'Building target:'
rl78-elf-ld -o "firmware_2.x" -T"C:\Projects\ms_monitor\firmware_2\HardwareDebug\firmware_2_HardwareDebug_auto.gsi" -T"C:\Projects\ms_monitor\firmware_2\HardwareDebug\LinkerSubCommand.tmp"    libfirmware_2.a  -M=firmware_2.map -e_PowerON_Reset -L"C:\Projects\ms_monitor\firmware_2\lib" -L"C:\Projects\ms_monitor\firmware_2\HardwareDebug" -L"C:\Renesas\e2studio\GNURL7~1.01-\rl78-elf\rl78-elf\lib" -L"C:\Renesas\e2studio\GNURL7~1.01-\rl78-elf\lib\gcc\rl78-elf\4.8-GNURL78_v13.01" --start-group -lstdc++ -lfirmware_2 -lgcc --end-group
rl78-elf-ld: section .vects loaded at [00000004,0000007f] overlaps section .vec loaded at [00000000,00000005]
libfirmware_2.a(gcrt0.o): In function `start':
(.text+0x2): undefined reference to `_stack'
libfirmware_2.a(gcrt0.o): In function `start':
(.text+0x9): undefined reference to `_datastart'
libfirmware_2.a(gcrt0.o): In function `start':
(.text+0xc): undefined reference to `_romdatastart'
libfirmware_2.a(gcrt0.o): In function `start':
(.text+0x11): undefined reference to `_romdatacopysize'
libfirmware_2.a(gcrt0.o): In function `start':
(.text+0x29): undefined reference to `_bssstart'
libfirmware_2.a(gcrt0.o): In function `start':
(.text+0x31): undefined reference to `_bsssize'
libfirmware_2.a(gcrt0.o): In function `start':
(.text+0x4c): undefined reference to `etext'
libfirmware_2.a(gcrt0.o): In function `start':
(.text+0x65): undefined reference to `exit'
libfirmware_2.a(gcrt0.o): In function `rl78_run_preinit_array':
(.text+0x69): undefined reference to `_preinit_array_start'
libfirmware_2.a(gcrt0.o): In function `rl78_run_preinit_array':
(.text+0x6c): undefined reference to `_preinit_array_end'
libfirmware_2.a(gcrt0.o): In function `rl78_run_init_array':
(.text+0x74): undefined reference to `_init_array_start'
libfirmware_2.a(gcrt0.o): In function `rl78_run_init_array':
(.text+0x77): undefined reference to `_init_array_end'
libfirmware_2.a(gcrt0.o): In function `rl78_run_fini_array':
(.text+0x7f): undefined reference to `_fini_array_start'
libfirmware_2.a(gcrt0.o): In function `rl78_run_fini_array':
(.text+0x82): undefined reference to `_fini_array_end'
./src/utilities/csv_loader.o: In function `CsvLoader_Create':
C:\Projects\ms_monitor\firmware_2\HardwareDebug/../src/utilities/csv_loader.cpp:75:(.text+0xe): relocation truncated to fit: R_RL78_DIR16S against `.LC0'
C:\Projects\ms_monitor\firmware_2\HardwareDebug/../src/utilities/csv_loader.cpp:75:(.text+0x18): relocation truncated to fit: R_RL78_DIR16S against `CsvLoader_Create::__PRETTY_FUNCTION__'
C:\Projects\ms_monitor\firmware_2\HardwareDebug/../src/utilities/csv_loader.cpp:75:(.text+0x1d): relocation truncated to fit: R_RL78_DIR16S against `.LC1'
C:\Projects\ms_monitor\firmware_2\HardwareDebug/../src/utilities/csv_loader.cpp:76:(.text+0x31): relocation truncated to fit: R_RL78_DIR16S against `.LC0'
C:\Projects\ms_monitor\firmware_2\HardwareDebug/../src/utilities/csv_loader.cpp:76:(.text+0x3b): relocation truncated to fit: R_RL78_DIR16S against `CsvLoader_Create::__PRETTY_FUNCTION__'
C:\Projects\ms_monitor\firmware_2\HardwareDebug/../src/utilities/csv_loader.cpp:76:(.text+0x40): relocation truncated to fit: R_RL78_DIR16S against `.LC2'
C:\Projects\ms_monitor\firmware_2\HardwareDebug/../src/utilities/csv_loader.cpp:77:(.text+0x56): relocation truncated to fit: R_RL78_DIR16S against `.LC0'
C:\Projects\ms_monitor\firmware_2\HardwareDebug/../src/utilities/csv_loader.cpp:77:(.text+0x60): relocation truncated to fit: R_RL78_DIR16S against `CsvLoader_Create::__PRETTY_FUNCTION__'
C:\Projects\ms_monitor\firmware_2\HardwareDebug/../src/utilities/csv_loader.cpp:77:(.text+0x65): relocation truncated to fit: R_RL78_DIR16S against `.LC3'
C:\Projects\ms_monitor\firmware_2\HardwareDebug/../src/utilities/csv_loader.cpp:78:(.text+0x79): relocation truncated to fit: R_RL78_DIR16S against `.LC0'
C:\Projects\ms_monitor\firmware_2\HardwareDebug/../src/utilities/csv_loader.cpp:78:(.text+0x83): additional relocation overflows omitted from the output
libfirmware_2.a(mcount.o): In function `_monstartup':
(.text+0x67b): undefined reference to `ffs'
libfirmware_2.a(printf.o): In function `_printf_r':
(.text+0x30): undefined reference to `_vfprintf_r'
libfirmware_2.a(printf.o): In function `printf':
(.text+0x75): undefined reference to `_vfprintf_r'
libfirmware_2.a(snprintf.o): In function `_snprintf_r':
(.text+0x8d): undefined reference to `_svfprintf_r'
libfirmware_2.a(snprintf.o): In function `snprintf':
(.text+0x165): undefined reference to `_svfprintf_r'
libfirmware_2.a(sprintf.o): In function `_sprintf_r':
(.text+0x4f): undefined reference to `_svfprintf_r'
libfirmware_2.a(sprintf.o): In function `sprintf':
(.text+0xbf): undefined reference to `_svfprintf_r'
libfirmware_2.a(vfiprintf.o): In function `_vfiprintf_r':
(.text+0x1bed): undefined reference to `_free_r'
libfirmware_2.a(vfiprintf.o): In function `_vfiprintf_r':
(.text+0x1c83): undefined reference to `_free_r'
libfirmware_2.a(wsetup.o): In function `__swsetup_r':
(.text+0xf8): undefined reference to `_free_r'
libfirmware_2.a(calloc.o): In function `calloc':
(.text+0x16): undefined reference to `_calloc_r'
libfirmware_2.a(fflush.o): In function `__sflush_r':
(.text+0x324): undefined reference to `_free_r'
libfirmware_2.a(findfp.o): In function `__sfmoreglue':
(.text+0xf2): undefined reference to `_malloc_r'
libfirmware_2.a(fvwrite.o): In function `__sfvwrite_r':
(.text+0x25e): undefined reference to `_malloc_r'
libfirmware_2.a(fvwrite.o): In function `__sfvwrite_r':
(.text+0x2de): undefined reference to `_realloc_r'
libfirmware_2.a(fvwrite.o): In function `__sfvwrite_r':
(.text+0x2ff): undefined reference to `_free_r'
libfirmware_2.a(makebuf.o): In function `__smakebuf_r':
(.text+0x1a2): undefined reference to `_malloc_r'
libfirmware_2.a(malloc.o): In function `malloc':
(.text+0x10): undefined reference to `_malloc_r'
libfirmware_2.a(malloc.o): In function `free':
(.text+0x26): undefined reference to `_free_r'
libfirmware_2.a(reent.o): In function `cleanup_glue':
(.text+0x3c): undefined reference to `_free_r'
libfirmware_2.a(reent.o): In function `_reclaim_reent':
(.text+0xb1): undefined reference to `_free_r'
libfirmware_2.a(reent.o): In function `_reclaim_reent':
(.text+0xe6): undefined reference to `_free_r'
libfirmware_2.a(reent.o): In function `_reclaim_reent':
(.text+0x111): undefined reference to `_free_r'
libfirmware_2.a(reent.o):(.text+0x172): more undefined references to `_free_r' follow
C:\Projects\ms_monitor\firmware_2\HardwareDebug\libfirmware_2.a(realloc.o): In function `realloc':
(.text+0x16): undefined reference to `_realloc_r'
make: *** [firmware_2.x] Error 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:58:39.393

在 KPIT GNU 团队的大力支持下，这个问题得到了解答。

我尝试编译的处理器的链接器文件不正确（例如，链接器文件正确但其内容不正确）。不仅如此，一些缺失的符号还取决于工作区的配置方式。

如果您自己发现此问题，第一步是联系 KPIT GNU，因为如果不询问文件，我不会知道文件存在问题。

# wpf - WPF 触发器属性

> ID：15160874
> 
> 赞同：9
> 
> 时间：2013-03-01T15:10:16.900
> 
> 标签：wpf, xaml, properties, triggers

我对 WPF 相当陌生，目前正在使用[`triggers`](http://msdn.microsoft.com/en-us/library/system.windows.trigger.aspx). 我有一个关于*简单触发器*的问题。通过*简单的触发器*，我的意思是监视 a 的变化[`dependency property`](http://msdn.microsoft.com/en-us/library/system.windows.dependencyproperty.aspx)并使用 a[`setter`](http://msdn.microsoft.com/en-us/library/system.windows.setter.aspx)来改变样式。

例子：

```
<Style.Triggers>
    <Trigger Property="Control.IsFocused" Value ="True">
        <Setter Property=" Control.Foreground" Value =" DarkRed" />
    </Trigger>
</Style.Triggers> 
```

我见过的所有例子都使用了以下内容[`trigger properties`](http://msdn.microsoft.com/en-us/library/system.windows.trigger.property.aspx)：

*   `<Trigger Property="Control.IsFocused" Value ="True">`
*   `<Trigger Property="Control.IsMouseOver" Value ="True">`
*   `<Trigger Property="Button.IsPressed" Value ="True">`

**问题**：这些是*唯一*可用的触发器属性吗？如果没有，还有什么其他存在？

我在网上搜索过，但无济于事。也许有人可以对此有所了解。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-01T15:22:20.817

这些不是您可以在 中使用的唯一属性`Triggers`，但是，它们是常见的示例，因为它们易于理解且易于演示。

事实上，你可以让你的`Trigger`watch any `DependencyProperty`，但是因为它在值改变时被“触发”（并且匹配`Value`你告诉它要观察的），所以只有使用在运行时会改变的属性才有意义，通常来自用户操作（例如焦点、鼠标悬停、按下等）。在这些情况下只有某些`DependencyProperties`实际的变化值，所以并不是所有的都有意义`Triggers`。

Microsoft`DependencyProperties`在标准控件中添加了几个，以便您可以轻松地根据更改创建触发器。但是，您也可以使用自己的控件创建自己的控件，并具有在自定义更改`DependencyProperties`时响应的触发器。`DependencyProperties`

请记住，`PropertyTriggers`它们只是`Trigger`WPF 中的一种。还有`EventTriggers`和`DataTriggers`和`MultiTriggers`。这些其他触发器基于事件或数据更改触发，或者在`MultiTriggers`多个属性（或数据）值的情况下触发。

你有什么具体的事情要做`Triggers`吗？ [这个另一个答案](https://stackoverflow.com/questions/2239855/what-are-the-different-triggers-in-wpf)很好地解释了每种触发器的作用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-01T15:21:47.833

WPF 中有多种类型的触发器，但最常用的两种是常规的`Triggers`和`DataTriggers`

两种类型的触发器都会观察一个值，当它更改为匹配指定的值时，`Value`它们会应用您的样式设置器。

**常规触发器**可用于对象的任何依赖属性。除了您指定的更常见的触发属性之外，这还包括`Text`、`Visibility`、等属性： 、和。`Background``IsFocused``IsMouseOver``IsPressed`

请注意，根据[有关 Trigger.Property 的 MSDN 页面](http://msdn.microsoft.com/en-us/library/system.windows.trigger.property.aspx)`TargetType`，如果包含触发器的样式或模板具有其属性集，则无需指定类名前缀

记住它的一种简单方法是，如果您可以绑定属性，则可以在其上设置触发器。

**DataTriggers**是监视绑定值而不是依赖属性的触发器。它们允许您查看绑定的表达式，并在该绑定的计算结果等于您的值时做出反应。

例如，您可以设置 a `DataTrigger`on`"{Binding Value}"`或`"{Binding ElementName=MyTextBox, Path=IsChecked}"`。您甚至可以`Converters`与 DataTriggers 一起使用，例如

```
<DataTrigger
    Binding="{Binding SomeInt, Converter={StaticResource IsGreaterThanZero}}"
    Value="True"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-14T05:40:22.770

使用此代码可以更好地体验 wpf 中的触发器。

```
<Window x:Class="DataBinding.Trigger2"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Trigger2" Height="500" Width="500">
<Window.Resources>
    <Style TargetType="Button">
        <Style.Setters>
            <Setter Property="FontFamily" Value="Tahoma"></Setter>
            <Setter Property="FontSize" Value="15"></Setter>
            <Setter Property="FontWeight" Value="Bold"></Setter>
            <Setter Property="Height" Value="25"></Setter>
            <Setter Property="Width" Value="100"></Setter>

        </Style.Setters>
        <Style.Triggers>
            <Trigger Property="IsFocused" Value="True">
                <Setter Property="Background" Value="Purple"></Setter>
                <Setter Property="Foreground" Value="DarkCyan"></Setter>
                <Setter Property="FontFamily" Value="Franklin Gothic"></Setter>
                <Setter Property="FontSize" Value="10"></Setter>
                <Setter Property="FontWeight" Value="Normal"></Setter>
                <Setter Property="Height" Value="50"></Setter>
                <Setter Property="Width" Value="200"></Setter>
            </Trigger>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="Red"></Setter>
                <Setter Property="Foreground" Value="White"></Setter>
                <Setter Property="FontFamily" Value="Calibri"></Setter>
                <Setter Property="FontSize" Value="25"></Setter>
                <Setter Property="FontWeight" Value="Heavy"></Setter>
                <Setter Property="Height" Value="100"></Setter>
                <Setter Property="Width" Value="400"></Setter>
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
                <Setter Property="Background" Value="Green"></Setter>
                <Setter Property="Foreground" Value="Violet"></Setter>
                <Setter Property="FontFamily" Value="Times New Roman"></Setter>
                <Setter Property="FontSize" Value="20"></Setter>
                <Setter Property="FontWeight" Value="Thin"></Setter>
                <Setter Property="Height" Value="250"></Setter>
                <Setter Property="Width" Value="250"></Setter>
            </Trigger>
        </Style.Triggers>
    </Style>
</Window.Resources>
<Button>It's a Magic.</Button> 
```

# tfs - TFS IEventService "Event type CheckinEvent does not exist"

> ID：15160875
> 
> 赞同：2
> 
> 时间：2013-03-01T15:10:29.627
> 
> 标签：tfs

I am trying to subscribe to `CheckinEvent` in TFS 2010 using TFS `IEventService`. For some reason I keep getting:

> Event type <<event type>> does not exist

for `WorkItemChangedEvent` and `CheckinEvent`. What am I doing wrong?

```
var serverUri = new Uri("http://TFS_SERVICE:8080/tfs");
var server = TfsConfigurationServerFactory.GetConfigurationServer(serverUri);

var eventService = server.GetService<IEventService>();
var preference = new DeliveryPreference
    {
         Schedule = DeliverySchedule.Immediate,
         Type = DeliveryType.Soap,
          Address = "http://localhost:61773/NotifyService.asmx"
     };

int eventId = eventService.SubscribeEvent("CheckinEvent", null, preference); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T20:28:31.743

您正在配置服务器级别查询事件服务。这些事件类型仅存在于团队项目集合级别，我认为这是您实际想要创建事件订阅的地方。您需要将代码更改为以下内容：

```
var serverUri = new Uri("http://TFS_SERVICE:8080/tfs/collection");

TfsTeamProjectCollection collection = new TfsTeamProjectCollection(serverUri);
var eventService = collection.GetService<IEventService>();

var preference = new DeliveryPreference
{
  Schedule = DeliverySchedule.Immediate,
  Type = DeliveryType.Soap,
  Address = "http://localhost:61773/NotifyService.asmx"
};

int eventId = eventService.SubscribeEvent("CheckinEvent", null, preference); 
```

请注意，URI 需要包含您的集合名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:11:06.343

而不是使用`TfsConfigurationServerFactory`, 使用`TfsTeamProjectCollectionFactory.GetTeamProjectCollection()`方法。这些事件存在于集合级别，而不是服务器级别。

# css - showing DIV on Hover - overflow auto

> ID：15160879
> 
> 赞同：0
> 
> 时间：2013-03-01T15:10:45.730
> 
> 标签：css, html, z-index

I want to show a div by hovering over its parent. The code is quite big so I'll try to explain. On the site there is a scrollable div (overflow:auto) which shows a table. -> it shows 10 lines of the table and the rest (nearly 30) must be scrolled.

In every tr of my table there is a div(hover_over) that has a child-div (show_by_hower) By hovering over the div (hover_over) the child-div (show_by_hower) should be displayed. That works so far but the child-div (show_by_hower) is always under the scrolling div. If I remove the `overflow:auto;` from the scrollable div it all works fine but I need the overflow auto.

```
#hover_over 
{
     position:relative;
     width:20px;height:20px;
}

#hover_over:hover div
{
     position:absolute;
     display:block;
     z-index:999;
     width:310px;
     height:125px;
}

#hover_over div { display:none; } 
```

There is no other positioning in the code.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:00:48.273

这是一个带有一种可能解决方案[的 jsFiddle 。](http://jsfiddle.net/amullins/8xByv/)我正在使用 jQuery 的`.hover()`方法为表格外的元素设置动画，并用表格内包含的内容填充它。这样，您的弹出元素就不会限制在表格的范围内。

这是jQuery代码：

```
$(function() {
    $(".hover_over").hover( function() {
        hovDiv = $(this);
        showDiv = $(".show_hover");
        showDiv.html(hovDiv.children("div").html());
        showDiv.css("top", hovDiv.offset().top)
        showDiv.css("left", hovDiv.offset().left + hovDiv.width()).show();
    }, function() {
        $(".show_hover").hide();
    });
}); 
```

和 HTML：

```
<div class="theTable">
    <div class="hover_over">1
        <div>I'm hidden! 1</div>
    </div>
    <div class="hover_over">2
        <div>I'm hidden! 2</div>
    </div>
    <div class="hover_over">3
        <div>I'm hidden! 3</div>
    </div>
    <div class="hover_over">4
        <div>I'm hidden! 4</div>
    </div>
    <div class="hover_over">5
        <div>I'm hidden! 5</div>
    </div>
</div>
<div class="show_hover"></div> 
```

和CSS：

```
.show_hover {
   display:none;
   position:absolute;
   background-color:black;
   width:100px;
   height:20px;
   font-size:14px;
   color:white;
}

.hover_over div { display:none; } 
```

## 更新

因为你问了，所以我决定用纯 JavaScript 来完成这项工作。它不是那么容易阅读，但同样的想法适用：将弹出 div 移到表格之外，并使用`onmouseover`事件`onmouseout`处理程序动态添加所需的内容和定位。

[这是新的 jsFiddle](http://jsfiddle.net/amullins/E8Tcy/11/)。

这是相关的代码：

**Javascript**

```
(function() {
    function hoverIn() {
        var hovDiv = this;
        var showDiv = document.getElementById("show_hover");
        showDiv.innerHTML = hovDiv.children[0].innerHTML;
        showDiv.className = "see";
        var newTop = hovDiv.offsetTop + hovDiv.offsetParent.offsetTop +  hovDiv.offsetParent.offsetParent.offsetTop;
        showDiv.style.top = "" + newTop + "px";
        var newLeft = hovDiv.offsetLeft + hovDiv.offsetParent.offsetLeft +    hovDiv.offsetParent.offsetParent.offsetLeft + hovDiv.clientWidth;
        showDiv.style.left = "" + newLeft + "px";
    };

    function hoverOut() {
        document.getElementById("show_hover").className = "";
    };

    var hoverDivs = document.getElementsByClassName("hoverdiv");
    for(var i = 0; i < hoverDivs.length; i++)
    {
      hoverDivs[i].onmouseover = hoverIn;
      hoverDivs[i].onmouseout = hoverOut;
    }

})(); 
```

**CSS**

```
#show_hover
{
    display:none;
    position:absolute;
    top:0;
    left:0;
}

#show_hover.see {
    display:block;   
    background-color:green;
    width:400px;
    height:80px;
    position:absolute;
    top:20px;
    left:20px;
} 
```

## 更新 2

这个答案越来越长。[这是新的 jsFiddle](http://jsfiddle.net/amullins/E8Tcy/12/)。此更新允许您将鼠标悬停在显示的 div 上以与里面的对象进行交互。我利用了[hoverIntent](http://cherne.net/brian/resources/jquery.hoverIntent.html) jQuery 插件背后的基本思想，即将`onmouseout`处理程序放在一个`setTimeout`调用后面，允许您在半秒内将鼠标移到弹出窗口中，然后它就会消失。这有点烦躁，所以你可能会玩等待时间，直到它完成你想要的。

此外，如果您只想检查鼠标在任何给定时刻的位置并触发显示/隐藏行为，请参阅[此 StackOverflow 问题。](https://stackoverflow.com/questions/7397356/check-if-mouse-is-within-elements-bounds)

也就是说，这是更新的重要部分：

```
 var mouseInShowHover = false;
    var showDiv = document.getElementById("show_hover");

    showDiv.onmouseover = function() { mouseInShowHover = true; }

    showDiv.onmouseout = function() {
        mouseInShowHover = false;
        showDiv.className = "";
    }

    function hoverOut() {
        setTimeout( function() {
            if( !mouseInShowHover )
               showDiv.className = "";
        }, 500);
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:48:49.397

好吧，您的 JSFiddle 示例对我来说效果很好，所以我假设您使用的是 IE8 或具有非常严格的 z-index 规则的东西。

尝试添加这个：

```
#divscroll tr:hover {
    position:relative;
    z-index:1;
} 
```

[JSFiddle 示例](http://jsfiddle.net/uy2xe/3/)。

# java - Jackson and JAX-RS: type resolving abstract types based on @PathParam

> ID：15160880
> 
> 赞同：4
> 
> 时间：2013-03-01T15:10:47.993
> 
> 标签：java, jackson, jax-rs

Suppose `Animal` is an abstract class in my project, and I have a REST resource (on a JAX-RS server, using Jackson for (de)serialization) for a `PUT` to manipulate animals that are stored in my database. They have concrete types, and the REST resource specifies the type in the path of the request:

```
@PUT
@Consumes(MediaType.APPLICATION_JSON)
@Path("/{entityType}/{id: \\d+}")
public <T extends Animal> void putAnimal(@PathParam("entityType") String entityType, @PathParam("id") String id, Animal input) throws IOException {
    //...
} 
```

I want to use `entityType` to pick the concrete class to deserialize with (`Dog` or `Cat` or whatever, for `entityType` being `dog` or `cat` or whatever). For reasons which are too complicated to explain here, I **cannot** put the type information in the JSON input itself.

So AIUI annotating `Animal` with a custom `TypeIdResolver` or something of the sort can't help me, because the type information won't be in the JSON itself (and that's all the info that the type resolver will get). I was planning to use a custom `MessageBodyReader`, but as far as I can tell, that doesn't get the other parameter values from the body passed in its `readValue` method, so I won't know what to deserialize into.

What am I missing? If this approach fails, how can I accomplish what I want without specifying animal-specific endpoints (which leads to lots of duplicate code as well as a loss of generality - right now I can add an subclass of `Animal` and this code will Just Work, which is very nice.)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T16:22:52.497

以下来自 JAX-RS 规范（5.2.2 URI 和 URI 模板）的引用表明您应该能够将`UriInfo`实例注入到您的 custom`MessageBodyReader`中，并使用其中一种方法来检查请求的 URL 路径。

> 可以使用@Context 注解将 UriInfo 的实例注入到类字段或方法参数中。UriInfo 提供有关请求 URI 组件的静态和动态的每个请求的信息。

那里提供的示例显示了一个接收`UriInfo`参数的资源方法，但通常也应该可以将实例注入提供者（`MessageBodyReader`）。

通过 获取`entityType`路径参数后`UriInfo`，你`MessageBodyReader`应该可以提供对应的子类了`Animal`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:34:58.260

鉴于您正在尝试做的事情，您最好构建一个`AnimalResource`包含基本方法的类，然后单独构建`DogResource`，`CatResource`以及您需要扩展的任何其他类`AnimalResource`。这将允许您获得正确的子类`Animal`并正确反序列化输入 JSON。

**更新** 如何实现这一点的示例。您的基础资源如下所示：

```
public class AnimalResource<T extends Animal>
{
    private final transient AnimalService<T> service;

    public AnimalResource(final AnimalService<T> service)
    {
        this.service = service;
    }

    @Get
    @Path("{id}")
    @Produces(MediaType.APPLICATION_JSON)
    public T getbyId(@PathParam("id") final String id)
    {
        return this.service.findById(id);
    }

    // Other CRUD methods go here
} 
```

然后，假设它们都具有相同的设置，您的个体动物很简单：

```
@Path("/cats")
public class CatResource extends AnimalResource<Cat>
{
    public CatResource(final CatService catService)
    {
        super(catService);
    }
} 
```

对于一只猫和

```
@Path("/dogs")
public class DogResource extends AnimalResource<Dog>
{
    public DogResource(final DogService dogService)
    {
        super(dogService);
    }
} 
```

为一只狗。它们将从父类继承标准的 CRUD 方法，并且任何特定于动物的方法仍然可以放在单独的`*Resource`类中。

# performance - Perl: Slice an array, without creating a whole new array

> ID：15160882
> 
> 赞同：5
> 
> 时间：2013-03-01T15:10:53.940
> 
> 标签：performance, perl, slice

I have a reference to an big array, and some of the elements (from some index to the end) need to get used to insert new rows in a DB.

Is there anyway I can create a reference to part of a bigger array? Or another way I can use a part of a array with DBI's execute_array function, without having Perl copy loads of data in the background?

Here's what I want to do more efficiently:

```
$sh->execute_array({}, [ @{$arrayref}[@indexes] ]); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T15:28:31.220

数组切片返回多个值并具有`@`标记：

```
my @array = (1, 2, 3, 4);

print join " ", @array[1..2]; # "2 3"

my $aref = [1, 2, 3, 4];

print join " ", @{$aref}[1..3]; # "2 3 4" 
```

切片将返回一个标量列表（！= 一个数组）。但是，这本身不是副本：

```
my @array = (1, 2, 3, 4);

for (@array[1..2]) {
  s/\d/_/; # change the element of the array slice
}

print "@array"; # "1 _ _ 4" 
```

所以这是非常有效的。

如果要创建新数组（或数组引用），则必须复制值：

```
my @array = (1, 2, 3, 4);

my @slice = @array[1..2];

my $slice = [ @array[1..2] ]; 
```

该语法`\@array[1..2]`将返回对切片中每个元素的引用列表，但不*返回*对切片的引用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T16:20:33.263

```
$sh->execute_array({}, [ @{$arrayref}[@indexes] ]); 
```

类似于

```
sub new_array { my @a = @_; \@a }
$sh->execute_array({}, new_array( @{$arrayref}[@indexes] )); 
```

请注意复制切片的所有元素的分配。我们可以避免复制标量，如下所示：

```
sub array_of_aliases { \@_ }
$sh->execute_array({}, array_of_aliases( @{$arrayref}[@indexes] )); 
```

现在，我们只是复制指针 ( `SV*`) 而不是整个标量（以及其中的任何字符串）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T15:25:08.963

Perl 中的参数传递以“按引用传递”开始。如果您想知道是否制作了值副本，请查看源代码。

在这种情况下，`execute_array`的第二行的定义将引用的值复制`@_`到一个名为 的词汇`@array_of_arrays`中。

从好的方面来说，这是一个浅拷贝。（至少在我看来。）

# c# - 为 ItemDataBound 中的中继器退出 Sub

> ID：15160884
> 
> 赞同：1
> 
> 时间：2013-03-01T15:10:56.293
> 
> 标签：c#, asp.net, .net, vb.net

我想在第四次迭代中退出 rpt.ItemDataBound 函数，但是当我完成时：

```
 Protected Sub rptCol_ItemDataBound(sender As Object, e As RepeaterItemEventArgs) Handles rptCol.ItemDataBound
        If Not e.Item.ItemType = ListItemType.AlternatingItem AndAlso Not e.Item.ItemType = ListItemType.Item Then Exit Sub
        If e.Item.ItemIndex = 4 Then
            Exit Sub
        End If 
```

..

它没有用，他只是跳过了这个迭代。

有任何想法吗 ？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:51:57.703

就像@Marcus 说的那样，迭代将继续，因为每一行都会调用它。

尝试不同的方法。在绑定到中继器*之前*更改您的数据源。像这样的东西：

```
//I am assuming your datasource is a List, but this works for a datatable, etc
List<[YOUR CLASS]> datasource = MethodThatGetsYourSource();
rptCol.DataSource = datasource.Take(4);
rptCol.DataBind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-17T13:46:11.970

```
Private Sub ForceStopAfterFirstBind(sender As Object, e As RepeaterItemEventArgs)
    If e.Item.ItemIndex > 3 Then
        e.Item.Controls.Clear()
    End If
End Sub 
```

这样称呼它：

```
ForceStopAfterFirstBind(sender, e) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:14:14.180

我认为您需要尝试 itemCreadedOnDatabound 事件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T15:26:51.697

迭代将继续，因为将继续为每一行调用事件处理程序。如果想在某行之后跳过逻辑，您可以执行以下操作：

```
Protected Sub rptCol_ItemDataBound(sender As Object, e As RepeaterItemEventArgs) Handles rptCol.ItemDataBound
    If Not e.Item.ItemType = ListItemType.AlternatingItem AndAlso Not e.Item.ItemType = ListItemType.Item Then Exit Sub
    If e.Item.ItemIndex > 3 Then
        Exit Sub
    End If
 .....
End Sub 
```

# c++ - 如何在 C++ 中创建一组无序的整数对？

> ID：15160889
> 
> 赞同：69
> 
> 时间：2013-03-01T15:11:24.363
> 
> 标签：c++, std-pair, unordered-set

下面的程序不会编译一组无序的整数对，但它会编译整数。可以`unordered_set`在用户定义的类型上使用及其成员函数，我该如何定义它？

```
#include <unordered_set>
...

class A{
...
private: 
    std::unordered_set< std::pair<int, int> > u_edge_;
}; 
```

编译器错误：

> 错误：没有匹配函数调用“std::unordered_set >::unordered_set()”

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-01T15:18:50.760

There is no standard way of computing a hash on a pair. Add this definition to your file:

```
struct pair_hash {
    inline std::size_t operator()(const std::pair<int,int> & v) const {
        return v.first*31+v.second;
    }
}; 
```

Now you can use it like this:

```
std::unordered_set< std::pair<int, int>,  pair_hash> u_edge_; 
```

This works, because `pair<T1,T2>` defines equality. For custom classes that do not provide a way to test equality you may need to provide a separate function to test if two instances are equal to each other.

Of course this solution is limited to a pair of two integers. Here is [a link to an answer](https://stackoverflow.com/a/9729747/335858) that helps you define a more general way of making hash for multiple objects.

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-01T15:25:51.043

Your code compiles on VS2010 SP1 (VC10), but it fails to compile with GCC g++ 4.7.2.

However, you may want to consider `boost::hash` from [Boost.Functional](http://www.boost.org/doc/libs/1_37_0/doc/html/hash.html) to hash a `std::pair` (with this addition, your code compiles also with g++).

```
#include <unordered_set>
#include <boost/functional/hash.hpp>

class A
{
private: 
    std::unordered_set< 
        std::pair<int, int>, 
        boost::hash< std::pair<int, int> > 
    > u_edge_;
}; 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-03-01T15:18:43.303

问题是[`std::unordered_set`](http://en.cppreference.com/w/cpp/container/unordered_set)使用[`std::hash`](http://en.cppreference.com/w/cpp/utility/hash)模板来计算其条目的哈希值，并且没有`std::hash`专门化对。所以你必须做两件事：

1.  确定要使用的散列函数。
2.  Specialize `std::hash` for your key type (`std::pair<int, int>`) using that function.

Here is a simple example:

```
#include <unordered_set>

namespace std {
template <> struct hash<std::pair<int, int>> {
    inline size_t operator()(const std::pair<int, int> &v) const {
        std::hash<int> int_hasher;
        return int_hasher(v.first) ^ int_hasher(v.second);
    }
};

}

int main()
{
    std::unordered_set< std::pair<int, int> > edge;
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-02-06T15:20:31.327

As already mentioned in most of the other answers on this question, you need to provide a hash function for `std::pair<int, int>`. However, since [C++11](https://en.wikipedia.org/wiki/C%2B%2B11), you can also use a [lambda expression](https://en.cppreference.com/w/cpp/language/lambda) instead of defining a hash function. The following code takes the [solution given by Sergey](https://stackoverflow.com/a/15161034/2675154) as basis:

```
auto hash = [](const std::pair<int, int>& p){ return p.first * 31 + p.second; };
std::unordered_set<std::pair<int, int>, decltype(hash)> u_edge_(8, hash); 
```

[Code on Ideone](https://ideone.com/kIITo7)

I'd like repeat Sergey's disclaimer: This solution is limited to a pair of two integers. [This answer](https://stackoverflow.com/a/9729747/335858) provides the idea for a more general solution.

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-09-10T17:36:36.250

OK here is a simple solution with guaranteed non collisions. Simply reduce your problem to an existing solution i.e. convert your pair of `int` to `string` like so:

```
 auto stringify = [](const pair<int, int>& p, string sep = "-")-> string{
    return to_string(p.first) + sep + to_string(p.second);
 }

 unordered_set<string> myset;
 myset.insert(stringify(make_pair(1, 2)));
 myset.insert(stringify(make_pair(3, 4)));
 myset.insert(stringify(make_pair(5, 6))); 
```

Enjoy!

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-01T15:18:45.717

You need to provide a specialization for `std::hash<>` that works with `std::pair<int, int>`. Here is a very simple example of how you could define the specialization:

```
#include <utility>
#include <unordered_set>

namespace std
{
    template<>
    struct hash<std::pair<int, int>>
    {
        size_t operator () (std::pair<int, int> const& p)
        {
            // A bad example of computing the hash, 
            // rather replace with something more clever
            return (std::hash<int>()(p.first) + std::hash<int>()(p.second));
        }
    };
}

class A
{
private:
    // This won't give you problems anymore
    std::unordered_set< std::pair<int, int> > u_edge_;
}; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-09-01T05:19:46.940

The other answers here all suggest building a hash function that somehow combines your two integers.

This will work, but produces non-unique hashes. Though this is fine for your use of `unordered_set`, for some applications it may be unacceptable. In your case, if you happen to choose a bad hash function, it may lead to many unnecessary collisions.

But you can produce unique hashes!

`int` is usually 4 bytes. You could make this explicit by using `int32_t`.

The hash's datatype is `std::size_t`. On most machines, this is 8 bytes. You can check this upon compilation.

Since a pair consists of two `int32_t` types, you can put both numbers into an `std::size_t` to make a unique hash.

That looks like this (I can't recall offhandedly how to force the compiler to treat a signed value as though it were unsigned for bit-manipulation, so I've written the following for `uint32_t`.):

```
#include <cassert>
#include <cstdint>
#include <unordered_set>
#include <utility>

struct IntPairHash {
  std::size_t operator()(const std::pair<uint32_t, uint32_t> &p) const {
    assert(sizeof(std::size_t)>=8);  //Ensure that std::size_t, the type of the hash, is large enough
    //Shift first integer over to make room for the second integer. The two are
    //then packed side by side.
    return (((uint64_t)p.first)<<32) | ((uint64_t)p.second);
  }
};

int main(){
  std::unordered_set< std::pair<uint32_t, uint32_t>, IntPairHash> uset;
  uset.emplace(10,20);
  uset.emplace(20,30);
  uset.emplace(10,20);
  assert(uset.size()==2);
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-01T15:14:24.213

您缺少`std::pair<int, int>>`. 例如，

```
struct bad_hash
{
  std::size_t operator()(const std::pair<int,int>& p) const
  {
    return 42;
  }
};

....

std::unordered_set< std::pair<int, int>, bad_hash> u_edge_; 
```

您也可以专门`std::hash<T>`用于`std::hash<std::pair<int,int>>`，在这种情况下，您可以省略第二个模板参数。

# php - 如何在#之后使用php中的preg_match选择一个单词

> ID：15160893
> 
> 赞同：1
> 
> 时间：2013-03-01T15:11:29.837
> 
> 标签：php, regex, preg-match, preg-match-all

我想在 php 中使用 preg_match 选择一个作为哈希的单词。

例如考虑这个字符串：

> Facebook 重新设计了#timeline 并在新西兰推出

现在我想选择#timeline 如何做到这一点，我使用这段代码，但它只选择#t

```
preg_match_all("/#[a-zA-Z0-9]/") 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T15:12:51.083

当前仅设置为选择 # 之后的单个字符。试试这个：

```
preg_match_all("/#[a-zA-Z0-9]+/") 
```

# regex - 正则表达式选择单词后的所有内容

> ID：15160894
> 
> 赞同：1
> 
> 时间：2013-03-01T15:11:37.167
> 
> 标签：regex

我正在尝试选择 CORP ACT OPTION NO 之后的所有内容。但是我的正则表达式在遇到 / 后停止

我用于提取信息的 reg 表达式 atm 是 CORP ACT OPTION NO.([^/]*)

```
CORP ACT REFERENCE                  : 007XS0212069115
SENDER'S REFERENCE                  : 1212070800330001
FUNCTION OF MESSAGE                 : NEW MESSAGE
CORP ACT EVENT                      : INTEREST PAYMENT
PLACE OF SAFEKEEPING                : US
ISIN                                : XS0212069115
ISIN/DESCRIPTION                    : KFW 4.750 071212 GBP
METHOD OF INTEREST COMPUTATION      : A006
EX-DATE                             : 20121207
RECORD DATE                         : 20121206
CORP ACT OPTION NO.                 : 001
CORPORATE ACTION OPTION CODE        : CASH
CURRENCY OPTION                     : GBP
RESULTING AMT                       : GBP617,5
PAYMENT DATE                        : 20121207
EXCHANGE RATE                       : GBP/GBP/1,
INTEREST RATE                       : 4,75

SAFEKEEPING ACCOUNT                 : 000000000000
CONFIRMED BALANCE                   : FAMT/13000,
CREDIT/DEBIT IND                    : CREDIT 
```

如何选择所有内容？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:14:58.920

只需`\s\S`在字符组中使用：

```
CORP ACT OPTION NO\.([\s\S]*) 
```

在此处查看实际操作：[http ://regexr.com?33vd0](http://regexr.com?33vd0)

# css - font-feature-settings：正确的语法是什么？

> ID：15160897
> 
> 赞同：17
> 
> 时间：2013-03-01T15:11:48.460
> 
> 标签：css, font-face, webfonts, typography

我购买了一个支持一些开放类型功能的网络字体，当然我想使用它们。
不幸的是，我无法在网上找到解释使用该语法的最佳方式的资源——在我看来，这`font-feature-settings`是前缀地狱的另一个例子。

目前我已经这样写了，但我不确定它是否真的涵盖了所有支持这些功能的浏览器。

```
.element {
    -webkit-font-feature-settings: "kern" 1, "liga" 1, "case" 1;
       -moz-font-feature-settings: "kern=1", "liga=1", "case=1";
       -moz-font-feature-settings: "kern" on, "liga" on, "case" on;
        -ms-font-feature-settings: "kern" 1, "liga" 1, "case";
         -o-font-feature-settings: "kern", "liga", "case";
            font-feature-settings: "kern", "liga", "case";
} 
```

更具体地说，`-moz`语法似乎很奇怪。一些消息来源声称这是要使用的语法：

```
-moz-font-feature-settings: "liga=1";  /* Firefox 14 and before */
-moz-font-feature-settings: "liga" on; /* Firefox 15 */ 
```

其他人只是这样做：

```
-moz-font-feature-settings: "cswh=1";
-moz-font-feature-settings: "cswh"; 
```

也一样`-webkit`；有些人是这样写的：

```
-webkit-font-feature-settings: "liga" on, "dlig" on; 
```

而其他人这样做：

```
-webkit-font-feature-settings: "liga", "dlig"; 
```

或者像这样：

```
-webkit-font-feature-settings: "liga" 1, "dlig" 1; 
```

最重要的是，至少在 webkit 浏览器中， `text-rendering: optimizelegibility;`它似乎与`"kern"`and相同。`"liga"`

那么，2013 年在 Web 上使用 Open Type 字体功能的正确、防弹方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T15:34:48.080

好吧，寻找 2013 年 Web 功能*应该*如何工作的最佳位置是[W3 CSS3 规范](http://www.w3.org/TR/2012/WD-css3-fonts-20120823/#font-feature-settings-prop)：

> 如果存在，则值指示用于字形选择的索引。值必须为 0 或更大。值 0 表示该功能已禁用。对于布尔功能，值为 1 启用该功能。对于非布尔特征，1 或更大的值启用该特征并指示特征选择索引。“on”值与 1 同义，“off”与 0 同义。如果省略该值，则假定值为 1。

这意味着`"liga" 1`,`"liga" on`并且`liga`都做同样的事情。

正如 BoltClock 在他对该问题的评论中提到的那样，`"feature=value"`它不是有效的语法，并且似乎是 Firefox 特有的。

Opera 和 IE (<10)[根本](http://caniuse.com/font-feature)[不支持`font-feature-settings`](http://caniuse.com/font-feature)，所以`-o-*`和`-ms-*`属性大概是没用的。

总体而言，所有当前支持的浏览器的工作语法似乎是：

```
.element {
    -webkit-font-feature-settings: "kern", "liga", "case"; /* No variation */
       -moz-font-feature-settings: "kern=1", "liga=1", "case=1"; /* Firefox 4.0 to 14.0 */
       -moz-font-feature-settings: "kern", "liga" , "case"; /* Firefox 15.0 onwards */
       -moz-font-feature-settings: "kern" 1, "liga" 1, "case" 1; /* Firefox 15.0 onwards explicitly set feature values */
            font-feature-settings: "kern", "liga", "case"; /* No variation */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:28:00.633

[http://hacks.mozilla.org/2010/11/firefox-4-font-feature-support/](http://hacks.mozilla.org/2010/11/firefox-4-font-feature-support/)以及[规范本身](http://www.w3.org/TR/css3-fonts/#font-rend-props)可能是一个很好的起点。

还应该注意的是，您不会获得使用字体功能的完全防弹的方式，因为它可以在所有浏览器中工作。根据[caniuse](http://caniuse.com/#search=font-fea)的说法，font-features 有一种粗略的支持（在 Opera 中什么都没有，在 IE10 之前什么都没有，在大多数移动浏览器中什么都没有，在剩下的部分和前缀中），部分原因是它仍在[“工作中草稿”状态，](http://whatis.techtarget.com/definition/working-draft-draft-document)这意味着它仍有可能改变。因此，最好不要完全依赖此功能，并期望它不会在所有浏览器中工作。

另一方面，既然您提到了“前缀地狱”（实际上并没有那么糟糕 - 前缀意味着随着时间的推移而被丢弃；您是否知道您不再需要前缀，`border-radius`除非您被困在支持真正古老的浏览器？ ) - 您可能想研究其中一种 CSS 预处理器，例如 LESS 或 Sass。这些工具可以通过为您添加前缀和正确的语法来帮助您使用最先进的 CSS，同时通过遵循 W3C 标准的声明来保持源代码的清洁。

# drupal - 有人可以确认 Aegir 中“平台”[站点特定文件夹]上的 database.sql 在 MySQL 和 WAMP 中是可读的吗？

> ID：15160904
> 
> 赞同：0
> 
> 时间：2013-03-01T15:11:58.623
> 
> 标签：drupal

这是一个菜鸟问题。我正在尝试在 WAMP 上克隆 Drupal 网站以测试一些本地开发。当前网站在 Aegir 上维护。根据所有者的知识，但由于我不知道的原因，我无法直接从管理该网站的任何人那里获得信息。

我已经能够 scp 平台 [配置文件、模块、文件等]。我目前的难题是如何获取数据库的副本，以便将其导入 WAMP。

我复制的其中一个文件名为 database.sql，大小适中 (35MB)。我浏览了网络，没有人直截了当地说这是 MySQL 数据库的一种可读形式。

我尝试将其导入到同名和用户名的数据库中失败，并提示大小太大。（密码未知 - 查看文档有几个版本，但无法分辨哪个是哪个版本）。

从 MySQL 控制台工作： mysql -u usernamenewdatabase -p newdatabasename < C:/path/database.sql 也失败了。

谁能帮我解决这个混乱？我什至走在正确的轨道上吗？

谢谢乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:57:05.643

谢谢你陪我慢跑。WAMP 只是回复文件太大的建议。

在此期间我已经解决了。

是 - Aegir 中的 database.sql 是一个简单的 .sql 文件

特别是要将其放入 WAMP，解决方案是在 wamp/apps/phpAdmin 文件夹中编辑 config.inc.php 文件的这一行

$cfg['UploadDir'] = '上传';

通过在“”之间插入上传

然后在 phpAdmin 中添加一个名为 upload 的子目录。

将大文件放在上传目录中，然后从 phpAdmin 屏幕将其导入干净的数据库。

当我们知道如何做时，这非常容易。

谢谢克莱夫 - 我感谢您的支持。

# json - 如何在 MongooseJS 中将字段设置为 JSON？

> ID：15160908
> 
> 赞同：0
> 
> 时间：2013-03-01T15:12:29.580
> 
> 标签：json, node.js, mongoose

我的猫鼬模型是：

```
var Schema = new Schema({
  code: String,
  type: String,
  people:{}
} 
```

和项目的数据是：

```
people :  
    {
        "id":"2342423",
        "name":"John"
    },
    {
        "id":"1231231",
        "name":"Marry"
    } 
```

当我写：

```
 var obj = new Schema({
            people:people}); 
```

obj.people 是 {}。我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:15:19.430

您拥有的不是有效的 JSON。顶层需要是单个对象或数组，因此您可能需要以下内容：

```
people: [
    {
        "id":"2342423",
         "name":"John"
    },
    {
        "id":"1231231",
        "name":"Marry"
    }
] 
```

那是一个数组，包含有关于两个人的信息的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:13:32.027

people 应该是 Object 或 Array 类型

# gruntjs - 为什么 gruntjs 文件数组格式不允许使用模板在另一个任务中引用 dest 文件？

> ID：15160909
> 
> 赞同：2
> 
> 时间：2013-03-01T15:12:31.513
> 
> 标签：gruntjs

我在使用 gruntjs 创建的新版本时遇到了问题。我想使用 grunt-contrib-copy 将文件复制到我的部署区域，然后在以后的任务中重用这些目标文件。看起来我应该能够使用[Grunt：配置任务](http://gruntjs.com/configuring-tasks)文档中描述的模板来引用任务目标文件。但是当我将它与文件数组格式指定的源任务一起使用时，它不起作用。

我创建了一个显示问题的要点：[Grunt File Array Example Gist](https://gist.github.com/abierbaum/5065053)

再生产：

1.  git 克隆[https://gist.github.com/5065053.git](https://gist.github.com/5065053.git) test_example
2.  cd test_example
3.  npm 安装
4.  ./node_modules/.bin/grunt
5.  查看 debug_files 任务的输出如何没有使用文件数组语法指定的项目的目标文件。

很可能我只是做错了什么，但我似乎无法追查到它。有人看到我的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:49:42.227

我认为模板根本无法从数组中获取值。我有一个类似的问题，并通过在我的 Gruntfile 中创建一个标准的 JS 变量来解决它（毕竟它是一个标准的 JS 文件）。

您仍然可能想尝试：<%= concat.prod.files.0.dest %>，我目前无法尝试。

# sql - 为分析/测试目的编写相同 SQL 查询的替代方法

> ID：15160916
> 
> 赞同：2
> 
> 时间：2013-03-01T15:12:55.303
> 
> 标签：sql, database, ingres, vectorwise

我正在测试一个 Ingres Vectorwise 数据库，试图找到一种更快的方法来运行查询，因为我们在文本查找方面遇到了一些缓慢。

如果我基于 char() 列查找大约 5000 个项目，则下面的实现 #1 非常快。不幸的是，查找 50 项所需的时间与查找 5000 项所需的时间大致相同。

另一方面，实现#2 对于 50 个项目非常快，但对于 5000 个项目根本无法扩展。

实施#3 显然会比#1 更糟糕，但我只是提供了我尝试过的示例。

**我的问题是：**假设我的表只有两列，q = bigint, r = char() 字段，你能想到任何其他方法来使用基本 SQL 编写这个查询，以便我可以有更多的选择吗？我希望有一个选项可以合理地执行 50 和 5000（可以像您在数据库中所期望的那样扩展）。

请注意，我将接受执行相同功能的替代查询的任何答案；越多越好。我不希望任何人会以我希望的方式扩展，但我不会知道，直到我尝试更多。

* * *

**实施#1：**

```
select q
from test_table
where r in ('a', 'b', 'c', 'd', 'e') 
```

**实施#2：**

```
select q
from test_table
where r = 'a' or r = 'b' or r = 'c' or r ='d' or r = 'e' 
```

**实施#3：**

```
select q
from test_table a
where exists (
    select r
    from testtable
    where r in ('a', 'b', 'c', 'd', 'e')
    and a.r = r) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:05:59.767

Vectorwise 不会“像您期望的那样扩展”，因为它没有 B 树索引。它使用每个块的高值和低值元数据来选择要读取的块，就像大多数柱状分析 DBMS 一样。这在从一个非常大的表中拉出许多行时提供了出色的性能，但在拉出几行时性能很差，因为它会遍历许多不需要的行。

您可以通过手动或使用“创建索引”命令在“r”上对表进行排序来优化（这将防止在第一次加载后进行批量加载）。这将使元数据更精确，因此将读取更少的块。

我注意到示例中只有两列，没有连接，也没有聚合函数。列式数据库真的是您需要的还是 Lucene 更合适？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:28:36.147

我只能在实施#2 中建议一个联合/联合，因为联合可能比 OR 更快。实施＃1是我更喜欢的。它应该使用索引并且应该足够快。例如，从 Oracle 10g 开始，它将自动重写 IN 子查询以使用 EXISTS。

```
select q
from test_table
where r = 'a' 
UNION ALL
select q
from test_table
where r = 'b' 
.... 
```

UNION 运算符选择不同的行。UNION ALL 选择包括重复项在内的所有行。UNION ALL 通常比 UNION 快。

# linq - LINQ - 多对多

> ID：15160919
> 
> 赞同：1
> 
> 时间：2013-03-01T15:13:04.413
> 
> 标签：linq, many-to-many

我有 2 个收藏集**-writtenUserAllowedTimes**和**meeting.AllowedTimes**。集合**受邀用户AllowedTimes**具有集合**受邀用户AllowedTimes.Times**。

集合**邀请UserAllowedTimes.Times**具有值 TimeID = 1、TimeID = 2、TimeID = 3、TimeID = 4、TimeID = 5、TimeID = 6。

集合**meeting.AllowedTimes**的值 TimeID = 2、TimeID = 3、TimeID = 4。

我想从包含所有**meeting.AllowedTimes TimeIDs 的****受邀用户AllowedTimes**中选择所有记录。我尝试执行以下操作：

 **```
var times = (
    from i in invitedUserAllowedTimes 
    where i.Times.All(p => meeting.AllowedTimes.Any(k=>k.TimeID == p.TimeID))
    select i).ToList(); 
```

但没有记录。为什么？我的代码中有什么不正确的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:19:15.457

试试这个：

```
var times = (from i in invitedUserAllowedTimes 
             where meeting.AllowedTimes.All(k => i.Times.Contains(k.TimeID))
             select i).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:20:19.947

它没有返回任何东西，因为您要求它返回所有**时间**所在的`invitedUserAllowedTimes`位置。因此，您的示例不会返回它，因为没有 TimeID 1、5 或 6。**`meeting.AllowedTimes``meeting.AllowedTimes`**

 **相反，您需要这样做：

```
var times = (
    from i in invitedUserAllowedTimes 
    where meeting.AllowedTimes.All(k=> i.Times.Contains(k.TimeID))
    select i).ToList(); 
```

或者，使用扩展方法：

```
var times = invitedUserAllowedTimes.Where(i => meeting.AllowedTimes.All(k => i.Times.Contains(k.TimeID)).ToList(); 
```****

# c# - 重复的代码断言和抛出

> ID：15160921
> 
> 赞同：0
> 
> 时间：2013-03-01T15:13:12.877
> 
> 标签：c#, exception-handling, assert, code-contracts, code-duplication

到目前为止，我已经了解到（通常）当你断言时，你也应该抛出。起初我不确定它是否正确，它只是有意义¹，然后验证了[这个答案](https://stackoverflow.com/a/506342/825637)。

我遇到的问题是它会导致重复代码（至少通过合同）。下面是一个不能为空或空格的名称字段示例：

```
 public String Name
 {
     get { return _name; }
     set
     {
         Contract.Requires(String.IsNullOrWhiteSpace(value) == false, "Names cannot be null or whitespace.");
         if (String.IsNullOrWhiteSpace(value))
             throw new ArgumentException("Names cannot be null or whitespace.");

         _name = value;
     }
 } 
```

显然，条件和错误消息都重复了。我应该如何处理？在一个属性中它是可管理的，但在具有多个字段的类中它是乱扔垃圾。

## 附加信息

我想过使用`Contract.Requires<TException>`（它会在调试中断言并在发布中抛出），但条件（即代码）将是异常的消息，它很可能会显示给用户（用户可能想知道为什么他的程序崩溃了，我不想显示实际代码）。这是一个例子：

```
static void MyFunction(Boolean youCanSeeMyCode = false)
{
    Contract.Requires<Exception>(youCanSeeMyCode, "(This is the exception's message)");
}

...

try
{
    MyFunction();
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message, "Error");
} 
```

![错误信息](../Images/63ff14cc9b9f46309cd71334bb1c9150.png)

有什么建议么？我不知所措。

* * *

¹这是有道理的，因为如果您只使用 assert 并且在某个地方仍然存在您不知道的错误，那么发布构建将继续进行，就好像一切正​​常，地狱可能会崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:16:05.060

您链接到的答案是 about `Debug.Assert`，默认情况下对于发布版本是关闭的。我从不喜欢这个想法——这就像说只有在学习驾驶时才值得系安全带，而在高速驾驶时则不然。

我鼓励您*只*使用`Contract.Requires`（没有单独的显式 throw 语句），然后确保配置您的项目，以便在发布版本中仍然检查先决条件。您对显示给用户的消息的担忧不是应该在这里解决的问题 - 它应该在您的一般异常处理中解决。如果您不想向用户显示异常消息，请不要显示它们......但要*记录*它们。你真的*不应该*尝试让异常对最终用户有意义......这不是他们的目的。

# python - 如何使用 SocksiPy 解包模块？

> ID：15160922
> 
> 赞同：1
> 
> 时间：2013-03-01T15:13:15.413
> 
> 标签：python, module, proxy, urllib2, socks

我使用[SocksiPy](http://code.google.com/p/socksipy-branch/)模块通过 SOCKS 代理代理我的 urllib2 请求：

```
import socks

# Set the proxy information
socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, 'x.x.x.x', 9050)

# Route an HTTP request through the SOCKS proxy 
socks.wrapmodule(urllib2)

print urllib2.urlopen('http://www.google.com').read()

# other urllib2 requests to follow here.. 
```

也许我的问题很简单：如何从一个模块中**解开**urllib2 模块`socks`，以便从 localhost（没有代理支持）发出以下 urllib2 请求，并且可能没有设置调用`setdefaultproxy`没有参数？

我尝试再次导入 urllib2 库，但没有发生任何事情..

在我调用这个之后，我发现它工作正常：

```
setdefaultproxy() 
```

但这是正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T08:12:51.657

在此处将我的 Socksipy 分支与 urllib2 帮助程序库一起使用：[https ://github.com/Anorov/PySocks](https://github.com/Anorov/PySocks)

示例代码，适用于您的情况：

```
import socks, urllib2
from sockshandler import SocksiPyHandler
proxy_opener = urllib2.build_opener(SocksiPyHandler(socks.PROXY_TYPE_SOCKS5, "IP", 9050))
print proxy_opener.open("http://whatismyip.org/").read() 
```

您可以设置不同的开启程序以使用不同的代理，或者在您的情况下，您可以简单地使用默认的 urllib2 处理程序或 urllib2.urlopen，它不会通过代理连接。

# javascript - 如何让拖放框重置位置？

> ID：15160924
> 
> 赞同：0
> 
> 时间：2013-03-01T15:13:17.540
> 
> 标签：javascript, html

在我开始之前是 jsFiddle 链接：http: [//jsfiddle.net/SSxdB/5/](http://jsfiddle.net/SSxdB/5/)

和代码：

```
<!DOCTYPE HTML>
<html>
<head>
    <meta charset ="utf-8">
    <style type="text/css">
        #dragBox {width:336px; height:221px; margin:10px;padding:10px;border:1px solid #aaaaaa;}
    </style>
    <script>
    function allowDrop(ev)
    {
        ev.preventDefault();
    }

    function drag(ev)
    {
        ev.dataTransfer.setData("Text",ev.target.id);
    }

    function drop(ev)
    {
        ev.preventDefault();
        var data=ev.dataTransfer.getData("Text");
        ev.target.appendChild(document.getElementById(data));

        if (data == "drag1")
        {
            foodOne();
        }
        if (data == "drag2")
        {
            foodTwo();
        }
    }

    function foodOne()
    {
        alert("You choose Food One");
    }

    function foodTwo()
    {
        alert("You choose Food Two");
    }
    </script>
</head>
<body bgcolor="#333333">
<div div align="center">
    <img id="drag1" src="foodOne.jpg" draggable="true" ondragstart="drag(event)" width="336" height="221">
    <img id="drag2" src="foodTwo.jpg" draggable="true" ondragstart="drag(event)" width="336" height="221">
    <br><br>
    <div id="dragBox" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
</div>
</body>
</html> 
```

我有两张图片（图片没有显示在 jsFiddle 中，因为链接是本地的，但你明白了）和一个我可以拖动它们的框。问题是，当我将一张图像拖入该图像不再存在的框中时，当我拖动第二张图像时，它会与下拉框一起折叠并移出其原始位置。

我正在努力做到这一点，以便当用户拖动图像时，该图像不会从顶部移除，并且当第二个图像移动时它会执行相同的操作，并且下拉框始终保持在相同的位置图像被拖入。

如果有人可以帮助我，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:29:00.633

您可以使用 cloneNode 复制图像节点，并将其附加到图像框。这样原始图像节点保持不变：

```
function drop(ev) {
    ev.preventDefault();
    var data = ev.dataTransfer.getData("Text");
    var draggedOrNewNodeId = "dragged-"+data;
    var theNode = document.getElementById(data);
    var draggedNode = document.getElementById(draggedOrNewNodeId);
    if (draggedNode != null) { ev.target.removeChild(draggedNode); }
    var nodeCopy = theNode.cloneNode(true);
    nodeCopy.id = draggedOrNewNodeId;
    nodeCopy.setAttribute("class", "dragged");
    nodeCopy.setAttribute("draggable", "false")
    ev.target.appendChild(nodeCopy);

    if (data == "drag1") {
        foodOne();
    }
    if (data == "drag2") {
        foodTwo();
    }
} 
```

见[http://jsfiddle.net/raad/SSxdB/15/](http://jsfiddle.net/raad/SSxdB/15/)

在 Firefox 19.0 和 Chrome 25.0.1364.97 m 上测试，都在 Windows 7 上我没有看到你的折叠框问题。

**编辑**

更新后的代码现在克隆了被拖动的节点并为其分配了一个新的 id，可以在新节点被拖入时将其移除，并且每个节点只允许拖入一个实例，并在被拖动的节点上禁用拖动（这很容易去除）以防止进一步拖拽污染容器。

# objective-c - UINavigationBar setTitleTextAttributes

> ID：15160926
> 
> 赞同：1
> 
> 时间：2013-03-01T15:13:23.050
> 
> 标签：objective-c, cocoa-touch, uinavigationcontroller, uinavigationbar, titlebar

我正在尝试在视图控制器上更改 NavigationBars 标题的颜色（而不是在推送它之前）。通过使用：

```
[[[self navigationController] navigationBar] setTitleTextAttributes:textAttributes]; 
```

但是这行代码只在 push 或 pop 之前有效。我想知道是否有办法在不导航的情况下强制执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:22:12.863

试试这个

```
UILabel * label = [[[UILabel alloc] initWithFrame:CGRectMake(0,0,45,45)] autorelease];
label.textColor = [UIColor whiteColor];
label.backgroundColor = [UIColor clearColor];
label.text = self.navigationItem.title;
self.navigationItem.titleView = label; 
```

创建自定义标签并将其设置为导航栏的 titleView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:11:40.930

我想说最简单的方法是创建一个`UILabel`与您想要的`UINavigationController`标题相同的样式并将标签设置为`navigationItem.titleView`.

# jquery - 悬停时按顺序显示/隐藏图像

> ID：15160931
> 
> 赞同：0
> 
> 时间：2013-03-01T15:13:41.213
> 
> 标签：jquery, delay

我正在尝试使用jquery按顺序依次隐藏和显示图像，最后一个显示和保持显示的图像应该是.img2。以下代码不起作用，延迟似乎不起作用，它只是同时隐藏它们并显示.img2。

查询

```
 $(".start-page-img").hover(function() {
            $('.img5').delay(6000).hide()
                    $('.img4').delay(7000).show()
            $('.img4').delay(9000).hide()
                    $('.img3').show(10000).show()
            $('.img3').delay(12000).hide()
            $('.img2').delay(13000).show()  

        }); 
```

HTML

```
<div class="start-page-img">
                               <img src="img/img1.jpg" class="img1" />
                                <img src="img/img2.jpg" class="img2"  />
                                <img src="img/img3.jpg" class="img3" />
                                <img src="img/img4.jpg" class="img4"  />
                                <img src="img/img5.jpg" class="img5" />
                            </div> 
```

CSS

```
.start-page-img{
    width:400px;
    float:left; 
    position:relative;
    cursor:pointer;

}

.start-page-img img{
    position:absolute;  
    top:0;
    left:0;
    display:block;
}

.start-page-img .img1,
.start-page-img .img2,
.start-page-img .img3,
.start-page-img .img4,
{
    display:none;   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:05:53.213

我想我设法通过使用`setTimeout()`而不是`delay()`. 这是一个可以玩的[小提琴。](http://jsfiddle.net/CRnCS/3/)注意，有些调用`show()`并`hide()`有一个持续时间参数，在某种情况下它会以某种方式与下一个动画的开始重叠，所以时间就是一切。

可能有一种更优雅的方式，可能是`jQuery.animate()`和/或`jQuery.queue()`。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:12:16.453

不确定这是你想要的： [Fiddle Here](http://jsfiddle.net/3EJGG/)

```
$(document).ready(function(){

//You can also do delay like this:
//$('.img3').delay(3000).fadeOut(5000);

//Or do hide like this:
//$('.img5').delay(1000).hide(5000,function(){
//$('.img4').delay(2000).hide(5000,function(){
//$('.img3').delay(3000).hide(5000);
//});
//});
//});

$('.hover_me').hover(function(){
$('.img5').fadeOut(5000,function(){
$('.img4').fadeOut(5000,function(){
$('.img3').fadeOut(5000);
});
});
});
}); 
```

# javascript - Django表单中的单击功能

> ID：15160940
> 
> 赞同：0
> 
> 时间：2013-03-01T15:14:18.177
> 
> 标签：javascript, jquery, django, django-forms, django-templates

我不知道如何解决我的问题。我有两个模型的 Django 模板。我将这些模型放在 inlineformset_factory 中。

**例子**

```
DhcpConfigFormSet = inlineformset_factory(Dhcp, IPRange, extra=1) 
```

我在模板中显示了这个表格，就像这张图片

[表格 http://sphotos-h.ak.fbcdn.net/hphotos-ak-prn1/601592_10151469446139596_1335258068_n.jpg](http://sphotos-h.ak.fbcdn.net/hphotos-ak-prn1/601592_10151469446139596_1335258068_n.jpg)

我想实现事件，当我点击加号棒（图片上标记的字段）时，再显示一行（ip初始字段，ip最终字段和删除复选框）。

**我试图这样做：**

```
$(document).ready(function() {
        $(".plusthick-left").click( function() {
          var tr= $(".sort-table").find("tbody tr:last").length;
               $(".sort-table").find("tbody tr:last").after($(".sort- table").find("tbody tr:last").clone())
      }); 
```

但我有问题，因为我只是复制了最后一行并采用了相同的属性值？

**我的问题是：**如何创建新行，并将所有属性设置为最后一行的值加一。

**例如：**

```
<input type="text" id="id_ip_initial_0_ip_range"> 
```

这是在模板中生成表单的字段，我想制作具有 id 值的字段，如下所示：

```
<input type="text" id="id_ip_initial_1_ip_range"> 
```

我该怎么做？:)

# java - 来自 ZipResourceFile 的输入流谈了很多时间来读取数据

> ID：15160941
> 
> 赞同：0
> 
> 时间：2013-03-01T15:14:24.137
> 
> 标签：java, android, inputstream

我已经为我的项目成功实施了 Apk 扩展文件。

问题：在我的 .obb 中，我有一个包含 100 个 xml 文件的文件夹。现在的问题是我使用下面的代码直接从 .obb 文件中读取数据，而不提取数据。

这是官方文档[http://developer.android.com/google/play/expansion-files.html](http://developer.android.com/google/play/expansion-files.html)在从 ZIP 文件中读取主题下给出的代码

```
ZipResourceFile expansionFile = APKExpansionSupport.getAPKExpansionZipFile(MyActivity.this, 1, 0);
String pathToFileInsideZip = "main.1.com.my.expansionfiles.obb/data/" +filename;
InputStream fileStream = expansionFile.getInputStream(pathToFileInsideZip); 
```

我有一个`for loop`原因是我正在调用编写此代码，以便它会一一读取所有 xml 并使数据准备好供我显示。

以上将直接从 .obb 文件中读取数据，但问题是提取数据需要花费大量时间吗？

为什么这样？我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:06:43.940

我相信**pathToFileInsideZip**不会

> main.1.com.my.expansionfiles.obb/data/[文件]。

我认为这只是

> “数据/[文件]”

# mysql - 插入重复键更新如果

> ID：15160943
> 
> 赞同：1
> 
> 时间：2013-03-01T15:14:28.493
> 
> 标签：mysql, sql, sql-insert

我对此进行了很多研究，并提出了以下建议：

```
INSERT INTO actives
SELECT email, active_date
FROM actives_ac
ON DUPLICATE KEY UPDATE active_date = IF (
    active_date < VALUES(active_date), VALUES(active_date), active_date
); 
```

结果，`SQL Error (1136): Column count doesn't match value count at row 1`。

`email`字段`VARCHAR(255)`既是 a`KEY`又`UNIQUE`在两个表中。 `active_date`是一个`DATE`字段。

我正在尝试插入一条记录，如果它在活动表中是新的，或者如果 in`actives_ac.active_date`中的值比已经 in 中的值更新，则更新记录`actives.active_date`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:16:29.453

它只是意味着您要插入的值的数量与表上的总列数不匹配。尝试通过指定将插入值的列来更明确，例如，

```
INSERT INTO actives (email, active_date)
SELECT email, active_date 
FROM actives_ac
..... 
```

注意：您这样做的原因是因为您有一个设置为`AUTO_INCREMENT`ed 的列，对吗？

# php - php.mysqli 的新手并停留在选择查询上

> ID：15160944
> 
> 赞同：-1
> 
> 时间：2013-03-01T15:14:28.410
> 
> 标签：php, ajax, mysqli

我正在尝试对以下代码进行 Ajax 调用，但我得到了一个 500 错误。任何关于我做错了什么的指示都将受到欢迎。谢谢

```
if isset(($_POST['lodgeChoice']))
{
    require_once $_SERVER['DOCUMENT_ROOT'] . '/Includes/datalogin.php';
    $lodgeChoice = $_POST['lodgeChoice'];
    $startDate = $_POST['dateChosen'];
    $duration = $_POST['duration'];

    $endDate = strtotime($startDate. ' + ' . $duration . ' days');

    $mysql_query = 'SELECT id FROM bookings WHERE (the_date BETWEEN "' . $startDate . '" AND "' . $endDate . '") AND id_item = ' . $lodgeChoice;

    if($stmt = $mysqli->prepare('SELECT COUNT(*) FROM bookings WHERE (the_date BETWEEN "?" AND "?") AND (id_item = ?)');
        $stmt->bind_param("sss",$startDate, $endDate,$lodgeChoice);
        $stmt->execute();
        $stmt->bind_result($count);
        $stmt->fetch();
        $stmt->close();

        return ($count > 0 ? TRUE : FALSE);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:51:33.707

我强烈推荐使用支持语法高亮的代码编辑器，因为你会非常清楚地看到你的错误。

`if`我将您的代码粘贴到 Netbeans 中，它会立即在您的代码中的两个语句上标记错误。

第一个： if 条件周围没有括号。（您在 post 变量周围也有太多括号，但这不会导致任何错误）

```
if isset(($_POST['lodgeChoice']))
  ^                              ^
bracket reqd here              and here 
```

第二个，你在末尾有一个分号，这是错误的，并且你想要在`if()`.

```
//removed ; from end of the if() line:
if($stmt = $mysqli->prepare('SELECT COUNT(*) FROM bookings WHERE (the_date BETWEEN "?" AND "?") AND (id_item = ?)')
{    //added this line
    .....
    .....
}   //added this line as well. 
```

希望有帮助。

正如我所说，一个体面的代码编辑器会让你的生活变得更轻松。而且由于您可以免费获得一些非常好的编辑器，因此真的没有理由不使用它。

# python - Python 调试器告诉我 Numpy 数组的值是“*** 最新帧”

> ID：15160946
> 
> 赞同：39
> 
> 时间：2013-03-01T15:14:38.767
> 
> 标签：python, numpy, pdb

这是什么意思？

我的函数从 python/c 库中获取两个 numpy 数组。在该函数调用之后，我打开调试器以查找错误，因此我添加了该行以查看两个 numpy 数组。

```
 import pdb; pdb.set_trace() 
```

但是对于`arrays` `pdb`唯一返回消息之一的值`*** Newest frame`

PDB 输出：

```
(Pdb) type(d)
<type 'numpy.ndarray'>
(Pdb) type(f)
<type 'numpy.ndarray'>
(Pdb) f.shape
(3, 3, 17856)
(Pdb) d[0].shape
*** Newest frame
(Pdb) d[0]
*** Newest frame 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-01T15:36:38.117

该命令`d`是[用于调试器](http://docs.python.org/2/library/pdb.html#debugger-commands)的命令，用于将堆栈向下移动到“较新的帧”。似乎解析无法处理这种歧义。

尝试重命名变量`d`。

**编辑**：实际上，评论表明比重命名更好的处理。

# postgresql-9.2 - 如何在具有本地 postgres 的计算机之间共享表？

> ID：15160947
> 
> 赞同：1
> 
> 时间：2013-03-01T15:14:42.450
> 
> 标签：postgresql-9.2

我在一个没有服务器功能的小型办公室工作，但我们需要每周在彼此之间共享大型数据表（~50MM 行）。目前，我们使用一系列在闪存驱动器上传递的 Microsoft Access 表。

有没有办法让我将 postgres 表放到闪存驱动器上，让另一台计算机能够在他们的 postgres 程序上打开和使用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:17:20.417

PostgreSQL 是一个成熟的 RDBMS - 将其安装在中央服务器上（如果您没有一台机器，请指定其中一台）并将其用作数据库服务器。

在我看来，您目前正在使用 PostgreSQL 的便携式版本 - 因此，您使用的任何软件可能都需要为此进行适当配置。

# excel - 检查一张纸中许多单元格中的值

> ID：15160952
> 
> 赞同：0
> 
> 时间：2013-03-01T15:14:49.370
> 
> 标签：excel, function

我在 Excel 中有两张工作表。在一张纸上，我想要一个验证第二张纸的功能。

附上截图以便更好理解： ![我要求的示例](../Images/92bd5805230bc525c9b0c0f39a42d92b.png)

**编辑**：我像这样使用它并且它有效：=IF(AND(ISBLANK(ABS!P4),ISBLANK(ABS!P35),ISBLANK(ABS!P38),ISBLANK(ABS!P43),ISBLANK(ABS!P49 ),ISBLANK(ABS!P53),ISBLANK(ABS!P54),ISBLANK(ABS!P55),ISBLANK(ABS!P71),ISBLANK(ABS!P76),ISBLANK(ABS!P77),"未完成","完毕”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:20:34.170

您可以`COUNTBLANK()`像这样使用该功能：

```
=IF(COUNTBLANK(Sheet1!A1:A10)>0,"No","Yes") 
```

# android - 我有一个带有特定位置图标的地图视图。如何添加 mylocationoverlay？

> ID：15160953
> 
> 赞同：1
> 
> 时间：2013-03-01T15:14:51.637
> 
> 标签：android, map, location

我已经能够`mapview`从在线教程创建一个。现在工作正常。但是，我想了解如何添加我当前的位置？我已经完成了几个教程，但无法理解它。有任何想法吗？这是我将使用的代码。

MainActivity.java

```
 package com.example.midlandtest;

     import android.app.Activity;
     import android.location.Location;
     import android.os.Bundle;
     import android.view.Menu;
     import com.google.android.gms.maps.CameraUpdateFactory;
     import com.google.android.gms.maps.GoogleMap;
     import com.google.android.gms.maps.MapFragment;
     import com.google.android.gms.maps.model.BitmapDescriptorFactory;
     import com.google.android.gms.maps.model.LatLng;
     import com.google.android.gms.maps.model.LatLngBounds;
     import com.google.android.gms.maps.model.Marker;
     import com.google.android.gms.maps.model.MarkerOptions;

     public class MainActivity extends Activity {
       static final LatLng HAMBURG = new LatLng(53.28000, -7.49000);
       static final LatLng KIEL = new LatLng(53.274823, -7.492655);
     private GoogleMap map;

     @Override
      protected void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);
     map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
        .getMap();
     Marker hamburg = map.addMarker(new MarkerOptions().position(HAMBURG)
        .title("Tullamore"));
     Marker kiel = map.addMarker(new MarkerOptions()
        .position(KIEL)
        .title("Midlands Regional Authority")
        .snippet("Hey :-)")
        .icon(BitmapDescriptorFactory
            .fromResource(R.drawable.ic_launcher)));

    // Move the camera instantly to hamburg with a zoom of 15.
    map.moveCamera(CameraUpdateFactory.newLatLngZoom(HAMBURG, 15));

    // Zoom in, animating the camera.
    map.animateCamera(CameraUpdateFactory.zoomTo(10), 2000, null);
     }

      @Override
      public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
        }

     } 
```

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.midlandtest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="15"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.example.midlandtest.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <uses-permission android:name="com.example.midlandtest.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
       <uses-permission 
        android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.midlandtest.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="-" />
      </application>

      </manifest> 
```

主要的.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.MapFragment" />

 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:26:46.093

致电[`setMyLocationEnabled(true)`您的`GoogleMap`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap#setMyLocationEnabled%28boolean%29).

# c# - MySqlBulkLoader 和 Unicode 数据

> ID：15160956
> 
> 赞同：1
> 
> 时间：2013-03-01T15:15:00.260
> 
> 标签：c#, mysql, database, unicode, bulk-load

我目前正在尝试在 .NET 应用程序中使用 MySqlBulkLoader 来添加 Unicode 和 UTF8 格式的数据。我的代码执行以下操作

*   使用 TextWriter 和 Stream writer 写入制表符分隔的文本文件

    使用 (TextWriter tr = new StreamWriter(newFile, false, Encoding.UTF8))

*   使用 Charset=utf8 的连接字符串打开 MySqlBulkLoader；在最后

    MySqlBulkLoader bl = new MySqlBulkLoader(new MySqlConnection(mysqlconnstring));

*   BL 的字符集为 UTF8

    bl.CharacterSet = "utf8";

*   然后我调用 bl.Load();

但是当我检查数据库时，我得到了？对于 Unicode 字符...我检查了我正在写入的文本文件，并且字符显示正确。

我已经尝试将数据库和表的排序规则设置为 utf8_bin，基于 [this question [1](https://stackoverflow.com/questions/1385994/read-write-unicode-data-in-mysql)但我仍然得到？...我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:35:11.063

对...即使设置了表格的排序规则，也没有什么区别，但是您确实需要设置表格本身的字符集...我做了以下...

```
ALTER TABLE tablename CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

它奏效了！快乐的时光！

# android - 如何从适配器调用 ListFragment 中定义的方法？

> ID：15160958
> 
> 赞同：7
> 
> 时间：2013-03-01T15:15:05.193
> 
> 标签：android, adapter

我有一个`ListFragment`和一个自定义适配器。

从适配器中，我`onClick`从行中定义的按钮获取事件。在`onClick`方法中，我得到了一些 id，我想将其传递给`ListFragment`做一些事情。

如何`ListFragment`从适配器中调用方法 showTask？

**列表片段**

```
public class TaskListFragment extends ListFragment{

    /* ... */

    @Override
    public void onCreate(Bundle savedInstanceState) {       
        super.onCreate(savedInstanceState);
        mAdapter = new TaskListAdapter(getActivity(), data);        
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) 
    {
        super.onActivityCreated(savedInstanceState);
        setListAdapter(mAdapter);
    }   

    public void showTask(long id) {

        FragmentTransaction ft = getFragmentManager().beginTransaction();

        TaskFragment taskFragment = new TaskFragment();

        Bundle args = new Bundle();
        args.putLong("id", id);
        taskFragment.setArguments(args);

        ft.replace(R.id.fragment_container, taskFragment);
        ft.commit();         
    }
} 
```

**适配器**

```
public class TaskListAdapter extends ArrayAdapter<Task>{

    /* ... */

    private OnClickListener mOnClickListener = new OnClickListener() {
        @Override
        public void onClick(View v) {
            long id = (Integer) v.getTag();
            // how can I call showTask(id) ?
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-01T15:18:45.683

一个常见的解决方案是将适配器作为片段的内部类，因此它可以直接调用该方法。

或者，通过其构造函数将片段（或片段实现的某些接口）传递给适配器。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-01T15:19:11.463

像这样创建您的适配器：

```
@Override
public void onCreate(Bundle savedInstanceState) {       
    super.onCreate(savedInstanceState);
    mAdapter = new TaskListAdapter(getActivity(), data, TaskListFragment.this);        
} 
```

这会将您的适配器构造函数更改为：

```
public TaskListAdapter(Context context, List<Task> data, TastListFragment fragment) {
    this.fragment = fragment;
} 
```

现在，您有一个指向您的 TaskListFragment 的对象：

```
private OnClickListener mOnClickListener = new OnClickListener() {
    @Override
    public void onClick(View v) {
        long id = (Integer) v.getTag();
        fragment.showTask(id);
    }
}; 
```

# javascript - 选择父元素（不使用 Jquery）

> ID：15160960
> 
> 赞同：4
> 
> 时间：2013-03-01T15:15:10.547
> 
> 标签：javascript, dom

我只需要访问父 div，其中有一个按钮可以更改他的兄弟姐妹 div。一个代码示例可以更好地解释：

```
<div class="parent">  <!-- This is structure repeats N times -->
    <div class="divToToggleVisiblity divA">trololo A</div>
    <div class="divToToggleVisiblity divB">trololo B</div>
    <button onClick="toggleThem(this)">This button will toggle above divs</button>
</div>

function toggleThem(a){  // something like this, BUT without Jquery
    $(a).closest(".parent").find(".divA").hide();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T15:16:49.903

这就是[`parentNode`](https://developer.mozilla.org/en-US/docs/DOM/Node.parentNode)：

```
a.parentNode.querySelectorAll('.divA'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T15:17:48.740

```
function toggleThem(elem) {
    elem.parentNode.getElementsByClassName('divA')[0].style.display = 'none';
} 
```

# box-api - 获取给定令牌的用户 ID

> ID：15160965
> 
> 赞同：1
> 
> 时间：2013-03-01T15:15:29.113
> 
> 标签：box-api

我正在使用 box API v2 并成功使用 OAuth2。我成功地取回了访问令牌，但为了避免“混淆代理问题”，我需要有一种方法来获取给定访问令牌相关的用户 ID。

有没有办法做到这一点？我正在尝试使用 /tokens 端点，但没有运气。我读到你需要启用它，但我找不到如何。即使我设法启用它，那会有帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:57:19.340

端点将`/users/me`告诉您与用于验证请求的访问令牌关联的用户 ID（和其他信息）。[文档在这里。](http://developers.box.com/docs/#users-get-the-current-users-information-2)

# java - GWT 中的 MYSQL 驱动程序错误

> ID：15160966
> 
> 赞同：1
> 
> 时间：2013-03-01T15:15:41.300
> 
> 标签：java, eclipse, gwt, jdbc

几个小时以来，我一直试图将我的 GWT 项目连接到我的 MySQL 数据库，但是在加载驱动程序时，我一次又一次地遇到一个奇怪的错误。

服务器的代码是： 请注意，我只是尝试加载 mysql 的驱动程序，并且我使用 GWT 附带的示例项目。saveToDB(String) 是有趣的部分。

```
package test.server;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;

import test.client.GreetingService;
import com.google.gwt.user.server.rpc.RemoteServiceServlet;

/**
 * The server side implementation of the RPC service.
 */
@SuppressWarnings("serial")
public class GreetingServiceImpl extends RemoteServiceServlet implements
        GreetingService {

    public String greetServer(String input){
        // Verify that the input is valid. 
        saveToDB(input);
        String serverInfo = getServletContext().getServerInfo();
        String userAgent = getThreadLocalRequest().getHeader("User-Agent");

        // Escape data from the client to avoid cross-site script vulnerabilities.
        input = escapeHtml(input);
        userAgent = escapeHtml(userAgent);

        return "Hello, " + input + "!<br><br>I am running " + serverInfo
                + ".<br><br>It looks like you are using:<br>" + userAgent;
    }

    /**
     * Escape an html string. Escaping data received from the client helps to
     * prevent cross-site script vulnerabilities.
     * 
     * @param html the html string to escape
     * @return the escaped string
     */
    private String escapeHtml(String html) {
        if (html == null) {
            return null;
        }
        return html.replaceAll("&", "&amp;").replaceAll("<", "&lt;")
                .replaceAll(">", "&gt;");
    }

    public void saveToDB(String input){
        String query = "INSERT INTO `oryx.model`" +
                "VALUES ('" + input + "');";
                // Save the model that is in variable "message" (very long string/text)
                //try {

                Connection conn = getConn();
               // Statement update = (Statement) conn.createStatement();
                //update.executeUpdate(query);

                //get last id 
               /*ResultSet result = (ResultSet) update.getGeneratedKeys(); 
                if (result != null && result.next()) { 
                    int rsId = result.getInt(1);  
                }

                result.close();
                update.close();
                conn.close();
            } catch(SQLException e) {
                System.err.println("Mysql Statement Error: " + query);
                e.printStackTrace();
            }*/

    }
    private Connection getConn() {

        Connection conn     = null;
        String url          = "jdbc:mysql://localhost:3306/";
        String db           = "mysqld";
        String driver       = "com.mysql.jdbc.Driver";
        String user         = "user";
        String pass         = "pass";

        try {
            System.out.println("ERROR 1");
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            System.out.println("ERROR 2");
        } catch (Exception e) {
            // TODO Auto-generated catch block
            //e.printStackTrace();
            System.out.println("ERROR 3");
        } 
        //conn = DriverManager.getConnection(url+db, user, pass);

        //SQL EXCEPTION
        //System.err.println("Mysql Connection Error: ");
        //CLASS NOT FOUND
      //e.printStackTrace();
            return conn;
}
} 
```

我总是得到的错误：

> 严重：javax.servlet.ServletContext 日志：调度传入的 RPC 调用 com.google.gwt.user.server.rpc.UnexpectedException 时出现异常：服务方法'public abstract java.lang.String test.client.GreetingService.greetServer(java.lang .String)' 引发了意外异常：com.google.gwt.user.server.rpc 的 com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:389) 处的 java.lang.ExceptionInInitializerError。 RPC.invokeAndEncodeResponse(RPC.java:579) 在 com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208) 在 com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost( RemoteServiceServlet.java:248) 在 com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62) 在 javax.servlet.http.HttpServlet。服务（HttpServlet.java:637）在 javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 在 org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511) 在 org.mortbay.jetty .servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166) 在 com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain .doFilter(ServletHandler.java:1157) 在 com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157 ) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain 的 com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)。doFilter(ServletHandler.java:1157) 在 com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java: 1157) 在 com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine .tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.tools.development.BackendServersFilter.doFilter (BackendServersFilter.java:97) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388) 在 org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216) 在 org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler. java:182) 在 org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765) 在 org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418) 在 com.google.appengine.tools .development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94) 在 org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) 在 com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService .java:409) 在 org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) 在 org.mortbay.jetty.Server.handle(Server.java:326) 在 org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542) 在 org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938) 在 org.mortbay.jetty.HttpParser.parseNext(HttpParser .java:755）在 org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218) 在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 在 org.mortbay.io.nio.SelectChannelEndPoint。 run(SelectChannelEndPoint.java:409) at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 原因：java.lang.Class.forName0(Native Method) at java.lang.ExceptionInInitializerError。 lang.Class.forName(Unknown Source) at test.server.GreetingServiceImpl.getConn(GreetingServiceImpl.java:88) at test.server.GreetingServiceImpl.saveToDB(GreetingServiceImpl.java:56) 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke( 的 test.server.GreetingServiceImpl.greetServer(GreetingServiceImpl.java:22) Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115) at com.google.gwt.user .server.rpc.RPC.invokeAndEncodeResponse(RPC.java:561) ... 38 更多原因：java.security.AccessControlException：在 java.security.AccessControlContext.checkPermission(Unknown Source) 的访问被拒绝 (java.lang.RuntimePermission modifyThreadGroup) ) 在 java.lang.SecurityManager 的 java.security.AccessController.checkPermission(Unknown Source)。checkPermission(Unknown Source) at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:289) at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkAccess(DevAppServerFactory.java:314 ) at java.lang.ThreadGroup.checkAccess(Unknown Source) at java.lang.Thread.init(Unknown Source) at java.lang.Thread.(Unknown Source) at com.mysql.jdbc.NonRegisteringDriver$1.(NonRegisteringDriver.java :90) 在 com.mysql.jdbc.NonRegisteringDriver.(NonRegisteringDriver.java:89) ... 49 更多checkAccess(DevAppServerFactory.java:314) at java.lang.ThreadGroup.checkAccess(Unknown Source) at java.lang.Thread.init(Unknown Source) at java.lang.Thread.(Unknown Source) at com.mysql.jdbc。 NonRegisteringDriver$1.(NonRegisteringDriver.java:90) at com.mysql.jdbc.NonRegisteringDriver.(NonRegisteringDriver.java:89) ... 49 更多checkAccess(DevAppServerFactory.java:314) at java.lang.ThreadGroup.checkAccess(Unknown Source) at java.lang.Thread.init(Unknown Source) at java.lang.Thread.(Unknown Source) at com.mysql.jdbc。 NonRegisteringDriver$1.(NonRegisteringDriver.java:90) at com.mysql.jdbc.NonRegisteringDriver.(NonRegisteringDriver.java:89) ... 49 更多

如果您愿意，可以在以下网址查看整个代码： [http ://www19.zippyshare.com/v/9248211/file.html](http://www19.zippyshare.com/v/9248211/file.html)

所有帮助将不胜感激。

//萨米语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:15:51.790

> 引起：java.security.AccessControlException：访问被拒绝（java.lang.RuntimePermission modifyThreadGroup）

和

> 在 com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager

是有趣的部分。

您不能在 AppEngine 上使用 MySQL：[https ://developers.google.com/appengine/docs/java/jrewhitelist](https://developers.google.com/appengine/docs/java/jrewhitelist)

除非您使用 CloudSQL，否则它具有特定的 API：[https ://developers.google.com/appengine/docs/java/cloud-sql/developers-guide](https://developers.google.com/appengine/docs/java/cloud-sql/developers-guide)

# java - 在 Weblogic 上部署 Java 应用程序（主类）

> ID：15160967
> 
> 赞同：1
> 
> 时间：2013-03-01T15:15:41.933
> 
> 标签：java, web-services, weblogic, main

我有一个由主类和 Java 代理（使用 Axis 1.4 创建）组成的 Java 应用程序。没有 Servlet 或 JSP

该程序从 Excel 表中获取 i/p。使用 Web 服务查询 Internet 应用程序。此过程继续进行，直到 Excel 中的所有记录都已执行。

现在我的第一个问题是如何在 Weblogic 上部署这个应用程序：作为 WAR、EAR 或 JAR（当然不是 WAR）如果它是一个 Web 应用程序，我们可以通过如下路径调用它

```
http://server:port/contxt_root/abc.jsp 
```

但这不是一个 Web 应用程序，所以我将如何调用它。在 Jdevloper 中，我右键单击 Main Class，单击 RUN 并开始执行。现在我必须在 Linux 系统中部署 Weblogic Server

第二个问题：我如何摆脱它。假设我希望它每周或每天运行一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:20:58.727

为此，您不需要任何与 Web 相关的服务器，而是需要某种任务调度程序，例如[cron](http://en.wikipedia.org/wiki/Cron)来安排[启动 Java 应用程序的命令行](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)

你也可以运行你编译的类，我建议为它们[创建一个 JAR 文件](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)，这会让事情变得更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:26:39.903

您可以使您的程序成为计时器 EJB： [http ://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html)

请注意，Java EE 实体不适用于本地文件，因此您需要考虑您的 Excel 工作表所在的位置。

我不太确定您是否需要将其设为 Java EE 应用程序，而只是一个预定程序。

祝你好运

# java - 无法弄清楚为什么我的线条形状不会重新调整大小

> ID：15160968
> 
> 赞同：-1
> 
> 时间：2013-03-01T15:15:44.037
> 
> 标签：java, drawing, awt, java-2d

我正在制作一个绘图小程序，但我无法重新调整线条的大小。矩形和椭圆形重新调整大小就好了，但不是线。我相信我对重新调整大小的方法有正确的代码，以允许重新调整行的大小，但它就是行不通。我希望有人能帮我解决这个问题。

这是课程：

```
import java.awt.Color;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import java.util.ArrayList;
import model.Model;
import shapes.Rectangle;
import shapes.Shape;
import shapes.Line;
import ui.panels.ActionPanel;
import ui.panels.ButtonPanel.ColorPanel;
import ui.panels.MainPanel;

public class ShapeMouseHandler extends MouseAdapter { 

    private Model model;
    private int startX;
    private int startY;
    private int dragStartX;
    private int dragStartY;
    private String oldColor;
    private MainPanel.ColorPanel colorPanel;
    private ActionPanel actionPanel;
    private int i = -1, selectedInstance = 0;

    private ArrayList<Shape> shape = new ArrayList<Shape>();

    public ShapeMouseHandler(Model model) {
        this.model = model;
    }

    public void mousePressed(MouseEvent e) {           
           dragStartX = e.getX();
           dragStartY = e.getY();
        if (model.getAction() == Model.Actions.DRAW) {
            startX = e.getX();
            startY = e.getY();
            i++;
            shape.add(model.createShape(i));
            if (shape.get(i) != null) {
                shape.get(i).setFillColor(colorPanel.getFillColorSelection());
                shape.get(i).setLineColor(colorPanel.getLineColorSelection());
                shape.get(i).setX(e.getX());
                shape.get(i).setY(e.getY());
                if (shape.get(i) instanceof Line) { 
                    ((Line)shape.get(i)).setX2(e.getX());
                    ((Line)shape.get(i)).setY2(e.getY());
                }
            }
        }

        if (model.getAction() == Model.Actions.MOVE) {
            selectedInstance = model.getSelectedInstance(e.getX(), e.getY());
            System.out.println("Selected Index :-------------  " + selectedInstance);

            if (selectedInstance != -1) {
                oldColor = shape.get(selectedInstance).getLineColorType();
                shape.get(selectedInstance).setLineColor(Model.MyColors.RED.toString());
                startX = shape.get(selectedInstance).getX() - e.getX();
                startY = shape.get(selectedInstance).getY() - e.getY();

            }

        }
        if (model.getAction() == Model.Actions.RESIZE) {
            selectedInstance = model.getSelectedInstance(e.getX(), e.getY());
            if (selectedInstance != -1) {
                startX=shape.get(selectedInstance).getX();
                startY=shape.get(selectedInstance).getY();
                oldColor = shape.get(selectedInstance).getLineColorType();
                shape.get(selectedInstance).setLineColor(Model.MyColors.RED.toString());
            }
        }
        if (model.getAction() == Model.Actions.REMOVE) {

            selectedInstance = model.getSelectedInstance(e.getX(), e.getY());
            if (selectedInstance != -1) {
                model.removeShape(selectedInstance);
                shape.remove(selectedInstance);
            }

        }
        if (model.getAction() == Model.Actions.CHANGE) {
            selectedInstance = model.getSelectedInstance(e.getX(), e.getY());
            if (selectedInstance != -1) {
                Shape selected = model.getShapes().get(selectedInstance);
                startX = selected.getX();
                startY = selected.getY();
                int width = selected.getWidth();
                int height = selected.getHeight();
                if (shape.get(selectedInstance) != null) {
                     shape.get(selectedInstance).setLineColor(colorPanel.getLineColorSelection());
                    shape.get(selectedInstance).setFillColor(colorPanel.getFillColorSelection());
                    if (shape.get(selectedInstance) instanceof Rectangle) {
                        ((Rectangle) shape.get(selectedInstance)).setFill(actionPanel.isFillChecked());
                    }
                }
            }
        }
        model.getContainer().repaint();
    }

    public void mouseDragged(MouseEvent e) {        

            if (shape != null) {
                if (model.getAction() == Model.Actions.DRAW) {
                    if (shape.get(i) instanceof Line) {
                        ((Line) shape.get(i)).setX2(e.getX());
                        ((Line) shape.get(i)).setY2(e.getY());
                    } else {
                        shape.get(i).setX(Math.min(startX, e.getX()));
                        shape.get(i).setY(Math.min(startY, e.getY()));

                        if (true) {

                            (shape.get(i)).setWidth(Math.abs(startX - e.getX()));
                            (shape.get(i)).setHeight(Math.abs(startY - e.getY()));
                        }
                    }
                }

            if (model.getAction() == Model.Actions.MOVE) {
                if (selectedInstance != -1) {
                    shape.get(selectedInstance).setX(e.getX() + startX);
                    shape.get(selectedInstance).setY(e.getY() + startY);
                }
                if (shape.get(i) instanceof Line) {

                    int diffX = e.getX() - dragStartX;
                    dragStartX = e.getX();
                    int diffY = e.getY() - dragStartY;
                    dragStartY = e.getY();

                    ((Line) shape.get(i)).moveLineX(diffX);
                    ((Line) shape.get(i)).moveLineY(diffY);

                }
                if (model.getAction() == Model.Actions.RESIZE) {
                    if (shape.get(i) instanceof Line) { 
                        System.out.println("Resizing line");
                        ((Line) shape.get(i)).setX2(e.getX());
                        ((Line) shape.get(i)).setY2(e.getY());
                    } else {
                        shape.get(selectedInstance).setX(Math.min(startX, e.getX()));
                        shape.get(selectedInstance).setY(Math.min(startY, e.getY()));

                        shape.get(selectedInstance).setWidth(Math.abs(startX - e.getX()));
                        shape.get(selectedInstance).setHeight(Math.abs(startY - e.getY()));
                    }
                    //}
                }
            if (model.getAction() == Model.Actions.CHANGE && selectedInstance != -1) {

            }
        }

        model.getContainer().repaint();

    }
    }

    public void mouseReleased(MouseEvent e) {
        if (selectedInstance != -1 && (model.getAction() == Model.Actions.MOVE || model.getAction() == Model.Actions.RESIZE)) {
            shape.get(selectedInstance).setLineColor(oldColor);
        }
    }

    public void reset() {                      

        i = -1;
        shape.clear();
    }

    public void setPanels(MainPanel.ColorPanel colorPanel, ActionPanel actionPanel) {
        this.colorPanel = colorPanel;
        this.actionPanel = actionPanel;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T21:34:10.947

您的代码过于复杂。[您可以使用AffineTransform 的 createTransformedShape 方法](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/AffineTransform.html#createTransformedShape%28java.awt.Shape%29)以通用方式调整任何形状的大小

请参阅此示例：[如何在 Java 中旋转椭圆形状？](https://stackoverflow.com/questions/10872311/how-to-have-rotated-ellipse-shape-in-java)

# javascript - 如何在单击按钮时获取按钮以执行功能

> ID：15160973
> 
> 赞同：0
> 
> 时间：2013-03-01T15:16:09.133
> 
> 标签：javascript, jquery, html

我在下面有一个按钮：

```
<p><button id='submitstudents'>Submit Students</button></p> 
```

我想要按钮做的是触发该`editvalidation()`功能，如果通过了，则继续进行确认。我已经为验证设置了 jquery 代码，并在验证已通过时显示确认，但是如何让按钮返回单击的`editvalidation()`whenc？

下面是相关的jquery代码：

**编辑验证（）：**

```
 function editvalidation()
{
    if ($("#coursesDrop").val()==""){
        $("#courseAlert").html("Please Select a Course from the Course Drop Down Menu");
    }
    if ($("#coursesDrop").val()!="" && $("#courseadd").children().length==0){
        $("#courseAlert").html("You have not Selected any Students you wish to Add into Course");
    }
    if ($("#coursesDrop").val()!="" && $("#courseadd").children().length!=0){
        return true;
    }
    return false;
} 
```

**显示确认（）：**

```
 function showConfirm(){

          var courseNoInput = document.getElementById('currentCourse').value;
          var courseNameInput = document.getElementById('currentCourseName').value;

          if (editvalidation()) {

         var confirmMsg=confirm("Are you sure you want to add your selected Students to this Course:" + "\n" + "Course: " + courseNoInput + " - " + courseNameInput);

         if (confirmMsg==true)
         {
         submitform();   
     }
  }
} 
```

**当前甚至检查按钮的点击：**

```
 $('body').on('click', '#submitstudents', showConfirm); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:18:34.030

你有没有尝试过

```
$('#submitstudents').on('click', function(){ if(editvalidation()) showConfirm(); }); 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:20:41.777

试试这个：

```
$('#submitstudents').click(function(){
  if(editvalidation())
    showConfirm();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:40:27.213

我以前遇到过这种情况。这段代码一直都很完美：

```
$('#submitstudents').live('click', function(){
   ...do what ever you want...
}); 
```

# java - 03-01 17:00:28.629：E/AndroidRuntime（30201）：致命异常：主要

> ID：15160976
> 
> 赞同：1
> 
> 时间：2013-03-01T15:16:27.220
> 
> 标签：java, android, gridview

所以使用gridview创建了视图。我有一种包含图像视图的布局。单击 gridview 上的视图时，我想激活相同的布局，但在布局中使用单击的图像。但是，我遇到了错误。

这是我的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button1"
    android:layout_alignBottom="@+id/button1"
    android:layout_alignParentRight="true"
    android:text="Hints" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="92dp"
    android:src="@drawable/adese" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="69dp"
    android:text="Get Hint" />

<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/imageView1"
    android:layout_alignParentLeft="true"
    android:text="Back" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/imageView1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="32dp"
    android:ems="10" >

    <requestFocus />
</EditText>

</RelativeLayout> 
```

这是我的java

```
package com.example.turkishlogoquiz;

import android.os.Bundle;
import android.provider.MediaStore.Images;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.content.Intent;
import android.content.res.Resources;
import android.graphics.drawable.Drawable;

import android.widget.*;
import android.widget.AdapterView.OnItemClickListener;

public class LogoSelectionActivity extends Activity {

ImageView view;
Drawable image; 
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_list_logos);

    view = (ImageView)findViewById(R.id.imageView1);

    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this));

    gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long     id) {

            v = (ImageView)v;
            image=v.getResources().getDrawable(v.getId());
            view.setImageDrawable(image);
            Intent intent = new Intent(LogoSelectionActivity.this,     LogoActivity.class);
            startActivity(intent);
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

这是我的图像适配器代码

```
package com.example.turkishlogoquiz;

import android.content.Context;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;

public class ImageAdapter extends BaseAdapter {
private Context mContext;

public ImageAdapter(Context c) {
    mContext = c;
}

public int getCount() {
    return mThumbIds.length;
}

public Object getItem(int position) {
    return null;
}

public long getItemId(int position) {
    return 0;
}

// create a new ImageView for each item referenced by the Adapter
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(200, 200));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
    }

    imageView.setImageResource(mThumbIds[position]);
    return imageView;
}

// references to our images
private Integer[] mThumbIds = {
        R.drawable.adese, R.drawable.birvar,
        R.drawable.agaoglu, R.drawable.akinsoft,
        R.drawable.afra,

};
} 
```

如果有人帮助我，我将非常感激。

这是我的错误信息

```
03-02 22:16:03.524: E/AndroidRuntime(32407): FATAL EXCEPTION: main
03-02 22:16:03.524: E/AndroidRuntime(32407): android.content.res.Resources$NotFoundException: Resource ID #0xffffffff
03-02 22:16:03.524: E/AndroidRuntime(32407):    at android.content.res.Resources.getValue(Resources.java:1026)
03-02 22:16:03.524: E/AndroidRuntime(32407):    at android.content.res.Resources.getDrawable(Resources.java:671)
03-02 22:16:03.524: E/AndroidRuntime(32407):    at com.example.turkishlogoquiz.LogoSelectionActivity$1.onItemClick(LogoSelectionActivity.java:35)
03-02 22:16:03.524: E/AndroidRuntime(32407):    at android.widget.AdapterView.performItemClick(AdapterView.java:298)
03-02 22:16:03.524: E/AndroidRuntime(32407):    at android.widget.AbsListView.performItemClick(AbsListView.java:1283)
03-02 22:16:03.524: E/AndroidRuntime(32407):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:3074)
03-02 22:16:03.524: E/AndroidRuntime(32407):    at android.widget.AbsListView$1.run(AbsListView.java:4147)
03-02 22:16:03.524: E/AndroidRuntime(32407):    at android.os.Handler.handleCallback(Handler.java:615)
03-02 22:16:03.524: E/AndroidRuntime(32407):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-02 22:16:03.524: E/AndroidRuntime(32407):    at android.os.Looper.loop(Looper.java:137)
03-02 22:16:03.524: E/AndroidRuntime(32407):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-02 22:16:03.524: E/AndroidRuntime(32407):    at java.lang.reflect.Method.invokeNative(Native Method)
03-02 22:16:03.524: E/AndroidRuntime(32407):    at java.lang.reflect.Method.invoke(Method.java:511)
03-02 22:16:03.524: E/AndroidRuntime(32407):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
03-02 22:16:03.524: E/AndroidRuntime(32407):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
03-02 22:16:03.524: E/AndroidRuntime(32407):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T20:39:23.513

The stack trace says this:

```
android.content.res.Resources$NotFoundException: Resource ID #0xffffffff 
```

`v.getId()` returns the `id` of the `View`, which is different than the `int`s in `R.drawable`. This means whan you call `v.getResources().getDrawable()`, it will fail.

What might work:

```
imageView = (ImageView)v;
image=imageView.getDrawable();
view.setImageDrawable(image); 
```

However, since `image` seems to be in the first xml, and the `GridView` in another xml layout file, you are better off passing `position` to the Activity that contains the xml with `image` then getting the Drawable from there. Eg

```
public void onItemClick(AdapterView<?> parent, View v, int position, long  id) {
           Intent intent = new Intent(LogoSelectionActivity.this, LogoActivity.class);
           intent.putExtra ("clicked_position", position)
           startActivity(intent);
       } 
```

Then in `LogoActivity` in `onCreate()`:

```
ImageView view = (ImageView)findViewById(R.id.imageView1);

switch (getIntent().getIntExtra ("clicked_position", -1))
{
  case 0:
    view.setImageResouce (R.drawable.x);
    break;
  case 1:
     view.setImageResouce (R.drawable.y);
     break;
  default:
     view.setImageResouce (R.drawable.default);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:33:50.617

通过阅读您的代码，我只能猜测您的错误发生在哪里，但似乎您`NullPointerException`在以下几行中得到了 a：

```
GridView gridview = (GridView) findViewById(R.id.gridview);
gridview.setAdapter(new ImageAdapter(this)); 
```

您的 XML-layout-file 不包含`GridView`带有 ID的 a，`gridview`因此`findViewById(R.id.gridview)`返回 null。在那之后，您尝试调用`setAdapter(...)`它本身最有可能调用异常。

如果您向我们提供有关异常的更多信息，将会非常有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T20:38:48.943

This seems to be the issue. Your `GridView` is in another xml-layout. So referring it with `R.id.gridview` works fine but attaching a onClick on it won't work as it couldn't be found in current XML layout of the activity. Try movind your gridView in this XML - `(R.layout.activity_list_logos)`

# git - 有没有办法在 git checkout 中使用通配符？

> ID：15160978
> 
> 赞同：74
> 
> 时间：2013-03-01T15:16:31.240
> 
> 标签：git, wildcard, git-checkout

我想要做的是签出一个文件或一组具有像这样的通用名称部分的文件

`git checkout myBranch */myFile.md`和

`git checkout myBranch -- */*Test*`（不确定'--'部分）

代替

`git checkout myBranch src/main/java/a/deep/package/structure/myFile.md`和

`git checkout myBranch src/test/java/a/deep/package/structure/TestOne.java`
`git checkout myBranch src/test/java/a/deep/package/structure/TestTwo.java`
`git checkout myBranch src/test/java/a/deep/package/structure/resources/TestData.sql`

我知道某些 git 命令有一些有限的通配符功能`diff`，`add`但没有找到`checkout`. 有办法吗？

编辑：我在 Linux 上使用 git 1.7.9.5。git 和 shell 命令的工作组合也是可以接受的。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2015-10-23T15:24:47.360

Git**确实使用**[fnmatch(3)](http://man7.org/linux/man-pages/man3/fnmatch.3.html)处理通配符。请参阅[Git 词汇表中的](http://git-scm.com/docs/gitglossary.html#def_pathspec)*pathspec*条目。

但是为了确保 git 可以看到通配符，它​​们必须被转义，否则你的*shell*将首先扩展它们。通常，我在单引号之间使用通配符：

```
git checkout myBranch -- '*/myFile.md' 
```

通配符应用于整个名称，包括目录。

正如您在文档中看到的那样，pathspec 还允许改变如何解释 pathspec 的*魔术签名。**例如，您可以使用icase*设置不区分大小写的路径（您可以键入`':(icase)*readme*'`以查找所有自述文件）。

我在这里引用@bambams 的评论，以防您在 Windows 中遇到问题：

> 这不适用于我在 Windows 中使用 2.8.1.windows.1 并且我正在使用 cmd.exe shell 中的 Git，因此没有内置 globbing。但是，如果您处于如此糟糕的状态，有一个解决方案。结合`git diff --name-only`并`xargs`实现您的目标：
> 
> ```
> git diff --name-only <COMMIT> -- <GLOB>... | xargs git checkout <COMMIT> 
> ```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-01T15:44:45.733

Git 不处理通配符，但你的 shell 可以。

尝试这个 ：

```
git checkout myBranch **/myFile.md 
```

和

```
git checkout myBranch  **/*Test* 
```

使用`**`，您的 shell 将从当前工作目录开始在所有子目录中查找文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-08T14:46:25.880

**电源外壳**

```
@(gci -Recurse *test* | Resolve-Path -Relative) | %{git checkout mybranch -- $_) 
```

gci 生成与条件 ( `*test*`) 匹配的所有文件的列表，然后将其通过管道传输到 Resolve-Path 以获取相对路径。最后，文件名的扁平 (@) 列表通过管道传输到 git 调用中（每个找到的文件执行一次）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-23T05:48:14.547

带有 xargs 的 Windows git bash

```
git difftool myBranch --name-only *.java | xargs git checkout myBranch 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-20T13:51:33.383

如果您有 gitignore 或未跟踪的文件，并且您想在 git checkout 中使用通配符，那么它可能会给您带来问题，解决方案可能是：

```
git ls-files '*/myFile.md' | tr '\n' '\0' | xargs -0 -L1 -I '$' git checkout -- '$' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-17T17:40:17.543

对我来说，任务是检查几个以一种模式命名的文件：

*   `./a/b/c/FirstTest.java`
*   `.d/e/f/SecondTest.java`
*   `./g/h/i/ThirdTest.java`

我用过这个 bash 命令：

```
# 1\. Find files named after "*Test.java" pattern.
# 2\. Execute checkout command on every found file.

find . -name "*Test.java" -exec git checkout master {} \; 
```

同样首先您可以`find`使用 simple 测试命令，`echo`它只打印给定的文本（`{}`在我们的例子中，它将被 shell 替换为当前找到的文件名）：

```
find . -name "*Test.java" -exec echo {} \; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-10T21:55:12.777

其他答案都不适合我，但 bambams 评论有效。我把它变成了一个接受两个参数的 bash 函数。用法：

gitcheckout myBranch '*文件*'

```
gitcheckout()
{
    GIT_DIR=$(git rev-parse --git-dir 2>/dev/null); 
    pushd .;
    cd $GIT_DIR/../;
    git diff --name-only $1 -- $2 | xargs git checkout $1 --;
    popd;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-28T22:51:07.193

如果您需要从提交中获取文件，无论它们是否在该提交中被更改，您可以使用以下命令：

```
git ls-tree --name-only -r myBranch | grep myFilePattern | xargs git checkout myBranch 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-26T14:16:45.297

知道 git 从第三个字符返回分支列表名称，可以切换到通过 [mask] 定义的所需分支：

```
BRANCH_NAME=$(git branch --list | grep [mask] | cut -c3-)
git checkout ${BRANCH_NAME} 
```

# php - 加快 php::PDO->__construct

> ID：15160979
> 
> 赞同：5
> 
> 时间：2013-03-01T15:16:32.650
> 
> 标签：php, mysql, pdo, redbean

我使用 webgrind 和 xdebug 来破坏我的网站性能。php::PDO->__construct 函数花费了 85% 的页面加载时间（大约 1 秒）...

这是无法接受的。我可以以某种方式优化此功能吗？（缓存，mysql配置等）

我正在使用 php、mysql 和 codeigniter 与 redbean。redbean 使用该 pdo 构造函数...

这是函数源代码

```
/** 
 * Establishes a connection to the database using PHP PDO 
 * functionality. If a connection has already been established this 
 * method will simply return directly. This method also turns on 
 * UTF8 for the database and PDO-ERRMODE-EXCEPTION as well as 
 * PDO-FETCH-ASSOC. 
 * 
 * @return void 
 */ 
public function connect() { 
   if ($this->isConnected) return; 
    $user = $this->connectInfo['user']; 
    $pass = $this->connectInfo['pass']; 
    //PDO::MYSQL_ATTR_INIT_COMMAND 
     $this->pdo = new PDO( 
               $this->dsn, 
               $user, 
               $pass, 
               array(1002 => 'SET NAMES utf8', 
                          PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION, 
                          PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC, 

               ) 
     ); 
     $this->pdo->setAttribute(PDO::ATTR_STRINGIFY_FETCHES, true); 
     $this->isConnected = true; 
 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T16:49:07.217

解决方法很简单...

PDO 连接到 localhost -> 1 秒

PDO 连接到 127.0.0.1 -> 50 毫秒...

不要问我为什么...似乎与尝试和等待 ipv6 连接有关，然后回退到良好的旧 ipv4 ... ipv4 地址不尝试 ipv6 ...

# java - Java程序需要根证书吗？

> ID：15160982
> 
> 赞同：1
> 
> 时间：2013-03-01T15:16:40.030
> 
> 标签：java, certificate

我的程序可以在任何网络（家庭）等上运行良好，但不会在我的工作域上运行。该程序登录到surveymonkey.com 并下载和Excel 电子表格。但是我的工作域似乎不喜欢我的导入语句。我猜我需要输入根证书，但我不知道该怎么做。这是我在它不起作用时得到的错误。

```
Warning! About to Delete Survey Results.zip & Survey Results Folder Warning!
waiting for 10 seconds...
deleting previous zip file...
no file to delete.
connecting to surveymonkey logon page...
Exception in thread "main" javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated
at sun.security.ssl.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:397)
at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:128)
at org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:572)
at com.gargoylesoftware.htmlunit.HtmlUnitSSLSocketFactory.connectSocket(HtmlUnitSSLSocketFactory.java:171)
at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180)
at org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:294)
at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:640)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:479)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
at com.gargoylesoftware.htmlunit.HttpWebConnection.getResponse(HttpWebConnection.java:171)
at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseFromWebConnection(WebClient.java:1484)
at com.gargoylesoftware.htmlunit.WebClient.loadWebResponse(WebClient.java:1402)
at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:304)
at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:373)
at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:358)
at surveymonkeytest.Surveymonkeytest.main(Surveymonkeytest.java:107) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:26:30.167

工作 jdk 在 cacerts 文件中是否具有与家庭 jdk 相同的证书？如果没有，您必须从远程站点下载证书（在 firefox 中查看页面信息、安全表、查看证书、详细信息、证书层次结构、导出），然后 keytool 将其导入您正在运行的 jdk您的申请来自。

# javascript - 响应式 JavaScript

> ID：15160983
> 
> 赞同：1
> 
> 时间：2013-03-01T15:16:42.773
> 
> 标签：javascript, jquery, responsive-design

任何人都可以帮助一个狡猾的 if 语句，尝试我可能看不出它有什么问题，代码在 if 语句之外工作：

```
var sizeBefore;
var sizeAfterResize;
var sizeBreakPoint;
var resizeTimer; 
$(function() {
    sizeBefore = $(window).width();
    sizeBreakPoint = 500;
    doneResizing();       
});

function doneResizing(){
       sizeAfterResize = $(window).width();
       if ((sizeBefore < sizeBreakPoint) && (sizeAfterResize >= sizeBreakPoint)) {
                alert('Before:' + sizeBefore);
                alert('After:' + sizeAfterResize);
                sizeBefore = sizeAfterResize;
                // THIS RUNS WHEN OUTSIDE IF STATEMENT
       }
}

$(window).resize(function() {
    //doneResizing();
     clearTimeout(resizeTimer);
     resizeTimer = setTimeout(doneResizing, 100);
}); 
```

编辑：当窗口的大小从小于调整`sizeBreakPoint`为大于时，此语句应该只在文档准备好或完成调整大小时才适用`sizeBreakPoint`- 希望这能澄清

编辑：解决方案

```
var sizeBefore;
var sizeAfterResize;
var sizeBreakPoint;
var resizeTimer; 
$(function() {
    sizeBefore = $(window).width();
    sizeBreakPoint = 500;
    doneResizing();       
});

function doneResizing(){
       sizeAfterResize = $(window).width();
       if ((sizeBefore < sizeBreakPoint) && (sizeAfterResize >= sizeBreakPoint)) {
                alert('Before:' + sizeBefore);
                alert('After:' + sizeAfterResize);
       }
       sizeBefore = sizeAfterResize;
}

$(window).resize(function() {
     clearTimeout(resizeTimer);
     resizeTimer = setTimeout(doneResizing, 100);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:34:35.757

好吧，如果我可以说：

```
if ((sizeBefore < sizeBreakPoint) && (sizeAfterResize >= sizeBreakPoint)) 
```

仅当您的窗口从小于 500 开始并且在您调整大小后超过 500 时才适用。这是因为您在页面加载之前从不更改 sizeBefore 。

你能告诉我你真正想验证什么吗？或者，如果这是你真正想要的。

** 编辑：建议的解决方案 **

尝试做这样的事情：

```
$(function() {
   sizeBreakPointMin = 480;
   sizeBreakPointMax = 520;
   doneResizing();       
});

function doneResizing(){
   sizeAfterResize = $(window).width();
   //this way you have a window where this is false and it's as you want to allow the window as in a fine size
   //you can garantie that the window is always bigger then 480 and smaller then 520
   if ((sizeAfterResize < sizeBreakPointMin) || (sizeAfterResize >= sizeBreakPointMax)) {
            alert('Before:' + sizeBefore);
            alert('After:' + sizeAfterResize);
            // THIS RUNS WHEN OUTSIDE IF STATEMENT
   }
} 
```

从你的代码：

```
 if ((sizeBefore < sizeBreakPoint) && (sizeAfterResize >= sizeBreakPoint)) {
            ...
            sizeBefore = sizeAfterResize;
 } 
```

这两行不能很好地结合在一起，因为第一次这是真的，你只是`sizeAfterResize >= sizeBreakPoint`保证下次去检查 if`sizeBefore`总是会更大，然后`sizeBreakPoint`使 if 语句无法输入 2 次（如果你不会`sizeBefore`在 if 之外改变。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:24:52.190

我认为您的问题在于 if 条件。 `sizeBefore`是在文档就绪事件中您的屏幕宽度是多少，如果您有一个全屏浏览器，它将大于 500（这是您的断点值）。但是您永远不会更新`sizeBefore`，因此它永远不会低于`sizeBreakPoint`，因此 if 语句的这一部分永远不会为真：`(sizeBefore < sizeBreakPoint)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T16:37:52.437

这不是问题的直接答案，只是我自己对响应式的扭曲`JavaScript`

```
// calculate viewport width so that we can load js conditionally
function responsive(){
    var scaffolding = 'desktop';
    var w = parseInt($(window).innerWidth(), 10);
    if (w > 0 && w < 768) { scaffolding = 'phone'; }
    if (w >= 768 && w <= 980) { scaffolding = 'tablet'; }
    if (w > 980) { scaffolding = 'desktop'; }
    return scaffolding;
}

if ( responsive() == phone ) {
    // do stuff only on phones
}
if ( responsive() != phone ) {
    // do stuff everywhere else but phones
} 
```

您可以定义每个断点代表什么以及调用什么，这样当您稍后在代码中开始使用条件时它仍然有意义。

# sql - 将数据从一台服务器复制到另一台服务器 - 无法使用链接服务器

> ID：15160987
> 
> 赞同：0
> 
> 时间：2013-03-01T15:16:50.447
> 
> 标签：sql, sql-server, select, insert

我经常不得不将数据从我们的生产环境复制到我们的测试环境。它们处于完全不同的环境中，其中 prod 位于我必须通过 VPN 进入的防火墙后面，因此我无法使用链接服务器。提交工单让 DBA 执行此任务通常需要很长时间，因此我正在尝试找到一种系统化的方法来完成此任务。
根据选择查询创建一组插入脚本似乎是最好的，并且可以解决问题。这会起作用的原因是这些通常是一次性复制脚本，它们是不太大的静态/查找表。
例如，如果我有一个名为“Cars”的表，并且它有一个 CarId 和 Description 列，那么脚本将是：

```
select 'insert into Cars (CarId, [Description])
values (' + cast(CarId as varchar) + ', ''' + [Description] + ''')'
from Cars order by CarId 
```

在我的测试数据库中，我可以在运行上述插入脚本之前简单地炸掉表。
我的 prod sql 用户还具有对所有表的选择访问权限`INFORMATION_SCHEMA`，所以我想知道是否有人遇到过编写上述查询的系统方法。很多时候，我需要复制的表有很多列，并且日期时间、varchar 等的转换是不同的......

编辑：哦，我忘了补充说我的 prod 用户没有执行存储过程或函数的权限

# javascript - socket.io.js 未加载

> ID：15160992
> 
> 赞同：2
> 
> 时间：2013-03-01T15:17:03.647
> 
> 标签：javascript, node.js, socket.io

我知道已经有很多关于此的问题，但没有人为我回答，而且我的略有不同。

我正在使用以下命令在节点中启动 socket.io 服务器：

```
var io = require('socket.io').listen(8000); 
```

我的终端说一切正常：

```
info  - socket.io started 
```

现在我正在尝试使用此 url 在我的客户端浏览器中加载 .js 文件：

```
http://<hostname>:8000/socket.io/socket.io.js 
```

我没有得到 404，它只是永远挂起。我还使用网络实用程序 ping 端口 8000，它似乎打开得很好。

我昨天刚刚安装了node和socket.io，所以它们应该是最新版本。任何人都可以对此有所了解吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:00:18.253

原来我永远无法请求 .js 文件的原因是因为我的公司网络阻止了除常用端口（80、21 等）之外的所有端口，所以`我永远无法与端口 8000 通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:21:50.167

使用 express.js。将`socket.io`文件放在`public/javascripts`文件夹中并将此行添加到您的 html

```
<script src="/javascripts/socket.io.js"></script> 
```

我认为这是最好的方法。当您编写`http://<hostname>:8000/socket.io/socket.io.js`
节点时，尝试`socket.io`在项目的公用文件夹中找到一个名为的文件夹。以及里面的文件`socket.io.js`。

如果您不想使用 express.js，您应该捕获请求并尝试加载文件，如果没有为您的请求找到路由（实际上是 express 执行的操作），因为节点不知道如何处理不执行的请求t 匹配服务器中的任何路由。

我建议使用该`socket.io.min.js`文件（它更小并且在文件夹中`node_modules\socket.io\node_modules\socket.io-client\dist`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T15:48:36.663

您必须启动 http/https 服务器才能通过 http/https 访问它。简单地启动一个 socket.io 服务器是行不通的。请执行下列操作：

```
var http = require('http');
var  app = http.createServer(),
io = require('socket.io').listen(app);
app.listen(7000, "0.0.0.0"); 
```

然后我可以访问该文件`http://localhost:7000/socket.io/socket.io.js`

sockets.io 使用 websocket 协议 (ws://)。请参阅[维基百科页面](http://en.wikipedia.org/wiki/WebSocket#URI_scheme)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T16:04:32.077

您需要至少 3 件一起工作。

1.  提供一些 HTML（/index.html 就可以了），这样就有了一个网页。此文件应包含 socket.io 客户端`<script>`标记。为此，您需要入门示例的 http 服务器部分。你错过了这个，这就是为什么浏览到你的服务器会挂起。

2.  服务于 socket.io 客户端。当您将 http 服务器函数传递给 Socket.io 时，Socket.io 会自动为您执行此操作。您不需要完整的表达，因为这可以根据[socket.io](http://socket.io)文档`http`上的第一个示例仅使用节点的模块来完成。

3.  一些 javascript 实际对套接字做一些事情。这可以是`<script>`标签中的内容`index.html`或单独的文件。如果它是一个单独的文件，您需要设置您的 http 服务器来实际提供它。

# vb.net - 有什么方法可以 PGP 加密数据流并将其直接保存到 FTP 而无需在本地保存？

> ID：15160995
> 
> 赞同：4
> 
> 时间：2013-03-01T15:17:14.257
> 
> 标签：vb.net, encryption, sftp, pgp

我必须通过 sFTP 将 asc 格式的 PGP 加密文件发送到 FTP 文件夹。有没有办法 PGP 加密流（这是 CSV 格式的流）并将其推送到 sFTP**而无需将其保存在本地机器上**。

下面是我用于 PGP 加密的函数，它以文件名作为参数：

```
Private Function PGPEncrypt(ByVal FileName As String) As Boolean
        Dim errorHappened As Boolean = False
        Dim encodedFileName As String = String.Format("{0}{1}", FileName, ".asc")
        Dim pgpRecipient As String = System.Configuration.ConfigurationManager.AppSettings.Get("PgpRecipient")
        Dim psi As System.Diagnostics.ProcessStartInfo
        Dim ErrorResult As String = ""
        Dim Result As String = ""
        Try
            psi = New ProcessStartInfo(System.Configuration.ConfigurationManager.AppSettings.Get("PgpPath"))
            psi.CreateNoWindow = True
            psi.UseShellExecute = False
            psi.Arguments = String.Format(" --armor --yes --recipient ""{0}"" --output ""{1}"" --encrypt ""{2}""", _
                                          pgpRecipient, encodedFileName, FileName)
            psi.RedirectStandardInput = True
            psi.RedirectStandardOutput = True
            psi.RedirectStandardError = True
            ProcessPGP = System.Diagnostics.Process.Start(psi)
            ProcessPGP.StandardInput.Write(m_Passphrase)
            Result = ProcessPGP.StandardError.ReadToEnd()
            ProcessPGP.WaitForExit()
        Catch ex As Exception
            errorHappened = True
            Dim ReadError As New StringBuilder()
            ReadError.Append(vbCrLf & "Error Detail:")
            ReadError.Append(vbCrLf & ex.ToString())
            OurEventLog.WriteEntry(ReadError.ToString(), EventLogEntryType.Error)
        End Try
        Return errorHappened
    End Function 
```

同样，主要要求**不是**将 PGP 加密文件保存在本地，然后发送到 FTP，而是必须通过流创建 PGP 加密文件。

有任何想法吗？

**更新：**

FTP 代码：

```
 ftp.ConnectMode = FTPConnectMode.PASV
                ftp.RemoteHost = Csla.ConfigurationManager.AppSettings("FTPRemoteHost")
                If _blnDiagnostics Then DiagnosticsManager.Publish("STREAM_TO_FTP: CONNECT TO FTP", DiagnosticsManager.EntryType.SuccessAudit)
                ftp.Connect()
                ftp.Login(strUser, strPassword)
                ftp.TransferType = FTPTransferType.BINARY 'ASCII
                ftp.Put(OUTBOUNDMESSAGE, pFilename)

                ftp.Quit()
                ftp = Nothing 
```

OUTBOUNDMESSAGE 是 System.IO.Stream。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:27:35.457

`-`您可以将文件名直接传递给`--output`控制台，而不是将文件名作为命令行选项。您可以直接流式传输此数据。

您的`Arguments`财产将如下所示：

```
psi.Arguments = String.Format(" --armor --yes --recipient ""{0}"" --output - --encrypt ""{1}""", _
                                      pgpRecipient, FileName) 
```

当你执行这个过程时，`ProcessPGP.StandardOutput`应该产生你需要的流。