# StackOverflow 问答 15255000-15255999

# debugging - 即使启动程序是 .NET2，如何强制 Visual Studio 使用 .NET4.x 调试器

> ID：15255000
> 
> 赞同：1
> 
> 时间：2013-03-06T18:19:59.123
> 
> 标签：debugging, .net-4.0, visual-studio-2012

好的，这是场景：我正在用 C# 和 C++ 开发一个 COM 组件。我最近将开发从 VS2008 中的 .NET2 升级到 VS2010 中的 .NET4。测试涉及运行单独的应用程序。测试程序有一个“Go”按钮，用于加载 COM 组件并调用其功能。然而，测试程序在 .NET2 下运行。

现在，自从升级到 .NET4 后，我不能再简单地将测试程序的路径放入 Debug 属性页面的“Start external program”字段中并按开始。如果我这样做，则不会为我的组件加载任何符号，它不会出现在模块列表中并且无法调试。百思不得其解后，我终于发现我现在需要先启动外部程序。然后我打开“附加到进程”对话框。当我选择测试程序的进程时，“附加到：”框显示“自动：托管（V3.5，v3.0，v2.0）代码”。在附加之前，我必须按下“选择”按钮并专门选择“Managed v4.5, v4.0”。然后我按下测试程序上的 Go 按钮，一切正常。

所以这里的问题是：当我在 VS 中按 Start 时，如何让 Visual Studio 默认启动 .NET4.x 调试器，这样我就不必每次都经历整个 Attach To Process malarkey（这样那些追随我的人没有同样的问题）？

# actionscript-3 - Stage3d 中奇怪的着色器行为

> ID：15255004
> 
> 赞同：0
> 
> 时间：2013-03-06T18:20:03.697
> 
> 标签：actionscript-3, shader, stage3d

我在 Stage3d 上使用这个顶点着色器：

```
<script id="per-fragment-lighting-vs2" type="x-shader/x-vertex">
    attribute vec3 aVertexPosition;
    attribute vec3 aVertexNormal;
    attribute vec2 aTextureCoord;

    uniform mat4 uMVMatrix;
    uniform mat4 uPMatrix;
    uniform mat3 uNMatrix;

    varying vec2 vTextureCoord;
    varying vec3 vTransformedNormal;
    varying vec4 vPosition;

    void main(void) {
        vPosition = uMVMatrix * vec4(aVertexPosition, 1.0);
        gl_Position = uPMatrix * vPosition;
        vTextureCoord = aTextureCoord;
        vTransformedNormal = uNMatrix * aVertexNormal;
    }
</script> 
```

有了这个结果：

![在此处输入图像描述](../Images/dd5d683bc18ef79d87bca8f6b1c53f79.png)

如果我像这样编辑着色器：

```
<script id="per-fragment-lighting-vs2" type="x-shader/x-vertex">
    attribute vec3 aVertexPosition;
    attribute vec3 aVertexNormal;
    attribute vec2 aTextureCoord;

    uniform mat4 uMVMatrix;
    uniform mat4 uPMatrix;
    uniform mat3 uNMatrix;

    varying vec2 vTextureCoord;
    varying vec3 vTransformedNormal;
    varying vec4 vPosition;

    void main(void) {
        **gl_Position = uMVMatrix * vec4(aVertexPosition, 1.0);**
        vTextureCoord = aTextureCoord;
        vTransformedNormal = uNMatrix * aVertexNormal;
    }
</script> 
```

并在 actionscript 中预乘透视图，我得到了正确的 UV 显示，虽然它有不同的透视图，但看起来还不错。

![在此处输入图像描述](../Images/e1ee7ae678528cc17b38c35dae9295c5.png)

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:38:19.210

很可能您在第一个着色器实现中反转了矩阵乘法序列，因此您应该首先乘以透视，然后乘以 MV。

```
 void main(void) {
        vPosition = uPMatrix * vec4(aVertexPosition, 1.0);
        gl_Position = uMVMatrix * vPosition;
        vTextureCoord = aTextureCoord;
        vTransformedNormal = uNMatrix * aVertexNormal;
   } 
```

# java - 编译时的原始变量类型

> ID：15255013
> 
> 赞同：5
> 
> 时间：2013-03-06T18:20:21.183
> 
> 标签：java, eclipse, compilation, primitive-types

不确定我的措辞是否正确。如果您需要更多信息，请告诉我。我们有一个需求，我们需要根据系统环境变量来确定变量的类型。

所以，假设我们有以下课程

```
class Test
{
    DUMMY_TYPE testVariable;
} 
```

DUMMY_TYPE 是根据系统变量确定的。那么当Java编译时，是否可以让Java在编译类型时使用系统环境变量来确定类型呢？

此外，是否可以在 Eclipse 上以某种方式进行设置，无论我在哪里使用，Eclipse 都会继续在 IDE 上向我显示 DUMMY_TYPE，但是在编译和构建它时，可以根据环境变量将 DUMMY_TYPE 替换为正确的类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:31:23.597

我有个主意。

制作`testVariable`of 类型`Object`（或`DummyType`扩展的类`Object`）。然后，您可以根据从系统变量中读取的内容，使用原始包装类使用您想要的任何数据加载变量。

所以：

```
public class Test {

    Object testVariable;

    {
        String whichType = null;

        //Logic to read your system variable from wherever and store it in whichType

        if(whichType.equals("int")) {
            testVariable = new Integer(intVal);
        }
        else if(whichType.equals("double")) {
            testVariable = new Double(doubleVal);
        }
        //etc.
    } 
```

当然，这并不是 Java 在编译时像你想要的那样“弄清楚”它是哪种类型，必然（并且分配将在运行时发生，当`Test`对象被创建时），但这似乎是一个合理的框架选择。

当然，您也可以根据需要设置`testVariable`初始化时的值。

或者，你可以有一个像这样的方法，它接受输入作为`String`（从你的系统变量中读取）并在原始类型的适当包装类中返回它：

```
public Object getPrimitiveValue(String type, String value) {
    if(type.equals("int")) {
        return new Integer(Integer.parseInt(value));
    }
    else if(type.equals("double")) {
        return new Double(Double.parseDouble(value));
    }
    //etc.
} 
```

# r - R中的tm包安装失败

> ID：15255016
> 
> 赞同：0
> 
> 时间：2013-03-06T18:20:43.770
> 
> 标签：r, installation, tm

我正在尝试在我的 Fedora 机器上安装**tm**`install.packages("tm")`包，但是在尝试安装时出现编译错误。这是我得到的错误快照，

```
In file included from /usr/include/stdlib.h:25:0,    
                 from /usr/include/R/R.h:28,    
                 from grouped.c:1:    
/usr/include/features.h:313:5: error: expected identifier or ‘(’ before ‘&amp;&’ token    
In file included from /usr/include/R/R.h:28:0,    
                 from grouped.c:1:    
/usr/include/stdlib.h:140:1: error: unknown type name ‘size_t’    
In file included from /usr/include/R/R.h:28:0,    
                 from grouped.c:1:    
/usr/include/stdlib.h:337:4: error: unknown type name ‘size_t’    
/usr/include/stdlib.h:367:4: error: unknown type name ‘size_t’    
/usr/include/stdlib.h:471:22: error: unknown type name ‘size_t’  
In file included from /usr/include/R/R.h:28:0,  
                 from grouped.c:1:  
/usr/include/stdlib.h:473:22: error: unknown type name ‘size_t’  
/usr/include/stdlib.h:473:38: error: unknown type name ‘size_t’  
/usr/include/stdlib.h:485:36: error: unknown type name ‘size_t’  
In file included from /usr/include/stdlib.h:497:0,  
                 from /usr/include/R/R.h:28,  
                 from grouped.c:1:  
/usr/include/alloca.h:33:22: error: unknown type name ‘size_t’  
In file included from /usr/include/R/R.h:28:0,  
                 from grouped.c:1: 
```

# java - SAX - 无法在 libGDX 中正确获取文件路径以进行解析

> ID：15255018
> 
> 赞同：0
> 
> 时间：2013-03-06T18:20:48.657
> 
> 标签：java, xml-parsing, sax, libgdx

我正在尝试在使用 libGDX 制作的游戏中解析 xml 文件。在以下情况下，我得到 FileNotFoundException。

在一个扩展 DefaultHandler 的类中，我有这个方法来解析 xml/data.xml 下的 xml。如果我将此 xml 文件夹放在 src/ 目录之外，它可以在 Eclipse 中工作，但在我导出它时不起作用，因为文件夹“xml”没有包含在 jar 中。

现在，当我将它放在 src 文件夹下并将路径指定为“src/xml/data.xml”时，它仍然可以工作，同样只能在 Eclipse 中使用。

我怎么能找到路径？

```
public void loadXML() throws SAXException, IOException, ParserConfigurationException {
    SAXParserFactory factory = SAXParserFactory.newInstance();
    SAXParser parser = factory.newSAXParser();

    parser.parse(Gdx.files.internal("xml/data.xml").path(), this);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:53:20.310

我认为 Eclipse 在目录中时将文件打包到 .jar 文件中`src/`（参见 [Eclipse: export to .jar AND include resource files (ANT)](https://stackoverflow.com/questions/2073250/eclipse-export-to-jar-and-include-resource-files-ant)），所以你首先需要从 to 切换`Gdx.files.internal`到`Gdx.files.classpath`查看 jar 中的文件通过类路径。

`xml/`请注意，如果要将目录保留在顶层，则应该能够将目录标记为“源文件夹”。

第二个问题是 .jar 中存储的文件没有“路径”。也就是说，没有`String`像“/this/is/a/path/to/a/file”这样可以表示 .jar 中的文件（因此对`.path()`File 的调用不会返回任何有用的东西）。不过，您可以要求一个`InputStream`或一个`Reader`这样的文件在一个 jar 中。我认为[`Gdx.files.classpath("xml/data.xml").reader()`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/files/FileHandle.html#reader())(or [`.read(1024)`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/files/FileHandle.html#read(int))) 应该可以工作（假设有一种`SAXParser` `parse`方法采用`Reader`(or `InputStream`)。如果`SAXParser`需要 String 路径，您可能需要不同的方法。

# android - Android列出所有有权使用相机的应用程序

> ID：15255020
> 
> 赞同：-3
> 
> 时间：2013-03-06T18:20:50.820
> 
> 标签：android, security, permissions

你能告诉我如何列出所有有权在Android手机中使用相机的应用程序吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T18:25:26.623

我不知道您所说的“可以使用相机”是什么意思。

您可以使用`PackageManager`通过`getInstalledPackages()`. 从那里，您可以通过您从中获取的对象中的字段查看哪些具有`CAMERA`权限。`requestedPermissions``PackageInfo``getInstalledPackages()`

# java - 用于蓝牙实现的 FTP 服务

> ID：15255023
> 
> 赞同：2
> 
> 时间：2013-03-06T18:20:58.023
> 
> 标签：java, android, bluetooth

有谁知道如何在蓝牙上使用 OBEX 实现 FTP 服务器，而无需对 android 设备进行 root 访问，这对我来说是一项艰巨的任务，请帮助任何帮助将不胜感激。我知道市场上有可用于 FTP 的应用程序，但我想将其集成到应用程序中，而不是将其作为后台应用程序运行。

# c# - 将值设置为加载的 xml

> ID：15255024
> 
> 赞同：1
> 
> 时间：2013-03-06T18:20:58.407
> 
> 标签：c#, xml

如何将特定值写入加载的 xml？例如，我希望 OriginSource 的值更改为 PreferenceID 3。最有效的方法是什么？

这是我正在尝试做的一个简短示例。

```
 XmlDocument doc = new XmlDocument();
            XmlElement el = (XmlElement)doc.AppendChild(doc.CreateElement("UserObject"));   

                    XmlNode emailAddressXml = UserEmailAddressDTO.AppendChild(doc.CreateNode(XmlNodeType.Element, "EmailAddress", null));
                    emailAddressXml.InnerText = emailaddress;

                    doc.Load("Prefs.xml");

                    XmlNode SourceXml = UserEmailAddressDTO.AppendChild(doc.CreateNode(XmlNodeType.Element, "Source", null));
                    originSourceXml.InnerXml = "Good Sam";

    string usrObj = doc.outerXml; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:24:32.623

效率是主观的，所以我将提供我的建议。根据 .Net 版本（我相信 3.5+），您应该使用[Linq2Xml](http://msdn.microsoft.com/en-us/library/bb387098%28v=vs.100%29.aspx)。

[`XDocument`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument%28v=vs.100%29.aspx), [`XElement`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement%28v=vs.100%29.aspx), 并且[`XAttribute`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xattribute%28v=vs.100%29.aspx)非常容易使用。

```
var doc = XDocument.Load("Prefs.xml");

var prefs = doc.Root.Descendents("UserEmailAddressPreferences"); 
```

`XElement`现在您可以在`prefs`using Linq中迭代每个。检索和编辑值很容易：

```
//  untested code
XElement el = prefs.Elements().Where(e => e.Element("PreferenceID").Value == 3)
                              .Select(e => e.Element("OriginSource")
                              .FirstOrDefault();

el.Value = "Something else": 
```

# python - You Tube API - 为用户创建 OAuth 的过程

> ID：15255026
> 
> 赞同：0
> 
> 时间：2013-03-06T18:21:07.043
> 
> 标签：python, google-api, youtube-api

奇怪，刚刚发现任何以“你”开头的问题都被SO标记为“主观”。反正...

我有一个使用 Python Google API 客户端连接到 YouTube 的应用程序。到目前为止，我主要将它用于个人目的，所以我对拥有开发者帐户的人使用标准 OAuth 过程很好（密钥不是真实的。试试他们——我敢）：

```
USERID = '63213491243299.apps.googleusercontent.com'
    KEY = '5hraer8afuda0sf3afeawwoaFCKyJ'
    SCOPE = 'https://www.googleapis.com/auth/youtube'
    AGENT = 'Mind Reading Algorithm'

FLOW = OAuth2WebServerFlow(
client_id=USERID,
client_secret=KEY,
scope=SCOPE,
user_agent=AGENT)

storage = Storage('credentials.dat')
credentials = storage.get()
if credentials is None or credentials.invalid == True:
    credentials = run(FLOW, storage)

http = httplib2.Http()
http = credentials.authorize(http)

return build(serviceName='youtube', version='v3', http=http) 
```

这很好用，但是如果我想将程序作为命令行工具分发怎么办？我希望能够简单地向用户询问他们的 youtube 用户名和密码并从那里连接到 API，将凭据存储在 DAT 中，这样他们就不必每次都重新插入密码。有没有办法使用谷歌客户端包装器轻松实现这一点？他们的 OAuth 文档……没有什么帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:31:28.130

您的应用程序无法存储用户的密码，并且没有 API 可以使用用户名密码进行访问。但是您可以存储 OAuth 令牌，因此用户不需要一直输入密码。

您将在此处的示例中看到，您将刷新 OAuth 令牌存储在 json 文件中。

“ [https://code.google.com/p/youtube-api-samples/source/browse/samples/python/my_uploads.py](https://code.google.com/p/youtube-api-samples/source/browse/samples/python/my_uploads.py) ”

# php - AJAX 不携带会话变量

> ID：15255028
> 
> 赞同：1
> 
> 时间：2013-03-06T18:21:07.217
> 
> 标签：php, ajax, session

我有一个包含我所有页面的集中索引页面。在这个索引页面中，我开始了我的会话。我通过回显所有变量来测试它，它有效。

在 AJAX php 脚本上，我尝试调用会话变量，它似乎打印出任何内容：甚至没有会话 ID。根据我的研究，您需要在 AJAX 脚本上调用 session_start() 。我这样做了，它启动了会话，但使用不同的 ID 并且无法访问主网站上设置的会话变量。我在 Google 的前 5 页上没有发现任何重复我的问题的内容。

如果我将 mysqli 查询的**'".$_SESSION['usr']."'**部分更改为我的用户名，它就可以工作。这也证明了事实上，AJAX 脚本没有看到会话变量。

我该怎么做才能让 AJAX 脚本查看主网站上的会话而不是它自己的没有数据的会话？

代码：

**阿贾克斯：**

```
$(document).ready(function(){

    // Moving North
    $('#moveNorth').on('click', function(){
        var value = $(this).text();
        $.ajax({
            url: "ajax/moveNorth.php",
            type: "POST",
            data: {data : value},
            cache: false,
            success: function(result) {
                 $('#coordinate-y').html(function(i, val) { return +val+1 });
            },
            error: function() {
                alert("Something went wrong. Please email an admin.");
            }
        });
     });
}); 
```

**PHP 脚本：**

```
<?php

$sessionTest = session_id();//$_SESSION['usr'];

echo "Session Test | " . $sessionTest . " |";

$mysqli = new mysqli("db_host", "db_user", "db_password", "db_name");

if($mysqli->connect_errno)
{
    echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
}
else
{
    $mysqli->query("UPDATE table_name SET coord_x = coord_x - 1 WHERE username = '".$_SESSION['usr']."'");
}

?> 
```

**调用 AJAX 的页面：**

```
<?php
$sessionTestID = session_id();//$_SESSION['usr']; 
echo $sessionTestID;
?> 
```

# java - 如果用户点击 JOptionPane.showMessageDialog 上角的 x 则返回

> ID：15255031
> 
> 赞同：0
> 
> 时间：2013-03-06T18:21:24.023
> 
> 标签：java, joptionpane

```
JOptionPane.showMessageDialog(null, roll, "Dice Game", JOptionPane.INFORMATION_MESSAGE, die); 
```

当我运行它时，我想知道用户是否点击 x 以便我可以更改布尔值，roll 是 JTextArea，die 是图像图标，null 是我的布局。

问题是 showMessageDialog 是一个 void 方法。所以我无法检查。谢谢。

我没有 JFrame，也不想要一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:26:09.557

`ShowMessageDialog`不是为此而设计的。它用于显示消息，而不是获取用户反馈。您应该使用 showConfirmDialog 来达到您的目的，`OK_CANCEL_OPTION`因为它确实是您想要的：单击 X 按钮就像使用取消按钮一样。

如果您真的不想要取消按钮，那么~~您必须创建自己的 JDialog，~~实际上您可以使用 JOptionPane.showOptionDialog：

```
int result = JOptionPane.showOptionDialog(null, roll, "Dice Game", JOptionPane.DEFAULT_OPTION, JOptionPane.INFORMATION_MESSAGE, die, new Object[] { "OK"}, null); 
```

`result`如果用户按下 OK，则为 0，如果用户使用 X 按钮关闭对话框，则为 -1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:25:47.373

消息对话框用于向用户显示消息，因此使用“OK”关闭它或使用“X”关闭它之间不应存在语义差异。

如果您正在寻找输入，也许您想要一个确认对话框，它返回一个`int`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:26:24.760

为什么你需要那个？消息对话框是一个信息对话框，不需要检测按下了哪个按钮（确定或 X）。

# jquery - 如何突出显示 highstock 的范围？

> ID：15255034
> 
> 赞同：1
> 
> 时间：2013-03-06T18:21:41.727
> 
> 标签：jquery, graph, highcharts, highstock

有没有办法在 highstock/highchart 图中突出显示红色，如下图所示？即将4000美元以下的部分显示为红色区域并用红色填充？

谢谢

![图表模型](../Images/27b7ab486c2c945d57cd01eaaf9018c9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T02:10:12.153

这是部分答案。在当前版本的 Highcharts 和 Highstock 中，您可以添加一个[`plotBand`](http://api.highcharts.com/highcharts#yAxis.plotBands). 这可以有阴影并覆盖您希望的任何起点。在Hightcharts 的[3.0](http://www.highcharts.com/component/content/article/2-news/53-highcharts-3-0-beta-released)版（当前为测试版）中，有一种方法可以对线条进行[彩色阈值着色](http://jsfiddle.net/highcharts/YWVHx/)。现在，如果您只需要支持 SVG 浏览器（不是 IE 6、7 或 8），您可以执行[此处](http://highcharts.uservoice.com/forums/55896-general/suggestions/787281-threshold-option-for-colors)提到的这个[hack](http://jsfiddle.net/highcharts/PMyHQ/)。

我自己，我现在会使用 plotBands 并等待稳定的 3.x 版本。

# python - 带有特殊字符的文件夹 py2exe

> ID：15255038
> 
> 赞同：0
> 
> 时间：2013-03-06T18:21:47.003
> 
> 标签：python, unicode, utf-8, py2exe

在我的代码中，我调用了一个位于名为“Física”的文件夹中的文件（请注意，“i”是尖锐的）。

我在我的 IDE（Spyder）中运行它没有任何问题，但是在我使用 py2exe 将我的程序变成可执行文件后，我收到一个错误：

```
"UnicodeEncodeError: 'ascii' codec can't encode character u'\xed'" 
```

问题是因为这些特殊字符。我怎么解决这个问题？

我尝试执行以下操作

```
path = unicode(path).encode('utf-8') 
```

用 utf-8 编码处理路径。但如果我这样做，我的路径将是：

`F\xc3\xadsica`代替`Física`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:35:07.613

我发现我做错了什么：

我想从该路径读取文件，然后将文件写入同一路径。将路径保存在变量中时，我将路径编码为 utf-8。但是，在使用该变量写入路径时，我没有使用解码。

我需要在将路径保存到变量时使用'encode('utf-8')'，然后在设置目标路径时使用'decode('utf-8')'。非常感谢，抱歉解释不佳

# performance - spdy 比 keep-alive https 更快？

> ID：15255039
> 
> 赞同：0
> 
> 时间：2013-03-06T18:21:52.407
> 
> 标签：performance, https, keep-alive, spdy

我已经看到[SPDY 与通过保持连接连接的 http 多路复用有什么不同](https://stackoverflow.com/questions/10362171/is-spdy-any-different-than-http-multiplexing-over-keep-alive-connections)以及[HTTP 管道和 HTTP 多路复用与 SPDY 之间的区别](https://stackoverflow.com/questions/10480122/difference-between-http-pipeling-and-http-multiplexing-with-spdy)还有[http://www.guypo.com/technical/not-as-spdy-as-you-thought /](http://www.guypo.com/technical/not-as-spdy-as-you-thought/)。

我什至注意到，根据我自己的经验，两者都只比 ping 多几毫秒。

我错过了什么吗？我用它来安装[http://www.howtoforge.com/using-mod_spdy-with-apache2-on-ubuntu-12.10](http://www.howtoforge.com/using-mod_spdy-with-apache2-on-ubuntu-12.10)。有没有我错过的设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T23:12:33.577

这个问题太模糊了，无法有效回答。SPDY 通过单个连接提供基于帧的多路复用。一个帧可能对应于 HTTP 请求标头，或 HTTP 请求正文块，或 HTTP 响应标头，或 HTTP 响应正文块。如果你只使用一个请求/响应，那么 SPDY 将提供最小的优势（如果你假设 CPU 很便宜，那么会有一些，可能是最小的延迟优势，因为标头压缩会以 CPU 时间和内存换取线路上的字节，这是序列化延迟的主要输入）。

# javascript - 将事件与对象一起克隆？

> ID：15255044
> 
> 赞同：0
> 
> 时间：2013-03-06T18:22:04.010
> 
> 标签：javascript, jquery, dom

我的问题涉及克隆和克隆事件。

我有这个按钮：

```
<button type="button" class="btn btn-inverse test">test</button> 
```

在我的 JS 中：

```
//create a clone of my button at the start so any later changes to the btn do not effect future clones
var test = $(".test").clone(true);  

$(".test").click(function() {
    alert('a');
});

test.clone(true).insertBefore('#addQuestion'); 
```

上面克隆了按钮，但事件不再起作用，我哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T18:25:30.997

那是因为您在添加侦听器之前克隆了元素。

```
var test = $(".test").click(function() {
               alert('a');
           }).clone(true); // .insertBefore('#addQuestion') 
```

[http://jsfiddle.net/j7XR9/](http://jsfiddle.net/j7XR9/)

# javascript - 多源设计模型 (XML/JSON)

> ID：15255052
> 
> 赞同：0
> 
> 时间：2013-03-06T18:22:29.863
> 
> 标签：javascript, ajax, json, model-view-controller, design-patterns

假设我的应用程序从不同来源接收登录信息（或凭据）。现在输入源可以是不同的格式（XML/JSON 等）

如何处理这些多个输入源，以便我最终能够在我的应用程序中验证用户并相应地向他显示主页？

我问的是要使用的设计模式或方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:28:48.443

嗯，将所有输入转换为规范形式，然后从那里开始。我认为您应该提供收到的输入样本以获得更好的答案。

# wpf - 我可以将此 Dockpanel 组合到用户控件或自定义控件中吗？

> ID：15255057
> 
> 赞同：0
> 
> 时间：2013-03-06T18:22:38.927
> 
> 标签：wpf, xaml, controls, scrollviewer, tabitem

我在 a 中有以下 XAML `<TabItem>`：

```
<ScrollViewer ....>
    <Border ....>
        <DockPanel ...>
        ....
        </DockPanel>
    </Border>
</ScrollViewer> 
```

相同的 XAML 将重复多次。我想知道创建某种类型的`UserControl`or是否会更容易`custom control`（*不确定用户控件是否有效*）。然后，如果我需要更改这 3 个之一的设置，它将级联到所有`TabItems`包含`ScrollViewer/Border/DockPanel`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:38:58.040

例如，您可以将上述 XAML 代码放入 UserControl 中，但您需要知道每次使用用户控件时，都会创建一个不同的实例。因此，如果您想更新所有实例，您需要绑定到一个常见的 INotifyPropertyChanged 类属性。

希望这可以帮助...

# sql-server-2008 - SQL Server 2008 外键约束错误

> ID：15255062
> 
> 赞同：1
> 
> 时间：2013-03-06T18:23:00.303
> 
> 标签：sql-server-2008

我正在创建一个包含一系列表 ddls 的数据库，总共有 13 个表。运行表的 ddl 时出现外键约束错误`TBNSOR_VICTIM`。ddl 能够创建第一个 fk 约束，但在创建第二个 fk 约束时出现错误。有人可以帮助我或指出脚本中缺少的内容吗？这是运行 ddl 脚本后出现的错误

> *消息 1776，级别 16，状态 0，第 2 行
> 被引用的表“dbo.TBNSOR_OFFENSE”中没有与外键“RD09RD03”中的引用列列表匹配的主键或候选键*

```
CREATE TABLE [dbo].[TBNSOR_OFFENSE](
    [RD03_RC27SEQ_NBR] [int] NOT NULL,
    [FK_RD01_RC17SID] [int] NOT NULL,
    [RD03_RC27OFFENSE_DESC] [varchar] (100) NULL,
    [RD03_STATUTE] [char](6) NULL,
    [RD03_RC27PREDATOR_IND] [char] (1) NULL,
    [RD03_RC27CONVICTION_DT] [date] NULL,
    [RD03_RC27CONVICT_CITY] [varchar] (20) NULL,
    [RD03_RC27CONVICT_STATE] [char] (2) NULL,
    [RD03_RC27CONVICT_COUNTY] [varchar] (20) NULL,
    [RD03_RC27CITY] [varchar] (20) NULL,
    [RD03_RC27COUNTY] [varchar] (20) NULL,
    [RD03_RC27OFFENSE_STATE] [char] (2) NULL,
    [RD03_RC27OFFENSE_DATE] [date] NULL,
    [RD03_RC27CONFIN_REL_DT] [date] NULL,
    [RD03_RC27PP_RELEASE_DT] [date] NULL,
 CONSTRAINT [CJ38ID03] PRIMARY KEY CLUSTERED 
(
    [RD03_RC27SEQ_NBR] ASC,
    [FK_RD01_RC17SID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

ALTER TABLE [dbo].[TBNSOR_OFFENSE]  WITH CHECK ADD CONSTRAINT [RD03RD01] FOREIGN KEY([FK_RD01_RC17SID])
REFERENCES [dbo].[TBNSOR_PHYSCSC] ([RD01_RC17SID])ON DELETE CASCADE
GO

ALTER TABLE [dbo].[TBNSOR_OFFENSE]  CHECK  CONSTRAINT [RD03RD01]
GO

    CREATE TABLE [dbo].[TBNSOR_VICTIM](
    [RD09_RC28SEQ_NUM] [int] NOT NULL,
    [FK_RD01_RC17SID] [int] NOT NULL,
    [FK_RD03_RC27SEQ_NBR] [int] NOT NULL,
    [RD09_RC28SEX] [char] (1) NULL,
    [RD09_RC28RACE] [char] (1) NULL,
    [RD09_RC28AGE] [char](2) NULL,
    [RD09_RC28HIGH_AGE] [char] (2) NULL,
    [RD09_RC28LOW_AGE] [char] (2) NULL,
 CONSTRAINT [CJ38ID09] PRIMARY KEY CLUSTERED 
(
    [RD09_RC28SEQ_NUM] ASC,
    [FK_RD01_RC17SID] ASC,
    [FK_RD03_RC27SEQ_NBR] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

ALTER TABLE [dbo].[TBNSOR_VICTIM] WITH CHECK ADD CONSTRAINT [RD09RD01] FOREIGN KEY([FK_RD01_RC17SID])
REFERENCES [dbo].[TBNSOR_PHYSCSC] ([RD01_RC17SID])ON DELETE CASCADE
GO

ALTER TABLE [dbo].[TBNSOR_VICTIM] CHECK  CONSTRAINT [RD09RD01]
GO

ALTER TABLE [dbo].[TBNSOR_VICTIM] WITH CHECK ADD CONSTRAINT [RD09RD03] FOREIGN KEY([FK_RD03_RC27SEQ_NBR])
REFERENCES [dbo].[TBNSOR_OFFENSE]([RD03_RC27SEQ_NBR])ON DELETE CASCADE
GO

ALTER TABLE [dbo].[TBNSOR_VICTIM] CHECK CONSTRAINT [RD09RD03]
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:41:19.527

您在 [CJ38TBNSOR_OFFENSE] 表中的两列（[RD03_RC27SEQ_NBR] 和 [FK_RD01_RC17SID]）上设置了主键，但您只引用其中一列。它应该是：

```
REFERENCES [cj38].[CJ38TBNSOR_OFFENSE]([RD03_RC27SEQ_NBR],[FK_RD01_RC17SID]) 
```

# c# - 互操作 Excel 未关闭进程

> ID：15255065
> 
> 赞同：4
> 
> 时间：2013-03-06T18:23:11.983
> 
> 标签：c#, asp.net, visual-studio-2010, excel, office-interop

我已经为这个问题苦苦挣扎了几天，我已经进行了研究并应用了我在各种论坛上找到的所有建议，但我仍然无法解决它。

我的问题是使用互操作库的 excel，我有一个用作模板的 excel 文件，所以我打开它并用新名称保存在新位置。一切都很好，除了 Excel 进程在文件创建和关闭后继续运行。

这是我的代码

```
protected string CreateExcel(string strProjectID, string strFileMapPath)
{
    string strCurrentDir = HttpContext.Current.Server.MapPath("~/Reports/Templates/");
    string strFile = "Not_Created";

    Application oXL;
    Workbook oWB;        

    oXL = new Application();
    oXL.Visible = false;

    Workbooks wbks = oXL.Workbooks;
    //opening template file
    oWB = wbks.Open(strFileMapPath);        

    oXL.Visible = false;
    oXL.UserControl = false;
    strFile = strProjectID + "_" + DateTime.Now.Ticks.ToString() + ".xlsx";
    //Saving file with new name
   oWB.SaveAs(strCurrentDir + strFile, XlFileFormat.xlWorkbookDefault, null, null,    false, false, XlSaveAsAccessMode.xlExclusive, false, false, null, null);

    oWB.Close(false, strCurrentDir + strFile, Type.Missing);

    wbks.Close();

    oXL.Quit();

    System.Runtime.InteropServices.Marshal.ReleaseComObject(oXL);
    System.Runtime.InteropServices.Marshal.ReleaseComObject(wbks);
    System.Runtime.InteropServices.Marshal.ReleaseComObject(oWB);

    oWB = null;
    oXL = null;
    wbks = null;
    GC.Collect();

    return strFile;
} 
```

如您所见，我正在关闭并释放所有对象，但应用程序并未退出。

我正在使用 IIS7 在 32 位的 Windows Server 2008（生产）和 Windows 7（开发）中进行测试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-23T04:36:24.353

尝试

```
Process excelProcess = Process.GetProcessesByName("EXCEL")[0];
if (!excelProcess.CloseMainWindow())
{
 excelProcess.Kill();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-16T14:25:39.850

这就是我解决这个问题的方法：

```
// Store the Excel processes before opening.
Process[] processesBefore = Process.GetProcessesByName("excel");

// Open the file in Excel.
Application excelApplication = new Application();
Workbook excelWorkbook = excelApplication.Workbooks.Open(Filename);

// Get Excel processes after opening the file.
Process[] processesAfter = Process.GetProcessesByName("excel");

// Now find the process id that was created, and store it.
int processID = 0;
foreach (Process process in processesAfter)
{
    if (!processesBefore.Select(p => p.Id).Contains(process.Id))
    {
        processID = process.Id;
    }
}

// Do the Excel stuff

// Now close the file with the COM object.
excelWorkbook.Close();
excelApplication.Workbooks.Close();
excelApplication.Quit();

// And now kill the process.
if (processID != 0)
{
    Process process = Process.GetProcessById(processID);
    process.Kill();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-06T16:47:58.753

看看这里：[如何获取隐藏的 Excel 应用程序实例的 ProcessID (PID)](https://stackoverflow.com/questions/37636319/how-can-i-get-the-processid-pid-for-a-hidden-excel-application-instance)

您可以通过 API 追踪您的 ProcessID，`GetWindowThreadProcessId`然后终止与您的 Excel 应用程序对象实例特别匹配的进程。

```
[DllImport("user32.dll")]
static extern int GetWindowThreadProcessId(int hWnd, out int lpdwProcessId);

Process GetExcelProcess(Microsoft.Office.Interop.Excel.Application excelApp)
{
     int id;
     GetWindowThreadProcessId(excelApp.Hwnd, out id);
     return Process.GetProcessById(id);
}

void TerminateExcelProcess(Microsoft.Office.Interop.Excel.Application excelApp)
{
     var process = GetExcelProcess(excelApp);
     if (process != null)
     {
          process.Kill();
     }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-12T16:16:10.413

我为它创建了这个方法，在我的测试中它有效。

```
private void ClearMemory(Application excelApp) {
    excelApp.DisplayAlerts = false;
    excelApp.ActiveWorkbook.Close(0);
    excelApp.Quit();
    Marshal.ReleaseComObject(excelApp);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T21:09:25.810

尝试使用[Open XML SDK 2.0 for Microsoft Office 库](http://www.microsoft.com/en-us/download/details.aspx?id=5124)来创建 excel 文档，而不是使用互操作程序集。根据我的经验，它运行得更快，并且更容易使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-30T15:44:15.640

这是 VB 版本——我有一个使用它的大型项目，而不是转换到更好系统的时间，所以这里是相同的答案......在 vb.NET

使用它来获取进程 ID（在打开 Excel 工作表之前）

```
Dim excelProcess(0) As Process
excelProcess = Process.GetProcessesByName("excel") 
```

完成工作表后：

```
xlWorkBook.Close(SaveChanges:=False)
xlApp.Workbooks.Close()
xlApp.Quit()
'Kill the process
If Not excelProcess(0).CloseMainWindow() Then
    excelProcess(0).Kill()
End If 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-18T01:15:50.110

简单规则：**避免**使用双点调用表达式，例如：

```
var workbook = excel.Workbooks.Open(/*params*/) 
```

（[参考](https://stackoverflow.com/a/17367570/6629562)）

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-03-06T18:53:50.853

```
oWB.Close(false, strCurrentDir + strFile, Type.Missing);
oWB.Dispose();
wbks.Close();
wbks.Dispose();
oXL.Quit();
oXL.Dispose();

System.Runtime.InteropServices.Marshal.ReleaseComObject(oXL);
System.Runtime.InteropServices.Marshal.ReleaseComObject(wbks);
System.Runtime.InteropServices.Marshal.ReleaseComObject(oWB); 
```

# linux - 如何在 Linux VM 的控制台上向上/向下滚动

> ID：15255070
> 
> 赞同：229
> 
> 时间：2013-03-06T18:23:37.280
> 
> 标签：linux, terminal, rhel

我知道`Up`/`Down`会给你命令历史。但是，您如何通过上下滚动查看过去的输出？

我用过`Shift`+ `Page Up`/ `Page Down`，`Alt`+ `Shift`+ `Up`/`Down`和`Page Up`/`Page Down`但这些似乎都不起作用。

它是一个 Redhat Linux 机器。

* * *

## 回答 #1

> 赞同：265
> 
> 时间：2013-03-06T18:36:43.700

`SHIFT`+`Page Up`和`SHIFT`+ `Page Down`。如果它不起作用，试试这个，然后它应该：

转到终端程序，并确保
`Edit/Profile Preferences/Scrolling/Scrollback/Unlimited`
已选中。

不过，此选项的确切位置可能有所不同，我看到您使用的是 Redhat。

* * *

## 回答 #2

> 赞同：128
> 
> 时间：2013-11-16T14:52:33.230

`Shift`++或在`Fn`Macbook上将允许您滚动。`UP``DOWN`

* * *

## 回答 #3

> 赞同：83
> 
> 时间：2014-01-10T06:18:43.797

**替代方案：** 您可以使用该`less`命令。

输入控制台：

```
"your_command" | less 
```

这将允许您使用向上和向下箭头键滚动。

基本上，您的输出已通过`less`命令传输。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2016-11-15T06:25:32.183

**逐行滚动的替代方案**

`Ctrl`+ `Shift`+`Up Arrow`或`Down Arrow`

与滚动整个页面的`Shift`+`Page Up`或不同`Page Down`，这将有助于更平滑的逐行滚动，这正是我想要的。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2013-03-08T14:04:09.320

`SHIFT + Page Up`并且`SHIFT + Page Down`是在 linux（虚拟）控制台上操作的正确键，但 vmware 控制台没有这些终端设置。[*虚拟控制台具有固定的回滚大小，根据此 Linux 虚拟控制台滚动行为文档*](http://www.tldp.org/HOWTO/Keyboard-and-Console-HOWTO-18.html)，听起来它仅限于视频内存大小。[](http://www.tldp.org/HOWTO/Keyboard-and-Console-HOWTO-18.html)

 ** * *

## 回答 #6

> 赞同：18
> 
> 时间：2016-12-08T08:48:12.940

另一种可能已经安装在您的系统上的替代方法是使用 GNU screen ：

```
# This starts screen which adds basic window management in terminals
screen

# This starts the copy mode you can use to scroll
<CTRL-A> [

# Now use the arrows to scroll

# To exit copy mode, do
<ESC> 
```

有关更多有用的选项（多个窗口，...），请参见 man screen...

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2019-04-01T09:56:48.923

Shift Pageup/End 对我有用。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2016-02-10T11:11:16.190

似乎这并不容易：[Arch Linux Wiki](https://wiki.archlinux.org/index.php/Keyboard_shortcuts)没有列出在控制台上执行此操作的方法（虽然在虚拟终端上很容易实现）。

您可以使用[tmux 滚动](https://superuser.com/questions/209437/how-do-i-scroll-in-tmux)：

> `Ctrl`-`b`然后`[`你可以使用你的普通导航键来滚动（例如。`Up Arrow`或`PgDn`）。按下`q`退出滚动模式。
> 
> 或者，您可以按`Ctrl`-`b` `PgUp`直接进入复制模式并向上滚动一页（这听起来像是您大部分时间想要的）

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2017-10-04T03:21:06.397

Mac 上的 VM Ubuntu...fn + shift + 上/下箭头

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-07-18T07:42:15.423

我在带有 Ubuntu 客户机的 VMWare 工作站上遇到了同样的问题，结果发现 VmWare 不支持从服务器视图向上滚动。我所做的是安装 x GUI，然后从那里运行 xterm。出于某种原因，它的运行方式相同，但允许您以正常方式滚动。希望这对 VmWare 虚拟盒子中的未来读者有所帮助。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-01-08T21:20:06.137

在某些 VPS 主机（如`linode`）中，您必须单击`Ctrl+A`，然后单击`ESC`。也以 double 退出`ESC`。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-01-06T12:00:41.273

`Fn`+`Up/Down`可以在 Mac OS X 10.11 中滚动终端

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-11-09T04:56:51.820

使用Yosemite`Shift`中的终端登录 Ubuntu 时，向上/向下滚动鼠标时按下该键对我有用。`ssh`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-03-03T17:03:54.967

对于某些命令，例如 mtr +（加号）和 -（减号）可以上下滚动。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-04-01T09:14:31.803

**持久的、长期的解决方案**

将此行添加到您的`~/.screenrc`

```
termcapinfo xterm* ti@:te@ 
```

> 现在您可以创建一个屏幕，并用鼠标上下滚动；就像你通常做的那样。*

# c# - 进入调试模式时 GUI 不会重绘

> ID：15255078
> 
> 赞同：2
> 
> 时间：2013-03-06T18:23:57.960
> 
> 标签：c#, .net, winforms, .net-2.0

在任何 .NET 2.0 Winforms 应用程序中，如果您在调试模式下运行代码，并且您遇到断点或以其他方式逐行进入代码，并且您希望查看正在调试的应用程序的 GUI，那么 .NET 会不绘制应用程序屏幕。

例如，我有一个应用程序将一些消息写入表单上的 TextBox。当我逐步调试代码时，或者遇到断点时，我想查看 TextBox 中记录的所有消息，但是如果我按 Alt-Tab 从 VS2005 窗口切换到 WinForms 应用程序窗口，我看到的都是是白色。表格不会重绘，直到您在 VS2005 的调试模式下按 F5。

这是什么原因，有没有办法克服这个问题，而不在代码中引入任何线程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:26:22.020

> 这是什么原因

在调试时，您实际上是在阻塞 UI 线程 - 您正在手动单步执行其执行流程。当您停止执行 UI 线程时，它无法绘制 UI。

> 有没有办法克服这个

您可以*尝试*手动调用`Application.DoEvents()`，但我通常建议不要这样做。

最好等到方法结束并让 UI 正常重绘自身。如果您的方法很长（就时间而言），请记住，在*不*调试时，UI 仍然无法在该方法执行时自行更新。这可能会导致您更改设计（仅从我们目前获得的信息很难判断）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:04:50.283

就像其他人在答案和评论中所说的那样，UI 线程被阻止，因此无法重绘。

但是，如果您只想*查看*GUI，而不是与之交互，并且您正在运行 Windows 7/8（这听起来不太可能，因为您使用的是 VS2005）并且没有禁用 aero peek，您可以将鼠标悬停您的应用程序在任务栏中和 Windows 将显示预览缩略图。当您将鼠标悬停在缩略图上时，即使断点阻塞了 UI 线程，您也可以“窥视”应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:26:05.700

这样做的原因是因为您只能有一个 UI 线程，并且当您输入更新该代码的方法时，该代码开始阻塞 UI 线程。在您的方法退出之前它不会更新。

[这是关于消息泵的一个很好的 SO](https://stackoverflow.com/questions/2222365/what-is-a-message-pump)，它是推动 UI 更新的原因

您应该能够在调试时使用[Add Watch/Quick Watch](http://msdn.microsoft.com/en-us/library/0taedcee.aspx)查看任何值。无论如何，这听起来像是您真正想要的。

# javascript - 正确协调两个滚动区域

> ID：15255079
> 
> 赞同：2
> 
> 时间：2013-03-06T18:23:59.393
> 
> 标签：javascript, jquery

我正在尝试协调两个 div 的滚动，[类似于这个问题](https://stackoverflow.com/questions/9236314/how-do-i-synchronize-the-scroll-position-of-two-divs "如何同步两个 div 的滚动位置？")，但是我的两个 div 都是可滚动的（而在问题中，一个 div 是控件，另一个是从属，用户可以滚动其中一个和其他重新-相应地滚动）。

我的 jQuery/JavaScript 是：

```
// as the user scrolls one div, we also scroll the other

var scrolldiv1 = $('#scrolldiv1'),
    scrolldiv2 = $('#scrolldiv2');

scrolldiv1.scroll(function () { scrolldiv2.scrollTop(scrolldiv1.scrollTop()); });
scrolldiv2.scroll(function () { scrolldiv1.scrollTop(scrolldiv2.scrollTop()); }); 
```

当用户使用元素的滚动条滚动 div 时，一切都运行良好。当用户在将鼠标悬停在元素上时使用他或她的鼠标滚轮滚动 div 时，div 保持同步但滚动非常缓慢。我怀疑这两个事件都在触发，并且位置相互争斗。

有没有人对我可以做些什么来使滚轮滚动与滚动条启动的滚动一样敏捷有什么建议？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:31:34.050

我能够通过添加超时事件来延迟触发伴随 div 的滚动来解决我的问题。

```
scrolldiv1.scroll(function () {
    setTimeout(function () { scrolldiv2.scrollTop(scrolldiv1.scrollTop()); }, 200);
});
scrolldiv2.scroll(function () {
    setTimeout(function () { scrolldiv1.scrollTop(scrolldiv2.scrollTop()); }, 200);
}); 
```

# emacs - 如何在emacs中自动关闭自动加密模式缓冲区？

> ID：15255080
> 
> 赞同：3
> 
> 时间：2013-03-06T18:24:01.350
> 
> 标签：emacs, gnupg

我将一些东西保存在一个文件“XXX.gpg”中，我使用 emacs 自动加密模式读取和编辑该文件。

在某些情况下，我会长时间忘记关闭缓冲区，这是一种风险。

我想让缓冲区在一段时间（不活动）后自动保存和关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:07:27.940

您可以使用它`run-with-idle-timer`来构造一个完全符合您要求的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:13:34.100

这就是我使用的：

```
(defun dwim-kill-gpg-buffers ()
  (interactive)
  (let ((buffers-killed 0))
    (dolist (buffer (buffer-list))
      (with-current-buffer buffer
        (when (string-match ".*\.gpg$" (buffer-name buffer))
          (let ((current-time (second (current-time)))
                (last-displayed-time (second buffer-display-time)))
            (when (> (- current-time last-displayed-time)
                     60)
              (message "Auto killing .gpg buffer '%s'" (buffer-name buffer))
              (when (buffer-modified-p buffer)
                (save-buffer))
              (kill-buffer buffer)
              (incf buffers-killed))))))
    (unless (zerop buffers-killed)
      (message "%s .gpg buffers have been autosaved and killed" buffers-killed))))

(run-with-idle-timer 60 t 'dwim-kill-gpg-buffers) 
```

它尽量不关闭最近显示的缓冲区，因此只要有视图切换活动，缓冲区的终止就会延迟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T18:47:46.223

现在我在我的 ~/.emacs 中使用它：

```
(run-with-idle-timer 60 t (lambda ()
                         (let ((victim (get-buffer "XXX.gpg")))
                           (when victim (message "Killing buffer %s" (buffer-name victim)
                                                 (kill-buffer victim)))))) 
```

# java - 用于注册 MVC - JSP、Servlet 的用户名验证

> ID：15255086
> 
> 赞同：0
> 
> 时间：2013-03-06T18:24:29.380
> 
> 标签：java, database, forms, jsp, servlets

我有一个 html 注册表单，我正在使用 Javascript 检查字段以进行验证。但是，我需要检查用户名是否存在于数据库中，如果它确实在警告用户名被使用的部分中打印出一条消息。但是，我必须查看用户是否存在的检查不起作用。

我尝试检查用户名是否存在于用户类中。我正在尝试进行实时验证，因此当用户输入用户名时，我有一个 if 语句来检查数据库以查看用户名是否存在于数据库中。我一直在寻找解决方案，我在网上只能找到使用 php 的解决方案。我想知道有人可以帮助或建议我。我已经包含了表单、servlet、使用的 ajax、用户类和 servlet。- 对不起所有的代码，但我希望有人能看到我哪里出错了。

**HTML 表格**

```
 Username:

     <input id="username" required type="text" name="username" placeholder="Username"  autocomplete="off" onkeyup="updateOutput(this.value)" />
<div id="userNameMessage"></div>
</p> 
```

**小服务程序**

```
 public boolean SaveUser() { 

    boolean saved = false;
    try {

        Connection connection = DBHelperClass.getConnection();
        Statement statement = connection.createStatement();

        String userCheck ="SELECT * FROM User where username='" + userName + "'";

        ResultSet rs1 = statement.executeQuery(userCheck);
        boolean userExists = rs1.next();

                 if (userExists){

        String template = "INSERT INTO user(userName, password, firstName,secondName, email, address, mobile,image) "
                + "VALUES (?,?,?,?,?,?,?,?)";

        PreparedStatement inserter = connection.prepareStatement(template);
        inserter.setString(1, this.userName);
        inserter.setString(2, this.password);
        inserter.setString(3, this.firstName);
        inserter.setString(4, this.secondName);
        inserter.setString(5, this.email);
        inserter.setString(6, this.address);
        inserter.setString(7, this.mobile);
        inserter.setString(8, this.image);

        inserter.executeUpdate();

        ResultSet rs = statement.executeQuery("select max(userid) from user");
        while (rs.next()) {
            System.out.println("max row " + rs.getString(1));
            this.userId = rs.getString(1);
        }

        saved = true;
        inserter.close();
         }
                 else{
                // print message on html page
                 }
        connection.close();

    } catch (SQLException ex) {
        Logger.getLogger(User.class.getName()).log(Level.SEVERE, null, ex);
    }

    return saved;
} 
```

**小服务程序**

```
*/ else if (option.equalsIgnoreCase("add")) {

            String username = mrequest.getParameter("username");
            System.out.println("username" + username);

            String password = mrequest.getParameter("password");
            System.out.println("password" + password);

            String firstName = mrequest.getParameter("firstName");
            System.out.println("firstName" + firstName);

            String secondName = mrequest.getParameter("secondName");
            System.out.println("secondName" + secondName);

            String email = mrequest.getParameter("email");
            System.out.println("email" + email);

            String add = mrequest.getParameter("address");
            System.out.println("address" + address);

            String mobile = mrequest.getParameter("mobile");
            System.out.println("mobile" + mobile);

            String image = mrequest.getParameter("image");

            String userRole = null;

            u = new User(null, username, password, firstName, secondName, email, add, mobile, filename, null);
            boolean saved = u.SaveUser();
            session.setAttribute("user", u);
            address = "/login.html"; 
```

AJAX 代码

```
 *
       var xmlHttp;  
       function updateOutput(inputString)        {               

   if(inputString.length == 0)            {                

      document.getElementById("output").innerHTML = "";                             
    return;            
      }                       
      try            {                
     if(window.XMLHttpRequest)                    
    xmlHttp = new XMLHttpRequest();                
      else if (window.ActiveXObject)                   
       xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");                                                
      if(!xmlHttp || xmlHttp == null)                {                    
       return;                }                                
       var url="doajaxstuff.aspx?q=" + inputString;                
        xmlHttp.onreadystatechange=StateChanged;                
     xmlHttp.open("GET", url, true);               
     xmlHttp.send(null);            }            
         catch(e)            {                
         document.getElementById("output").innerHTML = "An error occured";           
             }                   }                function StateChanged()        {            
             if((xmlHttp.readyState == 4) && (xmlHttp.status == 200))            {                
             document.getElementById("output").innerHTML = xmlHttp.responseText;                   
             }                }    
             </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:54:23.993

我为您创建了示例示例。这应该会有所帮助。

AJAX 调用：

```
<script type="text/javascript">

    var xmlHttp;

    function updateOutput(inputString) {
        if (inputString.length == 0) {
            document.getElementById("output").innerHTML = "";
            return;
        }
        try {
            if (window.XMLHttpRequest)
                xmlHttp = new XMLHttpRequest();
            else if (window.ActiveXObject)
                xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
            if (!xmlHttp || xmlHttp == null) {
                return;
            }
            var url = "validate?userName=" + inputString; // Here, I have mapped servlet as "validate".
            xmlHttp.onreadystatechange = StateChanged;
            xmlHttp.open("GET", url, true);
            xmlHttp.send(null);
        } catch (e) {
            document.getElementById("userNameMessage").innerHTML = "An error occured";
        }
    }
    function StateChanged() {
        if ((xmlHttp.readyState == 4) && (xmlHttp.status == 200)) {
            document.getElementById("userNameMessage").innerHTML = xmlHttp.responseText;
        }
    }
</script> 
```

HTML：

```
Username:  <input id="username" type="text" name="userName"  onblur="updateOutput(this.value)" />
<span id="userNameMessage" style="margin-left:10px;"></span></br>
First Name: <input id="firstname" type="text" name="firstName"  />
.... other fields 
```

小服务程序：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        PrintWriter out = response.getWriter();
        String strStatus = "Username is available";
        try{
            System.out.println("Performing check");
            String username = request.getParameter("userName");
            String strQuery = "SELECT * FROM users WHERE uname='" + username +"'";
            ResultSet rs = DatabaseManager.executeQuery(strQuery);
            boolean userExists = rs.next();
            if (userExists){
                strStatus = "Username already exists"; // Return Exist Msg
            }
        }catch(Exception e){
            strStatus = "Some error occured. Try again"; // Return Err Msg
            e.printStackTrace();
        }
        out.println(strStatus);
    } 
```

现在，**jQuery** Ajax 调用被认为是一种很好的做法。你可以看看[这里](http://javabelazy.blogspot.in/2012/08/jquery-ajax-call-to-servlet-example.html)。

# c# - 设置十进制标识符的小数位数和精度

> ID：15255094
> 
> 赞同：3
> 
> 时间：2013-03-06T18:24:43.910
> 
> 标签：c#, nhibernate, nhibernate-mapping, mapping-by-code

我们正在开发一个分布式的、顺序的 ID 生成器，它可以创建一个 96 位的数字 ID。我们在应用程序中为这个值工作的数据类型是`decimal`. 在数据库方面，列的数据类型将是`decimal(28,0)`.

问题是当我通过代码映射并配置Id时，我无法指定精度和比例。理想情况下，我想要这样的东西：

```
map.Id(c => c.Id, id =>
         {
             id.Generator(RustFlakeGeneratorDef.Instance);
             id.Precision(28); // nope
             id.Scale(0); // nope. *$%!
         }); 
```

如果我尝试忽略它，NHibernate 会`decimal(28,5)`在创建参数和发出命令时回退到使用，这将不起作用。

我知道有一张[票](https://nhibernate.jira.com/browse/NH-2824)，如果我想在适当的时候做出贡献。与此同时，我需要看看这是否会成功，所以我想知道是否有任何解决方法。自定义类型，破解反序列化的 HBM，诸如此类？

我确实尝试创建自己的派生自 的类型`DecimalType`，并且我覆盖了返回 的属性，`SqlType`我在其中指定了自己的精度和比例，但这似乎没有任何作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:49:59.750

所以我想我可以编辑 ByCode 创建的反序列化 HBM 映射并手动更新映射。

```
var mapping = ModelMapper.CompileMappingFor(entityTypes);

// HACK: by code mapping doesn't support setting precision and scale, so fix flake ID columns here
var flakeTypeName = typeof (RustFlakeGenerator).AssemblyQualifiedName;

foreach (var id in (from root in mapping.RootClasses
                    where root.Id.Type.name == "Decimal" && root.Id.generator.@class == flakeTypeName
                    select root.Id))
{
    var column = id.column == null || !id.column.Any() ? new HbmColumn() : id.column.First();
    column.name = id.name;
    column.precision = "28";
    column.scale = "0";

    if (id.column == null || !id.column.Any()) id.column = new[] {column};
} 
```

这很糟糕，SchemaExport 等人完全忽略了精度和比例（默认为`decimal(19,5)`，但我只将它用于脚手架，并且可以手动修复它），但它可以工作。

# three.js - 无法在屏幕上居中 3D 对象

> ID：15255097
> 
> 赞同：1
> 
> 时间：2013-03-06T18:24:45.530
> 
> 标签：three.js

目前，我正在获取对象边界框的每个角并将其转换为标准化设备坐标 (NDC)，并跟踪最大和最小 NDC。然后我计算 NDC 的中间值，在世界上找到它并让我的相机观察它。

```
<Determine max and minimum NDCs>

centerX = (maxX + minX) / 2;
centerY = (maxY + minY) / 2;

point.set(centerX, centerY, 0);
projector.unprojectVector(point, camera);
direction = point.sub(camera.position).normalize();
point = camera.position.clone().add(direction.multiplyScalar(distance));

camera.lookAt(point);
camera.updateMatrixWorld(); 
```

这是一个近似的方法对吗？我在几个地方看到了它的建议。我问是因为每次我将对象居中时，当再次计算它们时（在进行任何其他更改之前），最小和最大 NDC 应该相等，但它们不是。我接近但不相等的数字（忽略负号），随着我越来越近，数字之间的“错误”变得越来越大。IE前几个中心的错误是：0.0022566539084770687、0.00541687811360958、0.011035676399427596、0.025670088917273515、0.06396864345885889等。

有没有我遗漏的步骤会导致这种情况？

我将此代码用作 while 循环的一部分，以在屏幕上最大化和居中对象。（我正在对其进行编程，以便用户可以输入一个航向和一个标高，并且相机将被定位，以便它在该航向和标高处查看对象。几周后，我确定（现在）它更容易这样做。）

然而，当我将相机靠近我的物体时，这似乎开始分崩离析。例如，经过几次迭代后，我的最大 X NDC 为 0.9989318709122867，我的最小 X NDC 为 -0.9552042384799428。但是，当我查看计算点时，我看起来太靠右了，在下一次迭代中，我的最大 X NDC 是 0.9420058636660581，我的最小 X NDC 是 1.0128126740876888。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-09T08:04:45.303

Your approach to this problem is incorrect. Rather than thinking about this in terms of screen coordinates, think about it terms of the scene.

You need to work out how much the camera needs to move so that a ray from it hits the centre of the object. Imagine you are standing in a field and opposite you are two people Alex and Burt, Burt is standing 2 meters to the right of Alex. You are currently looking directly at Alex but want to look at Burt without turning. If you know the distance and direction between them, 2 meters and to the right. You merely need to move that distance and direction, i.e. right and 2 meters.

In a mathematical context you need to do the following:

Get the centre of the object you are focusing on in 3d space, and then project a plane parallel to your camera, i.e. a tangent to the direction the camera is facing, which sits on that point.

Next from your camera raycast to the plane in the direction the camera is facing, the resultant difference between the centre point of the object and the point you hit the plane from the camera is the amount you need to move the camera. This should work irrespective of the direction or position of the camera and object.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:33:52.223

你正在玩什么是第一个问题。鸡还是鸡蛋。每次更改相机属性时，您都会有效地更改对象在 NDC 空间中的投影位置。所以即使你认为你已经接近了，你也永远不会到达那里。

换个角度看问题。将您的相机放置在某处并尝试使其尽可能规范（即，给它一个 1 的纵横比）并将您的对象放置在相机 z 轴周围。这不可能吗？

# javascript - JsViews 与 AngularJS

> ID：15255098
> 
> 赞同：-1
> 
> 时间：2013-03-06T18:24:47.187
> 
> 标签：javascript, knockout.js, angularjs, single-page-application, jsviews

我打算开发单页应用程序。jsViews/jsRender 看起来很有前途，它几乎达到了 Beta 版。由于我是 SPA 开发的新手，我很想知道 jsViews 在速度、功能或可用性方面与其他 SPA 框架（例如 AngularJS）相比如何？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:41:07.403

他们有非常不同的方法。如果您的目的是比较它们，我建议您研究两者。最好的选择是找到适合您的框架或库集并与之一起运行。没有“最好”。

# ios - 使用弱只读属性？

> ID：15255099
> 
> 赞同：5
> 
> 时间：2013-03-06T18:24:55.123
> 
> 标签：ios, objective-c, cocoa, properties

应该使用

`@property (nonatomic, weak, readonly)`

或者

`@property (nonatomic, readonly)`?

Weak 的优势在于，如果实例被释放，则将其归零，但 readonly 是否意味着弱？如果需要弱行为，是否应该明确声明属性为弱？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T18:30:18.027

如果你想保留一个指向你不拥有的对象的指针，但希望它只在它存在时才有效，那么你想使用弱指针，因为当它被所有者释放时，你的指针会自动设置为 nil 并且不会指向不应该指向的内存。

* * *

这两个都有不同的含义，如果它是弱或强， readonly 没有任何区别。

```
@property (nonatomic, weak, readonly)
@property (nonatomic, readonly) 
```

您还可以[在此处找到一些参考](https://stackoverflow.com/questions/10694676/what-is-the-correct-way-to-declare-a-readonly-property-for-ios-using-arc)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T18:39:24.840

弱或强与只读或读写无关。无暗示对方。

牢固的关系需要所有权。弱者不会，但它会收到在删除相关对象时被取消的服务。

Readonly 禁止设置器（afaik）。不能从其类之外更改该属性。读写（如果没有说明，这是默认设置）允许更改属性。

基本上就是这样。那是两个不相关的设置。它们适用于所有可以想到的组合。

# java - Scala 中的 Jackson 注释从 1.9 到 2.1 中断

> ID：15255101
> 
> 赞同：3
> 
> 时间：2013-03-06T18:25:12.500
> 
> 标签：java, scala, jackson

刚刚将 Jackson 从 1.9 升级到 2.1 并立即注意到`@(JsonProperty@field)`注释已损坏。请注意 Scala 案例类的特殊之处`@field`。这是一个示例：

```
case class Watcher(
  @(JsonProperty@field)("guid")
  @(RiakKey@field)
  val guid: String,

  @(JsonProperty@field)("socialNetwork")
  val socialNetwork: String, // instragram, twitter
) 
```

当我从数据库中提取一个序列化为 JSON 的 Watcher 时，Jackson 去反序列化它并抛出异常：

```
com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field "guid" (class com.domain.SocialStreamService.models.Watcher), not marked as ignorable (0 known properties: ]) 
```

现在，由于这是在工作`1.9`，我假设有些事情发生了变化。有人知道问题的原因吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:37:48.160

这是由命名空间问题和我使用 Jerkson（它仍然作为依赖项引入 1.x，因此不会引发编译器错误）引起的。为了解决这个问题，我不得不将命名空间从 更改`com.codehaus`为`com.fasterxml`.

与此同时，有一个遗留自省器供需要的人使用：[https ://github.com/Laures/jackson-legacy-introspector](https://github.com/Laures/jackson-legacy-introspector)

# windows-phone-8 - 如何在 windows phone 8 地图控件中的两个特定位置之间绘制路线？

> ID：15255103
> 
> 赞同：1
> 
> 时间：2013-03-06T18:25:16.823
> 
> 标签：windows-phone-8

我看到了这段代码，但它只有在搜索指定目的地时才有效！我需要使用 latitude 和 longitude 导航到特定位置。

```
GeocodeQuery Mygeocodequery = null;
Mygeocodequery = new GeocodeQuery();
Mygeocodequery.SearchTerm = "Seattle, WA";
Mygeocodequery.GeoCoordinate = new GeoCoordinate(MyGeoPosition.Coordinate.Latitude,MyGeoPosition.Coordinate.Longitude);
Mygeocodequery.QueryCompleted += Mygeocodequery_QueryCompleted;
Mygeocodequery.QueryAsync();
void Mygeocodequery_QueryCompleted(object sender, QueryCompletedEventArgs<IList<MapLocation>> e)
{
if (e.Error == null)
 {
  MyQuery = new RouteQuery();
  MyCoordinates.Add(e.Result[0].GeoCoordinate);
  MyQuery.Waypoints = MyCoordinates;
  MyQuery.QueryCompleted += MyQuery_QueryCompleted;
  MyQuery.QueryAsync();
  Mygeocodequery.Dispose();
 }
}
void MyQuery_QueryCompleted(object sender, QueryCompletedEventArgs<Route> e)
{
   if (e.Error == null)
   {
  Route MyRoute = e.Result;
  MapRoute MyMapRoute = new MapRoute(MyRoute);
  MyMap.AddRoute(MyMapRoute);
  MyQuery.Dispose();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-28T20:17:01.190

这是一个示例代码（假设您已经有了源坐标和目标坐标）。

```
 public partial class Foo : PhoneApplicationPage
    {
        List<GeoCoordinate> MyCoordinates = new List<GeoCoordinate>();

        public Foo()
        {
             InitializeComponent();
        }

        private void SetMapCoordinates()
        {
            MyCoordinates.Add(new GeoCoordinate(Target.Latitude, Target.Longitude));
            MyCoordinates.Add(new GeoCoordinate(Source.Latitude, Source.Longitude));
            DrawMyRoute();
        }

        void MyRoute()
        {
            MyQuery = new RouteQuery();
            MyQuery.TravelMode = TravelMode.Walking;
            MyQuery.Waypoints = MyCoordinates;
            MyQuery.QueryCompleted += MyQuery_QueryCompleted;
            MyQuery.QueryAsync();
        }

        void MyQuery_QueryCompleted(object sender, QueryCompletedEventArgs<Route> e)
        {
            if (e.Error == null)
            {
                Route MyRoute = e.Result;
                MapRoute MyMapRoute = new MapRoute(MyRoute);
                MyMapRoute.Color = (Colors.Blue);
                MyLocMap.AddRoute(MyMapRoute);
                #region Draw source location ellipse
                    Ellipse myCircle = new Ellipse();
                    myCircle.Fill = new SolidColorBrush(Colors.Blue);
                    myCircle.Height = 20;
                    myCircle.Width = 20;
                    myCircle.Opacity = 50;
                    MapOverlay myLocationOverlay = new MapOverlay();
                    myLocationOverlay.Content = myCircle;
                    myLocationOverlay.PositionOrigin = new Point(0.5, 0.5);
                    myLocationOverlay.GeoCoordinate = CoordinateConverter.ConvertGeocoordinate(SourceLocation);
                    MylocationLayer = new MapLayer();
                    MylocationLayer.Add(myLocationOverlay);
                    MyLocMap.Layers.Add(MylocationLayer);
            #endregion
            #region Draw target location ellipse
                    Ellipse CarCircle = new Ellipse();
                    CarCircle.Fill = new SolidColorBrush(Colors.Red);
                    CarCircle.Height = 20;
                    CarCircle.Width = 20;
                    CarCircle.Opacity = 50;
                    MapOverlay CarLocationOverlay = new MapOverlay();
                    CarLocationOverlay.Content = CarCircle;
                    CarLocationOverlay.PositionOrigin = new Point(0.5, 0.5);
                    CarLocationOverlay.GeoCoordinate = CoordinateConverter.ConvertGeocoordinate(TargetLocation);
                    CarlocationLayer = new MapLayer();
                    CarlocationLayer.Add(CarLocationOverlay);
                    MyLocMap.Layers.Add(CarlocationLayer);
            #endregion
            MyQuery.Dispose();
           }
       }

        protected override void OnNavigatedTo(NavigationEventArgs e)
        {
            SetMapCoordinates();
        }
    } 
```

# android - PowerVR Android 示例：makefile 无法正常工作

> ID：15255106
> 
> 赞同：1
> 
> 时间：2013-03-06T18:25:20.523
> 
> 标签：android, android-ndk, cygwin, powervr-sgx

假设我满足所有要求，我很难在 Windows 8 64 上设置 PowerVR SDK for Android：

*   Android SDK（新鲜的Eclipse）
*   安卓NDK
*   Cygwin（带制作）
*   PowerVR 安卓 SDK 3.0

我可以完美地制作和运行 Android NDK 示例。但是，构建任何 PowerVR 示例（来自 SDK）的相同过程都失败了。这是我尝试运行 makefile 时的输出：

> $ ndk Compile++ thumb : OGLES2Texturing <= OGLES2Texturing.cpp arm-linux-androideabi-g++.exe: 错误: C:/cygwin///cygdrive/c/Users/stfn/workspaces/android/03_Texturing/jni/OGLES2Texturing.cpp:没有这样的文件或目录 arm-linux-androideabi-g++.exe：致命错误：没有输入文件编译终止。/cygdrive/c/android-ndk-r8d/build/core/build-binary.mk:269：目标`obj/local/armeabi/objs/OGLES2Texturing//cygdrive/c/Users/stfn/workspaces/android/的配方03_Texturing/jni/OGLES2Texturing.o' 失败：*** [obj/local/armeabi/objs/OGLES2Texturing//cygdrive/c/Users/stfn/workspaces/android/03_Texturing/jni/OGLES2Texturing.o] 错误 1

我想这个错误应该与给编译器的错误路径有关。对我来说，它看起来像是标准 Windows 和 Cygwin/Unix 路径的混合：*** C:/cygwin///cygdrive/c/Users/stfn/...***

如果现在经历了这么多 makefile 试图解决这个问题，但我只是不知道还能去哪里找。这是我第一次尝试弄乱 NDK。恐怕这可能是我的最后一次了。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T11:20:05.187

1\. 在 Android.mk 文件中，对于 PVRSDKDIR，设置工作区中项目文件夹的路径。2.将powervr sdk文件夹中的build、tools和shell文件夹复制到你的项目文件夹中

# sharepoint - 允许页面布局隐藏母版页上的控件

> ID：15255108
> 
> 赞同：0
> 
> 时间：2013-03-06T18:25:26.703
> 
> 标签：sharepoint, sharepoint-2007

如果我想将常规母版页用于新的页面布局，但我不希望主导航菜单控件（第 3 方控件）可见，如何让页面布局隐藏它？在 asp.net 中，我会在母版页上公开一个公共属性或方法，然后从子页调用它，但不确定在 SharePoint 中可以做什么，因为没有代码后面或可识别的母版页类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:29:23.633

I got it working like this but I'm not in love with the implementation.

On Master Page:

```
...
            <c:Menu id="myMenu" runat="server" />
            ...
        </form>
    </body>
</html>

<script runat="server">
    public bool IsConsumerNavVisible
    {
        set
        {
            myMenu.Visible = value;
        }
    }
</script> 
```

On PageLayout:

```
<script runat="server">
    protected void Page_Load(object sender, EventArgs e)
    {
        System.Reflection.PropertyInfo pi = Page.Master.GetType().GetProperty("IsConsumerNavVisible");
        pi.SetValue(Page.Master, false, null);
    }
</script> 
```

So I exposed a public property on the master page to set the visibility and then used reflection on the PageLayout to find & set that property. I tried putting the PageLayout code in just a <% %> script block and it executed but the menu would end up visible anyway. Putting it in a Page_Load event handler fixed that. If there is a better way I'm all ears.

# phing - 拆分 Phing 构建文件

> ID：15255115
> 
> 赞同：2
> 
> 时间：2013-03-06T18:25:42.900
> 
> 标签：phing

我这里有一个巨大的 phing 构建文件。有没有办法将文件集之类的东西放入 build.xml 使用的外部文件中？这里只需要一些组织。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:22:19.747

您可以尝试使用[import task](http://www.phing.info/docs/guide/trunk/chapters/appendixes/AppendixB-CoreTasks.html#ImportTask)，它可以让您将构建文件拆分为多个文件。您还可以查看[属性文件](http://www.phing.info/docs/guide/trunk/chapters/appendixes/AppendixF-FileFormats.html#PropertyFileFormat)

[FileLists](http://www.phing.info/docs/guide/trunk/chapters/appendixes/AppendixD-CoreTypes.html#FileList)还支持一个`listfile`属性，它是一个文本文件，每行一个文件。

[FileSets](http://www.phing.info/docs/guide/trunk/chapters/appendixes/AppendixD-CoreTypes.html#Fileset)支持`includesfile`and`excludesfile`属性，它是一个带有模式列表的文本文件。

# wcf - 具有实体框架的存储库模式：如何在上下文不存在时使 .Include 工作？

> ID：15255118
> 
> 赞同：0
> 
> 时间：2013-03-06T18:25:48.977
> 
> 标签：wcf, entity-framework, repository-pattern

我在我的项目中使用实体框架和通用存储库。

以下是我的存储库中的一种方法。

```
public IQueryable<TEntity> GetQuery<TEntity>() where TEntity : class
        {
            var entityName = GetEntityName<TEntity>();
            return ((IObjectContextAdapter)DbContext).ObjectContext.CreateQuery<TEntity>(entityName);
        } 
```

当我在 WCF 服务中使用此方法时，我想包含该 DbSet 的某些导航属性。例如，

```
List<Countries> GetCountries()
{   
    return this.repository.GetQuery<Countries>().Include("Cities").AsEnumerable().ToList();
} 
```

这应该返回导航属性中包含城市的所有国家/地区。

目前这给出了一个错误，说[底层连接已关闭...](https://stackoverflow.com/questions/15207066/the-underlying-connection-was-closed-error-while-using-include-on-ef-objects)

为了实现这一目标，您预计要做哪些改变？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:23:29.320

首先重写您的 GetQuery 方法以直接使用 DbContext。ObjectContext 的 GetQuery 方法旨在使用类似 SQL 的语法来查询数据存储。

你在这里做了很多你不需要的事情。由于您从 DbContext 派生类开始，只需使用 dbContext.Set() 来检索实体类型的 DbSet，然后对 DbSet 对象使用 Include(path) 方法。

存储方法：

```
public IQueryable<TEntity> GetQuery<TEntity>( string includePath = null )
{
    var dbSet = DbContext.Set<TEntity>();

    if( !string.IsNullOrWhitespace( includePath ) )
    {
        return dbSet.Include( includePath );
    }

    return dbSet;
} 
```

用法：

```
List<Countries> GetCountries()
{   
    return this.repository.GetQuery<Countries>( "Cities" ).ToList();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:05:43.583

升级到 EF 5.0 代码生成器模板已解决此问题。

# c - 从应用程序创建 Unix 用户

> ID：15255120
> 
> 赞同：0
> 
> 时间：2013-03-06T18:25:58.693
> 
> 标签：c, unix, solaris, user-accounts, libc

我正在开发一个与更大的维护应用程序相关联的本土用户数据库。

这个想法已经浮出水面，将我们的用户与系统用户联系起来，每次在我们的程序中生成新用户时创建匹配的 /etc/passwd 条目。其他交互，例如查询用户名的 uid/gid，反之亦然，验证文件系统所有权等。我们已经定义了标准字段，如 user.uid、user.gid、user.home、内部权限等，只需要一个将这些传递给系统的方法。

问题是，在线搜索任何信息都是大海捞针 - 我无法找到任何用于用户帐户 getter 和 setter 的标准库，我开始怀疑这些是否存在？这里是 spawnv useradd 的正确方法吗？看来一定有更好的办法！

请注意，出于所有意图和目的，运行此系统的系统是一次性使用（虚拟化）。

最终编辑：事实证明，最经济的解决方案是：

```
useradd -g group -c "firstname lastname" -d /export/home/username -m -s /bin/bash username 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:28:58.083

是`useradd`你要找的吗？

*   [http://bga.org/~lessem/psyc5112/usail/man/solaris/useradd.1.html](http://bga.org/~lessem/psyc5112/usail/man/solaris/useradd.1.html)
*   [http://www.linuxquestions.org/questions/solaris-opensolaris-20/adduser-in-solaris-480955/#post2411793](http://www.linuxquestions.org/questions/solaris-opensolaris-20/adduser-in-solaris-480955/#post2411793)

```
useradd -g group -c "firstname lastname" -d /export/home/username -s /bin/ksh username
mkdir -p /export/home/username
chown username /export/home/username 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T18:32:15.450

你可以把你的程序变成一个[NIS](http://en.m.wikipedia.org/wiki/Network_Information_Service#section_1)。无法帮助您实际执行此操作，但可能值得您考虑。

补充：您也许也可以使用 ldap。

但这两者中的任何一个都意味着您只需要使数据库保持最新状态。passwd 会自行处理

# javascript - 如果检测到 Internet Explorer，则运行 javascript

> ID：15255122
> 
> 赞同：0
> 
> 时间：2013-03-06T18:26:07.103
> 
> 标签：javascript, jquery, qtip2

我有这个代码：

```
$(document).ready(function () {
    $('body a[href]').qtip({
        hide: {
            fixed: true,
            delay: 500
        },
        style: {
            classes: 'qtip-dark qtip-shadow'
        },
        position: {
            viewport: $(window)
        }
    });
    jQuery.each(jQuery.browser, function (i, val) {
        $("<div>" + i + " : <span>" + val + "</span>")
            .appendTo(document.body);
    });
}); 
```

除了上面的代码，如果从这个浏览器功能检测到 Internet Explorer，我将如何运行脚本？如果检测到 Internet Explorer，我想运行的脚本是：

```
$(document).ready(function () {
    $('body a[href]').qtip({
        hide: {
            fixed: true,
            delay: 500
        },
        style: {
            classes: 'qtip-dark qtip-shadow'
        }
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T18:28:42.497

使用[IE 条件注释](http://msdn.microsoft.com/en-us/library/ms537512(v=vs.85).aspx)。

```
<!--[if IE]>
<script>
// run code here or link to external file
</script>
<![endif]--> 
```

它们也是高度可定制的——`<!--[if lt IE 8]>`例如，只能在 IE 7 或更低版本上运行。开发人员一直使用它来为 IE6/7/8 创建自定义样式表。

也就是说，您应该真正考虑使用**功能检测**而不是**浏览器检测**来实现您尝试实现的任何功能。请参阅[http://modernizr.com](http://modernizr.com)，了解可以说是迄今为止设计的最佳解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:29:31.783

您可以使用javascript代码来检测

```
//Test for Internet Explorer
if (/MSIE\s([\d.]+)/.test(navigator.userAgent)) {
    //Get the IE version.  This will be 6 for IE6, 7 for IE7, etc...
    version = new Number(RegExp.$1);
} 
```

# xcode - initWithContentsOfURL 通常返回 nil

> ID：15255129
> 
> 赞同：2
> 
> 时间：2013-03-06T18:26:30.350
> 
> 标签：xcode, networking, nsurlconnection, initwithcontentsofurl

```
NSError *error;
NSString *string = [[NSString alloc]
                    initWithContentsOfURL:URL
                    encoding:NSUTF8StringEncoding
                    error:&error]; 
```

当我在我的 iPhone 上测试它时，它总是在我打开 wifi 时工作。但是，当我使用 3G 时，我经常得到零。如果我连续尝试 15 次（我有一个更新按钮），我终于得到了想要的结果。

我的问题是，这个问题是在服务器端还是我的代码不稳定？我应该使用不同的方法来获取更安全的数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:55:15.810

你没有提供足够的信息来给出一个模糊的答案，但你确实有一些选择。

最重要的是，你有一个“ `error`”参数，你应该打印出它的结果。您还可以在 NSString 类中使用更好的 API。

将您的代码更改为以下内容：

```
NSError *error = NULL;
NSStringEncoding actualEncoding;

// variable names in Objective-C should usually start with lower case letters, so change
// URL in your code to "url", or even something more descriptive, like "urlOfOurString"
NSString *string = [[NSString alloc] initWithContentsOfURL:urlOfOurString usedEncoding:&actualEncoding error:&error];
if(string)
{
    NSLog( @"hey, I actually got a result of %@", string);

    if(actualEncoding != NSUTF8StringEncoding)
    {
        // I also suspect the string you're trying to load really isn't UTF8
        NSLog( @"and look at that, the actual encoding wasn't NSUTF8StringEncoding");
    }
} else {
    NSLog( @"error when trying to fetch from URL %@ - %@", [urlOfOurString absoluteString], [error localizedDescription]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:34:05.673

I'm now using [STHTTPRequest](https://github.com/nst/STHTTPRequest) instead. I recommend this library very much, easy to use yet powerful.

# php - MySQL不会在上传文件后将数据插入表中

> ID：15255135
> 
> 赞同：0
> 
> 时间：2013-03-06T18:26:45.153
> 
> 标签：php, mysql

我正在尝试创建一个图库系统，该系统在表中为每个图像创建条目，允许脚本检索具有特定值的所有图像。目前我已经设法让文件上传工作，尽管它没有将文件名和画廊 ID 输入到我的表中 - 它根本没有创建一行。下面是代码，任何帮助都会很棒:)！尽管文件上传之类的东西并不是我的强项，但我已经搞砸了一些事情。

```
<?php
require "common.php";
$con = mysql_connect("localhost","$username","$password");
mysql_select_db("$dbname", $con);
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
$id = $_GET['id'];
$query2 = mysql_query("SELECT id,title,date FROM galleries WHERE id = $id");
    if (!$query2) {
        echo 'Could not run query: ' . mysql_error();
        exit;
}
$row = mysql_fetch_row($query2);
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 2000000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
        echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

    if (file_exists("../galleries/images/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "../galleries/images/" . $_FILES["file"]["name"]);
      $file = '["file"]["name"]';
      $sql="INSERT INTO images (url, gallery)
        VALUES
  ('$_POST[$file]','$_POST[$id]')";
  header("Location: ../../../gallery.php?id=" . $row[0]); 
  die("Redirecting to: admin.php"); 
if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
      }
    }
  }
else
  {
  echo "Invalid file";
  }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:30:52.407

问题是您在执行查询之前重定向并终止脚本：

```
$sql="INSERT INTO images (url, gallery)
        VALUES
         ('$_POST[$file]','$_POST[$id]')";
header("Location: ../../../gallery.php?id=" . $row[0]); 
die("Redirecting to: admin.php");
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ nothing after this gets executed
if (!mysql_query($sql,$con))
     ^^^^^^^^^^^^^^^^^^^^^^ this query will never run
   ... 
```

你真的应该切换到 PDO（或 mysqli）和准备好的语句以避免 sql 注入问题。

# javascript - javascript中的getAttribute在IE8中给出错误

> ID：15255138
> 
> 赞同：0
> 
> 时间：2013-03-06T18:26:54.543
> 
> 标签：javascript, internet-explorer, internet-explorer-8

我`getAttribute`在javascript中的方法有问题，但在其他浏览器中一切正常。

这是为什么？

JS：

```
(function(window, $) {

  var textInput = document.getElementsByTagName('input'),
      placeholder = 'placeholder' in document.createElement('input'),
      placeholderText,
      max = textInput.length,
      i;

  if (!placeholder) {
    for (i = 0; i < max; i += 1) {

        if (textInput[i].type === 'text') {

            placeholderText = textInput[i].getAttribute('placeholder');
            console.log(textInput[i].getAttribute('placeholder'));

            textInput[i].setAttribute('value', placeholderText);        

            /**
            * Done especially because of IE...
            **/
            var addEvent = function (options) {
                if (options.tag.addEventListener) {
                    options.tag.addEventListener(options.event, options.fn, false);
                } else if (options.tag.attachEvent) {
                    options.tag.attachEvent('on' + options.event, options.fn);
                } else {
                    options.tag['on' + options.event] = options.fn;
                }
            };

            /**
            * On blur, refill text field with initial text
            **/
            var onBlur = function() {
                var thisPlaceholderText = this.getAttribute('placeholder');
                this.value = thisPlaceholderText;
            };

            /**
            * On keypress, remove the text field initial text
            **/
            var onKeypress = function() {
                var thisPlaceholderText = this.getAttribute('placeholder');

                if(this.value === thisPlaceholderText) {
                    this.value = '';
                }
            };

            // on blur
            addEvent({ 
                tag: textInput[i], 
                event: 'blur', 
                fn: onBlur 
            });

            // on keypress
            addEvent({ 
                tag: textInput[i], 
                event: 'keypress',
                fn: onKeypress 
            });
        }

        // on submit, don't take the value of text-field if it's the same as placeholder
        $('input[type="text"').parents('form').submit(function(e) {

            if (textInput[i].value === placeholderText) {
                textInput[i].value = '';
            } else {
                textInput[i].setAttribute('value', placeholderText);
            }
        });
    }
  }
}(window, jQuery)); 
```

HTML：

```
<form id="search-form">
<fieldset>

    <!-- from -->
    <ul id="from">
        <li>
            <label for="travel-from">Travelling from</label>
            <input id="travel-from" type="text" placeholder="e.g. London Paddington" />
        </li>
        <li>
            <div class="left-col">
                <label for="depart-date">Depart</label>
                <input id="depart-date" type="text" placeholder="dd/mm/yyyy" />
            </div>
            <div class="right-col">
                <ul>
                    <li>
                        <label for="from-hrs">Time</label>
                        <div id="from-hrs">
                            <select>
                                <option value="00" selected>00</option>
                                <option value="01">01</option>
                                <option value="02">02</option>
                                <option value="03">03</option>
                                <option value="04">04</option>
                                <option value="05">05</option>
                            </select>
                        </div>
                    </li>
                    <li>
                        <label for="from-mins">Minutes</label>
                        <div id="from-mins">
                            <select>
                                <option value="00" selected>00</option>
                                <option value="05">05</option>
                                <option value="10">10</option>
                                <option value="15">15</option>
                                <option value="20">20</option>
                            </select>
                        </div>
                    </li>
                </ul>
            </div>
        </li>
    </ul>
    <!-- from -->

</fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:29:38.407

Internet Explorer* 不支持`placeholder`输入属性，因此您无法在 javascript 中获取该属性。

*IE10 可以，我相信

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T11:16:40.207

正如@Pointy 在对原始问题的评论中指出的那样，*如果您仍然使用 jQuery，那么使用***attr**而不是~~getAttribute~~会更好

 ~~如果您依赖以下内容，这可能会为您省去一些麻烦：

### IE8

```
LOG: typeof someHTMLelement.getAttribute 
LOG: object 
```

### 普通浏览器

```
typeof someHTMLelement.getAttribute
function 
```~~

# random - 根据期望值生成随机数

> ID：15255139
> 
> 赞同：0
> 
> 时间：2013-03-06T18:26:55.673
> 
> 标签：random, numbers

我正在用 java 编程，我遇到了一个可以使用帮助的问题。基本上我需要用户输入他们期望某个事件在一定时间内发生多少次。该事件也需要一定的时间才能完成。综上所述，我需要使用随机数生成器来根据预期值决定事件是否应该发生。

这是一个例子。假设该事件需要 2 秒才能完成。用户说他们想要总共 100 秒，他们希望事件发生 25 次。现在这就是我所拥有的。Units 是时间单位，expectedLanding 是他们希望事件发生的次数。

```
double isLandingProb = units/expectedLanding;
double isLanding = isLandingProb * random.nextDouble();
if(isLanding >= isLandingProb/2){
//do event here
} 
```

这个解决方案不起作用，我想不出可行的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:30:43.300

尝试这个：

```
double isLandingProb = someProbability;
double isLanding = random.nextDouble();

if(isLanding <= isLandingProb){
    //do event here
} 
```

例如，如果您的概率是 0.25（4 分之 1），并且 nextDouble 返回一个介于 0 和 1 之间的随机数，那么您的 nextDouble 需要小于（或等于）0.25 才能实现着陆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:36:37.270

给定一个需要`x`几秒钟才能运行的事件，但您希望它平均每秒运行一次`y`，那么它需要以概率执行`x/y`。那么事件在几秒内运行的秒数的期望`y`是`x`= 一个事件。

```
int totalSeconds;
int totalTimes;
double eventTime;

double secondsPerEvent = 1.0d * totalSeconds / totalTimes;
if( eventTime > secondsPerEvent ) throw new Exception("Impossible to satisfy");

double eventProbability = eventTime / secondsPerEvent;

if( eventProbability < random.nextDouble() )
    //  do event 
```

# javascript - 使用ajax在div中显示用户配置文件

> ID：15255149
> 
> 赞同：0
> 
> 时间：2013-03-06T18:27:33.420
> 
> 标签：javascript, ruby-on-rails, ajax, ruby-on-rails-3, jquery

当管理员鼠标悬停在用户名链接上时，我想显示用户个人资料。如果这是第一次，则会显示用户个人资料；那么下次 ajax 不应该触发并在没有 ajax 触发的情况下显示用户配置文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:44:10.343

假设您使用的是 jQuery，请将悬停事件绑定到用户名链接。如此：

```
$('.username').hover(function (e) {
    console.log("i'm hovering!! on id: "+$(this).attr('data-user-id')); //See the next step for where this came from
} 
```

接下来，将用户的 id 添加到用户名元素中，可能在数据属性中：

```
<span class="username" data-user-id="1234567890">Username</span> 
```

接下来，记录哪些用户已经被加载，可能是通过 id。当您获取新内容时，将其添加到对象中。我喜欢把这样的物体放在窗户上。

```
window.loadedUserInfo = {}; 
```

悬停时检查此对象中是否存在 userId 键。如果是，请使用它。如果没有，请使用 ajax 调用来获取它：

```
$.ajax({
   url : "path/to/userinfo"+userid,   //I'm assuming you're using restful endpoints
   type : "GET",
   success : function (res) {
      window.loadedUserInfo[userid] = res;
      //Format your popover with the info
   },
   error: function (jqxhr) {
      //something went wrong
   }
}) 
```

至于弹出框本身，您可能可以使用引导弹出框。

把它们放在一起：

```
$(".username").hover(function (e) {
        console.log("i'm hovering!! on id: "+$(this).attr("data-user-id")); //See the next step for where this came from
    if (typeof window.loadUserInfo[$(this).attr("data-user-id")] == 'undefined') {
      $.ajax({
         url : "path/to/userinfo"+userid,   //I'm assuming you're using restful endpoints
         type : "GET",
         success : function (res) {
            window.loadedUserInfo[userid] = res;
            //Format your popover with the info
         },
         error: function (jqxhr) {
            //something went wrong
         }
      })
    } else {
       //populate popover with info in window.loadUserInfo[$(this).attr('data-user-id')]
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:44:46.140

要逐步实现该功能：

1.  在用户名的鼠标悬停时，实现一个 ajax 调用，在用户名附近的 html 中呈现用户配置文件
2.  通过 javascript，实现这样的功能，当用户离开用户名/用户配置文件时，用户配置文件 div 现在被隐藏
3.  在上面的 #1 中进行 ajax 调用时，检查 div 是否已经存在，其中包含您尝试请求的用户 ID 的用户配置文件。这可以通过`id`在用户配置文件部分中添加一些并检查该`#user_profile_#{id}`div 是否存在来轻松实现。

您的要求太宽泛，无法提供任何代码...如果您在实施上述任何部分时遇到问题，请将它们分别作为问题一一发布..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:38:52.557

您需要知道用户名链接的 id 和类。

您可以让 jQuery 监听悬停，当该事件发生时，您可以调用将执行 ajax 的函数。

但是，您需要知道用户的 id，最好的方法是执行类似的操作

```
<a href='user123.php' class='userHref' id='user_123'>I want to be hovered</a> 
```

现在你有一个链接可以悬停在上面。

```
$('.userHref').live("hover", function()
{
    var userHrefId = $(this).attr('id');
    var userHrefIdSplit = userHrefId .split('_');
    var userId = userHrefIdSplit[1];
    useAjax(userId);
}); 
```

现在您已经通过监听类 userHref 的链接上的任何悬停来监听悬停，jquery 通过获取 a 元素的 id 来响应，将 id 分成 2 个单独的项目，其中第二个表示用户 Id。

现在我们还调用了 useAjax 函数并发送了用户的 id。现在您可以将 userId 发布到已知的后端站点（在您的示例中为 rails），它将查询数据库并将 url 返回给用户图像。然后，我们只需要知道您希望图像出现在其中的 div 元素的 id。

```
function useAjax(userId);
{
    var id = userId;
    var select = true;
    var url = '../scripts/ajax.php';

    $.ajax(
    {
        // Post select to url.
        type : 'post',
        url : url,
        dataType : 'json', // expected returned data format.
        data : 
        {
                'select' : select, // the variable you're posting.
                'userId' : id
        },
        success : function(data)
        {
            // This happens AFTER the backend has returned an JSON array
            var userUrl, userImg, message;

            for(var i = 0; i < data.length; i++)
            {
                // Parse through the JSON array which was returned.
                // A proper error handling should be added here (check if
                // everything went successful or not)

                userUrl = data[i].userUrl;
                message = data[i].message;
                userImg = "<img src='"+userUrl+"' alt='' title='' />";
                $('#someDiv').html(userImg); // Here's your image.
            }
        },
        complete : function(data)
        {
            // do something, not critical.
        }
    });
} 
```

我不熟悉rails，但您可能可以像我在这里解释的那样以类似的方式对后端进行编程：[Javascript function as php?](https://stackoverflow.com/questions/15164828/javascript-function-as-php)

搜索我的答案，它应该给你一个非常详细的例子。

我希望这有帮助。

未来提示：先尝试 google :)

# php - htaccess 重写子目录

> ID：15255154
> 
> 赞同：1
> 
> 时间：2013-03-06T18:27:51.537
> 
> 标签：php, .htaccess, mod-rewrite, bluehost

我在 bluehost 上有我的网站的生产副本和测试副本。每个网站都在 public_html 文件夹中自己的目录中，一个名为 prod，另一个名为 test。根据此处的 bluehost 知识库：[https](https://my.bluehost.com/cgi/help/347) ://my.bluehost.com/cgi/help/347，您设置了一个 htaccess 文件以将进入 public_html 文件夹的请求重写到我的 prod 文件夹。到目前为止，这工作得很好。我最近注意到的一些事情是使用这些重写设置，如果您尝试从主网站文件夹中的另一个目录加载网站文件，例如 /prod/testfolder，最后没有正斜杠，它会将您重定向到 www.mysite.com/ prod/testfolder/ 而不是留在 www.mysite.com/testfolder。如果您像这样指定额外的正斜杠，则不会发生这种情况...... www.mysite.com/testfolder/

这是我的重写规则：

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^(www.)?mysite.com$
RewriteCond %{REQUEST_URI} !^/prod/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /prod/$1

RewriteCond %{HTTP_HOST} ^(www.)?mysite.com$
RewriteRule ^(/)?$ prod/index.php [L] 
```

在使用 htaccess 重写 url 时，我不是专家，但是我怀疑第一块重写规则是造成这种情况的原因。顺便说一句，为什么这会有所不同的一个例子是我在这个网站上设置了一个博客，如果你尝试访问 www.mysite.com/blog 上的博客，它会重定向到 www.mysite.com/prod/blog/首先使用 htaccess 屏蔽 prod 文件夹的目的。谁能告诉我应该如何解决这个问题并解释为什么会这样？谢谢！

# php - 试图将旧的 mysql_query 转换为新的 PDO 方法，如何创建变量元素

> ID：15255165
> 
> 赞同：0
> 
> 时间：2013-03-06T18:28:33.193
> 
> 标签：php, mysql, pdo

我只是第一次尝试使用新方法，因为有人建议我开始使用 PDO 方法而不是旧方法来查询数据库。

我无法弄清楚如何将变量放入其中，就像我之前对旧变量所做的那样。

这是我的脚本的旧版本

```
$file_code = filter_input( INPUT_GET, 'fileid' );
$res = mysql_query("SELECT * FROM `Files` WHERE `fileID`='".$file_code."'") or die ( mysql_error() );
if(mysql_num_rows($res) == 0)
{
die(header("Location: error.php"));
} 
$info = mysql_fetch_assoc($res); 
```

这是我尝试使用新方法来达到相同结果的尝试

```
$file_code = filter_input( INPUT_GET, 'fileid' );
$db = new PDO($host,$db_name,$db_user,$db_pass);
$res = $db->prepare('SELECT * FROM Files WHERE fileID = :".$file_code."'); 
```

你能帮我吗，因为我不是 php 的专业人士

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:36:03.050

```
$file_code = filter_input(INPUT_GET, 'fileid');
$db = new PDO("mysql:host=$host;dbname=$dbname;","login","pass");

$res = $db->prepare('SELECT * FROM Files WHERE fileID = ?')
                                          ->execute(array($file_code));

$result = $res->fetchAll(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:37:17.083

```
$res = $db->prepare('SELECT * FROM Files WHERE fileID = :".$file_code."'); 
```

您在这里所做的实际上是在否定准备好的语句的整个概念。

这是你应该做的：

```
$res = $db->prepare('SELECT * FROM Files WHERE fileID = ?');
$res->execute(array($file_code));
$data=$res->fetchAll(); 
```

准备好的语句的美妙之处在于您不需要转义变量，并且如果您运行更多次它也会更有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T18:40:20.643

有两种方法：

```
$stmt = $db->prepare('SELECT * FROM Files WHERE fileID = :file_code');
$stmt->bindParam(':file_code', $file_code);
$stmt->execute(); 
```

或者

```
$stmt = $db->prepare('SELECT * FROM Files WHERE fileID = :file_code');
$stmt->execute(array(':file_code' => $file_code)); 
```

因此，您可以运行[PDOStatement::bindParam](http://php.net/manual/en/pdostatement.bindparam.php)来传递您的值或将它们作为数组传递给[PDOStatement::execute](http://www.php.net/manual/en/pdostatement.execute.php)。第一个更灵活。

# java - 如何在 Java 中显示 PI 符号？

> ID：15255170
> 
> 赞同：0
> 
> 时间：2013-03-06T18:28:45.187
> 
> 标签：java, character-encoding, pi

这里的目标很简单，我想在系统输出中显示一个 pi 符号，像这样，“π”

```
 String pi = "\u03c0";
    System.out.println (""+a+pi+"x^2 + " + b+pi+"x + " +c+ pi); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T18:30:49.333

输出到哪里？控制台？下面应该这样做。

```
System.out.println("π"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T18:31:06.537

该`'π'`字符对应于代码点`03C0`- UNICODE-16 的有效点，Java 源代码使用的编码。由于代码点的数量适合 16 位，您可以简单地将符号复制粘贴到您的 Java 源代码中。

您也可以直接使用 UNICODE 常量，如下所示：

```
System.out.println("\u03C0"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T18:31:30.450

[在这里](https://stackoverflow.com/questions/9089519/how-to-type-pi-in-java)查看答案

`\u03C0`您需要代表 PI的 unicode 。(π)

那么你可以使用

```
System.out.println("\u03C0"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T18:31:10.487

为我工作

```
public class Main {
    public static void main(String[] args) {
        System.out.println("π");
    }

} 
```

也许您的源代码文件的字符编码有错误：确保源文件中的 UTF-8 编码！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T18:31:45.757

以下对我有用：

```
 System.out.println("\u03c0"); 
```

# android - 我想在中心裁剪后将图像缩放到底部

> ID：15255174
> 
> 赞同：1
> 
> 时间：2013-03-06T18:28:49.147
> 
> 标签：android, image

我使用图像视图来显示客户的图片，并使用此命令在图像视图中缩放我的图像

```
 iv.setScaleType(ImageView.ScaleType.CENTER_CROP); 
```

但是在这个命令之后，客户的头部被部分切割了，所以我想在中心裁剪命令之后将图像缩放到按钮，这样图像的底部就会被切割

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:55:45.887

没有开箱即用的解决方案可以满足您的要求。您需要自己进行缩放。这是你如何做到的：

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // we need to wait till the layout has been inflated to get the size of the ImageView
        final ImageView iv = (ImageView) findViewById(R.id.image);
        iv.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
            @Override
                public void onGlobalLayout() {
                    scaleBitmap(iv);
                }
            }
        );
    }

    private void scaleBitmap(ImageView iv) {
        // get ImageView and determine width & height
        int imageWidth = iv.getWidth();
        int imageHeight = iv.getHeight();
        Rect imageRect = new Rect(0, 0, imageWidth, imageHeight);

        // determine destination rectangle
        BitmapDrawable drawable = (BitmapDrawable)iv.getDrawable();
        Bitmap sourceBitmap = drawable.getBitmap();
        Rect bitmapRect = new Rect(0, 0, drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight());

        // determine source rectangle
        Rect sourceRect = computeSourceRect(imageRect, bitmapRect);

        // here's where we do the magic
        Bitmap scaledBitmap = Bitmap.createBitmap(imageRect.width(), imageRect.height(), Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(scaledBitmap);
        canvas.drawBitmap(sourceBitmap, sourceRect, imageRect, new Paint());
        iv.setImageBitmap(scaledBitmap);
    }

    private Rect computeSourceRect(Rect imageRect, Rect bitmapRect) {
        float imageWidth = (float) imageRect.width();
        float imageHeight = (float) imageRect.height();
        float bitmapWidth = (float) bitmapRect.width();
        float bitmapHeight = (float) bitmapRect.height();
        float aspectRatioImage = imageWidth / imageHeight;
        float aspectRatioBitmap = bitmapWidth / bitmapHeight;

        if (aspectRatioImage<aspectRatioBitmap) {
            float newWidth = bitmapHeight * aspectRatioImage;
            float widthOffset = (bitmapWidth - newWidth) / 2f;
            return new Rect((int) widthOffset, 0, (int) (widthOffset + newWidth), (int) bitmapHeight);
        }
        else {
            float newHeight = bitmapWidth / aspectRatioImage;
            float heightOffset = (bitmapHeight - newHeight) / 2f;
            // return this for center_crop
            //return new Rect(0, (int) heightOffset, (int) bitmapWidth, (int) (heightOffset + newHeight));
            // return this for bottom align
            return new Rect(0, 0, (int) bitmapWidth, (int) newHeight);
        }
    } 
```

这基本上根据您的要求将位图缩放为 ImageView（可以很容易地修改为使用按钮）。您可以通过这种方式进行任何可能的缩放。

# python - 关于pandas的问题：扩展多值列、反转和分组

> ID：15255181
> 
> 赞同：3
> 
> 时间：2013-03-06T18:29:19.033
> 
> 标签：python, pandas

我正在研究 pandas 以对 NLP 和文本挖掘进行一些简单的计算，但我无法完全掌握如何去做。

假设我有以下数据框，将人们的姓名和性别联系起来：

```
import pandas
people = {'name': ['John Doe', 'Mary Poppins', 'Jane Doe', 'John Cusack'], 'gender': ['M', 'F', 'F', 'M']}
df = pandas.DataFrame(people) 
```

对于我想要的所有行：

1.  确定名字
2.  确定从人名派生的 3-shingles 列表（单词中包含 3 个字母的序列）
3.  确定，对于每个带状疱疹，有多少男性和女性在他们的名字上包含该带状疱疹。

目标是将其用作数据集来训练分类器，该分类器可以确定给定名称是男性名字还是女性名字。

前两个操作非常简单：

```
def shingles(word, n = 3):
    return [word[i:i + n] for i in range(len(word) - n + 1)]

df['firstname'] = df.name.map(lambda x : x.split()[0])
df['shingles'] = df.firstname.map(shingles) 
```

结果是：

```
> print df

  gender          name firstname        shingles
0      M      John Doe      John  ['joh', 'ohn']
1      F  Mary Poppins      Mary  ['mar', 'ary']
2      F      Jane Doe      Jane  ['jan', 'ane']
3      M   John Cusack      John  ['joh', 'ohn'] 
```

现在，下一步应该通过构建一个包含两列的新数据框来完成：gender 和 shingle，其中应该包含以下内容：

```
 gender      shingle 
0       M          joh
1       M          ohn
2       F          mar
3       F          ary
(...) 
```

然后我可以按带状疱疹和性别分组。理想情况下，结果将是：

```
 shingle    num_males  num_females 
0      joh            2            0 
1      ohn            2            0 
2      mar            0            1 
3      ary            0            1
(...) 
```

有没有一种简单的方法来扩展多值列`shingles`，每行产生多行，一个用于在带状疱疹列表中找到的每个值？

另外，如果我`groupby`是列`shingle`，为列的每个可能值生成不同的列有多容易`gender`？

* * *

我设法理解了第二部分。例如，要计算每个 有多少男性和女性`firstname`：

```
 def countMaleFemale(df): 
     return pandas.Series({'males': df.gender[df.gender == 'M'].count(), 
                           'females': df.gender[df.gender == 'F'].count()})

grouped = df.groupby('first name') 
```

接着：

> 打印 grouped.apply(countMaleFemale)

```
 females  males
first name                
Jane              1      0
John              0      2
Mary              1      0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T17:20:39.167

这种方法应该可以很好地概括：

```
In [100]: df
Out[100]:
  gender          name firstname    shingles
0      M      John Doe      John  [Joh, ohn]
1      F  Mary Poppins      Mary  [Mar, ary]
2      F      Jane Doe      Jane  [Jan, ane]
3      M   John Cusack      John  [Joh, ohn] 
```

首先创建一个“扩展”系列，其中每个条目都是一个木瓦。这里，系列的索引是一个多重索引，其中第一级表示瓦的位置，第二级表示原始 DF 的索引：

```
In [103]: s = df.shingles.apply(lambda x: pandas.Series(x)).unstack();
Out[103]:
0  0    Joh
   1    Mar
   2    Jan
   3    Joh
1  0    ohn
   1    ary
   2    ane
   3    ohn 
```

接下来，我们可以将创建的系列加入到原始数据框中。您必须重置索引，降低 shingle 位置级别。结果系列具有原始索引和每个带状疱疹的条目。将其合并到原始数据框中会产生：

```
In [106]: df2 = df.join(pandas.DataFrame(s.reset_index(level=0, drop=True))); df2
Out[106]:
  gender          name firstname    shingles    0
0      M      John Doe      John  [Joh, ohn]  Joh
0      M      John Doe      John  [Joh, ohn]  ohn
1      F  Mary Poppins      Mary  [Mar, ary]  Mar
1      F  Mary Poppins      Mary  [Mar, ary]  ary
2      F      Jane Doe      Jane  [Jan, ane]  Jan
2      F      Jane Doe      Jane  [Jan, ane]  ane
3      M   John Cusack      John  [Joh, ohn]  Joh
3      M   John Cusack      John  [Joh, ohn]  ohn 
```

最后，您可以对 Gender 执行 groupby 操作，取消堆叠返回的系列并用零填充 NaN：

```
In [124]: df2.groupby(0, sort=False)['gender'].value_counts().unstack().fillna(0)
Out[124]:
     F  M
0
Joh  0  2
ohn  0  2
Mar  1  0
ary  1  0
Jan  1  0
ane  1  0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T18:45:46.673

在创建时创建扩展版本可能更容易`shingles`。 [这个问题](https://stackoverflow.com/questions/13050003/pandas-apply-function-to-dataframe-that-can-return-multiple-rows)展示了如何使用 groupby 进行这种扩展。以下是创建“名字”列后可以执行的操作的示例：

```
def shingles(table, n = 3):
    word = table['first name'].irow(0)
    shingles = [word[i:i + n] for i in range(len(word) - n + 1)]
    cols = {col: table[col].irow(0) for col in table.columns}
    cols['shingle'] = shingles
    return pandas.DataFrame(cols)

>>> df.groupby('name', group_keys=False).apply(shingles)
  first name gender          name shingle
0       Jane      F      Jane Doe     Jan
1       Jane      F      Jane Doe     ane
0       John      M   John Cusack     Joh
1       John      M   John Cusack     ohn
0       John      M      John Doe     Joh
1       John      M      John Doe     ohn
0       Mary      F  Mary Poppins     Mar
1       Mary      F  Mary Poppins     ary 
```

（我在这里按名字而不是名字分组，以防万一有重复的名字，但它假设全名是唯一的。）

从那里你应该能够分组和计算你喜欢的任何东西。

# sql - SQL Server 按日期筛选

> ID：15255182
> 
> 赞同：-6
> 
> 时间：2013-03-06T18:29:25.260
> 
> 标签：sql, sql-server, sql-server-2008

我有查询返回有关整体销售的结果，但现在我想通过添加`DATE`间隔来过滤它们。

编辑：`fs.DateKey`是`DateTime`数据类型

我原来的查询：

```
SELECT s.storekey, 
       e.employeekey, 
       e.parentemployeekey, 
       pc.productcategorykey, 
       pc.productcategoryname, 
       Sum(fs.salesamount)AS SalesAmount 
FROM   dimstore s 
       INNER JOIN factsales fs 
               ON fs.storekey = s.storekey 
       RIGHT JOIN dimemployee e 
               ON e.employeekey = s.storemanager 
       INNER JOIN dimproduct p 
               ON p.productkey = fs.productkey 
       INNER JOIN dimproductsubcategory psc 
               ON psc.productsubcategorykey = p.productsubcategorykey 
       INNER JOIN dimproductcategory pc 
               ON pc.productcategorykey = psc.productcategorykey 
GROUP  BY s.storekey, 
          e.employeekey, 
          e.parentemployeekey, 
          pc.productcategoryname, 
          pc.productcategorykey 
ORDER  BY employeekey 
```

我正在考虑添加`WHERE fs.DateKey BETWEEN '2007-01-20' AND '2007-01-25'`，但由于某种原因结果不正确。我不明白为什么。有什么提示或建议可以达到预期的效果吗？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T18:53:49.137

发布作为答案，因为我有很多评论：

`RIGHT JOIN`肯定是错的。这意味着某些商店不需要存在，但当然，您的销售事实与带有`INNER JOIN`. 它实际上已经变成了`INNER JOIN`无论如何，因此不太可能成为您问题的根源。

The fact that you used a `RIGHT JOIN` tells me that you think there could be a case where a foreign key is optional in some of the facts or dimensions. I'd like to know why this is.

In any case, in a straightforward star model, you usually only see `INNER JOIN`s and sometimes `LEFT JOINs`.

Because the fact table is at the center of the star, I would usually list that first in the `SELECT`, especially if there are `LEFT JOIN`s out from the fact table.

Since it is a datawarehouse, and you probably have a lot of data, I'm not sure how much you can post so we can understand your expectations versus the results you are getting, but be aware that using `BETWEEN` includes both endpoints and that `DATETIME` datatype can contain a time portion. Because of this, I almost always prefer to use the notation `dt >= start_date AND dt < end_date`. It's typically no performance difference, since `BETWEEN` is basically syntactic sugar for `dt >= start_date AND dt <= end_date`.

# jakarta-ee - 使用 IntelliJ 路径变量，如何在 Tomcat 服务器运行配置中设置系统属性？

> ID：15255184
> 
> 赞同：7
> 
> 时间：2013-03-06T18:29:27.260
> 
> 标签：jakarta-ee, intellij-idea, tomcat6

在 Eclipse 中，您可以设置 -D 选项以包含在 IDE 设置中其他地方定义的 {} 变量。IntelliJ 似乎会通过*Path Variables*提供此功能。但是，如果您遵循他们的帮助文档，您应该能够在 $dollar_characters$ 之间引用这些变量。进一步的研究似乎表明这仅适用于项目文件的内部，并且替换是在构建期间完成的。

我正在尝试创建一个共享服务器配置，其中一些系统属性可以由其他开发人员换出，但这个让我很难过。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-08-27T01:04:00.040

您可以直接在 Tomcat 服务器运行/调试配置窗口中设置您的 VM 选项，方法是将其添加到 VM 选项输入字段。您可以直接将您的`-Dcustom_property=value`放入该字段，然后通过`System.getProperty("customer_property")`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-14T16:36:01.177

在对看似无关的问题进行了大量挖掘和研究之后，我开始对如何实现这一点有了更大的了解：

1.  根据需要设置*路径变量*。
2.  创建您打算共享的*运行配置并选中**共享*复选框。
3.  将存根（即`-Dsystem.property="variable here"`）放入配置的*VM 选项*字段中。
4.  在中找到您的配置`.idea/runConfigurations`并将存根替换为`$PATH_VARIABLE$`，如果值将包含空格，则将它们放在引号内。
5.  重新打开*Run Configuration的**Edit Configuration*屏幕，注意变量扩展已成功。更好的是，检查它并让同事检查它（在设置他们自己的*路径变量*之后）并注意变量扩展适用于*他们的*自定义值。

 *****注意：**您似乎应该能够将它们`$PATH_VARIABLES$`直接放入那些配置屏幕，但它似乎只有在您直接编辑 XML 文件时才有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-18T16:17:05.673

Joel Wilson，感谢您探索在 IntelliJ 配置中使用 $PATH_VARIABLES$。

美化你的发现；我发现如果文件系统中的配置文件发生更改，它会立即由​​ IJ 重新加载（$PATH_VARIABLES$ 得到扩展）。但是，如果您在 IJ Preferences 中进行更改，则不会。

但是如果你：触摸 ~/IntelliJ/yourProject/.idea/runConfigurations *.xml

这足以让您的配置重新加载。
我还发现，如果您关闭并重新打开 IJ，这些也会在那时自动展开。

如果您查看这些 .xml 文件，则不会存储扩展值。每次加载 IJ 或更改文件时都会发生扩展。

最重要的是，如果您想在存储库中共享通用配置 - 然后在 IJ PATH 变量中设置用户变量内容 - 您可以并且它们将自动扩展。

如果您碰巧更改了 PATH 变量，则新值将包含修改后的 PATH_VARIABLE 内容。

如果您要查看操作系统级别的文件，您会看到保留的变量。但是如果您查看配置编辑器，替换的值将始终显示在那里（因此您无法直接看到它们使用了变量）。最好查看操作系统文件。吉姆

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-21T07:36:21.977

它似乎有效 - 至少在 ItelliJ 2018.2 中有效：

1.  [例如使用`$PROJECT_DIR$`- 变量](https://i.stack.imgur.com/jYpA1.png)
2.  [项目重新加载后扩展值](https://i.stack.imgur.com/FBSQs.png)
3.  [即使在编辑和保存配置之后...](https://i.stack.imgur.com/kq8JE.png)
4.  [该变量仍在配置中使用](https://i.stack.imgur.com/CAAqi.png)***

# android - 状态栏图标应该与启动器图标不同

> ID：15255191
> 
> 赞同：1
> 
> 时间：2013-03-06T18:29:52.607
> 
> 标签：android

我正在使用 android 4.2 SDK，默认情况下状态栏显示启动图标，但我想为应用程序的启动图标和状态栏图标使用不同的图标

我在做什么

```
 android:icon="@drawable/ic_launcher"
   android:name=".CommonMethod"
   android:logo="@drawable/toolbar_logo"
   android:label="@string/app_name"
   android:theme="@style/AppTheme" >
<activity
        android:name=".TimerClockActivity"
      android:icon="@drawable/toolbar_logo"
          android:label="@string/ActivityToolBar"
         android:theme="@style/AppTheme"
        >

         <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 

    </activity>
    <activity
        android:name=".PrefsActivity"

       android:theme="@style/AppTheme" >

    </activity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:36:55.600

在您的Activity 的`onCreate`方法中调用method`getActionBar.setIcion()`方法并传递图标的Id。查看此[链接](http://developer.android.com/reference/android/app/ActionBar.html#setIcon%28android.graphics.drawable.Drawable%29)以获取更多帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:40:22.177

您还可以使用样式设置操作栏的图标。去看看[这个](https://stackoverflow.com/questions/12978809/can-i-set-the-home-icon-of-my-actionbar-using-styles-xml) 链接。它应该回答你的问题。

# django - 当我在 ssh 上运行 django runserver 时，Vagrant 没有转发

> ID：15255203
> 
> 赞同：29
> 
> 时间：2013-03-06T18:30:45.493
> 
> 标签：django, windows, virtualbox, vagrant

我用 Python 和 Django 创建了一个 Vagrant Ubuntu (lucid32) 盒子。我的想法是启动虚拟机，使用 登录`vagrant ssh`，然后运行以下命令启动 Django：

```
manage.py runserver 
```

默认为端口 8000。问题是我无法从主机的浏览器访问 Django 服务器`http://127.0.0.1:8000`。我能做些什么？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-03-06T18:38:24.047

您需要将服务器绑定到外部 IP：

```
manage.py runserver 0.0.0.0:8000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-16T05:58:32.103

首先，您需要在 Vagrant 文件中进行端口转发。

```
config.vm.network "forwarded_port", guest: 8000, host: 8000 
```

然后你需要重新启动/重新加载你的 vangrant vm

```
vagrant reload 
```

现在 ssh 到你的 vm 并运行 django 服务器，如下所示

```
python manage.py runserver 0.0.0.0:8000 
```

# actionscript-3 - AS3 中的 Event.SOUND_COMPLETE

> ID：15255204
> 
> 赞同：0
> 
> 时间：2013-03-06T18:30:46.760
> 
> 标签：actionscript-3, flash

我已经看到很多论坛试图让一种声音接踵而至

在这种情况下 LoaderS2 在 LoaderS1 之后...

有人可以帮忙吗，这是我的代码...我不知道该怎么办了...：S

这是一个显示 2 张图像的程序，用户需要在听完声音后选择正确的一张。

这个想法是在我加载 2 个图像后，我将运行 LoaderS1 将运行，HL_Left 将在图片周围制作一个矩形以突出显示图像，完成后他将复制第二个声音 LoaderS2。

这就是我想要做的......需要帮助和快速......

```
import flash.display.Loader;
import flash.net.URLRequest;
import flash.events.Event;

var Img_Sd:Array = new Array(5);
var Escolhas:Array = new Array(5);
var Respostas:Array = new Array(0,1,0,1,0)

var Resultado:Number = 0;
var Pos:Number = 0;

var i:Number = 0;
var b:Number = 0;

var urlE:String;
var urlD:String;
var urlS1:String;
var urlS2:String;
var urlS3:String;

var Loader_ESQ:Loader = new Loader();
var Loader_DIR:Loader = new Loader();
var Loader_S1:Sound = new Sound();
var Loader_S2:Sound = new Sound();
var Loader_S3:Sound = new Sound();

var pasta_SND:String = "Sons/";
var pasta_IMG:String = "Images/";
var num_Imag:Number = 0;
var string_aux:String;
var flag:Number = 0;

//Preenchimento do array com a informação dos ficheiros (Imagens e Sons)
for (i=0; i<=4; i++)
{

        Img_Sd[i] = [((i+1)+"E"),((i+1)+"D"),17,18,20];
}

//Event Listeners para supervisionar o estado dos botões
BT_EscolhaDIR.addEventListener(MouseEvent.CLICK, ClickDir);
BT_EscolhaESQ.addEventListener(MouseEvent.CLICK, ClickESQ);

//BT_Reeniciar.addEventListener(MouseEvent.CLICK, ClickRe);

LoadImg();
//Pos = Pos+1;

function ClickESQ(event:MouseEvent): void 
{
    Escolhas[Pos]=0;
    Pos = Pos+1;
    LoadImg();
}

function ClickDir(event:MouseEvent): void 
{

    Escolhas[Pos]=1;
    Pos=Pos+1;
    LoadImg();
}

function audioComplete(e:Event): void
{
    Loader_S2.play();
    HL_Left.visible=false;
}

function LoadImg()
{
    if (Pos<5)
    {
        urlE = pasta_IMG + Img_Sd[Pos][0] +".png";
        urlD = pasta_IMG + Img_Sd[Pos][1] +".png";

        Loader_ESQ.load(new URLRequest(urlE));
        Loader_DIR.load(new URLRequest(urlD));

        //Pos = Pos + 1;

        EscolhaESQ_MC.addChild(Loader_ESQ);
        EscolhaDIR_MC.addChild(Loader_DIR);
        HL_Left.visible=true;
        LoadSnd();

        //setTimeout(audioComplete, Loader_S1.length);
    }

    if (Pos == 5)
    {
        BT_EscolhaDIR.enabled = false;
        BT_EscolhaESQ.enabled = false;
        for (b=0;b<=4;b++)
        {
            if (Escolhas[b]==Respostas[b])
            {
                Resultado = Resultado + 1;
            }
            trace("Escolha",Escolhas[b],":Resposta",Respostas[b],"-",Resultado);
        }
        Pos=6;
    }
}

function LoadSnd()
{
    urlS1= pasta_SND + Img_Sd[Pos][2] +".mp3";
    urlS2= pasta_SND + Img_Sd[Pos][3] +".mp3";
    urlS3= pasta_SND + Img_Sd[Pos][4] +".mp3";

    Loader_S1.load(new URLRequest(urlS1));
    Loader_S2.load(new URLRequest(urlS2));
    Loader_S3.load(new URLRequest(urlS3));
    Loader_S1.play();
    Loader_S1.addEventListener(Event.SOUND_COMPLETE, audioComplete);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T21:43:06.893

该类`Sound`不分派`Event.SOUND_COMPLETE`事件。您正在寻找的是`SoundChannel`课程（[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/SoundChannel.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/SoundChannel.html)）。

类的`play`方法`Sound`返回一个`SoundChannel`实例，所以你要做的是：

```
var s1Channel:SoundChannel = Loader_S1.play();
s1Channel.addEventListener(Event.SOUND_COMPLETE, audioComplete); 
```

# wpf - How to update dependency property in WPF User control?

> ID：15255206
> 
> 赞同：1
> 
> 时间：2013-03-06T18:30:50.863
> 
> 标签：wpf, user-controls, dependency-properties

I have created a dependency property on my WPF usercontrol which would be databound in my parent usercontrol. I have implemented the `INotifyPropertyChanged` on my viewmodel to send notifications when the value changes.

User Control code:

```
public bool IsVisibile {
get { return (bool) GetValue(IsVisibileProperty); }
set { SetValue(IsVisibileProperty, value); }}

public static readonly DependencyProperty IsVisibileProperty =
        DependencyProperty.Register("IsVisibile", typeof(bool), typeof(UserControl),
                                    new PropertyMetadata(default(bool), VisiblePropertyChangedCallback));

    private static void VisiblePropertyChangedCallback(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs dependencyPropertyChangedEventArgs)
    {
        if (dependencyPropertyChangedEventArgs.NewValue != null)
        {
            ((UserControl) dependencyObject).IsVisibile = (bool) dependencyPropertyChangedEventArgs.NewValue;
        }

    } 
```

Parent User Control usage:

```
<uc:UserControl IsVisible="{Binding IsViewModelVisible, UpdateSourceTrigger=PropertyChanged}" 
```

If the "IsViewModelVisible" changes then the property changed event handler is not called and the property is not refreshed.

Any thoughts?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:45:08.760

In the PropertyChangedCallback, you are getting notified when your `IsVisibile` property has changed. Now you set the same property another time, that's pointless.

And even worse, setting the property effectively removes the binding. Hence you won't get notified about any subsequent changes of the binding source property.

Do not set the property again in the callback. Just do whatever shall happen when the property changes. I guess you might want to set the control's [`Visibility`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.visibility.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:47:59.357

I think the code is right, the only thing that may cause the DP not raising maybe could be that you are setting `typeof(UserControl)` instead you should to use `typeof(YourControlType)`. Test this and feedback me. Hope can helps...

* * *

**EDIT**

Yes, Clemens is right, the property that you must set is the `Visibility` property, also you may use a value converter, BoolToVisibilityConverter for instace.

# jquery - 如何通过 jQuery 显示隐藏的内容块

> ID：15255212
> 
> 赞同：0
> 
> 时间：2013-03-06T18:31:11.050
> 
> 标签：jquery, css, hide, show

我有以下html：

```
<div class="contentBlock">
  <div><img src="images/help.png" alt="help button" class="helpButton"></div>
  <div class="helpBlock">
    <p>...some hidden text...</p>
  </div> <!-- end .helpBlock -->
  <h2>A Header</h2>
  <p>...some visible text...</p>
</div> <!-- end .contentBlock --> 
```

我有以下CSS：

```
div.contentBlock {
  position: relative; /* required for z-index */
  z-index: 1; /* interacts with div.helpBlock */
}
div.helpBlock {
  display: none;
  position: relative; /* required for z-index */
  z-index: 10; /* interacts with div.contentBlock */
} 
```

我有以下 jQuery：

```
$(document).ready(function() {
  // Show helpBlock on page
  $('img.helpButton').click(function(){
    /*$(this).closest('.helpBlock').show();*/ // does not work
    /*$(this).closest('.helpBlock').css('display');*/ // does not work
    var $contentWrapper = $(this).closest('.helpBlock');
    var $siblings = $contentWrapper.siblings('.helpBlock');
    $siblings.find('.helpBlock').show(); // does not work
  });
  // end Show helpBlock
}) // end jQuery Functions 
```

当我单击帮助按钮时，我试图让 .helpBlock 显示，但我的 jquery 都没有工作。

有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T18:33:38.980

因为您的按钮包含在 DIV 中，所以它不会使用 .closest() 或 .find()。您已经点击了该按钮，您可以使用[.parent()](http://api.jquery.com/parent/)和[.next()](http://api.jquery.com/next/)`$(this)`从那里导航：

```
$(this).parent().next('.helpBlock').show(); 
```

那应该行得通。这也应该消除不必要的变量：

```
var $contentWrapper = $(this).closest('.helpBlock');
var $siblings = $contentWrapper.siblings('.helpBlock'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:35:38.480

试试这个：

```
$('img.helpButton').click(function(){
   var $contentWrapper = $(this).parent();
   var $siblings = $contentWrapper.siblings('.helpBlock');
   $siblings.show();
}); 
```

如果你想要一个班轮：

```
$('img.helpButton').click(function(){
   $(this).parent().siblings('.helpBlock').show();
}); 
```

# javascript - 我怎样才能更好地编码这样我的代码看起来不那么业余？

> ID：15255213
> 
> 赞同：-1
> 
> 时间：2013-03-06T18:31:21.180
> 
> 标签：javascript, jquery

此代码采用 8 个 div 并根据 div 分配的时间值在屏幕上对它们进行竞赛。我怎样才能更好地编码这样我的代码看起来不那么业余？

我知道我应该在我的 for 循环中使用硬编码 8 以外的东西，但 timeArray.length 不可用，因为我正在使用拼接从数组中删除项目。

```
$(document).ready(function() {
var timeArray = new Array(3,4,5,6,7,8,9,10);
var shortestTime = timeArray[7];
var fastestPony = {};
var index;

var pony = {
    name: "pony",
    raceTime: -1,
    selected: ""
};

//change the color of the pony when the user clicks on it
$('.pony').bind('click', function() {
    $('.pony').removeClass('selectedPony');
    $(this).addClass('selectedPony');

    //get the pony that the user selected
    pony.selected = $(this);
});

$('#startButton').click(function() { 
    if (pony.selected == "") {
        alert("Please click the pony you think will win the race.");
    }
    else {
        for (i = 1; i <= 8; i++) {
        //get a random number from the timeArray
            index = Math.floor(Math.random() * timeArray.length);
            pony.raceTime = timeArray[index];

            //pull the random race time number out of the array 
            //so it can't be assigned to another horse
            timeArray.splice(index, 1);

            //get the fastest pony
            if (pony.raceTime < shortestTime) {
                shortestTime = pony.raceTime;
                fastestPony = $('#pony' + i);
            }

            //award the winner after the ponies have reached the finish line
            if (i == 8) {
                fastestPony.addClass('winner').append(' - Winner!');
            }

            //send the horses on their way to race!
            $('#pony' + i).animate({left: '320px'}, pony.raceTime * 1000);
        }
    }
});

//reset the ponies back to the starting line by reloading the page
$('#resetButton').click(function() {
    document.location.reload(true);
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:37:42.510

这确实是一个偏好和挑剔的问题，但既然你问了......

我听说`on(...)`大多数圈子都喜欢这种方法：

```
$('.pony').on('click', function() { 
```

和

```
$('#startButton').on('click', function() { 
```

当然，这取决于您使用的 jQuery 版本，并且可能完全是主观的。

# html - 画架js旋转

> ID：15255221
> 
> 赞同：0
> 
> 时间：2013-03-06T18:31:56.597
> 
> 标签：html, canvas, game-engine, easeljs

我刚开始研究 Easel js。我正在构建一个游戏，用户可以在其中建立自己的角色。在为游戏设置动画角色时，我面临的问题是，当角色移动时，我试图知道腿的确切位置，比如 20 度，因为我正在尝试连接鞋子（即用户创建）到那个确切的位置。我可以使用 Easel js 来创建动画帧，但我更愿意自己创建它们。所以，如果我用photoshop把腿的旋转改变了一个度数，我可以在Easel js中得到那个度数吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T19:11:48.007

你为什么不把鞋子加到腿上然后一起旋转呢？

```
var leg = new createjs.Container();
//add some graphics
var shoe = new createjs.Container();
//add some graphics

leg.addChild(shoe);
leg.rotation = 15; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:49:17.437

> 所以，如果我用photoshop把腿的旋转改变了一个度数，我可以在Easel js中得到那个度数吗？

=> 否。
a) 这将是高端图像识别技术。
b）如果你有一个预渲染帧，每个图像都有旋转度数，你最终会得到很多数据。

如果通过 EaselJS Tweening-code 为角色设置动画太复杂/困难，那么有一些用于其他框架的动画编辑器会生成代码，也许您可​​以使用其中一个并转换该代码，它可能只是平移和旋转，对吧？
**[例如Spriter](http://www.brashmonkey.com/spriter.htm)** ( [http://www.brashmonkey.com/spriter.htm](http://www.brashmonkey.com/spriter.htm) ) 支持相当多的框架，并且可以轻松地与任何框架集成，但是如果您不喜欢它，还有更多这样的工具。

# android - 如何在.net webservices中接收json对象

> ID：15255222
> 
> 赞同：1
> 
> 时间：2013-03-06T18:32:00.953
> 
> 标签：android, asp.net, sql-server, json, web-services

我的android逻辑如下：

```
public void onClick(View v) {

    String spinnerval1="";
    String spinnerval2="";

    // Perform action on clicks
    Toast.makeText(Mark.this, "calling web service", Toast.LENGTH_LONG).show();
     if (v == findViewById(R.id.button)) {
         // prepare the dialog box
        Button progress = (Button) findViewById(R.id.button);
        progress.setOnClickListener((OnClickListener) Mark.this);

        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://localhost:8425/enterdata/Service1.asmx");

        try
        {
        String result;
        JSONObject obj = new JSONObject();
        obj.put("Maths",spinnerval1);
        obj.put("Science",spinnerval2);

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("value1", spinnerval1));
        nameValuePairs.add(new BasicNameValuePair("value2", spinnerval2));
        httppost.setEntity((HttpEntity) new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse httpResponse = httpclient.execute(httppost);
        HttpEntity httpEntity = httpResponse.getEntity();

        if (httpEntity != null) 
        {
            InputStream is = httpEntity.getContent();
            result = is.toString();
            Log.i("Result is ", "Result: " + result);
        }

        }

        catch (ClientProtocolException e1) 
        {
            // TODO Auto-generated catch block
        }
        catch (IOException e) {
            // TODO Auto-generated catch block
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        ProgressDialog dialog=new ProgressDialog(Mark.this);

         // make the progress bar cancelable
         dialog.setCancelable(true);

         // set a message text
         dialog.setMessage("Loading...");

         dialog.show();

     }

} 
```

和 .net 网络服务代码：

```
using System;
using System.Collections;
using System.ComponentModel;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Web.Services.Protocols;
using System.Xml.Linq;
using System.Data.SqlClient;

namespace putdata
      {

[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[ToolboxItem(false)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment              
// [System.Web.Script.Services.ScriptService]
public class Service1 : System.Web.Services.WebService
{

[WebMethod]
public String put(String value)
{
    int count=1;
    int rows;

    SqlConnection myConnection = new SqlConnection(@"Data Source=.\SQLEXPRESS;Initial Catalog=student;User ID=sa;Password=123");
    try
    {
        myConnection.Open();
        count++;
        SqlCommand myCommand = new SqlCommand();
        myCommand.Connection = myConnection;
        myCommand.CommandText = "insert into record values('"+ count +"','" + value + "')";
        myCommand.Parameters.Add("@value", SqlDbType.VarChar).Value = value;
        rows = myCommand.ExecuteNonQuery();
        SqlDataReader myReader = myCommand.ExecuteReader();

      }
    catch (Exception ex)
    {
        Console.WriteLine(ex.Message);
    }
    finally
    {
        myConnection.Close();
    }

    return "success";
}

   }
 } 
```

请给我解决方案只是我想将数据从android应用程序发送到.net web服务和.net webservices将我的数据存储在sql server 2008中并且还给出了如何在.net webservices中接收json数据odject和json数据的解决方案。

# ruby - Cucumber / Savon 省略或删除日志输出

> ID：15255224
> 
> 赞同：5
> 
> 时间：2013-03-06T18:32:05.950
> 
> 标签：ruby, logging, cucumber, savon

在运行黄瓜测试时，我得到了（除了测试结果之外）很多与调试/日志相关的输出，格式如下：

```
D, [2013-03-06T12:21:38.911829 #49031] DEBUG -- : SOAP request:
D, [2013-03-06T12:21:38.911919 #49031] DEBUG -- : Pragma: no-cache, SOAPAction: "", Content-Type: text/xml;charset=UTF-8, Content-Length: 1592
W, [2013-03-06T12:21:38.912360 #49031]  WARN -- : HTTPI executes HTTP POST using the httpclient adapter
D, [2013-03-06T12:21:39.410335 #49031] DEBUG -- : <?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
... 
```

有没有办法关闭这个输出？我已经尝试按照[这篇文章](https://stackoverflow.com/questions/4217783/ruby-savon-gem-change-logging-configuration)中的说明进行操作，我的 config_spec.rb 文件是：

```
require "spec_helper"

describe Savon::Config do

  let(:config) {
    config = Savon::Config.new
    config._logger = Savon::Logger.new
    config.log_level = :error     # changing the log level
    HTTPI.log = false           # to total silent the logging.
    config

  }

  describe "#clone" do
    it "clones the logger" do
      logger = config.logger
      clone = config.clone

      logger.should_not equal(clone.logger)
    end
  end

  it "allows to change the logger" do
    logger = Logger.new("/dev/null")
    config.logger = logger
    config._logger.subject.should equal(logger)
  end

  it "allows to change the log level" do
    Savon::Request.log_level = :info
    config.log_level = :error
    config._logger.level.should == :error
  end

  it "allows to enable/disable logging" do
    config.log = false
    config._logger.should be_a(Savon::NullLogger)
    config.log = false
    config._logger.should be_a(Savon::Logger)
  end

end 
```

但是当我运行黄瓜测试时，日志仍然显示。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T12:33:38.443

通过查看[Savon API](http://savonrb.com/#configuration)的文档，您似乎可以通过以下方式使日志记录静音：

```
Savon.configure do |config|
  config.log = false
 end 
```

上面的代码片段可以放在你的[Cucumber World](https://github.com/cucumber/cucumber/wiki/A-Whole-New-World)中，或者`features/support/env.rb`为了让 Cucumber 中的日志保持静音。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T10:43:36.280

日志可能对调试有用。因此，与其完全静音，不如将它们放在 Rails 日志中。

以下是在 savon 2 中的操作方法：

```
# config/initializers/savon.rb
HTTPI.logger = Rails.logger

# when initializing client
@client = Savon.client wsdl: '...', logger: Rails.logger 
```

# ios - 属性名称前的下划线，在 setter 中

> ID：15255226
> 
> 赞同：-2
> 
> 时间：2013-03-06T18:32:13.723
> 
> 标签：ios, objective-c, cocoa, synthesize

我写了一个setter方法 -

```
- (void)setMyProp:(MyProp *)myProp{
    _myProp = myProp;
} 
```

如何在属性名称工作之前添加下划线？我知道有人问过这个问题，但它们是关于用户将属性名称设置为 _myProp，一些约定。我没有合成或更改属性名称。这个下划线是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:34:36.340

如果您使用的是最新版本的 LLVM，那么编译器会使用以下语法为您创建 @synthesize：

```
@synthesize myProp=_myProp; 
```

因此，即使您没有显式合成，您也可以使用 _myprop。

~~**旁注：`_myProp`让你直接访问属性，同时`self.myProp`会调用访问器。始终使用`self.myProp`*~~

# asp.net - 在 ASP.NET 中，如何设置会话的当前用户身份？

> ID：15255229
> 
> 赞同：8
> 
> 时间：2013-03-06T18:32:18.540
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我有一个简单的页面，我有一个登录按钮。我只是想以编程方式设置用户身份，以便当我重新导航到此页面或任何其他页面时，我可以获得当前的用户身份。对此是否有特殊考虑？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-06T19:13:03.977

简短的回答：

```
//
// Swapped FormsIdentity principal with our own custom IPrincipal
//
HttpContext.Current.User = yourPrincipalFromSomewhere;

//see
//http://www.hanselman.com/blog/SystemThreadingThreadCurrentPrincipalVsSystemWebHttpContextCurrentUserOrWhyFormsAuthenticationCanBeSubtle.aspx

//
// Sync Context Principal with Thread Principal
//
System.Threading.Thread.CurrentPrincipal = System.Web.HttpContext.Current.User; 
```

所以在登录时，我的团队会将 IPrincipal（我们的自定义）放在这里：

```
HttpContext.Current.Cache.Insert 
```

然后在

```
 protected void Application_AuthenticateRequest(object sender, EventArgs e)
        {
} 
```

我们会从：

```
HttpContext.Current.Cache 
```

然后将其重新附加到：

```
// Swapped FormsIdentity principal with our own IPrincipal
                            //
                            HttpContext.Current.User = cachedPrincipal;

                            //see
                            //http://www.hanselman.com/blog/SystemThreadingThreadCurrentPrincipalVsSystemWebHttpContextCurrentUserOrWhyFormsAuthenticationCanBeSubtle.aspx

                            //
                            // Sync Context Principal with Thread Principal
                            //
                            System.Threading.Thread.CurrentPrincipal = System.Web.HttpContext.Current.User; 
```

我是在说“完全像我的团队那样做”吗？不必要。但我向您展示了我们遇到的 2 个附上它的地方。

还有 hanselman 链接，它显示了一些关于它的信息。

[http://www.hanselman.com/blog/SystemThreadingThreadCurrentPrincipalVsSystemWebHttpContextCurrentUserOrWhyFormsAuthenticationCanBeSubtle.aspx](http://www.hanselman.com/blog/SystemThreadingThreadCurrentPrincipalVsSystemWebHttpContextCurrentUserOrWhyFormsAuthenticationCanBeSubtle.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T18:38:04.850

保存用户 ID：

```
Session["UserId"] = loggedInUserId; 
```

检索用户 ID

```
int loggedInUserId  = (int)Session["UserId"]; 
```

您担心什么样的特殊考虑？更加详细一些。

# c# - 值 0 在我的列表中的任何地方

> ID：15255234
> 
> 赞同：1
> 
> 时间：2013-03-06T18:32:40.903
> 
> 标签：c#, razor, asp.net-mvc-4

控制器 ：

```
public ActionResult Index()
        {
            return View(db.Profits.ToList());
        }

public ActionResult Create(Profits profits)
{
    {
        var user = db.UserProfiles.FirstOrDefault(x => x.UserId == WebSecurity.CurrentUserId);
        var category = db.Categories.FirstOrDefault(o => o.Id == profits.CategoryID);
        var profit = new Profits
        {
            Value = profits.Value,
            Description = profits.Description,
            DateInput = profits.DateInput,
            CategoryName = category,
            User = user
        };
        db.Profits.Add(profit);
        db.SaveChanges();
        return RedirectToAction("Index");
    }
} 
```

索引.cshtml：

```
model IEnumerable<WebHFM.Models.Profits>
@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.CategoryID)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Value)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Description)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DateInput)
        </td> 
```

在 MSSQL Server 中，我看到了正确的信息。名为列的表利润具有`=CategoryName_id`正确的数据（1 或 2 或我的主键 table `Categories`），但在我应该看到的索引视图中`Name`（类别模型）我到处都只看到数字 0。

基本上在我的`View`我想看到一个 HTML 表格，其中列名来自`Profits`Model:
`Categories`, `value`, `description`,`dataInput`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:53:38.007

在您的控制器中，您可能需要：

```
public ActionResult Index()
{
    return View(db.Profits.Include("Categories").ToList());
} 
```

在您看来，您将需要：

```
model IEnumerable<WebHFM.Models.Profits>
@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.CategoryName.Name)
        </td>
    </tr> 
```

你看到零的原因是因为你有这条线：

```
@Html.DisplayFor(modelItem => item.CategoryID) 
```

CategoryID 不是数据库中的属性，它是模型中的属性，因此当您从数据库中提取时，此属性不会更新为值。int 的默认值为 0，因此您得到零。即使您确实填充了此值，您也只会到处都有数字，而不是类别名称。这：

```
@Html.DisplayFor(modelItem => item.CategoryName.Name) 
```

将通过从您的对象中获取实际的类别名称来解决您的问题。

令人困惑的是，您已将属性命名为 Profits.CategoryName，而它应该是 Profits.Category 或其他东西，以表明它实际上不是字符串而是对象。

最后，您可能需要也可能不需要 Include()，它仅取决于您的 dbcontext 何时被释放，但您可能需要它。我目前拥有它，`Include("Categories")`但我不确定您的导航属性的名称实际上是什么，它可能会有所不同。如果不是“类别”并且我不得不猜测，我会猜测`Include("CategoryName1")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:49:39.440

您的 lambda 表达式是问题所在。首先在你的 foreach 中尝试一些基本的 HTML：

```
 <td>
        @item.CategoryID
    </td> 
```

# python-2.7 - Twitter REST API 版本更改对 Twython 的更改

> ID：15255236
> 
> 赞同：2
> 
> 时间：2013-03-06T18:32:52.897
> 
> 标签：python-2.7, twitter, twython

我一直在尝试使用 Twython 从 Twitter API 中提取数据。最近，Twitter API 将版本从 v1 更改为 v1.1。我不明白在使用 Twython 时需要进行的更改（如果有的话）。我使用 Twython 2.5.5。我以前使用的命令突然不再工作了。请帮助我完成这个过渡，以便我可以更快地完成工作。提前致谢。

这是我正在使用的代码片段：

```
twitter = twython.Twython(oauth_token = oauth_token, oauth_token_secret = oauth_secret, app_key = oauth_consumer_key, app_secret = oauth_consumer_secret)
twitter.getRetweets(id="123") 
```

这是我显示的错误：

```
TwythonError: 'Unauthorized: Authentication credentials were missing or incorrect. -- An error occurred processing your request.' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T04:40:05.710

我迟到了这个问题，但是如果您（或其他任何人）对此有进一步的问题，我相信这是由于 Twitter（在某种程度上）最近引入的 OAuth 验证器更改。Twython 在较新的版本中支持这一点，**[我们有一些例子](https://github.com/ryanmcgrath/twython/)**：

```
from twython import Twython

t = Twython(app_key, app_secret, oauth_token, oauth_token_secret)
auth_tokens = t.get_authorized_tokens(oauth_verifier)
print auth_tokens 
```

# git - git reset --hard 后文件未恢复

> ID：15255237
> 
> 赞同：0
> 
> 时间：2013-03-06T18:32:53.173
> 
> 标签：git

我正在尝试将所有提交和文件回滚到特定提交。我想摆脱我所做的所有更改以及从该特定提交开始创建的所有文件。

我尝试使用以下方式回滚：

```
git checkout #commit_to_restore_to
git reset --hard #commit_to_restore_to 
```

我得到确认`HEAD is now at #commit_to_restore_to "Commit_message"`

但是，我的文件与以前完全相同。如何回滚我的所有文件？

我在 Ubuntu 12.10 上。

以下是更多信息：

```
$ git status
<<fill this in>>

# git diff --name-status #commit_to_restore_to  #provide real commit number please.
<<fill this in too>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:31:46.790

重写分支引用的简单方法是

> `git branch -f master`*`commit`*

如果你现在在那个分支上，你可以

> `git checkout -B master`*`commit`*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:20:03.163

如果您`checkout`提交，那么您的工作目录中的该提交时您的存储库的内容。因此没有什么可做的`reset`。如果您这样做，将会有一些事情：

```
$ git checkout <commit>
# muck with files; do some other git stuff
$ git reset --hard <commit> 
```

在上述情况下`reset`实际上会做一些事情。

听起来您真正想要的是在提交后忘记所有内容，然后继续开发。如果是这样，这有效（假设您在`master`分支上）：

```
$ git checkout -b tmp-branch <commit>
$ git branch -d master
$ git branch -m tmp-branch master 
```

你会想要小心上面的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T07:06:19.333

我觉得好尴尬。文件正在更改，问题是文件夹没有。由于我的 .gitignore 有（例如）pyc 文件，因此我在提交后创建的文件夹仍然存在，因为其中包含这些文件。我只是在目录上做一个 ls 并且因为相同的树结构不断出现而发疯。

对此感到抱歉，谢谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T07:11:08.547

小心！当你这样做时，`git checkout SHA`你最终落在了一个浮动的分支上。 `git status`应该这样说：

```
# Not currently on any branch. 
```

There was also a warning from `git checkout`. If you wanted to reset your `master` branch with `git reset --hard SHA` you want to move back to that branch first with `git checkout master`.

# asp.net - WCF 流带消息合同返回字节数组

> ID：15255240
> 
> 赞同：2
> 
> 时间：2013-03-06T18:33:00.683
> 
> 标签：asp.net, wcf, .net-4.0, streaming

我已经搜索了答案，但没有找到任何东西。我想我错过了一些简单的东西，但我不知道它是什么。

我已经向我们的一个 WCF 服务添加了一个方法，该方法应该返回一个流作为消息协定的一部分。但是，当我在客户端添加服务引用时，消息协定的流部分是字节数组，而不是流。我添加了基本相同的方法，但没有消息契约（这不是一个选项），并且那个方法是客户端的流。

## 服务合约

```
[ServiceContract(Name = "FileService", Namespace = "http://services.mycompanycom/Data/")]
public interface IFileService : IServiceBase
{
    [OperationContract( IsOneWay = false )]
    [FaultContract( typeof( ServiceException ), Name = "ServiceException", Namespace = "http://services.mycompanycom/Common/" )]
    FileStreamResponse GetFileStream( FileIDMessage message );

    [OperationContract( IsOneWay = false )]
    [FaultContract( typeof( ServiceException ), Name = "ServiceException", Namespace = "http://services.mycompanycom/Common/" )]
    Stream GetFileStream2( AuthTicket ticket, int FileID );
} 
```

## 消息合约

```
[MessageContract]
public sealed class FileStreamResponse {
    [MessageHeader( MustUnderstand = true )]
    public string FileName { get; set; }
    [MessageHeader( MustUnderstand = true )]
    public bool IsZip { get; set; }
    [MessageHeader( MustUnderstand = true )]
    public long Length { get; set; }
    [MessageBodyMember( Order = 1 )]
    public Stream FileByteStream;
} 
```

## 服务代码

这在客户端配置为返回字节数组：

```
[FaultContract( typeof( ServiceException ), Name = "ServiceException", Namespace = "http://services.mycompanycom/Common/" )]
public FileStreamResponse GetFileStream( FileIDMessage message ) {
    CheckRights( message.AuthTicket, message.FileID, EntityEnum.Blob );

    var blob = new BlobBroker( ).GetByPk( message.GetSecurityTicket( ), message.FileID );
    if( blob.PkBlob == 0 || blob.BlobData == null )
        throw ServiceUtilities.LogError( "File record not found.", "File record not found.", MethodBase.GetCurrentMethod( ) );
    var response = new FileStreamResponse {
                                              FileName = blob.FileName,
                                              IsZip = blob.IsZip,
                                              Length = blob.BlobData.Length,
                                              FileByteStream = new MemoryStream( blob.BlobData )
                                          };
    response.FileByteStream.Position = 0;
    return response;
} 
```

这在客户端配置为流：

```
[FaultContract( typeof( ServiceException ), Name = "ServiceException", Namespace = "http://services.mycompanycom/Common/" )]
public Stream GetFileStream2( AuthTicket ticket, int FileID ) {
    var f = new FileIDMessage {
                                  FileID = FileID,
                                  AuthTicket = ticket
                              };
    return this.GetFileStream( f ).FileByteStream;
} 
```

## 服务器配置

```
<system.serviceModel>
    <services>
        <service behaviorConfiguration="BasicServiceBehavior" name="MyCompany.Web.MyServices.FileService">
            <endpoint address="" behaviorConfiguration="secureEndpointBehavior"
                binding="basicHttpBinding" bindingConfiguration="StreamingBinding"
                contract="MyCompany.Web.MyServices.IFileService" />
        </service>
    </services>
    <bindings>
        <basicHttpBinding>
            <binding name="StreamingBinding" receiveTimeout="00:10:00"
                 sendTimeout="00:10:00" maxBufferSize="65536" maxReceivedMessageSize="2147483647" transferMode="StreamedResponse"
                 textEncoding="utf-8">
                <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
                     maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
                <security mode="None">
                    <transport clientCredentialType="None" />
                </security>
            </binding>
        </basicHttpBinding>
        <webHttpBinding>
            <binding name="webHttpBindingWithCrossDomain"/>
        </webHttpBinding>
    </bindings>
    <behaviors>
        <endpointBehaviors>
            <behavior name="secureEndpointBehavior" >
                <dataContractSerializer maxItemsInObjectGraph="2147483646" />
                <authorizationInspector /> 
                <operationLogger />
                <wsdlExtras location="http://localservices.mycompany.com/" exportXmlComments="false" singleFile="false" />
            </behavior>
        </endpointBehaviors>
        <serviceBehaviors>
            <behavior name="BasicServiceBehavior">
                <dataContractSerializer maxItemsInObjectGraph="2147483646" />
                <serviceMetadata httpGetEnabled="true" httpsGetEnabled="false" />
                <!-- need to update in build script -->
                <serviceDebug includeExceptionDetailInFaults="true" />
                <secureMetadata locationUrl="http://localservices.mycompany.com/" />
                <exceptionHandler />
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
</system.serviceModel> 
```

## 客户端生成的代码

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.18033")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true, Namespace="http://services.mycompany.com/Data/")]
public partial class FileStreamResponse : object, System.ComponentModel.INotifyPropertyChanged {

    private byte[] fileByteStreamField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(DataType="base64Binary", Order=0)]
    public byte[] FileByteStream {
        get {
            return this.fileByteStreamField;
        }
        set {
            this.fileByteStreamField = value;
            this.RaisePropertyChanged("FileByteStream");
        }
    }

    public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;

    protected void RaisePropertyChanged(string propertyName) {
        System.ComponentModel.PropertyChangedEventHandler propertyChanged = this.PropertyChanged;
        if ((propertyChanged != null)) {
            propertyChanged(this, new System.ComponentModel.PropertyChangedEventArgs(propertyName));
        }
    }
}

[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
[System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Advanced)]
[System.ServiceModel.MessageContractAttribute(IsWrapped=false)]
public partial class FileStreamResponse1 {

    [System.ServiceModel.MessageHeaderAttribute(Namespace="http://services.mycompany.com/Data/")]
    [System.Xml.Serialization.XmlElementAttribute(IsNullable=true)]
    public string FileName;

    [System.ServiceModel.MessageHeaderAttribute(Namespace="http://services.mycompany.com/Data/")]
    public bool IsZip;

    [System.ServiceModel.MessageHeaderAttribute(Namespace="http://services.mycompany.com/Data/")]
    public long Length;

    [System.ServiceModel.MessageBodyMemberAttribute(Namespace="http://services.mycompany.com/Data/", Order=0)]
    public ServiceTest.MyCompanyServices.FileStreamResponse FileStreamResponse;

    public FileStreamResponse1() {
    }

    public FileStreamResponse1(string FileName, bool IsZip, long Length, ServiceTest.MyCompanyServices.FileStreamResponse FileStreamResponse) {
        this.FileName = FileName;
        this.IsZip = IsZip;
        this.Length = Length;
        this.FileStreamResponse = FileStreamResponse;
    }
}

[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
[System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Advanced)]
[System.ServiceModel.MessageContractAttribute(WrapperName="GetFileStream2Response", WrapperNamespace="http://services.mycompany.com/Data/", IsWrapped=true)]
public partial class GetFileStream2Response {

    [System.ServiceModel.MessageBodyMemberAttribute(Namespace="http://services.mycompany.com/Data/", Order=0)]
    public System.IO.Stream GetFileStream2Result;

    public GetFileStream2Response() {
    }

    public GetFileStream2Response(System.IO.Stream GetFileStream2Result) {
        this.GetFileStream2Result = GetFileStream2Result;
    }
} 
```

## 客户端测试代码

```
class Program {
    static void Main( string[ ] args ) {
        var svc = new FileServiceClient( );
        Console.WriteLine( "Logging in..." );
        var ticket = svc.Logon( "userid", "password" );
        Console.WriteLine( "Calling service..." );
        FileStreamResponse fsr;
        bool isZip;
        long size;
        string filename = svc.GetFileStream( ticket, 51575, out isZip, out size, out fsr );
        if( fsr != null && fsr.FileByteStream != null ) { // fsr.FileByteStream is byte[]
            Console.WriteLine( "Filename: {0}", filename );
            Console.WriteLine( "Zip: {0}", isZip );
            Console.WriteLine( "Length: {0}", size );
            Console.WriteLine( "Saving file..." );
            using( var fs = new FileStream( Path.Combine( @"c:\temp", filename ), FileMode.OpenOrCreate, FileAccess.Write ) ) {
                const int bufferSize = 65536;
                var buffer = new byte[ bufferSize ];
                //var bytesRead = response.FileStreamResponse.FileByteStream.
            }
        }
        Console.WriteLine( "Press ENTER to exit." );
        Console.ReadLine( );
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:39:57.093

显然，这是问题所在（不是上面代码的一部分，而是传递给 GetFileStream 方法的类）：

```
[MessageContract(IsWrapped = false)]
public class FileIDMessage : SecureMessageBase
{
    [MessageBodyMember]
    public int FileID;
} 
```

如果我删除（IsWrapped = false），它将返回一个流而不是字节数组。

# iphone - 游戏设计：处理不同的游戏类型？

> ID：15255241
> 
> 赞同：0
> 
> 时间：2013-03-06T18:33:01.140
> 
> 标签：iphone, ios, cocos2d-iphone

我很好奇是否有一个很好的策略来处理在同一个主游戏循环中运行的游戏中的各种游戏类型？换句话说，我有一个包含三种不同游戏类型的游戏。每种类型之间只有一些细微差别，因此它们当前使用相同的循环/类运行。一个是“在时间用完之前你能得到多少个 X”，另一个是“你需要多长时间才能捕捉到 10 个 X”，最后一个是“练习/无限时间”游戏类型。现在我的策略是运行 if, then, else 检查游戏的所有不同部分，并为每种游戏类型执行适当的逻辑。

```
if (gameType == INFINITE)
{...}
else if (gameType == TIMED)
{...}
else
{...} 
```

这对我来说似乎是非常错误的，而且效率低下。当我似乎可以进行一次检查并继续前进时，我不想让所有这些不必要的检查使 CPU 陷入困境。我也不想复制粘贴我的所有课程，只对每个课程进行细微的更改。有没有好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:42:59.393

处理这个问题的一种方法是创建一个屏幕管理器系统。这实质上意味着您有一个具有更新和绘制操作的抽象类。然后，您拥有的每个游戏（屏幕）都继承自此，允许每个游戏（屏幕）都有自己的更新/绘制行为。最终，您需要有一个 if-else 或 switch 语句来决定绘制/更新哪个。最小化这种情况的一种方法是使用抽象类型的变量来跟踪当前的“屏幕”，然后您可以多态地将需要更新/绘制的任何屏幕分配给该变量。然后，当您在当前屏幕上调用 update 或 draw 时，您不需要知道它的具体类型。

那里有很多示例，可以在以下位置找到一个不错的 XNA：http: [//xbox.create.msdn.com/en-US/education/catalog/sample/game_state_management](http://xbox.create.msdn.com/en-US/education/catalog/sample/game_state_management)

这个想法是完全可以转移的。大多数人使用这个系统来添加菜单屏幕和东西，但没有理由不能将它用于您的目的。

# c# - 在客户端填充二维数组并在服务器端获取该数组

> ID：15255243
> 
> 赞同：0
> 
> 时间：2013-03-06T18:33:02.910
> 
> 标签：c#, javascript, asp.net

我是新开发的。网。我有一个小问题。我可以在客户端（javascript）上填充一个二维数组并将该数组传递给服务器端吗？

如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:38:10.367

为您的数据使用 JSON。JavaScript 与 JSON 配合得非常好，而 PHP 可以处理 JSON 对象。

阅读更多相关信息：

*   [http://json.org/](http://json.org/)
*   [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON)

# git - 将 master 拉入新分支向您展示冲突

> ID：15255245
> 
> 赞同：0
> 
> 时间：2013-03-06T18:33:14.000
> 
> 标签：git

如何将 master 拉到我正在处理的当前分支中，并查看冲突？

另外，我应该合并还是变基，不确定两者中的哪一个是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:37:24.483

首先从远程拉出所有分支

```
git pull origin 
```

完成此操作后，所有分支都将被拉出（包括主分支）。

现在您想将 master 合并到您当前的分支中，因此您可以：

```
git merge master 
```

如果它自动解决了任何冲突，那么你就*完成了*。

如果它说它**没有**自动合并更改，那么您需要解决冲突。

要解决冲突，请编辑您的 ~/.gitconfig 并添加

```
[merge]
    tool = meld 
```

现在安装 meld diff 工具（例如在 Ubuntu 上，您只需执行`sudo aptitude install meld`

你会得到一个像这样的窗口

![融合截图](../Images/ad082fdb993c728a70c20668ac38e879.png)

在左侧，您将拥有本地版本。在右侧，您将拥有远程版本。

中间是合并后您想要的状态。从两边选择并挑选所有位并将它们放在中间后，保存（CTRL + S）并退出融合。Git 现在将告诉您必须合并的下一个文件，并且您将执行相同的操作，直到完成合并。

您可以`git diff`在此结束时执行以确保您所做的合并是正确的。

还要运行您的代码以确保它按您的意愿工作。

然后你提交`git commit -am "commit_message"`并将更改推送到你的分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:40:40.257

为什么要拉入当前分支？听起来很麻烦。

要不你弄个最新的master，然后对比一下区别？这样你就不会在不知道你进入什么的情况下合并。

在这种情况下：

```
# in your master branch do
git pull origin master 
```

切换到您正在处理的功能分支：

```
git checkout your_branch_name 
```

现在您在新分支中，您可以看到差异（绿色是您添加的内容，假设颜色也已打开）

```
git diff master 
```

当然，您可以在不进行结帐的情况下看到与 master 的差异。所以在这种情况下，你拉原点主人，然后做一个差异：

```
# in master
git pull origin master

# now do a diff while still in master
git diff your_new_feature_branch 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T19:01:46.490

合并和变基都有其优点和缺点。

rebase 的优点：保持提交历史“更干净”，因为“master”的当前负责人将是您当前分支的祖先。有时人们不喜欢把共同的祖先埋得太深。有些地方的政策是在提交之前始终将功能分支重新定位到 master 上。

rebase 的缺点：完全重写你的分支的历史（所有的 sha1 都会不同）。如果您或其他任何人从您的功能分支创建了分支，然后您尝试将其合并回来，这可能会导致麻烦。

一个可能的好的经验法则：rebase 尚未广泛发布的分支，因此不是其他分支的基础。

# java - 在java中制作分组程序 - Bigdecimal

> ID：15255249
> 
> 赞同：0
> 
> 时间：2013-03-06T18:33:23.093
> 
> 标签：java, grouping, bigdecimal

我正在为我的一些老师制作一个程序，该程序从 .txt 文件中获取学生列表，并将他们放入老师输入的任意大小的随机组中。当有许多学生不能平均分配到那个数字时，我希望它把剩余的部分和额外的学生组成一个特殊的小组。这就是我所拥有的。注意：我从未使用过 bigdecimal，我需要一些关于余数函数的帮助。

```
 public static void results(String [] names) {
    Scanner scan = new Scanner(System.in);
    int groups = 0;
        do{
            System.out.println("How many groups do you want?");
            if(scan.hasNextInt()) groups = scan.nextInt();
            else scan.next();
        } while(groups == 0);
        BigDecimal numbergroups = new BigDecimal("1.5");
        int numberlastgroup = BigDecimal.remainder(BigDecimal.);
} 
```

String[] Names 是名称列表。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:46:19.400

如果您的问题指向 BigDecimal 的用法 - 它会像这样使用：

```
// remainder = dividend % divisor
BigDecimal dividend = new BigDecimal("100");
BigDecimal divisor = new BigDecimal("3");
BigDecimal remainder = dividend.remainder(divisor);

// convert BigDecimal to int
int remainderAsInt = remainder.intValue(); 
```

另请参阅[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#divideToIntegralValue%28java.math.BigDecimal%29)

# bash - 获取文件名的脚本添加双引号并转换为 pdf

> ID：15255252
> 
> 赞同：0
> 
> 时间：2013-03-06T18:33:44.947
> 
> 标签：bash, sorting, pdf-generation

我的情况是，我的文件夹中有一些 pdf，这些 pdf 被系统编号

> 文件 fd13.pdf 文件 fd30.pdf 文件 fd47.pdf 文件 fd14.pdf 文件 fd31.pdf 文件 fd48.pdf 文件 fd15.pdf 文件 fd32.pdf 文件 fd49.pdf 文件 fd16.pdf 文件 fd33.pdf 文件 fd50.pdf

我正在编写一个脚本来将它们转换为 pdf

脚本如下

```
 #!/bin/bash
    pdftk "document fd1.pdf" "document fd2.pdf" "document fd3.pdf" 
"document fd4.pdf" "document fd5.pdf" "document fd6.pdf" 
"document fd7.pdf" "document fd8.pdf" "document fd9.pdf" "document fd10.pdf" 
"document fd11.pdf" "document fd12.pdf" "document fd12a.pdf" "document fd12b.pdf" 
"document fd12c.pdf" "document fd12d.pdf" "document fd13.pdf" "document fd14.pdf"
 "document fd15.pdf" "document fd16.pdf" "document fd17.pdf" "document fd18.pdf" 
output out.pdf 
```

这也有效，

我的问题是首先我在目录上执行 ls

```
ls ./  > script.sh 
```

然后我必须对单个数字然后是双数字进行排序，因为在这样的 ls 输出 **文档中 fd11.pdf 位于文档 fd1.pdf****之前** ，
并且为了能够在我的脚本中使用它们，我必须在文件名中添加双引号” “这部分我必须手动完成。

我想自动为文件名添加双引号并按排序顺序获取文件名，我该如何处理这两个问题？

我在 Ubuntu 12.04

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:15:22.040

这是一个引用问题。

为了演示看看脚本`demo1.sh`

```
declare -a args=( "$@" ) 
echo ${#args[@]}  # count the elements of the array args 
```

`bash demo1.sh *pdf`将为您提供正确数量的 pdf 文件。

如果您改用脚本 demo2.sh

```
declare -a args=( $@ )
echo ${#args[@]}  # count the elements of the array args 
```

`bash demo2.sh *pdf`会给你*不*数量的pdf文件。相反，它会计算每个文件两次。

`man bash`解释见：

> @ 展开为位置参数，从一开始。当扩展出现在双引号内时，每个参数都扩展为一个单独的单词。也就是说，"$@" 等价于 "$1" "$2" ... 如果双引号扩展出现在一个单词中，则第一个参数的扩展与原始单词的开头部分连接，并且最后一个参数的扩展与原始单词的最后一部分相连。当没有位置参数时，"$@" 和 $@ 扩展为空（即，它们被删除）。

以下脚本应该可以工作：

```
#!/bin/bash
pdftk "${@}" output out.pdf 
```

您可以通过以下方式调用它：

```
ls -Q -v *.pdf |xargs script 
```

# python - 运行网站中的 Python Server Script 程序？

> ID：15255254
> 
> 赞同：0
> 
> 时间：2013-03-06T18:33:51.253
> 
> 标签：python

我在这个[链接](http://fragments.turtlemeat.com/pythonwebserver.php)中看到，每次我们都会启动`webserver.py`脚本来监听用户请求和响应。

`Ubuntu`我们通常会在.Similarly中运行。`Terminal`同样，我想知道如何运行网站中的 python 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:48:55.420

[编辑] 以下是对您有所帮助的主题链接

[烧瓶/REST/JSON](http://publish.luisrei.com/articles/flaskrest.html)

[沙盒](https://stackoverflow.com/questions/980170/how-to-create-a-lightweight-c-code-sandbox)

# c# - 在 ListView 'SelectionChanged' 事件之后关注文本框

> ID：15255257
> 
> 赞同：1
> 
> 时间：2013-03-06T18:34:00.320
> 
> 标签：c#, wpf, listview, focus

我希望在`TextBox`从`ListView`控件中选择项目后将焦点设置在 a 上，但我似乎无法从我的 'SelectionChanged' 事件方法中获得焦点`FocusOnTextBox()`。

出于某种原因，`ListView`在做出选择后总是有焦点。

**我创建了一个 Visual Studio 应用程序来演示这个问题：**

[http://maq.co/focusapp.zip](http://maq.co/focusapp.zip)

如何`TextBox`在“SelectionChanged”事件方法中让焦点返回到 from？

**MainWindow.xaml：**

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <ListView Name="list_view1" Grid.Column="0" SelectionChanged="FocusOnTextBox">
            <ListViewItem Content="1" />
            <ListViewItem Content="2" />
            <ListViewItem Content="3" />
        </ListView>
        <TextBox Name="text_box1" Grid.Column="1" Text="When a selection is chosen from the left hand side ListView, I want THIS word to be selected and for the focus to change to this text box - this will show the selection to the user.&#x0a;&#x0a;However, right now it doesn't seem to work, the focus remains on the ListView regardless of it being set to Focus() in the FocusOnTextBox() method, which is fired on the 'SelectionChanged' event." TextWrapping="Wrap" />
    </Grid>
</Window> 
```

**MainWindow.xaml.cs：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            // Test that the selection of the word THIS and the Focus() works
            text_box1.SelectionStart = 68;
            text_box1.SelectionLength = 4;

            text_box1.Focus();
        }

        private void FocusOnTextBox(object sender, SelectionChangedEventArgs e)
        {
            MessageBox.Show("FocusOnTextBox fired on selection with list view");

            text_box1.SelectionStart = 68;
            text_box1.SelectionLength = 4;

            text_box1.Focus();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:55:54.350

我相信发生这种情况是因为`ListView`尚未完成更改选择，因此您从`SelectionChanged`事件处理程序中切换焦点不会坚持，因为在您更改焦点`ListView`后，为了完成其选择更改流程而将其更改回来。

如果你在`FocusOnTextBox`函数中设置断点并查看调用堆栈，你会发现你已经深入堆栈，并且`ListView`在你的`FocusOnTextBox`函数执行后会有很多事情要做。我想它会做的一件事是将焦点设置到`ListView`.

如果您更改它以便在`ListView`完成更改当前选择后转移焦点，它应该可以工作。例如，更改它以便您在`MouseLeftButtonUp`似乎工作中切换焦点：

```
<ListView Name="list_view1" Grid.Column="0" MouseLeftButtonUp="FocusOnTextBox">
    <ListViewItem Content="1" />
    <ListViewItem Content="2" />
    <ListViewItem Content="3" />
</ListView> 
```

然后您需要更改`FocusOnTextBox`要使用的事件处理程序定义，`MouseEventArgs`而不是`SelectionChangedEventArgs`同时使用。

# php - 在 smarty 中计算午夜过去的最小值

> ID：15255258
> 
> 赞同：0
> 
> 时间：2013-03-06T18:34:02.353
> 
> 标签：php, smarty

我正在尝试使用 smarty 计算午夜过后的分钟数。我可以得到当前时间......但我如何得到与午夜的差异。如何创建代表午夜 12:00 的日期/时间对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:25:10.933

您可以使用时间戳构造午夜的 DateTime：

$midnight = strtotime("0:00"); $dt = new DateTime("@$midnight");

然后要查找时差，可以使用 date_diff 函数：

[http://www.php.net/manual/en/datetime.diff.php](http://www.php.net/manual/en/datetime.diff.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:53:22.563

我同意 John C，这个逻辑不属于 smarty。所以我最终用 php 编写它，然后在 smarty 中调用该函数。为了得到午夜时间我做了以下

```
$midnightTime = new DateTime();        
$midnightTime -> setTime(0,0,0);   
midnightTime->getTimestamp() 
```

然后使用 Greg 的建议使用 date_diff 计算差异。

# php - PHP中的字符串文字

> ID：15255261
> 
> 赞同：0
> 
> 时间：2013-03-06T18:34:16.090
> 
> 标签：php, string, escaping

在 C# 中，您可以声明一个文字字符串，您不希望其中有任何转义，例如：

```
string myString = @"This\is\some\string\"; 
```

对于PHP来说，无论如何都可以以这种方式声明字符串文字而无需转义每个斜线？我知道有人会问我“你试过什么？” 所以为了完整起见，我将列出什么不起作用：

```
$myString = "This\is\some\string\";
$myString = 'This\is\some\string\'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T18:37:42.977

使用单引号，你应该是好的（当然少单引号）。如果您真的不想逃避任何事情，请尝试[nowdoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc)。

**编辑：**假设 PHP >=5.3（谢谢 Sammitch）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:47:56.280

正如 Sequoia mcdowell 指出的[heredocs](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc) / [newdocs](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc)是答案。像这样：

```
$myString = <<<'EOT'
This\is\some\string\
EOT; 
```

# android - 如何分发 Android 库

> ID：15255264
> 
> 赞同：5
> 
> 时间：2013-03-06T18:34:20.003
> 
> 标签：android, jar, android-library

我一直在为 android 库项目旋转一个 jar，并将这个 jar 包含在我的其他应用程序中。但是[在 developer.android.com 上](http://developer.android.com/tools/projects/index.html#LibraryProjects)，我看到了不能在 jar 中分发库的声明：

> *   您不能将库项目导出到 JAR 文件
> 
> 库不能作为二进制文件（例如 JAR 文件）分发。这将在 SDK 工具的未来版本中添加。

我真的不明白这是什么意思。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T18:43:56.697

可以创建不包含源代码的 Android 库项目。限制是：

*   您仍然必须运送资源。

*   您必须重写代码以避免使用 R. 值，因为它们是错误的。您必须使用 getResources().getIdentifier() 和/或反射来查找所有资源 ID。

我在*The Busy Coder's Guide to Advanced Android Development* ( [http://commonsware.com/AdvAndroid](http://commonsware.com/AdvAndroid) ) 中有说明，尽管这些说明足够新，以至于我的免费版本都没有。引用当前版本的一些说明：

“您可以通过以下步骤创建仅二进制库项目：

1.  使用您的源代码等创建一个 Android 库项目 - 这是您的主项目，您将从该项目中创建库项目的一个版本以进行分发。

2.  编译 Java 源代码（例如，ant compile）并将其转换为 JAR 文件

3.  创建一个分发Android库项目，资源与主库项目相同，但没有源代码
4.  将 JAR 文件放在分发 Android 库项目的 libs/ 目录中

生成的分发 Android 库项目将拥有主项目所需的一切，只是没有源代码。”

就个人而言，我只是稍等片刻。我希望能够尽快提供对 library-projects-as-JARs 的官方支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T18:40:46.730

这意味着（目前）您必须分发整个项目文件夹。而不仅仅是一个 jar 文件，就像你可以用于 java 库一样。

当有人想使用您的库时，他们会将您的项目导入 Eclipse，然后在项目属性-> android 中，他们会将您的项目添加为 android 库。

用于分发库项目的一些常用方法是使用 git，或压缩项目文件夹并使其在线可用。

# javascript - 替代 CSS 选项

> ID：15255267
> 
> 赞同：-3
> 
> 时间：2013-03-06T18:34:38.120
> 
> 标签：javascript, css

在提供替代 CSS 时，我无法显示正确的 CSS。

我的 head 部分中有这两个 CSS 文件：

```
<link href="css1.css" rel="stylesheet" type="text/css" /> 
<link id="css2" href="css2.css" rel="stylesheet" type="text/css" /> 
```

和正文中的这个href：

```
<a href="#" onclick="document.getElementById('css2').href='css2.css'">Change</a> 
```

该页面显示css2（背景颜色设置为绿色），但我希望它显示css1（红色），然后通过单击css2链接它应该更改为css2。

注意：CSS 工作正常，每个 CSS 文件只是具有不同的 background-color 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:39:47.813

你的锚应该调用一个javascript函数来添加

```
<link id="css2" href="css2.css" rel="stylesheet" type="text/css" /> 
```

动态到您的文档。在 jquery 中可以这样做：

```
$(document.body).append('<link href="css2.css" rel="stylesheet" type="text/css" />'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:40:29.747

```
<link href="css1.css" rel="stylesheet" type="text/css" /> 
<link href="css1.css" id="css2"  rel="stylesheet" type="text/css" /> 
```

和正文中的这个href：

```
<a href="#" onclick="document.getElementById('css2').href='css2.css'">Change</a> 
```

# ios - 如何过滤 UICollectionView 并保持键盘正常运行？

> ID：15255270
> 
> 赞同：24
> 
> 时间：2013-03-06T18:34:57.517
> 
> 标签：ios, keyboard, uicollectionview, uisearchbar, reloaddata

我已将 a 添加`UISearchBar`到 a`UICollectionView`并在委托中`searchBar:textDidChange:`过滤我的模型并调用`[collectionView reloadData]`. `reloadData`（以及 reloadSection 等）想要从搜索栏的文本字段中删除 firstResponder，从而关闭键盘。

我正在尝试构建一个“实时更新”过滤器，因此在键入每个字符后让键盘消失很烦人。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-03-17T10:58:43.783

在 searchBar 委托函数中，我使用 performBatchUpdates，首先，重新加载 collectionView，然后调用 [self.searchBar becomeFirstResponder] 来显示键盘

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar{
    [self setEditing:NO animated:YES];
    [searchBar setShowsCancelButton:YES animated:YES];

        [self.collectionView performBatchUpdates:^{
            [self.collectionView reloadData];
        } completion:^(BOOL finished) {
            [self.searchBar becomeFirstResponder];
        }];
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-06T13:11:59.090

我最近遇到了同样的问题，需要一段时间才能解决。问题是当文本字段嵌套在 ReusableCollectionView 中时，以下内容不起作用。

```
[self.collectionView reloadData];
[self.textField becomeFirstResponder]; 
```

此外，对我来说，它在模拟器上运行良好，但在设备上却不行。

将视图控制器设置为文本字段委托并实现

```
- (BOOL)textFieldShouldEndEditing:(UITextField *)textField {
    return NO;
} 
```

不起作用，因为结果集合视图没有刷新。我的猜测是 - 在重新加载其视图集合之前尝试从所有嵌套控件中移除焦点但它不能 - 我们从文本字段委托方法返回 NO。

所以我的解决方案是让系统从文本字段中删除焦点，然后在重新加载后将其取回。问题是何时真正做到这一点。

首先，我尝试在

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath 
```

但是当集合中没有项目时（这是过滤期间的正常情况），不会调用此方法。

最终我通过以下方式解决了这个问题。我创建了 UICollectionReusableView 子类，实现了两种方法：-prepareForReuse 和 -drawRect:。第一个包含 -setNeedsDesplay 调用，它安排在下一个绘图周期调用 drawRect。如果相应的标志设置为 YES，则第二个通过调用 [self.textField becomeFirstResponder] 来恢复焦点。所以想法是“稍后”调用 becomeFirstResponder，但不要太晚，否则会发生奇怪的键盘“跳跃”。

我的自定义可重用集合视图如下所示：

```
@interface MyCollectionReusableView : UICollectionReusableView

@property (nonatomic, assign) BOOL restoreFocus;
@property (nonatomic, strong) UITextField *textField;

@end

@implementation MyCollectionReusableView
@synthesize restoreFocus;
@synthesize textField;

- (void)setTextField:(UITextField *)value {
    textField = value;
    [self addSubview:textField];
}

- (void)drawRect:(CGRect)rect {
    [super drawRect:rect];
    if (self.restoreFocus) {
        [self.textField becomeFirstResponder];
    }
}

- (void)prepareForReuse {
    [self setNeedsDisplay];
} 
```

然后在我的视图控制器中：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    [self.collectionView registerClass:[MyCollectionReusableView class] forSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:HeaderReuseIdentifier];

    [self.textField addTarget:self action:@selector(textFieldDidChange:) forControlEvents:UIControlEventEditingChanged];
}

- (UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath {
    if (UICollectionElementKindSectionHeader == kind) {
        MyCollectionReusableView *view = [collectionView dequeueReusableSupplementaryViewOfKind:UICollectionElementKindSectionHeader                                                                            withReuseIdentifier:HeaderReuseIdentifier                                                                                 forIndexPath:indexPath];

        //add textField to the reusable view
        if (nil == view.textField) {
            view.textField = self.textField;
        }
        //set restore focus flag to the reusable view
        view.restoreFocus = self.restoreFocus;
        self.restoreFocus = NO;
        return view;
    }
    return nil;
}

- (void)textFieldDidChange:(UITextField *)textField {
    self.restoreFocus = YES;
    [self.collectionView reloadData];
} 
```

可能不是最优雅的解决方案，但它确实有效。:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-24T06:49:55.453

如果您已将`UISearchBar`作为标题添加到调用中，`UICollectionView`则`reloadData`调用将通过删除并重新添加`UISearchBar`导致它丢失的标题来“刷新”标题`firstResponder`。

您可以`UISearchBar`以另一种方式添加您的，不使用标题，或覆盖`reloadData`，检查搜索栏当前是否为 firstResponder，如果是，则在调用`super`后执行：

```
// If we've lost first-responder, restore it.
if ((wasFirstResponder) && (![self.searchBar isFirstResponder])) {
    [self.searchBar becomeFirstResponder];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-14T23:27:15.900

解决了它：

```
 UISearchBar *searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0.0, 0.0, 726.0f, 44.0f)];
  [_collectionView addSubview:searchBar];
  searchBar.delegate = self;
  [(UICollectionViewFlowLayout *)_collectionView.collectionViewLayout setSectionInset:UIEdgeInsetsMake(64, 20, 20, 20)];

- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText {
  [_collectionView reloadData];
  [searchBar becomeFirstResponder];
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-17T23:02:42.187

答案是不要重新加载具有文本字段的部分。我通过将所有项目放入单个搜索中解决了这个问题，因此可以重新加载该单个部分。

我正在修改的现有屏幕显示右侧的索引以及导航到每个部分的字母，这意味着有很多部分，这使得更难知道如何重新加载每个部分而不弄乱内部状态。为了在文本字段成为第一响应者时使其工作，集合视图的组织会更改为将所有项目放入单个部分中，该部分会在运行搜索时重新加载。现在顶部没有重新加载，所以它不会失去焦点。

这样，就不需要像为此问题列出的其他答案那样未定义的行为。

[https://github.com/brennanMKE/PullDownSearch](https://github.com/brennanMKE/PullDownSearch)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-17T12:56:22.403

我在处理 UICollectionViewCell 中的 UITextFields 时遇到了这个问题。我认为搜索栏可能遵循相同的路径。

我有一堆从中填充的集合视图单元格；

```
func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -> UICollectionViewCell {

    let question = questions[indexPath.row]
    let cell: QuestionBaseCollectionViewCell = collectionView.dequeueReusableCell(withReuseIdentifier: cellName, for: indexPath) as! QuestionBaseCollectionViewCell
    cell.arrangeCell(question: question) // Here cell populates from server data 
    cell.delegate = self
    return cell
} 
```

这个 QuestionBaseCollectionViewCell 有一个委托方法，它将问题的答案更新到它的委托。我需要更新服务器端数据。

在委托方法中；如果我使用 reloadData 方法，则文本字段会辞职并且键盘正在消失。

此外，我无法直接访问 UITextField，这导致我无法使用 cell.textField.becomeFirstResponder() 等。

所以，我注释掉这个`reloadData()`方法。

```
func questionCollectionViewCell(_ cell: QuestionBaseCollectionViewCell, didChange choice: Choice) {
    guard let indexPath = collectionView.indexPath(for: cell) else { return }
    var question = questions[indexPath.row]
    guard let choiceIndex = question.choices?.firstIndex(where: { $0.id == choice.id }) else { return }
    question.choices?[choiceIndex] = choice
    questions[indexPath.row] = question

    // collectionView.reloadData()
} 
```

**这就是我所做的；****我在键盘关闭后**
**拨打了() 电话。`reloadData`见下文。**

只需在**viewWillAppear**方法中为相应的视图控制器添加一个**keyboardDidHideNotification**（注意：您可以根据需要放置任何位置）如下：

 **```
override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)
    NotificationCenter.default.addObserver(self,
                                           selector: #selector(handleKeyboardDidHide(_ :)),
                                           name: UIResponder.keyboardDidHideNotification,
                                           object: nil)
} 
```

和观察者方法；

```
@objc func handleKeyboardDidHide(_ notification: Notification) {
    collectionView.reloadData()
} 
```

而已。键盘隐藏后，您可以保存数据。

希望能帮助到你！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-23T18:48:52.563

以下是我的管理方式。我将 UISearchBar 作为集合视图中的标题补充视图。在搜索栏委托的文本 didchange 上，我设置了一个标志，表明搜索处于活动状态（或不处于活动状态）并重新加载了 collectionview

```
- (void)searchBar:(UISearchBar *)_searchBar textDidChange:(NSString *)searchText
{
    if([searchText isEqualToString:@""])
    {
        activeSearch = FALSE;
    }
    else
    {
        activeSearch = TRUE;
    }
    [self filterContentForSearchText:searchText scope:nil];
    [self.collectionView reloadData];
} 
```

然后在 cellForItemAtIndexPath 我检查键盘是否是第一响应者并且搜索是活动的，如果不是，我让它成为第一响应者：

```
 - (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    ...

    if(activeSearch && ![searchBar isFirstResponder])
    {
        [searchBar becomeFirstResponder];
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-06T19:30:54.263

我刚刚创建了一个小型测试应用程序。以下代码在搜索栏中输入字符时不会隐藏键盘。也就是说，[UITableView reloadData] 不会让响应者辞职。

```
- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {
    return arc4random() % 10;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {    
    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];
    return cell;
}

- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText {
    [self.collectionView reloadData];
} 
```

你确定，你不会在某个地方辞职吗？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-06T19:12:33.100

我认为您正在调用`-resignFirstResponder`搜索栏委托中的方法，这导致每次输入值时都会被解雇

您在关于数据源方法和重新加载数据的正确路径中。使用一个数组存储所有值另一个数组用于加载集合视图和在搜索栏过滤器上输入的每个字母并加载数据源数组，然后重新加载

好吧，我认为最好保留键盘。在您输入文本进行搜索后，这是正确的 UI 样式，您可以手动将其关闭。我认为这是实时更新过滤器的更好选择。

如果您使用按钮进行搜索，则可以在其中包含键盘隐藏选项。但是使用此类选项时无法实现实时更新

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-10-21T15:40:17.203

我刚刚添加

```
 [searchBar becomeFirstResponder]; 
```

打电话后

```
 [collectionView reloadData]; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-26T02:07:20.960

这是由于在 UISearchBarDelegate 方法内部调用了 reloadData()。解决此问题的一种方法是专门为包含搜索栏的标题视图设置一个额外的空白部分。然后代替 reloadData() 调用：

```
self.collectionView.reloadSections([1]) 
```

如果您没有多个数据部分，您可以通过加载虚假标题来消除第二个标题。

```
override func collectionView(_ collectionView: UICollectionView, viewForSupplementaryElementOfKind kind: String, at indexPath: IndexPath) -> UICollectionReusableView {

    if indexPath.section == 1 {
        let fakeView = collectionView.dequeueReusableSupplementaryView(ofKind: kind, withReuseIdentifier: "fakeHeader", for: indexPath)
        return fakeView
    }

    let headerView = collectionView.dequeueReusableSupplementaryView(ofKind: kind, withReuseIdentifier: searchHeader, for: indexPath) as! SearchHeader
    headerView.initializeHeader(with: self)

    return headerView
} 
```

接下来，您可以将仿标题的高度设置为 0

```
func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, referenceSizeForHeaderInSection section: Int) -> CGSize {

    return section == 0 ? CGSize(width: collectionView.frame.width, height: 260) : CGSize(width: collectionView.frame.width, height: 0)
} 
```

您将遇到的下一个问题将是单元格和第一个标题之间的间隙，这是由边缘插入引起的。所以消除第一部分的顶部和底部插图。

```
func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, insetForSectionAt section: Int) -> UIEdgeInsets {
    if section == 1 {
        return UIEdgeInsets(top: 20, left: 20, bottom: 30, right: 20)
    }
    return UIEdgeInsets(top: 0, left: 20, bottom: 0, right: 20)
} 
```

希望这可以节省一些时间。**

# regex - Eclipse Regex Search for beginning and end of line not working

> ID：15255271
> 
> 赞同：3
> 
> 时间：2013-03-06T18:35:01.053
> 
> 标签：regex, eclipse

This is a small question, but it has been nagging me for a while. When I do a **Find** or **Find/Replace** in Eclipse and I use `^` or `$` and check the **Regular Expressions** box, I always get a message:

`String Not Found`

I don't understand why. I know about the `CTRL+SPACE` content assist feature and even when I select `^` from the list, it does not work.

I was looking at this question, [Regex to match start of line and end of line for quick find and replace](https://stackoverflow.com/questions/10003908/regex-to-match-start-of-line-and-end-of-line-for-quick-find-and-replace), but it is not working for me. Other regex searches like `^.` or `;$` work fine.

I see that `^` and `$` are [anchor characters](http://www.regular-expressions.info/quickstart.html), and do not match a string per se, but these characters seem to work in other editors.

**EDIT:**

For example, I want to convert a list of data into an SQL in clause.

From:

```
1
2
3
Hi
I need to quote these! 
```

To:

```
'1',
'2',
'3',
'Hi',
'I need to quote these!', 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T19:41:47.140

`^` and `$` are zero-width anchors as you said, therefore they will not match anything by themselves. You need to use something with the anchors in order to match anything in your file.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:20:06.027

I was able to do it with this regex replace:

Find: `^(\s*)(.*)$`

Replace: `$1'$2',`

So what I do is use:

1.  `^` to find the beginning of the line.
2.  `(\s*)` to find and capture any white space.
3.  `(.*)` to find and capture anything.
4.  `$` to find the end of line.

Then replace with

*   `$1` First capture
*   `'` quote
*   `$2` Second capture
*   `',` quote comma

I wish `^` and `$` worked by themselves, but this is cool b/c I can do it in one operation.

# javascript - 如何获得对 div 的引用？

> ID：15255275
> 
> 赞同：0
> 
> 时间：2013-03-06T18:35:22.970
> 
> 标签：javascript, html, css

我在下面的代码中做错了什么，我无法获得对*页脚*div 的引用？

```
<html>
<title></title>
<head></head>
<body>
<script>alert(document.getElementById('footer'));</script>
<div id="footer">testing footer</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T18:37:14.620

您`getElementById()`在页脚加载之前调用。

`body`将脚本放在或运行的底部`onload`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:37:31.120

将脚本标签放在您尝试选择的 div 下方。我猜警报返回null？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:37:37.743

将其更改为：

```
<script type="text/javascript">alert(document.getElementById('footer').innerHTML);</script> 
```

并将其放在 DIV 之后。

请注意，`innerHTML`假设您只是想从该 div 中获取文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T18:38:07.003

应该

```
<html>
<title></title>
<head></head>
<body>

<div id="footer">testing footer</div>
<script>alert(document.getElementById('footer'));</script>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T18:39:34.767

我位于页脚之前的*脚本*标记因此将在创建页脚之前执行。

您可以做几件事：

*   将脚本放在页脚下方。
*   将`deferred`属性添加到脚本
*   附加到 onload 事件

# php - 推送通知的 PHP 脚本不返回任何内容

> ID：15255276
> 
> 赞同：1
> 
> 时间：2013-03-06T18:35:22.940
> 
> 标签：php, android, curl, push-notification

我有这个脚本用于在我的 android 应用程序上发送推送通知：

```
<?php
// Replace with real BROWSER API key from Google APIs
$apiKey = "AIzaSyAATjQOVDdOUiHra0H-EfxpobQcqOsdwqa";

// Replace with real client registration IDs. Put the correct registration id you are getting from app. If you are using eclipse check your logcat you will get it there.
$registrationIDs = array("APA91bEmxWS9bsXLsixaYQ6zuByM0SzFWe5DEKVLO68923hW3Mo2qB6bIH2LarP5WgzKasMtFAdVyy8YQuwv0YbrRNwdGFORh1wQvQ9uKBkC3jH6uXBYAQOv5xfzrsjYjqcQK8syikrQ6dq6oRrp9XUnimdj_4oBbw" );

// Message to be sent
$message = "Push working!";

// Set POST variables.
$url = 'https://android.googleapis.com/gcm/send';

$fields = array(
        'registration_ids'  => $registrationIDs,
        'data'              => array( "message" => $message ) /*Make sure that message is the key you are using in GCMIntentService.java onMessage() ->  extras.getString("message");*/
);

$headers = array(
        'Authorization: key=' . $apiKey,
        'Content-Type: application/json'
);

// Open connection
$ch = curl_init();

// Set the url, number of POST vars, POST data
curl_setopt( $ch, CURLOPT_URL, $url );

curl_setopt( $ch, CURLOPT_POST, true );
curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode( $fields ) );

// Execute post
$result = curl_exec($ch);

// Close connection
curl_close($ch);

// Echo success or failure
echo $result;

?> 
```

我从来没有在我的手机上收到任何推送通知。问题是，实际上我从来没有从脚本中得到任何输出，就像`echo $result;`没有返回一样。

这甚至可能吗？

有任何想法吗？

## 解决方案

* * *

```
<?php
// Replace with real BROWSER API key from Google APIs
$apiKey = "AIzaSyAATjQOVDdOUiHra0H-EfxpobQcqOsdwqa";

// Replace with real client registration IDs. Put the correct registration id you are getting from app. If you are using eclipse check your logcat you will get it there.
$registrationIDs = array("APA91bEmxWS9bsXLsixaYQ6zuByM0SzFWe5DEKVLO68923hW3Mo2qB6bIH2LarP5WgzKasMtFAdVyy8YQuwv0YbrRNwdGFORh1wQvQ9uKBkC3jH6uXBYAQOv5xfzrsjYjqcQK8syikrQ6dq6oRrp9XUnimdj_4oBbw" );

// Message to be sent
$message = "Push working!";

// Set POST variables.
$url = 'https://android.googleapis.com/gcm/send';

$fields = array(
        'registration_ids'  => $registrationIDs,
        'data'              => array( "message" => $message ) /*Make sure that message is the key you are using in GCMIntentService.java onMessage() ->  extras.getString("message");*/
);

$headers = array(
        'Authorization: key=' . $apiKey,
        'Content-Type: application/json'
);

// Open connection
$ch = curl_init();

// Set the url, number of POST vars, POST data
curl_setopt( $ch, CURLOPT_URL, $url );

curl_setopt( $ch, CURLOPT_POST, true );
curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode( $fields ) );

// Execute post
$result = curl_exec($ch);

// Close connection
curl_close($ch);

// Echo success or failure
echo $result;

?> 
```

现在它完美地工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:21:42.087

发现错误。

换行换`curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);` 行`curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);`

我更正了问题上的代码，所以现在它可以工作了。

# asp.net-mvc-3 - 在 ASP MVC3 站点中使用 ConfigurationManager.AppSettings.Get() 时出错

> ID：15255277
> 
> 赞同：0
> 
> 时间：2013-03-06T18:35:29.610
> 
> 标签：asp.net-mvc-3

我正在尝试`Authorize`在我的 ASP MVC3 应用程序中使用该类。不幸的是，由于业务规则，我需要`Roles`从我们的 web.config 中提取，但是这会引发以下异常：

```
An attribute must be a constant expression, typeof or array creation expression of an attribute parameter type 
```

这是我引用的代码。

```
[Authorize(Roles = ConfigurationManager.AppSettings.Get("user"))]
public class AdminController : Controller
{ 
```

这是`user`我的 web.config 的部分

```
<add key="user" value="SA\\Application.MortalityConcentrationRA.Dev.Users" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:34:53.520

尝试像这样创建自定义授权属性：

```
public class MyAuthorizeAttribute : AuthorizeAttribute
    {
        public MyAuthorizeAttribute()
        {
            this.Roles = ConfigurationManager.AppSettings["user"];
        }

        protected override bool AuthorizeCore(HttpContextBase httpContext)
        {
            return base.AuthorizeCore(httpContext);
        }
} 
```

并像这样在您的控制器中使用它：

```
[MyAuthorize]
public class HomeController : Controller
{
  //code here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:23:56.927

恐怕您需要自定义授权属性。我环顾四周，没有找到任何其他可能的解决方案。当前属性需要一个常量，而我只是不知道让您的 config.AppSettings[] 成为常量值的方法（根据定义，它几乎不是常量）。

看看[这个 SO 帖子](https://stackoverflow.com/questions/11539217/specifying-roles-in-web-config-of-an-asp-net-mvc-application)，它几乎准确地解释了你需要做什么。你的问题几乎是这个问题的重复（这对你有好处，已经有答案了）。

# php - 如何阻止bcrypt salt每次更改登录密码

> ID：15255280
> 
> 赞同：5
> 
> 时间：2013-03-06T18:35:36.133
> 
> 标签：php, login, bcrypt

[我从https://stackoverflow.com/a/6337021/2115954](https://stackoverflow.com/a/6337021/2115954)获取了定义 bcrypt 函数的代码。密码的注册工作正常，并将所有字段保存到数据库中的表中。问题是它`password_login`不起作用，因为当它被散列并添加盐时，它会添加不同的盐。这里有什么问题，我该如何解决。

我尝试过的事情

*   `new`试图摆脱`new bcrypt`
*   `$salt`在`hash('$password_login', $salt)`登录脚本和注册脚本中添加
*   搜索与我类似的情况，我发现的只是关于比较散列`$password_login`和存储、散列`$pswd`在一起的问题/主题
*   还添加了`echo "$hash"`，`echo "$isGood"`以确定它们是否正在被验证以及它们的外观，而无需去数据库查找它们。

index.php 中的登录脚本

```
<?
//Login Script
if (isset($_POST["user_login"]) && isset($_POST["password_login"])) {
    $user_login = (!empty($_POST['user_login'])) ? $_POST['user_login'] : ''; // filter everything but numbers and letters
    $password_login = (!empty($_POST['password_login'])) ? $_POST['password_login'] : ''; // filter everything but numbers and letters 
        $bcrypt = new Bcrypt(10);

        $hash = $bcrypt->hash('$password_login', $salt);
        $isGood = $bcrypt->verify('$password_login', $hash);
        echo "$hash";
        exit();
    $db = new PDO('mysql:host=localhost;dbname=socialnetwork', 'root', 'abc123');
    $db->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING );
    $sql = $db->prepare("SELECT id FROM users WHERE username = :user_login AND password = :password_login LIMIT 1");
    if ($sql->execute(array(
    ':user_login' => $user_login,
    ':password_login' => $hash))) {
        if ($sql->rowCount() > 0){
            while($row = $sql->fetch()){
                $id = $row["id"];
            }
            $_SESSION["id"] = $id;
            $_SESSION["user_login"] = $user_login;
            $_SESSION["password_login"] = $hash;
        } else {
            echo 'Either the password or username you have entered is incorrect. Please check them and try again!';
            exit();
        }
    }
}
?> 
```

在 index.php 中注册脚本

```
<?
class Bcrypt {
  private $rounds;
  public function __construct($rounds = 12) {
    if(CRYPT_BLOWFISH != 1) {
      throw new Exception("bcrypt not supported in this installation. See http://php.net/crypt");
    }

    $this->rounds = $rounds;
  }

  public function hash($input) {
    $hash = crypt($input, $this->getSalt());

    if(strlen($hash) > 13)
      return $hash;

    return false;
  }

  public function verify($input, $existingHash) {
    $hash = crypt($input, $existingHash);

    return $hash === $existingHash;
  }

  private function getSalt() {
    $salt = sprintf('$2a$%02d$', $this->rounds);

    $bytes = $this->getRandomBytes(16);

    $salt .= $this->encodeBytes($bytes);

    return $salt;
  }

  private $randomState;
  private function getRandomBytes($count) {
    $bytes = '';

    if(function_exists('openssl_random_pseudo_bytes') &&
        (strtoupper(substr(PHP_OS, 0, 3)) !== 'WIN')) { // OpenSSL slow on Win
      $bytes = openssl_random_pseudo_bytes($count);
    }

    if($bytes === '' && is_readable('/dev/urandom') &&
       ($hRand = @fopen('/dev/urandom', 'rb')) !== FALSE) {
      $bytes = fread($hRand, $count);
      fclose($hRand);
    }

    if(strlen($bytes) < $count) {
      $bytes = '';

      if($this->randomState === null) {
        $this->randomState = microtime();
        if(function_exists('getmypid')) {
          $this->randomState .= getmypid();
        }
      }

      for($i = 0; $i < $count; $i += 16) {
        $this->randomState = md5(microtime() . $this->randomState);

        if (PHP_VERSION >= '5') {
          $bytes .= md5($this->randomState, true);
        } else {
          $bytes .= pack('H*', md5($this->randomState));
        }
      }

      $bytes = substr($bytes, 0, $count);
    }

    return $bytes;
  }

  private function encodeBytes($input) {
    // The following is code from the PHP Password Hashing Framework
    $itoa64 = './ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';

    $output = '';
    $i = 0;
    do {
      $c1 = ord($input[$i++]);
      $output .= $itoa64[$c1 >> 2];
      $c1 = ($c1 & 0x03) << 4;
      if ($i >= 16) {
        $output .= $itoa64[$c1];
        break;
      }

      $c2 = ord($input[$i++]);
      $c1 |= $c2 >> 4;
      $output .= $itoa64[$c1];
      $c1 = ($c2 & 0x0f) << 2;

      $c2 = ord($input[$i++]);
      $c1 |= $c2 >> 6;
      $output .= $itoa64[$c1];
      $output .= $itoa64[$c2 & 0x3f];
    } while (1);

    return $output;
  }
}
$reg = @$_POST['reg'];
//declaring variables to prevent errors
//registration form
$fn = (!empty($_POST['fname'])) ? $_POST['fname'] : '';
$ln = (!empty($_POST['lname'])) ? $_POST['lname'] : '';
$un = (!empty($_POST['username'])) ? $_POST['username'] : '';
$em = (!empty($_POST['email'])) ? $_POST['email'] : '';
$em2 = (!empty($_POST['email2'])) ? $_POST['email2'] : '';
$pswd = (!empty($_POST['password'])) ? $_POST['password'] : '';
$pswd2 = (!empty($_POST['password2'])) ? $_POST['password2'] : '';
$d = date("y-m-d"); // Year - Month - Day

if ($reg) {
    if ($em==$em2) {
        // Check if user already exists
        $statement = $db->prepare('SELECT username FROM users WHERE username = :username');
            if ($statement->execute(array(':username' => $un))) {
                if ($statement->rowCount() > 0){
                    //user exists
                    echo "Username already exists, please choose another user name.";
                    exit();
                }
            }
                    //check all of the fields have been filled in
                        if ($fn&&$ln&&$un&&$em&&$em2&&$pswd&&$pswd2) {
                            //check that passwords match
                                if ($pswd==$pswd2) {
                                    //check the maximum length of username/first name/last name does not exceed 25 characters
                                        if (strlen($un)>25||strlen($fn)>25||strlen($ln)>25) {
                                            echo "The maximum limit for username/first name/last name is 25 characters!";
                                        }
                                        else
                                            {
                                                //check the length of the password is between 5 and 30 characters long
                                                    if (strlen($pswd)>30||strlen($pswd)<5) {
                                                        echo "Your password must be between 5 and 30 characters long!";
                                                    }
                                                    else
                                                        {
                                                            //encrypt password and password 2 using md5 before sending to database
                                                                $bcrypt = new Bcrypt(10);

$hash = $bcrypt->hash('$pswd', $salt);
echo "<p>$hash</p>";
$isGood = $bcrypt->verify('$pswd', $hash);
echo "<p>$isGood</p>";

                                                                $bcrypt2 = new Bcrypt(10);

$hash2 = $bcrypt2->hash('$pswd2', $salt);
echo "<p>$hash2</p>";
$isGood2 = $bcrypt2->verify('$pswd2', $hash2);
echo "<p>$isGood2</p>";
exit();                                                             
                                                                $db->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING );
                                                                $sql = 'INSERT INTO users (username, first_name, last_name, email, password, sign_up_date)';
                                                                $sql .= 'VALUES (:username, :first_name, :last_name, :email, :password, :sign_up_date)';

                                                                $query=$db->prepare($sql);

                                                                $query->bindParam(':username', $un, PDO::PARAM_STR);
                                                                $query->bindParam(':first_name', $fn, PDO::PARAM_STR);
                                                                $query->bindParam(':last_name', $ln, PDO::PARAM_STR);
                                                                $query->bindParam(':email', $em, PDO::PARAM_STR);
                                                                $query->bindParam(':password', $hash, PDO::PARAM_STR);
                                                                $query->bindParam(':sign_up_date', $d, PDO::PARAM_STR);

                                                                $query->execute();

                                                                die("<h2>Welcome to Rebel Connect</h2>Login to your account to get started.");
                                                        }
                                            }
                                }
                                else {
                                    echo "Your passwords do not match!";
                                }
                        }
                else
                    {
                        echo "Please fill in all fields!";
                    }
            }
    else {
        echo "Your e-mails don't match!";
    }
}
?> 
```

更新的登录脚本

```
<?
//Login Script
if (isset($_POST["user_login"]) && isset($_POST["password_login"])) {
    $user_login = (!empty($_POST['user_login'])) ? $_POST['user_login'] : ''; // filter everything but numbers and letters
    $password_login = (!empty($_POST['password_login'])) ? $_POST['password_login'] : ''; // filter everything but numbers and letters 
    $db = new PDO('mysql:host=localhost;dbname=socialnetwork', 'root', 'abc123');
    $db->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING );
    $sql = $db->prepare("SELECT id, password FROM users WHERE username = :user_login LIMIT 1");
    $dbhash = $db->prepare("SELECT password FROM users WHERE username = :user_login LIMIT 1");
    $isGood = $bcrypt->verify('$_POST["password_login"]', $dbhash);
    echo "$isGood";
    exit(); //here for debugging purposes
    if ($sql->execute(array(
    ':user_login' => $user_login,
    ':password_login' => $hash))) {
        if ($sql->rowCount() > 0){
            while($row = $sql->fetch()){
                $id = $row["id"];
            }
            $_SESSION["id"] = $id;
            $_SESSION["user_login"] = $user_login;
            $_SESSION["password_login"] = $hash;
        } else {
            echo 'Either the password or username you have entered is incorrect. Please check them and try again!';
            exit();
        }
    }
}
?> 
```

更新：我想出了在哪里放置代码。我现在遇到的问题是它没有重定向到主页，但我认为这是由于没有刷新页面造成的。最初我让它在会话开始和用户登录时自动刷新。我将再次更新代码以显示我回家后所做的更改。如果我重新加载页面，它会转到 home.php

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T18:47:56.297

不正确：

```
$hash = $bcrypt->hash('$password_login', $salt);
$isGood = $bcrypt->verify('$password_login', $hash); 
```

不要输入新的哈希`verify()`，输入从数据库中检索到的现有哈希。

例如：`$b->verify('password', '$2a$12$9bAvuaBrMlWmw8oI9flz9e6pjJniKVpRyr9Fz0ScQVwMJA53R3uQO');`

此外，该`hash()`函数只接受*一个*参数并生成自己的随机盐。

您的登录脚本流程应该是：

1.  用户提供用户名/密码。
2.  `SELECT id, password FROM users WHERE username = ?`
3.  `$isGood = $bcrypt->verify($password_login, $hash_from_db);`
4.  ？？？
5.  利润！

## 编辑

什么`verify()`/`crypt()`在后台看什么，也就是存储的哈希中的什么意思

注意：在 base64 编码中，每个字符代表 6 位，

```
$ 2a $ 12 $ 9bAvuaBrMl W mw8oI9flz9e6pjJniKVpRyr9Fz0ScQVwMJA53R3uQO
  |    |    |          | |
  |    |    |          | > the rest of the salted, hashed password
  |    |    |          > this character is split, the first 4 bits are part
  |    |    |            of the salt, the last 2 are part of the hash
  |    |    > the salt
  |    > the number of hashing 'rounds' are performed
  > Scheme ID, 2a is blowfish 
```

# javascript - 在 IE 中未定义 Javascript 变量，直到显示控制台

> ID：15255287
> 
> 赞同：1
> 
> 时间：2013-03-06T18:35:57.803
> 
> 标签：javascript, internet-explorer, variables

我有一小段代码用于我正在处理的模板项目。有三个单独的按钮，指向三个单独的位置。为了使内容提供者更容易，我有这些按钮调用最小的例程来加载下一页。

代码如下：

```
 /* navigation functions here for clarity and ease of editing if needed */
    prevURL    = 'ch0-2.html';
    nextURL    = 'ch2-1.html';
    manURL     = 'ch1-2.html';

    function prevPage() {
       window.location = prevURL; 
    }

    function nextPage() {
        window.location = nextURL;
    }

    function goManager() {
        window.location = manURL;
    } 
```

这在 Firefox 和 Chrome 中完美运行，但在 Internet Explorer 中似乎失败了。

我在 IE (F12) 中打开开发人员工具并显示以下消息：

> SCRIPT5009：“manURL”未定义

位置信息（第 43 行，字符 13）指向代码的“window.location = manURL”部分。

但是，一旦开发人员工具打开，如果我按 F5 重新加载页面，该按钮将正常工作，直到我关闭 IE 并重新打开它，它再次无法响应并给出相同的“未定义”错误。

我很困惑。有人有想法么？

**更新** 我知道变量声明很差，我可以改用 window.location.href 。这里重要的是，*其他两段*代码在所有这些重要方面都相同，但无论哪种方式都可以完美运行。

**epascarello**让我走上了正轨。通过删除所有*console.log*命令，一切都开始工作了。我只是想知道为什么会发生这种情况，并希望能够感谢 epascarello 对我的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:28:03.347

当开发者窗口未打开时，IE 没有控制台命令。因此，如果您将它们放在那里，则代码将无法运行。它会出错。

您可以注释掉这些行或添加一些代码来添加缺少的内容。

```
if (typeof console === "undefined") {
   console = {
       log : function(){},
       info : function(){},
       error : function(){}
       //add any others you are using
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:50:02.273

尝试设置

```
window.location.href 
```

而不仅仅是window.location。

来源： [http ://www.webdeveloper.com/forum/showthread.php?105181-Difference-between-window.location-and-window.location.href](http://www.webdeveloper.com/forum/showthread.php?105181-Difference-between-window.location-and-window.location.href)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:55:56.057

始终在使用变量之前定义变量，明确（表达意图）是一个好习惯，

***所以像这样定义你的变量，***

```
var prevURL    = 'http://google.com';
var nextURL    = 'http://msn.com';
var manURL     = 'http://stackoverflow.com'; 
```

***您可以尝试使用***

```
window.location.href 
```

[参考这篇文章的区别](https://stackoverflow.com/questions/2383401/javascript-setting-window-location-href-versus-window-location)

**建议：** 为我们制作一个jsfiddle.net，以便我们轻松指导您

# scala - Scala中逐字符读取getline的纯实现

> ID：15255292
> 
> 赞同：1
> 
> 时间：2013-03-06T18:36:09.140
> 
> 标签：scala, getline

我一直在尝试在 Scala 中实现我自己的 getline 版本。我想逐字阅读。我得到的最接近的是：

```
def in_string: List[Char] = {
io.Source.fromInputStream(System.in)
  .takeWhile(_ != '\n')
  .toList
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:47:29.527

如果“纯”是指功能性，请参阅 Martin Ring 的评论。

如果“纯”是指“没有 Java”，那么您不能再使用上述方法，因为`InputStream`它来自 Java（无论您做什么，您都会在某处使用一些 Java）。

理论上可以避免`System.in`：

```
Console.readLine  // Reads a whole line for you 
```

把它分解成字符并重新组合成一行是没有意义的。

您更大的问题实际上是逐个字符而不是逐行读取。使用 Java 中提供的工具来做到这一点并不容易，而且由于 Scala 构建在 JVM 之上，它真的不能做得更好。参见例如 SO# [1066318](https://stackoverflow.com/questions/1066318)。

# jquery - 将克隆插入列表？

> ID：15255293
> 
> 赞同：0
> 
> 时间：2013-03-06T18:36:12.550
> 
> 标签：jquery

我有几个 li 的 ul。

我在最后一个 li 之后插入一个元素的克隆。

问题是，用户可以删除所有 li 留下的空列表，然后当我插入克隆时，我无法正确定位列表。

```
$(myClone).clone(true).insertAfter($(this).parent().find('ul.myList li:last')); 
```

以上适用于列表中有元素的情况，我需要一些适用于列表中有东西和没有的东西的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:40:51.970

这可能有效：

```
$(this).parent().find('ul.myList').append($(myClone).clone(true)); 
```

# c# - 照片比较c#

> ID：15255295
> 
> 赞同：-1
> 
> 时间：2013-03-06T18:36:19.753
> 
> 标签：c#, image, compare, kinect

我正在使用 kinect 拍照，然后尝试比较它们，照片将存储在目录中并作为文件流读入，我需要比较图像并确定它们是否相同，并且错误率很高容忍差异背景等更多关于用户姿势的信息，我只是想知道是否有人有任何提示，因为我找不到任何东西

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:17:29.267

我认为这个问题比你起初想象的要复杂。

如果您只是比较 2 张图像，并且如果它们在容错范围内，则认为它们相同，这不是检测相同姿势的可靠方法。

如果我在黑色背景上并执行两个不同的姿势，则它们的“差异”会相对较小，因为两个图像中的大多数像素都是黑色的。如果我在有图案的背景上执行相同的姿势，然后在黑色背景上执行相同的姿势，则尽管姿势相同，但两者之间的“差异”会很大。

我认为正确的方法是寻找四肢（手、脚等）并尝试比较它们的位置。我怀疑对每张图像进行整体采样不够准确。

# c# - InitializeSimpleMembershipAttribute 返回 TargetInvocationException

> ID：15255298
> 
> 赞同：0
> 
> 时间：2013-03-06T18:36:31.493
> 
> 标签：c#, asp.net-mvc, asp.net-membership, forms-authentication

我对 Visual Studios 和 C# 还比较缺乏经验，所以如果没有提供必要的信息或者我的描述不清楚，请告诉我。

我在 Visual Studio 2010 Web Developer Express 中有一个 MVC 4 项目，我正在尝试设置基本的表单身份验证。我使用 ASP.NET 配置管理器设置了几个测试用户和角色。配置管理器还在我的 App_data 文件夹中创建了 ASPNETDB.MDF 数据库，该文件夹已包含在项目中。

我目前正在使用生成的 AccountController 和 Account 视图。

每当我尝试访问具有 [Authorize] 属性的 HTTPGET 或 HTTPPOST 方法时，InitializeSimpleMembershipAttribute 类中的以下方法都会引发 TargetInvocationException：

```
public override void OnActionExecuting(ActionExecutingContext filterContext) 
{
    // Ensure ASP.NET Simple Membership is initialized only once per app start 
    LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
} 
```

查看异常的详细信息时，内部异常指出“无法初始化 ASP.NET 简单成员资格数据库”。

上述内部异常的内部异常表明它“找不到给定模型的概念模型类型”。

未找到的模型属于从数据库生成的 ADO.Net [.edmx] 文件。它找不到的模型是按字母顺序排列的数据库中的第一个表/类，因此它可能也适用于该数据库中的每个类。

我不确定它是否重要，但我使用与 ASPNETDB.MDF 分开的数据库来存储在网站上输入的信息。

我不明白为什么 LazyInitializer.EnsureInitialized() 方法可能会导致这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:47:44.227

您是否检查过`WebSecurity.InitializeDatabaseConnection`in使用的连接字符串`Global.asax.cs` `Application_Start()`- 这可能会导致问题。

如果命名的连接字符串是正确的，你确定 dbContext 连接字符串是正确的：

```
public SomeContext(): base("MyConnectionStringName")
{
} 
```

# qt - 如何使用 QWebElement 设置 input(type="file") 的值？

> ID：15255300
> 
> 赞同：4
> 
> 时间：2013-03-06T18:36:37.710
> 
> 标签：qt, qt4, qtwebkit, qwebelement

我正在尝试使用[QtWebKit](https://qt-project.org/doc/qt-4.8/qtwebkit.html)模块将照片上传到[vk.com 。](https://vk.com)我面临的问题是无法正确填充' 值。这是我使用的一些相关代码：`input(type="file")`

```
def upload():
    print 'uploading...'
    photoInput = web.page().mainFrame().documentElement().findFirst('input[id="photos_upload_input"]')
    assert photoInput, 'No input found'
    photoInput.setAttribute('value', '/Users/elmigranto/Downloads/stuff.png')

    print photoInput.evaluateJavaScript('return this.value;').toString() 
```

需要注意的是，由于浏览器安全策略的原因，Javascript 无法填充文件输入的值。但是，应该可以使用 Qt API，更具体地说，方法。这就是我所做的......没有任何效果（嗯，返回预期结果，但返回空字符串，输入的处理程序也没有被触发）。[`QWebElement`](https://qt-project.org/doc/qt-4.8/qwebelement.html)`::`[`setAttribute()`](https://qt-project.org/doc/qt-4.8/qwebelement.html#setAttribute)`photoInput.attribute('value')``photoInput.evaluateJavaScript('return this.value;').toString()``onchange`

设置其他属性是没有问题的，例如，就像一个魅力。[`QWebElement`](https://qt-project.org/doc/qt-4.8/qwebelement.html)`::`[`addClass()`](https://qt-project.org/doc/qt-4.8/qwebelement.html#addClass)

任何帮助都会非常棒。
谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T01:29:20.027

出于安全原因，该`setAttribute`方法可能仍然不起作用。

但是您可以重新定义`QWebPage::chooseFile`通常应该打开上传对话框并返回文件名的函数，以便它在不打开对话框的情况下返回静态文件名，并通过模拟输入元素上的“返回”键来激活该上传。

这似乎有效：

```
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtWebKit import *
import sys

class WebPage(QWebPage):
    def __init__(self, parent = None):
        super(WebPage, self).__init__(parent)
        self.overrideUpload = None

    def chooseFile(self, originatingFrame, oldFile):
        if self.overrideUpload is None:
            return super(WebPage, self).chooseFile(originatingFrame, oldFile)
        result = self.overrideUpload
        self.overrideUpload = None
        return result

    def setUploadFile(self, selector, filename):
        button = self.mainFrame().documentElement().findFirst(selector)
        self.overrideUpload = filename
        # set the focus on the input element
        button.setFocus();
        # and simulate a keypress event to make it call our chooseFile method 
        webview.event(QKeyEvent(QEvent.KeyPress, Qt.Key_Enter, Qt.NoModifier))

def upload():
    print 'uploading...'    
    page.setUploadFile('input[id="photos_upload_input"]',
        '/Users/elmigranto/Downloads/stuff.png') 
    # The change seems to be asynchronous, at it isn't visible 
    # just after the previous call

app = QApplication(sys.argv)
webview = QWebView()
page = WebPage(webview)
webview.setPage(page)
source = '''
<form action="#">
  Select a file: <input type="file" id="photos_upload_input">
  <input type="submit">
</form>
'''
webview.loadFinished.connect(upload)
webview.show()
webview.setHtml(source)
sys.exit(app.exec_()) 
```

# mysql - 如何向现有表添加唯一键（具有非唯一行）

> ID：15255304
> 
> 赞同：74
> 
> 时间：2013-03-06T18:36:42.113
> 
> 标签：mysql, unique-key

我想向现有表添加复杂的唯一键。键包含 4 个字段 ( `user_id`, `game_id`, `date`, `time`)。但是表有非唯一的行。我知道我可以删除所有重复的日期，然后添加复杂的键。

也许存在另一种解决方案而不搜索所有重复数据。（如添加独特的忽略等）。

我搜索了 UPD，如何删除重复的 mysql 行 - 我认为这是一个很好的解决方案。 [仅使用 MySQL 查询删除重复项？](https://stackoverflow.com/questions/3383898/remove-duplicates-using-only-a-mysql-query)

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2013-03-06T19:17:11.633

你可以按照 yAnTar 的建议去做

```
ALTER TABLE TABLE_NAME ADD Id INT AUTO_INCREMENT PRIMARY KEY 
```

或者

您可以添加约束

```
ALTER TABLE TABLE_NAME ADD CONSTRAINT constr_ID UNIQUE (user_id, game_id, date, time) 
```

但我认为为了不丢失现有数据，您可以添加一个 indentity 列，然后创建一个复合键。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-10-04T10:19:37.230

正确的语法是 -`ALTER TABLE Table_Name ADD UNIQUE (column_name)`

> 例子

```
ALTER TABLE  0_value_addition_setup ADD UNIQUE (`value_code`) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-12-31T13:24:07.407

我不得不解决一个类似的问题。我从 MS Access 继承了一个大型源表，其中包含近 15000 条没有主键的记录，我必须对其进行规范化并使 CakePHP 兼容。CakePHP 的一个约定是每个表都有一个主键，它是第一列并且它被称为“id”。下面的简单语句在 MySQL 5.5 下为我解决了问题：

```
ALTER TABLE `database_name`.`table_name` 
ADD COLUMN `id` INT NOT NULL AUTO_INCREMENT FIRST,
ADD PRIMARY KEY (`id`); 
```

这在现有数据（“FIRST”关键字）前面添加了一个整数类型的新列“id”。AUTO_INCREMENT 关键字从 1 开始递增 id。现在每个数据集都有一个唯一的数字 id。（如果没有 AUTO_INCREMENT 语句，所有行都填充有 id = 0）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-06T20:39:24.723

我正在为我的解决方案提供对您的业务逻辑的假设。基本上，在我的设计中，我将允许该表仅存储用户游戏组合的一条记录。所以我将向表中添加一个复合键。

```
PRIMARY KEY (`user_id`,`game_id`) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-06T18:43:04.183

创建一个自动增量 id 或一个 UNIQUE id 并将其添加到您正在谈论的 4 个字段的自然键中。这将使表中的每一行都是唯一的......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-06-01T07:16:02.347

> 将多个唯一键设置到表中

```
ALTER TABLE table_name
ADD CONSTRAINT UC_table_name UNIQUE (field1,field2); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-23T02:53:11.977

如果 yourColumnName 的某些值不是唯一的，现在您想为其添加唯一索引。尝试这个：

```
CREATE UNIQUE INDEX [IDX_Name] ON yourTableName (yourColumnName) WHERE [id]>1963 --1963 is max(id)-1 
```

现在，尝试插入一些存在的值进行测试。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-15T20:12:22.590

对于 MySQL：

```
ALTER TABLE MyTable ADD MyId INT AUTO_INCREMENT PRIMARY KEY; 
```

# iphone - 访问对象的 NSNumber 值大于一位时会引发错误的访问异常

> ID：15255308
> 
> 赞同：0
> 
> 时间：2013-03-06T18:36:50.473
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我正在尝试将文本字段中的用户输入数据存储到对象的 NSNumber 变量中。根据我的日志，值存储得很好，一切都很好。

问题是当用户通过导航更改视图然后返回时。当我尝试访问 NSNumber 值时，我得到一个错误的访问错误。奇怪的是，如果我存储的值只有 1 位 (0-9)，我不会崩溃。

一些代码...

```
 //conversion then storage of the NSNumber value into the object
   NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
   [formatter setNumberStyle:NSNumberFormatterNoStyle];
   NSNumber *num = [formatter numberFromString:textField.text];
   _options.unitsPerCase = num;
   NSLog(@"num: %@",num);
   break; 

   //user leaves screen i reload tabledata and try to 
   //populate with previously saved NSNumber
   case NumberTextFieldSection:
    {
        switch (indexPath.row)
        {
            case NumberTextFieldRow:
            {
                cell.valueTextField.text = [_options.unitsPerCase stringValue];
                break;
            }

            default:
                break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T19:28:28.713

我怀疑**unitsPerCase**属性检查它是否被声明为强或保留在 myOptions 类中。

采用

```
@property (nonatomic, strong) NSNumber *unitsPerCase; 
```

# vector - LibGDX - 二维中的矩形碰撞检测？

> ID：15255309
> 
> 赞同：0
> 
> 时间：2013-03-06T18:36:54.907
> 
> 标签：vector, rotation, collision-detection, libgdx

好的，我想试试这个：

1.  制作两辆汽车（带有精灵：例如汽车 1 纹理的红色矩形，汽车 2 纹理的绿色矩形）。宽度：32 像素，高度：20 像素。（汽车的运动不是问题）

2.  然后检查碰撞检测，如图所示。第一个是正面碰撞，第二个是侧面碰撞。 [碰撞 http://img802.imageshack.us/img802/2934/rectangles2.png](http://img802.imageshack.us/img802/2934/rectangles2.png)

3.  然后删除精灵，只保留代码中的向量。（位置和旋转）我想要这样，因为我想通过他的旋转在这些位置添加 3d 汽车。我的意思是，在 2d 中没有精灵的碰撞检测。

在最后的游戏中，不会有精灵。只有 3d 对象。

有人有一些代码吗？

我想在没有 Box2D 的情况下制作它。但是当有一个好的盒子 2d 例子时。然后我可以用box2d制作它。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T09:36:35.930

好吧，如果您想进行碰撞检测，我只会使用包含的 box2d。看看[Box2d Car Physics](http://www.iforce2d.net/b2dtut/top-down-car)，这将为您提供如何构建汽车的良好起点。代码适用于 C，但是因为 LibGDX 是一个包装器，所以教程中演示的所有方法都可用。如果您需要帮助在 libgdx 中设置 box2d 物理，该[wiki](https://code.google.com/p/libgdx/wiki/PhysicsBox2D)非常好。要开始构建引擎，您应该只使用 libgdx 提供的 box2d 调试器，它只会绘制所有形状（框/圆/多边形），然后一旦您对引擎的行为感到满意，您就可以更改渲染代码并使用您的汽车的 X、Y 位置和旋转并使用您的 3d 模型。

# dependency-injection - 配置非特定于框架的映射行为

> ID：15255320
> 
> 赞同：1
> 
> 时间：2013-03-06T18:37:25.397
> 
> 标签：dependency-injection, automapper, onion-architecture

我正在尝试配置我的对象映射器，但不知道我正在使用哪个映射器。：/

这听起来可能有点奇怪。这样做的原因是我正在尝试洋葱架构，因此我的 UI 无法了解位于我的基础架构中的对象映射器。有关示例，请参[见此解决方案。](http://onionarch.codeplex.com/)

![洋葱架构](../Images/1d742b37ddd24ed983a1ace04a66a46f.png)

我在弄清楚我应该如何“委托”非默认映射行为时遇到了一些麻烦。像这样的东西：

```
Mapper
    .CreateMap<MyModel, MyDestViewModel>()
    .ForMember(
        dest => dest.SomeDestinationProperty,
        opt => opt.MapFrom(src => src.SomeSourceProperty)
    ); 
```

我在我的 MVC 项目中设置了一个从 Global.asax 调用的类，这是我要配置我的映射的地方。

```
public static class MapConfig
{
    public static void RegisterMaps()
    {

    }
} 
```

我在想我可以做如下的事情。（IMapper是一个位于Domain中的自定义接口）

```
public static void RegisterMaps(HttpConfiguration config)
{
    var mapper = config.DependencyResolver.GetService(IMapper);
    mapper.CreateMap<MyModel, MyViewModel>();
} 
```

现在......我将如何设置像.ForMember这样的特殊行为？请记住，它不能特定于 AutoMapper。

我在想一些事情，在这些方面`mapper.CreateMap<MyModel, MyViewModel>(Expression<Func<T>>)`，Func 会做一些我现在无法弄清楚的黑魔法:( - 我是在正确的道路上还是我错过了一些重要的事情？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T10:02:39.997

Onion Architecture 与*配置*无关，它与*执行*有关。

只需创建一个IMapper 接口来执行映射，而不必担心配置。这适用于您的 ORM、IoC 容器和其他一切。

Also, Onion Architecture isn't about project structure, it's about the direction of your dependencies. Just call CreateMap in your UI. You can then define an IMapper interface all the way down in Core, with the other pieces implementing a version that delegates to AutoMapper.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T10:20:45.903

you're abstracting away useful functionality that will cost you more time than you initially realize. Why not spend the time choosing a mapper and sticking with it?

Why is it so important that your UI doesnt know about your mapper? Assuming that you are using MVC, you are going to be flexing a lot of your chosen mappers functionality to flatten our your domain models to view models anyway.

Its the same kind of nonsense where people use generic repository implementations 'just in case' they decide to switch ORM mid project.

仔细选择您的基础架构并坚持下去。

# asp.net-mvc - 控制器中应该包含什么类型的逻辑？（MVC 和存储库模式）

> ID：15255323
> 
> 赞同：0
> 
> 时间：2013-03-06T18:37:36.267
> 
> 标签：asp.net-mvc, model-view-controller

我听到了很多意见，但是对于控制器中应该使用哪种类型的逻辑是否有一般规则？

我使用存储库进行数据访问和更新，但是如何在操作方法中获取模型参数，在控制器中更新它（例如，FormCollection 对象等），然后将其传递到存储库进行更新。

有没有明确的禁忌？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T18:43:38.510

我通常将Controller设计成允许Model和View解耦，这样它们就可以忽略彼此的存在。

问题是定义模型的职责是什么，以及控制器对于那些*边界*问题的职责是什么。没有人会争辩说将实体持久化到数据库中是控制器的任务，但是如果我们谈论验证，事情就会变得更有争议。

对于输入验证，我个人的方法是在控制器端执行它，假设/约束实体在传递给模型时已经有效。一些在控制器端提供开箱即用验证的 MVC 框架（即 Struts）鼓励了这种趋势，但是当您必须在不同的上下文中重新部署模型时（例如Web 服务），并且您的验证规则连接在前一个 Controller 中。

我鼓励你的研究，但有一个来自个人经验的小建议：避免想太多。宗教战争和不同方法的拥护者的无谓固执使这类问题变得臃肿。在现实世界中，最后，所有这些设计问题都被确凿的事实搞砸了，你只会被要求在 15 分钟内完成一些工作，正如 VP 在午餐时间之前想要的那样。

# android - 在 Fragment 上方的 `onContextItemSelected` 上崩溃

> ID：15255329
> 
> 赞同：0
> 
> 时间：2013-03-06T18:37:54.623
> 
> 标签：android, dialog, android-fragments, android-contextmenu

我有一个`FragmentActivity`使用`SherlockActionBar`和支持库 v4。

主布局中有一个`ListFragment`。点击一个列表项会打开一个新`ListFragment`的部分滑入视图。如果您长按这些列表项，则会显示一个包含两个选项的上下文菜单。第一个选项显示一个`dialog`带有一个`EditText`框和一个`Button`' 它在尝试打开时崩溃。

如果我删除该`EditText`行和这些`Button`行（除非您用 声明它们），会弹出`findViewById`一个空的。`dialog`但出于某种原因，它不喜欢对话框的内容（按钮/框）。任何人都可以查看 LogCat 并了解原因吗？线就是`null`线`setText`。如果我将其注释掉，按钮将`onClickListner`变为`null`.

这是该代码和logcat的代码。

```
public boolean onContextItemSelected(android.view.MenuItem item) {

        if (item.getGroupId() == 2) {

            switch (item.getItemId()) {

            case 1:

case 1:

                if (Rateit.isUserLoggedIn == true) {

                    final Dialog dialog = new Dialog(getActivity());
                    dialog.setTitle("Edit Review");
                    dialog.show();

                    final EditText etEdit = (EditText) dialog
                            .findViewById(R.id.etEditReview);

                    etEdit.setText(reviewWords);

                    Button bInsert = (Button) dialog.findViewById(R.id.bInsert);
                    bInsert.setOnClickListener(new OnClickListener() {

                        public void onClick(View v) {

                            clickedReview = etEdit.getText().toString();

                            if (clickedReview.equals("")) {

                                Toast.makeText(getActivity(),
                                        "Please add something first.",
                                        Toast.LENGTH_SHORT).show();

                            } else {
                                newReview = etEdit.getText().toString();
                                new EditCommentTask().execute();

                                InputMethodManager imm = (InputMethodManager) getActivity()
                                        .getSystemService(
                                                Context.INPUT_METHOD_SERVICE);
                                imm.hideSoftInputFromWindow(
                                        etEdit.getWindowToken(), 0);

                                dialog.dismiss();

                            }

                        }
                    });

                }

                return true; 
```

日志猫：

```
03-06 10:29:08.527: E/AndroidRuntime(10438): FATAL EXCEPTION: main
03-06 10:29:08.527: E/AndroidRuntime(10438): java.lang.NullPointerException
03-06 10:29:08.527: E/AndroidRuntime(10438):    at com.---.---.RateReviewFragment.onContextItemSelected(RateReviewFragment.java:901)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at android.support.v4.app.FragmentManagerImpl.dispatchContextItemSelected(FragmentManager.java:1933)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at android.support.v4.app.FragmentActivity.onMenuItemSelected(FragmentActivity.java:360)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at com.actionbarsherlock.app.SherlockFragmentActivity.onMenuItemSelected(SherlockFragmentActivity.java:211)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at com.android.internal.policy.impl.PhoneWindow$DialogMenuCallback.onMenuItemSelected(PhoneWindow.java:3633)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at com.android.internal.view.menu.MenuDialogHelper.onClick(MenuDialogHelper.java:167)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:941)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at android.widget.AdapterView.performItemClick(AdapterView.java:298)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at android.widget.AbsListView$1.run(AbsListView.java:3423)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at android.os.Handler.handleCallback(Handler.java:725)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at android.os.Looper.loop(Looper.java:137)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at android.app.ActivityThread.main(ActivityThread.java:5226)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at java.lang.reflect.Method.invokeNative(Native Method)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at java.lang.reflect.Method.invoke(Method.java:511)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
03-06 10:29:08.527: E/AndroidRuntime(10438):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:57:10.923

看起来好像你没有膨胀对话框的 XML，我想你有那个对话框的 XML，所以你应该做这样的事情：

```
LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View layout = inflater.inflate(R.layout.instructions, (ViewGroup) activity.findViewById(R.id.layout_root));
builder = new AlertDialog.Builder(mContext);
builder.setView(layout);
Button bInsert = (Button) layout.findViewById(R.id.bInsert);
alertDialog = builder.create();
alertDialog.show(); 
```

你会放在哪里

```
 mContext=this; 
```

在 onCreate() （如果你在你的活动中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T07:00:09.797

查看您的代码，您似乎忘记为新创建的`Dialog`（使用）设置布局（包含您的小部件`setContentView(the_layout_file)`）。如果您不这样做，那么在对话框中搜索并尝试使用这些小部件将抛出一个`NullPointerException`.

# c# - 具有异步等待和 GetType().IsValueType 的可移植类库

> ID：15255332
> 
> 赞同：10
> 
> 时间：2013-03-06T18:38:00.123
> 
> 标签：c#, .net, async-await, portable-class-library

我需要在同一个可移植类库中进行以下调用：

```
public class Foobar
{
    void Foo()
    {
        var b = GetType().IsValueType; //<-- 2
    }

    async Task<IEnumerable<T>> Bar<T>() 
        where T : class, IBaz, new()
    {
        return await Task.Factory.StartNew(() => new List<T>(new[]   //<-- 1
            {
                new T {Qux = Guid.NewGuid().ToString()}
            }));
    }

    interface IBaz 
    {
        string Qux { get; set; }
    }
} 
```

设置以下目标框架：

*   .net 框架 4.5
*   银光 5
*   视窗电话 8
*   适用于 Windows 应用商店应用的 .Net

我收到此构建错误：
*找不到“异步”修饰符所需的所有类型。您的目标是错误的框架版本，还是缺少对程序集的引用？*

我试图安装[bcl](http://nuget.org/packages/Microsoft.Bcl/)但仍然得到同样的错误。如果我删除了 Sliverlight 目标，异步工作但随后我从 Type 类中丢失了 IsValueType 道具......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-06T18:52:30.240

您需要安装[Microsoft.Bcl.Async](http://nuget.org/packages/Microsoft.Bcl.Async/)。

# ios - 在 iOS 应用程序中使用 Active Directory 进行 SSO 身份验证

> ID：15255337
> 
> 赞同：0
> 
> 时间：2013-03-06T18:38:10.290
> 
> 标签：ios, active-directory, single-sign-on

我第二次问这个问题，因为我之前没有得到正确的答案。

以下是更好地解释我的情况的步骤：

1.  我正在为我的组织在 iPad 中创建一个 iOS 应用程序。

2.  我通过 iPad 中的 Junos Pulse 建立了 VPN 连接，以便进入组织的网络。Junos Pulse 使用我的 ntid/密码在 iPad 中建立 VPN 连接。

3.  我想为我的 iOS 应用程序使用 Active Directory 实现 SSO 身份验证。我不想通过调用将使用活动目录进行身份验证的网络服务来做到这一点。我想让用户在 iOS 应用程序本身的活动目录中进行身份验证。

鉴于上述情况，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:28:32.023

iOS 上没有 Kerberos 支持，因此明确的答案是*否定*的。你可能想搜索我的答案。我以前回答过类似的问题。

# python - Python解码器：字母到数字

> ID：15255340
> 
> 赞同：-1
> 
> 时间：2013-03-06T18:38:16.227
> 
> 标签：python, decode, encode, alphabet

我最近刚刚通过在线课程开始使用 python 进行编程，并且在其中一项作业中，我们需要使用 rot13 对字符串进行编码。我使用了 maketrans 方法，一切都很好，但我很好奇如何将字母“编码”为数字。例如，我可以将字母表中每个字母的值分配给一个数字吗？AZ = 1-26 ? 我不知道如何使用两位数。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:39:28.483

使用`ord()`and`chr()`函数将字符转换为数字，反之亦然。字母和数字的数字对应于 ASCII 标准。

```
>>> ord('A')
65
>>> chr(65)
'A' 
```

要将其转换为 1 到 26 之间的数字，请减去 64，或使用`ord('@')`（也为 64）。

另一种选择是使用[`string.ascii_uppercase`变量](http://docs.python.org/2/library/string.html#string.ascii_uppercase)，它可以让您找到字母的“索引”，从 0 开始：

```
>>> string.ascii_uppercase.index('B')
1
>>> string.ascii_uppercase.index('C')
2
>>> string.ascii_uppercase[3]
'D' 
```

您可以使用任何一种技术来创建从字母到数字的映射，也许：

```
>>> letters = {c: i for i, c in enumerate(string.ascii_uppercase)}
>>> letters['M']
12 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:40:39.310

> 例如，我可以将字母表中每个字母的值分配给一个数字吗？AZ = 1-26 ?

编码：

```
>>> ''.join('%02d' % (ord(c) - ord('A') + 1) for c in 'SECRET')
'190503180520' 
```

解码：

```
>>> encoded = '190503180520'
>>> ''.join(chr(int(encoded[i:i+2]) + ord('A') - 1) for i in range(0, len(encoded), 2))
'SECRET' 
```

# javascript - Twitter Bootstrap 警报消息在不按关闭按钮的情况下关闭

> ID：15255342
> 
> 赞同：0
> 
> 时间：2013-03-06T18:38:25.520
> 
> 标签：javascript, jquery, twitter-bootstrap

我对警报消息有疑问。我想在执行特定操作后使用警报消息作为对用户的警告。我面临的问题是消息显示然后自行关闭，而无需用户关闭消息。

```
<div class="row-fluid">
<div class="alert span10 offset1" style="display: none" id="changeStatusMsg"> 
    <a class="close" onclick="$('.alert').hide()" href="#">×</a>  
        <strong>Status has been changed.</strong>  
</div> 
```

我正在使用 jquery 来显示消息 - $('#changeStatusMsg').show(); [我使用了这里](https://stackoverflow.com/questions/13550477/twitter-bootstrap-alert-message-close-and-open-again)提到的解决方案， 但这对我的情况没有帮助。

```
function changeStatus(status, widgetExternalId){
    $.ajax({
        url : 'Controller',
        data : { 'widget' : widgetExternalId, 
                 'method' : (status == 'I' ? "activate" : "inactivate")
               },
        success : function(data) {
                window.location = "myaccount.jsp";
                $('#changeStatusMsg').show();
            } 
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:46:30.467

这可能与您没有调用打开它的操作有关。所以页面很清爽。

如果你是内联的：

```
onclick="$('#changeStatusMsg').show();return false;" 
```

如果有点击事件

```
$(".foobar").on("click",function (event) {
    event.preventDefault();
    $("#changeStatusMsg').show();
}); 
```

# asp.net - 有没有办法确定跨域图片请求的源页面？

> ID：15255343
> 
> 赞同：1
> 
> 时间：2013-03-06T18:38:30.323
> 
> 标签：asp.net, cross-domain

我正在开发一组使用大量跨域 immge 请求的网站（我们自己的网站），并且在我们的日志中收到很多 404 错误，但无法识别图像所在的任何实际页面' t 显示。有谁知道可用于找出哪些页面请求包含错误图像引用的任何方法？

我突然想到，我可以编写一个 HttpModule 用于在站点上扫描所有页面以查找图像引用，并进行一些日志记录，以便我可以用来追踪有问题的页面，但我想先看看是否有更简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:57:31.930

请求应具有指定调用域的“Origin”标头。此标头由浏览器设置，不能被欺骗。“Referer”标头将为您提供调用页面的完整 URL。您可以将这些标头值写入日志。

# java - 奶牛和公牛比赛

> ID：15255345
> 
> 赞同：2
> 
> 时间：2013-03-06T18:38:36.433
> 
> 标签：java, while-loop, boolean

我正在开发一个有两个不同类的牛和公牛游戏：第一个类看起来像这样：import java.util.*; 导入 java.util.Scanner；

```
public class CowsAndBulls  {

    int UserNumber=0; 
    int CompNumber=0;
    int bulls=0; 
    int cows=0;
    Scanner input = new Scanner(System.in); 

    public void getUserNumber() { 
    System.out.println("Please enter your guess!");
    int UserValue=input.nextInt();
    UserNumber=UserNumber+ UserValue;
    System.out.println("Your guess is  : " + UserNumber);
    } 

    public void getCompNumber() { 
        Random generator= new Random();
        int pickedNumber=generator.nextInt(10000) + 1000;
        CompNumber =CompNumber+ pickedNumber;
        System.out.println("The computer has guessed : " + CompNumber );
    }   
} 
```

它只是为计算机生成一个随机数并要求用户输入他们的猜测。我的游戏课遇到了很多麻烦，具体来说，我无法让我的 while 循环运行，

```
public class CowsAndBullsPlay {

    public void play() {

    int GuessCount=0; 
    int UserNumber = 0;
    int CompNumber = 0;
    int cows = 0; 
    int bullcount=0;
    int cowcount=0;
    int bulls = 0; 
    Boolean GameEnds; 
    GameEnds=false;

        while (GameEnds=false) { 
            CowsAndBulls user= new CowsAndBulls(); 
            user.getUserNumber(); 
            CowsAndBulls comp= new CowsAndBulls(); 
            comp.getCompNumber();

            String UserString=String.valueOf(UserNumber); 
            String CompString=String.valueOf(CompNumber);
            String U=UserString;
            String C=CompString;
            for (int i=0; i<4; i++)
            for (int k=i+1; k<4; k++) {
                    if(U.charAt(i)==C.charAt(k)) {
                        bullcount ++; 
                        bulls=bulls + bullcount;
                    }   

                else if(U.contains(C.charAt(i) + U)) {      
            //for (int v=0; v<4; v++)
            //for (int j=0; j<4; j++) {
                        cowcount ++; 
                        cows=cows + cowcount;
                    }
                    GuessCount++;
            }   
            if (bulls==4) { 
                GameEnds= true; 
                System.out.println("Congratulations!");
                System.out.println("it took you:" + GuessCount);
            } 
            else { 
                System.out.println("cows: " + cows); 
                System.out.println("Bulls:" + bulls);
            }   

        } 
    }
} 
```

它应该检查奶牛然后检查公牛，然后如果公牛不等于四，循环应该重复——调用前两个方法，要求用户输入并要求计算机随机生成一个数字，然后猜测计数应该保持跟踪循环迭代。

代码编译，但它不会运行 while 循环

这是我的测试员课程：

```
public class CowsAndBullsTester { 

public static void  main(String[] args) {

    int bears = 0;
    int cows = 0;
    Boolean GameEnds = false;

     System.out.println("welcome to Cows Versus Bulls death match!");
     CowsAndBulls user= new CowsAndBulls (); 
     user.getUserNumber(); 

     System.out.println("Now the computer will pick a number!");
     CowsAndBulls comp= new CowsAndBulls (); 
     comp.getCompNumber(); 

     System.out.println("Let's see how you did!");
     CowsAndBullsPlay game= new CowsAndBullsPlay();
     game.play(); 
    }
} 
```

非常感谢任何帮助。我确定有一些愚蠢的错误，我只是不确定是什么。这只是我的第三个任务，我很难自己找出问题所在:)

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T18:40:20.480

您需要更改`while (GameEnds=false)`为`while (GameEnds==false)`.

第一个是赋值，第二个是比较。因此，首先，`false`将分配给`GameEnds`，然后根据您的条件`GameEnds`评估为，这意味着循环永远不会进入。`false``while`

另外，请参阅下面的@AndrewMao 评论。通常，您会看到`boolean`s 直接用在条件中，有或没有否定 ( `!`)，因为它们已经拥有真值，进一步比较是多余的。

* * *

*小旁注：`camelCase`为清楚起见，您可能需要重命名变量。*

# html - 如何创建带有向右箭头的选项卡式结构

> ID：15255346
> 
> 赞同：2
> 
> 时间：2013-03-06T18:38:43.283
> 
> 标签：html, navigation, css

我想用 HTML 和 CSS 重现下面的图像。

一种选择是使用图像来做到这一点，另一种选择是在选项卡元素之后使用[CSS 三角形](http://css-tricks.com/snippets/css/css-triangle/)，这样：

```
<div class="tab"></div><div class="arrow"></div> 
```

然后定位它们。但是有没有另一种方法可以做到这一点，我可以在一个 div 中的选项卡的 css 中获得箭头效果，这样：

```
<div class="tab"></div> 
```

没有单独的箭头元素就足够了

如果您包含 JSFiddle，则 +1。

![选项卡结构](../Images/ebee25a971852784560f8dd423dc4c17.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:43:38.743

我发现最简单和最快的方法就是为这些使用精灵表。为 :before 添加 :after 和单独的图像会很快变得笨拙。

例如![在此处输入图像描述](../Images/958abe928afeb89ef214a01668d61175.png)

```
header.content nav ul {
    width:552px;
    height:33px;
    background:url("/assets/images/layout/main-nav-background.png") no-repeat;
    background-position:0 -99px;
    float:left;
    list-style: none;   
}

header.content nav.page2 ul {
    background-position: 0 -66px;
}
header.content nav.page3 ul {
    background-position: 0 -33px;
}
header.content nav.page4 ul {
    background-position: 0 0px;
} 
```

# asp.net - 在 asp 中单击链接按钮：GridView 单元格不会触发 OnRowCommand 事件

> ID：15255348
> 
> 赞同：1
> 
> 时间：2013-03-06T18:38:47.793
> 
> 标签：asp.net, gridview, asplinkbutton, rowcommand

**UI 功能**：我有`GridView`几列。最重要的列是**PcCode**，它显示`string`每一行的值。

**预期**：当我单击该 PcCode 列的一行中的一个单元格时，`GridView`应显示另一个单元格。但是，当我尝试将 a`asp:LinkButton`用于单元格时，事情就不起作用了。当我单击单元格中的`RowCommand`a 时不会触发。我在哪里做错了？哪种方式可以实现预期的功能？在此先感谢您帮助新手。 `asp:LinkButton``GridView`

在下面的代码中，我试图获取 a`RowIndex`并将其传递给`CommandArgument`并使用 a `CommandName`。

.aspx 代码

```
<asp:GridView ID="_UIProfitcenterTotalGridView" runat="server" CellPadding="4" ForeColor="#333333" GridLines="None" AllowPaging="True" PageSize="22" ShowFooter="True" AutoGenerateColumns="False"
    DataKeyNames="ProfitcenterCode" EnableViewState="False" 
    OnRowDataBound="_UIProfitcenterTotalGridView_RowDataBound"
    OnPageIndexChanging="_UIProfitcenterTotalGridView_PageIndexChanging" 
    OnRowCommand="_UIProfitcenterTotalGridView_OnRowCommand">
    <Columns>

       <asp:TemplateField HeaderText="PcCode" InsertVisible="False" 
            ShowHeader="False" SortExpression="ProfitcenterCode" FooterText="Total" FooterStyle-HorizontalAlign="Left">
            <ItemTemplate>
               <asp:LinkButton ID="_UIPCCodeLinkButton" runat="server" Text='<%# Eval("ProfitcenterCode") %>'  
                CommandName="Select" 
                CommandArgument='<%# ((GridViewRow) Container).RowIndex  %>'>
               </asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField> 
... 
```

aspx.cs 背后的代码

```
 protected void _UIProfitcenterTotalGridView_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "Select")
        {
            int index = Convert.ToInt32(e.CommandArgument);
            GridViewRow row = _UIProfitcenterTotalGridView.Rows[index];
            string ProfitcenterCode = _UIProfitcenterTotalGridView.DataKeys[_UIProfitcenterTotalGridView.SelectedIndex].Values["ProfitcenterCode"].ToString();
        }
    } 
```

选择行后，我需要将所选行的值作为字符串并与列表项进行比较以显示新的 GridView。

**试过了**

*   使用 Link_Button_Click(Object sender, EventArgs e) 和以下但失败。

    protected void _UIProfitcenterTotalGridView_RowCommand(object sender, GridViewCommandEventArgs e) { if (e.CommandName == "Select") {string ProfitcenterCode = ((GridViewRow)(((LinkBut​​ton)e.CommandSource).NamingContainer)).Cells[2].Text ; } }

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:17:58.890

我尝试使用`LinkButton_Click()`event 而不是[jason](https://stackoverflow.com/a/15255819/1108500)建议的`RowCommand`那样：

```
protected void LinkButton_Click(Object sender, EventArgs e)
    {
        LinkButton button = (LinkButton)sender;
        GridViewRow row = (GridViewRow)button.NamingContainer;
        if (row != null)
        {
          string theValue = ((LinkButton)sender).CommandArgument.ToString();
          ...
          ...
          //code for the extra thing I needed to do after selecting a cell value.
        }
     } 
```

但是我仍然有问题，我想通了。问题是`LinkButton`没有绑定到行，它不能在选择时传递任何值。缺少的是以下代码：

```
 if (e.Row.RowType == DataControlRowType.DataRow)
            {
                LinkButton linkButton = new LinkButton();
                linkButton.Text = e.Row.Cells[0].Text; //value of the first column from the grid 
                linkButton.Enabled = true;
                linkButton.Click += new EventHandler(LinkButton_Click); //triggering the LinkButton event here. 
                e.Row.Cells[0].Controls.Add(linkButton);
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:05:39.803

您可以使用 sender 对象（调用事件的链接按钮）并从 gridview 获取父行。例子：

```
Protected Sub linkButton_click(ByVal sender As Object, ByVal e As EventArgs)
   'First cast the sender to a link button
   Dim btn As LinkButton = CType(sender, LinkButton)
   'now, if there is a command arguement, you can get that like this
   Dim id As String = btn.CommandArgument
   'to get the gridviewrow that the button is on:
    Dim row As GridViewRow = CType(btn.NamingContainer, GridViewRow)   

End Sub 
```

很难准确地遵循您要查找的内容，因此如果我遗漏了某些内容，请告诉我，我会添加它。

```
protected void linkButton_click(object sender, EventArgs e)
{
    //First cast the sender to a link button
    LinkButton btn = (LinkButton)sender;
    //now, if there is a command arguement, you can get that like this
    string id = btn.CommandArgument;
    //to get the gridviewrow that the button is on:
    GridViewRow row = (GridViewRow)btn.NamingContainer;

} 
```

并将您的链接按钮更改为：

```
 <asp:LinkButton OnClick="linkButton_click" ID="_UIPCCodeLinkButton"
 runat="server" Text='<%# Eval("ProfitcenterCode") %>'

            CommandName="Select" 
            CommandArgument='<%# ((GridViewRow) Container).RowIndex  %>'> 
```

# ms-access - 无法运行删除查询

> ID：15255350
> 
> 赞同：0
> 
> 时间：2013-03-06T18:38:51.497
> 
> 标签：ms-access

我正在尝试运行删除查询

```
DELETE tblInventory.ProductNo, tblInventory.Vendor
FROM tblInventory
WHERE (((tblInventory.Vendor) Like "*barshop*")); 
```

我收到以下错误消息。

CaseTracker 无法删除删除查询中的 1 条记录，因为键违规 0 条记录，因为锁违规。

我需要做什么才能使查询运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:52:17.717

I may try something like this:

`DELETE FROM tblInventory WHERE tblInventory.Vendor LIKE '%barshop%'`

That's the case if you're using SQL Server. Not sure that runs on MS-Access DB

In the DELETE statement you are deleting a complete record that matches your WHERE statement, so you don't need to put columns like in a SELECT statement.

Hope it helps.

# jquery - 由于某些字符，json 转换失败

> ID：15255351
> 
> 赞同：0
> 
> 时间：2013-03-06T18:38:52.400
> 
> 标签：jquery, json

以下转换失败，说明控制字符错误

```
var myObj = JSON.parse('{"imagePath": "http://somedomain.com/test.jpg?path=\728\1.jpg"}');
console.log(myObj); 
```

是不是因为图像路径中有以下字符“\”，如果是这样，我们有什么解决办法吗？

如果我删除该字符，它会起作用。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:43:32.857

`\`无论您在何处生成 JSON，都需要转义该字符。

如果它是文字，那么您还必须[逃避转义](https://stackoverflow.com/questions/3807537/why-does-the-jquery-json-parser-need-double-escaping-for-backslashes)：

```
j = JSON.parse('{"imagePath": "http://somedomain.com/test.jpg?path=\\\\728\\\\1.jpg"}'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:43:00.000

`\`是一个转义字符。所以如果你想`\`在你的图像路径字符串中使用，那么你需要对它进行双重转义。即使用`\\`

# c# - 如何确定变量类型是否支持 C# 中的给定运算符

> ID：15255357
> 
> 赞同：2
> 
> 时间：2013-03-06T18:39:04.227
> 
> 标签：c#, operators

我有这个问题：

我想创建一个支持 +、-、*、/ 运算符的通用类。例如一个矩阵类。问题是，有些数据类型支持所有上述运算符，有些支持其中的一部分，有些则根本不支持。我想让我的班级认识到上述哪些运算符受支持，如果其中一些不受支持，我希望看到**编译时间**错误。

例子：

`Matrice<int>`: 我们可以做 +, -, /, * 因为 int 有这些运算符重载/定义

`Matrice<string>`：我们只能做+，因为字符串只有+重载/定义，如果我们尝试
`Matrice<string> a = new Matrice<string>;`
`Matrice<string> b = new Matrice<string>;`
`Matrice<string> c = a*b;`
我们应该得到一个**编译时间**错误

`Matrice<CustomClass>`：如果 CustomClass 只有 / 和 + 重载（例如），则`Matrice<CustomClass>`应该只支持 / 和 + 运算符

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T18:51:05.857

不幸的是，这是不可能的。运算符重载是静态的，因此您不能使用接口或继承来确保考虑运算符。[在这里](http://www.stackoverflow.com/questions/6603940/)查看更多

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T18:52:10.880

This is not possible in C#. You will need to use some sort of traditional method or delegate to indicate how to "add" "subtract", etc. for each item.

# php - 如何使用 jquery mobile 和 ajax 实现浏览器历史记录和书签

> ID：15255362
> 
> 赞同：1
> 
> 时间：2013-03-06T18:39:19.320
> 
> 标签：php, jquery, mysql, json, jquery-mobile

我正在尝试使用 JQM、JQuery、PHP 和 MYSQL 构建一个站点。这个想法是使用 ajax 从数据库 (JSON) 中提取信息以将其插入页面。我唯一的问题是，我不确定如何以一种易于为页面添加书签并返回（返回到最后一页）JQM 站点的方式来实现 ajax。我正在考虑使用 pushstate，但不确定如何实现它。任何人都可以向我指出如何有效地做到这一点的教程，或者他们是否可以提供一些示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:33:29.813

将它保存在页面 url 中，所以让你的页面 URL 是：test_page.php 和 json URL 是 test_json.php。您想为所有名称为“mark”的页面添加书签。因此，您将 test_page.php?name=mark 加入书签。然后在页面加载时将其定义为 json 以获取所有标记。

这样您就可以为 URL 添加书签，然后根据 URL 中的参数进行获取。

# java - 为 2D 点 (int,int) 的 ArrayList 实现方法 add

> ID：15255367
> 
> 赞同：0
> 
> 时间：2013-03-06T18:39:33.767
> 
> 标签：java, arraylist

我想为以下数据结构的 .add(int,int) 和 ArraYList 创建方法：

```
 class CPoint {
    int x;
    int y;
} 
```

为了以下列方式使用它：

```
 ArrayList<CPoint> ar = new ArrayList<CPoint>();
    ar.add(100,100); 
```

我知道我必须从这样的事情开始：

```
class CArrayListPoints extends ArrayList<CPoint>{
} 
```

但不确定如何。请在这件事上帮助我。编辑：实现 <-- 扩展

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:46:00.933

您可以像这样创建一个类：

```
class CArrayListPoints extends ArrayList<CPoint>{

   public void add(int x, int y){
      super.add(new CPoint(x, y);
    }

} 
```

使用这种方式：

```
CArrayListPoints list = new CArrayListPoint();
list.add(10, 10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:47:59.063

可能你看起来像这样

```
class CPoint {
        int x;
        int y;
    }

class CArrayListPoints extends ArrayList<CPoint>{
        public void add(int x, int y){
            CPoint p = new CPoint();
            p.x = x;
            p.y = y;

            add(p);
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:45:06.220

如果您想要一个包含两个值的列表，HashMap [http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)就是您所需要的。如果您坚持使用 Arraylist，只需创建一个 add(int a,int b) 方法并让每个 CPoint 都有一个包含 x 值的字段。

# css - Div 浮动到高位

> ID：15255377
> 
> 赞同：3
> 
> 时间：2013-03-06T18:40:00.693
> 
> 标签：css

出于某种原因，菜单 div 在菜单启动时浮动太高，但当它关闭时它是完美的。我不太确定该怎么做才能使该菜单 div 向下触摸它下方的右侧 div

```
footer {
    width: 100%;
    position: absolute;
    bottom: 0;
    left: 0;
} 

#footer-content {
    display: none;
} 

#footer-left {
    width: 20%;
    height: 145px;  
    float: left;
    background-color: #52291c;/*#805f4c;*/
    opacity: 0.8;
} #footer-left h3 {
    width: 95%;
    font-size: 20px;
    font-weight: lighter;
    margin-top: 95px;
    opacity: 1;
    text-align: right;
} #footer-left h3 a {
    color: #fff;
    text-shadow: 1px 1px #000;
    text-transform: lowercase;  
} 

#footer-right {
    width: 80%;
    height: 145px;
    float: right;
    background-color: #B29F63; /*#B29F63*/
    opacity: 0.3;   
} #footer-right ul {
    margin: 30px 15px;
    font-size: 24px;    
} #footer-right ul li a {
    color: #52291c;
}

.doing-tricks {
    width: 150px;
    position: relative;
    left: 21%;
    top: 132px; 
    font-size: 24px;
    z-index: 100;
} .doing-tricks a {
    color: #52291c; 
}

.toggle-footer {
    width: 100px;
    margin: 0px auto;
    padding: 10px;
    cursor: pointer;
    color: #52291c;
    text-align: center;
    text-shadow: 1px 1px #fff;
    background: #B29F63;
    background: -moz-linear-gradient(top,  rgba(254,255,255,1) 0%, rgba(178,159,99,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(254,255,255,1)), color-stop(100%,rgba(178,159,99,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(254,255,255,1) 0%,rgba(178,159,99,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(254,255,255,1) 0%,rgba(178,159,99,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(254,255,255,1) 0%,rgba(178,159,99,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(254,255,255,1) 0%,rgba(178,159,99,1) 100%); /* W3C */
    opacity: 0.8;
    border-top-left-radius:  5px;
    border-top-right-radius: 5px;
} 
```

jFiddle：http: [//jsfiddle.net/rFdwr/1/](http://jsfiddle.net/rFdwr/1/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T18:49:54.100

使`.doing-tricks`' 的位置`absolute`而不是`relative`

```
.doing-tricks {
    ...
    position: absolute;
    ...
} 
```

然后，您需要调整页脚内文本的顶部位置。

# web-services - 如何在 Playframework 2 / Scala 中使用 WS API 以空的正文请求进行 http 发布？

> ID：15255380
> 
> 赞同：19
> 
> 时间：2013-03-06T18:40:16.190
> 
> 标签：web-services, scala, rest, playframework-2.0, http-post

我尝试使用 Play2/Scala WS API 向服务端点发送**HTTP POST**请求。由于 HTTP POST 正文中没有要发送的参数，我如何使用

```
WS.url("http://service/endpoint).post() 
```

我试过`post()`没有争论，但它给了我一个错误。

> 无法将 Unit 的实例写入 HTTP 响应。尝试定义一个 Writeable[Unit]

你能帮忙吗？

提前致谢...

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-06T18:59:08.503

由于`post`await 实现了`Writeable`和`ContentTypeOf`类型类的值，因此您可以使用`Results.EmptyContent`from `play.api.mvc`。（见[API](http://www.playframework.com/documentation/api/2.1.0/scala/index.html#play.api.mvc.Results%24%24EmptyContent)）

所以我猜

```
WS.url("http://service/endpoint").post(Results.EmptyContent()) 
```

应该做。（没测试）

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2017-08-02T09:28:27.067

对于 Play 2.6 及更高版本，您必须使用`play.api.libs.ws.EmptyBody`.

```
import play.api.libs.ws.{EmptyBody, WSClient}
WS.url("http://service/endpoint).post(EmptyBody) 
```

典型的错误是：

```
Cannot find an instance of play.api.mvc.Results.EmptyContent to WSBody. Define a BodyWritable[play.api.mvc.Results.EmptyContent] or extend play.api.libs.ws.ahc.DefaultBodyWritables 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-24T14:04:42.927

从 Play 2.8 开始，您不能使用`WSRequest.post(body)`带有空主体的方法，因为该`BodyWritable`trait 需要一个非空的`Content-Type`

相反，您可以`ws.url(u).execute("POST")`发送没有正文的 HTTP POST 请求。

# scroll - 在 Kindle Fire 上平滑滚动

> ID：15255393
> 
> 赞同：0
> 
> 时间：2013-03-06T18:40:40.930
> 
> 标签：scroll, kindle-fire, amazon-silk

我创建了一个简单的示例页面来显示我的问题：http: [//jsbin.com/owivak/1/](http://jsbin.com/owivak/1/)

在浏览器中滚动此页面在大多数平台上都可以正常工作，可爱的绿色标题栏保持在原位，其他内容在它后面滚动，它是一个固定的标题。

我遇到的问题是 Kindle Fire 上的 Amazon Silk 浏览器。我意识到这是一个相当低功耗的设备，但它的功耗并不算太低，无法滚动这个非常简单的页面……除了它！

问题在于，在其 Silk 浏览器中的 Kindle Fire 上，当您滚动时，标题似乎正在重新绘制，并且看起来令人难以置信的故障。

有没有人遇到过这个或类似的问题？以及如何解决的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:14:32.860

看来这是 Kindle Fire Silk 浏览器中的一个错误。更新到最新的软件（撰写本文时为 10.3）解决了这个问题。

# c# - 如何在两个下拉列表的 OnSelectedIndexChanged 上获取选定索引？

> ID：15255398
> 
> 赞同：0
> 
> 时间：2013-03-06T18:40:56.980
> 
> 标签：c#, asp.net, linq, entity-framework

我正在尝试使用两个 DropDownLists 来过滤数据。我将两个`OnSelectedIndexChanged`Equal 都设置为下面的方法。问题是它只是抓住了`SelectedIndex`被改变的 DDL。示例：如果我在 DDL1 中选择一个选项，它会获取该值而不获取 DDL2 的值。他们都有相同的`OnSelectedIndexChanged`我认为它会抓住两者的当前价值。有没有办法让它同时查看两个 DDL 控件？

```
 protected void BrandsList_SelectedIndexChanged(object sender, EventArgs e)
 {
    int DDLcatId = CategoriesList.SelectedIndex;
    int DDLBraId = BrandsList.SelectedIndex;

    IQueryable<Product> DDLprodResult = GetProductsDDL(DDLcatId, DDLBraId);

    if(DDLprodResult == null)
    {

    }

    else
    {
       CatLab.Text = DDLprodResult.ToList().Count().ToString();
       productList.DataSource = DDLprodResult.ToList();
       productList.DataBind();
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:49:05.923

您的代码应该可以工作。`AutoPostBack="true"`当然，如果您在两者上都设置了（默认为 false），则只能更改一个。但是`SelectedIndex`无论如何，您都应该在处理程序中得到正确的结果。

所以我猜：你`DropDownLists`在每次回发时都在绑定数据。仅执行此操作`if(!IsPostBack)`，否则您总是会用原始值覆盖更改。

例如，在`Page_Load`：

```
protected void Page_Load(Object sender, EvengtArgs e)
{
    if(!IsPostBack)
    {
        // DataBind your DropDownLists
    }
} 
```

# c - 如何减少 SQLite 内存消耗？

> ID：15255409
> 
> 赞同：18
> 
> 时间：2013-03-06T18:41:42.563
> 
> 标签：c, performance, sqlite, memory-consumption

我正在寻找在我的应用程序中减少 SQLite3 内存消耗的方法。

在每次执行时，它都会创建一个具有以下架构的表：

```
(main TEXT NOT NULL PRIMARY KEY UNIQUE, count INTEGER DEFAULT 0) 
```

之后，数据库每秒填充 50k 次操作。只写。

当一个项目已经存在时，它会使用更新查询更新“计数”（我认为这称为 UPSERT）。这些是我的疑问：

```
INSERT OR IGNORE INTO table (main) VALUES (@SEQ);
UPDATE tables SET count=count+1 WHERE main = @SEQ; 
```

这样，每个事务有 500 万次操作，我可以非常快速地写入数据库。

我真的不关心这个问题的磁盘空间，但我的 RAM 空间非常有限。因此，我不能浪费太多的内存。

sqlite3_user_memory() 通知它的内存消耗在执行期间增长到几乎 3GB。如果我通过 sqlite3_soft_heap_limit64() 将其限制为 2GB，那么当达到 2GB 时，数据库操作的性能几乎下降到零。

我必须将缓存大小提高到 1M（默认页面大小）才能达到理想的性能。

我可以做些什么来减少内存消耗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-09T00:24:57.633

看起来内存消耗高可能是因为太多的操作集中在一个大事务中。尝试提交较小的事务（如每 1M 操作）可能会有所帮助。每个事务 5M 操作消耗太多内存。

但是，我们会平衡操作速度和内存使用量。

如果较小的交易不是一种选择，`PRAGMA shrink_memory`可能是一种选择。

使用`sqlite3_status()`with`SQLITE_STATUS_MEMORY_USED`跟踪动态内存分配并定位瓶颈。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-12T20:47:08.043

我会：

*   准备陈述（如果你还没有这样做）
*   降低每笔交易的 INSERT 数量（10 秒 = 500,000 听起来合适）
*   `PRAGMA locking_mode = EXCLUSIVE;`如果可以，请使用

另外，（我不确定你是否知道）`PRAGMA cache_size`是在页面中，而不是在 MB 中。确保在 as 或 SQLite >= 3.7.10 中定义目标内存，`PRAGMA cache_size * PRAGMA page_size`您也可以这样做`PRAGMA cache_size = -kibibytes;`。将其设置为 1 M（百万）将导致 1 或 2 GB。

我很好奇如何`cache_size` 在 INSERT 中提供帮助......

`PRAGMA temp_store = FILE;`如果有所不同，您也可以尝试进行基准测试。

当然，只要您的数据库没有被写入：

*   `PRAGMA shrink_memory;`
*   `VACUUM;`

根据您对数据库的操作，这些也可能有所帮助：

*   `PRAGMA auto_vacuum = 1|2;`
*   `PRAGMA secure_delete = ON;`

* * *

我使用以下编译指示进行了一些测试：

```
busy_timeout=0;
cache_size=8192;
encoding="UTF-8";
foreign_keys=ON;
journal_mode=WAL;
legacy_file_format=OFF;
synchronous=NORMAL;
temp_store=MEMORY; 
```

## 测试#1：

```
INSERT OR IGNORE INTO test (time) VALUES (?);
UPDATE test SET count = count + 1 WHERE time = ?; 
```

每秒达到峰值约 109k 更新。

## 测试#2：

```
REPLACE INTO test (time, count) VALUES
(?, coalesce((SELECT count FROM test WHERE time = ? LIMIT 1) + 1, 1)); 
```

达到每秒约 120k 更新的峰值。

* * *

我也尝试过`PRAGMA temp_store = FILE;`，更新下降了约 1-2k 每秒。

* * *

对于事务中的 7M 更新，`journal_mode=WAL`它比其他所有更新都慢。

* * *

我用 35,839,987 条记录填充了一个数据库，现在我的设置每批 65521 更新需要近 4 秒 - 但是，它甚至没有达到 16 MB 的内存消耗。

* * *

好的，这是另一个：

> **INTEGER PRIMARY KEY 列上的索引（不要这样做）**
> 
> 当您使用 INTEGER PRIMARY KEY 创建列时，SQLite 使用该列作为表结构的键（索引）。这是此列上的隐藏索引（因为它未显示在 SQLite_Master 表中）。不需要在列上添加另一个索引，也永远不会使用。此外，它还会降低 INSERT、DELETE 和 UPDATE 操作的速度。

您似乎将您的 PK 定义为 NOT NULL + UNIQUE。PK 隐含地是唯一的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-06T21:13:24.130

假设一个事务中的所有操作都分布在整个表中，因此需要访问表的所有页，那么工作集的大小为：

*   大约 1 GB 用于表的数据，加上
*   列上的索引大约 1 GB `main`，加上
*   大约 1 GB 用于事务中更改的所有表页面的原始数据（可能全部）。

* * *

`count`您可以尝试通过将列移动到单独的表中来减少每个操作更改的数据量：

```
CREATE TABLE main_lookup(main TEXT NOT NULL UNIQUE, rowid INTEGER PRIMARY KEY);
CREATE TABLE counters(rowid INTEGER PRIMARY KEY, count INTEGER DEFAULT 0); 
```

然后，对于每个操作：

```
SELECT rowid FROM main_lookup WHERE main = @SEQ;
if not exists:
    INSERT INTO main_lookup(main) VALUES(@SEQ);
    --read the inserted rowid
    INSERT INTO counters VALUES(@rowid, 0);
UPDATE counters SET count=count+1 WHERE rowid = @rowid; 
```

[在 C 中，使用sqlite3_last_insert_rowid](http://www.sqlite.org/c3ref/last_insert_rowid.html)`rowid`读取插入的内容。

做一个单独的`SELECT`并且`INSERT`不比`INSERT OR IGNORE`; SQLite 在这两种情况下都做同样的工作。

仅当大多数操作更新已存在的计数器时，此优化才有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T11:41:48.597

本着头脑风暴的精神，我将冒险回答。我没有像这个家伙做过任何测试：

[提高 SQLite 的每秒插入性能？](https://stackoverflow.com/questions/1711631/how-do-i-improve-the-performance-of-sqlite)

我的假设是文本主键上的索引可能比两个整数列上的几个索引更占用 RAM（您需要模拟哈希表）。

编辑：实际上，您甚至不需要主键：

```
 create table foo( slot integer, myval text, occurrences int);
      create index ix_foo on foo(slot);  // not a unique index 
```

整数主键（或插槽上的非唯一索引）将使您无法快速确定您的文本值是否已在文件中。因此，为了满足该要求，您可以尝试实现我向另一张海报提出的建议，模拟散列键：

[数百万条目的 SQLite 优化？](https://stackoverflow.com/questions/3807117/sqlite-optimization-for-millions-of-entries/3807246#3807246)

散列键函数将允许您确定文本值是否存在时的存储位置。

[http://www.cs.princeton.edu/courses/archive/fall08/cos521/hash.pdf](http://www.cs.princeton.edu/courses/archive/fall08/cos521/hash.pdf) [http://www.fearme.com/misc/alg/node28.html](http://www.fearme.com/misc/alg/node28.html) [http://cs.mwsu.edu/ ~griffin/courses/2133/downloads/Spring11/p677-pearson.pdf](http://cs.mwsu.edu/~griffin/courses/2133/downloads/Spring11/p677-pearson.pdf)

# wpf - WPF 应用程序更改大小

> ID：15255410
> 
> 赞同：2
> 
> 时间：2013-03-06T18:41:44.003
> 
> 标签：wpf, visual-studio-2012

所以，这是我第一次在 VS 2012 for windows 桌面上使用 wpf 应用程序。我将一些背景图像放入窗口。我在那个窗口上放了三个文本框和一个按钮。现在我遇到了一个问题，当我启动应用程序并使用鼠标更改窗口大小或全屏显示时，窗口会更改其大小，但文本框和按钮仍保持与以前相同的位置，并且它们并不真正适合那个设计。我希望我足够清楚。感谢您的帮助。

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="768" Width="1366
    ">

<Grid RenderTransformOrigin="0.495,0.498" Margin="0,10,0,0">
    <Grid.Background>
        <ImageBrush ImageSource="slike/education_board.jpg"/>
    </Grid.Background>
    <Grid HorizontalAlignment="Left" Height="209" Margin="209,211,0,0"        VerticalAlignment="Top" Width="396">

    <TextBox x:Name="tockeMaturaTextBox" HorizontalAlignment="Left" Height="23" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Bottom" Width="120" TextChanged="TextBox_TextChanged_1" IsManipulationEnabled="True" Margin="10,0,0,176"/>
    <TextBox x:Name="tretjiLetnikTextBox" HorizontalAlignment="Left" Height="23" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Top" Width="120" RenderTransformOrigin="0.899,3.574" Margin="10,63,0,0"/>
    <TextBox x:Name="cetrtiLetnikTextBox" HorizontalAlignment="Left" Height="23" Margin="10,115,0,0" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Top" Width="120"/>
    <Button x:Name="button" Content="Button" HorizontalAlignment="Left" Margin="361,224,0,0" VerticalAlignment="Top" Width="75" Click="button_Click"/>
    <TextBlock x:Name="skupneTockeTextBlock" HorizontalAlignment="Left" Margin="323,133,0,0" TextWrapping="Wrap" Text="TextBlock" VerticalAlignment="Top"      RenderTransformOrigin="-0.375,0.338" Height="73" Width="113"/>

    </Grid>
</Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T19:09:06.257

试试下面的 XAML：

```
 <Grid Margin="0,10,0,0">
        <Grid.RowDefinitions>
            <RowDefinition Height="211"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <Grid.Background>
            <ImageBrush ImageSource="slike/education_board.jpg"/>
        </Grid.Background>
        <StackPanel Grid.Row="1" Grid.Column="1" >

            <TextBox x:Name="tockeMaturaTextBox" Margin="0,5" HorizontalAlignment="Left" Height="23" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Bottom" Width="120" TextChanged="TextBox_TextChanged_1" IsManipulationEnabled="True" />
            <TextBox x:Name="tretjiLetnikTextBox" Margin="0,5" HorizontalAlignment="Left" Height="23" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Top" Width="120" />
            <TextBox x:Name="cetrtiLetnikTextBox" Margin="0,5" HorizontalAlignment="Left" Height="23" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Top" Width="120"/>
            <Button x:Name="button" Margin="5" Content="Button" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="75" Click="button_Click"/>
            <TextBlock x:Name="skupneTockeTextBlock" Margin="5" HorizontalAlignment="Left"  TextWrapping="Wrap" Text="TextBlock" VerticalAlignment="Top"       Height="73" Width="113"/>

        </StackPanel>
    </Grid> 
```

WPF 使用基于容器的（相对）布局系统。通过相对于父网格精确定义它们的边距，您将文本框放置在绝对位置。在上面的示例中，它们被放置在`StackPanel`网格内的 a 中。

有了所有额外的边距和绝对宽度和高度，很难说出你想要的最终结果，但上面的 XMAL 应该会让你接近。您可以更改网格行和列的相对大小以获得所需的内容；或完全重新定义`Grid`.

我认为关于 WPF 的一个很好的教程是为了掌握基本概念： [Silverlight/WPF 简介](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2011/DEV209)。这有点面向 Silverlight，但布局原则与 WPF 相同。视频中的实际训练从 8 点 17 分开始。

**编辑** 对于神奇的扩展和收缩内容，使用下面的代码：

```
 <Grid Margin="0,10,0,0">
        <Grid.RowDefinitions>
            <RowDefinition Height="1*"/>
            <RowDefinition Height="1*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>
        <Grid.Background>
            <ImageBrush ImageSource="slike/education_board.jpg"/>
        </Grid.Background>
        <Viewbox Grid.Row="1" Grid.Column="1" >
            <StackPanel>
                <TextBox x:Name="tockeMaturaTextBox" Margin="0,5" HorizontalAlignment="Left" Height="23" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Bottom" Width="120" TextChanged="TextBox_TextChanged_1" IsManipulationEnabled="True" />
                <TextBox x:Name="tretjiLetnikTextBox" Margin="0,5" HorizontalAlignment="Left" Height="23" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Top" Width="120" />
                <TextBox x:Name="cetrtiLetnikTextBox" Margin="0,5" HorizontalAlignment="Left" Height="23" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Top" Width="120"/>
                <Button x:Name="button" Margin="5" Content="Button" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="75" Click="button_Click"/>
                <TextBlock x:Name="skupneTockeTextBlock" Margin="5" HorizontalAlignment="Left"  TextWrapping="Wrap" Text="TextBlock" VerticalAlignment="Top"       Height="73" Width="113"/>
            </StackPanel>
        </Viewbox>
    </Grid> 
```

# php - 如何从一个mysql表中获取数据到另一个表的html echo

> ID：15255412
> 
> 赞同：0
> 
> 时间：2013-03-06T18:41:52.070
> 
> 标签：php, mysql

我有一个 php，它从一个数据库表中创建页面中的东西列表，我有另一个表，其中所有存储的评级都在其中，我需要将这些评级添加到那个东西列表中。两个表的排序方式不同，但都有相同的列，称为 id 所以我想我可以以某种方式对齐这些评级以适应它所属的位置。

获得评级的php：

```
$result = mysql_query("SELECT *,CAST((user_votes+visitor_votes)/(user_voters+visitor_voters) AS BINARY(4)) AS total FROM wp_gdsr_data_article");;

while($row = mysql_fetch_array($result))
  {
  echo $row['total'];?></br><?php
  } 
```

创建东西列表的php：

```
$result = mysql_query("SELECT * , DATEDIFF( CURRENT_DATE, founded ) as date_difference FROM business");

while($row = mysql_fetch_array($result))
  {
 ?><li class="onebusiness <?php echo $row['category'];?> <?php echo $row['status'];?>"><a href="<?php
  echo $row['link'];?>"><img src="<?php
  echo $row['img'];?>" /><p class="name"><?php
  echo $row['name'];?></p></a><p class="age">Age: <?php
  echo $row['date_difference']?> days</p><span class="status<?php
  echo $row['status']?>"></span></li><?php
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:15:52.330

```
SELECT table2.column FROM table2 INNER JOIN table1 ON table2.id = table1.id 
```

# ios - xcode 在没有设备的情况下进行临时构建

> ID：15255413
> 
> 赞同：1
> 
> 时间：2013-03-06T18:42:01.990
> 
> 标签：ios, xcode

我目前没有任何设备。

我需要进行临时构建，以将其发送给拥有该设备的测试人员。

但是要进行构建/存档，我需要一个设备。连接的

有什么方法可以在不连接任何设备的情况下制作存档 IPA。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T18:42:54.300

您无需将设备连接到存档。只需将方案目标弹出窗口设置为“iOS 设备”并正常存档即可。

# php - 使用 Javascript 进行 PHP 更新

> ID：15255417
> 
> 赞同：0
> 
> 时间：2013-03-06T18:42:33.423
> 
> 标签：php, javascript, ajax

我有我的 php 文件，其中包含我更新数据库的方法。但是，在 Javascript 中，我如何让它每 5 秒说一次它“访问”这个页面，以便它的内容得到更新。

这是我的 update.php 文件：

```
<?php include('config.php') ?>

<?php
mysql_query("UPDATE paint SET paint_points='test'") or die(mysql_error());
echo "Updated";
?> 
```

抱歉，我不熟悉术语。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:45:15.250

`setInterval`在javascript中每5秒使用一次（a）jax请求的函数：

```
//syncronized jax:
function myjax() {
    var oXhr = new XMLHttpRequest();
    oXhr.open("POST", "yourphp.php", false);
    oXhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded; charset=utf-8");
    oXhr.send(null);
}

//set an interval each 5 seconds to call your myjax method
setInterval(function() { myjax(); }, 5000); 
```

在此示例中，请求是同步的，但如果您愿意，它也可以是异步的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:45:30.687

最简单的情况是重新加载页面：

```
<script type="text/javascript">
 setInterval(function() { location.reload(true); }, 5000);
</script> 
```

如果您使用 ajax 调用来获取页面，您会变得更有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:47:27.843

使用 jQuery：

```
(function() {
    var updateAgain = arguments.callee;
    $.get('/url/to/script.php', function() {
        setTimeout(updateAgain, 5000);
    });
})(); 
```

这样做的好处`setInterval`是在请求完成之前它不会开始计数到五秒；如果请求花费的时间超过一两秒，这一点很重要。如果请求失败（这可能是也可能不是优势），它也会停止。

# actionscript-3 - Flash - 在 TLFTextField 上设置最大行数

> ID：15255421
> 
> 赞同：1
> 
> 时间：2013-03-06T18:42:48.997
> 
> 标签：actionscript-3, flash, tlf

可以设置在 TLFTextField 上显示的最大行数吗？所以我有一个文本，我不想在整个文本中显示，只有前 3 行可见。我该如何配置？

这是我还没有的：

```
 var myTLFTextField:TLFTextField = new TLFTextField();
         addChild(myTLFTextField); 
         myTLFTextField.x = 0;
         myTLFTextField.y = 0;
         myTLFTextField.width = _width
         myTLFTextField.height = 100;
         myTLFTextField.multiline = true;
         myTLFTextField.wordWrap = true;

         var myFormat:TextLayoutFormat = new TextLayoutFormat();
         myFormat.color = 0x336633;
         myFormat.fontFamily = "Arial, Helvetica, _sans";
         myFormat.fontSize = 24;
         myFormat.textAlign = TextAlign.LEFT;

        var textFlow:TextFlow = myTLFTextField.textFlow;
        var p:ParagraphElement = new ParagraphElement();
        var span1:SpanElement = new SpanElement();
        var span2:SpanElement = new SpanElement();
        var inlineGraphicElement:InlineGraphicElement = new InlineGraphicElement();
        var textLayoutFormat:TextLayoutFormat = new TextLayoutFormat();

        //Add graph
        inlineGraphicElement.source = drwCircle();
        inlineGraphicElement.float = Float.LEFT;

        //Add Text to the spans
        span1.text = "You can draw a happy face here ";
        span2.text = "if you like.as asdfads ad fas fadsf f asdfsdf asd sdafas dff asd adsf adsf adsf asf sadf asdf dfghjf  j  fhj fgffg hgfhj fg fgj fg jkb asdljk ljka jlkj asdjfh lajsdfh sd sdf asdfasd fdas asd fa sdfadsf asd adsf ad fadsf adsf ads fads fads f adsf asdf ";
        p.fontSize = 16;
        p.addChild(inlineGraphicElement);
        p.addChild(span1);
        p.addChild(span2);

        // Add Paragraph to text flow and update controller to display
        textFlow.addChild(p);
        textFlow.hostFormat = myFormat;
        textFlow.flowComposer.updateAllControllers(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:45:27.810

幸运的是，使用[TLFTextfield](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/text/TLFTextField.html)我们有文本和`paddingTop`像素之类的属性。还知道文本字段中的文本总数，我们可以计算出我们想要显示的行数**需要多少像素高度。**`paddingBottom``textHeight``numLines`

 **编辑：我注意到对于文本字段的一些相当*小*的宽度，该`numLines`属性不保持预期值......我不知道这是否可能是一个 BUG，但在计算之前阅读它似乎可以解决它。

试试这个（把这些行放在你所有的代码之后）：

```
//Pre read numLines property :(
myTLFTextField.numLines;

//how many lines you want to show
var numLines:uint = 3;

//set textfield height to the proportion between the total lines of text and
//the number of lines to show, taking into account the paddings of text
myTLFTextField.height = myTLFTextField.paddingTop + 
                        myTLFTextField.paddingBottom + 
                        (myTLFTextField.textHeight*(numLines+1)/myTLFTextField.numLines); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:45:24.987

您可以用另一个剪辑遮盖该区域以隐藏溢出的文本。**

# java - 自定义杰克逊对象映射器

> ID：15255427
> 
> 赞同：2
> 
> 时间：2013-03-06T18:43:03.750
> 
> 标签：java, json, jackson

我有一个用例，我需要维护两组 JSON 输出，一组带有漂亮的 JSON 属性名称，另一组没有。所以我决定自定义我的 ObjectMapper 以便它忽略字段上的 @JsonProperty("pretty name") 注释并使用字段属性名称。在这种情况下想要以下 JSON 输出

```
{"result":{"data":[{"totalUsers":12345,"totalBooks":883}]}} 
```

具有漂亮名称的 JSON 输出如下所示

```
{"result":{"data":[{"Total Users":12345,"Total Books":883}]}} 
```

我的 ObjectMapper 配置代码看起来像

```
ObjectMapper mapper = new ObjectMapper();
mapper.setSerializationInclusion(Include.NON_EMPTY);
mapper.setSerializationInclusion(Include.NON_NULL);
mapper.configure(MapperFeature.USE_WRAPPER_NAME_AS_PROPERTY_NAME, true);
mapper.configure(SerializationFeature.WRAP_ROOT_VALUE, true);
mapper.configure(MapperFeature.USE_ANNOTATIONS, false);
mapper.setVisibility(PropertyAccessor.FIELD, Visibility.NONE)
        .setVisibility(PropertyAccessor.GETTER, Visibility.ANY); 
```

我查看了其他一些对我不起作用的 SO 答案。我得到一个NPE。请参阅以下堆栈跟踪

```
java.lang.NullPointerException
at com.fasterxml.jackson.databind.introspect.POJOPropertiesCollector._renameWithWrappers(POJOPropertiesCollector.java:728)
at com.fasterxml.jackson.databind.introspect.POJOPropertiesCollector.collect(POJOPropertiesCollector.java:264)
at com.fasterxml.jackson.databind.introspect.BasicClassIntrospector.collectProperties(BasicClassIntrospector.java:142)
at com.fasterxml.jackson.databind.introspect.BasicClassIntrospector.forSerialization(BasicClassIntrospector.java:68)
at com.fasterxml.jackson.databind.introspect.BasicClassIntrospector.forSerialization(BasicClassIntrospector.java:11)
at com.fasterxml.jackson.databind.SerializationConfig.introspect(SerializationConfig.java:490)
at com.fasterxml.jackson.databind.ser.BeanSerializerFactory.createSerializer(BeanSerializerFactory.java:131)
at com.fasterxml.jackson.databind.ser.SerializerFactory.createSerializer(SerializerFactory.java:53)
at com.fasterxml.jackson.databind.SerializerProvider._createUntypedSerializer(SerializerProvider.java:935)
at com.fasterxml.jackson.databind.SerializerProvider._createAndCacheUntypedSerializer(SerializerProvider.java:892)
at com.fasterxml.jackson.databind.SerializerProvider.findValueSerializer(SerializerProvider.java:429)
at com.fasterxml.jackson.databind.SerializerProvider.findTypedValueSerializer(SerializerProvider.java:520)
at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:99)
at com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:457)
at com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider.writeTo(JacksonJsonProvider.java:583)
at org.apache.cxf.jaxrs.utils.JAXRSUtils.writeMessageBody(JAXRSUtils.java:1173)
at org.apache.cxf.jaxrs.interceptor.JAXRSOutInterceptor.serializeMessage(JAXRSOutInterceptor.java:259)
at org.apache.cxf.jaxrs.interceptor.JAXRSOutInterceptor.processResponse(JAXRSOutInterceptor.java:155)
at org.apache.cxf.jaxrs.interceptor.JAXRSOutInterceptor.handleMessage(JAXRSOutInterceptor.java:86)
at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)
at org.apache.cxf.interceptor.OutgoingChainInterceptor.handleMessage(OutgoingChainInterceptor.java:77)
at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)
at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:238)
at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:222)
at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:163)
at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:137)
at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:158)
at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:239)
at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doGet(AbstractHTTPServlet.java:164) 
```

问题出在这行代码中

```
com.fasterxml.jackson.databind.introspect.POJOPropertiesCollector._renameWithWrappers(POJOPropertiesCollector.java:728) 
```

其中 _annotationIntrospector 为空

```
PropertyName wrapperName = _annotationIntrospector.findWrapperName(member); 
```

不太疼我应该怎么做才能实现我的目标。有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T15:43:04.633

使用 mixins 为您的用例提供解决方案的小示例：

```
class Data {
    int totalUsers;
    int totalBooks;
} 
```

…</p>

```
class DataMixin {
    @JsonProperty("Total Users")
    int totalUsers;
    @JsonProperty("Total Books")
    int totalBooks;
} 
```

…</p>

**Jackson 2.0 - 2.4**（在 2.5 中已弃用）

```
ObjectMapper mapper = new ObjectMapper();
if (pretty) {
    mapper.addMixInAnnotations(Data.class, DataMixin.class);
} 
```

**杰克逊 2.5+**

```
ObjectMapper mapper = new ObjectMapper();
if (pretty) {
    mapper.addMixin(Data.class, DataMixin.class);
} 
```

# jquery - 什么时候应该在 DurandalJS 中调用 jQueryUI 装饰函数？

> ID：15255447
> 
> 赞同：2
> 
> 时间：2013-03-06T18:44:06.937
> 
> 标签：jquery, jquery-ui, durandal

在 viewmodel.js 文件中，我想在文本框上绑定一个日期选择器。

这是代码

```
define([
    'jquery',
    'durandal/app',
    'services/logger',
    'jqueryui'
    ],
function ($, app, logger, jqueryui) {
function activate() {
    if (!Modernizr.inputtypes.date) {
    $('input[type=date]').datepicker({
            dateFormat: 'mm/dd/yyyy'
        });
    }
    return true;
};
var vm = {
    activate: activate
};

return vm;
}); 
```

看来 jquery 和 jqueryui 从未被调用过。我的代码有什么问题？`activate()`我应该在该部分或其他地方启动 jQuery 和 jQuery UI 方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:27:50.230

找到了解决方案。

我应该将 jQuery 相关语句放在`viewAttached`函数下。

```
function viewAttached() {
    if (!Modernizr.inputtypes.date) {
        $('input[type=date]').datepicker();
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T11:35:16.607

尽管您的方法可行，但这并不是更好的方法。

更好的方法是进行自定义绑定（[http://knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)）。如果您不想手动进行绑定，那么有一个库（我不使用它，所以我不知道它们是否工作良好）具有 jqueryui 的绑定：http: [//gvas.github.com /knockout-jqueryui/index.html](http://gvas.github.com/knockout-jqueryui/index.html)

无论如何，您的示例的绑定将类似于：

```
ko.bindingHandlers.datepicker = {
    init: function (element, valueAccessor, allBindingsAccessor) {
        //initialize datepicker with some optional options
        var options = allBindingsAccessor().datepickerOptions || {},
            $element = $(element),
            $btn = $("<button class='btn' type='button'><i class='icon-calendar'></i></button>");
        $element.datepicker(options);
        $element.prop("readonly", true);
        $element.wrap("<div class='input-append' />");
        $element.after($btn);

        $btn.click(function () {
            $element.datepicker("show");
        });

        //handle the field changing
        ko.utils.registerEventHandler(element, "change", function () {
            var observable = valueAccessor(),
                current = $(element).datepicker("getDate");
            observable(current);
        });

        //handle disposal (if KO removes by the template binding)
        ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
            $(element).datepicker("destroy");
        });

    },
    update: function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor()),
            current = $(element).datepicker("getDate");

        if (value - current !== 0) {
            $(element).datepicker("setDate", value);
        }
    }
}; 
```

在视图中：

```
<input type="text" id="yourid" data-bind="datepicker: yourobservable, datepickerOptions:{}" /> 
```

# ruby-on-rails - NameError（未初始化的常量 OrdersController::AdressesPacks）HABTM 关系

> ID：15255452
> 
> 赞同：0
> 
> 时间：2013-03-06T18:44:21.940
> 
> 标签：ruby-on-rails, ruby, activerecord

我在我的模型中创建了一个 has_and_belongs_to_many 关联：

包.rb

```
 has_and_belongs_to_many :adresses 
```

地址.rb

```
 has_and_belongs_to_many :packs 
```

在我的控制器中，我将其用于创建 habtm ：

```
 @adress = AdressesPacks.create(:adress_id => params[:order],:pack_id => params[:order]) 
```

但是当我执行我得到这个错误

```
NameError (uninitialized constant OrdersController::AdressesPacks): 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:54:03.877

通常在 HABTM 关系中，不需要与包含连接数据的表进行交互。要将现有包添加到现有地址：

```
@adress = Adress.find(params[:order])
@adress.packs << Pack.find(params[:order]) 
```

如果您不需要 Adress 实例，则可以将上述内容简化为一行：

```
Adress.find(params[:order]).packs << Pack.find(params[:order]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:46:46.570

如果您使用 HABTM，则您没有连接模型。换句话说，没有`AdressesPacks`-model，至少只要你没有自己创建它。

相反，您可以通过执行以下操作来创建关系：

```
@adress.packs << @pack 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T12:09:31.240

对我来说，`uninitialized constant`发生错误是因为我的 HABTM 关系中的一个模型在初始化时给出了运行时错误。我修复了运行时错误（显然`attr_accessible`在 Rails 4 中不能开箱即用），它也解决了`uninitialized constant`错误。

# cname - 无法使用 CNAME 将我的主域重定向到 herokuapp 域

> ID：15255457
> 
> 赞同：1
> 
> 时间：2013-03-06T18:44:52.860
> 
> 标签：cname

我想将我现有的域重定向到heroku应用程序，所以我为此创建了一个heroku应用程序，当我试图在保存后更改`CNAME(Alias)`为时`mydomain.herokuapp.com`，我看到一个尾随`DOT`符号放在我的heroku链接后面，它看起来像这样：`mydomain.herokuapp.com.` 所以当我在浏览器中输入我的主域我得到：*“没有找到这样的应用程序”*消息，因为它重定向到`mydomain.herokuapp.com.`地址。

表示我无法删除`.`（尾随点），我的域名注册者是 enom，我通过 Google 市场购买了域名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-12T07:52:19.430

请参阅[http://www.enom.com/help/configHelp.htm](http://www.enom.com/help/configHelp.htm)

如果您没有尾随点，DNS 将自动附加您的域名。

因此，如果您拥有`example.com`并且您的 CNAME`www`到`mydomain.heroku.com`，它会尝试将您发送到`mydomain.heroku.com.example.com`.

但是如果你把它命名为`mydomain.heroku.com.`，它实际上会指向`mydomain.heroku.com`你想要的。

# java - Jframe在另一台计算机上加载时不显示所有内容

> ID：15255467
> 
> 赞同：1
> 
> 时间：2013-03-06T18:45:18.383
> 
> 标签：java, swing, grouplayout

我正在使用 GroupLayout 来编写我的 GUI 应用程序。我遇到的问题是：

1）我的电脑分辨率是1490 * 900。当我运行GUI时，所有内容都清晰地显示出来。

2）现在在我的笔记本电脑上（分辨率为 1366 * 768），当我运行相同的 GUI 时，没有显示所有内容，我试图调整它的大小，但徒劳无功。

**如何使所有内容都适合我笔记本电脑的 GUI？**

GUI 代码太长，只显示主要部分：

```
static Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
static int width = (int) screenSize.getWidth();//Get Resolution of Screen
static int height = (int) screenSize.getHeight();

public Menu_Modifications_Single() {
     setIconImage(Toolkit.getDefaultToolkit().getImage(Menu_Modifications_Single.class.getResource("/Images/bug-red.png")));
    setTitle("Automated Bug Processing");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, width,height);//Get Screen Resolution Of Monitor Automatically
    setResizable(true);

    setExtendedState(JFrame.MAXIMIZED_BOTH);//Automatically Maximize JFrame Upon Loading 
```

我尝试了 pack() 但它似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:59:45.940

尝试使用`pack()`，但在将所有组件添加到框架之后。然后使用`setSize`or`setBounds`方法。因此，首先添加所有组件，然后调用`pack()`，最后设置大小。看看这是否有效。

编辑：

```
Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
setBounds(0,0,screenSize.width, screenSize.height); 
```

# c++ - VS 报告变量周围的堆栈已损坏

> ID：15255468
> 
> 赞同：0
> 
> 时间：2013-03-06T18:45:20.943
> 
> 标签：c++, visual-studio-2010, runtime-error

我的平台是 Windows 7 x64。这段代码：

```
#include <iostream>
#include <string>
#include <stdint.h>
#include <sstream>
using namespace std;

int main()
{

    string line;
    int c = 3;

    while(c-- && getline(cin, line))
    {
        stringstream sstr;
        sstr << line;

        uint32_t data;

        int r = sscanf(sstr.str().c_str(), "%d", &data);

        if (r == 1)
        {
            cout << data << endl;
        }
    }

    return 0;

} 
```

将整数作为输入，打印它们并正常存在。如果我将类型更改`data`为`uint16_t`，那么就在从 main() 函数返回之前，VS 2010 会抛出一个错误：

**运行时检查失败 #2 - 变量“数据”周围的堆栈已损坏**

我想知道为什么VS 2010如此生气`uint16_t`？有什么解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:48:22.820

可能是因为`%d`指的是 32 位值。尝试`%hd`16 位值。

# c - 交叉编译应用程序和 gcc 使用标头错误标头

> ID：15255471
> 
> 赞同：1
> 
> 时间：2013-03-06T18:45:31.397
> 
> 标签：c, linux, gcc, cross-compiling

我正在尝试使用 x86-64 Ubuntu 上的工具链交叉编译 arm7 板。我需要的头文件在这里的文件系统上：

```
.../include/<libdir1>
.../include/<libdir2>
[more]
.../include/<libdirN> 
```

但是 .../include 目录包含不兼容的标准头文件（出于我无法控制的原因）。使用 -I 选项会导致 gcc 使用这些不兼容的标准头文件而不是它应该使用的头文件。在此之前使用 -I 选项包括所有兼容的标准标头路径也不起作用。

我想在本地编译和 arm7 板时使用相同的源路径：

```
#include <libdir1/lib1.h>
#include <libdir2/lib2.h>
...
#include <libdirN/libN.h> 
```

有没有办法使用当前存在的文件系统来执行此操作，或者我是否需要将 lib1、lib2、... libN 头文件完全复制到其他地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:50:29.023

您可以为此使用[-iquote](http://gcc.gnu.org/onlinedocs/gcc/Directory-Options.html)选项：

> 仅在#include '的情况下将目录dir添加到要搜索头文件的目录列表的头部`#include "file"'; they are not searched for`，否则就像-I一样。

因此，您将使用`""`样式包含指令包含自定义标头：

```
#include "libdir1/lib1.h"
#include "libdir2/lib2.h" 
```

`<>`但是带有样式的标准标题：

```
#include <stdlib.h> 
```

`-iquote`然后使用而不是添加目录`-I`：

```
-iquote../include 
```

# c# - 对 PInvoke 的调用使堆栈不平衡...即使使用 Cdecl，dll 导入也会失败

> ID：15255474
> 
> 赞同：3
> 
> 时间：2013-03-06T18:45:52.430
> 
> 标签：c#, .net-4.0, dllimport

啊哈，这个问题完全是堆栈溢出，所以我已经开始添加 CallingConvention = CallingConvention.Cdecl 这对于我必须导入的其他库来说效果很好，但在这种情况下，没有任何变化，它仍然失败同样错误信息。

原始代码来自 .net 3.5 项目，并且运行良好：

```
[DllImport("Compiled DSP.dll")]
private static extern int fnGetConfigParam(int nID, ref stParamInt pstParam);

[DllImport("Compiled DSP.dll")]
private static extern int fnGetConfigParam(int nID, ref stParamFloat pstParam); 
```

新项目是一个 .net 4.0 项目，它试图调用同一个库。我已经添加了调用约定：

```
[DllImport("Compiled DSP.dll", CallingConvention = CallingConvention.Cdecl)]
private static extern int fnGetConfigParam(int nID, ref stParamInt pstParam);

[DllImport("Compiled DSP.dll", CallingConvention = CallingConvention.Cdecl)]
private static extern int fnGetConfigParam(int nID, ref stParamFloat pstParam); 
```

两种 ref 类型都是结构。当我尝试运行与 3.5 项目调用此函数的相同代码时，我收到 PInvoke 错误，即使我将调用更改为 StdCall（如预期的那样）我也会收到相同的错误。

有什么想法吗？我猜这个结构会以某种方式干扰，但使用这样的导入对我来说不是一项常见的任务，所以这是一个盲目的猜测。是时候询问谷歌并深入了解这里了。

***编辑***：如果这很有用，这里是作为参考传递的两个结构：

stParamInt：

```
 [StructLayout(LayoutKind.Sequential, Pack = 1)]
    private struct stParamInt           
    {
        public uint unID;
        public int nValue;
        public int nValueMin;
        public int nValueMax;
        public int nValueDef;
        public int nUnitsType;
        public int nUnits;

        public byte[] GetBytes()
        {
            byte[] result = new byte[0];
            List<byte> buf = new List<byte>();
            buf.AddRange(BitConverter.GetBytes(unID));
            buf.AddRange(BitConverter.GetBytes(nValue));
            buf.AddRange(BitConverter.GetBytes(nValueMin));
            buf.AddRange(BitConverter.GetBytes(nValueMax));
            buf.AddRange(BitConverter.GetBytes(nValueDef));
            buf.AddRange(BitConverter.GetBytes(nUnitsType));
            buf.AddRange(BitConverter.GetBytes(nUnits));
            result = buf.ToArray();
            return result;
        }

        public stParamInt(byte[] buf)
        {
            unID = BitConverter.ToUInt32(buf, 0);
            nValue = BitConverter.ToInt32(buf, 4);
            nValueMin = BitConverter.ToInt32(buf, 8);
            nValueMax = BitConverter.ToInt32(buf, 12);
            nValueDef = BitConverter.ToInt32(buf, 16);
            nUnitsType = BitConverter.ToInt32(buf, 20);
            nUnits = BitConverter.ToInt32(buf, 24);
        }
    }; 
```

stParamFloat：

```
 [StructLayout(LayoutKind.Sequential, Pack = 1)]
    private struct stParamFloat                 
    {
        public uint unID;
        public float fValue;
        public float fValueMin;
        public float fValueMax;
        public float fValueDef;
        public int nUnitsType;
        public int nUnits;

        public byte[] GetBytes()
        {
            byte[] result = new byte[0];
            List<byte> buf = new List<byte>();
            buf.AddRange(BitConverter.GetBytes(unID));
            buf.AddRange(BitConverter.GetBytes(fValue));
            buf.AddRange(BitConverter.GetBytes(fValueMin));
            buf.AddRange(BitConverter.GetBytes(fValueMax));
            buf.AddRange(BitConverter.GetBytes(fValueDef));
            buf.AddRange(BitConverter.GetBytes(nUnitsType));
            buf.AddRange(BitConverter.GetBytes(nUnits));
            result = buf.ToArray();
            return result;
        }

        public stParamFloat(byte[] buf)
        {
            unID = BitConverter.ToUInt32(buf, 0);
            fValue = BitConverter.ToSingle(buf, 4);
            fValueMin = BitConverter.ToSingle(buf, 8);
            fValueMax = BitConverter.ToSingle(buf, 12);
            fValueDef = BitConverter.ToSingle(buf, 16);
            nUnitsType = BitConverter.ToInt32(buf, 20);
            nUnits = BitConverter.ToInt32(buf, 24);
        }

    }; 
```

***编辑***我设法挖掘出相关 dll 中的签名，它位于 C++ 非托管代码中，具有以下方法签名：

```
COMPILEDDSP_API int fnGetConfigParam(int nID, struct stPint *pstParam)
{
    return CONFIG_GetSetConfigParam(GET_PARAM, nID, pstParam, &g_stActiveCfg, sizeof(struct stActiveConfig)/sizeof(struct stPint), NULL);
} 
```

对我来说不幸的是，我对标准 C++ 函数并不是特别流利，但签名似乎很好。

***编辑***我发现如果我只是从我的 bin 构建并运行它，它就可以很好地工作。如果我尝试通过 Visual Studio 在调试模式下运行，则会失败并出现此 PInvoke 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:03:47.323

看看这些答案

*   [物理磁盘大小不正确 (IoCtlDiskGetDriveGeometry)](https://stackoverflow.com/questions/15051660/physical-disk-size-not-correct-ioctldiskgetdrivegeometry/15073586#15073586)

*   [如何从 C# 将结构作为指针传递给 C dll](https://stackoverflow.com/questions/15197195/how-to-pass-structure-as-pointer-in-c-dll-from-c-sharp/15197411#15197411)

您可以使用 传递`ref`结构`IntPtr`，导入将是

```
[DllImport("Compiled DSP.dll")]
private static extern int fnGetConfigParam(int nID, IntPtr pstParam); 
```

和测试

```
var sizeParamInt=Marshal.SizeOf(typeof(stParamInt));
var marshalParamInt=Marshal.AllocHGlobal(sizeParamInt);
fnGetConfigParam(123, marshalParamInt);
var paramInt=(stParamInt)Marshal.PtrToStructure(marshalParamInt, typeof(stParamInt));
Marshal.FreeHGlobal(marshalParamInt); 
```

请注意，我没有尝试调用约定，您可能需要使用实际代码进行测试。

# regex - 需要一个正则表达式来获取表列下的值

> ID：15255475
> 
> 赞同：-3
> 
> 时间：2013-03-06T18:45:53.047
> 
> 标签：regex

需要一个正则表达式来从下表中获取 Neighbor 和 Up/Down 的值

```
Neighbor V  AS  MsgRcvd MsgSent TblVer  InQ OutQ    Up/Down State/PfxRcd    
87.101.215.1    4   35753   9200    9196    3025    0   0   5d19h   400
172.16.144.113  4   65000   9384    9186    3025    0   0   5d19h   528 
```

预期结果是

```
Neighbor  Up/Down

87.101.215.1 5d19h                 

172.16.144.113  5d19h 
```

需要在这两列下获取任何值。

提前感谢您的帮助。

问候

里亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:38:44.120

...我仍在学习正则表达式，所以我 110% 确定有更好的方法，但我想出了这个似乎可以解决问题的方法：

```
(?<Neighbor>.*?)(?:\s.*?){8}(?<UpDown>.*?)(?:\s.*?)(?:\r\n|\Z) 
```

这取决于`Neighbor`您的第一列并且`Up/Down`是您的第 9 列这一事实。逻辑是：

*   匹配`Neighbor`作为行首直到第一个空格
*   在您的下一个捕获组之前还有 8 个带单词的空格
*   匹配`UpDown`
*   有另一个空格，然后是一组字符，直到行尾或字符串结尾

记得设置`multi-line`

希望这可以帮助。

# asp.net - SQL Server Reporting Services (SSRS) 中的查询

> ID：15255482
> 
> 赞同：0
> 
> 时间：2013-03-06T18:46:11.890
> 
> 标签：asp.net, sql-server, vb.net, reporting-services

我正在 VB.NET 和 ASP.NET 中创建一个 Web 应用程序。

现在我正在开发报告部分。

我已经使用报表查看器控件在 ASP.NET 中导入了一个 SSRS 报表，然后通过查询更改`DataSet`SSRS 报表的

由于我想创建一个通用应用程序（以便我可以在以后的其他项目中轻松使用此过程）我想知道是否可以`[SELECT * FROM TableName]`直接通过报告文件（`.rdlc`）设置查询的第一部分，然后创建 where 子句在 VB.NET 文件中。

你能帮助我吗 ？？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:06:49.317

您现在是否可以通过使用 vb.net 来查询报告 (.rdl) 数据集？

我一直在寻找 CommandText，但我不明白它是如何工作的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:49:16.250

[http://social.msdn.microsoft.com/forums/en-US/sqlreportingservices/thread/b605e504-4031-4f6b-b22a-69e3f866cfae/](http://social.msdn.microsoft.com/forums/en-US/sqlreportingservices/thread/b605e504-4031-4f6b-b22a-69e3f866cfae/)

是的。您可以 - 使用与 WHERE 子句关联的 @parameter_name 值...

# ruby - 如何在我的 linux 服务器上运行 Ruby 代码？

> ID：15255486
> 
> 赞同：0
> 
> 时间：2013-03-06T18:46:14.630
> 
> 标签：ruby, linux

我有一个简单的 GNU/Linux 服务器，它支持[cPanel](http://www.cpanel.net/)和[PHP](http://www.php.net/)。如何在我的服务器上运行 Ruby 代码？它像 PHP 一样工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T18:48:55.233

Linux？Ruby 可能已经安装了。

跑：

```
$ which ruby 
```

要获取有关 ruby​​ 版本的更多详细信息，请执行以下操作：

```
$ ruby --version 
```

您通过以下方式运行 ruby​​ 文件：

```
$ ruby some_ruby_file.rb 
```

如果您确实需要安装，请转到此处：

```
http://www.ruby-lang.org/en/downloads/ 
```

如果你真的需要安装 ruby​​（或者想管理你的 rubies，导致 echo-system 移动得如此之快），你可以安装：

*   RVM [https://rvm.io/](https://rvm.io/)

或者

*   rbenv [https://github.com/sstephenson/rbenv/](https://github.com/sstephenson/rbenv/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T18:49:26.613

Ruby 安装在大多数 Linux 发行版中。但是，如果您要认真工作，[RVM](https://rvm.io/)会更好。直接安装 ruby​​ 不是最好的主意。我建议使用[RVM](https://rvm.io/)来安装和管理您的 Ruby 安装，它可以让多个 ruby​​ 版本在同一台机器上愉快地运行。不，它不像 php 那样工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:49:29.040

不，Ruby 不适用于 PHP。

由于您使用的是 Linux，因此很可能已经安装了 Ruby。要在 Linux 服务器上使用，请执行以下操作：

```
install ruby 
```

您还需要某种版本管理器，例如 Ruby 版本管理器或 RVM，来管理您的程序所需的版本和 gem。

如果您没有使用 Ruby 的经验，您应该阅读并学习一些教程：

这里有几个链接：

[http://ruby.learncodethehardway.org/](http://ruby.learncodethehardway.org/)

[http://www.tutorialspoint.com/ruby](http://www.tutorialspoint.com/ruby)

# jquery - jQuery同位素过滤太慢了

> ID：15255487
> 
> 赞同：-1
> 
> 时间：2013-03-06T18:46:17.430
> 
> 标签：jquery, jquery-isotope

我正在使用带有过滤器的 jQuery isotope 插件来显示大约 70 个项目，并带有过滤选项。我注意到页面加载大约需要 25 秒，即使它加载后它运行良好。有没有办法防止页面加载时间过长？我什至可以等待 25 秒，但加载页面的其余部分，而不是等待这么长时间的空白页面（似乎什么都没有发生）。有人可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:17:45.547

也许您可以先在正文上添加加载 gif 图像。

只需确保在任何 javascript 内容发生之前将其放置在 html 或样式表中，您就应该加载它。

# javascript - 如何从 key:function 中检索 value，与 JavaScript 中的 key:value 相同？

> ID：15255493
> 
> 赞同：0
> 
> 时间：2013-03-06T18:46:38.940
> 
> 标签：javascript, json, function, object-literal

如何以与检索 foo1.x 相同的方式检索 foo2.x？

```
var foo1 = {x: 4};
var foo2 = {x: function(){return addOne(foo1.x);}}

function addOne(var1){return (var1 + 1);}

alert(foo1.x);
alert(foo2.x()); // needs parentheses, but argument is never needed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:48:42.793

看来你想要一个[getter 函数](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects#Defining_getters_and_setters)：

```
var foo1 = {x: 4},
    foo2 = {get x() { return foo1.x + 1; }};

foo2.x; // 5
foo1.x = 0;
foo2.x; // 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:48:33.550

`foo2.x`是一个函数，所以需要加括号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T19:07:22.713

我假设您想将该函数的*结果*`foo2.x`存储在 中，而不是函数本身。

尝试以下操作：

```
function addOne(n) {
    return n + 1;
}

var
foo1 = {
    x: 4
},
foo2 = {
    x: (function () {
        return addOne(foo1.x);
    }())
};

alert(foo1.x); // 4
alert(foo2.x); // 5 
```

我已经`foo2.x`用括号将函数包裹起来，并在它后面放了一对额外的括号来执行它。所以它不再是一个函数，而是函数的结果。

# django - from django.db import utils ImportError: cannot import name utils

> ID：15255496
> 
> 赞同：3
> 
> 时间：2013-03-06T18:46:48.153
> 
> 标签：django

当我尝试从 ConceptNet（来自 conceptnet.models import Concept）导入模块时，我收到了以下错误消息：

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/local/lib/python2.7/dist-packages/conceptnet/models.py", line 2, in <module>
from django.db import models
File "/usr/local/lib/python2.7/dist-packages/django/db/__init__.py", line 40, in     <module>
backend = load_backend(connection.settings_dict['ENGINE'])
File "/usr/local/lib/python2.7/dist-packages/django/db/__init__.py", line 34, in    __getattr__
return getattr(connections[DEFAULT_DB_ALIAS], item)
File "/usr/local/lib/python2.7/dist-packages/django/db/utils.py", line 93, in __getitem__
backend = load_backend(db['ENGINE'])
File "/usr/local/lib/python2.7/dist-packages/django/db/utils.py", line 27, in load_backend
return import_module('.base', backend_name)
File "/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py", line 35, in   import_module
__import__(name)
File "/usr/local/lib/python2.7/dist-packages/django/db/backends/postgresql_psycopg2  /base.py", line 9, in <module>
from django.db import utils
ImportError: cannot import name utils 
```

为了确保这个问题不是由 ConceptNet 中的某些东西引起的，而是由 django.db 引起的，我尝试了 import django.db ，这足以给我同样的错误。有些东西告诉我这里有一些循环：import django.db 设置了一些东西，在某些时候试图从 django.db 导入一些东西。我不知道如何使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-14T09:09:35.323

请参阅：[django 错误 #16136](https://code.djangoproject.com/ticket/16136)

检查您是否使用更新版本的 Django

检查 settings.py 中的数据库配置：

```
DATABASES['default'] =  {
    'ENGINE':   'django.db.backends.postgresql_psycopg2', 
```

检查您的托管服务提供商是否已正确设置您的数据库

# java - 无限加载图像屏幕

> ID：15255497
> 
> 赞同：-1
> 
> 时间：2013-03-06T18:46:49.097
> 
> 标签：java, android

如果已经有人问过这个问题，我深表歉意，但我的代码似乎在某个时候卡住了，只是无限期地试图在我的平板电脑（Nexus 7）裁剪程序上加载图像。我的程序应该允许用户拍照然后裁剪它。从那里我将添加更多，但该部分尚未添加。也许我的问题是我的清单中缺少一行？我去裁剪图像后，Logcat 会弹出一行“V 03-06 13:43:52.296 7349 7349 StateManager destroy”。我正在使用 Eclipse IDE 并使用此站点来帮助制作我的程序的这一部分：http: [//mobile.tutsplus.com/tutorials/android/capture-and-crop-an-image-with-the-device-camera /](http://mobile.tutsplus.com/tutorials/android/capture-and-crop-an-image-with-the-device-camera/)

这是我认为清单中需要的所有内容的片段：

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-feature android:name="android.hardware.camera" android:required="true" />
<uses-feature android:name="android.hardware.camera.autofocus" /> 
```

这是xml，这里应该没有错：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".Scan" >

<Button
    android:id="@+id/capture_btn"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:text="@string/capture" />

<ImageView
    android:id="@+id/picture"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/capture_btn"
    android:layout_centerHorizontal="true"
    android:background="@drawable/pic_border"
    android:contentDescription="@string/picture" />

</RelativeLayout> 
```

最后，这是 .java 文件：

```
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.app.Activity;
import android.content.ActivityNotFoundException;
import android.content.Intent;
import android.graphics.Bitmap;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.Toast;
import android.support.v4.app.NavUtils;

public class Scan extends Activity implements OnClickListener {

//keep track of camera capture intent
final int CAMERA_CAPTURE = 1;
//captured picture uri
private Uri picUri;
//keep track of cropping intent
final int PIC_CROP = 2;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_scan);
    // Show the Up button in the action bar.
    getActionBar().setDisplayHomeAsUpEnabled(true);

    //retrieve a reference to the UI button
    Button captureBtn = (Button)findViewById(R.id.capture_btn);
    //handle button clicks
    captureBtn.setOnClickListener(this);

}

@Override
public void onClick(View v) {
    if (v.getId() == R.id.capture_btn) {
        try {
            //use standard intent to capture an image
            Intent captureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            //we will handle the returned data in onActivityResult
            startActivityForResult(captureIntent, CAMERA_CAPTURE);
        }
        catch(ActivityNotFoundException anfe){
            //display an error message
            String errorMessage = "Whoops! Your device doesn't support image capturing!";
            Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
            toast.show();
        }
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        //user is returning from capturing an image using the camera
        if(requestCode == CAMERA_CAPTURE){
            //get the Uri for the captured image
            picUri = data.getData();
            //carry out the crop operation
            performCrop();
        }
        //user is returning from cropping the image
        else if(requestCode == PIC_CROP){
            //get the returned data
            Bundle extras = data.getExtras();
            //get the cropped bitmap
            Bitmap thePic = extras.getParcelable("data");
            //retrieve a reference to the ImageView
            ImageView picView = (ImageView)findViewById(R.id.picture);
            //display the returned cropped image
            picView.setImageBitmap(thePic);
        }
    }
}

private void performCrop(){
    try {
        //call the standard crop action intent (the user device may not support it)
        Intent cropIntent = new Intent("com.android.camera.action.CROP");
        //indicate image type and Uri
        cropIntent.setDataAndType(picUri, "image/*");
        //set crop properties
        cropIntent.putExtra("crop", "true");
        //indicate aspect of desired crop
        cropIntent.putExtra("aspectX", 1);
        cropIntent.putExtra("aspectY", 1);
        //indicate output X and Y. Edit this line for width and height respectively
        cropIntent.putExtra("outputX", 256);
        cropIntent.putExtra("outputY", 256);
        //retrieve data on return
        cropIntent.putExtra("return-data", true);
        //start the activity - we handle returning in onActivityResult
        startActivityForResult(cropIntent, PIC_CROP);
    }
    catch(ActivityNotFoundException anfe){
        //display an error message
        String errorMessage = "Whoops! Your device doesn't support the cropping!";
        Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
        toast.show();
    }
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        // This ID represents the Home or Up button. In the case of this
        // activity, the Up button is shown. Use NavUtils to allow users
        // to navigate up one level in the application structure. For
        // more details, see the Navigation pattern on Android Design:
        //
        // http://developer.android.com/design/patterns/navigation.html#up-vs-back
        //
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
}

} 
```

请注意，问题在于 picUri 被返回为 null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:04:01.667

在与我父亲交谈后，他是一位编程多年的电气工程师并看过他的一些程序；我对 onActivityResult 进行了一些更改，并添加了解决问题的保存方法。

新的 onActivityResult：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        //user is returning from capturing an image using the camera
        if(requestCode == CAMERA_CAPTURE){
            //save the pic
            try {
                File f = createImageFile();
                //get the Uri for the captured image
                picUri = Uri.fromFile(f);
                //carry out the crop operation
                performCrop();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        //user is returning from cropping the image
        else if(requestCode == PIC_CROP){
            //get the returned data
            Bundle extras = data.getExtras();
            //get the cropped bitmap
            Bitmap thePic = extras.getParcelable("data");
            //retrieve a reference to the ImageView
            ImageView picView = (ImageView)findViewById(R.id.picture);
            //display the returned cropped image
            picView.setImageBitmap(thePic);
        }
    }
} 
```

新的保存方法：

```
private File createImageFile() throws IOException {
    String filename = new String("part");
    File image = File.createTempFile(filename, ".jpeg");
    return image;
} 
```

现在问题在下一部分，裁剪方法，这是一个完全不同的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:40:20.563

检查您传递给作物活动的 picUri 的值。如果我将 null 传递给手机上的裁剪活动，我也会获得无限加载。如果 picUri 为空，请尝试按照此[http://developer.android.com/training/camera/photobasics.html](http://developer.android.com/training/camera/photobasics.html)拍照。他们在那里将输出文件的路径传递给捕获活动。

# multithreading - 使用 WinJS 中的多线程 WinRT 组件

> ID：15255499
> 
> 赞同：1
> 
> 时间：2013-03-06T18:46:59.843
> 
> 标签：multithreading, windows-runtime, windows-store-apps, winjs, iasyncoperation

我有一个使用 C++/CX 编写的 WinRT 组件的 WinJS 应用程序。组件生成一个后台线程，该线程使用一个庞大的遗留线程不安全 C++ 库来封装工作，这要求所有调用都来自同一个线程。

我需要实现一个生产者/消费者模式，其中组件中的后台线程是生产者，而 JavaScript 应用程序中的 UI 线程是消费者。

调用部分很简单，因为 JavaScript 可以调用组件方法（在 UI 线程中），而 C++ 代码会将作业发布到后台线程的队列中。

问题是回调：我需要将 C++ 后台线程计算的数据发布到 UI 线程中。我当然可以将 IAsyncOperation 返回给 JavaScript，但我不希望 UI 线程在此操作等待来自后台线程的事件时被阻塞。

我有哪些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:08:47.643

如果您在 Javascript 端的 C++/CX 中实现 IAsyncOperation，这将公开一个[promise](http://msdn.microsoft.com/en-gb/library/windows/apps/br211867.aspx)。为了不阻塞 UI 线程的 promise 的执行，你可以

*   要么以异步方式实现工作旋转（例如使用 threawds），要么自己管理回调
*   使用围绕 lamda 表达式创建简单包装器的[PPL 库。](http://msdn.microsoft.com/en-us/library/dd492418.aspx)

在使用 PPL 的情况下，您可以使用 concurrency::create_async 将 lambda 转换为在单独线程上执行的 IAsyncOperation，例如：

```
#include <thread>
#include <ppltasks.h>
IAsyncOperation<int64>^ Class1::GetAnswer()
{ 
    return create_async([]() -> int64{
        std::this_thread::sleep_for(std::chrono::seconds(10));
        return 42;
    });
} 
```

在 Javascript 方面，您可以将此 IAsyncOperation 用作承诺 - 无需实际工作挂起 UI 线程：

```
var nativeObject = new CPPComponent.Class1();
  nativeObject.getAnswer().then(function(value){
    // do something with the result
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:08:21.890

解决了。[查看https://docs.microsoft.com/en-us/windows/uwp/winrt-components/walkthrough-creating-a-basic-windows](https://docs.microsoft.com/en-us/windows/uwp/winrt-components/walkthrough-creating-a-basic-windows-runtime-component-in-cpp-and-calling-it-from-javascript-or-csharp)的“添加触发事件的异步方法...”部分[-runtime-component-in-cpp-and-calling-it-from-javascript-or-csharp](https://docs.microsoft.com/en-us/windows/uwp/winrt-components/walkthrough-creating-a-basic-windows-runtime-component-in-cpp-and-calling-it-from-javascript-or-csharp)。

这个想法是组件类声明了一个事件处理程序（委托），它可以在 JavaScript 中设置。C++ 后台线程可以在 UI 线程的上下文中触发事件，因此正确调用 JavaScript 事件处理程序。

当然，这可以很容易地包装到 WinJS.Promise 中，因此 JavaScript 应用程序代码不会知道有组件、事件等。

# javascript - 签名板中的清晰签名

> ID：15255500
> 
> 赞同：0
> 
> 时间：2013-03-06T18:47:05.890
> 
> 标签：javascript, jquery, digital-signature

单击清除按钮后，我希望清除签名板字段。你可以在下面看到我的代码。有什么不对劲。

```
 buttons: [
    {
        text: "Clear",
        click: function() {
            // $('#box-1').dialog('close');return false;
            $("#box-1").addClass("clearButton");
        }
    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:57:12.557

用这个：

```
$("#buttonid").click(function(){
$("#box-1").addClass("clearButton");
}); 
```

# freebsd - 嵌套外部声明警告freebsd内核

> ID：15255503
> 
> 赞同：2
> 
> 时间：2013-03-06T18:47:16.277
> 
> 标签：freebsd, kernel-module, kernel

我正在修改freebsd 内核中的[sched_ule.c](http://www.leidinger.net/FreeBSD/dox/kern/html/dd/d9d/sched__ule_8c_source.html)。要打印调试消息，我正在使用[syslog](http://www.unix.com/man-page/freebsd/3/syslog/)功能。但是在编译过程中，我们收到以下错误：

```
/usr/src/sys/kern/sched_ule.c:731: warning: implicit declaration of 
function 'syslog' /usr/src/sys/kern/sched_ule.c:731: warning: nested

extern declaration of 'syslog' [-Wnested-externs]
*** Error code 1 Stop in /usr/obj/usr/src/sys/MYKERNEL.
*** Error code 1 Stop in /usr/src.
*** Error code 1 Stop in /usr/src. 
```

我还包含了以下头文件： **syslog.h、stdarg.h**并且还尝试过不使用它们进行编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T23:10:40.757

您不能从内核调用 libc 函数（在用户空间中运行）。

请改用[printf(9)](http://www.unix.com/man-page/freebsd/9/printf/)或[log(9)](http://www.unix.com/man-page/freebsd/9/printf/)。

# javascript - jqWidgets选项卡内的jQuery选择下拉菜单未正确呈现

> ID：15255504
> 
> 赞同：0
> 
> 时间：2013-03-06T18:47:18.800
> 
> 标签：javascript, jquery, css, jquery-chosen, jqxwidgets

我在标签内容中使用带有 jQ​​uery Chosen 下拉菜单的 jqWidgets 标签

我遇到的问题是，当我单击打开下拉菜单时，div 在选项卡底部被剪掉 - 我希望下拉菜单的弹出窗口覆盖所有内容并完全显示

请参阅以下基本示例以重现该行为：

[http://jsfiddle.net/mPwWW/](http://jsfiddle.net/mPwWW/)

我怎样才能通过对他们的任何一个样式表进行最少的黑客攻击来解决这个问题？

```
<html>
<div style="width : 500px; height : 180px;">
<div id="tabs">
    <ul>
        <li>Test</li>
    </ul>
    <div>
        <label>Test:</label>
        <select id="target" style="width : 80px"></select>
    </div>  
</div>
</div>
</html>

<script>
$("#tabs").jqxTabs({
        position : 'top',
        animationType : 'fade',
        selectionTracker: true,
        height : '180px'
    });

// the following lines are just for filling the sample dropdown with some values
var html = '';
for (var x = 0; x < 100; x++) {
    html += '<option value="'+x+'">'+x+'</option>';
}
$("#target").html(html);
// apply the chosen library to this dropdown
$("#target").chosen();
</script> 
```

请查看我没有在上面的代码段中复制 document.ready 调用的小提琴代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:02:00.210

问题是 Chosen 下拉列表所在的 div 容器具有设定的高度。因此，如果 Chosen 超出了容器 div 的高度，那么它将被切断。您可以尝试添加到选择的下拉列表中：

```
position: absolute 
```

这样，它将脱离页面的正常流程，换句话说，不受其父容器的高度限制。

# javascript - 获取div类内容html

> ID：15255505
> 
> 赞同：1
> 
> 时间：2013-03-06T18:47:23.017
> 
> 标签：javascript, html, css

如何获取 div class="dpBibHoldingStatement" 的内容？它不能与 getElementByClass 一起使用，因为 html 中有几个相同的类。我无法显示所有代码。

```
<div class="dpBibTitle"> 
    <!-- please read c1063106, c1063117, c1044421, c1060576a before changing title -->
    <a id="recordDisplayLink2Component_0" href="/iii/encore/record/C__Rb4101617__Sapple__P0%2C1__Orightresult__X5?lang=eng&amp;suite=pearl">
                            The Apple experience : the secrets of delivering insanely great customer service</a>
                         / by Carmine Gallo
</div>
<div class="dpBibAuthor">
<!-- author -->
    <a id="authorDisplayLinkComponent_0" href="/iii/encore/search/C__SGallo%2C+Carmine.__Orightresult?lang=eng&amp;suite=pearl">
                        Gallo, Carmine.</a>
</div>
<div class="dpBibHoldingStatement">
    Circulation Collection&nbsp;
    HF5415.5 .G356 2012  &nbsp;
    DUE 10-03-13OFF CAMPUS&nbsp;
    &nbsp;
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T18:48:14.720

给 div 一个 ID 并使用`innerHTML`：

```
 <div id="yourDiv">
     Content
 </div> 
```

然后使用 JavaScript 做：

```
 var contents = document.getElementById("yourDiv").innerHTML;
 alert(contents); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:53:21.900

You can either use `document.getElementsByClassName[n]` to target the (n-1)th element on the page, or you attach an ID to it and use `document.getElementById(id)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:51:36.090

首先，它不是`getElementByClass`。是`getElementsByClassName`。

当您`document.getElementsByClassName("label-key")`在开发者工具的此页面上运行时，它会向您显示一系列`label-key`项目。您可以从该数组中获取所需的任何项目。

# php - 获取百分比关键字显示在表格中

> ID：15255509
> 
> 赞同：0
> 
> 时间：2013-03-06T18:47:52.293
> 
> 标签：php, mysql, sql

我有一个充满推文的数据库表，其中一列是“主题”。当我将推文存储在数据库中时，我会检查是否存在特定的关键字，无论推文匹配哪个，主题都会设置为该词。

> **我正在检查的关键词：**比伯，糟透了
> 
> **推文：**天哪，我爱比伯！
> 
> **存储主题：**比伯
> 
> * * *
> 
> **我正在检查的关键词：**比伯，糟透了
> 
> **推特：**这个真空吸尘器真的很烂！
> 
> **存储主题：**糟透了

在我的网站上，我列出了这些主题在 Twitter 上“声音”的份额。见下文：

![在此处输入图像描述](../Images/719f0589d67914c8916c3e6d26bd7168.png)

这本质上是**(number of tweets with subject = 'KEYWORD HERE') / (total tweets in database)**。

条形图如下所示：

```
<div class="barChart" data-value="2" data-title="eCircle"></div> 
```

我不是完成此任务的最佳 SQL 语句和 PHP。我可以暴力破解它并遍历每个单独的关键字，但我不想对我的数据库进行那么多调用......似乎很浪费。

我可以取回总计数，然后是一个大查询中每个关键字的计数吗？就像它作为数组或其他东西回来一样？

**错误尝试：**

```
<?php
    include 'php/Connect.php';
    $totalTweets = 0;

    $ct = new Connect();
    $con = $ct->connect();
    $sql_query = 
        "SELECT COUNT(*) FROM tweets";
    $res = mysql_query($sql_query, $con);

    if (!$con | !$res) {
        echo "Problems connecting...";
    }

    else {
        mysql_close($con);
        while($row = mysql_fetch_assoc($res)) {
            $totalTweets = $row['count(*)'];
        }
    }

    $sql_query = 
        "SELECT COUNT(*), subject FROM tweets
            WHERE subject = 'KEYWORD HERE'";
    $res = mysql_query($sql_query, $con);

    if (!$con | !$res) {
        echo "Problems connecting...";
    }

    else {
        mysql_close($con);
        while($row = mysql_fetch_assoc($res)) {
            $firstKeyword = $row['subject'];
            $firstKeywordCount = $row['count(*)'];
        }
    }

    echo("<div class='barChart' data-value='".($firstKeywordCount/$totalTweets*100)."' data-title='$firstKeyword'></div>");

    // CONTINUE THIS UNTIL ALL KEYWORDS/SUBJECTS HAVE BEEN DONE
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:59:22.993

你能做2个查询吗？

```
select subject, count(*) as numTweets from tweets group by subject;
select count(*) as totalTweets from tweets; 
```

# c++ - 指向向量和数组指针的指针

> ID：15255515
> 
> 赞同：1
> 
> 时间：2013-03-06T18:48:03.410
> 
> 标签：c++, pointers, vector

我有一个映射将一个字符映射到一个二维规则数组来处理该字符。以下是代码：

```
struct CFG //this struct is data structure to contain a context free grammar
{
   vector<char> *V;
   vector<char> *T;
   map<char,vector<vector<rhs>*>*> *prod;
  // char start;
};

int main()
{
map<char,vector<vector<rhs>*>*> *prod;  //rhs is the type of each cell of the 2-d array
CFG cfg1;
cfg1.V= new vector<char>;

//We imput elements into the V array here......//

cfg1.prod= new map<char,vector<vector<rhs>*>*>;

for(int i=0;i<cfg1.V->size();i++)
 {
    vector<vector<rhs>*>* all_prod_of_one_nonter= new vector<vector<rhs>*>;
    *(cfg1.prod)[*(cfg1.V)[i]]=all_prod_of_one_nonter;  //error occurs here//////
 }
} 
```

在该行中，我标记为“发生错误”，发生以下错误：

```
q1.cpp: In function ‘int main()’:
q1.cpp:93:29: error: no match for ‘operator*’ in ‘**(cfg1.CFG::V + ((unsigned int)(((unsigned int)i) * 12u)))’ 
```

我使用 * 取消引用指针 cfg1.V 以便我可以使用下标表示法来访问数组单元格。如何消除错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:51:09.780

```
(*cfg1.prod)[(*cfg1.V)[i]]=all_prod_of_one_nonter; 
```

（原因：（`operator[]`数组下标）比`operator*`（间接）绑定得更紧密。）

# c++ - 如何使用 DirectX 正确组织 Win32 消息处理？

> ID：15255522
> 
> 赞同：1
> 
> 时间：2013-03-06T18:48:30.157
> 
> 标签：c++, winapi, directx

我目前正在尝试开发一个基于 DirectX 和 Win32 API 的小型渲染引擎。我目前试图解决的问题是如何正确组织我的代码以处理影响 DirectX 代码的 Windows 消息（例如，WM_SIZE 消息，这意味着调整 DirectX 缓冲区的大小）。

它需要在创建窗口时传递给窗口的 WndProc 函数中完成，但我不知道如何“传输”我感兴趣的消息。到目前为止，我只找到了这种方式：

```
//main.cpp
Renderer* renderer;

//some code 

//The window procedure
LRESULT CALLBACK WndProc( HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam )
{
    PAINTSTRUCT ps;
    HDC hdc;

    //We forward the message to the Renderer, which handles it or not
    if(renderer->HandleMessage(hWnd,message,wParam,lParam){
        return 0;
    }

    //If the renderer does not handle the message, we do as usual
    switch( message )
    {
        case WM_PAINT:
            hdc = BeginPaint( hWnd, &ps );
            EndPaint( hWnd, &ps );
            break;

        case WM_DESTROY:
            PostQuitMessage( 0 );
            break;

        default:
            return DefWindowProc( hWnd, message, wParam, lParam );
    }

    return 0;
} 
```

我对这种方法的问题是它依赖于一个全局变量（渲染器），我对此感到不舒服，因为我听说很多使用全局变量不是好的做法（而且我觉得我没有经验足以决定我是否应该使用它）

我想知道是否有更好的方法来“转发”窗口消息而不需要全局变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T19:00:33.007

首先，WM_PAINT 用于 GDI 绘画，而不是 Direct3D 渲染。通常，D3D 应用程序会尽可能渲染帧。

其次，使用`SetWindowLongPtr`将指向渲染器的指针设置为与 HWND 关联的内部 Windows 变量，您可以使用`GetWindowLongPtr`.

第三，你真的应该有一个 Window 类来包装它，然后选择告诉渲染器它，而不是直接交互。

编辑：这是正常的超简单结构：

```
class Window {
    HWND hwnd;
    static ... WindowProc(...) {
        if (auto p = GetWindowLongPtr(hwnd, GWLP_USERDATA))
            return reinterpret_cast<Window*>(p)->ProcessMessage(...);
        else return DefWindowProc(...);
    }
    ... ProcessMessage(...) {
        /* whatever you want */
        if (msg == WM_RESIZE)
            OnResize(...);
    }
public:
    Window() {
        hwnd = CreateWindowEx(...);
        SetWindowLongPtr(hwnd, GWLP_USERDATA, reinterpret_cast<LONG_PTR>(this));
    }
    std::function<void(unsigned, unsigned)> OnResize;
}; 
```

在这种情况下，ProcessMessage() 是一个成员，Window 只提供一个回调，允许任何外部代码挂钩到这个特定事件。

# android - Android USB 设备权限和意图过滤器

> ID：15255524
> 
> 赞同：7
> 
> 时间：2013-03-06T18:48:32.223
> 
> 标签：android, intentfilter, android-permissions, usb

我有一个将与 USB 设备交互的 Android 应用程序，在[Android 开发人员官方文档中获取与设备通信的权限](http://developer.android.com/guide/topics/connectivity/usb/host.html#permission-d)它说：

> **注意**：如果您的应用程序使用意图过滤器在 USB 设备连接时发现它们，如果用户允许您的应用程序处理意图，它会自动获得权限。如果没有，您必须在连接到设备之前在您的应用程序中明确请求权限。

意图过滤器将在 AndroidManifest.xml 中声明，并使用包含供应商 ID 和产品 ID 的资源文件。

如果我插入我的设备，即使声明了 Intent，也不会发生任何事情。所以我必须使用同一官方文档中提到的方法，其中涉及明确请求许可。

这可行，我可以与设备通信，但碰巧用户每次启动应用程序或重新连接设备时都必须授予权限。最后，这将在每次插入设备并启动应用程序时向用户显示一条消息，要求确认，并且每次都给予相同的权限是不可取的。

因此，如果“......自动获得许可......”部分不起作用。

我如何使意图过滤器工作？
我错过了什么？
我还有其他选择吗？

* * *

这个问题：[Android USB Permissions Dialog 从来没有出现](https://stackoverflow.com/questions/14274285/android-usb-permissions-dialog-never-appears)过相反的问题，但该解决方案对我不起作用。
使应用程序成为系统应用程序并绕过权限对我也不起作用，如此处所述：[USB open accessory permissions through a service in android](https://stackoverflow.com/questions/11288788/usb-open-accessory-permissions-through-a-service-in-android)

* * *

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-22T15:48:47.577

我有同样的问题，在使用设备的 Activity 中的 AndroidManifest.xml 中这样写：

```
<intent-filter>
<action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
</intent-filter>
<meta-data
android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED"
android:resource="@xml/device_filter" /> 
```

您还必须在您的 xml 资源中创建一个过滤器文件，例如 res/xml/device_filter：

```
 <?xml version="1.0" encoding="utf-8"?>
    <resources>
    <usb-device vendor-id="26214" product-id="26214" />
    </resources> 
```

此处的供应商 ID 和产品 ID 必须以十进制形式给出 - 上面的 VID 和 PID 都是 0x0123。你看到[USB设备访问弹出抑制了吗？](https://stackoverflow.com/questions/12388914/usb-device-access-pop-up-supression/15151075#15151075)

你不能调用 mManager.requestPermission(device, mPermissionIntent)，所以你必须直接调用 mManager.openDevice(mDevice); 无需出现权限弹窗，即可正常通信。

问候， Samuel Reque samo_reque@hotmail.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:53:36.277

I don't undersand your question well but I think solution is like this..

```
<activity ...>
<intent-filter >
            <action android:name="android.intent.action.MAIN" />                
            <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
            <action android:name="android.hardware.usb.action.USB_DEVICE_DETACHED" />
            <meta-data android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" android:resource="@xml/device_filter"/>
            <category android:name="android.intent.category.HOME" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
</activity> 
```

# mysql - ERROR 1054 mySQL 和日志函数

> ID：15255526
> 
> 赞同：0
> 
> 时间：2013-03-06T18:48:37.017
> 
> 标签：mysql

输入此查询时出现此错误：

```
SELECT E.event, 
       ED.location, 
       ED.doe, 
       ED.category, 
       ( ( ED.numofdataset / ED.numoftimesloc ) * 100 )                    AS 
       LOGLOC, 
       ( ( ED.numofdataset / ED.numoftimesdoe ) * 100 )                    AS 
       LOGDOE, 
       ( ( ED.numofdataset / ED.numoftimescat ) * 100 )                    AS 
       LOGCAT, 
       (( ( ED.numoftimesloc * ( Log(logloc) ) ) + 
           ( ED.numoftimesdoe * ( Log(logdoe) ) ) + ( ED.numoftimescat * 
                                                      ( Log(logcat) ) ) )) AS 
       FINALRANK 
FROM   event E, 
       eventdetail ED 
WHERE  E.eventid = ED.eventid 
       AND ED.location = 'LONDON' 
       AND ED.category = 'Sports' 
ORDER  BY finalrank DESC; 
```

命令控制器告诉我“LOGLOC”是“字段列表”中的未知列。谁能告诉我我做错了什么以及我对 LOG() 函数的使用是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:52:06.590

You can't perform calculations on an aliased column.

Try this:

```
SELECT f.event, 
       f.location, 
       f.doe, 
       f.category, 
       f.logloc, 
       f.logdoe, 
       f.logcat, 
       (( ( f.numoftimesloc * ( Log(f.logloc) ) ) + 
             ( f.numoftimesdoe * ( Log(f.logdoe) ) ) + ( 
           f.numoftimescat * ( Log(f.logcat) ) ) )) AS FINALRANK 
FROM   (SELECT E.event, 
               ED.location, 
               ED.doe, 
               ED.category, 
               ( ( ED.numofdataset / ED.numoftimesloc ) * 100 ) AS LOGLOC, 
               ( ( ED.numofdataset / ED.numoftimesdoe ) * 100 ) AS LOGDOE, 
               ( ( ED.numofdataset / ED.numoftimescat ) * 100 ) AS LOGCAT, 
               ed.numoftimesloc, 
               ed.numoftimesdoe, 
               ed.numoftimescat 
        FROM   event E, 
               eventdetail ED 
        WHERE  E.eventid = ED.eventid 
               AND ED.location = 'LONDON' 
               AND ED.category = 'Sports' 
        ORDER  BY finalrank DESC) f 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:54:49.210

它不是已知列，因为它不在桌面上。您在此处为其创建别名：

```
((ED.numofdataset / ED.numoftimesloc) * 100) AS LOGLOC 
```

但是，不能在`SELECT`子句的其他地方引用别名列。（认为​​它们直到在该子句被解析之后才真正存在。因此它们可以用于某些其他子句，例如`ORDER BY`, 因为它对结果进行操作，`SELECT`而`SELECT`对表进行操作.)

可能有一些我不知道的 SQL 技巧来减少代码重复，否则您可能只需要直接运行计算：

```
Log((ED.numofdataset / ED.numoftimesloc) * 100) 
```

# database - 如何更新heroku django应用程序的架构更改？

> ID：15255527
> 
> 赞同：0
> 
> 时间：2013-03-06T18:48:39.250
> 
> 标签：database, django, postgresql, deployment, heroku

我在 heroku 中部署了一个 django 应用程序。现在一切正常。但我需要在现有表中再添加一个字段。我在 models.py 文件中添加了架构更改。我尝试使用以下命令进入 dbshel​​l。

```
 heroku run python manage.py dbshell 
```

但它显示以下错误消息。

错误：您似乎没有安装“psql”程序或在您的路径上。

我该如何解决这个问题？如何将更改添加到数据库中？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-16T08:53:45.883

使用***heroku pg:psql***而不是 manage.py dbshel​​l ..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:05:52.060

我不是 100% 确定 heroku （阅读：我不知道），但你遇到的问题听起来很典型：你想在 django 数据库设置后修改它。关于`syncdb`：它*不会*改变现有表的一点关键说明。

为了修改表格，您将不得不转储所有数据，编辑模型，然后再次填写所有数据 - 多么痛苦！

但是，还有其他选择：

两个更受欢迎的选项是**django-evolution**和**South**，它们都有自己的用途、优点/缺点和复杂性。与其让您厌烦（并在此过程中窃取其他人的辛勤工作），不如将两者的详细信息传递给 SO：

[目前使用 Django “Evolution”，“South”是否更好，值得切换？](https://stackoverflow.com/questions/1590944/currently-using-django-evolution-is-south-better-and-worth-switching)

（简短的回答是：使用[South](http://south.aeracode.org/)。它有一点学习曲线，但它确实将是在设置 django 模型（或迁移）后更改（或迁移）的最强大/完整的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T20:34:00.993

我遇到了同样的问题，并且还发现文档中缺少明确的答案。正如 Heroku 建议的那样，您的生产数据库应该与您的开发数据库相同，因此您应该能够在本地进行所有更改。

修理：

1.  [下载](http://postgresapp.com/)最新的 Postgress 应用程序，然后按照说明将其移动到 Applications 文件夹

2.  通过在终端中键入以下内容， [将新包添加到您的路径：](http://postgresapp.com/documentation/)`PATH="/Applications/Postgres.app/Contents/Versions/9.3/bin:$PATH"`

3.  回到你的虚拟环境并运行`python manage.py dbshell`- 你应该很好！

# java - 我的 android 应用程序每 5 秒只打印 1 张票

> ID：15255543
> 
> 赞同：3
> 
> 时间：2013-03-06T18:49:41.293
> 
> 标签：java, android, printing, bluetooth, zebra-printers

首先，感谢您花时间阅读我的问题。在 Java 编程方面，我仍然是个菜鸟，我很感激任何建议或帮助。

## 应用程序

我写了一个小的 android 应用程序，它通过蓝牙打印机打印出工作卡票。

## 问题

我的应用程序每 5 秒只能打印一张票，这意味着如果在 5 秒内捕获第二张作业卡，则该应用程序不会打印一张票。

## 我想要的是

我真的希望应用程序为每张捕获的工作卡连续打印一张票。

我想我迷失了 AsyncTasks、Threads (Bluetooth comms) 等的细节以及何时使用什么类。

任何关于如何使用这些类的最佳实践的指南都非常受欢迎。我在下面粘贴了一些我怀疑可能是问题根源的源代码。

## 设备 ：

> 斑马 RW420 打印机（斑马 SDK）

## 日志内容：

> 03-06 20:17:04.328: W/BluetoothAdapter(25552): getBluetoothService() 在没有 BluetoothManagerCallback 的情况下调用 03-06 20:17:04.328: W/BluetoothAdapter(25552): getBluetoothService() 在没有 BluetoothManagerCallback 的情况下调用 03-06 20 :17:04.386: D/dalvikvm(25552): GC_CONCURRENT 释放 133K，9% 释放 4079K/4468K，暂停 17ms+23ms，总计

## 源代码 ：

主屏幕.java

```
public class MainScreen extends Activity {

submitBtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub                                              
               //Do printing
                    String tpl = "Hello World!";
                    new PrintTask().execute(tpl);                    
            }
        });       
   }

//Async Printing Task
private class PrintTask extends AsyncTask<String, Integer, String> {
            @Override
            protected void onPreExecute() {
                super.onPreExecute();
                uiHelper.showLoadingDialog("Printing, please wait...");                                 
            }

            @Override
            protected String doInBackground(String... params) {
                String msg = params[0];                                 
                print(msg);                                                                 
                publishProgress(1);                 
                return "All Done!";
            }

            @Override
            protected void onProgressUpdate(Integer... values) {
                super.onProgressUpdate(values);
                uiHelper.updateLoadingDialog("Printing jobcard " + values[0]);              
            }

            @Override
            protected void onPostExecute(String result) {
                super.onPostExecute(result);
                uiHelper.dismissLoadingDialog();
                finish(); //close the window
            }
        }

    public void print(String tpl) {
        final String msg = tpl;     
        //runOnUiThread(new Runnable()
        new Thread(new Runnable() {
            public void run() {                                                             
                Looper.prepare();
                printer_ob.printMessage(msg);               
                Looper.loop();
                Looper.myLooper().quit();                
            }
        }).start();                     
    }

} 
```

我使用的 ZebraPrinter 助手类：

```
public class ZebraPrinterHelper {
    Context context;
    private ZebraPrinterConnection zebraPrinterConnection;
    private RadioButton btRadioButton;
    private ZebraPrinter printer;
    private TextView statusField;
    private EditText macAddress, ipDNSAddress, portNumber;
    private Button testButton;  

    public ZebraPrinterHelper(Context c) {
        context = c;
    }

    public ZebraPrinter connect() {

        zebraPrinterConnection = null;      
        zebraPrinterConnection = new BluetoothPrinterConnection(SettingsHelper.getBluetoothAddress(context));               

        try {
            zebraPrinterConnection.open();          
        } catch (ZebraPrinterConnectionException e) {       
            Toast.makeText(context, "Comm Error! Disconnecting", 500).show();
            DemoSleeper.sleep(1000);
            disconnect();
        }
        ZebraPrinter printer = null;

        if (zebraPrinterConnection.isConnected()) {
            try {
                printer = ZebraPrinterFactory.getInstance(zebraPrinterConnection);
                //setStatus("Determining Printer Language", Color.YELLOW);
                PrinterLanguage pl = printer.getPrinterControlLanguage();
                //    setStatus("Printer Language " + pl, Color.BLUE);
            } catch (ZebraPrinterConnectionException e) {
                //"Unknown Printer Language");
                Toast.makeText(context, "Error, Unknown printer language", 500).show();
                DemoSleeper.sleep(1000);
                printer = null;
                DemoSleeper.sleep(1000);
                disconnect();
            } catch (ZebraPrinterLanguageUnknownException e) {
                //setStatus("Unknown Printer Language", Color.RED);
                Toast.makeText(context, "Error, Unknown printer language", 500).show();             
                printer = null;
                DemoSleeper.sleep(1000);
                disconnect();
            }
        }

        return printer;         
    }

    private void writeMessage(byte[] message) {
        //message in bytes      
        try {           
            zebraPrinterConnection.write(message);              
            DemoSleeper.sleep(1500);
            if (zebraPrinterConnection instanceof BluetoothPrinterConnection) {
                String friendlyName = ((BluetoothPrinterConnection) zebraPrinterConnection).getFriendlyName();                  
                DemoSleeper.sleep(500);
            }
        } catch (ZebraPrinterConnectionException e) {
            //helper.showErrorDialogOnGuiThread("Error:" + e.getMessage());
            Log.d("Error",e.getMessage());
        } finally {
            disconnect();
        }
    }

        public void printMessage(String message) {
            byte[] msg = null;          
            msg = message.getBytes();

            //check connections

            printer = connect();
            if (printer != null) {
                writeMessage(msg);
            } else {
                disconnect();
            }

        }

        public void disconnect() {
            try {           
                if (zebraPrinterConnection != null) {
                    zebraPrinterConnection.close();
                }               
            } catch (ZebraPrinterConnectionException e) {
                //setStatus("COMM Error! Disconnected", Color.RED);
            } finally {

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:06:51.530

我认为您将不得不使用 a`IntentService`而不是 a `AsyncTask`。IntentServices 处理异步请求，并且还具有用于排队的内置功能。查看[此](http://developer.android.com/reference/android/app/IntentService.html)链接以获取有关 IntentServices 的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:37:11.153

您在整个代码中都有一堆`DemoSleeper.sleep()`调用，听起来它会在一段时间内阻止执行。之后它会休眠 1 秒钟`open()`，然后再休眠几秒钟`write()`，与打印机的通信肯定需要一些时间。

这是导致打印缓慢的原因吗？你能试着去掉那些吗？您将不需要它们进行打印

# javascript - javascript设置的iframe中js的执行顺序

> ID：15255550
> 
> 赞同：3
> 
> 时间：2013-03-06T18:50:06.630
> 
> 标签：javascript, google-chrome

我试图了解 iframe 中代码执行顺序的行为，它在 FF 和 chrome 中似乎有所不同。用例很简单：我们在顶层框架中有两个函数，创建管理器和窗口创建。窗口创建函数找到一个 iframe 并将其 src 属性设置为 `javascript:top.writeBody(document)'`writeBody 使用 document.write 在框架中插入 html 的位置。插入到其末尾的 html 包含一个带有简单日志语句的脚本标记。创建管理器功能用于跟踪执行顺序，并揭示 FF/IE 与 Chrome 相比在处理顺序方面的差异：

FF中的执行流程是这样的：

```
[20:40:37.893] Entering creation manager
[20:40:37.893] Starting next job
[20:40:37.893] Invoking createWindow
[20:40:37.894] Setting src of frame
[20:40:37.895] Done setting src on frame
[20:40:37.895] Exiting jobs
[20:40:37.953]  >>> executing script in frame 
```

在 chrome 中，相同的代码给出：

```
Entering creation manager 
Starting next job 
Invoking createWindow 
Setting src of frame 
 >>> executing script in frame
Done setting src on frame 
Exiting jobs 
```

基本上在 chrome 中，iframe 中的脚本在创建管理器调用的堆栈中执行，而在 FF/IE 中，它在创建管理器调用完成后执行。

所以我的问题是：为什么会有所不同，有没有办法让 Chrome 在这种情况下表现得像 FF 和 IE。我有一个庞大的遗留代码库，它依赖于 FF/IE 行为，用例并不像示例那么简单，而是更像意大利面条，所以它真的很有用！

代码示例如下。

```
<!DOCTYPE html>
<html>
<head>
    <title>Test scenario.</title>
    <script src="main.js"></script>
</head>
<body>
    <script>document.write("<iframe id='c1' src='about:blank'></iframe><iframe id='c2'></iframe>");</script>
</body>
</html> 
```

和 javascript

```
var jobs = [];
var jobn = 0;
var creationManaer = function() {
    console.log('Entering creation manager');
    if (jobs.length == 0) {
        return;
    }
    console.log('Starting next job');
    jobs[jobn]();
    console.log('Exiting jobs');
    jobn++;
    if (jobn >= jobs.length) {
        jobs.length = 0;
        jobn = 0;
    }
}

var body = "<script>" +
"console.log(' >>> executing script in frame');" +
"</script>" +
"<body></body>";

var writeBody = function(doc) {
    doc.write(body);
};

var i = 1;
var createWindow = function() {
    var frame = document.getElementById('c' + i);
    i++;
    console.log('Setting src of frame')
    frame.src = 'javascript:top.writeBody(document)';
    console.log('Done setting src on frame');
};

jobs[jobs.length] = function() {
    console.log('Invoking createWindow');
    createWindow();
}
window.onload = function() {
    creationManaer();
}; 
```

# android - ImageView onClick() 和 fling() 手势冲突

> ID：15255552
> 
> 赞同：1
> 
> 时间：2013-03-06T18:50:10.137
> 
> 标签：android, android-gesture

我有一个活动，我在其中设置了一个 imageView。OnFling 我加载另一个图像，然后单击图像我必须去另一个活动。

现在的问题是，当我尝试在 imageView 上投掷/滑动时，它的 onClick 被调用，所以 fling() 没有被执行。如何解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:57:43.460

而是`onTouchEvent`在`GestureDetector`类中使用 来完成您的`onClick`方法的工作。您可以使用这些`MotionEvent`操作来确定它是否是点击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:32:22.720

您可以将 onClick() 赋予所有其他视图，在其中什么也不做。现在在 onSingleTapUp() 中写入 imageView 的 onClick() 主体

# c - 为什么这个函数会导致段错误？

> ID：15255553
> 
> 赞同：2
> 
> 时间：2013-03-06T18:50:11.933
> 
> 标签：c, segmentation-fault

我编写了以下简单函数来执行模幂运算。但是，当指数参数大于约 261,000 时，它会出现段错误。为什么是这样？我该如何解决？

我在 64 位 Ubuntu 上使用 gcc 进行编译。

谢谢

```
unsigned int modex(unsigned int base, unsigned int exponent, unsigned int modulus)
{
   if(exponent == 1)
      return base;

   base = base % modulus;

   if(exponent == 0 || base == 1)
      return 1;

   return (modex(base, exponent - 1, modulus) * base) % modulus;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T18:56:16.133

@ouah 已经在评论中发布了答案，所以如果他想发布答案，我会删除它。

你有一个堆栈溢出。您递归的次数太多，并且耗尽了您的堆栈空间。C++ 不保证尾调用优化（即使最后没有对递归调用的返回值进行该操作），因此最好使用循环来实现它。

[如果您想坚持使用递归路线，请尝试通过此处](https://stackoverflow.com/questions/3935501/tail-recursion-in-c)的说明使其真正成为尾递归，并查看编译器是否可以帮助您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T18:57:10.313

你正在创建一个巨大的递归链。您应该尝试通过迭代来节省内存和处理。

```
unsigned modex(unsigned base, unsigned exponent, unsigned modulus){

    unsigned
        result = 1;

    while(expoent--){
        result *= base;
        result %= modulus;

    }

    return result;

} 
```

不过，您可以做得更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T18:54:30.347

你的递归变得如此之深以至于它占据了整个麻袋。考虑改用 while 循环。

# python - 标准化的 numpy/scipy `asarray` 装饰器

> ID：15255554
> 
> 赞同：4
> 
> 时间：2013-03-06T18:50:20.273
> 
> 标签：python, arrays, numpy, decorator

是否有用于`asarray`函数参数的标准化装饰器？

即我可以写的东西：

```
@array_args  # this decorator automatically calls asarray on arguments
def f(x,y):
     return x/y 
```

代替

```
def f(x,y):
    (x,y)=(numpy.asarray(x), numpy.asarray(y))
     return x/y 
```

我只找到了这个[讨论](http://mail.scipy.org/pipermail/numpy-discussion/2006-March/007290.html)，所以我可以把装饰器拉到那里；但我更喜欢使用已集成到`numpy`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T19:17:39.750

AFAIK 它不存在，但写一个很简单：

```
from functools import wraps

def array_args(func):
    @wraps(func)
    def wrapper(*args):
        arrays = map(np.asarray, args)
        return func(*arrays)

    return wrapper 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:49:52.770

这就是我最终得到的，

```
import scipy # numpy could work too
from functools import wraps
def asarray_strictnumeric( obj ):
    ''' only convert if the result is a numerical array. '''
    tmp=scipy.asarray(obj)
    if tmp.dtype.kind in 'iufc':
        return tmp
    else:
        return obj

def array_args(f):
    ''' Decorator: 
        - converts numerical positional arguments to arrays,
        - leaves non-numerical positional arguments alone,
        - leaves all keywords alone.
    '''
    @wraps(f)
    def wrapper(*args, **kwds):
        args=[asarray_strictnumeric(x) for x in args]
        return f( *args, **kwds )
    return wrapper 
```

但@promanow 的回答是一个有用的起点。

# java - 为什么 Java 中的所有中间点击都报告为具有 Alt 修饰符？

> ID：15255557
> 
> 赞同：12
> 
> 时间：2013-03-06T18:50:28.100
> 
> 标签：java, swing, awt, mouse

为什么 Java 中的 MouseEvents 在键和鼠标按钮之间共享修饰符？

考虑一下下面的简单代码：

```
public static void main(String[] args) {
    JFrame frame = new JFrame();
    frame.setSize(800,600);
    frame.addMouseListener(new MouseAdapter() {
        public void mouseClicked(MouseEvent e) {
            System.out.println(e);
        }
    });
    frame.setVisible(true);
} 
```

如果在窗口中单击 3 次（左键单击、中键单击和右键单击），您将看到以下输出。

```
java.awt.event.MouseEvent[MOUSE_CLICKED,(165,149),absolute(165,149),button=1,modifiers=Button1,clickCount=1] on frame0
java.awt.event.MouseEvent[MOUSE_CLICKED,(292,228),absolute(292,228),button=2,modifiers=Alt+Button2,clickCount=1] on frame0
java.awt.event.MouseEvent[MOUSE_CLICKED,(293,228),absolute(293,228),button=3,modifiers=Meta+Button3,clickCount=1] on frame0 
```

如果你看，你会注意到所有的中间点击都被报告为按下了 alt 键，所有的右键点击被报告为按下了 Meta 键。这是有据可查的，甚至在 MouseEvent 的 Javadocs 中也有一行提到了这种重叠。但我的问题是，为什么会这样报道？从 e.isAltDown() 返回 true 以进行中间点击的原因是什么？

这使得在某些平台上很难区分 Alt+Button1 和 Button2。

同样，是否有任何“最佳实践”指南用于在 Java 中设计跨平台鼠标行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T21:12:55.727

我相信这种重新使用标志是出于历史原因。我只能猜测最初的动机，但可能没有使用太多位，以便有更多位可供未来扩展使用。另一个可能是 Mac 只有一个鼠标这一事实，因此修饰符在 Mac 上曾经（现在仍然是）常用来表示在具有足够数量的系统上通常会使用不同鼠标按钮的事物。

从 Java 1.4 开始，我宁愿使用[`getModifiersEx`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseEvent.html#getModifiersEx%28%29)which 将分别报告这些修饰符和按钮。所以信息是可用的，它只是不通过旧接口报告，以保持向后兼容性。

# architecture - 在多层架构中通过层传递业务实体

> ID：15255562
> 
> 赞同：5
> 
> 时间：2013-03-06T18:50:40.200
> 
> 标签：architecture, entities, business-logic-layer, architectural-patterns

目前，我正在开发一个利用多层架构的项目，如[应用程序架构指南 2.0](http://apparch.codeplex.com/)中所述，有 5 层（DAL、BLL、外观、表示层和公共层）。
这里我们有一个业务逻辑层，它由业务组件和业务实体（它们是使用 O/R 映射器生成的实体）组成，我们经常需要在表示层中使用这些实体来绑定和向用户呈现数据，所以我们将这些实体冒泡通过其他层直到表示层。

现在的问题是：
这是一个正确的方法吗？（根据定义，我知道如果我们应该共享这些，我们应该将它们放在公共层中，以便我们可以在所有层中使用它们）。我们不应该将这些实体移动到公共层吗？或者我们应该定义诸如数据传输对象（DTO）之类的东西并通过层传递它们（这当然看起来是多余的）。

任何澄清将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:34:30.427

一个适当分层的应用程序通常会使用 DTO 来防止业务实体被掺假和扭曲以适应其他层的需求，以及其他原因。

但是，在非常小的应用程序中，您可以免除 DTO 映射的负担，并将业务实体一直传递到 UI。您可以将它们保留在 BLL 中，如果所有层都引用它，这并不引人注目。无论如何，它不再是一个真正的分层应用程序，因为您将架构压缩成一个大层。

Mark Seemann 有一篇关于这个问题的有趣[博客文章。](http://blog.ploeh.dk/2012/02/09/IsLayeringWorththeMapping/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T09:24:31.187

仅将您的业务实体保留在业务层中。DTO 最初可能看起来是多余的，但随着项目的发展，您会开始注意到它们之间的差异：DTO 更扁平，序列化友好类型和实体具有更复杂的关系和权力，它们比 DTO 承载更多的应用程序逻辑。

DTO 是纯数据，因此它们适合在层之间传递该数据。它们不必直接代表您的实体，因此，当您需要修改 BLL 但保留服务合同时，它们可以提高兼容性。

唯一的例外可能是 DAL 和 BLL 交互，其中 DAL 将直接处理实体。但即使在这里，DTO 也可以用来吸收 ORM 的影响。

# database-design - 我在本练习中应用 Boyce-Codd NF 是否正确？

> ID：15255563
> 
> 赞同：0
> 
> 时间：2013-03-06T18:50:45.527
> 
> 标签：database-design, bcnf

***考试***复习，不是家庭作业。

我正在做这个练习，我想检查我的解决方案是否可以：

给定以下关系 R 和函数依赖集 F： R = {A,B,C,D,E,F,G,H,I} F= { {C,D} -> {A}， {G} -> {E}, {C,D,E} -> {G,B,H}, {B} -> {F}, {H} -> {I} } 将 R 分解为满足Boyce-Codd 范式。

我的回答：***BOLD***是主键

( ***C*** , ***D*** , A)

（***C***、***D***、***E***、B、H）

（***乙***，乙）

( ***H*** ,我)

( ***G*** ,C,D)

( ***E*** , ***G*** )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:26:05.960

我认为你推导出的前四个都在 5NF 中。

*   { **G**光盘}
*   {**例如**}

但这两个看起来不太对劲。

一方面，您的 FD 之一是 G->E。在仅包含 G 和 E 的关系中，您如何确定正确的分解是

*   {**例如**}

代替

*   { **G** E}

鉴于 FD G->E 仍然必须持有？

乍一看，我看不出如何从您提供的 FD 中推导出 G->CD。

# ios - iOS 应用内购买的收据字符串解释

> ID：15255564
> 
> 赞同：4
> 
> 时间：2013-03-06T18:50:59.980
> 
> 标签：ios, in-app-purchase, uniqueidentifier, receipt

我尝试了解从 iTunes 服务器获取的收据信息，但找不到相关文档。

特别是 , （在 WWDC'12 会议中声称是事实上的客户 ID）和 之间`unique_identifier`有`unique_vendor_identifier`什么`original_transaction_id`区别`[[[UIDevice currentDevice] identifierForVendor] UUIDString]`？

```
{"receipt":
    {"original_purchase_date_pst":"...",        
     "purchase_date_ms":"...", 
     "unique_identifier":"...", 
     "original_transaction_id":"...", 
     "bvrs":"...", 
     "transaction_id":"...", 
     "quantity":"...", 
     "unique_vendor_identifier":"...", 
     "item_id":"...", 
     "product_id":"...", 
     "purchase_date":"...", 
     "original_purchase_date":"...", 
     "purchase_date_pst":"...", 
     "bid":"...", 
     "original_purchase_date_ms":"..."},  
"status":0}` 
```

我希望将此收据信息存储在我的服务器上以跟踪订阅有效性。所以最好知道我应该使用哪个 id 作为用户身份的代理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T19:01:11.730

您的软件应仅依赖 Apple 在其文档中描述的字段。他们可以随时删除 unique_identifier 或 unique_vendor_identifier、更改其含义或更改其值，而无需告知您。

在您的服务器将订阅内容传输到设备之前，您应该按照 Apple 的[文档来使用 Apple 的服务器验证订阅收据。](http://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/StoreKitGuide/RenewableSubscriptions/RenewableSubscriptions.html#//apple_ref/doc/uid/TP40008267-CH4-SW5)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-05T22:31:19.617

在[验证商店收据](https://developer.apple.com/library/mac/documentation/NetworkingInternet/Conceptual/StoreKitGuide/VerifyingStoreReceipts/VerifyingStoreReceipts.html)中有一个很好的表格，它提供了看似可以在收据中依赖的字段。该特定方法确实依赖于与苹果服务器的连接。收据字段的另一个描述（尽管可读性较差）在[Receipt Fields](https://developer.apple.com/library/ios/releasenotes/General/ValidateAppStoreReceipt/Chapters/ReceiptFields.html#//apple_ref/doc/uid/TP40010573-CH106-SW12)中。

# django - 在 django 中过滤模型

> ID：15255579
> 
> 赞同：2
> 
> 时间：2013-03-06T18:51:53.407
> 
> 标签：django, model

我是 django 和 web 框架的新手。我正在尝试在给定其属性 Group 的子字符串的情况下过滤 django 中的模型

```
pack=My_pack.objects.get(Group=sumthing) 
```

现在我的 Group 属性包含一对以“/”分隔的值，例如

```
Group="System/Application" 
```

我想过滤模型只给一个值假设“系统”，那么如何做 dat????

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:59:42.450

您正在寻找[`startswith`字段过滤器](https://docs.djangoproject.com/en/dev/ref/models/querysets/#startswith)：

```
pack = My_pack.objects.filter(group__startswith='System') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:56:22.950

这将是此查询的语法：

```
pack = My_pack.objects.get(group__icontains='System') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-20T09:14:13.210

您可以在 django 中以不同的方式使用过滤器，

My_pack.objects.get 只会带一个实例，如果这里有多个实例，它会给你错误。所以你需要将它包含在 try except 块中。

`pack = My_pack.objects.get(group__icontains='System')`

另一方面

My_pack.objects.filter 将带来多个实例，如果没有找到实例，它将带来并清空列表`[]`

`pack = My_pack.objects.filter(group__startswith='System')`

您也可以使用名为的快捷功能之一`get_object_or_404`。这与 get 类似。不同之处在于您不需要将其包含在 try except 块中。如果它带来了实例，它会将实例作为返回值，但它没有找到任何实例，那么它将抛出 404 状态消息。

`pack = get_object_or_404(My_pack, group__startswith='System')`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T18:55:10.397

一个很好的起点是[The Definitive Guide to Django](http://djangobook.com/)。尝试查看文档中的[QuerySet API 参考](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#queryset-api-reference)。

[https://docs.djangoproject.com/en/1.5/ref/models/querysets/#icontains](https://docs.djangoproject.com/en/1.5/ref/models/querysets/#icontains)

您的代码将无法正常工作。采用：

```
pack = My_pack.objects.filter(Group__icontains='System') 
```

# ruby-on-rails - Rails 在控制器中分配实例变量

> ID：15255580
> 
> 赞同：1
> 
> 时间：2013-03-06T18:51:55.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我的控制器中有以下内容：

```
if params[:option] == "1"
      id = params[:id]
      @resultsReceived = true
      begin
       @pwvav_ratings = Pwvav.find_by_id(id).recommendation.split(",")
      #or
       @pwbab_ratings = Pwbab.find_by_id(id).recommendation.split(",")
     #or
       @puvub_ratings = Puvub.find_by_id(id).recommendation.split(",")
     #or
       @tic_ratings   = Tic.find_by_id(id).recommendation.split(",")
     rescue
       redirect_to "/view_api", :flash => { :notice => "Sorry, No records returned for #{id}." }
      end 
```

如果 find 不为零，我正在尝试将每个实例变量（`@pwvav_ratings`，`@pwbab_ratings`...）设置为 find，以便我可以在我的视图中调用它。我如何检查是否..或如果没有找到，请使用 Flash 通知进行救援。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:19:26.533

尝试这个。

```
if params[:option] == "1"
  id = params[:id]
  @resultsReceived = true
  @pwvav_ratings = Pwvav.find_by_id(id)
  #or
  @pwbab_ratings = Pwbab.find_by_id(id)
  #or
  @puvub_ratings = Puvub.find_by_id(id)
  #or
  @tic_ratings   = Tic.find_by_id(id)
  unless @pwvav_ratings || @pwbab_ratings || @puvub_ratings || @tic_ratings
    redirect_to "/view_api", :flash => { :notice => "Sorry, No records returned for #{id}." }
  end
end 
```

您可以调用`.recomendation.split(',')`视图中的每个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:59:26.103

将此添加到每一行的末尾。验证它不是零。（注意`!`，但您也可以使用`not`）

```
@pwvav_ratings = Pwvav.find_by_id(id).recommendation.split(",") if !Pwvav.find_by_id(id).recommendation.split(",").nil? 
```

或者你可以使用`unless`

```
@pwvav_ratings = Pwvav.find_by_id(id).recommendation.split(",") unless Pwvav.find_by_id(id).recommendation.split(",").nil? 
```

# android - 我创建了简单的应用程序，但活动并非每次都出现

> ID：15255581
> 
> 赞同：0
> 
> 时间：2013-03-06T18:51:58.667
> 
> 标签：android, android-activity

当我收到一条短信时，我的应用程序应该显示一个活动两秒钟，但有时该活动不显示（进程仍在运行）而且我不知道为什么（可能是一些模拟器错误）。这是我的代码：

RomariosListener.java：

```
package com.romario.android.smslistener;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class RomariosListener extends BroadcastReceiver {

  @Override
    public void onReceive(Context context, Intent intent) {
      Intent i = new Intent(context, RomariosSmsActivity.class);
      i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
      context.startActivity(i);
    }
} 
```

RomariosSmsActivity.java

```
package com.romario.android.smslistener;
import com.romario.android.smslistener.R;

import android.app.Activity;
import android.os.Bundle;

public class RomariosSmsActivity extends Activity {
  private Thread thread;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.romarios_sms_activity);
    thread=  new Thread(){
      @Override
      public void run(){
        try {
          synchronized(this){
            wait(2000);
            finish();
          }
        } catch(Exception e){

        }        
      }
    };
    thread.start();     
  }
} 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.romario.android.smslistener"
      android:versionCode="1"
      android:versionName="1.0">  
    <application android:icon="@drawable/ic_launcher" android:label="@string/app_name">

        <receiver  android:name=".RomariosListener">
            <intent-filter>
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver>
        <activity android:name="com.romario.android.smslistener.RomariosSmsActivity" android:label="@string/RSA"></activity>              

    </application>
    <uses-sdk android:minSdkVersion="5" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
</manifest> 
```

请帮助我，对不起我的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:45:01.170

尝试这个：

```
package com.romario.android.smslistener;
import com.romario.android.smslistener.R;

import android.app.Activity;
import android.os.Bundle;

public class RomariosSmsActivity extends Activity {
    private Handler mHandler;
    private Runnable mTask = new Runnable() {
        @Override
        public void run() {
            finish();
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.romarios_sms_activity);
        mHandler = new Handler();
        mHandler.postDelayed(mTask, 2000);
    }
} 
```

# css - CSS Pseudo element jquery click event?

> ID：15255582
> 
> 赞同：0
> 
> 时间：2013-03-06T18:51:58.900
> 
> 标签：css, jquery, pseudo-element

I have an LI element "add folder" that uses a css pseudo before element to add a plus, like so:

![enter image description here](../Images/bd80f14c3b788cf98294e59a0eb7e51c.png)

the LI has a class of "add" and I have jquery that fires when "add" is clicked and CSS on the LI to show a cursor.

Of course, the pseudo element is not active. I realize that pseudo elements are not part of the DOM, but how would you handle this sort of thing (preferably without resorting to an IMG tag) so the words AND the plus mark can be clicked?

Here is the CSS for the plus:

```
li.add:before {
    content: "\002B";
    display: inline-block;
    padding: 0 5px;
    margin-right: 5px;
    background: $orangelight;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T19:02:18.813

它在这里工作得很好：http: [//jsfiddle.net/Un4gq/](http://jsfiddle.net/Un4gq/)

```
$("li").on("click", function () {
    alert("click");
}) 
```

# java - Spring Roo：[控制器脚手架--class]和[web mvc脚手架--class]之间的区别

> ID：15255583
> 
> 赞同：1
> 
> 时间：2013-03-06T18:52:06.203
> 
> 标签：java, spring, aop, spring-roo

Spring Roo：[控制器脚手架--class]和[web mvc脚手架--class]之间的区别

现在我们将要为会议应用程序搭建一个 Web 层。这是使用控制器命令完成的。生成控制器和所有相关 Web 工件的最方便的方法是使用 controller all。

但是有什么区别呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:57:04.150

该命令`controller scaffold`等效于`web mvc scaffold`. 但是`controller scaffold`已弃用。[在这里](http://static.springsource.org/spring-roo/reference/html/command-index.html#command-index-web-mvc-scaffold)查看 A.4.2

# android - 如何获取三星银河中状态栏的高度以用于设置 Andengine 相机的尺寸？

> ID：15255590
> 
> 赞同：0
> 
> 时间：2013-03-06T18:52:18.350
> 
> 标签：android, size, andengine

我在应用程序中使用 Andengine GLES2。我也在使用带有静态附件的动作条 sherlock，所以我有这样的引擎选项：

```
 DisplayMetrics metrics = this.getResources().getDisplayMetrics();

    // Calculate ActionBar height
    TypedValue tv = new TypedValue();
    if (getTheme().resolveAttribute(android.R.attr.actionBarSize, tv, true))
    {
        mActionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data,getResources().getDisplayMetrics());
    }

    CAMERA_WIDTH = metrics.widthPixels;
    CAMERA_HEIGHT = metrics.heightPixels-mActionBarHeight;
    camera = new ZoomCamera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
    EngineOptions options = new EngineOptions(false,
            ScreenOrientation.LANDSCAPE_FIXED, new RatioResolutionPolicy(
                    CAMERA_WIDTH, CAMERA_HEIGHT), camera); 
```

引擎需要在没有全屏的情况下运行才能显示操作栏。这与我的惠普触摸板平板电脑完美配合，整个游戏填满了操作栏下方的空间。使用三星 Galaxy S3 时，顶部状态栏没有考虑在内，宽度看起来太小，因为高度大于应有的高度。我需要一种方法来以某种方式获得三星银河中顶部状态栏的高度。我已经尝试过在 SO 上的多个线程中看到的这种方法：

```
Rect rectgle= new Rect();
Window window= getWindow();
window.getDecorView().getWindowVisibleDisplayFrame(rectgle);
int StatusBarHeight= rectgle.top;
int contentViewTop= 
    window.findViewById(Window.ID_ANDROID_CONTENT).getTop();
int TitleBarHeight= contentViewTop - StatusBarHeight; 
```

这没有任何作用。我认为它在三星银河中的工作方式与其他设备不同，因为那个独特的酒吧。有谁知道我能做些什么来获得这个高度？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:38:04.203

您可以使用 LayoutGameActivity。在此找到您的渲染表面视图的宽度和高度并设置您的相机宽度和高度。

```
public class YourGameActivity extends LayoutGameActivity{
     @Override
public Engine onLoadEngine() {
     // here find your LinearLayout width and height.
    return null;
}

@Override
public void onLoadResources() {
}

@Override
public Scene onLoadScene() {
    return null;
}

@Override
public void onLoadComplete() {
}

@Override
protected int getLayoutID() {
    return 0;
}

@Override
protected int getRenderSurfaceViewID() {
    return 0;
}
} 
```

# css - IE8背景色隐藏边框

> ID：15255591
> 
> 赞同：1
> 
> 时间：2013-03-06T18:52:19.637
> 
> 标签：css, internet-explorer-8, border, background-color

我正在尝试为导航项添加边框。背景颜色为灰色，三个边框为浅灰色。右边框为黑色。在 IE8 上，没有边框显示。

以下是`<li>`IE9 中的外观： ![在此处输入图像描述](../Images/46d14153bbe9e1f32a4990b1180c5027.png)

以下是它们在 IE8 上的外观：
![在此处输入图像描述](../Images/89cd0779e067d5f8521990c619c5785c.png)

当我删除该`background-color`属性时，这就是 IE8 上显示的内容： ![在此处输入图像描述](../Images/cf59640bcd1411a903f0580faef82ab5.png)

似乎背景颜色掩盖了边界。我怎样才能解决这个问题？

这是HTML：

```
<ul class="mainMenu">
    <li></li>
    <li></li>
</ul> 
```

和CSS：

```
.mainMenu > li{
    border: 1px solid black;
    position: relative;
    display: table-cell;
    background-color: #363636;
    border-top: 1px solid #666;
    border-left: 1px solid #666;
    border-bottom: 1px solid #666;
    background-image: linear-gradient(#363636 50%, #000 50%);
    background-image: -webkit-linear-gradient(#363636 50%, #000 50%); 
    background-image: -moz-linear-gradient(#363636 50%, #000 50%);
    background-image: -ms-linear-gradient(#363636 50%, #000 50%);
    background-image: -o-linear-gradient(#363636 50%, #000 50%);
} 
```

已编辑：我错误地用 a`div`而不是`ul`围绕我的列表项。在 IE8 中，列表项位于 中`ul`，会出现此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:29:37.620

display: table-cell 是你的罪魁祸首。这里有一个[关于](https://stackoverflow.com/questions/9442999/understanding-displaytable-cell-functioning)display: table-cell 的工作原理及其一些特性的好问题。但是，即使您以他们出色的小提琴示例为他们的“单元格”添加边框，您也会发现他们遇到与您相同的问题。

如果您想解决您的问题，我建议您使用 float:left 样式布局。您可以通过以下方式处理边界重复问题：

```
.mainMenu {
   list-style-type :none;
   padding:0;
   margin:0;
}
.mainMenu > li {

    position: relative;
    float:left;
    background-color: #363636;
    border-top: 10px solid #666;

    border-right: 10px solid #666;
    border-bottom: 10px solid #666;
    /* There is also a background gradient */
}

.mainMenu > li:first-child {
  border-left: 10px solid #666;
} 
```

为了视觉清晰，我夸大了边框大小。[小提琴](http://jsfiddle.net/bUbLR/) 您可能还需要确保在列表项之后不久清除浮动，以确保它不会对您的布局产生任何其他副作用。

# xml - com.sun.org.apache.xerces.internal.dom.DeferredElementImpl convert to string

> ID：15255593
> 
> 赞同：1
> 
> 时间：2013-03-06T18:52:23.190
> 
> 标签：xml, dom

I have an object of type

```
com.sun.org.apache.xerces.internal.dom.DeferredElementImpl 
```

containing an XML root element and structure beneath.

How can I retrieve the XML contents as a string from this?

Note that method `toString()` is available, but this has been implemented in a very rudimentary way, only reporting strings like `[root: null]`, hence only showing the root element name and not any further contents of this element.
In the javadoc this method is listed as "NON-DOM method for debugging convenience".

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-14T20:20:38.077

我知道这有点晚了，但如果你还在寻找解决方案，试试这个：

```
TransformerFactory tFactory = TransformerFactory.newInstance();
Transformer transformer = tFactory.newTransformer();

DOMSource source = new DOMSource(node);
StreamResult result = new StreamResult(System.out);
transformer.transform(source, result); 
```

`node`DeferredElementImpl 对象在哪里。DeferredElementImpl 实现了 Node 接口，因此您应该能够像使用任何其他 DOM 节点一样在其上使用转换器。

[Oracle：“将 DOM 写为 XML 文件”](http://docs.oracle.com/javaee/1.4/tutorial/doc/JAXPXSLT4.html) [com.sun.org.apache.xerces.internal.dom.DeferredElementImpl API](http://www.cs.rit.edu/usr/local/pub/swm/jdoc6/com/sun/org/apache/xerces/internal/dom/DeferredElementImpl.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-24T15:10:05.180

我使用这种方法从`com.sun.org.apache.xerces.internal.dom.DeferredElementImpl`

```
public static String getCharacterDataFromElement(Element e) throws Exception {
    String data = "";
    Node child = e.getFirstChild();
    if (child instanceof DeferredElementImpl) {
        DeferredElementImpl node = (DeferredElementImpl) child;
        TransformerFactory tFactory = TransformerFactory.newInstance();
        Transformer transformer;
        transformer = tFactory.newTransformer();
        DOMSource source = new DOMSource(node);
        StreamResult result = new StreamResult(new StringWriter());
        transformer.transform(source, result);
        data = result.getWriter().toString();
    }
    return data;
} 
```

# c - 混合开关和在 C 中时

> ID：15255594
> 
> 赞同：1
> 
> 时间：2013-03-06T18:52:24.857
> 
> 标签：c, while-loop, switch-statement

这段代码出于某种原因有效，但它根本没有意义。

```
#include <stdio.h>

int main(void)
{
  switch(1)
    {
      case 0:
        while(1)
          {
            case 1: puts("Works"); break;
          }
    }
  return 0;
} 
```

有人可以解释它为什么起作用以及它有什么应用程序吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T18:54:42.210

`case`标签几乎与`goto`. ¹ 如果您以这些术语考虑您的代码，则应该清楚它是有效的。即，您可以将`switch`语句视为美化的 conditional `goto`。

也就是说，我会打任何在生产环境中编写类似代码的人。²

* * *

 [1.  事实上，它们都列在 C99 标准的同一语法部分 (6.8.1) 中。

2.  是的，这与[Duff 的设备](http://en.wikipedia.org/wiki/Duff%27s_device)几乎相同，但最后一次在几十年前有任何实际用途。] 

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T18:56:48.953

这样做的原因有点不直观：语句`case`的标签`switch`与常规标签非常相似，即为与`goto`语句一起使用而设计的标签。您可以在代码中的任何位置放置此类标签。

事实证明，同样的规则也适用于`case`标签：您可以将它们放在相应`switch`语句中的任何位置，其中顺便包括任何嵌套循环的主体。

The reasons why you may *want* to place labels inside control statements within the body of your `switch` statement are even less intuitive: it turns out that you can perform loop unrolling with a cumbersome-looking but very intuitive construct called [*Duff's Device*](http://en.wikipedia.org/wiki/Duff%27s_device). It is this construct that lead to popularizing the idea of embedding case labels inside other control structures within `switch` statements.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-06T18:56:17.517

您可以通过 的标签交错语句`switch`，因为它们只是标签。这里发生的是：

*   您使用`while (1)`;定义了一个无限循环
*   `switch (1)`语句跳转到标签`case 1:`；
*   where`"Works"`被打印出来，然后`break;`退出无限循环。

# jquery - Nested tabs - 2nd tabbed area default state (jquery)

> ID：15255595
> 
> 赞同：1
> 
> 时间：2013-03-06T18:52:26.860
> 
> 标签：jquery, tabs, nested, jquery-tabs

I'm having a bit of trouble getting the the 2nd tabbed area to display like I'd like it to.

The content of my nested tabs doesn't show by default when the main tab is clicked.

If my nested tabs are part of the main default tab then it looks good, so this gets me thinking there's something missing in my .click function but I just can't figure it out.

What I'm looking for is when Tab 2 is clicked the content of tab 2-1 is displayed by default.

Not sure if I'm explaining this well so here's a JS Fiddle:[http://jsfiddle.net/ionko22/nTFH9/](http://jsfiddle.net/ionko22/nTFH9/)

Any ideas how I can get the nested tabs working properly?

here's the JS I currently have

```
$(document).ready(function(){
        $('.tab-content').not('.default').hide();   
        $('.tabs li').click(function() {
        $(this).parent().parent().find('.tab-content').hide();
        var selected_tab = $(this).find('a').attr('href');  
        $(selected_tab).show();     
        $(this).parent().find('li').removeClass('current');
        $(this).addClass('current');
        return false;
    });
     }); 
```

and my HTML:

```
<div class="tabs">
    <ul>
        <li><a href="#tab1">tab 1</a></li>
        <li><a href="#tab2">tab 2</a></li>
        <li><a href="#tab3">tab 3</a></li>     
    </ul>
  <div id="tab1" class="tab-content default">
   Tab 1 Content
  </div>

  <div id="tab2" class="tab-content">
    <div class="tabs">
      <ul>
        <li><a href="#tab21">tab 2 1</a></li>
        <li><a href="#tab22">tab 2 2</a></li>
        <li><a href="#tab23">tab 2 3</a></li>     
      </ul>
    <div id="tab21" class="tab-content default">
        Tab 2 1 Content
    </div>
    <div id="tab22" class="tab-content">
        Tab 2 2 Content
    </div>
    <div id="tab23" class="tab-content">
        Tab 2 3 Content
     </div>
    </div>  
  </div>

  <div id="tab3" class="tab-content">
   Tab 3 Content
 </div>

 </div> 
```

# javascript - Destroy event not propagating from Backbone model to Backbone collection

> ID：15255600
> 
> 赞同：0
> 
> 时间：2013-03-06T18:52:32.990
> 
> 标签：javascript, jquery, backbone.js, underscore.js

I have a backbone collection of models.

```
MyCollection = Backbone.Collection.extend({
   model: myMymodel;
});

MyModel = Backbone.Model.extend({
...
}); 
```

Each model has a view

```
myView = Backbone.View.extend({
  initialize: function() {
    this.model = new MyModel();
  };
}); 
```

There is no persistence on the server-side. This is just for structuring client-side information. So the models do not have ids, and a url for Backbone.sync has not been configured.

From within the view, I want to remove the model from the collection.

I have tried the following:

```
this.model.trigger( "destroy" ); 
```

However it does not work. The destroy event is not propagating to the collection.

Any idea what I'm doing wrong?

Thanks,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:26:18.503

我认为您根本没有实例化集合。至少不能从代码中看出这一点。如果您只是创建一个模型实例但没有将其添加到任何集合中，`this.model.trigger("destroy");`则不会执行任何操作。

```
myView = Backbone.View.extend({
  initialize: function() {
    this.coll = new MyCollection();
    this.model = new MyModel();
    this.coll.add(this.model);
  };
}); 
```

现在模型是集合的一部分：

```
this.model.destroy() 
```

进行删除 api 调用并从集合中删除

```
this.collection.remove(this.model) 
```

从集合中删除模型，但不进行删除 api 调用。

```
this.model.trigger("destroy"); 
```

在模型上触发破坏事件，但不会破坏模型本身。就`collection.remove(this.model)`好像模型是集合的一部分一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:56:20.360

`collection.remove(model)`将是一个更合适的功能，因为您没有将模型保存在服务器端。[Backbone.Collection.remove](http://backbonejs.org/#Collection-remove)

# bash - How do you retain trailing newlines when storing command output in a variable?

> ID：15255601
> 
> 赞同：1
> 
> 时间：2013-03-06T18:52:41.580
> 
> 标签：bash, variables

Is it possible to retain trailing newlines when storing the output of a command in a variable?

```
$ echo "foo
" # newline appears after foo
foo

$ MYVAR="$(echo "foo
")"
$ echo "${MYVAR}" # newline is stripped
foo
$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:46:01.487

您可以在流的末尾添加一个哨兵：

```
$ my_var=$'foo\n\n'
$ captured=$( echo -n "$my_var"; echo -n "x" ) 
```

然后删除：

```
$ captured=${captured%x}
$ echo "$captured" 
```

# android - ListView OnScrollListener 不会在 ViewPager 中被调用

> ID：15255604
> 
> 赞同：3
> 
> 时间：2013-03-06T18:53:05.533
> 
> 标签：android, android-viewpager, android-listfragment, onscroll

我有一个`FragmentPagerAdapter`创建它的子页面（它们是`ListFragments`），如下所示：

```
@Override
public Fragment getItem(int position) {
    return FragmentChildPage.newInstance();
} 
```

我给 ViewPager 一个`OffscreenPageLimit`1。孩子`ListFragments`有一个 custom `ScrollListener`。

我遇到的问题是自定义滚动侦听器仅适用于`ListFragments`当 ViewPager 滑过其时创建的`OffscreenPageLimit`子页面，即子页面> 2。

更令人困惑的是，如果我滚动几页然后返回滚动侦听器现在可以工作的第一页。

这里发生了什么？似乎`ViewPager`干扰了一些子页面`OnScrollListener`。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T10:23:08.123

试试这个。为我工作！

```
public class ActivityTest extends SherlockFragmentActivity {

    private ViewPager mViewPager;

    private TestAdapter mAdapter;

    @Override
    protected void onCreate(Bundle arg0) {
        super.onCreate(arg0);

        mViewPager = new ViewPager(this);
        mViewPager.setId(android.R.id.button1);
        setContentView(mViewPager);

        mAdapter = new TestAdapter(getSupportFragmentManager());
        mViewPager.setAdapter(mAdapter);
    }

    private class TestAdapter extends FragmentPagerAdapter {

        public TestAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            return TestListFragment.newInstance(position);
        }

        @Override
        public int getCount() {
            return 10;
        }

    }

    private static class TestListFragment extends SherlockListFragment {

        private static final String TAG = TestListFragment.class.getSimpleName();

        private String[] mItems = { "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9","0", "1", "2", "3", "4", "5", "6", "7", "8", "9" };

        private int mPos;

        @SuppressLint("ValidFragment")
        public static TestListFragment newInstance(int pos) {
            TestListFragment frag = new TestListFragment();
            Bundle b = new Bundle();
            b.putInt("pos", pos);
            frag.setArguments(b);
            return frag;
        }

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            mPos = getArguments().getInt("pos");
        }

        @Override
        public void onViewCreated(View view, Bundle savedInstanceState) {
            super.onViewCreated(view, savedInstanceState);

            setListAdapter(new ArrayAdapter<String>(getSherlockActivity(), android.R.layout.simple_list_item_1, mItems));

            getListView().setOnScrollListener(new OnScrollListener() {              
                @Override
                public void onScrollStateChanged(AbsListView view, int scrollState) {

                }

                @Override
                public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
                    Log.d(TAG, "onScroll() - Fragment: " + mPos);
                }
            });
        }
    }

} 
```

# c# - Should I convert this getter into method?

> ID：15255605
> 
> 赞同：-1
> 
> 时间：2013-03-06T18:53:10.277
> 
> 标签：c#, methods, properties, getter

In the past few days I've been reading about the differences betweeen properties and methods in C# and when use each. Most of the articles/questions I read says that getters should be "light" and never have large amount of logic or complex operations inside.

Right now I have a `get` that I think is on the line between property and method, so I would like to see what you all think, if I should change to method or stay with the getter.

Also any other advice is welcome :D

```
public decimal[] getPreprocData
{
    get
    {
        int i = 3;
        decimal[] data = new decimal[9];

        data[0] = (start.Value.Hour * 3600) + (start.Value.Minute * 60);
        data[1] = duration.Value;
        data[2] = flowRate.Value;

        foreach (NumericUpDown nud in gbHTF.Controls.OfType<NumericUpDown>().OrderBy(nud => nud.TabIndex))
        {
            data[i] = nud.Value;
            i++;
        }

        return data;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T18:56:26.493

`Properties`&`Field`一般是**`Noun`**和 `methods`&`functions`一般是**`Verb`**。

所以，`getPreprocData`应该是一个`method`。因为它代表了对对象（类）实例的操作。

* * *

从我自己的角度来看，由于您的财产从不使用`setter`，所以总是比使用`method`更好`property`。

*当没有什么可设置的时候，拥有一个属性有什么意义。？*

* * *

您的属性可以作为方法实现：

```
public decimal[] GetPreprocData()
{
        int i = 3;
        decimal[] data = new decimal[9];

        data[0] = (start.Value.Hour * 3600) + (start.Value.Minute * 60);
        data[1] = duration.Value;
        data[2] = flowRate.Value;

        foreach (NumericUpDown nud in gbHTF.Controls.OfType<NumericUpDown>().OrderBy(nud => nud.TabIndex))
        {
            data[i] = nud.Value;
            i++;
        }

        return preprocData;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:56:19.927

这看起来确实应该是一种方法。

您正在进行一些初始化，并且 的大小`gbHTF.Controls`是无限的，因此最终*可能会*很昂贵。

它还隐藏在一个实际上并没有描述你在做什么的属性名称后面——这作为一种描述性方法会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:56:16.617

将其转换为方法。那里有处理和业务逻辑。

通常，我会将属性限制为其他属性的格式或组合，这样您就可以清楚地分离关注点。

# jquery - asp.net jquery load data dynamically when scroll down

> ID：15255606
> 
> 赞同：0
> 
> 时间：2013-03-06T18:53:12.480
> 
> 标签：jquery, asp.net, session

I am tryin to load new items to e-commerce website when scroll down to the bottom. I am doing most part of it but it gets the same data to load... I am passing a counter(via session) to select new rows but it doesnt work.

here is the jquery code...

```
function sendData() {
<% Session["count_of_rows_displayed"] = Convert.ToInt16(Session["count_of_rows_displayed"].ToString()) + 1; %>
alert('<%= Session["count_of_rows_displayed"].ToString() %>');
$.ajax(
    {
        type: "POST",
        url: "insaat.aspx/GetData",
        data: "{'number_of_rows':'" + <%= Session["count_of_rows_displayed"].ToString() %> +"'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: "true",
        cache: "false",

        success: function (msg) {
            $("#myDiv").append(msg.d);
        },

        Error: function (x, e) {
            alert("Some error");
        }
    });
} 
```

here is the webmethod

```
[WebMethod]
 public static string GetData(String number_of_rows)
 {
int no = Convert.ToInt16(number_of_rows);
string resp = string.Empty;
SqlConnection connection = new   SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
SqlDataAdapter adapter = new SqlDataAdapter();
DataSet ds = new DataSet();
int i = 0;
connection.Open();
adapter.SelectCommand = new SqlCommand("SELECT TOP " + (no*6) + " * FROM (SELECT TOP " + ((++no) * 6) + " * FROM Product ORDER BY id ASC) t ORDER BY id DESC", connection);
adapter.Fill(ds);
connection.Close();

for (i = 0; i <= ds.Tables[0].Rows.Count - 1 && i < 24; i++)
    // build the data 

connection.Close();
return resp;
} 
```

I am trying to increment session and pass it with jquery. But it doesnt increment the session. How can I get session incremented ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:59:57.320

此行不会随着对 AJAX Web 方法的每次连续调用而改变：

```
data: "{'number_of_rows':'" + <%= Session["count_of_rows_displayed"].ToString() %> +"'}", 
```

该行以当时的任何值呈现到页面*一次*`Session["count_of_rows_displayed"]`。因此，每次 AJAX 调用触发时，它都会使用相同的原始值`number_of_rows`.

由于您在`Session`对象中跟踪此服务器端，因此您可能不需要从客户端传递值。只需`Session["count_of_rows_displayed"]`在服务器端 Web 方法中直接引用并增加其值即可。

像这样的东西：

```
public static string GetData()
{
    string number_of_rows = Session["count_of_rows_displayed"];
    int no = Convert.ToInt16(number_of_rows);
    Session["count_of_rows_displayed"] = no + 1;

    // the rest of the method
} 
```

**更新：**您说网络方法无法访问`Session`？好吧，我想我还没有遇到过，因为我还没有发现需要`WebMethod`并且我虔诚地尽量避免使用`Session`:)

在这种情况下，这可能是总体上更好的方法，您仍然可以使用您预期的 RESTful 方法，每次将值传递给 Web 方法。但是，您还需要在客户端*增加该值。*

您所犯的最初错误是认为代码将重新渲染`Session`多次引用的那一行。因此，您应该将其呈现为 JavaScript 值，然后根据该值进行操作，而不是依赖于`Session`存储此值。像这样的东西：

```
var rowCount = <%= Convert.ToInt16(Session["count_of_rows_displayed"].ToString() %>;

function sendData() {
    $.ajax({
        type: "POST",
        url: "insaat.aspx/GetData",
        data: {'number_of_rows': rowCount },
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: "true",
        cache: "false",

        success: function (msg) {
            $("#myDiv").append(msg.d);
            rowCount++;
        },

        Error: function (x, e) {
            alert("Some error");
        }
    });
} 
```

# php - Online game task time, what to use? Cron Jobs?

> ID：15255607
> 
> 赞同：0
> 
> 时间：2013-03-06T18:53:15.017
> 
> 标签：php, database, cron, clock, countdown

Well, I'm trying to develop something like what happens with online games. For example, lets say you want to upgrade something on the game(web-browser game).

You click, then comes a countdown clock and only when this "clock" finishes your "something" is upgraded.Another thing is that you don't need to be online when the countdown becomes zero to make your "something" upgrade.

I wonder how is this done using PHP?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:12:14.697

你正在以一种非常“势在必行”的方式解决这个问题：

1.  开始做某事
2.  等一下
3.  将其标记为已完成

您可以通过不同的方式来获得相同的结果：

*   在时间 X 开始升级
*   X+t时刻，升级完成

因此，在开始升级时，您存储当前时间 + 持续时间或完成时间。对您显示的用户：

*   一切之前：一个开始升级的按钮
*   开始后：倒计时剩余时间，直到到达 X+t
*   X+t 后：“升级完成”消息

如果您还需要根据升级状态（例如健康点）修改其他变量，请不要将其视为在升级完成后修改数据库中的 HP 值。根据已完成升级的历史计算 HP。

# lotus-notes - How to create action hotspot in UI document

> ID：15255608
> 
> 赞同：0
> 
> 时间：2013-03-06T18:53:15.403
> 
> 标签：lotus-notes

I've got some nice little LotusScript that I can put into the Click event of an Action Hotspot in a rich text field when I'm sending an email manually. Is there a way to programmatically create that in the UI?

My script determines the user's home server and then opens a specific document in the replica of a training database on their home server. I could create these messages with hotspots manually and provide them to the folks who want to email them out. Of course, time being money and the task being boring, I'd rather automate it. I know that I could do this by using a stored form, but am wondering if the greater capability exists, as I can see further applications for it.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:21:12.983

我过去使用的一个技巧是在数据库中创建个人资料文档，并将一些富文本存储在该个人资料文档的字段中。然后，当我需要以编程方式发送电子邮件时，我可以从配置文件文档中获取富文本字段，并使用 AppendRTItem 将其放入电子邮件正文中。这应该适用于任何类型的富文本，包括热点。

注意：这在 UI 中无法用于填充新电子邮件。不过，如果您完全在代码中生成电子邮件，它确实有效。

# android - How to convert a Drawable image from resources to a Bitmap

> ID：15255611
> 
> 赞同：30
> 
> 时间：2013-03-06T18:53:22.567
> 
> 标签：android, image, email, bitmap, drawable

I were trying to attach images from Drawable to an email (from my app to Gmail app)

I have tried the next code:

```
 Intent emailintent2 = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE);
        emailintent2.setType("image/*");
        emailintent2.putExtra(Intent.EXTRA_EMAIL, emailaddress2);
        emailintent2.putExtra(Intent.EXTRA_SUBJECT, CorAsunto);
        emailintent2.putExtra(Intent.EXTRA_TEXT, message2);

        ArrayList<Uri> uris = new ArrayList<Uri>();
        uris.add(Uri.parse("android.resource://" + getPackageName() + "/" + R.drawable.image1));
        uris.add(Uri.parse("android.resource://" + getPackageName() + "/" + R.drawable.image2));

        emailintent2.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris);
        startActivity(emailintent2); 
```

But when I attach the image to the email I get the attach without the extension ".png" and thats is a big problem.

So I think in try to convert this Drawable images to Bitmap and also I think that the ArrayList will have to be Bitmap. I think that I will get the image has image defined in the attachment.

If it is possible, can someone tell me how to do it? Convert to Bitmap, add to Arraylist and attach the image.

If I am wrong in all what I said, can someone give me a solution? I need to attach the images from Drawable to the email with the extension (.png).

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2015-05-13T06:35:06.097

**有 3 种方法可以执行转换：**

1.  设置`ImageView`与`resource image`

    ```
    imageView.setImageResource(R.drawable.icon); 
    ```

    然后从 imageView 获取位图

    ```
    Bitmap bitmap = ((BitmapDrawable)image.getDrawable()).getBitmap(); 
    ```

2.  直接获取drawable资源`Resource ID`

    ```
    Bitmap icon = BitmapFactory.decodeResource(getResources(),R.drawable.profile_circle); 
    ```

3.  设置图像`ImageView`然后将其转换为`Bitmap`（也适用于 svg/VectorDrawable）

    ```
    ImageView imgView = (ImageView) findViewById(R.id.ImageView);
    imgView.setImageResource(R.drawable.abc_image);
    z.setDrawingCacheEnabled(true);
    Bitmap bitmap = Bitmap.createBitmap(v.getDrawingCache()); 
    ```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-03-06T19:03:38.133

```
Drawable myDrawable = getResources().getDrawable(R.drawable.anImage);
Bitmap anImage      = ((BitmapDrawable) myDrawable).getBitmap(); 
```

也可以在带有`<bitmap>`元素的 XML 文件中定义。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-06T19:12:57.787

这是一段代码，只需检查一下：

```
Bitmap Icon = BitmapFactory.decodeResource(getResources(), R.drawable.large_icon); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-02-06T09:31:18.630

```
Bitmap icon = BitmapFactory.decodeResource(mContext.getResources(),
            R.drawable.ic_launcher); 
```

mContext 是您的活动上下文。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-01-29T08:48:30.773

**直接**的方法是：

```
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.image); 
```

如果您在 .xml 可绘制文件**中将位图**定义为：

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@[package:]drawable/drawable_resource"
    android:antialias=["true" | "false"]
    android:dither=["true" | "false"]
    android:filter=["true" | "false"]
    android:gravity=["top" | "bottom" | "left" | "right" | "center_vertical" |
                      "fill_vertical" | "center_horizontal" | "fill_horizontal" |
                      "center" | "fill" | "clip_vertical" | "clip_horizontal"]
    android:mipMap=["true" | "false"]
    android:tileMode=["disabled" | "clamp" | "repeat" | "mirror"] /> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-04T11:04:12.410

方法1：您可以像这样直接转换为位图

```
 Bitmap myLogo = BitmapFactory.decodeResource(context.getResources(), R.drawable.my_drawable); 
```

方法 2：您甚至可以将资源转换为可绘制对象，并从中获得像这样的位图

```
Bitmap myLogo = ((BitmapDrawable)getResources().getDrawable(R.drawable.logo)).getBitmap(); 
```

对于 API > 22 getDrawable 方法移动到 ResourcesCompat 类所以你做这样的事情

```
Bitmap myLogo = ((BitmapDrawable) ResourcesCompat.getDrawable(context.getResources(), R.drawable.logo, null)).getBitmap(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-03-14T11:46:21.707

```
public Bitmap convertToBitmap(Drawable drawable, int widthPixels, int heightPixels) {
    Bitmap mutableBitmap = Bitmap.createBitmap(widthPixels, heightPixels, Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(mutableBitmap);
    drawable.setBounds(0, 0, widthPixels, heightPixels);
    drawable.draw(canvas);

    return mutableBitmap;
} 
```

来自[https://msol.io/blog/android/android-convert-drawable-to-bitmap/](https://msol.io/blog/android/android-convert-drawable-to-bitmap/)为我工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-11T13:49:05.047

```
 public Bitmap getBitmap(@DrawableRes final int resId) {
        Drawable drawable = getResources().getDrawable(resId);;
        Canvas canvas = new Canvas();
        Bitmap bitmap = Bitmap.createBitmap(drawable.getIntrinsicWidth(),
                drawable.getIntrinsicHeight(),
                Bitmap.Config.ARGB_8888);
        canvas.setBitmap(bitmap);
        drawable.setBounds(0, 0, drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight());
        drawable.draw(canvas);
        return bitmap;
    } 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-02-07T08:20:40.690

就这么简单

```
val bitmap = BitmapFactory.decodeResource(resources, R.drawable.some_image) 
```

我的矢量图像为空，但**png**图像资源工作正常。

# google-app-engine - App engine datastore inconsistent?

> ID：15255612
> 
> 赞同：1
> 
> 时间：2013-03-06T18:53:25.720
> 
> 标签：google-app-engine, google-cloud-datastore

This is so weird...

First of all this query works in the datastore viewer, ie. it returns the correct row.

```
SELECT * FROM Level where short_id = 'Ec71eN' 
```

But if I run this

```
Level.all().filter("short_id = ", 'Ec71eN').get() 
```

it returns **None**, if I run this:

```
db.GqlQuery("SELECT * FROM Level where short_id = '%s'" % 'Ec71eN').get() 
```

it also returns **None**. If I run this:

```
level = Level.get_by_id(189009) 
```

it returns the correct row *(189009 is the id for the correct row)*

Puzzling? What can be wrong here? I have never seen anything like this before, it has worked correctly for at least a couple of weeks in production... I think I have at least two cases now where it dosent work starting today.

* * *

UPDATE: This can not be a eventually consistent problem since the row was 7 hours old when I tried the above. I had two rows with same symptoms, strangely booth generated by the same users. They where booth "fixed" after I did a manual fecth of their ids by uploading special case code like:

```
if short_id==CASE_1_SHORT_ID: 
     level = Level.get_by_id(CASE_1_ID) 
```

After that the query worked as usual.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T19:15:36.103

你在用HRD吗？什么都没有。你知道它应该是最终一致的吗？

查询操作最终是一致的。Get-by-id 操作是完全一致的。

您描述的是正确的数据存储行为。数据存储查看器操作返回正确的结果有点奇怪，但它可能在数据存储操作上击中了单独的平板电脑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:16:25.807

鉴于它是在 7 小时前创建的，“最终一致性”*通常*需要几秒钟到几分钟的时间。如果最终一致性是问题，请多次运行相同的查询方法，看看是否返回相同的结果。如果它使用相同的方法连续返回相同的结果，那么它很可能不是最终的一致性问题。你也应该切换到 NDB API 来查询数据——它好 1000 倍，而且 Guido 也在研究它——所以你知道它很好。NDB 是否表现出同样的不一致？

# java - 级联保存具有外键的实体对象作为复合主键的一部分

> ID：15255615
> 
> 赞同：5
> 
> 时间：2013-03-06T18:53:27.350
> 
> 标签：java, spring, hibernate, jpa, spring-mvc

我想将我的`QuestionCompletion`班级对象与所有子元素一起保留。其中一个孩子有一个复合主键。作为这个主键的一部分，我还有另一个实体的外键。结果我收到了这个错误：

```
Exception caught during request processing: javax.ejb.EJBTransactionRolledbackException:
could not set a field value by reflection setter of com.example.model.domain.QuestionCompletionAnswerPK.questionCompletionId
javax.ejb.EJBTransactionRolledbackException: could not set a field value by reflection
setter of com.example.model.domain.QuestionCompletionAnswerPK.questionCompletionId 
```

最后一个“由”当然是`NullPointerException`：

```
Caused by: java.lang.NullPointerException 
```

这是我的代码的一部分。最后一行导致错误。

```
QuestionCompletion questionCompletion = new QuestionCompletion();
List<QuestionCompletionAnswer> answers = new ArrayList<QuestionCompletionAnswer>();
for (;;) { // loop isn't important; it's loop for answers
    ExtendedQuestion extendedQuestion = new ExtendedQuestion();
    extendedQuestion.setId(extendedQuestionId); //extendedQuestionId is known to me in that place
    for (;;) { // loop isn't important; it's loop for question answers
        //questionCompletion and extendedQuestion are popualted here
        QuestionCompletionAnswer questionCompletionAnswer = new QuestionCompletionAnswer();
        questionCompletionAnswer.setQuestionCompletion(questionCompletion); 
        questionCompletionAnswer.setExtendedQuestion(extendedQuestion); 
        answers.add(questionCompletionAnswer);
    }
}
questionCompletion.setAnswers(answers);
questionCompletionService.saveOrMerge(questionCompletion); 
```

这是我想坚持所有子元素的基本实体类。我已经意识到这`List<QuestionCompletionAnswer>`会导致问题。我曾经`cascade = CascadeType.ALL`也允许保留子元素。

```
@javax.persistence.Entity
@org.hibernate.annotations.Entity(dynamicUpdate = true)
@Table(name = "question_completion")
public class QuestionCompletion implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "question_completion_gen")
    @SequenceGenerator(name = "question_completion_gen", sequenceName = "question_completion_id_seq")
    @Column(name = "question_completion_id")
    private Long id;

    @OneToMany(cascade = CascadeType.ALL)
    @JoinColumn(name = "extended_question_id")
    protected List<QuestionCompletionAnswer> answers;
} 
```

这是我的班级 - 班级的主键`QuestionCompletionAnswer`。

```
@Embeddable
public class QuestionCompletionAnswerPK implements Serializable {

    @Column(name = "question_completion_id")
    protected Long questionCompletionId;

    @Column(name = "extended_question_id")
    protected Long extendedQuestionId;
} 
```

这是使用我的`EmbeddedId`. 属性`questionCompletionId`和`questionCompletionId`是其他一些实体的外键，所以我将这些实体的整个对象也放在下面，并带有`@MapsId`注释。

```
@javax.persistence.Entity
@org.hibernate.annotations.Entity(dynamicUpdate = true)
@Table(name = "extended_question_answer")
public class QuestionCompletionAnswer implements Serializable {

    @EmbeddedId
    private QuestionCompletionAnswerPK id;

    @ManyToOne
    @MapsId(value = "questionCompletionId")
    @JoinColumn(name = "question_completion_id", nullable = false, insertable = false, updatable = false)
    protected QuestionCompletion questionCompletion;

    @ManyToOne
    @MapsId(value = "extendedQuestionId")
    @JoinColumn(name = "extended_question_id", nullable = false, insertable = false, updatable = false)
    protected ExtendedQuestion extendedQuestion;
} 
```

你能告诉我我的注释是否正确吗？也许我混合了几种方法。或者在这种情况下，我不能将我的基本对象及其所有子元素持久化。

**编辑**

现在我的映射看起来像：

```
@javax.persistence.Entity
@org.hibernate.annotations.Entity(dynamicUpdate = true)
@Table(name = "question_completion")
public class QuestionCompletion implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "question_completion_gen")
    @SequenceGenerator(name = "question_completion_gen", sequenceName = "question_completion_id_seq")
    @Column(name = "question_completion_id")
    private Long id;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "questionCompletion")
    protected List<QuestionCompletionAnswer> answers;
} 
```

类的代码`QuestionCompletionAnswerPK`是相同的。

```
@javax.persistence.Entity
@org.hibernate.annotations.Entity(dynamicUpdate = true)
@Table(name = "extended_question_answer")
public class QuestionCompletionAnswer implements Serializable {

    @EmbeddedId
    private QuestionCompletionAnswerPK id;

    @ManyToOne(cascade = CascadeType.PERSIST)
    @MapsId(value = "questionCompletionId")
    @JoinColumn(name = "question_completion_id", nullable = false)
    protected QuestionCompletion questionCompletion;

    @ManyToOne
    @MapsId(value = "extendedQuestionId")
    @JoinColumn(name = "extended_question_id", nullable = false)
    protected ExtendedQuestion extendedQuestion;
} 
```

使用该映射，我仍然遇到相同的异常。

**编辑#2** 但是，当我`QuestionCompletionAnswer`以这种方式更改课程时：

```
@javax.persistence.Entity
@org.hibernate.annotations.Entity(dynamicUpdate = true)
@Table(name = "extended_question_answer")
public class QuestionCompletionAnswer implements Serializable {

    @EmbeddedId
    private QuestionCompletionAnswerPK id;

    @ManyToOne(cascade = CascadeType.PERSIST)
    @JoinColumn(name = "question_completion_id", nullable = false, insertable = false, updatable = false)
    protected QuestionCompletion questionCompletion;

    @ManyToOne
    @JoinColumn(name = "extended_question_id", nullable = false, insertable = false, updatable = false)
    protected ExtendedQuestion extendedQuestion;
} 
```

我得到了那个例外：

```
Caused by: org.hibernate.id.IdentifierGenerationException: null id generated 
for:class com.example.model.domain.QuestionCompletionAnswer 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:03:09.353

编辑 1 和 2 仍然不对。您需要在关系上指定 mapid，或者您必须自己设置嵌入 id 中的字段。并且当您使用 mapid 时，您不应该将连接列标记为 insertable=false，否则 jpa 无法为您插入值。我看到的最后一个问题是新问题没有持久化，因此它没有分配答案可以引用的 id - 您需要在 for 循环中显式保留新问题或将答案中的关系标记为级联持续存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:19:09.657

为什么要混合 jpa 和 hibernate 注释？仅 jpa 注释就足够了。尝试使用以下映射（我删除了类`QuestionCompletionAnswerPK`）：

**QuestionCompletion.java**

```
@Entity
@Table(name = "question_completion")
public class QuestionCompletion {

    @Id
    @SequenceGenerator(name = "question_completion_gen", sequenceName = "question_completion_id_seq")
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "question_completion_gen")
    @Column(name = "question_completion_id")
    private Long id;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "questionCompletion")
    protected List<QuestionCompletionAnswer> answers;
} 
```

**QuestionCompletionAnswer.java**

```
@Entity
@Table(name = "extended_question_answer")
public class QuestionCompletionAnswer implements Serializable {

    @Id
    @ManyToOne
    @JoinColumn(name = "question_completion_fk")
    private QuestionCompletion questionCompletion;

    @Id
    @ManyToOne
    @JoinColumn(name = "extended_question_fk")
    private ExtendedQuestion extendedQuestion;
} 
```

使用此映射，我运行以下测试用例并且它有效：

```
QuestionCompletion questionCompletion = new QuestionCompletion();
ExtendedQuestion extendedQuestion = new ExtendedQuestion();
QuestionCompletionAnswer answer = new QuestionCompletionAnswer();
answer.setQuestionCompletion(questionCompletion);
answer.setExtendedQuestion(extendedQuestion);
questionCompletion.setAnswers(Collections.singletonList(answer));
...
session.save(extendedQuestion);
session.save(questionCompletion); 
```

# wsh - Use an existing Login (VBS) script and plug (%computer%) in, then trim all but the the last 5 caracters and plug that into another function

> ID：15255618
> 
> 赞同：1
> 
> 时间：2013-03-06T18:53:36.637
> 
> 标签：wsh

I am brand new to VB scripting. Work is making me explore this new avenue. I have always tried to avoid scripting whether it was VB or cmd (windows) because I am a strong believer of Group Policy and not everybody knows the ins and outs of scripting.

To my question or my end result function:

I understand there are many parts of a script I must assemble to do what I want it to do. What I am trying to accomplish is this; We have a windows 2008 domain. our environment is windows XP SP3 and windows 7\. There are a bank of PCs that I must turn on Autologin with different user accounts. The bank of PCs have a specific computer name and a specific user account associated with it. For example, computer name BC-R312-10056 is associated to user account domain\10056 meaning the least 5 characters of the computer name is the allowed user account to log in to the PC and also the password is the same as the username. My task is to run a VB script to first grab the computer name, then strip all characters to only the last 5 characters, then plug that value in to the autologin script in the "username" and "password" (create variables) and presto, slap that into runonce and all computers that this script will run will have autologin enabled with the user name and password uniquely set to last 5 characters of computer name. I hope this makes sense since I have been struggling with this for a few weeks.I have found snippets and already made scripts and trying to modify and combine them to make them work for me but I am just have a hard time figuring out how to strip the characters and pass them into a variable to have them called up in the auto log in script.

I am looking for just guidance since this is my chance to learn this VB lingo and get smart.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T14:02:06.893

要获取计算机名称的最后 5 个字符，请使用

```
strUserName = right(strComputerName, 5) 
```

你可以得到计算机名称

```
Set objNetwork = CreateObject("Wscript.Network")
strComputerName = objNetwork.ComputerName 
```

# c++ - ns2错误运行aomdv模拟代码

> ID：15255622
> 
> 赞同：0
> 
> 时间：2013-03-06T18:53:50.147
> 
> 标签：c++, tcl, ns2

我尝试在 ns-2.34/tcl/ex/wpan 目录中运行演示 tcl 文件。我将协议更改为 AOMDV。我收到以下错误。

```
 (_o14 cmd line 1)
        invoked from within
    "_o14 cmd addr"
        invoked from within
    "catch "$self cmd $args" ret"
        invoked from within
    "if [catch "$self cmd $args" ret] {
    set cls [$self info class]
    global errorInfo
    set savedInfo $errorInfo
    error "error when calling class $cls: $args" $..."
        (procedure "_o14" line 2)
        (SplitObject unknown line 2)
        invoked from within
    "_o14 addr"
        ("eval" body line 1)
        invoked from within
    "eval $node addr $args"
        ("default" arm line 2)
        invoked from within
    "switch -exact $routingAgent_ {
    DSDV {
    set ragent [$self create-dsdv-agent $node]
    }
    DSR {
    $self at 0.0 "$node start-dsr"
    }
    AODV {
    set ragent [$self cre..."
        (procedure "_o3" line 11)
        (Simulator create-wireless-node line 11)
        invoked from within
    "_o3 create-wireless-node"
        ("eval" body line 1)
        invoked from within
    "eval $self create-wireless-node $args"
        (procedure "_o3" line 23)
        (Simulator node line 23)
        invoked from within
    "$ns_ node"
        ("for" body line 2)
        invoked from within
    "for {set i 0} {$i < $val(nn) } {incr i} {
        set node_($i) [$ns_ node]   
        $node_($i) random-motion 0      ;# disable random motion`enter code here`
    }"
        (file "wpan_demo1.tcl" line 109) 
```

为什么我选择AODV作为协议时程序运行的是AODV。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:29:20.180

必须为协议设置 Instproc。否则 ns 无法找到新协议。

# signal-processing - 什么是使用 FFT 方法的 PSD 单位

> ID：15255632
> 
> 赞同：11
> 
> 时间：2013-03-06T18:54:34.653
> 
> 标签：signal-processing, fft

我只是在时域中对信号进行功率谱密度分析。我正在遵循以下中描述的 fft 方法：

[http://www.mathworks.com/support/tech-notes/1700/1702.html](http://www.mathworks.com/support/tech-notes/1700/1702.html)

它给出了 PSD 的真实物理单位。但是，单位是“功率”，是指“V^2/Hz”吗？

如果我取 10*log10(power) 或 10*log10(V^2/Hz)，我得到的单位是“dB/Hz”吗？

那么如何将其转换为 dBm/MHz 呢？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-06T19:16:53.730

这取决于您的时间序列的单位。通常我们认为这只是“幅度”，但如果您的时间序列是一系列电压幅度与时间的关系，那么您的 PSD 估计值将是`Volts^2/Hz`。这是因为 PSD 是原始信号自相关的傅里​​叶变换：自相关的单位为`Volts^2`，通过傅里叶变换运行它会在频率而不是时间上分解这些单位，从而得到 的单位`Volts^2/Hz`。这通常被称为`Watts/Hz`，但从 到 的转换在`Volts^2`物理`Watts`上不是很有意义，因为`W = V^2/R`。

`10*log10(power)`将产生一个单位`dB/Hz`，但请记住，分贝始终是两个功率水平之间的比较；您正在量化权力的比率。[正如这里所解释](http://en.wikipedia.org/wiki/Decibel#Power_quantities)`10*log10(P1/P0)`的，分贝的更好定义是。如果您只是将 PSD bin 估计值插入到此等式中，则您将 PSD bin 设置为并隐式将其与值 1 进行比较。这可能是您想要的，也可能不是。出于可视化目的，这是相当典型的，但如果你有一个标准的参考功率，你应该与之进行比较，你应该使用它来代替。`P1``P0``P0`

假设您试图绘制一个 dB 功率谱密度估计值，以从 转换`Hz`为`MHz`，您只需重新调整频率图的 x 轴。请记住，MHz 只是 100 万赫兹，所以唯一的区别是`240000Hz`=`0.24MHz`

**编辑** mtrw 提出的观点非常有效；如果您正在处理大量数据并且正在平均 FFT 向量，我强烈建议您使用[Multitaper 方法](http://www.mathworks.com/help/signal/ref/pmtm.html)；这是一种在统计上更合理的方法，它牺牲了频率分辨率，以提高对 PSD 估计的信心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-25T22:50:54.403

如果您有一个 W/Hz 的 PSD，即 100 W/Hz，那么您就有 50 dBm/Hz。dB/Hz 或通常含糊不清地使用，而不是 dBm/Hz。Audacity 使用 dB 作为 dBFS 的简写（不是 dBFS/Hz，因为它正在计算 DFT，并且离散频率使用功率谱而不是密度）。达到最大电平 50% 的数字信号的幅度为 -6 dBFS，比满量程低 6 dB – 去除了 MSB，因此是 6dB/位图（因为最大电平的 50% 是 25%最大功率；1/4 = - 6dB)

dBm 是功率相对于 1mW 的对数比，将功率除以 1mW 得到无单位比，然后取对数得到 dB 单位，在这种情况下，将其明确为 dBm 更有意义。

dBc/Hz 是相对于载波功率的比值，它是两个 dBm/Hz 值的比值，这意味着将它们相减得到 dBc/Hz；如果将 W 中的两个线性功率电平相除，然后将比率转换为 dB（或更恰当地为 dBc），则会得到相同的结果。

dB-Hz 是带宽相对于 1Hz 的对数度量，并且

dBJ 是频谱密度的量度，是与 1 焦耳的对数比，因为 W/Hz 确实是 J。

功率谱密度是一个密度函数，因此您需要对其进行积分以获得实际量，例如 V/m 电场的线积分，或每 x 概率的概率密度。这对离散量没有意义，而是使用[功率谱](https://dsp.stackexchange.com/a/41694/38755)类似于概率质量函数。如果您看到 dB（应该用于离散频域）而不是 dBm/Hz，那么这是错误的，但如果您看到它而不是 dBm，那么它是正确的，只要明确参考是什么即可。

# postgresql - Postgres SELECT GROUP BY 出版商最畅销的项目

> ID：15255633
> 
> 赞同：2
> 
> 时间：2013-03-06T18:54:35.343
> 
> 标签：postgresql, select, group-by

我有 3 张桌子：

```
publisher (id serial pkey, pub_name text)
book (id serial pkey, id_pub INTEGER NOT NULL REFERENCES publisher (id), book_name TEXT)
rank (id SERIAL PKEY, id_book INTEGER NOT NULL REFERENCES book (id), week DATE, selling INTEGER) 
```

并且只想列出每个出版商最畅销的书。我现在所拥有的回报是所有书籍的销售：

```
SELECT publisher.pub_name, book.book_name, SUM(rank.selling)
 FROM rank, publisher, book
 WHERE rank.id_book = book.id AND book.id_pub = publisher.id
 GROUP BY publisher.pub_name, book.book_name; 
```

像这样返回：

```
BigPublisher, Book1, 100300
GoodPublisher, BeBook, 10003
BigPublisher, Book2, 50200
OldPublisher, N-Book, 20009
GoodPublisher, CeBook, 4000
GoodPublisher, DeBook, 3001 
```

我在哪里寻找这种结果：

```
BigPublisher, Book1, 100300
GoodPublisher, BeBook, 10003
OldPublisher, N-Book, 20009 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T19:07:01.620

使用窗口函数。请参阅[PostgreSQL 文档中的窗口函数教程](http://www.postgresql.org/docs/current/static/tutorial-window.html)。

您正在寻找以下方面的内容：

```
SELECT
  rank() OVER (PARTITION BY publisher ORDER BY sum_of_sold DESC) AS pos
-- ... FROM clause etc here ...
WHERE pos = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:22:32.110

```
select
    distinct on (pub_name),
    pub_name,
    book_name,
    selling
from (
    select
        publisher.pub_name,
        book.book_name,
        sum(rank.selling) selling
    from
        publisher
        inner join 
        book on book.id_pub = publisher.id
        inner join
        rank on rank.id_book = book.id
    group by 1, 2
) s
order by pub_name, s.selling desc 
```

# c# - 检测对 BindingSource / BindingList 的更改

> ID：15255634
> 
> 赞同：2
> 
> 时间：2013-03-06T18:54:35.793
> 
> 标签：c#, winforms, datagridview, bindingsource, bindinglist

我正在编写一个选项卡式 WinForms 应用程序，其中包含多个绑定到 BindingSources 的 DataGridView 控件。BindingSources 又被绑定到业务对象的 BindingLists。我的业务对象实现了 INotifyPropertyChanged。

我的 TabControl 有三个 TabPage（A、B 和 C）。如果我的用户对选项卡 A 上的 DataGridView 控件中的数据进行了更改，然后尝试切换到选项卡 B 或 C 而不提交更改（在这种情况下，将数据写入磁盘），我需要提示他们保存改变或失去它们。

为了确定是否对给定选项卡进行了更改，我为每个选项卡创建了“pendingChange”变量。每个 DataGridView 控件都有自己的 CellValidating 事件处理程序，在用户进行更改时我会在其中验证数据。在该事件处理程序结束时，如果更改已通过所有验证检查，我将该选项卡的 pendingChange 变量设置为 true。当我的用户单击按钮将更改写回磁盘时，我重置了 pendingChange 变量。因此，每当我的用户尝试更改为不同的选项卡时，我都会检查此变量以确定是否需要先保存任何更改。

现在我意识到这种设计的一个大缺陷是每次单元格失去焦点时都会触发 DataGridView 控件的 CellValidating 事件。所以现在我需要找到一种不同的方法来跟踪单元格值何时更改。DataGridView 控件公开的另一个事件是否更适合此目的？或者也许有一个 BindingList 事件可以帮助我实现这个功能？如果必须，我可以向我的业务对象添加一个布尔“已修改”属性并根据需要进行更新。如果可以避免这种情况，我想这样做是因为 BindingLists 之一在任何给定时间都包含 150,000 个对象，并且迭代可能不会非常快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:40:12.030

BindingSource 有[事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource_events.aspx)。例如[CurrentChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.currentchanged.aspx)事件在当前绑定的项目发生变化时发生。

# jsf-2 - 渲染视图 PENDING_I18N 时出错：找不到具有 id 的复合组件的复合组件根

> ID：15255635
> 
> 赞同：2
> 
> 时间：2013-03-06T18:54:36.637
> 
> 标签：jsf-2, attributes, initialization, components, composite

首先，我是一个新手，我正在尝试在 JSF 2 中实现一个简单的复合组件。我希望从 java 代码初始化我的 CC 的一个属性。

这是使用视图：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:o3="http://emcube.it/components">

<ui:composition template="/WEB-INF/templates/default.xhtml">
    <ui:define name="content">
        <h:form>
        <div>
            <h:outputText value="#{testHome.getMarker()}" />
        </div>
            <h:panelGroup border="1">
                <div>
                <o3:basic id="idBasic" label="xxxEtichetta" value="VALORE"/>
                <!-- 
                <o3:edit id="idCod" value="#{testHome.instance.codice}" label="Codice"/>
                    <h:inputText id="idCod" value="#{testHome.instance.codice}" />
                    <h:outputLabel value="Codice" for="idCod" style="width:100px;"/>
                 -->
                </div>
                <div>
                    <h:inputText id="idDes" value="#{testHome.instance.descrizione}"/>
                    <h:outputLabel value="Descrizione" for="idDes"  style="width:100px;"/>
                </div>
            </h:panelGroup>
            <h:panelGrid columns="2">
                <h:commandButton action="#{testHome.persist()}" value="Salva"/>
                <h:commandButton action="#{testHome.leave()}" value="Esci"/>
            </h:panelGrid>
        </h:form>
        <div>
            <h:messages id="msgid" showSummary="true" 
                        showDetail="true"
                        errorStyle="color: #d20005" 
                        infoStyle="color: blue"/>
        </div>      
    </ui:define>
</ui:composition>
</html> 
```

这是复合组件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:cc="http://java.sun.com/jsf/composite"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
<head>
<title>Not present in rendered output</title>
</head>
<body>
<cc:interface componentType="it.opencube.basicCC">
    <cc:attribute name="label" required="true" default="Etichetta"/>
    <cc:attribute name="value" required="true"/>
</cc:interface>
<cc:implementation>
    <h:outputLabel value="#{cc.attrs.label}" for="#{cc.clientId}itext"/>
    <h:inputText id="#{cc.clientId}itext" value="{cc.attrs.value}"/>
</cc:implementation>
</body>
</html> 
```

这是组件类：

```
@FacesComponent("it.opencube.basicCC")
public class BasicCC extends UIInput implements NamingContainer {

    private String label;
    private String value;
//getters and setters here

    @Override
    public void encodeBegin(FacesContext context) throws IOException {
        System.out.println("Entering encodeBegin");
        context.getAttributes().put("value", "NEW STRING VALUE");
        super.encodeBegin(context);
    }
    @Override
    public String getFamily() {
        return UINamingContainer.COMPONENT_FAMILY;
    } 
```

最后这就是我的 taglib.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<facelet-taglib xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd"
    version="2.0">
    <namespace>http://emcube.it/components</namespace>
    <composite-library-name>components</composite-library-name>
    <tag>
        <tag-name>basic</tag-name>
        <component>
            <description>Componente di prova</description>
            <component-type>it.opencube.basicCC</component-type>
            <renderer-type>javax.faces.Composite</renderer-type>
            <!-- <handler-class>org.richfaces.view.facelets.html.TogglePanelTagHandler</handler-class> -->
        </component>
        <attribute>
            <description>Valore del componente</description>
            <name>value</name>
            <type>java.lang.String</type>
        </attribute>
        <attribute>
            <description>Etichetta del componente</description>
            <name>label</name>
            <type>java.lang.String</type>
        </attribute>
    </tag>
</facelet-taglib> 
```

但是当我运行我得到这个错误：

```
19:17:09,781 GRAVE [javax.enterprise.resource.webcontainer.jsf.application] (http-localhost-127.0.0.1-8080-2) Error Rendering View[/testHome.xhtml]: java.io.IOException: PENDING_I18N: Unable to find composite  component root for composite component with id idBasic and class it.emcube.opencube.core.jsf2.components.BasicCC
    at com.sun.faces.renderkit.html_basic.CompositeRenderer.encodeChildren(CompositeRenderer.java:73) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at it.emcube.opencube.core.jsf2.components.BasicCC.encodeChildren(BasicCC.java:59) [classes:]
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.renderkit.html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:105) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.solder.servlet.exception.CatchExceptionFilter.doFilter(CatchExceptionFilter.java:65) [solder-impl-3.1.0.Final.jar:3.1.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.solder.servlet.event.ServletEventBridgeFilter.doFilter(ServletEventBridgeFilter.java:74) [solder-impl-3.1.0.Final.jar:3.1.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_38] 
```

在我的示例中，我肯定遗漏了一些基本的东西，但我真的无法自己找到它。感谢任何人都可以提供帮助

# php - 命名空间，使用到达文件上一个文件夹

> ID：15255636
> 
> 赞同：0
> 
> 时间：2013-03-06T18:54:38.127
> 
> 标签：php, namespaces

我试图到达一个类文件，我在顶部定义了命名空间，其中包含以下内容：文件：config.php

```
namespace Config;

class Config
{
    // Stuffs
} 
```

文件结构是这样的

```
public_html
- admin
-- header.php
-- footer.php
-- file-trying-to-reach-config.php
- config.php 
```

我试图从 file-trying-to-reach-config.php 访问 config.php 文件。在 file-trying-to-reach-config.php 的顶部，我使用：

```
use \Config; 
```

但我不知道我是如何使用文件夹上移到达 config.php 的。谷歌搜索和堆叠，但没有找到任何关于它的信息。我是否误解了命名空间和使用的概念？

如何使用 file-trying-to-reach-config.php 访问 config.php？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:12:28.963

[如本文档](http://php.net/manual/en/language.namespaces.importing.php)中所述，该`Use`运算符用于在 PHP 中为命名空间命名。当您有复杂的命名空间时，这实质上使您能够为类创建短名称。

您需要将 config.php[`include`](http://www.php.net/manual/en/function.include.php)文件[`require`](http://www.php.net/manual/en/function.require.php)放入要调用它的位置。例如

```
<?php

   include_once('../config.php');
   $config = new \Config\Config(); 
```

对于更高级的处理方法，您可以查看[Autoloading](http://www.php.net/autoload)它将自动执行包含位。

# jquery - Jquery UI Accordion，加载内容后不刷新

> ID：15255641
> 
> 赞同：0
> 
> 时间：2013-03-06T18:54:53.350
> 
> 标签：jquery, wordpress, jquery-ui-accordion

在 wordpress 网站中，我加载了侧面类别和类别内容。现在我的内容是使用手风琴格式设置的。因此，您对我所做的事情有所了解，这是我正在处理的内容的[链接。](http://perutravelsolutions.com/utp/admision/)我的问题是你可以看到，当我点击左侧的一个类别时，手风琴第一次工作，但是当我点击另一个类别时它完全搞砸了。我已经尝试了几件事，但什么也没做……这就是我到目前为止所拥有的：

```
$(document).ready(function () {
$('.categorias li').click(function(){
        var id = $(this).attr('id');
        $('#subtitle').html($(this).find('#title').html()); 
    $('#acc').html($('#' + id + '-content').html()).accordion({
            autoheight: false

       });

}); 
```

我也试过：

```
 $('#acc').html($('#' + id + '-content').html())
 $('#acc').accordion(.accordion({ clearStyle: true }); 
```

但正如你所见，什么也没做。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:05:12.717

这可能会或可能不会帮助您简化，但我想我会抛弃我如何处理手风琴菜单。它在每个标签之间折叠...

```
<div id="right_area">
    <h3><a href="#">New Client Entry:</a></h3>
        <div id="sub_cat">
            <h4><a href="#">this is sub:</a></h4>
            <div>yo yo</div>
            <h4><a href="#">this is sub:</a></h4>
            <div>yo yo</div>
        </div>
    <h3><a href="#">Old Client Entry:</a></h3>
    <div>hello there</div>
</div>

$(document).ready(function() {
    $("#right_area").accordion({
        collapsible: true,
        active: false,
        clearStyle: true
    });
  });

    $("#sub_cat").accordion({
        collapsible: true,
        active: false,
        clearStyle: true
    }); 
```

[http://jsfiddle.net/LSg36/2/](http://jsfiddle.net/LSg36/2/)

# sql - 多个 GROUP BY？

> ID：15255643
> 
> 赞同：0
> 
> 时间：2013-03-06T18:54:56.653
> 
> 标签：sql, sql-server

我希望能够编写一个 SQL 查询，该查询可以`COUNT`根据不同的条件使用多个 s 并将值组合在一起。

假设我有一个（固定的）场景，我改变了我的产品的价格点，并想分析人们支付了什么。

```
SELECT Product, COUNT(*) as Total FROM Orders WHERE Location = 'Amazon'

SELECT Product, COUNT(*) as HighPriceCount FROM Orders 
  WHERE Location = 'Amazon' and PRICE > 10 
```

从这里，我希望能够看到这样的结果。

```
--------------------------------------------
| Product | Total | HighPriceCount | Avg   |
--------------------------------------------
| Game 1  | 50    | 20             | .40   |
| Prod 2  | 300   | 200            | .66   | 
-------------------------------------------- 
```

平均位置 是“10 以上的价格”/“总售出”。我最初的方法是分组，`Product`但我想看看“内部选择”是否是唯一的路径，或者是否有更优雅的方式来做到这一点。好像有很多重复？这是我最初的查询版本。

```
-- I don't know if this works?
SELECT Product, COUNT(*) AS Total, 
(
   SELECT Product, COUNT(*) FROM Orders WHERE Location = 'Amazon' and Price > 10
   GROUP BY Product
) AS HighPriceCount,
(Total / HighPriceCount) AS Avg
From Orders
WHERE Location = 'Amazon'
GROUP BY Product 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:01:42.380

要获得计数，请使用`CASE`for `HighPriceCount`，如下所示。聚合函数不计算在内`null`，除了`COUNT(*)`

[Sql-Fiddle 示例](http://sqlfiddle.com/#!3/02957/2)

```
SELECT Product, COUNT(*) as Total, 
       COUNT(case when price > 10 then 1 end) as HighPriceCount,
       SUM(case when price > 10 then price end)/COUNT(*) as Avg
FROM Orders 
WHERE Location = 'Amazon'
GROUP BY Product 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:02:20.150

您是否尝试使用 SUM 和 CASE？（不能正确尝试知道我认为它应该有效）

```
SELECT PRODUCT,
       SUM(CASE WHEN PRICE>10 THEN 1 ELSE 0 END) as highpricecount,
       COUNT(CASE WHEN PRICE>10 THEN 1 END) as total
FROM Orders 
WHERE LOCATION='AMAZON'
GROUP BY PRODUCT; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T19:05:01.547

这是我的...

```
Select  Product, Total, HighPriceCount, HighPriceCount/Total As Avg
From   (Select  Product,
                Sum(Case When Location = 'Amazon' Then 1 Else 0 End) As Total,
                Sum(Case When Location = 'Amazon' And Price > 10 Then 1 Else 0 End) As HighPriceCount,
        From    Orders
        Group   By Product) o 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T19:14:40.710

这是我的

```
Select 
Product, Sum(Total) as Total, Sum(HighPriceCount) as HighPriceCount,Total/HighPriceCount as AVG
from 
(
select Product, 1 as Total, case WHEN PRICE>10 THEN 1 ELSE 0 END as HighPriceCount
from Orders where LOCATION='AMAZON'
) 
group by Product 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T19:30:40.103

您的查询不起作用。请试试这个：

```
select A.Product, A.Total, ISNULL(B.HighPriceCount,0), B.HighPriceCount*1.0/A.Total*1.0 as [Avg]
(select Product, count(*) as Total
from Orders 
where Location='Amazon'
group by Product ) A
left join 
(SELECT Product, COUNT(*) as HighPriceCount 
from Orders 
where Location = 'Amazon' and Price > 10
group by Product) B
on A.Product = B.Product 
```

我没有你的数据库，所以可能有错字，我无法测试这个查询，但是你做了一些改变，它应该可以工作。

# php - 执行mysql查询后如何重用结果变量

> ID：15255645
> 
> 赞同：0
> 
> 时间：2013-03-06T18:55:02.547
> 
> 标签：php, mysql

我正在执行这样的查询（PHP + MySQL）：

```
$query = "SELECT * FROM tablename WHERE 1";
$result = mysql_query($query);

while($row = mysql_fetch_array($result))
{
    // PHP Statement 
} 
```

我想在同一页面上再次使用相同的结果，然后我需要再次执行查询，如下所示：

```
$query = "SELECT * FROM tablename WHERE 1";
$result = mysql_query($query);

while($row = mysql_fetch_array($result))
{
    // PHP Code 
} 
```

然后它工作。但如果我只使用

```
while($row = mysql_fetch_array($result))
{
    // PHP Code
} 
```

然后它不起作用。有没有其他方法可以在同一页面上多次使用结果而不每次都执行查询？

我知道我可以使用相同的结果来制作一个数组。但还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:59:01.767

我相信[mysql_data_seek](http://ca2.php.net/manual/en/function.mysql-data-seek.php)会为你做到这一点。

```
<?php
function mysql_pointer_position($result_set) {
        $num_rows = mysql_num_rows($result_set);
        $i = 0;
        while($result = mysql_fetch_array($result_set)) {
            $i++;
        }
        $pointer_position = $num_rows - $i;

//Return pointer to original position
        if($pointer_position <= $num_rows - 1) {
            mysql_data_seek($result_set, $pointer_position);
        }
        return $pointer_position;
    }
?> 
```

# vba - 自定义事件中的内置参数

> ID：15255646
> 
> 赞同：1
> 
> 时间：2013-03-06T18:55:05.773
> 
> 标签：vba, ms-access

当我想向 Microsoft Access 2000 中构建的表单添加事件时，我使用该`[Event Procedure]`选项。我的一些事件是我在 VBA 中创建的全局函数，因此我可以在事件属性中输入函数名称。例如，我的表单上有一个后退按钮，该按钮将其作为其 OnClick 事件属性：`=GoBack()`。

我希望能够将自定义函数中的内置参数用作事件属性。例如，`Form_Error`事件有两个参数：`DataErr`和`Response`。在我的 global`=HandleFormError()`中，我希望能够设置`Response`变量。

这是可能的，如果是这样，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:14:27.957

我会说你最好的选择是做这样的事情

```
Private Sub Form_Error(DataErr As Integer, Response As Integer)
    HandleFormError DataErr, Response
End Sub 
```

并在`HandleFormError`. 没有办法链接`Form_Error`到除`Sub Form_Error(DataErr As Integer, Response As Integer)`. 这只是一个 VBA 限制。

对于像您这样的事件，`Click`您可以将您的函数放在表达式构建器中（使复制/粘贴更容易），但在常规`Form_click`样式事件中这样做可能也一样好。

# actionscript-3 - Actionscript3 监听自定义事件

> ID：15255649
> 
> 赞同：0
> 
> 时间：2013-03-06T18:55:19.007
> 
> 标签：actionscript-3, actionscript, event-listener, starling-framework

我正在使用八哥，但这不应该改变任何东西。我有一个从 WorldManager.as 发送的自定义事件（要点：[https](https://gist.github.com/raimonds1503/5101967) ://gist.github.com/raimonds1503/5101967 ），我正在使用初始化方法中的游戏收听它。

通过跟踪所有内容，事件被分派并添加事件侦听器，但从不调用回调方法。我在听错误的对象吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T19:33:59.413

您正在监听已经触发的事件。您需要提前添加事件侦听器。

```
public class Game extends Sprite 
{       
    public function Game() 
    {
        this.addEventListener(Event.ADDED_TO_STAGE, init);
    }

    private function init(e:Event):void 
    {
        removeEventListener(Event.ADDED_TO_STAGE, init);
        trace("Starling running");
        GV.worldManager = new WorldManager();
        GV.worldManager.addEventListener(NewWorldEvent.CHANGE, addToStage); 
        this.addChild(GV.worldManager);
        GV.worldManager.setWorld(new World());
    }

    private function addToStage(e:NewWorldEvent):void 
    {
        this.addChild(e.world as World);
        trace("Handling new world event!");
    }
} 
```

# c# - c#上奇怪的输入错误

> ID：15255650
> 
> 赞同：1
> 
> 时间：2013-03-06T18:55:26.220
> 
> 标签：c#, multithreading, input, xna-4.0

Errm...让我们看看...我的项目遇到的错误是...奇怪。

我正在制作一个怪物训练游戏，当它进入战斗模式时，可能会出现一个错误，一旦你按下控制左侧或右侧的键，然后再进入战斗。

这个错误很简单，例如，如果你按下 A（又名左键），当它让你选择你将要采取的行动时，游戏会一直识别好像仍然按下 A 按钮，即使它不是。

这是导致错误的代码：

```
 public static int ChooseAction()
    {
        int choosen = 0;
        Battle.CanAct = true;
        Battle.ChoosenAction = -1;
        while (Battle.ChoosenAction == -1)
        {
            if (Battle.KeyDelay == 0)
            {
                if (Procedures.ButtonPressed(Procedures.KeyCodes.KeyRight))
                {
                    Battle.KeyDelay = 64;
                    int a = Battle.SelectedAction;
                    a++;
                    if (a >= BattleActions.Length)
                    {
                        a -= BattleActions.Length;
                    }
                    Battle.SelectedAction = a;
                }
                else if (Procedures.ButtonPressed(Procedures.KeyCodes.KeyLeft))
                {
                    Battle.KeyDelay = 64;
                    int a = Battle.SelectedAction;
                    a--;
                    if (a < 0)
                    {
                        a += BattleActions.Length;
                    }
                    Battle.SelectedAction = a;
                }
                else if (Procedures.ButtonPressed(Procedures.KeyCodes.Action))
                {
                    Battle.ChoosenAction = Battle.SelectedAction;
                }
            }
            if (KeyDelay != 0 && !Procedures.ButtonPressed(Procedures.KeyCodes.KeyRight) && !Procedures.ButtonPressed(Procedures.KeyCodes.KeyLeft))
            {
                KeyDelay = 0;
            }
            if (Battle.KeyDelay > 0)
            {
                Battle.KeyDelay--;
            }
        }
        choosen = Battle.ChoosenAction;
        Battle.CanAct = false;
        return choosen;
    } 
```

我不知道这是否会有所帮助，但该脚本在线程上运行，因为它是根据官方脚本的修改制作的，在 c# 控制台中。
此外，ButtonPress 过程在按钮被按下时返回，但每次调用它都会创建一个新的布尔值。

任何可能导致该错误的线索？

Procedures.ButtonPress(KeyCodes) 脚本。

```
public static bool ButtonPressed(KeyCodes buttonKey)
{
    bool pressed = false;

    switch (buttonKey)
    {
        case KeyCodes.MenuKey:
            if (Keyboard.GetState().IsKeyDown(Microsoft.Xna.Framework.Input.Keys.M) || GamePad.GetState(PlayerIndex.One).IsButtonDown(Microsoft.Xna.Framework.Input.Buttons.Start))
                pressed = true;
            break;

        case KeyCodes.RunKey:
            if (Keyboard.GetState().IsKeyDown(Microsoft.Xna.Framework.Input.Keys.LeftShift) || Keyboard.GetState().IsKeyDown(Microsoft.Xna.Framework.Input.Keys.RightShift) || GamePad.GetState(PlayerIndex.One).IsButtonDown(Microsoft.Xna.Framework.Input.Buttons.B))
                pressed = true;
            break;

        case KeyCodes.KeyUp:
            if (Keyboard.GetState().IsKeyDown(Microsoft.Xna.Framework.Input.Keys.W) || Keyboard.GetState().IsKeyDown(Microsoft.Xna.Framework.Input.Keys.Up) || GamePad.GetState(PlayerIndex.One).IsButtonDown(Microsoft.Xna.Framework.Input.Buttons.DPadUp))
                pressed = true;
            break;

        case KeyCodes.KeyDown:
            if (Keyboard.GetState().IsKeyDown(Microsoft.Xna.Framework.Input.Keys.S) || Keyboard.GetState().IsKeyDown(Microsoft.Xna.Framework.Input.Keys.Down) || GamePad.GetState(PlayerIndex.One).IsButtonDown(Microsoft.Xna.Framework.Input.Buttons.DPadDown))
                pressed = true;
            break;

        case KeyCodes.KeyLeft:
            if (Keyboard.GetState().IsKeyDown(Microsoft.Xna.Framework.Input.Keys.A) || Keyboard.GetState().IsKeyDown(Microsoft.Xna.Framework.Input.Keys.Left) || GamePad.GetState(PlayerIndex.One).IsButtonDown(Microsoft.Xna.Framework.Input.Buttons.DPadLeft))
                pressed = true;
            break;

        case KeyCodes.KeyRight:
            if (Keyboard.GetState().IsKeyDown(Microsoft.Xna.Framework.Input.Keys.D) || Keyboard.GetState().IsKeyDown(Microsoft.Xna.Framework.Input.Keys.Right) || GamePad.GetState(PlayerIndex.One).IsButtonDown(Microsoft.Xna.Framework.Input.Buttons.DPadRight))
                pressed = true;
            break;

        case KeyCodes.Action:
            if (Keyboard.GetState().IsKeyDown(Microsoft.Xna.Framework.Input.Keys.Enter) || GamePad.GetState(PlayerIndex.One).IsButtonDown(Microsoft.Xna.Framework.Input.Buttons.A))
                pressed = true;
            break;

        case KeyCodes.Return:
            if (Keyboard.GetState().IsKeyDown(Microsoft.Xna.Framework.Input.Keys.Escape) || GamePad.GetState(PlayerIndex.One).IsButtonDown(Microsoft.Xna.Framework.Input.Buttons.B))
                pressed = true;
            break;
    }
    return pressed;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:35:59.487

下载 XNA 并设置好一切后（是的，我工作很无聊），我在一个简单的菜单上尝试了代码，它完美地工作。

问题是由于某种原因，XNA 的输入不是线程的。当我使用输入创建另一个线程时，它对我根本不起作用。我尝试了各种键，但没有一个键处于按下状态，但字母“R”一旦按下，它就会保持这种状态。

我还尝试使用 R 来保存原始键盘状态，一旦状态更改，使用原始状态来比较 R 是否被按下并且它是否有效。但是，您只会知道一次 R 被按下，而您将不知道它是否再次被按下。

在完成所有操作后，我在谷歌上搜索，发现建议始终检查您在更新方法的主线程上的输入（就像我最初所做的那样）

希望这会有所帮助=)

# javascript - 奇怪的打字稿错误：“名称g在当前范围内不存在”

> ID：15255653
> 
> 赞同：2
> 
> 时间：2013-03-06T18:55:42.543
> 
> 标签：javascript, node.js, compiler-construction, web, typescript

突然之间，我的代码无法编译，并且 tsc 抱怨“名称 g 在当前范围内不存在”。这是一个非常有趣的错误：

*   我的代码中没有一个名为“g”的变量、类或接口
*   我没有导入名为“g”的模块
*   文件本身未命名为“g”

这是一些代码：

```
export class SpawnMessage implements Message {
    tag: UID;
    id: number;
} 
```

VisualStudio 用红色在“export”的“e”下划线，并抱怨“没有名称 g”。同样的错误信息散布在我的代码中最奇特的地方。

好吧，我想如果 g 如此重要，我会创建它。我在代码顶部添加了一个名为 g 的变量。错误消息并没有消失，它们只是移动了。例如，现在我的一条评论显然是错误的。真的，如果有人告诉我这件事我不会相信，所以我做了一个截图：！[g不存在][1]

不仅仅是 VisualStudio，还有 tsc。我重新启动了 IDE 和 shell，但错误仍然存​​在。自然又换了地方。

什么地方出了错 ？

**更新**：我修复了导出导入语句，但这并没有影响错误。这是 jsfiddle 上的整个文件。代码相当丑陋，请记住这是正在进行的工作。事实上，我只是在错误出现时进行重构，并且从那以后就没有触及该文件。

[http://jsfiddle.net/JT36W/](http://jsfiddle.net/JT36W/)

现在在这三个地方发现了错误：

1.  `Message`接口的右花括号
2.  构造函数最后一行的等号`SpawnMessage`
3.  `requestSpawn`类中方法的return语句前面的一些空格`Game`

**更新 2：** 我重新启动了 VisualStudio 和命令提示符。错误仍然存​​在。然后我重新启动计算机，错误仍然存​​在。你可以看到我很绝望。这就是为什么我将它全部推送到 github，删除我的本地副本并再次克隆 repo。错误消失了。这是完全相同的代码，是完全相同的编译器。它甚至是我驱动器上的相同路径，但 tsc 编译代码。

我不会将其发布为我自己问题的答案，因为它确实令人不满意。如果你们中的一个人可以解释这种奇怪的行为，也许这是一个已知的错误，我很乐意接受他的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T06:02:00.997

我相信我之前遇到过几次这个错误。当它谈论“g”或“b”时，它是在谈论它为您的类维护的内部原型继承链。对我来说，当在代码流中`Message`在 child 之后定义基类时，会发生此错误或类似情况。`SpawnMessage`只需先定义基类。

希望能帮助到你。

# php - 文件时间的 Cron 作业错误

> ID：15255654
> 
> 赞同：0
> 
> 时间：2013-03-06T18:55:43.293
> 
> 标签：php, ubuntu, cron

我有一个 php 脚本，它可以直接从网页检查站点地图的所有 html 文件的最后修改时间，但是当我将它作为 cron 作业运行时，如果出现错误。

下面是脚本、cron 作业和错误。

```
$path = "/home/mydir/"; 

// Open the folder 
$dir_handle = @opendir($path) or die("Unable to open $path"); 

// Loop through the files 
while ($file = readdir($dir_handle)) { 
    if($file == "." || $file == ".." || $file == "index.php" ) 

        continue; 
        if(strpos($file, ".html") !== false) {
        $a=filemtime($file);
        }
    }
} 
```

php /home/mydir/pdate.php /dev/null && echo "站点地图完成"$(date) >>/var/log/cron.log

错误 PHP 警告：filemtime(): stat failed

请问我应该为这个改变什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:02:21.633

您在另一个目录中。任何一个：

```
chdir($path); 
```

或者：

```
filemtime($path.DIRECTORY_SEPARATOR.$file); 
```

# javascript - 在两个不同的 div 中拆分 ajax 响应

> ID：15255655
> 
> 赞同：1
> 
> 时间：2013-03-06T18:55:49.203
> 
> 标签：javascript, jquery, ajax

我有一个这样的 Ajax 代码：

```
$j(document).ready(function () {

    function loading_show() {
        $j('#loading').html("<img src='images/loading.gif'/>").fadeIn('fast');
    }

    function loading_hide() {
        $j('#loading').fadeOut();
    }

    function loadData(page) {
        loading_show();
        $j.ajax({
            type: "POST",
            url: "load_data.php",
            data: "page=" + page,
            success: function (msg) {
                var $response = $j(msg);

                // Query the jQuery object for the values
                oGlobal = $response.filter('#Z').text();

                $j("#container").ajaxComplete(function(event, request, settings) {
                    loading_hide();
                    $j("#container").html(msg);
                });
            }
        });
    }

    loadData(1); // For first time page load default results

    $j('#container .pagination li.active').live('click', function () {
        var page = $j(this).attr('p');
        loadData(page);
    });
}); 
```

我得到这个回应：

```
<div id="container">
    <div id="Z">JuanFernando</div>
    <div id="q">
        <div class="pagination">
            <ul>
                <li p="1" class="inactive">First</li>
                <li class="inactive">Previous</li>
                <li p="1" style="color:#fff;background-color:#006699;" class="active">1</li>
                <li p="2" class="active">2</li>
                <li p="2" class="active">Next</li>
                <li p="2" class="active">Last</li>
            </ul>
            <input class="goto" size="1" style="margin-top:-1px;margin-left:60px;"
                type="text">
            <input id="go_btn" class="go_button" value="Go" type="button"><span class="total" a="2">Page <b>1</b> of <b>2</b></span>
        </div>
    </div>
</div> 
```

我想提取“JuanFernando”以便单独显示在 div 容器中，并且我希望其余的响应可以显示在其他不同的 div 中，例如：container2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:14:59.410

ajaxComplete 不是您想在这里使用的，尤其是在您的成功函数中。你希望你的成功函数看起来像这样：

```
success: function (msg) {
    loading_hide();
    var $response = $j(msg);

    // Query the jQuery object for the values
    oGlobal = $response.find('#Z').text();

    $j("#container").html(oGlobal);

    $response.find('#Z').remove();
    $j('<div id="container2"></div>').html($response.html()).appendTo('body');
} 
```

我们只是把`oGlobal`（在这种情况下应该是 JuanFernando）和粘贴到`#container`. 之后，`#Z`从响应中删除 div ，并将其余部分粘贴到 new`#container2`中，并将其附加到正文或您想要的任何位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:15:27.330

[这是一个“适应的”小提琴。](http://jsfiddle.net/RZ8UQ/1/)

基本上，唯一会随着您的代码而改变的是

代替

```
oGlobal = $response.filter('#Z').text(); 
```

和

```
oGlobal = $response.find('#Z').text(); 
```

另外，请参阅 MattDiamant 关于`ajaxComplete`.

# html - EE Core：如何将条目数据传递给嵌入式模板

> ID：15255659
> 
> 赞同：0
> 
> 时间：2013-03-06T18:55:56.903
> 
> 标签：html, expressionengine

我有这样的代码：

```
{exp:channel:entrieschannel="blog_channel"limit="10"}
<h1>{entry_title}</h1>
<p>{entry_body}</p>
<p>{entry_author}</p>
{/exp:channel:entries} 
```

基本上，我希望将带有 exp 标记的 HTML 内容分开并放置在模板文件中。我尝试这样做：

```
{exp:channel:entries channel="blog_channel"limit="10"}
{embed="blog/post"}
{/exp:channel:entries} 
```

我的问题是所有标签（{entry_title}、{entry_body} 等）的输出都按字面意思显示，并且它们没有被视为变量。

我怎样才能解决这个问题？

谢谢，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:30:44.777

对于你想要做的事情，我可能会建议避免嵌入，而是使用片段。例如，它们更有效，但仍允许您在多个模板中使用相同的标记，因此您不必重复自己。像这样的一些东西：

```
{exp:channel:entries channel="blog_channel" limit="10"}
    {sn_blog_post_list}
{/exp:channel:entries} 
```

然后在您的代码段中，在本例中称为“sn_blog_post_list”：

```
<h1>{entry_title}</h1>
<p>{entry_body}</p>
<p>{entry_author}</p> 
```

这将允许您对条目循环的不同实例使用相同的代码段。所以在不同的模板中，您可以执行以下操作：

```
{exp:channel:entries channel="blog_channel" limit="30"}
    {sn_blog_post_list}
{/exp:channel:entries} 
```

因此，这将再次对每个博客条目应用完全相同的标记，但返回 30 个条目而不是前面示例中的 10 个，而无需重复标记。

希望有帮助。

# java - CXF Generate Java Bean Skeleton 不做setter和操作类

> ID：15255661
> 
> 赞同：1
> 
> 时间：2013-03-06T18:56:07.193
> 
> 标签：java, web-services, cxf

我正在尝试使用 Apache CXF 2.7.3 从 WSDL 生成模型的存根，我看到创建的存根没有任何复杂数据类型的设置器。我想知道这可能是什么原因，并且正在寻找可能的修复方法，因为这会使存根无法使用。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-13T15:24:29.763

这可能与[Why doesn't JAXB generate setter for Lists](https://stackoverflow.com/questions/13913000/why-doesnt-jaxb-generate-setters-for-lists)重复，我在其中找到了相关答案：

仍然可以通过以下方式填充复杂数据类型（至少在 List 的情况下）：

```
parent.getList().add(aValue); 
```

代替 ：

```
parent.setList(aListOfValues); 
```

# c++ - 使用 C++ 运行进程，过滤输出并获取结果代码并获取系统错误，所有这些

> ID：15255663
> 
> 赞同：2
> 
> 时间：2013-03-06T18:56:15.120
> 
> 标签：c++, linux

我想从 c++ 运行另一个程序，将其输出重定向到文件并返回其结果代码。但是，如果我无法运行程序（路径不正确等），我想知道。

这是我的问题，我怎样才能：一次重定向文件，获取程序的结果代码，获取系统的错误？

*   `System()`: 返回结果，容易重定向，但是无法知道结果是系统错误还是应用程序结果
*   `posix_spawn()`: 我知道是否有系统错误，但是如何获取应用结果代码？

请注意，我不控制已执行应用程序的代码使用 Windows（对不起...）`OpenProcess()`功能很容易，我需要的是`OpenProcess()`在 linux 下。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:01:56.467

您将需要使用该`posix_spawn`功能。

系统调用将`waitpid`帮助您获取退出代码。

看到[这个问题](https://stackoverflow.com/questions/903864/how-to-exit-a-child-process-and-return-its-status-from-execvp)。

```
pid_t waitpid(pid_t pid, int *status, int options); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:13:02.047

您需要做的是非常匹配标准 fork-exec 调用加上文件重定向：

```
int pid = fork();
if( pid == -1 ) {
   // process error here
}

if( pid == 0 ) {
   int fd = open( "path/to/redirected/output", ... );
   ::close( 1 );
   dup2( fd, 1 );
   ::close( fd );
   exec...( "path to executable", ... );
   // if we are here there is a problem
   exit(123);
}
int status = 0;
waitpid( pid, &status, 0 );
// you get exit status in status 
```

通过 exec... 我的意思是 exec 函数系列之一（键入“man 3 exec”以获取信息），选择一个更适合您的函数。如果您需要重定向错误输出，请执行相同的操作，但使用描述符 2。您可能希望将 waitpid() 放入循环中并检查它是否没有被信号中断。

# bxslider - 使用 bxslider，有什么方法可以删除或隐藏幻灯片底部的项目符号？

> ID：15255672
> 
> 赞同：20
> 
> 时间：2013-03-06T18:56:29.270
> 
> 标签：bxslider

我正在使用 bxslider 制作一个简单的轮播，每张幻灯片一个 jpg。因为我有 8 张 jpg，所以每张幻灯片的底部显示了 8 个项目符号。我有什么方法可以删除或隐藏它们。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-12T23:15:24.477

bxslider 有一个名为“pager”的选项，可以采用布尔值 true/false。使用下面的代码：

```
$(document).ready(function(){
    $('.bxslider').bxSlider({
        pager: false
    });
}); 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2015-02-19T09:34:43.180

首先像往常一样加载bxSlider，

```
$(document).ready(function(){
    $('.bxslider').bxSlider();
}); 
```

然后只使用下面的代码，否则 jquery 将尝试调用执行任务，甚至不实现滑块。

```
$(document).ready(function(){
    $('.bxslider').bxSlider({
        pager: false
    });
}); 
```

# android - Android 停止来自 MediaPlayer 的流

> ID：15255673
> 
> 赞同：1
> 
> 时间：2013-03-06T18:56:42.460
> 
> 标签：android, media-player, disconnected

我正在使用 MediaPlayer 播放广播流。当我后台播放流的主要活动时会出现问题。

当手机使用过多资源时（例如，在尝试显示已安装应用程序的列表时），流将停止。我怀疑，Android 关闭流是为了节省一些资源。

这是我开始时准备媒体播放器的方式：

```
radioPlayer=new MediaPlayer();
radioPlayer.setDataSource(streamLocation); //with a try/catch of course in the full code
radioPlayer.prepareAsync();
radioPlayer.seekTo(0);
radioPlayer.setOnInfoListener(this);
radioPlayer.setOnPreparedListener(new OnPreparedListener(){                 
public void onPrepared(MediaPlayer mp) 
        radioPlayer.start();
}); 
```

这一切都在主线程上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:06:40.373

***Service 是一个应用程序组件，可以在后台**执行长时间运行的操作，并且不提供用户界面。另一个应用程序组件可以启动一个服务，即使用户切换到另一个应用程序，它也会继续在**后台运行。**此外，组件可以绑定到服务以与其交互，甚至执行进程间通信 (IPC)。例如，服务可能会在**后台**处理网络事务、播放音乐、执行文件 I/O 或与内容提供者交互。*

[潜入深处](http://developer.android.com/guide/components/services.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:03:07.883

尝试让媒体播放器作为服务而不是在活动中运行。这样，当您的应用程序进入挂起状态时，您可以让媒体播放器在后台播放。当用户将注意力从应用程序上移开时（例如，如果有电话进来），活动将暂停或自行销毁。但是，服务被设计为在后台与 Android 操作系统中运行的所有内容一起运行。

[服务](http://developer.android.com/guide/components/services.html)

# delphi - 不使用 GetHostByName 从 DNS 获取 IP 地址

> ID：15255677
> 
> 赞同：12
> 
> 时间：2013-03-06T18:56:57.250
> 
> 标签：delphi, sockets, winapi, winsock

我正在使用`GetHostByName`从主机/DNS 获取 IP 地址。我也有 Kaspersky Internet Security 2013 并注意到它`GetHostByName`被它选中了。似乎我的进程试图在`hklm\SYSTEM\CONTROLSET001\SERVICES\TCPIP\PARAMETERS`. 这实际上意味着，如果用户没有任何管理员权限，我将无法使用此功能。有没有其他方法可以解析主机/dns？

编辑：这里是截图：

![在此处输入图像描述](../Images/cb4f2dbc1be7fb1f19a93168082f0f0f.png)

EDIT2：我实际上使用了 getaddrinfo 并且 KIS 没有“检测到任何东西”。我想使用它，但我仍然希望支持 Win2K。

EDIT3：添加了调试屏幕截图

![在此处输入图像描述](../Images/fd1e62e25513a282b030ef398b60e9e4.png)

EDIT4：这是我的“测试”代码：

```
program Project2;

{$APPTYPE CONSOLE}

uses
  Winsock;

var
    DummyWSA : WSADATA;

begin
  if WSAStartup($0202, DummyWSA) = 0 then begin
    GetHostByName ('localhost');
  end;
  readln;
end. 
```

EDIT5：GetAddrInfo 版本...

```
program Project2;

{$APPTYPE CONSOLE}

uses
  Winsock;

type
  PAddrInfo = ^TAddrInfo;
  TAddrInfo = packed record
    ai_flags: Integer;
    ai_family: Integer;
    ai_socktype: Integer;
    ai_protocol: Integer;
    ai_addrlen: LongWord;
    ai_canonname: Array of Char;
    ai_addr: PSOCKADDR;
    ai_next: PAddrInfo;
  end;

function getaddrinfo(const nodename: PChar; const servname : PChar; const hints: PAddrInfo; var res: PAddrInfo): Integer; stdcall; external 'ws2_32.dll' name 'getaddrinfo';
procedure freeaddrinfo(ai: PAddrInfo); stdcall; external 'ws2_32.dll' name 'freeaddrinfo';

var
  DummyWSA      : WSADATA;
  SocketHint    : PAddrInfo;
  SocketResult  : PAddrInfo;

begin
  if WSAStartup($0202, DummyWSA) = 0 then begin
    //GetHostByName ('localhost');
    getaddrinfo ('localhost', '80', SocketHint, SocketResult);
    // getaddrinfo ('localhost', NIL, SocketHint, SocketResult); // Not sure if I can NIL the port...
  end;
  readln;
end. 
```

此版本似乎根本没有向注册表写入任何内容...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-06T19:01:51.527

`gethostbyname()`是通过 DNS 查询主机名的正确方法（`getaddrinfo()`是更好的选择，尤其是在您需要支持 IPv6 的情况下），而且绝对不仅限于管理员。许多应用程序使用`gethostbyname()`（和/或`getaddrinfo()`），因此卡巴斯基不太可能阻止它。

为什么您认为这`gethostbyname()`是创建注册表项？实际创建的是什么？它不应该创造任何东西。这可能表明某些外部代码已挂接到`gethostbyname()`.

# performance - 高效快速颜色提取 Emgucv

> ID：15255680
> 
> 赞同：0
> 
> 时间：2013-03-06T18:57:06.133
> 
> 标签：performance, colors, tracking, emgucv, hsv

所以我是图像处理的新手，我现在正在学习 emgucv.. ..我想跟踪一个具有特定颜色的球 - 橙色.. 但是.. 所以.. 我需要的是阈值，隔离，或二值化（我不知道正确的术语）..图像保留白色和黑色的灰色图像。白色是橙色，黑色是非橙色..（对不起，如果这听起来有点愚蠢）..但是在对图像进行二值化时有很多考虑因素......阴影......橙色的阴影......

我对最好使用的功能感到困惑..我已经尝试了 Image 的 inRange 功能..

imgProcessed = imgOriginal.InRange(mincolor,maxcolor);

但是，..我发现它很慢..我不能真正将所有球二值化..（从深橙色到浅橙色）..另外，每次光照条件发生变化时我都必须调整值..有什么方法可以获得“全部”或至少“大多数”橙色？对不起..新手在这里...我会很感激任何帮助..代码不是必需的..谢谢！：D

有这么多功能要使用.. HSV.. inrange.. cvthreshold.. 最好的方法是什么？使用 hsv 而不是 bgr 会更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-12T22:03:46.450

我已经做到了。我放弃了 OpenCV 函数并手工计算。这是我的代码：

```
 for (i = 0; i < rows; i = i + step)
                {
                    for (j = 0; j < cols; j = j + step)
                    {

                        closestprimary = new Bgr(0, 0, 0);
                        currentcolor = ImageFrame[i, j];
                        B = (int)currentcolor.Blue;
                        G = (int)currentcolor.Green;
                        R = (int)currentcolor.Red;
                        //hue = atan2(sqr(3) * (G - B), 2 * R - G - B)
                        hue = ((Math.Atan2(1.732050808 * (double)(G - B), (double)(2 * R - G - B)) * 57.295779513) + 360) % 360; ;
                        //find closest primary hue (60 degree)
                        if (hue >= 15 && hue < 50) { 
                           closestprimary = new Bgr(0, 127, 255); }  //orange - sorta had to eyeball this one /shrug
                        ImageFrame[i, j] = closestprimary;//set new color
                    }
                } 
```

希望您能看到橙色色调在 15 到 50 之间的情况，并且可以将数字更改为您想要的任何颜色，以获得您想要的任何颜色。

[http://johndyer.name/lab/colorpicker/](http://johndyer.name/lab/colorpicker/) 帮助我决定了色调。（看上面的数字，按“H”）

# java - Java：在字符串中省略一个单词

> ID：15255689
> 
> 赞同：1
> 
> 时间：2013-03-06T18:57:43.477
> 
> 标签：java

我有一个字符串，我需要从中省略一个特定的单词。

如下所示，字符串中可能包含单词“Baci”或“BACI”

我已经编写了一个如下所示的示例程序，它可以正常工作，但我想知道是否有更好的方法来做到这一点？

```
public class Test {

      public static void main(String args[]) {

            String str = "Mar 14 Baci WIC";
            if(str!=null&&!str.isEmpty())
            {
                if(str.contains("Baci") || str.contains("BACI"))
                {
                    str = str.replaceAll("(?i) Baci", "");
                }
            }

            System.out.println(str);

      }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:01:13.207

我认为这里更好的方法是不另外检查“Baci”的存在，即没有以下`if`检查

```
if(str.contains("Baci") || str.contains("BACI")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:01:42.000

您可以通过使用 \b 正则表达式（匹配“单词边界”）对其进行一些改进：

```
str = str.replaceAll("(?i) Baci\\b", ""); 
```

这样，您的代码不会将“my bacil is...”替换为“myl is...”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T19:01:54.577

您的第二个`if`条件是不必要的，因为`replaceAll()`它将替换零次或多次出现的`String`无错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T02:14:46.440

你可以 .toUpperCase 你的字符串，然后只要求包含（“BACI”）。在 if 块中，只需使用 Baci 和 BACI 调用 replace 两次。

再想一想，我认为最好只调用两次替换而不询问您的字符串是否包含它。如果它没有找到任何可替换的东西，那么它不会替换任何东西。

希望它会有用！

# php - 似乎 php exec 没有等待执行

> ID：15255691
> 
> 赞同：1
> 
> 时间：2013-03-06T18:57:50.293
> 
> 标签：php, exec, executable, shell-exec

事情是这样的，

```
$file="myjpg.jpg";
$runme="/var/www/html/facedetect/facedetect ".$file;
$output=shell_exec($runme);
var_dump($output); 
```

转弯

```
NULL 
```

但实际上，通过 ssh 运行的完全相同的命令需要一点时间才能完成，大约 15 秒，它确实会返回一个输出。

所以我认为 PHP 在完成之前不会等待并退出。

可以做些什么来解决这个问题？ini中的任何特殊设置，东西。

或者是否存在与 shell_exec 不发送 myjpg.jpg 作为可执行文件的参数有关的未命中配置。我只是对此一无所知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:03:54.930

[`shell_exec()`](http://www.php.net/manual/en/function.shell-exec.php)`NULL`命令失败时返回；即当它返回非零退出值时。

这很可能是这种情况。

要调试，尝试[`exec()`](http://www.php.net/manual/en/function.exec.php)总是返回一个值，它会返回错误。

我的直觉是运行 PHP（可能是 www-data）的用户无法访问`/var/www/html/facedetect/facedetect`或无法访问。`$file;`

# c++ - 从一个字节中获取 n 位

> ID：15255692
> 
> 赞同：24
> 
> 时间：2013-03-06T18:57:53.417
> 
> 标签：c++, c, binary, hex, bits

我在从一个字节中获取 n 位时遇到了一些麻烦。

我有一个无符号整数。假设我们的十六进制数是 0x2A，十进制是 42。在二进制中它看起来像这样：0010 1010。我如何获取前 5 位 00101 和接下来的 3 位 010，并将它们放入单独的整数中？

如果有人可以帮助我，那就太好了！我知道如何从一个字节中提取这是简单的

```
int x = (number >> (8*n)) & 0xff // n being the # byte 
```

我在关于堆栈溢出的另一篇文章中看到了这一点，但我不确定如何从字节中获取单独的位。如果有人可以帮助我，那就太好了！谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-06T19:05:41.103

整数在机器内部表示为位序列；对我们人类来说幸运的是，编程语言提供了一种以十进制（或十六进制）显示这些数字的机制，但这不会改变它们的内部表示。

您应该修改按位运算符`&`,`|`和`^`以及`~`移位运算符`<<`and `>>`，这将帮助您了解如何解决此类问题。

整数的最后 3 位是：

```
x & 0x7 
```

从最后八位开始的五位是：

```
x >> 3    // all but the last three bits
  &  0x1F // the last five bits. 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-06T19:06:06.980

在 C 中“抓取”整数类型的部分是这样的：

1.  您将所需的位移动到最低位置。
2.  你`&`用来掩盖你想要的位 - 一个意味着“复制这个位”，零意味着“忽略”

所以，在你的例子中。假设我们有一个数字`int x = 42;`

前 5 位：

```
(x >> 3) & ((1 << 5)-1); 
```

或者

```
(x >> 3) & 31; 
```

要获取低三位：

```
(x >> 0) & ((1 << 3)-1) 
```

或者：

```
x & 7; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-06T19:06:00.430

假设您想要`hi`顶部的`lo`位和底部的位。（在您的示例中为 5 和 3）

```
top = (n >> lo) & ((1 << hi) - 1)
bottom = n & ((1 << lo) - 1) 
```

解释：

对于*top*，首先去掉较低的位（右移），然后用“全为”掩码屏蔽剩余的位（如果你有一个像 的二进制数`0010000`，减去一个结果`0001111`- 与你有相同数量的`1`s `0`-s在原始号码中）。

对于底部它是相同的，只是不必关心最初的转变。

```
top = (42 >> 3) & ((1 << 5) - 1) = 5 & (32 - 1) = 5 = 00101b
bottom = 42 & ((1 << 3) - 1) = 42 & (8 - 1) = 2 = 010b 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-06T20:20:12.157

您可以为此使用位域。位域是特殊的结构，您可以在其中以位指定变量。

```
typedef struct {
  unsigned char a:5;
  unsigned char b:3;
} my_bit_t;

unsigned char c = 0x42;
my_bit_t * n = &c;
int first = n->a;
int sec = n->b; 
```

位字段在[http://www.cs.cf.ac.uk/Dave/C/node13.html#SECTION001320000000000000000有更详细的描述](http://www.cs.cf.ac.uk/Dave/C/node13.html#SECTION001320000000000000000)

位域的魅力在于，您不必处理移位运算符等。符号很简单。与操作位一样，存在可移植性问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-06T19:05:44.777

`int x = (number >> 3) & 0x1f;`

会给你一个整数，其中最后 5 位是 8-4 位，`number`其他位为零。

相似地，

`int y = number & 0x7;`

会给你一个整数，最后 3 位设置最后 3 位，`number`其余部分为零。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-06T19:03:47.680

只需摆脱代码中的 8* 即可。

```
int input = 42;
int high3 = input >> 5;
int low5 = input & (32 - 1); // 32 = 2^5
bool isBit3On = input & 4; // 4 = 2^(3-1) 
```

# excel - Sumif函数并将值复制到VBA中的工作簿

> ID：15255693
> 
> 赞同：0
> 
> 时间：2013-03-06T18:58:00.427
> 
> 标签：excel, vba

我有一个从 Sumif 获取值的过程，但我无法将值复制并粘贴到另一个工作簿。任何帮助将不胜感激。这是我的在制品：

```
Sub WLPTdata()

Dim NEO As Range

NEO = Application.SumIf(Range("C7:C3000"), "TM-NEO", Range("K7:K3000"))

Selection.Copy

Windows("HSD_PTdata.xlsx").Activate
 Sheets("pdata").Select
Range("B160").Select
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T19:09:37.473

NEO 应定义为 Double 或 Long，具体取决于您期望 SumIf 提供的数据。

然后你可以用

```
workbooks("HSD_PTdata.xlsx").Sheets("pdata").range("B160")=NEO 
```

或者，您可以在一行中完成

```
Range("[HSD_PTdata.xlsx]pdata!B160")=Application.SumIf(Range("C7:C3000"), "TM-NEO", Range("K7:K3000")) 
```

假设您在相应的工作表上开始 Sum。如果没有，请更改 sumif 中的范围以包含完整的参考，例如`"[Book1]Sheet2!C7:C300"`

# python - Python MySQLdb执行表变量

> ID：15255694
> 
> 赞同：14
> 
> 时间：2013-03-06T18:58:01.590
> 
> 标签：python, mysql-python

我正在尝试使用变量作为表名。我收到错误“...在第 1 行的 ''myTable'' 附近，我一定不能逃避这个权利。错误中的双 '' 似乎是一个线索，但我不明白。

```
db = MySQLdb.connect("localhost","user","pw","database" )
table = "myTable"
def geno_order(db, table):
    cursor = db.cursor() # prepare a cursor object using cursor() method
    sql = "SELECT * FROM %s"
    cursor.execute(sql, table)
    results = cursor.fetchall() 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-06T19:04:33.243

您不能在`execute`调用中为表名使用参数。您需要为此使用普通的 Python 字符串插值：

```
sql = "SELECT * FROM %s" % table
cursor.execute(sql) 
```

当然，如果表名来自用户输入，则需要格外小心。要减轻 SQL 注入，请根据有效名称列表验证表名。

# c++ - 使用 Dev C++ 在 C++ 中使用 RapidXML 编译错误

> ID：15255697
> 
> 赞同：0
> 
> 时间：2013-03-06T18:58:11.153
> 
> 标签：c++, xml-parsing, tree, compiler-errors, rapidxml

我在 Dev C++ 中为我的 C++ 项目解析 XML 文件，并且在 rapidxml_iterators.hpp 文件中有以下代码：

```
typedef xml_node<Ch> value_type;
typedef xml_node<Ch> &reference;
typedef xml_node<Ch> *pointer;
typedef typename std:: ptrdiff_t difference_type;
typedef typename std:: bidirectional_iterator_tag iterator_category; 
```

它给了我这些错误：

```
no class template named `ptrdiff_t' in `std'
ISO C++ forbids declaration of `difference_type' with no type 
no class template named `bidirectional_iterator_tag' in `std'
ISO C++ forbids declaration of `iterator_category' with no type 
```

在得到这些错误之前，上面的代码如下：

```
typedef typename xml_node<Ch> value_type;
typedef typename xml_node<Ch> &reference;
typedef typename xml_node<Ch> *pointer;
typedef std:: ptrdiff_t difference_type;
typedef std:: bidirectional_iterator_tag iterator_category; 
```

这给了我这样的嵌套名称说明符错误：

```
expected nested-name-specifier
`xml_node<Ch>' specified as declarator-id
two or more data types in declaration of `xml_node<Ch>'
expected `;' before "value_type" 
```

在我进行解析的主文件中，我有以下内容：

```
#include <iostream>
#include "rapidxml.hpp"
#include "rapidxml_iterators.hpp"
#include "rapidxml_print.hpp" 
#include "rapidxml_utils.hpp"
#include <iterator>
#include <istream>
#include <cstdlib>
#include <string>
#include <queue>
#include <vector>
#include <streambuf>
#include <cstddef> 
```

我已经在这个网站上浏览过类似的帖子，我也听从了他们的建议，但到目前为止，他们都没有解决我的问题。是 Dev C++ 还是我的代码有问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:34:43.230

在您执行任何其他操作之前，请尝试删除该行：-

```
#include "rapidxml_iterators.hpp" 
```

这通常不是必需的——没有它你可以完美地使用 rapidxml，据我所知，它是很多痛苦和奇怪的编译器错误的根源。

# jquery - 如果未找到搜索文本，则向用户显示错误

> ID：15255698
> 
> 赞同：1
> 
> 时间：2013-03-06T18:58:20.183
> 
> 标签：jquery, jstree

我有这个绑定到 jstree 并搜索树的 jquery 脚本，如果找到会突出显示三个节点。哪个有效。但如果未找到搜索测试，我想向用户提醒消息。有什么想法我会怎么做？

Javascript：

```
<script type="text/javascript"> 
    function myFunction()
    {
    $(document).ready(function(){

    var value=document.getElementById("search_field").value; 

        $("#search_tree").click(function () { 

            $("#tree").jstree("search",value);

    });

     document.getElementById("search_field").value='';
     }); 
    } 
```

html:

```
<fieldset id="search">

    <input type="text" name="search_field" id="search_field" value="" />
    <button id="search_tree" onclick="myFunction()"> Search</button>

</fieldset> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:27:03.193

你可以从下面的代码中得到一个想法。如果您需要任何进一步的帮助，请提供有效的 jsfiddle 示例，我将修改代码以使用您的代码。

```
$("div#jstree").bind("search.jstree", function (e, data) {
    //document.getElementById("results").innerHTML="Found " + data.rslt.nodes.length + " nodes matching '" + data.rslt.str + "'.";
   if (data.rslt.nodes.length == 0){
    alert("No search results found");
   }
}); 
```

# ruby-on-rails - 将 Rails 应用程序投入生产 - rake db:schema:load 不起作用

> ID：15255700
> 
> 赞同：0
> 
> 时间：2013-03-06T18:58:28.910
> 
> 标签：ruby-on-rails, postgresql

我正在尝试将新的 Rails 应用程序部署到 Bitnami/Ubuntu/Virtual Server。我是远程并使用 SSH 终端。

我已经成功地使用 Capistrano 来限制部署：更新。我的来源是 github，然后 Capistrano 将它放在服务器上。

所以，我在服务器上有这个目录：

```
/opt/bitnami/projects/ndeavor/releases/20130306180756 
```

该服务器还运行了一个 PostgreSQL 堆栈。我已经创建了我的 Postgresql 用户和空数据库。我相信我的下一步是使用 SSH 控制台运行此命令：

```
bitnami@linux:/opt/bitnami/projects/ndeavor/releases/20130306180756$  rake RAILS_ENV=production db:schema:load 
```

问题 1 = 这是正确的下一步吗？

当我运行该命令时，我得到了这个：

```
could not connect to server: No such file or directory
Is the server running locally and accepting
connections on Unix domain socket "/tmp/.s.PGSQL.5432"? 
```

问题 2 = 如何让 Rake 找到 PostgreSQL 套接字？

我可以在 database.yml 文件中添加这样的内容：

```
 socket: /var/pgsql_socket 
```

但是，我不知道正确的条目应该是什么

谢谢你的帮助！！

更新1

我也尝试过这样的 database.yml 文件：

```
production:
adapter: postgresql
encoding: unicode
database: ndeavor_production
pool: 5
username: (user name)
password: (password)
socket: /var/run/postgresql 
```

但是，我得到同样的错误：

```
Is the server running locally and accepting
connections on Unix domain socket "/tmp/.s.PGSQL.5432"? 
```

为什么至少不向我询问 Unix 域套接字“/var/run/postgresql”？

更新2

我找到了这个：

“我通过将 postgresql.conf 文件中的 unix_socket_directory 声明为 /var/run/postgresql 解决了我的问题。对于标准构建，它们似乎应该有一个共同的位置？

如果您从未修改的 PG 源构建，则默认套接字位置确实是 /tmp。但是，Debian 和相关发行版认为这违反了某些发行版标准或其他，因此他们修改了源代码以将默认位置设为 /var/run/postgresql。所以这取决于你使用谁的版本。”

但是，我不确定是否应该更改 postgresql.conf 文件或 Rails database.yml 文件

更新3

我查看了 /var/run/postgresql 目录，它是空的。

我找不到 .s.PGSQL.5432 的位置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T07:27:42.980

正如 Bob 所指出的，指定主机和端口可以解决问题。由于他没有更详细地解释这一点，我想具体说明。

默认端口是 5432，默认的“主机”是它期望套接字的路径。端口始终是数字，但可以为任何 libpq 连接设置主机，该连接*既*可以连接到网络主机，也可以连接到包含套接字的目录。例如，使用 psql 连接

```
psql -h /tmp -p 5432 -U chris mydb 
```

这将通过 /tmp/.s.PGSQL.5432 套接字连接。现在 Ruby 有所不同，但 pg gem 使用 libpq，所以它的行为应该相同。

如果您不知道套接字在哪里，接下来要尝试的显然是网络地址，尤其是 localhost。

# version-control - 以编程方式创建“版本”

> ID：15255705
> 
> 赞同：2
> 
> 时间：2013-03-06T18:58:39.803
> 
> 标签：version-control, lotus-notes, lotusscript, lotus-formula

Lotus Notes 具有“版本控制”功能。您可以将其设置为在用户需要单击`File->New->Version`以创建新版本的模式下工作。我想在表单上的按钮中使用该功能。

有没有办法（使用`LotusScript`、`Java`或`@Formula`）从同一个表单创建一个新的“版本”（除了创建一个文档并移动所有字段）？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T20:23:29.800

有一个名为[FileSaveNewVersion](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_FILESAVENEWVERSION.html)的 @Command，NotesUIDocument 类有一个 SaveNewVersion 方法。那是你要找的吗？

# x509certificate - 如何创建签名的 AuthNRequest？

> ID：15255706
> 
> 赞同：13
> 
> 时间：2013-03-06T18:58:43.943
> 
> 标签：x509certificate, saml, saml-2.0, signing

我正在与 IDP 交互，并创建了一个基本的 AuthNRequest，如下所示：

```
<samlp:AuthnRequest
  xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"
  xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion"
  ID="IDTest1" 
  Version="2.0"
  IssueInstant="2013-03-04T09:21:59"
  AssertionConsumerServiceIndex="0"
  AttributeConsumingServiceIndex="0">
  <saml:Issuer>https://myapp.com/saml2/sp</saml:Issuer> 
 <samlp:NameIDPolicy
   AllowCreate="true"
   Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient"/>
</samlp:AuthnRequest> 
```

IDP 希望我按签名发送请求。我的问题是：

1.  如何设置摘要值？
2.  如何设置签名值？
3.  对于 x509 证书，我设置了我的应用程序的公钥。正确的？
4.  用于计算任何值的数据是什么？这是我没有签名元素的原始身份验证请求吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T18:10:53.690

请注意，文档中涵盖了很多内容：

[SAML 元数据](http://docs.oasis-open.org/security/saml/v2.0/saml-metadata-2.0-os.pdf)。

要签署请求，您需要添加类似这样的内容（通常在 sp.xml 中找到）：

```
<SPSSODescriptor AuthnRequestsSigned="true" WantAssertionsSigned="false"
                 protocolSupportEnumeration="urn:oasis:names:tc:SAML:2.0:protocol"> 
```

签名密钥看起来像：

```
<KeyDescriptor use="signing">
    <ds:KeyInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
        <ds:X509Data>
            <ds:X509Certificate>
                MIIDWTC...CAkGgAwIBAgIEe+a+/uaSZCp5g2z+hRWRV+DyfQc9nO
            </ds:X509Certificate>
        </ds:X509Data>
    </ds:KeyInfo>
</KeyDescriptor> 
```

其中 MII... 是公钥。

根据@Stefan，使用库要容易得多。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T11:41:40.153

SAML 身份验证请求是一个 XML 文档。您可以像签署任何其他 XML 文档一样签署 SAML 身份验证请求。但是，有一些限制：

1.  签名必须是信封的签名。
2.  在被消化之前，SAML Authentication Request 不能通过封装签名转换和排他规范化转换以外的方法进行转换。
3.  Signature 元素必须只包含一个 Reference 元素。
4.  唯一的 Reference 元素的 URI 必须包含签名的 SAML 身份验证请求的 ID 属性的值。
5.  在签名之前，必须使用专有规范化方法对 SignedInfo 元素进行规范化。

您可以在第 5 节中阅读更详细的 SAML 断言和协议规范 ( [http://docs.oasis-open.org/security/saml/v2.0/saml-core-2.0-os.pdf](http://docs.oasis-open.org/security/saml/v2.0/saml-core-2.0-os.pdf) )。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-10-17T16:41:40.943

你的问题不充分！

您发送的 AuthRequest 似乎是**REDIRECT**请求，您将看不到摘要、签名和证书，因为所有这些详细信息都将作为参数在 URL 中。

尝试使用**POST SSO**请求，您将在其中看到 SAML 请求中的摘要、签名和证书。

## 一些要点：

### 常见的

*   IdP 和 SP 都应该共享它们`Metadata`，它们将具有它们的基本配置，例如 id、签名算法、散列方法、公钥等。
*   因此，根据 IdP 之间的合同，您应该使用您喜欢的编程语言对您的请求进行哈希处理和签名。

### SP：

*   您应该使用您的公钥进行加密。
*   您应该使用您的私钥进行签名。
*   您应该使用 Base64 对您的请求进行编码。

### 国内流离失所者：

*   他们将使用请求中的公钥进行身份验证。
*   他们将使用加密和签名的 XML 进行响应。
*   您应该解密并取消签名响应。

### 快速链接

1.  [SAML 2.0 官方文档](http://docs.oasis-open.org/security/saml/Post2.0/sstc-saml-tech-overview-2.0.html)

2.  [OneLogin 的 SAML 在线工具](https://www.samltool.com)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-07T09:46:01.063

如果您在没有任何更大框架的情况下构建自己的请求，我可以推荐 OpenSAML。它是一个帮助构建 SAML 消息的库。

在我[的《OpenSAML 指南》](https://blog.samlsecurity.com/a-guide-to-opensamlv3.html)一书中，详细解释了这一点以及更多内容。

编辑我已经发布了[本书的新版本](https://blog.samlsecurity.com/a-guide-to-opensamlv3.html)，涵盖 OpenSAML V3

[这](https://blog.samlsecurity.com/2012/11/signing-with-opensaml.html)是我写的关于签署 SAML 消息的示例

[还有一个](https://blog.samlsecurity.com/2011/01/redirect-with-authnrequest.html)关于如何发送 AuthnRequests。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-08T11:49:16.807

好吧，有关安全的事情从来都不是一件容易的事……您应该明确检查由@nzpcmad 链接的文档以及 [SAML2 配置文件](http://docs.oasis-open.org/security/saml/v2.0/saml-profiles-2.0-os.pdf)（查找 WB SSO - Web Browser Single Sign On）。

对于 Java，OpenSaml 确实是最简单的解决方案之一。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-20T11:19:52.973

一个陷阱似乎是使用 HTTP 重定向绑定签名由附加 URL 参数传输，而不是 SAMLRequest 值的一部分，例如[https://my-idp.com/login?SAMLRequest=nVNN...%3D&SigAlg= http%3A%2F%2Fwww.w3.org%2F2001%2F04%2Fxmldsig-more%23rsa-sha256&Signature=QZ64...%3D%3D](https://my-idp.com/login?SAMLRequest=nVNN...%3D&SigAlg=http%3A%2F%2Fwww.w3.org%2F2001%2F04%2Fxmldsig-more%23rsa-sha256&Signature=QZ64...%3D%3D)

# regex - R 正则表达式删除除撇号以外的所有标点符号

> ID：15255709
> 
> 赞同：7
> 
> 时间：2013-03-06T18:58:51.200
> 
> 标签：regex, r

我正在尝试从字符串中删除除撇号之外的所有标点符号。这是我的 exastr2 <-

```
str2 <- "this doesn't not have an apostrophe,.!@#$%^&*()"
gsub("[[:punct:,^\\']]"," ", str2 )
# [1] "this doesn't not have an apostrophe,.!@#$%^&*()" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-06T19:09:19.367

“负前瞻断言”可用于在考虑是否为标点字符之前将任何撇号从考虑中移除。

```
gsub("(?!')[[:punct:]]", "", str2, perl=TRUE)
# [1] "this doesn't not have an apostrophe" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:01:16.333

我不确定您是否可以`'`按照您的方式指定除正则表达式之外的所有标点符号。我会用否定检查`alphanumerics`++ `'`：`space`

```
gsub("[^'[:lower:] ]", "", str2) # per Joshua's comment
# [1] "this doesn't not have an apostrophe" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T20:58:37.257

你可以使用：

```
str2 <- "this doesn't not have an apostrophe,.!@#$%^&*()"

library(qdap)
strip(str2, apostrophe.remove = FALSE, lower.case = FALSE) 
```

# r - 使用 R 中的数组从数据框中选择行

> ID：15255713
> 
> 赞同：1
> 
> 时间：2013-03-06T18:58:55.323
> 
> 标签：r, select, row, dataframe

在给定多个参数的情况下，我希望从 R 中的数据框中选择一组行。通常这可以使用 OR 语句来完成，但是这些值被存放在一个数组中。我正在查询它们（并且没有运气）：

一些让我们滚动的数据：

```
x = array(c(1,2,3),c(5,5))
y=c(1,2) 
```

我目前使用的命令是（按第 1 列过滤）：

```
x[x[,1] == y, ] 
```

上面的命令产生这个错误：

```
Warning message:
In x[, i] == y :
  longer object length is not a multiple of shorter object length 
```

这是有道理的。我只是不知道如何绕过它。

我正在寻找的是：

```
 [,1] [,2] [,3] [,4] [,5]
[1,]    1    3    2    1    3
[2,]    2    1    3    2    1
[3,]    1    3    2    1    3
[4,]    2    1    3    2    1 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T19:03:49.763

您正在寻找`%in%`.

```
> x[x[,1] %in% y, ]

#     [,1] [,2] [,3] [,4] [,5]
# [1,]    1    3    2    1    3
# [2,]    2    1    3    2    1
# [3,]    1    3    2    1    3
# [4,]    2    1    3    2    1 
```

正如@Ricardo 在评论中所说，更好地解释为什么会发生这种情况。当你等于`x[,1]`时`y`，你得到：

```
x[,1] == y
[1]  TRUE  TRUE FALSE FALSE FALSE 
```

因为`y`它`1,2`只是等同于`x[, 1]`并且因为它们都匹配，所以返回 TRUE。由于输出的长度必须等于`length(x[, 1])`，其余部分被“回收”（y = 1, 2, 1 对 x = 3, 1, 2），结果为 FALSE。但是现在，如果您用于`x[., ]`获取行，则只有前两个值是 TRUE。所以，只有前两个会被选中。使用 `%in% 会导致：

```
x[,1] %in% y
# [1]  TRUE  TRUE FALSE  TRUE  TRUE 
```

这是你所期望的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:37:23.737

为了补充@Arun的答案，如果要比较的两个向量的大小不同，`R`将**回收**较短的向量，以便`R`比较两个相同大小的向量，然后进行**成对**比较。（即比较每个向量的第一个元素，然后比较*eac*向量的第二个元素，等等）。

例如，它不会**将向量 1 的第一个元素与向量 2 中的***所有*元素进行比较。（因为你需要`%in%`@Arun提到的）

例如，看看下面的内容。前两个示例产生等效输出

```
> c(0, 1, 2, 0, 1, 2) == c(1, 2)
[1] FALSE FALSE FALSE FALSE  TRUE  TRUE

> c(0, 1, 2, 0, 1, 2) == c(1, 2, 1, 2, 1, 2)
[1] FALSE FALSE FALSE FALSE  TRUE  TRUE

The comparisons being made are:

 #  element#   LHS     RHS   areEqual
 #     1\.       0       1      FALSE   <~~ Notice that the '0' from LHS is being compared with the '1' from RHS
 #     2\.       1       2      FALSE  
 #     3\.       2       1      FALSE
 #     4\.       0       2      FALSE
 #     5\.       1       1       TRUE
 #     6\.       2       2       TRUE 
```

这是另一个示例，LHS 相对于前一个示例“移动”。

```
> c(1, 2, 0, 1, 2, 0) == c(1, 2)
[1]  TRUE  TRUE FALSE FALSE FALSE FALSE 
```

注意当较短的向量不是较长元素的精确倍数时会发生什么。（即，2 不进入 7）。
循环仍然发生，但较短的向量的一部分从上次循环中被裁剪。
`R`给我们一个警告，以防万一我们没想到它们的大小不同

```
> c(1, 2, 3, 4, 1, 2, 0) == c(1, 2)
[1]  TRUE  TRUE FALSE FALSE  TRUE  TRUE FALSE
Warning message:
In c(1, 2, 3, 4, 1, 2, 0) == c(1, 2) :
  longer object length is not a multiple of shorter object length 
```

请注意，较长的向量是在 RHS 还是 LHS 上并不重要；回收工作是一样的

```
> c(1, 2) == c(1, 2, 0, 1, 2, 0)
[1]  TRUE  TRUE FALSE FALSE FALSE FALSE 
```

# dns - IP 地址正在更改

> ID：15255716
> 
> 赞同：-1
> 
> 时间：2013-03-06T18:59:05.130
> 
> 标签：dns, ip, subdomain, windows-server

好的。所以通常我在 iMac 上工作，但我不得不切换到 PC 来处理我正在处理的项目。有人告诉我下载 Web 服务器套件。我这样做并找到了所谓的私有 IP 地址。我指向了一个子域，它起作用了！我放入的 index.php 页面`C:\www\webroot\`有效！但是当我今天去尝试这个时，IP改变了。它从`http://192.168.0.149`/到今天`http://192.168.0.139/`..我不明白它为什么这样做。

我也想说明。我通常不在家用电脑上托管我的网站。这个是这样的唯一原因是因为我需要它能够每秒将结果文件发布到 webroot 文件夹。

任何人都知道为什么这样做？或者（更好）有人对使用这个程序有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:11:17.800

您应该设置一个静态 IP 地址。您可能应该在 192.168.0.1-254 范围内选择一个，因为这是其他地址所在的范围。看起来您获取的地址位于范围的中间（139、149），因此您应该选择靠近较低的一个或更高端，以确保您不会重复。这是有关如何为 Windows 设置静态 IP 的指南：

[http://www.howtogeek.com/howto/19249/how-to-assign-a-static-ip-address-in-xp-vista-or-windows-7/](http://www.howtogeek.com/howto/19249/how-to-assign-a-static-ip-address-in-xp-vista-or-windows-7/)

# javascript - jQuery Mobile 在页面转换之前防止滚动到顶部？

> ID：15255719
> 
> 赞同：16
> 
> 时间：2013-03-06T18:59:07.703
> 
> 标签：javascript, jquery, ios, css, jquery-mobile

当我单击一个列表项以转到另一个页面时，当前页面会跳转到屏幕顶部，然后再转换到下一页。

这个问题出现在 jQM 1.2 中，并且在新发布的 1.3 版本中仍然没有修复。

有谁知道如何防止滚动到顶部，并在使用后退按钮时记住滚动位置？

这种恼人的行为是不可接受的，并且会破坏整个应用程序的体验。

我在 iPhone 4S 和 iOS 6.1.2 上将它用作 web 应用程序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T20:10:21.160

在我描述您需要了解的可用解决方案之前，这不是错误，也没有完美的解决方案。问题是，要动画到另一个页面的过渡，视口必须位于页面顶部，以便当前页面和过渡页面垂直对齐。

如果您在一个页面（例如 1000 像素）上的长列表中途而您要转移到的页面只有几百像素高，那么当前页面将正确地在屏幕上显示动画，但新页面将不会显示为它会在视口上方。

有2个可行的解决方案：

## 1\. iScroll及其jQuery Mobile派生iScrollview

iScroll 主页：[http ://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)

iScrollview 主页：[https ://github.com/watusi/jquery-mobile-iscrollview](https://github.com/watusi/jquery-mobile-iscrollview)

iScroll 是一种 javascript，它可以在 Web 浏览器的窗口中滚动内容，其行为与 iPhone 和 Android 等移动设备上的原生滚动非常相似。这意味着您可以使用类似本机的滚动条和物理在浏览器中滚动窗口。

这也是我们当前问题的解决方案。因为 iScroll 实现页面会占据 100% 的页面高度，不管 listview 滚动多远。这也是返回时 listview 仍将保持在同一位置的原因。

当然，如果你想实现这个解决方案，你应该选择 iScrollview 实现。您仍然可以实现 iScroll，但它会花费您更多的时间。

## 2.无声滚动

官方文档：http: [//jquerymobile.com/demos/1.1.0-rc.1/docs/api/methods.html](http://jquerymobile.com/demos/1.1.0-rc.1/docs/api/methods.html)

这个 jQuery Mobile 功能也是我们最初遇到这个问题的原因。在触发页面转换之前，原始页面会静默滚动到顶部。

In our case, when listview is selected, its position must be remembered ( [here](https://stackoverflow.com/a/14469041/1848600) you will find solutions of data/parameteres storing during the page transition, just search for the chapter: **Data/Parameters manipulation between page transitions** ) before page is changed. 在这种情况下，当我们返回上一页时，我们可以使用[pagebefpreshow](http://api.jquerymobile.com/pagebeforeshow/)事件在页面显示之前静默滚动到底部。

```
//scroll to Y 100px
$.mobile.silentScroll(100); 
```

这是一个无声滚动的工作示例：http: [//jsfiddle.net/Gajotres/5zZzz/](http://jsfiddle.net/Gajotres/5zZzz/)

## 更多信息

如果您想了解有关此主题的更多信息，请查看**[本文](http://www.gajotres.net/prevent-scroll-to-the-top-before-page-transition-in-jquery-mobile/)**，您还将找到工作示例。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-01T03:21:47.057

我能够通过以下方式解决此问题（对于 iOS）：

1.  为滚动部分添加一个额外的容器 div。通常围绕页面的滚动部分。在我的情况下，就在页眉之后和页脚代码之前。

2.  添加以下 CSS：

    ```
    .extracontainer {
      宽度：100%；
      高度：100%；
      位置：绝对；
      顶部：0；
      右：0；
      底部：0；
      左：0；
      边距：0；
      填充：0；
      溢出：自动；
      溢出-y：滚动；
      -webkit-溢出滚动：触摸；
    }

    ```

一些 CSS 可能是额外的，但在我的情况下，它是为了避免我使用负边距、填充等的其他一些样式出现任何问题。

还要确保有**-webkit-overflow-scrolling: touch;** 平滑滚动。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-16T04:24:59.207

```
 $( document ).on( "mobileinit", function() {
        var silentScroll = $.mobile.silentScroll;
          $.mobile.silentScroll = function( ypos ) {
        if ( $.type( ypos ) !== "number" ) {
            // FIX : prevent auto scroll to top after page load
            return;
        } else {
            silentScroll.apply(this, arguments);
        }
    }
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-22T18:46:59.073

对于 Jquery Mobile 1.4.5，我通过更改 jquery.mobile-1.4.5.min.js 中的这一行来解决这个问题：

*a.mobile.hideUrlBar&&g.load(a.mobile.silentScroll)*

对此：

*a.mobile.hideUrlBar*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-20T14:36:24.483

防止scrool to top的解决方案是：

正文 onload="$.mobile.silentScroll(window.scrollY);"

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-28T05:01:43.787

尝试使用[scrollstart](https://api.jquerymobile.com/scrollstart/)来检测 jquery mobile 中的窗口滚动事件，以防万一:)

# java - 使用 java 库设置摘要 http 请求

> ID：15255722
> 
> 赞同：1
> 
> 时间：2013-03-06T18:59:13.733
> 
> 标签：java, curl, http-headers, digest, digest-authentication

所以我正在尝试连接到一个数据库（服务器的所有者外包了设置工作并且不知道它的详细信息）并拥有一个用户名和密码。当我尝试以最基本的方式连接 curl 时，我被拒绝了。

curl --user "用户名：密码" [http://test.com](http://test.com)

当我添加 --digest 标志时，它可以工作。所以一个有效的 curl 请求看起来像这样：

curl --digest --user "用户名：密码" [http://test.com](http://test.com)

现在的问题是我需要在 java 中编写代码并且并不真正理解 --digest 标志在做什么。我知道摘要身份验证和算法，但这是我不想实现的东西，我认为我也不需要（基于事实 curl 对此有一个微不足道的标志，我希望在 java 中有一些类似的工作）。有谁知道更简单的方法来做到这一点？我可以设置一些标题吗？本质上，我想知道 java 中 curl 等效项的 --digest 标志。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:06:03.000

[Apache HttpClient](http://hc.apache.org/user-docs.html)库支持各种身份验证方案，但它不像设置 --digest 标志那么简单。

在这里查看相关文档：http: [//hc.apache.org/httpcomponents-client-ga/tutorial/html/authentication.html](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/authentication.html)

抢先式摘要身份验证的具体示例：http: [//hc.apache.org/httpcomponents-client-ga/httpclient/examples/org/apache/http/examples/client/ClientPreemptiveDigestAuthentication.java](http://hc.apache.org/httpcomponents-client-ga/httpclient/examples/org/apache/http/examples/client/ClientPreemptiveDigestAuthentication.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:10:02.507

我不知道这与数据库有什么关系，但 --digest 会打开 Digest 身份验证。没有它，您将使用基本身份验证。

[http://curl.haxx.se/docs/manpage.html#--digest](http://curl.haxx.se/docs/manpage.html#--digest)

这是这两个含义的规范参考，我会看看是否可以找到一些对读者更友好的东西，如果可以的话添加它。

[https://www.rfc-editor.org/rfc/rfc2617](https://www.rfc-editor.org/rfc/rfc2617)

这似乎更容易......好吧......--digest :)

[http://frontier.userland.com/stories/storyReader$2159](http://frontier.userland.com/stories/storyReader$2159)

而且我还建议使用 Apache HTTP 客户端从 java 执行 http 请求，尽管我不确定从你的问题介绍中你提到数据库的地方是否真的是你想要做的。

# sql - 使用 SQL Server 中的函数进行字符串操作

> ID：15255725
> 
> 赞同：0
> 
> 时间：2013-03-06T18:59:22.117
> 
> 标签：sql, sql-server, tsql

我们有许多存储过程需要对表中的列执行字符串操作。

我可以创建一个函数来进行字符串操作并从 SP 调用它吗？如果是，我会怎么做？

例子：

我有一个名为“Names”的表，它有一列名为“DocName”

我的 SP 看起来像：

```
select DocName, MyStrFunc(DocName) as NewName
FROM Names 
```

MyStrFunc 将调整传递的值并返回一个字符串。

我们将有许多 SP 需要使用 MyStrFunc 并且不想复制字符串操作代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T19:08:50.097

这是一个带有[用户定义函数的示例](http://msdn.microsoft.com/en-us/library/ms186755.aspx)

```
CREATE FUNCTION dbo.StringConverter 
(
    @oldValue varchar(100)
)
RETURNS varchar(100)
AS
BEGIN
    DECLARE @Result varchar(100)
    -- do your custom manipulation here. this is just an example
    SELECT @Result = upper(@oldValue)
    RETURN @Result
END
GO

-- and to use it
SELECT x.a as src, dbo.StringConverter(x.a) as converted
FROM (
   SELECT 'asdf' as a
   ) as  x

-- results
src   converted
asdf  ASDF 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T19:03:44.167

您需要的是一个标量值函数。要创建其中之一，请转到 SSMS 中的对象资源管理器，打开数据库，打开 Programmability 文件夹，然后打开 Functions 文件夹。鼠标右键单击标量值函数文件夹，然后单击“新建标量值函数”。

这将为您提供创建函数所需的外壳。然后你应该能够从任何地方调用该函数。

*您的标量值函数需要将 varchar 或 nvarchar 作为输入——而不是列名。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T19:01:23.043

SQL 中不能有动态列名。

实现这一点的唯一方法是使用[动态 SQL](http://www.sommarskog.se/dynamic_sql.html)，这有其自身的危险（[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)是其中最重要的）。

# python - 将字符串列表转换为多个变量

> ID：15255728
> 
> 赞同：0
> 
> 时间：2013-03-06T18:59:31.073
> 
> 标签：python, string, variables

我想将字符串列表转换为变量序列。例如，我有一个列表 `my_list=["var1","var2","var3"]`，我想创建一行`var1,var2,var3 = map(str.strip, line.split())`（因为我的列表和我的变量行当然是可变的）。

请你能给我一些线索吗？

# parsing - 保留语法关联性/优先级的手写自上而下解析器？

> ID：15255731
> 
> 赞同：3
> 
> 时间：2013-03-06T18:59:35.347
> 
> 标签：parsing

假设我有一个简单的语法，例如：

```
X -> number
T -> X
T -> T + X 
```

因此，例如`3 + 4 + 5`将解析为：

```
 +
    / \ 
   +   5
 /  \
3    4 
```

`+`这具有“内置”语法的左右关联性。

它是微不足道的 LR(1)，但是假设我想做一个手写的自上而下的解析。

我不能这样做，因为它是递归的，所以让我们离开它：

```
X  -> number
T  -> X T'
T' -> + X T'
T' -> e    // empty 
```

如果我现在为它编写一个解析器（伪代码）：

```
parse_X:
    if lookahead is number
        return pop_lookahead

parse_T:
    return (parse_X, parse_T')

parse_T':
    if lookahead is +
         pop_lookahead
         return (parse_X, parse_T')
    else
         return (); 
```

然后，当我调用`parse_T`输入时，`3 + 4 + 5`我会返回如下跟踪：

```
parse_T
(parse_X, parse_T')
(3, parse_T')
(3, (parse_X, parse_T'))
(3, (4, parse_T'))
(3, (4, (parse_X, parse_T')))
(3, (4, (5, ()))) 
```

看看解析是如何“向后”的。从这样的解析“天真地”构建的树看起来像：

```
 +
    / \ 
   3   +
      / \
     4    5 
```

哪个具有错误的关联性。

任何人都可以清除这个吗？一般来说，我如何编写一个手写的自上而下的解析器来保留语法中内置的关联性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T04:56:41.143

一种策略是`T`用迭代替换替换递归`X`（一般来说，用对下一个最高优先级运算符的迭代替换对运算符的递归）。在这种情况下，它有助于使用 EBNF 样式的符号

```
T -> X {+ X} 
```

因为这样需要的迭代就变得很明显了：

```
parse_T:
  val = parse_X
  while lookahead is +
     pop_lookahead
     val = PLUS(val, parse_X)
  return val 
```

where`PLUS()`代表你为计算加法表达式所做的任何事情，例如构造一个树节点。

如果你把它应用到所有的操作符上，你基本上会得到一个对应的函数`EXPRESSION`，它只在处理时递归

```
PRIMARY -> '(' EXPRESSION ')' 
```

这种方法导致了相当快的表达式解析器；使用朴素递归下降来解析表达式的常见反对意见之一是，如果您有多个级别的运算符优先级，您很容易需要 20 个左右的嵌套函数调用来解析每个`PRIMARY`，这可能会变得相当慢。使用迭代方法，它通常只需要一次函数调用`PRIMARY`。如果您有一些右关联运算符（例如求幂），您可以对它们使用递归方法。

# javascript - 如何使用 javascript 检测多语言 joomla 网站的当前语言？

> ID：15255735
> 
> 赞同：1
> 
> 时间：2013-03-06T18:59:49.170
> 
> 标签：javascript, joomla

如何使用*javascript检测**多语言**joomla* 网站的当前语言？

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T19:57:20.340

试试这样的方法

```
<script>
    window.addEvent('domready',function(){
        var lang = document.getElement('html').getProperty('lang');
        console.log(lang)
    })
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T03:24:22.653

尝试这个

```
<?php

            $lang = JFactory::getLanguage();
            $lang_code = $lang->getTag();
            $lang_name = $lang->getName(); 

?> 
```

在 Js 中

```
<script type="text/javascript">
var language_code = "<?php echo $lang_code;?>";
var language_name = "<?php echo $lang_name ;?>";
console.log("Lang Code"+language_code+"Lang Name"+language_name);
</script> 
```

希望这可以帮助你..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-10T15:05:21.207

```
var lang = document.getElement('html').getProperty('lang'); 
```

此代码不适用于 ie，具体取决于您的模板，您可能有一些

```
<!--[if IE 9 ]> <html prefix="og: http://ogp.me/ns#" lang="en" class="ie9"> <![endif]--> 
```

将 lang 指定为 en 的标签。*

# javascript - 如何动态地将多行从我的 HTML 表单中的多行插入到数据库中？

> ID：15255737
> 
> 赞同：1
> 
> 时间：2013-03-06T18:59:55.057
> 
> 标签：javascript, sql

所以这是我的情况。我有一个表单，它使用户能够向表单添加任意数量的行并将更多数据输入到那些新创建的行中（使用 javascript）。我已经在下面的代码中设置了这个（我正在使用 index.html、js/scripts.js 和 php/upload.php 文件，所有文件都是外部链接的，包括外部 CSS）：

索引.HTML

```
<html>
<header>
<link rel="stylesheet" href="style.css" type="text/css">
 <script type="text/javascript" language="javascript" src="/jquery/js/jquery-1.9.1.js">   
</script>
<script src="http://www.mapquestapi.com/sdk/js/v7.0.s/mqa.toolkit.js?
key=Gmjtd%7Cluua2q6bn9%2C8g%3Do5-lzbsh"></script>
<script type="text/javascript" src="js/scripts.js"></script>
 <title>Central Office Company Survey</title>
</header>
<body onload="get_company_name();">
<h1>Central Office Company Survey</h1>
<div id='map' style='width:0px; height:0px; position:absolute'></div>

<input type="hidden" id="co_city">
<input type="hidden" id="co_state">
<input type="hidden" id="co_zipcode">

<table>
<th>Company</th>
<th>CO Name</th>
<th>Get Current Location</th>
<th>Lat</th>
<th>Long</th>
<th>Address</th>
<tr>
    <td><select id="company_name"></select></td>
    <td><input id="co_name" type="text"></td>
    <td><input type="submit" value="Get GPS" onclick="gpslookup()"></td>
    <td><input id="co_lat" type="text"></td>
    <td><input id="co_long" type="text"></td>
    <td><input id="co_address" type="text"></td>
</tr>
</table>
<table id="tabledata">
<th>Select</th>
<th>Border Location Name</th>
<th>Cable Location</th>
<th>Direction of Vault Wall</th>
<th>Cable Type</th>
<th>Cable Size (pairs)</th>
<th>Cable Gauge</th>
<th>Vertical(s) appeared on Verticals</th>
<th>Approximate Number of Jumpers</th>
<th>Are Protectors Still In?</th>
<th>Metered Distance</th>
<th class="comments">Central Office Comments</th>
<!--Begin Rows-->
<tr>
    <td><input type="checkbox"></td>
    <td><input id="border_location" type="text" name="txt[]"></td>
    <td><input id="cable_location" type="text" name="txt[]"></td>
    <td><input id="vault_direction" type="text" name="txt[]"></td>
    <td><input id="cable_type" type="text" name="txt[]"></td>
    <td><input id="cable_size" type="text" name="txt[]"></td>
    <td><input id="cable_gauge" type="text" name="txt[]"></td>
    <td><input id="vertical" type="text" name="txt[]"></td>
    <td><input id="jumpers" type="text" name="txt[]"></td>
    <td><input id="protectors" type="text" name="txt[]"></td>
    <td><input id="metered_dist" type="text" name="txt[]"></td>
    <td><input id="comments" type="text" name="txt[]"></td>
</tr>
</table>
<input id="addrow_btn" type="submit" value="Add New Row" onclick="addRow(); return false;" />
<input id="delrow_btn" type="submit" value="Delete Row" onclick="deleteRow(); return false;" />
<input id="submit" type="submit" value="Submit" onclick="uploaddata(); return false;"  />
</body>
</html> 
```

至于后端，我只有 PHP 和服务器端脚本能够使用以下代码提交第一行的信息：

JAVASCRIPT 文件

```
function addRow() {

var table = document.getElementById("tabledata");
var rowCount = table.rows.length;
var row = table.insertRow(rowCount);

var colCount = table.rows[1].cells.length;

for(var i=0; i<colCount; i++) {

    var newcell = row.insertCell(i);

    newcell.innerHTML = table.rows[1].cells[i].innerHTML;
    //alert(newcell.childNodes);
    switch(newcell.childNodes[0].type) {
        case "text":
                newcell.childNodes[0].value = "";
                break;
        case "checkbox":
                newcell.childNodes[0].checked = false;
                break;
    }
}
//UPLOAD DATA
//Global variables
var survey = {
    'co_name' : "",
    'co_lat' : "",
    'co_long' : "",
    'co_address' : "",
    'border_location' : "",
    'cable_location' : "",
    'vault_direction' : "",
    'cable_type' : "",
    'cable_size' : "",
    'cable_gauge' : "",
    'vertical' : "",
    'jumpers' : "",
    'protectors' : "",
    'metered_dist' : "",
    'comments' : "",
    'company_name' : "",
    'co_city' : "",
    'co_state' : "",
    'co_zipcode' : ""
    }

function uploaddata() { 

//Read all of the data from the page
for (eID in survey) {
    survey[eID] = document.getElementById(eID).value;
}   
 //Insert data into database

            $.ajax({
            type: 'POST',
            url: './php/upload_survey.php',
            data: survey,
            async: false,
            dataType: 'text',
            success: function() {
            alert("Thank you. Your survey has been submitted.");
            window.location.reload();
            },

                error: function(jqXHR, textStatus, errorThrown) {
                    alert("Error... " + textStatus + "\n" + errorThrown);
                }
        });
    } 
```

PHP文件

```
//Assign passed parameters

    $co_name = $_POST['co_name'];
    $co_lat = $_POST['co_lat'];
    $co_long = $_POST['co_long'];
    $co_address = $_POST['co_address'];     
    $border_location = $_POST['border_location'];
    $cable_location = $_POST['cable_location'];
    $vault_direction = $_POST['vault_direction'];
    $cable_type = $_POST['cable_type'];
    $cable_size = $_POST['cable_size'];
    $cable_gauge = $_POST['cable_gauge'];
    $vertical = $_POST['vertical'];
    $jumpers = $_POST['jumpers'];
    $protectors = $_POST['protectors'];
    $metered_dist = $_POST['metered_dist'];
    $comments = $_POST['comments'];
    $txt = $_POST['txt'];

    $stringLogInfo =  "INFO: Location: $co_address CO Name = $co_name !!!\n\n";
    log_audit($logAuditFile, $logModule, $stringLogInfo);

//Parse and store the ini file, this will return an associative array
ini_set("display_errors", "1");
error_reporting(E_ALL);

//Insert Survey Form Information into the database
    $fieldlist=$vallist='';
    foreach ($_POST as $key => $value) {
        $fieldlist.=$key.',';
        $vallist.='\''.$value.'\','; 
    }
    $fieldlist=substr($fieldlist, 0, -1);
    $vallist=substr($vallist, 0, -1);
    $sql='INSERT INTO table_name ('.$fieldlist.') VALUES ('.$vallist.')';

mysql_query($sql) or die ("Unable to Make Query:" . mysql_error()); 
```

到目前为止，我的目标是，已经准备好其他一切，能够根据他们创建的行数来遍历表单中的所有数据，并将所有这些新行值提交到 SQL 数据库中的单独行中. 请指教！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:25:40.257

这里关注这个问题的 HTML 部分是一种动态增长表单的方法：

首先是 HTML：

```
<table id="tabledata">
    <thead>
        <th>Select</th>
        <th>Border Location Name</th>
        <th>Cable Location</th>
        <th>Direction of Vault Wall</th>
        <th>Cable Type</th>
        <th>Cable Size (pairs)</th>
        <th>Cable Gauge</th>
        <th>Vertical(s) appeared on Verticals</th>
        <th>Approximate Number of Jumpers</th>
        <th>Are Protectors Still In?</th>
        <th>Metered Distance</th>
        <th class="comments">Central Office Comments</th>
    </thead>
    <tbody id="input"></tbody>
    <tbody id="template">
        <tr>
            <td><input name="selected" type="checkbox" /></td>
            <td><input name="border_location" type="text" /></td>
            <td><input name="cable_location" type="text" /></td>
            <td><input name="vault_direction" type="text" /></td>
            <td><input name="cable_type" type="text" /></td>
            <td><input name="cable_size" type="text" /></td>
            <td><input name="cable_gauge" type="text" /></td>
            <td><input name="vertical" type="text" /></td>
            <td><input name="jumpers" type="text" /></td>
            <td><input name="protectors" type="text" /></td>
            <td><input name="metered_dist" type="text" /></td>
            <td><input name="comments" type="text" /></td>
        </tr>
    </tbody>
</table>
<button id="ActionAddRow">Add Row</button>
<button id="ActionSubmit">Submit</button> 
```

这个JavaScript：

```
$(function () {
    var addInputRow = function () {
        $('#input').append($('#template').html());
    };

    addInputRow();
    $('#ActionAddRow').on('click', addInputRow);
    $('#ActionSubmit').on('click', function () {
        var data = $('#input tr').map(function () {
            var values = {};
            $('input', $(this)).each(function () {
                if (this.type === 'checkbox') {
                    values[this.name] = this.checked;
                } else {
                    values[this.name] = this.value;
                }
            });
            return values;
        }).get();
        $.post('/echo/json/', {
            json: JSON.stringify(data),
            delay: 1
        }).done(function (response) {
            alert("POST success");
            console.log(response);
        });
    });
}); 
```

然后这个CSS：

```
tbody#template {
    display: none;
} 
```

制作这个[演示](http://jsfiddle.net/sperske/8e5ae/10/)

这是正在发生的事情的细分。首先，该`table`元素可以定义多个主体，因此我添加了空输入行的 HTML，并将其隐藏（使用 CSS）在a`tbody`中`ID`。`template`然后，我使用 JavaScript 定义了一个简单的函数，该函数只是将该行的内容附加到`tbody`ID 为 的 ，`inputs`并将该函数绑定到`click`a 的事件`button`。然后因为输入`tbody`一开始是空的，所以我调用了一次该函数。然后为了提​​交表单，我选择所有行`inputs` `tbody`并遍历`inputs`在他们里面找到。接下来，我将它们组合成一个大型 JavaScript 对象数组，每个元素代表一行，最后我发布这个显示从客户端到服务器的数据往返（我正在使用 JSON2.js 序列化数据）。您的 PHP 页面将从此处获取以在服务器上检查它们，并（使用准备好的语句）将有效行插入数据库。

您的 PHP 将采用这样的 POSTed 值：

```
$value = json_decode($_POST['json']); 
```

并将提交的数据视为关联数组。此方法使用 AJAX 表单发布，因此 PHP 页面的响应应该是有效的 JSON，其结构如下：

```
{Success: true} 
```

# javascript - 使用 javascript 解析 url 以获取 codeigniter uri 值

> ID：15255738
> 
> 赞同：1
> 
> 时间：2013-03-06T18:59:55.980
> 
> 标签：javascript, jquery, codeigniter

我遇到了一种情况，我希望能得到一些帮助。

我有一个名为 Site 的控制器，其功能如下：

```
function getID(){
    $id_data = $this->uri->segment(3);
    $name = $this -> session -> userdata('name');
    echo json_encode($this -> getID_model -> getID($id_data,$name ));
} 
```

我的网址如下所示

```
 http://myapp.com/index.php?/site/user/96 
```

当链接打开时，用户只能在用户功能运行我的检查时才能看到他的页面。这就是为什么我不能删除或更改 User 函数的原因，因为它需要读取 URI 数据并且需要与我的 getID 函数分开

现在这是我的问题所在。

我需要调用站点控制器中的 getID 函数，它需要第三个 URI id 号。

下面是我的jQuery

```
 var fullurl = $('#hiddenurl').val() + 'index.php?/site/getID/';

$.getJSON(fullurl, function(json) {
    $.each(json, function(i,d) {
        //do my output stuff.
    });
    $('#_description').append(output);
}); 
```

这不起作用，因为控制器需要第三个 URI 段。

有人可以告诉我应该如何将此段添加到 url 中吗？我应该使用某种 JS 解析吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:03:48.430

您肯定可以访问（或可以访问）`$id_data`呈现“#hiddenurl”元素的视图中的变量吗？您可以执行以下操作：

```
<input type="hidden" name="whatever" id="whatever" value="<?php echo site_url("site/getID/$id_data"); ?>"> 
```

然后，您将可以轻松访问要在 getJSON() 调用中使用的整个 URL。

```
var my_url = $('#whatever').val();
// Now my_url should contain something like http://example.com/index.php/site/getID/123 
```

**注意：如果你已经加载了 CodeIgniter 的**[url helper](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html) ，你只能使用`site_url()`而不是更长的时间`$this->config->site_url()`来生成 URLs ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T02:19:33.183

如果你想获得 json 拳头，你需要发送 json 而不是纯文本

```
function getID(){
 header('Cache-Control: no-cache, must-revalidate');
    header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
    header('Content-type: application/json');

 $id_data = $this->uri->segment(3);
    $name = $this -> session -> userdata('name');
    echo json_encode($this -> getID_model -> getID($id_data,$name ));
} 
```

这对于 js

```
var valueofsometing=$('#someitng').val();
var base_url = <?=base_url()?>
  jQuery.ajax({
            url:base_url + "/site/getID/" + valueofsometing,
            async:false,
            type:'GET',
            cache:false,
            timeout:30000,
            success:function (result) {
                $('#joblist').append(result);
                $("select.workflow_class").last().uniform()
                initdrag();
            }
        }); 
```

# java - 使用java处理图像

> ID：15255740
> 
> 赞同：0
> 
> 时间：2013-03-06T19:00:05.630
> 
> 标签：java

我做了一个成功的应用程序，它在本地网络中截取电脑的屏幕截图，图像保存在计算机上的特定路径上，然后通过输出流发送到另一台计算机。但是，图像仍然在PC上。java中是否有任何函数可以删除发送后创建的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:01:44.630

发送图像后，调用[file.delete()](http://www.mkyong.com/java/how-to-delete-file-in-java/)方法肯定可以正常工作，从您刚刚捕获的 PC 屏幕上删除图像。

# solr - Solr 字符串字段类型最大可索引字符数

> ID：15255742
> 
> 赞同：2
> 
> 时间：2013-03-06T19:00:16.103
> 
> 标签：solr

我正在使用 solr 字符串字段在文本字段上提供精确匹配（我查看了文本字段类型，但不相信它对我有用 - 我想准确重现 Sql 的 LIKE 功能，包括空格和通配符）。

我的问题是当我索引大文本字段时，Solr 在搜索这些字段时不会返回任何数据。限制似乎是 int16.max。

作为测试，我创建了一个包含一个`id`字段和一个`string`字段的索引。如果该`id`字段为“1”并且该`string`字段包含 40,000 个字符：

*   `id:1`将返回带有 40,000 个字符的两个字段，表明它确实被索引了。
*   `string:*`不返回任何结果

如果字符串字段仅包含 30,000 个字符，那么一切似乎都可以正常工作。

我找不到任何说明这是一个限制的文档，也找不到任何解决方法，因为 maxFieldLength 在 4.0 中被删除并且字符串字段不支持分析器。

有没有其他人遇到过这个问题或找到了解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:57:31.917

我在这方面花了很多时间，所以我发布了我想出的解决方案，以防其他人遇到这个问题。使用带有 KeywordTokenizer 的文本字段类型确实像字符串字段一样工作，一直到我在使用字符串字段类型时遇到的长度限制。

最终，我在阅读[了这个线程](http://lucene.472066.n3.nabble.com/How-to-index-long-words-with-StandardTokenizerFactory-td1753490.html)后创建了一个自定义标记器，并进行了一些更改：

1.  他想要标准行为，所以他基于 StandardTokenizer，而我希望它像字符串字段一样。我第一次尝试使用 KeywordTokenizer，但仍然遇到限制，所以最终我基于 WhitespaceTokenizer（更多内容见下文）。

2.  那里的代码已过时，不适用于 Solr 4.0。

WhitespaceTokenizer 的代码很短，它包含一个称为`isTokenChar`返回的方法`!Character.isWhitespace(c);`。我只是将其更改为始终返回 true。之后，我创建了一个 TokenizerFactory 来返回它并在 schema.xml 中引用它，就像链接线程一样。

MyCustomTokenizer.java：

```
package custom.analysis;

import java.io.Reader;
import org.apache.lucene.analysis.Tokenizer;
import org.apache.lucene.analysis.util.CharTokenizer;
import org.apache.lucene.util.AttributeSource;
import org.apache.lucene.util.Version;

public final class MyCustomTokenizer extends CharTokenizer {

  public MyCustomTokenizer(Version matchVersion, Reader in) {
    super(matchVersion, in);
  }

  public MyCustomTokenizer(Version matchVersion, AttributeSource source, Reader in) {
    super(matchVersion, source, in);
  }

  public MyCustomTokenizer(Version matchVersion, AttributeFactory factory, Reader in) {
    super(matchVersion, factory, in);
  }

  @Override
  protected boolean isTokenChar(int c) {
    return true; //!Character.isWhitespace(c);
  }
} 
```

MyCustomTokenizerFactory.java：

```
package custom.analysis;

import org.apache.lucene.analysis.util.TokenizerFactory;
import org.apache.lucene.analysis.core.KeywordTokenizerFactory;
import org.apache.lucene.analysis.core.KeywordTokenizer;

import java.io.Reader; 
import org.apache.lucene.util.Version;

public class MyCustomTokenizerFactory extends TokenizerFactory {
  public MyCustomTokenizer create(Reader input) { 
    final MyCustomTokenizer tokenizer = new MyCustomTokenizer(Version.LUCENE_40, input); 
    return tokenizer; 
  } 
} 
```

架构.xml：

```
<fieldType name="text_block" class="solr.TextField" positionIncrementGap="100"> 
   <analyzer> 
     <tokenizer class="custom.analysis.MyCustomTokenizerFactory" />        
   </analyzer> 
</fieldType> 
```

使用这种方法，我能够使用字符串字段等功能索引大型文本字段（>100k 个字符）。如果有人找到更好的方法，请发布！

# powershell - 在 Powershell 中，如何传递 IEnumerable 参数？

> ID：15255743
> 
> 赞同：2
> 
> 时间：2013-03-06T19:00:26.407
> 
> 标签：powershell, lync

我正在尝试使用 Microsoft.Lync.Model.Contact.GetContactInformation() 方法。有两种版本，一种采用普通枚举，另一种采用具有多个值的 IEnumerable。

[http://msdn.microsoft.com/en-us/library/lync/hh347568.aspx](http://msdn.microsoft.com/en-us/library/lync/hh347568.aspx)

我可以半成功地使用第一个版本（直到我尝试检索一个没有价值的版本），但我无法理解我应该如何传递多个参数。

```
$contactInfo = $c[$c.Count - 1].Participants[1].Contact.GetContactInformation([int[]]("FirstName", "LastName", "DisplayName", "PrimaryEmailAddress")) 
```

（以上行不通。）

有人可以将我推向正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T20:45:35.127

最简单的语法将接近您现在所拥有的。该方法需要枚举`ContactInformationType`值，因此您的强制转换应该是这些值的数组，而不是`int`.

此外，您可以将`$foobar[-1]`其用作糖`$foo[$foo.Count - 1]`，即获取最后一个元素。

```
$contactInfo = $c[-1].Participants[1].Contact.GetContactInformation([Microsoft.Lync.Model.ContactInformationType[]] @("FirstName", "LastName", "DisplayName", "PrimaryEmailAddress")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T19:33:16.357

我认为如果您尝试以下操作，它将起作用：

```
$contactInfo = $c[$c.Count - 1].Participants[1].Contact.GetContactInformation(
                [int[]](
                        [int]Microsoft.Lync.Model::ContactInformationType.FirstName,
                        [int]Microsoft.Lync.Model::ContactInformationType.LastName,
                        [int]Microsoft.Lync.Model::ContactInformationType.DisplayName,
                        [int]Microsoft.Lync.Model::ContactInformationType.PrimaryEmailAddress)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T19:49:38.133

该方法本身可能不知道“FirstName”是什么。尝试创建一个枚举值数组，例如：

```
$information = [Microsoft.Lync.Model.ContactInformationType]::FirstName, [Microsoft.Lync.Model.ContactInformationType]::LastName, [Microsoft.Lync.Model.ContactInformationType]::DisplayName, [Microsoft.Lync.Model.ContactInformationType]::PrimaryEmailAddress
$contactInfo = $c[$c.Count - 1].Participants[1].Contact.GetContactInformation($information) 
```

# asp.net-mvc - 如何将@Html.TextBoxFor 转换为@Html.DropDownList？

> ID：15255755
> 
> 赞同：0
> 
> 时间：2013-03-06T19:01:34.857
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有一个使用文本框进行输入的视图。我需要换出文本框并使用下拉列表。只有三个，我想手工制作，而不是代码生成和重新应用任何调整。

我进行了数据库更改。我将字段更改为 FK 的 int 而不是 varchar(50)。

我更新了 EF 数据模型并确认 FK 映射正确。

我更改了视图中的标记。我从这个应用程序的其他地方复制了这个下拉列表的代码。

```
 <div class="LabelAndField">
        <div class="editor-label-score">
            @Html.LabelFor(model => model.FootLateralDominanceLateralityId)
        </div>
        <div class="editor-field-score">
            @Html.DropDownList("LateralDominanceLaterality", String.Empty)
            @Html.ValidationMessageFor(model => model.FootLateralDominanceLateralityId)
        </div>
    </div> 
```

我在视图模型中添加了以下代码：

```
public virtual LateralDominanceLaterality LateralDominanceLaterality { get; set; }
public virtual LateralDominanceLaterality LateralDominanceLaterality1 { get; set; }
public virtual LateralDominanceLaterality LateralDominanceLaterality2 { get; set; } 
```

当我运行应用程序并导航到此视图时，我收到以下异常：

```
There is no ViewData item of type 'IEnumerable<SelectListItem>' that has the key 'LateralDominanceLaterality'. 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:31:21.283

虽然现在是3，但未来可能会增加。所以不要通过向视图模型添加 3 个属性来硬编码 3 个项目。您应该做的是在您的视图模型中保留一个集合，以便根据需要在其中包含 n 个项目。还要尽量避免动态的东西，比如 ViewBag 和 ViewData。使用强类型方法。所以让我们像这样改变你的视图模型

```
public class CustomerViewModel
{
  //Your other existing properties of the viewmodel  goes here

  public List<SelectListItem> Lateralities { set;get;}
  public int SelectedLaterality { set;get;}

  public CustomerViewModel()
  {
    Lateralities =new List<SelectListItem>();
  }
} 
```

现在在您的 GET Action 方法中，设置集合的项目`Lateralities`并将 viewmodel 对象发送到我们的视图。

```
public ActionResult Add()
{
   var vm=new CustomerViewModel();

 //The below is hard code for adding 3 items to the collection. 
 //You may replace it with data from your table/data access layer

   vm.Lateralities.Add(new SelectListItem { Value="1", Text="Item 1"});
   vm.Lateralities.Add(new SelectListItem { Value="2", Text="Item 2"});
   vm.Lateralities.Add(new SelectListItem { Value="3", Text="Item 3"});

   return View(vm);
} 
```

在我们看来是强类型的`CustomerViewmodel`，使用`Html.DropDownListFor`辅助方法

```
@model CustomerViewModel
@using(Html.Beginform())
{
  @Html.DropdownListFor(x=>x.SelectedLaterality,
                   new SelectList(Model.Lateralities,"Value","Text"),"select")
  <input type="submit" />    
} 
```

当您的表单发布时，所选项目 id 将位于`SelectedLaterality`CustomerViewModel 的属性中。

```
[HttpPost]
public ActionResult Add(CustomerViewModel model)
{
  // check model.SelectedLaterality
  //to do : Save and redirect.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:08:59.950

它缺少您尚未传递给 DropDownList 的数据源。[asp.net-mvc](/questions/tagged/asp.net-mvc "显示标记为“asp.net-mvc”的问题")上的 DropDownList与一个名为的类一起使用`SelectList`，您可以在其中将任何实现传递`IEnumerable`给它以及要在此控件上绑定的值和文本的属性名称。尝试这样的事情：

1) 在控制器上，使用您的属性名称在 ViewBag 上设置一个键

```
var list = /* build an List you want to show, for sample: List<LateralDominanceLaterality> */;

// create a SelectList to fill the combo with the sintax of the .ctor (list, value property, text property), e.g.:
var items = new SelectList(list, "Id", "Description");

// set on the ViewBag
ViewBag.LateralDominanceLaterality = items; 
```

2）在视图上，你可以这样做：

```
@Html.DropDownListFor(model => model.LateralDominanceLaterality, ViewBag.LateralDominanceLaterality) 
```

# c# - 从键/值对构建对象的库

> ID：15255756
> 
> 赞同：2
> 
> 时间：2013-03-06T19:01:37.817
> 
> 标签：c#

在为一个类编写了另一个样板构建器之后，`IDictionary<string, string>`我正在寻找一些以声明式样式执行它的库。这是我想要的一个例子。你能建议任何允许这样做的库吗？

```
class Person
{
    string Name;
    int Age;
}

class PersonBuilder
{
    public Person Build(IDictionary<string, string> values)
    {
        // MagicBuilder is what I'm looking for
        var magicBuilder = new MagicBuilder<Person>();
        // MagicBuilder.AddRequiredField<Type>(key, field)
        magicBuilder.AddRequiredField<string>("name", p => p.Name);
        // MagicBuilder.AddOptionalField<Type>(key, field, defaultValue)
        magicBuilder.AddOptionalField<int>("age", p => p.Age, 0);
        return magicBuilder.Build(values);
    }
} 
```

# php - PHP - 来自输入的基本 strtotime

> ID：15255761
> 
> 赞同：1
> 
> 时间：2013-03-06T19:01:47.543
> 
> 标签：php, date, date-format, strtotime

我想编辑数据库中存在的帖子的当前日期，例如；（类型 = 日期时间）

例如#1；

```
2012-12-09 22:58:15 
```

这是 post 值（我成功获得）；

```
31/01/1980 08:20:00 
```

当我使用以下函数将其转换为日期时，我得到 '01/01/1970 01:00:00'

```
$date = date('d/m/Y H:i:s', strtotime($_POST['date'])); 
```

我真的不明白为什么它总是出错。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T19:05:23.760

strtotime 失败，返回一个布尔值 false，它被视为 (int)0 并转换为 unix 纪元：午夜，1970 年 1 月 1 日

阅读手册页上的节点：http: [//php.net/strtotime](http://php.net/strtotime)了解它将接受/理解的格式。

...然后使用[http://php.net/date_create_from_format](http://php.net/date_create_from_format)代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:08:27.417

从[strtotime](http://php.net/strtotime)：

> m/d/y 或 dmy 格式的日期通过查看各个组件之间的分隔符来消除歧义：如果分隔符是斜杠 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式。

您需要将日期转换`01/31/1980 08:20:00`为`31-01-1980 08:20:00`strtotime 才能正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T19:10:32.167

您遇到的问题可能与 strtotime 上的 PHP 手册中的此注释有关：

> m/d/y 或 dmy 格式的日期通过查看各个组件之间的分隔符来消除歧义：如果分隔符是斜杠 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式。
> 
> 为避免潜在的歧义，最好尽可能使用 ISO 8601 (YYYY-MM-DD) 日期或 DateTime::createFromFormat()。

您正在发送 d/m/y 并且由于日期中的斜杠分隔符，PHP 将其作为美国 m/d/y 时间来消除歧义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T19:20:26.797

根据发布的答案试试这个：

```
<?php
$date = new DateTime(str_replace("/", "-", $_POST['date']));
echo $date->format('d/m/Y H:i:s');
?> 
```

# sql-server - 如何删除基于 sys.objects 的表？

> ID：15255768
> 
> 赞同：2
> 
> 时间：2013-03-06T19:02:12.433
> 
> 标签：sql-server, object, sql-server-2008-r2, system

我正在尝试从每个服务器/数据库中删除表。

我运行查询以从不同服务器获取每个数据库中的表列表。

```
SELECT * 
FROM sys.objects 
WHERE type = 'u' AND name LIKE '%JSK%' 
```

我想删除那些表。

我需要查询怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T19:12:24.597

假设没有外键关系使得删除顺序很重要：

```
DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += N'
DROP TABLE '
  + QUOTENAME(SCHEMA_NAME([schema_id]))
  + '.' + QUOTENAME(name) + ';'
FROM sys.tables
WHERE name LIKE '%JSK%';

PRINT @sql;
-- EXEC sp_executesql @sql; 
```

# javascript - 单击时更改样式的自定义绑定不起作用

> ID：15255774
> 
> 赞同：1
> 
> 时间：2013-03-06T19:02:33.843
> 
> 标签：javascript, knockout.js

我在表格中显示数据，但某些字段太长并导致它们的行太高，因此我正在创建一个自定义绑定，它将切断溢出并用省略号显示有问题的字段。

```
a, b, c, d,... 
```

然后，当用户单击该字段时，它将“取消隐藏”显示该字段所有数据的数据。

我的绑定虽然不能正常工作。我的目标是最初隐藏所有溢出并在用户单击该字段时取消隐藏每个字段。

我的绑定正在做相反的事情，有点。最初，它使字段不*隐藏*，然后在用户单击该字段后隐藏该字段。但是一旦发生初始点击，该字段将不会再次切换。

[我的小提琴](http://jsfiddle.net/bflemi3/fT4dH/)

我觉得我有点想多了……

**更新**

一旦点击事件被触发，options.data 的值将始终保持它最初更改的值。如何将当前版本的 hideOverflow 作为 valueAccessor 发送到 click init 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:38:13.303

您可能希望切换您的`hideOverflow`可观察对象，而不是将其设置为传递给点击绑定的值（数据本身，这是真实的）。

所以，你可以这样做：

```
self.changeOverflow = function () {
    self.hideOverflow(!self.hideOverflow());
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:23:12.663

我已经用 RP Niemeyer 的解决方案更新了您的小提琴，以及针对您的特定情况的解决方案。

[http://jsfiddle.net/dzul1983/fT4dH/5/](http://jsfiddle.net/dzul1983/fT4dH/5/)

我在第 15 行添加了一个 bang

```
options.data = !ko.utils.unwrapObservable(options.data); 
```

我认为更新绑定有点误导，因为它也是在初始化时触发的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:23:08.570

问题的出现是因为`newValueAccessor`返回调用`options.click`而不是返回调用`options.click`. 我改了这个...

```
var newValueAccessor = function () {
    return options.click(!ko.utils.unwrapObservable(options.data));
}; 
```

对这个……

```
var newValueAccessor = function () {
    return function (data) {
        options.click.call(viewModel, !data.hideOverflow());
    };
}; 
```

它就像一个魅力

# ruby-on-rails - rails中的拆分方法

> ID：15255776
> 
> 赞同：-3
> 
> 时间：2013-03-06T19:03:00.287
> 
> 标签：ruby-on-rails

我想按每个空格分割给定的字符串。所以，Test 类有 source:text

```
 def create
        @test = Test.new(params[:test])
        @test.source = @test.source.split(/ /)
        #that usual code 
```

如果我输入类似

```
'A B C D' 
```

输出是

```
'--- - A-B-C-D' 
```

并且表现得像通常的字符串，所以@test.source[0] 给出'-'。

我希望它是数组。我需要它通过它的顺序访问我的文本输入中的每个单词，例如，@test.source[0] 我想返回“A”。

**升级版：**

现在我发现'serailize'方法是我正在寻找的，但是

```
serialize :sources, Array 
```

不会改变任何东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T19:15:50.870

可能是这样？？

```
 1.9.3-p374 :012 > "A B C D".split(" ")
  => ["A", "B", "C", "D"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:16:52.273

做：

```
def create
        @test = Test.new(params[:test])
        @test.source = @test.source.split(" ") 
```

# grails - SpringSecurity 和 Grails 怎么可能出现这种情况？

> ID：15255778
> 
> 赞同：1
> 
> 时间：2013-03-06T19:03:08.863
> 
> 标签：grails, spring-security

给定一个用“IS_AUTHENTICATED_FULL”注释的控制器方法和注入的springSecurityService，我很困惑为什么偶尔会看到由于空用户实例而引发的异常。

例如，我的控制器动作就是这样..

```
@Secured(['IS_AUTHENTICATED_FULLY'])
  def ammendSomething = {

    def User user = springSecurityService.currentUser

    println user.fieldTest
    render "OK"
  } 
```

大量更改以显示重要位、注释、检索用户和访问字段的调用。

以上导致 NullPointerException: Cannot get property 'fieldTest' on null object

这仅在生产中发生，我无法在开发中复制该问题，因为我在未登录时对此进行的任何调用，我被正确重定向到“auth”登录过程。

因此，当 springSecurityService 中没有 currentUser 时，pringln user.fieldTest 是如何执行的，我感到非常困惑。

任何想法表示赞赏。

谢谢，

# ruby - 新的 Relic Api 获取监控详细信息

> ID：15255779
> 
> 赞同：0
> 
> 时间：2013-03-06T19:03:19.553
> 
> 标签：ruby, ruby-on-rails-3, monitoring, newrelic

我们可以从 NewRelic Rest API 获取我的应用程序的正常运行时间和停机时间详细信息吗？在 API 中没有找到任何方法。 [http://newrelic.github.com/newrelic_api/](http://newrelic.github.com/newrelic_api/) 如果不是从新遗物中，我们还有其他方法可以做到吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:24:04.383

现在您无法通过我们的 REST API 获取可用性监控数据。“仪表板 HTML 片段”将包含此信息，但不是以理想的格式 :( 我们正在努力在不久的将来改进此系统。

# linux - Git：索引文件打开失败：“git status”的权限被拒绝。托管在 Bitbucket 上

> ID：15255785
> 
> 赞同：31
> 
> 时间：2013-03-06T19:03:35.567
> 
> 标签：linux, git, bitbucket

在过去几天尝试制作 git status 或 git pull 时，我一直遇到这个问题。该存储库托管在 Bitbucket 上。

尝试了几件事来完成这项工作（在stackoverflow上有一些与此相关的帖子，但他们没有工作）。

这是问题：

```
user@Host:/repo/$ git status
致命：索引文件打开失败：权限被拒绝
致命：git status --porcelain 失败

```

如果我执行“git pull”：

```
user@Host:/repo/$ git pull
远程：计数对象：77，完成。
远程：压缩对象：100% (30/30)，完成。
远程：总共 56 个（增量 37），重复使用 41 个（增量 22）
错误：将对象添加到存储库数据库 .git/objects 的权限不足

致命：无法写入对象
致命：解包对象失败

```

我仔细检查了本地权限，一切似乎都很好。我有权访问所有文件。

**笔记：**

如果我使用“sudo”，一切似乎都正常工作，但是我在该部署机器上没有任何用于 root 的 SSH 凭据。它让我认为这是权限问题（正如错误所解释的那样），但是：如果我是所有文件的所有者，包括 .git/ 中的文件，它可能是什么

提前致谢！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-09-02T03:56:16.097

`fatal: index file open failed: Permission denied`通过 run得到了同样的错误`git status`，我检查`.git/index`了

```
$ ls -al .git/index 
```

令我惊讶的是，它是

```
----------  1 Kjuly  staff  768248 Sep  2 11:07 .git/index 
```

我不知道为什么以及如何改变。无论如何，在我将其权限更改回`644`by

```
$ chmod 644 .git/index 
```

`git status`作品。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T20:00:49.897

确保 .git 目录及其文件/子目录由您的用户拥有和可写。这听起来像是存储库被克隆在不同的用户帐户下或作为 root 用户（例如通过`sudo`）。

存储库的远程托管在哪里无关紧要， git status 只访问本地存储库。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-07-06T14:41:53.310

我有同样的问题，想知道可能是什么原因.. 环顾四周，想想我在做什么，是什么触及了文件系统和工作目录——我怀疑这些文件是由 IDE 打开的，带有一些锁，当我在终端 git 中执行合并和更改分支时。关闭 IDE，关闭 shell，git pull 正常，没有错误消息。我在系统中没有用户更改，所以我认为文件锁定或 IDE 在幕后使用 git repo “为我”做的事情是原因。希望这对某人有所帮助。如果您遇到同样的问题并想深入了解它（不仅仅是修复它）问自己“谁/什么可能会触及和更改我的 .git 和工作目录的文件所有权”？就我而言，嫌疑人是 Microsoft Visual Studio。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-25T21:48:03.733

今天我在使用 BitBucket 时遇到了同样的问题。这是对我有用的解决方法：

```
git remote set-url origin https://_username_@bitbucket.org/_my_/_repo_.git
git pull
git push
git remote set-url origin git@bitbucket.org:_my_/_repo_.git 
```

# ios - 使用 Windows 操作系统为 Apple 创建应用程序

> ID：15255788
> 
> 赞同：1
> 
> 时间：2013-03-06T19:03:46.540
> 
> 标签：ios, windows, macos

我有一台装有 Windows 操作系统的电脑，我会为 AppleStore 创建一个应用程序。我必须有一台装有苹果操作系统的电脑，或者我可以用 Windows 编程吗？

# python - 如何检查文件是否存在，如果存在，将数字附加到文件名

> ID：15255796
> 
> 赞同：1
> 
> 时间：2013-03-06T19:03:59.530
> 
> 标签：python

您好我正在尝试从一个信号中创建多个样本。为此，当绘制 fft 时，我还将频率和幅度输出到 csv 文件。但是，问题在于我只制作一个样本，因为输出文件每次都会被覆盖。我想要做的是检查文件'output.csv'是否已经存在，如果存在，则为每个新文件沿'output1.csv''output2.csv'等行添加递增数字。任何帮助将不胜感激

```
 def draw_fft(self):
        self.plot_fft[0].set_data([self.freq, self.iq_fft])
        self.sp_fft.set_xlim(self.freq.min(), self.freq.max())
        self.sp_fft.set_ylim([self.iq_fft.min()-10, self.iq_fft.max()+10])
        # for debugging print(self.freq,self.iq_fft)
        freqOut = np.array(self.freq)
        amplOut = np.array(self.iq_fft)
        output = np.column_stack((freqOut.flatten(),amplOut.flatten())
        # where the file check should occur
        np.savetxt('output.csv',output,delimiter=',') 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T19:10:17.533

你当然可以这样做。不如将更多信息附加到文件名中，例如当前的日期和时间。

这样您就不必检查文件是否存在。

```
import datetime as dt 

def draw_fft(self):
    ...
    outputfilename = 'output_{}.csv'.format( dt.datetime.now().strftime('%Y%m%d%H%M%S') )
    np.savetxt(outputfilename, output, delimiter=',') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T19:12:02.757

```
from os.path import isfile

sequence = ""
filename = "output%s.csv"

while isfile(filename % sequence):
    sequence = int(sequence or 0) + 1
filename = filename % sequence 
```

请注意，如果另一个进程或线程尝试使用相同的基本名称和方法在同一目录中创建文件，这可能会受到竞争条件的影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T19:06:33.107

要检查文件是否存在，请使用以下`os.path.isfile`函数：

[http://docs.python.org/2/library/os.path.html#os.path.isfile](http://docs.python.org/2/library/os.path.html#os.path.isfile)

# java - 三种代码覆盖率分析方法有什么区别？

> ID：15255798
> 
> 赞同：18
> 
> 时间：2013-03-06T19:04:02.457
> 
> 标签：java, code-coverage, cobertura, jacoco, clover

[这个声纳页面](http://www.sonarsource.org/pick-your-code-coverage-tool-in-sonar-2-2/)基本上列出了不同代码覆盖率分析工具采用的各种方法：

1.  *源代码检测*（由[Clover](http://www.atlassian.com/software/clover/overview)使用）
2.  *离线字节码检测*（[Cobertura](http://cobertura.sourceforge.net/)使用）
3.  *即时字节码检测*（由[Jacoco](http://www.eclemma.org/jacoco/)使用）

这三种方法是什么，哪一种最有效，为什么？如果效率问题的答案是“取决于”，请解释为什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-06T19:11:32.973

源代码检测包括在编译之前向源代码添加指令。这些指令用于跟踪代码的哪些部分已被执行。

离线字节码检测包括添加那些相同的指令，但在编译之后，直接添加到字节码中。

动态字节码检测包括在字节码中添加那些相同的指令，但在运行时，当 JVM 加载字节码时是动态的。

[此页面](https://confluence.atlassian.com/pages/viewpage.action?pageId=79986998)有方法之间的比较。它可能有偏见，因为它是 Clover 文档的一部分。

根据你对“高效”的定义，选择你最喜欢的那个。我不认为你会得到巨大的差异。他们都在做这项工作，无论使用什么方法，大局都是一样的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T23:17:30.220

一般来说，对覆盖的影响是相同的。

**源代码检测可以提供出色的报告结果**，这仅仅是因为字节码检测无法区分源代码行中的任何结构，因为代码块粒度仅根据源代码行记录。

想象一下，我在一行中有两个嵌套的 if 语句（或等效的**if (a && b) ... * ）。**源代码检测器可以看到这些，并在源代码行中的 if 中提供多个分支的覆盖率信息；它可以根据行和列报告块。字节码检测器只能看到围绕条件的一行。如果条件 a 执行但为假，它是否会将行报告为“已覆盖”？

您可能会争辩说这是一种罕见的情况（很可能是），因此不是很有用。当您获得虚假报道并随后出现现场故障时，您可能会改变对实用程序的看法。

有一个[很好的例子和解释字节码覆盖如何使正确地覆盖 switch 语句](https://stackoverflow.com/a/28015212/120163)非常困难。

源代码检测器还可以实现更快的测试执行，因为它具有帮助优化检测代码的编译器。特别是，二进制检测器插入循环内的探针可能会被 JIT 编译器编译到循环内。一个好的 Java 编译器会看到检测产生循环不变的结果，并将检测从循环中取出。（可以说，JIT 编译器也可以这样做；问题是他们是否真的这样做）。

# c# - 我如何能够在单选按钮列表的 DataTextField 中给出两个字符串？

> ID：15255799
> 
> 赞同：1
> 
> 时间：2013-03-06T19:04:13.113
> 
> 标签：c#

这里“名称”和“规格”是我的表格的字段，我想在`DataTextField`. 我尝试了上面的代码：

```
RadioButtonList1.DataSource = dt;
RadioButtonList1.DataTextField = "name";
RadioButtonList1.DataTextField = "specification";
RadioButtonList1.DataBind(); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:08:36.943

```
RadioButtonList1.Items.Clear();

foreach(var row in dt.Rows)
{
    var txt = row["name"].ToString() + " " + row["specification"].ToString();
    var val = row["id"].ToString();
    var item = new ListItem(txt,val);
    RadioButtonList1.Items.Add(item);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:08:48.610

您将需要填充项目数据绑定事件的字段或从 dt 创建一个新的组合列；

```
var newDT = (from r in dt
             select new 
             {
                 ID = r.ID,
                 NameAndSpec = r.name + ", " + r.specification
             }
             ); 
```

# javascript - Javascript addEventListener 函数

> ID：15255801
> 
> 赞同：13
> 
> 时间：2013-03-06T19:04:18.307
> 
> 标签：javascript, function, addeventlistener

我是事件处理程序的新手，我遇到了下面写的代码

```
document.addEventListener("DOMContentLoaded", function() {
    initialiseMediaPlayer();
}, false); 
```

编写相同的代码有什么区别

```
document.addEventListener("DOMContentLoaded", initialiseMediaPlayer();, false); 
```

最终我们调用的是同一个函数，那么它是否有区别，或者以上述方式编写它有什么好处？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-06T19:16:12.150

```
document.addEventListener("DOMContentLoaded", function() {
    initialiseMediaPlayer();
}, false); 
```

将`initialiseMediaPlayer`在加载 dom 内容时执行。

```
document.addEventListener("DOMContentLoaded", initialiseMediaPlayer();, false); 
```

是语法错误；如果删除分号：

```
document.addEventListener("DOMContentLoaded", initialiseMediaPlayer(), false); 
```

立即调用`initialiseMediaPlayer`，然后将返回值（可能*不是*函数）传递给`addEventListener`. 这不会如愿以偿。

* * *

你可以做

```
 document.addEventListener("DOMContentLoaded", initialiseMediaPlayer, false); 
```

（删除括号 = 函数调用）。然后`initialiseMediaPlayer`将在加载的 dom 内容上执行，并根据需要执行操作。

但是，与前一种情况不同，它`initialiseMediaPlayer`实际上会接收浏览器给出的参数。此外，它的返回值被浏览器接收。在 的情况下`DOMContentLoaded`，这很可能无关紧要。

如果您`initialiseMediaPlayer`直接传递，您还可以避免创建一个额外的匿名函数。同样，从用户的角度来看，效果并不是真正可感知的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-06T19:12:47.280

1）。是的，有很大的不同。第二个版本会报错。但即使你这样修复它：

```
document.addEventListener("DOMContentLoaded", initialiseMediaPlayer(), false); 
```

`initialiseMediaPlayer`不会被调用，`DOMContentLoaded`因为`()`让它立即执行，而你必须将引用传递给*函数*，而不是它的结果。

2）。另一个显着的区别是**调用的上下文**。

```
document.addEventListener("DOMContentLoaded", initialiseMediaPlayer, false); 
```

`initialiseMediaPlayer`将在`document`对象的上下文中调用。而第一个版本将在`Window`对象上下文中调用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-06T19:08:48.753

函数的第二个参数`addEventListener()`接受*类型 function*。所以你不能通过`initialiseMediaPlayer();`，因为那是一个函数调用。

你可以做的是：

```
var onDOMContentLoaded = function() {
    initialiseMediaPlayer();
};
document.addEventListener("DOMContentLoaded", onDOMContentLoaded, false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T19:13:02.510

在第一种情况下

```
document.addEventListener("DOMContentLoaded", function() {
    initialiseMediaPlayer();
}, false); 
```

匿名函数`function(){initialiseMediaPlayer();}`注册为在文档的事件“DOMContentLoaded”被触发时触发

在第二种情况下：

```
document.addEventListener("DOMContentLoaded", initialiseMediaPlayer();, false); 
```

注册为事件监听器的是表达式的结果`initialiseMediaPlayer()`

所以，是的，有区别:)

# ios - iOS 6.1 与 willTransitionToState 的行为不同

> ID：15255802
> 
> 赞同：4
> 
> 时间：2013-03-06T19:04:22.167
> 
> 标签：ios, objective-c, cocoa-touch, cocoa, ios6

我将我`UITableCell`的子类化，以便将 EditMode 中的减号图像和删除图像移动到相反的方向。到目前为止效果很好，但是在 iOS 6 中，当我在 tableView 上使用 reloadData 时，减号图像会跳到单元格的左侧，而不是停留在右侧。我不知道 iOS 6 中发生了什么变化来触发这种行为。

我不知道这是否是导致问题的原因，但我已经记录了 iOS 5 和 iOS 6 中的所有来源，唯一的区别是：

**iOS 5.0：** 日志 5 - 状态 1 和 3：**560.000000**、 0.000000 、 41.000000 、 40.000000

**iOS 6.1：** 日志 5 - 状态 1 和 3：**808.000000**、 0.000000 、 41.000000 、 40.000000

这是代码：

**。H：**

```
#import <UIKit/UIKit.h>

#define UITableViewCellEditControlOffset 280
#define UITableViewCellDeleteConfirmationControlOffset 250
#define UITableViewCellAnimationOffset 20
#define UITableViewCellAnimationDuration 0.0
#define BigCellHeight 40
#define SmallCellHeight 40

typedef enum{
    Name = -1,
    Additions = -2,
    Price = -3,
    BackgroundImage = -4,
    Line = -5,
    Edit = -6, 
    Plate = -7,
    Sign = -8
}CellData;

@interface RTLUITableViewCelliPhone : UITableViewCell {
    UITableViewCellStateMask state;
    BOOL editHiddenEarlier, priceHiddenEarlier;
}

@property (nonatomic, assign) BOOL inEditingMode;
@property (nonatomic, assign) BOOL editable, removable; 
```

**米：**

```
#import "RTLUITableViewCelliPhone.h"

@implementation RTLUITableViewCelliPhone

@synthesize editable, removable, inEditingMode;

- (void)layoutSubviews{
    [super layoutSubviews];
    self.contentView.frame = CGRectMake(0, 0, 320, BigCellHeight);
}

- (void)willTransitionToState:(UITableViewCellStateMask)aState{
    [super willTransitionToState:aState];
    state = aState;
    if (state==0) {
        for (UIView *subview in self.subviews){
            if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellEditControl"]){
                UIView *noEntranceView = [subview.subviews objectAtIndex:0];                
                noEntranceView.alpha = 0;
            }
            if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellDeleteConfirmationControl"]){                
                UIView *deleteView = [subview.subviews objectAtIndex:0];
                deleteView.alpha = 0;
            }
        }
    }
    if (state==1 || state==3){
        for (UIView *subview in self.subviews){
            if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellEditControl"]){
                UIView *noEntranceView = [subview.subviews objectAtIndex:0];
                noEntranceView.alpha = 0;
                subview.frame = CGRectMake(subview.frame.origin.x+UITableViewCellEditControlOffset, subview.frame.origin.y, subview.frame.size.width, subview.frame.size.height);
                NSLog(@"Log 1 - State 1 And 3: %f , %f , %f , %f ",subview.frame.origin.x+UITableViewCellEditControlOffset, subview.frame.origin.y, subview.frame.size.width, subview.frame.size.height);
            }
            if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellDeleteConfirmationControl"]){
                UIView *deleteView = [subview.subviews objectAtIndex:0];
                deleteView.alpha = 0;
                subview.frame = CGRectMake(subview.frame.origin.x-UITableViewCellDeleteConfirmationControlOffset, subview.frame.origin.y, subview.frame.size.width, subview.frame.size.height);
                NSLog(@"Log 2 - State 1 And 3: %f , %f , %f , %f ",subview.frame.origin.x-UITableViewCellDeleteConfirmationControlOffset, subview.frame.origin.y, subview.frame.size.width, subview.frame.size.height);
            }
        }
    }
    if ([self inEditingMode]) {
        if (state==3) {
            editHiddenEarlier = [self.contentView viewWithTag:Edit].hidden;
            priceHiddenEarlier = [self.contentView viewWithTag:Price].hidden;
            [self.contentView viewWithTag:Sign].hidden = [self.contentView viewWithTag:Edit].hidden = [self.contentView viewWithTag:Price].hidden = YES;
        }
        if (state==1) {
            [self.contentView viewWithTag:Edit].hidden = !self.editable || editHiddenEarlier;
            [self.contentView viewWithTag:Sign].hidden = [self.contentView viewWithTag:Price].hidden = ![self.contentView viewWithTag:Edit].hidden;
        }
    }
}

- (void)didTransitionToState:(UITableViewCellStateMask)aState{
    [super didTransitionToState:aState];
    state = aState;
    if (state==0) { // End editing

        for (UIView *subview in self.subviews){
            if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellEditControl"]){
                [UIView beginAnimations:nil context:nil];
                [UIView setAnimationDuration:UITableViewCellAnimationDuration];
                UIView *noEntranceView = [subview.subviews objectAtIndex:0];                
                noEntranceView.alpha = 1;
                noEntranceView.frame = CGRectMake(noEntranceView.frame.origin.x+UITableViewCellAnimationOffset, noEntranceView.frame.origin.y, noEntranceView.frame.size.width, 
                                                  noEntranceView.frame.size.height);
                [UIView commitAnimations];
                NSLog(@"Log 3 - State 0: %f , %f , %f , %f ",noEntranceView.frame.origin.x+UITableViewCellAnimationOffset, noEntranceView.frame.origin.y, noEntranceView.frame.size.width,
                      noEntranceView.frame.size.height);

            }

            if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellDeleteConfirmationControl"]){                
                UIView *deleteView = [subview.subviews objectAtIndex:0];

                [UIView beginAnimations:nil context:nil];
                [UIView setAnimationDuration:UITableViewCellAnimationDuration];
                deleteView.alpha = 1;
                deleteView.frame = CGRectMake(deleteView.frame.origin.x-UITableViewCellAnimationOffset, deleteView.frame.origin.y, deleteView.frame.size.width, deleteView.frame.size.height);
                [UIView commitAnimations];
                NSLog(@"Log 4 - State 0: %f , %f , %f , %f ",deleteView.frame.origin.x-UITableViewCellAnimationOffset, deleteView.frame.origin.y, deleteView.frame.size.width, deleteView.frame.size.height);
            }
        }
    }
    if (state==1 || state==3){
        for (UIView *subview in self.subviews){
            if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellEditControl"]){
                subview.frame = CGRectMake(560, subview.frame.origin.y, subview.frame.size.width, subview.frame.size.height);
                NSLog(@"Log 5 - State 1 And 3: %f , %f , %f , %f ",subview.frame.origin.x+UITableViewCellEditControlOffset, subview.frame.origin.y, subview.frame.size.width, subview.frame.size.height);

                UIView *noEntranceView = [subview.subviews objectAtIndex:0];
                noEntranceView.frame = CGRectMake(noEntranceView.frame.origin.x+UITableViewCellAnimationOffset, noEntranceView.frame.origin.y, noEntranceView.frame.size.width,
                                                  noEntranceView.frame.size.height);
                NSLog(@"Log 6 - State 1 And 3: %f , %f , %f , %f ",noEntranceView.frame.origin.x+UITableViewCellAnimationOffset, noEntranceView.frame.origin.y, noEntranceView.frame.size.width,
                      noEntranceView.frame.size.height);

                [UIView beginAnimations:nil context:nil];
                [UIView setAnimationDuration:UITableViewCellAnimationDuration];
                noEntranceView.alpha = 1;
                noEntranceView.frame = CGRectMake(noEntranceView.frame.origin.x-UITableViewCellAnimationOffset, noEntranceView.frame.origin.y, noEntranceView.frame.size.width, noEntranceView.frame.size.height);

                [UIView commitAnimations];
                NSLog(@"Log 7 - State 1 And 3: %f , %f , %f , %f ",noEntranceView.frame.origin.x-UITableViewCellAnimationOffset, noEntranceView.frame.origin.y, noEntranceView.frame.size.width, noEntranceView.frame.size.height);
            }
            if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellDeleteConfirmationControl"]){
                subview.frame = CGRectMake(subview.frame.origin.x-UITableViewCellDeleteConfirmationControlOffset, subview.frame.origin.y, subview.frame.size.width, subview.frame.size.height);
                NSLog(@"Log 8 - State 1 And 3: %f , %f , %f , %f ",subview.frame.origin.x-UITableViewCellDeleteConfirmationControlOffset, subview.frame.origin.y, subview.frame.size.width, subview.frame.size.height);
                UIView *deleteView = [subview.subviews objectAtIndex:0];
                deleteView.frame = CGRectMake(deleteView.frame.origin.x-UITableViewCellAnimationOffset, deleteView.frame.origin.y, deleteView.frame.size.width, deleteView.frame.size.height);
                NSLog(@"Log 9 - State 1 And 3: %f , %f , %f , %f ",deleteView.frame.origin.x-UITableViewCellAnimationOffset, deleteView.frame.origin.y, deleteView.frame.size.width, deleteView.frame.size.height);
                [UIView beginAnimations:nil context:nil];
                [UIView setAnimationDuration:UITableViewCellAnimationDuration];
                deleteView.alpha = 1;
                deleteView.frame = CGRectMake(deleteView.frame.origin.x+UITableViewCellAnimationOffset, deleteView.frame.origin.y, deleteView.frame.size.width, deleteView.frame.size.height);
                [UIView commitAnimations];
                NSLog(@"Log 10 - State 1 And 3: %f , %f , %f , %f ",deleteView.frame.origin.x+UITableViewCellAnimationOffset, deleteView.frame.origin.y, deleteView.frame.size.width, deleteView.frame.size.height);
            }
        }
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T13:53:29.440

如果在 xib 上启用了自动布局，则可能是问题的原因。这个答案可能会提供一些见解[contentView 在 iOS 6 UITableViewCell 原型单元格中不缩进](https://stackoverflow.com/questions/12600214/contentview-not-indenting-in-ios-6-uitableviewcell-prototype-cell/12657891#12657891)

# ruby - 奇怪的日期时间格式

> ID：15255804
> 
> 赞同：0
> 
> 时间：2013-03-06T19:04:38.890
> 
> 标签：ruby, date, datetime, unix-timestamp, epoch

请帮我弄清楚如何用 ruby​​ 解析这个奇怪的日期时间字符串：

`"TimeStampUtc": "\/Date(1328696521000+0000)\/`

`"Date"=>"/Date(1365703200000+0100)/`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:08:24.910

带有尾随的 0，它可能是 javascript 样式的时间戳：自 1970 年 1 月 1 日以来的毫秒数：

```
1365703200000/1000 = 136570320 -> Apr 11/2013 
```

# jquery - 格式化 json 结果

> ID：15255806
> 
> 赞同：1
> 
> 时间：2013-03-06T19:04:40.550
> 
> 标签：jquery, json, getjson

我正在使用这个演示来尝试使用 JSON 获取数据以显示在我的页面上。图像显示，但我怎样才能让它在它自己的列表项标签中显示每个图像，并具有唯一的 ID？

像

```
<li id="20393"> picture </li>

        $.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?",
    {
        tags: "mount rainier",
        tagmode: "any",
        format: "json"
    },
    function (data) {
        $.each(data.items, function (i, item) {
            $("<img/>").attr("src", item.media.m).appendTo("#images");
            if (i == 3) return false;
        });
    }); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:13:42.887

与构建 的方式相同`img`，用标识的`li`（[api.jqueryui.com/uniqueId](http://api.jqueryui.com/uniqueId/)）包装它。

```
$.each(data.items, function (i, item) {
    $('<li />').uniqueId()
        .append($('<img />').attr('src', item.media.m))
        .appendTo('#images');
}); 
```

假设`#images`是`ul`or `ol`。

# javascript - 来自 CodeBehind 的 ASP.NET 警报换行符

> ID：15255809
> 
> 赞同：6
> 
> 时间：2013-03-06T19:04:58.197
> 
> 标签：javascript, asp.net, newline, alert

我在 Page.aspx.cs 文件中有这样的代码：

```
void btnSessionCreate_Click(object sender, EventArgs e)
{
        if (Session["user"] == null)
        {
            Session["user"] = Guid.NewGuid().ToString();
            Response.Redirect("/");
        }
        else if (Session["user"] != null)
        {
            string userBrowser = Request.UserAgent.ToString();
            string sessionId = Session["user"].ToString();

            Response.Write("<script>alert('" + sessionId + "\r\n" + userBrowser + "');</script>");
        }
 } 
```

主要问题是 Response.Write() 方法中的 "\r\n" 部分。我想用换行符分隔数据，但不能！

如果没有 "\r\n" ，脚本会很好地发出警报，但如果代码中存在，则不会发出警报并且正在更改会重置其 CSS 样式。

为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T19:15:28.207

使用`@`符号或双精度`\\`来转义斜线

```
string script = String.Format(@"<script>alert('{0}\r\n{1}');</script>", sessionId, userBrowser); 
```

或者

```
string script = String.Format("<script>alert('{0}\\r\\n{1}');</script>", sessionId, userBrowser);

Client.RegisterStartupScript(this.GetType(), "myscript", script, true); 
```

[有关 Client.RegisterStartupScript 的更多信息在这里](http://msdn.microsoft.com/en-us/library/z9h4dk8y.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:06:48.690

你只需要转义`\`, 所以`\`当输出到 JavaScript 时它们变成：

```
Response.Write("<script>alert('" + sessionId + "\\r\\n" + userBrowser + "');</script>"); 
```

或者：

```
Response.Write("<script>alert('" + sessionId + @"\r\n" + userBrowser + "');</script>"); 
```

您在上一行的 C# 上下文中，因此`\r\n`被解释为需要由`Response.Write`. 那不是你想要的。您希望输出文字`\r\n`，因此它们被解释为 JavaScript 换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-08T07:01:37.647

Response.Write("alert('" + sessionId + "\n" + userBrowser + "');");

这将在 asp.net 中正常工作

# php - MYSQL 使用 ORDER by if, 排序类别和子类别可以在两个级别排序

> ID：15255811
> 
> 赞同：2
> 
> 时间：2013-03-06T19:05:07.447
> 
> 标签：php, mysql

所以我正在寻找解决以下查询：

```
SELECT * FROM `#__gdwproddise_category` 
      ORDER BY IF(`parent_id`, `parent_id`, `ordering`), 
           `parent_id`, `ordering` asc 
```

所以重要的MYSQL字段是：

```
`multicat_id` = primary key
`parent_id`
`ordering` 
```

父类别`parent_id`为 = 0 其余为 =父类别`multicat_id`

每个唯一的`parent_id`（包括=0，所以父母）在字段中都有唯一的排序集`ordering`。

因此，在 ordering 字段中，您会发现多行的值为 1、2、3 等（每个值在每个内部都是唯一的`parent_id`

```
like parent_id=0 will only have 1 row with ordering set to 1.
and parent_id=1 will only have 1 row with ordering set to 1.
etc. 
```

我想通过以下方式输出它们：

```
parent (ordering=1)
-child (ordering=1)
-child (ordering=2)
parent (ordering=2)
-child (ordering=1)
etc. 
```

以下查询似乎几乎可以工作。然而，父母不是按那里的`ordering`字段排序的。他们似乎是按主键排序的。

```
SELECT * FROM `#__gdwproddise_category` 
     ORDER BY IF(`parent_id`, `parent_id`, `multicat_id`), 
         `parent_id`, `ordering` asc 
```

我在上面发布的第一个查询是我试图解决这个问题的推论，但这不起作用......第一个查询效果更好。至少父母和孩子在第一个中被分组在一起。这第二个联合国将父母与孩子分组。孩子们似乎粘在一起。

我的查询基于以下线程的答案之一中给出的示例： [SQL 嵌套顺序？](https://stackoverflow.com/questions/8864397/sql-nested-order-by)

我发现这篇文章： http: [//mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

当我使用的查询几乎完全符合我的要求时，使用该文章中的“ltg rtg”解决方案似乎很复杂……那篇文章似乎支持无限子类别……我的系统只需要 1 级子类别.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T20:49:54.280

由于您需要知道父级的顺序才能将子行块放置在结果中的正确位置，因此您可能必须使用自联接。

然后，以下查询似乎给出了您想要的顺序：

```
SELECT C.* FROM categories AS C
LEFT JOIN categories AS P
ON P.multicat_id = C.parent_id
ORDER BY IF(P.multicat_ID, P.ordering, C.ordering),
         P.ordering, C.ordering; 
```

可以在[http://www.sqlfiddle.com/#!2/ba095/1/0进行测试](http://www.sqlfiddle.com/#!2/ba095/1/0)

# java - 如何在java中使用线程池并重新加入线程？

> ID：15255815
> 
> 赞同：1
> 
> 时间：2013-03-06T19:05:20.343
> 
> 标签：java, multithreading, threadpool

所以问题是我有一个执行计算密集型任务的对象。

假设主类有两个这样的对象，我将过程并行化如下。

```
Thread t1 = new Thread(new Runnable() {
            @Override
            public void run() {
                    obj1.compute();
            }
        });
Thread t2 = new Thread(new Runnable() {
            @Override
            public void run() {
                    obj2.compute();
            }
        });

        t1.start();
        t2.start();
        t1.join();
        t2.join(); 
```

但是，如果我有任意数量的对象，存储在一个列表中，那么最好的方法是什么？（假设数量为 10）。我正在研究执行程序服务，但不知道如何重新加入线程。ForkJoinPool 应该这样做，但我找不到如何使它工作。

我的首要任务是简单、清晰的代码，而不是性能（因为在计算所需的 10 分钟内看不到任何开销）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T19:08:26.713

您可以简单地尝试调用`get`返回的期货，这将阻塞直到任务完成。例如：

```
ExecutorService executor = Executors.newFixedThreadPool(10);
List<Future> futures = new ArrayList<> ();

for (Runnable r : yourListOfRunnables) {
    futures.add(executor.submit(r));
}

//now do the equivalent of join:

try {
    for (Future f : futures) {
        f.get(); //blocks until the runnable completes
    }
} catch (...) { } 
```

注意：完成后不要忘记`shutdown`执行程序，否则可能会阻止您的应用程序退出。

或者，如果这是一次性的事情，您可以`shutdown`执行 executor 并等待它终止：

```
ExecutorService executor = Executors.newFixedThreadPool(10);

for (Runnable r : yourListOfRunnables) {
    executor.submit(r);
}

executor.shutdown(); //do not accept more tasks
executor.awaitTermination(Long.MAX_VALUE, SECONDS); //waits until all tasks complete

//at this point: all tasks have completed and 
//your executor is terminated: you can't reuse it 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:49:11.860

另一种方式，仍然使用[java.util.concurrent](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)：

```
import java.util.concurrent.CountDownLatch;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

public class ForkJoin {
   static final int THREAD_COUNT = 10;
   public static void main( String[] args ) throws InterruptedException {
      ExecutorService executor = Executors.newFixedThreadPool( THREAD_COUNT );
      final CountDownLatch cdl = new CountDownLatch( THREAD_COUNT );
      for( int i = 0; i < THREAD_COUNT; ++i ) {
         executor.execute( new Runnable(){
            @Override public void run(){
               try {
                  Thread.sleep((long)( 2000.0 + 1000.0*Math.random()));
                  System.err.println( "Done." );
                  cdl.countDown();
               }
               catch( InterruptedException e ) {
                  e.printStackTrace();
               }
            }});
      }
      cdl.await( 1, TimeUnit.DAYS );
      executor.shutdownNow();
      System.err.println( "All done." );
   }
} 
```

输出：

```
Done.
Done.
Done.
Done.
Done.
Done.
Done.
Done.
Done.
Done.
All done. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T19:26:04.933

看看这个教程：[Java Thread Pool Example using Executors and ThreadPoolExecutor和](http://www.javacodegeeks.com/2013/01/java-thread-pool-example-using-executors-and-threadpoolexecutor.html)[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)上的文档。如果您像上面那样创建了许多可运行的任务，然后将它们添加到列表中，您应该能够一次将它们全部提供给您的执行程序，并将它们全部返回到一个集合中：

```
 tasks = new HashSet<Runnable>();
    for (int i = 0; i < 10; i++) {
        Runnable worker = new WorkerThread('' + i);
        tasks.add(worker);
      }

    //start processing and get a list of all the futures
    List<Future> futures = executor.invokeAll(tasks);
    for (Future f: futures) {
       f.get();
    } 
```

列表中的第一个 Future 可能不是第一个完成的 Future，但是获取值的延迟不应该让事情变得太慢。

# c++ - 整数提升 - 步骤是什么

> ID：15255818
> 
> 赞同：8
> 
> 时间：2013-03-06T19:05:26.880
> 
> 标签：c++, c, integer-promotion

此代码打印 B2

```
short a=-5;
unsigned short b=-5u;
if(a==b)
    printf("A1");
else
    printf("B2"); 
```

我阅读了有关整数提升的信息，但我仍然不清楚，它在此处的示例中是如何工作的？有人可以彻底发布编译器在扩大/截断值时遵循的步骤吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T19:15:12.700

让我们来看看你的代码：

```
short a = -5; 
```

a = -5，适合短。到目前为止很容易。

```
unsigned short b = -5u; 
```

-5u 表示将一元运算`-`符应用于常数 5u。5u 是 (unsigned int) 5，并且一元`-`没有提升，所以你最终得到 4294967291，即 2^32-5。（更新：我的原始答案有点错误；在此处查看显示此版本正确的测试脚本[http://codepad.org/hjooaQFW](http://codepad.org/hjooaQFW)）

现在将其放入 b 时，它会被截断为无符号短整数（通常为 2 个字节），因此 b = 65531，即 2^16-5。

```
if( a == b ) 
```

在这一行中，a 和 b 都被提升为整数，以便可以正确进行比较。如果他们被提升为短裤，b 可能会环绕。如果他们被提升为未签名的短裤，a 可能会卷入。

所以这就像说`if( (int) a == (int) b )`。并且 a = -5，所以 (int) a = -5，并且 b = 65531，所以 (int) b = 65531，因为 int 比短裤大。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T19:09:41.463

```
a == b 
```

`a`并且在上面的表达式`b`中都被提升为。`int`

```
unsigned short b=-5u; 
```

在此声明`-5U`中`unsigned short`通过整数转换的方式转换为（C99, 6.3.1.3p2 在此适用）并成为一个大值。

> (C99, 6.3.1.3p2) "否则，如果新类型是无符号的，则在新类型中可以表示的最大值的基础上反复加减一，直到该值在新型。”

`b`值是 then`(unsigned short) ((unsigned int) USHRT_MAX + 1 -5)`即`(unsigned short) 65531`if `USHRT_MAX`is `(unsigned short) 65535`。

所以你有的是：

`(short) -5 == (unsigned short) 65531`

这在两个操作数的整数提升后等效于：

`-5 == 65531`

这相当于`0`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T19:12:31.517

`short`to`unsigned short`是转换（因此具有转换等级）

`short`to`int`是一个提升（因此具有提升等级）

由于排名，促销优先于转化。提升发生在算术和其他操作期间。当仅将一个整数类型存储在另一个整数类型中时，就会发生转换。算术运算可以导致转换和提升，以便将类型强制在一起。再举一个例子：

```
unsigned int u = 2; 
int i = 2; 
u + i; 
```

`i`被转换（未提升）为`unsigned`.

您的值将转换为更大的值，因为它是`unsigned`. 然后，他们被提升为`int`。也正因如此`a != b`。

# javascript - st_twitter_hcount 和 st_fblike_hcount 的正确共享类型（通过 JS 动态规范）

> ID：15255827
> 
> 赞同：0
> 
> 时间：2013-03-06T19:05:58.713
> 
> 标签：javascript, social, sharethis

这是我的测试页面：http: [//ignitepixels.com/test/shareThisTest.html](http://ignitepixels.com/test/shareThisTest.html)

我在使用 Javascript 动态生成 ShareThis 按钮时遇到问题。对于我的大多数按钮，我想使用“chicklet”类型。但我也想包括 twitter 分享 hcount 和 facebook like hcount 按钮。

通常（没有javascript）你会使用类似的东西：

```
<span class='st_twitter'></span>
<span class='st_facebook'></span>
<span class='st_linkedin'></span>
<span class='st_googleplus'></span>
<span class='st_email'></span>
<span class='st_reddit'></span>
<span class='st_twitter_hcount'></span>
<span class='st_fblike_hcount'></span> 
```

但我正在尝试使用以下方法动态生成这些按钮：

```
stWidget.addEntry({
"service" : shareService,
"element" : document.getElementById(shareElemendID),
"url" : shareURL,
"title" : shareTitle,
"type" : shareType,
"onhover" : false
}); 
```

（注意：我的 shareType var 是使用 javascript 动态生成的。您可以通过查看测试页面的源代码来查看 javascript。）

我可以将`"chicklet"`其用作硬值，`"type"`但这不会正确呈现 hcount 按钮。所以我有一点js来决定是使用“chicklet”还是“hcount”，但即使是hcount也有有趣的结果。（请参阅标题“动态 ShareThis 按钮”下的[http://ignitepixels.com/test/shareThisTest.html ）。](http://ignitepixels.com/test/shareThisTest.html)

任何人都知道我在我的 javascript 中使用的 hcount 按钮应该使用什么类型？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:00:30.967

对于未来的用户，这是我从 ShareThis 支持代理 ( [http://support.sharethis.com/customer/portal/questions/862200-proper-share-type-for-st-twitter-hcount-and-st -fblike-hcount-dynamic-specification-through-js-#sthash.F82qZiuZ.dpbs](http://support.sharethis.com/customer/portal/questions/862200-proper-share-type-for-st-twitter-hcount-and-st-fblike-hcount-dynamic-specification-through-js-#sthash.F82qZiuZ.dpbs)）：

由于您使用了不正确的“服务”名称，您会收到格式错误的按钮。您不能使用这样的服务名称 - “st_twitter_hcount”

请使用服务名称 - "twitter","facebook"，然后您可以在 "type" 中将按钮类型指定为 "hcount" 或 "vcount"。

下面是一个示例，说明如何使用您已实现的代码来实现这一点。

```
shareServices : ['twitter', 'facebook', 'linkedin', 'googleplus', 'email', 'reddit', 'st_twitter', 'st_fblike','st_wordpress','st_linkedin']

shareType = ( shareService.match(/^st_/) ) ? 'hcount' : 'chicklet' ;
if( shareService.match(/^st_/) )
{
    shareService=shareService.substring(3);
}; 
```

# javascript - JS：图像未显示

> ID：15255829
> 
> 赞同：0
> 
> 时间：2013-03-06T19:06:00.737
> 
> 标签：javascript, image

我想在超时期间显示一个简单的 ajax 加载动画。图像按应有的方式隐藏`window.load`，但是当我单击图像并使用 时`onclick= call`，图像未显示。

这是我的`showImage()`方法

```
 function showImage(){
        document.getElementById('loadingImage').style.display="normal";
} 
```

这是我的 div

```
<div id='welcome' style="display:none">
 Click to continue.<br /><br /><!--Viral Text-->
 <img src="like1.png" width="100" height="44" onclick="likeToUnlock(); showImage();" onmouseover="" style="cursor: pointer;"/>
 <p>&nbsp;</p>
 <img id="loadingImage" src="ajax.gif" style="display:none"/>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-05-05T23:31:50.830

也许 img 上的 style="display:none" 属性是问题所在......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:08:08.957

没有`display:normal`你想要`display:inline-block`的，因为 inline-block 是 a 的默认显示属性`img`。

```
document.getElementById('loadingImage').style.display="inline-block"; 
```

此外，您的整个`div`包含图像的内容也不会显示，因此要显示图像，还必须显示其祖先元素。

# android - android音频环回？

> ID：15255832
> 
> 赞同：3
> 
> 时间：2013-03-06T19:06:03.260
> 
> 标签：android, audio

我正在针对一个库进行编译，该库创建一个 AudioRecord 对象，该对象捕获我的平板电脑的麦克风输入。

我没有能力修改预编译库，但我想给它一些预先录制的音频。

有没有办法在android中创建某种环回来完成这个？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T10:36:44.027

Android（在撰写本文时）不支持此功能。作为应用程序开发人员，您不能将麦克风路径替换为其他音频源。

有些平台确实支持这种功能。例如，我在高通的 APQ8064 平台上通过将其中一个DAI 连接`MultiMedia`到`AFE_PCM_RX`混音器，将`AFE_PCM_TX`DAI 连接到`MultiMedia`混音器，然后从`AFE_PCM_TX`设备中读取，完成了音频的环回。但这显然是非常特定于平台的，它需要您拥有一个根设备（并且可能访问设备的完整源代码，以便您可以制作自定义 ROM），并且对相关平台有很好的了解。
TL；DR：尝试这样做通常不值得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-19T10:18:44.687

是的，chrome 音频团队开发了一种优雅的工具，称为 Rick O'Rang 环回电缆。它在循环方面做得很好。它将通过音频输出通道输出音频输入，然后通过麦克风将其反馈回来。

硬件可以在这里找到--> [https://source.android.com/devices/audio/images/loopback_circuit.png](https://source.android.com/devices/audio/images/loopback_circuit.png)

它附带一个应用程序，可以在 Playstore 中找到，用于对延迟和其他音频参数进行广泛分析。但是由于您所需要的只是播放并录制它，您只需组装它，将其插入音频插孔并播放它就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-20T06:36:18.410

您可以找到有关用于 android CTS 验证程序音频测试的音频环回加密狗的所有详细信息 @ [https://source.android.com/devices/audio/loopback](https://source.android.com/devices/audio/loopback)

# git - Windows 上的 Git 涂抹过滤器以创建本地配置文件

> ID：15255835
> 
> 赞同：2
> 
> 时间：2013-03-06T19:06:14.180
> 
> 标签：git, configuration

我正在尝试使用 Git 的涂抹/清洁过滤器来创建一个可能因环境而异的文件。

在我的仓库中，我有以下文件：

```
/root/scripts/data.config.local
/root/scripts/data.config.staging
/root/scripts/data.config.production 
```

当开发人员机器上发生结帐时，我希望将 data.config.local 文件作为“data.config”复制到 /root/scripts 目录。

我的全局 .gitconfig 具有以下过滤器定义：

```
[filter "copyEnv"]
  clean = "rm -f c:\\code4x\\git\\rgpstage\\scripts\\gg_data.config"
  smudge = "cp c:\\code4x\\git\\rgpstage\\scripts\\gg_data.config.local c:\\code4x\\git\\rgpstage\\scripts\\gg_data.config" 
```

我在这些过滤器上尝试了许多变体，包括将脚本移动到单独的脚本文件中。我用于涂抹的单独脚本文件如下所示：

```
#! /usr/bin/bash
cp "C:\Code4X\GIT\rgpstage\scripts\gg_data.config.local" "C:\Code4X\GIT\rgpstage\scripts\gg_data.config" 
```

无论我对过滤器操作使用哪种方法（内联或文件），我都会得到以下输出：

```
error: cannot feed the input to external filter c:\removeGGData
error: external filter c:\removeGGData failed
cp: cannot stat `C:\\Code4X\\GIT\\rgpstage\\scripts\\gg_data.config.local': No such file or directory
error: cannot feed the input to external filter c:\copyGGData
error: external filter c:\copyGGData failed 1
error: external filter c:\copyGGData failed 
```

我使用 Git 1.8 在 Windows 7 上运行它。该文件确实存在并根据权限打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T07:14:45.747

您似乎对涂抹和清洁过滤器有误解（顺便说一句 - 您的 .gitattributes 是什么样的？）。您正在做的是严重滥用该功能。这些过滤器旨在过滤文件，在 STDIN 上传递给它们，并在 STDOUT 上返回过滤后的版本。这些过滤器绝对不应该有任何副作用。

因此，为了在不同的机器上实现不同的配置，我建议将它们全部放在同一个文件中，并用一个 if 语句包围它们，该语句使用来自污迹过滤器的信息。有关详细信息，请参阅我的回答：[https ://stackoverflow.com/a/13616911/758345](https://stackoverflow.com/a/13616911/758345)

# c++ - 模板化 typedef 中“类型”之前的预期 init-declarator

> ID：15255837
> 
> 赞同：1
> 
> 时间：2013-03-06T19:06:16.120
> 
> 标签：c++, templates, typedef

我正在尝试编译下面的代码。

```
template <class T1, class T2>
class class1
{
typedef T1 Type1;
typedef T2 Type2;
//void class1Method();
};

template <class T1>
class class2
{
typedef T1 Type1;
void class2Method();
};

template <class T1>
void class2<T1>::class2Method()
{
 typedef class1<T1,T1>::Type1 Type3;
} 
```

但是，我收到如下所示的错误。

```
g++ -g -c class12.h -o class12.o
class12.h: In member function `void class2<T1>::class2Method()':
class12.h:20: error: expected init-declarator before "Type3"
class12.h:20: error: expected `,' or `;' before "Type3"
make: *** [class12.o] Error 1 
```

我究竟做错了什么？

有人可以告诉我吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T19:08:19.880

你需要一个`typename`

```
typedef typename class1<T1,T1>::Type1 Type3; 
```

此外，您需要`class1`公开 typedef。

```
template <class T1, class T2>
class class1
{
 public:
  typedef T1 Type1;
  typedef T2 Type2;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:08:55.963

尝试使用`typename`：

```
typedef typename class1<T1,T1>::Type1 Type3; 
```

# ruby-on-rails - NoMethodError 和 rails 中的失败/错误

> ID：15255839
> 
> 赞同：1
> 
> 时间：2013-03-06T19:06:38.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

以下是我从控制器中搜索的方法

```
@accounts = []
    client = GameAccounts::GameAccountsClient.new

    if params[:name]

      # Try and find a game account by id using the given name
      response = client.get_accounts_by_name(params[:name])

      if response.is_a?(Net::HTTPSuccess)
        account = client.parse_json(response)
        unless account.empty?
          session[:account] = account
          redirect_to game_account_path(params[:name])
        end
      end

      json = client.get_json(params[:limit],params[:offset],params[:name])

      @presenter = GameAccountsPresenter.new(json)

    end
  end 
```

我正在尝试运行以下测试：

```
require 'spec_helper'

describe GameAccountsController do
  describe 'GET search' do
    it 'finds a named system account directly' do
     get(:search, name: 'test').to be_redirect_to(game_account_path('test'))
    end
  end
end 
```

我不断得到一个

```
GameAccountsController GET search finds a named system account directly
     Failure/Error: get(:search, name: 'test').to be_redirect_to(game_account_path('test'))
     NoMethodError:
       undefined method `to' for #<ActionController::TestResponse:0x007f8b0beb3e10>
     # ./spec/controllers/game_accounts_controller_spec.rb:6:in `block (3 levels) in <top (required)>' 
```

谁能让我知道我做错了什么？..尝试做.should redirect_to，但我仍然得到同样的错误，但使用方法'should'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:15:05.770

从这个文档看，你的代码应该更像这样：

```
it 'finds a named system account directly' do
  get(:search, name: 'test')
  expect(response).to be_redirect_to(game_account_path('test'))
end 
```

来源： [https ://github.com/rspec/rspec-rails#controller-specs](https://github.com/rspec/rspec-rails#controller-specs)

# jpa - 存储关系及其主键的 JPA 最佳实践是什么？

> ID：15255841
> 
> 赞同：2
> 
> 时间：2013-03-06T19:06:41.740
> 
> 标签：jpa

这个问题的长期设置；请多多包涵。

在 JPA 中，您可以使用（例如）带`@ManyToOne`注释的关系来存储对另一个实体的引用：

```
// In Wheel.java
@ManyToOne(optional = false)
@JoinColumn(name = "car_id", nullable = false)
private Car car; 
```

在幕后，这通常由`JOIN`. 如果您查看`Wheel`映射到的表，您会发现一列可能命名为`carId`or `car_id`，并且该列将是“指向”的外键，例如`car`表的主键。初级的东西。

有时（例如，当通过网络序列化根实体时），您只需要密钥本身：

```
// In Wheel.java
@Column(name = "car_id", nullable = false)
private int carId; 
```

这也很好。

通常你看不到这两个。

当您*确实*看到这两个时，其中一个是使用 by-convention-because-the-spec-has-a-hole-in-it 修饰符`insertable = false`和标记的`updatable = false`：

```
// In Wheel.java
@ManyToOne
@JoinColumn(name = "car_id", insertable = false, updatable = false, nullable = false)
private Car car;

@Column(name = "car_id", nullable = false)
private int carId; 
```

完成此操作后，您现在必须确保删除关系上的*任何setter 方法：*

```
// In Wheel.java
public Car getCar() {
  return this.car;
}

// No longer appropriate now that the relationship is read-only
// public void setCar(final Car car) {
//   this.car = car;
// } 
```

但是，您必须确保`carId`可以设置变量，并且当它被更改时，您必须确保`Car`引用已被`null`淘汰，因为它将不再引用 right `Car`：

```
// In Wheel.java
public int getCarId() {
  return this.carId;
}

public void setCarId(final int newId) {
  final int old = this.getCarId();
  this.carId = newId;
  if (old != newId) {
    this.car = null;
  }
} 
```

现在的问题是：

*真的*吗？这是始终存在给定关系的主键以及将关系本身“膨胀”到其目标的可能性的最佳或唯一方法吗？

# assembly - IDA Pro 6.1 中的装配错误

> ID：15255842
> 
> 赞同：2
> 
> 时间：2013-03-06T19:06:47.270
> 
> 标签：assembly, x86, reverse-engineering, disassembly, ida

我需要修改一个DLL。我需要打补丁

```
cmp     byte_1075A02C, 0 
```

至

```
mov     byte_1075A02C, 1 
```

我尝试在 IDA Pro 中使用 Patch->Assemble 命令，但出现“无效操作数”消息。

有人知道为什么会有这个消息吗？

`cmp byte_1075A02C, 0` 等于：`80 3D 2C A0 75 10 00` 但什么是 `mov byte_1075A02C, 1`等价的？

坦克很多为您的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:24:26.217

那应该是

```
C6 05 2C A0 75 10 01 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:58:54.697

要获得快速的通用解决方案，您始终可以尝试使用在线汇编程序[，例如这个](https://defuse.ca/online-x86-assembler.htm)。该指令的语法是`mov byte ptr [0x1075A02C], 1`. 试试看！

不同的 x86 汇编器使用的语法略有不同，因此我建议您熟悉其中一种并坚持使用。

# haskell - 不能破坏传递类型

> ID：15255850
> 
> 赞同：4
> 
> 时间：2013-03-06T19:07:00.060
> 
> 标签：haskell, gadt

假设我有以下 GADT：

```
data Stage a b where
    Comb :: Stage a b -> Stage b c -> Stage a c
    FMap :: (a -> b) -> Stage a b 
```

我现在想要一个像这样工作的函数：

```
run (a `Comb` b) = (a,b)
run (FMap f)     = (FMap f,FMap id) 
```

我将如何构建这样的功能？

我尝试了不同的绑定类型的方法，但没有成功。是否有我缺少的扩展可以实现更广泛的类型绑定？

这是错误消息：

```
Couldn't match type `t' with `(Stage t1 b, Stage b t2)'
  `t' is a rigid type variable bound by
      the inferred type of run :: Stage t1 t2 -> t at <interactive>:11:5
In the expression: (a, b)
In an equation for `run': run (a Comb b) = (a, b) 
```

我想要完成的描述：我想设计一个 DSL 和一个函数运行，它可以尝试以几种不同的方式运行 DSL 的一些代码（每种方式我有多个不同的运行函数）。run 函数将尝试运行尽可能多的代码，然后报告它不能运行的代码以及它可以运行的代码的结果是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T19:44:59.593

您将需要 的类型签名`run`，因为您在 GADT 上进行模式匹配。GADT 上的模式匹配需要类型细化，并且通常仅在存在类型签名时才有效。

但目前还不清楚类型签名是什么。如果输入值为

```
a `Comb` b :: Stage x y 
```

然后你回来`(a, b)`，在哪里

```
a :: Stage x b
b :: Stage b y 
```

对于一些不为人知的`b`。这是一种存在类型的逃避。你不能写

```
run :: Stage x y -> (State x b, Stage b y) 
```

因为这意味着它必须适用*于所有人* `b`，但它只适用*于某些*（未知）`b`。

不幸的是，尚不清楚为什么要编写类似`run`. 为什么要生产一双？以后你想用这对做什么？构造`Comb`函数被定义为结合两个具有未知中间类型的阶段，所以这个版本的`run`可以工作：

```
run :: Stage a b -> Stage a b
run (a `Comb` b) = a `Comb` b
run (FMap f)     = FMap f `Comb` FMap id 
```

或者您可以定义一个更具体的数据类型，只允许具有未知中间类型的两个阶段的“对”：

```
data PairStages a b where
  PairStages :: Stage a b -> Stage b c -> PairStages a c 
```

接着：

```
run :: Stage a b -> PairStages a b
run (a `Comb` b) = PairStages a b
run (FMap f)     = PairStages (FMap f) (FMap id) 
```

但是我仍然觉得`run`返回一对很奇怪。正如我所说，目前还不清楚你想对`run`. `run`有一个递归函数似乎更有用，它实际上以某种方式结合了在`Comb`案例中运行组件的结果。例如，像这样：

```
run :: Stage a b -> (a -> b)
run (a `Comb` b) = run b . run a
run (FMap f)     = f 
```

# java - 构造一个对象，然后在 Spring 中自动装配

> ID：15255854
> 
> 赞同：1
> 
> 时间：2013-03-06T19:07:13.107
> 
> 标签：java, spring

我有一个 servlet，它获取一些参数，并从这些参数中构造另一个对象（responseObject）。这个响应对象在其他地方的很多类中被访问，所以它需要在这些类中自动装配。

其他类可以将内容添加到 responseObject（本质上是修改对象）。

因此，总结所需的功能是：

*   每个新的 servlet 请求都有一个新的 responseObject
*   此 responseObject 将首先在 servlet 内部构造，并且必须可以在其他类中访问
*   访问此对象的其他类必须能够在此对象中添加/更改内容，这将保持一致。

我想知道这样的事情在春天是否可能。

我尝试了原型和请求范围，但遇到了错误。主要问题是对象需要被其他类修改，并且需要在请求仍在处理时进行这些更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:13:32.360

这不是自动装配的用途。您要做的只是将响应对象传递给需要它的类/方法。

一句忠告：最好不要让请求和响应对象在你的代码库中过多地游荡。您希望尽可能将它们的使用限制在实际需要它们的地方（即 servlet）。servlet 可能需要来自多个地方的一些数据来产生响应。没关系。获取数据并产生响应。将数据传递到响应所在的位置比将响应传递到数据所在的位置要好。请求对象也是如此，但反过来。基本原则是通常最好将输入与输出分离。

# html - 自动设置 iframe 高度

> ID：15255858
> 
> 赞同：18
> 
> 时间：2013-03-06T19:07:25.633
> 
> 标签：html

我需要在框架内嵌入一个 HTML 页面，并使用以下代码：

```
<iframe src="http://www.google.com" style="width: 90%; height: 300px"
    scrolling="no" marginwidth="0" marginheight="0" frameborder="0"
    vspace="0" hspace="0"> 
```

我正在尝试将高度设置为自动，以便框架自动调整到页面长度，而不必像我在这里所做的那样对高度进行硬编码。我试过了`height:auto`，`height:inherit`但没有用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-11-12T12:10:48.057

试试这个编码

```
<div>
    <iframe id='iframe2' src="Mypage.aspx" frameborder="0" style="overflow: hidden; height: 100%;
        width: 100%; position: absolute;"></iframe>
</div> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-11-08T16:21:58.147

Solomon 关于引导程序的回答启发我添加引导程序解决方案使用的 CSS，这对我来说非常有效。

```
.iframe-embed {
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    height: 100%;
    width: 100%;
    border: 0;
}
.iframe-embed-wrapper {
    position: relative;
    display: block;
    height: 0;
    padding: 0;
    overflow: hidden;
}
.iframe-embed-responsive-16by9 {
    padding-bottom: 56.25%;
}
<div class="iframe-embed-wrapper iframe-embed-responsive-16by9">
    <iframe class="iframe-embed" src="vid.mp4"></iframe>
</div> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-07T22:10:32.990

如果您是像 Bootstrap 这样的框架，您可以使用以下代码段使任何 iframe 视频响应：

```
<div class="embed-responsive embed-responsive-16by9">
    <iframe class="embed-responsive-item" src="vid.mp4" allowfullscreen></iframe>
</div> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T21:47:08.363

如果站点位于不同的域中，由于跨浏览器域的限制，调用页面无法访问 iframe 的高度。如果您可以访问这两个站点，则可以使用[文档域 hack](http://adam.kahtava.com/journal/2010/03/18/the-same-origin-policy-jsonp-vs-the-documentdomain-property/)。那么 anroesti 的链接应该会有所帮助。

# c++ - 2013 年学习 DirectX

> ID：15255859
> 
> 赞同：11
> 
> 时间：2013-03-06T19:07:25.943
> 
> 标签：c++, windows, direct3d, directx-11, directx-9

我知道关于这个问题有几个主题，但我想具体说明我在寻找什么。

所以我学习了 OpenGL 并获得了着色器（可编程管道）、顶点缓冲区、索引缓冲区的基础知识，所有这些都被称为“现代 OpenGL”。

如果 DirectX 存在这样的术语，我很感兴趣。

关于选择哪个 DirectX 版本有多种意见。9 确实可以在几乎所有 Windows PC 上运行，而 11 仅限于较新的 GPU 和 Windows Vista+。

我的 GPU 支持 9，而我的操作系统支持 11。我应该选择软件加速 11 还是硬件加速 9？

DirectX9 是否类似于已弃用的 OpenGL？那么如果我学习 DirectX9 而不是 11，是浪费时间还是有用？换句话说。DirectX9 是否提供现代 OpenGL 提供的功能？

如果是这样，我应该使用哪些资源（教程/书籍/视频）来获得在 DirectX 中使用着色器、缓冲区等的基本技能？例如，在一个教程中，我发现了这一行：d3dDevice->BeginScene(); 它让我想起了已弃用的 OpenGL。我不想学习尖端的 DirectX，但我想在兼容性和现代概念之间进行良好的交易。

在另一个线程中，我发现了这本书： [http ://www.amazon.com/dp/1598220160/?tag=stackoverfl08-20](https://rads.stackoverflow.com/amzn/click/com/1598220160)

但是如果我把时间浪费在过时的旧东西上，我会有点害怕。

总而言之，我需要一些帮助，我真的无法想象该走哪条路。

我希望你能得到我的分数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T19:18:22.320

我建议您下载[DirectX SDK June 2010](http://www.microsoft.com/en-ca/download/details.aspx?id=6812)。

DirectX 允许您在创建设备时选择要使用的 DirectX 版本，因此不必担心。

这是在[D3D_FEATURE_LEVEL](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476083%28v=vs.85%29.aspx)的[D3D11CreateDeviceAndSwapChain](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476329%28v=vs.85%29.aspx)中完成的。

> 指向 D3D_FEATURE_LEVEL 数组的指针，它确定要尝试创建的功能级别的顺序。

我建议您下载 2010 年 6 月的 DirectX SDK 并查看它附带的一些示例。你应该决定如何前进。

对于书籍，我推荐使用 DirectX 11或[DirectX 10](http://www.amazon.ca/Introduction-Game-Programming-With-Directx/dp/1598220535)或[Directx 9](https://rads.stackoverflow.com/amzn/click/com/1556229135)[进行 3D 游戏编程简介](http://www.amazon.ca/Introduction-3D-Game-Programming-DirectX/dp/1936420228)。您决定使用哪个版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T19:31:11.223

我不会尝试使用没有硬件支持的 CPU 来编写 DirectX 11。这将是一次愉快的经历。相反，我要么购买新的显卡（不必非常昂贵），要么购买 DirectX 9 中的代码。

DirectX 9 编码的背面是它与 10/11 非常不同。所以，如果你有一天想学习 10/11，除了真正的基础知识之外，学习 9 真的对你没有多大帮助。

# iphone - 从 iOS 到 facebook 发布到墙上显示空白图像

> ID：15255860
> 
> 赞同：0
> 
> 时间：2013-03-06T19:07:35.727
> 
> 标签：iphone, objective-c, facebook

我正在尝试使用以下代码发布带有来自 iOS 应用程序的图像的墙消息：

```
- (void) putOnFacebookWall:(UIImage *) screenShot{

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    NSString *filePath = [NSTemporaryDirectory() stringByAppendingPathComponent:@"temp.png"];

    [UIImagePNGRepresentation(screenShot) writeToFile:filePath options:NSAtomicWrite error:nil];

    NSData *imageData = UIImagePNGRepresentation([UIImage imageNamed:@"ironman.jpg"]);

    NSURL *url = [NSURL URLWithString:@"https://graph.facebook.com/me/feed"];
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];

    //
    [request setPostValue:imageData forKey:@"picture"];

    [request setPostValue:@"http://apps.facebook.com/mobie-hair-wizz" forKey:@"link"];

    [request setPostValue:@"test" forKey:@"message"];

    [request setPostValue:[defaults objectForKey:@"FBAccessTokenKey"] forKey:@"access_token"];
    [request setDidFinishSelector:@selector(sendToPhotosFinished:)];

    [request setDelegate:self];
    [request startAsynchronous];

} 
```

我得到的是：

[https://www.dropbox.com/s/z5nzm271zkadq4j/wall.png?m](https://www.dropbox.com/s/z5nzm271zkadq4j/wall.png?m)

图片不显示是什么原因？

我也在FB的iOS代码中得到了肯定的回应，说上传成功。

# jquery - 滚动页面时颜色选择器不起作用

> ID：15255861
> 
> 赞同：0
> 
> 时间：2013-03-06T19:07:37.330
> 
> 标签：jquery, css

我在这里完全不知所措。我正在使用 Farbastic 颜色选择器，它适用于除一个之外的所有元素。我已将页面剥离为仅不起作用的页面。它在除 Firefox 之外的所有浏览器中都能正常工作！当您单击页面时，会出现一个对话框并选择“更改背景颜色”。然后颜色选择器打开。如果您一直滚动到页面顶部，它可以正常工作。如果您向下滚动几英寸（颜色选择器仍处于打开状态），颜色选择器将停止工作。可以输入值的滑块和输入将始终有效，但由于某种原因色轮不起作用。

我已经检查了每个元素，认为这是一个 z-index 问题，但一无所获。

测试页面的 url 是[https://www.annearundelproperties.net/listing_flyers/create_flyer_test.php](https://www.annearundelproperties.net/listing_flyers/create_flyer_test.php)。我会发布代码，但您可以查看链接上的源代码以获得更好的想法。

任何帮助或想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:39:45.723

问题是 doc 位置和视口位置之间的 firefox 存在歧义 - 它在应该使用视口时使用 doc 位置，因此当您滚动时点击区域会移动。如果您只滚动 50 像素，您仍然可以将其击中偏离中心。

一个快速的谷歌找到[了一个修复](http://code.google.com/p/farbtastic/issues/detail?id=3)- 让我知道它是否适合你。

# haskell - .lhs 带有崇高的文字 2

> ID：15255863
> 
> 赞同：0
> 
> 时间：2013-03-06T19:07:44.263
> 
> 标签：haskell, sublimetext2

用于 (.lhs) 读写 Haskell 文件的 sublime 文本的内置语言什么也不做。堆栈溢出已经存在一个问题，但我无法让它工作。有谁我应该添加到语言文件中以将没有“>”的代码行视为注释，而其他所有内容都将其视为普通的 Haskell 文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:37:59.707

在 SublimeText2 中，进入 menu `Preferences`> `Browse Packages...`，然后导航到`Haskell`文件夹。为了能够使用 Sublime 的自动构建系统进行构建，在这个文件夹中你应该有一个名为`Literate Haskell.sublime-build`.

您可以从复制`Haskell.sublime-build`已经存在并重命名它开始。现在您必须更新命令。

现在，因为[Haskell 的 Wiki](http://www.haskell.org/haskellwiki/Literate_programming)建议`ghc -optL -q`编译 Literate Haskell，sublime-build 文件将变为：

```
{
    "cmd": ["ghc", "-optL -q", "$file"],
    "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
    "selector": "source.haskell"
} 
```

PS - 您可能需要重新启动 SublimeText
PS - 我没有测试它。

# exception - 无法修复“'/'应用程序中的服务器错误”ServiceStack

> ID：15255864
> 
> 赞同：1
> 
> 时间：2013-03-06T19:07:47.707
> 
> 标签：exception, servicestack

我很难解决这个问题。我仍在向 ServiceStack 介绍自己，并且在尝试将 MySql 数据库添加到我的 Web 应用程序时（这可能与错误完全无关），我遇到了一个错误，使我的应用程序无法运行。我已经撤消了很多步骤，但无法恢复到正常工作的状态。任何帮助将不胜感激。

错误：

```
Method 'get_IsLocal' in type 
ServiceStack.WebHost.Endpoints.Extensions.HttpRequestWrapper' from assembly 
'ServiceStack, Version=3.9.37.0, Culture=neutral, 
PublicKeyToken=null' does not have an implementation. 
```

源错误：

```
An unhandled exception was generated during the execution of the current 
web request. Information regarding the origin and location of the exception 
can be identified using the exception stack trace below. 
```

堆栈跟踪：

```
[TypeLoadException: Method 'get_IsLocal' in type
 'ServiceStack.WebHost.Endpoints.Extensions.HttpRequestWrapper' from assembly
 'ServiceStack, Version=3.9.37.0, Culture=neutral, PublicKeyToken=null' does 
not have an implementation.]
ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory.GetHandler
(HttpContext context, String requestType, String url, String pathTranslated) +0
System.Web.MaterializeHandlerExecutionStep.System.Web.HttpApplication.
IExecutionStep.Execute() +346
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&
completedSynchronously) +155 
```

我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.SessionState;
using ServiceStack.Configuration;
using ServiceStack.OrmLite;
using ServiceStack.OrmLite.MySql;
using ServiceStack.ServiceInterface;
using ServiceStack.ServiceInterface.Auth;
using ServiceStack.ServiceInterface.Validation;
using ServiceStack.FluentValidation;
using ServiceStack.ServiceInterface.ServiceModel;
using ServiceStack.WebHost.Endpoints;
using ServiceStack.ServiceHost;
using ServiceStack.Common.Utils;
using ServiceStack.DataAnnotations;
using ServiceStack.Common;

namespace SampleHello2
{
    public class CustomCredentialsAuthProvider : CredentialsAuthProvider
    {
        public override bool TryAuthenticate(IServiceBase authService, string userName, string password)
        {
            //Add here your custom auth logic (database calls etc)
            return (userName == "Ian" && password == "pass");
        }

        public override void OnAuthenticated(IServiceBase authService, IAuthSession session, IOAuthTokens tokens, Dictionary<string, string> authInfo)
        {
            //Fill the IAuthSession with data which you want to retrieve in the app eg:
            session.FirstName = "Ian Mc Garry";
            //...

            //Important: You need to save the session!
            authService.SaveSession(session, SessionExpiry);
        }
    }

    public class Global : System.Web.HttpApplication
    {
        public class HelloAppHost : AppHostBase
        {
            //Tell Service Stack the name of your application and where to find your web services
            public HelloAppHost() : base("Hello Web Services", typeof(HelloService).Assembly) { }

            public override void Configure(Funq.Container container)
            {
                //Enable Features
                Plugins.Add(new ValidationFeature());
                Plugins.Add(new AuthFeature(() => new AuthUserSession(),
                    new IAuthProvider[] {
                        new CustomCredentialsAuthProvider(), //HTML Form post of UserName/Password credentials
                    }
                ));

                //register any dependencies your services use, e.g:
                container.RegisterValidators(typeof(HelloValidator).Assembly);

                //Database
                //string conn = "Server=host;Port=3306;Database=db;UserId=user;Password=pass;";
                //container.Register<IDbConnectionFactory>(new OrmLiteConnectionFactory(conn, MySqlDialectProvider.Instance));
            }
        }

        //Initialize your application singleton
        protected void Application_Start(object sender, EventArgs e)
        {
            new HelloAppHost().Init();
        }
    }

} 
```

再次任何帮助将不胜感激。问题可能很清楚，但我无法解决。我自己也没有足够的经验来理解这个问题（错误/堆栈跟踪）。我看到它指的是`ServiceStack.WebHost.Endpoints;`我正在使用的包，但这是我所能得到的。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T19:38:38.573

听起来您的 .dll 很脏。确保更新所有 NuGet 包，如果问题仍然存在，请清理 NuGet`/packages`文件夹并重试。

[注意MySql OrmLite](https://nuget.org/packages/ServiceStack.OrmLite.MySql)包的最新版本（截至 2013 年 3 月 6 日）是 v3.9.39。

# opengl-es - 将每个像素乘以其 alpha 打开 GLES 1.1（预乘）然后反转

> ID：15255865
> 
> 赞同：1
> 
> 时间：2013-03-06T19:07:50.953
> 
> 标签：opengl-es, pixel-shader, opengl-es-1.1, premultiplied-alpha

我正在从事 GLES 1.1 中的项目。它必须是 GLES 1.1。

但它必须做一些预乘，即获取每个像素，并将其从 rgba = r*a,b*a,g*a,a 更改。然后稍后将其反转。

如果我可以访问着色器，那将没问题，但当然是 gles 1.1 我没有。

通过 readpixels 执行它，然后在 CPU 上执行它并将其放回非常慢，所以我试图想办法可以作弊。

现在我可以做预乘的一种方法是利用 glTexEnvi

```
glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_COMBINE);

glTexEnvi(GL_TEXTURE_ENV, GL_COMBINE_RGB, GL_MODULATE);

glTexEnvi(GL_TEXTURE_ENV, GL_SRC0_RGB, GL_TEXTURE0);
glTexEnvi(GL_TEXTURE_ENV, GL_OPERAND0_RGB, GL_SRC_COLOR);

glTexEnvi(GL_TEXTURE_ENV, GL_SRC1_RGB, GL_TEXTURE1);
glTexEnvi(GL_TEXTURE_ENV, GL_OPERAND1_RGB, GL_SRC_ALPHA); 
```

但之后，我需要扭转操作。对于我的生活，我想不出办法来扭转它。

如果一切都具有相同的 alpha，我可以滥用 glLighting 功能，但遗憾的是它们没有。

我觉得我有点注定要失败。

也许我可以只使用共享上下文并做一个 GLES 2.0 的片段......但我觉得这会带来它自己的开销

如果有人对此有任何想法或想法，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-13T21:06:38.230

我自己或在这里找不到答案。已经有一段时间了，所以任何人都想知道......

最后，我设法说服“当权者”让我将项目转换为 GLES 2.0。这个过程实际上并不是很痛苦（幸运的是），而且非常值得。

上述操作与其他一些操作成功卸载到 GPU，性能从 1fps 提高到 60+...非常值得:)。

还值得注意的是，如果重新编写不是一种选择，我的混合方法将非常值得

# opengl - GPGPU 功能

> ID：15255868
> 
> 赞同：0
> 
> 时间：2013-03-06T19:08:01.343
> 
> 标签：opengl, gpgpu

GPGPU 是一整套在 GPU 上执行不同进程的独立平台，还是使用 OpenGL 库来实现相同的事情？换句话说，GPGPU 是否有自己的一套库，并且依赖于硬件？或者只要硬件支持OpenGL，它就可以在任何硬件上运行？我想我不确定 GPGPU 与 OpenGL 有何不同？我知道 OpenGL 的一个副产品是做一些大量的并行计算，所以你真的不必只使用它的图形功能。但是GPGPU怎么样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:23:55.240

OpenCL GPGPU 独立于硬件（而是介于 Nvidia 和 AMD 之间）。CUDA 是一种仅适用于 Nvidia 的 GPGPU 语言。

GPGPU 与 OpenGL 的不同之处在于，它可以执行 OpenGL API 范围之外的任意操作。想通过并行过程进行稀疏矩阵乘法吗？使用 OpenCL 或 CUDA，OpenGL 不会提供构建此功能的能力（或者如果可以，它会更加困难）。

GPGPU 独立于 OpenGL 和 DirecX。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T19:40:53.767

GPGU 是一个概念，指的是使用 GPU 进行任意计算的能力，而不仅仅是绘图。

如今，有两种机制来做 GPGPU。最简单的方法是使用为 GPGPU 设计的 API。OpenCL 是跨平台的方法。CUDA 是为那些愿意将自己限制在 NVIDIA 生态系统中的人而存在的。这些 API 定义了 C/C++ API 和特殊语言，用于在 GPU 上执行代码，以及与 GPU 内存接口（发送要处理的数据和读回结果）。

另一种方法是使用常规渲染 API 简单地绘制“图片”并读取结果。要使用它，您必须格式化输入和输出数据，使其与渲染系统想要执行的操作相匹配。

通常避免使用后一种方法，但有两个例外。一，如果有问题的硬件不能支持 OpenCL/CUDA/等，你显然别无选择，只能使用渲染 API。或者两个，如果 GPGPU 操作用于*提供*渲染操作。像平截头体剔除实例、粒子系统计算等一样思考。如果您正在做的只是以后的渲染操作直接使用，那么最好使用渲染 API 本身。OpenCL/CUDA 和渲染 API（如 OpenGL）之间的互操作可能会带来性能损失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T19:24:03.040

虽然你可以使用直接的 OpenGL 来做一些 GPGPU 的事情（通过编写自定义着色器和使用纹理来传递数据），但通常更常见的是使用专门的库来做 GPGPU，比如 nVidia 的 CUDA。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T19:28:45.807

OpenGL 是用于使用 3d 加速硬件的跨平台标准 API。如果您愿意，可以使用“与图形卡对话的通用语言”。

因此，GPGPU 不是标准。**它有点笼统，指的是在GPU上执行****通用**计算的一系列技术（因此得名 GPGPU）。

 **在石器时代（在 CUDA/OpenCL 之前），你必须跳过障碍来做简单的事情，即使是稍微复杂的事情也最好留给 GPU 专家。例如：您可以通过将它们存储在纹理中来添加两个数组，然后进行多重纹理处理（使用 OpenGL 设置来执行纹理的添加），然后从屏幕对齐的四边形读取渲染的纹理。

随着 CUDA 和 OpenCL 的出现，您现在可以编写通用代码（例如：矩阵乘法），尽管需要进行一些修改以利用 GPU 硬件中的并行性，然后在 GPU 上运行它，而无需借助复杂的 OpenGL 技巧（像多纹理添加）。

希望能把事情弄清楚一点。**

# xcode - 自定义视图控制器 Xcode 的弹出

> ID：15255869
> 
> 赞同：0
> 
> 时间：2013-03-06T19:08:01.247
> 
> 标签：xcode, uiviewcontroller, uinavigationcontroller, uistoryboardsegue

我在 Xcode 4.6 中有一个使用情节提要的应用程序。在我的应用程序中，我有两个相关的视图控制器：一个提出问题，一个给出所提问题的答案。（作为 iOS 新手）我最初将其设置为问题控制器推送到答案控制器，答案控制器（通过按钮）推送到问题控制器（针对新问题）等等on，从而导致巨大的导航堆栈和内存崩溃，应用程序使用的时间越长。

所以，我相信我需要做以下事情：问题控制器应该继续回答控制器，然后我需要答案控制器弹出回问题控制器但带有新的问题图像。我在问题控制器的 viewWillAppear 方法中放置了重置图像的代码，该方法工作正常，但这里有一个问题：我并不总是希望每次问题控制器出现时都重置图像。如果选择了答案控制器中的答案，我只希望它重置。我尝试在问题控制器上从答案控制器设置一个 bool 属性以有条件地重置视图，但这不起作用。

第二个问题是，为了记忆，我需要回到问题控制器，但为了风格，我想给出一个推动 segue 的错觉。我不知道这是否可能。

简而言之，我的两个主要问题是：
**1）是否可以有条件地重置我要弹出的控制器的视图？**

**2）是否可以从右到左而不是从左到右为视图控制器弹出动画？**

谁能为我回答这些问题，或者甚至为我试图解决的最终内存问题提出一个完全不同的解决方案？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:25:09.657

1.对我来说，这听起来像是委托的工作。在您的答案 VC 中，您将为`protocol`委托声明一个和一个 iVar。像这样的东西：

```
@protocol AnswerDelegate
- (void)answerSelected:(NSString *)answer forQuestion:(NSString *)passedQuestion;
@end 
```

然后添加委托属性和弱 iVar，（也为问题添加了公共属性）：

```
@interface MyAnswerViewController : UIViewController {
    __unsafe_unretained id <AnswerDelegate> _delegate;
}

@property (nonatomic, assign) id <AnswerDelegate> delegate;
@property (nonatomic, strong) NSString *passedQuestion; 
```

然后在 的实现文件中`MyAnswerViewController`，当给出答案时，您将触发委托方法：

```
[self.delegate answerSelected:@"Answer" forQuestion:@"PassedQuestion"]; 
```

在问题 VC 中，您需要做的就是将自己声明为该协议的代表：

```
@interface MyQuestionViewController : UIViewController <AnswerDelegate> 
```

然后在实现文件的某个地方，实现委托方法：

```
- (void)answerSelected:(NSString *)answer forQuestion:(NSString *)passedQuestion {
  // Do something with the question and answer
  // Pop the VC if needed
} 
```

这是处理将对象传回调用类的一种非常简单的方法。

2.这需要实现您自己的过渡动画。请参阅下面的 SO 帖子：

[UINavigationController：反方向的弹出视图控制器](https://stackoverflow.com/questions/8030930/uinavigationcontroller-pop-view-controller-in-the-opposite-direction)

# java - Java extendsThread vs Implements runnable 模拟一个权限

> ID：15255872
> 
> 赞同：0
> 
> 时间：2013-03-06T19:08:03.423
> 
> 标签：java, multithreading

你好，我试图了解线程，我被要求模拟元素之间的能力，比如对象之间的竞争，但我需要使用 java 线程并比较线程与可运行。我实现了以下内容：

```
public class lamborgini extends Thread {

     public void run() {
     int distance = 1000;
     int steps = 0;
     int velocity = 45;
     int acelerationTime = 800;
     while (steps < distance) {
     System.out.println("Lamborgini running");
     steps+=velocity;
     Thread.sleep(acelerationTime);
    }
    }
    }

    public class ferrari implements Runnable {
    @Override
     public void run() {
     int distance = 1000;
     int steps = 0;
     int velocity = 130;
     int acelerationTime = 950;
     while (steps < distance) {
     System.out.println("Lamborgini running");
     steps+=velocity;
     Thread.sleep(acelerationTime);
    }
    }
    }

    public class RaceMain {
     public static void main(String[] args){
     lamborgini a = new lamborgini();
     lamborgini.start();

     ferrari b = new ferrari();
     ferrari.run();
    }
    } 
```

但这是正确的方法吗？为什么使用运行，为什么使用启动？我怎么知道哪个线程先出现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T19:12:38.097

你用`ferrari`错了方法。你会做

```
Thread ferrariThread = new Thread(new ferrari());
ferrariThread.start(); 
```

两个线程都需要`start()`编辑。在您当前的使用中，`run()`实际上并没有在不同的线程中运行。`Thread`扩展和实现`Runnable`之间的区别[主要是用例的问题](https://stackoverflow.com/questions/541487/implements-runnable-vs-extends-thread)，但主要区别在于，`this`在里面`Thread`指的是正在运行的线程，而对于`Runnable`它没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:13:48.813

请记住，建议以大写开头的类命名，并且不要忘记格式化您的代码，请使用 Eclipse 或 Netbeans 之类的 IDE。

如果您想知道线程何时完成运行（在这种情况下是您的汽车），只需在 while 结束后添加一个 println，当您不在 while 时，这意味着您已完成所有距离。

```
public class Lamborgini extends Thread {

    public void run() {
        int distance = 1000;
        int steps = 0;
        int velocity = 45;
        int acelerationTime = 800;
        while (steps < distance) {
            System.out.println("Lamborgini running");
            steps += velocity;
            try {
                Thread.sleep(acelerationTime);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        System.out.println("Lamborgini finished the race");
    }
}

public class Ferrari implements Runnable {
    @Override
    public void run() {
        int distance = 1000;
        int steps = 0;
        int velocity = 130;
        int acelerationTime = 950;
        while (steps < distance) {
            System.out.println("Ferrari running");
            steps += velocity;
            try {
                Thread.sleep(acelerationTime);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }

        }
        System.out.println("Ferrari finished the race");
    }
}

public static class RaceMain {
    public static void main(String[] args) {
        Lamborgini lamborgini = new Lamborgini();
        lamborgini.start();

        Thread ferrari = new Thread(new Ferrari());
        ferrari.start();
    }
} 
```

如果你想启动你的法拉利，正确的方法是创建一个新线程并将你的法拉利设置为参数，这不是线程，因为它是可运行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T19:11:59.097

```
lamborgini a = new lamborgini();
 lamborgini.start(); 
```

在此代码块中，您将`run()`异步启动 Lamborgini 内部的方法（实际上应该以大写字母开头）。也就是说，它将与启动它的线程并行运行。

```
 ferrari b = new ferrari();
 ferrari.run(); 
```

这不会启动一个新线程；它将简单地跳转到该`run()`方法并停止所有程序执行，直到该`run()`方法完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T19:12:36.543

实现 Runnable 接口是首选方式。你在这里集中精力运行一些东西而不是改变线程行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T19:14:59.863

首先，请为您的课程使用类名约定（类名以大写字母开头）

回答你的问题。当您扩展`Thread`时，您只需调用`start()`对象上的方法，因为该对象继承自 的方法`Thread`，因此该对象本身就是一个线程。

当您使用`Runnable`时，您不会`run()`在实现它的对象上调用该方法。相反，您应该做的是将实现的对象传递`Runnable`给新`Thread`对象。例如：

```
ferrari b = new ferrari();
Thread t = new Thread(b);
t.start(); 
```

这样，`run()`来自实现的对象的方法`Runnable`将执行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T19:42:05.963

以下是关于类 Thread 和接口 Runnable 的一些想法：

1）在Java中，一个类不能继承一个类，这意味着您只能扩展一个类。因此，随着您扩展 Thread 类，您将不再有继承。

2) 如果您不向 Thread 添加新功能，请使用 Runnable。

3) Runnable 代表一个任务，可以由 Thread 或 Executors 执行。

4) 完成runnable 可重用后，线程无法重新启动。

6）如果只需要实现Run，就不需要从线程继承所有。

7）扩展线程您将拥有一个与单个对象关联的唯一对象，同时实现 Runnable 它将共享同一个对象给多个线程。

您的线程按照您设置的顺序启动，但无法知道操作系统何时在两个线程之间切换。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-07T11:54:14.433

来自 Vmoksha 的 Sunilkumar

如果你使用线程，我们必须只扩展一个类，我们无法获得其他内置类的特性，所以我们尽量避免使用线程类，我们使用可运行接口，如果你使用接口，我们也可以轻松实现其他类

# javascript - 用旋转在纸上使矩形居中的公式

> ID：15255875
> 
> 赞同：0
> 
> 时间：2013-03-06T19:08:17.160
> 
> 标签：javascript, raphael

我正在尝试以下面的方式在纸上旋转一个矩形

```
 var paper = new Raphael(document.getElementById('element'), 400, 400);
  paper.rect(1, 200, 200, 200).animate({transform:"r-45,200,200"}, 2000); 
```

但这并不[完整](http://jsfiddle.net/jhG7S/)。是否有任何算法可以将矩形在纸内居中。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:41:20.290

你想在矩形的中心也旋转吗？你可以这样做：

```
var paper = new Raphael(document.getElementById('element'), 400, 400);
paper.rect(100, 100, 200, 200).animate({transform:"r-360,200, 200"}, 20000); 
```

我更新[了 jsfiddle 上的示例](http://jsfiddle.net/jhG7S/1/)，我改变了你的轮换和时间，但你可以用这些做你喜欢的事情。

# nservicebus - NServiceBus Distributor - 如何拆分应用程序

> ID：15255880
> 
> 赞同：3
> 
> 时间：2013-03-06T19:08:28.407
> 
> 标签：nservicebus, nservicebus-distributor

我们有 1 个服务，它从数据库中选择 som id，然后按顺序使用一些业务逻辑处理它们。我们希望横向扩展并并行执行的处理，而不创建大量内部线程。

**我的问题是：**

如果我想使用 Distributor 进行横向扩展，我应该如何以及如何做到这一点？

**解决方案1：** 服务拆分为2：

1.  原始服务被修改为仅从数据库中选择 id，然后将它们发送给工作人员。这将是分发器 (RunDistributorWithNoWorkerOnItsEndpoint)。
2.  一个新的服务，它将保存业务逻辑并作为工作人员处理每个传入的 id。如果我想要更多的工人，我只需多次启动相同的过程。

**方案2：** 服务拆分为3：

1.  原来的服务被修改为只从数据库中选择id，然后发送给distributor。
2.  一个新的服务，分发器 (RunDistributorWithNoWorkerOnItsEndpoint)，它只处理工作人员的负载平衡。
3.  一个新的服务，worker(s)，它将保存业务逻辑并处理每个传入的 id。

**方案3：** 服务拆分为2：

1.  原来的服务被修改为只从数据库中选择id然后发送。作为发件人运行。
2.  一个新的服务，它将保存业务逻辑并充当工作者**和分发**者，处理每个传入的 id 或分发它们。

解决方案 1 对我来说很有意义，但使用它意味着分销商会以某种方式承担 2 个责任：

1.  选择标识。
2.  将 ID 分发给工作人员。

但是当我查看 NSB 文档中的 ScaleOut 示例时，我不确定这是否可能，甚至可能是反模式。

在再次阅读文档和 ScaleOut 示例之后，我认为我应该采用解决方案 3，但我还不太确定。

我试图通过与 NSB 分销商进行横向扩展来解决管道问题，我更愿意自己进行托管，而不是使用 NServiceBus.Host.exe，但这不是严格的要求。

**编辑：** 我最终使用了解决方案 3，因为如果您使用默认队列命名，它的优势（在我看来）配置队列的任务比解决方案 2 中的小。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:28:14.367

我们在过去的版本中使用解决方案 2 完成了此操作。原因是我们使分发器保持一致且高度可用。将来我们很可能会让 Distributor 做一些工作，否则它只会相对闲置。这个解决方案对我们很有帮助。

# delphi - 带指针的 Delphi CompareMem

> ID：15255885
> 
> 赞同：3
> 
> 时间：2013-03-06T19:08:44.943
> 
> 标签：delphi

我一直在使用 DUnit 作为 TDD 驱动程序在 Delphi 5 中开发一些软件，但我发现当使用 CheckEqualsMem 时它一直失败，即使在调试器中我可以看到正在比较的对象（在这种情况下是两个长字数组）是完全相同的。

在内部，CheckEqualsMem 使用 CompareMem 并发现这是返回错误的内容。

深入研究我发现，如果我使用 @ 或 Addr CompareMem 使用指向对象地址的指针调用 CompareMem，即使内存相同，也会失败，但如果我使用 PByte（来自 Windows）或 PChar，它将正确比较内存.

为什么？

这是一个例子

```
var
  s1  : String;
  s2  : String;
begin
  s1 := 'test';
  s2 := 'tesx';

  // This correctly compares the first byte and does not return false 
  // since both strings have in their first position
  if CompareMem(PByte(s1), PByte(s2), 1) = False then
    Assert(False, 'Memory not equal');

  // This however fails ?? What I think I am doing is passing a pointer
  // to the address of the memory where the variable is and telling CompareMem
  // to compare the first byte, but I must be misunderstanding something
  if CompareMem(@s1,@s2,1) = False then
    Assert(False,'Memory not equal');

  // Using this syntax correctly fails when the objects are different in memory
  // in this case the 4th byte is not equal between the strings and CompareMem
  // now correctly fails
  if CompareMem(PByte(s1),PByte(s2),4) = False then
     Assert(False, 'Memory not equal');
end; 
```

正如您在评论中看到的，我来自 C 背景，所以我认为 @s1 是指向 s1 的第一个字节的指针，而 PByte(s1) 应该是同一件事，但事实并非如此。

我在这里有什么误解？@/Addr 和 PByte 有什么区别？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T19:16:36.697

不同之处在于它`@s1`是变量的*地址*`s1`，而 PByte(s1) 是变量的*值*`s1`。

字符串变量在内部是指向字符串数据`@s1`的指针，指向指针的指针也是如此。线

```
CompareMem(@s1,@s2,1); 
```

比较 和 的地址的两个最低有效`s1`字节`s2`；它没有任何意义，并且与 and 引用的字符串数据`Pointer(s1)`无关`Pointer(s2)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T19:18:10.373

Delphi 中的字符串类型是托管类型。

字符串变量本身是一个指向内存结构的指针，它通常包含的不仅仅是纯字符信息，如代码页、引用计数等。

您可以在 DocWiki中的文章[内部数据格式](http://docwiki.embarcadero.com/RADStudio/XE3/en/Internal_Data_Formats#Long_String_Types)中找到更多信息

`at`运算符为您提供变量所在的内存。在这种情况下，这是存储指针的地址。甚至没有它指向的地址。例如，如果`s1`和`s2`是局部方法变量，则`@s1`返回变量所在的堆栈中的地址。

如果要比较字符串内容，最好比较`@s1[1]`，`@s2[1]`因为它指向每个字符串中的第一个字符。

如果要比较两个字符串是否指向同一个字符串（不同的 tan 具有相同的内容），您可以转换`s1`为指针并比较其值，或者`@s1`转换为指向指针的指针。

我希望这个例子可以帮助你更多地了解正在发生的事情：

```
program Project1;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils;

var
  s1  : String;
  s2  : String;

begin
  try
    s1 := 'test';
    //points to the same data
    s2 := s1;

    Assert(@s1<>@s2, 'They are at the same memory address, no way!');
    Assert(PPointer(@s1)^ = PPointer(@s2)^, 'They points to different address!');
    Assert(PPointer(@s1)^ = Pointer(s1), 'What jachguate says is a lie!');
    Assert(CompareMem(@s1[1], @s2[1], Length(s1) * SizeOf(Char)), 'Woa, differnet data');

    s2 := 'tesx';
    //points to different string, with partial equal content

    Assert(PPointer(@s1)^ <> PPointer(@s2)^, 'They still points to the same address!');
    Assert(CompareMem(@s1[1], @s2[1], 3 * SizeOf(Char)), 'Difference in the first 3 chars!');
    Assert(not CompareMem(@s1[1], @s2[1], 4 * SizeOf(Char)), 'No difference at all!');

    Writeln('All passed');
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  Readln;
end. 
```

### 但这与您的现实世界问题不同

如果你使用动态数组，你必须记住它也是一个*托管类型*，所以你必须更好地获取每个数组的第一个元素的地址来进行比较。

如果不是这样，我建议您在问题中使用真实代码来显示您的真实问题，而不是不同的问题。

# ms-access - 删除多个表的查询

> ID：15255889
> 
> 赞同：1
> 
> 时间：2013-03-06T19:08:52.437
> 
> 标签：ms-access

如何修改此代码，以便从获取信息的两个表中删除记录？

```
SELECT products_description.products_name, products.products_id
FROM products INNER JOIN products_description ON products.products_id =             products_description.products_id
WHERE (((products.products_ordered)=0) AND ((products.products_status)=0)); 
```

我对sql编码很陌生，所以如果这是一个愚蠢的问题，请原谅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:28:24.370

您可以通过关系和单个查询来做到这一点。

1.  `products`设置和`products_description`基于公共字段之间的关系`products_id`
2.  勾选“Enforce Reference Integrity”复选框
3.  勾选“级联删除相关记录”复选框
4.  保存关系

然后，此查询将从中删除行`products`以及任何`products_description`包含`products_id`与已删除行匹配的值的`products`行。

```
DELETE FROM products
WHERE
        products.products_ordered=0
    AND products.products_status=0; 
```

如果你走这条路，请确保你明白后果。作为额外的保护措施，制作并测试您希望保留的数据的备份。;-)

# c# - TextBox 不支持 Get 返回的值

> ID：15255893
> 
> 赞同：1
> 
> 时间：2013-03-06T19:08:56.647
> 
> 标签：c#, .net, wpf, binding, textbox

有一个我想限制输入范围的文本框。
在这个简单的例子中，Int32 从 0 到 300。
在现实生活中，这个范围更复杂，我不想让 UI 涉及到，除了接收并显示一个有效值。

如果我输入 333，它会返回 300，而 300 在 TextBox 中。

这就是问题所在：
然后，如果我为 3001 添加一个数字，则该集合分配的值为 300。
调用 get 并返回 300。
但 3001 仍在 TextBox 中。

如果我粘贴 3001，那么它会正确显示 300。
只有当单个击键产生 4 个（或更多）数字时，它才会失败。

```
<TextBox Text="{Binding Path=LimitInt, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="60" Height="20"/>

public partial class MainWindow : Window, INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    protected void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }

    private Int32 limitInt = 0;

    public MainWindow()
    {
        InitializeComponent();
    }

    public Int32 LimitInt
    {
        get { return limitInt; }
        set
        {
            if (limitInt == value) return;
            limitInt = value;
            if (limitInt < 0) limitInt = 0;
            if (limitInt > 300) limitInt = 300; 
            NotifyPropertyChanged("LimitInt");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T19:40:31.800

我相信发生这种情况是因为您在绑定操作中间更改了绑定源的值。当您`UpdateSourceTrigger=PropertyChanged`在绑定上使用时，您是在告诉它在每次按键时重新评估。在这种情况下，将`Binding`值推送到源，而不是尝试通过从源中提取来更新目标。

即使在您提出 NotifyPropertyChanged 之后，我想因为您正处于绑定操作的中间，目标不会得到更新。

您可以通过删除`UpdateSourceTrigger`并将其保留为默认值 ( `LostFocus`) 来解决此问题。只要您在用户标签退出后对它感到满意，这样做就会起作用。

```
<TextBox Text="{Binding Path=LimitInt}" Width="60" Height="20"/> 
```

（Mode=TwoWay 是 TextBox 的默认设置，因此您也可以将其删除）。

如果您想在每次按键时对其进行评估，我建议您查看蒙面编辑，并处理按键/按键，以防止将值输入到 中`TextBox`，而不是在输入后尝试更改它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:08:03.233

最好使用验证。

就是这样：

定义您的 XAML 以检查`PreviewTextInput`.

```
<TextBox Text="{Binding Path=LimitInt, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" PreviewTextInput="CheckNumberValidationHandler" Width="60" Height="20"/> 
```

然后设置您的验证处理程序：

```
/// <summary>
/// Check to make sure the input is valid
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
private void CheckNumberValidationHandler(object sender, TextCompositionEventArgs e) {
    if(IsTextAllowed(e.Text)) {
    Int32 newVal;
    newVal = Int32.Parse(LimitInt.ToString() + e.Text);
    if(newVal < 0) {
        LimitInt = 0;
        e.Handled = true;
    }
    else if(newVal > 300) {
        LimitInt = 300;
        e.Handled = true;
    }
    else {
        e.Handled = false;
    }
    }
    else {
    e.Handled = true;
    }
}

/// <summary>
/// Check if Text is allowed
/// </summary>
/// <param name="text"></param>
/// <returns></returns>
private static bool IsTextAllowed(string text) {
    Regex regex = new Regex("[^0-9]+");
    return !regex.IsMatch(text);
} 
```

编辑：我检查过，它适用于 .NET 4.0 :)

# c# - 如何通过递归关系将实体添加到 DbContext 中，同时避免重复添加？

> ID：15255898
> 
> 赞同：1
> 
> 时间：2013-03-06T19:09:14.227
> 
> 标签：c#, entity-framework, entity-framework-4.3

我正在使用 Entity Framework 4.4，并且我有一个像这样的一对多关系模型：

```
class Item { 
   public string keyPart1 { get; set; }
   public string keyPart2 { get; set; }

   public virtual Container container { get; set; }
   public string ContainerId { get; set; }
}

// Idea is that many Items will be assigned to a container
class Container {
   public string ContainerId { get; set; }

   private ICollection<Item> _Items;
   public virtual ICollection<Item> As
   {
      get { return _Items ?? (_Items = new HashSet<A>()); }
      protected set { _Items = value; }
   }
} 
```

现在，这是 DbContext：

```
public class StorageContext : DbContext
{
    public DbSet<Item> Items { get; set; }
    public DbSet<Bucket> Buckets { get; set; }

    public override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);
        modelBuilder.Entity<Item>().HasKey( i => new { i.keyPart1, i.keyPart2 } ).HasRequired( i => i.Container );
    }
} 
```

现在，假设我有 N 个 Item 实例。每个 Item 都属于一个容器，该容器包含多个 item 实例，每个实例都属于一个容器，因此模型会无限递归。

然后我想循环浏览我当前的 Item 实例列表并将每个实例添加到 db 上下文中：

```
foreach (var i in LocalItemList)
{ 
   IDbSetExtensions.AddOrUpdate<Item>(db.Items, i);
}
dbContext.SaveChanges(); 
```

我无法弄清楚的问题是如何告诉上下文，`AddOrUpdate`这样`Container`我就不会得到主键重复异常。在某些时候，我们会遇到一个与另一个`Item`相同`Container`的，但我会在`SaveChanges()`.

如果我`Add`是 DbSet 的容器，是否也将`Item`s 添加到 Set 中？我怎样才能做到这一点`AddOrUpdate`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:55:53.727

我不确定您是否要将相关的 s 与`Container`s 一起插入到数据库中`Item`，或者您是否只想创建与现有`Container`s 的关系。`Container`实体在数据库和对象图中不存在的可能情况，每个键只有一个`Container` *实例（允许对这些实例的多个**引用*）根本不成问题，简单的代码就像......

```
 foreach (var i in LocalItemList)
    {
        dbContext.Items.Add(i);
    }
    dbContext.SaveChanges(); 
```

...实际上应该毫无例外地工作。因此，您可能有以下两种情况之一可以解释主键约束违规：

*   实体已经存在于数据库中，并且在您的对象图中，每个键`Container`只有一个`Container` *实例*（再次允许对这些实例的多次*引用）。*这是一个简单的案例，您可以使用以下方法解决它：

    ```
    foreach (var i in LocalItemList)
    {
        dbContext.Containers.Attach(i.Container);
        dbContext.Items.Add(i);
    }
    dbContext.SaveChanges(); 
    ```

    如果您有`Container`同一个键的多个实例，这将不起作用并抛出*“...具有相同键的对象已经存在于 ObjectContext...”*（或类似）异常。`Container`如果数据库中尚不存在 s ，它也将不起作用（那时您可能会违反外键约束）。

*   如果您`Container`的对象图中有多个具有相同键的对象实例，则必须在将实体附加或添加到上下文之前，用每个键的一个唯一实例替换重复项。为了使这个过程更简单，我将首先删除循环引用，然后使用`Local`集合来确定是否`Container`已经附加了具有相同键的 a：

    ```
    foreach (var i in LocalItemList)
    {
        i.Container.Items = null;

        var attachedContainer = dbContext.Containers.Local
            .SingleOrDefault(c => c.ContainerId == i.Container.ContainerId);

        if (attachedContainer != null)
            i.Container = attachedContainer;
        else
            dbContext.Containers.Attach(i.Container);
            // or dbContext.Containers.Add(i.Container);
            // depending on if you want to insert the Container or not

        dbContext.Items.Add(i);
    }
    dbContext.SaveChanges(); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:42:56.340

只要您让 EntityFramework 知道任何预先存在的容器，它似乎就可以正常工作。

例如，此测试在空数据库上运行。这两个项目都在同一个 Container 中，但 EF 只插入 Container 一次。

```
 [TestMethod]
    public void Populate()
    {
        const string conStr = "Data Source=(local);Initial Catalog=EfExperiment1; Integrated Security=True";
        var context = new MyDbContext(conStr);

        var container = new Container { ContainerId = "12345" };
        var item1 = new Item { keyPart1 = "i1k1", keyPart2 = "i1k2", Container = container };
        var item2 = new Item { keyPart1 = "i2k1", keyPart2 = "i2k2", Container = container };
        context.Items.Add(item1);
        context.Items.Add(item2);
        context.SaveChanges();
    } 
```

此测试在容器已存在时运行。通过尝试从数据库中读取容器，我们让 EF 知道任何现有的实例。

```
 [TestMethod]
    public void PopulateSomeMore()
    {
        const string conStr = "Data Source=(local);Initial Catalog=EfExperiment1; Integrated Security=True";
        var context = new MyDbContext(conStr);

        var container = context.Buckets.FirstOrDefault(c => c.ContainerId == "12345") ??
                        new Container { ContainerId = "12345" };

        var item3 = new Item { keyPart1 = "i3k1", keyPart2 = "i3k2", Container = container };
        var item4 = new Item { keyPart1 = "i4k1", keyPart2 = "i4k2", Container = container };
        context.Items.Add(item3);
        context.Items.Add(item4);
        context.SaveChanges();
    } 
```

此测试不会加载现有容器，因此 EF 认为它需要插入并因重复键错误而失败。

```
 [TestMethod]
    public void PopulateSomeMoreAgain()
    {
        const string conStr = "Data Source=(local);Initial Catalog=EfExperiment1; Integrated Security=True";
        var context = new MyDbContext(conStr);

        var container = new Container { ContainerId = "12345" };
        var item5 = new Item { keyPart1 = "i5k1", keyPart2 = "i5k2", Container = container };
        var item6 = new Item { keyPart1 = "i6k1", keyPart2 = "i6k2", Container = container };
        context.Items.Add(item5);
        context.Items.Add(item6);
        context.SaveChanges();
    } 
```

# objective-c - Xcode - 如何制作关卡解锁系统？

> ID：15255900
> 
> 赞同：-2
> 
> 时间：2013-03-06T19:09:17.020
> 
> 标签：objective-c, xcode, uiviewcontroller, development-environment, viewdidload

嘿伙计们，我只是想知道如何在 Xcode 中做到这一点。任何帮助，将不胜感激

我想开始我的关卡（已经制作），然后使用 viewdidload（在我的关卡视图中）更改我的关卡选择器中的一个按钮（单独的视图和 xib 到关卡选择器）这个按钮需要更改为具有特定文本的圆形矩形按钮，在这种情况下需要为“Level1”。此按钮需要从当前具有挂锁图像的自定义按钮更改，以通知用户该级别当前已锁定。完成后，我需要将更改保存为游戏默认设置，这样一旦应用程序关闭，它就不会丢失您已解锁的关卡

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-06T19:21:41.670

那么 buttonType 是一个只读属性，可以在初始化时设置为

```
UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom]; 
```

实现您想要的方法只是制作两个按钮，并根据要求将按钮显示或隐藏为

```
[btn1 setHidden:YES];
[btn2 setHidden:NO]; 
```

编辑：为了在不丢失值的情况下保存值，有很多选项。更简单的是`NSUserDefaluts`您可以将值存储到键字符串并取回的位置

*   [文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)
*   [教程](http://mobile.tutsplus.com/tutorials/iphone/nsuserdefaults_iphone-sdk/)

要将值从 2nd VC 更改为 1st，您必须在 2nd VC 上实现委托方法以触发 1st VC 中的操作

[委托教程](http://www.roostersoftstudios.com/2011/04/12/simple-delegate-tutorial-for-ios-development/)

# php - 如何创建一个css类的多个实例？

> ID：15255908
> 
> 赞同：1
> 
> 时间：2013-03-06T19:09:39.873
> 
> 标签：php, javascript, jquery, html, css

我必须创建同一个 css 类的多个实例来运行显示用户评论和评级的代码块。（在评级中，我根据评论的评级设置点亮星星的宽度）所以我必须创建尽可能多的 css 类实例因为有评论。

```
<script>
var wid=<?=$comment->rating?>*20; //20 is the width of 1-star, comment->rating 
                                      //gives me rating of that particular comment.   
jQuery(function($){
$(".rating-star").css('width',wid);  //setting width according to calculated wid.
});
</script> 
```

由于只有一个评级星级，所有评论都获得相同的星级。如何创建与评论一样多的 rating-star 类实例？提前致谢！很棒的社区！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T19:36:46.320

另一种方法是使用数据属性并在其中回显评级。

[在 jsFiddle 上](http://jsfiddle.net/ZuX5p/)工作DEMO 。

因此，示例 HTML 项目看起来像这样：

```
<li>
    <p>item one</p>
    <span class="rating-star" data-rating="1"></span>
</li> 
```

还有你的 JS 函数：

```
(function () {

    // cache the selector
    $ratings = $('.rating-star');

    // run foreach on selector
    $ratings.each(function (index) {

        // variables
        var el = $(this),
            rating = el.data('rating'),
            width = rating * 20;

        // apply width
        el.css('width', width + "px");

    });

})(); 
```

你的 CSS 可以使用带有背景重复的星形图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T19:21:43.440

您实际上不需要创建与评论一样多的类。

这就是我的意思，有几种方法可以做到这一点。这里有两个：

例如，创建 .rating1 到 .rating5，然后在创建通常刚刚给出 .rating-star 的元素时，将其用于类：

```
class="rating-star rating<? $comment->rating $>" 
```

然后在 CSS 中：

```
.rating1 { width: 20px; }
.rating2 { width: 40px; } 
```

..ETC

或者......不太棒/更慢的方式：

在您现在拥有 class='rating-star' 的地方，还将 rating='rating $>' 设置为自定义标签。然后：

```
$(".rating-star[rating]").each(function(){ 
    $(this).addClass("rating"+$(this).attr("rating") 
}) 
```

...使用与上述相同的 CSS。

# php - Clean up spaces between letters / triple spaces in text string

> ID：15255913
> 
> 赞同：3
> 
> 时间：2013-03-06T19:09:54.833
> 
> 标签：php, javascript

I need to clean up strings of text where every letter has a space in between and every space is composed of 3 spaces, for example:

```
E X C E P T I O N A L   C R E A T I V I T Y   A N D   A  
T A I L O R E D   D E S I G N   E D G E 
```

How would I go about cleaning the text up, ie - converting every triple-space to a single space, and removing the space in between each letter?

Client-side / server side solutions welcome.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T19:12:25.387

```
preg_replace('/(.) /', '\\1', $string); 
```

The regex engine doesn't match substrings that are the result of a replacement, so it will correctly handle triple spaces without needing to special case them.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T19:17:23.510

```
str_replace(array('   ', ' ', '%'), array('%', '', ' '), $text); 
```

Just replace % with a character or a string which does not appear in your text.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T19:25:51.180

```
$input = <<<_EOI_
E X C E P T I O N A L   C R E A T I V I T Y   A N D   A  
T A I L O R E D   D E S I G N   E D G E
_EOI_;

$patterns = array('/(\w) /', '/ {2,}/');
$replaces = array('$1', ' ');

preg_replace($patterns, $replaces, $input);

// output: 
// EXCEPTIONAL CREATIVITY AND A
// TAILORED DESIGN EDGE 
```

# unity3d - 大场景中的Unity3D点光源

> ID：15255915
> 
> 赞同：3
> 
> 时间：2013-03-06T19:10:01.920
> 
> 标签：unity3d, frame-rate, deferred-rendering

我目前正在 Unity 中构建一个包含大量点光源的大型场景。场景中的每个房间（约 40 个房间）都有 2 个点光源，我正在使用延迟渲染（启用阴影以使光线不会泄漏到房间外）。

使用前向渲染时，我的游戏以 60 fps 的速度运行，但当切换到延迟照明时，它的运行速度约为 25-30 fps（因为它计算了我假设的点光源的软阴影）。

我怎样才能解决这个问题，同时还能防止灯光从墙壁漏出？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T19:28:48.643

一种虽然复杂的方法是分别动态加载和卸载房间，这样当这些房间对玩家可见时，只有灯光、多边形和其他信息存在。如果您有办法分割场景以更好地减少要处理的数据量，那么您可以将其视为一种黑客行为。这是我唯一的建议，它足够简单，可以在很短的时间内解释清楚，而且很明显，这很大程度上取决于你正在制作的游戏类型。

# c# - 在允许放置之前检查目标窗口

> ID：15255916
> 
> 赞同：0
> 
> 时间：2013-03-06T19:10:02.057
> 
> 标签：c#, drag-and-drop, target

有没有办法在允许 drop 之前检查**目标**（它属于哪个 .exe）？

我打算实现的是允许将控件拖放到 Word 或 Excel 上，并根据**目标**应用程序，传递适当的文件。

编辑：这是我在 VB 中尝试过的代码

@David 感谢您的代码。我用按钮控件（WPF）尝试了类似的事情，并在数据对象中添加了一个文件路径。我遇到了堆栈不平衡异常。

这是代码（在 VB.Net 中尝试） - 这给了我这个错误：对 PInvoke 函数 'TestApplication!TestApplication.MainWindow::GetCursorPos' 的调用使堆栈不平衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

我忘了什么吗？

*EDIT*进行了一些更改，现在可以使用。

```
 `Imports System.Diagnostics
Imports System.Runtime.InteropServices
Imports System.Collections.Specialized

Class MainWindow
    <DllImport("user32.dll")> _
     Private Shared Function WindowFromPoint(ByVal xPoint As Integer, ByVal yPoint As                  Integer) As IntPtr
End Function

    <DllImport("user32.dll")> _
    Private Shared Function GetCursorPos(lpPoint As Point) As Boolean
    End Function

    <DllImport("kernel32.dll", SetLastError:=True)> _
    Private Shared Function GetProcessId(hWnd As IntPtr) As Integer
    End Function

    <DllImport("user32.dll", SetLastError:=True)> _
    Private Shared Function GetWindowThreadProcessId(hWnd As IntPtr, lpdwProcessId As     Integer) As UInteger
    End Function

    Private MouseIsDown As Boolean = Nothing

    Private Sub DropButton_MouseDown(sender As Object, e As MouseButtonEventArgs) Handles DropButton.PreviewMouseLeftButtonDown
        MouseIsDown = True
    End Sub

    Private Sub DropButton_MouseMove(sender As Object, e As MouseEventArgs) Handles DropButton.MouseMove
        If MouseIsDown Then
            Dim data As New DataObject()
            Dim DropList As New StringCollection
            DropList.Add("c:\file.txt")
            data.SetFileDropList(DropList)
            DragDrop.DoDragDrop(CType(e.OriginalSource, DependencyObject), data, DragDropEffects.Move)
        End If
    End Sub

    Private Sub DropButton_GiveFeedback(sender As Object, e As GiveFeedbackEventArgs) Handles DropButton.GiveFeedback
    Dim a = Mouse.GetPosition(Me)
    If a <> Nothing Then

        Dim hWnd As IntPtr = WindowFromPoint(a.X, a.Y)

        If hWnd <> Nothing Then
            Dim processId As Integer
            GetWindowThreadProcessId(hWnd, processId)

            Dim proc As Process = Process.GetProcessById(processId)
            label1.Content = proc.MainWindowTitle
        End If
    End If
End Sub
End Class` 

            回答 #1

赞同：0

时间：2013-03-06T20:33:58.047

当然。您可以通过在 GiveFeedback 事件中为正在执行拖放操作的控件实现一些互操作来实现这一点。我制作了一个示例应用程序，并在表单上使用了一个树视图控件和一个标签来进行测试。

```
using System.Diagnostics;
using System.Runtime.InteropServices;

[DllImport("user32.dll")]
static extern IntPtr WindowFromPoint(Point Point);

[DllImport("user32.dll")]
static extern bool GetCursorPos(out Point lpPoint);

[DllImport("kernel32.dll", SetLastError = true)]
static extern int GetProcessId(IntPtr hWnd);

[DllImport("user32.dll", SetLastError=true)]
static extern uint GetWindowThreadProcessId(IntPtr hWnd, out int lpdwProcessId);

private void treeView1_GiveFeedback(object sender, GiveFeedbackEventArgs e)
{
    Point p;

    if (GetCursorPos(out p))
    {
        IntPtr hWnd = WindowFromPoint(p);

        if (hWnd != null)
        {
            int processId;
            GetWindowThreadProcessId(hWnd, out processId);

            Process proc = Process.GetProcessById(processId);
            label1.Text = proc.MainWindowTitle;
        }
    }
} 
```

            回答 #2

赞同：0

时间：2013-03-06T20:48:12.110

如果您想选择在放置时呈现哪种剪贴板格式，则必须通过[实现 IASyncOperation/IDataObjectAsyncCapability](http://blogs.msdn.com/b/delay/archive/2009/11/04/creating-something-from-nothing-asynchronously-developer-friendly-virtual-file-implementation-for-net-improved.aspx)来延迟内容的呈现，直到放置发生。但是，Office 没有关于它如何向您的拖动源标识自己的文档。Windows 团队有一条 DDWM_UPDATEWINDOW 消息，但我不确定办公室团队是否使用它。

一般来说，[每个程序都有自己对剪贴板格式的偏好](https://stackoverflow.com/questions/15255916/c-sharp-drag-and-drop-checking-the-target-window-before-allowing-drop)。例如，如果您的 IDataObject::GetData 被[WordML](http://msdn.microsoft.com/en-us/library/office/aa212812%28v=office.11%29.aspx)调用，那么目标可能是 Microsoft Word。如果[电子表格ML](http://msdn.microsoft.com/en-us/library/office/bb226687%28v=office.11%29.aspx)是首选，那么目标可能是 Microsoft Excel。您不需要实际提供这两种格式的内容，但您可以使用查询的剪贴板格式的模式来确定您的数据被拖放到哪种程序，并在以后提供数据，例如，当 CF_HTML被查询。当然，如果您不介意浪费一些内存，则不需要 IASyncOperation，只需使用 Word 和 Excel 之间不共享的格式填充数据对象，Word 会选择它理解的第一个格式，Excel 会选择第一个它理解的格式。

            回答 #3

赞同：0

时间：2013-03-06T20:38:28.533

问题是范式与您想要的相反。你必须指定你有什么可用的。然后，您放置它的应用程序可以选择它想要采用的内容。

不幸的是，如果您将多个文件放在 DataFormats.FileDrop 中，Excel 将打开这两个文件（我假设 Word 也会打开）。

此外，对于 excel（我假设是 word），在哪里/当你放下它时会改变它的偏好，例如：

*   如果您在 Excel 没有打开文件时删除它更喜欢 FileDrop，拒绝其他所有内容
*   如果你放在标题栏上，它更喜欢 FileDrop，拒绝其他一切
*   如果您放在打开的工作表上，它更喜欢 StringFormat（尽管我认为它更喜欢 CSV）
*   Excel 如何更喜欢 Rtf 而不是 CSV，所以如果您将两者都放入数据中，Word 将采用 Rtf 而 Excel 将采用 CSV

因此，执行此操作的代码是...

```
 DataObject d = new DataObject();
  d.SetData(DataFormats.CommaSeparatedValue, csvValue);
  d.SetData(DataFormats.Rtf, rtfValue);
  DoDragDrop(d, DragDropEffects.Copy); 
```

因此，如果您可以在调用之前将数据转换为 csv 和 rtf 格式，它将传递数据。我无论如何都找不到使用文件来执行此操作。

```

# cocos2d-iphone - Cocos2D - 在几个 CCSprites 上使用循环重复一个动作不能按预期工作......为什么？

> ID：15255918
> 
> 赞同：0
> 
> 时间：2013-03-06T19:10:05.460
> 
> 标签：cocos2d-iphone

这有效：

```
for (Object *oneObj in allObjects) {

    id moveAction = [CCMoveTo actionWithDuration:0.3f position:ccp(tx, ty)];
    id rotateAction = [CCRotateTo actionWithDuration:0.3 angle:0.0f];

    id action = [CCSpawn actions:moveAction, rotateAction, nil];
    id sequence = [CCSequence actions: action,
                                     [CCDelayTime actionWithDuration:0.1f],
                                     nil];

    [oneObj runAction:sequence];
} 
```

这不起作用（这个对象只移动了一个对象）：

```
id moveAction = [CCMoveTo actionWithDuration:0.3f position:ccp(tx, ty)];
id rotateAction = [CCRotateTo actionWithDuration:0.3 angle:0.0f];

id action = [CCSpawn actions:moveAction, rotateAction, nil];
id sequence = [CCSequence actions: action,
                          [CCDelayTime actionWithDuration:0.1f],
                          nil];

for (Object *oneObj in allObjects) {
     [oneObj runAction:sequence];
} 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:21:20.740

因为一个动作只能在一个节点上运行。您必须复制序列，以便每个对象运行自己的序列副本：

```
[oneObj runAction:[sequence copy]]; 
```

# java - Rock Paper Scissors 变量无法识别且程序以 JAVA 结尾

> ID：15255924
> 
> 赞同：0
> 
> 时间：2013-03-06T19:10:36.670
> 
> 标签：java, variables, while-loop

我是编程新手，我一直在编写一个简单的程序来创建一个继续显示错误的石头剪刀布游戏。在启动/运行该程序时，它似乎无法识别变量 Rock Paper 和 Scissors 并直接进入 else 条件。另外，当我尝试解析之后

```
int exit = 4;
while (exit != userchoice){
JOptionPane.showInputDialog("Choose wisely. Enter:\n 1 for Rock \n 2 for Paper "
        + "\n 3 for Scissors \n or 4 to Exit:\n"); 
```

该程序就停在那里，所以我仍然很难找到任何其他方式。另外，这个程序将如何以我要去的条件结束？我仍然不明白如何结束这个循环，因为我认为用一个简单的最终括号它会在满足条件后结束循环，在这种情况下输入数字 4。

帮助将不胜感激。谢谢你。

```
 public static void main(String[] args) {
    String inString = null;
    int compchoice = (int)(Math.random() * 3);
    int userchoice = 0;
    int Rock = 1, Paper = 2, Scissors = 3;

    Scanner input = new Scanner(System.in);
    JOptionPane.showMessageDialog(null, 
            "Welcome to JanKenPo! It is You Vs. The Computer\n");

    int exit = 4;
    while (exit != userchoice){
    JOptionPane.showInputDialog("Choose wisely. Enter:\n 1 for Rock \n 2 for Paper "
            + "\n 3 for Scissors \n or 4 to Exit:\n");

    if (userchoice == Rock && compchoice == Paper) {
            JOptionPane.showMessageDialog(null, "Paper covers Rock! You win this Round.");
            }             
    else if (userchoice == Rock && compchoice == Scissors){
            JOptionPane.showMessageDialog(null, "Rock crushes Scissors! You win this Round.");
            }        
    else if (userchoice == Scissors && compchoice == Paper){
            JOptionPane.showMessageDialog(null, "Scissors cuts Paper! You win this round.");
            }
    else if (userchoice == Paper && compchoice == Rock){
            JOptionPane.showMessageDialog(null, "Paper Covers Rock! Computer wins this Round.");
            }
    else if (userchoice == Paper && compchoice == Scissors){
            JOptionPane.showMessageDialog(null, "Scissors cuts Paper! Computer wins this Round.");
            }
    else if (userchoice == Scissors && compchoice == Rock){
            JOptionPane.showMessageDialog(null, "Rock crushes Scissors! Computer wins this Round.");
            }
    else if (userchoice == compchoice){
            JOptionPane.showMessageDialog(null, "It's a Tie! Both you and the computer chose the same object.");
        }
    else{
        exit = Integer.parseInt(inString);
        }
    }   
}
JOptionPane.showMessageDialog(null, "Good Bye!");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:16:32.413

你需要做

```
String input = JOptionPane.showInputDialog(...);
userChoice = Integer.parseInt(input); 
```

现在，您只是完全忽略输入而不是设置`userChoice`:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:57:47.587

好吧，您还需要执行上述操作：您不需要扫描器，因为您从 showInputDialog() 获取输入；添加你的while循环体{

`String input = JOptionPane.showInputDialog(...);`

`userChoice = Integer.parseInt(input);`

`int compchoice = (int)(Math.random() * 3) +1;`

通过添加 +1，您将获得 b/w 1-3 输出，并且您需要将其添加到 while 循环中，因为计算机需要在每次循环运行时做出选择。

还要从 else 块中删除该行 `exit =Integer.parseInt(inString);`

当用户输入选项 4 时，您的程序将终止；

# java - 如何使用非静态方法？

> ID：15255926
> 
> 赞同：0
> 
> 时间：2013-03-06T19:10:42.537
> 
> 标签：java, static, drawstring

我已经搜索了一段时间，文档和谷歌都返回了一个很好的答案。我刚开始使用java，所以请帮帮我。我收到一个错误

```
Graphics.drawString('hello',10, 10); 
```

然而，所有文档都告诉我，我需要使用 str、int、int。我的错误是：

```
Cannot make a static reference to the non-static method drawString(str,int,int) from the type Graphics 
```

那么有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T19:12:13.673

`Graphics`正如错误消息所说，您需要有一个要使用的实例。

IE，

```
Graphics graphics = new Graphics();
graphics.drawString("hello", 10, 10); 
```

基本上，`static`方法是从类中调用的，而非静态方法必须使用该类的实际对象来调用。

但是，您将需要`Graphics`从某个地方获取实例，因为[Graphics 构造函数](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Graphics.html#Graphics())是`protected`而不是`public`，而类本身是`abstract`. （对于初学者来说，这意味着您需要在某个地方已经有了可以使用的对象，因为您不能直接为自己创建它。）

另外，附注：单引号用于`char`文字，而双引号用于`String`文字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T19:15:33.393

**drawString()**方法不是静态的。这意味着您需要一个 Graphics（或 Graphics2D）对象的实例。**通常，当您使用此对象时，它会作为paint()**方法的参数传递给您。

# python - 如何在 lmfit 最小二乘最小化中包含我的数据的错误，以及 lmfit 中 conf_interval2d 函数的这个错误是什么？

> ID：15255928
> 
> 赞同：4
> 
> 时间：2013-03-06T19:10:54.943
> 
> 标签：python, least-squares, confidence-interval, uncertainty

我是 python 新手，并试图使用 lmfit 包来检查我自己的计算，但是我不确定（1）如何为以下测试（和 2）包含数据错误（sig）我使用如下所示的 conf_interval2d 获取）：

```
 import numpy as np
    from lmfit import Parameters, Minimizer, conf_interval, conf_interval2d, minimize, printfuncs

    x=np.array([ 0.18,  0.26,  1.14,  0.63,  0.3 ,  0.22,  1.16,  0.62,  0.84,0.44,  1.24,  0.89,  1.2 ,  0.62,  0.86,  0.45,  1.17,  0.59, 0.85,  0.44])
    data=np.array([ 68.59,  71.83,  22.52,44.587,67.474 ,  55.765,  20.9,41.33783784,45.79 ,  47.88,   6.935,  34.15957447,44.175,  45.89230769,  57.29230769,  60.8,24.24335594,  34.09121287,  42.21504003,  26.61161674])
    sig=np.array([ 11.70309409,  11.70309409,  11.70309409,  11.70309409,11.70309409,  11.70309409,  11.70309409,  11.70309409,11.70309409,  11.70309409,  11.70309409,  11.70309409,11.70309409,  11.70309409,  11.70309409,  11.70309409,11.70309409,  11.70309409,  11.70309409,  11.70309409])

    def residual(pars, x, data=None):
        a=pars['a'].value
        b=pars['b'].value
        model = a + (b*x)
        if data is None:
            return model
        return model-data

    params=Parameters()
    params.add('a', value=70.0)
    params.add('b', value=40.0)

    mi=minimize(residual, params, args=(x, data))
    #mi=minimize(residual, params, args=(x,), kws={'data': data})#is this more correct?
    ci, trace = conf_interval(mi, trace=True) 
```

到目前为止这工作正常，但如上所述，我如何包含数据（sig_chla）的错误，以便我可以计算加权和减少的卡方？

第 2 部分：此外，当我尝试使用以下内容来绘制置信区间 xs, ys, grid = conf_interval2d(mi, 'a', 'b', 20, 20)

我收到以下错误：

*** ValueError: failed to create intent(cache|hide)|optional array-- 必须有定义的维度但是得到 (0,)

或者

例程 DGESV 的参数 4 不正确 DGESV 中的 Mac OS BLAS 参数错误，参数 #0（不可用）为 0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T19:35:01.823

您必须自己根据`residual()`函数中的错误对数据进行加权。

从`lmfit`文档中（虽然不是很容易找到）：

> 请注意，卡方和约简卡方的计算假设返回的残差函数被适当地缩放到数据中的不确定性。为了使这些统计数据有意义，编写要最小化函数的人必须适当地缩放它们。

不过，这并不难做到。来自关于[加权最小二乘拟合](https://en.wikipedia.org/wiki/Least_squares)的维基百科条目：

> 但是，如果测量结果不相关但具有不同的不确定性，则可能会采用修改后的方法。Aitken 表明，当残差平方和的加权和最小化时，如果每个权重等于测量方差的倒数，则为蓝色。

但是，`lmfit`接受残差，而不是平方残差，所以不要只是去

```
 # This is what you do with no errorbars -> equal weights.
    resids = model - data
    return resids 
```

你应该做这样的事情（`scipy`导入为`sp`）：

```
 # Do this to include errors as weights.
    resids = model - data
    weighted = sp.sqrt(resids ** 2 / sig ** 2)
    return weighted 
```

这应该为您提供正确加权的拟合。

# java - 泛型通配符：将超类对象分配给子类对象列表

> ID：15255929
> 
> 赞同：2
> 
> 时间：2013-03-06T19:11:01.330
> 
> 标签：java, generics

**问题_1**

```
class A {}
class B extends A {}

A aObj = new A();
B bObj = new B(); 
```

我们知道下面会在**运行时**导致类转换异常。

```
List<B> list_B = new ArrayList<B>();
list_B.add((B)aObj); //ClassCast exception 
```

但

```
List<? extends A> list_4__A_AND_SubClass_A = new ArrayList<B>();
List<A> list_A = (ArrayList<A>)list_4__A_AND_SubClass_A;
list_A.add(aObj); // No exception here, Why? 
```

**问题2**

在下面的方法中

```
void method(List<? extends A> list_4__A_AND_SubClass_A){
   //How do i find the passed list is of Type A or B ??
   // To decide List<A> list_A = (ArrayList<A>)list_4__A_AND_SubClass_A;
   //        OR List<B> list_B = (ArrayList<B>)list_4__A_AND_SubClass_A;
} 
```

* * *

**更新**

Q_1

更好的是，我应该避免参考下面的集合进行修改；除非我们非常确定通过的列表是 A/B 类型；以保持该列表的完整性。

```
 List<A> list_A = (ArrayList<A>)list_4__A_AND_SubClass_A; 
```

Q_2

我认为我们可以从调用方方法向调用方方法再传递一个参数，以在调用方法处进行修改时保持列表的完整性。

```
void method(List<? extends A> list_4__A_AND_SubClass_A, Class<? extends A> obj){
     if (A.class.isAssignableFrom(obj)) {
         List<A> list_A = (List<A>)list_4__A_AND_SubClass_A;
            list_A.add(new A());
            list_A.add(new B());
     } else if (B.class.isAssignableFrom(obj)){
         List<B> list_B = (List<B>)list_4__A_AND_SubClass_A;
            //list_B.add(new A()); //only we can add B
            list_B.add(new B());
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:14:44.607

理想情况下，从`List<B>`to的转换`List<A>`应该在运行时抛出异常；不幸的是，Java 无法在运行时做出决定。幸运的是，在编译时，您会收到该演员表的警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:42:31.410

这一行：

```
List<A> list_A = (ArrayList<A>)list_4__A_AND_SubClass_A; 
```

产生“未检查”警告，因为您可能（并且确实是）将仅包含`Bs`的列表转换为可以包含`Bs`或的列表`As`（请记住，因为 B 是 A 的子类，它是`A`），所以下一行

```
list_A.add(aObj); 
```

完全可以，因为您没有注意警告。

一般来说，对于泛型，`List< ? extends A>`并不总是与`List<A>`.

回答问题 2。
不幸的是，所有泛型都是在编译时检查的，并且在运行时可用的信息并不多，因此在运行时，您只有一个对象列表，无法有效地测试这是什么类型的列表。这个“特性”是在 Java 1.5 中引入的向后兼容性和泛型之间的折衷。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T19:19:02.087

1.  您在这里`List<? extends A>`定义通配符类型，这意味着 list 接受任何`A`来自`A`. 因此它不会抛出异常

2.  您无法在这里检测到列表的具体内部类型您必须直接传递它，即您的方法签名必须如下

    无效方法（列表列表）

# list - Sencha Touch 2：ListItems 为空白

> ID：15255931
> 
> 赞同：1
> 
> 时间：2013-03-06T19:11:04.700
> 
> 标签：list, extjs, sencha-touch-2, listitem

我的 ListItems 一直显示为没有文字的空白。

最初，我的项目只是使用 {field_name} 使用 List 对象的 itemTpl 定义格式化。这工作得很好，但当然功能有限。

因此，我使用 dataMap 查看了 DataView 的 ST2 文档指南（[http://docs.sencha.com/touch/2-1/#!/guide/dataview](http://docs.sencha.com/touch/2-1/#!/guide/dataview)）并尝试复制它。但是，无论出于何种原因，我似乎无法让内容实际呈现。我得到了预期数量的结果，并且披露行动确实打开了正确/相应的记录。只是这些项目都是空白的，没有文字。

商店通过代理加载 JSON 数据。数据有许多字段，包括一个称为“标题”的字段。现在，这就是我想要在列表项中设置样式和显示的内容。根据“标题”内容，我可能会采用不同的样式。

像往常一样，非常感谢任何帮助。谢谢！

穆罕默德。

加利福尼亚州圣何塞

我的列表对象：

```
Ext.define('qxtapp.view.ResultsList', {
    extend: 'Ext.dataview.List',
    alias: 'widget.resultsList',
    xtype: 'resultsList',
    requires: [
        'qxtapp.view.ResultsListItem',
        'Ext.plugin.ListPaging'
    ],

    config: {
        defaultType: 'resultslistitem',
        loadingText: 'Performing search...<br>This may take up to 1 minute.',
        emptyText: 'No results found.',
        useComponents: true,
        store: 'SearchResults',
        onItemDisclosure: true,
        plugins: [
            {
                xclass: 'Ext.plugin.ListPaging',
                autoPaging: true
            }
        ]
    }
}); 
```

我的 ListItem 对象：

```
Ext.define('qxtapp.view.ResultsListItem', {
    extend: 'Ext.dataview.component.ListItem',
    xtype : 'resultslistitem',

    config: {
        captionPanel: true,
        dataMap: {
            getCaptionPanel: {
                setText: 'caption'
            }
        }
    },
    applyCaptionPanel: function(config) {
        return Ext.factory(config, Ext.Panel, this.getCaptionPanel());
    },
    updateCaptionPanel: function(newCaptionPanel, oldCaptionPanel) {
        if(oldCaptionPanel) {
            this.remove(oldCaptionPanel);
        }
        if(newCaptionPanel) {
            this.add(newCaptionPanel);
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:57:56.427

没关系，我意识到自己的错误。

数据图中的愚蠢错误。由于我将我的配置转换为面板，而不是按钮，我的设置器应该是“setHtml”而不是“setText”。现在工作。

谢谢。

```
dataMap: {
        getCaptionPanel: {
            setText: 'caption'  //  <---- should have been "setHtml:..."
        }
    } 
```

# perl - Perl CGI：查询参数在 Perl 升级后被修改

> ID：15255934
> 
> 赞同：1
> 
> 时间：2013-03-06T19:11:17.900
> 
> 标签：perl, cgi

我们最近将 Perl 从 5.8.4 升级到 5.16.1（CGI 版本 3.59）。我的网络应用程序有几个页面，它们都通过 CGI 表单将数据从一个页面传递到另一个页面。当我在每一页中插入一个 $query->Dump 时，前两页很好，但第三页已经完全修改了数据。名称/值对不是您所期望的，有些名称不应该存在，等等。例如。第 2 页包含预期的名称/值对：

内容类型：文本/html；字符集=ISO-8859-1

```
. selectedOrganism
    All
.  selectedExpters
    All
    LKRAMER 
```

而第 3 页有 munged 名称/值对，包括：

```
. -----------------------------17694310364738783961604838496" 

   <with 12 null values>

. Content-Disposition: form-data

. All
     <3 null values>

. LKRAMER

     <null value> 
```

这是在我们的开发盒上运行的；我们的生产盒子还没有升级，代码是一样的，没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:45:15.037

我发现了问题。而不是将查询对象实例化为：

```
 my $query = new CGI; 
```

代码有：

```
 my $query = CGI->new(\*STDIN); 
```

# php - 将文件名插入表中

> ID：15255938
> 
> 赞同：0
> 
> 时间：2013-03-06T19:11:29.743
> 
> 标签：php, mysql

我正在尝试为每个图像插入一行，该行通过我创建的脚本上传以充当画廊，尽管我在将图像名称实际插入表中时遇到了一些问题。我已经设法发布了画廊 ID，现在我需要对图像名称执行相同的操作。我尝试过使用不同的方法（例如使用变量等）来解决问题。我不太确定如何成功地做到这一点：S。

```
$file = ($_FILES['file']['name']);
  move_uploaded_file($_FILES["file"]["tmp_name"],
  "../galleries/images/" . $_FILES["file"]["name"]);
  $sql="INSERT INTO images (url, gallery)
    VALUES
  ('$file','$id')"; 
```

谢谢 - 乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:19:12.303

你为什么在`()`这里？

```
$file = ($__FILES['file']['name']); 
```

`()`如果您想要除布尔值以外的任何值作为 的值，则需要删除`$file`。

# java - 您应该使用 equals 方法还是比较 Esper 中 EventType 的事件类型 ID？

> ID：15255939
> 
> 赞同：0
> 
> 时间：2013-03-06T19:11:32.980
> 
> 标签：java, esper

我正在尝试检查 Esper 的两个`EventType`对象是否相等。相等是指它们是具有相同属性的相同事件类型。

我想知道最好的方法是什么。使用 equals 方法是否安全，如下所示：

```
eventType.equals(otherEventType) 
```

作为`EventType`一个接口，我不能确定所有的实现类都会覆盖 equals 方法。因此，我认为上面的代码不是一个好主意。

我能想到的另一个选项是比较事件类型 ID，如下所示：

```
eventType.getEventTypeId() == eventType.getEventTypeId() 
```

但是，我不确定这些 ID 是如何分配的。这会给我我正在寻找的东西，还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:50:00.873

事件类型 ID 是每种类型的唯一 ID，因此不适合。“等于”也不合适。由于类型是否相同取决于应用程序语义，因此您需要编写自己的比较。

# entity-framework - 实体框架关系问题

> ID：15255943
> 
> 赞同：1
> 
> 时间：2013-03-06T19:11:52.000
> 
> 标签：entity-framework, relationship

我有以下模型：

```
public class Employee
    {
        public int ID { get; set; }
        public string name { get; set; }
        public int LocationID { set; get; }

        public virtual Location Location { set; get; }

    }
    public class Location {

        public int ID { set; get; }
        public string NAME { set; get; }
        public virtual ICollection<Employee> LocationEmployees { get; set; }

    } 
```

基本上，一个员工属于一个位置，一个位置有很多员工。我想在位置模型中添加一个名为 location contact 的列，该列将是一个员工 ID。我尝试通过代码优先迁移添加它，但它没有产生预期的结果。

添加的列

```
public class Employee
    {
        public int ID { get; set; }
        public string name { get; set; }
        public int LocationID { set; get; }

        public virtual Location Location { set; get; }

    }
    public class Location {

        public int ID { set; get; }
        public string NAME { set; get; }

        public int EmployeeID { get; set; }

        public virtual Employee Employee { get; set; }
        public virtual ICollection<Employee> LocationEmployees { get; set; }

    } 
```

生成的迁移文件：

```
public override void Up()
        {
            DropForeignKey("dbo.Employees", "LocationID", "dbo.Locations");
            DropIndex("dbo.Employees", new[] { "LocationID" });
            RenameColumn(table: "dbo.Employees", name: "LocationID", newName: "Location_ID");
            AddColumn("dbo.Locations", "EmployeeID", c => c.Int(nullable: true));
            AddForeignKey("dbo.Employees", "Location_ID", "dbo.Locations", "ID");
            AddForeignKey("dbo.Employees", "LocationID", "dbo.Locations", "ID", cascadeDelete: false);
            AddForeignKey("dbo.Locations", "EmployeeID", "dbo.Employees", "ID", cascadeDelete: false);
            CreateIndex("dbo.Employees", "Location_ID");
            CreateIndex("dbo.Employees", "LocationID");
            CreateIndex("dbo.Locations", "EmployeeID");
        }

        public override void Down()
        {
            DropIndex("dbo.Locations", new[] { "EmployeeID" });
            DropIndex("dbo.Employees", new[] { "LocationID" });
            DropIndex("dbo.Employees", new[] { "Location_ID" });
            DropForeignKey("dbo.Locations", "EmployeeID", "dbo.Employees");
            DropForeignKey("dbo.Employees", "LocationID", "dbo.Locations");
            DropForeignKey("dbo.Employees", "Location_ID", "dbo.Locations");
            DropColumn("dbo.Locations", "EmployeeID");
            RenameColumn(table: "dbo.Employees", name: "Location_ID", newName: "LocationID");
            CreateIndex("dbo.Employees", "LocationID");
            AddForeignKey("dbo.Employees", "LocationID", "dbo.Locations", "ID", cascadeDelete: false);
        } 
```

我收到此错误：

```
System.Data.SqlClient.SqlException (0x80131904): Foreign key 'FK_dbo.Employees_dbo.Locations_LocationID' references invalid column 'LocationID' in referencing table 'Employees'.
Could not create constraint. See previous errors.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at System.Data.Entity.Migrations.DbMigrator.ExecuteSql(DbTransaction transaction, MigrationStatement migrationStatement)
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.ExecuteSql(DbTransaction transaction, MigrationStatement migrationStatement)
   at System.Data.Entity.Migrations.DbMigrator.ExecuteStatements(IEnumerable`1 migrationStatements)
   at System.Data.Entity.Migrations.Infrastructure.MigratorBase.ExecuteStatements(IEnumerable`1 migrationStatements)
   at System.Data.Entity.Migrations.DbMigrator.ExecuteOperations(String migrationId, XDocument targetModel, IEnumerable`1 operations, Boolean downgrading, Boolean auto)
   at System.Data.Entity.Migrations.DbMigrator.ApplyMigration(DbMigration migration, DbMigration lastMigration)
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.ApplyMigration(DbMigration migration, DbMigration lastMigration)
   at System.Data.Entity.Migrations.DbMigrator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
   at System.Data.Entity.Migrations.DbMigrator.Update(String targetMigration)
   at System.Data.Entity.Migrations.Infrastructure.MigratorBase.Update(String targetMigration)
   at System.Data.Entity.Migrations.Design.ToolingFacade.UpdateRunner.RunCore()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run()
Foreign key 'FK_dbo.Employees_dbo.Locations_LocationID' references invalid column 'LocationID' in referencing table 'Employees'.
Could not create constraint. See previous errors. 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:50:15.833

我不确切知道迁移为什么会引发此异常，但很明显它不会创建您想要的关系。*您可以在添加三个*外键而不是*两个*`Up`的方法中看到它。EF 在这里创建了三个关系，其中一个具有默认的 FK name 。**`Location_ID`**

 **原因是 EF 不知道是否`Employee.Location`具有`Location.Employee`或`Location.LocationEmployees`作为反向导航属性。

您必须使用数据注释明确定义它...

```
public class Employee
{
    //...

    [InverseProperty("LocationEmployees")]
    public virtual Location Location { set; get; }
} 
```

...或使用 Fluent API：

```
modelBuilder.Entity<Location>()
    .HasMany(l => l.LocationEmployees)
    .WithRequired(e => e.Location)
    .HasForeignKey(e => e.LocationID);

modelBuilder.Entity<Location>()
    .HasOptional(l => l.Employee)
    .WithMany()
    .HasForeignKey(l => l.EmployeeID); 
```

请注意，我在第二个关系中使用`HasOptional`了而不是，`HasRequired`这意味着您还必须使`Location`模型中的 FK 可以为空：

```
public int? EmployeeID { get; set; } 
```

这两种关系都不是必需的，因为没有有效的排序`Employee`，并且`Location`实体可以插入到数据库中，因为它们相互依赖。

或者，如果更适合您的业务需求，您也可以与`int? LocationID`in建立其他关系。`Employee`**

# highcharts - 设置数据分组

> ID：15255947
> 
> 赞同：0
> 
> 时间：2013-03-06T19:12:01.450
> 
> 标签：highcharts

在烛台图表上，我在分钟解处有 oclh 值。

我希望能够以编程方式设置分组范围（1min、5min、15min、30min、1h、2h、4h、8h、12h、1w、1m、1y）。

可以直接使用highcharts吗？或者我应该依赖 ochl 操作库，是否有这样的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T05:27:49.523

是的，可以通过[**`rangeSelector`**](http://api.highcharts.com/highstock#rangeSelector).

# 类型

定义时间跨度，可以是“毫秒”、“秒”、“分钟”、“日”、“周”、“月”、“ytd”（年初至今）、“年”和“全部”之一。

# 数数

定义要使用多少个已定义类型的单位。

# 文本

按钮本身的文本。

# 用法

```
 rangeSelector: {
        enabled: true,
        buttons: [{
            type: 'minute',
            count: 1,
            text: '1min'
        }, {
            type: 'minute',
            count: 5,
            text: '5min'
        }, {
            type: 'minute',
            count: 60,
            text: '1hr'
        }, {
            type: 'week',
            count: 1,
            text: '1w'
        }, {
            type: 'month',
            count: 1,
            text: '1m'
        }, {
            type: 'year',
            count: 1,
            text: '1y'
        }, {
            type: 'all',
            text: 'All'
        }]
    } 
```

[**`Fiddled`**](http://jsfiddle.net/gopinaghr/h5sSR/2/)例子。

希望这可以帮助。:)

# android - 如何访问外部存储？

> ID：15255955
> 
> 赞同：-1
> 
> 时间：2013-03-06T19:12:30.623
> 
> 标签：android, storage

我正在创建一个 Android 应用程序。我用

```
String path = Environment.getExternalStorageDirectory().getPath(); 
```

获取外部存储路径并在其中创建一个新文件。看来我的代码可以运行。但我找不到它创建的新文件。你能告诉我如何通过计算机找到文件吗？比如外部存储的路径是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:21:21.910

请使用 DDMS，使用文件资源管理器并查看文件夹 /mnt/sdcard/ 应该在那里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:17:58.407

在大多数设备上，这将返回 /mnt/sdcard 或 /mnt/sdcard-ext。如果您通过 USB 挂载 SD 卡，这将是磁盘的根目录。如果您使用 adb 来提取文件，您将使用完整的 /mnt/sdcard/... 路径。

关于您的问题的奇怪之处在于您的代码中有字符串中的值。通常人们只会检查字符串或将其值记录到控制台。

# html - socket.io 客户端到客户端消息传递

> ID：15255969
> 
> 赞同：3
> 
> 时间：2013-03-06T19:13:23.637
> 
> 标签：html, node.js, sockets, socket.io

我无法让基本客户端到客户端（或真正的客户端-> 服务器-> 客户端）与 socket.io 一起工作。这是我现在拥有的代码：

```
io.sockets.on('connection', function (socket) {

users.push(socket.sessionId);

for(userID in users)    {
    console.log(userID);
    io.sockets.socket(userID).emit('message', { msg: 'New User Connected succesfully' });
}
socket.emit('message', { msg: 'Connected succesfully' });

socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

据我了解，这应该将新用户消息发送给每个连接的用户（个人，因为我想稍后再做实际的个人消息）。相反，我最后只收到“连接成功”消息。我的服务器或客户端没有收到任何错误或其他负面指示。

关于为什么`io.sockets.socket(userID).emit()`不起作用或用什么代替它的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T20:24:31.583

Socket.io 有房间的概念，一旦一个套接字加入了一个房间，它将接收发送到一个房间的所有消息，所以你不需要跟踪谁在房间里，处理断开连接等......

在连接时，您将使用：

```
socket.join('room') 
```

并向那个房间里的每个人发送信息：

```
io.sockets.in('room').emit('event_name', data) 
```

关于 socket.io wiki 的更多信息：[https ://github.com/LearnBoost/socket.io/wiki/Rooms](https://github.com/LearnBoost/socket.io/wiki/Rooms)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T20:28:53.023

尝试

```
users.push(socket); // without .sessionId

for (var u in users)    {
   // users[u] is now the socket
   console.log(users[u].id);
   users[u].emit('message', { msg: 'New User Connected succesfully' });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-27T11:47:37.327

您现在还可以使用...

```
io.to('room').emit('event_name', data); 
```

作为 io.sockets.in 的替代品

# nuget - nuget 命令行 - 如何获取最新版本的软件包版本？

> ID：15255973
> 
> 赞同：4
> 
> 时间：2013-03-06T19:13:35.977
> 
> 标签：nuget

在 powershell 脚本中，我希望能够知道我所依赖的包的版本。我可以让 nuget.exe 告诉我这些信息吗？

我试图做类似的事情：

```
nuget list nunit.runners 
```

这适用于某些包，但对于某些包（如示例中的 nunit.runners），它会返回一个完整的包列表，而不仅仅是我想要的那个。

如果有人能指出一种方法来使 nuget list 在搜索条件的完全匹配上仅返回单个项目就足够了。

不过，我的问题实际上是，向 nuget 提要询问特定软件包最新版本的版本号的最直接方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-04T15:19:24.260

这是[codeplex 中要求的功能](https://nuget.codeplex.com/workitem/2130)。我在 Visual Studio 之外的 PowerShell 中工作，并且能够使用以下方法解决：

```
nuget list id:EntityFramework | ? { $_ -match "^EntityFramework\s+" } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-01-06T10:29:25.797

只需安装 - **dotnet-search**

[https://www.nuget.org/packages/dotnet-search/](https://www.nuget.org/packages/dotnet-search/)

然后运行以下命令：

> 点网搜索

这对我有帮助..！

# javascript - 获取光标位置的函数似乎与输入验证的定位错误

> ID：15255976
> 
> 赞同：0
> 
> 时间：2013-03-06T19:13:48.420
> 
> 标签：javascript, jquery, validation

我正在尝试验证输入框中的输入，因此我需要找到一种方法来删除添加到字符串中的字符。我的想法，使用光标位置。我的实现应该可以工作，但是每次输入获得焦点时，您都​​可以看到少数几个字符的故障。

我的小提琴在：http: [//jsfiddle.net/fallenreaper/TSwyk/](http://jsfiddle.net/fallenreaper/TSwyk/)

我究竟做错了什么？当我想验证时，我不希望它检查并删除错误的字符。

我的javascript代码是（我相信使用jquery 1.7.2）：

```
function getCursorPosition(jqueryItem)
{
    var input = jqueryItem.get(0);
    if (!input) return; // No (input) element found
    if ('selectionStart' in input) {
        // Standard-compliant browsers
        return input.selectionStart;
    } else if (document.selection) {
        // IE
        input.focus();
        var sel = document.selection.createRange();
        var selLen = document.selection.createRange().text.length;
        sel.moveStart('character', -input.value.length);
        $("#sel").html(sel);
        $("#selLen").html(selLen);
        return sel.text.length - selLen;
     }
}
    $(function(){
        alert("loaded");
        $("input").on("input", function(){
            var cPos = getCursorPosition($(this));
            $("#cursorPos").html(cPos);
            var FLAG = 'a';
            $("#charatpos").html($(this).val().charAt(cPos));
            $("#"+$(this).attr("id")+"count").html($(this).val().length);
            if($(this).val().charAt(cPos) == FLAG){
                var str = $(this).val();
                var sArr = str.split("");
                sArr.splice(cPos,1);
                str = sArr.join("");
                $(this).val(str);
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:23:06.673

这可以通过将事件更改为**.keypress()**而不是**on("input")**来解决。这样就不会有差异，仍然可以完成工作。作为旁注，请确保在使用 keypress() 时，为删除部分添加一个简单的：

```
event.preventDefault(); 
```

所以这种方式传播不会继续。这样，新键实际上也不会被按下并显示出来。

# c++ - 无继承多态性

> ID：15255978
> 
> 赞同：1
> 
> 时间：2013-03-06T19:13:48.763
> 
> 标签：c++, boost, c++11, delegates, polymorphism

**X：**我有一组不相关的类似容器的对象（矢量、地图、树……）处理不同不相关类型的对象。这些容器中对象的生命周期在它们的某些子集之间共享。我有一个对象负责他们的同步。我能想到的同步类的最简单实现是有一个`BaseContainerLike`指针向量，其中`BaseContainerLike`一个类为我想要管理的所有类似容器的对象实现一个公共接口。但并非所有人都像容器一样。它们*可以*像容器一样使用，但是让它们从一个通用的基类继承感觉很奇怪，我担心它会非常强烈地结合我的设计。

所以我创建了一个这样的`ContainerLikeInterface`类：

```
struct ContainerLikeInterface {
template<T>
ContainerLikeInterface(T& t) 
 : create([](int i){ return t->create(i); }),    // this is just an example
   delete([](int i){ return t->delete(i); }) {}

std::function<void(int)> create;
std::function<void(int)> delete;
};

template<class T>
ContainerLikeInterface make_containerLikeInterface(T& t) {
  return ContainerLikeInterface(t);
} 
```

这使我能够以非侵入性的方式轻松创建接口向量（我可以部分地将构造函数专门用于不同类型）。我使用这种方法的代码比使用继承时稍快，但它需要更多的内存和更长的编译时间（但我不优先考虑编译时间）。但是，我不知道这种方法是否能很好地适应我的项目。我读过一些关于价值语义的文章，其中人们更喜欢将对象所有权转移到接口，所以我有以下问题：

*   这种方法的优点/缺点是什么？
*   从长远来看，这会给我带来一些问题吗？
*   我应该改用继承吗？
*   我应该以不同的方式实现吗？
*   我应该改用图书馆吗？（[boost::TypeErasure](http://svn.boost.org/svn/boost/sandbox/type_erasure/)、[adobe::poly](http://stlab.adobe.com/group__poly__related.html)或[pyrtsa/poly](https://github.com/pyrtsa/poly)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:15:59.380

你的界面有点像 [Rust object system](http://smallcultfollowing.com/babysteps/blog/2012/04/09/rusts-object-system/)中的界面系统。经典的基于 VMT 的接口有一个指向对象的指针，该对象包含指向 VMT 的指针。你的有 2 个指针：一个指向对象，另一个指向方法表。它 [几乎] 总是看起来比虚函数更强大，但你已经提到了一些缺点（内存使用等）。至于速度，`std::function`使用标准分配器来保存指向`t`. 如果你调用`ContainerLikeInterface`构造函数很多，它可能会导致一些性能下降，因为它需要在你的界面中至少一个分配`std::function`，你可以为此编写自己的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-03T15:08:40.603

您的基本想法（不需要继承）很好。我建议改用 Adob​​e.Poly。当您使用 1`std::function`每个单个操作时，您有 N 种虚拟表（指针），以及可能的 N 堆分配（取决于是否可以应用 SBO（小缓冲区优化））。

您也很可能会遇到对象生命周期管理问题。在您的实现中，您假设真实对象的寿命比“接口”长。迟早你会弄错的。这就是为什么我会鼓励一种[价值语义的](https://akrzemi1.wordpress.com/2012/02/03/value-semantics/)方法。Adobe.Poly 为您提供。

使用 Adob​​e.Poly，您只能获得一个 vtable（指针）。它还实现了 SBO：可能不是单个分配。

我不一定会选择 Boost.TypeErasure。它需要学习另一种“语言”来指定接口，它利用了大量的元编程，并且截至今天它还没有实现 SBO。

Adobe.Poly 没有很好的文档记录。有关如何使用它的示例，请参阅[这篇文章。](https://akrzemi1.wordpress.com/2013/12/06/type-erasure-part-ii/)另外，请参阅[这篇论文](https://akrzemi1.files.wordpress.com/2013/10/mpool2007-marcus.pdf)，了解它是如何实现的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T19:33:27.583

您实际上是在创建一个代理对象，其`ContainerLikeInterface`接口带有指针或对 some 的引用`T`。

有一种方法可以避免创建代理，同时仍然使用无法派生的标准容器`ContainerLikeInterface`。它可能被称为*混合设计模式*，并且在 C++11 中具有完美转发，它看起来像：

```
#include <vector>

struct IContainerLikeInterface
{
    virtual void create(int) = 0;
    virtual void erase(int) = 0;
};

template<class T>
struct ContainerLikeInterface : T, IContainerLikeInterface
{
    template<class... Args>
    ContainerLikeInterface(Args&& ...args) 
        : T(std::forward<Args>(args)...)
    {}

    // implement IContainerLikeInterface
    void create(int) override;
    void erase(int) override;
};

int main() {
    ContainerLikeInterface<std::vector<int> > v(10);
    v.size();
} 
```

但是，它是侵入性的，因为所有相关容器的声明，例如`std::vector<int>`，都必须更改为`ContainerLikeInterface<std::vector<int> >`. 不过用法保持不变，因为`ContainerLikeInterface<T>`is-a `T`。

# java - 将 Java XML 和持久性注释放在同一个 bean 上是否有效？

> ID：15255983
> 
> 赞同：4
> 
> 时间：2013-03-06T19:14:02.700
> 
> 标签：java, spring, annotations, persistence

我还没有实现，但我想知道是否可以将 XML 注释和持久性注释放在同一个 bean 上。

我问的原因是因为我想使用 Spring OXM 读取一些 XML，将 XML 写入域对象，这些域对象也是映射到数据库的域对象（该映射已经完成）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T19:15:08.327

注释只是元数据。就他们自己而言，他们不会对您的代码做任何事情。您需要使用反射来利用它们。所以，是的，你可以在你的类和字段上放置任意数量的注释。

您的持久性框架将读取持久性注释，而您的 XML 解析器将读取 XML 注释。

例如。

```
@Entity // JPA
@XmlRootElement(name = "book") // JAXB
@SuppressWarnings(value = "random") // whatever other annotation
public class User  {

    @Id
    @GeneratedValue
    @GenericGenerator(name = "incremental", strategy = "increment")
    @XmlElement
    private Long userID;

    // more
} 
```

# c++ - glibc 检测到 *** free()：无效指针：Python c++ 和 Swig

> ID：15255989
> 
> 赞同：1
> 
> 时间：2013-03-06T19:14:28.697
> 
> 标签：c++, python, swig

我必须运行一些用 Python 编写的单元测试。我们有在 C++ 中测试的代码，所以我将它编译成一个共享对象，并使用 swig 为 python 脚本提供一个接口来调用必要的 api 进行测试。

现在，当我运行其中一个 python 脚本（它显然正在访问我打算测试的 c++ 代码库）时，我得到一个“glibc 检测到 free()：无效指针”。现在我确实明白存在一些内存问题，要么是双重释放，要么我正在释放无法访问的内存。现在我向各位专家提出的要求：

1]我没有得到任何回溯（甚至没有行号），有没有知道问题发生在哪里？除了脚本在某个时候突然停止并打印类似这样的内容之外，我没有得到任何信息
*** glibc detected *** free(): invalid pointer: 0x099e9b28 ***
我能以某种方式获得回溯吗？通过设置一些标志可能是什么？

2] 我跑了 valgrind:
"valgrind --leak-check=yes ./myscript.py"
我没有得到太多东西，其中有几行：
glibc检测到free（）：无效指针：0x099e9b28
==25728==
== 25728== 条件跳转或移动取决于未初始化的值
==25728== 在 0x625AEA: PyObject_Free (in /usr/lib/libpython2.3.so.1.0)
==25728== by 0x614C7F: (within /usr /lib/libpython2.3.so.1.0)
==25728== by 0x61EA53: (在 /usr/lib/libpython2.3.so.1.0 内)

我基本上没有得到任何与我的代码相关的东西。那么我还应该对 valgrind 做些什么吗？

3] 我尝试了 printfs，它实际上让我一无所获。
4]我试过gdb：
提示> gdb python
gdb> set args myscript.py
gdb> run

这运行脚本，我无法设置任何断点，它运行并打印错误。没有绝对的帮助。我还应该对 GDB 做些什么吗？有什么方法可以设置断点？

非常感谢你们能给我的任何指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T06:48:24.340

我终于想通了！我执行了命令
ulimit -c unlimited

在此之后我看到一个核心转储，现在我可以通过
gdb /usr/bin/python2.3 core.31685对其进行分析

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:40:29.077

[我已经使用 Google 的heap checker](http://google-perftools.googlecode.com/svn/trunk/doc/heap_checker.html)成功调试了此类问题。它将为您提供分配点和解除分配点的堆栈跟踪。

# git - 这些 git dot un 文件是什么？

> ID：15255991
> 
> 赞同：1
> 
> 时间：2013-03-06T19:14:37.723
> 
> 标签：git, vim

在我的 git repo 中，结果`ls -a`是：

```
.fileInFirstCommit.un~  
.fileInSecondCommit.un~ 
.git                    
fileInFirstCommit       
fileInFirstCommit~      
fileInSecondCommit      
fileInSecondCommit~ 
```

这些 .un~ 文件是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T19:31:37.347

这些是 Vim 的`undofiles`。`undofile`是一个相对较新的功能，允许您存储单个文件的撤消历史记录。[这篇博](http://amix.dk/blog/post/19548)文很好地涵盖了基本思想。参见`:help new-persistent-undo`Vim。

# html - 导航相对间距

> ID：15255992
> 
> 赞同：0
> 
> 时间：2013-03-06T19:14:40.347
> 
> 标签：html, css, semantic-markup

我在一个无序列表中有许多列表项，它们将用作水平导航。第一个和最后一个项目（是按钮）左右浮动，但是有一种标题（录取过程）居中，然后按钮集（后退/下一个）需要在这个导航中向右大约 75%列表。

我相信最好使用像％，ems这样的相对值吗？它只需要灵活且响应迅速。我没有添加 CSS，因为它可能只会混淆问题。

```
<ul id="form-fill-nav" class="clearfix">
      <li class="first"><a href="#" class="btn-nav-1">Selected Forms</a></li>
      <li>Admissions Process</li>
      <li><a href="#" class="btn-nav-1">Back</a></li>
      <li><a href="#" class="btn-nav-1">Next</a></li>
      <li class="f-right"><a href="#" class="btn-nav-1">22</a></li>
    </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-03T20:04:13.387

使用上下文来确定解决方案：

*   基于百分比的值由相对框大小控制

*   `em/ex/ch/rem`基于值由相对字体大小控制

*   `vw/vh/vmin/vmax`基于值由相对视口（窗口）大小控制

**参考**

*   [CSS 值和单位模块第 3 级：相对长度](http://www.w3.org/TR/css3-values/#relative-lengths)

# node.js - 为什么 Node.js 中有 http.get 而没有 http.post？

> ID：15255993
> 
> 赞同：1
> 
> 时间：2013-03-06T19:14:40.480
> 
> 标签：node.js, http, post

我知道`http`暴露`get`，因为它是一种经常使用的方法，用*Node: Up and Running*的作者的话来说，但我不知道为什么没有类似的`post`方法。我知道`post`也必须采取一个身体，但这似乎微不足道。所以为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:16:52.340

Isaacs 甚至不想要`http`Node 核心中的模块，因为它经常被使用，所以很可能它被放在那里；但他们认为你可以用[`http.request`](http://nodejs.org/api/http.html#http_http_request_options_callback).

此外，如果他们这样做，`POST`那么为什么不`PUT`这样做`DELETE`等等。可能他们放入了`get`包装中，然后认为没有理由继续在核心中这样做。它只是作为常见`GET`请求的快速帮手。

Node 的理念是“如果它不必在核心，那么它不*应该*”，所以，随心所欲。